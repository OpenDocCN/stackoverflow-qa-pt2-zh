# StackOverflow 问答 15494000-15494999

# jquery - 使用 Jquery 激活 Ul li

> ID：15494004
> 
> 赞同：0
> 
> 时间：2013-03-19T07:45:38.257
> 
> 标签：jquery, html, css, ajax

我正在尝试将菜单与活动选项一起放置。当我使用 jquery 添加活动类时它不起作用。我在下面添加了所有的 css 和 jquery 代码。谁能帮我解决这个问题。

```
 <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <script src="js/modernizr-2.0.6.min.js" type="text/javascript"></script> 
<style type="text/css">

* {
    margin: 0;
    padding: 0;
    outline: none;  
}

ul {
    list-style: none;   
}

.navigation {
    margin: 0px 0;  
    font: bold 12px/18px "Helvetica Neue", Helvetica, Arial, sans-serif;
    text-transform: uppercase;
    color: #444;
    width:100%;
    -webkit-box-shadow: 0 1px rgba(255,255,255,1) inset;
    background: #F7F7F7; /* Old browsers */
    background: -moz-linear-gradient(top, #F7F7F7 0%, #EDEDED 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F7F7F7), color-stop(100%,#EDEDED)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* IE10+ */
    background: linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F7F7F7', endColorstr='#EDEDED',GradientType=0 ); /* IE6-9 */    
}

.navigation:after {
    clear: both;
    content: ".";
    display: block;
    height: 0;
    visibility: hidden;
}

.navigation ul {    
    float: left;
    border-radius: 0px;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.07);
    -webkit-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.07);
    overflow: hidden;
}

.navigation li {
    float: left;
    border-style: solid; 
    border-width: 1px;
    border-color: #BABABA #BABABA #BABABA #FFF;
    box-shadow: 0 1px rgba(255,255,255,1) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,1) inset;
    background: #F7F7F7; /* Old browsers */
    background: -moz-linear-gradient(top, #F7F7F7 0%, #EDEDED 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F7F7F7), color-stop(100%,#EDEDED)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* IE10+ */
    background: linear-gradient(top, #F7F7F7 0%,#EDEDED 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F7F7F7', endColorstr='#EDEDED',GradientType=0 ); /* IE6-9 */    
}

.navigation li:hover, navigation li.current {
    box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    border-color: #262626 !important;
    background: #4D4D4D; /* Old browsers */
    background: -moz-linear-gradient(top, #4D4D4D 0%, #262626 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4D4D4D), color-stop(100%,#262626)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* IE10+ */
    background: linear-gradient(top, #4D4D4D 0%,#262626 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4D4D4D', endColorstr='#262626',GradientType=0 ); /* IE6-9 */
}

.navigation a {
    display: block;
    padding: 10px 15px;
    color: #444;
    text-decoration: none;
    text-shadow: 0 1px #FFF;
}
.navigation  a.active{
    box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    -webkit-box-shadow: 0 1px rgba(255,255,255,0.2) inset;
    border-color: #262626 !important;
    background: #4D4D4D; /* Old browsers */
    background: -moz-linear-gradient(top, #4D4D4D 0%, #262626 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4D4D4D), color-stop(100%,#262626)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #4D4D4D 0%,#262626 100%); /* IE10+ */
    background: linear-gradient(top, #4D4D4D 0%,#262626 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4D4D4D', endColorstr='#262626',GradientType=0 ); /* IE6-9 */
    color:#fff;
}

.navigation a:hover, #navigation li.current a {
    color: #FFF;
    text-shadow: 0 1px #000;
}

.navigation li:first-child {
    border-left-color: #BABABA;
    border-radius: 0px 0 0 0px;
}

.navigation li:last-child {
    border-radius: 0 0px 0px 0;
}

</style>
<script type="text/javascript"> 

$(document).ready(function() {  

    $(".navigation li").click(function() {  
        $(".navigation li").removeClass("a.active"); //Remove any "active" class  
        $(this).addClass("a.active"); //Add "active" class to selected tab  

        $(activeTab).show(); //Fade in the active content  
        return false;  
    });  

});  
</script> 
<div id="banner">
<div id="topnavbar">
<div id="topnavmenu">
<a rel="nofollow" href="http://www.checkmytrip.com/">CheckmyTrip</a> | <a rel="nofollow" href="baggage.php">Baggage Allowance</a>| <a rel="nofollow" href="traveltips.php">Travel Tips</a>
</div>
</div>
<img src="images/Banner.png"  width="1000" height="150"/>

</div>

    <nav class="navigation">
        <ul>
            <li><a href="index.php" class="active" >Home</a></li>
            <li><a  href="cheap-flights-to-colombo-sri-lanka.php">Flights</a></li>
            <li><a href="destination.php">Travel Guide</a></li>
            <li><a href="holidaytours.php">Tours & Holidays</a></li>
            <li><a href="aboutus.php">About us</a></li>
            <li><a href="contactus.php">Contact Us</a></li>
        </ul>
    </nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:49:16.557

您需要做的就是在代码中添加一个 jQuery。

您忘记加载`jQuery.js`文件。

您正在调用脚本`LI click`并删除类，因为`a.active`这是错误的。

```
$(".navigation li a").on('click',function(e)
{
    e.preventDefault();
    $(".navigation li a.active").removeClass("active");
    $(this).addClass("active");
    $(activeTab).show();
    return false;  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:50:59.177

该类`active`添加了`a`元素内部的`li`元素，要访问它，您需要使用`$(".navigation li a")`not `$(".navigation li").removeClass("a.active")`。

```
$(".navigation li").click(function() {  
    $(".navigation li a.active").removeClass("active"); //Remove any "active" class  
    $('a', this).addClass("active"); //Add "active" class to selected tab  

    $(activeTab).show(); //Fade in the active content  
    return false;  
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/k8mDH/)

我还建议使用[.on使用事件委托](http://api.jquery.com/on/)

```
$(".navigation").on('click', 'li', function() {  
    $(".navigation li a.active").removeClass("active"); //Remove any "active" class  
    $('a', this).addClass("active"); //Add "active" class to selected tab  

    //Commented since it is not available
    //$(activeTab).show(); //Fade in the active content  
    return false;  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:58:46.657

你可以试试这个：

```
$(".navigation li a").click(function(e) { 
    e.preventDefault(); 
    $(this).parent().siblings().find('a').removeClass("active");
    $(this).addClass("active"); //Add "active" class to selected tab  
    $(activeTab).show(); //Fade in the active content  
}); 
```

### [演示小提琴](http://jsfiddle.net/n3upy/)

而不是这个答案：

```
$(this).parent().siblings().find('a').removeClass("active"); 
```

你也可以试试这个：

```
$(".navigation a").removeClass("active"); 
```

就像这样：

```
$(".navigation li a").click(function(e) { 
    e.preventDefault(); 
    $(".navigation a").removeClass("active");
    $(this).addClass("active"); //Add "active" class to selected tab  
    $(activeTab).show(); //Fade in the active content  
}); 
```

# symfony - Composer 更新导致“symfony/framework-bundle 2.0.7 需要 symfony/translator 2.0.7 -> 找不到匹配的包”。

> ID：15494006
> 
> 赞同：2
> 
> 时间：2013-03-19T07:45:42.103
> 
> 标签：symfony, composer-php

错误信息是：

```
Loading composer repositories with package information
Updating dependencies (including require-dev)
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - symfony/framework-bundle 2.0.7 requires symfony/translator 2.0.7 -> no matching package found.
[snip] 
```

作曲家版本是`d929a0813ae473272d151d9ebb2af7ebae451e48`，安装了以下包：

*   antimattr/google-bundle dev-master 934add2
*   Braincrafted/bootstrap-bundle dev-master v1.3.1
*   学说/通用 2.3.x-dev bb0aebb
*   学说/数据夹具 dev-master eef10f6
*   学说/dbal 2.3.x-dev fd45c6f
*   学说/学说捆绑 v1.2.0-beta1
*   教义/教义固定装置捆绑开发大师 275540d
*   学说/学说迁移捆绑开发大师 99c0192
*   学说/迁移 dev-master e1f6efc
*   学说/orm 2.3.x-dev 304acf0
*   Friendsofsymfony/comment-bundle dev-master 75d781e
*   Friendsofsymfony/rest 0.8.0
*   Friendsofsymfony/rest-bundle dev-master c334e61
*   Friendsofsymfony/user-bundle dev-master 993eebf
*   gedmo/doctrine-extensions dev-master 0697ecc
*   hwi/oauth-bundle dev-master 461cdae
*   jdorn/sql-formatter v1.2.0
*   jms/aop 捆绑 1.0.0
*   jms/cg 1.0.0
*   jms/di-extra-bundle 1.3.0
*   jms/元数据 1.2.0-RC
*   jms/解析器库 1.0.0
*   jms/security-extra-bundle 1.4.0
*   jms/序列化器 0.11.0
*   jms/序列化程序包 0.11.0
*   jQuery/jQuery 1.9.1
*   kriswallsmith/assetic dev-master df03baa
*   克里斯沃尔史密斯/嗡嗡声 v0.7
*   叶/lessphp 开发大师 54bb805
*   独白/独白 1.4.0
*   ornicar/akismet-bundle dev-master 008cb45
*   phpcollection/phpcollection 0.2.0
*   phpoption/phpoption 1.1.0
*   psr/日志 1.0.0
*   sensio/分发包 v2.2.0
*   sensio/framework-extra-bundle v2.2.0
*   sensio/generator-bundle v2.2.0
*   swiftmailer/swiftmailer v4.3.0
*   symfony/assetic-bundle dev-master 6985b26
*   symfony/monolog-bundle v2.2.0
*   symfony/swiftmailer-bundle v2.2.0
*   symfony/symfony v2.2.0
*   树枝/扩展开发大师 5c2d515
*   twig/twig dev-master bc30d9b
*   推特/引导 v2.3.1

谷歌搜索错误消息主要返回包含错误消息的结果，但没有解决方案，或者指向正确方向的指针......

这可能是巧合，但此消息在运行*后开始出现*`composer self-update`

[编辑] 我的`composer.json`

```
{
    "autoload": {
        "psr-0":         {
            "": "src/"
        }
    },
    "description": "The \"Symfony Standard Edition\" distribution",
    "extra": {
        "branch-alias":         {
            "dev-master": "2.2-dev"
        },
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    },
    "minimum-stability": "alpha",
    "name": "symfony/framework-standard-edition",
    "repositories": [
        {
            "package":             {
                "dist":                 {
                    "type": "file",
                    "url": "http://code.jquery.com/jquery-1.9.1.js"
                },
                "name": "jquery/jquery",
                "version": "1.9.1"
            },
            "type": "package"
        }
    ],
    "require": {
        "antimattr/google-bundle": "dev-master",
        "braincrafted/bootstrap-bundle": "dev-master",
        "doctrine/data-fixtures": "dev-master",
        "doctrine/doctrine-bundle": "1.2.*",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        "doctrine/doctrine-migrations-bundle": "dev-master",
        "doctrine/migrations": "dev-master",
        "doctrine/orm": "~2.2,>=2.2.3",
        "friendsofsymfony/comment-bundle": "2.*@dev",
        "friendsofsymfony/rest-bundle": "0.*@dev",
        "friendsofsymfony/user-bundle": "*",
        "gedmo/doctrine-extensions": "master-dev",
        "hwi/oauth-bundle": "*",
        "jms/di-extra-bundle": "1.3.*",
        "jms/security-extra-bundle": "1.4.*",
        "jquery/jquery": "1.9.*",
        "leafo/lessphp": "dev-master",
        "ornicar/akismet-bundle": "dev-master",
        "php": ">=5.3.3",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.2.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/framework-bundle": ">=2.0,<=2.2-dev",
        "symfony/symfony": "2.2.*",
        "twig/extensions": "1.0.*",
        "twitter/bootstrap": "2.3.*"
    },
    "scripts": {
        "post-install-cmd": [
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
        "post-update-cmd": [
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:11:48.643

如果你在你的替换它会起作用`composer.json`：

```
"symfony/framework-bundle": ">=2.0,<=2.2-dev"
"hwi/oauth-bundle": "*" 
```

使用（例如）：

```
"symfony/framework-bundle": "v2.2.0",
"hwi/oauth-bundle": "0.2.*@dev" 
```

2个问题是：

```
"symfony/framework-bundle": ">=2.0,<=2.2-dev" 
```

这需要：

```
symfony/translator: 2.0.7 
```

但是这个已经不存在了……
然后

```
"hwi/oauth-bundle": "*" 
```

因为它需要：

```
symfony/framework-bundle: >=2.0,<2.2-dev 
```

所以你的完整`composer.json`将是：

```
{
    "autoload": {
        "psr-0":         {
            "": "src/"
        }
    },
    "description": "The \"Symfony Standard Edition\" distribution",
    "extra": {
        "branch-alias":         {
            "dev-master": "2.2-dev"
        },
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    },
    "minimum-stability": "alpha",
    "name": "symfony/framework-standard-edition",
    "repositories": [
        {
            "package":             {
                "dist":                 {
                    "type": "file",
                    "url": "http://code.jquery.com/jquery-1.9.1.js"
                },
                "name": "jquery/jquery",
                "version": "1.9.1"
            },
            "type": "package"
        }
    ],
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",

        "antimattr/google-bundle": "dev-master",
        "braincrafted/bootstrap-bundle": "dev-master",
        "doctrine/data-fixtures": "dev-master",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        "doctrine/doctrine-migrations-bundle": "dev-master",
        "doctrine/migrations": "dev-master",
        "friendsofsymfony/comment-bundle": "2.*@dev",
        "friendsofsymfony/rest-bundle": "0.*@dev",
        "friendsofsymfony/user-bundle": "*",
        "gedmo/doctrine-extensions": "master-dev",
        "jquery/jquery": "1.9.*",
        "leafo/lessphp": "dev-master",
        "ornicar/akismet-bundle": "dev-master",
        "twitter/bootstrap": "2.3.*",

        "symfony/framework-bundle": "v2.2.0",
        "hwi/oauth-bundle": "0.2.*@dev"
    },
    "scripts": {
        "post-install-cmd": [
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
        "post-update-cmd": [
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
"Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
    }
} 
```

我用空格分开了不同的要求，如下所示：

1.  标准 Symfony 2.2
2.  项目中的额外捆绑包
3.  导致问题的那些

# c# - .Net-行动 委托错误？

> ID：15494009
> 
> 赞同：0
> 
> 时间：2013-03-19T07:45:53.203
> 
> 标签：c#, events, delegates, event-handling

我`Action<T> Delegate`用来在类和表单之间建立联系。该类连接到串行端口，接收到的数据显示在表单中。在`Action<T> Delegate`表单中封装了一个显示接收到的数据的方法。但是委托总是显示null，没有封装方法。

课程代码是：

```
 public SerialPort mySerialPort;

    public Action<byte[]> DataReceived_Del;             //delegate for data recieved

    public string connect()
    {
        try
        {

            mySerialPort = new SerialPort("COM14");
            mySerialPort.BaudRate = 115200;
            mySerialPort.DataBits = 8;
            mySerialPort.Parity = System.IO.Ports.Parity.None;
            mySerialPort.StopBits = System.IO.Ports.StopBits.One;
            mySerialPort.RtsEnable = false;

            mySerialPort.DataReceived += mySerialPort_DataReceived;
            mySerialPort.Open();

        }
        catch (SystemException ex)
        {
            MessageBox.Show(ex.Message);
        }
        if (mySerialPort.IsOpen)
        {
            return "Connected";
        }
        else
        {
            return "Disconnected";
        }
    }

    //serial port data recieved handler
    public void mySerialPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            //no. of data at the port
            int ByteToRead = mySerialPort.BytesToRead;

            //create array to store buffer data
            byte[] inputData = new byte[ByteToRead];

            //read the data and store
            mySerialPort.Read(inputData, 0, ByteToRead);

            var copy = DataReceived_Del;
            if (copy != null) copy(inputData); 

        }
        catch (SystemException ex)
        {
            MessageBox.Show(ex.Message, "Data Received Event");
        }
    } 
```

在我们显示数据的表格中：

```
 public Form1()
    {
        InitializeComponent();
        Processes newprocess = new Processes();
        newprocess.DataReceived_Del += Display;

    }

    //Display
    public void Display(byte[] inputData)
    {
        try
        {
            Invoke(new Action(() => TboxDisp.AppendText((BitConverter.ToString(inputData)))));
        }
        catch (SystemException ex)
        {
            MessageBox.Show(ex.Message, "Display section");
        }
    } 
```

`DataReceived_Del`本来应该封装方法的，`Display`但确实如此`NULL`。

我看不到发生了什么。。

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:11:18.843

您应该在构造函数之外定义 newprocess ，这可能会解决

```
Processes newprocess;
public Form1()
{
    InitializeComponent();
    newprocess = new Processes();
    newprocess.DataReceived_Del += Display;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:32:17.523

您正在使用 += 添加到委托，但委托开始时为 NULL。我不确定这会奏效。我会尝试 = 而不是 +=。

```
public Form1() {
    InitializeComponent();
    Processes newprocess = new Processes();
    newprocess.DataReceived_Del = Display;
} 
```

# solr - 在 solr 中哪种搜索更好（性能方面）？使用 EdgeNgram 或通配符搜索自动完成？

> ID：15494012
> 
> 赞同：2
> 
> 时间：2013-03-19T07:46:06.463
> 
> 标签：solr, django-haystack, n-gram

我有一个大约 40k 行的数据集，每行有 4 个字段。现在我想对文本框中的这 4 个字段使用自动完成机制（必须在显示建议之前将这 4 个字段中的值连接成一个字符串）。哪种查询可以扩展和执行得更好？EdgeNGrams 上的自动完成功能或简单文本索引上的通配符搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:53:09.773

现在我想对文本框中的这 4 个字段使用自动完成机制
- 使用[copyfield](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)将所有四个字段转储到一个字段中，并将该字段用于自动建议

在显示建议之前，必须将这 4 个字段中的值连接成一个字符串
- 将值保持为存储状态，并且可以在客户端完成连接。

EdgeNGrams 上的自动完成功能或简单文本索引上的通配符搜索。
- EdgeNGrams 主要是索引时间，将提供更快的搜索结果，增加索引时间和索引大小
- 通配符查询速度较慢，但​​如果索引大小太小可能不会对性能产生太大影响，则将取决于索引大小。注意 - 通配符查询不执行任何分析。
- 您可以考虑[使用 Solr 术语](http://wiki.apache.org/solr/TermsComponent)进行自动建议。使用 Solr 术语，您不会得到原始字段，而只会得到结果，但会更快
- 另请查看[Solr 建议器](http://wiki.apache.org/solr/Suggester)

# php - 登录后cookie未设置

> ID：15494015
> 
> 赞同：0
> 
> 时间：2013-03-19T07:46:21.633
> 
> 标签：php, cookies

有人知道为什么这个饼干不工作吗？我尝试了很多不同的东西，但它根本不想做饼干。

**我正在使用的脚本**：

```
$sql = mysql_query("SELECT id FROM plattegrond_gebruikers WHERE email = '$username' AND password = '$password' LIMIT 1")or die(mysql_error());;
if(mysql_num_rows($sql) > 0){
$row = mysql_fetch_assoc($sql);
// User found, now let's create the cookies for the user!
if(!$_COOKIE["userid"]) {
    setcookie("userid",$row["id"],time()+3600,'/','nieuws.holapress.com');

    if(isset($_COOKIE['userid'])){
        $cookieSet = 'The cookie is ' . $_COOKIE['userid'];
        } else {
        $cookieSet = 'No cookie has been set';
        }

        echo $cookieSet;
}else{
    echo"cookie excists";
}
   return true;
} else {
   return false;
} 
```

一切正常，它进行查询，它获取用户信息，但它只是没有设置 cookie，登录后我得到“没有设置 cookie”。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:53:50.087

可能您使用参数检查本地机器`nieuws.holapress.com`。将其更改为您的本地主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:49:32.130

重新加载页面后可以读取cookie，因为第一次设置cookie会发送到浏览器，浏览器会保存，下次请求时，浏览器包含cookie，服务器可以读取.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T07:52:17.657

您需要输入 1 行： session_start(); 在所有页面中

# reusability - 软件复用的概念

> ID：15494018
> 
> 赞同：1
> 
> 时间：2013-03-19T07:46:30.327
> 
> 标签：reusability, concept

我不太明白软件重用的概念......维基百科提供了“代码重用”和“重用性”，没有具体说明软件重用......请，如果你能清楚地解释这个概念，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:44:09.310

这个名字是不言自明的。有一些*软件*是您想要*重用*的。这很容易理解。

我将`Java`用来解释可重用性，所以请多多包涵。

```
class Parent{
    int[] numbers;
    public void supplyNumbers(int[] someNumbers){
        this.numbers = someNumbers;
    }

    public void performSorting(){
        for(int i=0;i<numbers.length;i++){
            //perform sorting here
        }
    }
} 
```

所以有一个类`Parent`有一个数字数组和两个方法来提供数字并对其执行一些排序操作。
现在，我想创建另一个需要类似功能的类。而不是重新编写代码，我要做的就是将`inherit`代码如下：

```
class Child extends Parent{

} 
```

那么代码在哪里？好吧，我不需要写任何东西，因为它会自动提供给我，因为我从`Parent`类继承了它。
我正在**重用**我之前写的东西。这就是代码的可重用性。

此外，当您使用`import`Java 制作 s 时，您正在重用开发人员编写的代码。:)

# php - Jquery Ajax 用于从 php mysql 获取数据而不刷新页面 - 语法错误

> ID：15494020
> 
> 赞同：0
> 
> 时间：2013-03-19T07:46:34.640
> 
> 标签：php, mysql, jquery, get

我需要在不使用 jquery ajax 刷新页面的情况下从 mysql 数据库中获取数据。我有一个运行良好的 php 脚本。但是，我的 JS 似乎有一些问题。这是jquery脚本。另外，我在同一页面上使用多个 jquery，例如 maximage 和自定义滚动条。

```
var count = jQuery.noConflict();

count('#CountryName').on ('change',function(){ 
var Country = count('#CountryName').val();
count.ajax({ 
  type: 'GET' ,
  url: 'getcountry2.php', 
  data: 'q=', 
}).done(function( html ) { 
 count('#result').append(html); 
 or 

  count('#result').html(html); 
});
}); 
```

这是我的php

```
<link href="main2.css" rel="stylesheet" type="text/css" />
<link href="country.css" rel="stylesheet" type="text/css" />
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', 'password');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
$user = mysql_real_escape_string($user);
$pwd = mysql_real_escape_string($pwd);

mysql_select_db("mahc", $con);

$sql="SELECT * FROM texttesti WHERE Country = '".$q."'";

$result = mysql_query($sql);

echo "<div>";

    while($row = mysql_fetch_array($result))
      {

    echo "<blockquote>". $row['Review'] ."</blockquote>";

    echo "<p>" . $row['Name'] . " " . $row['ReasonForPanchakarma']."</p>";
    }
echo "</div>";

mysql_close($con);
?> 
```

这是我的 HTML

```
<p>Select the Fields below to see the testimonials of your choice:</p>
   <p>  <form name="Country">
 <select id="CountryName" onChange="showCountry(this.value)">
<option value="">Select a Country:</option>
<option value="USA">USA</option>
<option value="India">India</option>
<option value="Germany">Germany</option>
<option value="Russia">Russia</option>
</select>
</form>
</p>
<div id="result_data">
<script type="text/javascript" src="country2.js"></script>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:51:35.000

使用简单的ajax作为：

```
 $.ajax({
   url:'getcountry2.php',
   datatype:"application/json",
   type:'get',
   data: 'q='+Country, 
   success:function(data){
      count('#result').append(html); 
   },
   error:function(){
      // code for error
   }
 }); 
```

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:49:11.780

您没有将国家/地区价值传递给 PHP，但您在 PHP 中获得了价值。所以这可能是个问题。尝试这个，

```
count.ajax({ 
  type: 'GET' ,
  url: 'getcountry2.php', 
  data: 'q='+Country, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:49:35.093

给你..国家不见了

```
var count = jQuery.noConflict();

    count('#CountryName').on ('change',function(){ 
    var Country = count('#CountryName').val();
    count.ajax({ 
      type: 'GET' ,
      url: 'getcountry2.php', 
      data: 'q='+Country, 
    }).done(function( html ) { 
     count('#result').append(html); 
     or 

      count('#result').html(html); 
    });
    }); 
```

# c# - 上传时的asp.net mvc制作拇指图像

> ID：15494026
> 
> 赞同：0
> 
> 时间：2013-03-19T07:46:47.390
> 
> 标签：c#, asp.net-mvc-3

在图像上传时，我想用不同的名称和调整尺寸制作该图像的副本。

```
[HttpPost]
public ActionResult Create(HttpPostedFileBase photo)
{
    string path =  System.Configuration.ConfigurationManager.AppSettings["propertyPhotoPath"].ToString(); 
    if ((photo != null) && (photo.ContentLength > 0))
    {
        var fileName = Path.GetFileName(photo.FileName);
        var pathToSaveOnHdd = Path.Combine(Server.MapPath(path), fileName);
        string dbPhotoPath = string.Format("{0}{1}", path, fileName);
    }
... 
//        to do: make image copy, change dimensions
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:48:44.347

要复制文件，您可以使用该[`File.Copy`](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)方法。要调整图像大小，有许多技术，包括 GDI+、WIC、WPF（这里是 a 中的示例[`similar post`](https://stackoverflow.com/a/11138086/29407)）或 NuGet，例如[`ImageResizer`](http://www.hanselman.com/blog/NuGetPackageOfWeek11ImageResizerEnablesCleanClearImageResizingInASPNET.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:41:31.953

您可以从 ActionController 将上传的文件转换为字节并更改流的大小，如下所示

> 字节[] image1 = 新字节[photo.ContentLength - 1]; HttpPostedFileBase 文件 = photo.PostedFile; file.InputStream.Read(image1, 0, file.ContentLength - 1); System.IO.MemoryStream ms = new System.IO.MemoryStream(image1);

您可以使用图形类以所需大小重绘图像，如下所示 System.Drawing.Image image = Image.FromStream(ms);

> 图形图形 = Graphics.FromImage(image); graphics.DrawImage(image, 0, 0, image.Width, image.Height);

# php - 获取 php foreach 的第一个结果并继续

> ID：15494032
> 
> 赞同：0
> 
> 时间：2013-03-19T07:47:09.120
> 
> 标签：php, arrays, joomla, joomla-extensions

这是一个很难问的问题，但是，让我们尝试一下。我正在[将此](http://extensions.joomla.org/extensions/news-display/articles-display/articles-showcase/19125)模块用于 joomla 我需要为它创建一个覆盖，以便它获取第一个结果

```
<?php foreach( $pages as $key => $list ): ?> 
```

并将其放在自己的 div 中并继续执行该语句。请询问是否需要任何其他信息，这是覆盖的完整代码：

```
<?php
/**
 * @package     mod_bt_contentslider - BT ContentSlider Module
 * @version     1.4
 * @created     Oct 2011

 * @author      BowThemes
 * @email       support@bowthems.com
 * @website     http://bowthemes.com
 * @support     Forum - http://bowthemes.com/forum/
 * @copyright   Copyright (C) 2012 Bowthemes. All rights reserved.
 * @license     http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
 *
 */
// no direct access
defined('_JEXEC') or die('Restricted access');

if($modal){JHTML::_('behavior.modal');}
$document = JFactory::getDocument();

if(count($list)>0){?>
<div id="btcontentslider<?php echo $module->id; ?>" style="display:none;" class="span4 bt-cs<?php echo $moduleclass_sfx? ' bt-cs'.$params->get('moduleclass_sfx'):'';?>">
  <!--CONTENT-->
    <div class="slides_container" style="width:<?php echo $moduleWidth.";".$add_style;?>">
    <?php foreach( $pages as $key => $list ): ?>
        <div class="slide" style="width:100%;">
        <?php foreach( $list as $i => $row ): ?>
            <ul class="bt-row <?php if($i==0) echo 'bt-row-first'; else if($i==count($list)-1) echo 'bt-row-last' ?>"  style="width:100%" >
                <li class="bt-inner">
                <?php if( $row->thumbnail && $align_image != "center"): ?>
                    <a target="<?php echo $openTarget; ?>" class="bt-image-link<?php echo $modal? ' modal':''?>" title="<?php echo $row->title;?>" href="<?php echo $modal?$row->mainImage:$row->link;?>">
                      <img <?php echo $imgClass ?>  src="<?php echo $row->thumbnail; ?>" alt="<?php echo $row->title?>"  style="width:<?php echo $thumbWidth ;?>px; float:<?php echo $align_image;?>;margin-<?php echo $align_image=="left"? "right":"left";?>:5px" title="<?php echo $row->title?>" />
                    </a> 
                <?php endif; ?>

                    <?php if( $showTitle ): ?>
                    <a class="bt-title" target="<?php echo $openTarget; ?>"
                        title="<?php echo $row->title; ?>"
                        href="<?php echo $row->link;?>"> <?php echo $row->title_cut; ?> </a><br />
                    <?php endif; ?>
                    <?php if( $row->thumbnail && $align_image == "center" ): ?>
                    <div class="bt-center">
                    <a target="<?php echo $openTarget; ?>"
                        class="bt-image-link<?php echo $modal? ' modal':''?>"
                        title="<?php echo $row->title;?>" href="<?php echo $modal?$row->mainImage:$row->link;?>">
                        <img <?php echo $imgClass ?> src="<?php echo $row->thumbnail; ?>" alt="<?php echo $row->title?>"  style="width:<?php echo $thumbWidth ;?>px;" title="<?php echo $row->title?>" />
                    </a>
                    </div>
                    <?php endif ; ?>

                    <?php if( $show_intro ): ?>
                    <div class="bt-introtext">
                    <?php echo $row->description; ?>
                    </div>
                    <?php endif; ?>

                    <?php if( $showReadmore ) : ?>
                    <p class="readmore">
                        <a target="<?php echo $openTarget; ?>"
                            title="<?php echo $row->title;?>"
                            href="<?php echo $row->link;?>"> <?php echo JText::_('READ_MORE');?>
                        </a>
                    </p>
                    <?php endif; ?>

                </li>
                <!--end bt-inner -->
            </ul>
            <!--end bt-row -->
            <!--CONTENT-->
            <?php endforeach; ?>
            <div style="clear: both;"></div>
        </div>
        <!--end bt-main-item page   -->
        <?php endforeach; ?>
    </div>

    <?php if( $next_back && $totalPages  > 1  ) : ?>
    <a class="prev" href="#"></a><a class="next" href="#"></a> 
    <?php endif; ?>

</div>
<!--end bt-container -->
<div style="clear: both;"></div>

<script type="text/javascript"> 
    if(typeof(btcModuleIds)=='undefined'){var btcModuleIds = new Array();var btcModuleOpts = new Array();}
    btcModuleIds.push(<?php echo $module->id; ?>);
    btcModuleOpts.push({
            slideEasing : '<?php echo $slideEasing; ?>',
            fadeEasing : '<?php echo $slideEasing; ?>',
            effect: '<?php echo $effect; ?>',
            preloadImage: '<?php echo $preloadImg; ?>',
            generatePagination: <?php echo $paging ?>,
            play: <?php echo $play; ?>,                     
            hoverPause: <?php echo $hoverPause; ?>, 
            slideSpeed : <?php echo $duration; ?>,
            autoHeight:<?php echo $autoHeight ?>,
            fadeSpeed : <?php echo $fadeSpeed ?>,
            equalHeight:<?php echo $equalHeight; ?>,
            width: <?php echo $moduleWidth=='auto'? "'auto'":$params->get( 'module_width', 0 ); ?>,
            height: <?php echo $moduleHeight=='auto'? "'auto'":$params->get( 'module_height', 0 ); ?>,
            pause: 100,
            preload: true,
            paginationClass: '<?php echo $butlet==1 ? 'bt_handles': 'bt_handles_num' ?>',
            generateNextPrev:false,
            prependPagination:true,
            touchScreen:<?php echo $touchScreen ?>
    });
</script>
<?php 
    // set position for bullet
    if($butlet) {
        $nav_top = (-1)*(int)$params->get( 'navigation_top', 0 );
        $nav_right = (-1)*(int)$params->get( 'navigation_right', 0 )+5;
        if(trim($params->get('content_title'))) $nav_top += 13;
        $document->addStyleDeclaration(
            $modid . ' ' . ($butlet == 1 ? '.bt_handles' : '.bt_handles_num') . '{'.
                'bottom: ' . '5% !important;'.
                'right: ' . '50% !important'.
            '}'
        );

    }
    // set responsive for mobile device
    if($moduleWidth=='auto'){
    $document->addStyleDeclaration(
        '
        @media screen and (max-width: 480px){.bt-cs .bt-row{width:100%!important;}}'
    );
    }
}
else
{ 
    echo '<div>No result...</div>'; 
} ?> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:55:52.753

你可以做这样的事情。基本上，设置一个布尔值只做与第一项不同的事情：

```
<?php $first = true; ?>
<?php foreach( $pages as $key => $list ): ?>
<?php 
    if($first) {
        /* put this $list in its own div or whatever you need to do */
        $first = false;
    } else {
        ... //the default operation/code
?>
...
<?php } ?>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:49:56.057

完整编辑：

使用计数器知道它是哪个迭代：

```
<?php $c = 0; // initialize counter
foreach( $pages as $key => $list ): 
if ($c++ == 0):
?>
this section will only run for the first element.

<?php endif;?> 
```

# objective-c - 有没有办法在浏览器上将 Cocoa 应用程序作为工作表打开？

> ID：15494035
> 
> 赞同：0
> 
> 时间：2013-03-19T07:47:17.347
> 
> 标签：objective-c, macos, cocoa

有什么方法可以在浏览器（例如 Safari）上将 Cocoa 应用程序作为工作表打开？更多细节 - 你去一些 url，并且模式窗口出现在浏览器上，它应该是 Cocoa 应用程序（比如带有一些 UI 和按钮的窗口）。

我有扩展，插件已经准备好处理打开的 url 等。我想知道有没有办法做到这一点，在 Windows 操作系统中，可以通过从插件获取浏览器窗口句柄，但 OSX 不会让这样做。任何想法表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:05:02.470

它不能作为模式在 iOS 或 OS X 上完成。您唯一能做的就是注册一个自定义 URL 方案，当用户点击链接时，Safari 将切换到您的应用程序。或者，您可以构建一个 JavaScript 小书签，但我假设您不想这样做。

# ocaml - 如何在 Cygwin / Windows 中安装camlp4 预处理器？

> ID：15494037
> 
> 赞同：2
> 
> 时间：2013-03-19T07:47:26.827
> 
> 标签：ocaml, opam

我正在尝试在 Windows 8 的**Cygwin**中构建 OPAM 。这是配置阶段的错误信息：

> 配置：错误：您必须安装 Camlp4 预处理器。在某些操作系统上，这些是与主 OCaml 编译器分开的包，例如 Debian 上的 camlp4-extra。

我使用关键字“caml”搜索了 cygwin 存储库并安装了所有提供的软件包；但是，配置仍然显示此错误消息。如何安装此 Camlp4 预处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:25:08.290

[我认为 OPAM 还不能与 Windows 一起使用](https://github.com/OCamlPro/opam/issues/246)。我已经在 OSX 和 Linux 上安装了它并且喜欢它。但是，在 Windows 上，有一个编译错误`unix_waitpid`。这是因为`ocp-build/ocp-build.boot`它是使用 OPAM 源打包的二进制文件，它需要`unix_waitpid`而不是`win_waitpid`函数。我不完全确定他们为什么这样做。但是，在那之后他们可能是其他问题。

关于camlp4，`setup.exe`cygwin的运行，我很容易`ocaml-camlp4`在解释器下找到。根据工具链的不同，我发现只需使用通过[ocaml 网站找到的](http://ocaml.org)[mingw 二进制文件](http://protz.github.com/ocaml-installer/)就足够简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:00:00.850

只要OPAM不能在windows上运行，你可以试试GODI（[windows port](http://wodi.forge.ocamlcore.org/)）。它具有基本的 Windows 支持，您可以通过它安装最常见的软件包。

# android - 日期选择器正在强制关闭 SherlockFragmentActivity

> ID：15494042
> 
> 赞同：0
> 
> 时间：2013-03-19T07:48:28.563
> 
> 标签：android, android-fragments, actionbarsherlock, android-fragmentactivity, android-datepicker

这是我的代码，它没有显示任何错误。当我尝试运行时，它正在关闭，`ClassCastException`.

**注意：相同的代码在扩展到 SherlockFragment 时有效**

```
public class EventsFeatured extends SherlockFragmentActivity {
TextView cal;
View view;

int year;
int month;
int day;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    view = inflater.inflate(R.layout.events_featured, container, false);
    iniitialize();

    return view;
}

private void iniitialize() {
    // TODO Auto-generated method stub
    Calendar t = Calendar.getInstance();
    year = t.get(Calendar.YEAR);
    month = t.get(Calendar.MONTH);
    day = t.get(Calendar.DAY_OF_MONTH);
    cal = (TextView) view.findViewById(R.id.tvCalendar);
    cal.setText(new StringBuilder()
    .append(month + 1).append("-").append(day).append("-")
    .append(year).append(" "));
}
    } 
```

![在此处输入图像描述](../Images/09f2870b42ab87e3798f35448a143171.png)

![在此处输入图像描述](../Images/932a5a8f71cd2819f977122bf97f07d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:02:53.337

您的代码失败，因为在您`TabsAdapter`的`getItem()`方法中，您尝试从不是 a 的类创建`Fragment`( ) （如方法所期望的那样），该类是.`SherlockFragment``Fragment``getItem()``SherlockFragmentActivity`

为什么从外观上看（以及如何使用它）该类应该扩展时需要`EventsFeatured`扩展？例如，您的方法只是一个简单的方法，而不是在其中创建视图的 Fragment 的回调方法。`SherlockFragmentActivity``SherlockFragment``onCreateView()``EventsFeatured``Fragment`

如果您需要将活动作为选项卡，则需要使用 a `TabActivity`（但是，您不应该使用它，因为它已被弃用）。

# c# - 使用 Push-Sharp 库将 Json 发送到 APNS

> ID：15494047
> 
> 赞同：2
> 
> 时间：2013-03-19T07:48:59.933
> 
> 标签：c#, json, push-notification, apple-push-notifications, pushsharp

我需要像这样将json发送到IOS设备：

```
 {"aps":{"content-available":1}} 
```

我应该使用 AppleNotification 还是 AppleNotificationPayLoad 类？请提供示例代码。这是我现在如何创建通知的示例：

```
 AppleNotification notification = NotificationFactory.Apple()
                                                      .ForDeviceToken(token)
                                                      .WithAlert(message)
                                                      .WithSound("default")
                                                      .WithBadge(7); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T23:38:02.467

正如 Eran 提到的，使用 PushSharp 您只能在 aps 之外发送自定义有效负载参数。所以如果你想发送这样的东西：

```
{"aps":{ whatever data... },"content-available":1} 
```

你可以这样做：

```
// Add these to your references
using System.IO;
using PushSharp;
using PushSharp.Apple;
using PushSharp.Core;

//Create our push services broker
var push = new PushBroker();

//Registering the Apple Service and sending an iOS Notification
var appleCert = File.ReadAllBytes(string.Format(@"applePushCert.p12"));
push.RegisterAppleService(new ApplePushChannelSettings(appleCert, "password"));
push.QueueNotification(new AppleNotification()
        .ForDeviceToken("your device token")
        .WithAlert("Hello World!")
        .WithBadge(7)
        .WithSound("sound.caf")
        .WithCustomItem("content-available", 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:27:12.560

您尝试发送的 JSON 无效。您不能将自定义属性放入`aps`字典中。如果要发送自定义数据，则应将其发送到`aps`字典之外，如下所示：

`{"aps":{},"content-available":1}`

您应该在 PushSharp 库中查找允许您将自定义数据添加到有效负载的方法。

> 提供者可以在 Apple 保留的 aps 命名空间之外指定自定义有效负载值。自定义值必须使用 JSON 结构化和原始类型：字典（对象）、数组、字符串、数字和布尔值。

编辑 ：

可以使用的`AddCustom(string key, params object[] values)`方法`AppleNotificationPayload`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T11:26:35.150

这是一个旧线程，但我只是在 2015 年搜索它，找不到堆栈溢出的解决方案。我相信这个问题现在值得回答，因为使用

```
- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void(^(UIBackgroundFetchResult))completionHandler 
```

**方法，您必须在aps**中包含“内容可用” 。[（详见这篇优秀的文章）](http://www.objc.io/issue-5/multitasking.html)

我发现 pushsharp 通过使您能够`notification.WithContentAvailable(1)`像这样添加通知的结尾来适应这一点：

```
 var notification = new AppleNotification(deviceID1, payload1);
 notification.WithContentAvailable(1);//enable background fetch 
```

# iphone - facebook ios sdk 不工作。苹果手机

> ID：15494048
> 
> 赞同：2
> 
> 时间：2013-03-19T07:49:00.837
> 
> 标签：iphone, facebook, sdk

我按照这里的所有步骤[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)（添加 SDK 和框架依赖项，添加 SQLite 和 -ObjC 链接器标志，添加 Facebook App ID），但我不知道为什么会出现错误

```
Use of undeclared identifier 'FBSettings' 
```

当我把

```
[FBSettings publishInstall:YOUR_APP_ID]; 
```

进入

```
(void)applicationDidBecomeActive in AppDelegate. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T07:36:09.577

好的。我找到了解决方案。我看到“fb_mobile_activate_app”事件出现在[App Dashboard](https://developers.facebook.com/apps/) -> Insights -> App Events -> Overview中

我做了什么：

*   按照[iOS 入门](https://developers.facebook.com/docs/ios/getting-started/)说明进行操作。
*   添加了已弃用的标头，我确信有更好的方法可以做到这一点，但它对我有用。通过将 DeprecatedHeaders 文件夹从 FacebookSDK.framework/Versions/A/DeprecatedHeaders 文件夹拖到 Project Navigator 的 Frameworks 部分来添加标头。选择“为任何添加的文件夹创建组”并取消选择“将项目复制到目标组的文件夹（如果需要）”。这会将标题添加为参考。
*   然后我按照[添加 Facebook SDK](https://developers.facebook.com/docs/ads-for-apps/mobile-app-ads/#add-sdk)说明进行操作，该说明只是在文件底部的“@end”之前将以下代码添加到 AppDeligate.m 文件中。此代码应该告诉 Facebook 该应用程序已打开并且该应用程序是通过广告点击安装的（不要忘记使用您的 FACEBOOK 应用程序 ID 更改您的应用程序 ID）：

    ```
    - (void)applicationDidBecomeActive:(UIApplication *)application {
        NSLog(@"Application did become active.");
        [FBSettings setDefaultAppID:@"YOUR_APP_ID"];
        [FBAppEvents activateApp];
    } 
    ```

*   将此包含添加到 AppDeligate.m 文件的最顶部：

    ```
    #import "FacebookSDK.h" 
    ```

而已。我现在在应用商店中有此代码，并且正在获取 Facebook 广告的安装数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T15:19:03.803

我有同样的问题，但我只是补充说：

```
#import <FacebookSDK/FacebookSDK.h> 
```

这消除了我的错误。

查看演示 ~/Documents/FacebookSDK/Samples/HelloFacebookSample 以查看它的实际效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:42:16.187

您还必须导入 AdSupport.framework 和 Social.framework。

# get - 在opencart的支付网关成功支付后重定向的链接是什么？

> ID：15494049
> 
> 赞同：2
> 
> 时间：2013-03-19T07:49:03.693
> 
> 标签：get, payment-gateway, opencart

我已经基于 BankTransfer 模块在 Opencart 中实现了支付模块。支付网关的要求是使用 get 请求提交**successurl**和**errorurl**。这些 URL 用于成功的订单和取消的订单。

算法：

1.  客户到达订单结账处。
2.  点击确认订单
3.  被重定向到 localhost/opencart/testkzm.php，其中的值被打印出来，并且有一个链接，如果成功，我应该重定向到该链接。

**问题：**在支付网关成功支付后重定向的链接是什么？

方法：我天真地认为[http://example.com/opencart/index.php?route=checkout/success](http://example.com/opencart/index.php?route=checkout/success)是成功链接。它只显示确认信息，但系统不会下订单。我知道没有办法提供自动知道要确认哪个订单的外部链接，所以我应该在successurl中传递加密的唯一值，所以返回时我可以解密它们并确认订单？

文件说明：

*   banktransfer.php 是文件 opencart 从系统获取信息，例如订单 ID、订单金额等。
*   banktransfer.tpl 是在浏览器中渲染页面的模板文件。（实际前端）
*   testkzm.php 是我编写的简单文件，用于测试我是否从系统中获取了正确的值。

testkzm.php 是我编写的简单文件，用于测试我是否从系统中获取了正确的值。

控制器/支付中的banktransfer.php

```
 class ControllerPaymentBankTransfer extends Controller {
  protected function index() {
   $this->language->load('payment/bank_transfer');

   $this->data['text_instruction'] = $this->language->get('text_instruction');
   $this->data['text_description'] = $this->language->get('text_description');
   $this->data['text_payment'] = $this->language->get('text_payment');

   //Modified things for KZM
   $order_info = $this->model_checkout_order->getOrder($this->session->data['order_id']);
   $this->data['orderIdKZM'] = $this->session->data['order_id'];
   $this->data['amountKZM'] = $order_info['total'];

   $this->data['merchantIdKZM'] = $this->language->get('merchantIdKZM');
   $this->data['currencyKZM'] = $this->language->get('currencyKZM');
   $this->data['titleKZM'] = $this->language->get('titleKZM');
   $this->data['successuUlKZM'] = $this->language->get('successUrlKZM');
   $this->data['errorUrlKZM'] = $this->language->get('errorUrlKZM');
   $this->data['dateKZM'] = $this->language->get('dateKZM');
   $this->data['signstrKZM'] = $this->language->get('signstrKZM');
   $this->data['verKZM'] = $this->language->get('verKZM');
   //KZM

   $this->data['button_confirm'] = $this->language->get('button_confirm');

   $this->data['bank'] = nl2br($this->config->get('bank_transfer_bank_' . $this->config->get('config_language_id')));

   $this->data['continue'] = $this->url->link('checkout/success');

   if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/payment/bank_transfer.tpl')) {
    $this->template = $this->config->get('config_template') . '/template/payment/bank_transfer.tpl';
   } else {
    $this->template = 'default/template/payment/bank_transfer.tpl';
   } 

   $this->render(); 
  }

  public function confirm() {
   $this->language->load('payment/bank_transfer');

   $this->load->model('checkout/order');

   $comment  = $this->language->get('text_instruction') . "\n\n";
   $comment .= $this->config->get('bank_transfer_bank_' . $this->config->get('config_language_id')) . "\n\n";
   $comment .= $this->language->get('text_payment');

   $this->model_checkout_order->confirm($this->session->data['order_id'], $this->config->get('bank_transfer_order_status_id'), $comment, true);
  }
 } 
```

银行转帐.tpl

```
<h2><?php echo $text_instruction; ?></h2>
 <div class="content">
    <p><?php echo $text_description; ?></p>
    <p><?php echo $bank; ?></p>
    <p><?php echo $text_payment; ?></p>
    <p><?php echo $orderIdKZM; ?></p>
    <p>
    <?php 
     $titleKZM = $titleKZM.$orderIdKZM; 
       $merchantIdKZM = '23';
   $currencyKZM = 'KZT';
   $successUrlKZM = '';
   $erroUrlKZM = '';
   $dateKZM = $merchantIdKZM.$orderIdKZM.$amountKZM.$currencyKZM;

    ?></p>
 </div>
 <div class="buttons">
   <div class="right">
 <form action="http://example.com/opencart/testkzm.php" method="get">
 <input type="hidden" name="merchantIdKZM" value="<?php echo $merchantIdKZM; ?>">
 <input type="hidden" name="orderIdKZM" value="<?php echo $orderIdKZM; ?>">
 <input type="hidden" name="amountKZM" value="<?php echo $amountKZM; ?>">
 <input type="hidden" name="currencyKZM" value="<?php echo $currencyKZM; ?>">
 <input type="hidden" name="successUrlKZM" value="<?php echo $successUrlKZM; ?>">
 <input type="hidden" name="errorUrlKZM" value="<?php echo $errorUrlKZM; ?>">
 <input type="hidden" name="signstrKZM" value="<?php echo $signstrKZM; ?>">
 <input type="hidden" name="verKZM"  value="<?php echo $verKZM; ?>">

 <input type="button" value="<?php echo $button_confirm; ?>" id="button-confirm" class="button" />
 </form>
     </div>
 </div>
 <script type="text/javascript"><!--
 $('#button-confirm-s').bind('click', function() {
  $.ajax({ 
   type: 'get',
   url: 'index.php?route=payment/bank_transfer/confirm',
   success: function() {
    location = '<?php echo $continue; ?>';
   }  
  });
 });
 //--></script 
```

测试kzm.php

```
merchantID <?php echo $_GET["merchantIdKZM"]; ?><br>
  orderID <?php echo $_GET["orderIdKZM"]; ?> <br> 
  amount <?php echo $_GET["amountKZM"]; ?><br>
  currency <?php echo $_GET["currencyKZM"]; ?> <br> 
  successURL <?php echo $_GET["successUrlKZM"]; ?><br>
  errorURL <?php echo $_GET["errorUrlKZM"]; ?> <br> 
  signstr <?php echo $_GET["signstrKZM"]; ?><br>
  ver <?php echo $_GET["verKZM"]; ?> <br> 

  <div class="buttons">
            <div class="right">
          <a href="http://example.com/opencart/index.php?route=checkout/success">asdfas</a>
         </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:33:22.820

支付网关的返回 URL 完全取决于您自己和支付网关的方法。通常，如果您可以将 url 传递给支付网关以返回 true 和/或 false 以表示交易成功，您将让它使用您的支付网关控制器的方法，例如`http://yourstore.com/index.php?route=payment/payment_gateway/success`您可以在哪里处理付款，并相应地更新订单状态

如果您想然后转到结帐成功页面，您可以使用`$this->redirect($this->url->link('checkout/success', '', 'SSL'))`. 如果失败，您应该重定向回结帐页面，客户可以快速跳过应该已经填写了详细信息的各个页面，然后他们可以再试一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:56:06.453

如您所想，成功网址是结帐/成功。

支付模块在进入成功页面前应确认支付。银行转账模块通过使用 AJAX（如您在 banktransfer.tpl 中看到的）调用 banktransfer.php 中的确认函数来进行确认。

如果您使用另一个支付网关模块（如 pp_standard、moneybookers、paymate 等）作为您的起点，而不是银行转账，那会更好，因为它们更符合您的自定义支付网关模块要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T08:30:21.203

我做了这个只是添加了简单的重定向代码开始

```
<?php
  header('Location:http://yoursite location');
  exit;
?> 
```

在视图/模板/yourtemplate/common/success.tpl

# list - Python中整数列表的替代方案

> ID：15494054
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:17.847
> 
> 标签：list, python-2.7

我有一个大约 300MB 的文本文件，每一行都是一个（短）整数列表；大多数行只包含 1 个整数，最长的列表包含 10 个。如果我在 Python 中创建一个列表列表，每行一个列表，条目转换为`int`，我会遇到`MemoryErrors`......当我有 3GB内存？环境是 XP 上的 Python 2.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:55:44.310

尝试元组列表...可能会有所帮助。

还有一个`array`模块。

# php - 返回包含字母 k 的一定长度的子串

> ID：15494056
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:33.513
> 
> 标签：php, regex

我必须遍历文本文件并返回在文本中找到的 8 或 9 个字符长并包含字母“k”的子字符串。必须找到的子字符串的一些示例：1998k1748、1999k426、2003k3429、2012k325 等。这种搜索的正则表达式是什么？我正在使用 PHP。

任何帮助，将不胜感激。

这是我在使用 Chirag 的表达后得到的：

```
error_reporting(E_ALL);

shell_exec('D:\wamp\bin\xpdf\bin32\pdftotext.exe d.pdf x.txt'); 

$mypdf = file_get_contents("x.txt");

preg_match('\d{4}k\d{3,4}', $mypdf, $result);

echo $result[0]; 
```

但我收到以下错误：警告：preg_match() [function.preg-match]: Delimiter must not be alphanumeric or backslash in D:\wamp\www\pdf2text.php on line 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:59:14.903

如果字符串始终采用 RedBaron 所述的 (4-digit-number)k(3-or-4-digit-number) 形式，则此正则表达式将起作用：

```
\d{4}k\d{3,4}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:53:29.910

if else 怎么样

```
if ((strlen($string) ==8 || strlen($string) ==9 ) && strpos($string, 'k') ) {
//do somethig
} 
```

# android - 即使在应用程序关闭后，每次收到呼叫时也会启动活动？

> ID：15494057
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:34.053
> 
> 标签：android, telephonymanager, phone-state-listener

在我的应用程序中，如果使用以下代码收到呼叫，则会启动一个活动：

```
PhoneStateListener phoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (state == TelephonyManager.CALL_STATE_RINGING) {
            incall = true;
        } else if (state == TelephonyManager.CALL_STATE_IDLE) {
            if (incall) {

                c = TestOnDemo.this;
                Intent i = new Intent(TestOnDemo.this,
                        IncallActivity.class);

                startActivity(i);
                incall = false;

            }

        } else if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            incall = true;
        } else if (state == 0) {
            // Incoming call: Pause music
            incall = true;
        }
        super.onCallStateChanged(state, incomingNumber);
    }
};
TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
if (mgr != null) {
    mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
} 
```

这工作正常 - 通话结束后特定活动启动。但是当我的应用程序没有运行或不在前台并接听电话时出现问题。通话结束后，活动再次启动。任何人都可以帮助我。谢谢？

# android - Android：如何覆盖我的应用程序的 DPI 值

> ID：15494060
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:39.900
> 
> 标签：android

我正在尝试使我的应用程序适应第三方供应商提供的硬件。造成问题的主要原因是系统报告的屏幕密度值错误。它认为 DPI 约为 300，而实际 dpi 约为 100。这导致我的视​​图项目非常小。

我不想手动调整该平板电脑的所有尺寸并破坏其他设备上的应用程序外观。那么，如何覆盖（仅适用于我的应用程序）用于计算尺寸的 DPI 值？

# iphone - Social.Framework 从项目目标 BuildPhases 中删除

> ID：15494062
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:44.813
> 
> 标签：iphone, facebook, xcode4.5

`Social.Framework`我正在与我的项目进行 Facebook 集成。但不小心`AdSupport.framework`被从项目中删除了。`Build Phases`我怎样才能让它们回来。有没有办法在外部添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:55:53.713

转到您的垃圾箱，复制回这两个框架，然后将它们粘贴到您的框架路径中，例如：

`/Library/Developer/Xcode/iOS DeviceSupport/6.0.1 (10A523)/Symbols/System/Library/Framework`

过去他们俩那里。

从以下链接下载这两个框架：

[http://www.sendspace.com/file/b0fifp](http://www.sendspace.com/file/b0fifp)

# html - css3中的动画

> ID：15494065
> 
> 赞同：0
> 
> 时间：2013-03-19T07:49:59.133
> 
> 标签：html, css, animation, transform, transitions

我刚刚创建了一个 css3 动画，但我遇到了问题。当我将鼠标悬停在我的文本上时，上面会出现一条线，一切可能都很棒，但我不知道如何在文本底部移动这条线。我正在尝试使用 transform:translateX 但它没有帮助。

有我的代码：

```
.line
{
font-family:Tahoma;
width:0px;
height:1px;
background:black;
transition:width 0.4s ease ;
-moz-transition: 0.4s ease ; /* Firefox 4 */
-webkit-transition: 0.4s ease ; /* Safari and Chrome */
-o-transition: 0.4s ease; /* Opera */

}

div:hover

{

width:85px;

} 
```

[http://jsfiddle.net/DashDesign/SD58Z/](http://jsfiddle.net/DashDesign/SD58Z/) [1](http://jsfiddle.net/DashDesign/SD58Z/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:59:59.500

将内部 div 移动一个像素到顶部，给它一个不透明的背景，并从父 div 中删除高度限制。

```
.line div{
    background:#fff;
    position:relative;
    bottom:1px;
} 
```

[例子](http://jsfiddle.net/SD58Z/8/)

# ios - 从枚举类型 'enum UIViewAnimationOption 到不同枚举类型 uiviewanimation 的隐式转换

> ID：15494067
> 
> 赞同：0
> 
> 时间：2013-03-19T07:50:15.360
> 
> 标签：ios, cocoa-touch, core-animation

这是我为图像提供交叉溶解效果的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    typedef enum
    {
        UIViewAnimationOptionTransitionCrossDissolve,
        UIViewAnimationOptionTransitionCurlDown,
        UIViewAnimationOptionTransitionCurlUp,
        UIViewAnimationOptionTransitionFlipFromBottom,
        UIViewAnimationOptionTransitionFlipFromLeft
} UIViewAnimationOptions;

    [UIView animateWithDuration:1.0 animations:^(void){

    [UIView setAnimationTransition: UIViewAnimationOptionTransitionCrossDissolve forView:img cache: YES];

    } completion:^(BOOL finished){
        [UIView animateWithDuration:1.0 animations:^(void){
            [UIView setAnimationTransition: UIViewAnimationOptionTransitionCrossDissolve forView:img cache: YES];
        } completion:^(BOOL finished){

        }];
    }];
} 
```

但是我收到**从枚举类型'enum UIViewAnimationOption 到不同枚举类型uiviewanimation 转换的警告隐式转换。**

但是，如果我给**UIViewAnimationTransitionFlipFromRight,UIViewAnimationTransitionCurlUp .....**它正在工作，但 animatewithoptions 正在发出警告。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:07:56.953

您正在使用`UIViewAnimationOption`.

定义的枚举`UIViewAnimationTransition`是：

```
typedef enum {
   UIViewAnimationTransitionNone,
   UIViewAnimationTransitionFlipFromLeft,
   UIViewAnimationTransitionFlipFromRight,
   UIViewAnimationTransitionCurlUp,
   UIViewAnimationTransitionCurlDown,
} UIViewAnimationTransition; 
```

请检查[UIView 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)以供参考。

同时删除您定义的枚举，不需要它。iOS 已经有了`UIView`类的枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:01:53.977

您不需要 typedef 动画选项枚举，它已经完成

错误告诉您出了什么问题，`UIViewAnimationOption`当方法需要一个类型时，您正在传递一个类型`UIViewAnimationTransition`

动画过渡的有效选项是：

```
typedef enum {    
    UIViewAnimationTransitionNone,    
    UIViewAnimationTransitionFlipFromLeft,   
    UIViewAnimationTransitionFlipFromRight,    
    UIViewAnimationTransitionCurlUp,    
    UIViewAnimationTransitionCurlDown, 
} UIViewAnimationTransition; 
```

# r - 将日期编号分配给日期

> ID：15494068
> 
> 赞同：0
> 
> 时间：2013-03-19T07:50:24.223
> 
> 标签：r, date

通常，将任何一年的 1 月 1 日分配给第 1 天。同样，任何一年的 2 月 1 日都是第 32 天。我想将任何一年的 10 月 1 日分配给第 1 天。我有一个函数做这个：

```
 dayNumber <- function(date){
      library(lubridate)
      date <- as.Date(date)
      if(month(date)==10 | month(date)==11 | month(date)==12) 
      {x <- yday(date) - 273
      return(x)}
      if(month(date)==1 | month(date)==2 | month(date)==3) 
      {y <- yday(date) + 91
       return(y)}
    } 
```

该功能似乎适用于单个日期：

```
dayNumber("2002-10-01")
[1] 1

dayNumber("2013-01-01")
[1] 92 
```

但是，当应用于日期向量时，我会收到警告，并且日期编号未正确分配给所有日期：

```
myDates <- c("2003-11-16", "2007-11-01", "1992-10-11", "1993-11-14", "1995-11-12", 
             "2002-12-08", "2004-01-25", "2004-12-01", "2002-02-14", "2011-01-21")

dayNumber(myDates)
 [1]   47   32   12   45   43   69 -248   63 -228 -252
Warning message:
In if (month(date) == 10 | month(date) == 11 | month(date) == 12) { :
  the condition has length > 1 and only the first element will be used 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:13:13.363

您在`if`应该使用时使用`ifelse`：

```
dayNumber <- function(date){
  library(lubridate)
  date <- as.Date(date)
  ifelse(month(date)==10 | month(date)==11 | month(date)==12, yday(date) - 273,  
         ifelse(month(date)==1 | month(date)==2 | month(date)==3, yday(date) + 91, NA))
}

dayNumber(myDates)
 [1]  47  32  12  45  43  69 116  63 136 112 
```

您可以使用以下方法进一步简化您的条件`%in%`：

```
dayNumber <- function(date){
  library(lubridate)
  date <- as.Date(date)
  ifelse(month(date) %in% 10:12, yday(date) - 273,  
         ifelse(month(date) %in% 1:3, yday(date) + 91, NA))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:18:25.133

这应该做同样的事情：

```
 date<-as.Date(date)
 (yday(date)) %% 274 + 1 + 90 * (yday(date) < 274)
 [1]  47  32  12  45  43  69 116  63 136 112 
```

这里的 274 是 10 月 1 日的天数。

请注意，这和原始代码忽略了闰年。

# c# - XDocument 到字典

> ID：15494070
> 
> 赞同：0
> 
> 时间：2013-03-19T07:50:27.510
> 
> 标签：c#, linq, linq-to-xml

这是我的 Xdocument：

```
<Response>
    <city>
        <CityName>xxx</CityName>
        <CityId>1</CityId>
    </city>
    <city>
        <CityName>yyy</CityName>
        <CityId>2</CityId>
    </city>   
</Response> 
```

我如何将其存储在`Dictionary(cityname,cityid)`：

```
Dictionary<string, string > dictionary; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:54:04.293

```
var doc = XDocument.Load(filePath);
var dict = doc.Root.Elements("city")
                   .ToDictionary(c => (string)c.Element("CityName"),
                                 c => (string)c.Element("CityId")); 
```

棘手的问题 - 为什么要`CityId`作为字符串，而不是`int`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:13:31.177

另一种方式

```
 Dictionary<string, string> dictionary = new Dictionary<string,string>();

    foreach (XmlNode node in nodeList)
    {
        dictionary.Add(node.ChildNodes[0].InnerText, node.ChildNodes[1].InnerText);

    } 
```

# android - 如何调试安卓模拟器？

> ID：15494072
> 
> 赞同：2
> 
> 时间：2013-03-19T07:50:42.210
> 
> 标签：android, debugging, emulation

我想调试Android模拟器源代码，以便更深入地了解模拟器。如果我可以使用 Eclipse 进行调试，那就太好了。

我发现了一些关于 Android 模拟器源代码的信息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:57:17.353

看到[这个](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/gettingStarted/qs-13.htm)。这将指导您如何逐步调试。

要获得不同**的呼喊声**>>点击`Ctrl`+ `Shift`+`L`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T19:00:09.607

我不知道你在什么平台上，但基本上用所有调试符号编译它，如果在 linux 中你可以用 gdb 或 cgdb 打开也提供源代码树，你将能够在上下文中看到所有内容源代码。

我没有为此目的使用 eclipse，但[http://wiki.eclipse.org/DSDP/DD/GDB](http://wiki.eclipse.org/DSDP/DD/GDB)看起来很有希望......

我敢肯定，如果您无法通过 Google 叔叔解决此问题，那么有人可以告诉您如何使用 Windows 来执行此操作。

# javascript - Ajax 更改为 JSON (Jquery 离线 + Manifest) - 离线 web 应用程序

> ID：15494074
> 
> 赞同：0
> 
> 时间：2013-03-19T07:50:47.483
> 
> 标签：javascript, jquery, ajax, json, html

我想做离线网络应用程序。

所以我在[离线使用 JQuery](https://github.com/wycats/jquery-offline)时将 Ajax 更改为 JSON 。

阿贾克斯代码：

```
$.ajax({
  url: contentpage,
  data: contentpagedata,
  cache: false
}).done(function( html ) {
    contentf=''+html;

           $("#ajaxcontent").empty().append(contentf).fadeIn(500);
           $("#submenu-content").empty().append(topf).fadeIn(500);
           alert(contentpage);
    }
}); 
```

尝试用 JSON 替换：

```
var updateArticles = function(callback) {
  alert(contentpage);
$.retrieveJSON(contentpage, {data: contentpagedata}, function(json, status) {
    alert("123");
  var contentf = $("#ajaxcontentTemplate").render( json );

           $("#ajaxcontent").empty().append(contentf).fadeIn(500);

});
}; 
```

有人对此有想法吗？此外，我应该创建一个 .json 或 .rb 文件...等吗？另外，Manifest 文件是否能够缓存 .PHP 等动态文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:58:12.727

清单缓存只能用于缓存静态资源。对于动态资源，请使用 WEBSQL。尽管 WEBSQL 已被淘汰，但如果您的应用程序针对移动设备，那么我建议您使用 WEBSQL 以及 IndexDB。

# ios - MKMapView 检测何时单击注释气球

> ID：15494075
> 
> 赞同：1
> 
> 时间：2013-03-19T07:50:50.657
> 
> 标签：ios, ios5, mkmapview, ios5.1

有什么方法可以检测注释气球中的点击？我希望当用户点击注释时，它会显示一些信息，如果用户想查看他应该在气球中再次点击的所有信息（如 Android）。我找到了如何实施

```
-(void)mapView:MKMapView*)mapView didSelectAnnotationView:MKAnnotationView *)view 
```

但对我想做的事一无所知，所以有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:07:09.757

如果您将 annotationView 设置为包含附件按钮，这在 iOS 上很正常，因此用户会感觉很舒服，那么当用户点击附件时，将在 mapview 的委托上调用此函数

```
- (void)mapView:(MKMapView *)map annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control; 
```

从中您可以确定按下了哪个注释以及如何处理它

# java - hadoop关闭文件写入本地磁盘

> ID：15494077
> 
> 赞同：1
> 
> 时间：2013-03-19T07:51:00.540
> 
> 标签：java, file-io, hadoop

我最近开始学习hadoop。现在，我想在本地磁盘中打开一个文件，并在 reduce 函数中将一些数据写入该文件，但我找不到关闭该文件的好方法。

据我所知，关闭并重新打开它不是一个好主意，所以我不想这样做。

```
public class MyClass extends Configured implements Tool{
    main(){
         //all configurations here
         job.setMapperClass(MyMapper.class);
         job.setReducerClass(MyReducer.class);
    }
    static class MyMapper extends Mapper <LongWritable,Text,Text,Text>{
      //does something
    }
    static class MyReducer extends Reducer <LongWritable,Text,Text,Text>{
         //create file, filewriter etc here
         public MyReducer() {
              //open a file here
         }
         public reduce(){
              //write to file here
              bw.write("entered the reduce task for " + key); 
              while(there is more item)
                  bw.write( value + " will be written to my file \n");
         }
    }
} 
```

工作流程将如下所示（如果我错了，请纠正我）：

```
for(each reduce task)
    write to file "entered the reduce task for " + *key*
        for each *value* for that *key*
            write *value* 
```

我想将键/值对写入本地磁盘上写入的 myfile，然后想关闭该文件，但我找不到解决该问题的好方法。或者这会是一个问题，如果我不关闭文件，我的意思是，hadoop 会处理这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:50:18.577

您要扩展的映射器和化简器类都有在处理数据之前和之后运行代码的方法。

*   要在 map/reduce 运行之前运行代码，请扩展该`setup(Context context)`方法
*   要在 map/reduce 任务完成后运行代码，请扩展该`cleanup(Context context)`方法

因此，在您的情况下，您可以扩展 close 方法以关闭文件。（您需要在 reducer 中为打开的流维护一个实例变量）。

请注意，在您的 reduce 方法失败/异常时，您的 close 方法将不会被调用（除非您覆盖 reduce 方法本身以捕获异常，运行 close 方法然后重新抛出异常）。

# c++ - 如何在 C++ 中为字符串类重载 == 运算符？

> ID：15494078
> 
> 赞同：1
> 
> 时间：2013-03-19T07:51:07.120
> 
> 标签：c++, string, operator-overloading, comparison-operators

我是一名新`c++`程序员，最近才了解运算符重载。在从事独立项目时，我遇到了一个问题，我想将用户输入字符串与其他字符串进行比较，以允许用户在简单的菜单中导航。唯一的事情是我不知道如何在忽略大小写的情况下比较两个字符串。如果有一种更简单的方法而不是重载`==`运算符，请告诉我，但也让我知道如何`==`为字符串重载运算符，因为我很感兴趣。

多么棒的社区。非常感谢你们，你们很快就回答了我的问题，没有让我感到愚蠢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:55:03.917

好吧，我需要在这里提出几点。

*   如果字符串是指字符数组/指针，则不能重载运算符 ==，因为运算符重载仅允许用于用户定义的类型

*   如果你的意思是字符串`std::string`，那么你也不能重载 operator ==，因为它已经重载了:)

*   为了进行不区分大小写的比较，最好的方法是使用命名函数，例如`case_insensitive_equal`. Boost有一个-`boost::iequals(str1, str2)`

*   您可以*尝试*自己编写`char_traits`以创建不区分大小写的字符串类型

至于*如何*以不区分大小写的方式编写比较字符串的函数，我会这样做：

```
bool case_insensitive_equal(const std::string& s1, const std::string& s2)
{
    if(s1.length() != s2\. length())
       return false;
    for(int i = 0; i < s1.length(); ++i)
        if(std::toupper(s1[i]) != std::toupper(s2[i])) //tolower would do as well
            return false;
    return true;
} 
```

你可以使用`std::transform`and而不是循环`std::equal`，但我认为这更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:56:05.300

您不会重载`operator==`for，`std::string`因为您必须将运算符放入`std`命名空间。这是 (a) 不允许的，并且 (b) 已经由标准库实现完成。

`operator==`将 any 重载为除真正相等之外的任何内容也是不可取的。即如果`a == b`那么`a`和`b`应该表现*相同*。

您应该更喜欢用有意义的名称编写一个单独的函数，例如

```
bool areEqualIgnoringCase(const std::string&, const std::string&); 
```

# mysql - MySQL：是否有可能拥有从属内存数据库？

> ID：15494082
> 
> 赞同：2
> 
> 时间：2013-03-19T07:51:23.253
> 
> 标签：mysql, replication, master-slave, in-memory-database

是否可以配置从属内存数据库？

主数据库很常见，只读操作的从属数据库可以很好地适应[内存存储](http://dev.mysql.com/doc/refman/5.6/en/memory-storage-engine.html)。

如果不能使用 MySQL，还有哪些其他数据库可以使用这种方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:11:00.487

它可能适用于“简单”从属设备，例如数据大小和复制，并且可以容忍内存存储引擎的许多限制。

# javascript - 初学者 q 关于 console.log 和 javascript 中的函数

> ID：15494083
> 
> 赞同：0
> 
> 时间：2013-03-19T07:51:27.447
> 
> 标签：javascript, function

我有一个关于 javascript 中的 console.log 的快速问题。以下是我写的代码：

```
var multiplied = 5;

var timesTwo = function(number) {

    var multiplied = number * 2;
    console.log(multiplied);
};

timesTwo(4);
console.log(timesTwo(4)); 
```

“4”的第一个函数调用完美，第二个版本，我通过console.log调用函数，返回未定义。这是因为 console.log 只返回语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:53:18.293

> 这是因为 console.log 只返回语句吗？

`console.log`不返回任何东西。它只是将其参数记录到控制台。所以你应该从你`timesTwo`的乘法结果返回：

```
var timesTwo = function(number) {
    var multiplied = number * 2;
    return multiplied;
}; 
```

接着：

```
console.log(timesTwo(4)); 
```

备注：您`multiplied`在函数之外（在全局范围内）声明了一些从未使用过的函数。您可能不需要它，因为在函数`multiplied`内部使用的变量是`timesTwo`函数的本地变量，并且在此示例中实际使用的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:54:53.447

尝试这个

```
var timesTwo = function(number) {

    var multiplied = number * 2;
    console.log(multiplied);

return multiplied;
}; 
```

你需要返回一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:54:55.860

`timesTwo(4)`没有返回任何东西。所以`undefined`登录控制台。

**编辑：** `console.log`不返回任何东西，只在控制台中写一些东西。并非所有浏览器都有控制台（即 IE），因此您应该使用：

```
if(window.console){

console.log(" log into console");

}else{

alert("alert as not console available"); // using the alert is up to you

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-10T19:17:33.200

console.log() 仅将内容打印到控制台，请尝试使用 return 语句而不是 console.log()

```
const timesTwo = function(number) {
    return number * 2;
}; 
```

# android - android中的电话号码格式

> ID：15494093
> 
> 赞同：2
> 
> 时间：2013-03-19T07:52:43.000
> 
> 标签：android, android-edittext, phone-number

在我的应用程序中，我有一个 editText 它将接受用户的电话号码，我的目标是，一旦用户输入电话号码，它就应该被格式化（就像通过应用文本更改的监听器一样），格式就像`XXX-XXX-XXXX`.

我把代码写成

```
ePhone.addTextChangedListener(new TextWatcher() {

            private Pattern pattern;
            private Matcher matcher;
            String a;

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub

                boolean flag = true;            
                if (flag) {

                    if (((ePhone.getText().length() + 1) % 4) == 0) 
                    {
                        if (ePhone.getText().toString().split("-").length <= 2) 
                        {
                            ePhone.setText(ePhone.getText() + "-");
                            ePhone.setSelection(ePhone.getText().length());
                        }
                    }
                    a = ePhone.getText().toString();
                } else {
                    ePhone.setText(a);
                }
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stus

            }
        }); 
```

但是当用户想从中删除一个号码时`editText`，它就无法正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T11:04:39.940

假设您想按照美国格式格式化电话号码。

```
+1 (###) ###-####,1 (###) ###-####,###-####,###-###-####,011 $ 
```

以下内容将满足您的目的：

```
phoneEditText.addTextChangedListener(new TextWatcher() {
    private boolean mFormatting; // a flag that prevents stack overflows.
    private int mAfter;

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) { 
    }

    //called before the text is changed...
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        mAfter = after; // flag to detect backspace.
    }

    @Override
    public void afterTextChanged(Editable s) {
    // Make sure to ignore calls to afterTextChanged caused by the work done below
        if (!mFormatting) {
            mFormatting = true;
            // using US formatting.
            if(mAfter != 0) // in case back space ain't clicked.
                PhoneNumberUtils.formatNumber(
                    s,PhoneNumberUtils.getFormatTypeForLocale(Locale.US));
            mFormatting = false;
        }
    }
}); 
```

如果您需要特定位置的服务，即对于每个位置，您需要该位置的特定格式（请参阅[此链接](http://developer.android.com/reference/android/telephony/PhoneNumberFormattingTextWatcher.html)）。如果你只需要你需要的格式，那么在上面代码片段中的 line 位置编写一个自定义函数。

```
PhoneNumberUtils.formatNumber(
    s, PhoneNumberUtils.getFormatTypeForLocale(Locale.US)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T18:36:16.200

此代码适用于删除和编辑两种情况。

```
 public class PhoneNumberFormattingTextWatcher implements TextWatcher {
EditText Edt;
int keyDel=0;
public PhoneNumberFormattingTextWatcher(EditText edt){
 Edt =edt;
}
@Override
public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

}

@Override
public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
    Edt.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if (keyCode == KeyEvent.KEYCODE_DEL)
                keyDel = 1;
            return false;
        }
    });

    if (keyDel == 0) {
        int len = Edt.getText().length();
        String input=Edt.getText().toString();
        if(len == 4) {
            Edt.setText( input.substring(0,3)+"-"+ input.substring(3) );
            Edt.setSelection(Edt.getText().length());
        }
        if(len == 8) {
            Edt.setText( input.substring(0,7)+"-"+ input.substring(7) );
            Edt.setSelection(Edt.getText().length());
        }
    } else if(keyDel==1){
        int len = Edt.getText().length();
        if(len == 4||len==8) {
            Edt.setText(Edt.getText().delete(Edt.getText().length()-1,Edt.getText().length()) );
            Edt.setSelection(Edt.getText().length());
        }
        keyDel = 0;
    }
}

@Override
public void afterTextChanged(Editable editable) {

} 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-16T08:32:16.823

您可以使用愚蠢的代码，它会起作用。

```
String number="5129892680";
String formattedNumber = PhoneNumberUtils.formatNumber(number); 
```

# google-maps - 获取国家/地区的城市名称

> ID：15494097
> 
> 赞同：2
> 
> 时间：2013-03-19T07:52:52.287
> 
> 标签：google-maps, region, countries

在很多网站上，我们从选择列表中选择国家，然后下一个选择列表向我们显示该国家/地区的城市列表。我正在尝试搜索任何 api 提供的方法，当我传递国家名称时，它会给出城市名称。任何语言。

我也找不到任何免费的 sql 表，比如

```
Country          City
----------------------
Australia        Perth
Australia        Sydney 
Japan            Tokyo 
```

我的理想结果是

```
Country          City         Lat        Long
----------------------------------------------
Australia        Perth        3.35       14.7
Australia        Sydney       3.36       14.62
Japan            Tokyo        4.2        12.8 
```

**更新：**我们可以很容易地找到所有国家列表，甚至我们也可以得到世界上所有的城市，但是城市没有找到国家名称，所以我们无法确定哪个城市属于哪个国家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:11:20.393

我假设您正在寻找类似[http://dev.maxmind.com/geoip/](http://dev.maxmind.com/geoip/)的东西。

没用过，但经常听说，感觉是不错的产品。

# php - 如何在 php 中通过 ajax 插入表单值...任何示例..？

> ID：15494098
> 
> 赞同：0
> 
> 时间：2013-03-19T07:52:51.720
> 
> 标签：php, mysql, ajax

我被要求在 PHP 中通过 Ajax 插入一个表单值，我很困惑寻找一个好的例子和任何好的示例站点 URL？

我正在使用这段代码：

```
var dataString = 'name='+ name + '&email=' + email + '&phone=' + phone;  
//alert (dataString);return false;  
$.ajax({  
  type: "POST",  
  url: "bin/process.php",  
  data: dataString,  
  success: function() {  
    $('#contact_form').html("<div id='message'></div>");  
    $('#message').html("<h2>Contact Form Submitted!</h2>")  
    .append("<p>We will be in touch soon.</p>")  
    .hide()  
    .fadeIn(1500, function() {  
      $('#message').append("<img id='checkmark' src='images/check.png' />");  
    });  
  }  
});  
return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:17:33.527

我对 JavaScript 不太了解，但您可以简单地使用它

```
function formSubmit(id1,id2,id3){ //<input type="text" id="username" ...
if(id1 == null || id2 == null || id3 == null){
    alert('Kindly fill Form properly');
    return false;
}else{
    var usr = document.getElementsByID(id1).value;
    var eml = document.getElementsByID(id2).value;
    var mbl = document.getElementsByID(id3).value;
    var dataString = 'name='+ usr + '&email=' + eml + '&phone=' + mbl;
    var url = 'bin/process.php?'+ dataString;
    $.get(url, function(data){
        if(data == 'exists'){
            //if data exists DO SOMETHING HERE
            return false;
        }else{
            alert('Form stored successfully');
            //Or use your own script
            return true;
        }
    });
}

} 
```

希望你能得到一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:02:00.153

以下链接说明了如何将 AJAX 与 PHP 一起使用以将表单输入作为电子邮件发送：http: [//www.devblog.co/easy-jquery-ajax-php-contact-form/](http://www.devblog.co/easy-jquery-ajax-php-contact-form/)

如果您需要将值输入到 mysql 数据库， - 在 mysql 中创建表 - 在 php 代码中，连接到 mysql 数据库 - 不要将值发送到电子邮件，而是在打开的 mysql 连接上运行插入语句（[http： //www.w3schools.com/php/php_mysql_insert.asp](http://www.w3schools.com/php/php_mysql_insert.asp) ) - 关闭连接

# macos - osx 10.8 刷新查找器

> ID：15494101
> 
> 赞同：1
> 
> 时间：2013-03-19T07:53:07.620
> 
> 标签：macos, osx-mountain-lion, finder

我想以编程方式强制 Finder 在 Mountain Lion 中刷新。在以前的 OSX 版本中，以下代码段有效：

```
OSStatus    SendFinderSyncEvent( const FSRef* inObjectRef )
{
    AppleEvent  theEvent = { typeNull, NULL };
    AppleEvent  replyEvent = { typeNull, NULL };
    AliasHandle itemAlias = NULL;
    const OSType    kFinderSig = 'MACS';

OSStatus    err = FSNewAliasMinimal( inObjectRef, &itemAlias );
if (err == noErr)
{
    err = AEBuildAppleEvent( kAEFinderSuite, kAESync, typeApplSignature,
        &kFinderSig, sizeof(OSType), kAutoGenerateReturnID,
        kAnyTransactionID, &theEvent, NULL, "'----':alis(@@)", itemAlias );

    if (err == noErr)
    {
        err = AESendMessage( &theEvent, &replyEvent, kAENoReply,
            kAEDefaultTimeout );

        AEDisposeDesc( &replyEvent );
        AEDisposeDesc( &theEvent );
    }

    DisposeHandle( (Handle)itemAlias );
}

    return err;
} 
```

有谁知道在 Mountain Lion 上执行此操作的替代方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:00:05.783

它也不适合我。（Bud ID 12571746）
Apple 需要知道有很多开发人员需要这个。[在http://bugreporter.apple.com](http://bugreporter.apple.com)上提交错误报告——它可能会作为副本被关闭，但每一票都很重要。

对于刷新查找器窗口，您可以创建和删除文件。看看[这个](https://stackoverflow.com/a/15541439/944634)帖子。

# video - 如何在不更改 Air 中的视频纵横比的情况下全屏播放视频

> ID：15494102
> 
> 赞同：0
> 
> 时间：2013-03-19T07:53:09.267
> 
> 标签：video, air, flex4, fullscreen, aspect-ratio

我正在使用播放视频的 SDK 4.1 在 Air 中创建一个应用程序。为此，我创建了一个 UIComponent 并在 UIComponent 中添加了 Video 对象。视频文件为 .flv 格式。

现在，当我使视频全屏显示时，视频纵横比会发生变化。视频正在拉长。我使用以下代码提供视频尺寸：

```
myVideo = new Video( 766 , 572 ); 
```

所以请指导我，如何在不改变视频纵横比的情况下制作视频全屏。

任何网络链接或源代码将不胜感激实施该解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:22:51.647

我通过创建一个包含视频组件的父组件解决了这个问题。我将父组件设置为应用程序的完整大小，然后调整视频大小以适应这些边界，而不是使用正式的全屏功能。它提供了与全屏相同的效果，而不会弄乱纵横比。

# php - Mysql - 关联表 - on 子句中的未知列

> ID：15494109
> 
> 赞同：0
> 
> 时间：2013-03-19T07:53:19.837
> 
> 标签：php, mysql, sql, join

以下查询始终返回 #1054 - 'on 子句'中的未知列 'T_RELATIF_SESS.REL_COM_ID'

```
SELECT
`T_FORMATIONS`.`FOR_ID`, 
`T_FORMATIONS`.`FOR_TITRE`, 
`T_FORMATIONS`.`FOR_NIVEAU`, 
`T_FORMATIONS`.`FOR_MAX_PART`, 
`T_RELATIF_SESS`.`REL_COM_ID`, 
`T_RELATIF_SESS`.`REL_SES_ID`,
`T_SESSIONS`.`SES_ID`, 
`T_SESSIONS`.`SES_TITRE`, 
`T_SESSIONS`.`SES_TYPE`, 
`T_SESSIONS`.`SES_ADRESSE`, 
`T_SESSIONS`.`SES_NPA`, 
`T_SESSIONS`.`SES_LIEU`, 
`T_SESSIONS`.`SES_PRIX_SPECIAL`, 
`T_SESSIONS`.`SES_VAL_PRIX_SPECIAL`, 
`T_SESSIONS`.`SES_PRIX_SPEC_EXP`, 
`T_SESSIONS`.`SES_SUPP_COURS_INCL`, 
`T_SESSIONS`.`SES_SUPP_COURS_ADD`, 
`T_SESSIONS`.`SES_PRIX_SUPP_COURS_ADD`, 
`T_SESSIONS`.`SES_HORAIRE_SPECIAL`, 
`T_SESSIONS`.`SES_REMARQUES`, 
`T_SESSIONS`.`SES_REC_ID`, 
`T_COURS`.`COU_ID`, 
`T_COURS`.`COU_DATE`, 
    (SELECT `COU_DATE` FROM `T_COURS` WHERE `T_COURS`.`COU_SES_ID` = `T_SESSIONS`.`SES_ID` ORDER BY `COU_DATE` ASC LIMIT 1) AS `PREMIERCOURS`, 
    (SELECT `COU_DATE` FROM `T_COURS` WHERE `T_COURS`.`COU_SES_ID` = `T_SESSIONS`.`SES_ID` ORDER BY `COU_DATE` DESC LIMIT 1) AS `DERNIERCOURS` 
FROM `T_COURS` 
INNER JOIN `T_COMMANDES` ON `T_RELATIF_SESS`.`REL_COM_ID` = `T_COMMANDES`.`COM_ID` 
INNER JOIN `T_RELATIF_SESS` ON `T_SESSIONS`.`SES_ID` = `T_RELATIF_SESS`.`REL_SES_ID` 
INNER JOIN `T_SESSIONS` ON `T_COURS`.`COU_SES_ID` = `T_SESSIONS`.`SES_ID` 
INNER JOIN `T_FORMATIONS` ON `T_SESSIONS`.`SES_FOR_ID` = `T_FORMATIONS`.`FOR_ID` 
WHERE `T_COMMANDES`.`COM_ID`=19 
```

在我添加之前，此查询运行良好

```
INNER JOIN `T_COMMANDES` ON `T_RELATIF_SESS`.`REL_COM_ID` = `T_COMMANDES`.`COM_ID` 
INNER JOIN `T_RELATIF_SESS` ON `T_SESSIONS`.`SES_ID` = `T_RELATIF_SESS`.`REL_SES_ID` 
```

和

```
WHERE `T_COMMANDES`.`COM_ID`=19 
```

`T_RELATIF_SESS`只是称为“T_SESSIONS”和“T_COMMANDES”的表之间的关联表。我尝试多次重写查询，但仍然收到此错误，我真的不明白为什么。每个字段都存在于我的数据库中。

我知道这可能很简单，但它真的让我头疼。有人可以帮我一把，或者只是向我解释我做错了什么吗？会很感激的！非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:58:39.117

因此，根据您的描述，您尝试在没有的情况下运行脚本

```
INNER JOIN `T_COMMANDES` ON `T_RELATIF_SESS`.`REL_COM_ID` = `T_COMMANDES`.`COM_ID` 
INNER JOIN `T_RELATIF_SESS` ON `T_SESSIONS`.`SES_ID` = `T_RELATIF_SESS`.`REL_SES_ID` 
```

它正在工作，但不适用于该脚本？尝试按顺序进行，因为在您的第一个内部连接中，您正在尝试将表 (T_COMMANDES) 与您接下来将要加入的表 (T_RELATIF_SESS) 连接起来。

所以试试：

```
INNER JOIN `T_SESSIONS` ON `T_COURS`.`COU_SES_ID` = `T_SESSIONS`.`SES_ID` 
INNER JOIN `T_FORMATIONS` ON `T_SESSIONS`.`SES_FOR_ID` = `T_FORMATIONS`.`FOR_ID` 
INNER JOIN `T_RELATIF_SESS` ON `T_SESSIONS`.`SES_ID` = `T_RELATIF_SESS`.`REL_SES_ID` 
INNER JOIN `T_COMMANDES` ON `T_RELATIF_SESS`.`REL_COM_ID` = `T_COMMANDES`.`COM_ID` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:59:06.613

添加联接后，您的表格顺序混乱了，因为您使用`INNER JOIN`的是 ，只要字段在联接上可见，您就可以在任何您喜欢的地方声明表格。它仍然会产生相同的结果。

要解决此问题，请将这些新联接放在联接的下部：

```
FROM    T_COURS 
        INNER JOIN T_SESSIONS 
            ON T_COURS.COU_SES_ID = T_SESSIONS.SES_ID 
        INNER JOIN T_FORMATIONS 
            ON T_SESSIONS.SES_FOR_ID = T_FORMATIONS.FOR_ID
        INNER JOIN T_RELATIF_SESS 
            ON T_SESSIONS.SES_ID = T_RELATIF_SESS.REL_SES_ID 
        INNER JOIN T_COMMANDES 
            ON T_RELATIF_SESS.REL_COM_ID = T_COMMANDES.COM_ID 
```

抛出错误消息：的原因`Unknown column 'T_RELATIF_SESS.REL_COM_ID' in 'on clause'`是因为在加入`T_COURS`时`T_COMMANDES`，列`T_RELATIF_SESS`。由于您已在联接的下部`REL_COM_ID`声明了表，因此尚不可见。`T_RELATIF_SESS`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:01:13.330

`T_RELATIF_SESS`您在加入表之前尝试访问。您必须在`T_COMMANDES`之后`T_RELATIF_SESS`加入`T_RELATIF_SESS``T_SESSIONS`

```
SELECT
`T_FORMATIONS`.`FOR_ID`, 
...
FROM `T_COURS` 
INNER JOIN `T_SESSIONS` ON `T_COURS`.`COU_SES_ID` = `T_SESSIONS`.`SES_ID` 
INNER JOIN `T_FORMATIONS` ON `T_SESSIONS`.`SES_FOR_ID` = `T_FORMATIONS`.`FOR_ID` 
INNER JOIN `T_RELATIF_SESS` ON `T_SESSIONS`.`SES_ID` = `T_RELATIF_SESS`.`REL_SES_ID` 
INNER JOIN `T_COMMANDES` ON `T_RELATIF_SESS`.`REL_COM_ID` = `T_COMMANDES`.`COM_ID` 
WHERE `T_COMMANDES`.`COM_ID`=19 
```

# mongodb - 在 mongodb 聚合框架中执行 case-statement

> ID：15494113
> 
> 赞同：19
> 
> 时间：2013-03-19T07:53:40.867
> 
> 标签：mongodb, aggregation-framework

我正在评估 MongoDB 聚合框架在多大程度上满足我们的需求，因为我们目前在 SQL Server 之上运行。我很难执行特定查询：

假设我有以下伪记录（建模为 sql 表中的列和 mongodb 集合中的完整文档）

```
{
   name: 'A',
   timespent: 100,
},
{
   name: 'B',
   timespent: 200,
},
{
   name: 'C',
   timespent: 300,
},
{
   name: 'D',
   timespent: 400,
},
{
   name: 'E',
   timespent: 500,
} 
```

我想将时间字段分组到范围并计算出现次数，因此我将获得例如以下伪记录：

```
results{
   0-250: 2,
   250-450: 2,
   450-650: 1
} 
```

请注意，这些范围（250、450 和 650）是动态的，用户可能会随着时间的推移而改变。在 SQL 中，我们使用以下内容提取结果：

```
select range, COUNT(*) as total from (
select case when Timespent <= 250 then '0-250'
when Timespent <= 450 then '200-450'
else '450-600' end as range
from TestTable) as r
group by r.range 
```

同样，请注意，此 sql 是由我们的应用程序动态构建的，以适应任何时候可用的特定范围。

我正在努力在 mongodb 聚合框架中找到合适的结构来执行此类查询。我可以通过在管道中插入 $match 来查询单个范围的结果（即获取单个范围的结果），但我无法理解如何在单个管道查询中提取所有范围及其计数。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-20T06:30:50.850

[与聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)中的“case”SQL 语句相对应的是 $cond 运算符（参见[手册](http://docs.mongodb.org/manual/reference/aggregation/cond/)）。$cond 语句可以嵌套来模拟“when-then”和“else”，但我选择了另一种方法，因为它更易于阅读（和生成，见下文）：我将使用 $concat 运算符来编写范围字符串，然后用作分组键。

所以对于给定的集合：

```
db.xx.find()
{ "_id" : ObjectId("514919fb23700b41723f94dc"), "name" : "A", "timespent" : 100 }
{ "_id" : ObjectId("514919fb23700b41723f94dd"), "name" : "B", "timespent" : 200 }
{ "_id" : ObjectId("514919fb23700b41723f94de"), "name" : "C", "timespent" : 300 }
{ "_id" : ObjectId("514919fb23700b41723f94df"), "name" : "D", "timespent" : 400 }
{ "_id" : ObjectId("514919fb23700b41723f94e0"), "name" : "E", "timespent" : 500 } 
```

聚合（硬编码）如下所示：

```
db.xx.aggregate([
  { $project: {
    "_id": 0,
    "range": {
      $concat: [{
        $cond: [ { $lte: ["$timespent", 250] }, "range 0-250", "" ]
      }, {
        $cond: [ { $and: [
          { $gte: ["$timespent", 251] }, 
          { $lt:  ["$timespent", 450] } 
        ] }, "range 251-450", "" ]
      }, {
        $cond: [ { $and: [
          { $gte: ["$timespent", 451] }, 
          { $lt:  ["$timespent", 650] } 
        ] }, "range 450-650", "" ]
      }]
    }
  }},
  { $group: { _id: "$range", count: { $sum: 1 } } },
  { $sort: { "_id": 1 } },
]); 
```

结果是：

```
{
    "result" : [
        {
            "_id" : "range 0-250",
            "count" : 2
        },
        {
            "_id" : "range 251-450",
            "count" : 2
        },
        {
            "_id" : "range 450-650",
            "count" : 1
        }
    ],
    "ok" : 1
} 
```

为了生成聚合命令，您必须将“范围”投影构建为 JSON 对象（或者您可以生成一个字符串，然后使用 JSON.parse(string) ）

生成器如下所示：

```
var ranges = [ 0, 250, 450, 650 ];
var rangeProj = {
  "$concat": []
};

for (i = 1; i < ranges.length; i++) {
  rangeProj.$concat.push({
    $cond: {
      if: {
        $and: [{
          $gte: [ "$timespent", ranges[i-1] ]
        }, {
          $lt: [ "$timespent", ranges[i] ]
        }]
      },
      then: "range " + ranges[i-1] + "-" + ranges[i],
      else: ""
    }
  })
}

db.xx.aggregate([{
  $project: { "_id": 0, "range": rangeProj }
}, {
  $group: { _id: "$range", count: { $sum: 1 } }
}, {
  $sort: { "_id": 1 }
}]); 
```

这将返回与上面相同的结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-14T12:41:54.250

从 MongoDB 3.4 开始，我们可以使用operator 在stage`$switch`中执行多 switch 语句。[`$project`](https://docs.mongodb.com/manual/reference/operator/aggregation/project)

管道运算符按“范围”对文档进行分组，并使用累加器运算符[`$group`](https://docs.mongodb.com/manual/reference/operator/aggregation/group)返回每个组的“计数” 。[`$sum`](https://docs.mongodb.com/manual/reference/operator/aggregation/sum)

```
db.collection.aggregate(
    [  
        { "$project": { 
            "range": { 
                "$switch": { 
                    "branches": [ 
                        { 
                            "case": { "$lte": [ "$timespent", 250 ] }, 
                            "then": "0-250" 
                        }, 
                        { 
                            "case": { 
                                "$and": [ 
                                    { "$gt": [ "$timespent", 250 ] }, 
                                    { "$lte": [ "$timespent", 450 ] } 
                                ] 
                            }, 
                            "then": "251-450" 
                        }, 
                        { 
                            "case": { 
                                "$and": [ 
                                    { "$gt": [ "$timespent", 450 ] }, 
                                    { "$lte": [ "$timespent", 650 ] } 
                                ] 
                            }, 
                            "then": "451-650" 
                        } 
                    ], 
                    "default": "650+" 
                } 
            } 
        }}, 
        { "$group": { 
            "_id": "$range", 
            "count": { "$sum": 1 } 
        }}
    ]
) 
```

* * *

在我们收藏的以下文件中，

```
{ "_id" : ObjectId("514919fb23700b41723f94dc"), "name" : "A", "timespent" : 100 },
{ "_id" : ObjectId("514919fb23700b41723f94dd"), "name" : "B", "timespent" : 200 },
{ "_id" : ObjectId("514919fb23700b41723f94de"), "name" : "C", "timespent" : 300 },
{ "_id" : ObjectId("514919fb23700b41723f94df"), "name" : "D", "timespent" : 400 },
{ "_id" : ObjectId("514919fb23700b41723f94e0"), "name" : "E", "timespent" : 500 } 
```

我们的查询产生：

```
{ "_id" : "451-650", "count" : 1 }
{ "_id" : "251-450", "count" : 2 }
{ "_id" : "0-250", "count" : 2 } 
```

We may want to add a [`$sort`](https://docs.mongodb.com/manual/reference/operator/aggregation/sort) stage to the pipeline sort our document by range but this will only sort the documents in [lexicographic order](https://en.wikipedia.org/wiki/Lexicographical_order) because of the type of "range".

# php - 解释为php函数编写的编码

> ID：15494115
> 
> 赞同：0
> 
> 时间：2013-03-19T07:53:45.400
> 
> 标签：php

我无法获得这些功能的编写代码。任何人都可以解释流程和过程。t()函数调用中写的代码，注释后

```
function t($function)
{
    $t0 = microtime(true);
    $result = $function();
    echo " ** time = ", round((microtime(true) - $t0) * 1000, 2), "ms\r\n";
    return $result;
}

// Do a ton of lookups

t(function() use ($ipc) {
    for($i=0; $i<256; $i++)
    {
        $ipc->lookup("$i.0.0.0"); 
        $ipc->lookup("$i.$i.0.0"); 
        $ipc->lookup("$i.$i.$i.0"); 
        $ipc->lookup("$i.$i.$i.$i"); 
        $ipc->lookup("0.$i.$i.$i"); 
        $ipc->lookup("0.0.$i.$i"); 
        $ipc->lookup("0.0.0.$i"); 
    }

    for($i=0; $i<25000; $i++)
        $ipc->lookup(implode('.', array(rand(0,255), rand(0,255), rand(0,255), rand(0,255))));
}); 
```

# android - getLastKnownLocation 返回 NULL

> ID：15494116
> 
> 赞同：0
> 
> 时间：2013-03-19T07:53:46.303
> 
> 标签：android

我正在使用 GPS。这是我的代码。

```
 public void onCreate() 
{
    super.onCreate();

    mLocationManager  = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Location mLocation;

    if(mLocationManager.isProviderEnabled((LocationManager.GPS_PROVIDER)))
    {
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER , 2000, 10, myLocationListener);
        mLocation = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        Temp = updateWithNewLocation(mLocation);
        Value.city = Temp;  
        Temp = "";
        LogShow("DataClass.City = " + Value.city);
        LogShow("GPS_PROVIDER enable");
    }
  } 
```

我不知道为什么 getLastKnownLocation 返回 NULL。所以 updateWithNewLocation 将为空。我使用权限 ACCESS FINE LOCATION。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T06:30:17.787

尝试这个.....

```
 mGoogleMap.setOnMyLocationButtonClickListener(new OnMyLocationButtonClickListener() {

                    @Override
                    public boolean onMyLocationButtonClick()
                        {

                            Location myLocation = mGoogleMap.getMyLocation();
                            onLocationChanged(myLocation);
                            return false;
                        }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:02:57.907

尝试使用 requestLocationUpdates，而不是 getLastKnownLocation。您可以使用 LocationListener 来监听位置更新。更多信息：

[https://developer.android.com/reference/android/location/LocationListener.html](https://developer.android.com/reference/android/location/LocationListener.html)

[参考链接](https://stackoverflow.com/questions/6894195/getting-android-location-and-return-unknown-or-null-when-providers-are-unavail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T12:53:40.397

我遇到同样的问题。你的代码没问题。问题是当您在室内时 gps 没有收到信号，并且带有 gps 提供程序的 getLastKnownLocation 方法将返回 null。当你去户外时，你的代码应该可以正常工作。

# cocos2d-iphone - 用 ccbanimationmanager 运行动画后运行另一个动画

> ID：15494118
> 
> 赞同：1
> 
> 时间：2013-03-19T07:53:52.593
> 
> 标签：cocos2d-iphone, cocosbuilder

我正在使用 cocosbuilder 2.1 运行 cocos2d，并且我使用 cocosbuilder 动画委托 ( `CCBAnimationManagerDelegate::completedAnimationSequenceNamed`) 在动画完成时收到通知并采取诸如触发另一个 cocosbuilder 动画之类的操作。

第一次从`foodfactoryshow`代理运行动画时它运行良好，动画完成后它也`restoration`正确运行动画。但是，当`restoration`动画完成时，方法的参数是`name`！？`-(void) completedAnimationSequenceNamed``NULL`

```
-(void) completedAnimationSequenceNamed:(NSString*)name
{
if ([name isEqualToString:@"foodfactoryshow"])
{
    [manager runAnimationsForSequenceNamed:@"restoration"];
}
if ([name isEqualToString:@"restoration"])
{
    [self colorLayerChanged];
    self.gameLayer.isLock = true;
}
} 
```

这是一个错误还是我不应该从该`CCBAnimationManagerDelegate::completedAnimationSequenceNamed`方法运行动画！？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:47:21.863

我相信这是一个 CCBReader 错误。在 CocosBuilder github 页面 ( [https://github.com/cocos2d/CocosBuilder/issues/121](https://github.com/cocos2d/CocosBuilder/issues/121) ) 中有一个未解决的问题。最新版本的 CocosBuilder + CCBReader 应该已经修复了，但是如果你想使用 2.1 版本可以将 CCBAnimationManager 的 "sequenceCompleted" 方法改成如下：

```
- (void) sequenceCompleted
{
    NSString *completedSequenceName = [runningSequence.name copy];
    int nextSeqId = runningSequence.chainedSequenceId;
    runningSequence = NULL;

    if (nextSeqId != -1)
    {
        [self runAnimationsForSequenceId:nextSeqId tweenDuration:0];
    }

    [delegate completedAnimationSequenceNamed:completedSequenceName];
    [completedSequenceName release];
} 
```

# matlab - 自相关图的轴调整

> ID：15494121
> 
> 赞同：1
> 
> 时间：2013-03-19T07:54:09.473
> 
> 标签：matlab

我正在尝试创建我的自相关函数，因为我没有计量经济学工具箱并且我已经成功地创建了我的函数，但是我无法正确地获得茎图中的 x 轴。下图将突出我的观点：

![在此处输入图像描述](../Images/e5fb94fe61a9a7b6fc622e5906d455d3.png)

正如您在图片中看到的那样，现在应该有 5 个。如何调整 x 轴以使 5 向前“跳跃”一步等等......

谢谢你的帮助=）

编辑：

这是生成此图的代码：

```
h = stem(corrVals, 'fill');
set(h,'MarkerFaceColor','red')
axis([1 25 -0.5 1.5]) 
```

变量`corrVals`是由自相关值组成的向量。 `corrVals(1)`是滞后 0 时`corrVals(2)`的自相关，是滞后 1 时的自相关，依此类推...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:06:54.727

指定 x 值`stem`：

```
h = stem(0:length(corrVals) - 1, corrVals, 'fill'); 
```

# stored-procedures - 检查 100 个条件：使用“if else if”语句的存储过程或代码？

> ID：15494125
> 
> 赞同：0
> 
> 时间：2013-03-19T07:54:30.287
> 
> 标签：stored-procedures, switch-statement, case

我必须在我的网站上检查一个值，我需要这样做近 100 次我这样写

```
switch(100)
{
    case (1):
       do this
    break;

    case (2):
       do this
    break;

    case (3): do this 
```

像这样我必须写100个条件。我需要在每个 case 块中为我的 4 个变量分配一些值。这样写好不好？或者我应该写一些程序来得到这个，在那个程序中我还必须为我的 4 个变量分配值，那么它会很长。

那么，哪个性能更好呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:55:06.763

解决了。我在数据库中创建了一个表，将这 4 个变量作为列填充了与我的输入值对应的数据。创建了一个存储过程来检索传递输入值的值。

感谢每一位提出建议的人

# go - Golang 对类型数组中切片字段的引用

> ID：15494126
> 
> 赞同：2
> 
> 时间：2013-03-19T07:54:45.543
> 
> 标签：go

我是一个喜欢 Go 的 Python 程序员。经常让我绊倒的是引用的使用；我已经掌握了它（大部分），但有时有些事情让我感到困惑，比如这个。

我有一个简单的类型（'Fixture'）：

```
type Fixture struct {
    Probabilities      *[]float64
} 
```

如果我为这种类型的单个实例填充概率字段，一切都很好：

```
c := appengine.NewContext(r)
f := Fixture{}
p := []float64{}
p = append(p, 0.5)
p = append(p, 0.2)
p = append(p, 0.3)
f.Probabilities = &p
c.Infof("%v", *f.Probabilities)

2013/03/19 07:37:36 INFO: [0.5 0.2 0.3] 
```

但是，如果我尝试为这些类型的数组填充此字段，则代码会编译，但字段值始终为 nil：

```
c := appengine.NewContext(r)
fixtures := []Fixture{}
f := Fixture{}
fixtures = append(fixtures, f)
for _, f := range fixtures {
    p := []float64{}
    p = append(p, 0.5)
    p = append(p, 0.2)
    p = append(p, 0.3)
    f.Probabilities = &p
}
for _, f := range fixtures {
    // c.Infof("%v", *f.Probabilities) // causes error
    c.Infof("%v", f.Probabilities)
}

2013/03/19 07:37:41 INFO: <nil> 
```

我想我不明白数组/切片是如何工作的，尤其是在引用方面。谁能指出我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:25:47.643

在范围声明中

```
for _, f := range fixtures { ... } 
```

`f`是一个新声明的类型的局部变量`Fixture`。它不是对任何东西的*引用*。所以在设置了它的值之后，它必须被放入`fixtures`切片中。

```
package main

import "fmt"

type Fixture struct {
        Probabilities *[]float64
}

func main() {
        fixtures := []Fixture{}
        f := Fixture{}
        fixtures = append(fixtures, f)
        for i, f := range fixtures {
                p := []float64{}
                p = append(p, 0.5)
                p = append(p, 0.2)
                p = append(p, 0.3)
                f.Probabilities = &p
                fixtures[i] = f
        }
        for _, f := range fixtures {
                fmt.Printf("%v", f.Probabilities)
        }
} 
```

（也在[这里](http://play.golang.org/p/rTbjZwzO4y)）

* * *

输出

```
&[0.5 0.2 0.3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:51:30.807

将元素值存储在切片中。例如，

```
package main

import "fmt"

type Fixture struct {
    Probabilities *[]float64
}

func main() {
    fixtures := make([]Fixture, 1)
    for i := range fixtures {
        p := []float64{0.5, 0.2, 0.3}
        fixtures[i] = Fixture{Probabilities: &p}
    }
    for _, f := range fixtures {
        fmt.Println(*f.Probabilities)
    }
} 
```

输出：

```
[0.5 0.2 0.3] 
```

# facebook-opengraph - facebook open-graph html 格式不正确？

> ID：15494129
> 
> 赞同：0
> 
> 时间：2013-03-19T07:54:48.223
> 
> 标签：facebook-opengraph

错误信息是

> 必须修复的错误
> 
> 正文中的元标记：您的页面在正文而不是头部有元标记。这可能是因为您的 HTML 格式错误，它们在解析树中的位置较低。请修复此问题以使标签可用。

但是我在这里的链接，显然有

```
<head> og:tags </head> 
```

格式正确，对来自 fb 的这条时髦消息有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:15:42.983

您应该只`meta`在标签内使用`head`标签。

# android - android JNI，如何使用 findViewById

> ID：15494136
> 
> 赞同：1
> 
> 时间：2013-03-19T07:55:11.177
> 
> 标签：android, java-native-interface

`findViewById`在 C++中调用的代码是什么？`ID`C++中的类型是什么？字符串、整数、指针？GetMethodID 的签名是什么？

```
string ID = "sample id";
jFindViewById = (env)->GetMethodID(cls, "findViewById", "ILjava/lang/Id;)Ljava/lang/Object;");
jobject myView = (jobject) (env)->CallObjectMethod(Obj, jFindViewById, ID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:54:30.080

我自己刚刚找到了答案，虽然不是很明显，但经过一小时的反复试验后我得到了答案。希望它对其他人有帮助。

```
your jni funcion declaration... (JNIEnv* env, jobject Obj) {
   jmethodID jfindViewById = 0;
   int ID = 2; //get the ID somewhere else, it is just an integer.
   jfindViewById = (env)->GetMethodID(cls, "findViewById", "(I)Landroid/view/View;");
   jobject image_view = (jobject) (env)->CallObjectMethod(Obj, jfindViewById, ID);
} 
```

# python - 为什么 Python 不使用 upper() 大写特殊字符？

> ID：15494142
> 
> 赞同：4
> 
> 时间：2013-03-19T07:55:41.513
> 
> 标签：python, unicode

我不明白：

```
'ô TRAM'.upper() != 'Ô TRAM'
'ô TRAM'.upper() == 'ô TRAM' 
```

当我们要求大写时，所有文本编辑器（包括`vim`和`emacs`）都将 'ô TRAM'.upper() 转换为 'Ô TRAM'。为什么 Python 似乎只大写 [a-zA-Z] 字符？解决方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T07:58:03.763

在默认使用 Unicode 的 Python 3 中，它应该可以工作。

在 Python 2 中，你必须强制它，这会成功：

```
u'ô TRAM'.upper() 
```

**`u`**防止文本转换为 ASCII。*（保留为 unicode）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T08:40:30.427

@Thanakon 简要指出的是正确的：您可以在**Unicode String**上执行此操作。

不过，您确实问过*为什么*Python 不对“窄”字符串执行此操作。原因是：Unicode 是一个非常*大*的东西——就内存和处理而言。这绝对**不是小事**。查看[Unicode](http://unicode.org/)定义或[ICU 库](http://site.icu-project.org/)的实现。

早在 90 年代初，当 Python 被构思出来时，字符串上的 Unicode 还不是一个大问题。对于 Python 社区来说，**向后兼容性**一直是一个大问题。因此，在某些 2.x 版本中仅执行“窄字符串上的 unicode 大写”是非常困难的。

但是其他人在 2000 年代对这种解决方案并不满意，因此他们发明了一种**新的数据类型**：`unicode`. 如果您将数据放在那里，您将获得成熟的 Unicode 功能。为了您的方便，还有其他模块......

哦，顺便说一句：您显示的窄字符串必须**在代码页中解释，**然后才能以 unicode-ish 大写它。正如您的字符串在此处显示的那样，它是许多编码解释*之一*（也许是 ISO-8859-1？）

但现在是好事：在**Python 3**中，他们认为打破向后兼容性是值得的。那么默认字符串*是*一个 Unicode 字符串！当您`'hello'`在 Python 3 中编写时，这与在 Python 2 中相同`u'hello'`。在此之上，您将获得 Unicode 功能。

无论哪种方式，在 Python 2`u'blah'`或 Python 3`'blah'`中，您必须确保 python 文件**以 UTF-8**（或类似格式）保存。在 Python 3 中，它是 -files 的标准[编码](http://www.python.org/dev/peps/pep-3120/)`*.py`，在 Python 2 中，您必须[添加包含文件编码的标题行](http://www.python.org/dev/peps/pep-0263/) `# -*- coding: utf-8 -*-`，或者确保您的编辑器写入[UTF-8 BOM 标记](http://en.wikipedia.org/wiki/Byte_order_mark)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T07:58:40.290

您将问题标记为`unicode`，但从未将字符串设为 unicode：

```
>>> print u'ô TRAM'.upper()
Ô TRAM
>>> print 'ô TRAM'.upper()
ô TRAM 
```

# android - 与字符串匹配并在android中使用本地数据库检索所有可用字符串

> ID：15494145
> 
> 赞同：1
> 
> 时间：2013-03-19T07:55:46.860
> 
> 标签：android, android-layout

我的本地数据库中有三列

```
Name    Meaning    Gender
-------------------------
pavan   god        male    
pappy   beauty     male    
lokesh  handsome   male 
```

我想要所有以“P”开头的名字以及它们的含义和性别。我怎样才能找回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:49:34.037

我对Android一无所知，但我知道SQL和SQLite。所以我认为你可以运行查询。而你唯一想要的就是查询本身（因为你没有提到你的确切问题在哪里。）

```
select * from tableName where Name like '%P' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:07:08.263

试试这个：

```
 dbHelper = new DbHelper(this);
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    Cursor c = db.query("tableName", new String[]{"Name", "Meaning", "Gender"}
                  , "Name LIKE " + "'P%'", null, null, null, null);

    while(c.moveToNext())
    {
        // your code to use values
    } 
```

要获取有关如何在 android 中使用游标和 sqlite 的更多详细信息，请参阅此链接： [http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# java - java中的反向多图

> ID：15494155
> 
> 赞同：0
> 
> 时间：2013-03-19T07:56:26.507
> 
> 标签：java, multimap

我有一个多图，我用`hasnext()`.

```
Set keySet = myMap.keySet();    

Iterator keyIterator = keySet.iterator();    

while (keyIterator.hasNext() ) {    

    Integer key = (Integer) keyIterator.next();    

    System.out.println("K"+key);    

    List values = (List) myMap.get(key);    

    System.out.println("V"+values);    

} 
```

输出是：

K=4,

V=[萨姆印度],

K=3,

V=[山姆，美国山姆]，

K=5,

V=[山姆]

但我需要反向格式的输出，例如：

K=5,

V=[山姆]，

K=3,

V=[山姆，美国山姆]，

K=4,

V=[萨姆印度]

我们可以在 multimap 中有 hasPrevious() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:07:13.630

你真的应该开始使用泛型。

最简单的黑客可能是使用

```
ArrayList<List<?>> list = new ArrayList<>(keySet);
ListIterator<List<?>> iter = list.listIterator(list.size() - 1); 
```

然后向后迭代。但是，这将序列化集合，因此它是`O(n)`额外的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:58:08.680

一种选择是获取地图的大小，并以相反的顺序检索记录，从最后一个索引开始。您只想使用迭代器吗？或者您可以编写自定义迭代器来获得所需的功能。

# c# - 以编程方式设置图标图像模板的高度

> ID：15494158
> 
> 赞同：1
> 
> 时间：2013-03-19T07:56:43.357
> 
> 标签：c#, wpf, datatemplate

我的数据网格中有一列包含图标。为此，我以编程方式将一个单元格模板添加到列中。

```
var imageFactory = new FrameworkElementFactory(typeof(System.Windows.Controls.Image));
                    imageFactory.SetBinding(System.Windows.Controls.Image.SourceProperty, imageBinding);
                    imageFactory.SetValue(System.Windows.Controls.Image.StretchProperty, Stretch.None);
                    if (config.Font != null)
                    {
                        double height = config.Font.Size;
                        imageFactory.SetValue(FrameworkElement.HeightProperty, height);

                    }
                    var dataTemplate = new DataTemplate { VisualTree = imageFactory };
                    statusColumn.CellTemplate = dataTemplate;
                    view.DataGrid.Columns.Add(statusColumn); 
```

当我在外部设置高度属性时，它会**裁剪图像**而不是将图像大小调整为“高度”值。

如何将图像高度设置为特定值。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:13:57.333

试试这个

```
 double size = 14.0;
    BitmapImage bmp = new BitmapImage(new Uri("MyIcon.ico", UriKind.RelativeOrAbsolute));

    FrameworkElementFactory icon = new FrameworkElementFactory(typeof(Image));
    icon.SetValue(Image.SourceProperty, bmp);
    icon.SetValue(Image.WidthProperty, size);
    icon.SetValue(Image.HeightProperty, size); 
```

更新试试这个

```
 Style sBase = (Style)this.Resources["BaseButtonStyle"];
   Style sNew = new Style(typeof(Image), sBase);
   sNew.Setters.Add(new Setter(HeightProperty, 20d)); 
```

参考 [见这个](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9ee94f4c-457d-4c72-9055-e1973bfd0b6b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:25:25.337

我使用了 BitmapImage.DecodePixelHeight，它解决了我的问题。:)

```
bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.StreamSource = memoryStream;
                bitmapImage.DecodePixelHeight = font.Size <= 9 ? font.Size + 2 : font.Size;
                bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
                bitmapImage.EndInit();
                bitmapImage.Freeze(); 
```

# android - 将整个文件夹及其内容从资产复制到内部应用程序文件/

> ID：15494161
> 
> 赞同：8
> 
> 时间：2013-03-19T07:56:53.287
> 
> 标签：android, file, copy, assets

请建议我将文件夹从资产复制到 /data/data/my_app_pkg/files 的最佳方法。

assets (www) 中的文件夹包含文件和子文件夹。我想将其完全复制到我提到的内部应用程序路径的 files/ 中。

我能够成功地将文件从资产复制到内部应用程序文件/路径，但在复制文件夹的情况下无法执行相同操作，即使assetmanager.list 也没有帮助我，因为它只复制文件，但没有目录/子文件夹。

请建议我做我想做的更好的方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:00:21.813

希望在下面的代码中充分利用您：-

[将文件从 SD 卡的文件夹复制到 SD 卡的另一个文件夹](https://stackoverflow.com/questions/5715104/copy-files-from-a-folder-of-sd-card-into-another-folder-of-sd-card/14748855#14748855)

**资产**

```
 AssetManager am = con.getAssets("folder/file_name.xml");

 public static void copyDirectoryOneLocationToAnotherLocation(File sourceLocation, File targetLocation)
    throws IOException {

if (sourceLocation.isDirectory()) {
    if (!targetLocation.exists()) {
        targetLocation.mkdir();
    }

    String[] children = sourceLocation.list();
    for (int i = 0; i < sourceLocation.listFiles().length; i++) {

        copyDirectoryOneLocationToAnotherLocation(new File(sourceLocation, children[i]),
                new File(targetLocation, children[i]));
    }
} else {

    InputStream in = new FileInputStream(sourceLocation);

    OutputStream out = new FileOutputStream(targetLocation);

    // Copy the bits from instream to outstream
    byte[] buf = new byte[1024];
    int len;
    while ((len = in.read(buf)) > 0) {
        out.write(buf, 0, len);
    }
    in.close();
    out.close();
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T09:49:15.330

希望这会有所帮助

```
private void getAssetAppFolder(String dir) throws Exception{

        {
            File f = new File(sdcardlocation + "/" + dir);
            if (!f.exists() || !f.isDirectory())
                f.mkdirs();
        }
         AssetManager am=getAssets();

         String [] aplist=am.list(dir);

         for(String strf:aplist){
            try{
                 InputStream is=am.open(dir+"/"+strf);
                 copyToDisk(dir,strf,is);
             }catch(Exception ex){

                getAssetAppFolder(dir+"/"+strf);
             }
         }

     }

     public void copyToDisk(String dir,String name,InputStream is) throws IOException{
         int size;
            byte[] buffer = new byte[2048];

            FileOutputStream fout = new FileOutputStream(sdcardlocation +"/"+dir+"/" +name);
            BufferedOutputStream bufferOut = new BufferedOutputStream(fout, buffer.length);

            while ((size = is.read(buffer, 0, buffer.length)) != -1) {
                bufferOut.write(buffer, 0, size);
            }
            bufferOut.flush();
            bufferOut.close();
            is.close();
            fout.close();
     } 
```

# javascript - jQuery：在动画期间禁用点击

> ID：15494164
> 
> 赞同：2
> 
> 时间：2013-03-19T07:57:13.400
> 
> 标签：javascript, jquery, animation, click, unbind

所以我正在做一个小测验，我想`#qWrap`在动画运行时禁用对内部所有内容的点击，从而防止垃圾点击。我尝试使用`.is(':animated')`但没有效果。有任何想法吗？

HTML：

```
<div id="qWrap">
    <ul id="qBox">
        <!--Q1-->
        <li id="q1" class="qContainer">
            <ul class="qAnswers">
                <li class="qQuestion">
                    <h3>What are italics?</h3>
                </li>
                <li>
                    <a href="#q2" class="mums">
                        <h3>Slanted cut of a type</h3>
                    </a>
                </li>
                <li>
                    <a href="#q2" class="such">
                        <h3>A group of italian-designed typefaces</h3>
                    </a>
                </li>
                <li>
                    <a href="#q2" class="usch">
                        <h3>An other word for the !-sign</h3>
                    </a>
                </li>
            </ul>
        </li>
        <!--Q2-->
        <li id="q2" class="qContainer">
            <ul class="qAnswers">
                <li class="qQuestion">
                    <h3>Who designed Comic Sans?</h3>
                </li>
                <li>
                    <a href="#q3" class="usch">
                        <h3>Mathew Carter</h3>
                    </a>
                </li>
                <li>
                    <a href="#q3" class="usch">
                        <h3>David Carson</h3>
                    </a>
                </li>
                <li>
                    <a href="#q3" class="mums">
                        <h3>Vincent Connare</h3>
                    </a>
                </li>
            </ul>
        </li>
        <!--Q3-->
        <li id="q3" class="qContainer">
            <ul class="qAnswers">
                <li class="qQuestion">
                    <h3>What does Helvetica mean?</h3>
                </li>
                <li>
                    <a href="#q4" class="usch">
                        <h3>From Austria</h3>
                    </a>
                </li>
                <li>
                    <a href="#q4" class="usch">
                        <h3>From Germany</h3>
                    </a>
                </li>
                <li>
                    <a href="#q4" class="mums">
                        <h3>From Switzerland</h3>
                    </a>
                </li>
            </ul>
        </li>
        </li>
    </ul>
</div> 
```

JS：

```
$('.qAnswers li a').bind('click', function(event) {
    $(this).parent().addClass('selected');
    $(this).closest('.qAnswers').find("li:not(.selected, .qQuestion)").delay(200).addClass('notSelected');
    var $anchor = $(this);

    //preventing click within #qWrap 
    if ($('#qWrap').is(':animated')) {
        $('#qWrap').unbind('click');
    }

    //firing the animation
    $('#qWrap').stop(true, true).delay(800).animate({
        scrollLeft: $($anchor.attr('href')).position().left
    }, 2000, function() {
        nextCount();
    });
    stopTimer();
    addData();
    event.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:07:10.547

您的 JS 代码应如下所示：

```
$('.qAnswers li a').bind('click', function(event) {
    event.preventDefault();

    //preventing click within #qWrap 
    if ($('#qWrap').is(':animated')) {
        return;
    }

    $(this).parent().addClass('selected');
    $(this).closest('.qAnswers').find("li:not(.selected, .qQuestion)").delay(200).addClass('notSelected');
    var $anchor = $(this);

    //firing the animation
    $('#qWrap').stop(true, true).delay(800).animate({
        scrollLeft: $($anchor.attr('href')).position().left
    }, 2000, function() {
        nextCount();
    });
    stopTimer();
    addData();
}); 
```

该代码`$('#qWrap').is(':animated')`不是在元素动画时触发的事件，而是正常检查。我也把你`event.preventDefault();`移到了顶部；认为无论如何你都想这样做。您可能还需要移动其他一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T10:45:55.650

```
$('[where you click]').click(
function(){
    if(!$('[what animates]').is(':animated')){
        $('[what animates]').[your_animation];
    }
}); 
```

# android - 警报：调用状态栏通知活动不起作用

> ID：15494165
> 
> 赞同：1
> 
> 时间：2013-03-19T07:57:15.757
> 
> 标签：android

```
 private void scheduleAlarmReceiver() {
 AlarmManager alarmMgr = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
 PendingIntent pendingIntent =  PendingIntent.getBroadcast(this, 0, new Intent(this, StatusNotify.class),
 PendingIntent.FLAG_CANCEL_CURRENT);
 alarmMgr.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, 2000,AlarmManager.INTERVAL_DAY, pendingIntent);
 Log.i("alarm", "alarm set");
 } 
```

statusnotify.class

```
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_status_notify);
 NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
 int unique_id = 145558;
 Log.i("status bar" +unique_id , " ");
 Intent nintent = new Intent();
 nintent.setClass(this, TaskTrace.class);
 PendingIntent pin = PendingIntent.getActivity(getApplicationContext(),0, nintent, 0);
 String title = "Notification";
 String body = "This is a new notification";
 Notification n = new Notification(R.drawable.ic_launcher, body, System.currentTimeMillis());
 n.contentIntent = pin;
 n.setLatestEventInfo(getApplicationContext(), title, body, pin);
 n.defaults = Notification.DEFAULT_ALL;
 nm.notify(unique_id, n);
 } 
```

Statusnotify 在单独运行时工作正常，但不会从警报类中触发。

猜测意图调用中的一切都很好。请帮帮我。设置闹钟时，状态栏通知必须出现 1n 2 秒，并且每天在同一时间重复

# excel - excel数据透视表 - 多列

> ID：15494171
> 
> 赞同：6
> 
> 时间：2013-03-19T07:57:36.183
> 
> 标签：excel, pivot-table

我正在尝试使用以下数据在 Excel 中创建数据透视表：

![](../Images/6bab65a31cac3f2f450419db5fd77e9c.png)

我试图提出的最终结果（使用枢轴）是这样的摘要：

![](../Images/0890e3fedf7d7ad7127f307abda44085.png)

但是我不知道如何让 Excel 计算/添加/考虑所有列。我可以为每个单独的字段/列创建一个数据透视，但无法弄清楚如何将数据编译在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:46:20.423

请原谅图片中的 mac excel，但这是设置数据透视表的方法。

请注意，行标签将仅反映您放在行部分中的列中的类别

![在此处输入图像描述](../Images/5fd0731012a621069073972fbe9a3ae2.png)

# java - 在 Netbeans 中分析单个文件

> ID：15494173
> 
> 赞同：0
> 
> 时间：2013-03-19T07:57:46.853
> 
> 标签：java, netbeans, profile

我在 Netbeans 中创建了一个 Web 应用程序项目，并且我有一个`main`功能类。现在我想分析这个**主要功能**，但是当我运行分析器时，它会尝试部署我的项目并启动 tomcat。但我不想运行tomcat。

有没有办法在 Netbeans 中分析单个类？

一种方法是从文件中调用该主函数，并在运行 Web 应用程序后在浏览器中`jsp`请求该文件。`jsp`但我不能这样做，因为我的 tomcat 坏了

# c - 当我调用一个以数组名作为参数的函数时会发生什么？

> ID：15494174
> 
> 赞同：0
> 
> 时间：2013-03-19T07:57:48.283
> 
> 标签：c, arrays, function, pointers

我正在阅读 K&R 的 TCPL，当我阅读有关数组和指针的内容时，我在下面写了这个小代码：

```
#include <stdio.h>
int sum(int a[])
{
    int t = 0;
    int length = sizeof(a) / sizeof(a[0]) ;
//  printf("%d\n",length);
    for(int i = 0; i != length; ++i)
    {
        t += a[i];
    }
    return t;
}
int main()
{
    int b[5] = {1, 2, 3, 4, 5};
    printf("%d\n",sum(b));
    return 0;
} 
```

输出答案是 1 NOT 15，然后我通过添加`printf("%d\n",length);`输出长度为 1 NOT 5 来调试此代码。 TCPL 告诉当数组名称用作参数时，数组名称转换为指针，但输出答案是错误的，所以我想知道：

1.  当调用一个以数组名作为参数的函数时会发生什么？
2.  数组`a[]`中使用的参数`sum(int a[])`有没有存储？
3.  调用数组时我看到两种样式：`fun(int a[]); fun(b)`和`fun(int *a);fun(b)`，有什么区别？

非常感谢:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:01:17.890

您不能调用函数并传递整个数组；如果您使用数组名称作为函数参数，它会被隐式重写为（“decays to”）指向其第一个元素的指针。相当于写

```
 int sum(int *a) { ... } 
```

因此，在函数中，`sizeof array`, 不给你数组的大小，只给你指向它的第一个元素的指针的大小。

那么如何知道数组中有多少元素呢？您需要将此数字显式传递给函数（或定义具有元素数量的宏并在需要时使用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:04:09.990

调用`sizeof`声明如下的数组

```
 int a[5]; 
```

将返回您当前认为的数组大小（即数组的完整大小（以字节为单位 - 在本例中为我机器上的 20 个字节））。当您将这样的数组传递给函数时，数组将衰减为指向其第一个元素的指针。因此，当您调用`sizeof`函数参数时，实际上是在**指针**类型上调用它。如果你声明你的函数接受一个`int *`参数，错误会更明显，因为你调用的变量的类型`sizeof`是明确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:05:16.120

您的第三个问题触及了问题的核心：就编译器而言，这两者之间没有区别。关于如何传递参数的一切都是一样的。

因此，在回答您的第二个问题时，该`a`参数没有基础数组的存储空间，也没有复制该数组的成员。分配的唯一存储空间是用于`int *`指针，并且该指针存储在`a`. （这在某种程度上也回答了您的第一个问题。）

因此，在您的功能中：

```
int length = sizeof(a) / sizeof(a[0]) ; 
```

相当于

```
int length = sizeof(int *) / sizeof(int); 
```

在指针和整数大小相同的系统上返回 1。如果你在 64 位 Linux 上运行它，你会得到 2，因为指针是 64 位，整数是 32 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:06:51.530

`fun(int a[])`您的调用没有问题，and 之间也没有区别`fun(int *a)`（希望读者更明显的是您期望的是数组而不是任何指针）。Bot 参数是一个指向 int 的指针。

您的问题是您如何尝试确定数组的长度。由于方括号为空，编译器无法知道后面的数组有多长`a`。例如，您可以提供数组的长度作为第二个参数。注意：调用函数时，`sizeof(b)`会提供正确的长度，因为编译器知道它的长度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T08:30:39.010

该`sizeof()`运算符不能用于获取动态分配的数组长度。

[在这里](http://en.wikipedia.org/wiki/Sizeof)您可以找到`sizeof()`使用示例。

当您尝试这样做`sizeof(array_ptr)`时，它实际上是**给您指针的大小**。

因此，**您必须将数组长度作为函数的参数传递**

# iphone - CGContextTransalateCTM 是如何工作的？

> ID：15494176
> 
> 赞同：0
> 
> 时间：2013-03-19T07:57:53.780
> 
> 标签：iphone, ios, objective-c, ipad

我试图在我的一个视图中的 drawRect 中绘制一个框/路径，路径 rect 是：

```
CGRect pathRect = CGRectMake(self.buttonSize_ + 25, commentYOffset, rect.size.width - 80, 40); 
```

在此之前我有：

```
 CGContextSetTextMatrix(context, CGAffineTransformIdentity);
        CGContextTranslateCTM(context, 0.0,  rect.size.height);
        CGContextScaleCTM(context, 1.0, -1.0); 
```

我希望这条路径从顶部开始绘制 100 像素，所以我所做的就是将 commentYOffset 设置为 100，但这并没有这样做。我做错了什么，所以当我绘制这条路径时，它从顶部开始 100 像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:14:53.313

`CGContextTranslateCTM(context,…)`将翻译转换应用于上下文。在绘图上下文中的任何现有变换之后应用转换。您发布的代码中的最后两行有效地翻转了绘图上下文的垂直方向。只需将它们排除在外，路径就会绘制到您想要的位置。

**编辑：阿迪特说他需要变换来保持一些文本绘制正面朝上，所以：**如果你需要在你的绘图上下文中翻转垂直线（就像你正在做的那样），那么请记住，在应用这些变换之后，零 - y 在rect 的底部和正 y 轴指向 rect 的顶部。因此，要从顶部绘制路径 100 像素，您应该

```
commentYOffset = CGRectGetMaxY(rect) - 40.0 - 100.0; 
```

那 40 是因为你的 rect 是 40 点高。实际上，制作这些命名常量是更好的做法，这样您就不必在未来到处复制幻数。然后您的代码将如下所示：

```
commentYOffset = CGRectGetMaxY(rect) - kPathRectHeight - kPathTopMargin; 
```

# facebook - Facebook Graph API 问题发生意外错误

> ID：15494177
> 
> 赞同：3
> 
> 时间：2013-03-19T07:57:57.130
> 
> 标签：facebook, facebook-graph-api

我正在对 facebook 图形 API 进行以下调用，以从我的 facebook 组（封闭组）之一获取数据流。

[https://graph.facebook.com/GROUP-ID/feed?access_token=MY-TOKEN](https://graph.facebook.com/GROUP-ID/feed?access_token=MY-TOKEN)

这是过去一年的工作。昨天它开始给出以下错误

{ "error": { "message": "发生意外错误。请稍后重试您的请求。", "type": "OAuthException", "code": 2 } }

我尝试使用不同 facebook 用户的访问令牌，它工作正常。

但是当我尝试使用我的令牌时，它会抛出错误。

然后我尝试像这样向 API 调用添加限制

[https://graph.facebook.com/GROUP-ID/feed?access_token=MY-TOKEN&limit=3](https://graph.facebook.com/GROUP-ID/feed?access_token=MY-TOKEN&limit=3)

这工作得很好。当我将限制增加到 3 以上时，发生了同样的错误。任何想法？

使用相同的访问令牌，我可以访问其他组的数据。所以我认为令牌是有效的。我真的很困惑。任何帮助表示赞赏。

# java - 师双机器人

> ID：15494184
> 
> 赞同：3
> 
> 时间：2013-03-19T07:58:19.937
> 
> 标签：java, android, division

我在 android 上的部门有问题：

```
 double test= 100/ 1280;
    double test2 = 0.2354;
    System.out.println(test);
    System.out.println(test2); 
```

我有

```
0.0
0.2354 
```

我想拥有

```
0.078125
0.2345 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T07:59:24.470

试试这个

```
 double test= (double) 100/ 1280; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T08:03:52.103

如果您用小数指定除法中的一个数字，即

```
double test = 100.0/1280; 
```

它将为您提供所需的输出。

您没有得到正确结果的原因是，当划分两个整数时，结果类型也将是一个整数。为了避免这种情况，您必须将除法中的一个操作数类型转换为双精度，或者 - 当您在操作中明确设置数字而不使用变量时，作为一种更短的解​​决方案 - 您可以添加“.0”到其中一个数字。

# java - Spring JDBC中的多个一对多关系

> ID：15494185
> 
> 赞同：15
> 
> 时间：2013-03-19T07:58:23.090
> 
> 标签：java, spring, jdbc, spring-jdbc

我正在使用 Spring JDBC，但我有点不确定如何处理多个一对多关系（或多对多）。在这种情况下，我将一个存储库注入到我的一个结果提取器中，以便我可以检索它的关联。这是这样做的方法吗？不好吗？还有其他更好的方法吗？

*注意：我省略了存储库的注入*

```
public class SomeResultSetExtractor implements ResultSetExtractor {

  public Object extractData(ResultSet rs) throws SQLException, DataAccessException {
    List result = new LinkedList();

    while (rs.next()) {
        SomeObject object = new SomeObject(rs.getString(1), rs.getLong(2));
        result.add(object);

        List<AnotherObject> otherObjects = anotherRepository.findAllById(object.getId);
        object.setOtherObjects(otherObjects);
        // and so on
    }

    return result;

  }
} 
```

好吧，所以在阅读了 Dmytro Polivenok 的答案后，我改为改为 RowMapper 界面，我目前正在使用其他存储库来填充所有关联，就像我在示例中显示的那样。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T05:58:31.687

我认为 Spring JDBC 和 SQL 查询的一个好的做法是对每个实体使用一个查询。

例如假设这个模型：

*   客户（customerId、姓名、年龄……）
*   地址（customerId、类型、街道、城市……）
*   PaymentOption (customerId, cardnumber, cardtype, ...)

*   客户 1---* 地址

*   客户 1---* PaymentOption

我将构建 3 个查询、3 个 Daos、3 个 ResultSetExtractors/RowcallbackHandlers：

*   CustomerDao 与 readCustomerData（客户或列表）
*   带有 readAddressForCustomer（客户或列表）的 AddressDao
*   PaymentOptionDao 与 readPaymentOptionsForCustomer（客户或列表）

如果您将在 1 个查询中进行烘焙，则必须构建一些逻辑来恢复笛卡尔积。

*   即，如果客户有 3 个地址和 2 个付款选项，则查询将返回 6 行。
*   如果 Address 或 PaymentOption 没有自己的主键，这将变得非常困难。

对于多对多：

*   客户 * --recommends-- * 产品

我可能会建立：

*   CustomerDao.readRecommendationsAndProductKeys
*   getDistinctListOfProductKeysFromRecommendations
*   ProductDao.readProducts
*   replaceProductKeysByProductsOnRecommendations

像这样你可以重用 ProductDao.readProducts

*   客户 * --buys-- * 产品或
*   产品组 1---* 产品

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T21:16:11.783

我认为你的代码可以工作，但这里关注的是 ResultSetExtractor 的使用，它主要用于 JDBC 框架本身，并且在大多数情况下，[文档](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html)建议使用 RowMapper。

因此，替代方法是在您的 DAO 中使用方法来选择和映射父对象。然后为每个对象调用其他存储库或选择和映射子对象的私有方法，然后根据您的关系类型（单向或双向）将子对象与父对象链接。这种方法还可以让您控制是否要加载子对象。

例如，您可以检查具有[SimpleJdbcClinic 类的 Spring PetClinic 应用程序](https://src.springframework.org/svn/spring-samples/petclinic/trunk/src/main/java/org/springframework/samples/petclinic/jdbc/SimpleJdbcClinic.java)

如果你可以使用其他框架，你可以考虑[mybatis](http://mybatis.github.com/mybatis-3/)，它更多的是关于映射，允许你控制你的 SQL 代码。

# java - 如何检测抖动事件

> ID：15494190
> 
> 赞同：0
> 
> 时间：2013-03-19T07:58:33.370
> 
> 标签：java, android, detect, shake

我已经广泛搜索互联网以找到我的答案，但没有运气。我想知道是否可以摇动安卓设备并让手机识别它。手机识别后，它会开始一个新的意图（如图片）。请帮助，任何帮助将不胜感激。谢谢

# maven - maven-deploy-plugin 存储库

> ID：15494191
> 
> 赞同：1
> 
> 时间：2013-03-19T07:58:38.640
> 
> 标签：maven

我想使用 maven-deploy-plugin 部署文件。目前我的pom中有以下内容：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.7</version>
            <executions>
                <execution>
                    <id>deploy-features-xml</id>
                    <phase>deploy</phase>
                    <goals>
                        <goal>deploy-file</goal>
                    </goals>
                    <configuration>
                        <repositoryId>${project.distributionManagement.snapshotRepository.id}</repositoryId>
                        <url>${project.distributionManagement.snapshotRepository.url}</url>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>${project.artifactId}</artifactId>
                        <version>${project.version}</version>
                        <file>features.xml</file>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

我想根据版本在快照和发布存储库之间进行更改。如果项目版本为 1-SNAPSHOT，则文件应部署到快照存储库，如果项目版本为 1.0，则文件应部署到发布存储库。但是 maven-deploy-plugin 硬编码呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:37:20.373

默认情况下已经给出了这种行为。但是您应该使用[存储库管理器](http://maven.apache.org/repository-management.html)。您可以通过 mvn deploy 简单地部署工件，通常有一个 SNAPSHOT 版本将进入 SNAPSHOT 存储库，以防发布它会进入发布存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:31:11.043

我最终得到的解决方案是使用 build-helper-maven-plugin 和 maven-resources-plugin。此设置意味着与 jar 和 pom 以及项目一起部署一个 xml 文件，该文件可以在 maven 存储库中作为 project/xml/features 引用。

相关pom插件：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-artifacts</id>
                    <phase>package</phase>
                    <goals>
                        <goal>attach-artifact</goal>
                    </goals>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>target/features/features.xml</file>
                                <type>xml</type>
                                <classifier>features</classifier>
                            </artifact>
                        </artifacts>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-features</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/features</outputDirectory>
                        <resources>
                            <resource>
                                <directory>src/main/features</directory>
                                <filtering>true</filtering>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# rtmp - 在使用 RTMP Streaming 时，我的服务器有很多负担

> ID：15494195
> 
> 赞同：1
> 
> 时间：2013-03-19T07:58:44.760
> 
> 标签：rtmp, live-streaming

1.我有自己的服务器。使用此服务器，我想在我的服务器 2 中运行实时流媒体程序。
为此，我选择了 RTMP 流媒体。
3.为此，我开发了一个网站，我在其中使用了 JarisFLVPlayer 4.
直到这里一切都很好。
5\. 但是，如果我们网站上的访问者增加，服务器的负担也会增加。因为每个请求都会发送到服务器。
6.有什么解决方案可以减轻我们服务器的负担
7.有没有什么解决方案，比如mirrioning，catch...在我的网站上使用

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:30:21.387

要么**改进服务器的配置**（我希望你知道这个游戏。用户越多，服务器的性能就越高。因此你需要升级）或者**去[RTMFP](http://www.adobe.com/in/products/adobe-media-server-extended/rtmfp-faq.html)**。

# magento - 在 magento 产品页面上隐藏等级价格

> ID：15494197
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:58:47.310
> 
> 标签：magento, magento-1.7, magento-1.6

我正在尝试在 magento 产品页面上隐藏等级定价，但无法成功，我遵循[了在 Magento 产品页面上显示价格一次的](https://stackoverflow.com/questions/3708233/display-price-once-on-magento-product-page)帖子，任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:53:56.813

复制**price.phtml**从

> app/design/frontend/base/default/template/catalog/product/price.phtml

至

> 应用程序/设计/前端/默认/您的主题/模板/目录/产品/

找到以下几行

```
<span class="label"><?php echo $this->__('As low as:') ?></span>
<span class="price" id="product-minimal-price-<?php echo $_id ?><?php echo $this->getIdSuffix() ?>">
      <?php echo $_coreHelper->currency($_minimalPriceDisplayValue,true,false) ?>
</span> 
```

评论这些行：

```
<!--span class="label"><?php echo $this->__('As low as:') ?></span>
<span class="price" id="product-minimal-price-<?php echo $_id ?><?php echo $this->getIdSuffix() ?>">
      <?php echo $_coreHelper->currency($_minimalPriceDisplayValue,true,false) ?>
</span--> 
```

您的等级价格是隐藏的。

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T05:18:06.113

**供应商\模块\视图\前端\布局\catalog_product_prices.phtml**

```
<?xml version="1.0"?>                                                 
<layout xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/layout_generic.xsd">
<block class="Magento\Framework\Pricing\Render\RendererPool" name="render.product.prices">
    <arguments>
        <argument name="default" xsi:type="array">
            <item name="default_render_class" xsi:type="string">Magento\Catalog\Pricing\Render\PriceBox</item>
            <item name="default_render_template" xsi:type="string">Magento_Catalog::product/price/default.phtml</item>
            <item name="default_amount_render_class" xsi:type="string">Magento\Framework\Pricing\Render\Amount</item>
            <item name="default_amount_render_template" xsi:type="string">**Magento_Catalog**::product/price/amount/default.phtml</item>
            <item name="prices" xsi:type="array">
                <item name="special_price" xsi:type="array">
                    <item name="render_template" xsi:type="string">Magento_Catalog::product/price/special_price.phtml</item>
                </item>
                <item name="tier_price" xsi:type="array">
                    <item name="render_template" xsi:type="string">Vendor_Module::custom_tierprice.phtml</item>
                </item>
                <item name="final_price" xsi:type="array">
                    <item name="render_class" xsi:type="string">Magento\Catalog\Pricing\Render\FinalPriceBox</item>
                    <item name="render_template" xsi:type="string">Magento_Catalog::product/price/final_price.phtml</item>
                </item>
                <item name="custom_option_price" xsi:type="array">
                    <item name="amount_render_template" xsi:type="string">Magento_Catalog::product/price/amount/default.phtml</item>
                </item>
                <item name="configured_price" xsi:type="array">
                    <item name="render_class" xsi:type="string">Magento\Catalog\Pricing\Render\ConfiguredPriceBox</item>
                    <item name="render_template" xsi:type="string">Magento_Catalog::product/price/configured_price.phtml</item>
                </item>
            </item>
            <!--<item name="adjustments" xsi:type="array"></item>-->
        </argument>
    </arguments>
</block>                                                        
</layout> 
```

**供应商\模块\视图\前端\模板\custom_tierprice.phtml**

```
<?php @var \Magento\Catalog\Pricing\Render\PriceBox $block @var \Magento\Catalog\Pricing\Price\TierPrice $tierPriceModel ?> 
```

# c# - 当我来到 htmldocument 时 htmlagilitypack 出错

> ID：15494198
> 
> 赞同：0
> 
> 时间：2013-03-19T07:58:54.437
> 
> 标签：c#, asp.net, visual-studio, html-agility-pack

html 敏捷包出错，当我调试代码并到达： where htmldoc = new HTML Document (); 那么它会找到一个文件 HtmlDocument.cs 这是一个错误，我该如何修复它？

```
string Url = "http://www.mittanbud.no/bedriftsok/?q=Baderom";

        var htmlDoc = new HtmlDocument();
        htmlDoc.OptionReadEncoding = false;
        var request = (HttpWebRequest)WebRequest.Create(Url);
        request.Method = "GET";
        using (var response = (HttpWebResponse)request.GetResponse())
        {
            using (var stream = response.GetResponseStream())
            {
                htmlDoc.Load(stream, Encoding.UTF8);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:04:32.680

试试这个代码：

```
HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = web.Load(Url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:16:51.483

也许链接到您的项目的二进制文件是使用另一个版本的源构建的。尝试重建 htmlagilitypack。

# javascript - 将自定义日期字符串转换为日期对象

> ID：15494203
> 
> 赞同：2
> 
> 时间：2013-03-19T07:59:08.470
> 
> 标签：javascript

如何将日期的字符串表示形式转换为真正的 javascript 日期对象？

日期具有以下格式

```
E MMM dd HH:mm:ss Z yyyy 
```

例如

```
Sat Jun 30 00:00:00 CEST 2012 
```

提前致谢

编辑：我的工作解决方案基于接受的答案。要让它在 IE8 中工作，您必须将月份部分（例如 Jun）替换为月份编号（例如 5 代表六月，因为一月是 0）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:11:24.423

您的日期字符串大部分可以按原样解析，但`CEST`不是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)中的有效时区，因此您必须手动将其替换为`+0200`.

因此，一个简单的解决方案可能是：

```
var str = "Sat Jun 30 00:00:00 CEST 2012";
str = str.replace(/CEST/, '+0200');
var date = new Date(str); 
```

如果要支持由其名称定义的其他时区，则必须找到它们的可能值和相关偏移量。您可以在地图中注册它们：

```
var replacements = {
    "ACDT": "+1030",
    "CEST": "+0200",
    ... 
};
for (var key in replacements) str = str.replace(key, replacements[key]);
var date = new Date(str); 
```

[这可能是一个很好的时区缩写列表。](http://en.wikipedia.org/wiki/List_of_time_zone_abbreviations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:21:19.983

您可以使用以下代码将字符串转换为日期时间：

```
var sDate = "01/09/2013 01:10:59";
 var dateArray = sDate.split('/');
 var day = dateArray[1];

 // Attention! JavaScript consider months in the range 0 - 11
 var month = dateArray[0] - 1;
 var year = dateArray[2].split(' ')[0];
 var hour = (dateArray[2].split(' ')[1]).split(':')[0];
 var minute = (dateArray[2].split(' ')[1]).split(':')[1];
 var objDt = new Date(year, month, day, hour, minute);
 alert(objDt); 
```

# android - Mapsforge 的片段支持

> ID：15494210
> 
> 赞同：5
> 
> 时间：2013-03-19T07:59:35.013
> 
> 标签：android, android-fragments, openstreetmap, actionbarsherlock-map

我知道这里有某种针对 Mapsforge 片段的补丁：[https](https://code.google.com/p/mapsforge/issues/detail?id=177) ://code.google.com/p/mapsforge/issues/detail?id=177。但是我不确定如何使用它。

这是我到目前为止实现的：

```
public class TOfflineMapViewFragment  extends SherlockFragment{

    MapView myOpenMapView;
    //other codes here...

    public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState) {

            view = inflator.inflate(R.layout.offline_map_activity, container, false);

            myOpenMapView = (MapView) view.findViewById(R.id.openmapview);
            myOpenMapView.setMapFile(new File(Environment.getExternalStorageDirectory().toString() + 
            "/offlineMap/singapore.map");

           return view;
    }

} 
```

这是我的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
    <org.mapsforge.android.maps.MapView
        android:id="@+id/openmapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

我收到此错误：

```
03-19 15:51:04.243: E/AndroidRuntime(10395): FATAL EXCEPTION: main

03-19 15:51:04.243: E/AndroidRuntime(10395): android.view.InflateException: Binary XML file line #6: Error inflating class org.mapsforge.android.maps.MapView
03-19 15:51:04.243: E/AndroidRuntime(10395):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
03-19 15:51:04.243: E/AndroidRuntime(10395):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
03-19 15:51:04.243: E/AndroidRuntime(10395):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
03-19 15:51:04.243: E/AndroidRuntime(10395):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-19 15:51:04.243: E/AndroidRuntime(10395):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-19 15:51:04.243: E/AndroidRuntime(10395):    at com.fragments.TOfflineMapViewFragment.onCreateView(TOfflineMapViewFragment.java:76) 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T21:54:45.800

adding

```
AndroidGraphicFactory.createInstance(getActivity().getApplication()); 
```

in overridden onCreate() worked for me

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T12:56:11.200

我创建了一个与 MapVeiwTemplate 相同的片段模板。它扩展了一个片段而不是一个活动。

```
import android.app.Fragment;
import android.content.Context;
import android.os.Bundle;
import android.os.Environment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import org.mapsforge.core.model.LatLong;
import org.mapsforge.core.model.MapPosition;
import org.mapsforge.map.android.graphics.AndroidGraphicFactory;
import org.mapsforge.map.android.util.AndroidPreferences;
import org.mapsforge.map.android.view.MapView;
import org.mapsforge.map.datastore.MapDataStore;
import org.mapsforge.map.layer.cache.TileCache;
import org.mapsforge.map.layer.hills.HillsRenderConfig;
import org.mapsforge.map.model.MapViewPosition;
import org.mapsforge.map.model.common.PreferencesFacade;
import org.mapsforge.map.reader.MapFile;
import org.mapsforge.map.rendertheme.XmlRenderTheme;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

/**
 * Created by a7med on 08.03.18.
 */
public abstract class MapFragmentTemplate extends Fragment
{
    // Abstract variables for displaying the map
    protected MapView mapView;
    protected PreferencesFacade preferencesFacade;
    protected List<TileCache> tileCaches = new ArrayList<TileCache>();

    // Constant variables for controlling the map
    private final static int MINZOOM = 5;
    private final static int MAXZOOM = 23;
    private final static int CURRENTZOOM = 12;

    // Default address in Norway ... Oslo is chosen as Default
    final LatLong DEFAULT_LOCATION = new LatLong(59.8939225, 10.7150775);

    /*
     * Abstract methods that must be implemented:
     *  - getLayoutId();
     *  - getMapViewId();
     *  - getMapFileName();
     *  - getRenderTheme();
     *  - createLayers();
     *  - createTileCaches();
     */
    /**
     * @return the layout to be used,
     */
    protected abstract int getLayoutId();

    /**
     * @return the id of the mapview inside the layout.
     */
    protected abstract int getMapViewId();

    /**
     * Gets the name of the map file.
     * The directory for the file is supplied by getMapFileDirectory()
     *
     * @return the map file name to be used
     */
    protected abstract String getMapFileName();

    /**
     * @return the rendertheme for this viewer
     */
    protected abstract XmlRenderTheme getRenderTheme();

    /**
     * Hook to create map layers. You will need to create at least one layer to
     * have something visible on the map.
     */
    protected abstract void createLayers();

    /**
     * Hook to create tile caches. For most map viewers you will need a tile cache
     * for the renderer. If you do not need tilecaches just provide an empty implementation.
     */
    protected abstract void createTileCaches();

    /*
        Methods for this class
     */
    /**
     * Hook to create controls, such as scale bars.
     * You can add more controls.
     */
    protected void createControls()
    {
        initializePosition(mapView.getModel().mapViewPosition);
        mapView.setCenter(DEFAULT_LOCATION);
        mapView.setZoomLevel((byte) CURRENTZOOM);
    }

    /**
     * The MaxTextWidthFactor determines how long a text may be before it is line broken. The
     * default setting should be good enough for most apps.
     *
     * @return the maximum text width factor for line breaking captions
     */
    protected float getMaxTextWidthFactor()
    {
        return 0.7f;
    }

    /**
     * @return the default starting zoom level if nothing is encoded in the map file.
     */
    protected byte getZoomLevelDefault()
    {
        return (byte) CURRENTZOOM;
    }

    /**
     * @return the minimum zoom level of the map view.
     */
    protected byte getZoomLevelMin()
    {
        return (byte) MINZOOM;
    }

    /**
     * @return the maximum zoom level of the map view.
     */
    protected byte getZoomLevelMax()
    {
        return (byte) MAXZOOM;
    }

    /**
     * Template method to create the map views.
     */
    protected void createMapViews(View v)
    {
        mapView = getMapView(v);
        mapView.getModel().init(this.preferencesFacade);
        mapView.setClickable(true);
        mapView.getMapScaleBar().setVisible(true);
        mapView.setBuiltInZoomControls(false);
        mapView.setZoomLevelMin((byte) MINZOOM);
        mapView.setZoomLevelMax((byte) MAXZOOM);
        mapView.setZoomLevel((byte) CURRENTZOOM);
        mapView.setCenter(new LatLong(DEFAULT_LOCATION.latitude, DEFAULT_LOCATION.longitude));
    }

    /**
     * Creates the shared preferences that are being used to store map view data over
     * activity restarts.
     */
    protected void createSharedPreferences()
    {
        this.preferencesFacade = new AndroidPreferences(getActivity().getSharedPreferences(getPersistableId(), Context.MODE_PRIVATE));
    }

    /**
     * Gets the default initial position of a map view if nothing is set in the map file. This
     * operation is used as a fallback only. Override this if you are not sure if your map file
     * will always have an initial position.
     *
     * @return the fallback initial position of the mapview.
     */
    protected MapPosition getDefaultInitialPosition()
    {
        return new MapPosition(DEFAULT_LOCATION, getZoomLevelDefault());
    }

    /**
     * Extracts the initial position from the map file, falling back onto the value supplied
     * by getDefaultInitialPosition if there is no initial position coded into the map file.
     * You will only need to override this method if you do not want the initial position extracted
     * from the map file.
     *
     * @return the initial position encoded in the map file or a fallback value.
     */
    protected MapPosition getInitialPosition()
    {
        final MapDataStore mapFile = getMapFile();

        if (mapFile.startPosition() != null)
        {
            Byte startZoomLevel = mapFile.startZoomLevel();
            if (startZoomLevel == null)
            {
                // it is actually possible to have no start zoom level in the file
                startZoomLevel = new Byte((byte) CURRENTZOOM);
            }

            return new MapPosition(mapFile.startPosition(), startZoomLevel);
        }
        else
        {
            return getDefaultInitialPosition();
        }
    }

    /**
     * Provides the directory of the map file, by default the Android external storage
     * directory (e.g. sdcard).
     *
     * @return
     */
    protected File getMapFileDirectory()
    {
        return Environment.getExternalStorageDirectory();
    }

    /**
     * Combines map file directory and map file to a map file.
     * This method usually will not need to be changed.
     *
     * @return a map file interface
     */
    protected MapDataStore getMapFile()
    {
        return new MapFile(new File(getMapFileDirectory(), this.getMapFileName()));
    }

    /**
     * The persistable ID is used to store settings information, like the center of the last view
     * and the zoomlevel. By default the simple name of the class is used. The value is not user
     * visibile.
     *
     * @return the id that is used to save this mapview.
     */
    protected String getPersistableId()
    {
        return this.getClass().getSimpleName();
    }

    /**
     * Returns the relative size of a map view in relation to the screen size of the device. This
     * is used for cache size calculations.
     * By default this returns 1.0, for a full size map view.
     *
     * @return the screen ratio of the mapview
     */
    protected float getScreenRatio()
    {
        return 1.0f;
    }

    /**
     * Configuration method to set if a map view activity will have zoom controls.
     *
     * @return true if the map has standard zoom controls.
     */
    protected boolean hasZoomControls()
    {
        return true;
    }

    /**
     * Configuration method to set if map view activity's zoom controls hide automatically.
     *
     * @return true if zoom controls hide automatically.
     */
    protected boolean isZoomControlsAutoHide()
    {
        return true;
    }

    /**
     * initializes the map view position.
     *
     * @param mvp the map view position to be set
     * @return the mapviewposition set
     */
    protected MapViewPosition initializePosition(MapViewPosition mvp)
    {
        final LatLong center = mvp.getCenter();

        if (center.equals(DEFAULT_LOCATION))
        {
            mvp.setMapPosition(this.getInitialPosition());
        }

        mvp.setZoomLevelMax(getZoomLevelMax());
        mvp.setZoomLevelMin(getZoomLevelMin());

        return mvp;
    }

    /**
     * Hook to check for Android Runtime Permissions.
     */
    protected void checkPermissionsAndCreateLayersAndControls()
    {
        createLayers();
        createControls();
    }

    /**
     * Android Fragment life cycle method.
     *
     * @param inflater
     * @param container
     * @param savedInstanceState
     * @return
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        final View v = inflater.inflate(getLayoutId(), container,
                false);

        /**
         * App Initialization !!
         * behind the scenes, this initialization process gathers a bit of
         * information on your device, such as the screen resolution, that allows mapsforge to
         * automatically adapt the rendering for the device.
         */
        AndroidGraphicFactory.createInstance(this.getActivity().getApplication());

        createSharedPreferences();
        createMapViews(v);
        createTileCaches();
        checkPermissionsAndCreateLayersAndControls();

        return v;
    }

    /**
     * Android Activity life cycle method.
     */
    @Override
    public void onPause()
    {
        mapView.getModel().save(this.preferencesFacade);
        this.preferencesFacade.save();
        super.onPause();
    }

    /**
     * Android Activity life cycle method.
     */
    @Override
    public void onDestroy()
    {
        mapView.destroyAll();
        AndroidGraphicFactory.clearResourceMemoryCache();
        tileCaches.clear();
        super.onDestroy();
    }

    /**
     * Hook to purge tile caches.
     * By default we purge every tile cache that has been added to the tileCaches list.
     */
    protected void purgeTileCaches()
    {
        for (TileCache tileCache : tileCaches)
        {
            tileCache.purge();
        }

        tileCaches.clear();
    }

    protected void redrawLayers()
    {
        mapView.getLayerManager().redrawLayers();
    }

    /**
     * Creates a map view using an XML layout file supplied by getLayoutId() and finds
     * the map view component inside it with getMapViewId().
     *
     * @return the Android MapView for this activity.
     */
    protected MapView getMapView(View v)
    {
        return (MapView) v.findViewById(getMapViewId());
    }

    /**
     * Override to enable hill shading.
     *
     * @return null or the HillsRenderConfig to use (defining height model path and algorithm)
     */
    protected HillsRenderConfig getHillsRenderConfig()
    {
        return null;
    }
} 
```

希望它有帮助，即使它已经晚了。

# c++ - 如何使用当前打开文件的设备名称显示绝对路径

> ID：15494220
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:00:03.207
> 
> 标签：c++, windows, filter-driver

此代码的前两行显示不包括设备名称的文件名，如**/Document/temp**，但我还想显示设备名称，如 L"\Device\Harddisk0\DR0\Document\temp。我正在使用此代码调用 ObQueryNameString 例程，但它显示为NULL。

请告诉我代码有什么问题。我认为内存分配不正确。

```
PFILE_OBJECT pFileObject = IoGetCurrentIrpStackLocation(Irp)->FileObject;
if (pFileObject)
{
        DbgPrint("FileName : %wZ\n", pFileObject->FileName);
}

NTSTATUS status = STATUS_UNSUCCESSFUL;

OBJECT_NAME_INFORMATION objName = {0};
ULONG ReturnLength = 1024;  

ObQueryNameString(DeviceObject, objName, sizeof(objName), ReturnLength);

DbgPrint("FileName : %wZ\n", &objName); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-19T08:17:21.110

您是否考虑过使用 GetFullPathName 函数？有关更准确的解释，请参阅[http://msdn.microsoft.com/en-us/library/aa364963%28VS.85%29.aspx 。](http://msdn.microsoft.com/en-us/library/aa364963%28VS.85%29.aspx)

# sql - 通过代码更新 redmine 表

> ID：15494224
> 
> 赞同：1
> 
> 时间：2013-03-19T08:00:22.323
> 
> 标签：sql, ruby-on-rails, redmine, redmine-plugins

我在 redmine 中编写了一个插件，我更新了很多次我构建的表，但是当我尝试更新 redmine 表中的一些属性时它没有工作。

就我而言，我想更新项目表中的“标识符”属性。

```
def update_project_field()
begin
  @projj=Project.find(params[:project_id]) #current projet
  begin

    if (params[:identifier_pr]) != "" || (params[:identifier_pr]) != nil
        @projj.update_attributes(:identifier => params[:pr_identifier])
        if @projj.save
          flash[:notice] ="ok"
        else
          flash[:error] ="error"
        end

    end
  rescue Exception => e
    puts e.message
    puts e.backtrace.inspect
  end
  redirect_to :action=>'reunion'
end 
```

结尾

显示成功消息，但未发生更新。
我应该怎么办 ？
感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:57:03.483

这可能会有所帮助！

```
def update_project_field()
  begin
    @projj = Project.find(params[:project_id]) #current projet
    unless params[:identifier_pr].blank?
      @projj.identifier = params[:pr_identifier]
      if @projj.save!
        flash[:notice] = "ok"
      else
        flash[:error] = "error"
      end
    end
  rescue Exception => e
    flash[:error] = "Exception raised"
    puts e.message
    puts e.backtrace.inspect
  end
  redirect_to :action=>'reunion'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:39:52.320

无法更新项目的标识符，因为 redmine 在项目的 url 中使用了它。
所以在创建一个新项目之前，你必须确保标识符是完全正确的，因为一旦你创建了它，你就不能修改它。

# c# - 合并集合保留顺序的最有效方法？

> ID：15494225
> 
> 赞同：3
> 
> 时间：2013-03-19T08:00:24.387
> 
> 标签：c#, .net

我有 3 个频道：

```
byte[] Red;
byte[] Green;
byte[] Blue; 
```

我需要将它们中的所有值复制到 a`byte[Red.Length+Green.Length+Blue.Length] PA`中，以便：

```
PA[0] = Red[0];
PA[1] = Green[0];
PA[2] = Blue[0];
PA[3] = Red[1];
/// and so on 
```

以下是上述数组的示例：

```
byte[] Red = new byte[255];
byte[] Green = new byte[255];
byte[] Blue = new byte[255];
byte[] PA = new byte[Red.Length + Green.Length + Blue.Length];
for (int i = 0; i != 255; ++i)
{
    PA[i*3 + 0] = Red[i];
    PA[i*3 + 1] = Green[i];
    PA[i*3 + 2] = Blue[i];
} 
```

我假设要合并的集合大小相同，并且它们之间确实有一些顺序，例如`[0] = Red`,`[1]=Green`等必须为“合并”集合中的项目保留。

最有效的方法是什么`C#`？集合不必是数组，也不必是项目字节（尽管接受字节的集合类型将不胜感激）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:03:40.653

我会尽量避免`3*i`乘法：

```
byte[] Red = new byte[255];
byte[] Green = new byte[255];
byte[] Blue = new byte[255];
int newSize = Red.Length + Green.Length + Blue.Length;
byte[] PA = new byte[newSize];
for (int i = 0; i < newSize; i += 3)
{
    PA[i + 0] = Red[i];
    PA[i + 1] = Green[i];
    PA[i + 2] = Blue[i];
} 
```

*编辑*

甚至是这样的：

```
for (int i = 0, j = 0; i < 255; i++)
{
    PA[j++] = Red[i];
    PA[j++] = Green[i];
    PA[j++] = Blue[i];
} 
```

*（由[维克托](https://stackoverflow.com/users/941240/wiktor-zychla)建议）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T08:36:52.960

我试图通过使用指针来做出更有效的方式：

```
unsafe {
  fixed (byte* red = Red, green = Green, blue = Blue, pa = PA2) {
    byte* r = red, g = green, b = blue, p = pa;
    for (int i = 0; i < 255; i++) {
      *p = *r; p++; r++;
      *p = *g; p++; g++;
      *p = *b; p++; b++;
    }
  }
} 
```

在 x86 模式下，这大约是两倍快，但在 x64 模式下没有区别。

总之，您拥有的代码对于大多数应用程序来说已经足够快了。如果您需要它非常快，您可以对其进行一些优化，但不会太多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:02:55.280

效率是一个薄薄的决策层，但从*性能*的角度来看，我会说你已经以有效的方式做到了。

```
//allocate immediately memory need, so more shrinking of memory will happen 
byte[] PA = new byte[Red.Length + Green.Length + Blue.Length]; 

//use for loop, that normally equals to foreach in some cases is faster
for (int i = 0; i != 255; ++i)
{
    PA[i + 0] = Red[i];
    PA[i + 1] = Green[i];
    PA[i + 2] = Blue[i];
} 
```

# c# - 找不到与参考“RelativeSource FindAncestor”绑定的源

> ID：15494226
> 
> 赞同：42
> 
> 时间：2013-03-19T08:00:27.897
> 
> 标签：c#, wpf, xaml, mvvm, binding

我收到此错误：

```
Cannot find source for binding with reference 'RelativeSource FindAncestor,
AncestorType='System.Windows.Controls.UserControl', AncestorLevel='1'' 
```

在此绑定上：

```
<DataGridTemplateColumn Visibility="{Binding DataContext.IsVisible,
     RelativeSource={RelativeSource AncestorType={x:Type UserControl}},
     Converter={StaticResource BooleanToVisibilityConverter}}"> 
```

`ViewModel`坐在里面`DataContext`。_ （坐在）的 是 内的属性`UserControl`，在我有一个变量表示是否显示某一行，它的绑定失败，为什么？`DataContext``DataGrid``UserControl``ViewModel``ViewModel`

这是我的财产：

```
private bool _isVisible=false;
public bool IsVisible
{
    get { return _isVisible; }
    set
    {
        _isVisible= value;
        NotifyPropertyChanged("IsVisible");
    }
} 
```

说到函数：事件`NotifyPropertyChanged`为`PropertyChanged`null——意味着他没有注册绑定。

应该注意的是，我有更多的绑定以`ViewModel`这样的方式工作，这是一个例子：

```
Command="{Binding DataContext.Cmd,
RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-19T08:21:28.063

`DataGridTemplateColumn`不是视觉或逻辑树的一部分，因此没有绑定祖先（或任何祖先），因此`RelativeSource`不起作用。

相反，您必须明确地为绑定提供源。

```
<UserControl.Resources>
    <local:BindingProxy x:Key="proxy" Data="{Binding}" />
</UserControl.Resources>

<DataGridTemplateColumn Visibility="{Binding Data.IsVisible, 
    Source={StaticResource proxy},
    Converter={StaticResource BooleanToVisibilityConverter}}"> 
```

和绑定代理。

```
public class BindingProxy : Freezable
{
    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    public object Data
    {
        get { return (object)GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Data.
    // This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), 
        typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

[学分](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)。

# perl - 套接字：发送带有 '\n' 而没有 '\n' 的请求？

> ID：15494227
> 
> 赞同：0
> 
> 时间：2013-03-19T08:00:35.790
> 
> 标签：perl, sockets, buffer

我正在使用 IO::Socket::INET 客户端程序（TCP Socket）与（Infosys）服务器进行通信。

> 我的 $SOCK = new IO::Socket::INET ( PeerAddr => 'xxx.xxx.xxx.xxx' , PeerPort => '5000', Proto => 'tcp', );

```
$Sent_Message = $MAIN::REQUEST_NO . $Bitmap .$main::Req_String ; 
$Total_Len = sprintf("%04d",length( $Sent_Message ) ) ; 

#my $FinalMessage = $Total_Len . $Sent_Message."\n" ; 
my $FinalMessage = $Total_Len . $Sent_Message ; 

print $SOCK $FinalMessage; 
```

我在行尾发送带有“\n”的请求。我没有收到回复。在服务器端，日志说响应已发送到客户端。

使用 wireshark 和 tcpdump 我正在检查数据包，我的系统没有收到任何数据包。

我发送了没有'\n'的请求，我收到了响应（立即）成功。

然后我又发送了 3 个请求，第一个带有 '\n' 第二个和第三个没有 '\n'。

所有 3 个请求都在等待服务器的响应。我已经杀死了进程 1 女巫发送带有“\n”的请求。之后，其他 2 个进程收到响应。

相同的客户端代码正在将请求发送到我的本地服务器，但没有“\n”。

服务器没有收到请求。（缓冲区未刷新）。

我的疑问是使用 '\n' 和没有 '\n' 发送请求有什么区别？

为什么其他 2 个进程没有立即收到响应。（发送的请求没有'\n'）？

我发现问题是在行尾使用 '\n' 发送请求。

问题出在服务器端还是客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:31:11.223

我看到两个可能的原因。

1.  您应该发送一个 32 位整数作为长度，但您发送的是一个四位十进制字符串。

2.  你有一个臭虫*接收器*，它会一直读取直到收到换行符。这在这里完全不合适，因为它可能会提前结束或等待太久（如果不是永远）。

这不是缓冲问题；IO::Socket::INET 自 1.18（1997 年发布）以来一直在其句柄上禁用缓冲。

# ios - UISearchBar 在包含 UIImageView 和 UILabel 的自定义单元格中搜索

> ID：15494230
> 
> 赞同：0
> 
> 时间：2013-03-19T08:00:42.673
> 
> 标签：ios, objective-c, uitableview, uisearchbar, custom-cell

我有一个包含 UILabel 和 UIImageView 的自定义单元格。使用 JSON 检索数据。我的 UISearchBar 在搜索文本时工作正常，但我的 UIImageView 的索引没有改变。

```
-(void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

if (searchText.length == 0) {

    isSearchBarClicked = FALSE;

    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:userNames];

    [displayPictures removeAllObjects];
    [displayPictures addObjectsFromArray:profilePictures];

} else {

    isSearchBarClicked = true;

    [displayItems removeAllObjects];
    [displayPictures removeAllObjects];

    for (NSString * string in userNames) {

        NSRange r = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound) {

            [displayItems addObject:string];

            //I HAVE TO ADD OBJECT TO displayPictures FROM profilePictures IN HERE.

        }

    }

}

[tableView reloadData];

} 
```

请给我一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:05:58.030

我已根据您的要求修改了您的代码...试试这个...

```
-(void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

    if (searchText.length == 0) {

        isSearchBarClicked = FALSE;

        [displayItems removeAllObjects];
        [displayItems addObjectsFromArray:userNames];

        [displayPictures removeAllObjects];
        [displayPictures addObjectsFromArray:profilePictures];

    } else {

        isSearchBarClicked = true;

        [displayItems removeAllObjects];
        [displayPictures removeAllObjects];
        for(int i = 0; i < [userNames count]; i++) {
            NSString *string = [userNames objectAtIndex:i];
            NSRange r = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];

            if (r.location != NSNotFound) {

                [displayItems addObject:string];

                //I HAVE TO ADD OBJECT TO displayPictures FROM profilePictures IN HERE.
                [displayPictures addObject:[profilePictures objectAtIndex:i]];
            }

        }

    }

    [tableView reloadData];

} 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:48:22.967

```
// Instead of Storing both the values (username and profilepictures) in two diffrent arrays, Store them into a single Dictionary as follow :

// Step 1:
// Create Mutable Array to store your dictionary object
NSMutableArray *arrUserRecord = [NSMutableArray arrayWithCapacity:0];

// Step 2:
// A Loop through your json Dictionary/Array to Fetch Username and ProfilePicture
for(NSDictionary *record in <YOUR JSON DATA>)
{
    // Store both in single Dictionary
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[record valueForKey:@"username"], @"keyUsername", [record valueForKey:@"picture"], @"keyPicture", nil];

    // Now add this Dictionary to a Mutable Array
    [arrUserRecord addObject:dict];
}

// **** To Display Data ****
// At the End you get an Array of Dictionary which contains username & profilePicture, Use it to display as follow.
NSDictionary *dictDisplay = [arrUserRecord objectAtIndex:indexPath.row];
[cell.textLabel setText:[dictDisplay valueForKey:@"username"]];

// **** To Search Data Use Following ****
if (searchText.length == 0)
{
    // Display all the records
}
else
{
    // Display Searched records
    NSArray *tempArray = arrUserRecord;
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"username CONTAINS[cd] %@",
                              searchText];

    // Store Search Result
    NSArray *resultArray = [[tempArray filteredArrayUsingPredicate:predicate] mutableCopy];
}

// Update your TableView using following
[tableView beginUpdates];
[tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationNone];
[tableView endUpdates];

// I hope this will help you. Thank you. 
```

# ios - 表行交换时删除

> ID：15494233
> 
> 赞同：1
> 
> 时间：2013-03-19T08:01:07.957
> 
> 标签：ios, uitableview

我有一张桌子。当我在表格单元格上水平滑动时，会出现一个按钮，询问我是否要删除该行。

我不想要那个功能。但是，我向上和向下查找代码，我从来没有看到这个功能是在哪里实现的。

其他表上的其他行的行为方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:05:08.253

我想你想做的是：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
} 
```

在您的表的 viewController 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:12:21.583

> 但是，我向上和向下查找代码，我从来没有看到这个功能是在哪里实现的。

它由表视图实现。您可以通过从表数据源的实现中返回 NO 来阻止单元格被编辑`-tableView:canEditRowAtIndexPath:`，并且您可以通过从 中返回适当的值来更改给定行可用的编辑选项`-tableView:editingStyleForRowAtIndexPath:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:11:45.343

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    // Detemine if it's in editing mode
    if (self.editing) {
        return UITableViewCellEditingStyleDelete;
    }
    return UITableViewCellEditingStyleNone;
} 
```

或者

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return NO;
} 
```

# php - ord() 函数在控制结构中的应用

> ID：15494236
> 
> 赞同：0
> 
> 时间：2013-03-19T08:01:21.800
> 
> 标签：php, syntax, ord

我有这段代码，其中有一个字符串可以同时包含字母字符或数字，我需要将它们区分开来。使用该功能不是逻辑`ord()`吗？当然会！

```
 $r_1 = $_POST["r1"];

    $reag_1 = explode (" ", $r_1);

    foreach ($reag_1 as $k => $v) {

      if ( ord($v) != (48 || 49 || 50 || 51 || 52 || 53 || 54 || 55 || 56 || 57)){

      // if its a digit then do some stuff

      } else {

      // then its something else and lets do some OTHER stuff

      }
    } 
```

现在有趣的是，我喂给 an 的任何东西`$reag_1`似乎都只会去`true`路径。我仔细检查并`var_dump()`追踪`$reag_1`了程序的去向。*该数组中有*字母字符。我的错误在哪里没有让算法以正确的方式运行？我有一种感觉，我一直在犯一个非常基本的语法错误。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:06:02.457

可能，这一行在 PHP 中在逻辑上是不正确的：

```
if ( ord($reag_1[$k]) != (48 || 49 || 50 || 51 || 52 || 53 || 54 || 55 || 56 || 57)) 
```

您必须使用：

```
if(ord($reag_1[$k]) != 48 || ord($reag_1[$k]) != 49 ...) 
```

或更好的使用方法：

```
$array = array(48, 49, 50, 51, 52, 53, 54, 55, 56, 57)
if(in_array(ord($reag_1[$k]), $array)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:06:09.510

使用`(ord($v)>=48) and (ord($v)<=57)`.

您甚至可以使用`>=Ord("0")`和`<=Ord("9")`。

甚至还有[`is_numeric`](http://php.net/manual/en/function.is-numeric.php)功能。

# html - Bootstrap如何使响应/折叠行？

> ID：15494238
> 
> 赞同：0
> 
> 时间：2013-03-19T08:01:26.670
> 
> 标签：html, twitter-bootstrap

我是 Twitter Bootstrap 的新手，无法弄清楚。我有以下代码。当我更改屏幕宽度（即移动宽度）时，我如何实际折叠行以使其落在彼此下方。目前，它只是将行挤压在一起，并且不会将行放在彼此下方。任何帮助的代码将不胜感激。

```
<!DOCTYPE html>
<html>
<head>
<title>Bootstrap test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">

</head>

<body>
<h1>Hello, world!</h1>

<script src="http://code.jquery.com/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>

    <div class="row-fluid">
        <div class="span4" style="overflow:auto">Column 1</div>
        <div class="span4">Column 2</div>
    <div class="span4">Column 3</div>
    </div>

<div class="row-fluid">
        <div class="span3">Column 1</div>
        <div class="span3">Column 2</div>
    <div class="span3">Column 3</div>
    <div class="span3">Column 4</div>
    </div>

<div class="row-fluid">
        <div class="span12">Column 1</div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:05:11.073

这是通过在 CSS 中设置[媒体查询](http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/)的样式来实现的。

```
@media only screen and (min-width: 768px) and (max-width: 959px) {}
@media only screen and (max-width: 767px) {}
@media only screen and (min-width: 480px) and (max-width: 767px) {} 
```

为这些 CSS 片段中的元素设置样式以获得所需的效果。

例如; 让我们说在彼此下方放置元素..移动视图：

```
@media only screen and (min-width: 480px) and (max-width: 767px) {
  #divid {
  width: 100%;
  min-height: 100px;
  float: left;
  position: relative; }
  background: black; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T09:02:54.563

检查样式表导入的顺序以及它们是否存在于文件夹中。响应式的应该在主文件之后导入

```
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

# python - 素数查找器

> ID：15494239
> 
> 赞同：2
> 
> 时间：2013-03-19T08:01:29.120
> 
> 标签：python, primes

所以我正在尝试制作一个素数查找器，为了节省计算时间，我希望它在找到一个不是 1 或数字本身的除数时中止 forloop。现在该函数可以工作了，但它完全忽略了我的 if 语句。我究竟做错了什么？

```
def prime(number):
    oldnum = number
    factor = 1
    while number > 1:
        factor += 1
        while number % factor == 0:
            if 1< factor < oldnum:
                return 0 # is not prime
                print("yay")
                break
            number //= factor
    return 1 #prime! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:12:42.453

只需使用[Erathostenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。这是一种古老且经过验证的寻找素数的方法:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:06:46.350

您的代码永远不会到达该行`return 1`（顺便说一句，应该是`return True`），因为

*   你的`break`陈述只会打破内`while`循环
*   从未达到过该`break`声明，因为您`return 0`在那之前。

无论如何，你的内部`while`循环应该是一个`if`（因为你实际上并没有做任何需要循环的事情）。

如果您更改它（并删除无法访问的代码），它会“工作”（除了 be 的错误结果），这`prime(1)`是`True`一种非常低效的查找素数的方法。

```
def prime(number):
    oldnum = number
    factor = 1
    while number > 1:
        factor += 1
        if number % factor == 0:
            if 1 < factor < oldnum:
                return False # is not prime
            number //= factor
    return True # is prime! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T08:12:12.163

只是稍微评论一下性能的提高，你只需要检查因素`from 2 to sqrt(num)`，而不是`2 to num`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:11:38.997

这个功能怎么样？

```
`import math

def prime(number):
  if number == 1:
    return 1
  for i in range(2, int(math.sqrt(number)) + 1):
    if number % i == 0:
      return 0
  return 1` 
```

* * *

 `## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T10:07:31.410

由于您的最终目标是有效地找到素数，并且其他人已经很好地回答了编码问题，因此我将比其他答案更详细地介绍如何更有效地完成它。

[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)是*寻找*高达 1000 万左右素数的最快方法。但是您似乎想确定某个给定的数字`n`是否是素数。

要检查一个数`n`是否为素数，您只需检查它是否可以被*小于或等于*的*素数*整除。因此，使用这种方法，如果您希望您的函数处理最多 1 亿个数字，您只需要准备一个包含最多 10000 个（1229 个素数）的所有素数的列表，这将花费可以忽略不计的时间。*`sqrt(n)`*

 *如果您有兴趣，我可以将我的筛子实现放在这里，但我猜您正在解决这个问题是为了您自己的娱乐，所以我将留给您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T08:13:56.900

正如蒂姆指出的那样，你需要内在的时间来成为一个如果。像这样的东西会起作用（但效率极低）

```
def prime(number):
    oldnum = sqrt(number)
    factor = 1
    while factor <= oldnum:
        factor += 1
        if number % factor == 0 :
            return 0 # is not prime
    return 1 #prime! 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T09:01:21.533

我同意上述答案。如果数字 x 只有因子 1 和自身，则称它为素数。理想的方法是检查是否存在从 2 到上限函数（sqrt(x)）的因子。 .. 其中上限函数 (n) 是指大于或等于 n 的最小整数。

C中的函数看起来像......

// 函数返回.. { -> -1 既不是素数也不是合数.. -> 0 是合数.. -> 1 是素数.. }

.....................................

```
 boolean isPrime(int n){

     if(n<=1){
       return -1;
     }else{
      for(int i=2;i<Math.sqrt(n);i++){
        if(n%i==0)
         return 1;
      }
      return 0;
     }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-19T09:32:08.867

试试这个（[埃拉托色尼筛法的](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)实施）。

```
def squares_till(n):
    def square_add(i,n):
        j = i**2
        while j < n:
            yield j
            j = j + i
    A = [True]*n
    A[0] = A[1] = False
    for i in range(2,int(n**0.5)):
        if A[i]:
            for j in square_add(i,n):
                A[j] = False
    return [num for num in range(n) if A[num]] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-12T12:46:11.157

我相信，这是非常有效的实施。通过合并 Primality 测试（O(1) 实现）可以进一步改进它。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>
#include <string>

using namespace std;

void printN(const vector<int> container, int count, ostream& out=cout, const string& delim=", ") {
    for(int i=0; i<count; ++i)
        out << container[i] << delim;
    out << endl;
}

void printNPrimes(int count) {
    static const int FIRST_PRIME = 2;
    static vector<int> primes(1, FIRST_PRIME);
    static int rangeEnd = 3;

    if(primes.size() >= count) {
        printN(primes, count);
        return;
    }

    int remainingPrimeNumbers = count - primes.size();

    while(remainingPrimeNumbers) {
        bool is_prime = true;
        for(int prime : primes) {
            if(rangeEnd % prime == 0) {
                is_prime = false;
                break;
            }
        }

        if(is_prime) {
            primes.push_back(rangeEnd);
            --remainingPrimeNumbers;
        }

        ++rangeEnd;
    }

    printN(primes, count);
}

int main(int argc, const char *argv[])
{
    if(argc < 2) {
        cout << "usage: rund <count>";
        return -1;
    }

    int count = atoi(argv[1]);
    printNPrimes(count);
    return 0;
} 
```*`

# .net - 如何连接到 2 个不同的 sql 服务器 VB.NET

> ID：15494241
> 
> 赞同：2
> 
> 时间：2013-03-19T08:01:41.853
> 
> 标签：.net, vb.net, sql-server-2008

我正在处理我的小项目，此时我停止了我有 2 台 sql 服务器，一台是部门 sql 服务器（只读）和我的本地服务器用于复制。在 VB.net 我打开与 adodb lib 的连接

```
 connectionString = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security   Info=False;Initial Catalog=Work;Data Source=server1\SQLEXPRESS"
        ginfo = "Select * From base1.dbo.table1 "
        cn = New ADODB.Connection
        rs = New ADODB.Recordset
        cn.Open(connectionString)
        rs.Open(ginfo, cn, ADODB.CursorTypeEnum.adOpenStatic)
        i = 0
        With rs
            If rs.BOF = False Then
                Do While Not .EOF
                    ReDim Preserve users(i)
                    users(i).name = rs.Fields(2).Value
                    lb_sfio.Items.Add(users(i).name)
                    i = i + 1
                    .MoveNext()
                Loop
            End If
        End With 
```

所以下一阶段是连接到第二个服务器并从另一个服务器文本中获取信息是类似的。但是，我很感兴趣如何使用 2 个使用 SQL 脚本语言的服务器工作

```
ginfo = "SELECT * FROM srv1.bs1.dbo.tbl1 EXCEPT SELECT * FROM srv2.bs1.dbo.tbl1" 
```

因为在我的变体中是两个慢。也许第二个问题是如何在没有完全比较的情况下在 DB 中找到更新（db 有 4k 个字符串，这很无聊）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:14:52.347

您可以将`Server2`链接[服务器](http://msdn.microsoft.com/en-us/library/ms188279.aspx)添加到`Server1`.

然后，您的查询`Server1`将如下所示：

```
use base1
SELECT field1 FROM table1 EXCEPT SELECT field1 FROM server2.base1.dbo.table1 
```

但是您应该注意对链接服务器的查询对[性能的影响。](https://stackoverflow.com/a/4091984/55209)

链接过程`ALTER ANY LINKED SERVER`需要`Server1`. 您不必在每次查询前都重复此操作，链接服务器将保持不变，直到被删除。

# c# - excel中当前功能区的对象引用

> ID：15494248
> 
> 赞同：0
> 
> 时间：2013-03-19T08:02:15.310
> 
> 标签：c#, office-interop, excel-interop

我的 excel 功能区中有 4 个按钮。单击第 4 个按钮后，我想隐藏其他 3 个按钮的可见性。我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:13:18.273

答案很简单。它在树节点结构中。了解如何做到这一点。

# android - 谷歌地图android标记总是指向同一个位置？

> ID：15494249
> 
> 赞同：1
> 
> 时间：2013-03-19T08:02:15.763
> 
> 标签：android, google-maps, google-maps-markers

我想在地图上显示我的位置和目的地位置。问题是目标位置总是指向同一个位置，即使我改变另一个目的地很长很长......

这是代码

```
protected void tampilkanPosisikeMap(Location newLocation) {
    List<Overlay> overlays = mapView.getOverlays();

    if (overlays.size() > 0) {
        for (Iterator iterator = overlays.iterator(); iterator.hasNext();) {
            iterator.next();
            iterator.remove();
        }
    }

    GeoPoint geopoint = new GeoPoint(
            (int) (newLocation.getLatitude() * 1E6), (int) (newLocation
                    .getLongitude() * 1E6));
    GeoPoint myposition = geopoint;
    Location locationA = new Location("point A");
    Location locationB = new Location("point B");
    locationA.setLatitude(geopoint.getLatitudeE6() / 1E6);
    locationA.setLongitude(geopoint.getLongitudeE6() / 1E6);

    Drawable icon1 = getResources().getDrawable(R.drawable.user);
    icon1.setBounds(0, 0, icon1.getIntrinsicWidth(), icon1
            .getIntrinsicHeight());

    MyItemizedOverlay overlay1 = new MyItemizedOverlay(icon1, this);
    OverlayItem item1 = new OverlayItem(geopoint, "Posisi Anda", "Lat:"
            + locationA.getLatitude() + "\nLng:" + locationA.getLongitude());
    overlay1.addItem(item1);
    mapView.getOverlays().add(overlay1); 

    String lat2,longi2;
    String nama_rs;String alamat_rs;
    nama_rs = getIntent().getExtras().getString("namarsakit");
    alamat_rs = getIntent().getExtras().getString("alamatrsakit");
    lat2 = getIntent().getExtras().getString("lat");
    longi2 = getIntent().getExtras().getString("longi");
    Double lintang_rs = Double.parseDouble(lat2);
    Double bujur_rs = Double.parseDouble(longi2);

        GeoPoint geopoint1 = new GeoPoint(
                (int) (lintang_rs * 1E6),
                (int) (bujur_rs * 1E6));
        locationB.setLatitude(geopoint1.getLatitudeE6() / 1E6);
        locationB.setLongitude(geopoint1.getLongitudeE6() / 1E6);

        DecimalFormat formatData = new DecimalFormat("#.#");
        float distance = (float) locationA.distanceTo(locationB) / 1000;
        String jarak;
        jarak = String.valueOf(formatData.format(distance));

        Drawable icon = getResources().getDrawable(R.drawable.marker); //
        icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon
                .getIntrinsicHeight());
        MyItemizedOverlay overlay = new MyItemizedOverlay(icon, this); //
        OverlayItem item = new OverlayItem(geopoint1, nama_rs,          //
                alamat_rs
                        + "\n\nJarak dari Posisi Anda : " + jarak + " km");
        overlay.addItem(item);
        mapView.getOverlays().add(overlay);
        Toast.makeText(MapDetailActivity.this,"nama = "+nama_rs+"lat tujuan= "+lintang_rs+"long tujuan = "+bujur_rs, Toast.LENGTH_SHORT).show();

    mapView.getController().animateTo(geopoint1);

} 
```

这是上面的目标代码：

```
String lat2,longi2;
    String nama_rs;String alamat_rs;
    nama_rs = getIntent().getExtras().getString("namarsakit");
    alamat_rs = getIntent().getExtras().getString("alamatrsakit");
    lat2 = getIntent().getExtras().getString("lat");
    longi2 = getIntent().getExtras().getString("longi");
    Double lintang_rs = Double.parseDouble(lat2);
    Double bujur_rs = Double.parseDouble(longi2);

        GeoPoint geopoint1 = new GeoPoint(
                (int) (lintang_rs * 1E6),
                (int) (bujur_rs * 1E6));
        locationB.setLatitude(geopoint1.getLatitudeE6() / 1E6);
        locationB.setLongitude(geopoint1.getLongitudeE6() / 1E6);

        DecimalFormat formatData = new DecimalFormat("#.#");
        float distance = (float) locationA.distanceTo(locationB) / 1000;
        String jarak;
        jarak = String.valueOf(formatData.format(distance));

        Drawable icon = getResources().getDrawable(R.drawable.marker); //
        icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon
                .getIntrinsicHeight());
        MyItemizedOverlay overlay = new MyItemizedOverlay(icon, this); //
        OverlayItem item = new OverlayItem(geopoint1, nama_rs,          //
                alamat_rs
                        + "\n\nJarak dari Posisi Anda : " + jarak + " km");
        overlay.addItem(item);
        mapView.getOverlays().add(overlay);
        Toast.makeText(MapDetailActivity.this,"nama = "+nama_rs+"lat tujuan= "+lintang_rs+"long tujuan = "+bujur_rs, Toast.LENGTH_SHORT).show();

    mapView.getController().animateTo(geopoint1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:08:39.983

为了能够显示您的当前位置，您必须点击 GPS 位置提供商或网络位置提供商。查看您的代码，我看不到任何内容。请注意，模拟器上的 DDMS 将默认为特定位置。除非你自己提供

# grails - Grails 创建多值映射

> ID：15494250
> 
> 赞同：0
> 
> 时间：2013-03-19T08:02:17.390
> 
> 标签：grails, groovy, grails-2.0

我有一份客户列表，每个客户都有一个或多个场地。

这是两个单独的域类，其中 Venue 具有客户端 ID

我想创建一个多值 MAP，它将客户端名称作为键，场地名称作为值

例子 ：

```
def dataMap=["Client1":["Venue1","Venue2","Venue3"],"Client2":["Venue1","Venue2"]] 
```

域类：**客户端**

```
 class Client {
    String name;
    static hasMany = [venues: Venue];
} 
```

领域类：**场地**

```
class Venue {
    String name;
    String addressLine1;
    String addressLine2;
    String City

    static belongsTo = [client: Client];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:21:08.760

与 aiolos 写的一样，使用标准的 Groovy 方法`collectEntries()`：

```
def dataMap = Client.findAllWhere(/*yourCondition*/).collectEntries { client ->
    [(client.name): client.venues.name]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:21:38.237

你以前尝试过什么，你在哪里卡住了？

这是一种简单的方法：

```
def dataMap = [:]
Client.findAllWhere(/*yourCondition*/).each { client ->
    dataMap[client.name] = client.venues.name
} 
```

# java - 为什么它说我的 If 语句无法访问？

> ID：15494251
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:02:31.337
> 
> 标签：java

编译器说该语句在该语句所在的行上是不可访问的`if`。我对Java不太熟悉。

```
public double calculate()
{
  total_usage_charge = getUsageCharge();
  total_charge = rate + total_usage_charge;

  return total_charge;

  if("A".equals(package_plan.toUpperCase()) && getUsageCharge() > 14.95)
  {
    sB = getUsageCharge() - 14.95;
    System.out.println("You're spending more money than you should. If you switched to Plan B you would save:$" + sB);
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:04:29.303

因为你通过执行这个从方法返回：

```
return total_charge; 
```

所以下一条语句永远不会被执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:04:13.830

您在语句`return total_charge;`之前从您的方法返回 ( )。`if`a 之后的任何代码`return`都无法执行（`finally`如果您的 return 语句位于 a 中，则相关块除外`try...catch...finally`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:04:47.923

您在调用 if 语句之前返回，因此它无法访问。

*方法在到达 return 语句时返回到调用它的代码。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:05:06.460

```
return total_charge; 
```

您的方法此时返回，发布任何代码都无法访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T08:08:12.430

您已将 return 语句置于 IF 之上。因此，当编译器每次从那里返回时都会出现此语句并且如果无法随时执行，请删除返回语句或将其放在 if 条件下方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T08:09:25.547

返回语句后代码将不会执行。以下代码块导致问题，即

```
return total_charge; 
```

所以你必须删除这条线或把它放在最后。！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T08:08:42.660

```
public double calculate()
{
  total_usage_charge = getUsageCharge();
  total_charge = rate + total_usage_charge;

  if("A".equals(package_plan.toUpperCase()) && getUsageCharge() > 14.95)
  {
    sB = getUsageCharge() - 14.95;
    System.out.println("You're spending more money than you should. If you switched to Plan B you  would save:$" + sB);
  }

  return total_charge;
} 
```

就这样;)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-19T08:07:31.953

```
**if("A".equals(package_plan.toUpperCase()) && getUsageCharge() > 14.95)
        {
            sB = getUsageCharge() - 14.95;
            System.out.println("You're spending more money than you should. If you switched to Plan B you would save:$" + sB);
        }
        else if("A".equals(package_plan.toUpperCase()) && getUsageCharge() > 19.95)
        {
            sC = getUsageCharge() - 19.95;
            System.out.println("You're spending more money than you should. If you switched to Plan C you would save:$" + sC);
        }
        else if("B".equals(package_plan.toUpperCase()) && hours < 10)
        {
            sA = getUsageCharge() - 9.95;
            System.out.println("You're spending more money than you should. If you switched to Plan A you would save:$" + sA);
        }
        else if("B".equals(package_plan.toUpperCase()) && getUsageCharge() > 19.95)
        {
            sC = getUsageCharge() - 19.95;
            System.out.println("You're spending more money than you should. If you switched to Plan C you would save:$" + sC);**
        }** 
```

你是不是想评论它，如果是的话，做对了。或者根据提供的代码，这是错误和无法访问的语句。

评论它`/* your code to comment */`

# php - 新手尝试解决 MySQL 查询逻辑问题

> ID：15494252
> 
> 赞同：3
> 
> 时间：2013-03-19T08:02:36.283
> 
> 标签：php, mysql, sql, join

我将尝试尽可能简单地解释这一点。任何帮助将不胜感激，因为我不太擅长设计查询。

我有 3 个表：（我已经为这个问题减少了 users 表中不必要的列）

```
USERS:
id,    username,    password

PENDINGREVIEW:
id,    articleid,    requestid,    content,    writerid,    datewritten

ARTICLES:
id,    title,    length,    requestedby,    content,    writtenby,    daterequested,    datecompleted 
```

所以说我有`review.php`。我希望它显示特定用户表中的`review.php`所有文章。`pendingreview`所以是这样的：

```
SELECT * FROM pendingreview WHERE requestid = $userid (where $userid = the id of the user) 
```

我实际上想要显示的`review.php`是表格中的文章列表以及`articles`表格中有多少文章`pendingreview`对应于这些文章中的每一篇。该列表只能由用户请求的文章组成。

所以我想`review.php`看起来像这样：

*   `Your "How to build a bike" article request has 3 articles pending review.`
*   `Your "How to mow the lawn" article request has 12 articles pending review.`

任何有关我将如何做到这一点的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:10:39.543

```
SELECT  a.title, COUNT(*) TotalPending
FROM    Articles a
        INNER JOIN PendingReview b  
            ON a.ID = b.articleID
WHERE   b.RequestID = 'ID HERE'
GROUP   BY a.title 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:13:58.663

这可以帮助您构建您的请求：

[MySql 连接三个表](https://stackoverflow.com/questions/3709560/mysql-join-three-tables)

[http://www.techotopia.com/index.php/Joining_Tables_in_MySQL](http://www.techotopia.com/index.php/Joining_Tables_in_MySQL)

# jsf-2 - Primefaces Calender 组件在表单内不起作用

> ID：15494258
> 
> 赞同：2
> 
> 时间：2013-03-19T08:02:56.720
> 
> 标签：jsf-2, primefaces, calendar

我使用了 Primefaces 日历组件，它在表单中不起作用。当我单击文本字段时，弹出窗口一显示就迅速消失。外部`h:form`弹出窗口正在显示，但整体组件仍然无法像月/年那样工作，不能选择。不建议为什么？

以下是我的`advSearch.xhtml`小脸，其模板是`Master.xhtml`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
template="/MasterPage/Master.xhtml">

<ui:define name="Search">

    <h:form id="advSearch" onmousemove="removeExtra()">

            <p:layout style="width:1218px;height:558px;" id="layout">

                <p:layoutUnit position="center" styleClass="resultDiv">

                    <div class="advDiv">

                        <div class="advHeader">Find documents That Have...</div>
                        <div class="advBody">

                            <table>
                                <tr>
                                    <td><h:outputText styleClass="advLabel" value="Subject"></h:outputText></td>
                                    <td><h:inputText
                                            value="#{advanceSearchController.subject}"
                                            styleClass="txtfield"
                                            onkeypress="if (event.keyCode == 13) { document.getElementById('advSearch:advButton').click(); return false; }"></h:inputText>
                                    </td>
                                </tr>

                                <tr>
                                    <td><h:outputText styleClass="advLabel" value="Signed By"></h:outputText></td>
                                    <td><h:inputText
                                            value="#{advanceSearchController.signBy}"
                                            styleClass="txtfield"
                                            onkeypress="if (event.keyCode == 13) { document.getElementById('advSearch:advButton').click(); return false; }"></h:inputText></td>
                                </tr>
                                <tr>
                                    <td><h:outputText styleClass="advLabel"
                                            value="Archived From"></h:outputText></td>
                                    <td><p:calendar styleClass="txtfield" mode="popup"
                                            navigator="true" yearRange="1900:2015" pattern="MM/dd/yyyy"
                                            converter="CalendarDateStringConverter"
                                            value="#{advanceSearchController.fromdate}" /></td>
                                </tr>
                                <tr>
                                    <td><h:outputText styleClass="advLabel" value="To"></h:outputText></td>
                                    <td><p:calendar styleClass="txtfield" mode="popup"
                                            navigator="true" yearRange="1900:2015" pattern="MM/dd/yyyy"
                                            converter="CalendarDateStringConverter"
                                            value="#{advanceSearchController.todate}" /></td>
                                </tr>
                            </table>
                            <h:commandButton id="advButton" styleClass="btn"
                                value="Advanced Search"
                                action="#{advanceSearchController.advanceSearch}"
                                style="background-color:#FEAA41;background-image:none;color:white;font-weight:bold;"></h:commandButton>
                        </div>
                    </div>

                </p:layoutUnit>
            </p:layout>
        </div>

    </h:form>

</ui:define> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:01:29.867

代码看起来不错，但有一件事，我只看到您`onmousemove="removeExtra()"`在表单上调用的 JS 函数。
正如您所说，弹出窗口很快消失意味着它来了然后又消失了。这表明日历工作正常，但其他地方有问题。
请检查两件事
**（1）**当您在日历字段中单击后移动光标时字段是否消失（意味着只需单击并查看它是否消失，如果没有则移动光标然后检查因为您调用了您的 JS 函数 onmouseover 事件所以它可能是鼠标移动问题）
**（2）**删除这个removeExtra（）函数，然后检查

# java - 通过 JSNI 将值从 GWT 传递到 Javascript

> ID：15494262
> 
> 赞同：0
> 
> 时间：2013-03-19T08:03:05.937
> 
> 标签：java, gwt, jsni

我一直在尝试通过 JSNI 将值传递给 Javascript 方法，但它一直失败。

这种方法是否有效：

```
public static native JavaScriptObject getProductById(long pid) /*-{
    var productId = pid;
    var product = $wnd.products({id:productId}).first();    
    return product;
}-*/; 
```

我可以说 JS 方法是正确的，因为如果我用一个常数值代替`productId`，我会得到正确的输出。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:21:11.570

JSNI 不允许`long`用作输入变量，请参阅[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#important)的说明。

您可以尝试改用 double（甚至 int），但请确保您的 Javascript 代码支持它。

```
public static native JavaScriptObject getProductById(double pid) /*-{
    var productId = pid;
    var product = $wnd.products({id:productId}).first();    
    return product;
}-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:28:58.960

如果您确实需要将其作为 long 传递，则可以将其作为字符串传递，然后使用 parseFloat 进行转换。在这篇文章中有解释。

[如何在 JavaScript 中将字符串转换为长字符串](https://stackoverflow.com/questions/5450012/how-to-convert-a-string-to-long-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:03:12.693

如果您使用 gwtquery，您将拥有很好的实用方法，以避免在调用 js 函数或构建或读取 js 属性等大多数琐碎的事情上处理 JSNI。

```
 import static com.google.gwt.query.client.GQuery.*;
 ...

 Properties prd = JsUtils.runJavascriptFunction(window, "products", $$("id: 12345"));
 Properties ret = JsUtils.runJavascriptFunction(prd, "first");

 System.out.println(ret.toJsonString()); 
```

# android - 地图未在 Map api v2 中加载

> ID：15494264
> 
> 赞同：3
> 
> 时间：2013-03-19T08:03:15.737
> 
> 标签：android, api, map

我正在尝试从 android-sdk/extras/google-play-services/maps 运行示例地图我已经完成了所有正确的操作，但没有让事情正常工作。当我运行地图应用程序时，地图没有加载，其余的工作正常，即使我点击地图，它也给了我经度和纬度，但没有显示地图。我在 manifest.mxl 文件中提供了我自己的 api 密钥。

任何提示......请......帮助！

清单.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<!-- Copied from Google Maps Library/AndroidManifest.xml. -->
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<!-- External storage for caching. -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<!-- My Location -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<!-- Maps API needs OpenGL ES 2.0\. -->
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />
<!-- End of copy. -->
<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/demo_title" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyDEqBupCeXXXXXXXXXXXXXXXXXXXXXXXXXX" />

    <activity android:name=".MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".BasicMapActivity"
        android:label="@string/basic_map" />
    <activity
        android:name=".CameraDemoActivity"
        android:label="@string/camera_demo" />
    <activity
        android:name=".CircleDemoActivity"
        android:label="@string/circle_demo" />
    <activity
        android:name=".EventsDemoActivity"
        android:label="@string/events_demo" />
    <activity
        android:name=".GroundOverlayDemoActivity"
        android:label="@string/groundoverlay_demo" />
    <activity
        android:name=".LayersDemoActivity"
        android:label="@string/layers_demo" />
    <activity
        android:name=".LocationSourceDemoActivity"
        android:label="@string/locationsource_demo" />
    <activity
        android:name=".MarkerDemoActivity"
        android:label="@string/marker_demo" />
    <activity
        android:name=".OptionsDemoActivity"
        android:label="@string/options_demo" />
    <activity
        android:name=".PolygonDemoActivity"
        android:label="@string/polygon_demo" />
    <activity
        android:name=".PolylineDemoActivity"
        android:label="@string/polyline_demo" />
    <activity
        android:name=".ProgrammaticDemoActivity"
        android:label="@string/programmatic_demo" />
    <activity
        android:name=".TileOverlayDemoActivity"
        android:label="@string/tile_overlay_demo" />
    <activity
        android:name=".UiSettingsDemoActivity"
        android:label="@string/uisettings_demo" />
    <activity
        android:name=".RawMapViewDemoActivity"
        android:label="@string/raw_mapview_demo" />
    <activity
        android:name=".RetainMapActivity"
        android:label="@string/retain_map" />
    <activity
        android:name=".MultiMapDemoActivity"
        android:label="@string/multi_map_demo" />
</application> 
```

其余内容与谷歌提供的示例相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:13:30.220

似乎 API 密钥没有很好地注册。

笔记 ：

*   **新版地图api只会在真机上显示，模拟器上不显示**
*   **谷歌地图应用程序必须在真实设备中更新。**

请按照以下步骤操作：

1.manifest 声明按照 Google MAPS API v2 给出。

```
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="your api key" /> 
```

2.地图 api 密钥是使用 google api 控制台[https://code.google.com/apis/console上的说明创建的](https://code.google.com/apis/console)

3.[按照建议启用地图 v2](http://i.stack.imgur.com/UjFYx.png)

4.如果问题仍然存在，即使上面的复选标记也可以。我会使用 api 密钥 .. 也可以尝试使用我自己的 api 密钥作为 `AIzaSyBzKvzJjmXJ-XXXXX-XXXX`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T13:17:11.927

[在http://www.codeproject.com/Articles/614946/Android-google-map-api-v2-setup](http://www.codeproject.com/Articles/614946/Android-google-map-api-v2-setup)尝试这个过程 似乎对我来说很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:12:50.257

您必须导出已签名的应用程序。该地图仅在签署 apk 时显示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T14:39:02.053

我刚刚遇到了同样的问题，对我来说，Maps Api 在第一次请求之后需要大约 5-10 分钟的稳定时间。在此之后，地图继续正常加载。

# jquery - jQuery 库 1.4.4 不允许文本框中的空格

> ID：15494265
> 
> 赞同：0
> 
> 时间：2013-03-19T08:03:18.160
> 
> 标签：jquery, asp.net

我在我的项目中使用 asp 文本框和一些 javascript 代码。

在看到我的文本框中的空格被禁用后，我遇到了其他人遇到的类似问题，并且发现大多数 javascript 都会导致此类问题。所以在尝试之后我得到了 jQuery 库 1.4.4 是原因。但是通过删除它，我的幻灯片将被禁用。

知道什么是更好或合适的解决方案吗？

[这](http://bijanarts.somee.com/)是示例。

我尝试过的结果表明，文件“ jq1.js ”中的以下脚本导致了问题。

```
$(function () {
  $('#MainGalleryData .test').lightBox();
  $('#MainGalleryData2 .test').lightBox();
  $('#MainGalleryData3 .test').lightBox();
  $('#MainGalleryData4 .test').lightBox();
  $('#MainGalleryData5 .test').lightBox();
  $('#MainGalleryData6 .test').lightBox();
  $('#MainGalleryData7 .test').lightBox();
  $('#MainGalleryData8 .test').lightBox();
  $('#MainGalleryData9 .test').lightBox();
  $('#MainGalleryData10 .test').lightBox();
  $('#MainGalleryData11 .test').lightBox();
  $('#MainGalleryData12 .test').lightBox(); 
```

});

```
jQuery(document).ready(function () {
  jQuery('#MainSlidesUl').fadeSlideShow();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:59:02.793

看看`<script src="js/jq1.js" type="text/javascript"></script>` Search for `32`，这是 keycode for `space`。您将找到以下代码：

```
 if (settings.allowKeyboardCtrl) {
        jQuery(document).bind('keydown', function (e) {
            if (e.which == 39) {
                var nextSlide = ActSlide - 1;
                stopAutoplay();
                jumpTo(nextSlide);
            } else if (e.which == 37) {
                var prevSlide = ActSlide + 1;
                stopAutoplay();
                jumpTo(prevSlide);
            } else if (e.which == 32) {
                if (intval) { stopAutoplay(); }
                else { autoplay(); }
                return false;
            }
        });
    } 
```

因此，当按下空格时，它将返回 false，这就是您的“错误”的原因。如果它是输入，您应该禁用它或检查事件，例如：

```
jQuery(document).bind('keydown', function (e) {
    if ($(event.target).is('input') == false) {
        ...
    }
}); 
```

# ruby - “rvm docs generate”被杀死

> ID：15494270
> 
> 赞同：3
> 
> 时间：2013-03-19T08:03:53.783
> 
> 标签：ruby, rvm, rdoc

知道为什么 rvm(1.18.15) 无法为 ruby​​2.0 生成文档吗？

`$ rvm docs generate`

> > ri 文档，请注意这可能需要*很长时间*，并且在很大程度上取决于您的系统资源...
> > （错误将记录到 /home/user/.rvm/log/ruby-2.0.0-p0/docs.log )
> > 生成 rdoc 文档，请注意这可能需要*很长时间*，并且在很大程度上取决于您的系统资源...
> > （错误将记录到 /home/user/.rvm/log/ruby-2.0.0-p0/docs .log )
> > /home/user/.rvm/scripts/docs: 第 81 行: 6696 杀死 rdoc -a -o "${rvm_docs_path:-"$rvm_path/docs"}/$rvm_docs_ruby_string/$rvm_docs_type" > /dev/null 2>>“${rvm_log_path}/$rvm_docs_ruby_string/docs.log”

以下是 docs.log 的内容。

> > 哦哦！RDoc 有问题：
> > 未初始化的常量 RDoc::RI::Paths::SITEDIR
> > 
> > 使用 --debug 运行以获得完整的回溯
> > 
> > 将 Darkfish 格式生成到 /home/user/.rvm/docs/ruby-2.0.0-p0/rdoc...
> > 呃-哦！RDoc 有问题：
> > 未初始化的常量 RDoc::RI::Paths::SITEDIR
> > 
> > 使用 --debug 运行以获得完整的回溯
> > 
> > 将 Darkfish 格式生成到 /home/user/.rvm/docs/ruby-2.0.0-p0/rdoc...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:22:44.413

这是`rdoc`/`ruby`问题：

*   [https://bugs.ruby-lang.org/issues/8037](https://bugs.ruby-lang.org/issues/8037)
*   [https://github.com/rdoc/rdoc/issues/193](https://github.com/rdoc/rdoc/issues/193)
*   [https://github.com/rdoc/rdoc/issues/194](https://github.com/rdoc/rdoc/issues/194)

`--docs`您可以通过使用标志重新安装 ruby​​ 来解决此问题：

```
rvm get head
rvm reinstall 2.0.0 --docs 
```

# c# - c# 从另一个控件触发/调用事件

> ID：15494273
> 
> 赞同：0
> 
> 时间：2013-03-19T08:04:09.110
> 
> 标签：c#, events

在 VFP9 中，如果我有两个按钮（butt1 和 butt2） 如果我想从 butt1 触发 butt2 单击事件，我只需从 butt1`click`事件执行此操作`butt2.click()`，它将调用我在 butt2 中的过程/事件中的任何代码。我如何在 C# 中做到这一点？

> 如何从另一个控件调用某个控件的事件，如下所示

.

```
private void button2_Click(object sender, EventArgs e)
        {
            button1.click()
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:06:13.767

您可以像这样直接调用处理程序`button1_Click(button1, null);`

**示例用法：**

```
Button button1;
Button button2;

public Form1()
{
    button1.Click += new EventHandler(button1_Click);
    button2.Click += new EventHandler(button2_Click);

}

void button2_Click(object sender, EventArgs e)
{
    button1_Click(button1, null);
}
public void button1_Click(object sender, EventArgs e)
{
    //Action when click occurs
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:08:07.503

如果您只想执行一些逻辑，为什么要尝试模拟按钮单击？将此逻辑包装到单独的方法中，从您选择的点击处理程序中调用它：

```
private Foo1() {}

private Foo2() {}

private button1_Click(object sender, EventArgs e)
{
  Foo1();
  Foo2();
}

private button2_Click(object sender, EventArgs e)
{
  Foo2();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:20:04.277

只需将button1点击事件绑定到button2点击事件`form_load`或`designer.cs`
`button2.Click+=new EventHandler(button1_Click);`

# security - Grails SpringSecurity：浏览器不提供保存页面的登录名/密码

> ID：15494281
> 
> 赞同：2
> 
> 时间：2013-03-19T08:04:39.420
> 
> 标签：security, authentication, grails, autocomplete

有一个具有默认`grails.plugins.springsecurity`身份验证的应用程序。当我在 Opera [12.14] 中输入登录名/密码时，它允许我存储页面的登录名/密码，而 Chrome、FF 和 IE 则没有。

这是否必须以某种方式在页面上进行配置，还是特定于浏览器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:19:32.607

这是故意的，作为安全预防措施 - 这是由于标签`autocomplete='off'`中的非标准属性。`form`显然 Opera 忽略了它，而其他浏览器做正确的事情。如果您想允许这样做，请从您的`auth.gsp`文件中删除该属性。

# java - 如何使用 svnkit 恢复以前的版本

> ID：15494293
> 
> 赞同：1
> 
> 时间：2013-03-19T08:05:52.913
> 
> 标签：java, svn

我正在尝试在 java 中创建一个方法，它将把以前的修订版放回我的存储库中。我尝试了几种选择，但直到现在都没有成功。我认为我尝试过的最佳选择是在以下测试类中：

```
package svntest;

import org.tmatesoft.svn.core.SVNDepth;
import org.tmatesoft.svn.core.SVNException;
import org.tmatesoft.svn.core.SVNURL;
import org.tmatesoft.svn.core.auth.ISVNAuthenticationManager;
import org.tmatesoft.svn.core.internal.io.dav.DAVRepositoryFactory;
import org.tmatesoft.svn.core.internal.io.fs.FSRepositoryFactory;
import org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryFactoryImpl;
import org.tmatesoft.svn.core.internal.wc.SVNSynchronizeEditor;
import org.tmatesoft.svn.core.io.ISVNReporter;
import org.tmatesoft.svn.core.io.ISVNReporterBaton;
import org.tmatesoft.svn.core.io.SVNRepository;
import org.tmatesoft.svn.core.io.SVNRepositoryFactory;
import org.tmatesoft.svn.core.wc.SVNRevision;
import org.tmatesoft.svn.core.wc.SVNWCUtil;

public class Test {

    static String url = "myhost:8080/svn/sonic76/branches/TEST/myproject";

    public static void main(String[] args) {
        try {
            DAVRepositoryFactory.setup();
            SVNRepositoryFactoryImpl.setup();
            FSRepositoryFactory.setup();
            ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager(user, password);           
            SVNRepository srcRepos = SVNRepositoryFactory.create(SVNURL.parseURIEncoded(url));
            srcRepos.setAuthenticationManager(authManager);
            SVNRepository destRepos = SVNRepositoryFactory.create(SVNURL.parseURIEncoded(url));
            destRepos.setAuthenticationManager(authManager);
            SVNSynchronizeEditor syncher = new SVNSynchronizeEditor(destRepos, null, SVNRevision.BASE.getNumber(), null);
            srcRepos.update(SVNURL.parseURIEncoded(url), SVNRevision.BASE.getNumber()-1, null, SVNDepth.INFINITY, new MyReporterBaton(), syncher);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static class MyReporterBaton implements ISVNReporterBaton {
        @Override
        public void report(ISVNReporter reporter) throws SVNException {
            reporter.setPath("", null, 32981, false);
            reporter.finishReport();
        }
    }
} 
```

我得到的错误是：

```
org.tmatesoft.svn.core.SVNException: svn: E160024: File or directory 'xml/myfile.xml' is out of date; try updating
svn: E160024: resource out of date; try updating 
```

文件夹 xml 中的文件 myfile.xml 正是在当前版本和上一个版本之间发生更改的文件，我想放回以前的版本。有任何想法吗？

如您所见，我使用的是 svnkit，但任何其他 API 也可以。

# asp.net - Databinder.Eval 双引号

> ID：15494294
> 
> 赞同：2
> 
> 时间：2013-03-19T08:05:53.430
> 
> 标签：asp.net, quotes, databinder

我有一个问题，我不知道如何解决它。我寻找解决方案，但没有奏效。所以，我有一个带有 ItemTemplate 的数据列表。我需要将 onclick 事件上的谷歌分析添加到 <a> 标签。我试图添加 onclick 事件，如

```
 onclick="_gaq.push(['_trackEvent', 'Homepage', 'Click on',<%#DataBinder.Eval(Container.DataItem,"URL")%>']);" <br /> 
```

但我收到一个黄色错误屏幕，显示消息“..tag 格式不正确”。`&qout;`我也尝试用但没有成功替换双 qoutes 。我也试过

```
onclick='<%# string.Format("_gaq.push(['_trackEvent','Homepage','Click on last awarded company','{0}']);", DataBinder.Eval(Container.DataItem, "URL") %>' <br /> 
```

但这也行不通。
你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:21:23.397

你真的应该在后面代码的“OnItemDataBound”事件中做这种复杂的数据绑定。查看[相关的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)。

```
<asp:DataList id="ItemsList" OnItemDataBound="Item_Bound" runat="server"> 
```

代码背后：

```
public void Item_Bound(object sender, DataListItemEventArgs e)
{
 if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
 {
  // find your link
  HyperLink link = (HyperLink)e.Item.FindControl("MyFirstHyperLink");

  // so something nice with your link here, for example add attributes.
  string a = DataBinder.Eval(e.Item, "URL", "_gaq.push(['_trackEvent','Homepage','Click on last awarded company','{0}']);");
  link.Attributes.Add("onclick", a);
 }
} 
```

*免责声明：我还没有实际测试过这段代码，所以你可能需要在这里和那里进行调整。它只是让您了解前进的方向。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:14:25.327

你可以试试下面吗？

```
<a  href="#" onclick="_gaq.push(['_trackEvent', 'Homepage', 'Click on','<%#DataBinder.Eval(Container.DataItem,\"URL\")%>']);">Test</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-16T05:38:59.600

我遇到了以下情况：我不得不重用一些从其他程序集中返回动态对象集合的函数。通常，可以使用 [assembly: InternalsVisibleTo("Some.Assembly")] 将动态对象发布到其他程序集，因为动态对象在其程序集内部。没有选择，我尝试了项目数据绑定方法解决方案来添加脚本，但动态对象在那里无法访问，即使我使用了 Eval。但是 Eval 在标记中起作用，并且出现了引号/撇号问题。我的解决方案是 HTML 转义：

```
onclick='<%# "doSomething(&apos;" + Eval("DataProperty") + "&apos;, this);"%>' 
```

# html - css - 向其他方向扩展宽度

> ID：15494296
> 
> 赞同：23
> 
> 时间：2013-03-19T08:06:08.590
> 
> 标签：html, css

当我将它们悬停时，我有一些图标会展开：

```
 .icon
  {
      width: 128px;
      height: 128px;
      background: url(icons.png) no-repeat;
      background-position: left top;
      -webkit-transition: width .2s;
  }
  .icon.icon1:hover
  {
      width: 270px;
      backgorund-position-x: -128px;
  } 
```

当我悬停一个图标时，它的宽度会改变，所以因为 -webkit-transition 会扩展图标。它的扩展方式是从左到右，这对 .icon1 和 .icon2 是有利的，但对于 .icon3 和 .icon4 应该是相反的方式（从右到左）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T08:10:53.050

使用`position:absolute`和设置`right:0`和`top:0`

```
 .icon{
    width: 128px;
    height: 128px;
    background: url(icons.png) no-repeat red;
    background-position: left top;
    -webkit-transition: width .2s;
    position:absolute;
    top:0; right:0; 
}
.icon:hover{
    width:250px
} 
```

**[演示](http://jsfiddle.net/J99uQ/2/)**

# jquery - jquery div点击数据

> ID：15494311
> 
> 赞同：0
> 
> 时间：2013-03-19T08:07:07.377
> 
> 标签：jquery

这是我的代码

```
<a href="#" id="ref" data-post="5">Test<i class="icon-remove"></i></a>
<a href="#" id="ref" data-post="1">Test1<i class="icon-remove"></i></a> 
```

jQuery：

```
$(document).ready(function() {

    $('#ref').on('click', function(e) {
       var post_id = $(this).data('post');
       e.preventDefault();
       alert(post_id);
    });

}); 
```

[我在 JsFiddle 上的代码](http://jsfiddle.net/WF6H6/1/)

为什么当我点击测试工作但当我点击 Test1 不工作？

先谢谢了。埃西斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:08:53.427

**每个 DOM 元素的 ID 必须是唯一的。**

因此，请尝试添加`class`可行的元素。

**例子**

**HTML**

```
<a href="#" class="ref" data-post="5">Test<i class="icon-remove"></i></a>
<a href="#" class="ref" data-post="1">Test1<i class="icon-remove"></i></a> 
```

**jQuery**

```
$('.ref').on('click', function(e)
{
    var post_id = $(this).data('post');
    e.preventDefault();
    alert(post_id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:14:50.573

而是尝试将 id 属性更改为 class：

```
 <a href="#" class="ref" data-post="5">Test<i class="icon-remove"></i></a>
 <a href="#" class="ref" data-post="1">Test1<i class="icon-remove"></i></a> 
```

使用这个 jQuery：

```
$('.ref').on('click', function(e) {
   var post_id = $(this).data('post');
   e.preventDefault();
   alert(post_id);
}); 
```

### [查看工作演示](http://jsfiddle.net/WF6H6/2/)

笔记：

如果您对同一页面上的多个元素使用相同的 id，会发生什么情况，当它获得第一个元素时，它会起作用，而其他元素则被忽略。那就是它失败的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:08:50.210

ID 是唯一的，如果您想使用相同的标识符，请将其更改为 classes。

如果您将 更改`id="ref"`为`class="ref"`，则选择`$('.ref')`它会起作用

# oracle - Oracle 包中的最大行数

> ID：15494314
> 
> 赞同：2
> 
> 时间：2013-03-19T08:07:11.130
> 
> 标签：oracle, plsql, package

谁能告诉我一个 Oracle 包中的最大行数？Oracle 推荐什么？什么是编程可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:00:28.707

从11.2 文档中的[PL/SQL 程序限制一章：](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/limits.htm#LNPLS018)

> 在共享内存池中，一个包规范、ADT规范、独立子程序或匿名块被限制为67108864（2**26）个DIANA节点，它们对应于标识符、关键字、运算符等令牌。这允许大约 6,000,000 行代码，除非您超出 PL/SQL 编译器施加的限制

这[在 10g 中是相同的](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/limits.htm#LNPLS018)。重要的是要记住，代码行越多，编译的速度就越慢，执行时运行的时间就越长，因为更多的代码行通常意味着要执行更多的操作。

Diana 代表 Ada 的 Descriptive Intermediate Attributed Notation；这是

> ...一种树结构的中间语言。它是使用称为接口定义语言 (IDL) 的元表示法定义的。编译器和其他工具在内部使用 DIANA。

也可以看看：

*   [戴安娜是谁，她为什么不让我的数据库对象编译？](https://stackoverflow.com/questions/7764656/who-is-diana-and-why-wont-she-let-my-database-objects-compile)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:54:50.127

逻辑数据库限制 8i 和 9i[这里](http://docs.oracle.com/cd/B10501_01/server.920/a96536/ch44.htm)10g[这里](http://docs.oracle.com/cd/B14117_01/server.101/b10755/limits003.htm#sthref3594)11g[这里](http://docs.oracle.com/cd/B28359_01/server.111/b28320/limits003.htm)

# java - BlowFish 文件加密 java.security.InvalidKeyException(Java Eclipse)

> ID：15494315
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:07:11.327
> 
> 标签：java, encryption, cryptography, blowfish

我正在尝试加密然后解密回Java中的文件。我正在使用 Eclipse IDE。该程序似乎工作正常，只是计时器没有按预期工作。我使用两个计时器分别计算加密和解密时间。以毫秒为单位的解密时间显示为 0。Eclipse 说：

```
java.security.InvalidKeyException: No installed provider supports this key: (null)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at AES.<init>(AES.java:133)
    at AES.action(AES.java:311)
    at java.awt.Component.handleEvent(Component.java:6543)
    at java.awt.Component.postEvent(Component.java:4956)
    at java.awt.Component.postEvent(Component.java:4966)
    at java.awt.Component.dispatchEventImpl(Component.java:4676)
    at java.awt.Component.dispatchEvent(Component.java:4488)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:674)
    at java.awt.EventQueue.access$400(EventQueue.java:81)
    at java.awt.EventQueue$2.run(EventQueue.java:633)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:647)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:644)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

我特此发布我的整个代码：

```
import java.awt.*;
import javax.swing.JFileChooser;
import java.io.FileNotFoundException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.KeyGenerator;

import java.security.NoSuchAlgorithmException;
import java.security.spec.AlgorithmParameterSpec;

public class AES extends java.applet.Applet {
    Label encry = new Label("Choose Algorithm:   ");
    Choice textAlignment = new Choice();
    TextField TextFieldName = new TextField("", 10);
    TextField TextFieldName2 = new TextField("", 10);

    Image I;
    Label label;
    Label label2;
    private static JFileChooser fc;

    // for AES
    Cipher ecipher;
    Cipher dcipher;

    // for BlowFish
    private static String cipher_key = "Blowfish";  
    private static Cipher cipher;  
    private static KeyGenerator k_generator;  
    private static SecretKey secret_key; 

    private long startTime = 0;
    private long stopTime = 0;
    private boolean running = false;

    public void start() {
        this.startTime = System.currentTimeMillis();
        this.running = true;
    }

    public void stop() {
        this.stopTime = System.currentTimeMillis();
        this.running = false;
    }

  //elaspsed time in milliseconds
    public long getElapsedTime() {
        long elapsed;
        if (running) {
             elapsed = (System.currentTimeMillis() - startTime);
        }
        else {
            elapsed = (stopTime - startTime);
        }
        return elapsed;
    }    

    private long startTime2 = 0;
    private long stopTime2 = 0;
    private boolean running2 = false;

    public void start2() {
        this.startTime2 = System.currentTimeMillis();
        this.running2 = true;
    }

    public void stop2() {
        this.stopTime2 = System.currentTimeMillis();
        this.running2 = false;
    }

  //elaspsed time in milliseconds
    public long getElapsedTime2() {
        long elapsed;
        if (running2) {
             elapsed = (System.currentTimeMillis() - startTime2);
        }
        else {
            elapsed = (stopTime2 - startTime2);
        }
        return elapsed;
    }    

    public AES(SecretKey key)
    {
        // Create an 8-byte initialization vector
        byte[] iv = new byte[]
        {
            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f
        };

        AlgorithmParameterSpec paramSpec = new IvParameterSpec(iv);
        try
        {
            ecipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            dcipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

            // CBC requires an initialization vector
            ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
            dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    // Buffer used to transport the bytes from one stream to another
        static byte[] buf = new byte[1024];

        public void encrypt(InputStream in, OutputStream out)
        {
            try
            {
                // Bytes written to out will be encrypted
                out = new CipherOutputStream(out, ecipher);

                // Read in the cleartext bytes and write to out to encrypt
                int numRead = 0;
                while ((numRead = in.read(buf)) >= 0)
                {
                    out.write(buf, 0, numRead);
                }
                out.close();
            }
            catch (java.io.IOException e)
            {
            }
        }

        public void decrypt(InputStream in, OutputStream out)
        {
            try
            {
                // Bytes read from in will be decrypted
                in = new CipherInputStream(in, dcipher);

                // Read in the decrypted bytes and write the cleartext to out
                int numRead = 0;
                while ((numRead = in.read(buf)) >= 0)
                {
                    out.write(buf, 0, numRead);
                }
                out.close();
            }
            catch (java.io.IOException e)
            {
            }
        }

        // for BlowFish encryption
        public void encrypt_data(InputStream in, OutputStream out) throws InvalidKeyException, IOException
        {
            //initialize the cipher  for decryption  
               cipher.init(Cipher.ENCRYPT_MODE, secret_key);  

            // Bytes written to out will be encrypted
                out = new CipherOutputStream(out, cipher);

                // Read in the cleartext bytes and write to out to encrypt
                int numRead = 0;
                while ((numRead = in.read(buf)) >= 0)
                {
                    out.write(buf, 0, numRead);
                }
                out.close();
        }

        //for BlowFish decryption
         public void decrypt_data(InputStream in, OutputStream out) throws InvalidKeyException,  IOException {

             // initialize the cipher once again
              cipher.init(Cipher.DECRYPT_MODE, secret_key);      

                // Bytes read from in will be decrypted
                in = new CipherInputStream(in, cipher);

                int numRead = 0;
                while ((numRead = in.read(buf)) >= 0)
                {
                    out.write(buf, 0, numRead);
                }
                out.close();
         }

         public AES() {
                setLayout(new FlowLayout());
                //simpleMethod();
         } 

    public void init() {

                I=getImage(getCodeBase(),"lock.png");
                add(encry);
                label = new Label("Encryption Time ", Label.RIGHT);
                label2 = new Label("Decryption Time ", Label.RIGHT);

        //Add 4 different options to it:
                textAlignment.add("AES");
                textAlignment.add("BlowFish");
                textAlignment.add("PBE");

        //Then add the drop down list to the screen
                add(textAlignment);
                add(label);
                add(TextFieldName);
                add(label2);
                add(TextFieldName2);

        }

        //AES button caused the event
        public boolean action(Event event, Object object) {
             if (event.target == textAlignment) {
                  String selection = textAlignment.getSelectedItem();

                      if (fc == null) {
                            fc = new JFileChooser(".");
                        }
                        // Show it.
                        int returnVal = fc.showOpenDialog(this);
                        if (returnVal == JFileChooser.APPROVE_OPTION) { 

                                  if (selection.equals("AES")){
                                       AES s1 = new AES();

                             s1.start(); // timer start
                            KeyGenerator kgen;
                            try {
                                kgen = KeyGenerator.getInstance("AES");

                                kgen.init(128);
                                SecretKey key           =   kgen.generateKey();

                                // Create encrypter/decrypter class
                                // Create encrypter/decrypter class
                                AES encrypter = new AES(key);

                                    try {
                                        encrypter.encrypt(new FileInputStream(fc.getSelectedFile().getPath()),new FileOutputStream("C:/Users/Acer/Desktop/encrypted"));
                                    s1.stop(); // timer stops

                                    } catch (FileNotFoundException e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    }
                                       AES s2 = new AES();
                                    // Decrypt
                                    try {
                                        s2.start2(); // timer starts
                                        encrypter.decrypt(new FileInputStream("C:/Users/Acer/Desktop/encrypted"),new FileOutputStream("C:/Users/Acer/Desktop/decrypted"));
                                        s2.stop2(); // timer stops

                                    } catch (FileNotFoundException e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    }

                                    TextFieldName.setText(Long.toString(s1.getElapsedTime())); 
                                    TextFieldName2.setText(Long.toString(s2.getElapsedTime2())); }

                             catch (NoSuchAlgorithmException e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            }               
                    }
    }
                             if (selection.equals("BlowFish")){
                                   AES s1 = new AES();
                                   AES s2 = new AES();

                                     AES encryption = new AES(secret_key);

                                     s1.start(); // timer start
                                   //Generate encryption key based on codecypherkey code word  
                                   try {
                                    k_generator = KeyGenerator.getInstance(cipher_key);
                                } catch (NoSuchAlgorithmException e1) {
                                    // TODO Auto-generated catch block
                                    e1.printStackTrace();
                                }  

                                   //Create a secret key  
                                   secret_key = k_generator.generateKey();  

                                   //Create Cipher based on the previous encryption key code  
                                   try {
                                    cipher = Cipher.getInstance(cipher_key);
                                } catch (NoSuchAlgorithmException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (NoSuchPaddingException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } 

                                try {
                                    encryption.encrypt_data(new FileInputStream(fc.getSelectedFile().getPath()),new FileOutputStream("C:/Users/Acer/Desktop/encrypted"));
                                    s1.stop(); // timer stops
                                } catch (FileNotFoundException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (InvalidKeyException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                try {
                                       s2.start();
                                    encryption.decrypt_data(new FileInputStream("C:/Users/Acer/Desktop/encrypted"),new FileOutputStream("C:/Users/Acer/Desktop/decrypted"));
                                        s2.stop();

                                        TextFieldName.setText(Long.toString(s1.getElapsedTime())); 
                                        TextFieldName2.setText(Long.toString(s2.getElapsedTime2())); 

                                        } catch (FileNotFoundException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (InvalidKeyException e) {
                                            // TODO Auto-generated catch block
                                            e.printStackTrace();
                                        } catch (IOException e) {
                                            // TODO Auto-generated catch block
                                            e.printStackTrace();
                                        }
                                }

                             }

            return running;
            }

        public void paint(Graphics g)
        {
        g.drawImage(I,10,10,this);
        }} 
```

谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:01:44.060

您需要 Blowfish Cipher 实例来执行 Blowfish 加密，而不是 AES 的 Cipher 实例。如果 Cipher 不正确，则 getInstance() 中的字符串。此外，您需要确保您的 secret_key 在密码初始化期间不为空。

# cocos2d-iphone - CCAnimation，如何为单个帧设置帧速率

> ID：15494318
> 
> 赞同：0
> 
> 时间：2013-03-19T08:07:16.943
> 
> 标签：cocos2d-iphone

假设我有一个由五帧组成的动画。如何将第 1-4 帧设置为每帧播放 0.5 秒，然后将第 5 帧设置为 0.1 秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:32:32.110

通过手动播放动画。调度一个选择器，使用它的增量时间来查看是否需要切换到下一帧。使用 setDisplayFrame: 更改精灵的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:07:28.757

我还没有尝试过，（cocos 2.x 中的新功能），但是：

```
CCAnimation *anim = [CCAnimation animation];
NSMutableArray *frames = [NSMutableArray array];
CCSpriteFrame *sfr1 = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"name1"];
CCAnimationFrame *af1 = [[[CCAnimationFrame alloc] initWithSpriteFrame:sfr1 delayUnits:5 userInfo:nil] autorelease];
[frames addObject:af1];

// tru sfr4 and finally

CCSpriteFrame *sfr5 = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"name5"];
CCAnimationFrame *af5 = [[[CCAnimationFrame alloc] initWithSpriteFrame:sfr5 delayUnits:1 userInfo:nil] autorelease];
[frames addObject:af5];

anim = [CCAnimation animationWithAnimationFrames:frames delayPerUnit:.1 loops:1]; 
```

这应该会给你你正在寻找的效果。

ps：userInfo 是一个 NSDictionary。播放动画时，您可以注册一个名为 CCAnimationFrameDisplayedNotification 的通知，并逐帧接收 userInfo。

// 尚未测试，但 //

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:29:18.120

使用两个单独的动画，一个 0.5 秒，一个 0.2 秒。

# wordpress - 使 flex 滑块显示带有相应链接的图像

> ID：15494326
> 
> 赞同：0
> 
> 时间：2013-03-19T08:07:46.283
> 
> 标签：wordpress, wordpress-theming

我在我的 wordpress 上安装了 flexslider 并且工作得很好，它的工作方式，它抓取页面上的所有图像并显示它们，是否可以让每个图像链接到它的文件？

我正在使用的代码是这个

```
<ul class="slides">

    <php foreach ( $attachments as $attachment ) {  ?>

        <li><?php echo wp_get_attachment_image( $attachment->ID, 'cw-post' ); ?>
        </li>

    <?php } ?>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:59:03.153

我认为这会成功。

```
// Get ID of the attached file
$thumbnail_id = get_post_thumbnail_id(get_the_ID());

// Get attached file. Define what size at the end. DEfault is the thumbnail.
$image_src_arr = wp_get_attachment_image_src($thumbnail_id,'medium');

// Return image source
$image_source = $image_src_arr[0]; 
```

我为 myeslf 创建了这个函数：

```
/**
 * This function will return source url for attached image-
 * The get_the_ID is a global WP command that will retrieve current post / page ID
 * Using the post ID it will return the attachment ID needed in order to call
 * wp_get_Attachment_image_src.
 */
function get_related_image($size){
    $image_src_arr = wp_get_attachment_image_src( get_post_thumbnail_id(get_the_ID()),$size);

    if(sizeof($image_src_arr) > 0) {
        return $image_src_arr[0];
    } else {
        return false;
    }

} 
```

# windows - 对于长路径和长文件名，删除超过 30 天的文件

> ID：15494338
> 
> 赞同：2
> 
> 时间：2013-03-19T08:08:22.860
> 
> 标签：windows, command-line, batch-file, scheduled-tasks

我试图通过使用任务计划每月一次在 Windows 中制作批处理文件来查找 *.bak。条件超过 30 岁。我创建了两个条件完整路径名和非 8dot3 路径名。对于那些无法删除的人，将其记录到 TXT 文件中。

这是我找到的命令：

```
forfiles /P E:\WP /S /M *.bak /D -30 /C "cmd /C del @path" 
```

这是我使用非 8dot3 文件名删除的命令：

```
forfiles /P E:\WP /S /M *.bak /D -30 /C "cmd /C for %A in (@path) do @echo del %~sA 
```

对于因路径长、文件名长而无法删除的文件，将其记录为全路径文件名长且非8dot3的TXT文件：

```
forfiles /P E:\WP /S /M *.bak /D -30 /C "cmd /c echo @path >> list.txt"
forfiles /P E:\WP /S /M *.bak /D -30 /C "cmd /c for %A in (@path) do @echo %~sA" >> list.txt 
```

如果我只是复制并粘贴到 dos 命令提示符中，这 4 个命令运行良好。

但是当我将它们放入批处理文件中时，例如“del30days.bat”，它不适用于非 8dot3 文件名：

```
@echo off
:: Set host computer name
set host=%COMPUTERNAME%

:: Set save list path
set list_path=F:\LogFiles

:: Set min age of files and folders to delete
set file_list=ListCantDeleted-%host%-%date:~10,4%-%date:~7,2%-%date:~4,2%.txt

:: Set target folder path
set target_path=E:\WP

:: Set min age of files and folders to delete
set max_days=30

:: Set what kind files or extension
set file_ext=*.bak

:: Delete files from target path
forfiles /P %target_path% /S /M %file_ext% /D -%max_days% /C "cmd /C del @path"
forfiles /P %target_path% /S /M %file_ext% /D -%max_days% /C "cmd /C for %A in (@path) do @echo del %~sA"

:: Record files from target path
forfiles /P %target_path% /S /M %file_ext% /D -%max_days% /C "cmd /c echo @path >> %list_path%\%file_list%"
forfiles /P %target_path% /S /M %file_ext% /D -%max_days% /C "cmd /C for %A in (@path) do @echo %~sA >> %list_path%\%file_list%" 
```

我在非 8dot3 文件名上收到此错误，但在 TXT 文件中记录的长文件名上却没有，这意味着它也无法使用非 8dot3 文件名删除文件。

```
~sA" was unexpected at this time. 
```

有什么理由吗？

我创建它的目标是删除 *.bak 文件超过 30 天，而长路径和文件名没有任何问题。有人对此有简化的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:40:27.387

你会打自己的耳光。问题是在批处理文件中，for 循环变量需要双倍百分比。%%A 和 %%~sA。

# c++ - 如何使用 C++ 启动和恢复 Maple 的结果

> ID：15494345
> 
> 赞同：0
> 
> 时间：2013-03-19T08:08:47.247
> 
> 标签：c++, maple

我正在使用准备枫叶计算命令表的 C++ 代码。操作系统使用 Ubuntu 12.04。我想用我的 C++ 程序启动这些枫树文件并将结果恢复到文本文件中。

你知道有没有办法做到这一点？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:13:34.593

以 MathLink 为例。这是一个很好的教程，如 pdf，您如何做到这一点：[http ://www.edenwaith.com/development/tutorials/mathlink/ML_Tut.pdf](http://www.edenwaith.com/development/tutorials/mathlink/ML_Tut.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:50:16.640

由于您希望结果在 C++ 上下文中以某种方式有用，我们可以假设结果是数字数据数组吗？如果是这样，那么一种方法可能是让（工作表）代码将结果保存到（文本或二进制）文件中。请参阅[导出矩阵](http://www.maplesoft.com/support/help/Maple/view.aspx?path=ImportMatrix)。

您也许可以使用[OpenMaple](http://www.maplesoft.com/support/help/Maple/view.aspx?path=OpenMaple)运行工作表，例如[system[launch]](http://www.maplesoft.com/support/help/Maple/view.aspx?path=system)。但这可能只有在工作表本身在运行时保存数据（例如数据文件）时才有用。

另一种方法可能是使用[RunWorksheet](http://www.maplesoft.com/support/help/Maple/view.aspx?path=DocumentTools/RunWorksheet)来运行工作表，就好像它们是过程一样，并从中获取“返回值”。你也许可以在 OpenMaple 下做到这一点。

为 Maple 源（也可以`read`在 GUI 中）使用 .mpl 文本文件也可能比使用工作表更容易。更好的是，当事情变得非常复杂时，将您的可重用代码保存在 .mla 库档案中。但是，如果没有这样的改进，您也许可以实现您的目标。

# asp.net - 运行时不显示控件

> ID：15494353
> 
> 赞同：0
> 
> 时间：2013-03-19T08:09:15.723
> 
> 标签：asp.net, css

我可以看到设计时间的变化，但是当页面运行时控件没有显示......我在选项卡面板中有三个这样的标签和其他控件......

```
<a href="#" id="A1" class="small-heading">Change Password</a> 
```

CSS：

```
.small-heading {
    background: url(../../Images1/small-heading.gif) no-repeat;
    width: 105px;
    height: 20px;
    float: left;
    font-size: 0.9em;
    line-height: 18px;
    font-weight: normal;
    color: #7a7a7a;
    overflow: hidden;
    padding: 0 0 0 3px;
    margin: 0 0 0 -127px;
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:15:20.247

我不太确定，因为您只有部分代码。尝试发布完整代码或简化示例。

我想是因为你使用`overflow:hidden;`并`margin-left: -127px;` 尝试删除`overflow:hidden;`

编辑***

此外，您不能为标签设置宽度和高度，因为默认情况下 a 是内联的。这也可能会影响背景图像..尝试提出`display:block`希望它可以解决问题

谢谢

# android - 自动录制音频

> ID：15494356
> 
> 赞同：1
> 
> 时间：2013-03-19T08:09:41.930
> 
> 标签：android, mediarecorder

```
import java.io.File;
import java.io.IOException;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AudioRecordingActivity extends Activity {
    private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp";
    private static final String AUDIO_RECORDER_FILE_EXT_MP4 = ".mp4";
private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";

private MediaRecorder recorder = null;
private int currentFormat = 0;
private int output_formats[] = { MediaRecorder.OutputFormat.MPEG_4 };
private String file_exts[] = { AUDIO_RECORDER_FILE_EXT_MP4};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setButtonHandlers();
    enableButtons(false);
    //setFormatButtonCaption();
}

private void setButtonHandlers() {
    ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
    //((Button) findViewById(R.id.btnFormat)).setOnClickListener(btnClick);
}

private void enableButton(int id, boolean isEnable) {
    ((Button) findViewById(id)).setEnabled(isEnable);
}

private void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart, !isRecording);
    //enableButton(R.id.btnFormat, !isRecording);
    enableButton(R.id.btnStop, isRecording);
}

/*private void setFormatButtonCaption() {
    ((Button) findViewById(R.id.btnFormat))
            .setText(getString(R.string.audio_format) + " ("
                    + file_exts[currentFormat] + ")");
}*/

private String getFilename() {
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath, AUDIO_RECORDER_FOLDER);

    if (!file.exists()) {
        file.mkdirs();
    }

    return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
}

private void startRecording() {
    recorder = new MediaRecorder();

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(output_formats[currentFormat]);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(getFilename());

    recorder.setOnErrorListener(errorListener);
    recorder.setOnInfoListener(infoListener);

    try {
        recorder.prepare();
        recorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void stopRecording() {
    if (null != recorder) {
        recorder.stop();
        recorder.reset();
        recorder.release();

        recorder = null;
    }
}

private void displayFormatDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    String formats[] = { "MPEG 4", "3GPP" };

    builder.setTitle(getString(R.string.choose_format_title))
            .setSingleChoiceItems(formats, currentFormat,
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            currentFormat = which;
                            //setFormatButtonCaption();

                            dialog.dismiss();
                        }
                    }).show();
}

private MediaRecorder.OnErrorListener errorListener = new MediaRecorder.OnErrorListener() {
    @Override
    public void onError(MediaRecorder mr, int what, int extra) {
        Toast.makeText(AudioRecordingActivity.this,
                "Error: " + what + ", " + extra, Toast.LENGTH_SHORT).show();
    }
};

private MediaRecorder.OnInfoListener infoListener = new MediaRecorder.OnInfoListener() {
    @Override
    public void onInfo(MediaRecorder mr, int what, int extra) {
        Toast.makeText(AudioRecordingActivity.this,
                "Warning: " + what + ", " + extra, Toast.LENGTH_SHORT)
                .show();
    }
};

private View.OnClickListener btnClick = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnStart: {
            Toast.makeText(AudioRecordingActivity.this, "Start Recording",
                    Toast.LENGTH_SHORT).show();

            enableButtons(true);
            startRecording();

            break;
        }
        case R.id.btnStop: {
            Toast.makeText(AudioRecordingActivity.this, "Stop Recording",
                    Toast.LENGTH_SHORT).show();
            enableButtons(false);
            stopRecording();

            break;
        }
        /*case R.id.btnFormat: {
            displayFormatDialog();

            break;
        }*/
        }
    }
};
} 
```

上面的代码记录音频并将其存储在 sd 卡中，单击按钮开始和停止录制。

我想制作一个录音机应用程序，它会在启动应用程序时自动开始录制音频约 30 秒。可以这样做吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:15:12.810

`onCreate`您可以在应用程序或方法中发出延迟任务，该任务`onResume`将在 30 秒后开始录制。

如果要限制录制时间，请在录制开始后发出延迟任务。

之前在这里问过的关于延迟任务的问题：[How to call a method after a delay in Android](https://stackoverflow.com/questions/3072173/how-to-call-a-method-after-a-delay)

你也可以在这里查看更多信息：[Handler vs AsyncTask](https://stackoverflow.com/questions/2523459/handler-vs-asynctask)

# jquery - 当用户单击链接时，想要在使用 jquery 的链接下显示 div

> ID：15494357
> 
> 赞同：3
> 
> 时间：2013-03-19T08:09:57.813
> 
> 标签：jquery

我有链接和一个 div。当用户单击链接时，我想在链接下显示 div。我想通过代码将 div 定位在链接下方意味着 div 的顶部和左侧将根据链接的顶部和左侧位置由代码设置。需要帮忙。

```
<a id="link">About</a>

<div id="submenu">
     <a href="#">About the company</a><br />
     <a href="#">Careers</a>
</div> 
```

## 我这样做是我的完整代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
<style type="text/css">
    a#link
    {
        background: #CCC;
        padding: 10px;
        cursor: pointer;
        margin-left: 600px;
        margin-top: 200px;
        position: absolute;
    }

    a#link1
    {
        background: #CCC;
        padding: 10px;
        cursor: pointer;
        margin-left: 600px;
        margin-top: 250px;
        position: absolute;
    }

    div#submenu
    {
        background: #fff;
        position: absolute;
        top: -12px;
        left: -20px;
        z-index: 100;
        width: 165px;
        display: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.45);
        border:5px solid;
        border-color:#F1F2F2;
        z-index:9999;
    }

    div#submenu li a
    {
        color: #555555;
        display: block;
        font-family: arial;
        font-weight: bold;
        padding: 6px 15px;
        cursor: pointer;
        text-decoration: none;
    }

    div#submenu li a:hover
    {
        background: #39B54A;
        color: #FFFFFF;
        text-decoration: none;
    }

    .root
    {
        list-style: none;
        margin: 0px;
        padding: 0px;
        padding: 11px 0 0 0px;
        border-top: 1px solid #dedede;
    }
</style>
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            $("#link").click(function () {
                $('#submenu').insertAfter($('#link'));
                $('#submenu').css({ left: $(this).offset().left + 'px',
                    top: ($(this).offset().top + $(this).outerHeight()) + 'px',
                    position: "absolute"
                });

                toggleVisibility();
                false;
            });

            $("html").click(
              function (e) {
                  if (e.target.id != "link" && e.target.id != "submenu"
                        && e.target.className != "root"
                        && e.target.className != "mainli" 
                        && e.target.className != "atag") {
                      $('div#submenu').fadeOut();
                  }
              });

            function toggleVisibility() {
                var submenu = $('div#submenu');
                if (submenu.is(":visible")) {
                    submenu.fadeOut();
                } else {
                    submenu.fadeIn();
                }
            }

        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <a id="link">About</a>
    <a id="link1">My Test</a>
    <div id="submenu">
        <ul  class="root">
            <li class="mainli"><a class="atag" href="http://www.bba-reman.com">Ship with UPS</a></li>
            <li class="mainli"><a class="atag" href="http://www.bba-reman.com">Ship with FedEx</a></li>
        </ul>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:12:49.713

要在您的链接下显示，`<div>`您可以执行以下操作：

```
$('#link').click(function() {
    $('#submenu').css({
        left: $(this).offset().left + 'px',
        top: ($(this).offset().top + $(this).height()) + 'px'
    }).show();
}); 
```

在你的 CSS 中：

```
#submenu {
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:15:03.460

这段代码可以帮助你

```
$("#link").click(function () {
       $('#submenu').insertAfter($('#link'));
        $('#submenu').css({left: $(this).offset().left + 'px',
                           top: ($(this).offset().top + $(this).height()) + 'px',
                           position: "absolute"
        }).show();
    }); 
```

# android - json 没有给我竞争格式，

> ID：15494358
> 
> 赞同：1
> 
> 时间：2013-03-19T08:10:06.493
> 
> 标签：android, json

我正在制作 Json ，但我没有制作正确的格式它只给了我用户的第一个属性和最后一个属性项，没有给我完整的 json ..提前谢谢..我的代码是

```
JSONObject json = new JSONObject();

        try {
            JSONObject subJson = new JSONObject();
            //JSONArray jsonArray = new JSONArray();

            subJson.put("saleManId", LogIn.UserId);
            subJson.put("customerId", LogIn.CustomerId);

            json.put("User", subJson);

            for (int i = 0; i < LogIn.subValues.length; i++) {
                JSONObject subSubObj = new JSONObject();

                for (int j = 0; j < LogIn.subValues[i].length; j++) {
                    if (LogIn.subValues[i][j] > 0) {

                        JSONObject item = new JSONObject();

                        item.put("itemID", LogIn.subIds[i][j]);
                        item.put("qty", LogIn.subValues[i][j]);

                        subSubObj.put("item", item);

                    }

                }

                if(subSubObj.length()>0)
                {
                    json.put("orderDetail", subSubObj);
                    Log.d("json", json.toString());
                }

            }
            Log.d("jsonnnnnnnnnnnnnnnnnnnnnnnnnnnnn", json.toString());

        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

它们是 Array 中的 30 到 35 个项目，但它只给了我这个

```
{"orderDetail":{"item":{"qty":1,"itemID":"60"}},"User":{"customerId":"460","saleManId":"1"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:24:19.160

我明白了... :) 谢谢大家...

```
JSONObject json = new JSONObject();

        try {
            JSONObject subJson = new JSONObject();
            JSONArray jsonArray = new JSONArray();

            subJson.put("saleManId", LogIn.UserId);
            subJson.put("customerId", LogIn.CustomerId);

            json.put("User", subJson);

            for (int i = 0; i < LogIn.subValues.length; i++) {

                for (int j = 0; j < LogIn.subValues[i].length; j++) {
                    if (LogIn.subValues[i][j] > 0) {

                        JSONObject subSubObj = new JSONObject();
                        JSONObject item = new JSONObject();

                        item.put("itemID", LogIn.subIds[i][j]);
                        item.put("qty", LogIn.subValues[i][j]);

                        subSubObj.put("item", item);

                        jsonArray.put(subSubObj);

                    }

                }

            }

            json.put("orderDetail", jsonArray);
            Log.d("jsonnnnnnnnnnnnnnnnnnnnnnnnnnnnn", json.toString());

        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
         sendString = json.toString(); 
```

输出结果是..

```
{"orderDetail":[
{"item":{"qty":1,"itemID":"4"}},
{"item":{"qty":1,"itemID":"14"}},
{"item":{"qty":1,"itemID":"28"}},
{"item":{"qty":1,"itemID":"59"}},
{"item":{"qty":1,"itemID":"60"}},
{"item":{"qty":1,"itemID":"62"}},
{"item":{"qty":1,"itemID":"24"}},
{"item":{"qty":1,"itemID":"36"}},
{"item":{"qty":1,"itemID":"51"}}],
"User":{"customerId":"414","saleManId":"1"}} 
```

# coldfusion - ColdFusion "是" eq "True"; "否" eq "假

> ID：15494362
> 
> 赞同：7
> 
> 时间：2013-03-19T08:10:25.197
> 
> 标签：coldfusion

为什么 ？

```
<cfif "yes" eq "true">

Yes equals true.

<cfelse>

Yes does not equal true.

</cfif> 
```

页面输出。“是的就是真的。”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T10:47:40.313

Chris 和 Keshav 的答案是正确的，ColdFusion 转换了这些值。这是关于 ColdFusion 数据转换的官方文档。

[类型之间的转换](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fc3.html)

```
Value     As Boolean     As number     As date-time     As string

"Yes"     True           1             Error            "Yes"

"No"      False          0             Error            "No"

True      True           1             Error            "Yes"

False     False          0             Error            "No" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T08:55:25.197

ColdFusion 具有动态变量类型，并且在运行时会进行一些奇怪的转换，字符串可以用作布尔值、日期和数字而无需强制转换它们，这既有优点也有缺点。

如果您需要进行简单的字符串比较，您可以使用内置的 compare() 函数。

Ben Nadel 在这里对字符串比较选项进行了很好的总结 - [http://www.bennadel.com/blog/236-ColdFusion-String-Comparison-Compare-vs-Equals-vs-CompareTo-.htm](http://www.bennadel.com/blog/236-ColdFusion-String-Comparison-Compare-vs-Equals-vs-CompareTo-.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T16:48:05.827

您必须非常小心真/假比较。它们应该很简单，但有时，取决于您编写代码的方式，TRUE/FALSE 的评估可能会有所不同。根据几乎所有的定义，FALSE 总是按位为 0（在 CF 中为否）。TRUE 将按位为 1，但也是 Yes 和任何非 0 数。所以 42 仍然是 TRUE。并且 -1 仍然是 TRUE（特别感谢 MS Access 是/否数据类型 :-p）。

由于 FALSE 始终为 0（或 NO 或 FALSE），因此检查 NOT FALSE 或 NEQ 0 通常比检查 TRUE 更好。但是，即使这样，您仍然要小心。确定您要考虑的内容为 TRUE 并对此进行全面评估。ColdFusion 有时会以不同的方式转换 TRUE 和 FALSE 变量。看下面代码的结果：

（感谢 Bert Dawson 和 Jamie Jackson 的 querySim 脚本。）

```
<!--- set up the fake query: --->
<cfscript>
/**
 * Accepts a specifically formatted chunk of text, and returns it as a query object.
 * v2 rewrite by Jamie Jackson
 * 
 * @param queryData      Specifically format chunk of text to convert to a query. (Required)
 * @return Returns a query object. 
 * @author Bert Dawson (bert@redbanner.com) 
 * @version 2, December 18, 2007 
 */
function querySim(queryData) {
    var fieldsDelimiter="|";
    var colnamesDelimiter=",";
    var listOfColumns="";
    var tmpQuery="";
    var numLines="";
    var cellValue="";
    var cellValues="";
    var colName="";
    var lineDelimiter=chr(10) & chr(13);
    var lineNum=0;
    var colPosition=0;

    // the first line is the column list, eg "column1,column2,column3"
    listOfColumns = Trim(ListGetAt(queryData, 1, lineDelimiter));

    // create a temporary Query
    tmpQuery = QueryNew(listOfColumns);

    // the number of lines in the queryData
    numLines = ListLen(queryData, lineDelimiter);

    // loop though the queryData starting at the second line
    for(lineNum=2;  lineNum LTE numLines;  lineNum = lineNum + 1) {
        cellValues = ListGetAt(queryData, lineNum, lineDelimiter);

        if (ListLen(cellValues, fieldsDelimiter) IS ListLen(listOfColumns,",")) {
            QueryAddRow(tmpQuery);
            for (colPosition=1; colPosition LTE ListLen(listOfColumns); colPosition = colPosition + 1){
                cellValue = Trim(ListGetAt(cellValues, colPosition, fieldsDelimiter));
                colName   = Trim(ListGetAt(listOfColumns,colPosition));
                QuerySetCell(tmpQuery, colName, cellValue);
            }
        } 
    }
    return( tmpQuery );
}
</cfscript>

<!--- populate the fake query --->    
<cfscript>
fakeQuery = querySim('
testID , isThisTruthy
1 | TRUE
2 | FALSE
3 | YES
4 | NO
5 | 1
6 | 0
7 | -1
8 | 42
');
</cfscript>
<!--- End of the fake query setup --->

<!--- Dump the fakeQuery so we can see what we've got. --->
<cfdump var="#fakeQuery#" label="fakeQueryInfo" />

<!--- 
    Not really necessary since the query is created above. Just included for 
    clarity, as everything above this line can really be ignored if connecting 
    to a real query. 
--->
<cfquery name="truthyCheck" dbtype="query">
    SELECT testID, isThisTruthy
    FROM fakeQuery
</cfquery>

<!--- Begin the truthy statements. --->
<br/><br/>
<strong>cfif isThisTruthy >></strong> 
<!--- 
    This one has an implicit evaluation of TRUE or FALSE that seems to be based on a
    broader (and more accurate) definition of what should be TRUE or FALSE. However,
    it's much less clear in what you're trying to do. 
--->
<br/>
<cfoutput query="truthyCheck">
    #testID#: #isThisTruthy# | <cfif isThisTruthy>True<cfelseif NOT isThisTruthy>False<cfelse>NULL</cfif> <br/>
</cfoutput>
<br/><br/>

<!--- 
    The rest of these appear to actually evaluate down to a bit (using the standard
    1,0,YES,NO,TRUE,FALSE definitions) and then they do an integer comparison. This 
    may not be completely what you're looking for.
--->
<strong>cfif isThisTruthy IS TRUE >></strong>
<br/>
<cfoutput query="truthyCheck">
    #testID#: #isThisTruthy# | <cfif isThisTruthy IS TRUE>True<cfelseif isThisTruthy IS NOT TRUE>False<cfelse>NULL</cfif> 
    <!--- 1 IS 1 IS TRUE, but -1 IS 1 IS FALSE. --->
    <br/>
</cfoutput>
<br/><br/>
<strong>cfif isThisTruthy EQ 1 >></strong>
<br/>
<cfoutput query="truthyCheck">
    #testID#: #isThisTruthy# | <cfif isThisTruthy EQ 1>True<cfelseif isThisTruthy NEQ 1>False<cfelse>NULL</cfif> 
    <!--- 1 EQ 1 IS TRUE, but -1 EQ 1 IS FALSE. --->
    <br/>
</cfoutput>
<br/><br/>
<strong>cfif isThisTruthy NEQ 0 >></strong>
<br/>
<cfoutput query="truthyCheck">
    #testID#: #isThisTruthy# | <cfif isThisTruthy NEQ 0>True<cfelseif isThisTruthy EQ 0>False<cfelse>NULL</cfif> 
    <!--- 1 NEQ 0 and -1 NEQ 0 both evaluate to the same. --->
    <br/>
</cfoutput>
<br/><br/>
<strong>cfif isThisTruthy NEQ FALSE >></strong>
<br/>
<cfoutput query="truthyCheck">
    #testID#: #isThisTruthy# | <cfif isThisTruthy NEQ FALSE>True<cfelseif isThisTruthy EQ FALSE>False<cfelse>NULL</cfif> 
    <!--- 1 NEQ 0 and -1 NEQ 0 both evaluate to the same. --->
    <br/>
</cfoutput> 
```

你会得到：

**cfif isThisTruthy >>**
1: 真 | 真
2：假 | 错误
3：是 | 真
4：否 | 错误
5：1 | 真
6：0 | 错误
7：-1 | 正确*<--- 技术上正确*
8: 42 | 真*<--- 技术上正确*

**cfif isThisTruthy IS TRUE >>**
1: TRUE | 真
2：假 | 错误
3：是 | 真
4：否 | 错误
5：1 | 真
6：0 | 错误
7：-1 | 错误 *<--- 技术上不正确*
8: 42 | 错误 *<--- 技术上不正确*

**cfif isThisTruthy EQ 1 >>**
1: TRUE | 真
2：假 | 错误
3：是 | 真
4：否 | 错误
5：1 | 真
6：0 | 错误
7：-1 | 错误*<--- 技术上不正确*
8: 42 | 错误*<--- 技术上不正确*

**cfif isThisTruthy NEQ 0 >>**
1：真 | 真
2：假 | 错误
3：是 | 真
4：否 | 错误
5：1 | 真
6：0 | 错误
7：-1 | 正确*<--- 技术上正确*
8: 42 | 真*<--- 技术上正确*

**cfif isThisTruthy NEQ FALSE >>**
1: TRUE | 真
2：假 | 错误
3：是 | 真
4：否 | 错误
5：1 | 真
6：0 | 错误
7：-1 | 正确*<--- 技术上正确*
8: 42 | 真*<--- 技术上正确*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T08:19:43.997

在 ColdFusion 中，“yes”和“true”在用作表达式时都转换为数值 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-29T09:06:30.043

是的， 1 和 true 在coldFusion中是一回事。如此链接所示：

[http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fd0.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fd0.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T13:10:31.793

在coldfusion中，“yes”和“true”被解释为bit(1)，“no”和“false”被解释为bit(0)，所以“yes”和“true”是相等的。以同样的方式

```
<cfif 1 eq "true">

Yes equals true.

</cfif> 
```

# javascript - 如何在不使用 Javascript 中的正则表达式的情况下删除字符串中括号中的文本？

> ID：15494366
> 
> 赞同：2
> 
> 时间：2013-03-19T08:11:07.780
> 
> 标签：javascript

如何在**不**使用正则表达式的情况下删除字符串中尖括号内的任何内容？

例如，我有以下输入：

```
var str = "This <is> some <random> text"; 
```

并希望获得以下输出：
*This some text*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:15:43.953

假设括号将按照您的示例排列，您可以执行以下操作：

```
str = str.split('(')
   .map(function(s) { return s.substring(s.indexOf(')')+1); })
   .join(''); 
```

请注意，删除括号内的文本时，会留下双空格。这似乎符合您的要求，因为这两个空格实际上都在您的括号之外。它们可以用 删除`.replace(/\s+/g, ' ')`，但那当然是使用正则表达式。如果您想假设括号内的单词后面总是跟着一个也将被删除的空格，您可以执行以下操作：

```
str = str.split('(')
   .map(function(s) { 
      return s.indexOf(') ') == -1 
         ? s
         : s.substring(s.indexOf(') ') + 2);
    })
   .join(''); 
```

`"This "`在此示例中，您需要检查字符串 ( )中没有括号的情况。我们以前不需要它，因为我们总是只做 +1，如果`indexOf`产生 -1，那只是意味着取整个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:16:09.457

多么奇怪的要求！这不会使用正则表达式：

```
"This (is) some (random) text".split('(').map(function(el) {
    var i = el.indexOf(')');
    return el = ~i ? el.substr(i) : el;
}).join('('); // This () some () text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:20:35.690

```
var str = "This (is) some (random) text";

while (str.indexOf('(') != -1) {
    str = str.substring(0, str.indexOf('(') - 1) + str.substring(str.indexOf(')') + 1);
}
// Output: This some text 
```

# image-processing - 如何使用 tess4j 提取图像中的文本坐标

> ID：15494367
> 
> 赞同：3
> 
> 时间：2013-03-19T08:11:15.010
> 
> 标签：image-processing, ocr, tesseract

我试图弄清楚在 tess4j 执行 OCR 之后如何在文本图像中获取坐标和单词 rect。我是初学者，所以有人可以帮我分解一下吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-31T18:27:51.163

我本人对 tess4j 还很陌生，我不想不同意@nguyenq，但这就是我的做法

```
String imageUrl = "...";
File imageFile = new File(imageUrl);
Image image = ImageIO.read(imageFile);
BufferedImage bi = toBufferedImage(image);
ITesseract instance = new Tesseract();

for(Word word : instance.getWords(bi, ITessAPI.TessPageIteratorLevel.RIL_TEXTLINE)) {
  Rectangle rect = word.getBoundingBox();

  System.out.println(rect.getMinX()+","+rect.getMaxX()+","+rect.getMinY()+","+rect.getMaxY()
                    +": "+word.getText());
} 
```

这是我的 toBufferedImage 方法

```
public static BufferedImage toBufferedImage(Image img)
{
  if (img instanceof BufferedImage)
  {
      return (BufferedImage) img;
  }

  // Create a buffered image with transparency
  BufferedImage bimage = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);

  // Draw the image on to the buffered image
  Graphics2D bGr = bimage.createGraphics();
  bGr.drawImage(img, 0, 0, null);
  bGr.dispose();

  // Return the buffered image
  return bimage;
} 
```

[所以信用](https://stackoverflow.com/questions/13605248/java-converting-image-to-bufferedimage)

**编辑**我应该注意到这是使用 tess4j v3.3.1。在发布初始问题后，@nguyenq 肯定已经添加了这个新的便利 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:31:55.677

Tess4J 的单元测试包括获取已识别词的边界框的示例。代码类似于[Tess4J: How to use ResultIterator?](https://stackoverflow.com/questions/14794551/tess4j-how-to-use-resultiterator/) .

# tfs - TFS 2010 和本地 TFS 2012 之间的项目同步

> ID：15494371
> 
> 赞同：1
> 
> 时间：2013-03-19T08:11:33.123
> 
> 标签：tfs, synchronization, migration

我们有远程客户端 TFS 2010，并希望使用我们的存储库和一些分支创建我们的本地 TFS 2012（具有甜蜜的敏捷工具），以供将来的工具/测试和构建使用。我们的本地 tfs 2012 和远程 tfs 2010 之间是否有简单的操作同步方法。

我阅读了有关[将 TFS 2010 项目迁移到 TFS 2012](https://stackoverflow.com/questions/10100406/moving-a-team-project-from-one-collection-to-another)和[集成工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)的信息，但是有一些更新吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:37:44.653

[正如您所建议的（ http://tfsintegration.codeplex.com/](http://tfsintegration.codeplex.com/)），这应该可以通过 TFS 集成平台工具实现

该工具支持连续运行的同步服务，但这是一个复杂的过程，其中变更集基本上是从源到目标的“回放”签入。因此，所有同步的变更集都将使用新的时间戳签入。

我可以推荐[http://blogs.msdn.com/b/willy-peter_schaub/](http://blogs.msdn.com/b/willy-peter_schaub/)，其中有很多关于 TFSIP 的帖子。

[http://blogs.msdn.com/b/willy-peter_schaub/archive/2012/05/23/msdn-magazine-migrating-from-an-on-premise-tfs-to-tfs-preview-using-the- tfs 集成工具.aspx](http://blogs.msdn.com/b/willy-peter_schaub/archive/2012/05/23/msdn-magazine-migrating-from-an-on-premise-tfs-to-tfs-preview-using-the-tfs-integration-tools.aspx)

[http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/05/11/tfs-integration-tools-where-does-one-start-part-1.aspx](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/05/11/tfs-integration-tools-where-does-one-start-part-1.aspx)

# java - 使用 nsis 将 jar 复制到新文件夹

> ID：15494372
> 
> 赞同：0
> 
> 时间：2013-03-19T08:11:36.233
> 
> 标签：java, deployment, environment-variables, nsis

我使用以下脚本创建的设置将它包含的所有文件复制到一个文件夹中，我想`lib`在该文件夹中创建一个文件`Calculator`夹并将所有 jar 文件复制到 lib 文件夹中，以便我的应用程序可以找到我在类路径中指定的 jar . 以及如何使用 NSIS 设置环境变量。请帮忙，因为我是 NSIS 的新手。

```
; Name of our application
Name "Calculator"

; The file to write
OutFile "Calculatorv1.0_Setup.exe"

; Set the default Installation Directory
InstallDir "$PROGRAMFILES\Calculator"

; Set the text which prompts the user to enter the installation directory
DirText "Please choose a directory to which you'd like to install this application."

; ----------------------------------------------------------------------------------
; *************************** SECTION FOR INSTALLING *******************************
; ----------------------------------------------------------------------------------

Section "" ; A "useful" name is not needed as we are not installing separate components

; Set output path to the installation directory. Also sets the working
; directory for shortcuts
SetOutPath $INSTDIR\

File G:\IMS\dist\Calculator.exe
File G:\IMS\dist\lib\*.jar

File a.nsi

WriteUninstaller $INSTDIR\Uninstall.exe

; ///////////////// CREATE SHORT CUTS //////////////////////////////////////

CreateDirectory "$SMPROGRAMS\Calculator"

CreateShortCut "$SMPROGRAMS\Calculator\Run Calculator.lnk" "$SYSDIR\javaw.exe" "NSISExampleApplication1"

CreateShortCut "$SMPROGRAMS\Calculator\Uninstall Example Application 1.lnk" "$INSTDIR\Uninstall.exe"

; ///////////////// END CREATING SHORTCUTS //////////////////////////////////

; //////// CREATE REGISTRY KEYS FOR ADD/REMOVE PROGRAMS IN CONTROL PANEL /////////

WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Calculator" "DisplayName"\
"Calculator (remove only)"

WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Calculator" "UninstallString" \
"$INSTDIR\Uninstall.exe"

; //////////////////////// END CREATING REGISTRY KEYS ////////////////////////////

MessageBox MB_OK "Installation was successful."

SectionEnd

; ----------------------------------------------------------------------------------
; ************************** SECTION FOR UNINSTALLING ******************************
; ----------------------------------------------------------------------------------

Section "Uninstall"
; remove all the files and folders
Delete $INSTDIR\Uninstall.exe ; delete self
Delete $INSTDIR\Calculator.exe
Delete $INSTDIR\a.nsi

RMDir $INSTDIR

; now remove all the startmenu links
Delete "$SMPROGRAMS\Calculator\Run Calculator.lnk"
Delete "$SMPROGRAMS\Calculator\Uninstall Calculator.lnk"
RMDIR "$SMPROGRAMS\Calculator"

; Now delete registry keys
DeleteRegKey HKEY_LOCAL_MACHINE "SOFTWARE\Calculator"
DeleteRegKey HKEY_LOCAL_MACHINE "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Calculator"
SectionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:22:23.600

您可以通过使用`/r`标志递归地添加文件来做到这一点：

```
File /r "G:\IMS\dist\*" 
```

这将保留目录结构，并且 jar 将安装在`lib`子目录中。

# android - 上传文件时在 Webview 中更新进度条

> ID：15494373
> 
> 赞同：1
> 
> 时间：2013-03-19T08:11:37.187
> 
> 标签：android, file-upload, webview, progress-bar

我注意到在 Webview 中进行文件上传并使用进度条时，在文件上传发生时不会调用 onProgressChanged。

看起来 onProgressChanged 仅在 Webview 下载内容时被调用。我知道这可能是设计。

如何使用 Webview 跟踪文件上传的进度并使用某种进度条将其可视化？

我一直在尝试使用服务器进度条，但由于以下问题而无法使用 Webview：[https ://stackoverflow.com/questions/15474663/after-submit-form-updates-not-visible-in-webview -使用-innerhtml](https://stackoverflow.com/questions/15474663/after-submit-form-updates-not-visible-in-webview-using-innerhtml)

# c# - 创建和编辑后释放 Excel 文件

> ID：15494376
> 
> 赞同：1
> 
> 时间：2013-03-19T08:11:45.667
> 
> 标签：c#, .net, office-interop

我正在创建一个可以从数据库数据生成 Excel 文件的 Windows 窗体应用程序。将数据库填充到文件中后，我打开它并执行一个宏，保存文件然后关闭它（或者我认为我正在关闭它）。这些文件保存在我的硬盘上，但是当所有文件生成时，我必须能够生成一组新文件，因此我必须在生成新文件之前从我的硬盘中删除所有旧文件。在运行应用程序一次并尝试生成新的文件集后，我收到一条错误消息，指出其中一个文件（第一批中生成的最后一个文件）被另一个进程使用。

这是我的代码：

```
public void RemoveRows_Macro(string fileName)
{

    Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
    Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
    xlWorkBook = xlApp.Workbooks.Open(fileName);
    //xlApp.Visible = true;
    xlApp.DisplayAlerts = true;

    //Run the macro
    xlApp.Run("RemoveRows", Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

    xlWorkBook.Save();

    xlWorkBook.Close(false);
    xlApp.Quit();
    releaseObject(xlApp);
    releaseObject(xlWorkBook);
}

private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        obj = null;
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error in releasing object :" + ex);
        obj = null;
    }
    finally
    {
        GC.Collect();
    }
} 
```

由于应用程序没有释放文件，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:22:18.930

您可能希望首先释放对象，然后按照分配它们的相反顺序将它们设置为 null。

```
releaseObject(xlWorkBook);
releaseObject(xlApp);
xlWorkBook = null;
xlApp = null; 
```

我在进行 Excel 互操作时发现此链接是一个很好的资源 [如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects/4366693)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:19:19.853

```
 finally
{
    GC.Collect(); 
   GC.WaitForPendingFinalizers();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:16:02.313

我现在无法运行测试，但看起来您在将 xlApp 和 xlWorkBook 传递给 releaseObject 之前将它们设置为 null。之后可能还有其他原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:17:10.827

您首先将 xlApp 和 xlWorkBook 设置为 null，然后尝试释放它。尝试注释掉这两行：

```
xlApp = null;
xlWorkBook = null; 
```

这能解决问题吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-08T08:02:47.760

我遇到了同样的问题，但我解决了它。因此，在创建文件后，我将其关闭。

```
xlWorkbook.SaveAs("nameExcel");
xlWorkbook.Close(); 
```

# iphone - MFMailComposeViewController 电子邮件到 iphone 中的字段限制 40

> ID：15494377
> 
> 赞同：0
> 
> 时间：2013-03-19T08:11:56.047
> 
> 标签：iphone, ios, email, mfmailcomposeviewcontroller

我正在使用 MFMailComposeViewController 发送电子邮件。我的是通用应用程序，电子邮件的 toField 有 2 个邮件 ID。

(1) 每个电子邮件 ID 的长度约为 30 个字符。在 iPhone 中，我将其视为“+2 收件人”。（在 iPad 中能够可视化 toField 中的电子邮件 ID。）当我用 Google 搜索时，发现 toField 中有 40 个字符的文本限制。如何避免这个问题。

(2) 此外，如果我单击“+2 个收件人”，它会显示电子邮件 ID，但无法隐藏打开的键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:03:56.267

您无法控制这些类型的设置。这`MFMailComposeViewController`是一个适用于您的应用程序的即发即忘式电子邮件解决方案，它提供了您的用户熟悉的界面。

40 个字符的限制是指缩短之前的限制，您的电子邮件不会被截断。您将无法解除该限制。就是这样。如果您想创建自定义电子邮件表单，您将不得不构建自己的 IMAP 框架来配合它。

安全性是 iOS 的重中之重，因此，用户的电子邮件地址和内容等内容受到严密保护。

# android - 在 Android 中以编程方式在没有 FFMPEG 的情况下压缩视频

> ID：15494388
> 
> 赞同：5
> 
> 时间：2013-03-19T08:12:56.707
> 
> 标签：android, video, compression

是否可以使用标准函数以编程方式压缩视频，例如在 IOS AVAssetExportSession 中，而不是使用 FFMPEG

# meteor - metor刀片模板在for循环中抛出“同一分支中的第二个地标”异常

> ID：15494390
> 
> 赞同：5
> 
> 时间：2013-03-19T08:13:07.877
> 
> 标签：meteor, blade, meteorite, node-blade

我有一个 for 循环，我想在其中包含一个模板视图：

表刀片：

```
#game
    h1= table.name 
        -if( table.playerSitting() )
            a.btn.btn-danger.stand(href="#") Stand
    #table
        -for (var i=0; i<7;i++)
            include 'seat' exposing i 
```

座椅刀片：

```
- id = 'p' + (i+1)
    div(id="#{id}")
        -if (table.hasAt(i))
            p= table.usernameAt(i)
        -else
            -if( !table.playerSitting() )
                a.btn.btn-inverse.sit(href="#", data-key="#{i}") Sit
            -else
                p &nbsp; 
```

当我第一次加载视图时，一切都很好。但如果我坐着或站着，或去另一张桌子，我会得到：

```
Exception from Deps recompute: Error: Can't create second landmark in same branch
    at /home/thomporter/meteor/blackjack/views/table.blade:8:4

 6 |        #table
 7 |            -for (var i=0; i<7;i++)
 8 >                include 'seat' exposing i
 9 |    
10 | 
```

我想我可以通过创建一个存储用户 ID 和表 ID 的“座位”集合来解决这个问题，但这似乎很愚蠢。我目前正在使用名为“players”的表格的数组属性，每个座位的索引为 0-6……至少，这是我的想法。=)

我还应该提到我将 seat.blade 替换为：

```
p hi 
```

没有运气，同样的问题。

有任何想法吗？

**编辑**
版本信息：
Meteorite 版本 0.4.9
Meteor 版本 0.5.9 (git checkout)
Blade 3.0.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:43:27.447

这个错误实际上是使用普通 for 循环而不是`foreach`循环的结果。

> foreach 区域优于 ... [常规 for 循环] 不仅因为可读性和简洁性，还因为它还为 Blade 提供了更好地与实时页面更新引擎（特别是 Meteor 和 Spark）集成的能力。也就是说，如果实时页面更新引擎支持跟踪响应式集合，则可能会发生最有效的 DOM 操作来就地更新视图的结果，而无需重新渲染整个 Blade 模板。

在您的情况下，由于相同地标的匹配分支，Spark 无法重新呈现您包含的模板。如果你使用`foreach`，这个问题就解决了。

但是，在某些情况下（例如您的情况），`foreach`是不合适的。我认为这里的解决方案是在 Blade 中创建一个“常规 for 循环”语法来处理循环。因此，我创建了[问题 #157](https://github.com/bminer/node-blade/issues/157)。

# java - 图像加载器，无法连接到

> ID：15494391
> 
> 赞同：2
> 
> 时间：2013-03-19T08:13:08.850
> 
> 标签：java, android, universal-image-loader

这就是我所拥有的。

```
 ImageLoader imageLoader=ImageLoader.getInstance(); 
  imageLoader.init(ImageLoaderConfiguration.createDefault(mcontext));
  imageLoader.displayImage("http://sunflower-astronomy.com/KCKCC_Docs/LabImages/ngc4631.bmp",imageView) 
```

我在 Logcat 中收到以下错误消息。我的互联网连接正常。我听说您需要将 asynctask 用于 api 大于 11 的 web 连接。真的吗？这也适用于这里吗？

03-19 08:05:38.298: E/ImageLoader(5173): 5000ms 后无法连接到 www.sunflower-astronomy.com/69.72.240.50（端口 80）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:18:10.880

如果上面的代码在你的 UI 线程中运行，那么你应该使用 AsyncTask，否则你的 UI 将在获取图像时锁定。这不是你的问题的原因。

您的问题是您请求的文件很大，因此 ImageLoader 超时。

要增加超时，`.imageDownloader(new URLConnectionImageDownloader(5000, 30000)`请在 ImageLoaderConfiguration 上使用类似：

这将给它 5 秒的时间来建立连接，以及 30 秒的时间来下载它。

# jsp - 如何在jsp中模拟登录？

> ID：15494392
> 
> 赞同：0
> 
> 时间：2013-03-19T08:13:11.380
> 
> 标签：jsp, request

我想访问 billimage.jsp 页面，但它需要从 login.jsp 页面进行身份验证。我必须输入用户名和密码才能获得身份验证。

我应该怎么做才能让一些jsp模拟登录并重定向到billimage.jsp并自动登录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:17:26.300

1.  安装提琴手
2.  打开它，确保它嗅探 http[s] 流量
3.  进入登录页面，登录
4.  看看 fiddler 捕获了什么 -> 应该是一种带有参数的 POST 请求，如用户名、密码，也许还有一些，比如验证码，一些防伪令牌
5.  如果登录成功，响应包含 cookie，可能有重定向（浏览器使用该 cookie 告诉服务器您已经登录）
6.  以编程方式重复这些步骤
7.  利润！

# php - 如何通过单击取消按钮关闭窗口？

> ID：15494394
> 
> 赞同：0
> 
> 时间：2013-03-19T08:13:17.520
> 
> 标签：php, javascript, html

通过单击其他文件上的按钮，此 php 文件将作为弹出窗口打开。我在这个文件中包含了 2 个按钮，一个用于更新，另一个用于取消。如果用户单击更新数据将在数据库中更新。如果用户单击取消按钮，我想自动关闭窗口。但是发生的情况是，如果用户单击取消按钮，窗口正在关闭，但数据库中的数据正在更新。我应该怎么做才能关闭窗口而不更新数据库中的数据？我在这里先向您的帮助表示感谢。

```
 `<html>
     <head>

    <link rel="stylesheet" type="text/css" href="cms_style.css">    

 </head>

  <body>

  <?php

        $cid = $_GET['id'];
        $uid = $_GET['uid'];

    $con = mysql_connect("localhost", "root", "");
    mysql_select_db("abcd",$con);

    if($uid==1) {

        updateRecord($cid);

    } else if (isset($_GET['id']) ) {

        $ResumeID = $_GET['id']; 
        $sql="SELECT * from data WHERE ResumeID=$ResumeID";
        $result = mysql_query($sql);
        $Row=mysql_fetch_row($result); 

 ?> 
     <form align="center" action="update.php?id=<? echo "$Row[1]"?>&uid=1"
                          method="post">
    <table align="center">
        <input type="hidden" name="resumeid" value="<? echo "$Row[1]"?>">

    <? echo "<tr> <td> Resume ID </td><td>$Row[1]</td> </tr>" ?>                         

   <div align="center">
   <tr><td> Name of the Candidate</td>
  <td><input type="text" name="NameoftheCandidate" size="25" value="<? echo            
       "$Row[0]" ?>">   </td>
  </tr>

 <tr>
 <td>TelephoneNo</td>
      <td><input type="text" name="TelephoneNo" size="25" value="<? echo "$Row[2]"?     
      >">            

        </td>
     </tr>
    <tr>       
    <td>Email</td>
<td><input type="text" name="Email" size="25" value="<? echo "$Row[3]"?>">
    </td>

    <tr>
    <td></td>
<td align="center"><input type="submit" name="submitvalue" value="UPDATE" ></td>
<td align="center"><input type="submit" name="cancelvalue" value="CANCEL"         
     onClick="self.close()"></td>
    </tr>
    </div>                              
    </table>
    </form>

<?php
    } // end of else if

    function updateRecord($cid) {

          $sql="UPDATE data SET 
          NameoftheCandidate=\"$_POST[NameoftheCandidate]\",
         TelephoneNo='$_POST[TelephoneNo]',
          Email='$_POST[Email]' WHERE ResumeID=$_GET[id]";

        if(mysql_query($sql))
            echo "<p>Record updated Successfully</p>";
        else
            echo "<p>Record update failed</p>";

    } // end of update function

      ?>

     </body>
         </html>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:18:30.397

将 type="submit" 更改为 "button"

```
<td align="center">
<input type="submit" name="submitvalue" value="UPDATE" >
</td>
<td align="center">
<input type="button" name="cancelvalue" value="CANCEL" onClick="self.close()"> 
</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:15:45.747

`return false;`调用后尝试添加`self.close()`。或者，您可以替换`<input type="submit">`为`<input type="button">`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:18:31.350

像这样的东西可以工作。

```
<?php

if (!empty($_POST['cancelvalue'])){
exit();
}

?> 
```

按钮客户端不会停止脚本服务器端。

另外，您不能使用*isset*检查全局数组，如果传递了任何值，则数组将返回 true。您应该改用*空*。

# java - Android无法编辑部分路径

> ID：15494399
> 
> 赞同：1
> 
> 时间：2013-03-19T08:13:31.943
> 
> 标签：java, android, draw, erase

```
public class Drawing extends View {
private Paint mPaint, mBitmapPaint;
private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private int color, size, state;

private ArrayList<Path> paths = new ArrayList<Path>();
private ArrayList<Path> undonePaths = new ArrayList<Path>();
private ArrayList<Integer> colors = new ArrayList<Integer>();
private ArrayList<Integer> sizes = new ArrayList<Integer>();

public Drawing(Context c) {
    super(c);
}

public Drawing(Context c, int width, int height, int size, int color,
        int state) {
    super(c);

    mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);

    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    mBitmapPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));

    setColor(color);
    setSize(size);
    setState(state);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    if (state == 0) {
        canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        mPaint.setColor(Color.TRANSPARENT);
    } else {
        for (int i = 0; i < paths.size(); i++) {
            mPaint.setColor(colors.get(i));
            mPaint.setStrokeWidth(sizes.get(i));
            canvas.drawPath(paths.get(i), mPaint);
        }

        mPaint.setColor(color);
        mPaint.setStrokeWidth(size);
    }
    canvas.drawPath(mPath, mPaint);

}

public void setColor(int color) {
    this.color = color;
}

public void setSize(int size) {
    this.size = size;
}

public void setState(int state) {
    this.state = state;
    if (state == 0)
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    else
        mPaint.setXfermode(null);
}

public void onClickUndo() {
    if (paths.size() > 0) {
        undonePaths.add(paths.remove(paths.size() - 1));
        sizes.remove(sizes.size() - 1);
        colors.remove(colors.size() - 1);
        invalidate();
    }
}

private void touch_start(float x, float y) {
    undonePaths.clear();
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    mCanvas.drawPath(mPath, mPaint);

    if (state == 0)
        colors.add(Color.TRANSPARENT);
    else
        colors.add(color);
    sizes.add(size);
    paths.add(mPath);
    mPath = new Path();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
}
} 
```

例如，我的第一条路径是黑色。然后我更改为橡皮擦模式并包裹路径的中间部分。之后，我切换回绘图。正确的是以前的路径会改变，但被删除的部分正在恢复。这意味着我无法编辑路径。

还有其他方法可以实现这一目标吗？

# java - JBoss 中的数据源没有选择正确的类

> ID：15494400
> 
> 赞同：3
> 
> 时间：2013-03-19T08:13:32.097
> 
> 标签：java, jboss, jboss6.x

我在使用 JBoss EAP 6.0 时遇到了一个非常奇怪的问题

问题基本上我已经配置好了，standalone.xml中的一个数据源

```
 <datasource jndi-name="java:jboss/jdbc/ejb/testconn" pool-name="test-cluster-Pool" enabled="true" use-java-context="true">
                <connection-url>jdbc:sqlserver://127.0.0.1:1433;databaseName=testdb;</connection-url>
                <driver>sqlserver-jdbc</driver>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>sa</user-name>
                    <password>sa</password>
                </security>
                <statement>
                    <prepared-statement-cache-size>32</prepared-statement-cache-size>
                    <share-prepared-statements>true</share-prepared-statements>
                </statement>
            </datasource> 
```

这是驱动的配置，我安装的和一个模块一样：

```
 <drivers>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
                <driver name="sqlserver-jdbc" module="com.himanshu.jdbc">
                    <datasource-class>com.himanshu.jdbcdriver.datasource.DataSource</datasource-class>
                </driver>
            </drivers> 
```

com.himanshu.jdbcdriver.datasource.DataSource 类基本上扩展了 com.microsoft.sqlserver.jdbc.SQLServerDataSource：

但是当我运行测试时，我可以得出结论，它没有使用我提到的数据源类。因为对于这两种方法，

```
@Override
public Connection getConnection() throws SQLServerException {
    System.out.println("TRYING TO GET CONNECTION");
    return null;
}

@Override
public Connection getConnection(String arg0, String arg1)
        throws SQLServerException {
    System.out.println("TRYING TO GET CONNECTION");
    return null;
} 
```

所以理想情况下，连接应该返回null，但连接既没有返回为null，也没有打印这些SOP，所以无法理解我实际上错在哪里。

module.xml 是这样的：

```
<module xmlns="urn:jboss:module:1.1" name="com.himanshu.jdbc">

<resources>
    <resource-root path="custom-datasource-jar-with-dependencies.jar"/>
</resources>
<dependencies>
    <module name="javax.api"/>
    <module name="javax.transaction.api"/>
    <module name="javax.servlet.api" optional="true"/>
</dependencies>
</module> 
```

更新：

原来是 JBOSS 中的一个错误： [https ://issues.jboss.org/browse/JBJCA-1014](https://issues.jboss.org/browse/JBJCA-1014)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:46:51.057

Jboss通过自己的方式实例化数据源，使用的类加载器不知道您的应用程序类，这就是为什么在配置驱动程序时需要在jboss模块目录中提供驱动程序实现。
因此，您的类对 jboss 不可见，并且在加载数据源时无法使用它。除非您将其添加到位于 jboss 模块目录中的特定 jar 中

请参阅[http://magnus-k-karlsson.blogspot.fr/2012/08/how-to-install-mysql-datasource-on.html](http://magnus-k-karlsson.blogspot.fr/2012/08/how-to-install-mysql-datasource-on.html)。从 jboss 中的模块配置数据源。关心命名。

# javascript - 如何在 Jasmine node.js 中测试事件？

> ID：15494402
> 
> 赞同：2
> 
> 时间：2013-03-19T08:13:38.927
> 
> 标签：javascript, node.js, events, jasmine

我正在编写一个使用串行端口通信的节点模块。使用 write() 调用所有传出消息，并且所有传入消息都会引发事件。

我希望能够测试传入的消息。当调用 write 时，传入消息需要很短的时间（在良好条件下不到 1/10 秒）。

片段：

```
it("can receive", function() {
    btReader.on('dataReceived', function(data){
        console.log(data);
        expect(data).toBeDefined();
    });
}); 
```

这样它只会制作事件处理程序，但会在引发任何事件之前完成完整的测试。然后，当引发事件时，代码将执行，但不会真正进行测试。

我是否必须使用 waitsFor 方法，然后在事件处理程序中将 bool 设置为 true？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:05:44.733

由于您的事件是异步的，是的，您将需要使用该`waitsFor`方法来测试处理程序是否已被调用。你完全正确，你需要创建一个变量来测试。所以你最终得到的是[测试](http://pivotal.github.com/jasmine/#section-Asynchronous_Support)的 3 个部分：

1.  初始设置和事件调用（即`write`和一些变量设置为假）。
2.  `waitsFor`变量设置为 true的方法。
3.  确保变量已设置为 true 的最终期望测试。

该`waitsFor`方法需要一个超时参数，因此如果运行您的函数需要 200 毫秒，那么请给超时一个合理的值，以确保它永远不会意外失败。当然，您不必像上面那样进行简单的测试，您可以将变量设置为 write 方法所做的任何事情，并确保它已经完成了它应该做的事情。

# android - 中间件代号一和移动应用程序

> ID：15494403
> 
> 赞同：-3
> 
> 时间：2013-03-19T08:13:50.320
> 
> 标签：android, mobile, cross-platform, middleware, codenameone

我想问一下中间件代号一：它到底是什么？在开发移动应用程序（Android 或 iPhone）时，使用它有什么优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:39:53.170

仅供参考免责声明：我是 Codename One 的联合创始人。

这个答案可能会帮助您了解代号一的内部原理：[代号一的工作原理是什么？](https://stackoverflow.com/questions/10639766/how-codename-one-works)

一般来说，[代号一是](http://www.codenameone.com/)几件事：

1.  开发人员 API 抽象了 GUI、文件系统、网络等方面的平台差异。

2.  一组与 IDE 插件（GUI 构建器、设备模拟器等）集成的开发工具。

3.  将字节码转换为原生应用程序的云构建服务器和可选的运行时云，允许您使用推送、云存储等功能。

优点很简单：只需编写一次应用程序，就可以使用非常标准的 Java 工具：Eclipse/NetBeans 来处理所有事情。您不需要 Mac 来构建 iOS，也不需要 Windows 机器来构建 Windows Phone/RIM。该平台庞大而全面。

缺点是：

1.  不适合复杂的游戏，例如fps等。该框架从一开始就被设计为应用程序框架，相关工具也是如此。

2.  虽然可以在没有云构建服务器的情况下进行构建，但它并非微不足道，并且消除了该平台的许多优势（您将需要 Mac 等）。所以你需要云构建服务器，然后你有一个每月的构建配额，以获得更多你需要支付的构建。

3.  不支持设备的某些功能。如果您需要的东西不存在，您可以访问本机代码，但显然这并不理想。

# javascript - Coffeescript - 方法链与函数参数 [2] 或使用函数而不是参数

> ID：15494410
> 
> 赞同：1
> 
> 时间：2013-03-19T08:13:59.413
> 
> 标签：javascript, syntax, coffeescript

我最近开始学习CoffeeScript，我遇到了这样的问题。我想写javascript：

```
TemplateManager.tmpl(this.template, this.modelJSON(), this.templateOptions()).done(
        function(rendered) { // something1
}).fail(function(ex) {
    // something2

}); 
```

我可以通过什么方式得到它？我尝试重写：

```
TemplateManager.tmpl @template, @modelJSON(), @templateOptions()
    .done (rendered) ->
       #something1
    .fail (ex) ->
       #something2 
```

我得到：

```
TemplateManager.tmpl(this.template, this.modelJSON(), this.templateOptions().done(function(rendered) {

  }).fail(function(ex) {

  })); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:24:01.870

`tmpl`为和`done`方法添加括号

```
TemplateManager.tmpl( @template, @modelJSON(), @templateOptions() )
   .done( (rendered) -> 
        #something1 
    )
   .fail (ex) ->
        #something2 
```

解决方案并不优雅，我认为其他人可能会在咖啡脚本中提供更好的方法

**更新**

基于评论，删除括号`done`。我已经更新了代码，我认为这个很优雅

```
TemplateManager
   .tmpl(@template, @modelJSON(), @templateOptions())
   .done (rendered) -> 
        some
        code
        here 

   .fail (ex) ->
        another
        code
        here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:36:24.480

不要把“我不使用括号，因为它们是可选的”和棘手的难以理解的缩进弄得一团糟，而是把东西分成小块，给这些块命名，然后简单地把它们放在一起：

```
done = (rendered) ->
    # something1
fail = (ex) ->
    # something2
TemplateManager.tmpl(@template, @modelJSON(), @templateOptions())
    .done(done)
    .fail(fail) 
```

我不知道“something1”和“something2”是什么，所以我不能给他们合适的合理名称，考虑`done`并`fail`作为概念名称的证明。

仅仅因为一个函数可以是匿名的并不意味着它必须是匿名的，仅仅因为一些括号是可选的并不意味着它们必须被省略。

# validation - 不应出现 Flex 验证“此字段不是必需的”

> ID：15494414
> 
> 赞同：0
> 
> 时间：2013-03-19T08:14:27.193
> 
> 标签：validation, flex4

我已向数据网格添加了验证。验证工作正常，但我得到了额外的验证“此字段是必需的”。我不想要这个验证错误。我已经在使用带有自定义错误的标签 requiredFiedError 。使用的代码示例是：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T21:04:13.597

设置 required="false" 这是显示该消息的属性。或者，您可以将 errorString 属性设置为空字符串。

# objective-c - 如何在 xcode 4.6 中使用 doxygen？

> ID：15494415
> 
> 赞同：0
> 
> 时间：2013-03-19T08:14:27.147
> 
> 标签：objective-c

我尝试在 Xcode 4.6 中使用 doxygen 来记录用目标 c 编写的源代码，并遵循以下链接：

[链接1](http://www.doxygen.nl/) ,[链接2](http://www.youtube.com/watch?v=htFKHP4xdTs)

但这些链接处理较旧的 xcode 版本。请帮助我在 xcode 4.6（最新）中使用 doxygen。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:23:04.157

我使用外部构建系统目标。在信息选项卡中，将工具设置为

```
/Applications/Doxygen.app/Contents/Resources/doxygen 
```

（或者你安装了 Doxygen 的任何地方）

和论据

```
Doxyfile 
```

或者您放置配置文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:35:14.087

我建议您为 Apple 环境使用更好的 Doxygen 替代方案：[Appledoc](http://gentlebytes.com/appledoc/)

# android - 在 TAB 中显示 ListViews 的问题

> ID：15494416
> 
> 赞同：1
> 
> 时间：2013-03-19T08:14:27.860
> 
> 标签：android, android-layout, android-listview, android-fragments

从第一个选项卡切换到第二个选项卡后出现主要问题。在两个选项卡中应该是不同的 ListViews，但出现此[问题](http://s018.radikal.ru/i528/1303/0d/8eeb9e964cab.jpg)我的活动代码是：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabFirst = actionBar.newTab().setText("First");
        ActionBar.Tab tabSecond = actionBar.newTab().setText("Second");

        tabFirst.setTabListener(new tabListener());
        tabSecond.setTabListener(new tabListener());

        actionBar.addTab(tabFirst);
        actionBar.addTab(tabSecond);

        }

    protected class tabListener implements ActionBar.TabListener {

        ParkFragment firstFragment;
        ParkFragment secondFragment;

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            switch (tab.getPosition()){
            case 0:
                if (firstFragment == null){
                    firstFragment = new ParkFragment("Here is first url");
                    ft.add(R.id.parkfragment, firstFragment,"FIRST");
                }
                else{
                    ft.attach(firstFragment);
                }
                break;

            case 1:
                if (secondFragment == null){
                    secondFragment = new ParkFragment("here is the second one");
                    ft.add(R.id.parkfragment, secondFragment, "SECOND");
                }
                else{
                    ft.attach(secondFragment);
                }
                break;
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    };

    public class ParkFragment extends ListFragment {
        private ArrayList<Cinemas> cinema;
        private CinemasAdapter cinemaAdapter;
        private View v;
        private String url;

        public ParkFragment (String cinema){
            url = cinema;
        }

          public void onCreate(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            cinema = new Handler().handle(url); 
            cinemaAdapter = new CinemasAdapter(MainActivity.this, R.layout.movie_data_row, cinema);
            setListAdapter(cinemaAdapter);

          }
        } 
```

这是容器 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/parkfragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

感谢您的阅读，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:23:22.670

```
 /** Detaches the androidfragment if exists */

                if(secondFragment !=null)
                    ft.detach(secondFragment );

                /** Detaches the applefragment if exists */
                if(firstFragment !=null)
                    ft.detach(firstFragment ); 
```

使用这个分离片段 [看这个](http://wptrafficanalyzer.in/blog/creating-navigation-tabs-using-tabhost-and-fragments-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:21:18.487

您需要添加/附加隐藏另一个片段的片段。

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
        switch (tab.getPosition()){
        case 0:
            if (firstFragment == null){
                firstFragment = new ParkFragment("Here is first url");
                ft.add(R.id.parkfragment, firstFragment,"FIRST");
            }
            else{
                ft.attach(firstFragment);
            }
            if (secondFragment != null)
                ft.hide(secondFragment);
            break;

        case 1:
            if (secondFragment == null){
                secondFragment = new ParkFragment("here is the second one");
                ft.add(R.id.parkfragment, secondFragment, "SECOND");
            }
            else{
                ft.attach(secondFragment);
            }
            if (firstFragment != null)
                ft.hide(firstFragment);
            break;
        }
    } 
```

# django - django {{ STATIC_URL }} 有时不起作用

> ID：15494421
> 
> 赞同：4
> 
> 时间：2013-03-19T08:15:06.573
> 
> 标签：django, configuration, django-staticfiles

可怜的 django 初学者在某些视图上访问静态文件（css、js）时遇到了阻塞问题。主要是，在主页上，这些静态文件是完全可以访问的，但在不同的页面上，它却没有，而且布局完全被破坏了。

这是我的settings.py：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'bands',
    'lyrics',
    'articles',
)
PROJECT_DIR = os.path.dirname(__file__)
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, "static"),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

这是我的视图扩展的基本通用模板的一部分：

```
<link rel="Shortcut icon" href="{{ STATIC_URL }}img/favicon32.png" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/sortable.js"></script> 
```

渲染时，它返回这样的代码（这就是我想要的）：

```
<link rel="Shortcut icon" href="/static/img/favicon32.png" />
<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="/static/js/sortable.js"></script> 
```

这是主页视图的代码（静态文件工作的那个）：

```
def slider(request):
    context = Context ({ 'articles': Article.objects.order_by('-created_at')[:5] })
    return render(request, 'articles/slider.html', context) 
```

这是不访问静态文件的视图（它使用 django 文档上的分页示例）：

```
def archive(request, page="1"):
    articles_list = Article.objects.all().filter(active=True)
    paginator = Paginator(articles_list, 6)
    try:
        articles = paginator.page(page)
    except PageNotAnInteger:
        articles = paginator.page(1)
    except EmptyPage:
        articles = paginator.page(paginator.num_pages)
    context = Context({
        'articles': articles
    })
    return render_to_response('articles/archive.html', context) 
```

如果有人猜出什么可能是错的，请告诉我。

当前项目的代码可作为[github repo](https://github.com/tkoomzaaskz/djninja)获得。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:20:31.417

您必须使用[`RequestContext`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)：

```
from django.template import RequestContext

def archive(request, page="1"):
    # ...
    return render_to_response('articles/archive.html',
                              context,
                              context_instance=RequestContext(request)) 
```

或者使用[`render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render)快捷方式，就像`render_to_response`，但使用`RequestContext`：

```
from django.shortcuts import render

def archive(request, page="1"):
    # ...
    return render('articles/archive.html', context) 
```

请注意您`render`在`slider`视图中使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-22T02:11:50.910

[1] 将您的目录名称添加到静态目录所在的 INSTALLED_APPS 中。

[2] 在你的 html 模板中加载静态

[1] 例如[我在TestAPP中有静态] [查看此链接]：[https ://i.stack.imgur.com/zHEck.png](https://i.stack.imgur.com/zHEck.png)

[2] 然后[在您的 HTML 模板中加载静态文件，如下所示]：[https ://i.stack.imgur.com/vPkFb.png](https://i.stack.imgur.com/vPkFb.png)

# collections - 集合从所有子文件夹生成到一个

> ID：15494422
> 
> 赞同：0
> 
> 时间：2013-03-19T08:15:11.457
> 
> 标签：collections, docpad

如何创建要从所有子文件夹中生成的集合。

例如：

```
/src/article/2011/
            /2012/
            /2013/ 
```

=>

```
/out/article/ 
```

子文件夹的通常方式不采取：

```
posts: (database) ->
    database.findAll({relativeOutDirPath:'posts'},[date:-1]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:48:48.080

要获取文章目录的子目录中的所有文档，例如`/article/2011/post.html`，您可以使用：

`insideSubfolder: (database) -> database.findAll({relativeOutDirPath:/article[\/\\]\w+/},[date:-1])`

如果您还想接受文章中的文档，例如`/article/index.html`，您可以使用：

`insideSubfolder: (database) -> database.findAll({relativeOutDirPath:/article/},[date:-1])`

如果您想说`src/documents/article/2011/post.html`要输出，`out/article/post.html`请在评论中说出来，我会弄清楚需要什么。谢谢。

# javascript - 试图在 javascript 中运行一个简单的初学者函数，但没有正确返回

> ID：15494425
> 
> 赞同：1
> 
> 时间：2013-03-19T08:15:28.220
> 
> 标签：javascript, function, console

这是我写的代码；

```
var nameString = function(name) {
    console.log ("Hi, I am" + " " + name);

};
nameString("Bobby"); 
```

我试图让它返回一行说明；嗨，我是鲍比

相反，它返回三个：

> 嗨，我是鲍比
> 嗨，我是
> 嗨，我是鲍比

我无法弄清楚为什么它会返回三遍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:26:33.083

Codecademy 出于某些原因运行该功能 3 次，主要是为了检测东西并提示您正确的代码......每次在控制台中输出一些东西，因为您输入`console.log`. 改为使用`return`它会起作用。

```
var nameString = function(name) {
    return "Hi, I am" + " " + name;

};
console.log(nameString("Bobby")); 
```

不要在 codecademy 功能中使用控制台，它需要在通话中..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:18:35.537

这本身只是一次呈现结果。也许它嵌套在一些确保三个执行周期的代码中......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:19:43.560

嗯，这是我第一次看到像你这样的函数（我不是说它不好，我不是 JavaScript 专家）......

试试看：

```
function getNameString(name) {
  return "Hi, I am" + " " + name;
};
var nameString = getNameString("Bobby");
console.log(nameString); 
```

我认为您的问题是您试图将函数的返回值作为变量的值。但实际上，您的函数不会返回任何值。因此，也许它导致了您告诉我们的这种罕见行为……其他方法与您的方法更相似：

```
var nameString = function(name) {
  return "Hi, I am" + " " + name;
};
nameString("Bobby");
console.log(nameString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-31T07:04:14.410

用它：

```
var nameString = function(name) {
     return "Hi, I am" + " " + name;
};

var theName = prompt("What is your name?");
var result = nameString(theName);
console.log(result); 
```

# asp.net - 如何在 asp.net webforms 中启动一个新的长时间线程？

> ID：15494426
> 
> 赞同：0
> 
> 时间：2013-03-19T08:15:40.487
> 
> 标签：asp.net

我们有一个排名表方法，需要 5 个小程序才能完成。

我们将列表缓存在 memcache 中，但是当缓存过期时，它会阻塞所有请求。

所以我想把列表和缓存时间都缓存在memcache中，并设置一个较长的过期时间。

每次从 memcache 中获取列表，程序也会检查缓存时间，如果超过 1 小时，程序启动一个新线程重新生成排名列表，程序立即返回旧列表，

因此，程序中没有阻塞。

问题是，在 asp.net 中开始一个新的步骤是否正确？如果新线程在aspx线程响应结束时被杀死？

以及如何解决传播缓存锁？？？我们使用 3 个 iis 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:28:06.370

您可以`App_Start`在 Global.asax 中使用来获取与请求无关的线程，但您应该知道它仍然有限制（例如，工作池可能会在一段时间后终止它）。

在这里查看更多信息：[http ://www.informit.com/articles/article.aspx?p=25722&seqNum=8](http://www.informit.com/articles/article.aspx?p=25722&seqNum=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:29:05.847

您必须首先增加应​​用程序的超时时间，您可以在配置文件中设置。为了不断开

```
<system.web>
     <sessionState timeout="60"></sessionState>
</system.web> 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.sessionstate.httpsessionstate.timeout (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.sessionstate.httpsessionstate.timeout(v=vs.80).aspx)

对于缓存，您可以使用不同的持久缓存系统：会话、缓存或应用程序

如果您使用`Cache`，您可以设置 TimeSpan 的持久时间

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.caching.cache.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:37:34.697

我认为你应该使用http-handler。
[http://msdn.microsoft.com/en-us/library/ms228090%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms228090%28v=vs.100%29.aspx)
它作为一个线程工作，您可以在那里访问任何东西`session`等`cache`。
为此，您必须使用`IRequiresSessionState`
[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)

您可以从任何地方调用它。
从`code behind`或从`jquery`

# codeigniter - codeigniter - 在会话中存储发布数据并在视图中显示

> ID：15494429
> 
> 赞同：1
> 
> 时间：2013-03-19T08:15:48.447
> 
> 标签：codeigniter, session, variables, post

我有一个用户填充的 codeigniter 表单。在提交时，输入被发布到一个数组中。这个数组然后显示在作为变量加载的新视图上。

我的问题是，如果我出于某种原因刷新视图，这些帖子就会丢失，并且新视图无法显示变量。

如何将发布的数组存储为会话值，然后如何访问会话变量。

所以我的控制器是：

```
function new_blank_order_lines() 
  {
    $data = array(
    'customer' =>$this->input->post('customer'),
    'period' =>$this->input->post('period'),
    'buom' =>$this->input->post('buom')
       );

    $this->load->view('sales/new_blank_order_lines',$data);
  } 
```

在`new_blank_order_lines`我可以显示变量`echo $customer`

现在，如果我刷新视图`new_blank_order_lines`，视图会重新加载，并且 post 变量会丢失。所以我想将 $data 数组存储为一个会话，这样即使在页面重新加载/刷新后它也可用。

有什么建议吗？

我在想类似的事情：

```
 function new_blank_order_lines() 
      {
        $data = array(
        'customer' =>$this->input->post('customer'),
        'period' =>$this->input->post('period'),
        'buom' =>$this->input->post('buom')
           );

        $this->session->$data

        $this->load->view('sales/new_blank_order_lines',$data);
      } 
```

这显然行不通？如果它确实有效，我如何回显变量的值？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:38:33.197

您如何处理用户提交给表单的信息？它没有保存到数据库或类似的吗？如果是这种情况，那么为什么不从那里检索数据呢？

如果您只是想暂时查看数据，您可以使用上一个示例中的会话变量，但需要进行一些修改：

```
function new_blank_order_lines() 
  {
    $data = array(
    'customer' =>$this->input->post('customer'),
    'period' =>$this->input->post('period'),
    'buom' =>$this->input->post('buom')
       );

    $this->session->set_userdata($data);

    $this->load->view('sales/new_blank_order_lines',$this->session->all_userdata());
  } 
```

[请参阅用户指南](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T09:41:10.983

```
$projectID = $this->input->post('projectID');
if($projectID!=''){
    $this->session->set_userdata('projectID', $projectID);
} 
```

重新加载时发布数据不会过期使用此代码

# image - 当我有完整路径时使用 wget 获取图像

> ID：15494431
> 
> 赞同：0
> 
> 时间：2013-03-19T08:15:51.877
> 
> 标签：image, bash, wget

我正在尝试使用 wget 每小时获取一张图像。我有完整的路径，但我无法让它工作。这是代码

```
DATE="date +%s"
TIMESTAMP=`$DATE`
cd /path_to/photofolder/
wget http://path_to_image/jpg/image.jpg
mv image.jpg image1.jpg
FILENAME="$TIMESTAMP.jpg"
cp image1.jpg $FILENAME 
```

# paypal - 使用贝宝详细信息付款，无需重定向到贝宝网站

> ID：15494439
> 
> 赞同：2
> 
> 时间：2013-03-19T08:16:32.467
> 
> 标签：paypal, payment

我可以使用 paypal id 和密码使用 paypal 详细信息进行付款，而无需重定向到 paypal 网站吗？我想在不离开我的网站的情况下完成所有付款流程。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:26:49.813

您可以使用[PayFlow](https://www.paypal.com/webapps/mpp/payflow-payment-gateway)，但重定向到 paypal 的目的是确保付款安全，不这样做可能会让您的客户失望，您必须将时间集中在锁定付款页面上。

1.  [支付流程概览](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/howto_gateway_payflowpro)
2.  [完整的支付流开发者指南](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_guide.pdf)。

# asp.net-mvc - 在客户端进行流畅的验证

> ID：15494440
> 
> 赞同：10
> 
> 时间：2013-03-19T08:16:38.453
> 
> 标签：asp.net-mvc, client-side-validation, fluentvalidation

在 ASP.NET MVC4 应用程序中，我们使用 FluentValidation 来验证我们的模型。在某些情况下，我们只想在另一个属性有值时验证一个属性。我们使用 When 关键字来完成此操作。一个简单的验证类如下所示：

```
public class PersonValidator : AbstractValidator<Person>
{
    public PersonValidator()
    {
        RuleFor(item => item.FirstName).NotEmpty();
        RuleFor(item => item.LastName).NotEmpty().When(item => !string.IsNullOrEmpty(item.FirstName))
    }
} 
```

我们希望对此进行客户端验证。我试图创建一个自定义 FluentValidationPropertyValidator。但我找不到一种方法来获取验证规则的 When 部分。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T21:17:16.273

FluentValidation 中的一些验证不支持客户端验证：

从文档（[http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)）：

> 请注意，FluentValidation 也适用于 ASP.NET MVC 的客户端验证，但并非所有规则都受支持。例如，使用条件（使用 When/Unless）、自定义验证器或对 Must 的调用定义的任何规则都不会在客户端运行。客户端支持以下验证器：
> 
> *NotNull/NotEmpty *Matches (regex) *InclusiveBetween (range) *CreditCard *Email *EqualTo (cross-property相等比较) *Length

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-15T02:02:53.027

Fluent Validation 是一个**服务器端**验证库。但它支持一些基本的客户端验证，如 required、maxlength 等。

如果您想为 Fluent Validation 添加完整的客户端支持，您可以使用[**Form Helper**](https://github.com/sinanbozkus/FormHelper)。

您需要像这样创建表单：

```
var formConfig = new FormConfig(ViewContext)
{
    FormId = "ProductForm",
    FormTitle = "New Product",
    BeforeSubmit = "ProductFormBeforeSubmit", // optional
    Callback = "ProductFormCallback" // optional,
};

// <form id="@formConfig.FormId" asp-controller="Home" asp-action="Save"
// ...

@await Html.RenderFormScript(formConfig) 
```

之后，您需要将**[FormValidator]**属性添加到您的操作中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T16:48:30.843

FluentValidation 现在支持客户端验证。客户端支持以下验证器：

*   非空/非空
*   匹配（正则表达式）
*   InclusiveBetween（范围）
*   信用卡
*   电子邮件
*   EqualTo（跨属性相等比较）
*   最长长度
*   最小长度
*   长度

[https://fluentvalidation.net/aspnet](https://fluentvalidation.net/aspnet)

# php - exec 是否按顺序运行导致 500 内部服务器错误？

> ID：15494442
> 
> 赞同：0
> 
> 时间：2013-03-19T08:17:09.220
> 
> 标签：php, system, exec

```
exec("convert -density 40 -colorspace srgb ".$incoming_path.DIRECTORY_SEPARATOR.$incomingPdf." -quality 80 ".$gen_folder_path.'med'.DIRECTORY_SEPARATOR.$incomingBaseName.".jpg");

        checkSuccess($incomingBaseName.'.jpg',$gen_folder_path.'med'.DIRECTORY_SEPARATOR,'med');

exec("convert -density 15 -colorspace srgb ".$incoming_path.DIRECTORY_SEPARATOR.$incomingPdf." -quality 80 ".$gen_folder_path.'thumb'.DIRECTORY_SEPARATOR.$incomingBaseName.".jpg");

        checkSuccess($incomingBaseName.'.jpg',$gen_folder_path.'thumb'.DIRECTORY_SEPARATOR,'thumb'); 
```

上面的代码是用php运行这两个命令，问题是，第一个exec运行的时候，会不会直接去checkSuccess()，然后去下一个exec()？两个exec会不会冲突？由于程序有时会遇到500 internal server error。我想知道这是不是这个原因？

另外，如果我添加一个 sleep() 例如。30秒，这是一个好的解决方案吗？谢谢。

# android - HTML5 标签在 Android Webview 中不起作用

> ID：15494444
> 
> 赞同：6
> 
> 时间：2013-03-19T08:17:17.493
> 
> 标签：android, html, webview, html5-audio

如果源文件存储在本地，HTML5 音频标签似乎在 Web 视图中不起作用。IE

```
<audio controls="controls">
   <source src="my_local_audio_file.mp3" type="audio/mpeg" />
</audio> 
```

它在从服务器访问文件时起作用，例如`src="http://example.com/audio.mp3"`

我正在 Android ICS 上尝试它。

[如here](http://code.google.com/p/android/issues/detail?id=41995)所述，有一些解决方法。但我不明白为什么会出现这个问题。

关于为什么会发生这种情况的任何解决方案或见解？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:48:32.520

这只是实现从 html 文件播放音频的目标的替代方式

使用Android 的Mediaplayer ( [http://developer.android.com/reference/android/media/MediaPlayer.html ) 播放音频。](http://developer.android.com/reference/android/media/MediaPlayer.html)您可以从您在 HTML 文件中编写的 javascript 调用 android 的功能..

这是如何从 javascript 代码调用用 java 文件编写的函数的示例

```
WebView webView = (WebView) findViewById(R.id.webview);
webView.addJavascriptInterface(new WebAppInterface(this), "Android");
--------------------------------
public class WebAppInterface {

    Context mContext;
    /** Instantiate the interface and set the context */
    WebAppInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
}

---------------------------
java sript code

<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script> 
```

**这样您就可以从 Android 代码中调用音频。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T07:21:03.530

这似乎是 webview 中的一个非常愚蠢的错误。当前的一种解决方法是将音频“编码”为 mp4 文件，然后通过视频标签链接它。

```
<video width="100%" height="48" controls>
     <source src="audioonly.mp4" type="video/mp4">
</video> 
```

这将显示一个黑色矩形（无视频）以及里面的控件。到目前为止，这不是最好的解决方案，而是最简单的解决方案。您可以在 Mac 和 Windows 上使用 Miro Video Converter 来创建这样的 mp4。

祝你好运 ：）

# c# - WSDL 生成的代理类

> ID：15494445
> 
> 赞同：0
> 
> 时间：2013-03-19T08:17:18.117
> 
> 标签：c#, web-services, wsdl, alfresco

我对为 Web 服务生成的代理类有疑问。基本上我已经尝试向我的解决方案添加一个 Web 服务引用，但我不能因为缺少 discorvery 文件，所以我做了很多人在互联网上说的那样，通过使用 WSDL 生成代理类，然后将其实例化用它。

所以基本上我有一个很好的代理类，但是我如何使用它，当然我可以实例化它并调用方法但是它现在如何连接到互联网上某些服务器上的实际 Web 服务？

如果您查看 wsdl 文件，您会发现例如：

```
 <wsdl:service name="AuthenticationService">
  <wsdl:documentation>Provides simple authentication capability.</wsdl:documentation> 
   <wsdl:port binding="auth:AuthenticationServiceSoapBinding" name="AuthenticationService">
  <wsdlsoap:address location="http://localhost:8080/alfresco/api/AuthenticationService" /> 
  </wsdl:port>
  </wsdl:service> 
```

它重定向到所请求的网络服务器等的本地主机等......

但是当在我的课堂上，我将它作为带有'localhost' url 的构造函数，但是 Web 服务正在其他服务器上运行，所以是的，我无法连接是正常的。

```
public AuthenticationService() {
    this.Url = "http://localhost:8080/alfresco/api/AuthenticationService";
 } 
```

但是我现在如何正确使用它呢？

我应该将此网址设置为 wsdl 文件的原始网址吗？类似的东西：`http://internetserver:8080/alfresco/api/AuthenticationService.wsdl`？这样做会返回我的 wsdl 文件，但不会返回结果，我会收到错误。尝试其他东西我得到 404 结果....

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:42:01.473

如果您希望能够连接到在另一台服务器上运行的服务，那么您需要将 URL 行为更改为动态 - 请参阅这篇文章：

[http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic)

这将允许您通过更改配置文件来引用在不同 URL 上运行的相同 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:51:52.687

我的经验有限，但我为 Apple 的 GSX 服务添加了一次 Web 服务参考。它在我的 web.config 中添加了以下内容，我假设这是客户端对象的连接方式：

```
<client>
  <endpoint address="https://gsxws2.apple.com/gsx-ws/services/emea/iphone" binding="basicHttpBinding" bindingConfiguration="GsxWSEmeaIPhoneBinding" contract="AppleGSX.GsxWSEmeaIPhonePort" name="GsxWSEmeaIPhonePort"/>
</client> 
```

# c# - 我可以使用 C# WinForm 模仿这个选项对话框窗口吗？

> ID：15494451
> 
> 赞同：4
> 
> 时间：2013-03-19T08:17:52.173
> 
> 标签：c#, .net, winforms

![在此处输入图像描述](../Images/24daebca53fc5f8bcfcb948100c56e7a.png)

这是 Outlook 2010 中选项对话框窗口的样子。我想知道如何使用 C# WinForm 控件创建类似的选项窗口。

乍一看，我认为它有点像`TabControl`。但`TabControl`似乎不提供左/右面板布局。

然后，我想到了`SplitContainer`控制并且可能会利用它，左侧面板可以有一个菜单按钮列表，右侧面板显示选项详细信息。

然而，问题也随之而来，我如何才能创建看起来像屏幕截图中的菜单按钮呢？

也许，我缺少一些现有的控件。如果 WinForm 在这里看起来不好，我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:23:14.850

您可以使用 TabControl，隐藏它的所有选项卡。在左侧添加一个带有选项卡名称的 ListView，并在列表视图选择更改时更改活动选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:04:11.930

就像 alex 说你在正确的轨道上一样，添加一个拆分容器，将列表视图放在右侧，并为特殊的 Tab（没有标题）创建一个新的控件组件，并将新的 Tabcontrol 放在左侧。我特别喜欢这种创建这个特殊选项卡的方法： [TabControlNoHeader](http://www.daniweb.com/software-development/csharp/threads/215150/panels-or-a-tab-control)。它使您可以选择是否启用标头。

# jquery - 使用外部文本文件作为数据源的 JQueryUI 自动完成

> ID：15494452
> 
> 赞同：1
> 
> 时间：2013-03-19T08:17:54.647
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我在一个项目中使用 JQuery 自动完成。我希望这个自动完成的来源设置为一个文本文件。

text.txt 文件的内容 `[{ label:"AAA", url:""}, { label:"BBB", url:""}, { label:"CCC", url:""}, ]`

我如何将这些数据实现到 JQuery 自动完成中。我正在尝试这个，但这不起作用。

`$( "#textbox" ).autocomplete({ source: 'text.txt', });` 我的文本框的 id 在哪里`textbox`， text.txt 是文本文件。

很高兴有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:30:49.407

jQueryUI 自动完成需要属性`value`和`label`. 所以`url`默认情况下不起作用。所以尝试重命名这些属性，看看它是否有效。

如果您想或需要使用其他属性，您可以在原始的基础上编写一个自定义的自动完成插件，只覆盖必要的方法。

例如（使用您的`label`及`url`以上）：

```
if (typeof ($.ui.autocomplete) != 'undefined') {
    $.widget('custom.autocompleteCustom', $.ui.autocomplete, {
        _renderItem: function (ul, item) {
            // Customize the <li> below to influence what is actually shown
            return $('<li>')
                   .append($('<a>').html(item.label + '<br>' + item.url))
                   .appendTo(ul);
        }
    });
} 
```

您现在已经注册了一个名为`autocompleteCustom`. 你可以像这样使用它：

```
$('#someElement').autocompleteCustom({
    minLength: 2,
    select: function (event, ui) {
        // You can access ui.item.label, ui.item.url here
    },
    source: '/some/url'
}); 
```

希望这可以帮助。

# android - 在第一次应用启动时显示设置并记住

> ID：15494453
> 
> 赞同：2
> 
> 时间：2013-03-19T08:17:55.467
> 
> 标签：android, android-activity, settings, sharedpreferences

我希望我的应用程序有一个显示 PreferencesScreen 以设置应用程序的活动。这个画面只能在安装后显示一次，我该怎么做？

我知道我可以处理 sharedprefs，但是如何处理？

问候凯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:35:18.380

我认为你有一个主要活动，当你的应用程序执行时首先显示。`onCreate()`只有在您第一次运行应用程序时，您才可以输入一个非常简单的代码来加载首选项活动。像这样：

```
import android.content.SharedPreferences;
import android.app.Activity;
import android.os.Bundle;

public class ActivityMain extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // get shared preferences
        SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

        // first time run?
        if (pref.getBoolean("firstTimeRun", true)) {

            // start the preferences activity
            startActivity(new Intent(getBaseContext(), ActivityEditPreferences.class));

            //get the preferences editor
            SharedPreferences.Editor editor = pref.edit();

            // avoid for next run
            editor.putBoolean("firstTimeRun", false);
            editor.commit();
        }
    }
} 
```

这`ActivityEditPreferences`是加载默认 Android 首选项编辑器的另一个活动。希望这可以帮到你。

**编辑：** 为了完整起见，我还向您展示了管理偏好的活动：

```
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceActivity;
import android.preference.Preference.OnPreferenceClickListener;
import android.widget.Toast;

public class ActivityEditPreferences extends PreferenceActivity {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.xml.preferences);
... 
```

你可以在这里得到一个完整的例子：[http ://www.kaloer.com/android-preferences](http://www.kaloer.com/android-preferences)

而且别忘了看官方参考：http: [//developer.android.com/reference/android/preference/PreferenceActivity.html](http://developer.android.com/reference/android/preference/PreferenceActivity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:32:14.100

您可以将一个布尔变量添加到您的共享首选项中，以检查第一次启动状态。首次启动时，将变量设置为 false。在后续启动时，您可以检查变量的状态以检查该启动是否为首次启动。

```
public void OnCreate(Bundle savedInstance)
{
    // your other code

    SharedPreferences sharedPrefs=getSharedPreferences("MyAppPrefs",0);
    // The default value is true as the preference does not exist yet
    boolean isFirstLaunch=sharedPrefs.getBoolean("firstLaunch",true);
    if(isFirstLaunch)
    {
        // An editor so you can write the preference
        SharedPrefrences.Editor editor=sharedPrefs.edit();
        // subsequent launches will get this value as false
        editor.putBoolean("firstLaunch",false);
        editor.commit();
    }
    else
    {
        // Do other work if this is not the first launch
    }

} 
```

# windows - 使用 Windows Phone 应用程序进行的 PayPal 交易

> ID：15494456
> 
> 赞同：5
> 
> 时间：2013-03-19T08:18:17.130
> 
> 标签：windows, windows-phone-7, paypal, windows-phone-8

我们正在构建一个购物应用程序（在 windows phone 商店上并没有很多），基本上就像您去商店，选择产品，使用您的贝宝付款并提供您的送货地址一样，就是这样！

问题是应用程序被拒绝了两次，两次都是出于相同的原因：

“评论：提示用户从应用程序内输入付款信息（信用卡）。交易必须通过安全 (HTTPS) 网站或通过允许用户验证 URL 和 HTTPS 安全性的托管控件在应用程序外部进行。”

由于唯一的付款方式是 PayPal，而且我们使用的是 PayPal 标准，这意味着我们必须前往 PayPal 托管页面进行交易。我们第一次被拒绝时，我们只是添加了一个字段，用户可以在其中看到他要去的地方的 URL。用户也可以看到 https:// 以查看交易是否安全。现在我们只是在 URL 地址栏中添加了一个锁定图标（强制图像，它不会像在浏览器中那样自动出现）而不是 https://。我们只是想知道这是否还不够？我们必须在浏览器中打开贝宝页面？

附上屏幕截图。我将不胜感激任何帮助。

![在此处输入图像描述](../Images/c5d26f18d9b8706b701e5aee34f27513.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:06:58.397

尝试在网络浏览器控件的帮助下使用 PayPal Mobile Express Checkout 方法。

[https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout](https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout)

[https://www.x.com/developers/paypal/products/mobile-express-checkout](https://www.x.com/developers/paypal/products/mobile-express-checkout)

希望以上链接对您有所帮助。

**编辑：**

您可以使用网络浏览器任务来启动付款流程。

```
using System;
using Microsoft.Phone.Tasks;

WebBrowserTask webBrowserTask = new WebBrowserTask();
webBrowserTask.Uri = new Uri("https://www.paypal.com/....", UriKind.Absolute);
webBrowserTask.Show(); 
```

# constants - 使用 TypoScript 以文本形式输出域 URL

> ID：15494461
> 
> 赞同：0
> 
> 时间：2013-03-19T08:18:32.670
> 
> 标签：constants, typo3, typoscript

在我的 HTML 模板中，我放置了一个由`<a>`-tag 包围的徽标。我这样做的目的是通过使用尽可能多的 TypoScript 来引用主页。我在 TSref 和官方论坛中进行了搜索，但只是遇到了一个已经创建此链接的​​解决方案，`stdWrap`这正是我不想要的。是否可以保持简单，我只需要`<a>`在我的 HTML 模板内的 -tag 内放置一个标记？我想到了这样的事情：`<a href="###HOMELINK###">logo image here</a>`然后`marks.HOMELINK = TEXT`在TS模板记录中使用...。我只是不想让东西被解析两次，这已经可以通过我的 HTML 模板中的简单标记来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:44:11.670

Just need to use the below typoscript:

```
lib.logo = IMAGE
lib.logo.file = fileadmin/templates/logo.gif
lib.logo.stdWrap.typolink.parameter = 1      #home page id 
```

or

```
lib.logo = COA
lib.logo{
    10 = TEXT
    10 {
        typolink{
            parameter = 1
            returnLast = url
        }
        wrap = |">
    }
    20 = IMAGE
    20{
        file= fileadmin/templates/images/logo.png
        altText = Logo
    }
    wrap = <div id="logo"><a id="logo_image" href="|</a></div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:51:00.363

你可以像这样在你的 HTML 文件中硬编码它：

```
<a href="http://www.domain.com/index.php?id=2"><img src="fileadmin/img/logo.png" /></a> 
```

其中 /index.php?id= 您的主页编号。要查看主页编号，只需将鼠标悬停在后端树上即可看到它或使用：

```
options.pageTree.showPageIdWithTitle = 1 
```

在您的用户设置中获取后端树中的所有 PageId 来帮助您。

希望能帮助到你。

# c# - 如何进行内联排序？

> ID：15494463
> 
> 赞同：6
> 
> 时间：2013-03-19T08:18:37.103
> 
> 标签：c#, linq

我想要一份清单，重新排序并替换原件。

有一个更好的方法吗？目前我正在重新分配它，感觉很傻......

这是我的代码：

```
var viewModel = new ViewModel();
viewModel.Children = viewModel.Children.OrderBy(x => x.Name).ToList(); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T08:19:39.573

看来您正在寻找[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)方法。

```
viewModel.Children.Sort((a, b) => string.Compare(a.Name, b.Name)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:20:26.983

尝试使用[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)方法代替。

> `List<T>`使用指定 的对整个元素进行排序`System.Comparison<T>`。

```
viewModel.Children.Sort((a, b) => String.Compare(a.Name, b.Name)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:22:02.650

试试这个`lambda expressions`：

```
viewModel.Children.Sort((a, b) => String.Compare(a.Name, b.Name)) 
```

对于 IList 它将不起作用：

```
viewModel.Children = viewModel.Children.OrderBy(x => x.Name).ToList(); 
```

# asp.net - webconfig 中的 Machinekey Validationkey

> ID：15494465
> 
> 赞同：1
> 
> 时间：2013-03-19T08:18:56.777
> 
> 标签：asp.net

如果有人知道我托管网站的 machineKey 和 validationKey，是否存在安全隐患或有人可以访问我的网站或可以进行任何更改？请建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:38:44.960

您将获得您的网站机器密钥

[点击这里](http://aspnetresources.com/tools/machineKey)

您可以设置机器密钥

[点击这里](http://docs.orchardproject.net/Documentation/Setting-up-a-machine-key)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:57:26.723

是的。如果有人知道您的*machineKey*和*validationKey*设置，您必须假设您的站点可能会被入侵。如果您认为它们不再是秘密，请将您的密钥更改为新的随机值。

# r - ggplot2 中没有 scale_y_continuous() 的中断

> ID：15494466
> 
> 赞同：7
> 
> 时间：2013-03-19T08:18:58.087
> 
> 标签：r, ggplot2

我正在寻找一种在不使用 scale_y_...(breaks=c(x1,x2)) 函数的情况下在绘图中设置中断的方法。问题如下：我想要一些箱线图。

```
 require(ggplot2)
    a <- rnorm(10, 0, 5)
    a <- as.data.frame(a); colnames(a) <- "test"

    ### original boxplot
    ggplot(data=a, mapping=aes(y=test, x=rep(1,10))) +
      geom_boxplot()

    ### scale_y_continous() cuts of my data points and changes the boxplot!
    ggplot(data=a, mapping=aes(y=test, x=rep(1,10))) +
      geom_boxplot() +
      scale_y_continuous(limits=c(-1,1), breaks=c(-1,0,1))

    ### I am therefore using coord_cartesian() but I am missing a breaks() function
    ggplot(data=a, mapping=aes(y=test, x=rep(1,10))) +
      geom_boxplot() +
      coord_cartesian(ylim = c(-1,1)) # +
    # breaks(c(-1,0,1))   # something like this 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T08:24:00.370

您可以组合`coord_cartesian()`并`scale_y_continuous()`在一个图中，只需`limits=c(-1,1)`从比例函数中删除。当您`limits=`在 scale 函数中使用时，数据在该音调中被子集化。`coord_cartesian()`只是缩放该值区域。

```
 ggplot(data=a, mapping=aes(y=test, x=rep(1,10))) +
      geom_boxplot() +
      coord_cartesian(ylim = c(-1,1))+
      scale_y_continuous(breaks=c(-1,0,1)) 
```

# html - HTML 列表中的第一个列表项显得有点太高了

> ID：15494467
> 
> 赞同：1
> 
> 时间：2013-03-19T08:19:04.720
> 
> 标签：html, css, list, html-lists

当我无法完全掌握的问题再次出现时，我刚刚开始制作基本的页面布局。为什么我的页面左侧有一个列表框高于其他列表框？任何信息将不胜感激。谢谢

```
<html>

<head>
<style>
body{
background-color:#5187B9;
font-size:120%;
color:#666666;
}
li{
list-style:none;
}
#wrapper{
margin:0 auto;
width:960px;
}
.top{
width:100%;
}
.block01{
clear:both;
background-color:white;
border-radius:4px;
border:1px solid white;
}
.menu{
width:100%;
height:45px;
padding-top:5px;
background-color:#E8EFF6;
}
.menu ul{
height:40px;
margin-left:20px;
}
.menu li{
float:left;
margin-left:5px;
margin-right:5px;
padding:5px;
background-color:#8888F6;
color:#277098;
}
.block02{
clear:both;
width:100%;
color:white;
}
.block02 ul{
width:100%;
clear:both;
color:black;
}
.block02 li{
float:left;
height:300px;
width:120px;
border-radius:4px;
border:1px solid white;
background-color:white;
}
.block02 ul .list02{
margin-left:20px;
margin-right:20px;
}
.block03{
clear:both;
width:100%;
background-color:white;
padding:10px;
}
</style>
</head>

<body>
<div id="wrapper">
<div class="top">
</div>
    <div class="block01">
    <div class="menu">
    <ul>
    <li>ホーム&lt;/li>
    <li>特徴</li>
    <li>プラン&lt;/li>
    </ul>
    </div>

    </div>

    <div class="block02">
    <ul>
    <li class="list01"></li>
    <li class="list02"></li>
    <li class="list03"></li>
    </ul>
    </div>

    <div class="block03">

    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:22:34.623

删除`clear:both`_`.block02 ul`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:24:59.643

这是因为[`clear`](http://www.w3.org/wiki/CSS/Properties/clear)您的 CSS 中的属性。

> clear 属性指示元素框的哪些边不能与之前的浮动框相邻。

删除该`clear`属性会生成您需要的结果。

[小提琴](http://jsfiddle.net/GsUfv/)

**PS**：我已将高度更改为`250px`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:29:55.547

尝试将 .block02 ul 的 margin-top 设置为 0

# c# - 基础设施网格

> ID：15494470
> 
> 赞同：0
> 
> 时间：2013-03-19T08:19:17.143
> 
> 标签：c#, asp.net, infragistics, webdatagrid

我正在使用 Infragistics`WebDataGrid`来显示数据。当其中一列具有`null`值时，该行不会显示在该网格中。

有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:58:58.800

将`Nullable`所需列的属性设置`Nullable.Null`为如下所示：

```
// Get a column.
UltraGridColumn column = this.ultraGrid1.DisplayLayout.Bands[0].Columns["Phone"];

// Set the Nullable to Null so the UltraGrid
column.Nullable = Nullable.Null; 
```

# c# - 更改 xml 字符串最简单的方法

> ID：15494471
> 
> 赞同：1
> 
> 时间：2013-03-19T08:19:18.613
> 
> 标签：c#, xml, dynamics-crm-2011

我从外部源获取 fetchXml，我需要在其中插入一个属性。此刻，我正在通过将肯定存在于其中的属性与我要添加的属性一起替换来进行问答。

```
String fetchy = ...;
String surely = "<attribute name=\"entity_uno_id\" />";
String addity = "<attribute name=\"entity_duo_id\" />";
return fetchy.Replace(surely, surely + addity); 
```

这很丑陋，也不专业。我可以以更安全的方式重新设计它吗？我无法控制提供给我的 fetchXml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:17:35.430

尝试这样的事情

```
 string xmlString = ... // the whole xml string;
    var xml = XElement.Parse(xmlString);
    var xElement = new XElement(XName.Get("attribute", null));
    xElement.SetAttributeValue(XName.Get("name", null), "entity_duo_id");
    xml.Add(xElement); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:37:28.990

如果您可以控制接收的 fetchXml，请让他们将其格式化为 String.Format 就绪类型的格式。例如，如果您当前的字符串如下所示：

`var xml = "<blah><attribute name='entity_uno_id' /></blah>"`

将其更改为：

`var xml = "<blah><attribute name='entity_uno_id' />{0}</blah>"`

然后你可以像这样添加任何你想要的：

```
String fetchy = ...;
String addity = "<attribute name='entity_duo_id' />";
return String.Format(fetchy, addity); 
```

## 编辑 1

假设您仍然可以控制给出的 fetch xml 以包含`{0}`在 xml 的正确位置，则此扩展方法将起作用：

```
public static string AddAttributes(this string fetchXml, params string[] attributeNames)
{
    return String.Format(fetchXml, String.Join(String.Empty, attributeNames.Select(a => "<attribute name='" + a + "' />")));
} 
```

# android - 为流发布设置 facebook 权限

> ID：15494479
> 
> 赞同：1
> 
> 时间：2013-03-19T08:19:41.487
> 
> 标签：android, facebook

我有一个开放的会话。当我尝试发布朋友墙帖子时，它说我没有权限这样做。我如何将流发布权限设置为已经在 android 中打开会话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:47:49.420

如果你有一个已经打开的会话，你应该检查它是否已经有“publish_stream”或“publish_action”权限，如果没有，调用requestNewPublishPermissions。就像是

```
Session session = Session.getActiveSession();

List<String> permissions = session.getPermissions();
if (!permissions.contains("publish_actions")) {
     Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, Arrays.asList("publish_actions"))
            .setDefaultAudience(SessionDefaultAudience.FRIENDS);
     session.requestNewPublishPermissions(newPermissionsRequest);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:44:19.187

您可以设置发布权限如下：

> ```
> private static final String[] PERMISSIONS = new String[] { "publish_stream" }; 
> ```

并在 facebook 的授权方法中检查此权限，如下所示：

> ```
> public void loginAndPostToWall() throws CustomException
>   {
>     try
>     {
>         m_facebook.authorize(FacebookShareActivity.this, PERMISSIONS,
>                 Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
>     }
>     catch (Throwable p_e)
>     {
>         throw new CustomException(TAG + "Error in  loginAndPostToWall()", p_e);
>     }
> } 
> ```

# ios - 使用 FMDB 将数据插入 SQLite 时 dispatch_async 上的 EXC_BAD_ACCESS

> ID：15494482
> 
> 赞同：2
> 
> 时间：2013-03-19T08:19:44.120
> 
> 标签：ios, objective-c, ios6, thread-safety, dispatch-async

所以，我已经阅读了我在互联网上找到的所有帖子，但我似乎仍然无法完成这项工作。

我正在尝试将大量数据插入 sqlite 数据库。这是20000行数据，所以我必须在后台线程中进行。

我有一个 NSObject .h 和 .m 文件来处理数据库操作。我从我的主视图中调用它们。

这是我的代码：

```
SQLiteDBHandler.m :

 database = [FMDatabase databaseWithPath:[self getDBPath]];
    [database open];
    dispatch_queue_t q = dispatch_queue_create("FMDBQueue", NULL);
    dispatch_async(q, ^{
        for(Customer *c in arrayOfObjects) {
            [database executeUpdate:@"INSERT INTO SNP(rdis, Position, FirstName, LastName) VALUES (?,?,?,?)", c.ID, c.Position, c.FirstName, c.LastName];
        }
        [database close];
    }); 
```

为了在主视图中调用该方法，我这样称呼它：

```
SQLiteDBHandler *dbHandler = [[SQLiteDBHandler alloc]init];

[dbHandler insertDataIntoTable:mutableArray]; 
```

我试过用 FMDatabaseQueue 更改 FMDatabase，但没有成功。因此，任何帮助将不胜感激，因为我对此非常绝望。

谢谢。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:38:51.930

如果您调用`InsertDataIntoTable`两次或尝试访问数据库的任何其他方法，您可能会遇到数据库连接在您有时间执行查询之前关闭的情况。考虑这种情况：

1.  线程 1 打开数据库连接
2.  线程 2 打开数据库连接
3.  线程 1 向队列中添加一个块
4.  线程 2 将一个块添加到队列中
5.  线程 1 完成运行并关闭数据库连接
6.  线程 2 尝试运行他的块，但数据库连接已经关闭。

尝试`[database open]`在块内调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:27:53.183

EXC_BAD_ACCESS 意味着你有一个僵尸，启用僵尸对象并使用工具工具，它会告诉你僵尸对象在哪里。这里的这个链接是关于如何检测它们的一个很好的教程

[http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

希望有帮助

编辑：

在 xCode 中，屏幕顶部的工具栏 Product->Edit Scheme->Diagnostics-> 单击 Enable Zombie Objects

然后在屏幕顶部的工具栏上选择产品，然后进入配置文件，仪器应该会出现，你应该看到僵尸选项，选择它。

编辑2：

忘了说，僵尸模板只有在模拟器上分析时才会出现，如果你在实际设备上尝试分析，它不会出现

编辑3：图片

![在此处输入图像描述](../Images/75b565ee4a604b3d740f96fcf0cbcb89.png)

然后你应该看到这个

![在此处输入图像描述](../Images/33f670175a4a139e27cc6025c7656485.png)

然后，当您运行应用程序时，导航到发生错误的屏幕，应用程序应该停止，并且应该出现

![在此处输入图像描述](../Images/04c2b2d6d457b144fd441289d0a70992.png)

单击错误消息旁边的箭头，它应该显示在堆栈跟踪中发生错误的位置

# sql - 从两个连接的列中获取 max(DateTime) ORACLE

> ID：15494484
> 
> 赞同：0
> 
> 时间：2013-03-19T08:20:06.617
> 
> 标签：sql, oracle, max

我正在为某件事而苦苦挣扎，没有太多时间自己解决。

我的查询：

```
 Select distinct d.delivery_bay_code,dt.diary_type_desc, d.delivery_datetime, ddo.order_no , ddo.company_id_no,  ddo.no_of_cartons, s.supplier_name, c.company_name, sk.sku_desc, (pod.deliver_not_after_date)||' '||(pod.deliver_not_before_date)as delivery_window
     from diary d , dc_diary_order ddo , purch_order po ,purch_order_carton_sku pocs ,sku sk, purch_order_date pod,supplier s , diary_type dt , company c
    where ddo.diary_entry_id_no = d.diary_entry_id_no
      and po.order_no = ddo.order_no
      and po.company_id_no = ddo.company_id_no
      and s.supplier_id_no = po.supplier_id_no
      and s.company_id_no = po.company_id_no
      and dt.diary_type_code = d.diary_type_code
      and c.company_id_no = po.company_id_no
      and po.order_no = pocs.order_no
      and pocs.sku_id_no = sk.sku_id_no
      and po.company_id_no = 2
      and ddo.order_no = 1999
      order by delivery_datetime; 
```

此查询带回 2 条记录，其中只有`delivery_window`不同之处。例如`13/APR/11 13/APR/11 and 12/APR/11 12/APR/11`，我希望它只带回最大日期时间（最新日期）。

例如：`select max(delivery_datetime) from diary;`

现在我已经像这样尝试了上面的查询：

```
select... max(pod.deliver_not_after_date)||' '||(pod.deliver_not_before_date)as delivery_window ... from 
```

但我得到错误`ORA-00937: not a single-group group function`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:28:32.407

您缺少`GROUP BY`on `pod.deliver_not_before_date`，这导致了错误消息。

```
select... max(pod.deliver_not_after_date)||' '||(pod.deliver_not_before_date)as delivery_window ... from ..... GROUP BY pod.deliver_not_before_date 
```

当使用一个`MAX()`或任何其他分组函数时，所有其他没有分组函数的列都必须放入`GROUP BY`您的 SQL 语句的一部分。

要仅获取每个订单的最新日期行，您可以使用以下内容：

```
 select *
       from (
             Select distinct d.delivery_bay_code,dt.diary_type_desc, d.delivery_datetime, ddo.order_no , ddo.company_id_no,  ddo.no_of_cartons, s.supplier_name, c.company_name, sk.sku_desc, (pod.deliver_not_after_date)||' '||(pod.deliver_not_before_date)as delivery_window
             , max(pod.deliver_not_after_date) over (partition by ddo.order_no order by ddo.order_no) max_deliver_not_after_date
          from diary d , dc_diary_order ddo , purch_order po ,purch_order_carton_sku pocs ,sku sk, purch_order_date pod,supplier s , diary_type dt , company c
            where ddo.diary_entry_id_no = d.diary_entry_id_no
          and po.order_no = ddo.order_no
          and po.company_id_no = ddo.company_id_no
          and s.supplier_id_no = po.supplier_id_no
          and s.company_id_no = po.company_id_no
          and dt.diary_type_code = d.diary_type_code
          and c.company_id_no = po.company_id_no
          and po.order_no = pocs.order_no
          and pocs.sku_id_no = sk.sku_id_no
          and po.company_id_no = 2
          and ddo.order_no = 1999
          order by delivery_datetime)
      where deliver_not_after_date = max_deliver_not_after_date; 
```

# android - 未在清单中加载夏洛克主题

> ID：15494486
> 
> 赞同：1
> 
> 时间：2013-03-19T08:20:07.407
> 
> 标签：android, android-actionbar, actionbarsherlock, android-manifest

我正在尝试在我的应用程序中实现一个 sherlock 操作栏。我正在遵循许多[教程](http://www.youtube.com/watch?v=4GJ6yY1lNNY)来实现它。但在清单中，它没有显示“@style/”的任何选项。我试图得到它的答案。但是我再次单击我的项目的属性并单击 android 按钮，显示以下错误

![在此处输入图像描述](../Images/760efcb0e18ea6cf58b144692d1845e1.png)它在“是库”中显示错误的标记。到目前为止，我从未在任何帖子中看到过。在活动中它正在扩展（即使在单击项目修复选项之后）sherlockactivity。有人可以解释一下这是什么问题。我已经将库项目加载到工作区中。我是 android 新手。

# iphone - 在 Objective C 中解析二维数组

> ID：15494495
> 
> 赞同：1
> 
> 时间：2013-03-19T08:20:42.713
> 
> 标签：iphone, ios, uitableview, nsxmlparser

我制作了一个 iOS 应用程序，它解析填充 UITableView 的一维数组，我尝试将两个条目发送到数组，即文件的“名称”和来自 xml 的文件的“URL”。但是在表格视图中填充了名称和 URL。我想将名称显示为单元格文本，将 url 显示为单元格详细信息文本。有什么帮助吗？

```
 (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
//NSLog(@"%@",string);
if(count){
    listset1=[[NSMutableArray alloc]initWithCapacity:20];
    count=0;
}

if ([currentElementValue isEqualToString:@"Name"]) {
    [Name appendString:string];
    [listset1 addObject:[NSString stringWithFormat:@"%@",Name]];
        //    NSLog(@"%@",listset1);
}

if ([currentElementValue isEqualToString:@"URL"]) {
    [URL appendString:string];
    [listset1 addObject:[NSString stringWithFormat:@"%@",URL]];
    //NSLog(@"%@",URL);

} 
```

Listset1 是正在解析的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:26:35.897

在 Objective-C 语言中是不可能的。

您要么采用两个数组，要么参考**“类”**结构。

我更喜欢你的班级结构。

**`NSObject`**创建一个具有两个对象**`NSString`**的类类型，如**Name**和**URL**。

在获得价值的同时，

```
sampleClass *objClass = [[sampleClass alloc] init];

objClass.strName = [NSString stringWithFormat:@"%@", strName];
objClass.strURL = [NSString stringWithFormat:@"%@", strURL];

[listArray addObject: objClass]; 
```

在显示数据时，

```
for (int i = 0; i < [listArray count]; i++)
{
   objClass = [listArray objectAtIndex:i];

   NSLog(@" --> %@", objClass.strName);
   NSLog(@" --> %@", objClass.strURL);
} 
```

希望，你会明白的。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:37:41.387

您将名称和网址存储在`NSMutableDictionary`并存储在`NSMutableArray`

```
 -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

        if(count){
           NSMutableArray* listset1=[[NSMutableArray alloc]initWithCapacity:20];
            count=0;
        }

         NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
        if ([currentElementValue isEqualToString:@"Name"]) {
            [Name appendString:string];
            [dict setValue:[NSString stringWithFormat:@"%@",Name] forKey:@"Name"];
        }

        if ([currentElementValue isEqualToString:@"URL"]) {
            [URL appendString:string];
            [dict setValue:[NSString stringWithFormat:@"%@",URL] forKey:@"URL"];

        }
        [listset1 addObject:dict];
        [dict release];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:43:15.860

多维数组是不可能的。

假设您有两个不同的数组，并且您保留了两者之间的语义。所以name[0]对应url[0]

现在在您的视图控制器中实现以下方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  static NSString *CellIdentifier;
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.textlabel.text=name[indexPath.row];
cell.detailTextLabel.text=url[indexPath.row];

return cell;

} 
```

# installation - Nsis 安装程序获取文件大小

> ID：15494496
> 
> 赞同：2
> 
> 时间：2013-03-19T08:20:51.937
> 
> 标签：installation, nsis

我正在使用 NSIS 安装程序。我想解压缩文件，但在此之前，我不会得到它的大小。可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:45:27.727

您可以使用[GetSize](http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.3)宏，它预装在 NSIS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:55:53.397

基本上，您可以使用`FileSeek`从末尾获取第 0 个字节的位置。

```
FileOpen $0 somefile.txt r    ;open somefile in read mode
FileSeek $0 0 END $1          ;ask for the 0th byte from the end, and put the value in $1
FileClose $0
;here you have the size in $1 
```

这以一种更方便的方式使用，它保留了[FileSizeNew 函数](http://nsis.sourceforge.net/Getting_File_Size)中获取文件名并通过堆栈返回结果的变量。

# openlayers - OpenLayers ScaleLine 未正确显示

> ID：15494497
> 
> 赞同：1
> 
> 时间：2013-03-19T08:20:57.093
> 
> 标签：openlayers

我的 ScaleLine 有一个小问题，代码不多

```
this.scaleline = new OpenLayers.Control.ScaleLine();
map.addControl(this.scaleline); 
```

这应该显示一切都很好，只要你在地图被启动的地方启动它（我试过把它放在不同的地方，但结果相同）。

我得到的只是 ![比例线](../Images/fe7ef34a013642dc86fdb640c3927d1a.png)

它的逻辑工作得很好，当我阅读 OpenLayers 时，这就是让它完全工作所需的一切。

我缺少的是数字之间和周围的“线”（使它看起来像一个比例）。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:53:14.700

我解决了这个问题，我完全忘记了在默认/主题中有一个 CSS 对 scaleLine 有一些魔力。

所以我想我现在就在这里写它，以防其他人忘记了默认的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:30:34.840

您是否尝试直接通过网络访问 OpenLayers.js？还是你把它保存在你的电脑里？因为我在通过网络访问它时发现了一些小故障。看看是否有帮助。干杯。

# jquery - jQuery 中提供了哪些钩子？

> ID：15494498
> 
> 赞同：9
> 
> 时间：2013-03-19T08:20:58.383
> 
> 标签：jquery, dom, dom-events

官方仅`$.cssHooks`记录在[jQuery API 文档](http://api.jquery.com/jQuery.cssHooks/)中，并`$.valHooks`在句子中提到了[`.val()`](http://api.jquery.com/val/).

我想知道除了这两个之外，jQuery 中有多少钩子，我们应该`$.valHooks`在插件开发中使用吗？如果是这样，我认为应该将其记录为一个专门的主题，而不仅仅是一个句子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T22:16:00.437

有 8 种不同类型的外露挂钩。

还有一个仅供内部使用（已暴露） - `jQuery._queueHooks()`。

还有另外两个钩子：`nodeHook`and`boolHook`内部使用，它们的功能基本上嵌入到`jQuery.attrHooks`and`jQuery.valHooks`中。

以下是重要的：

*   **`jQuery.attrHooks`**

    *   `radio`在值重置 IE6-9 中的值后设置输入的类型。
    *   删除时设置`contenteditable`为 false ( [Bug #10429](http://bugs.jquery.com/ticket/10429) )。
    *   在空字符串上将宽度和高度设置为 auto 而不是 0 ( [Bug #8150](http://bugs.jquery.com/ticket/8150) )
    *   [某些属性需要对 IE 进行特殊](http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx)调用- `href`、`src`和.`width``height`
    *   在属性`undefined`为空字符串的情况下返回。`style`
    *   `value`修复旧 IE中属性的获取/设置
    *   读取属性值时，如果未定义挂钩，则使用`boolHook`or `nodeHook`（与 相同`jQuery.valHooks.button`）。
    *   在获取/设置元素的属性时，可用于附加额外的钩子。
*   **`jQuery.propHooks`**

    *   `href`/`src`属性应该获得完整的规范化 URL（[错误 #10299](http://bugs.jquery.com/ticket/10299)、[错误](http://bugs.jquery.com/ticket/12915)#12915 ）。
    *   修复“Safari 错误报告选项的默认选定属性”。
    *   可用于在获取/设置元素的属性时附加额外的钩子。
*   **`jQuery.Tween.propHooks`**

    `jQuery.Tween`用于动画等。

    *   `scrollTop`IE8中的修复`scrollLeft`- 将在 jQuery 2.0 中删除。
    *   其他动画的东西。
*   **`jQuery.cssHooks`**

    添加样式属性挂钩以覆盖获取和设置样式属性的默认行为。

    *   修复获取/设置 CSS 属性的值`opacity`。
    *   修复获取`witdth`和`height`依赖`display`属性。
    *   修复设置`width`和`height`取决于`box-sizing`属性。
    *   修复获得正确的边距。
    *   修复[Webkit 错误 #29084](https://bugs.webkit.org/show_bug.cgi?id=29084) -`getComputedStyle`指定顶部/左侧/底部/右侧时返回百分比
    *   用于`jQuery.fn.animate`扩展指定的样式属性，如`margin`,`padding`和`border`.
    *   用于其他各种`jQuery.fn.animate`相关的东西。
    *   将各种背景 CSS 属性设置`inherit`为 无需使用 即可实现`jQuery.cssHooks`，因为这样更短。
    *   在获取/设置元素的单个样式属性时，可用于附加额外的钩子。
*   **`jQuery.valHooks`**

    *   修复了 Blackberry 4.7 的`option`元素错误（[错误 #6932](http://bugs.jquery.com/ticket/6932)）。
    *   用于读取`select`元素的选定值。
    *   修复了读取`button`元素的一些属性-`id`和. 与（见上文）相同。`name``coords``nodeHook`
    *   修复了Webkit 与其他人之间检查`radio`和输入的不兼容问题。`checkbox`
    *   在获取/设置输入元素的值时，可用于附加额外的钩子。
*   **`jQuery.event.fixHooks`**

    基于当前浏览器的支持需要修复和规范化的`jQuery.event.mouseHooks`持有者。`jQuery.event.keyHooks`

*   **`jQuery.event.mouseHooks`**

    *   用于将一些属性从原始`MouseEvent`传递到 jQuery 事件对象。
    *   跨浏览器规范化`event.which`（使用哪个鼠标按钮），因为`event.button`未规范化。
    *   计算`pageX`, `pageY`, `clientX`,`clientY`和其他如果缺少并将它们设置为 jQuery 事件对象。
*   **`jQuery.event.keyHooks`**

    *   用于将一些属性从原始`KeyboardEvent`传递到 jQuery 事件对象。
    *   跨浏览器规范化`event.which`（按下按钮的字符代码）。在原始事件中，它可能是`char`、或。`charCode``key``keyCode`

来自 jQuery 1.9.1 源代码。

# hibernate - 我可以根据非空/非空的表列对@Entity 进行子类化吗？

> ID：15494500
> 
> 赞同：1
> 
> 时间：2013-03-19T08:21:03.480
> 
> 标签：hibernate, single-table-inheritance

我在 Jboss7 环境和 Postgres9 数据库中使用 Hibernate4.1 作为后端。我有一张名为`documents`. 它看起来像这样：

```
CREATE TABLE documents (
  id serial primary key,
  name varchar(255) not null,
  path varchar(255) not null,
  content text
); 
```

现在我已经有了一个`Document`反映这个表的实体：

```
@Entity
public class Document {
  @Id @GeneratedValue(strategy = IDENTITY)
  Integer id;
  @Column(nullable = false)
  String name;
  String path;
  @Type(type = "text")
  String content;
} 
```

实际的表/实体稍大一些，并且实体根据它是由文件（非空`path`）还是仅由字符串（非空`content`）支持而附加了一堆逻辑。我想将文件处理拆分为一个名为的单独实体，该实体`FileDocument`将从`Document`. 我可以用 Hibernate 映射它吗？如果可以，怎么做？

如果我可以使用单表继承并基于`path`列而不需要添加另一列，我更愿意“自然地”表达这一点。

`content`我可能应该补充一点，如果文档可以被解析或 OCR化，“文件支持”的文档仍然可以是非空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:51:58.500

比我想的更直截了当：

```
@Entity
@DiscriminatorFormula("CASE WHEN path IS NULL OR path = '' THEN 'Document' ELSE 'FileDocument' END")
public class Document {
  @Id @GeneratedValue(strategy = IDENTITY)
  Integer id;
  @Column(nullable = false)
  String name;
  String path;
  @Type(type = "text")
  String content;
} 
```

并且在`FileDocument.groovy`（是的，我混合了 java 和 groovy 实体就好了）

```
@Entity
class FileDocument extends Document {
  def tellMe() {
    "yes, sir!"
  }
} 
```

唯一的绊脚石是`WrongClassException`来自 Hibernate （如在[Hibernate 中： org.hibernate.WrongClassException, SINGLE_TABLE 继承和 DiscriminatorFormula](https://stackoverflow.com/questions/5667671/hibernate-org-hibernate-wrongclassexception-single-table-inheritance-and-discr?rq=1)），但那是我误认为[Hibernate 手册](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/)说：

> 如果您未在类上设置 @DiscriminatorValue，则使用完全限定的类名。

所以我原本有

```
@DiscriminatorFormula("CASE WHEN path IS NULL OR path = '' THEN 'com.mycompany.entity.Document' ELSE 'com.mycompany.entity.FileDocument' END" 
```

注意完全限定的类名。但是，Hibernate`Document`使用其**非限定**名称索引 的子类，因此从公式返回的值与我提供的任何类定义都不匹配。

# c - 如何继续制作一个跟踪另一个软件的函数调用的软件？

> ID：15494501
> 
> 赞同：17
> 
> 时间：2013-03-19T08:21:07.237
> 
> 标签：c, linux, multithreading, parsing

我希望制作一个软件来跟踪另一个软件的函数调用。
它应该就像“在运行时”从哪里调用哪个函数。

例子：

```
int main ()
{
    a ();
    b ();
    c ();
    return 0;
}

a () 
{
   d ();
   e ();
}

b ()
{
   e ();
   f ();
} 
```

假设我希望当前在 C 中为 C 编写此代码，我应该如何在运行时（从第一次调用开始）跟踪调用 - 使用线程和不使用线程？

提示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-20T09:27:19.937

您可以在运行前通过*静态分析*执行此操作，也可以在运行时通过*动态分析*执行此操作。

在运行时只有两种方法可以做到这一点，它们都相当于检测代码：

## 检测源代码

修改（“仪器”）源代码，以便跟踪您想要的内容，例如，修改每个调用站点以传递一个有效包含调用函数名称的附加参数，以及每个函数条目以记录该函数的条目（例如，有效地调用函数名）和调用函数名。检测过程需要从检测的点建立交叉引用，返回源文件和行以启用以后的报告。

您可以使用[程序转换系统 (PTS)](http://en.wikipedia.org/wiki/Program_transformation)以完全自动化的方式执行此操作，该系统可以解析源代码以生成 AST、修改 AST，然后重新生成源代码。通常，PTS 会让您将更改编写为表单的源级模式，“如果您看到*这个，就用**那个*替换它”。（不，正则表达式不能这样做）。

可以在我的技术论文[Branch Coverage for Arbitrary Languages](http://www.semdesigns.com/Company/Publications/TestCoverage.pdf)中找到如何做到这一点的扩展示例。本文展示了讨论 PTS 中的内容，然后展示了典型的仪器转换。

为像 C 这样的语言“正确”完成这项工作可能很困难，因为您需要一个完整的 C 解析器作为基础，这本身就是一项重大的技术壮举。最好以完整的形式获得这样的野兽（一些 PTS 有这个，考虑 Concinnelle 或 DMS），否则你将永远不会有时间去做仪器部分。（另一个答案表明 GCC 有很多内置的检测功能）。

如果做得合理，额外仪器的执行成本相当适中（10-30%）。这个概念已被用于实现测试覆盖工具和时序分析器，它们通过跟踪动态调用集进行操作，这似乎正是您想要的。

## 检测目标代码

修改运行代码的执行引擎以跟踪您想要的详细信息。鉴于您想使用 C 程序执行此操作，执行引擎本质上是底层指令集。

由于您无法合理地修改处理器芯片本身，因此您必须：

*   修改目标代码（使用程序转换的目标代码等效项，有关概念，请参阅前一段，或有关实施细节，请参阅 PIN 和 Valgrind 等工具），

*   或者编写某种巧妙的指令集解释器，在遇到调用指令时收集它需要的信息（由于其解释性质，这可能相当慢）。

由于指令集本身（英特尔的 X86 指令集很大）、目标文件格式等，为真正的指令集实现这些是复杂的。不要指望这条路径比源检测路径更容易；只是期望它有一系列不同的问题。

一个标准问题是知道要检测*什么*。目标代码空间充满了不属于感兴趣的应用程序的代码（库、系统例程……），因此收集测试覆盖率数据并不有趣。为此，您需要一个符号表（对）来说明什么是应用程序代码，什么不是。您还需要能够从名称跟踪到原始源文件中的某个点，以便报告结果。

目标代码检​​测的另一个困难是很难判断已内联的函数 foo 是否已执行（“覆盖”）。源检测方案没有这个问题，因为 foo在编译/内联*之前*被检测，所以检测也被内联。

## 线程

处理线程是一个正交问题。**在您记录事实X-calls-Y**的每个地方，您只需附加从操作系统获得的线程 ID（或其等效项）T 即可生成**X-calls-Y-in-T**。从您的问题中不清楚您为什么要这样做。

## 静态分析

您可以决定跳过运行时实现的所有麻烦，并构建/获取可以生成调用图的静态分析器。使用 Clang 或 DMS 可能会为 C 获取这些。自己建造可能很困难。现在您需要一个完整的 C 解析器、完整的数据流和指向分析以及调用图构造。细节不适合本段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T09:13:11.827

这在很大程度上取决于平台。您需要做的或多或少是调试器所做的事情。

我解决这个问题的方式（当我不得不调试在新架构上构建 gdb 所需的工具时，我实际上实现了所有这些）：

阅读要调试的程序的符号表。您在评论中说 Linux，所以要开始您需要一个读取 ELF 文件或读取 ELF 规范并自己实现某些东西的库。

使用`ptrace`系统调用在函数处创建断点`main`。如果幸运的话，您的系统`ptrace`可以创建断点并将簿记保存在内核中。如果没有，你需要为你的 cpu 架构找出断点指令并自己实现断点。

接下来，您需要弄清楚动态加载器中的调试钩子，以便知道何时加载共享库。您还需要库的符号表。

现在你已经拥有了所有的符号（诚然，这是在你的程序运行一段时间之后，因为它必须加载动态库，但我们假设程序从 开始`main`）在你得到的所有函数处创建断点符号表。

让程序运行。每次遇到断点时，反向查找符号表中的指令指针。将函数的名称保存到文件或您要保存的任何位置。您现在可以跟踪函数调用。

或者只是使用调试器。gdb 可能可以编写脚本来执行类似的操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T08:29:55.147

我很抱歉这些不是开源工具，但我过去曾将它们用于研究，它们启用了您需要的功能，因此您可能会从使用它们中获得一些提示。

在 Linux 上，尝试看看[Pin](http://software.intel.com/en-us/articles/pin-a-dynamic-binary-instrumentation-tool)是如何工作的。

在 Windows 上，查看[Detours](http://research.microsoft.com/en-us/projects/detours/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-20T09:55:50.340

我会使用内置的检测功能为`GCC`您执行源代码检测。

这是教程的链接：http: [//balau82.wordpress.com/2010/10/06/trace-and-profile-function-calls-with-gcc/](http://balau82.wordpress.com/2010/10/06/trace-and-profile-function-calls-with-gcc/)

基本上，您告诉程序在每个函数调用之前调用一个检测函数，并给出两个地址作为参数。您自己提供该检测功能，并使用源地址和目标地址调用它。发件人地址告诉您从哪里调用收件人地址处的函数。

然后，您需要将地址转换为函数名称（这可以在源代码文件中给定行号来完成）。通过使用 GNU binutils 工具`addr2line`，您可以将目标地址和目标地址转换为行号，因为二进制文件是使用调试信息 ( `gcc -g ...`) 编译的。

使用这种方法开始使用仪器非常快。

**编辑：**

如果您没有源并且只有二进制文件，您可以尝试将二进制文件反汇编或解析为程序集。这样，您可以将程序分成跳转到/从的逻辑块。没有源代码就无法轻松恢复函数名称，因此您可能只能跟踪之前将程序划分为的逻辑块内的跳转。这就是几个调试器所做的 AFAIK。我认为[OllyDbg](http://www.ollydbg.de/)（仅限 Windows）和[IDA pro](https://www.hex-rays.com/products/ida/)可以提供可视化流程图排序，或显示彩色框图或类似的东西。如果没有源代码，您确实必须努力工作，而如果您手头有源代码，那么您就可以完全按照自己的意愿去做。只需在两者之间添加一个步骤，`write code -> compile -> execute`它就变成了`write code -> insert instrumentation -> compile -> execute`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-21T19:19:59.337

费力的方法是将 printf 作为函数的第一行和最后一行插入。或者使用调试器。问题可能是调试器将所有变量设置为 0 / null，“解决”代码中的错误。

我的解决方案是 [使用 ctrace](http://docs.oracle.com/cd/E19205-01/820-4180/man1/ctrace.1.html)

# linux - Livereload chrome 扩展不响应 css 或 html 中所做的更改，即使 gaurad-livereload 1.6 捕捉到更改

> ID：15494504
> 
> 赞同：2
> 
> 时间：2013-03-19T08:21:17.070
> 
> 标签：linux, google-chrome, livereload

我有一个linux操作系统。最近安装了 livereload chrome 扩展[https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei](https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei)和 guard-livereload 服务器，但 livreload 扩展连接到服务器，但对 css 或 html 所做的更改没有反映在浏览器中.plz 帮助。

# scala - 带有命令行参数的 bash 与 scala.sys.process.Process

> ID：15494508
> 
> 赞同：2
> 
> 时间：2013-03-19T08:21:24.663
> 
> 标签：scala, ubuntu, process, sbt

我想从 Scala 生成一个进程（就此而言是 SBT），以及作为参数传递的两个 SBT 命令。我制作了一个`sbt.sh`shell 脚本（[sbt 文档中手动安装的简化版](http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html)）：

```
java -jar /home/bob/sbt/sbt/bin/sbt-launch.jar "$@" 
```

`/home/bob/workingdir`当我从 Ubuntu 中的 bash 提示符（作为工作目录）调用脚本时，如果工作正常：

```
~/sbt.sh "project Foo" "run" 
```

但是，我想在 Scala 程序中使用以下代码调用它：

```
val pseq = Seq("/home/bob/sbt.sh", "\"project Foo\"", "\"run\"")
val pb = scala.sys.process.Process(pseq, new java.io.File("/home/bob/workingdir"))
pb.! 
```

SBT 正常启动并加载，然后失败并显示以下错误输出：

```
[error] Expected key
[error] "project Foo"
[error] ^ 
```

它在 Windows 8 上运行良好，但在 Ubuntu 12.10 上失败。我`pseq`曾经是一个`String`拥有完整 bash 命令的普通人。我变成 a`Seq`是为了让参数拆分明确（而不是在任何空间，即使在引号内）。

谁能指出这两个调用之间有什么区别，或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:12:40.127

我遇到了解决方案。原来是微不足道的，但无论如何值得分享：

```
// no \"-quoting of passed SBT commands here!
val pseq = Seq("/home/bob/sbt.sh", "project Foo", "run")
val pb = scala.sys.process.Process(pseq, new java.io.File("/home/bob/workingdir"))
pb.! 
```

整洁，可在 Windows 和 Linux 上运行。在 Windows 上用作命令字符串相当不雅`/home/bob/sbt.sh "project Foo" "run"`，并且在 Linux 上不起作用。

# jquery - jQuery 子菜单不起作用 - CSS 问题

> ID：15494511
> 
> 赞同：0
> 
> 时间：2013-03-19T08:21:31.820
> 
> 标签：jquery, css, windows

我是网页设计的新手，我正在尝试将我在网站上找到的 jQuery 菜单示例集成到我的网页中。

但是，显然 CSS 出了点问题，因为当我评论与菜单相关的 CSS 时，jQuery Hover 方法正在工作。但是，使用那个 CSS，它不起作用。

使用 Firefox 和 Chrome 最新版本在 Windows 上测试。令人惊讶的是，这件事在 IE 上运行良好......

在此处找到我的网页：http: [//jsfiddle.net/qHVE7/](http://jsfiddle.net/qHVE7/) （我已评论菜单 CSS。取消评论以查看问题。）
这是我已评论的 CSS。

```
/*Menu CSS*/
/*ul#topnav {
    margin: 0; padding: 0;
    float: left;
    width: 100%;
    list-style: none;
    position: relative;
    font-size: 1.2em;
    background:url(images/topnav_s.gif) repeat-x;
}
ul#topnav li {
    float: left;
    margin: 0; padding: 0;
    border-right: 1px solid #555;
}
ul#topnav li a {
    padding: 10px 15px;
    display: block;
    color: #f0f0f0;
    text-decoration: none;
}

ul#topnav li:hover { background: #1376c9 url (images/topnav_a.gif) repeat-x; }
ul#topnav li span {
    float: left;
    padding: 15px 0;
    position: absolute;
    left: 0; top:35px;
    display: none;
    width: 970px;
    background: #1376c9;
    color: #fff;
    -moz-border-radius-bottomright: 5px;
    -khtml-border-radius-bottomright: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -khtml-border-radius-bottomleft: 5px;
    -webkit-border-bottom-left-radius: 5px;
}
ul#topnav li:hover span { display: block; }
ul#topnav li span a { display: inline; }
ul#topnav li span a:hover {text-decoration: underline;}*/
/*Menu CSS Ends*/ 
```

原始子菜单代码在这里：http: [//jsfiddle.net/7DXzP/](http://jsfiddle.net/7DXzP/)

我哪里错了？因为我基本上是从示例中复制粘贴了 javascript 和 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:39:24.327

在css中为类链接添加边距，例如

```
.links {
   position: relative;
   margin-top:250px; 
} 
```

`<div class="links">`菜单上没有边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:24:22.710

问题是链接 div（所有浮动都在进行）位于菜单顶部，这就是悬停事件不会发生的原因。添加背景颜色：红色；向班级展示了这一点。添加一个浮点数：左；到班级确保它出现在菜单下方，因此它再次起作用。

```
.links {
   float:left;
   position: relative;
} 
```

# eclipse - Hadoop地图任务失败

> ID：15494512
> 
> 赞同：0
> 
> 时间：2013-03-19T08:21:36.743
> 
> 标签：eclipse, hadoop

我是 hadoop 的新手，正在尝试运行我的第一个程序。IDE 是 eclipse 和 hadoop 版本 0.20.2。找不到地图类。我收到以下错误....

```
13/03/19 00:05:14 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.<br/>
13/03/19 00:05:14 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).<br/>
13/03/19 00:05:14 INFO input.FileInputFormat: Total input paths to process : 1<br/>
13/03/19 00:05:16 INFO mapred.JobClient: Running job: job_201303182346_0003<br/>
13/03/19 00:05:17 INFO mapred.JobClient:  map 0% reduce 0%<br/>
13/03/19 00:05:29 INFO mapred.JobClient: Task Id : attempt_201303182346_0003_m_000000_0, Status : FAILED

java.lang.RuntimeException: java.lang.ClassNotFoundException: gsMapred.MapTaskone
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:809)
    at org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:157)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:569)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
    at org.apache.hadoop.mapred.Child.main(Child.java:170)
Caused by: java.lang.ClassNotFoundException: gsMapred.MapTaskone
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:762)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:807)
    ... 4 more 
```

您可以在[这里](https://docs.google.com/folder/d/0B_196VQPQdngZV8tcGVwTjdISDg/edit?usp=sharing)查看我的文件。我真的被困在这里了。谁能告诉这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:35:47.303

您是否尝试从 Eclipse 运行 MapReduce 作业？尝试使用`$HADOOP_HOME/bin/hadoop jar <your compiled file>.jar`.

# ios - 如何在后台控制通知消息

> ID：15494513
> 
> 赞同：-3
> 
> 时间：2013-03-19T08:21:37.210
> 
> 标签：ios, notifications, push

在活动中，使用 didReceiveRemoteNotification 方法

但我想要

在后台处理推送消息

如果应用程序在后台如何响应推送通知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:03:59.873

当你点击通知时，你说 didReceiveRemoteNotification 会打电话，你可以处理它。

# c# - 实施 IEquatable 当 T 可以是 IEnumerable

> ID：15494518
> 
> 赞同：6
> 
> 时间：2013-03-19T08:22:02.130
> 
> 标签：c#, implementation, structural-equality

我已经阅读了与我类似的各种问题，但似乎都没有解决我的问题。

我有这样的类型：

```
class MyObject<T> : IEquatable<MyObject<T>> { // no generic constraints
  private readonly string otherProp;
  private readonly T value;

  public MyObject(string otherProp, T value)
  {
    this.otherProp = otherProp;
    this.value = value;
  }

  public string OtherProp { get { return this.otherProp; } }

  public T Value { get { return this.value; } }

  // ...

  public bool Equals(MyObject<T> other)
  {
    if (other == null)
    {
       return false;
    }

    return this.OtherProp.Equals(other.OtherProp) && this.Value.Equals(other.Value);
  }
} 
```

什么时候`T`是一个标量，因为`MyObject<int>`平等工作正常，但是当我定义类似`MyObject<IEnumerable<int>>`平等的东西时失败。

原因是当 T 是`IEnumerable<T>`我应该调用`this.Value.SequenceEqual(other.Value)`.

使用类型检查和反射的 LOC 来处理这种差异会膨胀`Equals(MyObject<T>)`（对我来说，这会导致违反 SOLID/SRP）。

我无法在 MSDN 指南中找到这个特定案例，所以如果有人已经遇到过这个问题；如果可以分享这些知识，那就太好了。

**编辑：替代**

对于 KISS，我想知道做类似的事情：

```
class MyObject<T> : IEquatable<MyObject<T>> {
  private readonly IEnumerable<T> value;

  // remainder omitted
} 
```

这样实现起来`Equal`就会简单很多。当我只需要一个值时，我会收集 1 个项目。显然 T 不会是可枚举的（但数据结构是私有的，所以没有问题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:31:01.710

如果什么时候`T`是`IEnumerable<T>`，您的代码会比较两个引用`IEnumerable<T>`，当然，这些引用可能不相等。`Equals`实际上，当 T 是没有重写方法的任何引用类型时，您会得到这种行为。

如果您不想在这里比较引用，您应该编写一个代码，该代码将通过它们的内容比较这些序列。但是，您应该注意，该序列可能是无止境的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:37:35.590

您可以`MyObject<T>`为您的类型设置一个相等比较器`T`并使用它：

```
class MyObject<T> : IEquatable<MyObject<T>>
{
    private readonly IEqualityComparer<T> comparer;
    public MyObject(string otherProp, T value, IEqualityComparer<T> comparer)
    {
        this.comparer = comparer;
    }
    public MyObject(string otherProp, T value)
        : this(otherProp, value, EqualityComparer<T>.Default)
    {
    }

    public bool Equals(MyObject<T> other)
    {
        return OtherProp.Equals(other.OtherProp) && comparer.Equals(this.Value, other.Value);
    }
} 
```

然后，`IEnumerable<T>`您可以使用比较器来比较序列而不是参考。您可能希望使用工厂方法来创建对象，以确保相同的比较器类型用于相同的对象，`T`以确保相等性保持对称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:30:33.877

不需要反思。一种选择是在 Equals 方法中检查 value 是否为 IEnumerable：

```
IEnumerable e = other.Value as IEnumerable;

if(e != null){
 // use  SequenceEqual
}else{
 // use Equals
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:34:50.063

在这种情况下，您应该借助 helper 类，您的 MyObject 类型可能会使用单独的 EqualityChecker。

我想说用静态工厂方法实现策略模式将简化您的设计。

像下面的东西

```
class MyObject<T> : IEquatable<MyObject<T>>
{ // no generic constraints
    private readonly string otherProp;
    private readonly T value;

    public MyObject(string otherProp, T value)
    {
        this.otherProp = otherProp;
        this.value = value;
    }

    public string OtherProp { get { return this.otherProp; } }

    public T Value { get { return this.value; } }

    // ...

    public bool Equals(MyObject<T> other)
    {
        if (other == null)
        {
            return false;
        }

     var cheker =   EqualityChekerCreator<T>.CreateEqualityChecker(other.Value);

     if (cheker != null)
         return cheker.CheckEquality(this.Value, other.value);

        return this.OtherProp.Equals(other.OtherProp) && this.Value.Equals(other.Value);
    }
}

public static class  EqualityChekerCreator<T>
{
    private static IEqualityCheker<T> checker;

    public static IEqualityCheker<T>  CreateEqualityChecker(T type)
    {
        var currenttype = type as IEnumerable<T>;

        if(currenttype!=null)
            checker = new SequenceEqualityChecker<T>();

        return checker;
    }
}

public  interface  IEqualityCheker<in T>
{
    bool CheckEquality(T t1, T t2);
}

public class SequenceEqualityChecker <T> : IEqualityCheker<T>
{
    #region Implementation of IEqualityCheker<in T>

    public bool CheckEquality(T t1, T t2)
    {
        // implement method here;
    }

    #endregion
} 
```

# regex - 如何列出所有符合条件的文件并使用 shell 脚本选择第一个文件？

> ID：15494520
> 
> 赞同：0
> 
> 时间：2013-03-19T08:22:03.647
> 
> 标签：regex, shell

我正在尝试编写一个 shell 脚本

1.  列出所有符合某些条件的文件，例如“具有 .txt 扩展名的文件”，然后
2.  从该列表中选择第一个文件

我已经设法列出所有具有 .txt 扩展名的文件，使用`ls *.txt`命令将其保存在变量中。我的 shell 脚本如下所示

```
#!/bin/bash

all_text_files=`ls *.txt`
echo $all_text_files 
```

在我的系统上，我得到以下输出

```
sample_text_file_1.txt sample_text_file_2.txt sample_text_file_3.txt sample_text_file_4.txt sample_text_file_53.txt 
```

如您所见，所有文件都由单个空格分隔。现在我想选择第一个文件，即`sample_text_file_1.txt`文件，然后读取该文件。

由于我对 shell 脚本编程完全陌生，我不知道如何在 shell 脚本中执行此操作。在其他编程语言中，我们可以在单个空格字符上使用正则表达式拆分字符串，然后从结果列表中选择第一项。

请您帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:24:18.920

尝试这个 ：

使用不使用管道且仅内置的[bash](/questions/tagged/bash "显示标记为“bash”的问题")数组：`bash`

```
array=( *.txt )
echo "${arrray[0]}" 
```

* * *

使用`printf`and `head`（不允许使用换行符的文件名，但很少见）

```
printf -- '%s\n' *.txt | head -n 1 
```

* * *

使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
printf -- '%s\n' *.txt | sed -n '1p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:25:15.467

用于`head`获取第一条输出线：

```
ls *.txt | head -n 1 
```

但是你不应该使用`ls`和解析它的输出，除非你有特定的理由这样做（例如你想按照某些标准对文件进行排序并采用第一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:27:51.373

解析 ls 的输出是[不安全](http://mywiki.wooledge.org/ParsingLs)的，所以不要这样做。

将文件存储在数组中并选择第一个元素，如下所示：

```
arr=( *.txt )
echo "${arr[0]}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:31:36.687

awk 有`split`功能，非常强大。

```
awk 'BEGIN{split ("file1 file2 file3", files, " "); print files[1]}' 
```

# php - Grocery Crud 中的两个字段作为一个独特字段

> ID：15494526
> 
> 赞同：2
> 
> 时间：2013-03-19T08:22:47.330
> 
> 标签：php, codeigniter, codeigniter-2, grocery-crud

我在 GroceryCrud 有一个问题。

我想在一个表中插入数据。表是这样的：

```
id, card_no, site_code, site_no 
```

**card_no**是独一无二的，我已经实现了它。

然而; 我的问题是**site_code**和**site_no**应该是唯一的，只有两个值都匹配。这意味着**site_code**是**101**并且**site_no**是**102**并且我们尝试再次为两者插入相同的值应该拒绝它。如果我们其中一个值不同，它应该允许它。

在这种情况下，我们在插入时将这两个值视为一个。

我希望我很清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:13:07.133

除了您的表设计登录之外，您还可以创建一个自定义回调函数来检查这些值在您的数据库中是否存在。验证将在您的 2 个字段之一中进行，例如 site_code：

```
public function _unique_code_no($site_code)
{
    $CI =& get_instance();
    $CI->form_validation->set_message('_unique_code_no', 'the values must be unique');
    $site_no=$CI->input->post('id');
    $query=$CI->db->query("select 1 from mytable where site_no=$site_no and site_code=$site_code");
    if ($query->num_rows==0){
        return TRUE;
    }else{
        return FALSE;
    }
} 
```

和验证规则：

```
$this->form_validation->set_rules('site_code', 'Site code', 'required|_unique_code_no'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:47:16.960

听起来您应该查看桌子上的约束。

在这种情况下使用 id 列是否有充分的理由？如果没有，则应将其删除，然后将 site_code 和 site_no 都设置为主键。

使用 (site_code,site_no) 作为主键，您将无法插入这两个值的重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:14:49.077

我认为你应该使用`callback_column( string $column , mixed $callback )`方法。检查此链接[回调列](http://www.grocerycrud.com/documentation/options_functions/callback_before_insert)

# android - 两行文本时按钮更改位置

> ID：15494527
> 
> 赞同：8
> 
> 时间：2013-03-19T08:22:51.333
> 
> 标签：android, layout

嗨，我有这个简单的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button
    android:id="@+id/btn_trigger_left"
    style="@style/triggerButton"
    android:layout_marginRight="5dip"
    android:text="Mold" />

<Button
    android:id="@+id/btn_trigger_right"
    style="@style/triggerButton"
    android:text="Fums" />

</LinearLayout> 
```

风格就在这里。

```
<style name="triggerButton">
    <item name="android:layout_width">0dp</item>
    <item name="android:layout_height">50dip</item>
    <item name="android:textSize">12sp</item>
    <item name="android:gravity">center</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">@color/white</item>
    <item name="android:layout_weight">2</item>
    <item name="android:background">@drawable/symptom_bg</item>
    <item name="android:layout_marginBottom">0dip</item>
</style> 
```

输出是这样的。 ![在此处输入图像描述](../Images/c77d3b503db4c7bcab45c1a3e7f2f321.png)

没关系，但是当我的文本足够长到两行时，按钮就会像这样下来。

![在此处输入图像描述](../Images/566c7456b5e708d452130ba7696f0eda.png)

当我做错时请帮助我？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T08:48:26.060

放

> 机器人：baselineAligned="假"

在您的线性布局中。

LinearLayout 默认对齐所有子控件的基线，在这里您需要禁用该行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:43:39.537

```
 <item name="android:gravity">center</item> 
```

到

```
<item name="android:gravity">top</item> 
```

像这样设置重力`style.xml`。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:41:09.800

修复 Button 中文本的最大长度

```
android:maxLength="20" 
```

希望这会有所帮助。

# php - 网站首次访问，如何检测？

> ID：15494528
> 
> 赞同：0
> 
> 时间：2013-03-19T08:22:51.570
> 
> 标签：php, web

我正在做一个基本网站，用户必须进入该网站，如果这是第一次访问，那么他/她会看到一些信息。我不想使用 cookie，因为并非所有用户都会启用他们的 cookie。IP的问题在于它主要是动态的，因此也不是很有效。

另外，有没有我可以使用的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:31:57.443

IP 不能识别用户。它只是识别网络上的一个节点（防火墙、NIC 等）。如果不使用 cookie，真的没有办法在全球范围内说明这一点。您必须在他们的机器上存储一些东西才能让他们将其返回给您的应用程序。出于安全原因，浏览器是匿名的。人们必须自愿做出一些识别。

我解决这个问题的方法是记录用户的交互以及他们在 MySQL 中的会话。我检查他们是否使用 Javascript 以及是否启用了 cookie。如果他们启用了 cookie，那么我会向他们传递一个唯一的 ID。如果他们不这样做，那么我只是忽略数据。如果他们确实打开了 cookie 或 javascript，那么我将在数据库中创建额外的标志。在他们提交个人身份信息时，我可以将他们的记录与文件中的其他信息配对。

通过类似于亚马逊的 [地址] 栏传递 $_GET 变量，有一种老式的方法来做到这一点。您还可以使网站上的所有按钮和链接都使用 POST 表单（但这更麻烦）。但是，除非您对信息进行散列并继续将其传递，否则您将无法信任该信息。始终检查哈希以确保它们不会更改查询行。

因此，如果您要传递用户 ID，那么您将拥有一个可以像这样工作的地址栏：

```
<?php
  function addrAppend($uid){
    //secret word would be something that you know so it works like a pre-shared key.
    $hash = md5($uid."secretword".$_SERVER['REMOTE_ADDR']);
    $app="?uid=$uid&hash=$hash";

    return $app;
  }

 ?> 
```

请注意，如果您正在散列用户的 IP 地址并且他们正在使用代理，这将失败。你总是可以散列他们的操作系统。

我讨厌内联，因为它不是很好的形式，但是当你在布局中调用它时，你可以说：'>我的链接

对于下一页上的检查和验证，您可以执行以下操作：

```
 if(!empty($_GET['hash'])){
        if ($_GET['hash']==md5($temp_UID."secretword".$client_ADDR)){
         //then it's unaltered assuming they didn't guess your hashing convention
        } else {
         //then they altered the get vars so flush the info or end().
        }
      }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:25:08.617

为那些使用现代网络浏览器的人使用 localStorage：

[https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:36:52.603

如果您想构建专业级的跟踪解决方案。您可以存储来自用户的以下内容：

1.  IP地址
2.  操作系统的名称
3.  屏幕分辨率
4.  时区设置，
5.  计算机上安装的字体，
6.  包含浏览器信息的字符串（即用户代理字符串），
7.  测试的时间和日期，
8.  安装在浏览器上的插件，
9.  接受的 MIME 类型列表，
10.  navigator 对象散列， navigator.doNotTrack 和 navigator.buildID 的值，
11.  和生成的标识符。

当然，您不需要所有这些。这些（如`IP`, `Screen resolution`, `UserAgent`）的子集作为用户的指纹就足够了。

**我怎么知道？**`Cross browser fingerprinting`较早从事技术 工作。您可以在此处阅读更多信息：http: [//fingerprint.pet-portal.eu/](http://fingerprint.pet-portal.eu/)

事实上，即使他更改了浏览器，您也可以跟踪实际进入与返回的用户！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T08:24:45.827

IP是识别用户的最佳方式。它可以明显改变，但事实就是如此。

# php - 从搜索结果中缩小搜索范围

> ID：15494530
> 
> 赞同：0
> 
> 时间：2013-03-19T08:23:10.630
> 
> 标签：php, database, search

我正在尝试缩小我正在玩的游戏的搜索结果。

我试图通过单击显示的特定用户来缩小搜索结果的范围。单击用户后，它需要显示该用户的所有数据库条目。

**例如。**

我的 dbase 字段是：-`Alliance, User, Might`

当我搜索“联盟”时，我目前得到该联盟中所有用户的列表

然后我想单击特定的“用户”并仅显示该用户的结果

这是我到目前为止所拥有的

```
 <?php
     mysql_connect ("localhost","my username","password")  or die (mysql_error());
        mysql_select_db ("my_dbase");

  $term = $_POST['term'];

  $data = mysql_query("select * FROM my_table WHERE alliance like '%$term%' ORDER BY type, alliance, might DESC");

        echo "<table border='1' cellpadding='5'>";
        echo "<tr> <th>Alliance</th> <th>User</th> <th>Might</th> </tr>";

        // loop through results of database query, displaying them in the table

        while($row = mysql_fetch_array( $data )) {

        // echo out the contents of each row into a table

                echo "<tr>";
                echo '<td>' . $row['alliance'] . '</td>';
                echo '<td>' . $row['user'] . '</td>';
            echo '<td>' . $row['might'] . '</td>';
                echo "</tr>";
        } 

        // close table>
        echo "</table>";
  ?> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:29:38.627

您需要为用户详细信息页面设置一个链接，如下所示，

```
echo '<td><a href="userDetail.php?userID='.$row['id'].'">' . $row['user'] . '</a></td>'; 
```

创建一个名为的新页面`userDetail.php`，然后根据传递的用户 ID 触发 SELECT 查询，然后就可以了。

# c++ - 如何在成员模板函数中选择不同类型的代码路径

> ID：15494531
> 
> 赞同：5
> 
> 时间：2013-03-19T08:23:12.430
> 
> 标签：c++, templates

我有一个基于运行时返回特定设备的类。

```
struct ComponentDc;
struct ComponentIc;

typedef Device<ComponentDc> DevComponentDc;
typedef Device<ComponentIc> DevComponentIc;

template<class Component>
class Device{
 Device<Component>* getDevice() { return this; }
 void exec() { }
}; 
```

在`exec()`中，如果组件类型是，我想打印“Hello”，如果是，我想打印`ComponentDc`world `ComponentIc`。此外，这些是唯一可以用来创建设备的两种类型。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:29:55.107

你有两种经典的可能性。

首先，使用两个全局函数重载，一个 for `ComponentDc`，一个 for `ComponentIc`：

```
void globalExec(ComponentDc) { std::cout << "Hello"; }
void globalExec(ComponentIc) { std::cout << "World"; }

void Device<Component>::exec() { globalExec(Component); } 
```

其次，使用 traits-class：纯模板类，没有字段，具有不同的 typedef，只有静态函数作为方法。这个类对不同的可能参数类型有自己的特化。

```
template<Component> class DeviceTraits {};

template<> class DeviceTraits<ComponentDc> { 
    static std::string getMessage() { return "Hello"; }
};

template<> class DeviceTraits<ComponentIc> { 
    static std::string getMessage() { return "World"; }
};

void Device<Component>::exec() { 
    std::cout << DeviceTraits<Component>::getMessage(); 
} 
```

使用特征类的好处是你不必用几个函数破坏你的全局命名空间。

关于`Device`类本身的部分特化——这并不总是可能的，将任何模板参数特定的代码移动到特征类中被认为更方便。

这是 STL 中使用的经典方法。或者，您可以使用`boost::enable_if`or `std::enable_if`（对于最新的编译器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:29:17.707

您可以显式实例化模板：

```
template<> class Device<ComponentDc> {
    ...
    void exec() { cout << "Hello"; }
}; 
```

也是如此`Device<ComponentIc>`。

此外，如果您想将模板参数限制为特定的集合，您应该考虑继承或组合而不是模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:37:04.630

你也可以使用 boost::enable_if

[http://www.boost.org/doc/libs/1_53_0/libs/utility/enable_if.html](http://www.boost.org/doc/libs/1_53_0/libs/utility/enable_if.html) [http://www.boost.org/doc/libs/1_44_0/libs/type_traits/doc/html/boost_typetraits/reference /is_same.html](http://www.boost.org/doc/libs/1_44_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html)

```
void Device<Component>::exec(boost::enable_if< boost::is_same<Component,ComponentDc> >* enabler = 0)
{
}

void Device<Component>::exec(boost::enable_if< boost::is_same<Component,ComponentIc> >* enabler = 0)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:28:10.447

用于实例模板专业化：[http ://www.cprogramming.com/tutorial/template_specialization.html](http://www.cprogramming.com/tutorial/template_specialization.html)

此处将其用于特定方法： [Template specialization of a single method from a templated class](https://stackoverflow.com/questions/1723537/template-specialization-of-a-single-method-from-a-templated-class)

# html - 如何仅为 ipad 附加一个特殊类 - 引导程序

> ID：15494534
> 
> 赞同：-2
> 
> 时间：2013-03-19T08:23:25.260
> 
> 标签：html, css, twitter-bootstrap

在网站桌面版看起来很精致，风格也很完美。但是当我在 iPad 中查看网站时，某些区域需要更多样式（更多填充和边距）。

我想要做的是向 div 添加一个特殊的类，以便它仅在我在 iPad 上查看时适用。然后特定的类可以处理所有额外的样式。

用户是否正在通过 iPad 查看是否有远距离跟踪？我该怎么做？有什么解决办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:35:45.270

[如何使用 Jquery 检测移动设备](http://www.jquery4u.com/mobile/detect-mobile-devices-jquery/)

```
var isiPad = /ipad/i.test(navigator.userAgent.toLowerCase());

if (isiPad)
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:27:47.827

试试这个

> var ipad = navigator.userAgent.match(/iPad/i) != null;
> 
> if (ipad) $("#div").addClass('ipadClass');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:00:48.437

众所周知，浏览器/设备检测很难正确进行 - 部分原因是历史原因（竞争渲染引擎、用户代理欺骗），部分原因是设备发布的用户代理过多（请参阅[此处](http://www.user-agents.org/)获取代理/设备的不完整列表）。

可以（简单地）在此处的答案中使用该方法，或者使用类似[UA-Parser-js](http://faisalman.github.com/ua-parser-js/)之类的东西- 基于 JavaScript 的用户代理字符串解析器，它试图提供：

*   浏览器
*   引擎
*   操作系统
*   设备

（它有效，但有缺陷）。

除非您正在设计一个**专门用于 iPad**的基于 Web 的应用程序，否则您应该使用一些 CSS 媒体查询，这些查询会根据浏览器/视口的宽度重排内容——移动设备的一个示例可能是：

```
@media only screen and (max-device-width: 480px) {
    div#wrapper {
    width: 400px;
} 
```

Twitter bootstrap 还带有[响应式布局](http://twitter.github.com/bootstrap/scaffolding.html#responsive)...在任何一种情况下，您都必须同时满足纵向和横向模式以及 iPad 的不同版本和分辨率这一事实，这将影响质量，尤其是对于给定 Retina 的图像后期机型展示：

**第一代和第二代：** 1024 × 768 像素（132 PPI 4:3 纵横比）

**第三和第四代：** 2048×1536 像素（264 PPI）

**迷你：** 1,024x768 像素 (163 PPI)

# android - 与在android中下载图像有关的问题

> ID：15494536
> 
> 赞同：0
> 
> 时间：2013-03-19T08:23:29.387
> 
> 标签：android, bitmap

我正在尝试从服务器下载图像并将其保存在 android 的内部存储中。如果我下载的图像小于 2 MB，它在所有情况下都运行良好。但是当我下载任何大小超过 2 MB 的 JPEG 图像时，我面临两个问题。

第一个是当我尝试使用模拟器从服务器下载和保存图像时，我收到一个错误，例如“位图大小超出 VM 预算”并且活动崩溃。

第二个问题是，当我在手机上运行应用程序时，这个问题不是他们的，而是另一个问题正在发生。当我显示下载的图像时，图像还包含一些其他颜色（彩虹色）。

这是我用来下载和保存图像的代码：

```
//For downloading the image file
    void downloadFile(String fileUrl)
    {
        URL myFileUrl = null;
        try {
            myFileUrl = new URL(fileUrl);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try 
        {
            HttpURLConnection conn = (HttpURLConnection) myFileUrl .openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    //For saving the downloaded image 
    void saveImage() {
        try 
        {
            String fileName ="displayimg.png";
            final FileOutputStream fos = openFileOutput(fileName, Activation.MODE_PRIVATE);
            bmImg.compress(CompressFormat.PNG, 90, fos);

        } catch (Exception e) 
        {
            e.printStackTrace();
        }

    } 
```

这是显示图像的代码：

```
private Bitmap myBitmap;
myBitmap= BitmapFactory.decodeFile(imgFile.getAbsolutePath());
ivDisplayImage.setImageBitmap(myBitmap); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:40:10.597

您的代码存在一些问题，首先是您尝试使用 png 格式压缩图像，png 格式不压缩。你应该使用 jpeg。这将减少图像大小和质量。第二件事是下载图像并在图像视图中显示的一种非常有效的方法，这里是链接：[有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)它也解释了您的第一个问题**java.lang.OutofMemoryError：位图大小超出 VM 预算。** 并且有一些不错的库，我建议您使用主题，例如

*   -[懒惰列表](https://github.com/thest1/LazyList)

    -[诺沃达图像加载器](https://github.com/novoda/ImageLoader)

    - [Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:36:23.030

您必须使用[ImageLoader 类](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)来缩放您的位图并将其显示在 imageview 中。

还可以按照[本教程](http://www.technotalkative.com/android-load-images-from-web-and-caching/)从网络显示图像。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:44:49.097

您可以使用通用图像加载器。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。异步下载图像。您将图像缓存在内存或 SD 卡中。

您还可以查看延迟加载[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。

不使用时也回收位图。

```
 bitmap.recycle(); 
```

要有效地加载 bitmpas，请参阅链接中的文档。 [http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

java.lang.OutofMemoryError: 位图大小超出 VM 预算意味着您有内存泄漏。 [http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。演讲是关于内存管理和避免内存泄漏的。还解释了如何使用 MAT Analyzer 来查找内存泄漏。

[压缩为 png 时位图颜色发生变化](https://stackoverflow.com/questions/5131651/bitmap-color-change-while-compressing-to-png)。检查可能与您的问题有关的答案。还要检查你的手机运行的是什么安卓版本。

[压缩为 png 时位图颜色发生变化](https://stackoverflow.com/questions/5131651/bitmap-color-change-while-compressing-to-png)。检查此链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:32:11.273

嘿，我建议你使用这个库： http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)

这是示例代码：

```
 AsyncHttpClient client = new AsyncHttpClient();
        String[] allowedContentTypes = new String[] { "image/jpeg" }; // here you need to type the mimetype of the file

        client.get("link to jpg or any image"),
                new BinaryHttpResponseHandler(allowedContentTypes) {
                    @Override
                    public void onSuccess(byte[] fileData) { 
                        // this means it downloaded succesfully and you could make a filoutputstream to sdcard 
                        FileOutputStream fos;
                        try {
                            fos = new FileOutputStream(Environment
                                    .getExternalStorageDirectory()
                                    + "/Images/test.jpg");

                            fos.write(fileData);
                            fos.close();
                            fos.flush();
                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } finally {
                        // here you could set it to an imageview or do anything you wouyld like

                        }
                    }
                });
    } 
```

如果您有任何问题，请告诉我。

# javascript - 使用 Win8 的 Javascript 漫游设置

> ID：15494539
> 
> 赞同：4
> 
> 时间：2013-03-19T08:23:37.580
> 
> 标签：javascript, html, windows-8

我正在尝试在 WinJS 应用程序中使用漫游设置。我正在使用的代码在这里：

```
var test = document.getElementById("testButton");
test.addEventListener("click", function () {
     var appData = Windows.Storage.ApplicationData.current;
     var roamingSettings = appData.roamingSettings;

     roamingSettings["test"] = "test";

     var lbl = document.getElementById("testLabel");
     lbl.innerHTML = roamingSettings["test"];
}); 
```

我在 C# 中执行此操作似乎没有任何问题，但在 WinJS 中，我只是从阅读中得到未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:31:36.020

您需要使用对象的`values`属性`roamingSettings`，它是[ApplicationDataContainer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacontainer.aspx)的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:24:11.053

几个例子给出了以下结果：

```
var roamingSettings;
roamingSettings["test"] = "test";
var lbl = document.getElementById("testLabel");
lbl.innerHTML = roamingSettings["test"]; 
```

不明确的

```
var roamingSettings["test"] = "test";
var lbl = document.getElementById("testLabel");
lbl.innerHTML = roamingSettings["test"]; 
```

不明确的

```
var roamingSettings = [];
roamingSettings["test"] = "test";
var lbl = document.getElementById("testLabel");
lbl.innerHTML = roamingSettings["test"]; 
```

这个有效。这是一个[jsFiddle](http://jsfiddle.net/JARPm/2/)。查看`appData.roamingSettings`最初的情况，让我知道这是否不会导致您进行修复。

# tooltip - 动态工具提示 MVC3 剃须刀

> ID：15494540
> 
> 赞同：1
> 
> 时间：2013-03-19T08:23:37.603
> 
> 标签：tooltip

我有一个不包含长内容的文本框，所以如果它是长内容，我们应该显示 MVC3 动态内容工具提示所需的工具提示的内容。请举例说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T20:35:30.180

几乎最简单的方法就是把`@data_toggle = "tooltip"`, 像这样：

> @Html.TextBoxFor(m => m.Matricula, new {@class = "form-control", @placeholder = "Matrícula", @title = "Matrícula", @data_toggle = "tooltip", @data_placement = "bottom" })

# actionscript-3 - 如果它们在具有不同坐标空间的不同容器中，如何使用一个精灵作为另一个精灵的掩码？

> ID：15494541
> 
> 赞同：0
> 
> 时间：2013-03-19T08:23:40.070
> 
> 标签：actionscript-3, flash, mask, masking

如何制作一些`Shape`或`Bitmap`成为不可移动的蒙版，将蒙版上方的所有图形都剪掉。（它们放置在具有不同坐标空间的不同容器中）

一些解释：我`Shape`在一类中有一些矢量，在另一类中有一些`Bitmap`图像。我想让形状像“面具”一样，切割上面的图像`Shape`。

我有两个想法，但它们不起作用：

1）我尝试`BlendMode`过，但它们以另一种方式工作 - 如果我想删除某些图像，该图像必须是遮罩图像的父级，这在我的情况下是不可接受的：图像可以移动，但遮罩应该是不可移动的。我也不能将遮罩移动到图像的子容器中，因为它们位于不同的坐标空间中。我做了解释图：http: [//i.stack.imgur.com/Spbx4.png](http://i.stack.imgur.com/Spbx4.png)

2）使用`.mask`带有遮罩层的属性。但是掩码和位图在不同的坐标空间中，所以这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:52:59.020

面膜是解决方案！`BlendMode.Erase`我制作了黑色面具，在其中我用属性绘制了我的形状。所以我进入了这个面具透明形状的孔。然后我将它设置`.mask`为我的图像的属性并设置为 image 和 mask `.cacheAsBitmap = true`。必须将蒙版和图像添加到舞台（和蒙版`.visibility = false`）。

这种方式面具开始工作和透明区域“切割”我的形象。

# java - 是否可以使用 JFreeChart 旋转 3D 轴？

> ID：15494542
> 
> 赞同：0
> 
> 时间：2013-03-19T08:23:43.263
> 
> 标签：java, jfreechart, graphing

是否可以在 3D 中调整图表轴的角度？特别是，我正在使用 createBarChart3D。唯一的配置选项在`BarRenderer3D`for x & y offsets 的构造函数中。网络搜索只导致有关在 3D 中旋转标签和查阅 API 文档的问题`CategoryAxis3D`，`NumberAxis3D`我无法找到任何轴旋转功能。

这就是我所拥有的： ![3D 条形图](../Images/73f23572dc3d0e8c84740855251e75b9.png)

这就是我要的：

![3D 条形图角度轴](../Images/2607bd93196d2f0e5a35fdec871e69b6.png)

这如何在 JFreeChart 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T11:13:38.200

这不能在 JFreeChart 中完成，它没有真正的 3D 渲染器（它只是为 2D 图表添加 3D 效果）。有一个名为[Orson Charts 3D](http://www.object-refinery.com/orsoncharts/)的新库（由 JFreeChart 的作者 - 又名我）可以满足您的要求。它不像 JFreeChart 那样免费。

# java - 用 JVM 参数覆盖日志级别（java.util.logging）？

> ID：15494545
> 
> 赞同：6
> 
> 时间：2013-03-19T08:24:01.317
> 
> 标签：java, logging, jvm-arguments, java.util.logging

是否可以通过在应用程序启动时传递 JVM 选项来覆盖/设置 java.util.logging.Logger 的日志级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:08:16.603

有以下可用的系统属性，您可以在其中配置记录器的日志级别和初始化逻辑。

*   java.util.logging.manager
    *   您可以定义自己的 LogManager
*   java.util.logging.config.class
    *   自定义日志记录配置为类文件
*   java.util.logging.config.file
    *   自定义日志配置作为配置文件

LogManager 文档提供了有关它们的更多信息，[http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogManager.html](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogManager.html)

# sharepoint - 如何从另一个访问 SharePoint 页面的元数据？

> ID：15494547
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:24:11.860
> 
> 标签：sharepoint, sharepoint-2013

如何从另一个 SharePoint 页面访问一个 SharePoint 页面的元数据？通过 Web 部件？我不想使用任何类型的列表。

我看过[这篇博文](http://blogs.technet.com/b/speschka/archive/2012/07/27/using-dreamweaver-and-design-manager-with-sharepoint-2013.aspx)，但我似乎仍然无法弄清楚。

以下代码是否相关？

```
<asp:Content ContentPlaceholderID="PlaceHolderMain" runat="server">
    <PublishingWebControls:RichHtmlField id="PageContent" FieldName="PublishingPageContent" DisableInputFieldLabel="true" runat="server"/>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:20:59.900

不要将共享信息存储在页面中，最好将元数据存储在 PropertyBag 中。

您有不同的 Scope 用于存储属性：

*   农场
*   项目清单
*   Web应用程序
*   地点
*   列表/库文件夹。

示例来自： http: [//www.codeproject.com/Articles/43601/SharePoint-Property-Bag](http://www.codeproject.com/Articles/43601/SharePoint-Property-Bag)

```
SPSecurity.RunWithElevatedPrivileges(delegate()
        {
        try
        {
            using (SPSite RootSite = new SPSite(URL))
            {
                using (SPWeb SiteCollection = RootSite.OpenWeb())
                {                    
                    try
                    {
                        SiteCollection.AllowUnsafeUpdates = true;
                       // Get connection string from Property bag
                        if (SiteCollection.AllProperties.ContainsKey("ConnectionString"))
                        {
                            ConnectionString = SiteCollection.AllProperties["ConnectionString"].ToString();
                        }                        
                        // Set siteID in the Property bag
                        SiteCollection.Properties["siteID"] = siteID;
                        SiteCollection.Properties.Update();
                        SiteCollection.AllowUnsafeUpdates = false;                        
                    }
                    catch (Exception ex) 
                    { 
                      //Handle Exception  
                    }           
                }
            }
        }
        catch(Exception ex)        
        {            
        }
        }); 
```

# c - C - Malloc 导致程序崩溃

> ID：15494553
> 
> 赞同：1
> 
> 时间：2013-03-19T08:24:44.287
> 
> 标签：c, crash, malloc

我正在编写这个 C 代码，它接收一个文件并从中读取值，该代码还没有做任何事情，但这是我到目前为止所拥有的。程序在调用四个 malloc 的块中崩溃。如果我注释掉 y、f 和 yp，程序运行良好。我不知道是什么原因造成的。因此，任何帮助将不胜感激。

注意：我正在使用 gcc 在 ubuntu 上对此进行测试。我确实尝试将 malloc 强制转换为“（float *）”，但我仍然遇到同样的错误。

```
int main( int argc, char *argv[])
{
    FILE *rhs, *output;
    int niter, n, i = 0, j = 0, k = 0, n1 = n + 1;

    rhs = fopen(argv[1], "r");
    // ab+ opens file for writting and creates the file if need be
    output = fopen(argv[2], "ab+");
    niter = atoi(argv[3]);

    // check if files open up or not, if not exit.
    if((rhs == NULL) || (output == NULL))
    {
        printf("Error Opening files.\n");
        exit(1);
    }

    // read in N
    fscanf(rhs, "%d", &n);

    // THIS IS THE BLOCK CAUSING THE CRASH
    // CODE WORKS WHEN I COMMENT OUT LINES AND ONLY LEAVE ONE OF THEM IN
    // generate array to hold values from rhs file
    float *numbers = malloc(sizeof(float) * ((n1)*(n1)));
    float *y = malloc(sizeof(float) * ((n1)*(n1)));
    float *f = malloc(sizeof(float) * ((n1)*(n1)));
    float *yp = malloc(sizeof(float) * ((n1)*(n1)));

    // get numbers and store into array
    while(fscanf(rhs, "%f", &numbers[i]) != EOF)
    {
        printf("In while %f\n", numbers[i]);
        i++;
    }

    fclose(rhs);

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:27:00.417

一个问题是：

您正在使用来自以下位置`n1`的未初始化值进行初始化`n`：

```
int niter, n, i = 0, j = 0, k = 0, n1 = n + 1;
                                        ^
                                        +-- "n" is not initialized here, might have any value.
                                            thus, "n1" is also not initialized to a known value. 
```

因此，您的调用`malloc`很可能收到太大的值而无法分配。读完“n”后初始化“n1”：

```
// read in N
fscanf(rhs, "%d", &n);
n1 = n + 1; 
```

在任何情况下，都值得检查返回值，`malloc()`以查看它是否返回 NULL，以防无法分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:33:45.793

调用`n1`时包含垃圾。`malloc()`因此，您只需尝试分配**大量内存**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:28:05.633

通过检查数字y、f、yp的值来判断内存是否分配成功，如果它们的值为NULL，则无法分配内存。n1 的值有多大？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:29:50.203

这是因为`n1`在您调用时未定义`malloc()`。

```
int niter, n, i = 0, j = 0, k = 0, n1 = n + 1; 
```

上面的行没有初始化`n`，所以`n1 = n + 1`给 . 赋了一个未定义的值`n1`。

您可能需要`n1 = n + 1;`在`fscanf(rhs, "%d", &n);`.

# java - 需要一种适当的方法来处理 javascript 并在 java 中包装 c++。以便java和javascript可以通信

> ID：15494556
> 
> 赞同：0
> 
> 时间：2013-03-19T08:24:54.920
> 
> 标签：java, javascript, c++, java-native-interface

我有一个 C++ 应用程序，它获取用户列表并显示它们（离线/在线状态）。现在我想创建一个小部件，以便在所有应用程序中使用我的模块。因此，我在 javascript 中创建了一个小部件。

现在，每当加载/调用这个新小部件时，它都会`getContactList()`从我的 C++ 应用程序中调用方法。为此，我计划使用 JNI 并包装我的 C++ 类。（如果我的实施有误，请纠正我）。

需要帮助，以了解我们如何在 java 中制作 javascript 调用方法，从而调用 C++ 的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:33:39.517

Java Applet 是客户端。您的 JNI 计划是服务器端。

您需要创建一个位于 Client 和 JNI 之间的 Java-Server，或者您摆脱 Java 并在 c++ 中实现一个 CGI-Module 并通过纯 Javascript（AJAX/JSON/Whatever）进行通信。

# sql - SQL查询 - 查找我的客户访问时间间隔的sql代码是什么

> ID：15494561
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:25:03.237
> 
> 标签：sql, sql-server

我是 SQL 新手，我的任务是执行此操作！我想找到客户使用 sql 查询重新访问我的酒店之前的天数。

这是我当前的数据表：

```
Passport No. Customer Name Check-in Date Check-out Date
123456       David         1/3/2011      5/3/2011
123456       David         8/3/2011      11/3/2011
654321       John          11/3/2011     18/3/2011
987654       Michael       11/3/2011     18/3/2011
654321       John          20/3/2011     24/3/2011
123456       David         7/7/2011      9/7/2011
987654       Michael       5/5/2011      8/5/2011
654321       John          20/4/2011     25/4/2011
123456       David         11/8/2011     18/8/2011
987654       Michael       1/6/2011      5/6/2011
567891       Mary          7/9/2011      3/10/2011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:42:03.540

下面是一个`RANK`在 CTE 中使用下一个记录抵消上一个记录的示例，以便将下一个签入日期与上一个签出日期进行比较：

```
WITH RankedVisits ([Rank], PassportNo, CustomerName, CheckInDate, CheckOutDate) AS
(
    SELECT 
            RANK() OVER (ORDER BY PassportNo, CheckInDate) AS [Rank],
            CustomerName,
            PassportNo,
            CheckInDate,
            CheckOutDate,
    FROM 
            Visits
)

SELECT 
        NextVisit.CustomerName, 
        DATEDIFF(D, PreviousVisit.CheckOutDate, NextVisit.CheckInDate) AS DaysBetween
FROM 
        RankedVisits AS PreviousVisit
JOIN    RankedVisits AS NextVisit
            ON PreviousVisit.[Rank] = NextVisit.[Rank] - 1  --Offset record with previous record

WHERE   NextVisit.PassportNo = PreviousVisit.PassportNo 
```

如果您使用的是 SQL Server 2012，则有一些`LEAD`函数`LAG`可以使我上面的示例更加简洁（并且更快）。

# ruby - 是否有带有不区分大小写后缀的 File.basename？

> ID：15494565
> 
> 赞同：1
> 
> 时间：2013-03-19T08:25:12.047
> 
> 标签：ruby

[http://www.ruby-doc.org/core-2.0/File.html](http://www.ruby-doc.org/core-2.0/File.html)

```
File.basename("/home/gumby/work/Hello.txt")           #=> "Hello.txt"
File.basename("/home/gumby/work/Hello.txt", ".txt")   #=> "Hello" 
```

是否有不区分大小写后缀的 API？我想要以下内容：

```
File.basename("/home/gumby/work/Hello.TXT", ".txt")   #=> "Hello.TXT" 
```

返回`"Hello"`，而不是`"Hello.TXT"`or `"hello"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:27:54.820

很不幸的是，不行。然而，File.basename 真正独立于平台的部分在于路径操作，而不是后缀。因此，您可以轻松地用 sub 替换后缀删除：

```
File.basename(my_path).sub(/\.txt$/i, '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:31:20.077

如何？

```
File.basename("ab.TXT","txt".upcase)
#=> "ab."
File.basename("ab.txt","TXT".downcase)
#=> "ab." 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T08:29:25.457

```
File.basename(file, File.extname(file)) 
```

# ios - 类方法和线程安全（NSJSONSerialization）

> ID：15494567
> 
> 赞同：8
> 
> 时间：2013-03-19T08:25:17.717
> 
> 标签：ios, objective-c, cocoa, thread-safety

在我的 iOS 应用程序中，我在后台线程中做一些工作（使用`performSelectorInBackground`）。在这个线程中，我使用 NSJSONSerialization 及其类方法来解析 JSON 字符串：

```
self.json = [NSJSONSerialization JSONObjectWithData:self.data options:0 error:nil]; 
```

这个类方法（`JSONObjectWithData`）线程安全吗？我可以确定吗？它写在文档的什么地方？

我知道实例方法通常*不是线程安全*的，除非文档说它们是线程安全的。我可以说类方法*是线程安全的*，除非另有说明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:59:25.367

我在这里有点猜测。

[线程编程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)指南状态

> 不可变对象通常是线程安全的；一旦你创建了它们，你就可以安全地将这些对象传入和传出线程。

调用类方法意味着向类对象发送消息，类对象是不可变的。我的结论是从不同的主题调用类方法是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T14:38:02.210

我刚刚在 Apple 开发者论坛上发布了一个类似的问题。我得到的响应是 NSJSONSerialization 是线程安全的：

[https://forums.developer.apple.com/thread/11229](https://forums.developer.apple.com/thread/11229)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T08:36:01.577

托管内容不是线程安全的。您可以在主线程上运行代码，也可以在后台运行它，并在后台线程完成处理后使用 NSNotificationCenter 开始重新加载 UI。

# html - HTML iframe - 禁用滚动

> ID：15494568
> 
> 赞同：94
> 
> 时间：2013-03-19T08:25:25.667
> 
> 标签：html, css, iframe

我的网站中有以下 iframe：

```
<iframe src="<<URL>>" height="800" width="800" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no" style="overflow: hidden"></iframe> 
```

它有滚动条。
如何摆脱它们？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-03-19T08:52:31.993

不幸的是，我认为仅使用 HTML 和 CSS 属性来完全符合 HTML5 是不可能的。然而幸运的是，大多数浏览器仍然支持该`scrolling`属性（已从[HTML5 规范](http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element)中删除）。

`overflow`不是 HTML5 的解决方案，因为唯一**错误**支持此功能的现代浏览器是 Firefox。

当前的解决方案是将两者结合起来：

```
<iframe src="" scrolling="no"></iframe> 
```

```
iframe {
  overflow: hidden;
} 
```

但是随着浏览器的更新，这可能会过时。您可能需要检查此 JavaScript 解决方案：http: [//www.christersvensson.com/html-tool/iframe.htm](http://www.christersvensson.com/html-tool/iframe.htm)

**编辑：**我已经检查过并将`scrolling="no"`在 IE10、Chrome 25 和 Opera 12.12 中工作。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-12-15T09:38:10.183

我用这个css解决了同样的问题：

```
 pointer-events:none; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-05-20T11:37:38.440

它似乎可以使用

```
html, body { overflow: hidden; } 
```

**在**IFrame内

编辑：当然，这只有在您有权访问 iframe 的内容时才有效（在我的情况下）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-19T06:01:59.293

将所有内容设置为：

```
#yourContent{
 width:100%;
height:100%;  // in you csss
} 
```

问题是 iframe 滚动是由内容而不是 iframe 本身设置的。

使用 CSS 将内部内容设置为 100%，并在 HTML 中设置 iframe 所需的内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-16T13:42:20.497

我在当前的浏览器（Google Chrome 版本 60.0.3112.113（官方版本）（64 位））中尝试了 scrolling="no"，但没有成功。但是， scroll="no" 确实有效。可能值得一试

```
<iframe src="<<URL>>" height="800" width="800" sandbox="allow-same-origin allow-scripts allow-forms" scroll="no" style="overflow: hidden"></iframe> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T10:45:50.847

由于*“溢出：隐藏；”* 属性在 iFrame 本身上无法正常工作，但在应用于iFrame*内*的页面主体时似乎会给出结果，我试过这个：

```
iframe body { overflow:hidden; } 
```

令人惊讶的是，它**确实**适用于 Firefox，消除了那些烦人的滚动条。

但在 Safari 中，iframe 的右侧出现了一条奇怪的 2 像素宽的透明线，位于其内容和边框之间。奇怪的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-28T14:27:08.927

这对我有用：

```
<style>
*{overflow:hidden!important;}
html{overflow:scroll!important;}
</style> 
```

注意：如果您需要在任何其他元素中使用滚动条，也可以将 css 添加`{overflow:scroll!important;}`到该元素

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-19T08:27:37.327

添加此样式..为您的 iframe 标记..

```
overflow-x:hidden;
overflow-y:hidden; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-08-30T23:26:08.980

只需添加一个类似于以下任一选项的 iframe。我希望这能解决问题。

第一个选项：

```
<iframe src="https://www.skyhub.ca/featured-listing" style="position: absolute; visibility: hidden;" onload="this.style.position='static'; this.style.visibility='visible';" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" height="400px" width="1200px" allowfullscreen></iframe> 
```

第二个选项：

```
<iframe src="https://www.skyhub.ca/featured-listing" style="display: none;" onload="this.style.display='block';" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" height="400px" width="1200px" allowfullscreen></iframe> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-03-17T02:25:43.967

对于这个框架：

```
 <iframe src="" name="" id=""></iframe> 
```

我在我的css代码上试过这个：

```
 iframe#put the value of id here::-webkit-scrollbar {
         display: none;
    } 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-03-19T09:00:14.940

html5以下版本

```
iframe {
    overflow:hidden;
} 
```

在 HTML5 中

```
<iframe seamless="seamless"  ....>

iframe[seamless]{

   overflow: hidden;
} 
```

**但尚未正确支持**

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2015-12-24T22:47:22.620

您可以使用以下 CSS 代码：

```
margin-top: -145px; 
margin-left: -80px;
margin-bottom: -650px; 
```

为了限制 iframe 的视图。

# java - 具有同步和非同步方法的 ConcurrentModificationException

> ID：15494569
> 
> 赞同：0
> 
> 时间：2013-03-19T08:25:34.103
> 
> 标签：java, multithreading

所以我们有一个整洁的类，看起来类似于：

```
class ConnectionObserver {
    private List<DbConnection> connections;

    // singleton logic

    public synchronized void closeConnection(int id) {
        for(Iterator<DbConnection> it = connections.iterator(): it.hasNext()) {
            DbConnection conn = it.next();
            if(conn.getId() == id) {
                conn.close();
                it.remove();
            }
        }
    }

    public int countOpenConnections() {
        int open = 0;
        for(DbConnection conn : connections) {
            if(conn.isOpen()) {
                ++open;
            }
        }
        return open;
    }

    // more synchronized methods which alter the list via iterators
} 
```

问题是，当多个线程访问单例时，一些调用同步了更改列表的方法，并且一些尝试计算打开的连接，这些连接有时会失败，因为同时列表被同步方法之一更改。

我相信仅仅使方法`countOpenConnections`同步也不能解决问题。我认为，列出清单 a`Collections.synchronizedList`也不会做太多事情。

你们中的一些人有什么方法可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:34:41.050

如果您可以制作`List`最终结果，则可以在列表本身上进行同步-这样，任何时候只有一个线程在列表中具有监视器。这种生硬的同步以增加锁竞争为代价解决了眼前的问题；任何时候只有一个线程可以访问`List`。但是为什么多个阅读线程不能同时访问列表-毕竟他们没有修改它...

输入[`ReentrantReadWriteLock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)，这将允许多个线程读取，但如果一个线程正在写入，则一切都必须等待。它有两种模式，“读”和“写”（因此得名）。这允许您将修改的方法与不修改的方法分开`List`- 减少锁争用。

```
class ConnectionObserver {

    private List<DbConnection> connections;
    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();

    public void closeConnection(int id) {
        final Lock writeLock = readWriteLock.writeLock();
        writeLock.lock();
        try {
            for (Iterator<DbConnection> it = connections.iterator(); it.hasNext();) {
                DbConnection conn = it.next();
                if (conn.getId() == id) {
                    conn.close();
                    it.remove();
                }
            }
        } finally {
            writeLock.unlock();
        }
    }

    public int countOpenConnections() {
        int open = 0;
        final Lock readLock = readWriteLock.readLock();
        readLock.lock();
        try {
            for (DbConnection conn : connections) {
                if (conn.isOpen()) {
                    ++open;
                }
            }
        } finally {
            readLock.unlock();
        }
        return open;
    }
    // more synchronized methods which alter the list via iterators
} 
```

显然，更改任何其他访问的方法`List`以预先获得适当的锁定并删除任何`synchronized`关键字。

另一方面，我不明白 a 的使用`List`- 在您看来，您必须搜索`List`具有`DbConnection`特定 ID 的 a。不是`Map`更好的选择（恒定而不是线性时间搜索......）

```
 private Map<Integer, DbConnection> connections;

    public void closeConnection(int id) {
        final Lock writeLock = readWriteLock.writeLock();
        writeLock.lock();
        try {
            final DbConnection dbConnection = connections.remove(id);
            if (dbConnection == null) {
                //handle invalid remove attempt
            } else {
                dbConnection.close();
            }
        } finally {
            writeLock.unlock();
        }
    } 

    public int countOpenConnections() {
        int open = 0;
        final Lock readLock = readWriteLock.readLock();
        readLock.lock();
        try {
            for (final DbConnection conn : connections.values()) {
                if (conn.isOpen()) {
                    ++open;
                }
            }
        } finally {
            readLock.unlock();
        }
        return open;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:27:52.387

每次关闭连接时，您都会将其从列表中删除。所以只需返回连接的大小。此外，作为连接观察者，您可以监听连接关闭事件并仅使用打开的连接更新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:31:39.467

> 我相信仅仅使 countOpenConnections 方法同步也不能解决问题。

实际上，这正是使程序正确同步所需要的。

> 我认为，将列表设为 Collections.synchronizedList 也不会做太多事情。

你是对的：`synchronizedList`会给你一个太细粒度的关键部分。

您可以使用的唯一其他方法是复制当前列表、修改副本、然后将副本分配给`volatile`共享变量的方法。我认为您不会从这种方法中受益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:32:20.660

首先，使`countOpenConnections`同步*将*解决问题。

增加并发性可以做的另一件事是`connections`用 CopyOnWriteArrayList 替换当前的字段列表实现。这允许您删除`synchronized`on countOpenConnections，从而消除争用点。但是，由于 CopyOnWriteArrayList 的开销，这仅在 countConnections() 比 closeConnection 更频繁地被调用时才有意义。

# python - 在由多个自定义模块支持的多个脚本中使用 python 的 argparse

> ID：15494574
> 
> 赞同：7
> 
> 时间：2013-03-19T08:26:20.203
> 
> 标签：python, inheritance, command-line-arguments, argparse

我正在构建一组脚本和模块来管理我们的基础设施。为了使事情井井有条，我想尽可能多地整合工作，并尽量减少新脚本的样板。

特别是这里的问题是整合 ArgumentParser 模块。

一个示例结构是让脚本和库组织如下：

```
|-- bin
    |-- script1
    |-- script2
|-- lib
    |-- logger
    |-- lib1
    |-- lib2 
```

在这种情况下`script1`可能只使用`logger`and `lib1`，而`script2`会使用`logger`and `lib2`。在这两种情况下，我都希望记录器接受“-v”和“-d”，同时`script1`也可以接受额外的参数和`lib2`其他参数。我知道这可能会导致冲突，并将手动管理。

**脚本1**

```
#!/usr/bin/env python
import logger
import lib1
argp = argparse.ArgumentParser("logger", parent=[logger.argp]) 
```

**脚本2**

```
#!/usr/bin/env python
import logger
import lib2 
```

**记录器**

```
#!/usr/bin/env python
import argparse
argp = argparse.ArgumentParser("logger")
argp.add_argument('-v', '--verbose', action="store_true", help="Verbose output")
argp.add_argument('-d', '--debug', action="store_true", help="Debug output. Assumes verbose output.") 
```

每个脚本和库都可能有自己的参数，但是这些都必须合并到一个最终的 arg_parse()

到目前为止，我的尝试导致无法继承/扩展 argp 设置。这如何在库文件和脚本之间完成？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T08:43:17.633

最简单的方法是在每个模块中都有一个方法，该方法接受一个`ArgumentParser`实例并向它添加自己的参数。

```
# logger.py
def add_arguments(parser):
    parser.add_argument('-v', '--verbose', action="store_true", help="Verbose output")
    # ...

# lib1.py
def add_arguments(parser):
    parser.add_argument('-x', '--xtreme', action="store_true", help="Extremify")
    # ... 
```

每个脚本都会创建它们`ArgumentParser`，将其传递给提供参数的每个模块，然后添加自己的特定参数。

```
# script1.py
import argparse, logger, lib1
parser = argparse.ArgumentParser("script1")
logger.add_arguments(parser)
lib1.add_arguments(parser)
# add own args... 
```

# c++ - cpp 空数组声明

> ID：15494588
> 
> 赞同：9
> 
> 时间：2013-03-19T08:27:15.400
> 
> 标签：c++

您好，我有以下测试代码，我对 cpp 感到困惑。

1.  如果您在 library.h 中声明一个带有空元素子句的数组.. 编译器会选择什么？它也没有抱怨，我使用 Cygwin。

2.  在 library.cpp 中，我将值分配给两个元素，编译器是否假设一个包含一个元素的数组，而我将第二个元素写入数组范围之外？

### 图书馆.h

```
#ifndef LIBRARY_H
#define LIBRARY_H

class library {

public:
    void print();
    char a[];
};

#endif 
```

### 图书馆.cpp

```
#include <stdio.h>
#include "library.h"

void library::print() {
    a[0] = 'a';
    printf("1\. element: %d\n", a[0]);
    a[1] = 'b';
    printf("2\. element: %d\n", a[1]);
} 
```

### 客户端.cpp

```
#include <stdio.h>
#include "library.h"

void execute();
library l;

int main() {
    l = library();
    l.print();
    return 0;
} 
```

### 生成文件

```
OPTIONS=-Wall

all: main

run: main
        ./main.exe

main: client.o library.o
        g++ $(OPTIONS) -o main $^

library.o: library.cpp library.h
        g++ $(OPTIONS) -c $<

.cpp.o:
        g++ $(OPTIONS) -c $<

clean:
        rm -r *.o 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T08:38:35.467

1.  没有称为 C/C++ 的语言，因此您的 Q 不能同时标记。
2.  由于您使用的是类，因此您的程序只能是 C++ 而不是 C。

* * *

```
public:
     void print();
     char a[]; 
```

这段代码在 C++ 中简直是非法的。C++ 中的数组大小需要是正的编译时间常数。解决方案是将其替换为：

```
public:
      void print();
      std::string a; 
```

* * *

注意声明，

```
char a[]; 
```

在 c99 中有效，被称为**不完整数组类型**，C 标准保证`a`可以存储至少一个该类型的元素`char`。这在 C++ 中无效。C++ 标准不允许这些。仅仅因为两者是不同的语言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T08:49:51.917

首先，它不是合法的 C++。这是一个古老的 hack，C 仅在 C98 中使其合法。基本思想是`struct`只能动态分配（使用`malloc`），并且在它之后为对象分配所需的内存。所以你会做类似的事情`malloc( sizeof( library ) + strlen( s ) + 1 )`。hack 用于避免额外的分配。

使用此 hack 的类*不能*与 一起使用`new`，也不能是成员或基类。（它也不能是 C 中的成员。）

您可以在 C++ 中进行模拟：

```
class Library
{
    //  ...
    char* buffer() { return reinterpret_cast<char*>( this + 1 );
    void* operator new( size_t n, size_t extra )
    {
        assert( n == sizeof( Library ) );
        return ::operator new( n + extra );
    }
}; 
```

但是请注意，与 C 解决方案不同，这存在对齐问题的风险。它适用于字符类型，如果该类的其他成员需要至少与缓冲区类型一样多的对齐，它会起作用，但否则它可能会失败。（g++ 中 std::basic_string 的实现使用了它——如果用 . 实例化会在某些机器上崩溃`double`。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T08:31:14.350

空数组声明一个长度为零的数组。它在 C 中通过将结构 S 放置在大于 sizeof(S) 的内存区域中，然后使用数组访问剩余内存来使用：

```
memory* ptr = malloc(sizeof(memory) + sizeof(char) * 10);
// you can now manipulate ptr->a as an array of 10 elements 
```

这是一个在 C++ 中用处不大的技巧。只需使用 std::vector 代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:41:06.227

它通常被称为 C 中的[struct hack](https://stackoverflow.com/q/3711233/1025391)。它使用一种称为*灵活数组成员*的功能。

然而，这不是任何 C++ 标准规范的一部分。看看[这个问题](https://stackoverflow.com/q/4412749/1025391)。

请注意，观察到某些东西确实有效并不意味着您可以依赖它来可靠地工作。如果行为未定义，从技术上讲，任何事情都可能发生。包括猛龙突然进攻。

在 C++ 中，您可能会使用 a`std::vector<char>`或 a `std::string`。

# winapi - 在焦点之外单击鼠标时隐藏/关闭菜单

> ID：15494591
> 
> 赞同：5
> 
> 时间：2013-03-19T08:27:36.710
> 
> 标签：winapi, menu

我有一个遗留代码，其中完成了 WIn 32 编程。

在这里，有一个托盘图标，右键单击时会启动一个菜单。

但是，即使在其焦点区域之外单击，菜单仍然存在。

当我在其他地方单击鼠标时如何关闭菜单？

像 Qt 这样的框架可以很好地管理它。我是否必须跟踪鼠标指针，捕获点击并查看它是否落在菜单区域之外？

代码在旧版 C 中，没有使用面向对象的概念。所以我不能在这里覆盖一些东西。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T08:30:51.700

`TrackPopupMenu`阅读该功能文档底部的备注：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms648002 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648002(v=vs.85).aspx)

具体来说：

> 要显示通知图标的上下文菜单，当前窗口必须是应用程序调用 TrackPopupMenu 或 TrackPopupMenuEx 之前的前台窗口。否则，当用户在菜单或创建菜单的窗口（如果可见）之外单击时，菜单不会消失。如果当前窗口是子窗口，则必须将（顶层）父窗口设置为前台窗口。

# mysql - 查询从多条记录中选择一条记录

> ID：15494612
> 
> 赞同：1
> 
> 时间：2013-03-19T08:28:50.437
> 
> 标签：mysql

如果我想选择雇主日期“Dec-13”，如何编写查询以更快的方式获取表（最右边），结果看起来像这张图片？有人帮我吗？

![在此处输入图像描述](../Images/7bcf81e8d4b4aad50bec6ecb430b0482.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:29:46.533

用于`DISTINCT`从列中唯一选择值。

```
SELECT DISTINCT Employer_ID
FROM   TableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:29:48.170

尝试：

```
 SELECT ID, Employer_ID
    FROM table
GROUP BY Employer_ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:31:17.237

尝试

```
SELECT * FROM tablename GROUP BY Employer_ID 
```

# css - 调整大小时表 TD not 不剪切内容

> ID：15494613
> 
> 赞同：1
> 
> 时间：2013-03-19T08:28:51.497
> 
> 标签：css

考虑这个小提琴：http: [//jsfiddle.net/BSaWt/1/](http://jsfiddle.net/BSaWt/1/)

```
<style>
table {
    width: 100%;
}
td, th { /* Should be as tight as possible on all resolutions */
    width: 5%;
}
.fixedWidth1 { /* Should allways be 90px or smaller */
    max-width: 90px;
}
.fixedWidth1 img {
    width: 100%;
    height: auto;
}
.dynWidth { /* Should allways eat up all remaining width, but be cut if screen width is smaller than table width */
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60%
}
.dynWidth > a {
    display: block;
}
.dynWidth > span {
    display: inline;
}
</style>

<table>
    <tr>
        <th>col1</th>
        <th>col2</th>
        <th>col3</th>
        <th>col4</th>
        <th>col5</th>
        <th>col6</th>
    </tr>
    <tr>
        <td class="fixedWidth1">
            <a href="#"><img src="category.png" /></a>
        </td>
        <td class="dynWidth">
            <a href="#"><span>A.Way.Too.Large.Text.Which.Cannot.Be.Broken.up.This.ruins.my.entire.layout</span></a>
        <span>This column also contains other elements, but they are not a problem. The problem with this column, is that it does not shrink! I want it to cut off text if the space available to the table shrinks.</span>
        </td>
        <td>Should resize</td>
        <td>Should resize</td>
        <td>Should resize</td>
        <td>Should resize</td>
    </tr>
</table> 
```

我知道我可以通过使用 table-layout:fixed 来使表格尊重宽度。但是通过使用它，它将无法正确扩展。我希望桌子能够响应。这是主要问题。另一个事实是，除了前两列之外，所有分辨率的所有 TD、TH 元素都应尽可能紧凑。第一列有一个明确的像素宽度集，第二列应该调整到所有可用的剩余宽度。

这适用于大分辨率，但是当可用宽度减小时，第二列中的文本会阻止表格缩小。

有没有办法让溢出实际上切断文本，以便表格可以缩小到任何大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:11:33.233

`table-layout:fixed` *是*解决方案，如果您删除`width:100%`.

```
table {
    /* width:100%; */
    table-layout:fixed;
} 
```

您的

```
td, th {
    width: 5%;
} 
```

覆盖`.fixedWidth1`表格单元格的最大宽度。

删除它并添加：

```
.dynWidth {
    word-break:break-word;
} 
```

[JSF](http://jsfiddle.net/BSaWt/5/)中。

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:23:54.617

干得好

```
<html>
        <head>        
    <style type="text/css">
    *{
        margin:0px;
        padding:0px;
    }
    table {
        width: 100%;
    }
    .fixed_width {
        max-width: 90px;
    }
    .fixed_width img {
        width: 100%;
        height: auto;
    }
    .dyn_width a{   
        word-break:break-word;  
    }
    </style>
        </head>
        <body>
    <table border ='1'>
        <tr>
            <th>col1</th>
            <th>col2</th>
            <th>col3</th>
            <th>col4</th>
            <th>col5</th>
            <th>col6</th>
        </tr>
        <tr>
            <td class="fixed_width" ><a href="#"><img src="category.png" /></a></td>
            <td width="300" class="dyn_width">
                <a href="#">A.Way.Too.Large.Text.Which.Cannot.Be.Broken.up.This.ruins.my.entire.layout </a><br/>
                <span>This column also contains other elements, but they are not a problem. The problem with this column, is that it does not shrink! I want it to cut off text if the space available to the table shrinks.</span>
            </td>
            <td>Should resize</td>
            <td>Should resize</td>
            <td>Should resize</td>
            <td>Should resize</td>
        </tr>
    </table>
        </body>
     </html> 
```

# c++ - 无法获得协商身份验证以在 libcurl 程序中工作

> ID：15494618
> 
> 赞同：4
> 
> 时间：2013-03-19T08:29:08.607
> 
> 标签：c++, http, curl, kerberos, spnego

我目前正在`libcurl(version 7.19.6 built with SPNEGO and GSS-Negotiate support)`编写一个客户端（C++/C），它连接到`Kerberos`Tomcat 服务器后面的受保护网页（受保护）。使用命令行：-

```
curl --negotiate -u: http://prtotectedpage.jsp --verbose 
```

这有效（服务器返回一个未经授权的 HTTP 401，然后它允许`SPNEGO`传递和处理令牌，我可以访问受保护的页面）。

但是，当我编写以下代码并尝试时：-

```
using namespace std;
#include <stdio.h>
#include <curl.h>
#define YOUR_URL "http://protectedpage.jsp"
#define ANYUSER ""

int main(int argc, char* argv[])
{
    __asm int 3;               //a debugging thing

//initialize a curl object
CURLcode result;
int x;
CURL* curl = curl_easy_init();                   
if(curl){
    curl_easy_setopt(curl,CURLOPT_HTTPAUTH, CURLAUTH_GSSNEGOTIATE);         
    curl_easy_setopt(curl,CURLOPT_USERNAME, ANYUSER);                       
    curl_easy_setopt(curl,CURLOPT_VERBOSE, 1);
    curl_easy_setopt(curl, CURLOPT_URL,YOUR_URL);
    curl_easy_perform(curl);
    curl_easy_cleanup(curl);                            
}
return 0;
} 
```

在与页面相对应的初始连接（错误 302）被临时移动后，我得到了服务器的响应。

有谁知道这怎么可能发生。

其他一些信息配置（`KDC = Windows Active Directory in Windows server 2008`），

`curl version(7.19.6)`和

```
IDE = (Microsoft visual studio) 
```

好的，我对wireshark进行了更多调查，发现他们的初始请求之间存在以下差异：-

对于命令行一（即成功的）：-

```
GET /protected.jsp HTTP 1.1 \r\n
Host : somecomputername
User Agent: curl(7.19.6) (ipc-386-win32) libcurl/7.19.16 OPENSSL/0.9.8K \r\n
Accept */*\r\n
Full request: [http://somecomputername/protected.jsp] 
```

而对于客户端代码（我编写但失败的代码）：-

```
GET /protected.jsp HTTP 1.1 \r\n
Host : somecomputername   
Accept */*\r\n
Full request: [http://somecomputername/protected.jsp] 
```

这意味着用户代理没有在程序中传递。我仍在研究它，一些输入将不胜感激

第二次编辑：-我对两者的详细输出进行了观察：-

对于命令行版本（工作一个） -

```
> GET /examples/ HTTP/1.1
> User-Agent: curl/7.19.6 (i386-pc-win32) libcurl/7.19.6 OpenSSL/0.9.8k
> Host: somecomputer
> Accept: */* 
```

而对于非工作的（我写的客户端代码）： -

```
> GET /examples HTTP/1.1
Authorization: Basic RGt1bUByMTIzOg==
User-Agent: curl/7.19.6 (i386-pc-win32) libcurl/7.19.6 OpenSSL/0.9.8k
Host: somecomputer
Accept: */* 
```

这两行都是各自 .exe 文件输出的前几行。现在我注意到两件事。默认情况下，失败的一个会转到基本。两个（这个更令人不安），在失败的一个中用户代理和主机行中没有箭头（>）。这是否意味着永远不会发送用户代理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:56:34.263

好的，经过 nm 的一些指示和一些在这里和那里的挣扎，我终于让它工作了，我终于得到了一个工作代码：-

```
using namespace std;

#include "stdafx.h"
#include <stdio.h>
#include <curl.h>

#define YOUR_URL "http://invr28ppqa24:8080/examples"
#define ANYUSER ""
#define ANYPWD ""

int main(int argc, char* argv[])
{
//__asm int 3;

//initialize a curl object
CURLcode result;
int x;
CURL* curl = curl_easy_init();                  //initialize a easy curl handle
if(curl){
    curl_easy_setopt(curl,CURLOPT_USERNAME, ANYUSER);                       //set second option to enable anyuser, a trick necessary for program to work
    curl_easy_setopt(curl,CURLOPT_USERNAME, ANYPWD);
    curl_easy_setopt(curl,CURLOPT_VERBOSE, 1);
    curl_easy_setopt(curl, CURLOPT_URL,YOUR_URL);
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, "false");
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "curl/7.19.6 (i386-pc-win32) libcurl/7.19.6 OpenSSL/0.9.8k");     
    curl_easy_setopt(curl,CURLOPT_HTTPAUTH, CURLAUTH_GSSNEGOTIATE);         //set first option to enable gssnegotiate authentication
    curl_easy_perform(curl);
    //curl_easy_cleanup(curl);
    scanf("%d", &x);                            //last statement used to get delay in demo situations
}
return 0; 
```

}

302 仍然出现，我必须手动设置用户代理（不是那么优雅）。由于跟随位置，问题基本得到解决。谢谢。

最初的 302 错误仍然存​​在并且没有得到答复。

# javascript - 使背景图像自动滑动

> ID：15494619
> 
> 赞同：0
> 
> 时间：2013-03-19T08:29:10.597
> 
> 标签：javascript, html

我有这段代码，我正在从 codrops 获得的模板中尝试。我一直试图让背景图像自动旋转，但我失败了。有人可以帮我吗：这就是我所拥有的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

    <head>
        <title>Thumbnails Navigation Gallery with jQuery</title>
        <meta http-equiv="Content-Type"
        content="text/html; charset=UTF-8" />
        <meta name="description" content="Thumbnails Navigation Gallery with jQuery and CSS3"
        />
        <meta name="keywords" content="jquery, thumbnails, gallery, menu, navigation, full page, background, image, photo, portfolio, photography"
        />
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"
        />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="js/cufon-yui.js" type="text/javascript"></script>
        <script src="js/Quicksand_Book_400.font.js" type="text/javascript"></script>
        <script type="text/javascript">
            Cufon.replace('span,p,h1', {
                textShadow: '0px 0px 1px #ffffff'
            });
        </script>
        <style>
            span.reference {
                font-family:Arial;
                position:fixed;
                left:10px;
                bottom:10px;
                font-size:11px;
            }
            span.reference a {
                color:#aaa;
                text-decoration:none;
                margin-right:20px;
            }
            span.reference a:hover {
                color:#ddd;
            }
        </style>
    </head>

    <body>
        <div id="st_main" class="st_main">
            <img src="images/album/1.jpg" alt="" class="st_preview" style="display:none;"
            />
            <div class="st_overlay"></div>
                <h1>Mark Sebastian</h1>

            <div id="st_loading" class="st_loading"><span>Loading...</span> 
            </div>
            <ul id="st_nav" class="st_navigation">
                <li class="album">  <span class="st_link">Newest Collection<span class="st_arrow_down"></span></span>
                    <div
                    class="st_wrapper st_thumbs_wrapper">
                        <div class="st_thumbs">
                            <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                            <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                            <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                            <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                            <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                            <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                            <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                            <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                            <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                            <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                            <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                            <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                        </div>
        </div>
        </li>
        <li class="album">  <span class="st_link">Random Photography<span class="st_arrow_down"></span></span>
            <div
            class="st_wrapper st_thumbs_wrapper">
                <div class="st_thumbs">
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                </div>
                </div>
        </li>
        <li class="album">  <span class="st_link">Best Shots<span class="st_arrow_down"></span></span>
            <div
            class="st_wrapper st_thumbs_wrapper">
                <div class="st_thumbs">
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                </div>
                </div>
        </li>
        <li class="album">  <span class="st_link">Award Winning Collection<span  class="st_arrow_down"></span></span>
            <div
            class="st_wrapper st_thumbs_wrapper">
                <div class="st_thumbs">
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                    <img src="images/album/thumbs/1.jpg" alt="images/album/1.jpg" />
                    <img src="images/album/thumbs/2.jpg" alt="images/album/2.jpg" />
                    <img src="images/album/thumbs/3.jpg" alt="images/album/3.jpg" />
                    <img src="images/album/thumbs/4.jpg" alt="images/album/4.jpg" />
                </div>
                </div>
        </li>
        <li>    <span class="st_link">About<span class="st_arrow_down"></span></span>
            <div
            class="st_about st_thumbs_wrapper">
                <div class="st_subcontent">
                    <p>I am alone, and feel the charm of existence in this spot, which was created
                        for the bliss of souls like mine. I am so happy, my dear friend, so absorbed
                        in the exquisite sense of mere tranquil existence, that I neglect my talents.</p>
                </div>
                </div>
        </li>
        </ul>
        </div>
        <div> <span class="reference">
                <a href="http://tympanus.net/codrops/2010/07/28/thumbnails-navigation- gallery/">back to the Codrops tutorial</a>
                <a  href="http://www.flickr.com/photos/markjsebastian/">Photos by Mark Sebastian</a>
            </span>

        </div>
        <!-- The JavaScript -->
        <script type="text/javascript">
            $(function () {
                //the loading image
                var $loader = $('#st_loading');
                //the ul element 
                var $list = $('#st_nav');
                //the current image being shown
                var $currImage = $('#st_main').children('img:first');

                //let's load the current image 
                //and just then display the navigation menu
                $('<img>').load(function () {
                    $loader.hide();
                    $currImage.fadeIn(3000);
                    //slide out the menu
                    setTimeout(function () {
                        $list.animate({
                            'left': '0px'
                        }, 500);
                    },
                    1000);
                }).attr('src', $currImage.attr('src'));

                //calculates the width of the div element 
                //where the thumbs are going to be displayed
                buildThumbs();

                function buildThumbs() {
                    $list.children('li.album').each(function () {
                        var $elem = $(this);
                        var $thumbs_wrapper = $elem.find('.st_thumbs_wrapper');
                        var $thumbs = $thumbs_wrapper.children(':first');
                        //each thumb has 180px and we add 3 of   margin
                        var finalW = $thumbs.find('img').length * 183;
                        $thumbs.css('width', finalW + 'px');
                        //make this element scrollable
                        makeScrollable($thumbs_wrapper, $thumbs);
                    });
                }

                //clicking on the menu items (up and down arrow)
                //makes the thumbs div appear, and hides the current 
                //opened menu (if any)
                $list.find('.st_arrow_down').live('click', function () {
                    var $this = $(this);
                    hideThumbs();
                    $this.addClass('st_arrow_up').removeClass('st_arrow_down');
                    var $elem = $this.closest('li');
                    $elem.addClass('current').animate({
                        'height': '170px'
                    }, 200);
                    var $thumbs_wrapper = $this.parent().next();
                    $thumbs_wrapper.show(200);
                });
                $list.find('.st_arrow_up').live('click', function () {
                    var $this = $(this);
                    $this.addClass('st_arrow_down').removeClass('st_arrow_up');
                    hideThumbs();
                });

                //clicking on a thumb, replaces the large image
                $list.find('.st_thumbs img').bind('click', function () {
                    var $this = $(this);
                    $loader.show();
                    $('<img class="st_preview"/>').load(function () {
                        var $this = $(this);
                        var $currImage = $('#st_main').children('img:first');
                        $this.insertBefore($currImage);
                        $loader.hide();
                        $currImage.fadeOut(2000, function () {
                            $(this).remove();
                        });
                    }).attr('src', $this.attr('alt'));
                }).bind('mouseenter', function () {
                    $(this).stop().animate({
                        'opacity': '1'
                    });
                }).bind('mouseleave', function () {
                    $(this).stop().animate({
                        'opacity': '0.7'
                    });
                });

                //function to hide the current opened menu
                function hideThumbs() {
                    $list.find('li.current')
                        .animate({
                        'height': '50px'
                    }, 400, function () {
                        $(this).removeClass('current');
                    })
                        .find('.st_thumbs_wrapper')
                        .hide(200)
                        .andSelf()
                        .find('.st_link span')
                        .addClass('st_arrow_down')
                        .removeClass('st_arrow_up');
                }

                //makes the thumbs div scrollable
                //on mouse move the div scrolls automatically
                function makeScrollable($outer, $inner) {
                    var extra = 800;
                    //Get menu width
                    var divWidth = $outer.width();
                    //Remove scrollbars
                    $outer.css({
                        overflow: 'hidden'
                    });
                    //Find last image in container
                    var lastElem = $inner.find('img:last');
                    $outer.scrollLeft(0);
                    //When user move mouse over menu
                    $outer.unbind('mousemove').bind('mousemove', function (e) {
                        var containerWidth = lastElem[0].offsetLeft + lastElem.outerWidth() + 2 * extra;
                        var left = (e.pageX - $outer.offset().left) * (containerWidth - divWidth) / divWidth - extra;
                        $outer.scrollLeft(left);
                    });
                }
            });
        </script>
    </body>

</html> 
```

背景图像立即出现在第一个 div 之后。它是一个

```
<img src="images/album/1.jpg" alt="" class="st_preview" style="display:none;"
/> 
```

有人可以帮助我如何使用另一张图像自动旋转它。看看我的 javascript，让我知道我可以改变什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:05:07.027

jQuery 是一个非常灵活的背景图片旋转解决方案

[http://www.marcofolio.net](http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html)

[如何使用 javascript/ASP.NET/CSS 旋转和淡入淡出背景图像](https://stackoverflow.com/questions/146153/how-to-rotate-and-fade-background-images-in-and-out-with-javascript-asp-net-css)

# tsql - 外键约束冲突，但仍插入行？

> ID：15494623
> 
> 赞同：3
> 
> 时间：2013-03-19T08:29:17.737
> 
> 标签：tsql, error-handling, sql-server-2012

再会

这个 SQL 脚本让我度过了一个奇怪的早晨 - 我收到以下错误（因为这个脚本是一个用于用虚拟数据填充表格的脚本）：

```
Msg 547, Level 16, State 0, Line 7
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ATTR". The conflict occurred in database "PhonebookDuplication", table "dbo.Attributes_Dummy", column 'Id'.
The statement has been terminated. 
```

正如问题所暗示的那样，该表中的行仍然被插入（好像它没有强制执行外键约束）

我还测试了手动插入数据 - 它不会抛出这个错误。

这是我的表格的布局和我执行的脚本。我需要知道发生了什么，以及为什么它会引发错误:) 我敢打赌它是我忽略的一些明显的东西。

![表格布局](../Images/016000a002ef0c2a5ebcebde7427f018.png)

脚本：

```
use PhonebookDuplication;

DROP TABLE Numbers_Attributes_Bridge;
DROP TABLE Numbers_Dummy;
DROP TABLE Attributes_Dummy;

CREATE TABLE Numbers_Dummy
            (
             Id int IDENTITY(1,1) PRIMARY KEY,
             Number VARCHAR(20),
             AccountId INT,
             FirstName VARCHAR(20),
             LastName VARCHAR(20)
            );

CREATE TABLE Attributes_Dummy
            (Id int IDENTITY(1,1) PRIMARY KEY,
             AccountId INT,
             Attribute VARCHAR(100)
            );

CREATE TABLE Numbers_Attributes_Bridge
            ( 
              NumberId int,
              AttributeId int,
              AccountId int,
              Value Varchar(100)
              CONSTRAINT PK_NA PRIMARY KEY
              (
                  NumberId ASC,
                  AttributeId ASC
              )
              CONSTRAINT FK_Numbers FOREIGN KEY (NumberId) REFERENCES Numbers_Dummy(Id),
              CONSTRAINT FK_ATTR FOREIGN KEY (AttributeId) REFERENCES Attributes_Dummy(Id),
            );

DECLARE @COUNTER INT = 0;
SET NOCOUNT ON
WHILE (@COUNTER < 150) 
BEGIN
    INSERT INTO Numbers_Dummy VALUES ('082'+CONVERT(varchar(15),@Counter),2000046,'Eon','du Plessis')
    SET @COUNTER += 1;
END

SELECT COUNT(*) FROM Numbers_Dummy

SET @COUNTER = 0;
WHILE (@COUNTER < 5)
BEGIN
    INSERT INTO Attributes_Dummy VALUES (2000046,'Attribute'+CONVERT(varchar(15),@Counter))
    SET @COUNTER += 1;
END 

SELECT COUNT(*) FROM Attributes_Dummy

DECLARE @COUNTER2 INT = 0 ;
DECLARE @SUBCOUNTER INT = 0; 
WHILE (@COUNTER2 <= 150)
BEGIN
    WHILE (@SUBCOUNTER <= 5)
    BEGIN
        INSERT INTO Numbers_Attributes_Bridge VALUES (@COUNTER2,@SUBCOUNTER,2000046, 'ATTRIBUTE-' + CONVERT(VARCHAR(100),@SUBCOUNTER))
        SET @SUBCOUNTER =@SUBCOUNTER + 1;
    END
    SET @SUBCOUNTER = 0;
    SET @COUNTER2 = @COUNTER2 + 1;
END 
```

逻辑说 numbers_dummy 表将有 150 行，ID = 1 到 150 属性将有 5 行，ID = 1 - 5 Numbers_Attributes_Bridge 应该有 750 行： NumberID = 1 到 150，复合主键值为 AttributeID = 1 到 5

我收到上述错误，但行仍然插入。

以下代码行在手动测试中未引发错误：

```
INSERT INTO Numbers_Attributes_Bridge VALUES (150,5,2000046, 'ATTRIBUTE-5') 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:41:05.273

哟搞砸了计数器，请尝试以下脚本：

```
DECLARE @COUNTER INT = 1;
SET NOCOUNT ON
WHILE (@COUNTER <= 150) 
BEGIN
    INSERT INTO Numbers_Dummy VALUES ('082'+CONVERT(varchar(15),@Counter),2000046,'Eon','du Plessis')
    SET @COUNTER += 1;
END

SELECT COUNT(*) FROM Numbers_Dummy

SET @COUNTER = 1;
WHILE (@COUNTER <= 5)
BEGIN
    INSERT INTO Attributes_Dummy VALUES (2000046,'Attribute'+CONVERT(varchar(15),@Counter))
    SET @COUNTER += 1;
END 

SELECT COUNT(*) FROM Attributes_Dummy

DECLARE @COUNTER2 INT = 1 ;
DECLARE @SUBCOUNTER INT = 1; 
WHILE (@COUNTER2 <= 150)
BEGIN
    WHILE (@SUBCOUNTER <= 5)
    BEGIN
        INSERT INTO Numbers_Attributes_Bridge VALUES (@COUNTER2,@SUBCOUNTER,2000046, 'ATTRIBUTE-' + CONVERT(VARCHAR(100),@SUBCOUNTER))
        SET @SUBCOUNTER =@SUBCOUNTER + 1;
    END
    SET @SUBCOUNTER = 1;
    SET @COUNTER2 = @COUNTER2 + 1;
END 
```

尝试插入 NumberId 或 AttributeId = 0 的行时出现错误，但所有其他行都插入得很好，这就是插入一些记录的原因

# jquery - 无法修复 CloudZoom v1.0.3 和默认 Bootstrap v2.3.1 Carousel 之间的冲突

> ID：15494627
> 
> 赞同：1
> 
> 时间：2013-03-19T08:29:28.317
> 
> 标签：jquery, twitter-bootstrap, cloud, zooming, jquery-migrate

Bootstrap 轮播和云缩放工作，但仅适用于第一张图像。这是一个显示问题的演示...... [http://responsive.jquery-zen-cart.com/normandy/index.php?main_page=product_info&cPath=1_2_3_4&products_id=2](http://responsive.jquery-zen-cart.com/normandy/index.php?main_page=product_info&cPath=1_2_3_4&products_id=2)

尽管上面的链接或云缩放是针对更新版本的，但我想我可能会有所了解。

除了单击下面的缩略图外，轮播还可通过单击上一个、下一个和/或暂停符号之一来工作。

可能会尝试将功能添加到单击中，或者可能会在轮播完成后绑定云缩放。

# objective-c - 为什么用户按下按钮时按钮看起来不同？

> ID：15494629
> 
> 赞同：2
> 
> 时间：2013-03-19T08:29:41.600
> 
> 标签：objective-c, cocoa-touch

```
UIImage * imgBtnReloadAllButton = [UIImage resizeableImageWithCapInsets2:UIEdgeInsetsMake(5, 5, 5, 5) withName:@"search_in_this_area"];
[self.btnReloadAllButton setBackgroundImage:imgBtnReloadAllButton forState:UIControlStateNormal];

PO([self.btnReloadAllButton backgroundImageForState:UIControlStateHighlighted]);
PO([self.btnReloadAllButton backgroundImageForState:UIControlStateNormal]);
PO([self.btnReloadAllButton backgroundImageForState:UIControlStateSelected]);
PO([self.btnReloadAllButton backgroundImageForState:UIControlStateReserved]);
PO([self.btnReloadAllButton backgroundImageForState:UIControlStateApplication]);
PO([self.btnReloadAllButton backgroundImageForState:UIControlStateDisabled]); 
```

很简单。这就是我所看到的：

```
2013-03-19 15:22:22.349 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateHighlighted]: <_UIResizableImage: 0xd6b5a80>
2013-03-19 15:22:22.350 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateNormal]: <_UIResizableImage: 0xd6b5a80>
2013-03-19 15:22:22.350 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateSelected]: <_UIResizableImage: 0xd6b5a80>
2013-03-19 15:22:22.350 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateReserved]: <_UIResizableImage: 0xd6b5a80>
2013-03-19 15:22:22.382 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateApplication]: <_UIResizableImage: 0xd6b5a80>
2013-03-19 15:22:22.383 BadgerNew[1724:c07] [self.btnReloadAllButton backgroundImageForState:UIControlStateDisabled]: <_UIResizableImage: 0xd6b5a80>
(lldb) po imgBtnReloadAllButton
$0 = 0x0d6b5a80 <_UIResizableImage: 0xd6b5a80> 
```

所以看起来所有按钮状态都指向同一个图像，即图像 0xd6b5a80

然而，当用户单击按钮时，在按下按钮之后但在抬起脏手指之前，按钮看起来不同。

基本上当我按下按钮时，按钮的底角不再是圆形的。

发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:38:22.913

即使您没有设置特定的突出显示图像，按钮也会在进入突出显示状态时调整其图像。为防止这种情况，请使用：

```
imgBtnReloadAllButton.adjustsImageWhenHighlighted = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:32:09.993

这是因为当您按下按钮时，iOS 会将您使用的图像渲染为（背景）图像。您可以通过将图像设置为图像而不是背景图像来防止这种情况。

# css - SASS class based themes

> ID：15494640
> 
> 赞同：0
> 
> 时间：2013-03-19T08:29:55.210
> 
> 标签：css, sass, compass-sass

I'm trying to come up with a way of creating a class based theme using SASS but as i'm new to it I don't know enough to make it work or know whether my attempt is even worth it.

I want a theme to be based on a class which is set on either the HTML or Body tag. Then all colors and backgrounds etc are derived from that.

What I want SASS to do is handle all the leg work. Please excuse the crude example as I say I'm new to this:

```
$baseBackground: #0f0;

.blue { 
    $baseBackground: #0f0;
}
.red {
    $baseBackground: #0f0;
}
.header {
    background: $baseBackground;
} 
```

If the code block above is SASS I want the CSS to end up like:

```
.header {
    background: #0f0;
}
.blue .header { 
    background: #00f;
}
.red .header{
    background: #f00;
} 
```

I've no idea whether this is possible or not. Obviously the example above doesn't work. Is there a way to handle this without having to generate the additional styles?

Many thanks for your time.

Chris

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:30:35.333

I think the best solution is probably one that uses [SASS mixins](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins). You can set up a mixin definition for your theme, with the various colors as arguments to the mixin. You can then call your mixins with different argument values for the various themes. Here's an example, extended from yours a little, that shows using multiple arguments and has both a "header" and a "footer" section:

```
@mixin theme($background-color, $text-color) {
    .header {
        background: $background-color;
    }

    .footer {
        background: $background-color;
        color: $text-color;
    }
}

@include theme(#0f0, white);

.blue {
    @include theme(#00f, lightgray);
}

.red {
    @include theme(#f00, gray);
} 
```

The compiled CSS from this example would look like this:

```
.header {
    background: lime;
}
.footer {
    background: lime;
    color: white;
}

.blue .header {
    background: blue;
}
.blue .footer {
    background: blue;
    color: lightgrey;
}

.red .header {
    background: red;
}
.red .footer {
    background: red;
    color: gray;
} 
```

# php - symfony2 控制器的功能测试：如何生成路由

> ID：15494641
> 
> 赞同：14
> 
> 时间：2013-03-19T08:30:04.160
> 
> 标签：php, unit-testing, symfony, controller, phpunit

在 symfony2 控制器上，我想测试一个控制器，它返回一个`Response`对象。我的测试类从`WebTestCase`. 我使用`static::createClient()`来获取可操作的客户端。

我的问题是用虚拟主机**调用**我当前安装的好路由。

`$client->getContainer()->get('router')->generate('my_route', array(), true)`生成以 localhost 作为主机的路由。但这不起作用，因为我有 myproject.local 作为主机。

`$client->getContainer()->get('kernel')->getRootDir()`和其他 dir 方法提供 linux 文件路径，而不是 web 路径。

我不能硬编码它，因为我并不孤单。那么获取正确路由的方法是什么，或者还有其他方法可以测试控制器吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T21:24:19.767

Symfony2 内置的测试框架（WebTestCase）只需要相对路径就可以在不同环境下测试应用程序：

```
$client->getContainer()->get('router')->generate('my_route', array(), false); 
```

Symfony 模拟一个 http 客户端并针对为该测试创建的内核实例进行测试。不涉及网络服务器。

您可以在此处阅读有关客户端模拟如何工作的更多信息：http: [//symfony.com/doc/current/book/testing.html#working-with-the-test-client](http://symfony.com/doc/current/book/testing.html#working-with-the-test-client)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-05T08:03:53.413

正如 Symfony 文档中提到的，你应该使用绝对 URL，因为 URL 的变化会影响你的最终用户，这也是你想要在功能测试中涵盖的内容。

> “对请求 URL 进行硬编码是功能测试的最佳实践。如果测试使用 Symfony 路由器生成 URL，它不会检测到对应用程序 URL 所做的任何可能影响最终用户的更改。”

在此处查看更多信息：http: [//symfony.com/doc/current/book/testing.html#working-with-the-test-client](http://symfony.com/doc/current/book/testing.html#working-with-the-test-client)

# kendo-ui - 基于选中事件的 KendoChart 过滤无法正常工作

> ID：15494642
> 
> 赞同：1
> 
> 时间：2013-03-19T08:30:11.907
> 
> 标签：kendo-ui, kendo-treeview

我正在使用剑道控件做一个项目，我的应用程序中有剑道图表和带有复选框的树形视图。我的要求是根据树形视图中的选中事件过滤剑道图表。这里只有 2 个复选框一次选择。在页面加载时，图表中只会显示 2 个项目。

我的小提琴是[http://jsfiddle.net/RHh67/73/](http://jsfiddle.net/RHh67/73/)

我关于更改事件代码的树视图是

```
$("#treeview").on("change", function (e) {
    var chart = $("#myChart").data("kendoChart");

    var checkedSeries = [];

    $("#treeview").find(":checked").each(function() {
        var nodeText = $(this).parent().parent().text();

        $.each(series, function(index, series) {
            if (series.field == nodeText) {
                checkedSeries.push(series);
            }
        });
    });

    chart.options.series = checkedSeries;
    chart.refresh();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:47:18.180

您需要从文本节点中删除多余的空格...尝试在处理函数上`trim`计算时添加：`nodeText``change`

```
var nodeText = $(this).parent().parent().text().trim(); 
```

# html - 如何在 mvc 视图中显示 xml 文件？

> ID：15494643
> 
> 赞同：1
> 
> 时间：2013-03-19T08:30:17.507
> 
> 标签：html, xml, asp.net-mvc

我有 .xls 样式的 xml 文件。如何在我的 mvc 视图（剃刀）上显示它？

本地化文件：`@"D:\Result22.xml"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:49:08.830

你可以用这个

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(input); 
```

如果您愿意，您可以改为从视图操作中更改内容类型，如下所示

```
public ActionResult MyAction() {
          Response.ContentType = "text/xml";
          return View();
 } 
```

或者

您可以使用[XSLT](http://www.w3schools.com/xsl/default.asp)将您的 XML 转换为 XHTML，然后显示它。

# php - 在这种情况下如何实现抽象？

> ID：15494652
> 
> 赞同：1
> 
> 时间：2013-03-19T08:30:49.913
> 
> 标签：php, oop, inheritance, abstraction

我有一个父类`Product`和两个子类：`Toothbrush`和`Chainsaw`. 它们的设置如下所示。

这是父类：

```
class Product {
    protected $productid;
    protected $type;

    public function __construct( $productid ) {
        $this->productid = $productid;
        // Performs a lookup in the database and then populates the $type property
    }
} 
```

..这里是孩子们：

```
class Toothbrush extends Product {
    public function getPrice() {
        return 5; // returning an integer for simplicity; there's a calculation going on here
    }
}

class Chainsaw extends Product {
    public function getPrice() {
        return 1000; // in USD
    }
} 
```

我想遍历`$productid`'s 列表并获得项目的相应价格，无论它们是`chainsaw`'s 还是`toothbrush`es。

## 问题（或者是吗？）

现在我一遍又一遍地听到**父类不应该依赖子类**来实现功能（是的，我读过[这个问题](https://stackoverflow.com/questions/12934744/calling-a-child-method-from-the-parent-class-in-php)，以及其他许多问题）。

这就是为什么我被引导认为我目前使用的解决方案（如下）不是最佳的：

```
class Product {
...
    public function getPrice() {
        switch($this->type) {
            case 'toothbrush':
                $theproduct=new Toothbrush($this->productid);
                return $theproduct->getPrice();
                break;
            case 'chainsaw':
                $theproduct=new Chainsaw($this->productid);
                return $theproduct->getPrice();
                break;
            }
        }
    } 
```

我显然可以感觉到这里有些疏忽（想到当我得到 30 种不同的产品类型时会发生什么，我不寒而栗）。我已经阅读了有关抽象、接口和继承的内容，但不知道在这种情况下哪个可以工作。

谢谢！

## 编辑

看到很多答案，但还没有一个已经确定的答案。这是要点： **如果只有一个productid，我如何调用子方法？**（在上述场景中，`Product`类在构造函数中从数据库中检索类型并相应地填充`$type`属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:42:30.173

> 现在我一遍又一遍地听到父类不应该依赖子类来实现功能

确切地。只要它在父级中定义为抽象方法并在子级中被覆盖，您`switch`将是一个不需要的依赖项，而调用不会。`getPrice`那么父类不需要知道具体的子类，仍然可以调用它们的方法。如果这对您来说听起来很奇怪，请阅读多态性，了解这个概念对于理解 OOP 很重要。

但你的问题更深：

> 这是要点：如果只有一个productid，我如何调用子方法？（在上述场景中，Product 类在构造函数中从数据库中检索类型并相应地填充 $type 属性。

显然，您永远不会创建 Chainsaw 或 Toothbrush 的实例。你不能创建一个产品，`new Product`然后告诉它“现在你是电锯”。**对象的实际类型是不可变的。**您试图通过在产品内部创建一个新的电锯来解决这个问题，该电锯应该是电锯，只是为了获得它的价格。这是非常错误的，我想你已经意识到了。

这就是为什么在评论中建议使用工厂模式。工厂是一个实例化对象并根据参数决定使用哪个子类型的类。它也是这样一个 switch 语句的有效位置。

**例子：**

```
class ProductFactory
{
    public function makeProduct($id)
    {
        $record = perform_your_database_lookup_here();

        switch ($record['type']) {
            case 'toothbrush':
                return new Toothbrush($id, $record);
            case 'chainsaw':
                return new Chainsaw($id, $record);
        }
    }
}

$factory = new ProductFactory();
$product = $factory->makeProduct(123);
echo $product->getPrice(); 
```

为简单起见，我将数据库查找放在工厂中。更好的解决方案是将它与两个类完全分开，例如在一个`ProductTableGateway`负责与产品表相关的所有数据库查询的类中。然后工厂只会收到结果。

顺便说一句，我还建议最终摆脱这些子类。没有严肃的在线商店对每种产品类型都有硬编码类，而是动态创建不同的属性集，并将不同的价格计算委托给其他类。但这是一个高深的话题，现在会走得太远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:37:28.053

您是正确的，父母不应该依赖他们的孩子，这就是您在父母中定义它的原因。

```
class Product {
    protected $productid;

    public function getPrice() {
        return NULL; // or 0 or whatever default you want
    }
}

class Toothbrush extends Product {
    public function getPrice() {
        return 5; // in USD
    }
}

class Chainsaw extends Product {
    public function getPrice() {
        return 1000; // in USD
    }
}

class Fake extends Product {
}

$f = new Fake();
var_dump($f->getPrice()); 
```

现在代码将始终有效，无论孩子是否定义 getPrice() 方法。

但也许最好使用类似的东西

```
class Product {
    protected $productid;
    protected $price;
    protected $type;

    public function __construct($id, $price, $type) {
      $this->productid = $id;
      $this->price = $price;
      $this->type = $type;
    }

    public function getPrice() {
        return $this->price;
    }
}

$tooth = new Product(1, 5, 'Toothbrush');
$chain = new Product(2, 1000, 'Chainsaw'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:37:52.807

好吧，您可以阅读[http://www.php.net/manual/en/language.oop5.abstract.php](http://www.php.net/manual/en/language.oop5.abstract.php)。此外，您可以在父级上执行此操作（以及获取它的方法），而不是在子级上声明价格，然后在需要时在任何子级中覆盖该方法。

# c# - 如何从自定义目录动态加载程序集，包括其依赖项？

> ID：15494655
> 
> 赞同：3
> 
> 时间：2013-03-19T08:31:06.977
> 
> 标签：c#, .net, .net-assembly, assembly-resolution, resolve

我发现以下代码从自定义位置动态加载 dll：

```
private void Form1_Load(object sender, EventArgs e)
{
    AppDomain currentDomain = AppDomain.CurrentDomain;
    currentDomain.AssemblyResolve += new ResolveEventHandler(MyResolveEventHandler);
}

private Assembly MyResolveEventHandler(object sender, ResolveEventArgs args)
{
    string folderPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
    string assemblyPath = Path.Combine(folderPath, "libs", new AssemblyName(args.Name).Name + ".dll");
    if (File.Exists(assemblyPath) == false) return null;
    Assembly assembly = Assembly.LoadFrom(assemblyPath);
    return assembly;
}

private void button1_Click(object sender, EventArgs e)
{
    var zip = ZipFile.Read("test.zip");

    foreach (ZipEntry file in zip)
    {
        file.Extract(".", ExtractExistingFileAction.OverwriteSilently);
    }
} 
```

在某些情况下，此解决方案有效，但使用 ZipDotNet dll 我得到：

```
InnerException  {"File or assembly name \"Ionic.Zip, Version=1.9.1.8, Culture=neutral, PublicKeyToken=edbe51ad942a3f5c\" or one of its dependencies, was not found. Operation is not supported. (Exception from HRESULT: 0x80131515)":"Ionic.Zip, Version=1.9.1.8, Culture=neutral, PublicKeyToken=edbe51ad942a3f5c"}   System.Exception {System.IO.FileLoadException} 
```

自从它通过以来，`if (File.Exists(assemblyPath) == false) return null;`我猜它是加载 Ionic.Zip.dll 的依赖项的问题？我也将如何解决它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:46:32.380

[在这里](http://dotnetzip.codeplex.com/SourceControl/changeset/view/96133#1639326)查看Iconic.Zip.dll 的源代码，我看到项目中唯一的引用是 System、System.Data、System.Security 和 System.Xml，所以我怀疑原因是您无法加载它的任何引用。

我认为您的程序集解析方法有点太简单了。假设程序集名称与文件名相同，但情况并非总是如此。因此，您可以做的是获取`AssemblyName`目标文件夹中的每个 dll 并存储名称到文件的映射。然后，当解析器请求一个名称时，您在已知名称中查找它并加载程序集文件。这是该想法的快速实现。

```
private Dictionary<string, string> assemblyNameToFileMapping = new Dictionary<string, string>();

private void Form1_Load(object sender, EventArgs e)
{
    GetAssemblyNames();
    AppDomain currentDomain = AppDomain.CurrentDomain;
    currentDomain.AssemblyResolve += new ResolveEventHandler(MyResolveEventHandler);
}

private void GetAssemblyNames()
{
  string folderPath = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), "libs");
  foreach(string file in Directory.EnumerateFiles(folderPath, "*.dll"))
  {
     try
     {
         AssemblyName name = AssemblyName.GetAssemblyName(file);
         assemblyNameToFileMapping.Add(name.FullName, file);
     }
     catch { } // Just move on if we can't get the name.
  }
}

private Assembly MyResolveEventHandler(object sender, ResolveEventArgs args)
{
    string file;
    if (assemblyNameToFileMapping.TryGetValue(args.Name, out file))
    {
       return Assembly.LoadFrom(file);
    }
    return null;
} 
```

# actionscript-3 - 来自 as3 中的movieclip（检查主时间线是否正在播放）

> ID：15494663
> 
> 赞同：0
> 
> 时间：2013-03-19T08:31:55.037
> 
> 标签：actionscript-3, main, timeline

我有这个功能，但是......我想如果主要时间正在播放，所以它进入框架并播放，如果主要时间是（不播放），那么它进入框架并暂停

这个函数主要用于自定义滑块控件。

谢谢;

```
sliderLine_mc.addEventListener(MouseEvent.CLICK,snapTO);

function snapTO(event:MouseEvent)

{
    if (sliderTrack.mouseX > 0 && sliderTrack.mouseX < 320)
    {
        sliderKnob.x = mouseX;
        sliderKnob.x = MovieClip(root).currentFrame * (300 / MovieClip(root).totalFrames);

        if (MovieClip(root).isPlaying == true)
        {
            MovieClip(root).gotoAndPlay(Math.floor(mouseX / (300/MovieClip(root).totalFrames))-60);

        }
        else if (MovieClip(root).isPlaying == false)
        {
            MovieClip(root).gotoAndStop(Math.floor(mouseX / (300/MovieClip(root).totalFrames))-60);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:09:17.170

您可以创建一个可以执行您想要的操作的观察者影片剪辑：

```
public class WatcherMC extends MovieClip
{

private var last_enter_frame:int= 0;
private var root_animation_steps:int= 0;
private var root_stoped_steps:int= 0;
public RootIsPlaying:boolean= false;
public function WatcherMC():void 
{
addEventListener(Event.ENTER_FRAME, onEnterFrame);
}

private function onEnterFrame(event:Event):void
{
    if (MovieClip(root).currentFrame!= last_enter_frame)
    {

        root_animation_steps++;
        if (root_animation_steps> 3)
        {
                    root_stoped_steps= 0;  

                    root_is_playing();
        }
    }
    else
    {
             root_stoped_steps++;

             if (root_stoped_steps> 3)
             {
            root_animation_steps= 0;
            root_is_still_not_playing();
             }
    }
        last_enter_frame= MovieClip(root).currentFrame;
}

private function root_is_playing():void
{
// root is playing, do what ever I want
RootIsPlaying= true;
}
private function root_is_still_not_playing():void
{
// root is not playing, do what ever I want
RootIsPlaying= false;
} 
```

}

将您的代码放入函数中`root_is_playing`，然后`root_is_still_not_playing` 您可以检查 WatcherMC_instance.RootIsPlaying 是否实例化 WatcherMC 影片剪辑的实例。

像这样：

```
var WatcherMC_instance:WatcherMC= new WatcherMC();
// use WatcherMC_instance.RootIsPlaying .. 
```

我希望这个能帮上忙！

# php - Xcode中的php脚本非常奇怪的错误

> ID：15494670
> 
> 赞同：1
> 
> 时间：2013-03-19T08:32:23.700
> 
> 标签：php, xcode

我的 xcode 项目中有大量脚本，我从 mysql 数据库中获取内容......但我遇到了这个非常奇怪的问题......在应用程序的第一页上，我无法从 php 获取输出脚本没有在所有内容中间换行...

这是我的代码：

```
 <?php
    include("connect.php");

    $id = $_GET['id'];

    ?>

    <?

    $res = mysql_query("SELECT * FROM lande WHERE id = '$id'");
    while($row = mysql_fetch_array($res))
    {

     $navn = $row['name'];

     echo$navn;

    }

    ?> 
```

这没有任何意义……它适用于所有其他查询……

我找到了国家的 id：

```
 NSString *strUrl2 = [NSString stringWithFormat:@"http://localhost:xxxx/xxxx/frontpage.php"];

      NSData *dataURL2 = [NSData dataWithContentsOfURL:[NSURL URLWithString:strUrl2]];

      NSString *strResult2 = [[NSString alloc] initWithData:dataURL2 encoding:NSUTF8StringEncoding]; 
```

然后通过 $_GET 将其发送到下一页：

```
 NSString *strUrl1 = [NSString stringWithFormat:@"http://localhost:xxxx/xxxx/frontpage2.php?id=%@", strResult2];

        NSData *dataURL1 = [NSData dataWithContentsOfURL:[NSURL URLWithString:strUrl1]];

        NSString *strResult1 = [[NSString alloc] initWithData:dataURL1 encoding:NSUTF8StringEncoding];

        NSLog(@"%@", strResult1); 
```

但这需要我在首页脚本中间换行：

```
 $id = $_GET['id'];

     ?>

     <?

     $res = mysql_query("SELECT * FROM lande WHERE id = '$id'"); 
```

否则它不会输出它...

编辑：我试图通过 $_GET 将另一个变量发送到frontpage.php，它工作得很好！！strResult1 有什么问题？

感谢各种帮助！

# perl - Perl fork(), exec() 然后杀死创建僵尸进程

> ID：15494679
> 
> 赞同：0
> 
> 时间：2013-03-19T08:32:52.873
> 
> 标签：perl, fork

我正在尝试使用 fork、exec 在 perl 中启动 android 模拟器。之后我也需要杀死它，但杀死它会导致僵尸进程在后台运行模拟器。

我试过用`kill -1`as`kill -9`和杀死`killall -v emulator`。我还尝试通过附加显式 exec("exec command ...") 来执行 exec，但无论哪种方式，我都会得到一个僵尸进程，直到 perl 脚本运行。

这是我的代码：

```
my $CMD;
my $PID;

sub waitkey()
{
    local( $| ) = ( 1 );
    print "Press <Enter> or <Return> to continue: ";
    my $resp = <STDIN>;
}

$|++;

$CMD = "emulator -avd audit -no-snapshot-save";
# $CMD = "exec emulator -avd audit -no-snapshot-save";

$PID = fork();
if ($PID==0) 
{
    print "forked!\n\n";
    sleep(1);
    exec("$CMD");
    die "Unable to execute";
}

print "PID: $PID\n\n";

sleep(1);
print "------ Processes before killing -----\n";
print `ps aux | grep emulator`;
print "------ Press a key to kill -----\n\n"

&waitkey;
# `kill -1 $PID`;
`kill -9 $PID`;

print "------ Processes after killing -----\n";
sleep(1);
print `ps aux | grep emulator`;

print "----- waiting ... -----\n";
#-- do somehing here with assumption that emulator has been killed --
&waitkey; 
```

在我看到的输出中

```
------ Processes before killing -----
qureshi  10561  0.0  0.0   3556   980 pts/5    S+   13:28   0:00 emulator -avd audit -no-snapshot-save
qureshi  10562  0.0  0.0   4396   616 pts/5    S+   13:28   0:00 sh -c ps aux | grep emulator
qureshi  10564  0.0  0.0  13580   928 pts/5    S+   13:28   0:00 grep emulator 
```

并在杀死进程后

```
------ Processes after killing -----
qureshi  10561 30.0  0.0      0     0 pts/5    R+   13:28   0:01 [emulator64-arm]
qureshi  10619  0.0  0.0   4396   612 pts/5    S+   13:28   0:00 sh -c ps aux | grep emulator
qureshi  10621  0.0  0.0  13580   932 pts/5    S+   13:28   0:00 grep emulator 
```

如何摆脱僵尸进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:20:31.097

僵尸只是一个进程表条目，它等待父进程过来并收集其退出状态。如[perldoc fork](http://perldoc.perl.org/functions/fork.html)中所述，

> 如果你不等孩子就分叉，你会积累僵尸。在某些系统上，您可以通过将 $SIG{CHLD} 设置为 "IGNORE" 来避免这种情况。

设置`$SIG{CHLD}`适用于大多数 unix 类型的系统，包括 Linux，因此这将是让您的孩子安息的最简单方法。

`&`顺便说一句，使用前缀调用用户定义的函数是 Perl 4-ism。在当前的 Perl 版本中，您应该只使用`waitkey`或`waitkey()`代替`&waitkey`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T08:43:09.273

您应该`waitpid`在杀死子进程后在父进程中使用。那是因为你`fork`用来获取一个新进程，Perl 不会像在`system`. 但是我推荐[了一个更好](http://search.cpan.org/~bzajac/Proc-Background-1.10/lib/Proc/Background.pm)的 CPAN 模块，它可以完成整个混乱的事情，我觉得它非常方便。

# c# - 更改实例时保留数据绑定

> ID：15494680
> 
> 赞同：1
> 
> 时间：2013-03-19T08:32:58.940
> 
> 标签：c#, winforms, data-binding

创建该变量的新实例时，是否可以保留该变量的数据绑定？

我所拥有的是一种将所有用户输入存储在 winform 应用程序中的设计，因此这些值可以通过`xml`. 我发现当我将设计重新加载到我的程序中时，数据绑定会随着变量的新实例的创建而丢失。到目前为止，我设法通过使用反射将新的数据值复制到当前数据绑定实例上，但这只能达到一个深度级别。

示例 xml 文件：

```
<design>
   <level1>
      <myRadioButton>true</myRadioButton>//This value is copied onto the 
                                         //data bound object
   </level1>
<level1>
   <level2>
       <myRadioButton>true</myRadioButton>//This value is not as a new instance
                   // of level2 is made removing the data binding instance object
   </level2>
<level1>
</design> 
```

示例数据绑定：

```
radioButton.DataBindings.Add("Checked",Instances.Variables.Design.Level1,
                "myRadioButton", false,DataSourceUpdateMode.OnPropertyChanged);
radioButton.DataBindings.Add("Checked",Instances.Variables.Design.Level1.Level2, 
               "myRadioButton", false, DataSourceUpdateMode.OnPropertyChanged); 
```

如果需要任何其他代码示例，请询问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:39:49.127

您可以检查表单上所有控件的数据绑定。如果当前数据源是您的旧 xml-objects，请删除数据绑定，并添加具有相同参数的新数据绑定，但它应该使用您的新 xml-objects。

基本上通过删除当前数据绑定并添加一个新数据绑定来“刷新”所有必要的数据绑定。

# windows - 批处理脚本使 setlocal 变量被其他批处理文件访问

> ID：15494688
> 
> 赞同：12
> 
> 时间：2013-03-19T08:34:02.390
> 
> 标签：windows, batch-file, command

我正在编写一个批处理文件以从文件中读取路径并将其设置为环境变量。许多其他批处理文件将使用（调用）该批处理文件来获取变量。在编写批处理文件时，我遇到了变量扩展问题，所以我曾经`SETLOCAL ENABLEDELAYEDEXPANSION`克服过这个问题。但是这样做其他正在使用它的批处理文件无法设置变量。

下面是批处理脚本，

```
getVariables.bat

@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
if EXIST "test.dat" (
    for /F "tokens=*" %%I in (test.dat) do set %%I
    echo setting JAVA_HOME to :: !JAVA_HOME!
    echo setting JAVA to !JAVA!
) 
```

在我的另一个批处理文件中，我使用上面的批处理文件来设置变量

```
 another.bat

   call getVariables.dat
   echo "%JAVA%" 
```

但是 echo 正在打印“”，但未设置。如果这是因为`setlocal`，我该如何克服呢？我还需要`setlocal`延迟扩展并在执行时发生。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-17T17:39:09.653

要将多个全局变量设置为局部变量的值，请使用以下技巧：

```
endlocal & (
  set "globalvar1=%localvar1%"
  set "globalvar2=%localvar2%"
  set "globalvar3=%localvar3%"
) 
```

( ) 块中的变量在执行 endlocal 之前展开。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T08:40:34.487

这`endlocal & set str=value`将创造奇迹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T10:15:36.217

这真的取决于你在做什么——以及你是否发布了完整的脚本。

首先，你有`%`失衡`%test.dat`

`.bat`接下来，最好将批处理文件命名为`.dat`

接下来，如果这样做的唯一目的`getVariables.bat`是从行文件（test.dat）中设置变量，例如

```
JAVA_HOME=c:\whereverjavahomeis
JAVA=c:\whereverjavais 
```

然后

```
@echo off
if EXIST "test.dat" (
    for /F "tokens=*" %%I in (test.dat) do set %%I
) 
```

完全足够了。就是这样 - 4 行（如果你真的尝试，它可以全部压缩为 1...）

关键是您只需要`enabledelayedexpansion`和因此`setlocal`才能显示您正在更改的变量的值`WITHIN THE LOOP WHERE YOU'RE CHANGING THE VALUES`。您最终将删除这些行，并且`enabledelayedexpansion`失去其*存在的理由*。

为了测试，你可以写

```
@echo off
echo before...JAVA=%java%
echo before...JAVA_HOME=%java_home%
if EXIST "test.dat" (
    for /F "tokens=*" %%I in (test.dat) do set %%I
)
echo after....JAVA=%java%
echo after....JAVA_HOME=%java_home% 
```

甚至

```
@echo off
echo before&set java
if EXIST "test.dat" (
    for /F "tokens=*" %%I in (test.dat) do set %%I
)
echo after&set java 
```

实际上， if `getVariables.bat`is only ever `CALL`ed 那么即使该`@echo off`行也是多余的-假设您`@echo off`已从调用批处理中执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-01T21:41:19.253

进入cmd并搜索setx。它使您可以制作系统变量和所有其他类型的东西，甚至可以在文件中查找变量的 x 和 y 坐标。

# java - db4o 在 Android 上失去对对象的跟踪

> ID：15494693
> 
> 赞同：1
> 
> 时间：2013-03-19T08:34:14.467
> 
> 标签：java, android, db4o

我正在制作我的第一个 android 应用程序，并且我正在（尝试）使用 db4o 数据库。

一般来说，它的结构是这样的：你有一个“Person”类（有一些继承来区分“boss”、“employee”、“intern”……但我猜这并不重要）。
你也有“任务”类。'Task' 对象具有（以及其他属性）带有 Persons 的 ArrayList。任务可以在没有人员分配的情况下存在，反之亦然。

我遇到的问题是 db4o 似乎没有跟踪我的对象。因此，当我尝试将一个人（通过查询从数据库加载）附加到一个任务时，这个人会被复制。所以现在我已经通过对 Person 对象执行 QBE 并将返回的对象添加到 Task 来解决这个问题。但这似乎很不对劲？

所以某处对我的对象的引用丢失了......我一直保持数据库连接打开（仅在 onDestroy 上关闭它）。

这是一个示例操作：我有一个活动，我在其中填写任务的一些属性，然后使用 ActivityForResult 从 ListView 中选择（并返回）Person-object（通过意图）。然后回到我想链接并保存它们的第一个活动。

我在意图中传递的对象是可序列化的，而不是可打包的，我不知道除了“性能影响”之外这是否重要？

我愿意发布一些代码，但我不知道代码的哪一部分有助于识别问题？

我认为相关的代码：

**添加任务活动：**

（这是在 onCreate 中）

```
Db4oHelper db4oHelper = new Db4oHelper(context);
db=db4oHelper.db();

(...)

Button AddButton = (Button) findViewById(R.id.Addbutton);
AddButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
        Intent pickUserIntent = new Intent(context,PickUser.class);
        startActivityForResult(pickUserIntent,1);
    }
}); 
```

和：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1) {
    if (resultCode == RESULT_OK) {
        ArrayList<Person> personList_local = (ArrayList<Person>)
            data.getSerializableExtra("PERSONS");
    ArrayList<Person> personList_db=new ArrayList<Person>();
    for (Person p:personList_local){
        personList_db.add((Person)helper.listResultToArray(db.queryByExample(po)).get(0));
    }
    Task t = new Task("Description",personList_db);
    db.store(t);
        db.commit();
    }
} 
```

具有 listResultToArray 的帮助器类只是一个简单的迭代 for 循环，它将由数据库返回的 ObjectSet 的项目放入列表视图所需的 ArrayList 中。

**PickUser 活动：**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    persons_sel=new ArrayList<Person>();
    Db4oHelper db4oHelper = new Db4oHelper(context);
    db=db4oHelper.db();
    persons_all=helper.listResultToArray(db.query(Person.class));

    list = (ListView) findViewById(android.R.id.list);

    this.adapter = new PersonAdapter(this, R.layout.row_checkbox, persons_all);
    setListAdapter(this.adapter);

    list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Person p = (Person) parent.getItemAtPosition(position);
            CheckBox check = (CheckBox) view.findViewById(R.id.check);
            if (!person_sel.remove(p)) { 
                person_sel.add(p);
                check.setChecked(true);
            }else{
                check.setChecked(false);
            }
        }
    });
    Button SubmitButton = (Button) findViewById(R.id.SubmitButton);
    SubmitButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            if (persons_sel.size()>0){
             Intent returnIntent = new Intent();
             returnIntent.putExtra("PERSONS", persons_sel); 
             setResult(RESULT_OK,returnIntent); 
             finish();
            }else{
                Toast.makeText(getApplicationContext(),
                          "You must select at least something!", 
                          Toast.LENGTH_SHORT).show();
            }
        }
    });
}

private class PersonAdapter extends ArrayAdapter<Person> {

    private ArrayList<Person> items;

    public PersonAdapter(Context context, int textViewResourceId,
            ArrayList<Person> items) {
        super(context, textViewResourceId, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row_checkbox, null);
        }
        Person p = items.get(position);
        if (p != null) {
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            if (tt != null) {
                tt.setText(p.toString());
            }
        }
        return v;
    }
} 
```

# r - 使用 optim 和 fitdistr 获得更精确的值

> ID：15494695
> 
> 赞同：0
> 
> 时间：2013-03-19T08:25:07.813
> 
> 标签：r, optimization

我想用 optim 获得更精确的值。

考虑以下变量：

```
test<-c(1,2,1,2,3,2,1,2,0.5,0.4,-0.1) 
```

现在，我想拟合一个正常密度，$\mu$ 和 $\sigma$ 的估计值是：

```
mean(test) 

[1] 1.345455
sd(test)
[1] 0.9223488 
```

或者我可以使用

```
library(MASS)
fitdistr(test,"normal") 
```

我得到

```
 mean         sd    
  1.3454545   0.8794251 
 (0.2651566) (0.1874941) 
```

哪个不完全一样，为什么？现在我想用 optim 手动执行此操作：

```
loglikenorm<-function(theta){
return (-sum(log(dnorm(test,mean=theta[1],sd=theta[2])))
}
optim(c(0,0.01),loglikenorm) 
```

我得到

```
$par
[1] 1.3451582 0.8798248 
```

这不准确。我想让它更准确，我该怎么做？

我有一个案例，其中 fitdistr 和 optim 在与此处相同的设置（使用正常分配）导致估计略有不同，那么我怎样才能更精确地进行 optim 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:02:15.813

您的第一个问题（关于`sd`结果差异）的答案是[**和**](http://en.wikipedia.org/wiki/Sample_variance#Population_variance_and_sample_variance)[**估计**](http://en.wikipedia.org/wiki/Sample_variance#Population_variance_and_sample_variance)[**之间的差异`sample``population`**](http://en.wikipedia.org/wiki/Sample_variance#Population_variance_and_sample_variance)。

的`sample`估计值由`sd`下式给出：

```
sqrt(1/(N-1) * sigma((x - xbar)^2)) 
```

鉴于，人口估计由`sd`下式给出：

```
sqrt(1/N * sigma((x - xbar)^2)) 
```

默认情况下， R 函数`sd`计算`sample`估计值，而 MASS 包函数计算总体估计值。如果您尝试从您的样本（作为代表性样本）估计总体参数，那么您应该使用总体方差/标准差。

```
# sample estimate
sqrt(1/10 * sum((test - mean(test))^2))
# [1] 0.9223488

# population estimate
sqrt(1/11 * sum((test - mean(test))^2))
# [1] 0.8794251 
```

使用优化功能，我得到：

```
> optim(c(0,0.1),loglikenorm)
# $par
# [1] 1.3458745 0.8795433

0.8795433 - 0.8794251 
# [1] 0.0001182 
```

鉴于您的样本量为 11，我认为这是一个可接受的错误阈值。

# codeigniter - Codeigniter 在哪里并替换子查询

> ID：15494699
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:34:33.327
> 
> 标签：codeigniter, activerecord, subquery, where-clause

如何在活动记录中的 codeigniter 中编写以下查询？

```
SELECT
  time AS date,
  user AS name
FROM b_table
WHERE id IN(SELECT
          a
        FROM a_table
        WHERE group = $group
        AND tag >= '$date1'
        AND tag <= $date2') 
```

这就是我想出来的，但它不起作用。

```
$this->db->select('a');
$this->db->from('a_table');
$this->db->where('group',$group);
$this->db->where('tag>=',$date1);
$this->db->where('tag<=',$date2);

$subQuery = $this->db->_compile_select();
$this->db->_reset_select();

$this->db->select('time AS date, user AS name');
$this->db->from('b_table');
$this->db->where_in($subQuery); 
```

我的问题是（a）从选择一个是需要替换的记录，例如将空格替换为逗号，或者我错了:(，
另一个我使用 str_replace 但仍然错误，

> > 选择一个的样本数据 a 是
> > 222,111,444
> > 333,444
> > 
> > 555,666
> > 替换为 222,111,444,333,444,555,666

即使我是 codeigniter 的新手也感谢任何帮助，并对我的英语感到抱歉。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:58:09.517

试试这个：

```
 ->where() 
```

支持将任何字符串传递给它，它将在查询中使用它。

所以上面会像：

```
 $this->db->select('time AS date,user AS name')->from('b_table');
 $this->db->where_not_in('id', "SELECT a FROM a_table WHERE group = $group AND tag >= '$date1' AND tag <= $date2"); 
```

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:12:49.833

您以错误的方式使用它。标签后必须有一个空格

```
$this->db->where('tag >=',$date1);
$this->db->where('tag <=',$date2); 
```

# git - 多平台项目的最佳 Git 策略

> ID：15494708
> 
> 赞同：9
> 
> 时间：2013-03-19T08:35:26.787
> 
> 标签：git, version-control, github

嗨，我有一个应用程序，它有几个不同的应用程序，它们是：

1.  “客户端服务器”应用程序 (java)
2.  “许可证服务器”应用程序（java）（我正在使用 git 将此应用程序部署到 heroku）
3.  “自动更新应用程序”（java）
4.  “客户端应用程序”（objective-c）

我所知道的关于 git 的只是标准的提交命令和类似的东西，而且我有一个拥有 5 个私有存储库的 github 成员。所以我想知道在此使用 git 的最佳方法是什么？可能的答案是：

1.  创建一个 git repo 并将这些单独的项目放在“分支”中？
2.  创建一个 git repo 并将这些项目放在单独的文件夹中？
3.  只是将它们放入不同的 git 存储库中？

谢谢回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T08:47:30.623

我会根据是否直接从 Git 部署应用程序来做出决定。我会考虑选项 2) 和 3) 的组合——当它被部署到 Heroku 时，我肯定会将许可证服务器应用程序放入它自己的存储库中。我对 Heroku 部署不太熟悉，但它很可能会部署特定分支中的所有内容，因此如果您将所有应用程序添加到同一个 repo 中的文件夹中，那么它们将一起部署到 Heroku。那可能不是你想要的。

如果不同的开发人员/团队在不同的应用程序上工作，他们会发现如果应用程序位于他们自己的单独存储库中会更容易。

忘记 1) - 分支只是指向提交的指针，所以不要将不同的项目添加到不同的分支。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T08:46:10.133

> 1.  创建一个 git repo 并将这些单独的项目放在“分支”中？
> 2.  创建一个 git repo 并将这些项目放在单独的文件夹中？
> 3.  只是将它们放入不同的 git 存储库中？

我会去**2**。。

根据您的各种应用程序/项目的大小，或者它们的独立程度，您可能会考虑**3**，但它可能会增加太多开销。即使是大型存储库也可以由 git 非常有效地处理。单个存储库还使发布过程更容易，因为您可以将应用程序作为一个整体进行标记/分支，而无需在不同的存储库上进行。

选项**1**不是要走的路——您通常使用分支来进行功能开发、错误修复和管理发布。另请参阅[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model)。

* * *

基于评论和其他答案，如果我进一步考虑，它主要取决于项目之间的**依赖**关系。对于客户端和服务器应用程序，我肯定会选择**2**，并且很可能还包括自动更新应用程序。

正如其他人所写，如果许可证服务器真的是独立的（那么许可证服务器的客户端部分呢？），为这部分使用单独的存储库可能是正确的解决方案。我的看法是，使用多个存储库可能会使发布过程和设置开发人员环境的过程复杂化。**最后，解决方案可能真的是2.**和**3.**之间的正确平衡，这取决于项目的依赖程度或独立程度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:43:08.857

这里的拙见：

1.  将这些东西放在分支中肯定是错误的，git中的代码分支总是代表“相同”代码库的不同状态
2.  我也不会这样做，但如果两个服务器和两个应用程序足够相互依赖，那么将它们放在同一个存储库中可能是个好主意，那将是我的最爱
3.  如果这 4 个应用程序足够不相交，那就是要走的路。

# java - 如何使用 Log4j.xml 更改 tomcat 的内部日志记录

> ID：15494709
> 
> 赞同：3
> 
> 时间：2013-03-19T08:35:36.927
> 
> 标签：java, log4j, tomcat7

我正在开发一个应用程序来分析由 tomcat 生成的日志文件。Tomcat 会生成各种日志文件，但对我来说最重要的是 localhost_access.log 文件。我想更改 tomcat 的内部日志记录，以便 tomcat 在同一天为不同的状态消息创建不同的本地主机文件。

例子：

1.localhost_access_log.2013-01-16.404.txt 2.localhost_access_log.2013-01-16.403.txt 3.localhost_access_log.2013-01-16.200.txt

我的应用程序有一个专用的 tomcat。那就是tomcat上只运行一个应用程序，所以不需要附加应用程序id。

希望问题很清楚。我在谷歌搜索了很长时间，但找不到一个合理的网站来启动。任何帮助，将不胜感激。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:47:42.550

Tomcat 使用 server.xml 中的阀门配置进行访问日志记录。它使用内置类 org.apache.catalina.valves.AccessLogValve 不提供您正在查看的配置。

我相信您最好的选择是覆盖 org.apache.catalina.valves.AccessLogValve 类或通过扩展 ValveBase 编写自己的实现。使用新的类信息更新 server.xml。

# windows - 如何批量获取字符串中子字符串的位置

> ID：15494711
> 
> 赞同：9
> 
> 时间：2013-03-19T08:35:43.887
> 
> 标签：windows, for-loop, batch-file, cmd

获取子字符串的位置，

```
 Set str1=This is Test string
  Set sstr=Test 
```

在这里我需要得到“测试”（8）的位置。

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:51:35.067

```
@echo OFF
SETLOCAL
Set "str1=This is Test string"
Set "sstr=Test"
SET stemp=%str1%&SET pos=0
:loop
SET /a pos+=1
echo %stemp%|FINDSTR /b /c:"%sstr%" >NUL
IF ERRORLEVEL 1 (
SET stemp=%stemp:~1%
IF DEFINED stemp GOTO loop
SET pos=0
)

ECHO Pos of "%sstr%" IN "%str1%" = %pos% 
```

（这将返回“9”，将第一个位置计为“1”。定义在用户的脑海中......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T13:54:13.427

还有一个替代方案：

```
@echo off &setlocal enabledelayedexpansion
Set "str1=This is Test string"
Set "sstr=Test"
set /a position=0
Set "sst0=!str1:*%sstr%=!"
if "%sst0%"=="%str1%" echo "%sstr%" not found in "%str1%"&goto :eof
Set "sst1=!str1:%sstr%%sst0%=!"
if "%sst1%" neq "" for /l %%i in (0,1,8189) do if "!sst1:~%%i,1!" neq "" set /a position+=1
echo.Position of %sstr% is %position%
endlocal 
```

如果 %str1% 包含多个 %sstr%，则代码将找到第一个位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T09:34:46.253

Try this:

```
@echo off &setlocal enabledelayedexpansion
Set "str1=This is Test string"
Set "sstr=Test"
call :strlen str1 len1
call :strlen sstr len2
set /a stop=len1-len2
if %stop% gtr 0 for /l %%i in (0,1,%stop%) do if "!str1:~%%i,%len2%!"=="%sstr%" set /a position=%%i
if defined position (echo.Position of %sstr% is %position%) else echo."%sstr%" not found in "%str1%"
goto :eof

:strlen
:: list string length up to 8189 (and reports 8189 for any string longer than 8189
:: function from http://ss64.org/viewtopic.php?pid=6478#p6478
(   setlocal enabledelayedexpansion & set /a "}=0"
    if "%~1" neq "" if defined %~1 (
        for %%# in (4096 2048 1024 512 256 128 64 32 16) do (
            if "!%~1:~%%#,1!" neq "" set "%~1=!%~1:~%%#!" & set /a "}+=%%#"
        )
        set "%~1=!%~1!0FEDCBA9876543211" & set /a "}+=0x!%~1:~32,1!!%~1:~16,1!"
    )
)
endlocal & set /a "%~2=%}%" & exit /b
endlocal 
```

If %str1% contains more than one %sstr%, the code will find the last position.

# c - memcpy 上的分段错误

> ID：15494717
> 
> 赞同：0
> 
> 时间：2013-03-19T08:36:04.790
> 
> 标签：c, segmentation-fault, memcpy

完整的代码在

[http://docs.google.com/file/d/0B09y_TWqTtwlaHNjdjYybHVIcjA/edit?usp=sharing](http://docs.google.com/file/d/0B09y_TWqTtwlaHNjdjYybHVIcjA/edit?usp=sharing)

```
 char data[]="just for a try";
    u_char *packet=(u_char *)malloc(28+sizeof(data));
     ...
     ...

    u_char *udp_data=(u_char *)malloc(8+sizeof(data));
    if(udp_data == NULL )
            perror("allocating space for udp_data fails\n");
    memcpy(udp_data, &udp, sizeof(udp));
    memcpy(udp_data+8, data, sizeof(data));
    udp.check = in_cksum_udp(ip.ip_src.s_addr, ip.ip_dst.s_addr, (unsigned short *)udp_data, sizeof(udp)+sizeof(data)); // if I comment this line, no segmentation fault!
    free(udp_data);
    udp_data=NULL;

    // I get segmentation fault on the next line:
    memcpy(packet + 20, &udp, sizeof(udp)); 
```

问题是 cksum_udp() 函数错误是

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000400a2b in run (arg=0x0) at raw_udp_client.c:115
115     memcpy(packet + 20, &udp, sizeof(udp)); 
```

in_cksum_udp() 之前的核心转储 [https://docs.google.com/file/d/0B09y_TWqTtwldFI5UGdfc01RU28/edit?usp=sharing](https://docs.google.com/file/d/0B09y_TWqTtwldFI5UGdfc01RU28/edit?usp=sharing)

```
ip = {ip_hl = 5, ip_v = 4, ip_tos = 0 '\000', ip_len = 10752, ip_id = 0, 
ip_off = 0, ip_ttl = 64 '@', ip_p = 17 '\021', ip_sum = 32808, ip_src = {
s_addr = 1825136778}, ip_dst = {s_addr = 376725642}}
udp = {source = 51377, dest = 125, len = 5632, check = 0}
sd = 0
on = 1
sin = {sin_family = 1, sin_port = 0, sin_addr = {s_addr = 0}, 
sin_zero = "ݲ\360\000\000\000\000"}
packet = 0x602010 "E"
data = "I'm not here!"
udp_data = 0x602050 "\261\310}" 
```

在 in_cksum_udp() 之后

```
ip = {ip_hl = 0, ip_v = 0, ip_tos = 0 '\000', ip_len = 0, ip_id = 0, 
ip_off = 0, ip_ttl = 0 '\000', ip_p = 0 '\000', ip_sum = 0, ip_src = {
  s_addr = 0}, ip_dst = {s_addr = 0}}
udp = {source = 0, dest = 0, len = 0, check = 4842}
sd = 0
on = 0
sin = {sin_family = 0, sin_port = 0, sin_addr = {s_addr = 0}, 
sin_zero = "\000\000\000\000\000\000\000"}
packet = 0x0
data = '\000' <repeats 13 times>
udp_data = 0x0 
```

in_cksum_udp() 函数如下，我没有发现任何问题：

```
struct psd_udp {
    struct in_addr src;
    struct in_addr dst;
    unsigned char pad;
    unsigned char proto;
    unsigned short udp_len;
    struct udphdr udp;
};

unsigned short in_cksum(unsigned short *addr, int len)
{
    int nleft = len;
    int sum = 0;
    unsigned short *w = addr;
    unsigned short answer = 0;

    while (nleft > 1) {
            sum += *w++;
            nleft -= 2;
    }

    if (nleft == 1) {
            *(unsigned char *) (&answer) = *(unsigned char *) w;
            sum += answer;
    }

    sum = (sum >> 16) + (sum & 0xFFFF);
    sum += (sum >> 16);
    answer = ~sum;
    return (answer);
}

unsigned short in_cksum_udp(int src, int dst, unsigned short *addr, int len)
{
    struct psd_udp buf;

    memset(&buf, 0, sizeof(buf));
    buf.src.s_addr = src;
    buf.dst.s_addr = dst;
    buf.pad = 0;
    buf.proto = IPPROTO_UDP;
    buf.udp_len = htons(len);
    memcpy(&(buf.udp), addr, len);
    return in_cksum((unsigned short *)&buf, 12 + len);
} 
```

似乎该函数与指针数据包指向的内存无关有什么潜在问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T09:04:01.930

在函数`in_csum_udp`中，这一行：

```
memcpy(&(buf.udp), addr, len); 
```

`sizeof(struct udphdr) + sizeof(data)`正在将字节复制到`buf.udp`，即 a `struct udphdr`。由于这是结构的最后一个元素，因此堆栈被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:06:35.627

这是另一个错误（读取外部缓冲区）。这可能不是导致内存损坏的原因。

您正在将`len`字节发送到`in_cksum`. `in_cksum`认为它得到了`len` `short`s。

# java - 处理带有变音符号和其他特殊字符的 URL

> ID：15494718
> 
> 赞同：2
> 
> 时间：2013-03-19T08:36:20.563
> 
> 标签：java, url, encoding, https

我有以下网址：

```
https://mantis.server.company/download/test/0022450-umlauts_öä_üüü_and_special_chars_%&$#.pdf 
```

之前没有办法对字符串进行编码。我只需要处理这个字符串（*我知道它不是一个有效的 URL 字符串*），以便可以打开该路径后面的文件。

```
String url = "https://mantis-daun.server.company/download/test/0022450-umlauts_öä_üüü_and_special_chars_%&$#.pdf";

try {
    url = URLDecoder.decode(url, "UTF-8");
    URL myConnection = new URL(url);
    URLConnection connectMe = myConnection.openConnection();
    // Only for error processing
    HttpURLConnection httpConn = (HttpURLConnection) connectMe;
    InputStream is;
    if (httpConn.getResponseCode() >= 400) {
        is = httpConn.getErrorStream();
    } else {
        is = httpConn.getInputStream();
    }
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line;
        while ((line = rd.readLine()) != null)
        {
            System.out.println("-----" + line);
        }
        rd.close();     
    InputStream in = connectMe.getInputStream();
    BufferedInputStream bin = new BufferedInputStream(in);
    byte[] buffer = new byte[(int)connectMe.getContentLength()];
    int fi = 0;
    while(fi<buffer.length) {
        fi = fi + bin.read(buffer, fi, buffer.length - fi);
    }
    bin.close();
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

通过这种方法，我得到：

```
Exception in thread "main" java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: "&$"
    at java.net.URLDecoder.decode(URLDecoder.java:173)
    at org.mssql.main.MSSQLAccess.main(MSSQLAccess.java:34) 
```

我得到`url = url.replaceAll("%", "%25");`：

```
-----<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
-----<html><head>
-----<title>400 Bad Request</title>
-----</head><body>
-----<h1>Bad Request</h1>
-----<p>Your browser sent a request that this server could not understand.<br />
-----</p>
-----<hr>
java.io.IOException: Server returned HTTP response code: 400 for URL: https://mantis-daun.server.company/download/test/0022450-umlauts_öä_üüü_and_special_chars_%&$#.pdf
-----<address>Apache/2.2.9 (Debian) PHP/5.2.6-1+lenny16 with Suhosin-Patch mod_ssl/2.2.9 OpenSSL/0.9.8o Server at mantis-daun.server.company Port 443</address>
-----</body></html>
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1491)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1485)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at org.mssql.main.MSSQLAccess.main(MSSQLAccess.java:51)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: https://mantis-daun.server.company/download/test/0022450-umlauts_öä_üüü_and_special_chars_%&$#.pdf
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
at org.mssql.main.MSSQLAccess.main(MSSQLAccess.java:39) 
```

如果我想在普通浏览器中打开“URL”，我还会收到“400：错误请求”。

那么，有没有办法处理带有变音符号和特殊字符的字符串，以便它可以用作“URL”？

也许服务器设置也有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:40:54.100

好吧，您尝试对 url 进行解码，但**实际上您应该对其进行编码**以实现您想要的。它实际上崩溃了，因为它试图解码 %&$ 这不是有效的十六进制符号......

编码会产生：https%3A%2F%2Fmantis-daun.server.company%2Fdownload%2Ftest%2F0022450-umlauts_%C3%B6%C3%A4_%C3%BC%C3%BC%C3%BC_and_special_chars_%25%26 %24%23.pdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:45:02.990

首先，正如 Xavjer 所指出的，您需要对URL进行*编码。*接下来，拆分 URL 并仅对路径的“文本”部分进行编码是有意义的。域名未编码（如果您有非拉丁域名，则必须根据 Punycode 对其进行编码），还必须保留路径分隔符（对整个 URL 进行编码时并非如此）。所以你只编码“下载”、“测试”和文件名+扩展名部分

# javascript - 通过 JavaScript 或 php 读取 MS Excel 文件并写入 MongoDB

> ID：15494721
> 
> 赞同：0
> 
> 时间：2013-03-19T08:36:36.867
> 
> 标签：javascript, xml, excel, mongodb, xls

我需要编写一个 Web 应用程序。用户将从打开文件对话框中选择 excel 文件。应用程序应该能够从 excel 文件中的特定单元格读取数据，并将它们写入 mongodb。

任何想法如何实现阅读和写作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T15:18:59.463

如果您在 Excel 文件中有简单格式的数据（如单元格表），则可以使用[Alasql](http://github.com/agershun/alasql)库。它还在后台使用[XLSX.js](https://github.com/SheetJS/js-xlsx)库。

这是一个使用 MongoDB 和 Alasql+XLSX.js 将 Excel 读入 JSON 数组并将其写入 MongoDB 数据库的示例。

```
var alasql = require('alasql');
var MongoClient = require('mongodb').MongoClient;
var url = 'mongodb://localhost:27017/myproject';
MongoClient.connect(url, function(err, db) {
    var collection = db.collection('mydata');
   // Read Excel file to array of JSON objects
    alasql('SELECT * FROM XLSX("mydata.xlsx", \
            {headers:true, sheetid:"Sheet2",range:"A1:D100"})',[],function(data){

        collection.insert(data);  // Write array to MongoDB here
        db.close();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T09:42:12.120

在 javascript 中，有一些库可以读取[XLS](https://github.com/Niggler/js-xls)和[XLSX](https://github.com/Niggler/js-xlsx)文件，这两个库都可以让您对数据进行单元级别的访问。

# java - 静态类中的列表会生成警告，其他数据类型不会

> ID：15494722
> 
> 赞同：0
> 
> 时间：2013-03-19T08:36:41.813
> 
> 标签：java, static, warnings

在编写参数化的 JUnit 测试用例时，我在构造函数中设置实例变量时遇到了这个警告：

`The static field ClassA.ListOfStrings should be accessed in a static way`

提供的解决方案是：

`@SuppressWarnings("static-access")`

和

`ClassA.ListOfStrings = ParamListOfStrings;`

代替

`this.ListOfStrings = ParamListOfStrings;`

自定义对象也会出现此警告，但其他数据类型（或单个`String`）不会出现此警告。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:38:45.490

它确实发生在其他**静态**数据类型上。

访问静态字段时，最好使用`ClassName.fieldName`而不是`myObj.fieldName`.

一个原因是在将字段更改为非静态时出现编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:39:39.417

该警告与静态变量的类型无关，但与您使用所属类的实例而不是类的名称来限定*静态字段访问表达式这一事实有关。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:39:36.407

静态并不完全意味着“由所有实例共享” - 它的意思是“根本与特定实例无关”。换句话说，您可以在不创建任何实例的情况下获得类 A 中的静态字段。

你可以做

```
ClassName.variable; 
```

代替

```
ClassName cn = new ClassName();
cn.variable; 
```

# python - 将正则表达式字符串与引号和 href 匹配

> ID：15494723
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:36:44.883
> 
> 标签：python, regex

我正在尝试使用正则表达式来匹配

```
 <a href = "something" > 
```

在下面的字符串中，但没有打印。

```
E = '<a> test <a href> <a href = "something" ><a href="anything">'
H = re.match('^[<a href = ]\".\" >$' , E)
print (H) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:55:08.350

不要用正则表达式解析 html。

这是一个使用 BeautifulSoup 的示例：

```
from BeautifulSoup import BeautifulSoup, SoupStrainer

html_string = '<a> test <a href> <a href = "something" ><a href="anything">'
for link in BeautifulSoup(html_string, parseOnlyThese=SoupStrainer('a')):
    print link.get('href') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:57:42.853

我建议你不要使用正则表达式来解析 HTML（因为有[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/)）
既然你说你不是，这里有一些东西：

```
>>> regex = re.compile("(<\s*a\s*href\s*=\s*\"something\"\s*>)+")
# Run findall
>>> regex.findall(string)
[u'<a href = "something" >'] # your tag 
```

# c# - 使用更新面板时服务器控件失去其 CSS 样式

> ID：15494731
> 
> 赞同：4
> 
> 时间：2013-03-19T08:36:57.390
> 
> 标签：c#, asp.net

我正在为我的项目使用[这个](http://themeforest.net/item/mango-slick-responsive-admin-template/2728748?sso?WT.ac=category_item&WT.seg_1=category_item&WT.z_author=Stammi)模板。我在表单中使用了 updatepanel，在更新面板中我采用了不同的 asp.net 下拉列表控件。现在的问题是当页面回发时，应用于下拉列表的 CSS 样式会丢失......因为我对 CSS 没有详细的了解......所以请帮忙

现在有2种可能

*   根本不将css应用于下拉列表
*   回发后将 CSS 应用于下拉列表

如果我只是将下拉控件拖放到表单中，下拉列表将与 css 一起出现。

我也使用了这个的masterpage ...我不想将css应用于下拉列表...然后该怎么做..请建议我...

**页面加载时的图像**

![在此处输入图像描述](../Images/5f87f0a0e93006557662bb6c0a3f1d63.png)

**回发后的图像（如果使用更新面板）** ![在此处输入图像描述](../Images/0de50bc22b9e2bbd0877662cc3d20cd7.png)

**.aspx 代码**

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
  <div class="s" runat="server" id="divError">
        <div class="round">
            <span>
                <img alt="" src="img/Error.png" />
            </span><span runat="server" id="lblError"></span>
        </div>
    </div>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" RenderMode="Inline">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="drplstStd" />
    </Triggers>
        <ContentTemplate>
            <div class="actions">
                <div class="left">
                    <asp:Button ID="btnBack" runat="server" Text="Add new" Height="25px" OnClick="btnBack_Click" />
                    <br />
                    <br />
                    <br />
                    <asp:DropDownList ID="drplstStd" runat="server" AppendDataBoundItems="true" AutoPostBack="true"
                        onselectedindexchanged="drplstStd_SelectedIndexChanged">
                        <asp:ListItem Selected="True" Text=" --Select Standard-- " Value="0"></asp:ListItem>
                    </asp:DropDownList>
                    <br />
                     <asp:DropDownList ID="drplstSem" runat="server">

                    </asp:DropDownList>
                    <br />
                    <asp:DropDownList ID="drplstSubj" runat="server" AppendDataBoundItems="true">
                        <asp:ListItem Selected="True" Text=" --Select Subject-- " Value="0"></asp:ListItem>
                    </asp:DropDownList>
                    <asp:TextBox ID="txtChapterSearch" runat="server"></asp:TextBox>
                    <asp:Button ID="btnSearch" runat="server" Text="Search" Height="25px" OnClick="btnSearch_Click" />
                </div>
            </div>
            <fieldset>
                <legend>Chapter details </legend>
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" OnRowCommand="GridView1_RowCommand"
                    AllowPaging="True" OnPageIndexChanging="GridView1_PageIndexChanging" PageSize="10"
                    CssClass="grid" CellPadding="3" BorderColor="#CCCCCC" BorderWidth="1px" BackColor="White"
                    BorderStyle="None">
                    <RowStyle BackColor="#F6F6F6" ForeColor="#333333" />
                    <Columns>
                        <asp:TemplateField HeaderText="Id" Visible="False">
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("ChapterID") %>'></asp:Label>
                            </ItemTemplate>
                            <HeaderStyle Width="30px" />
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Standard">
                            <ItemTemplate>
                                <asp:Label ID="Label2" runat="server" Text='<%# Bind("Standard") %>'></asp:Label>
                            </ItemTemplate>
                            <HeaderStyle Height="50px" />
                            <ItemStyle Height="25px" />
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Semester">
                            <ItemTemplate>
                                <asp:Label ID="Label3" runat="server" Text='<%# Bind("Semester") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Subject">
                            <ItemTemplate>
                                <asp:Label ID="Label4" runat="server" Text='<%# Bind("Subject") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Chapter">
                            <ItemTemplate>
                                <asp:Label ID="Label5" runat="server" Text='<%# Bind("ChapterName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="ShortForm">
                            <ItemTemplate>
                                <asp:Label ID="Label6" runat="server" Text='<%# Bind("ChapterSName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ShowHeader="False">
                            <ItemTemplate>
                                <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandArgument='<%#((GridViewRow)Container).RowIndex%>'
                                    Text="Edit" CommandName="EditDetails"></asp:LinkButton>
                            </ItemTemplate>
                            <ItemStyle Width="100" />
                        </asp:TemplateField>
                        <asp:TemplateField ShowHeader="False">
                            <ItemTemplate>
                                <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandArgument='<%#((GridViewRow)Container).RowIndex%>'
                                    Text="Delete" CommandName="DeleteDetails" OnClientClick="if (!window.confirm('Are you sure you want to delete this item?')) return false;"></asp:LinkButton>
                            </ItemTemplate>
                            <ItemStyle Width="100" />
                        </asp:TemplateField>
                    </Columns>
                    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <PagerStyle CssClass="rowheader" HorizontalAlign="Center" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <HeaderStyle CssClass="rowheader" />
                    <EditRowStyle BackColor="#999999" />
                    <AlternatingRowStyle BackColor="#FDFDFD" ForeColor="#284775" />
                </asp:GridView>
             <legend>
                    <asp:ImageButton ID="btnDisplay" runat="server" ImageUrl="~/Admin/img/view_refresh.png"
                        Height="16px" Width="16px" OnClick="btnDisplay_Click" />
                    <asp:Label ID="lblDisplay" runat="server" Text="Label"></asp:Label>
                </legend>
            </fieldset>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:34:09.990

你可以注册你的CSS`OnInit event`

```
string cssLocalisation  = string.Format("<link rel=\"stylesheet\" href=\"{0}\" type=\"text/css\" />", ResolveUrl(YourFile));

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    var scriptManager = ScriptManager.GetCurrent(Page);
    if ( ! scriptManager.IsInAsyncPostBack)
    {
         ScriptManager.RegisterClientScriptBlock(this, typeof(YourControl), "YourKey", cssLocalisation, false);
    }
 } 
```

# sql - Sql Server在同一张表中的一对多关系

> ID：15494733
> 
> 赞同：1
> 
> 时间：2013-03-19T08:37:06.850
> 
> 标签：sql, sql-server, sql-server-2008

如何在同一张表中创建一对多关系？（MSSQL）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:41:32.157

就像跨两个表一样：创建外键约束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:43:53.643

试试这个方法：

```
create table tab1
(
  id int,
  id1 int,
  primary key (id)
)

alter table tab1
    add constraint fk_tab1 foreign key ( id1 )
    references tab1 ( id ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:44:48.060

您可以像任何其他关系一样在同一个表中添加具有主键和外键的关系。

以下示例将向您展示如何在同一个表中添加 (pk_col) PK 和 (fk_col) FK 之间的关系：

```
ALTER TABLE dbo.some_table
    ADD CONSTRAINT FK_some_table_some_table FOREIGN KEY
    (
        fk_col
    ) REFERENCES dbo.some_table
    (
        pk_col
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:59:45.243

您将需要第二个表来保存表中相关的每两个元素的一组 ID。

# jquery - Jquery slideToggle() - 全部切换

> ID：15494735
> 
> 赞同：1
> 
> 时间：2013-03-19T08:37:13.010
> 
> 标签：jquery

我有一个页面，其中有隐藏在它们下面的答案的问题。当有人点击一个问题时，答案会向下滑动（这是一个可以正常工作的单独功能）。再次单击时，它会返回隐藏状态。

当答案已经打开时，此函数运行并打开所有已关闭的答案，但关闭所有打开的答案。

我希望它打开所有并保持打开的答案打开，并关闭所有并保持关闭的答案关闭。

```
 <div id="hideMenu">
      <span style="display: inline;" class="title">Afficher
      tout</span>
      <span class="title" style="display: none;">Cacher
      tout</span>
      <span class="arrow"></span>
 </div>
 <div class="MppWP">
      <ul>
           <li class="MppAccordion">
                <h3 class="MppWPTitle grey1">
                <span class="MppOrder">1</span>Pr&#233;paration
                de l'appel &#224; candidatures (1er tour)
                <span class="arrow"></span></h3>
                <ul style="display: none;"
                class="MppWPContent">
                     <li>aaaaa</li></ul></li>

           <li class="MppAccordion">
                <h3 class="MppWPTitle grey1">
                <span class="MppOrder">1</span>Pr&#233;paration
                de l'appel &#224; candidatures (1er tour)
                <span class="arrow"></span></h3>
                <ul style="display: none;"
                class="MppWPContent">
                     <li>aaaaa</li></ul></li>
     </ul>
   </div>

$('#hideMenu').click(function () {
    //alert("ici");
    $(this).find(".title").toggle().end()
           .find('arrow').toggleClass('open');
    $(this).parent().find('.MppWP .MppAccordion .MppWPContent').slideToggle("normal").end()  
           .children('.arrow').toggleClass('open');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:10:12.480

从您在这里提到的内容来看，我认为您可以使用`:visible`选择器来查找哪个是可见的，并`:hidden`找到隐藏的元素并执行切换操作。

# java - JIBX/JAXB 生成从 .jar 扩展其他类的类的 XML 模式？

> ID：15494738
> 
> 赞同：2
> 
> 时间：2013-03-19T08:37:24.770
> 
> 标签：java, jaxb, xsd, jibx

我需要为一堆 Java 类构建一个 XML 模式。我尝试使用 JAXB (schemagen) 和 JIBX (bindgen)。我的 java 类从库中的一个类扩展，并包含几个继承和子类。

**JAXB失败 1**：我得到了异常`JAXB can't handle interfaces`。我的类没有任何注释，也没有 .jar 文件中的扩展类。

```
public class MySchemaOutputResolver extends SchemaOutputResolver {
    public static void main(String[] args) throws IOException, JAXBException {    
        JAXBContext jaxbContext = JAXBContext.newInstance(MYCLASS.class);
        jaxbContext.generateSchema(new MySchemaOutputResolver(filepath));
    }

    String filepath = null;
    public MySchemaOutputResolver(String filepath)  {
        this.filepath = filepath;
    }

    @Override
    public Result createOutput(String namespaceURI, String suggestedFileName) throws IOException {
        File file = new File(filepath);
        StreamResult result = new StreamResult(file);
        result.setSystemId(file.toURI().toURL().toString());
        return result;
    }
} 
```

**失败2：**然后我尝试使用JIBX（bindgen）。但是这里的输出只包含当前类的值。不会创建扩展类中的所有变量。

所以也许我很基本地问了这个问题：

**如何创建一个 XML Schema，其中包含来自 Java 类的所有属性，该 Java 类从 .jar 扩展另一个类？**

# hadoop - java.lang.OutOfMemoryError：无法为大数据集创建新的本地线程

> ID：15494749
> 
> 赞同：6
> 
> 时间：2013-03-19T08:37:45.333
> 
> 标签：hadoop, hive

我正在运行 hive 查询，它对于小型数据集运行良好。但我正在运行 2.5 亿条记录，我在日志中遇到错误

```
 FATAL org.apache.hadoop.mapred.Child: Error running child : java.lang.OutOfMemoryError:   unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:640)
    at org.apache.hadoop.mapred.Task$TaskReporter.startCommunicationThread(Task.java:725)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:362)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)

 2013-03-18 14:12:58,907 WARN org.apache.hadoop.mapred.Child: Error running child
 java.io.IOException: Cannot run program "ln": java.io.IOException: error=11, Resource temporarily unavailable
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:431)
    at java.lang.Runtime.exec(Runtime.java:369)
    at org.apache.hadoop.fs.FileUtil.symLink(FileUtil.java:567)
    at org.apache.hadoop.mapred.TaskRunner.symlink(TaskRunner.java:787)
    at org.apache.hadoop.mapred.TaskRunner.setupWorkDir(TaskRunner.java:752)
    at org.apache.hadoop.mapred.Child.main(Child.java:225)
 Caused by: java.io.IOException: java.io.IOException: error=11, Resource temporarily unavailable
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
    at java.lang.ProcessImpl.start(ProcessImpl.java:65)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 7 more
2013-03-18 14:12:58,911 INFO org.apache.hadoop.mapred.Task: Runnning cleanup for the task
2013-03-18 14:12:58,911 INFO org.apache.hadoop.mapred.Child: Error cleaning up
  java.lang.NullPointerException
    at org.apache.hadoop.mapred.Task.taskCleanup(Task.java:1048)
    at org.apache.hadoop.mapred.Child.main(Child.java:281) 
```

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-11T19:54:49.700

总的来说，我在 MapReduce 上体验过这一点。以我的经验，这实际上不是内存不足错误 - 系统正在用完文件描述符来启动线程，这就是为什么它说“无法创建新的本机线程”。

我们（在 Linux 上）的解决方法是通过以下方式将设置为 1024 的 ulimit 增加到 2048 `ulimit -n 2048`：。您需要拥有执行此操作的权限 - sudo 或 root 访问权限或具有 2048 或更高的硬限制，以便您可以将其设置为系统上的您自己的用户。您可以在您的`.profile`或`.bashrc`设置文件中执行此操作。

您可以使用 来检查您的当前设置`ulimit -a`。有关更多详细信息，请参阅此参考：[https ://stackoverflow.com/a/34645/871012](https://stackoverflow.com/a/34645/871012)

我还看到许多其他人谈论更改`/etc/security/limits.conf`文件，但我还没有这样做。这是一个谈论它的链接：[https ://stackoverflow.com/a/8285278/871012](https://stackoverflow.com/a/8285278/871012)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:20:15.903

如果您的作业由于节点上的 OutOfMemory 而失败，您可以调整您的最大映射和减速器的数量，并且 JVM 会选择每个。mapred.child.java.opts（默认为 200Xmx）通常必须根据您的数据节点特定硬件来增加。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-12T04:00:02.430

谢谢大家..你是对的。这是因为文件描述符，因为我的程序在目标表中生成了很多文件。由于多级分区结构。

我增加了 ulimit 和 xceivers 属性。它确实有帮助。但在我们的情况下，这些限制也被超越了

然后我们决定根据分区分配数据，然后每个分区只获取一个文件。

它对我们有用。我们将系统扩展到 500 多亿条记录，它对我们有用

# jquery - JSON 原语在 Ajax jQuery 调用上无效

> ID：15494750
> 
> 赞同：0
> 
> 时间：2013-03-19T08:37:47.070
> 
> 标签：jquery, json, ajax

我陷入了这个我无法解决的问题。我尝试了很多解决方案，我也在 StackOverflow 上搜索并发现了许多旨在解决这个问题的问题，但没有什么对我有用。这是我的问题：我有这个功能

```
$.ajaxWS = function (options) {
    options.url = app.siteUrl + options.url;
    var data = JSON.stringify(options.data);
    var defaults = {
        type: "GET",
        contentType: "application/json; charset=utf-8",
        url: location.protocol + '//' + location.host + location.pathname,
        dataType: "json",
        cache: false,
        crossDomain: true,
        data: JSON.stringify(options.data),
        converters: {
            "text json": function (jsonString) {
                var res = JSON.parseNet(jsonString);
                if (res && res.hasOwnProperty("d")) res = res.d; //.net 3.5
                return res;
            }
        },
        success: function (response, textStatus, XMLHttpRequest) {
            options.success(response, textStatus, XMLHttpRequest);
        },
        error: function (xhr, textStatus, errorThrown) {
            if(xhr.status != 0)
                options.error(xhr, textStatus, errorThrown);
        }
    };
    var options = $.extend(defaults, options);
    return $.ajax(options); 
```

};

当我在字段数据中传递任何字符串时，就像这些

```
 $.ajaxWS({
    url: "urlFunction",
    data: { field1: $('#text1').val(), field2: $('#text2').val() },
    success: function(){
        alert('Success!');
    },
    error: function(xhr, textStatus, errorThrown){
        alert(errorThrown);
    }
}); 
```

它总是返回这个错误

```
{"Message":"JSON primitive not valid: field1.","StackTrace":"   in System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()\r\n   in System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n   in System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)\r\n   in System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n   in System.Web.Script.Services.RestHandler.GetRawParamsFromGetRequest(HttpContext context, JavaScriptSerializer serializer, WebServiceMethodData methodData)\r\n   in System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

我找到了一个以这种方式引用参数的解决方案

```
data: { field1: "'" + $('#text1').val() + "'", field2: "'" + $('#text2').val() + "'" }, 
```

但这只是一种解决方法。我也经常使用 $.ajax 选项，例如

```
processData: false,
traditional: true, 
```

或传递数据不与

```
data: JSON.stringify(options.data), 
```

但只有

```
data: options.data, 
```

或将其放在引号之间，但所有这些尝试都不起作用。我给你另一个信息：这个方法适用于整数和日期。只有字符串会产生问题。你知道如何解决这个问题吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:38:56.963

格式错误的 JSON 可能是您的问题的原因。

JSON解析非常严格。字符串必须始终用双引号括起来。我建议通过[http://jsonlint.com/](http://jsonlint.com/)传递您生成的 JSON以发现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:22:05.100

我找到的解决方案是这样的。在 POST 中传递所有数据

```
$.ajaxWS = function (options) {
    options.url = app.siteUrl + options.url + (app.SessionID?"?ASPSESSID=" + app.SessionID:"");
    options.data = JSON.stringify(options.data);

    var defaults = {
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: location.protocol + '//' + location.host + location.pathname,
        dataType: "json",
        cache: false,
        crossDomain: true,
        data: {},
        converters: {
            "text json": function (jsonString) {
                var res = JSON.parseNet(jsonString);
                if (res && res.hasOwnProperty("d")) res = res.d; //.net 3.5
                return res;
            }
        },
        success: function (response, textStatus, XMLHttpRequest) {
            options.success(response, textStatus, XMLHttpRequest);
        },
        error: function (xhr, textStatus, errorThrown) {
            if(xhr.status != 0)
                options.error(xhr, textStatus, errorThrown);
        }
    };
    var options = $.extend(defaults, options);
    return $.ajax(options); 
```

};

并在我的 ASP.Net 项目的 web.config 中添加这一行

```
<add name="Access-Control-Allow-Methods" value="POST, GET, OPTIONS"/> 
```

以这种方式，我可以在没有单引号的情况下安静地传递参数。

# python-2.7 - 使用 python 读取 MS Word 文件中的自定义文档属性

> ID：15494754
> 
> 赞同：4
> 
> 时间：2013-03-19T08:38:07.597
> 
> 标签：python-2.7, ms-word, pywin32

如何使用 python 获取 MS-Word 2010 文档的文档属性？

文档属性是指可以在 FILE -> Info-> Properties-> Advanced properties 下添加或修改的那些（在 MS-WORD 2010 中）

我在 windows764bit 上使用 python 2.7 和相应的 pywin32com 版本来访问 doc 文件...

我发现 带有方法**值**和**名称的****CustomProperty** -object对于我的目的似乎是正确的（[http://msdn.microsoft.com/en-us/library/bb257518%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb257518%28v=office.12%29.aspx) )

 ****但我不知道如何在python中实现类成员......

我想要做的是获得手动指定的属性，如作者、版本......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:49:26.393

我自己解决了...

读取自定义文档属性的一种方法是：

```
import win32com.client as win32
word = win32.Dispatch("Word.Application")
word.Visible = 0
doc = word.Documents.Open(file)
try:
    csp= doc.CustomDocumentProperties('property_you_want_to_know').value
    print('property is %s' % csp)

except exception as e:
    print ('\n\n', e)

doc.Saved= False
doc.Save()
doc.Close()

word.Quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-20T12:56:25.143

对于以后的 Word 文档（docx），也`python-docx`可以使用模块来读取或设置文档属性：

```
from docx import Document

path = 'D:/myfile.docx'
# create document handler
document = Document(path)
# read properties
document_property = document.core_properties
# print all accessible document properties
print([p for p in dir(document_property) if not p.startswith('_')])
# print author of the document
print(document_property.author)
# set new value for title
document_property.title = 'Everything is Awesome'
# save changes to current file
document.save(path) 
```****

# asp.net-mvc-4 - 可扩展性测试工具

> ID：15494756
> 
> 赞同：0
> 
> 时间：2013-03-19T08:38:13.930
> 
> 标签：asp.net-mvc-4, scalability

我已经开发了 MVC4 Web API。将有大约 100 名并发用户使用此应用程序。是否有任何工具可以测试可生成 100 个 HTTP 请求的可扩展性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:40:30.590

我可以推荐 SOASTA： http: [//www.soasta.com/products/soasta-platform/](http://www.soasta.com/products/soasta-platform/)。

它将使用 Amazon EC2 向您的 API 发送请求，可能来自不同的地理位置（使用单独的 EC2 数据存储）。

# android - 阅读whatsapp消息

> ID：15494757
> 
> 赞同：12
> 
> 时间：2013-03-19T08:38:14.273
> 
> 标签：android, encryption, whatsapp

我想创建一个读取收件箱和whatsapp 消息的android 应用程序。我想做一个备份之类的东西。尽管在whatsapp中有这样做的选项。但我想阅读这些消息，然后从我的应用程序中备份它们。我知道whatsapp在文件系统中以加密格式存储消息。那么任何人都可以告诉我如何读取该加密文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T09:00:46.560

WhatsApp 每天凌晨 4 点在您的 SD 卡上进行聊天备份。这是使用 AES 密钥加密的单个数据库。由于它位于外部存储上，因此如果您有权访问外部存储，您的应用程序就可以读取它。

你可以很容易地解密这个数据库（网上有一篇论文）。

但是，这只会每 24 小时为您提供一次更新的聊天记录。

如果您想要更多实时更新，您的设备必须植根，并且您将需要一个全新的解析器，因为在内部存储中，聊天存储在多个数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:46:46.070

使用 Whatsapp Xtract 2.0 工具解密 whatsapp 数据库并将其转换为 HTML。

[xda论坛上的下载和讨论链接](http://forum.xda-developers.com/showthread.php?p=24603294)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:42:19.403

1.  查看whatsapp的解密密钥是什么（你必须反编译它）
2.  读取该文件内容
3.  使用解密密钥解密内容

备注，使用 root 手机，您可以随时随地访问，其他人可能需要 JNI 来做一些技巧

点赞，如果有帮助！:)

# c# - Clipboard.SetText() 显示错误

> ID：15494760
> 
> 赞同：1
> 
> 时间：2013-03-19T08:38:32.023
> 
> 标签：c#, asp.net, web-applications, webforms

我一直在使用一个简单的 web 表单应用程序来缩短 asp.net 中的 url。我已经成功完成了我的功能，当我更改网址时，它应该会自动复制到剪贴板。

我已将文本值存储在变量中，例如

```
 shortUrl.Text = shortURL; 
```

在此之后我调用剪贴板功能

```
 clip_board(shortURL); 
```

我的功能是

```
 public void clip_board(string shortUrl)
    {
       MessageBox.Show(shortUrl);
       Clipboard.SetText(shortUrl);

    } 
```

此处消息框显示缩短的 url，但`Clipboard.SetText()`显示错误为

> *在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。*

如何克服这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:44:06.167

您说这是一个 ASP.NET 应用程序：在这种情况下，您的 .NET 代码将在服务器上运行，因此您无法访问客户端的剪贴板 - 也无法调用 WinForms 方法，例如`MessageBox.Show`.

回应评论：

> 但它显示带有确切值的消息框......

您是否使用 Visual Studio 和 Cassini Web 服务器进行调试？在这种情况下，您可能会看到`MessageBox.Show`它在当前会话的上下文中运行时的输出。但是当您部署到 IIS 时，这将不起作用。

# c# - 使用通用接口获取公共属性

> ID：15494763
> 
> 赞同：0
> 
> 时间：2013-03-19T08:38:38.257
> 
> 标签：c#, generics, interface, casting

抱歉，我无法用语言真正解释我想要做什么，但是..

说我有 secnario。

```
public class TestClass
{
}

public class TestClass1 : TestClass, TestInterface<ValueClass1>
{
    public ValueClass1 Property { get; set; }
}

public class TestClass2 : TestClass, TestInterface<ValueClass2>
{
    public ValueClass2 Property { get; set; }
}

public interface TestInterface<T> where T : ValueClass
{
    T Property { get; set; }
}

public class ValueClass
{
    public int Id { get; set; }
}

public class ValueClass2 : ValueClass
{
} 
```

我需要从一个包含和（以及更多）`Property`的列表中获取一个值，但我不知道如何遍历列表并设置值。`List<TestClass>``TestClass1``TestClass2``Property`

所以这基本上就是我想要做的

```
List<TestClass> list = new List<TestClass>();

foreach (var item in list.OfType<????>())
{
    item.Property = PropertyManager.GetProperty(item.Property.Id);
} 
```

## 编辑：

我有许多具有共同属性的类，但我需要该`Type`属性的实际值而不是`base Type`（由于序列化等其他因素），并且我需要能够遍历主基类的列表并访问该属性.

就像我上面的例子一样，我只需`Id`要从`Property`.

目前每个班级都有自己的班级`Property`，我正在`Reflection`做我需要做的事情，我只是在寻找一个更清洁的解决方案。

## **编辑：**

这是我目前的实现

```
public class TestClass
{
}

public class TestClass1 : TestClass
{
    public ValueClass Property { get; set; }
}

public class TestClass2 : TestClass
{
    public ValueClass2 Property { get; set; }
}

public class ValueClass
{
    public int Id { get; set; }
}

public class ValueClass2 : ValueClass
{
} 
```

并设置我必须使用反射的值

```
List<TestClass> list = new List<TestClass>();

foreach (var item in list.Where(x => x.GetType().GetProperty("Property") != null))
{
    var property = item.GetType().GetProperty("Property");
    property.SetValue(PropertyManager.GetProperty((property.GetValue(item) as ValueClass).Id));
} 
```

这`PropertyManager`只是`Dictionary`一种`ValueClass`类型

```
public static ValueClass GetProperty(int id)
{
    if (_properties.Containskey(id))
    {
       return _properties[id];
    }
    return null;
} 
```

所以我需要的是一种循环“TestClass”列表并填充任何具有`ValueClass` `Property`.

目前我认为`Reflection`这是我唯一真正的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:46:42.430

这些类关系是一团糟，我保证你不会对这些继承和参数关系感到满意。你能详细说明你想要做什么吗？

无论如何，您可以通过以下方式访问*Property*和*Id*：

```
 static void Main(string[] args)
    {
        List<TestClass> list = new List<TestClass>();

        foreach (TestClass item in list)
        {
            ValueClass x = item.Property;
            int y = item.Property.Id;
        }
    } 
```

在这种情况下，通常最好首先避免使用 var，以了解变量的类型。

**编辑**
一个快速且不太脏的解决方案是使用**dynamic**。

```
dynamic d = o; // assign the items in your list to a dynamic variable
var somevar = d.Property;    // access any property you expect x to have. 
```

**编辑** 干净的解决方案是：
1\. 定义一个接口，在循环中包含您想要和需要的所有内容。
2\. 将接口附加到实现它的类型上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:31:44.657

```
public interface IHasProperty {
   ValueClass PropertyAsValueClass { get;set; }
}

public class TestClass<T> : IHasProperty where T : ValueClass
{
   public T Property {get;set;}

   public ValueClass PropertyAsValueClass {
     get { return this.Property; }
     set { this.Property = value as T; }
   }
}

public class TestClass1 : TestClass<ValueClass>
{
}

public class TestClass2 : TestClass<ValueClass2>
{
}

public class ValueClass
{
    public int Id { get; set; }
}

public class ValueClass2 : ValueClass
{
} 
```

如果你愿意，你可以额外检查...

接着

```
var list = new List<IHasProperty>();
foreach (var item in list)
{
    item.PropertyAsValueClass = PropertyManager.GetProperty(item.PropertyAsValueClass.Id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:03:31.890

你可以试试：

```
public class TestClass
{
    public virtual ValueClass Property { get; set; }
}

public class TestClass1 : TestClass
{
    private ValueClass property = null;
    public override ValueClass Property
    {
        get
        {
            return property;
        }
        set
        {
            property = (ValueClass)value;
        }
    }
}

public class TestClass2 : TestClass
{
    private ValueClass2 property = null;
    public override ValueClass Property
    {
        get
        {
            return property;
        }
        set
        {
            property = (ValueClass2)value;
        }
    }
}

public class ValueClass
{
    public int Id { get; set; }
}

public class ValueClass2 : ValueClass
{
} 
```

和：

```
foreach (var item in list)
        {
            item.Property = PropertyManager.GetProperty(item);
        } 
```

# android - 横幅固定宽度

> ID：15494767
> 
> 赞同：1
> 
> 时间：2013-03-19T08:38:48.670
> 
> 标签：android, android-layout

我有一个带有横幅的布局。我删除了所有其余的代码。

我将它创建为图像按钮。

布局有一个图像作为布局，例如在hdpi中，大小为：720x1200 px，图像按钮为720x200

这是图像按钮：

![在此处输入图像描述](../Images/38e88ce6d7366871ff74cb45277354ca.png)

但是imagebutton没有固定宽度，但我没有发现错误！

![在此处输入图像描述](../Images/1682bd95f61c022d7d717092c97cbd42.png)

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:background="@drawable/background"
>

    <ImageButton
            android:id="@+id/sabadell_but"
            android:background="@null"
            android:contentDescription="@string/infoDesc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:src="@drawable/banner_sabadell" />  

    </LinearLayout> 
```

如何让图像按钮固定宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:50:38.650

试试这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:background="@drawable/background">

<ImageButton
        android:id="@+id/sabadell_but"
        android:background="@drawable/banner_sabadell"
        android:contentDescription="@string/infoDesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dip"
        />  

</LinearLayout> 
```

正如您`wrap_content`对 imagebutton 所使用的那样，它会强制您的按钮与 imageButton 宽度相匹配。并且由于您已将图像设置为 src，因此它不会缩放图像，为此，您可以将图像设置为`android:background`而不是将其设置为`android:src`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:44:13.530

设置`android:layout_width`为`match_parent`您的`ImageButton`.

# ios - 有没有办法将 Adob e AIR 包含到 iOS 应用程序中？

> ID：15494770
> 
> 赞同：0
> 
> 时间：2013-03-19T08:39:03.010
> 
> 标签：ios, air

当您第一次尝试在 iDevice 上安装 AIR 应用程序时，您会收到有关您需要先安装 Adob​​e AIR 的消息。有没有办法避免这种情况？我的意思是以某种方式构建应用程序，它已经包含 Adob​​e AIR。提前致谢

# java - 从字符串中删除所有空格，但保留一个换行符

> ID：15494780
> 
> 赞同：9
> 
> 时间：2013-03-19T08:39:51.183
> 
> 标签：java, string, whitespace, removing-whitespace

我有这个输入字符串（包含制表符、空格、换行符）：

* * *

```
 That      is a test.              
    seems to work       pretty good? working.

    Another test  again. 
```

* * *

[编辑]：我应该提供字符串以进行更好的测试，因为 stackoverflow 删除了所有特殊字符（制表符，...）

```
String testContent = "\n\t\n\t\t\t\n\t\t\tDas      ist ein Test.\t\t\t  \n\tsoweit scheint das \t\tganze zu? funktionieren.\n\n\n\n\t\t\n\t\t\n\t\t\t      \n\t\t\t      \n    \t\t\t\n    \tNoch ein  Test.\n    \t\n    \t\n    \t"; 
```

我想达到这个状态：

* * *

```
That is a test.
seems to work pretty good? working.
Another test again. 
```

* * *

```
String expectedOutput = "Das ist ein Test.\nsoweit scheint das ganze zu? funktionieren.\nNoch ein Test.\n"; 
```

有任何想法吗？这可以使用正则表达式来实现吗？

`replaceAll("\\s+", " ")`不是我要找的。如果这个正则表达式将保留现有的 1 个换行符，那将是完美的。

我已经尝试过了，但这对我来说似乎不是最理想的......：

```
BufferedReader bufReader = new BufferedReader(new StringReader(testContent));
String line = null;
StringBuilder newString = new StringBuilder();
while ((line = bufReader.readLine()) != null) {
    String temp = line.replaceAll("\\s+", " ");
    if (!temp.trim().equals("")) {
        newString.append(temp.trim());
        newString.append("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T09:05:56.560

在单个正则表达式中（加上标签的小补丁）：

```
input.replaceAll("^\\s+|\\s+$|\\s*(\n)\\s*|(\\s)\\s*", "$1$2")
     .replace("\t"," "); 
```

正则表达式看起来令人生畏，但实际上可以很好地分解为这些经过 OR-ed 的部分：

*   `^\s+`– 匹配开头的空格；
*   `\s+$`– 最后匹配空格；
*   `\s*(\n)\s*`– 匹配包含换行符的空格，并捕获该换行符；
*   `(\s)\s*`– 匹配空格，捕获第一个空格字符。

结果将与两个捕获组匹配，但一次可能只有一个组不为空。这允许我将匹配替换为`"$1$2"`，这意味着“连接两个捕获组”。

唯一剩下的问题是我无法使用这种方法将制表符替换为空格，因此我通过简单的非正则表达式字符替换来解决这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T09:00:32.573

分 4 个步骤：

```
text
    // 1\. compress all non-newline whitespaces to single space
    .replaceAll("[\\s&&[^\\n]]+", " ")
    // 2\. remove spaces from begining or end of lines
    .replaceAll("(?m)^\\s|\\s$", "")
    // 3\. compress multiple newlines to single newlines
    .replaceAll("\\n+", "\n")
    // 4\. remove newlines from begining or end of string
    .replaceAll("^\n|\n$", "") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:45:48.503

如果我理解正确，您只想用一个换行符替换一系列换行符。所以替换`\n\n*`为`\n`（使用适当的标志）。如果行中有很多空格，只需`^\s\s*$`先删除空格（使用多行模式），然后替换换行符。

编辑：这里唯一的问题是一些换行符可能会保留在这里和那里，所以你必须小心首先折叠空格，然后修复空行问题。您可以将其进一步精简为可能的单个正则表达式，但使用这三个更容易阅读：

```
 Pattern spaces = Pattern.compile("[\t ]+");
 Pattern emptyLines = Pattern.compile("^\\s+$?", Pattern.MULTILINE);
 Pattern newlines = Pattern.compile("\\s*\\n+");
 System.out.print(
      newlines.matcher(emptyLines.matcher(spaces.matcher(
        input).replaceAll(" ")).replaceAll("")).replaceAll("\n")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T08:48:10.157

你为什么不做

```
String[] lines = split(s,"\n")
String[] noExtraSpaces = removeSpacesInEachLine(lines)
String result = join(noExtraSpaces,"\n") 
```

不要忘记[https://softwareengineering.stackexchange.com/questions/10998/what-does-the-jamie-zawinskis-quotation-about-regular-expressions-mean](https://softwareengineering.stackexchange.com/questions/10998/what-does-the-jamie-zawinskis-quotation-about-regular-expressions-mean)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T08:49:24.083

首先用*一个新行替换所有**新*行，然后替换*空格*但*不是新行*，最后，您应该从字符串的开头删除所有空格：

 ***```
String test = "      This is              a real\n\n\n\n\n\n\n\n\n test !!\n\n\n   bye";
test = test.replaceAll("\n+", "\n");
test = test.replaceAll("((?!\n+)\\s+)", " ");
test = test.replaceAll("((?!\n+)\\s+)", ""); 
```

输出：

```
This is a real
test !!
bye 
```***

# javascript - JS ProgressEvent 仅在完成时触发

> ID：15494781
> 
> 赞同：5
> 
> 时间：2013-03-19T08:39:51.017
> 
> 标签：javascript, jquery, upload, progress, xmlhttprequest-level2

我在让我的上传进度条正常工作时遇到了一些问题。

根据 XMLHttpRequest Level 2 规范，我为 loadstart 和进度附加了事件侦听器，如下所示：

```
var xhr = $.ajaxSettings.xhr();
xhr.upload.addEventListener('loadstart', function(e) {progressCallback(0);});
xhr.upload.addEventListener('progress', function (e) {
    progressCallback(e.loaded / e.total);
});    

$.ajax({
    url: url,
    type: 'POST',
    processData: false,
    contentType: false,
    data: formData,
    xhr: function () {
        return xhr;
    }
}).done(function (data) {
    // Finish stuff
}) 
```

文件已正确上传，但仅在请求以 100% 完成后才调用进度侦听器（e.total == e.loaded）

上面的代码有什么问题还是需要以任何特殊方式配置服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:54:05.963

当文件的总大小无法确定时，`e.loaded`为零`e.total`。你可以在你的`progress`函数中检查这个：

```
if (evt.lengthComputable) {
    progressCallback(e.loaded / e.total);
} 
```

服务器还必须发送[规范](http://www.w3.org/TR/progress-events/#interface-progressevent)`Content-Length`中定义的内容：

> 如果通过 Content-Length 标头知道 HTTP 实体主体的长度，则将 lengthComputable 属性初始化为 true，并将总属性初始化为长度。

另请注意，进度条不适用于`file:`协议。

我真的可以推荐非常广泛的 Mozilla 文档 - [Using XMLHTTPRequest Mozilla Docs](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-10T18:43:12.163

我自己也遇到了类似的问题，我的事件处理函数`progress`只`XMLHttpRequest`执行了一次——上传完成时。

问题的原因很简单——在谷歌浏览器中（可能还有其他浏览器，我没有测试），`progress`如果上传运行了一两秒，事件才会连续触发。换句话说，如果您的上传很快完成，那么您很可能只会获得一个 100%`progress`的事件。

这是一个代码示例，其`progress`事件仅在 100% 完成时触发一次（[https://jsfiddle.net/qahs40r6/](https://jsfiddle.net/qahs40r6/)）：

```
$.ajax({
  xhr: function()
  {
    var xhr = new window.XMLHttpRequest();
    //Upload progress
    xhr.upload.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        console.log("Upload ", Math.round(percentComplete*100) + "% complete.");
      }
    }, false);
    return xhr;
  },
  type: 'POST',
  url: "/echo/json/",
  data: {json: JSON.stringify(new Array(20000))}
}); 
```

控制台输出：

```
Upload  100% complete. 
```

但是，如果您在数组的大小上添加一个额外的零（将有效负载大小增加 10 倍[——https](https://jsfiddle.net/qahs40r6/1/) ://jsfiddle.net/qahs40r6/1/ ）：

```
$.ajax({
  xhr: function()
  {
    var xhr = new window.XMLHttpRequest();
    //Upload progress
    xhr.upload.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        console.log("Upload ", Math.round(percentComplete*100) + "% complete.");
      }
    }, false);
    return xhr;
  },
  type: 'POST',
  url: "/echo/json/",
  data: {json: JSON.stringify(new Array(200000))}
}); 
```

然后你会得到`progress`事件的正常进展：

```
Upload  8% complete.
Upload  9% complete.
Upload  19% complete.
Upload  39% complete.
Upload  50% complete.
Upload  81% complete.
Upload  85% complete.
Upload  89% complete.
Upload  100% complete. 
```

此行为取决于您的 Internet 连接速度，因此您的里程会有所不同。例如，如果您使用第一个示例并使用 Chrome 开发人员工具来减慢与模拟“Slow 3G”的连接速度，那么您将看到一系列`progress`事件。

同样，如果您在本地开发并将数据上传到本地 Web 服务器，您可能永远不会看到`progress`事件，因为上传会立即完成。

# r - R中的which()错误

> ID：15494785
> 
> 赞同：1
> 
> 时间：2013-03-19T08:33:49.567
> 
> 标签：r

```
minls<- -5.74
maxls<- 1.97
sseq<-seq(minls,maxls,0.5)
which(sseq==-0.24) 
```

其中（sseq==-0.24）给出输出数字（0）

测试序列

```
 [1] -5.74 -5.24 -4.74 -4.24 -3.74 -3.24 -2.74 -2.24 -1.74 -1.24 -0.74 -0.24  0.26  0.76  1.26  1.76 
```

如您所见，第 12 个元素是 -0.24

简单地通过 c(...) 创建一个数组不会给出这个错误

我在做什么不正确或者这是 which() 函数的问题，是否有任何替代 which()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:38:48.477

您正面临数值近似问题。

尝试`sseq == -0.24`或`sseq+0.24`。

在那里你会注意到没有一个值`sseq`是完全正确的`-0.24`。所以这个问题与 无关`which`，只是因为计算机不能准确地表示所有数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T08:47:17.230

这可能是由于浮点问题。您可以使用`all.equal`阈值（`tolerance`此函数的参数）进行检查。

```
# tolerance is default - .Machine$double.eps ^ 0.5
chk <- apply(as.matrix(sseq), 1, function(x) {
    ifelse(all.equal(x, -0.24) == "TRUE", TRUE, FALSE)
})
which(chk)
# [1] 12 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:55:44.697

与@Arun 回答类似，您也可以这样做

```
# Change 1e-9 to whatever tolerance suits you best
which(abs(sseq-(-0.24)) < 1e-9) 
```

# zend-framework2 - 禁用默认 zfcUser 路由？

> ID：15494787
> 
> 赞同：2
> 
> 时间：2013-03-19T08:40:23.677
> 
> 标签：zend-framework2, zfcuser

我正在使用`zfcUser`，我想知道是否可以禁用默认路由，例如`zfcUser/login`,`zfcUser/register`等，因为我不想公开它们。

我看了看，`zfcuser.global.php`但似乎没有这样的选择？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:59:01.943

您可以通过设置空控制器或不匹配的路由配置来简单地覆盖配置。

解决方案1：覆盖`zfcuser`控制器可调用：

```
// YourApp\Module#getConfig() or config/autoload/zfcuser.override.global.php

return array(
    'controllers' => array(
        'invokables' => array(
            'zfcuser' => null,
        ),
    ),
); 
```

解决方案 2：使用您自己的路由配置覆盖路由配置（hacky，不鼓励）：

```
// YourApp\Module#getConfig() or config/autoload/zfcuser.override.global.php

return array(
    'router' => array(
        'routes' => array(
            'zfcuser' => array(
                // changing to hostname route - using an unreachable hostname
                'type' => 'Hostname',
                // minimum possible priority - all other routes come first.
                'priority' => ~PHP_INT_MAX,
                'options' => array(
                    // foo.bar does not exist - never matched
                    'route' => 'foo.bar',
                    'defaults' => array(
                        'controller' => null,
                        'action' => 'index',
                    ),
                ),

                // optional - just if you want to override single child routes:
                'child_routes' => array(
                    'login' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                    'authenticate' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                    'logout' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                    'register' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                    'changepassword' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                    'changeemail' => array(
                        'options' => array(
                            'defaults' => array(
                                'controller' => null,
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
); 
```

# magento - 如何在 Mage::run 之前获取 Magento 客户数据？

> ID：15494796
> 
> 赞同：0
> 
> 时间：2013-03-19T08:40:51.177
> 
> 标签：magento

在加载商店之前，我想获取一些客户数据，然后决定加载哪个商店视图。但它不是这样工作的：

```
// Option 1
$customer = Mage::getSingleton('customer/session'); // does not work before Framework is loaded

// Option 2
Mage::app();
$customer = Mage::getSingleton('customer/session'); // does work but...
Mage::run($mageRunCode, $mageRunType); // produces here the following error: "Mage registry key "controller" already exists" 
```

那么，如何加载客户数据，然后加载店铺呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:07:35.980

据我所知，没有办法做到这一点，因为商店必须自行初始化才能为您提供您想要使用的模型。

我能想到的唯一方法是直接将它们从数据库中拉出，而不需要任何 Magento 类，因为我认为 Autoloader 本身尚未初始化。

编辑：

试试 Mage::app('your_store_view_name)

# extjs - 将控制器中所做的更改更新到视图

> ID：15494797
> 
> 赞同：0
> 
> 时间：2013-03-19T08:40:52.063
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

如何将控制器中所做的更改更新到视图？

**看法**

```
 Ext.define('SomeClassName',
 extends: 'Ext.container.Container',
 alias: 'widget.somewidget'
 /* other content here */ 
```

**控制器**

```
 requires: ['SomeClassName'],
 init: function(){
     var someVar = Ext.widget('somewidget');
     Ext.apply(someVar,{html: 'hello'});
 } 
```

尽管，在上面的控制器中，我改变`html`了变量，但视图没有改变。我在这里做错了吗？

如果这是不可能的，那么如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:43:16.687

那（[文档](http://docs.sencha.com/ext-js/4-2/#!/api/Ext-method-widget)）呢？

```
Ext.widget('somewidget', { html: 'hello' }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:07:28.893

`Ext.container.Container`首先，如果您只想呈现自定义 HTML ，则不应使用。`Ext.Component`就足够了。其次，您可以使用模板：

```
Ext.define('MyView', {
    extend: 'Ext.Component',
    alias: 'widget.myview',
    tpl: [
        '<div>Simon says: {command}</div>'
    ]
});

Ext.define('MyController', {
    extend: 'Ext.app.Controller',
    requires: ['MyView'],
    init: function() {
        var cmp = Ext.widget('myview');
        cmp.update({
            command: 'jump!'
        });
    }
}); 
```

请注意`tpl`，第一次渲染组件时不会应用，您必须调用`update`它。要在初始化时呈现模板，请`data`使用默认模板值设置属性：

```
Ext.define('MyView', {
    extend: 'Ext.Component',
    alias: 'widget.myview',
    tpl: [
        '<div>Simon says: {command}</div>'
    ],
    data: {
        command: 'do nothing.'
    }
}); 
```

# apache - Apache Web 服务器 , 策略 代理 , openAM

> ID：15494798
> 
> 赞同：0
> 
> 时间：2013-03-19T08:40:53.373
> 
> 标签：apache, openam

我们有 Liferay 服务器，登录页面是使用 Apache Web 服务器上的策略代理配置的公共页面，用户的身份验证过程是通过 openAM 完成的。成功验证后，必须将用户重定向到 url 中提到的 goto 参数，如果身份验证失败（通过身份验证模块），我们正在处理错误并使用请求中的错误代码再次将用户重定向到登录页面。

但是现在apache web服务器再次拦截了请求，我认为因为同样的错误代码丢失了，有什么方法可以纠正程序，以便我们在身份验证不成功时也可以得到错误代码。

同样在我们的例子中，goto 参数被附加在 url 中的次数超过了所需的次数，这是不正确的。

请让我知道我可能错在哪里，是配置策略代理时的问题还是来源不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:15:53.473

策略代理将始终首先查看现有的 SSO 会话跟踪 cookie……如果不存在，它将用户代理重定向到配置的 loginURL。

如果身份验证失败，则请求中没有可用的 SSO 会话跟踪 cookie，因此您必须将“错误 URL”放入未强制列表中。

您可以阅读 OpenSSO 的技术概述（只要 OpenAM 不提供这样的文档）以获得基本的了解。

# javascript - 如何在javascript中将锁定应用于2个函数

> ID：15494805
> 
> 赞同：0
> 
> 时间：2013-03-19T08:41:23.440
> 
> 标签：javascript

如何将锁应用于 2 个函数，以便第一个函数首先执行，然后在同时调用时执行第二个函数。

2个功能是：

```
function f1(){
   //some code here
}

function f2(){
   //some code here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:44:43.893

JavaScript 中的函数不是“同时调用”的：只有一个用户线程。

你不必放锁，你必须看看你是如何调用函数的。也许你不必在意。

如果您想要在完成 ajax 请求时按顺序执行两个函数，那么您可以使用 jQuery 的[promise](http://api.jquery.com/category/deferred-object/)系统：

```
$.when($.ajax(...), $.ajax(...)).done(function(){
  f1();
  f2();
}); 
```

# kineticjs - kineticjs 将文本添加到形状

> ID：15494807
> 
> 赞同：1
> 
> 时间：2013-03-19T08:41:26.597
> 
> 标签：kineticjs

我想在形状内添加文本，然后让形状可拖动。

这是一个显示文本的小提琴，以及可拖动的形状......但我不知道如何在形状内添加文本。

[http://jsfiddle.net/sJpdz/](http://jsfiddle.net/sJpdz/)

```
 <script src="kinetic-v4.3.3.min.js"></script>
    <script>
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 500,
            height: 500
        });

        var layer = new Kinetic.Layer();

        var rect = new Kinetic.Rect({
            x: 239,
            y: 75,
            width: 100,
            height: 50,
            fill: 'green',
            stroke: 'black',
            strokeWidth: 4,
            draggable: true
        });

        var simpleText = new Kinetic.Text({
            x: stage.getWidth() / 2,
            y: 15,
            text: 'Simple Text',
            fontSize: 30,
            fontFamily: 'Calibri',
            textFill: 'green',
            stroke: 'gray',
            fill: 'white'
        });
        layer.add(simpleText);
        // add the shape to the layer
        layer.add(rect);

        // add the layer to the stage
        stage.add(layer);
    </script> 
```

我能想到的唯一方法就是让两个单独的图层重叠并将它们组合在一起。然而，这似乎是一个相当繁琐的过程，我希望有一个更优雅的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:32:50.960

```
var stage = new Kinetic.Stage({
            container: 'container',
            width: 500,
            height: 500
        });

var layer = new Kinetic.Layer({
 draggable: true
});

        var rect = new Kinetic.Rect({
            x: 239,
            y: 75,
            width: 100,
            height: 50,
            fill: 'green',
            stroke: 'black',
            strokeWidth: 4,

        });

        var simpleText = new Kinetic.Text({
            x: rect.getX(),
            y: rect.getY(),
            text: 'Simple Text',
            fontSize: 24,
            fontFamily: 'Calibri',
            width:rect.getWidth() ,
            align: 'center',    
            fill: 'white'
        });
     layer.add(rect);
        layer.add(simpleText);
        // add the shape to the layer

        // add the layer to the stage
        stage.add(layer); 
```

# java - 如何在android中设置Arraylist值静态

> ID：15494808
> 
> 赞同：-3
> 
> 时间：2013-03-19T08:41:29.300
> 
> 标签：java, android, android-layout

我已经添加了`Array List<String>dynamically`从 Web 服务获取所有数据。我需要静态添加最后一个位置。怎么做？

```
arrayAdapter = new ArrayAdapter<String>(MainActivity.this,
android.R.layout.simple_list_item_1, arrListViewcuisine);
lv.setAdapter(arrayAdapter);

enter code here

    try {
            JSONArray json = new JSONArray(result);

            // JSONArray post = json;

            for (int i = 0; i < json.length()+1; ++i) {
                if(i==json.length())
                {
                    JSONObject rec1 = json.getJSONObject(i);

                    arrlistdatacuisine.add(i, rec1.getString("cuisine"));
                }
                else
                {
                    JSONObject rec1 = json.getJSONObject(i);
                    arrlistdatacuisine.add(i,"All Resturent");
                }

            }

            arrListViewcuisine = (ArrayList<String>) arrlistdatacuisine
                    .clone();
            Collections.sort(arrListViewcuisine);
            arrayAdapter = new ArrayAdapter<String>(MainActivity.this,
                    android.R.layout.simple_list_item_1, arrListViewcuisine);
            lv.setAdapter(arrayAdapter); 
```

在此处输入代码 } catch (Exception e) { `enter code here` // TODO: 处理异常 }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:58:49.477

你可以这样做：

```
JSONArray array = new JSONArray(server result);
ArrayList<String> mList = new ArrayList<String>();

 for (int i = 0; i < array.length()+1; i++) {
  if ( i==array.length()){
   mList.add(i, obj.getString("departmentname"));
 }
 else{
   obj = (JSONObject) array.get(i);
   mList.add(i, "add ur static value");
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:53:00.563

我不确定您到底在问什么，但我得到的是您想在列表末尾添加一些内容。

当您向 arrListViewcuisine 添加值时，找到 arrayList 的大小，然后`arrListViewcuisine.add(arrListViewcuisineSize-1,"your string");`

# java - java 外观：windows server 2012 显示进度条太细

> ID：15494812
> 
> 赞同：1
> 
> 时间：2013-03-19T08:41:45.510
> 
> 标签：java, swing, jframe, look-and-feel

当我使用时，我在 **windows server 2012 ** 上的进度条非常细

```
 UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

该栏在 Windows 7 中看起来不错，在 Windows Server 2012 上非常薄。
每个地方的 Java 版本都是（JDK 和 JRE）1.6.0_25，32 位

![在此处输入图像描述](../Images/8f0d9874ba1f84f92fac21531919df2f.png)

这是演示我在 jdk 1.6.0_25 上的问题（或文档问题）的完整代码

```
package demos;

import javax.swing.*;
import javax.swing.plaf.metal.DefaultMetalTheme;
import javax.swing.plaf.metal.MetalLookAndFeel;
import java.awt.*;

public class ProgressBarLookAndFeelDemo {

    private void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("FrameDemo");
    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

    JPanel progPanel = new JPanel();
    progPanel.setLayout(new GridBagLayout());

    frame.getContentPane().add(progPanel, BorderLayout.CENTER);

    //
    JProgressBar progressBar = new JProgressBar();
    progressBar.setIndeterminate(true);
    progPanel.add(progressBar);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
    }

    public  void showUI(String  name) throws ClassNotFoundException, UnsupportedLookAndFeelException, InstantiationException, IllegalAccessException {
    MetalLookAndFeel.setCurrentTheme(new DefaultMetalTheme());

    if ( name.equalsIgnoreCase("system")) {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
        createAndShowGUI();
        }
    });
    }

    public static void main(String[] args) throws
        ClassNotFoundException, UnsupportedLookAndFeelException,
        InstantiationException, IllegalAccessException {

    if (args.length <1 ) {
        System.out.println("usage  : One argument is expected  none|system");
        throw  new IllegalArgumentException("java classname none|system");
    }

    new ProgressBarLookAndFeelDemo().showUI(args[0]);

    }
} 
```

这可能是 Windows 2012 的行为，但我看不到任何与之相关的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:50:30.933

我希望 32b 和 64b 版本没有问题

JDK_1.6_022 32b

![在此处输入图像描述](../Images/9f9c29bab64e868d33b4b98908441d01.png)

![在此处输入图像描述](../Images/3149e6fd39625912be2d9f20d541a90c.png)

![在此处输入图像描述](../Images/32e82d91990c9d50cc8361c6dbc73a2f.png)

JDK_1.7_011 64b

![在此处输入图像描述](../Images/09348848417039abc89c687bc5d3112c.png)

![在此处输入图像描述](../Images/8deb34a8490fd4e12c7e5b12f12e4598.png)

![在此处输入图像描述](../Images/ad5dc438cf6f97fb9d8c2978b056d992.png)

从代码

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.WindowConstants;

public class ProgressBarLookAndFeelDemo {

    public ProgressBarLookAndFeelDemo() {
        JProgressBar progressBar = new JProgressBar();
        progressBar.setIndeterminate(true);

        JProgressBar progressBar1 = new JProgressBar();
        progressBar1.setValue(66);

        JPanel progPanel = new JPanel();
        progPanel.setLayout(new GridBagLayout());
        progPanel.add(progressBar);
        progPanel.add(progressBar1);

        JFrame frame = new JFrame("Frame Demo");
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(progPanel, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                System.out.println(info.getName());
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (UnsupportedLookAndFeelException e) {
            // handle exception
        } catch (ClassNotFoundException e) {
            // handle exception
        } catch (InstantiationException e) {
            // handle exception
        } catch (IllegalAccessException e) {
            // handle exception
        }/**/
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ProgressBarLookAndFeelDemo();
            }
        });
    }
} 
```

# android - Android：覆盖本机 CALL 和 SMS HANDLING

> ID：15494817
> 
> 赞同：2
> 
> 时间：2013-03-19T08:42:10.817
> 
> 标签：android

是否可以覆盖为呼叫和短信处理提供的默认应用程序，例如当我收到来自该号码的呼叫时，默认呼叫处理程序向我们显示联系人姓名但我想在我的应用程序数据库中搜索此号码并显示其对应入口 ？

# python - PySide 程序崩溃处理程序

> ID：15494825
> 
> 赞同：1
> 
> 时间：2013-03-19T08:42:54.693
> 
> 标签：python, python-2.7, error-handling, pyqt, pyside

我的程序在遇到错误时会发送电子邮件。有没有办法处理这个程序的崩溃并用这个程序发送关于它的电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:45:05.303

您正在寻找`sys.excepthook`，这里是一个例子：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import cStringIO, traceback

from PyQt4 import QtGui, QtCore

errorNotice = """
An unhandled exception occurred. Details will be reported
via an automatic email.
"""

class MyMessageBox(QtGui.QMessageBox):
    def __init__(self, *args, **kwargs):            
        super(MyMessageBox, self).__init__(*args, **kwargs)
        self.tracebackInfoStream = cStringIO.StringIO()

        self.setIcon(QtGui.QMessageBox.Critical)
        self.finished.connect(self.on_finished)

    def getTraceback(self, exceptionTraceback):
        traceback.print_tb(
            exceptionTraceback,
            None,
            self.tracebackInfoStream
        )

        self.tracebackInfoStream.seek(0)

        return self.tracebackInfoStream.read()

    def exceptHook(self, exceptionType, exceptionValue, exceptionTraceback):   
        tracebackInfo = self.getTraceback(exceptionTraceback)

        self.setDetailedText(tracebackInfo)
        self.setText(errorNotice)
        self.exec_()

    @QtCore.pyqtSlot()
    def on_finished(self):  
        QtGui.QApplication.quit()

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonError = QtGui.QPushButton(self)
        self.pushButtonError.setText("Raise an Error!")
        self.pushButtonError.clicked.connect(self.on_pushButtonError_clicked)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.pushButtonError)

    @QtCore.pyqtSlot()
    def on_pushButtonError_clicked(self):
        raise UserWarning("This is an error")

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    myMessageBox = MyMessageBox()

    sys.excepthook = myMessageBox.exceptHook

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# excel - Excel 列值之间有大空格

> ID：15494826
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:42:57.813
> 
> 标签：excel, formula

在 excel 中，我的内容与下面的内容完全相同。我需要使用 excel 公式删除所有不必要的信息。只保留 -.pdf。

> 1-Abc.pdf 是包含重要内容的pdf
> 
> 2-Def.pdf 是一个包含重要内容的 pdf
> 
> 3-Ghi.pdf 是包含重要内容的 pdf
> 
> 4-Jkl.pdf 是包含重要内容的pdf

我的最终结果如下所示。

`1-Abc.pdf`
`2-Def.pdf`
`3-Ghi.pdf`
`4-Jkl.pdf`

请帮忙。我在下面上传了一个示例。 [http://www.4shared.com/file/w_BSr62W/Sample.html](http://www.4shared.com/file/w_BSr62W/Sample.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:03:45.777

基本思路如下：

```
Sub TrimToFirstSpace()
    Dim strHolder As String
    Dim intSlicer As Integer

    strHolder = ActiveCell.Value
    intSlicer = InStr(1, strHolder, " ")

    strHolder = Left(strHolder, intSlicer - 1)
End Sub 
```

如果您愿意，可以将 strHolder 放入`Activecell.Value`或 其他地方。

# c# - 按名称返回排序的目录文件夹

> ID：15494827
> 
> 赞同：0
> 
> 时间：2013-03-19T08:42:59.837
> 
> 标签：c#, sorting, directoryinfo

我有一个目录路径 c:\W，其中包含文件夹列表-

```
01_C
02_B
03_A
04_F 
```

我希望对目录文件夹进行排序并返回以下输出 -

```
A
B
C
F 
```

我正在使用.net 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:47:32.307

如果要对目录名称的最后一个字符进行排序，则：

```
DirectoryInfo di = new DirectoryInfo("c:\\w");
List<string> dirList = di.GetDirectories()
                         .Select(r => r.Name)
                         .OrderBy(r => r[r.Length - 1])
                         .ToList(); 
```

记得包括`using System.Linq` 在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:55:58.387

```
DirectoryInfo d = new DirectoryInfo(@"C:\W");
var sorted = d.GetDirectories().Select(f => f.Name.Split('_')[1]).OrderBy(name => name); 
```

请注意，这里没有任何错误处理，只是一个让您滚动的想法。

# javascript - 在动态网站中安排 JS 代码的最佳实践

> ID：15494835
> 
> 赞同：0
> 
> 时间：2013-03-19T08:43:22.250
> 
> 标签：javascript, server-side

在管理我们自己编写的 JS 代码（不是 jquery 之类的 js 库）时，我有以下担忧：

仅将 javascript 与 html 相关联还是将其与服务器端代码相关联更好？意味着从服务器端代码返回 JS 代码还是创建单独的 JS 文件并从 html 代码中引用它或将其写入 html 页面中更好？

这里我想提一个例子：

假设我有 2 个服务器端页面，注册和登录，并说我们正在使用 jquery 验证插件（在 html 中使用脚本标记引用），我们将使用它来验证注册和登录表单，在这种情况下，我们需要编写验证登录页面的 JS语句 和注册页面`$('.login_form').validate();`的验证 JS 语句 `$('.register_form').validate();`。

那么我是否需要创建 2 个 js 文件（login.js、register.js）并在其 js 文件中添加每个语句，或者在 html 页面本身内编写代码，或者从每个页面服务器端代码返回 js 代码？

在这里我的困惑是，如果我将创建 2 个单独的文件，最好保持 JS 代码是独立的，但是对于性能和页面加载，浏览器需要加载只有一行语句的额外 js 文件，在另一方面，如果我想使用服务器端代码来生成 JS 代码，那么维护 JS 代码会很困难，但就性能而言，我猜它会更好。

那么考虑到可维护性和性能，您有什么建议呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:49:15.680

通常，您会将所有 javascript 写入服务器端的不同文件中，并在进行开发时从页面链接它们，然后使用[uglifyjs](https://github.com/mishoo/UglifyJS)之类的东西将它们全部压缩到一个文件中，该文件从您的 html 文件链接到您的生产环境.

这允许您在多个文件中进行开发并保持代码结构良好，但浏览器只需下载一个文件，并且在生产环境中只发出一个 http 请求。

你不只是让你的服务器端 PHP/Python/Java/whatever 将代码直接写入 html 的原因是因为这会阻止浏览器缓存它。浏览器必须在网站的每个页面上下载该代码。如果它都在一个设置了[缓存控制标头](http://www.mnot.net/cache_docs/)的外部 javascript 文件中，那就更好了。

这样浏览器只会下载你的脚本一次，并且只会在用户在你的网站上看到的第一页上，然后在每个其他页面加载时从缓存中加载它。

# javascript - 如何向 wordpress 菜单项添加 onclick 功能（用于谷歌跨域跟踪）

> ID：15494840
> 
> 赞同：1
> 
> 时间：2013-03-19T08:43:55.467
> 
> 标签：javascript, wordpress, seo, google-analytics

我正在我的网站上设置谷歌分析跨域跟踪。我知道我需要更改每个链接以包括：

```
onclick="_gaq.push(['_link', 'http://mywebsite.com/']); return false;" 
```

我可以设置它并让网站的大部分内容都运行良好，只需保存一个菜单项。我已经尝试过 jinMenu 插件，但这破坏了一些东西。

网站：[http ://www.trukid.com](http://www.trukid.com)

任何帮助深表感谢。

PS - 这看起来是在帮助我的正确轨道上，但我不知道如何将它翻译成我的问题（我知道最小的 JS）

```
<script>

$(document).ready(function() {

    // Forcing WordPress to accept GA clicks

    $('.menu-twitter').delegate('a', 'click', function(e) {
        e.preventDefault();
        _gaq.push(['_trackEvent', 'Button', 'click', 'Twitter button']);  
        var lnk = $(this).attr('href');
        setTimeout('document.location = "' + lnk + '"', 100);
    });

    $('.menu-facebook').next.delegate('a', 'click', function(e) {
        e.preventDefault();
        _gaq.push(['_trackEvent', 'Button', 'click', 'Facebook button']);
        var lnk = $(this).attr('href');
        setTimeout('document.location = "' + lnk + '"', 100);
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:23:07.740

例如：

```
<script>

$(document).ready(function() {
    $('#nav-main a ').click(function() {
    var p = $(this).attr('href');
    if (p.search(/.+mywebsite/) == -1){ 
        _gaq.push(['_link', 'http://mywebsite.com/']); return false;
    }       
    });
});

</script> 
```

您不需要“委托” - 只有在动态创建新链接时才需要（通过 javascript 创建的链接没有附加事件，委托负责）。将 nav-main 替换为您的导航 ID，将 mywebsite 替换为您的域。

p.search 位确保 _link 仅附加到不指向脚本运行的域的链接（因为您只需要链接到其他域的链接）。

# google-apps-script - 从电子表格导入日历中的日期/时间值时出现未定义错误

> ID：15494841
> 
> 赞同：0
> 
> 时间：2013-03-19T08:43:56.260
> 
> 标签：google-apps-script, google-apps

该脚本的目的是将数据从谷歌电子表格导入谷歌日历。

```
function caltest1() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 11;  // First row of data to process
  var numRows = 4;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 1, numRows, 5);
  var data = dataRange.getValues();
  var cal = CalendarApp.getDefaultCalendar();
  for (i in data) {
    var row = data[i];
    var title = row[0];  // First column
    var desc = row[1];       // Second column
    var tstart = row[5];
    var tstop = row[6];
    var loc = row[7];
    //cal.createEvent(title, new Date("March 3, 2010 08:00:00"), new Date("March 3, 2010 09:00:00"), {description:desc,location:loc});
    cal.createEvent(title, tstart, tstop, {description:desc,location:loc});
 }
} 
```

第 5 列和第 6 列的值是；

2013 年 2 月 3 日 17:00:00 2013 年 2 月 3 日 18:00:00

启动调试工具时 - 我收到消息 tstart = undefined 和 tstop = undefined

当我删除时间值时，它可以正常工作...但我也希望日历中的时间值...我该如何解决这个问题？

谢谢..remco

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:06:38.773

您将定义`dataRange`为 5 列的数组，因此您的值不能 > 4（索引为 0）。

只需将您的大小`dataRange`增加到至少 8 列

# android - 获取邮件参数

> ID：15494854
> 
> 赞同：1
> 
> 时间：2013-03-19T08:44:56.473
> 
> 标签：android, email

是否可以以编程方式查询安卓手机以获取 smtp 参数：服务器地址、密码、用户名等？
我有一个使用为 android 修改的 javax.mail 包的应用程序。我想使用这些参数以编程方式发送邮件，无需用户交互。我可以看到这可能是一个安全漏洞，因此是不允许的，但问一下也无妨：）

# mysql - mysqldump 备份缺少所有 innodb 表，但没有 MyISAM 表

> ID：15494857
> 
> 赞同：1
> 
> 时间：2013-03-19T08:45:19.910
> 
> 标签：mysql, innodb, mysqldump

以下是我与 mysqldump 一起使用来备份我的数据库的开关：

```
/usr/bin/mysqldump -u **** --password=**** --single-transaction --database ****  > /filepath/filename.sql 
```

我正在使用 windows（服务器是 linux）导入我的本地数据库：

```
mysql -u root 

use databasename

source c:/filepath/filename.sql 
```

当我比较服务器数据库和本地数据库时，innodb 表丢失了，下面是“显示引擎”的结果；在本地数据库上：

![显示引擎](../Images/40fd30779d085dd4a0c4cc446e275395.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:06:37.420

我最终通过完全擦除本地数据库然后从备份中重新加载数据库来解决这个问题，不知道为什么本地数据库没有显示 innodb 表但它已修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:59:03.543

这可能是一种`--single-transaction`选择。进行转储时，您是否可能正在更改表格？如果是这样，`alter table`将在交易之外完成。它将创建一个临时表，删除原始表并重命名临时表。由于原始表已“消失”，因此不会将其放入转储文件中。

您可以尝试改用 --lock-tables 看看是否有效。

# node.js - 节点和路由管理

> ID：15494858
> 
> 赞同：0
> 
> 时间：2013-03-19T08:45:33.170
> 
> 标签：node.js

我写了以下代码：

```
var http = require('http');
var fs = require('fs');

var fileName = 'site/index.html';
var encoding = 'utf-8';
var dataContent = "";

fs.readFile(fileName, encoding, function(error, data) {
    if(error) throw error;
    dataContent = data;
});

var requestListener = function(request, response) {
    response.writeHead(200, {
        'Content-Length': dataContent.length,
        'Content-Type': 'text/html',
        'connection': 'keep-alive',
        'accept': '*/*'
    });

    response.end(dataContent);
}

var server = http.createServer(requestListener, function(connect) {
    connect.on('end', function() {
        console.log('Server disconnected...');
    });
});

server.listen(8000, function() {
    console.log("Server is listening...");
}); 
```

我在站点目录中有 2 个文件：

```
 1\. index.html
 2\. aboutus.html 
```

第 1 步：我使用 node 命令作为 node runServer.js 运行上述代码

第2步：现在我打开浏览器并输入以下网址

```
http://localhost:8000/ 
```

浏览器正确地向我显示了 index.html 的内容。index.html 文件包含一些原始文本并链接到另一个文件，即 aboutus.html

第三步：当我点击 aboutus.html 的链接时，浏览器将 url 更改为以下

```
http://localhost:8000/aboutus.html 
```

但是 aboutus.html 的内容没有显示，而是显示了 index.html 的内容

我知道发生这种情况是因为 fileName 变量内容为“site/index.html”。所以浏览器正在渲染 index.html 内容

我怎样才能改变这种行为？如果我不使用 express.js

* * *

现在，我对以下代码进行了一些更改：

```
var http = require('http');
var fs = require('fs');
var path = require('path');

var fileName = "site/index.html";
var encoding = 'utf-8';
var dataContent = "";

function readContentFile(fileName) {
    console.log(fileName);
    fs.readFile(fileName, encoding, function(error, data) {
        if(error) throw error;
        dataContent = data;
    });
}

readContentFile(fileName);

var requestListener = function(request, response) {

    filePath = request.url;    
    if(filePath!='/') {
        fileName = 'site' + filePath;
        readContentFile(fileName);
    }

    response.writeHead(200, {
        'Content-Length': dataContent.length,
        'Content-Type': 'text/html',
        'connection': 'keep-alive',
        'accept': '*/*'
    });

    response.end(dataContent);
}

var server = http.createServer(requestListener, function(connect) {

    connect.on('end', function() {
        console.log('Server disconnected...');
    });
});

server.listen(8000, function() {
    console.log("Server is listening...");
}); 
```

仍然无法正常工作，我的代码有什么问题吗？或者我应该去 express.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:14:54.713

我创建了一个静态服务器的示例

看看@http [://runnable.com/UUgnuT2wDj1UAGSe](http://runnable.com/UUgnuT2wDj1UAGSe)

```
var http = require('http');
var fs = require('fs');
var path = require('path');

http.createServer(function (req, res) {
  if (req.url === '/') {
    req.url = '/index.html';
  }
  var file = path.join(__dirname,req.url);
  path.exists(file, function (exists) {
    if (exists) {
      fs.stat(file, function (err, stats) {
        if(err) {
          throw err;
        }
        if (stats.isFile()) {
          res.writeHead(200, {'Content-Type': 'text/html; charset=utf-8'});
          fs.createReadStream(file).pipe(res);
        } else {
          res.writeHead(404);
          res.end('not found');
        }
      });
    } else {
      res.writeHead(404);
      res.end('not found');
    }
  });
}).listen( 8000 );

console.log('Server running on port ' + 8000); 
```

注意：这是使用节点 0.6.x 之后，api 发生了一些变化，fs.exists，而不是 path.exists。

# c# - 使命令仅在窗口的一部分中起作用

> ID：15494859
> 
> 赞同：0
> 
> 时间：2013-03-19T08:45:34.357
> 
> 标签：c#, wpf, routed-commands

我有这个 xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:this="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525" Name="this">
    <Grid>
        <Grid.CommandBindings>
            <CommandBinding Command="{x:Static this:MainWindow.Cmd}" Executed="CommandBinding_Executed"/>
        </Grid.CommandBindings>
        <Grid.InputBindings>
            <MouseBinding Command="{x:Static this:MainWindow.Cmd}" MouseAction="LeftClick"/>
        </Grid.InputBindings>
        <Rectangle Fill="Yellow"/>
        <Rectangle Fill="Green" Margin="50">
            <Rectangle.InputBindings>
                <MouseBinding Command="NotACommand" MouseAction="LeftClick"/>
            </Rectangle.InputBindings>
        </Rectangle>
    </Grid>
</Window> 
```

和这个代码隐藏文件：

```
namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        static RoutedCommand cmd = new RoutedCommand();

        public static RoutedCommand Cmd
        {
            get { return MainWindow.cmd; }
            set { MainWindow.cmd = value; }
        }

        public MainWindow()
        {
            InitializeComponent();
        }
        private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
        {
            MessageBox.Show("Cmd");
        }
    }
} 
```

如您所见，窗口中有一个名为 Cmd 的命令。窗口中有 2 个矩形 - 黄色和绿色。我希望命令 Cmd 仅在鼠标单击黄色矩形而不是绿色矩形时才起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:20:28.643

听起来您应该将黄色矩形放在 a 上`Button`并将命令直接分配给它。比如像这样。

```
<Button Command="YourCommandHere">
    <RecTangle Fill="Yellow" />
    <!-- let your button look and behave like the rectangle -->
    <Button.Template>
        <ControlTemplate x:TargetType="Button">
            <ContentPresenter Content="{TemplateBinding Content}" />
        </ControlTemplate>
    </Button.Template>
</Button> 
```

我认为这是最干净的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:20:52.807

代替

```
<Grid.CommandBindings>
    <CommandBinding Command="{x:Static this:MainWindow.Cmd}" Executed="CommandBinding_Executed"/>
</Grid.CommandBindings>
<Grid.InputBindings>
    <MouseBinding Command="{x:Static this:MainWindow.Cmd}" MouseAction="LeftClick"/>
</Grid.InputBindings> 
```

利用

```
<Rectangle Fill="Green" Margin="50">
    <Rectangle.InputBindings>
        <MouseBinding Command="{x:Static this:MainWindow.Cmd}" MouseAction="LeftClick"/>
    </Rectangle.InputBindings>
</Rectangle> 
```

也许它确实需要一些调整来确保绑定和命令。我个人不使用这种直接的方法。我通常将 ViewModel 与 DataContext 一起使用。

# ruby-on-rails-3 - 只能针对一项操作显示错误

> ID：15494860
> 
> 赞同：0
> 
> 时间：2013-03-19T08:45:35.447
> 
> 标签：ruby-on-rails-3, cancan

我对过去 2 小时以来的能力.rb（CanCan）问题感到困惑。

这是我的能力.rb 文件

```
if account.school_admin?
    can :manage, GameSchool, {account_id: account.id}
  end 
```

我的路线是

```
 resources :game_schools do
    member do
      get  'manage_classes'
    end
    collection do
      get 'all_schools_list'
      get 'search'
      get 'show_joiners_requests'
    end
  end 
```

但是，现在如果我以 school_admin 身份登录，并尝试执行此“show_joiners_requests”。它显示 CanCan 错误。我能知道这有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:20:33.863

如果其 account_id 与帐户的 id 匹配，则您已定义管理游戏学校资源的能力。由于“show_joiners_requests”是一个收藏资源，它不绑定到任何特定的游戏学校，也无权访问任何帐户 ID。

# git - Git合并冲突

> ID：15494864
> 
> 赞同：1
> 
> 时间：2013-03-19T08:45:51.367
> 
> 标签：git, merge, git-merge

我最近开始使用 Git。我遇到了一些问题。我正在做一些我提交的事情，但是当我去推送提交时，我遇到了合并冲突。我按下了一些东西，不知何故，git 存储库以我的提交为头部，而在我的提交之前推送的工作没有被合并（由于冲突）。

有人可以指出我正确的方向吗？

我假设我需要以某种方式提取上一个提交（未合并），将其与我的合并，然后将两者都推回。

我还意识到，要处理合并冲突，我可以使用 meld 之类的工具。同样，我对此很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:18:53.010

你可以试试：

```
# restore the old version of that file
# supposing it was 2 revisions ago on master branch
git checkout master~2 -- path/to/your/file

# merge it with the most recent version
git checkout --merge -- path/to/your/file 
```

如果它不起作用，那么您需要在其他地方恢复该旧文件，并*手动*将其合并到该文件的当前修订版，添加并提交新版本（这一次不会简单地覆盖旧版本） .

# coded-ui-tests - CodedUI：无法在现有浏览器上开始测试

> ID：15494865
> 
> 赞同：0
> 
> 时间：2013-03-19T08:45:55.510
> 
> 标签：coded-ui-tests

我想测试单个方法而不是再次执行所有方法。当我尝试在打开的浏览器上运行单个方法时，现有浏览器关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:56:26.370

它未指定，所以我假设这是一个与 VS2012 相关的问题。

看看 MSDN 论坛上的这个帖子 - [http://social.msdn.microsoft.com/Forums/en-US/vsautotest/thread/5cb4ed2f-f38e-4c4a-a703-cb45dbf98c82](http://social.msdn.microsoft.com/Forums/en-US/vsautotest/thread/5cb4ed2f-f38e-4c4a-a703-cb45dbf98c82)

对您来说有趣的部分可能是这个示例代码：

```
BrowserWindow window;

    [TestMethod]
    public void Method1()
    {
        window = BrowserWindow.Launch(new Uri("http://www.bing.com"));
        window.CloseOnPlaybackCleanup = false;
    }

    [TestMethod]
    public void Method2()
    {
        window = BrowserWindow.Locate("Bing");
        window.CloseOnPlaybackCleanup = false;
    }

    [TestMethod]
    public void Method3()
    {
        window = BrowserWindow.Locate("Bing");
    } 
```

在您的代码中，您可以添加一个辅助方法，这样当您执行单个测试时，您可以检查是否可以找到现有的浏览器窗口，以及是否找不到`Launch()`您所追求的 URL。

# actionscript-3 - 在movieclip中获取多边形数据

> ID：15494868
> 
> 赞同：0
> 
> 时间：2013-03-19T08:46:05.713
> 
> 标签：actionscript-3, flash

我需要多边形信息来查找地图路径。现在地图设计师可以在 Flash 专业版中绘制无法到达的区域，但是如何获取形状信息让我很头疼。

我在这里找到了答案 [How do you get Polygons from MovieClips in Flash？](https://stackoverflow.com/questions/12904491/how-do-you-get-polygons-from-movieclips-in-flash)

所以基本上这是一个死胡同。

我必须以其他方式解决问题。

如何在以如下示例的数据格式保存该区域的同时显示该区域：

```
<area>
    <point>3,40</point>
    <point>30,120</point>
    <point>40,150</point>
    <point>4,120</point>
<area>
.... 
```

每个多边形的点都由线连接，没有曲线。

我可以构建一个工具，允许设计师添加/删除/移动多边形，添加/删除/移动多边形上的顶点。

如果那里已经有工具，我不必自己做，如果你知道请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:57:27.407

如果您的多边形是 Shape 类型，或者在设计时或运行时使用，您可以通过[Here is the manual](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#readGraphicsData%28%29)`this.graphics`接收一些数据。也许您将能够从那里检索所需的信息，因为其中包含形状图形命令，包括, ，以及相应的坐标集。一旦您解析复合输出，这些将为您提供多边形顶点。（但是，这个任务可能很复杂，对我来说是未涉足的领域。我在这里只给出提示）`graphics.ReadGraphicsData()` `IGraphicsData``moveTo()``lineTo()``curveTo()`

# jquery - Jquery 在没有 ActiveX 对象的情况下在 IE 中将 HTML5 表导出到 Excel？

> ID：15494873
> 
> 赞同：0
> 
> 时间：2013-03-19T08:46:27.770
> 
> 标签：jquery, excel, html, export, html-table

我正在尝试使用 jquery 将 HTML 表格的内容导出到 IE 中的 Excel。我意识到他们有很多讨论这个问题的线程。但他们都指定了以下代码：

```
var ExcelApp = new ActiveXObject("Excel.Application");
var ExcelSheet = new ActiveXObject("Excel.Sheet");
ExcelSheet.Application.Visible = true; 
```

或这个：

```
 window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('#dataTable').html())); 
```

第一个适用于 IE，但我不希望使用 ActiveX 对象，因为它违反了我的 IE 的默认安全设置。第二个在 IE 中不起作用。我想使用 jQuery 或 JS 来做这个客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:10:05.053

假设您的 html 表有一个 id="exportTable"

您可以使用以下方法将表导出到 xls 文件：

```
window.open('data:application/vnd.ms-excel,' + $('#exportTable').html()); 
```

您正在尝试从浏览器中打开应用程序或写入文件系统。这意味着如果默认安全设置不允许这样做，那么除了更改安全设置（我认为这不是一个选项）或在例如 Chrome 中尝试这个（也许也不是一个选项）之外，真的没有办法解决这个问题，因为这是对我来说工作得很好。

默认情况下，从浏览器写入文件系统是不允许的，正如您可以想象的那样，这是有充分理由的。

一种替代方法可能是调查使用您的表格数据创建新的 Google 文档电子表格的可能性。我发现了一篇[有趣的文章](http://gdatatips.blogspot.be/2009/07/create-new-google-docs-spreadsheet-from.html)，描述了如何解决这个问题，但我对此没有任何经验。

# java - 在Java中单击选项卡时如何调用某个函数？

> ID：15494878
> 
> 赞同：0
> 
> 时间：2013-03-19T08:46:44.147
> 
> 标签：java, swing, jtabbedpane, changelistener

在一个面板中，我有 3 个选项卡（使用 JTabbedPane）。用户可以在 Tab1 或 Tab2 中做任何他想做的事情，但是当他切换到 Tab3 时，我希望他看到他在 Tab2 或 Tab1 中所做的事情的结果。

我该怎么做呢？我想当用户点击 Tab3 时我必须调用一个函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T08:56:57.750

您可以在 TabbedPane 上添加 ChangeListener。此片段向您展示如何添加侦听器以及如何指示哪个选项卡处于活动状态：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestTabbedPane {

static JTabbedPane p;
static JFrame f;
public static void main(String[] args) {

    f = new JFrame();
    f.setSize(800,600);
    f.setLocationRelativeTo(null);

    p = new JTabbedPane();
    p.addTab("T1", new JPanel());
    p.addTab("T2", new JPanel());
    p.addTab("T3", new JPanel());

    p.addChangeListener(new ChangeListener() { //add the Listener

        public void stateChanged(ChangeEvent e) {

            System.out.println(""+p.getSelectedIndex());

            if(p.getSelectedIndex()==2) //Index starts at 0, so Index 2 = Tab3
            {
                //do your stuff on Tab 3
            }
        }
    });
    f.add(p);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
}
} 
```

# cordova - 在应用程序的第一次执行期间不显示 Admob。2

> ID：15494883
> 
> 赞同：0
> 
> 时间：2013-03-19T08:46:56.493
> 
> 标签：cordova, admob

我用 Phonegap (Cordova 2.5.0) 制作了一个 Android 应用程序。我使用这个插件将 admob 放在我的应用程序中。（[https://github.com/sainttex/PhoneGap-Android-Native-AdMob](https://github.com/sainttex/PhoneGap-Android-Native-AdMob)）

Admob 显示在我的应用程序中。但是有一个问题。在第一次执行期间，admob 没有出现。关闭应用程序并重新启动后，会显示 admob。从第二次执行开始，会显示 admob。

如果我有一段时间（大约一小时）不使用该应用程序，然后运行该应用程序，问题就会再次出现。

我能做些什么来解决问题？

贝娄是我的代码。

【MainActivity.java代码】

```
package com.***.*******;    

import com.google.ads.*;
import org.apache.cordova.DroidGap;

import android.os.Bundle;
import android.widget.LinearLayout; 
//import android.view.Menu;

public class MainActivity extends DroidGap {
    private static final String AdMob_Ad_Unit = "*************";
    private AdView adView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);

        adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
        LinearLayout layout = super.root;
        layout.addView(adView); 
        AdRequest request = new AdRequest();
        adView.loadAd(request);

        super.loadUrl("file:///android_asset/www/index.html");

    }

} 
```

[AndroidManifest.xml 代码]

```
<activity android:name="com.google.ads.AdActivity"
         android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:35:43.400

你应该***在***`super.loadUrl("------");`

```
adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
        LinearLayout layout = super.root;
        layout.addView(adView); 
        AdRequest request = new AdRequest();
        adView.loadAd(request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T07:51:35.107

安装cordova admob 插件。

```
cordova plugin add com.admob.AdmobPlugin 
```

然后添加此代码。

```
function onDeviceReady() {  
    admobAd.initBanner("ca-app-pub-1738093038576474/9839543541",admobAd.AD_SIZE.BANNER.width,admobAd.AD_SIZE.BANNER.height);//ios Interstitial  
    admobAd.showBanner(admobAd.AD_POSITION.BOTTOM_CENTER);  
}  
document.addEventListener('deviceready',onDeviceReady, false); 
```

# c# - 在 OpenNI C# 中访问 Kinect 电机

> ID：15494884
> 
> 赞同：0
> 
> 时间：2013-03-19T08:47:03.010
> 
> 标签：c#, kinect, openni

我正在尝试访问 Kinect 传感器电机以调整其角度，但我不能。我正在使用 OpenNI .net C# simpleviewer 示例。我在网上搜索过，我发现的所有内容都在 C++ 中，但我的项目是在 C# 中，所以如果有人可以帮助我如何从 OpenNI C# 应用程序访问 kinect 电机。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:15:04.920

不久前我有一个[类似的问题](https://stackoverflow.com/questions/8446605/how-can-i-access-the-kinect-device-via-openni)，但在 OSX 上使用 C++。我最终使用了[ofxHardwareDriver](https://github.com/hideyukisaito/OpenNIFluidTest/blob/master/ofxOpenNI/src/ofxHardwareDriver.cpp)类，它是一些 libfreenect 功能（加速度计、LED、电机）的简洁小包装，并且可以与 OpenNI 并行运行。

问题是您只能在 Linux（作为 sudo）/OSX 上同时使用 libfreenect 驱动程序和 openni 驱动程序，但不能在 Windows 上使用。如果您只需要深度图和电机访问，libfreenect 就足够了，并且有一个[用于 libfreenect 的 C# 包装器](http://openkinect.org/wiki/CSharp_Wrapper)。

如果您需要在 Windows 上进行骨骼跟踪和运动控制，也许您应该尝试使用 C# 友好的官方 Microsoft Kinect SDK。

更新：可能还有另一个中途选择：[mskinect-openni-bridge](https://code.google.com/p/kinect-mssdk-openni-bridge/)但我自己没有尝试过。

# ios - mkmapview MKUserLocation AnnotationView

> ID：15494887
> 
> 赞同：3
> 
> 时间：2013-03-19T08:47:15.590
> 
> 标签：ios, objective-c, mkmapview, mkannotation

我正在尝试为我的地图上的注释创建自定义注释视图。我通过调整协议`MKMapViewDelegate`和覆盖函数来做到这一点`mapView:viewForAnnotation:`。一切正常，唯一的问题是我也`showsUserLocation`设置为`TRUE`，这意味着我在我的`mapView:viewForAnnotation:`方法中获得的一个“注释”属于 class `MKUserLocation`。

我不希望用户位置注释有我的自定义注释视图，我希望那个显示默认的用户位置注释视图！如何返回用户位置的默认用户位置注释视图或将其从注释中排除（进来的`mapView:viewForAnnotation:`）？

我试图在`mapView:viewForAnnotation:`方法中捕获 UserLocation，但我不知道要返回什么！（*在这个例子中，我返回一个标准的 MKAnnotationView，但这看起来不像默认的 UserLocation Annotation*（***显然***）。）

```
 if (![[annotation class] isEqual:[MKUserLocation class]]) {

        MKAnnotationView *view = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"customAnnotation"];
        // edit the custom view
        return view;
    }

    MKAnnotationView *view = [[MKAnnotationView alloc] init];
    return view; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T09:06:41.100

为了显示用户位置的默认注释只返回`nil`这种情况，我这样做了：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    // use your custom annotation
    if ([annotation isKindOfClass:[MyAnnotationClass class]]) {
        ...

        return annotationView;
    }

    // use default annotation
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:04:32.060

在您的 viewForAnnotation 方法中编写这段代码。这里的 var 'map' 是你的 MKMapview 的出口；

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
    {

        //Annoation View for current Location

        if(map.userLocation != annotation)

        {
            UIImage *image = [UIImage imageNamed:@"image.png"];
            annotation.image = image;

            return annotation; 

        }

        //Annotation View for current location

         return nil;

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:05:29.877

创建自定义`AnnotationView`：

```
#import <MapKit/MapKit.h>

@interface AnnotationView : MKPlacemark

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

// you can put here any controllers that you want. (such like UIImage, UIView,...etc)

@end 
```

而在`.m file`

```
#import "AnnotationView.h"

@implementation AnnotationView

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}

@end 
```

// 使用注释添加`#import "AnnotationView.h"`你的相关`.m file`：

```
CLLocationCoordinate2D pCoordinate ;
pCoordinate.latitude = LatValue;
pCoordinate.longitude = LanValue;

// Create Obj Of  AnnotationView class  

AnnotationView *annotation = [[AnnotationView alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

    annotation.title = @"I m Here";
    annotation.subtitle = @"This is Sub Tiitle";

[self.mapView addAnnotation:annotation]; 
```

**以上是如何创建的简单示例`AnnotationView`。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T00:41:12.443

如果 annotation 参数中的对象是 MKUserLocation 类的实例，您可以提供自定义视图来表示用户的位置。要使用默认系统视图显示用户的位置，请返回 nil。如果您不实现此方法，或者如果您从您的实现中为用户位置注释以外的注释返回 nil，则地图视图将使用标准引脚注释视图。

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
    {

       // if it's the user location, just return nil or custom annotation view.
       if ([annotation isKindOfClass:[MKUserLocation class]]){
          return nil;
       } else {
          //return other annotations
       }

    } 
```

# java - 如何在 java 中使用 If 语句将更多模式与输入文本匹配？

> ID：15494891
> 
> 赞同：-1
> 
> 时间：2013-03-19T08:47:18.633
> 
> 标签：java, regex

我想用模式匹配输入文本（来自用户）。

```
String inputtext =  "book 'learning java' for doctor  ahmed mohamed"; 
```

如果 inputtext 匹配 pattern1 则执行 {语句} ,

```
if(p==p1){

        Pattern p = Pattern.compile("(book|\\)|\\:) (.*) for( doctor| author|) (.*)");
        Matcher m = p.matcher(inputtext);
        if (m.find()) {
            String title = m.group(2).trim();
            String author = m.group(4).trim();
            System.out.println("Title is : " + title);
            System.out.println("Author is : " + author);
        } 
```

else if inputtext match pattern2 然后执行{语句}，

```
else if(p==p2){
            Pattern p = Pattern.compile("(.*) (book for) (.*)");
            Matcher m = p.matcher(inputtext);
            if (m.find()) {
                String title = m.group(1).trim();
                String author = m.group(3).trim();
                System.out.println("Title is : " + title);
                System.out.println("Author is : " + author); 
```

else if inputtext match pattern3 然后执行{语句}，

```
else if(p==p3){ 
                Pattern p = Pattern.compile("(doctor| author|) (.*) (writ) (.*)");
                Matcher m = p.matcher(inputtext);
                if (m.find()) {
                    String author = m.group(2).trim();
                    String title = m.group(4).trim();
                    System.out.println("Author is : " + author);
                    System.out.println("Title is : " + title);
                } 
```

否则不匹配。

```
else
    {
        System.out.println("Not match");
    } 
```

请帮我写这个鳕鱼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:07:31.877

我认为你真正想要做的是更像这样的事情：

```
String inputtext =  "some Input text";

//Initialize your patterns:
String p1 = "pattern one";
String p2 = "pattern two";
String p3 = "pattern three";

//Then, create matchers for each of the patterns on the input text.
Matcher m1=Pattern.compile(p1).matcher(inputtext);
Matcher m2=Pattern.compile(p2).matcher(inputtext);
Matcher p3=Pattern.compile(p3).matcher(inputtext);

//Don't repeat yourself - initialize your author and title out here, then only
//write the print statements once.

String author=null;
String title = null;

if (m1.find()) {                //if inputtext matches p1
    title = m1.group(2).trim();
    author = m1.group(4).trim();
} else if (m2.find()) {           //else if inputtext matches p2
    title = m2.group(1).trim();
    author = m2.group(3).trim();
} else if (m3.find()) {            //else if inputtext matches p3
    author = m3.group(2).trim();
    title = m3.group(4).trim();
}

if (author ==null || title == null) {   //If no matches set the author and title strings...
    System.out.println("Not match");    //There's no match
} else {                                //Otherwise...
                                       // We have a match!
    System.out.println("اسم المؤلف : " + author);
    System.out.println("عنوان الكتاب : " + title);
} 
```

现在，无论出于何种原因，您都在尝试将 p（这是您正在编译的模式）与 p1、p2 和 p3（它们都是字符串）进行匹配——当然，您永远不会得到匹配，您重新比较苹果和苹果派。相反，您应该为每个所需模式创建一个匹配器，然后按顺序检查每个模式。您会注意到我将所有相同的打印件移到了它们自己的块中 - 现在可以一次全部更新。

我什至没有尝试调试你的正则表达式，因为那个脚本让我的眼睛受伤，我认为这是更紧迫的问题。如果它仍然不起作用，那么我们可以进入您的特定正则表达式，但这至少可以解决我认为您的问题实际上是关于什么的。

编辑：在我看来，这可以通过更多的编程方式完成。在同一个类的某处声明一个模式包装器：

```
private class PatternWrapper {
    Pattern pattern;
    int authorGroup;
    int titleGroup;

    public PatternWrapper(String pattern, int authorGroup, int titleGroup) {
        this.pattern = Pattern.compile(pattern);
        this.authorGroup = authorGroup;
        this.titleGroup = titleGroup;
    }
} 
```

然后，这样使用它：

```
String inputtext =  "some Input text";

//Initialize your patterns:
PatterWrapper[] patterns = {
    new PatternWrapper("pattern one", 4, 2)
    , new PatternWrapper("pattern two", 3, 1)
    , new PatternWrapper("pattern three", 4, 2)
}

//Don't repeat yourself - initialize your author and title out here, then only
//write the print statements once.

String author=null;
String title = null;

for (PatternWrapper pw : patterns){
    matcher = pw.pattern.matcher(inputtext);
    if (matcher.find()) {
        title = matcher.group(pw.titleGroup).trim();
        author = matcher.group(pw.authorGroup).trim();
        break;
    }
}

if (author ==null || title == null) {   //If no matches set the author and title strings...
    System.out.println("Not match");    //There's no match
} else {                                //Otherwise...
                                       // We have a match!
    System.out.println("اسم المؤلف : " + author);
    System.out.println("عنوان الكتاب : " + title);
} 
```

现在，无论您要添加多少模式，您只需将它们添加到一个地方。您还可以通过仅在代码中移动一行来轻松控制检查模式的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:50:50.980

尝试使用

```
if(p.equals(p1)) 
```

代替

```
if(p==p1) 
```

因为您正在尝试比较字符串。

# java - 如何使用spring控制器获取请求url？

> ID：15494894
> 
> 赞同：0
> 
> 时间：2013-03-19T08:47:29.303
> 
> 标签：java, spring, jsp

实际上我正在准备向用户帐户发送激活邮件并且它正在工作但是当他接受邮件请求时将使用安全加密密钥重定向到我们的应用程序......

这样，我正在准备春天的寺庙..

```
<bean id="activateAccountTemplate" class="org.springframework.mail.SimpleMailMessage">
    <property name="subject" value="Account activation" />
    <property name="text">
        <value>
        <![CDATA[
            <html><body><p>Dear %s</p><p>Click <a href="http://localhost:8080/EClass/home?a=%s">here</a> to activate your account.</p></body></html>
        ]]>
        </value>
    </property>
</bean> 
```

在用户邮件中，如..

```
 Dear Narasimham

Click *here* to activate your account. 
```

因此，当我们单击 url 中的激活邮件链接时，如下所示..

```
http://localhost:8080/EClass/home?a=tdpTA3Dz8DYSI+9F/DpMxmxGD/a1Kl+3oYqXc1NNH0U= 
```

那么如何编写控制器获取这个请求参数以及如何解密这个密钥呢？

实际上我正在使用`@RequestMapping(value="home", method=RequestMethod.GET)`歧义异常来编写控制器，因为我`value="home"`在两个控制器类中使用..

那么如何使用值编写控制器`"home"`（听说 home 意味着 home .jsp）..

请建议我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:51:36.823

您不能拥有具有重复配置的 RequestMapping。如果参数不同，您也可以使用参数对其进行限定。

```
@RequestMapping(value="home", params = "a") 
```

阅读有关 RequestMapping 的更多信息以了解其用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:52:35.047

您应该为@RequestMapping 使用单独的值。你得到了歧义异常，因为你有两个 value="home" 的映射。

# node.js - 从 mongodb 集合中查找文档时如何支持时间间隔？

> ID：15494899
> 
> 赞同：2
> 
> 时间：2013-03-19T08:47:43.267
> 
> 标签：node.js, mongodb, node-mongodb-native

我将以下文档保存在 mongodb 集合中。它们按升序排列。我只想在指定的时间间隔内获取一份文档。（我将 node.js 与 node-mongodb 驱动程序一起使用。）我应该如何实现它？

```
{"created_at":"2013-03-19T07:14:05Z"}
{"created_at":"2013-03-19T07:35:40Z"}
{"created_at":"2013-03-19T07:59:52Z"}
{"created_at":"2013-03-19T08:01:32Z"}
{"created_at":"2013-03-19T08:02:40Z"}
{"created_at":"2013-03-19T08:02:56Z"}
{"created_at":"2013-03-19T08:06:24Z"}
{"created_at":"2013-03-19T08:07:08Z"}
{"created_at":"2013-03-19T08:23:27Z"}
{"created_at":"2013-03-19T08:27:44Z"}
{"created_at":"2013-03-19T08:27:58Z"}
{"created_at":"2013-03-19T08:28:04Z"}
{"created_at":"2013-03-19T08:28:08Z"}
{"created_at":"2013-03-19T08:28:23Z"} 
```

例如，如果时间间隔为 1 分钟，则预期结果如下。

```
{"created_at":"2013-03-19T07:14:05Z"}
{"created_at":"2013-03-19T07:35:40Z"}
{"created_at":"2013-03-19T07:59:52Z"}
{"created_at":"2013-03-19T08:01:32Z"}
{"created_at":"2013-03-19T08:02:40Z"}
{"created_at":"2013-03-19T08:06:24Z"}
{"created_at":"2013-03-19T08:07:08Z"}
{"created_at":"2013-03-19T08:23:27Z"}
{"created_at":"2013-03-19T08:27:44Z"}
{"created_at":"2013-03-19T08:28:04Z"} 
```

以下文件不应退回。

```
{"created_at":"2013-03-19T08:02:56Z"}
{"created_at":"2013-03-19T08:27:58Z"}
{"created_at":"2013-03-19T08:28:08Z"}
{"created_at":"2013-03-19T08:28:23Z"} 
```

谢谢，

杰弗里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:45:50.047

Map/Reduce 是您正在寻找的。

像这样考虑你的收藏：你有文件`created_at`成为 ID。或者我应该说`created_at`最多一分钟。因此，例如，此函数将用于确定 ID：

```
var GenerateID = function(date) {
    return date.getFullYear() + "/" +
           date.getMonth() + "/" +
           date.getDate() + "." +
           date.getHours() + ":" +
           date.getMinutes();
}; 
```

所以这个函数将日期对象转换为一个字符串，包括年、月、日、小时和分钟。我们不关心秒数，因为您每分钟只需要一个对象。

现在您必须定义 map 和 reduce 函数。例如地图可能看起来像这样：

```
var map = function() {
    var key = GenerateID(this.created_at);
    emit(key, this);
}; 
```

并减少：

```
var reduce = function(key, values) {
    if (values.length) {
        return values[0];
    }
}; 
```

在这里，我们只返回我们拥有的第一个值（结合排序会给你你想要的）。请注意，这是每个键，所以我们很好。

现在你必须在 Mongo 方面解雇这项工作。根据您的驱动程序，它可能如下所示：

```
db.collection.mapReduce(
    map,
    reduce,
    {
        out: { inline: 1 },
        query: // your range query
        sort: // by created_at
        scope: { GenerateID: GenerateID },
    }
) 
```

这是官方 MongoDB 的 map/reduce 概述：

[http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)

# sencha-touch - 如何在 sencha touch 2 中覆盖其余代理的 buildUrl 方法？

> ID：15494900
> 
> 赞同：0
> 
> 时间：2013-03-19T08:47:49.150
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我需要在 Sencha Touch 2 中重写 rest 代理的 buildUrl 方法。其余的 GET 请求将是这样的：

```
url:'https://api.abc.com/user/{username}/{password} 
```

为了实现这个目标，我应该在哪里以及改变什么？

我应该如何从控制器传递这两个参数？[我想从登录控制器传递用户名和密码]

谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:29:55.520

这就是我为自定义代理覆盖 buildUrl 的方式，您可以执行类似的操作：

```
Ext.define('MyApp.proxy.MyAjaxProxy', {
extend: 'Ext.data.proxy.Ajax',
alias: 'proxy.myajaxproxy',
buildUrl: function(request) {
    var me      = this,
        url     = me.callParent(arguments);
    if(!Ext.isEmpty(Helper.apiToken)){
        url = Ext.urlAppend(url, "token="+Helper.apiToken);
    }
    return url;
}
}); 
```

您可以从登录控制器在构造函数中传递用户名和密码，如下所示：

```
var myProxy = Ext.create('MyApp.proxy.MyAjaxProxy', {
  username : "a@b.com",
  password : "mypassword"
}); 
```

然后在 buildUrl 方法中，您应该能够像这样访问这些`this.config.username`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T11:48:25.263

看看这个**[网址](http://www.sencha.com/forum/showthread.php?179998-How-to-override-buildUrl-Method)**。它涵盖了一切

# java - 使用 App Engine 从打印机进行 Java 打印

> ID：15494901
> 
> 赞同：0
> 
> 时间：2013-03-19T08:47:50.100
> 
> 标签：java, google-app-engine

在使用 App Engine 的 Java 应用程序中，如何在没有对话框的情况下从打印机进行打印？我尝试使用`printJob`，但收到以下错误消息：

> java.awt.print.PrinterJob 是一个受限类。有关详细信息，请参阅 Google App Engine 开发人员指南。

我查看了 App Engine 开发人员指南，但没有找到关于此主题的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:30:04.013

许多处理 IO 的类以及实际上大多数 java.awt 和图形无法在 App Engine 上使用。正如您的错误消息所示，这些类受到限制。

至于您要做什么，我认为您错过了应用引擎的一些核心概念。

> Google App Engine 可让您在 Google 的基础架构上运行网络应用程序。

当您提到对话框、PrinterJob 和打印到打印机时，似乎表明您不是在谈论 Web 应用程序。更现实的情况是准备客户端浏览器打印的 pdf 或类似文件，或者通过 http 收集然后在本地打印的应用程序。

# ruby-on-rails - 了解回形针中的 id_partition

> ID：15494906
> 
> 赞同：9
> 
> 时间：2013-03-19T08:48:16.967
> 
> 标签：ruby-on-rails, ruby, gem, paperclip

我正在使用 Paperclip 在 AWS 中存储音频文件。

文件路径有一个 id_partition 组件（跨越 3 个目录）。

这个字段是如何计算的？

我希望能够从我的 rails 模块（或 DB 条目）中跟踪文件

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-19T09:01:13.303

回形针[id_partition](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/interpolations.rb#L162)方法将“0”添加到 ActiveRecord 实例的 ID 以使其长度为 9 个字符。

即`12 would be converted to 000000012`，然后它简单地将这个字符串分成三个块并将这些块与`/`

关于 id_partition [http://37signals.com/svn/archives2/id_partitioning.php的有趣读物](http://37signals.com/svn/archives2/id_partitioning.php)

# python - 使用“插入为文本”方法的 Python win32com Outlook 附加文件

> ID：15494911
> 
> 赞同：1
> 
> 时间：2013-03-19T08:48:29.523
> 
> 标签：python, outlook, win32com

我正在尝试使用 python win32com 通过 Outlook 发送 HTML 网页。但是，我不知道如何配置添加附件调用以执行“插入为文本”方法。

有谁知道这是怎么做到的吗？

```
import win32com.client
from win32com.client import Dispatch, constants
const=win32com.client.constants

olMailItem = 0x0
obj = win32com.client.Dispatch("Outlook.Application")
newMail = obj.CreateItem(olMailItem)
newMail.Subject = "I AM SUBJECT!!"
newMail.Body = "I AM IN THE BODY\nSO AM I!!!"
newMail.To = "abc@abc.com"
attachment1 = "x:\\report.htm"

newMail.Attachments.Add(Source=attachment1)
newMail.display()
newMail.Send() 
```

非常感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-25T10:43:16.503

你可以用这个

```
import win32com.client
from win32com.client import Dispatch, constants
const=win32com.client.constants

olMailItem = 0x0
obj = win32com.client.Dispatch("Outlook.Application")
newMail = obj.CreateItem(olMailItem)
newMail.Subject = "I AM SUBJECT!!"

newMail.To = "abc@abc.com"
attachment1 = "x:\\report.htm"

with open(attachment1 , 'r') as myfile:
   data=myfile.read()

newMail.Body = "Please Find the Report here " + data

newMail.HTMLBody = "I AM IN THE BODY\nSO AM I!!!" + data
newMail.Attachments.Add(Source=attachment1)
newMail.display()
newMail.Send() 
```

您可能需要先将 html 文件转换为字符串并与 mail.body 连接

# java - 如何从另一个屏幕获取数据并在按下按钮时显示在列表视图项目中

> ID：15494914
> 
> 赞同：1
> 
> 时间：2013-03-19T08:48:36.700
> 
> 标签：java, android

我有一个具有editText 和一个按钮和列表视图的屏幕，现在当我们单击该按钮时，它将从另一个屏幕获取文本并设置为列表视图项目。问题是当文本设置为edittext并从其他屏幕搜索特定信息时。？？？？

# c - 如何编写生成文件以在不同目录中生成目标文件和可执行文件？

> ID：15494915
> 
> 赞同：0
> 
> 时间：2013-03-19T08:48:37.813
> 
> 标签：c, makefile, gnu-make

现在要继续进行，我需要更改现有 Makefile 的呈现方式。

目前我正在使用：

```
~/Linuz/src: 1.c, 2.c, 3.c ...

~/Linuz/inc: abc.h, xyz.h 
```

和makefile在：`~/Linuz/some_other_dir/`

但需要改变结构。

1.  想要从 (`~/Linuz/src/`和`~/linuz/inc`)创建一个库
2.  库将用于获取可执行文件。应用程序源文件（.c 文件）在`~/Linuz/app/`
3.  `~/Linuz/bin/`应在编译期间创建以存储所有目标文件和可执行文件。

有什么建议么 ？？

**我的生成文件如下所示：**

```
all: Library.a

%.o: ../src/%.c

    $(CC) $(CFLAGS) -I../inc/ -c -o $@ $^

Library.a:  $(SRC_DIR)/1.c $(SRC_DIR)/2.c $(SRC_DIR)/3.c $(SRC_DIR)/4.c $(SRC_DIR)/5.c

    $(CC) $(LDFLAGS) -o $@ $^

all: prog

%.o: ./*.c

    $(CC) $(CFLAGS) -ILibrary.a -c -o $@ $^

prog:   $(APP_DIR)/app1.c $(APP_DIR)/app2.c $(APP_DIR)/app3.c

clean:
    rm -f *.o my_program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:10:03.853

假设您的代码架构如下所示：

```
└── linuz
    ├── app
    │   ├── app1.c
    │   ├── app2.c
    │   └── app3.c
    ├── bin
    ├── inc
    │   └── any.h
    ├── some_other_dir
    │   └── Makefile
    └── src
        ├── 1.c
        ├── 2.c
        └── 3.c 
```

所以你的 Makefile 可能是：

```
all: ../bin/libmy_lib.a ../bin/my_program

../bin/my_lib_%.o: ../src/%.c
    $(CC) $(CFLAGS) -I../inc -c -o $@ $^

../bin/libmy_lib.a: ../bin/my_lib_1.o ../bin/my_lib_2.o  ../bin/my_lib_3.o
    ar rcs $@ $^

../bin/my_app_%.o: ../app/%.c
    $(CC) $(CFLAGS) -I../inc -c -o $@ $^

../bin/my_program: ../bin/my_app_app1.o ../bin/my_app_app2.o  ../bin/my_app_app3.o ../bin/libmy_lib.a
    $(CC) $(LDFLAGS) -L../bin/ -lmy_lib -o $@ $^

clean:
    rm -f ../bin/*.o ../bin/libmy_lib.a ../bin/my_program 
```

有关解释，请参阅您[之前的问题](https://stackoverflow.com/questions/15475310/how-to-write-a-single-makefile-c-files-are-in-src-and-h-files-are-in-inc-folder)

# asp.net - 如何在行和列中显示数据并让用户在asp.net的运行时添加、修改和删除它们？

> ID：15494916
> 
> 赞同：0
> 
> 时间：2013-03-19T08:48:40.707
> 
> 标签：asp.net, excel, datagridview

我正在asp.net 中开发一个Web 应用程序。

在我的一个页面中，我在右上角有一个日期控件，它是 ajax 控件工具包。

现在根据选择的日期，我想在行和列中显示日期的其他相应数据（即数据库中的列）。
我希望数据显示在 excel 工作表中 用户应该允许在运行时添加、修改和删除数据，并且这些修改必须覆盖数据库中的原始数据并存储在那里。

我没有使用gridview，因为正如我清楚地说我想要excel工作表中的数据。

这个可以吗？？
我在 windows 窗体中看到了一个 DataGridView 控件的示例。

但我想要它在 aspx 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:16:21.723

您可以使用 javascript + ajax 即时复制更改。但为此，您必须构建一些自定义函数，这些函数将在运行时增加行数，而不是通过数据库中的 ajax 发布更改......

# android - 服务在后台运行？

> ID：15494917
> 
> 赞同：5
> 
> 时间：2013-03-19T08:48:42.640
> 
> 标签：android, service, background

我正在构建的应用程序的功能之一具有记录功能。我通过在服务中启动 MediaRecorder 对象来做到这一点：

```
Intent intent = new Intent(v.getContext(), RecordService.class);
Messenger messenger = new Messenger(handler);
intent.putExtra("COUNT", basic);
intent.putExtra("MESSENGER", messenger);

v.getContext().startService(intent);

//service

//...
mRecorder = new MediaRecorder();
//... 
```

现在我介绍了一个通知，它必须让用户知道录制本身的状态，因为如果你回家或点击后退按钮，它必须继续录制。因此，如果您点击通知，您将**返回应用程序**。

这就是我苦苦挣扎的地方，如果我点击通知，我会返回应用程序，但**一切都设置为初始状态**（计时器回到 00:00:00，我可以再次点击录制按钮而不是暂停按钮）我**应该**完成的当然是它**继续录制并且我可以看到正在进行的计时器+停止按钮**。注意：计时器现在不是一项服务..我应该如何处理这个有什么想法吗？

**编辑**

假设我关闭了应用程序，服务仍在运行。重新打开应用程序（以及最初调用服务的活动）我们可以这样做：

```
private boolean isMyServiceRunning() {
        ActivityManager manager = (ActivityManager) myContext.getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
            if (MyService.class.getName().equals(service.service.getClassName())) {
                return true;
            }
        }
        return false;
    } 
```

所以我部分涵盖了这一点，但是**从该服务传递到该活动的变量现在已经消失了。**似乎我的 Activity 中的 Handler 在重新打开该 Activity 后没有拿起它们？

```
private Handler handler = new Handler() {
        public void handleMessage(Message message) {

            //..
            Bundle bundle = message.getData();
            fileName = bundle.getString("FILENAME");
            tvFileName.setText(fileName);

            Log.e("Filename", "transfered: " + fileName);

        };
    }; 
```

//编辑

分段：

```
public class LayoutOne extends Fragment implements OnClickListener {

    //vars
    @Override
    public void onPause() {
        super.onPause();
        if (mRecorder != null) {
            mRecorder.release();
            mRecorder = null;
        }

        if (mPlayer != null) {
            mPlayer.release();
            mPlayer = null;
        }
    }

    private Handler handler = new Handler() {
        public void handleMessage(Message message) {

            int i = message.arg1;
            Bundle bundle = message.getData();
            fileName = bundle.getString("FILENAME");
            tvFileName.setText(fileName);

            Log.e("Handler", "Succesfully transfered: " + (Integer.toString(i)));
            Log.e("Filename", "Succesfully transfered: " + fileName);
        };
    };

    @Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.bRecord:

            if (mStartRecording) {
                mStartRecording = false;
                Intent intent = new Intent(v.getContext(), RecordService.class);

                Messenger messenger = new Messenger(handler);
                intent.putExtra("MESSENGER", messenger);
                v.getContext().startService(intent);

            } else {
                mRecordButton.setText("Record");
                Intent stopIntent = new Intent(v.getContext(),
                        RecordService.class);

                try {
                    v.getContext().stopService(stopIntent);
                } catch (Exception e) {
                    e.printStackTrace();

                }
                mStartRecording = true;
            }

            break;

        case R.id.bStop:
            Intent stopIntent = new Intent(v.getContext(), RecordService.class);
            v.getContext().stopService(stopIntent);
            break;

        }
    }

    public static Fragment newInstance(Context context) {
        LayoutOne f = new LayoutOne();
        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        root = (ViewGroup) inflater.inflate(R.layout.layout_one, null);
        myContext = container.getContext();

        //buttons

        mgr = (NotificationManager) myContext.getSystemService(Context.NOTIFICATION_SERVICE);
        return root;
    }

    public void notifyMe(View v) {
        Notification note = new Notification(R.drawable.ic_launcher,
                getString(R.string.notificationbar), System.currentTimeMillis());
        PendingIntent i = PendingIntent.getActivity(myContext, 0, new Intent(
                myContext, ViewPagerStyle1Activity.class), 0);

        note.setLatestEventInfo(myContext, getString(R.string.app_name),
                getString(R.string.notification), i);
        note.number = ++count;
        note.vibrate = new long[] { 500L, 200L, 200L, 500L };
        note.flags |= Notification.FLAG_AUTO_CANCEL;

        mgr.notify(NOTIFY_ME_ID, note);
    }

    public void clearNotification(View v) {
        mgr.cancel(NOTIFY_ME_ID);
    }

    // /SHARED PREFERENCES SETTINGS///
//…

    private void initiatePopupWindow() {
        //..
    }

    @Override
    public void onResume() {
        super.onResume();
        Intent intent = new Intent(myContext, RecordService.class);
        myContext.startService(intent);
        myContext.bindService(intent, mServiceConnection, Context.BIND_AUTO_CREATE);
    }

    private ServiceConnection mServiceConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            // TODO Auto-generated method stub
             LocalBinder binder = (LocalBinder) service;
                myService = binder.getService();
                //myService.setBound(true);
                initializeUI();

        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            // TODO Auto-generated method stub

        }
    };

    protected void initializeUI() {
        //..

        }

    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        myContext.unbindService(mServiceConnection);
    }

    @Override
    public void onStop() {
        // TODO Auto-generated method stub
        myContext.unbindService(mServiceConnection);
    }

} 
```

//服务

```
public class RecordService extends Service {

    //vars

     public class LocalBinder extends Binder {
            RecordService getService() {
                return RecordService.this;
            }
        }

    @Override
    public void onCreate() {
        Log.i("Oncreate", "Service onCreate");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Bundle extras = intent.getExtras();
        if (extras != null) {

            messenger = (Messenger) extras.get("MESSENGER");
            count = Integer.toString(extras.getInt("COUNT"));
            try {
                Message message = new Message();
                int arg = 0;
                message.arg1 = arg;

                mFileNamePass=”test”;
                Bundle bundle = new Bundle();
                bundle.putString("FILENAME", mFileNamePass);
                message.setData(bundle);
                messenger.send(message);
            } catch (android.os.RemoteException e1) {
                Log.w(getClass().getName(), "Exception sending message", e1);
            }
        }
        else {
            Log.i("Extras","Didn't find extras");
        }

        Runnable r = new Runnable() {

            @Override
            public void run() {
                checkIfFolderExists();
                String dateFull = calculateDate();
                mFileName = Environment.getExternalStorageDirectory()
                        .getAbsolutePath();
                mFileName += "test.3gp";

                mRecorder = new MediaRecorder();
                mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mRecorder.setOutputFile(mFileName);
                mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

                try {
                    mRecorder.prepare();
                } catch (IOException e) {
                    Log.e(LOG_TAG, "prepare() failed");
                }

                mRecorder.start();
                Log.i("Service", "Service running");

            }
        };

        Thread t = new Thread(r);
        t.start();
        return RecordService.START_STICKY;
    }

    @Override
    public void onDestroy() {

        Runnable stopRecord = new Runnable() {

            @Override
            public void run() {
                mRecorder.stop();
                mRecorder.release();
                mRecorder = null;

            }

        };
        Thread stopRecordThread = new Thread(stopRecord);
        stopRecordThread.start();
        Log.i("Service", "Service stopped");
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:28:11.533

首先，您不需要检查您`Service`是否正在通过某种`ActivityManager`方法运行。如果你调用`startService() && bindService()`你的`onResume()`，Android 足够聪明，只要绑定到`Service`它是否已经在运行，如果没有，它会创建`Service`经过它正确记录的生命周期，然后绑定到它。

你可以在这里做的是：

```
@Override
public void onResume() {
    super.onResume();
    Intent intent = new Intent(this, YourService.class);
    startService(intent);
    bindService(intent, mServiceConnection, Context.BIND_AUTO_CREATE);
} 
```

现在，假设您的服务已经在运行，并且您想要获得它的正确值。在您的`onServiceConnected()`方法中`ServiceConnection()`，您可以调用`initializeUI()`绑定完成时的方法：

```
private ServiceConnection mServiceConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        LocalBinder binder = (LocalBinder) service;
        myService = binder.getService();
        myService.setBound(true);
        initializeUI();
    }

    public void onServiceDisconnected(ComponentName className) {
    }
}; 
```

现在，你有了`myService`指向你的`Service`对象的变量，你可以调用`getters`它，比如`myService.getTimer()`and `myService.isRecording()`。

```
public void initializeUI() {
    timerTextview.setText( myService.getTime() );
    someOtherUiElement.setText( myService.getSomething() );
    if( myService.isRecording() )
        recordButton.setImageResource( R.drawable.pause );
} //etc... 
```

**顺便说一句，我不知道您是否还在为退出应用程序时保持服务运行而苦苦挣扎。** 如果这样做，只要 Android 有足够的内存，使用`startService(intent)`就会保持运行。`Service`您*必须*有一段代码可以在其中调用`myService.stopService()`，否则该服务将运行很长时间。

# sql - 如何更新满足 SQL Server SELECT 语句内条件的特定行的值

> ID：15494919
> 
> 赞同：5
> 
> 时间：2013-03-19T08:48:46.090
> 
> 标签：sql, sql-server, sql-server-2012

我有像“Bed”和“PatientRecord”这样的表格。我想为患者分配一张空床（即状态为“可用”的床表中的出价），然后将该出价状态更改为“已占用”。请帮助解决这个问题。以下是我当前的查询，但我不确定如何继续。

```
update Patient_Record 
set b_ID = (select top 1 b_ID from bed where Status_Avai_Occ = 'Available')
/*i want to change the status of this b_ID to "Occupied"*/
where Admission_Type = 'In Patient' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:20:08.390

我认为您发现这很困难的原因是您的设计存在缺陷，但没有足够的信息来纠正它。我不确定您要为哪个患者提供床位，在下面我使用`@PatientIdToGiveBed`来指定，如在您的示例中，您将为所有“患者”提供同一张床。您可能需要修改它以选择第一个“In Patient”，就像选择床一样。

事务需要有一个隔离级别，`REPEATABLE READ`可以防止两个事务分配同一张床，如果你使用默认值`READ COMMITTED`，两个事务可以选择同一张床。这样，a`READ LOCK`就被保留在选定的床上，直到交易完成。

您可以将下面的整个语句放入 SSMS 并运行以对其进行测试。

```
DECLARE @Bed TABLE  (
    b_ID INT,
    Status_Avai_Occ VARCHAR(20)
)

DECLARE @Patient_Record TABLE (
    Id INT, 
    Name VARCHAR(10),
    b_ID INT
)

INSERT INTO @Bed VALUES (1, 'Available') 
INSERT INTO @Bed VALUES (2, 'Available') 
INSERT INTO @Bed VALUES (3, 'Available') 

INSERT INTO @Patient_Record VALUES (1, 'Adam', NULL) 
INSERT INTO @Patient_Record VALUES (2, 'Ben', NULL) 
INSERT INTO @Patient_Record VALUES (3, 'Charles', NULL) 

DECLARE @PatientIdToGiveBed INT = 1

SET TRANSACTION ISOLATION LEVEL REPEATABLE READ 
BEGIN TRANSACTION 
    DECLARE @Available_BID INT
    SELECT TOP 1 @Available_BID = b_ID FROM @BED WHERE Status_Avai_Occ = 'Available' ORDER BY b_ID

    IF @Available_BID IS NULL 
    BEGIN
        Print 'No Beds Available'
        COMMIT 
        RETURN 
    END 

    UPDATE @Patient_Record SET b_ID = @Available_BID WHERE Id = @PatientIdToGiveBed 
    UPDATE @Bed SET Status_Avai_Occ = 'Occupied' WHERE b_ID = @Available_BID 
COMMIT 

SELECT * FROM @Patient_Record
SELECT * FROM @Bed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:57:52.253

SQL Server 不允许您在单个 UPDATE 语句中更新多个表，但是您可以简单地将两个更新包装在单个事务中，如下所示：

```
DECLARE @b_ID INT
SELECT TOP 1 @b_ID = b_ID FROM bed WHERE Status_Avai_Occ = 'Available'

BEGIN TRAN Update_Patient

UPDATE  Patient_Record 
  SET   b_ID = @b_ID
  WHERE Admission_Type = 'In Patient' 

UPDATE  bed
  SET   Status_Avai_Occ = 'Occupied'
  WHERE (b_ID = @b_ID)

COMMIT TRAN Update_Patient 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:58:17.583

```
1\. set variable "openBed" to available bed id
2\. update bed with bed id = openBed to 'Occupied'
3\. update patient_record set bed id = openBed where admission_type = 'in patient' 
```

注意：**第三条语句**`In Patient`每次都会将表中的每条记录更新`Patient_Record`为相同的床号。换句话说，每次有新患者入院时，每位患者都将被重新分配到下一个可用床位。那将是一张非常拥挤的床。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T09:20:57.393

如果您真的想一次对一组患者运行此操作，则需要首先匹配床位，然后分配它们，因为 SQL Server 中无法同时更新两个表，因此您的基于集合的select 每次都会产生不同的 bed_ID。

```
-- Set up some temp tables to hold data
DECLARE @availBeds table (num int identity(1,1), b_ID int)
DECLARE @inPatients table (num int identity(1,1), p_ID int)
DECLARE @patientBeds table (p_ID int, b_ID int)

-- Populate table of available beds only, giving them a unique incremental ID
INSERT INTO @availBeds SELECT b_ID FROM Bed WHERE status_avai_occ = 'Available'

-- Populate table of in patients without assigned beds only, giving them a unique incremental ID
INSERT INTO @inPatients SELECT p_ID FROM Patient_Record WHERE admission_type = 'In Patient' AND b_ID IS NULL

-- Join the two tables above based on their incremental ID's,
-- effectively matching up available beds with patients
INSERT INTO @patientBeds
    SELECT p.p_ID, b.b_ID FROM @inPatients p
    INNER JOIN @availBeds b ON b.num = p.num

-- Update Patient_Record with the new bed ID's
UPDATE p
SET p.b_ID = b.b_ID
FROM Patient_Record p
INNER JOIN @patientBeds b ON p.p_ID = b.p_ID

-- Set the Beds to Occupied
UPDATE Bed SET status_avai_occ = 'Occupied' WHERE b_ID IN (SELECT b_ID FROM @patientBeds) 
```

[演示](http://sqlfiddle.com/#!3/d1af8/4)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T09:22:08.067

1.  您不能在单个查询中更新 2 个表（您需要使用事务）

2.  你可以试试这样的

> ```
> Begin Tran
> 
> update Patient_Record 
> set b_ID = b.b_ID from bed b where b.Status_Avai_Occ = 'Available'
> and Patient_Record.Admission_Type = 'In Patient'
> 
> Update bed set Status_Avai_Occ='Occupied' where b_ID in (select b_ID from Patient_Record where Patient_Record.Admission_Type = 'In Patient')
> Commit Tran 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T08:55:10.850

这将使用 Admission_Type = 更新所有 PatientRecords`In Patient`

我不确定我是否完全理解你的结构，但你可以这样做：

```
DECLARE @AvailableBID INT
SELECT TOP 1 @AvailableBID = b_ID FROM bed WHERE Status_Avai_Occ = 'Available'

UPDATE Patient_Record 
SET b_ID = @AvailableBID
WHERE Admission_Type = 'In Patient'

UPDATE bed
SET Status_Avai_occ = 'Occupied'
WHERE b_ID = @AvailableBid 
```

请注意，这仍将使用 Admission_Type In Patient 更新所有 Patient_records。您将需要应用额外的过滤器，即行号。

[http://sqlfiddle.com/#!6/fa26d/9](http://sqlfiddle.com/#!6/fa26d/9)

**从评论中编辑**

```
DECLARE @AvailableBID INT
DECLARE @AvailablePatientRecord INT

SELECT TOP 1 @AvailableBID = b_ID FROM bed WHERE Status_Avai_Occ = 'Available'
SELECT TOP 1 @AvailablePatientRecord  = PatientRecordId FROM Patient_Record WHERE Admission_Type = 'In Patient'

UPDATE Patient_Record 
SET b_ID = @AvailableBID
WHERE PatientRecordId = @AvailablePatientRecord

UPDATE bed
SET Status_Avai_occ = 'Occupied'
WHERE b_ID = @AvailableBid 
```

注意：您必须确保在 Patient_Record 表中有 PatientRecordId

# c# - WebAPI中的DependencyResolver.SetResolver和HttpConfiguration.DependencyResolver有什么区别

> ID：15494920
> 
> 赞同：40
> 
> 时间：2013-03-19T08:48:56.017
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, autofac

我有现有的项目，它使用 AutoFac 作为 IoC。

在注册码中，我有以下几行：

```
var resolver = builder.Build();
DependencyResolver.SetResolver(new AutofacDependencyResolver(resolver));
config.DependencyResolver = new AutofacWebApiDependencyResolver(resolver); 
```

`DependencyResolver.SetResolver`所以我的问题是和有什么区别`HttpConfiguration.DependecyResolver`？为什么我要同时分配它们？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-19T09:42:14.567

防止在同一个项目中混合 MVC 和 Web API。Microsoft 似乎建议这样做，因为 Web API 的 Visual Studio 模板自动将项目与 MVC 混合，但这是一个坏主意。

从架构的角度来看，MVC 和 Web API 是完全不同的。MVC 是一种旨在优化最终用户体验的 UI 技术。Web API 是一种 Web 服务技术，旨在优化（客户端）开发人员的体验。

MVC 和 Web API 不共享任何特定于演示的代码。将它们混合在同一个项目中只会使该项目更大更复杂。

但也许更重要的是，这两种应用程序类型都有自己的 DI 配置需求。它们有自己的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)并将其混合到单个 DI 配置（单个 DI 容器）中可以使您的配置异常困难。

最后，在同一个项目中将 Web API 与 MVC 混合会导致痛苦的模棱两可的命名冲突，因为 Web API 程序集包含许多与 MVC 对应项具有完全相同名称的类（但实现方式略有不同）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-19T08:58:23.087

我猜你混淆了 MVC 和 Web API：

```
DependencyResolver.SetResolver 
```

用于[MVC](http://msdn.microsoft.com/en-us/library/gg416564%28v=vs.108%29.aspx)并且属于 assembly `System.Web.Mvc`。除此以外：

```
Configuration.DependencyResolver 
```

对于 Web APi，它属于 assembly `System.Web.Http`。

因此，在您的项目中，它同时使用 MVC 和 Web Api，这就是为什么您会看到两行来为每个配置 IoC

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-19T08:53:55.463

[`DependencyResolver.SetResolver`](http://msdn.microsoft.com/en-us/library/system.web.mvc.dependencyresolver%28v=vs.98%29.aspx)是一个 MVC 结构，需要使用 MVC 支持 IOC。

这[`GlobalConfiguration.Configuration.DependencyResolver`](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)是特定于 WebApi 的。

如果你想在同一个项目中同时支持 MVC 和 WebApi，你只需要两者。

还可能值得指出的是，您通常不需要显式设置，`DependencyResolver.SetResolver`因为 Ninject Mvc3 有一个引导程序...请参阅[此处](https://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/Ninject.Web.Mvc/NinjectMvcHttpApplicationPlugin.cs)

# javascript - 如何限制选项卡导航控制

> ID：15494921
> 
> 赞同：0
> 
> 时间：2013-03-19T08:48:58.220
> 
> 标签：javascript, html

我的网页有很多可选元素，比如，`a`等等。当我按下选项卡时，活动元素成为前一个选定元素的下一个，没关系，但是在 dom 中的最后一个元素之后，控件进入浏览器的地址栏.我怎样才能防止这种情况。`buttons``input`

1.  我在[堆栈](http://stackoverflow.com)、jira 等中看到了同样的实现。
2.  我尝试为每个元素提供 tabindex （递增顺序）但不工作。

有人有解决方案吗？请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:59:33.630

tabIndex 允许您定义访问页面内元素的顺序，但它不能让您“诱捕”页面内的用户。

为此，您必须在最后一个可聚焦元素上设置一个 onblur 侦听器，然后将焦点重置到第一个元素。

~~但正如我之前所说，这可能会将用户“困”在页面上——对于只使用这种导航方法的人来说，这可能会很烦人。（警告考虑公共网站，不适用于特殊情况。）~~

# html - 水平导航栏在 IE 和 Firefox 中不起作用

> ID：15494925
> 
> 赞同：0
> 
> 时间：2013-03-19T08:49:14.267
> 
> 标签：html, css, navigation

我正在使用 HTML 和 CSS 创建导航菜单。但它在 Firefox 19 中无法正常工作。我尝试修复它几个小时。但没有运气。

我的问题是当悬停在子菜单上时会在菜单项周围显示边框。它在 google chrome 和 safari 上正常工作。但不是在 Firefox 和 IE 7 和 8 中。

这是我的 CSS ：

```
#nav a:hover {
    background: #000;
    color: #c5c5c5; 
}

#nav .current a, #nav li:hover > a {
    background: -moz-linear-gradient(#D0441B, #BB3415);
    background: -webkit-linear-gradient(#D0441B, #BB3415); /* Safari 5.1+, Chrome 10+ */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#D0441B', endColorstr='#BB3415'); /* IE6 & IE7 */  
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#D0441B', endColorstr='#BB3415')"; /* IE8+ */  
    border-color: #B5501A;
    box-shadow: 0 1px 0 0 #C97B4B inset;
    color: #FFFFFF; 
}

#nav li:hover ul li.current-sub  {
    background: #ffdfbd;
}   

#nav li:hover ul li.current-sub  a {
    color: #5f3100;
}       

#nav li:hover ul li.current-sub:hover {
    background: #ffcd98;
    border: none !important;
}   

/* sub levels link hover */
#nav ul li:hover a, #nav li:hover li a {
    background: none;
    border: none !important;
    color: #666;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    text-shadow: none;
}

#nav ul li:hover {
    background: #ffefdd;

}

#nav ul li a:hover {        
    -webkit-border-radius: 0;
    -moz-border-radius: 0;  
    border-radius: 0;   
    border: none;
}

/* dropdown */
#nav li:hover > ul {
    display: block;     
    z-index: 999;
} 
```

这是[jsfiddle的链接](http://jsfiddle.net/VCnQq/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:02:34.303

您应该更多地使用子选择器`>`。我将其应用于此声明：

```
#nav .current > a, #nav > li:hover > a {
    background: -moz-linear-gradient(#D0441B, #BB3415);
    /* ... */
} 
```

这是一个[小提琴](http://jsfiddle.net/VCnQq/1/)。

# java - 初始化模拟对象 - MockIto

> ID：15494926
> 
> 赞同：153
> 
> 时间：2013-03-19T08:49:22.313
> 
> 标签：java, junit, mockito

有很多方法可以使用 MockIto 初始化模拟对象。其中最好的方法是什么？

1.

```
 public class SampleBaseTestCase {

   @Before public void initMocks() {
       MockitoAnnotations.initMocks(this);
   } 
```

```
@RunWith(MockitoJUnitRunner.class) 
```

```
mock(XXX.class); 
```

建议我是否有比这些更好的方法...

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-03-19T08:53:40.753

**对于 mocks 初始化**，使用 runner 或`MockitoAnnotations.initMocks`是严格等效的解决方案。从[MockitoJUnitRunner](https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/junit/MockitoJUnitRunner.html)的 javadoc ：

> JUnit 4.5 runner 初始化使用 Mock 注释的模拟，因此不需要显式使用 MockitoAnnotations.initMocks(Object)。在每个测试方法之前初始化模拟。

* * *

`MockitoAnnotations.initMocks`当您已经`SpringJUnit4ClassRunner`在测试用例上配置了特定的运行器（例如）时，可以使用第一个解决方案（带有）。

第二种解决方案（带有`MockitoJUnitRunner`）是更经典的，也是我最喜欢的。代码更简单。使用运行器提供了**[自动验证框架使用](https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/Mockito.html#validateMockitoUsage())**的巨大优势（由[@David Wallace](https://stackoverflow.com/users/1081110/david-wallace)在[此答案](https://stackoverflow.com/questions/10806345/runwithmockitojunitrunner-class-vs-mockitoannotations-initmocksthis/10812752#10812752)中描述）。

两种解决方案都允许在测试方法之间共享模拟（和间谍）。再加上[`@InjectMocks`](http://docs.mockito.googlecode.com/hg/latest/org/mockito/InjectMocks.html)，它们允许非常快速地编写单元测试。样板模拟代码减少了，测试更容易阅读。例如：

```
@RunWith(MockitoJUnitRunner.class)
public class ArticleManagerTest {

    @Mock private ArticleCalculator calculator;
    @Mock(name = "database") private ArticleDatabase dbMock;
    @Spy private UserProvider userProvider = new ConsumerUserProvider();

    @InjectMocks private ArticleManager manager;

    @Test public void shouldDoSomething() {
        manager.initiateArticle();
        verify(database).addListener(any(ArticleListener.class));
    }

    @Test public void shouldDoSomethingElse() {
        manager.finishArticle();
        verify(database).removeListener(any(ArticleListener.class));
    }
} 
```

优点：代码很少

缺点：黑魔法。IMO 这主要是由于 @InjectMocks 注释。有了这个注释 *，“你就摆脱了代码的痛苦”*（参见[@Brice](https://stackoverflow.com/users/48136/brice)的精彩评论）

* * *

第三种解决方案是在每个测试方法上创建你的模拟。[正如@mlk](https://stackoverflow.com/users/157672/mlk)在其答案中所解释的那样，它允许具有“*自包含测试*”。

```
public class ArticleManagerTest {

    @Test public void shouldDoSomething() {
        // given
        ArticleCalculator calculator = mock(ArticleCalculator.class);
        ArticleDatabase database = mock(ArticleDatabase.class);
        UserProvider userProvider = spy(new ConsumerUserProvider());
        ArticleManager manager = new ArticleManager(calculator, 
                                                    userProvider, 
                                                    database);

        // when 
        manager.initiateArticle();

        // then 
        verify(database).addListener(any(ArticleListener.class));
    }

    @Test public void shouldDoSomethingElse() {
        // given
        ArticleCalculator calculator = mock(ArticleCalculator.class);
        ArticleDatabase database = mock(ArticleDatabase.class);
        UserProvider userProvider = spy(new ConsumerUserProvider());
        ArticleManager manager = new ArticleManager(calculator, 
                                                    userProvider, 
                                                    database);

        // when 
        manager.finishArticle();

        // then
        verify(database).removeListener(any(ArticleListener.class));
    }
} 
```

优点：你清楚地展示了你的 api 是如何工作的（BDD ......）

缺点：有更多样板代码。（模拟创作）

* * *

**我**的建议是妥协。将`@Mock`注释与 一起使用`@RunWith(MockitoJUnitRunner.class)`，但不要使用`@InjectMocks`：

```
@RunWith(MockitoJUnitRunner.class)
public class ArticleManagerTest {

    @Mock private ArticleCalculator calculator;
    @Mock private ArticleDatabase database;
    @Spy private UserProvider userProvider = new ConsumerUserProvider();

    @Test public void shouldDoSomething() {
        // given
        ArticleManager manager = new ArticleManager(calculator, 
                                                    userProvider, 
                                                    database);

        // when 
        manager.initiateArticle();

        // then 
        verify(database).addListener(any(ArticleListener.class));
    }

    @Test public void shouldDoSomethingElse() {
        // given
        ArticleManager manager = new ArticleManager(calculator, 
                                                    userProvider, 
                                                    database);

        // when 
        manager.finishArticle();

        // then 
        verify(database).removeListener(any(ArticleListener.class));
    }
} 
```

优点：您清楚地展示了您的 api 是如何工作的（如何`ArticleManager`实例化我的）。没有样板代码。

缺点：测试不是独立的，减少代码的痛苦

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-07-22T23:56:37.810

现在（从 v1.10.7 开始）有第四种方法来实例化模拟，它使用称为[MockitoRule的 JUnit4](http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html)*规则*。

```
@RunWith(JUnit4.class)   // or a different runner of your choice
public class YourTest
  @Rule public MockitoRule rule = MockitoJUnit.rule();
  @Mock public YourMock yourMock;

  @Test public void yourTestMethod() { /* ... */ }
} 
```

JUnit 查找使用[@Rule 注释的 TestRule](http://junit.org/apidocs/org/junit/Rule.html)的子类，并使用它们来*包装 Runner 提供的测试语句*。这样做的结果是，您可以将 @Before 方法、@After 方法，甚至 try...catch 包装器提取到规则中。您甚至可以在测试中与这些交互，就像[ExpectedException](http://junit.org/apidocs/org/junit/rules/ExpectedException.html)那样。

MockitoRule 的行为*几乎与 MockitoJUnitRunner 完全一样*，除了您可以使用任何其他运行程序，例如[Parameterized](http://junit.org/apidocs/org/junit/runners/Parameterized.html)（它允许您的测试构造函数接受参数，以便您的测试可以多次运行）或 Robolectric 的测试运行程序（因此它的类加载器可以提供 Java 替换对于 Android 原生类）。这使得它在最近的 JUnit 和 Mockito 版本中使用起来更加灵活。

总之：

*   `Mockito.mock()`：直接调用，不支持注释或使用验证。
*   `MockitoAnnotations.initMocks(this)`：注释支持，没有使用验证。
*   `MockitoJUnitRunner`：注释支持和使用验证，但您必须使用该运行器。
*   `MockitoRule`: 任何 JUnit 运行器的注释支持和使用验证。

另请参阅：[JUnit @Rule 如何工作？](https://stackoverflow.com/q/13489388/1426891)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-19T09:48:12.540

有一种巧妙的方法可以做到这一点。

*   如果它是一个单元测试，你可以这样做：

    ```
    @RunWith(MockitoJUnitRunner.class)
    public class MyUnitTest {

        @Mock
        private MyFirstMock myFirstMock;

        @Mock
        private MySecondMock mySecondMock;

        @Spy
        private MySpiedClass mySpiedClass = new MySpiedClass();

        // It's gonna inject the 2 mocks and the spied object per reflection to this object
        // The java doc of @InjectMocks explains it really well how and when it does the injection
        @InjectMocks
        private MyClassToTest myClassToTest;

        @Test
        public void testSomething() {
        }
    } 
    ```

*   编辑：如果它是一个集成测试，你可以这样做（不打算与 Spring 一起使用。只是展示你可以用不同的跑步者初始化模拟）：

    ```
    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration("aplicationContext.xml")
    public class MyIntegrationTest {

        @Mock
        private MyFirstMock myFirstMock;

        @Mock
        private MySecondMock mySecondMock;

        @Spy
        private MySpiedClass mySpiedClass = new MySpiedClass();

        // It's gonna inject the 2 mocks and the spied object per reflection to this object
        // The java doc of @InjectMocks explains it really well how and when it does the injection
        @InjectMocks
        private MyClassToTest myClassToTest;

        @Before
        public void setUp() throws Exception {
              MockitoAnnotations.initMocks(this);
        }

        @Test
        public void testSomething() {
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-19T10:06:56.690

MockitoAnnotations 和 runner 已经在上面进行了很好的讨论，所以我要为不受欢迎的人投入我的 tuppence：

```
XXX mockedXxx = mock(XXX.class); 
```

我使用它是因为我发现它更具描述性，并且我更喜欢（不是完全禁止）单元测试不使用成员变量，因为我希望我的测试（尽可能地）自包含。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-04-01T10:00:42.363

JUnit 5 Jupiter 的一个小例子，“RunWith”已被删除，您现在需要使用“@ExtendWith”注释来使用扩展。

```
@ExtendWith(MockitoExtension.class)
class FooTest {

  @InjectMocks
  ClassUnderTest test = new ClassUnderTest();

  @Spy
  SomeInject bla = new SomeInject();
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-03-02T21:57:42.087

`Mockito`在该方法的最新版本中[`MockitoAnnotations.initMocks`](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoAnnotations.html)已弃用

首选方式是使用

*   [`MockitoJUnitRunner`](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoJUnitRunner.html)或[`MockitoRule`](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoRule.html)为`JUnit4`
*   [`MockitoExtension`](https://javadoc.io/doc/org.mockito/mockito-junit-jupiter/latest/org/mockito/junit/jupiter/MockitoExtension.html)为了`JUnit5`
*   [`MockitoTestNGListener`](https://javadoc.io/doc/org.mockito/mockito-testng/latest/org/mockito/testng/MockitoTestNGListener.html)为了`TestNG`

如果你不能使用专用的跑步者/扩展，你可以使用[`MockitoSession`](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoSession.html)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-08-08T14:03:34.557

**1\. 使用 MockitoAnnotations.openMocks()**：

Mockito 2 中的`MockitoAnnotations.initMock()`方法已弃用并替换为`MockitoAnnotations.openMocks()`Mockito 3 中的方法。该`MockitoAnnotations.openMocks()`方法返回一个实例，`AutoClosable`该实例可用于在测试后关闭资源。下面是一个使用`MockitoAnnotations.openMocks()`.

```
import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;

class MyTestClass {

    AutoCloseable openMocks;

    @BeforeEach
    void setUp() {
        openMocks = MockitoAnnotations.openMocks(this);
        // my setup code...
    }

    @Test
    void myTest() {
        // my test code...

    }

    @AfterEach
    void tearDown() throws Exception {
        // my tear down code...
        openMocks.close();
    }

} 
```

**2\. 使用 @ExtendWith(MockitoExtension.class)**：

截至 JUnit5`@RunWith`已被删除。下面是一个使用示例`@ExtendWith`：

```
@ExtendWith(MockitoExtension.class)
class MyTestClass {

    @BeforeEach
    void setUp() {
        // my setup code...
    }

    @Test
    void myTest() {
        // my test code...

    }

    @AfterEach
    void tearDown() throws Exception {
        // my tear down code...
    }

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-23T12:44:36.223

如果您需要/需要，其他答案很棒，并且包含更多详细信息。
除此之外，我想添加一个 TL;DR：

1.  更喜欢使用
    *   `@RunWith(MockitoJUnitRunner.class)`
2.  如果你不能（因为你已经使用了不同的跑步者），更喜欢使用
    *   `@Rule public MockitoRule rule = MockitoJUnit.rule();`
3.  与 (2) 类似，但您不应**再**使用它：
    *   `@Before public void initMocks() { MockitoAnnotations.initMocks(this); }`
4.  如果您只想在其中一个测试中使用模拟并且不想将其暴露给同一测试类中的其他测试，请使用
    *   `X x = mock(X.class)`

(1) 和 (2) 和 (3) 是互斥的。
(4) 可与其他组合使用。

# shell - 如何在 shell 脚本中触发之前手动设置进程名称？

> ID：15494929
> 
> 赞同：1
> 
> 时间：2013-03-19T08:49:35.483
> 
> 标签：shell, unix

如何为要从 shell 脚本触发的进程设置进程名称？

例如，如果我要从一个 shell 脚本执行一个 java 类文件，`java <classname>`我需要`Java_Process_1`在我执行的时候看到该 java 进程`ps ax`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:29:53.180

尝试`exec -a Java_Process_1 java <classname>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:40:51.553

如果您使用的是 bash，则应该接受 hwatkins 的回答。否则，您可以使用专门为此目的制作的几个小程序之一，例如来自[http://cr.yp.to/ucspi-tcp.html](http://cr.yp.to/ucspi-tcp.html)的 argv0 ，runit 的 chpst ( [http://smarden.org/runit/chpst.8 .html](http://smarden.org/runit/chpst.8.html) ) 等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:56:48.730

假设您需要 Java 进程，您可以利用 JVM 的属性特性并为您的进程创建一个标签（如果它愿意，程序本身也可以看到）：

```
java -Dmy.appid=Java_Process_1 <classname> 
```

但一般来说，`ps`它将读取`/proc/$pid/cmdline`它打印的命令行的值，并且该值将是命令的确切参数向量的值，以空字符分隔。这意味着像“Java_Process_1”这样的自定义字符串将采取某种形式的非标准技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T13:16:37.127

另一种方法是使用您的应用程序名称创建指向您的 java 的符号链接。ps 将使用符号链接的名称。

ln -s Java_Process_1 /usr/bin/java

然后开始你的应用程序

Java_Process_1 -jar ......

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T08:53:44.870

你不能。一个进程需要存在才能修改**它**的 argv[0]。

# java - java network 接受线程之间的网络连接

> ID：15494930
> 
> 赞同：0
> 
> 时间：2013-03-19T08:49:40.710
> 
> 标签：java, multithreading, deadlock, minimum-spanning-tree

在 Java 中，我创建了 256 个线程，它们使用网络套接字相互通信。所有这 256 个线程并行运行。当一个线程被生成时，它会尝试连接到它的相邻线程。邻居列表可以是任意的。在这种情况下，如何确保所有线程都与其邻居建立连接

1.  没有死锁
2.  没有星型拓扑（中心节点）

为了在两个线程之间建立连接，一个线程必须打开一个*ServerSocket*，另一个线程必须*加入*它。目前，我正在使用一个简单的算法：

```
for all edges
do
   if edge.tid > my tid
   then
      connect to edge.ip
   endif   
done

for all edges
do
   if edge.tid < my tid
   then
       accept connection from edge.ip
   endif
done 
```

正如您在上面看到的，我首先连接到较大的邻居，然后等待较小的邻居连接到我。当邻域表如下所示时，这可能会导致死锁：

```
t0 -> t3, t1 
t1 -> t2, t0
t2 -> t1
t3 -> t0 
```

您脑海中的任何特定算法都是无死锁的？我的算法在 java 中使用阻塞连接和接受方法。我觉得这可以使用非阻塞方法来完成，但想先了解其他想法。

仅供参考，我的算法非常适用于网状拓扑（至少我认为可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:13:46.070

如果在你的情况下死锁意味着有这种情况：

```
ti -> tj and tj -> ti 
```

为什么不包括在条件中，作为避免这种情况的一种新方法，附加部分如下：

```
if edge.tid > my tid and edge is not already connected to my tie 
```

对于第一种情况，如果 ti -> tj 已经存在，那么你不接受建立 tj -> ti

```
if edge.tid < my tid and my tie is not already connected to edge 
```

对于这种情况第二种情况，如果 tj -> ti 已经存在，那么你不建立 ti -> tj

# windows-7 - 尝试在 Windows 7 和 Python 3.3 中运行 pylint

> ID：15494936
> 
> 赞同：2
> 
> 时间：2013-03-19T08:50:08.363
> 
> 标签：windows-7, pylint, python-3.3

我知道这个一般性问题并不新鲜，但这似乎是我个人的问题。

我尝试在 Windows 7 下为 Python 3.3 安装 pylint（是的，我知道它不受支持，但我知道这是可能的 - 因为我的一位同事做到了，但遗憾的是他对已知问题的解决方法不适用于我的电脑 - 并且他有 Windows 8 ...)

这个时候我已经安装了python 3.3，先尝试通过pip安装pylint，失败了。

搜索和与我的同事的一些谈话带来了这个答案： [没有运气 pip-installing pylint for Python 3](https://stackoverflow.com/questions/10772824/no-luck-pip-installing-pylint-for-python-3)

我设法按照这些说明安装了 pylint，但是其中一个依赖项（logilab-astng）失败了。

我检查了 setup.py 脚本并意识到“2to3”转换没有在我的机器上运行（我认为是由于路径问题） - 我重新配置了转换并且它运行了。

之后所有安装过程（pylint、logilab-astng、logilab-common）都退出“成功” - 但如果我启动 pylint，我会收到以下消息：

```
G:\Path\to\project>pylint --rcfile .\pylint.rc modulename
Traceback (most recent call last):
  File "C:\Program Files (x86)\Python33\Scripts\pylint-script.py", line 9, in <module>
    load_entry_point('pylint==0.27.0', 'console_scripts', 'pylint')()
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\__init__.py", line 21, in run_pylint
    Run(sys.argv[1:])
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\lint.py", line 991, in __init__
    linter.check(args)
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\lint.py", line 587, in check
    self.check_astng_module(astng, walker, rawcheckers)
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\lint.py", line 666, in check_astng_module
    walker.walk(astng)
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\utils.py", line 600, in walk
    self.walk(child)
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\utils.py", line 597, in walk
    cb(astng)
  File "C:\Program Files (x86)\Python33\lib\site-packages\pylint-0.27.0-py3.3.egg\pylint\checkers\variables.py", line 510, in visit_import
    module = next(node.infer_name_module(parts[0]))
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\bases.py", line 304, in wrapped
    for res in _func(node, context, **kwargs):
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\inference.py", line 181, in infer_imp
ort
    yield self.do_import_module(name)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\mixins.py", line 117, in do_import_mo
dule
    return mymodule.import_module(modname, level=level)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\scoped_nodes.py", line 342, in import
_module
    return MANAGER.astng_from_module_name(absmodname)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\manager.py", line 136, in astng_from_
module_name
    return self.astng_from_file(filepath, modname, fallback=False)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\manager.py", line 107, in astng_from_
file
    return ASTNGBuilder(self).file_build(filepath, modname)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\builder.py", line 129, in file_build
    node = self.string_build(data, modname, path)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\builder.py", line 135, in string_buil
d
    module = self._data_build(data, modname, path)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\builder.py", line 162, in _data_build

    module = self.rebuilder.visit_module(node, modname, package)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 616, in visit_mod
ule
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 616, in <listcomp
>
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 137, in visit
    return self._visit_meths[cls](node, parent)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 471, in visit_fun
ction
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 471, in <listcomp
>
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 137, in visit
    return self._visit_meths[cls](node, parent)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 450, in visit_for

    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 450, in <listcomp
>
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 137, in visit
    return self._visit_meths[cls](node, parent)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 540, in visit_if
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 540, in <listcomp
>
    newnode.body = [self.visit(child, newnode) for child in node.body]
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 137, in visit
    return self._visit_meths[cls](node, parent)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 391, in visit_dis
card
    newnode.value = self.visit(node.value, newnode)
  File "C:\Program Files (x86)\Python33\lib\site-packages\logilab_astng-0.24.2-py3.3.egg\logilab\astng\rebuilder.py", line 141, in visit
    visit_method = getattr(self, visit_name)
AttributeError: 'TreeRebuilder3k' object has no attribute 'visit_yieldfrom' 
```

我期待着你的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:27:23.960

问题在于，保存 pylint 使用的 ast 表示的 logilab-astng 尚不支持在 python 3.3 中引入的“yieldfrom”节点。

您可能想尝试下面的补丁，它应该可以解决问题：

```
diff --git a/rebuilder.py b/rebuilder.py
--- a/rebuilder.py
+++ b/rebuilder.py
@@ -877,10 +877,12 @@ class TreeRebuilder3k(TreeRebuilder):
             newnode.handlers = [self.visit(child, newnode) for child in node.handlers]
             newnode.orelse = [self.visit(child, newnode) for child in node.orelse]
         newnode.set_line_info(newnode.last_child())
         return newnode

+    def visit_yieldfrom(self, node, parent):
+        return self.visit_yield(node, parent)

 if sys.version_info >= (3, 0):
     TreeRebuilder = TreeRebuilder3k 
```

# android - 是否可以在 Android 上控制耳机插孔的输出电压？

> ID：15494938
> 
> 赞同：1
> 
> 时间：2013-03-19T08:50:25.647
> 
> 标签：android, controls, headphones

我正在玩一些用于手机耳机插孔的传感器。在 iPhone 或特定 Android 手机（例如 Galaxy III）上使用传感器没有问题，但在其他 Android 手机（例如 Nexus S、Nexus...）上，输出电压太低...

是否有可能使用软件解决方案来控制输出电压？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:58:16.543

除了“提高音量”（这也会提高音频插孔上的放大器）之外，没有简单的基于软件的解决方案来提高手机音频插孔的电压。这将需要您根设备并更改音频驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:54:43.420

电压不是与音量成线性关系吗？`U = R I`

# entity - Java EE 应用程序和 WET 解决方案

> ID：15494940
> 
> 赞同：0
> 
> 时间：2013-03-19T08:50:26.977
> 
> 标签：entity, jboss7.x, java-ee-6

我必须在 JBoss AS 7 上开发一个大型 Java EE 6 应用程序。该应用程序很大，必须拆分为模块（这是一个请求）。

为了保持模块化，我将它组织成 .war 和 .jar 等模块。一对，.war + .jar，对应一个应用程序模块。一些 .jar 必须共享相同的实体。

现在我必须复制实体以保持模块化，或者最好创建一个 .jar 作为库在其他 jar 之间共享？有最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:33.090

您可以拥有一个 jar 文件并让各个应用程序使用 Maven 将其拉入其类路径中。

# java - Jsoup 意外异常，正在工作，突然停止

> ID：15494942
> 
> 赞同：1
> 
> 时间：2013-03-19T08:50:41.237
> 
> 标签：java, parsing, exception, login, jsoup

我的问题是我编写了一个登录网站并下载所需数据的程序。一切都很好，程序在突然停止工作时工作。在代码中，没有任何变化，即使程序开始每次都抛出异常。什么可能导致这种情况？我该如何解决？

例外是：

`Exception in thread "main" java.lang.NullPointerException at gui.JsoupClass.checkLogin(JsoupClass.java:55) at gui.JsoupClass.<init>(JsoupClass.java:31) at gui.JsoupClass.main(JsoupClass.java:22) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)`

这是我的代码，也许我看不到你们中的一些人会看到的东西：

```
package gui;

import dao.*;
import org.jsoup.Connection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import javax.swing.*;
import java.io.IOException;
import java.net.SocketTimeoutException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class JsoupClass
{
    static String value[] = new String[3];
    static String name[] = new String[3];

    public static void main(String args[]) {
        new JsoupClass("email@gmail.com", "yourpassword", null);
    }

    public JsoupClass(String emailText, String passText, MainFrame mainFrame) {
        Connection.Response res;

        res = getLoginData();
        res = doLogin(res, emailText, passText);

        if (checkLogin(res).hasText()) {
            setUpTrafficPayment(res);
            setUpEwalletData(res);
            setUpPanelsData(res);
            setUpPaymentData(res);
            try {
                if (mainFrame != null)
                    mainFrame.dispose();
                new StatisticFrame();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }
        } else {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Wrong Login Data!",
                    "Warning",
                    JOptionPane.WARNING_MESSAGE);
        }
    }

    public Elements checkLogin(Connection.Response res) {
        Document doc = null;
        Elements elements;
        try {
            doc = res.parse();
        } catch (IOException e) {
            e.printStackTrace();
        }

        elements = doc.select("div#topuserinfo > a > span");
        if (elements.hasText()) {
            UserData userData = UserData.getInstance();
            userData.setNameValue(elements.text());
        }
        return elements;
    }

    public Document getPage(Connection.Response res, String pageAddres) {
        Document doc = null;
        try {
            doc = Jsoup
                    .connect(pageAddres)
                    .cookie("PHPSESSID", res.cookie("PHPSESSID"))
                    .get();
        } catch (SocketTimeoutException e) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Read timed out! Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return doc;
    }

    public Connection.Response doLogin(Connection.Response res, String email, String pass) {
        Connection.Response res2 = null;
        try {
            res2 = Jsoup
                    .connect("https://bannersbroker.com//user/login?event=doLogin")
                    .cookies(res.cookies())
                    .data("email", email)
                    .data("pass", pass)
                    .data(name[0], value[0])
                    .data(name[1], value[1])
                    .data(name[2], value[2])
                    .method(Connection.Method.POST)
                    .execute();

        } catch (IOException ioe) {
        } catch (IllegalArgumentException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        } catch (NullPointerException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        }
        return res2;
    }

    public Connection.Response getLoginData() {
        Connection.Response res = null;
        try {
            String html;
            int length, counter;

            res = Jsoup
                    .connect("https://bannersbroker.com//user/login?event=doLogin")
                    .execute();

            html = res.parse().toString();
            length = html.length();
            counter = 0;

            for (int i = 0; i < length; i++) {
                if (html.startsWith("document.write", i)) {
                    name[counter] = html.substring(i + 41, i + 144);
                    value[counter] = "Login";
                    counter++;
                }
                if (html.startsWith("hidden", i)) {
                    name[counter] = html.substring(i + 13, i + 81);
                    value[counter] = html.substring(i + 90, i + 123);
                    counter++;
                }
            }

        } catch (IOException ioe) {
        } catch (NullPointerException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        }
        return res;
    }

    public void setUpEwalletData(Connection.Response res) {
        Document doc;
        Elements elements;
        doc = getPage(res, "http://bannersbroker.com/adpubcombo_ewallet/ewallet");
        elements = doc.select("p[class=ewallet_numbers");
        EwalletData ewalletData = EwalletData.getInstance();
        ewalletData.setWalletValue(Double.parseDouble(elements.first().text().replaceAll("[\\D&&[^.]&&[^-]]+", "")));
    }

    public void setUpPanelsData(Connection.Response res) {
        MacroData macroData = MacroData.getInstance();
        TrafficData trafficData = TrafficData.getInstance();
        PanelsData panelsData = PanelsData.getInstance();
        String strona;
        Document doc;
        Elements elements;
        int[] traffic = new int[8];
        int[] macro = new int[7];

        for (int i = 1; i < 8; i++) {
            strona = "http://bannersbroker.com/adpubcombo_manageinventory/viewactivepanels?colour=" + i + "&sort=Qualified";
            doc = getPage(res, strona);

            elements = doc.select("span[id=limit2]");
            macro[i - 1] = Integer.parseInt((elements.first().text().replaceAll("\\D+", "")));

            elements = doc.select("div.number[id=js-tp-bank]");
            traffic[i - 1] = Integer.parseInt((elements.first().text().replaceAll("\\D+", "")));

            elements = doc.select("p[id^=QualDate]");
            if (elements.hasText()) {
                String[] luzem = elements.text().split("[\\D&&[^-]]+");
                Date[] aray = new Date[luzem.length / 4];
                try {
                    int j = 0;
                    while (elements.eq(j).hasText()) {
                        if (elements.eq(j).text() != "")
                            aray[j] = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").parse(elements.eq(j).text());
                        j++;
                    }
                    j = 0;
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                switch (i) {
                    case 1:
                        panelsData.setYellowDays(aray);
                        break;
                    case 2:
                        panelsData.setPurpleDays(aray);
                        break;
                    case 3:
                        panelsData.setBlueDays(aray);
                        break;
                    case 4:
                        panelsData.setGreenDays(aray);
                        break;
                    case 5:
                        panelsData.setRedDays(aray);
                        break;
                    case 6:
                        panelsData.setBlackDays(aray);
                        break;
                    case 7:
                        panelsData.setPrestigeDays(aray);
                        break;
                    default:
                        break;
                }
            }

            elements = getPanelData(doc);
            if (elements.hasText()) {
                int size = getPanelData(doc).size();
                for (int j = 1; j <= size / 2; j++) elements.remove(j);
                String[] luzem = elements.text().split("[\\D&&[^.]]+");
                Double[] aray = new Double[luzem.length];
                for (int j = 0; j < luzem.length; j++)
                    aray[j] = Double.parseDouble(luzem[j]);

                switch (i) {
                    case 1:
                        panelsData.setYellow(aray);
                        break;
                    case 2:
                        panelsData.setPurple(aray);
                        break;
                    case 3:
                        panelsData.setBlue(aray);
                        break;
                    case 4:
                        panelsData.setGreen(aray);
                        break;
                    case 5:
                        panelsData.setRed(aray);
                        break;
                    case 6:
                        panelsData.setBlack(aray);
                        break;
                    case 7:
                        panelsData.setPrestige(aray);
                        break;
                    default:
                        break;
                }
            }
        }
        doc = getPage(res, "http://bannersbroker.com/adpubcombo_trafficbank/managetraffic");
        elements = doc.select("h4[id=trafficLeft_4]");
        if (elements.first() != null)
            traffic[7] = Integer.parseInt((elements.first().text().replaceAll("[\\D+]", "")));

        trafficData.setTraffic(traffic);
        macroData.setMacro(macro);
    }

    public static Elements getPanelData(Document doc) {
        Elements elements = doc.select("span.cost");
        return elements;
    }

    public void setUpPaymentData(Connection.Response res) {
        Document doc;
        Elements elements;
        doc = getPage(res, "http://bannersbroker.com/adpubcombo_manageinventory/viewpackagespurchased");
        elements = doc.select("tr > td[align=center][valign=middle] > div");
        try {
            PaymentData.getInstance().setAbonamentDate(new SimpleDateFormat("yyyy-MM-dd").parse(elements.last().text()));
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }

    public void setUpTrafficPayment(Connection.Response res) {
        Document doc;
        Elements elements;
        doc = getPage(res, "https://bannersbroker.com/adpubcombo_account/account");
        elements = doc.select("div[class=infogroup] > div[class=tablecont] > table > tbody > tr > td[align=center]:not(td[class])");
        for (int i = 0; i < 5; i++) elements.remove(0);
        int length = elements.size();
        for (int i = 0; i < length / 3; i++) {
            elements.remove(i);
            elements.remove(i);
        }
        PaymentData.getInstance().setTpAmount(elements.size());
        Date[] array = new Date[elements.size()];
        for (int i = 0; i < elements.size(); i++)
            try {
                array[i] = new SimpleDateFormat("yyyy-MM-dd").parse(elements.eq(i).text());
            } catch (ParseException e) {
                e.printStackTrace();
            }
        PaymentData.getInstance().setTpDate(array);
    }
} 
```

构造函数获取电子邮件、密码和框架，在这种情况下，框架并不重要，所以我从主方法 null 发送，当我想从框架发送电子邮件和密码时它获取框架，但每次调试时都不方便这样做跳过登录窗口。

```
public JsoupClass(String emailText, String passText, MainFrame mainFrame) {
        Connection.Response res;

        res = getLoginData();
        res = doLogin(res, emailText, passText);

        if (checkLogin(res).hasText()) {
            setUpTrafficPayment(res);
            setUpEwalletData(res);
            setUpPanelsData(res);
            setUpPaymentData(res);
            try {
                if (mainFrame != null)
                    mainFrame.dispose();
                new StatisticFrame();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }
        } else {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Wrong Login Data!",
                    "Warning",
                    JOptionPane.WARNING_MESSAGE);
        }
    } 
```

`getLoginData()`方法解析 cookie 和登录所需的一些隐藏字段 `doLogin(res, emailText, passText)`使用从 获取的数据`getLoginData()`、我们的电子邮件和密码来登录。下一步是`if (checkLogin(res).hasText())`，`checkLogin(res)`返回元素，所以如果`elements.hasText`我们知道我们登录成功，否则不返回。然后当我们登录时，我解析所需的数据以挖掘类巫术方法：

```
 setUpTrafficPayment(res);
            setUpEwalletData(res);
            setUpPanelsData(res);
            setUpPaymentData(res); 
```

正如我在开始时所说的那样，一切正常，突然间它开始每次都抛出异常。

Banners Broker 是一个私人市场，目前只能通过推荐进行注册。如果任何人想创建一个帐户并尝试登录这里有一个链接来注册。 [https://bannersbroker.com/vardius](https://bannersbroker.com/vardius)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:57:08.440

看起来像你打电话`checkLogin(null)`。`res = doLogin(res, emailText, passText);`您可以在调用之前确保is not null `checkLogin`。

尝试使用：

```
if (res != null && checkLogin(res).hasText()) { 
```

捕获异常（`IOException`在您的情况下）并且什么都不做（在`doLogin`和`getLoginData`）是不好的做法。您可以抛出异常或添加日志，但忽略它可能会在另一个地方伤害您。这正是这里发生的事情......

更改此代码：

```
} catch (IOException ioe) {
} catch (IllegalArgumentException ioe) {
    JOptionPane.showMessageDialog(RunFrame.getInstance(),
            "Could not open connection to Banners Broker!",
            "Error",
            JOptionPane.ERROR_MESSAGE); 
```

对此：

```
 } catch (IOException ioe) {
        // Here print the ioe stack trace to whenever you want and check why you get this exception.

    } catch (IllegalArgumentException ioe) {
        JOptionPane.showMessageDialog(RunFrame.getInstance(),
                "Could not open connection to Banners Broker!",
                "Error",
                JOptionPane.ERROR_MESSAGE); 
```

# centos - 最后一部分在 CentOS 上构建和安装 HHVM 错误

> ID：15494944
> 
> 赞同：2
> 
> 时间：2013-03-19T08:50:45.763
> 
> 标签：centos

我按照这个[https://github.com/facebook/hiphop-php/wiki/Building-and-installing-HHVM-on-CentOS-6.3](https://github.com/facebook/hiphop-php/wiki/Building-and-installing-HHVM-on-CentOS-6.3)我快完成了，但在最后一部分是

`cd hiphop-php`

```
git submodule init
git submodule update
export HPHP_HOME=`pwd`
export HPHP_LIB=`pwd`/bin
cmake .
make 
```

错误说

[root@localhost hiphop-php]# cmake . CMAKE_PREFIX_PATH 丢失，继续进行 CMake/FindBoost.cmake:916 处的 CMake 错误（消息）：无法找到请求的 Boost 库。Boost 版本：1.41.0 Boost 包含路径：/usr/include 检测到的 Boost 版本太旧。请求的版本是 1.48（或更高版本）。

尽管有这些错误，我确实遵循了这个

如果您的失败是在 @make@ 命令上，请尝试更正错误并再次运行 @make@，它应该从停止点重新启动。如果没有，请尝试按照上面的说明删除。如果您在构建时遇到一些问题，您也可以尝试将您的 Boost 升级到 1.50 版本，并将 GCC 升级到 4.6.1 版本：您可以按照以下说明进行构建 BOOST：[https ://github.com/jackywei/HOW-TO- BUILD-HHVM-WiKi/wiki/Build-&-install-Boost-1.50-in-CentOS-(CentOS5.2-&-6.3-are-both-verified)](https://github.com/jackywei/HOW-TO-BUILD-HHVM-WiKi/wiki/Build-&-install-Boost-1.50-in-CentOS-(CentOS5.2-&-6.3-are-both-verified))

但仍然是同样的错误

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:08:44.573

检查安装了哪个版本的 boost（通过 RPM）：

```
rpm -qa boost 
```

它可能是 boost-1.41。擦除该软件包 (rpm -e)，然后安装 Boost 1.50。

# c# - Android 和 google 登录 - 获取与 OpenID 登录相同的 ID

> ID：15494945
> 
> 赞同：2
> 
> 时间：2013-03-19T08:50:49.230
> 
> 标签：c#, android, openid, dotnetopenauth

我们想构建asp.net 应用程序，使用户能够通过Google OpenID 提供程序登录。我们正在使用`DotNetOpenAuth`库，我们能够正确登录用户，因此我们得到用户标识符，如：

```
https://www.google.com/accounts/o8/id?id=AItOawnyXXXXXXXXXXXXXXXXXXXX 
```

我们能够在我们这边创建或关联现有帐户与谷歌帐户。

我们想做一个安卓应用程序，它也能让用户用他们的谷歌账户登录。为了能够对用户进行身份验证，我们希望获取与上图相同的用户标识符——这可能吗？

如果没有，使用谷歌为网络应用程序和移动应用程序提供登录的最佳方法是什么？我们还与 facebook 和 twitter 集成，

# php - 在 php mysql 中查找多个具有相似名称的表

> ID：15494954
> 
> 赞同：0
> 
> 时间：2013-03-19T08:51:29.473
> 
> 标签：php, mysql, join

我正在尝试使用 Join 从两个 mysql 表中选择数据，但我想从几个具有相似名称的表中进行选择，例如 profile_starter、profile_advanced、profile_premium 等。我的问题是如何从其他表中进行选择而不必加入更多表格？我试过 * 但它不起作用：

```
 $inbox_sql = "
SELECT sender, recipient, time, message, viewed, name, avatar 
FROM messages 
LEFT JOIN profile_* ON profile_*.username = messages.sender
"; 
```

请问您能否让我知道是否有解决方案？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:58:31.417

答案是你不能。使用 JOIN 时，表名必须完整，不能使用通配符。

如果表相同，那么查看 UNION 并在子查询中创建这些表的转储而不是将每个表连接到另一个查询呢？- 可能也值得一看，但是这些视图并不能提高性能，它们都需要根据您的数据和需求进行测试。

听起来你这里只有 3 个表，如果你简化了这个例子，你可以用通配符查询 INFORMATION_SCHEMA TABLES 以列出所有匹配的表，然后使用这个输出构建你的查询，其中包含完整的表名。

# jquery - jQuery Mobile 动态加载 attr

> ID：15494958
> 
> 赞同：0
> 
> 时间：2013-03-19T08:51:41.963
> 
> 标签：jquery, jquery-mobile, dynamic, attr

首先，这是我的第一个问题 :) 而且我不得不说，我的英语不好 :) 对不起..

我在使用 jquery mobile 时遇到 joomla 问题。标签来自 joomla 内容。我无法插入“data-*”手册。我必须使用，

> 当文件准备好时.. "$('a').attr("data-role", "button")

但这会造成问题。我会解释..

```
<script src="js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        $('.menu a').attr("data-role", "button").text();
        $('.menu a').attr("data-icon", "arrow-r");
        $('.menu a').attr("data-transition", "slide");
        $('.menu a').attr("data-iconpos", "right");
    })
</script>
<script src="js/jquery.mobile.js" type="text/javascript"></script>
<scripttype="text/javascript">
    $(function(){
      $('.menu a').attr("data-role", "button").text();
      $('.menu a').attr("data-icon", "arrow-r");
      $('.menu a').attr("data-transition", "slide");
      $('.menu a').attr("data-iconpos", "right");
    })
</script> 
```

attr("data-role", "button").. 在 'pagebeforecreate' 事件触发时工作。但 jquery.mobile.js 不会创建“移动链接”。

我希望你能理解它。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:08:01.080

我查看了您的代码，我注意到的第一件事是

```
$(function() { 
```

代替

```
$(document).ready(function () { 
```

我不能说这是否是问题所在。

```
$('.menu a').attr("data-role", "button").text(); 
```

我注意到了 text() 函数，但我不明白它为什么在那里。

# sql - 仅针对一张表的 SQL 查询 - 花费太多时间

> ID：15494962
> 
> 赞同：0
> 
> 时间：2013-03-19T08:51:53.200
> 
> 标签：sql, sql-server-2008, tsql

我有以下 sql 查询。

```
declare @RoleID int
SELECT @RoleID = RoleID FROM RoleMaster WHERE RoleEnglishDesc = 'Surveyor'

SELECT * FROM (
 SELECT
  S.ShiftID, 2 AS Flag, ISNULL(U.Latitude, 0) Latitude, ISNULL(U.Longitude, 0) Longitude,
  U.EmployeeEnglishName AS ToolTipEnglish, U.EmployeeArabicName AS ToolTipArabic,
  0 AS CaseStageID, COUNT(C.SurveyorAssigned) AS Assigned
  -- L.EntryTime AS LastEntryTime
  -- S1.cnt AS OnBreak
 FROM 
  Users U
   INNER JOIN dbo.SurveyorShift S ON S.UserId = U.UserID AND S.ShiftStatus = 1
   LEFT JOIN CaseInfoCommandQueue C ON C.SurveyorAssigned = U.UserID
 WHERE U.IsActive = 1
  AND NULLIF(NULLIF(U.Latitude, '0'), '') IS NOT NULL
  AND NULLIF(NULLIF(U.Longitude, '0'), '') IS NOT NULL
  AND ((U.RoleID = @RoleID) OR (U.RoleID2 = @RoleID) OR (U.RoleID3 = @RoleID))
 GROUP BY U.UserID, RoleID, Latitude, Longitude, EmployeeEnglishName, EmployeeArabicName, ShiftID
) D
OUTER APPLY 
(
 SELECT TOP 1 EntryTime FROM DeviceUserLocation DLoc
 WHERE DLoc.ShiftID = D.ShiftID ORDER BY DLoc.EntryTime DESC
) AS L 
```

我在最后一个外部应用的唯一问题是获取入口时间。因为外部应用只需要 10 秒。该表 DeviceUserLocation 也有一些条目。以其他方式使用前 1 的任何克服或步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:38:09.173

为您的数据创建覆盖索引，确保您在每个表上都有一个聚集索引，并且如上所述重新键，如果您不知道聚集索引和覆盖索引，那么在这里：[http](http://en.wikipedia.org/wiki/Database_index#Covering_index) ://en.wikipedia.org/wiki/Database_index#Covering_index尤其是在这里：[https](https://www.simple-talk.com/sql/learn-sql-server/using-covering-indexes-to-improve-query-performance/) ://www.simple-talk.com/sql/learn-sql-server/using-covering-indexes-to-improve-query-performance/您的查询可能正在进行表扫描（搜索或检查每个行）而不是索引查找：在索引中找到一个值并直接转到该行。（如果该列上没有和索引，则无法进行索引查找，如果没有聚集索引，则无法直接进行）

# c# - ListBox 不显示绑定数据

> ID：15494963
> 
> 赞同：2
> 
> 时间：2013-03-19T08:51:55.963
> 
> 标签：c#, wpf, xaml

在我的 Xaml 我有这个，

```
<ComboBox x:Name="masterCB" HorizontalAlignment="Left" Margin="5,127,0,0" VerticalAlignment="Top" Width="106" Height="22" Background="White" ItemsSource="{Binding Masters}" FontSize="11" SelectedIndex="{Binding Action}"/>
        <Label Content="Select Action:" HorizontalAlignment="Left" VerticalAlignment="Top" Height="26" Width="116" Margin="0,151,0,0" Background="{x:Null}" FontWeight="Bold"/>

<ListBox x:Name="actionBox" HorizontalAlignment="Left" Height="250" VerticalAlignment="Top" Width="116" Margin="5,177,0,0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
            ItemsSource="{Binding ActionList}" AlternationCount="2" MouseDoubleClick="actionBox_DoubleClick">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Background="{x:Null}">
                        <TextBlock Text="{Binding}" TextTrimming="WordEllipsis" TextWrapping="Wrap" Height="40" FontSize="11" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Style.Triggers>
                        <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                            <Setter Property="Background" Value="Silver"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle> 
```

在我的数据类中，我有这个，

```
private List<String> actionList;
public int Action 
   { 
       get{return this.action;} 
       set
       {
           action = value;
           populateActionList();
       } 
   }
 public List<String> ActionList
   {
       get { return actionList; }
       set { this.actionList = value; }
   private void populateActionList()
   {
       if (this.action == 0)
       {
           actionList = new List<String> { 
       "Chinese",
       "Indian",
       "Malay",
       "Indian",
       };
       if (this.action == 1)
       {
           actionList = new List<String> { 
       "Dog",
       "Cats",
       "Pigs",
       "Horses",
       "Fish",
       "Lion"};
       }
   } 
```

当我执行打印行时，我的 actionList 已更改，但 ListBox 项目未设置为我的 actionList。只是想知道为什么以及为什么 UI 不更新？我在某处读到您必须更改为 DataContext 和 ObservableCollections 但我尝试了那个，但它仍然没有更新。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:36:40.960

将您的代码更改为以下内容，将达到您的预期

```
private ObservableCollection<String> _actionList; 

public ObservableCollection<String> ActionList {
  get { 
    if (_actionList == null) {
      _actionList = new ObservableCollection<String>();
    }

    return actionList; 
  }
}

private void populateActionList(){
  if (this.action == 0) {
    ActionList.Clear();

    ActionList.Add("Chinese");
    ActionList.Add("Indian");
    ActionList.Add("Malay");
    ActionList.Add("Indian");
  }

  if (this.action == 1){
    ActionList.Clear();

    ActionList.Add("Dog");
    ActionList.Add("Cats");
    ActionList.Add("Pigs");
    ActionList.Add("Horses");
    ActionList.Add("Fish");
    ActionList.Add("Lion");
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:44:53.713

我复制了你所有的代码，并在一个新的 WPF 应用程序中运行它。

为了解决您的绑定问题，有两种方法：

第一：在主窗口上创建一个 Loaded 事件，代码如下：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    DataContext = this;
    populateActionList();
} 
```

这在我的应用程序中提供了以下内容：

![应用程序的图片](../Images/bc4f7f24ea04fa1b99bab00c92168b1b.png)

第二：您也可以像这样在 XAML 中绑定它：

在您的 MainWindow.xaml 中：

将以下内容添加到窗口标签：

**DataContext="{绑定RelativeSource={RelativeSource Self}}"**

然后在您的构造函数中，确保在 InitializeComponent() 运行之前设置数据：

```
public MainWindow()
{
   populateActionList();
   InitializeComponent();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:12:31.960

在您的情况下，您也可以根据需要使用列表，因为您要替换整个列表而不是添加/删除单个项目。为此，您必须使用 ObservableCollection，就像 Jehof 所写的那样，当对集合执行添加/删除/清除/替换操作时，它会自动触发 CollectionChanged 事件（*而不是PropertyChanged）。*

您需要更改两件事才能使您的代码正常工作：

1.  在您的视图模型中正确实现 INotifyPropertyChanged。对于您数据绑定的每个属性，您需要在 setter 中触发 PropertyChanged 事件。请参阅下面的代码。
2.  当您想要更新绑定时，不要更改您的私有`actionList`字段，而是更改您的属性，因为当您更改字段时，不会触发 PropertyChanged 事件。`ActionList`

要记住的是：您的 UI 会侦听其数据绑定到的属性的 PropertyChanged 和 CollectionChanged 事件。因此，如果您的 UI 没有得到更新，这些事件通常不会被触发。

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    // Masters
    private List<string> _masters = new List<string>() { "Actions 0", "Actions 1" };
    public List<string> Masters { get { return _masters; } set { _masters = value; OnPropertyChanged("Masters"); } }

    // Action
    private int action;
    public int Action { get { return this.action; } set { action = value; PopulateActionList(); OnPropertyChanged("Action"); } }

    // ActionList
    private List<String> actionList;
    public List<String> ActionList { get { return actionList; } set { this.actionList = value; OnPropertyChanged("ActionList"); } }

    private void PopulateActionList()
    {
        if (this.action == 0)
            this.ActionList = new List<String> { "Chinese", "Indian", "Malay", "Indian" };
        else if (this.action == 1)
            this.ActionList = new List<String> { "Dog", "Cats", "Pigs", "Horses", "Fish", "Lion" };
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:59:51.480

`ActionList`应该是`ObservableCollection<string>`。

您应该将`DataContext`窗口设置为具有属性的对象`ActionList`

# c# - 如何保存 BitmapImage WinRT

> ID：15494965
> 
> 赞同：3
> 
> 时间：2013-03-19T08:52:00.257
> 
> 标签：c#, windows-runtime

我有位图图像：

```
BitmapImage image = new BitmapImage();
image.SetSource(memStream); 
```

我想将图像保存到磁盘以供将来查看。我找不到如何做到这一点的工作示例？第二个问题。我需要获取像素的颜色（例如：）`Color cl=image.GetColorPixel(X,Y)`，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:50:16.103

这是我前一段时间在网上找到的代码。我不确定，但如果我没记错的话，它来自 sdk 示例或 winrt 博客

这一切都归结为 WritabelBitmap 图像（就像已经发布的其他图像一样），创建一个解码器并将其推送到流中。

```
 /// <summary>
        /// 
        /// </summary>
        /// <param name="writeableBitmap"></param>
        /// <param name="outputFile"></param>
        /// <param name="encoderId"></param>
        /// <returns></returns>
        public static async Task SaveToFile(
            this WriteableBitmap writeableBitmap,
            IStorageFile outputFile,
            Guid encoderId)
        {
            try
            {
                Stream stream = writeableBitmap.PixelBuffer.AsStream();
                byte[] pixels = new byte[(uint)stream.Length];
                await stream.ReadAsync(pixels, 0, pixels.Length);

                using (var writeStream = await outputFile.OpenAsync(FileAccessMode.ReadWrite))
                {
                    var encoder = await BitmapEncoder.CreateAsync(encoderId, writeStream);
                    encoder.SetPixelData(
                        BitmapPixelFormat.Bgra8,
                        BitmapAlphaMode.Premultiplied,
                        (uint)writeableBitmap.PixelWidth,
                        (uint)writeableBitmap.PixelHeight,
                        96,
                        96,
                        pixels);
                    await encoder.FlushAsync();

                    using (var outputStream = writeStream.GetOutputStreamAt(0))
                    {
                        await outputStream.FlushAsync();
                    }
                }
            }
            catch (Exception ex)
            {
                string s = ex.ToString();
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T11:57:45.390

您可以通过以下方式保存 BitmapImage。

```
Windows.Storage.StorageFolder localFolder =   Windows.Storage.ApplicationData.Current.LocalFolder;
        StorageFile sampleFile = await localFolder.CreateFileAsync("image.png");
        await FileIO.WriteBytesAsync(sampleFile, bytes); 
```

image.png 将保存在应用程序的 LocalFolder 中。

希望能帮助到你！

*   Binaya Raj Shrestha

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T06:22:12.560

您无法保存或修改`BitmapImage`. 您需要使用 a`WriteableBitmap`代替。如果你真的别无选择，只能从 BitmapImage 开始 - 检查它的`UriSource`属性以再次下载相同的图像或加载`WriteableBitmap`与开始内容相同的图像`BitmapImage`。请注意，`UriSource`在某些情况下可能为 null - 即使`BitmapImage`是通过给它一个 URI 来加载它 - 它可能会被手动重置或通过[设置`CacheMode`为`BitmapCache`使用`Image`给定`BitmapImage`作为其`Source`](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f2a2348d-49b5-404c-b932-dc60ffd5828a).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T07:04:22.353

如果您试图从您的 xaml 中获取一个 ui 元素并将其保存为图像，那么您将不走运。在 wpf 中有一个可写位图上的方法，该方法将 UIelement 作为参数，但在 Windows 商店应用程序中不存在。

您可以使用 DirectX，但这是一种非常复杂的方法。商店中的大多数绘图应用程序都使用 JavaScript，因为它更容易进行保存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T14:06:27.403

看看这个链接。有一个片段显示了 WriteableBitmap [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.writeablebitmap.aspx的一些操作](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.writeablebitmap.aspx)

这个例子是阅读，但写作应该不难。

要遍历像素，请查看 PixelData 属性。

# jsf-2 - 如何重新加载不同的jsf menuItem页面片段 标签

> ID：15494966
> 
> 赞同：0
> 
> 时间：2013-03-19T08:52:05.263
> 
> 标签：jsf-2, oracle-adf, ajax4jsf

当单击特定的 commandMenuItem 时，我想在标签中显示不同的菜单页面片段默认页面片段正在正确显示，但是在菜单单击时页面没有刷新，通过 actionListner 获取页面 id 但仍然没有刷新我的代码同样是：-

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:af="http://xmlns.oracle.com/adf/faces/rich"
xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
xmlns:ui="http://java.sun.com/jsf/facelets">
<af:document title="untitled2.jsf" id="d1">
<af:form id="f1">
<a4j:form ajaxSubmit="true" reRender="content">
<panelGrid>
<af:menuBar id="mb1">
<af:menu text="menu 1" id="m1">
<af:commandMenuItem text="commandMenuItem 1" id="menuPage" actionListener="#{PageBean.getMenu}" action="menuPage.jsff">
<a4j:ajax execute="@form" render=":content"/>
</af:commandMenuItem>
</af:menu>
<af:menu text="menu 2" id="m2">
<af:commandMenuItem text="commandMenuItem 2" id="menuPage2" actionListener="#{PageBean.getMenu}" action="menuPage1.jsff">
<a4j:ajax execute="@form" render=":content"/>
</af:commandMenuItem>
</af:menu>
</af:menuBar>
<ui:insert name="content">
<ui:include src="#{PageBean.page}.jsff"/>
</ui:insert>
</panelGrid>
</a4j:form>
</af:form>
</af:document>
</f:view> 
```

用于跟踪和更新用于显示页面的页面变量中的动态页面值的我的 actionListner Bean 是：-

**PageBean（动作监听器的bean）**

```
import javax.faces.event.ActionEvent;
public class PageBean {
String page = "menuPage";
    public PageBean() {
}
    public void getMenu(ActionEvent actionEvent) {
    // Add event code here...
    String id = actionEvent.getComponent().getId();
    System.out.println(" Menu ID : "+id);
    page = id;
}

    public String getPage() {
    return page;
} 
```

}

现在我希望当我从 menu2 中单击 commanMenuItem2 时，将出现包含 outputText 值菜单页 2 的相关页面 menuPage2 而不是菜单页 1

# mysql - MySQL Select where date = curdate() OR duedate = 从现在起正好 14 天

> ID：15494974
> 
> 赞同：0
> 
> 时间：2013-03-19T08:52:40.797
> 
> 标签：mysql, date, select, intervals

我需要写一个我还不太清楚的查询。

我有一张有 2 个日期的桌子。其中一个是创建日期，另一个是返回日期。我想选择所有行

`WHERE date_creation = CURDATE() OR date_return = exactly 14 days ahead.`它不必按小时精确，因为它是一个 cronjob 并且每天运行一次。

我曾尝试使用`INTERVAL + - DAYS,`等。但似乎 INTERVAL 选择了该范围内的所有内容。我需要一些确切的东西。

希望有人可以帮助我。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:59:06.283

```
you can use this 
WHERE date_creation = CURDATE() OR date_return = DATE_ADD(CURDATE(), INTERVAL 14 DAY);

https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_adddate 
```

# android - Android，如何直接从列表中替换片段？

> ID：15494975
> 
> 赞同：1
> 
> 时间：2013-03-19T08:52:40.613
> 
> 标签：android, replace, android-listview, android-fragments, listadapter

我有一个 FragmentActivity 作为我的片段的持有者。

```
public class MainScreen extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        getSupportFragmentManager()
                .beginTransaction()
                .replace(R.id.frame, new FragmentA())
                .commit();
    }   
} 
```

FragmentA 包括一个列表，每一行都有一个按钮。

```
public class MyMessagesFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        // create view
        View view = inflater.inflate(R.layout.fragment_my_messages, container, false);

        // Getting context
        context = getActivity().getApplicationContext();

        // Add views to fragment
        listView = (ListView) view.findViewById(R.id.listView);

        Log.i(TAG, "View created");

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // Setup adapter in order to be assigned to list view later
        adapter = new MyMessagesAdapter(context);

        // Assign adapter to list view
        listView.setAdapter(adapter);

        Log.i(TAG, "Fragment created");
    }
} 
```

这是适配器的代码：

```
public class MyMessagesAdapter extends BaseAdapter {

private final String TAG = "*** MyMessagesAdapter ***";
private static final String[] TEMP_ITEMS = {"Person 1", "Person 2", "Person 3", "Person 4", "Person 5", "Person 6"};
private static final String TEMP_DESCRIPTION = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.";

private LayoutInflater myInflater;
private ImageDownloader imageDownloader;

public MyMessagesAdapter(Context context) {
    myInflater = LayoutInflater.from(context);

    imageDownloader = ImageDownloader.getInstance(context);
}

@Override
public int getCount() {
    return TEMP_ITEMS.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        convertView = myInflater.inflate(R.layout.list_my_messages_row, null);
        holder = new ViewHolder();

        holder.tvUserName = (TextView) convertView.findViewById(R.id.tvUserName);
        holder.tvDescription = (TextView) convertView.findViewById(R.id.tvDescription);
        holder.ivPicture = (ImageView) convertView.findViewById(R.id.ivPicture);
        holder.btnView = (Button) convertView.findViewById(R.id.btnView);
        holder.btnView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO implement view action

            }
        });

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.tvUserName.setText(TEMP_ITEMS[position]);
    holder.tvDescription.setText(TEMP_DESCRIPTION);
    imageDownloader.displayImage(holder.ivPicture, "");

    return convertView;
}

static class ViewHolder {
    TextView tvUserName;
    TextView tvDescription;
    ImageView ivPicture;
    Button btnView;
} 
```

}

每当用户点击 holder.btnView 按钮时，我都想用 FragmentB 替换 FragmentA。我不确定什么是最好的方法。我可以在这个适配器中创建一个接口并在 FragmentActivity 类中实现它，但我不确定这是一个正确的方法。

如何告诉 FragmentActivity 用 FragmentB 替换 FragmentA？任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:36:02.087

我通过界面以凌乱的方式解决了我的问题。所以，我将适配器更改为这样的东西（添加了接口和新方法）

```
public class MyMessagesAdapter extends BaseAdapter {

    public interface OnViewButtonClickedListener {
        public void OnPerson(String id);
    }

    private static final String TAG = "*** MyMessagesAdapter ***";
    private static final String[] TEMP_ITEMS = {"Person 1", "Person 2", "Person 3", "Person 4", "Person 5", "Person 6"};
    private static final String TEMP_DESCRIPTION = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.";

    private LayoutInflater myInflater;
    private ImageDownloader imageDownloader;
    private OnViewButtonClickedListener listener;

    public MyMessagesAdapter(Context context) {
        myInflater = LayoutInflater.from(context);

        imageDownloader = ImageDownloader.getInstance(context);
    }

    @Override
    public int getCount() {
        return TEMP_ITEMS.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.list_my_messages_row, null);
            holder = new ViewHolder();

            holder.tvUserName = (TextView) convertView.findViewById(R.id.tvUserName);
            holder.tvDescription = (TextView) convertView.findViewById(R.id.tvDescription);
            holder.ivPicture = (ImageView) convertView.findViewById(R.id.ivPicture);
            holder.btnView = (Button) convertView.findViewById(R.id.btnView);
            holder.btnView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    listener.OnPerson("" + position);
                }
            });

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvUserName.setText(TEMP_ITEMS[position]);
        holder.tvDescription.setText(TEMP_DESCRIPTION);
        imageDownloader.displayImage(holder.ivPicture, "");

        return convertView;
    }

    public void setOnViewButtonClickedListener(OnViewButtonClickedListener listener) {
        this.listener = listener;
    }

    static class ViewHolder {
        TextView tvUserName;
        TextView tvDescription;
        ImageView ivPicture;
        Button btnView;
    }
} 
```

然后我像这样在fragmentA中实现它。

```
 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Setup adapter in order to be assigned to list view later
    adapter = new MyMessagesAdapter(context);
    adapter.setOnViewButtonClickedListener(new MyMessagesAdapter.OnViewButtonClickedListener() {
        @Override
        public void OnPerson(String id) {
            Toast.makeText(context, id, Toast.LENGTH_SHORT).show();
        }
    });

    // Assign adapter to list view
    listView.setAdapter(adapter);

    Log.i(TAG, "Fragment created");
} 
```

所以，我需要为这个活动添加另一个接口（像以前一样）并在 FragmentActivity 中实现它。然后 FragmentActivity 将 FragmentA 替换为 FragmentB

由于这不是我一直在寻找的好方法，如果您有更好的想法，请告诉我您的建议。谢谢

# .net - c#.net 本地数据库 Windows 窗体

> ID：15494977
> 
> 赞同：1
> 
> 时间：2013-03-19T08:52:44.233
> 
> 标签：.net, database, visual-studio-2012, local-database

我有一个 .net 4.0 Windows 窗体应用程序和一个本地数据库。这些列是 ID 号、名字、姓氏和年龄。我还有一个文本框，用户输入 ID 号并按 Enter。在输入时，我想用与 ID 号相关的名字、姓氏和年龄填充一组文本框。

这是我第一次使用任何数据库，所以我不确定从哪里开始。我试过谷歌搜索一些教程，但他们似乎并不关注本地数据库或如何填充文本框。

如果您知道任何教程或有一些有用的代码，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:55:57.493

数据库是本地的还是在不同的机器上运行都没有关系。从您的代码角度来看，您以完全相同的方式使用它。只要确保你的连接字符串是正确的（即它指向你的本地机器）。任何与查询/更新数据库中的数据相关的教程都是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:58:55.633

试试[这个教程](http://www.dotnetperls.com/sqlce)——它不包括专门填充文本框，但应该让你继续插入和检索数据。

# vb6 - VB 6.0 发送短信诺基亚电脑套件

> ID：15494981
> 
> 赞同：0
> 
> 时间：2013-03-19T08:52:53.610
> 
> 标签：vb6, sms, nokia

谁能帮助我如何使用通过 pcsuite 连接的诺基亚手机在 vb 6.0 中发送短信。

下面是我使用的代码。我在调用 pSMSAdapter.SendSMS(SHORTMESSAGE_ROUTE_TYPE_ANY, pIGSMSubmit) 时遇到错误。这是说对象变量或块变量未设置

```
Private lngEventCounter As Long
Private pFolderList() As NokiaCLMessaging.ShortMsgFolderItem
Private pSMSAdapter As NokiaCLMessaging.ShortMsgAdapter
Private pIGSMSubmit As NokiaCLMessaging.IGSMSubmit
Private pSMSMessageItem As NokiaCLMessaging.ShortMessageItem
Private pIGSMDeliver As NokiaCLMessaging.IGSMDeliver
Private pIMemory As NokiaCLMessaging.IMemory
Private pFreeIdxs As Variant
Private pFreeSimIdxs As Variant
Private pCurrentFolderIndex As Byte
Private pMsgPart1 As String
Private pMsgPart2 As String
Private Const CODING_SCHEME_UNICODE = 8
Private Const CODING_SCHEME_TEXT = 0
Private Const SMS_TEXT_MAX_SIZE = 160
Private Const SMS_UNICODE_MAX_SIZE = 70
Private Const SMS_CONCATENATED_TEXT_MAX_SIZE = 153
Private Const SMS_CONCATENATED_UNICODE_MAX_SIZE = 67
Private parameterEntry As NokiaCLMessaging.IGSMParameters
Private Sub SendConcatenatedMessage()

On Error GoTo ErrorTrap

    Dim smsEntry As NokiaCLMessaging.ShortMessageItem
    Set smsEntry = New NokiaCLMessaging.ShortMessageItem

    Dim headerArray(0 To 5) As Byte

    smsEntry.Type = SHORTMESSAGE_TYPE_GSM_SUBMIT
    Set pIGSMSubmit = smsEntry.TypeProperties

    pIGSMSubmit.message = pMsgPart1
    pIGSMSubmit.DestinationAddress = txtDestinationNumber.Text
    pIGSMSubmit.ServiceCenterAddress = "+919894051914"
    pIGSMSubmit.ProtocolID = 0
    pIGSMSubmit.DataCodingScheme = 0
    pIGSMSubmit.ValidityPeriodRelative = 255

    headerArray(0) = 5 'header lenght
    headerArray(1) = 0 'concatenated sms
    headerArray(2) = 3 'length of information element A
    headerArray(3) = 50 'reference number
    headerArray(4) = 2 '2 messages
    headerArray(5) = 1 'sequence number of sms

    pIGSMSubmit.UserDataHeader = headerArray

    Call pSMSAdapter.SendSMS(SHORTMESSAGE_ROUTE_TYPE_ANY, pIGSMSubmit)

    pIGSMSubmit.message = pMsgPart2
    pIGSMSubmit.DestinationAddress = txtDestinationNumber.Text
    pIGSMSubmit.ServiceCenterAddress = "+919894051914"
    pIGSMSubmit.ProtocolID = 0
    pIGSMSubmit.DataCodingScheme = 0
    pIGSMSubmit.ValidityPeriodRelative = 255

    headerArray(0) = 5 'header lenght
    headerArray(1) = 0 'concatenated sms
    headerArray(2) = 3 'length of information element A
    headerArray(3) = 51 'reference number
    headerArray(4) = 2 '2 messages
    headerArray(5) = 2 'sequence number of sms

    pIGSMSubmit.UserDataHeader = headerArray

    Call pSMSAdapter.SendSMS(SHORTMESSAGE_ROUTE_TYPE_ANY, pIGSMSubmit)
    MsgBox ("Concatenated MEssage sent")

Exit Sub

ErrorTrap:
    MsgBox Err.Description, vbInformation, "Error Concatenate Message"
End Sub

Private Sub Form_Load()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:30:11.820

This forum post talks about this exact topic - did you try Googling before you asked the question?

[http://www.developer.nokia.com/Community/Discussion/showthread.php?159438-Send-SMS-in-Visual-Basic-using-Mobile-Phone-as-Modem](http://www.developer.nokia.com/Community/Discussion/showthread.php?159438-Send-SMS-in-Visual-Basic-using-Mobile-Phone-as-Modem)

Now you have added some code it appears that you have not initialised the object - hence the error. Try something liek this:

```
Set pSMSAdapter = New NokiaCLMessaging.ShortMsgAdapter 
```

# java - Map-reduce 实例化异常

> ID：15494984
> 
> 赞同：1
> 
> 时间：2013-03-19T08:53:02.787
> 
> 标签：java, hadoop, xml-parsing, mapreduce

嗨，我正在尝试使用以下 map-reduce 代码解析我的 XML 文件并在输出中创建一个 CSV。

```
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;

public class XMLParseMR {

   public static class Map extends Mapper<LongWritable, Text, Text, IntWritable> {
      private final static IntWritable one = new IntWritable(1);
      public static String outputFile = null;
      private Text word = new Text();
      private JAXBC jax = new JAXBC();

      public void map(LongWritable key, Text value, Context context) throws 
          IOException, InterruptedException {

        String document = value.toString();
        System.out.println("XML : "+ document);
        try {
          ConnectHome ch = jax.convertJAXB(document);
      jax.convertCSV(ch, outputFile);
    } 
        catch (JAXBException e) {
          // TODO Auto-generated catch block
      e.printStackTrace();
    }
         } 
      }

 public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    Job job = new Job(conf, "wordcount");
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    job.setMapperClass(Map.class);
    conf.set("xmlinput.start", "<ConnectHome>");          
    conf.set("xmlinput.end", "</ConnectHome>");     
    job.setInputFormatClass(XMLInputFormat.class);
    job.setOutputFormatClass(TextOutputFormat.class);

    Map.outputFile = args[1];
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    job.waitForCompletion(true);
   }
  } 
```

我还有一个名为 Connect_Home 的类，我在其中解析使用 JAXB 提取数据的数据。但是当我运行代码时，出现以下错误：

```
WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. 
        Applications should implement Tool for the same.
    WARN mapred.JobClient: No job jar file set.  User classes may not be found. See      
        JobConf(Class) or JobConf#setJar(String).
    INFO input.FileInputFormat: Total input paths to process : 1
    INFO util.NativeCodeLoader: Loaded the native-hadoop library
    WARN snappy.LoadSnappy: Snappy native library not loaded
    INFO mapred.JobClient: Running job: job_201303121556_0011
    mapred.JobClient:  map 0% reduce 0%
    INFO mapred.JobClient: Task Id : attempt_201303121556_0011_m_000000_0, Status : 
         FAILED
    java.lang.RuntimeException: java.lang.ClassNotFoundException: XMLParseMR$Map
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1004)
        org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:217)
            at javax.security.auth.Subject.doAs(Subject.java:396)
            at 

       org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
            at org.apache.hadoop.mapred.Child.main(Child.java:260)
    Caused by: java.lang.ClassNotFoundException: XMLParseMR$Map
            at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
            at sun.misc.Launcher$AppClassLoader.loadCl
    INFO mapred.JobClient: Task Id : attempt_201303121556_0011_m_000000_1, Status :  
       FAILED
        java.lang.RuntimeException: java.lang.ClassNotFoundException: 
       XMLParseMR$Map
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1004)
            at 
       org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:217)
            at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:602)
            at javax.security.auth.Subject.doAs(Subject.java:396)
            at 
      org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
            at org.apache.hadoop.mapred.Child.main(Child.java:260)
    Caused by: java.lang.ClassNotFoundException: XMLParseMR$Map
            at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
            at java.security.AccessController.doPrivileged(Native Method)
            at sun.misc.Launcher$AppClassLoader.loadCl
    INFO mapred.JobClient: Task Id : attempt_201303121556_0011_m_000000_2, Status : 
       FAILED
    java.lang.RuntimeException: java.lang.ClassNotFoundException: XMLParseMR$Map
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1004)
            at 
      org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:217)
            at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:602)
            at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)
            at org.apache.hadoop.mapred.Child$4.run(Child.java:266)
            at java.security.AccessController.doPrivileged(Native Method)
            at javax.security.auth.Subject.doAs(Subject.java:396)
            at 

       org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
            at org.apache.hadoop.mapred.Child.main(Child.java:260)
    Caused by: java.lang.ClassNotFoundException: XMLParseMR$Map
            at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
            at sun.misc.Launcher$AppClassLoader.loadCl
    INFO mapred.JobClient: Job complete: job_201303121556_0011
    INFO mapred.JobClient: Counters: 7INFO mapred.JobClient:   Job Counters
    INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=20097
    INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving 
      slots (ms)=0
    INFO mapred.JobClient:     Total time spent by all maps waiting after reserving 
      slots (ms)=0
    INFO mapred.JobClient:     Launched map tasks=4
    INFO mapred.JobClient:     Data-local map tasks=4
    INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
    INFO mapred.JobClient:     Failed map tasks=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:01:43.560

错误信息：

```
WARN mapred.JobClient: No job jar file set.  User classes may not be found. See      
    JobConf(Class) or JobConf#setJar(String). 
```

告诉您，作业没有正确设置。`setJarByClass()`您可以让 Hadoop 通过在设置作业时调用来自行确定 JAR，而不是按名称设置 JAR ：

```
Job job = new Job(conf, "wordcount");
job.setJarByClass(XMLParseMR.class); 
```

它将根据您的类名设置[作业的JAR。](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/Job.html)之后您的作业应该可以正常运行，并且上面提到的错误消息将消失。

# php - drupal 7中的Web服务

> ID：15494987
> 
> 赞同：0
> 
> 时间：2013-03-19T08:53:07.257
> 
> 标签：php, json, web-services, rest, drupal-7

我有一个 drupal 7 代码库，其中编写了一个 Web 服务，外部 iphone 和 android 基础应用程序正在使用它，外部应用程序使用的 Web 服务的 url 就像。 [http://example.com/api/module_name/find.json?param1=xxx¶m2=xxx](http://example.com/api/module_name/find.json?param1=xxx&param2=xxx)

我必须修改上述 Web 服务以满足当前要求，但我可以找到编写 Web 服务的代码文件。我可以通过 ftp 访问代码库。正在使用的模块是**服务**，我需要知道在哪里可以找到在我的 drupal 7 文件结构中定义 Web 服务的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:31:16.393

1.  打开 module_name.module
2.  寻找`module_name_services_resources()`功能
3.  确定“查找”资源/操作
4.  记下它声称位于的文件（如果没有提供，则为当前文件）。
5.  记下回调属性，这是用于处理该资源的函数的名称。
6.  在第 4 阶段的文件或模块文件本身中找到该函数。
7.  发疯。

应该注意的是，如果这不是自定义模块（即它是核心/贡献模块），那么您不应该直接操作文件。

相反，`hook_services_resources_alter()`在您自己的模块中实现并将适用的资源指向您控制下的文件/回调函数。

# file - Eclipse RCP：将文件添加到新创建的项目中

> ID：15494989
> 
> 赞同：1
> 
> 时间：2013-03-19T08:53:19.850
> 
> 标签：file, eclipse-plugin, copy, eclipse-rcp, wizard

我是 Eclipse RCP 开发的新手，但已经阅读了相关内容和教程。我有开源项目[NodeEclipse-1](https://github.com/PaulVI/nodeclipse-1/)，我想将 2 个文件（README.md 和 hello-world-server.js）添加到新创建的项目中。我已经找到了执行创建的类和方法。

[org.nodeclipse.ui\src\org\nodeclipse\ui\wizards\NodeProjectWizard.java](https://github.com/PaulVI/nodeclipse-1/blob/5995635196249cd517a5ac319031bc75e09e952a/org.nodeclipse.ui/src/org/nodeclipse/ui/wizards/NodeProjectWizard.java)

```
public class NodeProjectWizard extends Wizard implements INewWizard { 
```

我应该把我的文件放在哪里？我猜是 org.nodeclipse.ui 项目的根目录。

如何复制这些文件（从 org.nodeclipse.ui 包到 newProjectHandle ）？

更新：什么是通用答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:31:29.647

请参阅下面的源文件的 generateTemplates() 方法。

[org.nodeclipse.ui\src\org\nodeclipse\ui\wizards\NodeProjectWizard.java](https://github.com/tomotaro1065/nodeclipse/blob/master/org.nodeclipse.ui/src/org/nodeclipse/ui/wizards/NodeProjectWizard.java)

我将 README.md.template 和 & hello-world-server.js 移至 org.nodeclipse.ui/templates 文件夹。

您还可以根据情况重写文件的内容。请参阅 rewriteReadme() 方法。它将“${projectname}”重写为用户输入的项目名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T09:14:33.850

你只想在你的项目中包含那个类？或者您有想要包含的 JAR 文件吗？

# spring - getJobExecutions 从开始时间到结束时间

> ID：15494990
> 
> 赞同：0
> 
> 时间：2013-03-19T08:53:29.130
> 
> 标签：spring, spring-batch

在我正在运行的 Spring Batch 系统中，我想获得：

**jobExplorer.getJobExecutions**从开始时间到结束时间

是否有任何现有的 API 或者我需要手动查询数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:30:49.800

You may look at this excellent answer [https://stackoverflow.com/a/15504787/305142](https://stackoverflow.com/a/15504787/305142)

To summarize, deploy [Spring Batch Admin](http://static.springsource.org/spring-batch-admin/) and use Rest JSON API

```
/jobs/executions GET List all the job executions, in order of most recent to least 
```

# wordpress - 如何在wordpress中获取图片上传的根文件夹URL？

> ID：15494992
> 
> 赞同：0
> 
> 时间：2013-03-19T08:53:32.567
> 
> 标签：wordpress

我在word press的页面中使用图像。当我从我的系统上传获得本地主机ID的图像时。如果我迁移到该URL丢失的服务器。所以我想在 word press 中获取动态根 URL 以应用于图像 src。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:02:22.077

[`bloginfo( 'template_url' )`](http://codex.wordpress.org/Function_Reference/bloginfo)在将图像添加到主题时应该使用：

```
<img src="<?php bloginfo( 'template_url' ) ?>/images/your-image.png" /> 
```

# jquery - 删除 HTML 标签按键时

> ID：15494994
> 
> 赞同：0
> 
> 时间：2013-03-19T08:53:33.840
> 
> 标签：jquery, html, input, replace

`<input>`我编写了一个代码，它可以很好地通过 jQuery删除 HTML 标记

```
$("input").on("keypress",function(e){
    var val = $(this).val();
    var open = val.indexOf('<');
    var close = val.indexOf('>');
    if(open!==-1 && close!==-1) {
      $(this).val(val.replace(val.slice(open,close+1),""));
    }
}); 
```

**演示：http:** [//jsbin.com/uzibey/1/edit](http://jsbin.com/uzibey/1/edit)

但是我应该使用任何更好的想法或功能吗？

PS：不需要服务器端安全，顺便说一句，在管理区域使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:58:29.753

您还可以使用 DOM 来清理您的输入。只需创建一个虚拟元素（不将其插入到文档中）并使用`innerHTML`. 然后删除除文本节点之外的所有节点。

这样做的好处是使用实际的 HTML 解析器来检测 HTML，而不是使用正则表达式近似。任何可以被浏览器解释为 HTML 元素的内容都将被删除。

这是一个非常基本的演示：http: [//jsfiddle.net/uA94h/](http://jsfiddle.net/uA94h/)

编辑：上面的演示完全删除了非文本节点。根据要求，这里有一个演示，其中元素被替换为它们的文本：http: [//jsfiddle.net/TknBs/](http://jsfiddle.net/TknBs/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:56:13.863

试试这个

```
$("input").on("keypress",function(e){
    var val = $(this).val();
    var regex = /(<([^>]+)>)/ig;
    var result = val .replace(regex, "");
    $(this).val(result);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:56:47.643

你可以为此使用正则表达式

```
<[^>]*(>|$) 
```

尝试将此应用于输入字符串以查看是否有帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T08:59:09.323

我找到了两种方法：

一个在[stackoverflow上](https://stackoverflow.com/questions/822452/strip-html-from-text-javascript)

另一个是这样的：

```
var StrippedString = OriginalString.replace(/(<([^>]+)>)/ig,""); 
```

# css - 在具有可滚动中心 div 的智能手机浏览器上垂直排列 div

> ID：15494995
> 
> 赞同：1
> 
> 时间：2013-03-19T08:53:36.373
> 
> 标签：css, jquery-mobile, html, css-float

我正在尝试将一组 div 叠放在一起。顶部 div 必须是左上角的静态位置（宽度 = 100%），并且不受中心 div 将具有的垂直滚动的影响。我按自己的意愿工作，除了容器 div 也有一个我不想要的垂直滚动。现在我有两个重叠的垂直滚动条，一个用于容器 div，一个用于中心。如果可以帮助我安排 div，我也会在页面上使用 JQuery mobile。

如何使我的中心 div (id=scroll) 成为唯一可滚动的 div 并使我的顶部 div (id=fixed) 处于固定位置而没有滚动条（垂直滚动条没有重叠）并且不受页面滚动的影响？

```
<div id="conatainer" style="overflow: hidden; height: 100%">

    <div id="fixed" style="position: static; top: 0%; overflow: hidden; height: 50%">

        <div id="map_canvas" style="width:100%; height: 85% ;min-height: 180px">

        ...

    </div>  

    <div id="scroll" style="position: absolute; overflow: auto; overflow-x: hidden; height: 50%">

    ...

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:11:10.900

**`jQuery Mobile`**这是一个带有固定标题和滚动内容的标准模板：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header" data-position="fixed">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">

    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Rf7NA/](http://jsfiddle.net/Gajotres/Rf7NA/)

对于要修复的标题，它需要**`data-position="fixed"`**属性。

此外，如果您**只想**使用布局而不是**`jQuery Mobile`**样式，请查看这篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**或在**[此处](https://stackoverflow.com/a/14550417/1848600)**找到它：搜索章节：**`Methods of markup enhancement prevention`**。

# jquery - jQuery获取带有id的单击单元格的表头名称

> ID：15494998
> 
> 赞同：3
> 
> 时间：2013-03-19T08:53:45.127
> 
> 标签：jquery, html-table, cell

我有一张桌子，在这张桌子上我有`id="edit"`. 现在，我想要的是在单击任何单元格时获取相应列的标题名称。到目前为止，根据之前提出的问题，我所拥有的是：

```
$('body').on('click', 'td#edit', function() {  
    var th = $('this').closest('th').eq($('th').val());
    alert(th);        // returns [object Object]
    .........................
} 
```

你能帮我解决这个问题吗？

**HTML：**

```
<table id="myTable" class="myTable">
<tbody>
    <tr>
        <th>Select</th>
        <th>JobNo</th>
        <th>Customer</th>
        <th>JobDate</th>
        <th>Warranty</th>
        <th>RepairStatus</th>
        <th>POP</th>
        <th>DOA</th>
        <th>Model</th>
        <th>SN</th>
    </tr>
    <tr>
        <td class="check">
            <input type="checkbox" value="12345">
        </td>
        <td class="edit">
            <b>12345</b>
        </td>
        <td class="edit">gdsgasdfasfasdfa</td>
        <td class="edit">2011-01-21</td>
        <td class="edit">TRUE</td>
        <td class="edit">RP</td>
        <td class="edit">FALSE</td>
        <td class="edit">0</td>
        <td class="edit">5152342</td>
        <td class="edit">66665464</td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T08:57:12.703

函数[最接近（）](http://api.jquery.com/closest/)在树的祖先中循环，`DOM`并且 th 不是 td 的父级，因此最接近不是正确的选择。如果您对多个元素具有相同的 id，首先使用类。其次使用 index() 找到对应`th`的`td`。用于特定分配`id`给父表，以便脚本不会在其他`tables / td`页面上操作。

**[现场演示](http://jsfiddle.net/XRRhB/)**

*html*

```
<table id="tbl1" border="1">
    <tr>
        <th>heading 1</th>
        <th>heading 2</th>
    </tr>
    <tr>
        <td class="edit">row 1, cell 1</td>
        <td class="edit">row 1, cell 2</td>
    </tr>
    <tr>
        <td class="edit">row 2, cell 1</td>
        <td class="edit">row 2, cell 2</td>
    </tr>
</table> 
```

*Javascript*

```
$('#tbl1').on('click', '.edit', function () {
    var th = $('#tbl1 th').eq($(this).index());
    alert(th.text()); // returns text of respective header
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:10:35.213

对于这个标记

```
<table>
    <tr class="header">
        <th>Header One</th>
        <th>Header Two</th>
        <th>Header Three</th>
    </tr>
    <tr>
        <td class="edit">One</td>
        <td class="edit">Two</td>
        <td class="edit">Three</td>
    </tr>
    <tr>
        <td class="edit">One</td>
        <td class="edit">Two</td>
        <td class="edit">Three</td>
    </tr>
</table> 
```

你可以使用这个 jQuery 代码：

```
$(".mytable").on('click', 'td.edit', function(e) {
    var index = $(this).index();
    var table = $(this).closest('table');
    console.log(table.find('.header th').eq(index).text());  // returns the header text  
}); 
```

在这里小提琴：http: [//jsfiddle.net/7qXm8/](http://jsfiddle.net/7qXm8/)

# android - 如何从 facebook sdk 获取用户生日？

> ID：15494999
> 
> 赞同：4
> 
> 时间：2013-03-19T08:53:45.737
> 
> 标签：android, facebook, sdk

如何获得用户生日`user.getBirthday()`？

```
Session.openActiveSession(this, true, new Session.StatusCallback() {
      // callback when session changes state
      @Override
      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

          // make request to the /me API
          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView welcome = (TextView) findViewById(R.id.textView1);
                welcome.setText("Hello " + user.getBirthday() + "!");
                Log.d("user_birthday","user_birthday:"+user.getBirthday());//user.getBirthday()  this value always is null?
              }
            }
          });
        }
      }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T09:24:23.247

首先，您是否为 user_birthday 设置了权限？如果您想访问 user_birthday 信息，这一点非常重要

如果用户不为空，通常您可以通过 user.getBirthday() 获取生日，因为据我所知，您正在使用新的 facebook SDK

例如，当您使用 facebook authbutton 时，您可以设置权限

```
authButton.setReadPermissions(Arrays.asList("user_location", "user_birthday", "user_likes")); 
```

或者您可以重新授权权限

```
Session.ReauthorizeRequest reauthRequest = new Session.ReauthorizeRequest(this, PERMISSIONS).
                    setRequestCode(REAUTHORIZE_ACTIVITY).
                    setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
session.reauthorizeForPublish(reauthRequest); 
```

其中 PERMISSION 是包含您的权限的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T11:00:32.813

小提示：可以通过初始打开会话请求来请求权限，因此无需重新授权：

```
final Session.OpenRequest request = new Session.OpenRequest(Activity.this);
request.setPermissions(Arrays.asList("email", "user_birthday")); // Your permissions here
request.setCallback(new Session.StatusCallback()
{
    @Override
    public void call(final Session session, SessionState state, Exception exception)
    {
        if (session.isOpened())
        {
            // Your code here
        }
    }
});

Session fbSession = Session.getActiveSession();
if (fbSession == null || fbSession.isClosed())
{
    fbSession = new Session(Activity.this);
    Session.setActiveSession(fbSession);
}

fbSession.openForRead(request); 
```

Activity.this - 你的活动上下文。

希望这对某人有帮助.. :)