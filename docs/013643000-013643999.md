# StackOverflow 问答 13643000-13643999

# java - PDFbox 中的嵌入字体错误

> ID：13643004
> 
> 赞同：2
> 
> 时间：2012-11-30T10:07:28.490
> 
> 标签：java, pdfbox

我尝试使用 pdfbox 在 java 中创建一个 pdf 文档，一切正常，但是当我尝试打开我的 pdf 时，我收到无法正确提取嵌入字体的消息。可能是什么原因？

在这里我加载我的 PDfont：

```
private PDFont getFont(PDDocument doc) throws IOException {
    return PDTrueTypeFont.loadTTF(doc, "C:\\Windows\\Fonts\\arial.ttf");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T10:40:45.340

似乎顺序很`PDTrueTypeFont.loadTTF()`重要。在将它放在处理代码的开头之后，它开始在我的情况下工作。

[但是出现了一些其他错误（主要是文本编码），所以我还是切换了库。]

# bash - 遍历/下载子域的页面/目录的正确选项

> ID：13643007
> 
> 赞同：0
> 
> 时间：2012-11-30T10:07:30.683
> 
> 标签：bash, curl, download, wget

假设存在一个具有以下目录（子域）的站点

```
index.php
|-sub1
   |-index.php
   |-sub1sub1
     |-index.php
     |-other.php
     |-sub1sub1sub1
|-sub2
   |-index.php
   |- ….
|-sub3
   |- ... 
```

我的问题是：

1.  如何在本地正确显示 sub1 子域 (http://domain/sub1) 的站点？
2.  我怎样才能得到 sub1 的子文件和目录（`sub1sub1`例如`sub1sub1sub1`）？

我尝试了以下选项（用于 wget），但它还检索了 等中的文件和`sub2`目录`sub3`。

```
wget -E -H -k -K -r http://domain/sub1/index.php 
```

也许我应该在 bash 中写几行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:28:15.593

要显示网站下载，您需要使用`--convert-links`重定向链接以指向您的本地网页的选项。

要仅获取“子”文件而不获取父文件，请使用`-np`该方法`--no-parent`

如何使用`-l depth`指定递归最大深度的选项。

这是您要查找的命令`wget --mirror --page-requisites -np --convert-links -P /Folder-local http://domain/sub1/index.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:35:46.197

`wget -r -np http://domain/sub1/`

如果您不希望其中的所有内容都可以使用蜘蛛模式首先获取列表

更详细的例子在这里：

[http://how-to.wikia.com/wiki/How_to_mirror,_spider,_or_archive_a_website](http://how-to.wikia.com/wiki/How_to_mirror,_spider,_or_archive_a_website)

# android - WebView 加载后无法正确调整大小

> ID：13643008
> 
> 赞同：2
> 
> 时间：2012-11-30T10:07:33.693
> 
> 标签：android, android-webview, zooming

`WebView`加载 JQuery [Flot](http://www.flotcharts.org/)图 API后，我无法调整我的大小。

所以，这是我的代码：

```
webview.setWebViewClient(new WebViewClient() {

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
        // view.setVisibility(View.INVISIBLE);

        progressBar1.setVisibility(View.VISIBLE);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        progressBar1.setVisibility(View.INVISIBLE);

        webview.setInitialScale(100);
        webview.getSettings().setLoadWithOverviewMode(true);
        webview.getSettings().setUseWideViewPort(true);
    }
});

webview.getSettings().setJavaScriptEnabled(true);
webview.addJavascriptInterface(this, "webConnector");

webview.loadUrl("file:///android_asset/graph_test_json.html"); 
```

有时，`WebView`会正确显示。该图已完全缩小，因此我们可以看到所有内容。

有时，它`WebView`是“放大太多”（双击`WebView`使其正确缩小并且图形适合屏幕）。

为什么`WebView`不能总是正确缩小？有没有办法强制`WebView`缩小？

*   我试图重新加载页面，但它不起作用。
*   我试图应用这三行：

    ```
    webview.setInitialScale(100);
    webview.getSettings().setLoadWithOverviewMode(true);
    webview.getSettings().setUseWideViewPort(true); 
    ```

活动结束后`onResume()`，它也不起作用。

我们可以以编程方式缩小 a`WebView`吗？

# java - Java - 这个泛型类的正确签名是什么？

> ID：13643013
> 
> 赞同：4
> 
> 时间：2012-11-30T10:07:46.557
> 
> 标签：java, generics

这是我的一堂课：

```
public class ProxyDAO<T extends DAO<? extends Model>> implements DAO<? extends Model> {
   ...
} 
```

编译器抱怨`A supertype may not implement a wildcard`.

我试过这个：

```
public class ProxyDAO<T extends DAO<? extends Model>> implements DAO<Model> {
   ...
} 
```

但是现在不允许使用 Model 的子类。

我如何告诉编译器 ProxyDAO 实现了 DAO 接口并且该接口将接受 Model 类或任何子类或 Model ？

**DAO.java**

```
public interface DAO<T extends Model> {
    T findByPK(Object pk);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:15:19.350

使用以下内容：

```
public class ProxyDAO<T extends Model> implements DAO<T> 
```

如果您需要允许 DAO 的子类：

```
public class ProxyDAO<T extends Model, V extends DAO<T>> implements DAO<T> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:23:09.287

做某事

```
class ProxyDao<M extends Model, T extends Dao<M>> implements Dao<M> {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:24:28.277

我明白了。在`implements`子句中，除了使用两个泛型参数外，不可能设置未定义的类型。您可以在那里设置实际类型，例如`Model`. 所以这段代码可以工作：

```
class Model{}

class SubModel extends Model{}

interface DAO<T extends Model> {
    T findByPK(T pk);
}

class ProxyDAO<T extends DAO<? extends Model>> implements DAO<Model> {

    public ProxyDAO() {
        findByPK(new SubModel());
    }

    @Override
    public Model findByPK(Model pk) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

# clearcase - 如何知道传入的同步数据包是针对特定 vob 的

> ID：13643014
> 
> 赞同：1
> 
> 时间：2012-11-30T10:07:51.010
> 
> 标签：clearcase

如何知道传入的同步数据包是针对特定 vob 的？

multitool lspacket -l 没有说明这是针对哪个vob。

我有几个用于我的副本的传入数据包，但是当我使用此命令导入它们时，我收到以下错误：

`C:\Program Files\IBM\RationalSDLC\ClearCase\var\shipping\ms_ship\incoming>multitool syncreplica -import sync_usal_unix_2012-11-29T23.00.17-05.00_2296`

多功能工具：错误：同步。数据包 C:\Program Files\IBM\RationalSDLC\ClearCase\var\shipping\ms_ship\incoming\sync_usal_unix_2012-11-29T23.00.17-05.00_2296 不适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:24:43.827

实际上，[`multitool lspacket`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ms_ref.doc/topics/mt_lspacket.htm)最初检查的正确命令是：

[OP vchitta](https://stackoverflow.com/users/771245/vchitta) 最初[认为](https://stackoverflow.com/questions/13643014/how-to-know-an-incoming-sync-packet-is-inteded-for-a-particular-vob/13643290#comment18759104_13643290)：

> 给出了下面`lspacket`的输出，表明预期的副本名称是正确的，但它没有显示 VOB 详细信息。

```
multitool lspacket sync_usal_unix_2012-12-01T23.01.06-05.00_19957 
Packet is: C:\Program Files\IBM\RationalSDLC\ClearCase\var\shipping\ms_ship\incoming\sync_usal_unix_20‌​12-12-01T23.01.06-05.00_19957 
Packet type: Update Packet fragment: 1 of 1 
VOB family identifier is: 360ab8c4.661e11d3.a49e.00:01:80:a9:b5:ec 
```

[我争辩](https://stackoverflow.com/questions/13643014/how-to-know-an-incoming-sync-packet-is-inteded-for-a-particular-vob/13643290#comment18760460_13643290)说：

> 您是否在 vob 注册表中搜索过“ `360ab8c4.661e11d3.a49e.00:01:80:a9:b5:ec`”？
> （或简单地说`cleartool lsvob -l`）
> 是否有任何其他具有相同 uid 的 Vob？
> 请参阅[VOB 对象和 VOB 副本对象](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ms_admin.doc/c_vob_repl_obj.htm)。
> 是或否，这就是你的答案。

IBM 文档清楚地提到：

> 每个副本都是一个VOB，但是VOB对象和VOB-副本对象是VOB数据库中的不同对象。
> 具体来说：
> 
> *   **VOB 对象**：数据库只有一个 VOB 对象。此对象的 UUID在
>     列表中列为**VOB 系列 uuid**`lsvob –long`。
> *   **VOB-replica 对象**（或replica object）：数据库对于VOB 的每个副本都有一个VOB-replica 对象。此对象的 UUID在
>     列表中列为**Vob 副本 uuid**`lsvob –long`。

OP[补充说](https://stackoverflow.com/questions/13643014/how-to-know-an-incoming-sync-packet-is-inteded-for-a-particular-vob/13643290#comment18761898_13643290)：

> 没有。
> 没有任何 vob 具有具有上述 UUID 的家庭标识符。
> 现在我可以在家庭 UUID 的帮助下找到一个数据包用于哪个 vob。
> 我发现这个特定的数据包是针对我尚未复制的 Platfom vob 的。

* * *

原始答案

先看“[数据包不适用于任何本地副本](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ms_admin.doc/c_inapplicable_pckts.htm)”

> 要验证 VOB 副本的主机名属性是否错误，请输入以下命令：

```
cleartool describe –fmt "%[replica_host]p\n"
replica:importing-replica-name@VOB-tag 
```

> 例如：

```
cleartool describe –fmt "%[replica_host]p\n" replica:newyork@/vobs/tests
manhattan 
```

> 如果主机名不正确，请使用`chreplica`命令更改它。在导入副本的主副本上，输入`chreplica`命​​令：

```
multitool chreplica –c "comment" –host new-host
 replica:importing-replica-name@VOB-tag 
```

> 例如：

```
multitool chreplica –c "change host name" –host brooklyn
replica:newyork@/vobs/tests
Updated replica information for "newyork". 
```

> 向族中的其他副本发送更新数据包。

* * *

[如本技术说明](http://www-01.ibm.com/support/docview.wss?uid=swg21122854)中所述，您可能有多种原因

> ### 原因
> 
> *   导入命令可能已从 VOB 服务器以外的主机运行。
> *   与副本关联的主机名可能已更改并且 MultiSite 尚未更新。
> *   VOB 服务器可能有多个主机名和/或多个网卡，而 MultiSite 未正确配置为与它们一起使用。
> 
> ### 解决问题
> 
> **对于原因 1**：
> 
> 确保`syncreplica -import`命令正在 VOB 服务器主机上运行。
> 该`syncreplica -import`命令必须在 VOB 服务器主机上运行，​​因为它是服务器操作。
> 
> **对于原因 2**：
> 
> 检查与副本关联的主机名并使用以下两个命令比较输出。
> VOB 和副本应该显示相同的“ `host`”输出。如果他们不这样做，这很可能是问题所在。
> 使用`multitool chreplica -host`命令解决问题。查看有关( )
> 主题的 MultiSite 管理员指南以获取更多详细信息。`chreplica``multitool man chreplica`

```
 cleartool lsvob -long <vob tag>
    multitool lsreplica -long <replica-name> 
```

> **对于原因 3**：
> 
> 如果导入实际上是在正确的服务器主机上运行，​​请检查该机器有多少主机名。
> 也许服务器有不止一个网卡，或多个别名。
> 如果有多个名称，请确保alternate_hostnames 文件存在。
> 
> 它应该包含机器拥有的每一个主机名，每行一个。

注意：alternate_hostnames 文件仅在 UNIX® 和 Linux® 上受支持。

# sql - 在 SQL Server 2008 GUI 中添加唯一约束？

> ID：13643023
> 
> 赞同：50
> 
> 时间：2012-11-30T10:08:23.357
> 
> 标签：sql, sql-server, ssms, sql-server-2008

我有一个包含数据的现有表。我刚刚添加了一个新列，但我找不到如何在该列上添加唯一约束。有人可以建议吗？右键单击并选择“检查约束”没有帮助。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-30T10:13:45.893

您需要右键单击表设计器并选择`Indexes/Keys`：

![在此处输入图像描述](../Images/9adfcfac352ad37c8a65f34e8970687e.png)

然后会弹出一个对话框，您可以将新索引添加到索引列表（在左侧）并将其定义为`unique`索引：

![在此处输入图像描述](../Images/6b1abef483d439dff180f31a101301e0.png)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-08-23T23:27:29.390

在表设计器中右键单击并选择**Indexes/Keys**。

![在此处输入图像描述](../Images/9b8b5d2b5b1ffe8bb7997bb6dc574dda.png)

索引/键窗口将打开。单击按钮**Add ，以创建新的索引/键，并在****Columns**属性中选择要唯一的列：

![在此处输入图像描述](../Images/32f1ea17a901e7c2cf5b30e73a87d5af.png)

在新索引/键的属性中，将**Type**设置为**Unique Key**：

![在此处输入图像描述](../Images/93a15231dc540d30b1f6ca0af3d5d858.png)

这是生成的唯一约束代码：

```
ALTER TABLE [dbo].[Table_1] ADD  CONSTRAINT [IX_Table_1] UNIQUE NONCLUSTERED 
(
    [myUniqueColumn] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T10:11:43.007

尝试右键单击并选择`Indexes/Keys`，添加新索引并设置`Is Unique`为 Yes。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T13:26:08.460

您只需右键单击需要从表中添加唯一键的列，然后可以选择`Indexes/Keys`. 然后您可以添加或删除要设置唯一键的列

# ios - Monotouch：是否可以在通常的 UIViewController 中显示 DialogViewController

> ID：13643025
> 
> 赞同：0
> 
> 时间：2012-11-30T10:08:24.090
> 
> 标签：ios, cocoa, xamarin.ios, monotouch.dialog

我需要为 iPad 创建登录屏幕，并且我的登录输入需要固定宽度。是否可以固定 DialogViewController 元素的长度或使用 UIView 元素创建布局并在其中嵌套 DialogViewController？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:09:54.983

醉骆驼，您可以为对话框设置视图的帧大小并将对话框作为子视图添加到其他视图

```
public class InlineDialogViewController : UIViewController
{
    public InlineDialogViewController()
    {
    }

    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        var dialog = new DialogViewController(null);

        dialog.View.Frame = new  RectangleF(0,0,100,100); // set custom dialog size

        View.AddSubview(dialog.view);
    }
} 
```

# android - 不同大小的TextView

> ID：13643029
> 
> 赞同：1
> 
> 时间：2012-11-30T10:08:39.640
> 
> 标签：android, textview

在我的布局中，我定义了 a`TextView`并给了它 id - `textName`。

以编程方式，我已将其文本设置为`My name is Blah`. 我想知道是否有可能以编程方式增加`textsize`just`Blah`而不是整体`TextView`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:21:40.123

或者简单地使用 Spannable 类：

```
String text = textView.getText();
Spannable span = new SpannableString(text);
span.setSpan(new RelativeSizeSpan(1.5f), text.indexOf("Blah"), text.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(span); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:14:50.800

是的！！您可以通过使用 HTML 格式化字符串来完成，请参阅[https://stackoverflow.com/a/1533512/603233](https://stackoverflow.com/a/1533512/603233)

像例如

```
String text = "<h5>My name is </h5><h1>Blah</h1>";
yourtextview.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:23:19.637

对于程序化

```
private TextView createTextView()
{
    final LayoutParams lparams = new LayoutParams(50,30); // Width , height
    final TextView textview= new TextView(this);
    textview.setLayoutParams(lparams);
    return textview;
} 
```

用于航向

```
String text = "<h5>My name is </h5><h1>Blah</h1>";
yourtextview.setText(Html.fromHtml(text)); 
```

# symfony - 在 Symfony/Doctrine 中使用外键作为 where 参数

> ID：13643036
> 
> 赞同：0
> 
> 时间：2012-11-30T10:09:01.360
> 
> 标签：symfony, doctrine-orm, foreign-keys

我对 symfony/Doctrine 很陌生，并且在查询构建器方面遇到了一些问题：

鉴于此 ER：

![急诊室](../Images/668a4d0adc8db48130e04382b99a8772.png)

以及以下声明：

```
namespace xxx\SeoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * xxx\SeoBundle\Entity\Session
 *
 * @ORM\Table(name="session")
 * @ORM\Entity
 */
class Session
{
    const repositoryName = "InternetSmSeoBundle:Session";

    /**
     * @var string $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     */
    private $id;
......
    /**
     * @var Gsite
     *
     * @ORM\ManyToOne(targetEntity="Gsite")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="gsite_id", referencedColumnName="id")
     * })
     */
    private $site;
......
} 
```

我需要找到按站点过滤它们的会话。我尝试了以下方法：

```
 $rep = $this->em->getRepository(Session::repositoryName);
    $qb = $rep->createQueryBuilder("s");

    $qb->setMaxResults(200);
    $qb->where("1=1");
    $qb->orderBy("time", "desc");

    //site
    if ($params->site != null){
        /** @var Gsite **/
        $site = $params->site;
        $qb->where($qb->expr()->eq("gsite_id",$site->getId()));
    } 
```

甚至

```
 $qb->where($qb->expr()->eq("site",$site)); 
```

但它不起作用。在存在多对一外键的情况下过滤数据的正确方法是什么？我需要在我的模型中创建 gsite_id 列的声明吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:21:27.523

设置参数，Doctrine 就能推断出类型（无需使用外键`id`）：

```
$qb
    ->where($qb->expr()->eq('site', ':site'))
    ->setParameter('site', $site);
; 
```

# jquery - 通过 ajax 使用动态创建的数据刷新 div

> ID：13643039
> 
> 赞同：3
> 
> 时间：2012-11-30T10:09:20.750
> 
> 标签：jquery, ajax

我正在尝试重新加载`div`已通过 AJAX 动态创建的数据，但出现 403 禁止错误。也许我正在做的事情有问题。请你介意帮助我。提前致谢。

HTML：

```
<div id="curr-elem">
    <div class="box-header">
        <h3>Elementary Subject</h3>
    </div>

    <div id="curr-elem-content">
        <table id="curr-elem-tble">
        </table>
    </div>
</div> 
```

jQuery：

```
var html;
$.ajax({
    type: 'POST',
    url: 'add_subject.php',
    dataType: 'json',
    data: { 'func_numbr':'2' },
    success: function(data) {
        var activator;
        var disabler;
        var counter_sub = 0 ;

        $.each(data, function(i, item) {
            if (data[i].subj_status == "0") {
                classToAddInactve = "inactiveButton";
                DisableInactve = "disabled=\"disabled\""
                classToAddActve = "";
                DisableActve = ""
            }
            else {
                classToAddInactve = ""
                DisableInactve = ""
                classToAddActve = "inactiveButton";
                DisableActve = "disabled=\"disabled\""
            }

            html = "<tr>";

            html += "<td><lable>Subject: </label><input type='text' name='subject[" + counter_sub + "]' rel='" + data[i].subj_id + "' value='" + data[i].subj_name + "' readonly='readonly'></td>";
            html += "<td><input type='button' rel='#loading-window' id='activate[" + counter_sub + "]' name='active' class='button active modal2 " + classToAddActve + "' value='Apply' " + DisableActve + "> ";
            html += "<input type='button' rel='#loading-window' id='inactivate["+counter_sub+"]' name='active' class='button inactive modal2 " + classToAddInactve + "' value='Remove from list' " + DisableInactve + "></td>";
            html += "</tr>";

            $('#curr-elem-tble').append(html);

            counter_sub = counter_sub +1;
        });
    }     
}); 
```

触发`div`刷新的JS：

```
$('.active').live('click', function() {
    var prev = $(this).parent().prev().find('input[type=text]');
    var valText = $(prev).val();
    var relVal = $(this).parent().prev().find('input[type=text]').attr('rel');
    var div = $(this).parent().parent().parent().parent().parent().attr('id');

    $("[id*="+div+"]").hide();

    $.ajax({
        type: 'POST',
        url: 'add_subject.php',
        dataType: 'json',
        data: {
            'func_numbr': '7',
            'subjct_name': valText,
            'subjct_id': relVal
        },
        success: function(data) {
            $('#mask2').hide();
            $('#loading-window').hide();
            $("[id*=" + div + "]").load("[id*=" + div + "]");
        }     
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:46:43.497

在您的`success`回调中，您错误地使用了[jQuery.load](http://api.jquery.com/load/)方法。`load()`需要一个 URL，而不是选择器。

您可能打算这样做：

```
 success: function(data) {
        $('#mask2').hide();
        $('#loading-window').hide();
        $("[id*=" + div + "]").html(data.someHTMLvar);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:58:57.183

首先检查是否`add_subject.php`真的可以通过从浏览器访问它来访问。如果可行，则服务器没有问题。

就像 lifo 所说的那样，您使用`$.load`了错误的方式。`$.load`接受一个 url 作为第一个参数。

```
 success: function(data) {
        $('#mask2').hide();
        $('#loading-window').hide();
    } 
```

除此之外，您最好使用像[handlebars](http://handlebarsjs.com/)或[mustache](http://mustache.github.com/)这样的模板库。这看起来不太好：

```
 html = "<tr>";

    html += "<td><lable>Subject: </label><input type='text' name='subject[" + counter_sub + "]' rel='" + data[i].subj_id + "' value='" + data[i].subj_name + "' readonly='readonly'></td>";
    html += "<td><input type='button' rel='#loading-window' id='activate[" + counter_sub + "]' name='active' class='button active modal2 " + classToAddActve + "' value='Apply' " + DisableActve + "> ";
    html += "<input type='button' rel='#loading-window' id='inactivate["+counter_sub+"]' name='active' class='button inactive modal2 " + classToAddInactve + "' value='Remove from list' " + DisableInactve + "></td>";
    html += "</tr>"; 
```

或者，如果您不想使用模板库，则从服务器构建 html，这样您就可以使用它`$.load`来加载您需要的 html。

# android - 单击后如何正确清除所有通知？

> ID：13643045
> 
> 赞同：30
> 
> 时间：2012-11-30T10:09:55.587
> 
> 标签：android, android-notifications, notificationmanager

我在通知栏上发送了一些通知，我想在单击其中一个通知时清除所有通知。现在我使用Flag一一清除。我知道`notificationManager.cancelAll()`可以清除所有通知，但我应该把它放在哪里，以便在单击其中一个通知时触发。

```
 private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name); 
    Intent notificationIntent = new Intent(context, MainActivity.class);

    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(msgid, notification);  
    //notificationManager.cancelAll(); //i wan to clear all when the notification is clicked, where should i put this line?
} 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-03T02:52:48.627

我的解决方案是在`onResume()`.

```
@Override
protected void onResume() {
super.onResume();

// Clear all notification
NotificationManager nMgr = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
nMgr.cancelAll();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:21:11.987

您应该使用发送广播的待处理意图，然后放置一个广播接收器，它将取消您的所有通知。最好记住所有的通知ID，并一一删除。

# android - 如何使用javacv在android中将图像转换为视频？

> ID：13643046
> 
> 赞同：7
> 
> 时间：2012-11-30T10:09:58.357
> 
> 标签：android, image, video, opencv, javacv

我想在android中将sdcard图像转换为视频。经过多次搜索后，我发现在javacv中是可能的。当我在纯java中尝试简单的javacv示例时，它在我的eclipse中完美运行。但是当我变成android时，同样的示例无法在 android.i 中运行。我在 myproject->libs/armeabi 文件夹中下载并添加所有 .jar 文件和 .so 文件。我的项目没有显示任何错误。但在运行时发生错误。

我试试这门课，

```
package com.example.ndkfoo_sample;

import static com.googlecode.javacv.cpp.opencv_core.cvReleaseImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvShowImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvWaitKey;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_GAUSSIAN;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvSmooth;

import com.googlecode.javacv.cpp.opencv_core.IplImage;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

//  @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
IplImage img=cvLoadImage("helloworld.jpg");

    cvShowImage("/mnt/sdcard/helloworld",img);
    cvSmooth(img,img,CV_GAUSSIAN,13);
    cvShowImage("Blur-Image",img);
    cvWaitKey();
    cvReleaseImage(img);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

我的错误就像，

```
 opencv error unspecified error. 
```

我的问题是如何在android中集成opencv/javacv。是否有任何步骤或教程。？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T10:17:57.150

使用以下几行。

**

```
opencv_core.IplImage img = cvLoadImage("/sdcard/folder/img1.jpg");
FFmpegFrameRecorder recorder = new FFmpegFrameRecorder("/sdcard/folder/test.mpeg",200,150);

    try {
       recorder.setCodecID( CODEC_ID_MPEG1VIDEO);
       recorder.setFrameRate(30);
       recorder.setPixelFormat(  PIX_FMT_YUV420P);
       recorder.start();

       for (int i=0;i<100;i++)
       {
          recorder.record(image[x]);
       }
       recorder.stop();
    }
    catch (Exception e){
       e.printStackTrace();
    } 
```

** 这由 javacv 库支持。有关更多详细信息，请阅读 Javacv Readme.txt 文件。希望这会帮助你。

# javascript - javascript回调函数的泛化

> ID：13643047
> 
> 赞同：1
> 
> 时间：2012-11-30T10:10:05.533
> 
> 标签：javascript, windows-8, callback

我想创建大约 10 个 XML HTTP 请求，如下所示。我想将 的值`i`用于第一个“子”引用，但由于`i`在执行回调之前发生更改，该值与`i`“结果”选项卡中获取的 url 不匹配。我如何概括这一点？

```
var i = 1;
WinJS.xhr({
    url: root.results[i].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[1].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
});

i = 2;

WinJS.xhr({
    url: root.results[i].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[2].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:27:00.257

典型的方法是使用额外的函数（立即执行）来*捕获*循环变量的当前值，例如：

```
var i = 1;

WinJS.xhr({
    url: root.results[i].profile_image_url_https,
    responseType: 'blob'
}).done(function (inner_i) {
  // return the actual callback
  return function (result) {
    // use `inner_i` as needed
    var imgTag = theDiv.children[1].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
      oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
  };
}(i)); // <= pass outer `i` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:20:43.760

一般来说，你可以做两件事；

1.  使用额外的功能
2.  使用额外的变量

在参数对象`{}`中，`WinJS.xhr`没有将变量复制到的范围，所以我将使用选项 1：

```
var i = 1;
WinJS.xhr({
    url: root.results[ return function(i) { return i; }(i) ].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[1].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
});

i = 2;

WinJS.xhr({
    url: root.results[ return function(i) { return i; }(i) ].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[2].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
}); 
```

更新：额外变量：

```
var i = 1;
WinJS.xhr({
    copiedVar: i,
    url: root.results[ copiedVar ].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[1].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
});

i = 2;

WinJS.xhr({
    copiedVar: i,
    url: root.results[ copiedVar ].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[2].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:19:42.390

您可以在回调函数中增加 i 的值。这样，在使用之前它不会增加。

```
var i = 1;

WinJS.xhr({
    url: root.results[i].profile_image_url_https,
    responseType: 'blob'
}).done(function (result) {
    var imgTag = theDiv.children[1].children[0];
    var imageBlob = URL.createObjectURL(result.response, {
        oneTimeOnly: true
    });
    imgTag.src = imageBlob; //tempLocalUrl;

    i++;

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:27:27.950

在这种情况下，可能会增加回调中的值。但是解决这个范围问题的一种通用方法是使用 javascript 闭包。请查看[http://jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T17:39:16.210

这是一个很好的案例，我会考虑使用嵌套的连接承诺的方法：

```
var operations = [];
for(var i = 0; i < 10; i++) {
    operations.push(WinJS.join({
        myValue: i,
        xhr: WinJS.xhr({ url: "http://foo" }),
    }).then(function(data) {
       var yourValue = data.myValue;
       var xhrResponse = data.xhr;

       // Your processing you had before
    }));
 }

 WinJS.Promise.join(operations).done(function(operations) {
     // Done
 }); 
```

这使您有机会将事物隔离并包含在内。

# java - 使用spring jdbc删除批量记录

> ID：13643051
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:10:13.880
> 
> 标签：java, maven, spring-jdbc

我有两个表 table1 和 table2 并在一个列上使用内部连接将它们连接起来。子表有可能拥有超过 5000 万条记录。使用 spring jdbc update() 删除 1700 万条记录需要 30 分钟。有没有优化的方法来减少删除时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:56:12.483

~~使用具有一些可应对批量大小的 batchUpdate，例如**。**5000。~~

*编辑：*问题可能不在 Spring jdbc 中，而是在您的查询中。

这对你有用吗？

```
DELETE 
    res
FROM
    RESULT res
INNER JOIN
    POSITION pos
    ON res.POSITION_ID = pos.POSITION_ID
WHERE
    pos.AS_OF_DATE = '2012-11-29 11:11:11' 
```

这会从 RESULT 表中删除条目。简化的 SQL 小提琴演示：[http ://www.sqlfiddle.com/#!3/4a71e/15](http://www.sqlfiddle.com/#!3/4a71e/15)

# asp.net - 如何绑定在父 Gridview 控件的模板字段内使用的子 Gridview 控件？

> ID：13643053
> 
> 赞同：0
> 
> 时间：2012-11-30T10:10:31.057
> 
> 标签：asp.net, gridview, templatefield

我在一个项目中工作，我的要求是我需要使用一个 Gridview 控件作为另一个 Gridview 控件的模板字段，并在将它呈现给用户之前动态地将一个通用列表绑定到它。有什么方法可以绑定子 Gridview（在 Templatefield 内）？

可以说：父Gridview：PGridview 子Gridview：CGridview

我真的很困惑 PGridView.Databind() 在这种情况下如何工作。

首先绑定哪个 GridView 以及如何绑定？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:19:15.067

在这个问题中，请验证父 Gridview: PGridview 和子 Gridview: CGridview 之间维护哪个字段关系

# wpf - 绑定到 ObservableList 的折线 不刷新

> ID：13643054
> 
> 赞同：0
> 
> 时间：2012-11-30T10:10:35.193
> 
> 标签：wpf, observablecollection, polyline, valueconverter

我有一个有内部的类（我们称之为`externalClass`）`ObservableCollection<Point> channel1`。（类本身不实现 INotify）

在 MainWindow 中，我有一条折线绑定到它`externalClass.channel1`，它使用从 ObservableCollection 到 PointCollection 的转换器。

因此，从我绑定的 C#`DataContext = externalClass;` 和 XAML 中的折线看起来像：

```
<Polyline Points="{Binding channel1, Converter={StaticResource pointCollectionConverter}}" Stroke="#FF00E100" Name="line" /> 
```

我有一个像这样工作的测试功能：

```
public void test()
{
   ObservableCollection<Point> newone = new ObservableCollection<Point>();
   for (int i = 0; i < debugCh1.Count; i++)
   {
      Point p1 = debugCh1[i];
      p1.Y = p1.Y + 1;
      newone.Add(p1);
   }
   channel1= newone;
} 
```

如果我在转换器本身中添加一个断点，我可以看到它在启动时被调用（并且实际上显示了初始值（硬编码）。但是当我将测试功能添加到按钮时......它什么也不做（转换器没有被调用）

关于更改通知在哪里停止的任何想法？？？

**解决方案**

在阅读了答案并在谷歌上搜索了一下之后，我有了灵魂。我想把它贴在那里给其他人

所以 .. 所谓的 externalClass 必须继承自 INotifyPropertyChanged 并且必须实现 NotifyPropertyChanged 所以所有的一切都必须这样声明：

```
public class externalClass  : INotifyPropertyChanged
{ 
  ....
    // at some point you have your ObservableCollection<smth> as a property 
    public ObservableCollection<Point> channel1 { get; set; }
  ....
    //at some point you implement NotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string caller)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(caller));
        }
    }
   ....
   //then whenever you need to fire the notification
   [..]do something with channel1
   NotifyPropertyChanged("channel1"); 
```

就这样。如果你添加一个适当的绑定（就像我在我的问题中展示的那样），整个设置都会起作用..至少我的工作有效，呵呵

祝你好运！并感谢帮助我的人！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:41:12.307

`INotifyCollectionChanged`折线点可能在绑定时不听。尝试暴露`Channel1`为属性并提高`INotifyPropertyChanged`with`"Channel1"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T12:31:44.583

首先，您需要创建自定义类`PointCollection`：

```
public class PointCollection : ObservableCollection<Point>
{
    public PointCollection()
    {

    }

    public PointCollection(IEnumerable<Point> points) : base(points)
    {

    }
} 
```

其次，您需要创建自定义`Polyline`：

```
public class PolylineDynamic : Shape
{
    private Geometry _polylineGeometry = Geometry.Empty;

    public static readonly DependencyProperty PointsProperty = DependencyProperty.Register(nameof(Points), typeof(PointCollection), typeof(PolylineDynamic), new FrameworkPropertyMetadata(PointsChanged));

    private static void PointsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((PolylineDynamic)d).PointsChanged(e);
    }

    private void PointsChanged(DependencyPropertyChangedEventArgs e)
    {
        if (e.OldValue is PointCollection oldPoints)
            oldPoints.CollectionChanged -= OnPointsChanged;
        if (e.NewValue is PointCollection newPoints)
            newPoints.CollectionChanged += OnPointsChanged;
        UpdatePolyline();
    }

    public PointCollection Points
    {
        get => (PointCollection)GetValue(PointsProperty);
        set => SetValue(PointsProperty, value);
    }

    public static readonly DependencyProperty FillRuleProperty = DependencyProperty.Register(nameof(FillRule), typeof(FillRule), typeof(PolylineDynamic), new FrameworkPropertyMetadata(FillRule.EvenOdd));

    public FillRule FillRule
    {
        get => (FillRule)GetValue(FillRuleProperty);
        set => SetValue(FillRuleProperty, value);
    }

    protected override Geometry DefiningGeometry => _polylineGeometry;

    private void OnPointsChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                var aPoint = e.NewItems.OfType<Point>().Single();
                Add(aPoint, e.NewStartingIndex);
                break;
            case NotifyCollectionChangedAction.Remove:
                Remove(e.OldStartingIndex);
                break;
            case NotifyCollectionChangedAction.Replace:
                var rPoint = e.NewItems.OfType<Point>().Single();
                Replace(rPoint, e.NewStartingIndex);
                break;
        }
    }

    protected void UpdatePolyline()
    {
        if (Points == null || Points.Count < 2)
            _polylineGeometry = Geometry.Empty;
        else
        {
            var pGeometry = GetPathGeometry();
            for (var i = 0; i < Points.Count; i++)
            {
                if (i == 0)
                    continue;
                var startPoint = Points[i - 1];
                var point = Points[i];
                var figure = new PathFigure { StartPoint = startPoint };
                figure.Segments.Add(new LineSegment(point, true));
                pGeometry.Figures.Add(figure);
            }
        }
    }

    private void Add(Point point, int index)
    {
        var pGeometry = GetPathGeometry();
        if (pGeometry.Figures.Count == 0)
        {
            UpdatePolyline();
            return;
        }

        if (index == Points.Count - 1)
        {
            var segment = new LineSegment(point, true);
            var figure = new PathFigure { StartPoint = Points[index - 1] };
            figure.Segments.Add(segment);
            pGeometry.Figures.Add(figure);
        }
        else if (index == 0)
        {
            var segment = new LineSegment(Points[1], true);
            var figure = new PathFigure { StartPoint = point };
            figure.Segments.Add(segment);
            pGeometry.Figures.Insert(0, figure);
        }
        else
        {
            var leftFigure = new PathFigure { StartPoint = Points[index - 1] };
            leftFigure.Segments.Add(new LineSegment(point, true));
            var rightFigure = new PathFigure { StartPoint = point };
            rightFigure.Segments.Add(new LineSegment(Points[index + 1], true));
            pGeometry.Figures.Insert(index - 1, leftFigure);
            pGeometry.Figures.Insert(index, rightFigure);
        }
        InvalidateVisual();
    }

    private void Remove(int index)
    {
        var pGeometry = GetPathGeometry();
        if (!pGeometry.Figures.Any())
        {
            _polylineGeometry = Geometry.Empty;
            InvalidateVisual();
            return;
        }

        if (index == Points.Count - 1 || index == 0)
            pGeometry.Figures.RemoveAt(index);
        else
        {
            var leftFigure = pGeometry.Figures[index - 1];
            var rightFigure = pGeometry.Figures[index];
            pGeometry.Figures.RemoveAt(index - 1);
            rightFigure.StartPoint = ((LineSegment)leftFigure.Segments.Single()).Point;
        }
        InvalidateVisual();
    }

    private void Replace(Point point, int index)
    {
        var pGeometry = GetPathGeometry();
        if (index == 0)
            pGeometry.Figures[0].StartPoint = point;
        else if (index == Points.Count - 1)
            ReplaceSegment(pGeometry.Figures[index - 1], point);
        else
        {
            ReplaceSegment(pGeometry.Figures[index - 1], point);
            pGeometry.Figures[index].StartPoint = point;
        }
        InvalidateVisual();
    }

    private void ReplaceSegment(PathFigure figure, Point point)
    {
        figure.Segments.Clear();
        figure.Segments.Add(new LineSegment(point, true));
    }

    private PathGeometry GetPathGeometry()
    {
        if (_polylineGeometry is PathGeometry pathGeometry)
            return pathGeometry;
        else
        {
            pathGeometry = new PathGeometry { FillRule = FillRule };
            _polylineGeometry = pathGeometry;
            return pathGeometry;
        }
    }
} 
```

如果您需要更多功能，可以添加更多）

# iphone - Xbee wifi 与 iphone 点对点连接

> ID：13643055
> 
> 赞同：2
> 
> 时间：2012-11-30T10:10:36.923
> 
> 标签：iphone, networking, connection, udp, wifi

我设法使用来自 github 的 asyncudpsocket 框架的基础设施设置将数据从 iphone 发送到 xbee wifi 模块。（iphone->调制解调器->直升机上的xbee）有一些严重的延迟问题，所以我想创建一个临时的点对点连接。现在通过一些摆弄，xbee 模块会出现在 iphone 的热点列表中，并且可以连接到它。但现在呢？它是否应该与在基础设施设置期间使用的相同应用程序一起工作（目前不能），还是我需要先做一些其他事情？任何帮助表示赞赏。

# javascript - 关闭弹出子项后在父页面中显示消息

> ID：13643056
> 
> 赞同：0
> 
> 时间：2012-11-30T10:10:36.977
> 
> 标签：javascript

我在子窗口（弹出窗口）中有此代码：

```
function confirmation() {
  var answer = confirm("Close?")
  if (answer) {
    var popup = window.open('../index.php?accao=some');
    popup.document.getElementById('boxid').style.visibility="visible";
  } else {
    return false;
  }
} 
```

而且，在父页面中，我有：

```
<div id="boxid" style="visibility: hidden">Success</div> 
```

我想要的是`#boxid`在我单击弹出窗口关闭时显示。为什么这段代码不起作用？

更新：仍然无法正常工作。

```
var popup = window.parent;
popup.document.getElementById('boxid').style.visibility="visible"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:13:01.297

您应该使用`window.parent`来引用父页面。

您所做的将打开一个新窗口。

# amazon-s3 - s3 策略的操作无效 - s3:ListAllMyBuckets

> ID：13643058
> 
> 赞同：21
> 
> 时间：2012-11-30T10:10:46.240
> 
> 标签：amazon-s3, policy, bucket

我正在通过我的存储桶上的[console.aws.amazon.com尝试这些](https://console.aws.amazon.com/s3)[策略：](https://stackoverflow.com/questions/6615168/s3-policy-limiting-access-to-only-one-bucket-listing-included)

```
    {
      “陈述”： [
        {
          “效果”：“允许”，
          “行动”： [
            "s3:ListBucket",
            "s3:GetBucketLocation",
            “s3:ListBucketMultipartUploads”
          ],
          "资源": "arn:aws:s3:::itnighq",
          “健康）状况”： {}
        },
        {
          “效果”：“允许”，
          “行动”： [
            "s3:AbortMultipartUpload",
            “s3：删除对象”，
            "s3:DeleteObjectVersion",
            "s3:GetObject",
            "s3:GetObjectAcl",
            "s3:GetObjectVersion",
            "s3:GetObjectVersionAcl",
            "s3:PutObject",
            "s3:PutObjectAcl",
            “s3:PutObjectAclVersion”
          ],
          "资源": "arn:aws:s3:::itnighq/*",
          “健康）状况”： {}
        },
        {
          “效果”：“允许”，
          "动作": "s3:ListAllMyBuckets",
          “资源”：“*”，
          “健康）状况”： {}
        }
      ]
    }

```

但我收到此错误消息： **Policy has invalid action - s3:ListAllMyBuckets** 它似乎不喜欢**"Resource": "*"**，我也尝试使用 **arn:aws:s3:::* ***，但它也不起作用。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-25T10:54:33.757

正如 zdev 提到的，您需要为 IAM 执行此操作。转到[IAM 控制台](https://console.aws.amazon.com/iam/home#home)并导航到*用户 > 权限 > 内联策略 > 创建 > 自定义*，然后输入：

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:ListAllMyBuckets"
            ],
            "Resource": [
                "arn:aws:s3:::*"
            ]
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-01T11:10:56.320

我自己想通了。它需要在[IAM](https://console.aws.amazon.com/iam)中完成，而不是在 S3 本身中......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-10T20:13:54.923

@dnlbrky 您需要通过为 IAM 用户/组/角色设置策略并使用 IAM 用户/组的 AWS 控制台或调用 put_[role/user/group]_policy boto API 调用来设置它.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-22T07:26:15.663

**任何人都遇到同样的问题**：

S3 存储桶`Policy Actions`不同于`IAM policy actions`. [可以从https://docs.aws.amazon.com/AmazonS3/latest/dev/using-with-s3-actions.html](https://docs.aws.amazon.com/AmazonS3/latest/dev/using-with-s3-actions.html)引用 s3 操作。

或尝试以下操作

```
"Action": [
        "s3:DeleteObject",
        "s3:GetObject",
        "s3:PutObject"
      ], 
```

# mysql - 使用 SQLDeveloper 查询 mysql 数据库不会返回正确的值

> ID：13643063
> 
> 赞同：9
> 
> 时间：2012-11-30T10:11:03.880
> 
> 标签：mysql, encoding, oracle-sqldeveloper

我有一个 mysql 数据库，其中`utf8`包含所有表的字符集。我正在使用 SQLDeveloper 通过最新的 JConnector JDBC 驱动程序访问和查询数据库。

当执行一个简单的查询，例如包含保加利亚语的`SELECT 'Варна';`等价于时，SQLDeveloper 返回. 这使得从我使用保加利亚语返回的数据库中进行选择，因为它们的子句（包含保加利亚语）与数据库中的保加利亚语字符不匹配。(When the select doesn't use Bulgarian language at all SQLDeveloper returns completely correct values and displays the Bulgarian language returned as a result of the query correctly.)`SELECT 'Варна' from DUAL;``'?????'``NULL``where``uft8`

`Preferences -> Environment -> Encoding`SQLDeveloper 中的当前设置为，`UTF-8`但我已经尝试了其中列出的几乎所有适用的编码，即使是最简单的查询`SELECT 'Варна' from DUAL;`仍然没有返回正确的值`Варна`。

我已经研究过设置变量`NLS_LANG`，认为这可能是原因，但无济于事。（也许它毕竟是关键，但我无法正确配置它）。

编辑：为了重现问题并将其可视化（我意识到我可能解释得不好），只需进入 SQLDeveloper 并连接到 mysql 数据库并执行查询`SELECT 'Варна' from DUAL;`。

编辑2：澄清。

Edit3：正如@tenhouse 留下的评论所示，这似乎是一个错误。

Edit4：正如下面的评论所述，上面的查询`SELECT 'Варна' from DUAL;`工作得很好，没有任何修改和/或在 MySQL Workbench 上摆弄设置。

Edit5：如果您认为可以改进某些内容，请随时更正标题和/或标签，因为问题仍然没有答案。

Edit6：现在我可以假设它真的是一个错误吗？任何人都可以告诉我在哪里报告它 - 它是与 JConnector 还是 SQLDeveloper 相关的错误。我认为我必须将其报告为 SQLDeveloper 错误，但我宁愿在可能浪费他们的时间之前得到确认。

Edit7：试图进一步澄清它，希望得到答案。

**Edit8：（重要！）**我当前的数据库托管在 linux（Ubuntu 12.04，MySQL 5.5.28）服务器上。但是，如果我在新的 Windows 机器上安装 MySQL 并在`utf8`那里创建一个 db，则通过 SQLDeveloper 进行查询按预期工作，`SELECT 'Варна' from DUAL;`实际上返回`Варна`. 有人可以确认一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:29:29.227

所以我自己直到几个月前遇到这个问题才知道这一点，但 MySQL 实际上为客户端、数据库和连接提供了不同编码的能力。MySQL 会将来自/到客户端的请求/响应转换（或整理）为客户端或他的配置文件中指定的不同编码。因此，即使数据库将内容存储为 utf8，如果客户端设置为 latin1，您将看到 latin1 作为结果编码。检查这一点的最简单方法是启动与 MySQL 的连接并运行以下查询：

```
SHOW VARIABLES LIKE "%char%"; 
```

您应该看到一大堆不同连接/源的编码。根据您的描述，我想其中大多数*都不*是 utf8。这是[mysql](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)关于这些含义的文档。您可以通过执行**SET NAMES 'utf8'; 来测试这是否真的是问题所在；**或**字符集 utf8；**（不记得是哪一个）并再次运行查询以查看是否可以解决问题。

这些人所做的每个人的总结（因为文档遗漏了一些东西）：

*   **character_set_client：**指定从客户端发送到服务器时如何编码数据。通过 MySQL 的 API 连接的任何东西*都不*是客户端（例如 php 的 mysqli，大多数 C/C++ 包装器库）
*   **character_set_database：**指定存储在数据库中的数据的编码
*   **character_set_filesystem：**不太确定，但我相信数据是如何写入磁盘的？
*   **character_set_results：** MySQL返回查询结果的编码
*   **character_set_server：**服务器的默认设置（不确定使用它的情况）
*   **character_set_system：**也不确定这个
*   **character_sets_dir：**您的排序规则/编码定义所在的位置

这些人中的大多数可以通过编辑你的 my.cnf 并在其中粘贴你的默认值来指定。

我不确定 JConnector 是如何工作的，但我想它使用 MySQL 的 C API，在这种情况下，您需要在代码中的某处执行以下操作。也许 JConnector 有办法让您通过他进行设置。我不确定，但这里是 MySQL API 的语法：

```
mysql_options( myLink, MYSQL_SET_CHARSET_NAME, "utf8" ); 
```

**编辑：**对于 MySQL 5.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:17:58.503

您可以尝试这样的命令 :: ALTER DATABASE CHARACTER SET WE8ISO8859P5;

请在更改字符集后重新启动数据库。

更多详细信息请参阅此链接，其中解释了不同语言所需的编码

[http://www.csee.umbc.edu/portal/help/oracle8/server.815/a67789/ch3.htm](http://www.csee.umbc.edu/portal/help/oracle8/server.815/a67789/ch3.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:07:34.953

用 mysql_connect 连接后：

```
$dbcnx = mysql_connect($dbhost, $dbuser, $dbpass) 
```

你做这个查询：

```
mysql_query("SET 
                  character_set_results = 'utf8', 
                  character_set_client = 'utf8', 
                  character_set_connection = 'utf8', 
                  character_set_database = 'utf8', 
                  character_set_server = 'utf8'", 
    $dbcnx); 
```

现在这将为返回的内容设置编码，服务器上发生的事情 - 所以所有这些都具有相同的编码。

在您的以下查询中，您指定要使用的此连接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T10:57:10.283

出口

添加`[?characterEncoding=utf8]`

```
<StringRefAddr addrType="customUrl">
    <Contents>jdbc:mysql://instance_host_name:3306/database_name?characterEncoding=utf8</Contents>
</StringRefAddr> 
```

进口

# rest - SugarCRM REST API 会话频繁过期

> ID：13643066
> 
> 赞同：3
> 
> 时间：2012-11-30T10:11:16.267
> 
> 标签：rest, sugarcrm

我在 JavaScript 中使用 REST API。当我多次请求 REST API 时，它返回（响应）*无效会话 id*，但我提供了一个有效的会话 id，因为我已使用此会话 id 提取数据。
有人遇到过这个问题吗？

```
function sugarLogin(url, user, password) {
var request = new XMLHttpRequest();
var params = {
    user_auth: {
        user_name: user,
        password: password
    },
    name_value_list: [{
        name: 'notifyonsave',
        value: 'true'
    }]
};
var json = $.toJSON(params);
var crm_api = url;
request.open("POST", crm_api, true);
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
request.onreadystatechange = function () {
    if (request.readyState == 4 && request.status == 200) {
        var response = request.responseText;
        var response_obj = jQuery.parseJSON(response);

        if (response_obj) {
            if (response_obj.name && response_obj.name == "Invalid Login") {
                //invalid login
                ProcessingFlag = 3;
            } else {
                session_id = response_obj.id;
                ProcessingFlag = 1;
            }
        }
    } else if (request.readyState == 4 && request.status == 404) {
        ProcessingFlag = 2;
    }
}
request.send("method=login&input_type=JSON&response_type=JSON&rest_data=" + json);} 
```

我已经使用上面的代码来`login`设置`session_id`（全局范围），然后使用这个会话 ID 我正在调用`search_by_module`REST API 的函数。它工作正常，但如果频繁发出多个请求，则会显示会话 ID 无效。

尽管我在拨打电话`login`之前尝试再次调用函数`search_by_module`。主要问题是当我在响应返回`search_by_module`并呈现 HTML 后尝试调用其他 REST 函数时，它说我的会话无效。我不知道为什么会话会立即过期，而我们知道服务器上的会话会在 24 分钟后过期（我们的糖实例托管的服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:13:29.213

我敢打赌，由于第 3 项，您会得到这个：

1/ 定义了一个错误回调，用于检查特定响应 - 无效登录 - 并调用登录函数。阅读您的代码，我想这是`ProcessingFlag = 3;`工作。

2/ 确保登录函数正确且全局地更新 session_id，以便将来的函数调用将获得正确的值。

3/ 确保你将新的 session_id 作为`FIRST`参数传递给你所有的 rest_data 中的所有后续调用。我被抓住了，浪费了好几个小时才发现 SugarCRM`DOESN'T`支持其 rest_data 中的命名参数（它是否实现了函数参数方面的糟糕？）这是因为我将 session_id 添加为最后一个参数，而我所有的 REST 调用都是返回无效的 ID。

# iphone - 将图像与相机图像组合时，顶部图像正在缩放

> ID：13643069
> 
> 赞同：1
> 
> 时间：2012-11-30T10:11:26.257
> 
> 标签：iphone, objective-c, ios

我有一个应用程序，我在其中将图像（例如顶部图像）放在相机叠加图像上。相机overlayView上的图像可以缩放，捏合和旋转，然后将其与相机图像结合。我在stackoverflow上找到了一个代码，通过它我成功地旋转了图像。但是当旋转顶部图像后结合起来得到缩放并且某些部分也被裁剪了。请帮忙。谢谢我提前。我的代码是。

```
-(UIImage*)combineImage:(UIImage *)camImage withImage:(UIImage *)topImage
{

        UIImage *scaledTopImg = [self imageByScalingProportionallyToSize:imageView.frame.size withImage:topImage];

        UIGraphicsBeginImageContext(scaledTopImg.size); //scaling top image after resizing
        CGContextRef ctx = UIGraphicsGetCurrentContext();     
        CGContextTranslateCTM(ctx, imageView.frame.size.width*0.5f , imageView.frame.size.height*0.5f);                    

        CGFloat angle = atan2(imageView.transform.b, imageView.transform.a);
        CGContextRotateCTM(ctx, angle);

        [scaledTopImg drawInRect:CGRectMake(- scaledTopImg.size.width * 0.5f, -(scaledTopImg.size.height  * 0.5f), scaledTopImg.size.width, scaledTopImg.size.height)];

        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        if ([[UIDevice currentDevice]orientation]==UIInterfaceOrientationLandscapeLeft ||[[UIDevice currentDevice]orientation]==UIInterfaceOrientationLandscapeRight) {
            UIGraphicsBeginImageContext(CGSizeMake( 1024,768));//Creating Camera image
            [camImage drawInRect:CGRectMake(0, 0, 1024, 768)];
        }
        else{
            UIGraphicsBeginImageContext(CGSizeMake(768, 1024));
            [camImage drawInRect:CGRectMake(0, 0, 768, 1024)];
        }

        CGRect rect = imageView.frame;

        [newImage drawInRect:CGRectMake(imageView.frame.origin.x, imageView.frame.origin.y,imageView.frame.size.width, imageView.frame.size.height)]; //Drawing scaled image over camera image 

        UIImage *newImage2 = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        return newImage2;
} 
```

# ruby - 无法通过现有的模态对话框（Selenium::WebDriver::Error::UnhandledAlertError）

> ID：13643071
> 
> 赞同：2
> 
> 时间：2012-11-30T10:11:31.733
> 
> 标签：ruby, cucumber, watir-webdriver, selenium-webdriver

我正在使用 watir-webdriver，但在弹出确认窗口时遇到问题。我单击“出售”按钮，然后出现一个确认弹出窗口。我似乎无法弄清楚如何提出在弹出窗口上单击“确定”的步骤。任何帮助将非常感激。

有问题的html是：（按钮）

```
<button>class="btn primary" onclick="return confirm('Are you sure you wish to sell the selected loan parts?');" value="Sell Loan Parts" name="sell_loan_parts" style="" type="submit"</button> 
```

我尝试使用以下步骤，但我想这是不正确的：

```
@browser.button(:onclick, "return confirm('Are you sure you wish to sell the selected loan parts?');").click 
```

我收到的错误消息是：

```
Modal dialog present (Selenium::WebDriver::Error::UnhandledAlertError)
      [remote server] file:///var/folders/fd/hjkxr06j6gs6620tl4k_9fh00000gn/T/webdriver-profile20121129-50930-ul24fl/extensions/fxdriver@googlecode.com/components/command_processor.js:10402:in `unknown' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:16:08.907

Watir 有一个用于处理这些类型的 javascript 警报的 api。一些有用的链接：

*   [Watir-Webdriver > Javascript 对话框](http://watirwebdriver.com/javascript-dialogs/)
*   [Watir-Webdriver 警报 API](http://rubydoc.info/gems/watir-webdriver/Watir/Alert)

您应该可以通过执行以下操作在确认中单击“确定”：

```
@browser.alert.ok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T21:10:20.917

也可能有助于召回浏览器以将焦点设置到模式窗口（例如，当使用 Selenium Webdriver 和 Cucumber 时）。过去，这对我有用，而其他任何方法都没有。您所要做的就是：

```
browser = GemName::CucumberFormatter::Browser.get_browser
browser.alert.ok 
```

这只是另一种选择。

# oracle - 外键还是删除触发器？

> ID：13643073
> 
> 赞同：1
> 
> 时间：2012-11-30T10:11:33.060
> 
> 标签：oracle, database-design, triggers

表格：

```
SIGN_OBJECT:
ID VARCHAR2(32) PRIMARY KEY, 
DESCRIPTION VARCHAR2(100),
X NUMBER(10,3), 
Y NUMBER(10,3),
...
GEOMETRYID VARCHAR2(32) 

LAMPPOST_OBJECT:
ID VARCHAR2(32) PRIMARY KEY, 
DESCRIPTION VARCHAR2(100),
X NUMBER(10,3), 
Y NUMBER(10,3),
...
GEOMETRYID VARCHAR2(32) 

OBJGEOMETRY:
GEOMETRYID VARCHAR2(32) PRIMARY KEY, 
GEOMETRY MDSYS.SDO_GEOMETRY, 
... 
```

有许多 X_OBJECT 表。不幸的是，模式设计者（以其无限的智慧）没有看到各种对象类型之间的任何交叉。如果不创建更多工作，我将无法更改这些表。

对于每个对象表，都有一个触发器在插入或更新之前创建相关的 SDO_GEOMETRY 值（GEOMETRYID 是唯一的 - 它来自一个序列）。目前，触发器调用一个包函数，该函数插入 OBJGEOMETRY 记录并返回geometryid。

问题是如果父记录被删除，我希望 OBJGEOMETRY 子记录也被删除。

最初我认为这可以通过外键级联删除来完成，但当然 FK 需要父表中的主键 - 显然这不起作用。

但是，我发现实际上 FK 需要父表中的唯一约束。我可以使 X_OBJECT.GEOMETRYID 唯一，但后来我发现了问题，因为 GEOMETRYID 尚未填充到父表中，但 FK 要求它存在。我无法在触发器内执行此操作（通过设置 :NEW.GEOMETRYID ）所以我必须先编写 GEOMETRYID 然后提交吗？我不确定，这有不好的代码气味。

那我错了吗？这是否更适合删除触发器？还是我缺少什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:30:17.330

如果在同一事务中同时插入 OBJGEOMETRY 和 X_OBJECT 行，则可以将 FK 设置为`DEFERRABLE INITIALLY DEFERRED`.

在这种情况下，它将在`COMMIT`时间进行评估，而不是在您运行`INSERT`语句时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:46:30.680

触发器应该在插入或更新之前触发，而不是之后。然后你可以用你的包返回的值设置 :NEW.GEOMETRYID 。

此外，外键指向错误的方向。应该是 ALTER TABLE x_OBJECT ADD FOREIGN KEY (geometryid) REFERENCES objgeometry(geometryid);

因此，您需要一个删除触发器...

# c++ - 在默认浏览器中以编程方式打开多个 URL

> ID：13643074
> 
> 赞同：0
> 
> 时间：2012-11-30T10:11:36.257
> 
> 标签：c++, winapi, browser, shellexecute

> **可能重复：**
> [在同一浏览器选项卡中打开链接](https://stackoverflow.com/questions/11087969/open-link-in-same-browser-tab)

如何以这样一种方式做到这一点，即 URL 在一个浏览器窗口中打开，**每个窗口都在单独的选项卡中**？对于所有主要浏览器，有没有办法以一般方式做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:14:50.143

`ShellExecute(NULL, "open", URL_GOES_HERE, NULL, NULL, SW_SHOWNORMAL);`
应该可以在同一个窗口中打开多个选项卡，
显然你需要`ShellExecute`每个 url 一行

# uml - 如何在序列图中表示方法重用？

> ID：13643077
> 
> 赞同：1
> 
> 时间：2012-11-30T10:11:56.550
> 
> 标签：uml, sequence-diagram

需要重用类中存在的方法。如何为此创建序列图。为了详细解释，我已经成功地表示了以下场景。1\. 我调用了一个属于某个类的现有方法。当我第二次调用相同的方法时，我非常关心表示相同的方法

如何在序列图中显示方法的可重用性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:39:38.897

在序列图中多次调用相同的方法是完全可以的。

如果您有一个更复杂的可重用组件，您可以创建[交互片段](http://www.uml-diagrams.org/sequence-diagrams.html#interaction-fragment)来表示可重用部分，并通过[利用](http://www.uml-diagrams.org/sequence-diagrams.html#interaction-use).`sequence diagram(s)``UML operator ref`

# android - ASyncTask 中的 HttpGet

> ID：13643079
> 
> 赞同：0
> 
> 时间：2012-11-30T10:12:11.903
> 
> 标签：android, calendar, timezone, android-asynctask, http-get

在我的应用程序中，我有一个显示日历的活动。

除了显示基本日历（日、月、年）的事实之外，我还需要显示不同的时间，例如日出和日落......

为了获得准确的时间，我使用 Google TimeZone API 修复了 TimeZone，该 API 是一个通过经度和纬度返回 TimeZone 的 Web 服务。

谁不知道，Android避免在主线程中进行网络操作，这就是为什么我需要在其他线程中获取TimeZone，然后在UI中显示日历。

在 android 框架中，从线程更新 UI 的最佳方法是使用，`AsyncThread`但这是一个异步线程，活动在修复时区之前显示我的日历。

您如何建议我，一方面使用 AsyncTask（或其他东西）从 Web 服务获取 TimeZine，并形成 scd 端以显示适当的日历时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:24:18.303

AsyncTask 用于短期运行的后台任务。我真的建议您使用服务在 Android 上执行网络请求。

你看过[RoboSpice](https://github.com/octo-online/robospice)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:40:25.033

`onPostExecute()`在网络请求完成后设置您的日历。
我建议您使用微调器来使您的应用程序看起来不错。
在加载数据时显示您的微调器，并在 onPostExecute() 上将其关闭。

# c# - ffmpeg - 我们可以将轻量级部分加密算法应用于视频文件的 I 帧吗？

> ID：13643080
> 
> 赞同：2
> 
> 时间：2012-11-30T10:12:11.530
> 
> 标签：c#, java

非常欢迎您的建议。我想对压缩的视频文件进行部分加密。我只想加密 I 帧而不是标题。所需的输出是无法观看的视频。对于这个应用程序，我按照链接[如何覆盖视频的 i 帧？](https://stackoverflow.com/questions/2622326/how-to-overwrite-i-frames-of-a-video.(really)，感谢此链接）。如果我按照以下步骤操作是否正确：

1.  **使用ffmpeg -i filename -an -vcodec copy -f rawvideo output_filename**将 I 帧复制到文件中。我还需要音频数据。我应该删除**_an**选项来实现这一点吗？
2.  提取起始代码（链接中给出的 c++ 编码对我不起作用，但我正在尝试。首选提取起始代码的 java 编码）并加密 i-frame 数据并将其存储在一个新文件中。
3.  我不知道如何将修改后的 i-frame 数据插入到原始文件中？是否有任何 ffmpeg 命令或者我们可以使用 libavformat 和 libavcodec 编写编码？代码片段会很有帮助。

提前致谢。

# android - GridView滚动不流畅android

> ID：13643081
> 
> 赞同：0
> 
> 时间：2012-11-30T10:12:19.293
> 
> 标签：android, gridview, scroll, imageview

我有这个从 sd 卡加载图像的 gridview........问题是滚动一点都不流畅，我不知道它有什么问题......有人可以帮我解决这个问题吗??

```
private Cursor cursor;
private int columnIndex;
private GridView gridView;
ProgressDialog pd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gridView = (GridView) findViewById(R.id.gridview);

    new LoadImages().execute();

/**
 * Adapter for our image files.
 */
public class ImageAdapter extends BaseAdapter {

    private Context context;

    public ImageAdapter(Context localContext) {
        context = localContext;
    }

    public int getCount() {
        return cursor.getCount();
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView picturesView;
        if (convertView == null) {
            picturesView = new ImageView(context);
            picturesView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            picturesView.setPadding(5, 5, 5, 5);
            picturesView.setLayoutParams(new GridView.LayoutParams(80, 80));
        }
        else {
            picturesView = (ImageView)convertView;

        }

            // Move cursor to current position
            cursor.moveToPosition(position);
            // Get the current value for the requested column
            int imageID = cursor.getInt(columnIndex);
            // Set the content of the image 
           picturesView.setImageBitmap(MediaStore.Images.Thumbnails.getThumbnail(context.getContentResolver(),
                    imageID, MediaStore.Images.Thumbnails.MINI_KIND, null));

        return picturesView;
    }
} 
```

我不知道这个功能是如何作为后台任务工作的！！！！它只是工作！有什么见解？？？

```
private void LoadImagesFromSDCard(){

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));    //to update the database or rescan the database to get the captured image
    //delay given for the sdcard to reload as per the above statement
        try {
            Thread.sleep(300L);   
        }
        catch (Exception e) {}
        // Set up an array of the Thumbnail Image ID column we want
        String[] projection = {MediaStore.Images.Media._ID};
        // Create the cursor pointing to the SDCard
        cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                projection, // Which columns to return
                null,       // Return all rows
                null,
                MediaStore.Images.Media._ID);
        // Get the column index of the Media Image ID
        columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);

} 
```

这是我的异步任务...

```
class LoadImages extends AsyncTask<String, String, String> {
    ProgressDialog progDailog = new ProgressDialog(PrintBrushActivity.this);
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progDailog.setMessage("Loading.....");
        progDailog.setIndeterminate(false);
        progDailog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progDailog.show();
    }
    @Override
    protected String doInBackground(String... aurl) {
        //do something while spinning circling show
        LoadImagesFromSDCard();

        return null;
    }
    @Override
    protected void onPostExecute(String unused) {
        super.onPostExecute(unused);
        gridView.setAdapter(new ImageAdapter(PrintBrushActivity.this));
        progDailog.dismiss();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T03:06:35.917

你可以像这样使用 Android-Universal-Image-Loader-master 库

```
public View getView(int position, View convertView, ViewGroup parent) {
            ImageView picturesView;
            final ProgressBar spinner = (ProgressBar)findViewById(R.id.loading_image_fromsdcard);
            if (convertView == null) {
                picturesView = new ImageView(context);
                picturesView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                picturesView.setLayoutParams(new LayoutParams(250, 250));

            }
            else {
                picturesView = (ImageView)convertView;
            }
            // Move cursor to current position
            cursor.moveToPosition(position);
            // Get the current value for the requested column
            int imageID = cursor.getInt(columnIndex);
            // Set the content of the image based on the provided URI
            //picturesView.setImageURI(Uri.withAppendedPath( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID));
            imageLoader.displayImage(Uri.withAppendedPath( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID).toString(), picturesView, options, new SimpleImageLoadingListener() {
                @Override
                public void onLoadingStarted(String imageUri, View view) {
                    spinner.setVisibility(View.VISIBLE);
                }
                @Override
                public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
                    String message = null;
                    switch (failReason.getType()) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case DECODING_ERROR:
                            message = "Image can't be decoded";
                            break;
                        case NETWORK_DENIED:
                            message = "Downloads are denied";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }
                    Toast.makeText(Sdcard.this, message, Toast.LENGTH_SHORT).show();
                    spinner.setVisibility(View.GONE);
                }
                @Override
                public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
                    spinner.setVisibility(View.GONE);
                }
            });
            return picturesView;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T09:49:22.133

我遇到了同样的问题，我在其他帖子中看到了这个答案，我尝试了一下，效果要好得多。

[https://stackoverflow.com/a/7624088/3419242](https://stackoverflow.com/a/7624088/3419242)

简而言之，创建一个`ListView`然后以编程方式自己创建列，这样您就可以创建`GridView`. 主要问题在于`Gridview`SDK中的那个，它有点慢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:18:09.850

在我的画廊中，我使用***MediaStore.Images.Thumbnails.MICRO_KIND***而不是***MediaStore.Images.Thumbnails.MINI_KIND***。

我还使用***缓存***，也就是说，我保存加载的缩略图的 HashMap，如果我需要再次显示相同的缩略图，我会从缓存中加载它，而不是再次生成它。我的缓存是这样的：

```
cache = new HashMap<Integer, SoftReference<Bitmap>>(); 
```

在 Integer 位置保存图像 id，在 SoftReference 位置保存缩略图位图。这两件事使我的应用程序更流畅。

祝你好运！

# php - 如何在我的 sql 数据库中使用 md5() 函数

> ID：13643083
> 
> 赞同：0
> 
> 时间：2012-11-30T10:12:33.760
> 
> 标签：php, sql, md5

我的问题解决了。我不期待更多的答案。所以，请不要投反对票，因为我需要一些声誉来投票支持其他帖子。谢谢

我尝试使用`md5()`登录系统，但它不加密密码。它仍然在我的数据库上显示原始密码。这是我的代码：

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername']; 
$mypassword=md5($_POST['mypassword']); 

$sql="select * from $tbl_name where username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
header("location:login.html");
}
?> 
```

我只是将我的代码编辑为`$mypassword=md5($_POST['mypassword']);`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T10:14:33.840

**您刚刚打印了 md5d 密码，在插入之前将其存储到变量中**

```
$mypassword = md5($_POST['mypassword']);
$sql="select * from $tbl_name where username='$myusername' and password='$mypassword'";
$result=mysql_query($sql); 
```

我认为您的逻辑有问题，您是否以加密形式存储密码？那么只有您可以通过此选择命令获取数据，否则`$count=mysql_num_rows($result);`始终为零

也请看这里

**[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:15:26.393

```
SELECT MD5('testing'); 
```

例如

```
$sql="select * from $tbl_name where username='$myusername' and password=MD5($mypassword)"; 
```

在你的 sql

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T12:07:23.420

存储密码的未加盐 MD5 哈希值几乎与存储它们的明文相同。使用现成的硬件，每秒可以尝试 8 个 Giga 密码，这意味着您可以在不到一毫秒的时间内暴力破解包含大约 500,000 个单词的整个字典！

更重要的是，没有盐的 MD5 有大量预先计算的哈希表，所以只需获取您自己密码的 MD5 哈希，将其输入谷歌并查看原始密码是什么，或者最好不要这样做......

这就是为什么人们现在应该使用像**BCrypt**这样的慢速密钥派生函数。PHP 5.5 将拥有自己的功能`password_hash()`并`password_verify()`准备就绪，以简化此任务。有一个适用于 PHP 5.3/5.4 的[兼容包](https://wiki.php.net/rfc/password_hash)，可在[password_compat](https://github.com/ircmaxell/password_compat)下载。

[我会邀请您在本教程](http://www.martinstoeckli.ch/hash/en/index.php)中准备更多关于正确散列密码的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T10:13:47.083

现在您只需将加密密码回显到输出：

```
echo md5($mypassword); 
```

你想要的是分配给`$mypassword`

```
$mypassword = md5($mypassword); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T10:19:04.213

您必须转义您的字符串，以阻止 SQL 注入。至少使用`mysql_real_escape_string()`. 并且不要使用 MD5，使用 Sha1：

```
$mypassword = sha1($_POST['mypassword']);
$myusername = mysql_real_escape_string($_POST['myusername']);
$sql="select * from $tbl_name where username='$myusername' and password='$mypassword'";
$result=mysql_query($sql); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T10:53:47.310

我建议您使用`mysqli`or `PDO`。您刚刚打印了 md5d 密码，您需要将其值存储到特定变量并将该变量用于您的查询中。要做到这一点，试试这个

```
<?php 
mysql_connect("$host", "$username", "$password") or die("cannot connect"); 

mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$newpassword = md5($mypassword);

$sql="select * from $tbl_name where username='".$myusername."' and password='".$mypassword."'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1)
{
    session_register("myusername");
    session_register("mypassword"); 
    header("location:login_success.php");
}
else {
    header("location:login.html");
}
?> 
```

# .net - 奇怪的二进制格式化程序行为

> ID：13643098
> 
> 赞同：0
> 
> 时间：2012-11-30T10:13:31.510
> 
> 标签：.net, binaryformatter

我有一个带有图像数组的结构：

```
public struct ObjectImages
{

    public System.Drawing.Image[] _images;
    public ObjectImages(System.Drawing.Image[] images)
    {
          _images = images; 
    }

} 
```

如果我在对象中放入两张10kb的图像，然后尝试序列化，我发现我的内存流目标有160kb。我验证了，每张图片都有~10-11kb。

```
ObjectImages o = new ObjectImages(x); // where x is an array of images from my webcam
MemoryStream ms = new MemoryStream();
BinaryFormatter formatter = new BinaryFormatter();
formatter.Serialize(ms, o); 
```

我发现这真的很奇怪！如果您知道问题出在哪里，请告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:16:58.260

好吧，当您在硬盘上看到图像时，它会被压缩 - 例如 PNG 或 JPEG 文件。当您在 C# 中加载图像时，它会被解压缩，因此可以渲染像素。所以实际上，图像包含的字节数比存储在硬盘上的要多。

`(4 * width * height) + further data`C# 对象包含未压缩的数据，因此大致（对于 RGBA 图像） ，.NET应该需要内存中的大小。二进制格式化程序不保存*图像*（作为 PNG 或 JPEG），它保存*表示图像的对象*。

# asp.net-mvc-3 - 从视图模型列表更新模型

> ID：13643099
> 
> 赞同：1
> 
> 时间：2012-11-30T10:13:31.700
> 
> 标签：asp.net-mvc-3, model-binding

View 是这样的（我动态添加和删除文档，这里写的 Guid 是 ViewModel 的 DocumentIdentifier 成员）：

```
<div>
    <input type="hidden" name="DocumentViewModels.Index" value="8796c4e8-2262-46c0-bacc-8ffb6678b62a" />
    <input type="text" name="DocumentViewModels[8796c4e8-2262-46c0-bacc-8ffb6678b62a].Document.Name" />
    <input type="text" name="DocumentViewModels[8796c4e8-2262-46c0-bacc-8ffb6678b62a].Document.Type" />
<div>

<div>
    <input type="hidden" name="DocumentViewModels.Index" value="3f2810c6-e338-4a6a-aa64-54b162303aab" />
    <input type="text" name="DocumentViewModels[3f2810c6-e338-4a6a-aa64-54b162303aab].Document.Name" />
    <input type="text" name="DocumentViewModels[3f2810c6-e338-4a6a-aa64-54b162303aab].Document.Type" />
<div> 
```

我有这样的视图模型：

```
public class DocumentViewModel
{
    public Document Document {get;set;}
    public List<Attachments> {get;set;}
    public Guid DocumentIdentifier {get;set;}
} 
```

控制器

```
public ActionResult PostDocuments(List<DocumentViewModel> documentViewModels)
{
    // I successfully save newly added documents in database
    // Then I delete documents from database that are not in documentViewModels any more (because I dynamically add and delete them)
    // Then I find documents that are on form and in database too and I want to update them
    List<Document> matchedDocumentsFromDatabase = SynchronizeDocuments(documentViewModels.Select(x => x.Document));
    // Here i'm stuck. I want to write something like this:
    UpdateModel(matchedDocumentsFromDatabase, "DocumentViewModels");
    context.SaveChanges();
    // return something;
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:24:24.080

您可以使用如下前缀。

```
public ActionResult PostDocuments(List<DocumentViewModel> documentViewModels)
{
    // I successfully save newly added documents in database
    // Then I delete documents from database that are not in documentViewModels any more (because I dynamically add and delete them)
    // Then I find documents that are on form and in database too and I want to update them
    var matchedDocumentsFromDatabase = SynchronizeDocuments(documentViewModels.Select(x => x.Document));
    // Here i'm stuck. I want to write something like this:
    string prefix = "";
    foreach(var item in matchedDocumentsFromDatabase)
    {
       prefix = string.Format("DocumentViewModels[{0}]",item.DocumentIdentifier .ToString());
       UpdateModel(item, prefix);
    }
    context.SaveChanges();
    // return something;
} 
```

希望这会有所帮助。

# php - 如何处理服务器时间和用户本地时间的差异？

> ID：13643106
> 
> 赞同：3
> 
> 时间：2012-11-30T10:13:49.700
> 
> 标签：php, codeigniter, datetime

我正在开发针对其他国家的 Web 应用程序。

现在，为了说明我的想法，我在想这样的事情：

```
// Illustrates the current time on my server
$time = new DateTime();
echo $time->format("Y-m-d H:i:s P");

// Illustrates the current time for the time the user told my app he is in
$time = new DateTime(null, new DateTimeZone('Europe/London'));
echo $time->format("Y-m-d H:i:s P"); 
```

这个的输出是：

```
2012-11-30 11:02:40 +01:00 // My server time
2012-11-30 10:02:40 +00:00 // The users time 
```

一切都很好，因为我现在可以为用户呈现当前时间。但我需要的是获取用户输入并将其转换为我的服务器时间 - 或者至少我认为这是正确的方法。

**伦敦的一个用例**
用户告诉我的应用程序他需要在`2012-12-01 19:00:00`. 通过在我的数据库中更新此时间戳，我的 cronjob 将在指定时间执行此操作。但是我的用户会体验到这种情况`2012-12-01 18:00:00`。

在考虑解决这个问题的方法时，我正在处理一些偏移时间，这给了我很多意大利面条代码和一些混乱的数据库表设计。

我如何才能做到这一点才有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:32:16.520

您可以将`DateTime`对象的时区更改为所需的。如果您从他们的时区获得用户指定的日期时间，您可以轻松地进行转换。

```
 $time = new DateTime(null, new DateTimeZone('Europe/London'));
 echo $time->format("Y-m-d H:i:s P");

 $time->setTimezone(new DateTimeZone('America/Chicago'));
 echo $time->format("Y-m-d H:i:s P"); 
```

# c - 内核堆栈和进程切换？

> ID：13643110
> 
> 赞同：1
> 
> 时间：2012-11-30T10:14:12.217
> 
> 标签：c, linux, process, linux-kernel, scheduling

> **可能重复：**
> [上下文切换内部](https://stackoverflow.com/questions/12630214/context-switch-internals)

谁能详细解释**进程切换是如何完成的以及在内核堆栈**中复制了哪些信息。我已经读到所有进程只有一个内核堆栈，大小固定为 4/8K。

# c# - 如何访问 Windows 8 应用程序历史记录？（来自代码 c++/c#/winapi）

> ID：13643111
> 
> 赞同：2
> 
> 时间：2012-11-30T10:14:12.780
> 
> 标签：c#, winapi, visual-c++, windows-8, windows-runtime

我正在尝试访问 Windows 8 应用程序历史记录（就像新的任务管理器一样）。有谁知道如何做到这一点？我几乎可以肯定，从 WinRT 应用程序我无法访问这些数据，但我应该可以从 Win32 (winapi) 中访问这些数据（因为任务管理器会这样做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:53:19.873

[这里](https://stackoverflow.com/questions/7787038/accessing-other-processes-in-win8-metro-style-app)和[这里](https://stackoverflow.com/questions/11845828/missing-reference-to-system-diagnostics-process)讨论了一些类似的主题。不幸的是，正在运行的进程信息被故意隐藏在 WinRT 应用程序中，因为大部分 System.Diagnostics 功能已被剥离，包括 Process 类。如果需要进程信息，则需要编写一个 Win32 应用程序。System.Diagnostics.Process 是一个很好的起点。

# sphinx - 如何使用 SphinxSE 搜索 MVA？

> ID：13643114
> 
> 赞同：1
> 
> 时间：2012-11-30T10:14:18.930
> 
> 标签：sphinx, mariadb

使用**SphinxQL**搜索 MVA 相当简单：

```
SELECT * FROM s3_shop2_product
WHERE MATCH('ware 19') AND mva_field_1 = 1 AND mva_field_1 = 3; 
```

如何使用**SphinxSE**搜索 MVA ？以下查询对我不起作用：

```
SELECT ... WHERE query="ware 19;filter=mva_field_1,1;filter=mva_field_1,3"

ERROR 1429 (HY000): Unable to connect to foreign data source:
failed to connect to searchd (host=127.0.0.1, errno=111, port=33 
```

我正在使用 MariaDB 5.5.28。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:12:19.580

重新索引后，它出人意料地工作了。因此，以下**SphinxQL**查询：

```
SELECT * FROM s3_shop2_product
WHERE MATCH('@name ware 19') AND mva_field_1 IN(1,2) AND mva_field_1 = 3; 
```

在**SphinxSE**中如下所示：

```
SELECT * FROM s3_shop2_product*emphasized text*
WHERE query='@name ware 19;filter=mva_field_1,1,2;filter=mva_field_1,3'; 
```

# spring - Spring JPA 错误创建 SessionFactory -org.springframework.beans.BeanInstantiationException

> ID：13643117
> 
> 赞同：0
> 
> 时间：2012-11-30T10:14:26.560
> 
> 标签：spring, jpa, maven-3

我已经创建了一个 Spring WS，现在我想通过启用 JPA 添加一些功能 - 我是一个新手，所以我打开了一个教程并按照它所说的去做。

而且我发现我无法足够快地解决问题。当我想为我的数据库创建 SessionFactory 和 DataSource 时：

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
        <property name="url" value="jdbc:hsqldb:hsql://localhost:9001"/>
        <property name="username" value="sa"/>
        <property name="password" value=""/>
  </bean>

  <bean id="mySessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="myDataSource"/>    
  </bean> 
```

与我的 Maven 依赖项：

```
 <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>2.1.1.RELEASE</version>
        </dependency>

      <dependency>
          <groupId>commons-dbcp</groupId>
          <artifactId>commons-dbcp</artifactId>
          <version>1.4</version>
      </dependency>
      <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.2.RELEASE</version>
      </dependency> 
```

我收到以下 HTTP 500 错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

我很确定这是我的依赖项的问题。但是我尝试了这么多组合，但对我没有任何效果......有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:41:54.087

您需要将 Hibernate 添加到您的依赖项中。

请注意，您说您想要 JPA，但您的配置实际上使用了原始 Hibenate API。

如果你真的想要原始的 Hibernate API，添加

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.6.10.Final</version>
</dependency> 
```

如果您想要使用 JPA API 进行休眠，请添加

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.6.10.Final</version>
</dependency> 
```

并使用`LocalContainerEntityManagerFactoryBean`而不是`LocalSessionFactoryBean`.

您可能还想改用 Hibernate 4.x（对于原始 Hibernate API，您需要`...hibernate4.LocalSessionFactoryBean`在这种情况下使用）。

# jakarta-ee - Tomcat 7 升级

> ID：13643122
> 
> 赞同：1
> 
> 时间：2012-11-30T10:14:33.953
> 
> 标签：jakarta-ee, tomcat7

我尝试将我的 Java EE 应用程序从 Tomcat 6 升级到 Tomcat 7。在我的 PC 上一切正常（Windows XP 32 位和 32 位 JVM，JDK 1.6）。

但是当我用 32 位 JVM 配置另一台 Windows 机器时，Tomcat 启动了，但是当我尝试访问应用程序时，我得到了 404 错误。

在日志文件中，我得到以下信息：

> 在 java.library.path：C:\Program Files\Java\jdk1.6.0_21\bin 中找不到基于 APR 的 Apache Tomcat Native 库，该库允许在生产环境中获得最佳性能；

我还得到了以下内容：

> 信息：服务器在 4581 毫秒内启动，2012 年 11 月 30 日上午 11:59:25 org.apache.tomcat.util.http.Cookies processCookieHeader 信息：Cookies：cookie 无效。值不是标记或引用值 注意：进一步出现的 Cookie 错误将在 DEBUG 级别记录。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:36:43.053

APR - 只是忽略，这就是说您使用的是 java 二进制文件而不是系统本机。他们（应该）工作相同。原住民对生产很重要。

关于 cookie 错误：这对 JBoss AS 7 有帮助：[https ://issues.jboss.org/browse/AS7-1625](https://issues.jboss.org/browse/AS7-1625)

```
bin/standalone.sh -Dorg.apache.tomcat.util.http.ServerCookie.ALLOW_HTTP_SEPARATORS_IN_V0=true 
```

# java - EJB 客户端如何定位没有 url 的 EJB 服务器？

> ID：13643127
> 
> 赞同：12
> 
> 时间：2012-11-30T10:14:52.297
> 
> 标签：java, jakarta-ee, ejb, jndi

我是 Java EE 的新手。目前我正在阅读Sun Microsystems**的 The Java EE 6 Tutorial, Volume 1 (Basic Concepts Beta)**。为了摆脱单调的阅读时间，我玩了一些其他人编写的 Java EE 项目/代码。

我来自东南。我的脑海里仍然充满了 SE。在 SE（*两层*应用程序）中，我使用

`DATABASE_URL = "jdbc:mysql://something.db_server.com/db_name"`

这就是我的客户知道数据库服务器在哪里的方式。

在我看到的一个 Java EE 示例中

```
// Access JNDI Initial Context.

Properties p = new Properties();

p.put("java.naming.factory.initial","org.jnp.interfaces.NamingContextFactory");
p.put("java.naming.provider.url","jnp://localhost:1099");
p.put("java.naming.factory.url.pkgs","org.jboss.naming:org.jnp.interfaces");

InitialContext ctx = new InitialContext(p);

// Change jndi name according to your server and ejb

HelloRemote remote = (HelloRemote) ctx.lookup("HelloBean/remote");

msg = "Message From EJB --> " + remote.sayHello(); 
```

这个我明白。该代码具有 url 和端口号。有这条线

```
p.put("java.naming.provider.url","jnp://localhost:1099"); 
```

客户端通过 url 知道服务器在哪里以及要敲哪个端口。我认为代码是在 Java EE 5 时编写的。

今天我发现了另一个使用 Netbeans 7、Java EE 6 和 GlassFish 3 的示例。客户端代码

```
@EJB
private static MySessionRemote mySession;

/**
 * @param args the command line arguments
 */

public static void main(String[] args) {
    JOptionPane.showMessageDialog(null, 
            "result = " + mySession.getResult());
} 
```

这是链接 [http://netbeans.org/kb/docs/javaee/entappclient.html](http://netbeans.org/kb/docs/javaee/entappclient.html)

没有给出 url 和端口号。

**Java EE 6 Development with Netbeans 7** by David R. Heffelfinger 在第 7 章中有一个类似的例子。作者没有在书中解释它是如何完成的。我认为他做到了，但我可能错过了……</p>

我的问题是客户端如何在没有 url 的情况下定位服务器？它是否在这些 xml 文件之一中说明？客户端可以在加利福尼亚，GlassFish Server 可以在纽约。任何人都可以向我解释或指向我可以找到答案的任何教程/博客/文章吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T14:25:33.827

这里有两件事正在发生。

第一件事是在 Java EE 中没有指定获取对远程 EJB 的引用的方式。您受个别供应商认为应该如何做的摆布。

尽管 JNDI 是用于此的事实上的标准，但即使这本身也不是强制性的。

## 示例：JBoss 直到 AS7

在 JBoss AS 直到 AS 7 中，使用以下序列来获取远程引用：

```
Properties env = new Properties();
env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
env.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
env.put(Context.PROVIDER_URL, "jnp://myserver.example.com:1099");
InitialContext context = new InitialContext(env);

Bean bean = (Bean) context.lookup("myear/MyBean/remote"); 
```

在这里，远程服务器的 URL 被提供给初始上下文，并从该上下文中检索一个 bean。*（请注意，您**不能**在此处添加众所周知的“java:/”前缀，否则它将被 JNDI 拦截并在本地解析，尽管在远程上下文中进行了查找）*

由于该方法如上所述未标准化，因此单个供应商可以在不同的实现版本之间完全更改它。即使对于相同 Java EE 版本的实现也是如此。

## 示例：JBoss AS7

在 JBoss AS 7 中，JBoss 想要远离 JNDI（因为没有指定必须使用 JNDI），现在它大约以[以下方式](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)发生：

您首先需要`jboss-ejb-client.properties`使用以下上下文将文件放在类路径中：

```
endpoint.name = client-endpoint
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED = false
remote.connections = default
remote.connection.default.host = myserver.example.com
remote.connection.default.port = 4447
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS = false 
```

并使用如下代码：

```
Properties env = new Properties();
env.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
InitialContext context = new InitialContext(env);

Bean bean = (Bean) context.lookup("ejb:/myear/mymodule/MyBean!com.example.Bean"); 
```

因此，从代码看来，似乎没有给出 URL，但它静态隐藏在配置文件中。

* * *

## 应用程序客户端容器

> 今天我发现了另一个使用 Netbeans 7、Java EE 6 和 GlassFish 3 的示例。客户端代码 [...]

这是另一回事。这里展示了一个所谓的**应用程序客户端容器**（又名 ACC）。

这与上面的示例不同，其中 Java SE 应用程序使用 JNDI 联系远程服务器。Application Client Container 在 Java EE 中有点晦涩难懂。这个想法似乎是您从服务器（如 Applet 或 Java Web Start 应用程序）动态下载客户端代码，然后它神奇地“知道”它的来源。主类中对（静态）注入的支持非常有限，您可以使用它直接注入远程 bean。

Application Client Container 是 Java EE 早期的一个想法，据我所知，它从未受到太多关注。经过这么多年，它在最初的构想之后从未有过太大的进步。由于它仍然需要完成大量特定于供应商的事情，我认为大多数人不会为此烦恼，而只是使用 JNDI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:28:45.360

需要有一个`jndi.properties`包含配置数据的文件。即使客户端需要连接到与客户端在同一主机上运行的服务器，客户端也无法神奇地知道要连接的服务器 - 仍然可以有多个。

不过这个例子很奇怪——EJB 注释表明它应该在 Java EE 容器中运行，而不是作为客户端应用程序运行。

我还想指出，在客户端应用程序中调用 EJB 并不常见。它更像是一种服务器端技术。如果您想为客户端应用程序提供一个接口，那么使用它更容易和更便携，例如通过 JAX-RS 使用 RESTful Web 服务。

# c# - ajax 成功调用后打开灯箱/彩盒

> ID：13643130
> 
> 赞同：0
> 
> 时间：2012-11-30T10:14:58.293
> 
> 标签：c#, jquery, asp.net, lightbox, colorbox

我有一个对函数的 AJAX 调用，如下所示：

```
$("#<%=gridview.ClientID%> tr:has(td)").click(function(e) {
    var id = $(this).children("td:eq(3)").find(':input').val();
    $.ajax({
        type: "POST",
        url: "Docs.aspx/BtnTest",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            if (msg.d == 'Success') {
                window.open('/view.aspx?Id=' + id, '_blank');
            }
        }
    });
    e.preventDefault();
}); 
```

正如您在上面的成功代码中看到的那样，我正在使用`id`查询字符串打开另一个页面。我如何调用`Colorbox`或任何其他灯箱插件来打开它`iframe`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:22:05.797

尝试这个：

```
$.colorbox({ href: 'your link goes here', iframe:true, width:"80%", height:"80%"}); 
```

同样的问题： [将颜色框添加到具有 url 内容的动态创建的项目](https://stackoverflow.com/questions/13559065/add-colorbox-to-dynamicly-created-item-with-url-content/13560121#13560121)

# java - 如何使用谷歌任务 API？初始化任务获取任务列表等？

> ID：13643137
> 
> 赞同：0
> 
> 时间：2012-11-30T10:15:27.923
> 
> 标签：java, android, google-tasks-api, google-tasks

我想使用谷歌任务 api 并想获取任务列表、更新、删除、添加等。我找到了这个链接[https://developers.google.com/google-apps/tasks/oauth-and-tasks-on- android](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)在该链接上给出了逐步过程的地方，不推荐使用给出的库。

这就是为什么我从这里下载了最新的库**google-api-java-client-1.12.0-beta** [http://code.google.com/p/google-api-java-client/downloads/detail?name=google- api-java-client-1.12.0-beta.zip&can=2&q=](http://code.google.com/p/google-api-java-client/downloads/detail?name=google-api-java-client-1.12.0-beta.zip&can=2&q=)和**google-api-services-tasks-v1-rev5-java-1.12.0-beta**从这里[http://code.google.com/p/ google-api-java-client/wiki/APIs#Tasks_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Tasks_API)并尝试给出的代码和类似的代码，但运气不好，没有得到任何东西初始化任务并获取任务列表、创建、删除等......我没有找到与更新库相关的单个文档。

希望得到您的问候。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:49:03.853

此解决方案适用于使用 OAuth 2.0 的服务器到服务器通信 这是一个三步过程

1.  使用 OAuth 2.0 进行身份验证
2.  获取 com.google.api.services.tasks.Tasks 服务对象
3.  获取所需的Task或TaskList

在此示例代码中，它使用域 ID“abc.com”，用户为“user1@abc.com”。对于 gmail 用户，请提供 gmailid (abc@gmail.com) 作为 consumerkey，并将“xoauth_requestor_id”保留为 gmailid

```
import com.google.api.client.http.*;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.tasks.*;
import com.google.api.client.auth.oauth.OAuthHmacSigner;
import com.google.api.client.auth.oauth.OAuthParameters;

public class GoogleConnection {
public Tasks setup() throws Exception {
    com.google.api.services.tasks.Tasks tasks = null;
    HttpRequestFactory httpRequestFactory = null;
    HttpRequestInitializer httpRequestInitializer = null;
    OAuthHmacSigner signer = new OAuthHmacSigner();
    HttpTransport httpTransport = new NetHttpTransport();
    OAuthParameters oauthParameters = new OAuthParameters();
    final ArrayMap<String, Object> customKeys = new ArrayMap<String, Object>();

    customKeys.add("xoauth_requestor_id", "user1@abc.com");
    signer.clientSharedSecret = "secret_key_received_from_google";
    oauthParameters.version = "2.0";
    oauthParameters.consumerKey = "abc.com";
    oauthParameters.signer = signer;
    httpRequestFactory = createRequestFactory(httpTransport, oauthParameters, "20000", "20000");
    httpRequestInitializer = httpRequestFactory.getInitializer();

    tasks = new  com.google.api.services.tasks.Tasks.Builder(httpTransport,  new JacksonFactory(), httpRequestInitializer)
            .setTasksRequestInitializer(new TasksRequestInitializer() {
              @Override
              public void initializeTasksRequest(TasksRequest<?> request) throws IOException  {
                @SuppressWarnings("rawtypes")
                TasksRequest tasksRequest =  (TasksRequest) request;
                tasksRequest.setUnknownKeys(customKeys);
                tasksRequest.setKey("keyapi_received_from_google_by_registering_your_app");
              }
            })
            .setApplicationName("")
            .build();

    return tasks;
  }
 } 
```

从任务列表中获取任务 实例化 GoogleConnection 类

```
public List<com.google.api.services.tasks.model.Task> getTasksFromTaskList(String taskListId) throws Exception {
com.google.api.services.tasks.Tasks tasksService = googleConnection.setup();
com.google.api.services.tasks.model.Tasks result = tasksService .tasks().list(taskListId).execute();
return result.getItems(); 
```

}

# html - 响应式样式不适用于窗口大小调整

> ID：13643138
> 
> 赞同：2
> 
> 时间：2012-11-30T10:15:32.697
> 
> 标签：html, css, responsive-design

我需要设计一个响应式网站，在调整浏览器窗口大小时也能响应。

我在 head 标签中添加了以下代码：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

我已经包括了以下样式：

```
<link rel="stylesheet" type="text/css" media="screen and (min-device-width: 481px) and (max-device-width: 1500px)" href="style.css" /> 
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 480px)" href="mobile.css" /> 
```

但是，当我将浏览器窗口的宽度调整为小于 480 像素时，文档仍然使用 style.css 设置样式，而应该使用 mobile.css 设置样式

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:26:28.153

`max-device-width`指的是您的设备分辨率，而不是窗口宽度大小，`min-width`或者`max-width`看[这里](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries2.shtml)以获得更好的理解。

`device-width`当您想要定位移动设备而不是桌面小型调整大小的窗口时使用。

因此，如果您希望`mobile.css`用于屏幕分辨率宽度小于的移动设备，`481px`并且还包括桌面浏览器窗口的大小调整为小于`481px`然后替换：

```
(max-device-width: 480px) 
```

为了：

```
(max-width: 480px) 
```

在您的`mobile.css`媒体查询规则中。

# android - 无法添加窗口 - 令牌 null 不适用于应用程序

> ID：13643145
> 
> 赞同：4
> 
> 时间：2012-11-30T10:15:52.377
> 
> 标签：android, dialog, android-asynctask, spinner, layout-inflater

嗨，我试图从视图（A.xml）mainActivity 中的 AsyncTask 的 onPostExecute（）膨胀视图（B.xml）（其中有微调器）

MainActivity.class

```
protected void onPostExecute(String result) {
        LayoutInflater vi = (LayoutInflater) getApplicationContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = vi.inflate(R.layout.B, null);
        branded_spinner = (Spinner) v.findViewById(R.id.Spinner01);

        adapter_branded = new ArrayAdapter<String>(**MainActivity.this**,
                android.R.layout.simple_spinner_item, Branded);
        adapter_branded.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        branded_spinner.setAdapter(adapter_branded);                        
        branded_spinner.setOnItemSelectedListener(**MainActivity.this**); 
```

}

它适用于 4.0 及更高版本

但对于 2.3.3 我收到错误

```
11-30 15:28:55.492: E/AndroidRuntime(540): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-30 15:28:55.492: E/AndroidRuntime(540):  at android.view.ViewRoot.setView(ViewRoot.java:531)
11-30 15:28:55.492: E/AndroidRuntime(540):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
11-30 15:28:55.492: E/AndroidRuntime(540):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91) 
```

是的，我尝试使用 getApplicationContext() ，但这仍然是相同的错误

我提到

[对话框抛出“无法添加窗口 - 令牌 null 不适用于应用程序”，getApplication() 作为上下文](https://stackoverflow.com/questions/5796611/dialog-throwing-unable-to-add-window-token-null-is-not-for-an-application-wi)

[Android：ProgressDialog.show() 使用 getApplicationContext 崩溃](https://stackoverflow.com/questions/1561803/android-progressdialog-show-crashes-with-getapplicationcontext)

[Android 1.6：“android.view.WindowManager$BadTokenException：无法添加窗口——令牌 null 不适用于应用程序”](https://stackoverflow.com/questions/2634991/android-1-6-android-view-windowmanagerbadtokenexception-unable-to-add-window)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T11:23:03.313

好的，尝试为您的`vi`变量使用这样的构造函数：`LayoutInflater vi = LayoutInflater.from(YourActivityName.this);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T09:47:22.487

您只能通过 LayoutInflater.from(this);

# c# - 如何在两个进程之间交换数据？

> ID：13643146
> 
> 赞同：6
> 
> 时间：2012-11-30T10:15:55.070
> 
> 标签：c#, process, .net-3.5, inter-process-communicat

> **可能重复：**
> [C# 中的 IPC 机制 - 用法和最佳实践](https://stackoverflow.com/questions/56121/ipc-mechanisms-in-c-sharp-usage-and-best-practices)

我有两个不同的过程：`A`和`B`.

进程`A`想要向进程发送`B`一些数据（字节数组、字符串、结构等......）。所以假设`A`需要发送以下缓冲区：

```
var buffer = new byte[100].
SendToAnotherProcess(B, buffer); 
```

并且`B`需要接收这个缓冲区：

```
byte[] buffer;
ReceiveFromAnotherProcess(A, out buffer); 
```

最简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:20:43.863

您可以使用[命名管道](http://msdn.microsoft.com/en-us/library/bb546085.aspx)。如果是C#4.0及以上，还可以使用[Memory mapped file](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:18:18.867

有很多选择。举几个低级 IPC 机制：

*   命名管道
*   共享内存
*   TCP/IP 套接字

此外，还有一些更高级别的选项：

*   .NET 远程处理
*   WCF

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:18:22.020

一种常见的方法是使用文件在处理之间进行通信。

每个人都可以写入对方读取的特定文件。

您可以使用 WCF、注册表、网络接口、消息队列或进程之外的任何其他机制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:33:54.573

.net 中有一些特殊的工具：

[.Net 远程处理](http://msdn.microsoft.com/en-us/library/kwdt6w2k%28v=vs.71%29.aspx)

[WCF](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

# sql-server-2005 - 如何重新排列excel中的数据？

> ID：13643148
> 
> 赞同：0
> 
> 时间：2012-11-30T10:15:56.880
> 
> 标签：sql-server-2005

我在电子表格中有数据，我必须在 sql 中上传。问题是这些数据非常粗糙。我需要根据它们之间的关系重新排列 excel 文件中的工作表。第一张表有主数据，该表的一列将链接到另一张表中的数据。我所拥有的只是一张嵌入数据的表格。使用扩展按钮显示数据之间的关系。请告诉我如何快速重新排列这些数据？我认为这可以通过运行 sql 查询或 ssis 包来完成，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:08:52.500

您可以使用具有多个源组件（在数据流内部）的 SSIS 包来访问每个工作表。

一旦您可以看到这两个来源，您可以使用排序组件对所有关键列进行排序，然后使用 Merge Join 将两组数据组合在一起

# quickbooks - QuickBooks 用户信息

> ID：13643150
> 
> 赞同：0
> 
> 时间：2012-11-30T10:16:02.277
> 
> 标签：quickbooks

我正在 QuickBooks 中进行自定义开发，并希望检索用户信息。

我使用“AccessBooks RealTime”将架构和数据导出到 SQL Server。我已经探索了完整的数据库，但找不到任何用于保存用户信息的表。

或者，是否有任何 API 可以返回用户信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:07:54.897

没有任何 QuickBooks API 支持从 QuickBooks 中获取用户信息。因此，无论您使用何种技术，您都无法获得该数据。

# css - Internet Explorer、大表、显示：无、CSS

> ID：13643151
> 
> 赞同：0
> 
> 时间：2012-11-30T10:16:03.017
> 
> 标签：css, internet-explorer

我对 Internet Explorer（8 和 9）和大型数据表有一个非常大的性能问题。

当我加载了几百个项目时，浏览器（不仅是 Internet Explorer，还有 Chrome 和 Firefox）开始滞后很多。起初我以为是 JavaScript 的原因，但后来我意识到这是 CSS 的错。我发现`display:none`浏览器不会渲染元素，所以我进行了调整并开始在元素中分组元素并在它们在视口中不可见时隐藏它们，如下所示：

```
<tbody style="display:none"></tbody>
<tbody></tbody> 
```

Chrome 和 Firefox 的性能确实有所提高，但在 Internet Explorer 中却没有。Internet Explorer 似乎仍在渲染或尝试重新计算这些隐藏元素的样式。看起来`display:none`在 Internet Explorer 上没有什么区别。如果我不能渲染工作，我相信性能应该会提高，但我不知道如何......

另外，浏览器开始滞后于大型数据表的原因是因为每一行都有大约 50 个元素，其中也有大量的 CSS 样式。

我不知道还有什么可以尝试在 Internet Explorer 中解决此问题...

有任何想法吗？

PS：table-layout设置为fixed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:49:06.097

渲染速度还取决于您为[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)创建元素的方式，即使脚本本身执行得很快。

以我（Internet Explorer）的经验`document.write()`是创建大表的最快方法。它可以比`appendChild(document.createElement())`. 也`insertRow() & insertCell()`比创建和附加每行和单元格要快得多。`innerHTML`似乎是添加内容最慢的方法（尽管在这种情况下，它只能用于创建单元格内容，而不是表格本身）。

不幸的是，性能之间的这些差异不一定是跨浏览器的，一个浏览器使用其他方法比另一个浏览器更快地完成相同的工作......

那你能做什么？尝试将您的表格“拆分”为几个较小的表格。你说那`table-layout: fixed`是定的；你也使用`COL`和/或`COLGROUP`标签和`width`s吗？没有它们，设置`table-layout`几乎没用。或者你可以使用延迟加载；只需加载表的一小部分，并在需要时加载更多。

“示例”：我创建了一个 Internet Explorer 应用程序，该应用程序当前显示 379 个表格，其中有 6 行，每行有 8 个单元格。创建和呈现这些表只需不到 2 秒（在[Internet Explorer 9](http://en.wikipedia.org/wiki/Internet_Explorer_9)中）。但是，（我刚刚测试过）如果我将所有 2274 行创建到一个表中，渲染将需要大约 15 秒。我认为将大表拆分为更小的部分也会加快其他浏览器中的渲染速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:22:06.667

我看不到示例代码，但您可以从 DOM 中删除隐藏的元素。

因此，不仅仅是设置，而是`display:none`将它们分离`removeChild()`并存储在某个对象中，直到您需要显示它们，然后将它们插入适当的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T07:46:54.460

对于没有 Internet Explorer 11 的所有 Internet Explorer 浏览器来说，这实际上是一个问题。通常（对于所有其他浏览器）“显示：无”意味着其中的所有内容都不应该在加载时从浏览器中真正处理，但 Internet Explorer 确实如此出于某种原因。

唯一的解决方案是将其排除在 DOM 之外并渲染部分表格。

我有同样的问题。我最初有一张包含 1000 条记录的表，大多数浏览器都崩溃了（Firefox 是唯一一个处理它的）。即使它处理了初始 DOM，表格也会给人一种缓慢的拖动感觉（真的很烦人）。所以它有点无法使用。

然后我将它分成较小的表（200 条记录），从一开始就使用 select 下拉菜单和 display:none。这实际上完全解决了所有浏览器的缓慢页面拖动问题。唯一的问题仍然是 Internet Explorer 10、9、8 的初始加载缓慢（大约需要 2000 毫秒）。

不幸的是，解决这个问题的唯一方法是在加载之前专门从 DOM 中排除表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T08:14:23.127

在`display:none`我自己不被查看的元素上使用过之后，我可以向您保证，即使在 IE 中，它也会带来巨大的性能提升。

您在这里遇到的问题是浏览器必须不断地重新计算列大小，尤其是在您更改`display`属性时。

要解决此问题，请尝试添加`table-layout:fixed`到您的表格样式中。这将有效地禁用动态列宽，并在元素更改时提供更一致的查看。但是，您可能需要`width`为第一行指定 s。这应该会在所有浏览器中带来天文数字的性能提升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T08:34:37.280

为了解决重绘问题，请使用文档片段。附加到文档片段的子项不会被渲染，也不会导致您看到的问题。然后，您可以将片段本身插入到表中：

```
var docFrag = document.createDocumentFragment();

// The following is pseudo code, but you get the picture
for (var i = 0; i < largeCount; i++) {
    var row = createRow();
    docFrag.appendChild(row);
}

// Append the fragment to the table (or even tbody)
var tbl = document.getElementById('myTbl');
tbl.appendChild(docFrag); 
```

文档片段本身不会呈现为任何内容，它基本上是一个容器元素，充当占位符并在您将其插入某些内容后消失。

编辑：可以在[这里](http://reference.sitepoint.com/javascript/DocumentFragment)找到更多信息。

# c# - 从单选按钮选择重定向到页面

> ID：13643154
> 
> 赞同：0
> 
> 时间：2012-11-30T10:16:15.543
> 
> 标签：c#, asp.net, redirect, radiobuttonlist

我正在创建多个页面，其中第一页由 2 个`radiobuttonlist`具有值**admin**和**customer**组成。现在，在用户选择这两个选项中的任何一个后，页面将被重定向到一个`login.aspx`页面，用户必须在其中输入**id**和**password**。身份验证后，我希望根据单选按钮上的选择将用户重定向到不同的页面。

例如。在选择 admin 时，我希望将用户重定向到 page `abc.aspx`，而如果选择是 customer，则应将其重定向到 page `efg.aspx`。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:40:57.240

是的当然。这是您可以实现的将`radio button`选择存储到某个 cookie 中以便稍后与身份验证 HTTP 请求一起发送的内容。

一旦用户通过身份验证，只需读取整个 cookie 并重定向到所需的页面。

例如：

```
string virtualPath = null;

switch(HttpContext.Current.Request.Cookies["UserRole"].Value)
{
      case "Admin":
           virtualPath = "~/admin.aspx";
           break;

      case "RegularUser"
           virtualPath = "~/user.aspx";
           break;
}

HttpContext.Current.Response.Redirect(virtualPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:22:45.730

您是否尝试过将回发结果从 保存`radiobuttonlist`到会话变量，当他们登录时，使用会话变量中的值根据需要引导他们。

如果会话不是一个选项，您还可以将值放入登录页面上的隐藏字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:23:40.493

在重定向到登录页面之前，您可以在单选按钮选择的查询字符串上附加一些内容。然后登录页面可以根据查询字符串参数的值进行重定向。

# c# - 如何在代码中或使用报告服务本身动态重命名导出的报告？

> ID：13643157
> 
> 赞同：2
> 
> 时间：2012-11-30T10:16:37.883
> 
> 标签：c#, reporting-services, reportviewer

我试图用谷歌搜索我的问题，但我没有找到任何关于我的问题的信息。

当我使用 ReportViewer 导出报告时，我想从 Reporting Services 动态重命名报告。基本上，格式将是`reportName + timestamp`.

有没有使用 C# 或 Reporting Services 本身来做到这一点？

以下是我在我的页面上包含 reportviewer 的方式：

```
<rsweb:ReportViewer ID="rv" runat="server" ShowToolBar="true" ShowParameterPrompts="false"
    BackColor="#F0F8FF" Height="1200px" Width="100%" ProcessingMode="Remote" EnableViewState="true"
    Visible="false" SizeToReportContent="True">
    <LocalReport EnableExternalImages="True">
    </LocalReport>
</rsweb:ReportViewer> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-07T01:48:21.877

@Devester - 非常感谢您发布解决您自己问题的方法。我们对此表示赞赏，并使我们其他人更容易！

因此，从您的领导来看，我发现在我使用本地报告（即没有报告服务）的解决方案中，这是我需要添加的唯一一行，以从通常导出为 PDF 的“MyReport.rdlc”更改为“MyReport” .pdf”转换为其他内容：

```
this.rptViewer.LocalReport.DisplayName = _reportName +"_"+ DateTime.Now.ToString("yyyyMMdd HH:mm");
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:13:51.097

我用一个简单的方法解决了这个问题，我希望能够用下面的代码帮助别人：

```
 protected void btnCreate_Click(object sender, System.EventArgs e)
    {
        if (ddlExportFormat.SelectedIndex != 0)
        {
            ExportReport(ddlExportFormat.SelectedValue);
            btnShow_Click(sender, e);
        }
    }

    private void ExportReport(String format)
    {
        // Variables
        Warning[] warnings;
        string[] streamIds;
        string mimeType = string.Empty;
        string encoding = string.Empty;
        string extension = string.Empty;

        string fileName = _reportName +"_"+ DateTime.Now.ToString("yyyyMMdd HH:mm"); 

        // Setup the report viewer object and get the array of bytes
        ReportViewer viewer = new ReportViewer();
        viewer.ProcessingMode = ProcessingMode.Local;

        viewer.ServerReport.ReportServerUrl = new System.Uri(_reportServerUrl);
        viewer.ServerReport.ReportPath = _reportPath;

        if (this.PrepareReportParameters())
        {
            viewer.ServerReport.SetParameters(lstReportParameters);
        }

        byte[] bytes = viewer.ServerReport.Render(format, null, out mimeType, out encoding, out extension, out streamIds, out warnings);

        // Now that you have all the bytes representing the PDF report, buffer it and send it to the client.
        Response.Buffer = true;
        Response.Clear();
        Response.ContentType = mimeType;
        Response.AddHeader("content-disposition", "attachment; filename=" + fileName + "." + extension);
        Response.BinaryWrite(bytes); // create the file
        Response.Flush(); // send it to the client to download
    } 
```

归功于[http://beta.codeproject.com/Questions/277989/How-to-export-rdlc-report-to-PDF-without-using-Rep](http://beta.codeproject.com/Questions/277989/How-to-export-rdlc-report-to-PDF-without-using-Rep)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T06:05:56.540

它只是一行代码 RptViewer.ServerReport.DisplayName = "Your File Name Goes Here";

# c# - 如何在 linq 中对非字符串字段使用过滤器？

> ID：13643158
> 
> 赞同：4
> 
> 时间：2012-11-30T10:16:45.233
> 
> 标签：c#, linq, entity-framework

我在我的 mvc 应用程序中使用 jquery 数据表插件。过滤对字符串数据类型的字段非常有效。但我不能在不先枚举结果的情况下对非字符串字段使用过滤。这是我的代码。

```
 public  List<MerchAgreementMain> getAgreementbyAccountNo(jQueryDataTableParamModel model)
    {
        var entity = new CCMSEntities();
        var query = (from _first in entity.First
                     from _second in entity.Second
                     where _first.No == _second.No 
        select new MerchAgreementMain
                     {
                         AcctNo = _Account.AcctNo,   // datatype long
                         BusnName = _Account.BusnName,
                         CreatedBy = _Account.CreatedBy,  
                         CreationDate = _Account.CreationDate ?? DateTime.MinValue,  
                         Status = _Reflib.Descp
                     });
        if (model.sSearch != null)
        {
            var x = query.AsEnumerable().Where(p => Convert.ToString(p.AcctNo).Contains(model.sSearch) || p.BusnName.Contains(model.sSearch) || p.CreatedBy.Contains(model.sSearch)||
                p.Status.Contains(model.sSearch));
          this.displayRecods = x.Count();
           return x.ToList();
        }
        //var result = query.ToPagedList(Convert.ToInt16(model.sEcho),Convert.ToInt16(model.iDisplayLength));
        return query.ToList();
    } 
```

这很好用。但问题是在应用过滤器之前先枚举查询，并且数据库包含数千条记录；这似乎是一种不好的做法，并且在显示过滤结果之前可能需要一些延迟。如何在 Iqueryable 中长时间应用过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:18:50.627

代替

```
query.AsEnumerable().Where(.... 
```

直接应用过滤器。

```
query.Where( 
```

请参阅：[就 LINQ to SQL 查询而言，IQueryable 与 IEnumerable](http://www.codeproject.com/Articles/231163/IQueryable-Vs-IEnumerable-in-terms-of-LINQ-to-SQL)

由于您正在执行`AsEnumerable`查询，因此首先迭代然后应用过滤器。如果您在没有应用过滤器的情况下应用`AsEnumerable`该查询`IQueryable`，那么它只会在遍历结果集时应用过滤器。

# json - 错误：javax.ws.rs.WebApplicationException：com.sun.jersey.api.MessageException：

> ID：13643159
> 
> 赞同：1
> 
> 时间：2012-11-30T10:16:49.967
> 
> 标签：json, spring

我将列表值传递给 json 它得到了异常

```
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class [Lcom.bean.Area;, and Java type class [Lcom.bean.Area;, and MIME media type application/octet-stream was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class [Lcom.bean.Area;, and Java type class [Lcom.bean.Area;, and MIME media type application/octet-stream was not found
    ... 24 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T10:19:33.570

您需要在 POM.xml 文件中添加以下依赖项，它将添加 JSON 序列化。

```
<dependency>
  <groupId>com.owlike</groupId>
  <artifactId>genson</artifactId>
  <version>0.98</version>
</dependency> 
```

有关更多详细信息，请参阅[此](https://code.google.com/p/genson/)内容。

# java - 如何在android中编译java代码

> ID：13643160
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:16:49.617
> 
> 标签：java, android, linux

> **可能重复：**
> [将字符串转换为代码](https://stackoverflow.com/questions/935175/convert-string-to-code)

我需要评估一个包含有效 Java 代码的字符串

例如。我应该能够`6`从`String code="Math.abs(2*3);";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:41:26.080

这听起来是一个很有趣的想法，请问您的应用程序的目的是什么？

最好的办法是建立一个你将支持的已知模式的字典。

我的第一个想法是你应该创建一个接受模式的**ArrayList**。例如：

```
ArrayList<String> acceptedPatterns = new ArrayList<String>();
acceptedPatterns.add("math.abs");
acceptedPatterns.add("math.acos"); 
```

等等

然后，您可以在掌握该字符串时评估此列表。

```
String foundPattern = null;
String myStringFromInput = editText.getText();
for (String pattern : acceptedPatterns){
  if (myStringFromInput.contains(pattern){
     // we have recognised a java method, flag this up
     foundPattern = pattern;
     break;
  }
} 
```

此时，您的**foundPattern**变量中将包含“Math.abs”。

然后，您可以使用您对该方法如何工作的知识来计算它。我想不出一种超级有效的方法，但至少能让你继续前进的基本方法就像一个大的 if/else 语句：

```
int result = 0;
if (foundPattern.contains("Math.abs"){
   result = computeMathAbs(myStringFromInput);
}else if (foundPattern.contains("Math.acos"){
   // etc
} 
```

然后在您的**computeMathAbs**方法中，您将执行以下操作：

```
private int computeMathAbs(String input){
   int indexOfBracket = input.indexOf("(");
   int indexOfCloseBracket = input.indexOf(")");
   String value = input.subString(indexOfBracket,indexOfCloseBracket);
   int valueInt = computeFromString(value);
   int result = Math.abs(valueInt);
   return result;
} 
```

然后，您可以显示传回的结果。

computeFromString **()**方法将做类似的事情，寻找 * 符号或其他符号并将其转换为类似于 abs 示例的乘法。

显然这是一个基本示例，因此您一次只能计算一个 java 方法，我认为一次多个方法的复杂性很难编程。

您还需要进行相当多的错误处理，并认识到用户可能无法输入完美的 java.lang. 蠕虫罐头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:32:23.020

您可以使用`Groovy` [http://groovy.codehaus.org/api/groovy/util/Eval.html](http://groovy.codehaus.org/api/groovy/util/Eval.html)

```
import groovy.util.Eval;

... 

    HashMap<String, Object> params = new HashMap<String, Object>();
    params.put("a", 2);
    params.put("b", 3);

    Integer res = (Integer) Eval.me("param", params, "Math.abs(param.a * param.b)");

    System.out.println("res with params = " + res);

    System.out.println("res without params = " + Eval.me("Math.abs(2*3)")); 
```

# java - 内容刷新后 Richfaces 页面未加载样式

> ID：13643166
> 
> 赞同：1
> 
> 时间：2012-11-30T10:17:01.910
> 
> 标签：java, ajax, jsf-2, richfaces

我是richfaces的新手，刚刚开始了一个简单的测试。

我创建了一个模板文件overview.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:rich="http://richfaces.org/rich"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:a4j="http://richfaces.org/a4j">
<h:head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <h:outputStylesheet library="css" name="default.css" />
 <h:outputStylesheet library="css" name="cssLayout.css" />
 <title>Facelets Template</title>
</h:head>
<h:body>
 <h:form>
  <div id="top" class="top">
   <h:graphicImage value="#{resource['images:banner.jpg']}" />
  </div>
  <div>
   <div id="left">
    <ui:include src="navigationMenu.xhtml" />
   </div>
   <div id="center_content" class="left_content">
            <h:panelGroup id="centerContentDiv" layout="block">
                <ui:insert name="center_content" />
            </h:panelGroup>
        </div>
  </div>
 </h:form>
</h:body>
</html> 
```

导航菜单.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>
<ui:composition 
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:rich="http://richfaces.org/rich"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:a4j="http://richfaces.org/a4j">
<h:form id="navigationFormId">
        <rich:collapsiblePanel id="carrierCollapsibleId" header="Application

" switchType="client">
            <h:commandLink  id="linkId3" action="/welcomeRichfaces" value="Welcome Richfaces

">
                <a4j:ajax execute="@form" render=":centerContentDiv,:centerForm" />                    
            </h:commandLink>
</rich:collapsiblePanel>
</h:form>
</ui:composition> 
```

和 index.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns="http://www.w3.org/1999/xhtml"
 template="/templates/overview.xhtml"
 xmlns:rich="http://richfaces.org/rich"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:c="http://java.sun.com/jstl/core">
     <ui:define name="center_content">                                
            <h:form id="centerForm">
               <!-- put your components in here -->    
                </h:form>
        </ui:define>

</ui:composition> 
```

欢迎Richfaces.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns="http://www.w3.org/1999/xhtml"
 template="/templates/overview.xhtml"
 xmlns:rich="http://richfaces.org/rich"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:c="http://java.sun.com/jstl/core">
 <ui:define name="center_content">
  <h:form id="centerForm">
   <!-- put your components in here -->
   <rich:panel header="Welcome to Richfaces">
            RichFaces is an advanced UI component framework for easily integrating Ajax capabilities into business applications using JSF.  Check out the links below to lear more about using RichFaces in your application.
            <ul>
     <li><h:outputLink value="Richfaces" _mce_href="http://richfaces.org">Richfaces>http://richfaces.org>Richfaces Project Home Page</h:outputLink></li>
     <li><h:outputLink value="Richfaces" _mce_href="http://showcase.richfaces.org">Richfaces>http://showcase.richfaces.org>Richfaces Showcase</h:outputLink></li>
     <li><h:outputLink
       value="User" _mce_href="https://community.jboss.org/en/richfaces?view=discussions">User>https://community.jboss.org/en/richfaces?view=discussions>User Forum</h:outputLink></li>
     <li><h:outputLink value="Richfaces" _mce_href="http://www.jboss.org/richfaces/docs">Richfaces>http://www.jboss.org/richfaces/docs>Richfaces documentation...</h:outputLink>
      <ul>
       <li><h:outputLink
         value="Development" _mce_href="http://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html_single/">Development>http://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html_single/>Development Guide</h:outputLink></li>
       <li><h:outputLink
         value="Component" _mce_href="http://docs.jboss.org/richfaces/latest_4_X/Component_Reference/en-US/html/">Component>http://docs.jboss.org/richfaces/latest_4_X/Component_Reference/en-US/html/>Component Reference</h:outputLink></li>
       <li><h:outputLink
         value="Tag" _mce_href="http://docs.jboss.org/richfaces/latest_4_X/vdldoc/">Tag>http://docs.jboss.org/richfaces/latest_4_X/vdldoc/>Tag Library Docs</h:outputLink></li>
      </ul></li>
    </ul>
   </rich:panel>
  </h:form>
 </ui:define>
</ui:composition> 
```

索引看起来应该，但是当我单击侧面的链接时，内容会被替换，但是像面板这样的 Richfaces 组件的样式不会出现在页面中，即使我在 web.xml 中使用也是如此

```
<context-param>
     <param-name>org.richfaces.LoadStyleStrategy</param-name>
     <param-value>ALL</param-value>
 </context-param> 
```

# python - 使用 setuptools 更改默认 dist 文件夹

> ID：13643167
> 
> 赞同：24
> 
> 时间：2012-11-30T10:17:05.700
> 
> 标签：python, directory, packaging, setuptools

我正在使用`setuptools`0.6 来打包我的代码。默认情况下，当我键入时`python setup.py sdist`，该工具会直接在我的脚本的同一文件夹中创建一个文件夹 dist。我可以做些什么来更改这个默认文件夹？编辑：另一个问题是，如果我的安装脚本和我的包文件夹不在同一个文件夹中，我该怎么做才能指定包的确切路径？谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-30T10:24:30.190

使用该`--dist-dir=[differentdir]`选项。来自`python setup.py sdist --help`：

> ```
>  --dist-dir (-d)   directory to put the source distribution archive(s) in
>                     [default: dist] 
> ```

`package_dir`您可以使用以下关键字参数指定顶级包目录`setup()`：

```
package_dir = {'': 'src'}, 
```

我可以推荐[Python Packaging User Guide](https://packaging.python.org/en/latest/)以获得关于如何打包 Python 项目的好教程。

# java - 调度方法以递归方式执行并终止该方法

> ID：13643171
> 
> 赞同：0
> 
> 时间：2012-11-30T10:17:25.087
> 
> 标签：java

我有一个方法将在连续间隔后重复调用。我用过`public void schedule(TimerTask task, Date firstTime, long period)`。如何在特定时间后停止调用此调度方法。

现在我不知道如何停止这种方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:20:55.027

你可以安排取消。例如，使用 ScheduledExecutor，它可能如下所示：

```
 ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(2);
    Runnable yourRecurrentTask = ...; //your recurrent task
    //run every seconds
    final ScheduledFuture<?> future = scheduler.
            scheduleAtFixedRate(yourRecurrentTask, 0, 1, TimeUnit.SECONDS);
    Runnable cancelTask = new Runnable() {
        @Override
        public void run() {
            future.cancel(true);
        }
    };
    //cancel the reccurent task in 15 seconds
    scheduler.schedule(cancelTask, 15, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:19:15.387

你不能在给定时间后停止计时器吗？您可以使用另一个计时器，它只会触发一次并停止另一个计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:19:58.163

安排另一个任务，该任务包含对您现有的引用`TimerTask`并调用`cancel`它。您应该将此任务安排为一次性计划，不得重复。

# c# - 必须先调用 SignalR 控制台应用程序启动，然后才能发送数据

> ID：13643173
> 
> 赞同：4
> 
> 时间：2012-11-30T10:17:27.240
> 
> 标签：c#, asp.net-mvc, signalr

我正在尝试创建一个客户端信号器应用程序。目前，我能够让我的 MVC 客户端向集线器发送消息和从集线器发送消息，但是，我的 .NET 客户端应用程序遇到了一些困难

服务器集线器代码：

```
namespace ServerHub
{
    public class ChatterBox : Hub
    {

        public void Send(string message)
        {
            Clients.All.addMessage(message);
        }
    }
} 
```

控制台 App 代码（几乎是直接从 github 提取的）

```
using Microsoft.AspNet.SignalR.Client.Hubs;
using ServerHub;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
          Say("hello from console");
        }
        public static void Say(string message)
        {
            //var connection = new HubConnection("http://localhost/");

            //IHubProxy myHub = connection.CreateHubProxy("ChatterBox");

            var connection = new HubConnection("http://localhost/");
            //Make proxy to hub based on hub name on server
            var myHub = connection.CreateHubProxy("ChatterBox");
            //Start connection
            connection.Start().ContinueWith(task =>
            {
                if (task.IsFaulted)
                {
                    Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
                }
                else
                {
                    Console.WriteLine("Success! Connected with client connection id {0}", connection.ConnectionId);
                    // Do more stuff here
                }
            });

            connection.Send("Hello").ContinueWith(task =>
            {
                if (task.IsFaulted)
                {
                    Console.WriteLine("Send failed {0}", task.Exception.GetBaseException());
                }
                else
                {
                    Console.WriteLine("Success");
                }
            });
        }
    }
} 
```

我在下面收到错误消息`connection.Send()`

> 必须在发送数据之前调用 Start。

我哪里做错了？

编辑：

第二次尝试：

```
 var connection = new HubConnection("http://localhost/");
    //Make proxy to hub based on hub name on server
    var myHub = connection.CreateHubProxy("ChatterBox");
    //Start connection
    connection.Start().ContinueWith(task =>
        {
            if (task.IsFaulted)
            {
                Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
            }
            else
            {
                Console.WriteLine("Success! Connected with client connection id {0}",
                                  connection.ConnectionId);

                // Do more stuff here

                connection.Send("Hello");
            }
        });

    myHub.Invoke("Send", "lol"); 
```

仍然给我一个错误

编辑：第三次尝试

```
 var connection = new HubConnection("http://localhost:60610/");
            //Make proxy to hub based on hub name on server
            var myHub = connection.CreateHubProxy("ChatterBox");
            //Start connection
            connection.Start().ContinueWith(task =>
            {
                if (task.IsFaulted)
                {
                    Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
                }
                else
                {
                    //Console.WriteLine("Success! Connected with client connection id {0}", connection.ConnectionId);

                    myHub.Invoke("Send", "lol");
                }
            }); 
```

似乎在工作

我还需要设置端口号 - 例如，如果我像这样浏览我的 MVC 网站：`http://localhost:60610/`，这是我需要在控制台应用程序中设置的地址。

我可以说在部署期间，它不会成为问题，因为默认情况下它将是端口 80？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:26:42.030

阅读此[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

TL;DR Start 是异步的，这不是您编写顺序异步代码的方式：

```
 var connection = new HubConnection("http://localhost/");
    //Make proxy to hub based on hub name on server
    var myHub = connection.CreateHubProxy("ChatterBox");
    //Start connection
    connection.Start().ContinueWith(task =>
    {
        if (task.IsFaulted)
        {
            Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
        }
        else
        {
            Console.WriteLine("Success! Connected with client connection id {0}", connection.ConnectionId);

            // Do more stuff here

            connection.Send("Hello").ContinueWith(task =>
            {
                 .......
            });
        }
    }); 
```

如果您可以使用 .NET 4.5，它会让您的生活更轻松：

```
var connection = new HubConnection("http://localhost/");
//Make proxy to hub based on hub name on server
var myHub = connection.CreateHubProxy("ChatterBox");
//Start connection
try 
{
    await connection.Start();
    Console.WriteLine("Success! Connected with client connection id {0}", connection.ConnectionId);
}
catch(Exception ex) 
{
    Console.WriteLine("Failed to start: {0}", ex.GetBaseException());
}

await connection.Send("Hello"); 
```

更新：让我们再试一次。下面的代码将起作用，但您应该真正阅读该链接以了解如何编写异步代码。否则，您将一遍又一遍地遇到这些问题。

```
var connection = new HubConnection("http://localhost/");
//Make proxy to hub based on hub name on server
var myHub = connection.CreateHubProxy("ChatterBox");
//Start connection
connection.Start().ContinueWith(task =>
    {
        if (task.IsFaulted)
        {
            Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
        }
        else
        {
            Console.WriteLine("Success! Connected with client connection id {0}",
                              connection.ConnectionId);

            myHub.Invoke("Send", "lol");
        }
    }); 
```

# angularjs - 页面只有在打开控制台后才能在 IE9 中正常工作。为什么？

> ID：13643174
> 
> 赞同：3
> 
> 时间：2012-11-30T10:17:37.760
> 
> 标签：angularjs, debugging, browser, internet-explorer-9, console.log

我有一个使用 AngularJS 编写的网页。当我使用 IE9 打开它时，顶部菜单的模板根本没有执行。但是，当我在 IE9 中打开开发人员控制台并重新加载时，一切突然开始正常工作，即使我关闭控制台也能继续工作。

可能是因为一些“聪明”的 IE9 优化，在控制台打开时被禁用？

有没有人遇到过同样的问题？

有什么我可以做的吗？调试它似乎是不可能的，因为当我调试它时它可以正常工作......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T11:16:30.070

这可能是因为您`console.log`在代码中的某处使用了在控制台不活动时引发错误的地方。

# c# - 从表（数据库）C# 创建/显示 DataGrid

> ID：13643179
> 
> 赞同：0
> 
> 时间：2012-11-30T10:17:46.120
> 
> 标签：c#, sql, database, datagrid, windows-mobile

我正在尝试在 C# 中显示一个 DataGrid（适用于应用程序 WindowsMo​​bile）。我在 DataConnections 中有一个数据库（“pruebaDB.sdf”）和一个表（“tablaMercancia”）。

同样在数据源中，我有“pruebaDBDataSet”和“tablaMercancia”。

如何在 DataGrid 中显示数据表？

我使用 SmartDevice 项目（我不能使用 DataGridView，只有我使用 DataGrid）。

我可以在 DataGrid 中显示一个新表（为代码创建），但我不知道在我的数据库中显示一个现有表。

```
string conSTR = "Data Source=" + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)) + "\\pruebaDB.sdf;Persist Security Info=False";

SqlCeConnection connection = new SqlCeConnection(conSTR);

string sql = "SELECT * FROM tablaMercancia";
connection.Open();

SqlCeCommand cmd = new SqlCeCommand(sql, connection);
SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);

//...............
//...Any idea?
//...............

connection.Close(); 
```

请问有什么想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:29:31.493

请按以下方式更改 Datagridview 名称：

```
 string conSTR = "Data Source=" + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)) + "\\pruebaDB.sdf;Persist Security Info=False";

    SqlCeConnection connection = new SqlCeConnection(conSTR);

    string sql = "SELECT * FROM tablaMercancia";
    connection.Open();

    SqlCeCommand cmd = new SqlCeCommand(sql, connection);
    SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
    DataSet ds=new DataSet();
    da.Fill(ds);

    //datagridview1 is name of datagridview in form:
    datagridview1.DataSource=ds.Tables[0];

    connection.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:50:58.913

试试这个。

```
string sql = "SELECT * FROM tablaMercancia";
connection.Open();
//SqlCeCommand cmd = new SqlCeCommand(sql, connection);
SqlCeDataAdapter da = new SqlCeDataAdapter(sql, connection);
DataSet ds=new DataSet();
da.Fill(ds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:29:33.600

设计页面跟踪gridview或数据网格

第一次使用命名空间`using System.Data,SqlClient;`

```
sqlconnection con=new sqlconnection("string path");
con.open();
sqldataadapter da=new sqldataadapter("select * from emp",con);
dataset ds=new dataset();
da.fill(ds,"emp");
gridview1.datasource=ds;
gridview1.databind(); 
```

# c# - 将 JsObject 转换为 TypeScript 对象

> ID：13643180
> 
> 赞同：1
> 
> 时间：2012-11-30T10:17:51.467
> 
> 标签：c#, typescript

我必须将`C#`应用程序翻译成`TypeScript`. 它进展顺利，但我有一个问题：

```
private SharpKit.JavaScript.JsObject<JsString, JsBoolean> _changedLayers = new SharpKit.JavaScript.JsObject<JsString, JsBoolean>(); 
```

有谁知道如何转换这个？

**[编辑]**
好的，我想我应该这样做：

```
private _changedLayers: (String, Boolean) => Object; 
```

但是现在我想知道如何初始化这个对象？我试过这个，但不起作用......

```
this._changedLayers = { String: new String(), Boolean: new Boolean() }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:38:35.047

```
var _changedLayers : { [key: string]: bool; } = {};

_changedLayers['foo'] = true; // ok
_changedLayers[1] = true; // error
_changedLayers['bar'] = 'abc'; // error 
```

您还可以定义一个接口：

```
interface StringToBoolMap {
    [key: string]: bool;
}

var _changedLayers : StringToBoolMap = {}; 
```

# sql - 更新一列中的多个值

> ID：13643181
> 
> 赞同：2
> 
> 时间：2012-11-30T10:17:54.187
> 
> 标签：sql, sql-update

我编写了以下 SQL 来更新表值：

```
Update Table
SET S_Type = 'Versus'
Where S_Type = 'REGULAR'
SET S_Type = 'Free'
Where S_Type = 'CASH'; 
```

我的 SQL 相当生疏，我的同事告诉我它出了点问题，但没有告诉我是什么！

唯一想到的是我没有提到 set 和 Where 代码中的 Table.Column。

像这样更新列有什么问题吗？为多个值更新列时的最佳做法是什么？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:27:26.140

在这里，我们使用 case 语句并找到类似 where 子句的结果：

```
update tablename
set S_Type = (case S_Type  when 'REGULAR' then 'Versus'
                           when 'CASH' then 'free' 
                           else s_type 
                           end) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:21:39.567

```
Update YourTable
set S_Type = 
    case S_Type 
        when 'REGULAR' then 'Versus'
        when 'CASH' then 'free' 
        else s_type 
        end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:05:02.970

你在使用 SQL Server 吗？如果您使用的是 2012，您现在可以使用新的 CHOOSE 或 IIF 功能编写简化的条件更新语句，例如：

```
Update YourTable
set S_Type = IIF(S_Type = 'REGULAR', 'Versus', 'free') 
```

我的两便士值。

# mono - MonoDevelop - SmartAssembly 的错误

> ID：13643183
> 
> 赞同：0
> 
> 时间：2012-11-30T10:17:57.837
> 
> 标签：mono, monodevelop, smartassembly

我用 msbuild 构建了我的 dll（.NET4），并用 SmartAssembly 5.5 进行了混淆。

之后，我在 Mac（10.8）上的 MonoDevelop（最新）中为简单的控制台应用程序设置了它们。

构建好，但是当我运行那个简单的应用程序时，我收到一条消息：未知堆类型：SmartAssembly

我询问了 SA 支持，但还没有运气（saproj 已检查项目 blabla（支持 Mono）。

我看不到如何附加屏幕截图，但是，当我运行我的应用程序时，我在控制台中看到该消息两次。它出现在程序在第一行代码的断点处停止之前。

所以也许有人知道在 SmartAssembly 或 MonoDevelop 中要改变什么来消除这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:49:09.317

许多 .NET 混淆器会更改程序集，使其在技术上不是正确的程序集（它们不属于 .NET 程序集规范），但通过利用特定于 Microsoft 实现的错误，它们仍然可以在 Microsoft .NET 运行时运行。我怀疑他们这样做是为了让程序集阅读器工具/库更难加载程序集。不幸的是，这也阻止了 Mono 运行时加载程序集。一般来说，Mono[的政策](http://www.mono-project.com/Release_Notes_Mono_2.8#Improved_Support_for_obfuscated_assemblies)是不“修复”对这种无效混淆代码的支持，因此您需要向 SmartAssembly 支持寻求帮助。

如果您确定您正在使用 SmartAssembly 的“严格有效”选项进行编译并且它不起作用，也许您可​​以尝试他们的“基本”选项。

# iphone - 滑动以删除由按钮替换的操作

> ID：13643184
> 
> 赞同：0
> 
> 时间：2012-11-30T10:18:00.193
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [通过单击按钮替换滑动操作以删除](https://stackoverflow.com/questions/13641362/replace-action-of-swipe-to-delete-by-clicking-on-a-button)

我有以下代码。

```
- (void) tableView: (UITableView *) tableView commitEditingStyle: (UITableViewCellEditingStyle) editingStyle forRowAtIndexPath: (NSIndexPath *) indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [appointments removeObjectAtIndex: indexPath.row];  // manipulate your data structure.
        [tableView deleteRowsAtIndexPaths: [NSArray arrayWithObject: indexPath]
                         withRowAnimation: UITableViewRowAnimationFade];
       NSLog(@"row deleted");  // Do whatever other UI updating you need to do.
    }
} 
```

当我在单元格上滑动时，将执行这段代码。但我想要的是当我在自定义表格视图单元格中按下按钮时执行此代码。就像您在下面的屏幕截图中看到的那样，我的 tableview 上有 2 个按钮。

![在此处输入图像描述](../Images/4bcb4080ac6337b6d1b5add59f50558e.png)

当用户按下“X”按钮时，删除按钮应该像滑动单元格时一样展开。我的单元格附加了以下操作。

```
-(IBAction) deleteAppointment:(id) sender{
   //show swipe delete button
} 
```

并通过以下方式将其附加到我的 cellForRowAtIndex 中。

```
cell.deleteAppointment.tag = indexPath.row;
[cell.deleteAppointment addTarget:self action:@selector(deleteAppointment:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:25:23.130

只需在您的单元格中添加带有按钮的目标并将标签设置为每个按钮，如下所示..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    /////your code
    UIButton *btnClose = [[UIButton alloc]initWithFrame:CGRectMake(270, 7, 20, 20)];
    btnClose.tag = indexPath.row;
    [btnClose setImage:[UIImage imageNamed:@"closeImage.png"] forState:UIControlStateNormal];
    [btnClose addTarget:self action:@selector(deleteAppointment:) forControlEvents:UIControlStateNormal];
    [cell addSubview:btnClose];
    return cell;
} 
```

在方法中看到这样......

```
 - (IBAction)deleteAppointment:(id)sender {

            // here bellow code for swipe the close button in cell
            UIButton *btn = (UIButton *)sender;
            int SelectedRowNo = btn.tag;
            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.3];
            [btn setFrame:CGRectMake(btn.frame.origin.x - 50, btn.frame.origin.y, btn.frame.size.width, btn.frame.size.height)];
            [UIView commitAnimations];

            //// here bellow code for delete raw from table
            /*
             [appointments removeObjectAtIndex: SelectedRowNo];
             UITableViewCell *clickedCell = (UITableViewCell *)[[sender superview] superview];
             NSIndexPath *clickedButtonPath = [yourTableView indexPathForCell:clickedCell];
             [yourTableView deleteRowsAtIndexPaths: [NSArray arrayWithObject: clickedButtonPath]
             withRowAnimation: UITableViewRowAnimationFade];
             NSLog(@"row deleted");  // Do whatever other UI updating you need to do.
             */
} 
```

我希望这对你有帮助..

# double - 使用 OpenCV 将 imread Mat 的 unsignedchar 数据转换为 double

> ID：13643185
> 
> 赞同：1
> 
> 时间：2012-11-30T10:18:14.263
> 
> 标签：double

我正在使用 C++。使用 imread 将输入图像读入 OpenCV 后，为了进一步处理，我需要将图像数据转换为双精度。怎么做。是否有任何预定义的 CV 功能...？

# c# - 编码 process.startinfo.arguments 错误

> ID：13643189
> 
> 赞同：1
> 
> 时间：2012-11-30T10:18:28.757
> 
> 标签：c#, encoding

我认为这与我在[处理 Process.StartInfo.Arguments](https://stackoverflow.com/questions/3994568/encoding-of-process-startinfo-arguments)时遇到的问题相同。但似乎并非如此（如果我错了，请纠正我）。

我正在从我的应用程序启动一个外部进程，并且我正在传递一个路径作为参数。现在，如果路径有特殊字符（在我的例子中是德语变音符号）。外部应用程序失败，因为它获得了不同的字符。给出的字符串在 VS2010 调试器中正确显示。

我创建了一个这样的 ConsoleApplication 来验证，并调用它而不是外部应用程序：

```
 static void Main(string[] args)
    {
        Console.WriteLine(args[0]);
    } 
```

输出将显示在我的主应用程序中，即使在这里特殊字符也是错误的（而不是 Ü 我得到 š）。

# actionscript-3 - 当值改变时触发事件

> ID：13643192
> 
> 赞同：0
> 
> 时间：2012-11-30T10:18:39.360
> 
> 标签：actionscript-3, apache-flex, data-binding, user-controls, flash-builder

当值发生变化时（即当用户登录时），我试图在空中应用程序中触发事件（函数），但到目前为止我还没有成功触发我的函数......

我有以下代码：

一个用户类：

```
[Bindable]
public class User
{
    private var m_rssLink:String;

    public function get rssLink():String{
        return m_rssLink;
    }

    public function set rssLink(value:String):void{
        m_rssLink = value;
    }
} 
```

用户登录并定义用户的带有 id 标头的标头组件：

```
<fx:Declarations>
    <user:User id="user" />
</fx:Declarations> 
```

最后是带有动作脚本的 mxml 代码：

```
private var loginWatcher:ChangeWatcher;

protected function creationCompleteHandler(event:FlexEvent):void
{
    this.loginWatcher = ChangeWatcher.watch(header.user, ["rssLink"], sendRequest);
} 
```

到目前为止，我已经尝试以多种方式触发 sendRequest 函数（使用 [bindable (event="")]，使用 bindsetter，...），到目前为止，Google 没有给我带来其他选择。

任何人都看到我的代码失败的地方，或者知道更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:11:25.633

好吧，您已经为 User 创建了一个 setter 属性。使用它来跟踪用户状态。

```
public function set rssLink(value:String):void{
    if (m_rsslink==value) return;
    m_rssLink = value;
    dispatchEvent(...); // use correct event(s) for certain values, then catch 
    // them in your watcher class. Use FlexEvents if you want.
} 
```

# python - 在 python 中使用 mysql 出现错误 1064

> ID：13643203
> 
> 赞同：1
> 
> 时间：2012-11-30T10:19:07.480
> 
> 标签：python, mysql

我正在尝试将 mysql 5.1 与 python 2.6.6 一起使用，但出现以下错误。代码 ：

```
 query = "INSERT INTO present_list SET from='a', to='b'" 
   print query
   cur.execute(query) 
```

错误 ：

```
 Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from='a', to='b'' at line 1 
```

有人能理解有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:20:08.163

您需要在 from 和 to like 中使用仰泳：

```
INSERT INTO present_list SET `from`='a', `to`='b 
```

因为from是mysql中的一个关键字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:21:20.233

从前放一个反击。`From`是 MySQL 的[保留字之一](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

```
query = "INSERT INTO present_list (`from`, `to`) VALUES ('a', 'b')" 
print query
cur.execute(query) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:22:42.190

```
Please, learn SQL and Syntex then work on :
Your answer is:

For Insert Data into table
============================    
query = "INSERT INTO present_list(from,to) values('a'.'b')"; 
       print query
       cur.execute(query)

For Update Data into table
============================

query = "Update present_list set from='a', to='b'"; 
       print query
       cur.execute(query) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:25:07.897

`from`并且`to`是mysql的保留字。因此，如果您想将它们用作普通名称，请在保留字周围使用反引号（`）符号。有关更多信息，请转到 [选择带有关键字名称的列](https://stackoverflow.com/questions/12400735/select-a-column-with-a-keyword-name)

# oracle - 使用子查询将 oracle 查询转换为 HQL

> ID：13643205
> 
> 赞同：0
> 
> 时间：2012-11-30T10:19:30.377
> 
> 标签：oracle, hibernate, hql

我真的对休眠的子查询感到困惑。

我有标准的 oracle 查询，但无法将其转换为 HQL。

```
select distinct b.nameId
from
(
select nameId from seg_user where id=1
)a, seg_user b
where b.id=a.nameId 
```

有人可以使用 SubQuery 或 Crieteria 将其转换为 HQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:03:42.703

```
select distinct b.nameId
from seg_user b
where b.id = some (
    select a.nameId from seg_user a where a.id=1
) 
```

您可以在此处查看如何使用子查询：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-subqueries](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-subqueries)

# android - 从 Fragment 完成一项活动

> ID：13643206
> 
> 赞同：1
> 
> 时间：2012-11-30T10:19:32.860
> 
> 标签：android, android-asynctask, android-fragments

在我的应用程序中，我有 2 个片段，片段 A 和片段 B。在这两个片段上，我正在做一些 XML 解析和填充列表视图。我想为我的应用程序实现一个启动屏幕。以便它在解析和填充列表视图和完成期间显示当它完成时。为此，我创建了一个活动 SplashActivity。我在 FragmentA 上实现了异步任务，并在预执行部分调用了 SplashActivity。现在，当应用程序启动 SplashActivity 时开始。但我无法在 FragmentA 的后执行时完成这个活动。getActivity().finishActivity() 不起作用。请有人帮我解决这个问题，或者建议我另一种方法来在 Fragment Activity 上实现启动画面。提前致谢....

这是我的片段A=>

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflating layout
        View v = inflater
                .inflate(R.layout.headlines_fragment, container, false);

        return v;

    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        super.onViewCreated(view, savedInstanceState);
        Log.i("Tag", "onCreateView");

        // We set clear listener
        loading = (ProgressBar) getActivity().findViewById(R.id.progressBar1);

        if (Headlines.headflag == "malayalam") {
            urls = "http://www.abc.com/rssfeeds/19_18_17_25/1/rss.xml";

        }

        if (Headlines.headflag == "english") {
            urls = "http://www.abc.com/en/rssfeeds/1_2_3_5/latest/rss.xml";

        }

        new ProgressAsyncTask().execute();

        MainActivity.refresh.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                new ProgressAsyncTask().execute();

            }
        });

    }

    public void populate_listview() {

        newsList = new ArrayList<HashMap<String, String>>();

        // looping through all song nodes <song>

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            newsList.add(map);
            MarqueeStr = MarqueeStr + " *** " + Title[i];

        }

    }

    public void StartProgress() {
        new ProgressAsyncTask().execute();
    }

    public class ProgressAsyncTask extends AsyncTask<Void, Integer, Void> {

        int myProgress;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            myProgress = 0;

            Intent intent = new Intent(getActivity(), Splash.class);
            startActivityForResult(intent, 5); //Here I called Splash Activity

            loading.setVisibility(View.VISIBLE);

        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            getActivity().finishActivity(5);// Here I tried to finish flash activity

            if (Title == null) {

                final AlertDialog.Builder alertbox = new AlertDialog.Builder(
                        getActivity());

                alertbox.setMessage("Error in connection.Do you want to retry");
                alertbox.setPositiveButton("retry",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface arg0, int arg1) {
                                // getActivity().finish();
                                // Intent intent = new Intent(getActivity(),
                                // MainActivity.class);
                                // startActivityForResult(intent,1);

                            }

                        });

                alertbox.setNegativeButton("exit",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface arg0, int arg1) {

                                // getActivity().finish();

                            }

                        });

                alertbox.show();

            }

            list = (GridView) getActivity().findViewById(R.id.grid);

            // Getting adapter by passing xml data ArrayList
            adapter = new HeadlinesAdapter(getActivity(), newsList);
            list.setAdapter(adapter);
            loading.setVisibility(View.INVISIBLE);
            Typeface tf = Typeface.createFromAsset(getActivity().getAssets(),
                    "fonts/karthika.TTF");
            MainActivity.flashnews.setText(MarqueeStr);
            if (Headlines.headflag == "malayalam") {
                MainActivity.flashnews.setTypeface(tf);

            }
            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    Intent myintent = new Intent(
                            "com.abc.malayalam2headlinespodcast.PODCAST");
                    Bundle mybundle = new Bundle();
                    mybundle.putInt("number", position);
                    myintent.putExtras(mybundle);

                    startActivity(myintent);

                }
            });

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            parse();

            if (Title != null) {
                populate_listview();
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub

        }

    }

    public static void parse() {

           //parsing done here
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:28:44.753

您不应该将 Splash 实现为一个`Activity`，而应该作为一个`DialogFragment`. 只需设置该对话框片段的样式，使其显示为全屏。

关于展示：

```
SplashDialogFragment splashDlg = new SplashDialogFragment();
splashDlg.show(getSupportFragmentManager(), "SplashScreen"); 
```

然后关闭：

```
SplashDialogFragment splashDlg = (SplashDialogFragment) getSupportFragmentManager().findByTag("SplashScreen");
splashDlg.dismiss(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T06:49:36.950

只是为了回答您的标题实际上是“从 Fragment 完成一项活动”的问题，根据文档使用界面从 Fragment 到 Activity 进行交互始终是一种好方法：[Communicating with Activity from Fragment](http://developer.android.com/training/basics/fragments/communicating.html)。因此，必须始终在 Fragment 中声明一个接口，该接口将在您的活动中实现，如下所示：

```
public class SplashActivity extends Activity implements FragmentA.FragmentListenerCallback {

   public void onFragmentInteraction() {
       //finish your activity or do whatever you like
       finish();
   }       
}

public class FragmentA extends Fragment {
   private FragmentListenerCallback fragmentListenerCallback;

   @Override
   public void onAttach(Activity activity) {
     super.onAttach(activity);
     fragmentListenerCallback = (FragmentListenerCallback) activity;
   }

   public interface FragmentListenerCallback {
       void onFragmentInteraction();
   }

   @Override
   protected void onPostExecute(Void result) {
       // TODO Auto-generated method stub
       super.onPostExecute(result);
       if(fragmentListenerCallback != null){
            fragmentListenerCallback.onFragmentInteraction();
       }
   }
} 
```

# jquery - 在 Jquery UI 对话框中上传

> ID：13643210
> 
> 赞同：4
> 
> 时间：2012-11-30T10:19:53.293
> 
> 标签：jquery, file, user-interface, upload, dialog

多年来，我一直在为此挠头。我在页面上使用 uploadifive 来允许文件上传，这工作正常。现在，当我将浏览按钮/队列放在 jQuery UI 对话框中时，单击“浏览”按钮时文件浏览器不会打开。

在下面的代码中，我将 uploadifive 脚本包装在一个函数中，然后在对话框打开时尝试调用该函数，但它仍然不起作用？？？？“浏览”按钮按原样显示，但在单击时不执行任何操作。

有解决方法吗？

谢谢，

```
 // File upload wrapped in function
    function upbind(){
        $('#file_upload').uploadifive({
            'auto'             : true,
            //'checkScript'      : 'check-exists.php',
            'formData'         : {
                                   'timestamp' : '1234567890',
                                   'token'     : '1234567890'
                                 },
            'queueID'          : 'queue',
            'uploadScript'     : 'uploadify/uploadifive.php',
            'queueSizeLimit'   : 1,
            'multi'            : false,
            'buttonText'       : 'BROWSE',
            //'removeCompleted'  : true,
            'onSelect'         : function(file) {
                                    $(".uploadifive-button").css("display", "none");
                                },
            'onCancel'         : function() {
                                    $(".uploadifive-button").css("display", "inherit");
                                },                  
            'onUploadComplete' : function(file, data) { console.log(data); alert('The file ' + data + ' uploaded successfully.');}

        });
    }

    // Call upbind script
    upbind();

    // Process dialog box
    $("#dialog-add-product").dialog({
        autoOpen: false,
        resizable: false,
        width: 400,
        modal: true,
        open: function(){
            $(this).parent().find('button:nth-child(2)').focus();
            upbind();
        },
        buttons: {
            Ok: function(){
                // Function here

            },
            Cancel: function() {
                // Function here

                $(this).dialog( "close" );
            }
        }
    }); // End add product dialog 
```

对话框 HTML 在这里；

```
<div id="dialog-add-product" class="dialog_add" title="Add product">
<form name="formAddProduct" id="formAddProduct" method="post" action="">
<input type="hidden" name="action" value="" id="addcat" />
<table>
      <tr>
        <td height="10" align="left" valign="middle" class="smallText" width="120"></td>
        <td height="10" align="left" valign="middle"></td>
      </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Product title:</td>
        <td height="31" align="left" valign="middle"><input name="fields-ptitle" type="text" class="inputBoxAdd editstatus" id="fields-ptitle" tabindex="5" value="" /></td>
      </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Category:</td>
        <td height="31" align="left" valign="middle"><label for="fields-pcategory"></label>
          <select name="fields-pcategory" id="fields-pcategory" class="inputBoxAdd editstatus">
                            <option value="19">Door parts</option>
                            <option value="1">Hinges</option>
                            <option value="21">Testing 222</option>
                        </select></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Product code:</td>
        <td height="31" align="left" valign="middle"><input name="fields-pcode" type="text" class="inputBoxAdd editstatus" id="fields-pcode" tabindex="5" value="" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Quantity:</td>
        <td height="31" align="left" valign="middle"><input name="fields-pqty" type="text" class="inputBoxAdd editstatus" id="fields-pqty" tabindex="5" value="" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Trade price (£):</td>
        <td height="31" align="left" valign="middle"><input name="fields-pprice" type="text" class="inputBoxAdd editstatus" id="fields-pprice" tabindex="5" value="" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Clearance price (£):</td>
        <td height="31" align="left" valign="middle"><input name="fields-pclearance" type="text" class="inputBoxAdd editstatus" id="fields-pclearance" tabindex="5" value="" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Unit:</td>
        <td height="31" align="left" valign="middle"><input name="fields-punit" type="text" class="inputBoxAdd editstatus" id="fields-punit" tabindex="5" value="" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Description:</td>
        <td height="31" align="left" valign="middle"><textarea name="fields-pdescription" id="fields-pdescription" cols="30" rows="5"></textarea></td>
  </tr>
      <tr>
        <td align="left" valign="middle" class="smallText">Image:</td>
        <td align="left" valign="middle"><div id="queue"></div>
    <input id="file_upload" name="file_upload" type="file" multiple></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText">Active:</td>
        <td height="31" align="left" valign="middle"><input name="fields-pactive" type="checkbox" id="fields-pactive" value="1" /></td>
  </tr>
      <tr>
        <td height="31" align="left" valign="middle" class="smallText"><div class="savetick"><img src="images/accept.png" width="24" height="24" /></div><div class="savespinner"><img src="images/savespin.gif" width="16" height="16" /></div></td>
        <td height="31" align="left" valign="middle">&nbsp;</td>
      </tr>
</table>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T05:53:40.660

显然该选项有问题`modal: true`，它阻止了windows文件，然后设置为`modal: false`及其工作。

```
// Process dialog box
$("#dialog-add-product").dialog({
    ...
    modal: false,
    open: function(){
        $(this).parent().find('button:nth-child(2)').focus();
        upbind();
    },
    ...
}); // End add product dialog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T00:48:09.530

以下是一些观察。

我无法使用您的代码`.uploadifive({`。我不得不用`.uploadify({`我[在演示页面上找到的](http://www.uploadify.com/demos/)替换它。该更改至少使代码在[jsfiddle](http://jsfiddle.net)中正确运行。

其次，我会给你代码另一个审查，因为使用默认的 uploadify 代码，浏览器似乎工作得很好。

**工作示例：http:** [//jsfiddle.net/t6hHr/2/](http://jsfiddle.net/t6hHr/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:06:58.260

首先，将您`div`的表单标签放入并尝试一下。

即使我有同样的问题。

[查看geek](https://stackoverflow.com/a/5860768/1551730)给出的解决方案

希望这可以帮助。

# objective-c - 将 NSDictionary 排序为 NSMutableArray 但保留值和键？

> ID：13643213
> 
> 赞同：2
> 
> 时间：2012-11-30T10:19:58.943
> 
> 标签：objective-c, sorting, nsarray, nsdictionary

我有点困惑：试图获取我在 NSDictionary 中的玩家姓名和分数列表，并将它们按分数顺序排序（最高分在前）。我知道我不能对字典进行排序，所以我需要先将数据移动到一个数组中，但是这样做，我不会丢失每个字典键/值对的一半吗？

例如，假设我有以下对：

```
Bill / 10000
John / 7500
Stan / 7500
Mark / 5000 
```

如果我去把分数拿出来排序，然后再取钥匙，约翰和斯坦不会因为他们的分数相同而混淆吗？它可能会调用其中一个两次，等等？

我意识到我无法对字典进行排序，但有更聪明的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:58:44.543

您可以做的是根据他们的分数获得一个排序的玩家数组，然后为每个玩家创建一个字典并将它们附加到另一个数组中。可能是这样的（我正在使用新的文字语法，如果合适的话使用旧的）：

```
NSDictionary *scores = @{
    @"Stan" : @7500,
    @"Mark" : @5000,
    @"John" : @7500,
    @"Bill" : @10000
};

NSArray *sp = [scores keysSortedByValueUsingComparator:^(id obj1, id obj2){
    return [obj2 compare:obj1];
}];

NSMutableArray *players = [NSMutableArray arrayWithCapacity:0];
for (NSString *p in sp) [players addObject:@{ @"name":p, @"score":scores[p] }]; 
```

现在你的`players`数组是：

```
(
        {
        name = Bill;
        score = 10000;
    },
        {
        name = John;
        score = 7500;
    },
        {
        name = Stan;
        score = 7500;
    },
        {
        name = Mark;
        score = 5000;
    }
) 
```

PS。保留一个键是玩家姓名的字典不是一个好主意，考虑到你有 2 个不同的`John`玩家......那会发生什么？另外一个更好的解决方案是创建一个`Player`类并将其数据（分数、名称等）保留为属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:34:33.173

您必须创建两个数组，一个用于得分，另一个用于播放器。关键是玩家数组与（排序的）分数数组的顺序相同。下面的实现假设您使用`NSNumber`对象保留分数，并且效率不是特别高，因为它对值进行了两次排序：

（未经测试）

```
NSDictionary *dict = ...;    // key=player (NSString), value=score (NSNumber).

NSArray *scores = [[dict allValues] sortedArrayUsingComparator:^(id obj1, id obj2) {
    return [(NSNumber *)obj2 compare:(NSNumber *)obj1];
}];

NSArray *players = [dict keysSortedByValueUsingComparator:^(id obj1, id obj2) {
    return [(NSNumber *)obj2 compare:(NSNumber *)obj1];
}]; 
```

# java - 如何在关闭 GUI（java）上停止程序运行无限循环

> ID：13643214
> 
> 赞同：0
> 
> 时间：2012-11-30T10:20:02.147
> 
> 标签：java, swing, sockets, termination, windowlistener

我有一个使用套接字进行服务器/客户端通信的简单程序。服务器类包含`run()`方法，该方法有无限循环等待套接字接受。

无论如何，我在构造函数中编写了一个代码来终止处理关闭，

```
 this.addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public void windowClosing(java.awt.event.WindowEvent windowEvent) {
        System.out.println("Close operation server done");
        toClient.println("Bye");
        closeStreams();
        socket = null;
        serverSocket = null;
        System.exit(0);
    }
}); 
```

当我阅读该[方法](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html#windowClosing%28java.awt.event.WindowEvent%29) `windowClosing(WindowEvent e)`的 API 时，它说：

> 当窗口正在关闭时调用。此时可以覆盖关闭操作。

它说**当**一个窗口正在关闭的过程中。但是 run() 方法内部的循环仍然获得控制权，由于程序的逻辑，不会结束，所以不会关闭窗口（实际上是关闭了 GUI），但处理仍在幕后进行。

**更新：**

`run()`方法：

```
public void run()
{
    try
    {
        while (true)
        {
            idle = true;
            System.out.println("System is running");
            socket = serverSocket.accept();
            System.out.println("Client accepted on server side");
            openStreams();
            toClient.println("Hello: server is connected " + serverAddress.getLocalHost().toString());
            processClient();
            //   closeStreams();
        }
    } catch (Exception e)
    {
        System.out.println("Error accepting server " + e);
    }
} 
```

`processClient()`方法：

```
 public void processClient() throws IOException
    {
        System.out.println("Porcessing start");
        String line = fromClient.readLine();
        try
        {
            while (!(line.equals("Bye")))
            {
                textToReceive.append("He: " + line + newline);
                line = fromClient.readLine();
            }
            closeStreams();

        } catch (IOException ex)
        {
            System.out.println("Error reading from client " + ex);
        }
    } 
```

如何正确强制程序运行？

**更新 2：**整个工作服务器类：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.*;
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

/**
 *
 * @author S
 */
public class ChatServer extends JFrame
{

    private InetAddress serverAddress;
    private Socket socket;
    private ServerSocket serverSocket;
    private InputStream is;
    private OutputStream os;
    private BufferedReader fromClient;
    private PrintWriter toClient;
    private JButton send;
    private JPanel uperPanel;
    private JPanel midPanel;
    private JPanel downPanel;
    private JTextArea textToSend;
    private JTextArea textToReceive;
    private JLabel addressL;
    private final int port = 5555;
    private boolean idle = false;
    private int timeout = 3000;
    public static String newline = System.getProperty("line.separator");

    private ChatServer()
    {
        this.setGUI();
        this.setVisible(true);
        try
        {
            serverSocket = new ServerSocket(port);
            this.run();
        } catch (IOException ex)
        {
            Logger.getLogger(ChatServer.class.getName()).log(Level.SEVERE, null, ex);
        }

        this.addWindowListener(new java.awt.event.WindowAdapter()
        {
            @Override
            public void windowClosing(java.awt.event.WindowEvent windowEvent)
            {
                idle = true;
                closeStreams();
                socket = null;
                serverSocket = null;
                System.exit(0);
            }
        });
    }

    public void run() throws IOException
    {
        try
        {
            while (true)
            {
                System.out.println("System is running");
                socket = serverSocket.accept();
                System.out.println("Client accepted on server side");
                openStreams();
                toClient.println("Hello: server is connected " + serverAddress.getLocalHost().toString());
                processClient();
                //   closeStreams();
            }
        } catch (java.net.SocketTimeoutException ee)
        {

            closeStreams();
            System.out.println(ee);

        } catch (Exception e)
        {
            System.out.println("Error accepting server " + e);
        }

    }

    public void processClient() throws IOException
    {
        System.out.println("Porcessing start");
        String line = fromClient.readLine();
        try
        {
            while (!(line.equals("Bye")))
            {
                textToReceive.append("He: " + line + newline);
                line = fromClient.readLine();
            }
            closeStreams();

        } catch (IOException ex)
        {

            System.out.println("Error reading from client " + ex);

        }
    }

    private void setGUI()
    {

        this.setSize(375, 314);

        send = new JButton("send");

        try
        {
            addressL = new JLabel("My Server address: " + serverAddress.getLocalHost().toString()
                    + "  Port: " + this.port);
        } catch (Exception e)
        {
            System.out.println("Unknown Host problem " + e);
        }

        textToReceive = new JTextArea(12, 30);
        textToReceive.setLineWrap(true);
        JScrollPane recievedScrolledText = new JScrollPane(textToReceive);
        recievedScrolledText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textToReceive.setEditable(false);

        textToSend = new JTextArea(3, 25);
        textToSend.setLineWrap(true);
        JScrollPane sentScrolledText = new JScrollPane(textToSend);
        sentScrolledText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textToSend.setEditable(true);

        uperPanel = new JPanel();
        midPanel = new JPanel();
        downPanel = new JPanel();

        uperPanel.add(addressL);

        midPanel.add(recievedScrolledText);
        downPanel.add(sentScrolledText);
        downPanel.add(send);

        Container c = getContentPane();
        c.setLayout(new BorderLayout());
        c.add(uperPanel, "North");
        c.add(midPanel, "Center");
        c.add(downPanel, "South");

        send.addActionListener(new ButtonWatch());
        textToSend.addKeyListener(new KeyWatch());
    }

    private void openStreams() throws IOException
    {

        is = socket.getInputStream();
        fromClient = new BufferedReader(new InputStreamReader(is));
        os = socket.getOutputStream();
        toClient = new PrintWriter(os, true);
        System.out.println("open stream is open on server");
    }

    private void closeStreams()
    {
        try
        {

            if ((toClient != null) && (os != null)
                    && (fromClient != null) && (is != null)
                    && (fromClient != null) && (socket != null))
            {
                toClient.close();
                os.close();
                fromClient.close();
                is.close();
                socket.close();
            }

        } catch (IOException ex)
        {
            System.out.println("Problem closing streams " + ex);
        }
    }

    private class KeyWatch extends KeyAdapter
    {

        public void keyPressed(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
                String line = textToSend.getText();
                textToSend.setText("");
                toClient.println(line);
                textToReceive.append("You: " + line + newline);
            }
        }

        public void keyReleased(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
            }
        }

        public void keyTyped(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
            }
        }
    }

    private class ButtonWatch implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e)
        {
            Object buttonPressed = e.getSource();

            if (buttonPressed == send)
            {
                String line = textToSend.getText();
                textToSend.setText("");
                toClient.println(line);
                textToReceive.append("You: " + line + newline);

                System.out.println("send to client " + line);
            }

        }
    }

    public static void main(String[] args)
    {
        ChatServer s = new ChatServer();
        s.setVisible(true);
    }
} 
```

现在如何在关闭后终止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:33:17.707

Change your server loop to be *not* infinite.

```
volatile boolean runFlag = true;
while (runFlag) {
  //do server stuff
} 
```

and get your closing method to flag the server to stop.

```
this.addWindowListener(new java.awt.event.WindowAdapter() {
  @Override
  public void windowClosing(java.awt.event.WindowEvent windowEvent) {
    System.out.println("Close operation server done");
    toClient.println("Bye");
    closeStreams();
    runFlag = false;
  }
}); 
```

You might want to move the stream closing stuff to after the main server loop so that any stuff that is in progress gets finished and you don't interrupt anything currently in progress.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:26:56.810

**-**那么它更好地用于`Executor`跨越线程。

**-**然后使用`cancel(true)`with`submit()`方法中断这个特定的线程。

**-**如果你想`Thread`直接去，那么你可以使用`interrupt()`or`interrupted()`方法来打断`thread`.

# html - 将当前类 css 应用于图像

> ID：13643217
> 
> 赞同：0
> 
> 时间：2012-11-30T10:20:11.733
> 
> 标签：html, image, rotator

我有一种图像轮播，它会在悬停时自动将图像缩略图与大图像标题交换。这是完美的工作，但现在我意识到我想为当前显示的每个拇指添加一些指示。我以为我可以应用 div.container img.current 并给它一些属性，值..但它没有用。

所以我想我可以向大家请教一个有效的快速解决方案。

这是我的代码

```
<div class="container-thumbs">

<div class="big-image-thumbnail">

<a href=".html"onmouseover="document.getElementById('bigImage').src='.jpg'">

<img src=".jpg" /></a><p>Title</p>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:31:19.317

使用 j-query toggleClass() 函数

这是一个例子

```
<head>

<style>

p { margin: 4px; font-size:16px; font-weight:bolder;

cursor:pointer; }

.blue { color:blue; }

.highlight { background:yellow; }
</style>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>

  <p class="blue">Click to toggle</p>

  <p class="blue">highlight</p>

  <p class="blue">on these</p>

  <p class="blue">paragraphs</p>

<script>

   $("p").click(function () {

   $(this).toggleClass("highlight");

});

 </script>

</body> 
```

# java - 收集所有发出的 SQL 的最简单方法

> ID：13643220
> 
> 赞同：2
> 
> 时间：2012-11-30T10:20:17.757
> 
> 标签：java, spring, jdbc, jdbctemplate

由于许多我不愿透露的原因（冗长而无聊的故事），我需要捕捉复杂应用程序与数据库的交互。该应用程序构建在 Spring/JdbcTemplate 之上，我需要找到该应用程序发出的所有 SQL。我怎样才能以最简单的方式做到这一点？

创建 JdbcTemplate 的伪模拟实现似乎不合理。首先 JdbcTemplate 是一个类而不是一个接口。其次，它的接口很大，实现起来很乏味。我正在考虑模拟`DataSource`并将`Connection`所有 SQL 发送出去，但也许有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:13:23.783

例如，这种问题非常巧妙地解决了。[P6间谍](http://sourceforge.net/projects/p6spy/)。有一篇[很好的文章](http://swik.net/Spring/Spring%27s+corner/Integrate+P6Spy+with+Spring/vq6)介绍了如何让它与 Spring 一起工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:51:11.903

捕获所有 SQL 输出的唯一方法是成为应用程序和数据库之间的接触点。这意味着，从实际处理 JDBC 交互的库实现中装饰`DataSource`、`Connection`和所有类型的`Statement`s，并记下在`SimpleJdbcTemplate`bean 定义中指定的装饰数据源的装饰连接上运行的所有语句。从可维护性的角度来看，在其他任何时候捕捉到这一点都是具有挑战性的。

# php - PHP 在循环中使用查询的替代方法

> ID：13643225
> 
> 赞同：6
> 
> 时间：2012-11-30T10:20:33.853
> 
> 标签：php, mysql

有人告诉我，在循环中使用查询（选择）是一种不好的做法，因为它会降低服务器性能。

我有一个数组，例如

```
Array ( [1] => Los Angeles )
Array ( [2] =>New York)
Array ( [3] => Chicago ) 
```

这些只是 3 个索引。我使用的数组没有固定大小，所以有时它可以包含多达 20 个索引。

现在，我正在做的是（这不是所有的代码，而是基本的想法）

1.  循环
2.  查询服务器并选择所有住在“洛杉矶”的人的名字
3.  把名字打印出来

输出将如下所示：

```
Los Angeles
      Michael Stern
      David Bloomer
      William Rod

New York
      Kary Mills

Chicago
      Henry Davidson
      Ellie Spears 
```

我知道这是一种非常低效的方法，因为随着表格稍后变大，它可能会产生很多查询。

所以我的问题是，有没有更好、更有效的方法来根据数组中的内容来选择信息，该数组可以是任何大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:23:54.363

使用`IN`查询，它将在单个查询中获取所有结果：

```
SELECT * FROM people WHERE town IN('LA', 'London', 'Paris') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T10:27:42.403

要进一步添加到 MrCodes 答案，如果您从数组开始：-

```
$Cities = array(1=>'Los Angeles', 2=>'New York', 3=>'Chicago');
$query = "SELECT town, personname FROM people WHERE town IN('".implode("','", $Cities)."') ORDER BY town";
if ($sql = $mysqliconnection->prepare($query)) 
{
    $sql->execute();
    $result = $sql->get_result();
    $PrevCity = '';
    while ($row = $result->fetch_assoc()) 
    {
        if ($row['town'] != $PrevCity)
        {
            echo $row['town']."<br />";
            $PrevCity = $row['town'];
        }
        echo $row['personname']."<br />";
    }
} 
```

作为数据库设计问题，您可能应该将城镇名称放在一个单独的表中，并且该人的表包含城镇的 id 而不是实际的城镇名称（使验证更容易、更快并且验证不太可能丢失记录因为有人打错了他们的家乡）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:24:39.050

正如[@MrCode 提到](https://stackoverflow.com/a/13643276)的那样，您可以使用 MySQL 的[`IN()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_in)运算符一次性获取所有所需城市的记录，但是如果您主要按城市对结果进行[排序](http://dev.mysql.com/doc/en/sorting-rows.html)，您可以遍历结果集，跟踪最后看到的城市并输出新的初次遇到时的城市。

使用[PDO](http://php.net/manual/en/book.pdo.php)和 MySQL 的[`FIELD()`](http://dev.mysql.com/doc/en/string-functions.html#function_field)函数来确保结果集与原始数组的顺序相同（如果您不关心这一点，您可以简单地执行`ORDER BY city`，这会更有效，尤其是在使用合适的索引时列`city`）：

```
$arr = ['Los Angeles', 'New York', 'Chicago'];
$placeholders = rtrim(str_repeat('?, ', count($arr)), ', ');

$dbh = new PDO("mysql:dbname=$dbname", $username, $password);
$qry = $dbh->prepare("
  SELECT   city, name
  FROM     my_table
  WHERE    city IN ($placeholders)
  ORDER BY FIELD(city, $placeholders)
");

if ($qry->execute(array_merge($arr, $arr))) {

  // output headers
  echo '<ul>';

  $row = $qry->fetch();
  while ($row) {
    $current_city = $row['city'];

    // output $current_city initialisation
    echo '<li>'.htmlentities($current_city).'</li><ul>';
    do {
      // output name $row
      echo '<li>'.htmlentities($row['name']).'</li>';
    } while ($row = $qry->fetch() and $row['city'] == $current_city);
    // output $current_city termination
    echo '</ul>';
  }

  // output footers
  echo '</ul>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:23:30.510

这就是准备好的陈述的目的。您将占位符绑定到一个值，并像变量一样使用它，使用相同的查询。由于查询没有更改，因此您可以最大限度地减少与 mysql 服务器的通信，从而提高效率。

使用 PDO 的示例：

```
$cities = array(
    "Los Angeles",
    "New York",
    "Chicago"
);

try {
    //Change database parameters here (user, pass, database name)
    $db = new PDO("mysql:host=localhost;dbname=users", "user", "pass");
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $stmt = $db->prepare("SELECT * FROM `users` WHERE `city` = :city");

    foreach ($cities as $city) {
        $stmt->bindValue(":city", $city);
        $stmt->execute();

        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
        //Output data here. You can format it however you'd like
        var_dump($city, $result);
    }

}
catch (PDOException $e) {
    //Error handling here
} 
```

# c# - C# MD5CryptoServiceProvider

> ID：13643230
> 
> 赞同：2
> 
> 时间：2012-11-30T10:20:49.863
> 
> 标签：c#, encryption, md5

我目前正在将旧版 ASP.NET 1.1 应用程序转换为 .NET 4 MVC 3 应用程序。

我正在查看密码加密，并在旧代码中编写了一个例程来使用 MD5CryptoServiceProvider。

```
 private string EncryptText(string szText)
        {
            try
            {
                UTF8Encoding objEncoder = new UTF8Encoding();                
                MD5CryptoServiceProvider objMD5Hasher = new MD5CryptoServiceProvider();
                Byte[] btHashedDataBytes = objMD5Hasher.ComputeHash(objEncoder.GetBytes(szText));
                string szReturn = objEncoder.GetString(btHashedDataBytes);
                objEncoder = null;
                objMD5Hasher = null;

                return szReturn;
            }
            catch
            {               
                return "";
            }
        } 
```

我已经编写了一个快速的 .NET 4 控制台应用程序并复制了这个函数，这样我就可以与数据库中的当前密码进行比较（以确保 MD5 函数仍然给我相同的输出）

```
 string encTxt = encryptor.EncryptText("fbloggsPass12345");

            using (SqlConnection conn = new SqlConnection("Server=server;Database=db;User Id=sa;Password=1111;"))
            {
                conn.Open();
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.Connection = conn;
                    cmd.CommandType = System.Data.CommandType.Text;                   

                    cmd.CommandText = "UPDATE SiteUsers SET Token = '" + encTxt + "' WHERE PKey = 10";
                    if (cmd.ExecuteNonQuery() > 0)
                        Console.WriteLine("Updated");
                    else
                        Console.WriteLine("Failed");

                }
                conn.Close();
            }

            Console.ReadLine(); 
```

但是数据库中的密码当前是 !?MGF+&> 并且我得到的输出是 ��!?��MGF�+&��> 当我存储在数据库中时转换为 ???!?? ?MGF?+&??>

我可以看到几乎相同，但为什么我得到了？人物

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:22:45.833

这是第一个问题，至少：

```
string szReturn = objEncoder.GetString(btHashedDataBytes); 
```

您正在尝试使用哈希，就好像它是 UTF-8 编码的文本一样。它不是——它只是任意的二进制数据。

如果您需要将任意二进制数据转换为文本，您应该使用 Base64（例如`Convert.ToBase64String`）或十六进制之类的东西。

（此外，我*强烈*建议您不要以目前的方式“处理”异常。为什么要隐藏这样的问题？为什么要在变量`null`超出范围之前将其设置为反正？）

哦，*请*不要像那样直接在 SQL 中包含值 - 请改用参数化 SQL。

最后，这些天我会使用不同的散列算法，特别是对于密码。你能不能不使用现成的系统进行身份验证，实际上是由安全专家开发的？安全性很困难：我们最好把它留给知道如何正确操作的相对较少的人 :) 查看评论以获取更多建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:58:15.807

低影响升级的标准技术是使用旧哈希作为新哈希方案的输入。这适用于普通的 MD5 哈希。

不幸的是，您通过非二进制安全编码 (UTF8) 发送二进制哈希。这将每隔一个字符替换为 0xFFFD，有效地将输出大小减半为 64 位。这大大削弱了升级后的计划，但不是致命的。

我会将现有哈希升级到`PBKDF2(legacyHash, salt)`，然后在用户登录时将哈希替换为`PBKDF2(password, salt)`不依赖于旧方案的新哈希。几个月后，为所有尚未登录的用户触发密码重置，摆脱传统的基于哈希的密码。

对于新方案，我会选择在[Rfc2898DeriveBytes Class](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)中实现的 PBKDF2-SHA-1 。使用足够的迭代次数，至少 10000 次。

# winapi - 如何在 Windows 中覆盖应用程序的单实例限制？

> ID：13643236
> 
> 赞同：1
> 
> 时间：2012-11-30T10:21:04.700
> 
> 标签：winapi, ipc, mutex, detours

我正在尝试覆盖我没有源的应用程序的单个实例限制。我知道该应用程序正在使用使用 CreateMutex 来确定是否有另一个实例正在运行的好方法。（如果互斥锁创建成功，它会继续，如果 getlasterror 说互斥锁已经创建，它会立即退出）。我通过嗅探 Win32 api 调用发现了这一点。我认为使用 Detours 可以解决问题，但效果并不理想。我正在拦截 CreateMutexW，但由于某种原因，它没有捕获对它的前四个调用。（通过嗅探 win32 调用并查看互斥体的名称，我再次知道这些调用是什么）。我确实截获了第五个，但我真正想要截获的是第一个。

我通过带有dll的示例应用程序使用弯路。我想知道问题是绕道太晚还是因为这些电话可能有某种保护。弯路是最好的方法吗？也许使用其他东西可能是一个更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:44:04.483

您描述的情况可能有几个原因。以下是其中最有可能的：

1.  您需要捕获的 CreateMutexW 调用发生在进程导入的其中一个 DLL 的 DllMain 方法中，并且您正在使用 DetoursCreateProcessWithDll() 函数来注入您的代码。Detours 通过将您的 DLL 放置在进程可执行文件导入列表的末尾来注入您的 DLL，因此进程导入的所有 DLL 都将在您之前的进程中加载​​和初始化。为了克服这个问题，请尝试使用基于 CreateProcess(CREATE_SUSPENDED) 和 CreateRemoteThread() 的注入，尽管这种方法会带来自己的挑战。
2.  第一次调用中使用的 API 不同。您是否尝试过覆盖 CreateMutexExW？您确定 ANSI 方法调用 Unicode 方法吗？

希望这可以帮助。

# sql - 使用数据透视表 SQL Server 2008 减去列总计

> ID：13643237
> 
> 赞同：1
> 
> 时间：2012-11-30T10:21:05.277
> 
> 标签：sql, sql-server-2008, tsql, pivot, pivot-table

我正在使用以下数据透视表来计算每月的销售额。

`mon_pay_amount`用于支付金额。我在表中还有一列，`tbl_orders`其中包含应用的任何折扣`mon_order_discount`。

我需要能够汇总每个月的折扣并将它们从各自的每月付款总额中扣除。事后看来，折扣应该记录在付款表中，这可能会使这更容易！

`PIVOT`对表格和销售报告很陌生，**任何人都知道任何好的教程**，到目前为止都通过使用和修改示例来获得！

资料说明

```
Table Name     ID              FK                  Columns
---------------------------------------------------------------------
tbl_orders     uid_orders                          mon_order_discount
tbl_payment    uid_payment     uid_pay_orderid     mon_pay_amount 
```

数据

```
Data:          Jan      Feb      March
Discounts:     10.00    20.00    10.00 
Payments:      200.00   300.00   400.00 
```

结果

```
Data:                Jan      Feb      March
Totals-Discount:     190.00   280.000  390.00 
```

询问

```
SELECT *
FROM
  (SELECT 
      DATENAME(month, dte_pay_paydate) mth,
      mon_pay_amount
  FROM 
      tbl_payment
  INNER JOIN 
      dbo.tbl_orders ON (uid_pay_orderid = uid_orders)
  WHERE 
      bit_pay_paid = 1 
      AND txt_pay_descrip <> 'Credit' 
      AND uid_order_webid = 1
) x
PIVOT
(
  SUM(mon_pay_amount)
  FOR 
     mth IN ([January], [February], [March], [April], [May],
             [June], [July], [August], September, [October], 
             [November], [December])
) p 
```

非常感谢

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:17:34.443

您可以在查询中计算正确的金额，类似于：

```
SELECT *
FROM
(
  SELECT 
      DATENAME(month, p.dte_pay_paydate) mth,
      p.mon_pay_amount - o.mon_order_discount as Total
  FROM tbl_payment p
  INNER JOIN tbl_orders o 
    ON p.uid_pay_orderid = o.uid_orders
  WHERE bit_pay_paid = 1 
      AND txt_pay_descrip <> 'Credit' 
      AND uid_order_webid = 1
) x
PIVOT
(
  SUM(Total)
  FOR 
     mth IN ([January], [February], [March], [April], [May],
             [June], [July], [August], September, [October], 
             [November], [December])
) p 
```

编辑，根据您的评论，我认为以下方法可能有效：

```
SELECT *
FROM
(
  SELECT DATENAME(month, p.dte_pay_paydate) mth,
      sum(p.mon_pay_amount) - TotalDiscByMonth Total
  FROM tbl_payment p
  INNER JOIN tbl_orders o1
    on p.uid_pay_orderid = o1.uid_orders
  INNER JOIN
  (
    select sum(mon_order_discount) TotalDiscByMonth, DATENAME(month, dte_order_stamp) mth
    from tbl_orders
    group by DATENAME(month, dte_order_stamp)
  ) o2
    ON DATENAME(month, o1.dte_order_stamp) = o2.mth
  WHERE bit_pay_paid = 1 
      AND txt_pay_descrip <> 'Credit' 
  group by DATENAME(month, p.dte_pay_paydate), TotalDiscByMonth
) x
PIVOT
(
  SUM(Total)
  FOR 
     mth IN ([January], [February], [March], [April], [May],
             [June], [July], [August], September, [October], 
             [November], [December])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a4433/17)

# winjs - 将 google analityc 添加到 Metro 应用程序

> ID：13643243
> 
> 赞同：1
> 
> 时间：2012-11-30T10:21:20.060
> 
> 标签：winjs

我尝试将google analityc安装到windows microsoft visual studio 8 for metro app，但我遇到了问题，安装时我在下面遇到了问题

PM> Install-Package w8ga 成功安装'w8ga 2.3'。目录 '' 不为空。跳过...已成功卸载“w8ga 2.3”。安装失败。回滚...安装包：无法添加对“DT.GoogleAnalytics.Metro”的引用。在 line:1 char:1 + Install-Package w8ga + ~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

任何人都可以帮助我

谢谢伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:05:51.163

“w8ga 2.3”针对“Windows Store App”和其他项目模板，包管理器抛出错误。您可以尝试使用 Visual Studio 2012 和 Windows Store App 来使其正常工作。

# zend-framework - Zend Framework DB 表获取数组

> ID：13643261
> 
> 赞同：0
> 
> 时间：2012-11-30T10:22:51.053
> 
> 标签：zend-framework, zend-db, zend-db-table

是否可以从数据库中获取数组，将一列作为数组键，另一列作为数组值？

我当前的代码：

```
$table = new Zend_Db_Table('translations');

$where = $table->getAdapter()->quoteInto('lang = ?', $locale);      

$result = $table->fetchAll($where)->toArray(); 
```

表结构：

```
id     key     lang     title
1      key1    en       Some english text
2      key2    de       Some german text 
```

因此，在获取数组后，我想获取包含键值作为数组键的数组，以及作为数组键值的标题。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:58:02.950

如果您需要成对，最好这样做

```
$table = new Zend_Db_Table ('translations');
$db = $table->getAdapter();
$select = $table->select ()
    ->columns(array('key','title'))
    ->where ('lang = ?', $locale);
$result = $db->fetchPairs($select); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:28:20.443

我不确定你的意思，但让我们试试这个：

```
 $table = new Zend_Db_Table ('translations');
    $query = $table->select ()
        ->where ('lang = ?', $locale);

    $results = $table->getAdapter ()
        ->fetchAll ($query, array (), Zend_Db::FETCH_GROUP);

    Zend_Debug::dump ($results); 
```

# eclipse - 导入 gwt-maven-plugin 生成的项目

> ID：13643262
> 
> 赞同：0
> 
> 时间：2012-11-30T10:23:01.380
> 
> 标签：eclipse, gwt, maven, m2eclipse, gwt-maven-plugin

我按照[gwt-maven-plugin](http://mojo.codehaus.org/gwt-maven-plugin/)的说明，生成然后导入下面的项目，

1) 生成项目

```
$ mvn archetype:generate \
   -DarchetypeGroupId=org.codehaus.mojo \
   -DarchetypeArtifactId=gwt-maven-plugin \
   -DarchetypeVersion=2.5.0

...

Define value for property 'groupId': : org.codehaus.mojo
Define value for property 'artifactId': : gwt-maven-plugin-sample
Define value for property 'version':  1.0-SNAPSHOT: : 
Define value for property 'package':  org.codehaus.mojo: : 
Define value for property 'module': : Sample 

... 
```

2）检查生成的POM

```
<?xml version="1.0" encoding="UTF-8"?>
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <!-- POM file generated with GWT webAppCreator -->
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>gwt-maven-plugin-sample</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>GWT Maven Archetype</name>

  <properties>
    <!-- Convenience property to set the GWT version -->
    <gwtVersion>2.5.0</gwtVersion>
    <!-- GWT needs at least java 1.5 -->
    <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-servlet</artifactId>
      <version>${gwtVersion}</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-user</artifactId>
      <version>${gwtVersion}</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.7</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>javax.validation</groupId>
      <artifactId>validation-api</artifactId>
      <version>1.0.0.GA</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>javax.validation</groupId>
      <artifactId>validation-api</artifactId>
      <version>1.0.0.GA</version>
      <classifier>sources</classifier>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <!-- Generate compiled stuff in the folder used for developing mode -->
    <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

    <plugins>

      <!-- GWT Maven Plugin -->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>2.5.0</version>
        <executions>
          <execution>
            <goals>
              <goal>compile</goal>
              <goal>test</goal>
              <goal>i18n</goal>
              <goal>generateAsync</goal>
            </goals>
          </execution>
        </executions>
        <!-- Plugin configuration. There are many available options, see 
          gwt-maven-plugin documentation at codehaus.org -->
        <configuration>
          <runTarget>Sample.html</runTarget>
          <hostedWebapp>${webappDirectory}</hostedWebapp>
          <i18nMessagesBundle>org.codehaus.mojo.client.Messages</i18nMessagesBundle>
        </configuration>
      </plugin>

      <!-- Copy static web files before executing gwt:run -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>exploded</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <webappDirectory>${webappDirectory}</webappDirectory>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
  </build>

</project> 
```

3）检查生成的项目

```
gwt-maven-plugin-sample/
├── .classpath
├── pom.xml
├── .project
├── SampleTest-dev.launch
├── SampleTest-prod.launch
├── .settings
│   ├── com.google.appengine.eclipse.core.prefs
│   ├── com.google.gdt.eclipse.core.prefs
│   ├── com.google.gwt.eclipse.core.prefs
│   ├── .jsdtscope
│   ├── org.eclipse.jdt.core.prefs
│   ├── org.eclipse.wst.common.component
│   ├── org.eclipse.wst.common.project.facet.core.xml
│   ├── org.eclipse.wst.jsdt.ui.superType.container
│   └── org.maven.ide.eclipse.prefs
├── src
│   ├── main
│   │   ├── java
│   │   │   └── org
│   │   │       └── codehaus
│   │   │           └── mojo
│   │   │               ├── client
│   │   │               │   ├── GreetingService.java
│   │   │               │   └── Sample.java
│   │   │               ├── server
│   │   │               │   └── GreetingServiceImpl.java
│   │   │               └── shared
│   │   │                   └── FieldVerifier.java
│   │   ├── resources
│   │   │   └── org
│   │   │       └── codehaus
│   │   │           └── mojo
│   │   │               ├── client
│   │   │               │   ├── Messages_fr.properties
│   │   │               │   └── Messages.properties
│   │   │               └── Sample.gwt.xml
│   │   └── webapp
│   │       ├── Sample.css
│   │       ├── Sample.html
│   │       └── WEB-INF
│   │           └── web.xml
│   └── test
│       ├── java
│       │   └── org
│       │       └── codehaus
│       │           └── mojo
│       │               └── client
│       │                   └── GwtTestSample.java
│       └── resources
│           └── org
│               └── codehaus
│                   └── mojo
│                       └── SampleJUnit.gwt.xml
└── target
    └── generated-sources
        └── gwt
            └── org
                └── codehaus
                    └── mojo

33 directories, 26 files 
```

4) 在 Eclipse 上，选择“将现有项目导入工作区”

![导入的eclipse项目](../Images/e8f39f27c832d7ccd240dd96c8292f38.png)

5) 根据[gwt-maven-plugin](http://mojo.codehaus.org/gwt-maven-plugin/)的说明，导入的项目应该有类似下面的项目结构，

![预期的日食项目](../Images/cb1b101007182721b47ed75d0d43ea49.png)

最后通过我们比较 4) 和 5)，看到的问题似乎是导入根本没有添加任何 maven 依赖项，换句话说，生成的项目没有被验证为 maven 项目。那么，上面的步骤和下面的配置有什么问题呢？

```
gwt-maven-plugin 2.5.0
m2e 1.2.0.20120903-1050
eclipse 3.7.2
maven 3.0.4 
```

**@编辑**

成功运行“mvn gwt:run” ，但未能启动`DevMode`，`GWT Eclipse Plugin`

![gwt 开发模式错误](../Images/66cb3085ed9cc83a64305593c0b0c2cd.png)

**@编辑 2**

参考来自的链接`@Sachin Shekhar R`，我查看[了官方 GWT Wiki：使用 maven](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)，按照说明进行操作并测试[了 DynaTable RequestFactory 示例](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/dynatablerf/)。太好了，它确实有效！

不幸的是，Wiki 回应`gwt-maven-plugin`确实存在`archetype`使用中的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:05:45.633

gwt-maven-plugin 2.5.0 最适合 GWT 2.5.0。语句 Ran "mvn gwt:run" 成功，但未能通过 GWT Eclipse 插件启动 DevMode 有点令人困惑。

我还注意到，在你的情况下 -

1）生成的pom文件中表示2.5.0，eclipse截图表示2.0.4。这可能是因为您的 GPE 指向 GWT 2.0.4 并覆盖了 pom files 指令。

2) 如果您使用的是 maven gwt:run，那么 GWT Eclipse 插件是无关紧要的。开发模式**`either`**由

*   一个）`mvn gwt:run`
*   b) 当您右键单击项目并选择`Debug As`->时，通过 GWT Eclipse 插件`Web Application`

3) Maven 依赖项显示在您共享的屏幕截图中。你能扩展它并验证正在拾取哪些罐子。

`Edit`- 您可以从[http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven尝试一些额外的故障排除技巧](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)

我的猜测是配置**@** `Project properties, Google > Web Application, the "This project has a WAR directory"`

# android - ImageViews 画廊：如何固定图像的高度？

> ID：13643263
> 
> 赞同：0
> 
> 时间：2012-11-30T10:23:06.747
> 
> 标签：android, android-image, image-scaling

感谢您的帮助，并对愚蠢的问题感到抱歉...

好的，我有一个显示不同图像的画廊（我使用 setImageResource(resId)，图像是 /drawables 中的 jpgs）。

这些图像有不同的尺寸，我想让它们都缩放到相同的固定高度。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:28:53.017

首先将所有图像转换为 .png 文件，因为 android 使用 png 图像工作 gr8 然后将其作为

```
drawable-hdpi
drawable-ldpi
drawable-mdpi
drawable-xhdpi
drawable-xxhdpi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:36:26.883

您将图像从 /res 目录中放置为

```
drawable-hdpi
drawable-mdpi
drawable-ldpi
drawable-xhdpi 
```

# r - 从任何 fromat 转换日期

> ID：13643267
> 
> 赞同：0
> 
> 时间：2012-11-30T10:23:25.730
> 
> 标签：r

> **可能重复：**
> [将任意格式的字符串转换为 R 中的 dd-mm-yy hh:mm:ss](https://stackoverflow.com/questions/13642175/convert-string-of-anyformat-into-dd-mm-yy-hhmmss-in-r)

我正在从 csv 文件中读取日期值。因此格式会根据 csv 的日期格式而有所不同。如何将任何日期字符串转换为 dd-mm-yyy HH:mm:ss ？

```
 The input format are :

  dd/mm/yyyy HH:mm:ss
  dd/mm/yyyy
  dd-mm-yyyy HH:mm:ss
  dd-mm-yyyy
  mm-dd-yyyy HH:mm:ss
  mm-dd-yyyy
  mm/dd/yyyy

  yyyy-mm-dd HH:mm:ss
  yyyy-mm-dd 
```

我需要将所有这些格式转换为 dd-mm-yyyy HH:mm:ss

# javascript - JS 默认操作数

> ID：13643270
> 
> 赞同：1
> 
> 时间：2012-11-30T10:23:36.507
> 
> 标签：javascript, google-maps-api-3

我以为我理解默认操作数在 JavaScript 中是如何工作的，但显然不是。我试图首先确定用户的地理位置，并加载以这些坐标为中心的地图。如果设备无法确定这些坐标，它将回退到仅使用一些默认值加载地图。

您会注意到，在我的错误方法中，我`gMap.init()`没有参数调用，我认为这应该意味着变量应该分别设置为 57.700992 和 11.893836 `lat`。`lon`相反，我得到`Uncaught TypeError: Cannot read property 'coords' of undefined`. 我哪里错了？

另外，如果存在，`theApp.init()`我正在调用地图。`navigator.geolocation`这是否意味着不支持 HTML5 地理定位的浏览器甚至不会尝试加载地图？

```
var gMap = {
    init: function (position) {

            var lat = position.coords.latitude || 57.700992,
                lon = position.coords.longitude || 11.893836,
                geocoder =  new google.maps.Geocoder(),
                mapOptions = {
                    zoom: 12,
                    center: new google.maps.LatLng(lat, lon)
                },
                map = new google.maps.Map(document.getElementById('mapcanvas'), mapOptions);

    },
    error: function () {
        console.log('failed to retrieve geoposition');
        gMap.init();
    }
}

var theApp = {
    init: function () {

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(gMap.init, gMap.error, {timeout:10000});
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:28:10.837

`||`你在那里应该工作，除非**或** `position.coords`未定义`position`。在这种情况下，JavaScript 会抛出错误，因为您正试图访问未定义对象的属性。
您必须手动检查对象是否存在：

```
var lat, lon;
if(position && position.coords){
    lat = position.coords.latitude || 57.700992;
    lon = position.coords.longitude || 11.893836;
} 
```

如果`position`未定义，`if`则将中止，而不尝试检查`position.coords`.
（`&&`如果左边的参数为假，则不评估右边的参数）

是的，如果`navigator.geolocation`未定义，则不会加载地图：

```
navigator.geolocation.getCurrentPosition(gMap.init, gMap.error, {timeout:10000}); 
```

这个 ^ 不会被执行，所以`gMap.init`不会被执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T10:29:47.360

你应该试试

```
 var lat = position.coords.latitude ? window['position'] != undefined : 57.700992,
 lon = position.coords.longitude ? window['position'] != undefined : 11.893836, 
```

代替`||`

# memory-leaks - MVVM Silverlight 页面导航导致内存泄漏

> ID：13643271
> 
> 赞同：2
> 
> 时间：2012-11-30T10:23:38.027
> 
> 标签：memory-leaks, mvvm-light, silverlight-5.0

我们有一个使用 MVVM Light Toolkit (http://www.galasoft.ch/mvvm/) 的应用程序。该页面具有 Telerik Silverlight 控件（网格和图表）。

当我们从一个页面导航到另一个页面时，每次单击都会增加 100 MB 的内存使用量。最后经过大量点击它崩溃了。只有在浏览器关闭时才会释放内存。我们需要实现 ICleanup 吗？

# php - 用于比较两个表中的数据以合并到现有脚本中的 PHP 函数

> ID：13643273
> 
> 赞同：0
> 
> 时间：2012-11-30T10:23:40.190
> 
> 标签：php, mysql, html-table

我需要一个 PHP 脚本，它可以从 mysql 表中提取数据（玩家 ID）（到目前为止我知道该怎么做），然后使用该玩家 ID（1-5 位数字）在另一个表中找到相应的玩家名称。

基本上我需要显示哪个玩家在网站上发布了哪个消息。

这是脚本：

```
<?php
include('mysql_connection.php');

$c = mysqlConnect();

$locale = $_GET['locale'];
$last_bulletins_id = $_GET['bulletins_id'];

sendQuery ("set character_set_results='utf8'"); 
sendQuery ("set collation_connection='utf8_general_ci'"); 

if(strcmp($locale,"en") != 0)
    $locale = "en";
$result = sendQuery("SELECT * FROM bulletins WHERE id > ".$last_bulletins_id." and locale = '".$locale."' ORDER BY id DESC LIMIT 10");
echo '<table width=\"100%\">';
while($row = mysql_fetch_array($result, MYSQL_NUM))
{
    echo '<tr><td width=\"100%\"><b>Author: </b></td></tr>';
    echo '<tr><td width=\"100%\"><b>Date: </b>'.$row[2].'</td></tr>';
    echo '<tr><td width=\"100%\">'.nl2br($row[4]).'</td></tr>';
    echo '<tr><td width=\"100%\"><hr style="height: 2px; border: none; background: #515151;"></td></tr>';
}
echo '</table>';

mysqlClose($c);
?> 
```

但是，消息行没有玩家姓名。只有他的身份证。他的名字保存在另一个数据库中。所以我不得不以某种方式提取ID，用它在另一个表中找到相应的名称并显示相应的名称。

使用什么功能来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:08:18.697

第一个 DB：FDB ---> 表 'user' --> 列 'user_id'

第二个数据库：SDB ---> 表“用户”-> 列“用户 ID，用户名”

```
SELECT FDB.user.user_id, SDB.user.user_name 
FROM FDB.user, SDB.user
WEHRE FDB.user.user_id = SDB.user.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:29:50.340

如果玩家名称在同一个数据库中并且只是另一个表中，您可以为此使用连接

```
SELECT b.*, p.username
FROM bulletins b
join players p on p.user_id = b.user_id
WHERE b.id > $last_bulletins_id
      and b.locale = '$locale'
ORDER BY b.id DESC
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:30:04.600

在你`JOIN`的mysql查询中使用ceep player name和Id的表

# c# - 值不能为空。参数名称：用户名。启动 .net 应用程序

> ID：13643275
> 
> 赞同：0
> 
> 时间：2012-11-30T10:23:46.640
> 
> 标签：c#, .net, web-config, global-asax

当我从 Visual Studio 2010 启动应用程序时，出现以下错误：

> *值不能为空。\r\n参数名称: 用户名*

我可以`Global.asax.cs`在此方法的参数 sender 中看到此错误：

```
 void Application_Error(object sender, EventArgs e)
    {
    } 
```

问题是我没有在任何地方使用用户名和我的 web.config

```
 <configuration>
      <connectionStrings>
        <add name="MYSQL"
             connectionString="Driver={MySQL ODBC 5.2w Driver};Server=server_name;Database=database_name;uid=my_user_id;pwd=my_pwd"
             providerName="System.Data.Odbc"/>
      </connectionStrings>
      <system.web>
         <compilation debug="true" targetFramework="4.0" />
      </system.web>
  </configuration> 
```

欢迎任何帮助。

**编辑：**

更多信息：

我能看到的是：

```
sender.base.Profile.base.base.Session = '((System.Web.HttpApplication)(sender)).Session' threw an exception of type 'System.Web.HttpException' 
```

和

```
sender.Profile.base.LastActivityDate = '((System.Web.Profile.ProfileBase)(((ASP.global_asax)(sender)).Profile)).LastAct‌​ivityDate' threw an exception of type 'System.ArgumentNullException' 
```

和

```
sender.Profile.base.LastActivityDate.base = {"Value cannot be null.\r\nParameter name: username"} 
```

**编辑**

这段代码没有任何问题，我也可以执行查询。

```
 void Application_Start(object sender, EventArgs e)
    {
        string ConnStr = System.Configuration.ConfigurationManager.ConnectionStrings["MYSQL"].ConnectionString;
        OdbcConnection con = new OdbcConnection(ConnStr);
        con.Open();
        con.Close();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:30:41.807

您的连接字符串格式错误。

应该是：

```
Driver={MySQL ODBC 5.2w Driver};Server=server_name;Database=database_name;User=my_user_id;Password=my_pwd 
```

`User`而不是`uid`和`Password`而不是`pwd`。

有关不同选项，请参见[connectionstrings.com](http://connectionstrings.com/mysql)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:25:22.050

由于某种原因，此错误仅在我从 Visual Studio 运行应用程序时发生，而不是在将其部署在 IIS 中时发生。

感谢您的帮助！

# c - 在 C 中引用 fork() 的库

> ID：13643278
> 
> 赞同：7
> 
> 时间：2012-11-30T10:24:08.457
> 
> 标签：c, fork

定义 fork() 的库是什么。我正在学习使用 fork()。我发现 Standard I/O Library :`stdio.h` 足以让 fork() 工作，但这不适用于我的情况。

我`gcc`正在`Code::Blocks`使用`Windows 8 Pro`

我的代码是：

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
#include<malloc.h>
#include <time.h>

int main(void)
{

    pid_t process;
    process = fork();

    if(process< 0)
    {
        printf("fork failed");
    }
    if(process > 0)
    {
        printf("\nParent Process Executed");
    }

    if(process == 0)
    {
        printf("\nChild Process Executed");
    }
    return 0 ;
} 
```

我得到的确切错误是：

> useoffork.o:useoffork.c:(.text+0xf): 未定义对“fork”的引用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:30:33.820

C 标准库 (glibc) 实现`fork()`最终调用 UNIX/Linux 特定的系统调用来创建进程，在 Windows 上，您应该使用 winapi请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512%28v=vs.85%29.aspx)[`CreateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)中的此示例。

注意：Cygwin`fork()`只是一个包装器，`CreateProcess()`看看[fork() 是如何实现的？](http://cygwin.com/cygwin/faq/faq.api.html#faq.api.fork)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:27:13.333

> 我在 Windows 8 Pro 上的 Code::Blocks 中使用 gcc

你没有`fork`在窗户上。您可以使用 cygwin 或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-20T08:39:56.473

```
#include <unistd.h> 
```

C 库定义`fork()`.

它是 UNIX/Linux 特定的系统调用，用于在 linux 等上创建进程。

# c - C ODBC 将 sql 结果保存在动态数组中

> ID：13643285
> 
> 赞同：0
> 
> 时间：2012-11-30T10:24:34.690
> 
> 标签：c, odbc, dynamic-arrays

`C++`我开发了一个从 SQL 结果填充 xml的小工具。我使用这些`C ODBC`库连接到 SQL 服务器。此函数获取记录：

```
...
char result[5][64]; //More flexible 
...

for (i = 0; i < columns; i++) {
    SQLBindCol(stmt, i + 1, SQL_C_CHAR, result[i], sizeof(result[i]), &indicator[i]);
}

while (SQL_SUCCEEDED(SQLFetch(stmt))) {
    for (i = 0; i < columns; i++) {
         if (indicator[ i ] == SQL_NULL_DATA) {
            cout << format("Column %1% : NULL") % i << endl;
         }
         else {
            cout << format("Column %1% : %2%") % i % result[i] << endl;
         }
    }
} 
```

我将结果保存在`result char array`. 我想以更动态的方式执行此操作。如果有更多记录或值更长，则保存。我知道`malloc`in`C`和`new`in `C++`，但我怎么能在我的情况下使用它呢？任何的想法？我应该切换到某行`tiodbc`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:40:11.320

首先计算来自数据库的记录数，然后使用 malloc 分配该大小的内存。我认为这会让我更加动态

# wpf - 是否可以使用 C# WinForms 创建像 Photoshop 这样的程序？

> ID：13643287
> 
> 赞同：0
> 
> 时间：2012-11-30T10:24:37.450
> 
> 标签：wpf, winforms, performance, bitmap, photoshop

所以我想知道，在性能方面，是否有可能创建像 Photoshop 这样的图形编辑器，能够处理图层（至少 25 层）上的位图图形。它还需要处理各种类型的画笔，复制粘贴图形块等。好吧，Photoshop在基础级别可以做些什么。

WinForms 能够做到这一点而不会很慢吗？还是 WPF 是唯一的好选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:02:33.327

由于[Paint.Net](http://getpaint.net)使用 Winforms，这是可能的。您可以从[3.36.7 的这个 fork 中](http://code.google.com/p/openpdn/)查看源代码（发布源代码的最后一个版本）

# c# - 并行随机数发生器

> ID：13643289
> 
> 赞同：2
> 
> 时间：2012-11-30T10:24:41.867
> 
> 标签：c#, .net, random

我想知道是否有任何随机数生成器可以并行生成随机数，这样生成的序列之间不应该有依赖关系。

具体来说，如果我有两个任务并且每个任务都生成随机数，那么一定没有依赖关系，也没有重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:34:52.580

该`RNGCryptoServiceProvider`课程应满足您的需求。

它被设计为不如 确定性`System.Random`，并且也是线程安全的。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:24:08.503

可能想看看这篇文章： http: [//msmvps.com/blogs/jon_skeet/archive/2009/11/04/revisiting-randomness.aspx](http://msmvps.com/blogs/jon_skeet/archive/2009/11/04/revisiting-randomness.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T18:21:11.933

您可能想查看这篇关于并行生成随机数的文章：

[以线程安全的方式获取随机数](http://blogs.msdn.com/b/pfxteam/archive/2009/02/19/9434171.aspx)

前段时间它帮助我解决了同样的问题。

# c# - 网格视图中动态创建控件的排列

> ID：13643296
> 
> 赞同：0
> 
> 时间：2012-11-30T10:25:12.600
> 
> 标签：c#, wpf, xml, gridview

这是我从 XML 文件中获取值的代码：

```
foreach (XmlNode node in DOC.SelectNodes("//CheckMarkObject"))
{
    FbCheckMark checkmark = new FbCheckMark();

    checkmark.Name = node.SelectSingleNode("Name").InnerText;
    checkmark.Label = node.SelectSingleNode("Label").InnerText;

    if (node.SelectSingleNode("IsChecked").InnerText == "0")
    {
        checkmark.IsChecked = false;
    }
    else
    {
        checkmark.IsChecked = true;
    }

    listCheckMarks.Add(checkmark);

} 
```

现在是在运行时创建控件的代码：

```
for (int i = 0; i < listCheckMarks.Count; i++)
{
if (listCheckMarks[i].checkMark.Equals(checkMark))
{

CheckBox cb = new CheckBox();
TextBlock cbtextblock = new TextBlock();
cbtextblock.Text = listCheckMarks[i].Label;
cbtextblock.Height = 27;
cbtextblock.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
cbtextblock.Margin = new Thickness(12, 20, 0, 0);
cbtextblock.VerticalAlignment = System.Windows.VerticalAlignment.Top;
cb.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
cb.VerticalAlignment = System.Windows.VerticalAlignment.Top;
cb.Margin = new Thickness(150, 21, 0, 0);
cb.Height = 50;
cb.Width = 100;
cb.Name = listCheckMarks[i].Name;

LayoutRoot.Children.Add(cbtextblock);
LayoutRoot.Children.Add(cb);

}
} 
```

当我在我的 XML 文件中进行更改时，即两次创建“CheckMark”标签。结果控制覆盖前一个。我想在前一个控件下安排新控件。请建议我该怎么办？像在android中那样使用线性布局？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:36:15.220

尝试将元素插入`StackPanel`并为其设置`Orientation`属性。

试试这个例子：

```
StackPanel container = new StackPanel();
LayoutRoot.Children.Add(container);

for (int i = 0; i < listCheckMarks.Count; i++)
{
   if (listCheckMarks[i].checkMark.Equals(checkMark))
   {

       StackPanel childContainer = new StackPanel();
       childContainer.Orientation = Orientation.Horizontal;

       CheckBox cb = new CheckBox();
       TextBlock cbtextblock = new TextBlock();
       cbtextblock.Text = listCheckMarks[i].Label;
       cbtextblock.Height = 27;
       cbtextblock.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
       cbtextblock.Margin = new Thickness(12, 20, 0, 0);
       cbtextblock.VerticalAlignment = System.Windows.VerticalAlignment.Top;
       cb.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
       cb.VerticalAlignment = System.Windows.VerticalAlignment.Top;
       cb.Margin = new Thickness(150, 21, 0, 0);
       cb.Height = 50;
       cb.Width = 100;
       cb.Name = listCheckMarks[i].Name;

      childContainer.Children.Add(cbtextblock);
      childContainer.Children.Add(cb);

      container.Children.Add(childContainer);

  }
} 
```

# c++ - C++ 字母构建顺序

> ID：13643302
> 
> 赞同：0
> 
> 时间：2012-11-30T10:25:28.043
> 
> 标签：c++, build

这是我在 Visual Studio 2010 中构建输出的片段：

> 1>----- 构建开始：项目：引擎，配置：Release_PG Win32 ------ 1>icl：警告 #10187：PGOPTI 检测禁用多文件优化 1>icl：警告 #10188：PGOPTI 检测禁用 IP优化
> 1> !BasketNovel.cpp 1> 编译 precompiled.h - 每个项目应该只发生一次。1> 1> 编译BasketNovel.h。1>
> 
> 1> Camera.cpp 1> 编译 precompiled.h - 每个项目应该只发生一次。1> 1> 编译BasketNovel.h。1>
> 
> 1> Console.cpp 1> 编译 precompiled.h - 每个项目应该只发生一次。1> 1> 编译BasketNovel.h。1>
> 
> 1> Entity.cpp 1> 编译 precompiled.h - 每个项目应该只发生一次。1> 1> 编译 BasketNovel.h。
> 
> 1> 1> 字体.cpp

据我所知，编译器按字母顺序构建我的 .cpp 文件。我不太熟悉构建概念。这是正常行为吗？

注意：我使用的是英特尔 C++ 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:27:55.020

编译的顺序并不重要。构建最终产品（可执行文件、库等）的重要步骤是链接步骤，编译步骤中的各个部分将链接在一起。

# sql-server-2008 - 我们可以拒绝从特定表中删除吗？

> ID：13643306
> 
> 赞同：1
> 
> 时间：2012-11-30T10:25:49.277
> 
> 标签：sql-server-2008

对于 sql server 2008 中的特定用户，有没有办法拒绝删除一组表的权限。我希望用户不能从数据库中的某些表中删除数据，不想使用而不是触发器来触发特定表原因我有90张桌子？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:27:33.470

绝对地！

```
DENY DELETE ON (YourTableNameHere) TO YourUserNameHere 
```

有关更多详细信息，请参阅[精彩而广泛的 MSDN 联机丛书文档](http://msdn.microsoft.com/en-us/library/ms173724.aspx)！

如果要拒绝对数据库中**所有**`DELETE`表的权限，可以使用：

 **```
DENY DELETE TO YourUserNameHere 
```

或者，如果您以将表分组在**schematas**中的方式构建数据库，那么您也可以拒绝来自特定模式的用户。

如果您没有将 90 个表分组到一个单独的模式（或两个、三个模式）中，那么就**没有简单、神奇的方法**可以一次将权限应用于 90 个表。每个语句可以是**所有表**、特定模式或特定数据库对象（如表） 。`DENY`

**更新：**您始终可以使用系统目录视图`DENY`为您生成这些语句，然后使用您需要的那些：

```
SELECT 
    'DENY DELETE ON ' + t.NAME + ' TO (youruser)'
FROM sys.tables t 
```

这将生成一个语句列表作为其输出（例如在 SQL Server Management Studio 中），以拒绝`DELETE`您的用户的权限。将这些行复制到文本编辑器中并删除那些您不需要的行 - 这样您就有了长长的`DENY`语句列表！**

# c# - C# 正则表达式匹配 15 个字符、单个空格、字母数字

> ID：13643307
> 
> 赞同：6
> 
> 时间：2012-11-30T10:25:53.567
> 
> 标签：c#, regex

我需要在 C# 中使用 Regex 在以下条件下匹配字符串：

1.  整个字符串只能是字母数字（包括空格）。
2.  最多不得超过 15 个字符（包括空格）。
3.  第一个和最后一个字符只能是一个字母。
4.  除了字符串的第一个和最后一个字符之外，一个空格可以在任何地方出现多次。（不应允许多个空格一起使用）。
5.  应该忽略大小写。
6.  应该匹配整个单词。

如果这些先决条件中的任何一个被破坏，则不应遵循匹配。

这是我目前拥有的：

```
^\b([A-z]{1})(([A-z0-9 ])*([A-z]{1}))?\b$ 
```

以下是一些应该匹配的测试字符串：

*   堆栈溢出
*   我是最棒的
*   一个
*   超人23s
*   一二三

还有一些不应该匹配的（注意空格）：

*   堆栈 [double_space] 溢出岩石
*   23你好
*   这是超过 15 个字符长
*   你好23
*   [space_here]嘿

等等

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:31:16.253

你应该使用`lookaheads`

```
 |->matches if all the lookaheads are true
                                                               --
^(?=[a-zA-Z]([a-zA-Z\d\s]+[a-zA-Z])?$)(?=.{1,15}$)(?!.*\s{2,}).*$
-------------------------------------- ----------  ----------
                 |                       |           |->checks if there are no two or more space occuring
                 |                       |->checks if the string is between 1 to 15 chars
                 |->checks if the string starts with alphabet followed by 1 to many requireds chars and that ends with a char that is not space 
```

[你可以在这里](http://regexhero.net/tester/)试试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:47:09.150

试试这个正则表达式： -

```
"^([a-zA-Z]([ ](?=[a-zA-Z0-9])|[a-zA-Z0-9]){0,13}[a-zA-Z])$" 
```

**解释 ： -**

```
[a-zA-Z]    // Match first character letter

(                         // Capture group
    [ ](?=[a-zA-Z0-9])    // Match either a `space followed by non-whitespace` (Avoid double space, but accept single whitespace)
            |             // or
    [a-zA-Z0-9]           // just `non-whitespace` characters

){0,13}                  // from `0 to 13` character in length

[a-zA-Z]     // Match last character letter 
```

**更新 ： -**

要处理单个字符，您可以将第一个字符之后的模式设为可选，正如`@Rawling`注释中所指出的那样：-

```
"^([a-zA-Z](([ ](?=[a-zA-Z0-9])|[a-zA-Z0-9]){0,13}[a-zA-Z])?)$"
         ^^^                                            ^^^
     use a capture group                           make it optional 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:34:29.793

而我的版本，再次使用前瞻：

```
^(?=.{1,15}$)(?=^[A-Z].*)(?=.*[A-Z]$)(?![ ]{2})[A-Z0-9 ]+$ 
```

解释：

```
^               start of string
(?=.{1,15}$)    positive look-ahead: must be between 1 and 15 chars
(?=^[A-Z].*)    positive look-ahead: initial char must be alpha
(?=.*[A-Z]$)    positive look-ahead: last char must be alpha
(?![ ]{2})      negative look-ahead: string mustn't contain 2 or more consecutive spaces
[A-Z0-9 ]+      if all the look-aheads agree, select only alpha-numeric chars + space
$               end of string 
```

这也需要 IgnoreCase 选项设置

# iphone - 为什么 MKPolyline 不显示在 MKMapView 上？

> ID：13643310
> 
> 赞同：1
> 
> 时间：2012-11-30T10:26:06.983
> 
> 标签：iphone, mapkit, mkoverlay

我对开发 iphone 应用程序的程序非常陌生，我想知道为什么我用 2 个 MKMapPoints 创建的 MKPolyline 没有出现在我插入到视图中的 MKMapView 中。这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];

map = [[MKMapView alloc] initWithFrame:self.view.bounds];

MKMapPoint * pointsArray = malloc(sizeof(CLLocationCoordinate2D)*4);

CLLocationCoordinate2D punto1;
punto1.latitude =39.468502;
punto1.longitude =-0.398469;

MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc]init];
annotationPoint.coordinate = punto1;
annotationPoint.title = @"Point 1";

MKPointAnnotation *annotationPoint2 = [[MKPointAnnotation alloc]init];
annotationPoint2.coordinate = CLLocationCoordinate2DMake(39.472312,-0.386453);
annotationPoint2.title = @"Point 2";

[map addAnnotation:annotationPoint];
[map addAnnotation:annotationPoint2];

pointsArray[0]= MKMapPointForCoordinate(punto1);

pointsArray[1]= MKMapPointForCoordinate(CLLocationCoordinate2DMake(39.467011,-0.390015));

pointsArray[2]= MKMapPointForCoordinate(CLLocationCoordinate2DMake(39.469926,-0.392118));

pointsArray[3]= MKMapPointForCoordinate(CLLocationCoordinate2DMake(39.472312,-0.386453));

routeLine = [MKPolyline polylineWithPoints:pointsArray count:4];

free(pointsArray);

[map addOverlay:routeLine];

MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(CLLocationCoordinate2DMake(39.467011,-0.392515), 1100, 1100);
[map setRegion:region];

[self.view insertSubview:map atIndex:0];

}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay

{

MKOverlayView* overlayView = nil;

MKPolylineView  * routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];

routeLineView.fillColor = [UIColor blueColor];

routeLineView.strokeColor = [UIColor orangeColor];

routeLineView.lineWidth = 3;

overlayView = routeLineView;

return overlayView;

} 
```

注释没问题，它们在地图上正确显示。希望有人能帮忙，谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:18:59.137

未`MKPolyline`显示，因为`delegate`未设置地图。

如果未设置地图的属性，则不会调用`viewForOverlay` *委托方法。*`delegate`因为委托方法永远不会被调用，`MKPolylineView`永远不会被创建，等等......

创建 后`MKMapView`，设置其`delegate`：

```
map = [[MKMapView alloc] initWithFrame:self.view.bounds];
map.delegate = self;  // <-- add this 
```

我想提一些其他不相关的点：

*   由于您将`MKMapPoint`值放入 中`pointsArray`，因此`malloc`应该使用`sizeof(MKMapPoint)`而不是`sizeof(CLLocationCoordinate2D)`. 它碰巧使用错误的代码，因为两个结构碰巧是相同的大小。但是您仍然应该使用正确的代码。

*   `MKPolyline`也有一个`polylineWithCoordinates:count:`方法，所以你可以通过`CLLocationCoordinate2D`而不是`MKMapPoint`结构。这可以更容易阅读、理解，并避免必须从坐标转换为地图点。

*   `MKPolylineView`仅用于`strokeColor`设置`fillColor`for 它什么都不做。

*   在委托方法中，使用传递给方法的参数而不是外部声明的参数`viewForOverlay`会更好。如果您想添加多个叠加层，这将非常重要。您还将首先检查类是什么类型，然后为它创建适当的视图。`overlay``routeLine``overlay`

# iis-express - 无法在 Windows 7 中打开 IIS 7.5

> ID：13643311
> 
> 赞同：0
> 
> 时间：2012-11-30T10:26:08.057
> 
> 标签：iis-express

我使用的是 Windows 7、Visual Studio 2010。我刚刚从 www.microsoft.com 下载并安装了 IIS 7.5。安装也顺利结束。但是我无法以我在互联网上找到的任何方式找到 IIS。我尝试了 Run -> inetmgr ，控制面板 -> 管理工具 -> IIS 。但是我在任何地方都找不到 IIS。我还在万维网发布服务的 stackoverflow 论坛中找到了答案。但我也找不到。请帮我。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:23:02.423

我已经找到了解决方案。我在控制面板中启用了 IIS。控制面板中有一个选项为打开/关闭 Windows。在那我检查了 IIS 菜单下的所有子文件夹。现在我可以打开 IIS 管理器了。如果有人遇到此问题，您也可以尝试此步骤。

# timer - Erlang计时器不准时返回

> ID：13643313
> 
> 赞同：0
> 
> 时间：2012-11-30T10:26:13.443
> 
> 标签：timer, erlang

我有以下 Erlang 函数，它调用另一个函数并等待 40 秒然后打印一些东西，问题是当我尝试运行程序时，接收语句返回到 Erlang shell 需要超过 40 秒的时间. 这个问题的原因可能是什么？

```
reboot_node_return(Sc) ->
    linux(Sc, "reboot -f"),
    receive _ -> ok
    after 40000 -> 
        io:format("successfull reboot:~n")
end. 
```

-一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:31:25.410

```
reboot_node_return(Sc) ->
    linux(Sc, "reboot "),
    receive _ -> ok
    after 40000 -> 
        io:format("successfull reboot:~n")
end. 
```

# objective-c - UIView的子类，不能设置自己的layer.cornerRadius？

> ID：13643314
> 
> 赞同：-2
> 
> 时间：2012-11-30T10:26:14.137
> 
> 标签：objective-c, ios

我将 UIVIew 子类化为自定义视图。

```
-(UIMyMessageView*)init:(NSString*)withMessage
 {
   [super initWithFrame:messageFrame];

   // I Would like to do : 
   self->layer.cornerRadius = 8; // This doesn't compile
 } 
```

为什么我不能设置自己的图层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:28:17.577

包括 QuartzCore 框架

```
#import <QuartzCore/QuartzCore.h> 
```

还要在你的项目中包含这个框架。

[http://meandmark.com/blog/2011/03/xcode-4-adding-a-framework-to-your-project/](http://meandmark.com/blog/2011/03/xcode-4-adding-a-framework-to-your-project/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:27:21.400

你有没有尝试过：

```
self.layer.cornerRadius = 8; 
```

# mysql - MySQL 触发器语法错误并集二/三表

> ID：13643321
> 
> 赞同：0
> 
> 时间：2012-11-30T10:26:48.043
> 
> 标签：mysql, sql, triggers

我写了以下代码：

```
create trigger money after update on `things`
for each row
begin
   Select @c1=sum(`thing_cost`) from `things`
   UNION
   Select @c2=sum(`salary`) from `dude_base`
   Update `current` set `curr_cash`=@c1*@c2/100
end;
$$ 
```

表“东西”有：

```
id1 (PK)
name
thing_cost 
```

表 dude_base 有：

```
id2 (PK)
salary
name, etc. irrevelant 
```

表电流有：

```
id1 (FK)
id2(FK)
curr_cash 
```

我收到以下错误：

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds to   
 your MySQL server version for the right syntax to use
 near 'Update `current` set `curr_cash`=@c1*@c2/100; END' at line 7 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:32:25.820

我认为你应该有一个`;`分号

```
Select @c2=sum(`salary`) from `dude_base`; 
```

结束此查询，因为`UPDATE`是另一个查询

**// 编辑**

像这样试试

```
SET @c1 = (SELECT sum(`thing_cost`) from `things`);
SET @c2 = (SELECT sum(`salary`) from `dude_base`);
UPDATE `current` SET `curr_cash` = @c1 * @c2 / 100 
```

# c# - 查看字符串列表中的项目是否包含某个字符串

> ID：13643323
> 
> 赞同：0
> 
> 时间：2012-11-30T10:26:54.953
> 
> 标签：c#, string

基本上我有一个这样的字符串列表：

```
/forum/
/phpld/
/php/ 
```

现在我想检查是否有任何网址： [http ://www.url.com/forum/](http://www.url.com/forum/)

包含字符串列表中的任何值。

在上述情况下，它应该匹配，因为 /forum/ 在 url 中。

我在想这样的事情：

```
foreach (string filter in _filterList)
{
    if (PAGEURL.Trim().Contains(filter.Trim()))
    {
        _parseResultsFinal.Add(PAGEURL);
        filteredByURL++;
        break;
    }
} 
```

但我无法让上述内容准确，我该怎么做？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:31:38.067

试试这个：

```
_filterList.Any(filter => PAGEURL.Trim().Contains(filter.Trim())); 
```

您可以`PAGEURL = PAGEURL.Trim()`在此表达式之前不每次都运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:39:45.673

String.Contains() 区分大小写且不区分区域性，因此如果存在任何大小写差异，可能会导致您遇到“不准确”。

如果您怀疑这可能是问题所在（甚至作为可行的替代方案），您可以尝试将其作为“if”子句：

`if (PAGEURL.Trim().IndexOf(filter.Trim(), StringComparison.OrdinalIgnoreCase) >= 0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:31:53.823

我不太清楚你想在这里做什么，好像一个 URL 包含任何过滤器，然后你想将该 URL 添加到列表中。

```
List<string> parseResultsFinal = new List<string>();
if (_filterList.Any(x => PAGEURL.Contains(x))
{
   parseResultsFinal.Add(PAGEURL);
} 
```

尝试使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:33:12.887

我会尝试以下方法：

```
var trimmedUrl = PageURL.Replace("http://", "");
var parts = trimmedUrl.Split("/");

var filterList = new List<string> { "forum", "phpld", "php" }

var anyContains = parts.Any(o => filterList.contains(o)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T10:42:19.350

我会将段过滤器更改为简单的单词（没有斜线，在添加到过滤器列表*之前修剪）：*

```
var _filterList = new List<string>()
{
    "forum", "phpld", "php"
}; 
```

并使用正则表达式搜索 url 中的段（忽略大小写，url 末尾的可选斜杠）

```
bool IsSegmentInUrl(string url, string segment)
{
    string pattern = String.Format(".*/{0}(/|$)", segment);
    return Regex.IsMatch(url, pattern, RegexOptions.IgnoreCase);
} 
```

用法：

```
if (_filterList.Any(filter => IsSegmentInUrl(PAGEURL, filter))
{
      _parseResultsFinal.Add(PAGEURL);
      filteredByURL++;
} 
```

* * *

更具可读性的解决方案 - 创建扩展方法

```
public static bool ContainsSegment(this string url, string segment)
{
    string pattern = String.Format("http://.*/{0}(/|$)", segment);
    return Regex.IsMatch(url, pattern, RegexOptions.IgnoreCase);
} 
```

现在代码看起来非常自描述：

```
if (_filterList.Any(filter => PAGEURL.ContainsSegment(filter))
{
      _parseResultsFinal.Add(PAGEURL);
      filteredByURL++;
} 
```

# asp.net-mvc - ASP.NET MVC 在部分视图中更新，其模型与主视图不同

> ID：13643326
> 
> 赞同：0
> 
> 时间：2012-11-30T10:27:08.103
> 
> 标签：asp.net-mvc

我是 MVC 的新手，我遇到了一些问题。我正在做一个项目，我有几个表 - 公司和用户。每个公司可以有多个用户。我创建了一个注册视图，它有效地将两者的字段合并到一个视图中。我还有一个用于编辑用户的单独视图，以及另一个用于在现有公司中创建用户的视图。使用部分视图对我来说很有意义，因此我只需要在一个地方更新 UI。但是，我遇到了一些问题。当我在创建/编辑中使用部分时，它工作正常，因为我只是将它用作

```
@Html.Partial("UserDetails",Model) 
```

但是，当我在注册中使用它时，我尝试做

```
@Html.Partial("UserDetails",Model.AutoFirstUser) 
```

AutoFirstUser 是我创建的一个属性，如果不存在用户，它会自动创建一个用户，否则它只会返回公司中的第一个用户。这似乎是将数据合并到单个视图中的最简单方法。现在考虑一下，我意识到我可以只使用 User 作为模型并将 User.Firm 用于其他字段，但这只会将问题转移到 FirmDetails Partial View 上。

无论如何，我发现的问题是，尽管用户的字段是可见的并且可以正确验证，但是当我将表单发回时，他们没有找到回到模型中的方法，大概是因为模型实际上位于不同的“命名空间”中" 因为部分视图期望主要模型是用户，而注册视图期望它是公司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:14:17.033

看来 Partials 不是我想要的 - 我已经用编辑器模板解决了这个问题

# arrays - split-sequence- 用双倍空格分隔序列

> ID：13643329
> 
> 赞同：1
> 
> 时间：2012-11-30T10:27:14.937
> 
> 标签：arrays, input, lisp, sequence

我知道如何用空格分隔字符串序列：

```
(defun ff-cols (dir file)
  (with-open-file (ff-cols-str pathname :direction :input)
    (length (split-sequence #\Space (read-line ff-cols-str nil 'eof))))) 
```

但是如何用双空格分隔序列？平面文件通常具有由双空格分隔的列。

```
(split-sequence "  " "1  2  3  4") 
```

返回

```
("1  2  3  4") ;
10 
```

还，

```
(split-sequence #\Space "1  2  3  4") 
```

返回

```
("1" "" "2" "" "3" "" "4") ;
10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:42:52.427

试试这个：

```
(split-sequence-if (lambda (s) (equal s "  ")) "1  2  3  4") 
```

或这个：

```
(split-sequence #\Space "1  2  3  4" :remove-empty-subseqs t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:03:06.957

```
(ql:quickload "cl-ppcre")
(cl-ppcre:split "\\s\\s" "One  Two Three  Four   Five")
("One" "Two Three" "Four" " Five") 
```

显然，您可以从其他也使用正则表达式的语言中学到的任何东西都适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:36:39.540

这可能是因为您的字符串没有用双空格分隔

```
(split-sequence "  " "1 2 3 4") 
```

尝试

```
(split-sequence "  " "1  2  3  4") 
```

# javascript - 调试asp.net站点的javascript

> ID：13643334
> 
> 赞同：0
> 
> 时间：2012-11-30T10:27:32.273
> 
> 标签：javascript, jquery, firebug

我有一个带有选项选择下拉菜单的网站，所有项目以前都是用英文写的，现在我只是将它翻译成西班牙语，但下拉项目全部翻回英文。

我使用firebug回溯加载的javascript文件并在加载过程中观看页面，我发现如果我禁用浏览器上的javascript功能，我可以查看它，但如果我打开它，西班牙语项目会被替换。

您能否分享一种调试此类 javascript 问题的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:36:20.410

可能是您在 aspx 中使用元资源键。检查 App_Local_Resources

```
<asp:Label ID="Label1" runat="server" Text="Spanish Text" meta:resourcekey="Pagelet_4ea9ca9465564362a4955d7e31931f87" /> 
```

您的 meta:resourcekey（当前资源文件）可以覆盖西班牙语文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:37:04.700

Firebug 应该足以捕获这些类型的错误，或者使用 Chrome 及其开发工具，或 IE 及其开发工具。如果您可以将一些执行此操作的代码发布到 SO，我们可能会看到一些东西。

我们真的需要看看你是如何填充下拉菜单以获得更多帮助的。

# ios - UITextView 将高度从纵向更改为横向

> ID：13643336
> 
> 赞同：2
> 
> 时间：2012-11-30T10:27:38.717
> 
> 标签：ios, rotation, uitextview

我有一个 textView 作为 a 的子视图`UIView`，它是根据此方案的 scrollView 的子视图：

```
-UIScrollView *scrollView
   -UIView *containerView
       -UITextView *textView
       -MKMapView *mapView
       -UIImageView *imageView 
```

我在旋转过程中遇到问题，在从纵向到横向的过渡中，TextView 被缩短，并且不再显示旋转前可见的文本的一部分。相反，从风景到肖像的作品。Cosa 可以吗？textView 完全在代码中创建，没有 IBOutlet。

`UITextView`是可变高度，里面的contentSize设置`viewDidLoad`如下：

```
 - (void)viewDidLoad
 {
       [super viewDidLoad];
       //....
       self.textView = [[UITextView alloc]init];
       self.textView.backgroundColor =[UIColor clearColor];

       CGRect frame;
       frame = self.textView.frame;
       frame.size.height= [self.textView contentSize].height;
       [self.textView setContentSize:self.textView.contentSize];
       self.textView.frame = frame;
       NSLog(@"The contentSize of TextView is %@",NSStringFromCGSize 
                                                (self.textView.contentSize));

      //The contentSize of TextView is {0, 161032}
      //........

    } 
```

`willRotateToInterfaceOrientation:duration`看起来像：

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {
        CGSize containerSize = CGSizeMake(768, 5000);

        self.scrollView.contentSize = containerSize;
        self.containerView.frame = CGRectMake(0, 0, 768, 5000);

        [self layoutPortrait];
    }
    else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
        CGSize containerSize = CGSizeMake(1004, 5000);

        self.scrollView.contentSize = containerSize;
        self.containerView.frame = CGRectMake(0, 0, 1024, 5000);

        [self layoutLandscape];
    }
    else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){
        CGSize containerSize = CGSizeMake(1004, 5000);

        self.scrollView.contentSize = containerSize;
        self.containerView.frame = CGRectMake(0, 0, 1024, 5000);

        [self layoutLandscape];
    }
} 
```

处理帧旋转的两种方法是：

```
 -(void) layoutPortrait{
        //...
        NSLog(@"the height of textView è %f", self.textView.contentSize.height);
        //the height of textView è 161032.000000

      self.textView.frame =CGRectMake(56, 490, self.viewImages.frame.size.width, self.textView.contentSize.height);
       //.....
 }
 -(void) layoutLandscape{
       //......
      NSLog(@"The height of textView è %f", self.textView.contentSize.height); 
      /*The height of textView è 2872.000000 
        (This after rotation from portrait to landscape)*/

      self.textView.frame = CGRectMake(170, 495, self.viewImages.frame.size.width, self.textView.contentSize.height);
      //......
 } 
```

我希望 textView 的高度在旋转期间保持固定。与 UIImageView 和 MKMapView 一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:06:41.677

试试这个：

*   在 viewDidLoad 在 init 之后添加这一行：

    `self.textView.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth;`

*   在处理框架旋转方法中，将 contentSize 更改为框架：

    ```
    -(void) layoutPortrait{
        //...
        NSLog(@"the height of textView è %f", self.textView.contentSize.height);
        //the height of textView è 161032.000000

        self.textView.frame =CGRectMake(56, 490, self.viewImages.frame.size.width, self.textView.frame.height);
        //.....
    }
    -(void) layoutLandscape{
        //......
        NSLog(@"The height of textView è %f", self.textView.contentSize.height); 
        /*The height of textView è 2872.000000 
        (This after rotation from portrait to landscape)*/

        self.textView.frame = CGRectMake(170, 495, self.viewImages.frame.size.width, self.textView.frame.height);
        //......
    } 
    ```

那应该可以解决问题（我在Windows中，所以我无法尝试）

# php - 检测页面是否被机器人访问

> ID：13643344
> 
> 赞同：2
> 
> 时间：2012-11-30T10:28:16.860
> 
> 标签：php, arrays, user-agent, bots

有没有办法检测页面是否被机器人访问？

我尝试检查`$_SERVER['HTTP_USER_AGENT']`是否在数组中。它工作正常。

```
$bot = array("Slurp", "Scooter", "URL_Spider_SQL", "Googlebot", "Firefly", "WebBug", "WebFindBot", "crawler",  "appie", "msnbot", "InfoSeek", "FAST", "Spade", "NationalDirectory",);

if (in_array($_SERVER['HTTP_USER_AGENT'], $bot)) {
    return true;
}
else {
return false;
} 
```

有没有更好更安全的方法来做到这一点？[（除了必须输入所有机器人名称之外？）我的方法和这个](https://stackoverflow.com/a/677434/1609555)有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:46:42.853

好吧，在谷歌内部进行了一些挖掘之后，我发现了这个。

```
$agent = strpos(strtolower($_SERVER['HTTP_USER_AGENT']));
foreach($bots as $name => $bot)
{
    if(stripos($agent,$bot)!==false)
    {
        return true;
    }
    else {
        return false;
    }
} 
```

感谢戴尔的支持！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T22:37:31.683

看着 Sid 的答案，并在谷歌上搜索我在[这个网站](http://www.beautifulcoding.com/snippets/178/a-simple-php-bot-checker-are-you-human/)上发现了其他检测方式。看：

```
function detect_is_bot () {
    $bots = array("Slurp", "Scooter", "URL_Spider_SQL", "Googlebot", "Firefly", "WebBug", "WebFindBot", "crawler",  "appie", "msnbot", "InfoSeek", "FAST", "Spade", "NationalDirectory",);
    $agent = strtolower($_SERVER['HTTP_USER_AGENT']);
    foreach($bots as $bot) {
        if(stripos($agent,$bot)!==false) {return true;}
    }
    return false;
} 
```

# python - Python：在其他脚本中包含/复制行？

> ID：13643347
> 
> 赞同：1
> 
> 时间：2012-11-30T10:28:26.723
> 
> 标签：python, parsing, file-io, import, ironpython

考虑 y.py：

```
def f():
    x = 1
    y = 2 
```

和 x.py：

```
from y import f
    f()
    a = x + 1
    b = y + 1 
```

显然 x.py 不起作用，因为 yf() 没有返回任何东西。那么我该如何处理我想从一个脚本复制多行到另一个脚本中的某个预定点的情况，最终在 x.py 执行之前看起来像下面这样？

```
x = 1
y = 2
a = x + 1
b = y + 1 
```

请注意，这个简单的示例仅包含变量声明。实际上 y.py 将包含变量声明、流控制、类、函数等的混合。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:36:02.040

我认为你需要重新考虑你的程序结构。您可以通过使用来完成这项工作`execfile`，但这将是可怕的。Python 有命名空间和类是有原因的：你应该使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:38:49.400

你要的是内联机制，一个宏。Python 没有这些，并且有充分的理由。您最需要的肯定可以使用现有的 Python 结构来完成，例如函数或类。如果我们要提供帮助，您需要提供更多代码。

根据您的基本示例，考虑如何从“f”函数重构代码，以便“x”和“y”是可以独立调用的独立函数（而不是局部变量），并且可以在你的“x.py”程序。许多局部变量是一种代码味道，所以我会开始将其重构为更易于管理和独立的元素。

# mysql - mysql数据库。删除所有带有外键的表。复制所有表

> ID：13643349
> 
> 赞同：0
> 
> 时间：2012-11-30T10:28:30.193
> 
> 标签：mysql, mysqldump

我有两个数据库。第一个数据库由站点使用。第二个用于测试站点的调试。

每天我必须多次更新测试站点数据库。

我没有 root 访问权限来删除和创建调试数据库。所以我必须删除所有忽略外键的表；从第一个数据库备份和恢复表到第二个。

所有表都是带有外键的 InnoDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:28:30.193

```
#!/bin/bash
USERNAME=root
PASSWORD=xxx
DBFROM=xxx
DBTO=xxx
HOST=localhost

MYSQL_OPTS="-u $USERNAME -p$PASSWORD -h $HOST"

TABLES=$(mysql $MYSQL_OPTS -BNe "show tables" $DBTO | tr '\n' ',' | sed -e 's/,$//' | awk '{print "SET FOREIGN_KEY_CHECKS = 0;DROP TABLE IF EXISTS " $1 ";SET FOREIGN_KEY_CHECKS = 1;"}')
mysql $MYSQL_OPTS -BNe "$TABLES" $DBTO
mysqldump $MYSQL_OPTS $DBFROM | mysql $MYSQL_OPTS $DBTO 
```

# php - 如何解决页面重定向中的警告“无法修改标头信息”

> ID：13643350
> 
> 赞同：0
> 
> 时间：2012-11-30T10:28:31.640
> 
> 标签：php, http-headers, http-status-code-301, php4

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我有以下代码在顶部执行 301 重定向，没有任何空格，并且此代码上方没有任何内容，但它给出了错误，

```
Warning: Cannot modify header information - headers already sent by

<?php
   require_once('../../config.php');
   header("HTTP/1.1 301 Moved Permanently");
   header("location: http://www.myapp.com/courses/mycourse-new.php");
?> 
```

我尝试使用 ob_start，但没有奏效。我已经为许多文件做了 301 没有任何问题。如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:34:58.173

`<?php`确保在文件和包含的文件中，在之前绝对没有输出字符（甚至没有空白或换行符） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:32:40.517

Are you using `ob_start()` on the first line of your code (before html tag)?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:34:44.703

去掉 php 结束标签后试试`?>`
[为什么有些脚本会省略 php 结束标签 '?>'？](https://stackoverflow.com/questions/3219383/why-do-some-scripts-omit-the-closing-php-tag)
[PHP结束标记](https://stackoverflow.com/questions/4410704/php-closing-tag)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:34:07.720

您可以禁用输出缓冲

```
ini_set('output_buffering', 0); 
```

在你的 PHP 文件或设置中

```
output_buffering = Off 
```

在 php.ini 中，一切都会正常工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T10:36:11.380

像使用`ob_start()`...

```
`<? 
       ob_start();
       require_once('../../config.php');
       header("HTTP/1.1 301 Moved Permanently");
       header("location: http://www.myapp.com/courses/mycourse-new.php");` 
```

Ob_start 将缓冲所有输出，直到脚本 exit() 和缓冲区释放。要使用标头重定向，不应已发送任何其他标头。

或者，如果您之前有空间，您可以更改

# ios - 导航控制器中的图像未正确设置

> ID：13643354
> 
> 赞同：2
> 
> 时间：2012-11-30T10:28:40.557
> 
> 标签：ios, xcode

我写了以下代码...

![在此处输入图像描述](../Images/8e2f48c7eab9210d4894fdc57c9bedac.png)

```
 if ([[[UIDevice currentDevice] systemVersion] floatValue] > 4.9) {

    //iOS 5
    UIImage *toolBarIMG = [UIImage imageNamed: @"header.png"];  

    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) { 
        [self.navigationController.navigationBar setBackgroundImage:toolBarIMG  
                                                      forBarMetrics:0]; 
    } else {

        //iOS 4
        [self.navigationController.navigationBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"header.png"]] 
                                                               atIndex:0]; 

     } 
```

图像显示在导航控制器中，但图像的开始和结束存在一些像素间隙，显示黑色图像。如何设置图像以消除黑色。你可以看到粉红色的圆形，我想去除那些黑色..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:33:09.860

This is how you set an image to the navigation bar

```
UINavigationBar *navBar = self.navigationController.navigationBar;
UIImage *image = [UIImage imageNamed:@"header.png"];
[navBar setBackgroundImage:image]; 
```

And put this code in the below method

```
- (void)viewWillAppear:(BOOL)animated 
```

Set Your BarMetrics to Default

```
 if ([[[UIDevice currentDevice] systemVersion] floatValue] > 4.9) {

//iOS 5
UIImage *toolBarIMG = [UIImage imageNamed: @"header.png"];  

if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) { 
    [self.navigationController.navigationBar setBackgroundImage:toolBarIMG  
                                                  forBarMetrics:UIBarMetricsDefault]; 
} else {

    //iOS 4
    [self.navigationController.navigationBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"header.png"]] 
                                                           atIndex:0]; 
```

# ant - 为多个项目构建脚本

> ID：13643360
> 
> 赞同：0
> 
> 时间：2012-11-30T10:28:54.577
> 
> 标签：ant

> **可能重复：**
> [ant 中的模块间依赖关系](https://stackoverflow.com/questions/9745966/intermodule-dependency-in-ant)

我有如下三个java项目

**报告、核心、应用程序。**

其中Core依赖于Report，因此首先应将report转换为jar并嵌入到core中，然后将Core转换为jar，然后将core和report都嵌入到Apps中，然后将Apps转换为可执行的jar。

如何为上述内容编写 ANT 脚本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:02:32.007

由于应用程序目标取决于核心，而核心取决于报告，并且它们三个都创建了jar...所以我们可以为此使用antcall目标...您可以定义路径元素，并创建jar目标...

创建一个公共路径条目...

```
<path id="master-classpath">
    <fileset dir="${lib/dir}">
        <include name="*.jar"/>
    </fileset>
    <pathelement path="${build.dir}"/>
</path> 

<target name="createJar" description="creating the jar">
    <javac destdir="${build.dir}" ncludeantruntime="false">
        <src path="${src.dir}"/>
     <classpath refid="${var-classpath}"/>
    </javac>
    <WRITE CODE FOR JAR CREATION>
    <copy the jar to lib/dir>
</target>

<target name="report">
 <antcall target="createJar">
     <param name="src.dir" value="./src/reports"/>
    <param name="var-classpath" value="master-classpath"/>
        <param name="jar-name" value="reports.jar"/>
  </antcall>
</target>

<target name="core" depends="report">
 <antcall target="createJar">
     <param name="src.dir" value="./src/core"/>
        <param name="jar-name" value="core.jar"/>
  </antcall>
</target>

<target name="apps" depends="core">
 <antcall target="createJar">
     <param name="src.dir" value="./src/core"/>
        <param name="jar-name" value="core.jar"/>
  </antcall>
</target> 
```

这样的事情将帮助您创建文件。此代码不完整。您需要进行大量更改才能使其正常工作...

# xml - Grails XML 错误请求

> ID：13643361
> 
> 赞同：1
> 
> 时间：2012-11-30T10:29:06.007
> 
> 标签：xml, rest, grails, get

我想从 Web 服务获取 XML 文档：[http ://api.sandbox.inrix.com/Traffic/Inrix.ashx?action=FindRoute](http://api.sandbox.inrix.com/Traffic/Inrix.ashx?action=FindRoute)

当我在浏览器中访问该站点时，我得到了一个 XML-Tree，但是使用以下代码，我得到了一个错误的请求：

```
withRest(uri: "http://api.sandbox.inrix.com") {
    def resp = get(path : '/Traffic/Inrix.ashx',
    contentType : TEXT,
    headers : [Accept : 'application/xml'],
    query : [Action:'FindRoute'])
    if (resp.status == 200) {
        println "SUCCESS"
    }
} 
```

如您所见，我正在使用 Grails 的 REST 插件。我收到一个错误的请求。所以我使用 cURL 并发现他们发送了一个错误的请求，但也发送了结果。即使使用 REST-Plugin 收到 BAD REQUEST，我怎样才能得到结果？

问候

# python - Python/Numpy 中包含 NAN 的数组的线性回归

> ID：13643363
> 
> 赞同：26
> 
> 时间：2012-11-30T10:29:09.997
> 
> 标签：python, math, numpy, scipy

我有两个数组，比如 varx 和 vary。两者都在不同位置包含 NAN 值。但是，我想对两者进行线性回归，以显示两个数组的相关程度。到目前为止，这非常有帮助：http: [//glowingpython.blogspot.de/2012/03/linear-regression-with-numpy.html](http://glowingpython.blogspot.de/2012/03/linear-regression-with-numpy.html)

但是，使用这个：

```
slope, intercept, r_value, p_value, std_err = stats.linregress(varx, vary) 
```

导致每个输出变量的 nans。仅将两个数组中的有效值作为线性回归的输入的最方便的方法是什么？我听说过屏蔽数组，但不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-30T10:34:27.720

您可以使用掩码删除 NaN：

```
mask = ~np.isnan(varx) & ~np.isnan(vary)
slope, intercept, r_value, p_value, std_err = stats.linregress(varx[mask], vary[mask]) 
```

# android - 通过 GPRS/WAP 连接时，在 http 请求标头中看到多个值

> ID：13643368
> 
> 赞同：0
> 
> 时间：2012-11-30T10:29:27.150
> 
> 标签：android, web-services, http, soap, wap

当我通过 wifi 向 Web 服务发出请求时，一切都运行良好，但在具有 WAP 连接的 GPRS 上进行时也是如此（我并没有强制连接为 WAP，这可能取决于运营商。在阿根廷完成测试）服务器正在接收 Content-Type 和 Content-Length 中的重复值。

下面是第一次通过 WiFi 和第二次通过 GPRS 在服务器上记录的相同请求。

通过 WiFi：

```
POST /ODP/Services.asmx HTTP/1.1 
User-Agent: kSOAP/2.0 
SOAPAction: http://temphost.org/RetrieveConfiguration 
Content-Type: text/xml 
Connection: close 
Content-Length: 464 
Host: temp.host.com 
Accept-Encoding: gzip 
```

通过 GPRS：

```
POST /ODP/Services.asmx HTTP/1.1 
Accept-Encoding: deflate, gzip, identity 
Content-Length: 464, 464 
Content-Type: text/xml, text/xml 
Host: temp.host.com 
SOAPAction: http://temphost.org/RetrieveConfiguration 
User-Agent: kSOAP/2.0 
X-WAP-WTLSEncryptiontype: NONE 
X-WAP-Bearerinfo: W-HTTPS=FALSE, bearertype=0 
Via: W-HTTP/1.1 wgw-fe6 EMIG 5.1 
x-msisdn: <User Phone number> 
x-up-calling-line-id: <User Phone number> 
x-technology-stack: Unknown 
TE: trailers 
Connection: TE 
```

我无法理解在 Content-Type 和 Content-Length 标头的请求中添加多个值的方式和位置。

有人可以告诉我 WAP 连接有什么问题，还是在修改对 WAP 的请求时将其添加到运营商端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:11:06.870

如果由于其扩展，POST 被截断并需要多个数据包，则内容长度和内容类型字段将重复。

WGW 通过将它们合并到一个包含多个值的标头中以逗号分隔来解决这种情况，问题是这个包含多个值的标头会生成 HTTP 411 错误代码。

根据最新的 RFC 草案，必须使用错误代码 502 丢弃此流量，但可以使用一些解决方法来删除其中一个标头而不是合并它们以保持此交易的进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:43:21.493

遗憾的是，客户端（客户/电话/浏览器）无事可做，但有一些可能的情况可以找到解决方案。如果您是 Web 开发人员（VASP 端），则需要注意 URL/URI 的大小，以防止 POST 需要多个数据包。如果您是 Web 服务器管理器（VASP/Telco 端），您可以定义这些特定标头（相等时）将接受多个值。在这种情况下，您需要注意您要将服务器置于HTTP 响应拆分攻击的风险。如果您是代理管理员（电信端），您可以调整您的 GW 以丢弃额外的标头，而不是将它们合并到一个包含多个值的标头中，但是，在这种情况下，您需要注意您将超出 RFC 建议.

# css - 如何取消/禁用 CSS 选择器？

> ID：13643371
> 
> 赞同：0
> 
> 时间：2012-11-30T10:29:33.437
> 
> 标签：css

我正在开发[woothemes.com](http://www.woothemes.com)的Wordpress 模板（特别是“简单”主题），并且我正在尝试遵循他们为操作 CSS 制定的规则，逐字逐句是：

> 警告！不要编辑这个文件！
> 
> 为了便于更新您的主题，您不应编辑此文件中的样式。而是使用 custom.css 文件来添加您的样式。您可以从此文件中复制样式并将其粘贴到 custom.css 中，它将覆盖此文件中的样式。你被警告了！:)

我认为很明显。所以通过遵循规则，我如何有效地取消整个 CSS 选择器（我想我可以手动将每个选择器元素设置为 0，但是有没有更优雅的方法来做到这一点？）：

```
.entry img, img.thumbnail { margin-bottom: 10px; padding: 2px; border: 1px solid #ddd; background:#fff;  

    /* Box Shadow */
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
} 
```

在伪代码中我会写：

```
.entry img, img.thumbnail { 

       clear-all-styles;

} 
```

但显然这行不通:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:37:55.920

在 css 中没有禁用样式的这种方法，您必须像在第一个示例中那样手动执行此操作。

事实上，这与 css 大师 Eric Meyer 在他著名[的 reset.css](http://meyerweb.com/eric/tools/css/reset/)文件中重置样式的方式相同。

# java - Hello world 应用程序 - 此应用程序不允许 API 服务

> ID：13643372
> 
> 赞同：0
> 
> 时间：2012-11-30T10:29:35.917
> 
> 标签：java, google-app-engine, servlets

因此，我所做的只是创建一个默认的 Google App Engine (GAE) 项目，该项目打印“Hello World”并将其部署到服务器。我不断收到以下错误消息：

```
Error: Server Error
The server encountered an error and could not complete your request.

If the problem persists, please report your problem and mention this error message and
the query that caused it. 
```

管理员日志显示以下内容：

```
API serving not allowed for this application 
```

我暂时没有做任何事情，这只是默认的`Servlet`。它在我的笔记本电脑上运行良好`Debug as -> Web application`

我尝试将 JVM 更改为 1.6，并将合规级别设置为 1.6，但仍然收到相同的错误消息。

编辑：`Administration->Admin Logs`到目前为止我一直在看，但是当我看下时`Main->Logs`，我发现实际的异常被抛出。看起来我正在使用的 JVM 版本存在问题：

```
Uncaught exception from servlet
java.lang.UnsupportedClassVersionError: testwebproject/TestWebProjectServlet : Unsupported major.minor version 51.0
at com.google.appengine.runtime.Request.process-5f33a9433a8c2a4e(Request.java)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.mortbay.util.Loader.loadClass(Loader.java:91)
at org.mortbay.util.Loader.loadClass(Loader.java:71)
at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:10:21.643

好的，现在可以了。第一个问题是我在寻找日志的错误位置。第二个问题是因为我使用的 JVM 版本。我确保使用的版本位于以下区域：

1.  项目->属性->Java构建路径->库
2.  项目->属性->Java编译器
3.  Window->Preferences->Java->Installed JREs

我正在使用 JDK 1.7.0_05

编辑：非常感谢 Peter Knego 的有用评论

# c++ - Valgrind 在空的析构函数上给出“大小为 8 的无效写入”

> ID：13643373
> 
> 赞同：4
> 
> 时间：2012-11-30T10:29:40.067
> 
> 标签：c++, valgrind

我有一个声明：

```
std::map<unsigned int, MyClass> *myMap; 
```

进入某个类 A。这个映射是在 A 的构造函数中创建的：

```
myMap = new std::map<unsigned int, MyClass>; 
```

MyClass 类基本上是一个结构，用于存储一些带有一些 getter/setter 的数据。MyClass 中没有任何指针或新实例，只有一对枚举值、一个无符号整数和一个布尔值。所以 MyClass 析构函数是空的。

另一方面，在 A 的析构函数中，我正在删除地图：

```
A::~A(){
    if(myMap!=NULL){
        delete myMap;
        myMap = NULL;
    }
} 
```

这里 Valgrind在删除行上告诉我*“地址 0x4c389b0 是大小为 48 free'd [PID:6077] 的块内的 16 个字节” 。*

此外，在 MyClass 析构函数中，即使是空的，我也会收到*“大小为 8 [PID:6077] 的无效写入”*

我不明白问题出在哪里。我一直认为在向量或映射上调用删除会自动调用每个元素对应的析构函数，在这种情况下，析构函数无关。

有什么帮助吗？

编辑：添加了 A 的构造函数：

```
A::A(unsigned int someValue){
    m_someValue = someValue;
    initializeMap();
}

void A::initializeMap(){
myMap = new std::map<unsigned int, MyClass>;
    for(unsigned int i=1; i<=20; i++)
        mymap->insert(std::make_pair(i,
                MyClass(i)));
} 
```

另外， MyClass 构造函数：

```
SvAvailabitlity::SvAvailabitlity(unsigned int index){
    m_index = index; //unsigned int
    m_Flag = false; //bool
        m_enumData1 = NOT_OK; //enum MyEnum
    m_enumData2 = NOT_OK; //enum MyEnum
} 
```

其中 MyEnum 定义为：

```
typedef enum {
    OK = 0,
    NOT_OK = 1,
} MyEnum; 
```

顺便说一句，我不明白反对票。有人也可以解释一下，以防万一有人冒犯了这个问题，我认为根据stackoverflow规则这是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:58:19.067

问题是三违反规则。您的对象的任何副本都会导致双重释放。

# java - Linkend 列表复制构造函数

> ID：13643381
> 
> 赞同：0
> 
> 时间：2012-11-30T10:30:08.063
> 
> 标签：java, linked-list, copy-constructor

我在使用 Java 中的 Linkend List 的复制构造函数时遇到问题。我尝试复制的列表大小为 3，当我使用复制构造函数时，列表为空。

当我用克隆方法尝试这个时，一切都很好。我已经看了很长一段时间了，我觉得它是如此明显。我只是没有看到它，这是代码。

```
public class Employee {

    private String name;
    private double salary;

    public Employee(String name, double salary){

        this.name = name;
        this.salary = salary;
    }

    public void setname(String name){
        this.name = name;
    }

    public void setsalary(double salary){
        this.salary = salary;
    }

    public String getname(){
        return this.name;
    }

    public double getsalary(){
        return this.salary;
    }
}

    public class Main {

    public static void main(String[] args) {

        Employees employees = new Employees();
        employees.add(new Employee("Employee1", 2500.00));
        employees.add(new Employee("Employee2", 2400.00));
        employees.add(new Employee("Employee3", 2000.00));

        Employees employeesCopy2 = new Employees(employees);
        Employees employeesCopy = (Employees) employees.clone();

        System.out.println(employees.size());
        System.out.println(employeesCopy2.size());
        System.out.println(employeesCopy.size());
    }

}

    import java.util.LinkedList;

public class Employees extends LinkedList<Employee> {

    private static final long serialVersionUID = 1L;
    private LinkedList<Employee> employees;

    public Employees(){ 

        employees = new LinkedList<Employee>();
    }

    public Employees(Employees w){

        employees = new LinkedList<Employee>(w);
    }

    public void addWerknemer(Employee w){
        employees.add(w);
    }
} 
```

**编辑**

这是作业，但是当我想添加标签时，显示该标签已不再使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:35:16.133

我认为这：

```
public class Employees extends LinkedList<Employee> {

    private LinkedList<Employee> employees; 
```

将创造一个混乱的世界。你们都在扩展一个列表，并且在该类中维护一个单独的列表。当你打电话时，`addWerknemer()`你会添加到内部列表中。当你打电话时会发生什么`get()`？由于您没有覆盖它，因此您正在调用`get()`基类，这是一个*不同*的列表！

在不检查其余代码的情况下，我怀疑这是问题的根本来源。

你有两个选择：

1.  `Employees`延伸`List`
2.  `Employees`包含一个`List`

我更喜欢第二个。您可以更改底层集合（例如 a `Set`，也许是 a`Map`以获得更好的查找性能）而不更改公开的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:36:31.230

您正在扩展`LinkedList`，但在该扩展内也有一个`LinkedList`。最初，您使用该`add`方法添加`Employee`实例，因此它们被添加到`Employees`列表本身，但是当您使用复制构造函数时，您将这些员工复制到类`employees`内的字段中`Employees`。

当您调用该`size()`方法时，它将使用对象本身`LinkedList`的`Employees`，因此在第一个列表中为 3，但在第二个列表中为 0，因为现在员工在包含的列表中，而不是在对象本身中。

在这种情况下，您可能不**应该**扩展`LinkedList`. 或者，如果您这样做，则不要使用`employees`也包含 LinkedList 的单独字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:05:57.780

您的困惑来自这样一个事实，即`Employees`两者**都是**列表并且**包含**列表。当你使用

```
employees.add(new Employee("Employee1", 2500.00)); 
```

您将员工添加到*外部*列表中。当你使用

```
employees.addWerknemer(new Employee("Employee1", 2500.00)); 
```

您将员工添加到*内部*列表中。由于您已经覆盖了构造函数`Employees(Employees es)`，因此这**不会**克隆外部列表，而只会克隆内部列表。而且由于您没有覆盖`clone()`，它将**克隆**外部列表，但**不会**克隆内部列表。这相当混乱，也很可能不是你想要的。因此，我建议进行以下更改之一：

**1\. [首选]员工只包含一个列表，不扩展一个**
跳过`extends LinkedList<Employee>`并且只使用内部列表。您将不得不使用您的方法`addWerknemer(Employee emp)`添加到您的列表中（或将其名称更改为`add`）。您将必须实现`size`以及`clone`您希望使用的其他方法。如果您想对此非常干净，甚至可以上课`implement List`左右`implement Collection`。这样，您仍然可以将您的课程视为`java.util.Collection`. 不过，我认为在您的情况下这不是必需的。您还需要实现所有接口方法（有很多）。示例实现如下所示。您仍然必须实施`size`等。

```
public class Employees /*implements List<Employees>*/ {
    private static final long serialVersionUID = 1L;
    private LinkedList<Employee> employees;

    public Employees(){ 
        employees = new LinkedList<Employee>();
    }

    public Employees(Employees w){
        employees = new LinkedList<Employee>(w);
    }

    public void add(Employee w){
        employees.add(w);
    }

    public Employees clone() {
        return employees.clone();
    }

    // add more methods as you need them (like remove, get, size, etc)
} 
```

**2.Employees 只扩展`LinkedList`并且不包含一个**
扔掉你的方法`addWerknemer(Employee emp)`和复制构造函数`Employees(Employees)`以及你的内部列表。这样您就不会覆盖现有的`LinkedList`. 这种方法或多或少没用，因为您基本上只是重命名`LinkedList`并`Employees`添加/更改任何内容。因此我不推荐这种方法。

# java - 声明扩展某种类型的字段

> ID：13643382
> 
> 赞同：0
> 
> 时间：2012-11-30T10:30:07.410
> 
> 标签：java, generics

我的语法有一些问题。我到处找，找不到正确的东西（我实际上不知道，要搜索的短语是什么）。所以这就是问题所在。为简单起见，假设我有 4 个类：

A类：

```
public abstract class A{
} 
```

B类：

```
public class B extends A{
    //some methods and fields
} 
```

C类：

```
public class C extends A{
    //some other methods
} 
```

D类：

```
public class D{
    protected ? value;
} 
```

在这里我有一个问题，因为如果我想定义为`?`. 我知道一个选项只是写而不是，但我认为这可以更具体，例如像.`class D``?``A``A``?``<T extends A>`

这甚至可能吗？

-编辑-

从下面的答案中，我看到这种方法是使用原始类型。但是，任何人都可以确认这样的构造在 java 中不存在吗？您可以创建一个泛型类型的字段`T`（扩展某个类），但包含该字段的类没有泛型参数`T`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:32:46.177

I think you should specific to this value Type at run time .

```
public class D<T extends A>{
    protected T value;
}

D<B> d =new D<B>();
D<A> d1 = new D<A>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:46:00.463

使用泛型类，如下所示：

```
public class D<T extends A> {
    protected T value;
} 
```

`MyClass`不依赖`T`于您在上面的评论中假装。您可以在不精确通配符的情况下实例化实例。因此，在编译时`T`仍会被替换为`A`这个概念称为：**原始类型**

更多信息：[http ://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:35:11.493

**-**使用`Type Parameter`，

**例如：**

```
public class MyClass<T extends A>{

   T value;

} 
```

# c# - 在 RichTextBox 上编辑不同的文本字体

> ID：13643383
> 
> 赞同：0
> 
> 时间：2012-11-30T10:30:09.047
> 
> 标签：c#, winforms, fonts, richtextbox

我正在尝试在 C#（Windows 窗体）应用程序和 .NETFramework 3.5 上的 RichTextBox 中执行编辑功能。我希望能够从 RichTextBox 上的所有文本中选择任意数量的文本字符，然后更改目标字体特征。

我遇到的麻烦是，在我选择的文本上，每个字符的字体属性都可能设置为不同的字体。在这种情况下，文本框会忽略我请求的事件。

```
case "Font Size": ComboTool = (Infragistics.Win.UltraWinToolbars.ComboBoxTool)this.RTFUltraToolbarsManager.Tools["Font Size"];
                try 
                { 
                    this.RichTextBox.SelectionFont = new Font(this.RichTextBox.SelectionFont.Name, float.Parse(ComboTool.Text), this.RichTextBox.SelectionFont.Style); 
                } 
                catch { } 
                break; 
```

当我在“RTFUltraToolbarsManager_ToolValueChanged”中执行此操作时，我想更改所选文本的大小并且“this.RichTextBox.SelectionFont”为空。

你知道我该如何解决我的问题吗？

# c++ - 定义通用转换迭代器以迭代不同的容器类型

> ID：13643384
> 
> 赞同：1
> 
> 时间：2012-11-30T10:30:14.150
> 
> 标签：c++, boost, iterator

我有一堂课如下：

```
class ArraySim{

  public: 
     DataStructure* ds;
     ArraySim(bool which){
        if(true)
           ds = new STDMap();
        else 
           ds = new HashMap();
     }
     value_type& operator[](int idx){
          return ds->getValAtIndex(idx);
     }

     //define a  custom iterator type that can be used to iterate over both std::map and boost::unordered //map keys.
} 

class DataStructure{

    vitrual value_type& getValAtIndex(int idx)=0;
};

class STDMap: public DataStructure{
   //Class that wraps a std::map object and implements the virtual method to return the value against a //particular index(key)
};

class HashMap: publlic DataStructure{
    //Class that wraps a boost::unordered_map object and implements the virtual method to return the value //against a particular index(key)
} 
```

我经历过：[Generic Iterator](https://stackoverflow.com/questions/9938/generic-iterator)和[Transform Iterator](http://www.boost.org/doc/libs/1_48_0/libs/iterator/doc/transform_iterator.html)。据我了解，转换迭代器仍然需要您在模板参数中提供底层容器迭代器。那么有没有一种方法可以使用转换迭代器围绕地图键定义自定义迭代器类型，同时使其适用于不同类型的地图容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:50:36.100

If you're using Boost, you can use [`any_range`](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/ranges/any_range.html).

```
typedef any_range<value_type, boost::forward_pass_traversal_tag,
  value_type &, std::ptrdiff_t> range;
typedef any_range<value_type, boost::forward_pass_traversal_tag,
  const value_type &, std::ptrdiff_t> const_range;
typedef range::iterator iterator;
typedef const_range::const_iterator const_iterator;

virtual iterator begin() = 0;
virtual iterator end() = 0;
virtual const_iterator begin() const = 0;
virtual const_iterator end() const = 0; 
```

Your `begin` and `end` virtuals just need to construct the appropriate iterator:

```
iterator begin() { return iterator(object.begin()); } 
```

# android - Android：如何将 ListView 中的文本大小更改为更大？

> ID：13643389
> 
> 赞同：3
> 
> 时间：2012-11-30T10:30:28.237
> 
> 标签：android, eclipse, listview, android-linearlayout

我对以下情况感到困惑，我创建了一个 LinearLayout 来显示手机中的联系人列表。但是，我不知道在哪里可以将 LinearLayout 中的文本设置为更大！请帮助，谢谢！！！！

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView android:layout_width="wrap_content"
              android:id="@+id/contactList"
              android:layout_height="0dp"
              android:padding="10dp"
              android:textSize="200sp"
              android:layout_weight="10"/>
    <CheckBox android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/showInvisible"
              android:text="@string/showInvisible"/>
    <Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/addContactButton"
            android:text="@string/addContactButtonLabel"/>
</LinearLayout> 
```

contactmanager.xml 如下：

```
package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public final class ContactManager extends Activity
{

    public static final String TAG = "ContactManager";

    private Button mAddAccountButton;
    private ListView mContactList;
    private boolean mShowInvisible;
    //public BooleanObservable ShowInvisible = new BooleanObservable(false);
    private CheckBox mShowInvisibleControl;

    /**
     * Called when the activity is first created. Responsible for initializing the UI.
     */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        Log.v(TAG, "Activity State: onCreate()");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact_manager);

        ArrayAdapter<String> filesAdapter = new ArrayAdapter<String>(this, 
        R.layout.simplest_list_item_1, topFilesArray);
        filesList.setDivider(null);

        // Obtain handles to UI objects
        mAddAccountButton = (Button) findViewById(R.id.addContactButton);
        mContactList = (ListView) findViewById(R.id.contactList);
        mShowInvisibleControl = (CheckBox) findViewById(R.id.showInvisible);

        // Initialise class properties
        mShowInvisible = false;
        mShowInvisibleControl.setChecked(mShowInvisible);

        // Register handler for UI elements
        mAddAccountButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.d(TAG, "mAddAccountButton clicked");
                launchContactAdder();
            }
        });
        mShowInvisibleControl.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Log.d(TAG, "mShowInvisibleControl changed: " + isChecked);
                mShowInvisible = isChecked;
                populateContactList();
            }
        });

        // Populate the contact list
        populateContactList();
    }

    /**
     * Populate the contact list based on account currently selected in the account spinner.
     */
    private void populateContactList() {
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] {
                ContactsContract.Data.DISPLAY_NAME
        };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
                fields, new int[] {R.id.contactEntryText});
        mContactList.setAdapter(adapter);
    }

    /**
     * Obtains the contact list for the currently selected account.
     *
     * @return A cursor for for accessing the contact list.
     */
    private Cursor getContacts()
    {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME
        };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible ? "0" : "1") + "'";
        //String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible.get() ? "0" : "1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

        return this.managedQuery(uri, projection, selection, selectionArgs, sortOrder);
    }

    /**
     * Launches the ContactAdder activity to add a new contact to the selected account.
     */
    protected void launchContactAdder() {
        Intent i = new Intent(this, ContactAdder.class);
        startActivity(i);
    }

} 
```

contact_entry.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <TextView android:text="@+id/contactEntryText"
              android:id="@+id/contactEntryText"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:35:39.660

将此`android:textSize="10dip"`Textview的属性设置为contact_entry.xml，它将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:03:31.063

最好在 sp 中设置文本的大小（Sp 相对于设备的正常字体大小独立缩放。）或者您可以使用`android:textAppearance="?android:attr/textAppearanceLarge`

# objective-c - 像平衡板一样的旋转线

> ID：13643399
> 
> 赞同：1
> 
> 时间：2012-11-30T10:30:52.103
> 
> 标签：objective-c, ios, trigonometry, catransform3d

好吧，
我在照片中有一个这样的圆圈。
我想将我的红线旋转到我想要的程度。

圆从 0 到 300 度开始。

我开始做一些事情

```
CGFloat wAngle = Degrees2Radians([_Weight.text intValue]/300.0*360);
_Arrow.layer.transform = CATransform3DMakeRotation (wAngle + M_PI, 0, 0, 1); 
```

但在这个片段中，0 值在顶部，而不是在底部。
可能是因为我不是三角学天才...... :)

![在此处输入图像描述](../Images/0958adc349f3d9530d0c7a2b7744544b.png)

正确旋转箭头的正确方法是什么？
角度值如何设置？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:24:09.587

您不需要转换度数和弧度。你有一个相对价值：

```
CGFloat relativeAngle = [_Weight.text intValue] / 300.0; 
```

所以只需使用它：

```
_Arrow.layer.transform = CATransform3DMakeRotation(relativeAngle * M_PI*2, 0, 0, 1); 
```

如果开始错误，只需更改视图的初始位置。（或将错误的角度总结为新的角度。像`(relativeAngle * M_Pi*2 + correction)`.

```
// what PI means in degrees
M_PI * 2 = 360°  
M_PI     = 180°  
M_PI_2   = 90°  
M_PI_4   = 45° 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:42:10.837

你可以有这样的相对角度

```
// transform your degrees (0->300) to radians
// (considering your starting direction is at M_PI*3/2)
CGFloat relativeAngle = - [_Weight.text intValue] * M_PI / 150.0;

_Arrow.layer.transform = CATransform3DMakeRotation(relativeAngle, 0, 0, 1); 
```

# compiler-errors - 为什么“dsgaudiko”是有效的 PHP？

> ID：13643406
> 
> 赞同：0
> 
> 时间：2012-11-30T10:31:27.253
> 
> 标签：compiler-errors, php

想知道接下来我应该怎么做，我在 PHP 文件中输入了一个随机字符串，介于`<?`和`?>`. 我很好奇这会产生什么错误，所以我上传并观看了。

但没有错误，只有一个空白屏幕。为什么？PHP 编译器是否会忽略看起来不像 PHP 的代码片段？

PHP文件：

```
<HTML>
    <HEAD>
    </HEAD>
    <BODY>
        <?
            dsgaudiko
        ?>
    </BODY>
</HTML> 
```

[在这里](http://korilu.nl/maurits/iets.php)查看它的实际应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:33:14.247

不，这意味着您的错误报告被禁止。

观看错误信息 - [http://codepad.viper-7.com/I0Fj9v](http://codepad.viper-7.com/I0Fj9v)

[PHP 错误报告](http://php.net/manual/en/function.error-reporting.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:34:41.293

启用 PHP 通知，

这就是我从你的代码中得到的：

`Notice: Use of undefined constant dsgaudiko - assumed 'dsgaudiko'`

```
<HTML>
    <HEAD>
    </HEAD>
    <BODY>
        <br />
        <b>Notice</b>:  Use of undefined constant dsgaudiko - assumed 'dsgaudiko' in <b>/Applications/MAMP/htdocs/desecration/index.php</b> on line <b>7</b><br />
    </BODY>
</HTML> 
```

# node.js - 多个 gremlin 命令组合为一个

> ID：13643407
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:31:30.657
> 
> 标签：node.js, neo4j, gremlin, node-neo4j

我正在使用`nodejs`，`neo4j`并`node-neo4j`尝试将多个`gremlin`命令放在一起， 如果我一个接一个地执行命令，我就会
遇到这个问题

```
x = [] as Set
y  = [] as Set
g.v(id1).both('friend').aggregate(x)
g.v(id2).both('friend').aggregate(y)
x.retainAll(y);
x 
```

它工作正常，另一方面，如果我这样写，则会返回一个节点列表

```
x = [] as Set;y  = [] as Set;g.v(id1).both('friend').aggregate(x);g.v(id2).both(
'friend').aggregate(y);x.retainAll(y);x 
```

没有返回任何内容阅读[此处](https://stackoverflow.com/questions/7433802/how-to-chain-commands-in-gremlin)
的答案说

> 如果您的最后一个命令不是迭代器，那么您将不得不手动迭代序列

但不知道如何在我的情况下应用它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T10:58:11.547

哎呀！
我错过了一个非常简单的东西`.iterate()`
这个命令现在有效

```
x = [] as Set;y  = [] as Set;g.v(id1).both('friend').aggregate(x).iterate();g.v(id2).both('friend').aggregate(y).iterate();x.retainAll(y);x 
```

# c# - 使用多线程时启用表单上的所有控件？

> ID：13643408
> 
> 赞同：0
> 
> 时间：2012-11-30T10:31:32.043
> 
> 标签：c#, winforms, multithreading

当我想开始一些工作时，我不知道我的方式是对还是错，我将禁用所有控制并在工作完成后再次启用。这是我的代码：

```
public void EnableControls(bool isenable){
this.BeginInvoke(new MethodInvoker(delegate()
{   
    foreach (System.Windows.Forms.Control control in this.Controls)
    {
        control.Enabled = isenable;
    }
}));} 
```

with : 这是表单控件

每个人都可以向我解释这段代码是错还是对。当我使用许多线程时，我看到控件无法启用，我不知道为什么。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:52:57.143

If you want to `enable/disable` all controls in the form, you can just use `form.Enabled` instead. If however there are some controls that you don't want to take a part in enable/disable you can put all controls that are interested in `Panel` or `GroupBox` and `Enable/Disable` panel. And at least if you can't use `Panel`, your code is fine in this case

# openerp - 如何增加选择字段的“选择选项”的大小

> ID：13643409
> 
> 赞同：2
> 
> 时间：2012-11-30T10:31:32.963
> 
> 标签：openerp

我正在通过选择字段创建值列表，并通过选择选项属性为用户选择值。但是当我在做三四个项目时。它会好起来的。但是当我想在选择选项中添加更多项目时，我无法执行此任务。选择选项属性并没有给我更多的空间来添加新的价值。

所以请任何人给我解决方案，所以我会添加更多的价值。

另一个问题是我在表单中创建了一个按钮。但我希望每当任何用户按下此按钮时，都应显示另一个字段。当用户再次单击此按钮时，应显示第三个字段。

我已经创建了这 3 个字段，即一个，两个，那里。

句法：-

如果单击“我的”按钮，则应显示另一个字段“两个”。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:52:34.630

如果您在“选择”字段中有更多值，那么您应该为这些选择值创建一个类，并使您的选择归档为 many2one。在您的 xml 文件中，使用 widget="selection" 将您的字段设为选择
例如：

```
class ur_class(osv.osv):
    _columns = {'ur_field_name': fields.many2one('select.type', 'Select')}
ur_class()

class select_type(osv.osv):
    _name = 'select.type'
    _columns = {'name': fields.char('Type', size=50)}
select_type() 
```

现在在你的 xml 中使用 widget='selection' 像这样： `<field name="ur_field_name" widget="selection"/>`

现在关于从按钮单击显示字段的第二个问题：
如果您正在更改按钮方法中的状态，那么您可以在 xml 中使用“attrs”属性。您可以在插件中找到示例。

谢谢你，

# design-patterns - C# design pattern suggestions

> ID：13643411
> 
> 赞同：3
> 
> 时间：2012-11-30T10:31:38.880
> 
> 标签：design-patterns

I have a collection of objects. Out of this collection I need to search for an occurrence of an object using a number of conditions. ie.

Search using Condition 1

If Condition 1 Fails use Condition 2

If Condition 2 Fails use Condition 3

If Condition 3 Fails use Condition 4

Each of these conditions consists of a number of filters.

I'm looking for suggestions with regards to a design pattern that's maintainable. Sample implementations will be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:10:22.410

它看起来像责任链：

[http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

> 在面向对象设计中，责任链模式是一种设计模式，由一个命令对象源和一系列处理对象组成。每个处理对象都包含定义它可以处理的命令对象类型的逻辑；其余的被传递给链中的下一个处理对象。还存在一种将新处理对象添加到该链末端的机制。

不要太纠结于“命令对象”的事情。CoR 模式的核心是它是一个对象链，它们要么自己处理工作，要么将其传递给链中的下一个对象。

执行：

```
public interface LinkInChain {
  boolean search(final Data data, final OnFound onFound);
}

public abstract class LinkInChainBase {
  final private LinkInChain nextLink;

  public LinkInChainBase(final LinkInChain nextLink) {
    this.nextLink = nextLink;
  }

  protected abstract innerSearch(final Data data, final OnFound onFound);

  public boolean search(final Data data, final OnFound onFound) {
    if (!innerSearch(data, onFound)) {
      return nextLink.search(data, onFound);
    }
  }
}

public class SearchFactory {

  private final LinkInChain lastLink = new LinkInChain() {
    public boolean search(final Data data, final OnFound onFound) {
      return false;
    }

  }

  public LinkInChain searchChain() {
    return new SearchUsingCond1(
      new SearchUsingCond2(
        new SearchUsingCond3(
          new SearchUsingCond4(
            lastLink
          )
        )
      )
    )
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:58:14.120

感觉就像某种工厂的战略可能会让你走上正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:06:08.827

您可以从每个过滤器的类似实现开始：

```
public interface IFilter<T>
{
    bool Matches(T itemToMatch);
} 
```

对于过滤器的子层（条件 1...n），您可以使用这样的复合“全部”过滤器；包含的所有`IFilter<T>`实现都必须匹配组合才能说它匹配：

```
public class AllMatchingCompositeFilter : List<IFilter<MyClass>>, IFilter<MyClass>
{
    public bool Matches(T itemToMatch)
    {
        return this.All(filter => filter.Matches(itemToFilter));
    }
} 
```

...对于顶级过滤器（如果条件 n 不匹配检查条件 n+1），您可以`AllMatchingCompositeFilter`像这样在“任何”过滤器中组合多个 s；它`IFilter<T>`按照添加的顺序执行每个 s，如果其中任何一个匹配，则返回 true：

```
public class AnyMatchingCompositeFilter : List<IFilter<MyClass>>, IFilter<MyClass>
{
    public bool Matches(T itemToMatch)
    {
        return this.Any(filter => filter.Matches(itemToFilter));
    }
} 
```

# cakephp - PaginatorHelper is not checking the page number

> ID：13643414
> 
> 赞同：1
> 
> 时间：2012-11-30T10:31:55.317
> 
> 标签：cakephp, view-helpers, paginator, cakephp-2.3

I have a problem with the Cakephp2.3 paginator helper. In the 1.3 version, the paginate method was checking if the passed page param has a correct value. Now, it's not working anymore.

For example, if I have a list with 30 results, 10 items per page, then this was redirecting to the last (third) page:

```
mycontroller/index/page:130 
```

Now, when I modify the url directly in the browser and pass an invalid page number, it just says there are no results.

This is how I'm using the paginate method:

```
$this->paginate = array(
                'limit' => 10,
                'order' => 'Appointment.start_datetime DESC'
            );
$appointments = $this->paginate('Appointment'); 
```

Is there something I'm missing?

Thank you in advance.

**UPDATE**

The paginator helper does know how to count the number of pages corectly, but it doesn't seem to care if a correct page number is passed. Here is the output from the view:

```
print_r($this->Paginator->params()); 
```

shows:

```
Array
(
    [page] => 1
    [current] => 10
    [count] => 30
    [prevPage] => 
    [nextPage] => 1
    [pageCount] => 3
    [order] => Appointment.start_datetime DESC
    [limit] => 10
    [options] => Array
        (
            [page] => 1
        )

    [paramType] => named
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:07:15.840

似乎两个 Cake 版本都包含一些处理过高`page`参数的代码：

蛋糕1.3：`Controller->paginate()`

```
if ($page === 'last' || $page >= $pageCount) {
    $options['page'] = $page = $pageCount;
} elseif (intval($page) < 1) {
    $options['page'] = $page = 1;
} 
```

蛋糕2.3：`PaginatorComponent->paginate()`

```
$pageCount = intval(ceil($count / $limit));
$page = max(min($page, $pageCount), 1); 
```

但有趣的是，在 Cake 2.3 中，这段代码放在了对 的调用**之后**`find()`，所以来不及正确地获取记录。这可能是一个从未发出信号的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:47:05.700

我没有任何使用分页器的应用程序可以玩，所以这将是盲目的。您可以执行以下操作：

```
$page_count = $this->Paginator->params['paginator']['count'];
$page_requested = $this->request->params['paginator']['page'];

if($page_requested > $page_count){
    //Redirect to last page .....
} 
```

虽然，我很难相信他们会在 2.x 中删除这个默认功能。

我会做一个`pr($this->params);`来获取您需要的分页器对象中的确切索引。

# html - How to validate pattern matching in textarea?

> ID：13643417
> 
> 赞同：38
> 
> 时间：2012-11-30T10:32:02.433
> 
> 标签：html, textarea

When I use textarea.checkValidity() or textarea.validity.valid in javascript with an invalid value both of those always return true, what am I doing wrong?

```
<textarea name="test" pattern="[a-z]{1,30}(,[a-z]{1,30})*" id="test"></textarea>​

jQuery('#test').on('keyup', function() {
    jQuery(this).parent().append('<p>' + this.checkValidity() + ' ' +
    this.validity.patternMismatch + '</p>');
}); 
```

[http://jsfiddle.net/Riesling/jbtRU/9/](http://jsfiddle.net/Riesling/jbtRU/9/)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-07T05:55:33.473

HTML5`<textarea>`元素不支持该`pattern`属性。

有关允许的属性，请参阅[MDN 文档。](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea)`<textarea>`

您可能需要自己定义此功能。

或者按照定义 JavaScript/jQuery 函数的传统 HTML 4 做法来执行此操作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-23T14:59:00.627

您可以自己使用`setCustomValidity()`. 这样，`this.checkValidity()`将回复您想要应用于您的元素的任何规则。我认为`this.validity.patternMismatch`不能手动设置，但如果需要，您可以使用自己的属性。

[http://jsfiddle.net/yanndinendal/jbtRU/22/](http://jsfiddle.net/yanndinendal/jbtRU/22/)

```
$('#test').keyup(validateTextarea);

function validateTextarea() {
    var errorMsg = "Please match the format requested.";
    var textarea = this;
    var pattern = new RegExp('^' + $(textarea).attr('pattern') + '$');
    // check each line of text
    $.each($(this).val().split("\n"), function () {
        // check if the line matches the pattern
        var hasError = !this.match(pattern);
        if (typeof textarea.setCustomValidity === 'function') {
            textarea.setCustomValidity(hasError ? errorMsg : '');
        } else {
            // Not supported by the browser, fallback to manual error display...
            $(textarea).toggleClass('error', !!hasError);
            $(textarea).toggleClass('ok', !hasError);
            if (hasError) {
                $(textarea).attr('title', errorMsg);
            } else {
                $(textarea).removeAttr('title');
            }
        }
        return !hasError;
    });
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-30T05:21:56.257

这将启用`pattern`DOM 中所有文本区域的属性并触发 Html5 验证。它还考虑了具有`^`or`$`运算符的模式，并使用`g`Regex 标志进行全局匹配：

```
$( document ).ready( function() {
    var errorMessage = "Please match the requested format.";

    $( this ).find( "textarea" ).on( "input change propertychange", function() {

        var pattern = $( this ).attr( "pattern" );

        if(typeof pattern !== typeof undefined && pattern !== false)
        {
            var patternRegex = new RegExp( "^" + pattern.replace(/^\^|\$$/g, '') + "$", "g" );

            hasError = !$( this ).val().match( patternRegex );

            if ( typeof this.setCustomValidity === "function") 
            {
                this.setCustomValidity( hasError ? errorMessage : "" );
            } 
            else 
            {
                $( this ).toggleClass( "error", !!hasError );
                $( this ).toggleClass( "ok", !hasError );

                if ( hasError ) 
                {
                    $( this ).attr( "title", errorMessage );
                } 
                else
                {
                    $( this ).removeAttr( "title" );
                }
            }
        }

    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-28T03:29:00.933

如果有其他人使用 React-Bootstrap HTML 表单验证而不是 jQuery。

这没有明确使用`pattern`，但它的工作方式相同。

我只是对[文档](https://react-bootstrap.github.io/components/forms/#forms-validation-native)进行了一些更改。

```
function FormExample() {
  const [validated, setValidated] = useState(false);
  const [textArea, setTextArea] = useState('');
  const textAreaRef = useRef(null);

  const handleSubmit = (event) => {
    const form = event.currentTarget;
    if (form.checkValidity() === false) {
      event.preventDefault();
      event.stopPropagation();
    }

    setValidated(true);
  };

  const isValid = () => {
    // Put whichever logic or regex check to determine if it's valid
    return true;
  };

  useEffect(() => {
    textAreaRef.current.setCustomValidity(isValid() ? '' : 'Invalid');
    // Shows the error message if it's invalid, remove this if you don't want to show
    textAreaRef.current.reportValidity();
  }, [textArea];

  return (
    <Form noValidate validated={validated} onSubmit={handleSubmit}>
      <Form.Row>
        <Form.Group md="4" controlId="validationCustom01">
          <Form.Label>Text area</Form.Label>
          <Form.Control
            required
            as="textarea"
            ref={textAreaRef}
            placeholder="Text area"
            value={textArea}
            onChange={(e) => setTextArea(e.target.value)}
          />
          <Form.Control.Feedback>Looks good!</Form.Control.Feedback>
        </Form.Group>
      </Form.Row>
      <Button type="submit">Submit form</Button>
    </Form>
  );
}

render(<FormExample />); 
```

# javascript - 使用 $.Deferred 对象进行并行 ajax 请求

> ID：13643418
> 
> 赞同：0
> 
> 时间：2012-11-30T10:32:03.073
> 
> 标签：javascript, jquery, asynchronous

需要处理一些 ajax 请求并将他们的结果收集到一个对象中。理想情况下，我想了解它，但使用 jQuery $.Deffred。需要帮忙。

[异步](https://github.com/caolan/async#parallel)

```
async.parallel({
    one: function(callback){
        setTimeout(function(){
            callback(null, 1);
        }, 200);
    },
    two: function(callback){
        setTimeout(function(){
            callback(null, 2);
        }, 100);
    },
},
function(err, results) {
    // results is now equals to: {one: 1, two: 2}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:38:52.987

您可以使用[$.when()](http://api.jquery.com/jQuery.when/)函数：

```
var ajax1 = $.ajax();
var ajax2 = $.ajax();

$.when(ajax1, ajax2).done(function(ajax1data, ajax2data){
//Do stuff with data
}); 
```

但我个人认为使用 Async.js 没有什么问题

# iphone - Check if app is already installed on iOS from safari "Browser" using java script or any other way.

> ID：13643420
> 
> 赞同：4
> 
> 时间：2012-11-30T10:32:08.533
> 
> 标签：iphone, ios, ipad, cordova, safari

Check if app is already installed on iOS from safari "Browser" using java script or any other way.

I need to check on my website weather my app is installed or not. If yes then I would like to open the app when somebody opens my website.

I have the URL for my app to open. Right now I have given two options on my website:
1) I have app installed will open the app
2) Available on the app store.

I want to decide at my side weather app is installed or not.
Using Any web technology.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:37:38.853

iOS 6 中新的智能应用横幅功能可能涵盖您正在寻找的内容。

[https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

# javascript - NodeJS, ExpressJS & Jade - passing model to knockout?

> ID：13643421
> 
> 赞同：0
> 
> 时间：2012-11-30T10:32:10.517
> 
> 标签：javascript, node.js, pug, express

I'm trying to get my expressJS-Model to my .jade-template, but the way I can access the Model with JS on the client-machine.

The idea is simple: I want to use the Model with Knockout - so I need to give the Model-Object as it is to the client.

If I do the obvious - *var t = #{customer}* - I ending up with the rendered output *var t = [object Object]* So how can I use the object on the client-side?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:54:57.897

[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)服务器上的对象，并[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)它在客户端（仅适用于 IE >= 8，如果您需要支持较旧的 i3 浏览器，您可以提供来自 douglas crockford 的 json-js：[https:// github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# jsp - how to enable combobox by selecting the radiobutton using jsp

> ID：13643423
> 
> 赞同：0
> 
> 时间：2012-11-30T10:32:10.687
> 
> 标签：jsp

I have two drop down lists with the names meterid and subzone and also i have 2 radio buttons in my application.If the user selects radio button1 , meterid dropdown list should be displayed. If the user selects radio button2, subzone dropdown list should be displayed. i will get the dropdown values from mysql tables.

i tried the following code:

```
function select1() 
```

{ document.getElementById("meter_id").style.display="block"; document.getElementById("subzone_list").style.display="none"; }

```
function select2() {
     document.getElementById("subzone_list").style.display="block";
     document.getElementById("meter_id").style.display="none";             
    }  

    document.getElementById("midradio").onclick = select1;
    document.getElementById("subzonerd").onclick = select2;

    </script>
    The following code is for Meterid dropdown lisT:
    <tr><td  width="15%" class="options0" id="tdSearchBy" colspan="5">

    <input name="r1" value="MeterID" onclick="" type="radio" id="midradio"><font size="4">Meter ID</font></td>

    <%
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");
        sqlQuery="select distinct Meterid from Meter_List";
        st=con.createStatement();

         rs=st.executeQuery(sqlQuery);
    %>

    <td  width="20%" class="options0" colspan="5">
    <select style="WIDTH: 150px" selected="true" name="meterid" id="meter_id"  onChange="this.form.submit()" style='display:none;'>
    <option>Select Meter ID</option>
    <% while(rs.next()) {%>
    <option value="<%=rs.getInt("MeterID")%>"><%=rs.getInt("MeterID")%></option>

    <% } 

    rs.close();
    st.close();
    con.close();
    %>

    </select>

    </td></tr>
    The following code is for Subzone dropdown list:
    <tr><td class="options1" id="tdSearchBy" colspan="5">

    <input name="r1" value="Subzone"  onclick="searchOptions(3)" value="subzone" type="radio" checked="checked" id="subzonerd"><font size="4">Sub zone</font></td>

     <%

        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");

        String getZoneName=request.getParameter("zonelist");
        sqlQuery="select  distinct Subzone from Meter_List where Zone='"+getZoneName+"'" ;
        st=con.createStatement();
        rs=st.executeQuery(sqlQuery);
    %>
    <td  width="20%" class="options0" id="tdSearchBy" colspan="5">
    <select style="WIDTH: 150px" name="subzonelist" id="subzone_list" onchange="this.form.submit()">
    <option value="SZ">Select a Sub Zone</option>

    <% while(rs.next()){ %>
        <option value="<%=rs.getString("Subzone")%>"><%=rs.getString("Subzone")%></option>

    <%  } 

    rs.close();
    st.close();
    con.close();
    %>
    </select> 
```

please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:47:46.450

1.  从您的问题中不清楚是什么问题。（期望它没有按您的意愿工作）
2.  这是一个javascript问题而不是jsp问题，所以标签是错误的。
3.  我认为你有一个问题，你试图在 DOM 完成加载之前通过它们的 ID 获取元素。

    document.getElementById("midradio").onclick = select1; document.getElementById("subzonerd").onclick = select2;

您应该将这两行放在 HTML 的末尾或在 DOM 准备好后调用的函数中阅读： [http ://www.w3schools.com/jsref/event_body_onload.asp](http://www.w3schools.com/jsref/event_body_onload.asp)

您的“subzonerd”输入元素已经在 html 中设置了 onclick 函数，这可能会在以后产生另一个问题。

# android - Move part of computation to GPU?

> ID：13643429
> 
> 赞同：0
> 
> 时间：2012-11-30T10:32:28.910
> 
> 标签：android, optimization

I have a complex algorithm, which takes significant time to compute. It is easily parallelizable though. One part of the algorithm is FFT for example. Is there a way to move some part of the computation to GPU instead of CPU on Android ?

# java - 通过 jDialog 将数据传递到另一个 jPanel

> ID：13643434
> 
> 赞同：0
> 
> 时间：2012-11-30T10:32:53.630
> 
> 标签：java, swing, jpanel, jbutton, actionlistener

我创建了一个 jPanel，并在单击按钮时打开了一个新的 jDialog（dlgSegments 是一个打开的 JDialog）：

```
JButton btnAddSegment = new JButton("Add GeoSegment");
btnAddSegment.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        dlgSegments.setVisible(true);
    }
}); 
```

然后在打开的jDialog中，我想将“选择”返回给调用这个jDialog的jPanel。

我该如何实施？

这是打开的 jDialog 中的按钮侦听器，seleced 是我要传递给 jPanel 的变量：

```
addButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        GeoSegment selected = lstSegments.getSelectedValue();
        // i want to send back the selected value
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:52:04.757

一种可能的解决方案：如果您创建 Dialog，则通过他的构造函数将 DataObject 发送到 Dialog。DataObject 包含您感兴趣的值。

```
MyDataObject dataObject = new MyDataObject();
MyDialog dialog = new MyDialog(dataObject); 
```

用对话框中的选定值填充 DataObject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:25:44.750

如果您仍在解决[此问题](https://stackoverflow.com/q/13615432/261156)，您的`Add`按钮可以调用`getSelectedIndex()`或`getSelectedIndices()`找出选择的内容。然后在[这里](https://stackoverflow.com/a/5533581/261156)`PropertyChangeEvent`播放类似@Hovercraft Full Of Eels 的节目。让你的主面板做听对话。`addPropertyChangeListener()`

# jquery - Twitter boostrap 确保缩略图框的高度相等

> ID：13643438
> 
> 赞同：1
> 
> 时间：2012-11-30T10:33:11.777
> 
> 标签：jquery, html, css, twitter-bootstrap

我目前正在开发一个使用 Twitter Boostrap 作为前端的网站。在首页我有三个框（Twitter Boostrap 术语中的缩略图框），其中包含一个图像和一些文本。但是，问题在于这些框可能具有不同的高度，具体取决于图像的高度和描述文本的数量。

我的标记如下：

```
<ul class="thumbnails">
    <li class="span4">
        <div class="thumbnail">
            <img src="img/products/1.png" alt="">
            <h3>Thumbnail label</h3>
            <p>Thumbnail caption...</p>
        </div>
    </li>          
    <li class="span4">
        <div class="thumbnail">
            <img src="img/products/2.png" alt="">
            <h3>Thumbnail label</h3>
            <p>Thumbnail caption...</p>
        </div>
    </li>   
    <li class="span4">
        <div class="thumbnail">
            <img src="img/products/3.png" alt="">
            <h3>Thumbnail label</h3>
            <p>Thumbnail caption...</p>
        </div>
    </li>   
</ul> 
```

我试过[这个插件](http://www.cssnewbie.com/equalheights-jquery-plugin/)，像这样实例化它：

```
<script>
    $().ready(function () {
        // Ensure equal heights on thumbnail boxes
        $('.thumbnail').equalHeights();
    });
</script> 
```

没有任何影响：-/

我还尝试了以下方法：

```
// Ensure equal heights on thumbnail boxes
$('.thumbnail').css({
    'height': $('.thumbnail').height()
}); 
```

但随后它将缩略图框设置为`90px`高度。

有谁知道解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:55:11.860

将您的 window.load 更改为准备好文档。它有点快。

```
<script>
    $(function(){
        // Ensure equal heights on thumbnail boxes
        $('.thumbnail').equalHeights();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T19:57:55.840

是的，只有 CSS 的解决方案。

HTML：

```
<ul class="thumbnails">
<li class="span4 thumbnail">
        <img src="img/products/1.png" alt="">
        <h3>Thumbnail label</h3>
        <p>Thumbnail caption...<br/> with 2 lines</p>
    </div>
</li>          
<li class="span4 thumbnail">
        <img src="img/products/2.png" alt="">
        <h3>Thumbnail label</h3>
        <p>Thumbnail caption...<br/> with 2 lines</p>
    </div>
</li>   
<li class="span4 thumbnail">
        <img src="img/products/3.png" alt="">
        <h3>Thumbnail label</h3>
        <p>Thumbnail caption with 1 line...</p>
    </div>
</li>   
<li class="span4 thumbnail">
        <img src="img/products/3.png" alt="">
        <h3>Thumbnail label</h3>
        <p>Thumbnail caption...</p>
    </div>
</li> 
```

CSS

```
.thumbnail:nth-child(3n+1) {
    clear: left;
} 
```

（在上面的例子中，每 3 个拇指它就会断线。只需在所有断点中配置它，它就会正常工作。`

# android - TextView 字体更改

> ID：13643447
> 
> 赞同：0
> 
> 时间：2012-11-30T10:33:37.847
> 
> 标签：android, widget, textview

在我的应用程序中，如果用户单击图像视图，则文本视图的字体大小应更改。如果用户再次单击同一图像视图，则文本应设置为以前的字体。

在我的适配器类中：

```
 public View getView(int position, View convertView, ViewGroup parent) 
    {
        this.Position=position;
        // TODO Auto-generated method stub

        rowView = LayoutInflater
                 .from(parent.getContext())
                 .inflate(R.layout.newsdescriptionrow, null);

          TextView prevnews=(TextView)rowView.findViewById(R.id.prevnews);
          TextView nextnews=(TextView)rowView.findViewById(R.id.nextnews);

          ImageView img=(ImageView)rowView.findViewById(R.id.fontimage);
          img.setImageResource(mImageIds);

 img.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if(!fontselection)
                {
                    font=20;
                    fontselection = true;

                }
                else
                {
                    System.out.println("inside else..");
                    font = 10;
                    fontselection = false;

                }
//              font=20;
                TextView textView = (TextView) rowView
                        .findViewById(R.id.name_Desclabel);
                textView.setText(body[Position]);
                System.out.println("fontsasss="+font);
                textView.setTextSize(font);
            }
        }); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:53:08.017

您可以使用多种可用方法之一来做到这一点。

//为了提高效率，请不要让听众听到

```
TextView textView = (TextView) rowView.findViewById(R.id.name_Desclabel); 
```

//解决方案1

```
img.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //1\. get the font size  
                float fontSize = textView.getTextSize();
                //change the font size
                if(fontSize == 10){
                    fontSize=20;
                }else if(fontSize==20){
                    fontSize=10;
                }

                textView.setText(body[Position]);
                System.out.println("fontsasss="+font);
                //3\. set the new font size
                textView.setTextSize(fontSize);
            }
        }); 
```

//解决方案2

```
boolean isFontChanged=false;
textView.setTextSize(/*10 OR 20 set initial size here*/);

img.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    //1\. change the font size
                    if(isFontChanged){
                        fontSize=20; //initial
                    }else {
                        fontSize=10; //new changed size
                    }

                    textView.setText(body[Position]);
                    System.out.println("fontsasss="+font);
                    //2\. set the new font size
                    textView.setTextSize(fontSize);

                    //3\. for future 
                   isFontChanged = !isFontChanged;
                }
            }); 
```

**建议** 1\. 在多次调用的函数中创建一个匿名类永远不是一个好主意，即 getView 相反，您可以在适配器中实现 OnClickListener 并使用

```
 img.setOnClickListener(this); 
```

2\. 如果这是您的完整 getView 功能，我认为它是高度未优化的。请参阅此 [示例](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:37:08.153

这里

**方法 TextView.setTextSize(int unit , int size); 取了两个参数。**

text.setTextSize(TypedValue.COMPLEX_UNIT_SP,9);

[http://developer.android.com/reference/android/util/TypedValue.html#COMPLEX_UNIT_DIP](http://developer.android.com/reference/android/util/TypedValue.html#COMPLEX_UNIT_DIP)

[http://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29](http://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29)

# python - virtualenv 中的非 python 程序

> ID：13643449
> 
> 赞同：5
> 
> 时间：2012-11-30T10:33:43.553
> 
> 标签：python, django, virtualenv, pip

我刚开始使用 virtualenv 来开发我的 Django 应用程序，到目前为止我真的很喜欢它。现在出现的一个问题是我如何将非 python 的程序安装到我的 virtualenv 中。

例如，我有一个织物脚本，可以对我的所有代码进行 lints。在那里我有一个任务，它使用 csslint 来检查我的 css 文件。但是 csslint 是一个 npm 包。那么如何处理不是 python 包的 virtualenv 依赖项呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:21:26.293

我曾经做过一次（不久前），效果很好。诀窍是将 node.js 和 npm 安装到 virtualenv：

```
workon myenv
cd node-v0.4.8
./configure –prefix=“/path/to/myenv/”
make
make install 
```

进而

```
workon myenv
git clone git://github.com/isaacs/npm.git
cd npm
make
make install 
```

上面这个确切的命令已经过时了，但我认为应该可以用现代的 node.js 和 npm 做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:24:11.327

您可以查看[https://xstatic.readthedocs.org/](https://xstatic.readthedocs.org/)或 fanstatic，它们都将静态库包装在 Python 包中，然后您可以将其加载到您的 virtualenv 中。

# url - Redirect URL without showing new URL?

> ID：13643450
> 
> 赞同：1
> 
> 时间：2012-11-30T10:33:44.760
> 
> 标签：url, redirect, mod-proxy

Is it possible to redirect URL in to another URL without showing the new URL?

eg:

When users go to www.sample1.com/page1.html , it should show www.sample2.com/page2.html . But URL needs to be showing like it belongs to www.sample1.com , or something like this www.subdomain.sample1.com/blah.html.

I need to host some pages for another domain , but those pages should look like they belong to that domain or to a subdomain of that domain.

Using an iframe is not an option in my circumstances,any other suggestions are welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:40:32.403

最简单的可能是用于`mod_proxy`在子上下文中显示所有 sample2.com 页面：

```
ProxyPass   /sample2   http://www.sample2.com 
```

因此，`sample2.com/page2.html`将显示为`sample1.com/sample2/page2.html`。

否则[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)也可能有用，特别是[`proxy|P`flag](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)。

希望有帮助。

# sql - SQL Server 查询计数

> ID：13643451
> 
> 赞同：0
> 
> 时间：2012-11-30T10:33:50.407
> 
> 标签：sql, sql-server

我有两个表`Invitations`，`Users`两个表都包含一些电子邮件。

我想计算那些存在于`Invitation`表格中但不存在于`Users`表格中的电子邮件

**邀请函**

```
InvitationID    Email
-------------------------------------
    1           test@test.com
    2           someone@example.com
    3           test12@test.com 
```

**用户**

```
UserName                  IsActive
-------------------------------------
test@test.com             InActive
sample12@sample.com       Active
test12@test.com           InActive 
```

我试过这样

```
SELECT  COUNT(*) FROM Invitations, Users                                     
where Invitations.Email <> Users.UserName 
```

我想要这样

```
Count=1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T10:37:33.827

你得到错误的答案是因为你计算了错误的东西。

想象一下每个表中有两条记录，a 和 b。a<>b 和 b<>a 所以你会得到 2，而不是你期望的 0。

试试这个

```
Select count(*) 
from Invitations
     left join Users                                     
     on Invitations.Email = Users.UserName
where Users.UserName is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:39:10.557

```
select count(*)
from Invitation i
where not exists (select 1 from Users u where i.email = u.userName) 
```

在我看来，这是最简单的方法，您可以通过事件读取它：计算`Invitation`表中不存在的所有行 表`Users`中`userName`等于的行`email`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T10:41:03.997

你可以试试这个：

```
SELECT COUNT(*)
FROM Invitation
WHERE Email not in (
    SELECT u.username
    FROM Users
) 
```

# python - Libssl 和 libcrypto 导致 dyld：未加载库：/usr/lib/libpq.5.dylib

> ID：13643452
> 
> 赞同：9
> 
> 时间：2012-11-30T10:33:52.150
> 
> 标签：python, postgresql, pip, psycopg2, libssl

我最近卸载了 postgresql 并通过 pip 安装了 pyscopg2。

我知道 libcrypto 和 libssl 有一些技巧

目前我将它们符号链接到：

```
$ ls -lah libssl.*
-rwxr-xr-x  1 root  wheel   402K Aug 28 11:06 libssl.0.9.7.dylib
-rwxr-xr-x  1 root  wheel   589K Aug 28 11:06 libssl.0.9.8.dylib
lrwxr-xr-x  1 root  wheel    55B Nov 29 23:38 libssl.1.0.0.dylib -> /usr/local/Cellar/openssl/1.0.1c/lib/libssl.1.0.0.dylib
lrwxr-xr-x  1 root  wheel    55B Nov 30 02:25 libssl.dylib -> /usr/local/Cellar/openssl/1.0.1c/lib/libssl.1.0.0.dylib

/usr/lib
$ ls -lah libcrypto.*
-rwxr-xr-x  1 root  wheel   2.1M Aug 28 11:06 libcrypto.0.9.7.dylib
-rwxr-xr-x  1 root  wheel   2.6M Aug 28 11:06 libcrypto.0.9.8.dylib
-r-xr-xr-x  1 root  wheel   1.6M Oct 31 22:12 libcrypto.1.0.0.dylib
lrwxr-xr-x  1 root  wheel    58B Nov 30 02:27 libcrypto.dylib -> /usr/local/Cellar/openssl/1.0.1c/lib/libcrypto.1.0.0.dylib 
```

我通过端口安装了openssl

现在当我运行 arc diff 时，我得到了臭名昭著的

```
$ arc diff
dyld: Library not loaded: /usr/lib/libpq.5.dylib
  Referenced from: /usr/bin/php
  Reason: image not found
Trace/BPT trap: 5 
```

这里有一些答案在这里讨论了将这些库符号链接到 postgresql 安装目录。显然，这对我不起作用。

我应该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T20:05:38.553

原来 /usr/lib/libpq.5.dylib 不存在，但 /usr/lib/libpq.5.4.dylib 不存在。

```
sudo ln -s /usr/lib/libpq.5.4.dylib /usr/lib/libpq.5.dylib 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-25T18:49:49.510

与@Pablo Marambio 不同，我通过将以下行添加到`~/.profile`：

```
export DYLD_LIBRARY_PATH=/Library/PostgreSQL/9.3/lib:$DYLD_LIBRARY_PATH 
```

对于 Postgres.app v9.3.5.0（可能还有其他），我添加了以下行：

```
export DYLD_LIBRARY_PATH=/Applications/Postgres.app/Contents/Versions/9.3/lib:$DYLD_LIBRARY_PATH 
```

然后，当然，运行`source ~/.profile`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-10T05:30:03.123

为了解决这个问题，我不得不卸载 postgresql 然后重新安装。

```
$ brew uninstall postgresql

$ brew update

$ brew install postgres 
```

# json - 主干集合获取错误

> ID：13643456
> 
> 赞同：1
> 
> 时间：2012-11-30T10:34:09.297
> 
> 标签：json, backbone.js

我正在尝试从 .json 文件中获取集合。这是我的收藏代码

```
define(['jquery', 'underscore', 'backbone', 'vent'], function($, _, Backbone, vent) {
'use strict';

    var Wine = Backbone.Model.extend({
        urlRoot: "js/models/wines.json",
        defaults: {
            "id": null,
            "name":  "",
            "grapes":  "",
            "country":  "USA",
            "region":  "California",
            "year":  "",
            "description":  "",
            "picture":  ""
        }
    });

    return Backbone.Collection.extend({
        model: Wine,
        url: "js/models/wines.json",
    });
}); 
```

我正在获取这样的集合：

```
var _wine = new wineCollection();
_wine.fetch({
    success : function(data) {
        console.log("ON SUCCESS");
        console.log(data);
    },
    error: function(response) {
        console.log("ON ERROR");
        console.log(response);
    }
}); 
```

在控制台中，它总是显示“ON ERROR”消息：

```
ON ERROR
child
  _byCid: Object
  _byId: Object
  _callbacks: Object
  length: 0
  models: Array[0]
  __proto__: ctor 
```

这是我的 wines.json 文件中的一项

```
{"id":"9","name":"BLOCK NINE","year":"2009","grapes":"Pinot Noir","country":"USA","region":"California","description":"With hints of ginger and spice, this wine makes an excellent complement to light appetizer and dessert fare for a holiday gathering.","picture":"block_nine.jpg"} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:56:07.640

您是否尝试过检查 fetch 方法中的集合类（实际发送的内容）。您可能需要重写 parse 方法才能访问发送过来的数据的内部部分。

例如：

```
Wine.Collection = Backbone.Collection.extend({

//we need to parse only the inner list
parse : function (response) {
    this.cursor = response.cursor;
    return response.list;
} 
```

其中数组是一个内部列表：**{list: [{item: one}, {item: two}]}**

# mysql - 需要在 MySQL 中编写多个 SELECT 语句

> ID：13643457
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:19.160
> 
> 标签：mysql, sql, multiple-select

我尝试使用多个 SQL 语句创建一个 MySQL 语句。

**我想做的是：**
我得到两张桌子，`project`& `jiraissue`。

**表：项目**

```
Columns:
ID  decimal(18,0) PK 
pname   varchar(255) 
URL varchar(255) 
LEAD    varchar(255) 
DESCRIPTION text 
pkey    varchar(255) 
pcounter    decimal(18,0) 
ASSIGNEETYPE    decimal(18,0) 
```

**表：jiraissue**

```
Columns:
ID  decimal(18,0) PK 
pkey    varchar(255) 
PROJECT decimal(18,0) 
REPORTER    varchar(255) 
ASSIGNEE    varchar(255) 
issuetype   varchar(255) 
SUMMARY varchar(255) 
DESCRIPTION longtext 
ENVIRONMENT longtext 
PRIORITY    varchar(255) 
RESOLUTION  varchar(255) 
issuestatus varchar(255) 
CREATED datetime 
UPDATED datetime 
DUEDATE datetime 
VOTES   decimal(18,0) 
TIMEORIGINALESTIMATE    decimal(18,0) 
TIMEESTIMATE    decimal(18,0) 
TIMESPENT   decimal(18,0) 
WORKFLOW_ID decimal(18,0) 
SECURITY    decimal(18,0) 
FIXFOR  decimal(18,0) 
COMPONENT   decimal(18,0) 
```

我的目标是获取 2012 年之前更新的最新问题 (jiraissue.UPDATED) 的项目名称 (project.pname)。

示例：
我得到了一个 Project *ABC*，它的最新问题是 21.11.2012 更新的。另一个 Project *XYZ*的最新一期最后更新于 08.12.2011。
所以我的 SQL 脚本应该给我第二个项目*XYZ*的名称，而不是第一个*ABC*

这里有一个工作脚本来找出哪个问题是最新的带有 STATIC 项目 ID 的问题：

```
SELECT 
    pkey
FROM
    jiraissue
WHERE
    UPDATED = (SELECT 
            max(UPDATED)
        FROM
            jiraissue
        WHERE
            PROJECT = 10472) 
```

但是现在脚本怎么样，当我想要所有这些项目的项目名称时？我所有的尝试都需要大量的处理时间并返回一个未定义的错误......

**编辑：** 现在我得到以下代码：

```
select 
    p.pname, j.pkey
from
    project p
        inner join
    jiraissue j ON j.ID = (select 
            PROJECT
        from
            jiraissue
        where
            UPDATED = (SELECT 
                    max(UPDATED)
                from
                    jiraissue))
        AND p.ID = j.PROJECT 
```

结果只是第一个键最低的项目......我如何浏览所有项目？

**编辑：**

```
select 
    p.pname, j.pkey, j.UPDATED
from
    project p
        inner join
    jiraissue j
where
    j.ID = (select 
            PROJECT
        from
            jiraissue
        where
            UPDATED = (SELECT 
                    max(UPDATED)
                from
                    jiraissue
                where
                    UPDATED < '2012-01-01 00:00:00'))
        and p.ID = j.PROJECT 
```

它显示了我想要的所有内容。但只是第一个项目。所以我需要所有项目！我如何不仅选择 1 个项目，而且选择所有项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:56:35.667

先从你想要什么开始。在每个项目的基础上，2012 年之前更新的最新问题是什么。暂时忽略项目表。

```
select
      JI.Project,
      MAX( JI.Updated ) as LastUpdated
   from
      JiraIssue JI
   group by
      JI.Project
   having 
      LastUpdated < '2012-01-01' 
```

现在，这将为您提供所需的所有主要信息。在 group by 之后应用 HAVING 子句以排除 2012 年和未来的任何项目。您不能将它作为 WHERE 子句应用，因为您的示例描述了您不想要任何有电流的东西（例如您的 ABC 项目）并且只想要 XYZ 项目。

通过加入项目表并通过该项目/更新组合再次加入 JiraIssue 表，以此作为获取其余数据的基础

```
select
      P.*,
      JI2.*
   from
      ( select
              JI.Project,
              MAX( JI.Updated ) as LastUpdated
           from
              JiraIssue JI
           group by
              JI.Project
           having 
              LastUpdated < '2012-01-01' ) PreQuery

         JOIN Project P
            on PreQuery.Project = P.ID

         JOIN JiraIssue JI2
            on PreQuery.Project = JI2.Project
           AND PreQuery.LastUpdated = JI2.Updated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:51:00.537

试试这个

```
 SELECT pname FROM project p
  INNER JOIN jiraissue j
   ON p.ID = (SELECT  ID
                FROM jiraissue
                WHERE
               UPDATED = (SELECT  max(UPDATED)
                FROM jiraissue )) 
```

# nsis - 如何在 NSIS 脚本中使用 REMOVE 功能？

> ID：13643462
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:34.320
> 
> 标签：nsis

我已经编写了用于创建 exe 文件的 nsis 脚本。我在脚本中包含了 REPAIR 和 REMOVE 功能。默认情况下，我已经检查了 REPAIR 单选按钮。如果用户单击删除按钮，它将使用以下命令删除已安装的文件

```
Function Remove
Exec "$INSTDIR\uninstall.exe"
Quit
FunctionEnd 
```

如果用户单击删除按钮，它将打开卸载窗口，并且用户单击卸载按钮，则只会进行卸载操作。|如果用户选择删除选项，有没有什么方法可以在不询问用户输入的情况下进行删除操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:38:33.740

```
Exec '"$INSTDIR\uninstall.exe" /S' 
```

[您可以在手册](http://nsis.sourceforge.net/Docs/Chapter3.html#3.2.2)中阅读有关命令行选项的更多信息。

# windows-phone-8 - Windows Phone 8 - 警报任务

> ID：13643466
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:43.577
> 
> 标签：windows-phone-8

我已经编写了一个按需读取 qr/barcode 的代码。但是，当系统警报响起时，我需要后台代理来运行这段代码/应用程序。我一直想不出该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-24T17:51:49.410

您无法从后台代理启动程序。您可以更新 Live Tiles 或显示 Shell toast 或从后台代理执行少量后台任务。

Windows phone 8 有两种类型的代理 - 1) PeriodicTask & 2)ResourceIntensiveTask

```
PeriodicTask: Periodic agents run for a small amount of time on a regular recurring interval.Periodic agents typically run every 30 minutes. To optimize battery life, periodic agents may be run in alignment with other background processes and therefore the execution time may drift by up to 10 minutes.Periodic agents typically run for 25 seconds. There are other constraints that may cause an agent to be terminated early. 

ResourceIntensiveTask: Resource-intensive agents run for a relatively long period of time when the phone meets a set of requirements relating to processor activity, power source, and network connection. Resource-intensive agents typically run for 10 minutes. There are other constraints that may cause an agent to be terminated early.Resource-intensive agents do not run unless the device has a network connection over Wi-Fi or through a connection to a PC.Resource-intensive agents do not run unless the device’s battery power is greater than 90%. 
```

更多请阅读[代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx/css)

# javascript - dojo 异常：Object [object Object] 没有方法 'appendChild'

> ID：13643468
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:44.630
> 
> 标签：javascript, dojo

嗨，

我对道场有一些问题。我会将我的脚本从 1.8 迁移到 2.0。

这是我的代码：我为新的 Univention Corporated Server 3.1 开发了一个插件。Univention 已将 dojo 框架从 1.8 更新到 2.0，我必须迁移我的代码。

在 dojo 1.8 下，我的程序运行良好。

```
define([
"dojo",
"dojo/_base/declare",
"dojo/_base/lang",
"dojo/_base/array",
"umc/widgets/Module",
"umc/widgets/ContainerWidget",
"umc/widgets/Page",
"umc/widgets/Form",
"umc/widgets/Grid",
"umc/widgets/TabContainer",
"umc/widgets/ExpandingTitlePane"
], function(declare,lang,array,Module,ContainerWidget,Page,Form,Grid,declare, lang,       array,TabContainer,_){
return declare("umc.modules.asteriskUser",[ Module ],{
    _buttons: null,
    _mailboxHint: null,
    _mailboxForm: null,
    _grid: null,
    _forms: [],

    buildRendering: function () {
        this.inherited(arguments);

        this._buttons = [{
            name: 'submit',
            label: "Speichern",
            callback: lang.hitch(this, function () {
                this.save();
            }),
        }];

        this._forms = [];

        var tabContainer = new umc.widgets.TabContainer({
            nested: true
        });

        tabContainer.addChild(this.renderPhones());

        tabContainer.addChild(this.renderMailbox());

        tabContainer.addChild(this.renderForwarding());
        this.addChild(tabContainer);

        this.startup();
        this.load();
    },
    renderMailbox: function () {
        var page = new umc.widgets.Page({
            title: "Anrufbeantworter",
            headerText: "Anrufbeantwortereinstellungen",
            footerButtons: this._buttons,
            closable: false,
        });

        var container = new umc.widgets.ContainerWidget({
            scrollable: true,
        });
        page.addChild(container);

        var noMailboxHint = new umc.widgets.Text({
            content: "Leider hat Ihnen der Administrator keinen " +
                "Anrufbeantworter zugewiesen.",
            region: "top",
        });
        container.addChild(noMailboxHint);
        this._mailboxHint = noMailboxHint;

        var widgets = [{
            type: 'TextBox',
            name: 'mailbox/password',
            label: "PIN-Nummer zum Abrufen",
        }, {
            type: 'ComboBox',
            name: 'mailbox/email',
            label: "Per eMail benachrichtigen?",
            staticValues: [
                { id: '0', label: "Nein" },
                { id: '1', label: "Ja, gerne!" },
            ],
        }, {
            type: 'ComboBox',
            name: 'mailbox/timeout',
            label: "Mailbox antwortet nach",
            staticValues: [
                { id:   '5', label: "5 Sekunden" },
                { id:  '10', label: "10 Sekunden" },
                { id:  '20', label: "20 Sekunden" },
                { id:  '30', label: "30 Sekunden" },
                { id:  '45', label: "45 Sekunden" },
                { id:  '60', label: "einer Minute" },
                { id: '120', label: "zwei Minuten" },
                { id: '180', label: "π Minuten" },
            ],
        }];

        var layout = [
            'mailbox/password',
            'mailbox/email',
            'mailbox/timeout'
        ];

        var form = new umc.widgets.Form({
            widgets: widgets,
            layout: layout,
            scrollable: true,
        });
        container.addChild(form);
        this._forms.push(form);
        this._mailboxForm = form;

        this._mailboxForm.domNode.style.display = 'none';
        this._mailboxHint.domNode.style.display = 'block';

        return page;
    },
    renderPhones: function () {
        var page = new umc.widgets.Page({
            title: "Telefone",
            headerText: "Telefoneinstellungen",
            footerButtons: this._buttons,
            closable: false,
        });

        var container = new umc.widgets.ExpandingTitlePane({
            title: "Klingelreihenfolge",
        });
        page.addChild(container);

        this._grid = new umc.widgets.Grid({
            moduleStore: umc.store.getModuleStore("dn",
                "asteriskUser/phones"),
            query: {
                filter:'*',
            },
            columns: [{
                name: 'position',
                label: "Position",
                editable: false,
                hidden: true,
            }, {
                name: 'name',
                label: "Telefon",
                editable: false,
            }],
            actions: [{
                name: 'earlier',
                label: "Früher",
                isStandardAction: true,
                canExecute: lang.hitch(this, function (values) {
                    return values.position > 0;
                }),
                callback: lang.hitch(this, function (id) {
                    this._grid.filter({
                        dn: id,
                        position: -1,
                    });
                }),
            }, {
                name: 'later',
                label: "Später",
                isStandardAction: true,
                canExecute: lang.hitch(this, function (values) {
                    return (values.position + 1 <
                        this._grid._grid.rowCount);
                }),
                callback: lang.hitch(this, function (id) {
                    this._grid.filter({
                        dn: id,
                        position: 1,
                    });
                }),
            }],
        });
        container.addChild(this._grid);
        foo = this._grid;

        this._grid._grid.canSort = function (index) {
            return false;
        };

        var widgets = [{
            type: 'ComboBox',
            name: 'phones/interval',
            label: "Klingelintervall",
            staticValues: [
                { id:   '2', label:  "2 Sekunden" },
                { id:   '4', label:  "4 Sekunden" },
                { id:   '6', label:  "6 Sekunden" },
                { id:   '8', label:  "8 Sekunden" },
                { id:  '10', label: "10 Sekunden" },
            ],
        }];

        var layout = [
            'phones/interval',
        ];

        var form = new umc.widgets.Form({
            region: 'top',
            widgets: widgets,
            layout: layout,
            scrollable: true,
        });
        page.addChild(form);
        this._forms.push(form);

        page.startup();
        return page;
    },
    renderForwarding: function () {
        var page = new umc.widgets.Page({
            title: "Weiterleitung",
            headerText: "Weiterleitungseinstellungen",
            footerButtons: this._buttons,
            closable: false,
        });

        var container = new umc.widgets.ContainerWidget({
            scrollable: true,
        });
        page.addChild(container);

        var widgets = [{
            type: 'TextBox',
            name: 'forwarding/number',
            label: "Weiterleitungsziel",
        }];

        var layout = [
            'forwarding/number'
        ];

        var form = new umc.widgets.Form({
            widgets: widgets,
            layout: layout,
            scrollable: true,
        });
        container.addChild(form);
        this._forms.push(form);

        return page;
    },
    setValues: function (values) {
        array.forEach(this._forms, function (form) {
            form.setFormValues(values);
        }, this);

        // disable the mailbox form if needed
        if (values.mailbox) {
            this._mailboxForm.domNode.style.display = 'block';
            this._mailboxHint.domNode.style.display = 'none';
        } else {
            this._mailboxForm.domNode.style.display = 'none';
            this._mailboxHint.domNode.style.display = 'block';
        }
    },
    getValues: function () {
        var values = {};
        array.forEach(this._forms, function (form) {
            lang.mixin(values, form.gatherFormValues());
        }, this);
        return values;
    },
    load: function () {
        this.umcpCommand('asteriskUser/load').then(
            lang.hitch(this, function (data) {
                this.setValues(data.result);
            }),
            lang.hitch(this, function () {
                // hm...
            })
        );
    },
    save: function () {
        var data = this.getValues();
        this.umcpCommand('asteriskUser/save', data);
    },
  });
}); 
```

因此，Chrome 给了我以下异常消息：

```
Uncaught TypeError: Object [object Object] has no method 'appendChild' 
_1a86.buildRendering 
_11cd 
_abc.buildRendering 
_13a4.create 
_13a4.postscript 
a 
_11e4 
a 
(anonymous function) 
_c6 
_36 
_36 
_7b 
_37 
_7b 
_ee 
req.injectUrl._108 
```

有人有想法吗？

谢谢帮助！

# php - 在php中重新格式化数组

> ID：13643469
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:47.600
> 
> 标签：php, arrays

我有一个像这样的数组：

```
Array ( 
    [0] => Array ( 
        [A] => khaja.ghc@cdc.com 
        ) 
    [1] => Array ( 
        [A] => bag@example.com 
        ) 
    ) 
```

是否有任何简单的过程可以在 php 中存储`khaja.ghc@cdc.com`和存储`bag@example.com`在数组中？如果是这样，请帮助我。我通过`foreach()`方法做到这一点，并在获取元素后将它们存储在一个数组中。然后最后通过`array_push()`方法我得到了所需的数组。但我想我错过了简单的过程。你能帮助我吗 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:40:02.553

您仍然可以使用`foreach`修改值。尝试

```
foreach($array as $key => &$value) {
    if(is_array($value) && isset($value['A'])) $value = $value['A'];
} 
```

你的`$array`意志看起来就像你想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:40:22.210

如果我理解你的问题：

```
$data = array(array('A' => 'khaja.ghc@cdc.com'), array('A' => 'bag@example.com'));
$result = array();

foreach($data as $element)
  if (is_array($element) && isset($element['A']))
    $result[] = $element['A'];

print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:47:44.827

如果你想保存几行代码，你可以使用[array_map](http://www.php.net/manual/en/function.array-map.php)和[create_function](http://pt1.php.net/manual/en/function.create-function.php)：

```
$a = array(array('A' => 'khaja.ghc@cdc.com'), array('A' => 'bag@example.com'));

$result = array_map(create_function('$x','$y = array_values($x); return $y[0];'), $a)) 
```

虽然节省了代码行数，但我不鼓励您采用这种方法。`foreach`通过一个简单的循环，代码将更容易阅读和理解。

# php - 如何在一行中在php中添加标准元素

> ID：13643474
> 
> 赞同：0
> 
> 时间：2012-11-30T10:34:54.443
> 
> 标签：php, html

我创建了一些 php 文件以下是它们的名称：

1.  standard_head.php（包含基本的标准 html 代码）
2.  头文件.php
3.  导航栏.php
4.  边栏.php
5.  页脚.php
6.  standard_footer.php（包含关闭的 html 标记）

每个页面的页面内容都会有所不同，并且还会包括 html 内容。

我正在尝试创建很多 php 页面，这些页面将直接使用上述所有页面。

现在我可以直接对它们中的每一个使用 include 语句来使用它们，但是我想知道是否可以将它们全部包含在一个 just 语句中？

```
<?php include('../includes/standard_head.php'); ?>
        <?php include('includes/header.php'); ?>
            <div id="wrapper">
                <?php include('includes/nav.php'); ?>
                <div id="content">
                <!-- my page content -->
                </div> <!-- end #content -->
                <?php include('includes/sidebar.php'); ?>
            </div> <!-- End #wrapper -->
        <?php include('includes/footer.php'); ?>
<?php include('../includes/standard_footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:42:25.007

您可以这样做（请注意，这是一个非常基本的示例，如果不考虑元标记、页面标题等，我自己不会使用它）

**模板.php**

```
<?php include('../includes/standard_head.php'); ?>

<?php include('includes/header.php'); ?>

    <div id="wrapper">

        <?php include('includes/nav.php'); ?>

            <div id="content">
                <?php echo $content; ?>
            <!-- my page content -->
            </div> <!-- end #content -->

        <?php include('includes/sidebar.php'); ?>

    </div> <!-- End #wrapper -->

    <?php include('includes/footer.php'); ?>

<?php include('../includes/standard_footer.php'); ?> 
```

然后，在一个页面上（例如 index.php）：

**索引.php**

```
<?php
$content = '<h1>Welcome</h1>';
include 'template.php';
?> 
```

PS：如果你走这条路，请确保先检查[输出控制功能](http://www.php.net/manual/en/ref.outcontrol.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:38:20.333

只需创建一个包含它们列表的 PHP 文件，即

```
<?php include("this file"); 
      include("the other file");
?> 
```

然后只需添加该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:41:01.740

不是您问题的真正答案，但您可以使用像 Twig 这样的模板引擎。 [http://twig.sensiolabs.org/](http://twig.sensiolabs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:07:54.253

尝试使用更复杂的模板系统，如[Smarty](http://www.smarty.net/)或一些 MVC 框架，如[Zend](http://framework.zend.com/)（这不是必需的，但可以让您更轻松地创建复杂的源），然后像这样构建脚本：

```
<?php include('../includes/standard_head.php'); ?>
<?php include('includes/header.php'); ?>

    <div id="wrapper">

        <?php include('includes/nav.php'); ?>
            <div id="content">
                <?php echo $menu->getCustomEntries(); ?>
            </div> 
```

`$menu`您的自定义对象将在哪里包含显示菜单和子菜单的方法...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T10:43:12.300

没有直接的方法来包含多个文件，因为 include / require 函数只有一个参数。尽管您可以使用以下逻辑。

`#include_all_files.php include('../includes/standard_head.php'); include('includes/header.php'); ...

# 在其他文件中使用上述文件

include('includes/include_all_files.php'); `

# java - 将 BinarySearchTree 条目导出到列表

> ID：13643480
> 
> 赞同：0
> 
> 时间：2012-11-30T10:35:13.173
> 
> 标签：java, list, data-structures

请注意，BinarySearchTree 类来自 net.datastructures 5.0

```
 public static <K, V extends Comparable> List<Entry<K, V>> sortTree(BinarySearchTree<K, V> tree) 
    {   
        List<Entry<K, V>> entries = new ArrayList<Entry<K, V>>(tree.size()); 
        entries.addAll(tree.entries()); 
```

我将如何解决这个问题？

```
 Error: The method addAll(Collection<? extends Entry<K,V>>) in the type List<Entry<K,V>> is not applicable for the arguments (Iterable<Entry<K,V>>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:45:56.583

```
for(Entry<K,V> entry : tree.entries()) { entries.add(entry);} 
```

# c# - 如果动作不存在，路由到不同的控制器和动作

> ID：13643482
> 
> 赞同：0
> 
> 时间：2012-11-30T10:35:17.347
> 
> 标签：c#, routing, asp.net-web-api

我目前有 2 个控制器，MemberController 和 Admincontroller，如果我像下面这样使用它（不同的操作），它工作正常：

```
http://localhost/member/delete/ME222 
http://localhost/admin/view/AD321 
```

我的路线配置如下所示：

```
routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", 
  action = "Index", id = UrlParameter.Optional }
 ); 
```

但是现在我已经为成员和管理员创建了一个共享操作（详细信息），我把它放在我的 SharedController 中，并希望像这样访问它：

```
http://localhost/member/detail/ME222
http://localhost/admin/detail/AD321 
```

当然，当我点击上面的 url 时，Admin-和 MemberController 中不存在该操作。

如果控制器（成员或管理员）中的当前当前操作不存在，我如何将上述内容路由到 SharedController 的操作？（不仅是 Detail 操作，还包括所有不存在的操作）

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:38:36.823

您需要确保该操作始终存在......也许您可以为您的控制器创建一个基类。

然后在基本动作中，您可以简单地返回：

```
this.RedirectToAction("action", "controller"); 
```

将其指向共享控制器上的相关操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:42:35.630

如果您对两个控制器都有共同的操作，您可以简单地创建`UserController`将是控制器的基`Member`类`Admin`。然后你可以把所有常见的动作放在里面`UserController`，它应该可以工作。
如果您想覆盖某些东西（或者例如为每个角色放置具有不同属性的标记动作），您可以将动作设为虚拟，然后在子类中覆盖它。

# django - Django South 向管理员添加了模型，但给出了 DatabaseError

> ID：13643485
> 
> 赞同：1
> 
> 时间：2012-11-30T10:35:19.200
> 
> 标签：django, model, admin, add, django-south

我刚刚开始在**现有**应用程序中使用南，在将新模型添加到数据库后，我可以在管理员中查看模型，但是当单击它们查看模型详细信息时出现错误

我尝试做相当于syncdb的南方：

```
python manage.py schemamigration directory --initial

python manage.py migrate directory 
```

其中目录是应用程序名称。

因此，当我尝试在管理员中查看模型时，我得到以下信息：

```
Exception Type: DatabaseError

Exception Value: (1146, "Table 'omada.directory_drift' doesn't exist") 
```

其中 Drift 是我添加到 models.py 中的模型，然后在 admin.py 中注册 - omada 是站点名称。

**更多信息：**

来自 django 站点的回溯以：

```
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py" in execute

  114\.             return self.cursor.execute(query, args) File "/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.4b5-py2.7-linux-i686.egg/MySQLdb/cursors.py" in execute
  201\.             self.errorhandler(self, exc, value) File "/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.4b5-py2.7-linux-i686.egg/MySQLdb/connections.py" in defaulterrorhandler
  36\.     raise errorclass, errorvalue 
```

执行时

```
python manage.py migrate directory 
```

我收到一个错误，开头是：

```
FATAL ERROR - The following SQL query failed: CREATE TABLE `directory_building`
 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had
 ! to leave it in an interim state between migrations. 
```

这听起来不太有希望：S，并以：

```
 File "/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.4b5-py2.7-linux-i686.egg/MySQLdb/connections.py", line 36, in defaulterrorhandler                
    raise errorclass, errorvalue
django.db.utils.DatabaseError: (1050, "Table 'directory_building' already exists") 
```

提前感谢所有花时间阅读本文并提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:34:02.757

您可能会发现本[指南](http://south.aeracode.org/wiki/ConvertingAnApp)很有用。

由于您只是从 South 开始，我建议您从头开始：

1.  从数据库中删除南表 (south_migrationhistory)

2.  从 app.migrations 文件夹中删除迁移

3.  按照指南

让南方陷入糟糕的状态很容易，因此您只需要获得一些经验即可。然而，随着项目规模的扩大，你不能没有它。

# c# - 向此 xml 结构添加元素

> ID：13643486
> 
> 赞同：1
> 
> 时间：2012-11-30T10:35:26.227
> 
> 标签：c#, xml, xpath, linq-to-xml

```
<root>
    <element1>innertext</element1>
    <element2>innertext</element2>
    <element3>
        <child1>innertext</child1>
    </element3>
</root> 
```

我有一个上面显示的 xml 结构。

我想“附加” xml 文件（它已经创建）以在 element3> 中添加另一个“子”，使其看起来像这样：

```
<root>
    <element1>innertext</element1>
    <element2>innertext</element2>
    <element3>
        <child1>innertext</child1>
        <child2>innertext</child2>
    </element3>
</root> 
```

Linq to xml 和/或 Xpath 会很棒

编辑：我试过这样做：

```
XElement doc = XElement.Load(mainDirectory);
XElement newElem = doc.Elements("element3").First();
newElem.Add(new XElement("child2", "child2innertext"));
doc.Add(newElem);
doc.Save(mainDirectory); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:41:50.027

```
XmlDocument xDoc = new XmlDocument();
        xDoc.Load("filename.xml");

        foreach (XmlNode xNode in xDoc.SelectNodes("/root/element3"))
        {
            XmlElement newElement = xDoc.CreateElement("Child2");

            xNode.AppendChild(newElement);
            xNode.InnerText = "myInnerText";
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:42:39.460

使用 XDocument，您可以通过以下方式实现：

```
 string xml = "<root><element1>innertext</element1><element2>innertext</element2><element3><child1>innertext</child1></element3></root>";

 var doc = XDocument.Parse(xml); //use XDocument.Load("filepath"); in case if your xml is in a file.

 var el3 = doc.Descendants("element3").FirstOrDefault();

 el3.Add(new XElement("child2", "innertext")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:42:26.937

请尝试这个 LINQPAD 示例

```
void Main()
{
var xml = 
@"<root>
        <element1>innertext</element1>
        <element2>innertext</element2>
        <element3>
            <child1>innertext</child1>
        </element3>
    </root>";

    var doc = XDocument.Parse(xml); 
    doc.Root.Element("element3")
    .Add(new XElement("child2", "innertext"));

    doc.Dump();
} 
```

# php - 正则表达式在任一侧用空格替换给定单词或根本不替换

> ID：13643491
> 
> 赞同：2
> 
> 时间：2012-11-30T10:35:39.557
> 
> 标签：php, regex, preg-replace

我正在使用 PHP 中的一些代码从搜索引擎中获取引荐来源数据，从而为我提供用户输入的查询。

然后，如果存在，我想从该字符串中删除某些停用词。但是，这个词的两端可能有也可能没有空格。

例如，我一直使用 str_replace 来删除一个单词，如下所示：

```
$keywords = str_replace("for", "", $keywords);
$keywords = str_replace("sale", "", $keywords); 
```

但如果 $keywords 值是“婴儿公式”，它会将其更改为“婴儿 mula” - 删除“for”部分。

无需为“for”和“for”创建进一步的str_replace - 是否有一个preg_replace 类型命令我可以使用它来删除给定的单词，如果它在任何一端都有空格？

我的想法是将所有停用词放入一个数组中并以这种方式逐步遍历它们，我怀疑 preg_replace 会比遍历多个 str_replace 行更快。

**更新：** 感谢你们使用以下组合解决：

```
$keywords = "...";
$stopwords = array("for","each");
foreach($stopwords as $stopWord)
{
    $keywords = preg_replace("/(\b)$stopWord(\b)/", "", $keywords);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:41:26.740

```
$keywords = "...";
$stopWords = array("for","sale");
foreach($stopWords as $stopWord){
    $keywords = preg_replace("/(\b)$stopWord(\b)/", "", $keywords);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:40:17.477

试试这个方法

```
$keywords = preg_replace( '/(?!\w)(for|sale)(?>!\w)/', '', $keywords ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:43:31.397

您可以为此使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)

```
$keywords = preg_replace('/\bfor\b/', '', $keywords); 
```

或多个词

```
$keywords = preg_replace('/\b(?:for|sale)\b/', '', $keywords); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T01:42:49.407

虽然 Armel 的答案*会起作用*，但它的表现并不理想。是的，您想要的输出将需要 wordboundaries 和可能不区分大小写的匹配，但是：

1.  用括号括起来的字边界没有任何好处。
2.  `preg_match()`对黑名单数组中的每个元素执行迭代调用效率不高。这样做将要求正则表达式引擎对整个字符串执行一波又一波的单个关键字检查。

我建议构建一个单一的正则表达式模式，该模式将在遍历字符串的每个步骤中检查所有关键字——一次。要动态生成单个模式，您只需要使用（管道）来内爆您的黑名单元素数组，这些`|`（管道）表示正则表达式中的“OR”命令。通过将所有以竖线分隔的关键字包装在一个非捕获组 ( `(?:...)`) 中，单词边界 ( `\b`) 为黑名单数组中的所有关键字服务。

代码：（[演示](https://3v4l.org/Pui9I)）

```
$string = "Each person wants peaches for themselves forever";
$blacklist = array("for", "each");
// if you might have non-letter characters that have special meaning to the regex engine
//$blacklist = array_map(function($v){return preg_quote($v, '/');}, $blacklist);
//print_r($blacklist);
echo "Without wordboundaries:\n";
var_export(preg_replace('/' . implode('|', $blacklist) . '/i', '', $string));

echo "\n\n---\n";
echo "With wordboundaries:\n";
var_export(preg_replace('/\b(?:' . implode('|', $blacklist) . ')\b/i', '', $string));

echo "\n\n---\n";
echo "With wordboundaries and consecutive space mop up:\n";
var_export(trim(preg_replace(array('/\b(?:' . implode('|', $blacklist) . ')\b/i', '/ \K +/'), '', $string))); 
```

输出：

```
Without wordboundaries:
' person wants pes  themselves ever'

---
With wordboundaries:
' person wants peaches  themselves forever'

---
With wordboundaries and consecutive space mop up:
'person wants peaches themselves forever' 
```

ps`/ \K +/`是输入的第二个模式，`preg_replace()`这意味着将第二次读取输入字符串以搜索 2 个或更多连续空格。 `\K`意思是“从这里重新开始全串匹配”；它有效地释放了先前匹配的空间。然后匹配一个或多个空格并替换为空字符串。

# umbraco - Umbraco.config 文件没有被写入/发布

> ID：13643493
> 
> 赞同：3
> 
> 时间：2012-11-30T10:35:40.440
> 
> 标签：umbraco

我们的 Umbraco 站点在大部分项目中都将其站点结构写入其 XML 配置文件，但最近它已停止这样做，我们不知道为什么。我们没有做任何新的或不寻常的事情，我们也没有立即注意到它，所以我们不确定是否存在真正引发这种变化的变化。

我已经检查了文件夹上的权限，我确信它有权限可以写。

我不知道还要寻找什么。有人对我应该寻找什么或遇到这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:06:16.343

开始查看此问题的最佳位置是 Umbraco 数据库。您可以看到一个表名 dbo.umbracoLog 。在此表中，将记录所有活动，例如写入 xml 配置文件。如果发生错误，您肯定会从中获得一些信息那里会引导你找出真正的原因

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:53:13.583

好吧，在通过修订历史对我的方式进行二进制排序后，我发现应用程序配置发生了变化：

```
<add key="umbracoContentXMLUseLocalTemp" value="true" /> 
```

将此设置为 false 会使它重新出现在我的 App_Data 文件夹中。我假设当它设置为 true 时它实际上出现在 temp 文件夹中。如果有人想用更多细节来编辑这个答案，那么知道这个设置实际上做了什么会很有趣。

# python - 在 Apache 上运行时加载 pyodbc 模块时出错

> ID：13643494
> 
> 赞同：5
> 
> 时间：2012-11-30T10:35:43.413
> 
> 标签：python, django, apache, mod-wsgi, pyodbc

以前我一直在尝试使用 apache 上的虚拟主机托管多个 DEMO django 项目，并在 stackoverflow 的帮助下成功。

现在，我一直在尝试使用与以前相同的技术来托管我的新项目。我的新项目已连接到**sql_server**数据库。使用 djangos 内置服务器时，我的项目运行完美。

当我尝试使用 apache 运行时，我收到**500 Internal Server Error**并且我的 apache 错误日志显示 -

```
Exception occurred processing WSGI script 

ImproperlyConfigured: Error loading pyodbc module: DLL load failed: A dynamic link library (DLL) initialization routine failed. 
```

我的 wsgi 文件如下所示 -

```
import os
import sys

path = 'C:/path/project1'
if path not in sys.path:
    sys.path.append(path)

os.environ["DJANGO_SETTINGS_MODULE"] = "settings"

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

我的机器里确实有***“C:\Windows\SysWOW64\python27.dll”***

我的系统 - Windows 7、Apache 2.2、python 2.7、django 1.4.2

我在我的机器上发现的另一个信息 - win32 上的***Python 2.7 (r27:82525, Jul 4 2010, 09:01:59) [MSC v.1500 32 bit (Intel)]***

有什么解决办法吗？？

非常感谢各位...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:42:17.350

在花了几个小时谷歌搜索答案后，我设法解决了这个问题，终于在[这里](http://code.google.com/p/pyodbc/issues/detail?id=214)找到了答案，它说：

> 似乎通过在 python.exe 内部运行来满足这种依赖关系（它与相同的链接）。当 python 解释器的 dll 版本由另一个进程托管时，windows sxs 配置仅将 msvcr90 依赖项应用于 python dll。
> 
> 这意味着，通常，除非宿主应用程序与适当版本的 msvc 运行时链接，否则 pyodbc.pyd（可能还有 pyodbcconf.pyd）将无法在 Windows 上的嵌入式 python 中使用。

使用 mt.exe（windows sdk 中免费提供的工具）并尝试命令行上的命令。

[我从哪里获得 mt.exe？](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/89419579-0097-45b3-b983-b8c24d0ff538/where-do-i-get-mtexe?forum=windowssecurity)

```
mt.exe -inputresource:c:\windows\syswow64\python27.dll;#2 -outputresource:pyodbc.pyd;#2

mt.exe -inputresource:c:\windows\syswow64\python27.dll;#2 -outputresource:pyodbcconf.pyd;#2 
```

希望这对某人有用。

干杯

# android - 搜索喜欢功能 Mapview

> ID：13643495
> 
> 赞同：0
> 
> 时间：2012-11-30T10:35:55.603
> 
> 标签：android, google-maps, geocoding

这是我的项目，您可以在其中单击列表视图中的医院名称，并将在下一个活动中显示详细信息，详细信息下方是地图视图。我的项目崩溃了，我从 logcat 收到了这个错误

```
11-30 18:22:50.085: E/AndroidRuntime(13114): FATAL EXCEPTION: main
11-30 18:22:50.085: E/AndroidRuntime(13114): java.lang.NullPointerException
11-30 18:22:50.085: E/AndroidRuntime(13114):    at com.dr.droid.lee.HospResult$GeocoderTask.onPostExecute(HospResult.java:130)
11-30 18:22:50.085: E/AndroidRuntime(13114):    at com.dr.droid.lee.HospResult$GeocoderTask.onPostExecute(HospResult.java:1)
11-30 18:22:50.085: E/AndroidRuntime(13114):    at android.os.AsyncTask.finish(AsyncTask.java)
11-30 18:22:50.085: E/AndroidRuntime(13114):    at android.os.AsyncTask.access$600(AsyncTask.java)
11-30 18:22:50.085: E/AndroidRuntime(13114):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java) 
```

这是我班级的代码

```
public class HospResult extends MapActivity {

    String hcity;
    String hregion;
    String hadd;
    String hname;
    String hcon;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Typeface type = Typeface.createFromAsset(this.getAssets(),"MyriadPro-Bold.ttf");
        setContentView(R.layout.map);
        TextView hosname =  (TextView) findViewById(R.id.tvName);
        TextView hosreg =  (TextView) findViewById(R.id.tvRegion);
        TextView hosadd =  (TextView) findViewById(R.id.tvAddress);
        TextView hoscon =  (TextView) findViewById(R.id.tvContact);
        TextView hoscity =  (TextView) findViewById(R.id.tvCity);
        Bundle receive = getIntent().getExtras();
        hcity = receive.getString("city");
        hregion = receive.getString("region");
        hadd = receive.getString("address");
        hname = receive.getString("name");
        hcon = receive.getString("contact");
        hosname.setText(hname);
        hosreg.setText(hregion);
        hoscity.setText(hcity);
        hosadd.setText(hcon);
        hoscon.setText(hadd);
        hosname.setTypeface(type);
        hosreg.setTypeface(type);
        hosadd.setTypeface(type);
        hoscity.setTypeface(type);
        hoscon.setTypeface(type);
        //MapView mv =  (MapView) findViewById(R.id.mv1);
        //MapController mp = mv.getController();
        //mp.setZoom(15);
        String loc = hosname.getText().toString();
        //Toast.makeText(this, loc, Toast.LENGTH_SHORT).show();

        if(loc!=null && !loc.equals("")){
            new GeocoderTask().execute(loc);
        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    // An AsyncTask class for accessing the GeoCoding Web Service
        private class GeocoderTask extends AsyncTask<String, Void, List<Address>>{

            @Override
            protected List<Address> doInBackground(String... locationName) {
                // Creating an instance of Geocoder class
                Geocoder geocoder = new Geocoder(getBaseContext());
                List<Address> addresses = null;

                try {
                    // Getting a maximum of 3 Address that matches the input text
                    addresses = geocoder.getFromLocationName(locationName[0], 1);
                } catch (IOException e) {
                    e.printStackTrace();
                }           
                return addresses;
            }

            @Override
            protected void onPostExecute(List<Address> addresses) {

                // Getting Reference to MapView of the layout activity_main
                MapView mapView = (MapView) findViewById(R.id.mv1);

                // Setting ZoomControls
                mapView.setBuiltInZoomControls(true);

                // Getting MapController for the MapView
                MapController mc = mapView.getController();
                mc.setZoom(18);

                // Getting Drawable object corresponding to a resource image
                Drawable drawable = getResources().getDrawable(R.drawable.marker);

                // Getting Overlays of the map
                List<Overlay> overlays = mapView.getOverlays();

                // Creating an ItemizedOverlay
                LocationOverlay locationOverlay = new LocationOverlay(drawable,getBaseContext());

                // Clearing the overlays
                overlays.clear();

                if(addresses==null || addresses.size()==0){
                    Toast.makeText(getBaseContext(), "No Location found", Toast.LENGTH_SHORT).show();

                    // Redraws the map to clear the overlays
                    mapView.invalidate();
                }

                // Adding Markers on Google Map for each matching address
                for(int i=0;i<addresses.size();i++){                

                    Address address = (Address) addresses.get(i);

                    // Creating an instance of GeoPoint, to display in Google Map
                    GeoPoint p = new GeoPoint(
                                              (int)(address.getLatitude()*1E6),
                                              (int)(address.getLongitude()*1E6)
                                             );

                    String addressText = String.format("%s, %s",
                            address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                            address.getCountryName());

                    // Creating an OverlayItem to mark the point
                    OverlayItem overlayItem = new OverlayItem(p, "Location",addressText);

                    // Adding the OverlayItem in the LocationOverlay
                    locationOverlay.addOverlay(overlayItem);

                    // Adding locationOverlay to the overlay
                    overlays.add(locationOverlay);

                    // Locate the first location
                    if(i==0)
                        mc.animateTo(p);                    
                }

                // Redraws the map
                mapView.invalidate();

            }       
        }

} 
```

130号线从这里开始

```
for(int i=0;i<addresses.size();i++){ 
```

在添加此类似搜索功能之前，我的项目正在显示地图并运行良好，但是在添加我从教程中获得的类似搜索功能后，它崩溃了。知道为什么我的项目在加载地图时崩溃了吗？我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:47:30.873

尝试初始化您的列表`List<Address> addresses = new List<Address>();`

正如@Carnal 在这里非常正确地说的那样，如果您确定通过方法获取列表，则不必初始化列表，`geocoder.getFromLocationName`然后您可以使用`List<Address> addresses=null`，或者您可以检查列表的大小并根据在循环中使用它们时使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:09:33.617

您不需要初始化，因为返回 a `List<Address> addresses = new List<Address>();`，您仍然可以拥有。问题似乎是您在执行循环之前没有检查您的地址列表是否为空。这似乎会使您的程序崩溃。`List<Address> addresses = null``geocoder.getFromLocationName``List<Address>`

做这个检查：

```
if(addresses != null && addresses.size() > 0){
    for(int i=0;i<addresses.size();i++){
        // rest of your code..
    }
} 
```

# php - php浮动变量问题

> ID：13643497
> 
> 赞同：0
> 
> 时间：2012-11-30T10:35:56.790
> 
> 标签：php, floating-point

我有：

```
$newscore = $score*.3 
```

现在`$newscore`转储时显示：

```
(float)0.6 (float)-0.6 
```

回显时：

```
0.6-0.6 
```

首先，我怎样才能使 var 值就像`0.6`是`$score`唯一的正数一样`2`？是否有转换为字符串或类似的东西。

其次，存储的值`$newscore`似乎没有传递给我的 SQL INSERT 函数，该函数是使用占位符方法设置的`%d $newscore`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:40:52.247

这对我来说很好，它会返回`double(0.6)`

```
$score = 2;
$newscore = $score * 0.3;

var_dump($newscore); 
```

至于你的第二个问题，你应该在使用十进制数时使用`%f`而不是`%d`

# android - 引用计数带有缓存的android位图

> ID：13643504
> 
> 赞同：2
> 
> 时间：2012-11-30T10:36:14.277
> 
> 标签：android, caching, bitmap, out-of-memory

在 Android pre-honeycomb 上，位图存在异常的内存问题，因为它们的数据没有存储在 VM 中。因此，GC 不会跟踪或删除它。相反，它在`Bitmap.recycle()`被调用时被删除（这也在`Bitmap`' 终结器中自动完成）。

这在进行图像缓存时会导致一些问题。当一个位图要被驱逐时，我不能简单地调用`recycle()`它，因为我不知道是否有其他人在使用它。

我的第一个想法是`System.gc()`在加载每个位图之前做。这样，希望孤立`Bitmap`的 s 将被最终确定并释放本机内存。但[它不起作用](https://stackoverflow.com/a/4348208/265521)。*编辑：实际上它确实有点工作。在移动它并将我的缓存大小减半（看起来像是一个小得可笑的 2 MB 未压缩位图数据）之后，我`System.gc()`的位置错了，我的应用程序似乎不再崩溃（到目前为止）！*

我的下一个想法是通过子类化`Bitmap`和调用`ReferenceCountedBitmap.decrementCount()`我所有活动的`onDestroy()`方法来实现手动引用计数。但我不能因为`Bitmap`是最终的。

我现在正在计划一个`BitmapManager`保留`WeakReference`'s 位图的方法，并且具有以下方法：

```
public void using(Bitmap bm);
public void free(Bitmap bm); 
```

计算引用。

有没有人有任何处理这个问题的经验或建议？在你建议之前，我不能忽视 80% 的市场。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:27:23.890

好吧，我用位图管理器解决了这个问题，我在其中保存了引用视图。在类似地图的结构位图 -> 视图列表中。

在调用`recycle()`位图之前，我首先将视图中的所有引用设置为 null（否则会抛出位图回收异常）。

正如您所说，手动垃圾收集不适用于蜂窝前的位图，因为它们是在本机堆中分配的，即使`System.gc()`您无法假设何时释放此内存。

# jboss - 如何在 JBoss AS7 的 EAR 中使用可移植 CDI 扩展？

> ID：13643505
> 
> 赞同：1
> 
> 时间：2012-11-30T10:36:17.377
> 
> 标签：jboss, cdi, ear

我们有一个 Web 应用程序 WAR，它包含可移植 CDI 扩展（seam-spring-core、activity-cdi）作为 WEB-INF/lib 中的 JAR，它在 JBoss AS7.1.1 上按预期工作。

但是，当我们将 WAR 打包到 EAR 中时，服务发现机制就会失败。类加载器不再在 META-INF/services 中找到相应的资源文件。

我们尝试将可移植 CDI 扩展放入 (JBoss) 模块中，但这会阻止处理 CDI 注释。我们还尝试将 JAR 放在 EAR 的 lib 目录中，结果相同。

EAR 中可移植 CDI 扩展的正确位置在哪里？WAR 中的可移植 CDI 扩展是否应该像没有 EAR 一样工作？这是 JBoss AS7.1.1 的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:20:47.420

那应该可以工作（耳朵的库中的罐子）你耳朵里有bean.xml吗？可能需要在罐子里切块。

# dynamics-crm-2011 - 实体的表单未更新

> ID：13643506
> 
> 赞同：0
> 
> 时间：2012-11-30T10:36:18.657
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我有一个 HTML 文件，我已将其作为 Web 资源上传，并通过 IFRAME 中的活动表单设计器链接到该文件。到目前为止，一切都很好。

然后，当我在本地编辑源文件并上传（当然是浏览-保存-发布）时，我在屏幕上的外观没有任何区别。这是奇怪的部分。当我在编辑器中打开上传的文件时，我可以看到源代码的更改。在 RTF 选项卡上，我还可以看到背景颜色的变化。

但是，重新加载“创建新”表单不会给客户端带来这些更改！我试过重新启动窗口，重新启动 IE，清除缓存。没有什么帮助。

当我从不同的客户端进入同一个页面时，我看到了更新的版本。但是在那之后，后续的更改也没有更新。就像 IE 认为“哦，伙计，你想终生缓存它，我明白了”。好吧，我没有。我希望直接看到我的版本在运行，而不是为新客户创建新帐户。:)

过了一会儿，更新似乎通过了，我看到了一个新版本，但不是在所有浏览器中。

是什么原因造成的？！我该如何杀死它？

(Win8/IE10/CRM11OL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:17:21.863

我见过 CRM 做了一些奇怪的 IIS 缓存。我认为这是服务器端问题，但是您在线使用 crm，他们不会让您现在运行 IIS 重置，对吗？:) 您是否尝试过在私人浏览模式下在新客户端上运行它、部署更改并打开新的私人浏览器以测试它是客户端缓存问题还是服务器缓存问题？

# java - com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 个 IllegalAnnotationExceptions 计数有两个属性名为

> ID：13643518
> 
> 赞同：8
> 
> 时间：2012-11-30T10:37:04.100
> 
> 标签：java, jaxb

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "channelType",
    "channelSubType",
    "suffix",
    "userDetail",
    "cardDetail"
})
@XmlRootElement(name = "CardCreationRequest")
public class CardCreationRequest extends BaseRequest
    implements Serializable
{

    @XmlElement(required = true, type = Integer.class, nillable = true)
    protected Integer channelType;
    @XmlElement(required = true, type = Integer.class, nillable = true)
    protected Integer channelSubType;

    @XmlElement(required = true, nillable = true)
    protected String suffix;

    @XmlElement(name="UserDetail", required = true)
    protected UserDetail userDetail;
    @XmlElement(name="CardDetail",required = true)
    protected CardDetail cardDetail;

} 
```

* * *

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "UserDetail", propOrder = {
    "title",
    "lastName",
    "firstName",
    "nickName",
    "dob",
    "addr1",
    "addr2",
    "city",
    "state",
    "county",
    "zip",
    "country",
    "tel",
    "mobtel",
    "telExt",
    "ssn",
    "fein",
    "selfEmployed",
    "middleInitial",
    "mothersmaid",
    "salutation",
    "relation",
    "holderID",
    "others",
    "busNum",
    "busNumExt",
    "faxNum",
    "faxExt",
    "driverlicNum",
    "driverlicState",
    "dependents",
    "fedtaxID",
    "companyName",
    "emerAddr1",
    "emerAddr2",
    "emerCity",
    "emersState",
    "emerZip",
    "emerCounty",
    "emerCountry",
    "emerPhone",
    "emerExt",
    "vip",
    "recipID",
    "pagerNum",
    "maritalStatus",
    "gender",
    "email",
    "language",
    "accessCode",
    "nameOnCard",
    "loginID",
    "itemSrc",
    "birthCity",
    "birthState",
    "hsGradYr",
    "collegeGradYr",
    "maidenName"
    })

public class UserDetail
    implements Serializable
{

    public UserDetail() {
        super();
        // TODO Auto-generated constructor stub
    }

    @XmlElement(required = true, nillable = true)
    protected String title;
    @XmlElement(required = true, nillable = true)
    protected String lastName;
    @XmlElement(required = true, nillable = true)
    protected String firstName;
    @XmlElement(required = true, nillable = true)
    protected String nickName;
    @XmlElement(name = "DOB", required = true, type = String.class, nillable = true)
    @XmlJavaTypeAdapter(Adapter2 .class)
    @XmlSchemaType(name = "date")
    protected Date dob;
    @XmlElement(required = true, nillable = true)
    protected String addr1;
    @XmlElement(required = true, nillable = true)
    protected String addr2;
    @XmlElement(required = true, nillable = true)
    protected String city;
    @XmlElement(required = true, nillable = true)
    protected String state;
    @XmlElement(required = true, nillable = true)
    protected String county;
    @XmlElement(required = true, nillable = true)
    protected String zip;
    @XmlElement(required = true, nillable = true)
    protected String country;
    @XmlElement(required = true, nillable = true)
    protected String tel;
    @XmlElement(required = true, nillable = true)
    protected String mobtel;
    @XmlElement(required = true, nillable = true)
    protected String telExt;
    @XmlElement(name = "SSN", required = true, nillable = true)
    protected String ssn;
    @XmlElement(name = "FEIN", required = true, nillable = true)
    protected String fein;
    @XmlElement(required = true, nillable = true)
    protected String selfEmployed;
    @XmlElement(required = true, nillable = true)
    protected String middleInitial;
    @XmlElement(required = true, nillable = true)
    protected String mothersmaid;
    @XmlElement(required = true, nillable = true)
    protected String salutation;
    @XmlElement(required = true, nillable = true)
    protected String relation;
    @XmlElement(required = true, nillable = true)
    protected String holderID;
    @XmlElement(required = true, nillable = true)
    protected String others;
    @XmlElement(required = true, nillable = true)
    protected String busNum;
    @XmlElement(required = true, nillable = true)
    protected String busNumExt;
    @XmlElement(required = true, nillable = true)
    protected String faxNum;
    @XmlElement(required = true, nillable = true)
    protected String faxExt;
    @XmlElement(required = true, nillable = true)
    protected String driverlicNum;
    @XmlElement(required = true, nillable = true)
    protected String driverlicState;
    @XmlElement(required = true, nillable = true)
    protected String dependents;
    @XmlElement(required = true, nillable = true)
    protected String fedtaxID;
    @XmlElement(required = true, nillable = true)
    protected String companyName;
    @XmlElement(required = true, nillable = true)
    protected String emerAddr1;
    @XmlElement(required = true, nillable = true)
    protected String emerAddr2;
    @XmlElement(required = true, nillable = true)
    protected String emerCity;
    @XmlElement(required = true, nillable = true)
    protected String emersState;
    @XmlElement(required = true, nillable = true)
    protected String emerZip;
    @XmlElement(required = true, nillable = true)
    protected String emerCounty;
    @XmlElement(required = true, nillable = true)
    protected String emerCountry;
    @XmlElement(required = true, nillable = true)
    protected String emerPhone;
    @XmlElement(required = true, nillable = true)
    protected String emerExt;
    @XmlElement(name = "VIP", required = true, nillable = true)
    protected String vip;
    @XmlElement(required = true, nillable = true)
    protected String recipID;
    @XmlElement(required = true, nillable = true)
    protected String pagerNum;
    @XmlElement(required = true, nillable = true)
    protected String maritalStatus;
    @XmlElement(required = true, nillable = true)
    protected String gender;
    @XmlElement(required = true, nillable = true)
    protected String email;
    @XmlElement(required = true, nillable = true)
    protected String language;
    @XmlElement(required = true, nillable = true)
    protected String accessCode;
    @XmlElement(required = true, nillable = true)
    protected String nameOnCard;
    @XmlElement(required = true, nillable = true)
    protected String loginID;
    @XmlElement(required = true, nillable = true)
    protected String itemSrc;
    @XmlElement(required = true, nillable = true)
    protected String birthCity;
    @XmlElement(required = true, nillable = true)
    protected String birthState;
    @XmlElement(name = "HSGradYr", required = true, type = Integer.class, nillable = true)
    protected Integer hsGradYr;
    @XmlElement(name = "CollegeGradYr", required = true, type = Integer.class, nillable = true)
    protected Integer collegeGradYr;
    @XmlElement(required = true, nillable = true)
    protected String maidenName;
    @XmlElement(required = true, nillable = true)

} 
```

* * *

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CardsWS': Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException
    at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:357)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:246)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:525)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 26 more
Caused by: org.apache.cxf.service.factory.ServiceConstructionException
    at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:324)
    at org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass(ReflectionServiceFactoryBean.java:474)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.buildServiceFromClass(JaxWsServiceFactoryBean.java:690)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:536)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:248)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:205)
    at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:101)
    at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:159)
    at org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)
    at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:442)
    at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:329)
    ... 35 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
There are two properties named "title" 
    this problem is related to the following location:
        at public java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.getTitle()
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard
    this problem is related to the following location:
        at protected java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.title
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard
Class has two properties of the same name "title"
    this problem is related to the following location:
        at public java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.getTitle()
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard
    this problem is related to the following location:
        at protected java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.title
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:472)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1140)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:154)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:121)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:363)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at org.apache.cxf.common.jaxb.JAXBContextCache$2.run(JAXBContextCache.java:268)
    at org.apache.cxf.common.jaxb.JAXBContextCache$2.run(JAXBContextCache.java:267)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.cxf.common.jaxb.JAXBContextCache.createContext(JAXBContextCache.java:266)
    at org.apache.cxf.common.jaxb.JAXBContextCache.getCachedContextAndSchemas(JAXBContextCache.java:172)
    at org.apache.cxf.jaxb.JAXBDataBinding.createJAXBContextAndSchemas(JAXBDataBinding.java:454)
    at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:322)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T10:48:58.800

当您同时注释字段和属性时，通常会出现此错误。由于您已指定`XmlAccessType.FIELD`，您应该只注释字段（实例变量）。

你有

```
@XmlAccessorType(XmlAccessType.FIELD)
public class UserDetail {

    @XmlElement
    private String title;

    @XmlElement
    public String getTitle() {
        return title;
    }

} 
```

改成：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class UserDetail {

    @XmlElement
    private String title;

    public String getTitle() {
        return title;
    }

} 
```

这符合异常告诉您的内容。它指向`UserDetail.getTitle()`和`UserDetail.title`。

```
Class has two properties of the same name "title"
    this problem is related to the following location:
        at public java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.getTitle()
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard
    this problem is related to the following location:
        at protected java.lang.String wavecrest.orchestration.cardmanger.dto.UserDetail.title
        at wavecrest.orchestration.cardmanger.dto.UserDetail
        at protected wavecrest.orchestration.cardmanger.dto.UserDetail wavecrest.orchestration.cardmanger.dto.CardCreationRequest.userDetail
        at wavecrest.orchestration.cardmanger.dto.CardCreationRequest
        at private wavecrest.orchestration.cardmanger.dto.CardCreationRequest wavecrest.orchestration.endpoint.jaxws_asm.CreateCard.arg0
        at wavecrest.orchestration.endpoint.jaxws_asm.CreateCard 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-12T06:04:37.070

**通过调试 IllegalAnnotationsException 类的Builder**内部类的**check()** 方法，您可以找到哪些类和哪些方法有问题 - 以及详细的消息。

 **查看IllegalAnnotationsException**列表中的条目。**

我正在使用 jaxb-impl-2.2.11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T18:47:48.680

我遇到的另一个原因是一些被序列化的类没有无参数构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-29T23:01:34.220

只是为这个错误添加另一个可能的原因：

当我将运算符从我们的主代码迁移到其他团队可以使用的独立库时，我遇到了这个问题。我们的设计要求操作员可以从我们自己的项目的任一位置使用，所以我只是将一大堆代码复制/粘贴到另一个项目中并将其打包到一个 lib 中，然后将该 lib 添加到 lib 目录中。但是，当我使用这个配置运行它时，我得到了这个重复的注释错误。为了解决这个问题，我只需要修改@XmlType 名称参数。我所做的只是将“Op”添加到库中的所有注释名称中。无需进行其他更改。**

# performance - 避免绘制隐藏组件 (FLEX)

> ID：13643521
> 
> 赞同：0
> 
> 时间：2012-11-30T10:37:13.187
> 
> 标签：performance, apache-flex, render, mxml, hidden

我们有很大的组件要绘制。现在我们遇到了性能问题。我们使用 visible 和 includeinlayout 属性来隐藏一些组件，但它们仍然由 flex 渲染。

有没有可能避免这种情况？！

只有当我们从显示列表中删除组件时才有可能，或者我们可以以某种方式覆盖组件的绘制方法并检查它是否隐藏，并取决于它是否会被绘制。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:44:19.067

无论您还不想绘制什么组件，都可以将 creationPolicy="none" 放入任何基于 SkinnableContainer 的容器中（不要自动为我创建我的孩子）。然后稍后......如果并且当您希望 flex 创建这些组件时，您可以这样做：

```
// here frame is my container with creationPolicy="none" set on it
public function update():void{
if(frame && !frame.deferredContentCreated){
    frame.createDeferredContent();
}
} 
```

# python - 这个错误“断管”是什么意思？

> ID：13643526
> 
> 赞同：-2
> 
> 时间：2012-11-30T10:37:52.113
> 
> 标签：python, sockets, broken-pipe

> **可能重复：**
> [TCP 客户端-服务器 SIGPIPE](https://stackoverflow.com/questions/5196971/tcp-client-server-sigpipe)

我想知道这个错误是什么意思？

![在此处输入图像描述](../Images/b048b1447bd6b24c31e209a5534b4a4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:42:51.183

您正在使用套接字和 Http 协议。

它只是意味着您的 TCP 连接已被另一端关闭或由于其他原因而中断。中断意味着在开始数据传输之前需要再次进行 3 次握手。如评论中所述，在侦听端即服务器上，您通常无法启动连接。所以应该简单地关闭这个套接字并继续前进。

但是，如果您是客户端，您可能应该调用类似的 api 再次连接并在成功后继续。

[SO上的管道破裂](https://stackoverflow.com/questions/1181255/java-nio-what-does-ioexception-broken-pipe-mean)

# google-apps-script - 使用服务器端处理程序定向到另一个 URL

> ID：13643528
> 
> 赞同：1
> 
> 时间：2012-11-30T10:38:00.070
> 
> 标签：google-apps-script

我正在寻找一种使用我的 Google Apps 脚本 UiApp 中的按钮导航到 URL 的方法。我在按钮上添加了一个点击服务器处理程序，一旦触发事件，我想导航到不同的 URL。

有没有办法在服务器端处理程序中做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:49:57.790

Relax_Im_A_Quant 没有办法让服务器处理程序将用户发送到另一个 URL。他们必须点击一个链接。

但是，有一种方法可以获得类似的结果，并且可能适合您的需求。

您可以添加、删除和更改 UiApp 中元素的可见性。

例如，有一个开始可见的搜索框和一个开始不可见的结果面板。当调用服务器处理程序时，搜索框更改为不可见，结果面板更改为可见并将结果添加到结果面板中。您可以关闭整个面板的可见性并打开另一个面板的可见性。

在我的一个为用户创建文档的应用程序中，它会将文档的链接添加到 UiApp，然后在按下“创建文档”按钮时使其可见。它会在链接出现后提示用户单击链接——将他们带到文档（一个新的 URL）。

# wcf - 为什么 IIS/WAS 服务不使用 MSMQ 4.0 清理 Win 2k8R2 上的锁定队列

> ID：13643530
> 
> 赞同：1
> 
> 时间：2012-11-30T10:38:02.567
> 
> 标签：wcf, msmq, netmsmqbinding

我有一个 IIS/WAS 托管服务在开发环境中以我自己的身份运行。它是使用 net.msmq 绑定激活的。它被配置为使用 BufferedReceive（它是一个 WF 服务），这涉及锁定队列。（创建前缀为 lock_ 的子队列）。

一段时间后，应用程序池终止后，锁定队列会自动删除。

将系统移至生产环境后，环境 AFAIK 相同，但服务作为专用帐户运行，不再清理锁定队列。如果我停止应用程序池，锁定队列仍然存在，并带有消息。

最明显的区别是运行服务的帐户，但我找不到影响这一点的权限。或者，我是否忽略了其他一些配置差异。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:13:13.293

好的，这原来是 IIS/WAS 中的一个错误。

我有 3 个应用程序池，其中 2 个是自动启动的，其中一个正在消耗 msmq。所有共享同一个 AD 域标识，该标识与 NetMsmqListenerActivator 共享。那个 netmsmqlistener 服务本来是停止的，但是我启动之后就出现了症状。

IIS/WAS 不知何故创建了多个通道，将消息发送到错误的进程。我通过创建一个单独的身份来解决这个问题，现在由 mq 消费 Web 服务和 netmsmqlistener 使用，然后重新启动服务器。

这是一个痛苦的问题，只发生在生产服务器上。吸取的教训是确保生产服务器与测试服务器共享相同的修补程序和补丁。

更新：Win 2k8 R2 SP1 的修补程序：http: [//support.microsoft.com/kb/2672277](http://support.microsoft.com/kb/2672277)

# wsdl - 如何使用 BPEL 流程中的真实 Web 服务？

> ID：13643534
> 
> 赞同：3
> 
> 时间：2012-11-30T10:38:28.713
> 
> 标签：wsdl, bpel

我已经对 BPEL 进行了大约两周的研究，但仍然不太了解。

我已经在 ODE 中部署了 HelloWorld 示例，并且还设法部署[了另一个](http://www.codeproject.com/Articles/33746/An-Example-Of-BPEL-invoking-WebService?msg=4189793#xx4189793xx)示例。

我的意图是做类似于第二个示例的事情，但使用我自己的真实 WS 部署和工作。

我现在正处于一个没有错误的过程中，并且在 ODE 中正确部署了以下结构：

![在此处输入图像描述](../Images/76d3d49291530577ba494376c104d6dc.png)

我已经从导入我的 Multiply.wsdl 的服务定义开始了该项目。设计器已将导入标记自动组合到 PartnerLinkTypes 旁边的 MuktiplyProcessArtifacts.wsdl 中，因此我假设所有命名空间等都可以。

为了使所有这些工作，我误解了一些概念：

1.  在我原来的 Multiply.wsdl 我有

> 肥皂：地址位置=“http://localhost:8080/WS-multiply/multiply”

但是ODE告诉我我的soap:address必须有host.port/ode/processes..

这对我来说听起来不合理，因为我的 WS 可以在我的 ODE_HOME 之外的任何地方实现。

2.  我之前提到的第二个示例解释了设计器可能如何创建“Caller.wsdl”，它实际上具有我想要的功能，即实现“包装器”WSDL，为 BPEL 流程提供入口和出口点。问题是 Designer 不会生成该界面。我应该自己创建它吗？我必须创建它吗？

3.  如果真的需要第 3 个 wsdl，如果我想测试整个过程，我必须调用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:08:08.930

看起来您的合作伙伴 WSDL 与合作伙伴链接的 myrole 相关联。合作伙伴链接和合作伙伴链接类型是 BPEL 中的一个概念，用于定义双重接口，在某种意义上，如果合作伙伴 A 想作为买方与 BPEL 流程进行通信，则需要提供该流程可以使用的特定功能集进一步的通信（即向买方发送装运确认）。因此，partnerlink 维护两个角色，myRole 是进程本身提供的 portType（也称为接口），partnerRole 指的是进程期望由伙伴实现的 portType。MyRoles 当然必须由 BPEL 流程实现，因此需要有一个由 BPEL 引擎公开的端点。PartnerRoles 可以绑定到任意端点。这发生在部署描述符中，

我想您可以通过将合作伙伴 WSDL 分配给合作伙伴角色来修复您的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:21:18.893

我希望[http://thiliniishaka.blogspot.com/2012/10/develop-ws-bpel-process-using-wso2.html](http://thiliniishaka.blogspot.com/2012/10/develop-ws-bpel-process-using-wso2.html) 和[http://thiliniishaka.blogspot.com/2012/10/part-2-developing- ws-bpel-process-using.html](http://thiliniishaka.blogspot.com/2012/10/part-2-developing-ws-bpel-process-using.html)可以帮助您解决上述查询。

谢谢

蒂利尼

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T13:34:11.383

必须将 Ode.war 部署在 tomcat 服务器上，tomcat 创建一个如图所示的路径，您需要使用完整路径 /ode/processes 配置您的端点

> c:\apache-tomcat-7.0.55\webapps\ode\WEB-INF\processes\BPEL_WS\

# blackberry-10 - Blackberry 10 Native - 如何检测网络事件

> ID：13643538
> 
> 赞同：0
> 
> 时间：2012-11-30T10:38:41.300
> 
> 标签：blackberry-10

如何使用 C++ 代码监控 Blackberry 10 平台上的网络连接状态？

谢谢

# objective-c - PDFDocument 不使用自定义 URL 协议

> ID：13643542
> 
> 赞同：6
> 
> 时间：2012-11-30T10:38:55.847
> 
> 标签：objective-c, cocoa, quartz-2d

如果已使用 URL 初始化 PDFDocument 并将其分配给 PDFView：

```
view.document = [[[PDFDocument alloc] initWithURL: url] autorelease]; 
```

URL 是文件 URL。我想用自定义 NSURLProtocol 覆盖 URL 加载以支持自定义解密系统。我想使用文件 URL（而不是重定向加载 NSData），因为 PDF 可以包含指向其他 PDF 的链接，并且没有 URL 的加载将不支持这一点。

我在应用程序委托中注册了一个自定义 URL 协议：

```
 [NSURLProtocol registerClass: [MYURLProtocol class]]; 
```

但`+canInitWithRequest:`从未调用过。我尝试过使用其他（自定义）模式，但它们给出了相同的结果。

从文件 URL 加载 WebView 时，会调用相同的 +canInitWithRequest: 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T22:45:03.013

NSURLProtocol[类文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/Reference/Reference.html)让我觉得 NSURLProtocol 子类仅在通过 NSURLConnection（或 NSURLDownload）加载 NSURL 时使用：

> 应用程序永远不需要直接实例化 NSURLProtocol 子类。NSURLRequest 的相应 NSURLProtocol 子类的实例由 NSURLConnection 在开始下载时创建。

因此，这可能是您遇到问题的根本原因。有趣的是，通过 NSURLConnection 和关联的 NSURLRequest 获取文件，看看您的 NSURLProtocol 子类是否按预期调用；我怀疑会的。

# eclipse - 手动下载 Oracle 驱动程序，但仍然得到 Missing artifact com.oracle:ojdbc6:jar:11.2.0.3:compile

> ID：13643545
> 
> 赞同：2
> 
> 时间：2012-11-30T10:39:06.980
> 
> 标签：eclipse, maven, driver, m2eclipse

我已按照本文中提到的[在 Maven 存储库中查找 Oracle JDBC 驱动程序](https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository)。

我已经手动下载了 Oracle 驱动程序`maven\repo\com\oracle\ojdbc6\11.2.0.3`并在 pom.xml 中添加了以下内容

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc6</artifactId>
    <version>11.2.0.3</version>
</dependency> 
```

但是我仍然收到以下错误

```
Missing artifact com.oracle:ojdbc6:jar:11.2.0.3:compile 
```

我做错了什么，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:57:01.520

可以通过以下步骤解决问题

*   `ojdbc6.jar`从复制的文件夹中运行以下命令

    `mvn install:install-file -DgroupId=com. oracle -DartifactId=ojdbc6 -Dversion=11.2.0.3 -Dpackaging=jar -Dfile=ojdbc6.jar -DgeneratePom=true`

*   从工作区运行以下

    `mvn -U clean`

# c# - 可绑定只读列表

> ID：13643550
> 
> 赞同：1
> 
> 时间：2012-11-30T10:39:18.137
> 
> 标签：c#, winforms

我有一个包含 TicketLine 对象集合的 Ticket 类。我想将此集合绑定到 DataGridView 但除了 Ticket 类之外不让任何东西添加和删除项目。

到目前为止，我已经在 TicketLine 中使用了 BindingList 和 implementationet INotifyPropertyChanged，但这会在列表本身上公开 Add 和 Remove 方法。

如何在不公开 Ticket 类中的其他添加/删除方法的情况下将此集合添加到 DataGridView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:59:42.553

我能想到的是通过将所有调用委托给包装的读/写 BindingList 来使用装饰器模式来实现[IBindingList接口。](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx)唯一的例外是：

*   AllowEdit/Add/Remove 返回 false 的成员。
*   添加/删除抛出 InvalidOperationException（或 NotSupportedException）的方法 这就是确保只读方面的方式。

创建此只读包装器后，将其传递给 DataGridView。前提是它尊重合同（我认为它确实如此:)）它应该不允许修改基础列表。

一旦我遇到同样的问题并且解决方案太麻烦而无法实施。主要是因为泛型的丢失和所需的工作量。不过，我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:02:48.117

您可以隐藏列表并仅公开 IEnumerable 属性：

```
public class Ticket : INotifyPropertyChanged
{
    private List<TicketLine> ticketLines;

    public IEnumerable<TicketLine> TicketLines
    {
        get { return ticketLines.AsReadOnly(); }
    }

    public void Add(TicketLine ticketLine)
    {
        ticketLines.Add(ticketLine);
        OnPropertyChanged("TicketLines");
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

# excel - 在vba excel中搜索数字

> ID：13643553
> 
> 赞同：0
> 
> 时间：2012-11-30T10:39:26.780
> 
> 标签：excel, vba

我希望一起搜索几个号码（国家彩票）；我每次必须查看 5 个 cloumns 并且有 90 个数字。可能性是 1.2 1.3 1.4 ... 89.90，我有 4005 种组合。该算法运行良好，但搜索时间绝对无法管理。有没有可能加快研究速度？

对于 amb = 2 至 4006

```
 primo = Foglio3.Cells(amb, 1)
    secondo = Foglio3.Cells(amb, 2)

    ritardo = 0

    For cont = 8618 To 2 Step -1

        est1 = Foglio2.Cells(cont, 2)
        est2 = Foglio2.Cells(cont, 3)
        est3 = Foglio2.Cells(cont, 4)
        est4 = Foglio2.Cells(cont, 5)
        est5 = Foglio2.Cells(cont, 6)

        If (primo = est1) Or (primo = est2) Or (primo = est3) Or (primo = est4) Or (primo = est5) Then
            If (secondo = est1) Or (secondo = est2) Or (secondo = est3) Or (secondo = est4) Or (secondo = est5) Then
                Foglio3.Cells(amb, 3) = ritardo     '3 = nazionale
                Exit For
            End If

        End If

        ritardo = ritardo + 1

    Next cont

Next amb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:26:28.630

第一步是停止在每个循环中使用工作表和 VBA。所以将数据存储在一个数组中，然后遍历内存数组。如果需要，更改变体以适应工作表上的数据类型。注意：Foglio2 和 Foglio3 的范围参考需要更改以适合您的数据集。

```
Dim foglio2() As Variant, foglio3() As Variant
Dim i As Double

Dim primo As Variant, secondo As Variant
Dim est1 As Variant, est As Variant, est3 As Variant, est4 As Variant, est5 As Variant

Dim resultArray() As Variant

foglio3 = Foglio3.Range("A2").CurrentRegion
foglio2 = Foglio2.Range("A2").CurrentRegion

For i = 2 To UBound(foglio2) ' maybe change to 4006?

    primo = foglio2(1, 1)
    secondo = foglio2(1, 2)

    ' change J to 8616?
    For j = UBound(foglio3) To 2 Step -1

        est1 = foglio3(j, 2)
        est2 = foglio3(j, 3)
        est3 = foglio3(j, 4)
        est4 = foglio3(j, 5)
        est5 = foglio3(j, 6)

        ReDim Preserve resultArray(i)
        If (primo = est1) Or (primo = est2) Or (primo = est3) Or (primo = est4) Or (primo = est5) Then
            If (secondo = est1) Or (secondo = est2) Or (secondo = est3) Or (secondo = est4) Or (secondo = est5) Then

                resultArray(i) = ritardo     '3 = nazionale
                Exit For
            End If

        Else
            resultArray(i) = vbNullString
        End If

        ritardo = ritardo + 1

    Next j

Next i

Foglio3.Cells(2, 3).Resize(UBound(resultArray), 1) = resultArray 
```

# xml - 在xml中使用和使用有什么区别吗？

> ID：13643556
> 
> 赞同：0
> 
> 时间：2012-11-30T10:39:31.717
> 
> 标签：xml, dtd

我正在使用一个接受 xml 输入的网络服务，但是当我使用`&#010;`新行时，它拒绝输入说 dtd 验证错误。但是当我使用`&#10;`它时，它正在接受。但是从 web-service 的文档中我看到他们建议我们使用`&#010;`.

哪种格式正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:49:45.180

不，它们是一样的。之后的数字`&#`是代码点，可以以十进制形式（如您的情况）指定，带或不带前导零，或以十六进制形式指定`&#xNNNN`。

阅读有关[字符和实体引用](http://www.w3.org/TR/REC-xml/#sec-references)的更多信息。

# python - glob.glob(...) 应该优先于 os.listdir(...) 还是相反？

> ID：13643558
> 
> 赞同：13
> 
> 时间：2012-11-30T10:39:40.443
> 
> 标签：python, list, glob

如果我想创建所有 .xls 文件的列表，我通常使用

```
rdir=r"d:\temp"
flist=[os.path.join(rdir,fil) for fil in os.listdir(rdir) if fil.endswith(".xls")]
print flist 
```

但是，我最近看到了一个替代方案，即

```
rdir=r"d:\temp"
import glob
flist=glob.glob(os.path.join(rdir,"*.xls"))
print flist 
```

这两种方法中的哪一种更受欢迎，为什么？或者他们被认为同样（不）健全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T10:42:16.033

两者都很好。还要考虑`os.path.walk`你是否真的想对那个列表做点什么（而不是为了它自己而构建这个列表）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T10:42:33.420

我个人会选择`glob.glob`，因为它更清楚。然而，由于它是一个包装器`listdir`，它们都完成了工作。

# c# - MVC4，C#，在一个视图中从两个表中检索数据

> ID：13643559
> 
> 赞同：0
> 
> 时间：2012-11-30T10:39:40.320
> 
> 标签：c#, asp.net-mvc-4

我是 MVC 新手，我使用 MVC4，我是 C# 新手。我想从两个表中检索数据：一个视图中的 tblProduct 和 tblCategory。在该视图中，我想从 tblCategory 中获取“名称”列，并从 tblProduct 中获取所有列。

我首先在类 tables.cs 中的代码中定义了我的表：

```
public class tblCategory 
{
        //Primary Key
        [Key]
        [ScaffoldColumn(false)]
        public int CategoryId { get; set; }

        [MaxLength(160)]
        public string Name { get; set; }
        etc...
}

public class tblProduct {
        //Primary Key
        [Key]
        [ScaffoldColumn(false)]
        public int ProductId { get; set; }

        //Foreign Key
        public int CategoryId { get; set; }
        [ForeignKey("CategoryId")]
        public virtual tblCategory tblCategorys { get; set; }

        [MaxLength(500)]
        public string MainImageFileName { get; set; }
        [MaxLength(160)]
        public string Name { get; set; }

        ect...
} 
```

我的模型类 bar.cs：

```
Namespace xx.Models
    public class bar {
        public tblProduct product { get; set; }
        public tblCategory category { get; set; }
    } 
```

如何在 Controller 中定义 Index 类？这样我就可以将数据从模型栏发送到视图中。

```
public ActionResult Index(){
  //How to define this?
} 
```

以及应该如何建立视图？@model xx.Models.bar

但我想在我的视图中对 tblProduct 中的所有列使用 Foreach 循环。还有来自 tblCategory 的一列。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:51:41.620

您的 Index 操作应该构建您的 bar 类的实例

```
public ActionResult Index(){
    var b = new bar();
    b.product = some loading code;
    b.category= some loading code;
    return View(b);
} 
```

您的 Index.cshtml 需要期待相同模型的实例

```
@model ProjectName.xx.Models.bar

<div class="editor-label">
    @Html.LabelFor(model => model.category.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.category.Name)
    @Html.ValidationMessageFor(model => model.category.Name)
</div>

@* just duplicate this once for each property you want from product *@
<div class="editor-label">
    @Html.LabelFor(model => model.product.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.product.Name)
    @Html.ValidationMessageFor(model => model.product.Name)
</div> 
```

我不会在产品的属性上使用 for 循环，因为那样你就需要反射，而且我怀疑该页面的运行速度会非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:17:34.580

我认为这两个类都应该是模型，因为它们显然是数据库中表的表示。然而，类酒吧我认为它不是。我认为你的结构应该这样组织：产品（模型类），类别（模型类）=栏（模型集合类）。因此，与其将两个类都添加为类 Bar 的属性，不如定义包含这些类的字典，但将这些类与公共接口（即 IViewModel）联系起来。

```
public interface IViewModel{
  string name {get;set;}
}
public class TblProduct: IVievModel{
 /// your code
}
public class TblCategory: IVievModel{
 /// your code
}
public class Bar{
 private Dictionary<string, IViewModel> viewModels = new Dictionary<string,IViewModel>();
} 
```

现在在您的 ActionResult 方法中，您只需将这两个类添加到字典中并将此类 Bar 返回到您的视图。

# php - 每次使用 jquery 检查 php 脚本的结果

> ID：13643560
> 
> 赞同：0
> 
> 时间：2012-11-30T10:39:41.533
> 
> 标签：php, ajax, jquery, real-time

我有这个 php 脚本：

```
<?php
    echo "Welcome!<br>";
    sleep(3);
    echo "Something else<br>";
    sleep(3);
    echo "Something else 2<br>";
?> 
```

如何使用 jQuery 实时或几乎实时地显示结果，而无需等待整个脚本完成，例如每秒钟检查一次新结果，直到脚本停止加载？

如果我有一个像这样的 php 循环怎么办：

```
<?php
    while($x<10) {
        echo "Hi<br>";
        $x++;
    }
?> 
```

我可以在这种情况下做同样的事情吗？

这是我实际的 jQuery，但它等到 php 脚本完成：

```
<script>
    $(document).ready(function() {
        $('#submit').click(function() {
            event.preventDefault(); 
            $.ajax({
                type: 'POST',
                url: 'index.php',           
                data: { url : $('#url').val() },
                success: function(data) {
                    $("#div").append(data);
                }          
            });     
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:47:06.577

如果我理解正确，您应该在 php 文档中查看此评论：http: [//php.net/manual/de/function.flush.php#76039](http://php.net/manual/de/function.flush.php#76039)

这将在完成脚本之前将内容发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:45:56.000

您可以制作 3 个不同的 PHP 脚本并为每个脚本编写一个 AJAX 调用

# struts2 - 评估 Struts2 标签中的变量时的警告

> ID：13643563
> 
> 赞同：0
> 
> 时间：2012-11-30T10:39:47.043
> 
> 标签：struts2, tags, javabeans, evaluation, ognl

当我必须在 struts 标记中显示 bean 属性时，我遇到了问题。我将 log4j 设置为调试模式，当我使用 OGNL 表达式评估 bean 时，我在屏幕上得到了正确的值，但我也在控制台中得到了很多警告。这是代码：

```
<s:textfield id="citta" name="citta" value="%{add.citta}" /> 
```

或另一个例子：

```
<s:if test="%{add.citta != null}" > ... </s:if> 
```

显示了值 add.citta，但在控制台中我得到：

```
DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering getProperty (ognl.OgnlContext@b07b029a,org.apache.struts2.util.AttributeMap@ac995a,templateDir)
 - [2012-11-30 10:52:43,150]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=templateDir]
 - [2012-11-30 10:52:43,153]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=templateDir]
 - [2012-11-30 10:52:43,155]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=org.apache.struts2.util.AttributeMap@ac995a, property=templateDir]
 - [2012-11-30 10:52:43,157]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Property: null
 - [2012-11-30 10:52:43,159]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Class: com.opensymphony.xwork2.util.CompoundRoot
 - [2012-11-30 10:52:43,160]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - field-level type converter for property [null] = none found
 - [2012-11-30 10:52:43,162]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - global-level type converter for property [null] = none found
 - [2012-11-30 10:52:43,163]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@b5c55e]
 - [2012-11-30 10:52:43,165]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering getProperty (ognl.OgnlContext@b07b029a,org.apache.struts2.util.AttributeMap@ac995a,theme)
 - [2012-11-30 10:52:43,167]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=theme]
 - [2012-11-30 10:52:43,169]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=theme]
 - [2012-11-30 10:52:43,171]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=org.apache.struts2.util.AttributeMap@ac995a, property=theme]
 - [2012-11-30 10:52:43,173]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Property: null
 - [2012-11-30 10:52:43,175]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Class: com.opensymphony.xwork2.util.CompoundRoot
 - [2012-11-30 10:52:43,176]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - field-level type converter for property [null] = none found
 - [2012-11-30 10:52:43,176]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - global-level type converter for property [null] = none found
 - [2012-11-30 10:52:43,177]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@b5c55e]
 - [2012-11-30 10:52:43,178]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=registrazione]
 - [2012-11-30 10:52:43,180]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering getProperty (ognl.OgnlContext@b07b029a,org.apache.struts2.util.AttributeMap@ac995a,citta)
 - [2012-11-30 10:52:43,184]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering getProperty (ognl.OgnlContext@b07b029a,org.apache.struts2.util.AttributeMap@ac995a,templateDir)
 - [2012-11-30 10:52:43,185]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=templateDir]
 - [2012-11-30 10:52:43,186]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=[it.consoft.controller.GestioneAddress@4d92da, com.opensymphony.xwork2.DefaultTextProvider@b39ad9], property=templateDir]
 - [2012-11-30 10:52:43,187]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Entering nullPropertyValue [target=org.apache.struts2.util.AttributeMap@ac995a, property=templateDir]
 - [2012-11-30 10:52:43,188]DEBUG [http-bio-8080-exec-2] (CommonsLogger.java:68) - Property: null 
```

我想修复它，我也尝试过声明一个变量，`<s:set> or <s:bean>`但警告没有消失。

这是我的课：

```
public class GestioneAddress extends ActionSupport {

    private Address add;

public Address getAdd() {
        return add;
    }

    public void setAdd(Address add) {
        this.add = add;
        }
} 
```

这是我的豆子：

```
public class Address implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "AddressID")

    private Integer addressID;

    @Basic(optional = false)
    @Size(min = 1, max = 45)
    @Column(name = "Citta")

    private String citta;

    public Integer getAddressID() {
        return addressID;
    }

    public void setAddressID(Integer addressID) {
        this.addressID = addressID;
    }

    public String getCitta() {
        return citta;
    }

    public void setCitta(String citta) {
        this.citta = citta;
    }

} 
```

# sql - 多值参数截断

> ID：13643570
> 
> 赞同：3
> 
> 时间：2012-11-30T10:40:19.917
> 
> 标签：sql, reporting-services, sqldatatypes, reportparameter

在我的 SSRS 报告中，我有一个包含 250 多个唯一标识符数据类型值的多值参数。这适用于参数下拉列表中的少量值选择，但是当用户选择（全选）时，他们会收到此错误：

```
An error occurred during local report processing.
String or binary data would be truncated. 
```

每个 uniqueidentifier 字段的长度为 36 个字符，这意味着将其中的 250 个字符加在一起会产生 9000 个字符的字符串。这就是导致截断发生的原因。

我应该采取什么方法来处理这种情况？

**编辑：**

存储过程的几个快照：

```
ALTER PROCEDURE [dbo].[spReport]
     @StartDate as datetime
    ,@EndDate as datetime
    ,@LocationId uniqueidentifier
    ,@UserIds uniqueidentifier 
```

@UserIds 是多值参数。它用于查询的 where 子句：

```
WHERE (U.UserId IN (@UserIds) OR @UserIds IS NULL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:28:28.570

SSRS 确实对多值参数的大小有限制。我不记得我脑子里想的是什么，但我认为你已经超越了它。（SSRS 将多值参数转换为逗号分隔的字符串，并将查询中出现的变量名称替换为字符串。）

所以正如评论中提到的，你有两个问题：

1.  SP 不能直接从 SSRS 获取多值参数。你需要做一些操作。
2.  您的整体参数长度。这可能需要一点创造力来解决。一些选项：

    *   您能否在现有参数中提供单独的参数或特殊值，`<All Users>`然后在 SP 中检查，在这种情况下返回所有值。如果查询直接在 SSRS（而不是 SP）中，这样的事情会起作用：

        ```
        ...WHERE ( U.UserId in ( @UserIds) OR '<All Users>' in ( @UserIds ) )
        ... 
        ```

    *   您可以根据之前的参数过滤参数中的项目数吗？例如让用户选择日期范围和/或部门，并且只返回与该范围匹配的 UID？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:41:30.643

您不能将 SSRS 多值参数与这样的存储过程一起使用。您需要加入报告中的值，将它们作为 varchar(max) 传递，然后将它们拆分到存储过程中：
[https](https://stackoverflow.com/a/9862901/124386)
[://stackoverflow.com/a/9862901/124386 http://www.codeulike .com/2012/03/ssrs-multi-value-parameters-with-less.html](http://www.codeulike.com/2012/03/ssrs-multi-value-parameters-with-less.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T21:43:19.330

另一种方法是创建用户定义的表类型并使用它而不是 varchar 来传递选定的值。

# app-store - iTunes 11 - 任何在顶部看到旧版应用程序的旧评论的人

> ID：13643574
> 
> 赞同：1
> 
> 时间：2012-11-30T10:40:45.400
> 
> 标签：app-store, itunes

iTunes 11 昨天发布。

**还有其他人注意到商店中他们的应用程序上出现的旧评论吗？**

Apple 已将排序顺序从“最积极”更改为“最有帮助”。

但也显示过时一年的评论和非常旧的版本！

可悲的是，最有帮助的需要用户点击这有帮助吗？有点像 FB 上的 LIKE 按钮。

但是人们只有在有人抱怨实际上是由错误引起的错误时才为我的应用程序这样做...由 Apple 引起！

![应用程序现在显示旧版本应用程序的 12 个月前的评论](../Images/dccc1491999ee7fb28df352cdad82201.png)

# gnuplot - gnuplot：字体较小的字幕

> ID：13643583
> 
> 赞同：15
> 
> 时间：2012-11-30T10:41:14.300
> 
> 标签：gnuplot

有人知道如何在 gnuplot 中插入字体较小的字幕吗？

目前，我创建字幕的方式是`\n`在标题中使用。此外，我希望字幕的字体大小更小。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T13:07:44.343

这至少适用于 postscript 终端（由于某种原因`x11`不想缩放我的字体。也许这是一个错误......）：

```
set term <whatever> enhanced
set output "<whatever.ext>"
set title "Big Title\n{/*0.5 subtitle}" 
```

将`{/*0.5}`字体大小缩放为当前活动字体大小的一半。您还可以明确指定字体大小：

```
set title "{/=20 Big} Medium {/=5 Small}" 
```

* * *

或者您可以更改文本区域的字体：

```
set title "{/Helvetica foo} {/Symbol G}" 
```

这些表单也可以组合起来更改特定文本区域的字体和大小：

```
set title "This is a big gamma {/Symbol=20 G}" 
```

有关增强文本的更多信息，请参阅`help enhanced`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:54:03.077

You can use `label`. You have to experiment a bit with its proper placement by `at`:

```
set title "Big Title"
set label "Subtitle" at screen 0.5, 0.9 font "Arial,8"
plot sin(x) 
```

# jquery-svg - JQuery SVG插件：获取页面位置的空间坐标

> ID：13643591
> 
> 赞同：1
> 
> 时间：2012-11-30T10:41:44.480
> 
> 标签：jquery-svg

我在 HTML 中创建了一个 SVG 画布内联，动态使用 keith-wood jquery 插件。

我使用了 SVG 元素中的 viewBox 属性来缩放 SVG 画布的内容。

在 SVG 画布内，我绘制了一个矩形，带有重复的图案（瓷砖），每个 1x1 单位。

800x800 板：

```
 var svg = $(containerDiv).svg('get');
    svg.configure({viewBox: minX + "" + minY + "" + width + "" + height});
    var pat1 = svg.pattern('pat1', 0, 0, 1, 1, {patternUnits: 'userSpaceOnUse'});
    var rectTile = svg.rect(pat1, 0, 0, 1, 1);
    var rectBoard = svg.rect(0, 0, 800, 800, {fill: 'url(#pat1)'}); 
```

当用户将鼠标悬停在 SVG 内的一个元素上时，我想将鼠标事件的 pageX 和 pageY 像素坐标转换为图块的坐标，给定 viewBox 缩放。因此，如果用户将鼠标悬停在第一个图块上，我希望返回 {x: 0, y: 0}，给定 e.pageX 和 e.pageY 其中 e 是 mousemove jquery 事件对象。

我该如何计算？

谢谢

# asp.net - WebConfigurationManager 读/写位置 path=xx

> ID：13643596
> 
> 赞同：1
> 
> 时间：2012-11-30T10:41:54.033
> 
> 标签：asp.net, configurationmanager, webconfigurationmanager

我的 web.config 包含类似的部分

位置--system.web--授权--允许

```
<location path="ClientDisabled.aspx">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

（我不知道如何在这里写完整的标签，包括 XML 标签，好像论坛不允许这样做）

我和其他几个人在主节点下。我需要通过配置管理器阅读它们。我正在尝试，但我无法使用类似的代码阅读它们

WebConfigurationManager.GetSection ("位置", "~/")

或其他许多可能性。即使我可以通过配置管理器阅读这些条目，我也不确定。

有没有人知道我如何阅读它们并在需要时回信？我想如果我能读懂它们，我可能需要删除一两个这样的条目，然后保存回 web.config 文件。

谢谢您的帮助。萨默斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:53:13.800

啊！我找到了。它的 Locations 属性是 Configuration。所以你可以像使用它一样

```
Dim config As System.Configuration.Configuration = WebConfigurationManager.OpenWebConfiguration("~")
    For temp As Integer = config.Locations.Count - 1 To 0 Step -1
        Dim loc As ConfigurationLocation = config.Locations(temp)
        If loc.Path.ToLower.Contains("MyAccount".ToLower) Then
            location found here
        Else
            location not found
        End If
    Next 
```

但是，在进行一些更改等之后，我看不到是否可以将其保存回 web.config。有人知道如何将其保存回来吗？谢谢， 萨默斯

# php - MySql 语法错误 - 42000

> ID：13643598
> 
> 赞同：1
> 
> 时间：2012-11-30T10:41:55.127
> 
> 标签：php, mysql

我收到此错误：

```
Warning: PDO::query() [pdo.query]: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'When, RDV, Comments FROM distributions WHERE IDFond = 1' at line 1 in /Applications/XAMPP/xamppfiles/htdocs/JG/DistributionManager.class.php on line 56 
```

执行此代码时：

```
$Distribution_Manager->getListByFunds($Selected_Fond->id());

    foreach ($Distribution_Manager as $Distrib)
    {
        echo $Distrib->Comments();
    } 
```

这是相关的功能：

```
 public function getListByFunds($FundID)
  {
    $Distribution = array();

    $q = $this->_db->query('SELECT id, IDClient, IDFond, Who, When, RDV, Comments FROM distributions WHERE IDFond = '.$FundID);

    while ($donnees = $q->fetch(PDO::FETCH_ASSOC))
    {
      $Distribution[] = new Distribution($donnees);
    }
    return $Distribution;
  } 
```

应该是一个小错误，但我落后了将近 50 分钟！在此先感谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:44:19.793

`WHEN`是[mysql 保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此请尝试使用不同的列名或`WHEN`用反引号括起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:45:20.680

`When`是mysql关键字，试试这个

```
SELECT id, IDClient, IDFond, Who, When AS anything.. 
```

或将此关键字括在反引号中

```
SELECT id, IDClient, IDFond, Who, `When`, RDV.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:46:49.430

回馈列名的引号，`id`然后尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T16:30:01.687

你永远不会在你的陈述中结束你的报价。

# ruby-on-rails - 如果有域，则无法创建 cookie

> ID：13643601
> 
> 赞同：1
> 
> 时间：2012-11-30T10:42:19.277
> 
> 标签：ruby-on-rails, cookies

我的控制器有以下代码

```
cookies[:book] = { :value => "Kids Puzzles", :expires => 2.years.from_now, :domain => "foo.com" } 
```

如果 cookie 的域与运行应用程序的服务器不同，则无法创建 cookie。在这种情况下，我应该如何创建/删除 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:49:56.037

你不能那样做。

您可以在 app.example.com 上运行的应用程序中为 example.com 设置 cookie，但不能为 foo.com 设置 cookie。

# objective-c - NSStatusItem 阻止 NSWindows 中的用户界面更新

> ID：13643603
> 
> 赞同：1
> 
> 时间：2012-11-30T10:42:25.567
> 
> 标签：objective-c, cocoa, user-interface, nsstatusbar

我正在开发一个应用程序，这个应用程序中有几个 NSWindows 和一个 StatusItem 以便在它们未打开时访问任何 NSWindows。其中一些窗口不断用新的数字和状态更新它们的界面。问题是每当我单击系统状态栏中的 StatusItem 时，它都会阻止 Windows 上的更新，并且在关闭 StatusMenu 之前我看不到任何更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:39:56.950

这是关于[运行循环模式](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW12)。

在主线程上运行的延迟操作通常安排`NSDefaultRunLoopMode`在主运行循环中，这意味着在打开菜单或模式对话框时不会运行。您需要改为使用`NSRunLoopCommonModes`，这将允许它们在默认和事件跟踪（菜单、对话框）模式下运行。

例如：

*   如果您`NSTimer`用于触发更新事件，而不是`scheduledTimerWithTimeInterval`，请与 .`timerWithTimeInterval`结合使用`[[NSRunLoop currentRunLoop] addTimer:theTimer forMode:NSRunLoopCommonModes]`。

*   如果您使用`performSelectorOnMainThread:withObject:waitUntilDone:`, 而不是使用`performSelectorOnMainThread:withObject:waitUntilDone:modes:`, 传递参数`[NSArray arrayWithObject:NSRunLoopCommonModes]`。`modes:`

# php - 更改 PHP 会话变量

> ID：13643608
> 
> 赞同：1
> 
> 时间：2012-11-30T10:42:32.507
> 
> 标签：php

我遇到了一个奇怪的 PHP 会话问题。有人可以告诉我会话是否是这样的吗？

要查看问题，请将以下代码加载到任何 php 文件中，例如 test.php，然后运行 ​​2 次。注意，您必须运行它两次，即加载页面并重新加载它。

```
<?
session_start();
$_SESSION["test"] = "Original////";
$test=$_SESSION["test"];
echo $_SESSION["test"];
$test="New////";
echo $_SESSION["test"];
?> 
```

在我的服务器上，我第一次加载这个测试页面时，我得到

原创////原创////

这是正确的。但是当我重新加载它时，我得到

原创////新////

这意味着第 5 行 "$test="New////";" 实际上重写了我的 $_SESSION["test"]。这对我来说没有意义。有谁知道发生了什么？或者它只是发生在我的服务器上？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:48:28.977

似乎您的服务器上启用了[register_globals 。](http://php.net/manual/en/security.globals.php)您需要禁用该指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:52:00.717

首先，不要`<?`用作 PHP 的起始标记，请使用`<?php`. `register_globals`其次，如果您已启用，这是预期的行为。看看这个链接：

[http://www.theblog.ca/session-register-globals](http://www.theblog.ca/session-register-globals)

它的标题说：

> 当 register_globals 开启时，会话变量会覆盖全局变量

示例代码与您的类似：

```
<?php
session_start();
$canadaday = 'July 1st';
$_SESSION['canadaday'] = 'July 2nd';

print '<p>When is Canada Day?</p>';
print '<p><strong>' . $canadaday . '</strong></p>';
?> 
```

，`register_globals`结果是`July 2nd`。HTH。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-30T10:53:03.950

```
<?php
session_start();
$_SESSION["test"] = "Original////";
$test=$_SESSION["test"];
echo $_SESSION["test"];
$test="New////";
echo $_SESSION["test"];
?> 
```

我已经在我的环境中尝试过你的代码，它运行得很好。它总是打印 Original////Original//// 所以它只发生在你的服务器上

# javascript - 正则表达式在任何空白字符处拆分字符串，但隔离任何换行符

> ID：13643611
> 
> 赞同：1
> 
> 时间：2012-11-30T10:42:39.053
> 
> 标签：javascript, regex

对我来说，这总是一个脑筋急转弯，但我自己根本找不到...

我想用任何空白字符分割一个字符串，但以隔离任何`\n`出现。

例如：

**输入：**

```
"Regex expressions make your life...↵easier!" 
```

**输出：**

```
"Regex"
"expressions"
"make"
"your"
"life..."
"↵"
"easier!" 
```

到目前为止，我已经尝试过类似的东西，`/s|[^\n]` 但结果并不是很确定。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:48:41.240

试试这个：`/(\S+|\n)/g`

```
var s = 'Regex expressions make your life...\neasier!';
s.match(/(\S+|\n)/g) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:21:02.767

这有效：

`[^\S\n]+`

*Not (NOT-Whitespace or Newline)*等于*Whitespace AND not newline* (DeMorgan)

如果我得到你的“隔离”正确，试试这个：`([^\S\n]|\n)`

输入：

```
this is a test
regex 
```

preg_split：

```
Array
(
[0] => this
[1] => is
[2] => a
[3] => test
[4] => 
[5] => regex
) 
```

嗯，但这将与`\s`(`not \n or \n`已过时，离开`^\S`- 这是`\s`- 所以你所说的“隔离”是什么意思？

# python - Python 3.1 数字猜谜游戏更高或更低的循环

> ID：13643615
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:42:54.517
> 
> 标签：python, python-3.x

在使用“绝对初学者第三版的 Python 编程”一书学习 Python 的过程中，并努力应对已经设定的挑战。

我必须创建一个数字猜测程序，玩家选择一个数字，程序尝试通过选择一个随机数来猜测它，然后使用更高或更低的问题来接近数字。我已经弄清楚了大部分，但我正在为更高或更低的循环而苦苦挣扎。我遇到的麻烦是我无法让程序不高于或低于倒数第二个猜测，即

我的号码是 78 台计算机选择 50 我说较高的计算机选择 80 我说较低的计算机可以选择 12（当我不希望它低于 50 时。

我正在使用 Python 3.1

这是代码的副本。

```
import random

computer_tries = 0
player_number = None
computer_guess = random.randint(1, 100)

print(
    """
    Welcome Player to the fabulous number guessing game.
    Please allow me to show you my incredible deduction skills
    """)

question = None
while question != ("yes"):
    question = input("Has the player picked a number? ")
    question = question.lower()
    if question == "yes":
        print("\nI will now guess your number!!!\n")
        while player_number == None:
            computer_tries += 1
            print(computer_guess, "\n")
            confirmation = input("Is this the correct number? ")
            confirmation = confirmation.lower()
            if confirmation == "yes":
                player_number = computer_guess
                if computer_tries < 2:
                    print("I did it! I guessed your number was", computer_guess,
                           "and it only \ntook me", computer_tries,
                           "try to get it right!")
                else:
                    print("I did it! I guessed your number was", computer_guess,
                           "and it only \ntook me", computer_tries,
                           "tries to get it right!")
            else:
                higher_lower = None
                while higher_lower not in ("higher", "lower"):
                    higher_lower = input("Is my guess higher or lower"
                                + " than your number? ")
                    higher_lower = higher_lower.lower()
                    if higher_lower == "higher":
                        higher = computer_guess
                        computer_guess = random.randint(higher, 101)
                    elif higher_lower == "lower":
                        lower = computer_guess
                        computer_guess = random.randint(0, lower)
                    else:
                        print("Please choose either higher or lower.")

input("\n\nPress the enter key to exit") 
```

提前感谢大家可以提供的任何帮助。

盟友

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:09:19.210

我发现您的代码存在以下问题：

1.  您的随机数生成器仅绑定在数字谱的一侧，例如`random.randint(0, lower)`- 所以它忽略了`higher`边界。同样对于`computer_guess = random.randint(higher, 101)`。
2.  我建议你初始化`higher`和`lower`.
3.  一些调试有帮助:)

这是工作代码：

```
import random

computer_tries = 0
player_number = None
computer_guess = random.randint(1, 100)

print(
    """
    Welcome Player to the fabulous number guessing game.
    Please allow me to show you my incredible deduction skills
    """)

question = None
lower = 0 # initial lower guess
higher = 101  # initial higher guess
while question != ("yes"):
    question = input("Has the player picked a number? ")
    question = question.lower()
    if question == "yes":
        print("\nI will now guess your number!!!\n")
        while player_number == None:
            computer_tries += 1
            print(computer_guess, "\n")
            confirmation = input("Is this the correct number? ")
            confirmation = confirmation.lower()
            if confirmation == "yes":
                player_number = computer_guess
                if computer_tries < 2:
                    print("I did it! I guessed your number was", computer_guess,
                           "and it only \ntook me", computer_tries,
                           "try to get it right!")
                else:
                    print("I did it! I guessed your number was", computer_guess,
                           "and it only \ntook me", computer_tries,
                           "tries to get it right!")
            else:
                higher_lower = None
                while higher_lower not in ("higher", "lower"):
                    higher_lower = input("Is my guess higher or lower"
                                + " than your number? ")
                    higher_lower = higher_lower.lower()
                    if higher_lower == "higher":
                        higher = computer_guess
                        computer_guess = random.randint(lower+1, higher-1)
                    elif higher_lower == "lower":
                        lower = computer_guess
                        computer_guess = random.randint(lower+1, higher-1)
                    else:
                        print("Please choose either higher or lower.")
                    print("DEBUG: number must be " + str(lower) + " < x < " + str(higher))

input("\n\nPress the enter key to exit") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:49:38.443

您永远不会存储可能数字的上限和下限。在您的示例中，一旦您的程序选择 50 并且您说“更高”，您就需要在某处存储“数字肯定高于 50”的信息。当您回答“较低”时也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:52:11.100

您必须存储诸如 min_comp_guess 和 max_comp_guess 之类的内容。然后，当您要“猜测”数字时，您必须为有效范围生成它（显然 min_comp_guess 到 max_comp_guess）。

我永远是第二！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T22:01:42.080

我可能完全错了，但是在测试您的代码时，我发现通过选择程序编号高于我选择的编号，它会增加数字而不是可能会减少，而不是使它更接近我猜测的数字。我创建的一个类似的更高/更低的程序也有同样的问题，为了解决这个问题，我只是切换了大于和小于符号，希望你觉得这很有帮助，并可以将它应用到你的程序中。

# java - java.util.Logger logp - 我应该在方法名称中使用 () 吗？

> ID：13643616
> 
> 赞同：2
> 
> 时间：2012-11-30T10:43:03.657
> 
> 标签：java, java.util.logging

我知道这个问题有点外围，但我有点困惑，因为我真的不知道在方法调用 logp 中是否使用括号。

我通常使用这个：

```
LOGGER.logp(WARNING, "MyClass", "myMethod()", "Error while ..."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:12:48.207

没有必要，如果您需要了解，您可以使用`()`我们不需要的大部分。

即使你使用`log.warning("warning message");`它也会记录方法名和类名。如果您还需要更多格式化，可以将[Formatter](https://stackoverflow.com/questions/194765/how-do-i-get-java-logging-output-to-appear-on-a-single-line)添加到日志处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:57:16.683

我会如你所愿，但在我看来，括号明确地表示方法名称。当您需要搜索数十条消息时，它可以帮助您找到例如从带有 name 的方法记录`myMethod()`。此外，如果它有奇怪的名字，比如名词，也可以用来调用类。

# magento - 如何解密magento企业版密码？

> ID：13643618
> 
> 赞同：8
> 
> 时间：2012-11-30T10:43:19.343
> 
> 标签：magento

我刚刚注意到 magento 企业版和社区版都使用不同的算法来存储密码。我知道社区版使用 md5。谁能告诉我企业版使用哪种机制，如果我们想迁移到社区版，我们如何解密企业密码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T15:51:56.247

哈希是一种加密方式。您不应该能够解密密码。

密码的基本操作：

1.  客户注册一个帐户并输入密码。系统添加盐，加密密码并将生成的密码哈希存储在数据库中。

2.  客户登录，输入密码。系统添加盐，加密密码并将生成的密码哈希与存储的密码哈希进行比较。当哈希值相等时，登录系统知道客户知道密码，而实际上并不知道密码本身。

因此，如果一个系统使用 SHA1，而另一个系统使用旧的、过期的 MD5，那么将密码重新输入系统的唯一方法是让客户重新输入密码，以便调用新的哈希算法并存储新的哈希。

您拥有 Enterprise 源代码，编写一个使用 Enterprise 散列函数来存储和比较密码的模块，您将拥有带有更新的、安全增强的方法来存储密码的 CE，并且应该能够从旧址。

**一些附加信息：**

使用的加密方法可在 Mage_Core_Model_Encryption 类中找到。

三个感兴趣的函数是：

1.  `public function hash($data)`
2.  `public function getHash($password, $salt = false)`
3.  `public function validateHash($password, $hash)`

**从 1.7.xx 开始的功能代码**

>

```
public function hash($data)
{
    return md5($data);
} 
```

>

```
public function getHash($password, $salt = false)
{
    if (is_integer($salt)) {
        $salt = $this->_helper->getRandomString($salt);
    }
    return $salt === false ? $this->hash($password) : $this->hash($salt . $password) . ':' . $salt;
} 
```

>

```
public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    switch (count($hashArr)) {
        case 1:
            return $this->hash($password) === $hash;
        case 2:
            return $this->hash($hashArr[1] . $password) === $hashArr[0];
    }
    Mage::throwException('Invalid hash.');
} 
```

CE 和 Enterprise 似乎都使用相同的例程，**您必须检查一下，因为您有 Enterprise 代码**。

更改 app/etc/local.xml 文件中的加密密钥以匹配企业版本中的密钥，然后将企业数据导入 CE 数据库将允许访问加密数据。密码虽然存储为散列（参见上面的功能块）并且因此是不可逆的。local.xml 中存储加密密钥的相关部分：

```
<crypt>
    <key>< ![CDATA[-encryption-key-here-]]></key>
</crypt> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T03:24:15.567

我认为它在您的`app/etc/local.xml`或`app/etc/enterprise.xml`Magento EE 上

**Magento 企业版的解密功能**

```
/**
 * Decrypt a string
 *
 * @param string $data
 * @return string
 */
public function decrypt($data)
{
    return str_replace("\x0", '', trim($this->_getCrypt()->decrypt(base64_decode((string)$data))));
} 
```

和

```
/**
 * Instantiate crypt model
 *
 * @param string $key
 * @return Varien_Crypt_Mcrypt
 */
protected function _getCrypt($key = null)
{
    if (!$this->_crypt) {
        if (null === $key) {
            $key = (string)Mage::getConfig()->getNode('global/crypt/key');
        }
        $this->_crypt = Varien_Crypt::factory()->init($key);
    }
    return $this->_crypt;
} 
```

**在Enterprise Edition**或**Community Edition**上似乎具有相同的功能。您应该向**Magento Enterprise Edition 的所有者**询问 cript 密钥并使用 CE 对其进行解密。没关系，因为我正在潜入**Magento 企业版的代码**，并且代码与**社区版相同** *（用于加密/解密）*

在评论 1 之后添加：

```
/**
 * Hash a string
 *
 * @param string $data
 * @return string
 */
public function hash($data)
{
    return md5($data);
}

/**
 * Validate hash against hashing method (with or without salt)
 *
 * @param string $password
 * @param string $hash
 * @return bool
 * @throws Exception
 */
public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    switch (count($hashArr)) {
        case 1:
            return $this->hash($password) === $hash;
        case 2:
            return $this->hash($hashArr[1] . $password) === $hashArr[0];
    }
    Mage::throwException('Invalid hash.');
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T14:04:44.800

我们还使用不同的密码算法转移到了不同​​的系统。我们所做的确实像 Fiasco 建议的那样：

-> 编写一个覆盖 Magento_Core_Model_Encryption 的自定义模块并更改`hash`函数以匹配加密密码的算法。

在您的模块配置中：

```
<global>
  <helpers>
    <core>
      <encryption_model>MyCompany_Module_Model_Encryption</encryption_model>
   </core>
 </helpers>
</global> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T07:32:42.003

过去，我成功地从 Magento Enterprise 迁移到 Magento Community。如果密码被加盐，您将无法解密它们以将它们用于 Magento 社区。

您最好的选择是发送大量通讯，告知人们必须更改密码或自动为每个客户生成密码并将其发送给他们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T03:16:09.663

**他们都应该使用 MD5。**

也许一个有盐，一个没有 - 但它将向后兼容。

# android - android 开发新手 - 无法开始新活动

> ID：13643619
> 
> 赞同：1
> 
> 时间：2012-11-30T10:43:21.243
> 
> 标签：android, android-intent

首先 - 对不起，如果我的问题有点愚蠢，我对 Android 开发完全陌生......

我正在尝试从我的“LAUNCHER”活动开始一个新活动并在模拟器上运行它，但是每次我单击“下一步”按钮（应该开始我的第二个活动）时，我都会收到一条错误消息：“不幸的是，Omis hang man free 已经停止”，然后关闭应用程序......另外，当我在模拟器中重新启动同一个应用程序而不从 Eclipse 重新安装它时，它甚至没有向我显示第一个屏幕。 ..

我什至不知道我的问题出在哪里，所以我附上了 5 个代码：

第一个活动布局（名为“activity_open”）

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".OpenActivity"
    android:background="#DCDCDC" >

    <LinearLayout 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_weight="30" >

        <TextView
            android:id="@+id/tvEnterName"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="@string/stEnterName"
            android:textSize="24sp" />

    </LinearLayout>
    <LinearLayout 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_weight="40" >

        <EditText
            android:id="@+id/etNameInput"
            android:layout_width="250dp"
            android:layout_height="fill_parent"
            android:background="#FFFFFF"
            android:focusableInTouchMode="true"
            android:gravity="center"
            android:hint="@string/stHintNameEnter"
            android:singleLine="true" />

    </LinearLayout>
<LinearLayout
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:gravity="center"
    android:layout_weight="30" >

<Button
    android:id="@+id/bNext"
    android:layout_width="75dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/stNext"
    android:textSize="24sp" />
</LinearLayout>

</LinearLayout> 
```

第一个活动类（名为“OpenActivity”）

```
package com.omi.hangmanfree;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class OpenActivity extends Activity {

TextView tvEnterYourName;
EditText etName;
Button bContinue;
String myName, tmp;
final String errorStr = "\nYou must enter a name!";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_open);

    initialize();

    bContinue.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            myName = etName.getText().toString();

            if(etName.getText().toString().equals("") == true)
            {
                tvEnterYourName.setText(tmp + errorStr);
                tvEnterYourName.setTextColor(Color.RED);
            }
            else
            {
                try {
                    Intent gameIntent = new    Intent("com.omi.hangmanfree.GAMEACTIVITY");
                    startActivity(gameIntent);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    });
}

private void initialize() {
    // TODO Auto-generated method stub
    tvEnterYourName = (TextView)findViewById(R.id.tvEnterName);
    etName = (EditText)findViewById(R.id.etNameInput);
    bContinue = (Button)findViewById(R.id.bNext);
    myName = "~";
    tmp = tvEnterYourName.getText().toString();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    finish();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_open, menu);
    return true;
}

} 
```

第二个活动类（名为“GameActivity”）包com.omi.hangmanfree；

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.GridView;
import android.widget.TextView;

public class GameActivity extends Activity {

TextView tt;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game);

    GridView gvGrid = (GridView)findViewById(R.id.gvHagdara);
    tt.setText("_");
    gvGrid.addView(tt);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_game, menu);
    return true;
}

} 
```

第二个活动布局（名为“layout_game”）

```
<?xml version="1.0" encoding="utf-8" ?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".GameActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<GridView
    android:id="@+id/gvHagdara"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_below="@+id/textView1"
    android:layout_centerInParent="false"
    android:numColumns="auto_fit" >

</GridView>

</RelativeLayout> 
```

5\. 表现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.omi.hangmanfree"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".OpenActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".GameActivity"
        android:label="@string/title_activity_game" >
        <intent-filter>
            <action android:name="com.omi.hangmanfree.GAMEACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

**我不是在寻找代码改进（我只是在学习语言），所以请不要向我发送改进代码的建议（我知道有很多！）---我只是希望这段代码能够工作。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:47:06.627

问题可能出在 Intent 中。试试这个：

```
Intent gameIntent = new Intent(OpenActivity.this, GameActivity.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:47:46.317

请从 OpenActivity 的方法中删除`finish();`并`onPause()`从 GameActivity 中删除`gvGrid.addView(tt);`，因为 gridview 不是容器布局并编写以下代码

```
Intent gameIntent = new Intent(OpenActivity.this, GameActivity.class);
startActivity(gameIntent); 
```

代替

```
Intent gameIntent = new    Intent("com.omi.hangmanfree.GAMEACTIVITY");
startActivity(gameIntent); 
```

它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:47:43.173

请在 openActivity 中替换

```
Intent gameIntent  = new Intent(getApplicationContext(), GameActivity.class);
startActivity(gameIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:48:02.863

尝试在这里更改：

```
 Intent gameIntent = new    Intent("com.omi.hangmanfree.GAMEACTIVITY");
            startActivity(gameIntent); 
```

到

```
 Intent gameIntent = new    Intent(OpenActivity.this, GameActivity.class);
                startActivity(gameIntent); 
```

# c++ - 从 Huffman 树 Minheap 中弹出/删除节点

> ID：13643622
> 
> 赞同：0
> 
> 时间：2012-11-30T10:43:25.220
> 
> 标签：c++, algorithm, data-structures, huffman-code, min-heap

我在从霍夫曼树中正确弹出时遇到问题。现在我正在创建一个基于 minheap 的 Huffman 树，我想做以下事情：

如果我们假设 A 和 B 是两个不同的子树，我会说如果 A 的频率小于 B 的频率，则 A 将首先弹出。**如果它们具有相同的频率，那么我会在 A 的任何叶节点中找到 ASCII 值中的最小字符。然后我会看看 A 中最小的字符叶节点是否小于 B 的任何叶节点中的那个。如果是这样，我会在 B 之前弹出 A。如果不是，我会弹出 B。** <-这就是我遇到的麻烦。

例如：

假设我输入：

```
eeffgghh\n (every letter except for \n's frequency which is 1 is 2) 
```

进入我的霍夫曼树。然后我的树看起来像这样：

```
 9      
       / \
    5        4    
   / \      / \
  3  h      g  f
 /\
e  \n 
```

下面是我从 Huffman minheap 中弹出的尝试。我在比较两个字母的频率是否相同时遇到了麻烦。如果有人可以提供帮助，那就太好了。谢谢！

```
void minHeap::heapDown(int index)
{
  HuffmanNode *t = new HuffmanNode();
  if(arr[index]->getFreq() == arr[left]->getFreq() || arr[index]->getFreq() == arr[right]->getFreq()) //arr is an array of HeapNodes
    {
      if(arr[left]->getLetter() < arr[right]->getLetter())
      {
        t = arr[index]; //equals operator is overloaded for swapping
        arr[index] = arr[left];
        arr[left] = t;
        heapDown(left);
      }
      else
      {
        t = arr[index];
        arr[index] = arr[right];
        arr[right] = t;
        heapDown(right);
      }
    }
    if(arr[index]->getFreq() > arr[left]->getFreq() || arr[index]->getFreq() > arr[right]->getFreq())
    {
      if(arr[left]->getFreq() < arr[right]->getFreq())
      {
        t = arr[index];
        arr[index] = arr[left];
        arr[left] = t;
        heapDown(left);
      }
      else
      {
        t = arr[index];
        arr[index] = arr[right];
        arr[right]  = t;
        heapDown(right);
      }//else
    }//if
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:43:08.683

标准 C++ 库包含堆算法。除非您不允许使用它，否则您可能会发现它更容易。

标准 C++ 库还包含 swap(a, b)，它比您正在执行的交换更具可读性。但是，在 heapDown 中交换效率低下：您应该做的是暂时抓住要放置的元素，然后将子元素向下筛选，直到找到放置元素的位置，然后再将其放在那里。

如果您为 HuffmanNode 实现 operator<，您的代码也将更具可读性。在任何情况下，您都在做一个不必要的比较；你真正想做的是（省略很多细节）：

```
heapDown(int index, Node* value) {
  int left = 2 * min - 1;  // (where do you do this in your code???)
  // It's not this simple because you have to check if left and right both exist
  min = *array[left] < *array[left + 1] ? left : left + 1;  // 1 comparison
  if (array[min] < to_place) {
    array[index] = array[min];
    heapDown(min, value);
  } else {
     array[index] = value;
  } 
```

您的第一个比较（第三行）是完全错误的。a == b || a == c 并不意味着 b==c，或者确实为您提供任何关于 b 和 c 中哪个较小的信息。只对 b 和 c 进行第二次比较通常会给你错误的答案。

最后，您`new`在每次调用时都做了不必要的操作，但从不做`delete`. 因此，您正在缓慢但无情地泄漏内存。

# c++ - 使用 GTest/GMock 模拟非虚拟函数时出错

> ID：13643627
> 
> 赞同：0
> 
> 时间：2012-11-30T10:43:41.573
> 
> 标签：c++, unit-testing, googletest, gmock

我正在使用 GTest 为我的代码编写 UT。

为了测试“非虚拟”函数，我使用“nm”实用程序生成了“函数重命名”，并将其添加到“test suite.cpp”文件中（在 extern“C”下），格式如下

__wrap_Mangled_name（函数 args 与原始函数相同）

然后在“tst_def”文件中链接相同的内容。仍然当我运行测试套件时，源代码中的原始函数被调用而不是这个“包装的”。但实际上，应该调用这个包装好的函数。

我使用“C++filt”实用程序交叉检查了这个损坏的名称是否正确，它是正确的。

对此有什么建议吗？

谢谢，

乌代

# c# - 使用一个 CanExecute 选择性地禁用一组控件中的元素

> ID：13643628
> 
> 赞同：0
> 
> 时间：2012-11-30T10:43:48.730
> 
> 标签：c#, wpf

我有一个 WPF 界面，其中有许多（超过 40 个）按钮，它们执行由按钮名称参数化的类似任务，我已链接到一个命令。在我的命令处理程序中，我有一些工具可以确定单击了 40 个按钮中的哪一个。问题是如何根据运行时条件有选择地禁用或启用其中一些命令。有人担心，将一种 CanExecute 方法应用于不同的组件并根据 e.Source 身份进行区分是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:47:13.220

如果执行逻辑不同，我看不出有任何理由将所有按钮绑定到同一个命令。

我真的很想看到单独的命令，而不是带有所有按钮名称的大 if else 块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:32:06.337

测试表明，使用按以下方式构造的 CanExecute 方法可以实现这一点：

```
private void MyCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
{
    if (e.Source == button1)
        e.CanExecute = checkBox1.IsChecked.HasValue ? checkBox1.IsChecked.Value : false;
    if (e.Source == button2)
        e.CanExecute = checkBox2.IsChecked.HasValue ? checkBox2.IsChecked.Value : false;
    if (e.Source == button3)
        e.CanExecute = checkBox3.IsChecked.HasValue ? checkBox3.IsChecked.Value : false;
} 
```

# image - Python pygame连续图像加载FPS

> ID：13643630
> 
> 赞同：2
> 
> 时间：2012-11-30T10:43:55.380
> 
> 标签：image, performance, pygame

在 linux 机器上使用 pygame，不断加载新图像并显示它们会减慢程序的速度。

输入图像 (400x300) 采用 PPM 格式，以保持文件大小恒定 (360K) - 不影响 IO 并避免任何解压缩延迟。

它以每秒 50 帧开始，然后在大约 2 分钟后达到每秒 25 帧左右。

```
import pygame    
pygame.init()    
clock = pygame.time.Clock()
screen = pygame.display.set_mode((800, 600),pygame.FULLSCREEN)   
frame=1

while 1:

    image = pygame.image.load(str(frame)+".ppm")    

    screen.blit(image,(0,0))
    pygame.display.flip()

    clock.tick(240)

    frame=frame+1
    if(frame%10==0):
        print(clock.get_fps()) 
```

可以做些什么来保持帧速率更加一致？

很可能它与对需要进行垃圾收集的图像的旧引用有关。也许不吧。

无论如何，是否可以在不创建新对象并触发垃圾收集器或任何减慢系统速度的情况下连续加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:34:23.103

经过数周的思考，我想我终于弄清楚了你的问题是什么。出于某种原因，计算机必须记住`image`. 在闪烁的行之后，放

```
del image 
```

我不完全确定，但它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-06T18:06:16.593

```
import pygame    
pygame.init()    
clock = pygame.time.Clock()
screen = pygame.display.set_mode((800, 600),pygame.FULLSCREEN)   
frame=1

global image
image = pygame.image.load(str(frame)+".ppm")
#this image can be used again and again
#you can also give ////del image//// but it will load from the first so it takes time but using again and again doesn't do so
while 1:
     screen.blit(image,(0,0))
     pygame.display.flip()

     clock.tick(240)

     frame=frame+1
     if(frame%10==0):
        print(clock.get_fps()): 
```

# javascript - 重复的 javascript 调用。不能禁用

> ID：13643632
> 
> 赞同：0
> 
> 时间：2012-11-30T10:44:10.710
> 
> 标签：javascript, ajax

单击某个函数时，我使用 JavaScript 函数来更改页面。在函数内部进行 ajax 调用。
因为浏览器很慢。如果我在页面更改之前多次单击按钮（AJax div 加载。页面实际上没有更改），则每次单击都会进行 ajax 调用。
我用下面的方法来预防。但即使它被多次调用。我该如何预防？

```
var isClicked = function() {}
isClicked.init = function() {
    this.clicked = false;
}

function myAjaxFunction {
    //some statements
    if(isClicked.clicked == 'undefined')
        isClicked.clicked = false;

    if(isClicked.clicked)
        return false;

    isClicked.clicked = true;
     // my ajax call here
    isClicked.clicked = false;
    //some statements
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:53:57.647

```
var isClicked = false;  

function AjaxFunction(){

    if(isClicked){
        return false;
    }

    // Set your variable.
    isClicked = true;

    // Do yourAjaxCall and use isClicked = false in the callback of that function.

} 
```

# php - PHP mysqli - 使用 DELETE 的结果

> ID：13643633
> 
> 赞同：2
> 
> 时间：2012-11-30T10:44:16.347
> 
> 标签：php, mysql, mysqli

我是 PHP 和 mysql 的新手，我想知道是否有办法在 DELETE 查询后使用结果。

例如：

```
$stmt = $mysqli->prepare("DELETE FROM users WHERE id=?");
$stmt->bind_param('i', $someID);
$stmt->execute();
//Here I want to use the name of the deleted user. 
```

我知道我可以在删除之前进行 SELECT 查询，我只是想知道是否有一种聪明的方法来获取已删除的行。到目前为止我发现的是

```
$stmt->affected_rows 
```

但这只给出了受影响的行数。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:47:20.013

`DELETE`查询会删除数据。它不获取数据。事实上，之后没有数据可取，因为它已被删除。没有`DELETE`查询的“结果”。

`SELECT`如果需要，删除之前的数据。

# postgresql - postgresql information_schema中ForeignKey和PrimaryKey的信息

> ID：13643636
> 
> 赞同：0
> 
> 时间：2012-11-30T10:44:28.433
> 
> 标签：postgresql

查看从 postgres 分配给其信息模式中的列的 foreignKey 和 primaryKey 名称的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:52:03.780

[您可以在表pg_constraints](http://www.postgresql.org/docs/current/static/catalog-pg-constraint.html)中查看所有约束（包括 PK 和 FK）

# wordpress - yoast 面包屑图像分隔符

> ID：13643637
> 
> 赞同：3
> 
> 时间：2012-11-30T10:44:28.840
> 
> 标签：wordpress, breadcrumbs

我正在使用**Wordpress CMS**，我使用**Yoast Breadcrumbs**（[http://wordpress.org/extend/plugins/breadcrumbs/](http://wordpress.org/extend/plugins/breadcrumbs/)或[http://yoast.com/wordpress/breadcrumbs/](http://yoast.com/wordpress/breadcrumbs/)）向网站添加面包屑，但在我的情况我需要用图像替换分隔符，如下图所示：

![在此处输入图像描述](../Images/f27eac02ab4a0926785c644f43618a73.png)

上图是我喜欢实现的面包屑输出。**Yoast Breadcrumbs**的默认输出是这样`You are here: Home » Uncategorized » Hello world!`的，插件有和管理选项来编辑分隔符，但它阻止了 HTML 标记。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-08-17T10:16:21.053

有一种更清洁的方法可以做到这一点。

阅读[http://hookr.io/filters/wpseo_breadcrumb_separator/](http://hookr.io/filters/wpseo_breadcrumb_separator/)，这里他们提到了一个钩子。如果你使用这个钩子，你可以很容易地用默认的 HTML 覆盖分隔符。

**例如：**

```
function filter_wpseo_breadcrumb_separator($this_options_breadcrumbs_sep) {
    return '<i class="fa fas fa-chevron-right"></i>';
};

// add the filter
add_filter('wpseo_breadcrumb_separator', 'filter_wpseo_breadcrumb_separator', 10, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T00:29:18.720

Yoast 面包屑现在被[WordPress SEO Plugin](http://yoast.com/wordpress/seo/)取代了，根据：http: [//yoast.com/wordpress/breadcrumbs/](http://yoast.com/wordpress/breadcrumbs/)您可以在 Wordpress SEO 管理下自定义面包屑分隔符`Internal Links`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-24T10:43:59.923

我意识到这是一篇旧帖子，但我今天在搜索同样的问题时发现了这个。从 Yoast SEO 版本 3.2.3 开始，您可以在插件的高级设置中将 HTML 放在“面包屑之间的分隔符：”字段中。我已经使用了这段代码，例如我使用 Font Awesome 但您可以轻松地对样式表中的图像执行相同的操作：

```
<span class="divider"></span> 
```

还有我的 CSS：

```
p#breadcrumbs span.divider:before {
    content: '\f105';
    font-family: 'FontAwesome';
    padding-left: 10px;
    padding-right: 6px;
} 
```

我希望这会有所帮助=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:58:52.077

在分隔符的设置中，您可以添加`<span class="sprite breadcrumb-seperator">»</span>` 这样您就有了一个可见的分隔符。但是您可以在其上设置基于精灵的图像。

# sql-server - ASP MVC 应用程序的数据库在 Management Studio 中不可见

> ID：13643638
> 
> 赞同：1
> 
> 时间：2012-11-30T10:45:12.397
> 
> 标签：sql-server, asp.net-mvc, entity-framework

我在 IIS 上部署了一个简单的 ASP.net MVC 应用程序（win 2k8 R2 64 位下的 7.5），当我开始使用该应用程序时，它创建了它的数据库（ApplicationData 和第二个使用我自己的数据）。数据库（.mdf 和 .ldf 文件）是在 App_Data 文件夹中创建的。

应用程序使用实体框架代码优先方法。我必须将应用程序池的身份更改为网络服务才能使网页正常工作。我还必须手动创建此 App_Data 目录并为网络服务用户分配权限以修改其内容。

现在我遇到的问题是我在 Management Studio 中看不到这些数据库（安装了高级服务的 SQL Server 2012 Express）。如果长时间不使用网页，我可以手动附加它们，否则 .mdf 文件会被网络服务用户的 sqlservr.exe 进程锁定。一直以来，我都有两个同时运行的 sqlservr 进程。一个由 MSSQLsomething 用户运行，第二个由网络服务运行。但是，我只安装了一个 SQL 服务器实例（我 100% 确定）。

谁能解释一下，即使在使用这些数据库的时候（被 sqlservr.exe 进程锁定），Management Studio 怎么可能看不到这些数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:53:55.017

这是因为数据库以[用户实例模式](http://blogs.msdn.com/b/somasegar/archive/2012/08/28/building-an-end-to-end-windows-store-app-part-2-integrating-cloud-services.aspx)托管，因此实际上并未附加到“官方”数据库服务器。

在那篇文章中，您将看到`User Instance=true;`在连接字符串中启用了此功能。要关闭它，您指定`User Instance=false;`.

# php - 查询以显示来自数据库的四个随机数据

> ID：13643640
> 
> 赞同：2
> 
> 时间：2012-11-30T10:45:28.730
> 
> 标签：php, mysql

这是我的 php 代码，用于显示数据库中的数据。我正在尝试显示表中的随机数据。

```
<?php
include('connection.php');
$query="SELECT * FROM `banner_ad` ORDER BY RAND() LIMIT 4";
if($query_run=mysql_query($query))
{
    $i=4;
    $rows=mysql_fetch_array($query_run);
    while($rows)
    {
        echo $rows['banner_no'];
        echo $rows['banner_name'];
        echo "<a href=\"".$rows['Banner_website_url']. "\">";
        echo "<img src=\"".$rows['banner_image_url']."\" width=\"100px\" height=\"100px\">";
        echo"</a>";
    }
} else {
    echo'<font color="red"> Query does not run. </font>';
}
?> 
```

但是这段代码的问题是：

它什么也没显示。但是每当我尝试对上面的代码进行一些修改时，例如：

```
<?php
include('connection.php');
$query="SELECT * FROM `banner_ad` ORDER BY RAND() LIMIT 4";
if($query_run=mysql_query($query))
{
    $i=4;
    $rows=mysql_fetch_array($query_run);
    while($rows && $i<4)
    {
        echo $rows['banner_no'];
        echo $rows['banner_name'];
        echo "<a href=\"".$rows['Banner_website_url']. "\">";
        echo "<img src=\"".$rows['banner_image_url']."\" width=\"100px\" height=\"100px\">";
        echo"</a>";
        $i=$i-1;
    }
} else {
    echo'<font color="red"> Query does not run. </font>';
}
?> 
```

它显示相同的单个输出 4 次。但它必须显示四种不同的输出。所以，请告诉我错误在哪里......我想如何显示四个不同的随机输出。

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:54:50.593

您的第一个 Query 很好，但 while 是错误的：

看看你在这里做了什么：

```
$rows=mysql_fetch_array($query_run);
while($rows)
{
    echo $rows['banner_no'];
    echo $rows['banner_name'];
    echo "<a href=\"".$rows['Banner_website_url']. "\">";
    echo "<img src=\"".$rows['banner_image_url']."\" width=\"100px\" height=\"100px\">";
    echo"</a>";
} 
```

这将以“无限循环”结束，原因`$rows`将始终设置。你需要的是：

```
while($rows=mysql_fetch_array($query_run)) 
```

这将导致`myslq_fetch_array`每次检查 while 条件时都返回一个新行。如果返回所有 4 行，`$rows`则为 false 并停止循环。

并且要完整：在您的第二个示例中，您恰好在同一行上迭代了 4 次，您只需通过调用`myslq_fetch_array`.

一个可能的解决方案是在while循环中再次获取该行：

```
$i=4;
while ($i>0){
    $rows = mysql_fetch_array(...);
    $i--;
} 
```

但是，您应该更喜欢第一个解决方案，因为这样您就不需要注意结果计数是否与您的迭代器变量匹配。

sidenode：`$row`不带's'调用它，因为你总是只取回一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:50:40.653

Try constructing while loop like so

```
while(($rows=mysql_fetch_array($query_run)) !== false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:54:03.287

使用`ORDER BY RAND()`不是最佳实践，因为必须为每一行生成随机值。更好的方法是在 PHP 中随机生成主键（例如 ID），然后根据它们进行选择。

```
$random_id = rand(1,4);
$query="SELECT * FROM `banner_ad` WHERE id = $random_id"; 
```

将恰好选择一个随机行。类似的人应该使用`IN`语句选择多行。

您可以在[此处](http://www.warpconduit.net/2011/03/23/selecting-a-random-record-using-mysql-benchmark-results/)找到更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:56:51.283

```
$query_run=mysql_query($query);
if(!$query_run)
{
    echo'<span style="color:red">Query did not run.</span>';//font tag is ancient
}
else
{
    if(mysql_num_rows($query_run) > 0)
    {
        while($row = mysql_fetch_assoc($query_run))
        {
            echo $rows['banner_no'];
            echo $rows['banner_name'];
            // more...
        }
    }
} 
```

# groovy - 如何在 Groovy 中覆盖方法 Class .getAt

> ID：13643642
> 
> 赞同：0
> 
> 时间：2012-11-30T10:45:44.893
> 
> 标签：groovy, metaprogramming

目前我正在使用 Groovy 1.8.2，以下代码按预期对我有用：

```
Class.metaClass.getAt = { args ->
    println "Called ${delegate}[${args}]"
    TypeDefinition.create(delegate, args)
} 
```

我在我的 DSL 中使用它，如图所示：

```
TypeDefinition instance = List[MyOwnClass] 
```

当我迁移到 Groovy 2.0.5 时，此功能因“缺少方法：带有参数 some.package.MyOwnClass 的静态 java.util.List.getAt()”而失败。所以问题是我怎样才能让它与 Groovy 2 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:32:00.143

使用类别适用于 2.0.5：

```
class ClassHelperCategory {
    static getAt(Class cls, String arg) {
        "Called $cls[$arg]"
    }
}

Class.metaClass.mixin(ClassHelperCategory)

assert List['hello'] == 'Called interface java.util.List[hello]' 
```

# java - Xuggler 和从直播中播放

> ID：13643648
> 
> 赞同：4
> 
> 时间：2012-11-30T10:46:03.690
> 
> 标签：java, video, stream, xuggler

我们目前正忙于一个项目，我们试图在一个窗口中播放来自 Java 实时流的视频文件。我们已经设法使用 InputStreamReader 通过 Socket 对象捕获流。

下一步是使用现有库 (Xuggler) 或代码来解码此流并在简单窗口中显示内容（视频）。

该流来自 Parrot AR Drone 2.0，IP 地址为 192.168.1.1:5555。那就是我们陷入困境的地方。我们尝试使用的代码是此处的 DecodeandPlayVideo 示例：

[https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DecodeAndPlayVideo.java](https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DecodeAndPlayVideo.java)

现在应该可以将它与输入流一起使用，但它当然应该采用正确的格式。有什么方法可以帮助我们做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:03:39.380

Oke we solved the problem:

First we make a TCP connection to the drone:

```
try
    {
        socket_video_tcp = new Socket();
        socket_video_tcp.connect(new InetSocketAddress(commandSender.droneInetAddress, commandSender.VIDEO_PORT));
    } 
```

Our class is Runnable what means that we also have a method run() In this method we send a video_enable command and we also disable the dynamic video bitrate by sending this command: video:bitrate_ctrl_mode 0;

```
public void run()
{
    commandSender.sendConfigCommand("VIDEO_ENABLE");
    commandSender.sendConfigCommand("VIDEOBITRATE");

    decode();
} 
```

Our decode() method can be found here: [https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DecodeAndPlayVideo.java](https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DecodeAndPlayVideo.java)

In this decode method we have changed this:

```
 if (container.open(filename, IContainer.Type.READ, null) < 0) 
```

To this:

```
if (container.open(socket_video_tcp.getInputStream(), null) < 0) 
```

That's all!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:11:13.807

从有问题的编辑复制：

> 今天我们解决了这个问题。我们之前尝试使用 socketconnection.getInputStream 将套接字连接加载到 Icontainer.open 中。结果是 0 个流。经过一些小的调整，结果是 1 个流，我们可以在屏幕上看到无人机的实时视频！

# c++ - 在 if 条件表达式中构造的未命名临时对象的生命周期

> ID：13643649
> 
> 赞同：32
> 
> 时间：2012-11-30T10:46:21.817
> 
> 标签：c++

标准如何定义在评估`if`条件表达式期间构造的临时对象的生命周期？

我查找了这些信息，并在一个示例中找到了与第 10 页 1.9 美元中的 [10] 类似的内容。（我在这里指的是新规范的最终草案。）但对我来说仍然不清楚（足够）由于 Visual C++ 的行为与我对那个例子的理解不同，我决定问。

请提供适当的规范参考。

* * *

如果您命名该对象，它会在整个过程中持续存在`if`（因此既是`true`块又`false`是块，但在结束前被销毁`if`）。

例如：

```
if ( MyClass x = f() ) { /* ... */ } else { /* ... */ }
nextInstruction(); 
```

`x`可以在两个`if`块中使用，但在`nextInstruction`被调用之前被破坏。

但是，如果你不命名呢？

```
if ( f() ) { /* ... */ } else { /* ... */ }
nextInstruction(); 
```

在我对规范的引用部分的理解中，返回的值`f()`将在执行进入其中一个块（ for`true`或 for `false`）之前被销毁。

但是，Visual C++ 会破坏该临时对象，就好像它已被命名一样。*（**编辑：**正如 Tino Didriksen 指出的那样，Visual C++ 在这里工作得很好。事实上，现在我也确认了这一点。在查看初始测试结果时我一定犯了一个错误！）*

* * *

这在某些极端情况下确实很重要（这里不讨论它们的可能性有多大，或者以这种方式编写代码是否好......）。

例如让我们有：

```
class ScopedLock {
public:
  ~ScopedLock() { if ( isLocked() ) unlock(); }

  operator bool() const { return isLocked(); }

  /* ... */

}; 
```

现在，如果我们有如下代码：

```
if ( ScopedLock lock = resource.lock() ) { /* ... */ } 
```

我们可以确定，当执行进入`true`块时，我们拥有该资源，并且在我们离开该块之前它不会被解锁。

但是如果有人这样写怎么办：

```
if ( resource.lock() ) { /* ... */ } 
```

现在至关重要的是，临时的析构函数`ScopedLock`将被调用。因为它决定了这段代码是否正确（在资源使用方面）。（再次让我们跳过讨论编写这样的代码是否不好。这不是这个问题的重点......）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T12:22:57.900

> 但是，Visual C++ 会破坏该临时对象，就好像它已被命名一样。

不，它不...

给定代码

```
#include <iostream>

struct S {
    S() { std::cout << "S()" << std::endl; }
    S(const S&) { std::cout << "S(const S&)" << std::endl; }
    ~S() { std::cout << "~S()" << std::endl; }
    operator bool() const { return true; }
};

int main() {
    std::cout << "main 1" << std::endl;

    if (S s = S()) {
        std::cout << "if 1" << std::endl;
    }
    else {
        std::cout << "else 1" << std::endl;
    }

    std::cout << "main 2" << std::endl;

    if (S()) {
        std::cout << "if 2" << std::endl;
    }
    else {
        std::cout << "else 2" << std::endl;
    }

    std::cout << "main 3" << std::endl;
} 
```

GNU g++ 4.5.1 和 g++ 4.7.0 以及 VC++ 2010 和 VC++ 2012 具有完全相同的输出：

```
main 1
S()
if 1
~S()
main 2
S()
~S()
if 2
main 3 
```

其中命名的临时在 if/else 之后被销毁，未命名的临时在条件结束时被销毁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T11:43:31.823

据我所知，Visual C++ 在这方面是错误的。

事实上，一个临时的（几乎总是）在创建它的完整表达式的末尾被销毁：

> §12.2/3：[...]临时对象被销毁作为评估完整表达式的最后一步，该完整表达式（词法上）包含创建它们的点

查看选择语句 ( `if`and `switch`) 的定义，我们可以看到条件是一个表达式：

```
§6.4:
selection-statement:
  if ( condition ) statement
  if ( condition) statement else statement
  switch ( condition ) statement

condition:
  expression
  type-specifier-seq declarator = assignment-expression 
```

因此，在条件中创建的任何临时对象都应在执行以下语句之前被销毁（除非绑定到对 const 的引用）。

在条件中引入新名称时的行为在 §6.4/3 中指定：

> 条件中的声明引入的名称 [...] 的范围从其声明点到条件控制的子语句结束。

因此，在您的示例中，`x`位于 的两个分支的范围内`if`，并在评估之前被销毁`nextInstruction()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T12:02:47.613

这是我在第 145 页的“C++ 的设计和演变”中发现的：

```
void h(String s1, String s2)
{
    const char* p;
    if (p = s1+s2) {
        // ...
    }
} 
```

> 对象持有的销毁`s1+s2`发生在条件的末尾还是整个`if`语句的末尾？答案是持有的对象`s1+s2`将在条件结束时被销毁。

# dynamics-crm-2011 - 创建引用当前用户团队的自定义视图

> ID：13643650
> 
> 赞同：1
> 
> 时间：2012-11-30T10:46:23.240
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

在 CRM 中，我们有目标实体。在该实体中，我想创建一个视图。为此，我遵循设置-> 自定义-> 自定义系统-> 实体-> 目标-> 视图，然后单击新建按钮。在编辑过滤条件时，我可以将条件设​​置为...

> “目标所有者” “等于当前用户”

我的要求是我必须创建一个具有以下条件的视图，

> “目标所有者”“等于当前用户团队”

但我找不到“等于当前用户团队”

关于如何创建此视图的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:00:50.113

这是否给出了您想要的结果？ ![示例高级查找定义](../Images/221de320be71c08d2ab22c0b8f3830df.png)

# java - java.net.SocketException: recvfrom failed: ETIMEDOUT 的原因可能是什么？

> ID：13643652
> 
> 赞同：9
> 
> 时间：2012-11-30T10:46:27.177
> 
> 标签：java, android

我在我的应用程序中遇到了这个问题。它很少见且难以发现。这是一个堆栈：

```
2012-11-30 08:42:22.745myapp.package.MyCommand is failed.java.net.SocketException: recvfrom failed: ETIMEDOUT (Connection timed out)
at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:542)
at libcore.io.IoBridge.recvfrom(IoBridge.java:506)
at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:252)
at myapp.package.HttpCommand.executeRequest(HttpCommand.java:176)
at myapp.package.HttpCommand.execute(HttpCommand.java:83)
at myapp.package.NetworkService$1.run(NetworkService.java:60)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: libcore.io.ErrnoException: recvfrom failed: ETIMEDOUT (Connection timed out)
at libcore.io.Posix.recvfromBytes(Native Method)
at libcore.io.Posix.recvfrom(Posix.java:131)
at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
at libcore.io.IoBridge.recvfrom(IoBridge.java:503)
... 26 more 
```

在我的应用程序中，我有一个对服务器执行所有命令的类：

```
private static final AndroidHttpClient client = AndroidHttpClient.newInstance(TAG);

HttpUriRequest request = getRequest(context);
        HttpResponse response = client.execute(request);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (HttpStatus.SC_OK == statusCode) {
            final String json = EntityUtils.toString(response.getEntity());
            handleResult(json);
            Log.i(TAG, json);
        } else {
            handleError(SERVER_CODE);
        } 
```

你有什么想法这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:40:13.813

当收到“连接超时”错误时，我会寻找：

*   重载网络连接
*   重载服务器
*   会话的连接超时参数不足
*   在 Ice Cream Sandwich 和更早的版本中检查是否与 DNS 双重缓存有关。请参阅[InetAddress](http://developer.android.com/reference/java/net/InetAddress.html)`DNS caching`和[问题 7904：Android 不支持 TTL 并将 DNS 结果缓存 10](http://code.google.com/p/android/issues/detail?id=7904)分钟

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T17:24:18.280

对我来说，这个错误发生在：

*   应该回复的一方意外关闭了连接。

我的情况：Android 通过端口 8080 上的普通套接字连接到微处理器。问题是 uC 在实际发送“OK”回复之前会关闭连接。在这个 uC（ESP8266）中，发送显然是一个延迟操作。解决方案是注释掉关闭连接的行（这行代码来自以前的版本，没有打算回复）。Rgds。

# ruby - ruby 调试用户提示

> ID：13643654
> 
> 赞同：0
> 
> 时间：2012-11-30T10:46:31.100
> 
> 标签：ruby, debugging

我需要一种暂停程序流程的方法，因为我想首先检查很多打印语句。有没有办法用 ruby​​ 做到这一点，停止程序的流程并仅在用户输入 yes 时继续，或者如果输入 no 则停止？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:54:16.377

是的。在您的代码中，将`gets`. 然后代码将在该点暂停，直到用户输入`Enter`。你不需要做任何特别的事情来终止，因为如果你愿意，你可以做`Ctrl`+ `C`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:20:59.803

不要忘记从 . 的返回值中去掉换行符`gets`。

```
n, m = 0, 1
repeat = 10

loop do
  repeat.times do
    print "#{m}, "
    n, m = m, n + m
  end
  puts "\nContinue (yes/no)?"
  answer = gets.chomp
  exit if answer == "no"
end 
```

另请查看[Pry](https://github.com/pry/pry)。

```
# test.rb
require 'pry'

class A
  def hello() puts "hello world!" end
end

a = A.new

# start a REPL session
binding.pry

# program resumes here (after pry session)
puts "program resumes here." 
```

# layout - Dojo 和小部件的高度

> ID：13643666
> 
> 赞同：0
> 
> 时间：2012-11-30T10:47:13.820
> 
> 标签：layout, widget, dojo

我试图弄清楚在实例化小部件时如何计算“高度”。我不会走很远...

目前，我有一个简单的 HTML 页面，如下所示：

```
</head>
<body class="claro"><div id="appContainer"></div></body>
</html> 
```

CSS是这样的：

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}

#appContainer {
    height: 100%;
} 
```

当我的应用程序启动时，会发生这种情况（这是一个简化）：

```
 // Create the "application" object, and places them in the right spot. 
 appContainer = new BorderContainer( {} , 'appContainer'); 
```

保持原样，该应用程序具有正确的大小和一切。

** Q1：为什么我需要为html、body和#appContainer指定高度？

然后，我有：

```
 // Create the new BookingDojo application
 bookingDojo = new BookingDojo( { id: 'bookingDojo', region: 'center'  } );
 appContainer.addChild( bookingDojo ); 
```

最后：

```
 appContainer.startup(); 
```

BookingDojo 有这个 CSS：

```
#bookingDojo {
   height: 100%;
}

.bookingDojo {
  height: 100%;
} 
```

并使用此模板：

```
templateString: '' + 
    '<div>' + 
    '  <div class="bookingDojo" data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="design: \'headline\'">' + 

    '    <div data-dojo-type="dijit.layout.TabContainer" data-dojo-props="region: \'center\', tabPosition: \'left-h\'">' + 
    '      <div data-dojo-type="hotplate.bd.Settings" data-dojo-props="title: \'Settings\'">Settings</div>' + 
    '      <div data-dojo-type="dijit.layout.TabContainer" data-dojo-props="title: \'attempt\', tabPosition: \'top\'" data-dojo-attach-point="settingsTab">' + 
    '        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="title:\'One\'">ONE</div>' + 
    '        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="title:\'Two\'">TWO</div>' + 
    '      </div>' + 
    '      <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="title: \'Two\'">Section Two</div>' + 
    '      <div data-dojo-type="hotplate.bd.Dashboard" data-dojo-props="title: \'Dashboard\'">Section One</div>' + 
    '    </div>'+ 
    '  </div>' + 
    '</div>', 
```

请注意小部件中的 class="bookingDojo"：

** Q2：如果我从 CSS 中取出 wither #bookingDojo 或 .bookingDojo，应用程序将无法正确呈现。

我的意思是，我也有一个问题，我无法让仪表板正确渲染，因为它的高度为 0，但这是一个不同的（可能相关的）故事，我为此添加了不同的帖子。

** Q3：有人可以*向*我解释整个“小部件的高度”问题吗？我知道小部件需要startup()，并且我知道如果您创建一个内部小部件并且它是不可见的，那么它将需要resize()。但这显然不是我需要知道的全部，因为我发现自己一遍又一遍地努力让一个小部件出现（我去尝试 CSS、doLayout、调整大小等）所以......好吧，我一定错过了一些东西！

太感谢了，

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:52:54.913

对于第一季度，文档说：

> 外部尺寸必须在 BorderContainer 节点上指定。必须分别为边指定宽度，为顶部和底部指定高度。中心不应指定尺寸；它将填充剩余的空间。

在您的 CSS 中，您将 appContainer 设置为全屏，因为 100% 的高度意味着 100% 的父元素...并且您的结构是

```
<html><body><div id="appContainer">...etc 
```

因此，如果您希望 appContainer 占据屏幕高度的 100%，则必须将 body 和 html 都设置为 100%...默认情况下，块元素已经是 100% 宽，因此无需在此处设置宽度。 .

对于第二季度，我建议您在 firebug 中查看您的 html。您会注意到一个 id="bookingDojo" 的 div，它将是您模板的最外面的 div。第一个内部 div 有一个 class="bookingDojo"。同样，这 2 个 div 是嵌套的，因此，如果您希望它们填充其父容器 div 的完整高度（即您的 BorderContainer，您已经设置为 100% 高）。我在这里做了一个小例子[http://jsfiddle.net/psoares/7JQWC/](http://jsfiddle.net/psoares/7JQWC/) 你会看到类似 bookingDojo 的东西，我将 #bookingDojo 设置为 100% 高度，但没有为 .bookingDojo 类指定高度。尝试设置它，您会看到红色边框扩大...

对于第三季度，我认为这里的整个问题是理解嵌套框如何获得它们的大小，因此您可以参考第一季度和第二季度......

我希望这有帮助...

# android - SCREEN_ON 意图后无法开始重复振动

> ID：13643669
> 
> 赞同：2
> 
> 时间：2012-11-30T10:47:29.790
> 
> 标签：android, android-vibration

我有一个振动无穷无尽的服务，但是当屏幕关闭时振动停止。添加正确的广播接收器后，我注意到在屏幕打开或关闭后我根本无法播放重复振动。下面的示例简单代码：

```
//VibratingService class
Vibrator mVibrator;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    mVibrator = (Vibrator) getSystemService(VIBRATOR_SERVICE);

    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            vibrate();
        }
    }, filter);

    vibrate();
    return START_STICKY;
}

@Override
public void onDestroy() {
    mVibrator.cancel();
    super.onDestroy();
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

private void vibrate() {
    Log.d("TAG", "vibrate");
    mVibrator.vibrate(new long[] { 1000, 500 }, 0); //doesn't work
    //mVibrator.vibrate(new long[] { 1000, 500 }, -1); //works
} 
```

最奇怪的是，当振动方法中的*重复*参数设置为 -1（不重复）时振动起作用，但设置为其他值时不起作用。

任何想法，解决方法？或者也许它只适用于其他手机？我在 Google Nexus 和 4.1.2 Android 上运行它

编辑：

经过一些测试，我确定：

*   如果它们在屏幕关闭之前停止振动将正确启动（但不是在 onReceive - 这似乎为时已晚）
*   “系统振动”（例如解锁屏幕时）可让振动在下一个屏幕打开/关闭时正确启动。直到下一个“休息”，依此类推
*   （edit2） - 这肯定与模式有关 - 振动（长毫秒）没有这样的问题 - 一切正常

如果我没有找到任何“正常”的解决方案，我可能只需要创建自己的 Vibrator 类......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:41:01.290

我仍然不确定是什么导致了这种奇怪的行为，或者是否在其他手机型号上发生这种情况，但下面是我的简单 MyVibrator 类的代码，它在屏幕打开和关闭后工作，如果其他人有这个问题并且没有提供更好的解决方案。

```
public class MyVibrator {

Vibrator mVibrator;
Handler mHandler = new Handler();

boolean mIsVibrateOn;
private long mVibrateOnLength;
private long mVibrateOffLength;

private Runnable mVibrateRunnable = new Runnable() {
    @Override
    public void run() {
        if (mIsVibrateOn) {
            mVibrator.vibrate(mVibrateOnLength);
            postVibrateRunnable(mVibrateOnLength + mVibrateOffLength);
        } else {
            mVibrator.cancel();
        }
    }
};

public MyVibrator(Context context) {
    mVibrator = (Vibrator) context
            .getSystemService(Context.VIBRATOR_SERVICE);
}

public void vibrate(long vibrateOn, long vibrateOff) {
    mVibrateOnLength = vibrateOn;
    mVibrateOffLength = vibrateOff;
    mIsVibrateOn = true;
    postVibrateRunnable(0);
}

public void stopVibrating() {
    mIsVibrateOn = false;
    mHandler.removeCallbacks(mVibrateRunnable);
    mVibrator.cancel();
}

private void postVibrateRunnable(long delay) {
    mHandler.removeCallbacks(mVibrateRunnable);
    mHandler.postDelayed(mVibrateRunnable, delay);
} 
```

}

它尚未经过彻底测试，但到目前为止它似乎运行良好。通过一些工作可以很容易地改变它以使用更长的模式

# php - Expression web 不翻译 php 代码

> ID：13643672
> 
> 赞同：0
> 
> 时间：2012-11-30T10:47:37.777
> 
> 标签：php, web

嗨！

我用 Expression web 4 开发人员环境编写了一个网站。我在侧面使用 php srcipt。当我在我的网站的浏览器中观看时。php 代码未翻译。并且不起作用。我使用 xampp。服务器正在运行。如果我将网站文件复制到本地主机。我在有效的浏览器中打开它。

如何在 Expression Web 中设置它？所以如果我运行我的网站，它会在本地主机上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T18:05:32.073

有两种选择可以尝试。如果您使用内部开发服务器来预览您的站点，您需要将路径添加到您的 php-cgi.exe 可执行文件。您可以通过转到 Expression Web 中的工具菜单并单击应用程序选项来执行此操作。常规选项卡底部的路径。默认路径在 C:\xampp\php\php-cgi.exe

另一种（可能是首选）方法是在 Apache 的文件夹中创建站点（默认为 C:\xampp\htdocs）。然后进入 Expression Web 中的站点菜单并选择站点设置。单击“预览”选项卡，然后在底部单击“使用此网站的自定义 URL 进行预览”旁边的单选按钮，然后输入您网站的路径。当然，在预览站点之前，请确保 Apache 服务正在 XAMPP 控制面板中运行。

希望这可以帮助。

# php - wordpress - 如何获取 jquery 幻灯片标题和标题

> ID：13643677
> 
> 赞同：2
> 
> 时间：2012-11-30T10:47:45.663
> 
> 标签：php, jquery, wordpress, title, caption

我是 PHP 的初学者，所以对于你们中的一些人来说，这个问题可能很荒谬。

我想从 jquery 滑块中获取图像标题和标题。（Themeforest Delight 主题 - [http://www.pixedelic.com/themes/delight/ ），以与 (](http://www.pixedelic.com/themes/delight/) [http://themes.themegoods.com/dk_wp/](http://themes.themegoods.com/dk_wp/) )中相同的方式显示它们。

我几乎尝试了一切。

在此先感谢您的帮助。

这是标题中的代码：

```
<?php
function default_bg(){
    if(get_pix_option('pix_general_background')=='slideshow'){ ?>
        <div class="pix_slide" data-position="fixed" data-top="0" data-bottom="not">
            <?php 
            $slide_general = get_pix_option('pix_array_slide_general_');
            foreach ($slide_general as $slide) {
                echo '<div data-src="'. $slide .'" data-thumb="'. get_pix_thumb($slide, 'exTh') .'" data-content="'. get_pix_content($slide) .'"></div>';
            }

            ?> 
```

我找到了一些脚本，可以获取内容，但无法实现。

这里是：

```
content: jQuery('#pix_credits_pictures').html(),
            events: {
                show: function(event, api) {
                    api.set('content.text', jQuery('#pix_credits_pictures').html());
                }
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:41:04.660

您将需要修改 jQuery 滑块以包含图像的自定义属性以包含标题和标题的方式。就像是：

```
<?php
    $slide_captions = array("caption1","caption2"...);
    $slide_title = array("title1","title2"...);
?>

<?php
    function default_bg(){
    if(get_pix_option('pix_general_background')=='slideshow'){ ?>
        <div class="pix_slide" data-position="fixed" data-top="0" data-bottom="not">
        <?php 
            $slide_general = get_pix_option('pix_array_slide_general_');
            $c = 0;
            foreach ($slide_general as $slide) {
                echo '<div data-src="'. $slide .'" data-thumb="'. get_pix_thumb($slide,     'exTh') .'" data-content="'. get_pix_content($slide) .'" image_title="'.$slide_title [$c].'" image_caption="'.$slide_captions[$c].'" class="slide_item"></div>';         
                $c++;
            }
?> 
```

您可以实现一个更优雅的解决方案来“存储”标题和说明而不是数组，我想这取决于您的插件的工作方式以及它如何存储图像。

接下来，您可以使用 jQuery 访问标题和说明，如下所示：

```
var image_title= $('.slide_item').attr('slide_title');
var image_caption= $('.slide_item').attr('image_caption'); 
```

显然，您必须决定在何处以及何时使用标题，但这就是您访问它们的方式。最好的方法可能是修改活动图像事件上的滑块库。

# c# - 使用 UserControl 内容更改 System.Windows.Window 大小

> ID：13643679
> 
> 赞同：0
> 
> 时间：2012-11-30T10:47:53.867
> 
> 标签：c#, wpf, user-controls, resize, window

我得到了一个在窗口中显示的 UserControl，代码如下：

```
loadingWindow = new System.Windows.Window
{
    Title = "Loading",
    Content = new Loading(),
};
loadingWindow.ShowDialog(); 
```

其中 Loading 类是一个 UserControl。我找不到如何调整窗口大小（它在屏幕上看起来非常大）。

更改 UserControl 的大小不起作用。

任何的想法 ？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:50:45.917

使用`loadingWindow.Width`和`loadingWindow.Height`

或者`.size`

# python - ImportError：无法导入名称 BaseHTTPRequestHandler

> ID：13643680
> 
> 赞同：0
> 
> 时间：2012-11-30T10:47:56.437
> 
> 标签：python

我尝试从[python wiki](http://wiki.python.org/moin/BaseHttpServer)运行第一个示例，当我尝试运行它时：

```
$ python BaseHttpServer.py 
```

我收到一个错误**AttributeError: 'module' object has no attribute 'BaseHTTPRequestHandler'**。

我在 Linux Mageia 2 64 位的 Python 2.7.3 上对其进行了测试：

```
Traceback (most recent call last):
  File "BaseHTTPServer.py", line 9, in <module>
    import BaseHTTPServer
  File "/home/vanveber/BaseHttpServer/BaseHTTPServer.py", line 14, in <module>
    class MyHandler(BaseHTTPServer.BaseHTTPRequestHandler):
AttributeError: 'module' object has no attribute 'BaseHTTPRequestHandler' 
```

它在 Windows 7 64 位上的 Python 2.7.3 上

```
Traceback (most recent call last):
  File "BaseHTTPServer.py", line 11, in <module>
    from BaseHTTPServer import BaseHTTPRequestHandler
  File "C:\BaseHttpServer\BaseHTTPServer.py", line 11, in <module>
    from BaseHTTPServer import BaseHTTPRequestHandler
ImportError: cannot import name BaseHTTPRequestHandler 
```

**但！**

1.  BaseHttpServer 是**标准 Python 库**中的一个类。
2.  **如果我在 Windows 上**从 Python GUI 编写并运行此代码，它可以正常工作！

什么是问题，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:50:54.810

**解决方案：重命名python文件。**

**说明：** BaseHTTPServer 是标准库中的一个模块。当你的本地目录中有一个名为 BaseHTTPServer.py 的 python 文件时，你会隐藏标准库模块，并且你不能再导入它，因为语句

```
import BaseHTTPServer 
```

不会导入标准库模块，而是本地 BaseHTTPServer.py 模块。

# javascript - 带有动态标记的动态信息窗口

> ID：13643681
> 
> 赞同：0
> 
> 时间：2012-11-30T10:47:58.953
> 
> 标签：javascript, json, google-maps-api-3, google-maps-markers, infowindow

我之所以写，是因为我做了一个脚本，用json数据来创建多个动态标记，而且它可以工作！现在我正在尝试将 InfoWindow 添加到每个标记，但不起作用。我的代码是：

```
 $.ajax({
    type:'GET',
    url:"locali_json.php"+urlz,
    success:function(data){ 
          var json = JSON.parse(data);
          for (var i=0; i<json.length; i++) {
            point = new google.maps.LatLng(json[i].latitudine,json[i].longitudine);
            contentString = json[i].id_locale;
            addMarkers(point,contentString);
          }
    }
})}

 function addMarkers(point,contentString) {  
 marker = new google.maps.Marker({
    position: point,
    map: map
 });
 infowindow = new google.maps.InfoWindow({
                 content: contentString
             });
 markers.push(marker); // markers is an array
 infos.push(infowindow);  //info is an array
 for(var j=0; j<markers.lenght; j++){
  google.maps.event.addListener(marker, 'click', function() {
                infos[j].open(map,markers[j]);})

  }} 
```

有人有什么建议吗？或者看看哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:30:50.027

你不会在 javascript 控制台中得到 javascript 错误吗？

```
for(var j=0; j<markers.lenght; j++){
 google.maps.event.addListener(marker, 'click', function() {
               infos[j].open(map,markers[j]);})
 }
} 
```

应该是：

```
for(var j=0; j<markers.length; j++){
 google.maps.event.addListener(markers[j], 'click', function() {
             infos[j].open(map,markers[j]);})
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T06:53:19.607

我是这样做的，你可以试试。包括一个定制的信息窗口。

**索引.cshtml**

```
@{
    Layout = null;
}

<html>
<head> 
    <style>
        #map-canvas {
            margin: 0;
            padding: 0;
            height: 400px;
            max-width: none;
        }
        .gm-style-iw {

            width: 350px !important;
            /*top: 0px !important;
            left: 0px !important;
            background-color: #fff;
            box-shadow: 0 1px 6px rgba(178, 178, 178, 0.6);
            border: 1px solid rgba(72, 181, 233, 0.6);
            border-radius: 10px 10px 10px 10px;*/
        }

        #iw-container {
            margin-bottom: 10px;
        }

            #iw-container .iw-title {
                font-family: 'Open Sans Condensed', sans-serif;
                font-size: 22px;
                font-weight: 400;
                padding: 20px;
                background-color: #39ac73;
                color: white;
                margin: 2px;
                border-radius: 2px 2px 0 0;
            }

            #iw-container .iw-content {
                font-size: 13px;
                line-height: 18px;
                font-weight: 400;
                margin-right: 1px;
                padding: 15px 5px 20px 15px;
                max-height: 200px;
                overflow-y: auto;
                overflow-x: hidden;
            }

        #map-canvas img {
            max-width: none !important;
        }
        .iw-subTitle {
            font-size: 16px;
            font-weight: 700;
            padding: 5px 0;
        } 
        .infoDiv {
            height: 200px;
            width: 300px;
            -webkit-user-select: none;
            background-color: white;
        }
        .iw-bottom-gradient {
            position: absolute;
            width: 326px;
            height: 25px;
            bottom: 10px;
            right: 18px;
            background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
            background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
            background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
            background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
        }
    </style>
</head>
<body> 
        <div id="map-canvas" style="width: 1800px; height: 1500px">
        </div>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=APIKEY"></script>
        <script type="text/javascript">
             var markers = @Html.Raw(ViewBag.Markers);
             window.onload = function () {
                 var mapOptions = {
                     center: new google.maps.LatLng(markers[0].lat, markers[0].lng),
                     zoom: 8,
                     mapTypeId: google.maps.MapTypeId.ROADMAP
                 };  
                var infoWindow = new google.maps.InfoWindow();

                 var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
                 for (i = 0; i < markers.length; i++) {
                     var data = markers[i]
                     var myLatlng = new google.maps.LatLng(data.lat, data.lng);

                     var marker = new google.maps.Marker({
                         position: myLatlng,
                         map: map,
                         title: data.title,
                         description: data.description,
                         icon: "http://maps.google.com/mapfiles/ms/icons/green-dot.png",
                         animation: google.maps.Animation.DROP,

                     }); 
                     // Add the circle for this city to the map.
                     var cityCircle = new google.maps.Circle({
                         strokeColor: '#FFFFFF',
                         strokeOpacity: 0.8,
                         strokeWeight: 2,
                         fillColor: '#FFFFFF',
                         fillOpacity: 0.35,
                         map: map,
                         center: myLatlng,
                         radius: 19999.45454,
                         position: myLatlng,
                         draggable: false
                     });
                     (function (marker, data) {
                         google.maps.event.addListener(marker, "click", function (e) {
                              infoWindow.setContent('<div id="iw-container">' +
                                 '<div class="iw-title">' + data.title + "</div>" + '<div class="iw-content">' 
                                 + "<p>" + data.description + "</p>"+'<img src="http://maps.marnoto.com/en/5wayscustomizeinfowindow/images/vistalegre.jpg" alt="Porcelain Factory of Vista Alegre" height="115" width="83">'
                                 +'<div class="iw-bottom-gradient"></div>');
                             //infoWindow.setContent(data.title);
                             //infoWindow.setContent(data.description);
                             infoWindow.open(map, marker);

                         });

                     })(marker, data);
                 }
             }
        </script> 
</body>
</html> 
```

**控制器：**

```
namespace Map.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            {
                string markers = "[";
                string conString = ConfigurationManager.ConnectionStrings["PTS"].ConnectionString;
                SqlCommand cmd = new SqlCommand("SELECT * FROM ProjeIlani");
                using (SqlConnection con = new SqlConnection(conString))
                {
                    cmd.Connection = con;
                    con.Open();
                    using (SqlDataReader sdr = cmd.ExecuteReader())
                    {
                        while (sdr.Read())
                        {
                            markers += "{";
                            markers += string.Format("'title': '{0}',", sdr["Adres"]);
                            markers += string.Format("'lat': '{0}',", sdr["Enlem"]);
                            markers += string.Format("'lng': '{0}',", sdr["Boylam"]);
                            markers += string.Format("'description': '{0}'", sdr["Aciklama"]); 
                            markers += "},";
                        }
                    }
                    con.Close();
                }

                markers += "];";
                ViewBag.Markers = markers;
                return View();
            }
        }
    }
} 
```

# matlab - MATLAB：使用不同的索引列表多次选择向量中的元素

> ID：13643689
> 
> 赞同：4
> 
> 时间：2012-11-30T10:48:27.670
> 
> 标签：matlab, matrix, octave

INPUT：一个`u`长度为 的逻辑行向量`n`，比如`[1,0,1,1,0]`; 和一个大小为 m×n 的逻辑矩阵`M`，比如`[1,0,0,1,1;0 0 0 1 1]`。

OUTPUT：一个大小为 m×n 的逻辑矩阵，其第一行是通过将矩阵的第一行`M`作为“选择器”应用得到的，即`[1,0,0,1,0];`第二行同样是`[0 0 0 1 0]`.

行向量为 20000 长，矩阵为 30×20000。这将重复 1000 次，我想要的东西花费不到 1 秒。

我试过`repmat`,`bsxfun`和 element-wise 乘法，没有运气。猜猜有一种简单的方法可以一次“选择”这些元素，因为它们都是逻辑值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:53:21.940

The fastest I can give you is 4 seconds at the moment (on my machine). I'm not 100% sure if you've tried this or not, but here you go anyway.

I have an m-file `randbool.m` with these contents, to generate the test data.

```
function x = randbool(m,n)
x = logical(rand(m,n) < 0.5); 
```

Generate the data for testing:

```
>> u = randbool(1,20000);
>> M = randbool(30,20000); 
```

I can think of three ways to loop over the rows of M (use `bsxfun`, use `repmat`, use a loop) and two ways to pull out the elements you want (conjunction `&`, or pointwise multiplication with `.*`). The fastest is the combination of `bsxfun` and conjunction:

### Bsxfun / conjunction

```
>> tic, for i=1:1000, bsxfun(@and,u,M); end, toc
Elapsed time is 4.068684 seconds. 
```

### Bsxfun / multiplication

```
>> tic, for i=1:1000, bsxfun(@times,u,M); end, toc
Elapsed time is 4.856784 seconds. 
```

### Repmat / conjunction

```
>> tic, for i=1:1000, utmp=repmat(u,30,1); M&utmp; end, toc
Elapsed time is 7.305158 seconds. 
```

### Repmat / multiplication

```
>> tic, for i=1:1000, utmp=repmat(u,30,1); M.*utmp; end, toc
Elapsed time is 8.117164 seconds. 
```

### Looping / conjunction

```
>> tic, for i=1:1000, for j = 1:30, out(j,:)=u&M(j,:); end; end, toc
Elapsed time is 7.110872 seconds. 
```

### Looping / multiplication

```
>> tic, for i=1:1000, for j = 1:30, out(j,:)=u.*M(j,:); end; end, toc
Elapsed time is 8.322888 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:34:08.103

这看起来像一个按位和操作。也许这样的事情会起作用：

```
utemp=repmat(u,1,size(m,2));
output=M&utemp; 
```

我应该补充一点，对于这么大的矩阵，您可能会遇到内存问题。本质上，您需要 3 个 600K 元素矩阵的副本，这可能会加起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:45:29.580

其他解决方案使事情过于复杂。

您需要做的就是将未选择列中的条目归零...

```
M(:,~u)=0; 
```

而已。十个微不足道的字符。Chris Taylor 使用 bsxfun 和 @and 的解决方案有点慢，其他方法更糟。

```
octave:8> u = logical(rand(1,20000)<0.5);
octave:9> M = logical(rand(30,20000)<0.5);
octave:10> tic, for i=1:1000, N=M; N(:,~u)=0; end, toc
Elapsed time is 0.66 seconds.
octave:11> tic, for i=1:1000, N=M; N=bsxfun(@and,u,N); end, toc
Elapsed time is 0.82 seconds.
octave:12> tic, for i=1:1000, N=bsxfun(@and,u,M); end, toc
Elapsed time is 0.8 seconds. 
```

请注意，我使用“N=M”来标准化结果，因为此方法直接作用于向量，但分配并没有对时间添加任何重要的内容。

# c# - 开发一个简单的 Windows 系统托盘桌面应用程序以使用 .NET Web 服务

> ID：13643691
> 
> 赞同：30
> 
> 时间：2012-11-30T10:48:32.620
> 
> 标签：c#, .net, web-services, air, system-tray

我需要开发一个简单的 Windows 系统托盘桌面应用程序来使用 .NET Web 服务，但我精通 PHP，并且我在桌面应用程序方面的背景很少。您建议我使用什么平台，最好是学习曲线非常低的平台？

系统托盘应用程序将显示（在上下文菜单中）从 .NET Web 服务接收到的新事件通知计数器；并且还将所有事件日志写入文本文件。

我已经在考虑 Adob​​e AIR 或 C# .NET，但我想知道是否有更好的选择可以让我快速学习来开发应用程序。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-30T12:13:06.533

将其全部保存在 .NET 中。您可以轻松地编写一个 Windows 窗体应用程序来显示托盘图标并在 Web 服务中发生某些事情时显示通知（您可能需要一个计时器来进行轮询）。

周围有很多文章会告诉你如何做到这一点。这是一个可以帮助您入门的方法：

[http://www.codeproject.com/Articles/290013/Formless-System-Tray-Application](http://www.codeproject.com/Articles/290013/Formless-System-Tray-Application)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-04T12:04:46.457

我假设你必须使用 WPF 和 MVVM，所以这将是一个非常棒的应用程序。

我发现的最好的例子就是那个

**WPF NotifyIcon** [http://www.codeproject.com/Articles/36468/WPF-NotifyIcon](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)

# android - 在 achartengine 中为 x 轴使用特殊的日期格式

> ID：13643692
> 
> 赞同：0
> 
> 时间：2012-11-30T10:48:38.773
> 
> 标签：android, achartengine

我正在使用 achartengine 及时可视化一些数据。TimeChart 和 TimeSeries 的使用是完美的，但我想得到目前似乎不可能的结果。

目前我正在使用这个：

```
GraphicalView view = ChartFactory.getTimeChartView(this, dataset, renderer, "MMM"); 
```

这会在 x 轴上产生以下输出：

```
nov.          apr.        aug. 
```

但我想要每个月的标记，并且只有每个月的第一个字符，如下所示：

```
N  D  J  F  M  A  M  J  J  A  S  O 
```

关于如何做到这一点的想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:52:13.527

我自己找到了解决方案，我在自定义 TimeChart 类中覆盖了 drawXLabels 方法。

```
private class CustomTimeChart extends TimeChart {

        public CustomTimeChart(XYMultipleSeriesDataset dataset,
                XYMultipleSeriesRenderer renderer) {
            super(dataset, renderer);
        }

        @Override
        protected void drawXLabels(List<Double> xLabels,
                Double[] xTextLabelLocations, Canvas canvas, Paint paint,
                int left, int top, int bottom, double xPixelsPerUnit,
                double minX, double maxX) {

            int length = xLabels.size();
            if (length > 0) {
                boolean showLabels = mRenderer.isShowLabels();
                boolean showGridY = mRenderer.isShowGridY();
                DateFormat format = new SimpleDateFormat("MMMM");
                for (int i = 0; i < length; i++) {
                    long label = Math.round(xLabels.get(i));
                    float xLabel = (float) (left + xPixelsPerUnit
                            * (label - minX));
                    if (showLabels) {
                        paint.setColor(mRenderer.getXLabelsColor());
                        canvas.drawLine(xLabel, bottom, xLabel, bottom
                                + mRenderer.getLabelsTextSize() / 3, paint);
                        drawText(canvas, format.format(new Date(label)).substring(0, 1).toUpperCase(Locale.getDefault()),
                                xLabel, bottom + mRenderer.getLabelsTextSize()
                                        * 4 / 3, paint,
                                mRenderer.getXLabelsAngle());
                    }
                    if (showGridY) {
                        paint.setColor(mRenderer.getGridColor());
                        canvas.drawLine(xLabel, bottom, xLabel, top, paint);
                    }
                }
            }
            drawXTextLabels(xTextLabelLocations, canvas, paint, true, left,
                    top, bottom, xPixelsPerUnit, minX, maxX);
        } 
```

还要确保在 XYMultipleSeriesRenderer 实例上使用 setXLabels(int i) 来设置要在 x 轴上显示的月份数。

# f# - 自定义 F# 编译器字符串检查

> ID：13643695
> 
> 赞同：3
> 
> 时间：2012-11-30T10:48:41.670
> 
> 标签：f#

是否可以“扩展” F# 编译器以进行自定义编译时字符串检查？我正在考虑类似于`StringFormat`使用`sprintf`等时对字符串的检查。当我说“扩展”时，我并不是说构建编译器的自定义版本，我的意思是使用现有的支持技术。

在我的脑海中，你可能有一种`RegexFormat`类型。您提供正则表达式，编译器将使用正则表达式进行静态分析。例如

```
//Setup RegexFormat with IP address regex and type abbreviation IpRegexFormat?
//Compile error.  ipAddress expects IpRegexFormat!
let ip = ipAddress "192.168.banana.1" 
```

如果不是，也许这对我来说是一个类型提供者:) - 如果整个事情是一个糟糕的主意，请告诉我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T10:53:35.090

我们在 Fsharpx 中有一个 Regex 类型的提供程序。

以下是一些[示例](https://github.com/fsharp/fsharpx/blob/master/tests/FSharpx.TypeProviders.Regex.Tests/Regex.Tests.fs)：

```
type PhoneRegex = Regex< @"(?<AreaCode>^\d{3})-(?<PhoneNumber>\d{3}-\d{4}$)">

[<Test>] 
let ``Can call typed IsMatch function``() =      
    PhoneRegex.IsMatch "425-123-2345"
    |> should equal true

[<Test>] 
let ``Can call typed CompleteMatch function``() =      
    PhoneRegex().Match("425-123-2345").CompleteMatch.Value
    |> should equal "425-123-2345"

[<Test>] 
let ``Can return AreaCode in simple phone number``() =
    PhoneRegex().Match("425-123-2345").AreaCode.Value
    |> should equal "425"

[<Test>] 
let ``Can return PhoneNumber property in simple phone number``() =
    PhoneRegex().Match("425-123-2345").PhoneNumber.Value
    |> should equal "123-2345" 
```

这并不完全是您要寻找的东西，但我想您可以轻松地采用此类型提供程序并使用您的静态文字规则对其进行自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:16:49.387

我认为这里真正的答案是使用 DU -

```
type ip = 
|IP of byte * byte * byte * byte 
member x.ToString() = 
    match x with
    |IP(a,b,c,d) -> sprintf "%i.%i.%i.%i" 
```

那么编译时检查就是

```
let actualip = IP(1uy,1uy,1uy,1uy).ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:23:42.187

`Uri`最简单的解决方案是执行 BCL 对,等所做的操作，`Guid`并创建一个解析字符串输入的类型。

我认为修改编译器虽然很有趣，但却是矫枉过正（如您所说，这是一个“可怕的想法”）。

以前也有人问过类似的[问题。](https://stackoverflow.com/questions/9417150/compile-time-constraints-for-strings-in-f-similar-to-units-of-measure-is-it)

# delphi - 如何识别在 Delphi XE2 项目中使用（外部）单元的位置

> ID：13643696
> 
> 赞同：1
> 
> 时间：2012-11-30T10:48:41.200
> 
> 标签：delphi, delphi-xe2

我使用 JCL Project Analyzer 来查看我的项目中使用了哪些单元，以便“清理”它。但是，对于大型项目，我并没有真正看到依赖关系，因为我看到了单位名称，但没有看到它们的使用位置。我使用了地图文件，但没有成功。是否有任何免费工具可用于使用单位及其使用地点？我尝试了 GExpert 项目依赖项但没有成功： 示例：我在项目分析器中有 JCLInifiles，但在 GExpert 项目依赖项中看不到它。

# delphi - 我如何计算出用于 TListBox.ScrollWidth 的值？

> ID：13643698
> 
> 赞同：8
> 
> 时间：2012-11-30T10:48:57.187
> 
> 标签：delphi, winapi

我正在尝试研究如何设置`ScrollWidth`a`TListBox`来控制水平滚动条。这是我的第一次尝试：

```
program ListBoxSizing;

uses
  Math, Forms, StdCtrls;

var
  Form: TForm;
  ListBox: TListBox;

procedure BuildForm;
begin
  //Form.Font.Size := 9;
  Form.ClientWidth := 200;
  Form.ClientHeight := 100;
  ListBox := TListBox.Create(Form);
  ListBox.Parent := Form;
  ListBox.SetBounds(0, 0, Form.ClientWidth, Form.ClientHeight);
  ListBox.Items.Add('ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ');
end;

procedure SetScrollWidth;
var
  i, MaxWidth: Integer;
begin
  MaxWidth := -1;
  for i := 0 to ListBox.Items.Count-1 do
    MaxWidth := Max(MaxWidth, ListBox.Canvas.TextWidth(ListBox.Items[i]));
  if MaxWidth<>-1 then
    ListBox.ScrollWidth := MaxWidth;
end;

begin
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm, Form);
  BuildForm;
  SetScrollWidth;
  Application.Run;
end. 
```

这是水平滚动条尽可能向右移动时的结果：

![在此处输入图像描述](../Images/dc488b576dc3b9af79a52054fc22bbcb.png)

注意最后一个字符的最后一部分是如何被砍掉的。

现在，如果我们取消注释更改表单字体大小的行，它看起来像这样：

![在此处输入图像描述](../Images/83e5b00093bc63b2aae0f6e2743dcd2c.png)

现在，似乎在随后对`TextWidth`.

`ScrollWidth`所以，我的问题是，根据列表框的当前内容，我需要使用什么代码才能准确设置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T11:42:39.010

```
procedure SetScrollWidth;
var
  I, MaxWidth: Integer;
begin
  MaxWidth := -1;
  // assign control's font to canvas
  ListBox.Canvas.Font := ListBox.Font;
  for I := 0 to ListBox.Items.Count - 1 do
    MaxWidth := Max(MaxWidth, ListBox.Canvas.TextWidth(ListBox.Items[I]));
  // consider non-client area
  if MaxWidth <> -1 then
    ListBox.ScrollWidth := MaxWidth + ListBox.Width - ListBox.ClientWidth;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:23:27.560

```
program Project2;

uses
  Math, Forms, StdCtrls,Windows,Graphics;

var
  Form: TForm;
  ListBox: TListBox;

procedure BuildForm;
begin
  //Form.Font.Size := 9;
  Form.ClientWidth := 200;
  Form.ClientHeight := 100;
  ListBox := TListBox.Create(Form);
  ListBox.Parent := Form;
  Listbox.Font.Size := 40;
  ListBox.SetBounds(0, 0, Form.ClientWidth, Form.ClientHeight);
  ListBox.Items.Add('ABCDEFGXXXXXXXXXXXXOXOXYQASEOOWW');
  ListBox.Items.Add('ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ');
  ListBox.Items.Add('ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ111111111111111111111111111111111111111O');

end;

function GetRealFontWidth(fnt: TFont; const text:string): Integer;
var
   dc: hdc;
   tsize : Windows.TSize;
   oldObj : Cardinal;
begin
   dc := GetDC(0);
   oldObj := SelectObject(DC, fnt.Handle);
   GetTextExtentPoint32(dc, PChar(text), Length(text), tsize);
   SelectObject(DC, oldObj);
   ReleaseDC(0, DC);
   Result := tsize.cx;
end;

procedure SetScrollWidth;
var
  i, MaxWidth: Integer;
begin
  MaxWidth := -1;
  for i := 0 to ListBox.Items.Count-1 do
    MaxWidth := Max(MaxWidth, GetRealFontWidth (ListBox.Font,ListBox.Items[i]));
  if MaxWidth<>-1 then
    ListBox.ScrollWidth := MaxWidth + 4;
end;

begin
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm, Form);
  BuildForm;
  SetScrollWidth;
  Application.Run;
end. 
```

# wcf - 启用对现有 WCF RIA 服务的 WPFApplication 访问

> ID：13643699
> 
> 赞同：0
> 
> 时间：2012-11-30T10:49:01.170
> 
> 标签：wcf, silverlight-4.0, wcf-ria-services, silverlight-toolkit

我有一个大的（对我来说太大了，大约 50k 行）Silverlight 应用程序，由一位前同事编写。它写得真的（真的）很糟糕，所以我几乎不会改变/触摸任何东西。

我想轻松地从 WFC 命令行应用程序访问他的 WCF RIA 服务。SL 应用程序的 Web 部分中有近 30 个域服务类。

我安装了 SL 和 WCF-RIA 工具包。我在 web.config 中添加了这些行，但编译器无法识别`<domainServices>`.

```
<domainServices>
  <endpoints>
    <add name="OData" type="System.ServiceModel.DomainServices.Hosting.ODataEndpointFactory, System.ServiceModel.DomainServices.Hosting.OData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add name="Soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </endpoints>
</domainServices> 
```

从新的命令行应用程序中，我在我的解决方案中看不到任何服务。知道我缺少什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:54:21.583

也许问题取决于您尝试添加服务引用的方式：自动发现不起作用并且您没有 .svc 文件。你应该使用类似 http://[hostname]/[namespacename]-[classname].svc 但我建议看看这些文章：http: [//blogs.msdn.com/b/saurabh/archive/2009 /11/23/understanding-the-wcf-in-wcf-ria-services.aspx](http://blogs.msdn.com/b/saurabh/archive/2009/11/23/understanding-the-wcf-in-wcf-ria-services.aspx)和 [http://blogs.msdn.com/b/brada/archive/2009/11/22/ria-services-a-domainservice -is-a-wcf-service-add-service-reference.aspx](http://blogs.msdn.com/b/brada/archive/2009/11/22/ria-services-a-domainservice-is-a-wcf-service-add-service-reference.aspx)

给出详细的见解

# python-sphinx - 重组文本中的复杂表格格式

> ID：13643700
> 
> 赞同：3
> 
> 时间：2012-11-30T10:49:13.653
> 
> 标签：python-sphinx, restructuredtext

我正在尝试生成一个复杂的表格，其中的行和列跨越多个单元格。下面是我的 reST 代码的快照。

![休息快照](../Images/a5fb789ff3471adad32a100e5df674b1.png)

但是，从 Sphinx 生成的 Latex 生成的 PDF 输出不能正确表示格式。

![通过 Latex 快照输出 PDF](../Images/fe54ee4e543afc4ad0a64ff011801bb5.png)

请让我知道我的 reST 格式可能有什么问题来纠正这个问题？

根据评论，HTML 快照附在下面，它是正确的。

![HTML 快照](../Images/692acf520a971f58edb22f6ee2c0d8a1.png)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:44:36.850

这是一个已知的错误：Docutils LaTeX 编写器因（某些）komplrc 表而失败。 [http://docutils.sourceforge.net/docs/user/latex.html#tables](http://docutils.sourceforge.net/docs/user/latex.html#tables)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:53:33.883

我没有尝试过，因为我不想输入整个表格，但是 rst2pdf 处理它应该没有问题。

# ios - 为什么我的手势识别器不能用于原型对象？

> ID：13643702
> 
> 赞同：4
> 
> 时间：2012-11-30T10:49:16.647
> 
> 标签：ios, storyboard

当我将 UITapGestureRecognizer 放入场景中 UITableViewCell 内的 UIView 中时，我从情节提要中收到上述错误。

知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T10:55:03.950

我不确定为什么会有限制，但我知道你为什么会收到错误。

当您`UITableViewCell`在 StoryBoard 中设计一个时，您只是在设计一个原型对象。即该对象可能永远不会真正存在。它实际上只在`tableView:cellForRowAtIndexPath:`

更好的方法是在代码中配置单元格时创建gestureRecognizer。这样你就没有这个限制了。

我也可能会看看你是否真的需要它？如果只是用一根手指轻按一下，那么最好编码`touchesEnded`或仅使用 UIButton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:44:29.813

自己找到了原因。故事板仅允许当我们有 UITableViewController 或其子类并且 tableview 内容应该是“静态单元格”而不是默认的“动态原型”时。在该配置中，我可以在单元格子视图中添加手势识别器。

但这是一个限制，在我的情况下不起作用，因为我有一个非常定制的视图控制器子类而不是表视图控制器子类。似乎需要找到其他方法:(

# php - 清除按钮单击时的文本框输入

> ID：13643703
> 
> 赞同：0
> 
> 时间：2012-11-30T10:49:18.147
> 
> 标签：php, javascript, jquery

我确实有多个文本框，名为名字、姓氏、电话号码等。我想清除/刷新在按钮单击时输入的输入，称为刷新或清除。问题是这些文本中的输入框没有被刷新，因为其中的数据来自其他页面，并且当我们在其中键入一些内容时它正在刷新我的代码如下：

```
<div class="control-group">
        <input value="<?php echo $model['pros']['oppid'] ?>" name="oppid" type="hidden" id="prospectid"  />
        <label class="control-label">First Name  </label>
        <div class="controls">
            <input type="text" name="f_name" pattern="[-a-zA-Z]+" required="" title="First Name is required" value="<?php echo $model['pros']["f_name"]; ?>"  />
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">Last Name </label>
        <div class="controls">
            <input type="text" name="l_name" pattern="[-a-zA-Z]+" required="" title="Last Name is required"  value="<?php echo $model['pros']["l_name"];?>"  />
        </div>
    </div>
<div class="control-group">
        <label class="control-label">Primary phone  </label>
        <div class="controls">
<input type="tel" required="" pattern="[-0-9]+" title="Please Enter correct phone" name="pri_phone" value="<?php echo $model['pros']["pri_phone"];?>"  />
        </div>
    </div> 
```

和按钮为

```
<button class="btn">New</button> 
```

请在这方面给我建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:52:39.780

假设您的`input`元素在表单内，您的按钮也是如此，您可以使用 jQuery 执行此操作：

```
$('button.btn').click(function(e) {
    e.preventDefault();  
    $(this).parents('form').find('input[type="text"], input[type="tel"]').val('');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:51:09.537

使用以下代码：

```
$("#elementid").live('click',function(){
     $(this).parents('form').find('input[type="text"]').val('');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T07:06:39.427

您可以在 jquery 中编写代码为：

```
$('#new').live('click',function(){
   $('#fname').val('');
   $('#lname').val('');
   $('#tel').val('');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:56:16.057

如果您的按钮*不在*表单中，您可以使用以下

```
$('button.btn').click(function() {
   $('.control-group input:not(:submit)').val('');
}); 
```

这将重置`control-group`div 中的任何类型的输入，除了提交输入

如果您的重置按钮*在*表单内，那么[BenM](https://stackoverflow.com/a/13643762/871150)的答案就是您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T09:15:40.693

```
$(".clearform").live('click',function(){
     $(this).parents('form').find('input[type="text"], input[type="tel"],input[type="time"],input[type="email"],input[type="number"],input[type="date"],select').val('');
}); 
```

# c# - 是否可以在表单中将 HTML 按钮设置为默认按钮？

> ID：13643706
> 
> 赞同：4
> 
> 时间：2012-11-30T10:49:33.627
> 
> 标签：c#, javascript, asp.net, .net, html

我正在处理一个 asp.net 页面，我的页面中有几个按钮，其中一些是 asp.net 按钮，其他是 HTML`input[type=button]`元素。HTML 按钮用于进行 AJAX 调用。

当用户按下 ENTER 时，我需要将这些 HTML 按钮中的一个设置为默认按钮，但此时页面中的第一个按钮被触发。

有没有办法在我的表单上将纯 HTML 按钮设置为默认按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T11:03:04.257

试试这个 ：

```
 // JavaScript Code
   var body = document.getElementsByTagName('body')[0];
    body.onkeydown = function (e) {
        if (e.keyCode === 13) {  //enter key code
         // call your html button onclick code here
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:23:54.793

我正在使用 JQuery，所以我修改了**Mohit Pandey**答案中的代码：

```
$("body").keypress(function (event) {
    if (event.which == 13) {
        event.preventDefault();
        // my function
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:58:41.530

阅读这篇文章 [http://www.codeproject.com/Articles/35180/How-To-set-Default-Button-for-ENTER-key-pressed-ev](http://www.codeproject.com/Articles/35180/How-To-set-Default-Button-for-ENTER-key-pressed-ev)

你可以用这种方式使用它

```
<form id="form1" runat="server" defaultbutton="Button1" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:51:59.357

你能不能把表单放在面板内并使用默认按钮属性

```
<asp:Panel runat="server" DefaultButton="btnSomething"> 
...
</asp:Panel> 
```

# php - php包含禁止

> ID：13643708
> 
> 赞同：0
> 
> 时间：2012-11-30T10:49:34.287
> 
> 标签：php, include

我正在尝试在包含的文件中包含一个文件我想要包含它的点是在 switch 语句中。出于某种原因，它不起作用，它让我发疯。据我所知，在包含中包含或在大括号中放置包含是没有障碍的。我得到的具体错误是

```
Parse error: syntax error, unexpected T_INCLUDE, expecting T_CASE or T_DEFAULT or '}' i 
```

任何人都可以发现错误吗？对此有一些禁止吗？

第一个文件。

```
<?php include("includes/getdata.php"); ?> 
```

第一个包含的文件

```
<?php
//some code
switch ($action)
{
?>
<?php include("words.php"); ?>
<?php
}
//rest of code
?> 
```

包含在包含（words.php）中

```
<?php
case 'research':
$word = "web";
break;
//various other cases

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:52:57.607

Just read the error message again.

```
switch (...) {
    include ...
} 
```

This is invalid. You need a `case` or `default` keyword before any other code in a `switch` statement:

```
switch (...) {
    case ... :
        include ...
} 
```

What you're trying to do doesn't work and is a bad idea to begin with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:52:08.313

wrong syntax of [switch case](http://php.net/manual/en/control-structures.switch.php)

```
switch(expression)
{
  case 'some value' : //you code; break;
  default: // default code
} 
```

so you must need to add `default: include_once 'word.php'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:52:42.510

Why are you consistently opening and closing PHP blocks?

```
//some code
switch ($action) {
    include("words.php");
}
//rest of code 
```

This is wrong because you've not stated a case for the action.

```
//some code
switch ($action) {
    case 'A': // This is mandatory
      include("words.php");
      break;
}
//rest of code 
```

# jakarta-ee - EJB - 实体管理器的依赖注入错误

> ID：13643711
> 
> 赞同：0
> 
> 时间：2012-11-30T10:49:43.720
> 
> 标签：jakarta-ee, ejb, ejb-3.0

我收到此错误：

```
... 32 more
Caused by: java.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManagerFactory. 
```

我想要做的是创建一个实体类 User 和一个会话 Bean 来访问 User..

执行时出现错误：

```
User result = null;
String q = "SELECT user FROM " + User.class.getName() + " user WHERE user.username LIKE :username";
Query query = entityManager.createQuery(q).setParameter("username", username);
List<User> users = query.getResultList();
if (users.size() > 0) {
    result = users.get(0);
    System.out.println(result);
} 
```

persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="DS3-ejbPU" transaction-type="JTA">
    <jta-data-source>db_ds_hw3</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

编辑1：

注入代码：

```
 @PersistenceContext(unitName = "DS3-ejbPU")
    private EntityManager em; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:59:32.420

您很可能[在重新部署时遇到了 GlassFish 错误，](http://java.net/jira/browse/GLASSFISH-17295)该错误已在 4.0 版中修复（尚未发布）。

目前，如上述链接中所述，解决方法是取消部署 - 重新部署应用程序。

* * *

**相关**：

[java.lang.IllegalStateException：尝试对关闭的 EntityManagerFactory 执行操作](https://stackoverflow.com/questions/9947293/java-lang-illegalstateexception-attempting-to-execute-an-operation-on-a-closed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T22:10:06.640

我也遇到过这个错误，重新加载**域**帮助了我。在控制台输入：

```
asadmin restart-domain 
```

# php - 长时间轮询数据库数据？

> ID：13643713
> 
> 赞同：8
> 
> 时间：2012-11-30T10:49:49.517
> 
> 标签：php, jquery, mysql, ajax, long-polling

经过一周的谷歌搜索和搜索。我什至很难找到一个关于从数据库表而不是从名为 data.text 的平面文本文件中进行长轮询的教程。目前，我在 data.text 中手动编写任何内容，它会立即出现在浏览器中。

这就是问题：使用数据库进行长轮询？即使在 StackOverflow 中也没有正确回答。（我在这里找到了很多，但徒劳无功。）这个例子也是 [MySQL 的 filemtime 替代品](https://stackoverflow.com/questions/12460672/filemtime-alternative-for-mysql)

**如何修改 getdata.php 以使其能够从数据库中获取数据？**

```
 $sql=mysqli_query($database,"SELECT * FROM messages  where time>=$curr_date ORDER by      time DESC");
  while($row=mysqli_fetch_array($sql)){
    $messages=$row['messages'];
    $id=$row['id'];
    echo $messages;
  } 
```

消息表如下

```
 id     fro   to  mesg      time  status  last_modified 
```

* * *

我在这里列出一个例子。在此示例中，使用了三个文件。

1.  索引.html
2.  获取数据文件
3.  数据.文本

是否需要制作第四个文件来从数据库（mysql）获取数据？如果不是，那么在 getdata.php 或 data.text 中需要进行哪些类型的更改才能使用数据库中的动态数据？

这是我的 Javascript

```
<script type="text/javascript" charset="utf-8">

        var timestamp = null;

        function waitformsg() {
            $.ajax({
                type:"Post",
                url:"getdata.php?timestamp="+timestamp,
                async:true,
                cache:false,
                success:function(data) {
                    var json = eval('(' + data + ')');
                    if(json['msg'] != "") {
                        $("#messages").append(json['msg']);

                    }
                    timestamp = json["timestamp"];

                    setTimeout("waitformsg()", 1000);
                },
                error:function(XMLhttprequest, textstatus, errorthrown) {
                    alert("error:" + textstatus + "(" + errorthrown + ")");
                    setTimeout("waitformsg()", 15000);
                }

                });

        }
        $(document).ready(function() {

            waitformsg();
        });
    </script> 
```

这是 getdata.php 文件

```
<?php
include("../model/includes/classes.php");

$filename='data.php';

$lastmodif=isset($_GET['timestamp'])?$_GET['timestamp']:0;
$currentmodif=filemtime($filename);

while($currentmodif<=$lastmodif){
    usleep(10000);
    clearstatcache();
    $currentmodif=filemtime($filename);
}

$response=array();
$response['msg']=file_get_contents($filename);
$response['timestamp']=$currentmodif;
echo json_encode($response);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:48:18.100

我最近做了一些非常相似的事情。我确实使用了 jQuery .ajax 调用而不是通用的 XMLhttprequest，但想法是一样的：

```
recentFunction(container, lastDate){
    var lastDate = "";

    return $.ajax({
        type: "POST",
        url: "getData.php",
        cache: false,
        data: { 'request': 'recent',
            'param': lastDate },
        dataType: "json",
        success: function(data){
            if(data != null){
                $.each(data, function(key, value){
                    if(key == 0){
                        lastDate = value['date_added'];
                    }
                    var html = "some html here";
                    // append html to dom element here
                                // and delete any old items here if needed
                });
            }
        },
        complete: function(){
            setTimeout(function(){recentFunction(container, lastDate)}, 7000);
        }
    });
} 
```

在**getData.php**文件中，我使用 where 子句进行查询，该子句从 db 中获取比最后一个元素更新的任何项目。$lastDate 的默认值设置为 0，因此如果没有提交日期，它将返回所有项目。

```
<?php

$lastDate = 0;
$recent = array();
$recentQuery = "SELECT id, date FROM someTable WHERE date > '" . $lastDate . "'";
$recentResults = $db->query($recentQuery);

while($r = $recentResults->fetch_array(MYSQLI_ASSOC)){
      $recentMovies[] = $r;
}

echo json_encode($recentMovies);

?> 
```

# objective-c - NSPopover cannot be dragged out

> ID：13643719
> 
> 赞同：1
> 
> 时间：2012-11-30T10:50:10.497
> 
> 标签：objective-c, macos, cocoa, nstabview, nspopover

I have an `NSPopover` that contains an `NSTabView` which encloses all the popover's content view area. In this setup, I could not drag out the popover even though I've implemented `detachableWindowForPopover:` correctly in the delegate. I know I have implemented the delegate correctly because if the the tab view's size is reduced slightly (to uncover it's parent view), the popover can be dragged out into its own window.

Question is: How to make the popover can be detached by grabbing any blank area in the tab view?

Here's my object composition hierarchy

```
NSPopover 
    -> content view controller (NSViewController)
        -> the content view controller's view (NSView)
            -> NSTabView
               -> (some other views and their controllers for each tab) 
```

# c++ - gui toolkit with c++ interface and inteligent canvas support needed

> ID：13643721
> 
> 赞同：1
> 
> 时间：2012-11-30T10:50:30.527
> 
> 标签：c++, user-interface

I have a lot experience in tcl/tk, but I want to get rid of scripting languages for large projects. But tk canvas has a very big functionality which I have to replace with a good gui toolkit.

One of the features I need is a canvas on which I can create active graphical objects. For example, I have a circle which can be moved by mouse drag like this in tk:

```
 #!/usr/bin/wish8.5

    canvas .c
    pack .c
    set item [.c create oval 10 10 20 20] 

    .c bind $item <Any-Enter> ".c itemconfig current -fill red"
    .c bind $item <Any-Leave> ".c itemconfig current -fill blue"

    bind .c <ButtonPress-1> "setlast %x %y"
    bind .c <B1-Motion> "moveit %x %y"

    set lastx 0
    set lasty 0

    proc setlast { x y } { 
        global lastx
        global lasty
        set lastx $x
        set lasty $y
    }   

    proc moveit { x y } { 
        global lastx
        global lasty
        .c move current [expr $x-$lastx] [expr $y-$lasty]
        set lastx $x
        set lasty $y
    } 
```

Any other toolkit I found needs a lot of handcrafted work for this. Typically you have to find out yourself which item on a canvas is under the mouse which is a very large amount of work for complex shapes like polygons.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:03:04.927

你试过 GTK+ 或 QT 吗？嗯，QT 主要是一个开发平台，而不是一个 GUI 库，但你也可以尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T12:56:24.480

我尝试了[C++/Tk](http://cpptk.sourceforge.net/ "C++/Tk")，但离开了那条路。它不支持所有 Tk，例如不支持笔记本和树列表等特色小部件，或者您无法将参数传递给命令。此外，实现非常复杂，如果某些东西没有按预期工作，那么调试起来很繁重。在解决了一周的问题后感到沮丧，我决定转储 C++/Tk。

退出C++/Tk，进入[Qt](https://www.qt.io/)（应该说“cute”，但是有点傻，所以我说“queue tee”）。它有商业许可证，也有开源许可证，正在进行积极的开发，有大量的例子，它支持大多数桌面和移动操作系统，有一个活跃的社区，有 wiki 和博客，...... GUI 和图形的东西还有其他模块可用于多媒体、网络、SQL、测试……

由于 QT 的开发早在 1991 年就开始了（并且它曾经是诺基亚的一部分），有些部分是“旧的”并被新的东西所取代，但与 Microsoft 相比，文档在这方面更加清晰。而且与微软相比，整套技术是连贯的。

对于与 C++ 的集成，有两种方法：

1.  使用 MSVS 和 QT 插件。我试过了，但无法让它正常工作。也许我应该尝试更多，但经过两天的尝试，我已经受够了。
2.  使用将使用您已安装的 C++ 编译器的 QT IDE。这工作正常，这就是我现在正在做的方式。一个缺点是编辑时错误检查不如 MSVS 强大。然而，一个优点是，当您拥有 MSVS 的免费版本时，您也可以编译为 64 位。

如果你想制作一个 GUI，你绝对应该考虑 Qt。

# c++ - C ++将结构放入共享内存

> ID：13643722
> 
> 赞同：0
> 
> 时间：2012-11-30T10:50:34.403
> 
> 标签：c++, shared-memory

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:53:23.497

Use a pointer, not value

```
ClientList* shared_memory;
     here ^

shared_memory = (ClientList* ) shmat (segment_id, 0, 0);
                  and here ^ 
```

Ah, and then your sizeof will look like this

```
const int shared_segment_size = sizeof(ClientList); 
```

# sql - sql server 2008 中的十进制到十六进制转换

> ID：13643729
> 
> 赞同：2
> 
> 时间：2012-11-30T10:50:48.320
> 
> 标签：sql, sql-server-2008

的十六进制值`2716455883`是`A1E9D3CB`但使用

```
SELECT CONVERT(VARBINARY(8), 2716455883) 
```

得到答案`0x0A000001CBD3E9A1`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:58:53.017

```
SELECT CONVERT(VARBINARY(8), cast(2716455883 as bigint)) 
```

这是由于 SQL Server 解释没有限定类型的文字的方式。看一下这个

```
select sql_variant_property(2716455883, 'basetype'); -- numeric
select sql_variant_property(2716455883, 'precision'); -- 10
select sql_variant_property(2716455883, 'scale'); -- 0 
```

# android - How to create android application with server database connectivity

> ID：13643731
> 
> 赞同：3
> 
> 时间：2012-11-30T10:50:53.523
> 
> 标签：android, mysql, web-services

I am very new to android. I want to create an android application which can connect with my localhost database and I do not know what to use and How to create Database and pass request to database. please Help me.

Thank you All of you. This is very helpfull. I want to know how to use .net web service and How can i use json for all sending and receiving work. Please Help me and thank you very much....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:56:44.713

使用**SQL Server**管理桌面上的数据并在 Visual Studio 上的 .Net 中创建**Web 服务。**

*（请注意，您在服务器端使用的数据库是什么并不重要，因为最终数据将以 Web 服务中的 xml 或 json 形式从服务器到达 Android 应用程序。不管您正在使用的数据库。因此，您完全希望使用哪个数据库。）*

**然后使用SOAP**连接到应用程序中的**Web 服务**并从远程/本地主机数据库设置/获取数据。

 **[有关如何在 .NET 中制作 Web 服务的链接](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)（不包括 Android 中的实现）。

关于如何将您的服务与 Android 连接的链接：[this](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)、[this](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)和[this](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:38:03.553

对于您的本地主机，请使用 wamp 服务器。其中包括php，mysql。尝试使用 mysql 和 dconnetct 和 php 创建数据库。如果您想从 Android 应用程序中插入任何数据，您只能通过 php（本例）来完成。所以与android应用程序通信你必须学习JSON解析或XML解析。并且您的本地主机 IP 地址是 127.0.0.1 但这在 android 模拟器中不支持。所以你必须为 127.0.01 使用 10.0.2.2。**

# javascript - 如何在 iframe 标签中插入 javascript 代码

> ID：13643738
> 
> 赞同：5
> 
> 时间：2012-11-30T10:51:08.420
> 
> 标签：javascript, jquery, iframe

我正在这样做但不工作：-

我正在尝试在 iframe 中插入像素，然后将其附加到正文中。

```
jQuery('#subscribr').append('<iframe>
<script language="javascript" src="http://www.abc/static/st.v2.js"></script>
<script language="javascript">
var ef_event_type="transaction";
var ef_transaction_properties = "ev_ProductViews=1";
/*
 * Do not modify below this line
 */
var ef_segment = "";
var ef_search_segment = "";
var ef_userid="xxxx";
var ef_pixel_host="pixel.abc.net";
var ef_fb_is_app = 0;
effp();
</script>
</iframe>');
enter code here 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T10:57:11.330

`</script>`当包含在字符串中时，类似的脚本似乎会中断。一种解决方法可能是通过 dom 操作添加元素：

```
iframe = $('<iframe>');

var script   = document.createElement("script");
script.type  = "text/javascript";
script.src   = "http://www.abc/static/st.v2.js"; // Or:
script.text  = "Your code here!"

iframe[0].appendChild(script);
iframe.appendTo('#subscribr')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T11:31:31.447

**这是对我有用的解决方案..**

```
var s = document.createElement("script");
    s.type = "text/javascript";
    s.src = "http://www.abc/static/st.v2.js";
    // Use selector here
    jQuery("#subscribr").append(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:19:04.920

工作样本： http: [//fiddle.jshell.net/f2x7G/](http://fiddle.jshell.net/f2x7G/)

```
var doc = null;
   if(iframe.contentDocument) doc = iframe.contentDocument;
   else if(iframe.contentWindow) doc = iframe.contentWindow.document;
   else if(iframe.document) doc = iframe.document;

if(doc == null) throw "Document not initialized";

doc.open();
var script   = doc.createElement("script");
script.type  = "text/javascript";
// script.src = 'http://www.abc/static/st.v2.js';
script.text  = "alert('voila!');"
doc.appendChild(script);
doc.close(); 
```

# java - 在android中等待并通知

> ID：13643744
> 
> 赞同：1
> 
> 时间：2012-11-30T10:51:36.207
> 
> 标签：java, android, multithreading, thread-safety

我在我的应用程序中处理一个线程，我遇到了线程等待功能的问题。我使用创建并显示我的 UI `runOnUIThread()`，我的主线程正在等待我的 UI 线程完成，线程完成后我在主线程中做了一些处理，这里的问题是主进程始终处于等待状态，即使我的线程完成它；我正在`notify()`为此使用等待和函数

```
 public String LSVerification() {

        String t = null;

            t="Sample string";
            synchronized(this)

            {
            AndroidHTMLActivity.this.runOnUiThread(ShowDialog) ;//here i call my thread

            try {
               this.wait();//here i waiting for my thread to finish it's job

            //here i do some process after my thread finish it's job
              //the problem is here main process always in wait state

                } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            }
          return t;        
        }

        private Runnable ShowDialog = new Runnable() {
            public void run() {
                String t = null;
        synchronized(ShowDialog)

            {
            Recognition recg=new Recognition(Activity.this);

                recg.show();

            this.notify();
            }

            }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:55:58.517

在后台执行作业后尝试使用 Hanlders 更新 UI...

[链接到处理程序](http://mobileorchard.com/android-app-developmentthreading-part-1-handlers/)请参阅下面的代码..

```
private void performOperationInBackgroundThread() {
        Thread Servicethread = new Thread(
                    new Runnable() {
                        public void run() {
                            try {
                                PerformThreadOperation();
                                DataLoaded = true;
                            } catch (Exception e) {
                                ExceptionOccured = true;
                                e.printStackTrace();
                                System.out.println(e.getMessage());
                            }
                            handler.sendMessage(handler.obtainMessage());
                        }
                    }
                    );
            Servicethread.start();
        }

 static class MyHandler extends Handler{
                MyActiviy parentActivity;
                @Override
                public void handleMessage(Message msg){
                    // Update your UI here

                    }
                }

                MyHandler(MyActiviy activity){
                    parentActivity = activity;
                }
            }

MyHandler handler = new MyHandler(this); 
```

# ios - 在 AIR 应用程序中集成像 ShareKit 这样的库？

> ID：13643748
> 
> 赞同：1
> 
> 时间：2012-11-30T10:51:42.673
> 
> 标签：ios, air, libraries

ShareKit 只是一个例子，我需要知道是否可以在 AIR 中集成、链接和使用带有 UI 的原生 iOS 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:42:56.010

AIR 具有本机应用程序的概念，但它们不与任意库链接。但是，本机 AIR 应用程序可以加载任意帮助应用程序，并且可以使用任意库。您将独自参与其中 - 不支持 AIR，通常是本地开发。

# db2 - How to specify filename in DB2 CLP interactive input mode?

> ID：13643749
> 
> 赞同：0
> 
> 时间：2012-11-30T10:51:47.807
> 
> 标签：db2, clp

I want to exec script.sql inside DB2 interactive input (DB2 =>)

I can only initiate db2 using `krun -- db2`

And for some reason `krun -- db2 -vf script.sql` doesn't seem to work.

Only interactive mode works for me. Help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:41:01.400

您可以使用 GET_LINE 内置模块来实现 Oracle 兼容性。它在 Express-C 版本中不可用。

[http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.apdv.sqlpl.doc/doc/r0053534.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.apdv.sqlpl.doc/doc/r0053534.html)

# php - Read text in image with PHP

> ID：13643759
> 
> 赞同：14
> 
> 时间：2012-11-30T10:52:13.930
> 
> 标签：php, curl, image-processing, ocr, gd

I'm trying to read the text from this image:

![image](../Images/986aec3cad0268948cce0a6041aab47e.png)

I want to read the price, e.g. **"`EUR42721.92`"**

I tried these libraries:

1.  [How to Create a PHP Captcha Decoder with PHP OCR Class: Recognize text & objects in graphical images - PHP Classes](https://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html)
2.  [phpOCR: Optical Character Recognizer written in PHP](http://phpocr.sourceforge.net/)

But they don't work. How can I read the text?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-06T20:07:08.307

试试这个（它对我有用）：

```
$imagick = new Imagick($filePath);

$size = $imagick->getImageGeometry();
$width     = $size['width'];
$height    = $size['height'];
unset($size);

$textBottomPosition = $height-1;
$textRightPosition = $width;

$black = new ImagickPixel('#000000');
$gray  = new ImagickPixel('#C0C0C0');

$textRight  = 0;
$textLeft   = 0;
$textBottom = 0;
$textTop    = $height;

$foundGray = false;

for($x= 0; $x < $width; ++$x) {
    for($y = 0; $y < $height; ++$y) {
        $pixel = $imagick->getImagePixelColor($x, $y);
        $color = $pixel->getColor();
        // remove alpha component
        $pixel->setColor('rgb(' . $color['r'] . ','
                         . $color['g'] . ','
                         . $color['b'] . ')');

        // find the first gray pixel and ignore pixels below the gray
        if( $pixel->isSimilar($gray, .25) ) {
            $foundGray = true;
            break;
        }

        // find the text boundaries 
        if( $foundGray && $pixel->isSimilar($black, .25) ) {
            if( $textLeft === 0 ) {
                $textLeft = $x;
            } else {
                $textRight = $x;
            }

            if( $y < $textTop ) {
                $textTop = $y;
            }

            if( $y > $textBottom ) {
                $textBottom = $y;
            }
        }
    }
}

$textWidth = $textRight - $textLeft;
$textHeight = $textBottom - $textTop;
$imagick->cropImage($textWidth+10, $textHeight+10, $textLeft-5, $textTop-5);
$imagick->scaleImage($textWidth*10, $textHeight*10, true);

$textFilePath = tempnam('/temp', 'text-ocr-') . '.png';
$imagick->writeImage($textFilePath);

$text = str_replace(' ', '', shell_exec('gocr ' . escapeshellarg($textFilePath)));
unlink($textFilePath);
var_dump($text); 
```

您需要安装 ImageMagick 扩展和 GOCR 才能运行它。如果您不能或不想安装 ImageMagick 扩展，我会给您发送一个带有计算颜色距离的函数的 GD 版本（它只是一个扩展的勾股定理）。

不要忘记设置 $filePath 值。

![用于裁剪可视化的图像解析](../Images/9882bce715ad200e5cee092a148d17ea.png)

该图像显示它寻找一个灰色像素来更改 $foundGray 标志。之后，它会从左侧和顶部查找第一个和最后一个像素。它使用一些填充裁剪图像，调整生成的图像大小并将其保存到临时文件中。之后，很容易使用 gocr（或任何其他 OCR 命令或库）。之后可以删除临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:50:13.607

在开始 OCR 之前提高数字图像的质量。使用绘图程序来提高质量（更大的尺寸，直线）。

您可以修改 PHP 脚本并使模式识别适应您的需要。 [https://github.com/ogres/PHP-OCR/blob/master/Image2String.php](https://github.com/ogres/PHP-OCR/blob/master/Image2String.php)

或尝试其他 OCR 工具： [https ://github.com/thiagoalessio/tesseract-ocr-for-php](https://github.com/thiagoalessio/tesseract-ocr-for-php)

# python - Python不返回和设置值

> ID：13643761
> 
> 赞同：0
> 
> 时间：2012-11-30T10:52:32.400
> 
> 标签：python, list, return

我运行以下。all_possible 在文件顶部设置为 []。

```
def a_combination(input):
global current_char
for y in range(0,len(str(typed))):
    working_int = int(list(str(input))[current_char])
    print working_int
    if (len(all_possible) == 0):
        all_possible.append(digits_all[working_int-2][0])
        all_possible.append(digits_all[working_int-2][1])
        all_possible.append(digits_all[working_int-2][2])
    else:
        for x in range(0, len(all_possible)):
            x = 3*x
##            Duplicate to setup 3 of the same words in the list
            all_possible.insert(x, all_possible[x])
            all_possible.insert(x, all_possible[x])
##            Now append the 1st possible character to the first version of the working string etc...
            all_possible[x] = all_possible[x]+digits_all[working_int-2][0]
            all_possible[x+1] = all_possible[x+1]+digits_all[working_int-2][1]
            all_possible[x+2] = all_possible[x+2]+digits_all[working_int-2][2]
##            Optimization - check after each stage for no-matches.
    current_char += 1 
```

## 打印所有可能

```
 check_matches(all_possible)
print all_possible

def check_matches(input):
    output = []
    for possible_word in input[:]:
        for real_word in word_dictionary:
            if (normalise_word(real_word).startswith(possible_word)):
                output.append(possible_word)
            if (normalise_word(real_word) == possible_word):
                print possible_word, 'is a perfect match with the dictionary.'
    print output
    all_possible = output
    print all_possible
    return all_possible 
```

问题是它没有返回并在 a_combination 中设置 all_possible 的值。它在 check_matches 中打印处理后的值，但没有正确返回，这意味着 a_combination 打印了错误的内容（通过 normalise_word 之前的列表）。有任何想法吗？

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:00:54.400

您不保留`all_possible`from的返回值`check_possible()`。您将输出列表分配给函数内的局部变量，然后将其返回给调用者，然后调用者将其丢弃。你应该做

```
all_possible = check_matches(all_possible) 
```

此外，您应该停止尝试使用全局变量，它们是您困惑的原因。将变量保留在它们正在使用的函数中，并选择不同的名称。

# iphone - AVLayerVideoGravityResizeAspectFill 在哪里裁剪

> ID：13643769
> 
> 赞同：5
> 
> 时间：2012-11-30T10:53:04.117
> 
> 标签：iphone, ios, camera

我正在使用`AVCaptureSession`带有重力`AVCaptureVideoPreviewLayer`的a。`AVLayerVideoGravityResizeAspectFill`

```
self.captureSession =[[AVCaptureSession alloc] init];
captureSession.sessionPreset = AVCaptureSessionPresetPhoto;
self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.captureSession];
[self.previewLayer setVideoGravity: AVLayerVideoGravityResizeAspectFill]; 
```

如何知道如何调整视频大小以适应预览区域`AVLayerVideoGravityResizeAspectFill`？图像的哪个部分在预览区域中可见？

从[文档](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)：

> AVLayerVideoGravityResizeAspectFill：保留纵横比，但填充可用屏幕区域，必要时裁剪视频

基本上，如何准确获取 previewLayer 中显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:21:04.733

使用[iOS 6 SDK，我可以](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009524-CH1-SW19)在`AVCaptureVideoPreviewLayer`

```
(CGPoint)captureDevicePointOfInterestForPoint:(CGPoint)pointInLayer 
```

# asp.net - 如果不调用后面的代码，UpdatePanel 中的 GridView 不会刷新

> ID：13643772
> 
> 赞同：3
> 
> 时间：2012-11-30T10:53:14.893
> 
> 标签：asp.net, gridview, updatepanel, partial-page-refresh

我是 ASP.Net 的新手，我对 GridView 控件在 UpdatePanel 中的工作方式感到困惑。

我已阅读[此处](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)的文档，其中指出“默认情况下，UpdatePanel 控件中的任何回发控件都会导致异步回发并刷新面板的内容。” 然而，当我在元素内放置一个 GridView 和一个 Button 控件时，除非该按钮具有定义的 OnClick 事件来执行 grid1.DataBind();，否则网格将不会刷新其数据。此外，我尝试在 UpdatePanel 上为 Button 指定 AsyncPostBackTrigger，但我再次得到了相同的行为。现在，我注意到当我按下没有 OnClick 事件的按钮时 UpdatePanel 会刷新，但是其中的 GridView 不会。请问您能对此有所了解吗？我必须总是调用后面的代码来显式刷新它吗？

我在 Web.Config 中的连接字符串

```
 <connectionStrings>
        <add name="myConnectionString"
             connectionString="Data Source=XXXXX;Initial Catalog=XXXX;Persist Security Info=True;User ID=XXXXX;Password=XXXXX"
             providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

我的默认.aspx

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="EmptyWebApp.Default" %>
 <!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server"> <title></title> </head>
 <body>
     <form id="form1" runat="server">
         <div>
             <asp:ScriptManager ID="ScriptManager" runat="server" EnablePartialRendering="true" />
             <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                 <ContentTemplate>
                     <asp:GridView ID="grid1" runat="server" DataSourceID="SQLDevelopment" AutoGenerateColumns="False">
                         <Columns>
                             <asp:BoundField DataField="UserID" HeaderText="UserID" SortExpression="UserID" />
                             <asp:BoundField DataField="Date" HeaderText="Date" SortExpression="Date" />
                         </Columns>
                     </asp:GridView>
                     <asp:SqlDataSource ID="SQLDevelopment" runat="server"
                    ConnectionString="<%$ ConnectionStrings:myConnectionString %>" 
                    SelectCommand="SELECT * FROM [TestTableA]"></asp:SqlDataSource>
                <%=DateTime.Now.ToString()%> <br />
                <asp:Button ID="btnRefresh" runat="server" Text="Refresh without C# event"/>
                <asp:Button ID="btnRefresh1" runat="server" Text="Refresh with C# event" OnClick="btnRefresh1_Click"/>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
 </form></body><html> 
```

我的 btnRefresh1 代码

```
 protected void btnRefresh1_Click(object sender, EventArgs e)
    {
        grid1.DataBind();
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:28:47.193

更新面板代码没有任何问题 - 问题是网格视图不会在回发时再次从数据源请求数据。相反，它将使用视图状态来加载相应的数据。

但是，调用`DataBind`将强制网格视图再次从数据源获取数据，从而刷新它（或者您可以尝试禁用网格视图的视图状态） - 请参阅该方法的[文档](http://msdn.microsoft.com/en-us/library/fkx0cy6d.aspx)- 示例代码中的注释也是如此。

如果您不想`DataBind`在刷新按钮中添加调用，您可以在其中执行相同操作`Page_Load`- 从而在每次回发时刷新网格（无论导致它的控件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T17:13:02.847

在您的gridview 脚本中使用.DataBind()（即gridview1.DataBind();）。这只是将数据重新绑定到已在数据源中设置的网格视图。

```
<asp:GridView ID="grid1" runat="server" DataSourceID="SQLDevelopment" AutoGenerateColumns="False"> 
```

有关详细信息，请参阅[MSDN](http://support.microsoft.com/kb/307860#1b)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T01:07:57.453

或者让 ScriptManager 在一行代码中为您完成所有工作！

```
ScriptManager.GetCurrent(this).RegisterPostBackControl(ButtonSubmit); 
```

将 ButtonSubmit 替换为您自己的控件。

# ruby-on-rails - rake db：创建问题

> ID：13643775
> 
> 赞同：0
> 
> 时间：2012-11-30T10:53:24.420
> 
> 标签：ruby-on-rails, rake, rakefile

我刚开始做一个项目，我已经根据项目的要求配置了我的系统，即

```
rails v => 2.3.11
ruby v => 1.8.7 
```

当我运行命令“rake db：create”时出现错误

```
rake aborted!
no such file to load -- rake/rdoctask
/home/jeet/Desktop/Projects/myapp/Rakefile:8 
```

在这里我添加了 Rakefile 的内容

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rake/rdoctask'

require 'tasks/rails' 
```

我已经检查了这个的答案[，](https://stackoverflow.com/questions/7826442/no-such-file-to-load-rdoc-task)但它对我不起作用。

请建议我一个更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:19:11.920

我已经看到了同样的问题。

可能的解决方案：通过将 gem 添加`'rdoc'`到我的 Gemfile 中，然后运行`bundle install`​​.

# r - 透明网格线

> ID：13643777
> 
> 赞同：4
> 
> 时间：2012-11-30T10:53:27.543
> 
> 标签：r, r-grid

我想用网格包创建透明线。

这有效（仅适用于水平和垂直线）：

```
require(grid)
grid.newpage()
grid.rect(x=0.5, y=0.5, width=0, height=0.5, gp=gpar(col=rgb(1, 0, 0, .4))) 
```

但是，这不会：

```
grid.newpage()
grid.lines(x=c(0.5, 0.5), y=c(0.25, 0.75), gp=gpar(col=rgb(1, 0, 0, .4))) 
```

我在 RStudio v0.97.237 和 RGui 2.15.2 中都试过这个。

更新：当我将第二个代码块放在一个函数中时，例如在下面第一个答案中的 dothegrid() 中，它确实在 RStudio 中工作，但只有在重新启动之后，或者在 RStudio 的绘图设备窗格中单击“全部清除”之后.

UPDATE2：现在我们到了某个地方：它仅在单击 RStudio 中的“全部清除”时才有效，然后是 grid.lines 语句（没有 grid.newpage() 语句）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:22:52.300

我不认为问题是由于 newpage 命令。

我玩单位：

这不起作用

```
 grid.newpage()
 grid.lines(x,y,   gp=gpar(col='red'),default.units = "npc") 
```

但是当我更改默认单位时，这项工作：

```
 grid.newpage()
 grid.lines(x,y,   gp=gpar(col='red',alpha=0.4),default.units='naif') 
```

请注意，当您向函数传递一个没有任何关联单位的数字向量时，会使用 naif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:16:13.140

不是答案，只是一些细节

```
require(grid)

dothegrid <- function(){
  grid.newpage()
  grid.lines(x=c(0.5, 0.5), y=c(0.25, 0.75), gp=gpar(col=rgb(1, 0, 0, 0.2)))
  grid.lines(x=c(0.4, 0.4), y=c(0.25, 0.75), gp=gpar(col=rgb(1, 0, 0, 0.6)))
}

# Window 7
# Make sure to restart RStudio/R before running this
dothegrid() # Rstudio: ok, nothing in RGui
# run again
dothegrid() # makes the lines disappear

pdf("a.pdf")
dothegrid()
dothegrid() # lines stay
dev.off()

png("a.png")
dothegrid() #lines stay
dev.off() 
```

R 版本 2.15.2 (2012-10-26) 平台：x86_64-w64-mingw32/x64（64 位）

语言环境：[1] LC_COLLATE=German_Germany.1252 LC_CTYPE=German_Germany.1252
[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
[5] LC_TIME=German_Germany.1252

附加的基础包：[1] grid stats graphics grDevices utils datasets methods base

# html - 更改 HTML 上的键盘按钮效果

> ID：13643781
> 
> 赞同：1
> 
> 时间：2012-11-30T10:53:41.470
> 
> 标签：html, keyboard, customization

在 html textarea 输入中，我希望选项卡键盘按钮的作用类似于文字处理器样式的缩进键，而不是跳到下一个元素。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:58:11.457

谷歌是你的朋友！[关联](http://pallieter.org/Projects/insertTab/)

```
 function insertTab(o, e)
{
    var kC = e.keyCode ? e.keyCode : e.charCode ? e.charCode : e.which;
    if (kC == 9 && !e.shiftKey && !e.ctrlKey && !e.altKey)
    {
        var oS = o.scrollTop;
        if (o.setSelectionRange)
        {
            var sS = o.selectionStart;
            var sE = o.selectionEnd;
            o.value = o.value.substring(0, sS) + "\t" + o.value.substr(sE);
            o.setSelectionRange(sS + 1, sS + 1);
            o.focus();
        }
        else if (o.createTextRange)
        {
            document.selection.createRange().text = "\t";
            e.returnValue = false;
        }
        o.scrollTop = oS;
        if (e.preventDefault)
        {
            e.preventDefault();
        }
        return false;
    }
    return true;
}

<textarea onkeydown="insertTab(this, event);"></textarea> 
```

# ms-access - 在服务器上部署时操作必须使用可更新查询错误

> ID：13643785
> 
> 赞同：1
> 
> 时间：2012-11-30T10:53:55.207
> 
> 标签：ms-access, oledb

嗨，我有一个 Web 应用程序，我正在为我的 Web 数据库使用 MS Access 2003。我的数据库文件位于 App_Data 文件夹中。我正在使用这个数据库文件向我的网页插入和填充数据。这两个场景插入、删除和选择语句在我的电脑上都可以正常工作。但是，每当我尝试在托管 Web 应用程序的地方做同样的事情时，只有 select 语句才会起作用。插入或删除不起作用，它显示错误消息“操作必须使用可更新查询”。我不确定为什么？我还是个新手。你能帮我吗？

谢谢

# perl - Perl 快捷键“$/”和“$\”

> ID：13643790
> 
> 赞同：0
> 
> 时间：2012-11-30T10:54:10.393
> 
> 标签：perl

我对 perl 快捷方式的使用方式感到困惑。我对变量`$/`和`$\`. 你能帮我吗，因为我是 perl 脚本的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T11:00:47.433

For `$/`: 它是输入分隔符。当您从输入源（例如文件）读取时`my $line = <FILEHANDLE>`，Perl 将从文件中读取尽可能多的数据，直到遇到`$/`. 因此，它默认为换行符`"\n"`，这使我们可以正常理解行是什么。

但是，当您取消设置时，`$/`Perl 将在一次调用中读取整个输入流。因此，`$/`在本地取消设置并读取整个文件是一种常见的习惯用法，例如

```
my $whole_file = do {
  local $/;
  <FILE_HANDLE>
}; 
```

或类似的东西。

`$\`另一方面，每次调用`print`. 默认情况下它是未定义的，这意味着您必须自己添加换行符之类的东西。

[perlvar 文档页面](http://perldoc.perl.org/perlvar.html)中详细解释了所有这些内容。

# jquery - 如何在 div 上执行 jQuery 实时过滤器而不是列出项目？

> ID：13643795
> 
> 赞同：0
> 
> 时间：2012-11-30T10:54:51.943
> 
> 标签：jquery, html, filter

我认为我正在寻找的功能称为“实时过滤器”，我正在尝试过滤输出的数据库条目，其中每个条目具有以下结构：

```
<div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
    <img src="path/to/image.jpg">
    <div class="class4">
        <h4>some text here</h4> <!-- this is what i want to search in -->
        <div class="class5">
            <span id="date">date: MM/DD/YY</span>
            <span id="id_one">text</span>
        </div>
        <div class="class6">
            <span id="id_two">text</span>
            <span id="id_three">text</span>
        </div>
        <span id="id_four">text</span>
        <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
    </div>
</div> 
```

我想在 .class4 h4 中搜索，然后淡出所有`.class1`不包含搜索文本的 div。

这是我遇到的解决方案的默认行为（主要是[在这里](http://www.jquery4u.com/plugins/5-jquery-live-filter-plugins/)），但它们似乎只适用于列表项而不是 div。例如，我尝试了[这里](http://www.designchemical.com/blog/index.php/jquery/live-text-search-function-using-jquery/)的代码并将其修改为：

```
<script>
    $(document).ready(function() {
        $("#filter").keyup(function() {
            // Retrieve the input field text and reset the count to zero
            var filter = $(this).val(), count = 0;

            // Loop through the comment list
            $(".class4 h4").each(function() {
                // If the list item does not contain the text phrase fade it out
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(".class1").fadeOut();
                    // Show the list item if the phrase matches and increase the count by 1
                } 
                else {
                    $(this).show();
                    count++;
                }
            });

            // Update the count
            var numberItems = count;
            $("#filter-count").text("# of matches = "+count);
        });
    });
</script> 
```

它搜索正确，但它隐藏了所有 div `.class1`。

有谁知道如何使用实时过滤器搜索`.class4 h4`特定文本，然后淡出`.class1`不包含搜索文本的 div？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:00:51.160

使用 onkeypress

前任：

```
 <input type="text" onkeypress=" return callfunction(event); " 
```

在 callfunction 中，您可以实现淡出逻辑。

调用函数应如下所示：

```
function callfunction(event){   
// Loop through the comment list
            $(".class4 h4").each(function() {
                // If the list item does not contain the text phrase fade it out
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(".class1").fadeOut();
                    // Show the list item if the phrase matches and increase the count by 1
                } 
                else {
                    $(this).show();
                    count++;
                }
            });

            // Update the count
            var numberItems = count;
            $("#filter-count").text("# of matches = "+count);}          
} 
```

并且该功能不需要在文档就绪方法中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T21:48:58.487

正如我告诉你的，我带着现场演示回来了。这是代码：

> ***只要确保包含 jquery 脚本。

```
<label>Type here</label>

<input type="text" id="filter" onkeyup=" return callfunction(); " />

<div>
    <div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
        <img  src="@Url.Content("~/StaticContent/Images/cycling_logo.gif")" width="90" height="90">
        <div class="class4">
            <h4>abcdef</h4> <!-- this is what i want to search in -->
            <div class="class5">
                <span id="date">date: MM/DD/YY</span>
                <span id="id_one">text</span>
            </div>
            <div class="class6">
                <span id="id_two">text</span>
                <span id="id_three">text</span>
            </div>
            <span id="id_four">text</span>
            <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
        </div>
    </div>

    <div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
        <img  src="@Url.Content("~/StaticContent/Images/cycling_logo.gif")" width="90" height="90">
        <div class="class4">
            <h4>some</h4> <!-- this is what i want to search in -->
            <div class="class5">
                <span id="date">date: MM/DD/YY</span>
                <span id="id_one">text</span>
            </div>
            <div class="class6">
                <span id="id_two">text</span>
                <span id="id_three">text</span>
            </div>
            <span id="id_four">text</span>
            <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
        </div>
    </div>

    <div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
        <img  src="@Url.Content("~/StaticContent/Images/cycling_logo.gif")" width="90" height="90">
        <div class="class4">
            <h4>dcdef</h4> <!-- this is what i want to search in -->
            <div class="class5">
                <span id="date">date: MM/DD/YY</span>
                <span id="id_one">text</span>
            </div>
            <div class="class6">
                <span id="id_two">text</span>
                <span id="id_three">text</span>
            </div>
            <span id="id_four">text</span>
            <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
        </div>
    </div>

    <div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
        <img  src="@Url.Content("~/StaticContent/Images/cycling_logo.gif")" width="90" height="90">
        <div class="class4">
            <h4>dcfffff</h4> <!-- this is what i want to search in -->
            <div class="class5">
                <span id="date">date: MM/DD/YY</span>
                <span id="id_one">text</span>
            </div>
            <div class="class6">
                <span id="id_two">text</span>
                <span id="id_three">text</span>
            </div>
            <span id="id_four">text</span>
            <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
        </div>
    </div>

    <div class="class1 class2 class3" data-name="name" data-date="MM/DD/YY">
        <img  src="@Url.Content("~/StaticContent/Images/cycling_logo.gif")" width="90" height="90">
        <div class="class4">
            <h4>dssfafafsa</h4> <!-- this is what i want to search in -->
            <div class="class5">
                <span id="date">date: MM/DD/YY</span>
                <span id="id_one">text</span>
            </div>
            <div class="class6">
                <span id="id_two">text</span>
                <span id="id_three">text</span>
            </div>
            <span id="id_four">text</span>
            <span id="id_five"><a class= class7 href="path/to/link.html">link</a></span>
        </div>
    </div>

</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/latest/jquery.js"></script>
<script type="text/javascript">
    function callfunction() {
        $(".class4 h4").each(function() {
            if ($(this).text().indexOf($("#filter").val()) != 0) {
                $(this).parent().parent().fadeOut(500);
            } else {
                $(this).parent().parent().fadeIn(500);
            }
        });
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:51:35.640

这个问题有你正在寻找的答案：[jQuery - Trying to filter divs on keyup](https://stackoverflow.com/questions/1604639/jquery-trying-to-filter-divs-on-keyup?rq=1)

刚刚在我自己的网站上使用它，它的工作原理。

# java - 内爆/爆炸一个字符串：你会建议什么转义方案？

> ID：13643797
> 
> 赞同：1
> 
> 时间：2012-11-30T10:54:58.247
> 
> 标签：java, string, escaping, delimiter

假设我有两个字符串要使用分隔符“加入”。

```
字符串 s1 = "aaa", s2 = "bbb"; // 输入字符串
字符串 s3 = s1 + "-" + s2；// 用破折号连接字符串

```

我可以`s3.split("-")`用来获取`s1`和`s2`。现在，如果`s1`或`s2`包含破折号怎么办？还假设它`s1`可能`s2`包含任何可打印的 ASCII，并且我不想使用不可打印的字符作为分隔符。

在这种情况下，你会建议什么样的*转义？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:58:01.783

如果我可以定义格式、分隔符等。我会使用[OpenCSV](http://opencsv.sourceforge.net/)并使用它的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:12:18.863

这是另一个可行的解决方案，它不使用分隔符，但它连接了内爆字符串末尾的字符串长度，以便能够在之后重新分解它：

```
public static void main(String[] args) throws Exception {
    String imploded = implode("me", "and", "mrs.", "jones");
    System.out.println(imploded);
    String[] exploded = explode(imploded);
    System.out.println(Arrays.asList(exploded));
}

public static String implode(String... strings) {
    StringBuilder concat = new StringBuilder();
    StringBuilder lengths = new StringBuilder();
    int i = 0;
    for (String string : strings) {
        concat.append(string);
        if (i > 0) {
            lengths.append("|");
        }
        lengths.append(string.length());
        i++;
    }
    return concat.toString() + "#" + lengths.toString();
}

public static String[] explode(String string) {
    int last = string.lastIndexOf("#");
    String toExplode = string.substring(0, last);
    String[] lengths = string.substring(last + 1).split("\\|");
    String[] strings = new String[lengths.length];
    int i = 0;
    for (String length : lengths) {
        int l = Integer.valueOf(length);
        strings[i] = toExplode.substring(0, l);
        toExplode = toExplode.substring(l);
        i++;
    }
    return strings;
} 
```

印刷：

```
meandmrs.jones#2|3|4|5
[me, and, mrs., jones] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:00:25.310

您可以使用不常见的字符序列，例如`;:;`分隔符而不是单个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:58:44.450

为什么不将这些字符串存储在一个数组中，并在每次要将它们显示给用户时用破折号连接它们？

# iphone - ios中图像名称未知时如何从ftp下载图像

> ID：13643800
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:55:11.533
> 
> 标签：iphone, objective-c, ios, xcode, ftp

我正在从 ftp 下载图像，其中我的 ftp 包含多个图像，每次在一个文件夹中生成不同名称的图像。我只需要下载一个名称包含 thumbs.jpg 的图像。例如，我有 4 个带有名称的图像

```
2342345232thumbs.jpg 
453455345334snap.jpg,
4534532356pic.jpg,
1240897387trim.jpg 
```

我想从中下载包含**thumbs.jpg**的图像名称。

我怎样才能做到这一点。请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:10:03.010

假设您获得了目录的内容或至少可以检索文件名，您可以尝试使用字符串匹配`NSRange range = [imageName rangeOfString:@"thumbs.jpg"]; if (range.location != NSNotFound) // found match`，然后下载该特定的 image.HTH。

# filesystems - 分布式文件系统与通过网络安装驱动器。

> ID：13643801
> 
> 赞同：1
> 
> 时间：2012-11-30T10:55:22.267
> 
> 标签：filesystems, distributed

我想问你，在 linux 上通过网络安装驱动器相比，现成的分布式文件系统（如 HadoopFS）有哪些优点/缺点？据我了解，我们将通过这两种方法实现相同的效果：相同的数据将在许多远程位置可用。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:59:29.460

分布式文件系统提供了许多好处，例如自动备份或某些规则的分发（例如，您可以将许多新元素添加到存储中，并且该操作对于使用存储的应用程序将是透明的）。

有一天，当您的网络中的一个元素由于某种原因发生故障而您的应用程序依赖它时，安装驱动器可能会成为一种痛苦。

# mysql - 重命名mysql数据库？

> ID：13643802
> 
> 赞同：11
> 
> 时间：2012-11-30T10:55:24.547
> 
> 标签：mysql, phpmyadmin

如何使用查询重命名 MySQL 数据库名称？

我通过 phpmyadmin 尝试`rename`了数据库并收到以下错误，

```
SQL query:

    RENAME DATABASE test TO test_bkp

MySQL said: 

    #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DATABASE test To test_bkp' at line 1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T10:58:35.273

在 phpmyadmin 中，您只需单击数据库，然后转到“操作”选项卡即可重命名它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-30T11:00:16.700

它[在这里](http://dev.mysql.com/doc/refman/5.1/en/rename-database.html)说：

> 此语句在 MySQL 5.1.7 中添加，但被发现有危险并在 MySQL 5.1.23 中删除。它旨在使升级 5.1 之前的数据库能够使用 5.1 中实现的编码来将数据库名称映射到数据库目录名称（请参阅第 9.2.3 节，“标识符到文件名的映射”）。但是，使用此语句可能会导致数据库内容丢失，这就是它被删除的原因。不要在它存在的早期版本中使用 RENAME DATABASE。

您可以将所有数据导入新数据库，然后删除旧数据库。

也可以[`RENAME TABLE`](http://dev.mysql.com/doc/refman/5.5/en/rename-table.html)使用相同的 from/to 表名但不同的 from/to 数据库的语句。有几个问题。

```
CREATE DATABASE `test_bkp`;

RENAME TABLE 
`test`.`table1` TO `test_bkp`.`table1`,
`test`.`table2` TO `test_bkp`.`table2`,
`test`.`table3` TO `test_bkp`.`table3`; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T10:58:15.057

它已被开发人员禁用。见[http://dev.mysql.com/doc/refman/5.1/en/rename-database.html](http://dev.mysql.com/doc/refman/5.1/en/rename-database.html)

除此之外，我会使用副本（然后删除）而不是重命名。看看在[同一个 MySql 实例上克隆一个 MySQL 数据库](https://stackoverflow.com/questions/675289/cloning-a-mysql-database-on-the-same-mysql-instance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:57:52.857

您可以在 MySQL < 5.1.23 中使用

```
RENAME {DATABASE | SCHEMA} db_name TO new_db_name; 
```

在以后的版本中看看

[更改 {数据库 | 架构} [db_name]](http://dev.mysql.com/doc/refman/5.1/en/alter-database.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-02T06:14:28.187

好的，所以如果重命名选项没有显示，这里是使用 phpMyAdmin 克隆数据库的快速方法：

*   打开要复制的数据库
*   单击操作选项卡。
*   它说“将数据库复制到：”输入新数据库的名称。选择“结构和数据”以复制所有内容或“仅结构”选中“复制前创建数据库”框以创建新数据库。选中“添加 AUTO_INCREMENT 值”框。单击“开始”按钮继续。注意在删除旧数据库之前，请确保密码也已复制过来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-22T07:24:02.953

在 wamp 服务器中单击数据库然后从标题菜单中选择您的数据库选择操作创建新名称它将重命名数据库但实际上它创建一个新数据库复制所有数据然后删除旧数据库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-09T08:30:29.080

1.  导出当前数据库。
2.  使用您想要的名称创建一个新数据库。
3.  在新数据库上导入旧数据库文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-20T20:04:27.577

好吧，可以重命名您的数据库，但这里是重命名选项背后的逻辑。

```
1\. Xampp creates a new database with the name
2\. Xampp copies all table and data in it from the previous database
3\. Xampp migrates data to the new database table and drops the previous database 
```

### 重命名数据库的步骤

```
1\. Click the Operations option in the nav pane
2\. Find the ' Rename database to ' Spot, and input new name in the input field
3\. Tick the ' Adjust privileges ' checkbox
4\. Click go 
```

我希望这行得通！:)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-06-19T09:52:41.877

您可以导出数据库表，创建一个新表并将表导入新数据库！您也可以通过选择您的数据库并单击操作选项卡并重命名您的数据库来使用 phpmyadmin 重命名您的数据库！最后一种不推荐的方法是创建一个新数据库并使用它，**但您可能会丢失数据！**

```
CREATE DATABASE new_db_name / DROP DATABASE old_db_name 
```

# c# - 根据下拉列表中的选定项目显示复选框

> ID：13643803
> 
> 赞同：2
> 
> 时间：2012-11-30T10:55:29.753
> 
> 标签：c#, asp.net-mvc, checkbox, html.dropdownlistfor

如何根据下拉列表中选择的项目显示一组复选框？

我有一个包含“状态”的下拉列表。用户可以将城市添加到州。使用 2 个下拉列表（一个包含所有州，另一个包含所有可能的城市）执行此操作将需要用户永远添加它们。

因此，在这种情况下，所有城市的一组复选框将是一种更加用户友好的方法。但我该怎么做？以及如何将所有内容都发布回来？

我根本不知道如何做到这一点，所以我也没有代码可以显示！:(

[编辑]

我的控制器的一部分：

```
public ActionResult Index()
{
   IEnumerable<SelectListItem> ddlStates= dataContext.States
                              .Select(c => new SelectListItem
                              {
                                  Value = c.StateID.ToString(),
                                  Text = c.Name
                              });

   ViewBag.States = ddlStates;

   return View();
} 
```

风景：

```
@model dataContext.States

@{
    ViewBag.Title = "Details";
}

@Html.DropDownList("States") 
```

这是我来的为止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:21:52.893

好的，首先呈现状态（我假设您已经为您的视图模型提供了状态列表）：

```
<select id="stateList">
<option value="0">-------- select state ------ </option>
@foreach(var state in Model.States)
{
     <option value="@state.Id">
              @state.Name
     </option>
}
</select>

<div id="cityContainer">

</div> 

<input type="button" id="submitChanges"> 
```

通过处理 Change 事件获取城市列表：

```
$("#stateList").change(function(){
      var id = $("option:selected",$(this)).attr("Id");
      $.ajax({
             url:'@Url.Action("getStateCities","YourController")'               
             data = {stateId = id},
             success:function(data){
                   $.each(cities, function () {
                            var $cityList = $("#cityContainer");
                            var $checkbox= $("<input type='checkbox'></input>").attr("value",this.Id).text(this.CityName);
                            if (this.isInState)
                             {
                                $checkbox.attr("checke","checked");  
                             }
                            $checkbox.appendTo($cityList);
                        });
             } 
      })
}); 
```

你的控制器动作看起来像这样：

```
public JsonResult getStateCities(int stateId)
        {
            var data = _addressService.GetStateCities(Id).Select(c => new { c.CityName, c.Id  ,  isInState = isCityInEstate(cityId)});
            return new JsonResult { Data = data };
        } 
```

实施`GetStateCities`并由`isCityInEstate`您决定。现在将表单数据发送回控制器：

```
 $("#submitChanges").click(function(){
       var citiesToSubmit = [];
       $("input[type=checkbox]",$("#cityContainer")).each(function(){                
            var include = $(this).prop('checked'),              
                cityId = $(this).attr("Id"); 
            citiesToSubmit.push({CityId:cityId, Include : include});
       });
       $.ajax({
            url:'@Url.Action("SubmitCities","YourController")',
            data :{StateId = $("#estateList").attr("Id") , Cities : citiesToSubmit}
            success:function(){
                  alert('cities submitted');
            }
       });
  }); 
```

最后是控制器：

```
 public class SubmitedCityViewModel
   {
       public int StateId {get;set;}

       public List<CityViewModel> Cities {get;set;}
   }

   public class CityViewModel
   {
       public int cityId {get;set;}
       public bool Include {get;set;}    
   }

   public JsonResult SubmitCities(SubmitedCityViewModel model){
           foreach(var city in model.Cities)
           { 
               if (city.Inclue)
               {
                     //update db to include 
                     _addressService.AddCityToState(city.Id,model.StateId);
               }                  
               else
               { 
                   //update db to remove
                     _addressService.RemoveCityFromState(city.Id,model.StateId);
               }
           } 
   } 
```

# ios - 核心数据进行复杂查询

> ID：13643804
> 
> 赞同：0
> 
> 时间：2012-11-30T10:55:33.190
> 
> 标签：ios, core-data

在我的应用程序中，我使用核心数据作为数据库管理器。这或多或少是我的数据库方案：

```
Table: Device(
id: String,
name: String,
specsId: String
);
Table: Specs(
specsId: String,
/**/
); 
```

这两个表没有以任何方式连接。

我想要做的是，当我从 Device 表中查询一个设备时，然后根据匹配的 specsId 从 Specs 表中自动查询它的规格。

这样做的正确方法是什么？

谢谢，

Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:59:19.423

正确的方法是从 Device 表中删除“specsId”字段并创建与 Specs 表的关系，称为“spec”。

这样，一旦您拥有 Device 对象，您就可以使用...

```
myDeviceObject.spec.<property of spec>; 
```

访问规范。

如果没有加入，您将不得不创建一个`NSFetchRequest`来获取`Device`您想要的对象，然后创建一个新`NSFetchRequest`的来获取该`Spec`对象`Device`。

第二个 NSFetchRequest 将有一个谓词，例如...

```
@"specsId = %@", device.specsId 
```

# postgresql - ALTER TABLE，在非空列中设置空，PostgreSQL 9.1

> ID：13643806
> 
> 赞同：129
> 
> 时间：2012-11-30T10:55:57.023
> 
> 标签：postgresql, null, postgresql-9.1

我有一个非空列的表，如何将此列中的空值设置为默认值？

我的意思是，我想做这样的事情：

```
postgres=# ALTER TABLE person ALTER COLUMN phone SET NULL; 
```

但它显示：

```
postgres=# ALTER TABLE person ALTER COLUMN phone SET NULL;
ERROR:  syntax error at or near "NULL"
LINE 1: ALTER TABLE person ALTER COLUMN phone SET NULL; 
```

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-11-30T11:03:21.443

```
ALTER TABLE person ALTER COLUMN phone DROP NOT NULL; 
```

手册中的更多详细信息：[http ://www.postgresql.org/docs/9.1/static/sql-altertable.html](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-10-19T07:01:53.513

执行这种格式的命令

```
ALTER TABLE tablename ALTER COLUMN columnname SET NOT NULL; 
```

用于将列设置为不为空。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-04-19T07:38:13.290

以这种格式执行命令：

`ALTER [ COLUMN ] column { SET | DROP } NOT NULL`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-30T11:04:28.403

```
First, Set :
ALTER TABLE person ALTER COLUMN phone DROP NOT NULL; 
```

# android - 更改微调器的对话框背景颜色

> ID：13643811
> 
> 赞同：0
> 
> 时间：2012-11-30T10:56:13.747
> 
> 标签：android, android-layout, android-widget, android-spinner, android-dialog

我想更改对话框微调器的颜色。在 Android 4.0.4 中我使用下拉模式，但在 2.2 中我们没有这个选项，它只是对话框。所以我需要改变对话框背景的颜色。

我的微调器和对话框的图片：

![对话框和微调器](../Images/4f41b331114e884c3a8ac0fa787aea9d.png)

你怎么能看到，对话框一直是白色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:03:30.060

您必须自定义 Spinner 以获得您所期望的。试试[这个](http://adanware.blogspot.in/2012/03/android-custom-spinner-with-custom.html)和[这个](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

# cocoa - 主线程上的计时器时可可上下文菜单导致崩溃

> ID：13643814
> 
> 赞同：2
> 
> 时间：2012-11-30T10:56:40.220
> 
> 标签：cocoa, nstimer, monomac, nsmenu

我在 OSX10.6 上以单声道工作 - 但这个问题也适合 Cocoa 专家。

我有一个附加到 NSTableView 的上下文菜单。当我选择上下文菜单时，处理程序（测试时为空）被调用，但随后应用程序崩溃。

这是我在窗口控制器中的代码：

```
...
myNSTableView.Menu = new NSMenu();
NSMenuItem mi = new NSMenuItem("menu item 1", myHandler);
myNSTableView.Menu.AddItem(mi);
...

public void myHandler(object Sender, EventArgs e)
{
} 
```

我还有一个 NSTimer 设置，每 200 毫秒重复一次

```
myNSTimer = NSTimer.CreateRepeatingScheduledTimer(new TimeSpan(2000000),delegate { 
        move an NSSlider            
        });

NSRunLoop.Main.AddTimer(myNSTimer, NSRunLoopMode.Common);
NSRunLoop.Main.AddTimer(myNSTimer, NSRunLoopMode.EventTracking); 
```

一旦我尝试访问上下文菜单，应用程序就会崩溃 - 每次。

如果我不启动计时器，上下文菜单就可以了。

我已经尝试了一切来让它工作并且已经没有想法了，所以我真的需要有人帮助，即使只是一个指向问题可能所在的指针。忘记刚才它的单声道这个事实，任何人都可以从可可的角度看到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:03:18.117

事实证明，计时器加剧了问题，但原因实际上是我没有为 NSMenuItems 声明实例变量，因此它们正在收集垃圾并导致 objc 级别的崩溃。

# c++ - 反转或反向迭代 unordered_map

> ID：13643815
> 
> 赞同：10
> 
> 时间：2012-11-30T10:56:41.237
> 
> 标签：c++, unordered-map

我试图以相反的顺序打印 unordered_map 的内容，但它没有 rbegin 或 rend，所以你不能使用 reverse_iterator。unordered_map 的反转应该如何完成？

**编辑（来自评论）：**我希望键按照插入的顺序排列，因此我不能使用 map。键似乎保持在插入顺序中，但我需要它们颠倒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T11:09:33.783

只需阅读问题中的第一句话就可以得到答案：

> 我正在尝试以`unordered_map`相反的顺序打印

您不能按任何顺序打印，因为它是无序的。在无序结构中谈论秩序是没有意义的。an 的内容在内部如何组织并不重要`unordered_map`：这是一个实现细节，您无法访问它。在外界看来，一个`unordered_map`展品完全没有秩序，你不能指望它会这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T12:26:50.253

你可以从任何一对双向迭代器中拼凑出你自己的一对反向迭代器：

```
std::reverse_iterator rbegin(first);
std::reverse_iterator rend(last); 
```

正如@Tin 建议的那样，这不起作用。没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T15:55:17.737

首先，当您以键值对的形式给出一些输入并且您需要对其进行一些操作并按照接收到的输入的顺序打印一些结果时，可以使用这种类型的东西。

因此，您可以使用无序地图。

正如在上面的帖子中所说，无序映射是完全无序的，所以这样做的一个好方法是有一个向量来保存你的键，然后将所有键值对放在一个无序映射中。然后首先使用向量中的键值使用 find() 查找 map 中的值，然后使用迭代器打印键值对。

请参见以下示例：

假设您想以键值对的形式将两个整数作为输入，并且为了对其进行一些操作，您使用了一个无序映射，现在您想按输入的顺序打印值。

```
vector<int> v;
unordered_map<int,int> m;
unordered_map<int,int>::iterator it; 
```

现在，当您想按输入顺序打印输出时。

```
for (int i=0;i<v.size();i++){
        it=m.find(v[i]);
        if(it!=m.end())
            cout << it->first << " " << it-second << "\n";
} 
```

这将按输入的顺序打印您的键值对。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-14T18:29:31.330

当您使用 unordered_map 时，不会维护特定的顺序，因为键值将具有基于实现的哈希码。

正如您提到的，您需要按照插入的顺序使用它们——很可能您将遍历某种线性列表并将键值对存储在无序映射中。而是使用ordered_map 并根据列表的索引插入。在这种情况下，您的订单将被维护为您基于索引作为键插入到地图中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-18T20:11:18.383

将无序地图的内容插入另一个无序地图。请记住以对形式使用 make_pair 插入以保留您的数据。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-04T16:06:00.203

有同样的问题，unordered_map 以相反的顺序存储数据

所以

```
map[A]=X
map[B]=Y
map[C]=Z 
```

如果你迭代 for(map:iterator it=begin...) 你会得到

```
Z
Y
X 
```

所以它暗示了一个命令，女巫被颠倒了

# jquery - 使用 ajax 获取错误获取 jquery 到外部 url

> ID：13643820
> 
> 赞同：0
> 
> 时间：2012-11-30T10:56:48.257
> 
> 标签：jquery, ajax, get

我有一个大问题。我想在一个 url 中通过 web 服务获取信息。

但我收到了这个错误：

```
XMLHttpRequest cannot load ht*p://external_url_that_i_trid_to_get. 
Origin ht*p://localhost:8888 is not allowed by Access-Control-Allow-Origin. 
```

我用这个：

```
$.get(
    url_parsed,
    date_get,
    function(data) {
        if(data.result == 'sucess') {
            alert(data.data["title"]);
        }
    },"json"
); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:02:48.060

要发送跨域 AJAX 请求，您需要使用`JSONP`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:17:35.917

您正在发送跨域请求。只有在政策允许的情况下才允许。使用这样的代码：

```
$.getJSON("link",function(data){
     }
}); 
```

**也请先阅读这篇文章： [http ://en.wikipedia.org/wiki/JSON#JSONP](http://en.wikipedia.org/wiki/JSON#JSONP)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:36:56.037

好的，我使用我的服务器作为代理解决了这个问题。

使用 jquery 和 ajax 我在我的服务器中调用一个 php 脚本。

这个 php 脚本对我想要获取 json 信息并回显的 url 执行 file_get_contents。

问候

# twitter - 排除来自官方推特搜索小部件的回复

> ID：13643823
> 
> 赞同：11
> 
> 时间：2012-11-30T10:56:56.163
> 
> 标签：twitter, twitter-search

我的网站上有一个 twitter 搜索小部件，搜索如下：`from:account_name`. 但它现在显示了我的 twitterstream 以及所有回复。我想从列表中排除那些。

有谁知道这是怎么做到的吗？搜索后，REST-api 有很多选项，但我只需要它作为搜索字符串。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T10:56:56.163

我找到了一个包含转发的选项，`include:retweets`所以我尝试将其更改为`exclude:replies`并且它有效！

我的搜索字符串现在是：`from:account_name exclude:replies`

# apache - ssl tomcat6 的 apache mod_jk 配置

> ID：13643824
> 
> 赞同：0
> 
> 时间：2012-11-30T10:56:56.680
> 
> 标签：apache, tomcat6, mod-jk

我正在尝试将我的网络服务器从 mod_proxy 更新为 mod_jk。

我可以使用以下配置访问 http 页面
JkMount /* loadbalancer

我的workers.properties是

```
worker.list=loadbalancer,status  
Define Node1  
worker.node1.port=8009  
worker.node1.host=10.255.255.77  
worker.node1.type=ajp13  
worker.node1.lbfactor=1  
worker.node1.cachesize=10  
worker.loadbalancer.type=lb  
worker.loadbalancer.balance_workers=node1  
worker.loadbalancer.sticky_session=1  
worker.list=loadbalancer  
worker.status.type=status 
```

因为我们的 SSL tomcat 正在侦听不同的端口，所以我怎样才能将这个 ssl 传递给不同的端口。我需要如何配置workers.properties。

我的tomcat配置是

你能指导我使用 SSL 吗？

斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:41:33.077

创建新工作人员并分配 SSL 端口 8010。在 ssl 虚拟主机中，我们安装了该工作人员。

斯里尼瓦斯

# asp.net-mvc - 在 mvc4 中显示以 Order Id 作为输入的数据库中的数据

> ID：13643827
> 
> 赞同：1
> 
> 时间：2012-11-30T10:57:15.107
> 
> 标签：asp.net-mvc

我是asp的新手，我想请你帮忙。我用 MvcMusicStore 教程帮助建立了商店。现在我想使用 OrderId 在数据库中搜索。只要 orderid 是并且如果我们单击提交按钮，它应该会显示数据库中的相应行。我的方法如下

```
 public ActionResult SearchOrder(int? myid)
    {
        var s = from sp in db.Railways
              select sp;
        string oid = myid.ToString();
        if (!string.IsNullOrEmpty(oid))
        {
            s = s.Where(st => st.OrderID == (Convert.ToInt16(oid)));
        }
        return View(s.ToList());

    } 
```

我也厌倦了代码

```
 public ActionResult SearchOrder(int? myid)
    {
        if (id != null)
        {
            if (ViewBag.OrderID == id.Value)
            {
                s = s.Where(st => st.OrderID == id);
            }
        }
        return View(s);
    } 
```

在我尝试的第二种方法中，它既不显示内容也不显示错误。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:04:24.987

尝试这个：

```
public ActionResult SearchOrder(int? myid)
{
    var s = from sp in db.Railways
          select sp;
    if (myid.HasValue)
    {
        s = s.Where(st => st.OrderID == myid.Value);
    }
    return View(s.ToArray());

} 
```

首先，您的示例将不起作用，因为`string oid = myid.ToString();`如果 myid 为 null，则不会为 null 或空字符串；第二个示例将失败`(ViewBag.OrderID == id.Value)`，而且不会编译。

# postgresql - 删除所有视图 PostgreSQL

> ID：13643831
> 
> 赞同：3
> 
> 时间：2012-11-30T10:57:27.367
> 
> 标签：postgresql, view, dynamic-sql, sql-drop

如何使用查询从 PostgreSQL 中删除所有用户定义的视图？就像我们可以使用 query 删除所有函数一样：

```
SELECT 'DROP FUNCTION ' || ns.nspname || '.' || proname 
       || '(' || oidvectortypes(proargtypes) || ');'
FROM pg_proc INNER JOIN pg_namespace ns ON (pg_proc.pronamespace = ns.oid)
WHERE ns.nspname = 'my_messed_up_schema'  order by proname; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:48:50.587

删除特定模式中所有视图的脚本：

```
SELECT 'DROP VIEW ' || t.oid::regclass || ';' -- CASCADE?
FROM   pg_class t
JOIN   pg_namespace n ON n.oid = t.relnamespace
WHERE  t.relkind = 'v'
AND    n.nspname = 'my_messed_up_schema -- select by schema(s)
ORDER  BY 1; 
```

强制转换为[`regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)( `t.oid::regclass`) 会阻止[SQLi](http://bobby-tables.com/)，因为否则会自动引用非法名称。你也可以使用`quote_ident()`.

您的示例本质上是不安全的。

[**`Do`**](http://www.postgresql.org/docs/current/interactive/sql-do.html)马上：

```
DO
$$
DECLARE
   sql text;
BEGIN
   SELECT INTO sql
          string_agg('DROP VIEW ' || t.oid::regclass || ';', ' ')  -- CASCADE?
   FROM   pg_class t
   JOIN   pg_namespace n ON n.oid = t.relnamespace
   WHERE  t.relkind = 'v'
   AND    n.nspname = 'my_messed_up_schema';

   IF sql IS NOT NULL THEN
      -- RAISE NOTICE '%', sql;  -- to debug
      EXECUTE sql;
   ELSE
      RAISE NOTICE 'No views found. Nothing dropped.';
   END IF;
END
$$ 
```

`DO`需要 PostgreSQL 9.0 或更高版本。

如果没有找到视图，该`IF`构造会避免异常。

如果您有引用其他视图的视图，则必须[`CASCADE`](http://www.postgresql.org/docs/current/interactive/sql-dropview.html)按从上到下的层次顺序添加关键字或删除视图。

*在你做之前总是*检查你要放弃的东西，否则你可能会用核弹自己。如果您不确定，请启动事务，放下炸弹，检查一切是否正常，然后提交或回滚。

```
BEGIN;
DO$$
  ...
$$;

-- check ..

ROLLBACK; -- if something wrong
COMMIT; -- else 
```

请注意，您不能`COMMIT`或 `ROLLBACK` *在*plpgsql 块内。只在外面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:46:43.533

使用表[`pg_class`](http://www.postgresql.org/docs/current/static/catalog-pg-class.html)。

你需要`relkind = 'v'`

# mysql - 使用c删除对mysql的查询

> ID：13643836
> 
> 赞同：1
> 
> 时间：2012-11-30T10:57:57.117
> 
> 标签：mysql, c

谁能告诉我从 mysql db 表中删除值的正确查询，在我的情况下，用户接受表名和 id 并根据 id 删除行。这是我的查询

```
 sprintf(Query,"DELETE FROM ('%s') where id = (%d)",tb1,idt1) ;
 /*table name is in form of string and id is int */

 mysql_query(conn,Query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:03:10.653

您应该删除表名周围的括号：

```
sprintf(Query,"DELETE FROM '%s' where id = (%d)",tb1,idt1) ; 
```

MySQL 会考虑这样的查询语法错误：

```
delete from (mytable) where id=2; 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(mytable) where id=2' 附近使用正确的语法

（我假设您对[SQL 注入攻击](http://xkcd.com/327/)了如指掌，并且既不`tb1`也不`idt1`是从任何形式或形式的用户输入构造的）。

# python - 有没有办法通过 python 访问 Borland Star Team？

> ID：13643844
> 
> 赞同：0
> 
> 时间：2012-11-30T10:58:10.923
> 
> 标签：python, starteam

有没有办法通过 python 访问 Borland Star Team？例如登录、结帐、...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:22:31.600

好吧，正如我所见，不幸的是，没有适用于 python 的本机 StarTeam API。

但根据这个：[The StarTeam APIs](http://techpubs.borland.com/starteam/2009/en/sdk_documentation/guide/overview.html)，我认为你可以通过这些方式从python调用他们的java API函数：[Calling Java from Python](https://stackoverflow.com/questions/3652554/calling-java-from-python)

此外，如果您在 Windows 上，您可以只使用他们的 Windows COM 接口。

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：0>=0

> ID：13643848
> 
> 赞同：1
> 
> 时间：2012-11-30T10:58:17.757
> 
> 标签：java

我正在尝试使用以下命令：

```
**modelfit -inputfile dwi.Bfloat -schemefile 4Ddwi_b1000_bvector.scheme -model ldt -bgmask    brain_mask.nii.gz\ -outputfile dt.Bdouble** 
```

但我收到此错误消息：

```
**Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.elementAt(Vector.java:470)
at imaging.DW_Scheme.readScheme(DW_Scheme.java:530)
at tools.CL_Initializer.initImagingScheme(CL_Initializer.java:1574)
at apps.ModelFit.initOptions(ModelFit.java:60)
at apps.Executable.<init>(Executable.java:24)
at apps.ModelFit.<init>(ModelFit.java:49)
at apps.EntryPoint.getExecutable(EntryPoint.java:142)
at apps.EntryPoint.main(EntryPoint.java:282)** 
```

我对使用这样的命令来运行程序和更改数据相当陌生，所以任何简单的建议都会非常有帮助和感激！如果有帮助的话，我正在使用名为 Camino 的软件的命令，这是一种由伦敦大学学院开发的扩散脑成像分析软件包。

# algorithm - Pyephem 算法参考

> ID：13643850
> 
> 赞同：7
> 
> 时间：2012-11-30T10:58:24.823
> 
> 标签：algorithm, satellite, pyephem

我以前从未使用过pyephem，而且我不是卫星定位方面的专家。我想利用 pyephem 使用 TLE 计算卫星的位置。我必须做一些非常简单的事情，比如：

```
tle=["ISS (ZARYA)","1 25544U 98067A   03097.78853147  .00021906  00000-0  28403-3 0  8652","2 25544  51.6361  13.7980 0004256  35.6671  59.2566 15.58778559250029"]
iss = ephem.readtle(*tle)
observer = ephem.Observer()
observer.lon, observer.lat = ('-84.39733', '33.775867')     
observer.date = ephem.Date('2002/4/23 10:10:00.000')
iss.compute(observer)
print iss.alt, iss.az, iss.range 
```

-40:06:46.3 199:08:24.3 8834968.0

这三个变量提供了卫星在水平参考系统中的位置。我不清楚 pyephem 是如何计算这个值的。我已阅读参考指南： [http ://rhodesmill.org/pyephem/radec](http://rhodesmill.org/pyephem/radec)

阅读文档，似乎 pyephem 应用了岁差和章动，但在文档的最后两行中它说：

“请注意，最后两组坐标中的任何一组都没有应用进动，而只应用到第一组。这意味着只有“天文”位置将对应于星图中的线条。其他位置被称为“纪元”坐标，并且是根据观测当天的天极和天赤道的方向测量的。”

地球岁差是否适用于 az 和 alt？

此外，我想知道 pyephem 使用什么样的模型来进行岁差和章动（我真的需要一些参考）。有 Xephem 和 libastro 的链接，但我找不到任何关于算法的信息。你有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:27:48.877

通过查看 PyEphem 目录中的各种 C 语言文件，您可以找到 PyEphem 使用的各种算法`libastro`：

[https://github.com/brandon-rhodes/pyephem/tree/master/libastro-3.7.5](https://github.com/brandon-rhodes/pyephem/tree/master/libastro-3.7.5)

但是要回答您的具体问题：进动、像差和章动是通常仅针对地球移动参考系之外的物体（如太阳、行星和遥远的恒星）计算的效果。然而，由于地球卫星在我们自己的参考系中运行，我认为 libastro 通常会直接比较地球上方的卫星位置和地球上观察者的位置，因为它们已经是同一个地方的坐标参考范围。

# html - 将 CSS 应用于网站的某些部分

> ID：13643851
> 
> 赞同：0
> 
> 时间：2012-11-30T10:58:24.093
> 
> 标签：html, css

我正在构建一个 WISYWIG，其中我有一个需要应用 content.css 的 iframe。

content.css: (将应用于 iframe (src: ./content/home.php))

```
#content h4
{
    font-size:30px;
color:brown;
text-shadow: 1px 1px #000000;
text-align:center;
} 
```

editpage.php: // 聪明的

```
<iframe id="content" src="./content/home.php"></iframe> 
```

home.php 包含需要在我的网站主页上显示的内容。正如你所想象的那样，我的 h4 前面的#content 用于将相同的 css 应用于我网站内的 div。但是，当我将这个相同的 css 应用到我的 iframe 时，这个 css 不会在 iframe 中找到 #content。因此我之前的问题。

如何将此 CSS 应用于 a`<div id="content">`和 iframe？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T11:00:10.097

是的。要将您的样式应用到 内部的所有内容`#lol`，只需使用`*`选择器：

```
#lol * {
    display:inline-block;
    color:green;
} 
```

如果您只想要的**直接后代**`#lol`：

```
#lol > * {
    display:inline-block;
    color:green;
} 
```

# python - 导入和继承错误

> ID：13643853
> 
> 赞同：0
> 
> 时间：2012-11-30T10:58:39.067
> 
> 标签：python, inheritance, import

我正在学习 Web 应用程序开发，并且正在尝试分离模块只是为了让我的程序更明显地面向对象并且易于导航/理解。

我在**Main.py**中的第一次导入工作正常：

```
import jinja2
import main_page     # <<<- This import of my module works
import os
import webapp2
from string import letters

#   loads templates to make our life easier
template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape = True)

########    Main App Function   ########
app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

**我在main_page.py**中的第二次导入不起作用：

```
import main_handler  # <<< -- This import is not working

########    Implementation      ########    

#   main page handler
class MainPage(BaseHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        visits = 0
        visit_cookie_str = self.request.cookies.get('visits')
        if visit_cookie_str:
            cookie_val = check_secure_val(visit_cookie_str)
            if cookie_val:
                visits = int(cookie_val)

        visits += 1     
        new_cookie_val = make_secure_val(str(visits))
        self.response.headers.add_header('Set-Cookie', 'visits=%s' % new_cookie_val)
        self.write("You've been here %s times and this is the cookie: \n %s" % (visits, new_cookie_val)) 
```

我在终端中收到此错误：

> 文件“/Users/James/Developer/Google-App-Engine/Cookies/main_page.py”，第 6 行，在 MainPage(BaseHandler) 类中：NameError: name 'BaseHandler' is not defined

我尝试更改文件名和类名，以防它们与其他模块混淆。这些文件都在同一个文件夹中。

```
This is the **main_handler.py**:

import webapp2
import string
import jinja2
import hashlib
import hmac

SECRET = "test secret"

#   global hash functions
def hash_str(s):
    return hmac.new(SECRET, s).hexdigest()

def make_secure_val(s):
    return "%s|%s" % (s, hash_str(s))

def check_secure_val(h):
    val = h.split('|')[0]
    if h == make_secure_val(val):
        return val 

#   this is a template with convenience methods
class BaseHandler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)   

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:01:06.107

当你导入“main_handler”时，你可以像这样使用它：

```
main_handler.make_secure_val 
```

不像这样：

```
make_secure_val 
```

# java - 在 Java 中读取 mp3 文件的元数据 - 找不到文件异常

> ID：13643861
> 
> 赞同：0
> 
> 时间：2012-11-30T10:58:54.247
> 
> 标签：java, mp3, filereader

好吧，我的代码如下。我想知道为什么总是有例外。mp3 文件与 test.java 文件位于同一目录中。我究竟做错了什么？另外，我如何从我的音乐库中读取 mp3 文件：路径 - Libraries\Music

```
import java.io.IOException;
import com.mpatric.mp3agic.ID3v1;    
import com.mpatric.mp3agic.InvalidDataException;
import com.mpatric.mp3agic.Mp3File;
import com.mpatric.mp3agic.UnsupportedTagException;
public class test
{
public static void main(String args[])
{
     Mp3File mp3file = null;
    try {
        mp3file = new Mp3File("dom.mp3");
    } catch (UnsupportedTagException | InvalidDataException | IOException e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
        System.out.println("File not found.");
    }
        if (mp3file.hasId3v1Tag()) {
          ID3v1 id3v1Tag = mp3file.getId3v1Tag();
          System.out.println("Track: " + id3v1Tag.getTrack());
          System.out.println("Artist: " + id3v1Tag.getArtist());
          System.out.println("Title: " + id3v1Tag.getTitle());
          System.out.println("Album: " + id3v1Tag.getAlbum());
          System.out.println("Year: " + id3v1Tag.getYear());
          System.out.println("Genre: " + id3v1Tag.getGenre() + " (" + id3v1Tag.getGenreDescription() + ")");
          System.out.println("Comment: " + id3v1Tag.getComment());
        }
}
} 
```

**例外**

```
java.io.FileNotFoundException: File not found dom.mp3
at com.mpatric.mp3agic.FileWrapper.init(FileWrapper.java:26)
at com.mpatric.mp3agic.FileWrapper.<init>(FileWrapper.java:19)
at com.mpatric.mp3agic.Mp3File.<init>(Mp3File.java:53)
at com.mpatric.mp3agic.Mp3File.<init>(Mp3File.java:41)
at test.main(test.java:13)
File not found.
Exception in thread "main" java.lang.NullPointerException at test.main(test.java:19) 
```

mpatric 包是第 3 方。我猜这很好用。

“与运行 java 进程的目录相同”是什么意思？请给我一个例子好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:00:09.913

打印这个：

```
 System.out.println("File not found."); 
```

具有误导性，鉴于此：

```
catch (UnsupportedTagException | InvalidDataException | IOException e) 
```

您需要转储异常（`e.printStackTrace()`以确定真正的问题）。

您的文件与您`.mp3`的文件位于同一目录中`.java`。但这不相关。它是否与您运行 java 进程的目录位于同一目录中？*这就是它需要的地方*。

例如

```
$ cd /mydir
$ java com.whatever.TestJava 
```

在上面你的`.mp3`文件需要在`/mydir`目录中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:07:16.420

正如@BrianAgnew 所提到的，您应该转储您的异常。

**更新** 试试这个并选择您要使用的文件：

```
public class Test
{
public static void main(String args[])
{
    Mp3File mp3file = null;
    try {
        JFileChooser jfc = new JFileChooser();
        int fileResult = jfc.showOpenDialog(null);
        if (fileResult == JFileChooser.APPROVE_OPTION) {
            String path = jfc.getSelectedFile().getPath();
            mp3file = new Mp3File(path);
            if (mp3file!=null && mp3file.hasId3v1Tag()) {
            ID3v1 id3v1Tag = mp3file.getId3v1Tag();
            System.out.println("Track: " + id3v1Tag.getTrack());
            System.out.println("Artist: " + id3v1Tag.getArtist());
            System.out.println("Title: " + id3v1Tag.getTitle());
            System.out.println("Album: " + id3v1Tag.getAlbum());
            System.out.println("Year: " + id3v1Tag.getYear());
            System.out.println("Genre: " + id3v1Tag.getGenre() + "("+id3v1Tag.getGenreDescription() + ")");
            System.out.println("Comment: " + id3v1Tag.getComment());
          } else {
            System.out.println("The mp3 file does not exists or does not have a ID3v1Tag");
          }
        }
    } catch (UnsupportedTagException | InvalidDataException | IOException e) {
        System.err.println("File not found.");
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:09:50.043

解决了！System.out.println(System.getProperty("user.dir")); 将其粘贴到我的代码中，找到了根目录。显然它与 src 和 bin 文件夹处于同一级别。将文件粘贴在那里，它现在就像一个魅力。

好吧，如果有人想知道您是否可以更改主目录，那么您不能。

如果要访问另一个文件夹，则必须使用目录遍历。假设您的音乐文件“Ride the Lightning.mp3”位于 C:\Users\"Your Username"\Music\

然后要阅读，您必须执行以下操作：

```
mp3file = new Mp3File("../../../Music/Misc/Ride the Lightning.mp3"); 
```

为 Brian 和 Chasmo 的有用帖子干杯。

# android - 如何使用自定义适配器创建列表视图

> ID：13643863
> 
> 赞同：-2
> 
> 时间：2012-11-30T10:58:58.850
> 
> 标签：android, json, listview

我有以下代码：

```
package com.example.myfirstapp;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.UnknownHostException;
import java.util.ArrayList;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;

public class FetchData extends Activity {
    private TextView textView;
    private JSONObject jObject;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fetch_data);
        textView = (TextView) findViewById(R.id.TextView1);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        readWebpage(message);
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            for (String url : urls) {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                try {
                    HttpResponse execute = client.execute(httpGet);
                    InputStream content = execute.getEntity().getContent();

                    BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        response += s;
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return response;
            mParseResponse(response);
        }

        @Override
        protected void onPostExecute(String result) {
            textView.setText(result);
        }
    }

    public void readWebpage(String message) {

        //Intent intent = getIntent();
        //String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(new String[] {message});

    }

    ArrayList<String> year, title, details, director, rating, cover;
    // For Parse Login Response From Server
    public void mParseResponse(String response) throws UnknownHostException { 

        year=new ArrayList<String>();
        title=new ArrayList<String>();
        details=new ArrayList<String>();
        director=new ArrayList<String>();
        rating=new ArrayList<String>();
        cover=new ArrayList<String>();

        try {
            JSONObject jObject = new JSONObject(response);
            JSONObject jsonobjresults = jObject.getJSONObject("results");
            JSONArray jsonarrayresult = jsonobjresults.getJSONArray("result");
            for(int i=0;i<jsonarrayresult.length(); i++){
                JSONObject mJsonObj = jsonarrayresult.getJSONObject(i);
                year.add(mJsonObj.getString("year"));
                title.add(mJsonObj.getString("title"));
                details.add(mJsonObj.getString("details"));
                director.add(mJsonObj.getString("director"));
                rating.add(mJsonObj.getString("rating"));
                cover.add(mJsonObj.getString("cover"));
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

我对如何创建自定义适配器感到困惑。是的，我已经完成了教程，但仍然存在混乱。另外，当我调用 mParseResponse 时出现错误。任何想法我哪里出错了，我应该如何实现列表视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:34:26.153

也许这个简单的示例自定义适配器列表视图会用这些东西让你站起来。主要活动

```
public class MainActivity extends Activity {

    String [] children = {
            "Award 1",
            "Award 2",
            "Award 3",
            "Award 4",
            "Award 5",
            "Award 6",
            "Award 7",
            "Award 8",
            "Award 9",
            "Award 10",
            "Award 11",
            "Award 12",
            "Award 13",
            "Award 14",
            "Award 15"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ListView list = (ListView) findViewById(R.id.listview);
        CustomAdapter adapter = new CustomAdapter(this, children);
        list.setAdapter(adapter);
    } 
```

自定义适配器

```
public class CustomAdapter extends BaseAdapter {
//  you could have instead extend ArrayAdapter if you wished, i find it less fickle but less flexible
//  extends CursorAdapter is available too for listviews backed by cursors
    private LayoutInflater inflator;
    private String[] children;

    public CustomAdapter(Context context, String[] children) {
        super();
//      pass what you need into the constructor. in this case the string array and context.
//      do as much as you can here and not in getView because getView acts for each row
//      --> it will greatly help performance
        this.children = children;
        inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
//      v----  your listview won't show anything if this is left default (at 0).  
        return children.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
//      getView is where all the action takes place
//      first inflate the xml that holds the row and somehow connect it to convertView, the parameter
//      checking if null allows these views to be recycled when they go off-screen not just made one per row
//      ---> it will greatly help performance 
        if (convertView == null) {
            convertView = inflator.inflate(R.layout.row, parent, false);
        }
//      then find the individual views with this xml (everything just like onCreate)
        ImageView img = (ImageView) convertView.findViewById(R.id.imageView1);
        TextView tv = (TextView) convertView.findViewById(R.id.textView1);
//      then perform your actions to the your views
//      each textView is set to an element in the array based on position. this is my listview limiter here.
//      each imageview is set to the same picture but you should now have an idea how to set different images (based on position)
//      using listview position in correspondence with array/arraylist positions is a very useful technique.
        img.setImageResource(R.drawable.ic_launcher);
        tv.setText(children[position]);
//      v---- return your view, it's important.
        return convertView;
    }

} 
```

行.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="TextView" />

</RelativeLayout> 
```

结果 ![射击](../Images/344176a062aeaf27b0121ef63508c953.png)

要熟悉 listview，请观看此视频： [http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

至于您的其他问题，您将不得不发布 logcat 以获得更好的响应。

# svg - 如何获得笔画的轮廓？

> ID：13643864
> 
> 赞同：11
> 
> 时间：2012-11-30T10:59:11.253
> 
> 标签：svg, raphael, d3.js, vector-graphics

我想将描边路径转换为填充对象。（以编程方式，在 JavaScript 中。）

这条线只是一条简单的曲线，一个坐标序列。我可以将这条线渲染为一条路径，并给它一个一定厚度的笔触......但我试图获得一个填充的形状而不是一条笔触线，这样我就可以对其进行进一步的修改，例如翘曲它，因此生成的“笔画”可能会在粗细上有所不同，或者会从其中切出自定义位（据我所知，这些东西都不适用于真正的 SVG 笔画）。

所以我试图手动将一条线“加厚”成一个实心形状。我找不到执行此操作的任何函数——我查看了[D3.js](http://d3js.org/)和[Raphaël](http://raphaeljs.com/)的文档，但没有运气。有谁知道可以做到这一点的库/函数？

或者，甚至更好：如果有人可以向我解释我将如何手动完成这项任务的几何理论，通过获取我拥有的线坐标列表并制定一条有效“抚摸”它的新路径，那将是惊人的。换句话说，当您告诉浏览器描边路径时，*浏览器*会做什么——它是如何计算出描边应该是什么形状的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:50:23.373

最近有一个类似的问题： [svg: generate 'outline path'](https://stackoverflow.com/questions/13416693/svg-generate-outline-path/13445211#13445211)

总而言之，这是一项不平凡的任务。正如我在对链接问题的回答中所提到的，PostScript 有一个用于生成路径的命令，该命令生成的输出与笔画基本相同，称为`strokepath`. 如果您在运行我在链接问题中发布的代码时查看 Ghostscript 吐出的内容，那会非常难看。甚至 Inkscape 也做得不好。我刚刚在 Inkscape 中尝试了 Path => Outline stroke （我认为这就是英文字幕应该说的），结果看起来与描边路径并不相同。

“最简单”的情况是，如果您只有非自相交的折线、多边形或不包含曲线的路径，因为一般情况下，您无法在 a 的右侧和左侧绘制精确的“平行”贝塞尔曲线将划定描边区域的非平凡贝塞尔曲线 - 它在数学上不存在。因此，您必须以一种或另一种方式对其进行近似。对于直线段，可以比较容易地找到精确解。

渲染带有曲线/圆弧的矢量路径的经典方法是使用足够平滑的折线来近似所有内容。[De Casteljau 算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)通常用于将贝塞尔曲线转换为线段。（这也是`strokepath`在 Ghostscript 中使用命令时出现的基本情况。）然后您可以找到分隔平行线段，但必须使用适当的 linejoin 和 miterlimit 规则正确连接它们。当然，不要忘记线帽。

我认为自相交路径可能会很棘手，因为您可能会在路径内部得到空心区域，即黑色路径的“交叉区域”可能会变成白色。[使用非零缠绕规则](http://en.wikipedia.org/wiki/Nonzero-rule)时，这可能不是开放路径的问题，但我会对此保持谨慎。对于封闭路径，您可能需要两条“分隔”路径以相反的方向运行。但我现在不确定这是否真的涵盖了所有潜在的陷阱。

抱歉，如果我对此造成了很多困惑，也许并没有太大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T11:21:26.073

这个页面有一个相当不错的关于贝塞尔曲线的教程，一般来说有一个关于偏移曲线的很好的部分。

[http://pomax.github.io/bezierinfo/](http://pomax.github.io/bezierinfo/)

可以在这里找到一种不太精确但可能更快的方法。

[http://seant23.wordpress.com/2010/11/12/offset-bezier-curves/](http://seant23.wordpress.com/2010/11/12/offset-bezier-curves/)

没有数学答案，因为平行于贝塞尔曲线的曲线通常不是贝塞尔曲线。大多数方法都有退化的情况，尤其是在处理一系列曲线时。

把一条简单的曲线想象成一条没有问题点的曲线。没有尖点，没有环，没有拐点，理想情况下是严格增加的曲率。将所有起始曲线切成这些简单的曲线。找出这些简单曲线的所有偏移曲线。将所有偏移曲线重新放在一起处理间隙和交叉点。如果您可以选择使用二次曲线，则它们会更容易处理。

我认为大多数浏览器都会做一些类似于 processingjs 的事情，因为即使使用二次曲线，它们也会出现退化的情况。例如，看曲线 200,300 719,301 500,300 的厚度为 100 或更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T18:17:10.570

标准方法是 Tiller-Hanson 算法（二维轮廓的偏移量，1984 年，令人恼火的是它不是免费在线的），它创建了一个很好的近似值。这个想法是，因为每条贝塞尔曲线的控制点都位于与曲线的起点和终点相切的线上，所以平行曲线将具有相同的属性。所以我们偏移曲线的起点和终点，然后使用这些交点找到新的控制点。但是，这对于尖锐的曲线会产生非常糟糕的结果，因此第一步是将原始曲线一分为二，这对贝塞尔曲线很容易做到，直到它转过一个足够小的角度。

需要其他改进来处理（i）平行线之间的交叉点，在每个顶点的内部；(ii) 插入圆弧以填充每个顶点外侧的间隙；(iii) 添加端盖 - 方形、对接或圆形。

Tiller-Hanson 很难实现，但是 FreeType 库中有一个很好的开源实现，在 ftstroke.c (http://git.savannah.gnu.org/cgit/freetype/freetype2.git/tree/src/基础/ftstroke.c)。

很抱歉，集成此代码可能相当困难，但我已经成功使用它，并且效果很好。

# dialog - JQuery 模态对话框表单提交

> ID：13643865
> 
> 赞同：0
> 
> 时间：2012-11-30T10:59:12.017
> 
> 标签：dialog, jquery-ui-dialog

我有一个 JQuery 模态表单，当我添加提交事件时，它不能显示为对话框，而是嵌入到浏览器窗口中。如果我取消注释下面的单击事件，它将嵌入到浏览器窗口中，而不是显示为对话框。

```
$(document).ready(function(){

        //$("#moveTicketBtn").click() {
        //  $("#moveUnknownTicket").submit();
        //};

        $("#moveUnknownTicketDialog").dialog(
        {
            title: "Move Unknown Ticket",
            autoOpen: true,
            modal: true, 
            resizable: true, 
            stack: true, 
            width: 500, 
            height: 350 
        }); 

    }); 
```

有谁知道为什么会这样？请帮忙。谢谢。

编辑问题：

我在此对话框中有一个表单，并且在提交时（onsubmit，onblur）不调用 javascript。是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:02:28.147

尝试

```
$("#moveTicketBtn").click(function() {
  $("#moveUnknownTicket").submit();
}); 
```

您必须在点击事件的 () 中插入您的函数。

更多信息在这里：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:05:28.117

这应该够了吧：

[http://jsfiddle.net/uQCKJ/](http://jsfiddle.net/uQCKJ/)

如您所见，表单已提交，因为触发了警报框

```
 $("#moveTicketBtn").click(function() {
    $("#moveUnknownTicket").submit();
}); 
```

我已经将提交放在点击功能中，虽然效果很好。

# eclipse - Eclipse 中 Struts 的代码完成插件

> ID：13643869
> 
> 赞同：1
> 
> 时间：2012-11-30T10:59:23.590
> 
> 标签：eclipse, struts2, eclipse-plugin

我已经从 JSF 转到 Struts，以便更全面地了解这两个框架。在 JSF 中，我创建了一个 XHTML 文件并插入了必要的 JSF 标记库，如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"> 
```

我能够完成代码。例如 - 它可以告诉我哪些变量可以从附加到该 bean 的特定类中读取/写入 - 当您认为您已经正确创建它们但没有创建它们时很有帮助。我想知道**Struts**是否有等价物？

例如，在我的登录屏幕中，我有以下内容：

```
 <ul>
    <li><a href="User/Login.action">first example</a></li>
</ul> 
```

是否有可以添加的库或插件可以在必要时自动完成此操作。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:17:04.567

把它放在页面的顶部：

```
<%@ taglib prefix="s" uri="/struts-tags"%> 
```

这是所有标签[标签参考的参考](http://struts.apache.org/2.x/docs/tag-reference.html)

顺便提一句。欢迎来到 Struts2。

# iphone - 游戏中心不可用 玩家未登录

> ID：13643870
> 
> 赞同：1
> 
> 时间：2012-11-30T10:59:28.193
> 
> 标签：iphone, ios6, game-center

在 iOS 6 上，当玩家未登录并尝试使用 GameCenter 时，会弹出 UIAlertView 和我在标题中输入的文本。“游戏中心不可用玩家未登录”。我的问题是可以用我自己的界面元素替换 UIAlertView 吗？

```
[GKLocalPlayer localPlayer].authenticateHandler = ^(UIViewController *viewController, NSError *error)
            {
                    if ([[GKLocalPlayer localPlayer] isAuthenticated])
                    {
                        NSLog(@"[gamecenter] player authenticated: %@\n", [GKLocalPlayer localPlayer]);
                        [self gamecenterLoadAchievements];

                        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
                        {
                            // Insert application-specific code here to clean up any games in progress.
                            if (acceptedInvite)
                            {
                                NSLog(@"Accepted invitation");

                                isInvited = YES;

                                [[GameLevel sharedGameLevel] setCurrentGameMode:GameModeGameCenter];

                                GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
                                mmvc.matchmakerDelegate = self;

                                AppDelegate * delegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
                                [delegate.viewController presentModalViewController:mmvc animated:YES];

                            }
                            else if (playersToInvite)
                            {
                                NSLog(@"Players to invite");

                                GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
                                request.minPlayers = 2;
                                request.maxPlayers = 2;
                                request.playersToInvite = playersToInvite;

                                GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
                                mmvc.matchmakerDelegate = self;
                                [presentingViewController presentModalViewController:mmvc animated:YES];
                            }

                        };
                    }
                    else
                    if (viewController)
                    {
                        AppDelegate          *delegate        = (AppDelegate *) [UIApplication sharedApplication].delegate;
                        NavigationController *_viewController = delegate.viewController.navController;

                        [_viewController presentViewController: viewController animated: YES completion:nil];
                    }
                    else
                    {
                        NSLog(@"[gamecenter] %@\n", error);

                        gcLoginFailed = YES;
                        if ([[error domain] isEqualToString:GKErrorDomain])
                        {
                            if ([error code] == GKErrorNotSupported)
                                gcIsSupported = NO;
                            else
                                if ([error code] == GKErrorCancelled)
                                    gcLoginCancelled = YES;
                        }
                    }
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:03:29.777

只是不要使用 UIAlertView 使用您自己的图形和 UIButton

如果您在身份验证中使用 disableGameCenter 方法，请不要使用它，而是使用整数等 int isPlayerSignedIn 。只需将其返回 1 或 0 。所以 ;

```
if (isPlayerSignedIn==0) {

   //display your graphics

} 
else do nothing . 
```

编辑 ：

```
else
if (viewController)
{
    AppDelegate          *delegate        = (AppDelegate *) [UIApplication sharedApplication].delegate;
    NavigationController *_viewController = delegate.viewController.navController;
    [_viewController presentViewController: viewController animated: YES completion:nil];
} 
```

只是如果你不使用这些代码行你会发现你没有得到那个 UIAlertView

然后你可以实现一个“游戏中心不可用”的员工，但你也必须实现一个登录屏幕。

# c# - 从 SQL 表中查找地址 (ArcSDE)

> ID：13643873
> 
> 赞同：1
> 
> 时间：2012-11-30T10:59:31.033
> 
> 标签：c#, asp.net, gis, esri

我是开发新手，尤其是 C#。在这里深陷其中，但学习很快:)

我正在 VS2008 中开发一个简单的 Mapping Web App。多亏了 Esri 提供的 Web 控件，我可以在我的表单中启动并运行地图窗口。

我现在需要在表单上提供地址搜索工具，用户可以在其中输入邮政编码、道路名称等到框中，然后地图窗口会缩放到所需的位置。

我知道这可以使用谷歌地图寻址等来实现，但我需要使用我们数据库 (ArcSDE) 中的地址表。我的老板建议在 .net 中使用 SQLDataReader 来实现这一点？我们的地址表包括道路名称、邮政编码等列以及每条记录（点）的 X 和 Y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:23:57.047

如果您有每条记录的 XY，您可以只查询数据库以获取提供的地址（使用 SqlDataReader 或任何其他类型的数据库访问技术）并使用它来缩放到正确的坐标。另外，您的地图使用什么 API。我假设它是 ESRI（即 Flex for ArcGIS）。我认为您实际上可以在 ESRI 的 api 中包含一个提供地理编码服务的控件，您也可以使用该控件从数据库中获取坐标。

# jsp - 如何绕过包含单引号的网址的站点管理员？

> ID：13643876
> 
> 赞同：2
> 
> 时间：2012-11-30T10:59:39.877
> 
> 标签：jsp, authentication, web-applications, xss, siteminder

在我的应用程序代码中，我使用这种 url 将用户从一个页面重定向到另一个页面：`http://myhost:8001/myapp/list.jsp?name=abc'd&age=10` 这里的 name 是用户可以在第一页上编辑的动态字段，其中可以包含单引号。

现在的问题是，当我使用 siteminder 进行身份验证时，每个 url 都会通过它。并且 siteminder 将此单引号视为此类攻击的尝试并阻止此 url 并将用户带到某些访问被阻止的页面。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T22:38:18.253

我不认为 URI 编码会起作用—— Siteminder 足够聪明，可以解决这个问题。某种其他类型的编码，例如 base64，或者只是用其他东西替换撇号，然后在服务器端将其替换回。或者，您可以在 Siteminder 代理配置中禁用 BadCSSChar 检查撇号。请注意，您的网站可能会受到 XSS 攻击，并且您的应用程序必须负责检查任何用户提供的字符串，然后再将它们显示在网页上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:28:44.133

尝试使用 %27 对单引号进行 URI 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T14:15:34.880

如果您在两端都有代码运行，您可以发送 mySingleQuoteToken 并且您在远端的代码可以检测到并将其替换为 '

发送端的预处理 - 在调用 java.net.URLEncoder 之前：

```
url_new = url_old.replaceAll("'", "mySingleQuoteToken"); 
```

接收端的后处理 - 在调用 java.net.URLDecoder 之后：

```
url_new = url_old.replaceAll("mySingleQuoteToken", "'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-09T19:54:56.320

以下步骤应该可以帮助您解决问题。

1.  在 HTML 表单中包含字段名称和年龄
2.  使用操作属性指定不带查询参数的 URL。
3.  使用方法属性将方法指定为 POST。
4.  使用 enctype 属性将 enctype 指定为 application/x-www-form-urlencoded
5.  输入值并提交表单。

    ```
    <form action="/myapp/list.jsp" method="post" enctype="application/x-www-form-urlencoded">
        <input type="text" id="name" name="name" value=""/>
      <br/>
      <input type="text" id="age" name="age" value=""/>
      <br/>
      <input type="submit"/>
    </form> 
    ```

# jquery - Jquery UI Draggable Snapping with margin

> ID：13643878
> 
> 赞同：3
> 
> 时间：2012-11-30T10:59:53.577
> 
> 标签：jquery, jquery-ui, draggable

我正在开发一个项目，用户可以在其中自定义自己的仪表板页面。这意味着他们可以将组件拖到页面上并随意放置它们。

为了获得一个漂亮的布局页面，我希望组件彼此对齐。此时我正在使用 snap: true 属性，它将组件彼此相邻放置。但是，我想在它们折断后在组件之间留出一些空间。因此，不是捕捉到另一个组件的确切位置，而是必须以 5 个像素的间隙捕捉到另一个组件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:18:59.443

需要考虑的几个选项：

*   用 2.5 像素的填充和透明背景将每个组件包裹在一个封闭元素（例如 div）中，并使这些封闭元素成为可拖动的元素。因此，当封闭元素吸附在一起时，您当前的元素将看起来已经吸附在一起，但彼此之间有 5 个像素的间隙

*   订阅可拖动项目上的“停止”事件，并在捕捉完成后使用它手动将它们重新定位到 5 像素的间隙

*   设置 'droppable' 元素以接受 'draggable' 组件，布置它们以确保每个元素之间保留 5 个像素的间隙

# asp.net - ASP.NET Web 应用程序在客户端 PC 中执行缓慢

> ID：13643886
> 
> 赞同：1
> 
> 时间：2012-11-30T11:00:24.183
> 
> 标签：asp.net, performance, gridview

我正在开发一个 ASP.NET Web 应用程序。我的一个在客户端机器上执行非常慢。在我使用 GridView 的地方，其中包括一些功能和一些控件，例如组合框输入框，每个控件都有一些功能和计算。

```
Please suggest me how can I improve this?

Page on content.

 - GridView
    1\. Combobox with jquery datafiltering 
    2\. Inputbox with data check function 
    3\. More function of grid like update,add, new, delete.

I am also use Viewsate on this page.

<%@ Page Title="" Language="C#" MasterPageFile="~/UI/Healthcare.Master" AutoEventWireup="true" CodeBehind="frmStockIn.aspx.cs" Inherits="Com.Codespecies.Healthcare.UI.Pharmacy.frmStockIn" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder_header" runat="server">

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server"> 
```

……………………

```
 <div class="box_bg" style="height: auto; width: 1020px; border: 0px solid; border-color: #0167AA; margin:5px 0px 0px 0px; float:left;">

                <div style=" min-height:30px; width: 1005px;  padding: 0px 0px 0px 2px;">
                    <div style="min-height: 30px; width:auto; width:300px; float: left; font-weight: bold;">
                        Drugs Details
                    </div>
                    <div style="min-height: 30px; width: 600px; float: left;">
                        <div id="msg" style="height:auto; float:left;">
                            <asp:Label ID="lblMsg" runat="server" Text=" "></asp:Label>
                        </div>
                        <div id="ajaxLoader" style=" display:none; margin:2px 0px 0px 0px; float:left;">
                            <img height="20px" width="20px" src="../../image/ajax-loading/ajax-loading-2.gif" alt="loader" border="0" style=""/> 
                        </div>
                    </div>
                </div>

                <div style=" width: auto; padding: 0px 0px 5px 0px;">

                <asp:GridView ID="gvStockIn" runat="server" AllowPaging="True" Width="1020px"
                        AlternatingRowStyle-HorizontalAlign="Left" AlternatingRowStyle-VerticalAlign="Middle" 
                AutoGenerateColumns="False" BorderStyle="None" DataKeyNames="ID" 
                        Font-Names="Calibri" Font-Size="Small" ForeColor="#333333" GridLines="None" 
                PageSize="100" ShowFooter="True" ShowHeaderWhenEmpty="True" 
                        onrowcancelingedit="gvStockIn_RowCancelingEdit" onrowcommand="gvStockIn_RowCommand" 
                onrowdeleting="gvStockIn_RowDeleting" onrowediting="gvStockIn_RowEditing" 
                        onrowupdating="gvStockIn_RowUpdating" onrowdatabound="gvStockIn_RowDataBound" 
                        AllowSorting="True" TabIndex="5">
                <AlternatingRowStyle BackColor="#DCEEFC" Font-Names="Calibri" HorizontalAlign="Left" VerticalAlign="Middle" />

                    <Columns>

                        <asp:TemplateField HeaderText="SL" SortExpression="ID">
                            <ItemStyle Width="30px" />
                            <HeaderStyle Width="30px" />
                            <FooterStyle Width="30px" />
                            <EditItemTemplate>
                                <asp:Label ID="lblSerialNo" runat="server" Text='<%# Eval("ID") %>' Width="30px"></asp:Label>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:Label ID="lblNewSerialNo" runat="server" Width="30px">NA</asp:Label>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblSerialNo" runat="server" Text='<%# Bind("ID") %>' Width="30px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Drug" >
                            <ItemStyle Width="170px" />
                            <HeaderStyle Width="170px" />
                            <FooterStyle Width="170px" />
                            <EditItemTemplate>
                                <asp:Label ID="lblDrug" runat="server" Text='<%# Bind("DRUG_NAME") %>' Width="170px"></asp:Label>
                                <%--<asp:TextBox ID="txtDrug" runat="server" CssClass="Drug" Text='<%# Eval("DRUG_NAME") %>' Width="100px"></asp:TextBox>--%>
                            </EditItemTemplate>
                            <FooterTemplate>                               
                                <asp:DropDownList CssClass="fire_selected_change_event combobox combobox1" ID="ddlNewDrug" runat="server" onselectedindexchanged="ddlNewDrug_SelectedIndexChanged">
                                </asp:DropDownList>

                                <%--<asp:TextBox ID="txtNewDrug" runat="server" CssClass="Drug" Width="100px"></asp:TextBox>--%>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblDrug" runat="server" Text='<%# Bind("DRUG_NAME") %>' Width="170px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Presentation">
                            <ItemStyle Width="130px" />
                            <HeaderStyle Width="130px" />
                            <FooterStyle Width="130px" CssClass="drug_list1"/>
                            <EditItemTemplate>
                                <asp:Label ID="lblPresentation" runat="server" Text='<%# Bind("PRESENTATION_NAME") %>' Width="130px"></asp:Label>
                                <%--<asp:TextBox ID="txtPresentation" runat="server" CssClass="Presentation" Text='<%# Eval("PRESENTATION_NAME") %>' Width="110px"></asp:TextBox>--%>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:DropDownList CssClass="fire_selected_change_event combobox combobox1" ID="ddlNewPresentation" runat="server" AutoPostBack="True" onselectedindexchanged="ddlNewPresentation_SelectedIndexChanged">
                                </asp:DropDownList>
                                <%--<asp:TextBox ID="txtNewPresentation" runat="server" CssClass="Presentation" Width="110px"></asp:TextBox>--%>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblPresentation" runat="server" Text='<%# Bind("PRESENTATION_NAME") %>' Width="130px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Unit Strength">
                            <ItemStyle Width="130px" />
                            <HeaderStyle Width="130px" />
                            <FooterStyle Width="130px" CssClass="drug_list1"/>
                            <EditItemTemplate>
                                <asp:Label ID="lblUnitStrength" runat="server" Text='<%# Bind("DRUG_UNIT_STRENGTH") %>' Width="110px"></asp:Label>
                                <%--<asp:TextBox ID="txtUnitStrength" runat="server" CssClass="UnitStrength" Text='<%# Eval("DRUG_UNIT_STRENGTH") %>' Width="110px"></asp:TextBox>--%>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:DropDownList CssClass="fire_selected_change_event combobox combobox1" ID="ddlNewUnitStrength" runat="server" AutoPostBack="True" onselectedindexchanged="ddlNewUnitStrength_SelectedIndexChanged">
                                </asp:DropDownList>
                                <%--<asp:TextBox ID="txtNewUnitStrength" runat="server" CssClass="UnitStrength" Width="110px"></asp:TextBox>--%>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblUnitStrength" runat="server" Text='<%# Bind("DRUG_UNIT_STRENGTH") %>' Width="110px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Mfg Date">
                            <ItemStyle Width="65px" />
                            <HeaderStyle Width="65px" />
                            <FooterStyle Width="65px" />
                            <EditItemTemplate>
                                <asp:TextBox ID="txtManufacturerDate" runat="server" CssClass="date_property" Text='<%# Eval("DRUG_MANUFACTURER_DATE", "{0:dd/MM/yyyy}") %>' Height="25px" Width="65px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewManufacturerDate" runat="server" CssClass="date_property" Height="25px" Width="65px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblManufacturerDate" runat="server" Text='<%# Bind("DRUG_MANUFACTURER_DATE", "{0:dd/MM/yyyy}") %>' Height="25px" Width="65px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Exp. Date">
                            <ItemStyle Width="65px" />
                            <HeaderStyle Width="65px" />
                            <FooterStyle Width="65px" />
                            <EditItemTemplate>
                                <asp:TextBox ID="txtExpireDate" runat="server" CssClass="date_property" Text='<%# Eval("DRUG_EXPIRE_DATE", "{0:dd/MM/yyyy}") %>' Height="25px" Width="65px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewExpireDate" runat="server" CssClass="date_property" Height="25px"  Width="65px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblExpireDate" runat="server" Text='<%# Bind("DRUG_EXPIRE_DATE", "{0:dd/MM/yyyy}") %>' Height="25px" Width="65px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Qty">
                            <ItemStyle Width="40px" HorizontalAlign="Right" />
                            <HeaderStyle Width="40px" HorizontalAlign="Right" />
                            <FooterStyle Width="40px" HorizontalAlign="Right" />
                            <EditItemTemplate>
                                <asp:TextBox ID="txtQuantity" runat="server" CssClass="check_decimal Quantity" Text='<%# Eval("QUANTITY") %>' Height="25px" Width="40px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewQuantity" runat="server" CssClass="check_decimal Quantity" Height="25px" Width="40px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblQuantity" runat="server" Text='<%# Bind("QUANTITY") %>' Height="25px" Width="40px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Cost Price">
                            <ItemStyle Width="70px" HorizontalAlign="Right"/>
                            <HeaderStyle Width="70px" HorizontalAlign="Right"/>
                            <FooterStyle Width="70px" HorizontalAlign="Right"/>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtCostPrice" runat="server" CssClass="check_decimal CostPrice" Text='<%# Eval("COST_PRICE") %>' ontextchanged="txtCostPrice_TextChanged" AutoPostBack="true" Height="25px" Width="60px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewCostPrice" runat="server" CssClass="check_decimal CostPrice" ontextchanged="txtNewCostPrice_TextChanged" AutoPostBack="true" Height="25px" Width="60px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblCostPrice" runat="server" Text='<%# Bind("COST_PRICE") %>' Height="25px" Width="60px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Sale Price">
                            <ItemStyle Width="70px" HorizontalAlign="Right"/>
                            <HeaderStyle Width="70px" HorizontalAlign="Right"/>
                            <FooterStyle Width="70px" HorizontalAlign="Right"/>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtSellPrice" runat="server" CssClass="check_decimal SellPrice" Text='<%# Eval("SELL_PRICE") %>' Height="25px" Width="60px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewSellPrice" runat="server" CssClass="check_decimal SellPrice" Height="25px" Width="60px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblSellPrice" runat="server" Text='<%# Bind("SELL_PRICE") %>' Height="25px" Width="60px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Discount">
                            <ItemStyle Width="60px" HorizontalAlign="Right"/>
                            <HeaderStyle Width="60px" HorizontalAlign="Right"/>
                            <FooterStyle Width="60px" HorizontalAlign="Right"/>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtDiscount" runat="server" CssClass="check_decimal percentage" Text='<%# Eval("DISCOUNT") %>' Height="25px" Width="60px"></asp:TextBox>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewDiscount" runat="server" CssClass="check_decimal percentage" Height="25px" Width="60px"></asp:TextBox>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblDiscount" runat="server" Text='<%# Bind("DISCOUNT") %>' Height="25px" Width="60px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Sub Total">
                            <ItemStyle Width="70px" HorizontalAlign="Right"/>
                            <HeaderStyle Width="70px" HorizontalAlign="Right"/>
                            <FooterStyle Width="70px" HorizontalAlign="Right"/>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtSubTotal" runat="server" CssClass="check_decimal" Text='<%# Eval("SUB_TOTAL_AMOUNT") %>' ontextchanged="txtSubTotal_TextChanged" AutoPostBack="true" Height="25px" Width="70px"></asp:TextBox>
                                <%--<asp:Label ID="lblSubTotal" runat="server" Text='<%# Eval("SUB_TOTAL_AMOUNT") %>' Height="25px" Width="80px"></asp:Label>--%>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:TextBox ID="txtNewSubTotal" runat="server" CssClass="check_decimal" Text='' ontextchanged="txtNewSubTotal_TextChanged" AutoPostBack="true" Height="25px" Width="70px"></asp:TextBox>
                                <%--<asp:Label ID="lblSubTotal" runat="server" Text='' Height="25px" Width="80px"></asp:Label>--%>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblSubTotal" runat="server" Text='<%# Bind("SUB_TOTAL_AMOUNT") %>' Height="25px" Width="70px"></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Action" ShowHeader="False">
                            <ItemStyle Width="100px" HorizontalAlign="Center"/>
                            <HeaderStyle Width="100px" HorizontalAlign="Center"/>
                            <FooterStyle Width="100px" HorizontalAlign="Center"/>
                            <EditItemTemplate>
                                 <asp:ImageButton ID="lnkUpdate"    ToolTip="Update"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/update.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="Update" ></asp:ImageButton>
                                <asp:ImageButton ID="lnkCancel"    ToolTip="Cancel"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/cancel.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="Cancel" ></asp:ImageButton>
                            <%--    <asp:LinkButton ID="lnkUpdate" runat="server"   CausesValidation="False" OnClientClick="load_ajax_drugs_details();" CommandName="Update" Text="Update"></asp:LinkButton>
                                <asp:LinkButton ID="lnkCancel" runat="server"  CausesValidation="False" OnClientClick="load_ajax_drugs_details();" CommandName="Cancel" Text="Cancel"></asp:LinkButton>--%>
                            </EditItemTemplate>
                            <FooterTemplate>
                                <asp:ImageButton ID="lnkNew"    ToolTip="New"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/add.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="New" ></asp:ImageButton>
                                <asp:ImageButton ID="lnkRefresh"    ToolTip="Refresh"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/refresh.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="Refresh" ></asp:ImageButton>
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:ImageButton ID="lnkEdit"    ToolTip="Edit"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/edit.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="Edit" ></asp:ImageButton>
                                <%--<asp:LinkButton ID="lnkEdit" ToolTip="Edit"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/edit.png" Height="10px" Width="15px" CausesValidation="False"  CommandArgument="" CommandName="Edit" Text="Edit"></asp:LinkButton>--%>
                            <asp:ImageButton ID="lnkDelete"    ToolTip="Delete"  runat="server" OnClientClick="load_ajax_drugs_details();" ImageUrl="../../image/delete.png" Height="25px" Width="25px" CausesValidation="False"  CommandArgument="" CommandName="Delete" ></asp:ImageButton>
                            </ItemTemplate>
                        </asp:TemplateField>                   

                    </Columns>

                <HeaderStyle BackColor="#507CD1" ForeColor="White" HorizontalAlign="Left" VerticalAlign="Middle" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Right" VerticalAlign="Middle" />
                <RowStyle Font-Names="Calibri" /> 
                <FooterStyle CssClass="drug_list"></FooterStyle>
                </asp:GridView> 

                </div>

               .....
               .....

          </ContentTemplate>
          </asp:UpdatePanel>
        </div>

</asp:Content>

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:24:54.143

这个问题有很多原因。据我从你的问题中理解，我会建议一些你需要看看的地方。

1）检查您从数据库中检索到的数据量，以便主要显示网格视图。

2）将上述控件添加到gridview不会使其性能不佳。但是您谈论的计算可能是一个原因。深入查看代码，检查是否有任何长时间运行的循环或其他东西那里。

3）如果前两个没有帮助您进行分析。对于您的问题，您只需要试用版的[ant 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。安装配置文件后，找出哪个数据库调用或 .net 函数需要更多时间来执行，然后对其进行调试。

# php - 在 PHP 中使用 cURL 的 GET 或 POST 发送参数哪个更安全

> ID：13643888
> 
> 赞同：1
> 
> 时间：2012-11-30T11:00:26.060
> 
> 标签：php, security, curl, protocols

我想以安全的方式与 API 连接，并且我正在`cURL`使用 HTTPS 和 SSL 来进行连接。

现在，我想知道在安全性方面什么更好，通过`GET`or发送数据`POST`：

```
$ch = curl_init("http://api.website.com/connect.php?user=xxx&pass=xxxx");
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);

$result = curl_exec($ch);
curl_close($ch); 
```

或者

```
$param['user'] = 'xxxx';
$param['pass'] = 'xxxx';
$ch = curl_init("http://api.website.com/connect.php");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $Parameters);

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);

$result = curl_exec($ch);
curl_close($ch); 
```

我还意识到`POST`检索数据要慢得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:04:34.857

两者都不。“GET 参数”是 URL 的一部分，它是 HTTP 请求标头的一部分，“POST 参数”是 HTTP 请求正文的一部分。两者都是同一个 HTTP 请求的一部分，都是纯文本。“安全”没有区别。

根据请求的类型在语义上使用 GET 或 POST，而不是出于安全考虑。

唯一的问题是，请求的 URL 比整个请求正文更有可能出现在日志文件中。但是一个日志记录将是您将数据发送到的服务，所以它没有太大的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:06:13.427

它们都不是安全的，但如果您使用安全连接 (https)，​​您可以使用 POST，因为正文将被加密。发送密码不是一个好主意，即使是带有 URI 的用户名也不行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:09:02.423

在这个原因中，因为您使用的是 HTTPS，GET 和 POST 与彼此一样安全，因为它们都将在传输层上进行加密。

例如，如果您没有使用 HTTPS，那么在某些情况下，POST 可能会*更好*，但不一定更*安全*。这是因为服务器通常记录查询字符串，而通常不记录 POST 数据。

# sql - 将列的值作为相同查询的不同列分隔

> ID：13643890
> 
> 赞同：5
> 
> 时间：2012-11-30T11:00:28.197
> 
> 标签：sql

我有一个`UTENSILS`包含 3 列的表格，如下所示：

```
CLASS_NAME   RANGE    COUNT
---------------------------
pens         0-0.5     200
pencil       0-0.5      50
pens         0.5-1.0   300 
pencil       0.5-1.0    40
pens         1.0-1.5   150
pencil       1.0-1.5    45 
```

我想要一个显示上表结果的查询，如下所示：

```
RANGE      Pens        Pencils
------------------------------
0-0.5       200          50
0.5-1.0     300          40
1.0-1.5     150          45 
```

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:04:20.627

您正在尝试做的事情被称为`PIVOT`. 这是您将数据从行转换为列的时候。某些数据库具有`PIVOT`您可以利用的功能，但您没有指定哪个 RDBMS。

如果您没有`PIVOT`函数，则可以使用聚合函数和`CASE`语句来复制该功能：

```
select `range`,
  sum(case when class_name = 'pens' then `count` end) pens,
  sum(case when class_name = 'pencil' then `count` end) pencils
from yourtable
group by `range` 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9c366/2)

*`range`注意：反引号适用于 MySQL，如果 SQL Server 则在and周围使用方括号`count`。这些用于转义保留字。*

如果您在具有`PIVOT`功能的 RDBMS 中工作，则可以使用以下内容：

```
select *
from
(
  select class_name, [range], [count]
  from yourtable
) src
pivot
(
  sum([count])
  for class_name in ([pens], [pencil])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/894ba7/1)

两者都会产生相同的结果：

```
|   RANGE | PENS | PENCIL |
---------------------------
|   0-0.5 |  200 |     50 |
| 0.5-1.0 |  300 |     40 |
| 1.0-1.5 |  150 |     45 | 
```

如果您有已知数量的 值，上述方法将非常有用`class_name`，如果您没有，则根据您的 RDBMS，有一些方法可以生成此查询的动态版本。

在 SQL Server 中，动态版本将类似于：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(CLASS_NAME) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [range], ' + @cols + ' from 
             (
                select CLASS_NAME, [RANGE], [COUNT]
                from yourtable
            ) x
            pivot 
            (
                sum([COUNT])
                for CLASS_NAME in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/894ba7/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:05:03.497

此数据透视查询可用于所有主要的 DBMS。诀窍是获取错误的列名“范围”和“计数”引用属性。

SQL Server（下）使用`[]`，MySQL 使用反引号（`），Oracle 使用双引号，SQLite 可以使用上述任何一种。

```
 select [range],
         sum(case when class_name='pens' then [count] else 0 end) Pens,
         sum(case when class_name='pencil' then [count] else 0 end) Pencils
    from tbl
group by [range]
order by [range]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:19:54.400

这是枢轴的动态版本：

```
IF OBJECT_ID('tempdb..#T') IS NOT NULL
    DROP TABLE #T

CREATE TABLE #T(
    [CLASS_NAME] VARCHAR(20) NOT NULL
    , [range] VARCHAR(10) NOT NULL
    , [count] INT NOT NULL
)

INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pens', '0-0.5', '200')
INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pencil', '0-0.5', '50')
INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pens', '0.5-1.0', '300')
INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pencil', '0.5-1.0', '40')
INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pens', '1.0-1.5', '150')
INSERT INTO #T([CLASS_NAME], [range], [count]) VALUES ('pencil', '1.0-1.5', '45')

DECLARE @PivotColumnHeaders VARCHAR(MAX)

SELECT  @PivotColumnHeaders = STUFF((
        --SELECT DISTINCT TOP 100 PERCENT
        SELECT DISTINCT '],[' + [CLASS_NAME]
        FROM #T
        ORDER BY '],[' + [CLASS_NAME]
        FOR XML PATH('')
    ), 1, 2, '') + ']';

DECLARE @PivotTableSQL NVARCHAR(MAX)
SET @PivotTableSQL = N'
  SELECT *
  FROM (
    SELECT *
    FROM #T
  ) AS PivotData
  PIVOT (
    SUM([count])
    FOR [CLASS_NAME] IN (
      ' + @PivotColumnHeaders + '
    )
  ) AS PivotTable
'

EXECUTE(@PivotTableSQL) 
```

# c# - 无效的投射异常 radbutton telerik (oncheckedchanged)

> ID：13643891
> 
> 赞同：1
> 
> 时间：2012-11-30T11:00:28.163
> 
> 标签：c#, asp.net, exception, telerik

我正在使用 Telerik Radbutton 来充当复选框。但是，当我单击复选框时，我会收到一个`A first chance exception of type 'System.InvalidCastException' occurred in Webapplicatie.dll`

有关 asp.net 代码，请参见下面的代码：

```
 <telerik:RadButton ID="RadButton1" runat="server" Text="Hele dag" ToggleType="CheckBox" ButtonType="ToggleButton"  OnCheckedChanged="RadButton1_CheckedChanged">
                        </telerik:RadButton> 
```

和：

```
protected void RadButton1_CheckedChanged(object sender, EventArgs e)
        {
            try
            {
                if (RadButton1.Checked)
                {
                    lbStarttijd.Visible = false;
                    lbEindtijd.Visible = false;

                    rtp_Eindtijd.Visible = false;
                    rtp_Starttijd.Visible = false;
                    //rtp_Eindtijd.Enabled = false;
                    //rtp_Starttijd.Enabled = false;
                }
                else
                {
                    lbStarttijd.Visible = true;
                    lbEindtijd.Visible = true;
                    //lbEindtijd.Enabled = true;
                    //lbStarttijd.Enabled = true;
                    rtp_Eindtijd.Visible = true;
                    rtp_Starttijd.Visible = true;
                    //rtp_Eindtijd.Enabled = true;
                    //rtp_Starttijd.Enabled = true;
                }
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message + "\n" + ex.StackTrace);
            }
        } 
```

然而，最奇怪的是，它并没有出现在我的 Catch 中。我不明白为什么这会导致无效的强制转换异常。帮助表示赞赏:)

**旁注：**这只发生在我通过垃圾邮件单击复选框来“抨击”复选框时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:01:20.183

第一步是找到异常的根本原因：

“如果要查明异常发生的位置，可以选择 Debug->Exceptions 菜单项，然后在出现的对话框中，选中“Common Language Runtime Exceptions”的第一个复选框。

这将使调试器在发生异常时立即中断，而不是仅在未处理的异常上中断。” - 每个线程。

试一试，看看你是否能得到例外。

# sql - 约束和分区视图中的位置之间的区别

> ID：13643894
> 
> 赞同：2
> 
> 时间：2012-11-30T11:00:44.793
> 
> 标签：sql, sql-server, sql-server-2008, partitioning

在我的新工作中，我发现 SQL Server 2008 Enterprise 中的分区视图如下：

```
...
SELECT     *
FROM [SERVER1].DATA_2012_7_1.dbo.DATA WITH (nolock)
WHERE     DateTime >= '2012-07-01' AND DateTime <= '2012-07-15 23:59:59.997'
UNION ALL
SELECT     *
FROM [SERVER2].DATA_2012_7_16.dbo.DATA WITH (nolock)
WHERE     DateTime >= '2012-07-16' AND DateTime <= '2012-07-31 23:59:59.997'
UNION ALL
... 
```

以前，当我创建分区视图时，我总是按日期列在表中添加 CONSTRAINT。但在我的示例中，此视图中使用的所有表都没有约束。你对差异有什么看法？两种观点都会正确且同样迅速地发挥作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:28:44.593

从[使用分区视图](http://msdn.microsoft.com/en-us/library/ms190019%28v=sql.105%29.aspx)：

> 分区视图不需要 CHECK 约束来返回正确的结果。但是，如果尚未定义 CHECK 约束，则查询优化器必须搜索所有表，而不是仅搜索那些覆盖分区列上的搜索条件的表。如果没有 CHECK 约束，视图的运行方式与任何其他带有 UNION ALL 的视图一样。查询优化器不能对存储在不同表中的值做出任何假设，也不能跳过搜索参与视图定义的表。

因此，它的性能可能不会同样好（对于`CHECK`约束可能消除某些分区的查询）。

* * *

查询优化器*可能*足够聪明，可以根据视图内部子句之间的交集以及在访问视图的查询中应用的任何条件*有效地执行分区消除 - 但在**记录*的方式之间进行选择以实现消除（约束）和一个未记录的（优化器结合子句和其他条件），我知道我会选择哪一个。`WHERE`*`CHECK``WHERE`*

# c# - 从 combobox1 获取 combobox2 的值

> ID：13643895
> 
> 赞同：0
> 
> 时间：2012-11-30T11:00:44.733
> 
> 标签：c#, visual-studio, combobox

我的表单上有 2 个组合框（在表单加载事件中）。表单加载后，第一个组合框从 select 语句中获取一个值。我想在我的第二个组合框中使用该值。这是我的代码：

**第一个组合框 = cbDelivery**

```
 OracleConnection conn = new OracleConnection();
        conn.ConnectionString = "User Id=christob;Password=CHRISTOB;Host=poseidon;Pooling=true;Min Pool    Size=0;Max Pool Size=100;Connection Lifetime=0;Port=1522;Sid=GLODCD";

        conn.Open();

        string query;
        query = "select distinct dd.delivery_bay_code from dc_delivery dd, dc_grv dg where delivery_complete_datetime is null and dd.dc_delivery_id_no = dg.dc_delivery_id_no and dd.delivery_announce_datetime is null";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            cbDelivery.Items.Add(dr["delivery_bay_code"]);
        }
        dr.Close();
        conn.Close(); 
```

**2de 组合框 = cbOrderNo**

此组合框位于：

> 私人无效 cbDelivery_SelectedIndexChanged（对象发送者，EventArgs e）

因此，一旦我从第一个组合框中选择一个值，我的第二个组合框查询就必须填充第二个组合框。见代码：

```
 OracleConnection conn = new OracleConnection();
        conn.ConnectionString = "User Id=christob;Password=CHRISTOB;Host=poseidon;Pooling=true;Min Pool Size=0;Max Pool Size=100;Connection Lifetime=0;Port=1522;Sid=GLODCD";
        conn.Open();
        string query1;
        query1 = "select distinct dg.order_no from dc_delivery dd, dc_grv dg where delivery_complete_datetime is null and dd.dc_delivery_id_no = dg.dc_delivery_id_no and dd.delivery_announce_datetime is null and dd.delivery_bay_code = " + cbDelivery.Text;
        OracleCommand cmd1 = new OracleCommand(query1, conn);
        OracleDataReader dr1 = cmd1.ExecuteReader();
        while (dr1.Read())
        {
            cbOderNo.Items.Add(dr1["order_no"]);

        }
        dr1.Close();
        conn.Close(); 
```

注意我在第二个 Select 查询中使用了 cbDelivery 组合框。

问题是：一旦我从第一个组合框中选择一个值，第二个组合框就会给出异常“”ORA-00904：“BAY1”：标识符无效。

请帮我解决这个问题或提出不同的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:23:00.133

固定的！！我就是这样做的：

```
private void populateDeliveryBayCodes()
    {
        conn.Open();
        string query;
        query = "select distinct dd.delivery_bay_code from dc_delivery dd, dc_grv dg where dd.delivery_complete_datetime is null and dd.dc_delivery_id_no = dg.dc_delivery_id_no and dd.delivery_announce_datetime is null";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            cbDelivery.Items.Add(dr["delivery_bay_code"]);
        }
        dr.Close();
        conn.Close();
    }

    private void populateOrderNumbers()
    {
        conn.Open();
        string query;
        query = "select distinct dg.order_no from dc_delivery dd, dc_grv dg where dd.delivery_complete_datetime is null and dd.dc_delivery_id_no = dg.dc_delivery_id_no and dd.delivery_announce_datetime is null and dd.delivery_bay_code ='" + cbDelivery.Text + "' order by order_no";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            cbOderNo.Items.Add(dr["order_no"]);
        }
        dr.Close();
        conn.Close();
    } 
```

和

```
private void frmBuiltPallet_Load(object sender, EventArgs e)
    {
        populateDeliveryBayCodes();
    {

private void cbDelivery_SelectedIndexChanged(object sender, EventArgs e)
    {
        populateOrderNumbers();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:24:25.043

可能是您使用 sql 或 oracle 的某些关键字作为列名或在某个无效位置进行查询。在这种情况下，这种类型的错误是可能的。我不确定这个解决方案。但至少我们可以尝试一次。这样我们就可以确定它是否正确？

# recursion - Prolog 程序 convert(L,X) 将列表 L 转换为整数：x1 + x2*10^1+ … + xn*10^(n-1)

> ID：13643898
> 
> 赞同：2
> 
> 时间：2012-11-30T11:00:49.663
> 
> 标签：recursion, lambda, prolog, swi-prolog

我的问题：给定一个列表

```
L = [x1,...,xn] 
```

编写一个`convert(L,X)`转换`L`为整数的 Prolog 程序

```
x1*10^0 + x2*10^1 + ... + xn*10^(n-1) 
```

将结果存储在`X`.

例如

```
?- convert( [1,2,3,4] , Res ).
Res = 4321. 
```

我试图解决这个问题，但在尝试使用内置电源功能时出现语法错误。这是我到目前为止所拥有的：

```
convert([],Res) .
convert(L1,Res) :- conv( L1 , Res , C ) .

conv( [] , Res , C ) .
conv( [H|Ys] , Res , C ):-
  C1 is C-1 ,
  N is (H*(10**C)) ,
  conv(Ys,Res2,C1) ,
  Res is N + Res2 . 
```

我收到此错误：

```
******* syntax error
>>>   conv ( [ H | Ys ] , Res , C ) :- C1 is C - 1 , N is ( H * ( 10  <--- HERE? >>> 
```

所以有人可以告诉我如何摆脱这个错误？

另外，有什么方法我在语法上会出错吗？

请帮我解决一下这个。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:35:34.343

当您使用 SWI-Prolog 时，这有效：

```
:- use_module(library(lambda)).

convert(L,Res) :-
    reverse(L, LR),
    foldl(\X^Y^Z^(Z is Y * 10 + X), LR, 0, Res). 
```

对于您的代码：

```
convert([],Res) . <== Here Res is a free variable
convert(L1,Res) :-conv(L1,Res,C). <== here C is free

conv([],Res,C). <== Here Res anc C are free 
```

这是行不通的；你可以试试

```
conv([],0).
conv([H|Ys],Res):-
  conv(Ys,Res2),
  Res is Res2 * 10 + H. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T20:18:42.770

原来的海报是在正确的轨道上。但是，这将在不使用的情况下完成`library(lambda)`：

```
convert( Xs , R ) :-        % to sum a list of values, scaling each by their corresponding power of 10,
  convert( Xs , 1 , 0 , R ) % just invoke the worker predicate, seeding the power accumulator with 10^0 (1)
  .                         % and the result accumulator with zero (0).

convert( []     , _ , R , R ) .   % when we exhaust the source list, we're done: unify the result R with the result accumulator
convert( [X|Xs] , P , T , R ) :-  % otherwise...
  T1 is T + X*P ,                 % - increment the result accumulator by the current list item, scaled by the current power of 10,
  P1 is P*10 ,                    % - bump up to the next power of 10, and
  convert(Xs,P1,T1,R)             % - recurse down.
  .                               % 
```

它也可以使用 Prolog 的内置求幂来完成（但它既不简单，也不快）：

```
convert( Xs , R ) :-
  convert(Xs,0,0,R)
  .

convert( []     , _ , R , R ) .
convert( [X|Xs] , N , T , R ) :-
  T1 is T + X * 10**N ,
  N1 is N+1 ,
  convert1(Xs,N1,T1,R)
  . 
```

不过，最简单和最优雅的方式（至少在 SWI、Quintus 或 Sicstus 中）是使用`library(aggregate)`和编写单行代码：

```
convert( Xs , R ) :- aggregate( sum(X*10**N) , nth0(N,Xs,X) , R ) . 
```

# java - 通过 Java 连接 SAP 时出现异常

> ID：13643905
> 
> 赞同：1
> 
> 时间：2012-11-30T11:01:06.510
> 
> 标签：java, sap

你能告诉我解决这个问题的解决方案吗---

即使 sapjco3.jar 在我的库路径中，我在尝试通过 Java 类连接 SAP 相关文件时遇到此异常。我在 Windows XP 和 Windows Server 98 中尝试过此操作。

```
java.lang.UnsatisfiedLinkError: no sapjco3 in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1682)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1030)
at com.sap.conn.jco.rt.DefaultJCoRuntime.loadLibrary(DefaultJCoRuntime.java:441)
at com.sap.conn.jco.rt.DefaultJCoRuntime.registerNativeMethods(DefaultJCoRuntime.java:307)
at com.sap.conn.jco.rt.JCoRuntime.registerNatives(JCoRuntime.java:987)
at com.sap.conn.rfc.driver.CpicDriver.<clinit>(CpicDriver.java:948)
at com.sap.conn.rfc.engine.DefaultRfcRuntime.getVersion(DefaultRfcRuntime.java:43)
at com.sap.conn.rfc.api.RfcApi.RfcGetVersion(RfcApi.java:259)
at com.sap.conn.jco.rt.MiddlewareJavaRfc.<clinit>(MiddlewareJavaRfc.java:200)
at com.sap.conn.jco.rt.DefaultJCoRuntime.initialize(DefaultJCoRuntime.java:73)
at com.sap.conn.jco.rt.JCoRuntimeFactory.<clinit>(JCoRuntimeFactory.java:23)
at com.sap.conn.jco.rt.RuntimeEnvironment.<init>(RuntimeEnvironment.java:40)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at com.sap.conn.jco.ext.Environment.getInstance(Environment.java:121)
at com.sap.conn.jco.ext.Environment.registerDestinationDataProvider(Environment.java:216)
at de.vogella.sap.rfc.core.connection.Connection.<init>(Connection.java:37)
at struct.actions.GestReservaSap.<clinit>(GestReservaSap.java:63)
at eu.sony.com.moduloreservas.ReservasMainClass.main(ReservasMainClass.java:259) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T12:08:07.520

SAP Java 连接器在内部使用本机库连接到 SAP。这个本地库不是 sapjco3.jar 而是 sapjco3.dll（在 Windows 系统上）。即 dll 文件必须位于 Java 库路径中的文件夹中。

后者是 Java 系统属性，您可以通过调用在应用程序中访问它

```
System.getProperty("java.library.path") 
```

然后，您可以将 sapjco3.dll 放入您的库路径中已经存在的文件夹之一（在 Windows 上，例如 C:\WINNT\system32 之类的文件夹），或者通过显式设置将库路径设置为特定文件夹库路径：

*   `System.setProperty("java.library.path", "C:\path\to\folder\with\dll\")` 在访问 SAP JCo 之前通过设置在应用程序代码中
*   或使用命令行参数启动 Java 时 `-Djava.library.path=C:\path\to\folder\with\dll\`

由于将 dll 放入系统特定文件夹（如 winnt\system32）可能不仅对您的应用程序有影响，而且对其他人也有影响，因此建议将包含 sapjco3.dll 的文件夹添加到您的应用程序的库路径中。更灵活的方法是通过命令行指定它，如上所示，这样您就不会对其进行硬编码。

# java - JTable 从第二行读取文本文件

> ID：13643907
> 
> 赞同：0
> 
> 时间：2012-11-30T11:01:23.120
> 
> 标签：java, swing, file-io, jtable, tablemodel

我正在研究从 .txt 文件中读取文本的 JTable。txt 文件在 3 秒后动态更新。现在，当我运行应用程序时，一切都很好，只是 .txt 文件的输出来自第二行的 JTable。txt 文件的第一行没有出现在我的 JTable 上。任何人都可以帮忙吗？这是代码：

```
public class InterfaceFrame extends JFrame implements ActionListener{

public static void main(String[] args) throws
URISyntaxException,
IOException,
InterruptedException {
    panel.setSize(100,100);
      panel.add(table);
      model.fireTableStructureChanged();

        table.setModel(model);
        InsertFileToJtable model = new InsertFileToJtable();
      table.setPreferredScrollableViewportSize(new Dimension(500, 70));
      table.setFillsViewportHeight(true);

      RowSorter<TableModel> sorter =
              new TableRowSorter<TableModel>(model);
            table.setRowSorter(sorter);

        JScrollPane scrollpane = new JScrollPane(table);
        panel.add(scrollpane, BorderLayout.CENTER);

        JButton button = new JButton("Show View");
        panel.add( button, BorderLayout.SOUTH );

        tabbedPane.addTab("Process",null,scrollpane,"");
} 
```

我在制作文本文件时可能做错了什么。这是生成 .txt 文件的代码：

```
import java.io.*;
import java.util.StringTokenizer;

public class GetProcessList
{

 private String GetProcessListData()
 {
 Process p;
 Runtime runTime;
 String process = null;
 try {
 System.out.println("Processes Reading is started...");

 //Get Runtime environment of System
 runTime = Runtime.getRuntime();

 //Execute command thru Runtime
 p=runTime.exec("ps -e");              //For Linux

 //Create Inputstream for Read Processes
 InputStream inputStream = p.getInputStream();
 InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
 BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

 //Read the processes from sysrtem and add & as delimeter for tokenize the output
 String line = bufferedReader.readLine();
 process = "&";
 while (line != null) {
 line = bufferedReader.readLine();
 process += line + "&";
 }

 //Close the Streams
 bufferedReader.close();
 inputStreamReader.close();
 inputStream.close();

 System.out.println("Processes are read.");
 } catch (IOException e) {
 System.out.println("Exception arise during the read Processes");
 e.printStackTrace();
}
    return process;
 }

 void showProcessData()
 {
 try {

 //Call the method For Read the process
 String proc = GetProcessListData();

 //Create Streams for write processes
 //Given the filepath which you need.Its store the file at where your java file.
 OutputStreamWriter outputStreamWriter =
 new OutputStreamWriter(new FileOutputStream("ProcessList.txt"));
 BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);

 //Tokenize the output for write the processes
 StringTokenizer st = new StringTokenizer(proc, "&");

 while (st.hasMoreTokens()) {
 bufferedWriter.write(st.nextToken());  //Write the data in file
 bufferedWriter.newLine();               //Allocate new line for next line
 }

 //Close the outputStreams
 bufferedWriter.close();
 outputStreamWriter.close();

 } catch (IOException ioe) {
 ioe.printStackTrace();
 }

 }
} 
```

下面是读取 ProcessList.txt 并将输出输出到 JTable 的代码：

```
import java.io.*;
import java.awt.*;
import java.util.*;import javax.swing.*;
import java.awt.event.*;
import javax.swing.table.*;

public class InsertFileToJtable extends AbstractTableModel{
Vector data;
Vector columns;
private String[] colNames = {"<html><b>PID</b></html>","<html><b>TTY</b</html>",<html>  <b>time</b></html>","<html><b>Process Name</b></html>",};

public InsertFileToJtable() {
String line;
data = new Vector();
columns = new Vector();
  try {
        FileInputStream fis = new FileInputStream("ProcessList.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fis));
        StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
        while (st1.hasMoreTokens())
                columns.addElement(st1.nextToken());
        while ((line = br.readLine()) != null) {
                StringTokenizer st2 = new StringTokenizer(line, " ");
                while (st2.hasMoreTokens())
                       data.addElement(st2.nextToken());
        }
        br.close();
} catch (Exception e) {
        e.printStackTrace();
}  

}

public int getRowCount() {
return data.size() / getColumnCount();
}

public int getColumnCount() {
return columns.size();
}

public Object getValueAt(int rowIndex, int columnIndex) {
return (String) data.elementAt((rowIndex * getColumnCount())
                + columnIndex);
}
@Override
public String getColumnName(int column) {
return colNames[column];
}
@Override
public Class getColumnClass(int col){
return getValueAt(0,col).getClass();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:48:54.777

我会做一些不同的事情，避免使用中间文本文件。反而，

*   使用`ProcessBuilder`，“可以从同一个实例中重复调用”。您可以读取[此处](https://stackoverflow.com/a/5740673/230513)显示的输出并将其解析为合适的数据结构，例如`List<List<String>>`.

    ```
    ProcessBuilder pb = new ProcessBuilder("ps -ef"); 
    ```

*   开始一个`javax.swing.Timer`三秒的周期；`pb.start()`在计时器的侦听器中调用。

*   当解析结束时，`fireTableDataChanged()`在您的`AbstractTableModel`, 显示[在这里](https://stackoverflow.com/a/9134371/230513)。

Presto，您的表格每三秒更新一次最新结果。

# html - 强制导航器通过 URL 在新选项卡中打开链接

> ID：13643909
> 
> 赞同：7
> 
> 时间：2012-11-30T11:01:24.473
> 
> 标签：html

如果可能的话，我有一个请求，我有一个包含表格的界面：

```
name of application   url 
XXXXXX                www.xxx.com 
```

问题是当我点击 url 时，我在当前页面上丢失了我的信息。我的问题是 Internet Explorer FF chrome 有一种代码语言...提供此操作在选项卡中打开此 url 以放入 url，如方法版本和其他类似 about:version ==> 在新选项卡中打开：this url 放入 url 导航器，我们得到一个新标签，谢谢你的帮助。我尝试通过 IE 提供的工具在新选项卡中打开，但如果可能，请提供解决方案，例如在 url 中输入代码以打开新选项卡

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T11:02:53.723

如果我得到你，你希望你的链接在另一个选项卡中打开页面。

您可以像这样使用链接的**目标**属性：

```
<a href="somepage.html" target=newtab>text</a> 
```

如果你想要一些你可以在浏览器的 URL 字段中输入的东西，`bookmarklet,`你可以使用这个：

```
javascript: window.open('http://www.dystroy.org'); 
```

在大多数浏览器中，按住 ctrl 键单击链接会做同样的事情。

编辑 ：

如果你可以修改的只是`href`链接的属性，你可以让这个href变成这样：

```
 <a href="javascript:window.open('http://www.dystroy.org');" target=_blank>text</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:32:45.180

如果它是一个超链接，只需向超链接添加一个“目标”，其值为“_blank”。工作示例：

```
<a id="termsLink" href="www.someLink.com" target=_blank>
                Terms and Conditions</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-27T21:26:49.430

java 脚本解决方案适用于为您提供 href（或 url）选项但没有目标参数的短代码。这是一个带有流行的标注短代码的示例：

```
[callout title='Your big Title' text='your small text...' button_text='CLICK ME' button link="**javascript:window.open**('http://www.dystroy.org');"] 
```

如果没有 javascript，链接页面将打开到当前页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:10:57.427

您无需任何代码即可在新选项卡或窗口中打开链接。HTML 已经内置了该功能。

使用标签显示您的网址并使用目标属性告诉它在新窗口中打开。

例子：

```
<a href="http://www.xxx.com" target="_blank">www.xxx.com</a> 
```

[在此处](http://www.w3schools.com/tags/att_a_target.asp)了解有关标签和目标属性的更多信息

# jquery-mobile - 如何在 jQuery Mobile 中从弹出窗口回帖？

> ID：13643912
> 
> 赞同：0
> 
> 时间：2012-11-30T11:01:39.023
> 
> 标签：jquery-mobile, popup

我**在 jQueryMobile 的 My PopUp 中**有以下按钮，即

*   HTML 提交按钮，

*   ASP 链接按钮

*   锚点和

*   ASP 按钮

    ```
    <input type="submit"  value="click" onserverclick="input_Click"/><br>
    <asp:LinkButton runat="server" OnClick="input_Click" data-role="button">link< /asp:LinkButton><br>
    <a href="#"  data-role="button" onserverclick="input_Click" >anc< /a><br>
    <asp:Button runat="server" ID="btn" runat="server" Text="btn" OnClick="input_Click" data-role="button"/ > 
    ```

只有当从 POPUP中单击时，才`ASP Link Button`能够回发到后面的代码，即`input_Click`处理程序中，`aspx.cs`

弹出窗口如下：

```
 <div id="div123" data-role="popup"><br>
 <myControl:testcontrol ID="ctltest" runat="server"></bt:testcontrol><br>< /div><br>
 <a href="#div123" data-rel="popup" >open</a><br> 
```

为什么其他按钮不能这样做？
Post Back 如何在 jQM 的 POPUP 内进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:06:24.677

这在以下页面上进行了讨论：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

> 这意味着当页面通过 Ajax 加载时，页面头部引用的任何脚本和样式都不会产生任何影响，但 **如果通过 HTTP 正常请求页面，它们就会执行**。在编写 jQuery Mobile 站点脚本时，需要考虑这两种情况。通过 Ajax 请求时忽略页面头部的原因是重新执行相同 JavaScript 的可能性非常高（在站点的每个页面中引用相同的脚本很常见）。由于尝试解决该问题的复杂性，我们将执行页面特定脚本的任务留给开发人员，并假设每个浏览会话只执行一次头部脚本。

因此，当您启动对话框时，它会加载`page`并且无法访问原始 JavaScript。我经常将`<script></script>`对话框嵌入到某个地方，以便在打开对话框时加载。

# jsf - icefaces 日历图像不显示

> ID：13643913
> 
> 赞同：0
> 
> 时间：2012-11-30T11:01:41.473
> 
> 标签：jsf, jsf-2, icefaces, icefaces-3

我正在使用 icefaces 弹出日历。我的问题是找不到图像。这似乎是一个已知的错误。

![Safari 中的日历](../Images/08feb7e171b0ad8adb7b7d82c1da9206.png)

所以现在怎么办？这是 icefaces api 告诉我的关于 selectInputDate 的内容：

图像目录：

> 设置按钮图像位置的目录。已弃用。请改用 styleClass。按钮的样式类名称由 styleClass 名称加上预定义的名称组成。例如：如果 styleClass 名称为“myCalendar”，则按钮类名称将是：myCalendarMovePrev、myCalendarMoveNext、myCalendarOpenPopup、myCalendarClosePopup。使用 background-image 属性覆盖图像。

但是覆盖背景图像不起作用，因为生成的输入字段是使用“src”的图像类型。

```
<ice:selectInputDate styleClass="iceCal" id="detailFrist" value="#{ticketDetailListBean.ticket.frist}" label="Fällig bis" labelPosition="left" requiredIndicator="(*)" required="true" indicatorPosition="right"
                renderAsPopup="true" validator="de.xxxxx.validator.TicketFristValidator">

    <f:converter converterId="de.xxxxx.converter.MultiDateConverter" />     
    <f:attribute name="pattern1" value="dd.MM.yyyy" />
    <f:attribute name="pattern2" value="ddMMyyyy" />
    <f:attribute name="pattern3" value="dd.MM" />
    <f:attribute name="pattern4" value="ddMM" />
</ice:selectInputDate>

.iceCalMovePrev {
    background-image:url(../images/icons_opensource/arrow-down.png);
    background-repeat:none;
}

.iceCalMoveNext {
    background-image:url(../images/icons_opensource/arrow-down.png);
    background-repeat:none;
}

.iceCalMoveOpenPopup {
    background-image:url(../images/icons_opensource/arrow-down.png);
    background-repeat:none;
}

.iceCalClosePopup {
    background-image:url(../images/icons_opensource/arrow-down.png);
    background-repeat:none;
} 
```

我用 Safari 检查了代码：

![在此处输入图像描述](../Images/ff236dce5b4f3aac0edad1151b17ebeb.png)

如果我用谷歌浏览器打开日历，它看起来是这样的：

![在此处输入图像描述](../Images/a5cae7c18de3e76cc1505ceb521c241b.png)

那么如何才能正确轻松地显示图像呢？

更新 ：

目前我使用不推荐使用的方法。首先，我需要添加在 web.xml 中声明的 Resource Servlet：

```
<servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
</servlet-mapping> 
```

Icon Bug 仍然存在……但现在没有错误，也没有显示图标，所以这里是使用不推荐使用的方法的部分：

```
imageDir="/xmlhttp/css/rime/css-images/" 
```

现在看起来如此......：

![在此处输入图像描述](../Images/23092fe7c38635fb7e2f5430929ca99b.png)

# c# - 在 Visual Studio 2010 中组织 Web 部件

> ID：13643915
> 
> 赞同：1
> 
> 时间：2012-11-30T11:01:52.783
> 
> 标签：c#, visual-studio-2010, sharepoint-2010

快速提问。在 vs2010 中创建 web 部件时，最好将所有 web 部件分组到一个项目中，还是创建单独的项目。我无法完全理解如何最好地组织这个。Web 部件将成为更大的 Intranet 解决方案的一部分，但将是完全独立的实体，将在一段时间内相互独立地开发和更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:23:59.107

快速的问题，而不是那么快的答案。这确实取决于您的 Intranet 的结构以及您希望如何使其可用。以下是一些需要考虑的重要想法。

*   是否有很多 Web 部件会共享代码（例如，我可以想象日志会被共享）？好的，您可以将共享代码放在单独的项目中，但是如果您要重用很多内容，将所有内容放在同一个解决方案中会很方便。如果您确定要将它们分开，则可以为每个 webpart 解决方案使用 wsp。但请考虑您还将为每个 Web 部件提供单独的功能。

*   您的 Web 部件在哪里使用？如果您有几个 Web 应用程序，并且只有某些 Web 部件将在某个 Web 应用程序中使用。然后您可以考虑将这些 webpart 放在单独的包中。

*   携手上一个话题，你是不是一直想让每个 webpart 都可用？如果您使用一个 web 应用程序，使用不同的站点集合，您可能并不总是希望所有 web 部件都如此。要解决此问题，您可以考虑将 Web 部件置于不同的功能下，并仅激活您想要的 Web 部件的功能。

我相信还有更多，但这些是我想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:27:47.693

实际上它取决于您的要求。但是如果将所有内容都包装在一个单独的页面中，那很好，因为我们在页面上添加的只有 webpart 执行。所以它不会影响任何性能问题或其他任何事情。

# assembly - 汇编（AT&T 32 位）scanf 问题

> ID：13643916
> 
> 赞同：2
> 
> 时间：2012-11-30T11:01:53.873
> 
> 标签：assembly, printf, scanf, att

我想在汇编中编写以下 C 代码：

```
int main(void)
{
    int x,y;
    scanf("%d%d",&x,&y);
    printf("%d%d",x,y);
    return 0;
} 
```

首先，我尝试只使用一个整数来扫描/打印：

```
.section    .rodata #read only data section
fmt:    .string "%d%d"
    .text   
.globl  main    
    .type   main, @function
main:   
pushl   %ebp    #save the old frame pointer
movl    %esp,   %ebp    #create the new frame pointer

pushl %esp #location of x
pushl $fmt
call scanf

    #stack should now have exactly the scanned number x and then the format, as needed for printf.
call printf

movl    $0, %eax
movl    %ebp,   %esp    #restore the old stack pointer - release all used memory.
popl    %ebp    #restore old frame pointer (the caller function frame)
ret 
```

但它没有用。出于某种原因，以下技巧使它起作用（在 printf 之前添加）：

```
addl $4,%esp #pop format
pushl 4(%esp)
pushl $fmt 
```

我不明白为什么 pushl 4(%esp) 会使它起作用，所以对于我的第一个问题，我要求对此事进行澄清。然后我尝试对两个变量做同样的事情：

```
fmt:    .string "%d%d"
[...]
    pushl %esp #location of x
    pushl %esp #location of y
    pushl $fmt
    call scanf 
```

但它导致了分割错误。它甚至没有到达 printf 部分，我会尝试这样的事情：

```
addl $4,%esp #pop format    
pushl 8(%esp)
pushl 8(%esp)
pushl $fmt

call printf 
```

（遵循与之前的 pushl 4(%esp) 相同的逻辑。所以我的第二个问题是如何使它与两个变量一起工作。谢谢！

编辑：为什么下面的代码不能用于扫描两个变量？

```
subl $8,%esp #leave place for two vars
pushl -4(%ebp) #location of x
pushl -8(%ebp) #location of y
pushl $fmt
call scanf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:59:56.637

> “它应该将 %esp 减去 4，然后将 %esp 保存在 esp 指向的位置”

这将在 8086 CPU 上发生。从 80286 开始，它在内部存储 ESP，然后减去，然后写入内部存储的值。您必须首先分配变量（一次推送或一次 esp-4），然后存储该变量的地址（第二次推送）。对于第一个问题，您必须进行 3 次推送或 1 次推送和 2 次推送。在您的情况下， esp 指向存储旧 EBP 的堆栈位置。您可以使用

```
push eax
push esp
push fmt 
```

这也可以。

> 另外，关于第二个问题，您提到了甚至无关紧要的行，

哦，是的，我复制了错误的代码行，对不起。我指的是这篇文章：

```
pushl %esp #location of x
pushl %esp #location of y
pushl $fmt
call scanf 
```

我指出，为什么你的代码不正确。您必须推送 2 个变量地址。相反，您推送旧 EBP 的地址，然后使用 prev 参数（指向旧 EBP）的堆栈中的单元地址；结果，在读取一个参数时会弄乱，接收您在 scanf 上输入的值。当它想写入另一个值而不是单元格的地址时，它具有先前的 int。

> 最后，你能解释一下你建议的代码吗？为什么我要把 edx 和 eax 移到 esp 中，我什至不知道里面有什么

抱歉，这是 Intel 语法，因此 mov eax, esp 的意思是“将 esp 写入 eax”。确实，这不是一个很好的代码。只是一个例子。

我在堆栈上分配一个变量，在 eax 中获取它的地址。然后分配另一个 var，将其地址存储在 edx 中。然后推送两个地址，然后推送 fmt 的偏移量。

You have to allocate space first. And you do not need frame unless you are going to address local vars using EBP relative addresses. You can push ebp - 4 etc. Just compile your code and look how it works in any debugger (I used ollydbg to check your code); Finally, you can ask C compiler to generate asm listing and look, how compiler does this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:37:24.213

有了这个：

```
pushl %esp #location of x
pushl $fmt
call scanf 
```

你覆盖 EBP。

首先，CPU 记住寄存器的值（旧的 esp 值），然后减去 4，然后保存旧的 ESP 值。在这种情况下，这是旧的 EBP。当您第一次减去 4 时，您会在堆栈上分配一个变量（更好地 PUSH EAX - 它更短，只有 1 个字节）；

第二种情况的类似问题：

```
addl $4,%esp #pop format    
pushl 8(%esp)
pushl 8(%esp)
pushl $fmt 
```

这里第一个参数不是指向 X，而是指向第二个参数。第二点指向 EBP。您必须首先在堆栈上分配变量：

```
push ebp
mov ebp, esp
push eax
mov edx, esp
push eax
mov eax, esp
push eax
push edx
push offset fmt
call xyz 
```

甚至更多：如果您不使用本地变量，则无需推送 ebp，无需创建帧指针。或者，在堆栈上分配变量后，您可以使用：

```
LEA eax, [EBP - 4]
LEA edx, [EBP - 8] 
```

# events - 如何在 GWT Frame 中使用事件

> ID：13643918
> 
> 赞同：0
> 
> 时间：2012-11-30T11:01:59.420
> 
> 标签：events, gwt, frame

我想捕获 GWT 框架内的所有事件。我找到了几种方法来做到这一点，但它们只返回 mousemove 和 mouseout 事件。我还需要按键、输入等。目标是捕获事件并使用 websocket 将它们发送到另一个客户端，然后在另一端复制它们（共同浏览）。

我在框架内使用同一域上的页面。

```
public class ESinkFrame extends Frame implements EventListener { 

    public ESinkFrame(String src){ 
          super(src); 

      DOM.sinkEvents(getElement(), Event.KEYEVENTS);
      DOM.sinkEvents(getElement(), Event.MOUSEEVENTS);
    } 

    public void onBrowserEvent(Event event) { 
          System.out.println( "sunk event: " + DOM.eventGetTypeString(event) ); 
    } 
} 
```

当我使用它时，我也尝试附加一种不同的方式来抓取事件。

```
ESinkFrame frame = new ESinkFrame("http://127.0.0.1:8888/other.html");

RootPanel.get().add(frame);

FrameElement frameElt = frame.getElement().cast();
Document frameDoc = frameElt.getContentDocument();
BodyElement body = frameDoc.getBody();
Element el = body.cast();

DOM.setEventListener(el, new EventListener()
{
    public void onBrowserEvent(Event event)
        {
            Window.alert("test");
        }

});
DOM.sinkEvents(el, Event.KEYEVENTS);

Event.addNativePreviewHandler(new NativePreviewHandler(){
    public void onPreviewNativeEvent(NativePreviewEvent event) {
        String eventName = event.getNativeEvent().getType();
        if (event.isFirstHandler() /* && (event.getTypeInt() & Event.MOUSEEVENTS) == 0*/)
        System.out.println("PreviewHandler: " + eventName);
        }
}); 
```

# perl - 命令行中的 Perl：当替换文件中的字符串时，它也会删除新行

> ID：13643919
> 
> 赞同：3
> 
> 时间：2012-11-30T11:02:00.603
> 
> 标签：perl, file, command-line, replace

我在命令行中使用 perl 来替换文本文件中的重复空格。

我使用的命令是：

```
perl -pi -e 's/\s+/ /g' file.csv 
```

问题：此过程还删除了结果文件中的新行......

知道为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T11:10:35.787

`\s`表示五个字符：`[ \f\n\r\t]`. 因此，您将用单个空格替换换行符。`-l`在您的情况下，最简单的方法是使用标志启用自动行尾处理：

```
perl -pi -le 's/\s+/ /g' file.csv 
```

这样，换行符将在`-e`语句之前被剔除并在之后附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:24:05.900

将我的两美分添加到上一个答案中。如果您在 perl 脚本本身中使用此正则表达式，则可以将其更改为：

```
s/[ ]+/ /gis; 
```

这将改变每一行并且不会删除行尾。

# joomla - 致命错误：找不到类“JFactory”

> ID：13643920
> 
> 赞同：-3
> 
> 时间：2012-11-30T11:02:01.407
> 
> 标签：joomla

我最近开始在 Joomla 工作，我有一个错误请帮助我

> 致命错误：在第 48 行的 joomla/helpers/system.php 中找不到类 'JFactory' 第 48 行中显示的行是

```
$this->application = JFactory::getApplication(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:24:17.887

首先，确保您拥有正在使用的最新版本的构建。所以 1.5.26、2.5.8 或 3.0.2

完成后，下载 Joomla 的新副本，提取**“includes”**和**“libraries”**文件夹，然后通过 FTP 上传这两个文件夹（最好是 zip 文件）并提取它们。

作为一个小旁注。如果您已经拥有，请不要编辑任何核心 Joomla 文件。这可能会导致事物的安全性和功能方面出现各种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T04:18:55.713

我遇到了同样的问题，后来我发现“libraries/joomla”目录中缺少 factory.php 文件。我不确定这是怎么发生的，但我从更新的 zip 文件中替换了该文件并解决了它。

# c - 从 Asterisk 1.4.21 升级后 chan->cdr 没有数据

> ID：13643923
> 
> 赞同：3
> 
> 时间：2012-11-30T11:02:12.503
> 
> 标签：c, migration, asterisk, billing, cdr

我在 C 中有一个遗留的 Asterisk 应用程序，它使用 MySQL 对用户进行身份验证、路由和计费。我将它保留在 Asterisk 1.4.21 中，因为在较新版本的 Asterisk 中没有返回任何 CDR 数据。

[显然 1.4.22 https://issues.asterisk.org/jira/browse/ASTERISK-13064](https://issues.asterisk.org/jira/browse/ASTERISK-13064)中发生了一些变化，完全改变了 CDR-s 的处理方式。不幸的是，没有提供有关如何正确迁移现有代码的有用信息。

他们更改了执行顺序，调用了“h”扩展名并重置了 CDR 数据。

我的代码：

```
ast_log(LOG_NOTICE,"拨号字符串：'%s'\n", dialstr);

app = pbx_findapp("拨号");
如果（应用程序）
        res = pbx_exec(chan, app, dialstr);

ast_log(LOG_NOTICE,"从 pbx_exec '%i'返回, 处置: '%s'\n", res, ast_cdr_disp2str(chan->cdr->disposition));

```

代码的其他部分处理 chan->cdr->billsec 等，但它总是给出 0 值。

成功调用后，我总是从 CLI 获取此日志：

```
从 pbx_exec '-1' 返回，处置：'NO ANSWER'
```

虽然相同的代码在 1.4.21 上运行良好

我听到的一种解决方案是在 Dial 之前使用 ast_reset() ，但我不确定如何实现它。有关如何调整此应用程序的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:19:27.370

您可以只获取 DIALSTATUS 变量，这对您的应用程序来说已经足够了，并且将在未来的版本中得到支持。

```
pbx_builtin_getvar_helper(chan, "DIALSTATUS"); 
```

# .net - .Net SQL 客户端提供程序

> ID：13643934
> 
> 赞同：0
> 
> 时间：2012-11-30T11:02:44.627
> 
> 标签：.net, sql, client

遇到过在查询分析器中不到一秒就执行存储过程的情况。但是，当使用 .NET SQL 客户端提供程序执行相同的存储过程时，需要 61 秒。

因此，为了解决这个问题，我们使用 SQL Profiler 我们发现请求到达 SQL Server 不到一秒，但执行在 60 秒后完成。

谁能解释为什么我们有这样的偏差？

查询很简单：

```
SELECT distinct 
    p1.productID, p1.description  
FROM  
    Details V   
INNER JOIN 
    Product P ON V.ProductID = P.ProductID     
INNER JOIN 
    product p1 ON p1.productID = p.parentID      
WHERE 
    V.MarketID = '1159' 
    AND V.FinancialYear = '1213' 
    AND V.LEPeriodID = '75' 
    AND p1.parentID = 100024 
    AND p1.statusID = 1  
ORDER BY 
    description 
```

# mysql - mysql删除，自动增量

> ID：13643938
> 
> 赞同：4
> 
> 时间：2012-11-30T11:02:47.293
> 
> 标签：mysql, sql

我在 MySQL 中有一个使用 InnoDB 的表，并且有一个名为“id”的列。

所以我的问题是，每当我从表中删除最后一行然后插入一个新值时，新值就会在删除的 id 之后插入。

我的意思是假设我的 id 是 32，我想删除它，然后如果我在删除后插入一个新行，那么列 id 自动递增到 33。所以串行格式被破坏，即，id = 30,31,33没有32。

因此，当我在删除最后一列后插入时，请帮我分配 id 32 而不是 33。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T11:11:44.300

简短的回答：没有。

为什么？

1.  这是不必要的工作。没关系，如果序列号有空缺。
2.  如果您不希望这样，请不要使用 auto_increment。
3.  别担心，我保证，如果您的列是 int 甚至 bigint 类型，您不会用完数字。
4.  当您删除一行时，MySQL 不会自动减小自动增量值是有原因的。这些原因是
    *   破坏数据完整性的危险（想象多个用户执行删除或插入......可能会出现双重条目或更糟）
    *   使用主从复制或事务时可能会出现错误
    *   等等 ...

我**强烈**建议你不要在这上面浪费时间！这真的非常容易出错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:12:54.107

您对关系数据库的工作方式有两个主要误解：

1.  关系数据库中没有“最后一行”之类的东西。
2.  ID（假设这是您的主键）**没有任何**意义。是否为新行分配 33、35354 或 236532652632 无关紧要。这只是唯一标识该行的值。

不要依赖主键列中的连续值。

并且不要尝试这种`max(id)+1`方法。它根本无法在具有多个事务的系统中工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T11:13:50.420

你应该停止与之抗争，即使`SELECT max(id)`在使用像 Innodb 这样的事务数据库引擎时使用也无法正确解决这个问题。

为什么你可能会问？想象一下，您有 2 个事务 A 和 B，它们几乎同时开始，都在执行 INSERT。第一个事务 A 需要新行`id`，它将从与该表关联的不可见序列中使用它（称为 AUTOINCREMENT 值），例如 21。另一个事务 B 将使用另一个连续值（例如 22） - 到目前为止一切顺利。

但是，如果事务 A 回滚怎么办？值 21 不能被重用，并且 22 已经被提交。如果有 10 次这样的交易呢？

并且`max(id)`可以为 A 和 B 分配相同的值，所以这也是无效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:13:03.963

我想你的意思是“每当我从表中删除最后一行”，不是吗？

无论如何，这就是自动增量的工作原理。它是为了保持正确的数据关系。如果在另一个表中您使用已删除记录的 id，则在查询该 id 时获取错误而不是获取另一条记录更正确。

无论如何，您可以[在这里](https://stackoverflow.com/a/11519714/1488052)看到如何获得字段中的第一个免费 ID。

# android - 在另一个 Activity 中更新后刷新 ListView

> ID：13643940
> 
> 赞同：6
> 
> 时间：2012-11-30T11:02:48.297
> 
> 标签：android, listview, android-arrayadapter

我有两个简单的活动 - Activity1: ListView from an Array Activity2: EditText 用于编辑 Activity1 中单击的行

当我在 Activity2 中编辑值并返回到 Activity1 时，ListView 不会重新加载新值。

当我从 Activity2 返回或恢复 Activity1 或将更新列表的东西时，我想刷新 ListView。

我的代码：

```
static ArrayAdapter<String> dataAdapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            // Loading the values to list array
        String[][] fulllist = loadArrays();
        String[] list = new String[fulllist.length];
        for(int i = 0; i<fulllist.length; i++) {
            list[i] =  fulllist[i][1];
            }
            // --------------------------------

            dataAdapter = new ArrayAdapter<String>(this,
                                android.R.layout.simple_list_item_1,
                                list);
            setListAdapter(dataAdapter);
            }
@Override
public void onResume() {
        super.onResume();
        // Loading the values to list array
        String[][] fulllist = loadArrays();
        String[] list = new String[fulllist.length];
        for(int i = 0; i<fulllist.length; i++) {
            list[i] =  fulllist[i][1];
            }
        // --------------------------------

        dataAdapter = new ArrayAdapter<String>(this,
                            android.R.layout.simple_list_item_1,
                            list);
        dataAdapter.notifyDataSetChanged();
} 
```

loadArrays() 只是将 SharedPreferences 转换为字符串数组的方法。Activity2 将新数据保存在 SharedPreferences 中，然后 Activity1 可以读取它（使用新数据）。如果我返回“主要活动”（它不是 Activity1）然后返回 Activity1 - 将显示新数据，但我希望在我立即从 Activity2 返回时更新这些数据。

loadArrays() 方法：pastebin.com/MHwNC0jK

提前谢谢你！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T11:40:23.757

在您的第一个活动中单击该项目时，开始您的第二个活动`startActivityForResult()`

然后在Second Activity中，进入后`EditText`，大概有一个按钮。在`onClick`那个按钮调用中，

```
intent.putExtra("edittextvalue", findViewById(R.id.edittext).getText().toString());
setResult(RESULT_OK, intent);
finish(); 
```

现在你回到你的第一个活动，在这里你必须实现`onActivityResult()`回调。您可以从该意图的附加内容中提取数据，并在您的数组中设置相应的项目并调用`notifyDataSetChanged()`.

理想情况下，您应该这样做。

如果您想了解有关如何使用 startActivityForResult() 的更多信息，请尝试此链接 - [http://manisivapuram.blogspot.in/2011/06/how-to-use-startactivityforresult.html](http://manisivapuram.blogspot.in/2011/06/how-to-use-startactivityforresult.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:17:40.800

1) 获取参考ListView

```
mListView = (ListView)findViewById(R.id.auto_listview); 
```

2) 使用更改的值再创建一次适配器

```
MyAdapter myAdapter = new MyAdapter(getApplicationContext(), 
                                    R.layout.locations_list_item_layout,dataArray;
mListView.setAdapter(myAdapter);

setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> adapterView,
                        View view, int i, long l) {

myAdapter = new MyAdapter(getApplicationContext(), 
    //pass changed values vlues array                               R.layout.locations_list_item_layout,dataArray;
mListView.setAdapter(myAdapter);

}

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-30T11:16:42.243

将 fulllist 声明为 Globle 变量并使用静态 arraylist 。

# c# - devexpress 进度条 performstep 方法未显示

> ID：13643942
> 
> 赞同：1
> 
> 时间：2012-11-30T11:02:59.153
> 
> 标签：c#, .net, devexpress

我需要在上传时将记录从 excel 表上传到 sql server 我需要在 devexpress 进度条中显示进度，并且也需要以上传 100 中的 1 的方式显示进度，并且它应该递增直到完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T20:32:34.090

创建一个[**BackgroundWorker**](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)并将进度报告回主 GUI 线程。然后使用来自 BackgroundWorker 的状态更新进度条值。

这是一个例子，它使用了一个常见的 WinForms ProgressBar 而不是 DevExpress ProgressBar，但原理是一样的。

```
public partial class Progress : Form
{
    readonly BackgroundWorker _worker = new BackgroundWorker();

    public Progress()
    {
        InitializeComponent();

        _worker.WorkerReportsProgress = true;
        _worker.DoWork += _worker_DoWork;
        _worker.ProgressChanged += WorkerProgressChanged;
        _worker.RunWorkerCompleted += WorkerRunWorkerCompleted;

        _worker.RunWorkerAsync();
    }

    private void _worker_DoWork(object sender, DoWorkEventArgs e)
    {
        var worker = sender as BackgroundWorker;

        // Simulate work (uploading Excel records to SQL Server)
        for (var i = 1; i <= 100; i++)
        {
            if (worker.CancellationPending)
            {
                e.Cancel = true;
                break;
            }

            // Upload some data here, Sleep(100) is just an example
            Thread.Sleep(100);

            // Calculate current progress and report
            worker.ReportProgress(i);
        }
    }

    void WorkerProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        _progressBar.Value = e.ProgressPercentage;
    }

    void WorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        _progressBar.Value = 0;
    }
} 
```

# jquery - 是否可以仅将 jQuery Mobile 用于“某些”功能？

> ID：13643948
> 
> 赞同：1
> 
> 时间：2012-11-30T11:03:12.717
> 
> 标签：jquery, jquery-mobile

我只需要 jQuery mobile 来实现`swipeleft`.

事实上，当我加载 jQuery Mobile 时，它​​会编辑网站的整个模板；将所有链接更改为 ajax 请求，以及我根本不需要的大量功能！

是否可以在没有默认行为的情况下加载此插件？只是为了使用它的一些功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:31:06.210

你已经等不及我在最后一个问题中给你答案了。;)

为了简短回答，是的，你可以。转到此链接：

[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/) [1](http://jquerymobile.com/download-builder/)并构建自己的自定义 jQM 库。仅适用于 jQM 1.1.1 和 1.2。只接受事件 -> 触摸。

# c# - 在 DataGridCell 的 CellEditingTemplate 中查找文本框

> ID：13643950
> 
> 赞同：0
> 
> 时间：2012-11-30T11:03:14.177
> 
> 标签：c#, wpf, xaml

当单元格被选中并处于编辑模式时，我在 WPF 中以编程方式访问 DataGridTemplateColumn.CellEditingTemplate 中的文本框时遇到问题。

这是我的 DataGrid 的 XAML：

```
<DataGrid x:Name="OrderLinesGrid"
          Style="{StaticResource DataGridStyle}"
          SelectionMode="Single"
          SelectionUnit="Cell"
          ItemsSource="{Binding OrderLines}">
  <DataGrid.Columns>
    <DataGridTemplateColumn x:Name="NumberColumn"
                            Header="Varenr."
                            MinWidth="100">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <TextBlock Text="{Binding Number}" />
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
      <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
          <TextBox Text="{Binding Number}" />
        </DataTemplate>
      </DataGridTemplateColumn.CellEditingTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

选择单元格时如何访问该文本框？如果可以帮助您，这是显示 DataGrid 的可视化树的图像：

![DataGrid 可视化树](../Images/a6e095c3dc3873deb9a215e1aa21ea00.png)

我在 DataGridCell GotFocus 事件中尝试了以下操作，但没有运气。它只是返回 NULL，因为它没有找到。

```
private void DataGridCellGotFocus(object sender, RoutedEventArgs e)
{
    var cell = sender as DataGridCell;
    var textBox = FindChild<TextBox>(cell, null);
} 
```

FindChild 方法如下：

```
/// <summary>
/// Finds a Child of a given item in the visual tree. 
/// </summary>
/// <param name="parent">A direct parent of the queried item.</param>
/// <typeparam name="T">The type of the queried item.</typeparam>
/// <param name="childName">x:Name or Name of child. </param>
/// <returns>The first parent item that matches the submitted type parameter. 
/// If not matching item can be found, 
/// a null parent is being returned.</returns>
public static T FindChild<T>(DependencyObject parent, string childName)
    where T : DependencyObject
{
    // Confirm parent and childName are valid. 
    if (parent == null) return null;

    T foundChild = null;

    int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < childrenCount; i++)
    {
        var child = VisualTreeHelper.GetChild(parent, i);
        // If the child is not of the request child type child
        T childType = child as T;
        if (childType == null)
        {
            // recursively drill down the tree
            foundChild = FindChild<T>(child, childName);

            // If the child is found, break so we do not overwrite the found child. 
            if (foundChild != null) break;
        }
        else if (!string.IsNullOrEmpty(childName))
        {
            var frameworkElement = child as FrameworkElement;
            // If the child's name is set for search
            if (frameworkElement != null && frameworkElement.Name == childName)
            {
                // if the child's name is of the request name
                foundChild = (T)child;
                break;
            }
        }
        else
        {
            // child element found.
            foundChild = (T)child;
            break;
        }
    }

    return foundChild;
} 
```

我怀疑它与 DataTemplate 有关，但我需要一些关于如何选择 TextBox 子元素的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:12:50.573

我认为你应该尽可能避免使用`VisualTreeHelper`。如果我理解，您可以将您的登录信息封装在`CellEditingCommand`

```
<DataGridTemplateColumn.CellEditingTemplate>
  <DataTemplate>
    <TextBox Text="{Binding Number}">
      <i:Interaction.Triggers>
        <i:EventTrigger EventName="GotFocus">
          <i:InvokeCommandAction Command="{Binding CellEditingCommand}" />
        </i:EventTrigger>
      </i:Interaction.Triggers>
    </TextBox>
  </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

您也可以使用[行为](http://www.codeproject.com/Tips/401707/Behavior-and-Trigger-in-WPF-Silverlight)

**更新**：

```
<DataTemplate>
    <TextBox Text="{Binding Number}">
        <Interactivity:Interaction.Triggers>
            <Interactivity:EventTrigger EventName="Loaded">
                <TriggerActions:TakeFocusAction />
            </Interactivity:EventTrigger>
        </Interactivity:Interaction.Triggers>
    </TextBox>
</DataTemplate> 
```

并触发动作

```
public class TakeFocusAction : TriggerAction<UIElement>
{
    protected override void Invoke(object parameter)
    {
        AssociatedObject.Focus();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T09:26:45.167

```
ContentPresenter presenter = e.Column.GetCellContent(e.Row);    
TextBox textBox = presenter.ContentTemplate.FindName("nameOfYourTextBox", presenter) as TextBox; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:33:08.520

我认为你应该处理`PreparingCellForEdit`：某事

```
void MainDataGrid_PreparingCellForEdit(object sender, DataGridPreparingCellForEditEventArgs e)
{
   TextBox tb = e.Column.GetCellContent(e.Row) as TextBox;
} 
```

请参阅：[如何知道用户编辑 WPF DataGrid 单元格时为空？](https://stackoverflow.com/questions/13466889/how-to-know-while-user-editing-the-wpf-datagrid-cell-is-empty/13467131#13467131)

# shell - 拆分选项将变量放在开头而不是结尾？

> ID：13643953
> 
> 赞同：0
> 
> 时间：2012-11-30T11:03:26.400
> 
> 标签：shell, variables, split

我有一个 4700 万行的文件，我想将其拆分为 200 万行的文件，但文件名的结尾必须相同。

```
split -l 2000000 test_F5.csfasta splitted_test_F5.csfasta 
```

此拆分命令为我提供了以下文件：test_F5.csfstaaa、test_F5.csfstaab 等

我想要这些文件：aatest_F5.csfasta、abtest_F5.csfasta 等

是否有可能在 split 中执行此操作，或解决此问题的另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:00:06.673

要重命名这些拆分文件：

目前的文件是：

```
$ ls test*
test_F5.csfstaaa  test_F5.csfstaab 
```

重命名文件：

```
$ for file in test_F5.csfsta*
> do
>   mv $file $(echo $file | sed 's/\(.*\)\(..\)/\2\1/')
> done 
```

改名后：

```
$ ls *test_F5*
aatest_F5.csfsta  abtest_F5.csfsta 
```

# javascript - 点击时更新总价？

> ID：13643954
> 
> 赞同：1
> 
> 时间：2012-11-30T11:03:28.610
> 
> 标签：javascript, html, forms

我需要一些帮助。这是我的订单的完整工作代码。目前，如果我添加到“许可证数量”，价格不会更新，除非我重新单击单选按钮。

当我单击“+”和“-”按钮时，我希望能够获得更新的价格。但是怎么做？

```
 <form name="cart" id="cart" action="submit.php" method="get" >

<div id="input1.ogt">
<input name="RB1" type="radio" value="1" checked onclick="CheckChoice1();"> Standard Version - $25 / mth + VAT; $129 / yr + VAT
</div>

<div id="input2.ogt">
<input name="RB1" type="radio" value="2" onclick="CheckChoice2();">Expanded Version - $39 / mth + VAT; $199 / yr + VAT
</div>

<div id="input3.ogt">
<input name="RB2" type="radio" value="3" data-cost="0" onclick="CheckChoice3();" checked>Yearly
</div>

<div id="input4.ogt">
<input name="RB2" type="radio" value="4" data-cost="0" onclick="CheckChoice4();">Monthly
</div>
<p>Number of licences: 

<div id="quantityselection.ogt"><span style="font-size:11px; margin-left:25px;"><input type="button" value=" - " onclick="if(this.form.Users.value&gt;1) this.form.Users.value--;this.form.total.value=CheckChoice(5);" style="font-weight:bold;background:#CCC;"> <input type="text" name="Users" id="Users" value="1" min="1" onchange="this.form.total.value=CheckChoice(5);" style="width:30px;font-weight:bold;"> <input type="button" value=" + " onclick="this.form.Users.value++;this.form.total.value=CheckChoice(5);" style="font-weight:bold; background:#CCC;"></span><span style="font-size:11px; margin-left:25px;"><br></span></div>

<div id="input5.ogt"><input type="text" id="higher" value="1" hidden></div>
<div id="input6.ogt"><input type="text" id="lower" value="3" hidden></div>

<div id="totalprice.ogt">
  <p>Before VAT: 129,00 EUR
    <input type="text" id="summa" value="129" hidden="hidden" />
    <br>
    VAT 25,80 EUR
    <input type="text" id="km" value="25,80" hidden="hidden" />
    <br>
    TOTAL: 154,80 EUR
    <input type="text" id="kokku" value="154,80" hidden="hidden" />
    <input type="text" id="hind" value="129" hidden="hidden" />
  </p>
</div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br />
  <br />
  <input type="submit" name="button" id="button" value="Submit" />
</p>

</form>

<p>&nbsp; </p>
<p>&nbsp; </p>
<script type="text/javascript">

    function CheckChoice1()
        { 
        var ogt5 = document.getElementById('input5.ogt');
        ogt5.innerHTML = '<input type="text" name="higher" id="higher" value="1" hidden>';

        var totalprice = document.getElementById('totalprice.ogt');
        if (document.cart.lower.value == 3)
            var hind = 129 * document.cart.Users.value;
        if (document.cart.lower.value == 4)
            var hind = 25 * document.cart.Users.value;

        totalprice.innerHTML = 'Before VAT: ' + parseFloat(hind).toFixed(2) + ' EUR<br><input type="text" name="summa" value="'+hind+'" hidden>'
                        + 'VAT: ' + parseFloat(hind*0.2).toFixed(2) + ' EUR<input type="text" name="km" value="'+hind*0.2+'" hidden><br>'
                        + 'TOTAL: ' + parseFloat(hind*1.2).toFixed(2)+ ' EUR<input type="text" name="kokku" value="'+hind*1.2+'" hidden><br>'
                        + '<input type="text" name="hind" value="'+hind+'" hidden>';

        }

    function CheckChoice2()
        { 
        var ogt5 = document.getElementById('input5.ogt');
        ogt5.innerHTML = '<input type="text" name="higher" id="higher" value="2" hidden>';

        var totalprice = document.getElementById('totalprice.ogt');
        if (document.cart.lower.value == 3)
            var hind = 199 * document.cart.Users.value;
        if (document.cart.lower.value == 4)
            var hind = 39 * document.cart.Users.value;

    <!-- Järgnevad 5 rida on copy/paste CheckChoice1()-st -->       

        totalprice.innerHTML = 'Before VAT: ' + parseFloat(hind).toFixed(2) + ' EUR<br><input type="text" name="summa" value="'+hind+'" hidden>'
                        + 'VAT: ' + parseFloat(hind*0.2).toFixed(2) + ' EUR<input type="text" name="km" value="'+hind*0.2+'" hidden><br>'
                        + 'TOTAL: ' + parseFloat(hind*1.2).toFixed(2)+ ' EUR<input type="text" name="kokku" value="'+hind*1.2+'" hidden><br>'
                        + '<input type="text" name="hind" value="'+hind+'" hidden>';

        }

    function CheckChoice3()
        { 
        var ogt6 = document.getElementById('input6.ogt');
        ogt6.innerHTML = '<input type="text" name="lower" id="lower" value="3" hidden>';

        var totalprice = document.getElementById('totalprice.ogt');
        if (document.cart.higher.value == 1)
            var hind = 129 * document.cart.Users.value;
        if (document.cart.higher.value == 2)
            var hind = 199 * document.cart.Users.value;

        totalprice.innerHTML = 'Before VAT: ' + parseFloat(hind).toFixed(2) + ' EUR<br><input type="text" name="summa" value="'+hind+'" hidden>'
                        + 'VAT: ' + parseFloat(hind*0.2).toFixed(2) + ' EUR<input type="text" name="km" value="'+hind*0.2+'" hidden><br>'
                        + 'TOTAL: ' + parseFloat(hind*1.2).toFixed(2)+ ' EUR<input type="text" name="kokku" value="'+hind*1.2+'" hidden><br>'
                        + '<input type="text" name="hind" value="'+hind+'" hidden>';

        }

    function CheckChoice4()
        { 
        var ogt6 = document.getElementById('input6.ogt');
        ogt6.innerHTML = '<input type="text" name="lower" id="lower" value="4" hidden>';

        var totalprice = document.getElementById('totalprice.ogt');
        if (document.cart.higher.value == 1)
            var hind = 25 * document.cart.Users.value;
        if (document.cart.higher.value == 2)
            var hind = 39 * document.cart.Users.value;

        totalprice.innerHTML = 'Before VAT: ' + parseFloat(hind).toFixed(2) + ' EUR<br><input type="text" name="summa" value="'+hind+'" hidden>'
                        + 'VAT: ' + parseFloat(hind*0.2).toFixed(2) + ' EUR<input type="text" name="km" value="'+hind*0.2+'" hidden><br>'
                        + 'TOTAL: ' + parseFloat(hind*1.2).toFixed(2)+ ' EUR<input type="text" name="kokku" value="'+hind*1.2+'" hidden><br>'
                        + '<input type="text" name="hind" value="'+hind+'" hidden>';

        }

    function CheckChoice5()
        { 

        var totalprice = document.getElementById('totalprice.ogt');
        var hind = document.cart.Users.value*document.cart.hind.value;

        totalprice.innerHTML = 'Before VAT: ' + parseFloat(hind).toFixed(2) + ' EUR<br><input type="text" name="summa" value="'+hind+'" hidden>' + 'VAT: ' + parseFloat(hind*0.2).toFixed(2) + ' EUR<input type="text" name="km" value="'+hind*0.2+'" hidden><br>' + 'TOTAL: ' + parseFloat(hind*1.2).toFixed(2)+ ' EUR<input type="text" name="kokku" value="'+hind*1.2+'" hidden><br>' + '<input type="text" name="hind" value="'+hind+'" hidden>';

        }

  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:18:35.200

您的代码中有一个错字导致该函数未被调用。

将文本的出现更改`CheckChoice(5)`为`CheckChoice5()`，这应该可以解决问题。

# php - 用于 PHP 的 OAuth 2.0 服务器

> ID：13643956
> 
> 赞同：11
> 
> 时间：2012-11-30T11:03:34.297
> 
> 标签：php, security, oauth-2.0

我一直在努力寻找一个支持 OAuth 2.0 作为服务器的活跃开源 PHP 项目。有大量客户端示例连接到 Facebook、Twitter 等，但随着越来越多的人希望通过 API 公开他们自己的服务，我有点惊讶开源社区还没有解决这个需求。并不是什么都**没有**，而是大部分是过时的，几乎没有文档，并且在当前的开发和对话方面几乎没有活动。

我错过了一个好的开源选项吗？有谁知道任何商业选择？我真的需要尽快完成一些事情，而我个人没有带宽或安全凭证来自己解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-09T19:44:51.317

经过大量搜索后，我相信我已经为 PHP'ers 找到了最佳解决方案。意见是一毛钱，但这是我最喜欢的：

[http://bshaffer.github.io/oauth2-server-php-docs/](http://bshaffer.github.io/oauth2-server-php-docs/)

非常活跃、高质量的对话和可靠的产品以及良好（和改进）的文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T11:12:04.163

以下是可用服务器和客户端库的列表：

[http://oauth.net/2/](http://oauth.net/2/)

这导致了一个维护的[github项目。](https://github.com/bshaffer/oauth2-server-php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-22T22:24:29.393

[php 联盟的 oauth2 服务器](https://oauth2.thephpleague.com/)在 github 上得到更多关注和下载项目。我的个人经历很棒，最好的部分是它的文档。oauth2 的出色实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T20:28:10.323

根据[http://www.zimuel.it/oauth2-apigility/](http://www.zimuel.it/oauth2-apigility/) & [http://apigility.org/documentation/auth/authentication-oauth2](http://apigility.org/documentation/auth/authentication-oauth2)

您现在可以使用开源项目 Apigility 来实现 OAuth 2.0 服务器，下面是 Brent Shaffer 的实现......

到底...

> Apigility 中的 OAuth2 实现使用 Brent Shaffer 的 oauth2-server-php 库。Apigility 使用 PDO 数据库来存储与 OAuth2 协议相关的所有信息。您可以使用您的 Apigility 安装文件夹 (zf-apigility-skeleton) 下的文件 /vendor/zfcampus/zf-oauth2/data/db_oauth2.sql 中报告的架构创建数据库。

# javascript - 如何使用字符串访问元素 ID

> ID：13643960
> 
> 赞同：0
> 
> 时间：2012-11-30T11:03:52.640
> 
> 标签：javascript, html, spring-mvc

我有我的要求，这是无用的，在这里浪费你的时间：- 所以，如果我有

```
<form:amount id= "stackOverflowAMT" path ="stackOverflowAMT" size="10" maxlength="11"/> 
```

如果我在 Java 脚本中创建一个字符串，说`stringX ="stackOverflowAMT"` 是否可以使用这个字符串作为 stackOverflowAMT 的 ID。

我尝试了很多，现在只是想确定是否有可能请您帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:06:40.570

您应该能够使用以下方式访问它：

```
document.getElementById(stringX) 
```

或者在 jQuery 中：

```
$('#' + stringX) 
```

希望有帮助。

# .htaccess - .htaccess 如果子域从文件夹中检索，而不是 301 重定向？

> ID：13643961
> 
> 赞同：0
> 
> 时间：2012-11-30T11:04:05.940
> 
> 标签：.htaccess, mod-rewrite, subdomain

如果请求是子域，我希望我的站点只指向 /user 文件夹。

如果请求是 subdomain.site.com/admin，则站点应显示 subdomain.site.com/user/admin 的页面。

我的代码的问题在于它会进行 301 重定向，而不仅仅是保留 url 地址。

我的代码如下所示：

```
<IfModule mod_rewrite.c>

DirectoryIndex index.php

RewriteEngine on
RewriteBase / 

RewriteCond %{HTTP_HOST} !^www.bildsida.se(.*)
RewriteCond %{HTTP_HOST} ^[^.]+.bildsida.se(.*)

RewriteRule ^$ user/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule (.*) user/$1 [L]

</IfModule> 
```

你也可以自己试试，去[http://mickes.bildsida.se/admin](http://mickes.bildsida.se/admin)看看地址怎么变成/user/admin了。非常令人不安...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:41:25.227

你只需要你展示的几行来让它工作。

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} !^www.bildsida.se
RewriteCond %{HTTP_HOST} ^.+\.bildsida\.se

RewriteRule ^(.*)$ user/$1 [L] 
```

我调整了 HTTP_HOST 检查，因为该参数只查看域名，所以最后不需要 (.*)。我还删除了查看文件是否存在或是否为目录的检查，因为您希望重定向所有内容（例如，没有理由可以访问其他子域的文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:29:22.537

您的代码可以简化为以下几行：（改为尝试）

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www\.)?bildsida\.se [NC]
RewriteRule ^(.*)$ /user/$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:54:22.147

最后！经过日日夜夜阅读论坛和文档，并测试所有可能的方法，我让它工作了！

**消音：**

```
<IfModule mod_rewrite.c>

    DirectoryIndex index.php

    RewriteEngine on
    RewriteBase /

    RewriteCond %{HTTP_HOST} !^www.bildsida.se
    RewriteCond %{HTTP_HOST} !^bildsida.se

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^$ user/index.php [L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)? user/$1/ [QSA]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule /(.+)/ user/$1 [QSA]

</IfModule> 
```

# javascript - 尝试在表单中单击提交按钮时设置隐藏参数的值

> ID：13643962
> 
> 赞同：0
> 
> 时间：2012-11-30T11:04:10.747
> 
> 标签：javascript, jquery

尝试在单击提交按钮时在隐藏字段上设置参数。

```
 $('.delete').on('click', function() {
        $('#id').val('1000');
    }); 
```

这是隐藏字段：

```
 <input type="hidden" name="itemId" id="id" /> 
```

这是我的提交按钮之一：

```
 <input type="submit" value="Delete item" class="delete" /> 
```

但是在服务器上， itemId 字段为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:21:58.053

尝试使用 Jquery .attr() 函数来做到这一点：

改变：

```
$('.delete').on('click', function() {
$('#id').val('1000');
}); 
```

至：

```
$('.delete').click(function() {
$('#id').attr('value','1000');
}); 
```

# python - 对于每 820 字节保存到新文件

> ID：13643963
> 
> 赞同：1
> 
> 时间：2012-11-30T11:04:13.817
> 
> 标签：python, binary

我有一个文件（大小：20 mb | 二进制文件），需要每 820 个字节解析一次，并且将 820 的内容保存到一个新文件中，文件名是 2 字节和 16 字节之间的字符串（ASCII）标记。

```
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
    ^ THE FILENAME COMES FROM HERE    ^ 
```

好的，现在已经解释了挑战（我希望）我现在所拥有的是：

```
#!/usr/bin/python

with open("file", "rb") as f:
    byte = f.read()
    if byte > 820:
        print "Reach the 1 record mark on the File you have defined " 
```

但我也可以在这里看到一种可能性：

```
for f.read(820) in file:
   a = f.read()
   b = open("Iam_from_2_to_16_byte_string", w)
   b.write(a)
   b.close 
```

好吧，我不知道如何迭代前 820 个字节，然后是下一个 820 字节，下一个直到文件结尾，并且每次我做那个新文件时，最难的部分是抓取 2 到 16 字节的缓冲区并将其用作我拥有 820 字节的每个新文件中的文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:16:43.423

该[`iter()`函数](http://docs.python.org/2/library/functions.html#iter)可以传递一个函数和一个哨兵，使用它来读取 820 字节块中的文件：

```
for chunk in iter(lambda: f.read(820), ''):
    # chunk is now 820 bytes long, until the last chunk which *could* be shorter. 
```

每次迭代，`lambda`都会调用该函数，读取 820 个字节，直到`f.read(820)`返回一个空字符串（表示 EOF）。

该块只是一个字符串，因此您可以使用切片来获取文件名：

```
filename = chunk[2:16] 
```

一起使用：

```
with open("file", "rb") as f:
    for chunk in iter(lambda: f.read(820), ''):
        open(chunk[2:16], 'wb').write(chunk) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:17:43.630

Python 的`file`方法`read()`有一个选项参数，用于设置要读取的字节数。它还将文件指针留在读取的字节末尾，以便任何下一次调用都将在先前读取的最后一个字节之后开始：

```
n = 820
with open("file", "rb") as f:
    while True:
        data = f.read(n)
        if not data:
            break
        # do stuff with data.
        # for example, get a filename
        filename = str(data[2:16]) 
```

它以 820 步迭代文件内容，直到到达 EOF。

# mouse - SublimeText：使用鼠标为一行添加书签？

> ID：13643964
> 
> 赞同：6
> 
> 时间：2012-11-30T11:04:14.583
> 
> 标签：mouse, sublimetext2

我正在从 Textmate 切换到 SublimeText 2。

在 TextMate 中，只需单击行号即可用鼠标为行添加书签。我已经这样做了很多年，虽然我确信有些人可能更喜欢键盘快捷键，但我不是其中之一。

我可以使用鼠标在 Sublimetext 中为一行添加书签吗？是否有可以启用此功能的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:57:07.390

目前只有键盘快捷键支持。您可以在此处添加鼠标点击反馈[http://sublimetext.userecho.com/topic/19525-add-bookmarks-support/](http://sublimetext.userecho.com/topic/19525-add-bookmarks-support/)

# c# - 使用 EF 4.0 从 Azure 网站连接到 SQL Azure

> ID：13643966
> 
> 赞同：0
> 
> 时间：2012-11-30T11:04:19.887
> 
> 标签：c#, entity-framework, azure, azure-sql-database, azure-web-app-service

我正在使用以下内容`connectionstring`将我的网站从 Azure 网站连接到 SQL Azure，并且我能够在本地连接它，这也与 Cloud App 一起使用。但是当我从 Azure 网站连接时，它会引发登录失败。

`<add name="sample" connectionString="metadata=res://*/dbModel.csdl|res://*/dbModel.ssdl|res://*/dbModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Server=tcp:server.database.windows.net,1433;Database=my_db;User ID=my_db_login@server;Password=**************;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;&quot;" providerName="System.Data.EntityClient"/>`

错误信息是`The underlying provider failed on Open.`

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:17:40.150

我设法让这个工作。在 MSDN 上讨论这个案例时，一位成员建议我检查服务数据中心的区域。我的网站位于“东亚”地区，而云应用程序和 sql azure 位于“东南亚”地区。因此，我已将其他服务移至“东亚”，因为“东南亚”中没有网站。无论如何，现在它按预期工作。

# android - Android :getVisibility() 错误

> ID：13643967
> 
> 赞同：1
> 
> 时间：2012-11-30T11:04:20.057
> 
> 标签：android

我有 alistview 当我单击列表视图时它会进入登录屏幕，当登录成功时它会返回带有图标的列表视图..到目前为止它工作良好，问题是当我单击列表视图时图标再次出现时登录屏幕正在启动..我不想在图标可见后再次加载登录屏幕..我尝试了以下操作，但它给出了错误

```
if (img.getVisibility() == 8) { 
    Intent intent = new Intent(MainActivity.this,LoginActivity.class);                  
    startActivity(intent);
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:17:11.540

采用

```
if (img.getVisibility() != View.Visible) 
```

不要使用硬编码值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:07:37.950

将您的条件更改为：

```
if (img.getVisibility() == View.Visible) 
```

**编辑：**或者更好的方式你可以使用 [View.isShown()](http://developer.android.com/reference/android/view/View.html#isShown%28%29)来检查 View 或者它的孩子是否可见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:09:09.743

您不应该真正关注应用程序逻辑的 UI 状态。您最好使用 startActivityForResult，然后在 onActivityResult 中设置一个标志并在您的单击侦听器中使用此标志，也可以使用它来使图标可见或不可见。

如果您离开活动，您还应该考虑在共享首选项中设置标志以实现持久性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:09:38.377

你面临什么样的错误？你能展示它使用吗？您不应该使用硬代码值来比较可见性，使用这些 `View.GONE`或`View.INVISIBLE`或`VIEW.VISIBLE`

像这样

```
if(img.getVisibility != View.VISIBLE){
// do something 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:06:49.447

采用

```
if (img.getVisibility() != View.Visible) 
```

代替

```
if (img.getVisibility() == 8) 
```

检查[http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

# php - php 函数检查垃圾邮件字段是否有 value1 或 value2 或 value 3，然后继续发送邮件或显示错误

> ID：13643968
> 
> 赞同：0
> 
> 时间：2012-11-30T11:04:21.813
> 
> 标签：php, html, compare

我正在尝试为我的联系表单设置垃圾邮件检查。

垃圾邮件检查将是一个简单的文本字段，用户可以在其中输入 3 个可能值的答案。

我将如何检查 php 中字符串（垃圾邮件字段）的内容并将其与“If”结合起来。

这就像

如果 spamfield=XXXXXX 或 YYYYY 或 ZZZZZ 则发送电子邮件 否则显示错误消息

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:07:29.483

if(in_array($spamField, array('xxxxxx', 'yyyyyy', 'zzzzzz')))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:06:55.673

```
if($spamfield == "XXXXXX" || $spamfield == "YYYYY" || $spamfield == "ZZZZZ")
{
   send_mail();
} 
```

|| 是运算符 OR

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:07:16.423

```
$spamfield = $_POST["spamfield"];
if ($spamfield == "XXXXXX" || $spamfield == "YYYYYYYY" || $spamfield == "ZZZZZZZ")
    mail(...);
else
    echo "Error!"; 
```

# drupal - 如何创建自定义主题视图

> ID：13643969
> 
> 赞同：2
> 
> 时间：2012-11-30T11:04:23.443
> 
> 标签：drupal, drupal-7, drupal-views

我用`CCK`and定义了一个视图`View 2 modules`。我有两种打印结果的方式。1-带有**“节点”** 2-带有**“字段”**。

1.  如果我选择节点内容，我会选择查看模式。默认情况下是（预告片，RSS，....）。现在，

**问题 1** - 如何创建新的自定义视图节点主题？即：new teaser / teaserOne/ etc ...（放入下拉菜单）

1.  如果我选择字段内容，我会在主题信息（高级菜单）中看到这些数据：`*NOTE: (this data for prompted in front page block)*`

    *   **显示输出**：views-view.tpl.php、views-view--frontpage.tpl.php、views-view--default.tpl.php、views-view--default.tpl.php、views-view--page .tpl.php，视图-视图--首页--page.tpl.php
    *   **样式输出**：views-view-unformatted.tpl.php、views-view-unformatted--frontpage.tpl.php、views-view-unformatted--default.tpl.php、views-view-unformatted--default.tpl。 php，视图-视图-未格式化--page.tpl.php，视图-视图-未格式化--frontpage--page.tpl.php
    *   **行样式输出**：views-view-fields.tpl.php、views-view-fields--frontpage.tpl.php、views-view-fields--default.tpl.php、views-view-fields--default.tpl .php，视图-视图-字段--page.tpl.php，视图-视图-字段--frontpage--page.tpl.php

**问题 2**：如何使用字段方法为打印结果创建自定义主题？

请一步一步告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:17:30.790

问题 1：我认为您正在寻找的是[实体视图模式模块。](http://drupal.org/project/entity_view_mode)

我不确定你对第二个问题的意思。

# sql - 如何从 1 行获取查询值以用于另一行？

> ID：13643976
> 
> 赞同：5
> 
> 时间：2012-11-30T11:04:38.320
> 
> 标签：sql, database, sql-server-2008, stored-procedures

这是示例查询：

```
payment_Type    payment_value       cost_type      cost value
Cost I          100                 Registration       40
Cost I          100                 books              40
Cost I          100                 Lab                40 
```

**COST I**有 3 个元素，`Cost_Type`它们都有自己的`Cost_value`.

我想这样操作：

```
payment_Type    payment_value       cost_type      cost value     Payment_by_cost_type
Cost I          100                 Registration       40              40
Cost I          100                 books              40              40
Cost I          100                 Lab                40              20 
```

关键是我想把它分成`payment_value`每个`cost_value`。在示例中，`payment_by_cost`变为 40、40、20 = 100。

实验室`cost_value`是 40，但它可以分配值是 20，因为上面的分割 2 成本类型仍然存在。

我可以使用`Payment_by_cost_type`下一行记录中的值吗？我一直在尝试将值插入`Payment_by_cost_type`到临时表中，但 select 不能有 insert 语句。

有没有人对如何解决这个问题有任何想法？我一直在咨询 DWH，他说它必须使用无法通过查询完成的 Store 过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:30:12.753

我猜您的表不仅包含“Cost I”，还包含其他值，因此这里是一个查询，用于输出表中所有组（按 Payment_type）的结果：

```
;with table1 as
(select 
t.*,
row_number() 
 OVER 
(PARTITION BY payment_Type order by cost_type) rn
from t
)
,table2 as
( select t4.*,isnull((select sum(cost_value) from table1 
    where table1.payment_type=t4.payment_type and rn<t4.rn),0) CumSum 
  from table1 t4
) 
select payment_type,payment_value,cost_type,cost_value,
case when cost_value+CumSum<=payment_value then cost_value
  else 
    payment_value-Cumsum                  
  end                     

from table2
order by Payment_type,rn; 
```

# [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/4e799/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:24:52.193

您需要为记录定义某种顺序，以定义应按何种顺序应用付款

一旦你完成了（我在这个例子中使用 ID）......

```
select *
    , case
          when payment_value-(select isnull(SUM(cost_value),0) from yourtable t2 where t2.id<t1.id)<cost_value
          then payment_value-(select isnull(SUM(cost_value),0) from yourtable t2 where t2.id<t1.id)
          else cost_value
          end
from yourtable t1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:59:26.473

使用公用表表达式逐步完成。

```
declare @t table (
payment_type varchar(20),
payment_value int,
cost_type varchar(20),
cost_value int,
cost_id int --for the ordering
)

insert @t values 
('Cost I',100,'Registration',40,1),
('Cost I',100,'books',40,2),
('Cost I',100,'Lab',40,3),
('Cost 2',100,'Registration',40,4),
('Cost 2',100,'books',50,5),
('Cost 2',100,'Lab',40,6)

--get count for each payment_type to determine last row
;with payment_value_cte(payment_type,payment_value,count) as
(
    select payment_type,payment_value,COUNT(*) from @t group by payment_type,payment_value
),
--use sequential index for each row in payment type
payment_value_index_cte(
    payment_type ,
    payment_value,
    cost_type,
    cost_value,
    cost_id,
    row) as
(
    select *,ROW_NUMBER() OVER(PARTITION BY payment_type ORDER BY cost_id) from @t --assumes order is by an id
),
--get sum of each row for payment type except last row
payment_value_sum_except_last_cte(
    payment_type,
    payment_value,
    current_sum) as
(
    select pi.payment_type,pi.payment_value,SUM(cost_value) 
    from payment_value_index_cte pi
    inner join payment_value_cte pt on pt.payment_type = pi.payment_type
    where pi.row < pt.count
    group by pi.payment_type,pi.payment_value
)
select 
pi.payment_type,pi.payment_value,pi.cost_type,pi.cost_value,
--if last row calculate difference, else use the cost_value
case when pi.row = pt.count then pt.payment_value - pe.current_sum else pi.cost_value end [Payment_by_cost_type]   
from payment_value_index_cte pi
inner join payment_value_cte pt on pt.payment_type = pi.payment_type
inner join payment_value_sum_except_last_cte pe on pe.payment_type = pi.payment_type 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T16:32:34.667

```
SELECT payment_Type, payment_value, cost_type, cost_value,
       CASE WHEN ROW_NUMBER() OVER (ORDER BY(SELECT 1)) = COUNT(*) OVER (PARTITION BY payment_Type)
            THEN SUM(cost_value) OVER (PARTITION BY payment_Type) - payment_value 
            ELSE cost_value END AS Payment_by_cost_type
FROM dbo.your_table 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d4eab/1/0)上的演示[](http://sqlfiddle.com/#!3/d4eab/1/0)

# mysql - 小选择子查询使整个查询减慢大约 10 倍

> ID：13643977
> 
> 赞同：1
> 
> 时间：2012-11-30T11:04:41.237
> 
> 标签：mysql, database-performance

我有以下 MySQL 表：

```
CREATE TABLE IF NOT EXISTS `pics` (
  `id` mediumint(8) unsigned NOT NULL auto_increment,
  `bnb_id` mediumint(7) unsigned NOT NULL,
  `img_path` varchar(128) NOT NULL,
  `img_path_gallery` varchar(128) NOT NULL,
  `img_path_thumb_small` varchar(128) NOT NULL,
  `img_path_thumb_large` varchar(128) NOT NULL,
  `img_path_thumb_grid` varchar(128) NOT NULL,
  `title` varchar(80) NOT NULL,
  `order` tinyint(2) NOT NULL,
  `upload_date` datetime NOT NULL,
  `state` enum('LOCAL','S3') NOT NULL default 'LOCAL',
  `is_cover` tinyint(1) unsigned default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `bnb_id_2` (`bnb_id`,`is_cover`),
  KEY `bnb_id` (`bnb_id`),
  KEY `is_cover` (`is_cover`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=30371 ; 
```

`is_cover`是我创建的一个字段，用于为每张图片选择一张图片`bnb_id`：当图片被选为封面时，它设置为 1，`NULL`否则设置为 1。我需要把`LEFT JOIN`桌子换到另一个，让我们称之为`bnb`；`pics`每个条目在表中可能有多行`bnb`（有一个参照完整性约束`bnb_id`），但在这种情况下，我必须从表中只提取一行`pics`，因此需要`is_cover`列和所有索引（我每隔一个解决方案尝试产生持续 10 到 50 秒的查询）。

但是，即使在这种情况下，查询也非常慢，并且在表中大约 10000 个元素和`bnb`表中大约 30000个元素的数据池上，每个查询都需要 5 到 8 秒的执行时间`pics`。从 where = 1 的表中选择`is_cover`非常快速和直接，但是当放入更大的查询时，一切都会中断。

```
SELECT subbnb.*, 
            3956 * 2 * ASIN(
                SQRT(
                    POWER(
                        SIN((_LAT - abs(lat)) * pi()/180 / 2), 
                    2) +
                    COS(_LAT * pi()/180 ) * 
                    COS(abs(lat) * pi()/180) * 
                    POWER(
                        SIN((_LNG - abs(lng)) * pi()/180 / 2), 
                    2) 
                )
            ) AS distance,
            prices.price,
            pics.img_path_thumb_grid,
            reviews.count reviewsCount,
            likes.count likesCount
        FROM 
            (SELECT
                bnb.*,
                bnbdata_a.*,
                pos.lat,
                pos.lng

                FROM bnb

                JOIN bnbdata 
                    ON (bnb.id = bnbdata.bnb_id)

                JOIN positions pos
                    ON (bnb.id = pos.bnb_id) 
            ) subbnb

            LEFT JOIN (
                    SELECT *
                    FROM pics 
                    WHERE is_cover = 1
                ) pics
                ON (subbnb.id = pics.bnb_id)

            LEFT JOIN (SELECT price, bnb_id FROM prices WHERE category = "DAILY") prices
                ON (subbnb.id = prices.bnb_id)

            LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM reviews GROUP BY bnb_id) reviews
                ON (subbnb.id = reviews.bnb_id)

            LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM likes GROUP BY bnb_id) likes
                ON (subbnb.id = likes.bnb_id)
        WHERE
            lng BETWEEN _LNGA AND  _LNGB
            AND lat BETWEEN _LATA AND  _LATB
        HAVING distance < 10
        ORDER BY distance
        LIMIT 0, 25 
```

（您看到的带有 _ 前缀的字符串是实际数值）

`EXPLAIN`查询产生以下结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY <derived5>  system  NULL    NULL    NULL    NULL    0   const row not found
1   PRIMARY <derived6>  system  NULL    NULL    NULL    NULL    0   const row not found
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    10522   Using where; Using temporary; Using filesort
1   PRIMARY <derived3>  ALL NULL    NULL    NULL    NULL    7040    
1   PRIMARY <derived4>  ALL NULL    NULL    NULL    NULL    1   
6   DERIVED likes   index   NULL    PRIMARY 6   NULL    1   Using index
5   DERIVED reviews index   NULL    bnb_id  5   NULL    1   Using index
4   DERIVED prices  ALL NULL    NULL    NULL    NULL    1   Using where
3   DERIVED pics    ref is_cover    is_cover    2       11760   Using where
2   DERIVED pos ALL PRIMARY NULL    NULL    NULL    10543   
2   DERIVED bnbdata eq_ref  PRIMARY PRIMARY 3   db.pos.bnb_id   1   
2   DERIVED bnb eq_ref  PRIMARY PRIMARY 3   db.pos.bnb_id   1 
```

看起来`is_cover`索引被 MySQL ( `Using where`, id 4) 忽略了，但是当我对`pics`表运行小选择时也会发生同样的情况，一切都发生得很快。我在这个查询中找不到瓶颈，删除 JOIN 以`pics`使一切变得更快，但是 JOIN 子查询本身非常快，大查询的其余部分也是如此 - 即使在开始时使用数学计算代码，它也永远不会去远远超过 2 秒的执行时间。

有谁知道瓶颈在哪里，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:35:15.677

您可以尝试使用像这样的连接重建查询（如果不正确，很抱歉，但您只描述了一个表）：

```
SELECT
  bnb.*, bnbdata_a.*, 
  pos.lat, pos.lng
  3956 * 2 * ASIN(
    SQRT(
      POWER(
        SIN((_LAT - abs(lat)) * pi()/180 / 2), 
      2) +
      COS(_LAT * pi()/180 ) * 
      COS(abs(lat) * pi()/180) * 
      POWER(
        SIN((_LNG - abs(lng)) * pi()/180 / 2), 
      2) 
    )
  ) AS distance,
  prices.price,
  pics.img_path_thumb_grid,
  reviews.count reviewsCount,
  likes.count likesCount
FROM bnb
JOIN bnbdata 
  ON bnb.id = bnbdata.bnb_id
JOIN positions pos 
  ON bnb.id = pos.bnb_id
LEFT JOIN pics 
  ON bnb.id = pics.bnb_id AND pics.is_cover = 1
LEFT JOIN prices 
  ON bnb.id = prices.bnb_id 
LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM reviews GROUP BY bnb_id) reviews
  ON bnb.id = reviews.bnb_id
LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM likes GROUP BY bnb_id) likes
  ON bnb.id = likes.bnb_id
WHERE
  lng BETWEEN _LNGA AND _LNGB AND lat BETWEEN _LATA AND _LATB AND distance < 10
ORDER BY distance
LIMIT 0, 25 
```

或者像这样重建：

```
SELECT tmp_bnb.*,
  pics.img_path_thumb_grid,
  reviews.count reviewsCount,
  likes.count likesCount 
FROM     
  (
    SELECT
      bnb.*, bnbdata_a.*, 
      pos.lat, pos.lng
      3956 * 2 * ASIN(
      SQRT(
        POWER(
          SIN((_LAT - abs(lat)) * pi()/180 / 2), 
        2) +
        COS(_LAT * pi()/180 ) * 
        COS(abs(lat) * pi()/180) * 
        POWER(
          SIN((_LNG - abs(lng)) * pi()/180 / 2), 
        2) 
      )
      ) AS distance,
      prices.price
    FROM bnb
    JOIN bnbdata 
      ON bnb.id = bnbdata.bnb_id
    JOIN positions pos 
      ON bnb.id = pos.bnb_id
    WHERE
      lng BETWEEN _LNGA AND _LNGB AND lat BETWEEN _LATA AND _LATB AND distance < 10
    ORDER BY distance
    LIMIT 0, 25
  ) as tmp_bnb
LEFT JOIN pics 
  ON tmp_bnb.id = pics.bnb_id AND pics.is_cover = 1
LEFT JOIN prices 
  ON tmp_bnb.id = prices.bnb_id 
LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM reviews GROUP BY bnb_id) reviews
  ON tmp_bnb.id = reviews.bnb_id
LEFT JOIN (SELECT COUNT(*) AS count, bnb_id FROM likes GROUP BY bnb_id) likes
  ON tmp_bnb.id = likes.bnb_id 
```

或者您可以将您的查询一分为二，在第一个查询中您会获得基本信息，然后您会获得额外的信息，例如`rewiews`计数和`likes`计数。

我还认为一个好主意是将`reviews_counter`和添加`likes_counter`到`bnb`表中，而不是每次都计算它，而是每隔一段时间（小时）计算一次，或者使用插入触发器增加它。还考虑添加新列，该列将在表`cover_pic_id`中保存封面图片的 id`bnb`

让我知道性能如何。

# javascript - 淘汰赛：下拉列表中每个选项中的表格

> ID：13643984
> 
> 赞同：0
> 
> 时间：2012-11-30T11:05:17.217
> 
> 标签：javascript, html, knockout.js

`<option>`我想在我的每一个中都有两列的表格`<select>`。
我试过这个[JSFIDDLE-source](http://jsfiddle.net/engXh/)。但是绑定`<span>`不起作用

```
<span data-bind="text : countryName"></span>
<span data-bind="text : selectedCountry"></span> 
```

有任何想法吗？还是另一种解决方案？

**编辑**
![在此处输入图像描述](../Images/6da6b06dee5520b30bf1609d8886e3e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:53:26.783

虽然您无法为 a 的内容设置样式，但您可以使用 Twitter 出色的[Bootstrap](http://twitter.github.com/bootstrap/components.html)框架之类的东西来获得类似的效果。

[http://jsfiddle.net/marrok/QdjPt/](http://jsfiddle.net/marrok/QdjPt/)

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    <span class="name" data-bind="text: selectedItem().name"></span>
    <span class="desc" data-bind="text: selectedItem().desc"></span>    <span class="caret"></span>
  </a>

  <ul class="list dropdown-menu" data-bind="foreach: items ">
      <!-- I should be able to use 'click' here but I'm not sure why it doesn't work. -->
      <li class="item" data-bind="event: {mouseover : function(){$root.selectedIndex($index())}}">      
          <span class="name" data-bind="text: name"></span>
          <span class="desc" data-bind="text: desc"></span>
      </li>
  </ul>
</div> 
```

Javascript：

```
var Thing = function(name, desc) {
    var self = this;
    self.name = ko.observable(name);
    self.desc = ko.observable(desc);
};

var AppModel = function() {
    var self = this;
    self.items = ko.observableArray([
        new Thing(1, "Thing One"),
        new Thing(2, "Thing Two"),
        new Thing(3, "Thing Three"),
        new Thing(4, "Thing Four")]);
    self.selectedIndex = ko.observable(0);
    self.selectedItem = ko.computed(function() {
        return self.items()[self.selectedIndex()];
    })
};

ko.applyBindings(new AppModel());​ 
```

# android - Android应用开发环境和使用的工具

> ID：13643985
> 
> 赞同：-5
> 
> 时间：2012-11-30T11:05:19.660
> 
> 标签：android, ide

我想开发安卓应用。在我的个人电脑中为它设置环境需要什么？所需的系统规格是什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:12:53.527

您需要 Windows 7/Linux os/Window xp Ram:2GB 或更高版本 (ddr3) Android SDK 套件，如果您没有互联网连接，请下载离线 android sdk。稍后我会给你链接以获得更好的性能保持系统最新。需要更好的图形支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:28:26.960

使用此链接[http://developer.android.com/tools/index.html](http://developer.android.com/tools/index.html)

或者只需按照这些步骤

1.  如果您使用来自 oracle [http://www.oracle.com/technetwork/java/javase/downloads/index.html的 Window Sun java](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
2.  Android Sdk 来自[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html) for Windows 版本
3.  [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)的 Eclipse 插件

下载上面提到的所有这些东西

安装`java`到系统设置java路径到系统环境变量从bin文件夹到`jdk` 平台工具和工具的当前设置路径

启动eclipse插件并创建桌面快捷方式

选择工作区

选择`help ->install new Software -> install ADT plugin`安卓下载安装[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

选择`windows-> preference ->Android -> select android sdk folder`点击应用更新sdk到`windows-> preference ->Sdk Manager`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:11:34.433

为 android 开发最简单的方法是下载[Eclipse IDE](http://www.eclipse.org/)以及[Android SDK](http://developer.android.com/sdk/index.html)
如何安装它你可以在官方的[Android 开发者页面上阅读](http://developer.android.com/sdk/installing/installing-adt.html)

# javascript - 我可以使用哪些 javascript 或 css 库来实现这种下拉效果？

> ID：13643986
> 
> 赞同：0
> 
> 时间：2012-11-30T11:05:23.707
> 
> 标签：javascript, css, drop-down-menu

[http://www.samsung.com/sg/consumer/pc-peripherals-printer/notebook-pc/smart-pc/XE700T1C-H03SG-dealerlocator](http://www.samsung.com/sg/consumer/pc-peripherals-printer/notebook-pc/smart-pc/XE700T1C-H03SG-dealerlocator)

在此网页中，在左侧找到经销商下方，有一个地址下拉菜单。

我想知道是否有任何 javascript 或 css 库可以用来实现相同的效果。

请建议一个我可以轻松修改以更改的内容： 下拉菜单的颜色 字体类型 字体大小 字体颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:13:13.267

你可以使用 twitter 的 bootstrap，见这里 [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)文档和演示

# java - 在 Cassandra IndexExpression 中使用运算符“或”

> ID：13643987
> 
> 赞同：1
> 
> 时间：2012-11-30T11:05:24.970
> 
> 标签：java, cassandra, pelops

我有一个带有 Cassandra db 的 Java 应用程序。我正在使用 Cassandra Pelops。我有一个 columnFamily cf1，那里有很多列。对于其中一些，我创建了二级索引，因此我可以使用它们进行搜索。出于搜索目的，我创建了一个 IndexExpression（表达式）列表，例如：

```
final IndexExpression propertyIdExpression = new IndexExpression(
ByteBuffer.wrap(Bytes.fromUTF8(CassandraIntegrationDAOHelper.COL_PROPERTY_ID).toByteArray()),
                IndexOperator.EQ,
                ByteBuffer.wrap(Bytes.fromInt(entity.getProperty().getId()).toByteArray())
        );
        expressions.add(propertyIdExpression); 
```

现在我需要包括一些额外的检查。我有列 dateFrom 和 dateTo。请求是返回这两个日期在某个时间间隔内的所有行。它们不必完全在区间内，重要的是在这个区间内开始或结束。所以，我需要以某种方式实现这样的事情：

```
if( (dateTo is greaterThan intervalStart) or (dateFrom is lowerThan intervalEnd) ) 
```

通过使用 IndexExpression。有什么建议么？我希望我很清楚！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:37:11.243

Cassandra 目前不支持二级索引查询中的析取（“or”），只支持合取（“and”）。在大多数情况下，对分离的每一半进行两个单独的查询并组合结果就足够了。

但是，如果您正在处理时间范围，那么您应该使用列名，而不是二级索引。我建议查看一些有关[时间序列数据](http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/)的文档，并考虑如何重构数据以支持基于时间范围的高效查询。

# ruby-on-rails - 如何自动更改数据库中的记录？

> ID：13643988
> 
> 赞同：2
> 
> 时间：2012-11-30T11:05:28.343
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我需要在特定日期和时间自动更改数据库中的记录。

示例：当日期和时间为 01/12/2012 17:15:00 时，我希望某些记录自动设置为 1。有什么解决方案吗？

（我使用的是 Rails 3.2.6）

**更新 30.11.12 - 13:06**

真正的问题是我的数据库中有一个日期时间记录，当该记录中的日期和时间超过今天的日期和时间时 - 然后我希望将另一条记录设置为 1。有什么办法可以发表`if`声明，或者某事，在我的控制器的某个地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:35:21.973

我可以在这里看到一些可能的选择。这取决于您的假设/限制。

可能的假设（按实施难度增加排序）：

1) 数据库中的数据不需要正确，但是下次有人查看数据时，我们会相应地对其进行修复 2) 数据库中的数据不需要正确，但例如在可定义的时间内-interval 3) 数据库中的数据需要始终正确

让我更详细地介绍这些

## 数据将显示正确，下次有人查看数据时

这实际上很容易。在检索要显示的数据时，检查某些条件/时间是否已经过去，并相应地设置标志。

对于用户而言，正确设置标志实际上并不相关，但每次用户查看数据时，标志都会正确设置。

## 数据在给定的时间间隔内是正确的

一个简单的案例是每小时检查一次，每半小时检查一次，每天检查一次，并设置或修复需要更改的项目的状态。

要做到这一点，您将使用 cron 作业或[gem](https://github.com/javan/whenever)

这是一种非常简单的方法，将确保您的数据在可接受/给定的时间间隔内是正确的（如果您的问题当然有这样的时间间隔）。

## 数据必须设置在正确的时间

在这里，我看到了两个选项，对于需要在给定时间更改状态的每个项目，使用与以前相同的选项来安排任务：cron 或无论何时 gem。这会起作用，但我不完全确定 cron 是否是安排大量一次性作业的最佳解决方案。

或者，一个非常干净的解决方案是使用像[DelayedJob](https://github.com/collectiveidea/delayed_job)这样的 gem 。这个gem主要用于将任务卸载到后台，例如需要更多时间处理的任务。但是您也可以在不久的将来，在非常特定的时间使用它来执行任务。

```
 def change_flag_when_needed
    # change the flag
  end
  # 5.minutes.from_now will be evaluated when change_flag_when_needed is called
  handle_asynchronously :in_the_future, :run_at => Proc.new { 5.minutes.from_now } 
```

每当您调用`change_flag_when_needed`时，它都会评估给定的块，该块现在包含`5.minutes.from_now`，但也可以计算应该执行的实际时间。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:12:20.773

您可以随时使用[https://github.com/javan/whenever](https://github.com/javan/whenever)为您设置 cron 作业

无论何时，其文件中都有一个简单的语法，`schedule.rb`可让您“随时随地”运行任务

从他们的自述文件中：

```
every 3.hours do
  runner "MyModel.some_process"
  rake "my:rake:task"
  command "/usr/bin/my_great_command"
end

every 1.day, :at => '4:30 am' do
  runner "MyModel.task_to_run_at_four_thirty_in_the_morning"
end

every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot
  runner "SomeModel.ladeeda"
end

every :sunday, :at => '12pm' do # Use any day of the week or :weekend, :weekday
  runner "Task.do_something_great"
end

every '0 0 27-31 * *' do
  command "echo 'you can use raw cron syntax too'"
end

# run this task only on servers with the :app role in Capistrano
# see Capistrano roles section below
every :day, :at => '12:20am', :roles => [:app] do
  rake "app_server:task"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:12:07.137

在 linux 服务器上使用 cron 作业并设置运行脚本的时间

# php - 产品不会保存。永远处理

> ID：13643994
> 
> 赞同：0
> 
> 时间：2012-11-30T11:05:43.100
> 
> 标签：php, magento, magento-1.5

我正在为 Magento 做一个模块，我的模块具有与 Magento 的 Crosssell 本机功能相同的功能。我有这个产品网格，用户选择一些复选框来将此产品与主要产品相关联。一切都好。

但是，我创建了一个自定义属性来保存此产品的 ID，并为“catalog_product_save_after”事件创建一个观察者：

```
 <events>
        <catalog_product_save_after>
            <observers>
                <brindeproduto_save_product_data>
                    <type>singleton</type>
                    <class>brindeproduto/observer</class>
                    <method>saveProductTabData</method>
                </brindeproduto_save_product_data>
            </observers>
        </catalog_product_save_after>
    </events> 
```

在我的 saveProductTabData 上，我按请求的 ID 加载主要产品，并将所选产品的 IDS 放在我的自定义属性上，例如“1,2,3,4,5,6”。

好的，但是当我做 $product->save(); 我的浏览器负载无限，没有任何错误或异常。观察者的代码很简单。

```
$product = Mage::getModel('catalog/product')->load($product_id);
//some logical Specific information that is not in question now.
$product->save(); 
```

而已。

我试过调试保存功能并得到一些有趣的结果。在 Mage_Core_Model_Abstract 函数 save() 上，我在部分代码上放了一些骰子，然后全部搞定。此代码是 Magento 1.5 社区上功能保存第 330 行的一部分。

```
 if ($dataCommited) {
        $this->_afterSaveCommit();
    }
    return $this; 
```

这是函数的最后一行。我在返回之前把死。

```
 if ($dataCommited) {
        $this->_afterSaveCommit();
    }
    die('test');
    return $this; 
```

我有骰子。但在返回之前仅此而已。有些人知道发生了什么？就这样耽误了5个小时。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:13:27.013

您不应该在观察者中进行任何保存 (*_save_after)。

这将导致一个永无止境的循环

# jpa - OO设计和变更日志功能的数据模型

> ID：13643995
> 
> 赞同：1
> 
> 时间：2012-11-30T11:05:41.960
> 
> 标签：jpa, data-modeling, relationship

：*EJB 3、JPA (EcipseLink) 和 Oracle 数据库*

一个应用程序有两个实体：Group 和 Person。存在**一对多的**关系。

要求是，**必须保存 Group 和 Person 的每个更改以供以后滚动或显示。**

第一个想法：

> 将更改/创建的 id 和时间戳作为 Group 和 Person 的复合主键。每次更改都会创建一个具有相同 id 和新时间戳的新对象。例如，更改组帽子，然后创建一个新组。但是Group和Person之间的关系是不变的。这里有一个问题：“一对多”的限制将被打破！现在一个人与具有相同 id 的两个组的关系。

第二个想法：

> 为 Group 和 Person 创建另外两个实体 GroupArchive 和 PersonArchive。在 Group 和 Person 中只有最新的信息。任何更改都将被复制并保存到存档实体。Group 和 GroupArchive 之间是一对多的关系。Person 和 PersonArchive 也是如此。

我的想法可以实现吗？有人有更好的主意吗？

# jquery - 背景动画在 Internet Explorer 9.0 中没有动画

> ID：13643999
> 
> 赞同：2
> 
> 时间：2012-11-30T11:05:52.347
> 
> 标签：jquery, internet-explorer-9

我正在使用 Jquery 在表单提交时隐藏/显示 div - 隐藏表单并显示“正在加载...”文本和动画。它在除 Internet Explorer（我的版本是 9.0）之外的所有浏览器中都能正常工作。在 Internet Explorer 中，背景动画没有动画，它显示为静态 gif。任何想法如何解决这个问题？

背景动画生成@http [://www.ajaxload.info/](http://www.ajaxload.info/)网站

**脚本：**

```
<script type="text/javascript">                                         
$(document).ready(function(){
    $("#enf").submit(function(){
        $('#formdiv').hide();
        $('#wait').show();    
    });
});
</script> 
```

**形式**

```
 <div id="formdiv">
    <form id="enf" name="enf" enctype="multipart/form-data" action="/upload4.php" method="post">
        ......form elements.......
        <input type="submit" value="Send" name="add" />
    </form>
    </div>
    <div id="wait">Please wait...</div> 
```

**css 文件：**

```
#wait{
    display:none;
    text-align:center;
    float:left;
    width:778px;
    background:#fdfdfd url('/loading.gif') no-repeat center center;padding:60px 0 20px 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:57:44.947

我知道这是一个老问题，但我今天遇到了同样的问题。这是我对 CSS 背景特定图像没有动画（而不是`img`标签）的解决方案。它适用于 IE8、IE9 以及最新版本的 Firefox 和 Chrome。

**JavaScript：**

```
$(function () {
    var submitButton = $('input[type="submit"]');
    submitButton.button('enable');
    submitButton.after('<span class="spinner"></span>');
    submitButton.parents('form:first').submit(function () {
        submitButton.button('disable');
        window.setTimeout("ieSpinnerFix()", 25);
    });
});

function ieSpinnerFix() {
    $('.spinner').css('background', 'url(/Content/Common/Images/ajax-loader.gif) no-repeat center left');
    $('.spinner').show();
    window.setTimeout("anyOtherFunctions()", 5000);
}

function anyOtherFunctions() {
    $('.spinner').text('We are processing your request, please stand by for awesomeness.');
} 
```

**HTML：**

```
<form action="/Search" method="post">
    <div class="pageNav">
        <input type="submit" value="Search" />
    </div>
</form> 
```

**CSS 样式：**

```
.spinner {
    display: none;
    padding-left: 20px;
    background: url('/Content/Common/Images/ajax-loader.gif') no-repeat center left;
    margin: auto 10px;
} 
```

这个想法是初始`setTimeout`允许浏览器在提交表单后冷静下来。如果超时时间太短，我会在 Chrome 上遇到奇怪的问题。将背景 CSS 重新应用到 类似于对其他帖子中引用的标签的修复。