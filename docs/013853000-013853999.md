# StackOverflow 问答 13853000-13853999

# php - 在 PHP 中从文本到图像

> ID：13853001
> 
> 赞同：0
> 
> 时间：2012-12-13T04:33:12.077
> 
> 标签：php, jquery, image, gd

请查看演示站点

[http://jsfiddle.net/Alidad/fexGj/](http://jsfiddle.net/Alidad/fexGj/)

该演示称为“图像标题”，我的下一步是将文本和图像作为一组转换为图像，以便我可以单击鼠标右键进行复制和粘贴。

但是，有 PHP 代码允许我从文本转换为图像，但我很难弄清楚如何将“图像标题”（演示）转换为 HTML！

这是示例 PHP 代码，但我不知道如何组合它！

```
<?php
// Create a 100*30 image
$im = imagecreate(100, 30);

// White background and blue text
$bg = imagecolorallocate($im, 255, 255, 255);
$textcolor = imagecolorallocate($im, 0, 0, 255);

// Write the string at the top left
imagestring($im, 5, 0, 0, 'Hello world!', $textcolor);

// Output the image
header('Content-type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

请帮助我如何将其转换为 jQuery 代码中的图像！

是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:52:11.727

最简单的方法可能就是这样做：

```
// index.html
<img src="render_image.php?text=Hello World" /> 
```

接着：

```
// render_image.php
<?php
// Create a 100*30 image
$im = imagecreate(100, 30);

// White background and blue text
$bg = imagecolorallocate($im, 255, 255, 255);
$textcolor = imagecolorallocate($im, 0, 0, 255);

// Write the string at the top left
imagestring($im, 5, 0, 0, $_GET['text'], $textcolor);

// Output the image
header('Content-type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

使用它对您的 javascript 代码稍作修改应该可以工作。

有关使用 $_GET 变量的更多信息：http: [//php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

# javascript - 如何在 html 页面中显示正在运行的计数器

> ID：13853005
> 
> 赞同：0
> 
> 时间：2012-12-13T04:33:43.407
> 
> 标签：javascript, html

我有一个包含数值的 div 元素。这对应于分钟数：当前游戏的秒数。我想让它成为一个运行计数器，显示尝试解决游戏所花费的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:18:56.203

如果您愿意，我有一个功能性小提琴可以使用：

[http://jsfiddle.net/nicholas_eden/zaRqQ/](http://jsfiddle.net/nicholas_eden/zaRqQ/)

html:

```
<span id="elapsed">0:00</span>;​ 
```

Javascript: var $elapsed = $('#elapsed');

```
var start = new Date().getTime();

function updateTime() {
  var now = new Date().getTime();
  var elapsed = now - start;
  var formatted = secondsToTime(elapsed/1000);
  $elapsed.html(formatted.h + ':' + formatted.m + ':' + formatted.s);
  setTimeout(updateTime, 1000);
}

function secondsToTime(secs) {
  var hours = Math.floor(secs / (60 * 60));

  var divisor_for_minutes = secs % (60 * 60);
  var minutes = Math.floor(divisor_for_minutes / 60);

  var divisor_for_seconds = divisor_for_minutes % 60;
  var seconds = Math.ceil(divisor_for_seconds);

  if (minutes < 10) {
    minutes = '0' + minutes;
  }

  if (seconds < 10) {
    seconds = '0' + seconds;
  }

  var obj = {
    "h": hours,
    "m": minutes,
    "s": seconds
  };
  return obj;
}

updateTime();​ 
```

这采用获取初始时间的方法，然后每秒计算当前时间和初始时间的差。然后将其解析为更易读的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:38:52.057

我会先尝试为您指明正确的方向——如果您自己设法完成一项任务（尽管有指导），您总是会学到更多。如果您仍然遇到问题，请发表评论，我很乐意提供更多基于代码的答案。

跟踪两个变量：`totalSeconds`和`totalMinutes`。编写一个每秒执行一次的函数（这可以使用 JavaScript 的`setInterval`方法来完成），将`totalSeconds`- 加 1，如果该数字达到 60，则加 1`totalMinutes`并重置`totalSeconds`为 0。

即，这是两个变量将包含的内容，每秒修改一次：

```
totalSeconds <- 0
totalMinutes <- 0

totalSeconds <- 1
totalMinutes <- 0

totalSeconds <- 2
totalMinutes <- 0

...

totalSeconds <- 59
totalMinutes <- 0

totalSeconds <- 0
totalMinutes <- 1

totalSeconds <- 1
totalMinutes <- 1

totalSeconds <- 2
totalMinutes <- 1

... 
```

更新这两个变量后，更改 div 的`innerHTML`属性以表示更改。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:50:51.473

在 HTML 中

```
<div id="countdown" onload="countDown(10:20)"> 10:20 </div> 
```

在 JS 中

```
function countDown(time) { 
    cmin2=time.split(":")[0];
    csec2=time.split(":")[1];
    down=setInterval(function(){DownRepeat();},1000);
}

unction DownRepeat() { 
    csec2--;        
    if(csec2==-1) { 
        csec2=59; cmin2--; 
    }

    if ((cmin2 == 0) && (csec2 == 0)) {
         clearInterval(down);
     //do ur action after finish count down
    }   
    document.getElementById("countdown").innerHTML = cmin2 + ";" + csec2; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-07T20:08:56.413

将计数器保持在 iframe 中，让 iframe 每半秒或每秒刷新一次，因此“游戏”继续运行，但 iframe 将每秒显示一个更新的计数器。（我不会比第二更接近）

-S

# java - 更新框架或重新验证/重新绘制面板

> ID：13853009
> 
> 赞同：2
> 
> 时间：2012-12-13T04:34:05.593
> 
> 标签：java, swing, jframe, jpanel

如何使用更改的内容更新 Java 框架？

我想更新一个框架或只是更新内容的面板。我有什么用

这是我想重新验证框架或重新绘制主面板或任何可行的地方，我已经尝试了很多东西，但都没有奏效。

```
public void actionPerformed(ActionEvent e) {
        //System.out.println(e.getActionCommand());
        if (e.getActionCommand().equals("advance")) {
            multi--;
                    // Revalidate update repaint here <<<<<<<<<<<<<<<<<<<
        }
        else if (e.getActionCommand().equals("reverse")) {
            multi++;
                    // Revalidate update repaint here <<<<<<<<<<<<<<<<<<<       
        }
        else {
            openURL(e.getActionCommand());
        }

        } 
```

这是整个java文件

```
/*
 *
 *
 */ 

package build;

import java.lang.reflect.Method;
import javax.swing.JOptionPane;
import java.util.Arrays;
import java.util.*;
import java.util.ArrayList;

import javax.swing.*;
import javax.swing.AbstractButton;
import javax.swing.JScrollPane;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.ImageIcon;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

/* 
 * ButtonDemo.java requires the following files:
 *   images/right.gif
 *   images/middle.gif
 *   images/left.gif
 */
public class StockTable extends JPanel
                        implements ActionListener {
    static int multi = 1;
    int roll = 0;
    static TextVars textvars = new TextVars();
    static final String[] browsers = { "firefox", "opera", "konqueror", "epiphany",
            "seamonkey", "galeon", "kazehakase", "mozilla", "netscape" };
    JFrame frame;
    JPanel mainpanel, panel1, panel2, panel3, panel4, panel2left, panel2center, panel2right;
        JButton stknames_btn[] = new JButton[textvars.getNumberOfStocks()];
    JLabel label[] = new JLabel[textvars.getNumberOfStocks()];
    JLabel headlabel, dayspan, namelabel;
    JRadioButton radioButton;
    JButton button;
    JScrollPane scrollpane;
    int wid = 825;
    public JPanel createContentPane() {

        mainpanel = new JPanel();
        mainpanel.setPreferredSize(new Dimension(wid, 800));
        mainpanel.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        panel1 = new JPanel();
        panel1.setPreferredSize(new Dimension(wid, 25));
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(0,0,0,0);
        mainpanel.add(panel1, c);

        // Panel 2------------
        panel2 = new JPanel();
        panel2.setPreferredSize(new Dimension(wid, 51));
        c.gridx = 0;
        c.gridy = 1;
        c.insets = new Insets(0,0,0,0);
        mainpanel.add(panel2, c);
        panel2left = new JPanel();
        panel2left.setPreferredSize(new Dimension(270, 51));
        c.gridx = 0;
        c.gridy = 1;
        c.insets = new Insets(0,0,0,0);
        panel2.add(panel2left, c);
        panel2center = new JPanel();
        panel2center.setPreferredSize(new Dimension(258, 51));
        c.gridx = 1;
        c.gridy = 1;
        c.insets = new Insets(0,0,0,0);
        panel2.add(panel2center, c);
        panel2right = new JPanel();
        panel2right.setPreferredSize(new Dimension(270, 51));
        c.gridx = 2;
        c.gridy = 1;
        c.insets = new Insets(0,0,0,0);
        panel2.add(panel2right, c);
        // ------------------

        panel3 = new JPanel();
        panel3.setLayout(new GridBagLayout());
        scrollpane = new JScrollPane(panel3);
        scrollpane.setPreferredSize(new Dimension(wid, 675));
        c.gridx = 0;
        c.gridy = 2;
        c.insets = new Insets(0,0,0,0);
        mainpanel.add(scrollpane, c);

            ImageIcon leftButtonIcon = createImageIcon("images/right.gif");

            //b1 = new JButton("Disable middle button", leftButtonIcon);
            //b1.setVerticalTextPosition(AbstractButton.CENTER);
            //b1.setHorizontalTextPosition(AbstractButton.LEADING); //aka LEFT, for left-to-right locales
            //b1.setMnemonic(KeyEvent.VK_D);
            //b1.setActionCommand("disable");

            //Listen for actions on buttons 1
            //b1.addActionListener(this);

            //b1.setToolTipText("Click this button to disable the middle button.");

            //Add Components to this container, using the default FlowLayout.
            //add(b1);

        headlabel = new JLabel("hellorow1");
            c.gridx = 0;       
            c.gridy = 0;       
        c.insets = new Insets(0, 0, 0, 0);
        panel1.add(headlabel, c);

        radioButton = new JRadioButton("Percentage");
            c.gridx = 2;       
            c.gridy = 0;       
        c.insets = new Insets(0, 0, 0, 0);
        panel1.add(radioButton, c);

        radioButton = new JRadioButton("Days Range");
            c.gridx = 3;      
            c.gridy = 0;      
        c.insets = new Insets(0, 0, 0, 0);
        panel1.add(radioButton, c);

        radioButton = new JRadioButton("Open / Close");
            c.gridx = 4;       
            c.gridy = 0;       
        c.insets = new Insets(0, 0, 0,0 );
        panel1.add(radioButton, c);

        button = new JButton("<<");
        button.setPreferredSize(new Dimension(50, 50));
        button.setActionCommand("reverse");
        button.addActionListener(this);
            c.gridx = 0;       
            c.gridy = 1;       
        c.insets = new Insets(0, 0, 0, 0);
            panel2left.add(button, c);

        dayspan = new JLabel("hellorow2"); 
        dayspan.setHorizontalAlignment(JLabel.CENTER); 
        dayspan.setVerticalAlignment(JLabel.CENTER);
        dayspan.setPreferredSize(new Dimension(270, 50)); 
            c.gridx = 1;       
            c.gridy = 1;
        c.insets = new Insets(0, 0, 0, 0);       
            panel2center.add(dayspan, c);

        button = new JButton(">>");
        button.setPreferredSize(new Dimension(50, 50));
        button.setActionCommand("advance");
        button.addActionListener(this);
        if (multi == 0) {
            button.setEnabled(false);
        }
        else {
            button.setEnabled(true);
        }
            c.gridx = 2;       
            c.gridy = 1;       
        c.insets = new Insets(0, 0, 0, 0);
            panel2right.add(button, c);

        int availSpace_int = textvars.getStocks().size()-textvars.getNumberOfStocks()*7;

        ArrayList<String[]> stocknames = textvars.getStockNames();
        ArrayList<String[]> stocks = textvars.getStocks();
        for (int column = 0; column < 8; column++) {
            for (int row = 0; row < textvars.getNumberOfStocks(); row++) { 

                if (column==0) {
                    if (row==0) {
                        namelabel = new JLabel(stocknames.get(0)[0]); 
                        namelabel.setVerticalAlignment(JLabel.CENTER);
                        namelabel.setHorizontalAlignment(JLabel.CENTER);
                        namelabel.setPreferredSize(new Dimension(100, 25));
                        c.gridx = column;
                        c.gridy = row;
                        c.insets = new Insets(0, 0, 0, 0);
                        panel3.add(namelabel, c);
                    }
                    else {
                        stknames_btn[row] = new JButton(stocknames.get(row)[0], leftButtonIcon); 
                        stknames_btn[row].setVerticalTextPosition(AbstractButton.CENTER);
                        stknames_btn[row].setActionCommand(stocknames.get(row)[1]); 
                        stknames_btn[row].addActionListener(this);
                        stknames_btn[row].setToolTipText("go to Google Finance "+stocknames.get(row)[0]); 
                        stknames_btn[row].setPreferredSize(new Dimension(100, 25));
                        c.gridx = column;
                        c.gridy = row;
                        c.insets = new Insets(0, 0, 0, 0);
                        //scrollpane.add(stknames[row], c);
                        panel3.add(stknames_btn[row], c);
                    }
                }
                else {
                        label[row]= new JLabel(textvars.getStocks().get(columnMulti(multi))[1]);
                        label[row].setBorder(BorderFactory.createLineBorder(Color.black));
                        label[row].setVerticalAlignment(JLabel.CENTER);
                        label[row].setHorizontalAlignment(JLabel.CENTER);
                        label[row].setPreferredSize(new Dimension(100, 25));    
                        c.gridx = column;
                        c.gridy = row;
                        c.insets = new Insets(0,0,0,0);
                        panel3.add(label[row], c);
                }

            }
        }

        return mainpanel;
        }

        public void actionPerformed(ActionEvent e) {
        //System.out.println(e.getActionCommand());
        if (e.getActionCommand().equals("advance")) {
            multi--;
        }
        else if (e.getActionCommand().equals("reverse")) {
            multi++;        
        }
        else {
            openURL(e.getActionCommand());
        }

        }

        /** Returns an ImageIcon, or null if the path was invalid. */
        protected static ImageIcon createImageIcon(String path) {
            java.net.URL imgURL = StockTable.class.getResource(path);
            if (imgURL != null) {
                    return new ImageIcon(imgURL);
            } else {
                    System.err.println("Couldn't find file: " + path);
                    return null;
            }
        }

    public static void openURL(String url) {
        String osName = System.getProperty("os.name");
        try {
            if (osName.startsWith("Mac OS")) {
                Class<?> fileMgr = Class.forName("com.apple.eio.FileManager");
                Method openURL = fileMgr.getDeclaredMethod("openURL",
                    new Class[] {String.class});
                openURL.invoke(null, new Object[] {url});
                        }
            else if (osName.startsWith("Windows")) {    
                Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + url);
            }
            else { //assume Unix or Linux
                boolean found = false;
                for (String browser : browsers)
                    if (!found) {
                        found = Runtime.getRuntime().exec(
                        new String[] {"which", browser}).waitFor() == 0;
                        if (found) 
                            Runtime.getRuntime().exec(new String[] {browser, url}); 
                    }   
                    if (!found)
                        throw new Exception(Arrays.toString(browsers));
                    }
                }   
        catch (Exception e) {   
            JOptionPane.showMessageDialog(null,
                "Error attempting to launch web browser\n" + e.toString());
        }
    }
    int reit = 0;
    int start = textvars.getStocks().size()-((textvars.getNumberOfStocks()*5)*7)-1;
    public int columnMulti(int multi) {
        reit++;
        start++;
        if (reit == textvars.getNumberOfStocks()) {
            reit = 0;
            start=start+64;
        }
        //start = start - (multi*(textvars.getNumberOfStocks()));
        return start;
    }

        /**
        * Create the GUI and show it.  For thread safety, 
        * this method should be invoked from the 
        * event-dispatching thread.
        */
        private static void createAndShowGUI() {

        //Create and set up the window.
            JFrame frame = new JFrame("Stock Table");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            //Create and set up the content pane.
            StockTable newContentPane = new StockTable();
            //newContentPane.setOpaque(true); //content panes must be opaque
            //frame.setContentPane(newContentPane);
        frame.setContentPane(newContentPane.createContentPane());
        frame.setSize(800, 800);

            //Display the window.
            frame.pack();
            frame.setVisible(true);

        }

    public static void main(String[] args) {
            //Schedule a job for the event-dispatching thread:
            //creating and showing this application's GUI.
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        createAndShowGUI(); 
                    }
            });
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:01:19.457

当你发现自己想要基于一个小的变化“重新创建”一个 UI 时，应该会敲响警钟。在某些情况下，这将是一个好主意，但在大多数情况下，这是一个糟糕设计的标志。

让我们从...

```
frame.setContentPane(newContentPane.createContentPane()); 
```

这是一个坏主意。你创建一个`JPanel`只是为了创建另一个`JPanel`。突然之间，您并没有丢失 UI 的上下文。

而不是`createContentPane`从窗格的构造函数中简单地构造您的 UI`StockTable`并将其添加到框架中......更像......

```
frame.setContentPane(newContentPane); 
```

摆脱面板，直接`mainPanel`使用。`StockTable`

我无法运行您的代码，但它看起来很像您试图“模拟”表格布局。相反，简化您的生活并学习使用[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html). 如果您这样做，更新表格会更加容易（更不用说看起来更好）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:01:46.263

我的建议是，如果您想更新`swing component`始终使用事件调度程序线程。

我认为这可能会帮助你

```
public void actionPerformed(ActionEvent e) {
        //System.out.println(e.getActionCommand());
        if (e.getActionCommand().equals("advance")) {
            multi--;

                   Runnable edt = new Runnable() {
                   public void run() {
                       /*Update your components here*/
                       }
                   };

            SwingUtilities.invokeLater(edt);
          }
        else if (e.getActionCommand().equals("reverse")) {
            multi++;
            Runnable edt= new Runnable() {
                  public void run() {
                      /*Update your components here*/
                     }
                };

                 SwingUtilities.invokeLater(edt);
        }
        else {
            openURL(e.getActionCommand());
        }

        }
    } 
```

# sql-server - 强制更新作为 PK 身份的 ID

> ID：13853015
> 
> 赞同：0
> 
> 时间：2012-12-13T04:34:34.950
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个问题，我在截断表后移植了一些记录，该表会自动重新设置表的种子。

问题是我要移植的 Id 都搞砸了，因为重新种子当然又从 1 开始，但我移植的第一个 Id 是 17 并且上升，中间跳过了一些。

所以我移植的记录集应该有这样的 PK：

```
17
18
20
33
... and so on

Right now I have:
1
2
3
4.. and so on 
```

再次因为我在 PK 还在那里的时候做了一个插入，并且只在我移植到第一组时才做了一个重新播种，我被搞砸了。

如何通过临时禁用其上的 PK 来使用 PK（我移植到的那个）手动更新此表？它也有一些对该 PK 的引用，这也使这变得更加复杂。我只想说，嘿，禁用此 PK 并禁用任何 FK...在 SQL Mangagement Studio 中自己手动更新 Id，然后再次启用 PK 和相关 FK。

我没有那么多记录要更新，所以我可以手动完成。问题是 PK 和相关 FK 的约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:31:19.420

快速的方法是删除主键和外键关系。您可以在管理工作室中执行此操作。

数据加载完成并且您已修复 ID 后，再次创建键和外键关系。

# javascript - jQuery.getJSON：如何避免在每次刷新时请求 json 文件？（缓存）

> ID：13853016
> 
> 赞同：4
> 
> 时间：2012-12-13T04:34:58.333
> 
> 标签：javascript, jquery, json, caching, getjson

在本例中，您可以看到生成的 HTML 列表。每次刷新时，脚本都会请求数据文件 (ajax/test.json) 并再次构建列表。

生成的文件“ajax/test.json”被静态缓存。但是我怎样才能避免在每次刷新时都请求这个文件呢？

```
// source: jquery.com
$.getJSON('ajax/test.json', function(data) {
    var items = [];

    $.each(data, function(key, val) {
        items.push('<li id="' + key + '">' + val + '</li>');
    });

    $('<ul/>', {
        'class': 'my-new-list',
        html: items.
    }).appendTo('body');
}); 
```

这**不起作用**：

```
list_data = $.cookie("list_data");
if (list_data == undefined || list_data == "") {
    $.getJSON('ajax/test.json', function(data) {
        list_data = data;
    });
}

var items = [];
$.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
});

$('<ul/>', {
    'class': 'my-new-list',
    html: items.
}).appendTo('body'); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T04:54:50.400

怎么许诺？

```
var list_data = localStorage.getItem("list_data"),
          def = $.Deferred();

if (!list_data) {
    def = $.getJSON('ajax/test.json', function(data) {
        list_data = data;
        localStorage.setItem("list_data", JSON.stringify(list_data));
    });
}else{
    list_data = JSON.parse(list_data);
    def.resolve();
}

def.done(function() {
    var items = [];
    $.each(list_data, function(key, val) {
        items.push( $('<li />', {id: key, text: val}) );
    });

    $('<ul/>', {'class': 'my-new-list'}).html(items).appendTo('body');
});
​ 
```

我也只使用本地存储，如果要支持 IE7 或更低版本，请使用[**MDN**](https://developer.mozilla.org/en-US/docs/DOM/Storage)上提供的 shim ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:44:42.360

因为您的代码循环`data`不在您所在的范围内`$.each`。反而：

```
list_data = $.cookie("list_data");

function buildList(data) {
    var items = [];

    $.each(data, function(key, val) {
        items.push('<li id="' + key + '">' + val + '</li>');
    });

    $('<ul/>', {
        'class': 'my-new-list',
        html: items.
    }).appendTo('body');
}

//if we dont have list data
if (!list_data) {
    //request for the data
    $.getJSON('ajax/test.json', function(data) {
        list_data = data;
        //build list using new data
        buildList(data);
    });
} else {
    //or use existing list data
    buildList(list_data)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:46:15.163

请注意，如果您停留在同一页面上，则不需要 cookie —— 只需将其存储在某个对象中即可：

```
window.list_data = data; 
```

如果您需要稍后或在页面刷新后检索数据，请使用 cookie。但是您需要对其进行序列化，因为不可能将对象存储在 cookie 中：

```
// retrieve
list_data = $.cookie("list_data");
if (list_data) {
    // have to de-serialize from string to object
    list_data = JSON.parse(list_data);
} else {
    // doesn't exist in cookie, make AJAX call
}

// save
$.cookie("list_data", JSON.stringify(data)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T05:01:57.053

您也许可以让浏览器正常缓存文件，请参阅 jQuery ajax 文档：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
jQuery.ajax( settings )
cache
Boolean
Default: true, false for dataType 'script' and 'jsonp'
If set to false, it will force requested pages not to be cached by the browser. 
Setting cache to false also appends a query string parameter, "_=[TIMESTAMP]", to the URL. 
```

如果我理解正确，getJson 只是 ajax 调用的抽象，专门用于 json。您应该尝试将其设置为 true，这将使浏览器正常缓存。

将其放入 cookie 中也可以，但最大大小为 4kb。我假设你的 json 没有那么大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-26T20:56:30.293

我自己做了一些研究，现在使用现代浏览器中的 localStorage 或 sessionStorage 对象来存储对象一段时间似乎是可行的。两者都有其局限性。通常 localStorage 和 sessionStorage 对象的限制为 5mb。数据在窗口/选项卡的整个生命周期中都是持久的。今天对浏览器的支持还不错（[目前为 89%](http://caniuse.com/namevalue-storage)）。

sessionStorage 和 localStorage 共享相同的 API。因此，选择在本地存储数据的位置仅取决于您的用例。

## 使用示例

```
if (!sessionStorage.myapp) {
   var xhr = new XMLHttpRequest(),
   results = {}; // Results of xhr request

   // ...

   // store your xhr results to sessionStorage.
   // Both sessionStorage and localStorage can only store strings.
   sessionStorage.setItem('myapp', JSON.stringify(results));
} 
```

我也会避免使用 cookie，因为它们的大小限制 (4K)，而且因为 cookie 在每次交易后都会传回服务器。

对于当前现有的 Web 存储 API，Sitepoint 是一个非常好的资源：[http ://www.sitepoint.com/an-overview-of-the-web-storage-api/](http://www.sitepoint.com/an-overview-of-the-web-storage-api/)

# python - 有没有办法在美丽的汤中计算html页面中的标签数量

> ID：13853025
> 
> 赞同：9
> 
> 时间：2012-12-13T04:35:50.970
> 
> 标签：python, beautifulsoup

我正在考虑在 python 中创建一个字典，其中键是 html 标签名称，值是标签出现的次数。有没有办法用漂亮的汤或其他东西来做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-13T05:19:17.307

BeautifulSoup 非常适合 HTML 解析，您当然可以将它用于此目的。这将非常简单：

```
from bs4 import BeautifulSoup as BS

def num_apperances_of_tag(tag_name, html):
    soup = BS(html)
    return len(soup.find_all(tag_name)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T05:25:27.480

使用 BeautifulSoup，您可以通过省略搜索条件来搜索所有标签：

```
# print all tags
for tag in soup.findAll():
    print tag.name # TODO: add/update dict 
```

如果您只对出现次数感兴趣，BeautifulSoup 可能有点矫枉过正，在这种情况下您可以[`HTMLParser`](http://docs.python.org/2/library/htmlparser.html)改用：

```
from HTMLParser import HTMLParser

class print_tags(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print tag # TODO: add/update dict

parser = print_tags()
parser.feed(html) 
```

这将产生相同的输出。

要创建您的字典，`{ 'tag' : count }`可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

occurrences = defaultdict(int)
# ...
occurrences[tag_name] += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-23T13:32:29.897

这是我非常简单的解决方案：

```
from html.parser import HTMLParser
import requests

class MyHTMLParser(HTMLParser):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.start_tags = []
        self.end_tags = []

    def handle_starttag(self, tag, attrs):
        self.start_tags.append(tag)

    def handle_endtag(self, tag):
        self.end_tags.append(tag)

if __name__ == '__main__':
    parser = MyHTMLParser()

    html_response = requests.get('https://jetlend.ru/')
    parser.feed(html_response.text)

    print('Start tags:', len(parser.start_tags))
    print('End tags:', len(parser.start_tags))
    print('Amount:', len(parser.start_tags) + len(parser.start_tags)) 
```

来源：[https ://docs.python.org/3/library/html.parser.html](https://docs.python.org/3/library/html.parser.html)

# html - 谷歌浏览器不显示重音字符

> ID：13853026
> 
> 赞同：0
> 
> 时间：2012-12-13T04:36:17.003
> 
> 标签：html

为什么这不起作用？它应该显示重音字符......但似乎不是。

![在此处输入图像描述](../Images/a51486e25a173d614a44c084e88df5df.png)

编辑：将其切换为`<meta charset="ISO-8859-1" />`将使`c`名字中的正确的，但姓氏中的两个仍然没有重音...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:40:41.597

试试`<meta charset="UTF-8" />`。

此外，请确保文件编码也可以支持这些符号（如果您的编辑器还没有默认为 UTF-8）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:38:38.350

下载软记事本++，然后打开文件，点击编码，然后点击“转换为utf 8”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T19:33:44.293

我有同样的问题。但是另一个具有相同设置的文件夹有效：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/> 
```

*   所以，用另一个 html 创建一个新文件夹。
*   如果可行，请在那里转移名称/内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T06:28:51.057

即使将文件编码类型更改为 UTF-8 后，**重音字符**也无法正确显示，请按照以下步骤操作。

1：在记事本++中打开文件。

2：看Notepad++的底部。如果您看到 Windows(CR LF) 然后右键单击它，将其更改为 Unix(LF) 并保存文件。

这解决了我在 chrome 中重音字符的错误。

# android - jQuery Mobile 页面从左到右转换

> ID：13853027
> 
> 赞同：0
> 
> 时间：2012-12-13T04:36:19.603
> 
> 标签：android, jquery, cordova, jquery-mobile

我有一个 android phonegap jquery 应用程序。我正在使用“swipeleft”功能更改我的页面。

当我向左滑动时，我想显示下一页，而在向右滑动时，我想显示上一页。

通过这段代码，一切正常。但

每次新页面从右到左。即逻辑上我想显示从左到右滑动的上一页。

这是我正在使用的代码

```
$("html").delegate("body", "swipeleft", function() {
$.mobile.changePage("index.html", {
        transition : "slide"
    });
});
}); 
```

jQuerymobile 中的任何代码，例如 slideleft 吗？

我尝试了很多..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:14:50.790

你试过吗`reverse:true`？

```
$("html").delegate("body", "swipeleft", function() {
$.mobile.changePage("index.html", {
        transition : "slide"
        reverse:true
    });
});
}); 
```

# c# - 如何检测在后面的代码中单击了哪个按钮？

> ID：13853028
> 
> 赞同：9
> 
> 时间：2012-12-13T04:36:20.443
> 
> 标签：c#, asp.net, button

我有三个按钮，每个按钮都调用`btn_Clicked`他们的`onClick`事件。在后面的代码中，我想获取导致回发的按钮的 ID。我知道我可以分配每个按钮来调用不同的方法，但我想学习一点 ASP.Net。还告诉我哪种方法更有效？在不同的按钮点击时调用不同的方法或调用相同的方法（如果每个按钮的功能相同）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T04:38:31.903

将 sender 对象强制转换为按钮，然后您可以获得所有属性。

```
Button clickedButton = (Button)sender; 
```

> 还告诉我哪种方法更有效？在不同的按钮点击时调用不同的方法或调用相同的方法（如果每个按钮的功能相同）。

如果功能相同，那么最好有一个事件，因为您不必复制代码。记住[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

考虑以下示例：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Button clickedButton = sender as Button;

    if (clickedButton == null) // just to be on the safe side
        return;

    if (clickedButton.ID == "Button1")
    {
    }
    else if(clickedButton.ID == "Button2")
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T04:38:54.273

检查`sender`您的回调方法的参数是否与您感兴趣的按钮相同。

```
Button button1;
Button button2;

void OnClick(object sender, RoutedEventArgs args)
{
    Button button = sender as Button;
    if (button == button1)
    {
        ...
    }
    if (button == button2)
    {
        ...
    }
} 
```

# c - 用于在 C 中获取数组元素的指针

> ID：13853034
> 
> 赞同：0
> 
> 时间：2012-12-13T04:37:08.440
> 
> 标签：c, pointers

> **可能的重复：**
> [C 中用于获取字符串的指针算法](https://stackoverflow.com/questions/13852540/pointer-arithmetic-in-c-for-getting-a-string)

我是 C 的新手，我想用函数获取数组的元素，我尝试了不同的选项，但我仍然没有得到元素。我的功能是：

```
void getelements(int *a, int cl)
{
    int *p;
    for (p=&a[0];p<&a[cl];p++)
    {
         printf("%d\n",*p);
    }
} 
```

我知道解决方案应该这样工作，但它只打印第一个元素，然后打印内存位置。我正在调用我的函数：

```
int v={10,12,20,34,45};
   getelements(&v,5); 
```

有什么帮助吗？我需要使用指针的算术。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:09:05.540

首先，**请**不要在有问题时更新代码来修复错误。它使当前的大多数答案变得毫无意义，不会因解决您先前代码中的一个或多个问题的人而给予信任，并使寻找与自己相关的问题的普通读者完全困惑通过其中的问题和答案。如果您想修改原始问题*之外*的更新，但如果它是一个完全不同的问题，则标记为已回答，在到期时给予信用，并使用您的新代码和其他问题打开一个新问题（s ）（理想情况下，无论如何）。

如现在所写，您的功能很好。但你真正的问题是：

```
// compile with -Wall -Werror and look at the warning here
int v={10,12,20,34,45}; // <== WRONG
getelements(&v,5);      // <== Harmless, but bad form. 
```

这应该是这样的，假设您要打印数组中的*所有*元素：

```
int v[] = {10,12,20,34,45};
getelements(v, sizeof(v)/sizeof(v[0])); 
```

请注意`[]`以下您的数组。没有它，`&v`编译器将掩盖`int`作为`int *`. 此外，如果您在编译之前的代码时将完整的警告视为错误（`-Wall -Werror`对于 gcc），您将在`v`声明行中收到如下错误：

```
main.c:116:15: Excess elements in scalar initializer 
```

换句话说，第一个元素之后的所有内容都被忽略了，因此您的指针正在运行到未定义的行为区域。将声明和调用更改为我上面的内容将解决这个问题，并确保您不会再犯该错误，因为除非是数组或指针类型，否则`sizeof(v[0])`甚至不会*编译。*`v`当您使用指针而不是数组进行这样的计算时，后者仍然会引起头痛，但这是您必须约束自己不要在 C 中做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:48:52.220

据我所知并看到您的代码。您已将数组的长度硬编码为 5。我认为您也可以将数组长度作为参数传递给函数；或者你可以使用这个函数，看看它是否给出了想要的结果

```
void getelements(int *a)
{
    int *p;
    int i = 0;
    int l=5;
    p = a
    for (i = 0;i<l;i++)
    {
         printf("%d\n",*(p + i));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:01:02.310

实际上你正在传递数组地址

```
getelements(&v,5) 
```

在功能上

```
getelements() 
```

你把它当作一个数组对待！！！

```
void getelements(int *a, int cl)
{
    int *p;
    for (p=a;p<a+cl;p++)
    {
         printf("%d\n",*p);
    }
} 
```

让我知道你是否在概念上被清除了！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:41:56.547

最好将数组的长度与数组本身一起传递。

```
#include <stdlib.h>
#include <stdio.h>

void get_elements(int* values, int length)
{
    int i;
    for (i = 0; i < length; ++i)
    {
        printf("%d\n", values[i]);
    }
}

int main(int argc, char** argv)
{
    int vals[3];

    vals[0] = 0;
    vals[1] = 1;
    vals[2] = 2;

    get_elements(vals, 3);

    getchar();
    return 0;
} 
```

使用类似于原始帖子的代码（在添加数组长度作为方法参数之前），您可以执行以下操作（如果您问我，这有点令人费解）。

```
void get_elements(int* values, int length)
{
    int *p;

    for (p = &values[0]; p < &values[length]; p++)
    {
        printf("%d\n", *p);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:43:28.197

试试这个，让我知道它是否有效。

```
void getelements(int *a)
{
    int *p;
    int l=5;
    for (p=a;p<a+l;p++)
    {
         printf("%d\n",*p);
    }
} 
```

# mysql - StartSSL 和 MySql

> ID：13853035
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:37:10.687
> 
> 标签：mysql, ssl, ssl-certificate

我使用 StartSSL 来生成我的证书。此时，我有一个根密钥 (ca.pem)、一个中间密钥 (sub.class2.server.ca.pem) 和一个通用密钥文件（命名为 generalkey.key）。现在我不知道该怎么办。当我自己生成密钥和 pem 文件时，按照[http://docs.oracle.com/cd/E17952_01/refman-5.5-en/creating-ssl-certs.html](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/creating-ssl-certs.html)的说明，我最终得到了三个文件，ca- cert.pem、server-cert.pem 和 server-key.pem。我假设我下载的他们称之为根密钥的是我用于 ca-cert.pem 的，而他们的中间密钥是 server-cert.pem。我将什么用于服务器密钥？generalkey.key 是我应该使用的文件吗？我可以将其重命名为 pem 文件吗？还是我需要做其他事情？

如何生成客户端文件？

谢谢你。

-缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:57:21.467

原来 start ssl 能够帮助我。如果有人试图使用 start ssl 来保护 mysql，这就是我所做的。

连接 ca.pem 和 sub.class2.server.ca.pem 以创建 ca-cert.pem。然后使用他们给你的密钥文件和crt文件作为服务器密钥和证书。

# asp.net - 与浏览器“记住密码”功能配合得很好的 ASP.NET 登录表单

> ID：13853036
> 
> 赞同：0
> 
> 时间：2012-12-13T04:37:11.400
> 
> 标签：asp.net

我知道这个问题已经被问过好几次了，但到目前为止我对答案并不满意。

根本问题是浏览器检测“登录表单”以自动填写字段并决定是否应要求用户保存信息的方式。如果您的表单只有基本的登录字段，它就可以正常工作。如果同一个表单有很多其他字段，浏览器不会将其检测为登录表单。

我见过的解决方案是在您的页面上使用单独的非 ASPX 表单。在我的例子中，我的所有输入字段都是相当复杂的 ASPX 控件的子类版本，主要是为了获得自定义背景图像和对占位符/水印文本和此类项目的良好处理等内容。因此，尝试创建非 ASPX 表单需要做更多的工作，因为我无法在表单上使用这些控件。我必须在标准 HTML 中复制它们。我可以这样做，但宁愿不这样做。另外，只要我需要进行更改，它就需要更多的维护。

**有没有更好的办法？这让我可以使用 ASP.NET 的所有优点。**

我的页面既有登录区域，也有注册区域（姓名、电子邮件、出生日期等）。这就是浏览器感到困惑的原因。

我似乎记得当我为移动浏览器编写网站时，有一些标记可以用来告诉浏览器“这是一个登录名字段，这是一个密码字段”。如果有类似的东西，那将是完美的。

也许我可以用 iframe 做点什么？就像 ASPX 页面中的 ASPX 页面一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:07:41.310

尽管您的代码很复杂，但任何自定义 ASP.NET 用户控件最终都会将**输出呈现为 HTML**，并且每个浏览器都只**使用 HTML**

您正在寻找的是如何编写 ASP.NET 代码来生成包含简单属性的 HTML 标记。

`<input type="password" autocomplet="off" ...`

这样所有浏览器都能够识别它是一个包含密码字段的表单。它不关心你在代码后面做什么。专注于输出。

# php - 如何从选择菜单中删除消息

> ID：13853040
> 
> 赞同：0
> 
> 时间：2012-12-13T04:37:32.600
> 
> 标签：php, jquery, html

在`<select>`下面的功能中，如果选择菜单中没有模块，我会显示一条消息：

```
 $moduleSELECT = '<select name="moduletextarea" id="moduleselect" size="3">'.PHP_EOL;      

    if($modulenum == 0){

    $moduleSELECT .= "<option disabled='disabled' class='red' value=''>No Modules currently on this Course</option>";

}else{

.... 
```

现在我想要做的是使用 jquery，如果我将一个模块附加到选择菜单中，那么它会在选择菜单中显示该模块：

```
 var selectedOption = jQuery("#modulesDrop option:selected");
        selectedOption.appendTo($("#moduleselect")); 
```

但是我想在我的 jquery 中做的是，如果用户将模块附加到选择菜单中但`No Modules currently on this Course`正在显示，那么我希望它在附加模块时从选择菜单中删除该消息。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:57:15.943

每当您向 追加新选项时`moduleselect`，都可以使用以下命令删除选项的任何实例`disabled="disabled"`：

```
$('#moduleselect option[disabled="disabled"]').remove(); 
```

如果您的菜单中有其他禁用的选项，您可能希望以不同的方式识别要删除的选项元素。上面的代码将删除所有这些。

[http://jsfiddle.net/RHSCA/](http://jsfiddle.net/RHSCA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:59:11.903

要删除，您可以使用 jquery `remove()`。

**它从 DOM 中删除匹配的元素集。**

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)。

假设您的选项（您要删除）具有红色类....

尝试这个..

```
$('option.red', 'select').remove()​ //OR
$('option.red', '#moduleselect').remove()  // selector as id 
```

附加模块后..

这是jsfiddle中的一个例子..

[http://jsfiddle.net/hgawb/](http://jsfiddle.net/hgawb/)

# c# - 使用http请求读取json文件时如何在monotouch中显示进度条

> ID：13853045
> 
> 赞同：3
> 
> 时间：2012-12-13T04:37:59.360
> 
> 标签：c#, json, xamarin.ios, httprequest

我无法在视图中显示进度条。真正令人高兴的是，当我单击按钮时，它开始从服务器读取 json 文件，但在它尚未完成之前，即使在视图中添加进度条，您也无法执行任何操作。加载后，一切都开始工作并显示进度条。

您知道如何实现这一点，一旦单击按钮，它应该在完成后开始显示进度条，我将触发关闭功能以关闭进度条。

这是我的脚本：

这是按钮触发它开始调用函数并将进度条添加到视图中的函数

```
this.View.Add (loadingOverlay);
Getjsondata("http://polarisnet.my/polaristouchsales/Import/Products/product.json");
loadingOverlay.Hide (); 
```

这是Getjson函数

```
 public string Getjsondata(string URL)
        {
            HttpWebRequest request = null;
            StreamReader responseReader = null;
            string responseData = "";

            try
            {
                request = (HttpWebRequest)HttpWebRequest.Create(URL);
                responseReader = new StreamReader(request.GetResponse().GetResponseStream());
                responseData = responseReader.ReadToEnd();
            }
            catch(Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                request.GetResponse().GetResponseStream().Close();
                responseReader.Close();
                responseReader = null;
            }

            return responseData;

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T08:56:02.453

您必须在单独的线程上执行 Getjsondata，如下所示：

```
this.View.Add (loadingOverlay);
ThreadPool.QueueUserWorkItem (() =>
{
    Getjsondata("http://polarisnet.my/polaristouchsales/Import/Products/product.json");
    BeginInvokeOnMainThread (() =>
    {
        loadingOverlay.Hide ();
    });
}); 
```

现在它不会在下载时阻塞主线程，并且您可以在下载过程中继续更新您的 UI。

您还应该阅读有关[MonoTouch 中线程](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Threading)的文档- 它解释了您可以做什么和不能做什么。

# javascript - QUnit 测试挂起

> ID：13853046
> 
> 赞同：1
> 
> 时间：2012-12-13T04:38:11.247
> 
> 标签：javascript, testing, qunit

我是 qunit 和 JS 测试的新手。被测代码执行一个必须在我断言之前完成的动画 (slideDown)。看起来很简单，但我似乎无法让它工作。

```
asyncTest('my test', function() {
  setTimeout(function() {
    // assert something here
    start();
  }, 1000);
}); 
```

永远不会调用回调，并且测试挂起。

我也尝试过其他各种方法。例如：

```
test('my test', function() {
  expect(1);
  stop(1000);
  // assert something here
  start();
}); 
```

我可以看到两者`start`都`stop`被调用，并且`test` 调用结束，但它仍然挂起。

万一这很重要，这是我的设置：

```
setup: function() {
  this.server = sinon.fakeServer.create();
  this.server.respondWith([200, { 'Content-Type': 'text/html' }, new_items()]);
  // invoke the actual system under test
  this.server.respond();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:43:29.893

听起来 Sinon 假计时器已打开（http://sinonjs.org/docs/#clock）。`this.clock.tick(1001)`设置超时后调用。

# tomcat5.5 - tomcat 在应用程序中给出 java lang.NullPointerException

> ID：13853051
> 
> 赞同：1
> 
> 时间：2012-12-13T04:39:18.437
> 
> 标签：tomcat5.5

运行应用程序时出现以下错误，应用程序运行良好，但重新启动 tomcat 后出现以下错误。请帮助。

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

org.apache.jasper.JasperException org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:460) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373) org.apache.jasper.servlet .JspServlet.serviceJspFile(JspServlet.java:329) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265) javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

根本原因

java.lang.NullPointerException com.aprisma.spectrum.app.repmgr.container.SRMWebApplicationContextUtils.getBean(SRMWebApplicationContextUtils.java:67) org.apache.jsp.repmgr.admin.recoverReportingDBLandscape_jsp._jspService(recoverReportingDBLandscape_jsp.java:93) org.apache .jasper.runtime.HttpJspBase.service(HttpJspBase.java:98) javax.servlet.http.HttpServlet.service(HttpServlet.java:729) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:331) org .apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:329) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265) javax.servlet.http.HttpServlet.service(HttpServlet.java:729 )

note Apache Tomcat/5.5.27 日志中提供了根本原因的完整堆栈跟踪。

问候

阿斯瓦尼开发

# python - 是什么让 C 比 Python 更快？

> ID：13853053
> 
> 赞同：8
> 
> 时间：2012-12-13T04:39:44.070
> 
> 标签：python, c, compilation

我知道这可能是一个非常明显的答案，而且我将自己暴露在无用的尖刻评论中，但我不知道答案，所以就这样吧。

如果 Python 在运行时编译为字节码，是否只是初始编译步骤需要更长的时间？如果是这种情况，那不只是代码中的一小部分前期成本（即，如果代码运行了很长时间，C 和 python 之间的差异会缩小吗？）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T05:01:53.840

解释 Python 代码并使其变慢的不仅仅是事实，尽管这肯定会限制您获得的速度。

如果以字节码为中心的观点是正确的，那么要使 Python 代码与 C 代码一样快，您所要做的就是用直接调用函数替换解释器循环，消除任何字节码，然后编译生成的代码。但它不是那样工作的。您也不必相信我的话：您可以自己测试它。Cython 将 Python 代码转换为 C，但是转换然后编译的典型 Python 函数不会显示 C 级速度。您所要做的就是查看一些因此生成的典型 C 代码以了解原因。

真正的挑战是多重分派（或任何正确的术语——我不能直截了当），我的意思是这样一个事实，即`a+b`if`a`和`b`都被称为整数或浮点数可以编译成一个操作C，在 Python 中，你必须做更多的计算`a+b`（获取名称绑定到的对象，通过`__add__`等等）

这就是为什么要使 Cython 达到 C 速度，您必须在关键路径中指定类型；这就是 Shedskin 如何使用（笛卡尔积）类型推断快速使 Python 代码摆脱 C++ 的方式；以及 PyPy 的速度如何——JIT 可以关注代码的行为方式并专注于类型之类的事情。每种方法都消除了动态性，无论是在编译时还是在运行时，这样它就可以生成知道自己在做什么的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T04:42:09.103

字节码对 CPU 来说不是自然的，因此它们需要解释（通过称为解释器的 CPU 本地代码）。字节码的优势在于它可以进行优化、预计算并节省空间。C 编译器生成机器代码，机器代码不需要解释，它是 CPU 原生的。

# java - 在eclipse中在Tomcat上使用JDBC for MYSQL时出现classNotFound异常

> ID：13853054
> 
> 赞同：0
> 
> 时间：2012-12-13T04:39:43.633
> 
> 标签：java, mysql, jdbc, classnotfoundexception

这似乎是一个常见问题，但我找不到有效的解决方案。我已经浏览了几十个线程，并一直在和我的老师一起工作。我正在尝试使用 JDBC 连接到 MYSQL。我也在使用 tomcat 服务器并运行 xubuntu 12.04。我收到 ClassNotFound 异常。

我已经尝试了放置在 /tomact/lib 和 /usr/share/java 中的 JDBC mysql-connector-java.jar 驱动程序，并在每个实例中手动构建了路径。我还尝试通过部署程序集添加路径。我试过使用 EXPORT CLASSPATH。没有任何效果。我不能让这个异常停止被抛出。有没有人可以尝试其他解决方案？

我的代码：

```
public static Connection getConnection() {
    if(connection!=null){
        return connection;
    }else{
        try{
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            String dbURL = "jdbc:mysql://144.91.20.136:3306/jewelryInventoryGallison";
            String username = "javaee";
            String password = "mills2012";

            connection = DriverManager.getConnection(dbURL, username, password);
            return connection;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    }
} 
```

测试类：

```
public static void main(String[] args) throws Exception{ 
      Connection conn = DatabaseUtils.getConnection();
      Statement st = conn.createStatement();
      ResultSet rs = st.executeQuery("SELECT * FROM Inventory");
      while(rs.next()) {
       System.out.println(rs.getString("name"));
      }

 } 
```

并追踪：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at utils.DatabaseUtils.getConnection(DatabaseUtils.java:19)
at utils.DatabaseUtils.main(DatabaseUtils.java:34) 
```

utils.DatabaseUtils.main(DatabaseUtils.java:35) 处的线程“主”java.lang.NullPointerException 中的异常

对你的帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-13T17:02:45.207

将 MySQL-connector-java-5.1.6.jar 放在 Tomcat/lib 目录中终于对我有用。不应该这样做，所以我怀疑我的 Tomcat 安装不是最佳的，部署 war 文件可能有问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:12:45.473

> java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

您缺少`MySQL`驱动程序库。由于您使用的是`Mysql`数据库，因此请确保您已包含[`mysql-connector-java`](https://mvnrepository.com/artifact/mysql/mysql-connector-java).

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.8-dmr</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-24T11:16:10.660

版本不匹配可能会导致此错误。我自己被困在这个错误中好几天了。请检查 jdbc 连接器的版本。最新的连接器需要 java 1.8。在我的情况下，我的 tomcat 版本不支持我添加的连接器版本，所以也请检查一下。

PS：Tomcat-8.0.32；mysql-connector - 5.1.30 与 java 1.7 作品 (Y)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:35:56.403

修改tomcat'conf'文件夹中'catalina.properties'文件中的'common.loader'属性，如下图

```
common.loader=${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar 
```

还要在 tomcat 'lib' 文件夹中添加 'mysql-connector-java-5.0.8-bin.jar'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-17T10:05:17.087

即使在类路径中配置了连接器，tomcat 也无法正确加载。因此，将 mysql-connector-jar 文件也粘贴到 WEB_INF 下的 lib 文件夹中，然后再次尝试运行。

[![在此处输入图像描述](../Images/607241da5c1c8297ee7e7e8443b6a506.png)](https://i.stack.imgur.com/4JX3W.png)

# linq-to-entities - Sql 到 Linq 查询

> ID：13853059
> 
> 赞同：0
> 
> 时间：2012-12-13T04:40:14.013
> 
> 标签：linq-to-entities

请让我知道我将如何从中进行 Linq 查询。

```
SELECT 
[GroupBy1].[K1] AS [AccountName], 

[GroupBy1].[K2] AS [LeadBy], 

[GroupBy1].[K3] AS [Status], 

[GroupBy1].[K3] AS [Industry], 

[GroupBy1].[A1] AS [C2]

FROM ( SELECT 
    [Extent1].[AccountName] AS [K1],

     [Extent2].[LeadBY] AS [K2],

     [Extent2].[Status] AS [K3],

     [Extent2].[Industry] AS [K4],

    COUNT(1) AS [A1]

    FROM [dbo].[Opportunities] AS [Extent1]

    join [dbo].[Leads] AS [Extent2]

    on [Extent1].[AccountName] IS NOT NULL

    AND [Extent1].[AccountName]=[Extent2].[AccountName]

    GROUP BY [Extent1].[AccountName],[Extent2].[Leadby],[Extent2].[Status],[Extent2].
[Industry]
)  AS [GroupBy1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:01:18.050

它取决于您的映射，如果您没有外键进入 AccountName 列，您应该尝试以下操作：

```
from i in Context.Opportunities
join l in Context.Leads on l.AccountName equals i.AccountName
group i by new { i.AccountName, l.LeadBY, l.Status, l.Industry } into g
select new
{
    g.Key.AccountName,
    g.Key.LeadBY,
    g.Key.Status,
    g.Key.Industry,
    Count = g.Count();
} 
```

如果你有一个外键可以进入 AccountName 列，你应该试试这个：

```
from i in Context.Opportunities
group i by new { i.AccountName, l.Lead.LeadBY, l.Lead.Status, l.Lead.Industry } into g
select new
{
    g.Key.AccountName,
    g.Key.LeadBY,
    g.Key.Status,
    g.Key.Industry,
    Count = g.Count();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:47:54.583

尝试使用这个程序： [http](http://www.linqpad.net/) ://www.linqpad.net/它有基本和高级操作的例子。您也可以下载其他教程。

# c# - 从关键字复制整个字符串

> ID：13853062
> 
> 赞同：0
> 
> 时间：2012-12-13T04:40:37.330
> 
> 标签：c#, string, find

所以，我想做这个，比如有一个字符串叫[FULLNAME]-Awesome Guy-[END]，但是一个列表中有多个字符串，所以像：[OTHER]-AG-[END] [FULLNAME ]-很棒的家伙-[END] [昵称]-AG-[END]

我的问题是，我怎样才能找到 [FULLNAME] 然后将字符串设置为 [FULLNAME]-Awesome Guy-[END] 你们能帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:53:35.627

如果您只需要快速的东西，我可能会建议在这里使用正则表达式。如果您需要更健壮的东西并且能够处理分解各种标签，您可能需要考虑编写自己的基本解析器来按标签分解内容并让您以这种方式进行搜索。

这段代码：

```
 string s = "[OTHER]-AG-[END] [FULLNAME]-Awesome Guy-[END] [NICKNAME]-AG-[END]";
 Regex re = new Regex(@"\[FULLNAME\][^[]+\[END\]");
 Console.WriteLine(re.Match(s)); 
```

印刷

```
[FULLNAME]-Awesome Guy-[END] 
```

`[`尽管如果名称中有某个字符，它会给您带来格式错误的结果。

# algorithm - 在体素环境中有效放置框

> ID：13853066
> 
> 赞同：3
> 
> 时间：2012-12-13T04:40:44.210
> 
> 标签：algorithm, image-processing, data-structures, voxel

我有一组任意的体素来定义游戏的房间。我的目标是根据道具的特定规则在这个房间内放置各种道具（绑定到体素的大小）。一些简单的规则示例（体素维度为 xyz，props 远不止这三个）：

*   书架 (2x3x1) 需要靠墙和地面放置。
*   需要在地面上放置一张桌子（4x1x2）。
*   壁挂式灯 (1x1x1) 需要靠墙放置。

道具不能与其他道具或现有体素相交。我试图找到一些有效的数据结构和/或算法，可以让我相当快地做到这一点。我目前的方法是这样的：

*   创建一组可能的**道具**位置，这是一组与填充体素相邻的空体素。
*   如果是地板、墙壁、角落等，请在**S**中标记每个项目。
*   选择要放置的道具**P。**
*   选择满足道具放置规则的 S 的子集S **'** **（**仅限墙壁、角落等）。
***   从**S'**中选择任意元素**E。*****   这是非最佳部分：尝试以某种方式将**P拟合到****E**周围。看看**P的边界是否允许它被放置在****E**之上而不与其他道具和体素相交。如果不合适，请尝试旋转和/或平移**P**的边界，直到它位于包含**E**的合法位置。*   如果合适，则更新**S**以包含新道具，并开始放置更多道具。*   如果仍然不合适，则从**S'**中选择另一个任意元素并重试。****

 ****它在技术上是可行的，但不是非常理想，并且在最坏的情况下表现得非常糟糕，例如当道具不能放在房间的任何地方时，或者如果我要挑选许多大型地板道具放在一个房间里地面空间被柱子和洞打破。

如果我能在选择**E时以某种方式考虑****P**的尺寸，那将是理想的。我正在研究生成体素网格的 3D[卷积](http://en.wikipedia.org/wiki/Convolution)图（本质上是制作网格的模糊图像），以便每个体素都有一些关于它周围有多少空间的粗略数据，但问题是我需要更新地图每次我放下一个新道具，这听起来很贵。

 **另一个想法是将世界存储在八叉树中，并以某种方式进行更好的位置检查，但我似乎无法想象这会有多大帮助。八叉树是否允许我确定任意框是否包含比位置键控的字典更有效的任何点？

**TLDR：您将如何使用比单个体素更大的装饰物以编程方式装饰 Minecraft 中的房子？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:47:05.943

如果您在 S 中没有太多体素，则在创建墙壁和地板后，您可以简单地创建 3 组详尽的有效放置，每种道具类型一组。我们将类型为 p 的道具的有效展示位置集合称为 ValidPlacements(p)。

然后，当您成功地将新对象放置到世界中时，对于每个道具类型 p，生成将与刚刚放置的对象在至少 1 个体素中相交的类型 p 的放置集，并从 ValidPlacements(p) 中删除它们. （其中一些位置可能已经不存在，因为它们已经知道由于早期放置的对象而不可能 - 这不是错误条件，它可以被忽略。）使用哈希表或平衡树结构来保存每个一组展示位置，以便可以分别在 O(1) 时间或 O(log n) 时间内查找和删除每个位置

因为你的对象很小，放置一个对象只会消除少量其他可能的对象放置，因此任何对象删除的放置数量都会很小（它应该大致与相交的两个对象的体积的乘积成正比）。如果您需要回溯并尝试对象 x 的其他放置，请记录在放置 x 时实际从允许放置集中删除的放置，并在删除 x 时重新插入它们。

示例：在 (x, y, z) 处放置一个具有左上角最前角的书架将消除 2*3*1 = 6 个可能的灯放置位置（即，现在桌子占据的每个体素 1 个放置位置），而更大的桌子和书架放置的数量（即与刚刚放置的书架以任何方式重叠的每个可能的放置1个放置）。******

# javascript - Need help creating javascript regexp

> ID：13853067
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:40:54.037
> 
> 标签：javascript, regex

I have absolutly no experience with regular expressions and I need some help setting up one to match a string with. This is for phone number validation. I need to make sure that a string a user inputs has only upper case letters A-Z, numbers 0-9, open/close parentheses[()], and hyphens(-). I also don't know what string method I need to use either match or string.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:29:52.537

RegEx is explained poorly all over the web. I don't fault anyone for asking more general questions about it and this is different from the other post which is more do-it-form-me google-evasion than specific question. The characters you asked about:

```
[A-Z]
[0-9] or \d
\(
\)

- 
```

`/matchme/` is a regular expression literal. This is preferable to useing the RegExp constructor because you end up having to escape your escape backslashes which gets real ugly.

You can actually use regEx literals in a lot of string methods, like replace, split, etc.

Without special characters following, any non-special character is about matching one character at that position in a string. Stuff in `[]` is a class and can match more than one KIND of character but only the character at that positions following the last position matched. You might [.- ] useful for identifying non-number characters for telephone numbers. You can also express ranges in character classes, e.g. `[a-hA-H]` or `[4-9]`

But one str position at a time goes out the window when you start using the follow-up characters:

```
? - one or none
* - 0 or many
+ - 1 or more 
```

Avoid the `.` wildcard character. It is inefficient. For some reason that I suspect goes down all the way to implementation in assembly for efficiency's sake, it checks against every single possibility rather than the 1-2 teletype whitespace characters it actually doesn't represent and there is no honest use for on a computer. More importantly, the better-performing alternative is much more powerful and helpful. Negating character classes are much faster. `[^<]*` represents 0 or more positions of anything that is NOT a < character.

Very handy stuff for XML/SGML-style parsing which in spite of what many on Stack have said, is perfectly feasible with regEx, which is no longer technically confined to "regular" languages. You have to be aware of what your looking with something that allows as much sloppiness as somebody else's HTML but that's just a 'duh' in my book.

Crockford warns against negating character classes in JSlint. Crockford is painfully wrong on that count. They are not only much more efficient, they also make it much easier to think through how to tokenize stuff. If there is a security risk, you can set explicit limits to the number of characters matched with `{}` brackets, e.g. `p{2,5}` - which matches two to five p chars or `{5}` for exactly 5 or `{,5}` for up to 5 or `{5,}` at least 5 (I think - test those last two)

Other random stuff you should look up:

`(ph|f)` - ph or f - helpful for finding phish and fish (when a class won't do, basically)

`^` - represents beginning of a string - think of as a condition for the next character more than a character itself. Yes, it also negates character classes.

`$` - represents end of a string - same caveat as above but on the previous character.

`\` - used to escape special symbols. Note: a lot of special symbols that have no meaning in character classes require no `\` inside `[]`

`\s\w\d` - These represent commonly used sets of characters. The first is pretty much all whitespace (js-style escapes typically have regEx equivalents) followed by w for word characters (class equivalent `[a-zA-Z0-9_]`) and d for digits `[0-9]`. Capitalize any of these for the exact opposite.

There's more, like back-references, and lookaheads whose use-case scenarios are worth knowing but this is the commonly used stuff I actually remember from *regular* experience (bwaahaahaa).

I assume you're looking for non US since you have that A-Z concern and I'm sure there's plenty of US phone-numbers regExes out there but I'd probably do something like this for US numbers:

`/\(?\d{3}[)\-. ]?\d{3}[\-. ]?\d{4}/`

to match: 123-456-7890

(123)456-7890

123.456.7890

123 456 7890

1234567890

But also perhaps messily allows:

(123456.7890

...which I'm willing to live with for the sake of avoiding complexity. Resist the temptation to do it all with one expression. Sometimes it's much cleaner to eliminate trailing/leading whitespace for instance, and then hit something with an expression. Split and join methods are very powerful for tokenizing

If this goes like a usual regEx conversation, somebody will shortly point out something I missed in my pattern. So yeah, test 'em out on stuff. There's sites that let you set the expression and then just plug in characters to try and break them.

# php - 使用 PHP 的动态网站

> ID：13853072
> 
> 赞同：1
> 
> 时间：2012-12-13T04:41:14.687
> 
> 标签：php, javascript, html, css

我是一名初级 PHP 程序员。我在谷歌上搜索了“动态 PHP 网站教程”。我发现了一些东西。他们使用`$_GET`变量使网站动态化，因此 URL 如下所示：

*   example.com/?page=home
*   example.com/?page=about
*   example.com/?page=Downloads 等等...

但是我在互联网上找到的大多数动态网站都有这样的链接：

*   例子.com
*   example.com/about
*   example.com/download 等等....

那么他们是怎么做到的呢？？他们有所有类别的文件夹吗？还有一些网站有文章 URL（例如：example.com/articles/posts/2010/article1.php）。如果他们有所有项目的文件夹，那将是一团糟。如果不是那么如何？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:44:14.633

如果您使用的是 apache，请阅读：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

如果您使用的是 IIS，请阅读：[http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:44:29.023

为了使用该`$_GET`变量，它必须位于查询字符串中（或通过其他非“默认”方式进行路由）。

例如，您使用的 URL 将变为。

```
example.com/?page=home
example.com/?page=about
example.com/?page=Downloads 
```

[此外，您可以使用 .htaccess 文件 ( http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html) )重写 URL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:45:26.680

您对页面路由感兴趣。

[htaccess 和 MVC 路由](https://stackoverflow.com/questions/5332030/htaccess-help-with-mvc-routing)可能会让你走上正确的道路 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T05:09:21.037

为了呼应其他人，它被称为 url rewite。例如，网址

```
http://example.com/index.php?ext=blog&cat=news&date=12122012 
```

可以改写为

```
http://example.com/blog/news/12-12-2012 
```

这不是自动的，它需要在名为 .htaccess 的文件中定义用于理解新 URL 的模式，该文件通常位于服务器根目录中。注意前面的'.' 在文件名中使其成为隐藏文件。

当我第一次习惯 PHP 时，我发现网站[http://phpbuilder.com 很有帮助](http://phpbuilder.com)。他们有很多文章，还有一个对新手来说相当不错的论坛。[http://devshed.com](http://devshed.com)也是一个不错的站点，并且有大量关于 PHP 以外主题的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:44:29.360

您可以使用文件夹来实现这种效果，但大多数使用重写（[Apache](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）。此处涉及的主题有点过于宽泛，但如果您只是搜索重写教程，您会很快找到一些。

$_GET 只是从 URL 中获取变量。虽然这可用于使网站动态化，但这是一种通常不受欢迎的技术。

通过重写，您基本上有一个类似 /about 的 URL，但是重写告诉您的服务器类似“像这样操作实际上是 ?page="about")，然后您使用 $_GET 来处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T05:23:29.600

作为 PHP 初学者，我不会敦促您使用`.htaccess`，因为在继续之前您需要学习很多东西。您有 2 个选项来发送请求，一个是`GET`和`POST`。您可以在互联网上获得更多关于相同的信息。

您还可以选择开始`dynamic website`使用`CMS`，我会建议您使用`wordpress`. CMS 将提供一些`in-built function`帮助您更快完成工作的内容。也使用他们的`control panel you can update the URL format`.

我还将敦促您逐步完成并遵循您在互联网上找到的每个教程。

祝一切顺利

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T05:35:08.470

如果你想这样做，你必须使用`.htaccess`文件并且必须加载`mod_rewrite`到你的`apache`服务器中。

在您的根目录中创建名为`.htaccess`

然后写：

```
 RewriteEngine On
 RewriteRule ^(.*)\.php$ index.php?page=$1 [L,QSA] 
```

然后调用一个页面

```
my-page.php 
```

它将作为`index.php?page=my-page`内部重定向，但在浏览器中它将显示为`my-page.php`

# restkit - 如何使用 RestKit 0.20.0 设置基本身份验证？

> ID：13853073
> 
> 赞同：7
> 
> 时间：2012-12-13T04:41:30.417
> 
> 标签：restkit

我正在尝试使用 RestKit 调用需要基本身份验证的端点。

```
RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[JSNCategory class]];
[mapping addAttributeMappingsFromDictionary:@{
    @"id": @"catId",
    @"name": @"name"
}];

NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful);
RKResponseDescriptor *responseDescriptor
 = [RKResponseDescriptor responseDescriptorWithMapping:mapping
                                           pathPattern:@"/api/v1/categories"
                                               keyPath:nil
                                           statusCodes:statusCodes];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL
                         URLWithString:@"https://rest.example.com"]];

RKObjectRequestOperation *operation
  = [[RKObjectRequestOperation alloc] initWithRequest:request
                                  responseDescriptors:@[responseDescriptor]];

[operation setCompletionBlockWithSuccess:
^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    JSNCategory *cat = [result firstObject];
    NSLog(@"Mapped the category: %@", cat);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Failed with error: %@", [error localizedDescription]);
}]; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-13T12:02:19.213

使用 objectmanager 这将类似于：

```
NSURL* url = [[NSURL alloc]initWithString:@"http://rest.url.com"];
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURL:url];

[objectManager.HTTPClient setAuthorizationHeaderWithUsername:@"username" password:@"password"]; 
```

然后，在设置正确的请求/响应后，您可以使用 objectmanager 执行 get/post/etc：

```
[objectManager getObjectsAtPath:endpoint parameters:parameters success:
     ^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
         // do something
     }  
     failure:^(RKObjectRequestOperation *operation, NSError *error) {
         // do something
     }
]; 
```

# php - paypal收不到回复

> ID：13853074
> 
> 赞同：0
> 
> 时间：2012-12-13T04:41:30.413
> 
> 标签：php, paypal

我试过这段代码，但我没有得到回应

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" name="fm">
    <input type="hidden" name="cmd" value="_cart" />
    <input name="currency_code" type="hidden" value="GBP" />

    <input type="hidden" name="business" value="test_biz@email.com" />

    <?php
        for($m=0;$m<4;$m++){
    ?>

        <input type="hidden" name="quantity_<?php echo $m+1; ?>" value="1" />   
        <input type="hidden" name="item_name_<?php echo $m+1; ?>" value="<?php echo "fhghg"; ?>" />
        <input type="hidden" name="amount_<?php echo $m+1; ?>" value="<?php echo 10; ?>" />

    <?php
        }
    ?> 

    <input name="no_shipping" type="hidden" value="2" />
    <input type="hidden" name="upload" value="1" /> 
    <input type="hidden" name="return" value="http://localhost/test/test1.php" />
    <input type="hidden" name="cancel_return" value="http://localhost/test/test.php" />
    <input type="hidden" name="notify_url" value="http://localhost/test/test.php">
    <input type='submit' name='submit' value='submit' />
</form> 
```

我有用于打印响应`echo`的数组。`print_r($_POST)`它显示为`Array()`

如何解决这个问题？如何将变量传递给多个项目的贝宝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:49:19.583

test1.php 是 Paypal IPN 脚本吗？Paypal 无法访问 localhost 以向其发布订单通知（“通知”字段）。这必须是一个实际的 URL。如果您在家进行测试，请尝试使用 no-ip.com 等动态 ip 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:10:30.080

超全局`$_POST`总是一个数组。如果您只`Array()`输入 for 的输出`print_r($_POST)`，这意味着没有发布任何内容，并且数组是空的（请确保您正在使用`print_r()`而不是`print()`在这里。

如果您不想打印整个数组，而是打印该数组中各个字段的值，请使用键，例如`$_POST['item_id']`，它会打印 中的`item_id`键的值`$_POST`。

# nosql - 如何在不指定键的情况下更新 Cassandra 中的所有列值？

> ID：13853076
> 
> 赞同：4
> 
> 时间：2012-12-13T04:41:33.517
> 
> 标签：nosql, cassandra

假设我有下表（只有更大）：

```
key     |  type
----------------
uuid1   |  blue
uuid2   |  red
uuid3   |  blue 
```

我想做的就是改变`blue`一切`green`。如果不使用 CLI 或 CQL 指定所有 UUID，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:34:20.570

你有几个选择：

1.  您可以在“类型”列上放置二级索引，然后查询所有等于“蓝色”的项目。一旦你有了这些，你将拥有他们所有的键，你可以进行批量突变以将所有值设置为“绿色”。

2.  您可以使用 Hadoop 集成来读取所有列，然后在 reducer 中输出更新的数据。对于此类工作，Pig 将是一个不错的选择。

# php - mod_fcgid 错误，导致 500 错误页面（包括完整的详细信息）

> ID：13853077
> 
> 赞同：1
> 
> 时间：2012-12-13T04:41:35.893
> 
> 标签：php, apache2

```
[Wed Dec 12 23:23:09 2012] [warn] [client 31.22.4.214] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
[Wed Dec 12 23:23:09 2012] [error] [client 31.22.4.214] Premature end of script headers: index.php
[Wed Dec 12 23:31:20 2012] [error] mod_fcgid: process /home/www-data/php5-fcgi(32763) exit(communication error), get unexpected signal 7 
```

我每次在我的 APACHE 日志中都会收到这些错误。我正在运行一个论坛，有时这些错误会变得非常严重，它会返回 500 错误。

我正在使用 APC、Debian OS、PHP5CGI 和 MYSQL。以下是我在 APACHE 上使用的模块列表：

图片链接：i.stack.imgur(dot)com/bcrWn(dot)png

**你能告诉我有什么问题吗？**这是 APC 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:37:23.610

我从三个使用 APC 广泛用于字节码缓存和使用 Wordpress 的 W3 Total Cache 插件的其他数据的站点收到相同的随机错误。

我禁用了站点上的 APC 缓存，但错误仍在继续。但是，从服务器中删除 APC**完全修复了它**。由于我对此进行了广泛的研究，发现在 mod_fcgid 下使用 PHP 几乎没有其他“获得意外信号 7”的情况，我非常有信心，是的，您的问题可能是由 APC 问题引起的。

我想你已经解决了你的问题，因为这个问题已经两个多月了，但希望这可以帮助遇到同样错误的其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T00:25:40.140

我也在使用 php-fcgi 的共享主机环境中看到了这个错误。APC 已启用，但仅在一个未生成错误的站点上使用。

结果发现出现错误的站点超出了他们的磁盘配额，这是我在尝试更新某些文件时偶然发现的。

增加该站点的磁盘配额立即解决了该问题。

# awk - 查询 Awk 脚本

> ID：13853081
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:41:57.647
> 
> 标签：awk

```
780745,0,3,0,sto_un_os_fast,daily,lonrb08390,lonrs08841,1355250030,0000015139,1355265169
783333,0,1,,sto_un_os_fast,daily,lonrb08390,lonrs08842,1355336488,0000032370,0000000000
778143,0,3,0,sto_un_os_fast,daily,lonrb08390,lonrs08841,1355163652,0000003967,1355167619
784864,0,3,0,sto_un_os_fast,daily,lonrb07366,lonrs08842,1355351424,0000001475,1355352899 
```

在上面的文件中，我想`lonrb...`在那之后打印 & 第三列。

有人可以帮我吗？

我面临的问题`awk '{print $6, $9}'`是列会因`783333,0,1,,`行而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:47:44.433

嗯 - 您应该能够通过指定“，”作为字段分隔符来做到这一点。

```
awk -F, '{print $7, $10} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:46:30.580

除了它看起来像第 7 列和第 10 列之外，我不确定问题是什么：

```
awk -F, '{ print $7, $10 }' 
```

在该`783333,0,1,,`行中，在 之后`1`和之前有一个空字段`sto_un_os_fast`，但空字段仍然算作一个字段。

```
lonrb08390 0000015139
lonrb08390 0000032370
lonrb08390 0000003967
lonrb07366 0000001475 
```

如果您想用逗号分隔输出字段，那么您可以使用`OFS=,`或简单地使用`printf`而不是`print`.

```
awk -F, 'BEGIN { OFS = "," } { print $7, $10 }'
awk -F, '{ printf "%s,%s\n", $7, $10 }' 
```

两者都产生输出：

```
lonrb08390,0000015139
lonrb08390,0000032370
lonrb08390,0000003967
lonrb07366,0000001475 
```

# c# - 一个按钮单击不同的选择命令

> ID：13853082
> 
> 赞同：0
> 
> 时间：2012-12-13T04:42:03.940
> 
> 标签：c#, asp.net, sql-server

我正在尝试在单个按钮中提供多个选择命令。示例：在单个显示按钮中按日期搜索、按名称搜索、按产品搜索。但是这种搜索可以是随机的，例如可以单独进行名称搜索，也可以进行名称和产品搜索。但这应该只在一个显示按钮中完成..请帮助我提供示例代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:58:26.917

这不是编码问题，这更可能是逻辑问题，为此您有很多选择，您可以执行一些 SQL 查询连接或一些`If..else...elseIf`语句，如下所示：

```
protected void btnSave_Click(object sender, EventArgs e)
{

                    if (ddpcustomer.SelectedIndex == 0 && ddpproperty.SelectedIndex == 0)
                    {
                        DataSet ds1 = Tbl_MasterBooking.getDetailsforBookingSummaryWithoutStatusCheckinDate(inputField.Text, inputField1.Text, userId, Cid);
                        GVBookingSummary.DataSource = ds1;
                        GVBookingSummary.DataBind();
                        GridView1.DataSource = ds1;
                        GridView1.DataBind();
                    }
                    else if (ddpcustomer.SelectedIndex != 0 && ddpproperty.SelectedIndex == 0)
                    {
                        DataSet ds1 = Tbl_MasterBooking.getDetailsforBookingSummaryWithoutStatusWithCustNameCheckinDate(inputField.Text, inputField1.Text, userId, Cid,ddpcustomer.SelectedItem.Text);
                        GVBookingSummary.DataSource = ds1;
                        GVBookingSummary.DataBind();
                        GridView1.DataSource = ds1;
                        GridView1.DataBind();
                    }
                    else if (ddpcustomer.SelectedIndex != 0 )
                    {
                        DataSet ds1 = Tbl_MasterBooking.getDetailsforBookingSummaryWithoutStatusWithPnameCheckinDate(inputField.Text, inputField1.Text, userId, Cid, ddpproperty.SelectedItem.Text);
                        GVBookingSummary.DataSource = ds1;
                        GVBookingSummary.DataBind();
                        GridView1.DataSource = ds1;
                        GridView1.DataBind();
                    }
                    else if (ddpcustomer.SelectedIndex != 0 && ddpproperty.SelectedIndex != 0)
                    {
                        DataSet ds1 = Tbl_MasterBooking.getDetailsforBookingSummaryWithoutStatusWithPnameandCustNameCheckinDate(inputField.Text, inputField1.Text, userId, Cid, ddpproperty.SelectedItem.Text, ddpcustomer.SelectedItem.Text);
                        GVBookingSummary.DataSource = ds1;
                        GVBookingSummary.DataBind();
                        GridView1.DataSource = ds1;
                        GridView1.DataBind();
                    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:13:33.860

如果您想基于 One 过滤器进行搜索，您最好使用 DropDownList 并根据所选值进行搜索或...但如果您怀疑在多个数据集合中搜索，我将在下面为您提供代码片段：

```
 private class Product 
    {
        public string Name;
        public double Price;
        public string ToString()
        {
            return Name + " : " + Price.ToString() + "$";
        }
    }
    private void button1_Click(object sender, EventArgs e)
    {
        List<string> names = new List<string>();
        names.Add("Jack");
        names.Add("John");
        names.Add("Nick");
        names.Add("Rock");

        List<Product> products = new List<Product>();
        products.Add(new Product { Name = "Laptop", Price = 1000 });
        products.Add(new Product { Name = "Tablet", Price = 750 });
        products.Add(new Product { Name = "Rock", Price = 1 });

        List<DateTime> dates = new List<DateTime>();
        dates.Add(DateTime.Now.AddDays(-1));
        dates.Add(DateTime.Now);
        dates.Add(DateTime.Now.AddDays(1));

        lblOutput.Text = "";

        foreach (string name in names)
        {
            if (name == txtSearch.Text)
                lblOutput.Text += name + "[Name] ";
        }
        foreach (Product product in products)
        {
            if (product.Name == txtSearch.Text)
                lblOutput.Text += product.ToString();
        }
        foreach (DateTime date in dates)
        {
            DateTime dt;
            if (DateTime.TryParse(txtSearch.Text, out dt))
                if (date == dt)
                    lblOutput.Text = date.Date.ToShortDateString();
        }
    } 
```

此外，如果您想在找到匹配项后立即停止搜索，您可以`return`在每个找到匹配项的代码块之后放置一个，例如：

```
if (name == txtSearch.Text)
    { lblOutput.Text += name + "[Name] "; return;} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:42:41.340

我希望这样做。您可以设置您喜欢的选项。

```
 public class Parameters
    {

        //Properties.
        public string CompanyName
        {
            get;set;
        }

        public string ProductName
        {
            get;set;
        }

        public string Design
        {
            get;set;
        }

        public string Size
        {
            get;set;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Parameters para = new Parameters();
        if (cbxCompanyName.Text.Trim().Length != 0)
        {
            para.CompanyName = "'" + this.cbxCompanyName.Text + "'";

        }
        if (cbxProductName.Text.Trim().Length != 0)
        {
            para.ProductName = "'" + this.cbxProductName.Text + "'";

        }
        if (cbxDesign.Text.Trim().Length != 0)
        {
            para.Design = "'" + this.cbxDesign.Text + "'";

        }
    }

    public void test(Parameters paras)
    {
        try
        {
            con = new SqlConnection(source);
            con.Open();

            string select;

            select = "SPGetSaleRegCulture ";

            DataSet ds = new DataSet();

            cmd = new SqlCommand(select, con);
            cmd.CommandType = System.Data.CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@Company", paras.CompanyName);
            cmd.Parameters.AddWithValue("@Product", paras.ProductName);
            cmd.Parameters.AddWithValue("@Design", paras.Design);
            cmd.Parameters.AddWithValue("@Size", paras.Size);

            da.SelectCommand = cmd;

            da.Fill(ds, "SaleRegister");

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

# class - 如何从另一个实体类 Java Persistance API 获取属性关系并通过 servlet 显示给 JSP？

> ID：13853084
> 
> 赞同：0
> 
> 时间：2012-12-13T04:42:14.613
> 
> 标签：class, jpa, ejb, entity

我有 2 个实体是实体会议和会议议程。

我像这样从数据库中编写代码实体类（EJB）。

```
public class Meeting implements Serializable {
......
 @XmlTransient
    public Collection<MeetingAgenda> getMeetingAgendaCollection() {
        return meetingAgendaCollection;
    }

    public void setMeetingAgendaCollection(Collection<MeetingAgenda> meetingAgendaCollection) {
        this.meetingAgendaCollection = meetingAgendaCollection;
    }
.......
} 
```

和这样的实体班会议议程。......

```
public class MeetingAgenda implements Serializable {
....
    public String getAgenda() {
        return agenda;
    }
    public void setAgenda(String agenda) {
        this.agenda = agenda;
    }
....
} 
```

方法 getMeetingAgendaCollection 是来自会议实体的关系。然后，在我的控制器 servlet 中，我像这样调用 EJB。

```
public class ControllerServlet extends HttpServlet {
    @EJB
    private RapatFacadeLocal rapatFacade;

public void init() throws ServletException { 
        // store category list in servlet context      
   getServletContext().setAttribute("meetings", rapatFacade.findAll());
}
...... 
```

我想显示来自表实体会议和会议议程的数据......但我不能......请帮助......

我在 JSP 页面中编写代码.. 像这样..

```
 <c:forEach var="meeting" items="${meetings}">
<td> MeetingCode :  ${meeting.meetingCode} </td>
<td> Meeting :  ${meeting.meeting} </td>
<td> Agenda :  ${meeting.getMeetingAgendaCollection} </td> 
</c:forEach> 
```

**如何使用 getMeetingAgendaCollection 显示数据议程 ????**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:24:58.793

我终于在我的控制器 servlet 中找到了解决方案

```
 Rapat selectedMeeting = rapatFacade.find(Long.parseLong(id));
                     request.setAttribute("meetingDetails",selectedMeeting); 

  Collection<RapatAgenda> agenda = selectedMeeting.getRapatAgendaCollection();
                     request.setAttribute("meetingAgendas", agenda); 
```

在我的 JSP 客户端中

```
.... 
<c:forEach var="agenda" items="${meetingAgendas}"> 
  <td> ${agenda.agenda}  </td>
 </c:forEach>
... 
```

但我进一步发现了问题。如果我想显示与实体会议相关的另一个实体（一对多）。我写这样的代码。

```
Rapat selectedMeeting = rapatFacade.find(Long.parseLong(id));
                     request.setAttribute("meetingDetails",selectedMeeting); 

 Collection<RapatAgenda> agenda = selectedMeeting.getRapatAgendaCollection();
                     request.setAttribute("meetingAgendas", agenda);

 Unit selectUnit = unitFacade.find(selectedMeeting.getUnitInisiatorId());
                     request.setAttribute("initiator", selectUnit); 
```

我不会 selectedMeeting.getUnitInisiatorId() 值是整数，如果我手动编写，

```
Unit selectUnit = unitFacade.find(Long.parseLong(1));
                         request.setAttribute("initiator", selectUnit); 
```

问题解决了..

```
what selectedMeeting.getUnitInisiatorId() syntax is correct ..? 
```

请帮忙。。谢谢。。

# .htaccess - 如何拒绝除谷歌机器人以外的美国用户？

> ID：13853087
> 
> 赞同：0
> 
> 时间：2012-12-13T04:43:01.883
> 
> 标签：.htaccess, seo

至于我的一个朋友的要求，我必须在 3 个子域中为 3 个国家/地区建立一个网站。像

```
au.example.com
us.example.com
in.example.com 
```

这三个都有**共同的内容和一些独特的内容**。所有来自特定国家的流量都会重定向到相关的子域。

我的问题是谷歌索引。由于所有来自美国的流量都将定向到`us.example.com`，google bots 只会索引`us.example sub-domain`。但是还有很多其他内容`in.example.com`。那么如何让谷歌索引我的其他 2 个子域？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:48:24.997

您如何进行特定位置的分类？

您必须做的是基于某些东西添加一个异常，可能基于用户代理。

然而，谷歌搜索所有语言，所以你真的不应该担心它。他们对 AU 的搜索版本将抓取 AU 等。如果您想让 Google 为其美国搜索索引 AU……这可能会让您在使用 Google 时遇到一些麻烦（老实说，这会破坏您的目的正在努力实现）。

# android - Android In App BIlling v3 不起作用 Nexus 7

> ID：13853089
> 
> 赞同：6
> 
> 时间：2012-12-13T04:43:14.590
> 
> 标签：android, in-app-purchase, in-app-billing

我有一个应用程序使用新的 v3 应用内计费，它在多种设备上都运行良好。唯一的例外是 Nexus 7，它在尝试按照[此处](http://developer.android.com/google/play/billing/billing_integrate.html)的 Google 文档初始化帮助程序时报告错误：

```
12-12 20:26:43.769: E/EnvironmentMainActivity(15324): Problem setting up In-app Billing: IabResult: Error checking for billing v3 support. (response: 3:Billing Unavailable) 
```

这发生在 2 个不同的 Nexus 7 上，每个 Nexus 7 上都有完全独立的用户帐户。这两款设备都构建了 3.10.9 的 Play 商店，与我测试过的所有其他 Nexus 设备相同，它们都能完美运行。鉴于图书馆 v3 的最新性质，关于在线发布的新闻几乎没有。有人对这个有了解吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T05:34:32.293

清除 Google Play 商店的缓存和数据，然后至少启动一次 Google Play 商店。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-29T11:59:16.900

我在**未登录 Google Play 商店的设备上运行代码时遇到了问题。** 更换设备，问题解决。

# android - 从 mysql 数据库中检索密码发送到 android+java webservices 中的电子邮件

> ID：13853090
> 
> 赞同：2
> 
> 时间：2012-12-13T04:43:15.890
> 
> 标签：android, database, email, soap

我开发了登录表单android应用程序。在这里，我必须实现忘记密码字段。如果我点击那个忘记密码，`textview`那么它将进入下一个活动。

下一个活动将接收用户的电子邮件，并从调用 soap 的 mysql 数据库检查其验证`webservices`。

我已经完成了上述部分。

现在我必须实现以下部分：

电子邮件有效意味着从 mysql 数据库中获取密码并将这些密码发送到有效的电子邮件。

如何在我的 java webservice 代码中实现这部分。请帮助我。给我一些解决方案。

这是我用于检查电子邮件有效或无效的 java webservice 代码：

```
public class Checkemail {
public String authentication(String Email){

String retrievedUserName = "";

String status = "";
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE email = '"+Email+"'");
 ResultSet result = statement.executeQuery();

 while(result.next()){
 retrievedUserName = result.getString("email");

 }

 if(retrievedUserName.equals(Email)){
 status = "Valid Email";
 }

 else{
  status = "Invalid Email!!!";
      }

      }
        catch(Exception e){
         e.printStackTrace();
         }
       return status;

          }

             } 
```

这是我的安卓代码：

```
 public class Login extends Activity {
       private final String NAMESPACE = "http://xcart.com";
       private final String URL = "http://10.0.0.75:8080/XcartLogin/services/Checkemail?wsdl";
       private final String SOAP_ACTION = "http://xcart.com/authentication";
       private final String METHOD_NAME = "authentication";
       /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.login);
       Button login = (Button) findViewById(R.id.btn_login);
       login.setOnClickListener(new View.OnClickListener() {

       public void onClick(View arg0) {
         loginAction();
         }
         });
         }

      private void loginAction(){
       SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

             EditText Email = (EditText) findViewById(R.id.tf_userName);
            String email = Email.getText().toString();

             //Pass value for userName variable of the web service
          PropertyInfo unameProp =new PropertyInfo();
           unameProp.setName("Email");//Define the variable name in the web service method
         unameProp.setValue(email);//set value for userName variable
         unameProp.setType(String.class);//Define the type of the variable
         request.addProperty(unameProp);//Pass properties to the variable
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
          try{
          androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());
             }
            catch(Exception e){

          }
          }
          } 
```

如何在 java webservice 代码中实现获取密码发送到电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:12:45.633

由此代码使用，它对您有帮助...

```
 String email_id = etxt_user.getText().toString();
  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
  request.addProperty("Email", email_id);
   Pattern EMAIL_ADDRESS_PATTERN =Pattern.compile(
         "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}" +
         "\\@" +
         "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}" +
         "(" +
         "\\." +
         "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" +
         ")+");
    Matcher matcher = EMAIL_ADDRESS_PATTERN.matcher(email_id);
    if(matcher.matches()){
     Log.v(TAG, "Your email id is valid ="+email_id);
   //  System.out.println("Your email id is valid ="+email);
    }
    else{
  //  System.out.println("enter valid email id");
  Log.v(TAG, "enter valid email id" );
   }
  SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
  soapEnvelope.dotNet = true;
  soapEnvelope.setOutputSoapObject(request);
  HttpTransportSE aht = new HttpTransportSE(URL);
  try {
    aht.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>"); 
    aht.call(SOAP_ACTION, soapEnvelope);
    SoapObject resultsRequestSOAP = (SoapObject) soapEnvelope.bodyIn;
    Log.v("TAG", String.valueOf(resultsRequestSOAP));
   } catch (Exception e) {

     e.printStackTrace();
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:14:26.673

使用这个代码..它对你很有帮助.....

```
 import java.io.BufferedReader;
 import java.io.InputStreamReader;
 import java.net.Authenticator;
 import java.net.PasswordAuthentication;
 import java.net.URL;
 import java.net.URLConnection;
 import android.app.Activity;
 import android.os.Bundle;
 import android.util.Log;

  public class Connect extends Activity {
static StringBuilder sb;

   @Override
public void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     String strURL = "http://hostserver/";
    final String username = "username";
    final String password = "password";
    Authenticator.setDefault(new Authenticator() {
          protected PasswordAuthentication getPasswordAuthentication() {
                PasswordAuthentication pa = new PasswordAuthentication  
                                     (username, password.toCharArray());
                System.out.println(pa.getUserName() + ":" + new 
                                      String(pa.getPassword()));
                return pa;
            }
          });
    BufferedReader in = null;
    StringBuffer sb = new StringBuffer();

    try {
        URL url = new URL(strURL);
        URLConnection connection = url.openConnection();
        in = new BufferedReader(new InputStreamReader(connection
                .getInputStream()));

        String line;

        while ((line = in.readLine()) != null) {
            sb.append(line);
        }
    } catch (java.net.ProtocolException e) {
        sb.append("User Or Password is wrong!");
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (in != null) {
                in.close();
            }
        } catch (Exception e) {
            System.out.println("Exception");
        }
    }

    Log.d("DATA", sb.toString());

}       
    } 
```

# iis-7 - 在 asp 中写入 syslog 的 404 错误页面

> ID：13853093
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:43:44.313
> 
> 标签：iis-7, asp-classic, syslog

我有一个用经典 ASP 编写的自定义 404 页面。我正在尝试设置当页面被点击时，它应该通过 syslog 发送日志。我怎么写出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:36:43.257

您可以使用以下方法从 Classic ASP 记录事件：

```
dim WshShell
set WshShell = Server.CreateObject("WScript.Shell")
wshshell.Logevent 1, "Page not found - your message here!"
set wshshell=nothing 
```

[您可以在MSDN - Logging Events from ASP](http://support.microsoft.com/kb/301309)上找到更多详细信息，例如不同的警告级别。

# c# - 在 gridview 中使用内置的“编辑”和“删除”按钮。ASP.NET C#

> ID：13853095
> 
> 赞同：1
> 
> 时间：2012-12-13T04:43:51.980
> 
> 标签：c#, asp.net, visual-web-developer

我有一个锻炼数据库，其中大多数表中的一些数据被提取并输出到网格视图。我已经截取了我的 gridview 输出的屏幕截图以供参考。

[http://postimage.org/image/vncyu4oet/](http://postimage.org/image/vncyu4oet/)

如您所见，我在桌子上有“编辑”和“删除”按钮。我想知道如何做两件主要的事情，我已经在网上进行了调查，但一直无法找到解决方案。

1）当我点击“编辑”时，我只希望一行受到影响（我正在工作），我还希望只有某些单元格能够被编辑（即日期、锻炼名称、体重和重复） ，而其他的不能。有没有办法限制它？最后，一旦用户输入数据，我如何一次更新多个表？我已经看到有关如何只编辑一个表的代码，但是我的 gridview 像我说的那样从多个表中提取数据。

2）点击“删除”时，我只想影响该行，而不是所有其他具有匹配日期、匹配锻炼名称等的行。

任何帮助表示赞赏！

# c# - 如何将Datagridview中的数据从一个类添加到另一个类？

> ID：13853099
> 
> 赞同：0
> 
> 时间：2012-12-13T04:44:23.883
> 
> 标签：c#, wcf, datagridview, callback

我目前正在使用 WCF 应用程序。我必须在 DataGridView 中显示从回调接收到的数据。这些是我的代码：

从 FrmMain 形式：

```
private void button1_Click(object sender, EventArgs e)
    {
        InstanceContext callbackInstance = new InstanceContext(new StockExchangeUpdates());
        SubscribingClient.RegisterSubscriberServiceClient proxy = new SubscribingClient.RegisterSubscriberServiceClient(callbackInstance);
        proxy.RegisterSubscriber(Guid.NewGuid());
    } 
```

类 StockExchangeUpdates

```
[CallbackBehavior(UseSynchronizationContext = false)]
public class StockExchangeUpdates : IRegisterSubscriberServiceCallback
{
    int ctr = 0;
    FrmMain main = new FrmMain();
    public void passGeneratedNumber(int num)
    {
        try
        {
            ctr = ctr + 1;
            main.dgRandom.Rows.Add(DateTime.Now.ToString("h:mm:ss"), num, ctr);
            // this is not working..
            // Error: "dgRandoms" is inaccessible due to its protection level

        }
        catch (Exception)
        {

            throw;
        }
    }
} 
```

我习惯了尝试不同的方法，但它仍然无法正常工作。请帮忙！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:22:07.550

我认为您可能需要在 DataGridView 上设置不同的“修改器”。
也就是说，在“dgRandom”的属性窗口中，将属性“Modifiers”更改为“Public”（或“Internal”，如果足够的话）。如果设置为“私人”，则只能在同一个班级内“看到”。

（编辑：我假设您使用的是 Windows 窗体而不是 WPF）

# maven - Maven 完整的安全报告，包括通过的测试记录事件

> ID：13853102
> 
> 赞同：1
> 
> 时间：2012-12-13T04:44:28.413
> 
> 标签：maven, junit, report, maven-plugin, maven-surefire-plugin

我想使用 maven 的surefire-report 插件生成一份报告，它将为我提供所有测试的详细报告，其中包含在每次测试运行期间记录的日志事件，而不仅仅是我的测试失败的事件。这也将为我提供测试失败的完整背景。

这是我的 pom.xml 文件：

```
 <artifactId>SampleTests</artifactId>
<version>1.0</version>
<packaging>jar</packaging>
<name>sampleTests</name>
<url>http://maven.apache.org</url>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.4</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-report-plugin</artifactId>
        <version>2.11</version>
        <type>maven-plugin</type>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>
</dependencies> 
<build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <outputDirectory>${basedir}/target/classes</outputDirectory>
    <testSourceDirectory>src/main/test</testSourceDirectory>
    <testOutputDirectory>${basedir}/target/test-classes</testOutputDirectory>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.4.2</version>
        <configuration>
          <includes>
            <include>com/mypackage/**</include>
          </includes>
          <test>**/*Tests</test>
        </configuration>
      </plugin>
      <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
        </plugin>
    </plugins>
</build>
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-report-plugin</artifactId>
        <version>2.6</version>
        <reportSets>
          <reportSet>
            <reports>
              <report>report-only</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>
    </plugins>
  </reporting>
</project> 
```

我使用 mvn surefire-report:report 在这里生成报告。所以我想知道我是否可以做任何额外的事情，以便查看测试运行期间发生的情况的详细报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:03:44.273

作为来自[Maven 网站的参考](http://maven.apache.org/surefire/maven-surefire-report-plugin/)

[surefire-report:report](http://maven.apache.org/surefire/maven-surefire-report-plugin/report-mojo.html)将测试结果报告生成为 HTML 格式。 [surefire-report:report-only](http://maven.apache.org/surefire/maven-surefire-report-plugin/report-only-mojo.html)这个目标不运行测试，它只构建报告。

您正在尝试**仅报告**。尝试将另一份**报告**作为目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:22:14.940

I ended up using ant to get to what I needed. Thanks to this blog: [http://blog.varunin.com/2010/03/ant-script-for-generating-junit-report.html#comment-form](http://blog.varunin.com/2010/03/ant-script-for-generating-junit-report.html#comment-form)

If you want to get a detailed report of all the test events then please use this

# php - 如何防止来自javascript的“OptionTransfer init（）：表单中不存在左选择列表”警报框

> ID：13853104
> 
> 赞同：0
> 
> 时间：2012-12-13T04:44:44.790
> 
> 标签：php, javascript, smarty, testlink

我在我的机器上安装了 testlink 安装程序，我正在尝试学习它。问题是在创建和编辑测试用例时，它显示以下警报框，其中包含：

```
OptionTransfer init(): Left select list does not exist in form! 
```

单击添加/编辑测试用例按钮时，我会发出警报。我调查了这个问题并找到了它的来源。

```
//function OT_init(theform){this.form = theform;if(!theform[this.left]){alert("OptionTransfer init(): Left select list does not exist in form!");return false;}if(!theform[this.right]){alert("OptionTransfer init(): Right select list does not exist in form!");return false;}this.left=theform[this.left];this.right=theform[this.right];for(var i=0;i<this.left.options.length;i++){this.originalLeftValues[this.left.options[i].value]=1;}for(var i=0;i<this.right.options.length;i++){this.originalRightValues[this.right.options[i].value]=1;}if(this.removedLeftField!=null){this.removedLeftField=theform[this.removedLeftField];}if(this.removedRightField!=null){this.removedRightField=theform[this.removedRightField];}if(this.addedLeftField!=null){this.addedLeftField=theform[this.addedLeftField];}if(this.addedRightField!=null){this.addedRightField=theform[this.addedRightField];}if(this.newLeftField!=null){this.newLeftField=theform[this.newLeftField];}if(this.newRightField!=null){this.newRightField=theform[this.newRightField];}this.update();} 
```

所以我只是在该功能上发表了评论，但问题仍然存在并且仍然显示错误。

我还检查了添加/编辑（都在同一个文件中），发现没有任何问题。

我从过去 2 天开始搜索，但没有得到任何解决方案：

所以我的问题是：

1）为什么它显示以下警报？

2）我评论了这个功能，为什么它仍然显示警报？

3）它与html`<select>`标签有关吗？

4）我应该如何防止这种情况？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:45:01.303

您有一个使用[Matt Kruse 的 OptionTransfer 小部件](http://www.mattkruse.com/javascript/optiontransfer/index.html)的页面。当它初始化时，它会在小部件的 html 中查找选择元素。应该以父表单元素作为参数调用 init 函数。

我也有这个问题。在我的情况下，使用错误的参数（附近的 div）调用了 init 函数，因此未找到选择，因此出现此错误。在你的情况下可能类似的东西。

# list - 等效代码，一种有效，另一种无效

> ID：13853107
> 
> 赞同：2
> 
> 时间：2012-12-13T04:45:03.680
> 
> 标签：list, haskell

我在 Haskell 中有两个相同的代码，两者都必须在给定位置（参数 n）拆分列表，但是当一个正在工作时另一个不在工作，为什么会发生这种情况？

```
divide [] _ = ([],[])
divide (h:t) n 
       | n>0 = ( h:list1 , list2 )
       | otherwise = ([],h:t)
       where (list1, list2) = divide t (n-1) 
```

上面的代码工作得很好，但下面的代码不行。

```
divide [] _ = ([],[])
divide (h:t) n 
       | n>0 = ( h:( divide t (n-1) ) , divide t (n-1) )
       | otherwise = ([],h:t) 
```

ghci 给出以下信息：

> 除.hs:3:29:
> 
> ```
>  Couldn't match expected type '[a0]' with actual type '([a0], [a1])'
>    In the return type of a call of 'divide'
>    In the second argument of '<:>', namely ' divide t (n-1) '
>    In the expression: h: divide t (n-1) 
> ```

编辑：

只是一个注释，我假设

```
where (list1, list2) = divide t (n-1) 
```

相当于

```
where list1 = divide t (n-1)
      list2 = divide t (n-1) 
```

我的假设对吗？错误的假设可能导致更糟糕的结论。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T04:57:28.513

你的假设是错误的。

```
where (list1, list2) = divide t (n-1) 
```

相当于

```
where pair = divide t (n-1) 
      list1 = fst pair
      list2 = snd pair 
```

左侧`(list1, list2)`是与右侧延迟匹配的模式。它不会为多个变量分配相同的值。

# arduino - 确定 Arduino 的板类型

> ID：13853109
> 
> 赞同：12
> 
> 时间：2012-12-13T04:45:20.167
> 
> 标签：arduino, precompiler

如何在编译时确定 Arduino 的板类型（例如 Uno 与 Nano）？不要与确定处理器类型混淆。如我所见，例如 #if defined(__AVR_ATmega32U4__) ...

同样，我想要一种方法来确定所有使用相同 ATmega328 处理器的 Arduino 口味。

IDE 知道板。那么是否可以从一些预编译器#IF 访问它

Nano 与 Uno 有不同的中断。因此，在编译时知道板子类型可以自动分配公共库的引脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:38:21.940

正如您所指出的，您在开发环境中检查了一个板目标，以便编译器可能知道该板。不幸的是，IDE 并没有直接告诉编译器这个信息。仅传递处理器类型和频率。

您可以看到 IDE 为编译程序所做的工作。在首选项菜单中，打开详细输出以进行编译。编译一个草图，你会看到这样的东西：

**C:\Apps\arduino-1.0-windows\arduino-1.0\hardware\tools\avr\bin\avr-g++ -c -g -Os -Wall -fno-exceptions -ffunction-sections -fdata-sections -mmcu=atmega328p -DF_CPU=16000000L -DARDUINO=100 -IC:\Apps\arduino-1.0-windows\arduino-1.0\hardware\arduino\cores\arduino -IC:\Apps\arduino-1.0-windows\arduino-1.0\hardware\arduino \variants\standard C:\Users\Jim\AppData\Local\Temp\build4664216036291565363.tmp\Blink.cpp -oC:\Users\Jim\AppData\Local\Temp\build4664216036291565363.tmp\Blink.cpp.o**

-D 是 Arduino 环境将定义传递给预处理器的方式。您会看到只有 CPU 速度和 arduino 版本是通过这种方式传递的。

IO 引脚以不同的方式定义：IDE 包含一个文件夹，其中包含特定于板的头文件。

这个 -I 参数包括一个文件夹到编译器的搜索路径：

***-IC:\Apps\arduino-1.0-windows\arduino-1.0\hardware\arduino\variants\standard***

在该文件夹中有一个适用于您选择的板的 pins_arduino.h 文件。如果您选择不同的板，您将看到此参数更改。

如果你愿意修改你的 IDE 配置，你可以得到你想要的。

所以要得到你想要的，你只需要得到一个#define 指令。所以这里是如何

步骤 1\. 制作您自己的板型。要创建新的板类型，请参见位于此文件夹中的 board.txt 文件：

...\arduino-1.0\硬件\arduino

像这样的行定义了包含文件夹（在这种情况下是标准的）：

```
uno.build.variant=standard 
```

复制整个块，更改名称和文件夹

```
myuno.name=My Arduino Uno
...
myuno.build.variant=myunoboard 
```

通过此更改，当您选择此板目标时，myunoboard 文件夹将放置在编译器路径上。

第 2 步。让您的标题包含您的定义。

在文件夹中

...\arduino-1.0\hardware\arduino\variants\myunoboard

制作一个文件**pins_arduino.h**。在那个文件中

```
#include "..\standard\pins_arduino.h"
#define BOARD MY_UNO
// and/or this form
#define __BOARD_MY_UNO 
```

步骤 3\. 重复更多板。

这将提供为不同的板目标构建代码的能力。

话虽如此，我不会真正推荐这种方法。如果您开始考虑创建跨多个目标运行的代码，那么可能是时候从 Arduino IDE 继续前进了。如果您使用的是 Eclipse 之类的环境，那么您将拥有一个项目，其中包含任意数量的构建配置。每个构建配置都可以为板目标指定不同的预处理器定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T07:26:29.817

我认为 arduino IDE 中没有内置这样的东西，但你总是可以编写自己的 makefile 并自己定义这样的东西。

[http://pragprog.com/magazines/2011-04/advanced-arduino-hacking](http://pragprog.com/magazines/2011-04/advanced-arduino-hacking)

如果您向下滚动到 hello world 示例，您将看到一个示例 makefile，其中定义了一个 BOARD make 变量，并且只需要一点额外的 makefile smarts，您可以像这样调用 make：

```
make BOARD=UNO 
```

或者

```
make BOARD=NANO 
```

为不同的板构建草图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T05:09:58.550

进行电路板嗅探的一种简单方法是使用 ArduinoManager 等库。有了这个，您可以非常轻松地获取板名称和功能[https://github.com/backupbrain/ArduinoBoardManager](https://github.com/backupbrain/ArduinoBoardManager)

它使用上述技术来揭示几乎每个 Arduino 板的大量信息，因此非常适合制作可能部署在许多不同环境中的项目。

只需下载并包含在您的 Arduino 项目中。

```
#include "ArduinoBoardManager.h"

ArduinoBoardManager arduino = ArduinoBoardManager(); // required if you want to know the board name and specific features

void setup() {
  Serial.begin(9600);

  Serial.print("Board is compatible with Arduino ");
  Serial.println(arduino.BOARD_NAME);

  Serial.println("Speed/SRAM/Flash: ");
  Serial.print(ArduinoBoardManager::MAX_MHZ);
  Serial.println(ArduinoBoardManager::SRAM_SIZE);
  Serial.println(ArduinoBoardManager::FLASH_SIZE);

  // Board features (multiple serial ports on Mega, for example)
  if (arduino.featureExists(ArduinoBoardManager::FEATURE_MULTIPLE_SERIAL)) {
    Serial.println("Your board supports multiple serial connections");
  }

}

void loop() {
} 
```

Arduino Uno 上的结果输出是：

```
Board is compatible with Arduino UNO

Speed/SRAM/Flash: 
16000000
2048
33554432 
```

制作这个库（包括示例代码）以[确定 Arduino 板模型和版本](http://tonygaitatzis.tumblr.com/post/134967126657/determine-arduino-board-model-and-version) 的过程在我的博客中有详细描述。

# java - Java Swing：JPanels 相互绘画

> ID：13853114
> 
> 赞同：1
> 
> 时间：2012-12-13T04:45:47.390
> 
> 标签：java, swing

好的，所以我有两个 JFrame，每个 JFrame 内部都有不同的 JPanel 实现。当我调用`repaint()`JPanel 时，在一个 JPanel 上绘制的内容也会在另一个 JPanel 上绘制。

我知道我可以通过调用类似的东西来解决这个问题`g.clearRect()`，但是每次都需要重新绘制太多组件。

知道为什么会这样吗？

```
//This makes the two JFrames and JPanels, sets everything up

public void makeSpaceSimulation() {
    int dimen = 10000;
    int scale = 20;
    int numOfClusters = 30;
    int planPerCluster = 2000;
    SpaceShip s = new SpaceShip(dimen, scale);

    QuadTree t = new QuadTree(dimen, 20);
    new PlanetCreationTest(t, dimen, scale, numOfClusters, planPerCluster);

    makeMap(dimen, scale, s, t);
    makePOV(s, t, scale, dimen);
}

public void makeMap(int dimen, int scale, SpaceShip s, QuadTree t) {

    final JFrame f = new JFrame();
    f.setSize(dimen / scale, dimen / scale);
    f.setLocation(0, 0);
    f.setTitle("Map Panel");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    mapP = new MapPanel(scale, s, dimen);
    mapP.setLayout(new BorderLayout());
    mapP.addTree(t);

    f.add(mapP);
    f.setVisible(true);
    Insets i = f.getInsets();
    f.setSize(dimen / scale + (i.left + i.right) + 2, dimen / scale
            + (i.top + i.bottom) + 2);

    Thread th = new Thread() {
        public void run() {
            while (true) {
                mapP.repaint();
            }

        }
    };
    th.start();

}

public void makePOV(final SpaceShip s, QuadTree t, int scale, int dimen) {
    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    JFrame f = new JFrame();
    f.setSize(500, 500);
    f.setLocation(screenSize.width - 500, 0);
    f.setTitle("POV Panel");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    povP = new POVPanel(s, scale, dimen);
    povP.setLayout(new BorderLayout());
    povP.addTree(t);
    povP.setFocusable(true);

    povP.addKeyListener(new KeyListener() {

        @Override
        public void keyPressed(KeyEvent arg0) {
            final int i = arg0.getKeyCode();
            Thread th = new Thread() {
                public void run() {
                    if (i == 39) {
                        s.moveRight();
                    } else if (i == 37) {
                        s.moveLeft();
                    } else if (i == 40) {
                        s.moveDown();
                    } else if (i == 38) {
                        s.moveUp();
                    }
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            };
            th.start();
        }

        @Override
        public void keyReleased(KeyEvent arg0) {

        }

        @Override
        public void keyTyped(KeyEvent arg0) {

        }

    });

    f.add(povP);
    f.setVisible(true);
    Insets i = f.getInsets();
    f.setSize(dimen / 20 + (i.left + i.right) + 2, dimen / 20
            + (i.top + i.bottom) + 2);

    Thread th = new Thread() {
        public void run() {
            while (true) {
                povP.repaint();
            }

        }
    };
    th.start();

}

//here's the MapPanel

public class MapPanel extends JPanel {

private QuadTree q;
private int scale;
private int dimen;
private SpaceShip s;
private boolean firstDraw;

public MapPanel(int scale, SpaceShip s, int dimen) {
    this.dimen = dimen;
    q = new QuadTree(0, 0);
    this.scale = scale;
    this.s = s;
    firstDraw = true;
}

public void addTree(QuadTree q) {
    this.q = q;

}

public void paintComponent(Graphics g) {
    if (firstDraw) {
        q.draw(g, scale, new Point(0, 0));
        s.drawScaledGeometry(g);
        System.out.println("Totally drew that");
        firstDraw = false;
    } else {
        g.clearRect(s.viewDistance.x/scale, s.viewDistance.y/scale,
                s.viewDistance.width/scale, s.viewDistance.height/scale);
        q.quadDraw(g, scale, s.viewDistance, new Point(0, 0));
        s.drawScaledGeometry(g);
    }
} 
```

}

```
//and this is the POVPanel 

public POVPanel(SpaceShip s, int scale, int dimen) {
    super();
    this.s = s;
    // this.scale = scale;
    this.dimen = dimen;
}

public void addTree(QuadTree q) {
    this.q = q;
}

public void paintComponent(Graphics g) {
    g.clearRect(0, 0, dimen / 20, dimen / 20);
    q.quadDraw(g, 1, s.viewDistance, s.getMoved());
    s.drawGeometry(g);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:04:48.020

这是（一个）你的问题......

```
public void paintComponent(Graphics g) {
    if (firstDraw) {
        q.draw(g, scale, new Point(0, 0));
        s.drawScaledGeometry(g);
        System.out.println("Totally drew that");
        firstDraw = false;
    } else {
        g.clearRect(s.viewDistance.x/scale, s.viewDistance.y/scale,
            s.viewDistance.width/scale, s.viewDistance.height/scale);
        q.quadDraw(g, scale, s.viewDistance, new Point(0, 0));
        s.drawScaledGeometry(g);
    }
} 
```

上下文在绘制周期中共享，这`Graphics`意味着当您获得它时，您将获得用于绘制屏幕上所有其他组件的相同上下文。

您必须调用`super.paintComponent(g)`，它将负责为该组件准备图形上下文以开始绘制。

**更新#1**

再次...

```
public void paintComponent(Graphics g) {
    super.paintComponent(g); // <-- Call me instead...
    //g.clearRect(0, 0, dimen / 20, dimen / 20);
    q.quadDraw(g, 1, s.viewDistance, s.getMoved());
    s.drawGeometry(g);
} 
```

**更新#2**

我也对此表示严重关切

```
while (true) {
    mapP.repaint();
} 
```

这可能会严重影响您的应用程序的性能。你不控制油漆周期，这是重绘经理的责任。重绘管理器将决定何时需要重绘。像这样重复调用`repaint`实际上可能会导致重绘管理器延迟实际调度绘制周期。

更好地使用 a [`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，它更简单，更安全......

```
Timer timer = new Timer(25, new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        mapP.repaint();
    }
});
timer.setRepeats(true);
timer.setCoalesce(true);
timer.start(); 
```

你可能会发现通读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

有帮助

**更新#3**

避免`KeyListener`，它只会让你哭泣。相反，使用[键绑定 API](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# hibernate - 休眠创建用户到朋友的关系

> ID：13853115
> 
> 赞同：1
> 
> 时间：2012-12-13T04:45:48.917
> 
> 标签：hibernate, one-to-many, hibernate-mapping

我正在使用休眠并试图代表用户与朋友的关系。我的第一个想法是用一组朋友对象创建一个用户对象。

我想要一个包含所有用户和信息的用户表，例如：

*用户表：名字、姓氏等*

然后是一个 User_Friend 表来管理关系。就像是：

*User_Friend 表：id,userId,friendId(userId) *

一个用户会有很多friendIds。

我为用户对象创建了一个表和映射：

```
<id name="id" type="int">
        <column name="userId" />
            <generator class="native" />
        </id>
        <set name="friends" table="User_Friend???" 
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <many-to-many entity-name="Friend">
                <column name="friendId" not-null="true" />
            </many-to-many>
        </set>
        <property name="firstName" type="string"></property>
        <property name="lastName" type="string"></property>
        <property name="email" type="string"></property> 
```

如果我想将朋友信息（如名字、姓氏等）保留在用户表中，并将关系保留在像 User_Friend 这样的表中，我的朋友对象的映射会是什么样子？

我应该把朋友当作本质上的用户吗？如果是这样，我会将上面的 User_Friend 表更改为 User 表吗？

**编辑：** 我发现了这个[指向休眠参考的链接，](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/associations.html#assoc-bidirectional-join-12m)它解释了一个双向的一对多/多对一与连接表。
这是否允许我在不复制用户表（为朋友）的情况下创建用户到朋友的关系？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:10:11.327

您正在寻找的是“Hibernate 中的多对多自引用”

在下面的示例中，员工可以有许多同事：

![自引用多对多](../Images/c5f53d56302cc4dcd7f58c883d07858c.png)

```
@Entity
@Table(name="EMPLOYEE")
public class Employee {

    //id, firstname, lastname 

   @ManyToMany(cascade={CascadeType.ALL})
    @JoinTable(name="EMPLOYEE_COLLEAGUE",
        joinColumns={@JoinColumn(name="EMPLOYEE_ID")},
        inverseJoinColumns={@JoinColumn(name="COLLEAGUE_ID")})
    private Set<Employee> colleagues = new HashSet<Employee>();

    @ManyToMany(mappedBy="colleagues")
    private Set<Employee> teammates = new HashSet<Employee>();     

    // Getter and Setter methods
} 
```

见教程：[多对多休眠自引用](http://viralpatel.net/blogs/hibernate-self-join-annotation-mapping-many-to-many-example/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T05:05:39.377

尝试两个表：

```
Users -- with your user information
user_friends -- with two user_ids representing a friendship. 
```

您的业​​务逻辑可以指示关系是双向的还是单向的。

# perl - 如何使用 AWK 或 sed 或 Perl 进行此类替换？

> ID：13853117
> 
> 赞同：7
> 
> 时间：2012-12-13T04:45:59.250
> 
> 标签：perl, bash, shell, sed, awk

想用“张量”替换乘法符号“*”，用“p_tensor”替换幂符号“^”，使用以下替换规则：

```
 a(k)^n --> p_tensor(n,a(k))
    a(i)*a(j) --> tensor(a(i),a(j)), when i=/=j 
```

但是当符号“*”在数字和a(i)之间时，例如3*a(i)，我们应该保持符号“*”的原样。

例如，

```
 5*a(i)*a(j)*(a(k1)+3*a(k2)) --> 5*tensor(tensor(a(i),a(j)),a(k1)+3*a(k2))
    a(i)^2*a(j)^2  --> tensor(p_tensor(2,a(i)),p_tensor(2,a(j)))
    ... 
```

现在我想使用 AWK 或 sed 或 Perl 重新格式化以下表达式：

```
 3*a(3)^2+6*a(1)^2*(5*a(2)^2-2*a(4))+6*a(2)*a(4)+6*a(1)*(-4*a(2)*a(3)+a(5)) 
```

有什么想法吗？

替换后的预期结果应该是

```
 3*p_tensor(2,a(3))+6*tensor(p_tensor(2,a(1)),(5*p_tensor(2,a(2))-2*a(4))+6*tensor(a(2),a(4))+6*tensor(a(1),(-4*tensor(a(2),a(3))+a(5)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T04:57:46.173

正则表达式不能做任意嵌套，也不能做优先级和关联性。为此需要解析器；但是，您可以从以下开始足够接近：

珀尔：

```
while(<>) {
   s/(a\(\d+\))\^(\d+)/p_tensor($2,$1)/g;
   s/(a\((\d+)\))\*(a\((\d+)\))/tensor($1, $3)/g if $2 != $4;
   print;
} 
```

这是接近的，并为您提供一个级别。然后可以通过添加额外的递归定义的模式来“伪造”额外的嵌套，这些模式可以达到您需要的任何最大嵌套深度（通常不是很多......实际上表达式很少有 3-4 层，这对您来说可能很好）。

试试看：

```
echo "3*a(3)^2+6*a(1)^2*(5*a(2)^2-2*a(4))+6*a(2)*a(4)+6*a(1)*(-4*a(2)*a(3)+a(5))" | perl t.pl 
```

或类似的东西。

# java - 我在程序中做错了什么？

> ID：13853118
> 
> 赞同：0
> 
> 时间：2012-12-13T04:46:05.133
> 
> 标签：java

我正在编写一个程序，如果有人输入以下两行：

您好，我想订购 FZGH

儿童餐

程序会这样输出：

你好，我想点一份儿童餐

换句话说，用户输入句子的“FZGH”将被替换为第二行的单词，如您所见：“FZGH”被“KID'S MEAL”替换。有点明白我的意思？如果没有，我可以详细说明，但这是我能解释的最好的。

我真的很接近解决这个问题！我当前的输出是：你好，我想订购一份 FZGH 儿童餐

我的程序没有用“KID'S MEAL”替换“FZGH”，我不知道为什么会这样。我认为通过使用 .replaceAll() 东西，它会用“KID'S MEAL”替换“FZGH”，但这并没有真正发生。到目前为止，这是我的程序：

```
public static void main(String[] args) {
    sentences();
}

public static void sentences() {
    Scanner console = new Scanner(System.in);
    String sentence1 = console.nextLine();
    String sentence2 = console.nextLine();
    //System.out.println(sentence1 + "\n" + sentence2);
    String word = sentence1.replaceAll("[FZGH]", "");
    word = sentence2;
    System.out.print(sentence1 + word);

} 
```

我在哪里搞砸了，导致 FZGH 仍然出现在输出中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:56:39.867

我认为你有几个错误。也许以下内容很接近......

```
public static void main(String[] args) {
    sentences();
}

public static void sentences() {
    Scanner console = new Scanner(System.in);
    String sentence1 = console.nextLine();
    String sentence2 = console.nextLine();
    String sentence3 = sentence1+sentence2;
    String final = sentence3.replaceAll("FZGH", "");
    System.out.print(final);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:49:29.800

利用

```
sentence1 = sentence1.replaceAll("FZGH", "");
String word = sentence2; 
```

您的第一个（也是主要）问题是您正在创建一个新的`String`named `word`，并将其设置为`sentence1.replaceAll("[FZGH]", "")`. 然后，您立即将 的值更改为`word`，因此替换丢失了。`sentence2`

相反，设置`sentence1`to`sentence1.replaceAll("FZGH", "");`将更改为`sentence1`不再包含 string `"FZGH"`，这就是你想要的。你实际上根本不需要一个`word`值，所以如果你想删除它，它不会受到伤害。

此外， using`[FZGH]`将替换字符串中的所有`F`'s、`Z`' `G`s 和`H`'s - 您应该`FZGH`改为使用，因为这只会删除连续所有四个字母的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:05:22.390

实际上replace方法返回一个应该再次分配给sentence1的字符串。您可以运行此代码，它工作正常。公共静态无效主要（字符串[]参数）{句子（）；}

```
public static void sentences() {
        Scanner console = new Scanner(System.in);
        String sentence1 = "HELLO, I’D LIKE TO ORDER A FZGH";
        String sentence2 = "KID’S MEAL";
        //System.out.println(sentence1 + "\n" + sentence2);
         sentence1 = sentence1.replace("FZGH", "");
       String word = sentence2;
        System.out.print(sentence1 + word);

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:53:05.707

您正在重新分配字符串“word”

代替行：

```
String word = sentence1.replaceAll("[FZGH]", "");
word = sentence2;
System.out.print(sentence1 + word); 
```

使用以下几行

```
sentence1 = sentence1.replaceAll("[FZGH]", "");
System.out.print(sentence1 + sentence2); 
```

# assembly - 为 armv5 编译 Valgrind

> ID：13853124
> 
> 赞同：2
> 
> 时间：2012-12-13T04:46:47.040
> 
> 标签：assembly, arm, valgrind, cross-compiling

每个人。我在为 armv5（arm926ej-s）交叉编译 valgrind 时遇到了一些问题。我可以弄清楚其中的一些，但有一个我无法解决。我会写这些问题：

1.  Valgrind 不支持 armv5 in `configure`，我改为`armv7*)`使用`armv7*|arm*)`它，它运行良好。

2.  `-mcpu=cortex-a8`不对，因为我有一个 arm926ej-s CPU。所以我使用这个命令在 Makfiles 中全部替换它们：

    > sed -i 's/-mcpu=cortex-a8/-mcpu=arm926ej-s/g' `查找. -name“生成文件*”`

3.  问题来了。`movw`并且`movt`在源代码中 armv5 不支持。错误信息是：

> ```
> m_dispatch/dispatch-arm-linux.S: Assembler messages:
> m_dispatch/dispatch-arm-linux.S:122: Error: selected processor does not support `movw r1,#47'
> m_dispatch/dispatch-arm-linux.S:123: Error: selected processor does not support `movw r2,#0'
> m_dispatch/dispatch-arm-linux.S:175: Error: selected processor does not support `movw   r1,#:lower16:vgPlain_stats__n_xindirs_32'
> m_dispatch/dispatch-arm-linux.S:176: Error: selected processor does not support `movt r1,#:upper16:vgPlain_stats__n_xindirs_32'
> m_dispatch/dispatch-arm-linux.S:183: Error: selected processor does not support `movw r1,#(((1<<15))-1)'
> m_dispatch/dispatch-arm-linux.S:184: Error: selected processor does not support `movw r4,#:lower16:vgPlain_tt_fast'
> m_dispatch/dispatch-arm-linux.S:187: Error: selected processor does not support `movt r4,#:upper16:vgPlain_tt_fast'
> m_dispatch/dispatch-arm-linux.S:200: Error: selected processor does not support `movw r1,#:lower16:vgPlain_stats__n_xindir_misses_32'
> m_dispatch/dispatch-arm-linux.S:201: Error: selected processor does not support `movt r1,#:upper16:vgPlain_stats__n_xindir_misses_32' 
> ```

我正在考虑代替`movw`和`movt`with `mov`。但我不熟悉汇编代码。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:32:51.053

在 valgrind 错误跟踪器中有一些关于[错误 248998](https://bugs.kde.org/show_bug.cgi?id=248998)的补丁，它们试图添加对 armv5 的支持，但我不知道它们有多完整或它们工作得如何。

无论如何，它们可能会为您的工作提供一个很好的起点。

# codeigniter - Codeigniter - 无法在控制器中加载多个视图

> ID：13853127
> 
> 赞同：3
> 
> 时间：2012-12-13T04:47:20.793
> 
> 标签：codeigniter

大家好，感谢您花时间看我的问题。

我曾尝试仅一起运行视图（site_nav、site_header 和 site_footer），它运行良好。

当我尝试运行视图（view_home）和模型时，它也运行良好。

但是，当我同时运行所有视图和模型时，视图（site_nav、site_header 和 site_footer）不起作用。

有人可以帮忙吗？

```
public function home(){
    $this->load->model("model_cms_home");
    $data["results"] = $this->model_cms_home->getData("cms_home");
    $this->load->view("site_nav");
    $this->load->view("site_header");
    $this->load->view("view_home", $data);
    $this->load->view("site_footer");
}

VIEW("view_home")

<div id="home_hat1"> <img src="<?php echo base_url(); ?>pics/home_hat1.jpg"> </div>

<div id="content">

    <div id="dinner">

   <div class="home_title">

     <?php
    $query = $this->db->query("SELECT `title` , `text1` FROM `cms_home` WHERE       `ID` =1");

    if ($query->num_rows() > 0){
    $row = $query->row_array();

        echo $row['title'];

    }           
    ?>
  </div>

<div class="home_content">

    <?php
    $query = $this->db->query("SELECT `title` , `text1` FROM `cms_home` WHERE `ID` =1");

    if ($query->num_rows() > 0){
    $row = $query->row_array();

        echo $row['text1'];

    }           
    ?>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T05:02:06.540

您不能在一个控制器功能中调用多个视图。这是可以做到的。我建议您首先创建一个模板，然后在该模板中调用您的视图，如下所示

**`templete.php`**

```
<html>
<head>
<body>
   $this->load->view("site_nav");
   $this->load->view("site_header");
   <?php echo $content; ?>
   $this->load->view("site_footer");
</body>
</head>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:20:33.663

我的建议是在`view_home`using中调用其他页面`include();`。您看不到其他页面，因为将根据您的代码调用最后一页。如果您在每个页面中放置一个警报，您就会知道它实际上已经调用了所有页面。

# linq-to-sql - 如何使用 linq to sql 显示 1 分钟前的记录？

> ID：13853128
> 
> 赞同：0
> 
> 时间：2012-12-13T04:47:33.513
> 
> 标签：linq-to-sql

在我的表中输入当前日期时间的记录。我需要连续显示在数据库中输入的记录是什么。对于每 1 分钟编写一个 Web 服务，我需要显示新输入的记录。如何编写 linq to sql 查询以在 1 分钟输入记录之前显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:53:27.407

您可以立即将数据保存在数据库中，但是当您想在 Gridview 中显示数据时，您可以延迟`Thread.Sleep(60000);`

# c# - 如何使用 BinaryWriter 进行读写？

> ID：13853129
> 
> 赞同：1
> 
> 时间：2012-12-13T04:47:34.590
> 
> 标签：c#

我有这个代码在编写二进制文件时可以工作：

```
using (BinaryWriter binWriter =
                                new BinaryWriter(File.Open(f.fileName, FileMode.Create)))
                            {
                                for (int i = 0; i < f.histogramValueList.Count; i++)
                                {

                                    binWriter.Write(f.histogramValueList[(int)i]);

                                }
                                binWriter.Close();
                            } 
```

这段代码从硬盘上的 DAT 文件读回：

```
fileName = Options_DB.get_histogramFileDirectory();
            if (File.Exists(fileName))
            {
                BinaryReader binReader =
                    new BinaryReader(File.Open(fileName, FileMode.Open));
                try
                {
                    //byte[] testArray = new byte[3];
                    int pos = 0;
                    int length = (int)binReader.BaseStream.Length;

                    binReader.BaseStream.Seek(0, SeekOrigin.Begin);

                    while (pos < length)
                    {
                        long[] l = new long[256];

                        for (int i = 0; i < 256; i++)
                        {
                            if (pos < length)
                                l[i] = binReader.ReadInt64();
                            else
                                break;

                            pos += sizeof(Int64);
                        }
                        list_of_histograms.Add(l);
                    }
                }

                catch
                {
                }
                finally
                {
                    binReader.Close();
                } 
```

但我想要做的是添加到编写代码以将更多三个流写入文件，如下所示：

```
binWriter.Write(f.histogramValueList[(int)i]);
binWriter.Write(f.histogramValueListR[(int)i]);
binWriter.Write(f.histogramValueListG[(int)i]);
binWriter.Write(f.histogramValueListB[(int)i]); 
```

但第一件事是我如何编写所有这些并将其放入文件中，以便通过字符串或其他东西来识别它，所以当我读回文件时，我将能够将每个列表放入一个新列表中？

第二件事是我现在如何读回文件以便将每个列表添加到新列表中？现在，我很容易编写一个列表读取并将其添加到列表中。但是现在我添加了更多三个列表，那么我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:56:55.777

要获得答案，请考虑如何获取您刚刚序列化的列表中的项目数。

作弊码：在项目之前写集合中的项目数。阅读时做反向。

```
writer.Write(items.Count());
// write items.Count() items. 
```

阅读：

```
int count = reader.ReadInt32();
items = new List<ItemType>();
// read count item objects and add to items collection. 
```

# php - 带有变量的 JSON 卷曲导致重定向到 defaultwebpage.cgi

> ID：13853133
> 
> 赞同：0
> 
> 时间：2012-12-13T04:48:02.897
> 
> 标签：php, json, wordpress, curl, cgi

我正在使用 PHP、Curl 和 JSON 将 The Movie Database.com 的 API 集成到我的网站中。以下演示代码只是抓取一个示例 JSON 对象并将其输出到页面上：

```
$theFields = "?api_key=8746ac61dc4ad34018d62201f3a8a687&query=ferris";
$json_url = 'http://api.themoviedb.org/3/search/movie' + $theFields;
// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$result =  curl_exec($ch); // Getting jSON result string

echo $result; 
```

但是，当在我的 WordPress 安装中执行此代码时，它会导致我的站点重定向到 defaultwebpage.cgi。如果我将 $theFields 的内容剪切并粘贴到 $json_url 内容的末尾，它可以完美地工作而无需重定向。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T06:33:37.930

微小但狡猾的错字：您混淆了 JavaScript 和 PHP 连接运算符。在第二行替换`+`为`.`，你会没事的。

# javascript - 对象在异步脚本上没有方法

> ID：13853142
> 
> 赞同：0
> 
> 时间：2012-12-13T04:48:57.713
> 
> 标签：javascript, object

我有自己的自定义 Javascript 对象，定义如下：

```
function NewObject(){
   this.fetchConfig();
}

NewObject.prototype.fetchConfig = function(params){
    [Code]
} 
```

为简洁起见，我省略了实际的实现，但除了上述之外，我没有做任何特别的事情。问题是，当我实际嵌入类似于 Google Analytics 嵌入方式的脚本时（见下文），我得到`Uncaught TypeError: Object #<NewObject> has no method 'fetchConfig'`.

在我使用下面的异步代码之前，我从未见过这个问题，它本质上是谷歌修改为指向我的脚本而不是谷歌分析。

我使用的嵌入代码：

```
<script>_object_id = 19782135;
    var tb = document.createElement('script'); tb.type = 'text/javascript';
    tb.async = true; tb.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cfurl.cloudfront.net/script.min.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(tb, s);
</script> 
```

这个问题是否是由使用 async 属性引起的（例如，在修改原型之前执行脚本）？我尝试使用 Web 调试器并检查 NewObject 的原型，但我*只*看到构造函数——我编写的其他方法都没有出现在调试器中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:57:43.437

现在我用你的完整代码清楚地看到了你的错误。

在 JavaScript 中，您编写代码的方式与解析器实际读取代码的方式不同。它按照一定的顺序阅读，归纳为三组：

1.  变量声明
2.  函数声明
3.  所有其他，根据它们在范围中出现的顺序。这包括

    *   操作（函数调用、条件、循环等）
    *   变量赋值（变量、函数表达式、原型赋值）
    *   我错过的一切

例如，这段代码：

```
new foo();
function foo(){...}
foo.prototype.bar = function(){...};
var bar = 'baz'; 
```

实际上对解析器来说是这样的：

```
var bar;                          //variable declaration
function foo(){...};              //function declaration
                                  //operations and assignments
new foo();                        //this is foo, but no bar yet
foo.prototype.bar = function(){}; //function expressions (prototype assignment)
bar = 'baz';                      //variable assignment 
```

您可以测试以下代码以查看变量的情况，`undefined`而不是在`console.log()`代码中，声明在它之后。这是因为声明被“提升”而不是赋值。所以它看到变量，但看不到值。与不存在的变量进行比较以查看差异：

```
console.log('ndefined is:',ndefined);     //undefined, sees the variable
console.log('notDefined is:',notDefined); //not defined, non-existent variable
var ndefined = 'I should be defined!!!'; 
```

* * *

现在在您的代码中，此代码：

```
if (_object_id) {...new NewObject(_object_id)...}

function NewObject(params) {...return this.fetchConfig(params)...}

NewObject.prototype.fetchConfig = function (id) {} 
```

由于解析的顺序，解析器看起来像这样：

```
//priority 2: function declarations
//function declarations are "hoisted up"
function NewObject(params) {...return this.fetchConfig(params)...}

//priority 3: assignments and operations
//at this point, fetchConfig is not yet in the prototype
//yet your constructor uses it, hence the error
if (_object_id) {...new NewObject(_object_id)...}

NewObject.prototype.fetchConfig = function (id) {} 
```

简而言之，该`if`语句看到了您的构造函数，因为它被提升了。但是那个时候构造函数从来没有`fetchConfig`。要解决此问题，请更改顺序：

```
function NewObject(params) {...return this.fetchConfig(params)...}

if (_object_id) {...new NewObject(_object_id)...}

NewObject.prototype.fetchConfig = function (id) {} 
```

最佳实践是按照解析器的方式声明或操作它们。这也意味着以这种方式格式化您的代码。这样，它将消除有关代码的一些混乱。

# mysql - 使用 MS SQL 2008 创建汇总表

> ID：13853143
> 
> 赞同：1
> 
> 时间：2012-12-13T04:49:03.493
> 
> 标签：mysql, database, sql-server-2008, database-design

这就是我在 MySQL 中创建汇总表的方式，如何在 MS SQL 2008 中做同样的事情？

这个想法是创建一个只有日期（没有时间）的汇总表，并且已经汇总了每天每米的千瓦时。

```
CREATE table summary 
SELECT meterID, date( DateTime ) AS date, sum( kWh ) AS kWh
FROM data GROUP BY meterID, date;" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:52:58.357

至于构建表格，您的问题没有指定确切的数据类型。例如 kWh 只是一个 int 或者如果有一个小数部分。但是，尝试猜测它会是这样的。

```
CREATE Table summary
(
 meterID int,
 YourDate date,
 kWh int /* or maybe a decimal(9,2) or something like that */
) 
```

然后剩下的就和mysql很接近了，只是换了一个[Cast](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.105%29.aspx)来做转换。你也可以使用[convert](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.105%29.aspx)但我一直更喜欢 Cast 的语法。

```
INSERT INTO summary (meterID, YourDate, kWh) 
(SELECT meterID, Cast(YourDateTime AS Date) AS YourDate, sum( kWh ) AS kWh
FROM data GROUP BY meterID, Cast(YourDateTime AS Date)); 
```

# php - php搜索数据库的行

> ID：13853145
> 
> 赞同：1
> 
> 时间：2012-12-13T04:49:14.133
> 
> 标签：php, html, mysql

好的，我得到了代码来根据用户帐号提取数据

好吧，这就是我正在使用的东西（是的，我知道现在不安全，这就是我发帖的原因）

```
<?php

include('config.php');

$user_info = fetch_user_info($_GET['AccountNumber']);

?>
<html>
<body>
<div>
<?php
if ($user_info === false){
$Output = 'http://www.MyDomain.Com/';
echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$Output.'">';
}else{
?>
<center>
<title><?php echo $user_info['FirstName'], ' ', $user_info['LastName'], ' - ',     $user_info['City'], ', ', $user_info['State']; ?> - Name of site</title> 
```

所以基本上这段代码允许我做的是有一个名为 Profile.php 的文件，当用户访问这个页面时，它会返回数据。

像这样[http://MyDomain.com/Profile.php?AccountNumber=50b9c965b7c3b](http://MyDomain.com/Profile.php?AccountNumber=50b9c965b7c3b)

我怎样才能安全地做到这一点，因为它现在使用 get 方法从 url 栏中检索帐号确实不安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:53:45.580

您是否来自另一个应该发布数据而不是 GET 的页面？

从 GET 获取信息并不是很危险。您只需要确保使用 转义该值`mysql_real_escape_string()`，例如：

```
$user_info = fetch_user_info(mysql_real_escape_string($_GET['AccountNumber'])); 
```

这将保护您免受 SQL 注入攻击。更好的是使用准备好的语句和[PDO](http://php.net/manual/en/book.pdo.php)。

我们无法确切知道您现在正在运行什么查询，因为所有这些逻辑都隐藏在 fetch_user_info 后面，而您没有包含其源代码。如果您包含该代码，我们可能会帮助保护它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:00:59.257

如果您只想显示当前用户的个人资料，您应该在用户登录时将用户 ID 或帐号存储在会话中。然后在您的个人资料页面上从会话中检索帐号并显示详细信息。如果没有活动会话，则可以将用户重定向到登录页面。

# sql - 如何读取 IPv6 地址，以完全扩展的符号格式格式化，然后转换为二进制？

> ID：13853148
> 
> 赞同：1
> 
> 时间：2012-12-13T04:49:35.710
> 
> 标签：sql, sql-server, sql-server-2005, ipv6

我正在使用 SQL Server 2005。

我试图弄清楚如何读取存储为字符串的 IPv6 地址，然后将其扩展为完整的 8 个八位字节表示法，并将每个八位字节转换为二进制，然后将所有二进制表示加在一起最终将地址转换为二进制.

这是完整的符号：2001:0db8:85a3:0000:0000:8a2e:0370:7334 与我们数据库中存储的相同的短符号：2001:0db8:85a3::8a2e:0370:7334

下面是另一个有效 IPv6 地址的示例：:::1

维基百科的规则很好地列出并在这里解释：[http ://en.wikipedia.org/wiki/IPv6#Address_format](http://en.wikipedia.org/wiki/IPv6#Address_format)

我不确定如何将 IPv6 地址扩展为完整符号，并希望这里有人已经弄清楚或知道如何做到这一点。我用谷歌搜索了几个小时，但找不到 SQL Server 2005 的任何解决方案。

一旦地址扩展，我正在考虑根据 : 拆分每个八位字节，并使用此处概述的方法转换为二进制：http: [//blogs.msdn.com/b/sqltips/archive/2008/07/02/将十六进制字符串转换为 varbinary-and-vice-versa.aspx](http://blogs.msdn.com/b/sqltips/archive/2008/07/02/converting-from-hex-string-to-varbinary-and-vice-versa.aspx)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:41:06.420

[SQL小提琴](http://sqlfiddle.com/#!3/83b70/4)

**样品表**：

```
select '2001:0db8:85a3:0000:0000:8a2e:0370:7334' address
  into ipv6
  union all
select '2001:db8:85a3::8a2e:0370:7334' union all
select '2001:0db8:85a3::' union all
select '::ff01:0db8:85a3' union all
select '::1' union all
select '002::' union all
select '::' union all
select '1:2:3:4:5:6:7:' union all
select ':A:2:3:4:5:6:7' union all
select 'F:2:3:4:5:6::8' union all
select '' union all -- invalid
select null; -- null test 
```

**查询**：

```
with step1(address,full8) as(
     select address,
            replace(nullif(address,''),'::',replicate(':',9-len(address)+len(replace(address,':',''))))
       from ipv6
), step2(address,full8,xml) as (
     select address, full8,
            cast('<x>'+replace(full8,':','</x><x>')+'</x>' as xml)
       from step1
), step3(address,full8,xml,part,pos) as (
     select address, full8,xml,
            right('0000'+part.value('.','varchar(4)'),4),
            part.value('for $s in . return count(../*[. << $s]) + 1', 'int') pos
       from step2
cross apply xml.nodes('x') node(part)
), step4(address,hex) as (
     select o.address, (select i.part+''
                          from step3 i
                         where i.address=o.address
                      order by i.pos
                           for xml path('')) hex
       from step3 o
group by address
)
     select address,
            hex,
            cast('' as xml).value(
              'xs:hexBinary(sql:column("hex"))','binary(16)') bin
       from step4
   order by address; 
```

**[结果](http://sqlfiddle.com/#!3/83b70/4/0)**：

```
|                                 ADDRESS |                              HEX |                                               BIN |
----------------------------------------------------------------------------------------------------------------------------------
|                                      :: | 00000000000000000000000000000000 |                   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 |
|                                     ::1 | 00000000000000000000000000000001 |                   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 |
|                        ::ff01:0db8:85a3 | 00000000000000000000ff010db885a3 |          0,0,0,0,0,0,0,0,0,0,-1,1,13,-72,-123,-93 |
|                          :A:2:3:4:5:6:7 | 0000000A000200030004000500060007 |                  0,0,0,10,0,2,0,3,0,4,0,5,0,6,0,7 |
|                                   002:: | 00020000000000000000000000000000 |                   0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0 |
|                          1:2:3:4:5:6:7: | 00010002000300040005000600070000 |                   0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,0 |
|                        2001:0db8:85a3:: | 20010db885a300000000000000000000 |          32,1,13,-72,-123,-93,0,0,0,0,0,0,0,0,0,0 |
| 2001:0db8:85a3:0000:0000:8a2e:0370:7334 | 20010db885a3000000008a2e03707334 | 32,1,13,-72,-123,-93,0,0,0,0,-118,46,3,112,115,52 |
|           2001:db8:85a3::8a2e:0370:7334 | 20010db885a3000000008a2e03707334 | 32,1,13,-72,-123,-93,0,0,0,0,-118,46,3,112,115,52 |
|                          F:2:3:4:5:6::8 | 000F0002000300040005000600000008 |                  0,15,0,2,0,3,0,4,0,5,0,6,0,0,0,8 | 
```

*注意：SQL Fiddle 不能很好地显示二进制数据...*

# cluster-computing - 如何在 Weka K-Means 集群中定义集群中心？

> ID：13853149
> 
> 赞同：1
> 
> 时间：2012-12-13T04:49:36.597
> 
> 标签：cluster-computing, weka, k-means

我可以通过导入外部文件在 SPSS K-Means 集群中指定初始集群中心。Weka 中是否有任何类似的功能，我可以明确指定初始聚类中心，而不是通过随机数生成它们？我找不到任何关于这个的选项......

# ruby-on-rails - 太阳黑子/Solr Rails 过滤器

> ID：13853153
> 
> 赞同：0
> 
> 时间：2012-12-13T04:50:07.703
> 
> 标签：ruby-on-rails, solr, controller

**更新**

我正在使用 sunspot/solr 在我的 Rails 3.2 应用程序中搜索和过滤数据。这是我在“Gear”模型上执行的两次 solr 搜索中的第二次。

我的第一次搜索根据查询和应用的方面显示视图中的所有齿轮（一个齿轮属于一个用户，一个用户有很多齿轮）。

现在我可能正在错误地思考这个问题（因为我有一段时间没看过这个了）。

基本上我现在正在建立一个新的搜索，但这也在“齿轮”模型上，但它在不同的控制器、不同的视图中，我试图只搜索/过滤/刻面用户齿轮的结果，但我是获取数据库中的所有齿轮。

出现以下错误...

**为 nil 调用 id，它会错误地为 4——如果你真的想要 nil 的 id，请使用 object_id**

我错过了什么？

**在控制器中显示动作**

```
 def show
     @store = Store.find(params[:id])
     @user = @store.user
     @search2 = Gear.solr_search do
          fulltext params[:search]        
          facet (:category_name)
          facet(:sub_category_name)
          facet (:state)
          facet (:city)
          facet (:price)
          with(:user_id, @user.id)
          with(:price, params[:price]) if params[:price].present?
          with(:state, params[:state]) if params[:state].present?
          with(:city, params[:city]) if params[:city].present?
          with(:sub_category_name, params[:name]) if params[:name].present?
          with(:category_name, params[:categoryname]) if params[:categoryname].present?
          paginate(page: params[:page], :per_page => 15)
     end

     @gears = @search2.results
  end 
```

在尝试太阳黑子之前，我正在这样做*@gears = @store.user.gears.paginate(page: params[:page]) 。*

**齿轮型号**

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :image_b, :image_c, :image_d, :image_e, :image_f, :image_g, :image_h, :image_i, :remote_image_url, :color, :year, :latefee, :cancellation, :minrental, :policy, :about, :address, :city, :state, :zip, :country, :latitude, :longitude, :gmaps
  belongs_to :user
  belongs_to :sub_category

  searchable do
     text :title, :size, :price, :year, :zip, :state, :city, :minrental, :about, :latefee, :color

     text :user_firstname do
          user.firstname
     end

     text :user_lastname do
          user.lastname
     end
     # **Facet Section**   

     string :size 
     string :price
     string :state
     string :city

     string :sub_category_name , :multiple => true, :stored => true do
       sub_category.name
     end

     string :category_name, :multiple => true, :stored => true do
       category.name
     end
   end
end 
```

**店铺模式**

```
class Store < ActiveRecord::Base
  attr_accessible :storeimage, :storename
  belongs_to :user
  mount_uploader :storeimage, StoreUploader
end 
```

**用户模型**

```
class User < ActiveRecord::Base 

  attr_accessible :email, :password, :password_confirmation, :remember_me, :firstname, :lastname, :userimage, :remove_userimage, :name
  has_many :gears
  has_many :comments, :dependent => :destroy 
  has_one :store, :dependent => :destroy
  require 'carrierwave/orm/activerecord'
  mount_uploader :userimage, UserpicUploader
  accepts_nested_attributes_for :store

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:31:09.627

**更新**

感谢您发布模型代码。请检查这是否适合您。注意`user = @store.user`控制器动作中的赋值使用局部`user`变量而不是实例变量`@user`。`:user_ids`添加到可搜索字段后，不要忘记重新索引您的模型。

```
class Gear < ActiveRecord::Base
  searchable do
    integer :user_id
  end
end

# now the controller action
def show
  @store = Store.find(params[:id])
  user = @store.user

  @search2 = Gear.solr_search do
    with(:user_id, user.id)
    # all other search code omitted for brevity
  end
end 
```

# asp.net-mvc - 我无法在我的 ASP.NET MVC 4 应用程序中包含 using.SignalR.Hubs。VS 2012 提示找不到“SignalR”。如何解决这个问题？

> ID：13853155
> 
> 赞同：1
> 
> 时间：2012-12-13T04:50:27.580
> 
> 标签：asp.net-mvc, visual-studio-2012, signalr

我无法包括使用。`SignalR`.我的`ASP.NET MVC 4`应用程序中的集线器..

VS 2012 提示`'SignalR' could not be found`。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:27:44.907

您是否安装了适当的 SignalR 软件包？

您应该使用 NuGet 来正确安装它们。

看起来你至少需要：Microsoft.AspNet.SignalR

见这里： [https ://github.com/SignalR/SignalR/wiki/Getting-Started](https://github.com/SignalR/SignalR/wiki/Getting-Started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:48:50.063

如果您使用以下方式安装它：`Install-Package Microsoft.AspNet.SignalR -Pre`您应该这样做`using Microsoft.AspNet.SignalR.Client.Hubs;`。

仅当您使用它安装它时，`Install-Package SignalR`它才是`using SignalR.Hubs;`.

第一个由 microsoft 支持，并从开源版本中分叉出来。

# ruby - dnode ruby 挂起

> ID：13853156
> 
> 赞同：1
> 
> 时间：2012-12-13T04:50:30.117
> 
> 标签：ruby, node.js, dnode

我有一个dnode的问题。我创建了一个 node.js 服务器，我想从 ruby​​ 调用一些节点函数。它有效，但连接挂起。所以我在 node.js 函数中放置了一些 console.log 来调试问题，我可以看到该函数被调用了 3 次（我称之为 3 次），但之后 ruby​​ 中的代码被阻止了。看这个：

```
dnode = DNode.new({}).connect(9293) do |remote, connection|
  remote.publish('123312', 'room', {:foo => 'bar'})
  remote.publish('123312', 'room', {:foo => 'bar'})
  remote.publish('123312', 'room', {:foo => 'bar'})
end

1000.times {Benchmark::dnode} 
```

正如你所看到的，我正在做一个基准测试。发布方法仅被调用 3 次（一次运行）而不是 30000 次，并且基准测试只是挂起。我正在寻找另一种语言的 dnode ，他们在这种情况下使用**remote.end** 但这个方法不是对象的一部分。

谢谢！

# exchange-server-2007 - Exchange 服务器：监控与 Web 服务的连接

> ID：13853159
> 
> 赞同：2
> 
> 时间：2012-12-13T04:50:53.457
> 
> 标签：exchange-server-2007

Exchange server 2007 是否有任何功能可以监控到 web 服务的连接数和数据信息？我确实为 Exchange Impersonation 创建了一个用户帐户。我想知道他们如何使用它。

# windows-phone-7 - 如何以编程方式检测 wp7 中的时间格式设置？

> ID：13853162
> 
> 赞同：0
> 
> 时间：2012-12-13T04:51:35.050
> 
> 标签：windows-phone-7

> **可能重复：**
> [确定是否设置了“24 小时制”设置](https://stackoverflow.com/questions/7313287/determine-if-24-hour-clock-setting-is-set)

我想在我的应用程序中添加 toast 提醒，我需要知道用户的手机是 12 小时还是 24 小时时间格式。有什么方法可以使用 C# 找出这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:14:51.703

您可以为您的任务使用 CultureInfo.CurrentCulture 属性。使用 12 小时时间格式的区域性与使用 24 小时格式（H:mm:ss 和 H:mm）的区域性具有不同的 LongTimePattern 属性 (h:mm:ss tt) 和 ShortTimePattern 属性 (h:mm tt)。使用这些属性，或 AMDesignator 和 PMDesignator 属性，它们表示具有 24 小时时间格式的区域性的空字符串，以及具有 12 小时时间格式的区域性的“AM”、“PM”。

# actionscript-3 - 如何将数据库表的选定项显示到同一数据库的空表中

> ID：13853164
> 
> 赞同：0
> 
> 时间：2012-12-13T04:51:38.077
> 
> 标签：actionscript-3, apache-flex, flex4.6

我有两个名为 Test 和 Save_Test 的表。Test 表有一列有五个值，而 Save_Test 表有一列没有值。我需要创建保存按钮，这样当我从 Test 表中选择一个值并单击时在保存按钮上，它应该存储在 Save_Test 表中。每次单击保存按钮时，以前存储在 save_Test 表中的值都应该替换为新选择的 Test 表值。这是我的代码。请帮忙。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" initialize="application1_initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.collections.ArrayList;
            import mx.events.FlexEvent;
            import mx.events.ValidationResultEvent;
            import mx.rpc.AsyncResponder;
            import mx.rpc.AsyncToken;
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;
            import mx.rpc.soap.WebService;
            private var web:WebService;
            private var list:ArrayList = new ArrayList();

            protected function application1_initializeHandler(event:FlexEvent):void
            {
                web = new WebService();
                web.wsdl = "https://www.geoviewer8.com/gv8webservices/CSF_NewGVOConfig/GVOConfig.asmx?wsdl";
                web.loadWSDL();
                var s:String = "SELECT * FROM [CSFTestNew].[dbo].[Test]";
                var t:AsyncToken = web.GetRec("[Test]", s, "1", "SQLExpress");
                t.addResponder(new AsyncResponder(onResult, onFault, t));
            }
            protected function onResult(event:ResultEvent, token:Object=null):void
            {
                if(event.result.GetRecResult.Tables != null)
                {
                    for each(var table:Object in event.result.GetRecResult.Tables)
                    {
                        for each(var row:Object in table.Rows)
                        {
                            list.addItem(row);

                        }
                    }
                }

            }

            protected function onFault(event:FaultEvent, token:Object=null):void
            {
                trace(event.fault.toString());
            }

            private function validate(event):void
            {
                var p:String = "INSERT INTO [CSFTestNew].[dbo].[Save_Test]([Areas]) VALUES ('Apple','Banana','Mango','Grapes','StrawBerry')";   
                /* var event:ValidationResultEvent = validate(); */
            } 

            protected function btn_click(event:MouseEvent):void
            {

            } 

        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:ComboBox id="cbareas" x="201" y="241" dataProvider="{list}" labelField="Areas"
                requireSelection="true" />
    <s:Button id="btn" x="417" y="243" label="Save" click="btn_click(event)" />   
</s:Application> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:33:59.880

虽然这可能有点晚了，但我刚刚看到您的问题，您的插入语句显示 5 个值且只有一个字段，您的值应该是“苹果、葡萄、橙子……”

本质上，您正在做的是尝试将 5 个不同的数据列放入一列，而 sql 不能那样工作。

我使用 sql 存储过程并通过冷融合调用它们，这样我就不会遇到任何潜在的 sql 注入问题。

您没有任何参数，并且通过 URL 使用字符串为 sql 注入攻击敞开了大门。

希望这可以帮助。

吉姆

# android - 推送项目失败。在安卓中

> ID：13853165
> 
> 赞同：6
> 
> 时间：2012-12-13T04:51:40.650
> 
> 标签：android, push, adb, sd-card

我在 ubuntu 12.04 上使用 android，我试图通过 eclipse[android] 提供的文件资源管理器在 sdcard 中推送大约 100kb 的图像。文件资源管理器显示 sdcard，当我尝试推送图像时，它显示错误

推送项目失败。无效的

我寻找了类似问题的解决方案，发现可以这样做：

```
adb push [filename] /sdcard/[filename] 
```

我在终端中执行了此操作，但它返回“未找到命令'adb'”并且它引用了其他命令。有大佬帮忙解决吗？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-25T21:55:01.187

如果您尝试使用内部 SD 卡，请确保您这样做：`/sdcard/`而不是`/sdcard`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-29T19:21:00.510

我多次遇到这个问题，但我没有意识到是什么原因。

*   第一个原因是您**连接了多个设备**，请确保只有您要推送文件的设备。

*   解决此问题的其他方法，请转到“设备”部分中的 DDMS 选择设备。选择您正在运行的模拟器，使其突出显示，转到右上角并单击“向下箭头”，选择**“重置 adb”**选项。

*   确保您的设备包含 SDCard。=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-05T14:48:30.543

我是这样解决的：

1.  断开我的手机与 USB 的连接，所以，只有我使用模拟器

2.  使用带有文件夹**storage/sdcard**而不是**/sdcard的****adb push**命令行，例如

     ****> D:\adt-bundle-windows-x86-20131030\sdk\platform-tools>adb push "d:\star.jpg" storage/sdcard**** 
*****   关闭模拟器并再次运行

    *   我检查了**Eclipse -> DDMS -> 文件资源管理器**选项卡，我看到了**storage/sdcard**文件夹中的图像**** 

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:58:26.793

您需要将`adb`可执行文件的路径添加到全局 PATH 环境变量中，您只需要：

```
export PATH=$PATH:<android-sdk-linux>/platform-tools/ 
```

只需替换`<android-sdk-linux>`为您的 Android SDK 实际副本的完整路径，您就可以了。

将导出命令添加到您的`~/.bashrc`，以将此命令保留在您的 PATH 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-11T21:03:11.417

搜索了许多帖子和答案，但没有一个有效。我想测试将图像上传到 Web 服务器并且它有效。
要推送 sdcard 中的任何文件 => 在 sdcard 中，创建任何文件夹，然后推送您的文件/媒体。这对我有用。希望它也适用于某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-08T06:12:22.353

我只是将数据线插头从一个换到另一个它就像我的魅力一样工作

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-13T04:56:08.320

要将项目推送到您的 SD 卡，请转到`[android-sdk]/platform-tools/`。

然后输入

```
./adb push [filename] /sdcard/ 
```

您的 AVD 必须包含 sdcard 才能执行此操作。****

# c# - 如何使用锯齿状数组记录这些图块的 x 和 y 轴？

> ID：13853166
> 
> 赞同：0
> 
> 时间：2012-12-13T04:51:47.760
> 
> 标签：c#, jagged-arrays

在我制作的游戏中，我有一个通过 XML 文件创建的关卡。该级别是使用嵌套的 for 循环绘制的。我正在尝试制作另一个嵌套的 for 循环来获取每个图块的位置并将其分配给锯齿状数组。我想这样做，这样我就可以对每个图块进行碰撞检测。

下面示例级别图片中的每个图块都是 20x20 像素，具有 30x30 个图块，屏幕分辨率为 600x600。这个关卡是用免费软件 Realm Factory 制作的，它缺乏文档，也没有真正的支持……但是，currentLevel.Rows 在这里等于 30，currentLevel.Columns 也一样。

以下是我到目前为止尝试创建的内容，但并不多。无论我怎么尝试，我的大脑都拒绝理解锯齿状数组。我什至无法弄清楚如何创建它们！

```
int a = 0;
int b = 0;
int x = 0;
int y = 0;
int[,] size = new int[currentLevel.Rows, currentLevel.Columns]'
int[,] pos = new int[600,600];
int[] tiles = new int[600];

for (a = 0; a < 600; a += 20, x++)
{
    for (b = 0; b < 600; b += 20, y++)
    {
        size[x][y] = ;
    }
} 
```

我要分配给tiles[x,y] 的是每个tile 的X 和Y 位置，所以我可以为每个tile 添加碰撞。

非常感谢任何可以帮助我的人。我喜欢编程，但我的数学和视觉空间技能不太好……

![在此处输入图像描述](../Images/cbc00d6ac78142a9bbdff1cb65afbba2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:34:20.587

位置是一个点（它有一个横坐标和一个纵坐标），而不是一个整数。此外，如果您有一个矩阵（瓷砖为 20x20，或像素为 600x600），为什么要尝试将其存储在锯齿状数组中？这就是多维数组的用途：

```
 var tileSize = 20;
        var screenSizeInTiles = 30;

        // initializing multidimensional array of points
        var tilePositions = new Point[screenSizeInTiles, screenSizeInTiles];

        for (var x = 0; x < screenSizeInTiles; x++)
        {
            for (var y = 0; y < screenSizeInTiles; y++)
            {
                tilePositions[x, y] = new Point(x * tileSize, y * tileSize);
            }
        } 
```

与*锯齿状*数组比较：

```
 // initializing jagged array of points
        var tilePositions = new Point[screenSizeInTiles][];
        for (var i = 0; i < screenSizeInTiles; i++)
        {
            // each item in a jagged array is a one-dimensional array of points.
            tilePositions[i] = new Point[screenSizeInTiles];
        }

        for (var x = 0; x < screenSizeInTiles; x++)
        {
            for (var y = 0; y < screenSizeInTiles; y++)
            {
                tilePositions[x][y] = new Point(x * tileSize, y * tileSize);
            }
        } 
```

如您所见，多维数组是一个实体，它保证每一行具有相同的大小，与其他行一样，列也是如此。

反过来，锯齿数组是数组的数组，其中每个成员（数组）可以有长度，这与其“邻居”的长度不同。

当然，您可以将矩阵表示为锯齿状数组，这将是特殊情况（锯齿状数组的所有成员将具有相同的长度），但这不太方便使用。

PS我从[这里](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)`Point`使用了结构。

# ios - APN 在 AppStore 构建中不起作用

> ID：13853168
> 
> 赞同：0
> 
> 时间：2012-12-13T04:51:53.347
> 
> 标签：ios, app-store, push-notification, apple-push-notifications

我们已经创建了使用 APN 的 iOS 应用程序。它在开发环境中运行良好。我们在开发环境中收到 APN 通知。但是在生产环境中（来自 AppStore），APN 没有得到。我们在网上发现了很多与此主题相关的问题。我们已经用这些检查点交叉检查了我们的应用程序。但现在的方式。下面给出了有关我们的应用程序和服务器的 APN 相关详细信息。

应用程序详细信息。

• 为APN 服务配置捆绑ID • 生成生产推送SSL 证书/开发推送SSL 证书 • 下载证书并成功安装在钥匙串上 • 然后将苹果分发推送证书和密钥导出为.p12 • 将.p12 文件转换为.p12 文件。 pem 并连接证书和密钥的 .pem 文件 • 将其安装在服务器 (gateway.push.apple.com) 的 2195 端口 • 在应用程序中，aps-environment 密钥以“生产”作为其值。

在检查设备上构建的 adhoc(distribution(ipa)) 的应用程序二进制文件时，通知注册成功，我们可以获得设备令牌。但没有在设备上收到任何通知警报。

我们生成的设备令牌是：612e0899 722d2e2f 06dad688 64089023 50d910d6 a3cc00ec bd798915 3efef503

服务器详细信息。

在服务器（提供者）中设置生产环境（gateway.push.apple.com），而不是沙盒环境（gateway.sandbox.push.apple.com）。我们的服务器是 ROR。我们正在使用[https://github.com/jpoz/APNS](https://github.com/jpoz/APNS) gem 来发送 APN。我们使用的端口是 2195。

任何人都可以帮助我们吗？我们被困在这里最后 4 天。在使用 APNs 中的实际生产环境上传之前，我们如何在 AppStore 中测试我们要上传的构建。这样我们就可以避免这样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:01:34.787

我有一个类似的问题，在我的情况下，解决方案真的很奇怪。看看这个答案：[https ://stackoverflow.com/a/12670448/679059](https://stackoverflow.com/a/12670448/679059)

# mysql - 使用 jdeveloper 使用 script.sql 创建图表（逆向工程）

> ID：13853170
> 
> 赞同：0
> 
> 时间：2012-12-13T04:51:55.133
> 
> 标签：mysql, sql, reverse-engineering, jdeveloper

我有我的数据库的 sql 脚本，但我需要编辑我的数据库，但我想知道可以在 JDeveloper 中使用 sql 脚本制作图表。（逆向工程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:26:04.750

您应该能够在 JDeveloper 中创建与 mySQL 的连接并将表拖到新的数据库图中。

# html - div标签的CSS背景颜色未填充所有轴

> ID：13853173
> 
> 赞同：1
> 
> 时间：2012-12-13T04:52:20.633
> 
> 标签：html, css

我在 css 设计中有一个很好的问题，我无法弄清楚如何解决它。

在这个论坛中也是同样的问题： ![在此处输入图像描述](../Images/8e65b4e18f19fab5d5d43eaeecf9e0d9.png)

我观察到标题背景在放大时并没有完全填满它的水平范围。下面是网站的缩小视图。

![在此处输入图像描述](../Images/c93478b75c0db43872e62bd62a67c80d.png)

在设计页眉和页脚背景时，这与我的情况非常相似。 ![在此处输入图像描述](../Images/12932c1050686ef1f11f2c1aa3f91f59.png)

我的 HTML 代码是：

```
<div id="footerBack">
        <div id="footer">
            <a href="#"><img src="images/eyecolor.png" alt="Eyecolor Icon" /></a>
            <ul>
                <li><a href="#" id="terms">Terms &amp; Service</a></li>
                <li><a href="#" id="privacy">Privacy Policy</a></li>
                <li><a href="#" id="news">News</a></li>
                <li><a href="#" id="footerAbout">About</a></li>
                <li><a href="#" id="footerContact">Footer</a></li>
           </ul>
           <p id="copyright">Copyright &copy; 2012 Jed Designs</p>
           <a href="#"><p id="email">Email: jedlovescpe@gmail.com</p></a>
        </div>
    <div id 
```

我的 CSS：

```
 /*Footer*/
#footerBack         {background: url(images/footerBack.jpg) repeat-x; height: 48px;  position: relative; top: -4px;};
#footer             {padding-top: 10px;}
#footer ul, #footer img
            {margin-top: 5px;}
#footer ul          {float: left; margin-left:160px; margin-top: 15px;}
#footer li a        {color: #d6b85e; padding: 7px; margin: 0 8px 0 8px; font: 11px Tahoma, Geneva, sans-serif;}
#footer li a:hover  {background:#d6b85e; color: #73401f;}
#footer img         {float: left;}
#footer #copyright, #footer #email      
            {float: right; color: #e5dca9; font: 10px "Trebuchet MS", Arial, Helvetica, sans-serif; margin-right: 12px;}
#footer #email      {margin-top: 2px;}
#footer #copyright  {margin-right: 20px; margin-top: 12px;} 
```

我将如何解决这个设计问题？:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:58:33.297

我无法在 IE9 的 stackoverflow 上重现该问题。在您提供的代码片段中，我也看不出有任何原因会发生这种情况（尽管可能还有其他原因）。

这很可能是您的计算机的问题。您是否有另一台手边的计算机可以尝试一下，只是为了消除可能的问题？

# javascript - 需要免费的 jQuery Slider 用于商业用途的内容和缩略图

> ID：13853174
> 
> 赞同：1
> 
> 时间：2012-12-13T04:52:20.803
> 
> 标签：javascript, jquery, slider, jquery-slider

我正在寻找与此 [链接](http://wowslider.com/jquery-image-scroller-prime-time-linear-demo.html)中显示的功能几乎相似的滑块。我已经找了一些，但大多数都不是免费的。如果有人可以将我指向一个滑块，该滑块与示例中显示的具有图像淡入淡出效果和将缩略图放在图像左侧或右侧的灵活性相似，我将不胜感激。

我还可以编写一个免费脚本，我可以对其进行更改以获得所需的结果。

![滑块](../Images/7d55df717818fd16cd463b4605fa81b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:57:02.207

我一直使用 jQuery [Cycle](http://jquery.malsup.com/cycle/)插件。

[在这里](http://jquery.malsup.com/cycle/pager2.html)，您可以看到如何使用它制作缩略图。

这很容易

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
}); 
```

而且真的很轻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:04:51.673

您可以从下载页面获得相同 WoW 滑块的免费版本：

[**下载**](http://wowslider.com/wowslider-free-setup.zip)

即使您想使用商业版。您可以在购买同一滑块时获得折扣

> ***** 停止！立减20元！ *******
> 
>  **立即订购 WOW Slider Unlimited 网站营业执照并节省 20 美元！20 美元的无限制网站许可折扣 注意：链接仅在 48 小时内有效。另请参阅许可证比较**

# iphone - 如何在城市飞艇和iTunes上设置或设置什么以进行inapp购买？

> ID：13853175
> 
> 赞同：1
> 
> 时间：2012-12-13T04:52:34.033
> 
> 标签：iphone, objective-c, ios, xcode, in-app-purchase

我是城市飞艇应用内购买的新手。我熟悉itunes的inapp购买。但我不知道城市飞艇的应用内购买。

我已经在城市飞艇上制作了应用程序（生产），并且我已经使用开发/生产密钥实现了用于购买 inapp 的代码。但我不知道如何在城市飞艇上设置或管理应用内购买。

我已经搜索了很多教程和文档来在城市飞艇上设置 inapp，但什么都没有。

请有人提供教程或文档的链接以在城市飞艇上设置 inapp。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:05:09.130

完整的教程集，将在urbanairship本身的网站上给出一步一步的过程。这是该链接[https://docs.urbanairship.com/display/DOCS/Exporting+Your+Push+Notification+Key](https://docs.urbanairship.com/display/DOCS/Exporting+Your+Push+Notification+Key) https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS %3A+Push#GettingStartediOSPush-3ObjCImplementation

# php - 是否可以使用 javascript 弹出窗口接受 php 中的输入

> ID：13853177
> 
> 赞同：0
> 
> 时间：2012-12-13T04:52:40.743
> 
> 标签：php, javascript

是否可以使用 javascript 弹出窗口来接受 PHP 中的输入

```
<script type="text/javascript">
<!--

function popup(){
var answer = prompt ("What is your name ?","")

    return answer
}
// -->
</script>

<?php 

$value = echo "popup()"; // error

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:54:51.867

是的，但可能不是你期望的那样。

在您的代码中，PHP 将在页面发送到浏览器之前在服务器上执行。该`popup()`函数只会在页面加载和用户输入后执行。

如果您通过 JS 提示进行输入，则必须向服务器上的 PHP 页面发出同步或异步请求。

检查[jQuery ajax 页面](http://api.jquery.com/jQuery.ajax/)以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:55:40.680

不是这样的。当页面加载并运行 JavaScript 时，PHP 已经完成。

但是，您可以获取该信息，而不是使用 AJAX 将其加载到页面中，对其进行处理，然后将其吐回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:22:18.300

当您在 .php 页面中嵌入代码时，还会有一些 html 和 javascript 代码。

当请求一个 php 页面时，它`<?php // Your Code ?>`会在服务器上执行，并且可能会或可能不会在该行输出一些 html。之后，整洁干净的 html 页面返回给浏览器。所以你的要求是不可能的。

如果你想这样做，那么你必须通过 AJAX 发送服务器请求。有关更多信息，请查看[Jquery](http://jquery.com)网站`AJAX`部分。

# javascript - onbeforeunload - 用户接受确认框后，javascript 不执行

> ID：13853178
> 
> 赞同：3
> 
> 时间：2012-12-13T04:52:42.587
> 
> 标签：javascript

我在 onbeforeunload 函数中有以下代码。

```
window.onbeforeunload = function(){
   if(ThereIsUnsavedWork)
   {
      return "Please save your work so it doesn't get lost.";
   }

   DoMoreStuff(); 
} 
```

在确认窗口之后，DoMoreStuff() 函数没有得到执行。有没有办法确保在用户接受确认窗口后执行 javascript 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:09:50.800

尝试`onbeforeunload`与以下一起使用`onunload`。

```
window.onbeforeunload = function(){
   if(ThereIsUnsavedWork)
   {
      return "Please save your work so it doesn't get lost.";
   }
}

window.onunload = function () {
    DoMoreStuff();
} 
```

# java - Android-Java SDK 方法调用 vs NDK 函数调用

> ID：13853179
> 
> 赞同：1
> 
> 时间：2012-12-13T04:52:43.597
> 
> 标签：java, android, performance, android-ndk

# 问题

当游戏将使用大量函数调用时，将 NDK 用于游戏开发是否更好？在 1000-10000 的范围内，至少可能...

# 情况

我正在编写一个游戏，我打算使用基于组件的设计在具有高级结构的 android 上运行，从而摆脱[上帝对象反模式](http://en.wikipedia.org/wiki/God_object)，因为我一直在阅读和听说你是如何使用游戏代码的永远不应该让一个 obj 被删除，这很好，但是我听说这会产生更多的函数调用，这也会影响你的表现。请参阅：[Google I/O 2009 - 为 Android 编写实时游戏](http://www.youtube.com/watch?v=U4Bk5rmIpic)

# 考试

```
protected static void voidFun(Integer i){
    if(i == 4) Log.d(TAG, "This should be impossible.");
}

public static void test(){
    stressTestMillis(1000);
    stressTestMillis(10000);
    stressTestMillis(100000);
}

protected static void stressTestMillis(int loops) {
    long beforeBefore = System.currentTimeMillis();
    long before = beforeBefore;
    for(int i = 0; i < loops; i++){
        //Just measuring raw loop time not function call time.
    }
    long rawLoop = System.currentTimeMillis() - before;
    Integer test = 0;
    before = System.currentTimeMillis();
    for(int i = 0; i < loops; i++){
        voidFun(test);
    }
    long loop = System.currentTimeMillis() - before;
    long total = System.currentTimeMillis() - beforeBefore;
    Log.d("Stress Test", "Loops:"+loops+" Loop:"+loop+" Loop Tare:"+rawLoop+" function Total:"+(loop-rawLoop)+" Total:"+total);
} 
```

### 结果

运行Test()的结果

```
12-12 18:30:22.623: D/Stress Test(15863): Loops:1000 Loop:14 Loop Tare:1 function Total:13 Total:15
12-12 18:30:22.703: D/Stress Test(15863): Loops:10000 Loop:80 Loop Tare:4 function Total:76 Total:84
12-12 18:30:23.513: D/Stress Test(15863): Loops:100000 Loop:783 Loop Tare:26 function Total:757 Total:809 
```

### 关注点

这让我非常担心，因为仅基于组件的设计 + AI（行为树）就是大量的函数调用，然后抛出物理，并且您查看大量方法调用并且很多时间 10000 已经超出范围......

通过我`1000ms/30fps=33.333ms`每帧的计算以及`10000`函数调用在`76ms`那时我已经超出预算并下降到`1000ms/76ms=13fps`

# 奖励积分

对于奖励积分，我是否看过一些可以让我在仍然使用 Java 的同时继续沿着这条设计路径的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:28:14.413

1.  老实说，我怀疑一个简单的循环或一个简单的片段能否指导您并帮助您决定哪种技术是最好的
2.  根据 Android 运行时设计/架构，使用 Java 或使用 NDK 进行编程实际上是一回事，这意味着对于 the`JVM`和`main()`函数，默认情况下为每个分配了 1 个线程，并且两者都是“沙盒”，没有直接访问权限资源；因此，如果您打算使用 NDK，并且您认为使用 C/C++，您将获得对硬件的低访问权限，就像在其他硬件/机器人解决方案上发生的情况一样，您错了。您甚至可以为您的应用程序获得基本相同的生命周期，并且使用 C/C++ 您可以使用的 API 更少。
3.  决定是关于可重用代码和将现有代码移植到 Android，速度提升不应该是您列表中的第一件事，而且很可能通过良好使用该语言来完成，因为使用 C/C++ 之类的语言您不需要没有垃圾收集器或任何形式的自动内存管理，您可以更精确地设置和引导您的资源，当然，您可以做某事的事实并不意味着您的程序会神奇地超越等效的 Java基于应用程序。
4.  在行业中，C++ 为王，所以如果你想在 iOS、Blackberry、Windows 8 等系统之间共享代码库，NDK 可以成为你进入 Android 世界的入口，这是你应该使用NDK，不是性能，而是对现有组件的重用。
5.  许多人只是忘记了 JNI 只是以两种方式工作，您可以从 C++ 调用 Java 方法，反之亦然，如果您使用 NDK 编程并创建一个仅 C++ 的应用程序，也称为本机活动，JVM 线程将始终分配，并且默认情况下您总是最终有 2 个线程用于您的 apk。
6.  有些事情在 Java 中比使用 C/C++ 容易得多，例如，尝试在 Java 中创建按钮和触摸事件的虚拟界面，然后尝试仅使用 NDK 做同样的事情。
7.  Android 显然倾向于大量使用 Java 语言以便更轻松地创建沙箱，我认为最终这是一个必要的邪恶，您可能最终会使用 JNI 以及 Java 线程和 C/C++ 线程.

# java - 将字符串转换为int或double？

> ID：13853181
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:53:02.320
> 
> 标签：java

```
import java.util.Scanner;

public class test1{
    public static void main(String[] args) {

       java.io.File test2 = new java.io.File("test3.txt");

       try
       {
           Scanner input = new Scanner(test2);
           while (input.hasNext()){
              String num = input.nextLine();
              System.out.println(num);
           }
       }  catch (Exception e){
        System.out.println("could not find file");
       }
    }
} 
```

我试图找出一种将字符串转换为int的方法。我正在输入一个看起来像 0000100001000010000001100000 的字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:26:00.993

Scanner 类具有转换为其他类型的功能，例如 int、double 等

**用于转换为整数**

```
Scanner input = new Scanner(test2);
 while(input.hasNext())
 {
  int num = input.nextInt();
  System.out.println(num);
 } 
```

**用于转换为 Double**

```
 Scanner input = new Scanner(test2);
     while(input.hasNext())
     {
      double num = input.nextDouble();
      System.out.println(num);
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:54:07.393

你可能想调查一下`Integer.parseInt()`。

可以在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)找到文档- 只需将您的`String`作为参数传递，您将获得一个`int`表示。

在您的情况下，您可能希望像这样使用它：

```
String num = input.nextLine();
int yourValue = Integer.parseInt(num); 
```

解析 a`double`将使用类似的方法 -`Double.parseDouble()`应该可以解决问题。

* * *

或者，如果您只是为了从文件中读取而计划使用此转换，那么使用`input.nextInt();`代替`input.nextLine();`可能很适合您！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:54:15.287

看一眼`Integer.parseInt()`

```
String num = input.nextLine();
int numInt = Integer.parseInt(num, 2); 
System.out.println(numInt); 
```

如果这意味着二进制数，则需要`2`用作第二个参数

> 0000100001000010000001100000

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T05:12:39.217

每件事都有一个限制，如果你`num`是`0000100001000010000001100000`，那么就无法将其转换为`int`. 您必须将其转换为`double or float`或减少您的， 如果您需要它`String`，尝试转换`int`会`Integer.parseInt(num)`抛出您，然后执行此操作， 请参阅原始数据类型[限制](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)`java.lang.NumberFormatException``double``Double.parseDouble(num)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:55:36.617

您想在特定情况下使用的是

```
Integer.parseInt(num); 
```

如果`num`是您要转换的字符串。考虑到您也要求转换为双精度，您必须将其转换为

```
Double.parseDouble(num); 
```

唯一的问题是，如果您仅测试 int 并且用户输入十进制数，则会引发异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T04:57:17.710

尝试这个

```
Scanner input = new Scanner(test2);
while (input.hasNext())
{
    String num = input.nextLine();
    try
    {
        long l = Long.parse(num);
        System.out.println(l);
    }
    catch(Exception ex)
    {
        System.out.println("Input string is not a number");
    }
} 
```

如果您的输入是二进制数并且您想以十进制形式显示它，您可以使用它：

```
long l = Long.parse(num, 2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T04:57:31.673

如果要将有效字符串转换为双精度字符串，一种方法是使用

```
double value=Double.parseDouble("1000.25"); 
```

# r - 错误：在 R 中找不到函数

> ID：13853184
> 
> 赞同：3
> 
> 时间：2012-12-13T04:53:20.090
> 
> 标签：r

> **可能重复：**
> [错误：在 R 中找不到函数...](https://stackoverflow.com/questions/7027288/error-could-not-find-function-in-r)

好吧，我是`rattle`（R中的数据挖掘包）概念的新手，虽然我已经安装`rattle`但是当我给出时`rattle()`，它给了我以下错误

```
> rattle()
Error in rattle() : could not find function "gtkBuilderNew" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T05:01:41.250

你读过错误信息吗？

`Error in rattle() : could not find function "gtkBuilderNew"`

该软件包`RGtk2`是显示 Rattle GUI 所必需的。它似乎没有安装。可以使用以下 R 命令安装此包（及其依赖项）：

```
install.packages('RGtk2') 
```

# php - php中获取域联系记录

> ID：13853191
> 
> 赞同：0
> 
> 时间：2012-12-13T04:53:56.033
> 
> 标签：php, whois

哪些 DNS 记录用于域所有者联系信息？如果没有这样的记录，那么我如何在 php 中获取所有者信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T05:00:05.460

对于大多数域，WHOIS 数据将包含您要查找的信息。（但是请注意，一些顶级域，例如`.to`，不要求所有者发布完整的 whois 记录，并且一些用户向公司支付“私人注册”费用，因此他们不需要包含他们的直接联系信息.)

您可以使用许多 PHP 库中的任何一个来查找 WHOIS 信息。

*   PHP Pear [Net_Whois](http://pear.php.net/package/Net_Whois)包可以做到这一点。
*   [phpWhois](http://www.phpwhois.org/)也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:06:05.947

联系信息不是 DNS 记录，而是[WHOIS](http://en.wikipedia.org/wiki/Whois)记录。

你想使用类似[http://www.phpwhois.org/的东西](http://www.phpwhois.org/)

# javascript - Angularjs：使用路由 - 自定义指令未编译或无法识别

> ID：13853202
> 
> 赞同：3
> 
> 时间：2012-12-13T04:54:52.523
> 
> 标签：javascript, angularjs

我有自定义指令，在调用/完成路由时不会在模板中更新。下面是代码：module.js

```
 angular.module('bookApp', [])
       .config(['$routeProvider', function($routeProvider) {
           $routeProvider.when('/bookList', {
             templateUrl: 'bookList.html',
             controller: BookCntrl
            })
            .otherwise({ redirectTo: '/' });
           }
        ])
        .directive('bookDialog', function(){
             return {
                restrict: 'A',
                replace: true,
                transclude: true,
                scope: { title:'@bookTitle' },
                template: '<div>' +
                      '<div class="title">{{title}}</div>' +
                      '<div class="body" ng-transclude></div>' +
                      '</div>'};
        });
    function BookCntrl($scope) {
           //todo
    }; 
```

在 bookList.html 我有

```
 <div book-dialog bookTitle="Computer Science">
        Description will come here
    </div> 
```

当我运行它并转到时`http://localhost:8080/bookApp/#/bookList`。它不会渲染/检测指令并且 ng-view 会更新，但自定义指令保持不变。

请帮我解决这个问题。可能是我没有得到它，我在代码中缺少什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:34:31.973

将您的模板文件更改为

```
<div book-dialog book-title="Computer Science">
    Description will come here
</div> 
```

请注意，而不是`bookTitle`你会写`book-title`

这是一个例子：http: [//jsfiddle.net/jaimem/6wmKy/](http://jsfiddle.net/jaimem/6wmKy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T14:52:37.903

将 HTML 中的“bookTitle”更改为“book-title”或“book:title”或“book_title”。

HTML 不区分大小写，但 Angular 是。

因此，即使您在 Angular 代码中编写“bookTitle”，用 HTML 编写它的含义与“booktitle”相同。

Angular 对元素的标签和属性名称进行规范化，以确定哪些元素与哪些指令匹配。规范化过程如下：

1.  从元素/属性的前面去除 x- 和 data-。
2.  将 :、- 或 _ 分隔的名称转换为 camelCase。

因此，Angular 为了自己的理解将“书名”转换为“书名”。

这是[文档中的参考](https://docs.angularjs.org/guide/directive)

# android - 地图不显示

> ID：13853205
> 
> 赞同：0
> 
> 时间：2012-12-13T04:55:10.260
> 
> 标签：android, google-maps

我在 android 中的简单谷歌地图有问题

这是我的 MapsActivity.java

```
package udin.MapsActivity;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class MapsActivity extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView 
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="00j2bA4ivSvH0cSDJJ4aiPiVCq_OSH0adwf6I2w"
        />

</RelativeLayout> 
```

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="udin.MapsActivity"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MapsActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:name="com.google.android.maps" />
    </application>

    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

当我运行它时，它在 DDMS 中没有错误

但是为什么地图没有这样显示

![谷歌地图](../Images/ce47a480b6c26785d98063af6015894c.png)

GoogleMap API 的代码是正确的...

昨天我尝试这段代码对我有用....但现在为什么这不起作用？

谁能帮忙？为什么会这样？如果你能帮助我，我将非常感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:44:07.120

尝试将 uses-permissions 标签放在清单文件中的应用程序上方。此外，我认为有时 Eclipse 和模拟器之间的签名会搞砸，重新启动两者有时可以解决问题。

# excel - 在 Excel 单元格中查找和格式化子字符串

> ID：13853212
> 
> 赞同：1
> 
> 时间：2012-12-13T04:55:51.817
> 
> 标签：excel

作为 Excel 编程的新手，我在网上搜索了一个函数/UDF/VBA，我可以在 Excel 中使用它来查找单元格中的子字符串并在此单元格中加粗/着色。

我下面有这种表。- A 列包含要部分格式化的文本， - B 列包含我要查找的子字符串， - C 列包含子字符串 (B) 在字符串 (A) 中的位置

```
 A          B         C
1  ABCDEFGHIJKLM   FGHI      6-9
2  NOPQRSTUVWXYZ   UVWXY     8-12
... 
```

这里我需要获得：

```
 A          B         C
1  ABCDE**FGHI**JKLM   FGHI      6-9
2  NOPQRST**UVWXY**Z   UVWXY     8-12
... 
```

是否可以将其应用于整列而不是仅行。

任何帮助或建议将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:13:46.563

```
' just add a loop and some checkings
Sub t()

Dim heightA As Long
Dim heightB As Long
Dim height As Long
Dim i As Long

heightA = Cells(Rows.Count, 1).End(xlUp).Row
heightB = Cells(Rows.Count, 2).End(xlUp).Row
If heightA < heightB Then
    height = heightA
Else
    height = heightB
End If

If height > 1 Then
    For i = 1 To height
        Range("A" & i).Font.Bold = False
        ''Replace the formula with the full string
        Range("A" & i) = Range("A" & i).Value
        'Find the starting position of the string in B within the string produced by the formula
        If Range("B" & i).Value <> "" Then
            myPos = InStr(1, Range("A" & i).Value, Range("B" & i).Value, 1)
            If myPos > 0 Then
                'Bold the string from B column
                Range("A" & i).Characters(myPos, Len(Range("B" & i).Value)).Font.Bold = True
            End If
        End If
    Next i
End If
End Sub 
```

**编辑**：使用 MASTER_STR、SUBSTR1、POS1(START-END)、SUBSTR2、POS2 等格式的 POSITION

```
Sub t()

Dim heightA As Long
Dim heightB As Long
Dim height As Long
Dim i As Long
Dim length As Long
Dim tmp
Dim width As Long
heightA = Cells(Rows.Count, 1).End(xlUp).Row
heightB = Cells(Rows.Count, 2).End(xlUp).Row
If heightA < heightB Then
    height = heightA
Else
    height = heightB
End If

If height > 1 Then
    For i = 1 To height
        Range("A" & i).Font.Bold = False
        ''Replace the formula with the full string
        Range("A" & i) = Range("A" & i).Value
        'Find the starting position of the string in B within the string produced by the formula
        width = Cells(i, Columns.Count).End(xlToLeft).Column
        If width >= 3 Then
            For j = 3 To width Step 2
            If Cells(i, j).Value <> "" Then
                    tmp = Split(Cells(i, j).Value, "-")
                    myPos = CLng(tmp(0))
                    length = CLng(tmp(1)) - myPos + 1
                    'myPos = InStr(1, Range("A" & i).Value, Range("B" & i).Value, 1)
                    If myPos > 0 Then
                        'Bold the string from B column
                        Range("A" & i).Characters(myPos, length).Font.Bold = True
                    End If
                End If
            Next j
        End If
    Next i
End If
End Sub 
```

**样本输入**

```
ABCDEFG A   1-1 C   3-5
ABCDEFG A   1-1 C   3-3 
```

# java - 需要澄清如何为以下代码添加动作侦听器

> ID：13853213
> 
> 赞同：0
> 
> 时间：2012-12-13T04:55:58.453
> 
> 标签：java, swing, awt, actionlistener

> **可能重复：**
> [如何在 Swing java 中的 JTable 行中添加按钮](https://stackoverflow.com/questions/1475543/how-to-add-button-in-a-row-of-jtable-in-swing-java)

如何添加动作侦听器以删除以下程序的相应行。我无法做到这一点...请给我发送说明..对于渲染器和编辑器中的按钮，我需要添加动作监听器..

```
public class TableSample7 extends DefaultTableModel {
private static final long serialVersionUID = 1L;
static int FRAME_WIDTH=800;
static int FRAME_HEIGHT=400;
int i=0;
JFrame frame=new JFrame("Sample");
Object data[][]={{"","","","Delete"}};
Object col[]={"Fname","Lname","Gender","Button"};
public DefaultTableModel model = new DefaultTableModel(data,col);
JTable table=new JTable(model);
JButton addButton=new JButton("Add");
public TableSample7(){
text(table,table.getColumnModel().getColumn(0));
text(table,table.getColumnModel().getColumn(1));
text(table,table.getColumnModel().getColumn(2));
table.getColumn("Button").setCellRenderer(new ButtonRenderer1());
table.getColumn("Button").setCellEditor(new ButtonEditor1(new JCheckBox()));
JTableHeader header=table.getTableHeader();
header.setLayout(new FlowLayout(FlowLayout.TRAILING,70,-5));
header.add(addButton);
addButton.addActionListener(new ActionListener(){
@Override
public void actionPerformed(ActionEvent e) {
i=i+1;
model.insertRow(i,new Object[]{"","","","Delete"});
}
});
header.setBounds(0, 0, 50, 25);
table.setRowHeight(100);
frame.setLayout(new BorderLayout());
frame.add(table.getTableHeader(),BorderLayout.PAGE_START);
frame.add(table,BorderLayout.CENTER);
frame.setSize(FRAME_WIDTH,FRAME_HEIGHT);
frame.setLocationRelativeTo(null);
frame.setVisible(true);
}
public void text(JTable table,TableColumn column){
JTextField txt=new JTextField();
txt.setSize(80,40);
column.setCellEditor(new DefaultCellEditor(txt));
DefaultTableCellRenderer renderer=new DefaultTableCellRenderer();
column.setCellRenderer(renderer);
}
public void check(JTable table,TableColumn column){
JCheckBox c1=new JCheckBox();
JCheckBox c2=new JCheckBox();
column.setCellEditor(new DefaultCellEditor(c1));
column.setCellEditor(new DefaultCellEditor(c2));
DefaultTableCellRenderer renderer=new DefaultTableCellRenderer ();
column.setCellRenderer(renderer);
}
public static void main(String args[]){
new TableSample7();
}
}
class ButtonRenderer1 extends JButton implements TableCellRenderer {
private static final long serialVersionUID = 1L;
public ButtonRenderer1() {
setOpaque(true);
}
public Component getTableCellRendererComponent(JTable table, Object value,
boolean isSelected, boolean hasFocus, int row, int column) {
setText((value == null) ? "" : value.toString());
return this;
}
}
class ButtonEditor1 extends DefaultCellEditor {
private static final long serialVersionUID = 1L;
protected JButton button;
private String label;
private boolean isPushed;
public ButtonEditor1(JCheckBox checkBox) {
super(checkBox);
button = new JButton();
button.setOpaque(true);
button.addActionListener(new ActionListener() {
@Override
public void actionPerformed(ActionEvent e) {
JTable table = (JTable) SwingUtilities.getAncestorOfClass(
JTable.class, (Component) e.getSource());
if (table != null) {
int row = table.getEditingRow();
((DefaultTableModel)table.getModel()).removeRow(row);    
table.getCellEditor().stopCellEditing();              
fireEditingStopped();
}
}});
}
@Override
public Component getTableCellEditorComponent(JTable table, Object value,
boolean isSelected, int row, int column) {
if (isSelected) {
button.setForeground(table.getSelectionForeground());
button.setBackground(table.getSelectionBackground());
} else {
button.setForeground(table.getForeground());
button.setBackground(table.getBackground());
}
label = (value == null) ? "" : value.toString();
button.setText(label);
isPushed = true;
return button;
}
@Override
public Object getCellEditorValue() {
if (isPushed) {
JOptionPane.showMessageDialog(button, label + ": Ouch!");
System.out.print(label);
// button.addActionListener(new ActionListener(){
}
isPushed = false;
return label;
}
@Override
 public boolean stopCellEditing() {
 isPushed = false;
 return super.stopCellEditing();
  }
 @Override
 protected void fireEditingStopped() {
 super.fireEditingStopped();
  }
  } 
```

# php - php中的数组推送

> ID：13853224
> 
> 赞同：1
> 
> 时间：2012-12-13T04:56:53.437
> 
> 标签：php, arrays

我有类似的代码流

```
 $titlecriteria=array();
 $title = new MongoRegex("/^$tag/i");                    
 $titlearray= array("title" => $title);
 array_push($titlecriteria,$titlearray); 
```

考虑我有两个标题，例如'abc'，'def'

如果我这样做，那么 $titlecriteria 将看起来像

```
 array(2) (
    [0] => array(1) (
   [title] => MongoRegex object {
    regex => (string) ^abc 
   flags => (string) i
     }
   )
   [1] => array(1) (
   [title] => MongoRegex object {
    regex => (string) ^def 
   flags => (string) i
     }
    )
  ) 
```

即该值在另一个数组中..我也尝试了array_merge()。由于键标题相同，它只需要最后一个值。我需要像这样的输出

```
array(2) (
 [title] => MongoRegex object {
  regex => (string) ^abc 
  flags => (string) i
 }
 [title] => MongoRegex object {
  regex => (string) ^def 
  flags => (string) i
 }
) 
```

即所有值都在同一个数组中。这可能吗？帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:06:55.980

如何在特定数组中使用两个相同的键名。

您可以直接将对象插入到数组中。

例如：

```
 $title=array();
  $obj1=new MongoRegex("/^$tag/i");
  $obj2=new MongoRegex("/^$tag/i");
  array_push($title,$obj1);
  array_push($title,$obj2); 
```

然后像这样访问：

```
 foreach($title as $obj){
   $obj; // Your MongoRegex Object 
 } 
```

# h2 - 大型物体的 H2 性能

> ID：13853226
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:56:56.073
> 
> 标签：h2

在我们的基准测试中，我们发现 H2 对于大型对象表现不佳。我们存储在 H2 中的对象是否有大小限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:49:45.943

只要您使用数据类型 CLOB / BLOB（或别名），那么就没有大小限制。

但至于性能问题，您需要提供有关您所做操作的更多信息。

# model-view-controller - 将路由器状态逻辑耦合到模型是否错误？

> ID：13853231
> 
> 赞同：1
> 
> 时间：2012-12-13T04:57:18.847
> 
> 标签：model-view-controller, coding-style, ember.js

举个例子：

```
Ember.Model.reopen({
  show: Ember.observer( function(){
    var target = this.get( 'showPath' ),
        waypoint = Ember.Route.transitionTo( 'root' ),
        destination = Ember.Route.transitionTo( target ),
        router = App.get( 'router' );

    waypoint( router );
    destination( router, this );
  })
});

App.Post.reopen({
  showPath: 'posts.show'
}); 
```

在这里，我们在模型上定义了一个 show 方法，该方法从当前状态转换到目的地，首先在根处停止。

我发现这使得与显示对象的简单任务相关的代码变得非常简单：

```
App.Post.find(1).show(); 
```

暂且不说这是否有用，我的问题是模型类与路由器的耦合非常明显。

我的问题是...

这有什么好担心的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:13:25.907

我的直觉是，这是错误的。当您考虑 Ember 应用程序的依赖关系图时，很明显路由器依赖于模型，因此模型不依赖于路由器会更好。

# c# - 在文本内容中发现无效字符。

> ID：13853232
> 
> 赞同：1
> 
> 时间：2012-12-13T04:57:20.007
> 
> 标签：c#, asp.net, xml, xml-parsing

> 在文本内容中发现无效字符。'。找不到句柄为 0 的预准备语句。 sp_xml_removedocument：为参数号 1 提供的值无效。

下面是我正在生成的 xml。

```
<NewDataSet>
<ControlManagementItems><ControlId>74</ControlId><Value>wqeqe</Value></ControlManagementItems>
<ControlManagementItems><ControlId>76</ControlId><Value>Yes</Value></ControlManagementItems>
<ControlManagementItems><ControlId>78</ControlId><Value>Consumer Core $100 infinite  – Nov 2010</Value></ControlManagementItems>
<ControlManagementItems><ControlId>108</ControlId><Value>Samsung Galaxy S 16GB</Value></ControlManagementItems>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:04:24.513

“Consumer Core $100 infinite – Nov 2010”行包含无效的 ASCII 字符，即“–”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T09:12:27.567

我知道这是一个旧帖子。但希望我所做的可以帮助其他人。我已将数据类型更改为 NVARCHAR，因为它允许比 VARCHAR 更多的字体系列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:41:37.657

我不知道你是否解决了这个问题，但我前几天也遇到了同样的问题。因为一些土耳其字符。

这是我的解决方案：

将该`<?xml version="1.0" encoding="utf-8" ?>`行放在我损坏的 xml 文件的顶部，并使用 notepad++ 更改土耳其语字符。放在第一行之后，**notepad++**会显示有问题的土耳其语字符（如 xOD），然后我将它们替换为 utf 字符。

# android - 在我的 iOS 项目中集成 Android 项目

> ID：13853239
> 
> 赞同：1
> 
> 时间：2012-12-13T04:57:46.687
> 
> 标签：android, ios, xcode, cocos2d-x

我必须使用**Cocos2dx开发****游戏**以实现**多平台**目的。是否可以将**Android**项目集成到我的**IOS 项目**中？我正在使用 xcode 4.2.1 来构建我的 iOS 项目。如果有人已经这样做了，请帮助我。提前谢谢:)

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:40:12.727

假设您已经准备好 eclipse 和 ADT、android-sdk、android-ndk。

基本步骤是

1.  首先使用 create-android-project.sh 创建一个 android 项目。
2.  将android项目导入eclipse（新建->项目->现有源的android项目）。对于 cocos2d 2.x
3.  使用与您的android项目相同的方式将cocos2d-x java lib导入到eclipse中。
4.  让你的 android 项目依赖 cocos2d-x java 项目。
5.  尝试首先在您的 android 设备上编译并运行它。

如果成功，

1.  将您的 android 项目文件夹移动到该教程中的指定位置。
2.  更改您的 android 项目文件夹中的 build_native.sh（更正 lib 路径、父文件夹等）
3.  删除您之前导入的 android 项目并再次从新位置导入项目。4.（重要）在eclipse中右键你的项目属性，让它依赖你之前导入的cocos2d-x java项目。

大致完成了。在这个过程中你可能会遇到一堆问题，但它们都是小问题，我想谷歌会解决大部分问题。******

# php - 如何将抓取数据插入mysql

> ID：13853240
> 
> 赞同：0
> 
> 时间：2012-12-13T04:57:47.193
> 
> 标签：php, mysql

我正在从其他网站获取数据，谁能告诉我如何将获取数据插入 mysql 数据库

下面的代码我用来获取结果

```
require_once('config.php');
    //Connect to mysql server
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if(!$link) {
    die('Failed to connect to server: ' . mysql_error());
}

//Select database
$db = mysql_select_db(DB_DATABASE);
if(!$db) {
    die("Unable to select database");
}

$urls = $_POST["urls"];
require_once('simple_html_dom.php');
$useragent = 'Googlebot/2.1 (http://www.googlebot.com/bot.html)';

foreach ($urls as $url) 
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 20);
    curl_setopt($curl, CURLOPT_USERAGENT, $useragent); 
    $str = curl_exec($curl);
    curl_close($curl);

    $html= str_get_html($str);
    foreach($html->find('span.price') as $e)
        echo  $e->innertext . '<br>';
}

//Create INSERT query
$qry = "INSERT INTO scrapdata(price) VALUES('$e')";
$result = @mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    echo ("Added Success");
}else {
    echo ("Not Added");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:33:56.177

试试这个：

```
$qry = "INSERT INTO scrapdata(price) VALUES('$e->innertext')"; 
```

或将 替换`innertext`为所需的值。

# android - 在安卓设备中隐藏应用程序

> ID：13853242
> 
> 赞同：4
> 
> 时间：2012-12-13T04:58:16.777
> 
> 标签：android

我想在安装后对用户隐藏应用程序。我知道从清单中删除这条线会起作用

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

但是我如何使用该应用程序，因为我在应用程序列表中看不到它。任何想法 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:14:36.703

由于您没有添加启动器类别，因此它无法在启动器中显示，就像隐藏在您的设备中的服务一样。然后你必须使用其他应用程序来启动它。您应该在您的应用程序中使用其他操作和类别注册意图过滤器。最常见的操作应该是 ACTION_VIEW 与 BROWSABLE 类别结合，然后您可以使用浏览器中的 url 或短信打开您的应用程序。意图过滤器应该是这样的：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="openmyapp"
                android:scheme="http" />
        </intent-filter> 
```

# python - 在 QTableView 中显示分层模型项的详细信息

> ID：13853243
> 
> 赞同：1
> 
> 时间：2012-12-13T04:58:20.757
> 
> 标签：python, qt, model-view-controller, qt4, pyqt

我正在使用**PyQt4**，并创建了一个基于 的层次模型`QAbstractItemModel`，它自然形成了一个严格的层次结构：

```
 - Study
  - Recording
   - Config 
```

该`study`项目是模型的根项目，`QTreeView`然后显示其下的记录项列表，以及它们的嵌套配置项。

当在`QTreeView`. 根据配置项的类型，要显示的元字段的数量会有所不同，因此我尝试将它们显示在`QTableView`.

该类`QDataWidgetMapper`似乎有助于这种类型的功能，但我一直无法找到一次显示多个字段的小部件的任何示例（即除了行编辑、组合框、复选框等）。代理模型似乎又是另一种潜在的路线，但我不确定如何通过这种方式根据选择显示模型的子集。

有人对我如何使用模型/视图框架来实现我的目标有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:50:12.307

我最终想出了一个使用多个代理模型的解决方案。

我在模型中添加了额外的列，过滤掉前三个包含的信息，以便在`QTreeView`使用`QSortFilterProxyModel`.

然后将选择模型链接到为每个模型项设置“选定”属性的方法。[受此博客文章启发的](http://lynxline.com/jongling-qt-models/)一个代理模型首先将树展平为具有相同顺序的类似表格的模型。然后另一个代理模型根据选择属性过滤行，另一个过滤器从上述扩展集中过滤非空列。

这会产生一个包含所需元信息的单行*表。为了将其显示为列，使用派生的附加代理模型`QAbstractProxyModel`通过将行映射到列来转置表，反之亦然。

[*这是单行，因为在给定时间只允许选择一个项目。]

# jquery - jQuery 对 ruby on rails 中的部分数据执行的默认操作

> ID：13853248
> 
> 赞同：9
> 
> 时间：2012-12-13T04:58:45.883
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2, nested-forms, getjson

我正在尝试以下操作。主窗体中的客户选择选项。当用户在主窗体中选择客户时，他的账单应该出现在所有后续部分中。

我正在使用 ryan bates 的 nested_form gem 来获取部分。代码如下。

```
<%= simple_nested_form_for @money_receipt do |f| %>

    <div class="customers"><%= f.collection_select :customer_id, Customer.all, :id, :name, options ={:prompt => "-Select a Customer"}, :style=>'width:210px;'%></div><br />
    /*rest of the code*/

    <%= f.link_to_add "Add line items", :money_receipt_line_items %> 
```

部分内

```
<div class="bill">
<%= f.collection_select :customer_bill_id, CustomerBill.all,:id,:id, {:prompt => "Select Customer bill"}, :style => 'width:202px;' %></div><br />

/*rest of the code*/ 
```

上面的jQuery代码如下

```
jQuery(document).ready(function(){
   jQuery(".customers select").bind("change", function() {
      var data = {
        customer_id: jQuery(this).val()  
      }
      jQuery.getJSON(
         "/money_receipts/get_bills",
        data, function(data){
      var result = "",a,x;
      var b = "<option>Select customer Bill</option>"
      for(i=0;i<data.length; i++)
      {
       a = data[i];
       result = result + "<option value="+a[0]+">"+a[0]+"</option>";
       console.log(result);
      }
     child=jQuery('.bill select').html(b+result);
    });
    });
  }); 
```

最后在我拥有的控制器中。def get_bills

```
 @bill_amount = CustomerBill.find_all_by_customer_id(params[:customer_id]).map{|bill| [bill.id]} if params[:customer_id]
    respond_to do |format|
      format.json { render json: @bill_amount }
    end
  end 
```

我试图过滤账单并放入 div id `bill`。现在，如果我`console.log`在 jQuery 代码中执行操作，我将获得 customer_id 和账单，但我无法发布它。如果我这样做`console.log`，`child`我会得到这样的输出`jQuery()`。我哪里错了？有没有更好的方法来实现上述目标？需要指导。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T05:49:59.193

我个人更喜欢将 HTML 放入部分而不是用 JS 代码绘制它的方式。

像这样：

`money_receipt.js:`

```
$('.customers select').change(function(){
  $.getScript('/money_receipts/get_bills?customer_id='+$(this).val())
}) 
```

`get_bills.js.erb:`

```
$('.bill select').html('<%=j render 'get_bills'%>') 
```

`_get_bills.html.erb:`

```
<% @bills.each do |bill| %>
<option value="<%=bill.id%>"><%=bill.title%></option>
<% end %> 
```

代码行数越少，出现错误的地方就越少。

# android - Android mapview（负着色）

> ID：13853250
> 
> 赞同：2
> 
> 时间：2012-12-13T04:58:48.710
> 
> 标签：android, android-mapview

我想在我的 android 应用程序中绘制一个圆形叠加层，我当然可以轻松地完成它并为其添加颜色。

但我真正想做的是保持圆圈透明，并用浅灰色遮蔽圆圈的外部（世界其他地方）。

我尝试将圆圈添加为路径，遮蔽世界并将圆圈剪掉，但我的设备上的圆圈周围有一个边界框（尽管它在模拟器上看起来不错）。

任何帮助表示赞赏。下面是一个代码片段：

public void draw(Canvas canvas, MapView mapView, boolean shadow) { super.draw(canvas, mapView, shadow);

```
 Projection projection = mapView.getProjection();

    Point pt = new Point();

    GeoPoint geo = new GeoPoint((int) (mLat * 1e6), (int) (mLon * 1e6));

    projection.toPixels(geo, pt);
    float circleRadius = projection.metersToEquatorPixels(mRadius)
            * (1 / FloatMath.cos((float) Math.toRadians(mLat)));

    Paint innerCirclePaint;

    innerCirclePaint = new Paint();
    innerCirclePaint.setColor(Color.TRANSPARENT);
    innerCirclePaint.setAlpha(35);
    innerCirclePaint.setAntiAlias(true);
    innerCirclePaint.setStyle(Paint.Style.FILL);

    Path path = new Path();
    path.setFillType(Path.FillType.WINDING);
    path.addCircle((float) pt.x, (float) pt.y, circleRadius, Path.Direction.CCW);canvas.drawPath(path, innerCirclePaint);
    canvas.drawARGB(150, 0, 0, 0 );
    canvas.clipPath(path);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:07:27.947

```
paint.setColor(Color.parseColor ("#88ff0000")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T17:33:33.110

尝试

```
path.setFillType(Path.FillType.INVERSE_WINDING); 
```

代替

```
path.setFillType(Path.FillType.WINDING); 
```

我尝试了普通图像，这个补丁对我有用

```
 Canvas canvas = new Canvas(bitmap);
    Paint innerCirclePaint;

    innerCirclePaint = new Paint();
    innerCirclePaint.setColor(Color.parseColor ("#88ff0000"));
    innerCirclePaint.setAlpha(35);
    innerCirclePaint.setAntiAlias(true);
    innerCirclePaint.setStyle(Paint.Style.FILL);

    Path path = new Path();
    path.setFillType(Path.FillType.INVERSE_WINDING);
    path.addCircle(150, 150, 150, Path.Direction.CCW);

    canvas.drawPath(path, innerCirclePaint);
    canvas.drawARGB(0, 0, 0, 0 );
    canvas.clipPath(path); 
```

甚至 clipPath 也可能是一个原因

[解决 android 不再支持的 Canvas.clipPath()](https://stackoverflow.com/questions/8895677/work-around-canvas-clippath-that-is-not-supported-in-android-any-more)

# python - 我可以在 django 中将所有通用视图合并到一个视图中吗

> ID：13853256
> 
> 赞同：0
> 
> 时间：2012-12-13T04:59:30.920
> 
> 标签：python, django

在我的普通应用程序中。我的views.py文件中每个模型都有这六个视图

```
Class SampleCreateView(CreateView)
     pass

Class SampleDetailView(DetailView)
     pass

Class SampleUpdateView(UpdateView)
     pass

Class SampleListView(listView)
     pass

Class SampleFormView(FormView)
     pass

Class SampleDeleteView(DeleteView)
     pass 
```

有什么简单的方法可以让我拥有一个视图并执行所有这些功能。通过使用一些if else。

或者还有其他更好的解决方案。

每个模型一个视图会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:51:08.360

通常编写不同的视图以便彼此分离。您可以编写一个传递参数的函数，以便您可以区分使用相同的内容并执行所需的操作。此外 Django 还提供了一些内置视图。您可能想查看 django.views.generic 的教程。您已经定义了可以使用的视图，例如 CreateView、DetailView 等。

# c++ - 我们如何区分实际类型和表面类型？

> ID：13853257
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:59:33.527
> 
> 标签：c++

如果您有一个类层次结构，并且您想确定对象指向的实际类型是什么，那么答案是否只是该对象的任何子类？如果对象是一个抽象类，您是否仍然可以声明该对象的指针，该指针是明显的并且实际类型是该对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:12:35.717

如果您想在运行时找出对象的类型（派生的或基础的），您可以使用 RTTI typeid 运算符来实现。

# mysql - 如何在mysql中执行String然后插入临时表？

> ID：13853258
> 
> 赞同：5
> 
> 时间：2012-12-13T04:59:54.090
> 
> 标签：mysql, select, prepared-statement

我想将动态查询的结果插入临时表或将此结果用作表的方法。例如 ：

```
declare str varchar(2000);
set @str="select 
       from
        `cdr` ";
 PREPARE stmt1 FROM @str;
  EXECUTE stmt1; 
```

现在我想执行这样的查询

```
 select * from stmt1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:04:20.297

**编辑：**试试下面的代码：

```
DECLARE str VARCHAR(2000);
SET @str="CREATE TEMPORARY TABLE tempTable1 select * from `cdr` ";
PREPARE stmt1 FROM @str;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1;

SELECT * FROM tempTable1;
-- Code what you want to work on temptable1 
DROP TABLE tempTable1; 
```

**原始答案：**首先创建临时表，然后使用以下代码：

```
DECLARE str VARCHAR(2000);
SET @str="insert into tempTable select * from `cdr` ";
PREPARE stmt1 FROM @str;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

然后你可以像这样执行查询：

```
SELECT * FROM tempTable; 
```

# c++ - IDropTarget::Drop 方法挂钩

> ID：13853260
> 
> 赞同：2
> 
> 时间：2012-12-13T04:59:58.087
> 
> 标签：c++, com, api-hook

我正在尝试挂钩 IDropTarget::Drop COM 方法，但我不是，在此之前我正在挂钩 IFileOperation::RenameItems 方法，它工作正常，对于 RenameItems 挂钩，我使用了以下代码..

```
#include "stdafx.h"
#include <windows.h>
#include "MinHook.h"
#include <Winternl.h>
#include <stdio.h>
#include <shlwapi.h>
#include <tchar.h>
#include <string.h>
#include <psapi.h>
#include <strsafe.h>
#include <Shobjidl.h>
#include <Shellapi.h>   
#include <Shlguid.h>

#if defined _M_X64
#pragma comment(lib, "libMinHook.x64.lib")
bool __is32bitMachine = false ;
#elif defined _M_IX86
#pragma comment(lib, "libMinHook.x86.lib")
bool __is32bitMachine = true;
#endif

PVOID GetInterfaceMethod(PVOID intf, DWORD methodIndex)
{
if (__is32bitMachine)
    return *(PVOID*)(*(DWORD_PTR*)intf + methodIndex * 4);
else
    return *(PVOID*)(*(DWORD_PTR*)intf + methodIndex * 8);
}

typedef HRESULT (STDMETHODCALLTYPE *RenameItemsNext)(IFileOperation *pThis, IUnknown *pUnkItems, LPCWSTR pszNewName);
 RenameItemsNext Real_RenameItems = NULL;
 RenameItemsNext Actual_RenameItems ;

HRESULT STDMETHODCALLTYPE RenameItemsCallback(IFileOperation *pThis, IUnknown *pUnkItems, LPCWSTR pszNewName)
{
IID IID_ShellItemArray; 
IID IID_DataObject; 
CLSIDFromString(L"{b63ea76d-1f85-456f-a19c-48159efa858b}", &IID_ShellItemArray);
CLSIDFromString(L"{0000010E-0000-0000-C000-000000000046}", &IID_DataObject); 

void *shellItemArray;
void *dataObject;
LPWSTR dstFN;

if (pUnkItems->QueryInterface(IID_ShellItemArray, &shellItemArray) == S_OK)
{
    DWORD numItems = 0;
    IShellItem *shell;
    IShellItemArray *pItems = (IShellItemArray *) pUnkItems;
    pItems->GetCount(&numItems);
    for (int i = 0; i < numItems; i++)
    {
        pItems->GetItemAt(i, &shell);
        shell->GetDisplayName(SIGDN_FILESYSPATH, &dstFN);
        MessageBoxW(NULL, dstFN, L"Renamed From", MB_OK);
    }
    MessageBoxW(NULL, pszNewName, L"Renamed To", MB_OK);
}

if (pUnkItems->QueryInterface(IID_DataObject, &dataObject) == S_OK)
{
    Real_SHCreateShell = (SHCreateShellNext)GetProcAddress(LoadLibraryA("shell32.dll"), "SHCreateShellItemArrayFromDataObject");
    if (Real_SHCreateShell != NULL)
    {
        if (Real_SHCreateShell((IDataObject*)dataObject, IID_ShellItemArray, &shellItemArray) == S_OK)
        {
            DWORD numItems = 0;
            IShellItem *shell;
            IShellItemArray *pItems = (IShellItemArray *)shellItemArray;
            pItems->GetCount(&numItems);
            if (pItems->GetCount(&numItems) == S_OK)
            {
                for (int i = 0; i < numItems; i++)
                {
                    if (pItems->GetItemAt(i, &shell) == S_OK)
                    {
                        shell->GetDisplayName(SIGDN_FILESYSPATH, &dstFN);
                        MessageBoxW(NULL, dstFN, L"Renamed From", MB_OK);
                    }
                }
            }
        }
    }
    MessageBoxW(NULL, dstFN, L"Renamed To", MB_OK);
}
return Real_RenameItems(pThis, pUnkItems, pszNewName);
}

typedef HRESULT (WINAPI *COCREATEINSTANCE)(REFCLSID, LPUNKNOWN, DWORD, REFIID, LPVOID*);
COCREATEINSTANCE Real_CoCreateInstance = NULL;  

HRESULT WINAPI CoCreateInstanceCallback(REFCLSID rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, REFIID riid, LPVOID *ppv)
{
const char *IFileOperation_GUID = "{3AD05575-8857-4850-9277-11B85BDB8E09}";
char GUIDString[64];

HRESULT HR = Real_CoCreateInstance(rclsid, pUnkOuter, dwClsContext, riid, ppv);

sprintf_s(GUIDString, 64, "{%08X-%04X-%04X-%02X%02X-%02X%02X%02X%02X%02X%02X}\0",
    rclsid.Data1, rclsid.Data2, rclsid.Data3,
    rclsid.Data4[0], rclsid.Data4[1],
    rclsid.Data4[2], rclsid.Data4[3],
    rclsid.Data4[4], rclsid.Data4[5],
    rclsid.Data4[6], rclsid.Data4[7]);

if (strcmp(GUIDString, IFileOperation_GUID) == 0)
{       
    if(Real_RenameItems == NULL)
    {
        Actual_RenameItems = (RenameItemsNext) GetInterfaceMethod(*ppv, 13);

        if (MH_CreateHook(Actual_RenameItems, &RenameItemsCallback, reinterpret_cast<void**>(&Real_RenameItems)) != MH_OK)
        {
            MessageBoxW(NULL, L"Failed CreateHook Real_RenameItems", L"Info!", MB_ICONWARNING|MB_OK);
        }
        if (MH_EnableHook(Actual_RenameItems) != MH_OK)
        {
            MessageBoxW(NULL, L"Failed EnableHook Real_RenameItems", L"Info!", MB_ICONWARNING|MB_OK);
        }
    }
}
return HR;
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
    if (MH_Initialize() != MH_OK)
    {
        MessageBoxW(NULL, L"Failed Initialize", L"Info!", MB_ICONWARNING|MB_OK);    
    }
    if (MH_CreateHook(&CoCreateInstance, &CoCreateInstanceCallback, reinterpret_cast<void**>(&Real_CoCreateInstance)) != MH_OK)
    {
        MessageBoxW(NULL, L"Failed MH_CreateHook CoCreateInstance", L"Info!", MB_ICONWARNING|MB_OK);
    }
    if (MH_EnableHook(&CoCreateInstance) != MH_OK)
    {
        MessageBoxW(NULL, L"Failed MH_EnableHook CoCreateInstance", L"Info!", MB_ICONWARNING|MB_OK);
    }
    break;

case DLL_PROCESS_DETACH:
    if (MH_Uninitialize() != MH_OK)
    {               
    }
    if (MH_DisableHook(Actual_RenameItems) != MH_OK)
    {
    }
    if (MH_DisableHook(&CoCreateInstance) != MH_OK)
    {
    }
    break;
}
return TRUE;
 } 
```

上面的代码对于 IOFileOperation::RenameItems 工作正常，我正在尝试为 IDropTarget::Drop 方法实现相同的代码，但是发生的是 CoCreateInstance 函数本身没有调用 Drop 操作，所以任何人都可以帮助我如何实现这个 IDropTarget::Drop Hooking .......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:38:03.957

通常 IDropTarget 在客户端应用程序内部实现并通过 RegisterDropTarget 调用进行注册。尝试挂钩 RegisterDropTarget 函数，可能有帮助

**更新**：实际上函数名称是 RegisterDragDrop

# wordpress - 如何将 rel="no-follow" 添加到 wordpress paginate_links()

> ID：13853262
> 
> 赞同：1
> 
> 时间：2012-12-13T05:00:14.243
> 
> 标签：wordpress, pagination

需要帮忙。
我想将 rel="nofollow" 标签添加到我的网站主题中显示的分页链接。
我正在使用此功能来使用分页。

```
<?php
    $paged1 = isset( $_GET['paged1'] ) ? (int) $_GET['paged1'] : 1;
    $pag_args1 = array(
        'format'  => '?paged1=%#%',
        'current' => $paged1,
        'total'   => $query1->max_num_pages,
        'prev_text'    => __('&laquo; Prev'),
        'next_text'    => __('Next &raquo;'),
        'add_args' => array( 'paged2' => $paged2 )
    );
    echo paginate_links( $pag_args1 );
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T05:37:48.660

Wordpress 不公开任何过滤器来修改或添加 HTML 属性到`<a>`由`paginate_links`. 幸运的是，该函数返回的链接非常简单和标准，因此字符串替换应该可以解决问题：

```
$links = paginate_links($args);
// $links is a string like '<a href="..">..</a> <a href="..">..</a>'
$links = str_replace('<a ', '<a rel="nofollow" ', $links);
// $links is now a string like '<a rel="nofollow" href="..">..</a> <a rel="nofollow" href="..">..</a>' 
```

# android - 错误的身份验证数据 215 - Twitter4J 2.2.6

> ID：13853264
> 
> 赞同：0
> 
> 时间：2012-12-13T05:00:23.497
> 
> 标签：android, twitter, twitter4j

我最近在 GooglePlay 中发布我的应用后遇到了这个问题。似乎 Twitter 更改了他们的 API 或配置，但没有遗留兼容性。我正在使用 Twitter4J 2.2.6。这是有关此问题的参考链接，但没有解决方案。[https://dev.twitter.com/discussions/12782](https://dev.twitter.com/discussions/12782)

```
12-13 11:54:53.872: W/System.err(6576): 400:The request was invalid. An accompanying error message will explain why. This is the status code that will be returned during rate limiting (https://dev.twitter.com/pages/rate-limiting).
12-13 11:54:53.872: W/System.err(6576): {"errors":[{"message":"Bad Authentication data","code":215}]}
12-13 11:54:53.872: W/System.err(6576): Relevant discussions can be found on the Internet at:
12-13 11:54:53.872: W/System.err(6576):     http://www.google.co.jp/search?q=6f0f59ca or
12-13 11:54:53.872: W/System.err(6576):     http://www.google.co.jp/search?q=3bea4a0a
12-13 11:54:53.872: W/System.err(6576): TwitterException{exceptionCode=[6f0f59ca-3bea4a0a], statusCode=400, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.6}
12-13 11:54:53.872: W/System.err(6576):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:185)
12-13 11:54:53.872: W/System.err(6576):     at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
12-13 11:54:53.872: W/System.err(6576):     at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:93)
12-13 11:54:53.872: W/System.err(6576):     at twitter4j.TwitterBaseImpl.fillInIDAndScreenName(TwitterBaseImpl.java:135)
12-13 11:54:53.872: W/System.err(6576):     at twitter4j.TwitterImpl.verifyCredentials(TwitterImpl.java:1084)
12-13 11:54:53.872: W/System.err(6576):     at app.jp.cropnet.twitter.TwitterApp$3.run(TwitterApp.java:255) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:12:04.717

尝试使用 twitter4j 2.1.1 而不是 2.2.6 这个版本有一些问题或者看看这个[教程](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)使用 2.2.6 并且它工作得很好

# scala - 如何测试Scala组合解析器是否匹配字符串

> ID：13853266
> 
> 赞同：1
> 
> 时间：2012-12-13T05:00:38.837
> 
> 标签：scala, parser-combinators

我有一个处理逗号分隔的十进制数列表的 Scala 组合器解析器。

```
object NumberListParser extends RegexParsers {
  def number: Parser[Double] = """\d+(\.\d*)?""".r ^^ (_.toDouble)

  def numbers: Parser[List[Double]] = rep1sep(number, ",")

  def itMatches(s: String): Boolean = parseAll(numbers, s) match {
    case _: Success[_] => true
    case _ => false
  }
} 
```

当给定与模式匹配的字符串时，该`itMatches`函数返回。`true`例如：

```
NumberListParser.itMatches("12.4,3.141") // returns true
NumberListParser.itMatches("bogus") // returns false 
```

有没有更简洁的方法来做到这一点？我在文档中找不到，但我的函数看起来有点冗长，所以我想知道我是否忽略了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:38:23.283

您可以使用[JavaTokenParsers](http://www.scala-lang.org/api/current/index.html#scala.util.parsing.combinator.JavaTokenParsers)并从中受益`decimalNumbers`

```
object NumberListParser extends JavaTokenParsers {
  def number: Parser[Double] = decimalNumbers ^^ (_.toDouble)
  def numbers: Parser[List[Double]] = rep1sep(number, ",")
  def itMatches(s: String): Boolean = parseAll(numbers, s) match {
    case _: Success[_] => true
    case _ => false
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T17:37:49.507

我想我应该添加我的评论作为答案，因为它就是答案。您可以使用专门为此目的设计的`successful`on 方法：[`ParseResult`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/Parsers%24ParseResult.html)

```
import scala.util.parsing.combinator._

object NumberListParser extends RegexParsers {
  def number = """\d+(\.\d*)?""".r ^^ (_.toDouble)
  def numbers = rep1sep(number, ",")

  def itMatches(s: String): Boolean = parseAll(numbers, s).successful
} 
```

这给出了与您的实现完全相同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:54:57.617

你可以`itMatches`这样定义：

```
def itMatches(s: String): Boolean = parseAll(numbers, s).map{ r => true }.getOrElse(false) 
```

你不需要解析器。`Regex`足够：

```
var R = """\d+(\.\d*)?(,\d+(\.\d*)?)*""".r
def itMatches(s: String) = s match {
  case R(_*) => true
  case _ => false
}

scala> itMatches("12.4,3.141")
res0: Boolean = true

scala> itMatches("bogus")
res1: Boolean = false 
```

# ruby-on-rails - 在 application_controller.rb 中使用 appliciaton_controller.rb 中定义的方法

> ID：13853267
> 
> 赞同：0
> 
> 时间：2012-12-13T05:00:39.973
> 
> 标签：ruby-on-rails, ruby

我想根据当前用户是否是管理员来更改我的布局。所以我做了一个简单的方法来检查当前用户是否是管理员，然后我在应用程序控制器中调用该方法。我不断收到以下错误：

```
undefined method `is_admin?' for ApplicationController:Class 
```

我的代码如下所示：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper_method :current_user, :is_admin?

  if is_admin?
   layout 'admin'
  end

  .....

  protected

  .....

  def is_admin?
    if current_user.user_role == 'admin'
      return true
    end
  end

end 
```

我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:05:35.773

您当前拥有它的方式`is_admin?`是在加载类时运行，并且在类范围内执行（因此是异常，因为它不是类方法）。在请求过程中，您需要在实例方法中检查管理员状态。

要做你想做的事情，你可以让布局调用一个实例方法，例如

```
layout :determine_layout

protected

# return "admin" for the layout if `is_admin?`, otherwise "application"
def determine_layout
  is_admin? ? 'admin' : 'application'
end 
```

编辑：一些可能有用的链接：

*   [http://ruby-doc.org/core-1.9.3/Class.html](http://ruby-doc.org/core-1.9.3/Class.html)
*   [http://ruby-metaprogramming.rubylearning.com/html/seeingMetaclassesClearly.html](http://ruby-metaprogramming.rubylearning.com/html/seeingMetaclassesClearly.html)

# java - java - 如何在java中考虑非素数0和1？

> ID：13853268
> 
> 赞同：-3
> 
> 时间：2012-12-13T05:00:43.323
> 
> 标签：java, for-loop, numbers, zero, modulus

我不确定这是否是问这个问题的正确地方，但我一直在自己寻找解决方案已经有一段时间了，所以希望我来对地方了。

在计算素数时，每个数必须被 2 整除的起始数是非素数。在我的java程序中，我想包含0到某个数字范围内的所有非质数，那么如何包含0和1呢？我是否应该为 0 和 1 分别设置 if 和 else-if 语句来声明它们不是素数？我认为也许 0 和 1 应该包含在 java for 循环中，但我不知道该怎么做。

```
for (int i = 2; i < num; i++){
        if (num % i == 0){
            System.out.println(i + " is not a prime number. ");
        }
        else{
             System.out.println(i + " is a prime number. ");
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:06:29.347

你的程序不正确。如果数字 = 91。然后这个程序打印 91 是素数 5 次（2 到 6）然后它打印它不是素数。

```
boolean prime =true.
for (int i = 2; i <= Math.sqrt(num); i++){// less than equal to sqrt num is good enough.
        if (num % i == 0){
            prime=false;
            break; // no more checks needed
   }    
}
if (prime && (num>1)){ // to cover case of num=0 and num=1
     System.out.println(i+" is Prime");
}
else{
     System.out.println(i+" is NOT Prime");
} 
```

是的，我认为您应该将 1 和 0 作为单独的案例包括在内。但是请注意，1 和 0 既不是质数也不是合数。所以考虑到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:35:48.863

打印 n Prime no 的完美输出

```
double i,j;

    for ( i = 2; i <= num; i++){
        boolean prime =true;
        for(j= 2; j<= Math.sqrt(i); j++)
        {// less than equal to sqrt num is good enough.
            if (i % j == 0){

                prime=false;
                break; // no more checks needed
       }    

        }
            if (prime && (i>1)){ // to cover case of num=0 and num=1
                 System.out.println(i+" is Prime");

            }
            else{
                 System.out.println(i+" is NOT Prime");
    }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:05:17.707

我会直接处理它们，而不是试图让它们适应你的正常流程，因为你知道它们总是会是什么。

如果你真的想要它们在你的循环中，你可以这样做：

```
for (int i = 0; i < num; i++){
    if (i > 1 && num % i == 0){
        System.out.println(i + " is not a prime number. ");
    }
    else{
         System.out.println(i + " is a prime number. ");
    }
} 
```

从零开始，如果你高于 1，只需添加一个检查，这样它们就在循环中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:08:24.250

来自维基百科：

> 素数（或素数）是大于 1 的自然数，除了 1 和它本身之外没有正除数。

也足以检查 not until `num`，但是`sqrt(num)`

```
for (int i = 0; i <= (int)Math.sqrt(num); i++){// i=sqrt(num) has to be checked 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T05:11:29.763

为了坚持你的基本算法，我会这样做：

```
boolean maybePrime = num > 1;
int limit = (int) Math.sqrt(num);
for (int i = 2; maybePrime && i < limit; ++i) {
    maybePrime = num % i != 0;
}
if (maybePrime) {
    System.out.println(num+" is a prime number");
} else {
    System.out.println(num+" is not a prime number");
} 
```

但是，这不是很有效。您可能想考虑使用[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

# ruby-on-rails - 如何为 ActiveRecord 模型定义模式？

> ID：13853276
> 
> 赞同：1
> 
> 时间：2012-12-13T05:01:30.320
> 
> 标签：ruby-on-rails, activerecord

我只能在迁移时找到如何定义列。

但是我不需要迁移我的模型。

我想“虚拟地”使用它。

AR 是否仅从 db 读取列数据？

有什么方法可以定义像 DataMapper 中的列？

```
class Post
  include DataMapper::Resource

  property :id,        Serial 
  property :title,     String
  property :published, Boolean
end 
```

现在我可以在没有迁移/连接的情况下使用我的模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:05:08.687

在 Rails 中，您不需要在模型上定义属性。它们将从数据库中反映出来。只需确保为要使用的表创建模型。但是，您需要告诉 ActiveRecord 如何创建模型之间的关系。有关创建关系的信息，请查看： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。

如果您不使用 Rails 的`id`主键约定，则可以通过设置主键`set_primary_key :your_key`（尽管已弃用）。如果您不遵循 Rails 命名表的约定，即小写、蛇形、复数表名，您可以通过`set_table_name 'your_table'`.

# android - 使用编辑文本和按钮将数据存储在数据库中

> ID：13853279
> 
> 赞同：0
> 
> 时间：2012-12-13T05:01:51.500
> 
> 标签：android, android-layout, android-widget, android-sqlite

您好我正在尝试使用我创建的 EditText 和 Button 将数据插入数据库。我被困在代码的活动部分。我无法继续如何编写`Onclick action`Button 和 EditText 部分的部分请帮助我。我是安卓新手

DBAdapter.java

```
package com.example.database1;

public class DBAdapter 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_ISBN = "isbn";
    public static final String KEY_TITLE = "title";
    public static final String KEY_PUBLISHER = "publisher";    
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "books";
    private static final String DATABASE_TABLE = "titles";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table titles (_id integer primary key autoincrement, "
        + "isbn text not null, title text not null, " 
        + "publisher text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(String isbn, String title, String publisher) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_ISBN, isbn);
        initialValues.put(KEY_TITLE, title);
        initialValues.put(KEY_PUBLISHER, publisher);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_ISBN,
                KEY_TITLE,
                KEY_PUBLISHER
            }, 
            null, 
            null, 
            null, 
            null, 
            null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException 
    {
        Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {
                                KEY_ROWID,
                                KEY_ISBN, 
                                KEY_TITLE,
                                KEY_PUBLISHER
                    }, 
                    KEY_ROWID + "=" + rowId, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String isbn, String title, String publisher) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_ISBN, isbn);
        args.put(KEY_TITLE, title);
        args.put(KEY_PUBLISHER, publisher);
        return db.update(DATABASE_TABLE, args, 
                     KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

数据库活动.java

```
package com.example.database1;

public class DatabaseActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_database);
        DBAdapter db = new DBAdapter(this);
        db.open();
    } 
} 
```

活动数据库.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <EditText
        android:id="@+id/edit1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <EditText
        android:id="@+id/edit2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <EditText
        android:id="@+id/edit3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <Button 
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:10:43.633

更改代码以在单击按钮时在数据库中插入 Edittext 值：

```
public class DatabaseActivity extends Activity {
 DBAdapter db;
Button submitbtn;
EditText edit1,edit2,edit3;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database);
    db=new DBAdapter(this);
   submitbtn = (Button) findViewById(R.id.submit);
   edit1 = (EditText) findViewById(R.id.edit1);
   edit2 = (EditText) findViewById(R.id.edit2);
   edit3 = (EditText) findViewById(R.id.edit3);
    db.open();

    submitbtn.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
                String steedtone=edit1.getText().toString();
                String steedttwo=edit2.getText().toString();
                String steedtthree=edit3.getText().toString();

                long result=db.insertTitle(steedtone,steedttwo,steedtthree);
        }
         });
  } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:07:34.260

这将在调用 setContentView() 后进入您的 onCreate() 内部。

```
Button btn = (Button) findViewById(R.id.btnId);
EditText edtTxt = (EditText) findViewById(R.id.edtId);

btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                insertDataInDb();

            }
        }); 
```

* * *

```
public void insertDataInDb() {
        // TODO Auto-generated method stub
        String str = edtTxt.getText().toString();
        //Code for insertion
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:14:15.067

检查下面的代码。

```
package com.example.database1;
import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.view.Menu;
import android.widget.Toast;

public class DatabaseActivity extends Activity {

DBAdapter db;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database);
    db = new DBAdapter(this);
    db.open();

    Button btn = (Button) findViewById(R.id.btnId);
    EditText edtTxt = (EditText) findViewById(R.id.edtId);

    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String name = edtTxt.getText().toString();
            try{
            insertTitle("ISBN",""+name,"publisar");
            }catch(Exception e){
              Log.d("error-->","insert data-->"+e.getMassage().toString());
              }

        }
    });
  } 
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T06:35:29.710

```
public class DatabaseActivity extends Activity {
    EditText edit1,edit2,edit3;
    Button submit;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         final DBAdapter db = new DBAdapter(this);
         db.open();
         edit1=(EditText)findViewById(R.id.edit1);
         edit2=(EditText)findViewById(R.id.edit2);
         edit3=(EditText)findViewById(R.id.edit3);
         submit=(Button)findViewById(R.id.submit);
        submit.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                String editText1=edit1.getText().toString();
                String editText2=edit2.getText().toString();
                String editText3=edit3.getText().toString();
                long result=db.insertTitle(editText1, editText2, editText3);
                Toast.makeText(MainActivity.this,"DataSaved",Toast.LENGTH_LONG).show();// TODO Auto-generated method stub

            }
        });
    } 
```

只需将其粘贴到您的数据库活动中，然后就可以看到神奇的欢呼声了..

# ios - iOS - 设置包中文本字段中小数点的键盘类型

> ID：13853282
> 
> 赞同：0
> 
> 时间：2012-12-13T05:01:58.927
> 
> 标签：ios, xcode, ios6, xcode4.5

从 Root.plist 中，我只能看到从文本字段 (PSTextFieldSpecifier) 项设置“键盘类型”值的五个选项：

> *   字母
> *   数字和标点
> *   数字键盘
> *   网址
> *   电子邮件地址

有没有办法将值设置为小数点，就像你可以从 Interface Builder 中一样？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:22:02.297

似乎无法`UIKeyboardTypeDecimalPad`为*PSTextFieldSpecifier分配键盘类型等于*

# php - 我们如何将php变量存储在jquery部分的jquery变量中

> ID：13853284
> 
> 赞同：-2
> 
> 时间：2012-12-13T05:02:22.363
> 
> 标签：php, jquery, variables

```
$('#b').bind('click',function(){
                alert('hii');
                var slide_start=slider_content.indexOf(0);
                if(slide_start==2)
                {
                    $('#reg_rem_form').hide();
                }
        var show=1+slide_start;
        var show_first='#'+show;

        **var value_to_insert=<?php  echo $value;?  >=$(show_first).val();**
                <?php

                        /*
                            1\. Date of birth
                            2\. gender
                            3\. Unvi1
                            4\. Unvi2
                            5\. highest degree unvi1
                            6\. highest degree unvi2
                            7\. Year of passing unvi1
                            8\. Year of passing unvi2
                            9\. Current working
                            10\. Work experience
                        */

                ?> 
```

就像我们将 php 变量存储在 jquery 变量中一样，但反过来我想将 jquery 变量存储在 php 变量中？？？突出显示的部分是主线。怎么做，上面的代码给了我错误===缺少“;” 声明之前。

这是正确的方法吗 **=$('#bold').val();**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:17:03.560

最简单的方法是使用隐藏元素。

```
<input type="hidden" name="store" id="store"/> 
```

在 PHP 方面

```
<input type="hidden" 
   name="store" 
   value="<?php echo htmlspecialchars($variable); ?>"> 
```

然后在jquery方面

```
var jqueryVar = $('#store).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:38:31.700

结帐 JSON（JavaScript 对象表示法）

```
http://php.net/manual/en/book.json.php 
```

将 PHP 数组转换为 javascript

```
<?php

$php_array = array(0,1,2,3,4,5,6,7,8,9);
$js = "var javascript_array = eval('(' + ".json_encode($php_array)." + ')');

?> 
```

# android - CursorAdapter 适应错误的字段

> ID：13853285
> 
> 赞同：1
> 
> 时间：2012-12-13T05:02:32.817
> 
> 标签：android, android-layout, simplecursoradapter

我将 SimpleCursorAdapter 子类化以显示列表。在我的行布局文件中，我有 3 个 textView，但我只想将数据映射到其中的 2 个。我明确遗漏了 txt2，但它一直与数据一起显示。我可以通过从布局文件中手动删除 txt2 来解决这个问题，然后一切都很好。但只是出于好奇，第一处的适配器出了什么问题？谢了。

```
 String []from = new String[] {
                DbField.FIELD1,
                //DbField.FIELD2,
                DbField.FIELD3

        };
        // Fields on the UI to which we map
        int[] to = new int[] { R.id.txt1, /*R.id.txt2,*/ R.id.txt3  };
        adapter = new CustomCursorAdapter(this.getActivity()
              , R.layout.row_entry, null, from,
                to, 0);
        setListAdapter(adapter); 
```

# ios - Xcode 4.4.1、iOS 5.1：Xcode 无法使用所选设备运行

> ID：13853286
> 
> 赞同：0
> 
> 时间：2012-12-13T05:02:42.920
> 
> 标签：ios

需要在 iphone 4 IOS 5.1.1 上测试我的应用程序。配置文件没问题。我明白了

“无法使用所选设备运行。没有可用的兼容 iOS 版本的预置 iOS 设备。连接具有足够新版本的 iOS 设备或...”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:14:57.867

可能是 iOS 版本问题，我也遇到了同样的问题之前和我所做的只是将我的部署目标更改为设备操作系统版本。要做到这一点，请使用以下方法。

转到`Target-->Summary-->Deployment Target -->Select the Version.` 和 `Project-->info-->iOS Deployment target -->Select your Version.`

# java - 尝试打包平铺地图以便我可以加载它，但未创建 tmx 文件

> ID：13853288
> 
> 赞同：1
> 
> 时间：2012-12-13T05:02:52.433
> 
> 标签：java, libgdx

所以我在文件夹中有一个 tmx 文件和一个 tileset png 图像`raw/`。我将输出定位在`assets/tiles/`其中存在的位置。当我运行以下命令时：

```
java -classpath libs/gdx.jar:libs/gdx-tools.jar com.badlogic.gdx.tools.imagepacker.TexturePacker raw/ assets/tiles/ 
```

我得到以下输出：

```
raw
Format: RGBA8888 (default)
Filter: Nearest, Nearest (default)
Packing... ground
Packing... metatiles32x32
Writing 512x512: assets/tiles/raw1.png
Pixels eliminated: -271.0145% 
```

不创建 .tmx 文件。关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:33:23.450

看起来我正在使用的命令已被贬低。在这里使用了一个，它似乎工作。还有一些其他事情要解决，但文件加载：[http ://code.google.com/p/libgdx/wiki/GraphicsTileMaps](http://code.google.com/p/libgdx/wiki/GraphicsTileMaps)

# c++ - operator()() 定义了什么？

> ID：13853289
> 
> 赞同：5
> 
> 时间：2012-12-13T05:02:55.057
> 
> 标签：c++, operators, operator-overloading

如果这个问题被报告，我很抱歉，但我似乎无法在网上轻松找到解决方案。如果我覆盖 operator()() 这定义了什么行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T05:06:33.630

是`operator()`函数调用操作符，即可以使用对应类型的对象作为函数对象。第二组括号包含参数列表（像往常一样），它是空的。例如：

```
struct foo {
    int operator()() { return 17; };
};

int main() {
    foo f;
    return f(); // use object like a function
} 
```

上面的例子只是展示了如何声明和调用操作符。实际使用可能会访问运算符中的成员变量。函数对象在标准 C++ 库中的许多地方都用作自定义点。使用对象而不是函数指针的优点是函数对象可以附加数据。

# jquery - jquery 验证不适用于相关的 html

> ID：13853290
> 
> 赞同：1
> 
> 时间：2012-12-13T05:03:02.723
> 
> 标签：jquery, html

[http://jsfiddle.net/7sARw/17/](http://jsfiddle.net/7sARw/17/)

以上是我的应用程序的 jsfiddle。很抱歉，小提琴中有很多代码，但需要这些代码才能使应用程序正常工作，而且我确实尝试过大量减少代码。

但请按照以下步骤使用 jsfiddle：

1.  当您打开 fiddle 时，单击“Open Grid”链接并选择“True or False”选项。您将看到“True”和“False”按钮出现，以及一个显示 1 的文本输入。

2.  如果您单击“添加问题”按钮，则会出现一条警报，说明您选择的答案少于要求的数量。这是正确的，因为文本输入表明您需要`1`多个答案，但您尚未选择答案。因此，选择“真”或“假”，然后单击“添加问题”按钮。

3.  您将看到它在您输入的表格中附加了一行。现在在该行中关闭所选按钮，以便“True”或“False”按钮都不会打开。现在在应用程序的底部单击“提交详细信息”按钮。您意识到没有出现警报，说明您选择的答案较少。

这就是我遇到的问题，当我单击“提交详细信息”按钮时，为什么没有出现提示您选择的答案较少的警报？我知道提交按钮将显示其他验证消息，因此我调用该函数的方式没有任何问题，它位于 validation() 函数中，我试图验证我遇到问题时选择的答案数量。

以下是 jsfiddle 底部的验证代码：

```
 function validation() {

    var marks = parseInt($("#total-weight").text());
    var _qid = "";
    var _msg = "";

    var maxQuestions = 5;
    var questionsAdded = $('tr.optionAndAnswer').length;

    var alertValidation = "";
    // Note, this is just so it's declared...
    $("tr.optionAndAnswer").each(function () {

        _qid = $("td.qid", this).text();
        _msg = "You have errors on Question Number: " + _qid + "\n";

        $(".numberAnswerTxtRow", this).each(function () {

            var currenttotal = $(this).closest('.optionAndAnswer').find('.answerBtnsOn').length;

            if (currenttotal < $(this).val()) {
                alertValidation += "\n\u2022 You have selected less answers than the required amount\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }

        });

        if (alertValidation != "") {
            return false;
        }
    });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:50:35.030

这似乎工作：http: [//jsfiddle.net/7sARw/20/](http://jsfiddle.net/7sARw/20/)

似乎您没有将点击处理程序附加到 call `validation()`。我在你的`$(document).ready`函数中添加了这段代码：

```
$('#QandA').submit(function (evt) {
   return validation();
}); 
```

这就是说，如果`validation()`返回 true，则提交表单，否则不提交。现在，如果您添加一个问题，将 Number of Answers 字段更改为 2，然后提交，就会显示警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:46:12.943

类型不匹配错误：

```
<table id="optionAndAnswer" class="optionAndAnswer">

$("tr.optionAndAnswer").each(function() { 
```

`<table>` `id`is `optionAndAnswer`, `class`is also `optionAndAnswer`, ok 不是错误，但是您的 jQuery 选择器正在选择一个`<tr>`with `class` `optionAndAnswer`，而这个在您的 HTML 中不存在

# jquery - Jquery .submit with function() 不会触发，没有 function() 它会

> ID：13853291
> 
> 赞同：0
> 
> 时间：2012-12-13T05:03:13.887
> 
> 标签：jquery, html

当用户从打开的对话框中选择一个文件（图像、视频等）时，我会自动提交表单，我希望从我的控制器方法中得到响应，告诉我成功或错误。

如果我这样调用 jquery 提交，它将正常工作：

```
 $("#fileupload2").submit(); //fileupload2 is a form tag 
```

只要我添加这样的东西，它就不会：

```
 $("#fileupload2").submit(function () { alert('hello'); }); 
```

我不知道为什么只要我在里面添加函数就不会被调用。我在浏览器开发工具中没有看到任何错误。我的 HTML 如下所示：

```
<form id="fileupload2" action="/Home/UploadFiles" method="POST" enctype="multipart/form-data">

<div class="btn btn-success fileinput-button">
    <i class="icon-plus icon-white"></i>
    <span>Add files...</span>
    <input id="fileupload" type="file" onchange="uploadSelectedFile(this);" name="file">
</div>
@*<input type="submit" />*@
</form>

 <script>
    $(document).ready(function () {
    $("#fileupload2").submit(function (e) {
        alert('hello'); $.post('/Home/UploadFiles', $('#fileupload2').serialize(), function (data) {
            alert(data);
        });
        return false;
    });
});

   function uploadSelectedFile() {
       $("#fileupload2").submit();
   }

  </script> 
```

我在uploadSelectedFile 方法onchange 中调用jquery 提交。关于为什么会发生这种情况的任何建议或想法，我将不胜感激。对我来说，这似乎是正确的。

控制器方法：

```
 [HttpPost]
   public ActionResult UploadFile() {
        //Some code
        return Json("success"); //or error
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:04:36.580

如果没有回调，您将触发`submit`提交表单的事件。

使用回调，您将该函数绑定到`submit`事件，这意味着当提交表单时，该函数将被执行。

你想做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:05:01.573

```
$("#fileupload2").submit(); 
```

以上将提交表格

下面根本**不会**提交表单，而是在提交表单时做一些事情，它是一个绑定到提交事件的事件处理程序，所以每当表单被提交时，以编程方式或使用默认按钮，下面都会发出警报。

```
$("#fileupload2").submit(function () { alert('hello'); }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T05:15:41.380

```
$("#fileupload2").submit(function() {
 alert("Your Form is submited");
}); 
```

# svg - SVG中的奇数水平线

> ID：13853293
> 
> 赞同：1
> 
> 时间：2012-12-13T05:04:08.487
> 
> 标签：svg, opera

我正在制作一个多边形剪裁器演示程序，发现了一个无法解决的问题。

所有其他浏览器都按预期显示[示例 svg](http://jsfiddle.net/bxrUm/)，但最新的 Opera 12.11（在 Windows 7 和 Mac OS X 10.6 中）显示一些奇怪的水平线。

Opera 12.11 结果：
![歌剧 svg 结果](../Images/8a022bb2adb653604d013ad43486a232.png)

其他浏览器（IE9、Firefox、Safari、Chrome）的结果：
![其他浏览器的结果](../Images/310c75966fce4955436126cd0911e263.png)

我希望这是 Opera 中的一个错误，因为所有其他浏览器都显示了正确的结果，但不确定，因为当我例如。删除路径命令中的一些 Z，Opera 也显示正确的结果。

我的 SVG 可能有什么问题，还是 Opera 中的错误？

有问题的路径：

```
<path style="fill:#80ff9C; fill-opacity:0.5; stroke:#003300; stroke-opacity:1.00; stroke-width:0.80;" id="p3" d="M167.12,227.93L164.78,225.58L164.78,201.75L163.53,203L142.92,203L140.9,200.97L138.87,203L118.45,203L116.11,200.65L116.11,200.43L114.14,201.09L113.87,201.16L106.39,202.53L106.15,202.56L96.48,203.17L96.22,203.17L88.33,202.67L88.05,202.63L81.88,201.36L81.55,201.26L76.74,199.37L76.36,199.18L72.51,196.63L72.16,196.34L69.06,193.09L68.8,192.73L66.34,188.65L66.17,188.3L64.3,183.01L64.21,182.69L62.96,175.77L62.94,175.53L62.45,166.59L62.44,166.32L62.83,161.46L56.41,160.67L56.12,160.6L52.27,159.53L52.27,187.6L49.92,189.95L26.52,189.95L24.18,187.6L24.18,83.41L26.52,81.07L49.92,81.07L52.26,83.4L52.26,83.68L52.45,83.58L52.75,83.46L58.61,81.53L58.96,81.45L64.69,80.67L65.08,80.65L72.44,81.09L72.72,81.13L79.06,82.42L79.39,82.52L83.26,84.05L83.69,84.29L87.35,86.93L87.68,87.22L91.13,91.09L91.33,91.38L94.37,96.28L94.54,96.62L96.5,101.85L96.59,102.16L96.73,102.82L97.48,100.58L97.61,100.27L100.23,95.33L100.44,95.02L103.76,90.87L104.02,90.6L107.95,87.24L108.26,87.02L113.01,84.32L113.34,84.16L118.9,82.22L119.21,82.14L125.69,80.98L125.93,80.96L131.95,80.65L132.32,80.65L140.3,81.11L140.56,81.14L147.02,82.4L147.33,82.49L152.58,84.42L152.92,84.58L157.36,87.23L157.67,87.46L161.42,90.82L161.69,91.13L164.68,95.19L164.88,95.54L167.12,100.34L167.24,100.65L168.03,103.46L168.03,54.67L170.37,52.33L193.56,52.33L195.91,54.67L195.91,81.07L217.13,81.07L219.12,82.36L235.15,118.59L249.15,82.45L251.21,81.06L267.29,81.15L269.65,84.63L267.35,90.56L268.9,88.56L269.17,88.27L272.65,85.24L273.05,84.97L276.65,83.1L277.08,82.93L282.96,81.43L283.26,81.38L290.26,80.67L290.56,80.66L295.53,80.9L295.87,80.96L301.02,82.12L301.34,82.22L305.26,83.84L305.26,83.4L307.6,81.06L331,81.06L333.35,83.41L333.32,106.07L335.16,100.58L335.29,100.27L337.92,95.33L338.12,95.03L341.43,90.88L341.71,90.6L345.65,87.24L345.95,87.03L350.69,84.32L351.02,84.17L356.58,82.22L356.89,82.14L363.36,80.98L363.61,80.96L369.63,80.65L370.01,80.65L377.98,81.11L378.24,81.14L384.71,82.4L385.02,82.49L390.27,84.42L390.6,84.57L395.04,87.22L395.37,87.45L399.12,90.83L399.38,91.13L402.37,95.19L402.57,95.54L404.81,100.34L404.93,100.65L405.38,102.26L405.38,83.41L407.72,81.07L431.34,81.07L433.68,83.4L433.68,83.92L438.94,82.01L439.27,81.92L445.06,80.88L445.37,80.85L452.26,80.69L452.57,80.71L458.4,81.45L458.76,81.53L463.42,83.03L463.82,83.22L467.58,85.44L467.99,85.75L471.27,89.06L471.55,89.41L473.86,93.1L474.07,93.55L475.38,97.53L475.47,97.96L475.81,101.25L475.82,101.45L475.82,158.65L473.47,161L455.03,161L452.69,158.66L452.58,103.42L452.18,102.16L451.48,101.27L450.13,100.42L447.35,99.61L443.1,99.28L439.59,100.03L437.44,101.06L435.97,102.39L433.88,105.3L433.69,105.76L433.69,133.06L435.2,133.06L437.55,135.41L437.42,204.06L437.38,204.48L436.39,209.01L436.24,209.46L434.39,213.27L434.11,213.69L431.39,216.92L431.05,217.24L427.42,219.9L427.06,220.11L422.33,222.23L422,222.34L416.02,223.84L415.74,223.89L408.17,224.68L407.94,224.69L398.86,224.52L398.63,224.51L390.95,223.53L390.68,223.47L382.84,221.31L382.48,221.17L379.33,219.61L378.17,217.99L376.45,204.99L380.33,202.19L387.08,205.47L392.85,207.48L398.67,208.52L401.88,208.75L406.92,208.37L409.73,207.59L411.2,206.7L411.81,205.95L412.16,204.84L412.18,202L406.35,203.16L406.04,203.21L399.45,203.51L399.12,203.49L392.54,202.71L392.22,202.64L386.95,201.09L386.52,200.91L383.24,199.05L382.81,198.73L379.7,195.66L379.42,195.32L376.61,190.96L376.43,190.64L375.24,187.75L375.24,200.65L372.89,203L356.55,203L354.21,200.66L354.13,159.59L351.66,158.84L351.33,158.71L346.46,156.26L346.13,156.06L342.02,152.9L341.73,152.62L341.2,152.01L339.97,153.37L339.06,154.95L338.95,200.66L336.61,203L315.82,203L314.06,201.23L312.29,203L291.67,203L289.33,200.65L289.33,187.37L287.34,191.69L287.16,192.02L284.34,196.01L284.05,196.34L280.91,199.18L280.46,199.49L276.95,201.25L276.58,201.38L271.17,202.84L270.84,202.9L264.39,203.53L264.05,203.54L257.14,203.02L256.83,202.97L252.4,201.93L252.4,225.58L250.05,227.93L229.43,227.93L227.09,225.58L227.09,187.22L225.03,191.69L224.85,192.01L222.04,196.01L221.73,196.34L218.59,199.17L218.15,199.48L214.66,201.24L214.28,201.38L208.87,202.84L208.54,202.9L202.08,203.53L201.74,203.54L194.84,203.02L194.54,202.98L190.09,201.94L190.09,225.58L187.74,227.93Z
M197.78,187.5L200.78,187.08L202.89,186.23L204.29,185.11L205.42,183.44L205.87,182.24L205.56,182.06L199.49,170.19L201.9,166.35L208.29,166.49L207.83,159.77L206.88,155.37L205.71,152.86L204.43,151.38L202.73,150.31L200.12,149.55L196.5,149.28L195.91,149.42L195.91,158.65L193.56,161L190.1,161L190.13,185.7L191.31,186.36L194.26,187.2Z
M260.09,187.5L263.09,187.08L265.2,186.23L266.6,185.11L267.74,183.43L268.52,181.3L266.75,180.35L265.65,178.75L263.75,164.25L267.66,161.46L270.35,162.79L270.15,159.77L269.19,155.37L268.59,154.07L266.01,150.91L265.05,150.31L262.43,149.55L258.81,149.28L255.92,149.95L253.38,151.25L252.39,152.03L252.44,185.7L253.62,186.36L256.57,187.2Z
M405.83,187.49L409.74,186.84L412.25,185.76L412.25,161L407.72,161L405.38,158.65L405.38,149.33L404.68,149.3L401.46,149.83L399.56,150.66L396.77,153.62L396.57,153.79L396.4,154.04L395.29,157.12L394.34,162.91L394.05,170.1L394.62,176.48L395.76,181.05L397.11,184.03L398.39,185.5L400.11,186.58L402.55,187.31Z
M98.91,186.95L104.73,186.33L110.5,184.76L114.04,183.1L115.91,181.35L116.11,181.45L116.11,159.49L113.97,158.84L113.64,158.71L108.76,156.26L108.45,156.06L104.34,152.9L104.05,152.62L101.14,149.24L98.46,149.07L95.15,149.49L92.97,150.33L91.58,151.43L90.57,152.94L89.18,156.73L88.31,161.67L88.16,168.46L88.8,175.96L90,181.31L91.09,183.87L92.25,185.3L93.69,186.24L95.82,186.86Z
M61.37,144.33L65.04,143.91L67.63,143L69.49,141.72L70.86,140.06L72.38,136.66L73.77,131.21L74.63,123.89L74.66,116.82L73.94,109.89L72.81,105.46L71.51,102.88L69.94,101.12L68.08,99.95L65.08,99.01L60.82,98.6L57.91,99.06L55,100.23L52.28,102.1L52.37,141.97L53.93,142.85L56.98,143.81Z
M373.19,143.31L373.75,143.23L375.49,142.45L376.68,141.36L377.59,139.78L378.8,135.24L379.65,127.98L379.81,118.04L379.15,109.78L377.96,104.02L377,101.64L375.9,100.29L374.44,99.36L372.16,98.74L369.06,98.65L366.18,99.21L364.22,100.16L362.96,101.34L361.94,103.15L360.64,107.73L359.76,114.54L359.55,120.81L360.41,133.12L360.51,133.62L361.39,133.78L361.8,133.9L365.83,135.57L366.28,135.83L369.42,138.21L369.77,138.56L372.52,141.97L372.78,142.4Z
M289.33,142.66L289.33,135.4L291.67,133.06L293.32,133.06L292.17,132.18L291.75,131.74L289.59,128.68L289.32,128.12L288.23,124.69L288.14,124.09L288.12,120.36L288.2,119.79L289.21,116.36L289.46,115.81L291.52,112.69L291.94,112.24L294.62,110.06L295.19,109.73L298.41,108.54L298.91,108.42L301.8,108.14L302,108.13L302.24,108.13L302.49,108.14L305.26,108.51L305.26,102.2L301.81,100.1L298.17,98.83L296.56,98.6L292.77,99.04L289.99,100L288.01,101.33L286.35,103.26L284.95,106.06L283.76,110.68L282.92,118.05L282.88,124.86L283.64,131.68L284.96,136.7L286.48,139.95L287.9,141.66Z
M252.13,135.13L252.21,135.09L252.5,134.97L257.7,133.34L258.08,133.26L259.63,133.09L259.35,131.43L259.32,131.21L258.81,121.7L258.81,121.48L259.34,112.27L259.37,112.05L259.65,110.44L250.64,133.68Z
M212.81,134.34L195.91,96.07L195.91,133.24L200.92,132.68L201.29,132.68L208.07,133.23L208.38,133.28Z
M141.22,134.33L141.74,129.97L141.22,129.23Z
M141.22,115.01L141.81,114.13L141.47,109.79L140.27,104.02L139.32,101.64L138.22,100.29L136.75,99.36L134.47,98.74L131.37,98.65L128.49,99.21L126.53,100.16L125.25,101.36L124.25,103.14L122.97,107.7L122.89,108.31L138.87,108.31L141.22,110.65Z" fill-rule="nonzero">
</path> 
```

编辑：当我将“stroke-width”从“0.80”更改为“0.81”时，Opera 显示正确的结果，但“0.85”在其他位置显示奇数水平线。真的很奇怪！

# android - 对话框中的 TextView 样式，在 froyo 中看不到文本，但在 ics 中可以看到

> ID：13853298
> 
> 赞同：2
> 
> 时间：2012-12-13T05:04:36.040
> 
> 标签：android

我创建了一个对话框，用于在 android 中显示消息。它基本上在这样的滚动视图中包含一个文本视图

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

        <TextView 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:id="@+id/about_msg" 
            android:text="@string/about_msg"
            android:autoLink="web"
            android:padding="10dip"
            style="@style/DialogTextSmall" />

</ScrollView> 
```

如您所见，我已将样式应用于 TextView 样式如下所示

```
<style name="DialogTextSmall">
    <item name="android:textSize">@dimen/text_size_small</item>        
</style> 
```

应用主题集是这样的

```
 <style name="AppTheme"  parent="android:Theme.Light"> 
```

问题：

在 ICS api-15 上，它在 TextView 的白色背景上显示精细的黑色文本。

问题是当我在 Froyo 中显示对话框时，即使它似乎占用了空间，它的文本似乎也没有显示 - 我的猜测是文本的颜色与背景相同（灰黑色）

我知道我可以通过对黑色背景和白色文本进行硬编码来快速修复，但是是否不可能让 TextView 的文本颜色和背景出现的平台默认颜色，而无需我对其进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:29:20.250

继承 Textview 风格并没有真正的帮助。这是一个有点古怪的问题，这是一种方法

[http://blog.andromo.com/2011/fixing-text-colours-on-an-alertdialog-when-using-theme-light/](http://blog.andromo.com/2011/fixing-text-colours-on-an-alertdialog-when-using-theme-light/)

就我而言，我以另一种方式做到了

为主题解决了它我从默认的android主题继承了它

```
<style name="Theme" parent="android:Theme"></style>   
<style name="Theme.AppTheme" parent="@android:style/Theme.Light"/> 
```

和

```
<style name="DialogTextSmall">
    <item name="android:textSize">@dimen/text_size_small</item>  
    <item name="android:textColor">@android:color/white</item>              
</style> 
```

这种方式对于所有平台，froyo，姜饼及以上，对话框是黑色的，文字是白色的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:13:44.813

您可以继承父样式，然后仅更改要更改的值。尝试将您的 XML 更改为：

```
<style name="DialogTextSmall" parent="@android:style/Widget.TextView>
    <item name="android:textSize">@dimen/text_size_small</item>        
</style> 
```

[可以在 Github 上的](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml)AOSP 源代码中找到可以继承的样式列表。

EIDT：

默认情况下，文本视图具有黑色文本和透明背景，因此如果文本视图后面的背景（同样是透明的）是黑色的，则需要设置其中之一。

# jquery - Jquery 文件下载 ($.fileDownload)

> ID：13853300
> 
> 赞同：8
> 
> 时间：2012-12-13T05:04:42.937
> 
> 标签：jquery, download

我正在使用 jquery 文件下载..

代码如下：

```
 function downloadFile(){
var downloadOptions = {
preparingMessageHtml: "We are preparing your report, please wait...",
failMessageHtml: "No reports generated. No Survey data is available."
                  };

     $.fileDownload("displaySurveyReport.action",downloadOptions);
return false; 
} 
```

这就是我在单击按钮时所做的

当我点击按钮时，preparingMessageHtml：“我们正在准备您的报告，请稍候......”，显示在一个对话框中......问题是文件完成准备后这个对话框没有消失我必须手动关闭它......当文件完成准备并准备下载时，我怎样才能让它消失..

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T14:05:17.653

为了让 JQuery 知道刚刚发生的文件下载，您的响应标头必须包含`Set-Cookie: fileDownload=true; path=/`.

在 Java 中：

```
response.setHeader("Set-Cookie", "fileDownload=true; path=/"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T05:10:17.213

这是jquery文件下载的源代码..

```
$(function () {
    $(document).on("click", "a.fileDownloadCustomRichExperience", function () {

        var $preparingFileModal = $("#preparing-file-modal");

        $preparingFileModal.dialog({ modal: true });

        $.fileDownload($(this).attr('href'), {
            successCallback: function (url) {

                $preparingFileModal.dialog('close');
            },
            failCallback: function (responseHtml, url) {

                $preparingFileModal.dialog('close');
                $("#error-modal").dialog({ modal: true });
            }
        });
        return false; //this is critical to stop the click event which will trigger a normal file download!
    });
});

<div id="preparing-file-modal" title="Preparing report..." style="display: none;">
    We are preparing your report, please wait...

    <div class="ui-progressbar-value ui-corner-left ui-corner-right" style="width: 100%; height:22px; margin-top: 20px;"></div>
</div>

<div id="error-modal" title="Error" style="display: none;">
    There was a problem generating your report, please try again.
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T14:01:30.737

成功；

```
response.setHeader("Set-Cookie", "fileDownload=true; path=/");
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
```

出错时

```
response.setHeader("Set-Cookie", "fileDownload=false; path=/");
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
```

仅当存在其他请求时才使用“Cache-Control”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T04:35:02.977

有些浏览器还需要您重置响应，否则您的下载将无法正常工作！

```
response.reset(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-08T07:12:04.867

please try like this

```
function exportToExcelTest() {
        var region = $('#ddlRegion').val();
        var hrinfo = $('#hrinfodropdown').val();
        if (region != null) {
            $('#ExportOptions').modal('hide');
            $.blockUI({ message: '<h1>Please wait generating excel data...</h1>' });
            //$.blockUI({ message: '<h1><img src="../Images/ajax_loader_blue_350.gif" /> Just a moment...</h1>' });
            $.blockUI({ css: { backgroundColor: '#f00', color: '#fff'} });
            var myData = region + ':' + hrinfo;

            $.fileDownload('Excel.ashx', {
                httpMethod: "POST",
                data: { data: myData },
                successCallback: function (url) {
                    //$("div#loading").hide();
                    //alert('ok');
                    //response.setHeader("Set-Cookie", "fileDownload=false; path=/");
                    $.unblockUI();
                },
                prepareCallback: function (url) {
                    //alert('ok');
                    //response.setHeader("Set-Cookie", "fileDownload=true; path=/");
                    $.unblockUI();
                },
                failCallback: function (responseHtml, url) {
                    //alert('ok');
                    // $("div#loading").hide();
                    // alert('Error while generating excel file');
                    //response.setHeader("Set-Cookie", "fileDownload=false; path=/");
                    $.unblockUI();
                }
            });          
        }
        else {
            alert('Please select a region....');
            return false;
        }
    } 
```

Referance from : [https://www.experts-exchange.com/questions/28713105/Jquery-fileDownload-successcallback-not-working.html](https://www.experts-exchange.com/questions/28713105/Jquery-fileDownload-successcallback-not-working.html)

I hope it's Work for you..

# javascript - 为什么 FileReader 不将文件传递给 three.js 场景使用的 loader.load()？

> ID：13853301
> 
> 赞同：4
> 
> 时间：2012-12-13T05:04:45.147
> 
> 标签：javascript, three.js

我正在尝试使用 FileReader 将客户端 ASCII 文件传递​​给 loader.load() 但看起来该文件永远不会到达那里。如果我使用`loader.load('server path to test_file.stl')`而不是`loader.load(fileObject)`.

我包含了一个 alert() 函数来显示文件的 ASCII 文本，它告诉我 JavaScript 正在抓取和处理文件，并且没有 Chrome 安全屏障，但显然我没有正确地将文件传递给`loader.load()`.

```
<!DOCTYPE html>
<html>
<head>
<style>
    body        {
            background-color:#fea47c;
                }

    div         { 
            position:relative;
            left:200px;           
            top:0px;
            background-color: #eeeeee;
            border:1px solid black;             
            width:550px;
            height:550px;
                }

    canvas      {
            width:550px;
            height:550px;
                }
</style>
</head>

<body>

<script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script>
<script src="https://raw.github.com/mrdoob/three.js/master/examples/js/loaders/STLLoader.js"></script>      
<script src="https://raw.github.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script> 

<input type="file" id="pickfile"></input>

<script> 

   document.getElementById('pickfile').addEventListener('change', readFile, false);

    function readFile (evt) 
                {
    var fileObject = evt.target.files[0];    
    var reader = new FileReader();
    reader.onload = function() {alert(this.result)};    // verifies ASCII file contents were grabbed
    reader.readAsText(fileObject)
                }

        var container, camera, scene, renderer, controls;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            var width = container.clientWidth;
            var height = container.clientHeight;

            camera = new THREE.PerspectiveCamera( 35, width / height, .1 , 10000);

            camera.position.set( 0, 0, 600);

            scene = new THREE.Scene();

            controls = new THREE.TrackballControls( camera , container); 
            controls.addEventListener( 'change', render );

            // object

            var loader = new THREE.STLLoader();
            loader.addEventListener( 'load', function ( event ) {

                var geometry = event.content;

                var material = new THREE.MeshLambertMaterial( { ambient: 0xff5533, color: 0xff5533 } );

                var mesh = new THREE.Mesh( geometry, material );

                scene.add( mesh );

            } );

            loader.load(fileObject);

            // lights

            scene.add( new THREE.AmbientLight( 0x222222 ) );

            var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
            directionalLight.position = camera.position;
            scene.add( directionalLight );

            // renderer

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setSize( width , height );
            container.appendChild( renderer.domElement );

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function addLight( x, y, z, color, intensity ) {

            var directionalLight = new THREE.DirectionalLight( color, intensity );
            directionalLight.position.set( x, y, z )
            scene.add( directionalLight );

        }

       function onWindowResize() {   

            camera.aspect = width / height;
            camera.updateProjectionMatrix();

            renderer.setSize( width, height );
        }

        function animate() {

            requestAnimationFrame( animate );
            controls.update();
            render();

        }

       function render() {

           camera.lookAt( scene.position );
           renderer.render( scene, camera );

       }

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T16:32:17.287

好的，我今天早上又试了一次，我认为问题是我试图从一个糟糕的相机角度或其他什么东西查看加载的结果......无论如何，这是一个基于[https://raw.github.com/mrdoob的示例/three.js/master/examples/webgl_loader_stl.html](https://raw.github.com/mrdoob/three.js/master/examples/webgl_loader_stl.html)

必不可少的部分：

就像我上面提到的那样， loader.load 没有任何会占用文件实际*内容*的重载（认为它会有点愚蠢）。它只会占用文件的*位置*......您需要一些可以从文件内容创建模型的东西。那将是`loader.parse`。

例如，以下处理程序将您的模型添加到`scene`范围内的场景中`readFile`：

```
function readFile(evt)
{
    var fileObject = evt.target.files[0];
    var reader = new FileReader();
    reader.onload = function ()
    {
        var loader = new THREE.STLLoader();
        //alert(this.result)
        var geometry = loader.parse(this.result);
        var material = new THREE.MeshPhongMaterial(
        {
            ambient: 0xff5533,
            color: 0xff5533,
            specular: 0x111111,
            shininess: 200
        });
        var mesh = new THREE.Mesh(geometry, material);
        mesh.castShadow = true;
        mesh.receiveShadow = true;
        scene.add(mesh);
    };
    reader.readAsText(fileObject)
} 
```

整个例子：

我会把它放在网上的某个地方，但是因为它使用 github 来托管一些脚本等，这可能不是最好的主意。

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                font-family: Monospace;
                background-color: #000000;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #pickfile {
                color: #fff;
                position: absolute;
                top: 40px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            a {
                color: skyblue
            }
        </style>
    </head>

    <body>
        <script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script>
        <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/loaders/STLLoader.js"></script>
        <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script>
        <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/Detector.js"></script>
        <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/libs/stats.min.js"></script>
        <input type="file" id="pickfile"></input>
        <script>
            document.getElementById('pickfile').addEventListener('change', readFile, false);

            function readFile(evt)
            {
                var fileObject = evt.target.files[0];
                var reader = new FileReader();
                reader.onload = function ()
                {
                    var loader = new THREE.STLLoader();
                    //alert(this.result)
                    var geometry = loader.parse(this.result);
                    var material = new THREE.MeshPhongMaterial(
                    {
                        ambient: 0xff5533,
                        color: 0xff5533,
                        specular: 0x111111,
                        shininess: 200
                    });
                    var mesh = new THREE.Mesh(geometry, material);
                    mesh.castShadow = true;
                    mesh.receiveShadow = true;
                    scene.add(mesh);
                }; 
                reader.readAsText(fileObject)
            }
            if (!Detector.webgl) Detector.addGetWebGLMessage();
            var container, stats;
            var camera, scene, renderer, objects;
            init();
            animate();

            function init()
            {
                container = document.createElement('div');
                document.body.appendChild(container);
                camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 1, 15);
                camera.position.set(3, 0.5, 3);
                scene = new THREE.Scene();
                scene.fog = new THREE.Fog(0xffffff, 2, 15);
                scene.fog.color.setHSV(0.06, 0.2, 0.45);
                // Grid
                var size = 20,
                    step = 0.25;
                var geometry = new THREE.Geometry();
                var material = new THREE.LineBasicMaterial(
                {
                    color: 0x000000
                });
                for (var i = -size; i <= size; i += step)
                {
                    geometry.vertices.push(new THREE.Vector3(-size, -0.04, i));
                    geometry.vertices.push(new THREE.Vector3(size, -0.04, i));
                    geometry.vertices.push(new THREE.Vector3(i, -0.04, -size));
                    geometry.vertices.push(new THREE.Vector3(i, -0.04, size));
                }
                var line = new THREE.Line(geometry, material, THREE.LinePieces);
                line.position.y = -0.46;
                scene.add(line);
                // Ground
                var plane = new THREE.Mesh(new THREE.PlaneGeometry(40, 40), new THREE.MeshPhongMaterial(
                {
                    ambient: 0x999999,
                    color: 0x999999,
                    specular: 0x101010
                }));
                plane.rotation.x = -Math.PI / 2;
                plane.position.y = -0.5;
                scene.add(plane);
                plane.receiveShadow = true;
                // Object
                // Lights
                scene.add(new THREE.AmbientLight(0x777777));
                addShadowedLight(1, 1, 1, 0xffffff, 1.35);
                addShadowedLight(0.5, 1, -1, 0xffaa00, 1);
                // renderer
                renderer = new THREE.WebGLRenderer(
                {
                    antialias: true,
                    clearColor: 0x111111,
                    clearAlpha: 1,
                    alpha: false
                });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(scene.fog.color, 1);
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.physicallyBasedShading = true;
                renderer.shadowMapEnabled = true;
                renderer.shadowMapCullFrontFaces = false;
                container.appendChild(renderer.domElement);
                // stats
                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild(stats.domElement);
                //
                window.addEventListener('resize', onWindowResize, false);
            }

            function addShadowedLight(x, y, z, color, intensity)
            {
                var directionalLight = new THREE.DirectionalLight(color, intensity);
                directionalLight.position.set(x, y, z)
                scene.add(directionalLight);
                directionalLight.castShadow = true;
                //directionalLight.shadowCameraVisible = true;
                var d = 1;
                directionalLight.shadowCameraLeft = -d;
                directionalLight.shadowCameraRight = d;
                directionalLight.shadowCameraTop = d;
                directionalLight.shadowCameraBottom = -d;
                directionalLight.shadowCameraNear = 1;
                directionalLight.shadowCameraFar = 4;
                directionalLight.shadowMapWidth = 2048;
                directionalLight.shadowMapHeight = 2048;
                directionalLight.shadowBias = -0.005;
                directionalLight.shadowDarkness = 0.15;
            }

            function onWindowResize()
            {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
            //
            function animate()
            {
                requestAnimationFrame(animate);
                render();
                stats.update();
            }

            function render()
            {
                var timer = Date.now() * 0.0005;
                camera.position.x = Math.cos(timer) * 5;
                camera.position.z = Math.sin(timer) * 5;
                camera.lookAt(scene.position);
                renderer.render(scene, camera);
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-05T13:22:38.157

非常感谢你的片段，这让我很开心

虽然我在这一行实施您的解决方案时遇到了问题：

```
reader.readAsText(fileObject) ; 
```

我将其更改为：

```
reader.readAsArrayBuffer(fileObject) ; 
```

它就像一个魅力......

* * *

所以对于完整的代码：

1）我的 html 中有一个按钮来加载 .stl 文件：

```
select your stl file <br>
<input type="file" id="pickFile" /> 
```

2）在我的js文件中：

```
if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

var camera, scene, renderer, mesh, controls ;
var group ;

var container = document.getElementById('canvas3D');

// Create default material
material = new THREE.MeshPhongMaterial();

init();
animate();

// file input button
document.getElementById('pickFile').addEventListener('change', openFile, false);

// file load
function openFile (evt) {

    var fileObject = evt.target.files[0];

    // delete previous objects from scene 
    while(group.children.length > 0){ 
        group.remove(group.children[0]); 
    }

    var reader = new FileReader();
    reader.onload = function ()
    {
        var loader = new THREE.STLLoader();
        // parse the .stl file
        var geometry = loader.parse(this.result);
        var mesh = new THREE.Mesh(geometry, material);
        mesh.castShadow = true;
        mesh.receiveShadow = true;
        group.add(mesh);
    };
    // --> update here 
    reader.readAsArrayBuffer(fileObject) ;
};

// and the rest of my three.js code there : init() and animate() functions ... 
```

# ruby - ruby 中要散列的数组

> ID：13853302
> 
> 赞同：4
> 
> 时间：2012-12-13T05:04:46.410
> 
> 标签：ruby

输入：

```
 a = [[:a, "apple"], [:b, "bear"]] 
```

输出：

```
 {:a=>"apple", :b=>"bear"} 
```

我想到了这样做的方法：

```
h = a.inject({}){|dic,i| dic.merge({i[0]=>i[1]})} 
```

但我仍然认为这不是最好的方法。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T05:10:06.910

```
>> Hash[*a.flatten]
=> {:a=>"apple", :b=>"bear"} 
```

或者更漂亮的：

```
>> Hash[a] 
```

或 2.1 之后：

```
>> a.to_h 
```

# android - Android 2.3(GB) 中的辅助功能服务无法识别辅助功能事件

> ID：13853304
> 
> 赞同：3
> 
> 时间：2012-12-13T05:04:48.483
> 
> 标签：android, android-service, accessibility, android-a11y

我的代码适用于 4 以上的 Android 版本，但在 Android 2.2 或 2.3 中我无法检测到任何事件。Android 日志显示该服务正在运行，但每当我触发一个事件时，它都无法被辅助功能服务识别。在以下代码中：

```
public void onAccessibilityEvent(AccessibilityEvent event)
{       
    Log.i("abc","------service running---------");

    final int eventType = event.getEventType();

    switch(eventType)
    {
        case AccessibilityEvent.TYPE_VIEW_CLICKED :
                //do something
                break;
        }
} 
```

我也得不到`Log "------service running---------"`。我错过了什么。是否需要进行任何更改才能在不同版本的 android 上运行相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T05:23:58.153

您需要通过在 onServiceConnected() 中设置服务的 AccessibilityServiceInfo 来手动指定服务的事件和反馈类型。

以下是 TalkBack 的示例：

```
@Override
public void onServiceConnected() {
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    info.eventTypes = AccessibilityEvent.TYPES_ALL_MASK;
    info.feedbackType = AccessibilityServiceInfo.FEEDBACK_SPOKEN;
    info.notificationTimeout = 0;
    info.flags = AccessibilityServiceInfo.DEFAULT;
    setServiceInfo(info);
} 
```

# c++ - 当你有类层次结构时，方法的调用顺序是什么？

> ID：13853306
> 
> 赞同：4
> 
> 时间：2012-12-13T05:04:51.000
> 
> 标签：c++

考虑：

```
class Mobile {
  double memory_util;
  public:
  virtual void power_save(double duration) = 0;
};

class Laptop : public Mobile {
  bool is_unlocked;
  protected:
  bool is_charged;
  public:
  void power_save(double duration);
  virtual double remaining_time();
};

class NegativeNumber {}; 
class IPad : public Laptop {
  int generation;
  public:
  void power_save(double duration);
  bool isJailBroken();
};

class HPLaptop : public Laptop {
  int warranty_years; 
  public:
  void extend_warranty(int years);
};

class HPdv6 : public HPLaptop {
  bool repaired;
  public:
  double remaining_time(){  return HPLaptop::remaining_time();  }
  bool is_repaired { return repaired; }
}; 
```

您想要执行以下操作：

```
int main () {
  Mobile* d = new HPdv6();
  Laptop *s = d;
  d->power_save(100);
  cout << “remaining operation time: ” <<
  s->remaining_time() << endl;
  return 0;
} 
```

这里实际上会调用哪些方法？我知道 Mobile 是一个虚函数，但是当你有这样的指针时，我不确定如何处理类层次结构。是否有任何关于类层次结构的技巧可以使处理各种继承类的问题更容易理解？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:11:36.247

一旦您解决了`Laptop *s = d;`（参见[`static_cast<>()`](http://en.cppreference.com/w/cpp/language/static_cast)）中的错误，您会发现`HPdv6`'s`remaining_time()`会被调用并且`Laptop`'s`power_save()`会被调用。

为了过度简化，函数是通过从`HPdv6`继承树开始并向上遍历直到找到方法来解决的。`IPad`不会被使用，因为它没有出现在`HPdv6`and之间`Laptop`，它位于一个单独的分支中。

如果您想要非过度简化的版本，请查找`vtables`. 这是关于它们的维基百科文章：[http ://en.wikipedia.org/wiki/Virtual_method_table](http://en.wikipedia.org/wiki/Virtual_method_table)

# ruby - Ruby ||= 运算符线程安全

> ID：13853318
> 
> 赞同：3
> 
> 时间：2012-12-13T05:05:32.607
> 
> 标签：ruby, multithreading, thread-safety

我已经看到这个运算符被大量使用，我什至每次有零钱时都会使用它。所有很酷的宝石都有这种和平的代码。但是当使用这个操作符时线程安全呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:09:50.550

像任何其他分配一样，如果没有互斥锁，它就不是真正的线程安全。*根据系统中的内核*数量，它可能看起来是线程安全的。我注意到 4 核/8 线程系统的多线程问题比 2 核/2 线程系统要多得多，因此，如果您可以访问其中之一，请使用它来确保您已经得到你正在尝试的任何解决方案。

写锁可能是一件麻烦事，但这是您为生活在多线程世界中所付出的代价。

# java - 如何使用大参数进行 Wicket 重定向？

> ID：13853320
> 
> 赞同：0
> 
> 时间：2012-12-13T05:05:35.213
> 
> 标签：java, wicket

我想使用我的 Wicket (v1.4) 页面中的链接将用户重定向到外部站点。最好在 ModalWindow 或类似窗口中显示外部页面。我的问题是我要重定向到的外部页面有一个很长的参数作为输入（> 75000 个字符）。通常，我会通过 POST 访问该页面，Wicket 是否有类似的可能？我当前的（损坏的）实现如下。

```
RedirectPage page;

....

final ModalWindow dialog= new ModalWindow("dialog");
            dialog.setPageCreator(new ModalWindow.PageCreator() {
                @Override
                public Page createPage() {
                    return page;
                }
            });
            add(dialog);

add(new IndicateModalAjaxSubmitLink("link") {

                @Override
                protected void onError(AjaxRequestTarget target, Form<?> form) {
                    target.addComponent(form);
                }

                @Override
                protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
                        String url = <REALLY_LONG_URL_HERE>;
                        page = new RedirectPage(url);
                        dialog.show(target); 
                }
            }); 
```

编辑：似乎 url 上的当前字符限制是 4096。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:14:27.890

如果您没有其他选择，我认为您可以尝试通过 Javascript 做您想做的事，使用这个巨大的页面参数（通过`AjaxRequestTarget.appendJavaScript`）异步加载网页并将结果显示在您的模态窗口中。

# extjs - 获取 Ext.dataview.List 实例以显示在 Ext.tab.Panel 实例中

> ID：13853324
> 
> 赞同：1
> 
> 时间：2012-12-13T05:06:01.663
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我无法弄清楚如何在另一个对象中显示我的 Ext.dataview.List 对象。如果我尝试在视口中显示 Ext.dataview.List 对象，我可以单独看到我的数据。但是如果我尝试将它作为一个组件包含在另一个组件中，它会认为没有数据（从 HTML 输出判断），并且似乎没有显示任何内容。

所以，如果我有一个带有以下代码的 app.js：

```
Ext.application({
    name: 'MobileUnion',

    views:          ['LocalsList'],
    models:         ['Local'],
    stores:         ['Locals'],

    launch: function() {
        // Initialize the main view
         var mainView = {
                xtype: 'localslist'
        };
        Ext.Viewport.add([mainView]);
    }
}); 
```

我可以这样设置 MobileUnion.view.LocalsList ，这会导致没有列表：

```
Ext.define('MobileUnion.view.LocalsList', {
    extend: 'Ext.Container',
    alias: 'widget.localslist',
    requires: 'Ext.dataview.List',

    config: {
        items: [
            {
                itemId: 'localsList',
                store: 'Locals',
                loadingText: 'Loading Locals...',
                emptyText: '<div>No locals found.</div>',
                onItemDisclosure: true,
                itemTpl: '<div>{localName}</div><div>{designation}</div>'

            }
        ]
    }
}); 
```

或者，我可以这样设置它，这会产生一个填充列表，但不在另一个组件内部：

```
Ext.define('MobileUnion.view.LocalsList', {
    extend: 'Ext.dataview.List',
    alias: 'widget.localslist',

    config: {

                itemId: 'localsList',
                store: 'Locals',
                loadingText: 'Loading Locals...',
                emptyText: '<div>No locals found.</div>',
                onItemDisclosure: true,
                itemTpl: '<div>{localName}</div><div>{designation}</div>'

    }
}); 
```

我试图完成此操作的原因是，我可以让列表组件显示在选项卡面板内。

**注意：我在这里组装了一个小提琴：** [http ://www.senchafiddle.com/#6nCH8](http://www.senchafiddle.com/#6nCH8)

我一定错过了一些基本的东西，但是在这一点上，浏览了文档并购买了两本书，其中一本我已经完全阅读，另一本我在编码时阅读，我仍然没有答案。任何帮助将不胜感激。

**附加代码**

*应用程序/模型/Local.js*

```
Ext.define('MobileUnion.model.Local', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'id',
        fields: [
            { name: 'id', type: 'int' },
            { name: 'dateCreated', type: 'date', dateFormat: 'c' },
            { name: 'localName', type: 'string' },
            { name: 'designation', type: 'string' }
        ],
    }
}); 
```

*应用程序/商店/Locals.js*

```
Ext.define('MobileUnion.store.Locals', {
    extend: 'Ext.data.Store',
    requires: ['MobileUnion.model.Local'],
    config: {
        model: 'MobileUnion.model.Local',
        data: [
            { localName: 'ABCD', designation: '123' },
            { localName: 'WXYZ', designation: '456' }
        ],
        autoLoad: true,
        sorters: [{ property: 'dateCreated', direction: 'DESC'}]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:03:29.087

在选项 1 中，您定义了一个容器，但实际上并未将项目添加到您的容器中。要将您的列表添加到容器中，请添加`xtype: 'list'`到您的 items 数组。接下来您要做的是将容器布局设置为适合，否则列表将不会显示。这应该适合你：

```
Ext.define('MobileUnion.view.LocalsList', {
    extend: 'Ext.Container',
    alias: 'widget.localslist',
    requires: 'Ext.dataview.List',

    config: {
        layout: {
            type: 'fit' //set containers layout
        },
        items: [
            {
                xtype: 'list', //add xtype
                itemId: 'localsList',
                store: 'Locals',
                loadingText: 'Loading Locals...',
                emptyText: '<div>No locals found.</div>',
                onItemDisclosure: true,
                itemTpl: '<div>{localName}</div><div>{designation}</div>'

            }
        ]
    }
}); 
```

有关 Sencha 布局的更多信息：[http ://docs.sencha.com/touch/2-1/#!/guide/layouts](http://docs.sencha.com/touch/2-1/#!/guide/layouts)

祝你好运！

# php - 在 PHP 中一行回显

> ID：13853325
> 
> 赞同：0
> 
> 时间：2012-12-13T05:06:02.093
> 
> 标签：php, echo

我想更改我拥有的原始代码，

```
echo "<p><strong>" . __('Area:', 'honegumi') . "</strong> " . number_format($productarea) . " m² (";
echo metersToFeetInches($productarea) . " ft²)" . "</p>"; 
```

成`echo`一行，如下所示：

```
echo "<p><strong>" . __('Area:', 'honegumi') . "</strong> " . number_format($productarea) . " m² (" . metersToFeetInches($productarea) . " ft²)" . "</p>"; 
```

**但是在第二个案例中，对于metsToFeetInches($productarea)**，我遇到了一些奇怪的换行符。

生成的 HTML：

```
 24,757
<p>
<strong>Area:</strong>
2,300 m² ( ft²)
</p> 
```

输出：

```
    24,757

    **区域：**
    2,300 平方米（平方英尺）

```

我该如何解决？有没有我可以阅读的文档来学习将来如何自己做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:29:32.917

我很确定我知道这里发生了什么，你的函数`metersToFeetInches`是`echo`ing 一个值而不是`return`ing 它。

```
function metersToFeetInches() {
   echo 'OUTPUT';
}

echo 'FIRST '.metersToFeetInches().' LAST';
// Outputs: OUTPUTFIRST  LAST 
```

`echo metersToFeetInches()`实际上是多余的。

这是因为该函数在您构建的字符串实际输出之前运行。请注意，您发布的两个示例都会出现此问题。改为将您的函数更改为`return`一个值。之后，您使用过它的任何地方都是这样：

```
echo 'Something';
metersToFeetInches();
echo 'Something Else'; 
```

您必须使用`echo`：

```
echo 'Something';
echo metersToFeetInches();
echo 'Something Else'; 
```

函数应该几乎总是`return`一个值。也许吸取了教训？

* * *

如果您确实处于绑定状态并且无法更改功能，则必须求助于[输出缓冲](http://php.net/manual/en/book.outcontrol.php)：

```
ob_start();
metersToFeetInches($productarea);
$metersToFeetInches = ob_get_clean();

echo "<p><strong>" . __('Area:', 'honegumi') . "</strong> " . number_format($productarea) . " m² (" . $metersToFeetInches . " ft²)" . "</p>"; 
```

...不得不这样做是相当愚蠢的。

# java - 使用 jsch 执行命令 ntpq -p

> ID：13853327
> 
> 赞同：1
> 
> 时间：2012-12-13T05:06:17.313
> 
> 标签：java, linux, jsp, jsch, hp-ux

我正在开发一个 JSP Web 应用程序，它将用于监视我办公室中不同 HP-ux 和 Linux 服务器的系统参数。我正在使用 jsch 在远程系统上执行命令。我的问题是 jsch 对于`ntpq -p`.

我正在尝试使用命令获取与系统同步的服务器`ntpq -p | tail -1 | awk '{ print $1 }'`。但它返回null。但是像这样 `mpstat | tail -1 | awk '{ print $12 }'`的命令工作正常并返回结果。谁能告诉我我做错了什么以及任何可能的解决方法......？

这是我为此目的使用的代码！

```
package com.bpcl.sysmon;
import java.io.IOException;
import java.io.InputStream;
import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelExec;
import com.jcraft.jsch.JSch;

public class Sys 
{
String line;
String host="**.**.**.***";         
String user="******";         
String password="***********";         
String result = null;

public String getdata(String command1) throws IOException
{

    try
    {      
        result = null;
        java.util.Properties config = new java.util.Properties();              
        config.put("StrictHostKeyChecking", "no");             
        JSch jsch = new JSch();             
        com.jcraft.jsch.Session session=jsch.getSession(user, host, 22);             
        session.setPassword(password);             
        session.setConfig(config);             
        session.connect();             

        Channel channel=session.openChannel("exec");   
        ((ChannelExec) channel).setCommand(command1);       
        channel.setInputStream(null);             
        ((ChannelExec)channel).setErrStream(System.err);                           
        InputStream in=channel.getInputStream();             
        channel.connect();             
        byte[] tmp=new byte[1024];             
        while(true)
        {               
            while(in.available()>0){                 
                int i=in.read(tmp, 0, 1024);                 
                if(i<0)break;                 
                result = (new String(tmp, 0, i));               
                }              
            if(channel.isClosed())
            {                
                System.out.println("exit-status: "+channel.getExitStatus());                
                break;               
                }               
            try
            {
                Thread.sleep(1000);}catch(Exception ee){}            
                }             
        channel.disconnect();             
        session.disconnect();             
        System.out.println("DONE");         
        }
    catch(Exception e)
    {             
        e.printStackTrace();         
    } 

    return result;

 } 

 public String getcpu(boolean linux)
{  

    String res1 = null;
    try {
        if(linux)
        res1 = getdata("mpstat | tail -1 | awk '{ print $12 }'");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return res1;
}

public String getntp(boolean linux)
{  
    String res1 = null;
    try {
        if(linux)
        res1 = getdata("ntpq -p | tail -1 | awk '{ print $1}'");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return res1;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T14:01:59.407

您可以比较“ `which ntpq`”来自您的 java 应用程序的输出，并通过实际运行来自已知 ssh 客户端（如 putty）的“ *which ntpq ”。*

如果两者都指向不同的二进制文件，则必须在 java 应用程序中指定完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:31:06.253

时间同步有两种方式。大满贯或Slew。然后你猛击你根据从服务器接收到的时间在你的时间客户端上设置时间。但是有些应用程序无法处理突然的时间变化。因此，您需要旋转（逐渐将其更改为更正）。

要猛击，您需要使用 ntpdate 作为命令。

要旋转，您需要使用一个名为 ntpd（或 xntpd）的守护进程。要运行它，您需要配置 ntp.conf，并`server dns/ip`在 conf 文件中有。然后加载ntpd（或xntpd）。

当它在回转时需要时间来校正，因此要跟踪时间校正的进度，您需要使用 ntpq 命令（ntp 查询）。不要使用 ntpq 进行同步。

ntpq 是一个命令行提示工具。要获得状态，您需要运行 ntpq 命令。有关更多指导和详细信息，请使用[此处](http://www.slideserve.com/vicky/ntpv3-time-synchronization-service)

我为 Netware 开发了 ntp，同样的命令也适用于所有的 unix 风格，因为 ntp 一直是一个开源项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T18:21:53.597

这是我几年以来使用的确切代码，您可以试一试，但我认为没有重大差异可以使其正常工作，而您的代码则不能：

```
private static final String URL = "user@yourmachine.com";
private static final String PASSWORD = "password";

public static String getQueryShell(String p_sCommand)
{
    StringBuilder sbResponse = null;

    try
    {
        JSch jsch=new JSch();  

        String host = URL;
        String user=host.substring(0, host.indexOf('@'));
        host = host.substring(host.indexOf('@')+1);
        String password = PASSWORD;

        Session session=jsch.getSession(user,host,22);

        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking","no");
        session.setConfig(config);
        // username and password will be given via UserInfo interface.
        session.setPassword(password);
        session.connect();

        Channel channel=session.openChannel("exec");
        ((ChannelExec)channel).setCommand(p_sCommand);

        channel.setInputStream(null);

        ((ChannelExec)channel).setErrStream(System.err);

        InputStream in=channel.getInputStream();

        channel.connect();

        byte[] tmp=new byte[1024];

        sbResponse = new StringBuilder();

        while(true)
        {
            while(in.available()>0)
            {
                int i=in.read(tmp, 0, 1024);

                if(i<0)break;

                sbResponse.append(new String(tmp, 0, i));
            }
            if(channel.isClosed())
            {
                //System.out.println("exit-status: " + channel.getExitStatus());
                break;
            }

            try
            {
                Thread.sleep(1000);
            }
            catch(Exception ee)
            {

            }
        }
        channel.disconnect();
        session.disconnect();
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    return sbResponse.toString();
} 
```

# sql - 使用 select 语句和序列创建视图

> ID：13853328
> 
> 赞同：1
> 
> 时间：2012-12-13T05:06:18.317
> 
> 标签：sql, oracle11g

我已经使用 select 语句创建了一个视图，但我需要添加一个新字段 USER_ID，它显示了随每条记录递增的序列 (USER_ID_SEQ)。可能吗？我知道您可以使用 UNION 创建带有两个选择语句的视图，但我不确定如何将序列添加到视图中。下面是我用于第一个 SELECT 语句的查询。

```
create or replace view FINAL_WEB_LOG
as
SELECT SESSION_DT, 
     C_IP, 
     CS_USER_AGENT,
     tab_to_string(CAST(COLLECT(web_link) AS t_varchar2_tab)) WEBLINKS
FROM web_views_tab    
GROUP BY C_IP, CS_USER_AGENT, SESSION_DT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:10:38.257

尝试使用嵌套查询`select`：

```
 create or replace view FINAL_WEB_LOG
  as
  SELECT (SELECT USER_ID_SEQ.NEXTVAL from dual) as USER_ID,
     SESSION_DT, 
     C_IP, 
     CS_USER_AGENT,
     tab_to_string(CAST(COLLECT(web_link) AS t_varchar2_tab)) WEBLINKS
 FROM web_views_tab    
 GROUP BY C_IP, CS_USER_AGENT, SESSION_DT 
```

这应该可行，但我相信`USER_ID_SEQ.NEXTVAL`每次刷新视图都会不断增加。

如果您只想关联一个 ID 字段，那么只需使用`ROWNUM`as：

```
 create or replace view FINAL_WEB_LOG
  as
  SELECT ROWNUM as USER_ID,
     SESSION_DT, 
     C_IP, 
     CS_USER_AGENT,
     tab_to_string(CAST(COLLECT(web_link) AS t_varchar2_tab)) WEBLINKS
 FROM web_views_tab    
 GROUP BY C_IP, CS_USER_AGENT, SESSION_DT 
```

# jsf-2 - 使用 primefaces 3.3 和 jsf 2.0 在数据网格内分组单选按钮

> ID：13853330
> 
> 赞同：1
> 
> 时间：2012-12-13T05:06:20.533
> 
> 标签：jsf-2

我是 jsf 2.0 的新手，因此我面临一个严重的问题，将主要面孔数据网格和单选按钮分组。我正在使用 JSF 2.0-Primefaces 3.3、java 1.6，并在 Windows 操作系统的 tomcat 服务器上运行我的应用程序。

问题是分组数据网格和单选按钮。以下段落将描述示例代码：

```
 @ManagedBean(name="quickBill")
    @ViewScoped
    public class QuickBill extends BaseManagedBean implements Serializable {
private List<String[]> insurerIDs=null;

@PostConstruct
public void init(){

    loadInsurer();
}   

private void loadInsurer(){
    logger.info("Entered Load Insurer");
    insurerIDs = new ArrayList<String[]>();

    if (null != insurerList) {
        insurerIDs.add(new String[] {"InsurerID1","Insurer_Name1") });
        insurerIDs.add(new String[] {"InsurerID2","Insurer_Name2") });
        insurerIDs.add(new String[] {"InsurerID3","Insurer_Name3") });
        insurerIDs.add(new String[] {"InsurerID4","Insurer_Name4") });

    }
}
public List<String[]> getinsurerIDs() {
    return insurerIDs;

}

  } 
```

jsf代码如下：

```
 <p:dataGrid  var="quickBillVar" value="#{quickBill.insurerIDs}" columns="4" > 
        <p:column selectionMode="single">                              
           <p:selectOneRadio id="options" value="#{quickBill.selectedOption}">                    
          <f:selectItem itemLabel="#{quickBillVar[1]}" itemValue="#{quickBillVar[1]}"/>   
          </p:selectOneRadio>   
          <p:commandLink id="insurerid"  title="Isurer">
   <p:graphicImage value="../../images/insurers1/#{quickBillVar[0]}.jpg"/>   
 </p:commandLink>   
   </p:column>                                  
   </p:dataGrid> 
```

上面的代码在执行时会显示单选按钮，这允许用户同时选择多个单选按钮。然而，要求是限制用户只选择一个按钮，而不是允许用户一次选择多个按钮。我还使用 selectionMode="single" 来产生预期的输出，但它并没有太大帮助。

请帮助我或为我提供可以解决此问题的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:51:35.707

您可以使用以下代码尝试`Map`。

支持 bean 代码

```
String selectedInsurer;
Map<String,String> insurerIDs = new LinkedHashMap<String,String>();
insurerIDs.put("InsurerID1", "Insurer_Name1"); //(label, value)
insurerIDs.put("InsurerID2", "Insurer_Name2");
insurerIDs.put("InsurerID3", "Insurer_Name3");
insurerIDs.put("InsurerID4", "Insurer_Name4");
//-- getter & setter 
```

在前端

```
<h:selectOneRadio value="#{quickBill.selectedInsurer}">
    <f:selectItems value="#{quickBill.insurerIDs}" />
</h:selectOneRadio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:08:30.760

我相信这个例子中的自定义布局会有所帮助。 [https://www.primefaces.org/showcase/ui/input/oneRadio.xhtml](https://www.primefaces.org/showcase/ui/input/oneRadio.xhtml)

# iphone - Facebook 在 xcode 4.5 中与 ios6 的集成？

> ID：13853332
> 
> 赞同：1
> 
> 时间：2012-12-13T05:06:26.523
> 
> 标签：iphone, xcode, facebook-login

我需要将 Facebook 登录页面集成到我的应用程序中。即我为用户提供各种登录选项，例如他可以使用我的网站帐户或 Facebook 帐户登录并继续在我们的应用程序中进行活动就是这样。我不希望他执行任何其他活动用facebook。他可以登录。

所以我通过了一些教程，说拖放 FBConnect 并编写一些代码。但是当我拖放 FBConnect 时，当我编译项目时出现错误，说 FBConnect/FBSession.h 未找到等。

有时 Facebook 教程说在使用 FBConnect 时使用 Appkey 和 AppSecret。但有时他们在导入 FacebookSDK.framework 时不使用

我不明白我该如何继续前进。我应该使用 FBConnect 吗？是否需要 AppKey？**我只想为用户提供选项，让他也可以在我的应用程序中通过 Facebook 登录**

请在这方面指导我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:13:50.133

是的，即使为用户提供使用 facebook 登录的选项，您也需要集成 facebook sdk 并且需要应用程序 ID。由于您使用的是 xcode 4.5，因此您必须使用 facebook sdk 3.1 而不是 3.0。（它会给出错误）。查看developers.facebook.com，他们提供了您想要的所有详细信息。

[http://developers.facebook.com/docs/reference/ios/3.1/](http://developers.facebook.com/docs/reference/ios/3.1/)

[http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)

首先，您需要为您的应用程序设置环境：-

[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

然后实现登录功能：-

[http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

我希望这可能对你有所帮助。

# java - DFS 查找所有可能的路径

> ID：13853337
> 
> 赞同：0
> 
> 时间：2012-12-13T05:06:53.013
> 
> 标签：java, graph, graph-algorithm

我有以下 Java 代码，它在图中找到从一个节点到另一个节点的路径，如何修改它以便我可以显示所有可能的路径。这里它只显示一个路径，并且它是一个循环？

**输出：** 路径：[1, 2, 3, 4, 1]

**对于节点 1 和 4 之间的路径，正确的输出应该是：**

第一条路径：1 -> 2 -> 3 -> 4

第二条路径：1 -> 3 -> 4

**代码：**

```
import java.util.Iterator;
import java.util.Set;
import java.util.Stack;
import java.util.TreeSet;
import java.util.List;
import java.util.ArrayList;

public class Graph {

    Stack<Integer> pilha = new Stack<Integer>();

    private int numVertex;
    private boolean[][] adj;

    public Graph(int numVertex, int numEdges) {
        this.numVertex = numVertex;
        this.adj = new boolean[numVertex][numVertex];
    }

    public void addEdge(int start, int end){
        adj[start-1][end-1] = true;
        adj[end-1][start-1] = true;
    }

    List<Integer> visited = new ArrayList<Integer>();
    public void DFS(Graph G, int startVertex){
        int i=0;
        pilha.push(startVertex);

        while (!pilha.empty()) {
            int v = pilha.peek();
            Boolean hasNeighbor = false;
            for (i = 1; i <= G.numVertex; i++) {
                if(G.adj[i-1][v-1] != false) {
                    hasNeighbor = true;
                    pilha.push(i);
                    G.adj[i-1][v-1] = false;
                    G.adj[v-1][i-1] = false;
                    break;
                }
            }
            if (!hasNeighbor) {
                visited.add(0, pilha.pop());
            }
        }
        System.out.println("Path: " + visited);
    }

    public static void main(String[] args) {
        Graph g = new Graph(4, 4);
        g.addEdge(1, 2);
        g.addEdge(2, 3);
        g.addEdge(1, 3);
        g.addEdge(3, 4);
        g.DFS(g, 1);    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T07:42:34.857

在您的代码中，您没有提到目标，这是找到源和目标之间所有可能路径的解决方案。

```
import java.util.ArrayList; 
```

导入 java.util.List；

公共类 DepthFirstSearch {

```
// recursive dfs
private static void dfs_rec(ArrayList<ArrayList<Integer>> adjLists, boolean[] visited, int v, int d,
        List<Integer> path) {
    visited[v] = true;
    path.add(v);

    if (v == d) {

        for (int i = 0; i < path.size(); i++) {
            System.out.print(path.get(i));
        }
        System.out.println("");
    }

    else {
        for (int w : adjLists.get(v)) {
            if (!visited[w]) {
                dfs_rec(adjLists, visited, w, d, path);
            }

        }
    }
    path.remove(path.size() - 1);
    visited[v] = false;
}

// Usually dfs_rec() would be sufficient. However, if we don't want to pass
// a boolean array to our function, we can use another function dfs().
// We only have to pass the adjacency list and the source node to dfs(),
// as opposed to dfs_rec(), where we have to pass the boolean array
// additionally.
public static void dfs(ArrayList<ArrayList<Integer>> adjLists, int s, int d) {
    int n = adjLists.size();
    boolean[] visited = new boolean[n];

    List<Integer> path = new ArrayList<Integer>();
    int path_index = 0; // Initialize path[] as empty
    dfs_rec(adjLists, visited, s, d, path);
}

// ----------------------------------------------------------------------
// Testing our implementation
public static void main(String[] args) {

    // Create adjacency list representation
    ArrayList<ArrayList<Integer>> adjLists = new ArrayList<ArrayList<Integer>>();
    final int n = 7;

    // Add an empty adjacency list for each vertex
    for (int v = 0; v < n; v++) {
        adjLists.add(new ArrayList<Integer>());
    }

    // insert neighbors of vertex 0 into adjacency list for vertex 0
    adjLists.get(0).add(1);
    adjLists.get(0).add(2);
    adjLists.get(0).add(3);

    // insert neighbors of vertex 1 into adjacency list for vertex 1
    adjLists.get(1).add(5);
    adjLists.get(1).add(6);

    // insert neighbors of vertex 2 into adjacency list for vertex 2
    adjLists.get(2).add(4);

    // insert neighbors of vertex 3 into adjacency list for vertex 3
    adjLists.get(3).add(2);
    adjLists.get(3).add(4);

    // insert neighbors of vertex 4 into adjacency list for vertex 4
    adjLists.get(4).add(1);

    // insert neighbors of vertex 5 into adjacency list for vertex 5
    // -> nothing to do since vertex 5 has no neighbors

    // insert neighbors of vertex 6 into adjacency list for vertex 5
    adjLists.get(6).add(4);

    // Print vertices in the order in which they are visited by dfs()
    dfs(adjLists, 0, 4);

} 
```

}

# javascript - Jquery span：contains 不起作用

> ID：13853339
> 
> 赞同：0
> 
> 时间：2012-12-13T05:07:14.340
> 
> 标签：javascript, jquery, jquery-selectors

仅当跨度具有某些文本时，我才需要启用 div，但是无论我在“包含”括号中放置什么，都会启用 div。甚至是随机的胡言乱语。在我的页面头部，我引用了谷歌的 jquery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

然后在结束正文标记之前运行我的脚本

```
<script>
if($("span:contains('abc123')")){
document.getElementById("mydiv").style.display = "block";
}
</script> 
```

我究竟做错了什么？非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:13:29.763

我会做如下的事情：

```
<script>
if($("span:contains('abc123')").length > 0){
$("#mydiv").css("display","block")
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:09:38.053

您必须检查该元素是否确实存在。选择器将始终返回一个真实值。该`length`属性将告诉您集合中有多少这些元素（如果有）：

```
if( $("span:contains('abc123')").length ) { 
  //^^ elements exist
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:13:53.803

是的，我相信这已经得到解答，但只是补充一下：

```
if( $("span:contains('abc123')").length ) { 
  $("#mydiv").show();
} 
```

我认为这会更好，因为页面上已经有 jQuery。

# javascript - 在屏幕中央弹出成功消息，所有其他元素位置都是静态的

> ID：13853346
> 
> 赞同：0
> 
> 时间：2012-12-13T05:08:08.477
> 
> 标签：javascript, jquery, html, css

我希望能够在屏幕中央创建一个弹出成功消息，并且 z-index 大于所有其他元素，以便它出现在它们的前面。但是，我页面中的所有 html 元素都有样式`display:static;`（内容 div、标题、侧边栏等），所以仍然可以这样做吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:17:11.437

如果所有元素都是静态定位的，那么弹出消息将始终显示在顶部。默认情况下，静态元素的 z-index 为 0，因此设置任何具有更高 z-index 和 position:[relative, absolute, fixed] 的元素都会将其置于顶部。

[在此处](http://www.w3.org/TR/CSS21/visuren.html#z-index)阅读更多内容，css-tricks 对 z-index 有很好的概述/教程。[http://css-tricks.com/almanac/properties/z/z-index/](http://css-tricks.com/almanac/properties/z/z-index/)

# android - 我的嵌入视频没有在 WebView 中播放

> ID：13853348
> 
> 赞同：1
> 
> 时间：2012-12-13T05:08:30.300
> 
> 标签：android, android-webview, android-websettings

我想在 android [http://www.youtube.com/embed/hLw8RZ10PLo?showsearch=0&autoplay=1&rel=0的 webview 中播放这个视频](http://www.youtube.com/embed/hLw8RZ10PLo?showsearch=0&autoplay=1&rel=0)

但是搜索了它，我已经实现了我所得到的一切

这是我的代码

```
package com.example.webapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebSettings.PluginState;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView myWebView = (WebView)findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        final WebSettings.PluginState ON = webSettings.getPluginState().ON;
        webSettings.setUserAgentString("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.36 (KHTML, like Gecko) Chrome/13.0.766.0 Safari/534.36");

        webSettings.setPluginState(ON);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setPluginsEnabled(true);
        webSettings.setAllowFileAccess(true);
        myWebView.loadUrl("http://www.youtube.com/embed/hLw8RZ10PLo?showsearch=0&autoplay=1&rel=0");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

} 
```

这是我的xml

```
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/webview" >

</WebView> 
```

我在我的**android 2.3.6**版本和清单文件中播放这个视频，我用过

```
android:harwareAccelerated="true" 
```

但是我的视频仍然没有运行。任何人都可以帮助我，我从昨天开始就陷入了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:17:39.033

使用Webview，为html标签创建一个字符串，添加iframe标签并传递视频和url的高度和宽度。并在 webview 中加载字符串

```
<iframe width="420" height="345"
src="http://www.youtube.com/embed/XGSy3_Czz8k">
</iframe> 
```

在webview的loaddata中添加字符串

```
webView.loadData(strHTMLTags, "text/html", "UTF-8"); 
```

# linux - 在 Cloudbees 中更改全局超时持续时间

> ID：13853354
> 
> 赞同：0
> 
> 时间：2012-12-13T05:09:09.600
> 
> 标签：linux, jenkins, jmeter, cloudbees

我在 cloudbees 中使用 jenkins 来建立我的 linux 机器之间的连接并执行我的 tets 脚本，但是连接在 480 分钟内超时，因此配置为 14 小时的测试因此而失败，是否有机会更改连接超时设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:50:02.467

设置此全局超时是为了防止挂起的构建消耗您所有的 cloudbees 信用。如果您要运行如此长的构建，我们可以更改此值。请在 support.cloudbees.com 上打开支持票证，并使用您要为构建设置的最大值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T14:33:17.750

此配置可用于：

```
Manage Jenkins > Configure System > Global build timeout in minutes 
```

# java - 如何将分隔的平面文件解析为 POJO

> ID：13853357
> 
> 赞同：4
> 
> 时间：2012-12-13T05:09:13.907
> 
> 标签：java

感谢有人能指出并推荐如何将扁平管道分隔的文件解析为 JAVA Pojo。

例如。平面文件 0001|XYZ|120

这需要被读入具有

```
public class pojo {

private String acct;
private String customer;
private int balance;
} 
```

我可以将整个输入文件作为一个集合读取，但是，最终会将每个令牌设置为一个 pojo 成员。相反，我想解析成 pojo 成员。类似于 CASTOR XML 映射到 POJO 的东西。

感谢在这方面的任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T05:24:32.857

您可以使用[Bean IO](http://www.beanio.org/)。我一直在广泛使用它。

像这样配置你的 XML

```
<stream name="employees" format="delimited" strict="true">
  <parser>  
    <property name="delimiter" value="|" />
  </parser>
  <record name="test" class="example.Pojo" minOccurs="1" maxOccurs="1">
      <field name="act" />
      <field name="customer" />
      <field name="balance" type="int" />
    </record>
 </stream> 
```

有关详细信息，请参阅[此处](http://www.beanio.org/2.0/docs/reference/index.html#Introduction)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T05:16:35.010

OopenCSV [http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)有你要找的东西。只需将分隔符更改为`|`from `,`。你应该准备好了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T05:44:16.377

我只需一次读取一行，拆分值并调用 POJO 构造函数（如果不可用，则创建一个），例如：

```
 List<pojo> pojoList = new ArrayList<pojo>();
   BufferedReader br = new BufferedReader(new FileReader("FlatFile.txt"));
   String line = "";
   while((line = br.readLine()) != null) {  
       String[] fields = line.split("\|");
       pojo p = new pojo(fields[0], fields[1], fields[2]);
       pojoList.add(p);
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:13:18.177

另一个论坛根据 JayaMohan 的建议推荐了 smooooth（谢谢），我可以使用 beanio 将平面文件映射到 POJO。你可以得到[beanio](http://www.beanio.org/2.0/docs/reference/index.html#Introduction)

使用beanio的完整源码

```
 /**
 * Read inputFile and map to BeanIO Mapping file and bind to pojo
 * 
 * @param inputFile
 * @param mappingFile
 */
public void flatToBeanReader(String inputFile, String mappingFile) {
    /**
     * create a StreamFactory
     */
    StreamFactory factory = StreamFactory.newInstance();
    /**
     * load the mapping file
     */
    factory.load(mappingFile);
    /**
     * use a StreamFactory to create a BeanReader
     */
    BeanReader in = factory.createReader("customers", new File(inputFile));
    TestCustomerBean cust;
    while ((cust = (TestCustomerBean) in.read()) != null) {
        System.out.println("acct: ["
                + cust.getAcct()
                    + "] customer: ["
                    + cust.getCustomer()
                    + "] balance: ["
                    + cust.getBalance()
                    + "]");
    }
    in.close();
} 
```

映射文件

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://www.beanio.org/2012/03/mapping.xsd">

```
<stream name="customers" format="delimited" strict="false">
    <parser>
        <property name="delimiter" value="|" />
    </parser>
    <record name="cust" class="TestCustomerBean">

        <field name="acct" />
        <field name="customer" />
        <field name="balance" type="Double" />
    </record>
</stream> 
```

输出将是
账户：[12345] 客户：[ABC 公司] 余额：[120.45] 账户
：[34567] 客户：[XYZ 公司] 余额：[45.0]
账户：[99999] 客户：[MNC 银行] 余额：[67.0 ]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T07:43:56.677

感谢大家的快速回复。根据 Thihara 的建议，设法让 OPENCSV 正常工作（感谢 Glen Smith 和 Kyle Miller 对 Bean Mapping 的贡献）从 OPENCSV 获取 opencsv- [2.3.jar](http://opencsv.sourceforge.net/)

我正在发布完整的源代码以使像我这样的其他人受益。

输入文件

```
/**
     * Input File: acct_os.txt
     * 
     * <pre>
     * 12345|ABC Company|120.45
     * 34567|XYZ Company|45.00
     * 99999|MNC Bank|67.00
     */

/**
 * Bind File to a POJO
 * 
 * @param inputFile
 * @param delim
 * @throws FileNotFoundException
 */
public void bindFileToPojo(String inputFile, char delim) throws FileNotFoundException {

    System.out.println("\n===== Reading to a POJO\n");

    ColumnPositionMappingStrategy<TestCustomerBean> strat = new ColumnPositionMappingStrategy<TestCustomerBean>();
    strat.setType(TestCustomerBean.class);
    /**
     * the fields to bind do in your JavaBean
     */
    String[] columns = new String[] { "acct", "customer", "balance" };
    strat.setColumnMapping(columns);

    CsvToBean<TestCustomerBean> csv = new CsvToBean<TestCustomerBean>();
    /**
     * Read file contents to list using CSVReader
     */
    List<TestCustomerBean> list = csv.parse(strat, new CSVReader(new FileReader(inputFile), delim));
    /**
     * Display column mapping
     */
    displayColumnMapping(strat.getColumnMapping());

    for (TestCustomerBean bean : list) {
        System.out.println("account: ["
                + bean.getAcct()
                    + "] customer: ["
                    + bean.getCustomer()
                    + "] balance: ["
                    + bean.getBalance()
                    + "]");
    }
}

/**
 * Display column mapping
 * 
 * @param columns
 */
private void displayColumnMapping(String[] columns) {
    for (String column : columns) {
        System.out.println("Column Mapping-->" + column);
    }
} 
```

TestCustomerBean（getter/setter 省略）

```
private String acct;
private String customer;
private Double balance; 
```

输出将是

===== 读取 POJO

列映射-->acct
列映射-->customer
列映射-->balance
account: [12345] customer: [ABC Company] balance: [120.45]
account: [34567] customer: [XYZ Company] balance: [45.0]
帐户：[99999] 客户：[MNC 银行] 余额：[67.0]

# jquery - jQuery attr 标题问题

> ID：13853358
> 
> 赞同：-2
> 
> 时间：2012-12-13T05:09:14.603
> 
> 标签：jquery

我无法动态更改 div 的标题属性。这是我的代码：

**编辑：**

```
<div id='DivId'></div> 
```

这个 div 是对话框 div。点击按钮“第一”和“第二”，对话框将打开

```
// On click of button First:
$('#DivId').removeAttr('title');
$('#DivId').attr('title','first');

// On click of button Second:
$('#DivId').removeAttr('title');
$('#DivId').attr('title','second'); 
```

在第一个按钮单击时，`title`仅保留，但是，在单击第二个按钮时，标题不会改变。

**编辑**

如果我删除`$('#DivId').removeAttr('title');`，那么它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:21:16.227

我认为这应该足够了：

```
// On click of button First:
$('#DivId').attr('title','first');

// On click of button Second:
$('#DivId').attr('title','second'); 
```

...您不需要使用`removeAttr`，因为该属性`title`将被新设置覆盖。

**编辑**：见**[jsfiddle](http://jsfiddle.net/6eywk/)** ...不需要使用`removeAttr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:29:19.243

你必须这样做：http: **[//jsfiddle.net/haeze/](http://jsfiddle.net/jjMQW/)**

```
$(document).on('click', '#btn1', function() {
    $('#Divid').removeAttr('title');
    $('#Divid').attr('title', 'first');
});

$(document).on('click', '#btn2', function() {
    $('#Divid').removeAttr('title');
    $('#Divid').attr('title', 'second');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:10:04.727

不知道但`$('#Divid').attr('title', 'first');`不适合我...所以我尝试先删除`$('#Divid').removeAttr('title');`，然后应用新标题。但没有奏效。所以我做了 2 Div 而不是 1，并相应地给出标题

# c# - UI 上的方法调用意外行为

> ID：13853360
> 
> 赞同：0
> 
> 时间：2012-12-13T05:09:26.567
> 
> 标签：c#, methods

我正在尝试学习如何在整个`Wpf`应用程序中调用方法。

在一个基本实验中，我有两个页面，`PageData`并且`MainPage`.

`PageData`代码：

```
namespace AppName
{
    public sealed partial class PageData 
    {
        public PageData()
        {
            this.InitializeComponent();
        }

        // works
        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            mTest();
        }

        public bool mTest()
        {
            var newTbx = new TextBox{
                Text = "Hello",
                FontSize = 50
                };

            Grid.SetRow(newTbx, 3);
            Grid.SetColumn(newTbx, 3);
            gridMainPageData.Children.Add(newTbx);

            return true;
        }
    }
} 
```

`MainPage`代码：

```
namespace AppName
{
    public sealed class MainPage
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void pageRoot_Loaded(object sender, RoutedEventArgs e)
        {
             PageData passCall = new PageData();

             mDisplayAlert(passCall.mTest().ToString());
        }
    }
} 
```

似乎该方法`mTest()`已完成，因为`MainPage`加载时我得到了“真实”响应（我有一个用于在 UI`mDisplayAlert`上显示消息的方法`MainPage`），但 UI 上的`PageData`并没有改变。我知道这很`mTest()`有效，因为按钮单击事件`PageData`确实有效。

为什么从 MainPage 调用时 UI 不更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:18:18.663

因为当你真正想做的是使用同一个实例来访问完全相同的控件时，你创建了一个`PageData`内部的新实例。`MainPage`当您调用该`.test()`方法时，您会创建一个全新的`TextBox`并将数据分配给一个全新的`Grid`，当您认为您正在编写您的第一个`PageData`实例时。

从那里你有很多选择。你可以 ：

*   创建实例时，将实例的引用传递`PageData`给其他表单。

*   `PageData`使用对实例的引用在两个类之间创建一个事件。
*   加入你的方法和控件`Static`，`PageData`以确保整个程序共享同一个实例。（完全不推荐）
*   如果您想解决一些问题，您始终可以将您的方法设置为`Static`并创建`Static`控件实例的副本。然后编译器会询问控件的引用，您可以使用.（也不是一个好习惯）`Static`分配实例副本。`Controls.Find(yourControl)`

就我个人而言，我会使用选项 1，但现在你知道你有选择权。

# javascript - 等待多个异步 facebook 请求

> ID：13853361
> 
> 赞同：1
> 
> 时间：2012-12-13T05:09:34.450
> 
> 标签：javascript, synchronization

需要等待几个对 facebook 的请求完成，然后再对页面采取最终操作（更新返回信息的请求数量），但不知道如何处理它。

您如何检查每个功能是否完整并在触发功能之前更新计数器。
**`window.load`**除非登录后刷新页面，否则为时过早...？

```
 window.fbAsyncInit = function () {
     FB.init({
     appId: 'id', // App ID
     //channelUrl: '//facebookdev.smithbrosagency.com/LOL/xss_channel.htm', // Channel File
     status: true, // check login status
     cookie: true, // enable cookies to allow the server to access the session
     xfbml: true  // parse XFBML
     });

     getStatus();

      //Subscribe to events
     FB.Event.subscribe('auth.statusChange', function (response) { if (response.authResponse) { getStatus(); } });
     FB.Event.subscribe('auth.login', function (response) { if (response.status === 'connected') { getStatus(); } });
    };
     function getStatus() {
      FB.getLoginStatus(function (response) {

      if (response.status === 'connected') {
       setPanel('results'); // connected

       var accessToken = response.authResponse.accessToken;

       var obj = getPermissionsObject(function (permissions) {

       getUserInfo(response);

       getUserPhotos(response, accessToken);

       getFriends(response, accessToken);

       getUserLocations(response, accessToken);

       getUserMusic(response, accessToken);

       getUserMovies(response, accessToken);

           });
      } else {
       setPanel('login'); // not logged in or unauthorized
      }
      });
     }
     function getUserPhotos(response, accessToken) {

      FB.api('/me/photos?access_token=' + accessToken, function (response) {
      var photoList = response.data;
      var len = photoList.length;
      if (len >= 3) {

       var max = 3;
   if (len > max) { len = max }; // cap it at 3

   for (var i = 0; i < len; i++) {
   (function () {
    var j = i;
    var idx = i + 1;
    $('.result2 .option' + idx + ' input').val(photoList[i].picture);
    $('.result2 .option' + idx + ' img').attr("src", photoList[i].picture);

       })();
    }
       $('div.result2').addClass("active");
       $('#q2 input').val(1); // add to hidden to count results
          }
    else {
       // hide & subtract from total questions
       $('div.result2').addClass("inactive");
       $('#q2 input').val(0); 
      }
      });
     }

     $(window).load(function () {
      $.when($('#q2 input').val() != '' && $('#q4 input').val() != '' && $('#q5 input').val() != '').then(test());

      function test() {

      // calc total questions
      var total = 0;

      $("#Results div input[hidden]").each(function () {
       total += $(this).val() * 1;
      });
      alert(total);
      }
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:39:55.017

我不确定我是否理解正确，但似乎您需要实现这样的对象：

```
<script type="text/javascript">

//Monitoring object
function RequestStatusMonitor()
{
    this.resetRequests();
}

//IDs of the requests you need to monitor
RequestStatusMonitor.prototype.requests=["firstRequest","secondRequest","thirdRequest"];

//Status of the requests
RequestStatusMonitor.prototype.requestsCompleted=[];

//Set all requests to incomplete state
RequestStatusMonitor.prototype.resetRequests = function()
{
    this.requestsCompleted = [];
    for(var it in this.requests)
    {
        this.requestsCompleted[this.requests[it]] = false;
    }
}
//Set status for a request determined by requestName
RequestStatusMonitor.prototype.setRequestStatus = function(requestName, status)
{
    this.requestsCompleted[requestName] = status;
}

//Check if all requests are completed
RequestStatusMonitor.prototype.allRequestsAreCompleted = function()
{
    for(var it in this.requestsCompleted)
    {
        if(!this.requestsCompleted[it])
        {
            return false;
        }
    }
    return true;
}

//----------------------------------------------------------------------------------
//Usage Example
var monitor = new RequestStatusMonitor();

function onFirstRequestFinished(/*necessary parameters*/)
{
    monitor.setRequestStatus("firstRequest", true);
    checkCompleted();
}

function onSecondRequestFinished(/*necessary parameters*/)
{
    monitor.setRequestStatus("secondRequest", true);
    checkCompleted();
}

function onThirdRequestFinished(/*necessary parameters*/)
{
    monitor.setRequestStatus("thirdRequest", true);
    checkCompleted();
}

function checkCompleted()
{
    if(monitor.allRequestsAreCompleted())
    {
        //Do what you need after all requests are completed
        alert("All requests are completed");
    }
}

onFirstRequestFinished();
onThirdRequestFinished();
onSecondRequestFinished();

</script> 
```

# vb.net - Crystal Reports 出现此错误的原因是什么？

> ID：13853365
> 
> 赞同：0
> 
> 时间：2012-12-13T05:09:56.323
> 
> 标签：vb.net, crystal-reports, crystal-reports-xi

我的水晶报表有问题。我有一个报表，其中四个表绑定为表的源。在这四个表中，一个表数据库字段用于公式字段。当我在报表上设置该公式字段时，我预览报告中出现此错误“未知数据库连接器错误”。

假设当我删除该字段或注释该字段的公式代码时，我们不会收到该错误。我也不理解该错误。

我在公式字段中写过这样的

```
 if{students.name} = "" then

    else
    "Student Name : " + {students.name} 
```

我用谷歌搜索了很多但没有用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:16:40.543

我找到了为 .NET 框架 64 位软件安装水晶报告的解决方案。我会解决的 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:37:02.390

尝试：

```
If Not(Isnull({students.name})) Then
  "Student Name : " + {students.name} 
```

# android - 如何使用默认浏览器在谷歌上搜索字符串

> ID：13853375
> 
> 赞同：9
> 
> 时间：2012-12-13T05:10:50.967
> 
> 标签：android, android-intent, google-api, android-searchmanager

我想实现一个搜索功能，打开默认浏览器并搜索传递的字符串

```
public void searchOnGoogle(String keywords){
---
} 
```

有没有办法使用意图过滤器，或者我必须自己实现一切？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T05:20:01.017

```
String query = URLEncoder.encode(keywords, "utf-8");
String url = "http://www.google.com/search?q=" + query;
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse(url));
startActivity(intent); 
```

# vba - 如何将 VBA Debug.Print 输出记录到文本文件？

> ID：13853376
> 
> 赞同：20
> 
> 时间：2012-12-13T05:11:03.153
> 
> 标签：vba

> **可能重复：**
> [有什么方法可以自动将即时窗口的内容移动到文本文件中？](https://stackoverflow.com/questions/7015486/any-way-to-automatically-move-contents-of-immediate-window-into-a-text-file)

是否可以将 Debug.Print 输出记录到文本文件而不是 Excel VBA 中的立即窗口？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-13T07:52:00.430

[您应该在这里](https://stackoverflow.com/questions/7015486/any-way-to-automatically-move-contents-of-immediate-window-into-a-text-file)看到 Jean-François Corbett 的精彩回答：

正如他所说，写入即时窗口没有什么意义，然后当您可以同时写入输出 txt 文件时复制并粘贴它（或者如果您想要的话，只写入 txt 文件）。

他回答的例子：

```
Dim s As String
Dim n As Integer

n = FreeFile()
Open "C:\test.txt" For Output As #n

s = "Hello, world!"
Debug.Print s ' write to immediate
Print #n, s ' write to file

Close #n 
```

# ruby-on-rails - 在 Rails 中将组添加到 CanCan

> ID：13853385
> 
> 赞同：0
> 
> 时间：2012-12-13T05:12:20.223
> 
> 标签：ruby-on-rails, devise, cancan

我是 Ruby on Rails 的新手。我正在使用设计和 CanCan。我想创建用户组，以便他们在一个组中并能够拥有一个组长。组长只能从该组添加/编辑/删除用户。

我已经关注了[http://edapx.com/2012/04/18/authorization-and-user-management-in-rails/](http://edapx.com/2012/04/18/authorization-and-user-management-in-rails/)我现在不知道如何创建组。可以在 CanCan 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:22:08.103

看看这个答案是否可以帮助你：[https ://stackoverflow.com/a/13747645/367611](https://stackoverflow.com/a/13747645/367611)

基本上，你会有这样的东西：

```
class Ability
  include CanCan::Ability

  initialize(user)
    can :manage, User, groups: {id: user.led_group_ids}
    can :manage, Group, id: user.led_group_ids
  end
end 
```

然后在您的用户模型中，如下所示：

```
class User < ActiveRecord::Base

  has_many :groups

  def led_groups
    @led_groups ||= groups.where(leader: true)
  end

  def led_group_ids
    @led_group_ids ||= led_groups.collect(&:id)
  end
end 
```

# python - 函数定义与 Lambda 表达式

> ID：13853386
> 
> 赞同：1
> 
> 时间：2012-12-13T05:12:24.037
> 
> 标签：python

鉴于这两个片段：

```
def sex (code):
    return {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code] 
```

和

```
sex = lambda code: {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code] 
```

实际的区别是什么？他们有不同的行为吗？

最重要的是：一个比另一个更可取吗？

我问这个，因为我在这个论坛上的一个答案（[python3 - 学习搜索，这个非常简单的例子不能正常工作](https://stackoverflow.com/questions/13852484/python3-learning-about-searching-this-very-simple-example-does-not-work-right/13852518#13852518)），它提供了两种可能性，被另一个用户截断（“修订”），删除了 lambda 术语。修改的原因是最后一个选项（lambda 表达式）比函数定义**差。**这让我想知道：

**为什么 lambda 表达式比函数定义差？**尤其是像这样的简单的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T05:15:40.023

`def`lambda 和返回相同内容的a 在功能上没有区别。它们完全相同并且具有相同的字节码。

```
>>> def sex (code):
...     return {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code]
>>> sex2 = lambda code: {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code]
>>> sex.__code__.co_code == sex2.__code__.co_code
True 
```

我会说在一般意义上说任何一种编写函数的方式都“更糟”是错误的。但是，在您的示例中，`def`版本更好。原因是，通常 lambdas 的目的是在表达式中简洁地编写简短的匿名函数。这样做没有真正意义`name = lambda: ...`。如果您要立即为其命名，则没有理由定义匿名函数。

lambdas 的重点是你可以做`someFuncRequiringCallback(lambda x: x+1)`，除了这种情况，你不想给函数命名或将它用于任何事情。如果您*确实*想在多个上下文中使用函数，只需使用常规定义它即可`def`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T05:31:52.183

除了[BrenBarn 的优秀答案](https://stackoverflow.com/a/13853409/505154)中提供的信息之外，您会发现许多 Python 程序员坚持总是使用`def`over `lambda`，所以我将尝试解释为什么会这样。

它基本上归结为[Python Zen](https://stackoverflow.com/questions/228181/the-zen-of-python)的以下行：

> 应该有一种——最好只有一种——明显的方法来做到这一点。

这在[Guido van Rossum 关于这个问题的帖子](http://www.artima.com/weblogs/viewpost.jsp?thread=98196)中被引用（Guido 是 Python 的创建者）：

> 为什么要放弃 lambda？大多数 Python 用户对 Lisp 或 Scheme 不熟悉，因此名称令人困惑；此外，还有一个普遍的误解，即 lambda 可以做嵌套函数不能做的事情——在我向她展示没有区别之后，我仍然记得 Laura Creighton 的 Aha!-erlebnis！即使有一个更好的名字，我认为同时拥有这两个选择只是要求程序员考虑做出与他们的程序无关的选择；没有选择可以简化思考过程。此外，一旦 map()、filter() 和 reduce() 消失，就没有很多地方真正需要编写非常短的局部函数了。想到了 Tkinter 回调，但我发现回调通常应该是一些带有状态的对象的方法（玩具程序除外）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T05:54:54.937

都是一样的，查看反汇编的python字节码

```
>>> def sex1 (code):
    return {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code]

>>> sex2 = lambda code: {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} [code]
>>> dis.dis(sex1)
  2           0 BUILD_MAP                3
              3 LOAD_CONST               1 ('masculino')
              6 LOAD_CONST               2 ('m')
              9 STORE_MAP           
             10 LOAD_CONST               3 ('femenino')
             13 LOAD_CONST               4 ('f')
             16 STORE_MAP           
             17 LOAD_CONST               5 ('ignorado')
             20 LOAD_CONST               6 ('')
             23 STORE_MAP           
             24 LOAD_FAST                0 (code)
             27 BINARY_SUBSCR       
             28 RETURN_VALUE        
>>> dis.dis(sex2)
  1           0 BUILD_MAP                3
              3 LOAD_CONST               1 ('masculino')
              6 LOAD_CONST               2 ('m')
              9 STORE_MAP           
             10 LOAD_CONST               3 ('femenino')
             13 LOAD_CONST               4 ('f')
             16 STORE_MAP           
             17 LOAD_CONST               5 ('ignorado')
             20 LOAD_CONST               6 ('')
             23 STORE_MAP           
             24 LOAD_FAST                0 (code)
             27 BINARY_SUBSCR       
             28 RETURN_VALUE 
```

甚至它们都具有相同的类型

```
>>> type(sex1)
<type 'function'>
>>> type(sex2)
<type 'function'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:15:59.533

简单的 lambda 不一定比嵌套函数差（不，这两个示例之间没有区别，但语法不同），但这种特殊情况可能更简单：

```
sex = {'m': 'masculino', 'f': 'femenino', '': 'ignorado'} 
```

然后你使用`sex.__getitem__`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T05:33:34.870

它们具有相同的行为，但主要区别在于 lambda 是一个表达式，因此不能包含语句。lambda 不一定比函数定义差，只要它们使用得当。然而，它们经常被用来编写单行函数，只是因为它们可以，即使它使代码实际上无法阅读。例如，考虑以下情况：

```
sortfilter = lambda a, b, c: sorted(filter(lambda i: i % 2, (i for i in a if i in b)), key=lambda v: c.get(v, v))) 
```

可以用单行 lambda 编写，但这是一个非常糟糕的主意！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-21T10:32:07.503

它有助于区分事物。如果我要定义一个函数，我将从 def 开始，但是在该函数内部我通常会使用 lambda。

这与用英语写作的概念相同。如果报价正在引用报价，您将需要更改嵌套报价的外观。括号也是如此。

# macos - 为什么 Safari 5.1 中的标签页会自动刷新？

> ID：13853391
> 
> 赞同：3
> 
> 时间：2012-12-13T05:12:53.077
> 
> 标签：macos, safari

我的 safari（Safari 5.1 版）会自动刷新，真的很郁闷。

知道为什么会发生这种情况吗？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:23:01.483

我不确定为什么会这样。但是我在一个论坛上发现了[这个：](http://forums.macrumors.com/showthread.php?t=1306794)

> 当 IOS 的 RAM 内存不足且无法将整个页面存储在缓存中时，会出现此问题。在 Mac OS X 上，这是 Safari 5.1 的一项功能。如果网页在一段时间内处于非活动状态，则会自动刷新。它可以在调试菜单中间接禁用。关闭 Safari，启动终端，输入“defaults write com.apple.Safari IncludeInternalDebugMenu 1”。这将启用 Safari 调试菜单。然后打开Safari，你会注意到“帮助”旁边出现了一个新的菜单“调试”。在“调试”菜单中取消选择“使用多进程窗口”选项。重新打开 Safari，您会注意到 Safari 处于单进程模式并标记为“SP”。这将阻止网页的自动刷新。但是这种方法也有缺点。许多插件和扩展将不起作用。所以这取决于你。或者，您可以使用 Chrome 或 Firefox。

# c# - 从 Javascript 弹出窗口中删除用户交互

> ID：13853400
> 
> 赞同：0
> 
> 时间：2012-12-13T05:14:10.510
> 
> 标签：c#, javascript, asp.net, web-applications, popup

在我的应用程序中，我在以下代码的帮助下显示了一个带有网页的 javascript 弹出窗口：

```
 popwin = window.open(URL, '" + id + "', 
'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=750,
 height=600,left = 262,top = 84'); 
```

这给了我所需的弹出窗口，其中包含网页。

我想知道是否有任何方法可以从此弹出窗口中删除用户交互并删除关闭按钮。

我将使用一些计时器关闭此弹出窗口，但我不希望该用户能够控制弹出窗口。有什么办法吗？

我用谷歌搜索了一下，但没有相关的方法来做到这一点。

**注意：我可以使用 Modal Pop Up 来做到这一点吗？**

请提出任何好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:30:12.070

您可以尝试以下代码。

```
popwin = window.open(URL, '" + id + "','toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=750, height=600,left = 262,top = 84');
SetTimeOut(function(){ popwin.close()},2000); 
```

这里的“2000”是以毫秒为单位的时间。2000 毫秒 = 2 秒。如果发生任何错误，请告诉我。你可以试试 Telerik Radwindows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:23:33.687

我认为使用类似 CSS 的弹出窗口可能更合适。

工作示例： http: [//www.pat-burt.com/csspopup.html#](http://www.pat-burt.com/csspopup.html#)

至于您的计时器，您可以使用计时器更改 css 属性或使用一些 jquery 框架插件，例如 impromptu： [http ://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

与我认为的 css 解决方案相比，它的部署时间更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:16:04.453

您可以将内容加载到[Fancy Box](http://fancybox.net/)中，并根据您的需要自定义 fancybox。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:58:28.173

**嘿伙计，这是我的弹出窗口。它不是一个窗口，而是一个窗口，并且在 jquery 和 javascript 中都有。**

```
$("document").ready( function() {
var link = ""; // your link here
var d = document.createElement("div");
d.style.display = "block";
d.style.border = "1px solid #282828";
d.style.background = "#ffffff";
d.style.width = "750px";
d.style.height = "450px";
d.setAttribute("id", "popup");
var m = document.createElement("iframe");
m.setAttribute("src", link);
m.style.width = "750px";
m.style.height = "450px";
m.style.border = "0";
document.body.appendChild(d);
d.appendChild(m);
var s=0;
var n = setInterval( function() { s=s+1; if (s == 5) {
$("#popup").remove();
} }, 1000);
}); 
```

[http://jsfiddle.net/APKTX/](http://jsfiddle.net/APKTX/)

# php - 在 PHP 中将名称转换为对 URL 友好的字符串？

> ID：13853404
> 
> 赞同：5
> 
> 时间：2012-12-13T05:14:51.773
> 
> 标签：php

> **可能重复：**
> [PHP 中的 URL 友好用户名？](https://stackoverflow.com/questions/2103797/url-friendly-username-in-php)

我有这样的事情：

```
'mrt1' => 'Zhongxiao Dunhua Sun' 
```

它将包含在这样的锚链接中：

```
<a href="'. $mrt1 .'">'. $mrt1 .'</a> 
```

我希望输出是这样的：

```
<a href="zhongxiao-dunhua-sun">Zhongxiao Dunhua Sun</a> 
```

如何做到这一点，以便我可以将该名称转换为 URL 友好的字符串（以便我可以将其放在 href 属性中）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T05:18:18.857

```
$s = ' Zhongxiao Dunhua Sun ';
$r = preg_replace('/\W+/', '-', strtolower(trim($s)));
echo("$r\n"); 
```

*   用破折号替换[非单词字符](http://us1.php.net/manual/en/regexp.reference.escape.php)
*   转换为小写

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T05:22:17.020

PHP 具有使字符串符合 URL 标准的功能：

```
urlencode($mrt1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T05:26:40.990

你也可以试试这个功能..

```
function create_seo_link($text) {
    $letters = array(
        '–', '—', '"', '"', '"', '\'', '\'', '\'',
        '«', '»', '&', '÷', '>',    '<', '$', '/'
    );

    $text = str_replace($letters, " ", $text);
    $text = str_replace("&", "and", $text);
    $text = str_replace("?", "", $text);
    $text = strtolower(str_replace(" ", "-", $text));

    return ($text);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T05:18:40.977

[str_replace()](http://us2.php.net/manual/en/function.str-replace.php)将空格更改为`-`，[strtolower()](http://us2.php.net/manual/en/function.strtolower.php)更改为小写。

```
$mrt1 = 'Zhongxiao Dunhua Sun';
$mrt1 = str_replace(' ','-',strtolower($mrt1)); 
```

# camera - 如何从佳能数码相机 IXUS 75 视频模式捕获图像

> ID：13853405
> 
> 赞同：0
> 
> 时间：2012-12-13T05:14:54.460
> 
> 标签：camera, capture, wia

我尝试使用 WIA 类型从佳能数码相机 IXUS 75 型号以视频模式捕获图像。但我什么也没得到。如果是照片模式，我可以看到数码相机存储数据，即视频、照片等。那么，在视频模式下捕获图像是否需要任何 .dll 文件或任何东西。即使我尝试了不同的方式也

1.  使用JavaCV。它检测网络摄像头，笔记本电脑内部摄像头。但它不检测数码相机设备。
2.  Windows 64 位操作系统不支持 JTWAIN。所以，我没有尝试过这个。

请帮我。佳能数码相机软件或 Java 相关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:17:31.627

假设您仍然打算使用 Java，并且如果问题仍然存在，我使用 Asprise 的 JTwain 从扫描仪、相机（不仅是笔记本电脑网络摄像头）等获取图像。您唯一需要的是设备的驱动程序。[从 Asprise 获取 eval 版本并在此处](http://asprise.com/product/jtwain/AspriseJTwain-DevGuide.pdf)查看此逐步开发指南。据我了解，这应该足以满足您的要求。

顺便说一句，查看相机的文件结构并不总是意味着您的设备可以正常工作。

# iphone - CoreGraphics 内存警告和崩溃；仪器显示没有内存泄漏

> ID：13853407
> 
> 赞同：0
> 
> 时间：2012-12-13T05:15:08.843
> 
> 标签：iphone, memory-management, memory-leaks, uiimage, core-graphics

**UPDATE**这段代码其实不是问题所在；注释掉所有 CoreGraphics 行并返回数组中的第一个图像作为结果并不能防止崩溃的发生，所以我必须往上游看。

我在 75ms 的 NSTimer 上运行它。它与 480x360 图像完美配合，并且可以运行一整天而不会崩溃。

但是当我向它发送 1024x768 的图像时，它会在大约 20 秒后崩溃，并给出几个内存不足的警告。

在这两种情况下，Instruments 都显示了绝对正常的内存使用情况：一个扁平的分配图，少于 1 兆字节的活动字节，始终没有泄漏。

发生什么了？Core Graphics 是否以某种方式使用了太多内存而不显示它？

另外值得一提的是： (NSMutableArray*)imgs 中的图像并不多——通常是三个，有时是两个或四个。无论如何都会崩溃。当只有两个时，崩溃的速度会稍微慢一些。

```
- (UIImage*) imagefromImages:(NSMutableArray*)imgs andFilterName:(NSString*)filterName {

    UIImage *tmpResultant = [imgs objectAtIndex:0];

    CGSize s = [tmpResultant size];

    UIGraphicsBeginImageContext(s);

    [tmpResultant drawInRect:CGRectMake(0, 0, s.width, s.height) blendMode:kCGBlendModeNormal alpha:1.0];

    for (int i=1; i<[imgs count]; i++) { [[imgs objectAtIndex:i] drawInRect:CGRectMake(0, 0, s.width, s.height) blendMode:kCGBlendModeMultiply alpha:1.0]; }

    tmpResultant =  UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return tmpResultant;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:59:19.880

在我看来，问题出在您显示的代码之外。屏幕上显示的图像在应用程序内存之外有一个后备存储，即 width*height*bytes_per_pixel。如果您有太多后备商店，您还会收到内存警告和应用程序终止。

您可能需要在那里进行优化，以创建这些图像的较小优化版本以供显示或允许发布后备存储。还可以为某些不变的图层打开光栅化，以及将图层内容直接设置为 CGImage，而不是使用 UIImages。

您应该创建一个示例项目来演示没有其他代码围绕它的问题，并查看您是否仍然耗尽内存。但我怀疑您会发现，仅使用您展示的代码，您将无法重现该问题，因为它位于其他地方。

# python - ValueError：字典更新序列元素 #0 的长度为 4；2 是必需的 (python)

> ID：13853408
> 
> 赞同：0
> 
> 时间：2012-12-13T05:15:29.603
> 
> 标签：python, mysql, sql

我是 python 新手，我正在尝试读取文本文件。这是我的代码：

```
import csv
csvreader = csv.reader(open('datatypes.txt', 'rb'))
dataTypes = dict(csvreader) 
```

我的 datatypes.txt 文件包含：

```
[('string',6), ('varchar',7)] 
```

我正在尝试在上述文件中写入数据类型。但是，当我尝试此操作时，我收到错误消息，因为“ValueError：字典更新序列元素 #0 的长度为 4；需要 2”.... 我是朝着正确的方向前进还是完全迷路了？如果有人能为我阐明这一点，将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:24:31.597

该文件不是 CSV。尝试`ast.literal_eval`：

```
import ast

with open('datatypes.txt', 'r') as f:
    dataTypes = dict(ast.literal_eval(f.read()))
    # dataTypes: {'varchar': 7, 'string': 6} 
```

# sql - SQL 性能，使用 OPTION (FAST n)

> ID：13853412
> 
> 赞同：4
> 
> 时间：2012-12-13T05:15:43.857
> 
> 标签：sql, sql-server, sql-server-2008, tsql

谁能告诉我在 SQL 查询中使用 OPTION (FAST n) 有什么缺点。

比如我这么快就抓取了10万条记录，但是这对SQL Server的其他进程有影响吗？

* * *

我正在接近我的问题。

我必须每周运行一次数据处理。所以第一个结果在 5-7 秒后出来，然后我对这些结果进行数据处理。结果通常由几千行组成。每一行都需要几秒钟的时间来处理。通常，该过程会等待整个结果出现，然后开始处理。结果出现在数据集中（我正在使用 c# 控制台应用程序），所以我希望前 10 个结果快速出现，以便我可以立即启动该过程，然后将其余行出现并添加到队列中等待那里转弯。

知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-29T04:48:42.267

选项 fast 强制查询优化器不优化查询的总运行时间，而是优化获取前 N 行所需的时间。

如果您有 2 个要连接的 100 万行的表，则标准查询计划是一个表的 hashmap（一百万行的临时表），然后在另一个表上使用 hashmap 查找。

快速 10 优化可能只使用嵌套循环，因为构建 100 万行 hashmap 的工作量比嵌套循环的快速 10 步要多得多。如果你毕竟有 100 万行，嵌套循环可能需要 3 倍的时间，但在快速 10 下，你会更快地获得这 10 行。（这个例子假设存在一个合适的索引）

# iphone - 从 Web 服务多次获得相同的响应

> ID：13853421
> 
> 赞同：0
> 
> 时间：2012-12-13T05:16:36.170
> 
> 标签：iphone, objective-c, ios, chat, nsxmlparser

我正在制作一个私人聊天应用程序，其中我遇到了一些问题，例如 -

1.有时我多次收到最后一次聊天。2.有时长数据像一张大图，不妥当。

我通过此代码每 5 秒调用一次 Web 服务 -

```
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:
                 [self methodSignatureForSelector: @selector(getNewMessages)]];
       [invocation setTarget:self];
        [invocation setSelector:@selector(getNewMessages)];
        timer1 = [NSTimer scheduledTimerWithTimeInterval:5.0 invocation:invocation repeats:YES]; 
```

所以我想问一下，在收到完整数据后调用 Web 服务的正确方法是什么。我正在使用 NSXMLParser 来获取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:54:21.433

有两种方法可以处理这个 -

1）当您收到第一个请求的完整数据时，您可以调用另一个请求，方法如下

```
-(void) connection:(NSURLConnection *) connection didReceiveData:(NSData *) data 
```

2）当你完成解析后，你可以触发你的另一个请求 -

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:50:42.523

请看[这里](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)，它可以让您了解在 Objective-c 中选择最佳 xml 解析器。

尝试使用 TBXML 解析器，因为它解析 xml 比 NSXML 解析器要快得多，这可能会解决您的问题。

# php - 动态生成的 XML 文件在服务器上不起作用，但在 localhost 上运行良好

> ID：13853422
> 
> 赞同：0
> 
> 时间：2012-12-13T05:16:45.063
> 
> 标签：php, xml, dom

我在 php.ini 中生成了一个 XML 文件。这个文件在我的本地主机中完美地生成了一个 xml 输出，同时当我将它上传到我的服务器时它失败了。
错误屏幕![错误的屏幕截图](../Images/8c0b732dedb912b0763bf315a9fc1463.png) 这是代码。

```
<?php  

    include_once("database/db.php");

    $sqlNews    =   "SELECT * FROM news";

    $runSqlNews =   mysql_query($sqlNews);

    while ($rowSqlNews  =   mysql_fetch_array($runSqlNews)) 
        $arrSqlNews[]   =   $rowSqlNews;

        header('Content-type: text/xml');
        header('Pragma: public');
        header('Cache-control: private');
        header('Expires: -1');
        echo "<?xml version=\"1.0\" encoding=\"utf-8\"?>";

        echo '<xml>';

    for($i=0;$i<count($arrSqlNews);$i++) 
    {
        echo "<news>";
            echo "<newsId>".$arrSqlNews[$i][id]."</newsId>";
            echo "<newsAuthor>".$arrSqlNews[$i][news_author]."</newsAuthor>";

            echo "<description>".$arrSqlNews[$i][news_description]."</description>";
            echo "<newsText> <![CDATA[".$arrSqlNews[$i][news_text]. "]]></newsText>";
            echo "<plainNewsDescription>".$arrSqlNews[$i][plain_news_description]."</plainNewsDescription>";
            echo "<plainNewsTitle>".$arrSqlNews[$i][plain_news_title]."</plainNewsTitle>";
            echo "<newsUrl> <![CDATA[". $arrSqlNews[$i][news_url]. "]]></newsUrl>";
            echo "<newsCategory> <![CDATA[". $arrSqlNews[$i][category]. "]]></newsCategory>";
            echo "<image>http://metroplots.com/images/members/".$arrSqlNews[$i][news_image]."</image>";
            echo "<createdOn>".$arrSqlNews[$i][created_on]."</createdOn>";
        echo "</news>";       
    }
        echo '</xml>';
?> 
```

更改后的新 xml 文件

```
<?php
    ini_set('error_reporting', E_ALL);

    include_once("database/db.php");

    $dbConn     = new mysqli($dbHost, $dbUserName, $dbUserPasswrd, $database);;

    $sqlNews    = "SELECT id, news_author,news_description,
                          news_text, news_url, category, news_image, created_on
                     FROM news";

    $stmt   = $dbConn->prepare($sqlNews);
    $stmt->execute();

    $stmt->bind_result($id, $newsAuthor, $newsDescription, $newsText, $newsUrl, $Category, $newsImage, $createdOn);

    header('Content-type: text/xml');
    header('Pragma: public');
    header('Cache-control: private');
    header('Expires: -1');

    echo "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
    echo '<xml>';
    echo "<news>";

    while($stmt->fetch())
    {
        echo "<newsId>".$id."</newsId>";
        echo "<newsAuthor>".$newsAuthor."</newsAuthor>";
        echo "<description>".$newsDescription."</description>";
        echo "<newsText> <![CDATA[".$newsText. "]]></newsText>";            
        echo "<newsUrl> <![CDATA[". $newsUrl. "]]></newsUrl>";
        echo "<newsCategory> <![CDATA[". $Category. "]]></newsCategory>";
        echo "<image>http://metroplots.com/images/members/".$newsImage."</image>";
        echo "<createdOn>".$createdOn."</createdOn>";        
    }

    echo "</news>";       
    echo '</xml>';

    $stmt->close();
    $dbConn->close();
?> 
```

请让我知道我哪里出错了。提前致谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:43:15.607

您是否尝试过禁用 PHP 输出缓冲？

在 PHP.ini:`output_buffering = Off`或注释掉现有设置：`;output_buffering = On`。

更改设置后不要忘记重新启动 Web 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:52:05.677

很难说这里到底出了什么问题。对于调试，您可以`ini_set('error_reporting', E_ALL);`在脚本的开头添加一个或查看您的 php 错误日志。

您的脚本架构中还有一些其他问题

*   您不应再使用[mysql](http://php.net/manual/en/intro.mysql.php)扩展。请改用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

*   标头应该只发送一次。将它们移出循环到顶部

*   你为什么要循环两次结果？删除`for`循环并将其内容移动到 while 循环中。在循环内替换变量`$arrSqlNews`并`$rowSqlNews`删除索引访问器`[$i]`

简化示例

```
while( $rowSqlNews = mysqli_fetch_assoc( $mysqliResult ) ) 
{
    echo $rowSqlNews['yourdbCol1'];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T06:17:49.247

我怀疑您的上传工具不是以二进制安全的方式传输文件。尝试比较本地计算机和远程计算机上副本的文件大小。

# c++ - 吸气剂和二传手。有性能开销吗？

> ID：13853424
> 
> 赞同：41
> 
> 时间：2012-12-13T05:16:57.537
> 
> 标签：c++, performance, getter-setter

我的 C++ 项目中有一个粒子系统引擎，粒子本身只是没有函数的变量结构。目前，每个粒子 (Particle) 通过直接访问其变量从其父类 (ParticleSystem) 更新。例如

```
particle.x += particle.vx; 
```

然而，我正在辩论使用这样的 getter 和 setter：

`particle.setX( particle.getX()+particle.getVX() );`

我的问题是：*调用 getter 和 setter 是否有任何性能开销，而不是直接访问数据？*

毕竟，我确实有很多粒子要更新...

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-13T05:31:04.167

**Setter 和 getter在未优化时**会产生性能开销。 它们几乎总是在进行链接时间优化的编译器上进行优化。而在没有的编译器上，如果他们了解函数体（即不仅仅是原型），它将被优化掉。

但是，您使用 getter 和 setter 是因为您可能希望获取或设置该变量以产生额外的副作用。就像改变物体的位置一样，也会改变附近物体在物理模拟等中的位置。

最后，在优化代码的上下文中，getter 和 setter 操作的开销非常小，除非代码很热，否则不值得担心。如果它很热，只需将 getter 或 setter 移动到头文件并内联它就很容易了。

总而言之，getter 和 setter 非常值得少量或不存在的开销，因为它允许您非常具体地指定对象可以发生和不能发生的事情，并且还允许您编组任何更改。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-13T06:04:14.653

我对此的看法与之前的答案不同。

getter 和 setter 表明你的类没有以有用的方式设计：如果你不从内部实现抽象外部行为，那么首先使用抽象接口是没有意义的，你不妨使用一个普通的旧结构。

想想你真正*需要*什么操作。这几乎肯定**不是**直接访问位置和动量的 x y 和 z 坐标，您宁愿将它们视为向量（至少在大多数计算中，这与优化有关）。所以你想实现一个基于向量的接口*，其中基本操作是向量加法、缩放和内积。不是按组件访问；您可能有时也需要这样做，但这可以通过单个`std::array<double,3> to_posarray()`成员或类似的东西来完成。

当内部组件`x`, `y`...`vz`无法从外部访问时，您可以安全地更改内部实现，而无需中断模块外部的任何代码。这几乎就是 getter/setter 的重点；但是，当使用这些时，您只能做很多优化：任何真正的实现更改都不可避免地会使 getter 慢得多。
另一方面，您可以通过 SIMD 操作、外部库调用（可能在 CUDA 等加速硬件上）等来优化基于向量的接口。像“batch-getter”这样的“batch-getter”`to_posarray`仍然可以相当有效地实现，而单变量设置器则不能。

* * *

*我在这里指的是[数学意义上](http://en.wikipedia.org/wiki/Vector_space)的向量，而不是`std::vector`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T05:29:17.220

如果 getter 和 setter 被证明是稍微复杂一点的任务，那么 getter 和 setter 可以让你的代码在未来更容易地发展。大多数 C++ 编译器都足够聪明，可以[内联](https://en.wikipedia.org/wiki/Inline_expansion)那些简单的方法并消除函数调用的开销。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T05:49:23.940

这个问题可能有各种各样的答案，但我把我的想法放在这里。

对于性能，对于简单的 POD 类型，成本几乎可以忽略不计。但是还是有成本的，这取决于你返回的类型。对于粒子，不可能有太多数据。如果这是一个图像类（如 OpenCV cv::Mat）或 3d 数据（如 VTK 中的 PolyData），则 setter/getter 处理指针/迭代器比处理实际数据更好，以避免内存分配问题。

当您想要模板化事物时，setter/getter 对于避免不明确的类型转换非常有用。setter/getter 可以是访问私有/受保护成员的一种方式，这也允许您避免使用 x 作为变量的通用名称。此外，setter/getter 可以返回一个左值引用，它允许你做`particle.getX() = 10.0 ;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T02:13:38.853

在这种情况下，您的计算的功能含义可能是：

> 无效粒子::updatePosition() { x += vx; y += vy; }

或者：

> 无效粒子::updatePositionX() { x += vx; }

然后 ：

> 粒子.updatePositionX();

# android - imageurls 中的图像在 facebook 中以小尺寸显示

> ID：13853425
> 
> 赞同：-1
> 
> 时间：2012-12-13T05:17:07.410
> 
> 标签：android, facebook, facebook-graph-api

```
https://graph.facebook.com/"+Login.facebookid+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+strFullMessage.replaceAll(" ", "%20")+"&source="+imageUrl 
```

我正在使用上面的图形 api，将消息和图像发布到我的墙上。

imageUrl 中的图片大小为 240*320。但是当我发布它时，它不是作为图片发布，而是在 facebook 的一个矩形框中发布。这就像一些在 facebook 中添加的帖子，例如：luck percent post where图像在一个矩形框中是小尺寸的。

如何使用图片网址发布大图片？

我试图直接在 facebook 中发布这个图片 url 的图片，然后图片尺寸很大。

我认为，当我们使用 Urls 发布时，它会变成这样。

当我使用图形 api 时，它正在询问 imageurls，所以除了创建 url 之外找不到任何解决方案。

帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:01:14.510

也许这会对您有所帮助：
[https ://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

有写：

```
...will help accentuate photos with a larger display in Ticker, Timeline, and News Feed. 
```

这需要 FB 的额外批准，并且只有在您的应用发布“用户生成的照片”时才会获得批准。这意味着使用相机或手机或任何类似的东西拍摄照片。

# python - Python Selenium WebDriver如何为get（url）函数添加超时

> ID：13853432
> 
> 赞同：9
> 
> 时间：2012-12-13T05:17:52.490
> 
> 标签：python, selenium, timeout, webdriver, driver

我正在运行一段通过代理下载网站的简单代码，但有时代理可能很慢，这可能导致 WebDriver .get(url) 请求无限期地阻塞。

是否有一段用于 WebDriver 的简单 Python 代码会为此函数设置超时？通过搜索，我只找到了适用于 java 的技术。

```
driver.get(url) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:01:47.177

对于那里的所有 Web cretents，我用来解决这个问题的方法就是这个。Selenium 使用套接字库，所以我在套接字模块上设置了超时，这会引发一个错误，我们可以使用该错误将转义键发送到浏览器（这会停止页面加载）：

```
socket.setdefaulttimeout(2)
try:
     driver.get(pageLink)
except socket.timeout:
     #send ESCAPE key to browser 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T05:43:11.407

[在文档](https://selenium-python.readthedocs.org/en/latest/api.html)中找到了这个

> selenium.webdriver.remote.webdriver.set_script_timeout(time_to_wait)
> 
> ```
> Set the amount of time that the script should wait before throwing an error.
> 
> time_to_wait: The amount of time to wait
> 
> Usage:
> 
> driver.set_script_timeout(30) 
> ```

# php - 自定义模式中的哈希文件

> ID：13853434
> 
> 赞同：0
> 
> 时间：2012-12-13T05:17:58.523
> 
> 标签：php, file, hash, md5

相当简单。如何制作单个函数来创建多值散列 url。

因此，例如 *getfile.mysite.ltd/file/dl.php?file_id=10101* 没问题，但我不想透露 file_id。出于这个原因，我通过存储在 SQL 中的通用文件哈希来获取文件。这是文件名的MD5。

这是我的 SQL 记录中的外观

```
 my-vacation-image.jpg -> b16f48c6cfd73bb9bfb058c95175537f 
```

但我不想让它变得更复杂，如下面的例子

```
 my-vacation-image.jpg -> ce591714-d1e8-46d5-bbfa-23b45bea81e2 
```

关于如何做的任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:13:10.243

```
$dashedHash = implode('-', str_split($hash, 5)); 
```

# iphone - 什么时候调用dealloc方法？

> ID：13853438
> 
> 赞同：0
> 
> 时间：2012-12-13T05:18:31.330
> 
> 标签：iphone, objective-c

我是 iphone 新手，我想知道何时调用 -(void) dealloc 方法。我知道它是用来释放对象的，但是我们可以使用 dealloc 方法释放任何类型的对象吗？是否有必要添加这个方法以及为什么我们在dealooc方法中写[suped dealloc]？

分享你的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:09:11.773

这是直接来自 APPLE 文档的解释

> NSObject 类定义了一个方法，dealloc，当一个对象没有所有者并且它的内存被回收时自动调用它——在 Cocoa 术语中它是“释放”或“释放”。

**重要的**

> 永远不要直接调用另一个对象的 dealloc 方法。

**这是我们为什么打电话的答案`[super dealloc]`？**

> 您必须在实现结束时调用超类的实现。您不应将系统资源的管理与对象生命周期联系起来
> 
> 当应用程序终止时，可能不会向对象发送 dealloc 消息。因为进程的内存在退出时会自动清除，所以简单地让操作系统清理资源比调用所有内存管理方法更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:23:30.747

您可以释放您分配、复制或保留的对象，这很容易理解。你不能释放那些没有被你分配的对象意味着自动释放对象，ios检测到在内存中不再使用，那个时候自动释放池会耗尽那些对象自动从内存中释放的时间。

当对象保留计数变为零时调用对象 dealloc 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:28:24.633

您永远不会直接发送 dealloc 消息。相反，对象的 dealloc 方法是通过释放 NSObject 协议方法间接调用的（如果释放消息导致接收者的保留计数变为 0）。有关使用这些方法的更多详细信息，请参阅内存管理编程指南。

子类必须实现它们自己的 dealloc 版本，以允许释放对象消耗的任何额外内存——例如为数据或对象实例变量动态分配的存储被释放对象所拥有。在执行特定于类的释放后，子类方法应该通过向 super 发送消息来合并超类版本的 dealloc：

参考这个[链接](https://stackoverflow.com/questions/5630660/when-is-the-dealloc-method-called)

# python - 使用 python 生成 OAuth 签名库

> ID：13853443
> 
> 赞同：1
> 
> 时间：2012-12-13T05:18:59.853
> 
> 标签：python, oauth

> **可能重复：**
> [在 python 中实现 HMAC-SHA1](https://stackoverflow.com/questions/8338661/implementaion-hmac-sha1-in-python)

`我正在尝试使用 python 进行一些 OAuth 身份验证，但我的 oauth_signature 不断被拒绝。Python 3 对我来说很新，所以有人可以告诉我这段代码有什么问题：

```
api_key = 'string'
api_secret = 'another_string'
sig_key = api_secret + '&' + api_key
hmac_alg = hmac.new(sig_key.encode('utf-8'), sig_base_str.encode('utf-8'),hashlib.sha1)

signature_base = base64.b64encode(hmac_alg.digest())
url = url_base + '?' + 'oauth_signature=' + urllib.parse.quote(str(signature_base.decode('utf-8')),'') + '&' + str(param_str) 
```

param_str 是`&`我的输入参数的分隔字符串。HTTP 服务似乎读得很好，因为它会根据我的要求改变输出响应。它只是一直拒绝我的签名。我认为 hmac 是罪魁祸首。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:25:49.977

你可以试试以下

```
api_key = b'string'
api_secret = b'another_string' 
```

来自 python 文档

> PEP 3112：字节文字。b"..." 字符串文字符号（及其变体，如 b'...'、b"""...""" 和 br"..."）现在生成字节类型的文字。

# c# - WPF 应用程序将文件/数据写入“C:\ProgramData”但无法写入其他文件夹

> ID：13853444
> 
> 赞同：0
> 
> 时间：2012-12-13T05:19:10.743
> 
> 标签：c#, wpf, programdata, folder-permissions

我们开发了允许用户选择文件夹路径的 WPF 应用程序。WPF 应用程序将文件/数据写入此选定路径。当我们选择“C:\ProgramData”作为路径时，它会创建文件并写入数据。但是当路径不是“C:\ProgramData”时，会生成文件但数据不会写入文件，这似乎是权限问题。任何人都可以帮助我们找出，我们如何为选定的文件夹分配与“C：\ ProgramData”相同的权限，以便它允许将数据写入文件。总之，“ProgramData”有什么额外的权限，而不是其他文件夹？

注意：它只适用于 ProgramData 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:24:50.490

每当您的应用程序以标准用户权限启动时，它只能写入标准用户可以写入的文件夹。例如：

1.  C:\用户\用户名\
2.  C:\程序数据\
3.  D:\

它将无法写入以下文件夹：

1.  C：\
2.  C:\用户\SOME_OTHER_USERNAME\
3.  c:\Windows
4.  C:\Windows\System32 等

为此，您需要禁用 UAC 或使用管理权限启动应用程序。

我建议每当用户从您的应用程序中选择一个文件夹时，检查您是否可以在接受路径之前在该位置创建一个文件/文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:18:40.790

@Ganesh 是对的，但您可以选择以下选项之一：

1.  以管理员权限运行安装程序，要求用户在安装过程中选择目标文件夹，并将权限设置为每个人或所需的用户/角色组。
2.  如果上述不适用，则将您的应用程序配置为始终在管理员帐户下运行，这样它就可以访问所有文件夹以写入数据。要配置以管理员用户身份运行应用程序清单，如下[所述](http://msdn.microsoft.com/en-us/library/bb756929.aspx)：
3.  关闭 UAC，虽然不是推荐的方法。

我有同样的问题，所以我强制安装程序在管理员权限下运行，并要求用户在安装过程中创建目标文件夹。使用自定义操作为目标文件夹上的每个用户组设置完全权限。由于安全对我们来说不是问题，因此可以允许所有人，但在使用此选项之前请考虑您的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:54:47.863

我可以给出的解决方案是让用户在获取文件夹路径后选择路径，只需检查是否可以向其中写入数据，请参阅此代码

```
 bool HasAccessToWrite(string path)
    {
        try
        {
            using (FileStream fs = File.Create(Path.Combine(path, "Access.txt"), 1, FileOptions.DeleteOnClose))
            {
            }
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

# pdf - MS Office 和 PDF 文档的架构定义

> ID：13853448
> 
> 赞同：0
> 
> 时间：2012-12-13T05:19:25.403
> 
> 标签：pdf, xls, docx, doc, xlsx

我们的项目涉及解析具有结构化内容的文档，用户必须上传传入文档的模式。到目前为止，我们只处理了 XML，所以这很好。但是现在对 xls(x)、doc(x) 和 pdf 的要求已经到来。

这些文档类型是否有模式定义？我可以确定它可能不适用于 pdf，但希望可能有某种方法可以将这些用于其他类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:32:04.197

MSDN 有 Microsoft 格式的文档

*   二进制（.doc 等）格式： http: [//msdn.microsoft.com/en-us/library/cc313118 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/cc313118(v=office.12).aspx)
*   XML（.docx 等）格式： http: [//msdn.microsoft.com/en-us/library/gg548604 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/gg548604(v=office.12).aspx)

PDF 是一种基于 PostScript 的页面描述语言，因此没有使文档内容具有语义意义的架构。

# android - 选择列表视图项目时如何更改列表视图的标题颜色？

> ID：13853449
> 
> 赞同：3
> 
> 时间：2012-12-13T05:19:25.060
> 
> 标签：android

我正在使用分隔列表，它有多个标题，我想更改所选列表项标题的颜色。Here are my code that able to find the position of header and I can change the color of first header when first section of list selected. 当我选择列表的另一部分时，我无法更改其他标题的颜色。

在这我使用 ArrayAdapter 即不重用视图如果一次性创建视图它不会改变。因此，任何人都可以建议如何使用条件和循环。

这是我的[SepratorListAdapter](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)类的视图方法

```
public View getView(int position, View convertView, ViewGroup parent) {
    int sectionnum = 0;

    for(Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        if(position==0)
        {
            TextView tv = (TextView)headers.getView(sectionnum, convertView, parent).findViewById(R.id.txt_week);
            if(sectionnum==header_pos)
            {   

                headers.getView(sectionnum, convertView, parent).setBackgroundResource(R.drawable.red_strip);

            }
            else
            {

                headers.getView(sectionnum, convertView, parent).setBackgroundResource(R.drawable.gray_strip);

            }

            return headers.getView(sectionnum, convertView, parent);    
        }
        if(position < size)
        {

            return adapter.getView(position - 1, convertView, parent);
        }

        position -= size;
        sectionnum++;
    }
    return null;
} 
```

有任何解决方案和技巧请建议。提前致谢。

# android - 如何在标头的 android 应用程序中设置 ImageView 可见

> ID：13853451
> 
> 赞同：0
> 
> 时间：2012-12-13T05:19:48.133
> 
> 标签：android

我有一个包含 ImageView 的标题设计，它对于我的应用程序中的所有布局都很常见。我想设置某个按钮的 ImageView 可见 onclick。ImageView 必须在所有活动中可见。我正在使用`.setVisibility(View.VISIBLE);`，但它不适用于所有活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:47:45.030

有很多方法可以实现这个任务。一项简单的任务是使用**ViewStub**实现一个通用的标头。请按照以下步骤操作：

1.  使用 ImageView 或任何其他小部件定义 header.xml。
2.  现在将 ViewStub 放在其他活动的 xml 布局的布局中，例如：main.xml

    ```
    <!-- Included header.xml here -->
    <ViewStub android:id="@+id/vsHeader" 
        android:inflatedId="@+id/header" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:layout="@layout/header" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="@string/txtDemo" /> 
    ```

3.  定义一个 BaseActivity 类，您可以从中控制 ImageView 的可见性。

    ```
    abstract public class BaseActivity extends Activity{

    protected View header;
    protected View footer;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
    }

        @Override
    public void setHeader(Activity activity, boolean visible) {
        if (visible) {
            activity.findViewById(R.id.vsHeader).setVisibility(View.VISIBLE);
            header = findViewById(R.id.header);
                 } else
            activity.findViewById(R.id.vsHeader).setVisibility(View.GONE);
        }
    } 
    ```

4.  现在将此 BaseActivity 扩展到您的所有其他 Activity，以便您可以访问这些方法。

因此，在上面的第 3 步中，您可以调用 setHeader() 方法，并将 true/false 作为可见值。您可以在此处查看详细示例：[Android – ViewStub 示例](http://www.technotalkative.com/android-viewstub-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:31:09.280

您可以创建一个类“MyHeaderVisibility”，其中包含一个静态布尔变量“imagevisibility”。为依赖此布尔变量的所有活动设置标题图像的可见性。你应该很高兴。

```
 class MyHeaderVisibility{
            static boolean imagevisibility = false;
    } 
```

在按钮单击事件'上，您可以通过以下方式更改可见性：

```
 Button b = (Button) findViewById(R.id.yourbuttonid);
    b.setOnClickListener(new View.OnClickListener() {

    @Override 
    public void onClick(View v) {
                    MyHeaderVisibility.imagevisibility = true;
            }
    } 
```

# mongodb - 聚合框架中的组停止正常工作

> ID：13853463
> 
> 赞同：1
> 
> 时间：2012-12-13T05:21:14.470
> 
> 标签：mongodb, aggregation-framework

我讨厌这种问题，但也许你可以指出我很明显。我正在使用 Mongo 2.2.2。

我有一个包含 6M 文档的集合（在副本集中），其中包含名为*username*的字符串字段，我有索引。该索引不是唯一的，但最近我使它成为唯一的。突然以下查询给了我错误的警报，我有重复。

```
db.users.aggregate(
    { $group : {_id : "$username", total : { $sum : 1 } } },
    { $match : { total : { $gte : 2 } } },
    { $sort : {total : -1} } ); 
```

返回

```
{
        "result" : [
                {
                        "_id" : "davidbeges",
                        "total" : 2
                },
                {
                        "_id" : "jesusantonio",
                        "total" : 2
                },
                {
                        "_id" : "elesitasweet",
                        "total" : 2
                },
                {
                        "_id" : "theschoolofbmx",
                        "total" : 2
                },
                {
                        "_id" : "longflight",
                        "total" : 2
                },
                {
                        "_id" : "thenotoriouscma",
                        "total" : 2
                }
        ],
        "ok" : 1
} 
```

我用很少的文档在样本集合上测试了这个查询，它按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:06:20.723

10gen 之一在他们的 JIRA 中做出了回应。

*这个系列有更新吗？如果是这样，我会尝试将 {$sort: {username:1}} 添加到管道的前面。这将确保您只看到每个用户名（如果它是唯一的）一次。如果有更新正在进行，那么聚合可能会在文档因增长而移动时看到两次。另一种可能性是文档在被聚合查看后被删除，并且插入了具有相同用户名的新文档。*

因此，`username`在分组之前进行排序会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:06:43.557

我认为答案可能在于您`$group`没有使用索引，它只是对整个集合进行扫描。这些操作符当前可以在聚合框架中使用和索引：

```
$match $sort $limit $skip 
```

如果放在之前，它们将起作用：

```
$project $unwind $group 
```

但是，`$group`它本身不会使用索引。当您进行`find()`测试时，我敢打赌您正在使用索引，可能是作为覆盖索引（您可以通过查看`explain()`该查询来验证），而不是扫描集合。基本上我的理论是你的索引没有欺骗，但你的收藏有。

编辑：这可能是因为文档在聚合操作期间被更新/移动，因此被看到两次，而不是因为最初认为的集合中的重复。

如果您在管道中较早添加一个可以使用索引但不更改输入的结果的运算符`$group`，那么您可以避免该问题。

# jdeveloper - ADF RichTable 与视图对象绑定

> ID：13853466
> 
> 赞同：0
> 
> 时间：2012-12-13T05:22:03.157
> 
> 标签：jdeveloper, oracle-adf

我创建了基于动态查询生成列的视图对象。我想将 viewobject 绑定到richtable，而不是遍历 viewobject 中的每一行并将其添加到richtable。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:27:25.420

您是否考虑过使用动态表格组件？与此类似： [https ://blogs.oracle.com/shay/entry/adf_faces_dynamic_tags_-_for_a](https://blogs.oracle.com/shay/entry/adf_faces_dynamic_tags_-_for_a)

# php - 检查每个 PHP 行中的注释

> ID：13853471
> 
> 赞同：-1
> 
> 时间：2012-12-13T05:22:34.057
> 
> 标签：php, parsing, comments

我需要一个工具来检查注释是否写在每个 php 行之前。我测试了一个工具PHPLOC。但这告诉我总评论行。我需要检查评论是否写在每一行之前。我怎样才能做到这一点？有没有可用的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:28:05.890

我知道了。token_get_all 对我来说很好用。

# python - 从另一个 python 文件执行一个 selenium 测试用例

> ID：13853473
> 
> 赞同：3
> 
> 时间：2012-12-13T05:22:49.097
> 
> 标签：python, selenium, selenium-webdriver, remote-execution

我正在尝试从 python 文件执行 selenium 测试用例。我知道它可以使用 python 的 subprocess 模块来完成 - 但我想探索调用测试用例函数的可能性。

这是我的代码

# chrome_settings_test.py

```
from selenium import w ebdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re
import os, shutil, sys

from selenium.webdriver.chrome.options import Options
from selenium import webdriver

class SeleniumException(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Chrome()
        self.driver.implicitly_wait(30)

    #self.driver = nested_selenium.driver
        self.base_url = "https://www.google.co.in/"
        self.verificationErrors = []

    def test_selenium_exception(self):
        driver = self.driver
        driver.get(self.base_url + "/")
        driver.find_element_by_id("gbqfq").clear()
        driver.find_element_by_id("gbqfq").send_keys("Check this out")

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

# selenium_fnexec.py

```
import chrome_settings_test

print "going to call"
chrome_settings_test.unittest.main() #or
#chrome_settings_test.unittest.setUp() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T06:55:52.223

这做到了

```
import chrome_settings_test
import unittest

unittest.main(module=chrome_settings_test) 
```

感谢 santiycr [https://gist.github.com/4274570](https://gist.github.com/4274570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:35:49.697

如果您希望能够直接调用它的方法，您可以实例化 SeleniumException 类。

```
import chrome_settings_test

print "going to call"
my_test = chrome_settings_test.SeleniumException()
my_test.setUp() 
```

# c++ - 如何在 C++ 中拦截鼠标和键盘事件并发送自定义事件？

> ID：13853474
> 
> 赞同：2
> 
> 时间：2012-12-13T05:22:51.473
> 
> 标签：c++, winapi, hook, keyboard-hook, mouse-hook

好吧，我想编写一个程序，在鼠标和键盘事件被报告给活动窗口/应用程序之前拦截它们，不管是什么。根据我的程序逻辑，我希望能够发送自定义键事件。

例如：当鼠标按钮被按住时，对于任何按键，发送下一个字母。因此，如果我按住鼠标右键并点击“a”，应用程序会将其视为“b”按键。

我已经简要研究了拦截 WinAPI 消息的钩子和方法，我不清楚这是否是我正在寻找的解决方案。根据我所阅读的内容，其中一些解决方案需要您将 DLL 注入所需的应用程序；我的程序需要适用于任何正在运行的应用程序。

另外，我注意到这些解决方案中的大多数都使用 C#。作为个人喜好，我想使用 C++ 来编写这个程序。有什么理由我需要使用 C#？

任何指针或建议表示赞赏。

# c# - 从 GridView 导出为 PDF

> ID：13853475
> 
> 赞同：4
> 
> 时间：2012-12-13T05:22:57.350
> 
> 标签：c#, asp.net, gridview, itext

我已经使用 iTextSharp 从 gridview 导出到 PDF。由于 gridview 列更多，因此 PDF 中的列未对齐并且非常小。我尝试在代码隐藏和 .aspx 页面中编写样式。但大小没有变化。

**.aspx 页面**

```
 <asp:GridView ID="grdResult" runat="server" AutoGenerateColumns="true" Width="100%"
      CellPadding="3" CellSpacing="3" Font-Size="10pt">
      <HeaderStyle Font-Bold="true" Width="250px" />
 </asp:GridView> 
```

**.cs 页面**

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;filename=MARGEmployees.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
HtmlForm frm = new HtmlForm();
grdResult.Parent.Controls.Add(frm);
frm.Attributes["runat"] = "server";
frm.Controls.Add(grdResult);
frm.RenderControl(hw);
grdResult.HeaderRow.Style.Add("width", "15%");
grdResult.HeaderRow.Style.Add("font-size", "10px");
grdResult.Style.Add("font-family", "Tahoma");
grdResult.Style.Add("font-size", "8px");
StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A4, 7f, 7f, 7f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End(); 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:27:08.103

尝试在后面的代码中更改您的 pdf 文档大小。

//尝试其中任何一种

```
Document pdfDoc = new Document(PageSize.A3, 7f, 7f, 7f, 0f);
Document pdfDoc = new Document(PageSize.A2, 7f, 7f, 7f, 0f);
Document pdfDoc = new Document(PageSize.A1, 7f, 7f, 7f, 0f); 
```

由于设置了 pdf 文档的大小，因此列被压缩。如果您更改大小，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T09:27:12.527

GridView 能够[将网格导出为 PDF](http://www.kettic.com/winforms_ui/csharp_guide/gridview_data_export_pdf.shtml)，同时将 GridView 呈现为 XHTML 表格，然后在此过程中将表格转换为 PDF 文档

# jquery - 带有背景位置放置难题的高级 css 精灵菜单

> ID：13853480
> 
> 赞同：0
> 
> 时间：2012-12-13T05:23:31.923
> 
> 标签：jquery, html, css

目前正在尝试使用背景定位在 150wx300h div 内创建垂直 css-sprite 菜单。

```
{http://removed/test1/images} 
```

为了更好地理解这里一个 450x100 垂直 css-sprite 菜单的示例。{http://removed/test1/index}

我目前遇到的主要问题是在 div 中定位 750x100 垂直图像。刷新后 sidemen.png 消失，但是通过将鼠标悬停在它上面，您可以看到那里的显示块（链接）。{http://removedtest2/index}

由于 css 菜单以 50 个高度像素的块显示，因此菜单应该紧贴..300px/6 = 50px..还试图弄清楚如何删除 150wx300h div 内 #menu2(css ul) 上方的空间，但我怀疑这是罪魁祸首，因为我尝试将 rightMENU 高度增加到 900px。

如果它有任何帮助..css水平菜单教程变得垂直.. [http://www.shopdev.co.uk/blog/animated-menus-using-jquery/](http://www.shopdev.co.uk/blog/animated-menus-using-jquery/)

```
#rightMENU{width:150px;height:300px;margin-left:700px;position:absolute;}  

ul#menu2 {

width:100%;
height:50px;

list-style:none;

}

ul#menu2 li {
float:right;
list-style-type: none;

}
ul#menu2 li a {
background:url(images/sidemen.png) no-repeat scroll top left;
display:block;
height:50px;
position:relative;

}
 ul#menu2 li a.zombiemod {
width:150px;
}
ul#menu2 li a.deathmatch {
width:150px;
background-position:-150px 0px;
}

ul#menu2 li a.deathrun {
width:150px;
background-position:-300px 0px;
}
ul#menu2 li a.s1 {
width:150px;
background-position:-450px 0px;
}
ul#menu2 li a.s2 {
width:150px;
background-position:-600px 0px;
}
ul#menu2 li a.s3 {
width:150px;
background-position:-750px 0px;
}

ul#menu2 li a span {
background:url(images/sidemen.png) no-repeat scroll bottom left;
display:block;
position:absolute;
top:0;
left:0;
height:100%;
width:100%;

}

ul#menu2 li a.zombiemod span {
background-position:0px -50px;
}
ul#menu2 li a.deathmatch span {
background-position:-150px -50px;
}

ul#menu2 li a.deathrun span {
background-position:-300px -50px;
}

ul#menu2 li a.s1 span {
background-position:-450px -50px;
}

ul#menu2 li a.s2 span {
background-position:-600px -50px;
}

ul#menu2 li a.s3 span {
background-position:-750px -50px;
}

HTML

 <div id="rightMENU">
                 <ul id="menu2">
<li><a href="#" class="zombiemod"><span></span></a></li>
<li><a href="#" class="deathmatch"><span></span></a></li>
<li><a href="#" class="deathrun"><span></span></a></li>
    <li><a href="#" class="s1"><span></span></a></li>
    <li><a href="#" class="s2"><span></span></a></li>
<li><a href="#" class="s3"><span></span></a></li>
 </ul>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:27:05.513

这是你的文件名。

只需删除`sidemen .png` 之前的空间`.png`，它应该可以正常工作。

# css - 溢出-x 错误？全浏览器宽度条技术

> ID：13853482
> 
> 赞同：0
> 
> 时间：2012-12-13T05:23:44.920
> 
> 标签：css, overflow, swipe-gesture

我正在页面上尝试[这种技术](http://css-tricks.com/full-browser-width-bars/)。以前用过它似乎工作正常，但现在在 Chrome 和 Firefox 中，不显示水平滚动条（这很好），但两指滑动时仍然发生水平滚动（这很糟糕）。

我发现[这个错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=674477)描述了相同的行为，但被标记为已解决。我在 Safari 中测试过，水平滚动被阻止了。

代码（实际上与 CSS-Tricks 示例中的代码相同）：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<style>
body {
overflow-x: hidden;
}
h1 {
position: relative;
background: hsla(0,0%,0%,0.8);
color: white;
width: 90%;
margin: 0 auto;
}
h1:before, h1:after {
content: "";
position: absolute;
background: hsla(0,0%,0%,0.8);
top: 0;
bottom: 0;
width: 9999px;
}
h1:before {
right: 100%; 
}
h1:after {
left: 100%;
}
</style>
</head>
<body>
<h1>Title of Page with full browser width bars</h1>
</body>
</html> 
```

非常感谢任何帮助。

编辑：在 html 元素中添加 overflow-x 确实可以防止水平滚动，但有时会导致其他显示错误（在我制作的更充实的页面上，下拉菜单一直被切断，即使这应该是一个溢出-y事情）并且没有解释为什么滚动条不存在，但滚动仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T00:53:10.583

我知道很久以前有人问过这个问题，但希望这对某人有所帮助。尝试将 overflow-x 隐藏样式也添加到 html 标记中，例如：

```
html, body{
    overflow-x:hidden;
} 
```

# iphone - 如何将Objective-C中的图像调整为较小的版本？

> ID：13853483
> 
> 赞同：1
> 
> 时间：2012-12-13T05:24:00.770
> 
> 标签：iphone

我有三个图像（.png 格式）。我组合了三个图像并使用 drawInRect() 为图像创建了一个对话气泡，并指定了绘制每个图像的矩形。

我使用 resizableImageWithCapInsets:UIEdgeInsetsMake 为每个图像创建了可调整大小的图像。

我的原始图像很大。因此，当我添加仅包含几个字符的文本时，绘制的语音气泡对于文本来说看起来更大。

谁能告诉我如何缩小图像以使其适当地围绕文本。

我的语音气泡有一个顶部图像，其原始高度为 17 像素，因此如果我使用 drawInRect() 和低于该高度的矩形，图像的一部分会被裁剪，底部图像也是如此。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:40:36.460

我们需要根据需要调整图像大小，示例代码片段：

```
 CGSize imageSize = CGSizeMake(320,480); // give any desired size you want

    UIGraphicsBeginImageContext(itemSize);//Creates a bitmap-based graphics context

    CGRect imageRect = CGRectMake(0.0, 0.0, imageSize.width, imageSize.height);//modify

    [myimage drawInRect:imageRect];

    myimage = UIGraphicsGetImageFromCurrentImageContext();  //returns new image

    UIGraphicsEndImageContext(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:05:20.513

试试这个方法来调整图像大小

```
-(UIImage *)resizeImage:(UIImage *)image width:(int)wdth height:(int)hght{
    int w = image.size.width;
    int h = image.size.height;
    CGImageRef imageRef = [image CGImage];
    int width, height;
    int destWidth = wdth;
    int destHeight = hght;
    if(w > h){
        width = destWidth;
        height = h*destWidth/w;
    }
    else {
        height = destHeight;
        width = w*destHeight/h;
    }
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef bitmap;
    bitmap = CGBitmapContextCreate(NULL, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedFirst);

    if (image.imageOrientation == UIImageOrientationLeft) {

        CGContextRotateCTM (bitmap, M_PI/2);
        CGContextTranslateCTM (bitmap, 0, -height);

    } else if (image.imageOrientation == UIImageOrientationRight) {

        CGContextRotateCTM (bitmap, -M_PI/2);
        CGContextTranslateCTM (bitmap, -width, 0);

    }
    else if (image.imageOrientation == UIImageOrientationUp) {

    } else if (image.imageOrientation == UIImageOrientationDown) {

        CGContextTranslateCTM (bitmap, width,height);
        CGContextRotateCTM (bitmap, -M_PI);
    }

    CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);
    UIImage *result = [UIImage imageWithCGImage:ref];
    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return result;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:33:09.910

```
 - (UIImage*)imageByScalingAndCroppingForSize:(CGSize)targetSize
{
UIImage *sourceImage = self;
UIImage *newImage = nil;        
CGSize imageSize = sourceImage.size;
CGFloat width = imageSize.width;
CGFloat height = imageSize.height;
CGFloat targetWidth = targetSize.width;
CGFloat targetHeight = targetSize.height;
CGFloat scaleFactor = 0.0;
CGFloat scaledWidth = targetWidth;
CGFloat scaledHeight = targetHeight;
CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

if (CGSizeEqualToSize(imageSize, targetSize) == NO) 
{
    CGFloat widthFactor = targetWidth / width;
    CGFloat heightFactor = targetHeight / height;

    if (widthFactor > heightFactor) 
        scaleFactor = widthFactor; // scale to fit height
    else
        scaleFactor = heightFactor; // scale to fit width.

    scaledWidth  = width * scaleFactor;
    scaledHeight = height * scaleFactor;

    // center the image
    if (widthFactor > heightFactor)
    {
        thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
    }
    else 
        if (widthFactor < heightFactor)
        {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
}       

UIGraphicsBeginImageContext(targetSize); // this will crop

CGRect thumbnailRect = CGRectZero;
thumbnailRect.origin = thumbnailPoint;
thumbnailRect.size.width  = scaledWidth;
thumbnailRect.size.height = scaledHeight;

[sourceImage drawInRect:thumbnailRect];

newImage = UIGraphicsGetImageFromCurrentImageContext();
if(newImage == nil) 
NSLog(@"could not scale image");

//pop the context to get back to the default
UIGraphicsEndImageContext();
return newImage;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:52:53.623

试试这个方法：

```
-(UIImage *)imageWithImage:(UIImage *)imageToCompress scaledToSize:(CGSize)newSize {

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [imageToCompress drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

# html - 搞砸了我的 CSS

> ID：13853484
> 
> 赞同：8
> 
> 时间：2012-12-13T05:24:08.443
> 
> 标签：html, css, internet-explorer, doctype

简而言之，我希望 a`right div float`垂直扩展`100%` ，但它仅在我不包含`<doctype>`在我的 html中时才有效

在今天的标准中，我真的必须添加`<doctype>`吗？

这是 Internet Explorer 中的结果：

![文档类型问题](../Images/8dcec54f1c265deaea0b9817b8b94b95.png)

这很简单`html`

```
<html>
<head>
<style type="text/css">
html, body {
padding:0;
margin:0;
height:100%;
}
#wrap {
background:red;
height:100%;
overflow:hidden;
}
#left {
background:yellow;
float:left;
width:70%;
min-height:100%;
}
#right {
background:pink;
float:right;
width:30%;
min-height:100%;
}
</style>

<body>
<div id="wrap">
<div id="left"> Content </div>
<div id="right"> Side Content </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T05:28:57.563

> 在今天的标准中，我真的必须添加`<doctype>`吗？

您不必**做**任何事情，但是 DOCTYPE 的缺失本质上是在断言您符合（在术语的最宽松意义上）一个未知/不一致的“怪癖”标准。

我想解决方案就像将父容器的高度设置为 100% 或特定的像素高度一样简单。

*   确保在`HTML`and`BODY`元素上设置了高度。
*   确保在任何父容器上设置高度。

工作示例：http: [//jsfiddle.net/7xxFj/](http://jsfiddle.net/7xxFj/)

```
<div id="one">
    First column
</div>
<div id="two">
    second column
</div>​

HTML, BODY { height: 100%; }
#one { height: 100%; width: 30%; float: left; background-color: red; }
#two { height: 100%; width: 70%; float: left; background-color: blue; } 
```

正如@BoltClock 在评论中指出的那样，您可能想要一个可以扩展超过 100% 的布局。这需要更多的努力（但在标准范围内仍然可以很好地工作）。

[本文](http://css-tricks.com/fluid-width-equal-height-columns/)展示了几种实现具有相同列高的布局的方法。更多[方法在这里](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:36:41.337

如果您正在考虑考虑 IE（与此相关的任何版本，请不要离题），那么您最好指定 DOCTYPE。我已经看到许多页面通过 IE 进入著名的 Quirks 模式时无法正确执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:47:27.740

使用此代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
html, body {
padding:0;
margin:0;
height:100%;
}
#wrap {
background:red;
height:100%;
overflow:hidden;
}
#right {
background:blue;
float:left;
width:30%;
height:100%;
}
#left {
background:yellow;
float:left;
width:70%;
height:100%;
}
</style>
</head>
<body>
<div id="wrap">
<div id="left"> Content </div>
<div id="right"> Side Content </div>
</div>
</body>
</html> 
```

# python - 使用子网掩码对 IP 地址列表进行排序，删除重复项

> ID：13853493
> 
> 赞同：-3
> 
> 时间：2012-12-13T05:25:03.983
> 
> 标签：python, perl, sorting, ip-address

我有一个包含这些 IP 地址的 txt 文件，并希望对它们进行排序以删除重复的 IP 地址，但保留 /subnets。

```
4.4.4.4/32
4.2.2.2/32
4.4.4.4/32
4.2.2.2/32
4.2.2.2/28
4.4.4.4/24
2.2.2.2/32 
```

例如：排序和删除重复后，上面变成

```
4.4.4.4/32
4.2.2.2/32
4.2.2.2/28
4.4.4.4/24
2.2.2.2/32 
```

使用 awk 或 perl 或 python 的任何提示？我也想按升序排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:34:02.903

您应该能够仅使用`sort -ur`.

编辑：要在 python 中执行此操作，您可以执行以下操作：

```
with open('ipaddress.txt', 'r') as f:
    address = sorted(list(set(line for line in f)), reverse=True)
    for ad in address:
        print(ad) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:05:01.563

由于数据看起来非常规则，因此很容易通过使用*key*参数确保在 Python 中正确排序。这用于为要排序的列表中的每个实例创建一个“排序键”。人们经常使用 lambda 作为排序键函数，但为了完整起见，我们将定义**一些**有用的东西。

重复删除最好在 Python 中的排序之前完成。由于无论如何都必须对列表进行排序，因此将其转换为集合会导致唯一字符串的任意排序无关紧要，如果在 Python 中排序无关紧要， “唯一化”列表*l的简单方法是*

```
l = list(set(l)) 
```

顺便说一句，您的测试数据选择不当，因为它会在词汇排序上正确排序（只是偶然）。因此，您最好在地址中包含一些带有两位数和三位数组件的示例，这样就不再正确了。我通过解释的方式展示了非工作排序。

```
In [42]: data = """\
4.4.4.4/32
4.2.2.2/32
4.4.4.4/32
4.2.2.2/32
4.2.2.2/28
4.4.4.4/24
2.2.2.2/32
12.13.14.15/24
11.12.13.14/24""".splitlines()

In [43]: data.sort()

In [44]: data
Out[44]: 
['11.12.13.14/24',
 '12.13.14.15/24',
 '2.2.2.2/32',
 '4.2.2.2/28',
 '4.2.2.2/32',
 '4.2.2.2/32',
 '4.4.4.4/24',
 '4.4.4.4/32',
 '4.4.4.4/32']

In [45]: data = list(set(data))

In [46]: data.sort()

In [47]: data
Out[47]: 
['11.12.13.14/24',
 '12.13.14.15/24',
 '2.2.2.2/32',
 '4.2.2.2/28',
 '4.2.2.2/32',
 '4.4.4.4/24',
 '4.4.4.4/32']

In [48]: def sortkey(addr):
   ....:     add, pref = addr.split("/")
   ....:     a, b, c, d = (int(x) for x in add.split("."))
   ....:     return a, b, c, d, int(pref)
   ....: 

In [49]: data.sort(key=sortkey)

In [50]: data
Out[50]: 
['2.2.2.2/32',
 '4.2.2.2/28',
 '4.2.2.2/32',
 '4.4.4.4/24',
 '4.4.4.4/32',
 '11.12.13.14/24',
 '12.13.14.15/24'] 
```

排序键函数在 Python 中并不重要，因为它作为“装饰/排序/取消装饰”算法的一部分仅应用于每个列表值一次。更一般地说，对于这个问题域，您可能会发现 ipaddress 模块很有帮助：[http ://docs.python.org/dev/howto/ipaddress.html](http://docs.python.org/dev/howto/ipaddress.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:32:22.993

在python中你可以这样做：

```
In [3]: l = []

In [4]: with open('ipaddress.txt', 'r') as input_file:
   ...:     for elem in input_file.readlines():
   ...:         if elem.strip() not in l:
   ...:             l.append(elem.strip())
   ...:

In [5]: l
Out[5]: ['4.4.4.4/32', '4.2.2.2/32', '4.2.2.2/28', '4.4.4.4/24', '2.2.2.2/32'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:35:00.703

您可以使用 awk 按照它们在文件中出现的顺序获取唯一的行：

```
awk '!seen[$0]++' 
```

如果你想要整个管道：

```
awk '/#/{sub(/#.*/,"",$0)} length($0) && !seen[$0]++' ipnum.txt 
```

[未经测试]

# heroku - Github，如何调试“刷新工作目录失败”

> ID：13853500
> 
> 赞同：6
> 
> 时间：2012-12-13T05:25:31.237
> 
> 标签：heroku, github, github-for-windows

我正在使用最新的 GitHub for windows，偶尔会发生这种情况，这总是建议我在 shell 中调试 repo。我正在寻找学习如何进行此调试是否有任何来源可以解释所有（甚至大多数）常见问题会导致这种情况？从命令行使用时，回购似乎没问题。

现在让我发疯的具体案例是我正在尝试与使用 Mac 的朋友合作的 Heroku 项目。不确定这是否相关，我想学习如何调试一般情况，但这里的任何提示也很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:40:01.010

以管理员权限运行 GitHub 也解决了这个问题 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:03:50.967

你可以找到“GitHub for Windows”登录

```
# WinXp:
C:\Documents and Settings\LoginName\Local Settings\Application Data\GitHub
# Or Win7:
C:\Users\LoginName\Local Settings\Application Data\GitHub 
```

我看到了这条消息：

*   关于身份验证问题（我在公司环境中使用过）
*   当 Windows 处理一些应该由`git pull`.

我通常会打开一个 bash（从“GitHub from Windows”GUI 启动），以便将失败的 GUI 操作作为 git 命令重复。

# javascript - vb脚本中“window.event.repeat”的含义是什么？

> ID：13853503
> 
> 赞同：0
> 
> 时间：2012-12-13T05:26:08.300
> 
> 标签：javascript, vbscript

```
Function SearchField_OnKeyDown()
If window.event.keyCode = 8 Then 
    If window.event.repeat Or Not Em(document.all("SearchField").value) Then
        lBackspaceExits = False
        window.clearTimeOut(cBackTimeoutID)
        cBackTimeoutID = window.setTimeout("ResetBackspaceExit()", 600)
    ElseIf lBackspaceExits Then
        window.history.back()
        lBackspaceExits = False
    End If
ElseIf window.event.keyCode = 13 Or _
       window.event.keyCode = 38 Or window.event.keyCode = 40 Or _
       window.event.keyCode = 33 Or window.event.keyCode = 34 Then 
    SearchField_OnKeyDown = document_onkeydown()
    Exit Function
End If

SearchField_OnKeyDown = True
End Function 
```

您能解释一下如何将上述函数转换为 javascript 吗？特别是我需要知道如何转换以下步骤

```
 window.event.repeat
 window.clearTimeOut(cBackTimeoutID)
 window.setTimeout("ResetBackspaceExit()", 600)
 SearchField_OnKeyDown = document_onkeydown() 
```

`event.repeat`不能在 javascript 中工作。返回`undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:28:20.687

`event.repeat`表示，如果触发事件的键被连续按下，这是有效的 JS。

`window.clearTimeout()`在 JS 中也是一样的，它清除了分配给`cBackTimeoutID`.

第 3 行需要一点修正：

```
window.setTimeout(ResetBackspaceExit, 600); 
```

您可以在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript)找到 JavaScript 语法。

# linux - 如何在没有 Internet 连接的情况下为 GCC 安装 C 编译器？(RHEL6)

> ID：13853507
> 
> 赞同：2
> 
> 时间：2012-12-13T05:27:03.110
> 
> 标签：linux, gcc, redhat

我正在尝试在 RHEL6 虚拟机上从源代码构建 GCC，并且遇到了 Catch 22。也就是说，我需要一个 C 编译器才能成功配置。解决方案似乎很简单——执行 yum 来解决依赖关系。但是，此虚拟机无法连接 Internet。

有没有人有任何包含预编译编译器的二进制文件或 .rpm 的源代码，从而简化了安装？我已经搜索过，但找不到一个。或者，是否存在 RHEL6 命令来安装 GCC 的预编译版本？如果两者都不可能，我可以使用哪些 C 编译器来解决这个问题？

对于上下文，这是我收到的消息：

```
../gcc-4.7.2/configure
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether ln works... yes
checking whether ln -s works... yes
checking for a sed that does not truncate output... /bin/sed
checking for gawk... gawk
checking for libitm support... yes
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/gcc/gcc-build':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:56:15.497

如果您的 VM 上未安装任何 C 编译器，则无法编译 gcc 源代码。

如果您可以将文件从主机转换为虚拟机，那么您有两种方法：

1.  在您的主机上编译源代码并将它们复制到您的 VM。用于`./configure --prefix=/<path>/<to>/<output>`指定输出目录。如果您的 VM CPU 架构与您的主机不同，您可能需要查看交叉编译。

2.  从 Redhat 的 rpm 存储库镜像下载 gcc rpm 包。在谷歌搜索它，你会得到答案。

但是在 RHEL 中使用`yum`或`rpm`安装软件总是一个好主意。我对您的问题有一些疑问：

1.  为什么你的 RHEL6 上没有安装 gcc？它是默认安装的。
2.  你用的是什么虚拟机？您的问题的最佳解决方案可能是想办法让您的虚拟机中的网络可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:20:29.240

由于您的 VM 上没有 Internet 访问权限，因此您可能无法使用依赖项解析`yum`或`rpm`. 我假设您不想连接或无法将 VM 连接到 Internet。

从互联网连接的系统中，您可以在此处下载自包含的 GCC 预构建版本和工具链的其余部分：

*   [http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)

IA32 GNU/Linux 原生编译器在这里：

*   [http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/ia32-gnu-linux](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/ia32-gnu-linux)

*   [https://sourcery.mentor.com/GNUToolchain/package10871/public/i686-pc-linux-gnu/ia32-2012.09-62-i686-pc-linux-gnu.bin](https://sourcery.mentor.com/GNUToolchain/package10871/public/i686-pc-linux-gnu/ia32-2012.09-62-i686-pc-linux-gnu.bin)

您仍然需要找到一种方法将安装程序安装到您的 VM 上。

# objective-c - 有人可以向我解释一下 Objective-C 方法中类型括号的原因吗？

> ID：13853510
> 
> 赞同：3
> 
> 时间：2012-12-13T05:27:11.037
> 
> 标签：objective-c

我仍在学习 Objective-C，但我想知道我所学的一切背后的“原因”。

我想知道为什么Objective-C方法要求将类型括在括号中，例如：

```
- (IBAction) myAction: (UIButton *) sender; 
```

代替：

```
- IBAction myAction: UIButton *sender; 
```

我已经尝试寻找答案并考虑了很多，但似乎看不出原因是什么。

困扰我的是有时我实际上忘记了星号 ( `*`) 需要在括号内，有时我不小心输入了以下错误的签名：

```
- (IBAction) myAction: (UIButton) *sender; 
```

对我来说，这更合乎逻辑地表示参数是指针，而不是类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:55:52.470

那是 C 转换语法：

```
int foo = (int)bar; 
```

将其视为将参数和返回值转换为特定类型。

在 Objective-C 的早期，返回值和参数默认为`id`类型。所以你会看到这样的方法声明：

```
-myAction:sender; 
```

由于许多原因，在 Objective-C 代码中强类型化返回值和参数变得更可取，以至于所有返回值和参数都是强类型化的，即使它们是`id`：

```
- (IBAction)myAction:(id)sender; 
```

星号也是 C 语法。 `UIButton*`是一种特定类型，不同于`UIButton`和`UIButton**`。你可以这样做：

```
typedef UIButton* UIButtonRef; 
```

然后使用`UIButtonRef`而不是`UIButton*`：

```
- (IBAction)myAction:(UIButtonRef)sender; 
```

# selenium-webdriver - 使用 selenium webdriver 捕获和研究图形/图表

> ID：13853511
> 
> 赞同：0
> 
> 时间：2012-12-13T05:27:10.563
> 
> 标签：selenium-webdriver

我需要在 Selenium webdriver 的帮助下分析网页上的图表。这里的分析意味着我们需要检查数据创建的图形与数据库中可用的实际数据相比是否正确。PFB 流量： i．用户点击一个链接，然后打开一个包含一些图表（饼图和条形图）的页面。ii. 在后端，从数据库中获取所需的数据并将其传递给应用程序。iii. 然后将这些数据传递给第三方工具 protovis，然后将数据转换为所需的图形并在屏幕上显示图形。

需要知道使用 Selenium webdriver (2.0) 是否完全可行。如果没有，那么有没有其他方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:43:06.840

也许您可以配置驱动程序以下载生成的图像并将其与您拥有的数据进行比较，但您将需要一些可以比较图像和数据的工具。

# iphone - 如何创建类似于分段控制的自定义标签栏？

> ID：13853516
> 
> 赞同：1
> 
> 时间：2012-12-13T05:27:41.323
> 
> 标签：iphone, objective-c, ios5, ios6, xcode4.5

如何在底部创建类似于分段控件的自定义标签栏控件？

在底部，有三个选项卡（tab1、tab2 和 tab3）。选项卡显示类似于段控制。选择每个段索引，导航栏显示将有不同的视图。

任何有关如何实现这一目标的帮助或见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:38:44.213

您可以使用想要设置为背景的图像`UITabBar`...

否则使用 custom `UITabBarController`，请参阅下面的一些链接..

1.  [为 iPhone 定制的 uitabbar 控制器](http://www.guerrillawebsitedesign.co.uk/wordpress/index.php/2010/09/30/how-to-create-a-custom-uitabbarcontroller-for-the-iphone-with-different-background-images-and-icons-part-1-2/)

2.  [iphone-app-implement-a-custom-tab-bar](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)

3.  [如何在 iphone-sdk 中制作标签栏代码](http://rahulvirja.blogspot.in/2012/05/how-to-make-tabbar-in-iphone-sdk.html)

4.  [RXCustomTabBar](https://github.com/rumex/RXCustomTabBar)

5.  [自定义 TabBar](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar) /// 看到这个链接有很多类型的 UITabBar..

我希望这对你有帮助..

# javascript - 在特定日期使用 jquery 隐藏表列

> ID：13853518
> 
> 赞同：0
> 
> 时间：2012-12-13T05:27:45.910
> 
> 标签：javascript, php, jquery, html-table

我的数据库中有一个名为 view results 的表。它有 3 列。我想在 14 天后隐藏它的第 3 列“应用更正”。示例：表显示日期为 2012-12-01。14 天后如何隐藏它第 3 列（IN 2012-12-15 表对引用此表的学生不可见..）....这是我的示例代码：

```
<table border=1>
    <tr><th>Student ID</th><th>Grade</th><th>Apply Recorrection</th>
    <tr><td>RS211</td><td>C</td><td>Click Here</td></tr>
    <tr><td>RS221</td><td>B</td><td>Click Here</td></tr>
        <tr><td>RS251</td><td>F</td><td>Click Here</td></tr>
</table>​ 
```

JS代码：

```
$("table td:nth-child(3)").hide();​ 
```

演示代码链接：http: [//jsfiddle.net/ELRpv/4/](http://jsfiddle.net/ELRpv/4/)

帮助我编辑此代码以完成我的任务...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:38:38.333

三件事：

1）您需要“关闭”第一行中的 TR 元素。

2）您也可以定位第一行中的 TH 元素：

```
$("table td:nth-child(3), table th:nth-child(3)").hide(); 
```

3）如果您可以将“显示日期”添加为数据日期属性，那么使用一些 JS 您可以计算今天和显示日期之间的差异。

```
<table border=1 data-date="2012-12-01">
    <tr><th>Student ID</th><th>Grade</th><th>Apply Recorrection</th></tr>
    <tr><td>RS211</td><td>C</td><td>Click Here</td></tr>
    <tr><td>RS221</td><td>B</td><td>Click Here</td></tr>
    <tr><td>RS251</td><td>F</td><td>Click Here</td></tr>
</table>​

// Today
var time_now = $.now();

// The date set in the table's data-date.
var date_start = new Date($('table').attr('data-date'));

// The table's date turned into microseconds.
var time_start = date_start.getTime();

// The difference in days.
var date_difference = parseInt((time_now - time_start ) / (86400000));

// If the date difference is greater than X, hide the column.
if(date_difference > 12){
    $("table td:nth-child(3), table th:nth-child(3)").hide();    
} 
```

这里的工作样本：

[http://jsfiddle.net/hansvedo/TuLMC/](http://jsfiddle.net/hansvedo/TuLMC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:46:50.803

这应该适用于您的要求。您只需要在表格元素的数据日期属性中设置开始日期

[http://jsfiddle.net/ELRpv/14/](http://jsfiddle.net/ELRpv/14/)

```
<table border=1 data-date="12/01/2012">
    <tr><th>Student ID</th><th>Grade</th><th>Apply Recorrection</th>
    <tr><td>RS211</td><td>C</td><td>Click Here</td></tr>
    <tr><td>RS221</td><td>B</td><td>Click Here</td></tr>
    <tr><td>RS251</td><td>F</td><td>Click Here</td></tr>
</table>

var baseDate = new Date($("table").data('date'));
var expireDate = new Date().setDate(baseDate.getDate() + 14);
var curDate = new Date();

if (curDate > expireDate)
    $("table td:nth-child(3)").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:33:53.527

HTML：

```
<table border=1>
    <tr><td>Student ID</td><td>Grade</td><td>Apply Recorrection</td></tr>
    <tr><td>RS211</td><td>C</td><td>Click Here</td></tr>
    <tr><td>RS221</td><td>B</td><td>Click Here</td></tr>
    <tr><td>RS251</td><td>F</td><td>Click Here</td></tr>
</table> 
```

JS：

```
$(document).ready(function(){
    $('table').find('tr').each(function(){
       $(this).find('td').eq(2).hide();       
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:37:39.420

我添加了一个辅助函数，因此您可以传入表格和列号以隐藏

```
function hideColumn($table, columnNumber){
    $table.find('td:nth-child('+columnNumber+'), th:nth-child('+columnNumber+'),').hide();
}

function showColumn($table, columnNumber){
    $table.find('td:nth-child('+columnNumber+'), th:nth-child('+columnNumber+'),').show();
}

var $myTable = $('table');

hideColumn($myTable, 3); 
```

​</p>

更新小提琴：http: [//jsfiddle.net/ELRpv/5/](http://jsfiddle.net/ELRpv/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T06:12:18.833

最好的方法是在服务器端执行此操作。- 如果 dayOfMonth(date)>14 ：不写第三列。

如果您在 HTML 上编写第 3 列并在页面加载后隐藏或删除它，则有多种方法可以查看第 3 列的 HTML，以防万一。

要在浏览器上执行此操作，您需要依赖服务器日期而不是客户端日期，因为它可以由用户更改。

正如 tim 建议的那样，您可以将服务器日期设置为任何 DOM 元素的属性值，以使日期对 js 可用。

```
<table border=1 data-date="12/01/2012"> 
```

如果日期超过 14，请使用以下代码隐藏列

```
var dt=new Date($("table").data('date'));
if(dt.getDate()>14)
  $("table td:nth-child(3)").remove(); 
```

如果您有任何问题，请告诉我。

# php - 如何在 php 中打印此返回值？

> ID：13853519
> 
> 赞同：-1
> 
> 时间：2012-12-13T05:27:48.750
> 
> 标签：php

```
function printmsg($string,$type) {//type 1 = green, type 2 = red
    if($type == 1) $msg = "<p style=\"color:#00C5CD\">".$string."</p>";
    if($type == 2) $msg = "<p style=\"color:#f7110b\">".$string."</p>";
    return $msg;
}
printmsg("hello",1);

//lots of other code
print($msg); 
```

我试图让我的返回值打印出来，但它似乎从来没有工作过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:29:45.877

如何将函数的返回值保存在变量中并打印变量

```
function printmsg($string,$type) {//type 1 = green, type 2 = red
    if($type == 1) $msg = "<p style=\"color:#00C5CD\">".$string."</p>";
    if($type == 2) $msg = "<p style=\"color:#f7110b\">".$string."</p>";
    return $msg;
}
$msg = printmsg("hello",1);

//lots of other code
print($msg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:30:49.093

如果您要返回某些东西，则必须在某些变量中捕获它。此外，`PHP`您需要使用`echo`来打印变量。

```
function printmsg($string,$type) {//type 1 = green, type 2 = red
    if($type == 1) $msg = "<p style=\"color:#00C5CD\">".$string."</p>";
    if($type == 2) $msg = "<p style=\"color:#f7110b\">".$string."</p>";
    return $msg;
}
$msg = printmsg("hello",1);

//lots of other code
echo $msg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:30:36.797

只是回应它

```
function printmsg($string,$type) {//type 1 = green, type 2 = red
    if($type == 1) $msg = "<p style=\"color:#00C5CD\">".$string."</p>";
    if($type == 2) $msg = "<p style=\"color:#f7110b\">".$string."</p>";
    return $msg;
}
echo printmsg("hello",1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:30:58.377

你要这个：

```
function printmsg($string,$type) {//type 1 = green, type 2 = red
if($type == 1) $msg = "<p style=\"color:#00C5CD\">".$string."</p>";
if($type == 2) $msg = "<p style=\"color:#f7110b\">".$string."</p>";
return $msg; 
```

} $msg=printmsg("你好",1);

//很多其他代码 print($msg);

# ios - zBar 扫描仪视图控制器在 Segue 之前不会关闭

> ID：13853522
> 
> 赞同：0
> 
> 时间：2012-12-13T05:28:11.723
> 
> 标签：ios, uiviewcontroller, zbar

我正在使用 ZBar 并尝试添加一个子视图以在我扫描条形码之后和我的新视图准备好之前显示搜索 UIActivityIndi​​catorView（缓慢的网络查找等）。这是代码：

```
- (IBAction)scanImage{
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;

ZBarImageScanner *scanner = reader.scanner;
// (optional) additional reader configuration here
[scanner setSymbology: ZBAR_ISBN13 & ZBAR_ISBN10
               config: ZBAR_CFG_ENABLE
                   to: 1];

// present and release the controller
[self presentViewController:reader animated:YES completion:NULL];
}

- (IBAction)existingImage {
ZBarReaderController *reader = [ZBarReaderController new];
reader.readerDelegate = self;
reader.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[reader.scanner setSymbology: ZBAR_ISBN13 & ZBAR_ISBN10
                      config: ZBAR_CFG_ENABLE
                          to: 1];

[self presentViewController:reader animated:YES completion:NULL];
}

- (void) imagePickerController: (UIImagePickerController*) reader
didFinishPickingMediaWithInfo: (NSDictionary*) info
{
[reader dismissViewControllerAnimated:YES completion:NULL];

[reader.view addSubview:loading];
... 
```

问题在于最后两个语句。当我执行 segue 时，阅读器视图控制器直到稍后在冷块中才会被解散，并且不会显示“加载”子视图（代码中前面的设置）。我可以使用代码来显示加载是合法的，但我无法让它在我想要的时候出现。屏幕只显示相机视图或现有图像的图片，我可以看到控制台日志中发生的所有 segue 设置活动，然后使用我的 segue 视图控制器更新视图。FWIW我需要iOS6，所以这就是为什么我使用dismissViewControllerAnimated：而不是dismissModalViewController：但我还是尝试了它，但它没有用。

任何建议都非常感谢！

# linux - 为什么 waitid 不阻塞，直到孩子终止？

> ID：13853524
> 
> 赞同：0
> 
> 时间：2012-12-13T05:28:18.697
> 
> 标签：linux, clone

```
void *stack;
stack = malloc(STACK_SIZE);
if (-1 == clone(child_thread, stack + STACK_SIZE, 0, NULL)) {                                                                                                                                                                           
    perror("clone failed:");
}   
while(waitid(P_ALL, 0, NULL, WEXITED) != 0){ 
    perror("waitid failed:");
    sleep(1);
} 
```

手册说：

> 如果一个孩子已经改变了状态，那么这些调用会立即返回。否则他们会阻塞，直到有一个孩子改变状态

但实际上它立即返回：

```
waitid failed:: No child processes
waitid failed:: No child processes
... 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:52:21.103

我不知道您在此处尝试完成的具体操作，但通过以下方式使用 waitid 可能会有所帮助：

```
#include <sys/types.h>
#include <sys/wait.h>

...

siginfo_t signalInfo;
waitid(P_ALL, 0, &signalInfo, WEXITED | WSTOPPED | WNOWAIT | WNOHANG); 
```

然后在 signalInfo 中检查以下内容以了解子退出时发生的情况：

```
signalInfo.si_signo : For Signal Number
signalInfo.si_code : Usually SIGCHLD
signalInfo.si_errno) : Any error code set
signalInfo.si_status : For exit code of the child code 
```

注意：使用 WNOWAIT 可以让操作系统保留子进程资源的使用，即使它被杀死。您可能/可能不会使用此选项。如果这样做，您将不得不在没有 WNOWAIT 选项的情况下再次显式调用孩子的 waitid。

参考：有关此的更多信息，请参见 waitid 的手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:35:57.143

您正在使用 PID 选项。在手册页中进一步查看：

以下特定于 Linux 的选项适用于使用 clone(2) 创建的子代；它们不能与 waitid() 一起使用：

```
 __WCLONE
          Wait  for "clone" children only.  If omitted then wait for "non-
          clone" children only.  (A "clone" child is one which delivers no
          signal, or a signal other than SIGCHLD to its parent upon termi-
          nation.)  This option is ignored if __WALL is also specified.

   __WALL (Since Linux 2.4) Wait for  all  children,  regardless  of  type
          ("clone" or "non-clone").

   __WNOTHREAD
          (Since  Linux  2.4) Do not wait for children of other threads in
          the same thread group. This was the default before Linux 2.4. 
```

# amazon-web-services - 如何跨多个 AWS 实例复制代码更改？

> ID：13853529
> 
> 赞同：2
> 
> 时间：2012-12-13T05:28:48.323
> 
> 标签：amazon-web-services

我们在 AWS 中有一个负载平衡设置，有两个实例。我们使用 SVN 进行非常频繁的代码更新。我需要知道更新集群中所有实例的代码更改是多么容易。我们可以简单地做“快照”并每次为实例创建新卷吗？...或者？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:13:25.027

我不会通过 EBS 快照进行更新。将 EBS 卷视为硬盘 - 如果您的软件有更新，您将不会更改硬盘。

由于您的代码在版本控制系统中，因此代码更新应该非常简单，例如登录到您的（多个）服务器并执行`git pull`or `svn update`。这应该从您的服务器获取最新的代码文件。根据应用程序的类型，您之后必须执行一些其他任务，运行构建脚本，清空缓存等。

问题是这种设置不能很好地扩展。如果您有*n 个*服务器，则必须登录并执行此命令*n*次。因此，研究一些可以一步使用的远程管理工具是有意义的。使用许多这些工具，您还可以获得完整的配置管理堆栈：您为每个服务器定义一组配方或任务（如已安装的包、配置文件、获取最新代码、必要的构建步骤），以及何时启动一个新服务器，它会获取其配置的最新版本并自行安装。

流行的配置管理工具包括[Puppet](http://puppetlabs.com/)或[Salt](http://saltstack.org/)。这两个工具都包含远程执行，这应该使您的代码库发布任务更容易，您只需在主服务器上触发一个命令，它会自动在其所有仆从/从服务器上执行此任务。

# android - Android：创建图片库

> ID：13853549
> 
> 赞同：2
> 
> 时间：2012-12-13T05:30:04.390
> 
> 标签：android, gallery

对于我目前正在创建的 Android 应用程序，我想要一个简单的图片库。理想情况下，它将是带有水平滚动条的单行图像（很像这样：[http](http://www.appszoom.com/android_applications/multimedia/3d-gallery_hbij.html) ://www.appszoom.com/android_applications/multimedia/3d-gallery_hbij.html ，尽管不需要 3D 效果）。

我知道 Android API 曾经有一个`Gallery`完美的类，但现在它已被弃用。现在我已经设法使用`LinearLayout`和创建了一个简单`HorizontalScrollView`的画廊

XML:

```
 <HorizontalScrollView
         android:id="@+id/hor_scroll_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <LinearLayout
           android:id="@+id/gallery"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:orientation="horizontal" />
    </HorizontalScrollView> 
```

从美学上讲，这是完美的；看看我想要的样子（我没有看到发布我的代码的重要性，但我很乐意应要求提供）。问题在于功能。用户能够从图库列表中选择图像很重要，但使用我目前的方法似乎是不可能的。我读过 a`ViewPager`也可以使用，但据我了解，这似乎也无法从中选择单个图像。`GridView`将是我的下一个选择，因为可以实现，`OnItemClickListener`但是这肯定会在用户拍照时产生动态添加列的问题。

所以我的问题很简单：如何实现选择单个图像的功能？

最后一点：我对 Android 编程相当陌生，但对 Java 非常精通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:06:04.557

最后，我考虑将 a`ListView`用于我的图片库，因为它是`AdapterView`允许使用`setOnItemClickListener`. 然而，这个问题是`ListView`唯一提供了一个垂直列表，我需要一个水平列表。因此，经过一番挖掘，我设法找到了一个创建了 a 的人`HorizontalListView`，它是完美的。你可以在[这里找到](http://www.dev-smart.com/archives/34)

# android - 致命异常：AsyncTask #1 SkImageDecoder::Factory 返回 null

> ID：13853566
> 
> 赞同：1
> 
> 时间：2012-12-13T05:31:18.067
> 
> 标签：android

当我运行此代码时，有时会出现错误，但并非总是如此。我看不到我的错误。

调用代码：

```
private void processPhotoUpdate(File tempFile)
        {
            Log.i(TAG, "Made it into Process Photo Update" );
            ProcessProfilePhotoTask task = new ProcessProfilePhotoTask()
                {
                    @Override
                    protected void onPostExecute(Bitmap result)
                        {
                            Log.i(TAG, "Not Null");
                            if (result != null){                    
                            Log.i(TAG, "on Post Execute");
                            android.widget.LinearLayout.LayoutParams params = new android.widget.LinearLayout.LayoutParams(result.getWidth(), result.getHeight());
                            params.gravity = Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL;
                            photo.setLayoutParams(params);
                            photo.setImageBitmap(result);
                            }
                        }
                };                  
                    task.execute(tempFile);
        } 
```

我打电话的课程是：

```
public class ProcessProfilePhotoTask extends AsyncTask<File, ProcessProfilePhotoTask.ProcessingState, Bitmap> {

public enum ProcessingState {
    STARTING,
    PROCESSING_LARGE,
    FINISHED
}

public static final String TAG = "ProcessProfilePhotoTask";

public ProcessProfilePhotoTask() {
    super();
}

@Override
protected Bitmap doInBackground(File... files) {
    ProcessingState[] s = new ProcessingState[1];
    //BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    if (files.length != 1) {
        throw new IllegalArgumentException("We expect to process only one file");
    }
    try {
        s[0] = ProcessingState.PROCESSING_LARGE;
        publishProgress(s);

        Bitmap largePhoto = BitmapFactory.decodeStream(new FileInputStream(files[0]));
        int height = largePhoto.getHeight();
        int width = largePhoto.getWidth();
        int density = largePhoto.getDensity();
        Log.d(TAG,"large image processing "+ height+"x"+width+"den="+density+"type=");

        return largePhoto;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        return null;
    }
}
} 
```

LogCat 是。

```
12-13 15:41:02.064: D/skia(14099): --- SkImageDecoder::Factory returned null
12-13 15:41:02.064: W/dalvikvm(14099): threadid=9: thread exiting with uncaught             exception (group=0x400259f8)
12-13 15:41:02.074: E/AndroidRuntime(14099): FATAL EXCEPTION: AsyncTask #1
12-13 15:41:02.074: E/AndroidRuntime(14099): java.lang.RuntimeException: An error     occured while executing doInBackground()
12-13 15:41:02.074: E/AndroidRuntime(14099):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at     java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.lang.Thread.run(Thread.java:1102)
12-13 15:41:02.074: E/AndroidRuntime(14099): Caused by: java.lang.NullPointerException
12-13 15:41:02.074: E/AndroidRuntime(14099):    at com.androidworks.ProcessProfilePhotoTask.doInBackground(ProcessProfilePhotoTask.java:57)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at com.androidworks.ProcessProfilePhotoTask.doInBackground(ProcessProfilePhotoTask.java:1)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-13 15:41:02.074: E/AndroidRuntime(14099):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-13 15:41:02.074: E/AndroidRuntime(14099):    ... 4 more
12-13 15:41:04.014: I/Process(14099): Sending signal. PID: 14099 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:56:41.780

通过在 doInBackgroud() 中添加此条件来尝试此操作....

```
if(null != largePhoto)
{
    // your code here
}
else
{
   // error code here
} 
```

# mysql - php插入语句错误

> ID：13853567
> 
> 赞同：-2
> 
> 时间：2012-12-13T05:31:17.143
> 
> 标签：mysql, php

我在 mysql 中有一个查询，只是为了插入一些查询的数据

```
 $insert_query_pur  = "INSERT INTO `dbname`.`tblname` (`USER_NAME`,`PURCHASE_TYPE`,`PURCHASE_KEY`, `SUBSCRIPTION_ID`,`PURCHASE_DATE`,`NO_OF_ISSUE`,`MAGAZINE_ID`,`AppsCode`,`PROCESS_STATUS`,`User_price`,`Publisher_price`, `Publisher_price_inr`) VALUES ('$USER_NAME','$PURCHASE_TYPE','$PURCHASE_KEY','$SUBSCRIPTION_ID','$PURCHASE_DATE','$NO_OF_ISSUE','$MAGAZINE_ID','$AppsCode','$PROCESS_STATUS','$User_price','$Publisher_price','$Publisher_price_inr')"; 
```

但是当我执行此查询时出现错误

> 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 685 行的 /var/www/thewinkstore.com/magsonwink/modules/admin/support/classes/support_manage.class.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

我找不到问题所在。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:46:33.580

不要将所有内容放在一条线上，在这种情况下，您可能会过快地失去概述。

建议您对此类插入查询使用准备好的语句，这样您就不需要自己构建 SQL 字符串。这在 PHP 手册中有说明。

对于临时改进，您可能希望首先将字符串分布在多行中：

```
$insert_query_pur  = "
INSERT INTO `dbname`.`tblname` 
    (
        `USER_NAME`,        `PURCHASE_TYPE`,   `PURCHASE_KEY`, 
        `SUBSCRIPTION_ID`,  `PURCHASE_DATE`,   `NO_OF_ISSUE`,
        `MAGAZINE_ID`,      `AppsCode`,        `PROCESS_STATUS`,
        `User_price`,       `Publisher_price`, `Publisher_price_inr`
    ) 
    VALUES 
    (
        '$USER_NAME',       '$PURCHASE_TYPE',   '$PURCHASE_KEY',
        '$SUBSCRIPTION_ID', '$PURCHASE_DATE',   '$NO_OF_ISSUE',
        '$MAGAZINE_ID',     '$AppsCode',        '$PROCESS_STATUS',
        '$User_price',      '$Publisher_price', '$Publisher_price_inr'
    )
"; 
```

空格和缩进是你的朋友。我希望这会有所帮助，即使它不能解决您的具体问题。

# php - 数据未插入数据库

> ID：13853568
> 
> 赞同：-2
> 
> 时间：2012-12-13T05:31:28.857
> 
> 标签：php, javascript, mysql

我有一个带有表单的模态窗口，它应该将字段数据提交到数据库，而不是关闭模态寡妇，然后在淡出模态窗口之前显示“您已被回复”。

2件事：

1）提交时，模式窗口关闭？！它应该保持打开状态 2）数据没有插入到数据库中。

**模态窗口 HTML**

```
<form id="rsvp-yes" action="#" method="post" name="rsvp-yes">
<label for="email">Your E-mail</label>
    <input id="email" class="txt" type="email" name="email" />
    <label for="location">Choose your location</label>
    <select name="city" id="city">
    <option value="None Selected" selected>Select</option>
    <option value="Perth">Perth</option>
    <option value="Brisbane">Brisbane</option>
    <option value="Sydney">Sydney</option>
    <option value="Melbourne">Melbourne</option>
    </select>

    <button id="rsvp">RSVP</button></form></div> 
```

**JAVASCRIPT**

```
$(document).ready(function() {
        $(".modalbox").fancybox();
        $("#rsvp").submit(function() { return false; });

        function validateEmail(email) { 
        var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return reg.test(email);
    }

        $("#rsvp").on("click", function(){
            var emailval  = $("#email").val();
            var city      = $("#city").val();
            var mailvalid = validateEmail(emailval);

            if(mailvalid == false) {
                $("#email").addClass("error");
            }
            else if(mailvalid == true){
                $("#email").removeClass("error");
            }

            if(mailvalid == true) {
                //&& msglen >= 4
                // if both validate we attempt to send the e-mail
                // first we hide the submit btn so the user doesnt click twice
                $("#rsvp").replaceWith("<em>RSVP'ing you...</em>");

                $.ajax({
                    type: 'POST',
                    url: 'rsvp-yes.php',
                    data: $("#rsvp-yes").serialize(),
                    success: function(data) {
                        if(data == "true") {
                            $("#rsvp-yes").fadeOut("fast", function(){
                                $(this).before("<p><strong>You have been RSVP'd</strong></p>");
                                setTimeout("$.fancybox.close()", 1000);
                            });
                        }
                    }
                }); 
```

**PHP**

```
<?php
$email = $_POST['email'];
$city = $_POST['city'];

mysql_connect(myhost,myuser,mypass) or die("Could not connect: " . 
mysql_error());
mysql_query("USE mydbname");

mysql_query("INSERT INTO rsvp-yes (ID, email, city)
VALUES ('NULL', '".$email"', '".$city"')");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:12:26.113

我认为您的**ID**是数据库中的自动增量。所以而不是

```
mysql_query("INSERT INTO rsvp-yes (ID, email, city) VALUES ('NULL', '".$email"', '".$city"')"); 
```

利用

```
mysql_query("INSERT INTO rsvp-yes (ID, email, city) VALUES ('', '".$email"', '".$city"')"); 
```

删除 NULL

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T05:33:26.120

您应该使用`mysql_real_escape_string()`函数来防止 SQL 注入。它还可以防止由于引号或双引号而导致插入数据时出错。

```
$email = $_POST['email'];
$email=mysql_real_escape_string($email);

$city = $_POST['city'];
$city=mysql_real_escape_string($city); 
```

希望您的`ID`列是**主键**，也是**自动递增**的字段。所以你不应该包含`ID`在你的 sql 语句中。

```
mysql_query("INSERT INTO rsvp-yes (email, city)
VALUES ('$email', '$city')"); 
```

# sql - 选择分组中的第一行或随机行

> ID：13853569
> 
> 赞同：4
> 
> 时间：2012-12-13T05:31:29.750
> 
> 标签：sql, postgresql

我使用 PostgreSQL 9.1（我们的托管平台升级后立即使用 9.2）进行此查询：

```
SELECT
    media_files.album,
    media_files.artist,
    ARRAY_AGG (media_files. ID) AS media_file_ids
FROM
    media_files
INNER JOIN playlist_media_files ON media_files.id = playlist_media_files.media_file_id
WHERE
    playlist_media_files.playlist_id = 1
GROUP BY
    media_files.album,
    media_files.artist
ORDER BY
    media_files.album ASC 
```

它工作正常，目标是提取专辑/艺术家组合，并在结果集中具有该特定组合的媒体文件 ID 数组。

问题是我在媒体文件中有另一列，即`artwork`.

`artwork`对于每个媒体文件（即使在同一个专辑中）都是唯一的，但在结果集中我只需要返回该集中的第一个。

因此，对于有 10 个媒体文件的专辑，我也有 10 个相应的艺术品，但我只想返回第一个（或为该收藏随机挑选的一个）。

这可能只与 SQL/窗口函数（first_value over..）有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:41:01.293

是的，这是可能的。首先，让我们通过添加别名和显式列限定符来调整您的查询，这样就可以清楚地知道什么来自哪里 - 假设我猜对了，因为我无法确定没有表定义：

```
SELECT
    mf.album,
    mf.artist,
    ARRAY_AGG (mf.id) AS media_file_ids
FROM
    "media_files" mf
INNER JOIN "playlist_media_files" pmf ON mf.id = pmf.media_file_id
WHERE
    pmf.playlist_id = 1
GROUP BY
    mf.album,
    mf.artist
ORDER BY
    mf.album ASC 
```

现在您可以在`SELECT`列表中使用子查询，也可以使用[`DISTINCT ON`](http://www.postgresql.org/docs/9.2/static/sql-select.html#SQL-DISTINCT)，尽管看起来任何基于的解决方案`DISTINCT ON`都会如此复杂以至于不值得。

你真正想要的是一个`pick_arbitrary_value_agg`聚合之类的东西，它只选择它看到的第一个值并将其余的丢弃。没有这样的聚合，也不值得为这项工作实施它。您可以使用`min(artwork)`or`max(artwork)`并且您可能会发现这实际上比后来的解决方案执行得更好。

要使用子查询，请保持`ORDER BY`原样并在列表中添加以下内容作为额外列`SELECT`：

```
(SELECT mf2.artwork 
 FROM media_files mf2 
 WHERE mf2.artist = mf.artist
   AND mf2.album = mf.album
 LIMIT 1) AS picked_artwork 
```

`ORDER BY random()`您可以通过在上述之前添加来以性能为代价随机化选定的艺术品`LIMIT 1`。

或者，这是一种快速而肮脏的方式来实现内联随机行的选择：

```
(array_agg(artwork))[width_bucket(random(),0,1,count(artwork)::integer)] 
```

由于没有样本数据，我无法测试这些修改。让我知道是否有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T06:17:21.220

### “第一”选择

使用会不会更简单/更便宜`min()`：

```
SELECT m.album
      ,m.artist
      ,array_agg(m.id) AS media_file_ids
      ,min(m.artwork)  AS artwork
FROM   playlist_media_files p
JOIN   media_files          m ON m.id = p.media_file_id
WHERE  p.playlist_id = 1
GROUP  BY m.album, m.artist
ORDER  BY m.album, m.artist; 
```

### 任意/随机选择

如果您正在寻找*随机*选择，[@Craig](https://stackoverflow.com/a/13853656/939860)已经提供了一个真正随机选择的解决方案。

您还可以使用[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)来避免对（可能很大的）基表进行额外的扫描，然后在较小的结果集上运行两个单独的（便宜的）子查询。

对于**任意**选择 - 不是真正随机的，结果将取决于表中行的物理顺序和实现细节：

```
WITH x AS (
   SELECT m.album, m.artist, m.id, m.artwork
   FROM   playlist_media_files p
   JOIN   media_files          m ON m.id = p.media_file_id
   )
SELECT a.album, a.artist, a.media_file_ids, b.artwork
FROM  (
   SELECT album, artist, array_agg(id) AS media_file_ids
   FROM   x
   ) a
JOIN  (
   SELECT DISTINCT ON (1,2)  album, artist, artwork
   FROM x
   ) b USING (album, artist); 
```

对于**真正随机**的结果，您可以将`ORDER BY .. random()`这样的添加到子查询`b`：

```
JOIN  (
   SELECT DISTINCT ON (1, 2)  album, artist, artwork
   FROM   x
   ORDER  BY 1, 2, random()
   ) b USING (album, artist); 
```

# php - 重新计算 MySQL 表中的值

> ID：13853571
> 
> 赞同：0
> 
> 时间：2012-12-13T05:31:39.987
> 
> 标签：php, mysql

我有一个存储`points`在表格中的 Web 应用程序，表格中的总分`user`如下：

```
User Table
user_id | total_points

Points Table
id | date | user_id | points 
```

每次用户获得积分时，都会发生以下步骤：

```
1\. Enter points value to points table
2\. Calculate SUM of the points for that user
3\. Update the user table with the new SUM of points (total_points) 
```

用户表中的值可能与点表中的总和不同步，我希望能够偶尔重新计算每个用户的所有点的总和（例如每月一次）。我可以编写一个 PHP 脚本，它可以遍历用户表中的每个用户并找到该用户的总和并更新 total_points，但这将是很多 SQL 查询。

有没有更好（有效）的方法来做我想做的事情？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:01:06.493

您必须为此使用触发器，以使用户的总分与`user_points`表格同步。就像是：

```
Create Trigger UpdateUserTotalPoints AFTER INSERT ON points
FOR EACH ROW Begin
    UPDATE users u
    INNER JOIN 
    (
       SELECT user_id, SUM(points) totalPoints
       FROM points
      GROUP BY user_id
    ) p ON u.user_id = p.user_id
   SET u.total_points = p.totalPoints;
END; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b253c/1)

**请注意：**正如@FireLizzard 所指出的，如果第二个表中的这些记录经常更新或删除，则您还必须有其他`AFTER UPDATE`和`AFTER DELETE`触发器，以保持两个表同步。在这种情况下，@FireLizzard 的解决方案在这种情况下会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:43:41.500

执行此操作的更有效方法如下：

```
User Table
user_id

Points Table
id | date | user_id | points

Total Points View
user_id | total_points 
```

视图实际上是伪装成表的选择语句。选择语句将是：`SELECT "user_id", SUM("points") AS "total_points" FROM "Points Table" GROUP BY "user_id"`。要创建视图，请执行`CREATE VIEW "Total Points View" AS <SELECT STATEMENT>`where `SELECT STATEMENT`is the previous select 语句。

创建视图后，您可以像对待任何常规表一样对待它。

PS：除非您的表名实际上包含空格，否则我不知道引号是必要的，但是自从我使用 MySQL 以来已经有一段时间了，所以我不记得它的特质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:46:01.783

如果你想要每月一次，你不能只处理 MySQL。您在这里有太多“逻辑”代码，并且在数据库中放入太多逻辑不是正确的方法。Karan Punamiya 的触发器可能很好，但它会在点表中的每个插入上更新 user_table，这不是您想要的。

对于您希望能够删除点的事实，只需在点中添加 bsarv 新的否定行，不要删除任何行（它会破坏历史记录）。

如果您真的需要定期执行此操作，您可以运行一个 cron 脚本来执行此操作，甚至调用您的 PHP 脚本；）

# javascript - Javascript OOP 和继承技术

> ID：13853577
> 
> 赞同：0
> 
> 时间：2012-12-13T05:32:07.767
> 
> 标签：javascript, oop

> **可能重复：**
> [在 JavaScript 原型函数中保留对“this”的引用](https://stackoverflow.com/questions/2025789/preserving-a-reference-to-this-in-javascript-prototype-functions)

我英语说的不好。请理解

当我的朋友有javascript oop实现时

```
function Item (a, b, c) {
    var _a = a, _b = b, _c = c;

    return {
        init: function () {
            ...
        },
        start: function () {
            ....
        }
    }
}
var item = new Item();
item.init();
item.start(); 
```

但我想知道以下内容。

```
function Item (a, b, c) {
    this.a = a, this.b = b, this.c = c;
}

Item.prototype.init = function () {...}
Item.prototype.start = function () {...}
var item = new Item();
item.init();
item.start(); 
```

你觉得你是哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:14:35.033

他们有一些不同。在第一种情况下：

```
function Item (a, b, c) {
    var _a = a, _b = b, _c = c; 
```

不需要第二行，`a`, `b`，`c`已经是闭包中的局部变量，因此可以模拟私有变量。可以写成：

```
function Item (_a, _b, _c) { 
```

正如其他人指出的那样，它应该不带`new`.

在第二：

```
function Item (a, b, c) {
    this.a = a, this.b = b, this.c = c; 
```

新对象将具有 public `a`、`b`、`c`属性。是否需要私有成员（很少见）或需要继承（通常不需要），这取决于您的要求。通常一个单例就足够了，所以一个普通的对象就可以了，你可以使用第一个模式。

[这只是由Richard Cornford](https://groups.google.com/forum/?fromgroups=#!msg/comp.lang.javascript/eTzWVa1W_pE/N9lnvRG9WJ8J)[*等人*](https://groups.google.com/forum/?fromgroups=#!msg/comp.lang.javascript/eTzWVa1W_pE/N9lnvRG9WJ8J)开发并由 Douglas Crockford 推广的[模块模式](http://snipplr.com/view/12749/)的一小步。[](https://groups.google.com/forum/?fromgroups=#!msg/comp.lang.javascript/eTzWVa1W_pE/N9lnvRG9WJ8J)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:46:16.687

**参数**

你的朋友们：

为什么将参数重新分配给“_”版本？这些参数用于我所知道的与本地变量相同的所有意图和目的。

你的：

为什么你觉得有必要公开这些参数？如果这些值仅与对象实例有关，则它们应保留为本地变量。只要对象存在并且不必是属性，它们就会存在。

**原型**

为什么在这里使用原型？有很多很好的理由，但我`this.method`首先使用它，因为它可以访问在构造函数中定义的本地变量。原型方法不能。

**新函数 (){} 与 {}**

我主要为纯数据或简单的结构类型对象保留 {} 对象，这些对象更多是实用方法的集合，而不是正确的 OOP 构造。但是，一旦我对需要维护状态的东西进行建模，我通常会使用函数构造函数：

```
var sleepyInstance = new function(){
    var activeState = true;

    this.sleep = function(){
        activeState = false;
    }

    this.doSomething = function(){
        if(activeState){ alert ('did something!'); }
        else { alert('ZZZZZzzz'); }
    }

} 
```

Prototype 更适合用于对象工厂、使用“this”覆盖默认原型方法以及继承。如果您不确定是否需要公开某个属性，请将其设为 var。如果您不确定为什么要使用原型，只需使用“this”将该方法直接附加到实例。原型通常最适合以不同的方式构建类似的对象。*

# regex - 以@开头并包含一个制表符的计数行的正则表达式

> ID：13853581
> 
> 赞同：2
> 
> 时间：2012-12-13T05:32:52.827
> 
> 标签：regex

我正在尝试找到一个正则表达式来查找所有以 @ 开头并在某个随机位置有一个制表符 '\t' 的行。

例如：

@这是示例行（一个制表符字符），它在中间某处有制表符。

我尝试用谷歌搜索，但现在似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:37:16.533

使用这个正则表达式：

```
^@.*\t 
```

并启用多行选项，即：`(?m)^@.*\t`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:34:41.353

你想要这样的东西： -

```
"^@[^\t]*\t[^\t]*$"  // If there is only 1 tab character 
```

或者

```
"^@.*\t.*$"   // If there can be more than one tab characters. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:36:27.940

看看这个表达式是否有效：

```
^@.*\t.*$ 
```

# html - div 仅在 Firefox 中不可见？

> ID：13853582
> 
> 赞同：0
> 
> 时间：2012-12-13T05:33:00.527
> 
> 标签：html, css, firefox

我的错误 div 有以下 css：

```
.side_error {
width: 325px;
position: absolute;
top: 0;
left: -335px;
padding: 8px 0 0 0;
text-align: right;
color: #FF0000;
display: block;
} 
```

以及我的表 td 的以下 css：

```
.main_form td {
padding: 5px 0 5px 0;
position: relative;
} 
```

还有我的 HTML 结构：

```
<table class="main_form" align="center">
<tbody>
<tr><td class="title_area"><h2>Create an account</h2><span>(or <a href="#">Sign In</a>)</span></td></tr>
<tr><td><div class="side_error">please enter your full name &gt;&gt;</div><input type="text" name="fullname" placeholder="Full Name" class="input"></td></tr>
<tr><td><input type="text" name="email" placeholder="Email" class="input"></td></tr>
<tr><td><input type="password" name="pass1" placeholder="Password" class="input"></td></tr>
<tr><td><input type="password" name="pass2" placeholder="Repeat Password" class="input"></td></tr>
<tr><td class="submit_area"><span><input type="checkbox" name="terms" value="yes" id="rm"><label for="rm"> I agree to <a href="#">**** Terms</a>.</label></span><input type="submit" name="submit" class="submit" value="Create Account"></td></tr>
</tbody>
</table> 
```

带有类的 div`side_error`似乎完全按照我想要的方式出现在每个浏览器中，但在 Firefox（版本 17.0.1）中它根本不显示，即使当我使用 Firebug 时，悬停 html 代码时 div 也不会着色，它就像它根本不存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:51:09.403

重新组织你的CSS，看看这是否有帮助-

CSS-

```
.side_error 
{
  width: 325px;
  position: relative;
  top: 20px;
  left: -327px;
  padding: 8px 0 0 0;
  text-align: right;
  color: #FF0000;
  display: inline-block;
}
.main_form td 
{
   position:relative;
   padding: 5px 0 5px 0;
}
table
{
   width:330px;
}​ 
```

查看工作中的 Fiddle- [**DEMO**](http://jsfiddle.net/YSWQP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:45:44.860

删除`left: -335px;`并`position: absolute;`尝试使用`right :10px;`

或在内容中添加额外`div`内容`td`并分配类：

```
<tr>
  <td >
    <div class="title_area">
      <h2>
       Create an account</h2><span>(or <a href="#">Sign In</a>)</span></div>
  </td>
</tr> 
```

# php - 在大写字母中显示第一个字母并忽略嵌套数组中的重复值？

> ID：13853583
> 
> 赞同：-1
> 
> 时间：2012-12-13T05:32:59.847
> 
> 标签：php

我试图在数组中显示值。第一个字母应该用大写字母打印，并且应该跳过重复的值。这是我的代码。

```
$user =  array(array("name"=>"prusoth","language"=>array("english","tamil")),array("name"=>"venkat","    language"=>array("english","french")));
$names = array_keys($user);
$lang  = array_values($user);
foreach($lang as $value)
{
print_r (array_map('ucfirst', $value));
echo "<br>"."<br>";
print_r (array_unique($value));
} 
```

上面的代码输出是这样的。

```
Warning: ucfirst() expects parameter 1 to be string, array given in /home/aspire/public_html/Array.php on line 8
Array ( [name] => Prusoth [language] => ) 

Array ( [name] => prusoth [language] => Array ( [0] => english [1] => tamil ) ) 
Warning: ucfirst() expects parameter 1 to be string, array given in /home/aspire/public_html/Array.php on line 8
Array ( [name] => Venkat [language] => ) 

Array ( [name] => venkat [language] => Array ( [0] => english [1] => french ) ) 
```

预期输出：

```
name = (Prusoth,Venkat)
Language = (english,tamil,french) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:52:03.210

> 我认为你需要这样的输出。试试这个..

```
$user =  array(
array("name"=>"prusoth","language"=>array("english","tamil")),
array("name"=>"venkat","language"=>array("english","french")));
$lang  = array_values($user);
$username=array();
$langname=array();
$arrUser=array();
foreach($lang as $value)
{
    foreach($value as $val)
    {
        if(!empty($val))
        {
            if(!is_array($val))
            {
                $username[]=ucfirst($val);
            }
            else
            {
                foreach($val as $langs)
                {
                    $langname[]=$langs; 
                }
            }
            $arrUser['name']=array_unique($username);
            $arrUser['language']=array_unique($langname);
        }
    }
}
print_r($arrUser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:47:58.503

尝试这个 ;）

```
<?php

$user =  array(
    array(
        "name"=>"prusoth",
        "language"=>array("english","tamil")
    ),
    array(
        "name"=>"venkat",
        "language"=>array("english","french")
    )
);

$result = array(
    'name' => array(),
    'language' => array()
);

foreach($user as $value){
    $result['name'][ $value['name'] ] = ucfirst($value['name']);

    $result['language'] = array_merge($result['language'], array_combine($value['language'], $value['language']));
}

print_r($result);
echo PHP_EOL;

echo 'Name = ('.implode(',', $result['name']).')';

echo PHP_EOL;

echo 'Language = ('.implode(',', $result['language']).')'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:44:51.803

```
Try This :)
$resultarray=array();
$user = array(array("name"=>"prusoth","language"=>array("english","tamil")),array("name"=>"venkat","language"=>array("english","french")));
foreach($user as $MainArray)
{
    $Lang_array[]=$MainArray['language'];
    $Name_array[]=$MainArray['name'];

}
foreach($Lang_array as $language)
{
    foreach($language as $values)
    {
      $languages[]=$values;
    }

}
$resultarray['name']=array_map('ucfirst', $Name_array);
$resultarray['language']=array_unique($languages);
die(print_r($resultarray)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T06:54:39.470

```
$user =  array(array("name"=>"prusoth","language"=>array("english","tamil")),array("name"=>"venkat","language"=>array("english","french")));

for ($i = 0; $i < count($user); $i++){

foreach ($user[$i] as $key => $value){

if (!is_array($user[$i][$key])) $name[] .= ucfirst(strtolower($user[$i][$key]))." ";

else foreach ($user[$i][$key] as $val){ $array[] = $val;}}}

echo 'name = ('.implode(',', $name).')<br>';

$language = array_unique($array);

echo 'Language = ('.implode(',', $language).')'; 
```

# nlp - 英语动词列表及其时态、各种形式等

> ID：13853584
> 
> 赞同：6
> 
> 时间：2012-12-13T05:33:06.020
> 
> 标签：nlp

是否有一个巨大的 CSV/XML 或任何包含英语动词列表及其变体的文件（例如，sell -> sold、sale、selling、seller、seller）？

我想这对 NLP 系统很有用，但似乎任何地方都没有列表，或者这可能是我糟糕的谷歌搜索技能。有没有人有其他线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:45:57.243

考虑[Catvar](http://clipdemos.umiacs.umd.edu/catvar/)：

> 类别变体数据库（或 Catvar）是未变形词（词素）及其类别（即词性）变体的集群的数据库。例如，饥饿（V）、饥饿（N）、饥饿（AJ）和饥饿（N）这些词是描述饥饿状态的一些基本概念的不同英文变体。另一个例子是开发集群：（开发（V），开发（N），开发（AJ），开发（N），开发（AJ），开发（N））。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T05:36:28.517

我不确定您在寻找什么，但我认为`WordNet`- 一个英语词汇数据库 - 将是一个不错的起点。[在http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)阅读更多内容

我提到你的链接说

> WordNet 的结构使其成为计算语言学和自然语言处理的有用工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:15:31.460

考虑获取维基词典的转储并从中提取此信息。
[http://en.wiktionary.org/wiki/sell](http://en.wiktionary.org/wiki/sell)提到了这个词的许多形式（sells、selling、sell）。

如果您的目标只是将单词标准化为某种基本规范形式，请考虑使用词形还原器或词干分析器。尝试使用[morpha](http://www.informatics.sussex.ac.uk/research/groups/nlp/carroll/morph.html)，这是一个非常好的英语词形还原器。

# ruby-on-rails - 如何在 rspec 中测试注册验证？（rails教程第7章练习）

> ID：13853605
> 
> 赞同：0
> 
> 时间：2012-12-13T05:35:28.460
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我认为这既是一个编程实践问题，也是一个技术问题。

我正在学习 Ruby on Rails 教程，并且正在学习[第 7 章练习](http://ruby.railstutorial.org/chapters/sign-up#sec-signup_exercises)，问题 2。这个问题要求您编写测试来验证无​​效用户的错误消息是否出现在重新加载的注册页面上（例如，空白密码、无效电子邮件地址）。

我有一些运行良好的代码，但我觉得我实际上并没有测试任何东西。我只是测试了当我手动将空白用户输入到注册页面时出现的错误消息的存在。不出所料，测试通过了——我只是将错误消息复制并粘贴到测试中！

我的相关部分`user_pages_spec.rb`是：

```
describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
  describe "after submission" do
    before { click_button submit }
    it { should have_selector('title',text: 'Sign up') }
    it { should have_content('error') } 
    it { should have_content('Password digest can\'t be blank') }
    it { should have_content('Name can\'t be blank') }
    it { should have_content('Email can\'t be blank') }
    it { should have_content('Email is invalid') }
    it { should have_content('Password can\'t be blank') }
    it { should have_content('Password is too short (minimum is 6 characters)') }
    it { should have_content('Password confirmation can\'t be blank') }
  end
end 
```

**这是正确的方法吗？我不应该让 Ruby 告诉我错误消息/翻译是什么，并测试它们吗？如果我更改其中一个验证条件（例如密码长度）会发生什么情况？** 同样，当我修复有关密码摘要的错误消息时，我是否必须更改我的测试文件？

编辑：**如果我不知道确切的错误字符串是什么？**Ruby 不应该告诉测试错误消息是什么吗？**我应该为此使用'have(x).errors_on'吗？**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:08:53.863

您总是可以将测试扩展到您将测试用户是否要插入用户名而不是密码、检查结果等的地方。不过我认为这将是矫枉过正。除此之外，我认为你很好。

如果要更改错误消息，则必须更改测试。但是让我们想想 TDD 是如何工作的。您编写测试，然后编写代码，然后在需要时进行重构。因此，理想情况下，您已经知道您的验证条件是什么。如果您想稍后更改代码，那么您将更改您的测试，然后是您的代码。

来自 Ruby on Rails 测试指南：

```
Ideally, you would like to include a test for everything which could possibly break. It’s 
a good practice to have at least one test for each of your validations and at least one 
test for every method in your model. 
```

我们不仅可以将其扩展到模型，还可以扩展到您的控制器、路由等。换句话说，测试您的代码在做什么。例如，如果您将其设置为用户在登录时看到的 Flash 消息，则进行测试以确保用户看到的是该 Flash 消息。如果用户做错了什么并且应该看到不同的 flash 消息，那么测试以确保他们得到不同的 flash 消息。

在您完成 Hartl 的教程后，我会考虑查看[应该](https://github.com/thoughtbot/shoulda-matchers)匹配器。

这是关于 rspec 最佳实践的简短[自述文件。](https://github.com/bbatsov/rails-style-guide#rspec)

最后，Wolfram Arnold 的六部分[教程](https://www.youtube.com/watch?v=ra8Q0M3DJYk)系列有助于了解要测试的内容，尽管它有点过时了。

编辑：您必须在测试中写入 Rails 预先编写的错误消息，除非您当然编写了自定义消息。[幸运的是，您可以在Ruby 国际化](https://github.com/svenfuchs/rails-i18n/blob/master/rails/rails3/active_model.yml)或简称 Ruby l18n 中找到预先编写的错误。以下是预期消息的列表：

```
 inclusion: "is not included in the list"
  exclusion: "is reserved"
  invalid: "is invalid"
  confirmation: "doesn't match confirmation"
  accepted: "must be accepted"
  empty: "can't be empty"
  blank: "can't be blank"
  too_long: "is too long (maximum is %{count} characters)"
  too_short: "is too short (minimum is %{count} characters)"
  wrong_length: "is the wrong length (should be %{count} characters)"
  not_a_number: "is not a number"
  not_an_integer: "must be an integer"
  greater_than: "must be greater than %{count}"
  greater_than_or_equal_to: "must be greater than or equal to %{count}"
  equal_to: "must be equal to %{count}"
  less_than: "must be less than %{count}"
  less_than_or_equal_to: "must be less than or equal to %{count}"
  odd: "must be odd"
  even: "must be even" 
```

将您要验证的属性插入到上述错误消息的开头，然后将其插入到您的测试中，瞧，这就是您应该从 Rails 获得的错误消息。

最后，`have(x).errors_on`这是一种测试 Flash 消息的方法。Shoulda matchers 也有一个专门用于 Flash 消息[测试](https://github.com/thoughtbot/shoulda-matchers/blob/master/spec/shoulda/action_controller/set_the_flash_matcher_spec.rb)的相关页面。我认为任何额外的东西都将是矫枉过正。

# iphone - 通用项目：如何在 iPhone 中进行横向启动和在 iPad 中进行纵向启动

> ID：13853617
> 
> 赞同：2
> 
> 时间：2012-12-13T05:36:39.477
> 
> 标签：iphone, ipad, landscape, portrait, ios-universal-app

我有一个通用项目，并且希望从一开始就为 iPhone 保持风景，为 Pad 保持肖像。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:49:46.153

那是不可能的。iPhone 应用程序始终必须以纵向启动。您看到的任何仅横向显示的游戏仍开始显示纵向默认图像，然后根视图控制器可以仅横向显示。

在 iPad 上，您可以将应用程序方向限制为横向，并使其以横向启动。

iPhone 限制由 Apple 强制执行，他们不会批准将自身限制为横向启动的 iPhone 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:50:43.030

如果设备已经处于横向位置，它将以横向开始，但是如果您希望程序始终以横向位置工作并且从不翻转到纵向，则必须在您创建的每个类中将方向设置为横向：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

return (interfaceOrientation == UIInterfaceOrientationLandscape || interfaceOrientation ==       UIInterfaceOrientationPortraitUpsideDown);
    } 
```

# tableview - JavaFX TableView 一列中的多个组件

> ID：13853621
> 
> 赞同：4
> 
> 时间：2012-12-13T05:36:50.483
> 
> 标签：tableview, javafx-2, javafx, tablecell, tablecolumn

我正在使用 JavaFx 2.2。我有一个问题，我无法在 TableView 列中放置不同的组件。例如我有两列

1) 回答

2) 答案类型

如果 AnswerType 包含“Multiple Choice”，则 Answer Column 中的相应单元格应显示 ComboBox，否则应显示 TextField。

我在下面有一个代码示例，但它显示 ComboBox 或 TextField 但不是同时显示在同一列的不同单元格中。

```
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
import javafx.util.Callback;
import javafx.scene.control.cell.ComboBoxTableCell;

public class TableCellWithMultipleComponent extends Application {

     @SuppressWarnings("rawtypes")
TableColumn answerTypeCol; 
@SuppressWarnings("rawtypes")
TableColumn answerCol; 
ObservableList<String> namesChoiceList;

public static void main(String[] args) {
    launch(args);
}

@SuppressWarnings({ "rawtypes", "unchecked" })
@Override
public void start(final Stage primaryStage) {
    primaryStage.setTitle("Table Cell With Multiple Components");

     TableView<Person> table = new TableView<Person>();
     table.setEditable(true);
      final ObservableList<Person> data = 
                FXCollections.observableArrayList(
                    new Person("A", "Multiple Choice"),
                    new Person("JOHN", "Free Text"),
                    new Person("123", "Free Text"),
                    new Person("D", "Multiple Choice")
                );

    GridPane gridpane = new GridPane();
    gridpane.setPadding(new Insets(5));
    gridpane.setHgap(5);
    gridpane.setVgap(5);

    namesChoiceList = FXCollections.observableArrayList("A", "B", "C", "D", "INVALID_ANSWER", "NO_ANSWER");

    answerCol = new TableColumn();
    answerCol.setText("Answers");
    answerCol.setMinWidth(210);
    answerCol.setEditable(true);
    answerCol.setCellValueFactory(new PropertyValueFactory("answers"));

    answerCol.setCellFactory( new Callback<TableColumn<String, String>, TableCell<String, String>>() {
        @Override
        public TableCell<String, String> call(TableColumn<String, String> arg0) {
            return new anyMethod();
        }
    });

    answerTypeCol = new TableColumn();
    answerTypeCol.setText("Answers Type");
    answerTypeCol.setMinWidth(210);
    answerTypeCol.setEditable(true);
    answerTypeCol.setCellValueFactory(new PropertyValueFactory("answersType"));

    table.setItems(data);
    table.getColumns().addAll(answerCol, answerTypeCol);

    StackPane root = new StackPane();

    Scene scene =new Scene(root, 500, 550);

    gridpane.add(table, 1, 5,1,20 );

    root.getChildren().addAll(gridpane);
    primaryStage.setScene(scene);
    primaryStage.show();

   }

  private class anyMethod extends TableCell <String, String>{

    @SuppressWarnings("unchecked")
    @Override
    protected void updateItem(String item, boolean arg1) {
        super.updateItem(item, arg1);

        answerCol.setCellFactory(ComboBoxTableCell.<String, String>forTableColumn(namesChoiceList));

        /****  I have to execute this commented code so that if the column cell has text "Multiple Choice" then
         * it displays the comboBox otherwise it displays the text field in the Table View cell

        if (item.equalsIgnoreCase("Multiple Choice")){
            answerCol.setCellFactory(ComboBoxTableCell.<String, String>forTableColumn(namesChoiceList));
        }
        else{
            //answerCol.setCellFactory(TextFieldTableCell.<String>forTableColumn());
        }
    ****/
    }

}

public static class Person {
    private final SimpleStringProperty answers;
    private final SimpleStringProperty answersType;

    private Person(String answers, String answersType) {
        this.answers = new SimpleStringProperty(answers);
        this.answersType = new SimpleStringProperty(answersType);
    }

    public String getAnswers() {
        return answers.get();
    }
    public void setAnswers(String answers) {
        this.answers.set(answers);
    }

    public String getAnswersType() {
        return answersType.get();
    }
    public void setAnswersType(String answersType) {
        this.answersType.set(answersType);
    }
   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:22:02.267

这是 EditingCell 的示例，它根据单元格的支持字段（字符串或布尔值）表示的数据类型在单元格（文本编辑字段或复选框）中呈现不同的控件。 [完整的可执行代码可作为 gist 获得](https://gist.github.com/4278406)。

对于您的特定示例，使用相同的概念，但查询 String => TextField 或 ObservableList => 组合框的类型。此外，对于您的特定示例，ChoiceBox 可能是比 ComboBox 更简单的控件。

```
class EditingCell extends TableCell<NamedProperty, Object> {
private TextField textField;
private CheckBox checkBox;
public EditingCell() {}

@Override public void startEdit() {
  if (!isEmpty()) {
    super.startEdit();

    if (getItem() instanceof Boolean) {
      createCheckBox();
      setText(null);
      setGraphic(checkBox);
    } else {
      createTextField();
      setText(null);
      setGraphic(textField);
      textField.selectAll();
    }  
  }
}

@Override public void cancelEdit() {
  super.cancelEdit();

  if (getItem() instanceof Boolean) {
    setText(getItem().toString());
  } else {
    setText((String) getItem());
  }  
  setGraphic(null);
}

@Override public void updateItem(Object item, boolean empty) {
  super.updateItem(item, empty);

  if (empty) {
    setText(null);
    setGraphic(null);
  } else {
    if (isEditing()) {
      if (getItem() instanceof Boolean) {
        if (checkBox != null) {
          checkBox.setSelected(getBoolean());
        }
        setText(null);
        setGraphic(checkBox);
      } else {
        if (textField != null) {
          textField.setText(getString());
        }
        setText(null);
        setGraphic(textField);
      }  
    } else {
      setText(getString());
      setGraphic(null);
    }
  }
}

private void createTextField() {
  textField = new TextField(getString());
  textField.setMinWidth(this.getWidth() - this.getGraphicTextGap()* 2);
  textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
    @Override public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
      if (!newValue) {
        commitEdit(textField.getText());
      }
    }
  });
}

private void createCheckBox() {
  checkBox = new CheckBox();
  checkBox.setSelected(getBoolean());
  checkBox.setMinWidth(this.getWidth() - this.getGraphicTextGap()* 2);
  checkBox.focusedProperty().addListener(new ChangeListener<Boolean>() {
    @Override public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
      if (!newValue) {
        commitEdit(checkBox.isSelected());
      }
    }
  });
}

private String getString() {
  return getItem() == null ? "" : getItem().toString();
}

private Boolean getBoolean() {
  return getItem() == null ? false : (Boolean) getItem();
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T00:22:26.160

贝娄是我的问题的工作代码。感谢 jewelsea

```
 import javafx.application.Application;
    import javafx.beans.property.SimpleStringProperty;
    import javafx.collections.FXCollections;
    import javafx.collections.ObservableList;
    import javafx.geometry.Insets;
    import javafx.scene.Scene;
    import javafx.scene.control.ComboBox;
    import javafx.scene.control.TableCell;
    import javafx.scene.control.TableColumn;
    import javafx.scene.control.TableView;
    import javafx.scene.control.TextField;
    import javafx.scene.control.cell.PropertyValueFactory;
    import javafx.scene.layout.GridPane;
    import javafx.scene.layout.StackPane;
    import javafx.stage.Stage;
    import javafx.util.Callback;

    public class TableCellWithMultipleComponent extends Application {
        @SuppressWarnings("rawtypes")
        TableColumn answerTypeCol; 
        @SuppressWarnings("rawtypes")
        TableColumn answerCol; 
        ObservableList<String> namesChoiceList;
        @SuppressWarnings("rawtypes")
        ComboBox comboBox;
        TextField textField;

        public static void main(String[] args) {
            launch(args);
        }

        @SuppressWarnings({ "rawtypes", "unchecked" })
        @Override
        public void start(final Stage primaryStage) {
            primaryStage.setTitle("Table Cell With Multiple Components");

             TableView<Person> table = new TableView<Person>();
             table.setEditable(true);
              final ObservableList<Person> data = 
                        FXCollections.observableArrayList(
                            new Person("A", "Multiple Choice"),
                            new Person("JOHN", "Free Text"),
                            new Person("123", "Free Text"),
                            new Person("D", "Multiple Choice")
                        );

            GridPane gridpane = new GridPane();
            gridpane.setPadding(new Insets(5));
            gridpane.setHgap(5);
            gridpane.setVgap(5);

            namesChoiceList = FXCollections.observableArrayList("A", "B", "C", "D", "INVALID_ANSWER", "NO_ANSWER");

            answerCol = new TableColumn();
            answerCol.setText("Answers");
            answerCol.setMinWidth(210);
            answerCol.setEditable(true);
            answerCol.setCellValueFactory(new PropertyValueFactory("answers"));

            answerCol.setCellFactory( new Callback<TableColumn<String, String>, TableCell<String, String>>() {
                @Override
                public TableCell<String, String> call(TableColumn<String, String> arg0) {
                    return new anyMethod();
                }
            });

            answerTypeCol = new TableColumn();
            answerTypeCol.setText("Answers Type");
            answerTypeCol.setMinWidth(210);
            answerTypeCol.setEditable(true);
            answerTypeCol.setCellValueFactory(new PropertyValueFactory("answersType"));

            table.setItems(data);
            table.getColumns().addAll(answerCol, answerTypeCol);

            StackPane root = new StackPane();

            Scene scene =new Scene(root, 500, 550);

            gridpane.add(table, 1, 5,1,20 );

            root.getChildren().addAll(gridpane);
            primaryStage.setScene(scene);
            primaryStage.show();

       }

        private class anyMethod extends TableCell <String, String>{

            @SuppressWarnings({ "unchecked", "rawtypes" })
            public anyMethod(){

                comboBox = new ComboBox();
                textField = new TextField();
                comboBox.setItems(namesChoiceList);
            }

            @Override
            protected void updateItem(String item, boolean empty) {
                super.updateItem(item, empty);
                     if (empty) {
                    setText(null);
                   setGraphic(null);
                    System.out.println("In empty");
                 } else {
                    if( getTableView().getColumns().get(1).getCellData(getIndex()).toString().startsWith("M")){

                     System.out.println("Making ComboBox");
                     setGraphic(comboBox);
                    }
                    else{
                        setGraphic(textField);
                    }
                 }

            }

        }

        public static class Person {
            private final SimpleStringProperty answers;
            private final SimpleStringProperty answersType;

            private Person(String answers, String answersType) {
                this.answers = new SimpleStringProperty(answers);
                this.answersType = new SimpleStringProperty(answersType);
            }

            public String getAnswers() {
                return answers.get();
            }
            public void setAnswers(String answers) {
                this.answers.set(answers);
            }

            public String getAnswersType() {
                return answersType.get();
            }
            public void setAnswersType(String answersType) {
                this.answersType.set(answersType);
            }
        }

    } 
```

# kogrid - Ko grid +有条件地显示列

> ID：13853626
> 
> 赞同：3
> 
> 时间：2012-12-13T05:37:42.367
> 
> 标签：kogrid

```
data-bind="koGrid: { data: ViewModel.statistics,
                             columnDefs: [  { displayName: 'Name', field: 'toName', sortable: true, headerTemplate: 'TmplStatsHeader', headerClass: 'left15 ' },
                                            { displayName: 'Email', field: 'email', sortable: true, headerTemplate: 'TmplStatsHeader', headerClass: 'left30 ' },
                                         ], 
```

我有一个 ko 网格我的列定义在上面

我必须仅根据某些条件显示电子邮件（第二列）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:59:59.067

您必须使用[单元格模板](https://github.com/ericmbarnard/KoGrid/wiki/Cell-Template-Library)来更改/显示基于其他属性的单元格值。

# python - 将月份数字形式转换为他们的名字？

> ID：13853630
> 
> 赞同：0
> 
> 时间：2012-12-13T05:37:52.580
> 
> 标签：python, templates, django-templates

我正在使用此代码打印月份。在**views.py**

> currentMonth = datetime.now().month return render_to_response('showroom.html',{'currentMonth':currentMonth,} , context_instance=RequestContext(request))

之后在我们的文件 中**打印**变量**{{currentMonth}} 。****它显示 12，但我想显示 12 月。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:55:10.563

你想要这样的东西：

```
# Near the top of views.py
from datetime import datetime

# ...
currentMonth = datetime.now().strftime('%B')
return render_to_response('showroom.html',{'currentMonth':currentMonth,} , context_instance=RequestContext(request)) 
```

在您上面评论中的代码中：

```
import datetime
currentMonth = datetime.now().month
currentMonthn = currentMonth.strftime("%B") 
```

`currentMonth`是一个整数，并且没有`strftime`方法，但`datetime.now()`返回一个对象：

```
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from datetime import datetime
>>> datetime.now().strftime('%B')
'December'
>>> 
```

# javascript - Highcharts - 多个 Y 轴堆叠图表

> ID：13853636
> 
> 赞同：3
> 
> 时间：2012-12-13T05:38:33.760
> 
> 标签：javascript, charts, highcharts, multiple-axes

我正在创建一个带有两个 Y 轴的图表 - 距离和持续时间。每个 Y 轴将有多个系列（跑步、自行车、游泳等）堆叠在一起。持续时间是堆叠区域或区域样条，距离是堆叠柱形图。

这是图表的jsfiddle。[http://jsfiddle.net/baberuth22/u5QCB/3/](http://jsfiddle.net/baberuth22/u5QCB/3/)

```
$(function() {

var run_data = [[1324771200000,2928000],[1325376000000,2148000],[1327190400000,1001000],[1327795200000,2336000],[1329609600000,2403000],[1330214400000,2456000],[1330819200000,3615000],[1334448000000,1753000],[1338681600000,1998000],[1348358400000,1897000],[1350777600000,8130000],[1353801600000,9402000],[1354406400000,9612000],[1355011200000,4500000]];
var swim_data = [[1324771200000,1726000],[1348963200000,14520000],[1350777600000,15540000],[1352592000000,7380000],[1353801600000,4571000],[1354406400000,4500000]];
var bike_data = [[1327190400000,4289000],[1330214400000,4650000],[1330819200000,3655000],[1331424000000,2217000],[1334448000000,4349000],[1348963200000,4241000],[1350777600000,15014000],[1351382400000,4118000],[1353196800000,3362000],[1353801600000,11944000],[1354406400000,5997000]];
var strength_data = [[1324771200000,3275000],[1334448000000,600000],[1350777600000,4403000],[1351382400000,3339000],[1351987200000,4175000],[1353196800000,3754000],[1354406400000,3890000]];
var yoga_data = [[1351382400000,2656000],[1352592000000,609000]];
var other_data = [[1352592000000,309000],[1353196800000,186000]];

var run_distance_data = [[1324771200000,4],[1325376000000,3.1],[1327190400000,1.5],[1327795200000,3],[1329609600000,3.4],[1330214400000,3.5],[1330819200000,4.9],[1334448000000,2.5],[1338681600000,2.7],[1348358400000,2.6],[1350777600000,10.2],[1353801600000,7.6],[1354406400000,17.2],[1355011200000,10],[1331424000000,0],[1348963200000,0],[1351382400000,0],[1351987200000,0],[1352592000000,0],[1353196800000,0]];
var swim_distance_data = [[1324771200000,0.5],[1348963200000,1.5],[1350777600000,3.1],[1352592000000,0.2],[1353801600000,6.2],[1354406400000,3.1],[1325376000000,0],[1327190400000,0],[1327795200000,0],[1329609600000,0],[1330214400000,0],[1330819200000,0],[1331424000000,0],[1334448000000,0],[1338681600000,0],[1348358400000,0],[1351382400000,0],[1351987200000,0],[1353196800000,0],[1355011200000,0]];
var bike_distance_data = [[1327190400000,19.4],[1330214400000,20.2],[1330819200000,16.1],[1331424000000,9.9],[1334448000000,16.3],[1348963200000,16.1],[1350777600000,168],[1351382400000,15.5],[1353196800000,10.7],[1353801600000,47.2],[1354406400000,24],[1324771200000,0],[1325376000000,0],[1327795200000,0],[1329609600000,0],[1338681600000,0],[1348358400000,0],[1351987200000,0],[1352592000000,0],[1355011200000,0]];
var other_distance_data = [[1352592000000,3.1],[1353196800000,3],[1324771200000,0],[1325376000000,0],[1327190400000,0],[1327795200000,0],[1329609600000,0],[1330214400000,0],[1330819200000,0],[1331424000000,0],[1334448000000,0],[1338681600000,0],[1348358400000,0],[1348963200000,0],[1350777600000,0],[1351382400000,0],[1351987200000,0],[1353801600000,0],[1354406400000,0],[1355011200000,0]];

// one week - 604800000
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'graph1',
        zoomType: 'x'
    },
    title: {
        text: 'Workout Duration By Week'
    },
    subtitle: {
        text: document.ontouchstart === undefined ? 'Click and drag in the plot area to zoom in' : 'Drag your finger over the plot to zoom in'
    },
    xAxis: {
        type: 'datetime'

    },
    yAxis: [{
        type: 'datetime',
        //y-axis will be in milliseconds
        dateTimeLabelFormats: { //force all formats to be hour:minute:second
            second: '%H:%M:%S',
            minute: '%H:%M:%S',
            hour: '%H:%M',
            day: '%H'
        },
        title: {
            text: 'Duration (hours)'
        },
        min: 0

        }
                    ,
    {
        min: 0,
        title: {
            text: 'Distance ' + '(miles)'
        },
        opposite: true}
                    ],

    tooltip: {
        formatter: function() {
            var range_start_date = new Date(this.x);
            //var range_start_date = new Date(this.x * 1000);
            var range_end_date = new Date(range_start_date);
            range_end_date.setDate(range_end_date.getDate() + 6);
            var unix_end_datetime = range_end_date.getTime();
            var return_string = '<b>' + this.series.name + '</b> ' + Highcharts.dateFormat('%b %e', this.x) + ' - ' + Highcharts.dateFormat('%b %e', unix_end_datetime) + '<br/>';

            if (this.series.index <= 5){
                return_string += Highcharts.dateFormat('%H hours %M minutes', this.y) + ' ';                        
            }else{
                return_string += this.y + ' (miles) ';
            }

            return return_string;
        }
    },
    plotOptions: {
        column: {
            pointRange: 604800000,
            stacking: 'normal'
        },
        area: {
            stacking: 'normal'
        }
    },
    series: [
        {
        name: 'Run',
        data: run_data,
        type: 'column'},
    {
        name: 'Swim',
        data: swim_data,
        type: 'column'},
    {
        name: 'Bike',
        data: bike_data,
        type: 'column'},
    {
        name: 'Strength',
        data: strength_data,
        type: 'column'},
    {
        name: 'Yoga',
        data: yoga_data,
        type: 'column'},
    {
        name: 'Other',
        data: other_data,
        type: 'column'}
        ,
    {
        name: 'Run',
        data: run_distance_data,
        yAxis: 1,
        type: 'area'},
    {
        name: 'Swim',
        data: swim_distance_data,
        yAxis: 1,
        type: 'area'},
    {
        name: 'Bike',
        data: bike_distance_data,
        yAxis: 1,
        type: 'area'},
    {
        name: 'Other',
        data: other_distance_data,
        yAxis: 1,
        type: 'area'

        }
    ]
});

var d = new Date();
chart.xAxis[0].setExtremes(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate() - 7), Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
chart.showResetZoom(); 
```

});​</p>

这是顶部图表。

堆叠似乎无法正常工作，我在 highcharts 演示页面上看不到任何堆叠多个轴的示例。[http://www.highcharts.com/demo/combo-multi-axes](http://www.highcharts.com/demo/combo-multi-axes)或[http://www.highcharts.com/demo/column-stacked](http://www.highcharts.com/demo/column-stacked)，但不能同时使用。

如果我将两个轴都设置为“列”类型，则堆叠有效，但条形图彼此重叠。理想情况下，我希望在背景中有一个半透明的面积图，前面有一个列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:08:37.057

我认为它实际上以您的方式与两个堆栈一起使用，但是区域系列的堆栈会中断，因为并非每个日期都存在数据点。因此，如果您在预处理时确保每个数据在区域系列中都有一个数据点，我认为它应该可以工作。

# sql - 用于打印 2012 年所有星期一的 sql 代码

> ID：13853640
> 
> 赞同：0
> 
> 时间：2012-12-13T05:38:52.880
> 
> 标签：sql, oracle, oracle10g, oracle11g

```
2012
     January
            2/1/2012
            9/1/2012
            16/1/2012
            23/1/2012
            30/1/2012
     February
            6/2/2012
                .
                .
                .
                . 
```

以此类推，直到十二月。

提到的日期是星期一..我如何获得这种格式的输出？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:46:41.270

一种选择

```
SQL> ed
Wrote file afiedt.buf

  1  select next_day(trunc(sysdate,'YYYY') + 7*(level-1), 'MON' )
  2    from dual
  3* connect by level <= 53
SQL> /

NEXT_DAY(
---------
02-JAN-12
09-JAN-12
16-JAN-12
23-JAN-12
30-JAN-12
06-FEB-12
13-FEB-12
20-FEB-12
27-FEB-12
05-MAR-12
12-MAR-12
<<snip>>
03-DEC-12
10-DEC-12
17-DEC-12
24-DEC-12
31-DEC-12

53 rows selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T07:34:39.123

询问：

```
select distinct next_day(to_date('01-01-2012','mm-dd-yyyy')-1+level,'Monday') All_MON from dual 
connect by level <= floor(to_date('12-31-2011','mm-dd-yyyy') - to_date('01-01-2011','mm-dd-yyyy'))
order by All_MON; 
```

输出：

2012年
1
月2 日星期一 2012 年 1 月 9 日星期一 2012 年 1 月 16 日星期一 2012 年 1 月 23 日星期一 2012 年 1 月 30 日 星期一 2012 年 02月 6 日星期一 2012 年 2 月 13 日
星期一2012 年 2 月 20 日星期一 02/ 27/2012 星期一 2012 年 3月 5 日星期一 2012 年 3 月 12日 星期一2012 年 3 月 19 日星期一 2012 年 3 月 26 日星期一 2012 年 4 月 26 日星期一 2012 年 4 月 9 日星期一 2012 年 4 月 16 日 星期一2012 年 4 月 23 日星期一2012 年星期一 2012 年 4 月 30 日星期一 2012年 5 月 7 日 星期一2012 年 5 月 14 日星期一 2012 年 5 月 21日星期一 2012 年 5 月 28 日星期一 2012 年 6 月 4 日星期一 2012 年 6 月 11 日星期一 2012 年 6 月 18 日星期一 2012 年 6 月 25 日星期一 2012 年 7月 2 日星期一

2012年 7 月 9 日星期一 2012 年 7 月 16 日星期一 2012 年 7 月 23日星期一 2012 年 7 月 30 日星期一 2012 年 8 月 6 日星期一 2012 年 8 月 13 日星期一 2012 年 8 月 20 日星期一
星期一 2012 年 8 月27 日 星期一2012年 3 月 星期一2012 年 9 月 10 日星期一 2012 年 9 月 17 日星期一 2012年 9 月 24 日星期一 2012年 10 月 1 日星期一 2012 年 10 月 8 日星期一 2012 年 10 月 15 日 星期一2012 年 10 月 22 日 星期一2012 年 10 月 29 日 星期一2012 年 11 月 5 日星期一 2012 年 11月 12 日 星期一2012 年 11 月 12 日星期一 2012 年 11 月 26 日 星期一2012 年 11 月 26 日 星期一2012 年 12 月 3 日星期一 2012 年 12 月 10 日星期一 2012 年 12 月 17 日星期一 2012年 12 月 24日 星期一 2012 年 12 月 31 日星期一

# wordpress - WooCommerce 显示添加到购物车而没有默认选择

> ID：13853641
> 
> 赞同：0
> 
> 时间：2012-12-13T05:39:04.620
> 
> 标签：wordpress, woocommerce, variations

我需要显示“添加到购物车按钮”而不选择具有变体的默认选择值。客户可以从下拉变量中选择变量并重新设置值，并且“single_variation_wrap”应该始终可见。我试图删除`"display:none"`under`variables.php`但它没有成功。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-03T09:08:01.497

[在这里](https://stackoverflow.com/a/29574376/7177540)查看答案

“WooCommerce：即使在选择变体之前也始终显示添加到购物车按钮”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-18T14:23:18.227

**这应该有效：**

您可以取消注册当前的*添加到购物车变体*Javascript，将此脚本复制并粘贴到您的主题目录中，然后将这个新脚本加入队列。在这里您可以删除下滑功能，它会一直显示。

**警告**

当 woocoomerce 推送新版本时，您必须检查 changlog 以查看 add-to-cart-variation.min.js 中是否有任何更改

# c# - 将项目附加到现有列表

> ID：13853642
> 
> 赞同：0
> 
> 时间：2012-12-13T05:39:11.790
> 
> 标签：c#

我正在使用链接列表。我已将构造函数设置为采用一个以`ax`一组已定义项命名的数组。我还决定有一个输入框，它通过 a`BtnAddTree_Click`将新项目附加到列表中`ax`。但它不是附加到列表中`ax`，而是创建了一个全新的单独列表。如何`ax`通过我的`AddTree`函数将项目附加到数组列表中？

```
 public ListForTrees(IEnumerable<fruit_trees> trees)
            {
                foreach (fruit_trees t in trees)
                {
                    this.AddTree(t);
                }
            }

            public void AddTree(fruit_trees new_tree)
            {
                fruit_trees current = first_tree;

                if (count == 0)
                {
                    first_tree = new_tree;
                    last_tree = new_tree;
                    count = 1;
                }

                else if (count != 0)
                {
                    if (new_tree.tree_price <= first_tree.tree_price)
                    {
                        new_tree.next_tree = first_tree;
                        first_tree = new_tree;
                    }
                    else if (new_tree.tree_price >= last_tree.tree_price)
                    {
                        last_tree.next_tree = new_tree;
                        last_tree = new_tree;
                    }
                    else
                    {
                        while (new_tree.tree_price > current.next_tree.tree_price)
                        {
                            current = current.next_tree;
                        }
                        new_tree.next_tree = current.next_tree;
                        current.next_tree = new_tree;
                    }
                    count++;
                }
            }

        }

        ListForTrees mainlist = new ListForTrees();

        private void BtnGo_Click(object sender, EventArgs e)
        {
            fruit_trees[] ax = {   new fruit_trees("cherry", 48, 12.95, 3),
                                             new fruit_trees("pine", 36, 9.95, 8),
                                             new fruit_trees("oak", 60, 14.95, 2),
                                             new fruit_trees("peach", 54, 19.95, 3),
                                             new fruit_trees("pear", 36, 11.85, 2),
                                             new fruit_trees("apple", 62, 13.45, 5)
                                         };

            mainlist = new ListForTrees(ax);
            fruit_trees current = mainlist.first_tree;
            while (current != null)
            {                   
                current = current.next_tree;             
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:08:06.570

它似乎没有创建一个新的单独列表。我用你的代码测试了以下代码：

```
public class TreeTester
{
  public static void Main(string[] args)
  {
    var list = new ListForTrees(
        new[] { new fruit_trees("tree10",10,10,10), new fruit_trees("tree2",2,2,2) });

    list.AddTree( new fruit_trees("tree3",3,3,3) );     // middle
    list.AddTree( new fruit_trees("tree1",1,1,1) );     // first
    list.AddTree( new fruit_trees("tree50",50,50,50) ); // last
    list.AddTree( new fruit_trees("tree5",5,5,5) );     // middle
    Console.Write(list);
  }
} 
```

并得到以下输出，这似乎是正确的。

```
tree1 1 1 1
tree2 2 2 2
tree3 3 3 3
tree5 5 5 5
tree10 10 10 10
tree50 50 50 50 
```

如果不正确，预期的行为是什么？显然，这些项目*都*被添加到原始列表中，因为当我遍历列表时它们就存在了。

顺便说一句，我还在`ToString`您的课程中添加了以下功能`ListForTrees`；它使调试更容易。

```
public override string ToString()
{
  string s = "";
  for (var tree=first_tree; tree!=null; tree = tree.next_tree)
    s += tree + "\n";
  return s;
} 
```

* * *

*编辑*：我必须评论说，你可能会发现清理你的代码有助于了解它出错的地方。例如，您的`ListForTrees(fruit_trees new_tree)`构造函数执行与调用相同的操作`Add(new_tree)`。另外，考虑一下您在 Add 中的三个案例`else if (count != 0)`- 也许有一种方法可以将它们优雅地组合成一个通用的 while 循环？它使分析变得更容易，并且（可能）更不容易出错。

# javascript - 上传文件时获取 .zip 文件中的所有文件

> ID：13853645
> 
> 赞同：0
> 
> 时间：2012-12-13T05:39:50.983
> 
> 标签：javascript, jquery, asp.net-mvc-3, file-upload, uploadify

我正在尝试`uploadify`在 MVC3 中使用控件。它适用于上传文件。

这是我的问题：

如何获取 .zip 文件中的文件？让我澄清一下这个问题。

这是一个 zip 文件（比如 : `images.zip`）。它包含 3 个`jpeg`文件。

现在，如果我`images.zip`使用视图页面上的上传控件上传文件，我需要获取 zip 文件中的所有图像文件。

如果我上传`images.zip`文件，它应该显示所有这样的图像

![在此处输入图像描述](../Images/f962612af30625aca29c78a18513aa01.png)

我不知道如何获取文件以及如何开始。

我搜索了谷歌，但没有得到任何线索。

如何得到这个？如果有任何`Jquery`或`Javascript`代码可用，请发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:21:44.547

如果您可以使用 .NET 4.5，则有一个新的[ZipFile 类](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)可以让您获取压缩存档的属性。

如果您低于 4.5，您将需要一个 3rd 方 zip 文件库，例如[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)或[DotNetZip](http://dotnetzip.codeplex.com/)。

# php - Joomla Virturmat 2.x 中的时区问题

> ID：13853647
> 
> 赞同：0
> 
> 时间：2012-12-13T05:39:57.510
> 
> 标签：php, joomla, virtuemart

我遇到了在我的 Joomla 购物车网站中设置默认时区的问题。我正在使用 Joomla 1.7 和 VM2.0.6 。

我可以从 Joomla 管理员那里设置默认时区，但在 VM 中，这个时区不会在数据库中获取/保存。

我必须为订单正确设置时区，并使用获取时区的功能注册 VM。

```
vmJsApi::date("Y-m-d h:i:s ",'LC2',true); 
```

有没有人对这个函数有一些想法，它会以 24 小时格式返回结果，我希望在 12 小时内返回结果并更正时间。

任何参考或提示的链接将不胜感激。提前致谢..

# javascript - 向公众开放应用程序（由 Node.js 和 Redis 组成）的设置

> ID：13853653
> 
> 赞同：1
> 
> 时间：2012-12-13T05:40:36.810
> 
> 标签：javascript, node.js, express, redis, socket.io

Scrumblr（GPL Web Application）存在一些问题。Scrumblr 由 Node.js 和 Redis 组成。这是 Github 网址：[https](https://github.com/aliasaria/scrumblr) ://github.com/aliasaria/scrumblr 。

我在 Ubuntu 11.10 上的 localhost:8080 运行“scrumblr”。我在我的 Ubuntu 上配置了全局 IP 地址。但是，当我访问“http://global IP address:8080/”时，我无法访问 Scrumblr。（错误信息：无法建立与服务器的连接）

我应该如何修改 scrumblr 的源代码？所以，请告诉我应该在哪里修改以通过“http://global IP address:8080/”访问 Scrumblr。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:36:54.090

我通常做的是在我的防火墙中打开端口 8080，这样我就可以从外部访问它，然后使用 localhost:8080 为应用程序服务——有时你可能必须将它绑定到一个 ip，但我不确定。我使用 express 基本上可以为我解决这个问题。

然后我编辑我的 /etc/hosts 文件并将 foo.myapp 映射到我的公共 IP 地址......然后我可以从任何地方浏览到[http://foo.myapp:8080](http://foo.myapp:8080)。

# windows - 如何删除 Ctoolbar 中的左侧“拖动条”？

> ID：13853659
> 
> 赞同：0
> 
> 时间：2012-12-13T05:41:13.637
> 
> 标签：windows, mfc

如何删除 Ctoolbar 中的左侧“拖动条”？？？下图中的红色矩形区域？？ ![在此处输入图像描述](../Images/4e10d7d614198f1c0c35ba94acf70daf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:05:00.243

创建工具栏时不要包含`CBRS_GRIPPER`在样式列表中。看[这里](http://msdn.microsoft.com/en-us/magazine/cc164052.aspx)

更新：您必须`CBRS_GRIPPER`使用下面的代码显式删除样式，因为它是由框架自动添加的：

```
m_wndToolBar.SetPaneStyle(m_wndToolBar.GetPaneStyle() & ~CBRS_GRIPPER); 
```

# jquery - 重写 jquery 使其仅针对父 ul li

> ID：13853668
> 
> 赞同：0
> 
> 时间：2012-12-13T05:42:01.840
> 
> 标签：jquery

jsfiddle：http: [//jsfiddle.net/X4uvD/](http://jsfiddle.net/X4uvD/)

我试图让这个 jquery 代码只重写父 ul li 而不是 ul li 里面。

任何想法如何实现这一目标？

```
//This is for footer slider, it rewrites 1 ul into several uls that contain 4 li max.
    // get the container, useful for later too...
    var container = $(".fproductslides");

    // get all available UL and LI elements...
    // this doesn't order featured listings at the top of the list
    // var li_elements = container.find("LI").clone();
    // this does order featured listings at the top of the list
    var li_elements = container.find("LI.slidefeatured").clone();
    li_elements = li_elements.add(container.find('LI:not(.slidefeatured)').clone());

    // remove the current content so that we can rebuild it for the slider...
    container.find("UL").remove();

    // build the slider container...
    var slide_container = $("<div />");
    slide_container.addClass("slides_container");

    // tricky part: looping through the LI's and building each of the slides...
    // first create some helpful variables...
    var li_elements_per_slide = 3;
    var li_counter = 0;
    // create the first slide, with a UL to hold the LI's...
    var current_li_div = $("<div />");
    current_li_div.append($("<ul />"));

    // loop through the LI's...
    li_elements.each(function(index, element){

        li_counter++;
        var current_li = $(element).clone();
        current_li_div.find("UL").append(current_li);

        if (li_counter % li_elements_per_slide == 0)
        {
            // we've hit 4 in this list, so add the slide and make
            // a new one, using same code as before...
            container.append(current_li_div);
            current_li_div = $("<div />");
            current_li_div.append($("<ul />"));
        }

    });

    // we might have an uneven number of LI's, so we need to check for this...
    if (li_counter % li_elements_per_slide != 0)
        container.append(current_li_div); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:52:58.733

您可以使用`parent()`方法来获取父 DOM 元素。你也可以传递一个选择器字符串`ul.parent`来过滤父元素。

```
<ul class='parent'>
    <li class='child'></li>
</ul> 
```

`$('li.child').parent('ul.parent')`

# qt - 单一应用实例，一窗数据刷新

> ID：13853670
> 
> 赞同：0
> 
> 时间：2012-12-13T05:42:07.310
> 
> 标签：qt

我在 Qt 中有一个应用程序。它是一个窗口。此窗口显示了某些数据。

此窗口是从另一个应用程序启动的。

应用程序很可能是从另一个应用程序的不同实例启动的，具有不同的数据。

假设我已经运行了一个应用程序实例，我如何确保如果再次调用该应用程序，它不应该启动另一个实例，而是应该使用新集合刷新现有窗口中的数据？

简而言之，一个应用程序有一个窗口，它显示与不同调用一起传递的刷新数据。

编辑：我检查了。应该足以解决我的问题。但是，我在 Qt 安装中找不到相关文件。我了解到它从来不是 Qt 解决方案的一部分，必须手动下载。如果是这种情况，是否会影响任何许可问题？

**编辑2：** 我有一个实例，比方说，A，应用程序已经打开。我尝试启动实例 B。B 向 A 发送消息。是否可以使用此消息检查 A 是否满足某些条件，然后决定是否打开 B？

像这样...

1.  A 已经在运行
2.  B现已推出
3.  B 向 A 发送消息
4.  A 尝试使用此消息确认某些内容
5.  如果消息为真（假设），保持 A 运行并将 B 作为新实例打开
6.  如果不是...关闭 B，并让 A 使用此新信息刷新数据

这是否可以使用 QtSingleApplication，尤其是第 6 步？或者新实例会在检测到已经运行的实例后立即关闭吗？

另外，如何在我的应用程序中集成 QtSingleApplication？我只需要包含标题和cpp吗？我不希望构建一个 dll 并像那样工作。是否需要其他配置？

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:47:02.207

您正在寻找的是[QtSingleApplication](http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html)。当您第二次调用该应用程序时，您可以检查`QtSingleApplication::isRunning()`另一个实例是否已经存在。如果是这样，只需使用`QtSingleApplication::sendMessage()`来提醒第一个实例已经调用了某些东西。只需将您的应用程序设置为能够接收这些消息（您可以通过连接到`QtSingleApplication::messageReceived()`信号来了解这些消息），并在您收到该信号时做出相应的反应。

# javascript - URL 中的“#”字符

> ID：13853672
> 
> 赞同：0
> 
> 时间：2012-12-13T05:42:22.763
> 
> 标签：javascript, http, url

以下是我的 URL，其中包含“#”字符，问题是在“#”之后它跳过的所有数据，我检查了 fiddler（软件）中的当前 URL。

> `http://someIPAddress/folder.asp?ID=1&ID1=2&ID2=3&name=name name1 # 1&skip=0`

有人能告诉我为什么会这样吗？在 URL 中使用“#”有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:43:18.060

`#`指定 URL 的哈希/锚点部分。看起来您正在将数据放入您的 URL 中，而没有将其转义以将特殊字符（如`#`or编码`%`为`%23`or `%25`）。使用`encodeURIComponent`.

所以是这样的：

```
'http://someIPAddress/folder.asp?ID=1&ID1=2&ID2=3&name=' + someVar + '&skip=0' 
```

应该变成：

```
'http://someIPAddress/folder.asp?ID=1&ID1=2&ID2=3&name=' + encodeURIComponent(someVar) + '&skip=0' 
```

# sql - SQL查询查找最近3个月的记录

> ID：13853676
> 
> 赞同：1
> 
> 时间：2012-12-13T05:42:37.387
> 
> 标签：sql, database, categories, querying

您好，我是 sql 的新手，所以请多多包涵。

所以我有两张桌子，一张是`Transaction`桌子，另一张是`Category`桌子。

该`Transaction`表由交易信息组成，其中包括：

```
date, description, amount, category_id 
```

该表将保存所有事务。

该`Category`表包括：`categoryId , name`

例如，类别将像“娱乐”、“购物”、“食品”等）

我想要做的是能够检查过去 3 个月中每个月发生的所有类别类型的交易并返回这些类别。

例如：

如果我今天（12 月）运行此查询，假设在 9 月（2012 年 8 月 3 日）、10 月（2012 年 9 月 9 日）和 11 月（2015 年 10 月）发生了“购物”交易/2012) 查询应返回“购物”，因为在过去 3 个月内发生了购物交易。

查询可以返回多个类别，只要在过去 3 个月的每个月中都有一个类别的过去交易。我希望我说得通。

任何有用的建议或示例将不胜感激。

谢谢，东盟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:47:33.930

您想使用函数 date_sub。

看看这个：[旧的 Stackoverflow 问题](https://stackoverflow.com/questions/1138190/mysql-query-to-calculate-the-previous-month)

并阅读 date_sub 函数：[MySQL Reference](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-sub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:29:09.733

这些sql没有经过测试。只是在飞行中创建它..

**微软SQL**

```
SELECT Category.name FROM Category INNER JOIN Transaction ON Category.categoryId = Transaction .category_id where DATEDIFF(mm,Transaction.date, Now()) <= 3 GROUP BY Category.name 
```

**MYSQL**

```
SELECT DISTINCT Category.name FROM Category INNER JOIN Transaction ON Category.categoryId = Transaction .category_id where PERIOD_DIFF(EXTRACT(YEAR_MONTH FROM NOW()), EXTRACT(YEAR_MONTH FROM Transaction.date)) <= 3 
```

# ios - textFieldShouldBeginEditing 为不满足的条件运行代码

> ID：13853677
> 
> 赞同：0
> 
> 时间：2012-12-13T05:42:39.273
> 
> 标签：ios, ruby, uitextfield, rubymotion

在我的 RubyMotion 控制器中，我有 3 个文本字段。最后一个，当点击时，在委托中运行方法 didTapSomeField ，该方法推动另一个控制器。此文本字段无法像其他 2 一样进行编辑。

问题：当我从 nameField 选项卡到 emailAddressField 或从 emailAddressField 选项卡出来时，它在委托 didTapSomeField 上运行该方法。我已经三重检查了我的第一响应者代码，为什么如果 textField 不等于 someField，为什么它仍在运行 if 语句中的内容？谢谢您的帮助！

```
#
# method. textFieldShouldReturn
#
def textFieldShouldReturn( textField )
#---------------------------------------

    if textField == self.nameField

      self.emailAddressField.becomeFirstResponder

    elsif textField == self.emailAddressField

      self.didTapDoneButton

    end

end

#
# method. textField shouldChangeCharactersInRange replacementString
#
def textField( textField, 
               shouldChangeCharactersInRange: range,
               replacementString: string )
#----------------------------------------------------

  if textField == self.nameField

      true

  elsif textField == self.emailAddressField

      true

  end

end

def textFieldShouldBeginEditing( textField )
#--------------------------------------------

  if ( textField == someField )

    self.delegate.didTapSomeField \
           if self.delegate.respond_to?( :didTapSomeField ) 

    false

  else

    true

  end

end 
```

我也试过：

```
def textFieldShouldBeginEditing( textField )
#--------------------------------------------

  if ( textField == someField )
    self.delegate.didTapSomeField \
           if self.delegate.respond_to?( :didTapSomeField )             
    false

  end

  true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:42:09.583

尝试用 public_send 替换 responde_to

# php - 检查链接“仍然”是否存在

> ID：13853680
> 
> 赞同：-6
> 
> 时间：2012-12-13T05:42:55.310
> 
> 标签：php, javascript, html, sql

> **可能重复：**
> [如何使用 PHP 以编程方式检查有效（非死）链接？](https://stackoverflow.com/questions/244506/how-do-i-check-for-valid-not-dead-links-programatically-using-php)

我正在创建一个包含许多外部网站链接的网站，这些网站可能会关闭。

是否可以不时进行压力测试之类的事情，看看它们是否“仍然存在”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:50:27.447

这可能会

```
function checkLink($link){ 
    flush(); 
    $fp = @fopen($link, "r"); 
    @fclose($fp); 
    if (!$fp){ 
        return "link is not active"; 
    }else{ 
        return "link is active"; 
    } 
} 
```

# c++ - 用递归和 While 循环为兔子取幂

> ID：13853686
> 
> 赞同：2
> 
> 时间：2012-12-13T05:43:13.047
> 
> 标签：c++

## 几天前我在这里问了一个关于这个兔子程序的问题，我几乎完成了它。问题是当我输入 0 时，它会崩溃并且无法运行。有人可以帮帮我吗，这是我的任务：

一对刚出生的兔子（一公一母）被放在一块田地里。兔子可以在一个月大的时候交配，所以在第二个月末，每对兔子都会生出两对新兔子，然后死去。注：第 0 个月有 0 对兔子。第 1 个月，有 1 对兔子。

1.  编写一个程序 - 使用 while 循环 - 从用户那里获取月数，并在该月末打印兔子对的数量。
2.  在同一个 cpp 文件中，编写一个递归函数 rabbits()，它将月数作为输入，并返回该月末的兔子对数。
3.  在主程序中，使用用户输入的数字调用函数 rabbits()。输出两个计算（即，您使用循环获得的计算和递归函数返回的计算）并查看它们是否相等。

* * *

```
#include <iostream>
using namespace std;

int rabbits (int);

int main ()

{
int month_function, month_while, result_rec, result_while, counter = 0, rab_now, rab_lastmonth = 0, rab_twomonthsago = 1;

cout << "Please enter the month. \n\n";
cin >> month_function;
month_while = month_function;
cout << "\n";

if (month_function % 2 == 0) // if month entered is even, the recursive function will use month - 1 because the total number of rabbits doubles every other month
{
    month_function--;
}

result_rec = rabbits (month_function);

while (counter < month_while)
{
    if (counter % 2 == 0)
    {
    rab_now = rab_lastmonth + rab_twomonthsago;
    rab_lastmonth = rab_now;
    rab_twomonthsago = rab_now;
    }
    counter++;
    result_while = rab_lastmonth;
}

cout << "According to the recursive function, there are " << result_rec << " pairs of rabbits at the end of month " << month_while << "\n\n";

cout << "According to the while loop, there are " << result_while << " pairs of rabbits at the end of month " << month_while << endl;

if (result_rec = result_while)
{
    cout << "\n";
    cout << "They are equal!" << endl;
}
else
{
    cout << "They are not equal!" << endl;
}

return 0;
}

int rabbits (int month_function)

{
    if (month_function == 0)
    {
        return 0;
    }
    else if (month_function == 1)
    {
        return 1;
    }
    else
    {
       return (rabbits (month_function - 2) + rabbits (month_function - 2));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:49:25.910

你的问题在这里：

```
if (month_function % 2 == 0) // if month entered is even, the recursive function will use   month - 1 because the total number of rabbits doubles every other month
{
    month_function--;
} 
```

如果输入 0，则计算结果为 true，因此`month_function`等于`-1`。

您（很可能）在您的逻辑中也存在错误。如果输入`2`月份函数，这将返回 0，这是错误的。考虑一下输入 2 应该得到什么答案，从那里修复应该相当容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:48:22.173

当您输入时，`0`您会创建一个负数（条件`if (month_function % 2 == 0)`为`true`for `month_function == 0`）。当然后递归调用时`rabbits()`，您会创建一个相当深的递归，最终将超出堆栈并导致程序崩溃。可能您不想为非正值输入递归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T05:48:56.003

如果输入 0，则以下表达式的计算结果为 true

```
if (month_function % 2 == 0) 
```

所以`month_function`减为-1。

由于 -1，您的递归函数`rabbits`永远不会达到结束条件并导致堆栈溢出。

# java - 外部jar可以访问项目文件夹中的文件吗

> ID：13853689
> 
> 赞同：0
> 
> 时间：2012-12-13T05:43:27.290
> 
> 标签：java, jar

我正在使用一个外部 jar（存储在我的 eclipse 项目中的 lib 文件中），并且该 jar 需要访问我应该将路径传递到的文件。到目前为止，如果我将文件存储在服务器上完全独立的区域中，我只能使其正常工作。

我希望能够将此文件整齐地存储在项目中。例如，假设 testfile.txt 在项目 src/testfolder 中。从java中我尝试像这样引用文件：

```
File file = new File("src/testfolder/testfile.txt").getAbsolutePath(); 
```

但这会在我的电脑上返回一条路径。在这种情况下，它：

```
"/home/me/testfolder/testfile.txt" 
```

I'd like to application to be portable so I can move the jar file around if necessary without having to worry about bringing external folders. How can I reference this file within the application and pass that url to an external jar?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:20:13.750

jar 是否也包含此文件。如果是，那么这应该不是问题，因为绝对路径将被自动处理。

# ruby-on-rails - Rails 迁移中的 t.references（n | n 关系）

> ID：13853691
> 
> 赞同：2
> 
> 时间：2012-12-13T05:43:35.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationship, has-many, belongs-to

我的 Rails 3 应用程序中有三个模型，并且`DailyData`是多对多关系。`DailyDataVehicle``Vehicle`

我刚刚了解到，如果您使用关联更新模型，它不会更新数据库，因此我将返回并添加这些迁移。我也很幸运地自信地认为我知道 和 之间的区别`belongs_to`，`has_many`但是，在我的迁移文件中，我不确定是否知道`t.references`。
所以我将迁移模型命名为`AddDailyDataToDailyDataVehicle`，并希望将其添加`dailyData_id`到`daily_data_vehicles`表中。这是一个多对多关系，所以我希望`id key`在关系表中`DailyDataVehicles`，但我不太确定`t.references`会知道这一点。
也许我稍微混淆了类关联和数据库关系，如果是，请澄清这一点。
如果`t.references`不是我想要的，我是否必须手动声明关系`has_many`，如果是，那么语法是什么？

架构文件当前：

```
create_table "daily_data_vehicles", :force => true do |t|
  t.integer  "vehicle_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end
add_index "daily_data_vehicles", ["vehicle_id"], :name => "index_daily_data_vehicles_on_vehicle_id" 
```

迁移（尝试）：

```
class AddDailyDataToDailyDataVehicle < ActiveRecord::Migration
  def change
    change_table :dailyDataVehicles do |t|
      t.references :dailyData
    end
    add_index :dailyDataVehicles, :dailyData_id
  end
end 
```

如果迁移工作正常，我认为架构文件应该是什么样子：

```
create_table "daily_data_vehicles", :force => true do |t|
  t.integer  "vehicle_id"
  t.integer  "dailyData_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end
add_index "daily_data_vehicles", ["vehicle_id"], :name => "index_daily_data_vehicles_on_vehicle_id"
add_index "daily_data_vehicles", ["dailyData_id"], :name => "index_daily_data_vehicles_on_daily_data_id" 
```

不同的是`t.integer "dailyData_id"`和`add_index "daily_data_vehicles", ["dailyData_id"], :name => "index_daily_data_vehicles_on_daily_data_id"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:59:23.210

```
class AddDailyDataToDailyDataVehicle < ActiveRecord::Migration
  def change
    add_column :daily_data_vehicles, : daily_data_id, :integer
    add_index :daily_data_vehicles, :daily_data_id
  end
end

class DailyDataVehicle < ActiveRecord::Base
  belongs_to :daily_data
end

class DailyData < ActiveRecord::Base
  has_many :daily_data_vehicles
end 
```

# visual-c++ - 已安装的 IE 工具栏在 IE 中不可见

> ID：13853694
> 
> 赞同：0
> 
> 时间：2012-12-13T05:43:42.037
> 
> 标签：visual-c++, com, mfc

我开发了一个 IE 工具栏，它在我的系统中运行良好，但是在其他一些系统中，当我通过命令“ **regsvr32 /s /c DLL-PATH** ”注册它时，它在注册表中创建了一个条目，我可以在Manage-Addons 屏幕显示启用但在 IE 中不可见。我也没有收到任何提示从 IE 启用附加组件。但是如果我下载并安装 Last-Pass Toolbar，我的工具栏也开始在 IE 中显示.是否有任何设置可以使 IE 提示启用我的工具栏案例中没有的附加组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:17:00.660

一个 IE 附加组件需要额外的注册表项，而不是普通的 COM 组件键。本文描述了它们：

[http://msdn.microsoft.com/en-us/library/aa753588.aspx](http://msdn.microsoft.com/en-us/library/aa753588.aspx)

# android - 单击通知区域后从通知区域中删除通知

> ID：13853696
> 
> 赞同：2
> 
> 时间：2012-12-13T05:44:23.263
> 
> 标签：android, android-notifications

每当收到包含特定关键字的新消息时，我都会显示通知。我使用以下代码在通知区域显示通知，

```
String contentTitle = "V-Card Received"; 
String contentText = "You have reeived a new V-Card"; 
 mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
Intent notificationIntent = new Intent(context, receiveVCard.class);
 notificationIntent.putExtra("sender", sender);
notificationIntent.putExtra("vCardString", messages[i].getDisplayMessageBody());
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK);
int icon = R.drawable.contactvcard;
CharSequence tickerText = "V-Card Received";
long when = System.currentTimeMillis();
notifyDetails = new Notification(icon, tickerText, when);
notifyDetails.setLatestEventInfo(context, contentTitle, contentText, pendingIntent); 
mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails); 
notifyDetails.flags =Notification.DEFAULT_LIGHTS | Notification.FLAG_AUTO_CANCEL; 
```

现在，我想在用户单击通知后删除通知。我曾经`Notification.FLAG_AUTO_CANCEL`取消通知。但即使用户点击它，它也不会删除通知。当用户单击通知时，是否有其他方法可以删除通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:02:52.943

您基本上是在发出通知后设置标志。

您需要交换您提供的代码的最后两行。在调用 nm.notify() 之前设置标志；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:54:01.680

试试这个对我来说很好

```
--> notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent intent = PendingIntent.getActivity(context, 0,notificationIntent, 0);
notification.setLatestEventInfo(context, title, message, intent);
--> notification.flags |= Notification.FLAG_AUTO_CANCEL; 
notificationManager.notify(i, notification); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:56:26.957

这是我在我的一个应用程序中使用的通知原型

```
 Notification notification=new Notification(R.drawable.ic_stat_download_interrupted,getResources().getString(R.string.dint),System.currentTimeMillis());
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification_download_complete);
    contentView.setImageViewResource(R.id.notimage, R.drawable.ic_stat_download_interrupted);
    contentView.setTextViewText(R.id.nottext, getResources().getString(R.string.dint));
    contentView.setTextViewText(R.id.nottitle, update.initialDetail.fileName);

    notification.contentView = contentView;      
    notification.flags=Notification.FLAG_AUTO_CANCEL;
    Intent notificationIntent = new Intent(getApplicationContext(), MainDashboard.class);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    notificationIntent.putExtra(EXTRA_NOTIFICATION_SHOW_DOWNLOADS, true);
    PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(),0,notificationIntent, 0);
    notification.contentIntent=contentIntent;

nm.notify(update.updateId.intValue(), notification); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:59:27.667

它为我工作

notifyDetails.flags =Notification.FLAG_SHOW_LIGHTS | Notification.FLAG_AUTO_CANCEL；

希望这对你有帮助。

# c# - 使用 Windows Phone 8 应用程序时，yammer 的重定向 URI 应该是什么？

> ID：13853698
> 
> 赞同：0
> 
> 时间：2012-12-13T05:44:40.383
> 
> 标签：c#, rest, oauth, windows-phone-8, yammer

我将以下 URL 用于**OAuth2.0**

[https://www.yammer.com/dialog/oauth?client_id=client_id&redirect_uri=redirect_uri&response_type=token](https://www.yammer.com/dialog/oauth?client_id=client_id&redirect_uri=redirect_uri&response_type=token)

并将其传递给 Post()。

结果：**我的应用程序没有运行并等待资源。我想可能它没有得到 HTTP 响应。**

请验证并让我知道我在这里做错了什么？

```
private void Post(string address)
    {
        System.Uri targetUri = new System.Uri(address);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
        request.Method = "POST";
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request); 
    }

// STEP4 STEP4 STEP4
    private void ReadWebRequestCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);
        string results;
        using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
        {
             results = httpwebStreamReader.ReadToEnd();
            //TextBlockResults.Text = results; //-- on another thread!
            SkyDriveContent test = new SkyDriveContent();
            test.Name = results;
            str_results = results;

            Dispatcher.BeginInvoke(() => ContentList.Add(test));
        }
        myResponse.Close();

    } 
```

# jquery - jQuery从上面获取标签

> ID：13853700
> 
> 赞同：6
> 
> 时间：2012-12-13T05:44:52.860
> 
> 标签：jquery, html

我正在编写一个函数来更新订单收据，每次用户更新然后关闭产品弹出覆盖。该函数搜索表单的每个输入，然后将信息添加到收据 div，如果其值大于`0`。我正在尝试获取`.html()`位于输入字段上方并描述当前项目的标签元素，并将其用作收据中项目的描述。

我试过使用但没有成功：

```
 - $this.closest('label').html() 
 - $this.prev('label').html()
 - $this.find('label').html()
 - this.element.find('label').html() 
```

这是我的代码。我正在谈论的部分是“标签是”部分......

```
function updateOrder(){

var items = '';
$('input').each(function(){
    var $this = $(this),
        i_value = $this.attr('value');

    if(i_value > 0){
      items += $this.attr('id') + ' Quantity: ' + i_value + '<br/>' 
      + 'label is: ' + $this.closest('label').html() + '<br/>';  
    }
});

$('#d_reciept').html(items); 
```

}

和一个示例表单项

```
<tr>
<td class="td_thumbs">
    <div>
        <a class="fancybox" data-fancybox-group="vinyl-banners" href="img/products/vinyl-corporateblue.jpg"> <img src="img/products/thumbs/vinyl-corporateblue-thumb.png" alt="vinyl c-blue"/></a>
        <label>Corporate Blue</label>
    </div>
</td>
<td>6</td>
<td>
    <input id="vinyl-blue" type="number" max="6" min="0" value="0"/>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T05:46:03.090

该函数`closest`为您提供给定选择器的第一个准确度`ancestors`，您的标签不在第一个祖先中，而是在父级 tr`children`中，您需要转到父级 tr 然后使用 find 搜索其父级`label`。

```
$(this).closest('tr').find('label').html() 
```

或者

```
$(this).closest('tr :td:eq(0)').find('label').html() 
```

# facebook - Facebook 应用程序以秘密朋友的名字为特色？

> ID：13853706
> 
> 赞同：3
> 
> 时间：2012-12-13T05:45:20.990
> 
> 标签：facebook, facebook-friends

是否可以在不完全显示谁使用该应用程序的情况下创建一个 Facebook 应用程序？

例如，我想向我的一位朋友发布一条墙消息。但是当消息出现在我朋友的墙上时，我的真实姓名就不会出现。换句话说，我的朋友知道发布消息的人是他的朋友之一，但不知道是哪个朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:53:59.980

这样的事情是不可能的。发布到任何人的墙上将始终显示发件人的用户名。这以前可以通过[Notifications](http://developers.facebook.com/docs/app-notifications/)实现，允许您向朋友发送通知说“一个秘密的人已向您发送消息”等。但新的 API 现在只允许您向应用程序的用户发送通知。

# spring - spring DAOSupport有什么优势

> ID：13853708
> 
> 赞同：3
> 
> 时间：2012-12-13T05:45:28.010
> 
> 标签：spring, templates, dao

我阅读了 Spring 框架的 DAOSupport 类。但是我无法理解这些 DAOSuport 类的优点。在 DAOSupport 类中，我们调用 getXXXTemplate() 方法来获取特定的模板对象，然后将其进一步用于 DB 访问。

即使不扩展 DAOSupport，我们也可以在我们的类中注入 XXXTemplate。其余的事情将保持不变。

那么扩展 DAOSupport 类有什么好处呢？

编辑：- 添加示例类扩展了 spring 的 SimpleJdbcDaoSupport

```
public class JdbcDao extends SimpleJdbcDaoSupport {
    public int create(Bb obj) {        
       getSimpleJdbcTemplate().update("insert into ..... ")  //insert query
    } 
```

此类的 Bean 可以定义为：-

```
<bean id="jdbcDao" class="example.dao.support.JdbcDao">  
  <property name="dataSource"><ref local="dataSource"/></property>
</bean> 
```

我们可以在不扩展 SimpleJdbcDaoSupport 的情况下创建一个自定义类，该类将具有 JdbcTemplate 类型的属性

```
public class MyDAO {
    public myJdbcTemplate; // ant its getter and setter
    public int create(Bb obj) {        
       getMyJdbcTemplate().update("insert into ..... ")  //insert query
    } 
```

它的 bean 将被定义为：-

```
<bean id="jdbcDao" class="MyDAO">  
  <property name="myJdbcTemplate"><ref local="jdbcTemplateBean"/></property>
</bean> 
```

正如你所看到的，两个类都做同样的事情。在扩展 SimpleJdbcDaoSupport 时，我们正在注入 DataSource，如果没有它，我们将直接注入 jdbcTemplate bean。而已。没有更多的区别。因此，我看不出如此多地使用 DAOSupport 类有什么好处。DAOSupport 类提供的任何附加功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:56:22.263

当您使用 HibernateDAOSupport 时，您可以看到不同之处。1\. 在 applicationContext 上配置事务以优化应用程序的性能：

> 选择：只读创建/更新：读取和写入。

1.  您只使用一个会话（使用 getHibernateTemplate() 和 sessionFactory）
2.  当我们更新数据库上的一些数据时，我们只会将修改与在 HibernateDAOSupport 上实现的方法合并。
3.  DAOSupport 上已经实现了许多方法，我们可以根据需要使用它。

# oracle - 如何在日语中添加 Oracle 列注释？

> ID：13853709
> 
> 赞同：2
> 
> 时间：2012-12-13T05:45:36.423
> 
> 标签：oracle, comments

我正在尝试在 Oracle 的表列中添加注释，但它们不会以我输入的内容以日语显示。（只是 （'）

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T15:10:37.207

确保为添加注释的程序都设置了 NLS_LANG 环境变量，以正确显示注释。

例如。如果您从 Windows 命令提示符开始：

```
SET NLS_LANG=JAPANESE_JAPAN.JA16SJIS 
```

并在 SQL Developer 中（如果您使用它来查看评论）转到 Tools > Preferences > Database > NLS 并进行相应调整。

# javascript - Javascript：onclick调用时对象中的函数未定义

> ID：13853711
> 
> 赞同：3
> 
> 时间：2012-12-13T05:45:42.540
> 
> 标签：javascript, jquery

我在这里尝试一些代码，

```
var cat={
    col:"Red",
    getCol:function(){
        document.writeln(this.col);
    }
}

function getCol(){
    document.writeln(cat.col);
}

$(function(){ 
    $("#button1").click(cat.getCol);
    $("#button2").click(getCol);
}) 
```

但是我得到`undefined`了button1，button2得到了“红色”。有人能告诉我为什么吗？

如果我把它改成`$("#button1").click(cat.getCol());`，我得到了我需要的“红色”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:51:49.450

首先

```
$("#button1").click(cat.getCol); 
```

给你，因为这东西运行时没有使用`undefined`的主体。如果您担心跨浏览器兼容性，我建议您使用这里或其他几个变体。对于将“方法”设置为事件处理程序并确保其保持绑定到封闭对象的问题，有许多已发布的解决方案。`cat.getCol``this``cat``Function.prototype.bind``this`

下一个

```
$("#button2").click(getCol); 
```

工作正常，因为直接`getCol`使用`cat`。

最后

```
$("#button1").click(cat.getCol()); 
```

大错特错。该表达式`cat.getCol()`是一个返回的*调用*`undefined`。这不是为单击处理程序设置的好值。您刚刚看到 document.write 发生，但不是响应点击。

**附录**

[使用绑定的现场演示](http://jsfiddle.net/YxzRT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:09:18.200

通常在 JS 中，`this`指的是函数的所有者。因此，在这两种情况下，当调用该函数时，`this`都会解析为已单击的（jQuery 对象）元素。在第一种情况下，`this`is not 'cat'，所以 col 没有定义。因此，它给出了未定义的。在第二种情况下，没有这个，所以 cat.col 解析为 Red。

I think you need to do some reading about JS functions, this, anonymous functions .. [http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/) is a good place to start.

This on MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

# c++ - 使用 unsigned char 和 string 作为函数声明

> ID：13853713
> 
> 赞同：2
> 
> 时间：2012-12-13T05:46:01.210
> 
> 标签：c++, unsigned-char

我需要编写一个名为 bitstring 的函数，它采用在此函数中创建的无符号字符：

```
size_t bs2n(string s)
{
  assert (s.size() > 0);
  if (s.size() == 1) 
    return s[0]-'0';
  else {
    string smaller = s.substr(0,s.size()-1); 
    return 2 * bs2n(smaller) + s[s.size()-1] - '0';
  }
} 
```

此函数占用 8 位并返回 0-255 之间的无符号字符

我需要能够将其转换回来，但是在写下函数参数和类的第一行时遇到了问题。

我所拥有的是：

```
string unsignedchar bitstring(unsigned char) 
```

我认为应该是：

```
string unsigned char bitstring(unsigned char val) 
```

这会更有意义，但仍然没有意义为什么我需要第一个无符号字符......

我应该如何编写函数的第一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:50:52.020

参数不是您的问题，而是您的函数声明。您向函数声明了两种返回类型

```
string unsigned char bitstring(unsigned char val) 
```

该函数返回一个字符串...等待不...一个无符号字符...您只需要定义一个返回类型，例如省略字符串。你想要完成的是一个无符号字符数组，因此需要字符返回一个指向字符的指针。

```
void bitstring(unsigned char val, unsigned char* array) //write to array 
```

*   请注意，尽管返回数组是一种不好的做法并且通常会失败，但如果您在函数中分配数组并返回对它的引用，则引用将失败，因为数组将在函数结束时解构。更好的解决方案是将要读取的数组作为参数传递给函数，然后写入该数组。

# jquery - 如何在 jquery 中执行删除

> ID：13853716
> 
> 赞同：0
> 
> 时间：2012-12-13T05:46:06.827
> 
> 标签：jquery

我有两个小改动要做。

```
 var selectedOption = jQuery("#modulesDrop option:selected");
            selectedOption.appendTo($("#moduleselect"));
            $('option.red').appendTo($("#moduleselect")); 
```

1.  我怎样才能`selectedOption`从`#moduleDrop`and中删除`#moduleselect`.

2.  我有一个类`$('option.red')`，我只希望它`#moduleselect`在内容`#moduleselect`为空的情况下附加。

`#moduleSelect`是一个多选框，而“#modulesDrop”是一个下拉菜单。

下面是一个jsfiddle

[http://jsfiddle.net/DfSGE/6/](http://jsfiddle.net/DfSGE/6/)

只需按照以下步骤使用小提琴：

1.  您将看到一个下拉菜单，从下拉菜单中选择一门课程。
2.  您将从下拉菜单中看到所选课程的详细信息。单击“删除模块”提交按钮。
3.  确认确认框。没有发生在 mo 但我希望从下拉菜单和选择框中删除下拉菜单中的选定模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:53:38.967

“*我怎样才能从#moduleDrop 和#moduleselect 中删除selectedOption。* ”

```
var selectedOption = $("#modulesDrop").val();
$("#modulesDrop option[value='" + selectedOption + "']").remove();
$("#moduleselect option[value='" + selectedOption + "']").remove();​ 
```

“*我有一个类 $('option.red')，如果#moduleselect 中的内容为空，我只希望它附加到#moduleselect。* ”

```
$('#moduleselect:not(:has(option))').addClass('red'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:11:22.997

使用 jquery .remove()

这将从 DOM 中删除选定的元素。

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

# java - java中字符串到字节的转换

> ID：13853717
> 
> 赞同：0
> 
> 时间：2012-12-13T05:46:17.340
> 
> 标签：java, parsing, byte

我是java中的新手……我正在尝试使用文件输入流读取文本文件。我逐行读取文本并设置为字符串..现在我想将字符串转换为字节。但我得到一个数字格式异常..请帮我解决这个问题。

```
FileInputStream fstream = new FileInputStream("C:/Users/data.txt");

          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(new InputStreamReader(in));
          byte[] bytes = null;
          String str;
          int i=0;

          while ((str = br.readLine()) != null) 
          {

              bytes[i] = Byte.parseByte(str,16);
              i++;
          }

          in.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:48:43.170

尝试

```
byte[] bytes = str.getBytes(); 
```

代替

```
bytes[i] = Byte.parseByte(str,16); 
```

我还建议为 InputStreamReader 指定编码：

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

请记住，Java 字符串长度和内部表示与 C 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:50:15.017

您可以简单地使用 String 类中的 getBytes() 方法：

```
str.getBytes() 
```

或者，如果您不使用默认字符集：

```
str.getBytes(myCharSet); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:57:29.003

您可以使用，

**str.getBytes()**将字符串转换为字节数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T06:00:19.203

你可以试试这段代码。

```
fstream = new FileInputStream("C:/Users/s.hussain/Desktop/test3.txt");

          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(new InputStreamReader(in));
          byte[] bytes = null;
          String str;
          int i=0;

          while ((str = br.readLine()) != null) 
          {

              bytes  = str.getBytes();
              i++;
              System.out.println(bytes.length);
          }

          in.close(); 
```

# jquery - Jquery中区分大小写的文本替换

> ID：13853722
> 
> 赞同：2
> 
> 时间：2012-12-13T05:46:37.730
> 
> 标签：jquery

> **可能重复：**
> [Jquery：查找文本并替换](https://stackoverflow.com/questions/8146648/jquery-find-text-and-replace)

我正在使用带有 html 的最新 jQuery 库。我想使用 jQuery 将整个 html 文件中所有出现的文本“Cat”替换为“Man”，确切地说是只**区分大小写**的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:06:19.013

唔..

jQuery版本：

```
$('body').html($('body').html().replace(/\bCat\b/g, 'Man')); 
```

纯 JavaScript 版本：

```
document.body.innerHTML = document.body.innerHTML.replace(/\bCat\b/g, 'Man'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:33:31.020

试试这个来替换`<title>`标签中的单词，即使你说整个 html 文件也包括在内，

```
$(document).ready(function(){
 $("*").each(function () {
    if ($(this).children().length == 0) {
        $(this).text($(this).text().replace('Cat','Man'));
    }
 });
}); 
```

# image - 我可以为 WebGL 纹理使用每通道 16 位吗

> ID：13853725
> 
> 赞同：3
> 
> 时间：2012-12-13T05:46:53.973
> 
> 标签：image, html, png, webgl, color-depth

我可以在 WebGL 中使用每通道 16 位（即 RGB 为 48 位）图像数据吗？我可以使用 PNG 作为输入格式吗？如果我这样做，那是基于某些官方标准还是取决于可能会在其他浏览器上中断的特定于浏览器的扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:45:41.130

Core WebGL 不支持每个颜色通道超过 8 位。但是，该`OES_texture_float`扩展程序得到了广泛支持，因此这可能是最好的前进方式。（好吧，只要你远离移动设备，无论如何。）

您可以在任何浏览器上加载 48 位 PNG，但在您访问它之前它会被转换为 24 位。您必须使用 JavaScript 和 XMLHttpRequest 手动加载图像数据，然后在调用`texImage2D`.

# django - 如何告诉 memcached 忽略 django 管理页面？

> ID：13853726
> 
> 赞同：1
> 
> 时间：2012-12-13T05:47:05.570
> 
> 标签：django, nginx, memcached, gunicorn

我在 django 前面运行 memcached，而我的代码中没有任何显式配置。即无非

```
MIDDLEWARE_CLASSES = (
    'django.middleware.cache.UpdateCacheMiddleware',
    ...
    'django.middleware.cache.FetchFromCacheMiddleware',
    ) 
```

和

```
CACHE_BACKEND = 'memcached://127.0.0.1:11211/' 
```

在我的`settings.py`. 这很好用，事实上它非常好，它正在缓存我的管理页面，让我无法在缓存重新获取数据之前调节网站上的实时操作。是否有一个正则表达式我可以放在某个地方让 memcached 知道不要管我的管理页面？（我也在使用 nginx 和 gunicorn）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:01:07.110

您可以编写自己的中间件类或从 django 提供的类扩展。

在设置文件中指定一个 url 字典：

```
CACHE_IGNORE_REGEXPS = (
) 
```

编写一个中间件类：

```
from django.core.cache import cache
import re
import settings

class MyMemCacheMiddleWare:
    def process_response(self, request, response):
        cacheIt = True
        theUrl = request.get_full_path()

        # if it's a GET then store it in the cache:
        if request.method != 'GET':
            cacheIt = False

        # loop on our CACHE_INGORE_REGEXPS and ignore
        # certain urls.
        for exp in settings.CACHE_IGNORE_REGEXPS:
            if re.match(exp,theUrl):
                cacheIt = False

        if cacheIt:
            key = '%s-%s' % (settings.CACHE_KEY_PREFIX,theUrl)
            cache.set(key,response.content)     

        return response 
```

[Alex Holt](http://soyrex.com/)有一个关于 django、memcached 和 Nginx 的非常简洁的[教程](http://soyrex.com/articles/django-nginx-memcached/)，也许你想通读一遍以获得更好的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T03:09:18.927

我有同样的问题，我想出了另一个最小的解决方案。

首先，创建自己的继承原始的中间件`UpdateCacheMiddleware`：

```
#! /usr/bin/env python
from django.conf import settings
from django.middleware.cache import UpdateCacheMiddleware

class MyUpdateCacheMiddleware(UpdateCacheMiddleware):
    def process_response(self, request, response):
        full_path = request.get_full_path()
        # loop on our CACHE_MIDDLEWARE_IGNORE to ignore certain urls
        for ignore in settings.CACHE_MIDDLEWARE_IGNORE:
            if ignore.match(full_path):
                return response
        # ignore patterns missed, pass it to the original middleware
        return super(MyUpdateCacheMiddleware, self).process_response(
            request, response
        ) 
```

然后在您的设置中创建一个忽略正则表达式列表，类似于：

```
CACHE_MIDDLEWARE_IGNORE = (
    re.compile(r'^/admin/'),
) 
```

现在你需要做的就是用`UpdateCacheMiddleware`你创建的替换你的：

```
MIDDLEWARE_CLASSES = (
    'myapp.lib.middlewares.MyUpdateCacheMiddleware',
    # ...
    'django.middleware.cache.FetchFromCacheMiddleware',
) 
```

干杯。

# windows-phone-7 - 如何在 windows phone 应用程序中从弹出页面移动到其他页面

> ID：13853727
> 
> 赞同：0
> 
> 时间：2012-12-13T05:47:18.877
> 
> 标签：windows-phone-7

我正在开发一个小型游戏类型的应用程序，当用户赢得游戏时，他将获得弹出窗口，为此我编写了以下代码。

```
 public void stoptimer()
 {

        if ((Convert.ToString(b1.Content) == "1") && (Convert.ToString(b2.Content) == "2") && (Convert.ToString(b3.Content) == "3") && (Convert.ToString(b4.Content) == "4") && (Convert.ToString(b5.Content) == "5") && (Convert.ToString(b6.Content) == "6") && (Convert.ToString(b7.Content) == "7") && (Convert.ToString(b8.Content) == "8") && (Convert.ToString(b9.Content) == "9") && (Convert.ToString(b10.Content) == "10") && (Convert.ToString(b11.Content) == "11") && (Convert.ToString(b12.Content) == "12") && (Convert.ToString(b13.Content) == "13") && (Convert.ToString(b14.Content) == "14") )

        {
            newTimer.Stop();
            time = txtClock.Text;
            //textBox2.Text = txtClock.Text;
            Popup buyNowScreen;
            buyNowScreen = new Popup();
            buyNowScreen.Child =
                new popupscreen
                    ();
            buyNowScreen.IsOpen = true;
            buyNowScreen.VerticalOffset = 100;
            buyNowScreen.HorizontalOffset = 25;

        }
      } 
```

我编写了以下代码用于从弹出页面导航到其他页面，但它无法获取 NullReferenceException。

```
 private void button3_Click(object sender, RoutedEventArgs e)
    {

        ClosePopup();
        NavigationService.Navigate(new Uri("/Menu.xaml", UriKind.Relative));
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        ClosePopup();

        NavigationService.Navigate(new Uri("/NumericEasy.xaml", UriKind.Relative));

    }

    private void ClosePopup()
    {
        Popup buyPop = this.Parent as Popup;
        if (buyPop.IsOpen)
        {
            buyPop.IsOpen = false;

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:40:58.323

导航服务在页面之间工作，你不能使用这么简单的弹出窗口。该服务找不到，要使用哪个页面，这就是它抛出异常的原因。

要解决您的问题，您应该这样做：

**弹出类**

1）在您的弹出构造函数中，您应该获得 PhoneApplicationPage 对象。

```
 private PhoneApplicationPage _page;

      public SomePopup(PhoneApplicationPage page)
            {
             _page = page; 
```

2）您应该为点击事件创建一个新类型。

```
 public delegate void NavigateHandler(object sender, EventArgs e, PhoneApplicationPage page);

        public event NavigateHandler NavigateFromPopup; 
```

3）在您的 button_click 事件中，您应该调用它：

```
public void ButtonX_Click(object sender, RoutedEventArgs e)
        {
               if (NavigateFromPopup!= null)
                NavigateFromPopup(this, EventArgs.Empty, _page);
        } 
```

* * *

**您的页面类**

4）在您的页面上，当您创建一个弹出窗口时，您应该添加此事件处理程序：

```
 SomePopup p = new SomePopup(this);
            p.NavigateFromPopup +=new SomePopup.NavigateHandler(p_NavigateFromPopup); 
```

5）最后，在你的页面上，你应该写下这个事件：

```
private void p_NavigateFromPopup(object sender, EventArgs e, PhoneApplicationPage page)
        {
            page.NavigationService.Navigate(new Uri("...", UriKind.RelativeOrAbsolute));
        } 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:01:38.230

这是为弹出页面的控件提供事件的过程。

```
 Popup buyNowScreen=new Popup();

    popupscreen popup1=new popscreen();
    buyNowScreen.Child =popup1;
    buyNowScreen.isOpen=true;
    popup1.button1.click+= new RoutedEventHandler(btn_playagain_click);
    private void btn_playagain_click(object sender, EventArgs e)
     {
        p.IsOpen = false;
        NavigationService.Navigate(new Uri("/NumericEasy.xaml?Refresh=true", UriKind.Relative));
    } 
```

# java - Mac 上的 Java 7 和 JavaVM.framework

> ID：13853728
> 
> 赞同：7
> 
> 时间：2012-12-13T05:47:22.410
> 
> 标签：java, macos, java-native-interface, java-7

我在 mac 上玩了一下 Java 7 update 9，发现了一件有趣的事情。

我刚刚运行了一个简单的 Java 程序`JFrame`，并使用`lldb`. 然后我检查了这个 Java 程序加载的库，我看到了：

`"/System/Library/Frameworks/JavaVM.framework/JavaVM"`在里面。

所以我有两个问题：

1.  这个 JavaVM 为 Java 7 做了什么？我认为 mac 上的 Java 7 是自洽的，就像它在 Windows 和 Linux 上的相应版本一样。通过使用“nm”，我可以看到这个 JavaVM 定义了许多函数，例如 JNI_CreateJavaVM，它也在 libjvm.dylib 中定义。

2.  对于 Java 7 的 JNI 库，我应该链接到什么？还是`JavaVM.framework`？我可以链接到位于下面的库吗

    /Library/Java/JavaVirualMachine/jdk.1.7.0 直接。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T00:44:05.190

对于第一部分，JavaVM 指向 Mac JavaVM (1.6)。仔细查看 Info.plist 文件，Mac Java 似乎支持 JNI（除其他外），而 Oracle Java 仅支持 CommandLine。看起来你不能在 Mac OS X 上链接到 1.7。还有很多相关的问题。

要查找支持 JNI 的 JVM，请执行以下操作：

```
/usr/libexec/java_home -t JNI 
```

这可能应该返回 1.6.0 JDK。您可以使用参数运行它`-V`以获取可用 JVM 的完整列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T02:28:48.927

Mac 上的 Oracle JDK 被宣传为与其他地方的 Oracle JDK 一样。它有命令、头文件和库。您应该能够像在其他地方一样使用 JDK 的内容。我们通常创建和使用通过 LoadLibrary 加载的 JNI 库；我无法报告调用界面的个人体验。

# asp.net-mvc-3 - 如何在网址栏中提供重复的名称

> ID：13853729
> 
> 赞同：0
> 
> 时间：2012-12-13T05:47:24.827
> 
> 标签：asp.net-mvc-3, url, c#-4.0, asp.net-mvc-routing

如何复制网址栏中的名称。例如我有`products controller`和`index method`。现在在我的项目中，我正在运行`localhost:89733/Products/Index`。但`Products/Index`与其想给别的什么名字跑一样`action method`。我怎样才能做到这一点。我的意思是我不想将我的控制器信息泄露给其他人。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:04:43.757

您可以配置自定义路由：

```
routes.MapRoute(
    "ProductsRoute",
    "mycustomproductsname/{id}",
    new { controller = "Products", action = "Index", id = UrlParameter.Optional }
); 
```

现在，当您导航到 时`mycustomproductsname/123`，将执行控制器的`Index`操作`Products`并将 123 作为`id`参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:04:44.300

*我希望路由可以解决 Global.asax 文件应用启动事件中的目的*

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RegisterRoutes(RouteTable.Routes);

}   

public void RegisterRoutes(RouteCollection routes)
{
    //Treeview routing
    routes.MapPageRoute("Home", "User/Dashboard", "~/Products/Index");
    routes.MapPageRoute("SearchCustomer", "User/Search-Customer", "~/Products/SearchCustomer");

} 
```

我希望你在问这个，它可以帮助你

# android - 如何保持 mp.isPlaying() android 媒体播放器的状态？

> ID：13853730
> 
> 赞同：2
> 
> 时间：2012-12-13T05:47:24.927
> 
> 标签：android, media-player, android-mediaplayer

嗨朋友们，我对 Android 媒体播放器有疑问。它正在工作，但是当我改变屏幕方向时，失去了对媒体播放器的控制，最初我可以暂停和停止歌曲，但是一旦屏幕方向改变，歌曲就会继续，但我无法暂停或停止等。这是我尝试过的代码（我将歌曲放在原始文件夹中）

```
setContentView(R.layout.activity_medial_player);
        mp = new MediaPlayer();
playPause = (Button)findViewById(R.id.buttonPlay);
        playPause.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(mp.isPlaying()) {
                    if(mp!=null) {
                        System.out.println("*******");
                        mp.pause();
                    }
                } else {
                    if(mp!=null) {
                        System.out.println("#######");
                        mp.start();
                    }
                }
            }
        });

startSong= (Button)findViewById(R.id.buttonStart);
        pause.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
//              mp.pause();
                playSong();
            }
        });

stop = (Button)findViewById(R.id.buttonStop);
        stop.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mp.stop();
            }
        });
}

public void playSong() {
        try {
            mp.reset();
            mp = MediaPlayer.create(MedialPlayer.this, resId);
            mp.start();
        } catch(Exception e) {

        }
    } 
```

在清单中我使用：

```
android:configChanges="orientation|keyboard|keyboardHidden" 
```

任何帮助请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:56:06.093

您的 API 级别是多少？

如果您的应用程序以 API 级别 13 或更高级别为目标（由 minSdkVersion 和 targetSdkVersion 属性声明），那么您还应该声明“ **screenSize** ”配置，因为它也会在设备在纵向和横向之间切换时发生变化。

```
android:configChanges="orientation|screenSize|keyboard|keyboardHidden" 
```

来源：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T05:54:27.727

```
 public void Play(View v){
        final MediaPlayer md = MediaPlayer.create(this,R.raw.test_cbr);

    Button btn = (Button)findViewById(R.id.button2);
    btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v){ 
            if(md.isPlaying()) 
                    md.pause();

            else 
                    md.start();
        }

    }
    );
} 
```

# google-app-engine - 如何在 App Engine 数据存储区中存储键值对？

> ID：13853734
> 
> 赞同：1
> 
> 时间：2012-12-13T05:47:43.213
> 
> 标签：google-app-engine

我有一个具有 2 个属性的实体：*UserId*（字符串）和*RSSSubscriptions*（字符串）。此类的实例将存储在 App Engine Datastore 中。

其中*RSSSubscriptions*应该是一个键值对，例如`"Site1: Feed1", "Site2: Feed2".`

由于像 Hashmaps 这样的数据类型是不可持久的，我不得不将这些数据保存为字符串格式。目前我已将其存储为 JSONArray 格式的字符串类型。说，`"[{"Site1: Feed1"}, {"Site2: Feed2"}]"`。

我的客户端将是一个 Android 应用程序。所以我应该在客户端将此字符串解析为 JSON 数组。但我认为每次用户添加新订阅时，创建一个 JSON 格式的字符串并将其附加到现有字符串是一个坏主意。有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:28:41.673

您可以使用ndb 出于该特定原因支持的[JSONProperty 。](https://developers.google.com/appengine/docs/python/ndb/properties)在我看来，将 Json 存储为字符串并来回解析它是一个“毛茸茸”的解决方案。您必须非常小心以保证有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:36:48.030

正确答案取决于几个因素，其中预期的对数是最重要的。重要的是要记住，将配对存储在通过查询访问的实体中会产生大量成本。进行查询有很多操作成本，并且会占用大量 CPU 时间。将此与使用由用户 ID 键入的单个记录并将 JSON 存储在 TextProperty 中进行比较。这是一个很小的操作成本和 cpu 时间，可能比查询少 10 倍。

在决定采用技术上更简洁的查询实体方法时，请考虑这些因素。我自己，我总是在 TextProperty 中对“数千对”卷中的任何内容使用序列化字符串，除非删除率非常高（即使这样，字符串方法可能会更好）。考虑到 GAE 的高资源成本，使用查询通常是 GAE 的最后设计选择。

# mysql - MYSql 5.5 升级问题：所有表都消失了

> ID：13853739
> 
> 赞同：0
> 
> 时间：2012-12-13T05:48:05.783
> 
> 标签：mysql

我在 Windows 2008 上安装了 MySql 5.1.13 数据库，然后在一个晴朗的日子里，我备份了我的服务器 [300 多个数据库]。卸载旧版本并安装 MYSql 5.5 版本。现在我将数据文件夹复制回 Mysql 5.5 数据位置并获得了所有数据库，但后来我意识到虽然确实存在大约 250 个数据库，但它们没有在 PHPmyadmin 中显示表。我尝试在其中几个数据库上运行“显示表”，并且表名确实显示[以及 tablename.frm 文件退出]。

更不用说所有 Innodb 的表都只缺少一个。怎样才能轻松地让他们回来。我有每个数据库的备份，但运行 250 个 SQL 文件并不容易 :)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:38:55.470

您的 innodb 引擎可以有自己的单独文件夹来存储数据文件。根据 MySQL 手册，InnoDB 默认在 MySQL 数据目录中创建表空间文件，请参见：[http](http://dev.mysql.com/doc/refman/5.0/en/innodb-configuration.html) ://dev.mysql.com/doc/refman/5.0/en/innodb-configuration.html 。

通常，您会将表拆分到不同的驱动器以提高性能，因此您可能会遇到 InnoDB 表配置为放置在另一个驱动器或文件夹上的情况。如果有，请检查之前的 MySQL 配置文件并检查以下行：innodb_data_home_dir = /ibdata

这将指示文件所在的位置。我还没有尝试过，但是如果是这种情况，您应该能够将当前配置指向旧的 innodb 位置。如果这不起作用，我认为恢复将是你最好的选择。

祝你好运！

# asp.net-mvc - 在 razor 视图中添加一个空列表框 - @Html.ListBox("myLIstBox") 抛出错误

> ID：13853741
> 
> 赞同：2
> 
> 时间：2012-12-13T05:48:19.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, listbox

我正在尝试将一个空的 ListBox 添加到我的 Razor 视图页面以存储运行时值。但它给了我一个错误信息说`There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'myListBox'`。我知道有这样的视图数据。但是，当我对文本框执行相同操作时，它可以工作。

```
 @Html.TextBox("myTextBox")//works alright, displays a textbox 
  @Html.ListBox("myListBox") // gives error 
```

如何显示一个空的列表框以及为什么上述方法适用于文本框但适用于列表框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T06:01:35.277

刚刚找到了一种解决方法，通过传递一个空的 ListBox 创建一个空的 ListBox，`SelectList`但仍然想知道为什么原来的 ListBox 不起作用。

`@Html.ListBox("myListBox", new SelectList(new[] {""}));`

# regex - 在 Notepad++ 中使用 Regex 快速将代码添加到 Java 方法中

> ID：13853743
> 
> 赞同：0
> 
> 时间：2012-12-13T05:48:30.240
> 
> 标签：regex, eclipse, notepad++

我正在寻找正则表达式，它可以让我使用搜索替换使用 Notepad++ 向文件中的所有 java 方法添加 2 行代码

**前：**

> ```
>  public void startProcessing() {
>       ..............
>       ..............
>                } 
> ```

**后：**

> 公共无效开始处理（）{
> 
> ```
>  logger.info( "Entering into startProcessing" );
>   ..............
>   ..............
>   logger.info( "Exiting startProcessing" );
>            } 
> ```

这可能吗，如果是的话，任何人都可以帮助我编写代码......或指导我以任何其他可能的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:13:05.950

从“坏消息”开始，除非您有更好的指纹来匹配，否则您将无法插入“退出”行。使用您当前的代码示例，您可以匹配的最好的是`}`，并且作为一个疯狂的猜测，您的代码中可能有很多右花括号。

插入“起始”行是可行的，但稳健性取决于您的输入。

如果您*总是*希望替换与示例代码中相同的行（或相同的格式但不同的函数名称），您可以在 Find+Replace 菜单中执行以下操作：

寻找：

```
public void startProcessing() { 
```

代替：

```
public void startProcessing() {\n\tlogger.info("Entering into startProcessing"); 
```

搜索模式：`Extended`

如果您想用非硬编码的函数名称*动态地进行替换，您可以尝试以下操作：*

寻找：

```
(public void )([a-zA-Z0-9_$]+)(.*) 
```

代替：

```
\1\2\3\n\tlogger.info\("Entering into \2"\); 
```

搜索模式：`Regular Expression`

这种“动态”方法将需要您搜索的任何方法都以相同的格式声明，`public void functionName...`. 我已将其用作`[a-zA-Z0-9_$]`函数名称的字符集，但您可以根据需要对其进行调整。

**UPDATE**（忽略 get/set 方法）
要忽略 get/set 方法，例如`getFieldValueUnits()`or `setFieldValueUnits(int val)`，您可以使用以下`Find`值（与`Replace`上述相同）：

```
(public void )(?!get|set)([a-zA-Z0-9_$]+)(.*) 
```

这将匹配所有不以`get`or开头的函数`set`（并且声明为`public void`，如上所述）。

# mobile - 如何配置数据控制以访问安全的 Web 服务？

> ID：13853751
> 
> 赞同：0
> 
> 时间：2012-12-13T05:49:30.050
> 
> 标签：mobile, oracle-adf

谁能告诉我如何配置数据控制以访问安全的网络服务？

在我的应用程序中，我正在执行以下步骤，

1) 使用安全的网络服务 wsdl 直接生成数据控件。

2) 从数据控件中拖动方法(getEmployee(Object)) 并将其放到 UI(MethodExecution.amx) 中。

3）创建另一个页面（LoginPage.amx）用于输入用户名和密码。

4) 当用户在 LoginPage.amx 中输入详细信息并单击提交时。这些细节需要注入到 webservice 请求中以调用“MethodExecution.amx”中的“Secured webservice”方法(getEmployee(Object))。

我在谷歌中搜索，只有一个与此相关的链接，andrejus 的链接“ [http://andrejusb.blogspot.be/2012/11/adf-mobile-secured-web-service-access.html](http://andrejusb.blogspot.be/2012/11/adf-mobile-secured-web-service-access.html) ”，但是从这个示例我不明白他们如何将用户名/密码注入 web 服务请求，使用`adfCredentialstore`?? 有什么用，为什么我们需要使用安全策略？

谁能告诉我如何在我的移动应用程序中实现此功能（调用安全的 Web 服务方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:54:41.007

这里有一个分步视频：[https ://blogs.oracle.com/shay/entry/accessing_secure_web_services_from](https://blogs.oracle.com/shay/entry/accessing_secure_web_services_from)

请注意，该演示使用“远程”登录服务器，而您正在描述本地登录。

# android - 如何从android应用程序调用自定义类

> ID：13853752
> 
> 赞同：1
> 
> 时间：2012-12-13T05:49:32.617
> 
> 标签：android

我在 android 框架中创建了一个新类`CustomCall`。现在如何从 android 应用程序调用它？因为它没有出现在`android sdk`我修改之后。我应该更新 SDK 吗？如果是，请说明如何更新。

谢谢

# django - 在 Django 中，当模型是多对多关系的一部分时，primary_key 选项是否被忽略？

> ID：13853753
> 
> 赞同：0
> 
> 时间：2012-12-13T05:49:36.617
> 
> 标签：django, django-models, django-queryset

我有两个模型：

```
class StateTax(models.Model):
    name = models.CharField(max_length=256)
    abbr = models.CharField(max_length=64, primary_key=True)
    rate = models.IntegerField(default=0)

class Account(models.Model):
    name = models.CharField(max_length=32)
    tax_regions = models.ManyToManyField(SalesTaxRegion, blank=True, null=True, related_name="accounts") 
```

然而，在 syncdb 期间创建的 SQL Django 似乎忽略了 primary_key 选项。例如：

```
CREATE TABLE `airship_salestaxregion` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `name` varchar(256) NOT NULL,
    `abbr` varchar(64) NOT NULL,
    `rate` integer NOT NULL
)
;
CREATE TABLE `airship_account_tax_regions` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `account_id` integer NOT NULL,
    `salestaxregion_id` integer NOT NULL,
    UNIQUE (`account_id`, `salestaxregion_id`)
)
; 
```

（注意第一个表中还有一个 ID 列，关系表引用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:49:15.880

正如评论中所说，你把你的表弄混了，你给了我们 StateTax 的 Python 代码，而不是 SalesTaxRegion。

我已经使用 Django 1.4 和 Postgres 9.2 测试了您的 StateTax 代码，我得到以下结果 -

```
-- DROP TABLE testing_statetax;

CREATE TABLE testing_statetax
(
  name character varying(256) NOT NULL,
  abbr character varying(64) NOT NULL,
  rate integer NOT NULL,
  CONSTRAINT testing_statetax_pkey PRIMARY KEY (abbr)
) 
```

没有添加额外的 id 字段。

# selenium - Selenium - 处理弹出窗口

> ID：13853756
> 
> 赞同：1
> 
> 时间：2012-12-13T05:50:11.187
> 
> 标签：selenium, selenium-ide

> **可能重复：**
> [如何使用 selenium IDE 记录弹出窗口](https://stackoverflow.com/questions/2092149/how-to-record-popup-windows-with-selenium-ide)

我正在使用 Selenium 2 测试工具的初学者指南书学习 Selenium。我在第 1 章并试图处理弹出窗口。

我使用 IDE 记录了这段代码。我正在使用这个页面 - [http://book.theautomatedtester.co.uk/chapter1](http://book.theautomatedtester.co.uk/chapter1)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://book.theautomatedtester.co.uk/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
    <td>open</td>
    <td>/chapter1</td>
    <td></td>
</tr>
<tr>
    <td>verifyText</td>
    <td>id=divontheleft</td>
    <td>Assert that this text is on the page</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>xpath=(//div[@id='multiplewindow'])[2]</td>
    <td>2000</td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>name=popupwindow2</td>
    <td></td>
</tr>
<tr>
    <td>verifyText</td>
    <td>id=popuptext</td>
    <td>Text within the pop up window</td>
</tr>
<tr>
    <td>click</td>
    <td>id=closepopup</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>null</td>
    <td></td>
</tr>
<tr>
    <td>verifyElementPresent</td>
    <td>verifybutton</td>
    <td></td>
</tr>

</tbody></table>
</body>
</html> 
```

问题是，它在 waitForPopUp 上超时。它根本不会打开弹出窗口。

请问有什么帮助吗？

# c# - 在全局变量的注释中设置 DataFormatString

> ID：13853761
> 
> 赞同：0
> 
> 时间：2012-12-13T05:50:28.017
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations

假设我有如下注释

```
[DisplayFormat(DataFormatString = "{0:#.00#}", ApplyFormatInEditMode = true)] 
```

它工作得很好。但是假设我想根据用户选择的某些应用程序设置实时替换 DataFormatString，即有时像 {0:#.00#} 有时是 {0:#.000#}。有没有办法做到这一点？

我尝试将格式字符串存储在全局变量中，但它给了我以下错误。

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

如果我将全局变量设为常量，它会起作用，但目的就失去了。关于变通的任何建议？

基本上，我想为用户提供一个选项来通用设置小数位，而不必在每个视图/控制器的基础上实现该功能。

我知道我可以使用 NumberFormat.CurrencyDecimalDigits 来放置文化。但这将忽略小数点后的零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:53:02.100

有一个很好的库叫做[MvcExtensions](http://nuget.org/packages/MvcExtensions)，它的一个特点是流畅的元数据配置。它允许您流畅地构建模型元数据，而不是 DataAnnotations。使用这个库，你可以完成你的任务：

```
Configure(x => x.Payment)
  .Format(() => ConfigurationManager.DataFormatString) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:54:02.427

属性需要常量字符串，你不能改变它。此外，此属性不提供提供资源名称的能力。所以，我认为最好的方法是为这个属性创建[DisplayTemplate](http://digitaltoolfactory.net/blog/2012/04/how-to-use-ui-hints-and-display-templates-in-asp-net-mvc-3/)和 EditorTemplate。

```
[UIHint("Bar")]
public decimal Bar { get; set; } 
```

在 Bar 模板中，您可以根据用户选择的一些应用程序设置更改格式：

```
@model decimal

@Model.ToString(HttpContext.Current.Session["format"].ToString()) 
```

# select - Capybara nested_form Poltergeist 选择动作

> ID：13853764
> 
> 赞同：5
> 
> 时间：2012-12-13T05:50:47.363
> 
> 标签：select, rspec, capybara, nested-forms, poltergeist

我正在使用奇妙的[nested_form](https://github.com/ryanb/nested_form) gem 来处理我的嵌套属性，它工作得很好。

当我尝试使用 Capybara/rspec 和 Poltergeist 作为驱动程序在我的嵌套表单的**选择字段上运行一些集成测试时，就会出现我的问题。**

我的测试如下。

```
click_on "Add Field"    
find('input:last').set "Employee Code"   
find('select:last').select "Word" 
```

我在 rspec 中收到以下错误

```
Failure/Error: find('select:last').select "Word"
 Capybara::Poltergeist::ObsoleteNode:
   Capybara::Poltergeist::ObsoleteNode 
```

当我在尝试查找“select：last”之前打印 html 内容时，我能够看到正确的 html。贴在下面。

```
<input class="string required" id="source_model_attributes_attributes_1355377152026_field_name" label="Field Name" name="source[model_attributes_attributes][1355377152026][field_name]" placeholder="Field Name" size="50" type="text">
<select class="select required" id="source_model_attributes_attributes_1355377152026_field_type" label="Field Type" name="source[model_attributes_attributes][1355377152026][field_type]" prompt="Select Field Type">
<option value="">Select Field Type</option>
<option value="Word">Word</option>
<option value="Number">Number</option>
<option value="True or False">True or False</option>
<option value="Date &amp; Time">Date &amp; Time</option>
<option value="Date">Date</option>
<option value="Time">Time</option></select> 
```

我使用的是 find，而不是 fill_in，因为我的 html 是动态生成的，时间戳附加到 id 和 name 字段。

值得一提的是，我尝试像这样使用 Capybara 的 select Action 时运气不佳。

```
select "Word", from: "Field Type" 
```

失败并出现以下错误。

```
Failure/Error: select "Word", from: "Field Type"
 Capybara::ElementNotFound:
   cannot select option, no select box with id, name, or label 'Field Type' found 
```

Capybara 出于某种原因无法找到标签，可能是因为它隐藏在实际形式中。

# powershell - 将域计算机用户添加到本地管理员

> ID：13853768
> 
> 赞同：0
> 
> 时间：2012-12-13T05:51:06.193
> 
> 标签：powershell, active-directory, powershell-2.0, powershell-remoting

我有两台机器，比如在公司域中`CorpotateDomain`。第一台机器：`first.CorpotateDomain.com` 第二台：`second.CorpotateDomain.com`

我想`PrimUser`使用 powershell 从第一个添加到第二台机器的管理员组。然后我想使用实用程序或cmdlet从第一台机器（使用登录`PrimUser`）关闭第二台机器。（或者，例如，远程重启）`shutdown``stop-computer``iis`

是否有可能，我应该使用什么命令将域用户添加到管理员？

ps我试过：

```
$user = "WinNT://first.CorpotateDomain.com/PrimUser"
$group = New-Object System.DirectoryServices.DirectoryEntry("WinNT://./Administrators")
$group.PSBase.Invoke("Add",$user) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:26:54.810

您可以将域用户添加到本地管理员组，但我认为您不能添加另一台计算机的本地用户。

```
$user=[ADSI]"WinNT://domain/PrimUser"
$group=[ADSI]"WinNT://./Administrators"
$group.Psbase.Invoke("Add",$user.Psbase.path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:30:05.903

将 $user 设置为用户的专有名称，例如`CN=PrimUser,CN=Users,DC=CorporateDomain,DC=com`.

# javascript - java脚本中的日期选择器

> ID：13853769
> 
> 赞同：0
> 
> 时间：2012-12-13T05:51:07.080
> 
> 标签：javascript, css, jsp, datepicker

我正在使用 jsp 创建动态 Web 项目，因为我需要使用仅使用 java 脚本（而不是 j 查询）的日期选择器，我只需要使用 Tab 和箭头按钮来导航日期并输入键盘按钮以从中选择日期日历，它还允许我使用鼠标选择日期。现在我正在使用 java 脚本的日期选择器，它可以与鼠标一起使用，但不能与 Tab、arrow 一起使用。如果有人有任何想法，请从键盘输入键

# tcl - 如何在 ac 代码中使用 tcl apis

> ID：13853770
> 
> 赞同：1
> 
> 时间：2012-12-13T05:51:07.097
> 
> 标签：tcl

我想在另一个“c”代码文件中使用我的 tcl 代码的一些功能（API）。但我不知道如何做到这一点，尤其是如何链接它们。为此，我采用了一个非常简单的 tcl 代码，其中包含一个 API，它将两个数字相加并打印总和。谁能告诉我如何调用这个 tcl 代码来得到总和。我如何编写将调用此 tcl 代码的 ac 包装器。下面是我正在使用的示例 tcl 程序：

```
#!/usr/bin/env tclsh8.5
proc add_two_nos { } {

set a 10

  set b 20

  set c [expr { $a + $b } ]

  puts " c is $c ......."

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:58:23.610

要从 C 代码评估脚本，请使用[`Tcl_Eval()`](http://www.tcl.tk/man/tcl8.6/TclLib/Eval.htm)或其近亲之一。为了使用该 API，您需要链接 Tcl 库，[初始化 Tcl 库](http://www.tcl.tk/man/tcl8.6/TclLib/FindExec.htm)并[创建一个解释器](http://www.tcl.tk/man/tcl8.6/TclLib/CrtInterp.htm)来保存执行上下文。另外，您确实应该做一些工作来检索结果并将其打印出来（打印脚本错误特别重要，因为这对调试有*很大帮助！）*

因此，你会得到这样的东西：

```
#include <tcl.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
    Tcl_Interp *interp;
    int code;
    char *result;

    Tcl_FindExecutable(argv[0]);
    interp = Tcl_CreateInterp();
    code = Tcl_Eval(interp, "source myscript.tcl; add_two_nos");

    /* Retrieve the result... */
    result = Tcl_GetString(Tcl_GetObjResult(interp));

    /* Check for error! If an error, message is result. */
    if (code == TCL_ERROR) {
        fprintf(stderr, "ERROR in script: %s\n", result);
        exit(1);
    }

    /* Print (normal) result if non-empty; we'll skip handling encodings for now */
    if (strlen(result)) {
        printf("%s\n", result);
    }

    /* Clean up */
    Tcl_DeleteInterp(interp);
    exit(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:43:49.127

我想我已经摆脱了它。你是对的。问题出在我使用的包含方法上。我有文件 tcl.h、tclDecls.h 和 tclPlatDecls.h 包含在 c 代码中，但这些文件在路径 /usr/include 中不存在，所以我将这些文件复制到该目录，可能不是正确的办法。最后我没有将这些文件复制到 /usr/include 并在编译时给出了包含路径。我已经创建了可执行文件，它在终端上给出了正确的结果。谢谢你的帮助。

这是我正在使用的确切 c 代码：

```
#include <tcl.h>
#include <tclDecls.h>
#include <tclPlatDecls.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char **argv) {
Tcl_Interp *interp;
int code;
char *result;

printf("inside main function \n");
//    Tcl_InitStubs(interp, "8.5", 0);
Tcl_FindExecutable(argv[0]);
interp = Tcl_CreateInterp();
code = Tcl_Eval(interp, "source simple_addition.tcl; add_two_nos");

/* Retrieve the result... */
result = Tcl_GetString(Tcl_GetObjResult(interp));

/* Check for error! If an error, message is result. */
if (code == TCL_ERROR) {
    fprintf(stderr, "ERROR in script: %s\n", result);
    exit(1);
}

/* Print (normal) result if non-empty; we'll skip handling encodings for now */
if (strlen(result)) {
    printf("%s\n", result);
}

/* Clean up */
Tcl_DeleteInterp(interp);
exit(0); 
```

}

并编译此代码并生成可执行文件，我使用以下命令：

```
gcc simple_addition_wrapper_new.c -I/usr/include/tcl8.5/ -ltcl8.5 -o simple_addition_op 
```

我已经执行了文件 simple_addition_op 并得到了以下正确的结果

```
inside main function 
c is 30 ....... 
```

我特别感谢 Donal Fellows 和 Johannes

# iphone - Spotify Simple Player 在 iPhone 模拟器上运行，但不是真正的 iPhone

> ID：13853773
> 
> 赞同：1
> 
> 时间：2012-12-13T05:51:11.323
> 
> 标签：iphone, xcode, spotify

基本上，Simple Player Spotify 示例应用程序可以在 iPhone 6.0 模拟器上完美运行，但是当我尝试在 iPhone 上对其进行测试时，它无法在我的 iPhone 上运行。当我尝试测试从“空 cocoalibspotify 项目”构建的应用程序时，也会发生这种情况。它在模拟器上完美运行，但是当它尝试在我的 iPhone 上构建时会给出大量错误消息。

在构建实际手机之前，我只是错过了一步吗？

有关错误示例，请在 [此处查看以下链接](https://i.imgur.com/bD0bC.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:24:51.930

您在此处尝试使用的 Spotify 库没有 armv7s 代码，这是您 iPhone 5 的默认架构。您需要从构建设置中删除 armv7s 架构，以便改为使用 armv7 编译。

这是自 Apple 发布 armv7s 设备（iPhone 5、iPad 4）以来所有静态库供应商都遇到的问题，因为您无法拥有支持 i386+armv6+armv7+armv7s 的 statib 库。

# c++ - 中缀计算器表达式解析器

> ID：13853774
> 
> 赞同：3
> 
> 时间：2012-12-13T05:51:22.853
> 
> 标签：c++, parsing, stack, expression, calculator

如何解析和评估中缀计算器语法中的表达式？我想到了两种方法。

第一个涉及使用两个堆栈。一个用于数字，另一个用于运算符，我将评估运算符的优先级和关联性，以便弄清楚如何评估表达式。

第二种方法涉及将中缀表达式转换为后缀，我不知道该怎么做。这只是一个想法。目前我设置我的程序的目的是使用第一种方法。

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

bool die(const string &msg);

//stack class
class Stack{
public:
    Stack();
    void push(const double &val);
    void push(const string &oper);
    double popnum();
    string popop();
    double getopele();
    double getnumele();
private:
    static const unsigned MAX=30;
    string opstack[MAX];
    double numstack[MAX];
    unsigned opele;
    unsigned numele;
};

//operator type
struct OP{
    string name;
    void * func;
    unsigned arity;
    unsigned prec;
    bool lass;
    string descrip;
};
//operator table
OP op[]={{"+", add, 2, 4, true, "2+3 is 5"},
        {"-", subtract, 2, 4, true, "2-3 is -1"},
        {"*", multiply, 2, 6, true, "2*3 is 6"},
        {"/", divide, 2, 6, true, "2/3 is 0.666666..., div by 0 illegal"}};
unsigned OPELE =sizeof(op)/sizeof(op[0]);

//operators
bool add(double &r, double &x, double &y);
bool subtract(double &r, double &x, double &y);
bool multiply(double &r, double &x, double &y);
bool divide(double &r, double &x, double &y);

//Manip
unsigned findindex(string token, OP op[], unsigned OPELE);
bool parse(double &t, const string &token);
bool evaluate(double &result, string line);
bool weird(double x);

int main(){
    for(string line; getline(cin, line);){
        if(line=="QUIT") break;
        if(line.empty()) continue;
        if(line=="DOC")
            for(unsigned i=0; i<OPELE; i++)
                cout<<op[i].name<<" | "<<op[i].descrip<<'\n';
        double result;
        if(evaluate(result, line)){
            cout<<result<<'\n';
        }else{
            cout<<"Could not understand input\n\n";
        }
    }
}

Stack::Stack(){
    opele=0;
    numele=0;
}

void Stack::push(const double &val){
    if(MAX) die("Stack Overflow");
    numstack[numele++]=val;
}

void Stack::push(const string &oper){
    if(MAX) die("Stack Overflow");
    opstack[opele++]=oper;
}

double Stack::popnum(){
    if(!numele) die("Stack Underflow");
    return numstack[--numele];
}

string Stack::popop(){
    if(!opele) die("Stack Underflow");
    return opstack[--opele];
}

double Stack::getopele(){
    return opele;
}

double Stack::getnumele(){
    return numele;
}

bool add(double &r, double &x, double &y){
    double t = x + y;
    if( weird(t) )  return false;
    r = t;
    return true;
}

bool subtract(double &r, double &x, double &y){
    double t = x - y;
    if( weird(t) )  return false;
    result = t;
    return true;
}

bool multiply( double & r, double& x, double &y ){
    double t = x * y;
    if( weird(t) )  return false;
    result = t;
    return true;
}

bool divide( double & result, double &x, double &y ){
    double t = x / y;
    if( weird(t) )  return false;
    result = t;
    return true;
}

unsigned findindex(string token, OP op[], unsigned OPELE){
    for(unsigned i=0l i<OPELE; i++)
        if(op[i].name==token)
            return i;
    return UINT_MAX;

}

bool parse(double &t, const string &token){
    istringstream sin( token );
    double t;
    if( !(sin >>t) )  return false;
    char junk;
    if( sin >>junk )  return false;
    value = t;
    return true;
}

bool evaluate(double &result, string line){
    istringstream sin(line);
    Stack s;
    for(string token; sin>>token;){
        double t;
        if(parse(t, token)){
            s.push(t);
        }else if(
    }
}

bool weird( double x ){
    return  x != x || x != 0 && x == 2*x;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T09:29:29.003

这将是一个漫长的阅读，但无论如何，我将与您分享我用来解析中缀表达式并将其存储为二叉树的算法。不是堆栈，而是二叉树。解析将很容易给出后缀顺序。我并不是说这是最好的算法，但这适用于我的脚本语言。

算法：

我们有一个对二叉树的“当前节点”和“当前表达式”进行操作的方法。这些节点包含一个“数据”字段和一个“类型”字段。

阶段一：简单的东西，比如“4”直接进入节点，我们指定类型为“DATA”，即。按原样使用此信息。

第 2 阶段：现在，让我们考虑以下表达式：

```
a) 2 + 3 
```

这将转换为以下二叉树：

```
 +
 / \
2   3 
```

因此，运算符进入节点，操作数进入叶子。将表达式 a) 转换为树很简单：找到运算符，放入树的“当前”节点，指定节点的类型为运算符“PLUS”，剩下的进入树在节点的左边部分，它右边的部分进入右边的树。很好也很简单，使用来自第 1 阶段的信息，两个叶子将是值为 2 和 3 的“DATA”叶子。

第 3 阶段：但是对于更复杂的表达式：

```
b) 2 * 3 + 4 
```

树将是：

```
 +
   / \ 4
  *
 / \ 
2   3 
```

所以我们需要将上面的算法修改为：找到具有最高优先级的第一个运算符（考虑 c++ 准则... +（加号）和 -（减号）的优先级为 6，而 *（乘号）的优先级， /（除）和%（取模）为5）在表达式中，将表达式分为两部分（最高优先级的操作数之前和最高优先级的操作数之后）并递归调用这两部分的方法，同时将运算符与当前节点的最高优先级。因此，我们确实创建了一个带有 hdata 的树，例如：

```
 +
   / \ 
  /  call method with "4"
call method with "2*3" 
```

在这个阶段，对于调用 ("2*3")，我们会退回到“Stage 2”，对于调用“4”，我们会退回到“Stage 1”。

阶段 4：如果表达式中有括号怎么办？如

```
c) 2 * (3 + 4) 
```

这将为我们提供树：

```
 *
     / \
    2   +
       / \
      3   4 
```

我们将算法修改为：

*   当当前表达式包含在括号中时，从其中删除括号并重新启动算法。当心。(2 + 3 * 4 + 5) 被认为包含在括号中，而 (2+3)*(4+5) 不是。因此，这不仅仅是表达式的开始和结束字符，而且您实际上需要计算括号。（这是递归的方法，第一步不要怕……）
*   现在在表达式的括号之外找到具有最高优先级的第一个运算符。再次，取表达式的左侧和右侧并一次又一次地调用该方法，直到您最终到达“阶段 1”，即。具有单个数据元素。

    现在这是一个由普通数字和运算符组成的表达式的算法。对于更复杂的信息，您可能需要对其进行细化以满足您的需要。如果您认为值得，请查看[https://sourceforge.net/p/nap-script/mercurial/ci/default/tree/compiler/interpreter.cpp](https://sourceforge.net/p/nap-script/mercurial/ci/default/tree/compiler/interpreter.cpp)。这包含上述算法的完整实现（用 C 语言），涉及更复杂的概念（变量、方法调用、后缀/前缀运算符等）。方法是 build_expr_tree，从第 1327 行开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T19:00:00.857

[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)法是手动实现正确表达式解析器的最简单方法。在这里，编程语言堆栈与您尝试使用的显式堆栈执行相同的操作。用 google 可以找到很多 RD 示例，任何好的编译器书籍都会有一些。

链接的 Wikipedia 页面显示了一个解析器，但没有显示如何添加评估。所以下面是一个完整的 C 语言基本表达式评估器。它可以很容易地包装在 C++ 类中，全局变量成为实例变量。它缺少您在生产系统中需要的功能。例如，当它发现错误时，它就直接退出。C++ 异常将很容易让您展开递归并继续。它还需要防止数字溢出、被零除等，你显然知道如何去做。

递归下降的想法是将所需语言的语法转换为称为 LL(1) 的形式。完成后，就有固定的规则——保证每次都有效——将语法规则转化为程序。我在下面手工完成了这个。有工具可以自动完成。

所以这个评估器很容易扩展。只需添加必要的语法规则，然后对扫描器、解析器和评估代码实施所需的增强。例如，内置函数规则是`unsigned_factor -> FUNCTION_NAME ( expr )`，其中扫描程序将所有函数名称识别为相同的标记，并且`unsigned_factor`C 函数被扩充以解析和计算值。

我必须包括一个小型扫描仪才能获得一个工作程序。请注意，一半以上的代码是扫描仪。基本的 RD 解析器很简单。

如果您添加错误恢复，它们会变得更加复杂：跳过错误并继续解析的智能能力，同时仅发出一条准确措辞的错误消息。但是话又说回来，这给任何解析器增加了很多复杂性。

```
// Bare bones scanner and parser for the following LL(1) grammar:
// expr -> term { [+-] term }     ; An expression is terms separated by add ops.
// term -> factor { [*/] factor } ; A term is factors separated by mul ops.
// factor -> unsigned_factor      ; A signed factor is a factor, 
//         | - unsigned_factor    ;   possibly with leading minus sign
// unsigned_factor -> ( expr )    ; An unsigned factor is a parenthesized expression 
//         | NUMBER               ;   or a number
//
// The parser returns the floating point value of the expression.

#include <stdio.h>
#include <stdlib.h>

// The token buffer. We never check for overflow! Do so in production code.
char buf[1024];
int n = 0;

// The current character.
int ch;

// The look-ahead token.  This is the 1 in LL(1).
enum { ADD_OP, MUL_OP, LEFT_PAREN, RIGHT_PAREN, NUMBER, END_INPUT } look_ahead;

// Forward declarations.
void init(void);
void advance(void);
double expr(void);
void error(char *msg);

// Parse expressions, one per line. 
int main(void)
{
  init();
  while (1) {
    double val = expr();
    printf("val: %f\n", val);
    if (look_ahead != END_INPUT) error("junk after expression");
    advance();  // past end of input mark
  }
  return 0;
}    

// Just die on any error.
void error(char *msg)
{
  fprintf(stderr, "Error: %s. I quit.\n", msg);
  exit(1);
}

// Buffer the current character and read a new one.
void read()
{
  buf[n++] = ch;
  buf[n] = '\0';  // Terminate the string.
  ch = getchar();
}

// Ignore the current character.
void ignore()
{
  ch = getchar();
}

// Reset the token buffer.
void reset()
{
  n = 0;
  buf[0] = '\0';
}

// The scanner.  A tiny deterministic finite automaton.
int scan()
{
  reset();
START:
  switch (ch) {
    case ' ': case '\t': case '\r':
      ignore();
      goto START;

    case '-': case '+':
      read();
      return ADD_OP;

    case '*': case '/':
      read();
      return MUL_OP;

    case '(':
      read();
      return LEFT_PAREN;

    case ')':
      read();
      return RIGHT_PAREN;

    case '0': case '1': case '2': case '3': case '4':
    case '5': case '6': case '7': case '8': case '9':
      read();
      goto IN_LEADING_DIGITS;

    case '\n':
      ch = ' ';    // delayed ignore()
      return END_INPUT;

    default:
      error("bad character");
  }

IN_LEADING_DIGITS:
  switch (ch) {
    case '0': case '1': case '2': case '3': case '4':
    case '5': case '6': case '7': case '8': case '9':
      read();
      goto IN_LEADING_DIGITS;

    case '.':
      read();
      goto IN_TRAILING_DIGITS;

    default:
      return NUMBER;
  }

IN_TRAILING_DIGITS:
  switch (ch) {
    case '0': case '1': case '2': case '3': case '4':
    case '5': case '6': case '7': case '8': case '9':
      read();
      goto IN_TRAILING_DIGITS;

    default:
      return NUMBER;
  }          
}

// To advance is just to replace the look-ahead.
void advance()
{
  look_ahead = scan();
}

// Clear the token buffer and read the first look-ahead.
void init()
{
  reset();
  ignore(); // junk current character
  advance();
}

double unsigned_factor()
{
  double rtn = 0;
  switch (look_ahead) {
    case NUMBER:
      sscanf(buf, "%lf", &rtn);
      advance();
      break;

    case LEFT_PAREN:
      advance();
      rtn = expr();
      if (look_ahead != RIGHT_PAREN) error("missing ')'");
      advance();
      break;

    default:
      error("unexpected token");
  }
  return rtn;
}

double factor()
{
  double rtn = 0;
  // If there is a leading minus...
  if (look_ahead == ADD_OP && buf[0] == '-') {
    advance();
    rtn = -unsigned_factor();
  }
  else
    rtn = unsigned_factor();
  return rtn;
}

double term()
{
  double rtn = factor();
  while (look_ahead == MUL_OP) {
    switch(buf[0]) {
      case '*':
        advance(); 
        rtn *= factor(); 
        break; 

      case '/':
        advance();
        rtn /= factor();
        break;
    }
  }
  return rtn;
}

double expr()
{
  double rtn = term();
  while (look_ahead == ADD_OP) {
    switch(buf[0]) {
      case '+': 
        advance();
        rtn += term(); 
        break; 

      case '-':
        advance();
        rtn -= term();
        break;
    }
  }
  return rtn;
} 
```

并运行程序：

```
1 + 2 * 3
val: 7.000000
(1 + 2) * 3
val: 9.000000 
```

# sql - 在不使用 LIKE 运算符的情况下查找整个值

> ID：13853777
> 
> 赞同：-3
> 
> 时间：2012-12-13T05:51:49.547
> 
> 标签：sql, sql-server, sql-server-2008

我有很多要在表中找到。但只给了我一小部分来找到整个数字。我正在寻找一些不使用`like`运算符的新方法来找出这些。我知道这是一件简单的事情，但我需要一种新的方法。

*   给出的值为： `4213076600`
*   寻找的价值是： `89013106904213076600`

我想在以下查询中找到它：

```
SELECT  * 
FROM    table_name 
WHERE   column_name in (value,value,value) 
```

我已经在网站上搜索了这个并了解了 left() 和 right() 函数，但不知道如何安排它们以获得结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:31:06.840

您可以使用`CONTAINS` [更多信息](http://msdn.microsoft.com/en-us/library/ms187787%28v=sql.105%29.aspx)：

```
SELECT *
FROM table_name 
WHERE CONTAINS(column_name , '"*value*"') 
```

因为`CONTAINS`你需要`FULL TEXT INDEX` [在桌子上](http://msdn.microsoft.com/en-us/library/cc879306%28v=sql.105%29.aspx)创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:56:27.193

```
SELECT
    *
FROM
    table_name
WHERE
    CHARINDEX(value1,column_name)>0
    OR CHARINDEX(value2,column_name)>0
    OR CHARINDEX(value3,column_name)>0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:04:31.983

```
DECLARE @table table (n varchar(20))
DECLARE @param1 varchar(20)

SET @param1 = '4213076600'

INSERT INTO @table (n)
SELECT '89013106904213076600'

SELECT n 
FROM @table
WHERE RIGHT(n, len(@param1)) = @param1 
```

**编辑**

```
select * 
from table_name 
where right(column_name, len(value)) = value 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T06:51:21.180

```
SELECT left(column_name,length_of_value)
FROM   table_name
WHERE  RIGHT(column_name,length_of_value_given) IN (value,value,value) 
```

这就是它适用于`IN`条款的方式

# css - 如何在 ExpressionEngine 中显示各种大小的 vimeo 视频（新视频将以前的视频推到新大小）

> ID：13853779
> 
> 赞同：0
> 
> 时间：2012-12-13T05:51:53.040
> 
> 标签：css, video, expressionengine, categories, vimeo

我是 ExpressionEngine（以及其他代码语言）的初学者。无论如何，我正在创建一个视频教程网站，我已经设置了我的表达引擎网站，所以我在一个频道中有类别。这些类别将内容过滤到相应的页面。但是，我希望我的网站有一个精选视频，这将是最新发布的视频。一旦我发布了一个新视频，我希望它占据主要舞台并将之前的视频推到更小的尺寸。我使用 Vimeo 作为视频主机，因此所有视频都将在 Vimeo 上。

这是我主页中用于从旧内容中排序新内容的代码

```
{exp:channel:entries limit="10"}
<div class="main_feature">

{if count==1}
<div class="video_large">
{/if}

{if count !=1}
<div class="video_small">
{/if}

<h2>{video_tutorial_title}</h2>
{video_tutorial_link}
{video_tutorial_summary}

</div>
{/exp:channel:entries} 
```

我让它们过滤成两种不同的风格。我的CSS看起来像这样......

```
.video_large {
    height: 960px;
    width: 640px;
}
.video_small {
    height: 180px;
    width: 320px;
} 
```

输入我的新内容/视频时。我一直在使用每个视频中的嵌入代码，并从它们中删除高度和宽度，认为 div 然后会调整它的大小。看起来好像它将所有视频的大小调整为 180x340，但对于最新的视频，它看起来像是创建了一个 640x960 div，视频只是没有填满整个 div。我希望我不需要任何插件或类似的东西。我希望它只是我忽略的一些基本的东西。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:02:38.143

有一个名为[FitVids](http://fitvidsjs.com)的 jQuery 解决方案。它是为使用流体设计的网站而设计的，但在这种情况下它也应该可以工作。它会调整目标容器中的任何视频（在您的情况下`.main_feature`）以填充其父容器的宽度。

然后，您还可以从 CSS 中删除`height`声明（以便您可以容纳具有不同纵横比的视频）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:25:09.010

没有看到你的页面很难说，但我认为你必须将嵌入 iframe 的宽度和高度设置为 100%，然后它应该可以工作。

# visual-studio-2012 - 为 Web 部署缩小 JS/CSS

> ID：13853784
> 
> 赞同：2
> 
> 时间：2012-12-13T05:52:20.120
> 
> 标签：visual-studio-2012, webdeploy, ajaxmin

当我使用 Web 部署发布配置文件进行部署时，我正在尝试使用 AjaxMin 缩小 Javascript 和 CSS。这是我在项目文件中的内容：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\MicrosoftAjax\AjaxMin.tasks" />
  <PropertyGroup>
    <ResGenDependsOn>
      MinifyJavascriptAndCss;
      $(ResGenDependsOn);
    </ResGenDependsOn>
  </PropertyGroup>
  <Target Name="MinifyJavascriptAndCss" 
    Condition=" '$(ConfigurationName)'=='Release' ">
  <ItemGroup>
    <JS Include="$(_PackageTempDir)\**\*.js" 
      Exclude="$(_PackageTempDir)\**\*.min.js;Scripts\*.js" />
  </ItemGroup>
  <ItemGroup>
    <CSS 
      Include="$(_PackageTempDir)\**\*.css" 
      Exclude="$(_PackageTempDir)\**\*.min.css" />
  </ItemGroup>
  <Message Text="Compressing JavaScript and CSS files into $(_PackageTempDir)"
    Importance="high" />
  <AjaxMin JsSourceFiles="@(JS)" JsSourceExtensionPattern="\.js$"
    JsTargetExtension=".min.js" CssSourceFiles="@(CSS)" 
    CssSourceExtensionPattern="\.css$" CssTargetExtension=".min.css" />
</Target> 
```

如果我查看输出目录，我可以看到文件在`min.*`文件出现时被缩小，但是在部署包文件时，它们不包括在内。

如何强制将缩小的文件包含在发布包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:33:39.747

它在 VS2010 中对我有用，但对 VS2012 没有任何作用......

```
<!-- Use AjaxMinifier from Libs folder in this project -->
      <UsingTask TaskName="AjaxMin" AssemblyFile="$(MSBuildProjectLocation)Libs\AjaxMinTask.dll" />
      <!-- This target will run after publish web in Release mode -->
      <Target Name="MinifyJavaScriptAndCSS" AfterTargets="CopyAllFilesToSingleFolderForPackage" Condition="'$(Configuration)'=='Release'">
        <ItemGroup>
          <!-- Every .js file (exclude *.min.js and *.vsdoc.js files) -->
          <JS Include="$(_PackageTempDir)\**\*.js" Exclude="$(_PackageTempDir)\**\*.min.js;$(_PackageTempDir)\**\*vsdoc.js" />
          <!-- Every .css file (exclude *.min.css files) -->
          <CSS Include="$(_PackageTempDir)\**\*.css" Exclude="$(_PackageTempDir)\**\*.min.css" />

        </ItemGroup>
        <!-- Log in output build window -->
        <AjaxMin JsKnownGlobalNames="jQuery,$" JsSourceFiles="@(JS)" JsSourceExtensionPattern="\.js$" JsTargetExtension=".js" CssSourceFiles="@(CSS)" CssSourceExtensionPattern="\.css$" CssTargetExtension=".css" />
        <!-- Log in output build window -->
        <Message Text="[pcv] $(MSBuildProjectName) -&gt; Minified: @(JS)" Importance="high" />
        <Message Text="[pcv] $(MSBuildProjectName) -&gt; Minified: @(CSS)" Importance="high" />

      </Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T14:49:44.170

我遇到了同样的问题并成功解决了。有一种简单的方法可以完成这项任务。

将原始 CSS/JS 文件的 Build Action 设置为 None，将 minify 文件的 Build Action 设置为 Content。现在，当您构建项目时，只会出现缩小的 css/java 脚本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T01:59:37.427

我正在使用 VS2012，这对我有用

```
<!--<Import Project="$(MSBuildExtensionsPath)\Microsoft\MicrosoftAjax\AjaxMin.targets" />-->
  <UsingTask TaskName="AjaxMin" AssemblyFile="$(MSBuildProjectDirectory)\..\packages\AjaxMin.5.14.5506.26202\tools\net40\AjaxMinTask.dll" />
  <Target Name="MinifyJsAndCss"  AfterTargets="CopyAllFilesToSingleFolderForPackage" >
    <ItemGroup>
      <JS Include="$(_PackageTempDir)\App_Scripts\**\*.js" Exclude="$(_PackageTempDir)\**\*.min.js" />
      <CSS Include="$(_PackageTempDir)\**\*.css"  Exclude="$(_PackageTempDir)\**\*.min.css" />
    </ItemGroup>
    <Message Text="Compressing JavaScript and CSS files...(to edit this feature, unload the project, right click it ->edit -> search for 'AjaxMin' bottom of the xml)" Importance="high" />
    <AjaxMin JsSourceFiles="@(JS)" JsSourceExtensionPattern="\.js$" JsTargetExtension=".js" CssSourceFiles="@(CSS)" CssSourceExtensionPattern="\.css$" CssTargetExtension=".min.css" />
  </Target> 
```

# objective-c - 如何在 system() 中表示当前用户路径

> ID：13853786
> 
> 赞同：0
> 
> 时间：2012-12-13T05:52:24.490
> 
> 标签：objective-c, macos, shell, xcode4.5

我需要将文件复制到当前的工作用户目录。

我确实喜欢这个

```
NSString *filepath = @"~/Desktop";
NSString *filename = @"newFile";

int status=system([[NSString stringWithFormat:@"touch %@/%@", filePath, filename]UTF8String]); 
```

但这不是在桌面上创建文件。有人可以告诉我“~”的替代品来获取当前的工作用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:19:04.563

该`~`字符在文件系统上下文中没有含义，它在 shell 上下文中具有含义，并且`$HOME`作为**Tilde Expansion**的一部分被替换。来自 bash 人：

> 波浪号扩展
> 
> 如果单词以不带引号的波浪号字符 (`~') 开头，则第一个不带引号的斜杠之前的所有字符（或所有字符，如果没有不带引号的斜杠）都被视为波浪号前缀。如果波浪号前缀中没有任何字符被引用，波浪号后面的波浪号前缀中的字符将被视为可能的登录名。如果此登录名是空字符串，波浪号将替换为 shell 参数 HOME 的值。如果 HOME 未设置，则替换执行 shell 的用户的主目录。否则，波浪号前缀将替换为与指定登录名关联的主目录。

因此，一种解决方案是，正如 Dolda2000 建议的那样，使用`$HOME`代替，`~`但在用户不是 root 的情况下它不起作用`~root`（在这种情况下以 root 为例）。

更通用的解决方案是在调用中调用 shell `system`。我不知道 Objective-C，但它与 bash 相结合，它看起来像：

```
int status=system([[NSString stringWithFormat:@"bash -c 'touch %@/%@'", filePath, filename]UTF8String]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T06:53:19.930

让所有用户进入你的机器

```
 for USER_DIR in $(ls /Users); 
    do { 
    *<write code here to implement something with each user>*;
    } 
    done; 
```

这是一个终端命令。与目标 c 中的*system()一起使用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:28:51.157

```
NSString *filepath = [@"~/Desktop" stringByExpandingTildeInPath];
NSString *filename = @"newFile";

int status=system([[NSString stringWithFormat:@"touch %@/%@", filepath, filename]UTF8String]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:56:17.243

怎么用`getenv("HOME")`？

# php - 如何从网站 url 隐藏 .html 扩展名

> ID：13853788
> 
> 赞同：4
> 
> 时间：2012-12-13T05:52:45.537
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我知道以前有人问过这个问题，但有人知道隐藏 .html 扩展名的好方法吗？我已经尝试了许多代码和来自[https://stackoverflow.com/](https://stackoverflow.com/)的许多答案，但没有看到结果。那是你我再问你一次

我有一个静态网站，我想删除扩展以清理我的网址。我正在使用静态 html 文件。

在删除扩展之前，该 url 将显示为`website.com/about.html`.

删除扩展后，它看起来像 website.com/about。希望这很清楚。

我有一个 .htaccess 文件，我尝试了许多代码，但它不起作用。这里有一些代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 

RewriteCond %{THE_REQUEST} \ /(.+/)?index(\.html)?(\?.*)?\  [NC]
RewriteRule ^(.+/)?index(\.html)?$ /%1 [R=301,L]

RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.html$ /$1 [R=301,L]

RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/
RewriteRule ^index\.html$ http://%{HTTP_HOST}/ [R=301,L]

RewriteEngine On
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ $1.html [NC,L]

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html

RewriteBase /
RewriteEngine on
RewriteRule ^(.*)\.htm$ $1.html [nc]

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule !.*\.html$ %{REQUEST_FILENAME}.html [L] 
```

但是我没有看到任何结果... :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:11:49.533

您的规则颠倒了（第一个规则会起作用）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.html [L] 
```

您最初的规则是`RewriteRule ^(.*)\.html$ $1 [L]`“如果请求的资源名称以结尾，`.html`则向浏览器发出重定向，告诉它询问我们是否有任何没有 HTML 的同名内容”。这会导致 404（因为 Apache 没有任何东西可以为`.html`“更少的资源”提供服务）。

通过切换`.html`到目的地`RewriteRule ^(.*)$ $1.html [L]`，我们将规则更改为“如果请求的资源名称不是磁盘上的文件或目录，则尝试重新路由请求（在内部，不要告诉浏览器），就好像它以“结束`.html`”一样.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:43:03.457

请注意，此类任务不需要复杂的（本质上）RewriteRules。

mod_negotiation apache 模块，通常默认启用，通过 Multivews 选项提供**这种**行为[。](http://httpd.apache.org/docs/current/mod/mod_negotiation.html#multiviews)

> 如果服务器收到对 /some/dir/foo 的请求并且 /some/dir/foo 不存在，则服务器读取目录以查找所有名为 foo.* 的文件，并有效地伪造一个类型映射，其中命名所有这些文件，为它们分配相同的媒体类型和内容编码，如果客户端按名称要求其中之一。然后它选择最符合客户要求的匹配项，并返回该文档。

.ie如果它是我们的目录，则请求`foo/bar`将提供服务，如果不是，则将搜索，等等。`foo/bar``foo/bar.html``foo/bar.txt`

您只需要确保在当前上下文中激活此选项（例如目录）

```
Options +Multiviews 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:05:33.263

用这个

```
 Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ $1.html [L,QSA] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-23T13:18:37.820

看看这篇文章[http://alexcican.com/post/how-to-remove-php-html-htm-extensions-with-htaccess/](http://alexcican.com/post/how-to-remove-php-html-htm-extensions-with-htaccess/)我还没有尝试过，但演示似乎很有说服力

# xml - 正则表达式 - 如何匹配 xml 中的正文部分

> ID：13853790
> 
> 赞同：0
> 
> 时间：2012-12-13T05:52:50.087
> 
> 标签：xml, colors, richtextbox

我正在尝试在 rithtextbox 中以不同颜色突出显示 Xml 的正文部分和标签部分。

```
Regex regExp = new Regex("<[^>]+>");
foreach (Match match in regExp.Matches(richTextBox3.Text))
{
      richTextBox3.Select(match.Index, match.Length);
      richTextBox3.SelectionColor = Color.blue;
} 

regExp = new Regex("(?!<[^>]+>)");
foreach (Match match in regExp.Matches(richTextBox3.Text))
{
      richTextBox3.Select(match.Index, match.Length);
      richTextBox3.SelectionColor = Color.Green;
} 
```

问题是它与身体部位不匹配（标签除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:08:32.010

我在这里得到了答案是解决方案

```
Regex regExp = new Regex("<[^>]+>");
MatchCollection a = regExp.Matches(richTextBox3.Text);
for(int i=0;i<a.Count;i++)
{
     richTextBox3.Select(a[i].Index, a[i].Length);
     richTextBox3.SelectionColor = Color.Blue;
     if (i < a.Count - 1)
     {
         if (a[i+1].Index-(a[i].Index + a[i].Length + 1) > 0)
         {
              richTextBox3.Select(a[i].Index + a[i].Length , a[i + 1].Index - (a[i].Index + a[i].Length));

              richTextBox3.SelectionColor = Color.Green;

         }
     }
} 
```

# cron - 这些 cron 表达式是否等效？

> ID：13853793
> 
> 赞同：1
> 
> 时间：2012-12-13T05:52:54.097
> 
> 标签：cron

有没有区别

```
*/5 * * * * <COMMAND> 
```

和

```
0/5 * * * * <COMMAND> 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:10:45.987

这是不一样的。

*   第一个将从任何时刻开始每 5 分钟执行一次，而
*   第二个将在 0、5、10、... 55 分钟执行。

仅当第一次在 5k 分钟第一次执行时，它们才会具有相同的行为。

* * *

每5分钟可以这样写：

```
0,5,10,15,20,25,30,35,40,45,50,55 * * * * <COMMAND> 
```

这个

```
0/5 * * * * <COMMAND> 
```

或者

```
*/5 * * * * <COMMAND> 
```

无论如何，最后一个将在分钟更改的任何时候开始，然后与下一次执行保持 5 分钟的距离。

* * *

`*`字符**意味着**每个。如果是单独的，则表示*每分钟*，*每小时*等。

该`/`字符可用于指定值的增量。如果我们指出`X/Y`它意味着*每 Y 分钟从 X 分钟开始*。

*   `0/15`=*每小时的第 15 分钟，从零分钟开始*=`0,15,30,45`
*   `3/20`=*每小时的第 20 分钟，从第三分钟开始*=`3,23,43`
*   `/40`=*每小时每 40 分钟*=`40`
*   `3/40`=*每小时的第 40 分钟，从第三分钟开始*=`43`

回到您的问题，使用这两个运算符会得到以下结果：

`*/5`= 每 5 分钟一次，随时开始。这样，它会在每分钟更改时启动，并在 5 分钟、10 分钟等后重复。

`0/5`= 从第 0 分钟开始每 5 分钟一次。它将在内部被认为是：0、5、10、15、20、25、30、35、40、45、50、55，因为这些是符合条件的分钟*+5从第 0 分钟开始的分钟*。

* * *

一些参考资料：

*   [定时触发](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06)
*   [Linux“crontab every”示例](http://alvinalexander.com/linux/unix-linux-crontab-every-minute-hour-day-syntax)

# asp.net - Crystal Reports - 导出为（PDF 或 excel 或 word）时数据丢失

> ID：13853795
> 
> 赞同：1
> 
> 时间：2012-12-13T05:52:55.523
> 
> 标签：asp.net, sql-server, crystal-reports

我正在尝试在 asp.net Web 应用程序中打印或导出一些 Crystal Reports。报告是使用 CR 10.5 制作的，从`SQL Server 2008 database.`

当我打印或导出为 PDF 时，会跳过一堆（但不是全部）字段。我已经确认报告在查看器和设计器中工作正常，但在尝试查看或导出时却不行

1) 有些字段总是被跳过。
2）似乎跳过了相同的字段。

任何建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:12:05.357

尝试这个...

**在page_init()**方法中绑定您的水晶报表查看器或检查您的页面回发事件...

# javascript - 隐藏/显示不同的链接

> ID：13853800
> 
> 赞同：0
> 
> 时间：2012-12-13T05:53:03.890
> 
> 标签：javascript, jquery, hide, show

我有一个脚本可以在 jsfiddle 上的一个链接上运行。

我有两个链接。链接一是“链接一”，另一个是“链接二”，您可以在 jsfiddle = [http://jsfiddle.net/lamberta/7qGEJ/4/上查看代码](http://jsfiddle.net/lamberta/7qGEJ/4/)

它可以显示和隐藏，但我不能让它显示一个和另一个。它显示了一切。

如果我按链接一，我想显示“.open-container-One”，如果我按链接二，我只想显示“open-container-Two”

希望你能理解我的问题。

js代码：

```
$(document).ready(function() {
    var $div = $('.test');
    var height = $div.height();
    $div.hide().css({
        height: 0
    });

    $('a').click(function() {
        if ($div.is(':visible')) {
            $div.animate({
                height: 0
            }, {
                duration: 500,
                complete: function() {
                    $div.hide();
                }
            });
        } else {
            $div.show().animate({
                height: height
            }, {
                duration: 500
            });
        }

        return false;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T06:09:16.190

从单击的锚点获取索引，在这种情况下必须是 wrapping `li`，然后使用该索引在`.test`元素集合中选择正确的一个。无需重新创建 jQuery 中已经内置的 slideUp/Down。

```
$(function() {
    var elems = $('.test').hide();

    $('a').click(function(e) {
        e.preventDefault();
        var selEl = elems.eq($(this).closest('li').index());
        selEl.slideToggle(600);
        elems.not(selEl).slideUp(600);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/7qGEJ/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:13:53.110

给锚标签上课，

```
<a href="#" class="link1">Link 01</a>
 <a href="#" class="link2">Link 02</a> 
```

将适当的类作为 id 分配给 div 标签

```
<div id="link1" class="test">
...
...
</div>

<div id="link2" class="test">
...
...
</div> 
```

在您的 javascript 函数中进行以下更改

```
$('a').click(function() {

         $('div.test').hide();
        var showDivClass = $(this).attr("class");
        $("#" + showDivClass).show().animate({
                height: height
            }, {
                duration: 500
            });
        $('div.test').not("#" + showDivClass).hide().animate({
                height: 0
            }, {
                duration: 500
            });

    }); 
```

更新和测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:27:32.420

虽然我喜欢@adeneo 的回答，但我更喜欢这种使用选择器而不是元素的方法：

```
$(".test").hide();
$('.list a').each(function(i) {
    $(this).on("click", function() {
        $(".test").slideUp(0).eq(i).slideDown(400, function() {
            $(".close a").on("click", function() {
                $(".test").slideUp();
            }); // on click close
        }); // after slideDown (shown div)
    }); // on click link
}); // each 
```

唯一的条件是链接（列表项）的数量`div`应该与要显示的数量相同，并且顺序相同。

见**[JSFIDDLE](http://jsfiddle.net/yHrS5/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T06:01:30.647

请提供与您需要显示/隐藏的类相同的锚标记的 id。并将 $div 替换为 id 标签

# graph - 如何在图中找到最小生成树的总数？

> ID：13853801
> 
> 赞同：9
> 
> 时间：2012-12-13T05:53:09.433
> 
> 标签：graph, minimum-spanning-tree, spanning-tree

我不想找到所有最小生成树，但我想知道其中有多少，这是我考虑的方法：

*   使用 prim 或 kruskal 算法找到一棵最小生成树，然后找到所有生成树的**权重**，当它等于最小生成树的权重时，递增运行计数器。

我找不到任何方法来找到所有生成树的权重，而且生成树的数量可能非常大，所以这种方法可能不适合这个问题。由于最小生成树的数量是指数级的，因此将它们计数起来并不是一个好主意。

*   所有的权重都是正数。
*   我们也可以假设图中没有权重出现超过 3 次。
*   顶点数将小于或等于 40,000。
*   边数将小于或等于 100,000。

图中只有一棵最小生成树，其中顶点的权重不同。我认为找到最小生成树数量的最佳方法必须是使用此属性。

**编辑**：

我找到了解决这个问题的方法，但我不确定它为什么有效。谁能解释一下。

解决方案：求最小生成树长度的问题是众所周知的；寻找最小生成树的两种最简单的算法是 Prim 算法和 Kruskal 算法。在这两者中，Kruskal 的算法以权重递增的顺序处理边缘。不过，克鲁斯卡尔算法有一个重要的关键点需要考虑：当考虑按权重排序的边列表时，边可以贪婪地添加到生成树中（只要它们不连接已经以某种方式连接的两个顶点）。

现在考虑使用 Kruskal 算法的部分形成的生成树。我们已经插入了一些长度小于 N 的边，现在必须选择几条长度为 N 的边。算法规定，如果可能，我们必须在任何长度大于 N 的边之前插入这些边。但是，我们可以以我们想要的任何顺序插入这些边。还要注意，无论我们插入哪条边，它都不会改变图的连通性。（让我们考虑两个可能的图，一个具有从顶点 A 到顶点 B 的边，而另一个没有。第二个图必须将 A 和 B 作为同一连通分量的一部分；否则从 A 到 B 的边将被插入到一点。）

这两个事实一起意味着我们的答案将是使用 Kruskal 算法插入长度为 K 的边（对于 K 的每个可能值）的方法数的乘积。由于最多有三个任意长度的边，因此可以暴力破解不同的情况，并且可以在每个步骤之后像往常一样确定连接的组件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T06:09:36.443

查看 Prim 的算法，它说重复添加权重最低的边缘。如果可以添加的权重最低的边不止一条，会发生什么？可能选择一个可能会产生与选择另一个不同的树。

如果您使用 prim 算法，并为每条边运行它作为起始边，并练习您遇到的所有关系。然后，您将拥有一个包含 Prim 算法能够找到的所有最小生成树的 Forest。我不知道这是否等于包含所有可能的最小生成树的森林。

这仍然归结为找到所有最小生成树，但我看不出有简单的方法来确定不同的选择是否会产生相同的树。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T09:11:36.103

MST 及其在图表中的计数已得到充分研究。参见例如：[http](http://www14.informatik.tu-muenchen.de/konferenzen/Jass08/courses/1/pieper/Pieper_Paper.pdf) ://www14.informatik.tu-muenchen.de/konferenzen/Jass08/courses/1/pieper/Pieper_Paper.pdf 。

# objective-c - 对于 iOS 应用程序，使用新语言更新在该国家/地区被视为新应用程序？

> ID：13853802
> 
> 赞同：0
> 
> 时间：2012-12-13T05:53:15.673
> 
> 标签：objective-c, ios, cocoa-touch

有没有人有过使用新语言支持更新应用程序的经验，并且知道 Apple 是否将其视为该国家/地区的新应用程序？假设您更新了中文支持，它会显示为新应用程序吗？在“最新消息”中说。

如果不是，那么发布具有尽可能多语言的应用程序是否有优势？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:08:07.987

如果应用程序有最近的发布或更新日期，Apple 会在“新的和值得注意的”中显示应用程序。

如果您将应用程序更新为包含本地语言，您所在国家/地区的本地 iTunes 团队可能会推荐您的应用程序。

一般来说，本地化的优势只有在应用程序之前销售良好的情况下才能实现。仅仅添加本地化不会保存事先没人关心的应用程序。

# iphone - 从“nsarray”分配给“nsmutablearray”的不兼容指针类型

> ID：13853803
> 
> 赞同：3
> 
> 时间：2012-12-13T05:53:20.373
> 
> 标签：iphone, ios, ios4, nsarray

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES];

sortedFloats = [Arr_distance sortedArrayUsingDescriptors:
                    [NSMutableArray arrayWithObject:sortDescriptor]]; 
```

`sortedFloats`NSMutableArray在哪里，`Arr_distance`也是 NSMutableArray

我得到警告`Incompatible pointer types assigning to 'NSMutableArray ' from 'NSArray '` 仍然结果是正确的，但警告是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T06:02:56.417

把你`sortedFloats`当作**NSArray**而不是**NSMutableArray**。你会发现你的警告消失了。

享受编程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:03:24.893

该代码中有两个问题：

1.  参数类型`sortedArrayUsingDescriptors`是`NSArray`您传递的`NSMutableArray`
2.  返回类型`sortedArrayUsingDescriptors`是`NSArray`您将其分配给`NSMutableArray`对象

检查方法签名：

```
- (NSArray *)sortedArrayUsingDescriptors:(NSArray *)sortDescriptors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:59:40.827

在`sortedArrayUsingDescriptors:`您的默认对象中，您应该传递的是`NSArray`。当您传递时，您会收到警告`NSMutableArray`。

根据文档：

```
- (NSArray *)sortedArrayUsingDescriptors:(NSArray *)sortDescriptors 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T06:18:39.973

这`sortedFloats`是对象，`NSMutableArray`您还可以使用数组键对数组进行排序，`sortedArrayUsingDescriptors`方法是`NSMutableArray`返回`NSArray`..

所以这里这个`sortedArrayUsingDescriptors`方法的返回类型是`NSArray`并且你将这个返回类型数组存储在`NSMutableArray`名称的对象中，`sortedFloats`所以将`sortedFloats`其作为`NSArray`类的对象。我希望这可以帮助你...

# android - 使用相同应用 android 的 Facebook API 好友

> ID：13853804
> 
> 赞同：3
> 
> 时间：2012-12-13T05:53:26.907
> 
> 标签：android, facebook, facebook-access-token

我有一个从 facebook api 检索所有朋友的代码，但我只想获取使用应用程序的 facebook 朋友。我试过 fb.request("me/friends?fields=installed"); 但从未工作过我需要额外的许可吗？

这是我的代码：

```
jsonUser = fb.request("me/friends");
friendObj = Util.parseJson(jsonUser);

friendArray = friendObj.getJSONArray("data");

friendlist = new ArrayList<String[][]>();
String[][] friendsToList = new String[1][2];
int friendCount = 0;
String fId, fNm;
JSONObject friend;

for (int i = 0;i<friendArray.length();i++){
    //Get a JSONObject from the JSONArray
    friend = friendArray.getJSONObject(i);
    //Extract the strings from the JSONObject
    friendsToList[0][0] = friend.getString("id");
    friendsToList[0][1] = friend.getString("name");
    friendlist.add(friendsToList);
    //Set the values to our arrays
    Log.e("Tester",""+ friendsToList[0][0]+" "+ friendsToList[0][1]);
    friendCount ++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:39:50.087

解决者

```
AsyncTask.execute(new Runnable() {
            public void run() {
                try{
                    String fql = "SELECT uid, name FROM user WHERE is_app_user  AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())";
                    Bundle parameters = new Bundle();

                    parameters.putString("query", fql);
                    parameters.putString("method", "fql.query");
                    parameters.putString("access_token",  fb.getAccessToken());
                    String Response = fb.request(parameters);
                    JSONArray json = new JSONArray(Response);
                    list = new ArrayList<String[][]>();
                    String[][] friendsToList = new String[1][2];
                    SpinnerList = new ArrayList<String>();
                    String TempToSpinnerList=new String();
                    for(int i = 0; i < json.length(); ++i){
                        friendsToList[0][0] = json.getJSONObject(i).getString("uid");
                        friendsToList[0][1] = json.getJSONObject(i).getString("name");
                        TempToSpinnerList= friendsToList[0][1];
                            list.add(friendsToList);
                            SpinnerList.add(TempToSpinnerList);
                            Log.e("Test"," "+friendsToList[0][1]+" "+friendsToList[0][0]);
                        } 
```

# objective-c - ObjC : NSLog 一个指针名

> ID：13853805
> 
> 赞同：0
> 
> 时间：2012-12-13T05:53:27.390
> 
> 标签：objective-c, class, pointers, instance, nslog

我用我创建的 3 个类实例填充了一个 NSMutableArray。现在我想迭代这个数组来获取一些变量值。我可以这样做，但无法打印我的实例名称（面包、水……）相反，我得到了他们的地址。我想这很简单，但我有点挣扎，所以如果有人知道如何......谢谢

```
#import <Foundation/Foundation.h>
#import "StockHolding.h";

int main (int argc, const char * argv[]) {
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

StockHolding *bread = [[StockHolding alloc] init];
[bread setPurchaseSharePrice:100];
[bread setCurrentSharePrice:120];
[bread setNumberOfShares:100];

StockHolding *water = [[StockHolding alloc] init];
[water setPurchaseSharePrice:100];
[water setCurrentSharePrice:80];
[water setNumberOfShares:10];

StockHolding *tomatoes = [[StockHolding alloc] init];
[tomatoes setPurchaseSharePrice:100];
[tomatoes setCurrentSharePrice:50];
[tomatoes setNumberOfShares:1];

NSMutableArray *myStock = [NSMutableArray arrayWithObjects:bread, water, tomatoes, nil];

for (StockHolding *s in myStock)
{
    NSLog(@"Here is what I paid for my %p : %f", s, [s costInDollars]);
    NSLog(@"Here is what I earn for my %p : %f", s, [s valueInDollars]);

}

[pool drain];
return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:05:15.643

为什么不在`-(NSString *)description`StockHolding 类上实现该方法？然后你可以使用`%@`字符串格式，它会在那里输出描述。

或者，您也可以使用 . 输出 StockHolding 实例的任何其他字符串属性`%@`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T00:59:40.543

如果你想 NSLog 一个对象和它的指针名称，你可以在你的预处理器宏中添加这个#define`#define OLog(x) NSLog(@"%s = %@",#x, x);`

# iphone - iOS 文件下载

> ID：13853809
> 
> 赞同：0
> 
> 时间：2012-12-13T05:53:52.183
> 
> 标签：iphone, ios, download

> **可能重复：**
> [iOS 下载并在应用内保存图像](https://stackoverflow.com/questions/6238139/ios-download-and-save-image-inside-app)

我想下载一个文件。我找到了这个

`[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"]]`

我的问题是：

1.  文件保存在哪里？

2.  通过使用线程，是否有可能为下载构建状态栏？

3.  有没有办法改变内存（内部/外部）来保存文件？

现在我正在使用

`NSData *dataImage = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"]]; downloadStatus.text =@"size: %zd", malloc_size(dataImage);`

结果总是32。那不应该是实际图像的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:03:01.680

1.  文件未保存。它被加载/检索并转换为`NSData`对象。
2.  是的。但是，如果您这样做，您应该查看`NSURLConnection`特别是`NSURLConnectionDataDelegate`协议。您需要异步下载文件并将回调获取到委托中，以便能够更新您的状态栏。或者您可以使用 3rd 方网络库来简化整个事情，但最好了解幕后发生的事情。
3.  是的。您可以在`NSData`下载对象时将其另存为文件。如果您使用的是 Cocoa（不是 iOS），您可以使用`NSURLDownload`直接下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:02:42.760

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDownloadProgressDelegate:myProgressIndicator];
[request startSynchronous];
NSLog(@"Max: %f, Value: %f", [myProgressIndicator maxValue],[myProgressIndicator doubleValue]); 
```

您也可以点击此链接进行更多了解:) [http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:03:50.333

您可以将下载的数据分配给变量并在 UIImageView 中显示，如下所示。

```
NSData *dataImage = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"]];
self.imageViewYours.image = [UIImage imageWithData:dataImage]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T06:07:23.680

试试这个代码对我有用。图像将保存到您的相册。

```
 -(IBAction)save_Image:(id)sender
    {
        UIImageWriteToSavedPhotosAlbum([UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"Your URL"]]]], self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

            [self performSelectorOnMainThread:@selector(imageDownloaded) withObject:nil waitUntilDone:NO ];

    }

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if (error != NULL)
    {
        // handle error
    }
    else
    {
        // handle ok status
    }
}

- (void)imageDownloaded
{

      // network animation off
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    // do whatever you need to do after
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T06:10:51.517

由于您是 Obj-C 的新手，我首先要熟悉 NSURLConnection 和 NSURLConnectionDataDelegate（协议）。一旦您对知道发生了什么感到自在，就可以轻松切换到 AFNetworking 等网络库来简化事情。

# php - 在 LinkedIn 应用程序中请求用户权限

> ID：13853819
> 
> 赞同：0
> 
> 时间：2012-12-13T05:55:08.050
> 
> 标签：php, api, oauth, linkedin

使用LinkedIn的PHP api，如何在应用授权时请求用户权限？

这些是我需要的权限

*   您的个人资料概览
*   您的完整资料
*   您的电子邮件地址

我试过但找不到任何东西，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:57:40.970

看看文档[http://developer.linkedin.com/documents/authentication的最后一部分](http://developer.linkedin.com/documents/authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:09:38.960

将此添加到您的身份验证字符串中：`scope=r_basicprofile+r_emailaddress+r_fullprofile`

我将如下所示：

`https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress+r_fullprofile`

更多细节：http: [//developer.linkedin.com/documents/authentication#granting](http://developer.linkedin.com/documents/authentication#granting)

# php - 什么是stripslashes？

> ID：13853820
> 
> 赞同：6
> 
> 时间：2012-12-13T05:55:16.280
> 
> 标签：php, mysql, function

> **可能重复：**
> [在 mysql_real_escape_string 之后使用带斜杠](https://stackoverflow.com/questions/11295141/using-stripslashes-after-mysql-real-escape-string)

我最近一直在阅读有关预防 SQL 注入的内容，并且我正在尝试在不同功能之间建立一些理解，以便我可以学习基础知识。

我已经阅读`mysql_real_escape_string`并了解它基本上是转义它认为“特殊”的字符，以便它不会与 SQL 语法混淆？

现在，假设这至少在某种程度上是正确的 - 是否需要将该`stripslashes`函数与`mysql_real_escape_string`? 我想知道它是什么`stripslashes`以及它的用途。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T06:00:22.753

如果`stripslashes`在 using 之后立即使用 on 输入`mysql_real_escape_string`，您将有效地撤消它。使用 可能还有其他原因`stripslashes`，但就我而言，我只需要它来消除魔术引语的恐怖。它实际上是相反的`addslashes`。

`addslashes`不一定像*那样*转义输入`mysql_real_escape_string`，并且它们不能用于相同的目的。

甚至更好的是`mysql_*`，您应该阅读使用准备好的语句，如 in [`PDO`](http://us2.php.net/manual/en/class.pdo.php)。然后你甚至不必担心`mysql_*`or `stripslashes`（魔术引号除外）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T06:01:10.790

该函数[`stripslashes()`](http://php.net/stripslashes)将取消转义用反斜杠转义的字符，`\`. 它通常用于通过 转义的字符串[`addslashes()`](http://php.net/addslashes)，或者如果您的 PHP 配置已[`magic_quotes`](http://php.net/magic_quotes)启用。

当使用 SQL 转义函数时[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)，不需要使用`stripslashes()`，因为 MySQL 适配器只会在插入数据库时​​转义值 - 斜杠不会保留在实际值中。如果您要`stripslashes()`在已经使用 转义的变量上使用`mysql_real_escape_string()`，它将删除斜杠，就好像它是使用转义的一样`addslashes()`- 虽然毫无意义。

如果您的目标是防止 SQL 注入，我强烈建议您研究与旧方法相反的[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO 。](http://php.net/manual/en/book.pdo.php)`mysql_`MySQLi 和 PDO 都提供准备好的语句，如果使用得当，可以防止 SQL 注入，而无需记住调用特殊的转义函数*或*担心您的数据是否会被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T06:02:31.290

stripslashes 函数用于`Un-quotes a quoted string`

例子 ：

```
<?php
echo stripslashes("how\'s going on?");
?> 
```

上面代码的输出将是：

```
how's going on? 
```

更多细节：

[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T06:12:18.983

查看

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)
[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)
[http://php.net/manual/en/mysqli。真正的转义字符串.php](http://php.net/manual/en/mysqli.real-escape-string.php)

转义函数添加斜杠“\”来转义可用于终止有效查询字符串（而不是查询本身）以防止注入的字符。stripslashes 函数用于删除这些斜杠，但是它们在构建查询字符串时没有实际用途，因为它们删除了所需的斜杠。

MySQL 的结果不是“斜线”（转义），因此在处理结果时不需要使用斜线。

# javascript - Javascript - 在字段上键入时自动设置字段值

> ID：13853822
> 
> 赞同：2
> 
> 时间：2012-12-13T05:55:47.340
> 
> 标签：javascript, ruby-on-rails, date

我有使用rails的表单注册..所以基本上我需要做一个功能，如果你在字段ID上输入ID，它将自动

如果您在 ID 字段中输入

*   前 4 位直接（自动）生成到年份
*   接下来的 2 位数字将直接（自动）生成到月份
*   接下来的 2 位数字将直接（自动）生成到日期

我在 _form.html.erb 上使用 datepicker 作为日期字段..

```
<div class="field">
    <%= f.label :id, "ID" %><br />
    <%= f.text_field :id %>
  </div>
  <div class="field">
    <%= f.label :dob, "Date Of Birth (YY-MM-DD)" %><br />
    <%= f.text_field :dob %>
</div> 
```

users.js.coffee

```
 jQuery ->
  $('#user_tanggallahir').datepicker({ dateFormat: 'yy-mm-dd' }) 
```

我想在字段上自动输入日期..

**更新**

我有 javascript，例如[http://jsfiddle.net/f8rUF/10/](http://jsfiddle.net/f8rUF/10/) 但是，我想要日期（dob）字段的格式，例如 1990-01-12 (YY-MM-DD)

希望你能帮我解决这个问题；）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:19:35.317

更新解决了..

我使用子字符串来获取 8 个字符串

```
st = (v.substring(0,8)) 
```

[http://jsfiddle.net/f8rUF/19/](http://jsfiddle.net/f8rUF/19/)

# macos - 如何使用符号链接在 Mac OS 中使用 emacs

> ID：13853824
> 
> 赞同：3
> 
> 时间：2012-12-13T05:56:08.710
> 
> 标签：macos, unix, emacs, symlink

我想创建一个命令行可执行文件，它将产生一个 emacs 窗口/应用程序。我在网上搜索，发现 Mac 附带的 emacs 在 X11 窗口中不支持，所以我从[http://emacsformacosx.com/](http://emacsformacosx.com/)下载了最新的 emacs并安装在我的 mac 中。
然后我转到 /usr/bin 目录并创建一个符号链接，如下所示：

```
sudo ln /Applications/Emacs.app/Contents/MacOS/Emacs xemacs 
```

当我通过 ./xemacs 运行这个符号链接时，它说（。表示 /usr/bin）：

> 警告：依赖于架构的数据目录（/Users/david/src/emacs-dev/ftp-versions/emacs-24.2/nextstep/Emacs.app/Contents/MacOS//libexec/emacs/24.2/x86_64-apple-darwin/ ） 不存在。警告：独立于架构的数据目录 (/Users/david/src/emacs-dev/ftp-versions/emacs-24.2/nextstep/Emacs.app/Contents/Resources/share/emacs/24.2/etc/) 不存在。错误：找不到字符集目录：/Users/david/src/emacs-dev/ftp-versions/emacs-24.2/nextstep/Emacs.app/Contents/Resources/share/emacs/24.2/etc/charsets Emacs 将无法正常工作没有字符映射文件。请检查您的安装！

但是，如果我在目录 /Applications/Emacs.app/Contents/MacOS/ 中运行 Emacs 二进制文件，它会启动应用程序而不会出现任何错误。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:32:16.220

到目前为止，我认为最好的方法是在 /usr/bin 下创建一个可执行脚本，它将执行二进制文件 /Applications/Emacs.app/Contents/MacOS/Emacs。我没有使用“open”命令的原因是我需要使用一些 Emacs 二进制参数。与“open”相比，此方法可以生成多个 emacs 实例。

脚本是：

```
#! /bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$@" 
```

然后通过执行 chmod +x script.sh 使其可执行

然后制作符号链接

ln -s "/usr/local/bin/script.sh" /usr/local/bin/xemacs

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T06:38:02.123

您可以使用别名：`alias emacs="open -a Emacs --args <youroptions>`. 该选项`--args`允许您将选项直接传递给 emacs（例如，`-q`避免评估 init 脚本）。

# objective-c - obj c，5 种颜色，数组，在 tableview 中一遍又一遍地使用它们

> ID：13853832
> 
> 赞同：0
> 
> 时间：2012-12-13T05:56:29.423
> 
> 标签：objective-c, uitableview, xcode4.5, modulus

我希望能够创建一个具有例如 4 种颜色的数组。然后在我的 tableview 单元格中使用它们，在 cellForRowAtIndexPath 内。像这样：

```
-----------------
|      red      |
-----------------
-----------------
|      blue     |
-----------------
-----------------
|     yellow    |
-----------------
-----------------
|     green     |
-----------------
-----------------
|      red      |
-----------------
-----------------
|      blue     |
-----------------
-----------------
|     yellow    |
-----------------
-----------------
|     green     |
----------------- 
```

等等。我可以在 javascript 中使用模数来做到这一点，但在 xcode/obj c 中我无法弄清楚。我到处找。我设法改变每一秒，或者只是完全随机的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:12:46.093

It is very simple just find the modulus of total number of colors which you wants to apply in `cellForRowAtIndexPath` method of `UITableView`. Which solves your problem. Still you are facing any problem then fell free to ask your problem again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:01:41.783

您可以执行以下操作：

```
 if(indexPath.row %4 ==0)
     {
              cellView.backgroundColor = [UIColor redColor];
     }
     else if(indexPath.row %4 ==1)
     {
              //setBackground to be the second color
     }
     else if(indexPath.row %4 ==2)
     {
              //setBackground to be the third color
     }
     else
     {
           //setBackground to be the fourth color
     } 
```

这样每个你都会得到每四行重复的颜色，我希望这会有所帮助，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:02:35.283

C 中的模数是 % 运算符，就像在 JavaScript 中一样。您可以将 indexPath.row % number_of_colors 带到颜色索引中。

# c# - 使用POP3如何下载excel附件

> ID：13853835
> 
> 赞同：0
> 
> 时间：2012-12-13T05:56:48.853
> 
> 标签：c#

下面的代码适用于 CSV 文件，但是当我们使用相同的代码读取 excel 文件时，它会在文件中返回不同的字母

```
foreach (MimeAttachment attach in msg.Attachments)
{
if (attach.Filename != "")
{
//read data from attachment
string myString = attach.Body.Replace("=\r\n", ""); //to eliminate the '=\r\n' from email attachemnt
Byte[] b = GetBytes(myString);

// save attachment to disk
System.IO.MemoryStream mem = new System.IO.MemoryStream(b, false);
FileStream outStream = new FileStream(DownloadFilePath + "\\" + attach.Filename, FileMode.Create);
mem.WriteTo(outStream);
mem.Close();
outStream.Flush();
outStream.Close();
}
} 
```

前任：

```
0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAACAAAAiwAAAAAAAAAA
EAAAjQAAAAEAAAD+////AAAAAIgAAACMAAAA////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////8J
CBAAAAYFAGcyzQfJgAEABgYAAOEAAgCwBMEAAgAAAOIAAABcAHAACQAAYXNoYWFyIE0uICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:06:15.893

这对我有用

```
foreach (OpenPop.Mime.MessagePart attachment in attachments)
                        {
                            if (attachment != null)
                            {
                                string ext = attachment.FileName.Split('.')[1];

                                Filename = DateTime.Now.Ticks.ToString();
                                FileInfo file = new FileInfo((AppDomain.CurrentDomain.BaseDirectory + "Downloaded//") + Filename + ".csv" );

                                // Check if the file already exists
                                if (!file.Exists)
                                {
                                    attachment.Save(file);
                                }

                            }
                  } 
```

或试试这个

[如何在 C# 中保存电子邮件附件](https://stackoverflow.com/questions/2040321/how-to-save-email-attachments-to-local-hard-disk-in-c-sharp)

# c++ - 继承类中嵌套类的可见性

> ID：13853836
> 
> 赞同：1
> 
> 时间：2012-12-13T05:56:49.647
> 
> 标签：c++, templates, inheritance, visibility, nested-class

我处理的代码大致如下：

```
// List.h
template <typename T> class List{
    template <typename TT> class Node;
    Node<T> *head;
    /* (...) */
    template <bool D> class iterator1{
        protected: Node<T> this->n;
        public: iterator1( Node<T> *nn ) { n = nn }
        /* (...) */
    };
    template <bool D> class iterator2 : public iterator1<D>{
        public:
        iterator2( Node<T> *nn ) : iterator1<D>( nn ) {}
        void fun( Node<T> *nn ) { n = nn; }
        /* (...) */
    };
}; 
```

（如果需要上述代码的确切代码，请参考我[之前的问题](https://stackoverflow.com/questions/13852772/error-inherited-class-field-undeclared-according-to-g)）

```
// Matrix.h
#include "List.h"
template <typename T>
class Matrix : List<T> {
    /* (...) - some fields */
    class element {
        supervised_frame<1> *source; // line#15
        /* (...) - some methods */
    };
}; 
```

我在 g++ 中收到以下错误：

```
 In file included from main.cpp:2:
 Matrix.h:15: error: ISO C++ forbids declaration of ‘supervised_frame’ with no type
 Matrix.h:15: error: expected ‘;’ before ‘&lt;’ token 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:04:52.123

我相信`Matrix<T>::element`class 与 class 无关`List<T>`。所以我认为你应该有`typename List<T>::template supervised_frame<1>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:05:06.763

和你之前的问题类似——Use `typename List<T>::supervised_frame<1> *source;`This是因为`supervised_frame<1>`是依赖类型，即依赖于模板参数`T`

# bash - 获取整个文件路径或上传文件使用 bash shell cgi

> ID：13853838
> 
> 赞同：1
> 
> 时间：2012-12-13T05:57:06.023
> 
> 标签：bash, shell, file-upload

我想获取选择文件的文件路径，但是根据浏览器本身的安全性，无法读取文件路径。
例如，firefox 只读取文件名（ex test.txt）。
关心它，我该怎么做才能读取bash shell脚本中选择的文件按钮的文件路径？
我需要文件路径的原因是我想将文件上传到服务器，所以我想使用命令 cp 来做，比如：

`cp filepath(and filename) serverpath`

我可以使用简单的按钮（type=button 而不是 type=file）用特殊的方法（用 type=text 来做这个技巧）吗？
我试过的原始代码是：

```
#!/bin/sh

#=================================================
#   PATH defination
# ================================================

#=================================================
#   Main
# ================================================
echo "Content-type: text/html"
echo "Pragma: no-cache"
echo ""
echo "<HTML><HEAD>"
echo "<meta http-equiv=content-type content=text/html; charset=UTF-8>"
echo "<TITLE>$msg010</TITLE>"
. ${WWW_SCRIPTS_LIB_PATH}/style-init.sh
echo "</HEAD>"
echo "<BODY>"
ShowSubLogo "$msg010"

if [ "$CONTENT_LENGTH" != "" ]; then
    read data
    filesplit1=`echo $data | awk -F'&' '{print $1}'`

if [ "$filesplit1" != "fileis=" ]; then
    filename=`echo $filesplit1 | sed "s/%20/ /g" | cut -f 2 -d "="`
fi

fi

echo "<br> </br>"
echo "<br> </br>"
echo "$msg050"
echo "<br> </br>"
echo "<form name=Updfw_form method=post action=EippsUpdate.cgi>"
echo "$msg020"
echo "<input name='fileis' id='UpLoad' type='file'>"
echo "<br> </br>"
echo "<input name='update' value='$msg030' class=bton_over value=\"$com010\" type='submit' onmouseover=\"this.className='bton_out'\" onmouseout=\"this.className='bton_over'\">"
echo "<input name='cancel' value='$msg040' class=bton_over value=\"$com010\" type='reset' onmouseover=\"this.className='bton_out'\" onmouseout=\"this.className='bton_over'\">"
echo "</form>"
echo "</BODY></HTML>" 
```

它只是读取文件名，在 crome 浏览器中，它无法工作。

还是有另一种方法可以将文件上传到用户可以选择的服务器？我搜索并很少看 bash shell 版本的示例。

只是整个文件路径！或者上传文件到浏览器！

任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:01:55.770

不，那里没有。IE 告诉你是错误的。虽然我不确定如何滥用它，但我相当确信它确实是一个安全问题。

您必须添加另一个输入字段，用户将在其中填写文件应存储在服务器上的路径。

老实说，对于由人工操作的 Web 应用程序（而不是由特定客户端程序调用的 Web 服务），我看不出客户端上的路径和服务器上的路径有什么共同点的原因。通过提供单独的输入字段，您可以让用户自由地将文件放置在本地计算机上的任何位置。

如果它们实际上必须相同，那么可能有一些常见的应用程序，您可以捆绑脚本来执行上传（可能通过一些更合适的协议，如 ssh，调用接收脚本或使用 scp 或 sftp）具有适当的路径。

附带说明一下，shell 不太适合 CGI 编程，因为它使用了特殊字符，因此很难正确保护。

# jquery-mobile - 用于两页的 JQuery Mobile pageinit

> ID：13853841
> 
> 赞同：0
> 
> 时间：2012-12-13T05:57:26.180
> 
> 标签：jquery-mobile

我已经在下面带有 id 的 JQM 页面`page1`：

```
$('#page1').live('pageinit', function(event, data){

}); 
```

如果我有另一个带有 id 的 JQM 页面`page2`并且想要与 id 相同`pageinit`，`page1`如何调用它或添加事件而不复制事件中的所有代码`page1 pageinit`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:11:01.187

`$('#page1,#page2')`应该做的伎俩。

请参考 - [http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:58:55.730

I think it will be triggered only once in a multi-page template.

See page load events and page change events: [http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# c# - 如何将 checkboxlist 选定属性设为 true

> ID：13853843
> 
> 赞同：3
> 
> 时间：2012-12-13T05:57:31.047
> 
> 标签：c#, asp.net

在我的 aspx 页面中，我正在使用复选框列表控件并从数据库中填充数据。但是当我用来选择项目并调试我的代码时，选择的属性总是错误的。如何解决这个问题。

我的代码是

```
 <asp:CheckBoxList ID="chkProduct" Width="200px" Height="90px" runat="server"    
 RepeatDirection="Vertical" style="overflow-y: scroll;
                            overflow-x: scroll;">
                       </asp:CheckBoxList> 
```

代码背后

```
 for (int j = 0; j < chkProduct.Items.Count; j++)
    {
        //CheckBoxList chkProduct;
        foreach (ListItem list in chkProduct.Items)
        {
            if (list.Selected )
            {
                enquiryProducts = new Services.EnquiryProduct();
                enquiryProducts.IsDelete = false;
                enquiryProducts.ProductID = Convert.ToInt32(chkProduct.Items[j].Value);
                enquiryProductList.Add(enquiryProducts);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:05:09.110

如果您在回发时对列表进行数据绑定，则可能会丢失选中状态。您要确保当您对列表进行数据绑定时，您仅在`Page.IsPostBack`is时才执行此操作`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:09:10.860

你是否绑定了复选框列表。
它在页面加载上，然后它应该检查是否不是回发，如下所示

```
if (!Page.IsPostBack)
{
  //put your binding code here
   List<CommonServices.Product> productList = commonClient.GetProductList(string.Empty, null, 1); 
   chkProduct.DataSource = productList.OrderBy(i => i.Name); 
   chkProduct.DataTextField = "ProductCodeWithName"; 
   chkProduct.DataValueField = "ID"; 
   chkProduct.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T06:17:25.877

试试这个.. 将复选框列表的**autopostback 属性设置为 TRUE**

# javascript - Angular JS：IE 错误：达到 10 次 $digest() 迭代。中止

> ID：13853844
> 
> 赞同：27
> 
> 时间：2012-12-13T05:57:36.993
> 
> 标签：javascript, angularjs

我是 Angular 的新手，我遇到了一个与 IE 相关的问题。

这是我得到的 IE 错误。

```
Webpage error details

User Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Timestamp: Thu, 13 Dec 2012 04:00:46 UTC

Message: 10 $digest() iterations reached. Aborting!
Watchers fired in the last 5 iterations: [["fn: function $locationWatch() {\n      var oldUrl = $browser.url();\n\n      if (!changeCounter || oldUrl != $location.absUrl()) {\n\tchangeCounter++;\n\t$rootScope.$evalAsync(function() {\n\t  if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).\n\t      defaultPrevented) {\n\t    $location.$$parse(oldUrl);\n\t  } else {\n\t    $browser.url($location.absUrl(), $location.$$replace);\n\t    $location.$$replace = false;\n\t    afterLocationChange(oldUrl);\n\t  }\n\t});\n      }\n\n      return changeCounter;\n    }; newVal: 7; oldVal: 6"],["fn: function $locationWatch() {\n      var oldUrl = $browser.url();\n\n      if (!changeCounter || oldUrl != $location.absUrl()) {\n\tchangeCounter++;\n\t$rootScope.$evalAsync(function() {\n\t  if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).\n\t      defaultPrevented) {\n\t    $location.$$parse(oldUrl);\n\t  } else {\n\t    $browser.url($location.absUrl(), $location.$$replace);\n\t    $location.$$replace = false;\n\t    afterLocationChange(oldUrl);\n\t  }\n\t});\n      }\n\n      return changeCounter;\n    }; newVal: 8; oldVal: 7"],["fn: function $locationWatch() {\n      var oldUrl = $browser.url();\n\n      if (!changeCounter || oldUrl != $location.absUrl()) {\n\tchangeCounter++;\n\t$rootScope.$evalAsync(function() {\n\t  if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).\n\t      defaultPrevented) {\n\t    $location.$$parse(oldUrl);\n\t  } else {\n\t    $browser.url($location.absUrl(), $location.$$replace);\n\t    $location.$$replace = false;\n\t    afterLocationChange(oldUrl);\n\t  }\n\t});\n      }\n\n      return changeCounter;\n    }; newVal: 9; oldVal: 8"],["fn: function $locationWatch() {\n      var oldUrl = $browser.url();\n\n      if (!changeCounter || oldUrl != $location.absUrl()) {\n\tchangeCounter++;\n\t$rootScope.$evalAsync(function() {\n\t  if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).\n\t      defaultPrevented) {\n\t    $location.$$parse(oldUrl);\n\t  } else {\n\t    $browser.url($location.absUrl(), $location.$$replace);\n\t    $location.$$replace = false;\n\t    afterLocationChange(oldUrl);\n\t  }\n\t});\n      }\n\n      return changeCounter;\n    }; newVal: 10; oldVal: 9"],["fn: function $locationWatch() {\n      var oldUrl = $browser.url();\n\n      if (!changeCounter || oldUrl != $location.absUrl()) {\n\tchangeCounter++;\n\t$rootScope.$evalAsync(function() {\n\t  if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).\n\t      defaultPrevented) {\n\t    $location.$$parse(oldUrl);\n\t  } else {\n\t    $browser.url($location.absUrl(), $location.$$replace);\n\t    $location.$$replace = false;\n\t    afterLocationChange(oldUrl);\n\t  }\n\t});\n      }\n\n      return changeCounter;\n    }; newVal: 11; oldVal: 10"]]
Line: 7859
Char: 6
Code: 0
URI: http://localhost:8080/__assets__/lib/angular/angular.js 
```

除了 IE 8 和 IE 9 之外的任何其他浏览器都不会发生这种情况。

我有一块手表正在查看包含位置过滤器的内容过滤对象。

我的问题是为什么它不会发生在除 IE 之外的任何其他浏览器上，我应该怎么做才能摆脱它。提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-08T23:55:27.000

Tiago Roldão 绝对正确。我有完全相同的问题。调试后，我在我的代码中意识到我有

```
location.hash = "#/app/" + id; 
```

这会导致无限循环问题。经过一番研究，我发现了这个

```
$location.path("/apps/" + id); 
```

完美解决了我的问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-07T14:15:39.993

我遇到了相同的错误问题，看起来相同。Chrome\FF 工作正常，但 IE 失败。我点击了我的应用程序中的一些链接，有时会出现此错误，有时不会。

1）在我看来，我有几个看起来像这样的链接：

```
<a href="#" ng-click="addIP(ip)">Add some IP</a> 
```

2）单击这些链接的处理程序将新对象添加到 IpRanges 集合中，如下所示：

```
$scope.IpRanges.push(ip); 
```

3）集合本身被ng-repeat绑定在视图中，我认为IE无法很好地处理这种情况 - 可能绑定\添加\应用事件的顺序不正确，否则......点击链接后我有 # 符号添加到 url，有时它会闪烁，然后我有一个错误。所以我删除了 href 属性，一切正常：

```
<a href="" ng-click="addCurrentIP()">Add as allowed IP</a> 
```

对于类似的情况，可能最好使用 span 或 div。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-28T15:32:34.953

在调用 $window.history.back() 时（尤其是在 Windows Phone 中），我在 IE9、IE10 中使用 AngularJS v1.2.13 时遇到了同样的问题。

似乎根本原因是 IE 中的 $window.history.back() 在 $locationWatch() 被触发之前更改了 href，因此 oldUrl 将包含新的 Url，并且将角度抛出到无限的 $digest 中。

立即解决的方法是将调用 $window.history.back() 替换为以下内容：

```
setTimeout(function () 
{
    $window.history.back();
}, 0); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-13T12:08:54.423

我可以从您的错误报告中看出您有一个用于 changeCounter 变量的 $watch，并且这个观察器函数：

```
function $locationWatch() {
    var oldUrl = $browser.url();
    if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;
        $rootScope.$evalAsync(function () {
            if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl)
                .defaultPrevented) {
                $location.$$parse(oldUrl);
            } else {
                $browser.url($location.absUrl(), $location.$$replace);
                $location.$$replace = false;
                afterLocationChange(oldUrl);
            }
        });
    }
    return changeCounter;
}; 
```

如果 $browser.url() 不等于 $location.absUrl()，则 changeCounter 的值会增加。由于 $watch 函数只能执行 10 次更改/反应循环，因此在这 10 次迭代之后它会出错。当您更改正在观看的值时，它最终会中断。

我会记录这些值 - $location.absUrl() 和 $browser.url()，看看为什么在其他浏览器中匹配，但在 ie 中不匹配。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-22T12:02:25.393

我在 IE 10 中遇到问题。我正在使用

```
window.location.href = '#/'; 
```

用于更改路线。用下面的代码替换它

```
$location.path('/'); 
```

解决了这个问题

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-11T12:29:56.417

## TLDR

如果您正在使用，[`ui-router`](https://github.com/angular-ui/ui-router)那么您也可以使用

```
$state.go('details', {id:item.ID}); 
```

## 背景

我正在使用以下功能从列表视图导航到详细信息视图，以便您可以单击任何带有 的内容`ng-click="details(item)"`，在我的情况下`tr`是在列表中：

```
$scope.details = function (item) {
    $window.location.href = "#/details/" + item.ID;
} 
```

`10 $digest() iterations reached`但我在 IE中感到恐惧。

## 供参考

在 Tiago 的回答之后，我在 AngularJS v1.2.0rc1 angular.js line 7650 中放置了一个断点。

```
// update browser
var changeCounter = 0;
$rootScope.$watch(function $locationWatch() {
  var oldUrl = $browser.url();
  var currentReplace = $location.$$replace;

  if (!changeCounter || oldUrl != $location.absUrl()) {
    changeCounter++; /* <-- breakpoint here, line 7650 */
    $rootScope.$evalAsync(function() {
      if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).
          defaultPrevented) {
        $location.$$parse(oldUrl);
      } else {
        $browser.url($location.absUrl(), currentReplace);
        afterLocationChange(oldUrl);
      }
    });
  }
  $location.$$replace = false;

  return changeCounter;
}); 
```

## 结果

来自 Chrome 的输出

*   断点仅在加载详细信息页面时被击中，并且只有一次。
*   `oldUrl`（即`$browser.url()`报告旧网址（即列表一）
*   `$location.absUrl()`正在报告详细信息网址。

来自 IE7,8 的输出

*   断点被连续击中。
*   `oldUrl`（即`$browser.url()`报告新网址（即详细信息之一）
*   `$location.absUrl()`仍在报告列表网址。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-13T19:41:02.237

我在尝试重定向到其他页面时遇到了这个问题

```
$window.location.href = '#/path/' 
```

通过更改为解决：

```
$location.path('/path/'); 
```

# asp.net-mvc-3 - 在 MVC 3 中使用 MapHttpRoute

> ID：13853847
> 
> 赞同：2
> 
> 时间：2012-12-13T05:57:41.640
> 
> 标签：asp.net-mvc-3

我想在 MVC 3 中使用 HttpRouteCollectionExtensions.MapHttpRoute 方法。此方法是否仅针对 MVC 4 设计？

我已经花了几个小时，但找不到 MVC 3 的替代方案。如何实现与 MapHttpRoute 在 MVC 3 中相同的功能？

# c++ - 如何使用 QT 打印 prn 文件？

> ID：13853854
> 
> 赞同：0
> 
> 时间：2012-12-13T05:59:03.290
> 
> 标签：c++, qt4

我有一个“.prn”文件，我想在本地连接的打印机上打印它。如何将“.prn”文件发送到打印机？我如何使用 QT 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-28T08:04:06.703

执行启动后添加等待完成

```
QProcess *process = new QProcess(this);
QString program = "cmd.exe";
QStringList arguments;
arguments << "/K";
arguments << QString("COPY /B %1 %2").arg(prnfilename,printername);
process->start(program, arguments); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:27:29.767

既然你想要它用于 Windows - 这只是一个疯狂的猜测......只需使用 QPrintDialog 来获取所需的打印机名称，并希望你知道 prn 文件的名称，然后你做这样的事情：

```
QProcess    proc;
QStringList args = QStringList() 
    << "/K" 
    << QString("COPY /B %1 %2" ).arg(prn-filename).arg( printername );
proc.start( "cmd.exe", args ); 
```

这应该可以工作，因为您可以通过以下方式在 cmd shell afaik 上打印 png：

```
COPY /B full-filepath.prn \\PC-Name\Printer-Name 
```

我希望这有效/有帮助

# java - 如何将 JTable 的内容保存到文件中，然后在需要时将它们加载回来？

> ID：13853855
> 
> 赞同：-1
> 
> 时间：2012-12-13T05:59:06.960
> 
> 标签：java, swing, file, jtable, save

很抱歉，这是我第一次在这里发帖，我真的非常非常不擅长 java。

我的`JTable`一个面板中有一个，我需要做的就是将内容保存到一个文件中。当将某个字符串输入到`JTextfield`中时，文件会加载并填充`JTable`.

我不知道从哪里开始，我在 youtube 上搜索了帮助，但我很不走运。请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:25:58.893

```
 public Object[][] getTableData (JTable table) {
       (DefaultTableModel) dtm = (DefaultTableModel) table.getModel();
           int nRow = dtm.getRowCount(), nCol = dtm.getColumnCount();
           Object[][] tableData = new Object[nRow][nCol];
           for (int i = 0 ; i < nRow ; i++)
               for (int j = 0 ; j < nCol ; j++)
                   tableData[i][j] = dtm.getValueAt(i,j);
           return tableData;
       } 
```

您可以将 Jtable 中的值存储为数组，

之后将其写入文件...

```
 public void writeToFile()
      {
      try{
      FileWriter fstream = new FileWriter("out.txt");
      BufferedWriter out = new BufferedWriter(fstream);
      for(int i=0;i<array.length;i++){
            out.write(array[i].getBytes());
      }
      out.close();
      }catch (Exception e){
      System.err.println("Error: " + e.getMessage());
      } 
```

# java - 如何将多态json字符串转换为java bean类

> ID：13853857
> 
> 赞同：1
> 
> 时间：2012-12-13T05:59:11.513
> 
> 标签：java, json, rest, javabeans, jackson

如何将 json 映射到具有多态数据类型的 bean 类我有三种 json 语句模式

```
{
  actor:"ashok",
  verb:"completed"
} 
```

或这个

```
 {
      actor:["ashok","kumar"],
      verb:{
          disp:"en-us",
          url:{
             link:"url",
             tag:"tagname"
          }
      }
  } 
```

或者

```
{
      actor:{name:["ashok","kumar"],mail:["a@a.com","b@b.com"]}
      verb:{
          disp:"en-us",
          url:{
             link:"url",
             tag:"tagname"
          }
      }
  } 
```

我如何将所有这些类型的 json 映射到同一个 bean 类中。我需要一个多态 bean 类，它可以处理所有类型的 json 对象，还能够处理单个 sting 数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:04:42.633

你可以使用Gson。它提供 fromJson() 方法。

# iphone - 使用在另一个视图中完成的修改来更新 tableViewCell

> ID：13853867
> 
> 赞同：1
> 
> 时间：2012-12-13T05:59:46.277
> 
> 标签：iphone, ios

在我的应用程序中，我使用 tableview，其中每个单元格都添加 UIScrollView，在该 scrollView 中再次添加 UIView（此视图是从另一个视图类添加的）。当视图的触摸动作正在执行但当我滚动表格时，视图中的所有修改都在重新加载加载时的内容。

那么我们如何才能将视图的修改保存在当前tablecell中的另一个类中。

在 touchesEnded 方法中使用

```
[music.createTableView beginUpdates];
[music.createTableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationNone];
[music.createTableView endUpdates]; 
```

任何帮助或建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:31:20.947

假设，您正在使用 NSArray 在 tableview 的行中显示数据。在其中，您将保留另一个 NSArray 以在每一行中显示 UIView 数组。如果您使用 NSDictionary 来存储 UIView 的数据，您可以在该字典中设置一个标志，该标志将根据用户触摸而改变。希望它会帮助你。

# javascript - 跟踪事件触发了哪些函数

> ID：13853868
> 
> 赞同：0
> 
> 时间：2012-12-13T05:59:49.563
> 
> 标签：javascript, trace

我想跟踪一个按钮单击事件，以了解当用户单击按钮发送一些数据时会触发哪些函数。

前任：

```
<input type="button" id="btnPost" onclick="fire(... , ...)" /> 
```

或者

```
$("#btnPost").click(function() {
 // blah blah
}); 
```

在上述情况下，我想查看方法 fire 或 jQuery 代码。由于 JavaScript 的庞大规模，无法进行手动检查。

哪些工具可以帮助跟踪 JavaScript 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:05:00.987

我会在 Chrome 中执行此操作，但在 FF 两个中应该可以。

*   完全加载页面。
*   打开开发者工具
*   更改为来源选项卡。
*   单击暂停按钮（什么都不会发生。确保断点已启用，最右侧的图标）
*   然后单击按钮。
*   Chrome 应该进入它执行的下一个 javascript 行。

    ![截屏](../Images/848d5528bcb72ef30ba15ad4d61b8a62.png)

编辑：如何在 Firefox 上使用[Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)

![如何使用 Firebug 在 Firefox 上做同样的事情](../Images/fcd68aa865f597c58eeb5932f40f34b0.png)

# iphone - 使用 NSPredicate 从 db 文件中获取数据的问题

> ID：13853871
> 
> 赞同：0
> 
> 时间：2012-12-13T06:00:10.577
> 
> 标签：iphone, nspredicate

我有两个 NSManagedObject 类，UserInfo 和 Department（分别是一对一和一对多关系）这是我的代码，

// 用户信息.h

```
@interface UserInfo : NSManagedObject

@property (nonatomic, retain) NSDate * bDate;
@property (nonatomic, retain) NSString * firstName;
@property (nonatomic, retain) NSString * lastName;
@property (nonatomic, retain) NSString * userName;
@property (nonatomic, retain) Department *dept;

@end 
```

//部门.h

```
@class UserInfo;

@interface Department : NSManagedObject

@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSString * post;
@property (nonatomic, retain) NSString * location;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *user;
@end

@interface Department (CoreDataGeneratedAccessors)

- (void)addUserObject:(UserInfo *)value;
- (void)removeUserObject:(UserInfo *)value;
- (void)addUser:(NSSet *)values;
- (void)removeUser:(NSSet *)values;
@end 
```

用于从我使用的数据库中搜索特定用户，效果很好

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"firstName contains[cd] %@", NameTosearch]; 
```

但是，现在我可以使用什么样的谓词来获取所有用户与特定部门相关的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:20:22.707

您还可以在谓词中使用与对象的比较。

即，如果您有一个指向部门实例的指针：

...withFormat:@"dept = %@", dept"

在内部，CoreData 将 %@ 替换为对象的托管对象标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:24:19.730

搜索使用

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"firstName contains[cd] == %@", NameTosearch]; 
```

关注此博客以获取更多信息[http://rajneesh071.blogspot.in/](http://rajneesh071.blogspot.in/2012/10/predicates.html)
并关注我的回答[StackOverflow](https://stackoverflow.com/questions/13541371/remove-objects-using-nspredicate/13542899#13542899)

# javascript - 给定依赖项列表，如何将 Dojo 构建到单个文件中？

> ID：13853876
> 
> 赞同：11
> 
> 时间：2012-12-13T06:00:20.033
> 
> 标签：javascript, build, dojo

我有一个简单的 Dojo 应用程序，它只执行一次`require`调用，加载所有依赖项。问题是，虽然它非常简单，但最终还是要从服务器加载大约 100 个文件。我尝试使用 Dojo 构建系统解决该问题，但似乎我的理解不够深入。

所以我的问题是 - 给定一个依赖列表，如下所示：

```
["dojo/parser",
 "dijit/registry",
 "dojo/dom",
 "dojo/on",
 "dojo/query",
 "dojo/dom-class",
 "dojo/request",
 "dijit/form/ValidationTextBox", 
 "dijit/form/Select",
 "dijit/form/NumberSpinner",
 "dijit/form/CheckBox",
 "dijit/layout/ContentPane",
 "dijit/Dialog",
 "dojo/NodeList-traverse",
 "dojo/domReady"] 
```

如何设置构建以创建单个文件（或多个文件，而不是 100 个文件）dojo 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T06:06:58.330

如果您使用的是 Dojo 的`require()`加载器，那么您可以使用[构建工具](http://ofps.oreilly.com/titles/9780596516482/build_tools_comma_testing.html)来组合文件和缩小文件。根据该站点，构建工具不包含在正式版本中，因此您必须从[开发版本](https://github.com/dojo/util)中获取它们（具体来说，查看`buildscripts`目录）。

Dojo 文档包含有关其[构建系统](http://dojotoolkit.org/reference-guide/1.8/build/index.html#build-index)的一些信息，您可能会觉得这些信息很有用。

**作为概念证明**，以下是我采取的步骤：

1.  转到[下载页面](http://dojotoolkit.org/download/)，下载 Source Dojo Toolkit SDK（它是唯一一个包含构建所需的 util 脚本）。

2.  提取到一个位置（为了这篇文章，假设它是`/opt/dojo-toolkit`）。

3.  *从 Dojo 工具包目录*（即`/opt/dojo-toolkit`），运行 build util：（`./util/buildscripts/build.sh action=release htmlFiles=/path/to/my/index.html`小心，这让我 5 岁的双核设备慢了下来）

示例`index.html`（这个正好在`dojo-toolkit`目录中）：

```
...
<head>
    <script src="dojo/dojo.js"></script>
    <script>
    dojo.require("my.test");
    </script>
</head>
... 
```

该`require()`调用查找嵌套模块（我无法让它与顶级模块一起使用），因此在这种情况下，我有一个`my`目录，`dojo-toolkit`其中包含一个`test.js`文件。该文件是加载所有依赖项的主要“引导程序”文件。我只是在我的随机`require()`调用：

```
dojo.require('dijit.ProgressBar');
dojo.require('dijit.Tree'); 
```

那应该这样做。基本上，针对您的 HTML 文件（包含对 dojo.js 的引用的文件）运行构建实用程序可确保从顶部开始找到所有依赖项。

*注意*：构建系统`release`使用构建的输出创建一个目录，但一开始看起来有点误导 - 它似乎已经缩小了每个单独的文件，但如果你查看你的实际引导文件（`my/test.js`在这种情况下），它将是一个组合的、缩小的文件，其中包含（我认为）运行应用程序所需的一切。

* * *

否则，如果你使用 AMD 风格`require()`的（如 require.js 中的），你可以使用它的[优化工具](http://requirejs.org/docs/optimization.html)。根据该网站，它将：

1.  将所有依赖文件（包括 require.js 本身）合并到一个文件中。它分析`require()`调用以确定它需要组合哪些文件。

2.  使用 UglifyJS（默认）或 Closure Compiler 压缩你的 JavaScript。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T18:06:01.217

我需要做同样的事情，这就是我解决它的方法。

如果您阅读了有关如何创建自定义构建的文档（[http://dojotoolkit.org/documentation/tutorials/1.8/build/](http://dojotoolkit.org/documentation/tutorials/1.8/build/ "http://dojotoolkit.org/documentation/tutorials/1.8/build/")），在“层”部分，他们会讨论创建自定义层。您可以在那里添加您需要的所有模块。这是我的自定义图层文件的示例：

```
layers : {
"dojo/dojo" : {
    include : [
            "dojo/dojo",
            "dojo/_base/window",//
            "dojo/dom",//
            "dojo/dom-class",//
            "dojo/ready",//
            "dojo/store/Memory"
    ],
    customBase : true,
    boot : true
}
} 
```

这将只将这些模块与引导加载程序一起构建到 dojo.js 中，以便您可以动态加载其他模块。

# python - 嵌套if的问题？

> ID：13853879
> 
> 赞同：0
> 
> 时间：2012-12-13T06:00:44.670
> 
> 标签：python, django, templates, if-statement, nested-if

> **可能重复：**
> [Django 模板语法错误](https://stackoverflow.com/questions/4014156/django-templates-syntax-error)

当我在此代码上使用**{% if request.user.is_authenticated %}**条件进行重定向时，它会引发错误`Invalid block tag: 'else'`

```
{% if request.user.is_authenticated %}

{% extends "pages/page.html" %}
{% load mezzanine_tags shop_tags i18n %}
{% block body_id %}category{% endblock %}
{% block main %}{{ block.super }}
{% regroup products by category as products_by_category %}
{% for c in products_by_category %}
......  
         {% for p in c.list %}     
......
        {% if p.num_in_stock == None %}
...
         {% else %}
         {% if p.num_in_stock < 4 %}
...
            {% endif %}
            {% endif %}
        .....        
                   {% endfor %}
......
{% endfor %}
{% endblock %}

{% else %}

<script>
window.location="/stylequiz/";
</script> 
```

如果我使用这个脚本，那么它不会出错

```
{% if request.user.is_authenticated %}
   <h1>welcome</h1>
{% else %}

<script>
window.location="/stylequiz/";
</script>
{% endif %} 
```

**我认为嵌套 if**一定有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:18:24.690

你不能把`{%extends%}`标签放在里面`{%if%}`。它应该是模板中的第一个标签。

来自 django docs[模板继承](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

*如果您在模板中使用 {% extends %}，它必须是该模板中的第一个模板标签。否则，模板继承将不起作用。*

# sql - 具有分组依据的数据透视表

> ID：13853880
> 
> 赞同：7
> 
> 时间：2012-12-13T06:00:44.833
> 
> 标签：sql, sql-server, sql-server-2008, pivot

```
select out.a,out.b from out
pivot (count([event]) for [date] in ([Mon],[Tues])) as event_count
group by out.a,out.b 
```

在执行此查询时，我收到以下错误：

> 多部分标识符 out.a,out.b 无法绑定

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T06:02:06.260

删除`GROUP BY`子句和`out`列的别名，`a`如下`b`所示：

```
select a, b, [Mon], [Tues] 
from out
pivot 
(
  count([event]) 
  for [date] in ([Mon],[Tues])
) as event_count; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/c7f45/3)

**请注意：**使用`PIVOT`表运算符时，您不需要显式指定分组元素，在您的情况`a, b`或源表中，您需要将其从查询和源表中删除。运算符将`PIVOT`自动计算出您想要的列`GROUP BY`，这些列是在您的情况下未在 the`date`或聚合元素中指定`event`的列，其余列将是分组列。

这就是为什么您必须明确列出列名而不是 的原因`FROM out`，以防表`out`包含除 之外的列`a, b, date, event`。在这种情况下，您必须这样做：

```
select a, b, [Mon], [Tues] 
from
(
   SELECT a, b, "date", "event" 
   FROM out
) t
pivot 
(
  count([event]) 
  for [date] in ([Mon],[Tues])
) as event_count; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T07:39:35.743

听起来您需要在 [Mon] 上替换 out.a 并在 [Tues] 上替换 out.b

```
SELECT [Mon], [Tues]
FROM out
PIVOT (
       COUNT([event]) FOR [date] in ([Mon],[Tues])
       ) AS event_count 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/943ea/2/0)上的演示[](http://sqlfiddle.com/#!3/943ea/2/0)

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T06:18:22.353

我不确定您的查询，但可能这就是您要查找的内容

```
Select a,b, [Mon],[Tues] from 
(
  Select a,b,date,event from out 
  group by a,b,date,event
)L
PIVOT
(
  count(event) for [date] in ([Mon],[Tues]) 
)  event_count 
```**

# ssl - 如何在启用 ssl 的情况下获得 Apache httpd 响应时间

> ID：13853882
> 
> 赞同：1
> 
> 时间：2012-12-13T06:00:50.100
> 
> 标签：ssl, apache, mod-ssl

我的 httpd.conf 有

`LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %T/%D" combined`

我在 access_log 中记录了以下信息

`10.xxx.xxx.xxx - uid [10/Dec/2012:21:52:20 -0800] "GET /file.ext HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0" 0/2105`

我特别在微秒内寻找服务器请求所需的时间。

当我尝试启用 mod_ssl 的相同 LogFormat 时，我没有在访问日志中获得相同的所需信息。

`httpd-ssl.conf has ' LogFormat "%U %T/%D" timediff '`

但我在 ssl_access_log 中只看到以下信息

`10.xxx.xxx.xxx - uid [10/Dec/2012:21:46:00 -0800] "GET /file.ext HTTP/1.1" 200 2742`

专家可以在这里帮助我吗？

# video - AMQP 是否适合构建视频广告分发系统？

> ID：13853887
> 
> 赞同：1
> 
> 时间：2012-12-13T06:01:29.290
> 
> 标签：video, rabbitmq, distribution, amqp, ads

我会在视频广告分发方面做一些工作。我的应用是不同地区有很多移动终端会播放视频广告。这些终端（例如安装在电梯中的终端）连接到控制服务器。当不同类型的视频广告在服务器上发布时，通过设计的策略分发到相关的终端。我的假设是我们使用基于 AMQP 的 rabbitmq 服务器来实现分发。终端在服务器上订阅不同的主题，服务器根据主题推送这些视频广告。

但据我所知，rabbitmq 更多用于消息通知。“消息”可以是某种视频类型吗？AMQP 是否适合这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:34:37.917

当您订阅视频数据库的链接时，您可以将 MQ 用作消息分发系统。客户端将根据主题收到一条消息，该消息将告诉它要下载和播放哪个视频。这样，您的代理就可以运行小型有效负载，但它仍然可以根据您的规范进行分发。

# sql - 通过存储过程将数据插入 SQL 后返回字符串

> ID：13853892
> 
> 赞同：2
> 
> 时间：2012-12-13T06:01:49.583
> 
> 标签：sql, sql-server-2008, stored-procedures

我是 SQL 新手，也是我第一次创建存储过程。

我应该插入数据并得到一个返回字符串。返回值应该被*成功插入*，或者如果失败，如果*用户名*已经存在，应该通知我..或者类似的东西

我被困在*错误代码中：*

所以这是我的代码..

```
Create Proc Mock_InsertUser 
(
@Username varchar(20),
@Password varchar(100), 
@fullName varchar(60),
@Activated bit, 
@Suspended bit 
)
as
Begin
  DECLARE 
    @Error INT,
    @rowcount INT,
    @log varchar(1000)

IF EXISTS(SELECT username FROM Users_mock WHERE username = @Username)
BEGIN
    SET @log = 'Username ' + @Username + ' already exists.'
    GOTO ERROR  
END

Insert into Users_mock 
  (username, [password], full_name, Activated, Suspended)
values 
  (@Username, @Password, @fullName, @Activated, @Suspended)

SELECT @Error = @@ERROR, @rowcount = @@ROWCOUNT

--if there is an error OR If row is not inserted..
IF @Error <> 0 OR @rowcount < 1
BEGIN
   SET @log = 'Failed to Insert Account.'
   GOTO ERROR
END

-----------------------------------------------------------
Error:

--Some code here
END 
```

对不起，糟糕的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:23:59.603

你为什么不使用这样的东西：

```
CREATE PROCEDURE dbo.Mock_InsertUser
       (@Username VARCHAR(20),
        @Password VARCHAR(100),
        @fullName VARCHAR(60),
        @Activated BIT,
        @Suspended BIT )
AS 
BEGIN
    BEGIN TRY
       DECLARE @Error INT, @rowcount INT, @log VARCHAR(1000)

       -- check if user exists    
       IF EXISTS (SELECT * FROM dbo.Users_mock WHERE username = @Username) 
       BEGIN
          -- yes - just define the response message
          SET @log = 'Username ' + @Username + ' already exists.'
       END
       ELSE BEGIN      
          -- doesn't exist - insert data
          INSERT INTO 
              dbo.Users_mock(username, [password], full_name, Activated, Suspended)
          VALUES
              (@Username, @Password, @fullName, @Activated, @Suspended)

          -- set response message
          SET @log = 'Username ' + @Username + ' successfully inserted.'
       END
    END TRY
    BEGIN CATCH
       -- handle exceptions - you can access error details here, too, if you need to
       SET @log = 'Some really weird error happened.'
    END CATCH  

    -- return the message back to the caller    
    SELECT @Log
END 
```

看点：

*   `BEGIN TRY/END TRY - BEGIN CATCH/END CATCH`在 C# 中使用like 来处理**异常**- 无需不断检查`@@ERROR`值....

*   基本上只是检查用户的存在 -`@Log`相应地设置消息。如果用户不存在，将其插入并将`@Log`消息设置为“成功”

*   不需要标签，GOTO 和其他类似的东西....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:25:29.220

使用 ELSE 关键字：

```
IF EXISTS(SELECT username FROM Users_mock WHERE username = @Username)
BEGIN
    SET @log = 'Username ' + @Username + ' already exists.'
    SELECT @log --this end the stored procedure. it is like the return keyword.
END
ELSE
BEGIN
    Insert into Users_mock 
    (username, [password], full_name, Activated, Suspended)
    values 
    (@Username, @Password, @fullName, @Activated, @Suspended)

    DECLARE @Error = @@ERROR 
    DECLARE @rowcount = @@ROWCOUNT 

    --if there is an error OR If row is not inserted..
    IF @Error <> 0 OR @rowcount < 1
    BEGIN
        SET @log = 'Failed to Insert Account.'
        SELECT @log
    END
END 
```

# iphone - 电子邮件问题：想在没有额外窗口的情况下发送电子邮件

> ID：13853895
> 
> 赞同：0
> 
> 时间：2012-12-13T06:02:15.853
> 
> 标签：iphone, email, sendmail, mfmailcomposeviewcontroller, mfmailcomposer

我想在不显示 MFMailComposeViewController 的情况下发送电子邮件。我只想将电子邮件发送到一些电子邮件序列（因此用户应该只看到我的微调器，而不是带有发送按钮的 MFMailComposeViewController）。

我知道发送电子邮件的唯一方法是：（但这不是我想要的）

```
-(void)showMessageController:(id)sender
{

    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
    if (mailClass != nil)
    {
        // We must always check whether the current device is configured for sending emails
        if ([mailClass canSendMail])
        {
            [self displayComposerSheet];
        }
        else
        {
            [self launchMailAppOnDevice];
        }
    }
    else
    {
        [self launchMailAppOnDevice];
    }
}

// Displays an email composition interface inside the application. Populates all the Mail fields. 
-(void)displayComposerSheet 
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    [appDelegate setNavigationBarTextured:YES navigationBar:picker.navigationBar];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Please, look at my photo!"];

    // Attach an image to the email (mydata - data of the image)
    [picker addAttachmentData:myData mimeType:@"image/png" fileName:@"photo"];

    // Fill out the email body text
    NSString *emailBody = @"Hello!\nPlease, have a look at my photo!";
    [picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
    [picker release];
}

// Launches the Mail application on the device.
-(void)launchMailAppOnDevice
{
//  NSString *recipients = @"mailto:first@example.com?cc=second@example.com,third@example.com&subject=Hello from California!";
    NSString *recipients = @"mailto:subject=Please, look at my photo!";

    NSString *body = @"&body=Hello!\nPlease, have a look at my photo!";

    NSString *email = [NSString stringWithFormat:@"%@%@", recipients, body];
    email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
} 
```

如何在没有 MFMailComposeViewController 的附加屏幕的情况下发送电子邮件？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:07:01.730

您可以创建[PHP 脚本来发送电子邮件](http://email.about.com/od/emailprogrammingtips/qt/How_to_Send_Email_from_a_PHP_Script.htm)，并可以使用从设备传递的 To、Message、Subject 调用 php 服务调用，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:07:54.407

您可以通过 Web 服务来实现。编写一个 Web 服务，将邮件正文和收件人的电子邮件地址、主题等作为参数并从后端发送邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T06:14:39.863

Apple 没有提供任何 API 可以让您在没有用户交互的情况下发送电子邮件。

# wpf - 视图注入的视图生命周期 - PRISM

> ID：13853896
> 
> 赞同：2
> 
> 时间：2012-12-13T06:02:20.993
> 
> 标签：wpf, prism, region

我正在学习复合应用程序的概念。我使用统一容器创建了 prism 应用程序。我的一个区域配置为内容控制 - 在这个区域中，我只想显示单个视图。

我正在以另一种方式使用视图注入：

```
object lastView;

    // View injection
    IRegion region = regionManager.Regions["MainRegion"];

    var ordersView = container.Resolve<OrdersView>();
    lastView = ordersView;
    region.Add(ordersView, "OrdersView");
    region.Activate(ordersView); 
```

这个区域的视图经常切换。在我切换视图之前我使用`region.remove(lastView)` 并添加下一个视图，如上面的代码。

我不确定它是否是一个好的实现，我有几个问题：当我使用 region.remove 方法时，删除的视图是否正在处理？因为如果不是经过长时间运行，我将有严重的内存泄漏。在避免内存泄漏的同时，在区域中实现单一视图的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T08:33:26.367

通过*内存泄漏*，我猜您是在谈论垃圾收集器是否会收集该视图 - 例如，当您删除它时容器是否仍在引用它。

对象解析后是否保留引用的决定取决于您在注册该对象时使用的[LifeTime Manager的类型。](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx)

尽快回答您的问题 - 使用的默认 LifeTime 管理器`RegisterType`是**TransientLifetimeManager**，其中 Unity 为每次调用 Resolve 或 ResolveAll 方法创建*一个请求类型的新实例*。

您可能正在寻找的是**ExternallyControlledLifetimeManager**：

> 此生命周期管理器允许您向容器注册类型映射和现有对象，以便当您调用 Resolve 或 ResolveAll 方法或依赖机制将实例注入基于属性或的其他类时，它***仅维护对其创建的对象的弱引用***该类中的构造函数参数。这允许其他代码在内存中维护对象或释放它，并使您能够保持对现有对象的生命周期的控制或允许其他一些机制来控制生命周期。

如果您想控制视图的生命周期，请考虑将`RegisterType`与此 LifeTime Manager 一起使用。

此外，根据[这篇文章](http://www.ladislavmrnka.com/2011/03/unity-build-in-lifetime-managers/)- 在已解析实例上调用 Dispose 的唯一生命周期管理器是**ContainerControlledLifetimeManager**（它创建单例实例）和**HierarchicalLifetimeManager**。在这些情况下，`Dispose`只有在释放生命周期管理器时才会调用。

# php - PHP 静态关键字和 create_function 问题

> ID：13853899
> 
> 赞同：1
> 
> 时间：2012-12-13T06:02:36.143
> 
> 标签：php

我最近在 PHP 中遇到了一些相当有趣的问题。我正在尝试在 PHP 中创建一个闭包并将其分配给一个静态变量，因此它只需要定义一次...

```
 static $hasParent = create_function( '$category, $parent_id', <<<'FUNC'
        ...code...
FUNC
); 
```

但是它告诉我`unexpected '(', expecting ',' or ';'`。这是一个PHP“功能”（阅读错误），还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:46:22.597

> **注意**：
> 
> 静态变量可以像上面的例子中看到的那样声明。尝试为这些作为表达式结果的变量分配值将导致解析错误。

参考： http: [//php.net/manual/language.variables.scope.php#language.variables.scope.static](http://php.net/manual/language.variables.scope.php#language.variables.scope.static)

* * *

所以，**不行**：

```
function foo() {
  static $bar = function () {
    echo 'bar';
  };

  echo 'foo', $bar();
}

foo(); 
```

**好的**：

```
function foo() {
  static $bar = null;
  if ($bar === null) {
    $bar = function () {
      echo 'bar';
    };
  }

  echo 'foo', $bar();
}

foo(); 
```

# sql - 如何更新依赖于另一个表的表记录

> ID：13853901
> 
> 赞同：0
> 
> 时间：2012-12-13T06:02:39.517
> 
> 标签：sql

我只是坚持更新下表列。考虑下面的脚本。

```
declare @Table1 Table  ( ID int Identity(1,1), UserCount int )
insert into @Table1 (UserCount) values (2),(3),(5)
declare @Table2 Table ( ID int Identity(1,1), Name varchar(10), IDRef int null)
insert into @Table2 (Name) values ('p1'),('p2'),('p3'),('p4'),('p5'),('p6'),('p7'),('p8'),('p9'),('p10') 
```

结果是

从@Table1 中选择 *

```
ID          UserCount
----------- -----------
1           2
2           3
3           5 
```

从@Table2 中选择 *

```
ID          Name       IDRef
----------- ---------- -----------
1           p1         NULL
2           p2         NULL
3           p3         NULL
4           p4         NULL
5           p5         NULL
6           p6         NULL
7           p7         NULL
8           p8         NULL
9           p9         NULL
10          p10        NULL 
```

根据`@Table1.UserCount`我需要更新`Table2.IDRef`值的值`@Table1.ID`。

预期结果是，

```
ID          Name       IDRef
----------- ---------- -----------
1           p1         1
2           p2         1
3           p3         2
4           p4         2
5           p5         2
6           p6         3
7           p7         3
8           p8         3
9           p9         3
10          p10        3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:13:04.283

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/7085)

**询问：**

```
declare @Table1 Table  ( ID int Identity(1,1), UserCount int )
insert into @Table1 (UserCount) values (2),(3),(5)
declare @Table2 Table ( ID int Identity(1,1), Name varchar(10), IDRef int null)
insert into @Table2 (Name) values ('p1'),('p2'),('p3'),('p4'),('p5'),('p6'),('p7'),('p8'),('p9'),('p10')

update t2
set t2.idref = t1.id
from (
    select *, rn=row_number() over (order by id)
      from @table1 t1
      join master..spt_values v on v.type='p'
                               and v.number between 1 and t1.UserCount
) t1
join (select *, rn=row_number() over (order by id)
        from @table2
) t2 on t1.rn=t2.rn

select * from @Table2
order by id 
```

**[结果](http://sqlfiddle.com/#!3/d41d8/7085/0)**：

```
| ID | NAME | IDREF |
---------------------
|  1 |   p1 |     1 |
|  2 |   p2 |     1 |
|  3 |   p3 |     2 |
|  4 |   p4 |     2 |
|  5 |   p5 |     2 |
|  6 |   p6 |     3 |
|  7 |   p7 |     3 |
|  8 |   p8 |     3 |
|  9 |   p9 |     3 |
| 10 |  p10 |     3 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:30:51.360

你可以这样做：

```
;WITH Digits
AS
(
  SELECT n
  FROM (VALUES(1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) d(n)
), TableRefs
AS
(
  SELECT 
    ID, 
    RefId = d.n,
    UserCount,
    ROW_NUMBER() OVER(ORDER BY(SELECT 1)) rownum
  FROM @table1 
  INNER JOIN Digits d ON n <= usercount
)
UPDATE t2
SET IDRef = tref.ID
FROM @table2 t2
INNER JOIN TableRefs tref ON t2.Id = tref.rownum; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/7101)

这将使`@table2`这样的：

```
| ID | NAME | IDREF |
---------------------
|  1 |   p1 |     1 |
|  2 |   p2 |     1 |
|  3 |   p3 |     2 |
|  4 |   p4 |     2 |
|  5 |   p5 |     2 |
|  6 |   p6 |     3 |
|  7 |   p7 |     3 |
|  8 |   p8 |     3 |
|  9 |   p9 |     3 |
| 10 |  p10 |     3 | 
```

# eclipse - Eclipse m2e“更新 Maven 项目”添加了一个不需要的 bin 目录

> ID：13853902
> 
> 赞同：9
> 
> 时间：2012-12-13T06:02:42.367
> 
> 标签：eclipse, m2e

我在 Eclipse 上遇到了一个奇怪的 m2e 行为：

1.  从远程 git 存储库克隆项目
2.  项目资源管理器中显示的 dir 结构没有 maven 特性，只有 root 和包中的 pom.xml。没有“JRE 系统库”，没有“Maven 依赖项”。没有“src/main/java”，只有“my.packages.1”、“my.packages.2”
3.  我使用 maven->Update Maven Project 更新项目。一切都显示得很好，除了创建了一个“bin”目录并且 bin dir 的内容与我从 git 签出的内容相同。

示例：在更新 maven 项目之前：

```
.settings/
src/
pom.xml
.gitignore 
```

更新maven项目后：

```
.settings/
src/
pom.xml
.gitignore
bin/  <------ this dir appears after update maven project
bin/.settings/  <----------- contents the same as outside dir
bin/src
bin/.gitignore
bin/pom.xml 
```

我应该如何避免这种奇怪的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T07:10:10.097

看来，在您执行“更新项目”之前，该`bin`目录已配置为输出目录。输出目录在 Eclipse 中默认是隐藏的（至少在 Package Explorer 和 Project Explorer 中）。当您将项目配置为 Maven 项目时，输出目录更改为`target/classes`. 您的 bin 文件夹现在只是另一个文件夹，不再隐藏。
由于您不再需要它，您可以安全地删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-08T11:46:06.620

它也发生在我身上，因为我`.classpath`从`.gitignore`. 我最初认为 windows 和 linux 开发人员之间可能存在一些冲突，但我错了，`.classpath`应该是相同的。

如果您没有`.classpath`. ，则在克隆时，java builder 会在 maven builder 重新创建一个干净的`.classpath`.

结论，提交并推送`.classpath`，这不再发生。

# wordpress - WordPress：从简码中删除 #038

> ID：13853908
> 
> 赞同：0
> 
> 时间：2012-12-13T06:02:59.613
> 
> 标签：wordpress, special-characters, shortcode

简码的简单示例：

```
function s_print( $atts ){
    return 'http://abc.com/?foo=1&bar=2';
}
add_shortcode( 'my_shortcode', 's_print' ); 
```

它返回：

```
http://abc.com/?foo=1&#038;bar=2 
```

此函数通过 shortcode 插入页面正文的链接`[my_shortcode]`，但`&`始终更改为`&#038`，这会破坏链接（它不再工作）。我用谷歌搜索了很多。有一些解决方案：

```
wp_specialchars_decode($foo);
remove_filter('the_content','wptexturize'); 
```

但这些似乎只用于主题（functions.php），它不适用于简码（我尝试在简码函数之前或内部添加它）。

我不想落入最后一个解决方案，它正在评论 WordPress`formatting.php`文件中的一些行，因为我正在开发一个将被许多人使用的插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T06:36:13.780

我有一个类似的问题，我`clean_url`用过滤器解决了这个问题。[在此处](https://stackoverflow.com/questions/9504142/loading-google-maps-api-with-wp-enqueue-script/9504653#9504653)查看我的答案的编辑。

它不在简码中，所以我不能保证它会在您的特定情况下工作。不过可能值得一试。

***oyatek***编辑**（ 来自上述链接的修改解决方案）：**

 **```
function so_handle_038($content) {
    $content = str_replace(array("&#038;","&amp;"), "&", $content); 
    return $content;
}
add_filter('the_content', 'so_handle_038', 199, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-28T00:25:45.040

事实上，当您使用可视化编辑器时，`&`将更改为`&amp;`. 但是如果你使用文本编辑器，single`&`后面没有字符保持不变，而`&sth`将更改为`&#038;sth`.

总共`&`将更改为`&amp;`或`&#038;`。我认为上面的解决方案：

```
function so_handle_038($content) {
    $content = str_replace(array("&#038;","&amp;"), "&", $content); 
    return $content;
}
add_filter('the_content', 'so_handle_038', 199, 1); 
```

是一种矫枉过正，因为在你的情况下`so_handle_038();`解码所有`&amp;`s 和`&#038;`s `$content`，你只需要解码`$atts`数组中的那些。您的简码条目可能是这样的：

```
[my_shortcode url="http://abc.com/?foo=1&bar=2" /] 
```

将`$atts`是：

```
array( 'url' => "http://abc.com/?foo=1&amp;bar=2" ) 
```

或者：

```
array( 'url' => "http://abc.com/?foo=1&#038;bar=2" ) 
```

所以你只需要解码`$atts['url']`：

```
html_entities_decode($atts['url']); 
```

在你尝试对它做任何事情之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T13:12:44.913

这是我使用的一个创可贴黑客，基本上是为了解决 wordpress 中的问题（因为我的链接在 iFrame 中），我去了 Bitly 并创建了一个没有 & 符号的链接！所以最后我得到了一个链接，它没有任何 & 标志，但仍然指向同一个位置（另外我通过 Bit.ly 获得了免费跟踪链接，所以我可以检查链接的次数是双倍的奖励被点击）。不是“最佳”解决方案，但它对我有用，我不必浪费时间试图为 Wordpress 中的 & 符号找出其他解决方案。**

# java - 以日期时间格式添加小时java

> ID：13853910
> 
> 赞同：3
> 
> 时间：2012-12-13T06:03:11.703
> 
> 标签：java

```
SimpleDateFormat parser = new SimpleDateFormat("HH:mm");
Date time1 = parser.parse("7:30"); 
```

现在，如果我想再增加 2 个小时`time1`，例如：

```
7:30 + 2 = 9:30 
```

如何添加 2 小时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T06:05:14.520

`java.util.Date`已弃用，您应该`java.util.Calendar`改用。

```
SimpleDateFormat parser = new SimpleDateFormat("HH:mm");
Date myDate = parser.parse("7:30");
Calendar cal =Calendar.getInstance();
cal.setTime(myDate);
cal.add(Calendar.HOUR_OF_DAY,2); // this will add two hours
myDate = cal.getTime(); 
```

甚至更好的解决方案是使用[Joda Time-Java 日期和时间 API](http://joda-time.sourceforge.net/)。

从他们的网站 - ***Joda-Time 为 Java 日期和时间类提供了质量替代品。***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T06:04:59.883

转换`java.util.Date`为`java.util.Calendar`Object 并使用[**Calendar.add()**](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#add%28int,%20int%29)方法添加 Hours

```
SimpleDateFormat parser = new SimpleDateFormat("HH:mm");
Date time1 = parser.parse("7:30");
Calendar cal =Calendar.getInstance();
cal.setTime(time1);
cal.add(Calendar.Hour_Of_Day, 2);
time1 =cal.getTime();
System.out.println(parser.format(time1));//returns 09:30 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T20:27:39.443

# tl;博士

```
LocalTime.parse( "07:30" ).plusHours( 2 ) 
```

……或者……</p>

```
ZonedDateTime.now( ZoneId.of( " Pacific/Auckland" ) )
    .plusHours( 2 ) 
```

# java.time

应该避免使用旧的日期时间类，例如 java.util.Date、.Calendar 和 java.text.SimpleDateFormat，现在由 java.time 类取代。

## `LocalTime`

对于仅时间值，请使用`LocalTime`类。

```
LocalTime lt = LocalTime.parse( "07:30" );
LocalTime ltLater = lt.plusHours( 2 );  
String output = ltLater.toString();  // 09:30 
```

## `Instant`

对于给定的`java.util.Date`，使用添加到旧类的新方法转换为 java.time 。该类`Instant`表示 UTC 时间线上的一个时刻，分辨率为纳秒。

```
Instant instant = myUtilDate.toInstant(); 
```

或将 UTC 中的当前时刻捕获为`Instant`.

```
Instant instant = Instant.now(); 
```

添加两个小时作为秒。该类`TimeUnit`可以将小时转换为秒。

```
long seconds = TimeUnit.HOURS.toSeconds( 2 );
Instant instantLater = instant.plusSeconds( seconds ); 
```

## `ZonedDateTime`

要查看某个社区的挂钟时间，请应用时区。应用 a`ZoneId`来获取一个`ZonedDateTime`对象。

```
ZoneId z = ZoneId.of( "America/Montreal" );
ZonedDateTime zdt = instant.atZone( z ); 
```

您可以添加小时数。该类`ZonedDateTime`处理异常，例如夏令时。

```
ZonedDateTime zdtLater = zdt.plusHours( 2 ); 
```

## `Duration`

您可以将这两个小时表示为一个对象。

```
Duration d = Duration.ofHours( 2 ) ;
ZonedDateTime zdtLater = zdt.plus( d ) ; 
```

# jquery - KendoAutoComplete - Selecteditem Id

> ID：13853912
> 
> 赞同：1
> 
> 时间：2012-12-13T06:03:18.123
> 
> 标签：jquery, kendo-ui

使用 KendoAutoComplete 控制和绑定数据库中的值。

然后，当我尝试在此处检索值时，我得到了选定的文本。

谁能建议我如何获取所选项目的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:38:05.243

您可以使用`Select`选择下拉列表项并设置自动完成文本的事件。

```
// get a reference to the autocomplete widget
var autocomplete = $("autocomplete").data("kendoAutoComplete");

// selects by jQuery object
autocomplete.select(autocomplete.ul.children().eq(0)); 
```

[http://docs.kendoui.c​​om/documentation/api/web/autocomplete#select](http://docs.kendoui.com/documentation/api/web/autocomplete#select)

[http://demos.kendoui.c​​om/web/autocomplete/events.html](http://demos.kendoui.com/web/autocomplete/events.html)

**编辑：**尝试处理`select`事件

```
 $("#products").kendoAutoComplete({
                    dataSource: data,
                    select: onSelect
                    }); 
```

然后 ：

```
 function onSelect(e) {
                        if ("kendoConsole" in window) {
                            var dataItem = this.dataItem(e.item.index());
                            kendoConsole.log("event :: select (" + dataItem + ")" );
                        }
                    } 
```

现在您可以获取项目的索引，如第二个链接

# android - 在eclipse中导入jar然后出现错误

> ID：13853913
> 
> 赞同：0
> 
> 时间：2012-12-13T06:03:22.560
> 
> 标签：android

我在eclipse中导入jar，总是提示错误：Conversion to Dalvik format failed with error 1。

![在此处输入图像描述](../Images/17cb1a364a57ef2b35f62e7c7b1e12b3.png)

问题是什么？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:26:33.897

请按照[此步骤](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)阅读[此页面](http://bimbim.in/post/2010/09/24/Reason-of-Conversion-to-dalvik-format-failed-with-error-1.aspx)。简而言之，清理您的项目并删除所有外部 jar。如果您的错误消失了，那么请再次添加您的 jar，如果没有其他问题。当您使用 Google 查找问题时，您会获得[很多点击](https://www.google.nl/search?q=Conversion+to+Dalvik+format+failed+with+error+1&oq=Conversion+to+Dalvik+format+failed+with+error+1&aqs=chrome.0.57&sourceid=chrome&ie=UTF-8#hl=nl&tbo=d&sclient=psy-ab&q=conversion+to+dalvik+format+failed+with+error+1+external+jar&oq=Conversion+to+Dalvik+format+failed+with+error+1+ex&gs_l=serp.1.1.0j0i30l2j0i5i30.1580.2055.0.2885.3.3.0.0.0.0.55.142.3.3.0...0.0...1c.1.76uEicG_es4&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355272958,d.d2k&fp=720dc4405ea98172&bpcl=39942515&biw=1360&bih=643)

# javascript - 如何用图像填充用 javascript 创建的形状？

> ID：13853915
> 
> 赞同：1
> 
> 时间：2012-12-13T06:03:27.280
> 
> 标签：javascript, image, html, canvas, fill

如何用图像填充用 javascript 创建的形状？

我正在使用我用 javascript 创建的形状，现在正在用颜色填充它。我如何替换它并用我选择的图像/gif填充它？

```
function shape(x,y) {

        ctx.fillStyle = "#9dd4ff";
        ctx.beginPath();
        ctx.moveTo(232,213)
        ctx.lineTo(315,198);
        ctx.lineTo(x,y);
        ctx.closePath();
        ctx.fill();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:40:06.890

您可以通过将路径用作 MASK 来解决此问题

这是代码

```
// Create an image element 
var img = document.createElement('IMG');   
// When the image is loaded, draw it 
img.onload = function () {   
    // Save the state, so we can undo the clipping 
    ctx.save();   
    // Create a shape, of some sort 
    ctx.beginPath(); 
    ctx.moveTo(10, 10);
    ctx.lineTo(100, 30); 
    ctx.lineTo(180, 10); 
    ctx.lineTo(200, 60);
    ctx.arcTo(180, 70, 120, 0, 10); 
    ctx.lineTo(200, 180); 
    ctx.lineTo(100, 150);
    ctx.lineTo(70, 180);
    ctx.lineTo(20, 130);
    ctx.lineTo(50, 70);
    ctx.closePath();
    // Clip to the current path 
    ctx.clip();   
    ctx.drawImage(img, 0, 0);   
    // Undo the clipping 
    ctx.restore(); 
}   
// Specify the src to load the image 
img.src = "https://www.google.com/images/srpr/logo3w.png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:30:58.700

尝试这个：

```
var thumbImg = document.createElement('img');

thumbImg.src = 'path_to_image';

function shape(x,y) {

        ctx.fillStyle = "#9dd4ff";
        ctx.beginPath();
        ctx.moveTo(232,213)
        ctx.lineTo(315,198);
        ctx.lineTo(x,y);

        ctx.drawImage(thumbImg, 0, 0, 50, 50);

        ctx.closePath();
        ctx.fill();
} 
```

- 编辑 -

消除`ctx.fillStyle ="#9dd4ff"`

正如您需要提及图像的路径。

# extjs - 在 extjs-mvc 中提交时构建搜索申请表并在网格中显示结果

> ID：13853916
> 
> 赞同：2
> 
> 时间：2012-12-13T06:03:31.837
> 
> 标签：extjs, extjs4, search-engine, extjs-mvc

我正在尝试使用 ExtJS 构建搜索应用程序。我创建了虚拟表单来搜索个人详细信息。我有一个连接到 mysql DB 的 php 脚本。我能够将表单参数传递给 php 并能够在 msg 框中获取返回结果。但我不明白如何将它传递给在 MVC 的网格中存储和显示相同的内容。我试图将 php 的返回数据传递给存储，然后在控制器中调用 Grid (List.js)。仍然没有工作。`onSearchButtonClick`我已经展示了我用来执行此操作的所有代码。我有另一个疑问，在控制器的存储和功能中使用代理代码部分（即 url:app/scripts/Info.php）是否必不可少？因为我可以直接传递返回值来存储`onSearchButtonClick`功能，我希望不是必须在两个地方都连接php脚本。但是，如果专家能澄清这一点，那就太好了。

以下是我的店铺：

```
Ext.define('App.store.Info', {
    extend: 'Ext.data.Store',
    model: 'App.model.Info',
    alias: 'widget.infostore',
    pageSize : 50,
    autoLoad : false,
    remoteFilter: true,
    proxy   :{
            type    : 'ajax',
            url     : 'app/scripts/Info.php',
            reader  : {
                    type    : 'json',
                    root    : 'result',
                    successProperty : 'success'
            }
    },
 listeners: {
     load : function(store) {
         store.each(function(record) {
            record.commit();
        });
     }
 }
 }); 
```

我的模型看起来很完美，只是为了减少我没有放在这里的代码

这是我的网格：

```
Ext.define('App.view.info.List' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.infolist',
store : 'Info',
initComponent: function(){
    this.columns = [
            {header:'PID',dataIndex:'pid'},
            {header:'Name',dataIndex:'name'},
            {header:'Address', dataIndex:'address'},
            {header:'Contact', dataIndex:'contact'}
    ];
    this.callParent(arguments);

}
}); 
```

这是我的 php 脚本返回的内容：

```
{'success':true, 'result':{'pid':'100','name':'Suman','address':'Bangalore','contact':'suman@xyz.com'}} 
```

这是控制器：

```
Ext.define('App.controller.Info', {
    extend: 'App.controller.Base',
    models: ['Info'],
    stores: ['Info'],
    views: [
            'info.Index',
            'info.List'
            ],
    refs: [{ref: 'info',selector: 'info'}],
    init: function(){
            console.log('Main controller init');
            this.control({
                    'button[action=search]':{
                            click: this.onSearchButtonClick
                    }
            });
    },
    onSearchButtonClick:function(){
            var form = Ext.getCmp('ppanel');
            if(form.getForm().isValid()){
                    Ext.Ajax.request({
                            waitMsg: 'Searching...', 
                            method: 'POST',
                            url: 'app/scripts/Info.php',
                            params: {
                                    searchData: Ext.encode(form.getValues())
                            },
                            scope:this,
                            success: this.onSearchSuccess,
                            failure: this.onSearchFailure
                            //Ext.MessageBox.alert("XXXXX","dat");
                    });
            }
    },
    onSearchSuccess: function(response){
            var gData = Ext.JSON.decode(response.responseText);
            //var grid = Ext.widget('infolist');  //not working -need help
            this.getInfoStore().load(gData);
            //Ext.getCmp().setActiveItem('infolist');  //not working-need help
            //this.getViewport().getLayout().setActiveItem('infolist'); //not working need help
            Ext.MessageBox.alert("XXXXX",response.responseText); //works
    },
    onSearchFailure: function(err){
            Ext.MessageBox.alert('Status', 'Error occured during searching...');
    }
}); 
```

我希望我已经提供了理解问题所需的信息。期待某种帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:17:16.283

问题是您有两个商店实例，一个在网格中，一个在控制器中。如果您想要一个实例存储（就像您想要的那样），您有两个选择：

1.  将其添加到您的应用程序
2.  将 a 分配`storeId`给您的商店定义。

***（如果您已经将该商店添加到您的应用程序中，请忽略上面的文字）***

或者，更好的是，不要直接使用商店而是使用您的网格，如下所示：

首先`ref`在控制器中添加一个视图->网格：

```
refs: [{ref: 'info',selector: 'info'},{selector:'infolist', ref:'infoGrid'}] 
```

然后，在你的`onSearchSuccess`处理程序中，而不是调用：`this.getInfoStore().load(gData);`你应该调用：`this.getInfoGrid().getStore().loadData(gData);`

顺便说一句：`this.getInfoStore().load(gData);`永远不会加载数据数组或记录，因为你应该使用：`this.getInfoStore().loadData(gData);`

希望这能让你走上正轨。

# java - 计算零的数量

> ID：13853921
> 
> 赞同：-6
> 
> 时间：2012-12-13T06:04:10.627
> 
> 标签：java

我正在尝试编写一个程序来获取一个只有 10000010000010000010001 之类的 .txt 文件

我正在尝试计算零的数量并将其输出为 5 5 5 3。我想如果我将字符串转换为 a`double`或者`int`我可以编写一个`if`or`for`循环。

```
import java.util.Scanner;

public class test1{

    public static void main(String[] args) {

        java.io.File test2 = new java.io.File("test3.txt");

        try
        {
           Scanner input = new Scanner(test2);

        while(input.hasNext())
        {
            String num = input.nextLine();
            System.out.println(num);

            double n = Double.parseDouble(num);
            System.out.println(n);
        } 
        }

        catch (Exception e){
            System.out.println("could not find file");
        }   

       }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:13:19.047

你的努力在哪里？您可以简单地尝试（如果您的字符串仅包含 1 和 0）：

```
 String[] splitArr = num.split("1");
    String countStr = "";
    for (int i = 0; i < splitArr.length; i++) {
        if( ! splitArr[i].isEmpty() )
            countStr += splitArr[i].length();
    }
    System.out.println(countStr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:13:32.090

干得好：

```
char[] numArray = num.toCharArray();
  int counter=0;
  for(int i=0;i<numArray.length;i++) {
     if(numArray[i]=='0') {
        counter++; 
     }
     if((i==numArray.length-1&&counter>0)||(counter>0&&numArray[i]!='0')) {
        System.out.println("Number of Zeroes: "+counter);
        counter=0;
     }
  } 
```

一些重要的点：

1）最好在`char`此处使用值数组，而不是使用 a 操作`double`，因为`char`数组可以存储更多值-您发布的示例太长，`double`无法处理 a 。

2）大部分内容应该是不言自明的（至少，如果你逐位研究的话），但如果`i==numArray.length-1`部分令人困惑，这可以确保如果字符串以 0 结尾，0 的最终计数将也被打印出来。

这应该适用于您可以扔给它的任何字符串 - 如果您需要支持它，包括 0 和 1 以外的值！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:56:50.040

```
import java.util.*;
import java.io.*;

public class ZeroCounter {

ArrayList <Integer> listOfNumbers = new ArrayList <Integer> ();
DataInputStream inStream;

long inFileSize;
long outFileSize;

// Track how many bytes we've read. Useful for large files.
int byteCount;

    public ZeroCounter() {
    }

//read the file and turn it into an array of integers
public void readFile(String fileName) {

    try {
        // Create a new File object, get size
        File inputFile = new File(fileName);
        inFileSize = inputFile.length();

        // The constructor of DataInputStream requires an InputStream
        inStream = new DataInputStream(new FileInputStream(inputFile));
    }

    // Oops.  Errors.
    catch (FileNotFoundException e) {
        e.printStackTrace();
        System.exit(0);
    }

    // Read the input file
    try {

        // While there are more bytes available to read...
        while (inStream.available() > 0) {

            // Read in a single byte and store it in a character
            int c = (int)inStream.readByte();

            if ((++byteCount)% 1024 == 0)
                System.out.println("Read " + byteCount/1024 + " of " + inFileSize/1024 + " KB...");

            // Print the integer to see them for debugging purposes
            //System.out.print(c);
            // Add the integer to an ArrayList
            fileArray.add(c);
        }

        // clean up
        inStream.close();
        System.out.println("File has been converted into an ArrayList of Integers!");
    }

    // Oops.  Errors.
    catch (IOException e) {
        e.printStackTrace();
        System.exit(0);
    }

    //Print the ArrayList contents for debugging purposes
    //System.out.println(fileArray);
}

public void countZeroes() {
    int zeroCounter = 0;
    for (int i = 0; i < listOfNumbers.size(); i++) {
        if (listOfNumbers.get(i) == 0) {
            zeroCounter++;
        }
        else if (listOfNumbers.get(i) != 0 && zeroCounter > 0) {
            //this only prints the number of zeroes if the zero counter isn't zero
            System.out.println(zeroCounter + " ");
            zeroCounter = 0;
        }

        else {
            //do nothing
        }
    }
}

public static void main(String[] args) {
        ZeroCounter comp = new ZeroCounter();
        comp.readFile("test3.txt");
        comp.countZeroes();
    }
} 
```

# javascript - 根据语言更改 CSS

> ID：13853925
> 
> 赞同：-1
> 
> 时间：2012-12-13T06:04:20.343
> 
> 标签：javascript, css, styles

我在我的网站上使用谷歌翻译，以两种不同的语言显示内容，德语和西班牙语，而不是原始内容（英语）。现在，一旦选择其他语言，由于单词长度的变化，内容和文本中会出现一些错位，而且我需要更改一些用英文写的图像和徽标。

我的问题是如何根据语言更改 CSS？

关于网站的一些信息： 这是一个使用纯 HTML、CSS、Javascript 和 jQuery 开发的简单网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:24:02.147

如果您使用的是简单的 html 或任何框架，则有时不喜欢使用自动翻译器，因为它无法正确翻译，请尝试为每种语言制作不同的 css 文件，并以不同的语言制作您的网站。如果您使用一些 cms 等，您可以轻松实现这一点。因此，当您单击西班牙标志时，它应该转到 index-sp 并加载 style-sp.css。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-07T16:40:42.633

我来这里是为了寻找一种解决方案来切换基于**rtl(ar)**和**ltr(en/pt)的 2 个不同的****css**文件，并且有一个非常简单快捷的解决方案对我有用：

 ****```
<environment include="Development">
    @if (System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft)
    {
        <link rel="stylesheet" href="~/vendor/fontawesome-free/css/all.min.css" />
        <link rel="stylesheet" href="~/css/styles.rtl.min.css" />
    }
    else
    {
        <link rel="stylesheet" href="~/vendor/fontawesome-free/css/all.min.css" />
        <link rel="stylesheet" href="~/css/styles.min.css" />
    }
</environment> 
```****

# ruby-on-rails - 无法分配请求的地址 - bind(2) (Errno::EADDRNOTAVAIL)

> ID：13853936
> 
> 赞同：9
> 
> 时间：2012-12-13T06:04:56.250
> 
> 标签：ruby-on-rails, ruby, gem, mongrel

我在 centos 6.3 服务器上使用 rail for teambox，实际上这只是在实际应用之前的反复试验。

*   我正在使用 2 个在相同 centos 版本和精确副本上运行的虚拟机，VM2 仅运行将远离 VM1 的 mysql
*   我试过mysql连接#nc，它已经连接了
*   VM1 (192.168.7.201) & VM2 (192.168.7.202 运行 MYSQL)
*   我在 my.cnf 中的远程机器（VM2）上有绑定地址，绑定地址=192.168.7.202
*   这是我的database.yml

> 开发：
> 适配器：mysql
> 主机：192.168.7.202
> 端口：3306
> 用户名：teambox
> 密码：pass
> 数据库：teambox

我正在尝试使用 # 运行`rails server -e development -b 192.168.7.202` 并给出此错误

```
Exiting
/usr/local/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel/tcphack.rb:12:in `initialize_without_backlog': Cannot assign requested address - bind(2) (Errno::EADDRNOTAVAIL) 
```

请帮帮我

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-20T21:54:54.513

尝试这个

```
rails server -e development -b 0.0.0.0 -p 3000 
```

0.0.0.0 表示它监听本地机器上的所有 IPv4 地址

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-16T07:37:58.563

Rails 5.0.0.1 服务器在没有 IPv6 的情况下无法工作。

您需要从`/etc/sysctl.conf`文件启用 IPv6（默认情况下启用 IPv6）。

如果有的话，删除或评论这些行。

```
net.ipv6.conf.all.disable_ipv6 = 1

net.ipv6.conf.default.disable_ipv6 = 1

net.ipv6.conf.lo.disable_ipv6 = 1 
```

重新启动服务器以启用 IPv6。尝试：

```
rails server 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:08:48.607

尝试如下：

```
development:
 adapter: mysql
 host: 127.0.0.1
 port: 3306
 username: teambox
 password: pass
 database: teambox 
```

（或者）

```
development:
 adapter: mysql
 host: localhost
 port: 3306
 username: teambox
 password: pass
 database: teambox 
```

我认为以上任何一项都可以。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T06:07:03.180

这意味着服务器已经在该端口上运行

尝试

```
rails server -e development -p 3001 -b 192.168.7.202 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-13T06:15:44.233

错误即将到来，因为 3000 端口已在使用中。并且该命令正在尝试在同一端口中运行。所以改变端口并运行。添加这个也 -p 3002

# ruby-on-rails - 模型在 accept_nested_attributes_for 上中断，没有关联错误

> ID：13853947
> 
> 赞同：2
> 
> 时间：2012-12-13T06:05:38.750
> 
> 标签：ruby-on-rails, nested-attributes

我有一个`Wine`模型，一瓶酒可以有很多个`Varietals`。

我有一个`WineVarietals`模型，并通过那张表将葡萄酒加入品种。

当我放入`accepts_nested_attributes_for :wine_varietals`我的模型时，我得到 `No association found for name`了 wine_varietals'。已经定义了吗？

但我的模型中确实有关联。

我的葡萄酒模型是

```
类 Wine < ActiveRecord::Base

    attr_accessible :name, :winery_id, :wine_varietals_attributes
    接受嵌套属性：wine_varietals

    归属地：酒厂
    has_many :wine_varietals
    #has_and_belongs_to_many :varietals, :join_table => :wine_varietals
    has_many :wine_photos
    has_many :年份

```

我也有 WineVarietal 和 Varietal 模型。

如果我注释掉该`accepts_nested_attributes_for`行，错误就会消失。

我尝试了不同形式的复数形式`wines_varietals`，`wine_varietal`但似乎无法摆脱这个错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T06:13:08.657

`accepts_nested_attributes_for :wine_varietals`在下面添加一行`has_many :wine_varietals`

# android - 将 Arraylist 转换为消息

> ID：13853948
> 
> 赞同：1
> 
> 时间：2012-12-13T06:05:41.880
> 
> 标签：android

如何将数组列表转换为消息

这是为了将 msg 转换为 arraylist。

```
ArrayList extractData = (ArrayList) msg.obj; 
```

我该怎么做相反的事情？这是正确的吗？

```
Message msg=(Message) arraylist; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:12:44.577

如果你有任何 Message 对象（正好相反），你可以这样使用：

```
Message msg = new Message();
msg.obj = arrayList 
```

或者你可以使用**setData(Bundle b)**方法，但是因为你只有对象，这没关系。

# c# - FB 图形 API OAuthException 错误代码 2500

> ID：13853951
> 
> 赞同：0
> 
> 时间：2012-12-13T06:06:02.183
> 
> 标签：c#, asp.net, facebook-graph-api

我使用图形 API 获取用户的朋友列表，直到昨天它工作正常。现在我在尝试获取朋友列表时收到以下错误：

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

不过`accessToken`没有过期。api有什么变化还是我做错了什么，导致这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:23:49.633

好的，Graph API 允许您轻松访问`public`有关对象的所有信息，但是要获取除此之外的其他信息，您必须首先获得用户的许可。为此，您需要先获取`access token`。

[https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# android - Facebook 事件在移动设备中测试时会导致崩溃

> ID：13853952
> 
> 赞同：3
> 
> 时间：2012-12-13T06:06:06.850
> 
> 标签：android, facebook, emulation

我有以下代码在 facebook 上创建一个事件。它在模拟器上运行良好，但在手机中崩溃（索尼米罗）：

```
 private void createEvents()
        {
            try
            {

                mPrefs = getPreferences(MODE_PRIVATE);
                String accessToken = mPrefs.getString("access_token", null);
                facebookatEventCreate.setAccessToken(accessToken);
                long expires = mPrefs.getLong("access_expires", 0);

                if (accessToken != null)
                {
                    facebookatEventCreate.setAccessToken(accessToken);
                }

                if (expires != 0)
                {
                    facebookatEventCreate.setAccessExpires(expires);
                }

                if (!facebookatEventCreate.isSessionValid())
                {
                    facebookatEventCreate.authorize(this, new String[] {
                        "email", "publish_stream", "create_event"
                    }, new DialogListener()
                    {

                        @Override
                        public void onCancel()
                        {
                            // Function to handle cancel event
                        }

                        @Override
                        public void onComplete(Bundle values)
                        {
                            // Function to handle complete event
                            // Edit Preferences and update facebook acess_token
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token", facebookatEventCreate.getAccessToken());
                            editor.putLong("access_expires", facebookatEventCreate.getAccessExpires());
                            editor.commit();
                        }

                        @Override
                        public void onError(DialogError error)
                        {
                            // Function to handle error

                        }

                        @Override
                        public void onFacebookError(FacebookError fberror)
                        {
                            // Function to handle Facebook errors

                        }

                    });
                }

                //getting the event name from the text box
                String eventName = txtEventName.getText().toString();
                Log.d("createEvent:createEvent", "Event Name->"+ eventName);

                //getting the event location from the text box
                String eventLocation = txtEventLocation.getText().toString();
                Log.d("createEvent:createEvents", "Event Location->"+ eventLocation);

                //getting the event description from the text box
                String eventDescription = txtEventDescription.getText().toString();
                Log.d("createEvent:createEvents", "Event Description->"+eventDescription);               

                //this is the date of the event picked from the dialog
                //Log.d("createEvent:createEvents", "new Time->" + startDate);
                startDateAndTime = startDate + startTime;
                Log.d("createEvent:createEvents", "DATE AND TIME->"+startDateAndTime);

                Bundle params = new Bundle();
                params.putString("name", eventName);
                params.putString("start_time", startDateAndTime);
                //params.putString("end_time", "2013-12-02T20:00:00+0530");
                params.putString("description", eventDescription);
                params.putString("location", eventLocation);
                params.putString("privacy_type", "OPEN");

                mAsyncRunner1.request("me/events", params, "POST", new RequestListener()
                {

                    @Override
                    public void onMalformedURLException(MalformedURLException e, Object state)
                    {

                    }

                    @Override
                    public void onIOException(IOException e, Object state)
                    {

                    }

                    @Override
                    public void onFileNotFoundException(FileNotFoundException e, Object state)
                    {

                    }

                    @Override
                    public void onFacebookError(FacebookError e, Object state)
                    {

                    }

                    @Override
                    public void onComplete(String response, Object state)
                    {
                        try
                        {
                            JSONObject event = new JSONObject(response);
                            eventID = event.getString("id");
                            Log.d("createEvent:createEvent", "Event ID->" + eventID);
                            Log.i(response, response);

                           //Toast.makeText(getApplicationContext(), "New Event Created!!", Toast.LENGTH_LONG).show();
                        }
                        catch (Exception e)
                        {

                        }
                    }
                }, null);
            }
            catch (Exception e)
            {

            }
        } 
```

在使用模拟器进行调试时，我在 logcat 上收到以下消息：

```
12-13 11:26:01.019: I/Adreno200-EGLSUB(6360): <ConfigWindowMatch:2081>: Format RGBA_8888.
12-13 11:26:01.029: D/memalloc(6360): /dev/pmem: Mapped buffer base:0x51832000 size:614400 offset:0 fd:67
12-13 11:26:01.179: D/memalloc(6360): /dev/pmem: Mapped buffer base:0x51b51000 size:2396160 offset:1781760 fd:70
12-13 11:26:02.259: D/memalloc(6360): /dev/pmem: Mapped buffer base:0x51e9a000 size:3010560 offset:2396160 fd:73
12-13 11:26:02.399: D/-heap(6360): GC_FOR_ALLOC freed 125K, 16% free 6562K/7775K, paused 21ms
12-13 11:26:02.499: D/-heap(6360): GC_CONCURRENT freed 3K, 8% free 15558K/16803K, paused 2ms+2ms 
```

和这个：

```
12-13 11:26:17.899: E/ActivityThread(6360): Failed to find provider info for com.facebook.katana.provider.AttributionIdProvider 
```

有了这个应用程序崩溃：

```
12-13 11:26:18.979: V/WebRequest(6360): WebRequest::WebRequest, setPriority = 1
12-13 11:26:19.159: E/WindowManager(6360): Activity com.hsenid.eventer.ui.createEvent has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41b70728 that was originally added here
12-13 11:26:19.159: E/WindowManager(6360): android.view.WindowLeaked: Activity com.hsenid.eventer.ui.createEvent has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41b70728 that was originally added here
12-13 11:26:19.159: E/WindowManager(6360):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:345)
12-13 11:26:19.159: E/WindowManager(6360):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:268)
12-13 11:26:19.159: E/WindowManager(6360):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:216)
12-13 11:26:19.159: E/WindowManager(6360):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:141)
12-13 11:26:19.159: E/WindowManager(6360):  at android.view.Window$LocalWindowManager.addView(Window.java:537) 
```

请让我知道我应该做什么......提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:52:37.937

尝试使用严格模式

`StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder() .permitAll().build(); StrictMode.setThreadPolicy(policy);`

如果这在您的清单文件更改中不起作用

```
android:minSdkVersion="yourminumsdkhere"
    android:targetSdkVersion="yourmaximumsdkhere" 
```

至`android:minSdkVersion="yourminumsdkhere" android:targetSdkVersion="yourminumsdkhere"`

我认为 StrictMode 会帮助你。还有一个建议是您在网络操作期间使用了多个弹出窗口。它也可能导致崩溃，如日志猫所示。谢谢你

# sql - 从 XML 中提取值

> ID：13853972
> 
> 赞同：2
> 
> 时间：2012-12-13T06:08:13.323
> 
> 标签：sql, xml, oracle, extract-value

我正在使用此查询从 XML 中提取值

```
SELECT extractvalue(column_value, '/TransactionLimitDTO/idTxn') "TxnId"
FROM TABLE(XMLSequence(XMLType(mg.limits)
            .extract('/ModifyTransactionLimitRequestDTO/transactionLimit/TransactionLimitDTO'))) t,Mstgloballimitspackage mg 
```

但是，我收到一个错误：

> ORA-00904: "MG"."LIMITS": 无效标识符

你能告诉我如何解决这个问题吗？

我试过这个：

```
 SELECT extractvalue(column_value, '/TransactionLimitDTO/idTxn') "TxnId"
 FROM TABLE(XMLSequence(XMLType(select mg.limits from Mstgloballimitspackage mg)
                          .extract('/ModifyTransactionLimitRequestDTO/transactionLimit/TransactionLimitDTO'))) t 
```

但这也行不通。

当我将一个完整的 XML 文件代替时，`mg.limits`我得到一个*太长的字符串文字作为参数*错误。

每当我将一小段 XML 放在`mg.limits`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:19:09.733

这将起作用：

```
 SELECT extractvalue(t.column_value, '/TransactionLimitDTO/idTxn') "TxnId"
     FROM Mstgloballimitspackage mg,
          TABLE(XMLSequence(XMLType(mg.limits,'')
                            .extract('/ModifyTransactionLimitRequestDTO/transactionLimit/TransactionLimitDTO'))) t 
```

# python - 将引用对象的对象插入列表

> ID：13853973
> 
> 赞同：0
> 
> 时间：2012-12-13T06:08:31.993
> 
> 标签：python

我在 Python 程序中遇到了一种行为，我可以将其压缩成一个较小的程序。我很确定我已经遇到并解决了它以及过去，但不记得是如何解决的。

考虑以下 Python 程序：

```
import random

class B:
    def __init__(self):
        self.attr=random.randrange(0,10)

class A:
    def __init__(self):
        self.b=B()

list=[]
print "First pass"
for i in range(0,10):
    a=A()
    print "Random number in b: ",a.b.attr
    list.insert(0,a)

print "Second pass"
for l in list:
    print "Random number in b: ",a.b.attr 
```

它通常输出如下内容：

```
First pass
Random number in b:  9
Random number in b:  7
Random number in b:  1
Random number in b:  5
Random number in b:  9
Random number in b:  7
Random number in b:  0
Random number in b:  6
Random number in b:  2
Random number in b:  7

Second pass
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7
Random number in b:  7 
```

我们如何解决这个问题？我知道这与 Python 如何复制对象等有关，但有：

```
import copy
list.insert(0,copy.deepcopy(a)) 
```

没有像预期的那样解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:11:42.080

也许代替

```
print "Second pass"
for l in list:
    print "Random number in b: ",a.b.attr 
```

利用

```
print "Second pass"
for l in list:
    print "Random number in b: ", l.b.attr 
```

# jquery - 缩小时 eval 出错

> ID：13853976
> 
> 赞同：0
> 
> 时间：2012-12-13T06:08:52.820
> 
> 标签：jquery, minify, ajaxmin

我在使用包含“eval”的 ajaxmin 缩小脚本时遇到错误。在下面的语句中，我收到错误“网格未定义”。缩小后，变量“网格”已更改为其他名称。我已经解决了将网格对象存储在像“window.grid”这样的窗口中的问题。但是还有其他方法可以解决这个问题吗？

```
 $(form).html($("#" + this._gridID + "_bulkEditTemplate #" + colName + "_bulkEdit").html());           
        $(target).append(form);
        var grid = $find(this._gridID);
        var optionsObj = eval("grid.jsonModeMgr._jsonDataAndOption." + colName + "_Options");
        $("#" + this._gridID + " #" + colName).html($($("#" + this._gridID + "_bulkEditTemplate").tmpl(optionsObj).find('#' + colName + ' option')));
        var editElement = $("#" + this._gridID + " #" + colName);
        $(editElement).val(this.currentCellValue == null ? "" : this.currentCellValue);
        $(editElement).val(this.currentCellValue).focus();
        $(editElement)[0].focus(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:20:59.310

一般来说，你应该`eval()`尽可能避免。您可以替换此`eval()`行：

```
var optionsObj = eval("grid.jsonModeMgr._jsonDataAndOption." + colName + "_Options"); 
```

有了这个：

```
var optionsObj = grid.jsonModeMgr._jsonDataAndOption[colName + "_Options"]; 
```

要通过计算的字符串名称或包含在变量中的字符串访问属性，可以使用`[string here]`语法而不是点语法。

# java - 如何制作自定义 Windows 服务？

> ID：13853977
> 
> 赞同：1
> 
> 时间：2012-12-13T06:09:03.900
> 
> 标签：java, windows, jar, windows-services, exe

其实我有一个java程序。这将返回“Hello World”。我将其转换为 jar 文件。之后，我在 Windows XP 默认软件中使用 iexpress 将文件类型更改为 .exe。

我使用**sc create**命令来创建新服务。我成功创建了 Windows 服务。但问题是我无法运行它。它抛出以下错误。

![在此处输入图像描述](../Images/7e772216df2c9e5f8b19ced492250e6a.png)

此错误不仅针对此 javaservice。

我试图将 chrome.exe 作为 Windows 服务运行，那个时候它也抛出了同样的错误。

是windows限制吗？还是我犯了错误？期待解决方案。，

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T06:20:02.317

您不能按原样分配任意任意 .exe 文件以作为服务运行。服务必须使用特定的 API 函数与服务控制管理器 (SCM) 交互。这就是您收到错误的原因 - 那些 .exe 文件没有使用这些 API 与 SCM 交互。

如果您不是专门为 SCM 交互编写代码（Java 不支持创建 Windows 服务），那么一切都不会丢失。在某些情况下（Chrome**不是**其中之一！），您可以使用单独的包装器来托管非服务应用程序并代表它们处理 SCM 交互：

[服务包装](http://en.wikipedia.org/wiki/Service_wrapper)

对于 Java 应用程序，有一些包装器项目可用：

[Java 服务包装器](http://wrapper.tanukisoftware.com)

[又一个 Java 服务包装器](http://sourceforge.net/projects/yajsw/)

[ow2](http://forge.ow2.org/projects/javaservice)

# asp.net - ftp 图片上传到图片文件夹仅适用于本地主机，在现场测试期间出错

> ID：13853987
> 
> 赞同：0
> 
> 时间：2012-12-13T06:09:57.203
> 
> 标签：asp.net, ftp, ftpwebrequest

我是 FTP 和 asp.net 的新手，我的代码仅在本地主机测试期间有效，但是在 go-daddy 的实时测试期间出现错误。任何帮助都会非常感谢。

我目前托管 2 个网站，所有页面和代码都在 AMUS 文件夹中

```
 Unable to connect to the remote server
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Net.WebException: Unable to connect to the remote server

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[WebException: Unable to connect to the remote server]
   System.Net.FtpWebRequest.GetRequestStream() +839
   DBMiddleTier.addImageFTP(FileUpload file) +360
   Admin_CrudOperation.imgAddProduct_Click(Object sender, ImageClickEventArgs e) +96
   System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) +115
   System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120
   System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

我的代码

```
 //method to add image ftp
    public string addImageFTP(FileUpload file)
    {
        string filename = Path.GetFileName(file.FileName);
        Bitmap src = Bitmap.FromStream(file.PostedFile.InputStream) as Bitmap;
        Bitmap result = new Bitmap(src, 300, 300);
        string saveName = savePath + filename;
        result.Save(saveName, ImageFormat.Jpeg);
        System.Net.FtpWebRequest request = System.Net.WebRequest.Create("ftp://***.***.***.*/AMUS/images/" + filename) as System.Net.FtpWebRequest;
        //this example assumes the FTP site uses anoymous login on
        //NetWorkCredentials provides credentials for  password-based authentication such as digest, basic, NTLM
        request.Credentials = new System.Net.NetworkCredential("Username", "Password");

        //Copy the contents of the file to the request stream
        byte[] fileContents = null;
        if (file.HasFile)
        {
            //fileContents = FileUploadControl.FileBytes;
            fileContents = File.ReadAllBytes(saveName);

        }
        else
        {
            string res = "you need to provide a file";
            return res;
        }
        request.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
        request.ContentLength = fileContents.Length;
        //GetReequestStream: retrieves the stream used to upload data to an FTP server.
        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();
        return "Successful Upload";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:31:29.037

```
/// <summary>
    /// ftpClient.upload("etc/test.txt", @"C:\Users\metastruct\Desktop\test.txt");
    /// </summary>
    /// <param name="remoteFile"></param>
    /// <param name="localFile"></param>
    public void uploadFile(string remoteFile, string localFile)
    {
        try
        {
            /* Create an FTP Request */
            ftpRequest = (FtpWebRequest)FtpWebRequest.Create(host + "/" + remoteFile);
            /* Log in to the FTP Server with the User Name and Password Provided */
            ftpRequest.Credentials = new NetworkCredential(user, pass);
            /* When in doubt, use these options */
            ftpRequest.UseBinary = true;
            ftpRequest.UsePassive = true;
            ftpRequest.KeepAlive = true;
            /* Specify the Type of FTP Request */
            ftpRequest.Method = WebRequestMethods.Ftp.UploadFile;
            /* Establish Return Communication with the FTP Server */
            ftpStream = ftpRequest.GetRequestStream();
            /* Open a File Stream to Read the File for Upload */
            FileStream localFileStream = new FileStream(localFile, FileMode.Create);
            /* Buffer for the Downloaded Data */
            byte[] byteBuffer = new byte[bufferSize];
            int bytesSent = localFileStream.Read(byteBuffer, 0, bufferSize);
            /* Upload the File by Sending the Buffered Data Until the Transfer is Complete */
            try
            {
                while (bytesSent != 0)
                {
                    ftpStream.Write(byteBuffer, 0, bytesSent);
                    bytesSent = localFileStream.Read(byteBuffer, 0, bufferSize);
                }
            }
            catch (Exception ex) { Console.WriteLine(ex.ToString()); }
            /* Resource Cleanup */
            localFileStream.Close();
            ftpStream.Close();
            ftpRequest = null;
        }
        catch (Exception ex) { Console.WriteLine(ex.ToString()); }
        return;
    }

/// <summary>
    /// ftp.uploadFolderContents("httpdocs/omid", @"E:\omid");
    /// </summary>
    /// <param name="remoteFolder"></param>
    /// <param name="localFolder"></param>
    /// <returns></returns>
    public bool uploadFolderContents(string remoteFolder, string localFolder)
    {
        bool rslt = false;

        try
        {
            string[] files = Directory.GetFiles(localFolder);
            string[] dirs = Directory.GetDirectories(localFolder);
            foreach (string file in files)
            {
                uploadFile(remoteFolder + "/" + Path.GetFileName(file), file);
            }
            foreach (string dir in dirs)
            {
                createFolder(remoteFolder + "/" + Path.GetFileName(dir));
                uploadFolderContents(remoteFolder + "/" + Path.GetFileName(dir), dir);
            }

            rslt = true;
        }
        catch (Exception)
        {
            rslt = false;
        }

        return rslt;
    }

        /// <summary>
    /// ftpClient.createDirectory("etc/test");
    /// </summary>
    /// <param name="newDirectory"></param>
    public void createFolder(string newDirectory)
    {
        try
        {
            /* Create an FTP Request */
            ftpRequest = (FtpWebRequest)WebRequest.Create(host + "/" + newDirectory);
            /* Log in to the FTP Server with the User Name and Password Provided */
            ftpRequest.Credentials = new NetworkCredential(user, pass);
            /* When in doubt, use these options */
            ftpRequest.UseBinary = true;
            ftpRequest.UsePassive = true;
            ftpRequest.KeepAlive = true;
            /* Specify the Type of FTP Request */
            ftpRequest.Method = WebRequestMethods.Ftp.MakeDirectory;
            /* Establish Return Communication with the FTP Server */
            ftpResponse = (FtpWebResponse)ftpRequest.GetResponse();
            /* Resource Cleanup */
            ftpResponse.Close();
            ftpRequest = null;
        }
        catch (Exception ex) { Console.WriteLine(ex.ToString()); }
        return;
    } 
```

# command-line - 如何在批处理文件中使用带空格的参数

> ID：13853990
> 
> 赞同：-1
> 
> 时间：2012-12-13T06:10:27.507
> 
> 标签：command-line, parameters, command-line-arguments

我需要将一些参数传递给 exe，但其中一个参数是有空格

代码是

```
myApp.exe arg1 arg 2 
```

这造成了一个问题，因为第二个参数被分成了两个。我所做的工作就像

```
myApp.exe arg1 'arg 2' 
```

这有助于将空格作为单个参数传递

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:58:36.527

用双引号将它们括起来：

myApp.exe arg1 "arg 2"