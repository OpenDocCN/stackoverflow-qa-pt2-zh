# StackOverflow 问答 16176000-16176999

# java - 以正确的方式实施白板模式？

> ID：16176006
> 
> 赞同：2
> 
> 时间：2013-04-23T17:56:13.263
> 
> 标签：java, osgi

考虑以下来自[http://www.knopflerfish.org/osgi_service_tutorial.html#best](http://www.knopflerfish.org/osgi_service_tutorial.html#best)解释白板模式的代码片段

```
ServiceListener sl = new ServiceListener() {
public void serviceChanged(ServiceEvent ev) {
  ServiceReference sr = ev.getServiceReference();
  switch(ev.getType()) {
  case ServiceEvent.REGISTERED:
    {
          registerServlet(sr);
    }
    break;
  case ServiceEvent.UNREGISTERING:
    {
          unregisterServlet(sr);
    }
    break;
  }
}
  };

String filter = "(objectclass=" + HttpServlet.class.getName() + ")";
try {
  bc.addServiceListener(sl, filter); // -- 1
  ServiceReference[] srl = bc.getServiceReferences(null, filter); // -- 2
  for(int i = 0; srl != null && i < srl.length; i++) {
sl.serviceChanged(new ServiceEvent(ServiceEvent.REGISTERED,
                   srl[i]));
  }
} catch (InvalidSyntaxException e) { 
  e.printStackTrace(); 
} 
```

是否有可能在 line-1 和 line-2 之间复制 ServiceEvent.REGISTERED 事件？在第 1 行和第 2 行之前注册服务侦听器后，服务注册自身，导致侦听器接收 ServiceEvent.REGISTERED 通知。在所有服务引用中的第 2 行是对该服务的引用，导致通知被接收两次。这种情况可能吗？如果是，那么可以做些什么来避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T21:39:56.730

使用[ServiceTracker](http://www.osgi.org/javadoc/r5/core/org/osgi/util/tracker/ServiceTracker.html)而不是尝试使用“原始”API。ServiceTracker 将为您妥善处理这些问题。

更好的是使用声明式服务。

# linq - 使用 LINQ 选择 XML 节点，并修改

> ID：16176009
> 
> 赞同：0
> 
> 时间：2013-04-23T17:56:21.937
> 
> 标签：linq, linq-to-xml

我有以下 XML：

```
<Config>
   <Book>
      <Name> Book Name #1 </Name>
      <Available In>
               <Country>US</Country>
               <Country>Canada</Country>
      </Available In>
   </Book>
</Config> 
```

我需要找到在特定国家/地区可用的所有 Book 实例，然后在“Available In”下引入一个节点。每当我添加 where 语句时，我的选择语句都会失败：

```
XElement xmlFile = XElement.Load(xmlFileLocation);
var q = (from c in xmlFile.Elements(“Book”)
           where c.Elements(Country).Value == "Canada"
           select c; 
```

.Value 无法解析，toString 以字符串形式给我整个子节点。我需要选择特定国家/地区的所有书籍，以便我可以将它们全部更新以包含新的语言环境节点，例如：

```
<Config>
       <Book>
          <Name> Book Name #1 </Name>
          <Available In>
                   <Country>US</Country>
                   <Country>Canada</Country>
          </Available In>
          <LocaleIDs>
               <LocalID> 3066 </LocaleID>
          <LocaleIDs>
       </Book>
    </Config> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:59:16.467

您正在尝试使用返回*一系列*元素`Value`的调用结果。那是行不通的——没有任何意义。您想一次在单个元素上调用它。`Elements`

 *此外，您正在尝试查找 的*直接*子级`Book`，它会忽略该`Available In`元素，该元素甚至不是有效的元素名称......

我怀疑你想要类似的东西：

```
var query = xmlFile.Elements("Book")
                   .Where(x => x.Descendants("Country")
                                .Any(x => (string) x == "Canada")); 
```

换句话说，查找`Book`任何后代`Country`元素的文本值为“Canada”的元素。

您仍然需要修复您的 XML 以使用有效的元素名称......*

# mysql - 根据 3 列从表中清除重复条目

> ID：16176011
> 
> 赞同：1
> 
> 时间：2013-04-23T17:56:39.407
> 
> 标签：mysql, sql

我需要清除我的数据库，我需要删除基于 3 列的所有重复条目。

我试过这个：

```
ALTER IGNORE TABLE prod_assoc_variacao ADD UNIQUE INDEX idx_name (fk_produto, fk_grupo, fk_classificador ) 
```

但是我收到错误消息，告诉我有几行重复条目，所以删除重复条目不起作用。

所以我也尝试了这个：

```
DELETE
FROM prod_assoc_variacao
WHERE prod_assoc_variacao.id IN  (  
    SELECT MAX(id)
    FROM prod_assoc_variacao
    GROUP BY fk_produto, fk_grupo, fk_classificador
    HAVING COUNT(*) > 1) 
```

但我得到 [Err] 1093 - 您不能在 FROM 子句中指定目标表 'prod_assoc_variacao' 进行更新。

现在我不知道做什么，我的sql不是很好，不知道。

我非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:00:49.043

您可以使用的一种方法是制作一个临时表，将 id 选择到该表中，然后在删除语句中使用该临时表

```
create temporary table t( id integer );

insert into t 
SELECT MAX(id)
FROM prod_assoc_variacao
GROUP BY fk_produto, fk_grupo, fk_classificador
HAVING COUNT(*) > 1;

DELETE
FROM prod_assoc_variacao
WHERE prod_assoc_variacao.id IN (
    select id from t
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:06:40.490

您可以在删除中加入表本身：

```
delete prod_assoc_variaca from prod_assoc_variaca
  inner join prod_assoc_variaca p2 on prod_assoc_variaca.fk_produto = p2.fk_produto 
    and prod_assoc_variaca.fk_grupo = p2.fk_grupo 
    and prod_assoc_variaca.fk_classificador = p2.fk_classificador
    and prod_assoc_variaca.id < p2.id; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/ba6df/1)

只需重新阅读您的帖子 - 如果您想删除更高的 ID，请使用 > 代替。

# php - Mysql 中的报表 - 人子表

> ID：16176015
> 
> 赞同：0
> 
> 时间：2013-04-23T17:56:53.577
> 
> 标签：php, mysql, pdo

我有两个表具有以下类型的数据：

```
articleid, userid, date purchased

userid, provstate, country 
```

我想生成一个如下所示的报告：

```
Count   Article Id    Date          Country    Prov/State
  3          1        April 2013     Canada       Ontatio
  1          1        April 2013     Canada       PEI
  4          1        April 2013     USA          Maine 
```

数据应按国家和省按日期升序和字母顺序排序，并按 articleid 升序分组。

所以它基本上会显示关于文章 1 的所有信息，然后是文章 2，等等。

有人有什么好的建议吗？

我的尝试围绕着这个基本查询：

```
SELECT COUNT( articleid ) , articleid, DATE_FORMAT( date_purchased,  "%M %Y" ) , country, provstate
FROM story_history, user_info
WHERE story_history.userid = user_info.userid 
```

和 futz 与 ORDER BY AND GROUP BY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:12:33.637

按您未汇总的字段分组（articleid、DATE_FORMAT( date_purchased,"%M %Y" ) 、country、provstate ）并按您要排序的字段排序（date 、country、Province）

```
SELECT COUNT( articleid ) , articleid, DATE_FORMAT( date_purchased,  "%M %Y" ) `date` , country, provstate
FROM story_history, user_info
WHERE story_history.userid = user_info.userid
group by articleid, DATE_FORMAT( date_purchased,  "%M %Y" ) , country, provstate
order by `date` , country  Province 
```

# css - 顶部边框样式未从 Bootsrap 中的 Div 中删除

> ID：16176016
> 
> 赞同：1
> 
> 时间：2013-04-23T17:57:01.110
> 
> 标签：css, twitter-bootstrap

你能否看看我的代码和网站，让我知道为什么尽管我将 div 边框样式设置为 none 然后设置为 0px 宽度，但 div 的顶部边框仍然存在。

这是代码：

```
<div class="well well-large  zerobox clearfix">
      <div class="zerobox margo pull-left">
          <img class="img-polaroid" alt="" src="http://placehold.it/260x120">
      </div>
      <div class="well well-large zerobox margo bordernone pull-right">
           <h4 class="text-error">Why The Top Border Still Here</h4>
                <br />
                <p>Test</p>
               <p>Test</p>
      </div>
</div> 
```

我的自定义样式是：

```
<style>
.zerobox{margin: 0; padding: 0;}
.margo{ margin: 10px 15px 10px 10px;}
.bordernone{border: solid 0px #F5F5F5;}
</style> 
```

这是我网站的[链接。请查看“](http://www.tehranmotor.ir/)**为什么顶部边框仍然在这里**”的顶部，您可以在那里找到一条灰线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:10:17.293

那不是边界。那是来自你的 div 上`box-shadow inset`的引导类。`.Well`你需要在你的无边界类中重置它。

把这个给你的无边界课程`[Demo](http://jsfiddle.net/aGdLQ/)`

```
-webkit-box-shadow: initial ;
-moz-box-shadow: initial ;
box-shadow: initial ; 
```

这是应用的引导 css 类。

```
.well {
min-height: 20px;
padding: 19px;
margin-bottom: 20px;
background-color: #f5f5f5;
border: 1px solid #e3e3e3;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
} 
```

# actionscript-3 - 限制动态对象的可能定位？

> ID：16176022
> 
> 赞同：0
> 
> 时间：2013-04-23T17:57:26.160
> 
> 标签：actionscript-3, flash

我有一个功能可以生成敌舰（电影剪辑）并让它们以不同的高度“飞”过舞台。我遇到的问题是我想限制这一点，以便在舞台顶部有一个 600 x 75px 的空间，敌舰不会飞过，这样我就可以在没有船只飞过它们的情况下显示分数和计时器（所以它们很容易被看到）。我的舞台是 600 x 350 像素。我只是想知道这是否是最好的方法？生成飞船的函数代码如下：

```
function EnemyShipSmall()
    {
        this.x = 800;
        this.y = Math.random() * 300;
        speed = Math.random()*5 + 5;
        addEventListener("enterFrame", enterFrame);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:08:03.207

尝试这个 ：

```
function EnemyShipSmall()
    {
        this.x = 800;
        this.y = Math.random() * 275 + 75;
        speed = Math.random()*5 + 5;
        addEventListener("enterFrame", enterFrame);
    } 
```

# c# - 需要使用 asp.net 将 JSON 记录解析成数组

> ID：16176027
> 
> 赞同：0
> 
> 时间：2013-04-23T17:57:50.197
> 
> 标签：c#, json

我有一些从 API 返回的 JSON，如下所示，我需要将其解析为其他一些可用对象的数组：

```
{
    "Patients": [
        {
            "ChartNumber": "U1EQ643",
            "DateOfBirth": {
                "Raw": "19940704",
                "Value": null
            },
            "FirstName": "Joe",
            "LastName": "Smith",
            "MiddleName": null,
            "Sex": "M",
            "SocialSecurityNumber": {
                "Formatted": "xxx-xx-xxxx",
                "Raw": "xxxxxxxxx"
            }
        },
        {
            "ChartNumber": "abcQ643",
            "DateOfBirth": {
                "Raw": "19910614",
                "Value": null
            },
            "FirstName": "Alison",
            "LastName": "Smith",
            "MiddleName": null,
            "Sex": "F",
            "SocialSecurityNumber": {
                "Formatted": "xxx-xx-xxxx",
                "Raw": "xxxxxxxxx"
            }
        },
} 
```

* * *

到目前为止，这是我的代码中的内容：

```
class Svc1
{
    public void TrySearch2()
    {
        string URL = "https://SOMEWHERE.com/search";

        WebRequest request = WebRequest.Create(URL);

        request.Method = "POST";
        request.ContentType = "application/json; charset=utf-8";

        string searchFor = "smith";
        string postData = "{\"Authentication\": {\"SubscriberKey\": \"ABC\"," +
                                                "\"SiteServiceKey\": \"DEF\"}," +
                                                "\"" + requestType + "\": \"" + searchFor + "\"}";

        //get a reference to the request-stream, and write the postData to it
        using (Stream s = request.GetRequestStream())
        {
            using (StreamWriter sw = new StreamWriter(s))
                sw.Write(postData);
        }

        //get response-stream, and use a streamReader to read the content
        using (Stream s = request.GetResponse().GetResponseStream())
        {
            using (StreamReader sr = new StreamReader(s))
            {
                var jsonData = sr.ReadToEnd();

                var ds = new DataContractJsonSerializer(typeof(Patient[]));
                var msnew = new MemoryStream(Encoding.UTF8.GetBytes(jsonData));
                Patient[] items = (Patient[])ds.ReadObject(msnew);

            }
        }

    }

//patient class
[Serializable]
public class Patient
{
    private string _chartNumber;
    private string _dateOfBirth;
    private string _firstName;
    private string _lastName;
    private string _middleName;
    private string _sex;
    private string _ssNum;

    public Patient(string chartNo, string DOB, string first, string last, string middle, string sex, string SSNum)
    {
        this._chartNumber = chartNo;
        this._dateOfBirth = DOB;
        this._firstName = first;
        this._lastName = last;
        this._middleName = middle;
        this._sex = sex;
        this._ssNum = SSNum;
    }
    public string chartNumber
    {
        get { return _chartNumber; }
        set { _chartNumber = value; }
    }
    public string dateOfBirth
    {
        get { return _dateOfBirth; }
        set { _dateOfBirth = value; }
    }
    public string firstName
    {
        get { return _firstName; }
        set { _firstName = value; }
    }
    public string lastName
    {
        get { return _lastName; }
        set { _lastName = value; }
    }
    public string middleName
    {
        get { return _middleName; }
        set { _middleName = value; }
    }
    public string sex
    {
        get { return _sex; }
        set { _sex = value; }
    }
    public string SSNumber
    {
        get { return _ssNum; }
        set { _ssNum = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:45:10.733

从您提供的 Json 中，我认为您需要一个包含属性 Patients 的类

```
public class ListOfPatients
{
    public ListOfPatinets(){Patients = new List<Patinent>();}

    public List<Patient> Patients{get;set;}
} 
```

然后从您的 Json 反序列化该新类的对象

```
 var ds = new DataContractJsonSerializer(typeof(ListOfPatients));
  var msnew = new MemoryStream(Encoding.UTF8.GetBytes(jsonData));
  ListOfPatients list = (ListOfPatients)ds.ReadObject(msnew);
  var patients = list.Patients;
  ..... 
```

而且我相信您需要在 Patient 类中使用默认构造函数，并且不确定 DataContractSerializer 在将 Json 与对象属性匹配时是否区分大小写。在 Json 中有“ChartNumber”，在 Patient 类中有“chartNumber”，这可能会导致问题，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:54:01.780

请将 DataMember 属性放在 Parent 类的每个属性上。

还有一件事，您定义的类结构与您提到的 json 不同。

dateofBirth 和 SocialSecurityNumbers 也是对象，您将其视为 Parent 类中的字符串。

# jquery-cycle - 如何防止循环插件自动播放？

> ID：16176028
> 
> 赞同：3
> 
> 时间：2013-04-23T17:57:53.397
> 
> 标签：jquery-cycle

我正在使用循环插件，它运行良好。但是滑块一直在滑动，我不知道应该使用什么选项来防止它自动播放。

```
$('#thumbs').cycle({
            fx: 'scrollHorz',
            prev: '.thumbPrev',
            next: '.thumbNext'
        }); 
```

我还检查了循环的选项参考[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)但我没有发现任何有用的东西..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:06:27.557

我找到了解决方案

```
$(elem).cycle({
    timeout: 0 //milliseconds between slide transitions (0 to disable auto advance)
}); 
```

超时是标准定义的 4000

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:03:38.203

循环后立即：

```
$('#thumbs').cycle('pause') 
```

或者根据 jquery cycle 的作者，我的原始答案的更精简版本：

```
 $('#thumbs').cycle({
        fx: 'scrollHorz',
        prev: '.thumbPrev',
        next: '.thumbNext'
    }).cycle('pause'); 
```

参考：http: [//forum.jquery.com/topic/cycle-plugin-no-autostart-click-to-start-slideshow](http://forum.jquery.com/topic/cycle-plugin-no-autostart-click-to-start-slideshow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T13:48:46.850

**将超时设置为零。这是一个例子：**

```
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/jquery.cycle.all.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#porta-slide-demo').cycle({ 
    fx:     'fade', 
    speed:  'fast', 
    timeout: 0, 
    next:   '#para', 
    prev:   '#prapa' 
});
});
</script> 
```

**…………**

```
<div id="porta-slide-demo">
<img src="demo-images/01.jpg" width="450" height="300" />
<img src="demo-images/02.jpg" width="450" height="300" />
<img src="demo-images/03.jpg" width="450" height="300" />
</div>
    <div>
    <a id="prapa" href="#">Prapa</a>
    <a id="para" href="#">Para</a>
    </div> 
```

# jquery - 正则表达式允许所有类型的数字

> ID：16176029
> 
> 赞同：0
> 
> 时间：2013-04-23T17:57:56.753
> 
> 标签：jquery, regex, expression

我只想要一个字段来允许所有类型的数字：整数、小数、负数......以及所述类型的所有组合。不需要逗号。

这是我在大约 3 天的战斗中得到的最接近的结果：

```
/^[\.\-\d]*?$[1-9][\.\-\d]*?$/ 
```

这不允许整数！我不明白出了什么问题，有人可以解释一下如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:02:00.893

以下应该有效：

```
/^-?\d*\.?\d+$/ 
```

解释：

```
^       # start of string anchor
-?      # match a '-', optional
\d*     # match zero or more digits
\.?     # match a '.', optional
\d+     # match one or more digits
$       # end of string anchor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:06:55.093

这对我有用

```
string="some text with the number -123456.789 in it";
alert(string.replace(/[^-\d+.]/g,'')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:08:41.627

尝试这个：

```
/^[-+]?\d*\.?\d*$/ 
```

请注意，这将匹配“6.”、“+5.3”、“4”，但不匹配“4.4.0”

这类似于 FJ 答案，但允许正符号输入并允许数字以点“.”结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:04:24.843

这是十进制数的正则表达式：

```
/^-?(?:\d{1,3}(?:,\d{3})*|\d+)(?:\.\d+)?$/ 
```

分解它：

*   从字符串的开头...
*   可选择匹配减号
*   任何一个：
    *   最多匹配三位数字
    *   （可选）匹配任意数量的（逗号后跟三位数字）[千位分隔符]
*   或者：
    *   匹配任意数量的数字[没有千位分隔符]
*   可选择匹配小数点后跟任意位数。
*   检查您是否已到达字符串的末尾。

# c - 打开 ELF 文件并检查

> ID：16176031
> 
> 赞同：0
> 
> 时间：2013-04-23T17:58:07.290
> 
> 标签：c, elf

我需要编写 C 程序来检查 ELF 链接视图格式的目标文件并将其转换为可执行视图格式，将其加载到内存中。

第一个问题：如何打开文件并读取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T09:20:26.713

我试图为读取 elf 文件编写一些代码，请参见下文：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <elf.h>
#include <sys/mman.h>
#include <stddef.h>

static void shdr_parse(void *ptr)
{
    Elf32_Shdr *shdr_ptr = NULL;
    Elf32_Ehdr *Elf32_ptr = (Elf32_Ehdr *)ptr;

    int n = Elf32_ptr->e_shnum;
    char *shstrtab = NULL;

    printf("e_shstrndx: 0x%x\n", Elf32_ptr->e_shstrndx);
    printf("e_shnum: 0x%x\n", Elf32_ptr->e_shnum);
    /*
     * first of all, let's get the shstrtab, we'll get 
     * the name of each section with it
     */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    while (n--) {
        if (shdr_ptr->sh_type == SHT_STRTAB) {
            shstrtab = (char *)(ptr + shdr_ptr->sh_offset);
            if (!strcmp(&shstrtab[shdr_ptr->sh_name], ".shstrtab"))
                break;
        }
        shdr_ptr++;
    }

    /* list all of sections */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    n = Elf32_ptr->e_shnum;
    int i = 0;
    while (n--) {
        printf("[%02d]%s type: 0x%x, offset: 0x%x, size: 0x%x\n", i++, 
                &shstrtab[shdr_ptr->sh_name], shdr_ptr->sh_type, 
                shdr_ptr->sh_offset, shdr_ptr->sh_size);
        shdr_ptr++;
    }

    printf("=== sizeof(Elf32_Sym): 0x%x\n", sizeof(Elf32_Sym));

    /* list .gnu.hash */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    n = Elf32_ptr->e_shnum;
    i = 0;
    while (n--) {
        if (!strcmp(&shstrtab[shdr_ptr->sh_name], ".gnu.hash")) {
        Elf32_Dyn *dyn_ptr = (Elf32_Dyn *)(ptr + shdr_ptr->sh_offset);
        printf("GNU_HASH 0x%x\n", dyn_ptr->d_un.d_ptr);
            break;
        }
        shdr_ptr++;
    }

}

static void phdr_parse(void *ptr)
{
    Elf32_Ehdr *Elf32_ptr = NULL;

    Elf32_ptr = (Elf32_Ehdr *)ptr;
    Elf32_Phdr *elf32_phdr = NULL;
    int n, found = 0;

    n = Elf32_ptr->e_phnum;
    elf32_phdr = ptr + Elf32_ptr->e_phoff;
    while (n--) {
        if (elf32_phdr->p_type == PT_DYNAMIC) {
            found = 1;
            break;
        }
        elf32_phdr++;
    }

    if (found) {
        printf("=== PT_DYNAMIC: offset: 0x%x, size: 0x%x\n", 
                elf32_phdr->p_offset, elf32_phdr->p_filesz);
        printf("sizeof(Elf32_Dyn): %d\n", sizeof(Elf32_Dyn));
    }

    /* list all of dynamic sections */
    Elf32_Dyn *dyn_entry = ptr + elf32_phdr->p_offset;
    while (dyn_entry->d_tag != DT_NULL) {
        if (dyn_entry->d_tag == 0x6ffffef5) {
            printf("DT_HASH: addr: 0x%x\n", dyn_entry->d_un.d_ptr);
            break;
        }
        printf("tag: 0x%x, value: 0x%x\n", dyn_entry->d_tag, dyn_entry->d_un.d_ptr);

        dyn_entry++;
    }

}

static void relocs_parse(void *ptr)
{
    Elf32_Shdr *shdr_ptr = NULL;
    Elf32_Ehdr *Elf32_ptr = (Elf32_Ehdr *)ptr;

    int n = Elf32_ptr->e_shnum;
    char *shstrtab = NULL;

    /*
     * first of all, let's get the shstrtab, we'll get 
     * the name of each section with it
     */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    while (n--) {
        if (shdr_ptr->sh_type == SHT_STRTAB) {
            shstrtab = (char *)(ptr + shdr_ptr->sh_offset);
            if (!strcmp(&shstrtab[shdr_ptr->sh_name], ".shstrtab"))
                break;
        }
        shdr_ptr++;
    }

    /* list all of sections */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    n = Elf32_ptr->e_shnum;
    int i = 0;
    while (n--) {
        if (shdr_ptr->sh_type == SHT_REL || shdr_ptr->sh_type == SHT_RELA) {
            printf("[%02d]%s type: 0x%x, offset: 0x%x, size: 0x%x\n", i++, 
                    &shstrtab[shdr_ptr->sh_name], shdr_ptr->sh_type, 
                    shdr_ptr->sh_offset, shdr_ptr->sh_size);

            int n2 = (shdr_ptr->sh_size / sizeof(Elf32_Rel)); 
            Elf32_Rel *rel = (Elf32_Rel *)(ptr + shdr_ptr->sh_offset);
            while (n2--) {
            printf("==== offset: 0x%x, sizeof(Elf32_Rel): 0x%x\n", 
                    rel->r_offset, sizeof(Elf32_Rel));
            }
        }
        shdr_ptr++;
    }
}

static void symtab_parse(void *ptr)
{
    Elf32_Shdr *shdr_ptr = NULL;
    Elf32_Ehdr *Elf32_ptr = (Elf32_Ehdr *)ptr;

    int n = Elf32_ptr->e_shnum;
    char *shstrtab = NULL;

    /*
     * first of all, let's get the shstrtab, we'll get 
     * the name of each section with it
     */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    while (n--) {
        if (shdr_ptr->sh_type == SHT_STRTAB) {
            shstrtab = (char *)(ptr + shdr_ptr->sh_offset);
            if (!strcmp(&shstrtab[shdr_ptr->sh_name], ".shstrtab"))
                break;
        }
        shdr_ptr++;
    }

    /* list all of sections */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    n = Elf32_ptr->e_shnum;
    int i = 0;
    while (n--) {
        if (shdr_ptr->sh_type == SHT_SYMTAB) {
            printf("[%02d]%s type: 0x%x, offset: 0x%x, size: 0x%x\n", i++, 
                    &shstrtab[shdr_ptr->sh_name], shdr_ptr->sh_type, 
                    shdr_ptr->sh_offset, shdr_ptr->sh_size);

            int n2 = (shdr_ptr->sh_size / sizeof(Elf32_Sym)); 
            Elf32_Sym *sym = (Elf32_Sym *)(ptr + shdr_ptr->sh_offset);
            while (n2--) {
                printf("== value: 0x%x\n", sym->st_value);
                sym++;
            }
        }
        shdr_ptr++;
    }
}

static void dynsym_parse(void *ptr)
{
    Elf32_Shdr *shdr_ptr = NULL;
    Elf32_Ehdr *Elf32_ptr = (Elf32_Ehdr *)ptr;

    int n = Elf32_ptr->e_shnum;
    char *shstrtab = NULL;

    /*
     * first of all, let's get the shstrtab, we'll get 
     * the name of each section with it
     */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    while (n--) {
        if (shdr_ptr->sh_type == SHT_STRTAB) {
            shstrtab = (char *)(ptr + shdr_ptr->sh_offset);
            if (!strcmp(&shstrtab[shdr_ptr->sh_name], ".shstrtab"))
                break;
        }
        shdr_ptr++;
    }

    /* list all of sections */
    shdr_ptr = (Elf32_Shdr *)(ptr + Elf32_ptr->e_shoff);
    n = Elf32_ptr->e_shnum;
    int i = 0;
    while (n--) {
        if (shdr_ptr->sh_type == SHT_SYMTAB) {
            printf("[%02d]%s type: 0x%x, offset: 0x%x, size: 0x%x\n", i++, 
                    &shstrtab[shdr_ptr->sh_name], shdr_ptr->sh_type, 
                    shdr_ptr->sh_offset, shdr_ptr->sh_size);

            int n2 = (shdr_ptr->sh_size / sizeof(Elf32_Sym)); 
            Elf32_Sym *sym = (Elf32_Sym *)(ptr + shdr_ptr->sh_offset);
            while (n2--) {
                printf("== value: 0x%x\n", sym->st_value);
                sym++;
            }
        }
        shdr_ptr++;
    }
}

/*
 * display the memory postion of members of hedr struct
 */
static void ehdr_show_addr(void *ptr)
{
    Elf32_Ehdr *Elf32_ptr = (Elf32_Ehdr *)ptr;

    printf("&e_ident: %p\n", &Elf32_ptr->e_ident);
    printf("&e_entry: %p\n", &Elf32_ptr->e_entry);
    printf("&e_flags: %p\n", &Elf32_ptr->e_flags);

}

static void ehdr_parse(void *ptr)
{
    Elf32_Ehdr *Elf32_ptr = NULL;

    Elf32_ptr = (Elf32_Ehdr *)ptr;
    Elf32_Phdr *elf32_phdr = NULL;
    int n;

    printf("==================== EHDR ==================================\n");
    printf("e_ident: %s\n", Elf32_ptr->e_ident);
    printf("e_entry: %p\n", (void *)Elf32_ptr->e_entry);
    printf("e_phoff: %ld\n", (unsigned long)Elf32_ptr->e_phoff);
    printf("e_shoff: %ld\n", (unsigned long)Elf32_ptr->e_shoff);
    printf("e_ehsize: %d\n", Elf32_ptr->e_ehsize & 0xffff);
    printf("sizeof(Elf32_Ehdr): %d\n", sizeof(Elf32_Ehdr));
    printf("e_phentsize: %d\n", Elf32_ptr->e_phentsize);
    printf("e_phnum: %d\n", Elf32_ptr->e_phnum);
    printf("e_shentsize: %d\n", Elf32_ptr->e_shentsize);
    printf("e_shnum: %d\n", Elf32_ptr->e_shnum);
    printf("e_shstrndx: %d\n", Elf32_ptr->e_shstrndx);
    printf("==================== EHDR ==================================\n");

    /* next, parse shdr */
    shdr_parse(ptr + Elf32_ptr->e_shoff);
    /* pdhr */
    n = Elf32_ptr->e_phnum;
    elf32_phdr = ptr + Elf32_ptr->e_phoff;
    while (n--)
        phdr_parse(elf32_phdr++);

}

int main(int argc, char *argv[])
{
    int fd_src;
    //size_t len = 0;
    size_t filesize = 0;
    void *ptr = NULL;   /* ptr to binary file which mapped in memory */
    if (argc != 2) {
        printf("Usage: %s [ src bin ] ...\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    /*
     * we'll calculate the file size then map to memory
     */
    fd_src = open(argv[1], O_RDONLY);

    if (fd_src < 0) {
        printf("Failed to open %s!\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    /* get file size with lseek SEEK_END */
    filesize = lseek(fd_src, 0, SEEK_END);
    if (filesize < 0) {
        perror("lseek failed!");
        close(fd_src);
        exit(EXIT_FAILURE);
    }

    ptr = mmap(0, filesize, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd_src, 0);
    if (ptr < 0) {
        perror("mmap failed!");
        close(fd_src);
        exit(EXIT_FAILURE);
    }

//    ehdr_parse(ptr);
//    ehdr_show_addr(ptr);
//    shdr_parse(ptr);
    /* phdr_parse(ptr); */
    /* relocs_parse(ptr); */
    dynsym_parse(ptr);

    /* do the clean work */
    munmap(ptr, filesize);
    close(fd_src);

    return EXIT_SUCCESS;
} 
```

在你开始旅程之前，最好阅读一些关于elf格式的东西，以便你更好地理解它，希望它对你有所帮助。

# android - Android，我的自定义 ListView 的元素不可见

> ID：16176040
> 
> 赞同：0
> 
> 时间：2013-04-23T17:58:34.760
> 
> 标签：android, listview, visible

我尝试使用 CustomAdapter 创建一个简单的 ListView，但 ListView 不显示任何元素。我尝试更改背景颜色并且它正确更改......所以不是 ListView 没有显示，而是我认为的元素。

任何帮助都会很好，我已经搜索了几个小时有什么问题......

有我的代码：

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >
    </ListView>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/lblNFC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/lblNFC_text" />

        <!-- Read Only -->

        <EditText
            android:id="@+id/editTextNFC"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:cursorVisible="false"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:hint="Click scan to search NFC"
            android:inputType="none" />

        <Button
            android:id="@+id/btnFindNFC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="ButtonOnClick"
            android:text="@string/btnFindNFC_text" />
    </LinearLayout>

</LinearLayout> 
```

list_item_var.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

        <TextView
            android:id="@+id/var"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="18dp"
            android:textStyle="bold"
            android:typeface="serif" >

            </TextView>

            <TextView
                android:id="@+id/value"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:textSize="18dp"
                android:textStyle="bold"
                android:typeface="serif" >
            </TextView>

    </LinearLayout> 
```

CustomAdapter.java

```
public class CustomAdapter extends BaseAdapter {

    private ArrayList<VarDetails> _data;
    Context _c;

    CustomAdapter(ArrayList<VarDetails> data, Context c) {
        _data = data;
        _c = c;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return _data.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return _data.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) _c
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_item_var, null);
        }

        TextView varView = (TextView) v.findViewById(R.id.var);
        TextView valueView = (TextView) v.findViewById(R.id.value);

        VarDetails var = _data.get(position);
        varView.setText(var.var);
        valueView.setText("Value: " + var.value);

        return v;
    }

} 
```

VarActivity.java

```
public class VarActivity extends Activity {
    ListView varList;
    ArrayList<VarDetails> details;
    AdapterView.AdapterContextMenuInfo info;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        varList = (ListView) findViewById(R.id.list);

        details = new ArrayList<VarDetails>();

        VarDetails Detail;

        Detail = new VarDetails();
        Detail.setVar("Var1");
        Detail.setValue("Value1");
        details.add(Detail);

        Detail = new VarDetails();
        Detail.setVar("Var2");
        Detail.setValue("Value2");
        details.add(Detail);

        Detail = new VarDetails();
        Detail.setVar("Var3");
        Detail.setValue("Value3");
        details.add(Detail);

        varList.setAdapter(new CustomAdapter(details, this));
    }
} 
```

VarDetails.java

```
public class VarDetails {

    String var;
    String value;

    public String getVar() {
        return var;
    }

    public void setVar(String var) {
        this.var = var;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:53:07.203

更改 list_item_var.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<TextView
    android:id="@+id/var"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:textSize="18dp"
    android:textStyle="bold"
    android:typeface="serif" >
</TextView>

<TextView
    android:id="@+id/value"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:textSize="18dp"
    android:textStyle="bold"
    android:typeface="serif" >
</TextView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:08:10.573

您应该以某种方式将 VarDetail 的数据与自定义适配器中的布局元素绑定

后

```
v = vi.inflate(R.layout.list_item_var, null); 
```

例如，您可以尝试

```
TextView varView = (TextView) v.findViewById(R.id.var);
varView.setText(_data.get(position).getVar()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:40:06.570

list_item_var.xml 中的 LinearLayout 有问题。方向是水平的，所有子文本视图都有 layout_width="match_parent"，因此文本视图将被推出视图，因为第一个视图已扩展所有宽度空间。尝试将它们设置为“wrap_content”。如果你的 textview 有不同的比例，还要设置 layout_weight。

# matlab - Matlab中的双三次插值

> ID：16176042
> 
> 赞同：1
> 
> 时间：2013-04-23T17:58:51.920
> 
> 标签：matlab, image-processing

**双三次插值*的算法是什么*？
我在 MATLAB 中执行此操作（我是 MATLAB 新手）。我已经完成了 **双线性插值** 但我不知道如何进行双三次插值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:39:22.197

如果您需要实现它 - 阅读 Wiki，链接由 @robocop 发布 如果您只需要结果 - Matlab 有一个曲线拟合工具箱。

另外，我猜，双三次代表二维数据的三次插值。

因此，您可以使用`interp2`函数 with`method='cubic'`来完成任务。[在这里](http://www.mathworks.com/help/matlab/ref/interp2.html?searchHighlight=interp2)阅读

# android - 在 Android 上卸载快捷方式的权限

> ID：16176046
> 
> 赞同：1
> 
> 时间：2013-04-23T17:59:22.030
> 
> 标签：android

我在别的地方读到它是

```
<uses-permission android:name="com.android.launcher.action.UNINSTALL_SHORTCUT" /> 
```

同时用一个简单的谷歌我也见过

```
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

有什么区别？第一个似乎有效，但第二个更有意义，并且符合我用于安装的内容。

为了澄清，我想知道 AndroidManifest 中的正确权限设置，以允许从应用程序中删除主屏幕快捷方式。

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:33:04.417

从我在[官方文档页面](http://developer.android.com/reference/android/Manifest.permission.html)上阅读的内容来看，每个权限都包含`.permission.`，虽然`UNINSTALL_SHORTCUT`权限没有列出。我会假设这是您的第二个建议：

```
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:37:53.237

快速搜索`com.android.launcher.action.UNINSTALL_SHORTCUT`

我将其视为 Intent 动作。所以这是一个请求卸载的广播动作。

一个`com.android.launcher.permission.UNINSTALL_SHORTCUT`是权限本身，可能是直接卸载。

# mercurial - 克隆 cpython hg 存储库需要多长时间？

> ID：16176054
> 
> 赞同：2
> 
> 时间：2013-04-23T17:59:44.307
> 
> 标签：mercurial

昨晚，我尝试克隆 cpython hg repo，但大约 30 分钟后。等待，我取消了，因为它似乎没有工作。根据处理时间，它似乎几乎没有做任何事情。我是不是太不耐烦了？还是应该 hg clone 相当快？

我刚刚下载了最新的 hg：

```
$ hg --version
Mercurial Distributed SCM (version 2.5.4+20130405) 
```

我在 Mac OSX 10.8.3 上运行了这个。

我使用了良好的 Internet 连接：Comcast Business Class over WiFi，无线路由器位于我的桌下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:53:03.243

看起来应该需要< 5分钟。

```
$ time hg clone http://hg.python.org/cpython python-repo-2
requesting all changes
adding changesets
adding manifests
adding file changes
added 83508 changesets with 184511 changes to 9865 files (+1 heads)
updating to branch default
3677 files updated, 0 files merged, 0 files removed, 0 files unresolved

real    3m11.586s
user    1m44.192s
sys 0m6.959s 
```

我很确定我等的时间比昨晚更长。也许 repo 昨晚流量很大，但今天一切正常吗？我今天使用的是不同的 Internet 连接，所以可能是这样。

希望有人发现这一数据点很有用。

# safari - Safari 最大宽度的 CSS 响应问题：100% 等

> ID：16176061
> 
> 赞同：0
> 
> 时间：2013-04-23T18:00:06.977
> 
> 标签：safari, responsive-design, css

Chrome 和 FF 似乎正确使用了我的 CSS 响应式样式

Safari 不支持 如果您在 Safari 中访问 {a link](173.83.251.7/~grebesba/)，您会看到中间图像没有正确反应，但如果您将其与 chrome 和 ff 进行比较，它会。

我在这一点上迷路了，让它尽可能地发挥作用是一个挑战。

任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:11:02.613

将明确的百分比宽度添加到您的表 td 中。例如，带有甜甜圈菜单图像 (donut2.jpg) 的行具有三个 td。这些 td 的宽度应分别为 48.1%、17.2%、34.5%。...通过将图像的宽度除以表格的总宽度来获得这些百分比。由于某种原因，Safari 不会根据图像的大小自动调整 td 的大小。

# javascript - 什么是 !== 在 JavaScript 中？

> ID：16176062
> 
> 赞同：-5
> 
> 时间：2013-04-23T18:00:08.863
> 
> 标签：javascript

**该代码用于验证图像或单元格选择。我的问题是什么是 !== 在以下函数中使用：**

```
function checkSelected() {
    var cellList,
        selectedCell,
        imgList,
        selectedImg,
        i

    cellList = document.getElementById("imgTable")
    cellList = cellList.getElementsByTagName("td")

    imgList = document.getElementById("b_list")
    imgList = imgList.getElementsByTagName("img")

    if (cellList[0].style.border.indexOf("7px outset") !== -1) { selectedCell = cellList[0] }

    if (selectedCell === undefined || selectedImg === undefined) { return }

    selectedCell.style.backgroundImage = "url(" + selectedImg.src + ")"
    selectedCell.firstChild.style.visibility = "hidden"

    selectedCell.style.border = "1px solid"
    selectedImg.style.border = "1px solid"
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T18:01:06.287

`!==`是一个更严格的不等式，它不会对操作数执行任何类型强制，相比之下`!=`，它会执行类型强制.

`!==`如果操作数不相等和/或类型不同，So将返回 true。

相反`!=`，如果操作数相等，则返回 true。如果操作数的类型不同，JavaScript 会尝试将两个操作数转换为适合比较的形式。如果操作数是对象，那么 JavaScript 将比较它们的引用（内存地址）。最好的证明如下：

```
"3" != 3; // returns false because JavaScript will perform 
          // type coercion and compare the values

"3" !== 3; // returns true because the first operand is a
           // string whereas the second is an integer. Since
           // they are of different types, they are not equal. 
```

有关更多信息，请查看MDN 上的比较运算符[。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T18:00:57.647

它的意思是“不严格等于”，而不是`!=`“不等于”。

有两种检查相等性的方法：`==`和`===`，分别是“相等”和“严格相等”。要查看确切的差异，请查看[此表](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)。

`!=`并且`!==`只是这些操作的相应否定。所以例如`a !== b`是一样的`!(a === b)`

# php - 可以识别某些文本的功能

> ID：16176063
> 
> 赞同：0
> 
> 时间：2013-04-23T18:00:11.453
> 
> 标签：php, function

这是我的问题。我会尽量保持简洁：

我有一个 wab 页面，显示所选语言的文本，如下所示：

> `<p><?php echo $langFile->data->message; ?></p>`

实际文本可能如下所示：

> *你好，%1。您有 %2 个订单。如果您 %forgot% 您的密码，请单击 %here% ！*

所以我必须编写一个函数，可以用某些文本替换（每次替换调用一次）%1 和 %2，并将 % 之间的单词*替换*为链接文本。这很棘手的原因是我可以拥有如下所示的文本：

> bla bla %1，bla ***%yada yada %2 yada%*** bla bla bla。

所以在这里，该函数必须用可链接的文本替换***%yada yada %2 yada%***，并且当再次调用时，可以用另一个文本替换 %2。

我对编程有点陌生，所以我可以使用一些指针，因为如果可能的话，我不知道如何到达我想要的地方。提前非常感谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:20:35.800

您可以在文本中使用字符串变量而不是`%`使用字符串变量（除非您正在编写某种动态的东西，允许人们像 CMS 一样添加自己的变量）。您可以使变量来自数据库或其他类似语言的数据库。例子：

```
$name = 'Bob';
$salutation = "Hello, $name.";
$order_count = '2';
if ($order_count == '1'){
  $ordertext = "You have $order_count order.";
} else{
  $ordertext = "You have $order_count orders.";
} 
$forgot = 'forgot';
$link = 'http://www.domain.com/reset/password';
$forgotphrase = "If you $forgot your password click <a href='$link'>here</a>!";

$message = $salutation.$ordertext.$forgotphrase; 
```

**输出**

```
Hello, Bob. You have 2 orders. If you forgot your password click here! 
```

**更新**

要在更大范围内执行此操作，您可以拥有一个名为“短语”的数据库表。

```
id,salutation,ordertext_plur,ordertext_sing,forgot,link,forgotphrase,language,updated 
```

所以在 MySQL 中可能看起来像这样：

```
1,
'Hello, $name.',
'You have $order_count orders.',
'You have $order_count order.',
'forgot',
'http://www.domain.com/reset/password/en',
'If you $forgot your password click <a href='$link'>here</a>!',
'EN',
'2013-04-23 00:00:00' 
```

您的 SQL 语句如下所示：

```
select * from phrasing where language='EN'; 
```

然后，您将根据输出分配适当的变量。您将不得不更多地考虑如何实现这一点以及数据库应该有多大。

**其他想法**您可能会考虑在您的页面上使用类似[谷歌翻译小工具](http://www.gmodules.com/ig/creator?synd=open&url=http://www.google.com/ig/modules/translatemypage.xml&lang=en)来翻译 HTML 代码，而不是将翻译硬编码到数据库中。他们的翻译数据库每天更新。我的一些大型国际客户使用它而不是花钱翻译成每种语言。此外，它还可以更轻松地更改一种语言的代码，而不必担心在其他语言中会丢失它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:38:34.840

试试这个： http: `preg_replace` [//php.net/manual/es/function.preg-replace.php](http://php.net/manual/es/function.preg-replace.php)

可能`%[1-9]`适用于`%1`,`%2`和`%3`其他`%[A-Za-z ]+%`。

**有一些重要的事情...**对于其中一种情况，您应该将 % 更改为任何其他字符...这会使搜索更容易，因为...

这种情况很简单：`Hello, %1\. You have %2 orders. If you %forgot% your password click %here% !` 这不是：`Bla bla %1, bla %yada yada %2 yada% bla bla bla.` 但是，例如，这更容易：`Bla bla #1, bla %yada yada #2 yada% bla bla bla.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:10:25.260

```
$whatever = explode('%', $something); 
```

然后像任何其他数组一样运行它。如果你能找到一个共同点并将其分解，你通常可以得到任何正则表达式或 if/then 的难题，以按照你的需要工作。事后逻辑实际上显露出来。

例如，我试图找到一种方法来保证删除所有脚本标签。老实说，没有人的正则表达式起作用。然后，我在 html 中找到了我可以使用的共同点。我想出了这个。它将保证剥离所有脚本标签。当然，脚本标签只是这么简单，因为它们不会嵌套。然而，这是一个很好的例子，说明了如何使用“爆炸逻辑”或“手风琴编码”来让你的头脑围绕问题并让它发生。

```
$h = explode('>', $html);

foreach($h as $k => $v){
    $v = trim($v);
    if(preg_match('/^(<script[.*]*)/ius', $v)){
        $counter = $k;//starting key of the script stored for later
        }elseif(preg_match('/([.*]*<\/script$)/ius', $v)){
            $script = $k - $counter;//difference between opening and closing tag
            $counter = 0;//reset counter for next script
            for($i = $script; $i >= 0; $i--){//now use the keys to empty everything in between
                $h[$k-$i] = '';
                }
            }           
        }
for($i = 0; $i <= count($h); $i++){
    if($h[$i] != ''){
        $ht[$i] = $h[$i];//clean out the blanks so when we implode it works right.
        }
    }
$html = implode('> ', $ht);//all scripts stripped.GUARANTEED 
```

我相信你可以用同样的想法来做你想做的事情。尽管您的内部陈述会有所不同，但您将开始看到它如何更轻松地流动并实际显示您正在尝试做的事情的进展。

# c# - linq to xml - 获取具有特定属性的那些节点的子项

> ID：16176064
> 
> 赞同：0
> 
> 时间：2013-04-23T18:00:11.430
> 
> 标签：c#, linq, linq-to-xml

我有以下 XML 结构：

```
<partners>
  <partner partner="xxxxxx" Id="12345">
    <email>aa@aa.com</email>
    <email>bb@bb.com</email>
  </partner>
  <partner partner="yyyyyyy" Id="32165">
    <email>aa@aa.com</email>
    <email>bb@bb.com</email>
  </partner>
</partners> 
```

我试图从 ID 中获取某个合作伙伴的所有电子邮件地址，但无法完全获取。

到目前为止，我已经尝试过：

```
var x = from a in xdoc.Elements("partner") where a.Attribute("Id").Value == rpId.ToString() select a.Value; 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:02:30.887

目前，您只是在相关合作伙伴元素中选择文本 - 您最终会得到*一系列*结果。

我想你想要：

```
var query = xdoc.Root.Elements("partner")
                .Single(x => (string) x.Attribute("Id") == rpId.ToString())
                .Elements("email")
                .Select(x => x.Value); 
```

如果没有具有给定 ID 的元素或多个元素，这将失败。如果您只想在所有匹配元素中查找所有电子邮件地址，您可以使用：

```
var query = xdoc.Root.Elements("partner")
                .Where(x => (string) x.Attribute("Id") == rpId.ToString())
                .Elements("email")
                .Select(x => x.Value); 
```

编辑：我已更改`xdoc.Elements`为`xdoc.Root.Elements`发表评论；我怀疑你有：

```
XDocument xdoc = XDocument.Load(...); 
```

这意味着`xdoc.Elements(...)`只能找到根元素——而您想*从*根元素中搜索。

# android - 如何获得屏幕尺寸？

> ID：16176067
> 
> 赞同：1
> 
> 时间：2013-04-23T18:00:17.810
> 
> 标签：android

如何获得屏幕尺寸（以像素为单位）？我用了

```
Display display = getWindowManager().getDefaultDisplay(); 
Point size = new Point(); 
display.getSize(size);
int width = size.x; 
int height = size.y;` 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:03:27.210

用这个

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth(); 
int height = display.getHeight(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:04:05.197

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();     
int width = display.getWidth();
int height = display.getHeight(); 
```

# jquery - 将 jQuery 对象添加到空对象

> ID：16176068
> 
> 赞同：1
> 
> 时间：2013-04-23T18:00:18.063
> 
> 标签：jquery, arrays, object, collections, add

我正在尝试遍历单选按钮列表以找到匹配的标签并从中构造一个新对象，但是使用此代码我只能得到第一个标签

```
$target=$();

$radio.each(function(){
    $target = $target.add($source.children('label[for="'+$radio.attr("id")+'"]'));
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:04:34.073

$radio.attr("id") 只会获取集合中的第一个元素 id.. 尝试使用[.each()](http://api.jquery.com/each/)`$(this)`中的或第二个参数 `function(index,Element)`

```
$radio.each(function(){
    $target = $target.add($source.children('label[for="'+$(this).attr("id")+'"]'));
}) 
```

或者

```
$radio.each(function(i,v){
    $target = $target.add($source.children('label[for="'+$(v).attr("id")+'"]'));
}) 
```

您甚至可以通过做`this.id`或`v.id`不使用直接访问它`.attr('id')`

# ios - 在多个应用程序之间共享公共键值存储不起作用

> ID：16176069
> 
> 赞同：8
> 
> 时间：2013-04-23T18:00:20.930
> 
> 标签：ios, objective-c, icloud, key-value

我正准备推出我的一个应用程序的第二个版本。我将在以前版本的新捆绑 ID 下发布这个新版本。在之前的版本中，我使用了 iCloud 键值存储来保存一些设置和其他杂项信息。这是我的 v1 权利文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
     <key>get-task-allow</key>
     <true/>
     <key>com.apple.developer.ubiquity-kvstore-identifier</key>
     <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
     <key>keychain-access-groups</key>
     <array>
          <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
     </array>
</dict>
</plist> 
```

[按照http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html)在“为多个应用程序配置通用键值存储”下的说明后，这就是我的 v2权利文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
     <key>com.apple.developer.ubiquity-kvstore-identifier</key>
     <string>$(TeamIdentifierPrefix)com.companyname.MyApp</string>
     <key>get-task-allow</key>
     <true/>
     <key>keychain-access-groups</key>
     <array>
          <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
     </array>
</dict>
</plist> 
```

根据文档，v2 现在应该从与 v1 相同的键值存储中读取。但是，在执行简单测试时，它会失败。这是我如何复制的。

1.  打开我的应用程序 1.0。将布尔值“YES”写入键值存储键“InstalledVersion1”。

    ```
    NSUbiquitousKeyValueStore* store = [NSUbiquitousKeyValueStore defaultStore];
    [store setBool:YES forKey:@"InstalledVersion1"]; 
    ```

2.  打开 MyApp 2.0 并从商店中读取此值。

    ```
    NSUbiquitousKeyValueStore* store = [NSUbiquitousKeyValueStore defaultStore];
    [store synchronize];
    NSLog(@"%@", [store dictionaryRepresentation]); 
    ```

这打印`{}`。

它应该打印类似`{ "InstalledVersion1" = 1; }`

……但事实并非如此。

我究竟做错了什么？我是否只需要多一点耐心让商店同步？

感兴趣的设备日志：[https](https://gist.github.com/dlo/688f187c75fd1b1fdc78) ://gist.github.com/dlo/688f187c75fd1b1fdc78 （在`p (void)[[NSUbiquitousKeyValueStore defaultStore] _printDebugDescription]`调试器中运行后）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T05:16:26.603

答案有点荒谬，但在这里它适用于面临类似问题的任何其他人。

这就是我所做的。

1.  我的 iCloud 存储中有一个名为 CommonDocuments 的条目。我删除了它。
2.  我打开了通过蜂窝数据传输 iCloud 文档。

经过三天的尝试，事实证明 iCloud 存储中的一个不起眼的项目和看似无关的设置是解决问题的原因。

如果这两件事不适合你，我祝你好运。神速。

# python - python 中是否有一个库可以验证字段，这样我就不需要编写自己的正则表达式或创建 Form 实例？

> ID：16176071
> 
> 赞同：0
> 
> 时间：2013-04-23T18:00:33.597
> 
> 标签：python, validation, python-2.7, flask

我正在使用 python 和 Flask 构建一个简单的 Web 应用程序。我正在添加一个简单的表单并试图避免使用所有这些 Form 实例；我想分别验证客户端和服务器端，并避免理解出现在 Django 和 Flask 教程中的整个 Form 类的东西，它们总是解释如何实现它，但从不解释它背后的想法。

因此，一旦表单发布，我只需要验证用户名，例如，在我保存之前不包含注入或特殊字符。我需要一个`is_valid_username()`函数来节省我编写正则表达式的时间。

有这样的图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:08:31.913

尝试 WTForms 它应该是最好的。工作

```
from wtforms import Form, BooleanField, TextField, validators

class RegistrationForm(Form):
username     = TextField('Username', [validators.Length(min=4, max=25)])
email        = TextField('Email Address', [validators.Length(min=6, max=35)])
accept_rules = BooleanField('I accept the site rules', [validators.Required()]) 
```

要了解完整的访问[http://wtforms.simplecodes.com/docs/1.0.3/crash_course.html](http://wtforms.simplecodes.com/docs/1.0.3/crash_course.html)

我希望它有所帮助。

# c++ - 不是所有的控制路径都返回一个值？警告

> ID：16176072
> 
> 赞同：4
> 
> 时间：2013-04-23T18:00:38.933
> 
> 标签：c++, error-handling, compiler-warnings

我有一小段代码在编译时给了我以下警告：

***'BGOLUB::Containers::Stack::Pop' ：并非所有控制路径都返回值***

这是代码：

```
template<typename T>
T Stack<T>::Pop()                                                                           
{

try
{
    if (m_index<0) throw OutOfBoundsException(m_index);

    --m_index;
    return(m_array[m_index]);
}

catch(OutOfBoundsException&)
{
    cerr<<"Underflow Index = "<<m_index<<endl;
}

catch(...)
{
    cerr<<"Unhandled Error Occured"<<endl;
}
} 
```

有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T18:01:40.593

> 有什么建议吗？

编译器给你最好的建议。并非函数中的所有控制路径都包含`return`语句，并且您的函数应该返回一个值。

如果抛出异常并将控制权转移到`catch`处理程序，则该处理程序将打印一些内容`cerr`，然后在函数的末尾流出，而实际上`return`没有任何内容。

这是**未定义的行为**。根据 C++11 标准的第 6.6.3/2 段：

> [..] 从函数末尾流出相当于没有值的返回；**这会导致值返回函数中的未定义行为**。

对于默认可构造值，您可以通过`return T()`在函数结束前添加一条语句来解决此问题：

```
template<typename T>
T Stack<T>::Pop()
{
    try
    {
        // ...
    }
    catch (OutOfBoundsException&)
    {
        // ...
    }
    catch (...)
    {
        // ...
    }

    return T();
//  ^^^^^^^^^^^
} 
```

然而，更合理的方法是不要**吞下**`Pop()`异常，而是**重新抛出它**。`Pop()`没有关于如何从在此上下文中发生的错误中恢复的战略级信息：

```
template<typename T>
T Stack<T>::Pop()
{
    try
    {
        // ...
    }
    catch (OutOfBoundsException&)
    {
        // ...
        throw; // <== Re-throw after printing the diagnostic
    }
    catch (...)
    {
        // ...
        throw; // <== Re-throw after printing the diagnostic
    }
} 
```

如果根本不属于记录错误消息的责任，那就更好了`Pop()`，因为`Pop()`在这个意义上可能应该由具有不同要求的代码重用（有些人可能不想记录任何东西，有些人可能想记录消息到文件中，有些人可能希望以不同的语言记录消息，等等）。

因此，您的函数的更合理版本实际上是：

```
template<typename T>
T Stack<T>::Pop()                
{
    if (m_index<0) throw OutOfBoundsException(m_index);
    --m_index;
    return(m_array[m_index]);
} 
```

一般来说，您应该尝试（不是双关语）避免`try/catch`阻塞，除非您必须：

*   翻译异常
*   从错误中恢复（但您需要战略知识才能做到这一点）

如果这不是您的任务（就像`Pop()`上面的函数一样），在大多数情况下，最好的办法是**根本不处理异常，**让它们向上传播调用堆栈。

引用[戴夫亚伯拉罕的](http://www.boost.org/community/error_handling.html)话：

> 通常处理异常的最好方法是根本不处理它们。如果您可以让它们通过您的代码并允许析构函数处理清理，那么您的代码会更干净。

为避免泄漏内存、资源或一般责任，请使用适当的**RAII 包装器**编写**异常安全**的代码。[Jon Kalb 在这个由两部分组成的演讲](http://www.youtube.com/watch?v=N9bR0ztmmEQ)中给出了这个意义上的优秀指导方针。

 **特别是，避免编写`catch (...)`处理程序：发明异常是为了防止程序员忽略错误，并且在通用处理程序中将它们全部吞下而不重新抛出它们是忽略它们的最佳方法。

* * *

**笔记：**

请注意，您的实现`Pop()`有点问题：如果`T`在您已经修改堆栈指针之后，将元素返回给调用者时抛出的复制构造函数或移动构造函数会发生什么？

这就是 C++ 标准库定义两个独立函数的原因，`pop()`并且`top()`：因为它允许提供**强有力的保证**，即为您的`pop()`操作提供事务语义 - 要么删除元素而不抛出异常，要么函数根本没有效果.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:02:21.377

您需要重新抛出异常，或者在函数结束时返回可能 T() 的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:02:21.877

当抛出异常时，它将被两个 catch 语句之一捕获。但是，它们仍然需要`return`从函数中获取值。您可以`return`在函数的末尾放置一个语句。

但是，如果`Pop`由于 为空而引发异常`Stack`，则让异常传播到函数之外更有意义。为什么`Pop`自己试图处理异常情况？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:08:51.350

我建议在您的所有`if`陈述中使用方括号，即使是单行正文。它们不是绝对必要的，没有它们你可以编写完全合法的代码，但是它们使你的代码更具可读性，并且这样的错误会更容易发现。

此外，您似乎对异常的工作方式存在根本性的误解。如果您的代码遇到异常，它将直接跳转到该`catch`块，并且不会执行该`try`块中的任何后续代码。因此，永远不会到达`return`你块中的语句`try`，并且你的函数不会返回任何东西，因为`catch`块缺少`return`语句。

您可以通过在块中添加`return`语句来解决此问题。`catch`**

# xamarin.ios - Xamarin.Auth 与 Twitter

> ID：16176078
> 
> 赞同：3
> 
> 时间：2013-04-23T18:00:52.230
> 
> 标签：xamarin.ios, xamarin.android

我正在尝试使用 Facebook 和 Twitter 实现登录。我让它与 Facebook 合作，但不知道如何与 Twitter 合作。有没有例子？我的 Facebook 实现是这样的：

```
var auth = new OAuth2Authenticator(
    clientId: "*****************",
    scope: "email",
    authorizeUrl: new System.Uri("https://m.facebook.com/dialog/oauth/"),
    redirectUrl: new System.Uri("http://www.facebook.com/connect/login_success.html"));

StartActivity(auth.GetUI(this));

auth.Completed += (senderFb, eventArgs) =>
{
    if (eventArgs.IsAuthenticated)
    {
        AccountStore.Create(this).Save(eventArgs.Account, "Facebook");

        // Now that we're logged in, make a OAuth2 request to get the user's info.
        var request = new OAuth2Request("GET", new System.Uri("https://graph.facebook.com/me"), null, eventArgs.Account);

        request.GetResponseAsync().ContinueWith(t =>
        {
            if (!t.IsFaulted && !t.IsCanceled)
            {
                var obj = JsonValue.Parse(t.Result.GetResponseText());
                if (obj != null)
                {
                    var user = new UserProfile
                        {
                            FirstName = obj["first_name"],
                            LastName = obj["last_name"],
                            FacebookProfileLink = obj["link"],
                            FacebookToken = eventArgs.Account.Properties["access_token"],
                            Gender = obj["gender"] == "female" ? "Female" : "Male",
                            EmailAddress = obj["email"],
                            DisplayName = obj["name"],
                            Name = obj["name"],
                            LoginName = obj["email"]
                        };
                    SignUpUser(user);
                }
            }
        }, uiScheduler);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T08:12:11.197

您可以像这样使用 oauth1。

```
 this.Authenticator = new OAuth1Authenticator (ConsumerKey, ConsumerSecret, RequestTokenUrl, AuthorizeUrl, AccessTokenUrl, DummyCallBackUrl, (IDictionary<string, string> accountProperties) => {
   string screen_name = "";
   if (accountProperties.TryGetValue("screen_name", out screen_name)) {
      Account a = new Account(screen_name, accountProperties);
      AuthenticatorCompletedEventArgs e = new AuthenticatorCompletedEventArgs(a);
      CompleteAuthentication(e);
   }
   return null;
}); 
```

twitter api 不完全支持 OAuth2

# debugging - MFC C++/CLI 项目：VS2012 中的 /CLR 开关导致调试问题

> ID：16176080
> 
> 赞同：0
> 
> 时间：2013-04-23T18:01:04.990
> 
> 标签：debugging, c++-cli

该公司已将我们的IDE从VS2008升级到VS2012。当我尝试调试我的 C++/CLI 项目（使用 VS2008 创建）时，我似乎不再看到诸如“this”指针、STL 容器、结构中的数据成员等项目。

从 VS2012 开始，我尝试创建一个新的 MFC“多文档”项目，并在其 CMainFrame::OnCreate() 的末尾设置一个断点。调试时一切都很好，但是一旦启用 /CLR，就会遇到上述问题。

VS2010/VS2012 中是否有我需要在某处切换的新开关？

是的，调试器类型是“混合”。事实上，我没有更改任何项目设置（在 VS2008 中运行良好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:54:35.253

答案：VS2012 更新 2 的问题（请参阅 Grys73 在[http://connect.microsoft.com/VisualStudio/feedback/details/751327/debugger-stepping-in-mixed-mode-application-is-very-very-slow](http://connect.microsoft.com/VisualStudio/feedback/details/751327/debugger-stepping-in-mixed-mode-application-is-very-very-slow)中的帖子)

事实上，在系统还原后，我完全重新安装了 VS2012，而没有更新 2，并且调试器运行良好。

# ios - 如何将场景剪辑到屏幕边界？

> ID：16176091
> 
> 赞同：0
> 
> 时间：2013-04-23T18:01:45.910
> 
> 标签：ios, ios5, cocos2d-iphone

我有一个场景，其中包含足够大到屏幕外的图层。当我进行场景转换（例如`CCTransitionSlideInR`）时，屏幕外的部分在转换过程中是可见的，这当然看起来很难看。我想要的是将场景剪辑到屏幕大小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:14:59.443

你也许可以使用这个：

[https://github.com/njt1982/ClippingNode](https://github.com/njt1982/ClippingNode)

主页引用原始来源。

# java - Java写入文件

> ID：16176099
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:02:05.973
> 
> 标签：java, file

我在用 Java 写入文件时遇到问题。我想写入 .txt 文件，但是当程序写入任何内容时，它会在写入之前删除。我不想要它。我在使用 flw.append 之前使用了 flw.write，但没有任何改变。你能帮助我吗 ？

```
 public void list(String path) throws IOException {

            FileWriter flw=new FileWriter(path);

    flw.append("----------------------------------------------List---------------------------------------------\n");

            for (int i = 0; i < athCtr - 1; i++) {
        flw.append("Author:" + athr[i].getId() + "\t"
                + athr[i].getName() + "\t" + athr[i].getUniv() + "\t"
                + athr[i].getDepart() + "\t" + athr[i].getEmail()+"\n");

        if (athr[i].getArtCtr() != 0) {
            for (int j = 0; j < athr[i].getArtCtr(); j++) {
                flw.append("+" + athr[i].getArticle(j) + ":");
                for (int k = 0; k < artCtr; k++) {
                    if (art[k].getPaperId().equals(athr[i].getArticle(j))) {
                        flw.append("\t" + art[k].getName() + "\t"
                                + art[k].getPublisherName() + "\t"
                                + art[k].getPublishYear()+"\n");

                    }
                }

            }
            flw.append("\n");
        }
    }

    flw.append("Author:" + athr[athCtr - 1].getId() + "\t"
            + athr[athCtr - 1].getName() + "\t"
            + athr[athCtr - 1].getUniv() + "\t"
            + athr[athCtr - 1].getDepart() + "\t"
            + athr[athCtr - 1].getEmail()+"\n");
    if (athr[athCtr - 1].getArtCtr() != 0) {
        for (int j = 0; j < athr[athCtr - 1].getArtCtr(); j++) {
            flw.append("+" + athr[athCtr - 1].getArticle(j) + ":");
            for (int k = 0; k < artCtr; k++) {
                if (art[k].getPaperId().equals(
                        athr[athCtr - 1].getArticle(j))) {
                    flw.append("\t" + art[k].getName() + "\t"
                            + art[k].getPublisherName() + "\t"
                            + art[k].getPublishYear()+"\n");

                }
            }
        }
    }
    flw.append("----------------------------------------------End----------------------------------------------\n\n");
    flw.close();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:03:24.193

这个问题可能应该被关闭，因为它已经被多次询问和回答，但关键是使用正确的 FileWriter 构造函数，该构造函数将 true 作为第二个参数。第二个 true 参数告诉 Java 打开文件以进行追加而不是覆盖。

```
//FileWriter flw = new FileWriter(path); // not this
FileWriter flw = new FileWriter(path, true);  // but this 
```

事实上，我投票决定将这个问题作为重复问题结束。

顺便说一句：您可能不想直接使用 FileWriter 编写，而是希望将其包装在 BufferedWriter 或（我的偏好）PrintWriter 实例中。`println(...)`这将允许您使用和其他熟悉的方法简单、更有效地写入文件。

编辑2：在查看了更多代码之后，我认为实际上您应该考虑使用 PrintWriter 类，然后使用该`printf(...)`方法进行编写，因为这允许格式化字符串输出，这比您尝试的一堆选项卡好得多去做。

# python - Python 等价于 Perl 的证明

> ID：16176101
> 
> 赞同：3
> 
> 时间：2013-04-23T18:02:08.060
> 
> 标签：python, unit-testing

我正在使用 python 开发一个 tdd 项目，我正在寻找一种在我的 t/ 目录中运行所有单元测试的快速方法。在 perl 中，这很容易：

```
$ prove -lvr t/ 
```

我正在寻找 python 等价物。鼻子似乎没有这个功能。我滚动了一个命令行语句来做这样的事情：

```
for x in `find t/ | grep py`; do echo $x && python $x ; done 
```

但这缺少像 -l （包括本地库目录）和 -v （详细）这样的标志。这在python中是否存在？我想要一个这样的班轮：

```
$ pyprove -lvr t/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:56:48.837

您可以通过运行来做到这一点`python -m unittest discover -s t/`，它将[发现您的单元测试](http://docs.python.org/2/library/unittest.html#test-discovery)并为您运行它们。看起来有一个详细标志，但我没有看到包含本地 lib 目录的标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:13:03.213

试试[鼻子](https://pypi.python.org/pypi/nose/1.3.0)。添加`-v`详细程度，`-w`以指定搜索目录（参考：[用法](https://nose.readthedocs.org/en/latest/usage.html)）。

```
nosetests -v -w t/ 
```

# c# - SQLite 连接字符串“Data Source = :memory:”有什么用？

> ID：16176108
> 
> 赞同：2
> 
> 时间：2013-04-23T18:02:21.523
> 
> 标签：c#, sql, database, sqlite

无意中，当我在寻找一种方法来快速测试我的第一个 SQLite 用户定义函数而无需创建 SQLite 数据库时，我发现了这个简短的 SQLite 连接字符串，它帮助我快速测试了该函数（对此感到满意）：

```
SQLiteConnection con = new SQLiteConnection("Data Source = :memory:"); 
```

至少这是出于测试目的（我猜是这样）。我想知道我们还能用它做什么？我可以即时创建一些数据库并在某处保存为文件吗？

这就是所谓的内存数据库，它通常用于易失性存储设备，在设备关闭后无需保存数据，适合通过网络进行实时处理。这就是我对它的一些用法的全部了解，但我真的没有经历过任何与之相关的项目。

如果您有什么要分享的（以您的经验），请在这里分享，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T10:30:13.143

对于一个项目，我必须比较两个 SQLite 数据库。

我将`:memory:`数据源用作帮助比较数据库的临时表的“主”（这是数据库的默认别名），然后通过给它们一个别名来[附加两个数据库。](http://www.sqlite.org/lang_attach.html)这样我就可以从同一个数据库和一个临时数据库访问`SQLiteConnection`。

我不认为 SQLite 提供了将内存数据库保存为文件的任何方法，但是如果您愿意，可以使用相同的方法：附加空数据库并使用复制数据

```
CREATE TABLE attachedDb.TableName AS SELECT * FROM main.TableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-09T15:35:18.263

我发现内存数据库对于运行自动测试非常有用。它们比基于文件的数据库运行得更快，在测试结束时会自动被丢弃，并且不会弄乱我的硬盘。

# c# - Outlook 2010 VSTO 更改文件名的附件大小

> ID：16176112
> 
> 赞同：1
> 
> 时间：2013-04-23T18:02:30.970
> 
> 标签：c#, outlook, vsto, add-in, mapi

您好，我正在编写一个 Outlook 2010 插件，基本上我需要操纵 OL 检查器中显示的附件的大小，其中列出了附件，或者只是不显示大小。

您基本上会在附件列表中看到类似：filename.ext (5 KB)、textfile.txt (1 M)

附件方法是 ATTACH_BY_VALUE，所以我知道大小来自 PR_ATTACH_SIZE，这是基于 PR_ATTACH_DATA_BIN 内容的计算属性。

所以你认为有办法隐藏（5 KB）文本或用其他值替换它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:13:35.737

不，除非您直接修改显示文件名的 RTF 控件，否则您不能这样做。

# css - 更改宽度和居中 Wordpress 水平菜单项

> ID：16176116
> 
> 赞同：0
> 
> 时间：2013-04-23T18:02:49.833
> 
> 标签：css, wordpress, menu, width, center

我目前正在以下 Wordpress 网站上工作：

[http://2013.whitehallrow.com/](http://2013.whitehallrow.com/)

很明显，水平菜单项的样式不正确。我希望“媒体”链接适合导航栏的右侧；如何更改每个项目的宽度以使它们都适合？

我还希望菜单项居中，以便每一侧的边距相等。我对现有 Wordpress 主题的 CSS 的了解很粗略。谁能给我一些指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:24:28.093

这有点“脏”，因为它特定于您的菜单和其中包含的名称。但也许有用：

```
.main-navigation li {
    margin: 0 30px 0 0;
    position: relative;
}

/* For the distance of the first element */
main-navigation li:first-child {
    margin-left: 50px;
}

/* For nulling the distance of the first child element */
.menu-item-type-post_type li:first-child {
    margin-left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:23:57.183

你当然可以这样做。

查看菜单 css 文件并找到`.your_menu_name li a`部分。在这里寻找**填充**并调整大小。

例如。如果`padding-left:30px;`替换`30`为`10`并查看您的工作菜单。

您可以通过添加悬停条件来自定义`background-color:#CCCCCC;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:35:44.517

1.  您可以使用 CSS3 伪类选择每个菜单项`:nth-child(N)`，请参阅[此](http://reference.sitepoint.com/css/pseudoclass-nthchild)。例如。：

    ```
    .nav-menu li:nth-child(3) {
        display: block;
        width: 300px; /*Your individual menu-item width here*/
    } 
    ```

2.  要将您的菜单对齐到中心，您必须将您的 css in `style.css`(line no: 1460) 更改为以下

    ```
    .main-navigation ul.nav-menu, .main-navigation div.nav-menu > ul {
        border-bottom: 1px solid #8293FF;
        border-top: 1px solid #8293FF;
        display: table;
        text-align: center;
        width: 100%;
    } 
    ```

# python-2.7 - Enthought Canopy 1.0 缺少 Python.h 和其他包含

> ID：16176128
> 
> 赞同：0
> 
> 时间：2013-04-23T18:03:32.353
> 
> 标签：python-2.7, build, enthought, setup.py, canopy

我从 Enthought 为 Mac OSX 64 位安装了 Canopy 发行版，但缺少 include/python-2.7 文件夹。

我找不到包含这个的包，有没有人遇到这个问题和解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:06:49.830

Canopy 使用 backport[`venv`](http://docs.python.org/3/library/venv)来提供暴露给用户的 Python。`venv`不复制包含目录，但`distutils`会从父发行版中找到并使用包含目录，例如，模特定版本号，它可能看起来像这样：

`/Applications/Canopy.app/appdata/canopy-1.0.0.1160.macosx-x86_64/Canopy.app/Contents/include/python2.7/`

如果您尝试编译一个简单的扩展模块，它应该可以工作。请试一试，如果一个简单的扩展模块不起作用，请告诉我们。

# android - 从 WMS 或 WFS 服务读取坐标

> ID：16176131
> 
> 赞同：1
> 
> 时间：2013-04-23T18:03:40.477
> 
> 标签：android, ios, google-maps, wms

我目前正在使用基于开放数据的谷歌地图开发适用于 IOS、Android 和 Windows Phone 的应用程序。开放数据可用于 WMS 或 WFS 格式，但我想从该服务中提取坐标以获得 JSON（因为我想将包含在其中的信息包含在带有个人信息的谷歌地图上）。

我尝试使用 geoserver 获取通量并将其公开为有趣层的 JSON，但它不起作用。

我怎么能做到这一点？是否可以直接在 Android、Windows Phone 和 Iphone 上获取并添加到谷歌地图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T13:52:23.857

WMS 被称为 Web Map Service，通常不提供数据（虽然可以使用 getFeatureInfo，但并非所有的 geoserver 实现都支持 json 输出），而是可以使用 WFS 请求（get 或 post）来获取您需要的数据。WFS 确实支持 json（使用参数 OUTPUT=application/json ）并允许过滤器（空间和基于属性）和限制功能。您应该查看官方文档以获取详细的查询规范；我建议使用 1.1.0 版本

# android - 在android中使用前置摄像头的问题

> ID：16176132
> 
> 赞同：0
> 
> 时间：2013-04-23T18:03:45.903
> 
> 标签：android, android-camera

我试图在我的应用程序中实现前置摄像头。我使用了以下代码。它适用于后置摄像头。但是我不能把摄像头换成前置摄像头。

```
package com.fsp.googleimagesearch;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.PictureCallback;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;
import android.widget.FrameLayout;

public class PixtantCamera extends Activity {

    private Camera mCamera;
    private CameraPreview mCameraPreview;
    Button btn_capture, btn_front_cam;
    FrameLayout preview;
    private SurfaceHolder mSurfaceHolder;

    @Override
    protected void onStop() {
        super.onStop();

        if (mCamera != null) {

            // mCamera.stopPreview();
            stopCamera();
            mCamera.release();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();

        if (mCamera != null) {

            // mCamera.stopPreview();
            stopCamera();
            mCamera.release();
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pixt_camera);

        mCamera = getCameraInstance();
        mCameraPreview = new CameraPreview(this, mCamera);
        preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mCameraPreview);
        btn_front_cam = (Button) findViewById(R.id.btn_front_cam);

        btn_capture = (Button) findViewById(R.id.btn_click_cam);
        btn_capture.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mCamera.takePicture(null, null, mPicture);
            }
        });

        btn_front_cam.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                if (Camera.getNumberOfCameras() >= 2) {
                    // if you want to open front facing camera use this line
                    mCamera = Camera.open(CameraInfo.CAMERA_FACING_FRONT);              
                try {
                    mCameraPreview = new CameraPreview(PixtantCamera.this,
                            mCamera);
                    preview.addView(mCameraPreview);
                }
                catch (Exception e) {
                    mCamera.release();
                }
                mCamera.takePicture(null, null, mPicture);
            }
            }
        });

    }

    public int getFrontCameraId() {
        CameraInfo ci = new CameraInfo();
        for (int i = 0; i < Camera.getNumberOfCameras(); i++) {
            Camera.getCameraInfo(i, ci);
            if (ci.facing == CameraInfo.CAMERA_FACING_FRONT)
                return i;
        }
        return -1; // No front-facing camera found
    }

    private Camera getCameraInstance() {
        Camera camera = null;
        try {
            camera = Camera.open();
        } catch (Exception e) {
            // cannot get camera or does not exist
        }
        return camera;
    }

    PictureCallback mPicture = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            File pictureFile = getOutputMediaFile();
            if (pictureFile == null) {
                return;
            }
            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {

            } catch (IOException e) {
            }
        }
    };

    private static File getOutputMediaFile() {
        File mediaStorageDir = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                "MyCameraApp");
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());
        File mediaFile;
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");

        return mediaFile;
    }

    public void stopCamera() {
        // mSurfaceHolder = getHolder();
        mSurfaceHolder.removeCallback(mCameraPreview);
        // mCamera.stopPreview();
    }

    public class CameraPreview extends SurfaceView implements
            SurfaceHolder.Callback {

        // private Camera mCamera;

        // Constructor that obtains context and camera
        @SuppressWarnings("deprecation")
        public CameraPreview(Context context, Camera camera) {
            super(context);
            mCamera = camera;
            mSurfaceHolder = this.getHolder();
            mSurfaceHolder.addCallback(this);
            mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        @Override
        public void surfaceCreated(SurfaceHolder surfaceHolder) {
            try {
                mCamera.setPreviewDisplay(surfaceHolder);
                mCamera.startPreview();
            } catch (IOException e) {
                // left blank for now
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
            mCamera.stopPreview();
            mCamera.release();
        }

        @Override
        public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
                int width, int height) {
            // start preview with new settings
            try {
                mCamera.setPreviewDisplay(surfaceHolder);
                mCamera.startPreview();
            } catch (Exception e) {
                // intentionally left blank for a test
            }
        }
    }

} 
```

我收到以下错误。

```
04-23 23:27:34.260: E/AndroidRuntime(24320): FATAL EXCEPTION: main
04-23 23:27:34.260: E/AndroidRuntime(24320): java.lang.RuntimeException: Fail to connect to camera service
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.hardware.Camera.native_setup(Native Method)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.hardware.Camera.<init>(Camera.java:353)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.hardware.Camera.open(Camera.java:312)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at com.fsp.googleimagesearch.PixtantCamera$3.onClick(PixtantCamera.java:88)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.view.View.performClick(View.java:4262)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.view.View$PerformClick.run(View.java:17351)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.os.Handler.handleCallback(Handler.java:615)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.os.Looper.loop(Looper.java:137)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at android.app.ActivityThread.main(ActivityThread.java:4935)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at java.lang.reflect.Method.invoke(Method.java:511)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-23 23:27:34.260: E/AndroidRuntime(24320):    at dalvik.system.NativeStart.main(Native Method) 
```

我也添加了权限..

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.CAMERA" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:57:31.387

`Camera.open()`我认为问题在于在释放您的应用当前持有的相机之前，您无法进行第二次调用。尝试在方法`mCamera.release()`的第一行添加.`onClick``btn_front_cam`

编辑：您可能还需要

```
<uses-feature android:name="android.hardware.camera.autofocus"/> 
```

也

```
<uses-feature android:name="android.hardware.camera.front"/> 
```

在您的 AndroidManifest.xml 文件中。

# validation - 使用自定义格式的日期时间验证。'.' 的问题 分隔器

> ID：16176135
> 
> 赞同：2
> 
> 时间：2013-04-23T18:03:49.283
> 
> 标签：validation, asp.net-mvc-4, unobtrusive-validation

在我的网络应用程序（asp.new mvc）中，我尝试对日期字段进行验证。

如果我用这个

```
[DataType(DataType.Date)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime? PeriodBeginFrom { get; set; } 
```

或这个

```
[DataType(DataType.Date)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd-MM-yyyy}")]
public DateTime? PeriodBeginFrom { get; set; } 
```

有用。但是，如果我尝试使用 '.' 进行分隔。分隔器

```
[DataType(DataType.Date)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")]
public DateTime? PeriodBeginFrom { get; set; } 
```

我有一个问题。jQuery 验证说如果我尝试“01.01.2001”，我必须输入日期。

这是视图

```
<div class="ElementDiv">
   @Html.LabelFor(m => m.Filter.PeriodBeginFrom, new { @class = "Labels" })
   @Html.EditorFor(m => m.Filter.PeriodBeginFrom, new { @class = "TextBoxes" })
   @Html.ValidationMessageFor(m => m.Filter.PeriodBeginFrom, null, new { @class = "Errors" })
</div> 
```

*为什么？*与所有其他分隔符一起工作。'.' 有什么问题？分离器？

**更新 1：**验证似乎无法正常工作。如果我的模型中有这个属性

```
[DataType(DataType.Date)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime? PeriodBeginFrom { get; set; } 
```

我们将 DateTime 对象传递给模型，它将显示在带有 '.' 的文本框中 像'12.12.2012'而不是像我在等待'12/12/2012'。希望你能给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:18:07.373

您正在查看日期组件。但请记住，时间组件可以包括秒和小数秒，中间有一个句点。由于日期和时间经常组合在一起，如果句号被视为特殊字符，我不会感到惊讶。

更新：

我浏览了以下文档链：

[DisplayFormatAttribute.ApplyFormatInEditMode 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.applyformatineditmode.aspx)

[DisplayFormatAttribute.DataFormatString 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.dataformatstring.aspx)

[格式化类型](http://msdn.microsoft.com/en-us/library/26etazsy.aspx)

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

我希望看到句点字符在格式字符串中具有特殊含义。相反，文档没有具体列出句点字符。这意味着它应该属于“任何其他字符”的类别，因此，“该字符被复制到结果字符串不变”。

不过，我不相信。小数秒出现在像 23:59:59.999 这样的时间分量中，我怀疑对句点字符进行了未记录的特殊处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:44:29.867

格式的问题不在于 ASP 标记和字段，而在于不显眼的验证 jquery 库。我不得不为我的日期格式重载不显眼的 JavaScript 验证方法。更多详细信息在这里 [MVC DateTime 验证 - 英国日期格式](https://stackoverflow.com/questions/12053022/mvc-datetime-validation-uk-date-format)

# ruby-on-rails - 机械化重定向/ Nokogiri（菜鸟使用机械化）

> ID：16176136
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:03:50.577
> 
> 标签：ruby-on-rails, ruby, nokogiri, mechanize

我有一些看起来像这样的东西：

```
def self.foo
  agent = Mechanize.new
  form  = agent.get("link/to/form/url")

  form.form_with(:name => "form_name") do |f|
    f.field_with(:name => "input_name").value = "random_value"
    agent.form.forms[0].submit
    agent.follow_meta_refresh = true
  end
  self.bar
end

def self.bar
  #may need to pass variable for agent here?
  doc = Nokogiri::HTML(open(need redirect object!))
  doc.css(".random_class").text
end 
```

我调用类方法后`foo`，它成功找到表单，填写输入并提交。但是，当它完成并调用时`bar`，我被卡住了。

我还没有找到一种方法来成功传递 Mechanize 对象，该对象是重定向后表单提交后生成的页面的 HTML，以测试并查看我是否捕获了正确的页面，并使用 Nokogiri 解析 CSS。

那里有任何机械化向导有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:12:23.050

您的`agent`变量是该`foo`方法的本地变量，因此`bar`看不到它。您可能想要使用类变量，例如`@agent`. 我不确定你为什么要创建这样的类方法。如果您向课程提供源代码，并详细说明您这样做的原因，您可能会得到更好的建议。

# c# - .NET MVC 部分返回 jQuery Ajax 输入在表单提交后不重置

> ID：16176140
> 
> 赞同：1
> 
> 时间：2013-04-23T18:04:03.657
> 
> 标签：c#, jquery, asp.net-mvc

我很困惑为什么这不起作用。我有一个表单，我需要通过 jquery ajax 提交并让结果恢复原状。但是成功提交后输入字段不会被重置。

```
@model VendorCreateViewModel

<div id="ajaxVendorContainer">
    <div class="contentareabody">
        <div id="vendorIndexResult">
         @Html.Partial("Vendor/_VendorIndexPartial", Model.PersistedVendors)
        </div>
    </div>
    <br />
    <table style="width: 100%; border: 0;">
        <tr style="vertical-align: top;">
            <td>
                <div class="contentareabody">
                    @using (Html.BeginForm("Create", "Vendor", FormMethod.Post, new { id = "createVendorForm" }))
                    {
                        @Html.HiddenFor(x => x.VendorRequestId)
                        <table class="table table-striped table-bordered">
                            <tr>
                                <td class="rowheader">
                                    @Html.LabelFor(model => model.VendorName)
                                </td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on"><i class="icon-pencil"></i></span>
                                        @Html.EditorFor(model => model.VendorName)
                                    </div>
                                    @Html.ValidationMessageFor(model => model.VendorName)
                                </td>
                            </tr>
                            <tr>
                                <td class="rowheader">@Html.LabelFor(model => model.VendorNumber)</td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on"><i class="icon-pencil"></i></span>
                                        @Html.EditorFor(model => model.VendorNumber)
                                    </div>
                                    @Html.ValidationMessageFor(model => model.VendorNumber)
                                </td>
                            </tr>
                            <tr>
                                <td class="rowheader">@Html.LabelFor(model => model.VendorAddressOrDescription)</td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on"><i class="icon-pencil"></i></span>
                                        @Html.EditorFor(model => model.VendorAddressOrDescription)
                                    </div>
                                    @Html.ValidationMessageFor(model => model.VendorAddressOrDescription)
                                </td>
                            </tr>
                            <tr>
                                <td class="rowheader">@Html.LabelFor(model => model.VendorAmount)</td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on">$</span>
                                        @Html.EditorFor(model => model.VendorAmount)
                                    </div>
                                    @Html.ValidationMessageFor(model => model.VendorAmount)
                                </td>
                            </tr>
                            <tr>
                                <td class="rowheader">Account Number Helper</td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on"><i class="icon-hand-up"></i></span>
                                        <select id="AccountDropDown" style="width: 315px;">
                                            <option value="0"></option>
                                            <option value="1">My Department - Travel and Meetings - 18</option>
                                            <option value="2">My Department - Training Expense - 20</option>
                                            <option value="3">Different Department - Manual Entry</option>
                                        </select>
                                    </div>
                                    <img id="vendor-ajax-loader-account" src="/Content/Images/ajax.gif" style="display: none;" alt="ajax loader" />

                                </td>
                            </tr>
                            <tr>
                                <td class="rowheader">
                                    @Html.LabelFor(model => model.VendorAccountNumber)

                                </td>
                                <td>
                                    <div class="input-prepend">
                                        <span class="add-on"><i class="icon-pencil"></i></span>
                                        @Html.EditorFor(model => model.VendorAccountNumber)
                                    </div>
                                    @Html.ValidationMessageFor(model => model.VendorAccountNumber)

                                </td>
                            </tr>
                        </table>
                    }
                </div>
            </td>
            <td>
                <div class="rightoptions">
                    @Html.Partial("EstimatedExpenses/Summary", Model.VendorEstimatedExepensesViewModel)
                </div>
            </td>
        </tr>
    </table>

    <input class="btn btn-large btn-primary" onclick="submitForm()" value="Add Vendor" />
    &nbsp;
    <img id="vendor-ajax-loader-add" src="/Content/Images/ajax.gif" style="display: none;" alt="ajax loader" />
    <span id="vendor-working-add" style="display: none;">Adding Vendor...</span>

    <script>

        function submitForm() {
            $('form#createVendorForm').submit();
        }

        $('form#createVendorForm').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    beforeSend: function () {
                        $('#vendor-ajax-loader-add').show();
                        $('#vendor-working-add').show();
                    },
                    success: function (result) {
                        $('#ajaxVendorContainer').html(result);
                        $('#vendor-ajax-loader-add').hide();
                        $('#vendor-working-add').hide();
                    }
                });
            }
            return false;
        });

        $(function () {
            $('#AccountDropDown').change(function () {
                var rId = '@(Model.VendorRequestId)';
            var aId = $('#AccountDropDown').val();

            $.ajax({
                url: '/Account/GetAccountNumber',
                type: 'GET',
                dataType: 'json',
                data: { id: rId, accountId: aId },
                beforeSend: function () {
                    $('#vendor-ajax-loader-account').show();
                },
                success: function (result) {
                    $('#VendorAccountNumber').val(result);
                    $('#vendor-ajax-loader-account').hide();
                }
            });
        });

    });
    </script>
</div> 
```

知道这里发生了什么吗？您可以看到操作方法为输入字段返回空值，但浏览器仍显示旧的预表单提交值

![在此处输入图像描述](https://i.stack.imgur.com/8WzBJ.png) ![在此处输入图像描述](https://i.stack.imgur.com/SjjjZ.png) ![在此处输入图像描述](https://i.stack.imgur.com/0yBqk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T15:56:46.860

有 2 种方法重置它。您可以通过在提交后调用的成功函数中手动清除它们来重置所有字段。另一种方法是在数据库插入成功时在操作结果中返回一个空视图模型。例如：

```
public actionresult Create(VendorCreateViewModel viewModel)
{
    if (!ModelState.IsValid)
        return PartialView(viewModel);

    // Converts your view model to your domain model
    VendorModel domainModel = new VendorModel(viewModel);

    // Service call to create your vendor in the database
    vendorService.CreateVendor(domainModel);

    // This will reset your fields to empty
    return PartialView(new VendorCreateViewModel());
} 
```

我忘了在第二个例子中添加只有在您使用内置的 ASP.NET MVC-Ajax（即 Ajax.BeginForm()）时才有效。

# sql - 根据同一表中的第二列从单个列中查找对

> ID：16176141
> 
> 赞同：0
> 
> 时间：2013-04-23T18:04:04.933
> 
> 标签：sql, db2, recursive-query, self-join

我有以下情况

源表：

```
Col1 Col2 Time  
I1   CRR   T0  
I1   CRH   T1  
I1   CRH   T2  
I1   CRR   T3  
I1   CRH   T4  
I1   CRR   T5  
I1   CRH   T6  
I2   CRH   T7  
I2   CRR   T8 
```

这里的值对是 (CRH,CRR) - CRH 是开始事件，CRR 是结束事件。我需要在相应的开始事件之前摆脱所有结束事件（这取决于时间列），并且还需要捕获有效的开始事件和结束事件对。如果在结束事件之前有多个开始事件，则需要选择最早的来建立配对。这是想要的结果

```
Col1 Col2 Time Col3 Col4  
I1   CRH   T1  CRR   T3  
I1   CRH   T4  CRR   T5  
I1   CRH   T6   -    -  (since no corresponding end event - this is fine)  
I2   CRH   T7  CRR   T8 
```

我正在使用 DB2 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:28:32.573

如果您使用的是较新版本的 db2，那么您有`lag()`和`lead()`函数。

如果是这样，试试这个：

```
select col1, col2, time, nextcol2, nexttime
from (select t.*,
             lead(col2) over (partition by col1 order by time) as nextcol2
             lead(time) over (partition by col1 order by time) as nexttime
      from t
     ) t
where not(col2 = 'CRR' and nextcol2 = 'CRH') 
```

如果您没有该`lead()`功能，则可以对相关子查询执行类似操作。

该评论极大地阐明了您想要的内容。您正在寻找给定开始后的下一个结束。为此，我使用相关子查询来获取下一次。这是查询的结构：

```
select t.*, tend.col2, tend.time
from (select t.*,
             (select MIN(time) from t t2 where t.col1 = t2.col1 and t2.time > t.time and t2.col2 = 'CRR'
             ) endtime
      from t
      where col2 = 'CRH'
     ) t left outer join
     t tend
     on t.col1 = tend.col1 and t.time = tend.endtime 
```

# php - test.txt 到 COSM 或 MySQL 到 COSM 可能

> ID：16176147
> 
> 赞同：0
> 
> 时间：2013-04-23T18:04:19.560
> 
> 标签：php, mysql, arduino, cosm

大家晚上好，

我的一个朋友正在通过他的 Arduino GPRS 模块中的 API 命令使用 COSM。但是我的是使用 XBEE 的 Arduino 到 PC，通过文本文档存储在 MySQL 中并在 HTML 上查看。在这个过程中的任何地方，是否有可能将我最近的数据上传到 COSM？

只是想在我继续之前看看是否有人知道？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:26:30.360

您应该能够在将数据插入 MySQL 的同一点将数据发送到 Cosm。我假设这是在串口上监听的某种脚本，所以你应该可以将它添加到某个地方。

# c++ - 使用重载运算符减少 OpenMP

> ID：16176155
> 
> 赞同：7
> 
> 时间：2013-04-23T18:04:48.600
> 
> 标签：c++, parallel-processing, operator-overloading, openmp

我正在尝试使用 OpenMP 并行化以下函数中的循环

```
 void CEnergymulti::forcetwobody(vector<CMolecule*>  m_mols,CPnt force0,CPnt torque0)
{
 const int nmol=m_mols.size();
 vector<CMolecule*> twomols(2);
 CPnt forcetemp,torquetemp;
 twomols.clear();
 force0.zero();
 torque0.zero();
 forcetemp.zero();
 torquetemp.zero();
 #pragma omp parallel for reduction(+:force0,torque0) private(twomols)
 for(int j=1;j<nmol;j++)
       { twomols.push_back(m_mols[0]);
         twomols.push_back(m_mols[j]);
         CMolecule::polarize_mutual(twomols,false, 1000);
         twomols[0]->computeMol_Force_and_Torque(forcetemp,torquetemp);
         force0+=forcetemp;
         torque0+=torquetemp;
         forcetemp.zero();
         torquetemp.zero();
         twomols.clear();
        }
     REAL converter=COUL_K*IKbT;
     force0*=converter;
     torque0*=converter;
     return;
     } 
```

当我编译代码时，它会给出以下消息：

```
EnergyD_multi.cpp: In static member function ‘static void
CEnergymulti::forcetwobody(std::vector<CMolecule*,
std::allocator<CMolecule*> >, CPnt, CPnt)’: EnergyD_multi.cpp:226:
error: ‘torque0’ has invalid type for ‘reduction’
EnergyD_multi.cpp:226: error: ‘force0’ has invalid type for
‘reduction’ 
```

我知道变量“force0”和“torque0”既不是双精度类型也不是整数类型的数据，而是类型为“CPnt”的类型，该类被定义为表示空间中的三维向量。对于类“CPnt”，运算符“+”和“-”已由运算符重载定义。所以我的问题是：OpenMP 的减少是否真的不能处理这种重载的运算符？有没有其他方法可以在不减少“force0”和“torque0”的每个组件的情况下将该循环与 OpenMP 并行化？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T08:00:20.597

确实，OpenMP 缩减无法处理这种重载的运算符。但是，还有另一种选择。在 OpenMP 中重写缩减的一种方法是使用`nowait`和`atomic`参数。 [http://bisqwit.iki.fi/story/howto/openmp/#ReductionClause](http://bisqwit.iki.fi/story/howto/openmp/#ReductionClause) 。这和正常方式一样快。

如果您替换`atomic`为`critical`您可以使用更复杂的重载运算符。这不如使用快，`atomic`但根据我的经验，它仍然运作良好。

我这样做是为了可以使用一次对 4 或 8 个浮点数进行操作的运算符（使用 SEE 或 AVX）。 [通过 SSE/AVX 使用 OpenMP 减少](https://stackoverflow.com/questions/15430069/reduction-with-openmp-with-sse-avx)

编辑：我更改了您的代码以反映我认为会做您想做的事情。

```
void CEnergymulti::forcetwobody(vector<CMolecule*>  m_mols,CPnt force0,CPnt torque0)
{
    const int nmol=m_mols.size();
    force0.zero();
    torque0.zero();
    #pragma omp parallel
    {
        CPnt force0_private;
        CPnt torque0_private; 
        force0_private.clear();
        torque0_private.clear();
        #pragma omp for nowait
        for(int j=1;j<nmol;j++)
        { 
            CPnt forcetemp,torquetemp;
            forcetemp.zero();
            torquetemp.zero();
            vector<CMolecule*> twomols(2);
            twomols.clear();
            twomols.push_back(m_mols[0]);
            twomols.push_back(m_mols[j]);
            CMolecule::polarize_mutual(twomols,false, 1000);
            twomols[0]->computeMol_Force_and_Torque(forcetemp,torquetemp);
            force0_private+=forcetemp;
            torque0_private+=torquetemp;
        }
        #pragma omp critical 
        {
           force0 += force0_private;
           torque0 += torque0_private;
        }

    }
    REAL converter=COUL_K*IKbT;
    force0*=converter;
    torque0*=converter;
    return;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-11T00:21:19.527

现在，您还可以使用`declare reduction`指令 (OpenMP 4.0+)；例如

```
#pragma omp declare reduction(mysum:CPnt:omp_out += omp_in) initializer(omp_priv.zero())
#pragma omp parallel for reduction(mysum:force0,torque0) private(twomols)
for(int j=1;j<nmol;j++)
... 
```

# .net - WMI 和 windows 安装日期，返回什么日期？

> ID：16176159
> 
> 赞同：0
> 
> 时间：2013-04-23T18:05:00.600
> 
> 标签：.net, window, wmi

我正在使用 WMI 向 Windows 询问其安装日期。现在我的软件对它的反应很奇怪，我想知道 installdate 是如何定义的 使用下面的代码

```
searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_OperatingSystem");
            foreach (ManagementObject queryObj in searcher.Get())
            {
                WindowsInstallDate = queryObj["InstallDate"];
            } 
```

这会给我使用 DVD 安装 Windows 的日期吗？或者这将是 Windows 被激活的日期？

我没有使用真实用户许可证自行测试的许可证。但也许有人知道这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:03:35.080

你可以得到`DateTime`如下格式：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2",
                                      "SELECT * FROM Win32_OperatingSystem");

foreach (ManagementObject queryObj in searcher.Get())
{                   
    DateTime dt = ManagementDateTimeConverter.ToDateTime(queryObj["InstallDate"].ToString());
    Console.WriteLine(dt);
} 
```

# php - 用户在 PHP 中已经存在错误

> ID：16176160
> 
> 赞同：0
> 
> 时间：2013-04-23T18:05:01.090
> 
> 标签：php

我是 PHP 新手，使用 PDO 和 MySQL。我将使用以下代码过滤用户输入数据：

```
if(!filter_input(INPUT_POST,'$username')||!filter_input(INPUT_POST,'$password'))
        {
            echo "username or password already exists....";
        }

        else
        {
$sql = "INSERT INTO users (Username,Password) VALUES (:username,:password)";
$q=$dbh->prepare($sql);
$q->execute(array(':username'=>$username,':password'=>$password));
$count=$q->rowCount();
echo "inserted $count rows.\n"; 
```

但它显示一个错误，它只是显示消息：

```
username or password already exists 
```

如果用户名或密码不存在，它会显示相同的消息吗？如果`filter_input()`不应该在这里使用，那么我可以使用什么来代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:09:18.453

```
filter_input(INPUT_POST,'$username') 
```

是错误的，它需要数组键名 - 前面没有任何美元（如果你没有用美元命名 get 变量）：

```
filter_input(INPUT_POST,'username') 
```

应该是正确的。删除`$`密码过滤器的标志。

* * *

第一行将是：

```
if(!filter_input(INPUT_POST,'username')||!filter_input(INPUT_POST,'password')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:09:36.067

给定的名称`filter_input`不应该包含 a `$`，除非表单确实有`<input name="$username" />`。

# ruby - 当我的字符串为空时，如何阻止 Time.parse 返回当前日期？

> ID：16176161
> 
> 赞同：1
> 
> 时间：2013-04-23T18:05:02.367
> 
> 标签：ruby

我有几个地方可以`Time.parse(string).strftime("%m%d%Y")`用来获取不同字符串的日期。

有时这些字符串可以为空`''`。当我用它解析一个空字符串时，`Time.parse`它会给我当前日期。

我需要一种方法来阻止这种情况发生并返回`''`或什么都没有。我的问题有解决方案吗？

```
require 'Time'
s = ''
Time.parse(s).strftime("%m%d%Y")
=> "04232013" 
```

我正在使用 Ruby 1.8.7（2010-12-23 补丁级别 330）[i386-mingw32]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T18:06:37.053

单独处理就好。

```
def format_date s
  return if s.empty?
  Time.parse(s).strftime("%m%d%Y")
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T18:36:18.343

也许推荐的方法是

```
Time.parse(s).strftime("%m%d%Y") unless s.empty? 
```

当条件不满足时，计算结果为`nil`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:15:34.633

```
require "time"
s = '12/12/2013 05:23:11'
p s.empty? ? '' : Time.parse(s).strftime("%m%d%Y") #=> "12122013"
s = ''
p s.empty? ? '' : Time.parse(s).strftime("%m%d%Y") #=> "" 
```

# couchdb - couchdb - Map Reduce - 如何在 Reduce 函数中加入不同的文档和组结果

> ID：16176162
> 
> 赞同：1
> 
> 时间：2013-04-23T18:05:03.123
> 
> 标签：couchdb

我正在努力实现一个连接两个文档并将结果与​​reduce相加的map/reduce函数。

第一个文档类型是类别。每个类别都有一个 ID，在属性中我存储了一个详细类别、一个主要类别和一个部门（“Bereich”）。

```
{
   "_id": "a124",
   "_rev": "8-089da95f148b446bd3b33a3182de709f",
   "detCat": "Life_Ausgehen",
   "mainCat": "COL_LEBEN",
   "mainBereich": "COL",
   "type": "Cash",
   "dtCAT": true
} 
```

第二种文档类型是交易。属性显示每笔交易的所有详细信息，包括字段“newCat”，它是对类别 ID 的引用。

```
{
   "_id": "7568a6de86e5e7c6de0535d025069084",
   "_rev": "2-501cd4eaf5f4dc56e906ea9f7ac05865",
   "Value": 133.23,
   "Sender": "Comtech",
   "Booking Date": "11.02.2013",
   "Detail": "Oki Drucker",
   "newCat": "a124",
   "dtTRA": true
} 
```

现在，如果我想开发一个 map/reduce 以获取以下形式的结果：

例如：“主要类别名称”、“交易中所有值的总和”。

我发现我可以使用“_ID：”和 ?include_docs=true 引用另一个文档，但在这种情况下，我不能使用 reduce 函数。

我在这里查看了其他帖子，但找不到合适的示例。

如果有人知道如何解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:02:22.800

我了解，多个 Category 文档可能具有相同的`mainCat`值。称为视图排序的技术适用于在关系模型中使用单连接的某些情况。在您的情况下，这将无济于事：尽管您使用两个文档方案，但您确实具有三层结构：主类别 <- 类别 <- 事务。我认为您应该考虑稍微更改一下数据库设计。

`mainCat`通过在交易文档中也存储价值来复制数据会有所帮助。我建议对交易使用有意义的 ID 而不是生成的 ID。例如，您可以考虑`"COL_LEBEN-7568a6de86e5e"`（`mainCat`与一些随机值连接，其中`-`分隔符从不存在于 中`mainCat`）。然后，使用 map 函数中的简单解析器，`["COL_LEBEN", "7568a6de86e5e"]`为事务、`["COL_LEBEN"]`类别和 reduce 发出总和。

# apache-camel - 如何控制每个目标路由的骆驼线程（activemq 主题）？

> ID：16176163
> 
> 赞同：0
> 
> 时间：2013-04-23T18:05:08.623
> 
> 标签：apache-camel, activemq, apache-servicemix

我正在使用 servicemix 和 camel 发布到一些 activemq 主题：

```
from("vm:all").recipientList().simple(String.format("activemq:topic:%s.%s.%s.%s.%s.%s","${header.type}", ... 
```

但是每个主题都会创建一个新的生产者线程，知道如何控制它吗？

编辑1：

实际上我意识到我创建的主题太多了，你应该选择选择器吗：[http ://www.andrejkoelewijn.com/blog/2011/02/21/camel-activemq-topic-route-with-jms-selector/](http://www.andrejkoelewijn.com/blog/2011/02/21/camel-activemq-topic-route-with-jms-selector/)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:40:14.420

典型的场景是 Camel 使用 JMSTemplate 向 ActiveMQ 发送消息。这意味着它[每次都会创建一个新的生产者](http://activemq.apache.org/jmstemplate-gotchas.html)。实际上，它为每条消息创建一个新的连接、会话和生产者。除了性能方面，这通常没有问题。

这通常由 org.apache.activemq.pool.PooledConnectionFactory 处理，它为您缓存连接、会话和生产者。但是，根据您的配置，它最初可能会创建“一些”生产者，但它们将被重用。

检查您在 activemq-broker.xml 中的连接工厂设置，并确保您获取了 PooledConnectionFactory。

# javascript - ASP.Net 页面：Chrome 在 URL 中添加了 #b？

> ID：16176164
> 
> 赞同：1
> 
> 时间：2013-04-23T18:05:14.723
> 
> 标签：javascript, google-chrome, url, url-parameters

当我打开网址时

```
http://mycomputer/web/Page.aspx?OfflineMode=false&ID=2 
```

Chrome 将使它看起来像：

```
http://mycomputer/web/Page.aspx?OfflineMode=false&ID=2#b 
```

问题是我通过更改参数的 URL 执行 javascript 重新加载，这会干扰该过程。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:14:28.970

如果没有在线查看页面进行故障排除，我会说将 url 保存为字符串，然后修改字符串。然后尝试根据新字符串重新加载。

它总是刚刚`#b`添加吗？你有内页链接吗？

# wpf - WPF 富文本框 RTL

> ID：16176169
> 
> 赞同：1
> 
> 时间：2013-04-23T18:05:47.563
> 
> 标签：wpf, richtextbox, right-to-left

我在 RichTextBox 和 WPF 中遇到 RTL 支持问题。当我尝试使用 RTL 编写 RichTextBox 中的以下句子时 - “9 * 11”，数字在 astrik 之间翻转。
我的键盘处于希伯来语模式
如您所见，它是“11 * 9”而不是“9 * 11”，有什么想法吗？

![RTL 错误示例](https://i.stack.imgur.com/I8D17.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:25:54.530

除了 FlowDirection="RightToLeft" 之外，您是否更改了 RichTextBox 的属性中的任何内容？你可以试试英文键盘吗？

# zsh - 如何从 Zsh 中的 $PATH 中删除路径并将其添加到开头而不重复？

> ID：16176172
> 
> 赞同：3
> 
> 时间：2013-04-23T18:05:53.820
> 
> 标签：zsh

我有：

```
PATH=/bar:/foo 
```

我想：

```
PATH=/foo:/bar 
```

我不想要：

```
PATH=/foo:/bar:foo 
```

所以我在想，给定默认路径`PATH=/bar`，我可以修改`$path`（`$PATH`作为关联数组）：

```
function prepend_to_path() {
  unset $path[(r)$1]
  path=($1 $path)
}

prepend_to_path /foo 
```

但这抱怨：

```
prepend_to_path:unset:1: not enough arguments 
```

时间太长了，我什至不记得`(r)`是为了什么，但没有它（`unset $path[$1]`）我得到：

```
prepend_to_path:1: bad math expression: operand expected at `/home/nerd...' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T19:53:24.797

您可以将函数的主体替换为：

```
path=($1 ${(@)path:#$1}) 
```

相关答案：[https ://stackoverflow.com/a/3435429/1107999](https://stackoverflow.com/a/3435429/1107999)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T07:12:23.380

这也有效（并且当你在几个月后回到它时可以说更容易阅读）：

```
prepend_to_path () {
  path[1,0]=$1 
  typeset -U path
} 
```

`typeset -U`将自动对数组进行重复数据删除，只保留每个元素的第一次出现。

既然`export`相当于`typeset -gx`，你也可以`export -U path`一石两鸟。

**编辑：** `typeset -U`只需要应用于特定数组一次，因此可以在 shell 启动的某个地方执行此操作，并从上面的函数中删除该行。

# c# - 服务器上的内存不足异常，但最令人不安；除非我调试，否则不会调用事件

> ID：16176173
> 
> 赞同：0
> 
> 时间：2013-04-23T18:05:54.500
> 
> 标签：c#, sockets

我有这个非常奇怪的错误。基本上，只要我添加代码行 Connections.Add(handler); 我的程序出了问题。我也收到错误：

> System.OutOfMemoryException：引发了“System.OutOfMemoryException”类型的异常。在 System.Threading.ExecutionContext.CreateCopy() 在 System.Net.ContextAwareResult.CaptureOrComplete(ExecutionContext& cachedContext, Boolean returnContext)

发生的情况是，当我添加此代码时，仍然接受连接，但我的日志 Richtextbox 控件上没有记录任何内容。这很奇怪，我不知道发生了什么。但是，在我的接受事件中删除 Connections.Add(handler) 行可以解决所有问题。但是我需要以某种方式跟踪套接字，以便我可以实现 ping 以使它们保持活动状态

这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Collections.Concurrent;

namespace SpybotServer
{  
    public partial class Server : Form
    {  

        public void log(String text)
        {
            logs.InvokeEx(a => a.Text += (text +Environment.NewLine));
        }

        public Server()
        {
            InitializeComponent();            
        }

        private void Server_Load(object sender, EventArgs e)
        {            
            Thread serverThread = new Thread(delegate()
                {
                    Listener.StartListening(9001);
                });
            serverThread.Start();
            heartbeat.Start();
        }

        private void Server_FormClosed(object sender, FormClosedEventArgs e)
        {
            Listener.looping = false;
        }

        private void heartbeat_Tick(object sender, EventArgs e)
        {
            Listener.heartbeat();
        }

    }

    public class StateObject
    {
        public Socket workSocket = null;
        public const int BufferSize = 1024;
        public byte[] buffer = new byte[BufferSize];
        public StringBuilder sb = new StringBuilder();
    }

    public class Listener
    {       
        public static Boolean looping = true;
        private static List<Socket> Connections = new List<Socket>();

        public static void heartbeat()
        {
            Program.MainForm.log("Sending ping...");             
        }

        public static void StartListening(int port)
        {
            IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Any, 9001);
            Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            Program.MainForm.log("Listening on port " + port);

            try
            {
                listener.Bind(localEndPoint);
                listener.Listen(100);

                while (looping)
                {
                    listener.BeginAccept(
                        new AsyncCallback(AcceptCallback),
                        listener);
                }
            }
            catch (Exception e)
            {
                Program.MainForm.log(e.ToString());
            }
        }

        public static void AcceptCallback(IAsyncResult ar)
        {
            Socket listener = (Socket)ar.AsyncState;
            Socket handler = listener.EndAccept(ar);

            StateObject state = new StateObject();
            state.workSocket = handler;
            IPEndPoint ip = handler.RemoteEndPoint as IPEndPoint;                    

            Program.MainForm.log("Accepted connection from " + ip.Address);
            //Connections.Add(handler);

            handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                new AsyncCallback(ReadCallback), state);
        }

        public static void ReadCallback(IAsyncResult ar)
        {
            String content = String.Empty;
            StateObject state = (StateObject) ar.AsyncState;
            Socket handler = state.workSocket;

            try
            {
                int bytesRead = handler.EndReceive(ar);

                if (bytesRead > 0)
                {
                    state.sb.Append(Encoding.ASCII.GetString(
                        state.buffer, 0, bytesRead));

                    content = state.sb.ToString();                    

                    /*if (content.IndexOf("!@<EOF_END>@!") > -1)
                    {
                        Program.MainForm.log(content);
                    }
                    else
                    {
                        handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                            new AsyncCallback(ReadCallback), state);
                    }*/
                }
            }
            catch (Exception e)
            {
                Program.MainForm.log(e.ToString());
            }
        }

        private static void Send(Socket handler, String data)
        {
            byte[] byteData = Encoding.ASCII.GetBytes(data);

            handler.BeginSend(byteData, 0, byteData.Length, 0,
                new AsyncCallback(SendCallback), handler);
        }

        private static void SendCallback(IAsyncResult ar)
        {
            Socket handler = (Socket)ar.AsyncState;

            try
            {                
                int bytesSent = handler.EndSend(ar);
                if (bytesSent <= 0)
                {
                    Program.MainForm.log("Socket has been closed.");
                }

            }
            catch (Exception e)
            {
                Program.MainForm.log(e.ToString());
                handler.Shutdown(SocketShutdown.Both);
                handler.Close();
            }
        }

    }
} 
```

调用Ex：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;

namespace SpybotServer
{
    static class ISynchronizeInvokeExtensions
    {
        public static void InvokeEx<T>(this T @this, Action<T> action) where T : ISynchronizeInvoke
        {
            if (@this.InvokeRequired)
            {
                @this.Invoke(action, new object[] { @this });
            }
            else
            {
                action(@this);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:28:21.133

由于这个回调：

```
public static void AcceptCallback(IAsyncResult ar) 
```

在这个循环内：

```
while (looping)
{
    listener.BeginAccept(
        new AsyncCallback(AcceptCallback),
        listener);
} 
```

我有超过 90% 的把握，您会一遍又一遍地将相同的内容添加`Socket`到`Connections`列表中，并且只会以惊人的速度增加列表的大小。将添加更改为：

```
if (Connections.Contains(handler))
{
    Connections.Add(handler);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:44:58.623

迈克尔走在正确的轨道上，但没有找到正确的解决方案。

```
listener.BeginAccept(
                    new AsyncCallback(AcceptCallback),
                    listener); 
```

如果你这样称呼它， （不像`Accept`）不会阻塞并且会发生奇怪的事情。而是让您`BeginAccept`退出循环并再次调用它，`AcceptCallback`以便您在接受第一个连接*后*可以接受新连接。

# c# - 从解析的 html 中选择项目

> ID：16176175
> 
> 赞同：1
> 
> 时间：2013-04-23T18:06:06.743
> 
> 标签：c#, html, parsing, html-agility-pack

我想从 HTML 网页中选择一些项目并将它们放入列表中。每个项目都将是此类的一个实例：

```
public class shopItem
{
    private String itemName;
    private String itemImageLink;
    private Double itemPrice;

    public void shopItem(String itemName, String itemImageLink, Double itemPrice) 
    {
        this.itemName = itemName;
        this.itemImageLink = itemImageLink;
        this.itemPrice = itemPrice;
    }

    public String getItemName() 
    {
        return this.itemName;
    }

    public String getItemImageLink()
    {
        return this.itemImageLink;
    }

    public Double getItemPrice()
    {
        return this.itemPrice;
    }
} 
```

HTML是这样的：

```
<div class="list_categorie_product">

<!-- Products list -->
<ul id="product_list_grid" class="categorie_product clear">

    </li>
        <li class="ajax_block_product  alternate_item clearfix">
      <p>
      <a href="http://thefrogco.com/polos/12-polo-2.html" class="product_img_link" title="Gris-Burdeos">
       <img src="http://thefrogco.com/12-111-large/polo-2.jpg" alt="Gris-Burdeos"  width="174" height="261" />
      </a>
      </p>
      <h3>
         <a href="http://thefrogco.com/polos/12-polo-2.html" class="product_link" title="Gris-Burdeos">Gris-Burdeos</a>
        </h3>
      <p id="p1">
       <!--<span class="new_product">

       </span>-->

                 <span class="new_product">

                                                 <span class="price"><!--<strike>30,00 €&lt;/strike>--><br />24,00 €&lt;/span>

       </span>

                 </p>

    </li>
        <li class="ajax_block_product  item clearfix">
      <p>
      <a href="http://thefrogco.com/polos/14-polo-4.html" class="product_img_link" title="Blanco-Marino">
       <img src="http://thefrogco.com/14-114-large/polo-4.jpg" alt="Blanco-Marino"  width="174" height="261" />
      </a>
      </p>
      <h3>
         <a href="http://thefrogco.com/polos/14-polo-4.html" class="product_link" title="Blanco-Marino">Blanco-Marino</a>
        </h3>
      <p id="p2">
       <!--<span class="new_product">

       </span>-->

                 <span class="new_product">

                                                 <span class="price"><!--<strike>30,00 €&lt;/strike>--><br />24,00 €&lt;/span>

       </span>

                 </p>

    </li>
        <li class="ajax_block_product last_item alternate_item clearfix">
      <p>
      <a href="http://thefrogco.com/polos/15-marron-turquesa.html" class="product_img_link" title="Marr&oacute;n-Turquesa">
       <img src="http://thefrogco.com/15-126-large/marron-turquesa.jpg" alt="Marr&oacute;n-Turquesa"  width="174" height="261" />
      </a>
      </p>
      <h3>
         <a href="http://thefrogco.com/polos/15-marron-turquesa.html" class="product_link" title="Marr&oacute;n-Turquesa">Marr&oacute;n-Turquesa</a>
        </h3>
      <p id="p3">
       <!--<span class="new_product">

       </span>-->

                 <span class="new_product">

                                                 <span class="price"><!--<strike>30,00 €&lt;/strike>--><br />24,00 €&lt;/span>

       </span>

                 </p>

    </li>
    </ul> 
```

如您所见，我想存放每件马球衫。我使用 HTMLAgilityPack，但我不知道如何选择它们。这是我能得到的：

```
List<shopItem> itemsList = new List<shopItem>();

        HtmlDocument htmlDocument = new HtmlDocument();

        htmlDocument.LoadHtml("http://thefrogco.com/14-polos");

        foreach (HtmlNode selectNode in htmlDocument.DocumentNode.Elements("//div/div/li[@class='ajax_block_product last_item alternate_item clearfix']")) 
        {
            foreach(HtmlNde)
            {
            //I suppose i have to iterate all inside nodes...
            }
            shopItem detectedItem = new shopItem(); 
            itemsList.Add(selectNode.);
        } 
```

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:09:07.260

像这样的东西：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(myDocHtm);

// get all LI elements with a CLASS attribute that starts with 'ajax_block_product'
foreach (HtmlNode selectNode in doc.DocumentNode.SelectNodes("//li[starts-with(@class,'ajax_block_product')]")) 
{
    // from the current node, get recursively the first A element with a CLASS attribute set to 'product_link'
    HtmlNode name = selectNode.SelectSingleNode(".//a[@class='product_link']");

    // from the current node, get recursively the first IMG element with a non empty SRC attribute
    HtmlNode img = selectNode.SelectSingleNode(".//img[@src]");

    // from the current node, get recursively the first SPAN element with a CLASS attribute set to 'price'
    // and get the child text node from it
    HtmlNode price = selectNode.SelectSingleNode(".//span[@class='price']/text()");

    shopItem item = new shopItem(
        name.InnerText,
        img.GetAttributeValue("src", null),
        double.Parse(price.InnerText, NumberStyles.Any)
        );
    itemsList.Add(item);
} 
```

# java - 如何找出 Spring 默认 bean 注册

> ID：16176176
> 
> 赞同：0
> 
> 时间：2013-04-23T18:06:08.537
> 
> 标签：java, spring, model-view-controller, configuration

我们有以下 XML 元素。

```
 <mvc:annotation-driven />
 <context:component-scan />
 <context:annotation-config/> 
```

ETC，

有没有办法（从 eclipse 或任何其他方法）找出这些配置默认加载/注册的类？或者有关于这个的文档吗？（我知道我们可以通过 spring 参考。但它的传播范围可以用作参考）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:42:38.763

也许最懒惰的方法是将 org.springframework 记录器的 log4j 级别提高到 TRACE。（即相当于将其转换为 11 的 Log4j :) 它将报告将哪些 bean 加载到上下文中。

# php - 我的页面包含几个未在 Internet Explorer 上显示的网站图标 - .ico 文件未显示

> ID：16176177
> 
> 赞同：0
> 
> 时间：2013-04-23T18:06:11.387
> 
> 标签：php, html, internet-explorer, favicon, .ico

我有一个允许用户输入网址的网站。该代码将获取该站点的图标并保存它。然后网站图标会显示在网站的其他位置。

这一切都适用于所有版本的 Opera、FF、Safari 和 Chrome，但在任何版本的 IE 上，似乎只有一些出现。我用来显示图标的代码很简单：

```
<div class="pulledFavicon"><img src="img/favicons/amazoncouk.ico" alt="favicon" ></div> 
```

该图像肯定存在，因为您可以看到它显示在其他浏览器上，但即使您访问 IE9 中的确切 url，它也会像没有这样的文件一样。

如果您在 IE9（或 8 或 7）上访问以下两个 URL，然后在任何其他浏览器上访问，您会看到图像显示在除 IE 之外的所有内容中：

[http://homestartpage.com/beta/img/favicons/simplybecom.ico](http://homestartpage.com/beta/img/favicons/simplybecom.ico)

[http://homestartpage.com/beta/img/favicons/scissorlabcom.ico](http://homestartpage.com/beta/img/favicons/scissorlabcom.ico)

奇怪的是 Facebook 的作品！

[http://homestartpage.com/beta/img/favicons/facebookcom.ico](http://homestartpage.com/beta/img/favicons/facebookcom.ico)

我一辈子都看不出有什么区别！

仅供参考，问题可以在[http://homestartpage.com/beta/现场查看](http://homestartpage.com/beta/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:15:57.740

带有`.ico`扩展名的收藏图标是一种特殊的图像文件。它们不打算与 HTML 内联显示。但是，正如您所看到的，一些浏览器已经添加了对它的支持。您最好的选择是以更受支持的格式转换/创建图像，以便内联使用。请参阅[http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)了解哪些浏览器支持哪些图像。

以下是相同基本问题的一些链接：

[.ico 没有在 IE 中显示？有什么办法可以在 IE 中显示 ico 文件？](https://stackoverflow.com/questions/6503096/ico-not-dislayed-in-ie-is-there-any-way-i-can-show-ico-file-in-ie)

[在图像元素 <img> 中显示 .ico](https://stackoverflow.com/questions/13094257/display-an-ico-within-an-image-element-img)

[如果不作为“image/x-icon”提供，IE 不会在 HTML 中显示 .ico 图标](https://stackoverflow.com/questions/1439232/ie-doesnt-show-ico-icons-in-html-if-not-served-as-image-x-icon)

# c# - 在编译时将泛型类传递给函数

> ID：16176183
> 
> 赞同：0
> 
> 时间：2013-04-23T18:06:29.337
> 
> 标签：c#, generics

以下代码可以在 c# 中使用吗？

```
public class Foo
{
    public string Name { get; set; }
}

public class Related_Foo
{
    public string Name { get; set; }
}

class Program
{
    static void do_something<T>(T t)
    {
        string n = t.Name;
    }

    static void Main(string[] args)
    {
        Foo f = new Foo();

        do_something(f);
    }
} 
```

在 .Net 4 中，编译器抱怨：

“T”不包含“名称”的定义，并且找不到接受“T”类型的第一个参数的扩展方法“名称”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:07:54.757

您需要对泛型类型施加约束`T`- 否则编译器应该如何知道它？

做一个`Ifoo`然后

```
do_something<T>(T t) where T : IFoo  

interface IFoo
{
    string Name {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:10:07.793

不，此代码在 C# 中不起作用，因为没有任何东西可以限制类型`T`具有名为`Name`. C# 中的模板与 C++ 中的模板不同，编译器可以在编译时扩展它们并验证使用的某些成员是否确实存在。

要使其工作，您可以添加一个约束，该约束`T`必须是具有名为 name 的属性的类型。例如创建一个接口：

```
public interface IFoo
{
    string Name { get; }
} 
```

并让你的类实现这个接口。

然后将约束添加到您的方法中，如下所示：

```
static void do_something<T>(T t) where T : IFoo
{
    string n = t.Name;
} 
```

如果您的所有类都有一个具有属性的公共基类`Name`，例如 if`Related_Foo`是从`Foo`您派生的，则可以将其限制为类类型，语法相同：

```
static void do_something<T>(T t) where T : Foo
{
    string n = t.Name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:17:12.423

如果 do_something 应该总是采用 Foo 或任何从 Foo 派生的东西（而不是总是有一个名为 Name 的属性），你可以这样做：

```
 static void do_something<T>(T t) where T : Foo
 {
      string n = t.Name;
 } 
```

这将传入的 Type 限制为 Foo 类型或从它派生的任何类型。

# macros - Visual Studio T4 - 使用环境变量包含文件

> ID：16176185
> 
> 赞同：0
> 
> 时间：2013-04-23T18:06:33.867
> 
> 标签：macros, include, environment-variables, t4

我设置了一些引用其他共享 T4 的 T4 模板。一个 T4 像这样引用另一个：

<#@ 包含文件="%MTF%\DAL\Models\DALContextGenerator.tt"#>

这很好用，除了必须在操作系统级别将 MTF 定义为环境变量——我想在解决方案本身的某个地方定义它——或者如果我必须在解决方案中的每个项目中定义它。我已经尝试编辑 CSPROJ 文件并在 下添加一个条目，但 T4 引擎似乎没有选择它。我还尝试创建一个 C++ 属性表并将其作为宏添加到那里，但 T4 引擎（从 C# 项目内部）也看不到它。

提前感谢您的任何提示，

射线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:46:06.900

恐怕在当前版本的 Visual Studio 中没有办法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-15T11:01:44.557

我自己没有尝试过，但是在 Visual Studio 文档中，有一[节](https://docs.microsoft.com/en-us/visualstudio/modeling/t4-include-directive#msbuild)介绍了如何在 T4 中使用项目属性包含指令：

# ssrs-2008 - 根据 SSRS 中的用户访问权限启用向下钻取

> ID：16176188
> 
> 赞同：0
> 
> 时间：2013-04-23T18:06:38.730
> 
> 标签：ssrs-2008, reporting-services

我基本上是在尝试创建一个报告，其中我需要计算员工每年的平均出勤率，而在另一个报告中，我需要为每个月的员工创建一个 AVG（出勤率）。

## 所以

报告 1：（每年出席人数）

参数：

```
 (Year)     Attendance (=100%, >=95% and <100%,>=90% and <95%,>=80% and <90% ) 
```

## |EMPID | EMP_名称| 平均（出勤）|

报告 2（每月出席人数）

```
 (Year)     (EMPID)

         |EMPID  |  EMP_Name| AVG(Attendance)| 
```

我的问题是我是否可以只创建一个报告并将报告 2 作为向下钻取，并且只有具有特定权限的用户才能访问详细信息（报告 2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:24:37.003

您可以从 User!UserID 获取用户，并使用它来查找访问级别。然后，您可以根据用户访问权限使向下钻取可见或不可见。这应该可以控制对向下钻取的访问。

另见[这篇文章](https://stackoverflow.com/questions/875939/reporting-services-2008-using-useruserid-in-parameters)。

这有帮助吗？

# rubymine - RubyMine 应该自动填充实例变量

> ID：16176192
> 
> 赞同：1
> 
> 时间：2013-04-23T18:06:49.167
> 
> 标签：rubymine

我希望 ruby​​mine 能够自动完成实例方法。

```
def get_db
    return Mysql::new(DB_HOST, "x", "x", "x")
end

DB = get_db 
```

如果我在哪里输入

```
DB. 
```

我应该得到 Mysql 对象的所有方法。我是否需要做一些事情才能让 RubyMine 正确地做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-17T02:00:39.010

没有 IDE 可以推断`get_db`会返回什么（对于动态语言）

# bash - 为什么我的本地命令在同一脚本中的远程 ssh 命令之后无法运行？

> ID：16176196
> 
> 赞同：0
> 
> 时间：2013-04-23T18:07:02.863
> 
> 标签：bash, ssh

我已经完成了作业，但我想我可能会在这里混合苹果和橙子。我的脚本旨在运行一系列远程内联命令，退出，然后运行一些额外的 LOCAL 命令。它必须首先远程完成，因为这些服务用于故障转移代理。问题是远程 ssh 线路断开后，整个脚本就停止了。我不确定为什么断开连接会停止整个脚本。也许出口线是罪魁祸首？

```
 #!/bin/bash
    #
    ### Run remote svc restarts and then Local restarts
    #
    exec ssh -t REMOTEHOST 'stop svc1; restart svc2; start svc3; exit'
    (SCRIPT FAILS HERE)  
    ## Run local shell (This works independently, but not in the entire script)
    rst=`pgrep -n failoversvc`

    echo "Stopping 1st service at `date | awk '{print $2,$3,$4}'`" && service 1 stop >> SYNCLOG.txt
          sleep 2
    echo "Restarting 2nd service at `date | awk '{print $2,$3,$4}'`" && service 2 restart >> SYNCLOG.txt

    if rst="";then

    echo "Starting 3rd service at `date | awk '{print $2,$3,$4}'`" && service 3 start >> SYNCLOG.txt
      else 
        echo "3rd Service PID not found! Check for functionality"
    fi 
```

我看了看，但这[我](https://stackoverflow.com/questions/11543720/how-to-use-ssh-to-run-a-local-command-after-connection-and-quit-after-this-local)无法得到我正在寻找的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:09:37.727

`exec`是一个非常残酷的命令：它用您指定的命令完全*替换*了当前进程（在这种情况下，是运行脚本的 shell）。除非 `exec`失败，否则脚本中该行之后的任何内容都不会运行。这是设计使然，这就是`exec`目的。

如果您希望脚本在 之后继续`ssh`，只需删除`exec`.

# java - 忽略无效条目

> ID：16176198
> 
> 赞同：0
> 
> 时间：2013-04-23T18:07:04.850
> 
> 标签：java, switch-statement

我的头衔并不是最好的，但我不确定如何命名我正在尝试做的事情。无论哪种方式，我都有一个案例切换...

```
 switch (input) {
        case "A":
            Item item = new Item();
            System.out.print("Enter a barcode: ");
            barCode = scan.nextLine();
            item.setBarCode(barCode);

            if (store.addItem(barCode)) {
                System.out.println(store.stockedItems.get(barCode).getProductName()
                        + " has been added to the store's inventory");
            }

            else {
                item.setQuantity(1);
                System.out.print("Enter the item's name: ");
                productName = scan.nextLine();
                productName = productName.toLowerCase();
                item.setProductName(productName);
                store.stockedItems.put(barCode, item);

                System.out.println(store.stockedItems.get(barCode).getProductName()
                        + " has been added to the store's inventory");
            }
            break;
    } 
```

这只是一种情况。这样做是当用户选择 A 将对象添加到我的数据结构中时，它会确定提到的条形码是否已在使用中。

如果是，它只会增加我的数据结构中对象的数量。

如果条码未使用并检查其有效性后。它将提示用户输入对象的名称，然后继续将其添加到我的数据结构中。

现在的问题是在我输入条形码字符串并在其各自的对象类中调用 setter 函数之后：

```
public void setBarCode(String code) {
    if (!code.matches("[0-9]+") || code.length() != 12) {
        System.out.println("The barcode entered is not in valid format.  Entry ignored.");
    } else {
        barcode = code;
    }
} 
```

这个函数只是确保它是数字和 12 个字符长。如果不是，我想忽略该条目并从菜单重新开始。我遇到的问题是，即使条形码无效且未设置，程序也会继续询问项目名称。

如何跳过所有这些并再次打印菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:11:47.147

有两种策略可以解决这个问题：

1.  将条形码有效性检查移到`setBarCode`方法之外并首先进行该测试（或修改`setBarCode`以返回`boolean`指示条形码是否有效的）。
2.  修改`addItem`以返回比 a 更具信息性的内容`boolean`，以便您可以区分三种情况：坏条形码；成功；失败，因为它需要更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:13:14.183

setter`setBarCode()`应该 (a) 成功，或 (b) 指示失败（可能使用 an，`IllegalArgumentException`因为我们在 Java 中）而不是静默失败。如果您要使用`IllegalArgumentException`，则此代码会很好地工作：

```
boolean acceptable;
try {
    item.setBarCode(barCode);
    acceptable = true;
}
catch(IllegalArgumentException e) {
    acceptable = false;
}

if(acceptable) {
        if(store.addItem(barCode)){
            System.out.println(store.stockedItems.get(barCode).getProductName() + " has been added to the store's inventory");
        }
        else {
            item.setQuantity(1);
            System.out.print("Enter the item's name: ");
            productName = scan.nextLine();
            productName = productName.toLowerCase();
            item.setProductName(productName);
            store.stockedItems.put(barCode, item);

            System.out.println(store.stockedItems.get(barCode).getProductName() + " has been added to the store's inventory");
        }
}

break; 
```

但是，我建议您不要依赖 setter 的失败来确保正确性。从风格上讲，它“闻起来很有趣”。相反，我会将测试放在另一个（可能`static`）方法中，在调用 setter*之前进行*测试并做出相应的反应，然后`assert`在 setter 中放入一个。所以，更像这样：

```
// Somewhere up in your code -- Sorry, fixed up your regex
private static final Pattern BARCODE=Pattern.compile("^\\d{12}$");
public static boolean isValidBarcode(String candidate) {
    return BARCODE.matcher(candidate).matches();
}

// Now your "real" code
case "A":

    Item item = new Item();
    System.out.print("Enter a barcode: ");
    barCode = scan.nextLine();
    if(isValidBarCode(barCode)) {
        item.setBarCode(barCode);
        if(store.addItem(barCode)) {
            System.out.println(store.stockedItems.get(barCode).getProductName() + " has been added to the store's inventory");
        }
        else {
            item.setQuantity(1);
            System.out.print("Enter the item's name: ");
            productName = scan.nextLine();
            productName = productName.toLowerCase();
            item.setProductName(productName);
            store.stockedItems.put(barCode, item);

            System.out.println(store.stockedItems.get(barCode).getProductName() + " has been added to the store's inventory");
        }
    }
    else {
        System.out.println("That's not a valid bar code.");
    }
    break;

// And, finally, your setBarCode() method
public void setBarCode(String code) {
    assert isValidBarCode(code);
    barcode = code;
} 
```

# java - 将多个 JARS 捆绑为一个并从客户端应用程序中选择特定的一个

> ID：16176200
> 
> 赞同：0
> 
> 时间：2013-04-23T18:07:07.900
> 
> 标签：java, android, maven, jar, maven-assembly-plugin

我正在开发一个库 jar（更像是其他库的包装器），它依赖于多个其他库 jar。我知道我可以使用 eclipse 创建一个罐子/胖罐子并运送它。例如，我有三个库 jar：Alib.jar、Blib.jar 和 Clib.jar。假设 Alib.jar 依赖于 Blib.jar。我可以制作一个胖罐子，比如 fatlib.jar，其中包含三个。

```
(Alib.jar --> Blib.jar) + Clib.jar == packages into ==> fatlib.jar (common APIs)

fatlib.jar == used by ==> client app 
```

fatlib.jar 为客户端应用程序提供了一个通用的 API 接口。这些通用 API 使用 Alib.jar、Blib.jar 和 Clib.jar，并根据要求选择正确的类。比如说，当客户端应用程序不使用依赖于 Clib.jar 的 API 时，客户端应用程序应该可以灵活地在构建自身时删除 Clib.jar（很可能是 APK）。我想给客户端应用程序选项来选择它在构建时真正需要的依赖库 jar。

想知道这是否可能？我梦想着一些像 Fat Jar eclipse 插件这样的工具，它可以向您展示在构建 jar 时可以拾取或丢弃的所有 jar。可能不是。所以这是一个问题：是否可以在编译时从父 jar 中选择内部 jar？

# java - 是否有一个系统变量可以保存 Android 设备特定的低电量阈值？

> ID：16176203
> 
> 赞同：2
> 
> 时间：2013-04-23T18:07:12.747
> 
> 标签：java, android, android-intent, default, batterylevel

我正在检查电池是否已达到临界水平。

当电池在任一方向超过低电量阈值时，Android 会向您的应用发送一个意图。但这仅在您的应用程序运行时超过阈值时才有效（意图不是粘性的，因此它不会徘徊）。因此，如果用户打开应用程序时它很低，那么您就不走运（或至少是信息）。

还有一个粘性意图 ACTION_BATTERY_CHANGED，其中包含有关电池电量的信息和用于计算百分比的比例，这很棒。但是，我一直无法找到包含低电量阈值的系统变量（它显然因设备而异）。

进行搜索，我发现：[当 android 触发 ACTION_BATTERY_LOW](https://stackoverflow.com/questions/11970185/when-android-fires-action-battery-low/11970715#11970715)时，Android 系统代码的源列表，它使用系统变量 com.android.internal.R.integer.config_lowBatteryWarningLevel。但是，我自己无法访问这个变量（我猜它是受保护的）。

我想有一个合理的标准来比较我的电池百分比，所以我知道何时关闭电池密集型功能。就这些。

这是我的代码：

```
private BroadcastReceiver powerListener = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
    int batteryLevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
    int batteryScale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, 1);
        int batteryPercentLeft = (batteryLevel * 100) / batteryScale;

        if (batteryPercentLeft <= com.android.internal.R.integer.config_lowBatteryWarningLevel) {
            _thread.onBatteryStateReceived(DataModel.BatteryState.LOW);
        }
    }
}; 
```

我收到系统变量的编译错误。有替代方案吗？看起来这应该是一件简单的事情。我只想匹配系统行为，没什么特别的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-11T13:05:59.137

请注意，这*是*可能的，但使用反射，因此不应依赖：

```
 try {
        Class clazz = Class.forName("com.android.internal.R$integer");
        Field field = clazz.getDeclaredField("config_lowBatteryWarningLevel");
        field.setAccessible(true);
        int LowBatteryLevel = _context.getResources().getInteger(field.getInt(null));
        Log.d("LowBattery","warninglevel " + LowBatteryLevel);
    } catch (ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {
        e.printStackTrace();
    } 
```

来源：[https ://stackoverflow.com/a/49424298/608312](https://stackoverflow.com/a/49424298/608312)

# php - 安卓 PHP 连接

> ID：16176204
> 
> 赞同：1
> 
> 时间：2013-04-23T18:07:20.603
> 
> 标签：php, android, mysql, eclipse

我一直在尝试将两个变量（从 Android 中的 Spinner 和 EditText 检索）从我的 Android 应用程序发送到 php 页面。这些变量将在 php 中使用 $_REQUEST 检索，以便它们可以在 MySQL 查询中使用。但我仍然无法检测到我的代码的问题：

```
public class Taxi_searchActivity extends Activity {
String keyword =null;
String para =null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //StrictMode.enableDefaults();
    Spinner spinner = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.para_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

     Button btn_search=(Button) findViewById(R.id.btn_search);
     EditText txt_keyword = (EditText) findViewById(R.id.txt_keyword);
     keyword = txt_keyword.getText().toString();
     para=spinner.getSelectedItem().toString();

     // Search button click event
    btn_search.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching SearchActivity
            Intent i = new Intent(getApplicationContext(), SearchActivity.class);
            i.putExtra("keyval", keyword);
            i.putExtra("paraval",para);
            startActivity(i);

        }
    }); 
```

我正在从第一个活动taxisearchactivity 中检索变量，并在其启动期间（通过互联网）将它们发送到第二个活动。

这是通过 json 对象 (httppost) 发送数据的第二个活动。第一个活动的变量存储在数组列表中，如下所示：

```
public class SearchActivity extends Activity {
    /** Called when the activity is first created. */
    String keywrd=null;
    String parameter=null;
    String result=null;
    InputStream isr=null;
    TextView resultView;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.enableDefaults();
        TextView resultView=(TextView)findViewById(R.id.res);

        Intent i = getIntent();
        keywrd = i.getStringExtra("keyval");
        parameter=i.getStringExtra("paraval");

        nameValuePairs.add(new BasicNameValuePair("keywrd", keywrd));
        nameValuePairs.add(new BasicNameValuePair("parameter", parameter));
        getData();
    }

        public void getData()
        {
            String result="";

            try
            {
                HttpClient httpclient=new DefaultHttpClient();
                HttpPost httppost= new HttpPost("http://192.168.1.45/abc/ser.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response=httpclient.execute(httppost);
                HttpEntity entity=response.getEntity();
                isr=entity.getContent();
            }
            catch(Exception e)
            {
                Log.e("log_tag","Error in http connection "+e.toString());
                resultView.setText("Couldn't connect to database");

            }
            try
            {
                BufferedReader reader = new BufferedReader(new InputStreamReader(isr,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null)
                {
                        sb.append(line + "\n");
                }
                isr.close();
                result=sb.toString();
            }
            catch(Exception e)
            {
                Log.e("log_tag","Error in converting result"+e.toString());
                resultView.setText("Couldn't convert");

            }
            try
            {
                String s="";
                JSONArray jArray=new JSONArray(result);

                for(int i=0;i<jArray.length();i++)
                {
                    JSONObject json=jArray.getJSONObject(i);
                    s=s+
                            "Taxi id: "+json.getString("taxi_id")+"\n"+
                            "Taxi No: "+json.getString("taxi_no")+"\n\n";

                }
                resultView.setText(s);
            }
            catch(Exception e)
            {
                Log.e("log_tag","Error parsing data"+e.toString());
                resultView.setText("Couldn't parse");
            } 
```

这是我的 php 代码：

```
<?php
require "conn.php";

    $ser=$_REQUEST['keywrd']; //VALUE FROM ANDROID EDITTEXT
    $ddl=$_REQUEST['parameter'];// VALUE FROM ANDROID SPINNER
    $query="";

    if($ddl=="Taxi_No")
    {
        $query="select taxi_id,taxi_no from taxi_info where taxi_no like '%$ser%'";
    }
    if($ddl=="Driver_Name")
    {
    $query="select taxi_id,taxi_no from taxi_info where driver_name like '%$ser%'";
    }
    if($ddl=="Source")
    {
    $query="select taxi_id,taxi_no from taxi_info where `from` like '%$ser%'";
    }
    if($ddl=="Destination")
    {
    $query="select taxi_id,taxi_no from taxi_info where 'to' like '%$ser%'";
    }
    $result=mysql_query($query) or die(mysql_error());

    while($row=mysql_fetch_assoc($result))
    {
            $output[]=$row;
    }
    print(json_encode($output));

?> 
```

应用程序在单击搜索按钮（第一个活动）时停止工作。这是我的日志：

```
04-23 23:16:21.024: E/log_tag(335): Error parsing datajava.lang.NullPointerException
04-23 23:16:21.043: E/AndroidRuntime(335): FATAL EXCEPTION: main
04-23 23:16:21.043: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to start activity ComponentInfo{search.taxi.info/search.taxi.info.SearchActivity}: java.lang.NullPointerException
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-23 23:16:21.043: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 23:16:21.043: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
04-23 23:16:21.043: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-23 23:16:21.043: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-23 23:16:21.043: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
04-23 23:16:21.043: E/AndroidRuntime(335): Caused by: java.lang.NullPointerException
04-23 23:16:21.043: E/AndroidRuntime(335):  at search.taxi.info.SearchActivity.getData(SearchActivity.java:110)
04-23 23:16:21.043: E/AndroidRuntime(335):  at search.taxi.info.SearchActivity.onCreate(SearchActivity.java:52)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-23 23:16:21.043: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-23 23:16:21.043: E/AndroidRuntime(335):  ... 11 more 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:12:48.653

您正在 UI 线程上执行网络操作，而 android 3.0+ 不允许这样做。会扔`NetworkOnMainThreadException`，因为你`response`是`null`

即`result`你得到的响应是空的，当你试图对你执行操作`null`时`NullPointerException`。

**解决方案：** 使用 AsyncTask 或单独的线程执行网络操作

# sql-server-2008 - 从数据库生成模型时，如果实体框架模型在模型中包含索引？

> ID：16176206
> 
> 赞同：0
> 
> 时间：2013-04-23T18:07:38.040
> 
> 标签：sql-server-2008, entity-framework-4, entity-framework-5

当使用实体框架从数据库生成模型（edmx）时，所有的键和约束都将包含在模型中。

那么想知道索引是否也包含在模型中？例如，如果我更改数据库上的唯一索引（不是主键），它会影响 edmx 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:14:00.693

不，它没有。索引是纯粹的数据库辅助构造。EF 不关心它。它也不关心（还）索引的唯一性（PK 索引除外），因为 EF 还不支持唯一键约束。

# facebook - Rails：无法从 Facebook 对您进行身份验证，因为“凭据无效”

> ID：16176208
> 
> 赞同：13
> 
> 时间：2013-04-23T18:07:41.520
> 
> 标签：facebook, ruby-on-rails-3.2, omniauth

[我使用https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)集成了omniauth-facebook 。但我收到以下错误：

```
Could not authenticate you from Facebook because "Invalid credentials". 
```

在日志中，得到这个：

```
Authentication failure! invalid_credentials: OAuth2::Error, : {"error":{"message":"This authorization code has been used.","type":"OAuthException","code":100}} 
```

我已经安装了设计。当我单击 facebook 登录链接时，它会返回设计符号“www.mealnut.com/user/sign_in# *=* ”并给出上述错误。[我在https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)上检查了“无效凭据”的解决方案，如前所述，我的应用程序的标题设置为 App Type = Web。不明白为什么它不起作用。

此外，我的应用正在等待 facebook 的审核。但我认为这与此错误无关。以下是我为omniauth-facebook 所做的事情：

Gemfile 包含：

```
gem "omniauth", "~> 1.1.4"
gem 'omniauth-facebook', '1.4.1' 
```

在用户模型中，添加：

```
devise :omniauthable, :omniauth_providers => [:facebook]
attr_accessible :provider, :uid

  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
    user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                      )
  end
user
end 
```

设计.rb

```
require "omniauth-facebook"
config.omniauth :facebook, "APP_ID", "APP_SECRET", :scope => "offline_access, email" 
```

omn​​iauth.rb：

```
OmniAuth.config.logger = Rails.logger
Rails.application.config.middleware.use OmniAuth::Builder do
 provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'], {:provider_ignores_state => true}
end 
```

路线.rb：

devise_for :user, :controllers => { :omniauth_callbacks => "omniauth_callbacks" }

Omniauth 控制器：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-04-07T10:15:48.447

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T20:02:56.023

得到它的工作！

我的 routes.rb 和 user.rb 是错误的。并且也改变了omniauth.rb！以下是之前和之后的文件：

我的 routes.rb 是：

```
devise_for :user, controllers: { registration: "registration" }
devise_for :user, controllers: { omniauth_callbacks: "omniauth_callbacks" } 
```

所以它调用了两次设计。我将其更改为：

```
devise_for :user, controller: { registration: "registration", omniauth_callbacks: "omniauth_callbacks" } 
```

从这里改变了我的omniauth.rb：

```
OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'], provider_ignores_state: true
end 
```

对此：

```
OmniAuth.config.logger = Rails.logger 
```

另外，我在模型`def self.find_for_facebook_oauth(auth, signed_in_resource=nil)`之外定义了方法`user.rb`（主要错误）。

所以现在让它完美运行:-)

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-26T10:31:50.460

也能正常工作:) 我们不需要在omniauth.rb 中添加此代码

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET']
end 
```

如果我们已经在 devise.rb 中声明了它

```
require "omniauth-facebook"
config.omniauth :facebook, "APP_ID", "APP_SECRET" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T10:09:12.213

将 gem 升级到 4.0.0 并添加`require "omniauth-facebook"`到`devise.rb`为我修复了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-03T18:00:13.017

我遇到了这个问题，没有任何建议可以帮助我。问题出在redirect_uri 中。设计omniauth gems 在没有 http**的**情况下生成它。

最后通过两个步骤解决了这个问题：

*   为导轨添加 force_ssl。
*   不要忘记添加 proxy_set_header X-Forwarded-Proto https；对于 nginx 配置，如果您正在使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-15T16:22:24.937

它帮助我解决了类似的问题：

> 注意：v2.0.1 存在回调 url 错误问题。您需要在 config.xml 中添加回调 url。

```
config.omniauth :facebook, "APP_ID", "APP_SECRET",
                callback_url: "CALLBACK_URL" 
```

[https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

# java - 单击时滚动浏览数据库 - java Derby

> ID：16176209
> 
> 赞同：0
> 
> 时间：2013-04-23T18:07:44.907
> 
> 标签：java, database, derby

我正在尝试创建一个 Java Derby 数据库，该数据库必须在单击按钮时显示下一条记录。我正在关注的教程是：
homeandlearn.co.uk/java/database_scrolling_buttons.html
在按钮的方法中，我有以下代码：

```
 String host = "jdbc:derby://localhost:1527/Employees";
    String uName = "bjorn";
    String uPass= "";
    con = DriverManager.getConnection( host, uName, uPass );
    PreparedStatement pstmt = con.prepareStatement("SELECT * FROM  App.Workers",ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

    ResultSet rs = pstmt.executeQuery();
    rs.next();
if(rs.next()){

  int id_col = rs.getInt("ID");
    String id = Integer.toString(id_col);
    String first_name = rs.getString("First_Name");
    String last_name = rs.getString("Last_Name");
    String job = rs.getString("Job_Title");

    textID.setText(id);
    textFirstName.setText(first_name);
    textLastName.setText(last_name);
    textJobTitle.setText(job);  

} 
```

当我运行应用程序并单击一次按钮时，它会显示下一条记录。但是，如果我再次单击，应用程序将崩溃。多次单击该按钮时，我想滚动浏览整个数据库。我是否必须在此方法中再次声明 Connection`con`和 ResultSet `rs`？当我不这样做时，代码变为：

```
if(rs.next()){

  int id_col = rs.getInt("ID");
    String id = Integer.toString(id_col);
    String first_name = rs.getString("First_Name");
    String last_name = rs.getString("Last_Name");
    String job = rs.getString("Job_Title");

    textID.setText(id);
    textFirstName.setText(first_name);
    textLastName.setText(last_name);
    textJobTitle.setText(job);  

} 
```

现在我收到错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Employees.Workers.btnNextActionPerformed(Workers.java:255)
    at Employees.Workers.access$200(Workers.java:19)
    at Employees.Workers$3.actionPerformed(Workers.java:145)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

第 255 行指向`if(rs.next()){`并显示错误，因为`rs`指向一个空对象。如何让`rs`指向数据库中的上一条记录，以便 rs.next() 指向下一条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:38:27.137

你知道什么时候在这里声明和初始化 rs 变量：

```
String host = "jdbc:derby://localhost:1527/Employees";
String uName = "bjorn";
String uPass= "";
con = DriverManager.getConnection( host, uName, uPass );
PreparedStatement pstmt = con.prepareStatement("SELECT * FROM  App.Workers",ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

ResultSet rs = pstmt.executeQuery();  // ****** here 
rs.next(); 
```

您的 rs 变量是一个*局部*变量，因此您只初始化一个局部变量，而不是一个类字段。这个局部变量很可能会隐藏类字段，这就是您遇到问题的原因。

如果是这样，解决方案不是重新声明 rs 变量，而是初始化 rs 类字段，而不是局部变量：

```
// ResultSet rs = pstmt.executeQuery();  // ****** here 
rs = pstmt.executeQuery();  // ****** Note the difference 
```

# android - 如何在 Android 的同一行中显示 2 个文本视图

> ID：16176210
> 
> 赞同：8
> 
> 时间：2013-04-23T18:07:46.180
> 
> 标签：android, android-layout, android-intent, android-widget

我有我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
     android:id="@+id/titlename"  
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:text="@string/HostName"
 android:layout_weight="0"

/>
<TextView
     android:id="@+id/name"  
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
 android:layout_weight="0"
/>
</LinearLayout> 
```

当我执行上述操作时，我的输出如下：

![在此处输入图像描述](https://i.stack.imgur.com/uTWfP.png)

但我的要求是让我的输出如下：

```
|   text1:    text2    | 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-23T18:09:57.847

使用以下代码

![在此处输入图像描述](https://i.stack.imgur.com/XplZz.jpg)

**更新**：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="horizontal"
   android:weightSum="1" >
<TextView
    android:id="@+id/titlename"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:gravity="center"
    android:text="hi" />
<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:gravity="center"
    android:text="2hi2" />
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T18:21:49.897

将 android:layout_width 设为 0dp。然后为每个文本视图设置 0.5 个权重。每个文本视图将填充父布局的一半宽度。就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="match_parent"
>
<TextView
     android:id="@+id/titlename"  
android:layout_width="0dp"
android:layout_height="wrap_content" 
android:text="@string/HostName"
 android:layout_weight="0.5"

/>
<TextView
     android:id="@+id/name"  
android:layout_width="0dp"
android:layout_height="wrap_content" 
 android:layout_weight="0.5"
/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:10:51.153

我会取出`weight`属性。这是我能看到的唯一一件事，那就是搞砸了。另请注意，`fill_parent`已弃用，您应该`match_parent`改用

或者，如果您`weight`出于某种原因需要它们，那么如果您希望它们各自占据屏幕的一半，请将它们更改为 1。

另外，如果使用`weight`那么你应该设置`android:layout_width="0dp"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:11:39.977

为您的 LinearLayout设置`android:orientation="horizontal"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T18:13:07.680

如下所示更新您的布局，除非您在父 LinearLayout 上设置 weightSum，否则您不希望包含 weight=0 属性。加上 weights 和 weightSum 并不真正适合您的要求。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView
         android:id="@+id/titlename"  
         android:layout_width="wrap_content"
         android:layout_height="wrap_content" 
         android:text="@string/HostName"

        />
    <TextView
         android:id="@+id/name"  
         android:layout_width="wrap_content"
         android:layout_height="wrap_content" 
        />
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T18:14:31.143

你可以尝试使用RelativeLayout

有了它，您可以`alignParentTop="true"`在 titlename 元素处设置`alignTo="@id/titlename"`并`toRightOf="@id/titlename"`在 name 元素处设置名称

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T18:26:34.957

实际上，您的原始代码在我的 ADT 中完美运行。您是否更改了更新第二个文本视图的 Java 代码中的文本大小或行填充？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-29T14:46:41.783

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
     android:id="@+id/titlename"  
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:text="@string/HostName"
/>
<TextView
     android:id="@+id/name"  
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
/>
</LinearLayout> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-15T01:49:52.810

创建一个`LinearLayout`封闭的 2 `TextViews`。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity">

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnLogin"
        android:layout_below="@id/etPassword"
        android:layout_marginTop="20dp"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:text="Login"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/btnLogin"
        android:layout_marginTop="10dp"
        android:gravity="center">

        <TextView
            android:id="@+id/tvIAlwaysHaveAccount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/btnLogin"
            android:text="I always have an account?" />

        <TextView
            android:id="@+id/tvForgotPassword"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/tvIAlwaysHaveAccount"
            android:layout_marginLeft="15dp"
            android:text="Forgot password?" />

    </LinearLayout>

</RelativeLayout> 
```

和你的节目一样：”

[![在此处输入图像描述](https://i.stack.imgur.com/SLLbH.png)](https://i.stack.imgur.com/SLLbH.png)

# xlwt - 始终显示 4 个小数位

> ID：16176211
> 
> 赞同：2
> 
> 时间：2013-04-23T18:07:49.473
> 
> 标签：xlwt, decimal

是否可以使用 xlwt 强制单元格始终显示 4 位小数？不管小数点后实际存在的数字是多少。我已经进行了一些搜索，我可以找到一个始终减少到小数点后 2 位的字符串，但我需要工作表上的某些单元格来显示 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T07:06:55.270

使用 xlwt 样式。这是一个简单的例子：

```
import xlwt

book = xlwt.Workbook()
sheet = book.add_sheet("test")

decimal_style = xlwt.XFStyle()
decimal_style.num_format_str = '0.0000'

sheet.write(0, 0, 1.23456789, decimal_style)
sheet.write(0, 1, 1.01, decimal_style)

book.save('test.xls') 
```

或者您可以`xlwt.easyxf`用于定义样式。希望有帮助。

# ios - iOS：在应用程序启动时播放视频

> ID：16176219
> 
> 赞同：1
> 
> 时间：2013-04-23T18:08:18.900
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我是 Xcode 的新手，所以我一直在尝试遵循教程，但没有遇到任何解释我想要实现的目标的东西。我只想在您打开应用程序时自动播放视频。我在播放音频时有点工作，但我看不到任何视频。我错过了什么吗？我在输出窗口中收到此警告：

> 警告：尝试在 ViewController: 0x9d10540 上显示 MPMoviePlayerViewController: 0x831d7a0，其视图不在窗口层次结构中！

在我的`ViewController.h`：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface ViewController : UIViewController

@end 
```

`ViewController.m`：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURL *url =[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Placeholder" ofType:@"mp4"]];
    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    [self presentMoviePlayerViewControllerAnimated:playercontroller];
    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [playercontroller.moviePlayer play];
    playercontroller = nil;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:12:30.163

代替

```
[playercontroller.moviePlayer play]; 
```

做

```
[playercontroller play]; 
```

**旁注：** 还要检查您的命名约定。在 Objective-C 中，变量名称“应该”在变量中的每个新单词上都有大写字母。例如，而不是`playercontroller`使用`playerController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T10:40:23.347

我知道你的状态。

这是来自 Xcode 的警告。

因此，您只需更改代码。

像这样，

```
[playercontroller performSelector:@selector(player)]; 
```

# java - 删除自动生成的 Javadoc 注释 eclipse

> ID：16176220
> 
> 赞同：4
> 
> 时间：2013-04-23T18:08:30.963
> 
> 标签：java, eclipse, javadoc

有什么方法可以删除 Eclipse 为每个新类生成的烦人的“@Javadoc”注释？我试图在首选项中删除它，但我不明白

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T18:11:57.307

查看 Eclipse 的设置。 `Window->Preferences`而不是去`Java->Code Style -> Code Templates`更改评论`Files`。您还可以更改 Method 等的每种样式。

问候

# c# - 您可以在c#中动态搜索字符串中的序列吗？

> ID：16176224
> 
> 赞同：3
> 
> 时间：2013-04-23T18:08:41.200
> 
> 标签：c#, algorithm, compression

第一次在这里提问；

我正在寻找一种能够使用搜索算法或内置方法来动态搜索字符串或其他变量中的重复序列的方法。

我说动态的原因是因为我希望它能够搜索字符串并自行定位重复序列。我将无法提供要查找的序列的构造函数。

我不确定这是否可能，但如果是，所有帮助将不胜感激！

这是我正在寻找的基本视觉表示（请注意，这不是代码，只是一个字符串的例子）

* * *

**这将是一个很长的字符串**，整个字符串都有***序列***。这可能有并排匹配的字符，也可能没有，但无论如何，**这将是一个长字符串**。如果**这将是一个长字符串**，我需要它自己在其中找到这些***序列***！

* * *

正如您在上面的示例中所看到的，整个单个字符串中有 2 组匹配序列。如果有任何方法可以以编程方式识别这些，并且能够非常快速地搜索这些不同的模式，这将对我有很大帮助！

匹配项很可能也存储在列表/数组中以供以后使用。

感谢您提供的任何帮助！

* * *

**编辑：** 当这个问题被问到时，区分大小写不会成为问题。

当我提到有 2 个匹配项时，我的意思是 2 个特定的序列有重复。其中之一，有2个重复。

@HenkHolterman您说得对，这将是一种压缩算法，但是，我不确定从哪里开始寻找要匹配的序列。

我一直在对类似的事情进行多次搜索，但没有找到我正在寻找的答案。这就是为什么我的问题按原样在这里提出的原因。

谢谢你到目前为止我得到的所有回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:15:29.663

这是基本的蛮力想法

*   首先，您会找到所有重复的大小序列`1`（您可以将最小大小更改为您想要的任何内容）。

要做到这一点，你基本上走下线，并使用正则表达式来查找所有的`T`s，然后是所有的`h`s，等等......

*   然后你找到所有大小为 2 的序列，所以你会找到所有的`Th`s 和`hi`s 和`is`s

*   你重复这个直到你找到所有的序列。

运行时将是

*   使用正则表达式查找特定序列的时间复杂度： **O(n)**
*   乘以特定大小的不同序列的数量： **O(n)**
*   乘以大小数： **O(n)**

总时间复杂度为**O(n ³ )**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T04:58:33.870

使用[后缀树](https://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english)在 O(n) 时间内完成此操作。我正在添加这个无关的句子，以防止将其转换为评论。

# ios - iOS 文档图像 API

> ID：16176230
> 
> 赞同：3
> 
> 时间：2013-04-23T18:09:10.803
> 
> 标签：ios, document, imaging

扫描、裁剪、边缘检测和 OCR 文档的 iOS 应用程序数量激增。我还知道有许多具有这些桌面应用程序功能的编程 API，例如 Nuance OmniPage、AtlasSoft 和 GDPiture。

iOS 开发人员在尝试构建此类应用程序时是否应考虑使用流行的 API 或云服务？或者这是问这个问题的错误方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T13:18:03.957

我在从 OpenCV 中获取这些功能方面取得了一些进展。这可能是在 iOS 上实现这一目标的最简单途径。

如果有人得到提示或技巧，他们将不胜感激。

# python - super() 用于多重继承不一致

> ID：16176232
> 
> 赞同：0
> 
> 时间：2013-04-23T18:09:26.517
> 
> 标签：python, inheritance

我有两个看起来相同的多重继承示例，但我得到的结果顺序不同。

[乔尔](https://stackoverflow.com/users/736151/joel)的[第一个例子](https://stackoverflow.com/a/7416112)：

```
class A(object):
    def t(self):
        print 'from A'

class B(object):
    def t(self):
        print 'from B'

class C(A): pass

class D(C, B): pass 
```

因此，我们有：

```
>>> d = D()
>>> d.t() # Will print "from A"

>>> D.__mro__
(<class '__main__.D'>, <class '__main__.C'>, <class '__main__.A'>, 
<class '__main__.B'>, <type 'object'>) 
```

然后在[Callisto的](https://stackoverflow.com/users/395354/callisto)[第二个示例](https://stackoverflow.com/q/3277367)中：

```
class First(object):
    def __init__(self):
        print "first"

class Second(First):
    def __init__(self):
        print "second"

class Third(First):
    def __init__(self):
        print "third"

class Fourth(Second, Third):
    def __init__(self):
        super(Fourth, self).__init__()
        print "that's it" 
```

因此，我们有：

```
>>> f = Fourth()
second
that's it

>>> Fourth.__mro__
(<class '__main__.Fourth'>, <class '__main__.Second'>, <class '__main__.Third'>
<class '__main__.First'>, <type 'object'>) 
```

如您所见， 的流程顺序`MRO`不同，在第二个示例中它没有到达`First`之前，`Third`但在第一个示例中它在到达之前`A`经过`B`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:17:37.500

没有不一致。MRO 基于 C3 算法，该算法由[Chaturvedi](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html#computing-the-mro)解释，更正式地由[Simionato 解释](http://www.python.org/download/releases/2.3/mro/)。

* * *

关于：

> 在第二个示例中，它在第三个之前没有到达第一，但在第一个示例中，它在到达 B 之前经过 A。

由于`Third`定义为

```
class Third(First): 
```

`Third`必须出现`First`在 MRO 之前。

Chaturvedi 用规则解释了这一点，

> 如果 A 是 B 的超类，则 B 优先于 A。或者，在所有`__mro__`s（包含两者）中，B 应始终出现在 A 之前。

而在第一个示例中， and 的等价`First`物`Third`是`A`and `C`。由于`C`定义为

```
class C(A): 
```

`C`在 MRO之前`A`。

为什么`A`在前面`B`更复杂。归根结底是因为`C`之前`B`在`D`. 在 Simionato 的符号中，

```
L[D] = L[D(C,B)] = D + merge(L[C], L[B], CB)
     = D + merge(CAO, BO, CB)
     = D + C + merge(AO, BO, B)
     = D + C + A + merge(O, BO, B)
     = D + C + A + B + merge(O, O)
     = D + C + A + B + O 
```

在第二个例子中，

```
L[4] = L[4(2, 3)] = 4 + merge(L[2], L[3], 23)
     = 4 + merge(21O, 31O, 23)
     = 4 + 2 + merge(1O, 31O, 3)
     = 4 + 2 + 3 + merge(1O, 1O)    # Third must come before First
     = 4 + 2 + 3 + 1 + merge(O, O)
     = 4 + 2 + 3 + 1 + O 
```

[操作规则](http://www.python.org/download/releases/2.3/mro/)是：

> 取第一个列表的头部，即L[B1][0]；**如果此头部不在任何其他列表的尾部**，则将其添加到 C 的线性化中，并将其从合并中的列表中删除，否则查看下一个列表的头部并将其取出，如果它是好头。然后重复这个操作，直到所有的类都被移除或者不可能找到好的磁头。在这种情况下，无法构造合并，Python 2.3 将拒绝创建 C 类并引发异常。

（我的重点解释了为什么`Third`必须在之前`First`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:24:56.860

不一样，在第一个示例中，所有“爸爸”对象都继承对象，因为 D 加载加载 A 的 C，并且按照 MRO 的顺序，B（由 D 调用）

其次，所有“爸爸”对象都继承了 First 类。此时，Python 会在最后加载 First，因为它需要处理 Second 和 Third。

PS：这是我的理论，但这只是逻辑。

这是您在他的示例中实现的运行示例：http: [//ideone.com/pfzXiG](http://ideone.com/pfzXiG)

```
class First(object):
    def __init__(self):
        print "first"

class Second(First):
    def __init__(self):
        print "second"

class Third(First):
    def __init__(self):
        print "third"

class Fourth(Second, Third):
    def __init__(self):
        super(Fourth, self).__init__()
        print "that's it"

print "First: "
print Fourth.__mro__

class First(object):
    def __init__(self):
        print "first"

class Second(object):
    def __init__(self):
        print "second"

class Third(First):
    def __init__(self):
        print "third"

class Fourth(Third, Second):
    def __init__(self):
        super(Fourth, self).__init__()
        print "that's it"
print "Second:"
print Fourth.__mro__ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T18:18:29.693

您的第一个继承层次结构如下所示：

```
D
|\
C B
| |
A |
 \|
   object 
```

而你的第二个是：

```
4
|\
2 3
 \|
  1
  |
  object 
```

> 为什么在第二个示例中它没有到达`First`之前`Third`但在第一个示例中它`A`在去之前经过`B`？

为什么你会期望它们的行为方式相同？看图表，和之间的关系与和`A`之间的关系`B`完全不同`First``Third`

# ruby-on-rails - 如何在 Rails 中创建 postgres 触发器？

> ID：16176233
> 
> 赞同：0
> 
> 时间：2013-04-23T18:09:33.047
> 
> 标签：ruby-on-rails, postgresql, triggers, pg

我有一个表 product(id,name) 和表 product_raiting(product_id,rate_type,rate)。当我创建新产品时，我需要为这个产品创建三个 raitings。

如何添加 postgres 触发器并执行以下操作：

```
 product.create
    product.product_raitings.create( :rate_type => 0, :rate => 0 )
    product.product_raitings.create( :rate_type => 1, :rate => 0 )
    product.product_raitings.create( :rate_type => 2, :rate => 0 )
    product.product_raitings.create( :rate_type => 3, :rate => 0 ) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T18:29:07.233

你想在数据库中创建一个触发器，然后插入数据库就可以了？

[http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)

```
CREATE FUNCTION addRaitings() RETURNS TRIGGER AS '
   BEGIN
      INSERT INTO product_raitings(product_id,rate_type,rate) values(NEW.id,0,0);
      INSERT INTO product_raitings(product_id,rate_type,rate) values(NEW.id,1,0);
      INSERT INTO product_raitings(product_id,rate_type,rate) values(NEW.id,2,0);
      INSERT INTO product_raitings(product_id,rate_type,rate) values(NEW.id,3,0);
   END;
   ' LANGUAGE plpgsql;

CREATE TRIGGER createRaitingTrigger
        AFTER INSERT ON products
        FOR EACH ROW
        EXECUTE PROCEDURE addRaitings(); 
```

还是你想让rails来做这项工作？那么这将是一个`after_create`回调 [http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

所以也许是这样的。

```
class Product < ActiveRecord::Base
  has_many product_raitings

  after_create :build_default_raitings

 private
 def build_default_raitings
    (0..3).each { |x| self.product_raitings.create(:rate_type => x, :rate => 0) }
 end
end 
```

# asp.net - 如何在 aspx.cs 中创建的表中创建事件？

> ID：16176237
> 
> 赞同：0
> 
> 时间：2013-04-23T18:09:39.460
> 
> 标签：asp.net

我用 aspx.cs 代码创建表：

```
protected void buildTable()
{
    ClientScriptManager cs = Page.ClientScript;
    List<Account> accountList = dbs.getAllAccounts(userId);
    string userName = dbs.getUserName(userId);
    Table accountTable = new Table();//creating the table
    accountTable.CssClass = "tsc_table_s4";

    TableHeaderRow headerRow = new TableHeaderRow();//creating header row
    TableHeaderCell th1 = new TableHeaderCell();
    th1.Scope = TableHeaderScope.Column;
    th1.Text = "Account Name";
    TableHeaderCell hc1 = new TableHeaderCell();
    th1.Text = "Account Name";
    TableHeaderCell th2 = new TableHeaderCell();
    th2.Text = "Owner";
    TableHeaderCell th3 = new TableHeaderCell();
    th3.Text = "Website";
    TableHeaderCell th4 = new TableHeaderCell();
    th4.Text = "Phone";
    TableHeaderCell th5 = new TableHeaderCell();
    th5.Text = "Industry";
    TableHeaderCell th6 = new TableHeaderCell();
    th6.Text = "Website";
    TableHeaderCell th7 = new TableHeaderCell();
    th7.Text = "Adress Details";
    TableHeaderCell th8 = new TableHeaderCell();
    th8.Text = "Annual Revenue";
    TableHeaderCell th9 = new TableHeaderCell();
    th9.Text = "Comments";

    headerRow.Cells.Add(th1);
    headerRow.Cells.Add(th2);
    headerRow.Cells.Add(th3);
    headerRow.Cells.Add(th4);
    headerRow.Cells.Add(th5);
    headerRow.Cells.Add(th6);
    headerRow.Cells.Add(th7);
    headerRow.Cells.Add(th8);
    headerRow.Cells.Add(th9);
    accountTable.Rows.Add(headerRow);

    for (int i = 0; i < accountList.Count; i++)
    {
        TableRow tr = new TableRow();
        tr.Attributes.Add("onclick", cs.GetPostBackEventReference(this, tr.ID.ToString()));            

        for (int j = 0; j < headerRow.Cells.Count; j++)
        {

            TableCell td = new TableCell();
            //TableCell tdValidator = new TableCell();                
            if (j == 0)
                td.Text = accountList[i].AccountName;
            else if (j == 1)
                td.Text = userName;
            else if (j == 2)
                td.Text = accountList[i].Website;
            else if (j == 3)
                td.Text = accountList[i].Phone;
            else if (j == 4)
                td.Text = dbs.getIndustryName(accountList[i].Industry);
            else if (j == 5)
                td.Text = accountList[i].Website;
            else if (j == 6)
                td.Text = accountList[i].Address;
            else if (j == 7)
                td.Text = Convert.ToString(accountList[i].AnnualRevenue);
            else if (j == 8)
                td.Text = accountList[i].Description;
            //td.Controls.Add(b);
            tr.Controls.Add(td);
        }
        accountTable.Controls.Add(tr);
    }
    accountTable.Style["width"] = "inherit";
    tableDiv.Controls.Add(accountTable);
} 
```

这是aspx上的代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>            
        <div class="tsc_gradient2" align="center">
            <h4>
                Accounts</h4>
        </div>
        <div id="tableDiv" Runat="server" style="width:inherit;">                                
        </div> 
```

我遇到了两个问题：1.我无法适应 div 内的表格大小（超出了 div 大小）。

1.  我尝试创建事件 onRowClick，其想法是一旦我单击表格行，我将能够从该行获取信息。

有什么建议我可以解决这个吗？？？

# image - Drupal 7 Image Styles 将缩略图保存在大样式文件夹中

> ID：16176239
> 
> 赞同：0
> 
> 时间：2013-04-23T18:09:45.167
> 
> 标签：image, drupal, image-processing, drupal-7

我不确定是否有其他人遇到过这个问题，但这里有。

我已经使用以下模块 Image Crop ImageMagick Colorbox 设置了我的本地环境

所有其他图像模块都在核心中，即 imagefield、imagecache 等。

我遇到的问题是当我在内容类型中保存图像时，上传和裁剪后，我会转到页面点击图像，它只会在颜色框中显示缩略图，我已经做了所有在我的内容类型中的字段显示中可用的正确设置可在颜色框中显示大图像样式，但始终只显示缩略图，当我检查大图像是否保存在其目录中时，我发现它只是将拇指保存在那里也是。

有人对我的问题有任何见解吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:34:24.967

因为您使用的是图像裁剪模块，所以您希望在完整颜色框的显示设置中引用原始图像。

确保图像设置“裁剪图像的分辨率”也是正确的尺寸。

# r - 如何将 30 个粒度数据聚合为 5 分钟数据

> ID：16176240
> 
> 赞同：3
> 
> 时间：2013-04-23T18:09:50.797
> 
> 标签：r, time-series

我有一个 30 秒的 CPU 数据，如下所示。我想做的是将这些数据汇总为 5 分钟和 10 分钟的平均值。

```
 dput(head(res,50))
structure(list(DATE = structure(c(1362114023, 1362114053, 1362114083, 
1362114113, 1362114143, 1362114150, 1362114173, 1362114180, 1362114203, 
1362114210, 1362114233, 1362114240, 1362114263, 1362114270, 1362114293, 
1362114300, 1362114330, 1362114360, 1362114390, 1362114420, 1362114450, 
1362114480, 1362114510, 1362114540, 1362114570, 1362114600, 1362114630, 
1362114660, 1362114690, 1362114720, 1362114750, 1362114780, 1362114810, 
1362114840, 1362114870, 1362114900, 1362114930, 1362114960, 1362114990, 
1362115020, 1362115050, 1362115080, 1362115111, 1362115141, 1362115171, 
1362115201, 1362115231, 1362115261, 1362115291, 1362115321), class = c("POSIXct", 
"POSIXt"), tzone = ""), CPU = c(30L, 29L, 28L, 29L, 27L, 10L, 
25L, 11L, 23L, 9L, 22L, 8L, 22L, 7L, 19L, 7L, 7L, 8L, 6L, 7L, 
6L, 7L, 8L, 8L, 7L, 6L, 8L, 8L, 9L, 8L, 9L, 10L, 9L, 8L, 8L, 
6L, 8L, 7L, 9L, 10L, 11L, 11L, 9L, 9L, 8L, 9L, 11L, 8L, 6L, 8L
)), .Names = c("DATE", "CPU"), row.names = c(132611L, 132612L, 
132613L, 132614L, 132615L, 131428L, 132616L, 131429L, 132617L, 
131430L, 132618L, 131431L, 132619L, 131432L, 132620L, 131433L, 
131434L, 131435L, 131436L, 131437L, 131438L, 131439L, 131440L, 
131441L, 131442L, 131443L, 131444L, 131445L, 131446L, 131447L, 
131448L, 131449L, 131450L, 131451L, 131452L, 131453L, 131454L, 
131455L, 131456L, 131457L, 131458L, 131459L, 131460L, 131461L, 
131462L, 131463L, 131464L, 131465L, 131466L, 131467L), class = "data.frame") 
```

有什么想法，我可以如何处理我的精细数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:54:32.937

[这个问题的版本已经在 stackoverflow 上被询问和回答了很多次。](https://stackoverflow.com/search?q=%5Br%5D%20aggregate%20time%20series)然而它一直被问到。这是一个希望能满足大多数人需求的答案：

首先，使用处理不规则时间序列的包。它使它更容易。我喜欢`xts`。

```
library(xts)

mydata <- structure(list(DATE = structure(c(1362114023, 1362114053, 1362114083, 
1362114113, 1362114143, 1362114150, 1362114173, 1362114180, 1362114203, 
1362114210, 1362114233, 1362114240, 1362114263, 1362114270, 1362114293, 
1362114300, 1362114330, 1362114360, 1362114390, 1362114420, 1362114450, 
1362114480, 1362114510, 1362114540, 1362114570, 1362114600, 1362114630, 
1362114660, 1362114690, 1362114720, 1362114750, 1362114780, 1362114810, 
1362114840, 1362114870, 1362114900, 1362114930, 1362114960, 1362114990, 
1362115020, 1362115050, 1362115080, 1362115111, 1362115141, 1362115171, 
1362115201, 1362115231, 1362115261, 1362115291, 1362115321), class = c("POSIXct", 
"POSIXt"), tzone = ""), CPU = c(30L, 29L, 28L, 29L, 27L, 10L, 
25L, 11L, 23L, 9L, 22L, 8L, 22L, 7L, 19L, 7L, 7L, 8L, 6L, 7L, 
6L, 7L, 8L, 8L, 7L, 6L, 8L, 8L, 9L, 8L, 9L, 10L, 9L, 8L, 8L, 
6L, 8L, 7L, 9L, 10L, 11L, 11L, 9L, 9L, 8L, 9L, 11L, 8L, 6L, 8L
)), .Names = c("DATE", "CPU"), row.names = c(132611L, 132612L, 
132613L, 132614L, 132615L, 131428L, 132616L, 131429L, 132617L, 
131430L, 132618L, 131431L, 132619L, 131432L, 132620L, 131433L, 
131434L, 131435L, 131436L, 131437L, 131438L, 131439L, 131440L, 
131441L, 131442L, 131443L, 131444L, 131445L, 131446L, 131447L, 
131448L, 131449L, 131450L, 131451L, 131452L, 131453L, 131454L, 
131455L, 131456L, 131457L, 131458L, 131459L, 131460L, 131461L, 
131462L, 131463L, 131464L, 131465L, 131466L, 131467L), class = "data.frame")

mydata.xts <- xts(mydata$CPU, order.by = mydata$DATE) 
```

然后，调整`period.apply`基础架构，以便轻松地即时聚合到不同的窗口：

```
apply.periodly <- function (x, FUN, period, k=1, ...) 
{
  if (!require("xts")) {
    stop("Need 'xts'")
  }
  ep <- endpoints(x, on=period, k=k)
  period.apply(x, ep, FUN, ...)
} 
```

现在，创建您的聚合。

```
mydata.10m <- apply.periodly(x = mydata.xts, FUN = mean, period = "minutes", k = 10)
mydata.5m <- apply.periodly(x = mydata.xts, FUN = mean, period = "minutes", k = 5) 
```

请注意，输出时间戳将反映每个聚合窗口中的*最后*输入时间戳。

```
mydata.10m
                     [,1]
2013-03-01 00:09:30 14.80
2013-03-01 00:19:31  8.55
2013-03-01 00:22:01  8.40

mydata.5m
                        [,1]
2013-03-01 00:04:53 19.93333
2013-03-01 00:09:30  7.10000
2013-03-01 00:14:30  8.30000
2013-03-01 00:19:31  8.80000
2013-03-01 00:22:01  8.40000 
```

但是，您可以向上或向下舍入时间戳：

```
align.time.down=function(x,n){index(x)=index(x)-n;align.time(x,n)}

mydata.10m <- align.time(mydata.10m, 10*60)
mydata.10m
#                      [,1]
# 2013-03-01 00:10:00 14.80
# 2013-03-01 00:20:00  8.55
# 2013-03-01 00:30:00  8.40

mydata.5m <- align.time.down(mydata.5m, 5*60)
mydata.5m
#                         [,1]
# 2013-03-01 00:00:00 19.93333
# 2013-03-01 00:05:00  7.10000
# 2013-03-01 00:10:00  8.30000
# 2013-03-01 00:15:00  8.80000
# 2013-03-01 00:20:00  8.40000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-16T02:27:24.953

您希望汇总哪组时间，以及如何报告？例如，您要汇总 00:00 - 04:59 还是 00:01 - 05:00，并在期初或期末报告？

要从 x:00 聚合到 x + 04:59 并在时段开始时报告，请使用`floor`创建向下舍入到最接近的 5 分钟的时间戳：

```
data <- structure(...)
data$DATE.5mindown <- as.POSIXct(floor(as.numeric(data$DATE) / (5 * 60)) *
  (5 * 60), origin='1970-01-01')
aggregate(CPU ~ DATE.5mindown, data, mean)
#         DATE.5mindown      CPU
# 1 2013-03-01 00:00:00 19.93333
# 2 2013-03-01 00:05:00  7.10000
# 3 2013-03-01 00:10:00  8.30000
# 4 2013-03-01 00:15:00  8.80000
# 5 2013-03-01 00:20:00  8.40000 
```

要从 x:01 聚合到 x + 5:00 并在期末报告，请使用`ceiling`创建四舍五入到最接近的 5 分钟的时间戳：

```
data$DATE.5minup <- as.POSIXct(ceiling(as.numeric(data$DATE) / (5 * 60)) *
  (5 * 60), origin='1970-01-01')
aggregate(CPU ~ DATE.5minup, data, mean)
#           DATE.5minup       CPU
# 1 2013-03-01 00:05:00 19.125000
# 2 2013-03-01 00:10:00  7.000000
# 3 2013-03-01 00:15:00  8.300000
# 4 2013-03-01 00:20:00  9.111111
# 5 2013-03-01 00:25:00  8.400000 
```

# java - 从静态方法更改非静态值

> ID：16176242
> 
> 赞同：1
> 
> 时间：2013-04-23T18:09:52.660
> 
> 标签：java, android, static, non-static

所以我正在制作一个在主类/活动中有一个处理程序的应用程序。我收到警告我应该将其声明为静态以防止内存泄漏。
因此，我阅读了一些解释该问题的文章，并且我知道理解它（并将处理程序更改为静态并使用弱引用）。

但是，我的问题来了：
我需要处理程序来更改某些非静态变量（或调用执行此操作的方法）。我不想将这些变量声明为静态的，因为它没有多大意义（它们应该属于主类的一个实例，而不是属于类本身）。

我该怎么做？

我已经看过一段代码，其中有人创建了主类的一个实例，然后用它来更改非静态变量的值或调用非静态方法。这对我来说似乎很奇怪，因为在创建该新实例并使用该实例中的 var 时，我的程序怎么会知道我在谈论与程序早期相同的“myInt”或“myString”。

如果这没有意义或者我没有很好地解释它，请原谅我，我还是新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:11:45.540

您可以在静态变量中保留对主类的引用（假设只有一个主类实例），或者您可以将对主类的引用作为参数传递给静态方法

你是正确的，你不想在静态方法中实例化一个新的主类 - 这不会影响主类的任何其他副本（除非你只是更改副本的静态方法/属性，在这种情况下你应该能够在没有主类实例的情况下做到这一点）

# ios - Http 删除？删除一个赞？

> ID：16176245
> 
> 赞同：0
> 
> 时间：2013-04-23T18:09:59.970
> 
> 标签：ios, xcode, facebook, http, http-delete

我一生无法弄清楚如何建立连接以从 ios Facebook sdk 中的帖子中删除我的喜欢。这是我喜欢连接的代码。我如何删除喜欢的？我无法建立 startForDelete 连接。

```
// create the connection object
        FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

        // create a handler block to handle the results of the request for fbid's profile
        FBRequestHandler handler =
        ^(FBRequestConnection *connection, id result, NSError *error){
            // output the results of the request
            [self likeCompleted:connection thisObject:thisObject thisIndexPath:thisPath result:result error:error];
        };

        // vars
        NSString *postString = [NSString stringWithFormat:@"%@/likes", thisObject.itemId];
        FBGraphObject *graphObject = [[FBGraphObject alloc] init];

        // create request
        FBRequest *request = [[FBRequest alloc] initForPostWithSession:FBSession.activeSession graphPath:[NSString stringWithFormat:@"%@", postString] graphObject:graphObject];

        // add the request
        [newConnection addRequest:request completionHandler:handler];

        // add to open conection
        [openFbConnections addObject:thisObject.userId];

        // if there's an outstanding connection, just cancel
        [requestConnection cancel];

        // keep track of our connection, and start it
        requestConnection = newConnection;
        [newConnection start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:40:03.927

您正在发出 POST 请求，您已发出 DELETE 请求。代替：

```
FBRequest *request = [[FBRequest alloc] initForPostWithSession:FBSession.activeSession graphPath:[NSString stringWithFormat:@"%@", postString] graphObject:graphObject]; 
```

和：

```
FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession graphPath:postString parameters:nil HTTPMethod:@"DELETE"]; 
```

# javascript - 无法获取 textarea 的值

> ID：16176246
> 
> 赞同：1
> 
> 时间：2013-04-23T18:10:04.550
> 
> 标签：javascript, jquery

这是我的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<div id="container">
    <textarea name="message' id="myarea">This is it</textarea>
    <br/>
    <input type="button" id="savebutton" value="Go" /> <p id="fuck"></p>
</div>

<script>

$('#savebutton').click(function() {
    var text = $('#myarea').value();
    alert(text);
}); 

</script> 
```

单击时出现错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“值”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:11:20.773

是`.val()`，不是`.value()`。

如果你在开发者控制台打开的情况下进行开发，你会看到有一个*TypeError*。这应该是您在某些事情不工作时首先看到的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:13:48.407

两件事，使用`val()`代替`value()`. 和

```
<textarea name="message' id="myarea">This is it</textarea> 
```

是无效的。利用

```
<textarea name="message" id="myarea">This is it</textarea> 
```

反而。注意`name="message'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:12:14.387

正确的 jQuery 函数是`val()`，不是`value()`。

也就是说，由于您的代码，一只独角兽刚刚被残忍地杀害。试试[Vanilla JS](http://vanilla-js.com/)：

```
document.getElementById('savebutton').onclick = function() {
    var text = document.getElementById('myarea').value;
    alert(text);
}; 
```

编辑：您的文本区域的属性值中也有不匹配的引号。纠正那些，否则即使这样也行不通；）

# jsf-2 - JSF2 网络字体 eot 和 svg mime 类型在 IE8 中不起作用

> ID：16176248
> 
> 赞同：7
> 
> 时间：2013-04-23T18:10:06.330
> 
> 标签：jsf-2, mime-types, webfonts

**解决方案：** IE8 似乎不喜欢 JSF 的资源加载。我刚刚将我的 src url 更改为相对路径，现在正在加载字体：

```
//this wasn't working for me, 404'ing in IE8
src: url( #{resource['theme/fonts:mycustom_regular-roman-webfont.eot?#iefix']} ) format('embedded-opentype'),

//this works for me in IE8
src: url( ../resources/theme/fonts/mycustom_regular-roman-webfont.eot?#iefix ) format('embedded-opentype'), 
```

我正在尝试让自定义 Web 字体在 JSF2 应用程序和 IE8 中工作。字体在其他浏览器中运行良好，我的 eot 和 svg 的 mime 类型似乎有问题。IE8 中发生的事情是我得到了在 CSS 中声明的非网络字体后备。

这是我的 web.xml：

```
<!-- web fonts -->
<mime-mapping>
    <extension>eot</extension>
    <mime-type>application/vnd.ms-fontobject</mime-type>
</mime-mapping>
<mime-mapping>  
    <extension>otf</extension>  
    <mime-type>font/opentype</mime-type>  
</mime-mapping>      
<mime-mapping>  
    <extension>ttf</extension>  
    <mime-type>application/x-font-ttf</mime-type>  
</mime-mapping>      
<mime-mapping>  
    <extension>woff</extension>  
    <mime-type>application/x-font-woff</mime-type>  
</mime-mapping>
<mime-mapping>  
    <extension>svg</extension>  
    <mime-type>image/svg+xml</mime-type>  
</mime-mapping> 
```

这是控制台告诉我的：

```
[4/23/13 10:59:37:522 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_medium-roman-webfont.eot?#iefix.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:530 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_medium-roman-webfont.svg#omnes_ods_regularitalic.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:534 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_medium-italic-webfont.eot?#iefix.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:541 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_medium-italic-webfont.svg#omnes_ods_regularitalic.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:546 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_regular-roman-webfont.eot?#iefix.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:552 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_regular-roman-webfont.svg#omnes_ods_regularregular.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:557 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_regular-italic-webfont.eot?#iefix.  To resolve this, add a mime-type mapping to the applications web.xml.
[4/23/13 10:59:37:564 PDT] 0000001f context       W   JSF1091: No mime type could be found for file omnesods_regular-italic-webfont.svg#omnes_ods_regularitalic.  To resolve this, add a mime-type mapping to the applications web.xml. 
```

这是我的字体在 css 文件中的声明方式：

```
@font-face {
    font-family: 'mycustom_regularregular';
    src: url( #{resource['theme/fonts:mycustom_regular-webfont.eot']} );
    src: url( #{resource['theme/fonts:mycustom_regular-webfont.eot?#iefix']} ) format('embedded-opentype'),
        url( #{resource['theme/fonts:mycustom_regular-webfont.woff']} ) format('woff'),
        url( #{resource['theme/fonts:mycustom_regular-webfont.ttf']} ) format('truetype'),
        url( #{resource['theme/fonts:mycustom_regular-webfont.svg#omnes_ods_regularregular']} ) format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

以下是样式表的加载方式：

```
<h:outputStylesheet library="theme" name="stylesheet.css" target="head" /> 
```

有人有想法么？

**编辑：** 好奇心使我变得更好，所以我启动了 Fiddler 2，**在 IE8 中，我的网络字体得到了 404**，但在 Chrome 的网络面板中，我可以看到它很好地加载了字体。知道为什么 IE8 是 404 吗？同样有趣的是 Firebug 没有在 Net 面板中显示字体，但我可以直观地看到它们正在下载/加载，以及通过 Firebug 打开/关闭/更改它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T00:47:55.940

这里的问题是资源处理程序正在寻找扩展名为 .eot?#iefix 的资源，该资源不存在并且其 mime 类型未知。

正如 Paul Irish 在[bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)中解释的那样？是对 IE 的修复，以避免 404 错误。

因此，如果您使用 Resource API，源 URL 将如下所示：

```
src: url("/PFThemeSwitcher/javax.faces.resource/fonts/sample.eot.xhtml?ln=theme"); 
```

它将库名称添加到末尾，后跟“？” 所以你不需要添加'?#iefix'。

但我无法访问 Windows PC，所以我现在无法验证。但是如果你仍然需要添加 '?#iefix' 你可以这样做：

```
src: url("#{resource['theme:fonts/sample.eot']}?#iefix") format('embedded-opentype'); 
```

这将在源代码中显示如下：

```
 src: url("/PFThemeSwitcher/javax.faces.resource/fonts/sample.eot.xhtml?ln=theme?#iefix") format("embedded-opentype"); 
```

另一种方法是不使用资源 API 并像您在解决方案部分中所做的那样通过它们的相对路径加载它们。

# java - 如何将 cursor.getString 数据用于 getResources()？

> ID：16176249
> 
> 赞同：0
> 
> 时间：2013-04-23T18:10:07.067
> 
> 标签：java, android, sqlite

我知道这段代码会在 res/raw 上打开 dummytext.txt 文件

```
InputStream inputStream = getResources().openRawResource(
R.raw.dummytext); 
```

但是，如果文件名`dummytext`是从搜索查询中获取的，例如使用此代码-

```
int Index = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DETAILS);
details.setText(cursor.getString(Index)); 
```

那我怎么能通过 InputStream inputStream 命令打开 dummytext 文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:13:50.387

您可以通过以下方式获取 ResourceId：

```
int dummyTextID = this.getResources().
    getIdentifier(cursor.getString(Index), "raw", getPackageName()); 
```

然后做：

```
InputStream inputStream = getResources().openRawResource(dummyTextID); 
```

# scala - 为什么 scala 编译器不会对模式匹配中总是产生 false 的 if 语句生成警告？

> ID：16176259
> 
> 赞同：6
> 
> 时间：2013-04-23T18:10:45.980
> 
> 标签：scala, scala-compiler

scala 编译器应该为我在下面评论过的 if 语句生成警告，但它没有。为什么？

```
sealed trait T
object A extends T

val s:Seq[T] = Seq(A)

val result = s.map {
    //This if should produce a compiler warning
    case a if(a == "A") => 
        "First"
    case a => 
      //This if should produce a compiler warning
      if (a == "A") {
        "Second"
      }
      else
      {
        "Third"
      }
} 
```

如您所料，结果将是“第三”，但编译器应该在`case a if(a == "A")`和 上生成警告`if (a == "A")`，但可惜没有警告。

如果我编写以下代码，它的行为就像我期望的那样：

```
if(A == "A"){
  println("can't happen")
}

// warning: comparing values of types A.type and String using `==' will always yield false 
```

为什么会这样？

编辑：我使用的是 Scala 2.10.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:26:10.850

因为它可能发生。如果我只是保留一些内部状态并在第一次和第二次调用时为 == "A" 返回不同的结果，那么我可以得到 "Second"。

您提供了 A 的定义，保证它不会发生，但这需要检查整个程序，并且编译器警告只是局部的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T23:42:36.173

愿你继承类的重载`==`方法和字符串参数...</p>

# c# - 为什么 Contains 比较对象与 == 不同？

> ID：16176260
> 
> 赞同：14
> 
> 时间：2013-04-23T18:10:47.157
> 
> 标签：c#, .net

```
Object t = 4;
Object s = 4;

if (t == s) {       // false
}

List<Object> q = new List<object>() { t };
Boolean found = q.Contains(s);          // found = true! 
```

在上面的代码中，我对`t == s`返回并不感到惊讶`false`；它正在比较对两个对象的引用，并且引用不一样。

但令我惊讶的是，包含返回真实；显然它不仅仅是比较对象引用..它就像比较 4 和 4 的未装箱值..但是它如何以及为什么知道将对象拆箱以比较它们？我试图在这里理解更大的原则。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T18:14:33.193

表达方式

```
q.Contains(s) 
```

正在寻找一个`q`为真的元素。对于盒装图元，这会比较值。[`EqualityComparer<object>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)`.Equals(element, s)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T18:13:40.927

`Contains`，在内部，是使用实例`object.Equals`方法来比较元素。它没有使用`==`运算符。

该`Equals`方法是虚拟的，而`== operator`是静态的。这意味着`==`操作员将根据变量的编译时类型（而不是变量所持有的运行时对象）来确定要运行的*代码*。另一方面，虚拟方法不是静态绑定的。它根据*变量值的*`Equals`运行时类型确定要运行的重载。

 ** * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T18:13:02.867

根据[`Contains`](http://msdn.microsoft.com/en-us/library/bb352880.aspx)文档：

> 使用默认相等比较器确定序列是否包含指定元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T18:13:09.043

`Contains`使用`Equals`方法而不是`==`运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T18:14:23.480

`==`使用变量的类型来确定要比较的相等性。

For `object`/`object`它会做一个引用相等。

`Contains`将使用`Equals`虚拟方法，并且可能会被重载来进行值比较。在这种情况下`int`是这样写的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-23T18:13:32.347

`Contains`uses `object.Equals(object)`，它 for `int`s 被实现，所以这`4.equals(4)`是真的。 `==`with objects on each side 仅使用参考比较。

另请注意：`object.Equals(t, s) == true`因为如果引用相等失败，[此方法](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)将使用实例的方法。`Equals`*

# android - Android BOOT COMPLETED 频繁触发

> ID：16176267
> 
> 赞同：0
> 
> 时间：2013-04-23T18:11:03.677
> 
> 标签：android, android-intent

我正在开发一个在 BOOT_COMPLETED 上启动服务的 android 应用程序。一切正常，但是在记录一些消息时，我注意到在我终止应用程序后，它会立即重新启动到一分钟后。

唯一可以启动服务的接收器注册到 BOOT_COMPLETED。所以我的问题是为什么我的应用程序在手机启动后自行**启动**。

从安卓网站：

> 广播动作：在系统完成启动后广播一次。它可用于执行特定于应用程序的初始化，例如安装警报。您必须拥有 RECEIVE_BOOT_COMPLETED 权限才能接收此广播。

据我了解，这个事件应该只广播一次，所以还有什么可能导致这个事件。

编辑：这是我在 BootReceiver（扩展 BroadCastReceiver）中用于启动服务的代码。此代码不会在其他**任何**地方重复。

```
Intent serviceIntent = new Intent(context, RandomToneService.class);
context.startService(serviceIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:23:25.387

> 要检查我应该覆盖它并记录它吗？

不一定，但您需要了解[服务及其生命周期](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)。

通过从最近的任务列表中删除应用程序所做的事情与当您的进程因内存不足而终止时 Android 所做的事情相同。A`Service`可以向 Android 请求在这些情况下自动重启，这是通过 from 的返回值完成的`onStartCommand()`。

a的默认返回值`onStartCommand()`是，它告诉 Android 稍后在有内存时重新启动您的服务。on an的默认返回值是or ，具体取决于您是否调用以及您在此处提供的内容。`Service``START_STICKY``onStartCommand()``IntentService``START_NOT_STICKY``START_REDELIVER_INTENT``setIntentRedelivery()`

因此，如果您*不*希望您的服务在这些情况下自动重新启动，您需要做一些事情`onStartCommand()`来返回`START_NOT_STICKY`，或者：

*   致电`setIntentRedelivery(false)`您的`IntentService`, 或

*   Override `onStartCommand()`，链接到默认行为的超类，但随后返回`START_NOT_STICKY`

# ember.js - 过渡到新纪录

> ID：16176268
> 
> 赞同：0
> 
> 时间：2013-04-23T18:11:05.080
> 
> 标签：ember.js

我正在尝试过渡到新创建的记录。我可以创建它，填写并保存在服务器上，但是当涉及到`this.transitionToRoute( 'app', this.get( 'content' ) );`控制台错误时：

> 未捕获的错误：断言失败：您正在尝试查找未定义的控制器，并且 Ember 不知道该控制器的模型。

这不是路由的控制器，因此您必须显式定义控制器 (WEM.AppsCreateAppController) 或将模型作为第二个参数传递给`controllerFor`，以便 Ember 知道要为您创建哪种类型的控制器。

我明白错误告诉我什么，只是不确定我哪里出错了。这是（我认为是）相关代码：

```
WEM.CreateAppController = Ember.ObjectController.extend({
  startEditing: function() {
        console.log( 'start' );
        this.transaction = this.get( 'store' ).transaction();
        this.set( 'content', this.transaction.createRecord( WEM.App, {} ) );
    },

    stopEditing: function() {
        console.log( 'stop' );
        if ( this.transaction ) {
            this.transaction.rollback();
            this.transaction = null;
        }
    },

    save: function() {
        console.log( 'save' );
        this.transaction.commit();
        this.transaction = null;
    },

    transitionAfterSave: function() {
        console.log( 'trans' );
        if ( this.get('content.id' ) ) {
            console.log(this.get( 'content' ));
            this.transitionToRoute( 'app', this.get( 'content' ) );
        }
    }.observes( 'content.id' ),

    cancel: function() {
        console.log( 'cancel' );
        this.stopEditing();
        this.transitionToRoute( 'apps' );
    }
}); 
```

这是我的路线

```
WEM.Router.map(function(){
    this.resource( 'apps', { path: '/' }, function(){
        this.resource( 'create_app', { path: 'apps/new' } );
        this.resource( 'app', { path: 'app/:app_id'}, function(){
            this.resource( 'settings', { path: 'settings' } );
            this.resource( 'error', { path: 'error/:error_id' } );
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:16:23.707

好像`app`路线有问题。您可以使用现有记录过渡到它吗？例如，改变

```
transitionAfterSave: function() {
    console.log( 'trans' );
    if ( this.get('content.id' ) ) {
        console.log(this.get( 'content' ));
        this.transitionToRoute( 'app', WEM.App.find(1) );
    }
}.observes( 'content.id' ), 
```

假设您有一个 id=1 的应用程序并且您有`app/:app_id`一条应该可以工作的路线。如果没有，您可以调试应用程序路由问题，而不必担心新记录。

# types - Nginx 无法打开 mime.types 。需要进行哪些更改？

> ID：16176273
> 
> 赞同：2
> 
> 时间：2013-04-23T18:11:30.430
> 
> 标签：types, nginx, mime

我使用以下命令运行 Nginx：

```
sudo /usr/local/Cellar/nginx/1.2.8/bin/nginx -c /usr/local/Cellar/nginx/1.2.8/nginx.conf 
```

它发出一个错误：

```
nginx: [emerg] open() "/usr/local/Cellar/nginx/1.2.8/mime.types" failed (2: No such file or directory) in /usr/local/Cellar/nginx/1.2.8/nginx.conf:17 
```

这需要什么工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:45:09.007

你没有`mime.types`文件在`/usr/local/Cellar/nginx/1.2.8/`.

更改您的第 17 行`/usr/local/Cellar/nginx/1.2.8/nginx.conf`以引用正确的文件路径。

```
include /usr/local/Cellar/nginx/1.2.8/mime.types; 
```

至

```
include /usr/local/Cellar/nginx/1.2.8/conf/mime.types; 
```

`mime.types`文件通常位于`conf/`目录中，如果没有，您可以使用 `locate mime.types' 命令找到它。

# ios - AFNetworking，完成请求时回调？

> ID：16176274
> 
> 赞同：0
> 
> 时间：2013-04-23T18:11:34.313
> 
> 标签：ios, xcode, cocoa-touch, nsarray, afnetworking

我想知道`AFNetworking`完成请求后是否可以得到回调？我正在制作一个应用程序，其中我有一个边缘案例，所有下载的项目都被检查`is_deleted`（并且不应该显示在 UI 中）。如果是这种情况，我想自动尝试下载旧数据（创建一个新`AFNetworking`请求）。

我试图`loadData`从它本身再次调用我的方法。但它创建了一个不定式循环。像这样：

```
- (void)loadDataIsOlder:(NSNumber *)older
{    
    NSURLRequest *request = [NSURLRequest requestWithURL:self.streamUrl];
    AFJSONRequestOperation *operation;
    operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id jsonObject) {
        NSDictionary *data = [jsonObject objectForKey:@"data"];
        NSDictionary *meta = [jsonObject objectForKey:@"meta"];
       [...]
        for (NSNumber *deleted in (NSArray *)[data valueForKey:@"is_deleted"]) {
            if ([deleted boolValue] == YES) {
                self.shouldTryToLoadMore = YES;
            } else {
                self.shouldTryToLoadMore = NO;
            }
        }
        if (self.shouldTryToLoadMore == YES) {
            [self loadDataIsOlder:[NSNumber numberWithBool:YES]];
        }
    } [...]
} 
```

所以，我想知道这是否是做我想做的其他/更好的方法。

**子**问题 该数组`(NSArray *)[data valueForKey:@"is_deleted"]`由 BOOL int 值组成。我想知道是否可以轻松计算包含整数的数组的值，例如 [1, 1, 1, 0] = 3？我想检查数组中的所有值是否都是 1:s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:51:49.457

**我不熟悉 AFNetworking**

> > 我想知道当 AFNetworking 完成请求时是否可以得到回调？

您始终可以设置操作的完成块（即使在失败时也会被调用，在操作运行的线程上，因此要小心 UI 更新）。
像这样：`operation.completionBlock = ^{/*what ever you like to accomplish*/};`

> > 检查所有下载的项目 is_deleted

我在您的算法中发现了一个小问题。
您没有正确累积删除键（您只响应最后一个项目状态）。
尝试：`self.shouldTryToLoadMore &= [deleted boolValue];`而不是你的`if`陈述。

如果您喜欢短路的东西（以避免“可见”循环），请尝试：

```
NSMutableSet* set = [NSMutableSet setWithArray:[data valueForKey:@"is_deleted"]];
[set addObject:@YES];
if ([set count] == 1) {
//You have only deleted items in your request
} 
```

**note**
您正在`self`成功块中捕获，这可能有问题（如果您拥有 中的操作，则保留周期`self`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:52:01.630

您可以设置重试计数器并将其放入失败块中，因此它看起来像这样：

```
 - (void)loadDataIsOlder:(NSNumber *)older
    {   
 if (shouldTrytoReloadMore){
        NSURLRequest *request = [NSURLRequest requestWithURL:self.streamUrl];
        AFJSONRequestOperation *operation;
        operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id jsonObject) {
            NSDictionary *data = [jsonObject objectForKey:@"data"];
            NSDictionary *meta = [jsonObject objectForKey:@"meta"];
           [...]
            for (NSNumber *deleted in (NSArray *)[data valueForKey:@"is_deleted"]) {
                if ([deleted boolValue] == YES) {
                    self.shouldTryToLoadMore = YES;
                    [self loadDataIsOlder:[NSNumber numberWithBool:YES]];

                } else {
                    self.shouldTryToLoadMore = NO;
                }
            }
            }
        } [...]
    }
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
} 
```

当您第一次调用该方法时，将 n 设置为您需要重试的次数。

# jquery - 将分钟添加到输入字段并显示小时/分钟

> ID：16176280
> 
> 赞同：1
> 
> 时间：2013-04-23T18:11:50.467
> 
> 标签：jquery, time

我有一个简单的输入字段，允许用户输入他们当天工作的分钟数。有没有一种方法可以让他们在此字段中输入详细信息后，我可以在输入旁边显示以小时和分钟为单位的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:16:08.893

```
var m = $('#input').val();
var hours = Math.floor(m / 60);
m = m % 60;

$('#someDiv').text('hours: ' + hours + 'minutes: ' + m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:22:07.887

您可以这样做以获取格式的小时/分钟`hh:mm`：

HTML：

```
<input type="text" id="mins" />
<span id="hm"></span> 
```

JavaScript：

```
$('#mins').change(function(){
    var h = Math.floor( $('#mins').val() / 60);
    h = "0" + h;
    h = h.substr(h.length - 2, 2);
    var m = Math.floor( $('#mins').val() % 60);
    m = "0" + m;
    m = m.substr(m.length - 2, 2);

    $('#hm').html(h + ':' +m);
}); 
```

[**Jsfiddle 示例**](http://jsfiddle.net/darkajax/bwu5E/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:38:19.123

一些简单的数学和格式应该可以让你到达那里。

```
function getTimeStringFromMinutes(m) {
    var hours = Math.floor(m/60);
    var seconds = (m - Math.floor(m)) * 60;
    minutes = Math.floor(m % 60);
    var output = (hours < 10 ? '0'+hours : hours) + 
                 ":" + 
                 (minutes < 10 ? '0'+minutes : minutes) + 
                 ":" + 
                 (seconds < 10 ? '0'+seconds : seconds);
    return output;
}
// getTimeStringFromMinutes(128.5) --> "02:08:30"
// getTimeStringFromMinutes('128.5') --> "02:08:30" 
```

（PS 不要害怕三元运算符，它们只是以下形式的动态值：*条件：valueIfTrue：valueIfFalse*）

# ios - 与 iOS 中的公开分发应用相比，企业应用具有哪些能力？

> ID：16176286
> 
> 赞同：-3
> 
> 时间：2013-04-23T18:12:16.057
> 
> 标签：ios, enterprise

我相信我记得“企业”应用程序有权访问比公开分发的应用程序更广泛的功能。这些记录在任何地方吗？我知道分发机制是不同的，但是除了普通应用程序的能力之外，是否还有其他 API 或应用程序权限或能力？

我正在寻找一个广泛的描述，而不是 API 接口的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:17:07.483

没有区别，但您不必遵循苹果指南，因为企业应用程序不会通过苹果验证，因此您可以使用“私有 API”、后台任务等。

我看到的唯一优势是，您可以从网上下载 .ipa

# hibernate - 如何将多个图像从数据库渲染到 JSF？

> ID：16176288
> 
> 赞同：0
> 
> 时间：2013-04-23T18:12:27.057
> 
> 标签：hibernate, jsf, primefaces

我尝试使用休眠框架从数据库中显示 xhtml 页面中的多个图像。但是图像没有显示。我在下面提到了代码片段

```
public class ImageRenderBean{

private String imageName;
private StreamedContent image;
//setters and getters

} 
```

RPCDocumentBean 托管 Bean：

```
public class RPCDocumentBean  implements Serializable {
private List<ImageRenderBean> docRendList;

public RPCDocumentBean(){

List<RPCDocument> list=getRpcService().find();
ImageRenderBean renderBean=null;
for(RPCDocument doc:list){

renderBean=new ImageRenderBean();
renderBean.setImageName(doc.getDocumentName());
renderBean.setImage( new DefaultStreamedContent(new ByteArrayInputStream(
        doc.getRpcProofdoc()), "png"););
docRendList.add(renderBean);

}

}

} 
```

文档.xhtml：

```
<ui:repeat var="docRenPath" value="#{rpcdocumentBean.docRendList}> 

<p:graphicImage id="img1" width="100px" height="100px" value="#{docRenPath.imageRender.image}" style="cursor:pointer"/> 

</ui:repeat> 
```

但是没有显示图像。所以我改变了 Managed Bean 的核心逻辑，比如

```
 public class RPCDocumentBean  implements Serializable {
    private List<String> docRendList;
    private StreamedContent rpcdocument1;
    private StreamedContent rpcdocument2;

    public RPCDocumentBean(){

    List<RPCDocument> list=getRpcService().find();
    ImageRenderBean renderBean=null;
    for(RPCDocument doc:list){

    renderBean.add(doc.getDocumentName());
    if(doc.getDocumentName().equals("identityproof")){
    rpcdocument1=new DefaultStreamedContent(new ByteArrayInputStream(
            doc.getRpcProofdoc()), "png"));
    }

   if(doc.getDocumentName().equals("addressproof")){
    rpcdocument2=new DefaultStreamedContent(new ByteArrayInputStream(
            doc.getRpcProofdoc()), "png"));
    }

    }

    }

    } 
```

在xhtml页面修改后：

```
 <ui:repeat var="docRenPath" value="#{rpcdocumentBean.docRendList}> 
    <p:row rendered="#{docRenPath.equalsIgnoreCase('identityproof')}" >
        <p:column >
    <p:graphicImage id="img1" width="100px" height="100px" value="#{rpcdocumentBean.rpcdocument1}" style="cursor:pointer"/> 
    </p:column>
</p:row>
  <p:row rendered="#{docRenPath.equalsIgnoreCase('addressproof')}" >
        <p:column >
    <p:graphicImage id="img1" width="100px" height="100px" value="#{rpcdocumentBean.rpcdocument2}" style="cursor:pointer"/> 
    </p:column>
</p:row>eat> 
```

现在它工作正常。但这里只有两个文件。如果超过特定用户的文档类型。如何在 JSF 中显示图像？渲染图像的最佳选择是什么？

# python - python无效语法错误

> ID：16176291
> 
> 赞同：-3
> 
> 时间：2013-04-23T18:12:40.780
> 
> 标签：python, syntax

我刚刚尝试运行我的 python 脚本并收到无效的语法错误我已经仔细检查了问题但仍然看不到问题可以看到问题吗？如果有人可以帮助查看问题，下面是代码。

谢谢。

```
import random
import Tkinter

class life (Tkinter.Frame):

    def __init__(self,x,y):
        Tkinter.Frame.__init__(self)
        self.master.title("The Game Of Life")
        self.grid = [[False for j in range (y)] for i in range (x)]
        universe = Tkinter.Frame(self)
        def createButton (i,j):
            bitmap=None
            if self.grid[i][j]:bitmap ='gray75'
            gridEntry = Tkinter.Button(universe, bitmap=bitmap)
            gridEntry.grid(row=i, column =j)
        self._applyToEachCellOfGrid (createButton)
        universe.pack(side='top')
        scale= Tkinter.Scale(self, orient = Tkinter.HORIZONTAL, from_=1, to =10,
                             command=self.setPeriod)
        scale.pack(side='top')
        quit=Tkinter.Button(self, text='Quit', command=self.quit)
        quit.pack(side='left')
        run=Tkinter.Button(self, text='Run' , command=self.run)
        run.pack(side='right')
        pause=Tkinter.Button(self, text='Pause', command=self.pause)
        pause.pack(side='right')
        self.pack()

    def _applyToEachCellOfGrid (self, function) :
        for i in range (len(self.grid)):
            for j in range (len(self.grid[i])):
                function(i,j)

    def populateGridRandomly(self,x):
        random.seed()
        def setRandomly(i,j):
            if random.random()<x:self.grid[i][j]= True
        self._applyToEachCellOfGrid(setRandomly)

    def calculateNextGeneration(self):
        newGrid=[[ False for j in range ( len (self.grid[i]))] for i in range ( len (self.grid))]
        def calculateLiveness(x,y):
            count = 0
            for i in range (x-1, x+2):
                if 0 <=i<len (self.grid[i]):
                    if ((i !=x)or(j !=y)) and self.grid[i][j]:count +=1
            if self.grid[x][y]:return 2 <= count <=3
            else: return count ==3
        def setNewGrid(x,y):
            newGrid[x][y]= calculateLiveness(x,y)
        self._applyToEachCellOfGrid (setNewGrid)
        self.grid = newGrid

    def pause(self):
        print 'pause called.'

    def run(self):
        print 'run called'

    def setPeriod (self, value):
        print 'setPeriod called with value' , value

if __name__ =="__main__':
    game=Life(8,10)
    game.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:15:35.803

如果您使用开头`"`，则还必须使用结尾`"`，而不是`'`：

```
 File "synt2.py", line 63
    if __name__ =="__main__':
                            ^
SyntaxError: EOL while scanning string literal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:22:12.783

这是你的代码，工作。

```
import random
import Tkinter

class Life (Tkinter.Frame):

    def __init__(self,x,y):
        Tkinter.Frame.__init__(self)
        self.master.title("The Game Of Life")
        self.grid = [[False for j in range (y)] for i in range (x)]
        universe = Tkinter.Frame(self)
        def createButton (i,j):
            bitmap=None
            if self.grid[i][j]:bitmap ='gray75'
            gridEntry = Tkinter.Button(universe, bitmap=bitmap)
            gridEntry.grid(row=i, column =j)
        self._applyToEachCellOfGrid (createButton)
        universe.pack(side='top')
        scale= Tkinter.Scale(self, orient = Tkinter.HORIZONTAL, from_=1, to =10,
                             command=self.setPeriod)
        scale.pack(side='top')
        quit=Tkinter.Button(self, text='Quit', command=self.quit)
        quit.pack(side='left')
        run=Tkinter.Button(self, text='Run' , command=self.run)
        run.pack(side='right')
        pause=Tkinter.Button(self, text='Pause', command=self.pause)
        pause.pack(side='right')
        self.pack()

    def _applyToEachCellOfGrid (self, function) :
        for i in range (len(self.grid)):
            for j in range (len(self.grid[i])):
                function(i,j)

    def populateGridRandomly(self,x):
        random.seed()
        def setRandomly(i,j):
            if random.random()<x:self.grid[i][j]= True
        self._applyToEachCellOfGrid(setRandomly)

    def calculateNextGeneration(self):
        newGrid=[[ False for j in range ( len (self.grid[i]))] for i in range ( len (self.grid))]
        def calculateLiveness(x,y):
            count = 0
            for i in range (x-1, x+2):
                if 0 <=i<len (self.grid[i]):
                    if ((i !=x)or(j !=y)) and self.grid[i][j]:count +=1
            if self.grid[x][y]:return 2 <= count <=3
            else: return count ==3
        def setNewGrid(x,y):
            newGrid[x][y]= calculateLiveness(x,y)
        self._applyToEachCellOfGrid (setNewGrid)
        self.grid = newGrid

    def pause(self):
        print 'pause called.'

    def run(self):
        print 'run called'

    def setPeriod (self, value):
        print 'setPeriod called with value' , value

if __name__ =="__main__":
    game=Life(8,10)
    game.mainloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:30:07.203

`life`您在调用时声明了一个名为 的类`Life`。Python 区分大小写。将第 4 行更改为`class Life (Tkinter.Frame):`或将第 64 行更改为`game=life(8,10)`。

# java - 序列化哈希表，Java

> ID：16176292
> 
> 赞同：6
> 
> 时间：2013-04-23T18:12:45.043
> 
> 标签：java, serialization

我以前从未使用过序列化。除了“Q” case-switch 中的最后一部分，我想我一切都好。

```
public class Test{

public static void main(String args[]){

    Store store = new Store();

    FileOutputStream fos;
    ObjectOutputStream oos = null;

    try{

        fos = new FileOutputStream(new File("table.obj"));
        oos = new ObjectOutputStream(fos);

    }catch(IOException e1){

        e1.printStackTrace();

    } 
```

这继续包含更多代码，但我认为真正重要的是我的“Q”案例......

```
case "Q":

            System.out.println("Good-Bye!");

            try{

                oos.writeObject(store);
                oos.flush();
                oos.close();

            }catch(IOException e){

                e.printStackTrace();

            }

            System.exit(0);

            break; 
```

当我尝试将所有数据保存到我的 .obj 文件并关闭流并退出我的程序时，我得到了所有这些错误......

**java.io.NotSerializableException：sun.reflect.NativeMethodAccessorImpl 的 java.io.ObjectOutputStream.writeObject(Unknown Source) 处的 java.io.ObjectOutputStream.writeObject0(Unknown Source) 处的项目。 invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at java.io.ObjectStreamClass。在 java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source) 在 java.io.ObjectOutputStream.writeObject0(Unknown Source) 在 java.io.ObjectOutputStream.defaultWriteFields(未知来源）在 java.io.ObjectOutputStream。writeSerialData(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Unknown Source) at java.io.ObjectOutputStream.writeObject(Unknown Source) at Test.main(Test.java: 143)**

我不确定这些错误中的大多数是什么意思，或者我为什么会得到它们，甚至不确定如何修复它们。谁能帮我？

编辑：商店类

```
import java.io.Serializable;
import java.util.Hashtable;

 public class Store implements Serializable{

Hashtable<String, Item> stockedItems = new Hashtable<String, Item>();

public boolean addItem(String code){

    if(stockedItems.containsKey(code)){

        stockedItems.get(code).incrementQuantity();

        return true;

    }

    return false;

}

public boolean removeItem(String code){

    if(stockedItems.containsKey(code)){

        stockedItems.get(code).decrementQuantity();

        return true;

    }

    return false;

}

public boolean findItem(String code){

    if(stockedItems.containsKey(code)){

        return true;

    }

    return false;

}

 } 
```

**我的 HashTable 包含不实现可序列化的项目对象。我现在修复了。程序运行，Q case 工作正常！现在是我的 U 案例不起作用，这里是......

```
case "U":

            try{

                FileInputStream fis = new FileInputStream("table.obj");
                ObjectInputStream ois = new ObjectInputStream(fis);

                store = (Store)ois.readObject();

                ois.close();

            }catch(IOException | ClassNotFoundException e){

                e.printStackTrace();

            }

            break; 
```

这个案例的目的是允许用户选择是否要使用存储在我的 .obj 文件中的数据。尝试使用该案例时出现这些错误

**在 java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source) at java.io.ObjectInputStream.readObject0(Unknown Source) at java.io.ObjectInputStream.readObject(Unknown Source) at Test.main(Test.java:142)**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T18:15:28.203

即使`Hashtable`对象是可序列化的，您存储*在*其中的对象也必须是可序列化的。所以我会首先检查你在你的内部存储的任何东西是否`Hashtable`实现了`Serializable`接口。至少，你的`Store`类也应该实现`Serializable`接口。

**更新**

根据您更新的问题，该类似乎`Item`也需要实现`Serializable`。事实上，这正是异常的第一行所说的：

```
java.io.NotSerializableException: Item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:18:55.157

您只能编写对象，`Serializable`并且可以查找 Oracle 的 JavaDoc 并了解详细信息。

通常，在大多数情况下，您可以添加`implements Serializable`到满足一些要求的任何类。

一个类必须只具有本身是可序列化对象或某些原始类型（如`int`or`char`等​​）的字段。

如果存在某些超类型的字段，则占用该字段的对象实例必须是可序列化的，即使超类型不是。

还有很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:27:27.630

“java.io.NotSerializableException：Item”是说`class Item`不可序列化。它需要可序列化，因为地图的内容需要可序列化才能使整个地图可序列化。

# c# - 使用 linq 选择一个父属性和所有子属性

> ID：16176296
> 
> 赞同：14
> 
> 时间：2013-04-23T18:13:01.983
> 
> 标签：c#, linq

我有一组部分，每个部分都有一组问题。如果我想选择所有部分下的所有问题，这可行

```
Sections.SelectMany(s=>s.Questions) 
```

但现在我也想要节号。所以如果我尝试这样的事情

```
 Sections.SelectMany(s=>s.Questions,s.SectionNumber) 
```

它会引发编译错误。

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T18:16:48.633

您应该在这里使用匿名类型：

```
Sections.SelectMany(s => s.Questions, (s, q) => new { Question = q, s.SectionNumber }) 
```

# c# - 组合框绑定到一个列表。向列表中添加新项目不会影响组合框

> ID：16176299
> 
> 赞同：4
> 
> 时间：2013-04-23T18:13:07.403
> 
> 标签：c#, winforms, data-binding, combobox, datasource

有以下代码：

```
public partial class Form1 : Form
{
    private List<string> names = new List<string> { "aa", "bb", "cc" };

    public Form1()
    {
        InitializeComponent();

        comboBox1.DataSource = names;
        comboBox1.DisplayMember = "Name";
    }

    private void button1_Click(object sender, EventArgs e)
    {
        names.Add("dd");
    }
} 
```

当我单击按钮时，我想向源列表添加新值，并期望组合框会立即更新以包含该值。但事实并非如此。为什么？一般来说，将列表连接到组合框的最简单正确方法是在列表中添加/删除项目直接影响组合框的方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:23:01.367

您还可以使用 a在列表内容更改时`BindingList`引发事件。`ListChanged`

```
BindingList<string> names = new BindingList<string> { "aa", "bb", "cc" }; 
```

对于和之间的区别`ObservableCollection`，`BindingList`请参阅[这个](https://stackoverflow.com/a/4284805/1401257)答案，这比我能提供的要好得多。

* * *

如果您必须保持数据正常`List`，您可以将列表包装成`BindingSource`这样：

```
private BindingSource source; //property
...
   source = new BindingSource(names, "");
   comboBox1.DataSource = source; 
```

然后添加到源：

```
source.Add("3"); 
```

`BindingSource`会将项目添加到基础列表并引发事件`ListChanged`。

`DataSource`如果您也不能使用该解决方案，那么除了在更新列表时重置之外，我想不出其他任何方法：

```
names.Add("dd");
comboBox1.DataSource = null;
comboBox1.DataSource = names; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:15:55.507

发生这种情况是因为当您`List`更改时，没有发生通知`ComboBox`更改的事件。使用`ObservableCollection<string>`而不是`List<string>`. 它很像`List`，但有特点。 `ObservableCollection<string>`遵循`INotifyCollectionChanged, INotifyPropertyChanged`接口，这些是必需的事件。

# css - 如何有一个窗口高度的一定百分比的上边距？

> ID：16176305
> 
> 赞同：2
> 
> 时间：2013-04-23T18:13:15.547
> 
> 标签：css, height, margin

我想就特定问题寻求帮助。我搜索了类似的问题，但没有找到任何实际的解决方案。我对 CSS 比较陌生。

我正在尝试调用一个蓝色框`buttoncontainer`，稍后将在其中包含按钮。现在，我想对其进行格式化，使浏览器窗口的上边缘和蓝色框的上边缘之间的距离始终为窗口总高度的 42%。正如下面的代码所示，我试图通过为框设置 42% 的上边距来实现这一点。

但是，我做不到。当我在 Firefox 或 IE 中打开 HTML 文件（这是我的家庭桌面上的）时，当窗口全屏时，距离显然有所不同。如果不是并且我开始调整它的大小，则框的位置根本不会响应垂直调整大小。但是，它确实响应水平调整大小，我不希望它这样做。

我想这一定是我犯的一个菜鸟错误，但我就是不知道如何改正。

重申一下，我希望窗口顶部边缘和蓝色框之间的距离始终为窗口总高度的 42%。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Untitled Document</title>
  <script type="text/javascript" src="jquery-1.9.0.js"></script>

  <style type="text/css">
    body {
      background-color: #C94735
    }

    iframe {
      background-color: #FFF;
      border: 0;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 63%;
      height: 100%;
      margin-left: 25%;
      margin-right: 12%;
    }

    .buttoncontainer {
      background-color: #00F;
      border: 0;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin-top: 42%;
      /* margin-bottom: auto; */
      margin-left: 15px;
      width: 25%;
      height: 58%;
    }
  </style>

</head>

<body>
  <div id="container" class="buttoncontainer">

  </div>
  <iframe id="content"></iframe>
</body>

</html>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:27:47.787

**将始终根据包含元素**的宽度计算 margin-top 的潜在值。这就是为什么在修改视口/容器元素的宽度时修改您的相对边距位置的原因。您可以使用 javascript 计算值并适当地分配。

您也可以尝试使用视口相对单位（仅 css 级别 3）。（1vw = 1% 的视口宽度和 1vh = 1% 的视口高度）

在这个[小提琴](http://jsfiddle.net/Fico/aKkwx/)中工作的解决方案在这里我修改了 buttoncontainer 类；

```
.buttoncontainer {
....
....
margin-top: 42vh;
} 
```

# php - mysqli准备好的语句的函数调用顺序？

> ID：16176307
> 
> 赞同：1
> 
> 时间：2013-04-23T18:13:28.327
> 
> 标签：php, mysqli

php 手册似乎对 mysqli 扩展有点轻描淡写，我没有找到任何与 Google 相关的信息。

当我创建一个 mysqli 准备好的语句时，调用的顺序应该是

```
mysqli::prepare()
mysqli::stmt::bind_param()
mysqli::stmt::execute()
mysqli::stmt::store_result()
mysqli::stmt::bind_result() 
```

或者

```
mysqli::prepare()
mysqli::stmt::bind_param()
mysqli::stmt::execute()
mysqli::stmt::bind_result()
mysqli::stmt::store_result() 
```

此外，如果我想更改参数并重新执行语句，我应该使用

```
mysqli::free_result()
mysqli::stmt::execute()
mysqli::stmt::store_result()
mysqli::bind_result() 
```

或者我可以简单地再次使用execute()，然后在我完成使用语句后使用free_result()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:01:32.617

它不是 PHP 手册，而是 mysqli 扩展本身不清楚和模棱两可。

但是，为了消除您的困惑

1.  您可以`store_result()`在 prepare() 和`fetch()`. 事实上，`bind_result()`只是一个补充功能`fetch()`。

2.  在 PHP 中，您通常很少需要释放任何东西，尤其是在这种情况下，结果将在下一次调用中被覆盖。所以 - 是的，你可以简单地`execute()`再次调用（`bind_param()`首先）。

另请注意，某些安装将允许您调用[get_result](http://php.net/manual/en/mysqli-stmt.get-result.php)，这使得获取变量的所有过程至少是明智的。但并不总是可用

另请注意，既不`bind_param()`也不`bind_result()`会让您轻松绑定*任意*数量的变量，这将使代码更加臃肿。

所以，看到所有这些混乱，我仍然建议您使用 PDO 或手动实现的占位符，就像[safeMysql](https://github.com/colshrapnel/safemysql)一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:54:41.760

这是一个有效的示例：

```
$query="SELECT service_ip,service_port FROM users WHERE username=? and password=?";
$conn=connection();

$stmt = $conn->prepare($query);
$stmt->bind_param('ss', $user,$pass);
$ans=$stmt->execute();

$service_ip=false;
$service_port=false;
$stmt->bind_result($service_ip,$service_port);

$stmt->fetch();

mysqli_free_result($ans);
$stmt->close();
$conn -> close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:37:11.930

这是*正确的*代码：

```
$query="SELECT service_ip,service_port FROM users WHERE username=? and password=?";
$stmt = $conn->prepare($query);
$stmt->execute(array($user,$pass));
$data = $stmt->fetch()/fetchAll()/fetchColumn(); 
// whoops! that's all

// ...in case you want to execute again
$stmt->execute(array($user2,$pass2));
$data = $stmt->fetch()/fetchAll()/fetchColumn();

// and again...
$stmt->execute(array($user3,$pass3));
$data = $stmt->fetch()/fetchAll()/fetchColumn(); 
```

请注意，您已经拥有所有必需的数据。感受[PDO的力量](https://stackoverflow.com/tags/pdo/info)

# jquery - JQuery UI自动完成“多个值”和“多个，远程”有什么区别

> ID：16176314
> 
> 赞同：0
> 
> 时间：2013-04-23T18:13:42.237
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我在我的项目中使用 JQuery UI 自动完成过滤器，我希望用户能够从服务器上的数据库中输入多个项目。我对 JQuery UI 自动完成“多个值”和“多个远程”之间有什么区别感到困惑，哪个最适合我的项目？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:20:29.460

**多**——让您选择多个值。

**多个遥控器**- 这只是意味着您正在从远程服务器加载自动完成结果：

例子 -

```
.autocomplete({
    source: function( request, response ) {
        $.getJSON( "search.php", {
            term: extractLast( request.term )
        }, response );
        }, 
```

*我希望用户能够从服务器上的数据库中输入多个项目。*

看到这个： [jqueryui.com/resources/demos/autocomplete/multiple-remote.html](http://jqueryui.com/resources/demos/autocomplete/multiple-remote.html)

# android - achartengine 设置 X Title 和 X Text Label 之间的距离

> ID：16176315
> 
> 赞同：1
> 
> 时间：2013-04-23T18:13:42.593
> 
> 标签：android, achartengine

有没有办法设置 X 标题和 X 文本标签之间的距离。它们在 x 轴上重叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:21:21.947

一个想法是您使用该`renderer.setXLabelsPadding()`方法来控制 x 轴标签位置。确保您使用的是最新的 1.1.0 版本。

# android - 通过移动设备禁止？

> ID：16176322
> 
> 赞同：0
> 
> 时间：2013-04-23T18:14:04.293
> 
> 标签：android, iphone, mobile, blackberry, windows-phone

我正在制作一些主要由用户驱动的应用程序，当然这意味着他们将成为麻烦制造者，他们可能会使用脏话将虚假数据输入其中，或者更糟地将有效数据更改为坏数据（即更改为脏话）

当然会采取措施试图遏制这种情况，但最终我希望可以选择禁止某人参加我的申请。

我的第一个想法是通过电子邮件地址禁止他们的帐户。我也在想，也许除了禁止他们的设备。

我的问题是，如果他们使用，我可以从他们的手机上使用什么唯一 ID

```
Andriod
Iphone
Blackberry
Windows Phone 7/8 
```

它有多独特？能轻易改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:11:29.507

对于 Windows Phone，您应该能够使用[DeviceExtendedProperties](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties)。特别是`DeviceUniqueId`财产。

但请注意，正如他们在那篇文章中所说，如果您使用设备 ID 禁止用户，那么同一设备的任何未来用户都将被禁止使用您的应用程序，即使他们没有做错任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:16:13.723

有 2 个标识符可以一起用于识别特定设备和用户。

DeviceUniqueId 和 WindowsLiveAnonymousId

第一个是设备，如前所述，在被禁止用户之后使用该设备的任何人也将被禁止。

WindowsLiveAnonymousId 对用户来说是唯一的。我在 3 个不同的设备上看到了相同的标识符，并且对于用户 LiveId 来说总是相同的。

我使用以下 2 种方法来获取这些 id 来识别排行榜的游戏玩家：

```
//Note: to get a result requires ID_CAP_IDENTITY_DEVICE
// to be added to the capabilities of the WMAppManifest
// this will then warn users in marketplace

public static byte[] GetDeviceUniqueId()
{
    byte[] result = null;
    object uniqueId;
    if (DeviceExtendedProperties.TryGetValue("DeviceUniqueId", out uniqueId)) 
        result = (byte[])uniqueId;
    return result;
}

// NOTE: to get a result requires ID_CAP_IDENTITY_USER
//  to be added to the capabilities of the WMAppManifest
// this will then warn users in marketplace

public static string GetWindowsLiveAnonymousId()
{
    string result = String.Empty;
    object anid;
    if (UserExtendedProperties.TryGetValue("ANID", out anid))
    {
        if (anid != null && anid.ToString().Length >= (AnidLength + AnidOffset))
        {
            result = anid.ToString().Substring(AnidOffset, AnidLength);
        }
    }
    return result;
} 
```

它们是这样使用的：

```
string deviceUniqueId = String.Empty;
for (int i = 0; i < GetDeviceUniqueId().GetLength(0); i++)
{
    deviceUniqueId += GetDeviceUniqueId().GetValue(i);
}

DeviceUniqueIDTextBlock.Text = deviceUniqueId;
WindowsLiveAnonymousIDTextBlock.Text = GetWindowsLiveAnonymousId().ToString(CultureInfo.InvariantCulture); 
```

去年五月我写了一篇关于在 WP7 上获取系统信息的帖子。此代码可在此处找到：http: [//www.adambenoit.com/applications/system-info-windows-phone/](http://www.adambenoit.com/applications/system-info-windows-phone/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:11:24.840

所有这些设备都具有具有唯一 MAC 地址的网络接口，根据定义，这些地址是恒定的——MAC 地址被烧录到硬件中，并且不能 [容易] 被欺骗，尤其是在移动设备上。我会散列 MAC 地址并将其用作密钥。一旦苹果禁止使用 UDID，iOS 上的做法就很常见了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:39:37.303

我会使用指导方法。虽然这可以通过卸载并重新安装应用程序来规避。虽然没有什么完美的

[如何使用 iPhone SDK 创建 GUID/UUID](https://stackoverflow.com/questions/427180/how-to-create-a-guid-uuid-using-the-iphone-sdk)

[如何在android中获取GUID？](https://stackoverflow.com/questions/2221546/how-to-get-guid-in-android)

如何在 Windows Phone 上创建 GUID [http://msdn.microsoft.com/en-us/library/system.guid.newguid(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.guid.newguid(v=vs.95).aspx)

如何在黑莓上创建 GUID [http://supportforums.blackberry.com/t5/Java-Development/how-to-generate-GUID/td-p/289947](http://supportforums.blackberry.com/t5/Java-Development/how-to-generate-GUID/td-p/289947)

# svn - tortoisesvn：在单独的目录中创建分支

> ID：16176323
> 
> 赞同：1
> 
> 时间：2013-04-23T18:14:06.323
> 
> 标签：svn, tortoisesvn

如何使用 tortoisesvn 在单独的目录中创建分支？当我尝试创建一个分支时，它是在同一目录中创建的。我通过用我的代码右键单击目录并导航到“分支/标签”来创建它。由于我在分支中有不受修订控制的文件，因此我希望它们位于不同的目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:32:26.713

如果您遵循trunk/branch/tag 布局，您应该从**c:/myProgram中的****svn_url/project/trunk**检索到工作副本，并且在那里看不到任何分支。如果你看到它们，那么你要么无缘无故地检查了整个**svn_url/project**，或者试图在主干中创建分支——这是错误的。

 ****与将存储库签出到**c:/myProgram**的方式相同，您可以同时将存储库（或标签）中的任何分支签出到任何其他位置，例如**c:/derivative**。请参阅[分支/标记](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)。但这有时可能会令人困惑，因为文件的设置是相同的，并且您始终需要记住您在哪个文件夹中进行修改。

您似乎误用了主干/分支/标签的概念。也就是说，你应该使用**switch 命令**在主干、分支、标签之间进行切换。检查其中一个工作流程并选择一个要遵循的工作流程。检查[这篇文章](http://emilsblog.lerch.org/2010/03/working-with-feature-branch-in.html)****

# netbeans - 用ant注册一个netbeans平台

> ID：16176327
> 
> 赞同：0
> 
> 时间：2013-04-23T18:14:12.107
> 
> 标签：netbeans, ant, netbeans-platform

我们正在开发一个 netbeans 平台，我们将其用作其他 netbeans 平台的基础。如果有一个 Ant 目标可以将它作为一个平台安装在当前的 netbeans 环境中，那就太好了。

当我们手动执行时，我们必须在 Atm 执行工具 -> NetBeans 平台 -> 添加平台等等。

在构建服务器（jenkins）中，我们必须有一个修改`build.properties`. 比较乱。。。

在一个理想的世界里，我可以用 Ant 做到这一点，但我根本不了解 Ant，所以我想知道......有没有办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:07:16.120

一旦我研究了蚂蚁，这很容易！

当我构建“基础平台”时，我将其作为最终的 ant 目标；

```
<target name ="install-as-platform-into-netbeans" depends="build-zip">
        <unzip src="${basedir}/dist/${ant.project.name}.zip" dest="${basedir}/dist"/> 
        <propertyfile file="${user.properties.file}">
            <entry key="nbplatform.${ant.project.name}.harness.dir" value="${nbplatform.default.harness.dir}"/>
            <entry key="nbplatform.${ant.project.name}.label" value="${ant.project.name}"/>
            <entry key="nbplatform.${ant.project.name}.netbeans.dest.dir" value="${basedir}/dist/${ant.project.name}"/>
            <entry key="nbplatform.${ant.project.name}.sources" value="${basedir}"/>
        </propertyfile> 
```

然后我必须在第二次构建中将此平台设置为“活动平台”；

```
 <target name="set-as-active-platform">
         <propertyfile file="${basedir}/nbproject/platform.properties">
               <entry key="nbplatform.active" value="NAME-OF-PREVIOUS-PLATFORM"/>
         </propertyfile>
    </target> 
```

一个明显的缺点是我必须将前一个平台的名称编码到 NAME-OF-PREVIOUS-PLATFORM 中，但名称不会经常更改，所以没什么大不了的。

# file - matlab如何读取文件？

> ID：16176328
> 
> 赞同：6
> 
> 时间：2013-04-23T18:14:14.923
> 
> 标签：file, matlab, matrix

我有一个 txt 文件，文件的内容是数字行，每行有 5 个浮点数，每个数字之间用逗号分隔。例子：

1.1、12、1.42562、3.5、2.2

2.1、3.3、3、3.333、6.75

如何将文件内容读入matlab中的矩阵？到目前为止，我有这个：

```
fid = fopen('file.txt');
comma  = char(',');
A = fscanf(fid, ['%f', comma]);
fclose(fid); 
```

问题是它只给了我第一行，当我尝试编写 AI 的内容时得到这个： 1.0e+004 * some number

有人能帮助我吗？我想对于该文件，我需要循环读取它，但我不知道如何。

编辑：还有一个问题：当我向 AI 输出时得到这个：

```
A =

1.0e+004 *
4.8631         0         0         0    0.0001
4.8638   -0.0000   -0.0000    0.0004    0.0114
4.8647   -0.0000   -0.0000    0.0008    0.0109 
```

我希望文件中的值与矩阵中的值相同，我怎样才能使数字成为常规浮点数而不是像这样格式化？还是矩阵中的数字实际上是浮动的，但输出只是这样显示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T18:18:29.250

MATLAB 的内置[`dlmread`](http://www.mathworks.com/help/matlab/ref/dlmread.html)函数将是您想要完成的更简单的解决方案。

```
A = dlmread('filename.txt',',') % call dlmread and specify a comma as the delimiter 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T18:17:56.097

尝试使用`importdata`功能

```
A = importdata(`filename.txt`); 
```

它会解决你的问题。

**编辑**

备选方案 1)

```
A = dlmread('test_so.txt',','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T09:41:30.600

答案出奇的简单：

```
fid = fopen('depthMap.txt');
A = fscanf(fid, '%f');
fclose(fid); 
```

# android - 写入内部存储 - 未找到文件

> ID：16176330
> 
> 赞同：1
> 
> 时间：2013-04-23T18:14:20.223
> 
> 标签：android, file, xamarin.android, data-storage

我已经阅读了大量关于写入 android 设备内部存储的文章，我需要一些帮助来弄清楚我做错了什么。在我的应用程序的主要活动中，我从存储在内部存储中的文件中读取一个值，如下所示：

```
string ID = GetID(); 
```

GetID 如下所示：

```
string GetID()
    {
        try 
        {
            using (var i = new StreamReader (OpenFileInput (FILENAME))) 
            {
                return i.ReadToEnd();
            }
        }   
        catch 
        {
            return "";
        }
    } 
```

如果文件不存在，则返回 "" 并将用户发送到另一个活动进行注册。在那个活动中，我使用它来调用一个函数来写入内部存储，如下所示：

```
WriteID (uniqueID); 
```

WriteID 如下所示：

```
void WriteID(string uniqueID)
    {
        using (var o = new StreamWriter (
            OpenFileOutput (FILENAME, FileCreationMode.Private)))
            o.Write (uniqueID);
    } 
```

这对我来说很奇怪，如果我将这两个函数放在同一个活动中，写入文件然后调用函数从中读取，我会正确返回 uniqueID。但是，如果我停止应用程序然后重新启动它，我会抛出一个 File Not Found 异常，并且读取函数没有返回任何内容。但是，如果我创建一个新项目并使用相同的代码，一切都会按预期工作（创建并写入文件，然后重新启动数据仍然存在）。

所以我想有一些我已经更改的设置或我的原始应用程序中可能缺少的一些引用导致应用程序停止时内部存储文件被删除？

关于为什么这在我的测试应用程序中正常工作但在另一个应用程序中不能正常工作的任何想法？

# c# - 确定 foreach 中的顺序（pnl 中的面板 p）

> ID：16176333
> 
> 赞同：2
> 
> 时间：2013-04-23T18:14:26.450
> 
> 标签：c#, foreach, panel

我有一个名为 pnl 的面板，其中用于更多面板，称它们为 p。现在用户可以为每个面板 p 选择一种颜色。

然后我想确定面板 pnl 中每个面板 p 的颜色。

我使用了一个看起来像 foreach（pnl 中的面板 p）的 foreach 循环。但是，我需要从左到右知道每个面板的颜色，以便将它们放入 int 数组中。foreach 循环似乎总是以相同的顺序查看面板 p，但是我想知道在哪里可以设置此顺序。

是名字吗？（我找不到一种方法来命名它们以便它起作用）。还是通过别的什么？如何更改订单？

我希望我的问题很清楚，并期待答案

非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:17:55.337

您将不得不尝试按从左到右的顺序枚举：

```
foreach (Panel p in pnl.Controls.OfType<Panel>().OrderBy(x => x.Left)) {
  // do something with p
} 
```

# java - 在 IntelliJ IDEA 12 Ulimate 中创建 Servlet

> ID：16176339
> 
> 赞同：14
> 
> 时间：2013-04-23T18:14:43.317
> 
> 标签：java, servlets, web-applications, intellij-idea, tomcat7

有人可以向我解释如何使用 IDEA 12 Ultimate、Tomcat 7 和 servlet API 创建简单的 Web 项目吗？
我找不到任何教程:(

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T18:56:01.457

查看这些资源：

*   [IntelliJ IDEA 12.1.0 Web 帮助：Servlet](http://www.jetbrains.com/idea/webhelp/servlets.html)
*   [如何在 IntelliJ IDE 中配置服务器（大量图片）](http://confluence.jetbrains.com/display/IntelliJIDEA/Application+Servers)
*   [Java EE 7 和 GlassFish 4.0 入门（大量图片）](http://confluence.jetbrains.com/display/IntelliJIDEA/Getting+Started+with+Java+EE+7+and+GlassFish+4.0)
*   [IntelliJ 理念：将一个简单的 Java servlet（无 JSP）部署到 Tomcat 7（Stack Oveflow 上的问题）](https://stackoverflow.com/questions/9151460/intellij-idea-deploy-a-simple-java-servlet-no-jsp-to-tomcat-7)

[IntelliJ IDEA wiki](http://wiki.jetbrains.net/intellij/Main_Page)页面也有很多带图片的示例和教程。

* * *

附言

我看到你来自白俄罗斯，所以你很可能懂俄语。这是俄语的**视频教程：**

[Видеоурок IntelliJ IDEA Tomcat JSP Servlets](http://www.youtube.com/watch?v=e0y-6On2qeg)

# mysql - 最佳实践：从多个表中查找唯一 id 的行

> ID：16176342
> 
> 赞同：0
> 
> 时间：2013-04-23T18:14:55.527
> 
> 标签：mysql, database, database-design, database-schema, uniqueidentifier

我们的数据库包含 5+ 表

```
user
---------- 
user_id (PK) int NOT NULL
name varchar(50) NOT NULL

photo
--------
photo_id (PK) int NOT NULL
user_id (FK) int NOT NULL
title varchar(50) NOT NULL

comment
-------
comment_id (PK) int NOT NULL
photo_id int NOT NULL
user_id int NOT NULL
message varchar(50) NOT NULL 
```

所有主键 ID 都是唯一 ID。

所有数据都链接到[http://domain.com/](http://domain.com/) {primary_key_id}

用户访问带有 id 的链接后，该链接对所有表都是唯一的。

**我应该如何实现以查找此 id 属于哪个表？**

* * *

**解决方案 1**

```
select user_id from user where user_id = {primary_key_id}

// if not found, then move next
select photo_id from photo where photo_id = {primary_key_id}

... continue on, until we find which table this primary key belongs to. 
```

**解决方案 2**

1.  创建对象表来保存所有 uniqe id 和数据类型
2.  在所有表上为 AFTER INSERT 创建触发器，以使用其数据类型在对象表中创建行，该数据类型已插入到选定表中
3.  需要时，然后执行 select 语句以查找 id 所属的表名。

第二种解决方案将是双插入。1 将行插入到具有完整数据的实际表中，2 插入用于在我们在步骤 1 中创建的对象表中插入唯一 id 和表名。

```
select type from object_table where id = {primary_key_id} 
```

**解决方案 3**

1.  将表名 + id = 编码为新的唯一整数 - 使用 php
2.  解码 id 并获取带有表名的原始 id（即使它只是数字类型）

我不知道如何在 php 中实现这一点，但这个解决方案听起来更好！？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:00:55.380

**跨表**保持唯一性真的很重要吗？

*   如果**没有**，如果可以，只需实施解决方案 3（例如使用[URL 编码](http://en.wikipedia.org/wiki/URL_encoding)）。
*   如果**是**，则无论如何您都需要“父”表，因此 DBMS 可以强制执行唯一性。
    *   您仍然可以尝试在此基础上实施解决方案 3，
    *   *或*在此处添加*类型鉴别器*¹，您将能够（快速）知道任何给定 ID 引用了哪个表。

* * *

*¹看看[这个答案](https://stackoverflow.com/a/13984268/533120)的下半部分。这实际上是一种继承形式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:04:35.157

我不知道您在评论中提到 Facebook 是什么意思，但我会进一步解释我的评论。

您不需要跨五个数据库表的唯一 ID，每个表只需要一个。您有几个选择如何创建链接（您可以自己创建链接吗？）：

1.  使用 GET 变量：`http://domain.com/page.html?pk={id}&table={table}`
2.  使用纯 URL：`http://domain.com/{id}{table}`

根据链接的语法，您可以选择解析它的函数。例如，您可以使用以下一项或两项：

*   [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)
*   [http://www.php.net/manual/en/function.parse-url.php](http://www.php.net/manual/en/function.parse-url.php)

当您使简单模型工作时，您可以添加编码/解码/散列函数。但是你真的需要它们吗？并且在什么级别？（我在这方面没有经验，所以我现在就闭嘴。）

# ios - 对多的核心数据查询仅显示 1 条记录

> ID：16176343
> 
> 赞同：0
> 
> 时间：2013-04-23T18:14:58.580
> 
> 标签：ios, core-data, nspredicate, one-to-many

我创建了一个测试项目，以学习使用 Core Data。我所做的是，创建两个实体：

*   客户
    *   姓名
        *   关系 --> 项目（To Many 关系）
*   项目
    *   项目
        *   关系 --> 客户

我创建了 2 个 UITableViewControllers，一个显示所有客户端，一个显示与该客户端相关的所有项目。

为了显示所有相关项目，我创建了这个方法：

> ```
> -(NSArray *)relatedProjects:(Client *)client;
> {
>     NSFetchRequest *request = [[NSFetchRequest alloc]init];
> 
>     NSEntityDescription *e = [[model entitiesByName] objectForKey:@"Project"];
> 
>     [request setEntity:e];
> 
>    [request setPredicate:[NSPredicate predicateWithFormat:@"SELF IN %@", client.projects]];
> 
>     NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"project"
>                                                          ascending:YES];
>     [request setSortDescriptors:[NSArray arrayWithObject:sd]];
> 
>     NSError *error;
>     NSArray *result = [context executeFetchRequest:request error:&error];
> 
>     if (!result) {
>         [NSException raise:@"Fetch failed"
>                     format:@"Reason: %@", [error localizedDescription]];
>     }
>     relatedProjects = [[NSMutableArray alloc] initWithArray:result];
> 
> //return result;
> return relatedProjects; 
> ```
> 
> }

唯一的问题是只会显示 1 个项目而不是所有相关项目。如果我省略这一行，则显示所有项目，但项目与客户之间没有任何关系。

> ```
>  [request setPredicate:[NSPredicate predicateWithFormat:@"SELF IN %@", client.projects]]; 
> ```

（对于我的测试用例，我创建了 1 个带有多个项目的客户端，所以我知道它应该显示超过 1 个项目）

所以我被困在如何解决这个问题上，因为有几种可能导致这不起作用：

1.  谓词不行
2.  客户和项目之间的关系不好
3.  ETC

因此，如果有人可以给我一些指示，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:40:29.240

你正在做很多工作。如果您在模型中对关系进行了建模，则 Client 已经拥有相关项目的列表。它将被命名为与关系相同的名称。当您获取 Client 对象时，项目列表将是一个“错误”，但一旦您访问它

```
NSArray* allProjects = client.projects; 
```

Core Data 会意识到它还没有被填充，然后去为你获取列表。

快速总结：

```
-(NSArray *)relatedProjects:(Client *)client;
{
    return client.projects;
} 
```

完毕。

这实际上就是您使用核心数据而不是直接使用 sql 的原因（以及许多其他很酷的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:06:58.997

假设：
您在Client<<-->>Project之间存在多对多关系（您应该在编辑器中将两者的关系标记`projects`为`clients`to **-many**）。
您已正确设置反向关系（在模型编辑器中）。
您正在正确地将对象添加到关系中。

尝试将谓词更改为：
`[NSPredicate predicateWithFormat:@"%@ IN clients",client.objectID]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:28:07.163

我更喜欢创建 Clint 模型

客户 -

```
# clientId

# clientName

# createProjects //relation to project 
```

项目

```
# projectId

# project

# createdBy   // relation inverse to createProjects 
```

当您获取数据时，首先获取客户端数据并使用数据加载 tableView。一旦选择了特定的客户端，就获取 projectDetails（使用关系）并加载 tableView。

client.createdProjects 将为您提供 Project 对象数组。

# html - html 中禁用的文本框使用什么颜色？

> ID：16176346
> 
> 赞同：13
> 
> 时间：2013-04-23T18:15:00.440
> 
> 标签：html, css, colors

我的问题说明了一切。我对在 HTML 使用中禁用文本框的文本颜色和背景颜色感兴趣（也欢迎使用禁用文本框的整个 CSS）。我需要这个，所以我会将一些只读文本框的颜色设置与我的 html 页面中禁用的文本框的颜色相匹配（不希望它们突出）。

PS 我需要只读文本框，这样我就可以用它们捕获事件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T18:17:55.950

背景颜色是`rgb(235, 235, 228);`或`#EBEBE4`以十六进制表示。

至少这是 chrome 中的值（使用调试器工具检查）。此值在其他浏览器中可能不同

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-23T18:20:04.897

他们是你设置的任何东西。只有 IE9 和更早的版本对禁用元素有一个固定的、不可更改的设置（奇怪的是，这是你获得任何类型的唯一方法`text-shadow`......）

你可以从字面上做到这一点：

```
:disabled {background-color:pink; color:blue} 
```

并在禁用它们时获得泡泡糖色的文本区域！

我想说的是您可以将样式设置为您想要的任何样式，因此您可以这样做：

```
:disabled, :read-only, [disabled], [readonly] {background:#cccccc; color:#ffffff} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-11T22:25:36.240

我实现了以下内容，以使任何只读文本框或文本区域（在我的情况下有用）在只读时显示为禁用。

```
<style>
input:read-only, 
textarea:read-only,
[contenteditable]:read-only {
  cursor: not-allowed;
  background-color: #EBEBE4 !important;
  color: #C6C6C6;
} 
</style> 
```

或这个：

```
<style>
input:read-only, 
textarea:read-only,
[contenteditable]:read-only {
  pointer-events: none;
  background-color: #EBEBE4 !important;
  color: #C6C6C6;
}
</style> 
```

希望这可以帮助某人！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-17T23:27:13.100

这取决于浏览器。在 Chrome 中，它是系统颜色“graytext”，因此您无需记住十六进制代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T18:17:22.547

我的 chrome 具有以下默认值：

```
background-color: rgb(235, 235, 228);
color: rgb(84, 84, 84); 
```

我想它可以随着浏览器而改变吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-15T08:41:08.637

这是它在 Chrome 中的呈现方式：

```
textarea:disabled {
  cursor: default; 
  background-color: rgba(239, 239, 239, 0.3);
  color: rgb(84, 84, 84);
  border-color: rgba(118, 118, 118, 0.3);
} 
```

# ruby - 使用 https 时字符串的未定义方法“每个”

> ID：16176351
> 
> 赞同：1
> 
> 时间：2013-04-23T18:15:23.943
> 
> 标签：ruby, ruby-on-rails-3, rack

在我的应用程序暂存环境中，当我尝试通过 https 访问页面时出现错误，该网页可以正确使用 http。我得到的错误是：

```
 undefined method `each' for #<String:0x00000009371f28> 
```

失败的地方在线上的宝石架上：

```
body.each { |part| parts << part } 
```

在

```
def digest_body(body)
    parts = []
    body.each { |part| parts << part }
    string_body = parts.join
    digest = Digest::MD5.hexdigest(string_body) unless string_body.empty?
    [digest, parts]
end 
```

看来，他无法处理通过的身体。我检查了正文，它是一个字符串，其中包含我页面的所有 html 代码。这个参数的数据类型应该是一个数组。

```
 "<!DOCTYPE html>\n<html class='no-js' lang='fr' xml:lang='fr'>\n<head>\n<meta charset='utf-8'>\n<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>\n<meta content='width=device-width' name='viewport'>\n<title>Bienvenue sur Zurban Culture | Admin Panel | Zurban Culture</title>\n<meta content=\"authenticity_token\" name=\"csrf-param\" />\n<meta content=\"fEVrJPyUwdf4FZ2GSWW/p01SrByXlJpq+xSbAXOkxBg=\" name=\"csrf-token\" />\n<!--[if lt IE 9]>\n<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>\n<![endif]-->\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\" type=\"text/javascript\"></script>\n<link href=\"/assets/admin/admin-6033541466a41863e188a9fa9e0ea9bd.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\" />\n<link href=\"/assets/admin/print-088f5bc50dba980c42676157c724ed0a.css\" media=\"print\" rel=\"stylesheet\" type=\"text/css\" />\n\n<script src='https://www.google.com/jsapi' type='text/javascript'></script>\n\n<link href='/favicon.ico' rel='shortcut icon'>\n</head>\n<body data-offset='50' data-spy='scroll' id='admin_show'>\n<h1 class='hidden print'>\nZurban Culture\n</h1>\n<div class='navbar navbar-fixed-top noPrint'>\n<div class='navbar-inner'>\n<div class='container-fluid'>\n<a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>\n<span class='icon-bar'></span>\n<span class='icon-bar'></span>\n<span class='icon-bar'></span>\n</a>\n<a class='brand' href='/admin'>Zurban Culture</a>\n<div class='nav-collapse'>\n<ul class='nav' id='tabbedInterface'>\n<li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Produits<b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"https://beta.jeansattitude.fr/admin/products\">Tous produits (4064)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/products/incomplete\">Brouillons (156)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/products/deleted\">Effacés (274)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/purchases\">Bons</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/product_types\">Familles (24)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/products/maintenance\">Maintenance</a></li>\n</ul>\n</li><li class=\"brands_tab\"><a href=\"https://beta.jeansattitude.fr/admin/brands\">Marques</a></li>\n<li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Ventes & Marketing<b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"https://beta.jeansattitude.fr/admin/sales\">En vente (3905)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/sales/incomplete\">Brouillons (142)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/sales/new\">Planning (0)</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/sales/planned\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.menu.sales.planned\">Planned</span></a></li>\n<li><a href=\"/admin/discounts\">Codes promotionnels (27)</a></li>\n<li><a href=\"/admin/sales/dashboard\">Page d&#x27;accueil</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/campaigns\">Collections</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/gift_cards/active_not_used\">Chèques cadeaux</a></li>\n<li><a href=\"https://beta.jeansattitude.fr/admin/cheques\">Chèques</a></li>\n</ul>\n</li><li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Commandes<b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"/admin/orders/pending\">En attente (0)</a></li>\n<li><a href=\"/admin/orders/fraud_review\">A vérifier (3)</a></li>\n<li><a href=\"/admin/orders/paid\">Payées (7)</a></li>\n<li><a href=\"/admin/orders/processing\">Traitement (0)</a></li>\n<li><a href=\"/admin/orders/shipped\">Envoyées (307)</a></li>\n<li><a href=\"/admin/orders/completed\">Complètée (9205)</a></li>\n<li><a href=\"/admin/orders/unavailable_hold\">Indisponible (1)</a></li>\n<li><a href=\"/admin/orders/cancelled\">Annulées (8736)</a></li>\n<li><a href=\"/admin/orders/fraud\">Fraudes (12)</a></li>\n<li><a href=\"/admin/order_transactions\">Tentatives de paiements</a></li>\n</ul>\n</li><li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Retours<b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"/admin/returns/pending\">En attente (77)</a></li>\n<li><a href=\"/admin/returns/received\">Réceptionné (23)</a></li>\n<li><a href=\"/admin/returns/completed\">Remboursé (1115)</a></li>\n<li><a href=\"/admin/returns/cancelled\">Procédure annulée (4)</a></li>\n</ul>\n</li><li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Avis <b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"/admin/reviews/needs_approvement\">À approuver (0)</a></li>\n<li><a href=\"/admin/reviews/approved\">Approuvés (3)</a></li>\n<li><a href=\"/admin/reviews/refused\">Refusés (0)</a></li>\n<li><a href=\"/admin/reviews/deleted\">Effacés (0)</a></li>\n</ul>\n</li><li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Utilisateurs<b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li><a href=\"/admin/users\">Utilisateurs</a></li>\n<li><a href=\"/admin/users/deleted\">Utilisateurs effacés</a></li>\n<li><a href=\"/admin/invitations\">Invitations</a></li>\n</ul>\n</li><li class=\"help_sections_tab\"><a href=\"https://beta.jeansattitude.fr/admin/help_sections\">Sections d&#x27;aide</a></li>\n<li class=\"dropdown\"><a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"><img alt=\"Icon_stats\" src=\"/assets/admin/icon_stats-3905dbfb6e4ba900e54d7c49d67f5c49.png\" /><b class=\"caret\"></b></a><ul class='dropdown-menu'>\n<li>\n<a href=\"http://stats.zurbanculture.fr\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.overview\">Overview</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/products\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.products\">Products</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/orders\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.orders\">Orders</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/returns\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.returns\">Returns</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/users\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.users\">Users</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/sales_report\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.sales_report\">Sales Report</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/stock_by_brand\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.stock_report\">Stock Report</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/purchases\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.purchase_report\">Purchase Report</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/statistics/general\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.sales_history\">Sales History</span></a>\n</li>\n<li>\n<a href=\"http://stats.zurbanculture.fr/favorites\"><span class=\"translation_missing\" title=\"translation missing: fr.admin.submenu.favorites\">Favorites</span></a>\n</li>\n</ul>\n</li></ul>\n\n<ul class='nav pull-right'>\n<li class='searchbox'>\n<form accept-charset=\"UTF-8\" action=\"/admin/search\" class=\"navbar-search pull-right\" method=\"get\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /></div>\n<input class=\"search-query span2\" id=\"query\" name=\"query\" size=\"20\" type=\"text\" value=\"Rechercher\" />\n\n</form>\n\n</li>\n<li class='dropdown'>\n<a class='dropdown-toggle' data-toggle='dropdown' href='#'>\n<i class='icon-user icon-white'></i>\n</a>\n<ul class='dropdown-menu'>\n<li>\n<a href=\"/\">Zurban Culture</a>\n</li>\n<li>\n<a href=\"/logout\">Déconnexion</a>\n</li>\n</ul>\n</li>\n</ul>\n\n</div>\n</div>\n</div>\n</div>\n<div class='container-fluid noPrint'>\n<div class='subnav'>\n<ul class='nav nav-pills'>\n<li class=\"active\"><a href=\"/admin\">Statistique rapides</a></li>\n<li><a href=\"/admin/maintenances\">Logs</a></li>\n</ul>\n\n</div>\n<div class='notices_wrapper noPrint'>\n<div class='row-fluid'>\n<div class='span12'>\n\n</div>\n</div>\n</div>\n</div>\n<div class='container-fluid'>\n<div class='row-fluid'>\n<div class='span12'>\n<div class=\"page-header\">\n <h1>Bienvenue sur Zurban Culture</h1> \n</div>\n\n\n <form accept-charset=\"UTF-8\" action=\"https://beta.jeansattitude.fr/admin\" class=\"well\" method=\"get\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /></div>\n <input class=\"datepicker onChangeSubmit\" id=\"start_date\" length=\"8\" name=\"start_date\" placeholder=\"Start Date\" type=\"text\" value=\"2013-04-01\" />\n <input class=\"datepicker onChangeSubmit\" id=\"end_date\" length=\"8\" name=\"end_date\" placeholder=\"End Date\" type=\"text\" value=\"2013-04-23\" />\n <input type=\"submit\" class=\"btn\">\n </form>\n <div class=\"row-fluid\">\n <div class=\"section dashboard span6\" id=\"orders_section\">\n <div class=\"well\">\n <h2 class=\"sectionHeader\">Montant des ventes cumulés</h2>\n <div id=\"ordersChart\" class=\"graph\" style=\"width: 95%; height: 300px; margin: 0; padding: 0\"></div>\n </div>\n </div>\n <div class=\"section dashboard span6\" id=\"revenue_section\">\n <div class=\"well\">\n <h2 class=\"sectionHeader\">Montant des ventes</h2>\n <div id=\"revenueChart\" class=\"graph\" style=\"width: 95%; height: 300px; margin: 0; padding: 0\"></div>\n </div>\n </div>\n </div>\n\n <div class=\"row-fluid\">\n <div class=\"section dashboard span6\" id=\"orders_shipped_section\">\n <div class=\"well\">\n <h2 class=\"sectionHeader\">Commandes Expédiées</h2>\n <div id=\"shippedOrdersChart\" class=\"graph\" style=\"width: 95%; height: 300px; margin: 0; padding: 0\"></div>\n </div>\n </div>\n\n <div class=\"section dashboard span6\" id=\"users_section\">\n <div class=\"well\">\n <h2 class=\"sectionHeader\">Nouveaux utilisateurs confirmés</h2>\n <div id=\"usersChart\" class=\"graph\" style=\"width: 95%; height: 300px; margin: 0; padding: 0\"></div>\n </div>\n </div>\n </div>\n\n\n <div id=\"revenueChart\"></div>\n<script type=\"text/javascript\" src=\"http://www.google.com/jsapi\"></script>\n<script type=\"text/javascript\">\nvar rgviz_revenueChart = null;\nvar rgviz_revenueChart_data = null;\nfunction rgviz_draw_revenueChart() {\n var query = new google.visualization.Query('http://stats.zurbanculture.fr/orders/datasource');\n var q = 'select toDate(`paid_at`), `old_members`, `new_members` where ((`state` = \"paid\" or `state` = \"processing\" or `state` = \"shipped\" or `state` = \"completed\") and `paid_at` >= \"2013-04-01\" and `paid_at` <= \"2013-04-24\") group by toDate(`paid_at`) order by toDate(`paid_at`) asc label toDate(`paid_at`) \\'Date\\', `old_members` \\'Ventes Anciens Utilisateurs\\', `new_members` \\'Ventes Nouveaux Utilisateurs\\'';\n query.setQuery(q);\n query.send(function(response) {\n rgviz_revenueChart = new google.visualization.ColumnChart(document.getElementById('revenueChart'));\n rgviz_revenueChart_data = response.getDataTable();\n rgviz_revenueChart_options = {\"is3D\":true,\"width\":\"100%\",\"height\":\"80%\",\"legend\":{\"position\":\"bottom\",\"textStyle\":{\"fontSize\":12}},\"chartArea\":{\"left\":70,\"top\":30,\"width\":\"85%\",\"height\":\"75%\"},\"isStacked\":true};\n rgviz_revenueChart.draw(rgviz_revenueChart_data, rgviz_revenueChart_options);\n});\n}\ngoogle.load(\"visualization\", \"1\", {'packages':['corechart']});\ngoogle.setOnLoadCallback(rgviz_draw_revenueChart);\n</script>\n\n\n <div id=\"ordersChart\"></div>\n<script type=\"text/javascript\">\nvar rgviz_ordersChart = null;\nvar rgviz_ordersChart_data = null;\nfunction rgviz_draw_ordersChart() {\n var query = new google.visualization.Query('http://stats.zurbanculture.fr/orders/datasource');\n var q = 'select toDate(`paid_at`), sum(`total`) where ((`state` = \"paid\" or `state` = \"processing\" or `state` = \"shipped\" or `state` = \"completed\") and `paid_at` >= \"2013-04-01\" and `paid_at` <= \"2013-04-24\") group by toDate(`paid_at`) order by toDate(`paid_at`) asc label toDate(`paid_at`) \\'Date\\', sum(`total`) \\'Montant Ventes\\'';\n query.setQuery(q);\n query.send(function(response) {\n rgviz_ordersChart = new google.visualization.ColumnChart(document.getElementById('ordersChart'));\n rgviz_ordersChart_data = response.getDataTable();\n rgviz_ordersChart_options = {\"is3D\":true,\"width\":\"100%\",\"height\":\"80%\",\"legend\":\"none\",\"chartArea\":{\"left\":70,\"top\":30,\"width\":\"85%\",\"height\":\"75%\"}};\n rgviz_ordersChart.draw(rgviz_ordersChart_data, rgviz_ordersChart_options);\n});\n}\ngoogle.setOnLoadCallback(rgviz_draw_ordersChart);\n</script>\n\n <div id=\"shippedOrdersChart\"></div>\n<script type=\"text/javascript\">\nvar rgviz_shippedOrdersChart = null;\nvar rgviz_shippedOrdersChart_data = null;\nfunction rgviz_draw_shippedOrdersChart() {\n var query = new google.visualization.Query('http://stats.zurbanculture.fr/orders/datasource');\n var q = 'select toDate(`shipped_at`), count(`id`) where ((`state` = \"paid\" or `state` = \"processing\" or `state` = \"shipped\" or `state` = \"completed\") and `shipped_at` >= \"2013-04-01\" and `paid_at` <= \"2013-04-24\") group by toDate(`shipped_at`) order by toDate(`shipped_at`) asc label toDate(`shipped_at`) \\'Date\\', count(`id`) \\'Commandes Expédiées\\'';\n query.setQuery(q);\n query.send(function(response) {\n rgviz_shippedOrdersChart = new google.visualization.AreaChart(document.getElementById('shippedOrdersChart'));\n rgviz_shippedOrdersChart_data = response.getDataTable();\n rgviz_shippedOrdersChart_options = {\"is3D\":true,\"width\":\"100%\",\"height\":\"80%\",\"legend\":\"none\",\"chartArea\":{\"left\":70,\"top\":30,\"width\":\"85%\",\"height\":\"75%\"}};\n rgviz_shippedOrdersChart.draw(rgviz_shippedOrdersChart_data, rgviz_shippedOrdersChart_options);\n});\n}\ngoogle.setOnLoadCallback(rgviz_draw_shippedOrdersChart);\n</script>\n\n <div id=\"usersChart\"></div>\n<script type=\"text/javascript\">\nvar rgviz_usersChart = null;\nvar rgviz_usersChart_data = null;\nfunction rgviz_draw_usersChart() {\n var query = new google.visualization.Query('http://stats.zurbanculture.fr/users/datasource');\n var q = 'select concat(month(`created_at`), \" \", year(`created_at`)), `seo`, `organique` where (`created_at` >= \"2012-04-23\" and `created_at` <= \"2013-04-24\" and `confirmed` = 1) group by concat(month(`created_at`), \" \", year(`created_at`)) order by `created_at` asc label concat(month(`created_at`), \" \", year(`created_at`)) \\'Month\\', `seo` \\'SEO\\', `organique` \\'Organique\\'';\n query.setQuery(q);\n query.send(function(response) {\n rgviz_usersChart = new google.visualization.LineChart(document.getElementById('usersChart'));\n rgviz_usersChart_data = response.getDataTable();\n rgviz_usersChart_options = {\"is3D\":true,\"width\":\"100%\",\"height\":\"80%\",\"legend\":{\"position\":\"bottom\",\"textStyle\":{\"fontSize\":12}},\"chartArea\":{\"left\":70,\"top\":30,\"width\":\"85%\",\"height\":\"75%\"}};\n rgviz_usersChart.draw(rgviz_usersChart_data, rgviz_usersChart_options);\n});\n}\ngoogle.setOnLoadCallback(rgviz_draw_usersChart);\n</script>\n\n\n</div>\n</div>\n<footer class='footer'>\n<p>Zurban Culture v2.0 - Rails 3.2.13 (staging) / Ruby 1.9.3 patchlevel 327 2012-11-10 - /srv/www/jeansattitude/releases/20130423082652</p>\n</footer>\n</div>\n<script src=\"/assets/admin-ac2e83dde06736c3279cc5c973afd46a.js\" type=\"text/javascript\"></script>\n\n</body>\n</html>\n" 
```

有人知道为什么请求失败并且正文没有像它需要的那样包含和数组？在这里您可以看到我的跟踪路由，我不清楚是什么导致了问题，因为我没有在其中看到我的应用程序的任何痕迹，并且我没有从我的应用程序向该函数传递任何内容。

```
NoMethodError (undefined method `each' for #<String:0x00000009371f28>):
  rack (1.4.5) lib/rack/etag.rb:59:in `digest_body'
  rack (1.4.5) lib/rack/etag.rb:26:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__965187821369700966__call__4271865895200548975__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  airbrake (3.1.11) lib/airbrake/rails/middleware.rb:13:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  airbrake (3.1.11) lib/airbrake/user_informer.rb:16:in `_call'
  airbrake (3.1.11) lib/airbrake/user_informer.rb:12:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  railties (3.2.13) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (3.0.19) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.19) lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  passenger (3.0.19) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.19) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  passenger (3.0.19) lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  passenger (3.0.19) lib/phusion_passenger/utils.rb:470:in `safe_fork'
  passenger (3.0.19) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  passenger (3.0.19) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.19) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.19) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.19) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  passenger (3.0.19) lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  passenger (3.0.19) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.19) lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  passenger (3.0.19) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  passenger (3.0.19) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.19) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  passenger (3.0.19) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  passenger (3.0.19) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.19) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.19) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.19) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

另请参阅我在 rack gem 上打开的问题，但这似乎不是他们的问题。[https://github.com/rack/rack/issues/548](https://github.com/rack/rack/issues/548)

解决方案：

发生这种情况是因为自定义中间件将主体作为字符串返回，我将这个主体包装在一个数组中，问题就解决了！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:27:36.137

你说：

> 我检查了正文，它是一个字符串，其中包含我页面的所有 html 代码。这个参数的数据类型应该是一个数组。

`body`参数从哪里来？你期望这个数组的元素是什么？看起来这*可能*是您想要的：

```
def digest_body(body)
    parts = body.split("\n")
    string_body = parts.join
    digest = Digest::MD5.hexdigest(string_body) unless string_body.empty?
    [digest, parts]
end 
```

# javascript - Chrome：潜在的 onmousemove 错误

> ID：16176356
> 
> 赞同：0
> 
> 时间：2013-04-23T18:15:36.400
> 
> 标签：javascript, google-chrome, dom

我遇到了一个可能是 Chrome 中的错误的问题，但我希望一些更有经验的开发人员可以看看这个问题。我正在使用youngpup（[https://github.com/aboodman/dom-drag/blob/gh-pages/dom-drag.js](https://github.com/aboodman/dom-drag/blob/gh-pages/dom-drag.js)）的dom-drag JavaScript库，并注意到它在Chrome中无法正常运行。错误发生在第 86 行。

出于某种原因，即使鼠标没有移动，Chrome 也会注册 document.onmousemove 事件。我在其他所有浏览器上都试过了，Chrome 是唯一一个导致用户单击时触发事件的浏览器。这会被认为是一个错误吗？如果是这样，有人可以推荐一个解决方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-06T09:00:01.617

我使用的是 drag.js，我遇到了同样的问题。我可以从 PlantTheldea 2 年前提供的链接中看到，chrome 并没有修复它。在我这边，我的 DOM 中有可拖动的项目，它们应该接受点击事件处理程序。但是如果鼠标没有移动，则**在单击事件期间触发 onmousemove 事件。**这个错误发生在 Chrome 上。

所以我想其他人可能会面临同样的问题。以下是我使用 drag.js 解决的方法：

1 - 转到您的 onmousemove 处理程序

2 - 检查 X 或 Y 是否有移动。如果有任何移动，则返回 true。

我编辑的 drag.js 处理程序的示例：

```
// onmousemove handler for the document level
// activated after left mouse button is pressed on draggable element
handler_onmousemove = function (e) {
        if(e.movementX === 0 && e.movementY == 0){
            // No movement detected
            return true; // We can continue with other handlers as click
        } 
```

希望它可以提供帮助。

# asp.net-mvc - 使用 ASP.NET MVC 实现问题对表行进行拖放重新排序

> ID：16176358
> 
> 赞同：3
> 
> 时间：2013-04-23T18:15:54.823
> 
> 标签：asp.net-mvc, jquery-ui, asp.net-mvc-4

我有一个 ASP.NET MVC 4 Web 应用程序。在网页上，我有一个 HTML 表格，其中显示了许多项目。

我希望能够为项目表实现拖放重新排序，并将其保存回数据模型。

我已经查看并尝试了几种不同的方法来执行此操作，使用 JQuery UI 和其他一些插件，但我还没有成功地实现该功能。

我看过[这个](http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/)例子，但是我的表在实现它之后并没有改变它，如下所示：

```
 <script type="text/javascript">
        $(document).ready(function()
        {
            $('#clueTable tbody').sortable().disableSelection();
        });
    </script> 
```

我有所有必要的 javascript：

```
<script type="text/javascript" src="~/Scripts/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.10.2.min.js"></script> 
```

我不会发布整个表格，但它看起来像这样：

```
 <table id="clueTable" class="grid">
        <thead>
            <tr>
                <th>Clue #</th>
                <th>Location</th>
                <th>Quiz Clue?</th>
                <th>Actions</th>
            </tr>
        </thead>

        @for (int i = 0; i < Model.Clues.Count; i++)
        {
            <tbody>
                <tr>
                    <td>Number</td>
                    <td>Things</td>
                    <td>Yes</td>
                    <td>Stuff</td>
                </tr>
            </tbody>
        }
    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:44:59.820

重复的`tbody`标签是你的问题。

作品：

[http://jsfiddle.net/vR9UW/](http://jsfiddle.net/vR9UW/)

不起作用：

[http://jsfiddle.net/vR9UW/1/](http://jsfiddle.net/vR9UW/1/)

# wolfram-mathematica - Mathematica 中的求和

> ID：16176369
> 
> 赞同：0
> 
> 时间：2013-04-23T18:16:26.153
> 
> 标签：wolfram-mathematica, sum

我试图理解我发现的一段代码，但我被困在这个总结上。这是 n 上更大的 do 循环的一部分。

```
UnderoverscriptBox[\(\[Sum]\), \(m = \(-10\)\), \(10\)]\(\(eigenfunctionsort[n, j]\)[\([m + 11]\)] Exp[I*2*\[Pi]*m*x/dp]\)\),{j,1,21}] 
```

我主要不明白的是 [m+11] 发生了什么。是在总和中的每一步乘以特征函数排序，还是只是在总和的每一步将 11 加到 m 上？

谢谢本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:43:25.383

在我看来，您的表达式好像包含以下子表达式

```
eigenfunctionsort[n,j][[m+11]] 
```

看起来好像：

*   调用`eigenfunctionsort`带有参数的函数`n`，并且`j`；和
*   该调用返回一个值列表，表达式`[[m+11]]`选择列表的第*m+11 个*元素；双方括号是 Mathematica`Part`函数的简写。鉴于表达式的`m`范围将超过.`-10..10``m+11``1..21`

# bash - 在 shell 中计数查询

> ID：16176371
> 
> 赞同：0
> 
> 时间：2013-04-23T18:16:26.963
> 
> 标签：bash, shell, debian

我有一个包含许多条目的文件，例如

```
asd 13
dsa 14
ert 10
ghj 78
... and many entries like this 
```

我们可以认为它是密钥和计数对。关键条目是不同的。

我需要前 6 个键和它们的数量。

我做了什么：我不知道如何根据计数对其进行排序。如果我能做到这一点，我可以打印前 6 名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:22:22.507

```
sort -nrk2 | head -6 
```

*   数字排序
*   反向排序
*   按字段 2 排序
*   获得前 6 名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:26:22.070

```
cat c.txt|awk '{print $2" "$1}'|sort -nr|head -6 
```

假设文件名为 c.txt

# haskell - Haskell tr ie 中的 Spaceleak

> ID：16176372
> 
> 赞同：2
> 
> 时间：2013-04-23T18:16:31.590
> 
> 标签：haskell, profiling, trie

我在 Haskell 中编写了一个 trie 实现并遇到了一些性能问题。我根据[http://book.realworldhaskell.org/read/profiling-and-optimization.html](http://book.realworldhaskell.org/read/profiling-and-optimization.html)对我的代码进行了相应的分析，并且可以确定问题。这是`insertWith`我尝试的方法：

```
import qualified Data.Map.Strict as M
-- i have also tried Data.Map.Lazy

data Trie k a = Trie { value  :: !(Maybe a)
                     , childs :: !(Map.Map k (Trie k a))
                     }

empty :: Trie a k
empty = Trie Nothing Map.empty

insertWith :: Ord k => (a -> a -> a) -> [k] -> a -> Trie k a -> Trie k a
insertWith f [] a t@(Trie Nothing  _) = t { value = Just a }
insertWith f [] a t@(Trie (Just b) _) = t { value = Just $ f a b }
insertWith f (k:ks) a t = t { childs = m }
    where
        recurse = insertWith f ks a
        m = Map.insertWith (\_ child -> recurse child) k (recurse empty) (childs t) 
```

我的分析代码：

```
import qualified MyTrie as T
main = do
    let nums = zipWith (\a b -> (show a, b)) [0..100000] [0..]
        trie = foldl' (flip $ uncurry $ T.insertWith (+)) T.empty nums
    putStrLn $ show $ T.lookup "100" trie 
```

分析结果：

```
 CAF:main4                Main                    113           0    0.0    0.0    55.2   38.3
  main                    Main                    126           0    2.6    0.0    55.2   38.3
   main.trie              Main                    127           0   12.6    2.7    52.6   38.3
    childs                Text.NGram.Trie         137     1000001    0.0    0.0     0.0    0.0
    insertWith            Text.NGram.Trie         135     1123337    3.2    6.2    40.1   35.6
     insertWith.recurse   Text.NGram.Trie         140      123336    0.4    0.0     0.4    0.0
     insertWith.m         Text.NGram.Trie         138     1123334   31.4   29.1    36.4   29.4
      insertWith.recurse  Text.NGram.Trie         142           0    0.0    0.0     0.0    0.0
      insertWith.m.\      Text.NGram.Trie         139      123333    1.5    0.0     5.0    0.3
       insertWith.recurse Text.NGram.Trie         141           0    3.5    0.3     3.5    0.3
        childs            Text.NGram.Trie         143      123333    0.0    0.0     0.0    0.0 
```

和

```
 1,403,625,328 bytes allocated in the heap
   1,699,102,256 bytes copied during GC
     393,716,888 bytes maximum residency (11 sample(s))
       4,565,856 bytes maximum slop
             771 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0      2673 colls,     0 par    0.97s    0.98s     0.0004s    0.0027s
  Gen  1        11 colls,     0 par    1.41s    1.41s     0.1285s    0.6767s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.69s  (  0.70s elapsed)
  GC      time    2.38s  (  2.39s elapsed)
  RP      time    0.00s  (  0.00s elapsed)
  PROF    time    0.00s  (  0.00s elapsed)
  EXIT    time    0.06s  (  0.06s elapsed)
  Total   time    3.14s  (  3.15s elapsed)

  %GC     time      75.8%  (75.9% elapsed)

  Alloc rate    2,021,450,981 bytes per MUT second

  Productivity  24.2% of total user, 24.2% of total elapsed 
```

ghc 版本：7.6.2

有人知道如何使 insertWith 方法表现得更好吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:55:16.297

在

```
insertWith f [] a t@(Trie Nothing  _) = t { value = Just a }
insertWith f [] a t@(Trie (Just b) _) = t { value = Just $ f a b } 
```

`a`并且`f a b`未经评估而被存储。尝试

```
insertWith f [] a t@(Trie Nothing  _) = a `seq` t { value = Just a }
insertWith f [] a t@(Trie (Just b) _) = t { value = Just $! f a b } 
```

# java - 如果它撞到另一个盒子，则停止盒子移动

> ID：16176374
> 
> 赞同：0
> 
> 时间：2013-04-23T18:16:34.743
> 
> 标签：java, user-interface

我正在尝试编写一个允许用户移动框的 GUI。屏幕上还有另一个框，称为“块”，不允许该框相交。我的盒子移动得很好，但我不知道如何阻止两者相交并将盒子的绘图保持在屏幕上。现在，当它碰到方块时，盒子就会消失（我知道它为什么会这样做，我只是不知道如何修复它）。

X 和 Y 是鼠标左右键检测到的移动。

```
box = new Rectangle2D.Double(0 + X, 0 + Y, 200, 50);
block = new Rectangle2D.Double(300, 300, 50, 50);

if (box.intersects(block)) {
        hit = true;

    } else {
        hit = false;
    }    

Graphics2D g2 = (Graphics2D) g;
    g2.setPaint(Color.red);
    g2.draw(block);
    if (model.hit()) {
        g2.setPaint(Color.black);
        g2.drawString("WHOA THERE", 20, 50);
    } else {
    g2.setPaint(Color.blue);
    g2.fill(box); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:20:36.363

我有点不清楚你在问什么。如果您要问如何在盒子碰到块时绘制盒子，那么问题就是您的 if/else 语句。在 if 情况下，它会跳过绘图块。删除 else 以绘制框，即使它命中。

如果您要问如何防止两个框相交，那很容易。如果您检测到它们相交，请移动移动框，使其刚好位于块外。因此，如果块位于 x = 10，则设置移动框 ( `model`?)，使其位于 x = 11。HTH

# java - EJB 事务回滚后自动重试

> ID：16176375
> 
> 赞同：3
> 
> 时间：2013-04-23T18:16:38.370
> 
> 标签：java, jakarta-ee, jpa, ejb, weblogic

基本上，我有一个 JMS 队列和一个 MDB 来从 JMS 队列中收集消息，对它们进行一些处理，然后通过 JPA 将消息持久化到数据库中。我标记了负责将消息持久化到 DB 中的方法，以便在新事务中启动：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void create(T entity)
{
    try
    {
        getEntityManager().persist(entity);
    }
    catch(Exception e)
    {
        throw new RuntimeException("DB Exception");
    }
} 
```

如果事务回滚，是否会自动退出，直到事务完成？如果没有，如何启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:51:20.973

如果异常传播到`MDB`，则事务将不会提交，消息将不会被确认为已接收并且将被重试。从 EJB 3.1 规范：

> 消息确认由容器自动处理。如果消息驱动 bean 使用容器管理的事务划分，消息确认将作为事务提交的一部分自动处理。

我不熟悉，`Weblogic`但应该有一个 JMS 队列参数，用于设置重试次数、重试间隔等，直到消息被丢弃或放入未传递的队列。

但通常最好在 bean 中捕获异常，`MDB`因为`RuntimeException`从结果中抛出`MDB`的 bean 被容器丢弃。从 EJB 3.1 规范：

> 一般来说，消息驱动的 bean 不应该抛出 RuntimeExceptions。
> 
> 不是从消息驱动 bean 类的任何方法（包括消息侦听器方法和容器调用的回调）抛出的不是应用程序异常的 RuntimeException 会导致转换到“不存在”状态。

例如，最好有：

```
public class MyMDB implements MessageListener {

  @Resource
  private MessageDrivenContext context;

  public void onMessage() {
     try {
        //some other processing
        someService.create(entity);
     }
     catch(Exception e) {
        //mark the message as undelivered
        context.setRollbackOnly();
     }
  }
} 
```

# javascript - 为什么 $().draggable({revert: true}) 在 if 语句期间没有响应？

> ID：16176377
> 
> 赞同：0
> 
> 时间：2013-04-23T18:16:51.060
> 
> 标签：javascript, jquery, html

使用 jQuery，我想将文本 div 拖动到任何地方。然后，如果用户决定要将 div 文本移回原始位置，他们将不得不选择“返回”选项，然后 div 文本将移动到原始位置。但是，这根本不起作用，结果要么仍然存在，要么文本消失。如果没有 if 语句，任何一种可拖动的方法都有效。我认为这与 if 语句有关，但我不确定，请帮忙。

这是我的 jQuery/javascript 代码，

```
var selected = '2 line';
    $(document).ready(function(){
      $("#options").change(function(){ // function that do option selection
            selected = $("option:selected", this).val();

        });

        if(selected == 'return position')
        {
               $( "#subtitle" ).draggable({revert: true})
        }else
        {
            $( "#subtitle" ).draggable({revert: false})
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:19:00.337

该选项被设置在`change`事件的一边。您不是要在该回调中设置它吗？

# javascript - mongoosejs 或带有 objectid 的语句

> ID：16176379
> 
> 赞同：0
> 
> 时间：2013-04-23T18:16:55.213
> 
> 标签：javascript, node.js, express, mongoose

我可以使用 mongoose.js 使用 OR 语句“遍历”一个 ObjectID 吗？

一个例子是这样的：

```
var confName = 'something';
finding = finding.or([
            { 'home_team.conference.name': confName },
            { 'away_team.conference.name': confName }
        ]);
finding.exec(function(err, models) {
     ... 
```

`home_team`并且`away_team`都是 ObjectID 指向具有嵌入式文档的团队模式`conference`。

现在这对我不起作用，我不确定这是不可能的，还是我做的不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:51:25.657

不，你不能。除了 id 之外，您还需要在该文档上存储名称（非规范化数据在 mongo 模式中很常见），或者使用该会议名称搜索“团队”，然后搜索类似

```
finding.or([
  { home_team: {$in: teamIds}},
  { away_team: {$in: teamIds}}
]) 
```

# ruby-on-rails - Redactor Rails - 如何将内容保存到数据库？

> ID：16176380
> 
> 赞同：1
> 
> 时间：2013-04-23T18:16:59.090
> 
> 标签：ruby-on-rails, text-editor, rich-text-editor, redactor

对于我的应用程序，我正在尝试为“用户”制作的“项目”实现富文本编辑器

现在，我正在尝试实现 Redactor Rails ( [https://github.com/SammyLin/redactor-rails](https://github.com/SammyLin/redactor-rails) )。我按照下面的过程。

**问题 1：**如何使用设计选项重新安装？

**问题 2：**我在我的数据表中的 Projects 下创建了一个 t.text “描述”。我的项目表单现在使用简单表单。我看到了文本编辑器，但是在按下提交后如何保存在文本编辑器字段中输入的内容？

```
gem 'redactor-rails'
$ bundle install
$ gem install redactor-rails 
```

添加到 application.js：

```
//= require redactor-rails 
```

添加到 application.css：

```
*= require redactor-rails 
```

然后，将以下行放入我的个人“项目”：

```
<%= text_area_tag :editor, "", :class => "redactor", :rows => 40, :cols => 120 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:18:05.563

你不应该使用*原始* `text_area_tag`方法。您应该使用 simple_form API 方法。这是一个例子（在 Slim 中，但你应该明白）：

```
= simple_form_for(comment) do |f|

  = f.input :content, input_html: { class: 'redactor', rows: '4' }

  = f.button :submit 
```

下一个。Redactor 不会清理用户的输入。您应该手动进行。

控制器代码（特别是创建操作）示例：

```
class CommentsController
  # used for sanitization user's input
  REDACTOR_TAGS = %w(code span div label a br p b i del strike u img video audio
                  iframe object embed param blockquote mark cite small ul ol li
                  hr dl dt dd sup sub big pre code figure figcaption strong em
                  table tr td th tbody thead tfoot h1 h2 h3 h4 h5 h6)
  REDACTOR_ATTRIBUTES = %w(href)

  # ...

  def create
    params[:comment][:content] = sanitize_redactor(params[:comment][:content])

    comment = Comment.create(params[:comment])

    if comment.save
      # ...
    end
  end

  # ...

  private

  def sanitize_redactor(orig_text)
    stripped = view_context.strip_tags(orig_text)
    if stripped.present? # this prevents from creating empty comments
      view_context.sanitize(orig_text, tags: REDACTOR_TAGS, attributes: REDACTOR_ATTRIBUTES)
    else
      nil
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T21:35:31.760

对于那些不使用 simple_form 的人，这也适用：

```
<div class="redactor_box">
    <%= f.text_area :content, placeholder: "Content goes here...", :class => "redactor"%>
</div> 
```

# javascript - Highcharts - 为系列数据提供 URL 以打开可点击的链接

> ID：16176390
> 
> 赞同：4
> 
> 时间：2013-04-23T18:17:52.187
> 
> 标签：javascript, highcharts

我想为我的系列中的每个数据点添加一个 url，当单击用户时将其重定向到该页面。例如[jsfiddle](http://jsfiddle.net/awasM/)。

```
series:[{data: [ [123.12,'http://xyz.com'],[332.32,'http://zzs.com'] ] }] 
```

我能够让这些点成为可点击的，但我实际上是如何让他们找到我正在点击的点以及使用哪个 url 我无法弄清楚。我显然可以通过使用存储链接的替代数组来破解它......但我想使用图表的意思。

**现在它已经解决了以供将来参考，以便能够在此处添加指向您的点的链接是代码：**

[http://jsfiddle.net/awasM/2/](http://jsfiddle.net/awasM/2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T22:36:56.953

[这是执行此操作的一种方法（此处](http://jsfiddle.net/awasM/1/)为小提琴）：

```
 series: [{
                            name: 'Batch',
                            URLs: ['www.google.com', null, null, 'www.yahoo.com', null, null, 'www.cnn.com', null, null, 'www.minecraft.net'], // pass in array of URLs
                            data: [4375.48, 113599.39, 1278, 83950.12, 6579.65, 94582, 1285.65, 48700.39, 500, 62917.27],
                            color:'#b8ecce',
                            point: {
                                events: {
                                    click: function() {
                                        var someURL = this.series.userOptions.URLs[this.x]; // onclick get the x index and use it to find the URL
                                        if (someURL)
                                            window.open('http://'+someURL);
                                    }
                                }
                            }
                       }], 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T08:33:48.183

您可以使用结构：

```
 data:[{
   y:10,
   ownURL:'http://www.google.com'
 },{
   y:11,
   ownURL:'http://www.google2.com'
 },{
   y:5,
   ownURL:'http://www.google3.com'
 }] 
```

然后你有能力通过

```
this.point.options.ownURL 
```

# google-places-api - 来自 Amzon EC2 的 Google Places API 请求被拒绝

> ID：16176394
> 
> 赞同：1
> 
> 时间：2013-04-23T18:17:56.623
> 
> 标签：google-places-api

我正在尝试使用 'google place api' 获取餐厅详细信息，但它总是返回 "Request_denied" ，以下是详细信息：

我已经为服务器应用程序创建了密钥（带有 IP 锁定），并在允许的 IPS (54.235.221.241) 中添加了我的亚马逊 EC2 服务器 DNS ip 地址

服务器应用程序的密钥（带 IP 锁定）
API 密钥：AIzaSyAnyPjWi6sEqeCa8jr2CDc45J43kdTyjjg
IPs：54.235.221.241
激活时间：2013 年 4 月 17 日晚上 11:15

当我尝试从 Amazon EC2 服务器

[https://maps.googleapis.com/maps/api/place/search/json?location=37.4464863,-122.1612654&radius执行以下 URL 时，请求被拒绝（使用 JAVA 以编程方式） =5000&types=food&sensor=false&key=AIzaSyAnyPjWi6sEqeCa8jr2CDc45J43kdTyjjg](https://maps.googleapis.com/maps/api/place/search/json?location=37.4464863,-122.1612654&radius=5000&types=food&sensor=false&key=AIzaSyAnyPjWi6sEqeCa8jr2CDc45J43kdTyjjg)

任何建议将不胜感激。

# c++ - OpenCV 2.4.1 与 Qt 的静态链接

> ID：16176396
> 
> 赞同：3
> 
> 时间：2013-04-23T18:18:07.797
> 
> 标签：c++, opencv, static-libraries, static-linking, undefined-reference

我已经使用 MinGW 和 CMake 静态编译了 OpenCV 2.4.1 而没有错误。我检查了`With_QT`

我只是取消选中`BUILD_SHARED_LIBS`并继续 `mingw32-make`and `mingw32-make install`。

它的构建没有错误，最终我在 opencv 的 lib 文件夹中有一堆`.a`文件。

但是在设置`LIBS and INCLUDEPATH`.pro 文件的参数并在 Qt 中运行一个简单的应用程序后，我遇到了错误。

我还将以下行添加到`.pro`文件中：

```
CONFIG += -static -static-libgcc 
```

我提供了最后一行错误：

```
F:\OpenCV2.4.1\opencv-static\install\lib\libopencv_highgui241.a(grfmt_jpeg2000.cpp.obj):grfmt_jpeg2000.cpp:(.text$_ZN2cv13Jpeg2KDecoder10readHeaderEv+0x4f):
undefined reference to `jas_image_decode'  collect2: ld returned 1
exit status  mingw32-make[1]: ***

[release\test.exe] Error 1 
mingw32-make: *** [release] Error 2  The process "C:/ming44/bin/mingw32-make.exe" exited with code %2\. Error while building project test (target: Desktop) When executing build step 'Make' 
```

**更新**

我发现错误只是在我调用`highgui.hpp`方法时。像我使用时出现以下错误`cv::imshow()`：

```
F:\OpenCV2.4.1\opencv-static2\install\lib\libopencv_highgui241.a(window_w32.cpp.obj):window_w32.cpp:(.text$_ZL17icvCreateTrackbarPKcS0_PiiPFviEPFviPvES4_+0x5e1): undefined reference to `CreateToolbarEx@52'  collect2: ld returned 1
exit status  mingw32-make[1]: *** [release\test.exe] Error 1 
mingw32-make: *** [release] Error 2 
```

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T00:18:33.773

在我们进行修复过程时有很多问题，所以我将在这里尝试总结所有问题的答案。

## 未解析的符号

* * *

```
undefined reference to `jas_image_decode' 
```

该`jas_image_decode`符号在[libjasper](https://github.com/Itseez/opencv/tree/master/3rdparty/libjasper)中定义（这是 OpenCV 的第 3 方依赖项）。要解决它，请链接到`libjasper.a`.

```
undefined reference to `CreateToolbarEx@52' 
```

该`CreateToolbarEx`符号是 Windows API 的一部分，因此在系统库中定义（在您的情况下，这些库始终与工具链一起提供，MinGW）。[通过查看MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787469%28v=vs.85%29.aspx)（向下滚动并查看**库**和**DLL**单元），您始终可以找到应该链接哪个库来解析此类符号。在这种情况下，您可以看到`Comctl32.lib`，但是 MSDN 当然会以 Microsoft Visual C 工具链定义的格式发布库名称。由于您使用的是 MinGW 工具链，因此您必须（在心理上）将此名称转换为库的 Unix 命名约定，在本例中为`libcomctl32.a`.

```
undefined reference to `AVIStreamRelease@4' 
```

与前面的案例类似，我们在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756852%28v=vs.85%29.aspx)找到它，并推断我们必须链接反对`libvfw32.a`。

**注意：**工具链始终自动搜索此类系统库（包含 Windows API）的路径。因此，您不应`-L`在编译/链接期间提供选项，而应仅提供库本身，即`-lcomctl32`.

```
undefined reference to `cv::dft' 
```

好吧，这又是来自 OpenCV 的一些组件（`cv`命名空间显然暗示了这一点）。稍微搜索一下，发现它是在[Core 组件](https://github.com/Itseez/opencv/blob/master/modules/core/src/dxt.cpp)中定义的。因此，要解析该符号，请链接到`libopencv_core.a`.

## 该方法

* * *

> 如何找出链接哪个库来解决丢失的符号？

这里没有经验法则或任何直接的配方，而是一些主要来自经验的技巧和有根据的猜测。这里有一些例子：

1.  例如，在 的情况下`CreateToolbarEx`，只要我认识函数名的 Windows API 命名约定，我就很容易猜到它属于 Windows API。因此，我接下来要做的是`CreateToolbarEx`在 Google 中输入，跳转到 MSDN 上的相应页面，向下滚动，查看库名称是什么，（在心理上）转换为库的 Unix 命名约定（见上文），瞧！

2.  OpenCV 的情况比较棘手。OpenCV 是一个第 3 方库，找出定义某个符号的库是否会很痛苦的问题完全取决于所提供文档的质量。虽然，我可以看到 OpenCV 文档非常好，但它仍然缺少每个符号的这些重要提示，这很遗憾。然而，我们（开发人员）必须能够应对这样的问题，无论第三方库的文档有多么糟糕，并完成工作。

    这就是为什么使用文件内容搜索实用程序总是一个好主意，例如（在 Unix OS 系列中很流行，但在[MSYS](http://sourceforge.net/apps/trac/mingw-w64/wiki/MSYS)`grep`发行版中也可用于 Windows ）。这样，例如在 的情况下 ，您可以在 OpenCV 源代码树的根目录中运行，并立即追踪该符号的定义位置。之后，您必须推断文件包含的组件属于哪个组件，但这应该很简单，只需环顾四周，看看文件所在的目录。`cv::dft``grep -r "void.*dft(" .``cv::dft`

## 结论

* * *

我发誓我这辈子从未使用过 OpenCV，但正如您所见，我仍然能够为您找到所有这些缺失的符号。因此，我们可以得出结论，所提出的搜索未解析符号的技术是可靠的。

最后，这些都不是特定于 OpenCV 或 Qt 的。您在这里处理的是基本的程序员工艺技能。如果您想成为能够快速解决此类日常例程的高效软件开发人员，那么`grep`它只是众多必不可少的实用程序之一，无疑应该成为您工具库的一部分。

# r - 找出时间序列中最大的变化

> ID：16176397
> 
> 赞同：1
> 
> 时间：2013-04-23T18:18:09.083
> 
> 标签：r, time-series

我在 R 中有一个时间序列

例如

```
[1]  0.2  0.6  0.4 -0.2 -0.1  0.3  0.8  0.7 
```

我怎样才能找出这个系列中最大的变化？（从第 4 点到第 7 点最大的变化 =1）我怎样才能找出例如 1 的变化是什么？（再次从 4 (= -0.2) 到 7 (= 0,8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:34:42.227

要计算一组点的距离矩阵，可以使用该`dist`函数。之后，只需选择它们之间距离最大的点对即可。在代码中：

```
m = as.matrix(dist(runif(10)))
m == max(m)
       1     2     3     4     5     6     7     8     9    10
1  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
2  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
3  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
4  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
5  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
6  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
7  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
8  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
9  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
10 FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
which(m == max(m), arr.ind = TRUE)[1,]
row col 
 10   6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:10:07.997

你可以`expand.grid`在这里使用。

```
exg <- expand.grid(x, x)
exg[apply(exg, 1, diff) == VALUE.TO.FIND, ]  # notice the ', ' (comma-and-space)

  Var1 Var2
52 -0.2  0.8 
```

*`VALUE.TO.FIND`您要搜索的具体价值在哪里*

* * *

相反，如果您想找到最大距离：

```
dist <- apply(exg, 1, diff)
exg[dist == max(dist),  ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:27:48.290

要获得列表中最大的变化，只需遍历它并获取最大值和最小值。然后比较它们。它在 O(n) 时间内。这很简单。

找到某个变化有点复杂。不知道你为什么想要它，但它仍然是可能的。一种方法是使用列表的开始索引和结束索引的每个组合调用您刚刚编写的第一个函数。这在计算上有点复杂，但它是实现它的最简单方法。然后当你得到从位置 1 到 2 的变化时，你可以检查它是否是你想要的，如果不是，1-3。最终你会到达 n-1 到 n，如果这不是你要找的变化，那么它不在集合中。此方法将在 O(n^2) 中。

# android - 如何根据每个项目中显示的数据更改列表项目的背景颜色？

> ID：16176398
> 
> 赞同：1
> 
> 时间：2013-04-23T18:18:09.343
> 
> 标签：android, listview, background-color, simplecursoradapter

我在 SQLite 中有一个状态不同的订单列表：已分配、已加载、已交付。我希望每个订单在列表中显示时都有不同的颜色背景。到目前为止，我还没有找到一个很好的方法来做到这一点。

我发现很多关于如何根据位置更改列表项的背景颜色的讨论，但没有基于数据内容的讨论。我还发现了很多关于如何更改用于突出显示所选项目的颜色的讨论。这些对我没有帮助。

我想出的解决我的问题的唯一方法是在适配器创建它之后运行整个列表，并为每个项目设置背景。这是笨拙和浪费的。我希望有一种更有效的方法可以在从光标创建列表时更改适配器中的背景。

我确信有更好的方法。我对Android太陌生了，不知道。

* * *

我真的很感激到目前为止的反应。我正在尽我所能来整合它们，但我仍然没有成功。这是我刚刚尝试过的，基于我得到的答案和我所做的研究。

```
public class OrderListAdapter extends SimpleCursorAdapter {

    private static final String TAG = "SimpleCursorAdapter";
    Context _context = null;
    int layoutResourceId = 0;

    public OrderListAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
        _context = context;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        String tag = TAG + ".getView()";
        Log.d(tag,"in getView()");

        if (view == null) {
            LayoutInflater inflater = ((Activity)_context).getLayoutInflater();
            view = inflater.inflate(R.layout.fragment_order_list_row, null);
        }
        setRowColor(view);
        return view;
    }

    private void setRowColor(View view) {
        String tag = TAG + ".setRowColor()";
        Cursor cursor = getCursor();
        int col = cursor
                .getColumnIndex(DBContract.DeliveryOrderTable.ENROUTE_FLAG);
        String enroute_flag = cursor.getString(col);
        Log.d(tag, "enroute_flag = [" + enroute_flag + "]");
        col = cursor
                .getColumnIndex(DBContract.DeliveryOrderTable.DELIVERED_DATETIME);
        String deliveredDateStr = cursor.getString(col);
        Log.d(tag, "deliveredDateStr = [" + deliveredDateStr + "]");
        int bgColorId = 0;
        if (!deliveredDateStr.equals("")) {
            bgColorId = R.color.bg_status_delivered_color;
            Log.d(tag, "Setting to delivered color");
        } else if (enroute_flag.startsWith("T") || enroute_flag.startsWith("Y")) {
            Log.d(tag, "Setting to enroute color");
            bgColorId = R.color.bg_status_enroute_color;
        } else {
            Log.d(tag, "Setting to assigned color");
            bgColorId = R.color.bg_status_assigned_color;
        }
        view.setBackgroundColor(_context.getResources().getColor(bgColorId));
    }
} 
```

不幸的是，这不起作用。如果我不调用 super.getView()，我最终会在字段中没有数据，显然，因为我没有明确地进行传输，但我想我可以只修改返回的视图。

我的痕迹显示我正在读取数据，但背景颜色没有改变。

看来我要更改的视图是 LinearLayout，但更改背景颜色似乎不起作用。

知道了！确保使所有子视图的背景透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:13:03.367

如果您使用任何自定义适配器用于列表视图，那么您将有一个方法 getView()，在返回之前调用一个方法，并根据您想要更改的颜色传递视图（正在返回）和数据排。

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View view = convertView;
    if (view == null) {
        LayoutInflater vi = (LayoutInflater) _c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = vi.inflate(R.layout.list_item_var, null);
    }

    TextView varView = (TextView) view.findViewById(R.id.var);
    TextView valueView = (TextView) view.findViewById(R.id.value);

    VarDetails var = _data.get(position);
    setRowColor(view, var.getVar());
    varView.setText(var.var);
    valueView.setText("Value: " + var.value);

    return view;
}
private void setRowColor(View view, String var) {
    if("assigned".equalsIgnoreCase(var)){
        view.setBackgroundColor(Color.rgb(255,0,0));
    }else if("loaded".equalsIgnoreCase(var)){
        view.setBackgroundColor(Color.rgb(0,255,0));
    }else if("delivered".equalsIgnoreCase(var)){
        view.setBackgroundColor(Color.rgb(0,0,255));
    }
} 
```

请根据您的数据类型更改方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:35:36.390

我会说尝试扩展 CursorAdapter 以将您的数据库与 ListView 绑定。然后你可以重写 ListView.dispatchDraw() 来自定义你的 Paint 对象。

或者检查一下可能会有所帮助：[Customizing Android ListView Items with Custom ArrayAdapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

它根据天气状况使用不同的图像。移植到您的问题，您可以使用 9-patch 或以编程方式创建的 Drawables 作为背景，而不是更改 Paint 中的内容。

# javascript - 打包需要 jQuery 的 JavaScript 库的最佳方法是什么？

> ID：16176399
> 
> 赞同：8
> 
> 时间：2013-04-23T18:18:21.440
> 
> 标签：javascript, jquery, requirejs

我正在编写一个非常基本的 JavaScript 库，它使用 jQuery 的 $.ajax() 函数。

我应该如何管理这种依赖关系？我应该指示我的库的用户自己包含 jQuery 吗？我应该使用 RequireJS 或脚本标签插入之类的东西在库中加载 jQuery 吗？如果后者会更好，如果用户已经在使用 jQuery，我该如何做到这一点而不引起冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:32:07.587

我认为这有点取决于你是否有更多的依赖项，而不是 jQuery。

如果 jQuery 是您唯一的依赖项，并且您的库并不真正需要它自己的模块依赖项系统，我不会推荐 RequireJS。只需检查库中是否存在 jQuery，否则抛出错误。

但是，如果您希望制作一个灵活且可维护的库，我建议您使用一些模块加载器（如 RequireJS）。这也为您提供了使用[构建系统](http://requirejs.org/docs/optimization.html)的优势，该系统允许您组合和打包您的库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:26:22.003

我最终编写了自己的函数来获取 JSON 数据，就像**我**在原始帖子中推荐的那样。感谢所有回复的人。关于 JavaScript 库依赖关系的指导非常有价值，即使我走的是另一条路。

我使用[这个 Stack Overflow 答案](https://stackoverflow.com/questions/14388452/how-do-i-load-a-json-object-from-a-file-with-ajax/14388512#14388512)作为编写自己的函数来获取 JSON 的指南。我需要同步获取数据，所以我根据[另一篇文章](http://www.onejohn.org/wpjohn/2008/05/firefox-bug-with-onreadystatechange/)中概述的技巧调整了功能。

最后，我的功能看起来像这样。我希望它可以帮助其他人。

```
var fetchJSON = function(path, callback) {
  var httpRequest = new XMLHttpRequest();
  httpRequest.open('GET', path, false);
  httpRequest.send();
  if (httpRequest.readyState === 4) {
    if (httpRequest.status === 200) {
      var data = JSON.parse(httpRequest.responseText);
      if (callback) callback(data);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:22:39.977

我建议您建议用户首先包含 jquery。如果您让我选择任何示例，您会发现这是一种真正使用过的方法（例如 .net 框架）

# matlab - 使用 ezplot 绘制包含常数的曲线

> ID：16176405
> 
> 赞同：0
> 
> 时间：2013-04-23T18:18:45.250
> 
> 标签：matlab, plot

我想使用 ezplot 绘制一个函数，两个常数的不同值。喜欢

```
ezplot('a*x^2+b*y^2=1') 
```

如何为 a 和 b 的不同值绘制它？感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:57:34.170

简单的方法是：

首先使用处理程序定义您的函数，如下所示：

```
a = 1;
b = 3;
fh = @(x,y) (a*x.^2 + b*y.^2 - 1); 
```

然后轻松使用 ezplot 和函数：

```
ezplot(fh)
axis equal 
```

如果您有不同的 a 和 b 值，您可以在循环中使用它们（或使用矢量化计算），并将它们提供给您的函数，然后绘制函数，并在绘制后使用 'hold on' 命令来保持以前的情节是这样的：

```
for i=1:n
    fh = @(x,y) (a(i)*x.^2 + b(i)*y.^2 - 1);
    ezplot(fh);
    hold on
end 
```

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:12:27.687

`a`这是为and使用多个值的一种方法`b`：分别定义您的函数并使用函数句柄和匿名函数来更改`a`and `b`。您可以将隐式函数定义为两个单独的函数：

```
function y = someFun(x,a,b)

y = sqrt((1-a.*x.^2)./b);

function y = someFun2(x,a,b)

y = - sqrt((1-a.*x.^2)./b); 
```

然后使用and调用`ezplot`匿名函数。`a``b`

```
clear all
close all
figure
hold on
for a = 1:5
    for b = 1:5
        ezplot(@(x)someFun2(x,a,b));
        ezplot(@(x)someFun(x,a,b));
    end
end

axis([-1,1,-1,1]) 
```

ezplot 将重置轴，因此您需要在调用后自行设置。

# jquery-ui - jquery load() 只会从外部页面加载 html，没有样式表或 jquery ui

> ID：16176406
> 
> 赞同：0
> 
> 时间：2013-04-23T18:18:45.960
> 
> 标签：jquery-ui, jquery

我有两页。为了解释起见，我将它们称为页面 A 和页面 B。当我在浏览器中打开页面 B 时，它会呈现所有样式和 jquery ui 代码正常工作，但是当我在页面 A 的 div 中打开页面 B 时，通过load() 方法，唯一呈现的是原始 html，没有样式，没有接口。问题是什么？正下方是 B 页的代码，最下面是 A 页的代码：

```
<!DOCTYPE html>
<html>

<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> //jquery ui

  <link rel="stylesheet" href="http://spilot.koding.com/lbStyle.css"/>  //stylesheet

 <script src="http://www.parsecdn.com/js/parse-1.2.2.min.js"></script> //parse database

   <script>

$(function(){
    var crowd = ' ';
    var ageGroup = ' ';
    var activity = [];
    var scene = [];
    var neighborhood = [];
    var date = [];
    var details = [];
    var time = [];
   Parse.initialize("ivHLAO7z9ml1bBglUNuPSgcWabXe3UeE2yCgKM2x","gNeGt04lU7xcew893EvbEJ05qqc4POVhBsIBSCVj");

   $(".menu").menu({
        select: function (event, ui) {
            $('.selected', this).removeClass('selected');
        var selection = ui.item.addClass('selected').children('a').attr('name'); //add background color to selected menu item and get its attribute name
        var choice = ui.item.text(); //get text of menu selection

         if(selection == "ageGroup"){
        $("#ageGroup").text(choice); //change the text in the first <a> of ageGroup menu to ageGroup selection. 
        ageGroup = $("#ageGroup").text();
        }else{
         crowd = selection;
        }; 

        } // closes select function

    }); // closes menu
     $("button").click(function(){

var city = JSON.parse( localStorage.getItem('city') ); 
var niche = Parse.Object.extend(crowd);
var query = new Parse.Query(niche);
query.equalTo("ageGroup", ageGroup);
query.equalTo("city", city);
//query.include([activity.date.details.location.neighborhood.time])
query.find({
  success: function(results) {
    for (i = 0; i < results.length; i++){
    activity = results[i].get("activity");
    scene = results[i].get("location");
    neighborhood = results[i].get("neighborhood");
    date = results[i].get("date");
    details = results[i].get("details");
    time = results[i].get("time");

    };
  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
});

//alert("working");

}); //closes click() 

}); // close function()
</script>
 <script>

$(function(){
 $( "button" ).button(); 

});
    </script>

</head>

  <body>

 <div id="div1">

         <button>Button label</button>

<div id="div2">
 <ul class="menu">
    <li>
        <a href="#" id="ageGroup">Age Group</a>
            <ul>
                <li><a href="#" name="ageGroup">18-21</a></li>
                <li><a href="#" name="ageGroup">21-30</a></li>
                <li><a href="#" name="ageGroup">30-40</a></li>
                <li><a href="#" name="ageGroup">40-50</a></li>
                <li><a href="#" name="ageGroup">50-60</a></li>
                <li><a href="#" name="ageGroup">60-70</a></li>
                <li><a href="#" name="ageGroup">70-80</a></li>
                <li><a href="#" name="ageGroup">80-90</a></li>
                <li><a href="#" name="ageGroup">90-100</a></li>
            </ul>

    </li>
    </ul>  

</div>   

<div id="div3">
        <ul class="menu" id="menu">
                <li><a href="#" name="academic_artStudies" id="academic_artStudies"><img src="" alt="" /><h2>Academic: Art Studies</h2></a></li>
                 <li><a href="#" name="academic_Literature"><img src="" alt="" /><h2>Academic: Literature</h2></a></li>
                <li><a href="#" name="academic_socialSciences"><img src="" alt="" /><h2>Academic: Social Sciences</h2></a></li>
                <li><a href="#" name="academic_physicalNaturalSci"><img src="" alt="" /><h2>Academic: Physical/Natural Sciences</h2></a></li>

  </ul>

</div>

</div>

</body>
</html>

 --------------//PAGE A//--------------
<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

  <script>
$(function(){

$("#mainDiv").load("http://myURl.com/find2.html"); //this is where I call load()

});
</script>

</head>
<body>
       //this is the div where I want the other page to load

     <div id="mainDiv">

     </div> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:51:13.327

由于您正在将页面“b”加载到页面“a”中，因此您需要在页面“a”标题中包含所有页面“b”样式表/js。

请注意，您正在将完整的 html 页面加载到页面“a”中，其中包括 html、header、body 并且这是不可取的，您应该使页面“b”成为仅包含您需要的标记的模板。

**更新：**

1.  您将脚本嵌入到 html 中，这是一种不好的做法，将 JS 代码分隔到不同的文件中。
2.  当您在文件中包含 JS 代码时，它会在页面加载后立即运行，因此如果您将“pageb”代码放入“pagea”中，它将在“pagea”加载后立即运行，并且当您加载“pageb”代码时不会再次运行。
3.  您需要将“pageb”代码放入函数中，并仅在加载“pageb”内容后调用它。

# timestamp - 如何计算给定时间插件中可见的所有地标？

> ID：16176407
> 
> 赞同：1
> 
> 时间：2013-04-23T18:18:47.550
> 
> 标签：timestamp, kml, google-earth, timespan, google-earth-plugin

我创建了一个时间感知动画，其中包含数千个代表人口估计的地标[我在http://www.catalinagis.org/foxrecovery](http://www.catalinagis.org/foxrecovery)

我想知道如何计算在给定时间点可见的地标（在本例中为点）总数的总和。. .类似于基于时间的查询。

人口估计每年都在波动，因此有些点在消失之前只持续很短的时间；其他人从时间跨度的开始一直持续到结束。3000多点，不想一一回过KML。

我得到了每年的人口估计，然后在每月的时间尺度上模拟死亡和重新人口，以使动画看起来更“自然”。我前段时间创建了 KML，想检查一下自己是否做得正确。. . 并在时间滑块移动时显示计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T00:00:51.707

我仍然不确定“在屏幕上呈现”是什么意思 - 你确定你不想计算如果它们在视野中会呈现的地标（例如在时间上，但在地球的另一边） .

如果您的意思是渲染，那么计算地标的问题是唯一的方法是计算当前视图的边界，然后测试加载的地标是否在边界内并且可见。

如果 KML dom 很大，这可能需要很长时间，因为它需要在每个时间点遍历整个 DOM，然后根据边界视图检查 DOM 中的每个元素。您可以通过使用 api 将代码作为批处理函数执行来实现某些目标。

如果你想试试这个，那么我建议你看看[earth-api-utility-library](https://code.google.com/p/earth-api-utility-library/)它有用于遍历 Kml dom 和计算边界对象的有用方法 - 你应该能够使用它来帮助你大部分方式.

**编辑：**如果您的意思不是渲染，那么这要容易得多，它本质上仍然是相同的迭代过程 - 但现在您不需要计算视图边界或对其进行任何比较。

要在任何时候获得全部可见地标，您只需走 KML dom 并检查每个地标的可见性`getVisiblity()`- 类似这样。

```
var gex = new GEarthExtensions(ge);

var function countVisiblePlacemarks() {
  var count = 0;
  gex.dom.walk({
    rootObject: ge,
    visitCallback: function() {
    if ('getType' in this &&
        this.getType() == 'KmlPlacemark' &&
        this.getVisibility())
        ++count;
    }
  });
  return count;
} 
```

显然，您如何调用`countVisiblePlacemarks`取决于您 - 在计时器、api 事件、按钮等上）。您如何处理结果计数也取决于您。

如果您确实使用了我在上面的示例中推荐和使用的扩展库，[请查看开发人员指南](https://developers.google.com/earth/articles/domtraversal)，它非常有用。

# iphone - 显示 UIImageview 的顶部

> ID：16176413
> 
> 赞同：1
> 
> 时间：2013-04-23T18:19:02.727
> 
> 标签：iphone, ios, objective-c, xcode, uiimage

我正在尝试显示 UIImage 的顶部。

我知道我可以使用以下代码并显示中间部分。我只是想弄清楚如何对顶部做同样的事情：

```
imageView.contentMode = UIViewContentModeScaleAspectFill;
imageView.clipsToBounds = YES; 
```

我从服务器获取的 UIImage 不一定大小相同，所以我不能使用 UIViewContentModeTopLeft。我想要一种缩放图像并显示顶部的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:30:01.117

您想显示图像的任意矩形，因此最简单的方法是将您的 imageView 放在常规视图中。您可以设置图像视图的框架以显示您想要的位，并设置封闭视图进行剪切。

例如，您有一个 1000 x 1000 像素的图像，并且您想要显示 200,200 到 400,400 的矩形

```
UIImageView* imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SomeImage"]];
imageView.frame = CGRectMake( -200, -200, 1000, 1000);
UIView* enclosingView = [[UIView alloc] initWithFrame:CGRectMake( 0, 0, 200, 200);
enclosingView.clipsToBounds = YES;
[enclosingView addSubview: imageView]; 
```

在这种情况下，内容模式并不重要，因为您正在设置图像视图的尺寸以匹配图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:25:32.587

一种方法是调用`CGImageCreateWithImageInRect`您的原始图像来创建一个只有顶部的新图像。

就像是：

```
CGImageRef newImageRef = CGImageCreateWithImageInRect( oldImage.CGImage, CGRectMake(0,0,50,50) );
UIImage *newImage = [UIImage imageWithCGImage:newImageRef];
CGImageRelease( newImageRef ); 
```

然后显示 newImage 而不是 oldImage。

# android - Android：垂直左对齐视图

> ID：16176414
> 
> 赞同：0
> 
> 时间：2013-04-23T18:19:06.407
> 
> 标签：android, layout, views, alignment

我正在尝试将一些文本视图垂直左对齐，但它不能正常工作，其他人可以指出我下面的代码有什么问题吗？

```
 <RelativeLayout
    android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity = "left"
    android:paddingTop="@dimen/top_spacing"
    android:paddingBottom="@dimen/bottom_spacing"
    android:orientation="vertical"
>
    <TextView
        android:id="@+id/Text1"
        style="@style/style1"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:layout_alignParentLeft="true"
        />

    <TextView
        android:id="@+id/Text2"
        style="@style/style1"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:layout_alignParentLeft="true"
        />

      <TextView
        android:id="@+id/Text3"
        style="@style/style1"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:layout_alignParentLeft="true"
        />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:27:18.580

尝试以下操作：

```
 <RelativeLayout
android:id="@+id/footer"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity = "left"
android:paddingTop="@dimen/top_spacing"
android:paddingBottom="@dimen/bottom_spacing"
android:orientation="vertical"
>
<TextView
    android:id="@+id/Text1"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:layout_alignParentLeft="true"
    />

<TextView
    android:id="@+id/Text2"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/Text1"
    />

  <TextView
    android:id="@+id/Text3"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/Text2"
    /> 
```

您从不设置`layout_below`属性。如果您选择使用 或需要，则此答案很有用`RelativeLayout`，否则您可能最好使用 Neoh 和 Fahad Ishaque 的答案，它们几乎说了同样的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:29:33.200

最好将 LinearLayout 用于您的用例：

```
<LinearLayout
android:id="@+id/footer"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity = "left"
android:gravity="left"
android:paddingTop="@dimen/top_spacing"
android:paddingBottom="@dimen/bottom_spacing"
android:orientation="vertical">
<TextView
    android:id="@+id/Text1"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    />

<TextView
    android:id="@+id/Text2"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    />

  <TextView
    android:id="@+id/Text3"
    style="@style/style1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:29:39.157

用**线性布局**替换**相对**布局。您使用线性布局的所有属性，例如**方向**。并且请从文本视图中删除属于相对布局方案的必要标签。

# linux - V4L2_PIX_FMT_YUYV：从 YUYV 转换为 RGB24？

> ID：16176415
> 
> 赞同：1
> 
> 时间：2013-04-23T18:19:12.313
> 
> 标签：linux, rgb, yuv, v4l2, image-conversion

我正在使用 Video4Linux2 从网络摄像头捕获图像数据。设备返回的像素格式为 V4L2_PIX_FMT_YUYV。根据[http://linuxtv.org/downloads/v4l-dvb-apis/V4L2-PIX-FMT-YUYV.html](http://linuxtv.org/downloads/v4l-dvb-apis/V4L2-PIX-FMT-YUYV.html)这与 YUV422 相同，所以我根据[http://的描述使用了 YUV422 到 RGB24 的转换paulbourke.net/dataformats/yuv/](http://paulbourke.net/dataformats/yuv/)。

令人惊讶的是，结果是一张奇怪的紫色/绿色图片。所以看起来 YUYV 与 YUV422 不同（并且还存在像素格式 V4L2_PIX_FMT_YUV422P 是/不一样的？）。

所以我现在完全糊涂了：如何将 V4L2_PIX_FMT_YUYV 位图转换为真正的 RGB24？有没有例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:36:48.183

太长了，来不及发表评论...

4:2:2 不是像素格式，它只是关于如何对色度数据进行二次采样的符号。根据 linuxtv-link，V4L2_PIX_FMT_YUYV 与 YUYV 或 YUY2 相同。关于这个主题的最终参考是[http://www.fourcc.org](http://www.fourcc.org)。[在http://www.fourcc.org/yuv.php#YUYV](http://www.fourcc.org/yuv.php#YUYV)上查看有关 YUY2 的内容

```
 Horizontal   Vertical
Y Sample Period 1   1
V Sample Period 2   1
U Sample Period 2   1 
```

要验证输入格式确实是 YUYV，您可以使用我使用[SDL](http://www.libsdl.org/)编写的查看器；它本机支持这种格式（等等）

[https://github.com/figgis/yuv-viewer](https://github.com/figgis/yuv-viewer)

另请参阅[http://www.fourcc.org/fccyvrgb.php](http://www.fourcc.org/fccyvrgb.php)以了解 rgb/yuv-conversion 的正确公式。

如果您需要进一步的帮助，请从那里拿走并给我留言...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-28T02:00:59.753

我有一个类似的问题，问题是字节序。V4L 将像素数据作为一系列字节返回，我将其转换为 16 位整数。由于我机器的字节序，Y 和 Cb（或奇数像素的 Y 和 Cr）值被交换，我得到了一个奇怪的紫色/绿色图像。

解决方案只是改变我从 16 位整数中提取 Y、Cb 和 Cr 的方式。也就是说，而不是这个：

```
int y = pixbuf[i] & 0xFF00) >> 8;
int u = pixbuf[(i / 2) * 2] & 0xFF;
int v = pixbuf[(i / 2) * 2 + 1] & 0xFF; 
```

我应该这样做：

```
int y = (pixbuf[i] & 0xFF);
int u = (pixbuf[(i / 2) * 2] & 0xFF00) >> 8;
int v = (pixbuf[(i / 2) * 2 + 1] & 0xFF00) >> 8; 
```

或者实际上只是像一个明智的人一样将它们处理为一个字节序列......

# php - 在mysql中插入文件字节码时出现php错误

> ID：16176416
> 
> 赞同：1
> 
> 时间：2013-04-23T18:19:15.180
> 
> 标签：php, mysql

我有一个大问题

当我尝试将查询字符串放入文件时出现以下错误

**不正确的字符串值：'\XE6\x00\x00\xfd\xfd\xfd ...'**

```
INSERT INTO `web_plugins` (`nome`, `xmllocal_nome`, `icone_url`, `icone_bytecode`, `swf_url`, `swf_bytecode`) VALUES ('asdfasdf', 'wqwerrwe', '/assets/uploads/plugins_icons/f2d2d3d9.gif', 'GIF89a\0\0ï¿½\0\0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½~~~}}}|||{{{zzzyyywwwvvvuuutttsssrrrqqqpppooonnnmmmjjjfffdddbbb```___]]]\\\\\\ZZZYYYXXXWWWRRRQQQCCC@@@888ï¿½ï¿½ï¿½\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0!ï¿½\0\0Q\0,\0\0\0\0\0\0\0ï¿½ï¿½\'KP?BI2/?\02G&-*8\'+;\rNL:!.\"%)\"\'&\'-=B!1)$(%&$ï¿½1H;+\',-(&%%#ï¿½!4\Z\'))ï¿½Ôº(##!94)*$#ï¿½\'*&# \"#-/\'\"ï¿½ï¿½$! <>!$!!\"HPï¿½ï¿½ï¿½2>ï¿½ï¿½ï¿½_ï¿½ï¿½pï¿½ï¿½ï¿½cï¿½ï¿½,ï¿½Hï¿½ï¿½ï¿½ï¿½6Fï¿½:ï¿½Qr+4ï¿½0aFï¿½bï¿½Lï¿½8ï¿½ï¿½ \nï¿½ï¿½ï¿½b&ï¿½]ï¿½Øï¿½Iï¿½ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:22:12.783

您应该将 gif 保存在 BLOB 列中。

想象一下下表：

```
CREATE TABLE testblob(
  id INT AUTO_INCREMENT ,
  data MEDIUMBLOB,
  PRIMARY KEY ( id )
) ENGINE = InnoDB; 
```

然后您可以使用以下 INSERT 代码：

```
<?php
    $dbh = mysql_connect("localhost", "user");
    mysql_select_db("test");
    $data = file_get_contents("your.gif");
    // This is important to avoid a ' to accidentally close a string
    $data = mysql_real_escape_string($data);
    mysql_query("INSERT INTO testblob(data) VALUES ('$data')");
?> 
```

请注意，这是取自网络上的[一篇文章](http://www.it-iss.com/mysql/mysql-inserting-and-reading-blobs-in-php/)。感谢作者。

此外，您应该注意， mysql_* 扩展已被标记为已弃用。您应该改用 PDO 或 mysqli 扩展。我个人更喜欢PDO。下面是一个使用 PDO 的示例：

```
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// create a prepared statement
$stmt = $conn->prepare('INSERT INTO `testblob` (`data`) VALUES (:data)');    
// assign the blob value to it
$stmt->bindParam(1, file_get_contents('your.gif'), PDO::PARAM_LOB);

// execute the statemt
$stmt->execute(); 
```

# html - 在标签内定位锚元素和按钮

> ID：16176419
> 
> 赞同：1
> 
> 时间：2013-04-23T18:19:23.800
> 
> 标签：html, css

这是我的登录页面：![在此处输入图像描述](https://i.stack.imgur.com/se0ev.png)

抱歉，我试图在 jsfiddle 上发布我的代码，但它搞砸了很多时间......

无论如何......这是我的html和css：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Território Levita</title>
    <link type="text/css" rel="stylesheet" href="css/StyleSheet1.css" />   
    <script src="js/JavaScript1.js"></script>
</head>
<body>
    <form id="form1" runat="server">
        <header class="headerLogin">
            <h1>Território Levita</h1>
        </header>
        <div class="boxLogin">
            <h1>Área de Login</h1>
            <label>
                <span>Usuário: </span>
                <asp:TextBox runat="server" ID="txtUsuario" CssClass="inputText" ></asp:TextBox>
            </label>

            <label>
                <span>Senha: </span>
                <asp:TextBox runat="server" ID="txtSenha" TextMode="Password" CssClass="inputText"></asp:TextBox>
            </label>

            <label id="labelBtn">
                <a href="#">Cadastre-se</a>
                <a href="#">Esqueci minha senha</a>
                <asp:Button runat="server" CssClass="btn" ID="btnLogar" Text="Entrar" />
            </label>

        </div>
    </form>
</body>
</html>

* { /*Zerando margin e padding global.*/
    margin: 0px;
    padding: 0px;
}

body { /*Estilo de body*/
    background-color: #fff;
}

.inputText { /*Zerando padding dos inputs*/
    padding: 0px;
}

.headerLogin { /*Área de login*/
    width: 95%;
    background-color: #67BCDB;
    margin: 10px auto 150px auto;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    height: 100px;
    line-height: 100px;
    position: relative;
    -moz-box-shadow: 0 0 10px #4e707c; /*Sombra Firefox*/
    -webkit-box-shadow: 0 0 10px #4e707c; /*Sombra chrome*/
    box-shadow: 0 0 10px #4e707c;
}

    .headerLogin h1 { /*Texto do cabeçalho*/
        color: #fff;
        text-transform: uppercase;
        margin-left: 20px;
        display: inline-block;
    }

.boxLogin { /*Estilo da área de login*/
    -moz-border-radius: 5px; /*Firefox*/
    -webkit-border-radius: 5px; /*Chrome*/
    border-radius: 5px; /*IE*/
    border: 8px solid #eee;
    -moz-box-shadow: 0 0 10px #4e707c; /*Sombra Firefox*/
    -webkit-box-shadow: 0 0 10px #4e707c; /*Sombra chrome*/
    box-shadow: 0 0 10px #4e707c; /*Sombra IE*/
    margin: 0px auto;
    width: 500px;
    position: relative;
}

    .boxLogin h1 { /*Estilo do cabeçalho*/
        font-weight: normal;
        font-size: 22px;
        text-align: center;
        background-color: #67BCDB;
        color: #fff;
        text-transform: uppercase;
        padding: 2px 2px 2px 2px;
        margin-bottom: 10px;
        height: 50px;
        line-height: 50px;
    }

    .boxLogin label { /*Container dos controles*/
        display: block;
        width: 90%;
        background-color: #dbd8d8;
        margin: 0 auto 10px auto;
        -moz-border-radius: 6px; /*Firefox*/
        -webkit-border-radius: 6px; /*Chrome*/
        border-radius: 5px; /*IE*/
        padding: 1px 1px 1px 1px;
    }

    .boxLogin span { /*Estilo do texto (usuário e senha)*/
        float: left;
        width: 60px;
        text-align: left;
        margin-left: 5px;
        font-size: 1.2em;
        letter-spacing: 1px;
        font-family: 'Bitstream Vera Sans Mono';
        font-weight: normal;
    }

    .boxLogin .inputText { /*Estilo dos inputs*/
        width: 200px;
        padding: 5px;
        margin-top: 1px;
        margin-bottom: 1px;
        margin-left: 150px;
    }

    .boxLogin #labelBtn { /*Container do botão*/
        background: #fff;
        position: relative;
        text-align: right;

    }

.btn { /*Estilo do botão*/
    background-color: #E44424;
    padding: 7px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    color: #fff;
    -moz-box-shadow: 0 0 10px #4e707c; /*Sombra Firefox*/
    -webkit-box-shadow: 0 0 10px #4e707c; /*Sombra chrome*/
    box-shadow: 0 0 10px #4e707c;
    cursor: pointer;
    width: 150px;
}

#labelBtn .btn {

}

a {
    text-decoration: none;                
} 
```

正如你所看到的，我有标签作为我的跨度和 asp.textboxes 的容器......事情是这样的：我正在尝试使用锚点制作标签，并且里面的按钮将它们显示为三个具有相同大小的“块”。 ..每个都像 33% ......按钮将在它现在的位置。它位于正确的位置，因为我已将其父标签设置为将 text-align 设置为正确...但是它破坏了我的“每个大小相同的 3 个块”计划...我怎样才能实现它？

还有一件事……用于封装组件的标签或字段集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:26:52.863

出于您的目的，HTML 5 中的“标签”就像“div”一样，因此您可以像添加 div 一样添加类和 id：

如果你的盒子宽度没有动态调整，并且假设你的“.boxLogin”标签是 180px 高，只需给每个标签一个类似“.heightSetter”的类，然后在你的 css 中添加：

> .heightSetter { 高度：60px; 浮动：对；}

这将使所有的高度都相等，并将其浮动到封闭元素的右侧。

确保还在 CSS 中为“.boxLogin”设置“height”属性。

# java - 如何使用所有四个节点连接到 cassandra 数据库

> ID：16176420
> 
> 赞同：0
> 
> 时间：2013-04-23T18:19:33.337
> 
> 标签：java, cassandra, astyanax

我最近开始使用 Cassandra 数据库，并且正在使用 Netflix 客户端来填充和读取 Cassandra 数据库中的数据。

我有一个带有四个节点的集群。我已经创建了这样的键空间-

```
 create keyspace profilekeyspace
        with placement_strategy = 'NetworkTopologyStrategy'
        and strategy_options = {DC2 : 1, DC1 : 1}
        and durable_writes = true; 
```

我的专栏家族名称是-`profile_columnfamily`

这是我的四个节点-

```
 lp-host01.vip.slc.qa.host.com:9160
      lp-host02.vip.slc.qa.host.com:9160
      lp-host03.vip.phx.qa.host.com:9160
      lp-host04.vip.phx.qa.host.com:9160 
```

现在我只使用上面的一个节点来连接 Cassandra 数据库并填充数据。但是我的 DBA 说，您需要使用所有四个节点来建立连接。

```
private AstyanaxContext<Keyspace> context;

private CassandraAstyanaxConnection() {

    context = new AstyanaxContext.Builder()
    .forCluster("TEST CLUSTER")
    .forKeyspace("PROFILE")
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()     
        .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
    )
    .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
        .setPort(9160)
        .setMaxConnsPerHost(1)
        .setSeeds("lp-host01.vip.slc.qa.host.com:9160:9160")//using only node from above to make the connection
    )
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()     
        .setCqlVersion("3.0.0")
        .setTargetCassandraVersion("1.2"))
    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
    .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    keyspace = context.getEntity();

    emp_cf = ColumnFamily.newColumnFamily(
        "PROFILE_COLUMNFAMILY",
        StringSerializer.get(),
        StringSerializer.get());
} 
```

现在我不确定如何使用所有四个节点使用 Netflix 客户端进行连接？任何人都可以帮助我吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:57:15.673

种子列表是一个逗号分隔的列表。所以你可以在 setSeeds 调用中添加其余部分：

`setSeeds("server1:9160,server2:9160,server3:9160")`

此外，Astyanax 将发现环中的其他服务器。您只需要列出一个即可发现所有其他服务器，但如果该服务器关闭，您需要列出更多。它非常类似于 cassandra.yaml 中的种子列表。

请注意，您已经复制了行中的端口：

> .setSeeds("lp-host01.vip.slc.qa.host.com:9160:9160")

# simulation - 当半径为 0 时，我们对平滑粒子流体动力学使用什么排斥方向？

> ID：16176421
> 
> 赞同：1
> 
> 时间：2013-04-23T18:19:33.627
> 
> 标签：simulation, physics, game-physics, fluid, fluid-dynamics

在进行 SPH 时，Kelagar 的论文建议使用特定的内核来实现粒子之间的压力感应力。当半径在内核半径内时，它推荐的内核如下：

```
(15/(pi*h^9)) * (h - r)^3 
```

其中 h 是内核半径，r 是我们对计算函数值感兴趣的半径。

然后论文指出，这个函数的梯度是

```
(-45/(pi*h^9))*((r_vec)/r)*(h-r)^2 
```

其中 r_vec 现在是从内核中心到我们感兴趣的点的向量。随着 r_vec 的长度从正方向变为 0，论文指出这个梯度接近：

```
(-45/(pi*h^6)) 
```

但这是一个标量，而不是一个向量。为了在我们感兴趣的两点之间产生排斥，需要有一个排斥的方向。

当两个粒子彼此相邻时，我们应该使用哪个方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:19:31.883

我假设第一个表达式是潜在的。负梯度（关于 r 的导数）就是力。这个梯度是一个向量，总是指向或远离中心。对于第二个表达式，这似乎是正确的。

r_vec 是，根据你所说的，一个从原点指向距离为 r 的点的向量。(r_vec/r) 是一个单位向量来指定方向。这适用于除原点本身之外的每个点，可以将其声明为未定义或声明为零。零是 (r_vec/r) 在所有“附近”点上的平均值。这意味着零力。

通常在具有成对力的粒子模拟中，我们忽略了一个粒子对其自身的力，以及两个粒子在同一确切位置的力。如果两个粒子非常接近，并且你有一个类似于 1/r、1/(r^2) 或类似的力定律呢？没有人想要除以零故障。通常有一个小半径，低于该半径的电位与该半径边界处的给定电位公式相匹配。太靠近的粒子力为零，这样模拟就不会崩溃。当它在边界外非常强大时，突然停止在边界内的力量似乎是不自然的。但我们努力避免这种情况。继续计算此类发生率，如果太多，则模拟已变差。也许需要更小的时间步长。

幸运的是，您没有 1/r 类型的力，但您仍然拥有方向可以疯狂摆动的讨厌的 r_vec/r。在某个微小半径以下使力为零的相同技术将有所帮助。

但是第三个表达让我很困扰。如果它是 r=0 时的力，那么从第二个表达式中的力定律开始，我不确定第三个表达式是如何产生的。它看起来是标量的问题，而如果它应该是力，则可以通过理解它是力向量的径向分量来解决期望向量。只需将表达式乘以 (r_vec/r)，即熟悉的单位幅度向量。OTOH，它没有明确的方向，所以这是胡说八道。

更好的整体解决方案：从一个新的势函数开始，它平滑地趋于平稳并且在 r=0 处保持平坦，例如 exp(-r^2) 或 1/(1+r^2)。给定的潜在峰值急剧上升。你想要的东西更像不是在某个小区域内声明力为零，而是在 r=0 时力自然为零。在某个小半径之外找到一个近似于给定一口井的原点电位。

# asp.net-mvc - 将参数传递到部分视图中以用作操作链接中的查询字符串名称？

> ID：16176423
> 
> 赞同：3
> 
> 时间：2013-04-23T18:19:44.933
> 
> 标签：asp.net-mvc, partial-views, actionlink

我正在尝试使此代码成为部分视图，以将 alpha 分页添加到我的网格中：

```
<div class="t-pager-wrapper" style="border-bottom:0">
        <div class="t-pager t-reset">                                
            @foreach (var letter in CollectionUtil.Alphabet){
                @Html.ActionLink(letter, "Index", new { Equipment_filter = "Equipment.Name~startswith~'" + letter + "'" }, new { @class = "t-link" })
            }
            @Html.ActionLink("All", "Index")                                                       
        </div>
    </div> 
```

如何传入名称“设备”以用作查询字符串中的参数？我所有的网格都有自己的数据名称，因此为了使分页过滤器工作，每个页面上的设备过滤器、颜色过滤器、汽车过滤器等都会有所不同。

因此，示例 URL 将是：

```
http://www.mydomain.com/Equipment?Equipment-filter=Equipment.Name~startswith~'B'
http://www.mydomain.com/Color?Color-filter=Color.Name~startswith~'C' 
```

因此，我需要将参数传递给部分，即过滤器前缀的“设备”和与对象属性进行比较的路径的“设备.名称”。

**编辑：**

好吧，我只是在链接的 href 参数中使用 Url.Action 来做到这一点：

```
<a href="@Url.Action("index")?Equipment-filter=Equipment.Name~startswith~'@letter'">@letter</a> 
```

此时提供“Equipment”和“Equipment.Name”是微不足道的，因为一切都是字符串。如果有人想使用 ActionLink 发布解决方案，我会将其标记为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:46:03.720

好吧，我只是在链接的 href 参数中使用 Url.Action 来做到这一点：

```
<a href="@Url.Action("index")?Equipment-filter=Equipment.Name~startswith~'@letter'">@letter</a> 
```

此时提供“Equipment”和“Equipment.Name”是微不足道的，因为一切都是字符串。

# r - 如何对 1:x 进行采样，其中 x 是长度大于 1 的随机整数向量

> ID：16176425
> 
> 赞同：2
> 
> 时间：2013-04-23T18:19:56.060
> 
> 标签：r

示例代码

```
population <- 10000
vec <- sample(1:6, population, replace=T)    
output <- sample(1:vec, population, replace=T) 
```

警告：数值表达式有 10000 个元素：只使用第一个。

样本试图改变每个选择的样本限制，因此一次迭代应该在 1:2 之间随机抽样，另一个可能在 1:6 之间。最大值在'vec'中定义

构造这条线的正确方法是什么，使其知道将“输出”创建为长度为 10,000 的向量，并正确引用“vec”中的最大值？目前，它仅对“输出”中的所有 10000 个样本使用“vec”的第一个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:28:26.540

也许用于`sapply`循环`vec`：

```
out <- sapply(vec,sample,size = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:43:34.353

另一种方法：创建一个矩阵，其中列是使用不同数字的样本。然后构建一个从每一行随机取值的向量。我认为这可能会更快，但两种方式都非常快。

```
population <- 1e4
samp.mat <- sapply(1:6,sample.int,size=population,replace=TRUE)
indices <- cbind(seq_len(nrow(samp.mat)),sample.int(6,nrow(samp.mat),replace=TRUE))
out <- a[indices] 
```

# c++ - 打印枚举的文本值，而不是值

> ID：16176430
> 
> 赞同：0
> 
> 时间：2013-04-23T18:20:16.670
> 
> 标签：c++, enums, cout

我想打印一个枚举的文本值，如果我输入 5，它将打印 F1。如果我输入 63，它必须打印 H8。在下面的代码中，我尝试了 cout << "你选择了：" << board_square(chosen_piece) << endl，但它会打印两次该值。

```
enum board_square {
    A1 = 1, B1, C1, D1, E1, F1, G1, H1,
    A2, B2, C2, D2, E2, F2, G2, H2,
    A3, B3, C3, D3, E3, F3, G3, H3,
    A4, B4, C4, D4, E4, F4, G4, H4,
    A5, B5, C5, D5, E5, F5, G5, H5,
    A6, B6, C6, D6, E6, F6, G6, H6,
    A7, B7, C7, D7, E7, F7, G7, H7,
    A8, B8, C8, D8, E8, F8, G8, H8,
};

int choose_piece()
{
    using namespace std;
    cout << "X Location?" << endl << ">";
    int column;
    cin >> column;
    cout << "Y Location?" << endl << ">";
    int line;
    cin >> line;
    //This formula calculates which square is placed on the dimensions you entered
    int chosen_piece = (column + (line - 1) * 8);
    return chosen_piece;
}

int main()
{
    using namespace std;
    cout << "Enter dimensions for the piece you want to move" << endl;
    int chosen_piece = choose_piece();
    cout << chosen_piece << endl;
    //How can I get it to print the enum for it here?
    cout << "You chose: " << board_square(chosen_piece) << endl; //This doesn't work either :(
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:25:16.183

您的运行时 C++ 可执行文件并非旨在了解您创建的所有符号的名称。

对于您的特定问题，生成匹配名称非常容易。

```
std::string name_of( board_square s )
{
    std::string name;
    name += 'A' + int(s) % 8;  // First character
    name += '1' + int(s) / 8;  // Second character
    return name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:26:00.937

> 我想打印枚举的文本值

这不是一件简单的事情。我觉得这是一个 XY 问题。你可以做什么（假设一个字母顺序排列的语言环境）：

```
string name;
name += (char)(column + 'A');
name += (char)(line + '1');
cout << "You chose: " << name << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:29:40.773

枚举器名称在运行时不可用；它们只是为源中的数字命名的一种便捷方式。您将需要一些运行时代码将数值转换为运行时字符串，可能类似于：

```
std::string label(int row, int col) {
    return {char('A'+row), char('1'+col)};
} 
```

# snmp - DisMan 监控 - 未生成陷阱

> ID：16176433
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:20:26.047
> 
> 标签：snmp

为了设置 linux 操作系统 (CentOS) 的自我监控，以便在发生情况时发送陷阱，我已经配置了这些行

com2sec notConfigUser 默认 Public0 组 notConfigGroup v1 notConfigUser 组 notConfigGroup v2c notConfigUser 查看 systemview 包括 .1 访问 notConfigGroup "" 任何 noauth 确切 systemview systemview 无

## 用于磁盘查询

磁盘 / 100000000

trap2sink 10.10.64.132

# 自我监控授权

rouser 管理员 iquerySecName 管理员

# 定义消息以发送 OID 以监控阈值

monitor -r 10 DiskAlmostFull dskPercent < 90 monitor -r 10 machineTooBusy hrProcessorLoad < 90

但是只有当我重新启动 snmpd 守护程序时才会生成陷阱。

我试图解决这个问题但没有成功。

任何举行都会有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T13:16:52.643

遇到同样的问题，我在“man snmpd.conf”中发现了以下解释。“monitor [OPTIONS] NAME EXPRESSION”部分指出：“请注意，当表达式第一次匹配时，事件只会被触发一次。这个监视器条目不会再次触发，直到被监视的条件首先变为假，然后再次匹配。” 您可能不喜欢这个答案，但 monitor 命令的行为与宣传的一样。

# php - 如果输入为空并且输入不是现有的 twitter 帐户，如何停止我的 javascript 运行？

> ID：16176438
> 
> 赞同：0
> 
> 时间：2013-04-23T18:20:39.157
> 
> 标签：php, javascript, ajax, twitter, input

我的 html 表单上的输入有问题。目前，我正在将 twitter 名称的输入输入到 Ajax 函数中，该函数通过 php 从 twitter api 调用推文。

问题是，如果输入为空或输入不是有效的推特帐户，它会执行对推特 api 的 php 调用，并返回一条错误消息。

如果 twitter 帐户不存在或输入为空，如何停止 Ajax 运行？php端会发生什么事情吗？

这是输入的html：

```
<div id="topdiv">Input Twitter ID: 
<input type="text" id="userid" onkeydown="if(event.keyCode===13) {document.getElementById('tweet-button').click();}">  
<input type="submit" id="tweet-button" onclick="getStatusesX();" value="Get recent   tweets">   
<p id="tweetbox"></p>
</div> 
```

接受输入并连接到 php 的脚本：

```
var intervalstop;

function getStatusesX() {
    //trying to stop an empty input from executing but not working  
  if(input == ""){
           alert("PLease enter a Twitter ID");
       return false;
       } 

   clearInterval(intervalstop);
   var userID = document.getElementById("userid").value;
   getStatuses(userID);
   intervalstop = setInterval(function() {getStatuses(userID);}, 20000);

}

//Create a cross-browser XMLHttp Request object
function getXMLHttp() {

    var xmlhttp;
    if (window.ActiveXObject) {
        XMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else if (window.XMLHttpRequest) {
       XMLHttp = new XMLHttpRequest();
    } else {
        alert("Your browser does not support XMLHTTP!");
    }
    return XMLHttp;
}

//function that searches for the tweets  via php
function getStatuses(userID){

         XMLHttp1 = getXMLHttp();
    //var userID = document.getElementById("userid").value;

    //ajax call to a php file that will extract the tweets
    XMLHttp1.open( 'GET', 'TwitterGlimpsePHP.php?userid='+userID, true);

    // Process the data when the ajax object changes its state
    XMLHttp1.onreadystatechange = function() {
        if( XMLHttp1.readyState == 4 ) {
            if( XMLHttp1.status ==200 ) {  //no problem has been detected
                document.getElementById("tweetbox").innerHTML=XMLHttp1.responseText;
            }
        }
    }
    XMLHttp1.send(null);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:24:44.963

`input`没有在任何地方定义。移动这一行：

```
var userID = document.getElementById("userid").value; 
```

然后检查是否`userID`为空：

```
function getStatusesX() {

   var userID = document.getElementById("userid").value;

   if(userID === ''){
       alert("Please enter a Twitter ID");
       return false;
   } 

   clearInterval(intervalstop);
   getStatuses(userID);
   intervalstop = setInterval(function() {getStatuses(userID);}, 20000);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:25:33.913

你做了检查，`input`但你没有在任何地方定义这个。改为检查用户 ID

```
function getStatusesX() {

   clearInterval(intervalstop);
   var userID = document.getElementById("userid").value;

    //trying to stop an empty input from executing but not working  
    if(userID == ""){
           alert("PLease enter a Twitter ID");
       return false;
       } 

   getStatuses(userID);
   intervalstop = setInterval(function() {getStatuses(userID);}, 20000);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:48:51.267

正如之前的回复所述，对于空输入案例，您正在检查一个未定义的变量。

至于检查输入是否是有效的推特用户，它必须在服务器端完成。例如，您的“TwitterGlimpsePHP.php”脚本可能会执行此检查，如果用户无效，则返回特殊的 http 状态。您可以使用 4XX http 状态，但我不确定哪个是最相关的（可能是 400 表示错误请求）。

最后的修改是更改 getStatutes 函数以检查服务器响应：

```
//function that searches for the tweets  via php
function getStatuses(userID){

    XMLHttp1 = getXMLHttp();
    //var userID = document.getElementById("userid").value;

    //ajax call to a php file that will extract the tweets
    XMLHttp1.open( 'GET', 'TwitterGlimpsePHP.php?userid='+userID, true);

    // Process the data when the ajax object changes its state
    XMLHttp1.onreadystatechange = function() {
        if( XMLHttp1.readyState == 4 ) {
            if( XMLHttp1.status ==200 ) {  //no problem has been detected
                document.getElementById("tweetbox").innerHTML=XMLHttp1.responseText;
            } else if (XMLHttp1.status ==400 ) {
                // The user was not valid. Stop refresh.
                clearInterval(intervalstop);
            }
        }
    }
    XMLHttp1.send(null);
} 
```

编辑服务器端：

您提供的服务器端脚本似乎没有检查 twitter statut（我不是 php 专家，更多的是 java/.net 开发，所以我可能错了）。对于无效用户，twitter 会做出不同的回答。例如，查看[https://api.twitter.com/1/statuses/user_timeline/fdfsfsfsfsdf.xml](https://api.twitter.com/1/statuses/user_timeline/fdfsfsfsfsdf.xml)你会看到：

```
<errors>
    <error code="34">Sorry, that page does not exist</error>
</errors> 
```

您的 php 脚本必须检查来自 twitter 的此类响应，然后返回 http 状态。你可以看看这个问题来了解如何设置 http 状态：[Set Response Status Code](https://stackoverflow.com/questions/6163970/set-response-status-code)。我希望这些解释对你有所帮助。

# ruby-on-rails - 你怎么知道一个 RoR 站点是用什么托管的？

> ID：16176440
> 
> 赞同：1
> 
> 时间：2013-04-23T18:20:52.807
> 
> 标签：ruby-on-rails, heroku, amazon-ec2, engineyard

我想知道某人的网站是否使用 Heroku、Engine Yard、在 EC2 上自托管或其他。他们使用 Ruby on Rails。有没有什么好办法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:34:27.017

您唯一的线索将是查看 DNS 记录指向的位置，例如，`nslookup www.kyan.com`将显示它是 herokuapp.com 域的 CNAME。Heroku 和 EY 都使用 EC2，因此 IP 地址范围会显示它是 Amazon IP 地址。也许如果你透露域名我们都可以戳一下。

# java - Java 1.6：根据模型值对模型列表进行排序

> ID：16176441
> 
> 赞同：-3
> 
> 时间：2013-04-23T18:20:55.320
> 
> 标签：java, algorithm, search, collections

我正在使用 java 1.6。我有一个`Employee`模型，如下所示：

```
private String id;
private String firstName;
private String lastName;
private String phoneNumber;
//getters and setters 
```

包含从数据库中获取的`List<Employee>`所有员工数据。

我需要搜索存在于其中的一个或多个员工`List<Employee>`（类似于员工搜索功能，搜索必须在`List<Employee>`搜索条件下而不是另一个数据库上完成）。截至目前，我不希望任何数据库命中来从`List<Employee>`. 但如果它变得复杂，那么我必须去寻找 db hit。

现在，无论我想到什么都是一个缓慢的逻辑，例如：遍历`List<Employee>`and for each`Employee`继续搜索搜索条件的值，如果匹配，则将其添加到新的`List<Employee>`（这会给我搜索结果）。

我想知道是否有一些最佳方法可以实现这一目标。请让我知道这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:59:02.023

排序：[http ://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

```
class EmployeeComparator implements Comparator<Employee>{

   public int compareTo(Employee o1,Employee o2){
       return o1.lastName.compareTo(o2.lastNam);
   }

} 
```

和：

```
Collections.sort(listOfEmplyees, new EmplyeeComparator); 
```

但我不明白，这对您的搜索有何帮助。至少现在已经整理好了。

# sql-server - SQL Server：计算纬度/经度的半径？

> ID：16176443
> 
> 赞同：2
> 
> 时间：2013-04-23T18:20:57.530
> 
> 标签：sql-server

假设我有一个城市的纬度和经度，我需要找出该位置 100 英里范围内的所有机场。我将如何做到这一点？我的数据驻留在 SQL Server 中。一张表包含所有城市信息，包括纬度和经度，另一张表包含机场信息，经度和纬度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:48:50.837

首先...转换城市的数据点

```
DECLARE @point geography;

SELECT geography::STPointFromText('POINT(' + CAST(@lat AS VARCHAR(20)) + ' ' + 
                    CAST(@lon AS VARCHAR(20)) + ')', 4326) 
```

其中@lat 和@lon 是相关城市的纬度和经度。

然后就可以查询表...

```
SELECT [column1],[column2],[etc]
FROM [table]
WHERE @point.STBuffer(160934.4).STIntersects(geography::STPointFromText(
  'POINT(' + CAST([lat] AS VARCHAR(20)) + ' ' + 
  CAST([lon] AS VARCHAR(20)) + ')', 4326) ); 
```

其中 160934.4 是 100 英里的米数。

不过，这会很慢。如果您想做更多的空间工作，您可以添加一个持久计算列（因为纬度和经度点不会真正改变），然后使用空间索引。

```
ALTER TABLE [table] 
  ADD geo_point AS geography::STPointFromText('POINT(' + CAST([lat] AS VARCHAR(20))
  + ' ' + CAST([lon] AS VARCHAR(20)) + ')', 4326) PERSISTED;

CREATE SPATIAL INDEX spix_table_geopt
   ON table(geo_point)
   WITH ( BOUNDING_BOX = ( 0, 0, 500, 200 ) ); --you'd have to know your data 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T18:30:01.350

几年前我使用/写了这个，它足够接近我需要的东西。如果我没记错的话，公式的一部分考虑了地球的曲率，但已经有一段时间了。我使用邮政编码，但您可以轻松适应城市 - 相同的逻辑。

```
ALTER PROCEDURE [dbo].[sp_StoresByZipArea] (@zip nvarchar(5), @Radius float)  AS

DECLARE @LatRange float
DECLARE @LongRange float
DECLARE @LowLatitude float
DECLARE @HighLatitude  float
DECLARE @LowLongitude  float
DECLARE @HighLongitude  float

DECLARE @istartlat  float
DECLARE @istartlong  float

SELECT @iStartlat=Latitude, @iStartLong=Longitude from zipcodes where zipcode=@ZIP

SELECT @LatRange = @Radius / ((6076 / 5280) * 60)
SELECT @LongRange = @Radius / (((cos((@iStartLat * 3.141592653589 / 180)) * 6076.) /  5280.) * 60)

SELECT @LowLatitude = @istartlat - @LatRange
SELECT @HighLatitude = @istartlat + @LatRange
SELECT @LowLongitude = @istartlong - @LongRange
SELECT @HighLongitude = @istartlong + @LongRange

/** Now you can create a SQL statement which limits the recordset of cities in this manner:  **/

SELECT * FROM ZipCodes
 WHERE (Latitude <= @HighLatitude) AND (Latitude >= @LowLatitude) AND (Longitude >= @LowLongitude) AND (Longitude <= @HighLongitude) 
```

# ios - 为什么调整图像大小的这段代码会将其从原始图像旋转 90 度？

> ID：16176446
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:21:30.887
> 
> 标签：ios, objective-c, uiimage

我有一个使用相机的 iPad 应用程序。原始图像为 480 x 640。我正在尝试将其调整为 124 x 160，然后使用我在互联网上找到的以下代码将其存储在 CoreData 中：

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {

CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
CGImageRef imageRef = image.CGImage;

UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

// Set the quality level to use when rescaling
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

CGContextConcatCTM(context, flipVertical);

// Draw into the context; this scales the image
CGContextDrawImage(context, newRect, imageRef);

// Get the resized image from the context and a UIImage
CGImageRef newImageRef = CGBitmapContextCreateImage(context);
UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

CGImageRelease(newImageRef);
UIGraphicsEndImageContext();

return newImage; 
```

}

图像被逆时针旋转 90 度返回给我，我不明白为什么。我试过注释掉这个声明：

```
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height); 
```

但这没有什么区别。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:18:09.880

感谢所有提出建议的人。我一直在寻找并找到了这个，它可以缩放并保持方向：

```
 CGRect screenRect = CGRectMake(0, 0, 120.0, 160.0);
    UIGraphicsBeginImageContext(screenRect.size);
    [image drawInRect:screenRect blendMode:kCGBlendModePlusDarker alpha:1];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T18:28:31.807

像这样绘制图像时需要考虑图像的方向。检查这个答案[iOS - UIImageView - 如何处理 UIImage 图像方向](https://stackoverflow.com/questions/8915630/ios-uiimageview-how-to-handle-uiimage-image-orientation)

# clojure - 有没有更好，更惯用的方式从 seq 中获取“虽然不够”？

> ID：16176459
> 
> 赞同：1
> 
> 时间：2013-04-23T18:22:29.040
> 
> 标签：clojure

我需要根据一些数量规则从序列中提取一些元素。这是我想出的一个解决方案：

```
(defn take-while-not-enough
[p len xs]
(loop [ac 0
       r []
       s xs]
       (if (empty? s)
            r
            (let [new-ac (p ac (first s))]
                (if (>= new-ac len)
                    r
                    (recur new-ac (conj r (first s)) (rest s)))))))

(take-while-not-enough + 10 [2 5 7 8 2 1]) ; [2 5]

(take-while-not-enough #(+ %1 (%2 1)) 7 [[2 5] [7 8] [2 1]]) ; [[2 5]] 
```

有没有更好的方法来实现同样的目标？

谢谢。

**更新：**

有人发布了该解决方案，但随后将其删除。它与我接受的答案相同，但更具可读性。谢谢你，匿名的好心人！

```
(defn take-while-not-enough [reducer-fn limit data] 
   (->> (reductions reducer-fn 0 data)      ; 1\. the sequence of accumulated values
        (map vector data)                   ; 2\. paired with the original sequence
        (take-while #(< (second %) limit))  ; 3\. until a certain accumulated value
        (map first)))                       ; 4\. then extract the original values 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:41:08.517

我的第一个想法是将这个问题视为 reduce 的变体，因此将问题分为两个步骤：

*   计算结果中的项目数
*   从输入中取那么多

我还对参数名称采取了一些自由：

```
user> (defn take-while-not-enough [reducer-fn limit data] 
       (take (dec (count (take-while #(< % limit) (reductions reducer-fn 0 data)))) 
             data)) 
#'user/take-while-not-enough 

user> (take-while-not-enough #(+ %1 (%2 1)) 7 [[2 5] [7 8] [2 1]])    
([2 5])     

user> (take-while-not-enough + 10 [2 5 7 8 2 1]) 
(2 5) 
```

这将返回一个序列，并且您的示例返回一个向量，如果这很重要，那么您可以添加一个调用`vec`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T04:50:00.333

Something that would traverse the input sequence only once:

```
(defn take-while-not-enough [r v data]
  (->> (rest (reductions (fn [s i] [(r (s 0) i) i]) [0 []] data))
       (take-while (comp #(< % v) first))
       (map second))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T04:45:17.433

好吧，如果您想使用 flatland/useful，这是一种不错的使用方式[`glue`](https://github.com/flatland/useful/blob/develop/src/flatland/useful/seq.clj#L193)：

```
(defn take-while-not-enough [p len xs]                                                              
  (first (glue conj []                                                                              
               (constantly true)                                                                    
               #(>= (reduce p 0 %) len)                                                             
               xs))) 
```

但是每次它决定是否进一步增加块时，它都会为整个“已处理”块重建累加器，所以它是 O(n^2)，这对于更大的输入是不可接受的。

对你的实现最明显的改进是让它变得惰性而不是尾递归：

```
(defn take-while-not-enough [p len xs]                                                                                    
  ((fn step [acc coll]                                                                          
     (lazy-seq                                                                                  
       (when-let [xs (seq coll)]                                                                  
         (let [x (first xs)                                                                     
               acc (p acc x)]                                                                   
           (when-not (>= acc len)                                                               
             (cons x (step acc xs)))))))                                                        
   0 xs)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:59:05.967

有时`lazy-seq`是直截了当且不言自明的。

```
(defn take-while-not-enough
  ([f limit coll] (take-while-not-enough f limit (f) coll))
  ([f limit acc coll]
   (lazy-seq
     (when-let [s (seq coll)]
       (let [fst  (first s)
             nacc (f acc fst)]
         (when (< nxt-sd limit)
           (cons fst (take-while-not-enough f limit nacc (rest s))))))))) 
```

注意：`f`预计遵循reduce的规则。

# android - 如何在服务 Android 中使用 managedQuery？

> ID：16176460
> 
> 赞同：4
> 
> 时间：2013-04-23T18:22:32.227
> 
> 标签：android, browser-history, android-cursor

我有这个方法，但它只适用于活动

```
public Cursor getXX() {
        Cursor mCur = thius.managedQuery(Browser.BOOKMARKS_URI,Browser.HISTORY_PROJECTION, 
                             null, null, null);
}

public void getBrowserHist()  {
    Cursor mCur = managedQuery(Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, 
                             null, null, null);
    mCur.moveToFirst();
    if (mCur.moveToFirst() && mCur.getCount() > 0) {
        while (mCur.isAfterLast() == false) {
            Log.v("titleIdx", mCur.getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
            Log.v("urlIdx", mCur.getString(Browser.HISTORY_PROJECTION_URL_INDEX));
            mCur.moveToNext();
        }
    }
} 
```

如何在 android Service 中使用“ManagedQuery”一词？

如何创建将光标返回到浏览器历史android系统的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T18:26:55.283

`managedQuery()`已弃用两年多，仅适用于`Activity`.

你`Service`可以打电话`getContentResolver()`，打电话`query()`，查询你想要的`ContentProvider`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-17T03:47:21.923

managedQuery() 已被弃用 使用 getContentResolver() insted

**使用：** 光标 mCur = getContentResolver().query(Browser.BOOKMARKS_URI,Browser.HISTORY_PROJECTION, null, null, null);

**插入：** 光标 mCur = managedQuery(Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, null, null, null);

**它与服务合作**

# java - 有 2 个 SetContentViews

> ID：16176463
> 
> 赞同：2
> 
> 时间：2013-04-23T18:22:46.267
> 
> 标签：java, android

我正在做一个小游戏。但是我希望我`activity`拥有 XML 的内容视图，但也希望它显示我稍后创建的视图。

这是我的代码：

```
public class GameView extends Activity{
MediaPlayer backgroundMusic;
TextView mTextField;
int Px = 0;
int Py = 0;
Point size = new Point();
Display display;
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(new myView(this));
    setContentView(R.layout.gameviewlayout);
    mTextField = (TextView)findViewById(R.id.timer1);       
        new CountDownTimer(45000, 1000) {

            public void onTick(long millisUntilFinished) {
                mTextField.setText("Seconds Remaining: " + millisUntilFinished / 1000);
            }

            public void onFinish() {
                mTextField.setText("done!");
            }
         }.start();
    display = getWindowManager().getDefaultDisplay();
    display.getSize(size);
    int width = size.x;
    int height = size.y;
    backgroundMusic = MediaPlayer.create(GameView.this, R.raw.gallery_music);
    backgroundMusic.start();

}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    backgroundMusic.release();

}

private class myView extends View{
    public myView(Context context) {
    super(context);

     }

    @SuppressLint("DrawAllocation")
    @Override
     protected void onDraw(Canvas canvas) {
      // TODO Auto-generated method stub
            Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.lil_peanut);
            canvas.drawBitmap(Bitmap.createScaledBitmap(bm, 83, 131, false), Px, Py, null);
        }
    }
} 
```

所以我想要两者`setContentView(new myView(this));`，`SetContentView(R.layout.gameviewlayout);` 我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:50:58.110

这个问题经常被问到（可能会有骗子）。首先看看[这个](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)——这基本上就是你想要的。

与更重要的事情一样，有很多方法可以做到这一点。我的首选方式是：

1.)在布局文件 id 中提供*根视图。*这是不必要的，请参见[此处](https://stackoverflow.com/questions/4486034/get-root-view-from-current-activity)，但 SDK 旨在鼓励您尽可能使用 findViewById，并且它应该（理论上）更快。

2.) 您的根视图应该是 ViewGroups 的实例，除非在特殊情况下。

3.) 一旦你获得了对视图的引用，你就可以使用[文档](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)`addView`中详述的- 这会将视图作为“子”添加到你所拥有的布局中。

4.) Android 用于`LayoutParameters`测量和绘制视图。所以你需要设置`xxxLayout.LayoutParams(...)`你的新视图，对我来说最好的设计是在你添加它的时候做。但请注意！添加到布局的视图需要具有正确的布局参数 - 将 xxx 替换为“线性”或“相对”。但是，如果您将 a 添加`LinearLayout`到`RelativeLayout`要设置**相对**布局参数的 a 中，因为测量器确实需要知道它“访问”的每个视图与上面的容器之间的关系。请记住，如果您使用`import`而不是更多“合格的类名”，则应该导入*正确*的类名。时不时地与两者混为一谈，我玩这个游戏已经有一段时间了。

可悲的是，这个奇妙的问题将是一个骗局，所以我们应该这样关闭它。

# java - 如何正确嵌入小程序而不会出现 noclassdeffound 错误

> ID：16176465
> 
> 赞同：0
> 
> 时间：2013-04-23T18:22:51.230
> 
> 标签：java, eclipse, applet, noclassdeffounderror

我在 Eclipse 中工作，从 Eclipse 触发时应用程序和小程序运行良好，但是当我导出 .jar 文件并尝试运行它时，它会抛出无法运行的错误并检查控制台，但我无法启动控制台. 其次，当我从网页运行小程序时，出现 java 错误。

这可能是一个简单的解决方法，但我已经向许多人寻求帮助但无济于事，所以提前谢谢你。如果您需要更多信息，请告诉我，我会提供。

[http://forevanyeung.com/javapuzzle/](http://forevanyeung.com/javapuzzle/)

类结构

```
+-Puzzle
|+-src
||+-(default package)
|||-Applet.java
||+-puzzle
|||-Puzzle.java
|||-PuzzleLogic.java
|||-Tile.java
|||-TileMouseHandler.java
|+-img
||-richard.jpg 
```

HTML 小程序

```
<applet code="Applet" archive="puzzle.jar" width="308" height="308"></applet> 
```

Java 错误

```
java.lang.RuntimeException: java.lang.NoClassDefFoundError: puzzle/PuzzleLogic
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: puzzle/PuzzleLogic
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethod(Unknown Source)
    at java.awt.Component.isCoalesceEventsOverriden(Unknown Source)
    at java.awt.Component.access$500(Unknown Source)
    at java.awt.Component$3.run(Unknown Source)
    at java.awt.Component$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Component.checkCoalescing(Unknown Source)
    at java.awt.Component.<init>(Unknown Source)
    at java.awt.Container.<init>(Unknown Source)
    at java.awt.Panel.<init>(Unknown Source)
    at java.awt.Panel.<init>(Unknown Source)
    at java.applet.Applet.<init>(Unknown Source)
    at javax.swing.JApplet.<init>(Unknown Source)
    at Applet.<init>(Applet.java:18)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: puzzle.PuzzleLogic
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 37 more
Exception: java.lang.RuntimeException: java.lang.NoClassDefFoundError: puzzle/PuzzleLogic 
```

# android - 如果我安装了 Facebook 应用程序，我用于 Facebook 登录的 Android 应用程序不会打开会话

> ID：16176468
> 
> 赞同：2
> 
> 时间：2013-04-23T18:23:06.080
> 
> 标签：android, facebook, login

我在一个非常简单的 Android 应用程序中工作。它应该很快就会投放市场。我必须登录 facebook，但 Facebook 应用程序似乎拒绝我的应用程序登录。我不能只卸载 Facebook 应用程序，因为它会在几周后上架 Google Play，当然我不能要求用户卸载他们的 Facebook 应用程序。

```
private void goFacebookLogin(){
        Session.openActiveSession(this, true, new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {
                if (session.isOpened()){
                    Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                        @Override
                        public void onCompleted(GraphUser user, Response response) {
                            if (user != null){
                                fbButton.setVisibility(Button.VISIBLE);
                            }

                        }
                    });
                }else{
                    Toast.makeText(getApplicationContext(), "session is not opened", Toast.LENGTH_LONG).show();
                }
            }
        });
    }

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
} 
```

那是我使用的代码。那么...如何在无需卸载 Facebook 应用程序的情况下使用我的 facebook 应用程序登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:04:37.700

Facebook 应用程序不应干扰您的应用程序登录 Facebook。事实上，如果用户安装了最新的 Facebook Android 应用程序，它会提供有用的原生对话框。尝试使用以下代码登录 Facebook：

```
Session session = Session.getActiveSession();
if (!session.isOpened() && !session.isClosed()){
    session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback);
}else{
    session.openActiveSession(this, true, statusCallback);
} 
```

在哪里`statusCallback`：

```
private Session.StatusCallback statusCallback = new SessionStatusCallback(); 
```

内部类`SessionStatusCallback`定义为：

```
 protected class SessionStatusCallback implements Session.StatusCallback {

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened() && session != null){
            sessionChangedCallback();
        }
    }
}//end of SessionStatusCallback class 
```

该方法`sessionChangedCallback()`是您希望在会话状态更改时放置代码的位置。保持您的`onActivityResult()`代码不变。最后，记得把它放在你的清单文件中：

```
 <activity
        android:name="com.facebook.LoginActivity" >
    </activity>
    <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id" /> 
```

试试那个代码，看看它是否有效。就像我在安装 Facebook 应用程序之前所说的那样，不应干扰您的应用程序登录 Facebook 的能力。

# python - 如何按同一月份对这个字典列表进行分组？

> ID：16176469
> 
> 赞同：35
> 
> 时间：2013-04-23T18:23:06.387
> 
> 标签：python

Python newb ...我有一个我试图组织到同一月份和同一年的字典列表：

```
[{'date':'2008-04-23','value':'1'},
{'date':'2008-04-01','value':'8'},
{'date':'2008-04-05','value':'3'},
{'date':'2009-04-19','value':'5'},
{'date':'2009-04-21','value':'8'},
{'date':'2010-09-09','value':'3'},
{'date':'2010-09-10','value':'4'},
] 
```

我想要得到的是这样的字典列表：

```
[{'date':2008-04-01,'value':'12'},
{'date':2009-04-01,'value':'13'},
{'date':2010-09-01,'value':'7'},
] 
```

这是我的代码，它只是打印一个空列表：

```
from datetime import datetime

myList = [{'date':'2008-04-23','value':'1'}, {'date':'2008-04-01','value':'8'}, {'date':'2008-04-05','value':'3'}, {'date':'2009-04-19','value':'5'}, {'date':'2009-04-21','value':'8'},{'date':'2010-09-09','value':'3'},
    {'date':'2010-09-10','value':'4'},
    ]

newList = []
newDict = {}

for cnt in range(len(myList)):
    for k,v in myList[cnt].iteritems():
        if k == 'date':
            d = datetime.strptime(v,'%Y-%m-%d').date()
            for elem in newList:
                if elem['date'] != d:
                    newList.append({'date':d,'value':myList[cnt]['value']})
                else:
                    newList[cnt]['value'] += myList[cnt]['value']

print newList 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-23T18:26:27.830

首先，我会对数据¹进行排序：

```
>>> lst = [{'date':'2008-04-23','value':'1'},
... {'date':'2008-04-01','value':'8'},
... {'date':'2008-04-05','value':'3'},
... {'date':'2009-04-19','value':'5'},
... {'date':'2009-04-21','value':'8'},
... {'date':'2010-09-09','value':'3'},
... {'date':'2010-09-10','value':'4'},
... ]
>>> lst.sort(key=lambda x:x['date'][:7])
>>> lst
[{'date': '2008-04-23', 'value': '1'}, {'date': '2008-04-01', 'value': '8'}, {'date': '2008-04-05', 'value': '3'}, {'date': '2009-04-19', 'value': '5'}, {'date': '2009-04-21', 'value': '8'}, {'date': '2010-09-09', 'value': '3'}, {'date': '2010-09-10', 'value': '4'}] 
```

然后，我会用`itertools.groupby`做分组：

```
>>> from itertools import groupby
>>> for k,v in groupby(lst,key=lambda x:x['date'][:7]):
...    print k, list(v)
... 
2008-04 [{'date': '2008-04-23', 'value': '1'}, {'date': '2008-04-01', 'value': '8'}, {'date': '2008-04-05', 'value': '3'}]
2009-04 [{'date': '2009-04-19', 'value': '5'}, {'date': '2009-04-21', 'value': '8'}]
2010-09 [{'date': '2010-09-09', 'value': '3'}, {'date': '2010-09-10', 'value': '4'}]
>>> 
```

现在，要获得您想要的输出：

```
>>> for k,v in groupby(lst,key=lambda x:x['date'][:7]):
...     print {'date':k+'-01','value':sum(int(d['value']) for d in v)}
... 
{'date': '2008-04-01', 'value': 12}
{'date': '2009-04-01', 'value': 13}
{'date': '2010-09-01', 'value': 7} 
```

^(¹您的数据实际上似乎已经在这方面进行了排序，因此您可以跳过此步骤。)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-23T18:26:30.830

使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
data = [{'date':'2008-04-23','value':'1'},
    {'date':'2008-04-01','value':'8'},
    {'date':'2008-04-05','value':'3'},
    {'date':'2009-04-19','value':'5'},
    {'date':'2009-04-21','value':'8'},
    {'date':'2010-09-09','value':'3'},
    {'date':'2010-09-10','value':'4'},
    ]

import itertools

key = lambda datum: datum['date'].rsplit('-', 1)[0]

data.sort(key=key)

result = [{
            'date': key + '-01',
            'value': sum(int(item['value']) for item in group)
           } for key, group in itertools.groupby(data, key=key)]

print result

# [{'date': '2008-04-01', 'value': 12},
#  {'date': '2009-04-01', 'value': 13},
#  {'date': '2010-09-01', 'value': 7}] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-22T19:04:56.970

接受的答案是正确的，但由于排序，其时间复杂度为 O(n lg n)。这是一个（摊销的）O（n）解决方案。

```
>>> L=[{'date':'2008-04-23','value':'1'},
... {'date':'2008-04-01','value':'8'},
... {'date':'2008-04-05','value':'3'},
... {'date':'2009-04-19','value':'5'},
... {'date':'2009-04-21','value':'8'},
... {'date':'2010-09-09','value':'3'},
... {'date':'2010-09-10','value':'4'},
... ] 
```

这就是 a`Counter`的用途：

```
>>> import collections
>>> value_by_month = collections.Counter()
>>> for d in L:
...     value_by_month[d['date'][:7]+'-01'] += int(d['value'])
...
>>> value_by_month
Counter({'2009-04-01': 13, '2008-04-01': 12, '2010-09-01': 7}) 
```

如果你的输出必须是一个`dict`对象：

```
>>> dict(value_by_month)
{'2008-04-01': 12, '2009-04-01': 13, '2010-09-01': 7} 
```

奖励：如果你想避免进口。

首先，创建一个 dict `month -> list of values`。该函数`setdefault`对于构建这种类型的 dict 很方便：

```
>>> values_by_month = {}
>>> for d in L:
...     values_by_month.setdefault(d['date'][:7], []).append(int(d['value']))
...
>>> values_by_month
{'2008-04': [1, 8, 3], '2009-04': [5, 8], '2010-09': [3, 4]} 
```

其次，按月对值求和并将日期设置为第一天：

```
>>> [{'date':m+'-01', 'value':sum(vs)} for m, vs in values_by_month.items()]
[{'date': '2008-04-01', 'value': 12}, {'date': '2009-04-01', 'value': 13}, {'date': '2010-09-01', 'value': 7}] 
```

# sql - 过滤多对多 (PostgreSQL)

> ID：16176470
> 
> 赞同：1
> 
> 时间：2013-04-23T18:23:12.460
> 
> 标签：sql, postgresql, many-to-many

```
create table "users"(
  "id"        SERIAL PRIMARY KEY NOT NULL,
  "full_name" varchar(100) NOT NULL,
  "role"      integer NOT NULL DEFAULT 0,
  "email"     varchar(100) NOT NULL
);

create table "devices"(
  "id" SERIAL PRIMARY KEY NOT NULL,
  "brand_name" varchar(20) NOT NULL
);

create table "users_and_devices"(
    "user_id" integer NOT NULL,
    "device_id" integer NOT NULL,
    foreign key (user_id) references users(id),
    foreign key (device_id) references devices(id)
); 
```

我怎样才能得到`brand_name`属于的所有设备`user 1`？我应该在`user_id`和`device_id`中添加索引`users_and_devices`吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:26:47.690

user_id 1 拥有的所有品牌，消除重复：

```
select distinct d.brand_name
from users_and_devices ud
inner join devices d on ud.device_id = d.id
where ud.user_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:26:50.607

您所要做的就是在 devices 和 users_and_devices 表之间进行简单的连接。你试过吗？

```
select brand_name 
from devices d
left join users_and_devices ud on (ud.device_id=d.id)
where ud.user_id=1 
```

是的，我会在 user_id 和 device_id 上放置一个索引，因为您将要在表中查询这些特定列。

# eclipse - Eclipse：WEBinf/lib 上的 Appengine SDK JAR

> ID：16176472
> 
> 赞同：3
> 
> 时间：2013-04-23T18:23:17.843
> 
> 标签：eclipse, google-app-engine, gwt, jar, eclipse-plugin

每次更新 Appengine SDK 时，我都必须手动将一些 JAR 文件从 Eclipse/plugin 复制粘贴到 WEB-INF/lib 文件夹。原因是我在 Eclipse 上收到“丢失文件”错误，直到我这样做。

为什么 Eclipse 不在插件文件夹中寻找 JAR？有没有办法在构建路径中配置它？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-25T23:33:40.763

**.jar 文件复制**

通常，Eclipse 的 Google 插件会自动将所需的 .jar 文件复制到您的 WEB-INF/lib 文件夹中。

如果你说它没有这样做，那么我会检查以下设置：

*   项目属性 > Google > App Engine
*   项目属性 > Google > Web 应用程序

如果它们看起来正确，那么您可以在项目上禁用“使用 Google App Engine”并重新启用它以触发它复制 .jar 文件并可能解决您的问题。

**构建路径**

您不需要为 GAE jar 使用这个，当项目配置正确时，应该自动添加 GAE 的构建路径容器。

不建议您自己手动设置构建路径，因为虽然它可能在 Eclipse 中显示一切正常，但当您在 ​​Web 容器（Jetty）中启动项目时，您可能会遇到错误，因为 Jetty 不会意识到您的 Eclipse 构建路径并设置它自己的。

# c# - 如何将我的所有变量保存到文件中以从同一点 C# 恢复程序？

> ID：16176473
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:23:18.260
> 
> 标签：c#, windows, deployment, save, savestate

我不知道我是否在解释我的自我正确，但我想要的是将我的程序变量和信息保存在一个文件中，然后用这个程序启动这个文件。 **我的想法就像一个`.docx`打开的文件，`MS Word`** 如果可用，任何人都可以展示如何操作以及如何在打开`my program`带有`.yaser`扩展名的文件时启动计算机，提前感谢任何帮助我的人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:25:28.883

您可以将所有重要数据放在一个状态类中，然后将其序列化为二进制、XML 或 JSON 格式的文件。当您的应用程序重新启动时，您可以将此文件反序列化回类实例并使用它。

对于二进制序列化，请查看 BinaryFormatter，对于 XML - XmlSerializer，对于 JSON，您可以使用 JSON.Net

您可能还需要一些管道代码来重建缓存、重新订阅事件等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:31:23.343

您想要做的是将所有变量保存在自定义类中，使用[链接](http://www.codeproject.com/Articles/37609/Serialize-and-Deserialize-Objects-as-XML-using-Gen)将其序列化， 这可能会对您有所帮助。

# c# - 如何使用 SQL 表中的数据验证 DataGridView 中的用户输入值？

> ID：16176476
> 
> 赞同：1
> 
> 时间：2013-04-23T18:23:26.760
> 
> 标签：c#, winforms

我是 C# 和 Grid 的新手，我在 SQL 中有一个表，其中包含两列，Particulars 和 Price 以及每边的几个值。另一方面，在 C# win.form 网格上，有两列 Particulars 和 grid。当用户在 column1（详细信息）中输入任何数据并且输入的数据与 Table Particular 的值中的值不匹配时，它应该抛出异常。为此，我使用了 CellEndEdit 事件，但是在用户在空单元格中输入数据后，如何根据 DB 表值检查输入的数据是否正确。

我已经成功地将表单与 DB 连接起来，并且我使用 VS 的数据设置选项成功地做到了这一点，但不知道如何使用 SQL 数据库来做到这一点，我已经尝试过，但我对使用 SQL 数据库进行验证感到困惑。这是我的代码：

```
namespace Small_Billing_System
{
public partial class hitbill : Form
{
    SqlConnection cn = new SqlConnection(@"server=people-pc\sqlexpress;integrated security=true;database=nec");
    SqlCommand cm = new SqlCommand();
    SqlDataAdapter da = new SqlDataAdapter();
    //da1, da2;
    // ds1, ds2;
    DataSet ds = new DataSet();
    SqlCommandBuilder cb = new SqlCommandBuilder();
    public hitbill()
    {
        InitializeComponent();
    }

    private void control()
    {
        //dataGridView_2.DataSource = ds;
        //dataGridView_2.DataMember = "tblfood";
        //totalbox.DataBindings.Add("Text", ds, "tblfood.Price");
    }

    private void hitbill_Load(object sender, EventArgs e)
    {
        SqlConnection cn = new SqlConnection(@"server=people-pc\sqlexpress;integrated security=true;database=nec");
        try
        {
            cn.Open();
            MessageBox.Show("Data base connected");
        }
        catch (Exception)
        {
            MessageBox.Show("Data base connection failed");
            throw;
        }

        cn.Open();
        cm = new SqlCommand("select * from tblfood", cn);
        da = new SqlDataAdapter(cm);
        da.Fill(ds, "tblfood");

    }

    private void dataGridView_2_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        DataGridViewCell currCell = dataGridView_2.CurrentCell;
        string currCellContent = currCell.Value.ToString();

        //    SqlCommand cmd = new SqlCommand("select * FROM tblfood");

        //check whether inputted values are in DB or not

        if (dataGridView_2.CurrentCell.ColumnIndex == 0)
        {

            //        if (!((currCellContent == ???????????????.
            //        if (!((currCellContent == "Beans") || (currCellContent == "Juice"))) //cannot do this because there might be many particulars not just 2 or 3
//And when there are many particulars every time when user inputs value it should be   checked with database and throw an exception/error in case of wrong input.
            //        {
            //            MessageBox.Show("Paticulars not found");
            //            dataGridView_2.CurrentCell.Value = "";
            //        }
            //    }
            //    else if (dataGridView_2.CurrentCell.ColumnIndex ==1)
            //    {
            //         double R = 0.00;
            //        string particular =  dataGridView_2.CurrentRow.Cells[0].Value.ToString().Trim();
            //        if (particular == "Beans")
            //        {
            //            R = Double.Parse(currCellContent) * Properties.Data1.Default.Apple;
            //        }
            //        else if (particular == "Juice")
            //        {
            //            R = Double.Parse(currCellContent) * Properties.Data1.Default.Orange;
            //        }
            //        else
            //        {
            //            R = 0.00;
            //        }
            //        dataGridView_2.CurrentRow.Cells[2].Value = R.ToString();

            //        DataGridViewRowCollection rows = dataGridView_2.Rows;
            //        double total = 0.00;
            //        foreach (DataGridViewRow row in rows)
            //        {
            //            if (!row.IsNewRow)
            //            {
            //                double price = Double.Parse(row.Cells[2].Value.ToString());
            //                total = total + price;
            //            }
            //        }
            //        totalbox.Text = total.ToString();
            //    }
            //}
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:13:51.930

好吧，我希望我没看错。

所以你有一个充满数据的 SQL 表？两列分别称为“详细信息”和“价格”？

你有一个带有相同列的 Datagridview 的 Winform？

您还连接了它，以便您可以执行查询？

那么我这样想对吗？如果是这样，那么就到这里。

有几种方法可以做到这一点，简单快捷的方法也可以通过 SQL 进行检查。

所以创建一个简单的 Select 存储过程。

```
CREATE PROCEDURE [dbo].[ValidationResult]
@particular as varchar(50)
AS
SELECT Particulars, Price FROM Yourtable
WHERE Particulars = @particular 
```

如此简单的快速查询现在您需要做的就是设置链接。

```
public DataTable SQL_ValidateCheck(string part)
    {
        try
        {
            DataTable tbl_val = new DataTable();
            using (SqlConnection AutoConn = new SqlConnection(conn32))
            {
                AutoConn.Open();
                using (SqlCommand InfoCommand = new SqlCommand())
                {
                    using (SqlDataAdapter infoAdapter = new SqlDataAdapter(InfoCommand))
                    {
                        InfoCommand.Connection = AutoConn;
                        InfoCommand.CommandType = CommandType.StoredProcedure;
                        InfoCommand.CommandText = "dbo.ValidationResults";
                        InfoCommand.Parameters.AddWithValue("@particular", part);
                        InfoCommand.CommandTimeout = 180;

                        infoAdapter.Fill(tbl_val );
                        AutoConn.Close();
                        return tbl_val ;
                    }
                }
            }
        }
        catch (Exception e)
        {
            //MessageBox.Show("Error in connection :: " + e);

            return tbl_val ;
        }
    } 
```

现在您有一个包含验证选择查询结果的表。

您需要做的最后一件事是使用它。

```
private void Check_Val()
{
    DataTable myTable = new DataTable();
    myTable = SQL_ValidateCheck(mygrid.CurrentSelection.Cells[0].Value.ToString());
    //Iterate the table for the result, maybe use an if(mytable == null) or something
} 
```

可能在您的网格事件中使用此方法，完全取决于您。语法可能不正确，最近一直在使用 Telerik，因此请检查语法，但您应该明白这一点。

# facebook - 赞按钮的最后一个脚本未发布在墙上

> ID：16176477
> 
> 赞同：1
> 
> 时间：2013-04-23T18:23:31.360
> 
> 标签：facebook, facebook-like, facebook-wall

我在 facebook 开发人员页面中使用最新的脚本，但是当单击“like”按钮时，该文章没有发布在 facebook 墙上。

有问题的网页是[http://www.captap.com/blog](http://www.captap.com/blog)。我正在使用的代码如下

身体标签之后

```
<div id="fb-root"></div>

<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script> 
```

按钮代码：

```
<div class="fb-like" data-href="https://www.captap.com/blog/{categories limit='1'}{category_url_title}{/categories}/{url_title}" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T16:32:10.507

我遇到了同样的问题。您的代码看起来是正确的，但是有两件事可能会影响被喜欢的 URL。

1.  如果您有任何指定 URL 的 OpenGraph 标记，Facebook 将使用该 URL 覆盖按钮代码上的 href 标记。

    ```
    <meta property="og:url" content="https://www.captap.com/blog" /> 
    ```

2.  如果您在标题中有规范链接，Facebook 也可以更喜欢这个 URL，而不是您喜欢按钮代码上的 href 标记。

    ```
    <link rel="canonical" href="https://www.captap.com/blog" /> 
    ```

对于这些选项中的任何一个，您的选择是删除标题中的链接，或者更新链接以匹配您尝试喜欢的博客文章的永久链接。如果您的喜欢按钮位于帖子页面本身，则更新链接将起作用。但是，如果您的赞按钮位于包含多个帖子的页面上，您最好的办法是删除标题中的链接，这样它就不会覆盖您在赞按钮代码中包含的 href。

# python - 使用选择字段属性作为 ndb 的关键关系的成本更低/最简洁的方法

> ID：16176479
> 
> 赞同：0
> 
> 时间：2013-04-23T18:23:35.917
> 
> 标签：python, google-cloud-datastore, flask, app-engine-ndb, flask-wtforms

我在为最后两个（传感器/读数）建模键/父母时遇到问题。我想为每个人保留祖先路径。问题是我只能访问层次结构中的最后一个 id。这是否需要我每次都进行复杂的查询，还是有更简单的方法？

无论如何，我试图保持的层次结构是：

> 主页 -> 区域 -> 传感器 -> 读数

为了测试它，我制作了一些表格。每个表单的选择字段是这样完成的：

```
form.zonekey.choices = [ (h.key.id(),h.sensortype)for h in Sensor.query()] 
```

我意识到使用 id/key 是不安全的，因为它以 html 形式显示，但我不知道如何做到这一点，除了一路散列 id。

我的问题是我不能使用从表单中选择的上述 ID 来查找区域密钥和父项，因为密钥由区域和主页密钥组成，我不知道它们是什么。通过以下方式查找区域

ndb.Key(Zone, ID) 似乎不起作用（因为密钥实际上包括 Homekey 而我不知道那里）。

我唯一的选择是做这样的查询：

```
Zone.query().filter(Zone.zname == 'zonetest1') 
```

并获取它的密钥并将其用作层次结构中下一级（传感器）的父级。

这似乎是一种昂贵且复杂的方式。有没有更简单、更优雅的方法来做到这一点？

这是我的测试和结果的图片。

![我创建的区域表格](https://i.stack.imgur.com/6HqGe.png)

![我创建的传感器表单（显示选择字段）](https://i.stack.imgur.com/ZEtM8.png)

![我创建的阅读表格](https://i.stack.imgur.com/sEV4y.png)

![我在本地测试的输入列表。 显示主要功能](https://i.stack.imgur.com/ubGlV.png)

# java - Android App：我可以在 7 英寸平板电脑和 10 英寸平板电脑上显示不同的产品吗？

> ID：16176481
> 
> 赞同：0
> 
> 时间：2013-04-23T18:23:38.933
> 
> 标签：java, android

**编辑：这不是重复的帖子。我不是在问如何为 Android 实现不同的布局分辨率，而是如何以不同的分辨率动态列出产品，以便它们填充所需的空间。目前，10英寸显示屏上显示4行产品，7英寸显示屏上显示4行产品。这意味着用户需要在 7 英寸屏幕上垂直滚动才能查看所有内容。我希望产品动态填充空间，无需垂直滚动。感谢您的任何帮助。**

我正在帮助编写一个 Android 应用程序。在 10 英寸平板电脑中，我展示了 4 排产品（这就是我想要的）。在 7 英寸中，我应该只显示 3 行产品，但现在显示 4 行（如 10 英寸平板电脑），这会导致垂直滚动。是否可以编写代码在 7 英寸平板电脑上仅显示 3 行？

我的产品只能按预期左右移动——它不应该有垂直滚动。

更具体地说，问题是：是否可以在 10 英寸平板电脑上动态渲染产品显示 4 行产品，而在 7 英寸平板电脑上仅显示 3 行产品。为 7 英寸选择的布局很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:27:45.897

您需要 7 英寸和 10 英寸的单独布局

**适用于 7 英寸平板电脑**

*   布局-sw600dp

*   布局-sw600dp-端口

**适用于 10 英寸平板电脑**

*   布局-sw720dp

*   布局-sw720dp-端口

**更新示例**

```
res/layout this is the default, it is needed even if you don't plan to support phones! 
```

**适用于 3.2 及以上版本 Android 版本 ( >= 3.2 )**

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)

res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger) 

res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

**对于低于 3.2 版本的 Android 版本 (< 3.2 )**

```
res/layout-large                       # for 7" tablet (works on emulator and nexus7)

res/layout-xlarge                      # for 10" tablet (works on emulator and galaxytab10.1) 
```

# c# - 读取和修改 web.config asp.net 中的数据

> ID：16176482
> 
> 赞同：1
> 
> 时间：2013-04-23T18:23:44.227
> 
> 标签：c#, asp.net, web-config

我使用 web.config 中的以下代码对我的 asp.net 网站实施了访问限制

```
<authentication mode="Windows">
  </authentication>    
<authorization>
  <allow users="na\user1, phil\user2, so on" />
  <deny users="*"/>
</authorization> 
```

我应该为少数管理员用户提供一个界面（网页或模式弹出窗口），他们可以在其中查看当前用户、删除用户或添加用户以访问该站点。现在我想知道

1）如何以编程方式查找当前用户，即用户属性的值。

我通过使用来自[asp.net 的以下代码解决了它如何在我的代码中引用在 web.config 中硬编码的授权用户](https://stackoverflow.com/questions/11990606/asp-net-how-do-i-reference-authorized-users-hard-coded-in-web-config-in-my-code?rq=1)

```
AuthorizationSection configSection =
  (AuthorizationSection)ConfigurationManager.GetSection("system.web/authorization");

    var users = new List<string>();

    var rules = configSection.Rules;

    foreach (AuthorizationRule rule in rules)
    {
        if (rule.Action == AuthorizationRuleAction.Allow)
        {
            foreach (string user in rule.Users)
            {
                if (!users.Contains(user))
                {
                    users.Add(user);

                }
            }

        }
        //rule.Users.Add("phil\user3");
        //rule.Users.Remove("phil\\user2");
    } 
```

2) 如何在站点运行时通过删除或添加用户来更新 web.config？

我尝试使用上述代码中的注释行添加和删除用户，但这不起作用。

我在该代码中哪里错了？正如我所说，我需要在 web.config 中动态添加或删除用户，以便任何人都可以提供一些代码。提前致谢！

# django - 在 Django CMS 中，如何将没有子节点的导航节点与有子节点的导航节点分开？

> ID：16176484
> 
> 赞同：0
> 
> 时间：2013-04-23T18:23:50.370
> 
> 标签：django, django-cms, django-mptt

我有一个使用 Django CMS 构建的复杂导航。在导航中，页面分为三个级别。在渲染二级导航时，我想先按顺序显示所有作为叶子节点的二级页面，然后再显示所有二级页面及其子节点。

这是树结构的示例：

*   主页
*   关于我们
    *   二级
    *   深入
        *   我们是谁
        *   我们所做的
    *   Lorem Ipsum
*   联系我们
    *   等等

输出应该是这样的：

```
<ul>
  <li>Homepage</li>
  <li>About Us
    <ul class="lvl-2">
      <!-- All leaf nodes are grouped first -->
      <li>Level Two</li>
      <li>Lorem Ipsum</li>

      <!-- Then the nodes with children after -->
      <li>In Depth
        <ul class="lvl-3">
          <li>Who we are</li>
          <li>What we do</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Contact Us
    <ul class="lvl-2">
      <li>Etcetera</li>
    </ul>
  </li>
</ul> 
```

我更愿意找到一个不需要循环遍历节点两次的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:50:37.730

这是我用来显示每个节点任意数量的子节点的 menu.html 文件：

```
{% load menu_tags %}

{% for child in children %}
<li class="{% if child.selected or child.ancestor %}active{% endif %}{% if child.children %} dropdown{% endif %}">
    <a class="{% if child.children %}dropdown-toggle{% endif %}" {% if child.children %}data-toggle="dropdown"{% endif %} href="{% if child.children %}#{% else %}{{ child.attr.redirect_url|default:child.get_absolute_url }}{% endif %}">{{ child.get_menu_title|safe }}{% if child.children %} <b class="caret"></b>{% endif %}</a>
    {% if child.children %}
    <ul class="dropdown-menu">
        {% show_menu from_level to_level extra_inactive extra_active template "" "" child %}
    </ul>
    {% endif %}
</li>

{% endfor %} 
```

那里有一些 Twitter Bootstrap 特定的分类，但希望这能让你接近你所需要的。

# ruby-on-rails - Rails 资源丰富的路线

> ID：16176489
> 
> 赞同：0
> 
> 时间：2013-04-23T18:24:04.820
> 
> 标签：ruby-on-rails

在我的 rails 应用程序中，我将资源丰富的路由用于基本的 CRUD 功能。但在某些情况下，我会向我的控制器添加新的视图和方法（例如，特定的报告功能）。这些会自动包含在资源丰富的路线中吗？或者我是否必须在 routes.rb 中为每个获取或匹配行？

这就是我现在使用 routes.rb 的方式......似乎如果我必须明确指定所有内容，随着应用程序的增长，这将变得笨拙......

```
 resources :procedures

  resources :headlines

  devise_for :users

  resources :services

  resources :headlines  

  get  "welcome/index" 
  get "welcome/profile"
  get "welcome/kpi"
  get "welcome/inventory"
  get "public/index" 
  match "insurancelist" => "appointments#insurancelist"

  get "admin/index" 
  get "dentrix/index"
  get "dexis/index"
  get "eaglesoft/index"
  get "reports/index"
  get "reports/dentist"
  get "reports/office"
  get "reports/collections"

  resources :patients

shallow do
   resources :locations do
    resources :practitioners do
      resources :timecards
      resources :appointments
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:06:45.260

[您应该在此处](http://guides.rubyonrails.org/routing.html)阅读官方 Rails 指南中的路线

这里有一些针对您的问题的快速提示（我看到您想向您的资源添加一些非 REST 操作）。

让我们来看看。例如，您有一个项目模型和`projects`资源。并且您想`print`为项目项目添加操作（例如，在该操作中，您将准备要打印在纸上的报告）和`published`整个项目资源的操作（仅作为某种报告的选择操作）：

你应该写到你的`routes.rb`下一行：

```
resources :projects do
  collection do
    get :published
  end

  member do
    get :print
  end
end 
```

该代码为您提供了下一条路线：

```
GET    /projects           => projects#index
GET    /projects/published => projects#published
GET    /projects/new       => projects#new
POST   /projects           => projects#create
DELETE /projects/:id       => projects#destroy
PUT    /projects/:id       => projects#update
GET    /projects/:id       => projects#show
GET    /projects/:id/edit  => projects#edit
GET    /projects/:id/print => projects#print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:09:20.813

这些额外的路线不会包含在资源丰富的路线中。不幸的是，对于您示例中的路由，确实无法压缩它们，并且它们每个都需要路由文件中的单独一行。

# jquery - 删除一个类，然后用 jquery 隐藏它

> ID：16176490
> 
> 赞同：1
> 
> 时间：2013-04-23T18:24:08.513
> 
> 标签：jquery, hide, delay, show, addclass

我的以下代码似乎不起作用。

```
$("ul li a").live("click", function() {
        $(".myMegaMenuDiv").addClass('hideit').delay(300).removeClass('hideit');
 }); 
```

我有一个超级菜单，所以当你将鼠标悬停在一个菜单项上时，它会显示一个 div“.myMegaMenuDiv”。但是，当我单击该 div 中的链接时，我希望它消失，因为它目前没有。我希望上面的代码能解决这个问题。

“hideit”添加了一个值“display:none”

当我只有“addClass”时它可以工作，但是当我添加“delay”和“removeClass”时它会停止工作。

编辑：另外......在我隐藏“.myMegaMenuDiv”后，当我将鼠标悬停在导航菜单项上时菜单不会显示，所以它也需要删除类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:26:32.487

如果您只想在单击时隐藏 div，则可以使用该`hide`功能。此外，该`live`功能已弃用，因此最好使用`on`.

```
$("ul li a").on("click", function() {
    $(".myMegaMenuDiv").hide();
}); 
```

如果要隐藏和显示，可以使用 setTimeout：

```
$("ul li a").on("click", function() {
    $(".myMegaMenuDiv").hide();
    setTimeout(function() {
        $(".myMegaMenuDiv").show();
    }, 300);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T18:26:29.387

`.hide()`and`.show()`方法[可以接收一个数字来确定它们的持续时间](http://api.jquery.com/hide/)，因此你可以试试这个：

```
$(".myMegaMenuDiv").hide(300).show(0); 
```

如果你不想要动画，你也可以这样做：

```
$('.myMegaMenuDiv').hide(0).delay(300).show(0) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T18:26:33.603

`delay`不仅仅是一个简单的暂停计时器。它仅适用于动画队列中的项目。你需要使用`setTimeout`

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# angularjs - Angular Jasmine spyOn 查询调用

> ID：16176492
> 
> 赞同：4
> 
> 时间：2013-04-23T18:24:23.063
> 
> 标签：angularjs, jasmine

我对 Angular 和 Jasmine 很陌生，当我试图伪造服务“查询”调用时遇到问题。以下内容被“描述”包围：

```
var mockBackend;

beforeEach(inject(function($rootScope, $controller, AppServ) {
  // We need to setup our controllers to use fake services provided by angular-mocks
  $scope = $rootScope.$new();
  mockBackend = AppServ;

  $controller('AppInformationController', {
    $scope: $scope,
    AppServ: mockBackend
  });
}));

it("should try to call the service, but we intercept it", function() {
  spyOn(mockBackend, 'query').andReturn({'title':'Mock title'});

  $scope.serverAppNameChange();
  expect($scope.app.title).toBe("Mock title");
}); 
```

“AppServ”上方是我的服务，每当测试对该服务调用“查询”以返回一些默认信息时，我想拦截。实际上，这只是为了了解 Jasmine 和 Angular 是如何工作的。该服务本身只保留本地副本（它基本上是一个假服务）。

这是服务：

```
Services.factory("AppServ", function($http) {
  var app = {};
  var theAppOnServer = {};

  app['query'] = function() {
    return theAppOnServer;
  };

  app['save'] = function(app) {
    theAppOnServer = $.extend({}, app);
  };

  app['updateApp'] = function() {
    theAppOnServer['title'] = "Title From Server";
  };

  return app;
}); 
```

这是控制器：

```
MobileIntake.controller("AppInformationController", function($scope, AppServ) {
  $scope.app = AppServ.query();

  //var AppOverviewController = function($scope) {
  $scope.appNameChange = function(oldValue, newValue, scope) {
    console.log("You've changed the app name!");
  };

  $scope.serverAppNameChange = function() {
    AppServ.updateApp();
  };
  // Set up a watcher if we want to be updated by other things (like the server)
  $scope.$watch("app.title", $scope.appNameChange);

}); 
```

有人可以告诉我为什么 spyOn 似乎没有拦截服务上的“查询”函数调用吗？我已经看到了其他几个答案，他们正在使用 $http 和一些特殊的逻辑，但我只是想知道我也可以拦截非 http 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:43:17.373

您不需要额外的`mockBackend`对象。只需监视服务本身。

```
beforeEach(inject(function($rootScope, $controller) {
  // We need to setup our controllers to use fake services provided by angular-mocks
  $scope = $rootScope.$new();

  $controller('AppInformationController', {
    $scope: $scope
  });
}));

it("should try to call the service, but we intercept it", inject(function(AppServ) {
  spyOn(AppServ, 'query').andReturn({'title':'Mock title'});

  $scope.serverAppNameChange();
  expect($scope.app.title).toBe("Mock title");
})); 
```

# javascript - 使元素适合父元素

> ID：16176494
> 
> 赞同：0
> 
> 时间：2013-04-23T18:24:29.427
> 
> 标签：javascript, jquery, math

我正在尝试做以下事情：

在保持纵横比的小 div 元素中放置一个巨大的图像。
但是没有使用像 max-width 这样的 CSS 技巧。手动将宽度/高度设置为正确的值。

这是我解释我正在尝试做的最简单的方法。
我得到以下值：

图像的原始宽度/高度。
目标 div 的宽度/高度。

我尝试了以下示例以使其适合父元素。

```
if(ratio < 1) {
    setWidth = Math.round((targetH * ratio));
} else {
    setHeight = Math.round((targetW / ratio));
} 
```

它查看纵横比并使用它调整大小。
只要纵横比低于 1，就可以正常工作。如果超过它，高度就会开始变得混乱。当你从 0.99 到 1 并且有相当多的额外高度时，它似乎也会跳跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:48:40.187

乔通过他发送到另一个 stackoverflow 问题的链接让我走上了正确的道路。以下代码是我最终使用的。

“**宽度**”是要缩放的元素的当前宽度。
“ **height** ” 是要缩放的元素的当前高度。
“ **targetW** ”是刻度的最大宽度。
“ **targetH** ” 是刻度的最大高度。

将元素完美地放入父元素中。无论长宽比如何。

```
if(width > targetW){
    ratio = targetW / width;
    height = height * ratio;
    width = width * ratio;
}

if(height > targetH){
    ratio = targetH / height;
    width = width * ratio;
    height = height * ratio;
} 
```

感谢@Joe

# svg - d3 对象不在 IE10 上的 svg 范围内呈现

> ID：16176500
> 
> 赞同：1
> 
> 时间：2013-04-23T18:24:48.580
> 
> 标签：svg, d3.js

如图所示，以 0,0 为中心绘制的圆在 chrome 上正确显示，但在 IE10 上它溢出了 SVG 边界。我需要做什么才能让它在 IE 上正确呈现？

![IE 和 Chrome 中的 D3 渲染](https://i.stack.imgur.com/xf9yw.png)

这是代码：

```
<body>
  <div id="chart1">
  </div>
    <script>
      var width = 50,height = 50;
      var SVGmap = d3.select("#chart1")
                      .append("svg")
                      .attr("width", width)
                      .attr("height", height);

      var g = SVGmap.append("g");
      g.append("circle") 
        .style("stroke", "gray")
        .style("fill", "red")
        .attr("r", 40)
        .attr("cx", 0)
        .attr("cy", 0)

    </script> 
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:41:13.790

谢谢罗伯特。添加`.attr("overflow", "hidden")`到 SVG 元素可以解决这个问题。

# java - 使用链表读取 Java 中的图像/文本文件

> ID：16176506
> 
> 赞同：0
> 
> 时间：2013-04-23T18:25:13.243
> 
> 标签：java, swing, list

我正在为我的编程模块开发一个学生项目，在这个项目中，我们必须构建一个项目来整合许多不同的 Java 功能，主要是 GUI 设计和高级数据结构，所以我正在开发一个用于 Java 培训学生的系统，他们在那里将在系统中注册，学习不同的 Java 教程并参加考试。我现在停留在其中一个教程上，因为我认为这是一个好主意，而不是让多个页面浏览教程，当用户点击“下一步”按钮或“返回键。因此，所有图像和文本文件的名称都将存储在一个链表中（因此顺序正确），教程将从索引 1（开始）开始，因此将显示图像 1 和内容 1，当用户点击下一个时，索引将增加 1，并且图像和内容将被更新。我目前收到一条错误消息

```
java.lang.NullPointerException at gui.Tutorial1page1.imageSelect(Tutorial1page1.java:66)
at gui.Tutorial1page1.<init>(Tutorial1page1.java:69)
at gui.Tutorial1page1$1.run(Tutorial1page1.java:39)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

任何关于从哪里开始寻找或什至不可能的建议将不胜感激。可能还应该提到在我添加链接列表之前，整个事情只是在阅读图像。谢谢 ：-）

```
package gui;

import java.awt.EventQueue;
import java.awt.TextArea;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.Color;
 import javax.swing.JButton;
import java.awt.Font;
import javax.swing.BorderFactory;
 import javax.swing.JLabel;
import javax.swing.ImageIcon;
import javax.swing.JProgressBar;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.FileReader;
import java.io.IOException;
import java.util.LinkedList;
import java.util.Scanner;

public class Tutorial1page1 extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Tutorial1page1 frame = new Tutorial1page1();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

//declare the linkedlist for the images
private LinkedList<String> imageContent;

//declare int for the index of what image to select
//this will increase by one when user hits next button & decrease for back button
int index = 1;

//store the names of the files in order, add last will add them to end of list
public void Images()
{
    imageContent = new LinkedList<String>();
    imageContent.addLast("\"IfStatement.png\"");
    imageContent.addLast("\"IfElseStatement.png\"");
}

//select image
public String imageSelect(int index)
{
return imageContent.get(index);
}

String image = imageSelect(index);
/**
 * Create the frame.
 * @throws IOException 
 */
public Tutorial1page1() throws IOException {

    //create, format and locate jframe
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//exit program when framed closed
    setBounds(300, 75, 800, 600);
    contentPane = new JPanel();
    contentPane.setBackground(Color.WHITE);
    setContentPane(contentPane);
    contentPane.setLayout(null);

    //create, format and position button for going back through pages of tutorial
    //should this be disabled on first page??
    JButton btnBack = new JButton(" < Back ");
    btnBack.setForeground(Color.WHITE);
    btnBack.setFont(new Font("Tahoma", Font.PLAIN, 20));
    btnBack.setBackground(Color.BLUE);
    btnBack.setBounds(150,500,120,30);
    contentPane.add(btnBack);

    //create, format and position button for quitting the tutorial
    JButton btnQuit = new JButton("Quit");
    btnQuit.setForeground(Color.WHITE);
    btnQuit.setFont(new Font("Tahoma", Font.PLAIN, 20));
    btnQuit.setBackground(Color.BLUE);
    btnQuit.setBounds(350,500,120,30);
    contentPane.add(btnQuit);

    //add button listener for Next button
    btnQuit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            dispose();//close current screen
            //open main screen
            try {
                Main frame = new Main(); 
                //open last page of tutorial, in this case main module page
                frame.setVisible(true);
                //open in centre of screen
                frame.setLocationRelativeTo(null);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

    //create, format and position button for going forward through pages of tutorial
    JButton btnNext = new JButton("Next > ");
    btnNext.setForeground(Color.WHITE);
    btnNext.setFont(new Font("Tahoma", Font.PLAIN, 20));
    btnNext.setBackground(Color.BLUE);
    btnNext.setBounds(550,500,120,30);
    contentPane.add(btnNext);

    //add button listener for Next button
    btnNext.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            dispose();//close current screen
            //open main screen
            try {
                Tutorial1page2 frame = new Tutorial1page2(); //open next page of tutorial
                frame.setVisible(true);
                //open in centre of screen
                frame.setLocationRelativeTo(null);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

    //create, format and position help button on each page of tutorial
    //uses label appearance method to look like linked text
    JButton btnHelp = new JButton("Help");
    btnHelp.setForeground(Color.WHITE);
    btnHelp.setBackground(Color.BLUE);
    btnHelp.setFont(new Font("Tahoma", Font.BOLD, 15));
    btnHelp.setBounds(740,0,50,50);
    contentPane.add(btnHelp);
    Login.labelAppearance(btnHelp);

    //import and position resized icon
    BufferedImage iconresized = ImageIO.read(this.getClass().getResource("/gui/iconresized.png"));
    JLabel picLabel = new JLabel(new ImageIcon(iconresized));
    contentPane.add(picLabel);
    picLabel.setBounds(5,10,50,80);

    //create, format and position label for the Tutorial description
    //this will remain the same on all pages of this tutorial
    JLabel lblTutorial1 = new JLabel("TUTORIAL 1 - Composition : If, switch, while & for statements");
    lblTutorial1.setFont(new Font("Gisha", Font.BOLD, 22));
    lblTutorial1.setForeground(Color.BLUE);
    lblTutorial1.setBounds(60, 40, 675, 44);
    lblTutorial1.setBorder(BorderFactory.createLineBorder(Color.BLUE));
    contentPane.add(lblTutorial1);

    //create, format and position label for the title of this page
    //this changes on each page of each tutorial
    JLabel lblIntroductionT1 = new JLabel("Introduction - Select Statements");
    lblIntroductionT1.setFont(new Font("Gisha", Font.ITALIC, 15));
    lblIntroductionT1.setForeground(Color.RED);
    lblIntroductionT1.setBounds(20, 125, 300, 26);
    contentPane.add(lblIntroductionT1);

    //create new text field for displaying notes on the page
    //this will wrap text to the text field horizontally, but allow a vertical scroll bar
    //if the text goes on too long to fit the field vertically
    TextArea Content1 = new TextArea("", 4, 30, TextArea.SCROLLBARS_VERTICAL_ONLY);
    Content1.setBounds(20, 155, 400, 300);
    contentPane.add(Content1);
    //add(textField, BorderLayout.NORTH);
    Content1.setEditable(false);

    //read in text file for content
    FileReader readtextfile = new FileReader("src/gui/Tutorial1content.txt");

    //open scanner
    Scanner FileReaderScan = new Scanner(readtextfile);

    //create sting Tut1content to store what is read in
    String Tut1content ="";

    //while there is another line in text file add it to string
    while(FileReaderScan.hasNextLine()){
        String temp = FileReaderScan.nextLine() + "\n";
        Tut1content = Tut1content + temp;

    }

    //add contents of string to the text area
    Content1.append(Tut1content);

    //close scanner
    FileReaderScan.close();

    //import and position the diagram to go with text
    //both should be parallel to each other

    //read in image
    BufferedImage IfState = ImageIO.read(this.getClass().getResource(imageSelect(index)));

    //set image in JLabel
    JLabel picLabel2 = new JLabel(new ImageIcon(IfState));
    //add border to picture
    picLabel2.setBorder(BorderFactory.createLineBorder(Color.black));
    //add to frame
    contentPane.add(picLabel2);
    //set bounds, location
    picLabel2.setBounds(450,155,300,300);

    //create and position progress bar so user can track where they are in tutorial

    JProgressBar tut1progressBar = new JProgressBar(0,5);
    tut1progressBar.setValue(1); //page 1 of 5
    tut1progressBar.setBounds(220, 550, 380, 14);
    contentPane.add(tut1progressBar);

    //add label to progress bar to show page number currently on
    JLabel lblProgress1 = new JLabel("Page 1/5");
    lblProgress1.setFont(new Font("Gisha", Font.ITALIC, 10));
    lblProgress1.setForeground(Color.RED);
    lblProgress1.setBounds(690, 540, 80, 26);
    contentPane.add(lblProgress1);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:32:06.623

如果我弄错了，请纠正我，但是在您的代码中，我没有看到您调用该`Images`方法，这是实例化`LinkedList<T>`并填充它的方法。`.get`由于您正在调用`null`参考，因此您将获得一个`NullPointerException`.

另一方面，请在您的代码中遵循 Java 命名约定（因此方法名称和变量应采用**camelCase 格式**）。

# android - 通过互联网以编程方式设置 android/pc 应用程序之间的通信

> ID：16176508
> 
> 赞同：2
> 
> 时间：2013-04-23T18:25:19.903
> 
> 标签：android, client-server

我想让我的 android 应用程序通过 wifi 或以太网与 pc 端的另一个应用程序交互。我已经通过 wifi 或以太网将我的 android 设备连接到本地网络。但我不知道如何让这些应用程序相互检测并进行通信。我已经阅读了 developer.android.com 上的培训教程，但所有内容都取决于 API16。但我使用的是 2.3.3 API10。

谁能告诉我如何做到这一点以及在哪里可以找到相关教程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:54:47.947

如果您愿意考虑使用 C# 开发，即 xamarin.android，您可以考虑使用兼容的网络库以节省一些时间。如果是这样，请查看[NetworkComms.Net](http://www.networkcomms.net)。

免责声明：我是这个库的开发人员。

# seo - Robots.txt in my project root

> ID：16176513
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:25:25.510
> 
> 标签：seo, robots.txt

I've seen tutorials/articles discussing using Robots.txt. Is this still a necessary practice? Do we still need to use this technique?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:56:52.550

Robots.txt file is not necessary but it is recommended for those who want to block few pages or folders on your website being crawled by search engine crawlers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:35:15.347

I agree with the above answer. Robot.txt file is used for blocking pages and folders from crawling by search engines. For eg. You can block the search engines from crawling and indexing the Session IDs created, which in rare cases could become a security threat! Other than this, I don't see much importance.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:06:58.947

The way that a lot of the robots crawl through your site and rank your page has changed recently as well.

I believe for a short period of time the use of Robot.txt may have helped quite a bit, but no adays most other options you'll take in regards to SEO will have more of a positive impact than this little .txt file ever will.

Same goes for backlinks, they used to be far far more important than they are now for you getting ranked.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T15:35:55.433

Robots.txt is not for indexing . its used to blocks the things that you don't want search engines to index

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-27T12:50:11.197

Robots.txt can help with indexation with large sites, if you use it to reveal an [XML sitemap file](http://www.sitemaps.org/protocol.html).

Like this:

```
Sitemap: http://www.domain.com/sitemap.xml 
```

Within the XML file, you can list up to 50,000 URLs for search engines to index. There are plugins for many content management systems that can generate and update these files automatically.

# javascript - 在jQuery ajax json响应中解析iso日期

> ID：16176514
> 
> 赞同：3
> 
> 时间：2013-04-23T18:25:27.037
> 
> 标签：javascript, ajax, json, jquery

我在以 json 格式解析我的 jQuery-ajax 响应中的日期时遇到问题。

我的客户端代码：

```
$.ajax({
    url: '/index',
    dataType: 'json',
    success: function (data) {
        console.log(data.date);
    }
}); 
```

服务器正在发送 json：

```
{
    "name": "john",
    "date": "2013-07-01T00:00:00",
} 
```

运行客户端代码后，我在控制台中收到一个**字符串**内容：

```
2013-07-01T00:00:00 
```

这不是日期类型。我认为这将由解析器完成。我需要做什么才能**在 json 解析期间自动解析**我的日期？

克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T04:28:49.797

好的，我从[http://erraticdev.blogspot.com/2010/12/converting-dates-in-json-strings-using.html](http://erraticdev.blogspot.com/2010/12/converting-dates-in-json-strings-using.html)找到了一个不错的解决方案：

```
/*!
 * jQuery.parseJSON() extension (supports ISO & Asp.net date conversion)
 *
 * Version 1.0 (13 Jan 2011)
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function ($) {

    // JSON RegExp
    var rvalidchars = /^[\],:{}\s]*$/;
    var rvalidescape = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;
    var rvalidtokens = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;
    var rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g;
    var dateISO = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z?/i;
    var dateNet = /\/Date\((\d+)(?:-\d+)?\)\//i;

    // replacer RegExp
    var replaceISO = /"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z?"/i;
    var replaceNet = /"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/i;

    // determine JSON native support
    var nativeJSON = (window.JSON && window.JSON.parse) ? true : false;
    var extendedJSON = nativeJSON && window.JSON.parse('{"x":9}', function(k,v){return "Y";}) === "Y";

    var jsonDateConverter = function(key, value) {
        if (typeof(value) === "string") {
            if (dateISO.test(value)) {
                if (value == '0001-01-01T00:00:00') {
                    return null;
                }

                return new Date(value);
            }
            if (dateNet.test(value))
            {
                return new Date(parseInt(dateNet.exec(value)[1], 10));
            }
        }
        return value;
    };

    $.extend({
        parseJSON: function(data, convertDates) {
            /// <summary>Takes a well-formed JSON string and returns the resulting JavaScript object.</summary>
            /// <param name="data" type="String">The JSON string to parse.</param>
            /// <param name="convertDates" optional="true" type="Boolean">Set to true when you want ISO/Asp.net dates to be auto-converted to dates.</param>

            if (typeof data !== "string" || !data) {
                return null;
            }

            // Make sure leading/trailing whitespace is removed (IE can't handle it)
            data = $.trim(data);

            // Make sure the incoming data is actual JSON
            // Logic borrowed from http://json.org/json2.js
            if (rvalidchars.test(data
                .replace(rvalidescape, "@")
                .replace(rvalidtokens, "]")
                .replace(rvalidbraces, "")))
            {
                // Try to use the native JSON parser

                if (extendedJSON || (nativeJSON && convertDates !== true))
                {
                    return window.JSON.parse(data, convertDates === true ? jsonDateConverter : undefined);
                }
                else {
                    data = convertDates === true ?
                        data.replace(replaceISO, "new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))")
                            .replace(replaceNet, "new Date($1)"):
                        data;
                    return (new Function("return " + data))();
                }
            } else
            {
                $.error("Invalid JSON: " + data);
            }
        }
    });
})(jQuery); 
```

用法：

```
$.ajax({
    url: '/index',
    // dataType: 'json', <- remove it
    converters: {
        "text json": function (data) {
            return $.parseJSON(data, true);
        }
    },
    success: function (data) {
        console.log(data.date);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:27:28.927

像这样

```
var myDate = new Date("2013-07-01T00:00:00") 
```

JavaScript 支持开箱即用的 ISO 8601 解析

# c++ - 排序函数，它采用指向接口类的指针向量

> ID：16176516
> 
> 赞同：2
> 
> 时间：2013-04-23T18:25:30.633
> 
> 标签：c++, class, inheritance

我最近开始学习 c++（没有事先的编程知识）。我使用了 Alex Allian 的《Jumping into c++》一书，我发现它最有用！然而，我已经读到了类、继承和多态性的章节，虽然我确实理解了其中的大部分内容，但我只是无法解决这个问题。

在书中，我被要求解决以下问题：

> 实现一个排序函数，它接受一个指向接口类 Comparable 的指针向量，该类定义了一个方法 compare(Comparable& other)，如果对象相同，则返回 0，如果对象大于其他对象，则返回 1，以及 -1如果对象小于其他对象。创建一个实现该接口的类，创建几个实例，并对它们进行排序。如果您正在寻找创建内容的灵感，请尝试使用具有名称和分数的 HighScoreElement 类，并进行排序以使最高分数在前，但如果两个分数相同，则按名称对它们进行排序。

我创建了 Comparable 和 HighScores 类：

```
class Comparable {

public:

    virtual int compare(Comparable& other)=0;

};

class HighScore : public Comparable {

public:
    HighScore(int, std::string);

    virtual int compare(Comparable& other);

private:
    int highscore;
    std::string name;

}; 
```

如果我尝试覆盖 HighScore 中的继承函数，我无法将 int highscore 与（Comparable& other）的 int highscore 进行比较，因为我无法访问 other.highscore。下面的例子：

```
int HighScore::compare(Comparable& other){

    if (highscore == other.highscore) {
        return 0;
    }

    //...
} 
```

我想我可以将虚拟方法更改为：

```
int HighScore::compare(HighScore& other){

    if (highscore == other.highscore) {
        return 0;
    }

    //...
} 
```

因为那将允许我访问 other.highscore （我希望我能工作，因为 HighScore 也可以被认为是可比的。但可惜没有这样的运气。我该怎么办，我完全不知道如何继续，我将不胜感激我能得到的任何帮助。谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:47:19.207

实际上，在像 C++ 这样的单调度语言中，尝试基于两个或多个对象的运行时类型来选择行为有点繁琐。

最简单的解决方案是使用 RTTI 来确定另一个对象是否具有与我们相当的类型：

```
int HighScore::compare(Comparable& other){

    int other_highscore = dynamic_cast<HighScore&>(other).highscore;

    if (highscore == other_highscore) {
        return 0;
    }

    //...
} 
```

如果类型不可比较，这将引发异常，这可能是您能做的最好的事情。

或者，您可以实现涉及两个虚函数的双重调度机制（例如“访问者模式”）。我会让你自己研究一下，因为一个例子会很冗长，而且不是特别鼓舞人心。

希望您很快就会学会如何使用编译时泛型而不是运行时抽象接口来做到这一点，这在 C++ 中更为惯用。如果这本书没有教你这一点，那就扔掉它，取而代之的是[其中之一。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:31:26.303

您可以编写一个 pulic getter 函数来获取分数

```
class Comparable {
public:
    int get_score() const = 0;
    //
}

class HighScore : public Comparable {
public:
    int get_score() const { return highscore; } 
```

然后用它来比较。

```
int HighScore::compare(Comparable& other){

    if (highscore == other.get_score()) {
                           ^^^^^^^^^^^
        return 0;
    }

    //...
} 
```

* * *

但是由于只有派生类有`highscore`成员，所以您可能应该更改传递给比较的内容。

```
int HighScore::compare(HighScore& other) 
```

或将`highscore`成员移动到基类。无论哪个男性对你有感觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:41:21.057

我建议选择另一本关于这个主题的书。因为这个练习看起来很模糊，并且不能很好地理解多态性。棘手的部分是，当您进入`Comparable`您的`compare`方法时，您不知道它是否是`HighScore`或其他派生类。而且，如果您尝试比较的类不是`HighScore`等于小于和大于等术语的实例，则没有任何意义。因此，没有办法正确解决这个问题。您当然可以使用`dynamic_cast`它来检查它是否为`HighScore`，但如果它大于、小于或等于不是`HighScore`.
想象一下，有类似的东西`class Color : public Comparable {`存在。如果您将 Color 与 HighScore 进行比较，您应该返回什么？蓝色大于 10，还是黄色小于 15，红色等于什么？

# java - JMenuItem - 如何确定加速器是否调用了动作？

> ID：16176523
> 
> 赞同：2
> 
> 时间：2013-04-23T18:25:48.083
> 
> 标签：java, swing, jmenuitem

所以我必须在 Swing 中为我的 Java 类创建一个简单的 GUI，我偶然发现了这个小问题。

我有以下代码：

```
 JMenuItem mntmQuit = new JMenuItem("Quit");
    mntmQuit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (e.getModifiers() == MouseEvent.BUTTON1_MASK) {
                System.out.println("You should fire.");
            } else if (e.getModifiers() == MouseEvent.BUTTON2_MASK || e.getModifiers() == MouseEvent.BUTTON3_MASK) {
                System.out.println("Why do you fire this event?");
            } else {
                System.out.println("And how can I catch when the accelerator was used?");
            }
        }
    });
    mntmQuit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, 0)); 
```

我从来没有见过在右键单击或使用除按钮 1 之外的任何其他鼠标按钮时调用的菜单项。看起来 Swing 对此的看法不同，并且无论按下哪个鼠标按钮都会发送一个动作事件 - 与`JButton`哪个不会除非用鼠标按钮 1 单击它，否则触发任何东西。

现在我可以忍受这一点，因为我可以轻松地抓住鼠标按钮 1 并执行我的操作，但是如何抓住加速器的使用情况呢？它将触发动作事件，但我看不到任何捕捉它的可能性，因为它返回“0”作为修饰符（与除 1、2 和 3 之外的任何其他鼠标按钮相同）。

有什么方法可以告诉我`JMenuItem`它应该只对鼠标按钮 1 和它的加速器做出反应？类似的方式`JButton`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:43:54.010

```
 JMenuItem mntmQuit = new JMenuItem("Quit");
    mntmQuit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (!(e.getModifiers() == InputEvent.BUTTON3_MASK)) {
                System.out.println(e.getActionCommand());
            }
        }
    });
    mntmQuit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, 0)); 
```

**编辑：**

我已经改变了我的答案，而不是检查事件何时被触发，你应该检查何时不触发它。所以在这种情况下，`Button3`还是右键单击。当您按“q”或任何鼠标单击时，该事件将始终触发。

先前的答案很糟糕，您不想使用`e.getModifiers()`，因为它可能会为您不想返回 true 的事件返回 true。例如，如果您将“q”和“w”设置为同一个按钮，但它们做不同的事情，这两个事件都会在第一个`if`语句检查时触发`e.getModifiers() == 0`

很抱歉造成混乱，希望这更有意义。

# angularjs - angularFire 无法删除数据

> ID：16176530
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:01.920
> 
> 标签：angularjs, firebase

我正在创建一个使用 angularFire 将 Angular.js 与 firebase 集成的练习应用程序。到目前为止，我能够下拉数据、显示数据并添加数据。但由于某种原因，我无法删除现有数据。我添加了一个使用 ng-click 指向 removeProject 的按钮，点击后，该条目将从列表中消失，但如果刷新页面，该条目会重新出现，就好像它从未被删除过一样。我已经在本地尝试过并在外部托管，两者都有相同的结果。

这是添加条目的工作代码：

```
$scope.addProject = function() {
    $scope.projects.add({name: $scope.newName, status: $scope.newStatus});
    $scope.newName = "";
    $scope.newStatus = "";
}; 
```

这是应该删除条目的损坏代码：

```
$scope.removeProject = function(project) {
    $scope.projects.splice($scope.projects.indexOf(project), 1);
}; 
```

我从 todo 示例中采用了这种模式，只是更改了名称，但它不起作用。

# lisp - 在 Lisp 中搜索 BST

> ID：16176531
> 
> 赞同：1
> 
> 时间：2013-04-23T18:26:02.417
> 
> 标签：lisp, scheme, binary-search-tree

我正在编写一个程序，将机器人从 BST 引导到目标编号。该程序有两个输入参数，一个整数形式的目的地，以及一个表示机器人可以遵循的所有路径的地图。

即：（机器人64'（53（（）（64（）（））））））

其中 64 是目的地，53 ( () ( 64 () () ) )) 是 BST。

我需要帮助编写方法。这是我最初的工作。

```
(define (robot goal map)
  (let ((x (car map)))
    (define empty? '())
    (display x)
    (cond (empty? x)
          (robot goal (cadr map)))
    (cond ((= goal x)) (display x))
    (cond (< x goal)
          (robot goal (cadr map)))
    (cond (> x goal)
          (robot goal (caddr map)))
    ;(display "NULL")
  ) 
) 
```

它应该搜索 BST，如果找到路径，它会打印（找到：# T # T ... # T #），如果您的目的地在树中但不是根（# 是位置编号和 T是 L 或 R，表示您在位置 # 处左转或右转。

注意：直到昨天我才使用 Lisp，如果我看起来有点迷茫，很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:01:13.377

对于手头的问题，该过程的结构不正确 - 您没有正确处理递归，并且您没有为请求的输出构建一个列表。这也不是正确的使用方式`cond`，你不应该重新定义现有的程序`map`和`empty?`. 另外，如果元素不在树中会发生什么？`(car tree)`在确定树是非空的之前，你不能这样做。

我将提供解决方案的正确结构并给您一些提示，以便您自己制定解决方案，如果在树中找不到该元素，我们将返回一个列表，其中的值`not-found`位于最后一个位置。

```
(define (robot goal tree)
  (cond ((empty? tree)     ; if the tree is empty
         '(not-found))     ; return special value indicating it
        ((= <???> goal)    ; if the current element is goal
         <???>)            ; return a list with current element
        ((< goal <???>)    ; if goal is less than current element
         (cons <???>       ; cons current element
               (cons <???> ; with L and advance the recursion
                     (robot goal <???>))))   ; going to the left
        (else              ; otherwise
         (cons <???>       ; cons current element
               (cons <???> ; with R and advance the recursion
                     (robot goal <???>)))))) ; going to the right 
```

请注意，搜索 BST 的正确方法始终是：

1.  检查树是否为空
2.  如果不是，请检查当前元素是否是我们正在寻找的元素
3.  如果不是，检查我们要查找的元素是否小于当前元素，如果是则转到左子树
4.  否则转到右子树

作为最后的建议，不要忘记测试您的解决方案：

```
(robot 64 '(53 () (64 () ())))
=> '(53 R 64)

(robot 42 '(53 () (64 () ())))
=> '(53 L not-found) 
```

# python - Celery 尝试连接到错误的代理

> ID：16176533
> 
> 赞同：7
> 
> 时间：2013-04-23T18:26:07.080
> 
> 标签：python, redis, celery, celeryd

我有我的芹菜配置

```
BROKER_URL = 'redis://127.0.0.1:6379'
CELERY_RESULT_BACKEND = 'redis://127.0.0.1:6379' 
```

然而，每当我运行 celeryd 时，我都会收到此错误

```
consumer: Cannot connect to amqp://guest@127.0.0.1:5672//: [Errno 111] Connection refused. Trying again in 2.00 seconds... 
```

为什么它没有连接到我设置的 redis 代理，它正在运行 btw？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T09:56:38.200

导入您的芹菜并像这样添加您的经纪人：

```
celery = Celery('task', broker='redis://127.0.0.1:6379')
celery.config_from_object(celeryconfig) 
```

此代码属于 celery.py

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-29T23:03:04.087

如果您遵循Celery教程的[第一步，特别是：](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#using-celery-with-django)

```
app.config_from_object('django.conf:settings', namespace='CELERY') 
```

那么你需要在你的设置前面加上前缀`CELERY`，所以将你的更改`BROKER_URL`为：

```
CELERY_BROKER_URL = 'redis://127.0.0.1:6379' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-19T22:26:06.117

我收到此回复是因为我在终端上错误地启动了我的芹菜工人。

我之前在跑步：

```
celery -A celery worker 
```

但是因为我`celery`在里面定义了`web/server.py`，我需要运行：

```
celery -A web.server.celery worker 
```

`web.server`表示我的`celery`对象位于目录 web 内的文件 server.py 中。运行连接到我指定的代理的后一个命令！

# matlab - fft 在 matlab 中的音频文件样本上

> ID：16176534
> 
> 赞同：1
> 
> 时间：2013-04-23T18:26:08.360
> 
> 标签：matlab, audio, signal-processing, fft

我正在尝试从声音文件中提取信息，以便在我正在研究的视频分类算法中使用它。

我的问题是我不知道如何在 Matlab 中准确处理音频文件。

以下是我需要完成的：

*   打开音频文件并获取采样率/频率
*   我需要在 2 秒的窗口上工作，所以我必须循环文件并每隔 2 秒作为一个窗口，然后在每个窗口上执行 ftt（快速傅立叶变换）。

之后轮到我使用这些价值观做我想做的事

任何帮助，将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:45:35.970

以下代码可能只会给您一些想法。您可能需要确定另一个 fft 大小，一个窗口函数，如汉明等。

读取 wav 文件：

```
[data, Fs] = wavread('path.wav'); 
```

拆分为 2 秒窗口并获得 fft：

```
frameFFT = [];
timeStep = Fs*2;
for i=1:timeStep:length(data)-timeStep
   frameFFT = [frameFFT; fft(data(i:i+timeStep-1),1024)];
end 
```

# twitter - 通过 Twitter 应用程序登录说像应用程序未授权访问用户帐户

> ID：16176535
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:17.097
> 
> 标签：twitter, twitter-oauth

我们在 iPad 上开发了一个应用程序，它还提供通过 Twitter 帐户登录的能力。我们在 Twitter 上创建了开发者帐户，并为代码提供了有效的详细信息，例如令牌和密钥。但是当尝试登录时，它说像应用程序没有被授权访问用户帐户。我确保在 Twitter 开发人员帐户上的 Twitter 应用程序中授予读/写权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:52:03.740

我解决了这个问题。原因是，必须在 Twitter 开发者帐户的应用程序设置中设置网站地址和回调 URL。

# c# - 添加列表 - 两种不同的方法

> ID：16176544
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:34.103
> 
> 标签：c#, list, object, appendto

我有一个教室列表，然后我得到那个教室里的学生列表。在这个方法中，我首先创建了一个 ClassRoom 列表。然后我得到那个教室里的学生名单。现在，当我尝试将学生列表添加到第一个列表时。我得到这个错误。

> List 的最佳重载方法匹配...具有无效参数

```
public static List<MyList> getRecords()
{
    int id = 10;
    int id2 = 20;
    List<MyList> ClassRooms = GetClassRooms(id);
    foreach(MyList Students in ClassRooms)
    {
        List<MyList> studentProfile = GetStudentProfile(id, Students.ID);
        foreach(MyList studentDetail in studentProfile) ClassRooms.Add(studentDetail);
    }   
    return ClassRooms;
} 
```

我究竟做错了什么？

更新 -

```
public class MyList
{
    public int ID;
    public string Class Number;
    public bool Active;
    public int StudentID;
    public string FirstName;
    public string LastName;
    public int TotalStudents;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:13:24.260

您可能需要重新考虑您的类结构和变量名称。我不确定 MyList 应该代表什么，学生或教室。不过，您可以使用 Select 语句解决手头的问题：

```
List<MyList> ClassRooms = GetClassRooms(id)
    .Select(classroom => GetStudentProfile(id, classroom.ID));
return ClassRooms; 
```

这将获取教室列表中的每个班级，对其调用 GetStudentProfile，并将其添加到列表中。

# c# - C#通过网络获取目录中的随机文件夹

> ID：16176545
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:34.220
> 
> 标签：c#, performance, directory

我正在编写一个小应用程序，以从大量样本中提取每种特定类型的一些有效样本。

结构如下：

根->状态->类型->样本

我的程序遍历各州，并获取每种独特的类型以及通往该类型的路径。一旦获得所有这些，它就会遍历每种类型，并选择 X 个随机样本，其中 X 由用户提供。

该程序在本地运行良好，但在网络上它显然要慢得多。我已经采取措施来解决这个问题，但我挂断的最后一部分是快速从 TYPE 目录中获取随机样本。

在本地，我使用

```
 List<String> directories = Directory.GetDirectories(kvp.Value).ToList(); 
```

这是通过网络运行它时的瓶颈。我觉得这可能是不可能的，但是有没有办法从 TYPE 目录中抓取 5 个随机样本而不首先识别所有样本？

希望我已经足够清楚了，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:49:58.913

您可能会发现使用 DirectoryInfo 对象作为您想要的根目录和子文件夹并以这种方式列出目录会提高速度。这将使您的速度略有提高，因为 .NET 的惰性初始化策略意味着使用您在示例中使用的静态 Directory 方法将需要更多的网络往返。

我想的下一个问题是为什么速度很重要？您是否考虑过在自己设计的缓存中维护最新索引以实现快速访问？使用 FileSystemWatcher、定期轮询，还是两者都使用？

我想你可能也对这个链接感兴趣：[检查文件夹是否有文件](https://stackoverflow.com/questions/2712798/checking-if-folder-has-files)

...它包含一些有关通过从一次调用中检索有关整个目录结构的信息来将网络调用限制在最低限度的信息。然而，这无疑会增加您的内存需求。

每种文件的名称是否可预测？随机预测一些样本名称并直接阅读它们会更好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:39:39.013

也许尝试使用 DirectoryInfo，当对特定目录进行大量调用时，它会更快，因为不会在每次访问时检查安全性。

# c# - 有哪些困难的单元测试的例子，它们要么是不可能的，要么是创造性地解决的？

> ID：16176552
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:54.593
> 
> 标签：c#, unit-testing, tdd

我正在为我们的核心库编写单元测试。

其中一个类测量计算机性能随时间的工作量（作为平均值），应用一些权重并可以输出一个数字。

现在，它用来进行平均和应用权重的类很容易进行单元测试。（加入一些平均值，与已知结果进行比较）。不太容易测试的是课程本身的目的*，*`Workload`因为这将涉及强制机器处于例如 50% 的利用率，然后检查已知的 50% 的重量调整平均值。

当然，我知道我可以“假装”机器处于 50% 的利用率并以这种方式比较结果，但单元测试实际上并没有针对 50% 的实际利用率进行测试。

您还遇到过哪些其他“困难”的测试用例，如果它们不是不可能的，您采用了哪些创造性的方法来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:57:48.640

您是否尝试过测试一个简单的`MsgBox`（或任何模式窗口，就此而言）显示在 WinForms 应用程序中？在最近的一个项目中，我们花了一段时间与 Win32 句柄和多线程测试用例作斗争，试图一致地验证屏幕上显示的对话框（因为它是模态的，你不能只从主测试线程执行它）。测试有时会起作用，但很容易出现间歇性故障，因为没有“好”的原因（例如，由于某些后台进程，窗口在测试期间失去了焦点）。

在这种情况下，我们使用 C# 委托的强大功能来模拟对`MsgBox.Show()`. 通过声明一个委托，例如

```
public delegate DialogResult ShowDelegate(string text, string caption); 
```

我们可以`new ErrorMessageHelper(MsgBox.Show)`在生产中使用，测试看起来像

```
[TestFixture]
public class ErrorDialogHelperTest
{
    [Test]
    public void UsesShowDelegateToDisplayMessage()
    {
        bool delegateWasCalled = false;
        ShowDelegate mockShowDelegate = delegate(string text, string caption)
        {
            Assert.AreEqual("the expected message", text);
            Assert.AreEqual("the expected title", caption);
            delegateWasCalled = true;
        };

        ErrorDialogHelper helper = new ErrorDialogHelper(showDelegate);

        helper.ShowErrorMessage("the expected message", "the expected title");
        Assert.IsTrue(delegateWasCalled);
    }
} 
```

我们当然有进一步的测试来验证我们确实使用`MsgBox.Show`. 我`MsgBox`在这个例子中使用，但我们使用了类似的技术来测试我们所有模态窗口的显示。

另一个经典的难以测试的例子是你的代码需要使用挂钟日期和时间。同样，解决方案是引入一个可以从测试中控制的假时钟。在这两种情况下，您都依赖底层框架或系统实现来正常工作，并且只测试一切是否正确连接。这是否是一个合理的风险应根据具体情况确定。

# css - 相对定位在 IE7 中的显示与其他浏览器不同

> ID：16176554
> 
> 赞同：0
> 
> 时间：2013-04-23T18:26:58.807
> 
> 标签：css, internet-explorer

我有两个 div 都有相对位置。内部 div 具有左侧和顶部位置。除了在 IE7 中，它们在所有浏览器中都可以正常工作，看起来左侧位置需要少约 100 像素。我想知道是否可以在不必拥有特定于 IE 的样式表的情况下解决此问题。这是代码

> ```
>  <div style="position:relative;">
>            <div class="edit-photo-div">
>               <a href="#">
>                  <span class="edit-photo-icon">Edit</span>
>               </a>
>             </div>
>          </div> 
> ```

和我的CSS：

```
>  .edit-photo-div {
      background-image: url("/images/editphoto.png");
      background-position: 9px 6px;
      height: 28px;
      left: 143px;
      position: relative;
      top: -27px;
      width: 35px;
      margin-bottom:-29px;
      overflow:hidden;
     }

 .edit-photo-icon{
    padding-left:35px;
    position:relative;
    top:6px;
    color:#7c7c7c;
    font-weight:bold;
 } 
```

![在此处输入图像描述](https://i.stack.imgur.com/N9N7U.png)

[jsFiddle 链接](http://jsfiddle.net/Mrtq3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:36:28.017

当我将“位置：相对”放入跨度元素时，我在旧版本的 IE 之前遇到了问题。试着把它拿出来，看看它是否有所作为。同样对于“.edit-photo-div”，尝试使其绝对定位。您已经设置了“顶部”和“左侧”，所以它应该留在同一个地方。

# sql-server - 获取 SSMS 连接的多个服务器的名称

> ID：16176555
> 
> 赞同：0
> 
> 时间：2013-04-23T18:27:00.637
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我打开了一个 SSMS 实例，我连接到一台远程服务器以及 localhost。如何获取 SSMS 当前连接的所有服务器的名称？远程服务器的标志看起来像 ![在此处输入图像描述](https://i.stack.imgur.com/emklU.png)

当地看起来像 ![在此处输入图像描述](https://i.stack.imgur.com/ifCRl.png)

另外，我想知道从一个 SSMS 实例连接到多个服务器是否有任何问题，以及如何通过脚本在服务器之间切换而无需单击表名并执行类似的操作`select top 1000 rows`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:12:34.043

好的，这里有多个问题在起作用，因为这并不总是一个简单的答案。根据您的环境和权限，您可能拥有一个或多个权限组，这些权限组可以访问一个或多个环境，这些环境具有一个或多个服务器，因此可以访问一个或多个数据库。但是，如果您确实有权限并且您已设置了具有数据访问权限的链接服务器，您可以执行类似的操作来获取您有权访问的内容的列表。您可以在不同的环境中类似地运行它，使其成为您可以使用 ADO.NET 或类似方法调用的过程。

```
--declare variable for dynamic SQL
DECLARE 
    @SQL    NVARCHAR(512)
,   @x      int

-- Create temp table to catch linked servers
Declare @Servers TABLE
    (
        Id          int identity
    ,   ServerName  VARCHAR(128)
    )

-- insert linked servers
insert into @Servers
select name
FROM sys.servers

-- remove temp table if it exists as it should not be prepopulated.
IF object_ID('tempdb..#Databases') IS NOT NULL
    DROP TABLE tempdb..#Databases
;

-- Create temp table to catch built in sql stored procedure
CREATE TABLE #Databases --DECLARE @Procs table 
    (
        ServerName      varchar(64)
    ,   DatabaseName    VARCHAR(128)
    )

SET @X = 1

-- Loops through the linked servers with matching criteria to examine how MANY there are.  Do a while loop while they exist.
WHILE @X <= (SELECT count(*) FROM @Servers)
BEGIN
    declare @DB varchar(128);

    Select @DB = ServerName from @Servers where Id = @X  -- get DB name from current cursor increment

    -- Set up dynamic SQL but do not include master and other meta databases as no one cares about them.
    SET @SQL = 'insert into #Databases select ''' + @Db + ''', name from ' + @DB + '.master.sys.databases
                where name not in (''master'',''tempdb'',''model'',''msdb'')'

    -- Execute the dynamic sql to insert into collection object
    exec sp_executesql @SQL

    -- increment for next iteration on next server
    SET @X = @X + 1
END
;

SELECT *
FROM #Databases 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:41:24.410

我不完全确定你在问什么。如果您询问是否可以在单个查询窗口中连接到多个 SQL Server 实例，答案是肯定的。我在这里详细介绍了如何以及其中的一些含义：[多个实例，单个查询窗口](http://sqlstudies.com/2013/02/18/multiple-instances-single-query-window/)

另一方面，如果您要问如何判断您连接的实例可以使用`@@SERVERNAME`。

```
SELECT @@SERVERNAME 
```

它将返回您连接到的实例的名称。

通常，您会为每个查询窗口连接一个实例并在窗口之间切换以影响您感兴趣的特定实例。

如果您想编写命令将您发送到特定实例，您可以将查询窗口设置为`SQLCMD`模式（查询菜单 -> SQLCMD 模式）并使用该`:CONNECT`命令。

```
:CONNECT InstaneName
SELECT @@SERVERNAME 
```

# postgresql - Postgresql - 重新编号列

> ID：16176563
> 
> 赞同：1
> 
> 时间：2013-04-23T18:27:33.170
> 
> 标签：postgresql

我需要重新编号我的数据库的行。删除一些行后，我必须**重新编号**某些列。我怎样才能做到这一点`postgresql`？

**更新**：例如：我有一个这样的表：

```
ac_n_circ     name

1               x 
2               y
8               c
15              b 
```

我想像这样重新编号这个表：

```
ac_n_circ     name

1               x 
2               y
3               c
4               b 
```

在 posgresql 中是否有任何算法或类似的东西可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:52:08.943

# 警告：

## `ac_n_circ`这仅在*不是*主键列时才有意义。

如果你确定你需要这个（你真的需要这个吗？），那么类似下面的东西应该可以工作：

```
with new_numbers as  (
   select row_number() over (order by ac_n_circ) as new_nr,
          ac_n_circ, 
          id
   from foo
) 
update foo
   set ac_n_circ = nn.new_nr
from new_numbers nn 
 where nn.id = foo.id; 
```

或者：

```
update foo 
  set ac_n_circ = nn.new_number
from (
   select id, 
          ac_n_circ,
          row_number() over (order by ac_n_circ) as new_number
   from foo
) nn
where nn.id = foo.id; 
```

这两个语句都假定有一个名为 的主键列`id`。

# php - 如何在发布请求后保持表单项被选中。使用 php

> ID：16176568
> 
> 赞同：0
> 
> 时间：2013-04-23T18:27:43.100
> 
> 标签：php, drop-down-menu, html-select, multiple-select

我有一个表单，其中包含 7 个多选下拉菜单。表单提交到同一页面后，我需要选择多个选项。我检查了多个线程，但是，很少有人解释只有单个选定的下拉列表。请建议我为许多下拉菜单保留多个选项。这种形式是在 php 上开发的。

```
<select name="selectAccount[]" multiple="multiple" class="multiple">

<option value="0" selected="selected">All</option>

<?php
$viewquery="select Account_Name from accounts";
$viewresult=  mysql_query($viewquery);
while($elements=  mysql_fetch_array($viewresult))
    {
       echo "<option value=\"".$elements['Account_Name']."\"";
       if(isset($_POST['selectAccount'])==$elements['Account_Name'])
       echo 'selected';
       echo ">".$elements['Account_Name']."</option>";

}
?>
</select> 
```

如果我使用上面的代码，则会选择下拉列表中的所有选项。但是，我只需要选择提交前选择的选项。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:25:42.730

我认为这条线有问题

```
if(isset($_POST['selectAccount'])==$elements['Account_Name']) 
```

您可能需要考虑两件事：如果您使用这样的字段

```
<select name="selectAccount[]" multiple="multiple" class="multiple"> 
```

then`$_POST['selectAccount']`将是一个数组，因此您可能需要检查`$_POST['selectAccount'`] 是否已设置，然后如果该数组包含您的数组，则`$elements['Account_Name']` 可以使用**[in_array](http://php.net/manual/en/function.in-array.php)**。

# c - C GLubyte 数组

> ID：16176572
> 
> 赞同：0
> 
> 时间：2013-04-23T18:27:48.423
> 
> 标签：c, arrays

我有这个问题。我手动初始化了下面代码中注释的数组，我想要一个函数来做到这一点，不管值是什么。我无法做到这一点，当我在函数末尾打印时，一切都是 0。对此有任何想法吗？

```
GLubyte *createGraphIndices(int size){

    GLubyte * graphIndices = malloc(size * sizeof(GLubyte));
    int i;

    for(i = 0; i < (size/2)-1; ++i){ // até
        graphIndices[i] = i;
    }
    for(i = (size/2)-1; i < size-2; ++i){ // até
        graphIndices[i] = i;
    }

    for(i = 0; i < size; ++i){ // até
        fprintf(stderr, "%f\n", graphIndices[i]);
    }
    return graphIndices;
}
// GLubyte graphIndices[] = {
// 
//  0,1,
//  1,2,
//  2,3,
//  3,4,
//  4,5,
//  5,6,
//  6,7,
//  7,8,                
//  9,10,
//  10,11,
//  11,12,
//  12,13,
//  13,14,
//  14,15,
//  15,16,
//  16,17
// }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:41:06.463

您将它们打印为浮点数

```
 fprintf(stderr, "%f\n", graphIndices[i]); 
```

你应该将它们打印为整数

```
 fprintf(stderr, "%d\n", graphIndices[i]); 
```

# c# - 我得到`System.InvalidOperationException：集合已修改；枚举操作可能无法执行`，莫名其妙

> ID：16176576
> 
> 赞同：7
> 
> 时间：2013-04-23T18:28:13.447
> 
> 标签：c#, .net, ienumerable

我得到`System.InvalidOperationException: Collection was modified; enumeration operation may not execute`：

```
ExceptionLoggingLibrary.LoggingException: Exception of type 'ExceptionLoggingLibrary.LoggingException' was thrown. ---> System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
at System.Collections.Generic.List`1.Enumerator.MoveNextRare()
at iTextSharp.text.FontFactoryImp.GetFont(String fontname, String encoding, Boolean embedded, Single size, Int32 style, BaseColor color, Boolean cached)
[...] 
```

据我了解，在枚举期间修改 IEnumerable 对象时会发生该异常。

这是`iTextSharp.text.FontFactoryImp.GetFont`方法：

```
 public virtual Font GetFont(string fontname, string encoding, bool embedded, float size, int style, BaseColor color, bool cached) {
        if (fontname == null) return new Font(Font.FontFamily.UNDEFINED, size, style, color);
        string lowercasefontname = fontname.ToLower(CultureInfo.InvariantCulture);
        List<string> tmp;
        fontFamilies.TryGetValue(lowercasefontname, out tmp);
        if (tmp != null) {
            // some bugs were fixed here by Daniel Marczisovszky
            int fs = Font.NORMAL;
            bool found = false;
            int s = style == Font.UNDEFINED ? Font.NORMAL : style;
            foreach (string f in tmp) {
                string lcf = f.ToLower(CultureInfo.InvariantCulture);
                fs = Font.NORMAL;
                if (lcf.ToLower(CultureInfo.InvariantCulture).IndexOf("bold") != -1) fs |= Font.BOLD;
                if (lcf.ToLower(CultureInfo.InvariantCulture).IndexOf("italic") != -1 || lcf.ToLower(CultureInfo.InvariantCulture).IndexOf("oblique") != -1) fs |= Font.ITALIC;
                if ((s & Font.BOLDITALIC) == fs) {
                    fontname = f;
                    found = true;
                    break;
                }
            }
            if (style != Font.UNDEFINED && found) {
                style &= ~fs;
            }
        }
        BaseFont basefont = null;
        try {
            try {
                // the font is a type 1 font or CJK font
                basefont = BaseFont.CreateFont(fontname, encoding, embedded, cached, null, null, true);
            }
            catch (DocumentException) {
            }
            if (basefont == null) {
                // the font is a true type font or an unknown font
                trueTypeFonts.TryGetValue(fontname.ToLower(CultureInfo.InvariantCulture), out fontname);
                // the font is not registered as truetype font
                if (fontname == null) return new Font(Font.FontFamily.UNDEFINED, size, style, color);
                // the font is registered as truetype font
                basefont = BaseFont.CreateFont(fontname, encoding, embedded, cached, null, null);
            }
        }
        catch (DocumentException de) {
            // this shouldn't happen
            throw de;
        }
        catch (System.IO.IOException) {
            // the font is registered as a true type font, but the path was wrong
            return new Font(Font.FontFamily.UNDEFINED, size, style, color);
        }
        catch {
            // null was entered as fontname and/or encoding
            return new Font(Font.FontFamily.UNDEFINED, size, style, color);
        }
        return new Font(basefont, size, style, color);
    } 
```

在该方法中，IEnumerable 对象可能在枚举期间被修改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T01:22:06.973

Without knowing what is inside your methods, this will prevent your Collection from being changed during enumeration:

Change:

```
List<string> tmp;
fontFamilies.TryGetValue(lowercasefontname, out tmp); 
```

To:

```
List<string> sharedList;
fontFamilies.TryGetValue(lowercasefontname, out sharedList);
var tmp = new List<string>(sharedList); 
```

This will give you a new list that you can be sure is not being accessed anywhere else by any other threads since it is guaranteed to not just be a reference to the list in TryGetValue().

I've changed the name of the tmp list from before and named the new list tmp so that you won't need to change any other code.

# c# - 将 2 个查询的结果合并为 1 个结果，然后传递给 DGV

> ID：16176577
> 
> 赞同：1
> 
> 时间：2013-04-23T18:28:15.843
> 
> 标签：c#, linq

我需要将下面的前后组合成一个结果，然后将其传递给datagridview。我使用 before + after 因为我不知道如何组合结果。

```
 private void textBox6_Leave(object sender, EventArgs e)
    {
        DataClasses3DataContext db = new DataClasses3DataContext();

        int matchedAdd = (from c in db.GetTable<prop>()
                          where c.HOUSE_NO.Contains(textBox1.Text) && c.Direction.Contains(textBox2.Text) && c.street.Contains(textBox3.Text) && c.SUFF.Contains(textBox4.Text)
                          select c.ID).SingleOrDefault();

        var before = (from c in db.GetTable<prop>()
                      where c.ID < matchedAdd
                      orderby c.PARCEL descending
                      select c).Take(6);

        var after = (from c in db.GetTable<prop>()
                     where c.ID > matchedAdd
                     orderby c.PARCEL
                     select c).Take(6);

        var endResult = before + after;

        dgvBRT.DataSource = endResult;
        dgvBRT.Databind(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:29:41.750

您想要的`+`是`before.Concat(after)`或`before.Union(after)`，这取决于您希望如何处理重复项（联合删除重复项；连接不这样做；例如`{1,2,2,3}`concat`{3,4}`是`{1,2,2,3,3,4}`，其中`{1,2,2,3}`联合`{3,4}`是`{1,2,3,4}`（尽管在联合情况下是否定义了顺序是值得怀疑的） )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:29:28.677

您可以使用联合运算符：

```
var endresult = before.Union(after); 
```

# sql-server - SQL Server：如何规范化数据表？

> ID：16176578
> 
> 赞同：1
> 
> 时间：2013-04-23T18:28:18.987
> 
> 标签：sql-server

我有一个包含 3 列的表，需要移动到另一个表并替换为另一个表中插入行的 IdentityID。

[这](http://sqlfiddle.com/#!6/eba8a)是我正在尝试使用的基本思想的 SQLFiddle：

```
CREATE TABLE RECORD 
(
  ID int,
  ObjectDetail_A int,
  ObjectDetail_B int,
  ObjectDetail_C int,
  ObjectDetailID int
)

CREATE TABLE OBJECTDETAIL
(
  ID int,
  ObjectDetail_A int,
  ObjectDetail_B int,
  ObjectDetail_C int
) 
```

所以最后，当数据插入到该表时，字段 ObjectDetail_A、ObjectDetail_B 和 ObjectDetail_C 被替换为 OBJECTDETAIL 表的 ID。

我只是有点困惑如何将一行插入目标表，然后用目标标识更新源表。

任何帮助将非常感激，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:50:21.123

我想解决方案并不像我想象的那么复杂。

我所做的是：

```
ALTER TABLE OBJECTDETAIL
ADD SourceID INT
GO

INSERT INTO ProductDetail (ObjectDetail_A, ObjectDetail_B, ObjectDetail_C, SourceID)
SELECT ObjectDetail_A, ObjectDetail_B, ObjectDetail_C, ID
FROM RECORD
GO

UPDATE RECORD
SET RECORD.ObjectDetailID = OBJECTDETAIL.ID
JOIN OBJECTDETAIL
ON RECORD.ID = OBJECTDETAIL.SourceID
GO

ALTER TABLE OBJECTDETAIL
DROP COLUMN SourceID
GO 
```

这对我有用。感谢所有的答复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:38:34.080

使 OBJECTDETAIL.ID 成为自动增量 IDENTITY 字段。

```
INSERT INTO OBJECTDETAIL
( SELECT DISTINCT 
ObjectDetail_A,
ObjectDetail_B,
ObjectDetail_C
FROM RECORD ) 
```

然后更新 RECORD.ObjectDetailID。

```
UPDATE R
SET R.ObjectDetailID = OD.ID
FROM RECORD R
JOIN OBJECTDETAIL OD
ON OD.ObjectDetail_A = R.ObjectDetail_A
AND OD.ObjectDetail_B = R.ObjectDetail_B
AND OD.ObjectDetail_C = R.ObjectDetail_C 
```

RECORD.ObjectDetailID 应该是一个外键字段，并且应该从表中删除 RECORD.ObjectDetail_A 等字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:36:42.553

只要 A、B 和 C 字段是唯一的，或者您可以接受所有重复项都使用相同的 ObjectDetail.ID，那么您可以将它们全部插入，然后 JOIN 以获取新 ID：

```
INSERT INTO ObjectDetail
  ( ObjectDetail_A, ObjectDetail_B, ObjectDetail_C )
SELECT DISTINCT ObjectDetail_A, ObjectDetail_B, ObjectDetail_C
FROM Record

UPDATE Record
SET ObjectDetailID = d.ID
FROM Record r
INNER JOIN ObjectDetail d
  ON r.ObjectDetail_A = d.ObjectDetail_A
  AND r.ObjectDetail_B = d.ObjectDetail_B
  AND r.ObjectDetail_C = d.ObjectDetail_C 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:37:59.053

据我了解您的问题，您需要创建两个表..

```
 CREATE TABLE OBJECTDETAIL
    (
      ObjectDetailID int
      ObjectDetail_A int,
      ObjectDetail_B int,
      ObjectDetail_C int,
    PRIMARY KEY (ObjectDetailID),

    )
    CREATE TABLE RECORD 
    (
      ID int,
      ObjectDetailID int, 
      CONSTRAINT fk_objectdetail FOREIGN KEY (ObjectDetailID) REFERENCES OBJECTDETAIL(ObjectDetailID)
    ) 
```

这样，您可以先插入`OBJECTDETAIL`，然后可以`RECORD`使用插入的插入`ObjectDetailID`

# c - 导致访问冲突的指针逻辑

> ID：16176586
> 
> 赞同：1
> 
> 时间：2013-04-23T18:28:46.450
> 
> 标签：c, pointers, memory-management, data-structures

我添加联系人的程序方法之一是在执行时出现以下错误：

```
Unhandled exception at 0x00111deb in G00290342.exe: 0xC0000005: Access violation reading location 0x00000050. 
```

我研究了该错误，发现它是由访问已在使用的内存引起的。我已将其缩小到导致“curr”变量为 NULL 的 readFile 方法中的指针逻辑。

它正在破坏的代码在这里：

```
while(curr->next != NULL)
    {
        curr = curr->next;

    } 
```

这是完整的方法供参考：

```
int addContact(struct contact *theList)
{
    struct contact *newContact, *curr;
    char fn[15],sn[15],ph[15],cmpy[15],eml[15];

    //create the new structure
    newContact = (struct contact *)malloc(sizeof(struct contact));
    if(newContact == NULL)
    {

        return(0);

    }
    //find the end of list
    curr = theList;
    //scroll through the list
    while(curr->next != NULL)
    {
        curr = curr->next;

    }
    //now have the last contact and the new one here
    printf("\nEnter a surname: ");
    gets(newContact->sname);

    printf("\nEnter a first name: ");
    gets(newContact->fname);

    printf("\nEnter a phone: ");
    gets(newContact->phone);

    printf("\nEnter a company: ");
    gets(newContact->company);

    printf("\nEnter an email: ");
    gets(newContact->email);

    //add the new contact to the end of the list

    curr->next = newContact;
    newContact->prev = curr;
    newContact->next = NULL;
    return(0);

}//end addContact 
```

这是我读取测试文件的主要方法：

```
main()
{
    int sts,iChoice;
    struct contact *ptrList, *head;

    //head of sorted list
    struct contact *srtdList;

    srtdList = NULL;
    ptrList = NULL;

    ptrList = readFile("test.csv",ptrList);
    head = ptrList;

    /////menu for options
    system("cls");
    printf("\n\n\t\tWelcome to BV Contact Organizer\n\n");
    printf("\n\n\t\tEnter a number ranging from 1 to 6 for options.\n\n");
    printf("\n\t\t1\. Search");
    printf("\n\t\t2\. Add");
    printf("\n\t\t3\. Sort");
    printf("\n\t\t4\. Remove");
    printf("\n\t\t5\. Edit");
    printf("\n\t\t6\. Exit");
    printf("\n\n\t\tEnter your menu choice: ");
    fflush(stdin);
    scanf("%d", &iChoice);

    // user enters one of 6 values:
    // Search,add,sort,remove,exit or edit contacts

    switch(iChoice)
    {

        case 1:     // Add
        {
            sts = addContact(head);
            sts = writeListToFile("test.csv",head);
            while(ptrList != NULL)
            {
                printf("\n%s,%s,%s,%s,%s",ptrList->sname,ptrList->fname,ptrList->phone,ptrList->company,ptrList->email);
                ptrList = ptrList->next;

            }

            break;
        }
        case 2:     // Sort
        {
            //return the head of the sorted list to here
            srtdList = sortList(head,srtdList);
            head = srtdList;
            if(srtdList != NULL)
            {

                printf("\n\nSorted List");
                while(srtdList != NULL)
                {
                    printf("\n%s,%s,%s,%s,%s",srtdList->sname,srtdList->fname,srtdList->phone,srtdList->company,srtdList->email);
                    srtdList = srtdList->next;

                }

                sts = writeListToFile("testSort.csv",head);

            }
            else
            {
                printf("nothing to print");

            }
            printf("\n\n\n");
            system("pause");
            break;
        }
        case 3:     // Exit
        {
            printf("\n\nProgram exiting!...");
            break;
        }
        default:
        {
            printf("\n\nInvalid menu choice,please choose a number ranging from 1 to 6!...");
        }

    }//end of switch

    return(iChoice);

} // end of main 
```

这是所要求的结构联系定义：

```
struct contact {
        char sname[15];
        char fname[15];
        char phone[15];
        char company[15];
        char email[15];
        struct contact *prev;
        struct contact *next;
}; 
```

这是用于 readFile 的方法并导致问题：

```
struct contact *readFile(char * FName,struct contact *ptrList)
{

struct contact *head, *newContact;
FILE *fptr;
char oneLine[60];
char *sname, *fname, *phone,*company, *email;

head = ptrList;

fptr = fopen(FName,"r");

if(fptr == NULL)
{
    printf("\nCant open file!");
    return(ptrList);

}

fgets(oneLine, 55, fptr);
while(!feof(fptr))
{
    fgets(oneLine, 55, fptr);
    if(oneLine[strlen(oneLine)-1] == '\n')
    {
        oneLine[strlen(oneLine)-1] = '\0';

    }

    sname = strtok(oneLine,",");
    fname = strtok(NULL,",");
    phone = strtok(NULL,",");
    company = strtok(NULL,",");
    email = strtok(NULL,",");

    if(head == NULL)
    {
        head = (struct contact *)malloc(sizeof(struct contact));
        ptrList = head;
        strcpy(head->sname,sname);
        strcpy(head->fname,fname);
        strcpy(head->phone,phone);
        strcpy(head->company,company);
        strcpy(head->email, email);

        head->prev = NULL;
        head->next = NULL;

    }
    else
    {

        newContact = (struct contact *)malloc(sizeof(struct contact));
        head->next = newContact;
        newContact->prev = head;
        newContact->next = NULL;
        //copy the data to the new one
        strcpy(head->sname,sname);
        strcpy(head->fname,fname);
        strcpy(head->phone,phone);
        strcpy(head->company,company);
        strcpy(head->email,email);

        //move down the list so that the head variable
        //points to the last contact
        head = newContact;

    }

  }//end while

  fclose(fptr);
  return(ptrList);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:35:43.673

所以你分配`curr`给`theList`没有任何`NULL`检查：

```
curr = theList; 
```

因此，当您到达`while`if`curr`确实`NULL`时，您将在尝试执行以下操作时遇到访问冲突`curr->next`：

```
while(curr->next != NULL)
{
    curr = curr->next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:35:21.900

它说`Access violation reading location 0x00000050`所以你正在尝试读取一个实际上是一些垃圾值的内存位置。从头开始跟踪 theList 值，此外，无论您在哪里分配内存，立即执行`memset(newContact,0,sizeof(struct contact))`. 毕竟，如果您仍然遇到问题，请提供代码，可能存在逻辑问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:42:34.470

```
curr = theList;    
 while(curr->next != NULL)
 {
    curr = curr->next;

} 
```

如果最后一个元素`theList`是`not null`并且指向垃圾内存位置，也可能会发生此问题

# javascript - JavaScript 嵌套函数和使用它们

> ID：16176587
> 
> 赞同：3
> 
> 时间：2013-04-23T18:28:52.880
> 
> 标签：javascript

我是 JavaScript 新手，来自 Java 背景。我正在尝试编写一个非常简单的 JavaScript 应用程序，但我遇到了一些问题。我想在 JavaScript 中复制一种类结构，我遇到的问题与函数内部的函数范围有关。

我想创建一个这样的结构

```
function codeArray() {
    function create() {
        addElement( prop1, prop2,) {
            //create an element
        }

        function traverse(object) {
            //recursively go through some nested list data structure
            addElement(asd, 4534);
        }
    }

    function deleteElement() {
        //delete a single element from an array
    }

    print() {
        //print array;
    }
}

something.click(function() {
    codeArray.create();
    codeArray.print();
}); 
```

所以我遇到的问题是因为嵌套在 codeArray 中的函数的范围，我无法从 codeArray 外部访问它们。只是摆脱包装器 codeArray 函数的封装是不好的做法吗？有人可以建议更好地重写如何做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:32:12.677

你几乎是对的。您应该改用一个对象：

```
codeArray = {
    create:function() {
       // ...
    },
    // ...
    print:function() {
       // ...
    }
}; 
```

然后你可以调用：

```
codeArray.create();
codeArray.print(); 
```

# php - PHP 版本和 exif_imagetype() 函数

> ID：16176588
> 
> 赞同：0
> 
> 时间：2013-04-23T18:28:55.417
> 
> 标签：php, image, mime-types, fileinfo, image-extraction

大于`exif_imagetype()`不支持函数吗？`PHP Versions``5.0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:30:29.253

[根据手册](http://www.php.net/manual/en/function.exif-imagetype.php)，它仍然受支持

# perl - 无法打印散列的大小或其中的访问元素

> ID：16176593
> 
> 赞同：1
> 
> 时间：2013-04-23T18:29:08.990
> 
> 标签：perl

我有一个`%AllData`使用以下代码从数据库中提取数据的哈希：

```
while(my $Row = $sth1->fetchrow_hashref())
        {
            if(defined($Row->{LotID}))
            {
                    $AllData->{$Row->{LotID}}->{$Row->{Name}} = $Row->{Details};
            }
        } 
```

完成提取数据后，我`print Dumper($AllData);`会打印出我的所有数据，这些数据显示如下：

```
$VAR1 = {
          '4197359' => {
                         'Short Description' => 'Rock Picker',
                         'Lot Number' => '1065',
                         'Description' => 'Rock Picker'
                       },
          '4194148' => {
                         'Short Description' => 'Large work bench w/ drawers',
                         'Lot Number' => '1041',
                         'Description' => 'Large work bench w/ drawers'
                       },
          '4200944' => {
                         'Lot Number' => '1084',
                         'Description' => 'Horse Trailer'
                       }
} 
```

但是，当我尝试打印散列的大小或用于`foreach`访问散列时，它显示 0 大小并且无法访问散列中的任何元素：

```
print "Hash Size: ", scalar keys %AllData, "\n"; 
```

显示：

```
Hash Size: 0 
```

我的问题的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:39:27.887

没有 hash `%AllData`，如果你的程序没有引发错误，那么你就没有

```
use strict;
use warnings; 
```

在你的程序的头部。这*对于所有*Perl 程序都至关重要，尤其是在您向他人寻求代码帮助时。

您感兴趣的哈希是由 引用的哈希`$AllData`，因此您需要使用此变量并取消引用它。像这样

```
print "Hash Size: ", scalar keys %$AllData, "\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T18:40:27.630

尝试访问`scalar keys %$AllData`以访问引用.. 所指的哈希。

*   `$AllData`（您传递给的内容`Dumper()`）是对哈希的*引用*（'hashref'）

*   `%AllData`与 Perl 不同的是`$AllData`. 如果这还没有设置并且 perl 没有抱怨，您可能需要尝试`use strict;`在脚本的顶部放置，以便可以警告您这些（和其他）类型的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T18:34:50.607

也许您需要先取消引用哈希：

```
print "Hash Size: ", scalar keys %{ $AllData }, "\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T07:44:43.460

应该表示一个哈希引用`$%hash`而不是`%hash`打印

# .net - 在 as400 rgp 中调用 Db2 存储过程时出现转换错误

> ID：16176594
> 
> 赞同：0
> 
> 时间：2013-04-23T18:29:09.803
> 
> 标签：.net, db2, rpg

使用 iSeries 在 AS400/RPG/DB2 中调用存储过程时出现转换错误。

db2 参数定义为 CHAR 32000，.net 应用程序传入大约 20000 个字符，调用会引发错误。

当 .net 应用程序传递包含双字节字符的数据时，似乎会发生此错误。如何将字符串传递给包含双字节字符的 DB2 存储过程？

IBM 错误代码是 6107。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:18:46.103

也许您打算将其定义为 VARCHAR 32000。CHAR 是固定长度，但您的 .NET 应用程序并未发送定义的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T12:48:33.787

如果您尝试将 20K 双字节字符传递到 32K 字符字段，则该字段不够长。20K 双字节字符占用 40K 空间。另一个问题可能是您遇到了 CCSID 问题。您可能想尝试 VARGRAPHIC 来保存双字节字符。

# java - 德国斯坦福解析器

> ID：16176596
> 
> 赞同：1
> 
> 时间：2013-04-23T18:29:14.547
> 
> 标签：java, parsing, haskell, stanford-nlp

我正在使用[stanford 解析器](http://nlp.stanford.edu/software/lex-parser.shtml)的德语版本将简短的德语句子解析为解析树。一个例子：

```
Hallo, mein Name ist Luke.

(ROOT
  (S (ITJ Hallo) ($, ,)
    (NP (PPOSAT mein) (NN Name))
    (VAFIN ist)
    (NP-SB (NE Luke))
    ($. .))) 
```

我想将此输出用作 Haskell 程序的输入，该程序会将其排列成树形结构。

尝试编写一个解析此输出的 Haskell 程序，或者来自德语解析器的任何此类输出将是困难的。有没有人对任何可以使这更容易的快捷方式、库或类似的东西有任何建议？

我希望不要被告知“只使用 Java”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:00:23.010

这些东西的一般建议库是 parsec。[http://www.haskell.org/haskellwiki/Parsec](http://www.haskell.org/haskellwiki/Parsec)

# php - 按下按钮后更新数据库中的错误记录

> ID：16176601
> 
> 赞同：0
> 
> 时间：2013-04-23T18:29:28.813
> 
> 标签：php, post, submit

我正忙着做一个新网站，但我今天遇到了一个小问题。

我会尽量解释清楚。

每次刷新页面时，我的网站都会显示一条随机消息，然后您可以单击一个按钮，表示您喜欢该消息。

现在的问题是，当您单击按钮以喜欢该消息时，页面会重新加载（由于表单标签）等将转到显示的下一条消息。

我不知道如何解决这个问题，所以我希望你们能帮助我解决这个问题。

我将在这里发布下面的代码：

按下like按钮后更新数据库的位：

```
 if(!empty($_POST["submit"]))
{
    $id = $random['id'];
    $query = "UPDATE `quotes` SET `likes` = likes + 1 WHERE `id` = $id";
    $result = mysql_query($query);
        if ((mysql_error()!=""))
        {
            $ANTW = mysql_error();
            echo ("Cause of the error: " . $ANTW);
        }
        else
        {
            echo "It worked!";
        }
} 
```

点赞按钮：

```
<form name='' method='post' action=''>
 <input class='like' type='submit' name='submit' />
</form> 
```

我希望这足以让您解决问题，如果没有让我知道，我会发布更多代码。

丹尼斯

更新：

嗨，伙计们，感谢您提供的所有快速而好的建议，它按照您告诉我的方式起作用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:33:45.357

将您的 id 保存在隐藏的输入中：

```
<form name='' method='post' action=''>
    <input type="hidden" value="<?php echo $random[$id]; ?>" name="like" />
    <input class='like' type='submit' name='submit' />
</form> 
```

并在您的 PHP 代码中分配：

```
$id = $_POST['like']; // your like id you passed by the form (input type hidden) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:34:29.510

使用隐藏字段在提交表单中发送 id，例如

```
<input type="hidden" name="myid" value="YOURID"> 
```

并在下一页中使用

```
$_POST['myid'] 
```

# c# - 通过事件处理启用按钮

> ID：16176605
> 
> 赞同：0
> 
> 时间：2013-04-23T18:29:33.740
> 
> 标签：c#, winforms, event-handling

有一个带有 2 个面板、一个数据网格视图和一个“清除”按钮的标签页。面板中只有文本框，并且网格是未绑定的。数据由用户输入。默认情况下，清除 btn 是禁用的。我的要求是**仅**当任何文本框不为空或网格中有超过 1 行时才启用它。此代码不起作用。请帮忙。

```
public Form1()
 {
   InitializeComponent();
   foreach (Control c in InvoiceTab.Controls)
    {
      if (c is DataGridView)
       {
         DataGridView dgv = c as DataGridView;
         if (dgv.RowCount > 1)
          {
            EnableClearBtnBool = true;
            btnClear.Enabled = true;
            break;
          }
         else
          {
            EnableClearBtnBool = false;
            btnClear.Enabled = false;
            break;
          }
       }
    }
    foreach (Control c1 in panel1.Controls)
     {
       if (c1 is TextBox)
        {
          if (c1.Text != "")
            {
              EnableClearBtnBool = true;
              c1.TextChanged -= EnableClearBtn;
              c1.TextChanged += EnableClearBtn;
              break;
            }
          else
             EnableClearBtnBool = false;
        }                  
     }
     foreach (Control c2 in panel2.Controls)
      {
        if (c2 is TextBox)
         {
           if (c2.Text != "")
            {
              EnableClearBtnBool = true;
              c2.TextChanged -= EnableClearBtn;
              c2.TextChanged += EnableClearBtn;
              break;
            }
           else
            EnableClearBtnBool = false;
         }
      }      
 }
bool EnableClearBtnBool = false;
private void EnableClearBtn(object sender, EventArgs e)
    {
        if (EnableClearBtnBool == true)
            btnClear.Enabled = true;
        else
            btnClear.Enabled = false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:41:09.907

该代码几乎可以肯定是因为它的位置首先不起作用。但是，我们也应该能够做出一些根本性的改变。首先，我们需要在一个可以经常调用的方法中使用此代码：

```
private void RefreshClearButton()
{
    btnClear.Enabled = textBox1.Text.Length > 0 ||
        textBox2.Text.Length > 0 || ...
        dataGridView.RowCount > 1;
} 
```

但是，我们还需要利用**所有文本框**`TextChanged`上的事件：

 **```
private void textBox_TextChanged(object sender, EventArgs e)
{
    RefreshClearButton();
} 
```

所以你需要将它们全部连接到这个事件处理程序。现在，我们还有两个需要消耗的事件，在`DataGridView`和`RowsAdded`上`RowsRemoved`：

```
private void dataGridView_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    RefreshClearButton();
}

private void dataGridView_RowsRemoved(object sender, DataGridViewRowsRemovedEventArgs e)
{
    RefreshClearButton();
} 
```

所以现在每次发生变化时我们都会收到通知。如果您必须遍历面板而不是沿途命名每个文本框，那么您可能需要执行以下操作：

```
private bool HasTextBeenEntered(ControlCollection controls)
{
    foreach (var c in controls)
    {
        if (c is TextBox && ((TextBox)c).Text.Length > 0) { return true; }
        else if (c is Control && HasTextBeenEntered(((Control)c).Controls)) { return true; }
    }

    return false;
} 
```

`RefreshClearButton`这会稍微改变方法：

```
private void RefreshClearButton()
{
    btnClear.Enabled = HasTextBeenEntered(this.Controls) || dataGridView.RowCount > 1;
} 
```

***免责声明：***此代码均未编译，因此如果您必须对其进行调整，请不要感到惊讶，但它会让您完成 90% 以上的工作。**

# jquery - jQuery - 基于共享类将内容从一个 UL 添加到另一个

> ID：16176608
> 
> 赞同：0
> 
> 时间：2013-04-23T18:29:41.123
> 
> 标签：jquery, replace, each

在 jQuery 中解决这个问题时遇到了一些麻烦：*如果*它们共享同一个类，我需要将早期 UL 中 LI 的内容添加到稍后的 UL。换句话说，我在 HTML 中有以下两个列表：

```
<ul id="bullet-content">
    <li class="shared-class-1">
        <h3>First Title</h3>
        <p>First Content</p>
    </li>
    <li class="shared-class-2">
        <h3>Second Title</h3>
        <p>Second Content</p>
    </li>
</ul> 
```

接着：

```
<ul class="bullets">
     <li class="shared-class-1">
         <h3 class="bullet-title">#</h3>
         <p class="bullet-content">#</p>
     </li>
     <li class="shared-class-2">
         <h3 class="bullet-title">#</h3>
         <p class="bullet-content">#</p>
     </li>
</ul> 
```

要将内容从“bullet-content”传输到“bullets”，我有以下 jQuery（它还根据 li 的共享类名称添加或删除一个“活动”类）：

```
$('.bullets li').each( function(j) { 
    var classes = this.className.split(/\s+/); 
    for (var j=0,len=classes.length; j<len; j++){             
        var bulletDisplay = $('#bullet-content li');
        var bulletContentTitle = $(bulletDisplay).find('h3').html();
        var bulletContentBody = $(bulletDisplay).find('p').html();                    
        if ($(bulletDisplay).hasClass(classes[j])){ 
            $(this).addClass('active');
            $(this).find('h3').html(bulletContentTitle);
            $(this).find('p').html(bulletContentBody);
        } else {
            $(this).removeClass('active');
        }
    }   
}); 
```

这种工作，但两个“.bullets li”最终都填充了相同的内容——从“bullet-content”的第一个 li 而不是这两个 lis。我想另一个循环是有道理的，但我试图弄清楚如何。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:38:44.110

您需要做的就是使用当前`.bullet-content li`元素的索引来选择相应`.bullets li`的 . 为此，只需要进行两个小的更改 - 在脚本的第一行中（请注意，这里`j`被替换为`i`- 我们稍后将使用它，但无论如何对索引使用相同的变量并不是一个好主意）：

```
$('.bullets li').each( function(i) { 
```

在第四个中：

```
var bulletDisplay = $('#bullet-content li:eq(' + i + ')'); 
```

[摆弄](http://jsfiddle.net/5ShfN/)结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:58:04.923

可能遗漏了一些东西，根据我所看到的，这应该涵盖了基础

```
 $(function ()
    {
        $('li', $('#bullet-content')).appendTo('.bullets');

        $('.bullets li').each(function ()
        {
            $($(this).attr('class').split(' ')).each
            (function ()
            {
                if($('.' + this).length > 1)
                {
                    $('.' + this).addClass('active');
                }
                else
                {
                    $('.' + this).removeClass('active');
                }
            });
        });
    }); 
```

# php - 如何使用 var_dump 访问该数组？PHP

> ID：16176609
> 
> 赞同：0
> 
> 时间：2013-04-23T18:29:41.517
> 
> 标签：php, var-dump

我想显示文本“仓鼠重复一个”。

我的数组： `a:1:{i:0;s:19:"hamsters repeat one";}`

我应该用 `var_dump` 这个吗？在 PHP 中。我知道如何从数据库中获取数组数据（我正在使用 get_post_meta 一个 wordpress 功能）。

应该是这样的吗？: `var_dump $variablewhicharrayhasbeenstored;` 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:33:15.023

用于`unserialize($myvar)`将该字符串解码为数组。

# python - VCP模式下如何使用FDTI芯片？

> ID：16176614
> 
> 赞同：2
> 
> 时间：2013-04-23T18:29:58.640
> 
> 标签：python, linux, usb, ftdi

我正在尝试获得一个基于 FT245RL 芯片的 SainSmart USB 继电器板工作并且度过了一段糟糕的时光。我的印象是我可以从命令行控制继电器，例如：

```
echo -e -n "\xFF\x1\x1" > /dev/ttyUSB1 
```

虽然设备自动安装并且我认为我已经设置了波特率和权限，但在我的 Debian 挤压或 CentOS 5 机器上没有任何反应。SainSmart 的支持毫无价值。

我决定在windows上尝试，所以我安装了驱动程序并用python编写了一个小程序：

```
import serial
ser = serial.Serial(2) #COM3
ser.write(chr(255) + chr(0) + chr(1))
ser.close 
```

依然没有。也许这是一个硬件问题，所以我安装了一个提供的 Windows 程序。当我单击中继按钮时，它会看到设备并工作。沮丧，我退出了他们的程序，在我的程序中寻找错误（找不到任何错误），但无论如何都要尝试，它可以工作！我编写了一个更大的程序来做各种很酷的事情，很酷的事情会发生，直到我拔掉设备。当我重新插入时，没有任何效果。在我的代码执行任何操作之前，我必须运行并退出继电器控制程序。

我怀疑我必须对 FT_SetBitMode() 之类的 d2xx 驱动程序做一些事情。有没有办法只使用VCP模式？PyUSB 不会安装在我的计算机上，也不适用于 Linux。

我想要的只是一种使用 python 在 Linux 上控制继电器的简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:25:14.350

我首先建议您先尝试一下`hyperterminal`。

从您的代码片段中，您似乎缺少波特率（假设其余的将是默认值）。而且我真的不知道这是否重要，但我总是明确地将端口设置为`Serial('COM3')`，这样可能会减少一个故障点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T20:31:47.837

我有同样的问题，我认为你对 FT_SetBitMode() 是正确的。`ftd2xx`最终我通过使用（你可以通过 pip 获得）让它工作。您还需要安装 D2XX[驱动程序](http://www.ftdichip.com/Drivers/D2XX.htm)。

```
import ftd2xx
if ftd2xx.listDevices() < 1:
    print "No relays found. Exiting..."
    exit()
else: print "Initializing relays..."
relays = ftd2xx.open(0)
relays.setBitMode(255,1) # I think this uses FT_SetBitMode()
relays.write(b'\01\01')  # relay one on
relays.write(b'\01\01')  # relay two on
relays.write(b'\00\00')  # all relays off
relays.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:30:19.690

可能您对 Python 没有问题，但可以像这样控制设备。

您应该尝试找出设备是否对控制线（DST、DTR 等）的状态有特殊要求。

而且，别忘了，[Alex 已经提到](https://stackoverflow.com/a/16178527/296974)的通信速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T02:28:20.557

在 Windows 上使用虚拟 com 端口我发现我必须使用 115k 波特

# vba - 添加自动编号时“超出系统资源”

> ID：16176622
> 
> 赞同：1
> 
> 时间：2013-04-23T18:30:26.133
> 
> 标签：vba, ms-access

我有一张约 400,000 行的表。我正在尝试添加一个自动编号字段。当我尝试使用设计视图添加字段时，收到错误消息： `File sharing lock count exceeded. Increase MaxLocksPerFile registry entry.`

我不想进行永久注册表更改，所以我尝试了以下 VBA：

```
Sub addAuto()

DAO.DBEngine.SetOption dbMaxLocksPerFile, 1000000
CurrentDb.Execute "ALTER Table large_data add column rowID AUTOINCREMENT", dbFailOnError

End Sub 
```

这给了我以下错误消息：

`Run-time error '3035': System resource exceeded`

我应该怎么做才能添加自动编号字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:48:14.710

`large_data`您可以通过在尝试添加`rowID`字段之前丢弃行来避免该错误。然后，您必须重新添加数据。

1.  制作您的 db 文件的副本。
2.  清空`large_data`( `DELETE FROM large_data`)
3.  压缩数据库。
4.  将自动编号字段添加到表的设计中。
5.  链接到`large_table`数据库副本。
6.  运行“追加查询”以将链接表中的数据添加到新版本的`large_table`.

就像是 ...

```
INSERT INTO large_table (
    fld1,
    fld2,
    fld3
    )
SELECT
    fld1,
    fld2,
    fld3
FROM linked_table; 
```

包括除该`rowID`查询中的字段之外的所有字段的名称。db 引擎将处理自动编号值。

# asp.net-mvc-3 - 开发数据库连接在生产环境中持续存在

> ID：16176624
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:30:33.103
> 
> 标签：asp.net-mvc-3, sql-server-2005, web-config

正如标题所示，我在持久数据库连接方面遇到了一点问题。在这里，我们有 2 个数据库，一个用于开发和测试，一个用于官方生产。我们曾经在测试和部署时手动更改不同的连接字符串，有时会发生奇怪的错误。当我们突然停止开发数据库时，整个生产应用程序停止工作，说 SQL 连接丢失。但是 web.config 指向的是生产环境而不是测试环境！

经过一番研究，我们发现了 web.config 转换并认为可以解决我们的问题。它没有。即使我们的 web.config 没有对它进行单一引用，问题仍然存在，就好像我们的应用程序与开发环境紧密相关。

为了让事情更清楚，我将发布连接字符串、转换和发生的最新 SQL 错误（当我们将开发数据库限制为单用户进行某些更新时），以及我们将其连接到 DBML (L2SQL) 的方式.

连接字符串

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>

    <!--ConnectionString Central-->
    <add name="OperationsBD" connectionString="Data Source=DEVSERVER\DEV;Initial Catalog=OPERATION;Persist Security Info=True;User ID=lab;Password=devPassword" providerName="System.Data.SqlClient"/>
    <add name="AnalisysBD" connectionString="Data Source=DEVSERVER\DEV;Initial Catalog=ANALISYS;Persist Security Info=True;User ID=lab;Password=devPassword" providerName="System.Data.SqlClient"/> 

<!--Production ConnectionString-->
    <!--<add name="OperationsDB" connectionString="Data Source=PRODSERVER\COMPANY;Initial Catalog=OPERATION;Persist Security Info=True;User ID=company;Password=prodPassword" providerName="System.Data.SqlClient"/>
    <add name="AnalisysDB" connectionString="Data Source=PRODSERVER\COMPANY;Initial Catalog=ANALISYS;Persist Security Info=True;User ID=company;Password=prodPassword" providerName="System.Data.SqlClient"/>--> 
```

WEB.CONFIG 转换（生产）

```
<connectionStrings>
      <add name="OperationsDB" 
        connectionString="Data Source=PRODSERVER\COMPANY;Initial Catalog=OPERATION;Persist Security Info=True;User ID=company;Password=prodPassword" 
           providerName="System.Data.SqlClient"
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>

      <add name="AnalisysDB"
        connectionString="Data Source=PRODSERVER\COMPANY;Initial Catalog=ANALISYS;Persist Security Info=True;User ID=company;Password=prodPassword"
           providerName="System.Data.SqlClient"
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings> 
```

WEB.CONFIG 转换 (DEV)

```
<connectionStrings>
      <add name="OperationsDB"
        connectionString="Data Source=DEVSERVER\DEV;Initial Catalog=OPERATION;Persist Security Info=True;User ID=lab;Password=devPassword"
           providerName="System.Data.SqlClient"
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>

      <add name="AnalisysDB"
        connectionString="Data Source=DEVSERVER\DEV;Initial Catalog=ANALISYS;Persist Security Info=True;User ID=lab;Password=devPassword"
           providerName="System.Data.SqlClient"
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings> 
```

SQL ERROR（开发环境的单用户限制）

```
Cannot open database "operation" requested by the login. The login failed. Login failed for user 'lab'. 
```

最后，我们将它连接到 LINQ to SQL DBML 的方式

```
public partial class OperationDataContext
    {
        private const string OPERATION_CONN_STRING = "OperationsDB";
        public OperationDataContext()
            : base(System.Configuration.ConfigurationManager.ConnectionStrings[OPERATION_CONN_STRING].ConnectionString, mappingSource)
        {
            OnCreated();
        }
    }

    public partial class AnalisysDataContext
    {
        private const string ANALISYS_CONN_STRING = "AnalisysDB";
        public AnalisysDataContext()
            : base(System.Configuration.ConfigurationManager.ConnectionStrings[ANALISYS_CONN_STRING].ConnectionString, mappingSource)
        {
            OnCreated();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:43:17.547

这可能只是一个错字，但我确实注意到 Dev 上的“名称”是“OperationsBD”和“AnaylsisBD”，但转换设置为匹配“OperationsDB”和“AnaylsisDB”的名称。如果这不是一个错字，它永远不会匹配，因此永远不会替换连接字符串。

# php - 使用 mysql DB 匹配单词列表的前缀

> ID：16176627
> 
> 赞同：0
> 
> 时间：2013-04-23T18:30:56.380
> 
> 标签：php, mysql, wildcard, string-matching

我的目标是避免尝试匹配通配符的查询，因为它比匹配前缀和后跟通配符的查询慢 X100 倍。

对于一个单词来说这不是问题，但是如果我有一个用逗号分隔的单词列表怎么办？

是否有任何有效的方法可以通过前缀（后面带有通配符）而不是仅通过通配符来匹配这些单词？

我的意思是在这种情况下有什么方法可以避免像 %word% 这样的匹配模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:34:23.657

假设您在列表中有一个索引。否则，`like`与非前缀匹配相比，前缀匹配的性能不应慢 100 倍。是的，有点慢。但大部分工作应该是从页面中读取数据。

如果你有一个用逗号分隔的单词列表，那么你的数据结构是错误的。您需要引入一个带有 id 和每个单词的新表。

一旦您对数据进行了适当的规范化，您就可以为查询使用适当的关系构造，而无需使用`like`连接表或查找元素。

# youtube-api - 无法启动可恢复上传

> ID：16176628
> 
> 赞同：1
> 
> 时间：2013-04-23T18:31:08.567
> 
> 标签：youtube-api, google-api-php-client

API 版本 0.6.2

我正在关注这个答案：

[通过 google php client api v3 将大型视频发布到 youtube](https://stackoverflow.com/questions/14465491/post-large-video-to-youtube-via-google-php-client-api-v3)

我越来越

```
Failed to start the resumable upload
500 Internal Server Error - Google_Exception 
```

堆栈跟踪

```
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/service/Google_MediaFileUpload.php at line 260  -+
        if (200 == $code && true == $location) {
          return $location;
        }
        throw new Google_Exception("Failed to start the resumable upload");
      }
    } 

at Google_MediaFileUpload ->getResumeUri (object(Google_HttpRequest))
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/service/Google_MediaFileUpload.php at line 214  -+
      public function nextChunk(Google_HttpRequest $req, $chunk=false) {
        if (false == $this->resumeUri) {
          $this->resumeUri = $this->getResumeUri($req);
        }
        if (false == $chunk) {

at Google_MediaFileUpload ->nextChunk (object(Google_HttpRequest), '')
in /home/darko/NetBeansProjects/shekortet/src/Dalu/MediaBundle/Controller/EncodeController.php at line 284  -+
                    while (!$status && !feof($handle))
                    {
                        $chunk = fread($handle, $chunkSizeBytes);
                        $uploadStatus = $media->nextChunk($result, $chunk);
                        var_dump($uploadStatus);
                    } 
```

尝试发布不可恢复的上传时，我收到 400 Bad Request 错误。

错误信息

```
Error calling POST https://www.googleapis.com/youtube/v3/videos?part=status%2Csnippet&key=replacedkeystring: (400) Bad Request 
```

堆栈跟踪

```
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/io/Google_REST.php at line 66  -+
            $err .= ": ($code) $body";
          }
          throw new Google_ServiceException($err, $code, null, $decoded['error']['errors']);
        }

        // Only attempt to decode the response, if the response code wasn't (204) 'no content'

at Google_REST ::decodeHttpResponse (object(Google_HttpRequest))
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/io/Google_REST.php at line 36  -+
       */
      static public function execute(Google_HttpRequest $req) {
        $httpRequest = Google_Client::$io->makeRequest($req);
        $decodedResponse = self::decodeHttpResponse($httpRequest);
        $ret = isset($decodedResponse['data'])
            ? $decodedResponse['data'] : $decodedResponse;
        return $ret;

at Google_REST ::execute (object(Google_HttpRequest))
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/service/Google_ServiceResource.php at line 186  -+
          return $httpRequest;
        }
        return Google_REST::execute($httpRequest);
      }
      public  function useObjects() {

at Google_ServiceResource ->__call ('insert', array(array('part' => 'status,snippet', 'postBody' => object(Google_Video), 'mediaUpload' => object(Google_MediaFileUpload))))
in /home/darko/NetBeansProjects/shekortet/vendor/google/google-api-php-client/src/contrib/Google_YouTubeService.php at line 789  -+
        public function insert($part, Google_Video $postBody, $optParams = array()) {
          $params = array('part' => $part, 'postBody' => $postBody);
          $params = array_merge($params, $optParams);
          $data = $this->__call('insert', array($params));
          if ($this->useObjects()) {
            return new Google_Video($data);
          } else {

at Google_VideosServiceResource ->insert ('status,snippet', object(Google_Video), array('mediaUpload' => object(Google_MediaFileUpload)))
in /home/darko/NetBeansProjects/shekortet/src/Dalu/MediaBundle/Controller/EncodeController.php at line 277  -+
                    $media = new \Google_MediaFileUpload('video/x-matroska', null, false, $chunkSizeBytes);
                    $media->setFileSize(filesize($filename));
                    $result = $youtube->videos->insert("status,snippet", $gvideo, ['mediaUpload' => $media]);
                    $status = false;
                    $handle = fopen($filename, "rb"); 
```

我已经在几个小时前进行了身份验证。我看到令牌的生命周期是 3600 (1h)。这也是在本地完成的这可能是原因还是可能是什么原因？

任何帮助表示赞赏。

# node.js - 带有 Node.js 后端的移动应用程序 - 为客户端开发选择什么框架？

> ID：16176630
> 
> 赞同：2
> 
> 时间：2013-04-23T18:31:13.257
> 
> 标签：node.js, cordova, jquery-mobile, express, sencha-touch

我正计划构建一个混合移动应用程序，我已经在使用 Express 3 的服务器端和用于身份验证的 PAssport 方面取得了很好的进展。现在我需要决定在客户端使用什么框架或库。

我想知道是否可以得到一些建议，以及使用 Sencha Touch、JQuery Mobile、Phonegap 等框架的优缺点……如果还有其他你认为值得考虑的，请在此处提及，

感谢您的任何指示或建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:48:32.683

JQuery Mobile 和 Sencha Touch 是 JavaScript 库，可让您创建看起来像本机应用程序的 HTML5 应用程序。Cordova/Phonegap 允许您将 HTML5 应用程序封装在本机代码中，并提供一个通用 JavaScript API，使您可以访问本机功能，例如用相机拍照或获取用户联系人。使用 Cordova 的另一个好处是它使用相同的 HTML5 应用程序为您创建本机应用程序，因此您可以将这些文件发布到应用商店并增加您的分发。使用仅限 JQuery/Sencha Touch 的应用程序，您不能在应用程序商店中分发，因为您的混合应用程序只是一个网站（所以，我猜它只是一个移动应用程序。）

有数百篇博客文章比较了不同的 JavaScript 框架，比如 Sencha、jQuery 和 Dojo，所以你应该去阅读一些内容。我个人会推荐 Dojo，因为我认为它是最强大的企业级框架，但它可能有一个陡峭的学习曲线。我喜欢 Dojo 的一件事是构建系统，您可以选择所需的模块，这样您就不必最终包含像 JQuery 这样的巨大 .js 文件。我不知道 jQuery 是否可以做到这一点，但是我看到的很多使用 Cordova 和 JQuery 的用户应用程序最终都包括所有 jQuery 和 jQuery mobile。

如果您想访问本机设备功能和/或将 Web 应用程序打包为本机应用程序并将其分发到商店，您应该将这些 JavaScript 框架之一与 Cordova 结合使用。（Cordova 是 PhoneGap 的新名称。）Phonegap/Cordova 并不是真正用于构建移动 Web 应用程序，它用于扩展移动 Web 应用程序的功能并允许它们以完全跨平台的方式访问本机设备功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T01:19:38.537

[Ionic](http://ionicframework.com/)是一个新的框架，可用于制作我目前非常喜欢的混合应用程序。该框架是在 PhoneGap 之上使用 Sass 和 AngularJS 构建的。Ionic 只处理前端，因此您仍然可以使用 PhoneGap 构建您的应用程序。我发现，由于它使用 AngularJS，你的 javascript 代码最终会变得更干净，并且与使用 jQuery 编写的应用程序相比，你将节省开发时间，使你的应用程序更加流畅。它还有一些漂亮的 UI 元素。ionic 团队对该框架进行了许多速度优化，因此您的应用程序将比纯粹使用 PhoneGap 构建的典型混合应用程序感觉更加原生。该框架仍处于 alpha 阶段，但我对它印象深刻。

# android - 打电话后小部件按钮不起作用

> ID：16176635
> 
> 赞同：0
> 
> 时间：2013-04-23T18:31:41.310
> 
> 标签：android

我正在开发一个 android home 小部件。当我通过单击按钮启动呼叫意图时（即在我通过单击小部件按钮开始的活动中），在通话结束后，小部件的按钮不起作用。

当我单击按钮时，按钮的背景会发生变化，因此小部件不会崩溃，它可以工作但不会加载我认为的意图。并且没有关于这个问题的日志记录。

我这样开始打电话：

```
Intent callIntent=new Intent();
        callIntent.setAction(Intent.ACTION_CALL);

        callIntent.setData(Uri.parse("tel:"+phone));
        startActivity(callIntent); 
```

然后完成活动。如果我不再完成活动，它会起作用，但我需要完成活动。

编辑：

以下问题随机发生，通话后有时屏幕变黑。当我按下主页按钮时，它打开并且小部件按钮工作，但在我按下 4-5 秒后采取行动，但有时屏幕不会变黑并且小部件按钮不起作用。

编辑：

LogCat 充满了版本错误，除了最后一个。但它在控制之中。我用这个控制版本： if(android.os.Build.VERSION.SDK_INT>=11) 但它仍然记录这些日志。但应用程序工作正常。

日志

```
 04-23 23:18:05.715: I/dalvikvm(4300): Could not find method android.appwidget.AppWidgetManager.notifyAppWidgetViewDataChanged, referenced from method org.MyApp.AWidget.AWidgetProvider.UpdateWidget
04-23 23:18:05.715: W/dalvikvm(4300): VFY: unable to resolve virtual method 123: Landroid/appwidget/AppWidgetManager;.notifyAppWidgetViewDataChanged ([II)V
04-23 23:18:05.715: D/dalvikvm(4300): VFY: replacing opcode 0x6e at 0x002a
04-23 23:18:05.723: I/dalvikvm(4300): Could not find method android.appwidget.AppWidgetManager.notifyAppWidgetViewDataChanged, referenced from method org.MyApp.AWidget.AWidgetProvider.onReceive
04-23 23:18:05.723: W/dalvikvm(4300): VFY: unable to resolve virtual method 123: Landroid/appwidget/AppWidgetManager;.notifyAppWidgetViewDataChanged ([II)V
04-23 23:18:05.723: D/dalvikvm(4300): VFY: replacing opcode 0x6e at 0x006e
04-23 23:18:05.727: I/dalvikvm(4300): Could not find method android.appwidget.AppWidgetManager.notifyAppWidgetViewDataChanged, referenced from method org.MyApp.AWidget.AWidgetProvider.onUpdate
04-23 23:18:05.727: W/dalvikvm(4300): VFY: unable to resolve virtual method 123: Landroid/appwidget/AppWidgetManager;.notifyAppWidgetViewDataChanged ([II)V
04-23 23:18:05.727: D/dalvikvm(4300): VFY: replacing opcode 0x6e at 0x0019
04-23 23:18:05.731: W/dalvikvm(4300): Unable to resolve superclass of Lorg/MyApp/AWidget/AWidgetService; (487)
04-23 23:18:05.731: W/dalvikvm(4300): Link of class 'Lorg/MyApp/AWidget/AWidgetService;' failed
04-23 23:18:05.731: E/dalvikvm(4300): Could not find class 'org.MyApp.AWidget.AWidgetService', referenced from method org.MyApp.AWidget.AWidgetProvider.onUpdate
04-23 23:18:05.731: W/dalvikvm(4300): VFY: unable to resolve const-class 612 (Lorg/MyApp/AWidget/AWidgetService;) in Lorg/MyApp/AWidget/AWidgetProvider;
04-23 23:18:05.731: D/dalvikvm(4300): VFY: replacing opcode 0x1c at 0x01ec
04-23 23:18:05.731: D/dalvikvm(4300): VFY: dead code 0x01ee-025e in Lorg/MyApp/AWidget/AWidgetProvider;.onUpdate (Landroid/content/Context;Landroid/appwidget/AppWidgetManager;[I)V
04-23 23:18:08.938: E/dalvikvm(4300): Could not find class 'android.widget.PopupMenu', referenced from method org.MyApp.AWidget.SetRemind.showPopupMenu
04-23 23:18:08.938: W/dalvikvm(4300): VFY: unable to resolve new-instance 482 (Landroid/widget/PopupMenu;) in Lorg/MyApp/AWidget/SetRemind;
04-23 23:18:08.938: D/dalvikvm(4300): VFY: replacing opcode 0x22 at 0x0000
04-23 23:18:08.941: D/dalvikvm(4300): VFY: dead code 0x0002-001d in Lorg/MyApp/AWidget/SetRemind;.showPopupMenu (Landroid/view/View;)V
04-23 23:18:09.184: D/dalvikvm(4300): GC_EXTERNAL_ALLOC freed 92K, 47% free 2874K/5379K, external 2003K/2108K, paused 172ms
04-23 23:18:09.238: D/dalvikvm(4300): GC_EXTERNAL_ALLOC freed 18K, 47% free 2867K/5379K, external 2591K/2934K, paused 22ms
04-23 23:18:09.293: D/dalvikvm(4300): GC_EXTERNAL_ALLOC freed 1K, 47% free 2869K/5379K, external 3134K/3613K, paused 26ms
04-23 23:18:09.469: D/dalvikvm(4300): GC_EXTERNAL_ALLOC freed 28K, 46% free 2932K/5379K, external 4281K/4292K, paused 23ms
04-23 23:18:10.754: D/dalvikvm(4300): GC_EXPLICIT freed 100K, 43% free 3394K/5895K, external 4445K/5380K, paused 26ms 
```

我通过将方法移动到另一个类来清除所有版本错误。但是还是一样，这次GC错误多了

最新日志：

```
04-24 00:41:03.345: D/dalvikvm(6003): GC_EXTERNAL_ALLOC freed 102K, 47% free 2878K/5379K, external 2003K/2108K, paused 31ms
04-24 00:41:03.396: D/dalvikvm(6003): GC_EXTERNAL_ALLOC freed 26K, 47% free 2862K/5379K, external 2591K/2934K, paused 26ms
04-24 00:41:03.450: D/dalvikvm(6003): GC_EXTERNAL_ALLOC freed 1K, 47% free 2865K/5379K, external 3134K/3613K, paused 21ms
04-24 00:41:03.708: D/dalvikvm(6003): GC_EXTERNAL_ALLOC freed 27K, 46% free 2930K/5379K, external 4281K/4292K, paused 61ms
04-24 00:41:05.341: D/dalvikvm(6003): GC_EXPLICIT freed 108K, 43% free 3397K/5895K, external 4445K/5380K, paused 29ms
04-24 00:41:32.685: D/dalvikvm(6316): GC_EXTERNAL_ALLOC freed 87K, 47% free 2866K/5379K, external 2003K/2108K, paused 25ms
04-24 00:41:32.735: D/dalvikvm(6316): GC_EXTERNAL_ALLOC freed 18K, 47% free 2858K/5379K, external 2591K/2934K, paused 21ms
04-24 00:41:32.774: D/dalvikvm(6316): GC_EXTERNAL_ALLOC freed 1K, 47% free 2861K/5379K, external 3134K/3613K, paused 19ms
04-24 00:41:33.024: D/dalvikvm(6316): GC_EXTERNAL_ALLOC freed 30K, 46% free 2927K/5379K, external 4281K/4292K, paused 31ms
04-24 00:41:34.103: D/dalvikvm(6316): GC_EXPLICIT freed 104K, 43% free 3393K/5895K, external 4445K/5380K, paused 24ms
04-24 00:41:35.071: D/dalvikvm(6316): GC_EXPLICIT freed 425K, 46% free 3406K/6279K, external 4068K/5081K, paused 25ms
04-24 00:41:35.923: D/dalvikvm(6316): GC_EXPLICIT freed 417K, 46% free 3413K/6279K, external 4068K/5081K, paused 27ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:06:02.543

以下对我有用

```
 Uri uri = Uri.fromParts("tel", phoneNumber, null);
 Intent callIntent = new Intent(Intent.ACTION_CALL, uri);
 callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 context.startActivity(callIntent); 
```

# javascript - 无法删除添加的输入字段

> ID：16176636
> 
> 赞同：0
> 
> 时间：2013-04-23T18:31:41.310
> 
> 标签：javascript, jquery, javascript-events

我有一个 JavaScript 代码，我从使用 .live() 的旧感冒中改编而来，将其更改为 .on()，因为我使用的是 JQuery 1.9.1：

添加新的输入字段可以正常工作。问题是单击“删除”时它没有删除添加的字段。它甚至没有运行事件点击事件，我无法弄清楚原因。

HTML 代码：

```
<h2><a href="#" id="addScnt">Add Another Input Box</a></h2>
<div id="p_scents">
<p>
    <label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt" value="" placeholder="Input Value" /></label>
    <a href="#" id="remScnt">Remove</a>
</p>
</div> 
```

JS代码：

```
$(function() {
    var scntDiv = $('#p_scents');
    var i = $('#p_scents p').size() + 1;

    $('#addScnt').on('click', function() {
            $('<p><label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt_' + i +'" value="" placeholder="Input Value" /></label> <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
            i++;
            return false;
    });

    $('#remScnt').on('click', function() { 
        alert('remove');
            if( i > 2 ) {
                    $(this).parents('p').remove();
                    i--;
            }
            return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:33:52.363

如果它试图为动态生成的内容运行删除函数，请使用以下处理程序：

```
$(document).on('click', '#addScnt', function() {
        $('<p><label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt_' + i +'" value="" placeholder="Input Value" /></label> <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
        i++;
        return false;
});

$(document).on('click', '#remScnt', function() { 
    alert('remove');
        if( i > 2 ) {
                $(this).parents('p').remove();
                i--;
        }
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:36:44.263

事件委托。

并避免使用重复的 ID。

我已将它们改为类。

HTML

```
<h2><a href="#" id="addScnt">Add Another Input Box</a></h2>
<div id="p_scents">
<p>
    <label for="p_scnts"><input type="text" size="20" name="p_scnt" value="" placeholder="Input Value" /></label>
    <a href="#" class="remScnt">Remove</a>
</p>
</div> 
```

JavaScript

```
$(function() {
    var scntDiv = $('#p_scents');
    var i = $('#p_scents p').size() + 1;

    $('#addScnt').on('click', function() {
            $('<p><label for="p_scnts"><input type="text" size="20" name="p_scnt_' + i +'" value="" placeholder="Input Value" /></label> <a href="#" class="remScnt">Remove</a></p>').appendTo(scntDiv);
            i++;
            return false;
    });

    $('#p_scents').on('click', '.remScnt', function() { 
        alert('remove');
            if( i > 2 ) {
                    $(this).parents('p').remove();
                    i--;
            }
            return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:33:42.337

`.on()`尝试使用动态生成的元素进行事件委托

```
$(document).on('click','#remScnt', function() { 
        alert('remove');
            if( i > 2 ) {
                    $(this).parents('p').remove();
                    i--;
            }
            return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:56:43.713

问题是`selector by id`应该只有 1 个具有 1 个 id 的元素

# java - 如何从 main 方法打印 void 方法

> ID：16176637
> 
> 赞同：-4
> 
> 时间：2013-04-23T18:31:41.763
> 
> 标签：java, abstract-class, static

好的，所以我有三节课

```
abstract class Shape  
{  
int width, height;  
String color;

public void draw()    
{      
}
    } // end Shape class 
```

``

```
class Rectangle extends Shape
   {
Rectangle(int w, int h, String color)
{
    width = w;
    height = h;
    this.color = new String(color);
}

public void draw()
{
    System.out.println("I am a " + color + " Rectangle " + width + " wide and " + height + " high.");
}
   }// end Rectangle class 
```

``

```
 class Circle extends Shape
   {
  Circle (int r, String color)
   {
    width = 2*r;
    height = 2*r;
    this.color = new String(color);   
}
public void draw()
{
    System.out.println("I am a " + color + " Circle with radius " + width + ".");
}
    } // end Circle class 
```

`` 我要做的是创建一个新类来产生以下输出：我是一个蓝色 Rectangle 20 宽和 10 高。我是一个半径为 30 的红色圆圈。我是一个 25 宽和 25 高的绿色矩形 但我在调用方法 draw() 时遇到问题；

```
 This is the main class:
 public class Caller
  {
   public static void main(String args[]) 
    {
Caller call= new Caller();
Shape[] myShape = new Shape[3];

   myShape[0] = new Rectangle(20,10,"blue");
   myShape[1] = new Circle(30, "red");
   myShape[2] = new Rectangle(25,25, "green");
   for (int i=0; i < 3; i++)
     {
System.out.println();
     }
    call.draw(Rectangle);
    call.draw(Circle);
   } 
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:35:06.650

你的代码格式很糟糕，所以这只是一个猜测。我觉得你应该改变

```
for (int i=0; i < 3; i++)
     {
System.out.println();
     }
    call.draw(Rectangle);
    call.draw(Circle); 
```

至

```
for (int i=0; i < myShape.length; i++) {
    myShape[i].draw();
} 
```

此外，在`Shape`班级变更中

```
public void draw()
{
} 
```

至

```
public abstract void draw(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:33:38.337

您的 draw() 方法是在您的 Shape 类上定义的，而不是在您的 Caller 类上。

myShape[0].draw() 例如打印出矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:34:19.090

在您的`for`循环中，您需要为您正在`draw`使用的特定方法调用该方法，除非您想要另一个空白行，否则您`Shape`不需要调用。`System.out.println()`

```
for (int i=0; i < 3; i++)
{
    myShape[i].draw();
} 
```

删除像`call.draw`. 您不使用`call`调用方法。事实上，您甚至不需要`Caller`对象的实例。只需在已有`draw`的对象上调用该方法即可。`Shape`

正如 jlordo 的回答一样，`Shape`如果类没有方法，则不需要抽象。因此，您可以创建`draw`方法`abstract`，也可以`abstract`从`Shape`类中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:56:48.520

您的代码有几个问题：

1) 抽象类中的 draw() 方法应该是抽象的。或者，您可以将其实现为“部分”，就像我在下面发布的解决方案中一样，然后在 Shape 类中没有 abstract 关键字：

2) 不需要 new String("color")。字符串是不可变的，所以你可以写如下。

3）您错过了指定您的班级成员是私有的还是公共的或受保护的。考虑变量的可见性总是一个好主意。

4）您尝试打印直径而不是半径

5）您尝试在类而不是实例上调用方法

这是我的建议（未经测试......可能还有更多我没有看到的问题）：

```
class Shape  
{  
  protected int width, height;  
  protected String color;

  public void draw()    
  {      
    System.out.print("I am a " + color");
  }
} // end Shape class

class Rectangle extends Shape
{
  Rectangle(int w, int h, String color)
  {
    this.width = w;
    this.height = h;
    this.color = color;
  }

  public void draw()
  {
    super();
    System.out.print(" Rectangle " + width + " wide and " + height + " high.\n");
  }
}// end Rectangle class

class Circle extends Shape
{
  Circle (int r, String color)
  {
    this.width = 2*r;
    this.height = 2*r;
    this.color = new String(color);   
  }
  public void draw()
  {
    super();
    System.out.print(" Circle with radius " + (width/2) + ".\n");
  }
} // end Circle class 
```

稍后在 main 方法中，您需要执行以下操作：

```
Shape[] myShape = new Shape[3];

myShape[0] = new Rectangle(20,10,"blue");
myShape[1] = new Circle(30, "red");
myShape[2] = new Rectangle(25,25, "green");
for (int i=0; i < 3; i++)
{
  myShape[i].draw();
} 
```

# c# - 当我点击“从模型生成数据库”时，如何避免 EF 覆盖 OnModelCreating？

> ID：16176641
> 
> 赞同：0
> 
> 时间：2013-04-23T18:31:57.323
> 
> 标签：c#, entity-framework

在使用 EF 创建新的解决方案/数据库时，我正在尝试在 OnModelCreating 方法上设置复合键，因为在 ModelFirst 方法中设计人员无法做到这一点。

问题是，在我对 OnModelCreating(DbModelBuilder modelBuilder) 方法进行更改后，如果我必须在我的数据库中进行更改并点击“从模型生成数据库”它会覆盖我放置在那里的任何内容，我该如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:57:30.613

使用 IDatabaseInitializer 接口，有关详细信息，请参阅[this](http://msdn.microsoft.com/en-us/library/gg696323%28v=vs.103%29.aspx)。

还将 DatabaseInitializerForType 键添加到 appSettings

# php - SQL和PHP之间的程序时间差异

> ID：16176645
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:32:18.110
> 
> 标签：php, sql, performance

有人能说出 SQL 与 PHP 或相反的速度差异的平均百分比是多少。“速度差异”是指在处理数据的过程中。

我必须管理一个拥有庞大数据库的网站，这是我第一次处理这样的庞大数据库。如果比较的话，我对 PHP 的了解比我的 SQL 知识好十倍。出于这个原因，我一直在处理我的 PHP 脚本中的数据。

例如，我决定使用一个类来存储“图片”表中的图片数据。使用 PDO 和 fetchMode FETCH_CLASS，我可以操作从构造函数获取的数据。一个字段是字符串类型的图片大小，如“widthxheight”。在我的构造函数中，我使用拆分方法将两个属性存储在单独的变量中。由于有很多行，我想知道这种拆分是否最好直接从 SQL 代码的 fetch 语句中执行。

假设我有超过 10k 行，这种改变会有效吗？或者我可以为此目的坚持使用 PHP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:37:57.600

我认为在你的情况下，这将是一个巨大的差异：

您选择 N 行。您在每一行中更改一个值。这将导致 N 个更新查询可能包含 N 个事务。

如果定义一个更新查询，则可以在一个语句和一个事务中更新 N 行。

那会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:53:43.670

这里没有硬性规定。有些操作在 SQL 中会快很多，有些在 PHP 中会更快，而且速度差异会很大。

无论哪种方式，您描述的场景都不应该有很大的不同，因此您应该以任何方式来实现最易理解和可维护的代码。（可能在 PHP 中，就像您现在所做的那样。）

然而，宽度和高度存储在数据库中的方式是可怕和错误的。如果这是您必须处理的数据库设计的特征，那么预计会解决一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:40:41.430

我怀疑是否会有足够的差异。但是要知道，在 sql 中，这将是几个函数调用来复制拆分功能（在该分隔符和下一个分隔符实例之间找到第 N 个分隔符和子字符串），因为 sql 没有拆分函数并且不支持多个值一列。并且必须为每一列完成。如果值是逗号分隔的，您可以使用 find_in_set，但仍然可以调用多个函数。

# asp.net-mvc - 提交后重定向到导航的页面

> ID：16176647
> 
> 赞同：1
> 
> 时间：2013-04-23T18:32:23.907
> 
> 标签：asp.net-mvc, redirect, submit

我正在使用 ASP.NET MVC 和 C# 在 Visual Studio 2012 中开发一个 Web 项目。

我有一个`ResultController`您可以添加、删除或编辑结果对象的地方（--> a 的结果`SportsEvent`）。在***其他*****几个页面***上，我有一个**指向****`Add`.** `ResultController`但是在我在页面上提交结果后`Add`，我被**重定向到**控制器的***索引***页面。*

 *这是我的`ResultController`s`Add`方法的代码：

```
public ActionResult Create()
        {
            ViewBag.EventId = new SelectList(db.Events, "EventId", "Name");
            ViewBag.AthleteId = new SelectList(db.Athletes, "AthleteId", "Name");
            ViewBag.MeetingId = new SelectList(db.Meetings, "MeetingId", "Name");
            ViewBag.StudentId = new SelectList(db.Students, "StudentId", "Name");
            return View();
        }

        //
        // POST: /Result/Create

        [HttpPost]
        public ActionResult Create(Result result)
        {
            if (ModelState.IsValid)
            {
                db.Results.Add(result);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

ViewBag.EventId = new SelectList(db.Events, "EventId", "Name", result.EventId);
ViewBag.AthleteId = new SelectList(db.Athletes, "AthleteId", "Name", result.AthleteId);
ViewBag.MeetingId = new SelectList(db.Meetings, "MeetingId", "Name", result.MeetingId);
ViewBag.StudentId = new SelectList(db.Students, "StudentId", "Name", result.StudentId);
            return View(result);
        } 
```

**我想要实现**
的目标 如果添加成功，我想被**重定向**到**我*最初来自***的页面。

即，如果我单击**页面 "x"**上的 "addResult" 链接，我希望在提交结果后被**重定向到页面 "x" 。**

我怎么能意识到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:01:35.793

代替：

```
RedirectToAction("Index"); 
```

你可以使用类似的东西：

```
return new RedirectResult(Request.UrlReferrer.AbsoluteUri); 
```*

# css - 尝试对类更改进行 CSS 转换

> ID：16176648
> 
> 赞同：51
> 
> 时间：2013-04-23T18:32:29.720
> 
> 标签：css

想知道当 div 被赋予某个类时是否有办法进行 css 转换。我最好的例子是这个网站[http://ideaware.co/](http://ideaware.co/)

当您向下滚动并且标题变为固定时，它会更改背景颜色并具有不透明度。真的很好看。

我正在处理我在这里[http://www.niviholdings.com/collide/](http://www.niviholdings.com/collide/)的模板，我想做的是当 < nav > 固定时，我希望 < ul > 向右滑动。

希望我能正确解释这一点。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-23T18:46:10.193

> 想知道当 div 被赋予某个类时是否有办法进行 css 转换。

你当然可以...

```
document.querySelector('#header').addEventListener('click', function(e) {
    e.target.classList.toggle('transition');
})
```

```
#header {
    background: red;
    padding: 10px 0;
    position: relative;
    -webkit-transition: all 1s linear;
    -moz-transition: all 1s linear;
    -o-transition: all 1s linear;
    transition: all 1s linear;
    left:0;
}

#header.transition {
    background: green;
    left: 50px;
}
```

```
<div id="header">Click me to toggle class</div>
```

[演示](http://jsfiddle.net/nQe7F/62/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-23T19:33:05.333

我发现 2 点**可能会**有所帮助：

从`auto`固定值转换可能是个问题。最终，您可以尝试将 的 设置`margin-left`为`.main-nav-ul`默认的固定值，而不仅仅是在粘性时。

第二个是（这是hacky）。尝试为您的`.main-nav-ul`延迟申请课程：

```
setTimeout(function() {
    $('.main-nav-ul').addClass('nav-slide'); // line 57 in jquery.sticky.js
}, 100); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-23T18:45:29.637

# CSS 转换只需 4 个简单步骤

1.  确保使用 CSS 过渡可以实现您想要做的事情。您可以通过[查看 W3C 文档](http://www.w3.org/TR/css3-transitions/#animatable-css)来做到这一点。

2.  将过渡和您的起始样式添加到您的基本元素。

3.  添加样式已更改的类或状态。

4.  添加添加类的机制（如果适用）。

简单的例子，假设你想在`:hover`. 你只需这样做：

```
element {
  margin-left: 10px;
  transition: margin-left linear .5s;
}

element:hover {
  margin-left: 0;
} 
```

[这是一个快速演示。](http://jsfiddle.net/gordondev/eMGRk/)

# scala - Akka 超时启动事件处理程序

> ID：16176654
> 
> 赞同：2
> 
> 时间：2013-04-23T18:32:50.380
> 
> 标签：scala, akka

当我使用 akka 运行我的应用程序时，它失败并出现以下异常：

```
Event Handler specified in config can't be loaded [com.despegar.hasp.impl.DummyLogEventHandler] due to [a06c8d75-0f07-40db-883a-16dc2914934bakka.event.Logging$LoggerInitializationException: Logger log1-DummyLogEventHandler did not respond with LoggerInitialized, sent instead [TIMEOUT] 
```

DummyLogEventHandler 定义为：

```
class DummyLogEventHandler extends Actor {
   def receive = {
     case InitializeLogger(_) => sender ! LoggerInitialized
     case Error(cause, logSource, logClass, message) =>
     case Warning(logSource, logClass, message) =>
     case Info(logSource, logClass, message) =>
     case Debug(logSource, logClass, message) =>
   } 
```

}

我的配置有以下几行：

```
event-handlers = ["my.app.DummyLogEventHandler"]
event-handler-startup-timeout = 15s 
```

但我也尝试过使用默认记录器：

```
event-handlers = [] 
```

并使用 slf4j（我的应用程序正在使用 logback 后端并且日志记录工作正常）：

```
event-handlers = ["akka.event.slf4j.Slf4jEventHandler"] 
```

到目前为止，这些事件处理程序和将超时增加到 60 秒都没有工作。此外，超时偶尔会抛出。当我运行一个测试套件时，每次都会在不同的测试中抛出异常。

你能帮我找到解决办法吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-25T17:13:27.557

尝试为记录器初始化设置更大的超时时间：

例如在 conf 文件中：

```
 akka {logger-startup-timeout = 25s } 
```

签出文档

[http://doc.akka.io/docs/akka/snapshot/general/configuration.html](http://doc.akka.io/docs/akka/snapshot/general/configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:59:00.733

在讨论[akka-user](https://groups.google.com/d/msg/akka-user/rnbcw9urWKI/GFba1-9mj6MJ)之后，发现了以下内容。

此问题是配置`akka.actor.default-dispatcher`to be of的症状`type = BalancingDispatcher`，它无法工作，请参阅[该调度程序类型的文档](http://doc.akka.io/docs/akka/2.1.2/java/dispatchers.html#Types_of_dispatchers)：

*   所有参与者共享一个邮箱，他们从中获取消息。

*   假设使用该调度程序的同一实例的所有参与者都可以处理已发送到其中一个参与者的所有消息；即参与者属于参与者池，并且对于客户端而言，不能保证哪个参与者实例实际处理给定消息。

*   可共享性：仅限同一类型的参与者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T14:13:17.107

在我的情况下，在 conf 中添加超时设置不起作用，但像下面这样直接设置系统属性是可行的。

```
System.setProperty("akka.logger-startup-timeout", "30s")
```

# algorithm - 三边测量和定位点 (x,y,z)

> ID：16176656
> 
> 赞同：23
> 
> 时间：2013-04-23T18:32:57.873
> 
> 标签：algorithm, localization, geometry, triangulation, trilateration

我想找到一个未知节点的坐标，它位于空间中的某个位置，其参考距离远离 3 个或更多节点，这些节点都具有已知坐标。

[这个问题与此处描述的Trilateration](http://en.wikipedia.org/wiki/Trilateration)完全相同。

但是，我不了解有关“初步和最终计算”的部分（请参阅维基百科网站）。我不知道在哪里可以找到 P1、P2 和 P3，这样我就可以把这些方程式放在哪里？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-23T18:39:24.693

三边测量是寻找三个球体相交区域中心的过程。必须知道三个球体中每个球体的中心点和半径。

让我们考虑您的三个示例中心点 P1 [-1,1]、P2 [1,1] 和 P3 [-1,-1]。第一个要求是 P1' 位于原点，因此让我们通过将偏移向量 V [1,-1] 添加到所有三个点来相应地调整点：

```
P1' = P1 + V = [0, 0]
P2' = P2 + V = [2, 0]
P3' = P3 + V = [0,-2] 
```

注意：调整后的点由 '（撇号）注释表示。

P2' 也必须位于 x 轴上。在这种情况下，它已经存在，因此无需调整。

我们将假设每个球体的半径为 2。

现在我们有 3 个方程（给定）和 3 个未知数（交点中心的 X、Y、Z）。

求解 P4'x：

```
x = (r1^2 - r2^2 + d^2) / 2d  //(d,0) are coords of P2'
x = (2^2 - 2^2 + 2^2) / 2*2
x = 1 
```

求解 P4'y：

```
y = (r1^2 - r3^2 + i^2 + j^2) / 2j - (i/j)x //(i,j) are coords of P3'
y = (2^2 - 2^2 + 0 + -2^2) / 2*-2 - 0
y = -1 
```

对于 2D 问题忽略 z。

P4' = [1,-1]

现在我们通过减去偏移向量 V 转换回原始坐标空间：

P4 = P4' - V = [0,0]

正如预期的那样，解点 P4 位于原点。

文章的后半部分描述了一种表示一组点的方法，其中 P1 不在原点或 P2 不在 x 轴上，以便它们符合这些约束。我更愿意将其视为翻译，但两种方法都会产生相同的解决方案。

**编辑：将 P2' 旋转到 x 轴**

如果将 P1 平移到原点后 P2' 不在 x 轴上，我们必须对视图执行旋转。

首先，让我们创建一些新向量作为示例： P1 = [2,3] P2 = [3,4] P3 = [5,2]

请记住，我们必须首先将 P1 转换为原点。与往常一样，偏移矢量 V 为 -P1。在这种情况下，V = [-2,-3]

```
P1' = P1 + V = [2,3] + [-2,-3] = [0, 0]
P2' = P2 + V = [3,4] + [-2,-3] = [1, 1]
P3' = P3 + V = [5,2] + [-2,-3] = [3,-1] 
```

要确定旋转角度，我们必须找到 P2' 和 [1,0]（x 轴）之间的角度。

我们可以使用[点积](http://en.wikipedia.org/wiki/Dot_product)相等：

```
A dot B = ||A|| ||B|| cos(theta) 
```

当 B 为 [1,0] 时，可以简化为：A 点 B 始终只是 A 的 X 分量，||B|| （B 的大小）总是乘以 1，因此可以忽略。

我们现在有 Ax = ||A|| cos(theta)，我们可以将其重新排列为我们的最终方程：

```
theta = acos(Ax / ||A||) 
```

或者在我们的例子中：

```
theta = acos(P2'x / ||P2'||) 
```

我们使用 ||A|| 计算 P2' 的大小。= sqrt(Ax + Ay + Az)

```
||P2'|| = sqrt(1 + 1 + 0) = sqrt(2) 
```

将其插入我们可以解决 theta

```
theta = acos(1 / sqrt(2)) = 45 degrees 
```

现在让我们使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)将场景旋转 -45 度。由于 P2'y 为正，并且旋转矩阵逆时针旋转，我们将使用负旋转将 P2 与 x 轴对齐（如果 P2'y 为负，则不要否定 theta）。

```
R(theta) = [cos(theta) -sin(theta)]
           [sin(theta)  cos(theta)]

  R(-45) = [cos(-45) -sin(-45)]
           [sin(-45)  cos(-45)] 
```

我们将使用双撇号“'”来表示已经平移和旋转的向量。

```
P1'' = [0,0] (no need to calculate this one)

P2'' = [1 cos(-45) - 1 sin(-45)] = [sqrt(2)] = [1.414]
       [1 sin(-45) + 1 cos(-45)] = [0]       = [0]

P3'' = [3 cos(-45) - (-1) sin(-45)] = [sqrt(2)]    = [ 1.414]
       [3 sin(-45) + (-1) cos(-45)] = [-2*sqrt(2)] = [-2.828] 
```

现在您可以使用 P1''、P2'' 和 P3'' 来求解 P4''。对 P4'' 应用反向旋转得到 P4'，然后反向平移得到 P4，你的中心点。

要撤消旋转，请将 P4'' 乘以 R(-theta)，在本例中为 R(45)。要撤消平移，请减去偏移向量 V，这与添加 P1 相同（假设您最初使用 -P1 作为 V）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-27T18:46:20.990

这是我在 3D 打印机固件中使用的算法。它避免了旋转坐标系，但它可能不是最好的。

三边测量问题有两种解决方案。要获得第二个，请将二次方程解中的“- sqrtf”替换为“+ sqrtf”。

显然，如果您有足够的处理器能力和内存，您可以使用双精度数而不是浮点数。

```
// Primary parameters
float anchorA[3], anchorB[3], anchorC[3];               // XYZ coordinates of the anchors

// Derived parameters
float Da2, Db2, Dc2;
float Xab, Xbc, Xca;
float Yab, Ybc, Yca;
float Zab, Zbc, Zca;
float P, Q, R, P2, U, A;

...

inline float fsquare(float f) { return f * f; }

...

// Precompute the derived parameters - they don't change unless the anchor positions change.
Da2 = fsquare(anchorA[0]) + fsquare(anchorA[1]) + fsquare(anchorA[2]);
Db2 = fsquare(anchorB[0]) + fsquare(anchorB[1]) + fsquare(anchorB[2]);
Dc2 = fsquare(anchorC[0]) + fsquare(anchorC[1]) + fsquare(anchorC[2]);
Xab = anchorA[0] - anchorB[0];
Xbc = anchorB[0] - anchorC[0];
Xca = anchorC[0] - anchorA[0];
Yab = anchorA[1] - anchorB[1];
Ybc = anchorB[1] - anchorC[1];
Yca = anchorC[1] - anchorA[1];
Zab = anchorB[2] - anchorC[2];
Zbc = anchorB[2] - anchorC[2];
Zca = anchorC[2] - anchorA[2];
P = (  anchorB[0] * Yca
     - anchorA[0] * anchorC[1]
     + anchorA[1] * anchorC[0]
     - anchorB[1] * Xca
    ) * 2;
P2 = fsquare(P);
Q = (  anchorB[1] * Zca
     - anchorA[1] * anchorC[2]
     + anchorA[2] * anchorC[1]
     - anchorB[2] * Yca
    ) * 2;  

R = - (  anchorB[0] * Zca
       + anchorA[0] * anchorC[2]
       + anchorA[2] * anchorC[0]
       - anchorB[2] * Xca
      ) * 2;
U = (anchorA[2] * P2) + (anchorA[0] * Q * P) + (anchorA[1] * R * P);
A = (P2 + fsquare(Q) + fsquare(R)) * 2;

...

// Calculate Cartesian coordinates given the distances to the anchors (La, Lb and Lc)
// First calculate PQRST such that x = (Qz + S)/P, y = (Rz + T)/P.
// P, Q and R depend only on the anchor positions, so they are pre-computed
const float S = - Yab * (fsquare(Lc) - Dc2)
                - Yca * (fsquare(Lb) - Db2)
                - Ybc * (fsquare(La) - Da2);
const float T = - Xab * (fsquare(Lc) - Dc2)
                + Xca * (fsquare(Lb) - Db2)
                + Xbc * (fsquare(La) - Da2);

// Calculate quadratic equation coefficients
const float halfB = (S * Q) - (R * T) - U;
const float C = fsquare(S) + fsquare(T) + (anchorA[1] * T - anchorA[0] * S) * P * 2 + (Da2 - fsquare(La)) * P2;

// Solve the quadratic equation for z
float z = (- halfB - sqrtf(fsquare(halfB) - A * C))/A;

// Substitute back for X and Y
float x = (Q * z + S)/P;
float y = (R * z + T)/P; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T13:38:26.980

以下是 Wikipedia 计算，以 OpenSCAD 脚本呈现，我认为这有助于以视觉方式理解问题，并提供一种简单的方法来检查结果是否正确。[脚本的示例输出](https://github.com/kwikius/Trilateration/blob/master/trilateration_example.png)

```
// Trilateration example
// from Wikipedia
// 
// pA, pB and pC are the centres of the spheres
// If necessary the spheres must be translated
// and rotated so that:
// -- all z values are 0
// -- pA is at the origin
pA = [0,0,0];
// -- pB is on the x axis
pB = [10,0,0];
pC = [9,7,0];

// rA , rB and rC are the radii of the spheres
rA = 9;
rB = 5;
rC = 7;

if ( pA != [0,0,0]){
   echo ("ERROR: pA must be at the origin");
   assert(false);
}

if ( (pB[2] !=0 ) || pC[2] !=0){
   echo("ERROR: all sphere centers must be in z = 0 plane");
   assert(false);
}

if (pB[1] != 0){
   echo("pB centre must be on the x axis");
   assert(false);
}

// show the spheres
module spheres(){
   translate (pA){
      sphere(r= rA, $fn = rA * 10);
   }

   translate(pB){
      sphere(r = rB, $fn = rB * 10);
   }

   translate(pC){
      sphere (r = rC, $fn = rC * 10);
   }
}

function unit_vector( v) = v / norm(v);

ex = unit_vector(pB - pA) ;
echo(ex = ex);

i = ex * ( pC - pA);
echo (i = i);

ey = unit_vector(pC - pA - i * ex);
echo (ey = ey);

d = norm(pB - pA);
echo (d = d);

j =  ey * ( pC - pA);
echo (j = j);

x = (pow(rA,2) - pow(rB,2) + pow(d,2)) / (2 * d);
echo( x = x);

// size of the cube to subtract to show 
// the intersection of the spheres
cube_size = [10,10,10];

if ( ((d - rA) >= rB) || ( rB >= ( d + rA)) ){
   echo ("Error Y not solvable");
}else{
   y = (( pow(rA,2) - pow(rC,2) + pow(i,2) + pow(j,2)) / (2 * j))
      - ( i / j) * x;
   echo(y = y);
   zpow2 = pow(rA,2) - pow(x,2) - pow(y,2);
   if ( zpow2 < 0){
      echo ("z not solvable");
   }else{
      z = sqrt(zpow2);
      echo (z = z);
      // subtract a cube with one of its corners 
      // at the point where the sphers intersect
      difference(){
         spheres();
         translate ([x,y - cube_size[1],z]){
           cube(cube_size);
         }
      }
      translate ([x,y - cube_size[1],z]){
           %cube(cube_size);
      }
  }
} 
```

# java - 为什么要创建一个 testClass 对象

> ID：16176661
> 
> 赞同：0
> 
> 时间：2013-04-23T18:33:16.803
> 
> 标签：java, object, test-class

我只是想理解一些事情。testClass (z1) 对象的意义何在？

我的理解是，它是所有其他对象的起点。我真的在问这意味着什么，一个 testClass 为什么/如何需要它自己的实例？还有其他方法可以达到相同的结果吗？

下面的代码： -

```
public class testBank {  

creditAccount a1 = new creditAccount("Mary Chapple", 2400.41);
creditAccount a2 = new creditAccount("Jim Smith", 2.56);
creditAccount a3 = new creditAccount("Henry A Jones", 700.89);
currentAccount b1 = new currentAccount("Simon Hopkins", 86.01);
currentAccount b2 = new currentAccount("Jack C Whitheridge", 40000.29);
currentAccount b3 = new currentAccount("Bill Sutton", 100.23);
depositAccount c1 = new depositAccount("Theo Gibson", 145.99);
depositAccount c2 = new depositAccount("Jasper Williams", 3000.29);          
depositAccount c3 = new depositAccount("Julie Banks", 1000001.99);      
savingsAccount d1 = new savingsAccount("Burnard White", 2400.42);
savingsAccount d2 = new savingsAccount("Richard Bennett", 203.16);
savingsAccount d3 = new savingsAccount("Bob Robinson", 10000.11);

public testBank()
        //Create an array of objects.//
{
    bankAccount[]theAccounts = {a1,a2,a3,b1,b2,b3,c1,c2,c3,d1,d2,d3};

    showAccounts (theAccounts);
}
private void showAccounts(bankAccount[] aa)
{ 
    for (int i = 0;i <aa.length;i++)  
    {

        System.out.println("Account Holder: " +aa[i].getAccountName());
         System.out.println("Balance = £" +aa[i].getBalance());
     System.out.println("Balance pluss APR = £" +aa[i].calculateInterest());

    }
}

public static void main(String[]args)
{

    testBank z1 = new testBank();
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:22:12.783

testClass 的重点是通过在标准输出上打印 bankAccount 类的参数和方法结果来测试您的帐户：

您的 creditAccount、currentAccount、depositAccount 和 SavingAccount 类扩展了 bankAccount 类（这些类继承了 bankAccount 类）。

如果你不想使用 testBank 类，你也可以在 bankAccount 类中创建一个 print 方法来打印这些信息

```
public void print ()
{ 
    System.out.println("Account Holder: " + this.getAccountName());
    System.out.println("Balance = £" + this.getBalance());
    System.out.println("Balance pluss APR = £" + this.calculateInterest());
} 
```

然后您将使用以下方法测试您的帐户：

```
public static void main(String[]args)
{
    creditAccount a1 = new creditAccount("Mary Chapple", 2400.41);
    currentAccount b1 = new currentAccount("Simon Hopkins", 86.01);
    depositAccount c1 = new depositAccount("Theo Gibson", 145.99);    
    savingsAccount d1 = new savingsAccount("Burnard White", 2400.42);
    a1.print();
    b1.print();
    c1.print();
    d1.print();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:18:45.217

测试类实际上并不需要它自己的实例，它通常需要的是您正在测试的任何类的实例。通常你会从不同的文件中测试一个类，并在测试文件中创建和调用被测试类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:59:31.987

testBank() 方法是一个构造函数。当您创建一个新的 testBank 实例时，将调用此函数。

您应该使用此方法来初始化您的不同变量（a1、a2 等...）。

```
public class testBank
{  
    private creditAccount a1;
    private creditAccount a2;
    private creditAccount a3;
    private currentAccount b1;
    private currentAccount b2;
    private currentAccount b3;
    private depositAccount c1;
    private depositAccount c2;          
    private depositAccount c3;      
    private savingsAccount d1;
    private savingsAccount d2;
    private savingsAccount d3;

    public testBank()
        //Create an array of objects.//
    {
        this.a1 = new creditAccount("Mary Chapple", 2400.41);
        this.a2 = new creditAccount("Jim Smith", 2.56);
        this.a3 = new creditAccount("Henry A Jones", 700.89);
        this.b1 = new currentAccount("Simon Hopkins", 86.01);
        this.b2 = new currentAccount("Jack C Whitheridge", 40000.29);
        this.b3 = new currentAccount("Bill Sutton", 100.23);
        this.c1 = new depositAccount("Theo Gibson", 145.99);
        this.c2 = new depositAccount("Jasper Williams", 3000.29);          
        this.c3 = new depositAccount("Julie Banks", 1000001.99);      
        this.d1 = new savingsAccount("Burnard White", 2400.42);
        this.d2 = new savingsAccount("Richard Bennett", 203.16);
        this.d3 = new savingsAccount("Bob Robinson", 10000.11);
        bankAccount[]theAccounts = {a1,a2,a3,b1,b2,b3,c1,c2,c3,d1,d2,d3};

        showAccounts (theAccounts);
    }

    private void showAccounts(bankAccount[] aa)
    { 
        for (int i = 0;i <aa.length;i++)  
        {
         System.out.println("Account Holder: " +aa[i].getAccountName());
         System.out.println("Balance = £" +aa[i].getBalance());
         System.out.println("Balance pluss APR = £" +aa[i].calculateInterest());
        }
    }

    public static void main(String[]args)
    {

        testBank z1 = new testBank();
    }
} 
```

那么，那里发生了什么？

当您打电话时，`testBank z1 = new testBank();`您正在创建 testBank 类的新实例。因此，调用了默认构造函数（testBank() 函数）。在您的默认构造函数中，所有私有变量都被初始化，然后构造一个数组，最后调用 showAccounts 方法（该方法打印数组内容）。

# delphi - 如何读取注册表项的默认值

> ID：16176662
> 
> 赞同：6
> 
> 时间：2013-04-23T18:33:20.960
> 
> 标签：delphi

我有一个 Delphi XE2 项目来使用注册表项。所以我定义了以下代码：

```
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  RegistryEntry: TRegistry;
begin
  RegistryEntry := TRegistry.Create(KEY_READ or KEY_WOW64_64KEY);
  RegistryEntry.RootKey:= HKEY_LOCAL_MACHINE;
  if (not RegistryEntry.KeyExists('Software\MyCompanyName\MyName\')) then
    begin
      RegistryEntry.Access:= KEY_WRITE or KEY_WOW64_64KEY;
      RegistryEntry.OpenKey('Software\MyCompanyName\MyName\',True);
      RegistryEntry.WriteString('', 'MyFirstProject');
    end
  else
    begin
      Memo01.Lines.Add(RegistryEntry.ReadString('(Default)')); //Not Working
      Memo01.Lines.Add(RegistryEntry.ReadString('')); //Not Working
      Memo01.Lines.Add(RegistryEntry.ReadString('@')); //Not Working
    end;
  RegistryEntry.CloseKey();
  RegistryEntry.Free;
end; 
```

我的要求是检查“MyName”的默认值并显示在 Memo01 中。但什么都没有发生。所以我尝试了另一种方法如下：

```
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  RegistryEntry: TRegistry;
  RegistryString: string;
begin
  RegistryEntry := TRegistry.Create(KEY_READ or KEY_WOW64_64KEY);
  RegistryEntry.RootKey:= HKEY_LOCAL_MACHINE;
  if (not RegistryEntry.KeyExists('Software\MyCompanyName\MyName\')) then
    begin
      RegistryEntry.Access:= KEY_WRITE or KEY_WOW64_64KEY;
      RegistryEntry.OpenKey('Software\MyCompanyName\MyName\',True);
      RegistryEntry.WriteString('', 'MyFirstProject');
    end
  else
    begin
      RegistryString := RegistryEntry.ReadString('(Default)'); //Not Working
      RegistryString := RegistryEntry.ReadString(''); //Not Working
      RegistryString := RegistryEntry.ReadString('@'); //Not Working
      Memo01.Lines.Add(RegistryString);
    end;
  RegistryEntry.CloseKey();
  RegistryEntry.Free;
end; 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T18:43:14.853

您的 else 部分没有 Openkey。

```
Const
  C_KEY='Software\MyCompanyName\MyName\';
var
  RegistryEntry: TRegistry;
  RegistryString: string;
begin
  RegistryEntry := TRegistry.Create(KEY_READ or KEY_WOW64_64KEY);
  try
    RegistryEntry.RootKey := HKEY_LOCAL_MACHINE;
    if (not RegistryEntry.KeyExists(C_KEY)) then
    begin
      RegistryEntry.Access := KEY_WRITE or KEY_WOW64_64KEY;
      if RegistryEntry.OpenKey(C_KEY, true) then
        RegistryEntry.WriteString('', 'MyFirstProject');
    end
    else
    begin
      RegistryEntry.Access := KEY_READ or KEY_WOW64_64KEY;
      if RegistryEntry.OpenKey(C_KEY, false) then
      begin
        Memo01.Lines.Add(RegistryEntry.ReadString(''));
      end;
    end;
    RegistryEntry.CloseKey();
  finally
    RegistryEntry.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:56:23.597

您可能要考虑使用 HKEY_CURRENT_USER 而不是 HKEY_LOCAL_MACHINE。

在 Vista/7/8 中，除非程序使用管理员权限运行，否则您实际上不会获得 HKEY_LOCAL_MACHINE，而是获得虚拟化位置。从本质上讲，Windows 为您提供了只有用户才能看到的东西。

使用 HKEY_LOCAL_MACHINE 只会在以后导致头痛。Windows 一直在锁定它。

# html - 不应该存在的图像之间的空白间距

> ID：16176673
> 
> 赞同：0
> 
> 时间：2013-04-23T18:33:51.707
> 
> 标签：html, css

我只是在搞乱基本的 HTML 和 CSS 并遇到了这个问题。我有两个直接在彼此之上的图像，它们从屏幕顶部和向下出现。我不明白为什么有一条白线将两个图像分开。我认为它已连接到第一张图像，因为第二张图像具有相同的间距但更小，如果您突出显示图像。

HTML：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Christdentity</title>
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript"></script>
    </head>
    <body>
        <img class="logo-banner" src="images/christd_logo_banner.jpg">
        <img class="logo-banner-dark" src="images/christd_logo_banner2.jpg">
    </body>
</html> 
```

CSS：

```
body {
    margin: 0;
}

img.logo-banner {
    width: 100%;
    min-width: 600px;
    height: 40px; 
    padding-bottom: 0; 
}

img.logo-banner-dark {
    width: 100%;
    min-width: 600px;
    height: 20px;
    padding-bottom: 0;
} 
```

jsfiddle：http: [//jsfiddle.net/Sederu/nQe7F/](http://jsfiddle.net/Sederu/nQe7F/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:36:59.360

添加`display: block;`到默认情况下`<img>`它们被[替换为内联元素](http://www.w3.org/TR/CSS2/visuren.html#inline-boxes)

```
img.logo-banner {
display: block;
width: 100%;
min-width: 600px;
height: 40px; 
padding-bottom: 0; 
}

img.logo-banner-dark {
display: block;
width: 100%;
min-width: 600px;
height: 20px;
padding-bottom: 0;
} 
```

[http://jsfiddle.net/nQe7F/2/](http://jsfiddle.net/nQe7F/2/)

另请看：[消除图像之间的垂直空白](https://stackoverflow.com/questions/3854199/eliminate-vertical-whitespace-between-images)

# c# - Visual Studio 2012 无法从“bool”转换为“System.Boolean”

> ID：16176677
> 
> 赞同：0
> 
> 时间：2013-04-23T18:33:58.667
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2012, intellisense

即使项目有效，我也会出现奇怪的智能感知错误。他们都处理引用的项目。

例子：

> 无法从 'bool' 转换为 'System.Boolean'
> 
> 无法从“字符串”转换为“System.String”
> 
> 大量警告声称我没有正确使用这些方法。重载等......即使他们工作。
> 
> 调试时错误消失

这都是内部代码，所以我真的不能分享任何东西。如果我在 VS 2010 中加载相同的项目，我没有问题。2012 年的其他安装也没有问题。

关于什么可能是错误的任何一般想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:13:08.267

根据您提供的信息，例如在 VS2010 中运行良好，以及 VS2012 的其他安装，最好简单地重新安装 VS2012。

对我来说，似乎某些库链接可能无法通过智能感知为活动调试器正确地相互引用。

我还将确保您也拥有最新的操作系统，因为 VS2012 如果仍然“相当”新，它们可能仍然会捕获在操作系统（或 .NET Framework）的热修复中修复的错误）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:10:47.427

在系统上安装 VS 2012 Express 解决了这个问题。.net 库中一定有什么东西丢失或损坏了？任何想法为什么？

# jms - 带有 jms Hornetq 的消息计数器

> ID：16176678
> 
> 赞同：0
> 
> 时间：2013-04-23T18:34:01.713
> 
> 标签：jms, counter, hornetq

我想知道 jms hornetq 中当前的消息数量，但我只想为单个 JMS 队列打开计数器。我不想为我拥有的所有队列浪费磁盘空间。有没有办法做到这一点？

先谢谢了。

-DpDb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:44:26.120

您可以通过管理访问所需队列的消息计数器。

在 HornetQControl 上查找 getMessageCount。

如果您使用的是 JBoss AS 7（现在称为 Wildfly），控制台将允许您访问该信息。

# php - 未定义的偏移量：1 file_get_contents

> ID：16176679
> 
> 赞同：0
> 
> 时间：2013-04-23T18:34:13.617
> 
> 标签：php, undefined, file-get-contents, offset

我最近更改了我的服务器代码不再工作，而在我的旧服务器上它工作得很好。

```
<?php
ini_set('display_errors', 1);
ini_set('error_reporting', E_ALL | E_STRICT);

$myid = "110988448104041785223";
$plus = file_get_contents("http://plus.google.com/$myid/plusones");
$match = array(); 
preg_match('/<div aria-hidden="true" class="BT"><a href="(.*?)"/',$plus,$match);
$data['url'] = $match[1];
echo strtolower($data['url']);
?> 
```

**Reurn：未定义的偏移量：1 in .... 在第 9 行**

我已经在 .htaccess 中添加了这个（我不知道这是否有必要）：

```
php_value magic_quotes 0
php_flag magic_quotes Off
php_value magic_quotes_gpc 0
php_flag magic_quotes_gpc Off
php_flag allow_url_include On 
```

PHP 版本 5.2.17 - 旧服务器工作正常；和 PHP 版本 5.3.23 - 新服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:35:56.363

这意味着它没有找到匹配项，但无论如何您都在尝试访问结果数组。

你应该有这个：

```
if( preg_match('/<div aria-hidden="true" class="BT"><a href="(.*?)"/',$plus,$match)) {
    $data['url'] = $match[1];
    echo strtolower($data['url']);
}
else echo "ERROR: No match found!"; 
```

# javascript - 如何使用 JavaScript 获取网站的 CPU 消耗率

> ID：16176694
> 
> 赞同：2
> 
> 时间：2013-04-23T18:34:55.633
> 
> 标签：javascript, html, css, css-animations

我知道这听起来像是一个荒谬的问题，或者几年前它会这样。我想知道我的网站何时使用用户 CPU，以便显示通知（以框从红色变为绿色的形式）。如果该站点仅使用 JavaScript，但它还使用 CSS3 动画、视频和 Flash，这将很容易。

# shell - 在 SHell 中拆分字符串

> ID：16176696
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:35:08.707
> 
> 标签：shell, debian

我有一个带有 IP 地址的字符串：

`172.27.16.123`

我有一个类似的第二个字符串。

我需要四个不同变量中的四个部分，即 v1=172, v2=27,v3=16,v4=123 我想要这样做的原因是我想获取第三个 ip 并查看它是否位于这两个 ip 之间

我试过

```
echo $givenip | cut -d\. -f3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:46:11.453

v11=$(回显 $ip1 | 剪切 -d.-f3)

回声 $v11

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:46:15.607

```
export v1=`echo $givenip | cut -d\. -f3` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:48:08.857

假设您的 shell 是`bash`，您可能应该使用数组：

```
givenip=172.27.18.191
ip1=( $(sed 's/\./ /g' <<< 172.27.16.123) )
ip2=( $(sed 's/\./ /g' <<< 172.27.19.254) )
ip3=( $(sed 's/\./ /g' <<< $givenip) ) 
```

然后你可以比较组件：

```
givenip=172.27.18.191
ip1=( $(sed 's/\./ /g' <<< 172.27.16.123) )
ip2=( $(sed 's/\./ /g' <<< 172.27.19.254) )
ip3=( $(sed 's/\./ /g' <<< $givenip) )

if [ "${ip3[0]}" -ge "${ip1[0]}" -a "${ip3[0]}" -le "${ip2[0]}" ] &&
   [ "${ip3[1]}" -ge "${ip1[1]}" -a "${ip3[1]}" -le "${ip2[1]}" ] &&
   [ "${ip3[2]}" -ge "${ip1[2]}" -a "${ip3[2]}" -le "${ip2[2]}" ] &&
   [ "${ip3[3]}" -ge "${ip1[3]}" -a "${ip3[3]}" -le "${ip2[3]}" ]
 then echo $givenip is between two established IP addresses
 else echo $givenip is not between the two established IP addresses
 fi 
```

# java - 在 JavaFX 中的窗格之间切换

> ID：16176701
> 
> 赞同：27
> 
> 时间：2013-04-23T18:35:24.650
> 
> 标签：java, swing, netbeans, javafx, scenebuilder

我正在尝试使用 FXML 在 JavaFX 中制作 Java 程序。但是我在布局管理方面遇到了麻烦。我想在窗格之间切换，就像我习惯于在摇摆中使用 CardLayout 一样，但我似乎无法理解。

我用谷歌搜索并没有找到任何答案。

JavaFX中是否有任何等效的CardLayout？如果是这样，你能给我举个例子吗？这对我的晚上有很大帮助！

这是我的 FXML 代码

```
 <AnchorPane id="anchorPane" prefHeight="324.0" prefWidth="530.0" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication2.SampleController">
  <children>
    <Pane fx:id="mainScreen" layoutX="6.0" prefHeight="324.0" prefWidth="518.0">
      <children>
        <Button layoutX="254.0" layoutY="37.0" mnemonicParsing="false" text="Button" />
      </children>
    </Pane>
    <Pane fx:id="loginScreen" prefHeight="324.0" prefWidth="530.0">
      <children>
        <TextField id="password" fx:id="username" layoutX="142.0" layoutY="106.0" prefWidth="200.0" />
        <TextField fx:id="password" layoutX="142.0" layoutY="140.0" prefWidth="200.0" />
        <Label fx:id="label" layoutX="126.0" layoutY="120.0" minHeight="16.0" minWidth="69.0" />
        <Button fx:id="button" layoutX="213.0" layoutY="196.0" onAction="#handleButtonAction" onKeyPressed="#handleButtonAction" text="Login" />
      </children>
    </Pane>
  </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-23T21:07:23.403

*非动画过渡*

如果您不需要窗格之间的动画过渡，那么您可以：

1.  通过创建新场景替换整个场景[并将该场景设置在舞台上](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#setScene%28javafx.scene.Scene%29)或
2.  仅替换父布局中的特定窗格，方法是从其父窗格中删除旧窗格并添加新窗格（通过操作父窗格的[子列表](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html#getChildren%28%29)）或
3.  将所有窗格放在 a 中`StackPane`，然后将要显示的窗格移动到[堆栈子列表](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html#getChildren%28%29)的顶部。

* * *

*动画过渡*

如果您想在窗格之间进行动画转换，请参阅 Angela Caicedo 关于在 JavaFX 中管理多个屏幕的两部分系列：

*   [第一部分](https://blogs.oracle.com/acaicedo/entry/managing_multiple_screens_in_javafx1)
*   [第二部分](https://blogs.oracle.com/acaicedo/entry/managing_multiple_screens_in_javafx)

Angela 的解决方案是使用具有单独自定义 ScreenController 类的[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)来管理堆栈中窗格之间的[转换](http://www.oracle.com/technetwork/articles/java/default-411762.html)或[动画。](http://fxexperience.com/2012/03/canned-animations/)

* * *

*构架*

[JFXFlow](http://www.zenjava.com/jfx-flow/)和[WebFX](https://github.com/brunoborges/webfx)等框架还可以为您的应用程序提供浏览器样式的界面，允许用户使用后退和前进按钮以及历史列表在屏幕之间来回切换。

*2017 年更新*

我认为上面提到的两个框架的开发现在都已经不复存在了。其他正在开发的框架有：

*   [龙卷风FX](https://github.com/edvin/tornadofx)
*   [J重生](http://www.jrebirth.org)
*   [加力燃烧器.fx](http://afterburner.adam-bien.com)

还有很多其他的（我不会在这里提供一个完整的列表）。

* * *

*有关的*

*   [在同一场景中加载新的 fxml](https://stackoverflow.com/questions/18619394/loading-new-fxml-in-the-same-scene)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-16T07:46:27.647

我是这样做的：（在本例中，我创建了两个 FXML 文档及其相应的控制器。它们分别称为 FXMLLogin.fxml 和 Home.fxml）。

所以，从 FXMLLogin 到 Home，

在此示例中，我在 FXMLLoginController 中**创建了一个方法**，该方法响应被按下的表单上的“登录”按钮：

```
@FXML
private void login(javafx.event.ActionEvent event) throws IOException
{
    if(pwf1.getText().equals("alphabetathetagamma"))
    {
            Parent blah = FXMLLoader.load(getClass().getResource("Home.fxml"));
            Scene scene = new Scene(blah);
            Stage appStage = (Stage) ((Node) event.getSource()).getScene().getWindow();
            appStage.setScene(scene);
            appStage.show();
    }
    else
    {
            label1.setText("Password is incorrect. Please Try Again");
    }
} 
```

请注意，@FXML 非常重要。

如果我正确理解了您的问题，那么这应该可以解决问题。

在窗格之间切换一点也不明显，并且在我发现的网络上的任何教程中都没有清楚地概述。在我第一次弄清楚之前，我不得不自己广泛地用谷歌搜索。幸运的是，一旦你掌握了它，它实际上非常简单。

希望我没有误解你的问题？让我知道这是否是您需要的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T08:43:50.467

[JRebirth 应用程序框架](http://www.jrebirth.org)使用其专用模式 wB-CSMvc 提供自定义“CardLayout”。

StackModel类将完成[这项](https://github.com/JRebirth/JRebirth/blob/fbf2539167d9048329ab1285c4fe585981ff7429/org.jrebirth.af/component/src/main/java/org/jrebirth/af/component/ui/stack/StackModel.java)工作（由 org.jrebirth.af:component artifact 提供），您可以[在此处](https://github.com/JRebirth/JRebirth/blob/fbf2539167d9048329ab1285c4fe585981ff7429/org.jrebirth.af/showcase/demo/src/main/java/org/jrebirth/af/showcase/demo/ui/MainModel.java)和[此处](https://github.com/JRebirth/JRebirth/blob/fbf2539167d9048329ab1285c4fe585981ff7429/org.jrebirth.af/showcase/fxml/src/main/java/org/jrebirth/af/showcase/fxml/ui/main/FXMLShowCaseModel.java)找到 2 个用法。

每个“卡片”模型都可以使用 enum|modelKey 标识符来调用，并且每个堆栈都有一个唯一的名称。

第一个示例用于[JRebirth 演示应用程序](http://jrebirth.org/apps/Demo.html)，它是一个非常简单的应用程序，可以显示其他 JRebirth 展示应用程序作为 JRebirth 模块动态加载（来自单独的独立 jar）。

```
public final class JRebirthDemo extends DefaultApplication<StackPane> {

    public static void main(final String... args) {
        Application.launch(JRebirthDemo.class, args);
    }

    @Override
    public Class<? extends Model> firstModelClass() {
        return MainModel.class;
    }

    @Override
    protected String applicationTitle() {
        return "JRebirth Demo Application";
    }

    @Override
    protected void customizeScene(final Scene scene) {
        super.customizeScene(scene);

        addCSS(scene, DemoStyles.DEFAULT);
        addCSS(scene, WorkbenchStyles.DEFAULT);
    }

    @Override
    protected void customizeStage(final Stage stage) {
        // Center the stage
        stage.centerOnScreen();
    }

    @Override
    protected List<? extends ResourceItem<?, ?, ?>> getResourceToPreload() {
        return Collections.emptyList();
    }
} 
```

此应用程序将加载其第一个模型（MainModel）并将其根节点放入场景根节点（StakPane，自动构建）。

MainModel 将列出所有应用程序的子模块以在其左侧菜单中添加一个按钮条目，以及一个将显示每个模块内容的 StackModel。StackModel 是使用其唯一的 String 键使用特殊注释加载的。

```
public final class MainModel extends DefaultModel<MainModel, MainView> {

    private final List<ModuleModel> modules = new ArrayList<>();

    @Link("DemoStack")
    private StackModel stackModel;

    @Override
    protected void initModel() {
        for (final ModuleModel mm : getModels(ModuleModel.class)) {
            this.modules.add(mm);
        }
    }

    @Override
    protected void showView() {
        view().node().setCenter(this.stackModel.node());
    }

    @Override
    protected void hideView() {
        // Nothing to do yet

    }

    List<ModuleModel> getModules() {
        return this.modules;
    }
} 
```

MainView 将负责创建模块菜单：

```
public final class MainView extends DefaultView<MainModel, BorderPane, MainController> {

    private final List<Button> buttonList = new ArrayList<>();

    public MainView(final MainModel model) throws CoreException {
        super(model);
    }

    @Override
    protected void initView() {

        node().setPrefSize(800, 600);

        node().setLeft(createMenu());

    }

    @Override
    public void start() {
        this.buttonList.stream().findFirst().ifPresent(button -> button.fire());
    }

    private Node createMenu() {
        final VBox box = new VBox();

        for (final ModuleModel mm : model().getModules()) {
            final Node n = createModuleButton(mm);
            VBox.setMargin(n, new Insets(4, 4, 4, 4));
            box.getChildren().add(n);
        }
        return box;
    }

    private Node createModuleButton(final ModuleModel mm) {
        final Button b = new Button(mm.moduleName());
        b.getStyleClass().add("menuButton");
        b.setPrefSize(100, 50);
        b.setOnAction(controller()::onButtonFired);
        b.setUserData(Key.create(mm.getClass()));
        this.buttonList.add(b);
        return b;
    }
} 
```

当触发任何菜单按钮时，MainController 将加载模块内容：

```
public final class MainController extends DefaultController<MainModel, MainView> implements ActionAdapter {

    public MainController(final MainView view) throws CoreException {
        super(view);
    }

    public void onButtonFired(final ActionEvent event) {
        final Button b = (Button) event.getSource();
        final UniqueKey<? extends Model> data = (UniqueKey<? extends Model>) b.getUserData();

        model().sendWave(StackWaves.SHOW_PAGE_MODEL,
                         WBuilder.waveData(StackWaves.PAGE_MODEL_KEY, data),
                         WBuilder.waveData(StackWaves.STACK_NAME, "DemoStack"));
    }
} 
```

第二个示例将 StackModel 作为 innerComponent 加载，每张卡片将由一个枚举条目（存储在 FXMLPage 中）标识，让我们看看 FXMLShowCaseModel ：

```
final InnerComponent<StackModel> stack = CBuilder.innerComponent(StackModel.class, FXMLPage.class);
    this.stackModel = findInnerComponent(stack); 
```

将枚举条目与模型链接的枚举：

```
public enum FXMLPage implements PageEnum {

    StandaloneFxml,
    IncludedFxml,
    ViewEmbeddedFxml,
    HybridFxml;

    @Override
    public UniqueKey<? extends Model> getModelKey() {
        UniqueKey<? extends Model> modelKey;

        switch (this) {

            default:
            case ViewEmbeddedFxml:
                modelKey = Key.create(EmbeddedModel.class);
                break;
            case StandaloneFxml:
                modelKey = Key.create(StandaloneModel.class);
                break;
            case HybridFxml:
                modelKey = Key.create(HybridModel.class, FXMLModel.KEYPART_FXML_PREFIX + "org.jrebirth.af.showcase.fxml.ui.hybrid.Hybrid");
                break;
            case IncludedFxml:
                modelKey = Key.create(IncludedModel.class, new LoremIpsum());
                break;
        }

        return modelKey;
    }
} 
```

由于卡片列表是已知的，工具栏项静态创建到 FXMLShowCaseView 中，事件处理也使用另一种技术静态定义到 FXMLShowCaseController 中：

```
public final class FXMLShowCaseController extends DefaultController<FXMLShowCaseModel, FXMLShowCaseView> {

    private static final Logger LOGGER = LoggerFactory.getLogger(FXMLShowCaseController.class);

    public FXMLShowCaseController(final FXMLShowCaseView view) throws CoreException {
        super(view);
    }

    @Override
    protected void initEventAdapters() throws CoreException {

        // WaveData<Class<? extends PageEnum>> stackName = Builders.waveData(StackWaves.STACK_PAGES, FXMLShowCaseModel.STACK_PAGES);

        // Manage Ui Command Button
        linkWave(view().getShowIncluded(), ActionEvent.ACTION, StackWaves.SHOW_PAGE_ENUM,
                 WBuilder.waveData(StackWaves.PAGE_ENUM, FXMLPage.IncludedFxml));

        linkWave(view().getShowEmbedded(), ActionEvent.ACTION, StackWaves.SHOW_PAGE_ENUM,
                 WBuilder.waveData(StackWaves.PAGE_ENUM, FXMLPage.ViewEmbeddedFxml));

        linkWave(view().getShowStandalone(), ActionEvent.ACTION, StackWaves.SHOW_PAGE_ENUM,
                 WBuilder.waveData(StackWaves.PAGE_ENUM, FXMLPage.StandaloneFxml));

        linkWave(view().getShowHybrid(), ActionEvent.ACTION, StackWaves.SHOW_PAGE_ENUM,
                 WBuilder.waveData(StackWaves.PAGE_ENUM, FXMLPage.HybridFxml));

    }
} 
```

如果您有任何问题，请告诉我

# android - EditText 不在其视图中居中

> ID：16176705
> 
> 赞同：0
> 
> 时间：2013-04-23T18:35:35.520
> 
> 标签：android, android-layout, android-manifest

我正在编写一个将始终在 Portrait 中使用的应用程序。我有一个“EditView”，我想在其中占据屏幕的整个宽度，但将文本在屏幕中居中（水平）。通常，在清单文件中，您只需插入 android:layout_gravity="center" 即可。但它根本不起作用（留在左边），我已经尝试了所有 match_parent/wrap_content 的宽度和高度组合。这是我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:gravity="center"
   android:orientation="vertical"
   android:weightSum="2" >

   <LinearLayout
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:layout_weight="1"
       android:orientation="vertical" >

       <EditText
          android:id="@+id/text_video_title"
          style="@style/StyleVideoTitle"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_gravity="center"
          android:ems="10"
          android:inputType="none"
          android:singleLine="true"
          android:text="@string/video_title" >

       </EditText>

       <VideoView
          android:id="@+id/videoView1"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_weight="1" 
          android:layout_gravity="center" >
       </VideoView>
    </LinearLayout>

    <LinearLayout 
          android:baselineAligned="false" 
          android:layout_height="match_parent" 
          android:layout_width="match_parent"
          android:layout_weight="1">
          <GridView android:id="@+id/gridView" 

             android:layout_height="match_parent" 
             android:layout_width="match_parent" 
             android:numColumns="3"
             android:layout_gravity="center">
          </GridView>
</LinearLayout> 
```

请注意，如果我在 EditView 中将 android:layout_width 更改为“wrap_content”，我会得到一个几乎居中的文本，但实际上并非如此。此外，我检查了 @string/video_title 并且没有前导或尾随空格会弄乱对齐方式。

我使用的样式 style="@style/text_video_title" 是：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="StyleVideoTitle">
        <item name="android:textColor">#FFFFFF</item>
        <item name="android:background">#000000</item>
        <item name="android:textSize">26sp</item>
    </style>
</resources> 
```

知道如何将字符串居中（从左到右）吗？我在模拟器和真实设备（姜饼）上有相同的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:05:00.430

使用`android:gravity`而不是`android:layout_gravity`在`EditText`.

# javascript - 向 DOM 添加一个数组，每个元素为一个 li

> ID：16176706
> 
> 赞同：0
> 
> 时间：2013-04-23T18:35:36.917
> 
> 标签：javascript, dom

我正在尝试将此数组添加到 DOM，每个字符串元素都作为无序列表的一部分。下面我尝试设置 message[i] = 我要附加到列表的数组元素，但它似乎不起作用。Fetch new 是一个回调函数，它在输入 FYI 时获取字符串数组。基本上我试图在 ul 的底部显示该数组中的每个元素。ul class="messages" 仅供参考。我分配变量值的方式有问题吗？

```
 function fetchNew() {
        var PrintChat = function (Chat_Messages) {
        var y = Chat_Messages.length;
        for (i = 0; i < y; i++) {

            var message[i] = $('<li>Chat_Messages[i]<li>');
            $('.messages').append(message[i]);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:39:01.767

我猜它实际上是在`Chat_Messages[i]`重复输出？

你必须告诉 JavaScript 它是一个要连接的变量。尝试这个：

```
$(".messages").append("<li>"+Chat_Messages[i]+"</li>"); 
```

请注意，出于安全原因，您应该确保正确转义消息，或者更好地使用本机 DOM 方法`createTextNode(Chat_Messages[i])`，例如保护您的站点免受 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:39:40.040

如果 fetchNew 是一个获取字符串数组的回调，那么实际上你把它复杂化了，一个更简单的方法是这样的：

```
function fetchNew(myArray) {                           // receive the array as a parameter.
    var length = myArray.length;                       // Cache the length of array
    for (i = 0; i < length; i++) {                     // loop through the array.
        var element = $('<li>' + myArray[i] + '<li>'); // concatenate the current value inside an LI and create a dom element.
        $('.messages').append(element);                // Add element to the parent container
    }
} 
```

# ember.js - 当它从未在后端提交时如何删除记录？

> ID：16176707
> 
> 赞同：0
> 
> 时间：2013-04-23T18:35:40.777
> 
> 标签：ember.js, ember-data

我有一个简单的 ember-data 模型（rev 12 -master 截至 2013 年 4 月 21 日）

```
App.Foo = DS.Model.extend({
    name: DS.attr('string')
}).reopenClass({
    add: function(json) {
        //call create record but don't commit it
        var store = DS.get('defaultStore');
        store.createRecord(App.Foo, json);
    }
}); 
```

在我的应用程序中的某个时刻，我需要从商店中删除一个项目，所以我尝试了通常的方法

```
var foo = store.find(App.Foo, 1);
foo.deleteRecord(); 
```

但是因为记录没有完全加载（服务器端）我得到了错误

> 未捕获的错误：尝试`deleteRecord`在 rootState.loading 状态下处理事件。未定义调用

如果我打算以这种方式使用 ember-data，我该如何“伪造”提交或将记录标记为手动加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:40:42.087

如果我没记错的话，你可以这样做：

```
var foo = store.find(App.Foo, 1);
foo.transaction.rollback(); 
```

这样记录将不再在提交时保存。

# c# - 我应该如何保护我的 c# web 应用程序/服务中的敏感密码？

> ID：16176712
> 
> 赞同：0
> 
> 时间：2013-04-23T18:35:51.327
> 
> 标签：c#, asp.net, asp.net-mvc, security, windows-services

我正在编写一项服务，允许我公司域上的用户执行有限的活动目录操作。这些用户自己没有 AD 权限，但该站点作为共享用户进行身份验证，可以执行解锁帐户等操作（例如）。

我的代码中的密码目前是明文

有没有推荐的方法让我保护这个密码？显然，有人必须反编译网站二进制文件才能访问它，但我觉得这还不够保护。

对于背景，我使用 C# 中较新的 System.DirectoryServices.AccountManagement 方法来执行此操作，所以我有：

```
PrincipalContext pc = new PrincipalContext(ContextType.Domain, "MYDOMAIN", "theuser", "thepassword"); 
```

任何提示表示赞赏！否则我可能只是求助于混淆，加密它并使用几个类似獾的类来解密这些值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:46:30.497

我认为最好的方法是让应用程序池标识有足够的权限在 Active Directory 中完成必要的工作。这将允许 Web 应用程序在不需要硬编码的用户名和密码的情况下运行。您可能需要系统管理员的帮助才能进行此设置。

请记住，混淆只能如此有效。混淆代码在执行之前必须进行去混淆处理，以便处理器能够理解它。如果有人下定决心，这可以被打败。但如果发生这种情况，您可能会遇到更多的安全问题。

最后，您连接到活动目录的用户应该拥有尽可能少的访问权限，以减轻在发现用户名和密码时可能造成的任何损害。

# c# - 访问当前发票并在 Quickbooks 中添加行项目

> ID：16176713
> 
> 赞同：1
> 
> 时间：2013-04-23T18:35:53.000
> 
> 标签：c#, quickbooks

我将使用什么 XML 来访问 quickbooks 中当前打开的发票并添加然后修改行项目？我目前正在使用 SDKTestPlus3。

仅供参考，我无法打开示例模板，因为它找不到 qbfc 互操作，所以我没有使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:52:17.443

QuickBooks SDK 不提供任何方式来获取当前打开的事务。对不起！

但是，您可以为用户打开指定的发票。[在QuickBooks OSR](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)中查看此请求类型：

*   TxnDisplayMod

您还可以使用 InvoiceMod 更新现有发票。在 OSR 中查找：

*   发票模组

# android - Android 开发者控制台 - 更改应用所有者

> ID：16176717
> 
> 赞同：25
> 
> 时间：2013-04-23T18:36:08.610
> 
> 标签：android, google-play

我在 Play 商店有两个 Android 开发者帐户：Account1 和 Account2。我有一个很久以前与 Account1 关联的包 com.example.miapp 的应用程序。我需要将 App 关联到 Account2；Account2 将成为此应用程序的所有者。换句话说，将我的应用程序从一个帐户迁移到另一个帐户。有可能吗？如果我需要类似但在两个不同的人帐户之间的东西，这可能吗？我怎么能这样做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-01T21:03:16.183

是的，这是可能的。我已经做到了。

详细信息可以在这里找到：http: [//phandroid.com/2012/06/21/getting-acquired-how-to-transfer-ownership-of-your-android-app-or-game/](http://phandroid.com/2012/06/21/getting-acquired-how-to-transfer-ownership-of-your-android-app-or-game/)

或在这里： https: [//support.google.com/googleplay/android-developer/checklist/3294213](https://support.google.com/googleplay/android-developer/checklist/3294213)

问题不在于将应用程序转移到另一个帐户（无论是在您自己的两个帐户之间还是在两个不同的人或公司的帐户之间），这不到一天的时间，而是转移了签名密钥。如果签名密钥不用于其他应用程序，则没有问题。如果其他应用程序使用相同的密钥签名，并且如果转移发生在另一个人/公司，那么您将不得不共享密钥，这并不总是可取的。

因此，我的建议是使用另一个密钥签署每个应用程序，因为这样可以更轻松地进行传输。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-25T17:50:11.193

现在有一个清单和特殊表格，用于将一个帐户的部分（或全部）应用程序转移到另一个帐户。见这里： https: [//support.google.com/googleplay/android-developer/checklist/3294213](https://support.google.com/googleplay/android-developer/checklist/3294213)

您需要在每个帐户上注册 Google Play 开发者后收到的 Google 电子钱包交易 ID。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-29T15:16:40.517

这是我刚刚与 Google 就该主题进行的聊天记录。对于其他答案，我可能看起来多余，但我只是想让人们对推进这个解决方案更有信心：

我：

> 我想在我的 google play 控制台上更改帐户所有者的电子邮件地址。是同一个人，（我），但我想使用我的新 G-Suite 帐户。

谷歌：

> 创建开发者帐户后，用于注册的电子邮件地址将永久绑定到该帐户。但是，您可以在不同的电子邮件地址下创建一个新的开发者帐户并在此处请求应用转移： https: [//support.google.com/googleplay/android-developer/checklist/3294213?ref_topic=](https://support.google.com/googleplay/android-developer/checklist/3294213?ref_topic=3450986) 3450986 转移完成后，我们可以关闭并退还您的原始帐户。

我：

> 似乎它可能会产生一些不良副作用，例如更改我的应用程序的 URL 或其他缺点。请详细说明我的用户可能会看到的潜在副作用。

谷歌：

> 因此，用户不会受到影响，应用 URL 不会更改，您可以维护所有统计数据、评级和评论。唯一没有被转移的是财务数据，因为过去的收入进入了原始账户。

# python - 难以保存单独的数字matplotlib

> ID：16176720
> 
> 赞同：1
> 
> 时间：2013-04-23T18:36:12.703
> 
> 标签：python, matplotlib, plot, polar-coordinates

我用python编写了一个程序来映射项目磁盘上点的随机位置。这个想法是，对于不同数量的点，随机位置将保存为 png 以供以后使用。代码如下：

```
def randr():#random r position
  return random.random()

def randphi():#random phi position
  return 2*pi*random.random()

nrange=[3,10,11,12,15,20,25,30]

for N in nrange:
   rposition=[]#create a table of r positions
   phiposition=[]#create a table of phi positions
   rinverse=[]#create a table of 1/rij

   for listcreation in range(0,N,1):#go through each charge
      rposition.append(randr())#allocate a random r position
      phiposition.append(randphi())#allocate a random phi position

   name=N
   filename = "c:/users/V/%i.png" % name
   pyplot.polar(phiposition,rposition,marker='o', markersize=10,color='b',
             linestyle='none')
   pyplot.savefig(filename, format='png') 
```

问题是，当运行此代码时，第一个数字保存为 3 分，但第二个数字保存为 13 而不是 10！这持续了连续的 N

我无法发布图片，因此您必须相信我的话或运行代码。

有谁知道如何克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:57:21.960

默认情况下，绘图之间的轴不会被清除，因此当您绘制第二个绘图时，它会添加到已经绘制的任何内容。`pyplot.cla()`要清除它，请在您的`polar`呼叫之前插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:30:26.150

我发现在类似的情况下，正确初始化一个轴是很好的

```
for N in nrange:
    {Make the data}

    ax = py.subplot(111)
    ax.plot({data})
    py.savefig... 
```

这将自动清除轴并且清晰可读。如果您也使用`py.xlabel`，您可能希望将这些更改为`ax.set_xlabel`以使其清楚。

# php - 使用explode从MySQL获取结果

> ID：16176724
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:36:22.280
> 
> 标签：php, mysql, explode

我的用户数据库中有一行用于获取 PC 信息。我用这个分隔电脑信息：

```
|| 
```

列示例：

```
pc|intel||vga|nvidia 
```

现在，我如何使用 nvidia vga 显示所有用户？我不知道在这种情况下我应该如何使用**while**函数或任何东西！

我知道如何使用**explode**功能，但我不知道如何使用此功能从数据库中获取结果！

我希望你能理解我的问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:42:34.437

您必须先从数据库中获取结果，然后再使用explode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:49:09.863

在 MySQL 方面，您可以这样做：

```
SELECT * FROM table_name WHERE column_name LIKE '%vga|nvidia%' 
```

*注意：将 table_name 更改为表的名称，并将 column_name 更改为列的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:44:07.950

使用`LIKE`：

```
SELECT
    *
FROM
    tablename
WHERE
    columname LIKE '%|nvidia|%' 
```

仅供参考，您不应该以这种方式将数据存储在数据库中。这是一种存储数据的糟糕方式，只会导致这样的问题。我强烈建议您在修复数据库之前修复它。

# excel - Excel / VBA - 使用动态范围的索引匹配功能

> ID：16176726
> 
> 赞同：2
> 
> 时间：2013-04-23T18:36:26.920
> 
> 标签：excel, vba, excel-formula, excel-match

如何有效地使用`Index/Match`VBA 中的公式？

背景：我有一个工作表，它严重依赖于使用一个公式，该公式根据将特定名称与其名称范围以及特定日期与其日期范围进行匹配来检索输出。

```
=INDEX(OutputRange,MATCH(1,(Name=NameRange)*(Date=DateRange),FALSE),1) 
```

此外，还有一个硬编码的 VBA 子程序可以产生相同的输出

```
Sub ExampleHardCode() 
Dim Result As Variant
  Result = Evaluate("INDEX($C$4:$C$13,MATCH(1,($G$6=$A$4:$A$13)*($G8=$B$4:$B$13),FALSE),1)")
  ActiveCell.Value = Result
End Sub 
```

问题：我想生成一个函数，它返回与上述选项相同的输出，但允许用户（i）通过引用相应的单元格来选择名称和日期值，以及（ii）选择每个范围（名称范围、日期范围和输出范围）。本质上在excel中使用=examplefunction(name value, name range, date value, date range, output range)。

我尝试了许多不同的解决方案，但都没有成功。下面是我迄今为止尝试过的一个示例，我认为匹配部分存在问题，因为即使我尝试设置范围（使用硬编码范围）它也会返回错误。

```
Function TestIndexMatch1(NameVal As Variant, DateVal As Date)

Dim NameRng As Range
Dim DateRng As Range
Dim OutputRng As Range
Dim Var1 As Variant  'should this be a range or integer?
Dim Result As Variant 

Set NameRng = Range("$A$4:$A$13")
Set DateRng = Range("$B$4:$B$13")
Set OutputRng = Range("$C$4:$D$13")

With Application.WorksheetFunction
    Var1 = .Match(1, (NameVal = NameRng) * (DateVal = DateRng), False)
    Result = .Index(OutputRng, Var1, 1)
End With
End Function 
```

如果有帮助，我可以分享一个示例工作簿。我不确定这是否非常可行，但如果是这样，它真的会帮助很多对 excel 不够熟悉的用户正确使用索引/匹配 excel 公式。不幸的是，我的 excel 技能远远超过了我的 VBA 技能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:29:45.220

要在 VBA 代码中使用数组公式，**请将 Application 对象的 ReferenceStyle 设置为 xlR1C1** *（暂时，仅在您的函数执行期间）*。最后**调用 Evaluate**得到公式的结果。

```
Private Const TEMPLATE As String = "=INDEX({0},MATCH(1,({1}={2})*({3}={4}),{5}))"
Private Const MATCH_TYPE = 0

Public Function TestIndexMatch1(ByRef outputRange As Range, _
                                ByRef nameCriteria As Range, _
                                ByRef dateCriteria As Range, _
                                ByRef nameRange As Range, _
                                ByRef dateRange As Range)

    On Error GoTo Err_Handler
    Err.Number = 0

    Dim originalReferenceStyle
    originalReferenceStyle = Application.ReferenceStyle
    Application.ReferenceStyle = xlR1C1

    Dim myFormula As String
    myFormula = Replace(TEMPLATE, "{0}", outputRange.Address())
    myFormula = Replace(myFormula, "{1}", nameCriteria.Address())
    myFormula = Replace(myFormula, "{2}", nameRange.Address())
    myFormula = Replace(myFormula, "{3}", dateCriteria.Address())
    myFormula = Replace(myFormula, "{4}", dateRange.Address())
    myFormula = Replace(myFormula, "{5}", MATCH_TYPE)

    TestIndexMatch1 = Application.Evaluate(myFormula)

Err_Handler:
    If (Err.Number <> 0) Then MsgBox Err.Description
    Application.ReferenceStyle = originalReferenceStyle
End Function 
```

所以它看起来在表上：

![在此处输入图像描述](https://i.stack.imgur.com/DohDr.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/ryl7c.jpg)

# javascript - 是否可以在不丢失 js 验证的情况下成功地将 jotform 与 asp 平台集成？

> ID：16176728
> 
> 赞同：0
> 
> 时间：2013-04-23T18:36:36.160
> 
> 标签：javascript, asp.net, jotform

我正在使用 jotform，一个非常好的表单生成器 (WYSIYYG)。我创建了一个表单，并下载了源代码并将其放在我的 asp.net 页面中。内容和样式以及视觉方面都很好，但是我丢失了所有的 js 验证（如果需要输入，则不会显示警告等）。

有没有人做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:27:29.307

如果您在与页面集成时遇到问题，最好的解决方案是使用 IFrame 代码选项。它可以防止与页面发生冲突。

这是获取 iframe 代码的方法。

1.  [在表单生成器](http://www.jotform.com)上打开您的表单：
2.  单击工具栏上的“设置和嵌入”选项卡
3.  点击“嵌入表格”
4.  点击“iFrame”。

# php - 拒绝对在 ajax 上调用的 php 文件的直接 url 访问

> ID：16176729
> 
> 赞同：2
> 
> 时间：2013-04-23T18:36:39.623
> 
> 标签：php, ajax, url

我试图拒绝直接 url 访问在 ajax 上调用以进行表单验证的 php 文件。我目前拥有的代码在表单验证之前一直有效，然后它就不起作用了。我不想使用 .htaccess。

当前代码：

```
<?php

$url = strtolower(basename($_SERVER['PHP_SELF'])); // Gets url (parent that uses the include)
$fil = strtolower(basename(__FILE__)); // gets filename (the included file)
if ($url == $fil){
    // if they are the same (file is accessed through url
    // redirect to forbidden page
    header("HTTP/1.0 403 Forbidden");
    exit;
}
// require my configuration
require_once("config.php");
// code to be executed for ajax validation
$username = $_POST['username'];
$conn = mysql_connect(DB_HOST,DB_USER,DB_PASS) or die(mysql_error());
mysql_select_db(DB_NAME,$conn) or die(mysql_error());

$query = mysql_query("SELECT * FROM " . TB_USER . " WHERE username = '{$username}'",$conn) or die(mysql_error());
$result = mysql_num_rows($query);

mysql_close($conn);

if ($result == 0){
    echo "true";
}else{
    echo "false";
}
?> 
```

如果我直接从 url 访问文件，它会按计划重定向，但是当通过 ajax 验证表单时，如果用户名不可用，它不会做任何事情。取出前两行代码（$url，$fil）以及 if 语句使 ajax 验证工作，但页面在 url 访问时不会被拒绝。关于从这里做什么的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:39:02.810

用这个：

```
if(!$_SERVER['HTTP_X_REQUESTED_WITH'])
{
   header("HTTP/1.0 403 Forbidden");
   exit;
} 
```

在所有现代浏览器中，如果使用 AJAX 访问页面，PHP 会将此标头添加到请求中。如果您的页面正在被调用并且此标题不存在，则很有可能直接调用它（或通过超链接或其他方式重定向到它的另一个页面）。基本上这总是显示禁止页面，除非该页面是使用 AJAX 调用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:40:22.507

这样做没有任何意义。它不会增加任何实际的安全性。

所有表明通过 Ajax 发出请求的标头（如`HTTP_X_REQUESTED_WITH`）都可以在客户端伪造。

如果您的 Ajax 提供敏感数据或允许访问敏感操作，则需要添加适当的安全性，例如登录系统。

# c++ - 在 C++ 模板中，如何构造未知类型 (T) 的元素？

> ID：16176735
> 
> 赞同：2
> 
> 时间：2013-04-23T18:37:06.697
> 
> 标签：c++, templates, construct

我遇到了一个模板问题，您必须创建一个 T 类型的元素，构造它，然后将其添加到数组中。

我不确定如何做构造部分。

我们只是做

```
T element; 
```

或者

```
T element = T(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:38:19.777

如果你`T`的意思是类类型，我会说这个版本：

```
T element; 
```

只要元素是可默认构造的（如果不是，则上述方法均不起作用）是可取的。使用第二个版本：

```
T element = T(); 
```

意味着创建一个类型的临时对象，`T`从中`element`获取复制构造或移动构造。此外，如果您的类型不可移动，则不会编译。

另一方面，当元素是基本类型时，`T element = T()`将提供值初始化。因此，例如， when `T = int`，`element`将被零初始化，而在第一种情况下，它将未初始化。

在 C++11 中，最好的方法（如评论中的[mfontanini](https://stackoverflow.com/users/525217/mfontanini)所建议）是使用具有统一初始化语法的直接初始化（以防止编译器将其解析为函数声明）：

```
T element{}; 
```

这将为您提供类类型的默认构造和基本类型的值初始化。

# ios - GHUnit 作为测试包而不是单独的目标

> ID：16176736
> 
> 赞同：0
> 
> 时间：2013-04-23T18:37:16.107
> 
> 标签：ios, unit-testing, ocunit, gh-unit

是否可以使用 OCUnit 为单元测试创​​建测试包，但 OCUnit 使用 GHUnit？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:55:08.043

你问是否可以使用`GHUnit`测试运行器进行常规`OCUnit`/`SenTestCase`测试？如果是这样，我希望您可以根据阅读[文档](http://gabriel.github.io/gh-unit/)。尝试像往常一样创建测试包（如果您还没有），并[根据说明](http://gabriel.github.io/gh-unit/docs/index.html)`GHUnit`添加目标。然后将您的测试文件添加到目标，它们应该会自动运行。`SenTestCase``GHUnit``GHUnit`

# python - 条件格式 xlwt

> ID：16176738
> 
> 赞同：6
> 
> 时间：2013-04-23T18:37:25.447
> 
> 标签：python, formatting, conditional, xlrd, xlwt

我看过一些帖子说您不能使用 执行条件格式化`xlwt`，但它们已经相当老了。我很好奇这是否已经进化了？

我已经搜索了大约半天了。此外，如果我不直接从 编写它`xlwt`，我是否可以创建一个`.xls`包含具有我想要的条件格式的单个单元格的文件，并已`xlrd`阅读该格式并将其粘贴到我打算使用的工作表中`xlwt`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T19:07:38.210

`xlrd`并且`xlwt`仍然*不支持条件格式*。`xlrd`不读，`xlwt`不写。

有一个新的很棒的模块，叫做[xlsxwriter](https://xlsxwriter.readthedocs.io/)。*它确实支持开箱即用的[条件格式](https://xlsxwriter.readthedocs.io/working_with_conditional_formats.html)*。该项目处于活动状态，文档非常好。另外，还有很多[例子](https://xlsxwriter.readthedocs.org/en/latest/examples.html)。

这是一个例子：

```
from xlsxwriter.workbook import Workbook

workbook = Workbook('test.xlsx')
worksheet = workbook.add_worksheet()

worksheet.write('A1', 49)
worksheet.write('A2', 51)

format1 = workbook.add_format({'bold': 1, 'italic': 1})
worksheet.conditional_format('A1:A2', {'type': 'cell',
                                       'criteria': '>=',
                                       'value': 50,
                                       'format': format1})
workbook.close() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-31T10:43:43.077

确实 xlswriter 使格式化非常容易，但我认为它不能用于附加数据 tpsheets，我觉得这是一个很大的缺点。

# silverlight - Silverlight 样式中的绑定 FontSize 不变

> ID：16176739
> 
> 赞同：0
> 
> 时间：2013-04-23T18:37:26.893
> 
> 标签：silverlight, mvvm

我有一组绑定到视图模型的样式。这适用于背景和前景。我现在想绑定字体大小。我可以让绑定工作，但是当我更改值并为该属性调用 PropertyChanged 时，它不会获得新值。有任何想法吗？

**示例.xaml**

```
<Style x:Key="ApplicationNameStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{StaticResource NavigationForegroundColorBrush}"/>
    <Setter Property="FontSize" Value="{Binding FontSize12, Source={StaticResource Sampe}}"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="Margin" Value="0,2,0,0"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="Effect">
        <Setter.Value>
            <DropShadowEffect BlurRadius="10" Opacity="0.25" ShadowDepth="0"/>
        </Setter.Value>
    </Setter>
</Style> 
```

示例视图模型.cs

```
public Double FontSize12
{
    get
    {
         return _fontSize12;
    }
    set
    {
        _fontSize12 = value;
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("FontSize12"));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:03:38.150

您可以尝试设置您的绑定`Mode=TwoWay`。这将使对对象所做的任何更改都反映在 UI 上。

# python - Python 3 替换已弃用的 compiler.ast flatten 函数

> ID：16176742
> 
> 赞同：10
> 
> 时间：2013-04-23T18:37:38.183
> 
> 标签：python, python-3.x, flatten

[自编译器包弃用](http://docs.python.org/2/library/compiler.html#module-compiler)以来，扁平化嵌套列表的推荐方法是什么？

```
>>> from compiler.ast import flatten
>>> flatten(["junk",["nested stuff"],[],[[]]])
['junk', 'nested stuff'] 
```

我知道列表展平有一些堆栈溢出答案，但我希望 Pythonic 标准包“一种，最好只有一种明显的方法”来做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T18:39:16.147

[`itertools.chain`](http://docs.python.org/3/library/itertools.html#itertools.chain)是扁平化任何嵌套可迭代一级的最佳解决方案 - 与任何纯 python 解决方案相比，它都非常高效。

也就是说，它适用于*所有*可迭代对象，因此例如，如果您想避免它使字符串变平，则需要进行一些检查。

同样，它不会神奇地变平到任意深度。也就是说，通常不需要这样的通用解决方案 - 相反，最好保持数据结构化，这样就不需要以这种方式展平。

编辑：我认为如果必须进行任意展平，这是最好的方法：

```
import collections

def flatten(iterable):
    for el in iterable:
        if isinstance(el, collections.Iterable) and not isinstance(el, str): 
            yield from flatten(el)
        else:
            yield el 
```

请记住`basestring`在 2.x中使用`str`，而`for subel in flatten(el): yield el`不是在`yield from flatten(el)`3.3 之前使用。

正如评论中所指出的，我认为这是核选项，并且可能会导致比它解决的问题更多的问题。相反，最好的办法是让您的输出更加规则（例如，包含一项的输出仍然将其作为一项元组提供），并在引入它的地方进行常规展平，而不是在最后全部展平。

这将产生更具逻辑性、可读性和更易于使用的代码。当然，在某些情况下您*需要*进行这种扁平化（如果数据来自您无法处理的地方，那么您别无选择，只能采用结构不良的格式），在这种情况下，可能需要这种解决方案，但总的来说，这可能是个坏主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T18:49:09.150

您声明的函数采用嵌套列表并将其展平为新列表。

要将任意嵌套的列表展平为新列表，这可以在 Python 3 上按预期工作：

```
import collections
def flatten(x):
    result = []
    for el in x:
        if isinstance(x, collections.Iterable) and not isinstance(el, str):
            result.extend(flatten(el))
        else:
            result.append(el)
    return result

print(flatten(["junk",["nested stuff"],[],[[]]])) 
```

印刷：

```
['junk', 'nested stuff'] 
```

如果你想要一个做同样事情的生成器：

```
def flat_gen(x):
    def iselement(e):
        return not(isinstance(e, collections.Iterable) and not isinstance(e, str))
    for el in x:
        if iselement(el):
            yield el
        else:
            for sub in flat_gen(el): yield sub

print(list(flat_gen(["junk",["nested stuff"],[],[[[],['deep']]]]))) 
# ['junk', 'nested stuff', 'deep'] 
```

对于 Python 3.3 及更高版本，使用[yield from](https://docs.python.org/3/whatsnew/3.3.html#pep-380)而不是循环：

```
def flat_gen(x):
    def iselement(e):
        return not(isinstance(e, collections.Iterable) and not isinstance(e, str))
    for el in x:
        if iselement(el):
            yield el
        else:
            yield from flat_gen(el) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-04T17:20:23.713

您可以使用来自[funcy](https://github.com/Suor/funcy)库的[flatten函数：](http://funcy.readthedocs.org/en/latest/seqs.html#flatten)

```
from funcy import flatten, isa
flat_list = flatten(your_list) 
```

您还可以明确指定要遵循的值：

```
# Follow only sets
flat_list = flatten(your_list, follow=isa(set)) 
```

如果你想要一个算法，可以看看[它的实现。](https://github.com/Suor/funcy/blob/1.0.0/funcy/seqs.py#L147)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T18:49:52.307

对于具有任意嵌套的列表没有内置方法，但是像这样......

```
def flatten(l):
    for i in l:
        if isinstance(i, (list, tuple)):
            for ii in flatten(i):
                yield ii
        else:
            yield i

>>> l = ["junk",["nested stuff"],[],[[]]]
>>> list(flatten(l))
['junk', 'nested stuff'] 
```

...将适用于列表和元组。如果您想支持可以在`for item in object`表达式中使用的任何对象，那么最好使用像这样的鸭子类型......

```
def flatten(l):
    for i in l:
        if isinstance(i, (str, bytes)):
            yield i
        else:
            try:
                for ii in flatten(i):
                    yield ii
            except TypeError:
                yield i

>>> l = ["junk",["nested stuff"],[],[[]]]
>>> list(flatten(l))
['junk', 'nested stuff'] 
```

...这比检查更健壮`isinstance(el, Iterable)`，因为它无法处理某些情况，例如这种情况...

```
class Range10:
    def __getitem__(self, index):
        if index >= 10:
            raise IndexError
        return index

>>> import collections
>>> r10 = Range10()
>>> isinstance(r10, collections.Iterable)
False
>>> list(Range10())
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T19:48:06.173

我丑陋`while-chain`的解决方案，只是为了好玩：

```
from collections import Iterable
from itertools import chain

def flatten3(seq, exclude=(str,)):
    sub = iter(seq)
    try:
        while sub:
            while True:
                j = next(sub)
                if not isinstance(j, Iterable) or isinstance(j, exclude):
                    yield j
                else:
                    sub = chain(j, sub)
                    break
    except StopIteration:
        return 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-23T00:37:48.130

只是另一个递归： Python 3.6 。适用于复杂的列表/字符串/数字的嵌套列表和所有的组合：

```
def list_flattener(nestedList):  
    nonListElems=[]
    listElems=[]
    nestedListCounter=0
    for nc in range(len(nestedList)):
        if type(nestedList[nc])==list:
            nestedListCounter+=1
            listElems=nestedList[nc]+listElems
        else:nonListElems.append(nestedList[nc])  
    if nestedListCounter==0: return (nestedList)
    else:
        nestedList=listElems+nonListElems 
        return list_flattener(nestedList) 
```

请参见下面的示例：

```
>>> nestedList=['arash',[[1,'anotherOne',[12,'stringX',['kave']]], 'stringY']]
>>> list_flattener(nestedList)
['kave', 12, 'stringX', 1, 'anotherOne', 'stringY', 'arash'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-26T20:22:36.697

为递归而构建：Python 3.6

```
def flatten(lst):
    """Flattens a list of lists"""
    return [subelem for elem in lst 
                    for subelem in elem] 
```

在列表中定义您的类型并使用 any 内置检查

# jquery - 循环提交表单

> ID：16176743
> 
> 赞同：2
> 
> 时间：2013-04-23T18:37:40.093
> 
> 标签：jquery, forms, loops, submission

我有一个 PDF 生成器，它将完整的 HTML 文档字符串作为参数，然后打开在新选项卡/窗口中创建的 PDF，或下载文件。我被要求连接一个表格，该表格将允许制作一个证书，该证书采用分号分隔的名称并从中生成多个 PDF。这是执行此操作的代码：

```
$("#certgensubmit").click(function (event) {
    // Get the names to generate certificates for. 
    var names = $("#presented-to").html().split(';');
    $.each(names, function(index, value) {
        if(value.length > 0) {
            var presentedBy = $("#presented-by").html();
            var awardName = $("#award-name").html();
            var presentedDate = $("#presented-date").html();
            var signerName = $("#signer-name").html();

            var html = getCertificateHTML(presentedBy, value, awardName, presentedDate, signerName);
            //console.log(html);
            $("#HtmlContent").val(html);
            $("#pdfform").submit();
        }
    });
}); 
```

这有效，只是它只创建第一个证书 PDF。不过，它每次都在处理代码。如果我取消注释“console.log(html)”行，我会在 Chrome 的控制台中看到正确的输出。我可以通过在循环中用 JavaScript 创建一个新文档并在每个文档中运行表单提交来使其正常工作。唯一的问题是它仅在将文本放入发送到 PDF 生成器的字段中时起作用，但在生成器需要的字段中发送 HTML 时完全失败。因此，该问题似乎与在创建 PDF 期间打开新选项卡有关。我需要发生这种情况，因此用户不会离开接受 PDF 输入的 UI。

不要太纠结于 PDF 生成方面——我只需要知道如何在 jQuery 每个循环中使用不同的值多次触发表单提交。其余的只是为了上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:15:05.027

也许您不能多次提交表单。

因此，将您的提交功能更改为帖子，并删除您的表单标签。

```
....

$("#HtmlContent").val(html);

$.post("pdf_creator.php",
{
  input_name:$("#HtmlContent").val()
},
function(data,status){
  //alert("Data: " + data + "\nStatus: " + status);
});

....

<!--<form action='pdf_creator.php' id='pdfform'> //form tags out -->
    <input type='text?' name='input_name' id='HtmlContent' value=''>
<!--</form>--> 
```

希望这有效，并帮助你。

# android - 如何验证 Google ID 令牌？

> ID：16176744
> 
> 赞同：1
> 
> 时间：2013-04-23T18:37:43.353
> 
> 标签：android, google-app-engine, go, google-oauth

我想使用 Go AppEngine 后端对 Android 用户进行身份验证，

[我可以通过遵循http://android-developers.blogspot.co.il/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.co.il/2013/01/verifying-back-end-calls-from-android.html)在 Android 中轻松获取 ID 令牌

如何验证令牌并获取有效负载？有没有一个 Go 包呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:51:05.877

我自己找到了解决方案，可以使用[https://code.google.com/p/google-api-go-client/](https://code.google.com/p/google-api-go-client/)库的 oauth2/v2 包验证 ID-token。

使用 AppEngine 需要进行一些安装调整，我在[http://golangtutorials.blogspot.co.il/2011/11/using-external-api-in-go-appengine.html找到了一些指示](http://golangtutorials.blogspot.co.il/2011/11/using-external-api-in-go-appengine.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T16:11:55.633

我创建了一个可用的 golang 包 @ [https://github.com/emanoelxavier/openid2go](https://github.com/emanoelxavier/openid2go)，它完全可以做到这一点，而无需任何安装调整。它也适用于其他 openID 身份提供者，而不仅仅是谷歌。它将获取签名密钥、验证令牌（颁发者、受众、到期等）并使用户身份信息可用于您的应用程序服务管道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:46:00.290

如果您愿意使用实验性功能，请使用 google cloud endpoints for android。它具有内置的 oauth 身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T19:06:36.577

从链接的文档来看，这只是一个 OAuth2 令牌。尝试查看[https://developers.google.com/appengine/docs/go/users/overview#OAuth_in_Go](https://developers.google.com/appengine/docs/go/users/overview#OAuth_in_Go)，其中描述了使用 OAuth 对用户进行身份验证。

# asp.net - 从内容页面中动态创建的输入控件中检索表单数据

> ID：16176745
> 
> 赞同：0
> 
> 时间：2013-04-23T18:37:51.197
> 
> 标签：asp.net, html, master-pages, clientid, naming-containers

我会相信这个问题有一个明显的答案，但我似乎找不到任何答案。我有一个 ASP.Net MasterPage，它有一个内容页面，其中有几个动态创建的输入控件。当我发布包含它们的表单时，我想检索它们的值。这只能使用控件的 name 属性并调用 Request.Form[name]。

由于输入控件是 ContentPlaceHolder 的一部分，因此它们的 name 属性被分配了控件的 UniqueId，它是一个可能如下所示的字符串，例如：“ctl00$skts_body_div$MyNameId”。

上面例子中的名字不是随机生成的名字，而是依赖于父控件的结构，所以在回发中生成名字“ctl00$skts_body_div$MyNameId”并不容易，所以我可以调用Request.Form["ctl00$skts_body_div$MyNameId"]。

检索已发布数据的最佳实践方式是什么？

该平台是.Net 4.0

感谢圣战

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:38:51.037

我发现我可以在浏览器中使用 javascript 将 name 属性设置为等于 id。这可以使用 jquery 轻松完成，但如果您不使用 jquery，则另一种选择是遍历输入元素和其他可能回发的元素。

我认为唯一的缺点是您必须确保只更改动态创建的控件，而不是点击任何 runat="server" ASP 控件，因为这些控件使用 name 属性来分配它们的值。

以下代码是我使用的 javascript：

```
function SetControlNamesToId() {
    var inputObjects = document.getElementsByTagName('input');
    for (i = 0; i < inputObjects.length; i++) {
        if (inputObjects[i].type == 'checkbox' ||
            inputObjects[i].type == 'radio' ||
            inputObjects[i].type == 'text' || 
            inputObjects[i].type == 'hidden') {
            SetNameToId(inputObjects[i]);
        }
    }

    var selectObjects = document.getElementsByTagName('select');
    for (i = 0; i < selectObjects.length; i++) {
        SetNameToId(selectObjects[i]);
    }

    var textAreaObjects = document.getElementsByTagName('textarea');
    for (i = 0; i < textAreaObjects.length; i++) {
        SetNameToId(textAreaObjects[i]);
    }
}

function SetNameToId(control)
{
    if (control.id && control.id != "") {
        control.setAttribute("name", control.id);
    }
} 
```

# javascript - 使用不超过整数的 javascript 生成唯一 ID

> ID：16176757
> 
> 赞同：2
> 
> 时间：2013-04-23T18:38:14.547
> 
> 标签：javascript

我想在不超过整数类型的情况下用 javascript 生成一个唯一的 id。

我明白了：[使用 javascript 创建唯一 ID](https://stackoverflow.com/questions/3231459/create-unique-id-with-javascript)

使用以下解决方案：`(new Date()).getTime()`但超出整数范围。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:47:12.243

取决于你想要什么大小的整数。这是一个小提琴，展示了几种方法：http: [//jsfiddle.net/leemeador/C6YGa/](http://jsfiddle.net/leemeador/C6YGa/)

这个想法是为一个 32 位整数做这样的事情：

```
var i = new Date().getTime();
i = i & 0xffffffff; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T16:07:47.673

另一种使用新的 ES6 语法生成唯一键 (id) 的方法是返回一个表示自 UNIX 纪元以来经过的毫秒数的数字：

```
export const generateRandomKey = () => Date.now(); 
```

您可以将其写入单独的文件并导出。比使用 es6 语法导入文件。

```
import {generateRandomKey} from './the/file/path.js'; 
```

# jquery - 检测元素何时被拖动到窗口两侧并执行功能

> ID：16176761
> 
> 赞同：0
> 
> 时间：2013-04-23T18:38:25.047
> 
> 标签：jquery, jquery-ui, draggable

我正在使用 jQuery UI 的`draggable`方法在屏幕上拖动一个面板。我希望能够在 Photoshop 中复制一个功能，您可以在其中拖动一个面板靠近屏幕边缘，它将沿边缘显示一个发光条以指示它将附加到那里（同时将鼠标悬停在它上面状态），当你放下面板时，它会变成一个全高的粘性面板，附着在你放下它的边缘。

任何人都可以帮助在 HTML/JS 中实现这一点吗？

如果有人能帮我检测到我*在拖动/`start`状态*时屏幕右侧 10px 内的时间，我可能可以处理其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:34:22.063

你的概念似乎是合法的！保留一个元素来接受 droppable 是我首先想到的！所以这个技巧很好。

```
$("droppable-element").droppable(function(){
    accept:'draggable-element',
    drop: function(event,ui){
        (this).css("change the CSS of the element inside this. probably pointer-events");
        //do the rest of the coding here. Probably the event handling when the dragged element is dropped.
    }
}); 
```

在上面的代码中，更改适当的 css 样式以获得鼠标可访问性。

# javascript - jQuery UI 可放置类

> ID：16176763
> 
> 赞同：1
> 
> 时间：2013-04-23T18:38:32.750
> 
> 标签：javascript, jquery, jquery-ui

在[http://lab.2toria.com/reflex/index2.php](http://lab.2toria.com/reflex/index2.php)上，我已经开始为我正在构建的游戏构思一个想法。

如果您单击并将右侧的块拖动到主网格，您会看到，当您拖动它时，块会突出显示。如果你掉落，方块会出现深灰色边框。这很好，但是如果您随后将一个块拖到一个已经是深灰色的单元格/块上，它会在您经过它时重置为默认的浅灰色。

我需要做些什么来阻止这种情况发生？我希望深灰色的块保持这种颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:47:02.063

你`hoverClass`在`path`droppable 中，一旦你放弃，这也是你设置的类。当您使用可拖动进入该 droppable 并退出时，它会删除您的类。为什么不创建两个具有相同样式规则的单独类，并将一个用作 the `hoverClass`，另一个用作丢弃的类。

```
$(".grid").droppable({
    hoverClass: "hovered",
    drop: function(event,ui) {
        $(this).addClass("path");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:47:20.167

这可能有点多余，但是您可以为悬停类和放置块时应用的类创建一个单独的类。

所以你会有

```
.path {
    border: 2px solid Gray;
}
.dropped {
    border: 2px solid Gray;
} 
```

然后你的 droppable 函数将是

```
$(".grid").droppable({
    hoverClass: "path",
    drop: function(event,ui) {
        $(this).addClass("dropped");
    }
}); 
```

[http://jsfiddle.net/aymhZ/](http://jsfiddle.net/aymhZ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:45:54.810

替换`hover`类，因为和你的`drop`类一样。当`mouseover`在元素上时添加类，当在`mouseout`移除它时。使用不同的类，应该这样做。

```
$(document).ready(function() {
    //$(".grid").click(function() {
    //     $(this).addClass("path");
    //})
    $("#pathpiece").draggable({
        revert: true,
        revertDuration: 1,
        helper: "clone"
    });

    $(".grid").droppable({
        // Create a hoverPath class
        hoverClass: "hoverPath",
        drop: function(event,ui) {
        $(this).addClass("path");
        }
    });
}); 
```

# android - Android FrameLayout'tabcontent'在活动中不可用？

> ID：16176767
> 
> 赞同：0
> 
> 时间：2013-04-23T18:38:39.060
> 
> 标签：android, android-framelayout

我正在尝试更改选项卡视图的活动，并且正在尝试访问标题为“选项卡内容”的框架布局。

我不断收到错误：

```
tabcontent cannot be resolved or is not a field. 
```

即使它存在于我的 .xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1" >
            </FrameLayout>

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0" >
            </TabWidget>
        </LinearLayout>

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:layout_marginBottom="50dip"
            android:layout_marginRight="50dip"
            android:background="@drawable/attendance" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:layout_marginBottom="50dip"
            android:layout_marginLeft="50dip"
            android:background="@drawable/sched" />
    </FrameLayout>

</TabHost> 
```

我在这里称呼它：

```
//on Create
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        setTabs() ;

        //Sets the visibility of the attendance and schedule buttons to invisible

        Button attend = (Button)findViewById(R.id.button1);
        Button sched = (Button)findViewById(R.id.button2);

        attend.setVisibility(View.INVISIBLE);
        sched.setVisibility(View.INVISIBLE);

        contentviewlayout = (FrameLayout)findViewById(R.id.tabcontent); <--ERROR
        contentviewparams = new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

我不知道为什么会这样......我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:44:15.843

您应该使用`android.R.id.tabcontent`，因为您正在导入“your.app.package.R”，而不是 android.R :)

# javascript - 一键同时执行两个javascript函数？

> ID：16176769
> 
> 赞同：2
> 
> 时间：2013-04-23T18:38:42.653
> 
> 标签：javascript, html, ajax

```
<center>
        <form id="f1">
            <textarea name="textcontent" id="styled" cols="40" rows="4"></textarea>
                <br>
            <input onclick='JavaScript:xmlhttpPost("/cgi-bin/test.py")' type="button" value="Show" class="blue"/>
                <br><br>
            <div id="qList">
                <img id="loading_image" src="ajax-loader.gif"/>
            </div>
        </form>
</center> 
```

`Show`我希望在单击按钮时出现代码中显示的图像，并将图像替换为 python 文件返回的内容。

我知道我可以使用这个脚本`onclick="$('#loading_image').show();"`，但我怎样才能让它们一起执行，以便将图像替换为其他内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:42:39.133

首先，最好使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener), 或[`.on`](http://api.jquery.com/on/)来自 jQuery。

其次，您所要做的就是让您的处理程序调用这两个函数：

```
function handler() {
    xmlhttpPost("/cgi-bin/test.py");
    $('#loading_image').show();
} 
```

然后绑定如下：

```
<input id="myInput" type="button" value="Show" class="blue"/>

...

$("#myInput").on("click", handler); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-25T15:34:52.330

最好的方法是：

```
<input type="button" onclick="manyfunctions()" value="Send" />
<script src="script.js" type="text/javascript"></script>
```

而 script.js 应该是这样的：

```
function manyfunctions() {
  somefunctions()
  anotherfunction()
    //List functions to herre
}
```

# c# - 按对象类型解析服务的设计模式？

> ID：16176771
> 
> 赞同：2
> 
> 时间：2013-04-23T18:38:52.290
> 
> 标签：c#, design-patterns, dependency-injection, structuremap

我正在尝试重构一些基本上具有对象类型的 switch 语句并基于该类型调用特定服务方法的代码。我尽量保持相同的代码尽可能基本。

```
 if (user is Employee)
 {
     _userService.DoSomething(user);
 }
 else if (user is Manager)
 {
    _managerService.DoSomething(user);
 }
 else if (user is Executive)
 {
    _executiveService.DoSomething(user);
 } 
```

我想将服务调用抽象为接口并减少代码行数。我的问题是关于 ServiceResolver 部分，是否有与此类问题相关的特定设计模式？我可以轻松地创建一个具有 switch 语句的类，该语句返回实现接口的正确服务，但它看起来不像我想要的那样干净。有什么建议么？我已经在使用结构映射构造函数注入，可以与条件一起使用吗？

```
public interface IUserDoSomethingService
{
     void DoSomething(User user)
}

var userDoSomethingService = _userDoSomethingServiceResolver(user);
userDoSomethingService.DoSomething(user); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:49:07.557

简单！我将假设您不需要强制转换（您实际上具有强类型的类型）。

在这种情况下，您只需要 IDoSomethingService 上的 Generic

```
public interface IServiceDoSomethingOn<in T>
{
    void DoSomethingOn(T thing);
} 
```

现在在服务电话上，您只需要拨打...

```
public void DoSomethingOnSomethingElse<T>(T thatSomething)
{
    var service = ServiceResolver.Current.Resolve<IServiceDoSomethingOn<T>>();
    service.DoSomethingOn(thatSomething);
} 
```

编辑：半通用解决方案。警告我不知道结构图如何处理协方差和逆变。所以继承可能不起作用。

```
public void DoSomethingOnSomethingElse(object thatSomething, Type type)
{
    var genericMethod = this.GetType().GetMethods()
                        .Single(x => x.IsGeneric && x.Name == "DoSomethingOnSomethingElse");
    var method = genericMethod.MakeGenericMethod(type);
    method.Invoke(this, new object[]{thatSomething});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:45:38.453

从我的角度来看，适合您情况的设计模式是策略模式。您可以在这里参考：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2009/11/22/applying-strategy-pattern-instead-of-using-switch-statements.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/11/22/applying-strategy-pattern-instead-of-using-switch-statements.aspx)。

您可以将每个类型名称注册为结构映射的键，以解析适当的具体类。

希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:21:45.840

为什么不**抽象工厂模式**？

```
public class UserServiceFactory : IUserServiceFactory {
  public EmployeeServiceFactory(IUserService employeeService
    , IUserService managerService
    , IUserService executiveService) {

    //null guards
    this.employeeService = employeeService;
    this.managerService = managerService;
    this.executiveService = executiveService;
  }
} 
```

从这里，您有 2 个选项，或者使用传统的 if-else 语句或策略模式来按对象类型解析。

**If-else 示例（UserServiceFactory 中的方法）：**

```
public void DoSomething(User user) {
  if (user is Employee) {
    employeeService.DoSomething(user);
  }
  else if (user is Manager) {
    managerService.DoSomething(user);
  }
  else if (user is Executive) {
    executiveService.DoSomething(user);
  }
} 
```

**按对象类型解析：**

```
public void DoSomething(Employee user) {
  employeeService.DoSomething(user);
}
public void DoSomething(Manager user) {
  managerService.DoSomething(user);
}
public void DoSomething(Executive user) {
  executiveService.DoSomething(user);
} 
```

应该有另一种方法来做到这一点，通过使用命名而不是配置，但我仍然无法做到这一点。

**直接调用的用法：**

```
public void CallUser() {
  // declare the services and user here
  UserServiceFactory userServiceFactory = new UserServiceFactory(employeeService
    , managerService
    , executiveService);
  userServiceFactory.DoSomething(user);
} 
```

**在其他服务中的使用**，注入工厂而不是服务集合。

```
public class UserServiceConsumer:IUserServiceConsumer {
  public UserServiceConsumer(IUserServiceFactory userServiceFactory) {
    this.userServiceFactory = userServiceFactory;
  }
  IUserServiceFactory userServiceFactory;

  public void ConsumeFactory(User user) {
    //do some validation maybe
    userServiceFactory.DoSomething(user);
  }
} 
```

这听起来可能很复杂，但在你理解之后就足够简单了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:24:16.037

您还可以使用 Managed Extensibility Framework **(MEF)**，它是`System.ComponentModel.Composition`.Net 中命名空间的一部分，可以与`ServiceLocator`模式结合使用。以下是`articles`MEF 上的一些内容：

[http://fernandomachadopirizen.wordpress.com/2010/04/19/a-simple-introduction-to-the-microsoft-extensibility-framework/](http://fernandomachadopirizen.wordpress.com/2010/04/19/a-simple-introduction-to-the-microsoft-extensibility-framework/)

[http://msdn.microsoft.com/en-IN/library/dd460648(v=vs.100).aspx](http://msdn.microsoft.com/en-IN/library/dd460648(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T18:52:59.323

我的想法是：

```
public interface IUserDoSomethingService {
    void DoSomething(Employee user);
    void DoSomething(Manager user);
    void DoSomething(Executive user);
} 
```

# php - 尝试使用PHP删除一行HTML

> ID：16176772
> 
> 赞同：1
> 
> 时间：2013-04-23T18:39:01.153
> 
> 标签：php, html, preg-replace

我试图在使用后从代码中删除“点击”。我需要它在开始时工作，但是在使用 class="details" 之后，我需要删除代码。我想我可以为此使用PHP？！？！？！

我知道我可以使用 PHP 来删除 HTML，并且我一直在尝试使用 preg_replace() 函数，但它不起作用。

我无法对各个行进行颜色编码，因此我在我需要的 HTML 实例的周围和下方以及再次出现该行的位置下方放置了大空间，我需要删除 HTML。

我希望这是有道理的。

预先感谢您的所有帮助。

```
<?php
/**
 * @file
 */
?>

<div class="cloud-computing-item">
  <div class="container">
    <div class="item-header">
      <h3> <?php print $company['name'] ?> </h3>
    </div>
    <div class="item-subheader">    
      <div class="label">Services Offered:</div>
      <div class="data service-offerings">
      <?php 
        foreach($company['services_display'] as $service => $element){
          print $element;
        }
        ?>
      </div>
    </div>  
    <div class="item-body">
      <div class="overview">

        <div class="label">Cloud Providers:</div>
        <div class="data">
          <?php 
            foreach(array_slice($company['service_providers'], 0, 4) as $provider): ?>
            <div>
                <?php 
                print $provider;
                ?>
            </div>
          <?php endforeach; ?>

          <div style="color:#000099;font-weight:bold;">Click</div>

      </div>         
      </div>
      <div class="details">
        <?php 

        $str = '<div style="color:#000099;font-weight:bold;">Click</div>';
            $result = preg_replace('(<style="color:#000099;font-weight:bold;">).*?(</div>)','$1$2',$str); 
        var_dump($result);
        ?>

           <?php foreach(array_slice($company['service_providers'], 4) as $provider): ?>
            <div>
                <?php 
                print $provider;
                ?>
            </div>
          <?php endforeach; ?>
        <?php print theme('cloud_computing_item_details', array('company' => $company)); ?> 
      </div>
    </div>
    <div style="clear: both; height: 5px;">&nbsp;</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:47:43.123

你不能这样做，php是服务器端语言，页面加载后你只能用javascript做到这一点，例如，你可以添加一个属性

```
"onclick='remove(); return true;'" 
```

到按钮并放置功能：

```
<script>
    var remove=function(){
         $('#ID_OF_BUTTON').hide(500);
    } 
</script> 
```

那会做的工作

# c# - 使用 C# 加密 CSV 文件 - 在客户端解密

> ID：16176782
> 
> 赞同：0
> 
> 时间：2013-04-23T18:39:27.157
> 
> 标签：c#, security, encryption

我有一个包含敏感信息的 CSV 文件。我需要对其进行加密并将其发送到客户端的 SFTP 服务器。我还需要给他们一些可以用来解密的东西。

问题是我必须在 C# 代码中进行加密，但我不知道如何让它们解密文件。处理这种要求的最佳方法是什么？也许我创建了一个用于解密的桌面应用程序并将其提供给他们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:45:27.033

最好的方法是使用通用的、完善的加密方案。我建议使用 PGP 或 CMS，因为它们是事实上的加密标准。在我看来，PGP 会更易于使用和理解。Google for PGP .NET 库（有免费的，如 Bouncycastle 和商业的，如 SecureBlackbox）。这些库也支持 SFTP 上传。客户端也可以使用命令行或 GUI 应用程序/实用程序来解密 PGP 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:43:18.490

您可以将其放入带有加密的自解压存档中。

有多种方法可以创建此类存档，其中一种是使用 7Zip 之类的命令行工具，或 Ionic.Zip 之类的库

# java - 快速Java int[] 压缩工具

> ID：16176790
> 
> 赞同：4
> 
> 时间：2013-04-23T18:39:51.903
> 
> 标签：java, arrays, compression, int

在 Java 中，在我的程序中的某个时刻，我必须`int[]`在内存中处理千兆字节的数组。它们经过排序并且仅包含代表文件行的自然数字（如`1, 2, 3, 4`, ..., up to ）。`n`Number`n`是文件中的行数，可以是最大值`100000`。所以数组只是文件中一组所有行的子集。正如您可能计算的那样，有数百万个这样的子集，其中一些会很重要。至于这些子集中的数据分布（我们现在称它们为数组），它是完全随机的：即一个长数组可能是`50000`数字，而一个小数组可能只有`1500`数字；并且每个数组都包含不可预测的序列，因此它可以是`[3, 10, 11, 12, 13, 14, 15, 135, 136, ...]`或`[2, 3, 746, 7889, 7892, 80000,...]`。

由于我有很多要压缩/解压缩的数组，因此我想在每次执行所花费的时间方面找到最快的解决方案。因此开销应该尽可能小。

你会推荐什么图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:06:54.137

您可以无损地预处理数据以提高压缩率。保持第一个值不变。使每个后续值与前一个值之间的差减一。您可以放心，这些差异是非负的。现在使用字节序列将每个整数编码为可变长度整数。例如，解码时，0..127 是一个字节。如果设置了第一个字节的高位（128..255），则将低七位作为整数的低七位，并获取下一个字节。如果高位为零，则使用整个字节作为接下来的八位更高的有效位，或者如果高位为 1，则仅使用低七位。继续直到你得到一个高位为零的字节，这表示整数的结尾。

现在您已将整数编码为字节序列，这可能比将每个原始整数编码为四个或八个字节要短得多。此外，您现在可以应用任何适用于字节序列的标准压缩技术，并可能从中获得一些收益。例如，如果一系列连续的行号是常见的，那么你会得到一个高度可压缩的零字节字符串。

为了在牺牲压缩程度的同时获得最大的压缩和解压缩速度，请查看[lz4](https://code.google.com/p/lz4/)。如果您不需要那么快的东西，请查看[zlib](http://zlib.net/)，您可以在其中选择压缩速度和压缩级别的有效性。

对于您的示例，从 10000 中随机选择 1500 会导致大约 1720 字节未压缩，1600 字节压缩。从 100000 中随机选择 50000 会导致 50000 字节未压缩，18600 字节压缩。压缩是使用最快的 zlib 压缩级别 1 完成的。

请注意，在后一种情况下，如果使用了一半的行号，使用位数组会更有效，这将是 12500 字节未压缩。在这种情况下，无法压缩数据，因为位图看起来是随机的（一半的位设置，一半未设置）。或多或少，例如 25000 或 75000，都会产生可压缩的位图，都可以压缩到大约 10500 字节。

对于大约 12500 行号及以上，压缩位图较小，而对于少于约 12500 行号，压缩的差分变量整数较小。该截止点是两种方法具有大约相同的 12500 字节的未压缩大小的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:54:50.050

我推荐[snappy-java](http://xerial.org/snappy-java/) ，它是谷歌的[snappy](http://code.google.com/p/snappy/)端口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:52:09.867

也许这也可以帮助你： [Compressing array of integers in java](https://stackoverflow.com/questions/1081063/compressing-array-of-integers-in-java)

您必须对数组进行大量计算还是只读的？

编辑：

```
//If the space is more important than performance this might work:
//Not this might be totally stupid for some cases
// First element should be false since its the 0 ;)
boolean[] numbers = { false, true, true, true, false, false, true };

for (int i = 0; i <= numbers.length - 1; i++) {
    if (numbers[i]) {
    // or do some calculations on/with a copy of i
    System.out.println(i);
    }
} 
```

由于布尔数组使用 1 个字节来存储每个信息（+开销）这意味着最多有 100'000 个条目：100'000 字节 = 每个数组约 97kb

# jquery - 由于类而打开JQuery多个窗口

> ID：16176793
> 
> 赞同：0
> 
> 时间：2013-04-23T18:39:59.627
> 
> 标签：jquery

整天都在努力寻找解决方案，这让我发疯。我有一个通过 XSLT 编译的页面，当我单击 Twitter 社交链接以共享有关文章的详细信息时，它会为该类的每个实例打开一个新窗口，而不仅仅是单击的那个。

请您查看以下页面并单击其中一个 Twitter 链接：

[http://search.stoneburndemo.com/search?q=a&btnG.x=-564&btnG.y=-178&filter=0&daterange_ddm=all&as_q=&site=default_collection&client=alhayat_production&output=xml_no_dtd&proxystylesheet=alhayat_production&lr=lang_ar&oe=UTF-8&ie=UTF-8&ud= 1&proxyreload=1&sort=date%3AD%3AL%3Ad1&exclude_apps=1&tlen=88](http://search.stoneburndemo.com/search?q=a&btnG.x=-564&btnG.y=-178&filter=0&daterange_ddm=all&as_q=&site=default_collection&client=alhayat_production&output=xml_no_dtd&proxystylesheet=alhayat_production&lr=lang_ar&oe=UTF-8&ie=UTF-8&ud=1&proxyreload=1&sort=date%3AD%3AL%3Ad1&exclude_apps=1&tlen=88)

这是我正在使用的代码：

```
<script>
$('.twitter_sl').find('a').css('cursor', 'pointer');
$('.twitter_sl').children('a').click(function(){

var twitterOrigURL = $(this).attr('title').replace(/\%20/g, '%2520'),
    twitterURL = twitterOrigURL,
    twitterText = $(this).attr('name');

window.open('http://www.twitter.com/share?text='+twitterText+'&amp;url='+twitterURL,'_blank', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=250,width=600');
});
</script> 
```

HTML 标记是：

```
<td class="twitter_sl">
<a title="{$full_url}" name="{T}"><img src="http://daharchives.alhayat.com/images/t_logo.png" alt="Share on Twitter" height="25px" width="25px"/></a>
</td> 
```

这个问题在 Chrome 中有些隐藏，因为它似乎阻止了除了一个弹出窗口之外的所有窗口。Firefox 通过不阻止任何窗口并打开 10 个新窗口来最好地突出这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:51:06.607

1.  你应该在 CSS 中保留表现性的东西。在你的样式表中做一个规则 `.twitter_sl { cursor: pointer; }`

2.  您可以将点击事件修改为更精细，如下所示：

    ```
    $('.twitter_sl > a').on('click', function(){
        var that = $(this),
            twitterOrigURL = that.attr('title').replace(/\%20/g, '%2520'),
            twitterText = that.attr('name');

        window.open('http://www.twitter.com/share?text=' + twitterText + '&amp;url=' + twitterOrigURL, '_blank', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=250,width=600');
    }); 
    ```

编辑：这是一个小提琴，它在 FF 中工作得很好。[http://jsfiddle.net/5nC4q/3/](http://jsfiddle.net/5nC4q/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:46:58.157

我想通过使用 .each() 迭代链接，每个链接都有其“自己的点击”

```
<script>
$('.twitter_sl').find('a').css('cursor', 'pointer');
$('.twitter_sl').children('a').each(function(){

$(this).click(function(){

var twitterOrigURL = $(this).attr('title').replace(/\%20/g, '%2520'),
twitterURL = twitterOrigURL,
twitterText = $(this).attr('name');

window.open('http://www.twitter.com/share?text='+twitterText+'&amp;url='+twitterURL,'_blank',      'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=250,width=600');
});
});
</script> 
```

# eclipse - 未找到 RAP 2.0 Hello World 示例入口点

> ID：16176794
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:40:00.707
> 
> 标签：eclipse, eclipse-rap

我安装了完整的 IDE 包和 RAP 目标。之后我想尝试“Hello world”示例，您可以在此处找到[示例](http://eclipse.org/rap/developers-guide/devguide.php?topic=hello-world.html&version=2.0)，但我没有“创建应用程序 UI”中描述的 BasicEntryPoint 类。在示例中也说明的“启动应用程序”之后，我收到错误消息：

```
2013-04-23 20:07:26.970:INFO:oejs.Server:jetty-8.1.9.v20130131
osgi> 2013-04-23 20:07:27.033:INFO:oejs.AbstractConnector:Started     
SelectChannelConnector@0.0.0.0:49944
2013-04-23 20:07:30.219:WARN:oejs.ServletHandler:ERROR:  /rap
 java.lang.IllegalArgumentException: Entry point not found: /rap
at org.eclipse.rap.rwt.internal.lifecycle.EntryPointManager.getEntryPointRegistration(EntryPointManager.java:68)
at org.eclipse.rap.rwt.internal.service.StartupPage.getCurrentEntryPointProperties(StartupPage.java:151)
at org.eclipse.rap.rwt.internal.service.StartupPage.writeEntryPointProperty(StartupPage.java:160)
at org.eclipse.rap.rwt.internal.service.StartupPage.writeTitle(StartupPage.java:81)
at org.eclipse.rap.rwt.internal.service.StartupPage$StartupPageValueProvider.writeVariable(StartupPage.java:173)
at org.eclipse.rap.rwt.internal.service.StartupPageTemplate.writePage(StartupPageTemplate.java:52)
at org.eclipse.rap.rwt.internal.service.StartupPage.send(StartupPage.java:65)
at org.eclipse.rap.rwt.internal.service.LifeCycleServiceHandler.handleGetRequest(LifeCycleServiceHandler.java:87)
at org.eclipse.rap.rwt.internal.service.LifeCycleServiceHandler.synchronizedService(LifeCycleServiceHandler.java:77)
at org.eclipse.rap.rwt.internal.service.LifeCycleServiceHandler.service(LifeCycleServiceHandler.java:61)
at org.eclipse.rap.rwt.engine.RWTServlet.handleValidRequest(RWTServlet.java:107)
at org.eclipse.rap.rwt.engine.RWTServlet.handleRequest(RWTServlet.java:94)
at org.eclipse.rap.rwt.engine.RWTServlet.doGet(RWTServlet.java:80)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.rap.rwt.osgi.internal.CutOffContextPathWrapper.service(CutOffContextPathWrapper.java:106)
at org.eclipse.equinox.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:61)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:128)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:60)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:386)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:457)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:229)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:368)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:488)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:932)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:994)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Unknown Source) 
```

怎么了？我觉得示例描述是错误的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T20:31:01.360

我也是 RAP 的新手，遇到了同样的问题。我同意你的观点，这个“Hello World”示例是不完整的。您可以在此处找到解决方案（您必须手动创建此类（BasicEntryPoint））：

[说唱入口点](http://eclipse.org/rap/developers-guide/devguide.php?topic=hello-world.html&version=2.0#entrypoint)

此外，您必须将入口点添加到您的配置（plugin.xml）：

```
 <extension
     point="org.eclipse.rap.ui.entrypoint">
  <entrypoint
        class="org.examples.rap.helloworld.BasicEntryPoint"
        id="entrypoint1"
        path="/rap">
  </entrypoint> 
```

# asp.net - IIS 从匿名登录页面创建 Windows 登录。经典模式。基本上是一个通用的密码/用户名提交页面

> ID：16176795
> 
> 赞同：0
> 
> 时间：2013-04-23T18:40:01.913
> 
> 标签：asp.net, iis-7, application-pool

我不想使用集成模式。我不想使用集成模式。

所以请不要链接到分层身份验证。那不是我想要的。

我所拥有的是一个匿名页面，它对用户进行身份验证，然后它传递用户信息并创建一个可以在所有 Windows 身份验证网站中使用和身份验证的 Windows 身份验证。这里的关键是我不想输入域，用户可以输入他们的用户名和密码。

所以基本上默认情况下一个用户在 default.aspx 上。然后用户输入他们的用户名和密码并点击提交。然后将他们的用户名和密码提交到 secure/landing.aspx，后者通过向其中添加域来创建他们的 Windows 登录。

这是我的问题，你如何做到这一点？基本上使用cookies？以与创建表单 cookie 相同的方式创建 Windows 身份验证 cookie？

我是否必须让用户输入 default.aspx，然后在同一级别导航到创建 windows auth 然后传递到安全的landing.aspx？

所以我的主要问题是这个。

*   您如何创建对 Windows 身份验证的匿名访问*   您如何创建 Windows 身份验证？

这就是我到目前为止的 web.config

```
<configuration>
  <system.web>
    <authentication mode="Forms">
      <forms cookieless="UseCookies" defaultUrl="~/Default.aspx" enableCrossAppRedirects="true" loginUrl="default.aspx" name=".ASPXAUTH" path="/" protection="All" requireSSL="false" slidingExpiration="true" timeout="10080"/>
    </authentication>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
  <location path="default.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
    <system.webServer>
      <security>
        <authentication>
          <anonymousAuthentication enabled="true"/>
          <windowsAuthentication enabled="false"/>
        </authentication>
      </security>
    </system.webServer>
  </location>
  <location path="secure">
    <system.web>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
    <system.webServer>
      <security>
        <authentication>
          <anonymousAuthentication enabled="false"/>
          <windowsAuthentication enabled="true"/>
        </authentication>
      </security>
    </system.webServer>
  </location>
</configuration> 
```

我一直在看这个例子，但我不确定 Bal() 以及角色提供者是如何工作的。 [使用 asp.net 的混合模式身份验证时如何配置 IIS7](https://stackoverflow.com/questions/7731887/how-to-configure-iis7-when-using-mixed-mode-authentication-with-asp-net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:06:35.467

我认为[这篇关于 ActiveDirectoryMembershipProvider 类的文章](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)可能会对你有所帮助

此类通过接受用户名和密码来帮助您执行 Windows 登录。

也请检查[一下](https://stackoverflow.com/questions/4712927/activedirectorymembershipprovider-to-validate-a-user)

# c# - 如何向我的模型添加固定值属性？

> ID：16176798
> 
> 赞同：1
> 
> 时间：2013-04-23T18:40:05.940
> 
> 标签：c#, asp.net-mvc, entity-framework, database-design, asp.net-mvc-4

假设我有一个任务模型：

```
public class Task()
{
   public int Id {get; set;}
   public int Title {get;set;}
} 
```

现在我想添加一个*“重复”*属性。

该属性只能包含 3 个值之一：

1.  日常的
2.  每周
3.  月刊

我是否创建一个 RepeatOption() 模型并将其外键添加到 Task() 模型中——或者是否有更优化的解决方案，也许使用枚举？（这里只是猜测）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:42:19.047

假设这是硬编码的东西，不太可能改变，我只会使用带有这三个值的枚举类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:42:47.833

```
public enum RepeatOption
{
    Daily,
    Weekly,
    Monthly
}

public class Task()
{
   public int Id {get; set;}
   public int Title {get;set;}
   public RepeatOption Repeat {get;set;}
} 
```

在 DB 字段中`Repeat`应该存储为`int`，除非您对它有一些特定的要求。

# iphone - 如何在uiwebview中更改html文本字体大小

> ID：16176802
> 
> 赞同：0
> 
> 时间：2013-04-23T18:40:13.757
> 
> 标签：iphone, html, fonts, uiwebview

在我的应用程序中，我正在加载来自服务器的 HTML 字符串，该字符串已经包含字体颜色和字体大小，但我需要更改字体的颜色和大小。要替换它，我已经使用了以下代码，但它不起作用。

```
 UIWebView *webView=[[UIWebView alloc]initWithFrame:CGRectMake(0,0, 550, 200)];
 [webView loadHTMLString:[NSString stringWithFormat:@"<div style='text-align:justify; font-size:16px;font-family:HelveticaNeue-Condensed;color:#ffff;'>%@",title] baseURL:nil];
 [webView setOpaque:NO];
 webView.delegate = self;
 [webView setBackgroundColor:[UIColor clearColor]];
 [self addSubview:webView]; 
```

有没有其他方法可以改变它？请给我建议答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:45:55.147

我使用了以下代码

```
 NSString *embedHTML = @"<html><body bgcolor=#EAEAEA><font face='Myriad Pro' size='3'><meta name='viewport' content='width=device-width; initial-scale=1.0; maximum-scale=5.0; user-scalable=YES'/>";///You can set your colour using font tag
      NSString *endHtml=@"</font></body></html>";
      NSString *strDes=[NSString stringWithFormat:@"%@%@%@",embedHTML,videoShareObject.strDescription,endHtml];
      [self.webViewObj loadHTMLString:strDes baseURL:nil];
      NSString *string = [NSString stringWithFormat:@"document.body.style.zoom = %f;", fontSizeSlider.value]; //I used the Sliderbar, You can set your font size.
      [webViewObj stringByEvaluatingJavaScriptFromString:string]; 
```

# html - 在html电子邮件中嵌入打印链接？

> ID：16176806
> 
> 赞同：2
> 
> 时间：2013-04-23T18:40:28.560
> 
> 标签：html, email, printing, html-email, email-client

我正在尝试在 html 电子邮件爆炸中嵌入打印链接。

我尝试了以下代码，但它不起作用。

```
<a href="javascript:window.print();">
<img src="reward_08.gif" border="0"  width="71" height="52" alt="PRINT">
</a> 
```

当我在网页中执行上述代码时，它可以正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:12:41.107

就像评论一样，因为电子邮件客户端通常不支持 javascript。您可以有一个按钮/文本链接到作为电子邮件副本的外部页面，并将`<body>`标签更改为此

```
<body onload="window.print()"> 
```

# mysql - ON DUPLICATE KEY UPDATE 与 WHERE 和 COUNT 条件...？

> ID：16176811
> 
> 赞同：0
> 
> 时间：2013-04-23T18:40:55.103
> 
> 标签：mysql, mysql-python

我本来希望在 MySQL 中的 ON DUPLICATE KEY UPDATE 语句上使用 WHERE 语句，但是我知道你不能这样做。我希望我的陈述是这样的..

```
INSERT INTO table1(name, user, num_users) 
VALUES (%s, %s, %s) ON DUPLICATE KEY UPDATE 
num_users = SELECT COUNT(users.table2) WHERE name=%s)
(name, user, 1, name)) 
```

因此，如果有人知道如何在一个命令中执行此操作，那就太好了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:36:22.007

您可以在子句中使用`WHERE`和子查询。`ON DUPLICATE KEY UPDATE`尝试使用正确的语法`SELECT`。我认为这是错误的：

```
SELECT COUNT(users.table2) WHERE name=%s 
```

表 2 是表吗？在那种情况下，事情就完全不对了。如果它是一个字段，请尝试以下操作：

```
SELECT COUNT(table2) FROM users WHERE name=%s 
```

# matlab - MATLAB 中来自 2 个向量的 2 列矩阵

> ID：16176818
> 
> 赞同：0
> 
> 时间：2013-04-23T18:41:23.400
> 
> 标签：matlab, vector, matrix

这感觉应该很简单。

我正在构建一个最小距离分类器，我想将 feature1 和 feature2 放入同一个矩阵中，这样我就可以调用它们并得到这样的答案。

`featureVector(1,:) =`所有的`feature1`价值观

`featureVector(2,:) =`所有的`feature2`价值观

我正在循环并希望`featureVector`在循环运行时将这些值放入。

我对 MATLAB 很陌生，所以我不知道如何用语言表达。希望这有足够的意义。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:43:52.033

如果您`feature1`是水平向量，请执行以下操作：

```
featureVector = [ feature1 ; feature2 ] 
```

否则（如果垂直），请执行以下操作：

```
featureVector = [ feature1 , feature2 ] 
```

如果你不知道它的方向，你总是可以做一个`reshape`：

```
feature1 = reshape(feature1, 1, numel(feature1)) 
```

...什么会使`feature1`水平，或者：

```
feature1 = reshape(feature1, numel(feature1), 1) 
```

...什么会使`feature1`垂直。

`reshape`像这样使用将从*任何*向量/矩阵生成水平/垂直向量，从原始源中逐一获取特定值。

**编辑**：证明它有效：

```
>> a = [1 ; 2 ; 3 ; 4 ; 5];
>> b = [6 ; 7 ; 8 ; 9 ; 10];
>> ab = [a, b]

ab =

     1     6
     2     7
     3     8
     4     9
     5    10

>> ab(2,:)

ans =

     2     7 
```

**编辑**：如果您的`feature1`and`feature2`是标量，并且您想`featureVector`在每次迭代中将它们一一添加，请执行以下操作：

```
featureVector = []

for i = 1:...
    feature1 = ...;
    feature2 = ...;
    featureVector = [featureVector; [feature1, feature2]];
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:44:15.600

你有没有想过使用这个？

```
results = [values1,values2]; 
```

# java - 如何远程运行 mapreduce 作业

> ID：16176824
> 
> 赞同：4
> 
> 时间：2013-04-23T18:41:45.233
> 
> 标签：java, jakarta-ee, hadoop, mapreduce, hdfs

我在尝试远程运行 map-reduce 作业（字数统计示例）时遇到了一些问题。在谷歌上搜索后，我仍然无法实现我的目标。而且我只看到很少有关于远程调用 map-reduce 作业的主题。下面是问题：

1.  起初，我遇到权限问题：

    ```
    SEVERE: PriviledgedActionException as:[user]    cause:org.apache.hadoop.security.AccessControlException:
    org.apache.hadoop.security.AccessControlException: Permission denied: user=[user], access=WRITE, inode="mapred":root:supergroup:rwxr-xr-x 
    ```

    这似乎是对 hdfs 路径的许可拒绝。我通过设置关闭检查`dfs.permissions = true`。有没有其他方法可以克服这个问题，但仍然保持检查。

2.  然后我遇到了一个异常，说我无法访问 map-reduce 应用程序 jar。

    ```
    SEVERE: PriviledgedActionException as:[User] cause:java.io.FileNotFoundException: File /home/hduser/WordCount-1.0.jar does not exist. 
    ```

    我的代码是：

    ```
    JobConf conf = new JobConf(WordCount.class);
    conf.setJobName("wordcount");
    conf.set("fs.default.name", "hdfs://10.97.1.91:54310");
    conf.set("mapred.job.tracker", "10.97.1.91:54311");
    conf.setJar("/home/hduser/WordCount-1.0.jar");
    ...
    JobClient.runJob(conf); 
    ```

    似乎名称节点上的本地文件系统拒绝我访问 jar 文件。我该如何克服这个问题？我在stackoverflow中找到[了一个链接。](https://stackoverflow.com/questions/5815527/exception-while-executing-hadoop-job-remotely)从链接中，不需要 jar 文件位置。但是name node如何在不提供位置的情况下找到jar文件呢？

3.  我在互联网上找到的教程中很少看到远程执行作业的示例。不建议这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T10:28:34.287

对于第一个问题，看起来 [user] 没有 HDFS 的权限。首先，Hadoop 使用 whoami 命令来确定提交作业的用户和命令的输出是否相同。解决此问题的两种方法，a) 确定对 HDFS 具有权限的用户，例如 root，并在提交作业之前添加以下行。System.setProperty("HADOOP_USER_NAME","root"); b) 冒充。查看以下链接 [http://hadoop.apache.org/docs/stable/Secure_Impersonation.html](http://hadoop.apache.org/docs/stable/Secure_Impersonation.html)

# html - 引导程序上的粘性页脚会在内容上造成很大的空白

> ID：16176828
> 
> 赞同：1
> 
> 时间：2013-04-23T18:42:13.663
> 
> 标签：html, css, twitter-bootstrap, sticky-footer

我尝试在底部创建带有粘性页脚的自定义导航，但它在我的导航和内容之间造成了很大的差距，有人可以帮忙。对不起，我的英语不是那么好。非常感谢 。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>sticky footer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS -->
     <link href="css/style.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
  </head>

  <body class="body">

    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">

              <header class="mainheader">
                  <nav>
                      <ul id="nav">
                        <li class="current"><a href="index.html">Home</a></li>
                        <li><a href="#">Proofreading</a></li>
                        <li><a href="#">Paraphrasing</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Contact Us</a></li>
                      </ul>
                  </nav>
              </div>

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h1>Sticky footer</h1>
        </div>
        <p class="lead">Pin a fixed-height footer to the bottom of the viewport in desktop browsers with this custom HTML and CSS.</p>
        <p>Use <a href="./sticky-footer-navbar.html">the sticky footer</a> with a fixed navbar if need be, too.</p>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Example courtesy <a href="http://martinbean.co.uk">Martin Bean</a> and <a href="http://ryanfait.com/sticky-footer/">Ryan Fait</a>.</p>
      </div>
    </div>

  </body>
</html> 
```

这是我的CSS：

```
/* Sticky footer styles
-------------------------------------------------- */

html,
body {
  height: 100%;
  /* The html and body elements cannot have any padding or margin. */
}

.body {
  margin: 0 auto;
  width: 70%;
  clear: both;
}

/* Wrapper for page content to push down footer */
#wrap {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  /* Negative indent footer by it's height */
  margin: 0 auto -60px;
}

/* Set the fixed height of the footer here */
#push,
#footer {
  height: 60px;
}
#footer {
  background-color: #f5f5f5;
}

/* Lastly, apply responsive CSS fixes as necessary */
@media (max-width: 767px) {
  #footer {
    margin-left: -20px;
    margin-right: -20px;
    padding-left: 20px;
    padding-right: 20px;
  }
}

/* Custom page CSS
-------------------------------------------------- */
/* Not required for template or sticky footer method. */

.container {
  width: auto;
  max-width: 90%;
}
.container .credit {
  margin: 20px 0;
}

/* NAVIGATION */

.mainheader{
clear: both;
margin: 0px;
padding: 0px;
}

.mainheader nav, .mainheader nav * {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

.mainheader nav, .mainheader nav ul {
  font-family: 'Fjalla One', sans-serif;
  font-size:17px;
  text-transform:uppercase;
  list-style: none;
  width: 100%;
  float: left;
  margin-left: 0px;
  margin-bottom: 0px;
  text-align: center;
}

.mainheader nav ul li.current > a {
   color: #fff;
   background:#f16d3c; 
}

.mainheader nav ul li {
   float: left;
   width: 20%;
}

.mainheader nav ul li:last-child > a {
  border:0px;   
}

.mainheader nav a {
color: #000;
text-decoration: none;
width: 100%;
background: #EEEEEE;
border-right: 1px solid white;
padding: 0.7em 1em;
float: left;
}

.mainheader nav a:hover{
color:#fff;
background:#f16d3c;
-moz-box-shadow:inset 0px 0px 40px 10px rgba(218, 98, 54, 0.75);
-webkit-box-shadow:inset 0px 0px 40px 10px rgba(218, 98, 54, 0.75);
box-shadow:inset 0px 0px 40px 10px rgba(218, 98, 54, 0.75);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:20:36.130

你错过了一些重要的风格。可以在此处看到在可变内容下表现良好的粘性页脚的基本原理：

[http://matthewjamestaylor.com/blog/bottom-footer-demo.htm](http://matthewjamestaylor.com/blog/bottom-footer-demo.htm)

**更新：** Bootstrap 3 包括粘性页脚支持： http: [//getbootstrap.com/examples/sticky-footer/](http://getbootstrap.com/examples/sticky-footer/)

# javascript - 在淘汰赛中枚举 observableArray 到字符串？

> ID：16176830
> 
> 赞同：2
> 
> 时间：2013-04-23T18:42:23.000
> 
> 标签：javascript, knockout.js

再一次，在我这边似乎是一个大脑放屁。尝试通过遍历数组中的所有对象并更改这些对象的可观察属性来进行示例操作：

```
var sss = vm.tripData();
                for (var sh2 in sss) {
                    sh2.isVisible(false);
                } 
```

`sss`包含对象数组，我可以在 VS2012 本地看到它 - 这就是我需要的。我宣布`sss`只是为了看看我要列举的内容。内部循环首先`sh2`包含字符串`"0"`为什么？我想这是一些 javascript 的东西（我来自 c# 背景）。我希望 sh2 成为我的对象。

编辑：

这是我在调试器中看到的：

![sss 对象](https://i.stack.imgur.com/h8Zbs.jpg)

![sh2 字符串](https://i.stack.imgur.com/7crow.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:16:08.717

所以，问题在于 for...in 循环遍历对象属性的键，而不是对象的值。

所以如果你有一个像

```
var x = {
    a: "A",
    b: "B"
} 
```

`for...in`会吐出来`'a'`和`'b'`。由于数组是对象，`for...in`使用数组会给你一些非常相似的东西：数组中每个索引的字符串。因此，与`var a= [1, 2, 3]`, `for...in`of`a`将导致`'0', '1', '2'`, 而不是`1, 2, 3`。

改用下面的构造来做你想做的事。

```
var sss = vm.tripData();
for (var i = 0; i < sss.length; i++) {
    var sh2 = sss[i];
    sh2.isVisible(false);
} 
```

# c# - 我可以将类型参数传递给 *.xaml.cs 类吗？

> ID：16176831
> 
> 赞同：0
> 
> 时间：2013-04-23T18:42:23.083
> 
> 标签：c#, generics, partial-classes, type-parameter

我想将类型参数传递给我的 *.xaml.cs 文件。C# 代码将如下所示：

```
public partial class Filter<T> : Window where T : IFilterableType
{
    private readonly IEnumerable<T> _rows;
    public Filter(IEnumerable<T> rows)
    {
        this._rows = rows;
    }
} 
```

由于这是一个部分类，并且由于 Visual Studio 生成了该类的另一部分，我担心`<T>`当 Visual Studio 重新生成部分类的另一部分时，我的类型参数将被删除。到目前为止，在我的测试中，这还没有发生，但我想确定一下。

我可以像这样将类型参数传递给 *.xaml.cs 文件吗？

如果没有，我的 *.xaml.cs 类是否有其他方法可以拥有一些泛型类型的私有列表？我会尝试类似下面的内容，但这当然不会编译。

```
public partial class Filter : Window
{
    private IEnumerable<T> _rows;
    public Filter() { }

    public void LoadList(IEnumerable<T> rows) where T : IFilterableType
    {
        this._rows = rows;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:43:45.163

不幸的是，您请求的选项在 XAML 中都不可能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:29:02.100

这是另一种选择。我已经让它工作了，但它肯定是丑陋的代码。我使用一个简单的`object`变量来保存通用列表。我使用具有约束类型参数的方法来确保我正在使用`IFilterableType`接口。我还检查了我的`DisplayList`方法中的类型，以确保我使用的是正确的`IFilterableType`.

如果我`this.DisplayList`使用 FilterB 而不是 FilterA 调用，我会得到一个异常。这是我能想到的最好的解决方案。

```
public partial class Filter : Window
{
    public Filter()
    {
        List<FilterA> listA = new List<FilterA>();
        this.SetList<FilterA>(listA);
        this.DisplayList<FilterA>();
    }

    public interface IFilterableType { string Name { get; } }
    public class FilterA : IFilterableType { public string Name { get { return "A"; } } }
    public class FilterB : IFilterableType { public string Name { get { return "B"; } } }

    private object _myList;
    private Type _type;

    public void SetList<T>(List<T> list) where T : IFilterableType
    {
        this._myList = list;
        this._type = typeof(T);
    }

    public void DisplayList<T>() where T : IFilterableType
    {
        if (this._myList is List<T>)
            this.DataContext = (List<T>)this._myList;
        else
            throw new ArgumentException();
    }
} 
```

# android - if(session.isOpen()), android 上的 facebook 登录总是返回 false

> ID：16176832
> 
> 赞同：13
> 
> 时间：2013-04-23T18:42:29.293
> 
> 标签：android, facebook, session, login

我正在尝试在我的 android 应用程序中实现一个简单的活动，在该应用程序中要求用户通过 facebook 登录，以便检索用户的“喜欢”。所以很明显，首先我正在通过 facebook 测试一个简单的登录。我正在使用他们在“Android 版 Facebook SDK 入门”中的确切代码 - 第 6 步（[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/) ) 但由于某种原因它不起作用。当我调试代码时，我意识到以下情况：

```
if(session.isOpen()) 
```

**即使**我已经登录到 Facebook，总是返回 false 。我已经尝试了一切来修复它，但似乎没有任何效果。

有人遇到过这个问题或知道如何解决吗？

**编辑：**我直接在我的手机上而不是在模拟器上尝试这个测试。我不知道这是否可能是一个问题。

提前致谢！

而且我确实尝试了这个解决方案[session.isOpened() 即使成功登录到 Facebook](http://facebook.stackoverflow.com/questions/15490730/session-isopened-returns-false-even-if-successfully-logged-in-to-facebook)但使用 java 6 或 7 仍然给出相同的哈希键也会返回 false。

**编辑2：**我也尝试过同样的事情，但方法略有不同。[http://sonyarouje.com/2011/09/18/facebook-hash-key-for-android-apps/](http://sonyarouje.com/2011/09/18/facebook-hash-key-for-android-apps/)我仍然遇到同样的问题。*session.isOpen()*方法总是返回 false。

**编辑 3：**这是我尝试过的最新代码。我认为logcat中没有任何错误。无论如何，我会在这里链接它以防万一我遗漏了什么。

```
package com.example.danandroidapp;
import java.util.Arrays;

import com.facebook.FacebookException;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.model.GraphUser;
import com.facebook.widget.LoginButton;
import com.facebook.widget.LoginButton.OnErrorListener;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    private String TAG = "MainActivity";
    private TextView lblEmail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lblEmail = (TextView) findViewById(R.id.lblEmail);

        LoginButton authButton = (LoginButton) findViewById(R.id.authButton);

        authButton.setOnErrorListener(new OnErrorListener() {
            @Override
            public void onError(FacebookException error) {
                Log.i(TAG, "Error " + error.getMessage());
            }
        });

        authButton.setReadPermissions(Arrays.asList("basic_info", "email"));
        authButton.setSessionStatusCallback(new Session.StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if(session.isOpened()) {
                Log.i(TAG, "Access Token " + session.getAccessToken());
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        if(user != null) {
                            Log.i(TAG, "User ID " + user.getId());
                            Log.i(TAG, "Email " + user.asMap().get("email"));
                            lblEmail.setText(user.asMap().get("email").toString());
                        }
                    }
                });
            }
        }
    });
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

还有我的 logcat 输出：[https ://www.dropbox.com/s/7qg9zbhlpikfovf/log.txt](https://www.dropbox.com/s/7qg9zbhlpikfovf/log.txt)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-17T08:18:37.857

我遇到了类似的问题，它是 facebook 中的 hashkey 错误，通过以下代码，您可以获得已发送到 facebook 的 hash key。只需复制此哈希键并替换它即可。它将开始工作。

```
 try {
        PackageInfo info = getPackageManager().getPackageInfo(
                "your.root.package", 
                PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T17:41:14.853

您缺少 onActivityResult 覆盖（入门指南中代码片段的最后一点）。

onActivityResult 是信息如何从 FB 应用程序（或 web 视图）返回到您的应用程序，并且必须被覆盖才能回调到会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T12:48:45.863

```
private Session.StatusCallback statusCallback = new SessionStatusCallback();

private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(final Session session, SessionState state,
            Exception exception) {

        try {
            new_session = session;
            if (state.equals(SessionState.OPENING)) {

            }

            if (state.equals(SessionState.OPENED)) {

            }

            if (state.equals(SessionState.CLOSED_LOGIN_FAILED)) {
                try {
                    PackageInfo info = context.getPackageManager()
                            .getPackageInfo("your package name",
                                    PackageManager.GET_SIGNATURES);
                    for (Signature signature : info.signatures) {
                        MessageDigest md = MessageDigest.getInstance("SHA");
                        md.update(signature.toByteArray());
                        Log.d("KeyHash:", Base64.encodeToString(
                                md.digest(), Base64.DEFAULT));
                    }
                    Session.openActiveSession((Activity) context, true,
                            statusCallback);
                } catch (NameNotFoundException e) {

                } catch (NoSuchAlgorithmException e) {

                }
            }

            if (state.equals(SessionState.OPENED_TOKEN_UPDATED)) {

            }

    }
    catch(Exception e){}
  }
}

//if session is closed
Session.openActiveSession((Activity) context, true,
                    statusCallback); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T21:13:46.103

您必须在对我有用的 Facebook 开发人员上添加密钥哈希

# postgresql - luasql.postgres 中的预处理语句

> ID：16176833
> 
> 赞同：0
> 
> 时间：2013-04-23T18:42:30.217
> 
> 标签：postgresql, lua, prepared-statement

我正在尝试遵循在此处找到的 luasql 中使用准备好的语句的示例：http: [//lists.luaforge.net/pipermail/kepler-project/2008-January/002207.html](http://lists.luaforge.net/pipermail/kepler-project/2008-January/002207.html)

我安装了 luasql 2.2.0 版。

当我尝试示例代码时，我收到以下错误消息：

> lua: postgrestest.lua:63: 尝试调用方法 'gettypes' (一个 nil 值) 堆栈回溯: postgrestest.lua:63: in main chunk [C]: ?

这是代码：

```
require "luasql.postgres"
local databasename = "test"
local databaseUser = "user"
local databasepassword = "password"
local databaseserver="10.10.10.10" -- only rqd for remote database servers.
--local databaseserver="127.0.0.1"
local databaseport = 5432 -- only rqd for remote database servers.

env = assert (luasql.postgres())
con = assert (env:connect(databasename, databaseUser, databasepassword, databaseserver))

-- DROP ANY EXISTING PEOPLE TABLE
-- note:  con:execute() Returns: a cursor object if there are results, or the number of rows affected by the command otherwise.
res = con:execute("DROP TABLE people")

-- RECREATE PEOPLE TABLE
res = assert (con:execute[[
    CREATE TABLE people(
        id integer,
        fname text,
        lname text,
        job text
    )
]])
print ('result from create table is:'..res)
-- ADD SOME PEOPLE TO THE PEOPLE TABLE
res = assert(con:execute("INSERT INTO people " ..
    "VALUES (1, 'Roberto', 'Ierusalimschy', 'Programmer')"), "record inserted")
print ("result from insert"..res)

res = assert(con:execute("INSERT INTO people " ..
    "VALUES (3, 'Taylor', 'Swift', 'Singer')"))

-- RETRIEVE THE PEOPLE TABLE SORTED BY LAST NAME INTO CURSOR
cur = assert (con:execute"SELECT * from people order by lname")

-- LOOP THROUGH THE CURSOR AND PRINT
print()
print(string.format("%15s  %-15s %-15s %-15s",
    "#", "FNAME", "LNAME", "JOB"))
print(string.format("%15s  %-15s %-15s %-15s",
    "-", "-----", "-----", "---"))
row = cur:fetch ({}, "a")
while row do
    print(string.format("%15d  %-15s %-15s %-15s",
        row.id, row.fname, row.lname, row.job))
    row = cur:fetch (row, "a")
end
print()

-- prepared statements 
types = con:gettypes()
stmt, err = con:prepare("select * from people where lname=$1", types["text"])
if err then
    print("problems creating prepared statement"..err)
else
    cur, err = stmt:execute("Swift")
  if err then
        print("Couldn't execute the statement: "..err);
    else
        results = cur:fetch({}, "a")
        while results do
            print(results.id)
        end
    end
end 
-- CLOSE EVERYTHING
cur:close()
con:close()
env:close() 
```

我还尝试将 prepare 语句更改为如下所示：

```
--types = con:gettypes()
--stmt, err = con:prepare("select * from people where lname=$1", types["text"])
stmt, err = con:prepare("select * from people where lname=$1", "Swift")
if err then
    print("problems creating prepared statement"..err)
else
    --cur, err = stmt:execute("Swift")
    cur, err = stmt:execute()
  if err then
        print("Couldn't execute the statement: "..err); 
```

但是我得到了同样的错误信息，除了使用prepare方法：

```
lua: postgrestest.lua:65: attempt to call method 'prepare' (a nil value)
stack traceback:
        postgrestest.lua:65: in main chunk
        [C]: ? 
```

你能告诉我我做错了什么/如何解决这个问题吗？谢谢！

**编辑 1**

与数据库的连接和所有其他代码都有效。循环遍历表格并打印数据的代码有效。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T08:03:19.750

如评论中所述，您需要应用显然没有的补丁。但是，如果您需要在支持它们的语言框架之外使用准备好的语句，您可以手动使用 PostgreSQL 的服务器端准备好的语句。

基本上，您在 SQL 中声明您的存储过程，然后像调用函数一样在 SQL 中调用它。准备好的语句有点像临时 SQL 语言函数。因此，通过任何 SQL 接口，您仍然可以执行以下操作：

```
PREPARE my_insert(int, int, text, text) AS
INSERT INTO foo(id, bar, baz, test)
values ($1, $2, $3, $4); 
```

然后你可以重复调用它（使用相同的计划）：

```
EXECUTE my_insert(1, 3, 'foo', 'bar'); 
```

即使您的客户端框架不支持它们，这也允许您执行此类准备好的语句。

# android - 将 .apk 部署到电话的问题

> ID：16176845
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:42:56.957
> 
> 标签：android, apk, adb

EDT：我的问题的根源是确保安装了手机的驱动程序。留下文档的帖子，以防其他人对如何验证 adb 是否可以看到他们的设备有疑问。

我有一个相关的问题：[如何将 apk 应用程序从我的电脑安装到我的移动 android](https://stackoverflow.com/questions/5449707/how-to-install-apk-application-from-my-pc-to-my-mobile-android)

我正在使用 eclipse 和一个 Win7 VM（通过 VMWare Workstation 运行），我将其用作我的开发机器。

我正在尝试将 .apk 安装到我的手机上，以便我可以使用真实设备进行一些测试。我将手机设置为处于调试模式并设置它，以便当我通过 USB 连接时，它将手机作为硬盘连接。

当我连接手机时，我的手机会连接到我的虚拟机，因为我看到了可以访问的新驱动器。

当我尝试时，`adb install c:\...\program.apk`我得到：

```
error: device not found
- waiting for device - 
```

对我所缺少的有什么想法吗？

美东时间：

确认请求信息的屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/2rZm8.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/qnQtI.jpg)

美东时间：

看起来问题可能像 RStar 指出的那样......设备管理器无法正确识别设备：

![在此处输入图像描述](https://i.stack.imgur.com/FLegP.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:08:32.560

所以问题的根源是android设备驱动程序。为了获得驱动程序，对于我的 HTC 手机，我必须从以下网址下载 HTC Sync 软件：[http ://www.htc.com/us/support/](http://www.htc.com/us/support/)

在我得到它并安装它之后，它为我安装了驱动程序。我确实注意到，当它安装时，它会更改系统路径，它有自己的 adb.exe ... 如果您尝试这样做，`adb install`那么您可能会收到服务器已过期的消息。一些谷歌搜索使我了解到这个额外的事实`adb.exe`。我重命名了文件并将sdk路径放入我的系统路径中。之后，我能够`adb install`毫无问题地执行命令。

@Rstar 感谢您的帮助！

# string - 从字符串中解析括号

> ID：16176848
> 
> 赞同：0
> 
> 时间：2013-04-23T18:43:15.947
> 
> 标签：string, parsing, haskell, parsec

所以我有一个逻辑语句，例如“（（A o B）a B）o（B a C）”，我想将括号内的每组语句解析为列表中的每个部分......这就是我到目前为止，但由于我是 haskell 的新手，我不知道我是否在正确的轨道上编辑：我现在又有了。所以现在的问题是两件事！！（1）当我现在运行它时，我无法返回字符串列表（2）我得到意外的'（'

```
statement :: Parser String
statement =  many (letter <|> space ) >> parenStatement

parenStatement :: Parser [String]
parenStatement = do
    char '('
    answer <- statement
    char ')'
    return answer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:11:19.680

大概你有一些代表逻辑语句的数据类型。

```
data Statement = Conjunction Statement Statement
               | Disjunction Statement Statement
               -- etc 
```

大概您最终希望能够解析逻辑语句。

```
statement :: Parser Statement
statement = conjunction <|> disjunction <|> parenthesisisedStatement -- etc 
```

解析被括号包围的语句就是

```
parenthesisisedStatement :: Parser Statement
parenthesisisedStatement = do
    char '('
    answer <- statement
    char ')'
    return parenthesisisedStatement 
```

* * *

**编辑：（**因为这不适合评论）

您似乎正在尝试将输入字符串**标记**为字符串列表（您稍后可能会将其输入解析器）。您似乎没有尝试将输入字符串**解析**为适当限制其可能包含的内容的数据结构。

如果您真的想**标记**您的输入，我建议您在新的顶级问题中再次提问。

但是您可能最好将输入**解析为适当的数据结构，因此请****考虑如何最好地表示语句**，而**[不是](http://c2.com/cgi/wiki?StringlyTyped) [到处使用字符串](http://neologisms.rice.edu/index.php?a=term&d=1&t=14876)**。

# javascript - Jquery .toggle() 和浏览器后退按钮

> ID：16176849
> 
> 赞同：0
> 
> 时间：2013-04-23T18:43:16.187
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个相当简单的布局，结果很奇怪。

```
$(".main").on("hover", ".js_post", function () {
$(this).children('.js_del').toggle();
}); 
```

本质上，当用户将鼠标悬停在 .js_post div 上时，会切换 .js_del div。这是隐藏 .js_del 的 css：

```
.js_del { display:none; } 
```

现在，当光标悬停在 .js_post 上时，.js_del div 会按预期切换。但是，当用户单击 .js_post div 中的链接，然后单击浏览器后退按钮时，会发生奇怪的事情......

在 FF 中，一切都按预期工作（即，浏览器将单击解释为 mouseleave 并切换 .js_del。）

然而，在 Safari 中，当用户单击返回时，浏览器会应用反向切换（即，显示 .js_del，当光标悬停在 .js_post 上时，.js_del 链接消失。）

更奇怪的是...

我决定添加一个处理程序来手动隐藏 .js_del div 每当单击 .js_post 中的“a”元素时，如下所示：

```
$(".js_post").find("a").click(function () {
    $(this).parents('.js_post').children('.js_del').hide();
}); 
```

现在，当在 Safari 中查看时，一切正常，但在 FF 中，情况相反（即显示 .js_del，当光标悬停在 .js_post 上时，.js_del 链接消失）！

有什么想法吗？？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:54:11.183

因为后退按钮不会使页面缓存行为相同，并且您无法确定 dom 元素状态，`toggle()`所以调用可能很粗糙。我拆分了 mouseenter 和 mouseleave 而不是`hover()`，并特别调出了子选择器中的可见性。我还在最后进行了 .hide() 调用，以标准化`.js_del`dom 元素可见性状态，而不管后退按钮浏览器问题如何。

# js

```
$(".main").on({
  "mouseenter":function(evt){
    $(this).children('.js_del:hidden').toggle();
  },
  "mouseleave":function(evt){
    $(this).children('.js_del:visible').toggle();
  }
}, ".js_post", null).find('.js_del:visible').hide(); 
```

# php - MYSQL NEIGHBOR ROWS 和 CURRENT ROW

> ID：16176854
> 
> 赞同：1
> 
> 时间：2013-04-23T18:43:37.883
> 
> 标签：php, mysql, cakephp-2.0, mysqli-multi-query

MYSQL 查询以获取相邻行以及当前（id）给定条件

喜欢

```
ID | BOOK     |
--------------
1  | xyzbooks |

2  | pqrbooks |

3  | dnsaddds |

4  | dfbsakjf |

5  | dbsadbdd |

6  | tyrbooks |

7  | sfdffdsf |

8  | yuibooks | 
```

我在 id 3 上（我可以从 url 获得的 dnsaddds）并且我搜索了书籍。现在我需要获取第三行的行数据，以及搜索文本（书籍）的下一个和上一个结果

预期结果如下

```
ID | BOOK     | AUTHOR | DATE
---------------------------
2  | pqrbooks | fbsdjf | 2013

3  | dnsaddds | fdsfbs | 2012

6  | tyrbooks | fdsdff | 2011 
```

寻找没有联合等的单个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:12:34.537

这应该有效：

```
select id, book, author, date
from t
where id = 3
      OR id = (SELECT MAX(id) FROM t WHERE id < 3)
      OR id = (SELECT MIN(id) FROM t WHERE id > 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:55:57.583

您可以`union`通过将所需的三行组合在一起来做到这一点：

```
(select id, book, author, date
 from t
 where id = 3
) union all
(select id, book, author, date
 from t
 where id < 3 and book like '%books%'
 order by id desc
 limit 1
) union all
(select id, book, author, date
 from t
 where id > 3 and book like '%books%'
 order by id
 limit 1
) 
```

# php - 在结帐中使用 Curl 停止重定向

> ID：16176856
> 
> 赞同：4
> 
> 时间：2013-04-23T18:43:41.793
> 
> 标签：php, magento, curl

我正在使用观察者`sales_order_save_after`来捕获订单信息并将其中的一些信息发送到另一个 Web 服务。

获得订单信息后，我在观察者中使用以下 curl 片段将信息发送到 Web 服务。信息发送正常，服务接收。然而浏览器仍然留在结帐页面，即使订单完成，用户也不会被重定向到成功页面。

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'https://myapp.com/');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER,array('Content-Type: application/json')); 
curl_setopt($ch, CURLOPT_POSTFIELDS, '{"field": 'data'}');
curl_setopt($ch, CURLOPT_USERPWD, 'blahblah:blahblah');

curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T03:23:29.687

所以问题是与 Curl 请求一起发送的标头意味着 Magento 无法将重定向的标头发送到成功页面。我无法解决这个问题，但经过大量谷歌搜索后，我找到了一个我更喜欢的解决方法。基本上，我使用 Zend Queue 功能对请求进行排队并获得一个 cron 来批量处理它们。

我喜欢请求异步工作的想法，以便用户在转发到成功页面之前无需等待 Web 服务获得回复。

这就是我想到的地方：

[http://www.kingletas.com/2012/08/zend-queue-with-magento.html](http://www.kingletas.com/2012/08/zend-queue-with-magento.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:52:53.647

`CURLOPT_FOLLOWLOCATION`并且`CURLINFO_EFFECTIVE_URL`可能有用。

像这样的东西：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'https://myapp.com/');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); // for redirects
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER,array('Content-Type: application/json')); 
curl_setopt($ch, CURLOPT_POSTFIELDS, '{"field": 'data'}');
curl_setopt($ch, CURLOPT_USERPWD, 'blahblah:blahblah');

curl_exec($ch);

$last_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); // get last effective URL

curl_close($ch);

header("Location: ".$last_url); // force browser to redirect 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T19:19:54.230

禁用所有输出，然后尝试。可能是 CURL 正在输出少量文本，甚至是空格，这会中断您的重定向。

```
<?php

error_reporting(E_ERROR); //this should disable all warnings. 
```

也尝试使用 file_get_contents 而不是 CURL。我经历过 CURL 在 file_get_contents 工作正常的情况下对我不起作用。虽然你必须确保它在 php.ini 中允许外部

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T21:49:02.847

必须在混合物中添加以下内容；否则，重定向到成功页面不起作用：

```
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true); 
```

这是 Observer.php 的一部分的完整工作代码块：

```
 $APIURL = 'https://example.com/submit.php';
        $UID = 'username';
        $APIKEY = 'password';
$fields = array(
    'uid'                   => $UID,
    'apikey'                => $APIKEY,
    'name'                  => $customerName,
);

//url-ify the data for the POST
$fields_string = http_build_query($fields);

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $APIURL);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_POST, 1);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post   
curl_exec($ch);
//close connection
curl_close($ch); 
```

# php - JpGraph：没有错误但图片损坏

> ID：16176858
> 
> 赞同：0
> 
> 时间：2013-04-23T18:43:46.053
> 
> 标签：php, jpgraph

我用 JPGraph 制作了一个图表，但我有一个小问题。

没有显示错误，但图片是“损坏的图片”。

这是我的代码：

```
$graph = new Graph(1000,300);
$graph->img->SetMargin(40,30,50,40);    
$graph->SetScale("textlin");
$graph->title->Set("Graph");

$graph->ygrid->Show();
$graph->ygrid->SetColor('blue@0.7');
$graph->ygrid->SetLineStyle('dashed');

$graph->xgrid->Show();
$graph->xgrid->SetColor('red@0.7');
$graph->xgrid->SetLineStyle('dashed');

$graph->title->SetFont(FF_ARIAL,FS_BOLD,11);

$bigCourbe = array();
$i = 0;
foreach($bigData as $data)
{
    var_dump($data);

    $courbe = new LinePlot($data);
    $courbe->value->Show();

    $courbe->value->SetFont(FF_ARIAL,FS_NORMAL,9);
    $courbe->value->SetFormat('%d');

    $courbe->mark->SetType(MARK_FILLEDCIRCLE);
    $courbe->mark->SetFillColor("green");
    $courbe->mark->SetWidth(2);

    $courbe->SetWeight(10);         

    echo $function[$i];
    $courbe->SetLegend($function[$i++]);

    $bigCourbe[] = $courbe;
}

$graph->xaxis->title->Set("Heures");
$graph->yaxis->title->SetFont(FF_FONT1,FS_BOLD);
$graph->xaxis->title->SetFont(FF_FONT1,FS_BOLD);

foreach ($bigCourbe as $elem) {
        $graph->Add($elem);
}

//$graph->Stroke(); 
```

所以，结果似乎不错：

```
array (size=24)
0 => string '0.000' (length=5)
1 => string '0.000' (length=5)
2 => string '0.000' (length=5)
3 => string '0.000' (length=5)
4 => string '0.000' (length=5)
5 => string '0.000' (length=5)
....
Index HC <- it's the $function[$i] var

array (size=24)
0 => string '0.200' (length=5)
1 => string '0.200' (length=5)
2 => string '0.100' (length=5)
3 => string '0.200' (length=5)
4 => string '0.200' (length=5)
5 => string '0.200' (length=5)
....
Index HP

array (size=24)
0 => string '0.000' (length=5)
1 => string '0.000' (length=5)
2 => string '0.000' (length=5)
3 => string '0.000' (length=5)
4 => string '0.000' (length=5)
5 => string '0.000' (length=5)
Index HPTE

array (size=24)
0 => string '0.200' (length=5)
1 => string '0.200' (length=5)
2 => string '0.100' (length=5)
3 => string '0.200' (length=5)
4 => string '0.200' (length=5)
5 => string '0.200' (length=5)
....
Total Heure 
```

我没有看到问题...

如果我删除调试，并取消注释 $graph->Stroke(); 线。我有这个 ：

![在此处输入图像描述](https://i.stack.imgur.com/4PUF5.png)

你能帮助我吗 ？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-04T17:26:34.560

就我而言（php 7.1.0），它是已弃用的消息

就放

```
ini_set('display_errors', 0); 
```

在脚本的顶部，然后重试。

或者

注释掉`$graph->Stroke();`，看看你有什么错误（或警告）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T01:46:56.983

你如何显示图表？你有 HTML 页面吗？请显示 HTML 代码。我有一个类似的问题，我没有错误消息，但得到损坏的图像图标。

[jpGraph 不能包含 PHP 文件](https://stackoverflow.com/questions/16530582/jpgraph-cant-include-php-file)

我推荐的一件事是添加行

```
//save to file
$fileName = "/tmp/imagefile.png";
$graph->img->Stream($fileName); 
```

如果文件中的图像正确，则可以排除图形生成代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T20:32:20.947

我知道这是一个老问题，但我只是遇到了同样的问题，并通过删除`<?php`.

这是在下面的链接中建议的 - 检查 1.b。

[解决方案来源](http://jpgraph.net/download/manuals/chunkhtml/ch03s07.html)

# r - 在R中，如何检测一列数据中的连续数据点，只有当它们连续出现超过x次时，它们的值>y？

> ID：16176860
> 
> 赞同：2
> 
> 时间：2013-04-23T18:43:53.227
> 
> 标签：r

我是一个初学者 R 用户，正在尝试找到一种方法来检测一列数据中的 x 个连续值，这些值的值 >=y。*示例：查找 4 个或更多连续数据点的值 >=2 的所有实例*

运行长度编码*rle()*命令看起来很有希望识别这些连续值：

```
rle(dataset>=2) 
```

但我找不到进一步设置长度为> = 4且值为“TRUE”的条件的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:54:32.627

```
 res <- rle(dataset>=2)
 which( res$lengths>=4 & res$values==TRUE] ) 
```

这将在结果的压缩表示中识别它们，`rle`然后您需要扩展该结果并选择序列的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:06:38.170

您可以简单地转换向量，然后使用 rle ：

```
res = rle(runif(1000, 0, 4) >= 2)
res
Run Length Encoding
  lengths: int [1:491] 2 2 2 2 3 1 3 2 7 1 ...
  values : logi [1:491] TRUE FALSE TRUE FALSE TRUE FALSE ... 
```

要获取运行所在向量中的索引，您可以使用以下技巧：

```
res$values = res$lengths > 4
inv_res = inverse.rle(res)
seq_along(inv_res)[inv_res]
  [1]   3   4   5   6   7   8   9  10  11  12  13  37  38  39  40  41  42  74
 [19]  75  76  77  78  79  80  81  82  83  84  85 108 109 110 111 112 142 143
 [37] 144 145 146 147 148 221 222 223 224 225 226 235 236 237 238 239 240 241
 [55] 278 279 280 281 282 305 306 307 308 309 310 311 312 313 314 315 316 317
 [73] 318 319 342 343 344 345 346 347 414 415 416 417 418 419 430 431 432 433
 [91] 434 435 449 450 451 452 453 472 473 474 475 476 477 478 523 524 525 526
[109] 527 545 546 547 548 549 561 562 563 564 565 566 567 568 569 607 608 609
[127] 610 611 612 613 625 626 627 628 629 630 646 647 648 649 650 651 652 699
[145] 700 701 702 703 765 766 767 768 769 770 771 772 773 789 790 791 792 793
[163] 794 795 800 801 802 803 804 810 811 812 813 814 850 851 852 853 854 855
[181] 869 870 871 872 873 879 880 881 882 883 904 905 906 907 908 909 919 920
[199] 921 922 923 949 950 951 952 953 954 955 956 957 958 959 960 961 
```

# android - 调用 getLastKnownLocation 时出现 SecurityException

> ID：16176862
> 
> 赞同：10
> 
> 时间：2013-04-23T18:43:55.757
> 
> 标签：android, android-location, android-maps-v2

`getLastKnownLocation`当用户打开调用位置管理器方法的 Activity 时，我们收到了一些设备上崩溃的报告。我们在应用程序清单中请求了所有必需的权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

这是堆栈跟踪：

```
java.lang.RuntimeException: Unable to resume activity {com.projectname/com.projectname.ui.AtmFinderActivity}: java.lang.SecurityException: invalid package name: com.google.android.gms
        at android.app.ActivityThread.performResumeActivity(ActivityThread.java)
        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java)
        at android.app.ActivityThread.access$600(ActivityThread.java)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java)
        at android.os.Handler.dispatchMessage(Handler.java)
        at android.os.Looper.loop(Looper.java)
        at android.app.ActivityThread.main(ActivityThread.java)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: invalid package name: com.google.android.gms
        at android.os.Parcel.readException(Parcel.java)
        at android.os.Parcel.readException(Parcel.java)
        at android.location.ILocationManager$Stub$Proxy.getLastLocation(ILocationManager.java)
        at android.location.LocationManager.getLastKnownLocation(LocationManager.java)
        at android.privacy.surrogate.PrivacyLocationManager.getLastKnownLocation(PrivacyLocationManager.java)
        at com.projectname.util.LocationUtils.getLastKnownLocation(SourceFile:48)
        at com.projectname.ui.AtmFinderFragment.initMapIfNeeded(SourceFile:401)
        at com.projectname.ui.AtmFinderFragment.onGooglePlayServicesAvailable(SourceFile:187)
        at com.projectname.maps.GoogleMapServicesUtil.getGooglePlayServicesStatus(SourceFile:40)
        at com.projectname.ui.AtmFinderFragment.onResume(SourceFile:149)
        at android.support.v4.app.FragmentManagerImpl.moveToState(SourceFile:917)
        at android.support.v4.app.FragmentManagerImpl.moveToState(SourceFile:1080)
        at android.support.v4.app.FragmentManagerImpl.moveToState(SourceFile:1062)
        at android.support.v4.app.FragmentManagerImpl.dispatchResume(SourceFile:1820)
        at android.support.v4.app.FragmentActivity.onPostResume(SourceFile:412)
        at com.actionbarsherlock.app.SherlockFragmentActivity.onPostResume(SourceFile:69)
        at android.app.Activity.performResume(Activity.java)
        ... 13 more 
```

以下是 LocationUtils 的相关方法：

```
public static Location getLastKnownLocation(Context context) {
    if (context != null) {
        LocationManager lm = (LocationManager) context.getSystemService(
                Context.LOCATION_SERVICE);

        // Get our last known location
        Location location = lm.getLastKnownLocation(
                LocationManager.NETWORK_PROVIDER);
        if (location == null) {
            location = lm.getLastKnownLocation(
                    LocationManager.GPS_PROVIDER);
        }
        return location;
    }
    return null;
} 
```

我们无法在我们手头的任何设备上重现此问题。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T18:45:09.200

在我看来，您可以通过使用[require 功能来防止它](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#hw-features)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T03:53:16.263

看一下这个。在这里，我实现了查找最后一个已知 gps 和最后一个已知网络位置的方法。 [https://github.com/thamaranga/GpsNew2/tree/master/GpsNew2](https://github.com/thamaranga/GpsNew2/tree/master/GpsNew2)

# python - Python - 如何安装 xlutils？

> ID：16176864
> 
> 赞同：4
> 
> 时间：2013-04-23T18:44:04.840
> 
> 标签：python, excel

我正在使用 Python 2.5（并且需要继续使用它）并且已经下载了 xlrd 0.8.0 和 xlwt 0.7.2，它们似乎都工作正常。

我将需要读取和写入 Excel 电子表格，因此相信我也需要添加 xlutils。问题是，到目前为止我无法安装它。

我有 pip 并尝试了简单的方法：

```
pip install xlutils 
```

那运行并下载了xlutils，但挂断了：

```
Downloading/unpacking xlutils
  Downloading xlutils-1.6.0.tar.gz (54Kb): 54Kb downloaded
  Running setup.py egg_info for package xlutils
Downloading/unpacking xlrd>=0.7.2 (from xlutils)
  Downloading xlrd-0.9.2.tar.gz (167Kb): 167Kb downloaded
  Running setup.py egg_info for package xlrd
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
      File "C:\Python25\Lib\site-packages\xlutils-1.6.0\build\xlrd\setup.py", li
ne 8, in <module>
        raise Exception("This version of xlrd requires Python 2.6 or above. "
    Exception: This version of xlrd requires Python 2.6 or above. For older versions of Python, you can use the 0.8 series.
... [snipping some]
----------------------------------------
Command python setup.py egg_info failed with error code 1 in C:\Python25\Lib\sit
e-packages\xlutils-1.6.0\build\xlrd 
```

因此，我认为它正在尝试下载更新的 xlrd（我*不能*与 Python 2.5 一起使用），并且由于我已经安装了 xlrd，因此它会中断。

然后我尝试从[https://pypi.python.org/pypi/xlutils](https://pypi.python.org/pypi/xlutils)下载 xlutils ，然后用 7zip 解压缩，将 xlutils 文件夹放在 Python25>Lib>site-packages 下，cd 在那里，然后做了：

```
python setup.py install 
```

但这在 cmd 窗口中给了我这个错误：

```
C:\Python25\Lib\site-packages\xlutils-1.6.0>python setup.py install
Traceback (most recent call last):
  File "setup.py", line 5, in <module>
    from setuptools import setup
ImportError: No module named setuptools 
```

**那么我该如何安装呢？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T20:51:27.107

首先，您不仅*需要* `xlutils`读写 Excel 文件。您可以阅读`xlrd`和编写它们，`xlwt`并在您自己编写的 Python 代码中提供您自己的“粘合剂”。

也就是说，`xlutils`确实提供了使某些东西比为自己编写更方便的功能（这就是它存在的意义）。`xlutils`所以我回答的第二部分是：您本身不需要“安装” 。您可以将其解压缩并将`xlutils`目录放入`site-packages`并关闭并运行。据我所知，几乎所有纯 Python 包都是如此。（其他一些包部分是用 C（或有时是其他语言）编写的，这些通常需要特定的安装步骤。）那么为什么纯 Python 包提供`setup.py`脚本呢？通常用于运行测试或构建`.pyc`文件，这两者都是可选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:11:43.740

xlutils 1.4.1 与 python 2.5 兼容。所以这应该工作：

```
pip install xlutils==1.4.1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T16:52:31.480

尝试安装 python-setuptools 包。

在 Debian 中： `sudo apt-get install python-setuptools`

对于 3.x 版本

```
sudo apt-get install python3-setuptools 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-23T06:38:00.963

`pip3 install xlutils`

使用 pip3 而不是 pip 为我解决了这个问题。

# perl - 请求和收集 (x) 人的姓名？

> ID：16176870
> 
> 赞同：-5
> 
> 时间：2013-04-23T18:44:16.790
> 
> 标签：perl, stdin

对于科学课上的一个项目，我正在用 Perl 制作一个游戏。这是我的游戏介绍

```
# Solar Game
# Copyright (c)2013 Donovan Roudabush
# Protected by GPU

print "  _________      .__                   ________                       \n";
print " /   _____/ ____ |  | _____ _______   /  _____/_____    _____   ____  \n";
print " \_____  \ /  _ \|  | \__  \\_  __ \ /   \  ___\__  \  /     \_/ __ \ \n";
print " /        (  <_> )  |__/ __ \|  | \/ \    \_\  \/ __ \|  Y Y  \  ___/ \n";
print "/_______  /\____/|____(____  /__|     \______  (____  /__|_|  /\___  > \n";
print "        \/                 \/                \/     \/      \/     \/ \n";
print "Version 1.0 Beta\n\n";
print "Developed by Donovan Roudabush\n";
print "https://github.com/sharksfan98/solargame\n\n";
print "Press enter to start\n";
$ok = <STDIN>;
chomp $ok;
print "Enter the number of players\n";
$num = <STDIN>;
chomp $num; 
```

现在，使用**$num**值（存储玩家数量），我如何打印出下面的行以获取 (x) 数量的玩家来收集他们的名字？

```
print "Please enter your name\n";
$name1 = <STDIN>;  # Name1 can also be Name 2 or Name3 for second or third player
chomp $name1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:48:58.197

[使用循环](http://perldoc.perl.org/perlsyn.html#Foreach-Loops)，您可以将名称存储在数组中：

```
my @names;
for (1 .. $num) {
    print "Please enter your name\n";
    my $name = <STDIN>;
    chomp $name;
    push @names, $name;
} 
```

# wpf - 如何在不阻塞 UI 的情况下向 WPF 程序添加延迟

> ID：16176871
> 
> 赞同：2
> 
> 时间：2013-04-23T18:44:31.693
> 
> 标签：wpf, user-interface, inotifypropertychanged, thread-sleep

我正在构建一个设备模拟器。当它启动时，它需要一些时间来初始化。这在逻辑上表现为打开并立即进入“初始化”状态，并在一段时间后进入“就绪”状态。

我正在使用 MVVM，因此 ViewModel 现在将代表所有设备逻辑。每个可能的状态都有一个由视图呈现的数据触发样式。如果我只是在构建视图模型时设置状态，则视图将以正确的外观呈现。

我要做的是创建一个“超时状态”，即当某些事件发生时（启动应用程序，点击某个按钮），设备进入一个固定时间的状态，然后回退到“准备就绪” ”，或“空闲”状态。

我考虑过使用睡眠，但睡眠会阻止 UI（他们说）。所以我考虑使用线程，但我不知道该怎么做。这是我到目前为止所得到的：

```
using System.ComponentModel;

namespace EmuladorMiotool {
    public class MiotoolViewModel : INotifyPropertyChanged {
        Estados _estado;

        public Estados Estado {
          get {
              return _estado;
          }
          set {
              _estado = value;
              switch (_estado) {
                  case Estados.WirelessProcurando:
                      // WAIT FOR TWO SECONDS WITHOUT BLOCKING GUI
                      // It should look like the device is actually doing something
                      // (but not indeed, for now)
                      _estado = Estados.WirelessConectado;
                      break;
              }
              RaisePropertyChanged("Estado");
          }
        }

        public MiotoolViewModel() {
            // The constructor sets the initial state to "Searching"
            Estado = Estados.WirelessProcurando;
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected virtual void RaisePropertyChanged(string propertyName) {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }

    }

    public enum Estados {
        UsbOcioso,
        UsbAquisitando,
        UsbTransferindo,
        WirelessNãoPareado,
        WirelessPareado,
        WirelessDesconectado,
        WirelessProcurando,
        WirelessConectado,
        WirelessAquisitando,
        DataLoggerOcioso,
        DataLoggerAquisitando,
        Erro,
        Formatando
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:03:14.467

首先在属性（getter/setter）中进行睡眠/异步操作被认为是不好的做法

在不阻塞 UI 线程的情况下试试这个作为 Sleep 的替代品：

创建要设置`Estado`为的函数`Estados.WirelessProcurando`

假设`WirelessProcurando`意味着初始化并且`WirelessConectado`意味着初始化

**.net45**：

```
private async Task SetWirelessProcurando(int milliSeconds) {
  Estado = Estados.WirelessProcurando;
  await Task.Delay(milliSeconds);
  Estado = Estados.WirelessConectado;
} 
```

我们让函数返回一个`Task`vs的原因`void`只是为了让调用者`await`在这个函数上需要它，如果逻辑需要它

如果您**不能**使用`await`：

```
private void SetWirelessProcurando(int milliSeconds) {
  Estado = Estados.WirelessProcurando;
  var tempTask = new Task
    (
    () => {
      Thread.Sleep(milliSeconds);
      System.Windows.Application.Current.Dispatcher.BeginInvoke(new Action(() => Estado = Estados.WirelessConectado));
    },
    System.Threading.Tasks.TaskCreationOptions.LongRunning
    );
  tempTask.Start();
} 
```

现在，每当您想更改设置器时调用此函数将立即将状态设置为“Intiialising”，并在给定`milliSeconds`切换到`Initialised`状态之后。

# css - 阻止浏览器自定义浏览按钮

> ID：16176873
> 
> 赞同：0
> 
> 时间：2013-04-23T18:44:36.370
> 
> 标签：css

如何防止浏览器自定义按钮，例如 Chrome 就可以。

![http://i.imgur.com/TeZxanR.jpg](https://i.stack.imgur.com/WWf0h.jpg)

我想删除那个“No f ... sen”。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:55:56.433

您可以在非 IE10+ 浏览器中删除文本部分以使其透明的唯一方法：

```
input[type=file] { color: transparent; } 
```

但是，我不建议这样做，因为在选择文件时您也将无法看到文本。

对于 IE10，您可以使用以下样式对其进行样式设置：

```
input[type=file]::-ms-value { /* styles here */ } 
```

在 WebKit 中，您可以使用以下方式设置按钮本身的样式：

```
input[type=file]::-webkit-file-upload-button { /* styles here */ } 
```

在 IE10 中，您可以执行以下操作：

```
input[type=file]::-ms-browse { /* styles here */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:48:35.813

尝试用谷歌搜索“Css 样式文件输入”；）

这将导致：[http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

的造型`<input type="file" />`真的很棘手。

# java - spring 3.0中如何将数据从控制器发送到jsp

> ID：16176874
> 
> 赞同：2
> 
> 时间：2013-04-23T18:44:52.780
> 
> 标签：java, spring-mvc

我正在尝试将数据发送到 jsp 但它不起作用

```
public class LoginPageController extends SimpleFormController
{
   public ModelAndView onSubmit(HttpServletRequest request,
       HttpServletResponse response, Object command, BindException errors)
       throws ServletException
   {
       Loginpage lcmd=(Loginpage)command;
       System.out.println("This is LOGIN PAGE");
       System.out.println(lcmd.getUserName());
       System.out.println(lcmd.getPassWord());
       request.setAttribute("MSG","Thank u"); //This code not doing anything.
       return new ModelAndView(new RedirectView("Login.jlc"));
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:11:29.183

您正在更改`request`对象，这确实无济于事。

您想要的是向**Model**添加一个变量。所以你可以这样做：

代替：

```
request.setAttribute("MSG","Thank u"); //This code not doing anything.
return new ModelAndView(new RedirectView("Login.jlc")); 
```

尝试这个：

```
Map<String, Object> model = new HashMap<String, Object>();
model.put("MSG", "Thank u");
return new ModelAndView(new RedirectView("Login.jlc"), model); // <-- notice this 
```

如果您将它们添加到地图中，这将使您能够`"Thank u"`通过表达式和其他值访问该值。`${model.MSG}``model`

# jquery - jquery load（）动态内容不起作用

> ID：16176880
> 
> 赞同：1
> 
> 时间：2013-04-23T18:45:01.523
> 
> 标签：jquery, dynamic, load

我有一个网站，其中包含多个图块，单击这些图块时，应将特定内容加载到网站上的另一个 div 中。内容位于我存储在每个磁贴的“rel”属性中的“id”引用的 php 页面上。例如：

```
<div id="tile" rel="1">tile 1 preview content</div>
<div id="tile" rel="2">tile 2 preview content</div>
<div id="tile" rel="3">tile 3 preview content</div> 
```

这是我正在尝试实现的 jquery：

```
$('#tile').on('click', function(){
    var projectId = $(this).attr('rel');
    $('#projectLoad').load('project.php?id='+projectId);
}); 
```

谁能帮我弄清楚为什么它不起作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:48:09.290

在您的示例中，所有 div 都具有相同的 id。Id 必须是唯一的。如果你给他们每个人一个唯一的 id，你的代码能工作吗？

```
<div id="tile1" rel="1">tile 1 preview content</div>
<div id="tile2" rel="2">tile 2 preview content</div>
<div id="tile3" rel="3">tile 3 preview content</div>

$('#tile1').on('click', function(){
    var projectId = $(this).attr('rel');
    $('#projectLoad').load('project.php?id='+projectId);
});

$('#tile2').on('click', function(){
    var projectId = $(this).attr('rel');
    $('#projectLoad').load('project.php?id='+projectId);
});

$('#tile3').on('click', function(){
    var projectId = $(this).attr('rel');
    $('#projectLoad').load('project.php?id='+projectId);
}); 
```

**注意**要测试这个功能，你可以试试这个 jQuery 代码：

```
$('#tile1').on('click', function(){ alert('hello from div 1'); });
$('#tile2').on('click', function(){ alert('hello from div 2'); });
$('#tile3').on('click', function(){ alert('hello from div 3'); }); 
```

正如 Palash 在他的回答中提到的，您可以通过使用 class 而不是 id 来避免这种重复。（类不必是唯一的。）

```
<div class="tile" rel="1">tile 1 preview content</div>
<div class="tile" rel="2">tile 2 preview content</div>
<div class="tile" rel="3">tile 3 preview content</div>

$('.tile').on('click', function(){
    var projectId = $(this).attr('rel');
    alert('hello from div ' + projectId);
}) 
```

这是一个显示这个简单测试的 jsFiddle - [http://jsfiddle.net/RHXGS/](http://jsfiddle.net/RHXGS/)

**从评论中添加了另一个独立的测试**

```
<!DOCTYPE html>
<html>

    <head>
        <title>Click Test</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                $('.div1').on('click', function () {
                    alert('Click!');
                    $('#div2').html('content');
                });
            });
        </script>
    </head>

    <body>
        <div class="div1">click me</div>
        <div id="div2"></div>
    </body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:49:25.113

使用 class 而不是 id 像这样：

```
<div id="tile" rel="1">tile 1 preview content</div>
<div id="tile" rel="2">tile 2 preview content</div>
<div id="tile" rel="3">tile 3 preview content</div> 
```

对此；

```
<div class="tile" rel="1">tile 1 preview content</div>
<div class="tile" rel="2">tile 2 preview content</div>
<div class="tile" rel="3">tile 3 preview content</div> 
```

和这样的js代码：

```
$('.tile').on('click', function(){
    var projectId = $(this).attr('rel');
    $('#projectLoad').load('project.php?id='+projectId);
}); 
```

`projectId`这次您每次单击 div 时都会得到一个，并且加载将起作用。
请始终尝试在 HTML 标记中使用唯一 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T18:47:58.607

看起来您正试图将内容加载到 ID 为“#projectload”的 div 中。您的代码中没有具有该 ID 的 div。

# sql - SQL REF Oracle 错误

> ID：16176882
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:05.180
> 
> 标签：sql, oracle, insert, ref

使用一些我将在下面展示的类型：

```
CREATE TYPE Course_objtype AS OBJECT (
Course_code VARCHAR2(4),
Course_name VARCHAR2(200),
Study_mode CHAR(2),
Campus REF Campus_list,
Faculty REF Faculty_list,
Director REF Staff_list
);

CREATE TYPE Campus_objtype AS OBJECT (
    Campus_ID NUMBER,
    Campus_code CHAR(1),
    Campus_name VARCHAR2(11),
    Phone_Number VARCHAR(20),
    Address Address_objtype
);

CREATE TYPE Faculty_objtype AS OBJECT (
Faculty_ID NUMBER,
Faculty_Name VARCHAR(200)
);

CREATE TYPE Staff_objtype AS OBJECT(
Staff_ID VARCHAR(7),
Person Person_objtype,
Staff_email VARCHAR2(200),
Office VARCHAR2(6),
Phone VARCHAR2(20),
Position VARCHAR2(15)
); 
```

我一直在尝试将下面的值插入到名为 Course_list 的表中，从链接到上述类型的表中继承值：

```
 INSERT INTO Course_list VALUES (
    '2136','Computing','FT',
    (SELECT REF(d) FROM Campus_list d WHERE d.Campus_code = 'C'),
    (SELECT REF(a) FROM Faculty_list a WHERE a.Faculty_ID = '3'),
    (SELECT REF(n) FROM Staff_list n WHERE n.Staff_ID = 'E129675')
); 
```

这让我回到了以下错误：

> ORA-22979: 无法插入对象视图 REF 或用户定义的 REF

有什么想法吗？我一无所知:(

# responsive-design - 如何将 Highslide JS 调整为新的响应式设计

> ID：16176884
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:24.393
> 
> 标签：responsive-design, highslide

大约 5 年前，我在这个网站上使用了 Highslide JS：[http](http://wela.ctc.edu/academy12-13.aspx) ://wela.ctc.edu/academy12-13.aspx （示例页面）。现在我正在使用 Twitter.Bootstrap 重新设计网站，并试图弄清楚如何调整 Highslide 弹出窗口以在较小的设备宽度下工作。这是可能的还是我应该使用找到另一种解决方案来实施？我在我的 highslide-with-html.js 文件中使用了设置参数，但结果并不令人满意。如果可以在响应式设计中使用 Highslide，请查看任何 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:02:10.923

简短的回答是，如果您打开图像，Highslide 非常适合小型设备。扩展器是专门为此而设计的——在不超出视口边界的情况下尽可能大地显示图像。

但是当打开其他任何东西时——带有 HTML 内容的扩展器、iframe 等——扩展器最初必须是固定大小的。您可以对其进行调整大小处理，但这并不足以处理从智能手机到大型显示器的所有内容。

在不重写 Highslide JS 的情况下，克服这个限制将需要您的页面自己检测视口大小，然后动态修改对 htmlExpand() 的调用，可能使用一些 jQuery 操作，或者更改 .highslide-html CSS 类宽度。后一种方法（针对 CSS）似乎更容易。

# dynamics-crm-2011 - 如何在导出解决方案时从不会中断的进程中引用队列？

> ID：16176885
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:25.527
> 
> 标签：dynamics-crm-2011, dynamics-crm

我有一些创建任务并通过创建队列项实体将它们放入队列的进程。由于解决方案中不包含队列，因此当我从 dev 导出并导入以测试进程时，会出现错误并且未激活。我必须通过这些过程，更新对队列的引用，并激活这些过程。

有没有办法从我导出和导入到另一个环境时不会中断的进程中引用队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:21:26.573

队列实体不支持解决方案，因此您无法在导出/导入期间保留链接。

解决此问题的最简单方法是确保`Queue.Id`队列的主键 Guid() 在每个组织中都相同。最简单的方法是遵循[Gonzalo Ruiz 的这些程序](http://gonzaloruizcrm.blogspot.com/2012/02/how-to-prevent-broken-workflow.html)。

另一种方法是以编程方式在每个环境中创建队列，以便您可以控制`Queue.Id`值。

```
public static Guid CreateQueue(ServerConnection.Configuration serverConfig, 
Guid id, string name) 
    { 
        using (OrganizationServiceProxy serviceProxy = new OrganizationServiceProxy(serverConfig.OrganizationUri, 
                                                               serverConfig.HomeRealmUri, 
                                                               serverConfig.Credentials, 
                                                               serverConfig.DeviceCredentials)) 
        { 
            IOrganizationService service = (IOrganizationService)serviceProxy; 

            Entity newQ = new Entity("queue"); 
            newQ.Id = id; 
            newQ["name"] = name; 

            Guid newqueueid = service.Create(newQ); 

            return newqueueid; 
        } 
    } 
```

此代码示例来自[从开发到测试和生产环境部署 Microsoft Dynamics CRM 2011 和 CRM Online 解决方案](http://www.microsoft.com/en-us/download/details.aspx?id=27824)，我强烈推荐给任何 Dynamics CRM 开发人员。

# html - 数组 [HTML5 Canvas] 上的填充样式

> ID：16176892
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:46.457
> 
> 标签：html, canvas

我有这个：

```
var ctx = canvas.getContext( '2d' );

....
....

ctx.fillStyle = 'blue'; 
```

我真正需要改变的是俄罗斯方块游戏的形状。它们是这样写的：

```
var shapes = [
[ 1, 1, 1, 1 ],

[ 1, 1, 1, 0,
  1 ],

[ 1, 1, 1, 0,
  0, 0, 1 ],

[ 1, 1, 0, 0,
  1, 1 ],

[ 1, 1, 0, 0,
  0, 1, 1 ],

[ 0, 1, 1, 0,
  1, 1 ],

[ 0, 1, 0, 0,
  1, 1, 1 ]
]; 
```

我想更改第一个的颜色，即 [1,1,1,1] 或形状 [0]，但我尝试过的都不起作用。ctx.fillStyle = '蓝色'; 有效，但它会改变所有对象的颜色。

现场版可以在这里查看：

[http://harlem-shake-it.com/tetris/](http://harlem-shake-it.com/tetris/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:39:31.880

从这段代码中，我假设您只希望当前对象为蓝色？

```
for (var y = 0; y < 4; ++y) {
    for (var x = 0; x < 4; ++x) {
        if (current[y][x]) {
            ctx.fillStyle = '#0068ff';
            drawBlock(currentX + x,currentY + y);
        }
    }
} 
```

如果是这种情况，您需要先使用 保存当前画布状态`ctx.save();`，使用 fillStyle，绘制块，然后使用`ctx.restore();`. 如果需要，这应该允许您用多种颜色填充块。或者，在这种情况下，将掉落的块渲染为黑色。

您[还应该声明一个 doctype](http://www.w3.org/html/wg/drafts/html/master/syntax.html#the-doctype) : `<!doctype html>`。并且[该`<center>`标签已被弃用。](http://www.w3schools.com/tags/tag_center.asp)您应该`text-align: center;`在 CSS 中继续使用，或者`margin: 0 auto;`取决于您的样式。

# visual-studio-2012 - 如何在不安装 Visual Studio 2012 的情况下使用 MsBuild 在构建服务器上构建 Visual Studio 2012 发布配置文件

> ID：16176894
> 
> 赞同：21
> 
> 时间：2013-04-23T18:45:54.140
> 
> 标签：visual-studio-2012, msbuild, build-automation, publishing

我在这里阅读了许多帖子，但从未找到有效的明确答案。所以在花时间让它工作之后，我想我应该发布它。

问题：发布配置文件将在服务器上构建，但不会发布。

解决方案：

1.  确保您安装了[Microsoft Windows SDK 和 .Net Framework 4](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

2.  从安装了 Visual Studio 2012 更新 2 的客户端计算机上，复制：

> ```
> \Program Files(x86)\MSBuild\Microsoft\Visual Studio\v11.0\Web\
> \Program Files(x86)\MSBuild\Microsoft\Visual Studio\v11.0\WebApplications\ 
> ```

到服务器上的同一位置。

然后制作一个简单的批处理文件：

> "C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe" /v:diag YOUPROJECT.sln /p:Configuration=Debug /p:DeployOnBuild=true /p:PublishProfile=YOURPROFILE

这适用于我们在多个构建服务器上。

我希望这可以帮助别人。

微软没有提供包含所有发布选项的 MSBuild 更新对我来说似乎很疯狂。在我看来，命令行工具在服务器上更重要....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-09T19:31:05.597

只是将戴夫的解决方案转变为答案。

> 解决方案：
> 
> 1.  确保您安装了[Microsoft Windows SDK 和 .Net Framework 4](http://www.microsoft.com/en-us/download/details.aspx?id=8279)
>     
>     
> 2.  从安装了 Visual Studio 2012 更新 2 的客户端计算机上，复制：
>     
>     
> 
> > ```
> > \Program Files(x86)\MSBuild\Microsoft\Visual Studio\v11.0\Web\
> > \Program Files(x86)\MSBuild\Microsoft\Visual Studio\v11.0\WebApplications\ 
> > ```
> 
> 到服务器上的同一位置。
> 
> 然后制作一个简单的批处理文件：
> 
> > "C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe" /v:diag YOUPROJECT.sln /p:Configuration=Debug /p:DeployOnBuild=true /p:PublishProfile=YOURPROFILE
> 
> 这适用于我们在多个构建服务器上。

# sublimetext2 - 如何使用用户片段覆盖 Sublime Text 2 中的默认自动完成设置？

> ID：16176896
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:56.497
> 
> 标签：sublimetext2, sublimetext

如果您开始输入`<ul>`，如果您按 Tab 键，它将自动完成`<ul></ul>`。由于几乎没有任何时候我没有任何列表项，因此我在选项卡上为“ul”创建了一个片段，该片段将返回：

```
<ul>
    <li>${1}</li>
</ul> 
```

到目前为止，我无法让 ti 工作，因为它恢复了默认值。此外，我经常需要使用很多类或其他我想添加为自动完成的属性，例如：

```
<div class="${1}" id="${2}"></div>
<input class="${1}" type="${2}" ${3:required} ${4:disabled} /> 
```

等你如何实现这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:24:25.763

您需要在此文件中注释掉“ul”和“UL”触发器：

```
~/Library/Application Support/Sublime Text 2/Packages/HTML/HTML.sublime-completions 
```

# c++ - 类类型的多维向量

> ID：16176897
> 
> 赞同：0
> 
> 时间：2013-04-23T18:45:58.373
> 
> 标签：c++, vector

当类型是类时，我需要一些关于向量向量的帮助。“loadTruck”是我的课。我想按以下顺序将我的类“loadTruck”中的值存储到二维向量中：向量（卡车，打印）。“卡车”和“打印”都是“loadTruck”类的类型。我想要访问这个向量：例如，让我们说“打印”是包装，“卡车”是卡车。我想获取有关卡车 1 中包裹的信息，包裹 ID 为 20。我对此感到非常困惑。

```
vector<vector <loadTruck>> jedinecTruck;
loadTruck truck;

while (warehouseIsEmpty == False)
{
    truck.resetTruck();
    for (int i = 0; i < numOfPackages; i++)
    {
        vector<loadTruck> print;
        if (store2D[i].checkIfPackageIsThere() == true)
        {
            truck.setPackageSize(store2D[i].getPackageWidth(), store2D[i].getPackageHeight());
            if (truck.checkIfPackageCanBeLoaded() == true)
            {
                print.push_back(truck);
                truck.loadPackageInTruck();
                store2D[i].deletePackage();
            }
        }
    }
    jedinecTruck.push_back(truck);

} 
```

3D数组版本，\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\这不是一个好主意，但我希望它能帮助你理解我想要做什么。我需要使用向量，因为我无法定义数组的前 2 个元素，它取决于算法并且总是在变化。对于这个例子，我假设前两个元素将被静态定义。第三个元素总是有 4 个组件。

```
 vector<loadTruck> jedinecTruck;
loadTruck truck;

int array[1][3][4];

while (wharehouseIsEmpty == false)
{

    truck.resetTruck();
    for (int i = 0; i < numOfPackages; i++)
    {
        if (store2D[i].checkIfPackageIsThere() == true)
        {
            truck.setPackageSize(store2D[i].getPackageWidth(), store2D[i].getPackageHeight());
            if (truck.checkIfPackageCanBeLoaded() == true)
            {
                truck.loadPackageInTruck();
                store2D[i].deletePackage();
                array[0][i][0] = truck.getActualX1();
                array[0][i][1] = truck.getActualX2();
                array[0][i][2] = truck.getActualY1();
                array[0][i][3] = truck.getActualY2();
            }
        }
    }
    jedinecTruck.push_back(truck);
  } 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:39:31.147

也许这更接近你想要做的事情：

```
vector<vector <loadTruck>> jedinecTruck;
loadTruck truck;

while (warehouseIsEmpty == False)
{
    truck.resetTruck();
    vector<loadTruck> print;
    for (int i = 0; i < numOfPackages; i++)
    {
        if (store2D[i].checkIfPackageIsThere() == true)
        {
            truck.setPackageSize(store2D[i].getPackageWidth(), store2D[i].getPackageHeight());
            if (truck.checkIfPackageCanBeLoaded() == true)
            {
                print.push_back(truck);
                truck.loadPackageInTruck();
                store2D[i].deletePackage();
            }
        }
    }
    jedinecTruck.push_back(print);

} 
```

不过，从你的问题中很难看出。

# c++ - 三次贝塞尔曲线实现

> ID：16176898
> 
> 赞同：0
> 
> 时间：2013-04-23T18:46:01.790
> 
> 标签：c++, c, graphics, bezier

我正在尝试创建一个三次贝塞尔补丁，并且在弄清楚我在哪里弄乱了计算时遇到了一些麻烦。我在二维数组中有 16 个控制点，我希望让网格有 400 个点，每个点以 0.05 的增量分隔。

控制点以 20 为增量（因此 P0,0 在 (0,0,0) 处，P3,3 在 (60, 0, 60) 处。网格将在 xz 平面上，y 坐标全为 0 .

现在我有以下内容，它在每个点上为 x 和 z 提供相同的值：

```
float Bezier3(int j, float k)
{
    switch(j) {
        case 0:
            return (1 - k) * (1 - k) * (1 - k);
            break;
        case 1:
            return 3*k*((1 - k) * (1 - k));
            break;
        case 2:
            return 3 * (k * k) * (1 - k);
            break;
        case 3:
            return k * k * k;
            break;
    }
}

void CalcBezier()
{
    float u;
    float v;
    for (int i = 0; i < 20; i++) {
        u = 0;
        v = 0;
        for (int j = 0; j < 20; j++) {
            for (int x = 0; x < 4; x++) {
                for (int y = 0; y < 4; y++) {
                    grid[i][j].x += control[x][y].x * Bezier3(x, u) * Bezier3(y, v);
                    grid[i][j].y += control[x][y].y * Bezier3(x, u) * Bezier3(y, v);
                    grid[i][j].z += control[x][y].z * Bezier3(x, u) * Bezier3(y, v);
                }
            }
            u+=.05;
            v+=.05;
        }
    }
} 
```

我不确定我哪里出错了。我试图在网格中按列行走并计算每个贝塞尔点。

我还尝试将生成的网格绘制为三角形网格：

```
void bezier_plane()
{
    CalcBezier();
    for (int i = 0; i < 19; i++) {
        for (int j = 0; j < 19; j++) {
            glBegin(GL_TRIANGLE_STRIP);
                glVertex3f(grid[i][j].x, grid[i][j].y, grid[i][j].z);
                glVertex3f(grid[i][j+1].x, grid[i][j+1].y, grid[i][j+1].z);
                glVertex3f(grid[i+1][j].x, grid[i+1][j].y, grid[i+1][j].z);
                glVertex3f(grid[i+1][j+1].x, grid[i+1][j+1].y, grid[i+1][j+1].z);
            glEnd();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:00:30.323

看起来您正在增加内部循环内的 u 和 v 。

尝试改变

```
 u+=.05;
        v+=.05;
    } 
```

到

```
 v+=.05;
    }
    u+=.05; 
```

并将复位移到循环外为零。

```
for (int i = 0; i < 20; i++) {
    u = 0;
    v = 0; 
```

到

```
 u = 0;
 for (int i = 0; i < 20; i++) {
    v = 0; 
```

# mysql - 将列值从一列复制到另一列

> ID：16176901
> 
> 赞同：0
> 
> 时间：2013-04-23T18:46:07.377
> 
> 标签：mysql, sql

我正在尝试从表 B 中的另一个类似列将数据复制到表 A 中的一列（现在为空）。我的一个条件是我只想从表 B 中不为空的列中复制值。

到目前为止，我有：

```
UPDATE a
    SET a.[null column] = b.[original column]
FROM A as a
INNER JOIN B as b
    ON a.id = b.idx 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:49:59.013

```
UPDATE a 
INNER JOIN b AS b ON b.idx = a.id
SET a.column_name = b.column_name
WHERE a.column_name IN NULL 
```

您可以使用这样的连接。如果有架构就更好了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:51:12.753

```
.... where b.[original column] is not null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:05:29.120

```
UPDATE a
SET a.[column] = b.[column]
FROM A as a
INNER JOIN B as b
on a.id = b.idx and b.[column] is not null 
```

# colors - 背景颜色，notepad++ 用于高亮显示

> ID：16176908
> 
> 赞同：9
> 
> 时间：2013-04-23T18:46:21.890
> 
> 标签：colors, notepad++, highlighting

Notepad ++中有没有办法突出显示一段文本并更改它的背景颜色？我希望它在编辑器中保持这种颜色以突出显示。我根本不希望颜色改变代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T22:41:28.587

您可以通过右键单击突出显示的片段并选择“样式标记”->“使用 (n)th 样式”来获得所需的效果。

这还将突出显示与您选择的代码相同的任何其他代码部分，这可能是也可能不是您想要的。但是，只要您在 notepad++ 中打开该文件，突出显示就会一直存在。如果关闭它，您将失去突出显示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-11T05:47:26.300

在记事本++

首先选择要突出显示的行/单词

转到“搜索”菜单

选择“全部标记”。在那里你会发现 5 个子菜单“使用 [1..5] 风格”。

（使用第一种样式：青色）。（第二个：浅棕色）。（第三：黄色）。（第 4 位：紫色）。（第 5 位：绿色）。

但是，只要您在 notepad++ 中打开该文件，突出显示就会一直存在。如果关闭它，您将失去突出显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T07:47:29.973

您还可以定义将片段设置为关键字并为其选择样式的语言。

# c# - 匿名类型的默认（T）行为

> ID：16176910
> 
> 赞同：4
> 
> 时间：2013-04-23T18:46:26.323
> 
> 标签：c#, unit-testing, generics

我正在针对我们的核心框架编写单元测试，并且遇到了这个问题。

我们有一个如下所示的扩展方法：

```
 public static T ThrowIfDefault<T>(this T self, string variableName)
    {
        if (self.Equals(default(T)))
            throw new ArgumentException(string.Format("'{0}' cannot be default(T)", variableName));
        return self;
    }   // eo ThrowIfDefault<T> 
```

（`ThrowIfNull<>`我在 Stack Overflow 上看到的扩展方法的一种变体。

在为此编写测试用例时，我首先编写了一个助手：

```
 public void ThrowIfDefaultTestHelper<T>(T value)
    {
        // unit test *itself* requires that a value be specified!!
        Assert.AreNotEqual(default(T), value);

        // Good test
        GenericExtensionMethods.ThrowIfDefault(value, "value");

        // Bad test
        try
        {
            GenericExtensionMethods.ThrowIfDefault(default(T), "value");
        }
        catch (ArgumentException)
        {
            // Expected result
        }
        catch (Exception)
        {
            throw;
        }
    } 
```

然后是以下内容：

```
 [TestMethod()]
    public void ThrowIfDefaultTest()
    {
        ThrowIfDefaultTestHelper<int>(10);
        ThrowIfDefaultTestHelper<Guid>(Guid.NewGuid());
        ThrowIfDefaultTestHelper<DateTime>(DateTime.Now);
        ThrowIfDefaultTestHelper<object>(new { Name = "Test" });    // anonymous object
    } 
```

单元测试在最后一个`NullReferenceException`被抛出时失败，因为我猜`object`没有`default(T)`（或者是吗？）。我不能用这种方式测试匿名对象吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T18:49:18.447

`object`确实有`default(T)`，只是碰巧有`null`。这与您使用不可为空值类型的其他测试用例不同。这就是为什么你得到一个`NullReferenceException`而不是你所期望的。

如果你更换

```
self.Equals(default(T)) 
```

和

```
EqualityComparer<T>.Default.Equals(obj, default(T)) 
```

你应该开始得到预期的`ArgumentException`.

# nsurl - NSURL 路径与绝对字符串

> ID：16176911
> 
> 赞同：70
> 
> 时间：2013-04-23T18:46:26.443
> 
> 标签：nsurl

我在 SO 上看到了很多关于在`NSURL`和之间转换的问题`NSString`。它们都涉及使用`NSString *path = [myURL absoluteString];`或`NSString *path = [myURL path];`。 **这些方法之间的实际区别是什么？** **有没有时候应该使用一个而不是另一个？** 我尝试咨询[Apple Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，但我发现它没有多大帮助。

我习惯于 URL 仅在有关网站和其他有关在不同机器之间发送信息的主题的讨论中被提及，而在处理单台机器上的文件结构时从未被提及。也许这就是我的一些困惑的来源，因为`NSURL`它似乎是访问文件的首选方式，无论该文件是否存在于网络或本地设备上。或者，也许这是一个完全不相关的话题。我什至不确定。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-04-23T20:27:47.073

## 问题一：

> 这些方法之间的实际区别是什么？

让我们分析一下这 6 行代码 - 3 行用于本地，3 行用于 http URL - 并稍微玩弄一下它们。

`NSURL`让我们使用该`file://`方案创建一个。如果您问自己为什么有 3 个`/`，`file:`那么您应该记住方案的完整 URL 存在（以及绝对或相对路径（您可以[在第 3 页的 RFC 1808](http://www.ietf.org/rfc/rfc1808.txt)`file://`中找到有关创建 URL 的更多信息）。我们使用以绝对路径开头有了 a ，我们最终得到。`/``///`

```
NSURL *aLocalURL = [NSURL URLWithString:@"file:///Users/dennis/Desktop/"];
NSLog(@"absolute string: %@", aLocalURL.absoluteString);
NSLog(@"path: %@", aLocalURL.path); 
```

**输出：**

> 绝对字符串：file:///Users/dennis/Desktop/
> 路径：/Users/dennis/Desktop

所以我们看到它`absoluteString`仍然知道它的方案，而`path`不再有这个信息。

*注意：* `path`是一个文件（目录）URL，并且作为[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/path)状态，它的尾部斜杠被剥离。

* * *

现在让我们看一下远程 URL。对于这些类型的 URL，大多数人都比较熟悉。我们使用与本地 URL 相同的过程来创建它。我们的计划是现在`http://`和我们`path`的`www.apple.com/`。

```
NSURL *anHTTPURL = [NSURL URLWithString:@"http://www.apple.com/"];  
NSLog(@"absolute string: %@", anHTTPURL.absoluteString);
NSLog(@"path: %@", anHTTPURL.path); 
```

**输出：**

> 绝对字符串： http: [//www.apple.com/](http://www.apple.com/)
> 路径：/

同样，我们看到绝对字符串仍然知道它的方案，但`path`现在是`/`. 因此`path`，在使用远程 URL 时似乎不是一种合适的方式。

但是，当我们得到一个赞`URL`时`http://www.apple.com/index.html`

> 绝对字符串： http: [//www.apple.com/index.html](http://www.apple.com/index.html)
> 路径：/index.html

阅读文档在这里也有帮助：

> 根据 RFC 3986，权限（主机名和端口）部分之后的前导斜杠被视为路径的一部分。

因此，在我们的例子中`path`，一切都从斜线开始（包括） 。`authority``www.apple.com`

* * *

## 问题2

> 有没有时候应该使用一个而不是另一个？

来自[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/path)：（方法`path`：）

> 如果此 URL 对象包含文件 URL（由 isFileURL 确定），则此方法的返回值适合输入到 NSFileManager 或 NSPathUtilities 的方法中。

在我看来，这句话*清楚地*表明你应该在使用or`path`时使用。`NSFileManager``NSPathUtilities`

* * *

## **结论：**

当您使用（通常）使用的*远程 URL*`absoluteString`时，否则结果不是您（通常）想要的。
当您使用*本地 URL*时，请使用`path`.

来源：
[http ://www.ietf.org/rfc/rfc1808.txt](http://www.ietf.org/rfc/rfc1808.txt)
[http://www.ietf.org/rfc/rfc3986.txt](http://www.ietf.org/rfc/rfc3986.txt)
[NSURL 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-18T18:15:52.567

还有一点需要注意，我只为 Swift 而`URL`不是`NSURL`. `relativeTo`网址格式：

```
URL(fileURLWithPath: aPath, relativeTo: URL) 
```

生成一个行为不完全像远程 URL（如上面的@HAS）而不像文件 URL 的 URL。

因此，例如：

```
let url0 = URL(fileURLWithPath: "/Foo")
let url1 = URL(fileURLWithPath: "Bar", relativeTo: url0)
print("\(url1.path)")
// Output: "/Bar\n" 
```

（类似于远程 URL 的结果，但不是文件 URL）。

如果我们使用`absoluteString`，我们会得到：

```
print("\(url1.absoluteString)")
// Output: "file:///Bar\n" 
```

（与文件 URL 或远程 URL 不同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-13T23:40:00.580

添加到 HAS 的响应中——Apple 文档提到基于路径的 URL 在某些方面更简单，但是文件引用 URL 的优点是，如果在您的应用程序运行时移动或重命名文件，引用仍然有效。

从“访问文件和目录”的文档中：

“基于路径的 URL 更容易操作、更容易调试，并且通常是 NSFileManager 等类的首选。文件引用 URL 的一个优点是，在您的应用程序运行时，它们比基于路径的 URL 不那么脆弱。如果用户在 Finder 中移动文件，任何引用该文件的基于路径的 URL 都会立即失效，必须更新到新路径。但是，只要文件移动到同一磁盘上的另一个位置，其唯一 ID 不会更改并且任何文件引用 URL 仍然有效。”

[https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html](https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html)

# bash - CD 弹出中断 - 可能吗？

> ID：16176912
> 
> 赞同：0
> 
> 时间：2013-04-23T18:46:26.617
> 
> 标签：bash, shell, drives

这可能看起来很荒谬，而且确实如此，但我有我的理由。

运行“eject -T”将打开/关闭 CD 托盘。但是命令的后续迭代会自动等待托盘物理完成功能（完全关闭/打开）。

我的问题......有没有办法中断这个并处理下一个命令？例如，让我们打开托盘约 300 毫秒，然后将其关闭。

我不介意使用其他语言来做到这一点，但任何人都可以向我发送正确的方向吗？技术文档？ETC...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:41:18.847

我查看了“eject”的来源，它调用 ioctl。所以在我看来，从那个层面上看是不可能的。我不熟悉 ioctl 代码，但我相信它不会做任何让你中断它的事情。我能想到的唯一选择是编写一个新的 CD 驱动程序……但即便如此，它也有可能是不可能的。您必须深入研究 Linux 内核才能找到方法。

# css - 如何使用 JSF 标签将图像包含到 css 文件中

> ID：16176914
> 
> 赞同：1
> 
> 时间：2013-04-23T18:46:32.627
> 
> 标签：css, jsf, jsf-2

我有这个将背景图像设置为 JSF 页面的 css 文件：

```
body { padding: 35px; background: #4c4c4c url(images/grad1.png) 0 0 repeat-x; color: #fff; font: 11px/normal Arial, Helvetica; } 
```

我想使用这个标签来包含图像作为 JSF 资源：

```
<h:graphicImage library="images" name="grad1.png" /> 
```

如何将图像作为 JSF 资源包含到 css 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:53:24.603

如果您的 CSS 文件是通过 加载的`<h:outputStylesheet>`，请使用`#{resource}`映射。

```
body {
    padding: 35px; 
    background: #4c4c4c url(#{resource['images/grad1.png']}) 0 0 repeat-x; color: #fff; 
    font: 11px/normal Arial, Helvetica;
} 
```

# .net - C# 接口和泛型

> ID：16176916
> 
> 赞同：1
> 
> 时间：2013-04-23T18:46:38.953
> 
> 标签：.net, generics, interface

我对泛型如何`T`在 C# 中工作感到困惑。除非我弄错了，否则它的行为似乎与 C++ 不同。我正在尝试为数据网关创建一个简单的接口：

**编辑**更新以匹配答案。Visual Studio 现在抱怨派生类没有实现接口方法。

```
public interface IDataGateway<T>
{
    void InsertRow(T row);
    void UpdateRow(T row);
    IEnumerable<T> GetTable();
}

public class LibraryGateway : IDataGateway<Media>
{
    public void InsertRow(Media item) { }
    public void Updaterow(Media item) { }
    public IEnumerable<Media> GetTable() { }
} 
```

我不知道会传递什么类型，这就是我尝试使用泛型的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:49:09.753

您正在单独声明每个方法的类型参数。您应该在接口类型本身上声明它。

```
public interface IDataGateway<T>
{
    void InsertRow(T row);
    void UpdateRow(T row);
    IEnumerable<T> GetTable(T table);
}

public class LibraryGateway : IDataGateway<Media>
{
    public void InsertRow(Media item) { }
    public void Updaterow(Media item) { }
    public IEnumerable<Media> GetTable() { }
} 
```

为了澄清，您当前的实现可以重写为：

```
public interface IDataGateway
{
    void InsertRow<T>(T row);
    void UpdateRow<U>(U row);
    IEnumerable<V> GetTable(V table);
} 
```

也就是说，不需要与和`T`相同。每个方法都由其自己的类型参数泛型化，但包含的接口类型本身不是泛型的。`U``V`

通过在类型本身上声明类型参数，您可以将方法的类型参数限制为在由子类实现时相同。在您似乎熟悉的 C++ 术语中，您当前的实现类似于三个单独的模板函数，而我的实现更类似于模板类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:48:57.617

看起来您正在尝试创建和实现通用接口，而不是通用方法。

```
public interface IDataGateway<T>
{
    void InsertRow(T row);
    void UpdateRow(T row);
    IEnumerable<T> GetTable(T table);
}

public class LibraryGateway : IDataGateway<Media>
{
    public void InsertRow(Media item) { }
    public void Updaterow(Media item) { }
    public IEnumerable<Media> GetTable(Media table) { }
} 
```

当您有一个泛型方法（如在原始问题中）时，这意味着可以使用任何类型的参数调用单个实现（例如`LibraryGateway.InsertRow`） - 仅在运行时知道。但是，当您实现一个通用接口时，您可以参数化该接口，以便`LibraryGateway.InsertRow`专门对 type 的项目进行操作`Media`。的其他实现`IDataGateway<T>`可以对其他类型进行操作，但`LibraryGateway`仅对`Media`对象进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:51:50.863

从您的示例中，我认为最好的方法是使接口本身通用，而不是其中的方法：

```
public interface IDataGateway<T>
{
  void InsertRow(T row);
  void UpdateRow(T row);
  IEnumerable<T> GetTable(T table); // ???
} 
```

我认为您的`GetTable()`方法也需要修复 - 如果`T`是表中包含的对象的类型，那么它（可能！）也不是表的类型。也许你的意思是`IEnumerable<T> GetTable();`？

然后你可以这样做：

```
public class LibraryGateway : IDataGateway<Media>
{
  public void InsertRow(Media item) { }
  public void UpdateRow(Media item) { }
  public IEnumerable<Media> GetTable() { }
} 
```

...我认为这应该可以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:49:45.120

您正在使用三个泛型方法定义一个非泛型接口。

这些方法中的每一个都具有接受任何类型的能力`T`，因为它们之间的值`T`不一样。

您可能打算做的是用三个非泛型方法定义一个泛型接口。

```
public interface IDataGateway<T>
{
    void InsertRow(T row);
    void UpdateRow(T row);
    IEnumerable<T> GetTable(T table);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:14:11.083

你错过了拼写 Updaterow，它应该是 UpdateRow。

实现接口的简单方法是，用鼠标点击接口名称，按 ctrl+。然后选择实现接口

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T18:49:32.013

首先，您必须使您的界面通用：

```
public interface IDataGateway<T> 
```

然后`T`在实现时指定：

```
public class LibraryGateway : IDataGateway<Media> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T18:59:33.490

大概是这样？

```
public interface IDataGateway<T>
{
    void InsertRow(T row);
    void UpdateRow(T row);
    IEnumerable<T> GetTable(T table);
}

public abstract class LibraryGateway<T>
{
    public void InsertRow(T item) { }
    public void Updaterow(T item) { }
    public IEnumerable<T> GetTable<T>() { }
}

public class MediaLibraryGateway : GateWay<Media>, IDataGateway<Media>
{

} 
```

# solr - Lucene/Solr：书籍文本搜索

> ID：16176918
> 
> 赞同：1
> 
> 时间：2013-04-23T18:46:42.420
> 
> 标签：solr, lucene, full-text-search

我正在尝试使用 Lucene/Solr 对结构类似书籍的文档进行全文搜索。一本书的结构如下：

```
Book
    - has many Chapters
        - has many Lines 
```

我可以将每一行文本作为单独的文档放入系统中，文本搜索工作正常。我遇到的问题是，有时查询分布在两行文本中，因此两行都没有很好地匹配并且没有匹配。

简单示例：

```
It was the best of times.
It was the worst of times. 
```

对“最好最差”的查询不会单独很好地匹配任何一条线，但它们会很好地匹配在一起。

Lucene（或更好的解决方案）有没有办法进行这种类型的结构化数据搜索？

# php - 正则表达式查找 target="_blank" 链接并在结束标记之前添加文本

> ID：16176921
> 
> 赞同：1
> 
> 时间：2013-04-23T18:46:47.727
> 
> 标签：php, regex, hyperlink

我需要能够解析一些文本并找到标记具有 target="_blank".... 的所有实例，并且对于每个匹配项，添加（例如）：此链接在结束标记之前的新窗口中打开。

例如：

前：

```
<a href="http://any-website-on-the-internet-or-local-path" target="_blank">Go here now</a> 
```

后：

```
<a href="http://any-website-on-the-internet-or-local-path" target="_blank">Go here now<span>(This link opens in a new window)</span></a> 
```

这是一个 PHP 站点，所以我假设 preg_replace() 将是方法......我只是没有正确编写正则表达式的技能。

提前感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T18:52:17.940

你不应该使用正则表达式来解析 HTML，除非在非常明确和受控的情况下。

相反，请尝试使用内置解析器：

```
$dom = new DOMDocument();
$dom->loadHTML($your_html_source);
$xpath = new DOMXPath($dom);
$links = $xpath->query("//a[@target='_blank']");
foreach($links as $link) {
    $link->appendChild($dom->createTextNode(" (This link opens in a new window)"));
}
$output = $dom->saveHTML(); 
```

或者，如果这是输出到浏览器，你可以只使用 CSS：

```
a[target='_blank']:after {
    content: ' (This link opens in a new window)';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T04:30:04.687

这将适用于锚标签替换....

```
$string = str_replace('<a ','<a target="_blank" ',$string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:07:02.957

@Kolink 是对的，但是有我的 RegExp 版本。

```
$string = '<p>mess</p><a href="http://google.com.br/" target="blank" class=\"bother\">Google</a><p>mess</p>';
echo preg_replace("/(\<a.*?target=\"blank\".*?>)(.*?)(\<\/a\>)/miU","$1$2(This link opens in a new window)$3",$string); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T20:08:49.560

这可以完成工作：

```
$newText = '<span>(This link opens in a new window)</span>';
$pattern = '~<a\s[^>]*?\btarget\s*=(?:\s*([\'"])_blank\1|_blank\b)[^>]*>[^<]*(?:<(?!/a>)[^<]*)*\K~i';
echo preg_replace($pattern, $newText, $html); 
```

然而，这种直接的字符串方法也可以替换 css 或 javascript 代码中的注释 html 部分、字符串或注释，并最终替换为 javascript 文字正则表达式，这充其量是不需要的，最坏的情况是根本不需要。这就是为什么如果你想避免这些陷阱，你应该使用 DOM 方法。您所要做的就是将一个新节点附加到具有所需属性的每个链接：

```
$dom = new DOMDocument;
libxml_use_internal_errors(true);
$dom->loadHTML($html);
$xp = new DOMXPath($dom);
$nodeList = $xp->query('//a[@target="_blank"]');

foreach($nodeList as $node) {
    $newNode = dom->createElement('span', '(This link opens in a new window)');
    $node->appendChild($newNode);
}

$html = $dom->saveHTML(); 
```

最后，最后一个选择是完全不更改 html 并使用 css：

```
a[target="_blank"]::after {
    content: " (This link opens in a new window)";
    font-style: italic;
    color: red;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-23T18:59:56.650

您将无法编写将评估无限长字符串的正则表达式。我建议：

```
$h = explode('>', $html); 
```

这将使您有机会像任何其他数组一样遍历它，然后执行以下操作：

```
foreach($h as $k){
    if(!preg_match('/^<a href=/', $k){
        continue;
        }elseif(!preg_match(/target="_blank")/, $k){
        continue;
        }else{
        $h[$k + 1] .= '(open in new window);
        }
    }
$html = implode('>', $h); 
```

这就是我处理此类问题的方式。当然，我只是把它从我的头顶扔掉了，并且保证可以按原样工作，但是对你的确切逻辑进行一些可能的调整，你就会得到你需要的东西。

# java - 带有 vert.x 的 http 基本身份验证

> ID：16176927
> 
> 赞同：5
> 
> 时间：2013-04-23T18:47:14.500
> 
> 标签：java, vert.x

我正在使用内置的 httpclient 向需要身份验证的外部服务发出“get”查询。更具体地说，我正在尝试从我的服务中提交查询到 splunk。如何在请求中传递用户凭据？我想使用基本身份验证而不是处理身份验证令牌。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-27T10:31:11.793

基本身份验证是关于授权标头的。

您应该在该标头中添加一个由“basic”（注意空白）和您的 login:pass（用冒号分隔）组成的值，以 base64 编码。仅当您使用 HTTPS 时，这才是安全的。

这是我在 vert.x 中完成此操作的方法：

```
HttpClient client = vertx.createHttpClient().setSSL(true)
    .setTrustAll(true) //You may not want to trust them all
    .setHost("api.myawesomeapi.com")
    .setPort(443);
HttpClientRequest clientRequest = client.get("/"+action+"/?"+params, new Handler<HttpClientResponse>() {
            public void handle(final HttpClientResponse response) {
                if (response.statusCode==200){
                    // It worked !
                } else {
                    // Oops
                }
            }
        });

clientRequest.putHeader(HttpHeaders.Names.AUTHORIZATION, "Basic "+base64key); 
```

这里我已经有了base64key，但如果我必须创建它，我会使用类似的东西：

```
base64key = Base64.encodeBytes(new StringBuilder(apiKey).append(":").append(secretKey).toString().getBytes(), Base64.DONT_BREAK_LINES); 
```

如果您使用 POST 而不是 get，请不要忘记添加所需的标题：

```
clientRequest.putHeader(HttpHeaders.Names.CONTENT_LENGTH, String.valueOf(params.getBytes().length))
        .putHeader(HttpHeaders.Names.CONTENT_TYPE, "application/x-www-form-urlencoded")
        .write(params); 
```

我希望它有帮助

雨果

# visual-studio-2012 - “ProviderPackage”包未正确加载

> ID：16176933
> 
> 赞同：74
> 
> 时间：2013-04-23T18:47:36.677
> 
> 标签：visual-studio-2012

我安装了 Visual Studio 2012 并在以后安装了 Update 2。安装 Update 2 后，当我加载任何项目时，我收到以下错误：

> ---------------------------------------
> Microsoft Visual Studio
> -------------------- --------
> 'ProviderPackage' 包没有正确加载。
> 
> 该问题可能是由配置更改或安装另一个扩展引起的。您可以通过检查文件“C:\Users\username\AppData\Roaming\Microsoft\VisualStudio\11.0\ActivityLog.xml”来获取更多信息。
> 
> 继续显示此错误信息？
> --------------------------
> 是 否
> --------- ------

找到 后`ActivityLog.xml`，我看到以下一组错误：

```
<entry>
    <record>300</record>
    <time>2013/04/23 18:32:54.002</time>
    <type>Information</type>
    <source>VisualStudio</source>
    <description>Begin package load [ProviderPackage]</description>
    <guid>{5F2E5E42-4192-4D79-A0D8-1D881E808829}</guid>
</entry>
<entry>
    <record>301</record>
    <time>2013/04/23 18:32:54.012</time>
    <type>Error</type>
    <source>VisualStudio</source>
    <description>SetSite failed for package [ProviderPackage]</description>
    <guid>{5F2E5E42-4192-4D79-A0D8-1D881E808829}</guid>
    <hr>80131522</hr>
    <errorinfo>Method 'GetHostedIntellisenseTypes' in type 'Microsoft.VisualStudio.Progression.DTEWrapperCached' from assembly 'Microsoft.VisualStudio.GraphProviderPackage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' does not have an implementation.</errorinfo>
</entry>
<entry>
    <record>302</record>
    <time>2013/04/23 18:32:54.012</time>
    <type>Error</type>
    <source>VisualStudio</source>
    <description>End package load [ProviderPackage]</description>
    <guid>{5F2E5E42-4192-4D79-A0D8-1D881E808829}</guid>
    <hr>80131522</hr>
    <errorinfo>Method 'GetHostedIntellisenseTypes' in type 'Microsoft.VisualStudio.Progression.DTEWrapperCached' from assembly 'Microsoft.VisualStudio.GraphProviderPackage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' does not have an implementation.</errorinfo> 
```

谷歌搜索没有发现我的问题完全匹配。我尝试在安装 ISO 上搜索包，但找不到需要修复的包...

```
F:\packages>dir /s *provider*
 Volume in drive F is VS2012_ULT_MSDN_ENU
 Volume Serial Number is 4A21-C8BD

 Directory of F:\packages\SSDT

   07/26/2012  11:30 AM           780,288 DbSqlPackageProvider.msi
               1 File(s)        780,288 bytes

     Total Files Listed:
               1 File(s)        780,288 bytes
               0 Dir(s)               0 bytes free 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-10-17T13:29:13.033

*   关闭 Visual Studio。
*   打开 Visual Studio 2012 的开发人员命令提示符（以管理员身份）。
*   键入`devenv /setup`。
*   重新启动 Visual Studio。

Visual Studio 2012 错误的可能重复项*[：无法加载包“Visual C++ 包”](https://stackoverflow.com/questions/17819613/vs2012-error-package-visual-c-package-failed-to-load)*

请参阅*[Visual C++ 包：加载失败？？？？？？](http://happyivyli.blogspot.co.uk/2013/07/visual-c-package-failed-to-load.html)*

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-08-13T17:59:29.337

**这是上面 Aaron (Aaron Reed) 的答案，只是作为答案复制而不是问题的一部分：**

修好了……*修好了……*修好了……

1.  打开的程序和功能（运行：appwiz.cpl）
2.  已安装应用程序的排序列表按：安装日期
3.  通过将“SQL”添加到右上角的搜索过滤器来过滤列表
4.  项目清单

我在 2013 年 4 月 1 日安装了 VS2012，所以我浏览了列表中每个列出的 SQL 项，然后右键单击 --> 修复

从那里我运行 VS2012 并毫无问题地打开了目标解决方案文件。

我的列表：

*   Microsoft SQL Server 2012 数据层应用程序框架
*   Microsoft SQL Server 数据工具 - enu (11.1.20627.00)
*   Microsoft SQL Server 2012 管理对象 (x64)
*   适用于 SQL Server 2012 (x64) 的 Microsoft System CLR 类型
*   适用于 SQL Server 2012 的 Microsoft System CLR 类型
*   Microsoft SQL Server 2012 管理对象
*   Microsoft SQL Server 2012 Transact-SQL 编译器服务
*   Microsoft SQL Server 2012 命令行实用程序
*   Microsoft SQL Server Data Tools 构建实用程序 - enu (11.1.206...
*   Microsoft SQL Server Compact 4.0 SP1 x64 ENU
*   Microsoft SQL Server 2012 T-SQL 语言服务
*   Microsoft SQL Server 2012 本机客户端
*   Microsoft SQL Server 2012 数据层应用程序框架
*   Microsoft SQL Server 2012 Express 本地数据库
*   Microsoft SQL Server 2012 Transact-SQL SpriptDom

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-02-17T07:35:29.420

这对我有用 -

为了解决这个问题，需要清除以下 Visual Studio 缓存：

```
%LOCALAPPDATA%\Microsoft\VisualStudio\11.0\ComponentModelCache 
```

感*[谢博文 SetSite failed for package [Microsoft.VisualStudio.Editor.Implementation.EditorPackage]](http://kuebiko.blogspot.in/2013/07/setsite-failed-for-package.html)*。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-06T05:04:17.080

通常这可以通过清除下面的 Visual Studio 缓存来解决：

视觉工作室 2012：`%LOCALAPPDATA%\Microsoft\VisualStudio\11.0\ComponentModelCache`

视觉工作室 2013：`%LOCALAPPDATA%\Microsoft\VisualStudio\12.0\ComponentModelCache`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-13T15:13:51.680

我通过卸载或删除解决了这个问题：

Microsoft SQL Server 数据工具 - enu (14.0.50325.0)

我希望这有帮助 ：）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-13T02:37:32.663

更快的修复方法是简单地修复列表中的 Microsoft SQL Server。这解决了我的问题。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-01-17T05:20:35.803

为我工作。Window7 SP1 + VS 2013 打开 VS 2012 的开发人员命令提示符（以管理员身份）。运行 devenv /setup。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-30T09:21:05.970

感谢*wayne.blackmon*评论，卸载/修复 SQL Server 数据工具是唯一对我有用的东西。

下图

[![卸载 SQL Server 数据工具](https://i.stack.imgur.com/Bsw8H.png)](https://i.stack.imgur.com/Bsw8H.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-12-12T17:01:35.557

我在适用于 Windows 8.1 的 Visual Studio 2013 中遇到了同样的问题。

以前的答案对我不起作用。我不得不修复 Visual Studio，然后重新启动我的机器。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-09-13T18:08:43.417

对我来说，`ActivityLog.xml`所述

```
<errorinfo>Access to the path 'C:\Users\Klas\Documents\Visual Studio
2015\ArchitectureExplorer' is denied.</errorinfo> 
```

当我检查这个文件夹时，我意识到这里的整个文件夹结构

```
C:\Users\Klas\Documents\Visual Studio 2015 
```

设置了权限，因此我的用户没有写权限。我为我的用户添加了对该文件夹和以下所有内容的完全控制权限。

在那之后，消息消失了。此外，当我启动 Visual Studio 时，它为此文件夹创建了许多子文件夹。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-04T06:42:12.330

在我的情况下，问题出现在我安装 Visual Studio 2015 之后。从那时起，无论是 2015 年，还是以前版本的 Visual Studio 都不会加载。问题是 PATH 环境变量超过了 MAX 长度。

我将它缩短到小于 2048 并重新启动机器。Visual Studio 开始加载，但仍有一些错误。最后运行`devenv /setup`，一切恢复正常。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-15T14:02:39.023

我在 Visual Studio 启动时收到此错误：

`the 'visual studio component model host package' did not load correctly...`

在那一堆其他`The '' package did not load correctly...`错误消息之后。

我意识到安装 Visual Studio 的 C 驱动器上没有足够的可用空间。

我打开了一些空间并重新启动了 Visual Studio，解决了这个问题。

不确定它是否与磁盘上的可用空间有关。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-20T19:36:58.603

我刚刚遇到了类似的错误（在 Windows 7 上。我安装了 Visual Studio 2015 Professional，然后在我运行 Visual Studio 2012 时开始出现几条“...包未正确加载”消息）。

解决我的问题是修复“Microsoft Studio Tools for Applications 2012”。

1.  运行“appwiz.cpl”（*控制面板*→*程序*→*卸载程序*
2.  右键单击“Microsoft Studio Tools for Applications 2012。选择“更改”，然后单击“修复”。

[![控制面板 - 程序](https://i.stack.imgur.com/KE1xo.jpg)](https://i.stack.imgur.com/KE1xo.jpg)

在此之后，我可以打开 Visual Studio 2012 而不会出现这些错误消息。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-30T15:34:37.543

我有一个类似的错误。在我更新到 VS2012.U2 后，问题就消失了。如果不删除 TFS，则无法删除 TFS 2012 更新 2。虽然我在从 TFS2012.U1 升级到 U2 时遇到问题，但我发现 TFS2012.U2 是值得的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-30T03:09:15.587

另一个建议，

以管理员身份运行，然后重新启动 VS 应用程序。

应用包更新。重启。

希望这可以帮助！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-13T07:57:38.957

这是我的 %USERPROFILE% 目录的访问权限问题（因为 PC 出现故障）。将权限设置为完全访问修复了它。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-10-02T19:21:31.673

从[MSDN 论坛](https://social.msdn.microsoft.com/Forums/vstudio/en-US/3757edf1-5cef-434c-be6b-0a8ade1a7aad/visualstudio-2012-crash-on-start-driver-common-package-error?forum=visualstudiogeneral)：

*   请打开 Windows 资源管理器，然后导航到 <Visual Studio 安装路径>\Common7\IDE

*   Devenv.exe /SafeMode：以安全模式启动 IDE，加载最少的窗口。

*   Devenv.exe /ResetSettings：恢复 IDE 的默认设置，可选择重置为指定的 VSSettings 文件。

*   Devenv.exe /ResetAddin：删除与指定加载项关联的命令和命令 UI。

*   Devenv.exe /ResetSkipPkgs：清除添加到 VSPackages 的所有 SkipLoading 标记。

如果仍然没有帮助，我建议您尝试修复 Visual Studio 安装或将其卸载然后重新安装。如果要重新安装，恐怕需要DVD或良好的互联网。

做前三个步骤对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-10-22T16:59:54.520

我得到了“幸运”并重新启动了 Visual Studio 2013，它成功了。我还有其他错误，删除临时缓存项将其清除。

边注。虽然 Visual Studio 2015 尚不完美，而且 NuGet 对使用 IMO 变得不那么友好，但如果我的计算机由公司域网络管理员重新启动，或者特别是当计算机因断电而断电时电源 Visual Studio 2013 修复起来有点“有趣”，而几个月来的 Visual Studio 2015 项目似乎可以正常打开，就好像我登录时没有发生任何事情一样。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-06T19:00:38.153

就我而言，我通过删除`<C:\Users\myuser\Documents>`.

# c++ - 为什么我的“while”条件没有得到满足？

> ID：16176949
> 
> 赞同：1
> 
> 时间：2013-04-23T18:48:37.880
> 
> 标签：c++, loops, while-loop, stack, postfix-notation

我一直在运行它并输入“12+”作为表达式。当它进入 while 循环时，它会卡住，就好像条件从未满足一样。我不明白为什么这是因为在 while 循环之前“它”等于 2，所以甚至不应该使用循环。

```
//array based stack implementation
class Stack
{
private:
    int capacity;        //max size of stack
    int top;            //index for top element
    char *listArray;       //array holding stack elements

public:
    Stack (int size = 50){ //constructor
        capacity = size;
        top = 0;
        listArray = new char[size];
    }

    ~Stack() { delete [] listArray; } //destructor

    void push(char it) {    //Put "it" on stack
        listArray[top++] = it;
    }
    char pop() {   //pop top element
        return listArray [--top];
    }

    char& topValue() const { //return top element
        return listArray[top-1];
    }

    char& nextValue() const {//return second to top element
        return listArray[top-2];
    }

    int length() const { return top; } //return length

};

int main()
{
    string exp;
    char it = ' ';
    int count;
    int push_length;

    cout << "Enter an expression in postfix notation:\n";
    cin >> exp;
    cout << "The number of characters in your expression is " << exp.length() << ".\n";
    Stack STK;

    for(count= 0; count < exp.length() ;count++)
    {

        if (exp[count] == '+')
        {
            it = exp[count - 1];
            cout << it << "\n";

            while (it != 1 || it != 2 || it != 3 || it != 4 || it != 5 || it != 6 || it != 7 || it != 8 || it != 9 || it != 0)
            {
                cout << it << "\n";
                it = exp[count--];
            }

            STK.push(it);
            //cout << STK.topValue() << "\n";

            it = exp[count --];
            if (it == 1 || it == 2 || it == 3 || it == 4 || it == 5 || it == 6 || it == 7 || it == 8 || it == 9 || it == 0){
                STK.push(it);
                cout << it;
            }
            cout << STK.topValue() << "\n";
            it = STK.topValue() + STK.nextValue();
            STK.pop();
            STK.pop();
            STK.push(it);
            cout << STK.topValue() << "\n";

        }

    }
    cout << "The number of characters pushed into the stack is " << STK.length() << ".\n";
    push_length = STK.length();

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:54:26.683

正如您所提到的，您的`while`子句总是`true`.

```
while (it != 1 || it != 2 || it != 3 || it != 4 || it != 5 || it != 6 || it != 7 || it != 8 || it != 9 || it != 0) 
```

`it`永远**不会**是**那些数字中的一些**。

您*可以*在该语句中将every 更改`||`为`&&`，因为这可能是您的意思。并更改`1`为`'1'`,`2`到`'2'`, 等等...

更清晰的方法是：

```
while ( !std::isdigit(it) ) 
```

[http://en.cppreference.com/w/cpp/string/byte/isdigit](http://en.cppreference.com/w/cpp/string/byte/isdigit)

# python-3.x - 如何在 Python 3 中使用 lxml？

> ID：16176954
> 
> 赞同：3
> 
> 时间：2013-04-23T18:48:49.627
> 
> 标签：python-3.x, lxml

在我的项目中，我需要使用`lxml.etree`. 我是 Python 的新手，所以我不明白如何找到带有某个标签的所有类别。让我们更准确地描述它。

我有一个像这样的 XML：

```
<cinema>
  <name>BestCinema</name>
  <films>
    <categories>
      <category>Action</category>
      <category>Thriller</category>
      <category>Soap opera</category>
    </categories>
  </films>
</cinema> 
```

现在我需要获取所有类别的列表。在这种情况下，它将是：

```
 <category>Action</category>
      <category>Thriller</category>
      <category>Soap opera</category> 
```

我需要使用：

```
tree = etree.parse(file) 
```

谢谢，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:02:43.983

它应该很简单：

```
from lxml import etree
el = etree.parse('input.xml')
categories = el.xpath("//category")
print(categories)
... 
```

您应该在[教程](http://lxml.de/tutorial.html)中找到的所有其他内容。

# macros - lisp代码宏输出中的引号

> ID：16176962
> 
> 赞同：0
> 
> 时间：2013-04-23T18:48:57.523
> 
> 标签：macros, lisp, common-lisp

我怎样才能得到类似的东西：

```
(my-macro name) => (foo "foo-transformed-arg-name") 
```

我只得到

```
(foo \#" foo-transformed-arg-name \#") 
```

如何避免宏输出中的 #"？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:39:15.963

```
(defmacro foo (sym)
  (symbol-name sym)) 
```

或者

```
(defmacro foo (sym)
  (string-downcase (symbol-name sym))) 
```

我不明白你为什么需要这样的宏，但你会最清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:39:57.917

这可能是你想要做的：

```
(defmacro static-string (func &rest characters)
  `(,func ,(coerce characters 'string))) 
```

如果您需要定义一些字符串常量而不是在运行时创建它们，也许这可能是有意义的......

这是我认为您能够得出当前结果的唯一方法：

```
(defmacro quote-symbol-quote (func symbol)
  (list func #\" symbol #\")) 
```

Stackoverflow 突出显示具有误导性。您在结果中得到的是一个使用三个参数调用的函数：引号字符、符号`foo-transformed-arg-name`和引号字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:33:03.863

决议非常简单。我真正的问题是如何将宏的 mi 参数符号转换为字符串。

```
(my-macro foo) => (other-func "foo") 
```

那就是将 sybol foo 转换为“FOO”。为此，我使用了**符号名称**功能

# php - 为什么存储在 mysql 中的单词 docs 显示时没有分页符？

> ID：16176966
> 
> 赞同：2
> 
> 时间：2013-04-23T18:49:04.260
> 
> 标签：php, docx, .doc

我将 .docx 文件作为 largeblob 存储在 mysql 数据库中，存储在单独的块中（以免溢出每个 blob）。然后在 php 中，我在将数据库中的块“粘合”在一起后显示文档。一切看起来都很好，只是文档似乎没有分页符，这是尝试将其导出到其他程序时出现的问题。任何人都知道如何在那里获得分页符或我哪里出错了？

```
<?
$username=xxx;
$password=xxx;
$database=xxx;

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die("Unable to select database");

$doc=$_GET['doc'];
header('Content-type: application/vnd.openxmlformats-officedocument.wordprocessingml.document');
$request = mysql_query("SELECT docData FROM tblDoc WHERE doc='$doc' ORDER BY pieceOrder ASC");
while($row=mysql_fetch_array($request)) {
    echo $row['docData'];
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:00:03.030

DOCX 文件只是一个重命名的 ZIP 文件，其中包含许多 XML 文件和其他资产。如果您拆分文件进行上传，然后以正确的顺序重新组合以进行下载，则与最初上传的文件应该没有任何差异。但是，如果重新组装文件时出现错误，它很可能根本不会打开。真正删除分页符的唯一方法是从一些内部 XML 文件中删除那些特定的 XML 标记。

然而，这可能是一个长镜头，在 MS Word 窗口的右下角、缩放滑块的左侧有五个小图标，指示您用于查看文档的视图。（同样可以通过 Ribbon 中的 View -> Document Views 访问。）（具体细节可能会因 Word 版本而异。）现在，默认是第一个，*打印布局*，然后是*全屏阅读*，*Web 布局*，*大纲*和*草稿*。对于来自 Web 的文档，您的 Word 副本是否有可能自动打开*Web 布局*？（*Web 布局*没有分页符。）

还有两件事：

1.  您还应该添加一个`Content-Disposition`标头以指示应下载此文件（您还可以指定将在其中保存的文件名）：

    ```
    $filename = 'example.docx';
    header('Content-Disposition: attachment; filename='.$filename); 
    ```

2.  你不应该使用[mysql_](http://php.net/manual/en/book.mysql.php)**功能，它们已被弃用，它们存在安全风险并导致无法维护的代码。最好使用[mysqli_](http://php.net/manual/en/book.mysqli.php)*或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)进行数据库访问。[更多在这里。](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T20:10:32.250

事实证明，一切都保存得很好。正如你所说，@pilsetnieks。就在那时，当我从我的应用程序导出时，我没有将它分配为正确的类型，所以它没有期待它得到的格式。感谢你的帮助！*

# c++ - 调度基于 Posix 的线程

> ID：16176972
> 
> 赞同：0
> 
> 时间：2013-04-23T18:49:14.573
> 
> 标签：c++, multithreading, posix

我在 linux 中使用基于 posix 的线程来监听非阻塞套接字。我想在特定的时间段内调用这个线程，例如 0.01 秒。有什么办法可以做到吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:08:07.203

您可以在 0.01 秒内使用 select() 或 pselect() 函数。这样你的线程可以等待一个套接字（阻塞或非阻塞，没关系）。当 select() 返回时，它将告诉您套接字是否已准备好，或者在分配的超时时间内是否没有发生任何事情。

# javascript - D3.js 识别节点之间的链接以改变链接粗细

> ID：16176978
> 
> 赞同：1
> 
> 时间：2013-04-23T18:49:28.493
> 
> 标签：javascript, graph, svg, d3.js

我一直在设置图表以根据 svg 或边界框的宽度和高度动态缩放，并且使用节点和节点边框，这相对简单。通过使用 d.depth 并分配所需的比率以将相对半径分配给某个深度的节点，这不会给我带来任何问题，并且较低深度的节点会变得更小以避免重叠。然后，对于节点边界，我指定了节点半径和边界厚度之间的比率。

这已被证明是解决通过缩放容器添加缩放功能时出现的问题的理想解决方案。这就是问题：

![在此处输入图像描述](https://i.stack.imgur.com/hlgwx.jpg)

文本、节点和节点边界不再聚集在一起，但链接保持相同的权重。

我还想缩放节点之间边缘的厚度，但我不知道如何识别边缘，以便我可以分配与父节点或子节点的半径相关的厚度

```
d3.json("aviation.json", function(root) {
  var nodes = balloon.nodes(root),
      links = balloon.links(nodes);

var link= svg.selectAll("path")
    .data(links)
  .enter().append("path")
    .attr("d",diagonal)
    .attr("stroke", "black")
    .attr("shape-rendering", "auto")
    .attr("fill", "none")
    .data(nodes)
    .attr("stroke-width", function(d) {return (1/5000*diameter);});

  var node = svg.selectAll("g.node")
    .data(nodes)
    .enter()
    .append("g")
    .attr("class", "node");

  node.append("circle")
      .attr("r", function(d) { return d.r;})
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("fill", "white")
      .attr("opacity", "0.05")
      .attr("stroke-width", function(d) {return d.r/600;}) //here I am referecing d.r 
                                                          //to find the stroke width.
      .attr("stroke-opacity", ".5")
      .on("Click", function(d) { return zoomClick});

var text = svg.selectAll("g.text")
      .data(nodes)
      .enter()
      .append("text")
      .attr("dx", function(d) { return d.x })
      .attr("dy", function(d) { return d.y })
      .attr("font-family", "Helvetica")
      .attr("font-size", function(d)  {return d.children ? d.r/7 : d.r/4;})                          
      .attr("stroke-width", function(d) {return d.r/400;})
      .attr("stroke-opacity", "1")
      .attr("fill", "white")
      .attr("pointer-events", "all")
      .style("text-anchor", "middle")
      .text(function(d) { return d.name; }) 
```

# php - 变量的全局范围似乎不起作用

> ID：16176980
> 
> 赞同：0
> 
> 时间：2013-04-23T18:49:33.357
> 
> 标签：php

在自定义 Joomla 2.5 模块中，我有这个：

```
$username   = $params->get('username'   ,   '');
$password   = $params->get('password'   ,   '');
$url    = $params->get('url'        ,   'http://api.xxxxx.com'); 
```

所以，我记得 config.xml 中的变量。

我写了这个函数：

```
function callAPI($data) {
global $username, $password, $url;
$data['username']   = $username;
$data['password']   = $password;
$data['output']     = 'XML';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
$result = curl_exec($ch);
curl_close ($ch);
$parsed_result = new SimpleXMLElement(str_replace('&','&amp;',$result));
return $parsed_result;
} // function callAPI($data) 
```

而且......它不起作用......错误是

```
PHP Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML 
```

如果我手动添加 $url 在函数中......它完成了他的工作：

```
function callAPI($data) {
global $username, $password, $url;
$url = 'http://api.xxxxxx.com';
$data['username']   = $username;
$data['password']   = $password;
$data['output']     = 'XML';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
$result = curl_exec($ch);
curl_close ($ch);
$parsed_result = new SimpleXMLElement(str_replace('&','&amp;',$result));
return $parsed_result;
} // function callAPI($data) 
```

显然，我确定 $username 和 $password 填充了正确的值，因为如果我添加 $url，我的网络服务器会响应。所以我怀疑只有一个问题在于“url”值。

我需要解决我的问题。在函数“callAPI”中，$url 是空白的。在第一部分，在 $params->get $url 正确填满了我的 url 之后。

谢谢

# python - 我在制作 add 方法时遇到问题

> ID：16176982
> 
> 赞同：0
> 
> 时间：2013-04-23T18:49:40.473
> 
> 标签：python, python-3.x

我的代码：

```
class Test(object):
    def __init__(self, number):
        self.number = number
    def __str__(self):
        return "This number is {}".format(self.number)
    def __add__(self, second):
        self.number = self.number + second.number
        return self
c1 = Test(1)
c2 = Test(2)
c2 = c1 + c2
print(c2)
print(c1) 
```

输出：

```
This number is 3
This number is 3 
```

我的麻烦是，当我尝试添加它们时，它会更改 c1 和 c2。我如何保持 c1 不变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:50:37.580

返回一个新对象：

```
class Test(object):
    def __init__(self, number):
        self.number = number

    def __str__(self):
        return "This number is {}".format(self.number)

    def __add__(self, second):
        return Test(self.number + second.number) 
```

请注意，当您`c2`像这样重新绑定时：

```
c2 = c1 + c2 
```

失去了原有的价值。使用您的代码，`c1`和`c2`都将指向第一个`Test`对象（从's`c1 + c2`返回）。`self``c1``__add__`

使用我的代码，原来的第二个对象将被删除，一个新对象将被绑定到`c2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:05:56.027

您的问题在于您在`__add__`方法中修改了 self 。你不应该那样做（虽然你可以这样做，因为 Python 认为所有相关的人都是“同意的成年人”......有时，这将是正确的解决方案。虽然我想不出它会是）

并且`self`在您的`__add__`方法中绑定到 c1，因此您修改 c1; 然后你把它分配给c2。

尝试`print(c1 is c2)`在最后添加。它将打印`True`.

Pavel 的`__add__`行为与一种`__add__`方法应该是一样的。

# css - twitter bootstrap 下拉 z-index 和透明度可见性问题

> ID：16176988
> 
> 赞同：0
> 
> 时间：2013-04-23T18:49:59.420
> 
> 标签：css, twitter-bootstrap, drop-down-menu, z-index

我的 twitter bootstrap 下拉菜单隐藏在项目下方以及它的透明度时遇到问题。示例： http: [//pictorious-web-qa.herokuapp.com](http://pictorious-web-qa.herokuapp.com)

![在此处输入图像描述](https://i.stack.imgur.com/bNlss.png)

1.  当屏幕缩小到大约 400 像素宽时，菜单 z-index 位于个人资料照片下方。我检查了媒体查询，但找不到任何 z-index 设置。

    有关示例，请参见[http://pictorious-web-qa.herokuapp.com/profiles/albert 。](http://pictorious-web-qa.herokuapp.com/profiles/albert)

2.  我想在菜单导航中保持半透明，但想提高下拉菜单项的不透明度。我直接在菜单容器上设置了不透明度，但这似乎并没有改变任何东西。

3.  如果将屏幕宽度缩小到导航栏菜单与视频重叠的位置，该菜单也会与主页[http://www.pictorious.com上的 vimeo 视频存在 z-index 问题。](http://www.pictorious.com)我还尝试将 z-index 设置为无济于事，并且不确定如何在 vimeo 默认 iframe 嵌入技术中设置 wmode

这是一个标准的推特引导导航：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="/">Pictorious!</a>
      <div class="btn-group pull-right" id="nav-login">
            <a class="btn"  href="/login">Sign-In</a>
      </div>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="/">Home</a></li>
          <li><a href="/challenges">Challenges</a></li>
                    <li><a href="/about">About</a></li>

                        <form class="navbar-search pull-left form-search" action="/search">
                            <input type="text" class="search-query span2" placeholder="Search" name="keyword">
                        </form>
                    </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div> 
```

重叠照片上唯一似乎发生变化的是较小媒体查询的边距和填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:50:15.217

所以答案是我需要在默认引导轮播中将位置设置为相对，这就是它不受我的 z-index 属性影响的原因。

```
position: relative; z-index:-1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:53:12.190

即使您找不到 z-index 设置，您也可以通过稍后在 CSS 中编写另一个同名的类或 ID 来覆盖它们——只需在此处创建另一个 z-index。尝试将顶部元素的 z-index 设置得较低，并将底部元素的 z-index 设置得较高。

# android - 将位置地址记录到 LogCat

> ID：16176989
> 
> 赞同：0
> 
> 时间：2013-04-23T18:50:04.577
> 
> 标签：android, eclipse, location, logcat

我的应用程序的一部分正在尝试更新位置（在 Eclipse 中使用带有模拟器的 DDMS），然后获取要打印到 LogCat 的地址。

我的代码：

```
LocationManager locationManager;
String providerName = LocationManager.GPS_PROVIDER;
LocationProvider gpsProvider;

public void enable()
{
locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); //Need to ask for this system service

    Criteria criteria = new Criteria(); //Setting the criteria for the location provider
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_HIGH);
    criteria.setAltitudeRequired(true);
    criteria.setBearingRequired(true);
    criteria.setSpeedRequired(true);
    criteria.setCostAllowed(true);

    String provider = LocationManager.GPS_PROVIDER;
    int time = 5000; //Time in ms
    int distance = 5; //Distance in meters

    LocationListener myLocationListener = new LocationListener()
    {
        public void onLocationChanged(Location locations)
        {
            updateLocation(locations);

        }

        public void onProviderDisabled(String arg0) 
        {
            // TODO Auto-generated method stub
        }

        public void onProviderEnabled(String arg0) 
        {
            // TODO Auto-generated method stub
        }

        public void onStatusChanged(String arg0, int arg1, Bundle arg2) 
        {
            // TODO Auto-generated method stub
        }
    };

    locationManager.requestLocationUpdates(provider, time, distance, myLocationListener);

}
/////////////////////////////////////////////////////////////////////////////////

public void findLocation()
{
    gpsProvider = locationManager.getProvider(providerName);

   //String bestProvider = locationManager.getBestProvider(criteria, true);

    Location locations = locationManager.getLastKnownLocation(providerName);

    updateLocation(locations);

}

public void updateLocation(Location locations)
{
    if (locations != null)
    {
        Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());

        double latitude = locations.getLatitude();
        double longitude = locations.getLongitude();

        List<Address> addresses = null;
        Geocoder GCoder = new Geocoder(this, Locale.getDefault());
        try
        {
            addresses = GCoder.getFromLocation(latitude, longitude, 10);

            Address first = addresses.get(0);

            Log.d("ADDRESS", first.toString());
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }            
    }
} 
```

对我来说，这应该将值“first”打印到 LogCat 中，但它似乎实际上并没有显示任何内容。

我在清单中有所需的权限，所以这不是问题。

可以提供的任何帮助都很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:14:24.030

使用此代码

**请参阅更新的代码**

```
 LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
 String provider = locationManager.getBestProvider(new Criteria(), true);
 Location locations = locationManager.getLastKnownLocation(provider);
 List<String>  providerList = locationManager.getAllProviders();
 if(null!=locations && null!=providerList && providerList.size()>0){                 
    double longitude = locations.getLongitude();
    double latitude = locations.getLatitude();
 Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());                 
try {
  List<Address> listAddresses = geocoder.getFromLocation(latitude, longitude, 1);
  if(null!=listAddresses&&listAddresses.size()>0){
     String _Location = listAddresses.get(0).getAddressLine(1);
  }
  } catch (IOException e) {
    e.printStackTrace();
  } 
```

}

# php - PHP 中正确的存储库模式设计？

> ID：16176990
> 
> 赞同：333
> 
> 时间：2013-04-23T18:50:05.320
> 
> 标签：php, database, laravel, repository, repository-pattern

*前言：我正在尝试在具有关系数据库的 MVC 架构中使用存储库模式。*

我最近开始学习 PHP 中的 TDD，我意识到我的数据库与我的应用程序的其余部分耦合得太紧密了。我已经阅读了有关存储库并使用[IoC 容器](http://laravel.com/docs/4.2/ioc)将其“注入”到我的控制器中的信息。很酷的东西。但是现在有一些关于存储库设计的实际问题。考虑以下示例。

```
<?php

class DbUserRepository implements UserRepositoryInterface
{
    protected $db;

    public function __construct($db)
    {
        $this->db = $db;
    }

    public function findAll()
    {
    }

    public function findById($id)
    {
    }

    public function findByName($name)
    {
    }

    public function create($user)
    {
    }

    public function remove($user)
    {
    }

    public function update($user)
    {
    }
} 
```

## 问题 #1：字段过多

所有这些查找方法都使用全选字段 ( `SELECT *`) 方法。但是，在我的应用程序中，我总是试图限制我获得的字段数量，因为这通常会增加开销并减慢速度。对于那些使用这种模式的人，你如何处理这个问题？

## 问题 #2：方法太多

虽然这个类现在看起来不错，但我知道在现实世界的应用程序中我需要更多的方法。例如：

*   findAllByNameAndStatus
*   findAllInCountry
*   findAllWithEmailAddressSet
*   查找AllByAgeAndGender
*   findAllByAgeAndGenderOrderByAge
*   等等。

如您所见，可能有一个非常非常长的可能方法列表。然后，如果您在上面添加字段选择问题，问题就会恶化。在过去，我通常只是将所有这些逻辑都放在我的控制器中：

```
<?php

class MyController
{
    public function users()
    {
        $users = User::select('name, email, status')
            ->byCountry('Canada')->orderBy('name')->rows();

        return View::make('users', array('users' => $users));
    }
} 
```

使用我的存储库方法，我不想以这样的方式结束：

```
<?php

class MyController
{
    public function users()
    {
        $users = $this->repo->get_first_name_last_name_email_username_status_by_country_order_by_name('Canada');

        return View::make('users', array('users' => $users))
    }

} 
```

## 问题 #3：无法匹配接口

我看到了将接口用于存储库的好处，因此我可以换掉我的实现（用于测试目的或其他目的）。我对接口的理解是它们定义了实现必须遵循的契约。在您开始将其他方法添加到您的存储库（如`findAllInCountry()`. 现在我需要更新我的界面以使其也具有此方法，否则其他实现可能没有它，这可能会破坏我的应用程序。这感觉很疯狂……尾巴摇着狗的情况。

### 规范模式？

这让我相信存储库应该只有固定数量的方法（如`save()`, `remove()`, `find()`,`findAll()`等）。但是，我该如何运行特定的查找呢？我听说过[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)，但在我看来，这只会减少一整套记录（通过`IsSatisfiedBy()`），如果您从数据库中提取，这显然会产生重大的性能问题。

## 帮助？

显然，在使用存储库时，我需要重新考虑一些事情。任何人都可以启发如何最好地处理？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-04-26T13:45:44.123

我想我会尽力回答我自己的问题。以下只是解决我最初问题中问题 1-3 的一种方法。

*免责声明：在描述模式或技术时，我可能并不总是使用正确的术语。对此感到抱歉。*

## 目标：

*   创建一个用于查看和编辑的基本控制器的完整示例`Users`。
*   所有代码都必须是完全可测试和可模拟的。
*   控制器应该不知道数据存储在哪里（意味着可以更改）。
*   显示 SQL 实现的示例（最常见）。
*   为了获得最佳性能，控制器应该只接收他们需要的数据——没有额外的字段。
*   实现应该利用某种类型的数据映射器来简化开发。
*   实现应该具有执行复杂数据查找的能力。

## 解决方案

我将我的持久存储（数据库）交互分为两类：**R**（读取）和**CUD**（创建、更新、删除）。我的经验是读取确实是导致应用程序变慢的原因。尽管数据操作 (CUD) 实际上速度较慢，但​​它发生的频率要低得多，因此也不那么令人担忧。

**CUD**（创建、更新、删除）很容易。这将涉及使用实际[模型](http://en.wikipedia.org/wiki/Data_model)，然后将其传递给我`Repositories`的持久性。请注意，我的存储库仍将提供 Read 方法，但仅用于创建对象，而不是显示。稍后再谈。

**R**（读）不是那么容易。这里没有模型，只有[值对象](http://en.wikipedia.org/wiki/Value_object)。[如果您愿意](https://stackoverflow.com/questions/14130964/database-results-as-objects-or-arrays)，请使用数组。这些对象可能代表单个模型或多个模型的混合，实际上是任何东西。这些本身并不是很有趣，但是它们是如何生成的。我正在使用我正在调用的内容`Query Objects`。

## 编码：

### 用户模型

让我们从我们的基本用户模型开始。请注意，根本没有 ORM 扩展或数据库的东西。只是纯粹的模特荣耀。添加你的 getter、setter、validation 等等。

```
class User
{
    public $id;
    public $first_name;
    public $last_name;
    public $gender;
    public $email;
    public $password;
} 
```

### 存储库接口

在我创建我的用户存储库之前，我想创建我的存储库界面。这将定义存储库必须遵循的“合同”才能被我的控制器使用。请记住，我的控制器不会知道数据实际存储在哪里。

请注意，我的存储库将只包含这三种方法。该`save()`方法负责创建和更新用户，仅取决于用户对象是否设置了 id。

```
interface UserRepositoryInterface
{
    public function find($id);
    public function save(User $user);
    public function remove(User $user);
} 
```

### SQL 存储库实现

现在创建我的接口实现。如前所述，我的示例将使用 SQL 数据库。请注意使用[数据映射器](http://en.wikipedia.org/wiki/Data_mapper_pattern)来避免编写重复的 SQL 查询。

```
class SQLUserRepository implements UserRepositoryInterface
{
    protected $db;

    public function __construct(Database $db)
    {
        $this->db = $db;
    }

    public function find($id)
    {
        // Find a record with the id = $id
        // from the 'users' table
        // and return it as a User object
        return $this->db->find($id, 'users', 'User');
    }

    public function save(User $user)
    {
        // Insert or update the $user
        // in the 'users' table
        $this->db->save($user, 'users');
    }

    public function remove(User $user)
    {
        // Remove the $user
        // from the 'users' table
        $this->db->remove($user, 'users');
    }
} 
```

### 查询对象接口

现在有了我们的存储库处理的**CUD**（创建、更新、删除），我们可以专注于**R**（读取）。查询对象只是某种类型的数据查找逻辑的封装。他们**不是**查询构建器。通过像我们的存储库一样抽象它，我们可以更改它的实现并更容易地对其进行测试。查询对象的一个​​示例可能是`AllUsersQuery`or `AllActiveUsersQuery`，甚至是`MostCommonUserFirstNames`。

您可能在想“我不能在我的存储库中为这些查询创建方法吗？” 是的，但这就是我不这样做的原因：

*   我的存储库用于处理模型对象。`password`在现实世界的应用程序中，如果我想列出所有用户，为什么还需要获取该字段？
*   存储库通常是特定于模型的，但查询通常涉及多个模型。那么你将你的方法放在哪个存储库中？
*   这使我的存储库非常简单——而不是臃肿的方法类。
*   所有查询现在都组织到它们自己的类中。
*   实际上，在这一点上，存储库的存在只是为了抽象我的数据库层。

对于我的示例，我将创建一个查询对象来查找“AllUsers”。这是界面：

```
interface AllUsersQueryInterface
{
    public function fetch($fields);
} 
```

### 查询对象实现

这是我们可以再次使用数据映射器来帮助加快开发的地方。请注意，我允许对返回的数据集（字段）进行一次调整。这大约是我想要操纵执行的查询的程度。请记住，我的查询对象不是查询生成器。他们只是执行特定的查询。但是，由于我知道我可能会在许多不同的情况下经常使用这个，所以我让自己能够指定字段。我从不想返回我不需要的字段！

```
class AllUsersQuery implements AllUsersQueryInterface
{
    protected $db;

    public function __construct(Database $db)
    {
        $this->db = $db;
    }

    public function fetch($fields)
    {
        return $this->db->select($fields)->from('users')->orderBy('last_name, first_name')->rows();
    }
} 
```

在继续讨论控制器之前，我想展示另一个示例来说明它的强大功能。也许我有一个报告引擎，需要为`AllOverdueAccounts`. 这对我的数据映射器来说可能很棘手，我可能想`SQL`在这种情况下写一些实际的东西。没问题，这是这个查询对象的样子：

```
class AllOverdueAccountsQuery implements AllOverdueAccountsQueryInterface
{
    protected $db;

    public function __construct(Database $db)
    {
        $this->db = $db;
    }

    public function fetch()
    {
        return $this->db->query($this->sql())->rows();
    }

    public function sql()
    {
        return "SELECT...";
    }
} 
```

这很好地将我对这个报告的所有逻辑都集中在一个类中，并且很容易测试。我可以尽情地模拟它，甚至完全使用不同的实现。

### 控制器

现在是有趣的部分——把所有的部分放在一起。请注意，我正在使用依赖注入。通常依赖项被注入到构造函数中，但我实际上更喜欢将它们直接注入到我的控制器方法（路由）中。这最小化了控制器的对象图，实际上我发现它更清晰。请注意，如果您不喜欢这种方法，只需使用传统的构造方法即可。

```
class UsersController
{
    public function index(AllUsersQueryInterface $query)
    {
        // Fetch user data
        $users = $query->fetch(['first_name', 'last_name', 'email']);

        // Return view
        return Response::view('all_users.php', ['users' => $users]);
    }

    public function add()
    {
        return Response::view('add_user.php');
    }

    public function insert(UserRepositoryInterface $repository)
    {
        // Create new user model
        $user = new User;
        $user->first_name = $_POST['first_name'];
        $user->last_name = $_POST['last_name'];
        $user->gender = $_POST['gender'];
        $user->email = $_POST['email'];

        // Save the new user
        $repository->save($user);

        // Return the id
        return Response::json(['id' => $user->id]);
    }

    public function view(SpecificUserQueryInterface $query, $id)
    {
        // Load user data
        if (!$user = $query->fetch($id, ['first_name', 'last_name', 'gender', 'email'])) {
            return Response::notFound();
        }

        // Return view
        return Response::view('view_user.php', ['user' => $user]);
    }

    public function edit(SpecificUserQueryInterface $query, $id)
    {
        // Load user data
        if (!$user = $query->fetch($id, ['first_name', 'last_name', 'gender', 'email'])) {
            return Response::notFound();
        }

        // Return view
        return Response::view('edit_user.php', ['user' => $user]);
    }

    public function update(UserRepositoryInterface $repository)
    {
        // Load user model
        if (!$user = $repository->find($id)) {
            return Response::notFound();
        }

        // Update the user
        $user->first_name = $_POST['first_name'];
        $user->last_name = $_POST['last_name'];
        $user->gender = $_POST['gender'];
        $user->email = $_POST['email'];

        // Save the user
        $repository->save($user);

        // Return success
        return true;
    }

    public function delete(UserRepositoryInterface $repository)
    {
        // Load user model
        if (!$user = $repository->find($id)) {
            return Response::notFound();
        }

        // Delete the user
        $repository->delete($user);

        // Return success
        return true;
    }
} 
```

## 最后的想法：

这里要注意的重要事项是，当我修改（创建、更新或删除）实体时，我正在使用真实的模型对象，并通过我的存储库执行持久性。

但是，当我显示（选择数据并将其发送到视图）时，我使用的不是模型对象，而是普通的旧值对象。我只选择我需要的字段，它的设计是为了最大限度地提高我的数据查找性能。

我的存储库保持非常干净，相反，这个“混乱”被组织到我的模型查询中。

我使用数据映射器来帮助开发，因为为常见任务编写重复的 SQL 是很荒谬的。但是，您绝对可以在需要的地方（复杂的查询、报告等）编写 SQL。当你这样做时，它很好地隐藏在一个正确命名的类中。

我很想听听你对我的方法的看法！

* * *

***2015 年 7 月更新：***

我在评论中被问到我在哪里结束了这一切。嗯，其实也没有那么远。老实说，我仍然不太喜欢存储库。我发现它们对于基本查找来说太过分了（特别是如果你已经在使用 ORM），并且在处理更复杂的查询时会很混乱。

我通常使用 ActiveRecord 样式的 ORM，所以通常我会在我的应用程序中直接引用这些模型。但是，在我有更复杂的查询的情况下，我将使用查询对象来使这些更可重用。我还应该注意，我总是将我的模型注入我的方法中，使它们更容易在我的测试中模拟。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-04-23T22:33:47.237

根据我的经验，以下是您问题的一些答案：

**问：**我们如何处理带回我们不需要的字段？

**答：**根据我的经验，这实际上归结为处理完整的实体与临时查询。

一个完整的实体就像一个`User`对象。它具有属性和方法等。它是代码库中的一等公民。

即席查询返回一些数据，但除此之外我们一无所知。当数据在应用程序中传递时，它是在没有上下文的情况下完成的。是`User`吗？`User`附上一些信息`Order`？我们真的不知道。

我更喜欢使用完整的实体。

你是对的，你经常会带回你不会使用的数据，但你可以通过多种方式解决这个问题：

1.  积极缓存实体，因此您只需从数据库中支付一次读取价格。
2.  花更多时间为您的实体建模，以便它们之间有很好的区别。（考虑将一个大实体分成两个较小的实体，等等）
3.  考虑拥有多个版本的实体。您可以有一个`User`用于后端，也可以有一个`UserSmall`用于 AJAX 调用。一个可能有 10 个属性，一个可能有 3 个属性。

使用临时查询的缺点：

1.  您最终会在许多查询中得到基本相同的数据。例如，使用 a `User`，您最终会`select *`为许多调用编写基本相同的内容。一个呼叫将获得 10 个字段中的 8 个，一个将获得 10 个字段中的 5 个，一个将获得 10 个字段中的 7 个。为什么不将所有字段都替换为一个获得 10 个字段中的 10 个的呼叫？这不好的原因是重构/测试/模拟是谋杀。
2.  随着时间的推移，很难对您的代码进行高层次的推理。而不是像“为什么`User`这么慢？”这样的陈述。您最终会跟踪一次性查询，因此错误修复往往很小且本地化。
3.  底层技术真的很难替代。如果您现在将所有内容都存储在 MySQL 中并想迁移到 MongoDB，那么替换 100 个 ad-hoc 调用比替换少数实体要困难得多。

**问：**我的存储库中有太多方法。

**答：**除了合并电话之外，我还没有真正看到解决此问题的任何方法。存储库中的方法调用真正映射到应用程序中的功能。功能越多，数据特定调用就越多。您可以推回功能并尝试将类似的调用合并为一个。

归根结底，复杂性必须存在于某个地方。使用存储库模式，我们将其推送到存储库界面，而不是制作一堆存储过程。

有时我不得不告诉自己，“嗯，它必须给某个地方！没有灵丹妙药。”

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-08-18T09:45:31.077

我使用以下接口：

*   `Repository`- 加载、插入、更新和删除实体
*   `Selector`- 在存储库中根据过滤器查找实体
*   `Filter`- 封装过滤逻辑

My`Repository`与数据库无关；实际上它没有指定任何持久性；它可以是任何东西：SQL 数据库、xml 文件、远程服务、来自外太空的外星人等。对于搜索功能，可以过滤、编辑、排序和计数的`Repository`构造。最后，选择器从持久性中获取一个或多个。`Selector``LIMIT``Entities`

这是一些示例代码：

```
<?php
interface Repository
{
    public function addEntity(Entity $entity);

    public function updateEntity(Entity $entity);

    public function removeEntity(Entity $entity);

    /**
     * @return Entity
     */
    public function loadEntity($entityId);

    public function factoryEntitySelector():Selector
}

interface Selector extends \Countable
{
    public function count();

    /**
     * @return Entity[]
     */
    public function fetchEntities();

    /**
     * @return Entity
     */
    public function fetchEntity();
    public function limit(...$limit);
    public function filter(Filter $filter);
    public function orderBy($column, $ascending = true);
    public function removeFilter($filterName);
}

interface Filter
{
    public function getFilterName();
} 
```

然后，一种实现：

```
class SqlEntityRepository
{
    ...
    public function factoryEntitySelector()
    {
        return new SqlSelector($this);
    }
    ...
}

class SqlSelector implements Selector
{
    ...
    private function adaptFilter(Filter $filter):SqlQueryFilter
    {
         return (new SqlSelectorFilterAdapter())->adaptFilter($filter);
    }
    ...
}
class SqlSelectorFilterAdapter
{
    public function adaptFilter(Filter $filter):SqlQueryFilter
    {
        $concreteClass = (new StringRebaser(
            'Filter\\', 'SqlQueryFilter\\'))
            ->rebase(get_class($filter));

        return new $concreteClass($filter);
    }
} 
```

想法是泛型`Selector`使用`Filter`但实现`SqlSelector`使用`SqlFilter`；使`SqlSelectorFilterAdapter`泛型适应`Filter`具体`SqlFilter`。

客户端代码创建`Filter`对象（即通用过滤器），但在选择器的具体实现中，这些过滤器在 SQL 过滤器中进行了转换。

其他选择器实现，例如`InMemorySelector`，从转换`Filter`为`InMemoryFilter`使用其特定的`InMemorySelectorFilterAdapter`; 因此，每个选择器实现都有自己的过滤器适配器。

使用这种策略，我的客户端代码（在业务层中）并不关心特定的存储库或选择器实现。

```
/** @var Repository $repository*/
$selector = $repository->factoryEntitySelector();
$selector->filter(new AttributeEquals('activated', 1))->limit(2)->orderBy('username');
$activatedUserCount = $selector->count(); // evaluates to 100, ignores the limit()
$activatedUsers = $selector->fetchEntities(); 
```

PS这是我真实代码的简化

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-25T21:06:51.257

我会补充一点，因为我目前正试图自己掌握所有这些。

## #1 和 2

这是您的 ORM 进行繁重工作的理想场所。如果您正在使用实现某种 ORM 的模型，您可以使用它的方法来处理这些事情。如果需要，可以创建自己的实现 Eloquent 方法的 orderBy 函数。以 Eloquent 为例：

```
class DbUserRepository implements UserRepositoryInterface
{
    public function findAll()
    {
        return User::all();
    }

    public function get(Array $columns)
    {
       return User::select($columns);
    } 
```

您似乎正在寻找的是 ORM。没有理由您的存储库不能基于一个。这需要用户扩展雄辩，但我个人认为这不是问题。

但是，如果您确实想避免使用 ORM，则必须“自己动手”才能获得所需的内容。

## #3

接口不应该是硬性要求。有些东西可以实现一个接口并添加到它。它不能做的是未能实现该接口所需的功能。您还可以扩展类之类的接口以保持 DRY。

也就是说，我才刚刚开始掌握，但这些认识对我有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T14:26:17.330

我只能评论我们（在我的公司）处理这个问题的方式。首先，性能对我们来说不是太大的问题，但拥有干净/正确的代码才是。

首先，我们定义模型，例如`UserModel`使用 ORM 创建`UserEntity`对象的模型。当`UserEntity`从模型加载 a 时，所有字段都被加载。对于引用外国实体的字段，我们使用适当的外国模型来创建相应的实体。对于这些实体，数据将按需加载。现在你最初的反应可能是……？？？……！！！让我给你举个例子：

```
class UserEntity extends PersistentEntity
{
    public function getOrders()
    {
        $this->getField('orders'); //OrderModel creates OrderEntities with only the ID's set
    }
}

class UserModel {
    protected $orm;

    public function findUsers(IGetOptions $options = null)
    {
        return $orm->getAllEntities(/*...*/); // Orm creates a list of UserEntities
    }
}

class OrderEntity extends PersistentEntity {} // user your imagination
class OrderModel
{
    public function findOrdersById(array $ids, IGetOptions $options = null)
    {
        //...
    }
} 
```

在我们的例子`$db`中是一个能够加载实体的 ORM。该模型指示 ORM 加载一组特定类型的实体。ORM 包含一个映射，并使用该映射将该实体的所有字段注入到实体中。然而，对于外部字段，仅加载这些对象的 id。在这种情况下，`OrderModel`创建`OrderEntity`s 仅具有引用订单的 id。当`PersistentEntity::getField`被`OrderEntity`实体调用时，它指示它的模型将所有字段延迟加载到`OrderEntity`s. 与一个 UserEntity 关联的所有`OrderEntity`s 都被视为一个结果集，并将立即加载。

这里的神奇之处在于我们的模型和 ORM 将所有数据注入到实体中，而实体只是`getField`为`PersistentEntity`. 总而言之，我们总是加载所有字段，但在必要时会加载引用外部实体的字段。仅仅加载一堆字段并不是真正的性能问题。然而，加载所有可能的外国实体会大大降低性能。

现在基于 where 子句加载一组特定的用户。我们提供了一个面向对象的类包，允许您指定可以粘合在一起的简单表达式。在示例代码中，我将其命名为`GetOptions`。它是选择查询的所有可能选项的包装器。它包含 where 子句、group by 子句和其他所有内容的集合。我们的 where 子句非常复杂，但您显然可以轻松地制作一个更简单的版本。

```
$objOptions->getConditionHolder()->addConditionBind(
    new ConditionBind(
        new Condition('orderProduct.product', ICondition::OPERATOR_IS, $argObjProduct)
    )
); 
```

该系统的最简单版本是将查询的 WHERE 部分作为字符串直接传递给模型。

对于这个相当复杂的回复，我深表歉意。我试图尽可能快速和清晰地总结我们的框架。如果您有任何其他问题，请随时问他们，我会更新我的答案。

编辑：此外，如果您真的不想立即加载某些字段，您可以在 ORM 映射中指定延迟加载选项。因为所有字段最终都是通过该`getField`方法加载的，所以您可以在调用该方法时在最后一分钟加载一些字段。这在 PHP 中不是一个很大的问题，但我不建议其他系统使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-25T14:58:58.557

这些是我见过的一些不同的解决方案。它们每个都有优点和缺点，但由您决定。

# 问题 #1：字段过多

这是一个重要方面，尤其是当您考虑[Index-Only Scans](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index)时。我看到解决这个问题的两种解决方案。您可以更新您的函数以接受一个可选的数组参数，该参数将包含要返回的列的列表。如果此参数为空，您将返回查询中的所有列。这可能有点奇怪。根据参数，您可以检索对象或数组。您还可以复制所有函数，以便拥有两个运行相同查询的不同函数，但一个返回一个列数组，另一个返回一个对象。

```
public function findColumnsById($id, array $columns = array()){
    if (empty($columns)) {
        // use *
    }
}

public function findById($id) {
    $data = $this->findColumnsById($id);
} 
```

# 问题 #2：方法太多

一年前我曾短暂地与[Propel ORM合作过，这是基于我从那次经历中所记得的。](http://propelorm.org/)Propel 可以选择根据现有的数据库模式生成其类结构。它为每个表创建两个对象。第一个对象是一长串访问功能，类似于您当前列出的内容；`findByAttribute($attribute_value)`. 下一个对象继承自第一个对象。您可以更新此子对象以构建更复杂的 getter 函数。

另一种解决方案是将`__call()`未定义的功能映射到可操作的东西。您的`__call`方法将能够将 findById 和 findByName 解析为不同的查询。

```
public function __call($function, $arguments) {
    if (strpos($function, 'findBy') === 0) {
        $parameter = substr($function, 6, strlen($function));
        // SELECT * FROM $this->table_name WHERE $parameter = $arguments[0]
    }
} 
```

我希望这至少能有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-03T17:06:57.133

我认为在这种情况下， [graphQL](https://graphql.org/)是一个很好的候选者，可以提供一种大规模的查询语言，而不会增加数据存储库的复杂性。

但是，如果您现在不想使用 graphQL，还有另一种解决方案。通过使用[DTO](https://en.wikipedia.org/wiki/Data_transfer_object)，其中一个对象用于在进程之间传输数据，在这种情况下是在服务/控制器和存储库之间。

上面已经提供了一个优雅的[答案](https://stackoverflow.com/a/39014955/3729946)，但是我将尝试举另一个例子，我认为它更简单，可以作为新项目的起点。

如代码所示，我们只需要 4 个方法来进行 CRUD 操作。该`find`方法将用于通过传递对象参数来列出和读取。后端服务可以基于 URL 查询字符串或基于特定参数构建定义的查询对象。

如果需要，查询对象 ( `SomeQueryDto`) 也可以实现特定的接口。并且很容易在以后扩展而不会增加复杂性。

```
<?php

interface SomeRepositoryInterface
{
    public function create(SomeEnitityInterface $entityData): SomeEnitityInterface;
    public function update(SomeEnitityInterface $entityData): SomeEnitityInterface;
    public function delete(int $id): void;

    public function find(SomeEnitityQueryInterface $query): array;
}

class SomeRepository implements SomeRepositoryInterface
{
    public function find(SomeQueryDto $query): array
    {
        $qb = $this->getQueryBuilder();

        foreach ($query->getSearchParameters() as $attribute) {
            $qb->where($attribute['field'], $attribute['operator'], $attribute['value']);
        }

        return $qb->get();
    }
}

/**
 * Provide query data to search for tickets.
 *
 * @method SomeQueryDto userId(int $id, string $operator = null)
 * @method SomeQueryDto categoryId(int $id, string $operator = null)
 * @method SomeQueryDto completedAt(string $date, string $operator = null)
 */
class SomeQueryDto
{
    /** @var array  */
    const QUERYABLE_FIELDS = [
        'id',
        'subject',
        'user_id',
        'category_id',
        'created_at',
    ];

    /** @var array  */
    const STRING_DB_OPERATORS = [
        'eq' => '=', // Equal to
        'gt' => '>', // Greater than
        'lt' => '<', // Less than
        'gte' => '>=', // Greater than or equal to
        'lte' => '<=', // Less than or equal to
        'ne' => '<>', // Not equal to
        'like' => 'like', // Search similar text
        'in' => 'in', // one of range of values
    ];

    /**
     * @var array
     */
    private $searchParameters = [];

    const DEFAULT_OPERATOR = 'eq';

    /**
     * Build this query object out of query string.
     * ex: id=gt:10&id=lte:20&category_id=in:1,2,3
     */
    public static function buildFromString(string $queryString): SomeQueryDto
    {
        $query = new self();
        parse_str($queryString, $queryFields);

        foreach ($queryFields as $field => $operatorAndValue) {
            [$operator, $value] = explode(':', $operatorAndValue);
            $query->addParameter($field, $operator, $value);
        }

        return $query;
    }

    public function addParameter(string $field, string $operator, $value): SomeQueryDto
    {
        if (!in_array($field, self::QUERYABLE_FIELDS)) {
            throw new \Exception("$field is invalid query field.");
        }
        if (!array_key_exists($operator, self::STRING_DB_OPERATORS)) {
            throw new \Exception("$operator is invalid query operator.");
        }
        if (!is_scalar($value)) {
            throw new \Exception("$value is invalid query value.");
        }

        array_push(
            $this->searchParameters,
            [
                'field' => $field,
                'operator' => self::STRING_DB_OPERATORS[$operator],
                'value' => $value
            ]
        );

        return $this;
    }

    public function __call($name, $arguments)
    {
        // camelCase to snake_case
        $field = strtolower(preg_replace('/(?<!^)[A-Z]/', '_$0', $name));

        if (in_array($field, self::QUERYABLE_FIELDS)) {
            return $this->addParameter($field, $arguments[1] ?? self::DEFAULT_OPERATOR, $arguments[0]);
        }
    }

    public function getSearchParameters()
    {
        return $this->searchParameters;
    }
} 
```

示例用法：

```
$query = new SomeEnitityQuery();
$query->userId(1)->categoryId(2, 'ne')->createdAt('2020-03-03', 'lte');
$entities = $someRepository->find($query);

// Or by passing the HTTP query string
$query = SomeEnitityQuery::buildFromString('created_at=gte:2020-01-01&category_id=in:1,2,3');
$entities = $someRepository->find($query); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-12T17:47:47.927

我建议[https://packagist.org/packages/prettus/l5-repository](https://packagist.org/packages/prettus/l5-repository)作为供应商在 Laravel5 中实现 Repositories/Criterias 等：D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-22T00:57:39.163

我同意@ryan1234 的观点，即您应该在代码中传递完整的对象，并且应该使用通用查询方法来获取这些对象。

```
Model::where(['attr1' => 'val1'])->get(); 
```

对于外部/端点使用，我真的很喜欢 GraphQL 方法。

```
POST /api/graphql
{
    query: {
        Model(attr1: 'val1') {
            attr2
            attr3
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-03T23:05:01.997

> 问题 #3：无法匹配接口
> 
> 我看到了将接口用于存储库的好处，因此我可以换掉我的实现（用于测试目的或其他目的）。我对接口的理解是它们定义了实现必须遵循的契约。在您开始向存储库添加其他方法（如 findAllInCountry()）之前，这非常有用。现在我需要更新我的接口以使其也具有此方法，否则其他实现可能没有它，这可能会破坏我的应用程序。这感觉很疯狂……尾巴摇着狗的情况。

我的直觉告诉我，这可能需要一个接口来实现查询优化方法和通用方法。性能敏感的查询应该有针对性的方法，而不常见的或轻量级的查询由通用处理程序处理，这可能是控制器做更多杂耍的代价。

通用方法将允许实现任何查询，因此将防止在过渡期间发生重大更改。有针对性的方法允许您在有意义时优化呼叫，并且可以应用于多个服务提供商。

这种方法类似于执行特定优化任务的硬件实现，而软件实现则完成轻量级的工作或灵活的实现。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-29T21:18:13.457

```
 class Criteria {}
   class Select {}
   class Count {}
   class Delete {}
   class Update {}
   class FieldFilter {}
   class InArrayFilter {}
   // ...

   $crit = new Criteria();  
   $filter = new FieldFilter();
   $filter->set($criteria, $entity, $property, $value);
   $select = new Select($criteria);
   $count = new Count($criteria);
   $count->getRowCount();
   $select->fetchOne(); // fetchAll(); 
```

所以我认为

# php - 未定义的索引错误验证码

> ID：16176991
> 
> 赞同：-2
> 
> 时间：2013-04-23T18:50:08.593
> 
> 标签：php, mysql

请帮助我解决未定义的索引：验证码错误。错误说“验证码”未使用以下代码定义：-

```
if(!isset($_REQUEST['captcha']) || (strtolower($_REQUEST['captcha']) != strtolower($_SESSION['captcha'])))   { 
```

请协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:51:15.707

定义在 $_REQUEST 但可能不在 $_SESSION 中。

# python - 使用 pandas.to_datetime 时只保留日期部分

> ID：16176996
> 
> 赞同：333
> 
> 时间：2013-04-23T18:50:36.500
> 
> 标签：python, pandas, csv, datetime, series

我`pandas.to_datetime`用来解析数据中的日期。Pandas 默认情况下表示日期，`datetime64[ns]`即使日期都是每天的。我想知道是否有一种优雅/聪明的方法可以将日期转换为`datetime.date`或`datetime64[D]`这样，当我将数据写入 CSV 时，日期不会附加`00:00:00`. 我知道我可以逐个元素地手动转换类型：

```
[dt.to_datetime().date() for dt in df.dates] 
```

但这真的很慢，因为我有很多行，这有点违背了使用`pandas.to_datetime`. 有没有办法`dtype`一次转换整个列的？或者，是否`pandas.to_datetime`支持精度规范，以便我可以在处理日常数据时摆脱时间部分？

* * *

## 回答 #1

> 赞同：501
> 
> 时间：2015-12-14T22:07:34.700

由于版本`0.15.0`，现在可以使用[`.dt`](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.15.0.html)仅访问日期组件轻松完成此操作：

```
df['just_date'] = df['dates'].dt.date 
```

上面返回一个`datetime.date`dtype，如果你想要一个，`datetime64`那么你可以[`normalize`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.normalize.html#pandas.Series.dt.normalize)将时间组件设置为午夜，因此它将所有值设置为`00:00:00`：

```
df['normalised_date'] = df['dates'].dt.normalize() 
```

这将保留`dtype`as `datetime64`，但显示仅显示该`date`值。

*   [熊猫：`.dt`存取器](https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#dt-accessor)
*   [`pandas.Series.dt`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.html)

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2019-05-20T10:11:16.763

**简单的解决方案：**

```
df['date_only'] = df['date_time_column'].dt.date 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-01-18T11:57:38.823

虽然我赞成 EdChum 的回答，这是对 OP 提出的问题的最直接回答，但它并没有真正解决性能问题（它仍然依赖于 python`datetime`对象，因此对它们的任何操作都不会被矢量化——也就是说，它会很慢）。

[性能更好的替代方法](https://github.com/pandas-dev/pandas/issues/14669#issuecomment-261080259 "TomAugspurger 发表评论")是使用`df['dates'].dt.floor('d')`. 严格来说，它不是“只保留日期部分”，因为它只是将时间设置为`00:00:00`. 但它确实可以按照 OP 的要求工作，例如：

*   打印到屏幕
*   保存到 csv
*   使用该列`groupby`

...而且效率更高，因为操作是矢量化的。

**编辑：**事实上，OP 更喜欢的答案可能是“如果它用于所有观察，`pandas`则不要将*时间*写入 csv 的最新版本”。`00:00:00`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-12-14T00:19:06.380

### Pandas v0.13+：[`to_csv`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)与`date_format`参数一起使用

尽可能避免将您的`datetime64[ns]`系列转换为`object`dtype 系列`datetime.date`对象。后者通常使用 构造[`pd.Series.dt.date`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.date.html)，存储为指针数组，相对于纯基于 NumPy 的系列而言效率低下。

**由于您在写入 CSV 时**关心的是格式，因此只需`date_format`使用`to_csv`. 例如：

```
df.to_csv(filename, date_format='%Y-%m-%d') 
```

请参阅[Python 的格式约定`strftime`指令](http://strftime.org/)。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-11-02T12:31:05.640

Pandas`DatetimeIndex`并`Series`有一个名为的方法[`normalize`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.normalize.html#pandas.Series.dt.normalize)，它完全符合您的要求。

您可以在[此答案](https://stackoverflow.com/a/26883852/512111)中阅读更多相关信息。

它可以用作`ser.dt.normalize()`

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-12-11T12:02:57.960

这是提取日期的简单方法：

```
import pandas as pd

d='2015-01-08 22:44:09' 
date=pd.to_datetime(d).date()
print(date) 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2019-11-17T19:16:20.833

如果有人看到这篇旧帖子，请提供更新的答案。

在转换为 datetime 时添加“utc=False”将删除时区组件并仅保留 datetime64[ns] 数据类型中的日期。

```
pd.to_datetime(df['Date'], utc=False) 
```

您将能够将其保存在 excel 中而不会出现错误“ValueError：Excel 不支持带时区的日期时间。请确保在写入 Excel 之前日期时间是不知道时区的。”

[![在此处输入图像描述](https://i.stack.imgur.com/SIANg.png)](https://i.stack.imgur.com/SIANg.png)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2021-08-05T19:43:49.933

`df['Column'] = df['Column'].dt.strftime('%m/%d/%Y')`

这将为您提供所需格式的日期和 NO TIME。您可以根据需要更改格式`'%m/%d/%Y'`它会将列的数据类型更改为`'object'`.

* * *

如果您只想要日期而不想要时间`YYYY-MM-DD`格式，请使用：

```
df['Column'] = pd.to_datetime(df['Column']).dt.date 
```

数据类型将是`'object'`.

* * *

对于`'datetime64'`数据类型，使用：

```
df['Column'] = pd.to_datetime(df['Column']).dt.normalize() 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-04-23T20:07:12.260

转换为`datetime64[D]`：

```
df.dates.values.astype('M8[D]') 
```

尽管将其重新分配给 DataFrame col 会将其恢复为 [ns]。

如果你想要实际的`datetime.date`：

```
dt = pd.DatetimeIndex(df.dates)
dates = np.array([datetime.date(*date_tuple) for date_tuple in zip(dt.year, dt.month, dt.day)]) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-05-04T22:20:58.330

我希望能够更改数据框中一组列的类型，然后删除保持一天的时间。[round(), floor(), ceil()](https://pandas.pydata.org/pandas-docs/version/0.19.0/whatsnew.html#datetimelike-rounding)全部工作

```
df[date_columns] = df[date_columns].apply(pd.to_datetime)
df[date_columns] = df[date_columns].apply(lambda t: t.dt.floor('d')) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-11-30T13:02:20.323

在 >1000000 行的表上，我发现它们都很快，`floor`只是稍微快一点：

```
df['mydate'] = df.index.floor('d') 
```

或者

```
df['mydate'] = df.index.normalize() 
```

如果您的索引有时区并且您不希望结果中出现这些时区，请执行以下操作：

```
df['mydate'] = df.index.tz_localize(None).floor('d') 
```

`df.index.date`慢很多倍；`to_datetime()`更糟。两者都有进一步的缺点，即结果无法保存到 hdf 存储，因为它不支持类型 datetime.date。

请注意，我在这里使用索引作为日期源；如果您的来源是另一列，则需要添加`.dt`，例如`df.mycol.dt.floor('d')`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-08T09:45:10.807

这在 UTC Timestamp (2020-08-19T09:12:57.945888) 上对我有用

```
for di, i in enumerate(df['YourColumnName']):
    df['YourColumnName'][di] = pd.Timestamp(i) 
```

# xml - xslt 没有从命名空间元素中获取值

> ID：16176997
> 
> 赞同：0
> 
> 时间：2013-04-23T18:50:37.163
> 
> 标签：xml, xslt, xml-namespaces

我正在尝试从命名空间为`dc`. 除了这些值之外，其他一切都正常工作。

这是我的 XML 的缩写版本：

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet href="sci.xsl" type="text/xsl" ?>

<rss version="2.0"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:admin="http://webns.net/mvcb/"
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">

<channel>
    <title>SciTimes News</title>
    <link>home.htm</link>

    <description>SciTimes delivers up-to-the-minute news and information on the latest stories from the world of science and technology.</description>

    <dc:language>en-us</dc:language>

    <dc:date>2008-03-24T12:22:54+09:00</dc:date>

    <sy:updatePeriod>hourly</sy:updatePeriod>

    <sy:updateFrequency>1</sy:updateFrequency>

    <sy:updateBase>2000-01-01T12:00+00:00</sy:updateBase>

    <image>
        <title>SciTimes.com</title>
        <link>home.htm</link>
        <url>scitimes.jpg</url>
        <width>620</width>
        <height>96</height>
        <description>SciTimes delivers up-to-the-minute news and information on the latest stories from the world of  science and technology.</description>
    </image>

    <item>
        <title>Visual Memory</title>
        <link>vm.htm</link>
        <description>BOULDER, Colorado - The ability to retain memory about the details of a natural scene is unaffected by the distraction of another activity and this information is retained in "working memory" according to researchers at the University of Colorado School of Medicine. These results reinforce the notion that humans maintain useful information about previous fixations in long-term working memory rather than the limited capacity of visual short-term memory (VSTM).</description>
        <dc:pubDate>Mon, 24 Mar 2008 12:17:37 EST</dc:pubDate>
        <dc:subject>Biology</dc:subject>
    </item>
</channel>
</rss> 
```

这是我的 XSL：

```
<?xml version="1.0" encoding="UTF-8" ?>

<xsl:stylesheet
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:dc="http://purl.org/dc/elements/1.1"
version="1.0"
>
<!-- Start base template -->
<xsl:template match="/">
    <html>
        <head>
            <title><xsl:value-of select="rss/channel/title" /></title>
            <link rel="stylesheet" href="sci.css" />
        </head>
        <body>
                <div id="logo">
                <xsl:apply-templates select="//image"/>
            </div>
            <div id="datetime"><xsl:value-of select="//dc:date" /></div>
            <div id="links">
                <p><xsl:value-of select="//description" /></p>
                <p><img src="links.jpg" /></p>
            </div>
            <div id="news">
                <h1>RSS News Feed</h1>
                <dc:stylesheet>
                <xsl:apply-templates select="//item" /></dc:stylesheet>
            </div>
        </body>
    </html>
</xsl:template>
<!-- End base template -->

<!-- Start logo template -->
<xsl:template match="//image">
    <a href="{link}"><img src="{url}" alt="{title}" width="{width}" height="{height}" longdesc="{description}" /></a>
</xsl:template>
<!-- End Logo template -->

<!-- Start RSS item template -->
<xsl:template match="//item">
    <h2><xsl:value-of select="title" /></h2>
    <p id="subjtime"><xsl:value-of select="dc:subject" /> / <xsl:value-of select="dc:pubDate" /></p>
    <p><xsl:value-of select="description" /></p>
    <p id="itemlink">[ <a href="{link}">more</a> ]</p>
</xsl:template>
<!-- End RSS item template -->
</xsl:stylesheet> 
```

所以`<xsl:value-of select="//dc:date" />`,`<xsl:value-of select="dc:subject" />`和 并`<xsl:value-of select="dc:pubDate" />`没有拉入数据。

我对 XML 完全陌生，所以我显然遗漏了一些东西，我只是不知道是什么。我四处寻找解决方案，但没有成功。

如果有人能指出我做错了什么，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:46:23.740

您在 XSLT 中 dc 命名空间声明的末尾缺少一个斜杠：

```
xmlns:dc="http://purl.org/dc/elements/1.1" 
```

应该：

```
xmlns:dc="http://purl.org/dc/elements/1.1/" 
```

命名空间 URI 必须完全匹配。一旦解决了这个问题，XSLT 应该会成功检索您想要访问的值。