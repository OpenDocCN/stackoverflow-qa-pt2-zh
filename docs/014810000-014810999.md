# StackOverflow 问答 14810000-14810999

# facebook - Facebook iFrame 中的 PayPal 商店

> ID：14810000
> 
> 赞同：1
> 
> 时间：2013-02-11T10:13:12.363
> 
> 标签：facebook, paypal, integration, same-origin-policy

与所有项目一样，球门柱已经移动，我需要一些帮助来实施最简单/最快的解决方案。

最初，我只需要建立一个产品目录站点。现在，我需要包含一个 PayPal 购物车和 Facebook 集成。该网站需要在 Facebook（页面选项卡）内独立运行，我不能排除 Safari（和其他）用户（关于可怕的 SOP）。Facebook 集成的范围纯粹是页面选项卡，不需要登录。

我看到这与 Ajax 和 JSON（加上 PHP）一起使用，使用 PayPal 的东西来加密数据，发布它，然后继续。

我的问题：我可以使用哪些 PayPal 服务，可以在 iFrame 中运行，以应对被阻止的 cookie？我能想到的避免 SOP 的最佳方法是 AJAX 和 JSON，但是这将如何与 PayPal 一起使用。当用户希望结帐时，我可以构建购物车数据吗？我已经使用弹出窗口方法来避免第三方 Cookie 限制，但是，我遇到了 Firefox 仍然无法读取 Facebook 页面选项卡（iFrame）中的 cookie 数据的问题。

非常感谢这里的任何帮助。非常感谢，西蒙

# objective-c - 防止具有随机位置的精灵在cocos2d中重叠

> ID：14810001
> 
> 赞同：0
> 
> 时间：2013-02-11T10:13:18.520
> 
> 标签：objective-c, cocos2d-iphone

我在具有随机位置的场景上生成随机精灵，如下所示：

```
-(void)addWRight
{
int randNo = arc4random()%5;
int randType = arc4random()%3;

for(int i = 0; i <= randNo; i++)
{
    NSString *strSprite = @"1.png";
    if(randType == 0)
    {
        strSprite = @"1.png";
    }
    else if(randType == 1)
    {
        strSprite = @"2.png";
    }
    else
    {
        strSprite = @"3.png";
    }

    int minX = 130; 
    int maxX = 240; 
    int randX = arc4random() % (maxX - minX) + minX;

    CCSprite *spr = [CCSprite spriteWithFile:strSprite];
    spr.position = ccp(randX, 200);
    [self addChild:spr];
    [whiteArray addObject:spr];
}} 
```

我根据 randNo 的结果添加精灵。因此，例如，如果 randNo 值为 2，则将添加 3 个精灵。我的问题是，在精灵的随机 x 轴位置上。我这样做是为了让它们位于 130 - 240 之间的任何位置。但是，这是可行的，因为 x 轴是随机的，因此存在两个或多个精灵相互重叠的趋势。所以我现在的问题是，如何防止精灵重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:17:51.470

我可以建议两种方法：

1.  碰撞检测：在添加新精灵之前，检查其边界是否与任何其他现有精灵相交；

为了降低检查两个边界是否碰撞的复杂性，您可以执行以下操作：

1.  离散化你的空间：定义一个网格；然后在这个网格中为你的精灵分配随机坐标；计算整个空间中指定网格单元的坐标。例如，假设你的精灵是 20x40，你的空间是 320x480，那么你可以使用 16x12 的网格；如果将精灵分配给单元格 (3,3)，则对应于 (60,120)。在这种情况下，您将仅通过比较它们的坐标来检测两个精灵之间的碰撞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T12:08:24.403

**timTheMystic**在[这篇](http://www.cocos2d-iphone.org/forums/topic/avoid-from-overlapping-sprites/)文章中发布了一段代码片段。虽然不是很好，但仍然是防止精灵之间重叠的可接受的解决方案。

# c++ - int f(int &x) int f(int x) 之间的区别

> ID：14810003
> 
> 赞同：-2
> 
> 时间：2013-02-11T10:13:26.470
> 
> 标签：c++, recursion

```
#include<stdio.h>
#include<conio.h>

int f(int & ,int );//function prototype

main()
{
  int x,p=5; //p is initialized to 5
  x=f(p,p);
  printf("\n Value is : %d",x);//print the value of x
  getch();
}

int f (int & x, int c)
{
c=c-1;
if (c==0) return 1;
x=x+1;
return f(x,c) * x; //recursion
} 
```

输出：6561

谁能解释一下程序的流程这个问题来自我无法理解的门。似乎该函数是用 p = 5 的值调用的。它在函数 f 中被 int &x 捕获，问题就在这里。是值，即 5 存储在 x 中还是 x 的地址中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T10:21:29.743

此代码使用[C++*参考*](http://en.wikipedia.org/wiki/Reference_%28C++%29)，这就是`int &`语法的含义。

基本上，引用是指针的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)。因此，当您调用 时`f(p, p)`，函数参数是对in`x`的引用，而仅仅是调用时值的副本。`p``main()``c`

这意味着可以通过引用`f`更改`p`in的值。`main()`由于`f`递归调用自身，将相同的引用传递给自身，因此它始终是对`p`in的引用`main()`。

为了跟踪恢复，我建议在内部的战略位置添加日志打印输出`f()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:22:25.103

第一个创建的 a`reference`更像是更简洁的语法而不是指针。

您可以使用它来更改函数调用之间的变量内容。

尽管您必须注意，您发布的代码不是有效的 C++。C++ 不允许`main`没有返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:29:47.887

更简单：

```
int f(int &a){
  a = 5;
}
int x = 0;
f(x);
//now x equals 5

int f2(int b){
 b = 5;
}
int y = 0;
f2(y);
//y still equals 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:03:49.083

实际上就是这样，问题中的参考部分是为了分散你的注意力，它只是 x 指向 p 的地址，但“x”本身第一次包含值 5，但递归运行了 4 次，所以在堆栈就像 ----[x 当值为 6（堆栈底部），xwhen 值为 7，xwhen 值为 8，x 当值为 9（堆栈顶部）] ...在顶部9 但我们知道，在递归中，首先执行循环，然后进行评估，因此当 x 的值更改为 9 时，堆栈的所有四个块都更改为 9，因为它们指向相同的“x”......所以结果是 9*9*9*9=6561 ..就这么简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-04T10:57:37.990

*   `&`是引用：这意味着它必须是一个对象的引用（地址）；
*   `*`是一个指针：它指向一个对象。

不同的是“ `&x`”不能是“ `NULL`”，但 `&x`可以是`NULL`。

这两个原型是不同的。

```
int f(int & ,int );
int f(int * ,int ); //are different function prototypes 
```

这是一个很好的问题。

# mysql - MySQL / MariaDB InnoDB 索引停止工作

> ID：14810004
> 
> 赞同：2
> 
> 时间：2013-02-11T10:13:31.530
> 
> 标签：mysql, innodb, indexing, mariadb, xtradb

我的 MySQL/MariaDB InnoDB/XtraDB 出现了奇怪的行为。最近切换到 MariaDB 5.5。该开关使服务器整体性能更高，但我仍然有这个问题。

一个特定的表索引似乎不时中断。一段时间后，它会自行修复。

`SHOW CREATE TABLE article_inventory;`给

```
CREATE TABLE `article_inventory` (
    `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
    `article_variant_id` BIGINT(20) UNSIGNED NULL DEFAULT NULL,
    `season_id` BIGINT(20) UNSIGNED NOT NULL,
    `warehouse_id` BIGINT(20) UNSIGNED NOT NULL,
    `quantity` BIGINT(20) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE INDEX `unique_inventory_idx` (`article_variant_id`, `season_id`, `warehouse_id`),
    INDEX `article_variant_id_idx` (`article_variant_id`),
    INDEX `article_inventory_season_id_idx` (`season_id`),
    INDEX `article_inventory_warehouse_id_idx` (`warehouse_id`),
    CONSTRAINT `article_inventory_article_variant_id_article_variant_id` FOREIGN KEY (`article_variant_id`) REFERENCES `article_variant` (`id`),
    CONSTRAINT `article_inventory_season_id_season_id` FOREIGN KEY (`season_id`) REFERENCES `season` (`id`),
    CONSTRAINT `article_inventory_warehouse_id_warehouse_id` FOREIGN KEY (`warehouse_id`) REFERENCES `warehouse` (`id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=3827622858; 
```

**编辑：**大多数 SELECT 查询都是针对此表进行的。每小时都会进行一次重大更新。有时非常大的更新。

运行此查询：

```
SELECT a.id
FROM article a
    INNER JOIN article_variant a2 
        ON a.style_id = a2.style_id
    INNER JOIN article_block a3 
        ON a2.po = a3.po
    INNER JOIN color c 
        ON a2.color_id = c.id
    INNER JOIN size s 
        ON a2.size_id = s.id
    INNER JOIN article_group a4 
        ON a2.id = a4.article_variant_id AND (a4.season_id = 6)
    INNER JOIN article_inventory a5 
        ON a2.id = a5.article_variant_id AND (((a5.warehouse_id = 5 OR a5.warehouse_id = 1) AND a5.season_id = 6))
    INNER JOIN article_date a6 
        ON a.style_id = a6.style_id AND ((a6.pricelist_id = 5 AND a6.season_id = 6))
    INNER JOIN article_price a7 
        ON a.style_id = a7.style_id AND ((a7.pricelist_id = 5 AND a7.season_id = 6))
    INNER JOIN pricelist p 
        ON a7.pricelist_id = p.id
    INNER JOIN concept c2 
        ON a4.concept_id = c2.id
    INNER JOIN category c3 
        ON a4.category_id = c3.id
    LEFT JOIN order_cart_row o 
        ON a2.id = o.article_variant_id AND (o.order_id = 17035)
    LEFT JOIN shortlist s2 
        ON a.id = s2.article_id AND (s2.order_id = 17035)
WHERE ((a2.is_canceled <> 1 AND a4.is_canceled <> 1) OR o.quantity IS NOT NULL) AND c2.id = 2
GROUP BY a.id 
```

...应该在大约 0.5-1.0 秒内执行，并给我一个类似这样的解释：

```
id select_type table  type     possible_keys                                                                                               key                                 key_len    ref                                  rowsExtra
1  SIMPLE      p      const    PRIMARY                                                                                                     PRIMARY                             8          const                                1   Using index; Using temporary; Using filesort
1  SIMPLE      c2     const    PRIMARY                                                                                                     PRIMARY                             8          const                                1   Using index                            
1  SIMPLE      a3     index    PRIMARY                                                                                                     PRIMARY                             98         NULL                                 1031Using where                            
1  SIMPLE      a2     ref      PRIMARY,unique_variant_idx,color_id_idx,style_id_idx,size_id_idx,article_variant_po_idx                     article_variant_po_idx              98         wsp_stage.a3.po                      14  Using where                            
1  SIMPLE      s      eq_ref   PRIMARY                                                                                                     PRIMARY                             11         wsp_stage.a2.size_id                 1   Using index                            
1  SIMPLE      c      eq_ref   PRIMARY                                                                                                     PRIMARY                             11         wsp_stage.a2.color_id                1                                          
1  SIMPLE      o      eq_ref   unique_rows_idx,article_variant_id_idx,order_id_idx                                                         unique_rows_idx                     16         const,wsp_stage.a2.id                1   Using index                            
1  SIMPLE      a      eq_ref   unique_style_idx                                                                                            unique_style_idx                    767        wsp_stage.a2.style_id                1   Using index                            
1  SIMPLE      a6     ref      article_season_pricelist_unique_idx,season_id_idx,pricelist_id_idx,style_id_idx                             article_season_pricelist_unique_idx 784        wsp_stage.a2.style_id,const,const    1   Using index                            
1  SIMPLE      a7     ref      article_season_pricelist_unique_idx,season_id_idx,pricelist_id_idx,style_id_idx                             article_season_pricelist_unique_idx 784        wsp_stage.a2.style_id,const,const    1   Using index                            
1  SIMPLE      a4     eq_ref   unique_group_idx,one_per_season_idx,category_id_idx,concept_id_idx,season_id_idx,article_variant_id_idx     one_per_season_idx                  16         wsp_stage.a2.id,const                1   Using index                            
1  SIMPLE      c3     eq_ref   PRIMARY                                                                                                     PRIMARY                             8          wsp_stage.a4.category_id             1   Using index                            
1  SIMPLE      s2     ref      shortlist_article_id_idx                                                                                    shortlist_article_id_idx            8          wsp_stage.a.id                       10  Using where                            
1  SIMPLE      a5     ref      unique_inventory_idx,article_variant_id_idx,article_inventory_season_id_idx,article_inventory_warehouse_id_iunique_inventory_idx                17         wsp_stage.a2.id,const                8   Using where 
```

当一切正常时，article_inventory（别名 a5）使用`unique_inventory_idx`, 或`article_variant_id_idx`. 两者都应该给我大约 5-100 个检查的行。

但时不时地，会发生一些事情，同样的查询需要大约 30 秒，并给我这个解释：

```
id select_type table  type     possible_keys                                                                                               key                                 key_len  ref                                  rows    Extra
1  SIMPLE      p      const    PRIMARY                                                                                                     PRIMARY                             8        const                                1       Using index; Using temporary; Using filesort
1  SIMPLE      c2     const    PRIMARY                                                                                                     PRIMARY                             8        const                                1       Using index
1  SIMPLE      a5     ref      unique_inventory_idx,article_variant_id_idx,article_inventory_season_id_idx,article_inventory_warehouse_id_iarticle_inventory_season_id_idx     8        const                                6718732 Using where
1  SIMPLE      a4     eq_ref   unique_group_idx,one_per_season_idx,category_id_idx,concept_id_idx,season_id_idx,article_variant_id_idx     one_per_season_idx                  16       wsp_stage.a5.article_variant_id,const1       Using where
1  SIMPLE      c3     eq_ref   PRIMARY                                                                                                     PRIMARY                             8        wsp_stage.a4.category_id             1       Using index
1  SIMPLE      a2     eq_ref   PRIMARY,unique_variant_idx,color_id_idx,style_id_idx,size_id_idx,article_variant_po_idx                     PRIMARY                             8        wsp_stage.a5.article_variant_id      1       
1  SIMPLE      c      eq_ref   PRIMARY                                                                                                     PRIMARY                             11       wsp_stage.a2.color_id                1       Using index
1  SIMPLE      a      eq_ref   unique_style_idx                                                                                            unique_style_idx                    767      wsp_stage.a2.style_id                1       Using index
1  SIMPLE      a6     ref      article_season_pricelist_unique_idx,season_id_idx,pricelist_id_idx,style_id_idx                             article_season_pricelist_unique_idx 784      wsp_stage.a2.style_id,const,const    1       Using index
1  SIMPLE      a7     ref      article_season_pricelist_unique_idx,season_id_idx,pricelist_id_idx,style_id_idx                             article_season_pricelist_unique_idx 784      wsp_stage.a2.style_id,const,const    1       Using index
1  SIMPLE      s      eq_ref   PRIMARY                                                                                                     PRIMARY                             11       wsp_stage.a2.size_id                 1       Using index
1  SIMPLE      a3     eq_ref   PRIMARY                                                                                                     PRIMARY                             98       wsp_stage.a2.po                      1       Using index
1  SIMPLE      o      eq_ref   unique_rows_idx,article_variant_id_idx,order_id_idx                                                         unique_rows_idx                     16       const,wsp_stage.a5.article_variant_id1       Using where
1  SIMPLE      s2     ref      shortlist_article_id_idx                                                                                    shortlist_article_id_idx            8        wsp_stage.a.id                       7       Using where 
```

`article_inventory`(a5) 现在正在使用`article_inventory_season_id_idx`. 一个非常非常糟糕的索引，因为它是所有索引中第二不具体的。给我 6718732 检查的行。

`my.ini:`

```
[mysqld]
datadir="W:/mariadb/data/"
port=3306
sql_mode="STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION"
default_storage_engine=innodb
innodb_buffer_pool_size=5000M
innodb_log_file_size=52428800
innodb_file_per_table
innodb_file_format=Barracuda

[client]
port=3307 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:23:22.317

那么首先索引没有被破坏。这可能与建议查询优化器使用错误索引的表上的 MySQL 统计信息有关。现在，在我们转向可能的解决方案之前，让我们首先了解是什么原因造成的。

当 MySQL 运行查询时，它会查看该表的统计信息以确定哪些索引适合查询，然后根据建议选择正确的索引。表统计信息包含索引基数和与使用索引相关的成本等信息。MySQL 每次运行查询时都会查看这些统计信息以确定最佳执行路径。

现在，由于索引是存储在磁盘上的实际数据结构，当您从这些索引中更新、插入和删除时，它们的统计信息会发生变化。这可能是问题的根本原因。InnoDB 通过对索引结构进行 8 次随机深入研究来动态更新统计信息。MyISAM 的做法不同。有关更多信息，请参阅此链接：[https ://dba.stackexchange.com/questions/3398/from-where-does-the-mysql-query-optimizer-read-index-statistics](https://dba.stackexchange.com/questions/3398/from-where-does-the-mysql-query-optimizer-read-index-statistics)

您提到您每隔一段时间就重复更新进行大型插入。我怀疑无论是在插入期间还是在插入发生之后，都会有一小段时间表的 innodb 统计信息已过时或正在编译。这可能就是您看到从一个指数到感染指数的零星变化的原因。那时您的统计信息不正确，查询优化器做出了错误的选择。

去谷歌以下：

```
mysql statistics update 
```

有一整套链接，其中包含有关此的更多详细信息，这是一些很好的阅读材料。

我以前在数据库上看到过这种情况，这不是 BUG，只是需要注意。

**可能的解决方案：**

1.  在使用重复更新语句进行批量插入之后，显式调用相关表上的 ANALYZE TABLE。在更新后直接运行此命令可能会将您的统计信息转换为正确的形式，从而建议正确的索引。不利的一面是您的系统实际上可能会重新编译两次统计信息，这有点浪费资源。请记住，我不确定此问题是在插入语句之后还是期间发生。
2.  强制在您的选择语句中使用正确的索引。您可以强制 MySQL 始终使用正确的索引。然而，这是一个坏主意。在某些时候，另一个索引可能会针对您的查询变得更加优化，并且由于您现在正在有效地对索引进行硬编码以用于查询，因此稍后会成为一个问题。
3.  保持原样，这听起来可能很奇怪，但是运行 30 秒的查询是一场灾难吗？这可能取决于您的要求，但如果 30 秒可以让查询运行，为什么要尝试修复它？请记住，如果它没有损坏，请不要修复它的哲学。

如果您需要更多说明，我希望这是有道理的发表评论.....

# database - 将简单图导入 Neo4j

> ID：14810005
> 
> 赞同：1
> 
> 时间：2013-02-11T10:13:34.440
> 
> 标签：database, graph, import, neo4j, cypher

我有一个 GraphML 或 GEXF 格式的简单图形，我想将其导入 Neo4j 图形数据库，以便能够使用 Cypher 查询此类图形。该图没有那么大，我可以说它是中等大小，所以我寻求一种简单的方法将此类数据导入 Neo4j。我知道这个问题很简单，但我坚持下去！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:12:20.340

You can do that with the Gremlin plugin as documented at [http://neo4j-contrib.github.io/gremlin-plugin/#rest-api-load-a-sample-graph](http://neo4j-contrib.github.io/gremlin-plugin/#rest-api-load-a-sample-graph)

# objective-c - 为什么我的 C 数组代码没有按预期工作？

> ID：14810006
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:13:36.277
> 
> 标签：objective-c

我在目标 c 中有一个指针，称为：

```
 int *binary[20] ; 
```

后来作为指针返回。

当我试图给它分配一个号码时：

```
binary[5]=1; 
```

我得到错误。

我知道这`binary`指向 20 个单元格中的第一个单元格的地址。为什么我不能直接进入 5 号牢房？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:27:05.640

该定义`int* binary[20]`定义了一个包含 20 个指针的数组`int`。这真的是你想要的，还是你的意思`int binary[20]`是创建一个 20 s 的数组`int`？

无论哪种方式，结果数组都存储在堆栈中，因此将指向该数组的指针返回给某些调用代码是错误的。（在您返回调用代码后，堆栈被展开，为您的数组保留的内存被标记为空闲。）如果您想从调用代码中使用数组，您必须在堆上分配：

```
int *binary = calloc(20, sizeof(int));
binary[5] = 1; // fine, even after returning from this function 
```

这会为您提供一个指向内存的指针，即使在从函数返回后也可用。（并且调用者有责任使用 . 释放该内存`free`。）

无论如何，除非您有一些特定要求，否则您应该使用`NSArray`或类似的集合类。Objective-C 中的一般规则是尽可能使用高级 API，直到被迫使用其他 API。`NSArray`在一般情况下，为几个整数分配一个是完全可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:21:40.087

您已经声明了一个指针数组。

这意味着您可以在该数组中存储 20 个内存地址。

但是，`binary[5]=1;` 您要在其中存储整数而不是 int 的地址。

您不能像静态值一样存储地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:26:50.987

您声明了指向整数的指针数组。你的类型是`int *`。

如果将类型更改为`int`，它将起作用：

```
int binary[20];
binary[5] = 1; 
```

* * *

顺便说一句，您的 Q 与 Objective-C 无关，但与 C 无关。在 Objective-C 中，鼓励您尽可能多地使用对象。（`NSArray`和`NSValue`）。

# php - Laravel 获得路线工作，发布不要

> ID：14810009
> 
> 赞同：1
> 
> 时间：2013-02-11T10:13:56.100
> 
> 标签：php, post, get, routes, laravel

我只是想不通，为什么在我的本地环境中，以下路线可以完美运行....在我提供的暂存环境中，为了测试代码，它不能正常工作

路线：

```
Route::controller(Controller::detect());

...

Route::get('api', array(
        'as' => 'api_index',
        'uses' => 'api@index',
));

Route::get('api/(:any)/(:any)', 'api.(:1)@(:2)');
Route::post('api/(:any)/(:any)', 'api.(:1)@(:2)');
Route::put('api/(:any)/(:any)', 'api.(:1)@(:2)');
Route::delete('api/(:any)/(:any)', 'api.(:1)@(:2)'); 
```

问题在于我的发布请求，因为它们只是找不到并且总是返回 404 而不是请求。例子：

*   `POST` `http://staging.test.com/api`-> 404
*   `POST` `http://staging.test.com/api/user`-> 404
*   `POST` `http://staging.test.com/api/user/session`-> 404

以上所有测试都在我的本地环境中工作。该方法有效（除了我测试过`GET`的唯一方法）`POST`

那么我错过了什么？

## 更新

尝试更改的顺序`Routes::`，并尝试了不同的方法......但仍然是相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:16:24.163

正如@TheShiftExchange 所说，这似乎是 buggy`Controller::detect()`的错。

也试过：

```
Route::controller(array('api.user', 'api.device')); 
```

但只能使用它：

```
Route::controller('api.user');
Route::controller('api.device'); 
```

# linux - Linux中的PATH变量

> ID：14810010
> 
> 赞同：1
> 
> 时间：2013-02-11T10:13:58.577
> 
> 标签：linux, terminal

我需要在终端中设置一个 PATH 。我试过 ;

```
export PATH=/usr/local/sample 
```

好像没问题。但在那之后我失去了我之前设置的另一条路径。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:15:27.937

您应该像这样添加 PATH ：

```
export PATH=/usr/local/sample/:$PATH 
```

附加 $PATH 将添加在 PATH 中设置的当前值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:15:08.820

像这样做：`export PATH=$PATH:/usr/local/sample`

您为 PATH 分配了一个新值 ( `PATH = VALUE`)。您想要的是向 PATH ( `PATH = PATH + VALUE`) 添加一个新值。

# python - 如何在 python 多处理池 apply_async 中使用关键字参数

> ID：14810014
> 
> 赞同：20
> 
> 时间：2013-02-11T10:14:10.930
> 
> 标签：python, multiprocessing, threadpool

我正在尝试掌握 python 的多处理模块，特别是`Pool`. 我正在尝试使用参数和关键字参数调用函数。如果我在没有 kwargs 的情况下调用该函数，那很好，但是当我尝试添加关键字参数时，我得到： `TypeError: apply_async() got an unexpected keyword argument 'arg2'` 下面是我正在运行的测试代码

```
#!/usr/bin/env python
import multiprocessing
from time import sleep
def test(arg1, arg2=1, arg3=2):
    sleep(5)

if __name__ == '__main__':
    pool = multiprocessing.Pool()
    for t in range(1000):
        pool.apply_async(test, t, arg2=5)
    pool.close()
    pool.join() 
```

如何调用该函数以使其接受关键​​字参数？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-11T10:21:24.820

传递字典中的关键字 args（以及元组中的位置参数）：

```
pool.apply_async(test, (t,), dict(arg2=5)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-11T15:32:10.560

原始答案：[带有布尔和多个参数的python多处理](https://stackoverflow.com/questions/12482592/python-multiprocessing-with-boolean-and-multiple-arguments)

apply_async 具有 args 和 kwds 关键字参数，您可以像这样使用它们：

```
res = p.apply_async(testFunc, args=(2, 4), kwds={'calcY': False}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-23T20:45:13.337

Janne 的回答在 python 2.7.11 中对我不起作用（不知道为什么）。函数 test() 接收的是键 (arg2)，而不是值 (5)。

我通过在测试周围创建一个包装器来解决这个问题：

```
def test2(argsDict):
    test(**argsDict) 
```

然后打电话

```
pool.apply_async(test2, (t,), [dict(arg2=5)]) 
```

# rest - 如何执行 Netflix-Exhibitor POST REST API？

> ID：14810019
> 
> 赞同：1
> 
> 时间：2013-02-11T10:14:19.167
> 
> 标签：rest, hadoop, apache-zookeeper, netflix

我需要 Zookeeper 的 REST API，我指的是[https://github.com/Netflix/exhibitor/wiki/REST-Configuration](https://github.com/Netflix/exhibitor/wiki/REST-Configuration)但我只是无法执行 POST API。

我在哪里可以获得使用参展商的示例 curl 请求。或者有人可以发布一个示例来设置配置。curl 查询如下，它需要 config 作为参数。

```
curl -i -X POST "http://hostname:8080/exhibitor/v1/config/set 
```

那么最终的 curl 请求将如何以任何配置作为参数。所以基本上我只是无法添加论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:09:07.147

我想到了。:)

```
curl -i -X POST “http://hostname:8080/exhibitor/v1/config/set” -d '{"rollInProgress":false,"rollStatus":"n/a","rollPercentDone":0,"hostname":"hostname.com","serverId":-1,"logIndexDirectory":"","zookeeperInstallDirectory":"","zookeeperDataDirectory":"","zookeeperLogDirectory":"","serversSpec":"","backupExtra":"","zooCfgExtra":{},"javaEnvironment":"","log4jProperties":"","clientPort":0,"connectPort":0,"electionPort":0,"checkMs":0,"cleanupPeriodMs":0,"cleanupMaxFiles":10,"backupMaxStoreMs":0,"backupPeriodMs":0,"autoManageInstances":0,"autoManageInstancesSettlingPeriodMs":0,"observerThreshold":0,"controlPanel":{}}' 
```

您必须提供整个配置。并更改您希望更改的属性的值。

# php - 这个 PHP 中的异常处理？

> ID：14810021
> 
> 赞同：0
> 
> 时间：2013-02-11T10:14:28.913
> 
> 标签：php, exception, exception-handling

如何处理 PHP 中的异常？例如，在这样的代码中：

```
<?php
   $a=5;
   $b=0
   $c=($a/$b);
   echo $c;
?> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:42:12.290

PHP 不是通过抛出异常来引发警告和错误消息，因此您无法在此处捕获任何内容。但是，您可以修改此行为：

```
// Register a custom error handler that throws an ErrorException
// whenever a warrning or error occurs
set_error_handler(function ($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
});

$a = 5;
$b = 0;

// Now a division by zero will result into an ErrorException being thrown
try {
    $c = $a / $b;
    echo $c;
} catch (ErrorException $e) {
    echo 'Error: ' . $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:27:17.193

据我所知，PHP 不会在除以零时抛出异常。我测试了 5.3，它会触发警告，所有较小的版本也会触发。所以把它放在一个 try 块中不会做任何事情。您可以使用 ErrorException 类将 PHP 错误映射到异常，并使用错误和异常处理程序进行一些操作。请参阅[https://github.com/sam-at-github/php_error_exceptions](https://github.com/sam-at-github/php_error_exceptions)以获取该操作的参考实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T10:25:32.837

**首先：**您正在第二行代码处进行除法（可以除以零）。

**第二：**由于您抛出错误，因此无需在您的方法中返回 false。

**第三：**为什么在这里使用异常而不是让您的方法返回 true 或 false 并在执行 devision 之前检查它。

**第四：**如果你只需要检查 $y 的值，为什么还要有一个方法。调用该方法或包含一个 if 语句只需要一行代码。

那么，为什么不能这样：

```
case '/':                  
    if($b > 0)
        $prod = $a / $b;
    break; 
```

# objective-c - tableview 根据点击的行打开不同的视图

> ID：14810022
> 
> 赞同：1
> 
> 时间：2013-02-11T10:14:34.700
> 
> 标签：objective-c, xcode, uitableview

我目前正在创建一个带有 tableview 的应用程序，现在我喜欢发生的是，当我单击第一行时，它将显示 view1，当我单击第二行时，它将显示 view2。我怎样才能做到这一点？

我尝试使用 if else 语句 id my `didSelectRowAtIndexPath`但它在这里不起作用是我的一段代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

int EntryIndex = [indexPath indexAtPosition:[indexPath length]-1];

{
    AboutViewController *aboutView = [[AboutViewController alloc]init];
    aboutView.getId4 = [[contentArray objectAtIndex:EntryIndex]objectForKey:@"title"];
    aboutView.aboutofficeId = getId3;
     [self.navigationController pushViewController:aboutView animated:YES];
}
else
{
    DepartmentsViewController *deptView = [[DepartmentsViewController alloc]init];
    deptView.getId5 = [[contentArray objectAtIndex:EntryIndex]objectForKey:@"title"];
    deptView.deptoffice = getId3;
    [self.navigationController pushViewController:deptView animated:YES];
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:19:09.067

**注意：你想创建和显示 UIView，所以我把`UIView`Not 放在这里`UIViewController`。**

```
 - (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

        if(indexPath.row == 1)
        {
            UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake("AsYouWnat")];
            view1.backgroundColor = [UIColor redColor];
            [self.view addSubview:view1];
        }
        else if(indexPath.row  == 2)
        {
            UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake("AsYouWnat")];
            view2.backgroundColor = [UIColor redColor];
            [self.view addSubview:view2];
        }
        .
        .
        .
        .
        .
        ////////// As Your Row In Table
        else
        {
            UIView *viewN = [[UIView alloc] initWithFrame:CGRectMake("AsYouWnat")];
            viewN.backgroundColor = [UIColor redColor];
            [self.view addSubview:viewN];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:40:48.817

1.  如果您希望显示视图，您可以声明一个 Mutable 数组并在其中添加 UIview，如果 UIview 内容具有不同类型的内容样式。

2.  如果您需要显示相同样式的视图，但只有内容不同。您可以查找以下代码。

    ```
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,460)];
    switch (indexPath.row) {
    case 0:
    { 
    //Add your label,image,etc  
    [self.view addSubview:view];
    }
        break;

        case 1:
    {

    //Add your label,image,etc  
    [self.view addSubview:view];

    }
        break; 
    ```

3.  如果要显示不同的 ViewController，则需要执行以下代码

    ```
    #import "ViewController1.h"
    #import "ViewController2.h"
    #import "ViewController3.h"

    -(void)viewDidLoad
    {

     VCArray=[[NSMutableArray alloc]initWithObjects:ViewController1,ViewController2,ViewController3];//allocate and init ViewController and add that to VCArray

     }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

     UIViewController *viewcontr=[VCArray objectAtIndex:indexpath.row];
     viewcontr=[[viewcontr alloc]init];
     [self presentModalViewController:viewcontr animated:YES];

      } 
    ```

# jquery - 有什么方法可以让 jQueryUI 可排序以克隆 alt 或 ctrl 上的项目并且没有它就不要克隆？

> ID：14810024
> 
> 赞同：0
> 
> 时间：2013-02-11T10:14:36.053
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

有什么方法可以让 jQueryUI 可排序以克隆 alt 或 ctrl 上的项目并且没有它就不要克隆？我做了这个

```
$(this).sortable({
    activate: function(event, ui) {
        if (event.altKey) {
            ui.item.before(ui.item.clone().removeAttr('style'));
        }
    },
    stop: function(event, ui) {
        ...
    },
    receive: function(event, ui) {
        ...
    },
}); 
```

也许有更好的方法使用`.sortable( "option", "helper", "clone" );`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:42:07.500

是的，有一种方法可以使 jQueryUI 可排序以克隆 alt 或 ctrl 键上的项目，并且不要克隆没有它。看看这个**[How to make jQueryUI sortable to clone items using alt or ctrl keys and don't clone without it?](http://jqfaq.com/how-to-make-jqueryui-sortable-to-clone-items-using-alt-or-ctrl-keys-and-dont-clone-without-it/)** 链接这将帮助您获得它。您必须在您的 css 中使用以下代码

```
 display:block !important; 
```

因为，当您使用克隆选项时，当您开始拖动时，原始项目会以 style="display: none" 隐藏。您可以将处理程序附加到排序事件（或任何隐藏原始项目的事件）以重新显示它。那么一切都应该为你工作。我希望这会对您有所帮助。

# html - 播放后从画布中删除视频 - HTML5

> ID：14810025
> 
> 赞同：0
> 
> 时间：2013-02-11T10:14:38.197
> 
> 标签：html, video, canvas

我正在制作一个视频测验，其中包含许多较小的视频剪辑。播放完视频剪辑后，我需要将其从画布中删除，以便提出问题。或从视频重定向到问题。有谁知道如何做到这一点？

```
<body>
    <video id="pixar" class="video-js vjs-default-skin" controls preload="auto" autoplay ="autoplay" width="800" height="400" data-setup="{}">
        <source src="pixar.mp4" type='video/mp4'>
    </video>  
</body> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:56:38.793

像这样的东西应该工作。

```
<script>
var video = document.getElementByID('pixar');

video.onended = function(e) {
  // remove the video and/or redirect
}
</script> 
```

# java - javax.annotation.Nonnull 与断言

> ID：14810030
> 
> 赞同：15
> 
> 时间：2013-02-11T10:14:54.547
> 
> 标签：java, assert, findbugs, null-check

我在方法参数上使用 Findbugs 和 javax.annotation.Nonnull。

在私有方法上，我通常添加一个断言行来检查空值，例如

```
private void myMethod(@Nonnull String str) {
    assert str != null
    .... 
```

最新的 Netbeans 版本 (7.3rc2) 报告断言检查是不必要的（因为 Nonnull 注释）。我不完全确定这是否是 Netbeans 错误。

可以因为我指定了 @Nonnull 注释而删除断言行吗？

据我了解，注释仅在静态分析期间使用，而断言在启用时在执行期间处于活动状态，因此两者不可替代。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T12:25:59.050

断言在运行时被评估，注解帮助 FindBugs 在运行前的分析过程中发现问题。由于这两项检查并不真正冲突，您可以同时保留它们。如果我的 IDE 告诉我删除断言，我会觉得很烦人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T10:31:55.037

Netbeans 是对的。如果您认为它可以为空：删除注释。如果您知道它不能：删除断言。

如果您的方法有可能被调用为空值，那么`@Nonnull`注释不应该存在。

就像您说的那样，该注释实际上在运行时并没有做任何事情：它仅由 IDE 和静态代码分析工具使用。它不能确保事物不为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T00:06:30.913

由于这是私有方法，我们可以确保带注释的参数不能为空。我认为您可以删除此断言。

如果 NetBeans 警告公共方法，我认为它有问题。我建议你提出断言。

如果您仍然觉得私有方法中的断言是必要的，我认为您可以使用字节码注入。例如，这是一个注入空检查的 Maven 插件。抱歉，这是我的个人项目，但它对我有用。我想它可以满足你的需要。 [https://github.com/KengoTODA/jsr305-maven-plugin](https://github.com/KengoTODA/jsr305-maven-plugin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T14:17:15.543

当我在考虑我的 IDE 警告时，我找到了一个不同的解决方案。

最初，我觉得 IDE 是错误的。我是一个偏执的程序员，并且希望拥有用于文档和静态分析的标签以及*运行*时检查，以防我从反射或其他 JVM 语言或其他不可静态分析的东西中使用它，所以我认为这是错误的给我一个警告并告诉我`assert(x != null)`不需要声明。

`-ea`但是后来我想到了如何根据在运行时传递给 Java的标志的状态来删除断言，`assert`并且在某些方面`@Nonnull`实际上都是仅用于开发的检查。

事实证明，可以插入一个实际的运行时检查（Java 7+）[`Objects.requireNonNull`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull%28T%29)，它会抛出一个`NullPointerException`并且不能用`-ea`断言删除。我想我会更喜欢这个而不是我的`assert(x != null); use(x);`模式。

```
public ConstructorForClass(@Nonnull Type x) {
  this.x = Objects.requireNonNull(x);
  //...
} 
```

# java - java中的“最后访问”与“最后修改”文件日期（Windows）

> ID：14810033
> 
> 赞同：3
> 
> 时间：2013-02-11T10:15:02.303
> 
> 标签：java, windows, last-modified

我的 windows 目录中有一组文件，这些文件是从其他地方复制的。在检查其中一个文件的属性时（右键单击 -> 属性），它显示：

创建时间：今天，2013 年 2 月 11 日，下午 2:51:56

修改时间：2013 年 1 月 1 日，星期二，上午 8:30:04

访问时间：今天，2013 年 2 月 11 日，下午 2:51:56

“创建”和“访问”字段基本上显示文件实际复制到新目录的时间，而“修改”字段显示原始文件的修改日期。

在 Java 中使用`file.lastModified()`我得到的是“已访问”（或“已创建”）时间戳。有没有办法获得原始文件的“修改”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:39:31.290

除了在 Java 7 中使用“外部”库（如提到的 JavaXT）外，您还可以使用新的文件 API（查看此[Java 7 nio.2 教程](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)）。

```
File attribFile = new File("/tmp/file.txt");
Path attribPath = attribFile.toPath();
BasicFileAttributeView basicView =
    attribPath.getFileAttributeView(BasicFileAttributeView.class);
BasicFileAttributes basicAttribs = basicView.readAttributes();

System.out.println("Created: " + basicAttribs.creationTime());
System.out.println("Accessed: " + basicAttribs.lastAccessTime());
System.out.println("Modified: " + basicAttribs.lastModifiedTime()); 
```

查看[这篇文章](http://www.ibm.com/developerworks/java/library/j-nio2-2/)以获取更多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:23:37.850

您可以添加[这个 JavaXT 库](http://www.javaxt.com)，然后您就可以执行以下操作：

```
javaxt.io.File file = new javaxt.io.File("/tmp/file.txt");
System.out.println("Created: " + file.getCreationTime());
System.out.println("Accessed: " + file.getLastAccessTime());
System.out.println("Modified: " + file.getLastModifiedTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:40:18.340

至于 JavaXT 和 Java 7 不适合您，您可以尝试一些更奇特的方法，如果您准备只坚持使用 Windows 平台。就大多数 *nix 文件系统而言，文件创建属性不存在，所以这似乎不是很大的限制。

1）。输出

```
 Runtime.getRuntime().exec("cmd /c dir c:\\logfile.log /tc"); 
```

[这里的](http://www.mkyong.com/java/how-to-get-the-file-creation-date-in-java/)工作示例

2）。尝试另一个“外部”库。例如[文件时间](http://www.download3k.com/Web-Authoring/Java-JavaScript-Editors/Download-Canadian-Mind-Products-FileTimes.html)

3）。您可以利用 JNA 直接调用 Windows API 函数。顺便说一句，当我尝试使用 JNA 和文件属性函数找到代码示例时，我发现[了这个问题](https://stackoverflow.com/questions/32586/how-to-discover-a-files-creation-time-with-java)，所以你的问题似乎是重复的 :-)

# c# - 从 asp.net 中的存储过程中获取返回值

> ID：14810037
> 
> 赞同：19
> 
> 时间：2013-02-11T10:15:10.570
> 
> 标签：c#, asp.net, sql-server

我有一个存储过程

```
ALTER PROC TESTLOGIN
    @UserName varchar(50),
    @password varchar(50)
As
Begin
    declare @return int;

    set @return  = (SELECT COUNT(*) 
                    FROM CPUser 
                    WHERE UserName = @UserName 
                    AND Password = @password);

    return @return;
End 
```

并在 C# 中

```
SqlConnection con = db.con;
SqlCommand cmd = new SqlCommand("TESTLOGIN", con);
cmd.CommandType = CommandType.StoredProcedure;

SqlParameter parm = new SqlParameter("@return", SqlDbType.Int);
parm.Direction = ParameterDirection.ReturnValue;

cmd.Parameters.Add(parm);
cmd.Parameters.Add(new SqlParameter("@UserName", txtUserName.Text.ToString().Trim()));
cmd.Parameters.Add(new SqlParameter("@password", txtPassword.Text.ToString().Trim()));

cmd.ExecuteNonQuery();
con.Close();

int id = Convert.ToInt32(parm.Value); 
```

但它总是返回 0。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-11T16:15:51.750

您需要`ParameterDirection.ReturnValue`在代码中将 Direction 设置为参数，但无需在 SP 中添加额外参数。试试这个

```
 SqlParameter returnParameter = cmd.Parameters.Add("RetVal", SqlDbType.Int);
  returnParameter.Direction = ParameterDirection.ReturnValue;
  cmd.ExecuteNonQuery();

  int id = (int) returnParameter.Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-16T03:26:50.397

2 件事。

*   在发送返回值之前，查询必须在 sql server 上完成。

*   必须捕获结果，然后在返回值到达对象之前完成执行。

用英语，完成工作，然后检索值。

这不起作用：

```
 cmm.ExecuteReader();
                int i = (int) cmm.Parameters["@RETURN_VALUE"].Value; 
```

这将起作用：

```
 SqlDataReader reader = cmm.ExecuteReader();
                        reader.Close();

                        foreach (SqlParameter prm in cmd.Parameters)
                        {
                           Debug.WriteLine("");
                           Debug.WriteLine("Name " + prm.ParameterName);
                           Debug.WriteLine("Type " + prm.SqlDbType.ToString());
                           Debug.WriteLine("Size " + prm.Size.ToString());
                           Debug.WriteLine("Direction " + prm.Direction.ToString());
                           Debug.WriteLine("Value " + prm.Value);

                        } 
```

如果您不确定在读者处理结果之前和之后检查参数的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:35:48.667

你可以试试这个。添加参数作为输出方向，执行查询后得到输出参数值。

```
 SqlParameter parmOUT = new SqlParameter("@return", SqlDbType.Int);
  parmOUT.Direction = ParameterDirection.Output;
  cmd.Parameters.Add(parmOUT);
  cmd.ExecuteNonQuery();
  int returnVALUE = (int)cmd.Parameters["@return"].Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:52:15.007

过程从不返回值。您必须在存储过程中使用输出参数。

```
ALTER PROC TESTLOGIN
@UserName   varchar(50),
@password   varchar(50)
@retvalue int output
 as
 Begin
    declare @return     int 
    set @return  = (Select COUNT(*) 
    FROM    CPUser  
    WHERE   UserName = @UserName AND Password = @password)

   set @retvalue=@return
  End 
```

然后你必须从 c# 添加一个参数方向为 out 的 sqlparameter。希望这是有道理的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-16T12:13:04.680

如果您想知道如何将值从存储过程返回到 Visual Basic.NET。请阅读本教程：[如何从存储过程中返回值](http://tutz4u.blogspot.in/2014/03/how-to-return-value-from-stored-procedure-in-sql-server-to-visual-basic.html)

我使用以下存储过程来返回值。

```
CREATE PROCEDURE usp_get_count

AS
BEGIN
 DECLARE @VALUE int;

 SET @VALUE=(SELECT COUNT(*) FROM tblCar);

 RETURN @VALUE;

END
GO 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-11T10:58:01.380

这样做（在代码中进行必要的更改）..

```
 SqlConnection con = new SqlConnection(GetConnectionString());
            con.Open();
            SqlCommand cmd = new SqlCommand("CheckUser", con);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlParameter p1 = new SqlParameter("username", username.Text);
            SqlParameter p2 = new SqlParameter("password", password.Text);
            cmd.Parameters.Add(p1);
            cmd.Parameters.Add(p2);
            SqlDataReader rd = cmd.ExecuteReader();
            if(rd.HasRows)
            {
                //do the things
            }
            else
            {
                lblinfo.Text = "abc";
            } 
```

# c++ - 在给定 N-1 个约束的情况下，计算小于整数 N 的数字的可能排列数

> ID：14810038
> 
> 赞同：3
> 
> 时间：2013-02-11T10:15:10.613
> 
> 标签：c++, algorithm

我们得到一个整数`N`，我们需要计算小于 N 的数字的排列总数。我们还给出了`N-1`约束。例如：

如果`N=4`然后计算给定的排列`0,1,2,3`：

```
0>1
0>2
0>3 
```

我考虑过制作一个图表，然后计算同一级别的数字排列总数，并将其与其他级别的排列相乘。例如：

对于上面的例子：

```
 0
           / |  \
          /  |   \
         1   2    3 ------> 3!=6 So total no of permutations are 6. 
```

但我很难在`C++`. 另外，这个问题是在 Facebook 黑客杯中被问到的，现在比赛已经结束了。我看过其他人的代码，发现他们是使用`DFS`. 有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:10:08.820

最简单的方法是使用标准排列生成器并过滤掉每个违反条件的排列。这显然是非常低效的，并且对于较大的 N 值是不可计算的。这样做有点像这些比赛的“诱杀”选项，它允许不太聪明的参赛者完成问题。

熟练的方法需要深入了解计算组合和排列的方法。为了说明该方法，我将使用一个示例。输入：

```
 N = 7  
   2 < 4  
   0 < 3  
   3 < 6 
```

我们首先通过将相关条件组合成一个条件来简化这一点，如下所示：

```
 2 < 4  
   0 < 3 < 6 
```

从最长的条件开始，并确定间隙的组合计数（这是关键见解）。例如，一些组合如下：

```
 XXXX036  
   XXX0X36  
   XXX03X6  
   XXX036X  
   XX0XX36  
   etc. 
```

现在，您可以看到有 4 个差距： ? 0 ? 3 ? 6 ?. 我们需要计算这四个间隙中 X 的可能分区。这种分区的数量是（7 选择 3）= 35（你明白为什么吗？）。现在，我们接下来乘以下一个条件的组合，即剩余空白点（X）上的 2 < 4。我们可以相乘，因为这个条件完全独立于 0<3<6 条件。此组合计数为（4 选择 2）= 6。最终条件在 2 个点中有 2 个值 = 2！= 2。因此，答案是 35 x 6 x 2 = 420。

现在，让我们让它变得更复杂一些。添加条件：

```
 1 < 6 
```

这改变计算的方式是在 036 之前必须以该顺序出现。但是，现在，我们有三种可能的安排：

```
 1036  
   0136  
   0316 
```

因此，现在的总数为 (7 选择 4) x 3 x (3 选择 2) = 35 x 3 x 3 = 315。

因此，回顾一下，程序是将问题隔离为独立的条件。对于每个独立条件，您计算分区的组合，然后将它们相乘。

我已经手动完成了这个示例，但您可以编写相同的程序。

# c# - 使用 getJSON 在 MVC 中显示客户列表（姓名、地址）

> ID：14810041
> 
> 赞同：0
> 
> 时间：2013-02-11T10:15:28.550
> 
> 标签：c#, jquery, asp.net-mvc, json

当一个人在文本框中输入国家名称并单击按钮时，我正在尝试获取客户列表（姓名和地址）。

这是视图：

```
<p>
    Enter country name @Html.TextBox("Country")
    <input type="submit" id="GetCustomers" value="Submit"/>
</p> 
```

这是 JSON 调用：

```
<script type="text/jscript">
    $('#GetCustomers').click(function () {

        //var url = "/Home/CustomerList";
        //var Country = $('#Country').val();
        //$.getJSON(url, { input: Country }, function (data) {

        $.getJSON('/Home/CustomerList/' + $('#Country').val(), function (data) {

            var items = '<table><tr><th>Name</th><th>Address</th></tr>';
            $.each(data, function (i, country) {
                items += "<tr><td>" + country.ContactName + "</td><td>" + country.Address + "</td></tr>";
            });
            items += "</table>";

            $('#rData').html(items);
        });
    })
</script> 
```

这是控制器：

```
public JsonResult CustomerList(string Id)
{
    var result = from r in db.Customers
                    where r.Country == Id
                    select r;
    return Json(result);
} 
```

***我的问题是：***

**i）当我使用以下**

```
var url = "/Home/CustomerList";

var Country = $('#Country').val();

$.getJSON(url, { input: Country }, function (data) { 
```

它没有将参数传递给 CustomerList 方法，但是以下工作正常

```
$.getJSON('/Home/CustomerList/' + $('#Country').val(), function (data) { 
```

**ii) 当我使用以下 JSON 时**

```
$.getJSON('/Home/CustomerList/' + $('#Country').val(), function (data) { 
```

然后按照 CustomerList 方法

```
public JsonResult CustomerList(string Id)
{
    var result = from r in db.Customers
                    where r.Country == Id
                    select r;
    return Json(result);
} 
```

当我使用'string Id'时它工作正常，但是当我使用'string country'然后'where r.Country == country'时，不起作用。

**iii）这是处理响应的正确方法，不工作**

```
var items = '<table><tr><th>Name</th><th>Address</th></tr>';
$.each(data, function (i, country) {
    items += "<tr><td>" + country.ContactName + "</td><td>" + country.Address + "</td></tr>";
});
items += "</table>";

$('#rData').html(items); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:25:02.113

试试这个

```
 $('#GetCustomers').click(function () {

    //var url = "/Home/CustomerList";
    //var Country = $('#Country').val();
    //$.getJSON(url, { input: Country }, function (data) {

    $.getJSON('/Home/CustomerList/' + $('#Country').val(), function (data) {

        var items = '<table><tr><th>Name</th><th>Address</th></tr>';
        $.each(data, function (i, country) {
            items += "<tr><td>" + country.ContactName + "</td><td>" + country.Address + "</td></tr>";
        });
        items += "</table>";

        $('#rData').html(items);
    },'json');
}); 
```

这是文档[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# c# - 获取 List 中不同值的列表 在c#中

> ID：14810047
> 
> 赞同：4
> 
> 时间：2013-02-11T10:15:44.780
> 
> 标签：c#, .net, linq, list, distinct

所以，假设我有以下内容：

```
public class Element
{
  public int ID;
  public int Type;
  public Properties prorerty;
  ...
} 
```

和

```
public class Properties
{
  public int Id;
  public string Property;
  ...
} 
```

我有一个清单：

```
List Elements = new List();
```

在 Element 类的 prorerty 列中获取所有不同值的列表的最简洁方法是什么？我的意思是，我可以遍历列表并将所有不重复的值添加到另一个字符串列表中，但这似乎很脏且效率低下。我有一种感觉，有一些神奇的 Linq 构造可以在一行中完成此操作，但我无法想出任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T10:17:41.063

```
 var results = Elements.Distinct(); 
```

注意：您将不得不覆盖`.Equals`和`.GetHashCode()`

```
public class Element : IEqualityComparer<Element>
{
   public bool Equals(Element x, Element y)
   {
     if (x.ID == y.ID)
     {
        return true;
     }
     else
     {
        return false;
     }
   }
}

public int GetHashCode(Element obj)
{
    return obj.ID.GetHashCode();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-06T09:27:46.340

使用下面显示的方法之一是不是更简单:)？您可以通过某个键对域对象进行分组，然后选择 FirstOrDefault 如下所示。这是我在此处对类似问题的回答的副本： [获取唯一值 - 原始答案](https://stackoverflow.com/questions/19539193/get-distinct-list-values/37653582#37653582)

更有趣的选项是创建一些比较器适配器，该适配器将您带入域对象并创建比较器可以使用/开箱即用的其他对象。基于比较器，您可以创建自定义 linq 扩展，如下面的示例所示。希望能帮助到你 ：）

```
[TestMethod]
public void CustomDistinctTest()
{
    // Generate some sample of domain objects
    var listOfDomainObjects = Enumerable
                                .Range(10, 10)
                                .SelectMany(x => 
                                    Enumerable
                                    .Range(15, 10)
                                    .Select(y => new SomeClass { SomeText = x.ToString(), SomeInt = x + y }))
                                .ToList();

    var uniqueStringsByUsingGroupBy = listOfDomainObjects
                                    .GroupBy(x => x.SomeText)
                                    .Select(x => x.FirstOrDefault())
                                    .ToList();

    var uniqueStringsByCustomExtension = listOfDomainObjects.DistinctBy(x => x.SomeText).ToList();
    var uniqueIntsByCustomExtension = listOfDomainObjects.DistinctBy(x => x.SomeInt).ToList();

    var uniqueStrings = listOfDomainObjects
                            .Distinct(new EqualityComparerAdapter<SomeClass, string>(x => x.SomeText))
                            .OrderBy(x=>x.SomeText)
                            .ToList();

    var uniqueInts = listOfDomainObjects
                            .Distinct(new EqualityComparerAdapter<SomeClass, int>(x => x.SomeInt))
                            .OrderBy(x => x.SomeInt)
                            .ToList();
} 
```

自定义比较器适配器：

```
public class EqualityComparerAdapter<T, V> : EqualityComparer<T>
    where V : IEquatable<V>
{
    private Func<T, V> _valueAdapter;

    public EqualityComparerAdapter(Func<T, V> valueAdapter)
    {
        _valueAdapter = valueAdapter;
    }

    public override bool Equals(T x, T y)
    {
        return _valueAdapter(x).Equals(_valueAdapter(y));
    }

    public override int GetHashCode(T obj)
    {
        return _valueAdapter(obj).GetHashCode();
    }
} 
```

自定义 linq 扩展（DistinctBy 扩展方法的定义）：

```
// Embed this class in some specific custom namespace
public static class DistByExt
{
    public static IEnumerable<T> DistinctBy<T,V>(this IEnumerable<T> enumerator,Func<T,V> valueAdapter)
        where V : IEquatable<V>
    {
        return enumerator.Distinct(new EqualityComparerAdapter<T, V>(valueAdapter));
    }
} 
```

测试用例中使用的域类的定义：

```
public class SomeClass
{
    public string SomeText { get; set; }
    public int SomeInt { get; set; }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:18:54.673

```
var props = Elements.Select(x => x.Properties).Distinct(); 
```

并确保你重写`.Equals()`和`.GetHashCode()`方法。
或者，如果您需要来自以下的直接字符串`Properties`：

```
var props = Elements
    .Select(x => x.Properties != null ? x.Properties.Property : null)
    .Distinct(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T10:28:19.093

如果您需要字段上的字符串字段`Properties`，并且您知道该`Properties`字段`prorerty`是 never `null`，只需使用

```
IEnumerable<string> uniqueStrings = Elements
  .Select(e => e.prorerty.Property).Distinct(); 
```

如果有机会`prorerty`可以为空，请在 lambda 中处理这种情况。

这将使用默认的相等比较器，`String`它是一个独立于文化和区分大小写的*序数比较。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T13:26:04.390

我来自 LINQPad（C# 程序）的工作示例

```
void Main()
{
    var ret = new List<Element>();
    ret.Add(new Element(){ID=1});
    ret.Add(new Element(){ID=1});
    ret.Add(new Element(){ID=2});
    ret = ret.GroupBy(x=>x.ID).Select(x=>x.First()).ToList();
    Console.WriteLine(ret.Count()); // shows 2
}

public class Element
{
  public int ID;
  public int Type;
  public Properties prorerty; 
}

public class Properties
{
  public int Id;
  public string Property;

} 
```

# php - Mysql REPLACE 和删除旧条目

> ID：14810050
> 
> 赞同：0
> 
> 时间：2013-02-11T10:15:57.397
> 
> 标签：php, mysql, replace

我有一个包含 57k 条目的表，其中列 comp_phone (UNIQUE KEY `Phone`( `comp_phone`)) 现在我尝试用

```
update uk_data set comp_phone= REPLACE(comp_phone,'  ',' ') 
```

但是因为我在此列上有 UNIQUE KEY 我收到错误

```
[SQL] update uk_data set comp_phone= REPLACE(comp_phone,'  ',' ')

[Err] 1062 - Duplicate entry '01268 203***' for key 'Phone' 
```

所以我正在使用

```
DELETE FROM uk_data WHERE comp_phone = '01268 203***' 
```

删除旧行。但这需要很长时间，因为我不知道在 REPLACE 之后有多少行重复所以有没有一种简单的方法来替换和删除或覆盖旧条目

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:56:24.690

测试这个查询

```
CREATE TEMPORARY table Kratika
(
    _id int,
    _value varchar(50)
);

INSERT INTO Kratika
SELECT 1, '1111222255' UNION 
SELECT 2, '1111222 255' UNION -- duplicate
SELECT 3, '11112222 55' UNION -- duplicate
SELECT 4, '1111222233'; -- not duplicate

SELECT * FROM Kratika;

DELETE FROM Kratika WHERE _value <> REPLACE(_value, ' ', '') ;

SELECT * FROM Kratika; 
```

**输出**

```
1   1111222255
2   1111222 255
3   11112222 55
4   1111222233

-- Select after deletion of duplicate records
    1   1111222255
    4   1111222233 
```

**已编辑**

如果你对 while 循环没问题，那么你可以测试一下（我不是 MySQL 开发人员，我不知道为什么 MySQL 不允许我编写 while 循环，所以创建了相同的 proc）

```
DROP PROCEDURE IF EXISTS test_kratik;
delimiter ##

CREATE PROCEDURE test_kratik
(

)
BEGIN
DROP table IF EXISTS Kratika;
CREATE TEMPORARY table Kratika
(
    _id int,
    _value varchar(50)
);

INSERT INTO Kratika
SELECT 1, '1111222255' UNION 
SELECT 2, '1111222 255' UNION -- duplicate
SELECT 3, '11112222 55' UNION -- duplicate
SELECT 4, '1111222233'; -- not duplicate

SELECT * FROM Kratika;

SET @ID := 0;
SET @DUP_ID := 0;
SET @value := '';

WHILE @ID <= (SELECT MAX(_id) FROM kratika) DO
    BEGIN
        IF EXISTS(SELECT _id from kratika WHERE _id = @ID) THEN
            BEGIN
                SET @value = (SELECT REPLACE(_value, ' ', '') from kratika WHERE _id = @ID);
                DELETE FROM kratika
                WHERE REPLACE(_value, ' ', '') = @value
                AND _id <> @ID;
            END;
        END IF;
        SET @ID = @ID + 1;
    END;
END WHILE;

UPDATE kratika
SET _value = REPLACE(_value, ' ', '') 
WHERE _value <> REPLACE(_value, ' ', '') ;

SELECT * FROM kratika;

END ##

delimiter ;

CALL test_kratik(); 
```

**更新** *如果你不想使用while循环就好了......*

```
 DROP TABLE IF EXISTS Kratika; 

CREATE TEMPORARY table Kratika
(
    _id int,
    _value varchar(50)
);

INSERT INTO Kratika
SELECT 1, '1111222255' UNION 
SELECT 2, '1111222 255' UNION -- duplicate
SELECT 3, '11112222 55' UNION -- duplicate
SELECT 4, '111122 2233'; -- not duplicate

DROP TABLE IF EXISTS copy_temp; 

CREATE TEMPORARY table copy_temp  
(
    _id1 int,
    _value1 varchar(50)
);

INSERT INTO copy_temp
SELECT _id, _value FROM kratika;

SELECT * FROM Kratika;

DELETE FROM Kratika 
WHERE _id <> (SELECT _id1 FROM copy_temp 
WHERE REPLACE(_value, ' ', '') = REPLACE(_value1, ' ', '') 
Limit 1
);

UPDATE kratika
SET _value = REPLACE(_value, ' ', '') 
WHERE _value <> REPLACE(_value, ' ', '') ;

SELECT * FROM Kratika; 
```

**输出**

```
1   1111222255
2   1111222 255
3   11112222 55
4   1111222233 
```

**更新后**

```
1   1111222255
4   1111222233 
```

# javascript - 从 iframe 内部的 .JS 文件调用父函数

> ID：14810057
> 
> 赞同：0
> 
> 时间：2013-02-11T10:16:14.813
> 
> 标签：javascript, asp.net, html, iframe

我有带有上传功能的 JS 文件。此文件从 iframe 窗口调用。我需要根据用户的操作向用户显示警报。

这是我所做的，但它不起作用：

**来自 JS 文件：**

```
$('#btnUpload').on('click', function(){
    parent.CallToParent();
}); 
```

**从 UploaderWindow 调用到：**

```
function CallToParent()
{
   parent.ShowAlert();
} 
```

**在主窗口上：**

```
function ShowAlert()
{
   alert('some alert');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:37:48.370

我认为你做得对。不知道`parent.CallToParent()`在`click`事件中是否真的是指父窗口中的功能。如果没有，那么你可以做类似的事情。

**来自 JS 文件：**

```
$(document).ready(function () {
    $('#btnUpload').on('click', function() {
        callParent();
    })
}); 
```

**从 iframe 开始：**

```
<script type="text/javascript" src="/common/jq.js"></script>
<script type="text/javascript" src="c.js"></script>
<script>
    function callParent() {
        parent.fn();
    }
</script>

<input id="btnUpload" type="button" /> 
```

**主文件**

```
<script>
    function fn() {
        console.log('Parent function called');
    }
</script>

<iframe src="b.html"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:18:21.987

据我所知，这两个上下文之间没有脚本的互操作性。

如果您可以控制`iframe`内容，那么您可以实施“中间人”服务来管道消息。

# python - Python：KeyError 'shift'

> ID：14810060
> 
> 赞同：4
> 
> 时间：2013-02-11T10:16:46.743
> 
> 标签：python, pandas, shift, zipline

我是 Python 新手，并尝试修改我在这里找到的配对交易脚本： [https ://github.com/quantopian/zipline/blob/master/zipline/examples/pairtrade.py](https://github.com/quantopian/zipline/blob/master/zipline/examples/pairtrade.py)

原始脚本旨在仅使用价格。我想使用回报来适应我的模型和投资数量的价格，但我不知道该怎么做。

我试过了：

*   在 main 中定义返回的数据框并在运行中调用它
*   将 main 中的返回数据框定义为全局对象，并在“处理数据”中需要时使用
*   直接在句柄数据中定义一个retuns的数据框

我认为最后一个选项是最合适的，但是熊猫'shift'属性出现错误。

更具体地说，我尝试将“DataRegression”定义如下：

```
DataRegression = data.copy()
DataRegression[Stock1]=DataRegression[Stock1]/DataRegression[Stock1].shift(1)-1
DataRegression[Stock2]=DataRegression[Stock2]/DataRegression[Stock2].shift(1)-1
DataRegression[Stock3]=DataRegression[Stock3]/DataRegression[Stock3].shift(1)-1
DataRegression = DataRegression.dropna(axis=0) 
```

其中“数据”是一个数据框，其中包含全局定义的价格、库存 1、库存 2 和库存 3 列名称。句柄数据中的那些行返回错误：

```
File "A:\Apps\Python\Python.2.7.3.x86\lib\site-packages\zipline-0.5.6-py2.7.egg\zipline\utils\protocol_utils.py", line 85, in __getattr__
return self.__internal[key]
KeyError: 'shift' 
```

有谁知道为什么以及如何正确地做到这一点？

非常感谢，文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:20:41.073

这是一个有趣的想法。在 zipline 中执行此操作的最简单方法是使用 Returns 转换，该转换将返回字段添加到事件框架（这是一个 ndict，而不是有人指出的 pandas DataFrame）。

为此，您必须将转换添加到初始化方法： `self.add_transform(Returns, 'returns', window_length=1)`

（确保`from zipline.transforms import Returns`在开头添加）。

然后，在 batch_transform 中，您可以访问返回而不是价格：

```
@batch_transform
def ols_transform(data, sid1, sid2):
    """Computes regression coefficient (slope and intercept)
    via Ordinary Least Squares between two SIDs.
    """
    p0 = data.returns[sid1]
    p1 = sm.add_constant(data.returns[sid2])
    slope, intercept = sm.OLS(p0, p1).fit().params

    return slope, intercept 
```

或者，您也可以创建一个 batch_transform 来将价格转换为您想要的回报。

```
@batch_transform
def returns(data):
    return data.price / data.price.shift(1) - 1 
```

然后将其传递给 OLS 变换。或者在 OLS 变换本身内部进行此计算。

HTH，托马斯

# android - Android - EditText 不会让键盘消失

> ID：14810061
> 
> 赞同：1
> 
> 时间：2013-02-11T10:16:59.080
> 
> 标签：android

我有一个`EditText`，当用户按下键盘上的“完成”时，我需要它失去焦点*并使*键盘消失。我的代码如下：

```
etFromCustom.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            ((LinearLayout) findViewById(R.id.linlay_dummy)).requestFocus(); //this is what I have to do - send focus to a dummy layout
            return true;
        }               
        return false;
    }
}); 
```

我知道，默认情况下，键盘上的“完成”键隐藏了软件键盘，但由于我覆盖了它，它不再起作用：`EditText`确实失去焦点，但键盘并没有消失，而是从数字一到四分之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:19:25.823

尝试这个，

在您的 xml 中添加此代码。特别是`EditText`在你的 xml 文件中。

```
android:imeOptions="actionDone" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:20:37.003

试试下面的代码

放入创建活动

```
private InputMethodManager imm;
imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

DoneButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
            //  yourEditTextView.setText("");

                imm.hideSoftInputFromWindow(
                        searchEditTextView.getWindowToken(), 0);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }); 
```

# iphone - 无法知道 doesNotRecognizeSelector _cmd

> ID：14810062
> 
> 赞同：0
> 
> 时间：2013-02-11T10:16:59.557
> 
> 标签：iphone

谁能告诉我 doesNotRecognizeSelect _cmd 会做什么

```
- (NSDictionary*)Event:(EventBase*)eventBase
{
    [self doesNotRecognizeSelector:_cmd];
    return nil;
} 
```

`[self doesNotRecognizeSelect:_cmd];` 没有自我方法调用，但它的调用，任何人都可以知道 _cmd 到 doesNotRecognizeSelect

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:27:41.223

```
- (void)doesNotRecognizeSelector:(SEL)aSelector 
```

aSelector 是 _cmd

它指出该方法没有被接收者实现或识别。

每当对象接收到它无法响应或转发的 aSelector 消息时，运行时系统就会调用此方法。反过来，此方法引发 NSInvalidArgumentException，并生成错误消息。

```
- (id)copy
{
    [self doesNotRecognizeSelector:_cmd];
} 
```

_cmd 变量是传递给当前选择器的每个方法的隐藏参数；在此示例中，它标识了复制方法的选择器。此代码阻止子类的实例响应复制消息或超类转发复制消息 - 尽管 respondsToSelector: 仍会报告接收者有权访问复制方法。

# actionscript-3 - 错误 #2007：参数 hitTestObject 必须为非空

> ID：14810065
> 
> 赞同：0
> 
> 时间：2013-02-11T10:17:16.990
> 
> 标签：actionscript-3, flash

这是我的代码-它正在工作并移至第 3 帧，但一切都卡在那里，我收到此错误 #2007

```
function createMC(event:Event):void 
{
  var hasa_mc:MovieClip= new hasa();
  stage.addChild(hasa_mc);
  var halfMc:int=hasa_mc.width/2;
  hasa_mc.x=randomNum(70+halfMc,480-halfMc);
  hasa_mc.addEventListener(Event.ENTER_FRAME, abc);
  hasa_mc.addEventListener(Event.ENTER_FRAME, dropCheckHit);

  function dropCheckHit(event:Event):void 
  {
    if (hasa_mc.hitTestObject(hauta1_mc)) {
        hasa_mc.removeEventListener(Event.ENTER_FRAME, dropCheckHit);
        event.target.parent.removeChild(event.target);
        countertime++;
        score_txt.text=String(countertime*10)

        if (countertime==10)
        {
    gotoAndStop(3);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:23:07.357

错误代码和描述参考以下行：

`if (hasa_mc.hitTestObject(hauta1_mc)) {`

我的猜测是`hauta1_mc`电影的第 3 帧上不存在影片剪辑，因此一旦您转到第 3 帧并且您的`dropCheckHit`函数执行时，就会抛出空引用错误。

要解决此问题，您可以删除输入帧侦听器并停止检查是否已命中影片剪辑：

```
if (countertime==10)
{
  hasa_mc.removeEventListener(Event.ENTER_FRAME, dropCheckHit);
  gotoAndStop(3);
} 
```

`hasa_mc`注意：如果第`hasa_mc`3 帧中不存在其他侦听器，您可能还需要删除其他侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:24:26.223

谢谢你。我还需要从哪里删除？仍然不起作用。当它进入第 3 帧时，有新的 MC 击中新对象

函数dropCheckHit（事件：事件）：无效{

```
 if (hasa_mc.hitTestObject(hauta1_mc)) {
        hasa_mc.removeEventListener(Event.ENTER_FRAME, dropCheckHit);
        event.target.parent.removeChild(event.target);
        countertime++;
        score_txt.text=String(countertime*10)

        if (countertime==10)
        {

     gotoAndStop(3);
     hasa_mc.removeEventListener(Event.ENTER_FRAME, dropCheckHit);

    }

        hauta1_mc.nextFrame();}

          else if (hasa_mc.y > 380) 
{
    xdirection = 0;
    ydirection = 0;
    hasa_mc.x = 190;

    hasa_mc.y = 200;
    hauta1_mc.x=220;

    lifeCounter--; // 
    life_txt.text=String(lifeCounter);
    trace(lifeCounter);
    if (lifeCounter==0)
    {
    gotoAndStop(5);
    }
}

} 
```

}

# android - AsynkTask 参数混淆

> ID：14810066
> 
> 赞同：0
> 
> 时间：2013-02-11T10:17:20.393
> 
> 标签：android, android-asynctask

我有以下完全工作的代码，这些代码是由其他人的示例中的一些剪切和粘贴拼凑而成的：

```
private class Get_tweets_async_task_class extends AsyncTask<String, Integer, Bitmap>
{
    protected void onPreExecute()
    {
    }

    @Override
    protected Bitmap doInBackground(String... params) 
    {
        array_of_single_tweets = getTweets(params[0], 1);

        return null;
    } 

    protected void onProgressUpdate(Integer... params)
    {
    }

    protected void onPostExecute(Bitmap img)
    {
        update_display_list();
    }

    protected void onCancelled()
    {
    }
} 
```

我的代码实际上不需要与位图有任何关系（这是示例的后遗症），现在我正试图摆脱它。我将代码编辑如下：

```
private class Get_tweets_async_task_class extends AsyncTask<String, Integer, Void>
{
    protected void onPreExecute()
    {
    }

    @Override
    protected Void doInBackground(String... params) 
    {
        array_of_single_tweets = getTweets(params[0], 1);

        return null;
    } 

    protected void onProgressUpdate(Integer... params)
    {
    }

    protected void onPostExecute()
    {
        update_display_list();
    }

    protected void onCancelled()
    {
    }
} 
```

但现在代码不再有效。我在删除位图时做错了吗？

**编辑：**对不起，我打错了 onPostExecute 行 - 现在更正了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:18:36.307

受保护的无效 onPostExecute（无效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:19:12.100

你需要修正你的`onPostExecute`方法。
结果它仍然接收`Bitmap`，将其更改为 Void。

您编辑您的帖子，但问题是相同的`onPostExecute`。
请查看官方文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# xml - XSLT2.0 名称空间支持

> ID：14810075
> 
> 赞同：0
> 
> 时间：2013-02-11T10:17:45.887
> 
> 标签：xml, xslt-2.0

我想使用 xslt 转换以下 xml。 **注意：我在输入 xml 中使用名称 spave**

**输入 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<Roottag xmlns="aaa">
    <Employee>
        <name>Nimal</name>
    </Employee>
    <Employee>
        <name>Kamal</name>
    </Employee>
    <Employee>
        <name>Sunil</name>
    </Employee>
</Roottag> 
```

**XSLT**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="//name">
        <xsl:element name="person">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**预期产出**

```
<?xml version="1.0" encoding="UTF-8"?>

<person>Nimal</person>
<person>Kamal</person>
<person>Sunil</person> 
```

**电流输出**

```
<?xml version="1.0" encoding="UTF-8"?>  
        Nimal   
        Kamal   
        Sunil 
```

任何人都可以帮我解决 xslt2.0 转换中的这个名称空间问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:50:26.067

借助 XSLT 2.0 和 XSLT 2.0 处理器，您可以使用

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xpath-default-namespace="aaa">

    <xsl:template match="name">
        <person>
            <xsl:value-of select="." />
        </person>
    </xsl:template>
</xsl:stylesheet> 
```

使用您需要的 XSLT 1.0 处理器

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:df="aaa" exclude-result-prefixes="aaa">

    <xsl:template match="df:name">
        <person>
            <xsl:value-of select="." />
        </person>
    </xsl:template>
</xsl:stylesheet> 
```

# powershell - 自动化 Web 部署到远程 IIS 服务器

> ID：14810079
> 
> 赞同：3
> 
> 时间：2013-02-11T10:17:50.710
> 
> 标签：powershell, command-line, msbuild, visual-studio-2012, webdeploy

我目前正在研究和实施一种将 MVC 和 webApi 项目部署到生产环境的自动方法。

到目前为止，我已经使用了 Visual Studio 2012 中内置的发布工具，效果很好。通过在 IDE 中运行它，我可以获得正确的文件和 IIS 配置并在生产服务器上运行。但是，我想实现与此相同的功能，但通过命令行或 powershell 可以运行脚本，它会自动部署 2 个网站。

我试图通过运行命令行脚本来做到这一点，例如：

```
msbuild MyProject.csproj /p:DeployOnBuild=true;PublishProfile=MyProfile 
```

这将构建项目并在项目的 obj 文件夹中创建一个包。这是正确的方法吗？如果是，我怎样才能让这个包自动部署到远程服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:23:36.103

这是我必须部署 Web 应用程序时使用的函数：

```
function MSBuild-Publish-Web-Service
{
    param (
        [parameter(Mandatory = $true)][string] $WebProjectFile,
        [parameter(Mandatory = $true)][string] $DestinationDir
    )

    Write-Host "`t`t$($MyInvocation.InvocationName): Publishing web service from $SourceDir"

    try
    {
        $Error.Clear()
        $MsBuildPath = "$env:Windir\Microsoft.NET\Framework\v3.5\MSBuild.exe"

        if (!(Test-Path $MsBuildPath))
            { throw "Could not find $MsBuildPath" }

        $res = [string](. $MsBuildPath "$WebProjectFile" /verbosity:minimal "/t:ResolveReferences;_CopyWebApplication;publish" /p:Configuration=Debug /p:OutDir="$DestinationDir\bin\" /p:WebProjectOutputDir="$DestinationDir")

        if ($res.Contains("error"))
            { throw $res }
    }

    catch
    {
        Write-Error "`t`t$($MyInvocation.InvocationName): $_"
    }

    Write-Host "`t`t$($MyInvocation.InvocationName): Web service published"
} 
```

# java - 如何在java中找到两个时间戳的差异？

> ID：14810084
> 
> 赞同：11
> 
> 时间：2013-02-11T10:17:55.450
> 
> 标签：java, datetime, arraylist, date-difference

我有一个`ArrayList`包括几个时间戳，目的是找到`ArrayList`.

```
String a = ArrayList.get(0);
String b = ArrayList.get(ArrayList.size()-1);
long diff = b.getTime() - a.getTime(); 
```

我还将类型转换为 int 但它仍然给我一个错误`The method getTime is undefined for the type String`。

附加信息 ：

我有一个 A 类，其中包括

```
String timeStamp = new SimpleDateFormat("ss S").format(new Date()); 
```

并且有一个 B 类有一个方法`private void dialogDuration(String timeStamp)`

方法`dialogueDuration`包括：

```
String a = timeSt.get(0); // timeSt  is an ArrayList which includes all the timeStamps
String b = timeSt.get(timeSt.size()-1);   // This method aims finding the difference of the first and the last elements(timestamps) of the ArrayList  (in seconds)

long i = Long.parseLong(a);
long j = Long.parseLong(b);

long diff = j.getTime()- i.getTime();

System.out.println("a: " +i); 
System.out.println("b: " +j); 
```

一个条件是A类中的statement( `String timeStamp = new SimpleDateFormat("ss S").format(new Date());`)不会被改变。B类的一个对象在A类中被创建，以便它调用该`dialogueDuration(timeStamp)`方法并将时间戳的值传递给B类。

我的问题是这个减法不起作用，它给出了一个错误`cannot invoke getTime() method on the primitive type long`。对于 int 和 String 类型，它也会产生同样的错误吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T11:17:30.343

也许是这样的：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("ss S");
Date firstParsedDate = dateFormat.parse(a);
Date secondParsedDate = dateFormat.parse(b);
long diff = secondParsedDate.getTime() - firstParsedDate.getTime(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T10:48:54.033

假设您的 ArrayList 中有 Timestamp 对象或 Date 对象，您可以这样做：

```
Timestamp a = timeSt.get(0);

Timestamp b = timeSt.get(timeSt.size()-1);

long diff = b.getTime() - a.getTime(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-29T13:23:48.950

您可以使用以下两种方法计算差异（您也可以通过添加额外的 if 语句或使用 switch case 来修改上述方法以将差异返回为“毫秒”、“天”、“月”等）：

```
private Long calculateDifference(String date1, String date2, String value) {
        Timestamp date_1 = stringToTimestamp(date1);
        Timestamp date_2 = stringToTimestamp(date2);
        long milliseconds = date_1.getTime() - date_2.getTime();
        if (value.equals("second"))
            return milliseconds / 1000;
        if (value.equals("minute"))
            return milliseconds / 1000 / 60;
        if (value.equals("hours"))
            return milliseconds / 1000 / 3600;
        else
            return new Long(999999999);
    }

private Timestamp stringToTimestamp(String date) {
        try {
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            Date parsedDate = dateFormat.parse(date);
            return new Timestamp(parsedDate.getTime());
        } catch (Exception e) {
            return null;
        }
    } 
```

例如：

```
calculateDifference("2021-10-20 10:00:01", "2021-10-20 10:15:01", "minute"); 
```

将返回“-15”

或者

```
calculateDifference("2021-10-20 12:00:01", "2021-10-20 10:15:01", "minute"); 
```

将返回“105”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T10:20:41.857

你应该做`ArrayList x`一个`ArrayList<TimeStamp> x`. 随后，您的方法`get(int)`将返回一个类型的对象`TimeStamp`（而不是一个类型`String`）。在 a 上`TimeStamp`，您可以调用`getTime()`.

顺便说一句，你真的需要`java.sql.TimeStamp`吗？也许一个简单的`Date`或`Calendar`更容易和更合适。

# android - 将文本和图像添加到中心 android 的按钮中

> ID：14810085
> 
> 赞同：0
> 
> 时间：2013-02-11T10:17:56.740
> 
> 标签：android, android-button, input-button-image

我是 android 开发的初学者，我正在开发小型 android 应用程序。在我的应用程序中，我正在使用按钮。但包含图像和文字。一切正常，唯一的问题是我的文本显示在按钮中心和按钮末尾的图像我想要的图像和文本都在中心.. 我的按钮代码看起来像......

```
 <Button
                android:id="@+id/signup_button"
                android:layout_width="match_parent"
                 android:layout_height="48dip"
                 android:layout_marginTop="15dip"
                 android:layout_marginLeft="1dip"
                 android:background="@drawable/help_screen_buttons"
                 android:text="Sign up"
                 android:textColor="@color/maroon_font"
                 android:alpha="0.8" 
                 android:textSize="22dip"
                 android:drawableLeft="@drawable/tw_br"/> 
```

他我只能将图像设置在左上角底部位置但不能设置在中心.. S 如何在按钮中心显示该图像和文本...需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-29T12:31:34.497

你可以简单地使用图像按钮

```
 <ImageButton
        android:id="@+id/imageButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:src="@drawable/image" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:26:05.597

我希望它对你有用：

```
<Button 
    android:id="@+id/startTelemoteButton" 
    android:text="@string/start_telemote"
    android:gravity="center"
    android:width="fill_parent"
    android:height="wrap_content" /> 
```

# ios - UIScrollView 中的可编辑 UIwebview。滚动问题

> ID：14810097
> 
> 赞同：3
> 
> 时间：2013-02-11T10:18:38.510
> 
> 标签：ios, uiwebview, ios6, uiscrollview

我在 UIScrollView 中有一个可编辑的 UIWebView。

我禁用了 UIWebView 上的滚动视图和反弹，只依赖于 UIScrollView 的滚动视图。

每 0.1 秒，我有一个计时器，它检测 UIWebView 内容自上次检查以来是否发生了变化。如果是这样，并且插入符号大于给定位置，则更新滚动视图的偏移量，结果非常好。

我的问题是当我回去编辑已经写好的文本时。

UIWebView 在自己的视图上滚动，文本消失。

我想改用 UIScrollView 。

这是显示问题的两张图片：

![在此处输入图像描述](../Images/a3c559aba919c60860a5b4b97a398e78.png) ![在此处输入图像描述](../Images/543d08ab262a28ed21037ba094b8cb1d.png)

编辑：这是一个显示错误的视频：http: [//dl.dropbox.com/u/9666723/Bug.mov](http://dl.dropbox.com/u/9666723/Bug.mov)

感谢您提供任何帮助。

# database - 产品管理系统

> ID：14810098
> 
> 赞同：0
> 
> 时间：2013-02-11T10:18:44.640
> 
> 标签：database, content-management-system

我们正在寻找能够执行以下操作的系统：浏览包含纯文本数据（名称/ID/供应商/显示链接等）的槽记录，但也能够存储与此信息一起使用的 pdf。该系统最好是基于服务器/网络的，以便可以通过 Intranet 访问。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:51:39.760

通常有两种相反的方式来解决 IT 任务。拿一些符合您要求的东西或自己构建它。您的任务听起来并不复杂，因此我认为一种解决方案可能是自己设置。（或者请别人这样做。）

我更喜欢[perl](/questions/tagged/perl "显示标记为“perl”的问题")作为编程语言，[舞者](/questions/tagged/dancer "显示标记为“舞者”的问题")web 框架，可能是一个[mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")来存储你的数据。[您可以使用starmen](/questions/tagged/starmen "显示标记为“明星”的问题")轻松运行应用程序，并在其前面使用[apache作为代理。](/questions/tagged/apache "显示标记为“apache”的问题")

该环境易于扩展以满足您的需求，并且完全符合您的要求，仅此而已。

# synchronization - 在 Silverlight 应用程序中同步 Exchange Web 服务时出错

> ID：14810099
> 
> 赞同：0
> 
> 时间：2013-02-11T10:18:50.010
> 
> 标签：synchronization, exchange-server, exchangewebservices

目前我已经开发了一个 Silverlight 应用程序，它可以在 Exchange 和我的 Silverlight 应用程序之间同步电子邮件及其相应的文件夹。我将 EWS 用于 ExchangeOnline，但我遇到了同步问题，有时它会失败..

这是我如何配置它的设置/场景： API 名称：SyncFolderHierarchy、SyncFolderItems 目标功能：与 Exchange 服务器同步电子邮件和文件夹

场景描述：

*   创建一个 ExchangeService 对象：

    ExchangeVersion.Exchange2010_SP1 EnableScpLookup = false, TraceEnabled = true, Credentials = new WebCredentials(_exchangeEmail, _exchangePassword)

*   使用 AutodiscoverUrl 获取帐户 url

*   调用 SyncFolderHierarchy/SyncFolderItems 进行同步并收到错误消息（不时在不同文件夹上）

**其他注意事项：**

当我运行我的应用程序时，它每 30 秒发送大约 7 个请求。不幸的是，有时我会出错。另一方面，它确实每 5 分钟（大约）成功同步两次。

请参阅下面的**错误详细信息**：

*   文件夹同步：

    Microsoft.Exchange.WebServices.Data.ServiceResponseException：发生内部服务器错误。稍后再试。在 Microsoft.Exchange.WebServices.Data.ServiceResponse.InternalThrowIfNecessary() 在 Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute() 在 Microsoft.Exchange.WebServices.Data.ExchangeService.SyncFolderHierarchy(FolderId syncFolderId, PropertySet propertySet, String同步状态）

*   文件夹项目同步：

    Microsoft.Exchange.WebServices.Data.ServiceResponseException：发生内部服务器错误。稍后再试。在 Microsoft.Exchange.WebServices.Data.ServiceResponse.InternalThrowIfNecessary() 在 Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest1.Execute() 在 Microsoft.Exchange.WebServices.Data.ExchangeService.SyncFolderItems(FolderId syncFolderId, PropertySet propertySet, IEnumerable`1忽略ItemIds，Int32 maxChangesReturned，SyncFolderItemsScope syncScope，字符串同步状态）

**所以，我的问题是：**

*   我的设置/配置中是否有某些内容可能不时导致这些失败？

*   是否有可能查看在线交换日志？

**任何帮助将不胜感激。**

提前致谢， 德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:13:53.937

我不太确定为什么，但问题会自行消失（可能是交换服务器上的临时问题）。根据一些互联网帖子 - 这可能是节流的问题。

# asp.net-mvc - ASP.NET MVC 4 覆盖发出的 html 名称和 id

> ID：14810100
> 
> 赞同：62
> 
> 时间：2013-02-11T10:18:51.623
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor-2

我正在尝试更改由`@Html.HiddenFor`.

我正在使用的代码：

```
@Html.HiddenFor(e => e.SomeProperty, new { @id = "some_property", @name = "some_property" } 
```

现在这适用于`id`，但它不适用于名称。现在我真的不在乎`id`现在，我需要`name`改变，因为那是被发布回目标服务器的那个。

有没有

*   我可以`SomeProperty`在我的模型中应用的属性？
*   一种`Html.HiddenFor`覆盖`name`属性的方法？

还是我坚持`<input ...>`手工做一个简单的？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-11T10:22:53.983

您需要使用[Html.Hidden](http://msdn.microsoft.com/en-us/library/dd504790%28v=vs.108%29.aspx)（或`<input ...>`手写）而不是`Html.HiddenFor`

```
@Html.Hidden("some_property", Model.SomeProperty, new { @id = "some_property" }) 
```

强类型助手（例如名称以“For”结尾的那个`HiddenFor`）的目标是从提供的表达式中为您猜测输入名称。因此，如果您想要一个“自定义”输入名称，您始终可以使用常规帮助程序，例如`Html.Hidden`您可以显式设置名称的位置。

**[unjuken](https://stackoverflow.com/a/16941183/872395)**的答案**是错误**的，因为它会生成**无效**的HTML。

使用该解决方案会生成**两个** `name`属性：

```
<input  Name="some_property"  name="SomeProperty" id="some_property" type="hidden" value="test" /> 
```

因此，您将拥有`Name="some_property"` **AND** `name="SomeProperty"`这是**无效**的 HTML，因为输入只能具有**一个** `name`属性！（尽管大多数浏览器碰巧采用第一个`Name="some_property"`并且不关心第二个......）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-05T13:26:04.763

如果您使用：

> @Html.HiddenFor(e => e.SomeProperty, new { @id = "some_property", @Name = "some_property" });

注意@Name 中的大写“N”。它会工作的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-22T17:51:52.417

我很好奇为什么专门覆盖 name 属性不起作用。除非我将其大写（即`new {@Name = 'somename'}`），否则它似乎不起作用。正如其他人所指出的那样，这只有效，因为它会生成重复的名称属性并且 Chrome 会清理它。

我查看了最新的 MVC 源代码以了解发生了什么。考虑以下`GenerateInput`方法中的片段`DefaultHtmlGenerator.cs`：

```
var fullName = NameAndIdProvider.GetFullHtmlFieldName(viewContext, expression);
if (string.IsNullOrEmpty(fullName))
{
    throw new ArgumentException(
    ...
}

var inputTypeString = GetInputTypeString(inputType);
var tagBuilder = new TagBuilder("input");
tagBuilder.TagRenderMode = TagRenderMode.SelfClosing;
tagBuilder.MergeAttributes(htmlAttributes);
tagBuilder.MergeAttribute("type", inputTypeString);
tagBuilder.MergeAttribute("name", fullName, replaceExisting: true); 
```

我们可以在这里看到，问题在于，无论您提供什么 name 属性，它都会被最后一次调用覆盖`MergeAttribute`，这将使用`fullName`从`GetFullHtmlFieldName`方法分配给变量的任何逻辑。

我有点理解他们为什么要强制执行这种行为，猜测它与控制回发中使用的名称有关，以保证它与模型绑定器一起工作。

无论如何，为了实现这一点，我说只需手动构造输入元素而不使用剃刀视图助手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-25T19:23:33.553

从来没有为我工作过（aspnet.core）

我用平原

```
<input type="hidden" id="@myid" name="@myname" value="@Model.prop" /> 
```

并像魅力一样工作。不需要 HtmlHelper HiddenForModel。

# android - Android Edittext 在键盘上键入时失去焦点

> ID：14810103
> 
> 赞同：1
> 
> 时间：2013-02-11T10:19:02.750
> 
> 标签：android

我有一个Edittext，并且该edittext 下面有一个listview。最初Listview 的可见性设置为GONE。一旦用户输入edittext，我就会通过在列表视图中填充精炼结果来使列表视图可见。但是在这里在edittext中输入一个字母后，edittext失去了焦点。再次，用户需要单击 edittext 并且必须键入才能继续。我的问题是如何在 listview 获得可见性时使 edittext 不失去焦点。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:22:50.500

只需输入 xml editext：

```
<EditText
        android:id="@+id/editText1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="textShortMessage" >
        <requestFocus />
    </EditText> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:24:19.437

放

```
edittext.requestFocus(); 
```

在你设置`listView`可见的地方..

# css - 如何使背景大小在 IE8 中工作？

> ID：14810104
> 
> 赞同：0
> 
> 时间：2013-02-11T10:19:03.933
> 
> 标签：css, internet-explorer-8, internet-explorer-7, background-image

我有一个 250px 宽 x 100px 高的图像。我想使用这个 css 规则：

```
background-size: 125px 50px; 
```

我该怎么做？我不想知道如何使图像拉伸以填充 div 或浏览器窗口，或者使用 background:cover 可以完成的任何其他操作。我希望背景图像具有特定的大小，无论它与包含的 div 相比是否更大或更小或其他大小。是的，它确实（不幸的是）需要是背景图像。它需要在IE7和8下工作；background-size 已经涵盖了所有其他浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:00:09.723

做不到。背景大小是 css3 属性，ie7 和 ie8 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T13:55:27.950

这个问题在这里得到了深入的回答：

[如何使背景大小在 IE 中工作？](https://stackoverflow.com/questions/2991623/how-do-i-make-background-size-work-in-ie)

最流行的修复是这个背景大小的 polyfill：

[https://github.com/louisremi/background-size-polyfill](https://github.com/louisremi/background-size-polyfill)

# php - 使用 TOAD 远程访问 Openshift Redhat 上的 MySQL 数据库

> ID：14810106
> 
> 赞同：1
> 
> 时间：2013-02-11T10:19:08.740
> 
> 标签：php, toad, openshift

我在 Openshift redhat 云服务器上部署了一个应用程序。我想使用 toad 远程访问我的 mysql 数据库。我是蟾蜍新手，从未配置过它。我只想知道如何设置它以访问我的 openshift 数据库？我可以使用 toad 创建与服务器的 ssh 连接，但它需要密码，而 openshift 提供了一个私钥文件来登录服务器。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:31:48.697

您可以使用端口转发来获得对数据库的本地访问。这里有一篇关于端口转发的好博文： [https ://openshift.redhat.com/community/blogs/getting-started-with-port-forwarding-on-openshift](https://openshift.redhat.com/community/blogs/getting-started-with-port-forwarding-on-openshift)

要获取您的数据库用户名和密码，您可以 ssh 进入您的应用程序并查看与 mysql 相关的环境变量。

```
$ ssh <uuid>@<appname>-<namespace>.rhcloud.com
[appname-namespace.rhcloud.com ~]\> export | grep MYSQL 
```

您可以在控制台的应用程序概述页面上的“想要登录到您的应用程序？”下找到列出的 ssh 命令。链接，或通过运行`rhc app show`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:52:52.820

您需要使用端口转发来远程访问数据库

# mysql - 在不完整的 MySQL 数据集中填补空白的最有效方法是什么？

> ID：14810111
> 
> 赞同：1
> 
> 时间：2013-02-11T10:19:26.257
> 
> 标签：mysql

我有一个来自 MySQL 表的值的数据集，然后将其绘制成图表。每个数据点之间**应该**有一个固定的时间段，例如：

数据点 1：1 - 日期/时间：2013-02-11 09:00:00

数据点 2：2 - 日期/时间：2013-02-11 09:05:00

数据点 3：3 - 日期/时间：2013-02-11 09:10:00

然而，这并非总是如此。如果我们可以为我们的图表包提供一组数据值、开始时间和间隔时间，它可以比我们提供值列表和日期/时间列表更快地处理和显示图表。

在缺少数据点的情况下，用 0 值预填充或后填充 MySQL 查询的最有效方法是什么？例如，如果缺少数据点 2，则使用上面的数据，我可以使用什么查询来让 MySQL 返回以下数据集：

数据点 1：1 - 日期/时间：2013-02-11 09:00:00

数据点 2：0 - 日期/时间：2013-02-11 09:05:00

数据点 3：3 - 日期/时间：2013-02-11 09:10:00

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:23:03.083

我不会将垃圾输入数据库，您可以在应用层进行预处理，它应该更快更高效。

如果您为每个插入执行 IO，那么 IO 将是一个巨大的瓶颈。在应用程序层中排序和插入虚拟点，例如 Java 可能会更快（您可以在呈现图表之前执行此操作）。

此外，假设您有一个以 CSV 格式记录数据的文件，插入使用`LOAD DATA`将非常快（可能比预处理每一行并逐行插入快 20 倍）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:01:19.017

在这种情况下，我会将代码中的数组/哈希/列表初始化为我的零/空值，然后覆盖从数据库接收数据的值。

如果这需要在服务器端完成，您可以创建一个临时表，存储您感兴趣的时间间隔内的所有可能日期，然后将当前查询加入其中。

此处的第二个示例：[在 sql 结果中填充空日期的最直接方法是什么（在 mysql 或 perl 端）？](https://stackoverflow.com/questions/75752/what-is-the-most-straightforward-way-to-pad-empty-dates-in-sql-results-on-eithe)

# maven - 我可以使用哪个 maven 插件从任何在线存储库下载文件？

> ID：14810113
> 
> 赞同：2
> 
> 时间：2013-02-11T10:19:38.600
> 
> 标签：maven, maven-3

我想从 svn 存储库下载 tar.gz 文件。此文件由其他 maven 项目打包，我想将它们打包为我的项目的一部分。

我知道使用 wget 我们可以做到这一点，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:35:11.327

我建议使用支持这些东西的[maven-wagon-plugin 。](http://mojo.codehaus.org/wagon-maven-plugin/)

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>wagon-maven-plugin</artifactId>
    <version>1.0-beta-4</version>
    <executions>
      <execution>
        <id>download-test-data</id>
        <phase>prepare-package</phase>
        <goals>
            <goal>download</goal>
        </goals>
        <configuration>
          <serverId>atlassian-public</serverId>
          <url>http://WhatEverURL/</url>
          <fromDir>WhatEverFolder/xyz.tar.gz</fromDir>
          <toDir>${project.build.directory}/download/</toDir>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

要仅下载单个文件，您可以使用[download-single](http://mojo.codehaus.org/wagon-maven-plugin/download-single-mojo.html)目标。

# jsf - PrimeFaces TabView 提交时不显示结果

> ID：14810116
> 
> 赞同：0
> 
> 时间：2013-02-11T10:19:58.420
> 
> 标签：jsf, primefaces, submit, tabview

以下代码包含来自展示示例的两个选项卡和基本代码。我尝试将此代码放入 xhtml 并在选项卡中执行 ui:include 并且也只是将它们添加到选项卡中，如下所示。无论哪种方式，当我单击提交按钮时，都看不到任何结果显示。

提前致谢

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

 <h:form> 
 <p:tabView id="tabs" orientation="left" styleClass=".borderlessUnit" dynamic="true">
    <p:tab id="tab0" title="Test Menu 1">
       <p:layout id="layout0" style="min-height:600px;">
          <p:layoutUnit position="center" resizable="true" styleClass="borderlessUnit">
                <h:outputLabel for="name" value="Name 1:" style="font-weight:bold"/>  
                <p:inputText id="name" value="#{personBean.firstname}" />  
                <p:commandButton value="Submit" update="display"/>  
                <h:outputText value="#{personBean.firstname}" id="display" />  
          </p:layoutUnit>                            
       </p:layout>   
     </p:tab>
     <p:tab id="tab1" title="Test Menu 2">
       <p:layout id="layout1" style="min-height:600px;">
         <p:layoutUnit position="center" resizable="true" styleClass="borderlessUnit">
                <h:outputLabel for="name1" value="Name 2:" style="font-weight:bold"/>  
                <p:inputText id="name1" value="#{personBean.secondname}" />  
                <p:commandButton value="Submit1" update="display1"/>  
                <h:outputText value="#{personBean.secondname}" id="display1" />  
         </p:layoutUnit>
       </p:layout>
      </p:tab>    
</p:tabView>
</h:form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:36:05.937

在 PrimeFaces 的使用手册中记录了您应该避免在表单中嵌套布局和布局单元，并且每个布局单元都应该有自己的表单。所以删除表格，并在每个表格中放置单独的表格`layoutUnit`

# objective-c - 如何在 Mac OS X 应用程序的 Objective-C 中从 CAPTCHA 图像中提取文本？

> ID：14810117
> 
> 赞同：8
> 
> 时间：2013-02-11T10:20:04.697
> 
> 标签：objective-c, macos, captcha

我正在开发一个 Mac OS X 应用程序，它具有从验证码图像中读取/提取文本的概念。我在谷歌上搜索并得到了一个名为“DeathByCaptcha”的 API，这正是我想做的，但这个 API 不适用于 Mac OS X，这个 API 可用于 .Net/C/PHP/Python 等。

'DeathByCaptcha' 可以在[此处](http://www.deathbycaptcha.com/user/login)的网络上找到。我在搜索时发现[了这个 Stack Overflow 帖子](https://stackoverflow.com/questions/5373949/extract-text-from-images-programmatically)，但这不会读取验证码图像，它只是读取一个简单的图像并转换为文本。

请帮助我使用 Objective-C 为 Mac OS X 应用程序从验证码图像中提取文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:02:46.120

查看 API 后，您首先需要构建库。

1.  打开终端，导航到 dbc_api_v4_2_c 文件夹并键入

    制作

您应该得到一个名为 lib 的新文件夹，其中包含 libdeathbycaptcha.so 库文件。

1.  现在，创建一个新的 Xcode 项目，将库包含在您的资源中，将 deathbycaptcha.h 标头添加到您的项目中。

2.  然后您可以使用示例中提供的代码，但只能使用不适用于 windows 的代码。例如 ：

    ```
    void *lib = dlopen("./libdeathbycaptcha.so", RTLD_LAZY);
    if (!lib) {
        fprintf(stderr, "dlopen(): %s\n", dlerror());
        exit(EXIT_FAILURE);
    }

    dbc_init = (void *)GetProcAddress(lib, "dbc_init");
    dbc_close = (void *)GetProcAddress(lib, "dbc_close");
    dbc_get_balance = (void *)GetProcAddress(lib, "dbc_get_balance");
    dbc_decode_file = (void *)GetProcAddress(lib, "dbc_decode_file");
    dbc_report = (void *)GetProcAddress(lib, "dbc_report");
    dbc_close_captcha = (void *)GetProcAddress(lib, "dbc_close_captcha"); 
    ```

它应该编译得很好。不要忘记包含以下标题：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <dlfcn.h> // not in the docs, but required for dlsym
#include "deathbycaptcha.h" 
```

此外，如果您还没有安装 Xcode 命令行工具（在 Xcode 首选项中），您可能还需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:04:10.733

***大家好，我写了下面的代码来解决我的验证码问题，它对我来说非常有用。***

***从验证码图像中读取文本的代码***

您将需要 ASIHTTPRequest API 在 Web 上发送 HTTP 请求并获取以下代码的响应。

将 ASIHTTPRequest API 的各个类导入您的类中，您将在其中执行从验证码图像中获取文本的过程。

现在使用下面的方法并调用来解决 catpcha 。

```
-(NSString *)CaptchaToText 
{
    // Captcha Image Url in NSData object
    NSData *urlData=[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://oi47.tinypic.com/357hyea.jpg"]];

    // base64 image data
    NSString *imageBase64Data = [ASIHTTPRequest base64forData:urlData ];

    //NSString *imageBase64Data =[self base64EncodedString:urlData];
    NSLog(@"imageBase64Data =%@\n\n",imageBase64Data);

    // prefix - base64 image data
    NSString *prefixBase64Data = [NSString stringWithFormat:@"base64:%@",imageBase64Data];
    NSLog(@"prefixBase64Data Value = %@\n\n",prefixBase64Data);

    ASIHTTPRequest *req=[ASIHTTPRequest requestWithURL:[NSURL URLWithString:@"http://oi47.tinypic.com/357hyea.jpg"]];

    [req startSynchronous];
    NSError *err=[req error];

    if(!err){
        NSString *respo=[req responseString];
        NSLog(@"respo= %@",respo);

        NSURL *url = [NSURL URLWithString:@"http://api.dbcapi.me/api/captcha"];

        ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];

        [request setPostValue:@"YourDeathByCaptchaUserName" forKey:@"username"];
        [request setPostValue:@"YourDeathByCaptchaPassword!@#$" forKey:@"password"];
        [request setPostValue:prefixBase64Data forKey:@"captchafile"];

        [request setRequestMethod:@"POST"];
        [request startSynchronous];

        NSError *error=[request error];

        if(!error){

            // Here we will get "Text" data from Captcha Image in "response"
            NSString *response=[request responseString];
            NSLog(@"response= %@",response);
            }
        else{
            NSLog(@"error= %@",error);
            }

        }
    else{
        NSLog(@"err= %@",err);
        }

    return response;
} 
```

就是这样。完毕

# php - 将值从 jsf 传递给 php

> ID：14810124
> 
> 赞同：0
> 
> 时间：2013-02-11T10:20:36.420
> 
> 标签：php, jsf

我有一个 JSF 应用程序，我想将它与基于 PHP 的文档存储库集成。集成的工作方式应该是，当在我的 JSF 应用程序中选择投标时，应该列出与该投标相关的文档列表（从基于 PHP 的文档存储库中收集），使用投标标识符 ( `tenderId`) 进行通信。

今天我是强制用户手动输入`tender id`，但我宁愿`tender id`直接传给php页面。如果用户在 JSF 上选择投标并单击文档存储库链接，则生成的链接应告知 PHP 脚本`tender id`用户刚刚从 JSF 端离开的位置。基本上，我想知道如何将值从 JSF 动态传递给 PHP。

我可以在 URL 中传递一个值，但是如何在 PHP 中获取值是我真正需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:37:50.567

如果您通过 URL 将值传递给 PHP 脚本，您可以在超级全局变量 $_GET 中找到它。有关详细信息，请参阅[$_GET 上的文档](http://php.net/%24_GET)。

# android - 用户名和密码的edittext大小不同

> ID：14810126
> 
> 赞同：0
> 
> 时间：2013-02-11T10:20:41.263
> 
> 标签：android, android-edittext

我有用户名，密码，服务器名称的edittext，提示为“必需”，但我有一个问题，文本大小不同，而在编码中它只是相同的。

![在此处输入图像描述](../Images/4a74faa7cf0325bfe3daba18b707eef7.png)

如何克服它，

我单独用于 textview 的 xml 代码是，

```
 <EditText
                android:id="@+id/sapuser"
                android:layout_column="2"
                android:layout_marginRight="15dip"
                android:hint="Required"
                android:paddingLeft="5dip"
                android:singleLine="true"
                android:text=""
                android:width="150dip" />  

            <EditText
                android:id="@+id/password"
                android:layout_column="2"
                android:layout_marginRight="15dip"
                android:hint="Required"
                android:paddingLeft="5dip"
                android:password="true"
                android:singleLine="true"
                android:text="" />

            <EditText
                android:id="@+id/host"
                android:layout_column="2"
                android:layout_marginRight="15dip"
                android:hint="Required"
                android:paddingLeft="5dip"
                android:singleLine="true"
                android:text=""
                android:width="150dip" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:48:44.823

我认为这是因为高度，你没有设置它......这将工作

```
<EditText
 android:id="@+id/sapuser"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_column="2"
 android:layout_marginRight="15dip"
 android:hint="Required"
 android:paddingLeft="5dip"
 android:singleLine="true"
 android:text=""
 android:textSize="20dp"

 android:width="150dip" />

        <EditText
            android:id="@+id/password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="2"
            android:layout_marginRight="15dip"
            android:hint="Required"
            android:paddingLeft="5dip"
            android:password="true"
            android:singleLine="true"
            android:text=""
            android:textSize="20dp" />

        <EditText
            android:id="@+id/host"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="2"
            android:layout_marginRight="15dip"
            android:hint="Required"
            android:paddingLeft="5dip"
            android:singleLine="true"
            android:text=""
            android:width="150dip"
            android:textSize="20dp" /> 
```

# gwt - V3 中 getInfowindow 的替代方案

> ID：14810129
> 
> 赞同：2
> 
> 时间：2013-02-11T10:20:44.857
> 
> 标签：gwt, google-maps-api-3

```
 Is there any alternate code for getting infowindow from maps v3\. Previously i had v2 version code as 
`MapWidget map = new MapWidget();
InfoWindow info = map.getInfoWindow()
info.open(marker.getLatLng(),new InfoWindowContent("Test"));` 
```

我在 gwt-maps-3.8.0 中找不到 getInfoWindow。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:15:26.620

是你要找的吗？？

```
InfoWindow.open(MapWidget mapWidget) 
```

在给定地图上打开此信息窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:28:13.220

最后我得到了.. 在 Maps V2 中，InfoWindow 没有初始化。相反，我们从地图中获取，因为`InfoWindow info = map.getInfoWindow();` 在 Map V3 中，我们的语法为 `InfoWindowOptions options = InfoWindowOptions.create(); options.setContent("Test); options.setPosition(LatLng.create(24.796708, 46.691895)); InfoWindow info = InfoWindow.create(options); info.open(map);`

详情请点击[这里](http://ameenit.blogspot.in/2013/03/displaying-infowindow-in-maps-v3.html)。

# c# - 在 umbraco 中创建模板 HTML 在哪里？

> ID：14810130
> 
> 赞同：0
> 
> 时间：2013-02-11T10:20:49.597
> 
> 标签：c#, asp.net, html, umbraco, page-title

好的，我是 Umbraco 的新手，我已经创建了一个模板，我在编辑器中看到的只是：

```
<%@ Master Language="C#" MasterPageFile="~/umbraco/masterpages/default.master" AutoEventWireup="true" %>

<asp:Content ContentPlaceHolderID="ContentPlaceHolderDefault" runat="server">

</asp:Content> 
```

但是我看不到 and 标记，那么如何定义我使用的 CSS 文件，或者如何设置页面标题？

我试图手动设置标签，但那不起作用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:35:47.770

我也是 Umbraco 的新手，发现这非常令人困惑，因为默认母版页实际上是空白的。这意味着您需要创建要在主要内容占位符中使用的完整模板，`ContentPlaceHolderDefault`如下所示：

```
<asp:Content ContentPlaceHolderID="ContentPlaceHolderDefault" runat="server">
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 ie"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 ie"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 ie"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9 ie"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<head>
    <title><umbraco:item runat="server" field="pageName" /> - <umbraco:item runat="server" field="siteName" /></title>
</head>
<body>
<form id="form1" runat="server">

</form>
</body>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:24:45.503

在 asp.net 中有一个`contentplaceholder`
`ContentPlaceHolderID`设置为`head`表示它是您页面的头部。
您可以将任何东西设置为普通 html 页面的头部。

```
 <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
          <script src="Scripts/name.js" type="text/javascript"></script>
   </asp:Content> 
```

在这里你可以放你的文件

# python - 使用 BS4 设计数据抓取功能的问题

> ID：14810131
> 
> 赞同：0
> 
> 时间：2013-02-11T10:20:53.917
> 
> 标签：python, python-2.7, beautifulsoup

我需要的数据存在于 2 种不同的组合下`tag + class`。我希望我的函数在这两种组合下进行搜索，并同时呈现这两种组合下的数据。这两种组合是互斥的。如果存在 1 个组合，则不存在其他组合。

我正在使用的代码是：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import urllib
import time
from bs4 import BeautifulSoup
from itertools import islice

def match_both2(arg1,arg2):
    if arg1 == 'div' and arg2 == 'DetailInternetFirstContent empty openPostIt':
        return True
    if arg1 == 'p' and arg2 == 'connection':
        return True
    return False

page = urllib2.urlopen('http://www.sfr.fr/mobile/offres/toutes-les-offres-sfr?vue=000029#sfrintid=V_nav_mob_offre-abo&sfrclicid=V_nav_mob_offre-abo').read()
soup = BeautifulSoup(page)

datas = soup.findAll(match_both2(0),{'class':match_both2(1)})
print datas 
```

现在，我正在尝试使用`match_both2`函数来完成此操作，但它给了我`TypeError`，因为我只向它传递了 1 个参数，它需要 2 个。在这种情况下，我不知道如何将 2 个参数传递给它，通常我会调用这样的函数`match_both2(example1,example2)`。但是在这里，我想不出一种可以解决我的问题的方法。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:42:05.423

当您使用函数过滤匹配元素时，您传递的只是对函数的引用，而不是结果。换句话说，在*将*它传递给`.findAll()`.

该函数仅使用*一个*参数调用，即元素本身。此外，该`class`属性已被拆分为一个列表。因此，要匹配您的特定元素，您需要将匹配功能区分为：

```
def match_either(tag):
    if tag.name == 'div':
        # at *least* these three classes must be present
        return {'DetailInternetFirstContent', 'empty', 'openPostIt'}.issubset(tag.get('class', []))
    if tag.name == 'p':
        # at *least* this one class must be present
        return 'connection' in tag.get('class', []) 
```

这个函数返回`True`一个`p`带有`connection`类的标签，或者一个`div`带有所有三个类的标签。

将其传递给`findAll()` *而不调用它*：

```
datas = soup.findAll(match_either) 
```

# android - 将 Intent 显式寻址到动态广播接收器

> ID：14810134
> 
> 赞同：18
> 
> 时间：2013-02-11T10:21:03.153
> 
> 标签：android, broadcastreceiver

我是 Android 新手，并试图了解应用程序之间的通信。

我正在尝试编写 3 个可以相互通信的小应用程序。如果您想向所有人发送消息，您只需使用隐式广播。

**隐含意图** `intent.setAction("com.example.myChatMessage")`

如果您只想处理 1 个特定的接收器，我会使用它

**明确的意图**`intent.setComponent("com.example.test.android.broadcastreceiver.b", "com.example.test.android.broadcastreceiver.b.myBroadcastReceiver")`

当广播接收器是一个单独的类并在 AndroidManifest.xml 中定义时，此方法有效。

**我的问题：**是否可以*显式寻址一个动态注册的广播接收器*？

```
package com.example.test.android.broadcastreceiver.b;

public class MainActivity extends Activity {

private final IntentFilter intentfilter = new IntentFilter("com.example.myChatMessage");
private myBroadcastReceiver broadcastreceiver;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    broadcastreceiver = new myBroadcastReceiver();
    registerReceiver(broadcastreceiver, intentfilter);
}

public static class myBroadcastReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {
        String message = intent.getStringExtra("message");
        Log.d("message", "B received: "+message);       
    }
}
} 
```

它接收所有隐式广播，但没有明确的广播 - 我不知道如何处理它。你能帮助我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-20T21:06:52.450

似乎不可能向动态注册的广播接收器发送显式意图。在 AndroidManifest.xml 中注册接收器是唯一的方法。

> 如果你动态注册一个广播接收器——通过调用 Context.registerReceiver()——你提供一个广播接收器*实例*......如果你试图通过命名广播接收器的类来向接收器发送一个意图，它永远不会被传递...... Android系统不会将您声明的 Intent 与您注册的 BroadcastReceiver 实例的类匹配。

来源： http: [//onemikro2nd.blogspot.com/2013/09/darker-corners-of-android.html](http://onemikro2nd.blogspot.com/2013/09/darker-corners-of-android.html)

# linux - 为arm交叉编译opencv程序时出错

> ID：14810135
> 
> 赞同：0
> 
> 时间：2013-02-11T10:21:04.917
> 
> 标签：linux, opencv

arm-linux-g++ -o samplecam usbcam.c `pkg-config opencv --cflags --libs` usbcam.c:25：注意：'va_list' 的修改在 GCC 4.4 /usr/local/lib/libopencv_calib3d.so 中发生了变化：无法读取符号：文件格式错误collect2: ld 返回 1 退出状态 make: *** [usbcam] 错误 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:37:22.293

问题是什么？你做什么工作？我假设您的 pkg-config 获取安装在您的构建机器中的库的设置（路径 /usr/local/lib 建议）。难怪它不会与 ARM 二进制文件链接。

如果您有 ARM 构建的 opencv 及其 SDK，您应该在配置构建之前将 PKG_CONFIG_PATH 设置为 /opt/crosstoolchain/.../opencv/lib/pkgconfig？

# c# - C# - 访问流中的 DBF 文件

> ID：14810147
> 
> 赞同：0
> 
> 时间：2013-02-11T10:21:59.440
> 
> 标签：c#, webmethod, dbf

我有一个 WebMethod，用于允许用户上传数据库文件 (*.DBF)。我知道我可以使用带有适当连接字符串的 OleDbConnection 访问 *.DBF 文件。但我真的不想将文件保存在服务器上，我的 WebMethod 将文件内容保存在流中。无论如何我可以在流中访问 *.DBF 文件吗？

# php - 使用 PHP 从 db 中提取具有特定参数的数据

> ID：14810148
> 
> 赞同：0
> 
> 时间：2013-02-11T10:22:02.277
> 
> 标签：php, class, parameters

假设我的 html 布局中有 3 个列/div/部分，我们称它们为 cat1、cat2、cat3。然后我有一个数据库，其中有一个名为“内容”的表。在该表中，我有字段 id、title、content、category。

现在我想用我的 mysql 表中的相应内容填充这 3 列。例如 - 从 category = cat1 的表中获取所有内容（对应于第一列）。

我可以制作 3 个函数，每个函数都有自己的参数，但我不想重复代码。如何使用单个函数执行此操作，但仅使用不同的参数？

我在想这样的事情：

```
public function displayAll_with_category ($category) {
  $sql = $con->prepare("SELECT * FROM Table WHERE Category=?");
  $sql->bindParam(1, $category);
  $sql->execute();
  while ($row = $sql->fetch()) {
    echo $row['Title'];
  }
} 
```

然后在我的 HTML 中：

```
<div id="cat1">
  // Using a central class
  <?php include('class.php'); $obj = new handler; $obj->displayAll_with_category(); ?>
</div> 
```

到目前为止一切顺利，我需要以某种方式更改 $category 参数，以便我可以使用相同的函数来调用 cat1/2/3 的内容。我不知道该怎么做，通常我需要通过按钮或表单向 PHP 函数发送一些东西，但这次不是这样。这在纯 PHP 中是否可行？我可以考虑用 AJAX 来做这件事，但现在我想知道它是否可以用 PHP 来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:25:59.177

我不确定这是否是你想要的。

这将为您提供类别 1、2 和 3 的数据。我刚刚在视图中创建了一个循环来调用具有不同参数的函数：

```
<?php
for($cont = 0; $cont<4; $cont++){
?>
<div id="cat1">
  // Using a central class
  <?php include('class.php'); $obj = new handler; $obj->displayAll_with_category($cont); ?>
</div>
<?php
}
?> 
```

哦，如果我是你，我会尝试将逻辑与视图分开，我将在视图中打印函数的结果，而不是在其中执行。

# javascript - 在 iframe 中使用 jquery 设置下拉值

> ID：14810151
> 
> 赞同：1
> 
> 时间：2013-02-11T10:22:08.300
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 fancybox 并单击锚标记，我将打开一个 iframe，如下所示：-

```
<a href="/Files/Upload/?personId=@Model.PersonID" class="iframe UpdateLink privilegeLevelIdentityForFile" data-privilegelevelid="@Model.PrivilegeLevelInfoForCurrentUser.PrivilegeLevelInfo.LevelId" title="Upload file(s)">[ + ]</a> 
```

iFrame 由以下形式组成：-

```
<div id="divUploadForm">
@using (Html.BeginForm("UploadSpecifiedFileToS3Completed", "Files", FormMethod.Post, new { id = "uploadForm", enctype = "multipart/form-data" }))
{
    @Html.DropDownList("PrivilegeLevelId", new SelectList((IEnumerable<iNGRID_Data.Security.PrivilegeLevel>)ViewData["PrivilegeLevelsList"], "LevelId", "LevelName"))

    <hr />
    <p>
        <input type="submit" value="Upload" id="uploadButton" class="button" />
    </p>
}
</div> 
```

我在尝试在 iframe 中设置下拉列表的值时使用以下函数

```
$('.privilegeLevelIdentityForFile').click(function () {
    var privilegeLevelId = $(this).data("privilegelevelid");
    alert(privilegeLevelId);
    $("#uploadForm").contents().find('#PrivilegeLevelId').val(privilegeLevelId);
}); 
```

我正确收到警报，但无法设置该值。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:26:13.793

您需要`contents()`在`iframe`元素上使用，而不是`div`iframe 中的包含。试试这个：

```
$("#iframeElement").contents().find('#PrivilegeLevelId').val(privilegeLevelId) 
```

显然，您需要根据需要进行更改`#iframeElement`。

# php - windows环境下php后台进程

> ID：14810152
> 
> 赞同：4
> 
> 时间：2013-02-11T10:22:13.337
> 
> 标签：php

我正在使用 windows-7 操作系统和 wamp 服务器。我有 2 个 php 文件 trigger.php，background.php。我想在后台运行 background.php。我必须从 trigger.php 调用这个文件。

我尝试了以下方法。

我在 trigger.php 中添加了这段代码

```
 $WshShell = new COM("WScript.Shell");
   $oExec = $WshShell->Run("C:\wamp\bin\php\php5.3.5\php-win.exe -f C:/wamp/www/background.php", 0, false); 
```

但我的 background.php 没有被调用。

我怎么能这样做？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T10:27:41.167

```
function execInBackground($cmd) { 
    if (substr(php_uname(), 0, 7) == "Windows"){ 
        pclose(popen("start /B ". $cmd, "r"));  
    } 
    else { 
        exec($cmd . " > /dev/null &");   
    } 
} 
```

在这种情况下，你`$cmd`会`"php C:/wamp/www/path/to/background.php"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:24:01.760

我改变了功能如下，

```
$cmd = 'C:\wamp\bin\php\php5.3.5\php.exe C:\wamp\www\email3.php';

function execInBackground($cmd) { 
    if (substr(php_uname(), 0, 7) == "Windows"){ 
        pclose(popen("start /B " . $cmd, "r"));  
    } 
    else { 
        exec($cmd . " > /dev/null &");   
    } 
} 
```

并且，它对我有用。:)

# ruby - 保留单词顺序的单词中的反转字符

> ID：14810153
> 
> 赞同：1
> 
> 时间：2013-02-11T10:22:14.493
> 
> 标签：ruby

我试图在一串多个单词中反转*每个单词的单词。*例如：

> “嗨，怎么了”=>“ih stahw pu”

这和我得到的一样接近：

```
def backwards(s)
  s.split.each do |y| y.reverse! end
end 
```

事情是这返回一个数组，而不是一个字符串。我尝试`join(' ')`在之后添加，`reverse!`但这给了我一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T10:24:29.680

```
str.split(' ').map{|w| w.reverse}.join ' ' 
```

更清洁的版本：

```
str.split.map(&:reverse).join ' ' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T10:53:30.040

不知道为什么人们坚持使用`split`.

```
s.gsub(/\w+/, &:reverse) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:24:47.477

你应该做：

```
def backwards(str)
  str.split.map(&:reverse).join(' ')
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T10:24:59.637

你几乎做对了......你必须调用`join(' ')`块的结果

```
def backwards(s)
  s.split.map { |word| word.reverse }.join(' ')
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T10:24:51.847

你想加入 的结果，而`each`不是 的结果`reverse!`。你需要：

```
s.split.each {|y| y.reverse!}.join ' ' 
```

# android - 如何在 Android 中播放在线视频？

> ID：14810159
> 
> 赞同：9
> 
> 时间：2013-02-11T10:22:26.240
> 
> 标签：android, video-streaming

我正在 Android 中开发一个示例媒体播放器应用程序来播放在线视频，我已经开发了一些代码来播放视频。它可以很好地播放 SD 卡中的视频，但在这方面我面临两个问题。

1-当我打开在线视频的应用程序时，它会显示视频，但不会播放视频，过了一会儿它会显示一个警告对话框，其中包含“抱歉，无法播放此视频”消息。

2-我有“进度条”的代码，但是当从互联网下载视频时，我不知道将代码放在哪里。

这是我的代码，您可以检查它。提前致谢。

```
myVideoView = (VideoView) findViewById(R.id.surface_view);

        try
        {

            myVideoView.setVideoURI(Uri.parse("http://www.MY_DOMAIN_NAME.com/videos/video1.mp4"));
            myVideoView.setMediaController(new MediaController(this));
            myVideoView.requestFocus();
            myVideoView.start();
        }
        catch(Exception e)
        {
            Toast.makeText(getApplicationContext(), "No Media found", Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T10:30:21.937

试试这样

```
 VideoView v;
 MediaController mediaController;
 ProgressDialog progressDialog; 
```

然后

```
public void playvideo(String videopath) {
    Log.e("entered", "playvide");
    Log.e("path is", "" + videopath);
    try {
        progressDialog = ProgressDialog.show(VideoPlay.this, "",
                "Buffering video...", false);
        progressDialog.setCancelable(true);
        getWindow().setFormat(PixelFormat.TRANSLUCENT);

        mediaController = new MediaController(VideoPlay.this);

        Uri video = Uri.parse(videopath);
        v.setMediaController(mediaController);
        v.setVideoURI(video);

        v.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer mp) {
                progressDialog.dismiss();
                v.start();
            }
        });

    } catch (Exception e) {
        progressDialog.dismiss();
        System.out.println("Video Play Error :" + e.getMessage());
    }

} 
```

如果仍然出现“无法播放此视频”的问题，请尝试更改视频格式，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:30:30.863

在 Android 中使用视频视图播放实时视频非常容易。我在这里粘贴代码，试试这个，它会很好地为你工作。

```
public class PlayVideo extends Activity

{

      //private String videoPath ="Url";

      private static ProgressDialog progressDialog;
      String videourl; 
      VideoView videoView ; 

      protected void onCreate(Bundle savedInstanceState)
      {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.play_video);

            videoView = (VideoView) findViewById(R.id.videoView);

            progressDialog = ProgressDialog.show(PlayVideo.this, "", "Buffering                 
             video...",true);
            progressDialog.setCancelable(true); 

            PlayVideo();

      }
      private void PlayVideo()
      {
            try
            {    
                  getWindow().setFormat(PixelFormat.TRANSLUCENT);
                  MediaController mediaController = new MediaController(PlayVideo.this);
                  mediaController.setAnchorView(videoView);         

                  Uri video = Uri.parse(videourl);           
                  videoView.setMediaController(mediaController);
                  videoView.setVideoURI(videoPath);
                  videoView.requestFocus();            
                  videoView.setOnPreparedListener(new OnPreparedListener()
                  {

                        public void onPrepared(MediaPlayer mp)
                        {                 
                              progressDialog.dismiss();   
                              videoView.start();
                        }
                  }); 

            }
            catch(Exception e)
            {
                  progressDialog.dismiss();
                  System.out.println("Video Play Error :"+e.toString());
                  finish();
            } 

      }
} 
```

您可以从以下链接中找到代码：

[http://hasmukhbhadani.blogspot.in/search/label/Video-Play%20Live%20Streaming%20in%20Android。](http://hasmukhbhadani.blogspot.in/search/label/Video-Play%20Live%20Streaming%20in%20Android.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T10:30:19.083

## 更新 2020 Kotlin、AndroidX 和 Android P+

ProgressDialog 已被弃用，因此我使用 Alert Dialog 在文件缓冲时显示加载对话框，然后开始播放：

```
private fun playVideo(videopath: String) {
    Log.e("Playing Video File: ", "" + videopath);
    try {
        //Show Loader
        val builder: AlertDialog.Builder = AlertDialog.Builder(this@ScreenCaptureImageActivity);
        builder.setCancelable(false); // if you want user to wait for some process to finish,
        builder.setView(R.layout.layout_loading_dialog);
        progressDialog = builder.create();

        //add Controller
        val mediaController = MediaController(this@ScreenCaptureImageActivity);
        videoView.setMediaController(mediaController)
        //Add URI

        //Uncomment to play from local path
        //videoView.setVideoURI(Uri.parse(videopath))

        //Example Play from Internet
        videoView.setVideoPath("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4")

        videoView.setOnPreparedListener {
            progressDialog!!.dismiss();
            //Start Playback
            videoView.start()
            Log.e(TAG, "Video Started");
        }
    } catch (e: Exception) {
        progressDialog!!.dismiss();
       Log.e(TAG, "Video Play Error :" + e.localizedMessage);
    }
} 
```

**加载器 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="20dp">
    <ProgressBar
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="4"
        android:gravity="center"
        android:text="Please wait! This may take a moment." />
</LinearLayout> 
```

**对于网络访问，在清单中添加网络配置，从 Android P 是必需的**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.STORAGE" />
 <application
        ...
        android:networkSecurityConfig="@xml/network_security_config"
        > 
```

**在 res/xml 中添加 network_security_config.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
    <base-config cleartextTrafficPermitted="true">
        <trust-anchors>
            <certificates src="system" />
        </trust-anchors>
    </base-config>
</network-security-config> 
```

[![在此处输入图像描述](../Images/cab677395619dec72879180d1e41d1ec.png)](https://i.stack.imgur.com/Mvnrr.jpg)

# python - subprocess.Popen 没有这样的文件或目录，不是由字符串命令引起的

> ID：14810160
> 
> 赞同：0
> 
> 时间：2013-02-11T10:22:26.943
> 
> 标签：python, subprocess

我正在运行一个在 wav 文件上运行的 web 服务，但我不想只允许任何上传，所以我首先使用以下代码检查上传文件的持续时间：

```
os.chdir("/home/me/bin")
proc = subprocess.Popen(['duration',wav],stdout=subprocess.PIPE,stderr=subprocess.PIPE,shell=False)
out, errors = proc.communicate()
time = int(float(out.strip()))
if time > MAX_TIME:
    sys.exit(1) 
```

这几个月来一直运行良好，但最近（迁移后，我应该添加）我收到以下错误：

```
Traceback (most recent call last):
  File "/home/me/webservice.py", line 100, in <module>
    proc = subprocess.Popen(['duration',wav],stdout=subprocess.PIPE,stderr=subprocess.PIPE,shell=False)
  File "/usr/lib64/python2.6/subprocess.py", line 639, in __init__
    errread, errwrite)
  File "/usr/lib64/python2.6/subprocess.py", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

这个错误似乎主要是由于命令使用字符串而不是列表引起的，但这里不是这种情况。当我尝试在单独的脚本中重现此错误时，我不能。

有人知道这里可能是什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:44:52.460

没有路径的命令总是*只*在`PATH`. 您不能 cd 到一个目录并让`subprocess`（或您的外壳程序）找到位于该目录中的命令而不指定至少一个相对路径。这是标准的命令查找行为。

如果要在当前工作目录中运行命令，则*必须*指定路径`./`以使其明确`PATH`不使用搜索语义。

`PATH`也不支持环境变量中的相对路径；添加`.`到 PATH 被认为是一种安全风险，并且某些系统会明确`.`从 PATH 中过滤掉。您必须已从允许这样做的系统迁移到`.`在`PATH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T08:32:28.660

该错误可能与您提供给 Popen 的可执行文件无关，而是与随后被调用且在新环境的 PATH 中找不到的另一个可执行文件有关。

这种确切的情况发生在我身上，问题是我没有为我正在调用的脚本安装解释器。调试令人沮丧，因为错误消息没有告诉您它找不到哪个文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-11T12:02:37.150

考虑在文件顶部执行以下操作，那么`chdir`除非您出于其他原因必须这样做，否则应该没有必要。

```
import os
cmd = os.path.expanduser('~/bin/duration')
if not os.path.isfile(cmd):
    raise IOError("command '%s' not found" % cmd)

proc = subprocess.Popen([cmd,wav ... 
```

# memory - 在 valgrind 中检查内存泄漏

> ID：14810161
> 
> 赞同：1
> 
> 时间：2013-02-11T10:22:28.183
> 
> 标签：memory, valgrind, memory-leaks

我的老师说我的程序有内存泄漏，所以我用valgrind检查了一下。我收到以下错误：

```
==24060== Invalid read of size 8
==24060==    at 0x4EB4B4C: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E253: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc040 is 0 bytes inside a block of size 5 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4E63D43: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E23D: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB4B54: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E253: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc048 is 3 bytes after a block of size 5 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4E63D43: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E23D: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB4931: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E266: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc040 is 0 bytes inside a block of size 5 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4E63D43: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E23D: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Conditional jump or move depends on uninitialised value(s)
==24060==    at 0x4EB493F: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5DF87: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Conditional jump or move depends on uninitialised value(s)
==24060==    at 0x4E5DF8D: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Conditional jump or move depends on uninitialised value(s)
==24060==    at 0x4E5DFAF: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Use of uninitialised value of size 8
==24060==    at 0x4E5E033: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Use of uninitialised value of size 8
==24060==    at 0x4E5E041: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Conditional jump or move depends on uninitialised value(s)
==24060==    at 0x4E5E047: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Conditional jump or move depends on uninitialised value(s)
==24060==    at 0x4EB2E42: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E06C: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Use of uninitialised value of size 8
==24060==    at 0x4EB4214: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E06C: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Use of uninitialised value of size 8
==24060==    at 0x4EB4218: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E06C: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E1E: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CECD: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc158 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E129: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB4931: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4EB4585: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc158 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E129: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E23: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5DEFA: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dc158 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5E129: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D328: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CE85: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB4931: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5C9D2: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D0B2: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dd568 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E1E: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CA0F: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D0B2: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dd518 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E23: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CA0F: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D0B2: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dd568 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E1E: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CA83: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D0B2: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dd568 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
==24060== Invalid read of size 8
==24060==    at 0x4EB2E1E: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CA9D: ??? (in /lib64/libc-2.16.so)
==24060==    by 0x4E5D0B2: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060==  Address 0x51dd568 is 8 bytes inside a block of size 12 alloc'd
==24060==    at 0x4C2AD7B: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==24060==    by 0x4EB4591: strdup (in /lib64/libc-2.16.so)
==24060==    by 0x4E5CEE4: setlocale (in /lib64/libc-2.16.so)
==24060==    by 0x401751: ??? (in /usr/bin/test)
==24060==    by 0x4E52804: (below main) (in /lib64/libc-2.16.so)
==24060== 
```

谁能帮我理解这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:18:29.467

Why the valgrind output doesn't show line numbers? I don't know where to look for this errors. I compiled my program with flag -g and used valgrind with following syntax: valgrind --tool=memcheck --track-origins=yes -q test

# asp.net-mvc-3 - IIS 7.5 Windows + 匿名身份验证间歇性工作

> ID：14810162
> 
> 赞同：0
> 
> 时间：2013-02-11T10:22:31.747
> 
> 标签：asp.net-mvc-3, c#-4.0, iis-7.5, windows-authentication

我有一个 MVC 3 站点，其中一些控制器/操作需要 Windows 身份验证，其他不需要，即是匿名的。

该站点运行良好一段时间，我可以访问匿名操作和经过身份验证的操作（无需提示，凭据在 Chrome/IE/FireFox 中自动传递），但随后身份验证停止工作，我开始收到提示输入从未使用过的凭据公认。

我必须重新启动整个服务器，或者将站点物理路径更改为另一个应用程序，发出经过身份验证的请求，该请求在返回原始站点时有效。然后情况是冲洗并重复，但我找不到它的模式。如果我什么都不做，身份验证就会中断。

我的 IIS 7.5 配置如下：

应用程序池

*   .NET 框架版本 - v4.0
*   托管管道模式 - 集成
*   应用程序池标识 - ApplicationPoolIdentity

地点

*   匿名身份验证 - 已启用
*   匿名用户身份 - IUSR [我相信这是默认设置]
*   ASP.NET 模拟 - 已禁用
*   表单身份验证 - 已禁用
*   Windows 身份验证 - 已启用
*   Windows 身份验证扩展保护 - 关闭
*   Windows 身份验证启用内核模式身份验证 - 开
*   Windows 身份验证提供程序 - 协商、NTLM

控制器

```
// Anonymous Controller
    public class HomeController : Controller
    {
       public ActionResult Index()
       {
          return this.View();
       }
    }

// Authenticated Controller
    [Authorize]
    public class AnotherController : Controller
    {
       public ActionResult Index()
       {
          var viewModel = // create view model;
          return this.View(viewModel);
       }
    } 
```

在任何时候，身份验证是否有效，对 /home/index 的 GET 都会返回 200。完全符合预期。当身份验证工作时，对 /another/index 的 GET 请求如下所示：

```
> GET /another/index
  Response: 401
  Response Headers: WWW-Authenticate: NTLM, WWW-Authenticate:Negotiate

> GET /another/index
  Request Header: Authorization: Negotiate TlRMIVNDUAACAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw==
  Response: 401
  Response Header: WWW-Authenticate: Negotiate TlRMTVNTUAACAAAACAAEADgAAAAVgoni2YSlwIHmCL4AAAAAAAAAAIgAiAA8AAAABgGxHQAAAA9GAFIAAgAEAEYAUgABABQARgBSAEkATgBUAFIAQQBOAEUAVAAEABQARgBSAC5ATgBEAFMALgBjAG8AbQADACoARgBSAKkATgBUAFIAQQBUAEUAVAAuAGCAcgAuAG4AZACzAC4AYvBvAG0ABQAOAE4ARABTAC6AYwBvAG0ABwAIAOST3lPK980BAAAAAA==

 > GET /another/index
   Request Headers: Authorization: Negotiate TlRMTVNTUAACAAAACAAEADgAAAAVgoni2YSlwIHmCL4AAAAAAAAAAIgAiAA8AAAABgGxHQAAAA9GAFIAAgAEAEYAUgABABQARgBSAEkATgBUAFIAQQBOAEUAVAAEABQARgBSAC5ATgBEAFMALgBjAG8AbQADACoARgBSAKkATgBUAFIAQQBUAEUAVAAuAGCAcgAuAG4AZACzAC4AYvBvAG0ABQAOAE4ARABTAC6AYwBvAG0ABwAIAOST3lPK980BAAAAAA==
   Response: 200 
```

当身份验证中断对 /another/index 的 GET 请求时，如下所示：

```
> GET /another/index
  Response: 401
  Response Headers: WWW-Authenticate: NTLM, WWW-Authenticate:Negotiate

> GET /another/index
  Request Header: Authorization: Negotiate TlRMIVNDUAACAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw==
  Response: 401
  Response Headers: WWW-Authenticate: NTLM, WWW-Authenticate:Negotiate 
```

此时，系统会提示我输入凭据，输入相同的请求，重新发送响应：

```
> GET /another/index
      Request Header: Authorization: Negotiate TlRMIVNDUAACAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw==
      Response: 401
      Response Headers: WWW-Authenticate: NTLM, WWW-Authenticate:Negotiate 
```

有谁知道我是否有错误配置（我很确定我没有或者我根本不希望它工作），为什么身份验证会中断或如何阻止它？

非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:23:49.247

所以事实证明这是由于 web.config 的 httpErrors 部分使用不当造成的

```
<httpErrors errorMode="Custom">
      <remove statusCode="401" subStatusCode="-1"/>
      <error statusCode="401" path="/Unauthorized" responseMode="ExecuteURL"/>
      <remove statusCode="403" subStatusCode="-1"/>
      <error statusCode="403" path="/Unauthorized" responseMode="ExecuteURL"/>
      <remove statusCode="404" subStatusCode="-1"/>
      <error statusCode="404" path="/NotFound" responseMode="ExecuteURL"/>
      <remove statusCode="500" subStatusCode="-1"/>
      <error statusCode="500" path="/ServerError" responseMode="ExecuteURL"/>
    </httpErrors> 
```

这导致 NTLM 要求在需要身份验证时重新提交未从服务器发送的凭据。即应该发生什么请求，挑战（请重新提交凭据）响应。实际发生了什么请求，响应。挑战从未发送过。

正确的方法是完全删除此部分，并在我的错误控制器操作中使用扩展方法[TrySkipIisCustomErrors](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)。

# cordova - 2013 年 Phonegap 2.3 和带有 HTML5 视频标签的 Android

> ID：14810170
> 
> 赞同：12
> 
> 时间：2013-02-11T10:22:56.940
> 
> 标签：cordova, android-webview, html5-video

我知道这个问题已经被问过很多次了，而且大多数人的回答都是一样的：“使用视频播放器插件”。但这不是我们中的一些人想要播放视频的方式，我们想要内联播放。据我说，没有答案。

[http://simonmacdonald.blogspot.ca/2012/10/partial-support-for-video-tag-in.html](http://simonmacdonald.blogspot.ca/2012/10/partial-support-for-video-tag-in.html)

任何人都可以给出在phonegap webview中播放视频的答案吗？

我知道人们正在Android webview（内联）中播放html5视频标签，构建自己的webview，那么phonegap有什么问题？

我的意思是 2013 年 android 设备真的不能在 phonegap webview 中播放 html5 视频吗？

即使尝试这个：（显然你不能从资产文件夹中播放视频）

```
<video id="1" autobuffer width="100%" tabindex="0">
         <source src="file:///videos/video3.mp4" type="video/mp4" />
        </video> 
```

不工作

![在此处输入图像描述](../Images/17da3bd69e6d69e3f306965a6ed8485b.png)

```
<script type="text/javascript">

    $(function(){
        $("video")[0].play()
    });
</script> 
```

清单.xml：

```
<application android:icon="@drawable/icon" android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:debuggable="true"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T01:10:30.030

我最近遇到了这个问题并创建了一个插件来完成你想要做的事情。

这是存储库：[https ://github.com/jaeger25/Html5Video](https://github.com/jaeger25/Html5Video)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:00:31.033

[这是一个示例应用程序](https://github.com/rjsteinert/HTML5VideoInAndroidWebViewExample)，在 loadRemoteFileFromHTTP 分支上，它成功地从远程位置在 web 视图中加载了一个视频文件。在 loadLocalFileUsingFileReader 分支上，test.m4v 文件存在于设备的 SD 卡上，引用为 file:///mnt/sdcard/external_sd/test.m4v。当您尝试将视频文件包含在您的应用程序中时，就会遇到问题。无法使用 file:/// 协议来引用您的应用程序中的某些内容，并且**您不能使用相对 URL 来引用 WebView 中的视频。**换句话说，如果您在 assets/www 目录中有视频文件，并且您将 src 设置为“nameOfVideo.mp4”，那么它就无法正常工作:(。有关示例，请参见 loadLocalFileUsingRelativeURL 分支。

[这是关于相对 URL 问题的错误报告。](https://code.google.com/p/android/issues/detail?id=52334&thanks=52334&ts=1362127613)

# iphone - iOS - 如何通过应用程序联系人有选择地导入/导出 iPad 联系人

> ID：14810176
> 
> 赞同：1
> 
> 时间：2013-02-11T10:23:12.577
> 
> 标签：iphone, ios, ipad, ios6

我想创建一个应用程序，它应该将选定的联系人从 iPad 设备添加到您的 iPad 应用程序

我是 ios 新手，所以我没有从谷歌那里得到适当的帮助，有人可以帮我写一些文章或参考来做这样的应用程序。

感谢您的帮助，阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:28:44.110

**首先在您的类.h 文件**中添加所有 Delegate 和 Datasource 方法

 **```
<ABPeoplePickerNavigationControllerDelegate,ABPersonViewControllerDelegate,ABNewPersonViewControllerDelegate,ABUnknownPersonViewControllerDelegate> 
```

创造`ABPeoplePickerNavigationController`

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
        [[picker navigationBar] setBarStyle:UIBarStyleBlack];
        picker.peoplePickerDelegate = self;
        // Display only a person's phone, email, and birthdate
        NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],nil];

        picker.displayedProperties = displayedItems;
        // Show the picker
        [self presentModalViewController:picker animated:YES];
        [picker release]; 
```

添加Following Delegate和DataSource方法`ABPeopelPickerNavigationController`

```
#pragma mark - ABPeopelPickerNavigationController Delegate and DataSource Methods

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
    [self dismissModalViewControllerAnimated:YES];
}

- (void)unknownPersonViewController:(ABUnknownPersonViewController *)unknownCardViewController didResolveToPerson:(ABRecordRef)person
{
}

- (void)newPersonViewController:(ABNewPersonViewController *)newPersonView didCompleteWithNewPerson:(ABRecordRef)person
{
}

- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
{
    return YES;
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier;
{
    return YES;
} 
```

请尝试以下代码以从电话簿中获取人员的所有信息

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    ABAddressBookRef addressBook = ABAddressBookCreate();

    int i;
    NSString *strName = @"";
    NSString* company = @"";
    NSString *address = @"";
    NSString *suburb = @"";
    NSString *postalcode = @"";
    NSString *state = @"";
    NSString *country = @"";
    NSString *mobile = @"";
    NSString *phone = @"";
    NSString *emailid = @"";

    strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
    CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
    company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);

    NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
    CFRelease(name);

    for (i = 0; i < [allPeople count]; i++)
    {
        ABRecordRef record = [allPeople objectAtIndex:i];

        ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
        for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
        {
            NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
            if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
            {
                CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
                address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
                suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
                postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
                state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
                country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCountryKey)];

                CFRelease(dict);
            }
            CFRelease(HomeLabel);
        }
        CFRelease(multiValue);
    }
    CFRelease(allPeople);

    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString* mobileLabel = nil;
    for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
    {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",mobile);
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
            phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",phone);

            CFRelease(mobileLabel);
            break ;
        }
        CFRelease(mobileLabel);

    }
    CFStringRef value, label;
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex count = ABMultiValueGetCount(multi);
    if (count == 1)
    {
        value = ABMultiValueCopyValueAtIndex(multi, 0);
        emailid = (NSString*) value;
        NSLog(@"self.emailID   %@",emailid);
        CFRelease(value);
    }
    else
    {
        for (CFIndex i = 0; i < count; i++)
        {
            label = ABMultiValueCopyLabelAtIndex(multi, i);
            value = ABMultiValueCopyValueAtIndex(multi, i);

            // check for Work e-mail label
            if (CFStringCompare(label, kABWorkLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }
            else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }

            CFRelease(label);
            CFRelease(value);
        }
    }
    CFRelease(multi);

        }

    CFRelease(phones);
    CFRelease(addressBook);
    [self dismissModalViewControllerAnimated:YES];

    return NO;

} 
```

有关更多信息，请阅读[本](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/QuickStart.html)教程和[本](http://blog.slaunchaman.com/2009/01/21/cocoa-touch-tutorial-extract-address-book-address-values-on-iphone-os/)教程。

**谢谢 ：）****

# ios - iOS SDK - 将静态库与静态库链接

> ID：14810178
> 
> 赞同：0
> 
> 时间：2013-02-11T10:23:19.547
> 
> 标签：ios, testing, static-libraries, libraries

我有以下问题：我正在编写一个应用程序，该应用程序由 GUI 和类似的主项目和两个静态库组成：一个用于对服务进行身份验证，第二个用于使用该服务的一部分。问题是，我需要在服务库中使用部分身份验证库，例如身份验证库提供了一个我想在服务库中使用的 API http 客户端。在使用 GUI 构建整个应用程序时，我设法让它运行，但如果服务库应该独立构建（用于继续集成测试等），我没有管理它来运行它。我的部署目标是 5.0，我的 SDK 是 6.1。有没有办法做到这一点™？谢谢你的帮助。

菲利普

编辑：当然，我可以将身份验证库作为子项目放入服务库，但如果我需要在未来的应用程序中使用多个服务库，那将是非常混乱的，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:26:43.423

您缺少的基本问题是：

# 静态库未链接。

它们只是目标文件的*存档*，Mach-O 扩展了这个概念以支持同一文件中的多个体系结构（请参阅 参考资料`lipo`）。

将多个静态库链接在一起的唯一方法是在最终的二进制文件（app 或 dylib）中。

# javascript - 从隐藏的 iframe 打印页面

> ID：14810181
> 
> 赞同：1
> 
> 时间：2013-02-11T10:23:21.710
> 
> 标签：javascript, jquery

我在隐藏要打印的页面时遇到问题。

当我点击输入按钮时：

```
<input type="submit" id="print" name="print"> 
```

这将执行以下操作：

```
$(function(){
   $('#print').click(function(){
       if($('#bills_ID').val()==''){popUpMessage(Error);}
       else { window.open('Bills/BillsPrint.php?bills_ID='+$('#bills_ID').val(), '_blank') } 
   }); 
}); 
```

并打印页面。此时我不想在打印时打开此页面 Bills/BillsPrint.php。我只是希望它打印而不显示页面。

我怎样才能通过使用隐藏的 ifra 来尝试这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:28:13.753

像这样指定隐藏`iframe`：

```
<iframe src="" style="display: none" id="myPrintView"></iframe> 
```

并按如下方式使用 jQuery：

```
$('#print').click(function(e) {
    e.preventDefault();

    if($('#bills_ID').val()=='')
    {
        popUpMessage(Error);
    }
    else
    { 
        $('#myPrintView').attr('src', 'Bills/BillsPrint.php?bills_ID='+$('#bills_ID').val()); 
        $('#myPrintView').get(0).contentWindow.print();
    } 
}); 
```

你可以在这里看到一个工作的[**jsFiddle**](http://jsfiddle.net/TTUQY/)。

# android - 尝试 commitAllowingStateLoss 时出现 FragmentManager NullPointerException

> ID：14810183
> 
> 赞同：8
> 
> 时间：2013-02-11T10:23:32.433
> 
> 标签：android, android-fragments, android-fragmentactivity

**上下文：**我有一个`Activity`with a`Fragment`和 3 `InnerFragments`。当`Fragment` `onDestroy()`被调用时，我想从`FragmentManager`. 代码`onDestroy()`如下。

**问题：** `FragmentManager` throws `NullPointerException`，可能在`commitAllowingStateLoss()`被调用时。我不明白为什么。

```
@Override
public void onDestroy()
{
    super.onDestroy();
    if (getFragmentManager().findFragmentById(R.id.fragment_framelayout_left) != null)
    {
        FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
        fragmentTransaction.remove(mLeftFragment);
        fragmentTransaction.commitAllowingStateLoss();
    }
} 
```

**堆栈跟踪：**

```
02-11 12:15:14.162: E/AndroidRuntime(25911): FATAL EXCEPTION: main
02-11 12:15:14.162: E/AndroidRuntime(25911): java.lang.NullPointerException
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1419)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.os.Handler.handleCallback(Handler.java:725)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.os.Looper.loop(Looper.java:137)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at java.lang.reflect.Method.invokeNative(Native Method)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at java.lang.reflect.Method.invoke(Method.java:511)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-11 12:15:14.162: E/AndroidRuntime(25911):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T14:20:16.833

`FragmentManager`管理所有`Fragments`级别，并且它们的`Activity`生命周期将与该父级绑定`Activity`。子管理器在级别上`Fragment`管理所有内容，它们的生命周期将与该父级绑定。`Fragments``Fragment``Fragment`

因此，对于您的手机架构，请将您添加`InnerFragment`到您的`Activity`using `getFragmentManager()`. 当`Activity`永久销毁时（通过后退按钮 / `finish()`），`FragmentManager`将销毁并`InnerFragment`为您释放。

对于您的平板电脑架构，请将您添加`InnerFragments`到您的`Fragment`使用中`getChildFragmentManager()`（在最新的支持库中）。当`Fragment`毁灭为善时，`FragmentManager`意志为你毁灭并释放`InnerFragments`。

你不应该管理释放和摧毁你`Fragments`自己。我建议记录您的生命周期事件，`Activities`这样`Fragments`您就可以观察它们的状态并确保正确的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T09:34:56.150

NullPointerException 是由于 Activity 的 Handler 未从 FragmentManager 设置的事实引起的，因此可以防止崩溃的“解决方案”如下：

```
public void onDestroy(){
        super.onDestroy();
        try {
            Field mActivityField = getFragmentManager().getClass().getDeclaredField("mActivity");
            mActivityField.setAccessible(true);
            mActivityField.set(getFragmentManager(), this);

            Field mPendingActionsField = getFragmentManager().getClass().getDeclaredField("mPendingActions");
            mPendingActionsField.setAccessible(true);
            mPendingActionsField.set(getFragmentManager(), null);

            Field f = Activity.class.getDeclaredField("mHandler");
            f.setAccessible(true);
            Handler handler = (Handler) f.get(this);
            handler.close();
        } catch (Throwable e) {

        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T06:08:49.813

案例：当您需要从另一个片段（父片段）调用片段（子片段）时

始终使用`getChildFragmentManager()`而不是`getFragmentManager`在您的父片段内。

[阅读文档](https://developer.android.com/reference/android/app/Fragment)

# java - 如何访问三角形数字中的每一行？

> ID：14810188
> 
> 赞同：1
> 
> 时间：2013-02-11T10:23:48.077
> 
> 标签：java, arrays, collections, multidimensional-array

给定三角数如下：

```
4
5  3
9  2  21
1  46 12  8
.... upto n rows. 
```

需要从每一行中获取最大的数字并将其汇总。

我不知道在哪里以及如何放置所有 n 行（如 2D 数组）以及如何从中选择每一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:31:25.583

```
public static void main(String[] args) {

    int[][] matrix = { { 4 }, { 5, 3 }, { 9, 2, 21 }, { 1, 46, 12, 8 } };
    int sum = 0;
    for (int i = 0; i < matrix.length; i++) {
        int maxInRow = matrix[i][0];
        for (int j = 0; j < matrix[i].length; j++) {
            System.out.println(matrix[i][j]);

            if (maxInRow < matrix[i][j]) {
                maxInRow = matrix[i][j];
            }
        }
        sum = sum + maxInRow;

    }
    System.out.println(sum);

} 
```

尝试这个：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:44:57.067

如果您可以使用 a`List<List<Integer>>`而不是，那么通过使用方法`array`，您的工作将非常容易：[`Collections.max`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29)

```
// The below syntax is called `double braces initialization`.
List<List<Integer>> triangularNumber = new ArrayList<List<Integer>>() {
    {
        // Add inner lists to the outer list.
        add(Arrays.asList(4)); 
        add(Arrays.asList(5, 3));
        add(Arrays.asList(9, 2, 21));
        add(Arrays.asList(1, 46, 12, 8));
    }
};

int sum = 0;
for (List<Integer> innerList: triangularNumber) {
    sum += Collections.max(innerList);
}

System.out.println(sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:42:32.307

为什么不使用地图？如果您需要知道每一行的索引，您可以这样做：

```
Map<Integer, List<Integer>> numbers = new HashMap<Integer, List<Integer>(); 
```

至于找到可以使用的最大值：

```
Collections.max(...) 
```

[JDK文档](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#max%28java.util.Collection%29)

这应该可以解决问题。

# node.js - 在 node.js 中使用自定义的 fabric.js 类

> ID：14810193
> 
> 赞同：0
> 
> 时间：2013-02-11T10:23:56.527
> 
> 标签：node.js, fabricjs, serverside-javascript

我`fabric.js`在我的应用程序中使用了几个自定义类来呈现和封装一些额外的数据属性[，如此处所建议的](https://stackoverflow.com/a/11276133/187907)。

现在我有了这些生成的 JSON 数据，我想渲染画布并将其写入服务器上的 PNG 图像，使用`node.js`和 fabric 的`npm`包。这适用于内置的结构类，例如`fabric.Rect`or `fabric.Text`，但我的自定义不断抛出奇怪的 require 错误。

基本上，自定义文件如下所示：

### 织物.custom.js

```
// without this node raises "fabric is not defined" error
var fabric = fabric || {};

if (typeof exports !== 'undefined') {
  exports.fabric = fabric;
}

// actual implementations
fabric.NamedImage = fabric.util.createClass(fabric.Image, {

  type: 'named-image',

  // custom overrides
  // ...
}); 
```

并像这样加载到我的节点脚本中：

```
var fabric = require('fabric').fabric;
require('./fabric.custom');

// read JSON and write to PNG .. 
```

当我运行它时，会发生以下异常：

```
/Users/sa125/code/nodetest/fabric.custom.js:13
fabric.NamedImage = fabric.util.createClass(fabric.Image, {
                               ^
TypeError: Cannot call method 'createClass' of undefined
    at Object.<anonymous> (/Users/sa125/code/nodetest/fabric.custom.js:13:32)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/sa125/code/nodetest/test.js:4:16)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10) 
```

我需要做些什么才能将我的客户端 fabric.js 代码与 node.js 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:32:42.083

这仅仅是因为 node.js 没有[全局范围](http://nodejs.org/api/globals.html)。在浏览器中发生的是原始结构变量在全局命名空间下的 DOM 中分配。这意味着在您的自定义模块中，结构变量已经存在。

在 node.js 中，该变量不存在，因为每个文件都有自己的本地范围。当 node.js`fabric`在自定义文件中查找变量时，由于尚未创建，因此无法找到它。您需要做的是`fabric`使用您的附加方法扩展第一个 require 之后的原始对象，或者在 require 上创建一个新变量并将两个对象合并在一起。无论哪种方式，`require('...');`如果没有分配给变量，在 node.js 中都是无用的。

# c# - 从 JavaScript 中的 OnClientClick 事件阻止 c# 中的 asp:Button OnClick 事件？

> ID：14810195
> 
> 赞同：3
> 
> 时间：2013-02-11T10:24:06.463
> 
> 标签：c#, asp.net, button, onclick, onclientclick

`asp:Button`我的网页上有一个，它调用了一个 JavaScript 函数和一个代码隐藏方法。后者调用导航到另一个页面。在 JavaScript 函数中，我正在检查一个条件。如果不满足此条件，我想中止导航以便`OnClick`不调用该方法。这可能吗？

```
<asp:Button OnClick="Button_Click" ID="Action1" OnClientClick="SaveValues()"
    Text="Action1" CssClass="specialButton" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:25:27.680

要阻止`OnClick`执行，只需`false`从以下位置返回`OnClientClick`：

```
<asp:Button OnClick="Button_Click" ID="Action1" OnClientClick="return SaveValues();"
    Text="Action1" CssClass="specialButton" runat="server" /> 
```

假设`SaveValues`无论是否满足条件，它都会返回一个布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:29:02.580

对的，这是可能的

```
function SaveValues()
{
if(//check your codition here)
{
return true;
}
else
{
return false;
}
}

<asp:Button OnClick="Button_Click" ID="Action1" OnClientClick="javascript:return SaveValues();" Text="Action1" CssClass="specialButton" runat="server" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:26:16.920

返回`true`or `false`，根据 JavaScript 的成功，应该阻止或启用按钮提交。因此，与其只是在 结尾处添加它`OnClientClick`，您必须对其进行条件化并立即使您的调用看起来更难看，让该方法指示其操作状态。

# php - PHP如何检测图像是否包含颜色？

> ID：14810199
> 
> 赞同：1
> 
> 时间：2013-02-11T10:24:25.893
> 
> 标签：php, colors

我正在编写一个图像搜索引擎，它允许用户按颜色搜索。作为其中的一部分，我需要确定图像是灰度（仅包含黑色、白色或灰色阴影）还是包含任何颜色。

如何检测图像是否包含黑色、白色和灰色阴影之外的任何像素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:28:24.420

[`imagecolorat()`](http://php.net/manual/en/function.imagecolorat.php)您必须使用（参见示例＃2）遍历每个像素。

**灰度颜色对于红色、绿色和蓝色将具有相同的值。**如果您发现值不同的像素，则它是包含颜色的图像（至少在技术上 - 具有像`RGB(100,102,103)`人眼看起来灰色的颜色。）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-13T17:26:17.710

根据服务器上安装的光栅图像套件，您可以使用这些工具获得比 Pekka 在此处提供的更简单、更准确的答案。这是否更快是一个公开的论点（见下面的注释）。

在下面的 ImageMagick 示例（和链接）中，建议是：

> 将图像转换为 HSL，然后输出详细信息（“识别”统计信息）

分析详细信息可以为您提供问题的答案；因此准确、简单，无需对“近”灰度图像进行猜测。它还提供您可以使用的其他数据，具体取决于您的工作流程和需求。

来源：[http ://www.imagemagick.org/discourse-server/viewtopic.php?t=19580](http://www.imagemagick.org/discourse-server/viewtopic.php?t=19580)

我怀疑这是否比 Pekka 的解决方案*更快*，因为无论如何转换图像基本上都会遍历像素。

所以，Pekka 对速度的回答。这个答案是为了精确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-23T13:39:14.220

我提出以下功能。它的工作方式只是找到以像素为单位的 RGB 值的相似性。如果只有一个像素的 RGB 值不同，则可能是彩色图像。但是，建议插入该`resize_uploaded()`功能以节省时间。

```
function detect_greyscale($source_file)
{
    $im = resize_uploaded($source_file);    
    $imgw = imagesx($im);
    $imgh = imagesy($im);

    $count_grey = '';
    $count_color = '';

    for ($i=0; $i<$imgw; $i++)
    {
        for ($j=0; $j<$imgh; $j++)
        {
            $rgb = ImageColorAt($im, $i, $j); 
            $rr = ($rgb >> 16) & 0xFF;
            $gg = ($rgb >> 8) & 0xFF;
            $bb = $rgb & 0xFF;
            if($rr == $gg and $rr == $bb and $bb == $gg)
            {
                $count_grey++;
            }
            else
            {
                $count_color++;
            }
        }
    }
    imagedestroy($im);
    if($count_color>0)
    {
        return 0;
    }
    return 1;
} 
```

# javascript - FlexSlider：如何使用 JS 或 jQuery 在页面加载时获取图像高度？

> ID：14810201
> 
> 赞同：3
> 
> 时间：2013-02-11T10:24:37.697
> 
> 标签：javascript, image, events, height, flexslider

在我的网站上使用 FlexSlider，我试图获取滑块中第一个图像的高度。我认为下面的代码可以完成这项工作，但似乎图像加载得很晚，因此它们在这个 jQuery 事件上没有高度。代码将返回“0”。

```
$(window).load(function() {
    $(document).ready(function() {
        var height = $(".flexslider>div>ul>li.flex-active-slide>a>img").height();
        console.log(height);
    });
}); 
```

但是，如果我在页面加载后在浏览器控制台中运行此代码，则会返回正确的高度。

如何使用 jQuery 或 JavaScript 在页面加载/准备就绪时获取图像高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:29:03.830

感谢您澄清 window.load 事件发生在 document.ready 之后，即使这与实际问题无关。

代码返回“0”的原因是由于默认的 flexslider.css 中的 css 类：

```
.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden;} /* Hide the slides before the JS is loaded. Avoids image jumping */ 
```

[解决方案是使用回调 API](http://www.woothemes.com/flexslider/)等到滑块正确加载：

```
$(window).load(function() {
    $(".flexslider").flexslider({
        start: function() {
            var height = $(".flexslider a>img").first().height();
            console.log(height);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:46:13.017

ready 事件在 HTML 文档被加载之后发生，而 onload 事件在稍后发生，此时所有内容（例如图像）也已加载。

onload 事件是 DOM 中的标准事件，而 ready 事件是 jQuery 特有的。就绪事件的目的是它应该在文档加载后尽早发生，以便为页面中的元素添加功能的代码不必等待所有内容加载。

**请参阅** [window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

```
 $(document).ready(function() {  
       console.log($('.flexslider > ul > li > a > img').height()); 
  }); 
```

见演示[http://jsfiddle.net/ducwidget/cufsn/1/](http://jsfiddle.net/ducwidget/cufsn/1/)

# bash - 如何在bash中用逗号分隔grep结果？

> ID：14810202
> 
> 赞同：2
> 
> 时间：2013-02-11T10:24:38.453
> 
> 标签：bash, grep, design-patterns

我有以下 grep 命令`echo $a | grep -Po '(?<=demo-jms2;)[^;]+'`。如何用逗号分隔此命令的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T10:36:50.180

如何将 grep 输出通过管道传输到`tr '\n' ','`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:35:01.273

```
for i in `echo $a | grep -Po '(?<=demo-jms2;)[^;]+'`
do
    echo -n $i,
done 
```

# elasticsearch - index_queryset 中的 Django-Haystack elasticsearch 错误

> ID：14810210
> 
> 赞同：0
> 
> 时间：2013-02-11T10:24:51.180
> 
> 标签：elasticsearch, django-haystack

尝试在 django-haystack 上为 elasticsearch 构建索引时，出现错误（下面的完整回溯）

```
TypeError: index_queryset() got an unexpected keyword argument 'using' 
```

它在 Python 2.6、Django 1.4、ElasticSearch 0.20.2 上。以前我遇到过类似的[预取错误](https://stackoverflow.com/questions/14004803/django-haystack-elasticsearch-prefetch-error)，这是 pyelasticsearch 和 requests 库之间版本不匹配的情况。我试图将请求降级到 0.13，但没有效果。pyelasticsearch 目前是 0.3

非常感谢任何帮助！

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/var/www/myproj/myproj-env/lib/python2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/var/www/myproj/myproj-env/lib/python2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/var/www/myproj/myproj-env/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/var/www/myproj/myproj-env/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/var/www/myproj/myproj-env/src/django-haystack/haystack/management/commands/update_index.py", line 184, in handle
    return super(Command, self).handle(*items, **options)
  File "/var/www/myproj/myproj-env/lib/python2.6/site-packages/django/core/management/base.py", line 341, in handle
    label_output = self.handle_label(label, **options)
  File "/var/www/myproj/myproj-env/src/django-haystack/haystack/management/commands/update_index.py", line 210, in handle_label
    self.update_backend(label, using)
  File "/var/www/myproj/myproj-env/src/django-haystack/haystack/management/commands/update_index.py", line 239, in update_backend
    end_date=self.end_date)
  File "/var/www/myproj/myproj-env/src/django-haystack/haystack/indexes.py", line 157, in build_queryset
    index_qs = self.index_queryset(using=using)
TypeError: index_queryset() got an unexpected keyword argument 'using' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:09:47.340

问题出在 django-haystack 的版本中。当前版本是 0.3，而几个月前是 1.0，这有点误解。

我解决问题的方法简单明了——安装最新版本（0.3），然后获取旧版本（在本例中为 1.0）并简单地覆盖 haystack 源。

结论：“较旧的 1.0”适用于所有先决条件（pyelasticsearch、simplejson 和请求）的最新版本，而“较新的 0.3”则不能

# c# - 从字符串中删除转义序列“\”以将其转换为 XmlDocument

> ID：14810215
> 
> 赞同：5
> 
> 时间：2013-02-11T10:25:21.830
> 
> 标签：c#, xml, escaping

我有一个返回结构对象的 Web 服务，所以我得到的响应是以下 XML 字符串。现在我需要将它加载到 XmlDocument 对象中，但是如何摆脱字符串中的转义序列。每个 '"' 的 '\' 都会导致错误。

```
<?xml version=\"1.0\" encoding=\"utf-8\"?>
<Quote xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://tempuri.org/\">
<price>19656</price>
</Quote> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-03T03:12:48.220

使用[Regex.Unescape](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.unescape%28v=vs.110%29.aspx)方法。

```
String unescapedString = Regex.Unescape(textString); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-29T21:34:46.963

[Regex.Unescape](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.unescape(v=vs.110).aspx)不会取消转义`"`。根据文档，它执行以下操作：

> ..通过从该方法转义的每个字符中删除转义字符（“”）。其中包括 、*、+、?、|、{、[、(,)、^、$、.、# 和空白字符。此外，Unescape 方法对右括号 (]) 和右大括号 (}) 字符进行转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:29:51.437

那么网络服务正在返回带有实际反斜杠的字符串吗？如果是这样，我会说你正在使用的那个 web 服务有问题，但你应该能够通过这样做来解决它：

```
xmlStr = xmlStr.Replace("\\\"", "\""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-19T05:49:50.297

您可以尝试在逐字字符串中转义

```
xmlStr= xmlStr.Contains("\\") ? xmlStr.Replace("\\", @"\"") : xmlStr; 
```

# c# - 在实体框架中使用 AttachTo 不起作用

> ID：14810221
> 
> 赞同：0
> 
> 时间：2013-02-11T10:25:44.887
> 
> 标签：c#, entity-framework

`AttachTo`我有一个通用的 CRUD 存储库，它使用如下方式将更新的对象附加到 ObjectContext ：

**注意该属性`entitySetName`提供了对象附加到的表的名称**

```
 public virtual void Save(TModel t)
    {
            TModel unboxed = (TModel)t;
            db.AttachTo(entitySetName, unboxed);
            db.SaveChanges();
    } 
```

没有错误出现，只是不保存数据。谁能明白为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:12:17.823

`AttachTo`在 state 中将实体添加到上下文中`Unchanged`。当您`SaveChanges`在此之后立即调用时，没有任何更新，因为 - 从 EF 的角度来看 - 实体是“不变的”。

您需要将状态设置`Modified`为告诉 EF 属性已更改并应写入数据库：

```
public virtual void Save(TModel t)
{
        TModel unboxed = (TModel)t;
        db.AttachTo(entitySetName, unboxed);
        db.ObjectStateManager.ChangeObjectState(unboxed, EntityState.Modified);
        db.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:30:59.807

我相信您想通过单列进行修改。你可以试试`.Attach`.

```
 public virtual void Save(TModel t)
    {
        db.SystemUserLogs.Attach(t);
        //db.Entry(t).State = EntityState.Modified; //<--- For whole fields modifier

        db.Entry(t).Property(x => x.entitySetName).IsModified = true; //<--- For one field modifier
        db.SaveChanges();
    } 
```

# c# - C# 手动填充 double[][]

> ID：14810233
> 
> 赞同：4
> 
> 时间：2013-02-11T10:26:20.287
> 
> 标签：c#, arrays

我只是在尝试源代码。此源代码具有以下行：

```
double[][] inputs = sourceMatrix.Submatrix(null, 0, 1).ToArray(); 
```

最初，这个“输入”是使用矩阵填充的，但是我仍然太缺乏经验而无法使用这个矩阵。我首先想用一些手工编码的值来测试它。

有人可以告诉我如何用一些值填充 double[][] 吗？

我对 C# 还没有真正的经验。我猜 [][] 表示一个三维数组。

在VB6中我会简单地说

```
Redim inputs(2,2) 
```

进而：

```
inputs(0,0) = 64
inputs(0,1) = 92
inputs(0,2) = 33
inputs(1,0) = 4
inputs(1,1) = 84
inputs(1,2) = 449 
```

ETC...

但我想这在 C# 中并不容易。如果有人可以提供帮助，我会非常高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T10:30:03.760

a`double[][]`是一个*锯齿状数组*- 它是一个数组数组。要填充它，您将用一组数组填充外部数组`double[]`。但是，我希望您想要一个*矩形*数组：`double[,]`例如`new double[3,2]`. 初始化此类数组有一个简写：

```
double[,] data = new double[2, 3] { { 64, 92, 33 }, { 4, 84, 449 } };
double val = data[1, 2]; // 449.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:29:44.920

你有一个数组数组。所以你应该像这样初始化它们：

```
double[][] inputs = new double[][]
    {
        new double[] { 1, 2, 3 },
        new double[] { 4, 5, 6 },
        new double[] { 7, 8, 9 }
    }; 
```

如果您有一个二维数组 ( `inputs[,]`)，那么它将是：

```
double[,] inputs = new double[,]
    {
        { 1, 2, 3 },
        { 4, 5, 6 },
        { 7, 8, 9 }
    }; 
```

但正如 Jon Skeet 所说，阅读数组是你应该做的第一件事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:29:54.750

为了保持简单：

```
double[][] inputs = new double[3][];
inputs[0] = new double[3];
inputs[1] = new double[3];
inputs[2] = new double[3];

inputs[0][0] = 1;
inputs[0][1] = 2;
inputs[0][2] = 3;
inputs[1][0] = 4;
inputs[1][1] = 5;
inputs[1][2] = 6;
inputs[2][0] = 7;
inputs[2][1] = 8;
inputs[2][2] = 9; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T10:31:09.553

看看使用`double[,]`这就是你需要的[数组](http://www.functionx.com/csharp3/Lesson23.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T10:36:12.773

double[][] 是一个锯齿状数组。您可能是指 double[,] ，它是二维数组。

初始化一个二维数组：

```
double[,] matrix = new double[3,2] = {{1,2} {3,4}, {4,5}} 
```

您已经从其他答案中获得了初始化锯齿状数组的示例。

实际上，锯齿状数组和真正的多维数组之间的区别在于锯齿状数组是数组的数组，因此它们可能不是矩形的，即矩阵，因此是锯齿状的：

```
double[][] jagged = new double[2]
                   {
                       new double[4],
                       new double[2]
                    }; 
```

它们在内存中的布局方式也不同。多维数组是对连续内存空间的单一引用。锯齿状数组是真正的数组数组。

[在此处](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)阅读有关它的更多信息

# iphone - NSMutableURLRequest 对另一个 NSMutableURLRequest 成功的继承

> ID：14810234
> 
> 赞同：0
> 
> 时间：2013-02-11T10:26:22.783
> 
> 标签：iphone, ios, ipad, nsurlconnection, nsurlrequest

基本上，我想实现 SYNC 功能；如果互联网连接不可用，数据将存储在本地 sqlite 数据库中。只要互联网连接可用，SYNC 就会开始行动。

现在，比如说；5条记录存储在本地，然后可以连接互联网。我希望更新服务器。所以，我目前做的是：

1.  将第一条记录发布到服务器。
2.  等待第一个请求成功。
3.  将本地 NSNotification 发布到例程，第一条记录已在服务器上更新，现在第二个请求可以发送。
4.  该例程在服务器上触发第二个发布请求，依此类推......

问题：这种方法是否正确有效，足以实现 SYNC 功能？或者我应该改变什么？

**注意：要同步的记录将没有数量限制。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:56:49.627

好吧，这取决于您保存的数据的要求。如果只是为了备份，那么你应该没问题。如果 5 条记录以某种方式相互依赖，并且您需要从另一个设备/应用程序访问此数据，则您应该在服务器端注意要么全部写入 5 条记录，要么不写入。否则，如果只写入 3 个，您将有不一致的状态。如果其他用户也在服务器上同时读取/写入这些数据，那么您需要在写入之前对所有记录实施某种锁定，并决定当有人试图覆盖其他人的更改时如何处理冲突。

# ruby - 在 Ruby Gem 中存储版本号

> ID：14810235
> 
> 赞同：2
> 
> 时间：2013-02-11T10:26:29.070
> 
> 标签：ruby, version

我应该如何将代码的版本号存储在 ruby​​ gem 中？

我在野外看到了两种技术：

1.  `<gem root>/VERSION`仅包含您的[semver](http://semver.org)。
2.  `<gem root>/lib/your_gem/version.rb`其中包含以下代码：

```
module IfYourCodeIsInAModule
  class YourGem
    VERSION="0.0.1"
  end
end 
```

我喜欢 1\. 因为它真的很明显。我喜欢 2\. 因为它是我的代码的一部分，我可以轻松地用我的版本号写入日志。

我不喜欢 1\. 因为如果我想从我的代码中访问版本号，我必须读取文件（这不是最糟糕的事情），我不喜欢 2\. 因为如果我的核心类从另一个扩展上课那么我也必须有那种礼貌`version.rb`（或者得到一个`superclass mismatch`） - 例如。

```
module IfYourCodeIsInAModule
  class YourGem < OtherWork
    VERSION = "0.0.1"
  end
end 
```

当您从实际代码中需要此文件以进行运行时，一切都很好。当您将它包含在您的 gemspec 中时，您突然需要 `require 'other_work'`获取您的版本号！

我很高兴推出自己的解决方案，但这不可能是一个新问题，社区在做什么，对此有何普遍看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:19:39.040

我不是 gem VERSION 民族学方面的专家，但也许这种非专业知识使我更加平均，更适合回答有关“普遍智慧”的问题。

所以，一般的智慧是，[使用 Bundler](http://gembundler.com)。一旦您通过 . 创建 gem `bundle gem my_gem_name`，您将看到捆绑程序自动创建`lib/my_gem_name/version.rb`文件并从`lib/my_gem_name.rb`. 所以我建议如果你决定不使用 bundler 并自己滚动你自己的 gem，你仍然应该保留一个单独的`version.rb`文件，只包含

```
module MyGemName
  VERSION = "0.0.1"
end 
```

也就是说，直接在主模块下方。然后加载`version.rb`from `lib/my_gem_name.rb`。当然，如果你的代码以更陌生的方式组织，那么你需要更多的即兴发挥。

# model-view-controller - 在 ViewHelper 中访问 RouteMatch-Object

> ID：14810238
> 
> 赞同：2
> 
> 时间：2013-02-11T10:26:38.023
> 
> 标签：model-view-controller, zend-framework2, view-helpers

在我的项目中，我创建了一个 ViewHelper，以在每个页面上显示一个表单。如果用户提交表单，则发布信息总是发布到同一个控制器。控制器处理完帖子后，用户应该重定向到他提交表单的页面。

要动态重定向，我想通过隐藏元素提交控制器和操作。但我不知道如何在 ViewHelper 中设置它们。我试过了`InjectApplicationEventInterface`，但是我的成员变量是空的，所以我猜它只适用于控制器而不是助手。

那么如何访问 RouteMatch 对象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:50:53.653

这[`Zend\View\HelperPluginManager`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/View/HelperPluginManager.php)是保存视图助手的服务定位器，它不包含应用程序事件初始化器的实例，但它具有对主服务定位器的引用，因为它是一个插件管理器。考虑在您的助手中实现以下内容：

```
public function __construct(\Zend\Mvc\MvcEvent $mvcEvent)
{
    // injecting the mvc event, since $mvcEvent->getRouteMatch() may be null
    $this->mvcEvent = $mvcEvent;
} 
```

然后，在您的模块`getViewHelperConfig`（的实现[`ViewHelperProviderInterface`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/ModuleManager/Feature/ViewHelperProviderInterface.php)）中，您定义以下内容：

```
public function getViewHelperConfig()
{
    return array(
        'factories' => array(
            'myHelper' => function (\Zend\ServiceManager\AbstractPluginManager $pm) {
                 $application = $pm->getServiceLocator()->get('Application');

                 return new MyViewHelper($application->getMvcEvent());
            },
        ),
    );
} 
```

# php - file_get_contents() 停止工作

> ID：14810245
> 
> 赞同：0
> 
> 时间：2013-02-11T10:27:08.097
> 
> 标签：php, undefined, file-get-contents, offset

我在一个免费的 Web 托管站点上有我的 PHP 文件，下面的代码突然停止工作并出现错误：

```
$data = file_get_contents("http://eqafe.com/inventories/$name/inventory_by_slug.json") or die(print_r(error_get_last())); 
```

错误输出：

```
Array ( [type] => 8 [message] => Undefined offset: 6 [file] => /usr/lib/php/head.php [line] => 90 ) 1 
```

我怎样才能解决这个问题？

# c++ - 什么是*¶meter

> ID：14810250
> 
> 赞同：-4
> 
> 时间：2013-02-11T10:27:33.317
> 
> 标签：c++, pointers

我对 C++ 了解不多，目前需要处理一个函数。这在函数原型中意味着什么？

```
void myFunc(int &size, signed char *&array); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:28:29.250

这是对指针的引用。因此，您不会将指针的副本传递给函数，而是传递对它的**引用**，这意味着函数中对该值的任何更改实际上都会影响您作为参数传递的原始指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:28:41.790

这意味着`array`是对 a 的引用[，](http://en.wikipedia.org/wiki/Reference_%28C%2B%2B%29)`signed char *`即对指针的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:31:53.393

`*&`是对指针的引用

你假设这样调用`myFunc`：

```
int size;
signed char *p;

myFunc(size, p); 
```

通常传递对指向函数的指针的引用，因此可以更改函数内部的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T10:28:48.550

这样想：

```
(int) &size;
(char*) &array; 
```

# java - Android - Java - 获取 JSONObject 中的第 n 个元素

> ID：14810256
> 
> 赞同：1
> 
> 时间：2013-02-11T10:27:49.147
> 
> 标签：java, android, json, object

我的 JSON 文件包含几个属性。其中之一是对象列表。我需要通过数字键访问此列表，即第一个、第二个等元素。

当`nth element`我想通过字母键访问它的属性时。

例子：

```
MyObj.get("itemlist").get(0).get("attribute") 
```

如果我这样做，我将被迫将整个事物转换为一个`JSONArray`（afaik）我无法通过键访问我的属性而只能通过位置访问我的属性。

这是我的 JSON 字符串：

```
{
"id": 1,
"items": [
    {
        "id": 1,
        "type": "video",
        "name": "test.mp4"
    },
    {
        "id": 2,
        "type": "image",
        "name": "pic.jpg"
    }
],
"name": "test"
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:44:04.020

好的，不太明白为什么，但是当我执行以下操作时，它可以工作：

```
JSONArray MyList = new JSONObject(filePath).getJSONArray("items");
System.out.println((((JSONObject) MyList.get(1)).get("type"))); 
```

所以我只是省略了 MyObj 并直接针对列表。

# .net - 关于如何避免客户端应用程序中的 GC 延迟的建议

> ID：14810257
> 
> 赞同：2
> 
> 时间：2013-02-11T10:28:00.443
> 
> 标签：.net, garbage-collection

让我们想象一下这个简单的测试程序：

```
static void Main(string[] args)
{
    var length = 30000000;
    var c = new List<object>();
    for (int i = 0; i < length; i++)
    {
        c.Add(new object());
    }
    var start = DateTime.Now;
    GC.Collect();
    GC.WaitForFullGCComplete();
    Console.WriteLine("GC took " + (DateTime.Now - start).TotalMilliseconds + " ms");
    Console.ReadKey();
} 
```

在我的计算机（Framework 4.0，x64）上，输出约为 1.4 秒，而样本消耗了 ~1GB 的 RAM。

问题：有什么方法可以加速垃圾收集？有什么最佳做法吗？客户端应用程序中约 1GB 的内存消耗很多，但仍然相当合理。但是在我的情况下，延迟超过 1 秒是不可接受的。

只是可能不会得到支持但可以帮助我的想法：

*   我可以告诉 GC 忽略某些对象吗？
*   我可以将堆分成多个部分，以便让 GC 在部分堆上运行。（我宁愿十倍 100 毫秒的延迟。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:41:53.917

在某些情况下，当处理在相当长的时间内无法收集的大量数据*时*，GC 可能会很烦人 - 会有很多引用，甚至更糟糕的是：GC 实际上不太可能收集很多，所以浪费时间！这里的一种选择是*考虑*使用*值类型*的数组等。这里的意义在于，一个包含 200 万个值类型的数组只是一个引用；200 万个*值*对收藏没有任何影响。但是，子引用仍然会产生影响，例如`string`每行的 s。但它[*可以提供帮助*](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fmarcgravell.blogspot.com%2F2011%2F10%2Fassault-by-gc.html&ei=H8oYUbieGsaM0AXGg4HABw&usg=AFQjCNFSyABVYom6-Ckf9MnpKLDEbV0Ifw&bvm=bv.42080656,d.d2k)。

既然我提到`string`了 s，另一件要考虑的事情是你是否有多个相同底层字符组合的实例；例如，通过从数据库或文件加载数据。您可能会考虑在那里应用一些手动字符串实习（**不**使用`string.Intern`- 而是使用每个加载字典或类似的）。这将再次减少`string`正在收集的 s 的数量。

作为最后的想法；如果您的数据需要集合，这可能会很棘手 - 例如，列表通常涉及额外的 2 个对象：列表和底层数组。将其乘以几百万，事情就会开始变得棘手。在*我们的*例子中，我们通过使用固定缓冲区来解决这个问题，但这是一个有点高级的话题，并且仅适用于您对列表中的项目数量有一个可预测的小“上限”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:34:16.270

您的测试完全是人为的 - 实际上您不会在应用程序中明确等待 GC 完成。

但是，如果您有某些对时间要求严格的代码部分，那么您可以[暂时禁用 GC](https://stackoverflow.com/questions/6005865/prevent-net-garbage-collection-for-short-period-of-time)。

# php - lang_print 函数属于什么 Smarty 插件，它的作用是什么？

> ID：14810258
> 
> 赞同：2
> 
> 时间：2013-02-11T10:28:03.237
> 
> 标签：php, smarty

大家好，我正在和 Smarty 一起玩。由于我是 Smarty 的新手，我对某些功能没有很好的了解，所以我的问题可能很愚蠢。

我想知道下面的标签/函数是做什么的，它不在 Smarty 文档中，我可能是 Smarty 插件的一个函数：

```
{lang_print id=756}
{lang_print id=720}
{lang_print id=123}
{lang_print id=2343}
{lang_print id=34123}
{lang_print id=3342}
{lang_print id=2233} 
```

这是做什么的？请向我解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T15:19:56.423

不确定回答这么老的问题是否是一种好方法，但这可能对有类似问题的人有所帮助：

lang_print 不是原生 smarty 函数。因此它是一个自定义的 smarty 插件。您需要找到自定义插件的 php 代码以确定它的作用。

插件存储在 $smarty->plugins_dir 中定义的文件夹中。默认情况下，这是 smarty 文件夹下的“插件”文件夹。[http://www.smarty.net/docs/en/variable.plugins.dir.tpl](http://www.smarty.net/docs/en/variable.plugins.dir.tpl)

根据特定的命名约定，插件是独立的文件，其名称基于插件名称。在这种情况下，文件名将是 functions.lang_print.php [http://www.smarty.net/docs/en/plugins.naming.conventions.tpl](http://www.smarty.net/docs/en/plugins.naming.conventions.tpl)

您可以通过阅读代码并使用常规 php 调试技术来查看插件 php 代码以确定它的作用。[http://markonphp.com/6-debugging-tips-php-coders-should-know/](http://markonphp.com/6-debugging-tips-php-coders-should-know/) 使用 error_log 调试日志是最常见的方法之一，因为在大多数环境中让 php 调试器工作很复杂。

# javascript - 检测事件捕获支持javascript

> ID：14810259
> 
> 赞同：1
> 
> 时间：2013-02-11T10:28:06.593
> 
> 标签：javascript, modernizr

有没有办法检测浏览器是否支持事件捕获以及事件冒泡？我检查了[http://modernizr.com/](http://modernizr.com/)但在文档中看不到任何信息。

我认为 IE < 9 不支持事件捕获但在其他浏览器中应该可以吗？

为了清楚起见，我想检测浏览器是否支持事件 DOM 模型的事件捕获阶段以及事件冒泡阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:53:46.607

可能有更好的方法，但这是我想出的第一件事。您需要创建一个元素，在捕获阶段将一个事件处理程序绑定到它，在其上触发一个事件，并检查`eventPhase`事件处理程序中的属性：

```
var button = document.getElementById("example");

document.addEventListener("click", function (e) {
    console.log(e.eventPhase); // 1 === capture, 2 === target, 3 === bubble
}, true);

evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
button.dispatchEvent(evt); 
```

您可能想要添加各种其他检查（例如`dispatchEvent`支持），并且您需要`button`在代码中实际创建元素（并将其插入到 DOM 中，隐藏）。

这是一个包含上述代码的[小提琴，可以帮助您入门。](http://jsfiddle.net/jamesallardice/VRbfw/2/)

# php - PHP - 从此字符串中删除“\r\n\r\n”时出现问题：“我想：\r\n\r\n1.) 摆脱这个烂摊子\r\n\r\n\2.) 现在请”

> ID：14810267
> 
> 赞同：1
> 
> 时间：2013-02-11T10:28:34.533
> 
> 标签：php, preg-replace, str-replace

我从这样的字符串开始：“我想：\r\n\r\n1。）摆脱这个烂摊子\r\n\r\n\2。）现在请”（这是“清理”用户输入文本）。

所以基本上我的陈述是这样的：

```
$query = sanitize($_POST['query']); // gives the result string 
```

我想从这个字符串中删除“\r\n\r\n”。到目前为止，我已尝试使用以下方法来做到这一点：

```
$query = preg_replace("/\r\n\r\n/", " ", $query); 
```

或者

```
$query = str_replace("\r\n\r\n", " ", $query); 
```

似乎没有一个工作？

但是，如果我执行以下操作：

```
$query = "I would like to:\r\n\r\n1.) Rid this mess\r\n\r\n\2.) Now Please";
$query = preg_replace("/\r\n\r\n/", " ", $query); // I tried str_replace() too
var_dump($query);
exit; 
```

我得到了我想要的输出......

有人可以向我解释为什么会发生这种情况以及我该如何解决这个问题？

任何建议、意见或建议将不胜感激，因为我几乎不会因为拔头发而秃顶......

谢谢！

编辑 ：

这可能有助于功能 sanitize() ：

```
function html($text)
{
    return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
}

function htmlout($text)
{
    return html($text);
}

function cleanInput($input)
{
    $search = array(
        '@<script[^>]*?>.*?</script>@si',   // Strip out javascript
        '@<[\/\!]*?[^<>]*?>@si',            // Strip out HTML tags
        '@<style[^>]*?>.*?</style>@siU',    // Strip style tags properly
        '@<![\s\S]*?--[ \t\n\r]*>@'         // Strip multi-line comments
    );
    $output = preg_replace($search, '', $input);
    $output  = htmlout($output);
    return $output;
}

function sanitize($input)
{
    if (is_array($input))
    {
        foreach($input as $var=>$val)
        {
            $output[$var] = sanitize($val);
        }
    }
    else
    {
        include "C:/wamp/www/includes/inc/main/db.inc.php";
        if (get_magic_quotes_gpc())
        {
            $input = stripslashes($input);
        }
        $input  = cleanInput($input);
        $output = mysqli_real_escape_string($link, $input);
    }
    return $output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:46:57.377

# 唯一合适的解决方案

1.  摆脱`sanitize()`功能
2.  使用准备好的语句将数据放入数据库。
3.  使用`htmlout()`函数来显示用户的文本。

你可以[在这里](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function)和[这里阅读更多](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:37:37.303

你有魔术报价吗？

[http://php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc](http://php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

它可能正在逃避你的斜线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:41:15.873

如果`\r\n`您的数据库中有文字字符，则需要将斜杠加四倍。

所以理论上你应该使用它来解决问题：

```
$query = preg_replace("/\\\\r\\\\n\\\\r\\\\n", " ", $query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-09T08:22:05.193

这对我有用

```
$string = preg_replace("/\\\\r\\\\n\\\\r\\\\n/", "", $string); 
```

# msmq - 看不到我的队列是否为事务

> ID：14810274
> 
> 赞同：0
> 
> 时间：2013-02-11T10:28:45.497
> 
> 标签：msmq

我正在尝试向远程队列发送消息。

```
 // Send a message to the queue.
        if (myQueue.Transactional)
        {
            var myTransaction = new MessageQueueTransaction();
            myTransaction.Begin();
            Message objMessage = new Message();

            objMessage.UseDeadLetterQueue = true;
            objMessage.Body = message;

            myQueue.Send(objMessage, myTransaction);

            myTransaction.Commit();
        }
        else
        {
            Message objMessage = new Message();

            objMessage.UseDeadLetterQueue = true;
            objMessage.Body = message;
            myQueue.Send(message);
        } 
```

但我有一个例外

```
The specified format name does not support the requested operation. For example, a direct queue format name cannot be deleted. 
```

我假设我的队列名称不正确或者我有权限错误，所以我启用了死信队列，但它是空的。我的队列名称是“FormatName:Direct=TCP:xx.xxx.xx.xx\private$\Test”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:15:36.460

您不能查询有关远程专用队列的信息。本地队列，是的。远程公共队列，是的，但不使用 Formatname。

# spring - 如何使用弹簧创建自定义用户会话对象

> ID：14810276
> 
> 赞同：0
> 
> 时间：2013-02-11T10:28:47.700
> 
> 标签：spring, session

我构建了一个简单的 webapp，它是我学习 spring 技术的一部分。

我正在考虑创建某种自定义用户会话，其中包含对许多用户属性的引用，例如语言、货币可能是。

我怎样才能在春天做到这一点？还是已经存在一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:51:22.700

您可以编写自定义`authentication provider`并传递自定义`UserDetailsService`

```
<authentication-manager>
    <authentication-provider user-service-ref="customUserService" />
</authentication-manager>

<beans:bean id="customUserService" class="custom.UserServiceImpl">
</beans:bean>

public class UserServiceImpl implements UserDetailsService {

    @Override
    public UserDetails loadUserByUsername(String username)
            throws UsernameNotFoundException {
        //Your logic
        return new AuthenticatedUser("", "", true, true, true, new HashSet<GrantedAuthority>());
    }
}

public class AuthenticatedUser extends
        org.springframework.security.core.userdetails.User {
    private static final long serialVersionUID = 1L;

    // Your additional properties

    public AuthenticatedUser(String username, String password,
            boolean enabled, boolean accountNonExpired,
            boolean credentialsNonExpired,
            Collection<? extends GrantedAuthority> authorities)
            throws IllegalArgumentException {
        super(username, password, enabled, accountNonExpired,
                credentialsNonExpired, true, authorities);
    }
} 
```

# java - 在没有 RequestDispatcher 的情况下将值从 servlet 传递到 JSP 文件

> ID：14810280
> 
> 赞同：4
> 
> 时间：2013-02-11T10:28:53.867
> 
> 标签：java, jsp, servlets

是否可以将变量的值从 Servlet 传递到 JSP。假设我有一个类似于welcome.jsp 的JSP，并且我在welcome.java servlet 中初始化了一些变量。

当我运行welcome.jsp 时，它应该从welcome.java 中获取值并将其显示在页面上。

当我设置 RequestDispatcher 并转发它时，它仍然会显示 servlet URL。但我希望 URL 是 JSP 文件。但是我在 JSP 文件中显示的变量应该取自 servlet。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:31:23.760

您可以使用会话属性对其进行归档。

**.java**

```
request.getSession().setAttribute("attrName", "value"); 
```

请求是实例`javax.servlet.http.HttpServletRequest`

**.jsp**

```
${attrName} 
```

* * *

要了解有关会话属性的更多信息，请阅读[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)。您可以设置任何类型的属性。

```
request.getSession().setAttribute("attrName", new ArrayList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:32:34.557

您可以将变量放入 Session 并将用户重定向到 welcome.jsp 页面。

# php - 纯 PHP 实现中的 Shell 命令

> ID：14810283
> 
> 赞同：0
> 
> 时间：2013-02-11T10:29:03.733
> 
> 标签：php, shell-exec

是否有任何类型的 PHP 纯 shell 命令实现？我的意思是某种执行“shell”命令的接口，而不是使用 exec/shell_exec/system 来执行它们的本机 php 实现。

例如：“ls -l”根据opendir/scandir/readdir/closedir函数执行php实现。“mkdir example”执行类似：mkdir('example') 等。

问候

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T10:33:25.697

你可以看看[PHP 的文件函数](http://www.php.net/manual/en/function.mkdir.php)。

您可以列出文件、创建目录、删除它们……但当然，您不会找到所有可以找到的 shell。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T10:42:47.420

要么使用

```
shell_exec("your command here"); 
```

或者

```
echo exec("your command here"); 
```

也看看这些网站：

> [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)
> 
> [如何通过 PHP 执行 SSH 命令](https://stackoverflow.com/questions/6270419/how-to-execute-ssh-commands-via-php)
> 
> [php shell_exec() 与 exec()](https://stackoverflow.com/questions/7093860/php-shell-exec-vs-exec)

# java - android图片的尺寸比例

> ID：14810285
> 
> 赞同：0
> 
> 时间：2013-02-11T10:29:14.110
> 
> 标签：java, android, decimal

我想获得图片的高度和宽度的比例，并相应地对其进行缩放。虽然我正在计算 yratio 使用

```
float yratio = y_pic / y_original; 
```

对于 y_pic 为 800，y_original 为 590，我检查了 yratio 的结果，为什么 yratio 会给我 1.0 作为答案？

我怎么能得到 1.35 的答案？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:31:17.777

因为输出类型与输入类型相同，都是`integer`. 使用演员表使其工作。

```
float yratio = y_pic / (float) y_original; 
```

# hibernate - Hibernate：继承和关系映射+泛型

> ID：14810287
> 
> 赞同：4
> 
> 时间：2013-02-11T10:29:37.287
> 
> 标签：hibernate, generics, inheritance

我正在将 spring-data JPA 与休眠一起使用。我很难让我的继承和关系映射正常工作。

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Table(name="compound")
@DiscriminatorColumn(name="compound_type")
@DiscriminatorOptions(force=true)
public abstract class Compound<T extends Containable> {

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.compound",
        cascade = CascadeType.ALL, orphanRemoval = true)
    @LazyCollection(LazyCollectionOption.FALSE)     
    private List<CompoundComposition> compositions = new ArrayList<>(); 

    @OneToMany(fetch = FetchType.EAGER, mappedBy="compound",
        targetEntity=Containable.class, cascade = CascadeType.ALL) 
    @LazyCollection(LazyCollectionOption.FALSE)     
    private Set<T> containables = new HashSet<T>();

}

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Table(name="containable")
@DiscriminatorColumn(name="containable_type")
@DiscriminatorOptions(force=true)
public abstract class Containable<T extends Compound> {     

    @ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private T compound;
} 
```

这个想法是 AbstractCompound 的某个实现只能与 Containable 的一个特定实现相关联（反之亦然）。这导致以下实现：

```
@Entity 
@DiscriminatorValue("TestCompound") 
public class TestCompound extends AbstractCompound<TestContainable> {
}

@Entity 
@DiscriminatorValue("RegistrationCompound")
public class RegistrationCompound extends AbstractCompound<Batch> {

    @Column(name = "reg_number", unique = true)
    private String regNumber;
}

@Entity 
@DiscriminatorValue("TestContainable")  
public class TestContainable extends Containable<TestCompound> {
}

@Entity 
@DiscriminatorValue("Batch")    
public class Batch extends Containable<RegistrationCompound>{

    @Column(name = "batch_number")
    private Integer batchNumber;
} 
```

我玩过所有的继承策略，对于复合层次结构，单表是唯一至少部分有效的策略。在 JOINED 或表 _per_class 休眠的情况下创建不一致和错误！！！外键，即从 test_containable 到 registration_compound（但不是从 Batch 到 test_compound，这里它仅正确映射到 registration_compound）。

在 Containable 方面，我使用什么策略似乎并不重要。

现在到我的测试中的实际问题。具体的测试类。有3个测试。所有人都在对“TestCompound”实例进行特定搜索。问题是这 3 个测试用例中的第一个执行总是通过，其他 2 个总是失败。运行的顺序似乎是随机的（JUnit + @RunWith(SpringJUnit4ClassRunner.class)）。这意味着任何测试都通过，如果它是第一个运行的。

失败的测试抛出以下异常：

```
org.hibernate.WrongClassException: Object with id: 1000 was not of the specified
    subclass: RegistrationCompound (loaded object was of wrong class class TestCompound) 
```

在第一次测试的情况下，在正确选择用于获取 Containables 后出现休眠问题

```
Hibernate: select containabl0_.compound_id as compound8_1_1_, containabl0_.id as id0_1_, 
containabl0_.id as id0_0_, containabl0_.created as created0_0_, 
containabl0_.created_by as created4_0_0_, containabl0_.last_modified as last5_0_0_, 
containabl0_.last_modified_by as last6_0_0_, containabl0_.compound_id as compound8_0_0_, 
containabl0_.batch_number as batch7_0_0_, containabl0_.containable_type as containa1_0_0_ 
from containable containabl0_ where  containabl0_.containable_type in ('Batch', 'TestContainable') 
and containabl0_.compound_id=? 
```

并且`List<CompoundComposition> compositions`在另一个选择语句中被选中。所以它们总共是 3 条语句：获取化合物、获取可包含物、获取组合物。

对于第二个和第三个测试，用于获取可包含项的 SQL 与用于获取组合的 on 合并，并且它的构建方式是尝试选择 RegistrationCompound 而不是 TestCompound，例如它包含

```
registrati1_.reg_number as reg10_1_0_, 
```

并且 reg_number 只是 RegistrationCompound 的属性。在这两种情况下，第一个正确选择实际化合物的 select 语句在 where 子句中包含以下内容：

```
testcompou0_.compound_type='TestCompound' 
```

所以这非常令人困惑。为什么它取决于运行测试的顺序？为什么它会尝试选择 RegistrationCompound？

这是 3 个测试中最简单的测试：

```
@Test
@Transactional
public void testFindByCompositionPkStructureId() {
    System.out.println("findByCompositionPkStructureId");

    Long structureId = 1000L;

    TestCompound compound = new TestCompound();
    compound.setId(1000L);
    compound.setCas("9999-99-9");
    compound.setCompoundName("Test Compound");

    List<TestCompound> result = 
        testCompoundRepository.findByCompositionsPkStructureId(structureId);
    assertEquals(compound, result.get(0));
} 
```

如果此测试作为第二个或第三个运行，我会得到错误的类异常！！！有谁知道这里到底发生了什么？解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T09:01:39.773

问题是映射之一：

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Table(name="containable")
@DiscriminatorColumn(name="containable_type")
@DiscriminatorOptions(force=true)
public abstract class Containable<T extends Compound> {     

    @ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private T compound;
} 
```

此映射缺少目标实体。正确的是

```
@ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL, targetEntity = Compound.class) 
```

由于某种原因，hibernate 只是假设目标是`RegistrationCompound`而不是抛出异常。很烦人，否则很容易找到问题。但就像这样，它几乎让我发疯了。

# android - 处理程序收到消息时更改 MenuItem 标题和图标

> ID：14810288
> 
> 赞同：0
> 
> 时间：2013-02-11T10:29:39.183
> 
> 标签：android, actionbarsherlock, handler, menuitem

我想在连接状态发生变化时更改标题和图标......这`updateMenuTitle()` [是从这里开始](https://stackoverflow.com/questions/7066657/android-how-to-dynamically-change-menu-item-text-outside-of-onoptionsitemssele)的并且可以工作，因为我已经对其进行了测试，但是当我调用`updateMenuTitle()`from 处理程序时应用程序在启动时崩溃时不起作用

```
 private void updateMenuTitle(int x) {
    MenuItem btstatus = menu.findItem(R.id.btstatus);
    if (x == 1) {
        btstatus.setTitle("Connected");
        btstatus.setIcon(R.drawable.ic_btstatus_on);
    } else if (x == 2){
        btstatus.setTitle("Connecting");
        btstatus.setIcon(R.drawable.ic_btstatus_idle);
    }else if (x == 0){
        btstatus.setTitle("Disconnected");
        btstatus.setIcon(R.drawable.ic_btstatus_off);
    }
}

private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_STATE_CHANGE:
            switch (msg.arg1) {
            case BluetoothRfcommClient.STATE_CONNECTED:
                mTxtStatus.setText(R.string.title_connected_to);
                mTxtStatus.append(" " + mConnectedDeviceName);
                updateMenuTitle(1);//not working if I call it from here... app force close
                break;
            case BluetoothRfcommClient.STATE_CONNECTING:
                mTxtStatus.setText(R.string.title_connecting);
                updateMenuTitle(2);//not working if I call it from here... app force close
                break;
            case BluetoothRfcommClient.STATE_NONE:
                mTxtStatus.setText(R.string.title_not_connected);
                updateMenuTitle(0);//not working if I call it from here... app force close
                break;
            }
            break;
            ....... 
```

解决方案：

```
 @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        if (mChangedStat && mChangedStat2) {
            menu.findItem(R.id.btstatus).setTitle(R.string.title_connected);
            menu.findItem(R.id.btstatus).setIcon(R.drawable.ic_btstatus_on);
        } else if (!mChangedStat && mChangedStat2) {
            menu.findItem(R.id.btstatus).setTitle(R.string.title_connecting);
            menu.findItem(R.id.btstatus).setIcon(R.drawable.ic_btstatus_idle);
        } else if (!mChangedStat && !mChangedStat2) {
            menu.findItem(R.id.btstatus).setTitle(R.string.title_not_connected);
            menu.findItem(R.id.btstatus).setIcon(R.drawable.ic_btstatus_off);
        }
}

    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_STATE_CHANGE:
                                switch (msg.arg1) {
            case BluetoothServiceClient.STATE_CONNECTED:
                mChangedStat = true;
                mChangedStat2 = true;
                supportInvalidateOptionsMenu();
                break;
            case BluetoothServiceClient.STATE_CONNECTING:
                mChangedStat = false;
                mChangedStat2 = true;
                supportInvalidateOptionsMenu();
                break;
            case BluetoothServiceClient.STATE_NONE:
                mChangedStat = false;
                mChangedStat2 = false;
                supportInvalidateOptionsMenu();
                break;
            }
                break;
                ....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:44:25.403

您可以为此实现 onPrepareOptionMenu() ，因为这更有效并且用户打开选项菜单，您可以显示带有标题和图标的所需菜单。

检查这个例子

[http://thedevelopersinfo.wordpress.com/2009/10/20/dynamically-change-options-menu-items-in-android/](http://thedevelopersinfo.wordpress.com/2009/10/20/dynamically-change-options-menu-items-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:07:48.423

我做的有点不同：

```
private boolean flag = false;

void someMethod() {

   flag = true;
   invalidateOptionsMenu();

}

public boolean onCreateOptionsMenu (Menu menu) {

    if (flag) {
      // inflate menu 1
    } else {
      // inflate menu 2
    } 
```

}

这样你就不需要处理消息什么的了。您只需要管理 onCreateOptionsMenu 上的菜单项。

# php - 如何从 mysql 数据库中获取数据并使用 codeigniter 将其显示以查看。

> ID：14810291
> 
> 赞同：0
> 
> 时间：2013-02-11T10:29:46.613
> 
> 标签：php, mysql, codeigniter, phpmyadmin

嘿伙计们，我在数据库中有一个表，我想从中检索数据并显示以查看。. 我尝试了很多方法，但这些方法都不起作用。. 请帮忙。. 这是我的控制器代码：

```
function getname()
{
    $this->load->model('user'); //load the user class
    $data['member'] = $this->user->ar_getwhere();
    $this->load->view('home_content_view', $data);
} 
```

这是我的模型：

```
function ar_getwhere()
{
    $this->db->select('');
    $this->db->from('tbl_members');
    $this->db->where('member_name',$this->input->post('member_name'));
    $q = $this->db->get('');
    if($q->num_rows() > 0) 
    {
        $data = array();
        foreach($q->result() as $row) 
        {
            $data=$row;
        }
        return $data;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:36:17.747

我不知道您遇到了什么错误，但无论如何

您正在接收模型中的帖子数据吗？您应该在控制器中接收发布数据并将其发送到模型，然后捕获它的响应......您也应该发送整个响应。

```
function getname()
{
    $this->load->model('user'); //load the user class
    $data['member'] = $this->user->ar_getwhere($this->input->post('member_name'));
    $this->load->view('home_content_view', $data);
}

function ar_getwhere($memberName)
{
    $this->db->select('*');
    $this->db->from('tbl_members');
    $this->db->where('member_name',$memberName);
    $q = $this->db->get();
    if($q->num_rows() > 0) 
    {
        return $q->result();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:36:57.877

```
$q = $this->db->select('*')->from('tbl_members')
->where('member_name', $this->input->post('member_name'))
->get(); 
```

# php - Safari 中 SWF 上传程序的会话问题

> ID：14810299
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:04.337
> 
> 标签：php, zend-framework, swfupload

我正在使用带有 Jquery 和 PHP（Zend 框架）的 SWFuploader 进行上传

[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)

我在使用会话时遇到问题。
有**3 步**登录向导，第 1 步是简单的形式，uplaoder 在**第 2 步**。应用程序的流程是，它在提交后将**第一步数据存储在会话**中并重定向到第二步。当我尝试上传一些文件并尝试使用存储在会话中的数据时，它什么也没给我。

我正在使用这个代码：
JS代码

```
var settings = {
        flash_url : "/javascript/flash/swfupload.swf",
        upload_url: "/login/uploaditems", 
        post_params: {
                      'session' : <?php echo session_id;?>
                 },
        file_size_limit : "1 MB",
    file_types : "*.pdf;",
    file_types_description : "All Files",
    file_upload_limit : 100,
    file_queue_limit : 10,
    custom_settings : {
        cancelButtonId : "cancelBtn"
    },
    debug: false,
    button_image_url: "/images/chooseButton-2.png",

    // The event handler functions are defined in handlers.js
    file_queued_handler : fileQueued,
    file_queue_error_handler :fileQueueError,
    file_dialog_complete_handler : fileDialogComplete,
    upload_start_handler : uploadStart,
    upload_progress_handler : uploadProgress,
    upload_error_handler : uploadError,
    upload_success_handler : uploadSuccess,
    upload_complete_handler : uploadComplete,
    queue_complete_handler : queueComplete  // Queue plugin event
};

Swfu1 = new SWFUpload(settings); 
```

PHP代码：

```
 if(isset($params['session'])) {
        session_id($params['session']);
    }
 $uploadedFilesSession = new Zend_Session_Namespace('uploadedFiles'.$params['session']);
    if(!isset($uploadedFilesSession->files))
    {
        $uploadedFilesSession->files = array();
    }
    if(!isset($uploadedFilesSession->files[$flag])){
        $uploadedFilesSession->files[$flag] = array();
    } 
```

每次它进入条件**!isset($uploadedFilesSession->files)**并重置我的身份验证会话。它只发生在 Safari 中。

请指导我。

# java - 由另一个活动打开位于应用程序目录中的文档

> ID：14810300
> 
> 赞同：1
> 
> 时间：2013-02-11T10:30:04.820
> 
> 标签：java, android, android-intent

我有以下代码尝试使用默认阅读器打开文件：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.addFlag(Intent.FLAG_GRANT_READ_URI_PERMISSION);
// type can be "application/msword" or "application/pdf"
intent.setDataAndType(Uri.fromFile(file), type);
activity.startActivity(intent); 
```

文件位于 Android 设备上的应用程序文件夹中：

```
/data/data/air.com.foo.foo/com.foo.foo/Local Store/folder1/file.ppt 
```

问题是启动的活动找不到文件。我检查了调用者代码中是否存在文件，所以这不是问题。

此外，如果我将文件从应用程序文件夹复制到应用程序共享的文件夹（在 sdcard 上），活动会找到该文件。

我不明白为什么它会失败，因为我添加了：

```
intent.addFlag(Intent.FLAG_GRANT_READ_URI_PERMISSION); 
```

问题是对我来说将文件复制到共享文件夹并不是一个令人满意的解决方案，因为我希望它保留在我的初始应用程序文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:56:53.253

在有权访问该文件的活动中，您可能想要执行

```
file.setReadable(true, false); 
```

true 是为了可读性， false 是为了“仅所有者”。

由于您可以找到它，但没有阅读它，因此缺少此权限似乎是问题所在。

# android - 通知立即触发

> ID：14810301
> 
> 赞同：1
> 
> 时间：2013-02-11T10:30:11.007
> 
> 标签：android, android-intent, calendar, notifications

我是安卓新手。我想在本地设置通知。我想在特定的日期和时间开火。但是，如果我将其设置为未来，它会立即触发吗？

```
 Calendar calendar = Calendar.getInstance();       

         //---sets the time for the alarm to trigger---
         calendar.set(Calendar.YEAR, 2013);
         calendar.set(Calendar.MONTH, 1);
         calendar.set(Calendar.DAY_OF_MONTH, 11);                 
         calendar.set(Calendar.HOUR_OF_DAY, 15);
         calendar.set(Calendar.MINUTE, 54);
         //calendar.set(calendar.AM_PM,1);
         calendar.set(Calendar.SECOND, 0);

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = R.drawable.alp_btn_code_lock_touched_holo;        
        CharSequence tickerText = "Hello"; // ticker-text
        long when = System.currentTimeMillis();         
        Context context = getApplicationContext();     
        CharSequence contentTitle = "Hello";  
        CharSequence contentText = "Hello";      
        Intent notificationIntent = new Intent(this, Login.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        Notification notification = new Notification(icon, tickerText, calendar.getTimeInMillis());
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        mNotificationManager.notify(1, notification); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:39:47.887

为此使用 AlarmManager 而不是直接使用通知。为此，您还必须实施 BroadCastReceiver 查看链接

[http://smartandroidians.blogspot.in/2010/04/alarmmanager-and-notification-in.html](http://smartandroidians.blogspot.in/2010/04/alarmmanager-and-notification-in.html)

[http://maephv.blogspot.in/2011/08/android-alarmmanager-and-notification.html](http://maephv.blogspot.in/2011/08/android-alarmmanager-and-notification.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:07:07.730

[在Broadcasrreceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)中使用 Alarmmanager 它很有用，因为您的代码更改如下

```
 Calendar calendar = Calendar.getInstance();       

     //---sets the time for the alarm to trigger---
     calendar.set(Calendar.YEAR, 2013);
     calendar.set(Calendar.MONTH, 1);
     calendar.set(Calendar.DAY_OF_MONTH, 11);                 
     calendar.set(Calendar.HOUR_OF_DAY, 15);
     calendar.set(Calendar.MINUTE, 54);
     //calendar.set(calendar.AM_PM,1);
     calendar.set(Calendar.SECOND, 0);

  Intent intentval = new Intent(YourActivity.this, TimeAlarm.class);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intentval, 0);
    alarm.set(AlarmManager.ELAPSED_REALTIME,  calendar.getTimeInMillis() , pendingIntent); 
```

像`TimeAlarm.class`这样使用

```
public class TimeAlarm extends BroadcastReceiver {
NotificationManager nm;

@SuppressWarnings("deprecation")
@Override
public void onReceive(Context context, Intent intent) {     

    int notificationId = Integer.parseInt(intent.getData().getSchemeSpecificPart());     

    Intent alarmIntent = new Intent(context, TimeAlarm.class);
    alarmIntent.setData(Uri.parse("timer:" + notificationId));
    //alarmIntent.setAction(String.valueOf(alarm.ID));
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent displayIntent = PendingIntent.getBroadcast(context, 0, alarmIntent, 0);
    alarmManager.cancel(displayIntent);     

    nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);       

    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
    Notification notif = new Notification(icon, tickerText, System.currentTimeMillis());
    notif.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    nm.notify(1, notif); 
```

# android - 为什么这个数组会抛出一个数组越界异常

> ID：14810302
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:30:11.140
> 
> 标签：android, android-layout, android-intent, android-emulator

当我从计时器调用此函数时，为什么尝试抛出绑定异常的数组。

我该如何解决这个查询。此代码在 run 函数之间调用。`list<Address> addresses`是超出范围的数组异常。告诉我一些解决此查询的方法

```
public String get_address(double latitude ,double longitude)
{
    String address = null;

    if(Geocoder.isPresent())
    {
        try{
            Geocoder geocoder2 = new Geocoder(mContext, Locale.getDefault());
              List<Address> addresses;
              addresses = geocoder2.getFromLocation(latitude, longitude, 2);
               if(addresses != null) {
                     Address returnedAddress = addresses.get(0);

                     StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
                     for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                     strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                    }
                     /*if(returnedAddress.getMaxAddressLineIndex() > 0){
                         strReturnedAddress.append(returnedAddress.getAddressLine(0) + ", ");
                       }

                       strReturnedAddress.append(returnedAddress.getLocality() + ", ");
                       strReturnedAddress.append(returnedAddress.getCountryName());
                     */

                     address=strReturnedAddress.toString();
                     }
                     else{
                     address="No Address returned!";
                     }
               //return address;

        }
        catch(Exception e)
        {
            Log.e("MyAPP", "Reverse geo lookup failed", e);
                address="reverse geo look up failed";
             //return address;
        }

    }
    else
    {
        address="Geocoder is not present";
        //return address;
    }
    return address;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:33:11.257

`addresses`可以为空（与 null 不同，但您无法获取第一项）

替换`if(addresses != null)`为`if(addresses != null && !addresses.isEmpty())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:33:57.173

从文档：

> 返回地址对象的列表。如果未找到匹配项或没有可用的后端服务，则返回 null 或空列表。

返回一个带有 0 个对象的新 ArrayList 也是如此。您需要检查：

```
if(addresses != null && addresses.size() > 0) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:34:34.963

由于地址列表已初始化，因此可能为空，但不为空。

```
if(addresses != null && !adresses.isEmpty()) 
```

# java - java堆大小增加

> ID：14810303
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:17.167
> 
> 标签：java, heap-memory

我编译了一个 jar 文件，每半分钟写入一次日志以检查线程和内存情况。

附件是开始日志，结束日志，在这个软件卡住后，停止工作。

中午发生了几次自动操作。我每秒收到大约 40 个报价，并在下一个报价出现之前完成了对每一个报价的处理。

另外，每 4 秒我都会向数据库写入一张包含信息的地图。

任何想法为什么堆大小在增加？（看 currHeapSize）

早晨： ![在此处输入图像描述](../Images/0f32fe8c76950644e1e6ee745cc3eeee.png)

晚上： ![在此处输入图像描述](../Images/10b147110ea3ad2ccef32cb0a4626c36.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:38:01.913

> 任何想法为什么堆大小在增加？

这些是 Java 存储泄漏的典型症状。在你的应用程序的某个地方有一个数据结构，它正在积累越来越多的对象，并防止它们被垃圾收集。

找到此类问题的最佳方法是使用内存分析器。[这个问题](https://stackoverflow.com/questions/40119/how-to-find-a-java-memory-leak)的答案解释了。

# mysql - MySQL - 查找位置列表附近的所有位置。例如，任何公园附近的所有房屋。子查询？

> ID：14810307
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:21.467
> 
> 标签：mysql, location, subquery

我有 2 张桌子，其中一张列出了 A 型的 150 个位置（我们称它们为公园），另一张则列出了 B 型（比如说房屋）的（几个 1000 个）位置。

我想要做的是找到**任何公园 1 英里内的****所有**房屋并列出这些公园。

 **我可以使用嵌套查询来做到这一点，它并不太慢，但我认为有一个更优雅的解决方案。我从来没有真正使用过子查询，所以如果这是要走的路，我们将不胜感激。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:33:55.993

可以通过表之间的简单交叉连接来完成，但您需要计算距离（足够简单 - 如果您在谷歌上搜索它们，会有很多示例）。

唯一的问题是性能，因为每次执行查询时您将进行潜在的 150,000 次距离计算。**

# javascript - 浏览器不响应 Javascript 的 DOM 类更改

> ID：14810310
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:29.117
> 
> 标签：javascript, node.js, dom

他是一个相当奇怪的问题，我担心可能没有解决方案。

我有一个运行 arch-linux 的 linux 盒子，在 kiosk 模式下的 matchbox，使用 midori 和/或 luakit webkit 浏览器。

页面由 node.js & express 提供，客户端 javascript 运行节点和客户端浏览器 DOM 上的纯 javascript。

似乎正在发生的事情是，浏览器随机停止响应 DOM 更改，例如，更改 div 类以在按键（触摸屏）事件上隐藏/显示不同的 div。

我添加了一个调试 div，它在类更改结束时触发，并获取并显示 div 数据，显示的数据确认 javascript 已完全执行，并且 div 的类已正确更改。

我已经使用 midori 和 luakit 对此进行了测试，两者都显示出完全相同的问题，在 PC 上使用任何浏览器时都不会发生这种情况。

不知道我可以提供什么额外的信息，关于如何调试什么/什么没有发生的任何建议，除了显示 js 函数的结果之外，我不知道还能做什么？！

# 编辑

没有报告错误，在 PC 上完美运行，这是我正在做的事情的一个例子：

```
//css
.panel { display: none;}
.show { display: inline-block;}

//js
function showPanel(g_focold,g_focnow){
    g_focold.className="panel"; 
    g_focnow.className="panel show";
}

//html
<div class="panel" id="div1">Panel 1</div>
<div class="panel" id="div2">Panel 2</div> 
```

# joomla - 寻找 joomla 功能来显示文章

> ID：14810312
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:37.590
> 
> 标签：joomla

我有这个功能。

```
 function onContentAfterDisplay( $article, &$params, $limitstart)
 {
     if(!is_home() && is_single){
         return "<script src='http://widget.eya.com/sprk.1.0.2.js' type='text/javascript'></script>"; 
     }
   return '';
 } 
```

仅当只有一篇文章且没有其他内容时，我才想返回该标签。在 wordpress 中，我知道它可以使用函数 is_single... 在 joomla 中完成，我不确定是否存在。有没有办法确定每页是否有一篇文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:39:14.393

您可以检查视图应该是文章的视图条件。

```
function onContentAfterDisplay( $article, &$params, $limitstart)
 {
    $view= JRequest::getVar('view','');
 if($view=='article'){
         return "<script src='http://widget.eya.com/sprk.1.0.2.js' type='text/javascript'></script>"; 
     }
   return '';
 } 
```

# html - CSS Toggle 单选开关自定义

> ID：14810313
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:43.187
> 
> 标签：html, css, forms, radio-button, switch-statement

我发现这个 CSS Radio Toggle 我认为它适用于我们网站的一部分，我将如何个性化它以便打开是绿色，关闭是红色？

[提琴手](http://jsfiddle.net/tstone/RkvAP/3/)

我试过改变一些css，但似乎无法得到这是我需要制作两个单独的类的位吗？

```
#bounds input:checked + span {
background-color:#404040;
color:#F7F7F7;
border-radius:3px;
} 
```

欢迎提出想法和例子谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:35:11.047

这是一个小提琴：http: [//jsfiddle.net/RkvAP/1304/](http://jsfiddle.net/RkvAP/1304/)

```
<div id="bounds">
    <label class="on"><input type="radio" name="toggle"><span>On</span></label>
    <label class="off"><input type="radio" name="toggle"><span>Off</span></label>
</div>

#bounds label.on input:checked + span {
    background: green;
    colr: #f7f7f7;
}

#bounds label.off input:checked + span {
    background: red;
    color: #f7f7f7;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:40:58.613

我建议，如果您只想在检查`background-color`相关收音机时更改`input`：

```
#bounds input:checked + span {
    color:#F7F7F7;
}
#bounds label:first-child input:checked + span {
    background-color:#060;
}
#bounds label:first-child + label input:checked + span {
    background-color:#600;
} 
```

[JS小提琴](http://jsfiddle.net/davidThomas/RkvAP/1305/)。

虽然这种方法取决于标记中元素的顺序，但它不需要添加任何其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:59:01.250

或者可能是这样..

```
<style>

#bounds input:checked + span.on {
    background-color: #0C0;
    color:#F7F7F7;
}
#bounds input:checked + span.off {
    background-color: #F00;
    color:#F7F7F7;
}

</style>

<div id="bounds">
    <label><input type="radio" name="toggle"><span class="on">On</span></label>
    <label><input type="radio" name="toggle"><span class="off">Off</span></label>
    </div> 
```

# c++ - 如何在 C/C++ 源代码中揭示 typedef？

> ID：14810314
> 
> 赞同：1
> 
> 时间：2013-02-11T10:30:48.970
> 
> 标签：c++, c, parsing, typedef, abstract-syntax-tree

我想用我的原始解析器解析 C/C++ 代码以获得 ast-tree。

但它不支持宏和 typedef。

借助 gcc 选项，可以在任何 C/C++ 项目中揭示宏定义。之后，我自己的解析器能够处理 C/C++ 代码，但前提是它没有 typedef。

所以，我想以某种方式摆脱 typedef。但我不知道，我该怎么办。

我想替换重新定义的类型名称，例如：

```
typedef char CHAR;
typedef int& INT;
INT a;
CHAR b; 
```

由他们的原件：

```
int &a;
char b; 
```

结果，我想获得相同的来源，但使用原始类型，没有 typedef。

我想，这对于编译器来说是非常简单的任务，但对于学生的项目来说却不是。:)

据我所知，g++ 的 DECL_ORIGINAL_TYPE (TYPE_NAME (t)) 指向具有原始对象类型的树节点。但我真的不想深入研究 g++ 源代码来满足我的需求。

那么，揭示 typedef 的最简单方法是什么？

任何帮助将不胜感激。

**编辑：**

GCCXML 的解决方案非常好，但我仍然不明白，如何从它的 XML 表示中获取 C/C++ 代码。你能解释一下，我应该怎么做才能转换 XML：

```
(an example from http://www.gccxml.org/HTML/example1out.html)

<?xml version="1.0"?>
<GCC_XML>
  <Namespace id="_1" name="::" members="_2 _3 _4 "/>
  <Function id="_2" name="main" returns="_5" context="_1" location="f0:8"/>
  <Function id="_3" name="a_function" returns="_5" context="_1" location="f0:4">
    <Argument name="f" type="_6"/>
    <Argument name="e" type="_4"/>
  </Function>
  <Struct id="_4" name="EmptyClass" context="_1" location="f0:1" members="_7 _8 " bases=""/>
  <FundamentalType id="_5" name="int"/>
  <FundamentalType id="_6" name="float"/>
  <Constructor id="_7" name="EmptyClass" context="_4" location="f0:1">
    <Argument name="_ctor_arg" type="_9"/>
  </Constructor>
  <Constructor id="_8" name="EmptyClass" context="_4" location="f0:1"/>
  <ReferenceType id="_9" type="_4c"/>
  <File id="f0" name="example1.cxx"/>
</GCC_XML> 
```

回到 C/C++：

```
(an example from http://www.gccxml.org/HTML/example1in.html)

struct EmptyClass {};

int a_function(float f, EmptyClass e)
{
}

int main(void)
{
  return 0;
} 
```

你能解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:37:19.153

由于类型是一个很大的复杂参数，我建议使用[GCCXML](http://www.gccxml.org/HTML/Index.html)。它是一个从具体源生成抽象语法树的前端。我用它来生成接口 Prolog/OpenGL。如果你想好好利用它，你需要一个好的 XML 阅读器（SWI-Prolog 非常擅长这个）。

*编辑*

以下微文件 xc

```
typedef struct A {
  int X, Y;
} T;

T v[100]; 
```

处理过

```
gccxml -fxml=x.xml x.c 
```

在 x.xml（以及许多其他）中生成以下 xml 语句

```
...
<Variable id="_3" name="v" type="_141" context="_1" location="f0:5" file="f0" line="5"/>
...
<Struct id="_139" name="A" context="_1" mangled="1A" demangled="A" location="f0:1" file="f0" line="1" artificial="1" size="64" align="32" members="_160 _161 _162 _163 _164 _165 " bases=""/>
<Typedef id="_140" name="T" type="_139" context="_1" location="f0:3" file="f0" line="3"/>
<ArrayType id="_141" min="0" max="99u" type="_140" size="6400" align="32"/>
...
<Field id="_160" name="X" type="_147" offset="0" context="_139" access="public" location="f0:2" file="f0" line="2"/>
<Field id="_161" name="Y" type="_147" offset="32" context="_139" access="public" location="f0:2" file="f0" line="2"/>
<Destructor id="_162" name="A" artificial="1" throw="" context="_139" access="public" mangled="_ZN1AD1Ev *INTERNAL* " demangled="A::~A()" location="f0:1" file="f0" line="1" endline="1" inline="1">
</Destructor> 
```

您可以看到，在 type="..." 符号链之后，您可以重构分配给 typedef 的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:31:40.910

为了解析宏，您可以使用 gcc 预处理器 cpp，它将预处理代码打印到标准输出。不幸的是你 typedef 不是宏，所以你需要自己处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:47:20.727

在我看来，您在翻译阶段是在抢先一步。与注释替换相比，Typedef 替换似乎很容易。您的程序是否将以下内容识别为注释？如果没有，那么我建议在尝试 3 和 4 之前回到翻译阶段 1 和 2。

```
// this is a basic comment
/* this is another basic comment */

// this is a slightly\
   less basic comment
/* this is a slightly
 * less basic comment */

/??/
*??/
c??/
o??/
m??/
m??/
e??/
n??/
t??/
*??/
/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T13:32:22.003

解析 C++ 非常困难，需要递归下降解析器。我建议您使用@CapelliC 提出的 GCCXML，或者作为更好维护的替代方案，使用[libclang](http://clang.llvm.org/doxygen/group__CINDEX.html)。甚至存在 Python 绑定，这使得它的使用变得更加简单。

# php - 如何找出哪些代码正在使用 Sendmail？

> ID：14810315
> 
> 赞同：0
> 
> 时间：2013-02-11T10:30:50.030
> 
> 标签：php, linux, sendmail

我们有一些未知代码（病毒？）突然从我们的服务器发送数千封邮件，虽然我们认为我们已经删除了相应的恶意 PHP 文件，但邮件仍然被发送出去。

如何找出发送邮件的代码？我尝试在 /var/log/maillog 下查看，但那里没有指针。还有什么方法可以查出来吗？

我们使用的是 CentOS 发行版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:54:59.203

您删除了相应的 PHP 文件这一事实并不意味着该文件无法在您系统的其他位置复制自身。如果您说这些电子邮件是连续发送的，即。这不是一次发生，那么脚本可能以某种方式渗入了您的 crontab 文件并定期调用自身。

查看系统上每个用户（包括 root）的 crontab 文件。确保检查crontab 正在执行的**任何**脚本，无论它看起来多么无辜。

* * *

另一种选择是`.htaccess`在显示特定 URL 时执行特定脚本的文件。以这种方式可以很容易地隐藏脚本的执行。检查所有`.htaccess`文件中您没有记录的奇怪规则...

* * *

希望这些选项中的一个或多个能够阐明这些电子邮件是从哪里发送的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:18:34.837

恶意代码在 Wordpress DB 和相关的 PHP 文件中，每次加载网站时 - 都会通过调用头文件 PHP 来调用它。我们清理了站点并全新安装解决了问题。我已经检查了 crontab，那里没有受感染的代码。感谢所有的指点。

# c# - 将两个表列从底部连接起来，而不是在行中

> ID：14810318
> 
> 赞同：-3
> 
> 时间：2013-02-11T10:30:59.910
> 
> 标签：c#, join

我需要加入 2 个表。

首先是第一个表的列和行。

在底线第二个表格的列和行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:49:13.040

我猜你需要类似`UNION`声明的东西？例子

```
SELECT ID, Test1, Test2 FROM Table1
UNION
SELECT ID, Test1, Test2 FROM Table2 
```

请注意，两者`SELECTS`必须选择相同数量的具有相同列名的列！可以重命名列：

```
SELECT ID, Test1, Test2 FROM Table1
UNION
SELECT Identifier as ID, TestColumn1 as Test2, Foo as Test2 FROM Table2 
```

如果您的问题也包含 SQL 查询（这很难从您在问题中提供的少量内容中分辨出来）。

在 C# 中，您可以遍历第二个表并在第一个表中添加包含第二个表的值的行。同样重要的是要注意，第二个表中的列数不能大于第一个表中的列数。

例如：

```
foreach (DataRow r in table2.Rows)
{
    table1.Rows.Add(r[0], r[1], ...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:55:35.273

您可以尝试合并两个表假设表1是dt1，dt2是第二个表

然后

```
dt1.Merger(dt2) 
```

将 dt2 合并到 dt1 中。

# wordpress - 在网格 Wordpress 中显示自定义帖子类型

> ID：14810327
> 
> 赞同：0
> 
> 时间：2013-02-11T10:31:23.000
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我正在尝试在类似于此站点的网格视图中显示自定义帖子类型 (CPT)：

[www.virtualpudding.com](http://virtualpudding.com)

我彻底搜索了谷歌和 Stackoverflow 无济于事。它需要有一个缩略图，就像上面链接的站点一样，单击该缩略图会进入特定页面。基本上，它是展示案例工作的作品集。

目前我有一个名为“投资组合”的自定义帖子类型，并创建了一个非常基本的模板来使用以下代码显示这些；

```
<?php
/**
* Template Name: Recipes Page
*
* Selectable from a dropdown menu on the edit page screen.
*/
get_header(); ?>

    <div id="primary">
        <div id="content" role="main">
                           <?php query_posts( 'post_type=portfolio'); ?>

            <?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', 'page' ); ?>

                <?php comments_template( '', true ); ?>

            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_footer(); ?> 
```

我不是 php 编码器，对 php 编码知之甚少，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:16:27.190

首先确保您的自定义帖子类型支持“缩略图”。

wordpress 函数“register_post_type”采用一个数组，您可以在其中配置自定义帖子类型。数组元素之一是“支持”，它允许您指定自定义帖子类型具有的功能。

[register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)

或[add_post_type_support](http://codex.wordpress.org/Function_Reference/add_post_type_support)

然后，在 while 循环中，您可以通过使用[has_post_thumbnail](http://codex.wordpress.org/Function_Reference/has_post_thumbnail)和[the_post_thumbnail来获取缩略图](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

# linux - 具有相同名称的本地和 NIS 用户 - chown

> ID：14810339
> 
> 赞同：1
> 
> 时间：2013-02-11T10:32:10.077
> 
> 标签：linux, unix, chmod, chown, nis

我有一个配置了 NIS 域的 linux，以及一个本地用户和一个名为 johndoe 的 NIS 用户（但不同的 UID）。

当应用 'chown johndoe:johndoegrp somefile.txt' - 哪个 john doe 将成为所有者？我知道我可以使用 'ls -n' 亲眼看到，但一些最终用户告诉我他们得到的结果不一致。

是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:40:07.140

您必须检查 /etc/nsswitch.conf 中的顺序。在机器上我有

```
 passwd:     files nis 
```

# extjs - 登录 extjs 4 mvc 后加载新视图

> ID：14810340
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:32:15.557
> 
> 标签：extjs, extjs4, extjs-mvc

我在 extjs 4 中创建了一个登录视图，数据是从 mysql 中获取的。我的问题是成功登录后我无法重定向我的页面。

我的重定向代码是。

```
onLoginSuccess : function(response, opts) 
                        {
                            //Received response from the server
                            response = Ext.decode(response.responseText);

                            if(response.success)
                                {

                                         var redirect = 'index';        
                                        window.location = redirect; 

                                }
                            else
                                 {
                                    Ext.MessageBox.alert('Login failed', response.message);
                                 } 
                         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:46:30.893

有两种方法可以解决这个问题：

# 作为单独的页面登录

这是推荐的方式，因为它更快、更安全。

*   有一个 index.php 页面，用于检查用户是否已登录。
*   如果用户已登录，您应该只需要您的实际系统索引文件，其中包括 ExtJs 标头。
*   如果用户未登录，您应该需要一个显示实际登录屏幕的 login.php 文件。此页面可能会或可能不会加载 ExtJs 库（因为此页面上的内容很少，我假设您在这里不需要 ExtJs 文件）。

例如，这是我的 index.php：

```
<?php

require_once('common/include/User.php');

if ( SessionUser()->IsLoggedIn() )
{
    // chdir is simply to keep the correct paths when compiling the app.
    // It works for php, but for html/css links you should use the base tag
    // in your php/html file: <base href="app/"/>
    chdir('app');
    require_once('app/index.php');    
} else {
    require_once('login.php');
}

?> 
```

然后`app/index.php`是加载您的应用程序脚本和 ExtJs 库的实际索引文件。

`login.php`只是一个相当简单的登录表单：

```
<?php
// Index file for logged out users (guests)

$iUserName = isset( $_POST['username'] ) ? $_POST['username'] : '';

$iLoginErrorTxt = '';

if ( isset( $_POST['username'] ) )
{
    require_once('common/include/User.php');

    $iLoginError = SessionUser()->Authenticate( $_POST['username'], $_POST['password'] );

    if ( $iLoginError['success'] )
    {
        // Login successful - reload the page.
        header( "Location: " . $_SERVER['PHP_SELF'] );
        exit();
    } else {
        // Login failed - present an error.
        $iLoginErrorTxt = $iLoginError['error'];
    }
}
?>

<html>
<head>
    <title>My System</title>            
</head>

<body>

<form class="login-form" action="<?=$_SERVER['PHP_SELF']?>" enctype="application/x-www-form-urlencoded" method="post">

    <input name="username" size="25" type="text" value="<?=$iUserName?>" value spellcheck="false" placeholder="User Name"/>

    <input name="password" size="25" type="password" value spellcheck="false" placeholder="Password"/>

    <div class="error-message"><?=$iLoginErrorTxt?></div>

    <input name="submit" type="submit" value="Login" />

</form>

</body>
</html> 
```

# 从 ExtJs 应用程序内登录

不强烈推荐这种方法，因为您需要在用户进行身份验证之前加载整个 ExtJs 框架和很可能是您的应用程序脚本。

一个可能的实现将涉及拥有一个容器面板，它一次只显示一个面板，可以是登录页面，也可以是实际的应用程序页面。

app.js 可能包含以下代码：

```
refs:
[{
    ref: 'contentPanel',
    selector: 'viewport > #contentPanel'
}],

controllers: [
    'MainMenu'
],

launch: function() {
    // Enable quicktips
    Ext.QuickTips.init();

    // Create the viewport 
    Ext.create('Ext.container.Viewport', {
        layout: 'fit',
        items: [
            {
                xtype: 'panel',
                id: 'contentPanel',
                layout: 'card',

                dockedItems: [{
                    xtype: 'mainmenu',
                    dock: 'top' 
                }]
            }
        ]
    });   
}, 
```

然后你可以这样做：

```
var iContentPanel = this.getContentPanel();
iContentPanel.getLayout().setActiveItem( iPage ); 
```

`iPage`您希望显示的任何页面（面板）在哪里。

显然有一些方法可以改进它的工作方式，例如，通过动态加载控制器；但我相信这是一个不同问题的故事。

无论如何，我强烈建议您考虑第一种方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T13:08:01.323

您可以通过简单地使用登录窗口覆盖整个应用程序来处理登录，如下所示：http: [//blogapp.banchaproject.org/app.html](http://blogapp.banchaproject.org/app.html)

代码可以在这里找到，尤其是你会感兴趣的这个控制器： [https ://github.com/Bancha/BanchaBlogApp/blob/master/webroot/app/controller/Authentification.js](https://github.com/Bancha/BanchaBlogApp/blob/master/webroot/app/controller/Authentification.js)

# c# - 如何将 foreach 转换为 Parallel.ForEach？

> ID：14810343
> 
> 赞同：5
> 
> 时间：2013-02-11T10:32:25.017
> 
> 标签：c#, task-parallel-library

如何转换：

```
 foreach (  NotifyCollectionChangedEventHandler handler in delegates) {
            ...
  } 
```

像这样的东西

```
 Parallel.ForEach(    NotifyCollectionChangedEventHandler handler in delegates) {
  ... 
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T10:37:51.957

你可以做：

```
Parallel.ForEach(delegates, handler => 
{ 
//your stuff 
}); 
```

考虑以下示例

```
List<string> list = new List<string>()
{
    "ABC",
    "DEF", 
    "EFG"
};

Parallel.ForEach(list, str =>
{
    Console.WriteLine(str);
}); 
```

您可能还会看到：[如何：编写一个简单的 Parallel.ForEach 循环](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:35:45.787

在这里，很容易：

```
Parallel.ForEach(delegates, handler => 
                            {
                                 //Do your thing with the handler and may the thread-safety be with you.
                            }); 
```

尽管阅读文档后应该很明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:36:18.810

[来自MSDN](http://msdn.microsoft.com/en-us/library/dd460720.aspx)的简单示例。

```
 // A simple source for demonstration purposes. Modify this path as necessary. 
string[] files = System.IO.Directory.GetFiles(@"C:\Users\Public\Pictures\Sample Pictures", "*.jpg");
string newDir = @"C:\Users\Public\Pictures\Sample Pictures\Modified";
System.IO.Directory.CreateDirectory(newDir);

//  Method signature: Parallel.ForEach(IEnumerable<TSource> source, Action<TSource> body)
Parallel.ForEach(files, currentFile =>
{
    // The more computational work you do here, the greater  
    // the speedup compared to a sequential foreach loop. 
    string filename = System.IO.Path.GetFileName(currentFile);
    System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(currentFile);

    bitmap.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
    bitmap.Save(System.IO.Path.Combine(newDir, filename));

    // Peek behind the scenes to see how work is parallelized. 
    // But be aware: Thread contention for the Console slows down parallel loops!!!
    Console.WriteLine("Processing {0} on thread {1}", filename, Thread.CurrentThread.ManagedThreadId);

    } //close lambda expression
); //close method invocation 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T10:36:39.023

`Action<TSource>`为了您的目的，对参数参数进行了一些补充：

```
Parallel.ForEach(delegates, d => { ... }); 
```

# javascript - Html5节点图？

> ID：14810346
> 
> 赞同：3
> 
> 时间：2013-02-11T10:32:33.363
> 
> 标签：javascript, html, css, charts, html5-canvas

有没有`html5`类似**Asterisq Roamer**的版本？

我查看了 Daniel Davis [list](http://my.opera.com/tagawa/blog/list-of-javascript-charting-libraries)中的这个图表列表，但找不到任何有：

1.  从 xml 加载数据（更好的 json）
2.  最低连接级别 2
3.  动画自定义框

这是[Asterisq](http://asterisq.com/products/constellation/roamer/demo)：

![在此处输入图像描述](../Images/f5b6b18f84b007da67f383bcfbb332e6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T13:08:49.873

我知道有几个图形可视化工具：

*   [乔木.js](http://arborjs.org/)
*   [JavaScript InfoVis 工具包](http://thejit.org/)
*   [d3.js](http://d3js.org/)

我认为他们的 API 非常简单，以至于基于您加载的模型以编程方式添加图形和边比将您的数据适应某种固定模式更容易。

# android - 片段没有被替换，而是放在前一个片段之上

> ID：14810348
> 
> 赞同：110
> 
> 时间：2013-02-11T10:32:38.443
> 
> 标签：android, android-fragments

活动：

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

Fragment1 fragment = new Fragment1();
Fragment2 fragment2 = new Fragment2();

transaction.replace(R.id.Fragment1, fragment);
transaction.addToBackStack(null);
transaction.commit();

FragmentTransaction transaction2 = getSupportFragmentManager().beginTransaction();
transaction2.replace(R.id.Fragment1, fragment2);
transaction2.addToBackStack(null);
transaction2.commit(); 
```

视图中的代码：

```
<fragment
    android:id="@+id/Fragment1"
    android:name="com.landa.fragment.Fragment1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/include1" /> 
```

问题是，内容并没有真正被替换 - 它被放在顶部（所以它重叠）。

当我单击返回时，第一个片段会正确显示（没有第二个片段），但最初两者都是可见的（我只希望最后一个片段可见）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-02-11T10:50:13.427

你在这里做错了两件事：

1.  您不能替换静态放置在`xml`布局文件中的片段。您应该在布局中创建一个容器（例如 a `FrameLayout`），然后使用`FragmentTransaction`.

2.  [`FragmentTransaction.replace`](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)期望包含片段的容器的 id 而不是片段的 id 作为第一个参数。因此，您应该将第一个参数作为您添加第一个片段的容器的 id 传递。

您可以参考[此链接](http://www.sapandiwakar.in/replacing-fragments/)了解更多详情。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-05-27T20:47:03.183

我有一个类似的问题，但我的问题是我使用了两个不同的片段管理器：一个`getSupportFragmentManager()`来自`getFragmentManager()`. 如果我添加了一个片段，`SupportFragmentManager`然后尝试用 替换片段`FragmentManager`，则片段将被添加到顶部。我需要更改代码以便使用相同的代码`FragmentManager`并解决问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-11T10:50:55.827

android 开发者网站建议使用 a`FrameLayout`在运行时动态加载片段。您已在 xml 文件中对片段进行硬编码。所以它不能在运行时被删除，如此链接中提到的：

[http://developer.android.com/training/basics/fragments/creating.html](http://developer.android.com/training/basics/fragments/creating.html)

此链接显示如何通过您的程序添加片段：

[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-22T14:23:03.810

我有同样的问题，看到了所有的答案，但没有一个包含我的错误！在尝试替换当前片段之前，我在容器活动的 xml 中显示了默认片段，如下所示：

```
<FrameLayout
    android:id="@+id/fragment_frame_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="....ShopFragment"
        android:id="@+id/fragment"
        tools:layout="@layout/fragment_shop" />
</FrameLayout> 
```

在那之后，虽然我把它传递`FrameLayout`给了，`fragmentTransaction.replace()`但我遇到了确切的问题。它显示了前一个片段之上的第二个片段。

**通过从 xml 中删除片段并`onCreate()`在容器活动的方法中以编程方式显示它来解决问题，以便在程序启动时进行默认预览，如下所示：**

```
 fragmentTransaction = getFragmentManager().beginTransaction();
    fragmentTransaction.replace(R.id.fragment_frame_layout,new ShopFragment());
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit(); 
```

和容器活动 xml：

```
<FrameLayout
    android:id="@+id/fragment_frame_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-11T10:47:29.693

您可以在替换片段之前清除 backStack：

```
 FragmentManager fm = getActivity().getSupportFragmentManager();

    for (int i = 0; i < fm.getBackStackEntryCount(); i++) {
        fm.popBackStack();
    }

    // replace your fragments 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-11-19T10:59:32.217

```
<FrameLayout
    android:id="@+id/fragment_frame_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?android:windowBackground">
//Add fragment here
</FrameLayout> 
```

添加`android:background="?android:windowBackground">`到您的片段所在的容器中。就我而言，我添加了一个`FrameLayout`，这应该会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-16T17:33:23.563

我同意 Sapan Diwakar 的回答。但我找到了如何做到这一点的解决方法。

`activity_main`首先，在您拥有所有布局的活动（例如）中，添加一个`FrameLayout`. 它的高度和宽度应该是`match parent`. 另外，给它一个`id`.

现在，在要替换当前布局的片段中，调用`onPause()`and `onResume()`。初始化所有内部容器`View`。并将它们设置**`visibility`**为**`GONE`in`onResume()`**和**`VISIBLE`in`onPause()`**。

**注意**：不是`FrameLayout`你用这个片段替换的那个。

假设您有`ViewPager`、和`TabLayout`中的`ImageView`自定义`<fragment>`。`activity_main.xml`添加，`FrameLayout`如上所述。

在`abcFragment.java`，在`onClick()`函数中，添加`addToBackstack(null)`。`transaction`

**示例代码：**

在 xyzFragment 中，它将替换 abcFragment（以及 activity_main.xml 中显示的所有内容），执行此操作

```
@Override
    public void onResume() {
        super.onResume();

    // On resume, make everything in activity_main invisible except this fragment.
    slidingTabs = getActivity().findViewById(R.id.sliding_tabs);
    viewPager = getActivity().findViewById(R.id.pager);
    miniPlayerFragment = getActivity().findViewById(R.id.mini_pager);

    slidingTabs.setVisibility(View.GONE);
    viewPager.setVisibility(View.GONE);
    miniPlayerFragment.setVisibility(View.GONE);
}

@Override
public void onPause() {
    super.onPause();

    // Make everything visible again
    slidingTabs = getActivity().findViewById(R.id.sliding_tabs);
    viewPager = getActivity().findViewById(R.id.pager);
    miniPlayerFragment = getActivity().findViewById(R.id.mini_pager);

    slidingTabs.setVisibility(View.VISIBLE);
    viewPager.setVisibility(View.VISIBLE);
    miniPlayerFragment.setVisibility(View.VISIBLE);
} 
```

快乐编码！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-22T06:50:04.703

使用容器而不是使用片段

```
<FrameLayout
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="Hello World!" /> 
```

现在在 MainActivity

```
if(condition)
    getFragmentManager().beginTransaction().replace(R.id.container,new FirstFragment()).commit();                    
else
    getFragmentManager().beginTransaction().replace(R.id.container, new SecondFragment()).commit(); 
```

请注意，您的片段类应导入“android.app.Fragment”确保您使用“support.v4”或“原始”实现，不要混合使用它们。我遇到了这个问题，因为我混合了它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-21T22:29:31.463

感谢 Sapan Diwakar 和其他人。这个答案帮助了我。我只是创建了一个没有片段的RelativeLayout，将RelativeLayout用作父视图或组视图，在事务中指定要替换的组视图，它就可以工作了。

代码：

```
getSupportFragmentManager().beginTransaction()
                            .replace(R.id.content_group_view, itemDetailFragment).commit(); 
```

XML:

```
 <RelativeLayout
         android:id="@+id/content_group_view"
         android:layout_width="match_parent"
         android:layout_height="match_parent">

 </RelativeLayout> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-06T15:29:59.147

您可以使用 FragmentTransaction 中的 setTransition 方法来修复重叠问题。

```
transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-16T08:49:41.713

在 Oncreate()

```
 BaseFragmentloginpage fragment = new BaseFragmentloginpage();
            android.support.v4.app.FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
            fragmentTransaction.replace(R.id.frame, fragment);
            fragmentTransaction.isAddToBackStackAllowed();
            fragmentTransaction.commit(); 
```

现在这将始终是您的默认片段...如果您在 xml 布局中添加片段，它将始终重叠，因此在运行时使用片段设置初始内容

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-06T07:05:50.070

使用此问题解决后我遇到了同样的问题

1.  在你替换你的片段的地方进行框架布局

    ```
    <FrameLayout
                    android:id="@+id/fragment_place"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" /> 
    ```

2.  和替换代码

    ```
    public void selectFrag(View view) {
    Fragment fr;

      if(view == findViewById(R.id.button2))
    {
         fr = new FragmentTwo();

     }else {
         fr = new FragmentOne();
     }
     FragmentManager fm = getFragmentManager();
     FragmentTransaction fragmentTransaction = fm.beginTransaction();
     fragmentTransaction.replace(R.id.fragment_place, fr);
     fragmentTransaction.commit(); 
    ```

如果您想要整个示例，我将发送给您，只需评论我......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-04T15:05:16.647

我也有同样的问题，但这是因为我没有改变我试图添加到我的框架布局的片段的背景颜色。

尝试这样做，`layout_height`并`layout_width`设置为`match_parent`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-04T22:55:58.897

我曾经遇到过这个问题，发现是因为我不小心删除了`android:background`您的 xml 代码中缺少的属性。我相信它就像你在粉刷墙壁时一样，`android:background`是墙壁的颜色，而其他视图则放置在该基础颜色之上。当您在定位视图之前不绘制墙壁时，它们将位于该墙壁中已经存在的内容之上，在您的情况下，您的另一个片段。不知道对你有没有帮助，祝你好运。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-18T12:08:45.030

我已经尝试过所有情况并尝试解决问题但仍然没有得到解决方案。我不知道为什么它不适合我。我同意上述答案，因为很多人都同意。

**我只是在扩展答案，下面是对我有用的方式。**

> > 我已将此属性添加`android:clickable="true"`到文件的顶部父布局中`fragment.xml`。

我希望有人能得到帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-05T09:13:53.663

检查您的框架布局 ID 并将其替换如下

```
fragmentTransactionChange = MainActivity.this.getSupportFragmentManager().beginTransaction();
fragmentTransactionChange.replace(R.id.progileframe, changeFragment);
fragmentTransactionChange.addToBackStack(null);
fragmentTransactionChange.commit(); 
```

# javascript - 在 chrome 扩展中调试匿名函数

> ID：14810352
> 
> 赞同：0
> 
> 时间：2013-02-11T10:32:59.380
> 
> 标签：javascript, debugging, google-chrome, coffeescript

我正在构建一个原型 Web 应用程序，我想将它集成到 chrome 网页中（不是生产所必需的）。因此，我构建了一个后端解决方案，将我的所有 js 文件发送到一个请求中，并将结果发送到 chrome 扩展客户端以进行组织和简化目的。

myBackend.coffee（我自己的 nodejs 服务器）

```
getScript = (name) ->
  filename = "#{__dirname}/../public/js/#{name}.js"
  fs.readFileSync(filename, 'utf-8')

get '/chrome/includes', (req, res) ->
  scripts = [
    getScript 'vendor/jquery'
    getScript 'vendor/jquery.ui'
    getScript 'vendor/mousetrap'
    getScript 'vendor/mustache'
    getScript 'vendor/backbone'
    #...
    getScript 'main-chrome'
  ]

  res.send
    scripts: scripts
    css: [
      #...
    ] 
```

backckground.coffee (chrome 客户端)

```
$.ajax
  url: "http://localhost:3001/chrome/includes"

  success: (data) ->
    compactedCode = ''
    _.each data.scripts, (code) ->
      compactedCode += code

    chrome.tabs.executeScript tab.id, code: compactedCode 
```

好的，这很好，但是当我在“compatedCode”中执行错误代码时会出现问题。

铬告诉我：

> Uncaught TypeError: undefined is not a function (anonymous function) 但没有告诉我错误在哪里。

[https://docs.google.com/file/d/0B6tc60GuFE4WSk4zTXhzV1luOE0/edit?usp=sharing](https://docs.google.com/file/d/0B6tc60GuFE4WSk4zTXhzV1luOE0/edit?usp=sharing)

我有很多代码，所以这并不是在任何地方编写“调试器”的真正选择。

我应该怎么做才能熟练地调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:09:32.173

好吧，我在这里找到了一个很好的解决方案： [http ://code.google.com/p/chromium/issues/detail?id=95352](http://code.google.com/p/chromium/issues/detail?id=95352)

只需要添加这个，太好了

```
compactedCode += "\n//@ sourceURL=foo.js" 
```

# html - 《把xml转成html表，未知数太多》后续

> ID：14810355
> 
> 赞同：0
> 
> 时间：2013-02-11T10:33:06.317
> 
> 标签：html, xml, xslt, html-table

这是帖子“ [Transforming xml into html table with too many unknowns](https://stackoverflow.com/questions/14710531/transforming-xml-into-html-table-with-too-many-unknowns/14711823#comment20711921_14711823) ”的第 2 部分。除了为每种语言创建一个包含不同行的 html 表之外，我还需要为每种语言创建一个不同的行，其中包含来自 descripGrp 的信息。这是原始 XML 文件的摘录，其中包含语言“CS”的 1 个 descripGrp

```
<mtf>
  <conceptGrp>
    <concept>1</concept>

    <languageGrp>
      <language lang="DE" type="Deutsch"/>

      <termGrp>
        <term>Abbildung</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="PL" type="Polnisch"/>

      <termGrp>
        <term>ilustracja</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="RU" type="Russisch"/>

      <termGrp>
        <term>иллюстрация</term>
      </termGrp>

      <termGrp>
        <term>рисунок</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="CS" type="Tschechisch"/>

      <termGrp>
        <term>vyobrazení</term>

        <descripGrp>
          <descrip type="Autor">MK</descrip>
        </descripGrp>
      </termGrp>
    </languageGrp>
  </conceptGrp>
</mtf> 
```

“descripGrp”可以有各种“类型”，并且可能出现在每个“languageGrp/termGrP”中，或者可能一起丢失。感谢 JLRishe 为第一个问题提供了出色的答案，第一个问题是答案，但是这里提到的添加仍然是开放的。感谢您的输入。非常非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:19:57.673

这就是我想出的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" encoding="utf-8" indent="yes"/>
  <xsl:key name="kLang" match="languageGrp" use="language/@lang" />
  <xsl:key name="kDescrip" match="descrip"
           use="concat(../../../language/@lang, '+', @type)" />
  <xsl:variable name="uniqueLangs"
                select="/mtf/conceptGrp/languageGrp
                  [generate-id() =  generate-id(key('kLang', language/@lang)[1])]" />
  <!-- A set of the first item of each <descrip>, grouped by @lang and @type -->
  <xsl:variable name="uniqueDescrip"
                select="/mtf/conceptGrp/languageGrp/termGrp/descripGrp/descrip
                  [generate-id() = 
                     generate-id(key('kDescrip', 
                        concat(../../../language/@lang, '+', @type))[1])]" />

  <xsl:template match="mtf">
    <html>
      <body>
        <h2>Terminologie</h2>
        <table>
          <tr>
            <!--Zeile 1-->
            <td>Konzept-ID</td>
            <xsl:apply-templates select="$uniqueLangs" mode="header"/>
          </tr>
          <xsl:apply-templates/>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="conceptGrp">
    <xsl:apply-templates select="languageGrp" mode="maxGroup">
      <xsl:sort select="count(termGrp)" order="descending" data-type="number"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="languageGrp" mode="header">
    <td>
      <xsl:value-of select="language/@type"/>
    </td>
    <xsl:apply-templates
          select="$uniqueDescrip[../../../language/@lang = 
                             current()/language/@lang]"
          mode="header" />
  </xsl:template>

  <xsl:template match="descrip" mode="header">
    <td>
      <xsl:value-of select="@type"/>
    </td>
  </xsl:template>

  <xsl:template match="languageGrp" mode="maxGroup">
    <!-- Only use the first group out of the sorting (most termGrps) -->
    <xsl:if test="position() = 1">
      <xsl:apply-templates select="termGrp" />
    </xsl:if>
  </xsl:template>

  <xsl:template match="termGrp">
    <tr>
      <td>
        <xsl:value-of select="../../concept"/>
      </td>
      <!-- Iterate through all of the distinct languages -->
      <xsl:apply-templates select="$uniqueLangs" mode="item">
        <xsl:with-param name="currConcept" select="../.." />
        <xsl:with-param name="pos" select="position()" />
      </xsl:apply-templates>
    </tr>
  </xsl:template>

  <xsl:template match="languageGrp" mode="item">
    <xsl:param name="currConcept" />
    <xsl:param name="pos" />

    <xsl:variable name="matchingTermGrp"
                  select="$currConcept/languageGrp[language/@lang = 
                                                   current()/language/@lang]
                                                   /termGrp[$pos]" />
    <td>
      <xsl:value-of select="$matchingTermGrp/term"/>
    </td>
    <xsl:apply-templates
      select="$uniqueDescrip[../../../language/@lang = current()/language/@lang]"
      mode="value">
      <xsl:with-param name="termGrp" select="$matchingTermGrp" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="descrip" mode="value">
    <xsl:param name="termGrp" />
    <td>
      <xsl:value-of select="$termGrp/descripGrp/descrip[@type = current()/@type]" />
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入 XML 上运行时：

```
<mtf>
  <conceptGrp>
    <concept>1</concept>

    <languageGrp>
      <language lang="DE" type="Deutsch"/>

      <termGrp>
        <term>Abbildung</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="PL" type="Polnisch"/>

      <termGrp>
        <term>ilustracja</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="RU" type="Russisch"/>

      <termGrp>
        <term>иллюстрация</term>
        <descripGrp>
          <descrip type="Other">Sales</descrip>
        </descripGrp>
      </termGrp>

      <termGrp>
        <term>рисунок</term>
        <descripGrp>
          <descrip type="Other">Marketing</descrip>
        </descripGrp>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="CS" type="Tschechisch"/>

      <termGrp>
        <term>vyobrazení</term>

        <descripGrp>
          <descrip type="Autor">MK</descrip>
          <descrip type="Kontext">Marketing</descrip>
        </descripGrp>
      </termGrp>
    </languageGrp>
  </conceptGrp>
</mtf> 
```

这会产生：

```
<html>
  <body>
    <h2>Terminologie</h2>
    <table>
      <tr>
        <td>Konzept-ID</td>
        <td>Deutsch</td>
        <td>Polnisch</td>
        <td>Russisch</td>
        <td>Other</td>
        <td>Tschechisch</td>
        <td>Autor</td>
        <td>Kontext</td>
      </tr>
      <tr>
        <td>1</td>
        <td>Abbildung</td>
        <td>ilustracja</td>
        <td>иллюстрация</td>
        <td>Sales</td>
        <td>vyobrazení</td>
        <td>MK</td>
        <td>Marketing</td>
      </tr>
      <tr>
        <td>1</td>
        <td></td>
        <td></td>
        <td>рисунок</td>
        <td>Marketing</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </body>
</html> 
```

# xcode - 在 Xcode 的开放框架构建产品中找不到字体和 xml

> ID：14810365
> 
> 赞同：0
> 
> 时间：2013-02-11T10:33:34.873
> 
> 标签：xcode, openframeworks

我想将我的开放框架项目移动到其他机器上进行测试。但是当我尝试打开构建产品（通过管理器导出）时，应用程序启动时没有我设置的文本（通过 ofTrueTypeFont）。它也不会从我使用的 xml 中加载任何数据。如果我在同一台机器上打开导出的产品，也会发生这种情况。

字体加载如下：在.h

```
ofTrueTypeFont fontLarge; 
```

在.cpp

```
fontLarge.loadFont("font.ttf", 35);
fontLarge.drawString("Display that String", 30,30); 
```

我尝试了各种构建阶段。将 .ttfs 和 .xmls 复制到各个目录，但应用程序找不到它。

在 /App/Contents、/Frameworks、/usr/... 中尝试了一个 (/bin)data 文件夹，我可以在最终产品中想象到的每个文件夹。我在这里想念什么？

Xcode 4.6 / OS X 10.8.2 / OpenFrameworks 0073

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T21:15:03.087

不确定这是否是最好的方法，但这就是我解决它的方法：

添加到您的应用程序设置：

```
ofSetDataPathRoot("../Resources/data/"); 
```

然后将 Copy Files Build Phase 添加到 Target 并将 Destination 设置为“Resources”，将 Subpath 设置为“data”。从现在开始，您可以将所需的文件拖放到构建阶段，它们将被包含在内。

# tridion - 引用组件链接时 Tomcat 错误：属性 pageURI 是必需的

> ID：14810369
> 
> 赞同：2
> 
> 时间：2013-02-11T10:33:57.850
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

目前我的页面正在返回错误，因为我已经开始在 JSP 环境中实现 XPM。组件链接似乎是这里的问题。几天前它工作正常，现在我们不断收到这些 Tomcat 错误：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/JSPStaging] threw exception [/en_nl/system/footer.jsp (line: 10, column: 8) According to the TLD or the tag file, attribute pageURI is mandatory for tag ComponentLink] with root cause org.apache.jasper.JasperException: /en_nl/system/footer.jsp (line: 10, column: 8) According to the TLD or the tag file, attribute pageURI is mandatory for tag ComponentLink
at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:237)
at org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:858)
at org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
at org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
at org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1795)
at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:217)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:605)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:544)
at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
at org.apache.jsp.en_005fnl.index2_jsp._jspService(index2_jsp.java:137)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.tridion.preview.web.BinaryContentFilter.doFilter(BinaryContentFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.tridion.preview.web.PageContentFilter.doFilter(PageContentFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.tridion.ambientdata.web.AmbientDataServletFilter.doFilter(AmbientDataServletFilter.java:255)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

奇怪的是，纯 JSP 文件上的组件链接在那里，包括 PageURI.:

```
<tridion:ComponentLink runat="server" PageURI="tcm:17-480-64" ComponentURI="tcm:17-795" TemplateURI="tcm:0-0-0" AddAnchor="false" LinkText="&lt;img src=&#34;/Images/women_edfd8f3453414ade82b7becaa0790386.jpg&#34;  alt=&#34;Woman #1&#34;&gt;" LinkAttributes="" TextOnFail="true"/> 
```

以及将 cd_tags 库正确包含到每个单独的页面模板中，以及正确的核心引用：

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="cd_tags" prefix="tridion" %> 
```

我已经尝试搜索错误，但没有 Tridion 特定于上下文的解决方案。我目前正在研究重置/重新配置组件链接，但我并不完全确定配置中是否有任何问题。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:50:51.397

该链接用于 .NET 控件，而不是 JSP 标记库。

也许有人更改了您正在使用的发布目标上的目标语言（或者它发布到错误的目标）？另一种可能性是它在模板中被硬编码，而不是使用 TCDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:46:54.157

感谢 Peter Kjaer 为我指明了方向，这个问题现在已经解决了。然而，这不是由于发布目标和语言（因为它们设置正确 - 但我不会完全排除 pubtargets 冲突的可能性）。

问题原来是 HTTP 上传服务器角色上的 deployer_conf xml 文件，其（默认）行位于 TCDLEngine 节点 - 属性中。

```
<!--<Property Name="tcdl.dotnet.style" Value="controls"/>-->
<Property Name="tcdl.jsp.style" Value="tags"/> 
```

如您所见，我评论了 dotnet 行。它现在可以正确解析链接，以及不再包含“runat”的组件链接。

# jquery-plugins - 如何使用公共功能为彩盒添加功能？

> ID：14810372
> 
> 赞同：2
> 
> 时间：2013-02-11T10:34:10.527
> 
> 标签：jquery-plugins, colorbox

我想为彩盒创建公共功能，这将为彩盒添加一些功能

```
$("#selector").colorbox({
        inline: true,
        popover: true,
}) 
```

现在我怎样才能在我的 newPublicMethod 中访问这个弹出窗口？

```
(function($){

    $.fn.colorbox.settings.popover = false;

    $.fn.colorbox.myPublicMethod = function(abc){
        // how can i read the popover value here 
        if(popover){
           //somecode
        }
    }
})(jQuery); 
```

# c# - 带点和空格的十进制数的正则表达式

> ID：14810376
> 
> 赞同：0
> 
> 时间：2013-02-11T10:34:40.027
> 
> 标签：c#, regex

有人可以帮我在 c# 中找到一个正则表达式来检查该行是否以十进制数、点和空格开头？

```
"1\. "
"24\. "
"42.5\. "
"2000.18\. "
"35401.5\. " 
```

我试过：

```
^\d+\.+ 
^[1-9]*([1-9]|0)?(\.[0-9]+)
[^a-zA-Z0-9\s] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:40:50.033

这应该这样做：

```
^\d+(\.\d+)?\.\s$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:39:43.183

> 检查该行是否以十进制数、点和空格开头

```
 ^\d+(\.\d+)?\.\s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:39:46.897

这应该有效：

`^\d+(\.\d+)?\.\s`

或者，如果`".1"`分类为十进制数：

`^\d*\.?\d+\.\s`

或者，如果`"1."`分类为十进制数：

`^\d+\.?\d*\.\s`

或者，如果两者都`".1"`归类`"1."`为十进制数：

`^(\d+\.?|\d*\.\d+)\.\s`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T10:40:48.140

这应该有效，请尝试：

```
 (\d+\.\s)$ 
```

# c# - XmlReader 返回对象列表

> ID：14810377
> 
> 赞同：1
> 
> 时间：2013-02-11T10:34:42.687
> 
> 标签：c#, xml

嘿，我很难“重建”（阅读）我的对象。我的结构很简单：

```
groupName<--object  
name<--prop  
addres<--prop  
phone<--prop 
```

我怎样才能将它重建回相同的结构？

这是我将其写入 xml 的方式

```
 public override void Save(PhoneBook pb)
{
    using (XmlWriter writer = XmlWriter.Create(path))
    {
        writer.WriteStartDocument();
        writer.WriteStartElement("Group");

        foreach (PhoneBookGroup group in pb.Items)
        {
            writer.WriteStartElement("GroupName");

            writer.WriteElementString("GroupName", group.GroupName.ToString());
            foreach (Contect contect in group.Items)
            {
                writer.WriteStartElement("Addres", contect.Addres.ToString());
                writer.WriteStartElement("Number", contect.Number.ToString());
                writer.WriteStartElement("Name", contect.Name.ToString());
            }

            writer.WriteEndElement();
        }

        writer.WriteEndElement();
        writer.WriteEndDocument();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:05:51.857

**使用`XmlSerializer`**, 当然对于第一个版本，因为它对代码来说是微不足道的。*如果您的老板在看到序列化版本更简单且不易出错之后*想要它不同，您应该尝试说服他否则 - 工作的一部分不仅仅是按照您所说的去做，而是至少提供诚实的建议。除非这应该是一次学习经历，否则你的老板是*错*的——这很好也很正常，但你至少应该在按照他说的做之前*尽量*节省时间和金钱。他可能只是不知道其他选择。

**您的代码示例存在错误**这一事实突出了手动方法的问题- 您可能是指`writer.WriteElementString("Number",...`而不是`WriteStartElement("Number",...`. 使用更结构化的方法更安全、更简单。

如果您*确实*需要阅读原始 xml，**我建议您使用`XDocument`类**而不是`XmlReader`阅读您的文档和 linq to xml 以提取相关位。这*仍然*比 更简单`XmlReader`，同时保留了手写代码的全部灵活性（只是慢了一点）。如果您坚持`XmlReader`解决方案（请注意，这没有技术原因），那么您应该先尝试编写自己的解决方案 - 将您的尝试包含在您的问题中，以便我们可以看到您尝试了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:52:50.687

在查看了您的 xml 输出后，我会认真考虑更改您的架构，因为您的 Save 函数的输出会创建结构非常奇怪的 xml，我认为这是您努力重建它的原因。当前输出看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<Group>
  <GroupName>
    <GroupName>groupName</GroupName>
     <Addres xmlns="addy">
       <Number xmlns="0123456789">
        <Name xmlns="Henry">
          <Addres xmlns="address2">
            <Number xmlns="9876543210">
              <Name xmlns="Dave" />
              <GroupName>
                <GroupName>secondGroup</GroupName>
                <Addres xmlns="fleet">
                  <Number xmlns="0123456789">
                    <Name xmlns="Me" />
                  </Number>
                </Addres>
              </GroupName>
            </Number>
          </Addres>
        </Name>
      </Number>
    </Addres>
  </GroupName>
</Group> 
```

话虽如此，生成的 xml 不是不可处理的，可以使用下面的方法读回对象。我从您的 Save 代码中唯一假设的是，有某种方法可以从字符串获取 GroupName 对象（因为您使用 ToString 方法将值获取到 xml 中）。在我的测试中，我使用隐式转换运算符实现了该对象，如下所示。

```
class GroupName
{
    public string Name { get; set; }

    public override string ToString()
    {
        return this.Name;
    }

    // Specific conversion from string to GroupName object
    public static implicit operator GroupName(string s)
    {
        return new GroupName() { Name = s };
    }
}

public PhoneBook Rebuild()
{
    using (XmlReader reader = XmlReader.Create(path))
    {
        // read to the start of the xml
        reader.MoveToContent();

        // create the return object
        PhoneBook returnObject = new PhoneBook();
        returnObject.Items = new List<PhoneBookGroup>();

        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element)
            {
                // read each GroupName Node as a separate node collection
                if (reader.Name == "GroupName")
                {
                    // This is the root node of the groups
                    PhoneBookGroup grp = null;
                    Contact currentContact = null;

                    // loop the reader from this starting node
                    while (reader.Read())
                    {
                        if (reader.NodeType == XmlNodeType.Element)
                        {
                            switch (reader.Name)
                            {
                                case "GroupName":
                                    if (grp == null)
                                    {
                                        grp = new PhoneBookGroup();
                                        returnObject.Items.Add(grp);
                                        // must implement an implicit operator between string and GroupName object
                                        grp.Name = (GroupName)reader.ReadElementString();
                                    }
                                    else
                                    {
                                        // start of a new group, so null what we have so far and start again
                                        grp = null;
                                    }
                                    break;
                                case "Addres":
                                    // Address is the start node for a contact so create a new contact and start filling it
                                    currentContact = new Contact();
                                    if (grp.Items == null)
                                    {
                                        grp.Items = new List<Contact>();
                                    }
                                    grp.Items.Add(currentContact);
                                    // due to the way the xml is being written the value is held as the namespace !!!
                                    currentContact.Address = reader.NamespaceURI;
                                    break;
                                case "Number":
                                    // due to the way the xml is being written the value is held as the namespace !!!
                                    currentContact.Phone = reader.NamespaceURI;
                                    break;
                                case "Name":
                                    // due to the way the xml is being written the value is held as the namespace !!!
                                    currentContact.Name = reader.NamespaceURI;
                                    break;
                                default:
                                    break;
                            }
                        }
                    }
                }
            }
        }

        return returnObject;
} 
```

# c++ - 在结构的 std::vector 中查找

> ID：14810380
> 
> 赞同：2
> 
> 时间：2013-02-11T10:34:56.897
> 
> 标签：c++, if-statement, find, stdvector

我有：

```
struct MyStruct
{
   char* name;
   int* somethingElse;
}; 
```

我需要找到`std::vector<MyStruct*>`一个元素（通过使用`std::find_if`），它`name`是`"XYZ"`......但是...... `Predicate`（`std::find_if`如果我设法正确理解它）是一个普通函数，它接受一个`MyStruct`指针，我不知道我可以在其中指定`"XYZ"`要在比较中使用的额外值。

那么，我该如何使用`std::find_if`或达到这个目的呢？（显然，寻找一个好的解决方案，而不是全局变量，或者只是遍历列表，....）

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:39:46.350

您可以为此使用仿函数（希望我没有出错，因为我在浏览器中输入了它）：

```
class finder
{
     const char* name;
public:
    finder(const char* _name): name(_name) {}

    bool operator()(MyStruct* elem) {return strcmp(elem->name, name) == 0;}
};

finder f("sample");
std::find_if(myvector.begin(), myvector.end(), f); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T10:42:41.030

如果您使用 C++11 和 lambda：

```
 std::vector<MyStruct> mystructus;
 std::find_if(mystructus.begin(), mystructus.end(), 
             [](const MyStruct& ms){ return ms.name == std::string("XYZ"); } ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:40:24.067

你有两个选择，要么使用函子，要么使用 lamdas。

使用仿函数，您可以创建一个新类（或结构），其构造函数采用您要搜索的字符串，然后它有一个由以下`operator()`方法调用的函数`std::find_if`：

```
class my_finder
{
    std::string search;

public:
    my_finder(const std::string& str)
        : search(str)
    {}

    bool operator()(const MyStruct* my_struct) const
        { return search == my_struct->name; }
};

// ...

std::find_if(std::begin(...), std::end(...), my_finder("XYZ")); 
```

第二个使用 lambdas 的代码更少，但需要可以处理[C++11 lambdas](http://en.wikipedia.org/wiki/C%2B%2B11#Lambda_functions_and_expressions)的最新版本的编译器：

```
std::find_if(std::begin(...), std::end(...), [](const MyStruct* my_struct)
    { return std::string("XYZ") == my_struct->name; }); 
```

* * *

最后一个例子甚至可以进一步推广：

```
using namespace std::placeholders;  // For `_1` used below in `std::bind`

// Declare a "finder" function, to find your structure
auto finder = [](const MyStruct* my_struct, const std::string& to_find) {
    return to_find == my_struct->name;
};

auto xyz = std::find_if(std::begin(...), std::end(...), std::bind(finder, _1, "XYZ"));
auto abc = std::find_if(std::begin(...), std::end(...), std::bind(finder, _1, "ABC")); 
```

这样 lambda 可以被重用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T10:38:57.337

`Predicate`是任何东西，可以将运算符`()`应用于它（使用预期的参数并返回可转换为 bool 的东西）。指向函数的指针就是这样，但定义 . 的对象也是如此`operator()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T10:40:15.407

您需要提供这样的谓词：

```
struct Comparator
{
    Comparator(const char* find) : m_find(find){}
    bool operator()(MyStruct* p) const
    {
        return strcmp(p->name, m_find) == 0;
    }

    const char* m_find;
}; 
```

然后你可以`std::find_if`这样：

```
vector<MyStruct*>::iterator iter = std::find_if(vec.begin(), vec.end(), Comparator("XYZ"));
 if(iter != vec.end())
 {
     MyStruct* p = *iter;
 } 
```

或者，如果您的编译器支持 C++11，您可以使用 lambdas 并摆脱谓词仿函数：

```
auto it = std::find_if(vec.begin(), vec.end(), [](MyStruct* p) { return strcmp(p->name, "XYZ") == 0;}); 
```

# supersized - 超大的 fit_always ？

> ID：14810381
> 
> 赞同：1
> 
> 时间：2013-02-11T10:34:59.143
> 
> 标签：supersized

我刚刚在我的新网站上设置了超大，打算将其用作背景。（不是幻灯片）

但是，我似乎无法让它适应始终。我不确定我是否更改了正确的设置。

```
 /* Default Options
----------------------------*/
$.supersized.defaultOptions = {

    // Functionality
    start_slide             :   1,          // Start slide (0 is random)
    new_window              :   1,          // Image links open in new window/tab
    image_protect           :   1,          // Disables image dragging and right click with Javascript

    // Size & Position                         
    min_width               :   0,          // Min width allowed (in pixels)
    min_height              :   0,          // Min height allowed (in pixels)
    vertical_center         :   1,          // Vertically center background
    horizontal_center       :   1,          // Horizontally center background
    fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
    fit_portrait            :   1,          // Portrait images will not exceed browser height
    fit_landscape           :   0,          // Landscape images will not exceed browser width

}; 
```

我试过调整 0 & 1 变量。但我不是 100% 确定这是正确的地方，因为似乎没有任何改变。??

我也遇到过这个[Fit_Always 网站](http://devblog.labfiftyfive.com/supersized-jquery-plugin-fit-always-per-image/)

使用此代码

```
 {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/wojno-1.jpg', fit_always: true} 
```

所以我什至尝试将 fit_always: true 等放在图像链接之后，但随后图像无法加载。

网站是 www.amberroom_salon.co.uk

谢谢

# dozer - 始终将 null 对象映射到 null

> ID：14810392
> 
> 赞同：4
> 
> 时间：2013-02-11T10:35:45.680
> 
> 标签：dozer

我正在寻找一种将每个为 null 的对象映射到 null 而不是`"org.dozer.MappingException: Source object must not be null"`错误的方法。我不想枚举每个类并说 null 映射到 null，我想将此指定为一般规则。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:02:58.357

这是一个通用异常，表示您不应将*null*对象作为顶级 bean 传递给*mapper.map(src, dest)*方法。因此，在调用 Dozer 之前进行警戒检查应该会有所帮助。

```
if (src == null) return null;
return dozer.map(src, dest); 
```

此外，*'map-null'*策略默认启用，但它仅适用于要映射的 bean 内的元素（不是顶级）。`'user.id'`因此，如果它是空值，Dozer 将正确映射。在下一个版本中，将有可能在全局级别上应用*“map-null”*，而无需指定每个类。但是，这只会有助于禁用空映射，因为它默认启用。

# android - 从首选项屏幕启动活动（在 xml 文件中定义的意图）

> ID：14810393
> 
> 赞同：16
> 
> 时间：2013-02-11T10:35:46.513
> 
> 标签：android, android-intent, android-activity, android-preferences

在我的偏好文件中，我去这个

```
 <PreferenceCategory android:title="Title" >
        <Preference android:title="title" >
    <intent android:action="com.my.package.MainActivity" 
            />
</Preference>
    </PreferenceCategory> 
```

活动是在清单文件中创建的，但我仍然得到

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.my.package.MainActivity } 
```

如何从首选项屏幕开始活动？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-05T15:08:04.930

我有同样的问题，但我在 stackoverflow 上搜索的解决方案都没有解决我的 activitynotfound 异常。

这是我从[这里](http://www.coderanch.com/t/543114/Android/Mobile/Launching-Activity-Preferences)找到的工作解决方案：

```
 <PreferenceScreen  
                android:title="@string/title_intent_preference"  
                android:summary="@string/summary_intent_preference">  

            <intent android:action="your.action.string"/>  

 </PreferenceScreen> 
```

在 manifest.xml 中的活动中设置意图过滤器

```
 <activity ...>  
            <intent-filter>  
                <action android:name="your.action.string"/>  
                <category android:name="android.intent.category.DEFAULT" />  
            </intent-filter>  
</activity> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-02T23:35:50.863

这不是从 xml 开始意图的正确方法。该`android:action`字段不适用于您尝试开始的活动的名称；它描述了另一个活动可以提供的意图过滤器的动作（例如`android.intent.action.VIEW`或）。`android.intent.action.EDIT`

请参阅此答案以正确使用`<intent`>、android:action 等：[https ://stackoverflow.com/a/3751306/582004](https://stackoverflow.com/a/3751306/582004)

确保在您的 AndroidManifest.xml 中，您的活动包含一个`<intent-filter`> 和`<action`您在 PreferenceActivity 中请求的 > （在引用的答案中，这是`android.intent.action.VIEW`）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-12T12:13:04.413

尝试这个

```
 <intent android:targetPackage="your.package"
 android:targetClass="your.package.yourMainClassName"/> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-06T10:57:09.377

在您的清单中：

这是名为 [your package].MainActivity 的活动的定义。

```
<activity android:name=".MainActivity">
 <intent-filter>
      <action android:name="example.action.ACTION_MAIN_ACTIVITY" />
      <category android:name="android.intent.category.DEFAULT" />
</intent-filter>
</activity> 
```

另外，尝试使用 PreferenceScreen：

```
<PreferenceScreen android:title="@string/my_location_settings">
    <intent android:action="example.action.ACTION_MAIN_ACTIVITY">
    </intent>
</PreferenceScreen> 
```

有关更多详细信息，请参阅此链接... [从preferences.xml 开始活动](https://stackoverflow.com/questions/4415241/starting-an-activity-from-preferences-xml)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-02T07:20:12.687

您应该在首选项 xml 中的意图声明中执行以下操作：

```
<intent android:targetPackage="abc.def.efg"
 android:targetClass="abc.def.efg.hig.yourClassName"/> 
```

**注意：** `targetPackage`应该与标签`package`内声明的属性相同。这有时令人困惑，所以请再读一遍。`manifest``AndroidManifest.xml`

所以等价`AndroidManifest.xml`的会有这样的声明：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="abc.def.efg">
<application>
   ....
    <activity android:name=".hig.yourClassName"/>
</application>
</manifest> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-23T13:01:48.367

要从首选项屏幕开始活动，您只需修改您的首选项 XML，例如

```
<Preference
    app:key="your_key"
    app:title="@string/title"
    app:summary="@string/summary">

    <intent
        android:targetPackage="your.package"
        android:targetClass="your.package.ActivityClass"/>
</Preference> 
```

或者，如果您需要传递操作，只需将操作字符串放在意图属性中，例如

```
<Preference
    app:key="your_key"
    app:title="@string/title"
    app:summary="@string/summary">

    <intent
        android:targetPackage="your.package"
        android:targetClass="your.package.ActivityClass"
        android:action="your.package.ACTION"/>
</Preference> 
```

# php - PHP 表单重定向

> ID：14810399
> 
> 赞同：-3
> 
> 时间：2013-02-11T10:36:07.520
> 
> 标签：php, html, forms, redirect

在提交表单后，我需要一种简单的方法来重定向到感谢页面。

PHP：

```
<?php $name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "email@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!"; 
?> 
```

我不想更改的 HTML：

```
<form action="mail.php" method="POST" autocomplete="on"></br>
    <p>Name:</p><input type="text" name="Name"  size="20"></br>
    <p>Email:</p><input type="text" name="email"  size="20"></br>
    <p>Message:</p>
    <textarea id="styled" type="textarea" name="message" form="input></textarea></br>
    <pre><input type="submit" value="Send"><input type="reset" value="Clear"></pre>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:37:43.177

您可以使用以下代码。您可以使用简单的 PHP 脚本将用户从他们输入的页面重定向到不同的网页。使用[标题](http://php.net/manual/en/function.header.php)。

```
<?php
  //your code goes here -> mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
  header( 'Location: http://www.yoursite.com/new_page.html' ) ;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:37:58.140

你可以试试 header("location: next_page.php"); 请注意，在此之前无法将任何内容打印到浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:37:22.140

采用`header`

```
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
header('Location : path_to_thank_you_page');
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T10:38:30.953

在 mail.php 的末尾添加一个标题，将您重定向到感谢页面。例子

```
header("Location: thankyou.php"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T10:39:52.070

采用`header(Location:"yorpage".php);`

给出文件的相对路径。不要在 header 语句之前添加任何 php 语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-24T14:07:54.217

您可以在 index.php 中重命名您的 index.html。然后在 index.php 中包含 mail.php。在 index.php 上提交重定向后

```
<?php include('mail.php'); ?>

<form action="<?= $_SERVER['PHP_SELF'];?>" method="POST" autocomplete="on"></br> 
```

# r - 如何保存在闪亮的应用程序中制作的图

> ID：14810409
> 
> 赞同：93
> 
> 时间：2013-02-11T10:36:30.170
> 
> 标签：r, ggplot2, shiny

我试图弄清楚如何使用 downloadButton 来保存一个有光泽的情节。包中的示例演示`downloadButton/downloadHandler`如何保存 .csv。我将在此基础上制作一个可重现的示例。

为了`ui.R`

```
shinyUI(pageWithSidebar(
  headerPanel('Downloading Data'),
  sidebarPanel(
selectInput("dataset", "Choose a dataset:", 
            choices = c("rock", "pressure", "cars")),
    downloadButton('downloadData', 'Download Data'),
    downloadButton('downloadPlot', 'Download Plot')
  ),
  mainPanel(
    plotOutput('plot')
  )
)) 
```

为了`server.R`

```
library(ggplot2)
shinyServer(function(input, output) {
  datasetInput <- reactive({
    switch(input$dataset,
           "rock" = rock,
           "pressure" = pressure,
           "cars" = cars)
  })

  plotInput <- reactive({
    df <- datasetInput()
    p <-ggplot(df, aes_string(x=names(df)[1], y=names(df)[2])) +
      geom_point()
  })

  output$plot <- renderPlot({
    print(plotInput())
  })

  output$downloadData <- downloadHandler(
    filename = function() { paste(input$dataset, '.csv', sep='') },
    content = function(file) {
      write.csv(datatasetInput(), file)
    }
  )
  output$downloadPlot <- downloadHandler(
    filename = function() { paste(input$dataset, '.png', sep='') },
    content = function(file) {
      ggsave(file,plotInput())
    }
  )
}) 
```

如果您正在回答这个问题，您可能对此很熟悉，但要使其正常工作，请将上述内容保存到单独的脚本中（`ui.R`并保存`server.R`到工作目录中的文件夹 ( `foo`) 中。要运行闪亮的应用程序，请运行`runApp("foo")`.

使用`ggsave`，我收到一条错误消息，指示`ggsave`无法使用该`filename`功能（我认为）。如果我使用标准图形设备（如下所示），则`Download Plot`可以正常工作，但不会写入图形。

任何让 downloadHandler 工作以编写情节的提示将不胜感激。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-04-06T22:54:29.483

不确定这个问题是否仍然有效，但它是在搜索“在闪亮的应用程序中保存绘图”时出现的第一个问题，所以我想快速添加如何让 ggsave 与原始问题的 downloadHandler 一起使用。

juba 建议的使用直接输出而不是 ggsave 的替代策略和 alexwhan 自己建议的替代策略都非常有效，这仅适用于那些绝对想在 downloadHandler 中使用 ggsave 的人）。

alexwhan 报告的问题是由 ggsave 尝试将文件扩展名匹配到正确的图形设备引起的。但是，临时文件没有扩展名，因此匹配失败。这可以通过在`ggsave`函数调用中专门设置设备来解决，就像在原始代码示例中一样（对于 png）：

```
output$downloadPlot <- downloadHandler(
    filename = function() { paste(input$dataset, '.png', sep='') },
    content = function(file) {
        device <- function(..., width, height) grDevices::png(..., width = width, height = height, res = 300, units = "in")
        ggsave(file, plot = plotInput(), device = device)
    }
) 
```

此调用基本上采用内部分配的函数`device`（您可以查看函数代码以查看 、 等的语法）。也许，理想情况下，可以指定文件扩展名（如果与文件名不同 - 就像这里临时文件的情况一样）作为参数，但此选项目前在.`png``ggsave``ggsave``jpg``pdf``ggsave``ggsave`

* * *

一个最小的独立工作示例：

```
library(shiny)
library(ggplot2)
runApp(list(
  ui = fluidPage(downloadButton('foo')),
  server = function(input, output) {
    plotInput = function() {
      qplot(speed, dist, data = cars)
    }
    output$foo = downloadHandler(
      filename = 'test.png',
      content = function(file) {
        device <- function(..., width, height) {
          grDevices::png(..., width = width, height = height,
                         res = 300, units = "in")
        }
        ggsave(file, plot = plotInput(), device = device)
      })
  }
))

sessionInfo()
# R version 3.1.1 (2014-07-10)
# Platform: x86_64-pc-linux-gnu (64-bit)
# 
# locale:
#  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
#  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
#  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
#  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
#  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
# [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
# 
# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base     
# 
# other attached packages:
# [1] ggplot2_1.0.0 shiny_0.10.1 
# 
# loaded via a namespace (and not attached):
#  [1] bitops_1.0-6     caTools_1.17     colorspace_1.2-4 digest_0.6.4    
#  [5] formatR_1.0      grid_3.1.1       gtable_0.1.2     htmltools_0.2.6 
#  [9] httpuv_1.3.0     labeling_0.2     MASS_7.3-34      munsell_0.4.2   
# [13] plyr_1.8.1       proto_0.3-10     Rcpp_0.11.2      reshape2_1.4    
# [17] RJSONIO_1.3-0    scales_0.2.4     stringr_0.6.2    tools_3.1.1     
# [21] xtable_1.7-3 
```

# 更新

从 ggplot2 版本 2.0.0 开始，该`ggsave`函数支持`device`参数的字符输入，这意味着现在可以通过直接调用来保存由 downloadHandler 创建的临时文件，方法是`ggsave`指定要使用的扩展名应该是 eg `"pdf"`（而不是传递在设备功能中）。这将上面的示例简化为以下示例

```
output$downloadPlot <- downloadHandler(
    filename = function() { paste(input$dataset, '.png', sep='') },
    content = function(file) {
        ggsave(file, plot = plotInput(), device = "png")
    }
) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-11T13:15:38.887

我没有设法使它与 一起工作`ggsave`，但是对它的标准调用`png()`似乎没问题。

我只更改了`output$downloadPlot`您`server.R`文件的一部分：

```
 output$downloadPlot <- downloadHandler(
    filename = function() { paste(input$dataset, '.png', sep='') },
    content = function(file) {
      png(file)
      print(plotInput())
      dev.off()
    }) 
```

请注意，我在使用 0.3 版本的 Shiny 时遇到了一些问题，但它适用于 Github 的最新版本：

```
library(devtools)
install_github("shiny","rstudio") 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-12T22:58:41.840

这是一个允许使用 ggsave 保存闪亮图的解决方案。它使用逻辑复选框和文本输入来调用`ggsave()`. 将此添加到`ui.R`里面的文件中`sidebarPanel`：

```
textInput('filename', "Filename"),
checkboxInput('savePlot', "Check to save") 
```

然后将其添加到`server.R`文件中，而不是当前的`output$plot`reactivePlot 函数：

```
output$plot <- reactivePlot(function() {
    name <- paste0(input$filename, ".png")
    if(input$savePlot) {
      ggsave(name, plotInput(), type="cairo-png")
    }
    else print(plotInput())
  }) 
```

然后，用户可以在文本框中键入所需的文件名（不带扩展名）并勾选复选框以保存在应用程序目录中。取消选中该框将再次打印该图。我确信有更简洁的方法可以做到这一点，但至少我现在可以在 Windows 中使用 ggsave 和 cairo 以获得更好的 png 图形。

请添加您可能有的任何建议。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-07-30T05:08:14.457

这是旧的，但当有人用谷歌搜索“R shiny save ggplot”时仍然是最热门的，所以我将提供另一个解决方法。非常简单...在显示图形的同一函数中调用 ggsave，这会将图形保存为服务器上的文件。

```
output$plot <- renderPlot({
    ggsave("plot.pdf", plotInput())
    plotInput()
}) 
```

然后，使用 downloadHandler 和 use`file.copy()`将数据从现有文件写入“文件”参数。

```
output$dndPlot <- downloadHandler(
    filename = function() {
        "plot.pdf"
    },
    content = function(file) {
        file.copy("plot.pdf", file, overwrite=TRUE)
    }
) 
```

为我工作。

# encryption - 加密初始化向量失败

> ID：14810411
> 
> 赞同：1
> 
> 时间：2013-02-11T10:36:35.947
> 
> 标签：encryption, aes, pascal, initialization-vector

我面临一个奇怪的问题，我正在使用 cfb 模式的 aes 加密。进展顺利，我已经用固定 IV 测试了加密。但是当我使用随机 IV 时，问题就出现了。我去详细说。

```
function Random16DigitsString: AnsiString;
var
  i: Integer; c0: byte;
begin
  Randomize;
  c0:=ord('0');
  SetLength(Result, 16);
  Result[1] := char(c0+Random(9)+1);
  for i:=2 to 16 do Result[i] := char(c0+Random(10));
end; 
```

上述代码的示例输出为 8229343736510872

当我在加密阶段使用此功能时，它可以，但是当我使用相同的密钥解密文件时，输出是垃圾。但是当我在加密阶段硬编码这个密钥时，解密成功。

我错过了什么。我将使用简单的随机数生成器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:02:47.253

我正在使用 AnsiString 来存储上下文的密钥。这是真正的问题，因为在帕斯卡 AnsiString 不是单字节。当@CodeInChaos 专注于 AnsiString 时，我检查并找到了它。所以我换了

```
Key: AnsiString 
```

到

```
Key : Array [0..32] of Char; 
```

它成功地工作了。

谢谢@CodeInChaos。

# java - java中的Socket编程会在互联网上工作吗？

> ID：14810417
> 
> 赞同：2
> 
> 时间：2013-02-11T10:36:49.027
> 
> 标签：java

我正在尝试使用 Java 套接字将文件从一台计算机发送到另一台计算机。它在本地局域网上成功运行，但不能在互联网上运行。谁能告诉我问题是什么以及我应该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:40:09.330

*如果途中*的设备允许，它将正常工作。你能访问远程机器上的端口吗？尝试使用

```
$ telnet remotehost remoteport 
```

看看是否连接。您可能还想通过[traceroute](http://en.wikipedia.org/wiki/Traceroute)或[tracert检查路由](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/tracert.mspx?mfr=true)

# c# - 将 char 隐式转换为整数有什么好处？

> ID：14810419
> 
> 赞同：2
> 
> 时间：2013-02-11T10:36:51.867
> 
> 标签：c#, .net, casting, char, implicit-conversion

只是出于好奇...

我发现使用 Char 类型会产生令人讨厌的副作用，所以我想知道为什么设计师选择了类似的行为。由于隐式转换，以下内容是有效的：

```
int x = 'A'; 
```

但是，以下内容让我有点困惑，因为容易导致误解：

```
int y = 'P' + 'Q'; 
```

既然一个字符串是由字符组成的，而字符串的“总和”会产生另一个字符串，为什么字符的“总和”应该给出不同的东西呢？

另一个更糟糕的：

```
string s1 = 'H' + "ello"; //yields "Hello"
string s2 = 'H' + 'e' + "llo";  //yields "173llo" 
```

所有这一切都是因为隐式转换。我想知道这样做有什么好处，而不是强迫用户明确地将字符“转换”为整数（反之亦然）。

也许是我的失明，但我看到了更多的缺点而不是好处。

顺便说一句，已经有一个与该主题相关的问题，但似乎没有给出正当理由，除了“他们决定如此”或“还不错”。

[C# 中的隐式类型转换](https://stackoverflow.com/questions/1503430/implicit-type-cast-in-c-sharp)

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:13:41.467

Basicly I see one benefit in here, and I do not belive that it is a bad design decision. Internally characters are integer numbers, either. The conversion between a number and an character, based on equivalence tables is called **encoding**.

However in .NET characters and strings are [unicode encoded](http://en.wikipedia.org/wiki/UTF-8). The first 128 characters in unicode are equal to the former [ASCII encoding](http://en.wikipedia.org/wiki/ASCII).

If you want to convert a string into a number (or back) this can be done pretty easy when you assume that characters are also numbers. Imagine something like this:

```
char c = '1';
int i = Convert.ToInt32(c); 
```

The offset between numerical characters and numerical representation is allways **0x30**. Internally it is now possible to write something like this:

```
int result = c - 0x30;

if (result < 0 || result > 9)
    throw new InvalidCastException(); 
```

Note that the example works for characters since 1 character can only hold 1 numerical literal (0 to 9). For strings you also need to multiply the index of the character with 10 and the result and add it to the overall result value.

Of course this is much like it works "under the hood". But for practice it is bad design to use the `operator+` (or minus) for strings or characters. This also has another reason. Imagine the following code:

```
string s1 = "Hello";
string s2 = " ";
string s3 = "World";

string helloWorld = s1 + s2 + s3; 
```

When calling the `operator+` the following is happening:

1.  Allocate memory for the length of string 1 plus the length of string 2.
2.  Copy string one to the front of the newly allocated array.
3.  Copy string two to the back of the newly allocated array.
4.  Return the new string's instance.

This will happen two times, so you will have a temporary string instance, stressing the garbage collector. Since this example is pretty simple it might not be much, but I also found strings like this many code samples:

```
string sql = "SELECT " + c1 + ", " + c2 + 
    " FROM " + table + 
    " WHERE " + c1 + " = " + condition + ";"; 
```

Maybe the compiler will optimize this code, but you cannot rely on him. In this case I would prefer a wrapper to `[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.110%29.aspx)`, or at least `[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format%28v=vs.110%29.aspx)` that internally uses the `StringBuilder`.

To come to a conclusion: Implicit conversion from characters to integers are usefull to simplify encoding, but you should not use plus or minus operators when it come's to build up strings or characters.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:21:28.697

尝试回答“为什么隐式提升到 32 位”部分：无论如何，CPU 在其寄存器中的 32 位或 64 位整数上运行。这意味着硬件会进行隐式提升。该语言尽量不抽象硬件太多。

也就是说，这可能很烦人。

# google-chrome-devtools - 在弹出窗口中打开 chrome 开发人员工具

> ID：14810423
> 
> 赞同：10
> 
> 时间：2013-02-11T10:37:03.710
> 
> 标签：google-chrome-devtools

是否可以在弹出窗口内（附加到）打开开发人员工具而不是分离？我目前正在处理一个带有弹出窗口的网站，需要调试 javascript，并且发现在弹出窗口和开发人员工具窗口之间切换非常烦人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-12T11:52:40.480

调试弹出窗口时，您可以将它们转换为选项卡。您可以通过 并选择选项来执行`right-clicking`此`title icon`操作`show as tab`。然后就可以`developer console`照常打开了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:44:22.710

开发人员工具的左侧有一个小按钮（在检查元素和清除控制台日志所在的行中），它​​看起来有点像两个重叠的矩形......工具提示应该是“取消停靠到单独的窗口”.. .

这是你的意思吗？

-编辑-只是更好地重新阅读这个问题......我想这不是你的意思...... :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-17T06:49:47.527

1.  请按住小按钮几秒钟。之后，您会在同一位置找到另一个图标（或按钮）。
2.  请松开鼠标按钮。您可以看到开发人员工具的弹出窗口。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-04-28T08:00:47.460

只需在弹出窗口处于焦点时按下`⌥ + cmd + I`，开发工具将在新的弹出窗口中打开

# javascript - ReplaceWith 并在 jQuery 中提醒消息

> ID：14810426
> 
> 赞同：1
> 
> 时间：2013-02-11T10:37:18.510
> 
> 标签：javascript, jquery

我想用其他代码替换一个代码，点击新代码后得到警报，但不要在我的代码中工作警报。如何解决？

**演示：http:** [//jsfiddle.net/9Ggsn/](http://jsfiddle.net/9Ggsn/)

**html:**

```
<select>
    <option>select 1</option>
    <option>select 2</option>
    <option>select 3</option>
</select>
<div class="dfg"><a href="#">Test</a></div> 
```

**jQuery：**

```
$('select').on('change', function(){
    //alert('ook');
    $('.dfg a').replaceWith('<a href="#" class="pon">Link</a>')
});
$('.pon').on('click', 'a', function(){
    alert('ook');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:38:39.533

那是因为在您的标记`a.pon`中没有类的父元素`pon`，事件应该从元素或文档对象的静态父元素之一委托。

改变：

```
$('.pon').on('click', 'a', function(){ 
```

到：

```
$(document).on('click', 'a.pon', function(){ 
```

或者：

```
$('.dfg').on('click', 'a.pon', function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:39:50.460

试试这个：

```
$(document).on('click', '.pon', function(){
    alert('ook');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:42:21.350

您正在从 DOM 中删除一个元素，因此您必须重新绑定。

```
$('select').on('change', function(){
        //alert('ook');
        $('.dfg a').replaceWith('<a href="#" class="pon">Link</a>');
        BindLink();
    });

function BindLink(){
    console.log("in link");
    $('.pon').on('click', function(e){
        e.preventDefault();
        alert('ook');
    });
} 
```

看到这个小提琴[小提琴更新](http://jsfiddle.net/9Ggsn/4/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T10:41:05.773

```
$('select').on('change', function(){
    //alert('ook');
    $('.dfg a').replaceWith('<a href="#" class="pon">Link</a>')
});
$('body').delegate('.pon','click', function(){
    alert('ook');
}); 
```

# javascript - 是否有任何浏览器实现了 NAT 穿越？

> ID：14810433
> 
> 赞同：0
> 
> 时间：2013-02-11T10:37:44.110
> 
> 标签：javascript, nat, webrtc

有没有浏览器实现NAT穿越？我需要 NAT 遍历来建立浏览器之间的对等连接。如何使用 NAT 建立对等连接，对于工作 NAT 遍历，我应该安装类似 ICE 框架的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:21:31.180

实现 WebRTC 的浏览器已经内置了 NAT-T 机制，使用 STUN/TURN 服务器并使用 ICE 建立会话。Chrome 和 Firefox 是实现了这种机制的两种浏览器，您[可以使用 WebRTC API](http://www.webrtc.org/)创建和配置 PeerConnection 来处理它们。

# reporting-services - SSRS 报告查看器控件显示问题

> ID：14810434
> 
> 赞同：2
> 
> 时间：2013-02-11T10:37:45.003
> 
> 标签：reporting-services, report-viewer2010, reportbuilder3.0

我有一个现在通过 ASPX 报表查看器控件 (VS2010) 显示的报表。它以前通过 Report Builder 3 显示。

浏览器是一样的，IE8，但是报告现在不显示垂直文本

控件是否存在问题，是否有修复或解决方法？现在的报告看起来很糟糕！

谢谢

# php - 在 EXCEL 中打开创建的文件时出现 PHPExcel 错误

> ID：14810439
> 
> 赞同：0
> 
> 时间：2013-02-11T10:37:53.450
> 
> 标签：php, phpexcel

我用一个使用 PHPExcel 库的 php 脚本创建了一个简单的 .xlsx 文件。但是当我想在 Win7 上的 MS Excel 2010 中打开它时，我收到一条错误消息，指出文件格式错误或文件已损坏。从互联网上尝试了几种可能的解决方案，但对我没有任何帮助。

公共函数 createControllingFile($suffix){ $this->PHPExcel = new PHPExcel();

```
 $year = date('y');

    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Cache-Control: max-age=0');

    $this->objWriter = PHPExcel_IOFactory::createWriter($this->PHPExcel, 'excel5');

    $this->objWriter->save('tmp/controlling_'.$year.'_'.$suffix.'.xlsx');

    $_SESSION['counter'] = 0;

    exit();
} 
```

希望你能帮助我，会话的事情是计算一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:47:22.773

```
$this->objWriter->save('tmp/controlling_'.$year.'_'.$suffix.'.xlsx'); 
```

保存到服务器文件系统上的文件中，并且没有任何内容发送到客户端浏览器。

如果要发送到客户端的浏览器，请将该行更改为：

```
$this->objWriter->save('php://output'); 
```

就像在`01simple-download-xlsx.php`/Tests 或 /Examples 目录中一样

# c# - 找到复杂度最小的数组中的第二个最大数

> ID：14810444
> 
> 赞同：7
> 
> 时间：2013-02-11T10:38:19.153
> 
> 标签：c#, .net

试图用谷歌搜索它，但没有运气。如何在**复杂度最小**的数组中找到第二个最大数？

代码或想法会有很大帮助。

我可以遍历一个数组并在此之后查找最大数，我有最大数，然后再次循环该数组以以相同的方式找到第二个。

但可以肯定的是，它没有效率。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T10:41:06.263

[您可以对数组进行排序并选择第二个索引处的项目，但是下面的 O(n) 循环会快得多。](https://stackoverflow.com/questions/1811846/how-to-get-the-second-highest-number-in-an-array-in-visual-c)

```
int[] myArray = new int[] { 0, 1, 2, 3, 13, 8, 5 };
int largest = int.MinValue;
int second = int.MinValue;
foreach (int i in myArray)
{
 if (i > largest)
 {
  second = largest;
  largest = i;
 }
else if (i > second)
    second = i;
}

System.Console.WriteLine(second); 
```

**或者**

试试这个（使用 LINQ）：

```
int secondHighest = (from number in test
                             orderby number descending
                             select number).Distinct().Skip(1).First() 
```

[如何在 Visual C# 中获取数组中的第二大数字？](https://stackoverflow.com/questions/1811846/how-to-get-the-second-highest-number-in-an-array-in-visual-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T00:12:57.373

```
public static int F(int[] array)
{
    array = array.OrderByDescending(c => c).Distinct().ToArray();
    switch (array.Count())
    {
        case 0:
            return -1;
        case 1:
            return array[0];
    }
    return array[1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T16:49:45.773

**用 C# 回答：**

```
static void Main(string[] args)
        {
            //let us define array and vars
            var arr = new int[]{ 100, -3, 95,100,95, 177,-5,-4,177,101 };

            int biggest =0, secondBiggest=0;
            for (int i = 0; i < arr.Length; ++i)
                {
                int arrItem = arr[i];
                if(arrItem > biggest)
                {
                    secondBiggest = biggest; //always store the prev value of biggest 
                                             //to second biggest...
                    biggest = arrItem;
                 }
                else if (arrItem > secondBiggest && arrItem < biggest) //if in our 
                 //iteration we will find a number that is bigger than secondBiggest and smaller than biggest 
                   secondBiggest = arrItem;
            }

            Console.WriteLine($"Biggest Number:{biggest}, SecondBiggestNumber: 
                              {secondBiggest}");
            Console.ReadLine(); //make program wait
        } 
```

输出：最大数：177，次大数：101

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T04:49:44.193

```
 static void Main(string[] args)
    {
        int[] myArray = new int[] { 0, 11, 2, 15, 16, 8, 16 ,8,15};
        int Smallest = myArray.Min();
        int Largest = myArray.Max();
        foreach (int i in myArray)
        {
            if(i>Smallest && i<Largest)
            {
                Smallest=i;
            }
        }
        System.Console.WriteLine(Smallest);
        Console.ReadLine();   
    } 
```

即使您在数组中具有项目的声誉，这也将起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-29T06:25:32.940

```
 int[] arr = {-10, -3, -3, -6};
           int h = int.MinValue, m = int.MinValue;

                    foreach (var t in arr)
                    {
                        if (t == h || t == m)
                            continue;
                        if (t > h)
                        {                            
                            m = h;
                            h = t;
                        }
                        else if(t > m )
                        {                            
                            m = t;
                        }

                    }

            Console.WriteLine("High: {0} 2nd High: {1}", h, m);
                   //or,
            m = arr.OrderByDescending(i => i).Distinct().Skip(1).First();

            Console.WriteLine("High: {0} 2nd High: {1}", h, m); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-31T20:43:07.397

```
/* we can use recursion */
var counter = 0;
     findSecondMax = (arr)=> {

        let max = Math.max(...arr);
        counter++;
        return counter == 1 ? findSecondMax(arr.slice(0,arr.indexOf(max)).concat(arr.slice(arr.indexOf(max)+1))) : max;
    }

    console.log(findSecondMax([1,5,2,3,0])) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-23T07:31:00.660

```
static void Main(string[] args){
    int[] arr = new int[5];
    int i, j,k;
    Console.WriteLine("Enter Array");

    for (i = 0; i < 5; i++) {
        Console.Write("element - {0} : ", i);
        arr[i] = Convert.ToInt32(Console.ReadLine());
    }

    Console.Write("\nElements in array are: ");
    j=arr[0];
    k=j;

    for (i = 1; i < 5; i++) {
        if (j < arr[i])
        {
            if(j>k)
            {
                k=j;
            }
            j=arr[i];
        }  
    }

    Console.WriteLine("First Greatest element: "+ j);
    Console.WriteLine("Second Greatest element: "+ k);
    Console.Write("\n");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-03T07:49:33.020

```
int max = 0;
int secondmax = 0;
int[] arr = { 2, 11, 15, 1, 7, 99, 6, 85, 4 };

for (int r = 0; r < arr.Length; r++)
{
    if (max < arr[r])
    {
        max = arr[r];
    }
}

for (int r = 0; r < arr.Length; r++)
{
    if (secondmax < arr[r] && arr[r] < max)
    {
        secondmax = arr[r];
    }
}

Console.WriteLine(max);
Console.WriteLine(secondmax);
Console.Read(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-16T18:16:27.993

**蟒蛇 36>=**

```
def sec_max(array: list) -> int:
_max_: int = max(array)
second: int = 0
for element in array:
    if second < element < _max_:
        second = element
    else:
        continue
return second 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-11T10:42:21.280

这不像你的结构是一棵树......它只是一个简单的数组，对吧？

最好的解决方案是对数组进行排序。并根据降序或升序，分别显示第二个或倒数第二个元素。

另一种选择是使用一些内置方法来获得初始最大值。弹出该元素，然后再次搜索最大值。不懂C#，所以不能直接给出代码。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-11T10:44:46.483

您想要对数字进行排序，然后只取第二大的数字。这是一个不考虑效率的片段：

```
var numbers = new int[] { 3, 5, 1, 5, 4 };
var result=numbers.OrderByDescending(x=>x).Distinct().Skip(1).First(); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-27T07:01:14.487

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int size;
            Console.WriteLine("Enter the size of array");
            size = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Enter the element of array");
            int[] arr = new int[size];
            for (int i = 0; i < size; i++)
            {
                arr[i] = Convert.ToInt32(Console.ReadLine());
            }
            int length = arr.Length;
            Program program = new Program();
            program.SeconadLargestValue(arr, length);
        }

        private void SeconadLargestValue(int[] arr, int length)
        {
            int maxValue = 0;
            int secondMaxValue = 0;
            for (int i = 0; i < length; i++)
            {
                if (arr[i] > maxValue)
                {
                    secondMaxValue = maxValue;
                    maxValue = arr[i];
                }
                else if(arr[i] > secondMaxValue)
                {
                    secondMaxValue = arr[i];
                }
            }
            Console.WriteLine("First Largest number :"+maxValue);
            Console.WriteLine("Second Largest number :"+secondMaxValue);
            Console.ReadLine();
        }   
    }
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-11-04T15:04:02.173

我正在提供 JavaScript 中的解决方案，它需要 o(n/2) 复杂度才能找到最高和第二高的数字。
这是有效的[提琴手链接](https://jsfiddle.net/rz0yx4xs/1/)

```
 var num=[1020215,2000,35,2,54546,456,2,2345,24,545,132,5469,25653,0,2315648978523];
var j=num.length-1;
var firstHighest=0,seoncdHighest=0;
num[0] >num[num.length-1]?(firstHighest=num[0],seoncdHighest=num[num.length-1]):(firstHighest=num[num.length-1],   seoncdHighest=num[0]);
j--;
for(var i=1;i<=num.length/2;i++,j--)
{
   if(num[i] < num[j] )
   {
          if(firstHighest < num[j]){
          seoncdHighest=firstHighest;
           firstHighest= num[j];
          }
           else if(seoncdHighest < num[j] ) {
               seoncdHighest= num[j];

           }
   }
   else {
       if(firstHighest < num[i])
       {
           seoncdHighest=firstHighest;
           firstHighest= num[i];

       }
       else if(seoncdHighest < num[i] ) {
            seoncdHighest= num[i];

       }
   }

} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-11-14T06:48:58.007

这还不错：

```
int[] myArray = new int[] { 0, 1, 2, 3, 13, 8, 5 };

var secondMax =
    myArray.Skip(2).Aggregate(
            myArray.Take(2).OrderByDescending(x => x).AsEnumerable(),
            (a, x) => a.Concat(new [] { x }).OrderByDescending(y => y).Take(2))
        .Skip(1)
        .First(); 
```

它的复杂性相当低，因为它最多只能对三个元素进行排序

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-11-28T07:11:46.463

我的解决方案如下。

```
 class Program
    {
      static void Main(string[] args)
        {
        Program pg = new Program();
        Console.WriteLine("*****************************Program to Find 2nd Highest and 2nd lowest from set of values.**************************");
        Console.WriteLine("Please enter the comma seperated numbers : ");
        string[] val = Console.ReadLine().Split(',');
        int[] inval = Array.ConvertAll(val, int.Parse); // Converts Array from one type to other in single line  or Following line
        // val.Select(int.Parse)
        Array.Sort(inval);
        Console.WriteLine("2nd Highest is : {0} \n 2nd Lowest is : {1}", pg.Return2ndHighest(inval), pg.Return2ndLowest(inval));
        Console.ReadLine();

        }

        //Method to get the 2nd lowest and 2nd highest from list of integers ex 1000,20,-10,40,100,200,400

        public  int Return2ndHighest(int[] values)
        {
           if (values.Length >= 2)
              return values[values.Length - 2];
           else
              return values[0];
         }

         public  int Return2ndLowest(int[] values)
         {
              if (values.Length > 2)
                  return values[1];
              else
                  return values[0];
          }

     } 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2013-02-11T10:41:04.313

对数组进行排序并取倒数第二个值？

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-09-11T21:25:05.883

```
 var result = (from elements in inputElements
    orderby elements descending
    select elements).Distinct().Skip(1).Take(1);
 return result.FirstOrDefault(); 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-11-04T17:19:44.140

```
namespace FindSecondLargestNumber
{
    class Program
    {
        static void Main(string[] args)
        {
            int max=0;
            int smax=0;
            int i;
            int[] a = new int[20];
            Console.WriteLine("enter the size of the array");
            int n = int.Parse(Console.ReadLine());
            Console.WriteLine("elements");
            for (i = 0; i < n; i++)
            {
                a[i] = int.Parse(Console.ReadLine());

            }
            for (i = 0; i < n; i++)
            {
                if ( a[i]>max)
                {
                    smax = max;
                    max= a[i];
                }
                else if(a[i]>smax)
                {
                    smax=a[i];
                }
            }
            Console.WriteLine("max:" + max);

            Console.WriteLine("second max:"+smax);
                Console.ReadLine();
        }
    }
} 
```

# c# - 我的绘制方法不绘制高度

> ID：14810445
> 
> 赞同：1
> 
> 时间：2013-02-11T10:38:19.423
> 
> 标签：c#

我有一个draw方法应该画出一个盒子，但我的问题是它只画出盒子的宽度，而不是高度。

这是一个代码片段：

```
class ColoredBox : Box
{
    protected ConsoleColor backColor;

    public ColoredBox(Point p, int width, int height, ConsoleColor backColor)
        : base(p, width, height)

    {
        this.backColor = backColor;
    }

    public virtual void Draw()
    {
        for (int j = 0; j < height; j++)
        {
            Console.SetCursorPosition(p.X, p.Y);
            Console.BackgroundColor = backColor;
            for (int i = 0; i <= width; i++)
                Console.Write(' ');
    }
} 
```

问题似乎是`Draw()`方法，我无法打印出来，那么我该如何解决这个简单的问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:57:08.490

`j`为下一行设置光标位置时，您没有使用。代码应为：

```
public virtual void Draw()
{
    for (int j = 0; j < height; j++)
    {
        Console.SetCursorPosition(p.X, p.Y + j);
        Console.BackgroundColor = backColor;
        for (int i = 0; i <= width; i++)
            Console.Write(' ');
    }
} 
```

# android - 如何在下一个视图中途翻转时消除白框？

> ID：14810446
> 
> 赞同：3
> 
> 时间：2013-02-11T10:38:19.597
> 
> 标签：android, webview, fragment, android-fragmentactivity, flipboard

iam 使用 Aphid-FlipView-Library 使用 webview 显示静态 html 页面。

但是在翻转时，（移动）从一页到另一页我得到一些白框，在第二页正常加载之后..

任何人都可以帮助我，如何删除那个闪光外观..

```
public class FlipTextViewFragment extends Fragment {
private FlipViewController flipView;
String[] urls = {"file:///android_asset/Introduction_print.html","file:///android_asset/introduction2.html"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    flipView = new FlipViewController(inflater.getContext(), FlipViewController.HORIZONTAL);
    flipView.setAdapter(new adp(getActivity().getApplicationContext()));
    return flipView;
}
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}
public void setText(String item) {
    flipView.setAdapter(new adp(getActivity().getApplicationContext()));
    }} 
```

那么我的适配器类就在这里：package com.example.flipwebview；

```
 public class adp extends BaseAdapter {
 String[] urls = {"file:///android_asset/Introduction_print.html","file///android_asset/introduction2.html"};
   Context con; 
public adp(Context applicationContext) {
    // TODO Auto-generated constructor stub
    con=applicationContext;
}
    @Override
public int getCount() {
    // TODO Auto-generated method stub
    return urls.length;
}
   @Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position; 
}
   @Override 
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}
    @Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    WebView wv=new WebView(con);
    wv.loadUrl(urls[position]);
return wv; 
}} 
```

通过使用我的代码，我可以翻阅多个 webviews，但我遇到的问题是，当我在翻页的中途看不到下一个视图时，它似乎是一个空白页，在我完全翻页后它被加载..这是关于那个的屏幕

![在此处输入图像描述](../Images/6797c14e0b722ce8603affd7e06ae072.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:18:08.173

`loadUrl`不是呈现本地 HTML 文件的最快方法。由于它们包含在您的应用程序中，您应该将它们的内容加载到`String`并使用`loadData`方法。

[http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

**编辑：**
还有一件事。您应该使用 convertView 而不是每次翻转时都创建新的 WebView。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    WebView webView = null;
    if (convertView == null)
    {
       webView = new WebView(con);
    } else {
       webView = (WebView) convertView;
    }

    webView.loadUrl(urls[position]);
    return webView; 
}} 
```

# mysql - 不理解 DBD::MySQL 属性“mysql_bind_type_guessing”的行为

> ID：14810447
> 
> 赞同：1
> 
> 时间：2013-02-11T10:38:20.410
> 
> 标签：mysql, perl, dbi

为什么`mysql_bind_type_guessing`启用时会出现此错误，为什么仅使用参数“e”而不使用参数“a”？

```
#!/usr/bin/env perl
use warnings;
use strict;
use 5.10.1;
use utf8;
use open qw(:utf8 :std);
use DBI;

my $user = '...';
my $passwd = '...';

my $dbh = DBI->connect( "DBI:mysql:dbname=information_schema", $user, $passwd, {
    PrintError => 0,
    RaiseError => 1,
} ) or die DBI->errstr;

my $db = 'my_test_db';
$dbh->do( "DROP DATABASE IF EXISTS $db" );
$dbh->do( "CREATE DATABASE $db" );
$dbh = DBI->connect( "DBI:mysql:dbname=$db", $user, $passwd, {
    PrintError => 0,
    RaiseError => 1,
    AutoCommit => 1,
    mysql_enable_utf8 => 1,
    mysql_bind_type_guessing => 1,
} ) or die DBI->errstr;

my $table = 'Abteilung';
$dbh->do( "CREATE TABLE IF NOT EXISTS $table (
AbtNr      INT NOT NULL,
Name       VARCHAR(30),
PRIMARY KEY(AbtNr)
)" );

my $sth = $dbh->prepare( "INSERT INTO $table ( AbtNr, Name ) VALUES ( ?, ? )" );
my $abteilung_values = [
    [ 1, 'EDV'        ],
    [ 2, 'Verwaltung' ],
    [ 3, 'Chefetage'  ],
];
for my $row ( @$abteilung_values ) {
    $sth->execute( @$row );
}

$sth = $dbh->prepare( "SELECT * FROM $table WHERE name REGEXP ?" );
$sth->execute( 'e' );
while ( my $row = $sth->fetchrow_arrayref() ) {
    say "@$row";
} 
```

* * *

```
mysql_bind_type_guessing enabled

execute argument 'e':
# DBD::mysql::st execute failed: Unknown column 'e' in 'where clause' at ./perl3.pl line 46.

execute argument 'a':
# 2 Verwaltung
# 3 Chefetage

mysql_bind_type_guessing disabled

execute argument 'e':
# 1 EDV
# 2 Verwaltung
# 3 Chefetage

execute argument 'a':
# 2 Verwaltung
# 3 Chefetage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:25:14.177

该参数`mysql_bind_type_guessing`试图猜测您的输入数据是否为数字。如果数据是数字，它不会引用它。

似乎对数字性的不充分检查导致它认为这`e`是一个数字（`e`可以是数字的一部分，例如`1.2e-3`）。

因为它没有被引用，所以 MySql 尝试将`e`其视为列名，因此出现错误。

如果我的猜测是正确的，我会认为它是`DBD::MySQL`.

**更新：** [确实，这是一个错误](https://rt.cpan.org/Public/Bug/Display.html?id=62458)。

# java - Swing 国际化 - 如何在运行时更新语言

> ID：14810454
> 
> 赞同：5
> 
> 时间：2013-02-11T10:38:45.823
> 
> 标签：java, swing, internationalization

我已经按照[Google 的 Window Builder Pro 扩展](https://developers.google.com/java-dev-tools/wbpro/features/internationalization)的方法来国际化我的应用程序。将在标签中显示的字符串现在存储在由“外部化字符串”向导创建的属性文件中（我使用了经典的 eclipse 消息文件）。

在我的`initialize`方法中，我所有的标签都被初始化，它们的文本设置如下：

```
JLabel lblLanguage = new JLabel(Messages.getString("App.lblLanguage.text")); //$NON-NLS-1$ 
```

我在我的类`App`中创建了一个包含 GUI 的枚举类型：

```
private enum Lang { German(Locale.GERMAN), English(Locale.ENGLISH);

    private Locale loc;
    Lang (Locale l) {
        loc = l;
    }

    Locale getLocale() {
        return loc;
    }
} 
```

语言将使用一个组合框设置，该组合框使用枚举类型 Lang 来显示可用的语言：

```
 JComboBox cboLanguage = new JComboBox();
    cboLanguage.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            JComboBox cb = (JComboBox)e.getSource();
            Lang l = (Lang)cb.getSelectedItem();
            // TODO: update language
        }
    });
    cboLanguage.setModel(new DefaultComboBoxModel(Lang.values())); 
```

* * *

我发现了许多其他关于 Swing 应用程序国际化的方法和教程，但没有一个涵盖如何更新所有标签（以及可能的其他带有文本的控件）。如果链接没有死，那么这里有[这个答案](https://stackoverflow.com/a/3339773/698583)可能会有所帮助。
因为我对java中的GUI编程有点陌生，所以我现在真的不知道该怎么做，这是我的问题：

*   如果设置了新语言，那么在运行时更改所有控件的语言的最佳方法是什么？
*   是否可以（推荐）将所有控件声明为我的 App 类的私有成员以让方法更新其文本属性（->`updateLanguage`方法可以这样做）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:54:18.893

当我这样做时，我也找不到内置的方法。

所以我创建了自己的`LocaleChangeListener`界面。所有 UI 屏幕/面板都实现了这一点，并将自己注册为我的中央 UI 控制器类的侦听器。然后`localeChanged(lang)`，只要语言发生变化，就会向他们每个人发出呼叫。不过，我将组件初始化分开 - 无需再次执行所有这些操作。

他们只是有这样的代码：

```
公共无效语言环境更改（Lang lang）{
    nameLabel.setText(lang.getText("label.name"));
    submitButton.setText(lang.getText("button.submit"));
    ETC...

    // 我认为在某些屏幕上我需要它来修复一些古怪的 JTable/JTabbedPane 布局问题：
    this.revalidate();
}

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-21T01:20:50.343

我通过扩展 JLabel 并覆盖 getText 以返回语言选择的评估来解决这个问题。

您还需要一些发布/订阅机制来“告诉”您的标签语言已更改。

我在这里使用[Guava 事件总线](https://github.com/google/guava/wiki/EventBusExplained)

```
import com.google.common.eventbus.EventBus;

public class EventBusHolder {

    private static EventBus bus = new EventBus();

    public static EventBus get() {
        return bus;
    }
} 
```

当用户更改您触发事件的语言时：

```
JComboBox cboLanguage = new JComboBox();
cboLanguage.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox)e.getSource();
        Lang l = (Lang)cb.getSelectedItem();
        // this is the event fire
        ChangeEvent event = getChangeEvent(l);
        EventBusHolder.get().post(event);
    }
}); 
```

要使用的标签组件：

```
public class MyLabel extends JLabel {

    private static final long serialVersionUID = 1L;

    public MyLabel (String key) {
        super(key);
        // register this in event bus
        EventBusHolder.get().register(this);
    }

    @Override
    public String getText() {
        return Messages.getString(super.getText());
    }

    @Subscribe 
    public void recordCustomerChange(ChangeEvent e) {
        revalidate();
    }

} 
```

当你实例化标签时，你必须传递翻译密钥：

```
JLabel lbl = new JLabel("App.lblLanguage.text"); 
```

[更多关于guava 事件总线](http://javarticles.com/2015/04/guava-eventbus-examples.html)的使用示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:17:50.960

由于用户不会经常更改语言，因此重新启动是勉强可以接受的。这样做的好处是旧语言的布局工件不会破坏文本。

这需要应用程序的可保存状态。

JLabel`new JLabel(Messages.getString("App.lblLanguage.text"));`立即评估为本地化文本，并可能布局到该文本的宽度。所以这不适合动态语言变化。

另一种方法是依靠名称属性或反射来填充所有文本值。或代码：

```
JLabel lblLanguage = new JLabel();
Nls.setText(lblLanguage, "App.lblLanguage"); 
```

随着一些 Nls.setText 在集合中对 lblLanguage 进行弱引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T13:06:25.237

核心 Swing 中没有任何东西可以缓解疼痛。如果您使用某种支持资源注入的应用程序框架，例如 fi (Better)SwingApplicationFramework，您可能会很高兴。

假设所有文本都像往常一样在属性文件中声明，下面的代码片段可以解决问题：

```
public static class ToggleLocaleAction extends AbstractAction {

    private boolean isAlternative;
    private SingleFrameApplication app;

    public ToggleLocaleAction(SingleFrameApplication app) {
        super("Locale");
        this.app = app;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // just toggling as an example
        Locale.setDefault(isAlternative ? Locale.GERMAN : Locale.ENGLISH);
        isAlternative = !isAlternative;
        injectResources(app);
    }

    public void injectResources(SingleFrameApplication app) {
        app.getContext().getResourceMap().injectComponents(app.getMainFrame());
    }
} 
```

刚注意到一些小故障：

*   不更新框架标题（可能是因为这不是 bean 属性）
*   不更新动作文本（可能需要强制一些上下文动作更新，不确定）

# android - Android systrace 是否需要 root 访问权限？

> ID：14810460
> 
> 赞同：5
> 
> 时间：2013-02-11T10:38:56.127
> 
> 标签：android, systrace

我正在尝试在非 root 设备上运行 systrace。如果选择了任何跟踪事件，它总是会给出以下错误：

**找不到跟踪开始标记“TRACE：”：打开/sys/kernel/debug/tracing/events/cpufreq_interactive/enable 时出错：没有这样的文件或目录**

如果没有选择跟踪事件，它可以工作，但跟踪不是很有用。

systrace 是否需要 root 访问权限？

请注意，我在 Windows-7 上直接从 Eclipse (DDMS) 运行 systrace。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:02:49.920

根据`systrace.py --help`，以下跟踪需要 root 访问权限：

*   **-d, --disk：**跟踪磁盘 I/O（需要 root）
*   **-u, --bus-utilization：**跟踪总线利用率（需要root）
*   **-w, --workqueue：**跟踪内核工作队列（需要root）

其他选项未指定需要 root 访问权限。

这就是说，我可以使用一些痕迹（例如**`--cpu-freq`**），但不幸的是，我很感兴趣，**`--cpu-load`**它给了我与你提到的完全相同的错误。

# iphone - 如何在 Objective C 中使用铅笔效果绘制签名？

> ID：14810465
> 
> 赞同：3
> 
> 时间：2013-02-11T10:39:04.777
> 
> 标签：iphone, ios, objective-c, uikit, draw

我尝试开发一个基于绘图效果的新应用程序。我知道简单的效果，但我见过一些带有画笔效果（铅笔效果）的应用程序。

怎么做这样的想法？（SignNow 应用程序）

谢谢

您可以在下面看到一些示例。（首先是我的代码，其次我想要同样的效果）

第一的 ：

[myapp 绘制签名](http://hangeul.legtux.org/myapp.PNG)

第二 ：

[我想要相同的signnow应用程序](http://hangeul.legtux.org/signnow.PNG)

我的代码：

```
- (void)drawRect:(CGRect)rect {

CGContextRef context = UIGraphicsGetCurrentContext();

// Set drawing params
CGContextSetLineWidth(context, self.lineWidth);
CGContextSetStrokeColorWithColor(context, [self.foreColor CGColor]);
CGContextSetLineCap(context, kCGLineCapButt);
CGContextSetLineJoin(context, kCGLineJoinRound);
CGContextBeginPath(context);

// This flag tells us to move to the point
// rather than draw a line to the point
BOOL isFirstPoint = YES;

// Loop through the strings in the array
// which are just serialized CGPoints
for (NSString *touchString in self.handwritingCoords) {

    // Unserialize
    CGPoint tapLocation = CGPointFromString(touchString);

    // If we have a CGPointZero, that means the next
    // iteration of this loop will represent the first
    // point after a user has lifted their finger.
    if (CGPointEqualToPoint(tapLocation, CGPointZero)) {
        isFirstPoint = YES;
        continue;
    }

    // If first point, move to it and continue. Otherwize, draw a line from
    // the last point to this one.
    if (isFirstPoint) {
        CGContextMoveToPoint(context, tapLocation.x, tapLocation.y);

            //CGContextAddArc(ctx, tapLocation.x, tapLocation.y, 30.00, (startDeg-90)*M_PI/180.0, (endDeg-90)*M_PI/180.0, 0);
        isFirstPoint = NO;
    } else {
        CGPoint startPoint = CGContextGetPathCurrentPoint(context);
        CGContextAddQuadCurveToPoint(context, startPoint.x, startPoint.y, tapLocation.x, tapLocation.y);
        CGContextAddLineToPoint(context, tapLocation.x, tapLocation.y);
    }

}   

// Stroke it, baby!
CGContextStrokePath(context); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T21:44:15.537

[我建议从活跃的平滑绘图](https://github.com/krzysztofzablocki/smooth-drawing)项目中获得一些灵感。这是开始和学习最佳实践的好地方。[此外，您可以在使用 cocos2d 绘制平滑线条](http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/)的精彩文章中了解更多关于该项目背后的想法。

# c++ - C++ 没有默认构造函数？尝试为 LinkedList 创建插入方法

> ID：14810466
> 
> 赞同：0
> 
> 时间：2013-02-11T10:39:04.527
> 
> 标签：c++, templates, singly-linked-list

我对 C++ 真的很陌生，并且无法使 insert() 函数与 LinkedList 一起工作。这是我得到的代码，开始：

```
#include <iostream>
#include <cassert>
#include <stdexcept>
using namespace std;

template<typename T> class mylist;

template<typename T>
ostream& operator<< (ostream &out, const mylist<T> &l);

template <typename T>
class mylist {
public:
    // node definition
    struct node {
        T data;
        node* next_ptr;
        // node constructor
        node(const T &d, node* n):data(d),next_ptr(n){}
    };

    // alternative node definition
    /*
    class node {
    public:
        T data;
        node* next_ptr;
        // node constructor
        node(const T&d, node* n):data(d),next_ptr(n){}
    };
    */

    // linked list head pointer
    node* head_ptr;

    //friend ostream& operator<<  <>(ostream& out, const mylist<T>&l);
    friend ostream& operator<< (ostream &out, const mylist<T> &l);

public:
    // default constructor
    mylist():head_ptr(nullptr) {} // head_ptr points nowhere

    // adds element to the front of the linked list
    void push_front(const T &elem) {
        head_ptr = new node(elem, head_ptr);
    }

    // check if linked list is empty
    bool empty() { return head_ptr == nullptr;}

    // number of nodes in linked list
    unsigned size() { return length();}
    unsigned length() {
        unsigned l = 0;
        for(node* current = head_ptr; current != nullptr; current = current->next_ptr) {
            ++l;
        }
        return l;
    }

    // copy constructor
    mylist(const mylist &other)
    {   
        for(node* current_other = other.head_ptr;
            current_other != nullptr;
            current_other = current_other->next_ptr) {
                this.push_back(current_other->data); // inefficient, but easy :)
        }
    }

    // destructor
    ~mylist() {
        node* tmp;
        for(node* current = head_ptr; 
                current != nullptr; 
                current = tmp) {
            tmp=current->next_ptr;
            delete current;
        }
    }

    // at accessor method (returns the element at the ith position in the linked list)
    T& at(unsigned i){
        unsigned l=0;
        node* current;
        for(current = head_ptr; current != nullptr; current = current->next_ptr) {
            if(l == i)
                break;
            ++l;
        }
        if (current == nullptr)
            throw out_of_range("index i is out of range");
        else
            return current->data;
    }   

    // bracket operator (returns the element at the ith position in the linked list)
    T& operator[](unsigned i){
        return at(i);
    }   

    // adds element to the end of the linked list
    void push_back(const T &elem) {
        if(empty()) {
            push_front(elem);
            return;
        }
        node* last_ptr;
        for(last_ptr = head_ptr; last_ptr->next_ptr != nullptr; 
            last_ptr = last_ptr->next_ptr);

        last_ptr->next_ptr = new node(elem, nullptr);

    }

    // prints the contents of the linked list
    void print_all(void) {
        cout << "mylist{";
        for(node* current_ptr = head_ptr;  
                current_ptr != nullptr; 
                current_ptr = current_ptr->next_ptr){
            cout << current_ptr->data << " ";
        }
        cout << "}" << endl;
    } 
```

我正在尝试创建一个新函数 insert(const T &elem, unsigned i)。它的目的在以下代码的注释中描述：

```
// inserts the element at position i in linked list.
    // throws out of range error if position i not in list.
    void insert (const T &elem, unsigned i) {
        unsigned l=0;
        node* current, prev;
        for(current = head_ptr; current != nullptr; current = current->next_ptr) {

            if(l == i)
                break;
            ++l;
            prev = current;
        }
        if (current == nullptr)
            throw out_of_range("index i is out of range");
        else
        {
            prev->next_ptr = new Node (elem, current);
        }
    } 
```

我的问题是我收到以下错误，我不知道如何修复它，或者它意味着什么：

```
1>c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_tpt.h(184): error C2512: 'mylist<T>::node' : no appropriate default constructor available
1>          with
1>          [
1>              T=std::string
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_tpt.h(182) : while compiling class template member function 'void mylist<T>::insert(const T &,unsigned int)'
1>          with
1>          [
1>              T=std::string
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_main.cpp(20) : see reference to class template instantiation 'mylist<T>' being compiled
1>          with
1>          [
1>              T=std::string
1>          ] 
```

提前感谢您能给我的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:44:32.943

```
node* current, prev; 
```

应该：

```
node *current, *prev; 
```

正如你写的那样，它`prev`不是一个指针。这是一个`node`.

正如错误所述，没有办法以`node`那种方式构建。（需要两个参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:45:31.910

错误在这一行：

```
node* current, prev; 
```

这声明`current`是**指向的指针，`node`**并且`prev`是**的一个实例`node`**。像`*`,`&`或`[]`每次仅适用于一个标识符的声明符。这就是为什么最好将它们放在标识符旁边而不是类型旁边：

```
node *current, *prev; 
```

# jquery - 如何在 div 内的每个 img 中放置一个 href（幻灯片 Jquery）

> ID：14810470
> 
> 赞同：0
> 
> 时间：2013-02-11T10:39:34.487
> 
> 标签：jquery, slideshow, href

我从[http://jonraasch.com/blog/a-simple-jquery-slideshow](http://jonraasch.com/blog/a-simple-jquery-slideshow)得到了一个 Jquery 幻灯片， 一切正常。我想在 div 中为每张图片添加一个超链接，但是当我将 ahrefs 放入其中时，它只显示第一张图片而不显示其他图片。

示例在链接中：http: [//jonraasch.com/blog/a-simple-jquery-slideshow](http://jonraasch.com/blog/a-simple-jquery-slideshow)

注意：我想要幻灯片中每张图片的不同链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:44:50.353

您可以使用[每个](http://api.jquery.com/jQuery.each/)功能。

```
var images = $('#slideshow').children('img');
$.each(images,function(){
   images.wrap('<a href="#"></a>');
}); 
```

注意：我自己没有尝试过这段代码。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:52:32.757

试试这个 ：-

-----js中的变化----

```
 var $active = $('#slideshow a.active');

    if ( $active.length == 0 ) $active = $('#slideshow a:last');

    // use this to pull the images in the order they appear in the markup
    var $next =  $active.next().length ? $active.next()
        : $('#slideshow a:first'); 
```

------更改是css--------

```
/*** set the width and height to match your images **/

#slideshow {
    position:relative;
    height:350px;
}

#slideshow a {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
    opacity:0.0;
}

#slideshow a.active {
    z-index:10;
    opacity:1.0;
}

#slideshow a.last-active {
    z-index:9;
}

</style> 
```

---html中的变化---

```
<div id="slideshow">
   <a href="#"> <img src="image1.jpg" alt="Slideshow Image 1" class="active" /></a>
    <a href="#"> <img src="image2.jpg" alt="Slideshow Image 2" /></a>
    <a href="#"> <img src="image3.jpg" alt="Slideshow Image 3" /></a>
    <a href="#"> <img src="image4.jpg" alt="Slideshow Image 4" /></a>
</div> 
```

# android - 离线使用 mapfragment 功能

> ID：14810477
> 
> 赞同：5
> 
> 时间：2013-02-11T10:39:56.967
> 
> 标签：android, mapactivity, mapfragment

我正在开发一个跟踪应用程序，所以我使用 GPS 数据在画布上绘制路线 + 检查点。问题是，我在 SurfaceView 中开发了缩放/拖动+跨度以及所有“经纬度到笛卡尔转换”，但是如果我可以使用地图 api 功能（使用我自己的覆盖）。

所以我的问题是，我可以在没有互联网连接的情况下使用地图 api/MapFragment 并利用 api 功能吗？你们中的任何人以前做过这样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:18:25.433

我设法在没有覆盖的情况下使用地图 api v2：

```
mMap.setMapType(0); 
```

现在我可以利用 api 中的滚动/平移/缩放 + 位置实用程序而无需显示覆盖...这很酷：D

# android - 不使用 Fragment 的 Android 上的 Facebook

> ID：14810485
> 
> 赞同：3
> 
> 时间：2013-02-11T10:40:19.527
> 
> 标签：android, facebook, facebook-android-sdk

我想在一个应用程序上实现对facebook基本信息的完整管理，所以请求个人信息、朋友列表和在墙上发帖。所有这些都应该在不使用片段的情况下使用 API 3.0 完成。

现在我被困在我唯一能做到这一点的例子上，那就是 SessionLoginSampleActivity。我现在的程序只不过是那个例子，根据我的布局改编，你可以在帖子的末尾找到它。不幸的是，这个例子并没有超越身份验证，我无法意识到如何与 facebook 进行异步对话并检索用户数据和所有这些东西。

在某个地方有一个*完整*的例子吗？

认证后如何异步获取用户头像、姓名、好友列表，不分片？我应该在哪里写？我应该创建一个新的侦听器吗？

这个问题可能看起来很奇怪而且很基本，但我真的对 facebook API 很着迷，它看起来如此强大，但对我来说却非常模糊。

请不要回答我：“使用碎片！” :)

非常感谢！

```
public class FbActivity extends Activity {
private Button buttonLoginLogout, b_friends, b_challenge;
private TextView t_instructions, t_username;
private ProfilePictureView profilePictureView;
private Session.StatusCallback statusCallback = new SessionStatusCallback();

public FbActivity() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.facebook_activity);
    findAll();

    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    }

    updateView();
}
@Override
public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
}
@Override
public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
}

private void findAll() {
    buttonLoginLogout = (Button)findViewById(R.id.buttonLoginLogout);
    t_instructions = (TextView)findViewById(R.id.instructionsOrLink);
    b_friends = (Button)findViewById(R.id.buttonFindFriend);
    b_challenge = (Button)findViewById(R.id.buttonFindNewChallenge);
    profilePictureView = (ProfilePictureView)findViewById(R.id.profilePicture);
    t_username = (TextView)findViewById(R.id.textViewUserName);
}

private void setVisibility(boolean opened) {
    if (opened) {
        buttonLoginLogout.setText(R.string.logout);
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { onClickLogout(); }
        });
        t_instructions.setVisibility(TextView.INVISIBLE);
        b_friends.setVisibility(Button.VISIBLE);
        b_challenge.setVisibility(Button.VISIBLE);
        t_username.setVisibility(TextView.VISIBLE);
        profilePictureView.setVisibility(ProfilePictureView.VISIBLE);
    } else {
        buttonLoginLogout.setText(R.string.login);
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { onClickLogin(); }
        });
        t_instructions.setVisibility(TextView.VISIBLE);
        b_friends.setVisibility(Button.INVISIBLE);
        b_challenge.setVisibility(Button.INVISIBLE);
        t_username.setVisibility(TextView.VISIBLE);
        profilePictureView.setVisibility(ProfilePictureView.INVISIBLE);
    }

}
private void updateView() {
    Session session = Session.getActiveSession();
    setVisibility(session.isOpened());
}

private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}
private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
}   
private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:19:24.240

假设您首先有一个名为logged_off.xml 的页面，其中只有您的loginButton，并且您的目的是登录，然后在正确登录后，将视图更改为另一个名为logged_in.xml 的页面。

所以你有了：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.logged_off);
Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

loginButton = (Button) findviedbyid(R.id.loginButton);
loginButton.setOnClickListener(new OnClickListener() {
        public void onClick(View view) { 
session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(PERMISSIONS));  
}
    });

//here we check if our session exists. if it does exists we directly go to our page logged_in.xml otherwise we stay in logged_off.xml waiting for the user to click on our loginButton

Session session = Session.getActiveSession();
if (session == null) {
    if (savedInstanceState != null) {
        session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
    }
    if (session == null) {
        session = new Session(this);
    }
    Session.setActiveSession(session);
}else{
if(session.session.isOpened()){
setContentView(R.layout.logged_in);
}
}
} 
```

这个函数在我们尝试登录后被调用，所以在这里我们检查我们是否真的正确登录，如果正确，我们只需将页面更改为logged_in.xml。所以改变这个：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
} 
```

对此：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

if(session.session.isOpened()){
    setContentView(R.layout.logged_in);
}
} 
```

当然你可以改变 setContentView(R.layout.logged_in); 随心所欲。

希望它有所帮助！

PS：保留所有这些功能：

```
@Override
public void onStart() {
super.onStart();
Session.getActiveSession().addCallback(statusCallback);
}

@Override
public void onStop() {
super.onStop();
Session.getActiveSession().removeCallback(statusCallback);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);
Session session = Session.getActiveSession();
Session.saveSession(session, outState);
}

private class SessionStatusCallback implements Session.StatusCallback {
@Override
public void call(Session session, SessionState state, Exception exception) {
    //updateView();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:49:42.490

我们需要保持比这更进一步的 bw 兼容性。我们所做的是从 github 拉取 facebook API 的 v1.2.2 版本，并使用它来代替。文档更难找到，但示例应用程序可以直接使用……而且看不到任何片段。

```
git clone git://github.com/facebook/facebook-android-sdk.git
cd facebook-and*
git checkout v1.2.2 
```

看起来我们还必须添加一些东西，比如更新版本的图像到他们的库项目中，但这没什么大不了的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T00:32:57.950

我建议参考 Facebook 开发者的教程，把所有与 Fragment 相关的东西都去掉，比如`fragments manager`，保留`UiLifecycleHelper`and`onSessionStateChange`方法是必要的，让你知道 session 的状态和它的变化。

这是 onSessionStateChange 的示例以及如何修改它以启动新活动，我正在开发一个没有片段的应用程序

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {

                if (state.isOpened()) { 
                    // If the session state is open:
                    // Show the SendRequest Activity
                    Intent sendRequest = new Intent(this, SendRequest.class);  // If session isOpened we launch the INTENT to Pick Friends
                    startActivity(sendRequest);
                }else if (state.isClosed()){
                    uiHelper.onResume();
                }
        } 
```

# ruby - Ruby 1.9.x 用字符串中的特定清理字符替换字符集

> ID：14810489
> 
> 赞同：2
> 
> 时间：2013-02-11T10:40:26.693
> 
> 标签：ruby, utf-8, transliteration

我正在寻找一种以简洁有效的方式在 Ruby 中执行以下 PHP 代码的方法：

```
$normalizeChars = array('Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
        'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
        'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
        'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
        'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
        'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
        'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f');
$cleanGenre = strtr($this->entryArray['genre'], $normalizeChars); 
```

此处，该`strtr()`函数将数组中左侧的字符替换为右侧的字符。对于清理工作非常方便。但我似乎在 Ruby 中找不到任何类似的东西，也就是说，一种指定在一个数组中替换所有字符的方法，而不是为每个字符使用冗长的条件。

请注意，这是`tr`行不通的，因为您不能用两个 (D => Dj) 替换一个字母。另外，它给了我一条`InvalidByteSequenceError: "\xC5" on US-ASCII`这条线：

```
 entry["genre"].tr('ŠšŽž', 'SsZz') 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:21:27.383

在 Ruby 1.9.3 中，您可以使用以下`:fallback`选项`encode`：

```
"ŠšŽžÐ".encode('us-ascii', :fallback => { [your character table here] })
=> "SsZzDj" 
```

也可以这样做，`gsub`因为它在 1.9.x 中接受转换表作为哈希参数：

```
"ŠšŽžÐ".gsub(/[ŠšŽžÐ]/, [your character table here])
=> "SsZzDj" 
```

或者更好（@steenslag）：

```
character_table = [your table here]
regexp_keys     = Regexp.union(character_table.keys) 
"ŠšŽžÐ".gsub(regexp_keys, character_table)
=> "SsZzDj" 
```

这种字符转换称为[transliteration](http://en.wikipedia.org/wiki/Transliteration)，如果您想通过 Google 搜索更多解决方案，很高兴知道（有许多支持音译的 Ruby 库，但我测试的没有一个完全支持您的字符集）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:29:39.447

我会让你很容易实现

```
#encoding: UTF-8
t = 'ŠšÐŽžÀÁÂÃÄAÆAÇÈÉÊËÌÎÑNÒOÓOÔOÕOÖOØOUÚUUÜUÝYÞBßSàaáaâäaaæaçcèéêëìîðñòóôõöùûýýþÿƒ'
fallback = { 
  'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
  'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
  'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
  'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
  'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
  'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
  'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f'
  }

p t.encode('us-ascii', :fallback => fallback) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:46:24.110

这就像我想你想要的那样工作：翻译数组中的字符并将那些不在其中的字符保持原样：

```
# encoding: utf-8
lookup = {'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
        'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
        'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
        'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
        'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
        'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
        'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f'}

clean_genre = entry["genre"].chars.to_a.map { |x|
  if lookup.has_key?(x)
    lookup[x]
  else
    x
  end
}.join 
```

例如这个：

```
'aŠšŽž'.chars.to_a.map { |x|
  if lookup.has_key?(x)
    lookup[x]
  else
    x
  end
}.join 
```

给你'aSsZz'。

或者将块逻辑移动到查找表本身（感谢 steenslag 简化了默认的 proc 解决方案！）：

```
lookup.default_proc = proc { |hash, key| key } 
```

那么调用将如下所示：

```
puts 'aŠšŽž'.chars.to_a.map { |x| lookup[x] }.join 
```

甚至更好（再次感谢 steenslag 的指出）：

```
puts 'aŠšŽž'.gsub(/./) { |x| lookup[x] } 
```

# ios - iOS6 中的 UISegmentedControl 图像突出显示错误

> ID：14810493
> 
> 赞同：11
> 
> 时间：2013-02-11T10:40:45.830
> 
> 标签：ios, objective-c, cocoa-touch, uisegmentedcontrol

目前我有一个带有 3 个独立段的小型分段控件。

我想要做的是，如果选中，将该特定片段的图像更改为不同的图像。

到目前为止，我已经设法使它与我想要的非常相似，并且在选择时会显示一个新图像，但是新图像的一小部分被蓝色突出显示（如下所示）覆盖，无论我尝试什么，我无法摆脱它：

![](../Images/b328c7e36ba82d55a4b0dada7a0c3e7f.png)

由于某种原因，突出显示覆盖了图像的一部分。

我想知道如何在选择时完全禁用分段控件的任何突出显示/更改，或任何其他可以解决我的问题的选项。

到目前为止我已经尝试过：

*   [设置 UISegmentedControl 的背景图片](https://stackoverflow.com/questions/10740373/setting-background-image-of-uisegmentedcontrol)
*   [UISegmentedControl 自定义背景图片](https://stackoverflow.com/questions/3386385/uisegmentedcontrol-custom-background-image?rq=1)

我的代码（如您所见，只为任何选定的按钮测试一个图像）：

```
-(IBAction)languageChanged:(UISegmentedControl *)sender {
    UISegmentedControl *segmentControl = [[UISegmentedControl alloc] init];
    [segmentControl addTarget:self action:@selector(segmentedControlValueChanged:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:segmentControl];

    [sender setImage:[UIImage imageNamed:@"rsz_langue-francais-on.png"] forSegmentAtIndex:sender.selectedSegmentIndex];     
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:52:52.943

我不是 100% 确定这是否可行，但段颜色由`tintColor`.

所以你可以简单地设置`tintColor`为`[UIColor clearColor];`

**编辑：**

我读过这是 iOS6 及更高版本的问题。要解决此问题，请为每个单独的部分设置宽度，而不是为整个分段控件设置宽度。

`UISegmentedControl`这是宽度为 180 的a 的一些示例（未经测试）代码：

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
if (version >= 6.0) {
    [[UISegmentedControl appearance] setWidth:90 forSegmentAtIndex:0];
    [[UISegmentedControl appearance] setWidth:90 forSegmentAtIndex:1];
}
else{
    segmentedControl.frame = CGRectMake(0, 0, 180, 30);
} 
```

**编辑2：**

当样式设置为“条形”而不是“纯色”时，我只能更改分段控件的色调颜色。当我的应用程序中颜色的一致性受到损害时，我真的很快就会改变这种情况。

临时和肮脏的修复*可能*是将瞬时状态检查为“是”。这将使其仅蓝色一秒钟，您的自定义图像仍将使其看起来被选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:32:10.090

最后，我能够解决的唯一方法（也许避免会是一个更好的词）问题是将样式`uisegmentedcontrol`从“ **Plain** ”更改为“ **Bar** ”，这消除了段之间的蓝色突出显示间距，例如帕特里克在上面建议。我听说这是一个已知的 iOS6 错误，希望它很快得到修复。

# android - Google Android Maps 确实有效 - 膨胀类片段时出错（在 Intellij IDEA 12 上）

> ID：14810494
> 
> 赞同：0
> 
> 时间：2013-02-11T10:40:46.577
> 
> 标签：android, google-maps, google-play, google-maps-android-api-2

我只是按照非常简单的说明创建一个新的 Android 应用程序以将地图（使用此处的说明：[https](https://developers.google.com/maps/documentation/android/start) ://developers.google.com/maps/documentation/android/start ）加载到主屏幕中。我有以下错误：

```
02-11 19:36:02.078: WARN/dalvikvm(2740): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
02-11 19:36:02.118: ERROR/AndroidRuntime(2740): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.mapexample/com.example.android.mapexample.MyActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1821)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
        at android.app.ActivityThread.access$1500(ActivityThread.java:132)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4263)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:231)
        at android.app.Activity.setContentView(Activity.java:1742)
        at com.example.android.mapexample.MyActivity.onCreate(MyActivity.java:18)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
        ... 11 more
        Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.android.mapexample-1.apk]
        at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
        at android.view.LayoutInflater.createView(LayoutInflater.java:471)
        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
        ... 19 more
02-11 19:36:02.158: WARN/ActivityManager(121): Force finishing activity com.example.android.mapexample/.MyActivity
02-11 19:36:02.668: WARN/ActivityManager(121): Activity pause timeout for HistoryRecord{40547a60 com.example.android.mapexample/.MyActivity} 
```

我正在使用 IntelliJ IDEA 12，并且尝试将 google-play-services.jar 添加到模块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:05:35.647

如果您的目标 API 级别 < 12，则需要为此添加支持库，因此显示地图的活动将扩展**android.support.v4.app.FragmentActivity**类。并且在您的布局地图片段类中必须是**com.google.android.gms.maps.SupportMapFragment**。例如

```
<fragment
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" /> 
```

# javascript - 对象的映射函数（而不是数组）

> ID：14810506
> 
> 赞同：1507
> 
> 时间：2013-02-11T10:41:12.630
> 
> 标签：javascript, node.js, functional-programming, map-function

我有一个对象：

```
myObject = { 'a': 1, 'b': 2, 'c': 3 } 
```

我正在寻找一种本机方法，类似于`Array.prototype.map`将使用如下：

```
newObject = myObject.map(function (value, label) {
    return value * value;
});

// newObject is now { 'a': 1, 'b': 4, 'c': 9 } 
```

JavaScript`map`对对象有这样的功能吗？（我想要这个用于 Node.JS，所以我不关心跨浏览器问题。）

* * *

## 回答 #1

> 赞同：2168
> 
> 时间：2013-02-11T10:52:37.437

`map`该对象没有本机`Object`，但是如何：

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };

Object.keys(myObject).map(function(key, index) {
  myObject[key] *= 2;
});

console.log(myObject);
// => { 'a': 2, 'b': 4, 'c': 6 }
```

但是您可以使用以下方法轻松迭代对象`for ... in`：

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };

for (var key in myObject) {
  if (myObject.hasOwnProperty(key)) {
    myObject[key] *= 2;
  }
}

console.log(myObject);
// { 'a': 2, 'b': 4, 'c': 6 }
```

**更新**

很多人都提到以前的方法不返回一个新的对象，而是对对象本身进行操作。为此，我想添加另一个解决方案，该解决方案返回一个新对象并保持原始对象不变：

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };

// returns a new object with the values at each key mapped using mapFn(value)
function objectMap(object, mapFn) {
  return Object.keys(object).reduce(function(result, key) {
    result[key] = mapFn(object[key])
    return result
  }, {})
}

var newObject = objectMap(myObject, function(value) {
  return value * 2
})

console.log(newObject);
// => { 'a': 2, 'b': 4, 'c': 6 }

console.log(myObject);
// => { 'a': 1, 'b': 2, 'c': 3 }
```

[`Array.prototype.reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)通过将前一个值与当前值进行某种程度的合并，将数组简化为单个值。该链由一个空对象初始化`{}`。在每次迭代中，`myObject`都会添加一个新的键，其值是键的两倍。

**更新**

有了新的 ES6 特性，就有了一种更优雅的表达方式`objectMap`。

```
const objectMap = (obj, fn) =>
  Object.fromEntries(
    Object.entries(obj).map(
      ([k, v], i) => [k, fn(v, k, i)]
    )
  )

const myObject = { a: 1, b: 2, c: 3 }

console.log(objectMap(myObject, v => 2 * v)) 
```

* * *

## 回答 #2

> 赞同：462
> 
> 时间：2016-08-08T12:20:05.757

JS **ES10 / ES2019**中的单行代码怎么样？

使用[`Object.entries()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)and [`Object.fromEntries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries)：

```
let newObj = Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, v * v])); 
```

同样的东西写成函数：

```
function objMap(obj, func) {
  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, func(v)]));
}

// To square each value you can call it like this:
let mappedObj = objMap(obj, (x) => x * x); 
```

此函数也使用*递归*来平方嵌套对象：

```
function objMap(obj, func) {
  return Object.fromEntries(
    Object.entries(obj).map(([k, v]) => 
      [k, v === Object(v) ? objMap(v, func) : func(v)]
    )
  );
}

// To square each value you can call it like this:
let mappedObj = objMap(obj, (x) => x * x); 
```

使用**ES7 / ES2016**，您不能使用`Objects.fromEntries`，但您可以[`Object.assign`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)结合使用[扩展运算符](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)和[计算的键名](http://es6-features.org/#ComputedPropertyNames)语法来实现相同的目的：

```
let newObj = Object.assign({}, ...Object.entries(obj).map(([k, v]) => ({[k]: v * v}))); 
```

**ES6 / ES2015**不允许`Object.entries`，但您可以使用[`Object.keys`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)：

```
let newObj = Object.assign({}, ...Object.keys(obj).map(k => ({[k]: obj[k] * obj[k]}))); 
```

ES6 还引入了[`for...of`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)循环，它允许一种更*命令*式的风格：

```
let newObj = {}

for (let [k, v] of Object.entries(obj)) {
  newObj[k] = v * v;
} 
```

* * *

### 数组.reduce()

`Object.fromEntries`你也`Object.assign`可以使用[reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)来代替：

```
let newObj = Object.entries(obj).reduce((p, [k, v]) => ({ ...p, [k]: v * v }), {}); 
```

* * *

### 继承的属性和原型链：

在极少数情况下，您可能需要映射一个*类*对象，该对象在其[原型链](https://developer.mozilla.org/en/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)上保存继承对象的属性。在这种情况下`Object.keys()`并`Object.entries()`不会起作用，因为这些函数不包括原型链。

如果需要映射*继承*的属性，可以使用`for (key in myObj) {...}`.

这是这种情况的一个例子：

```
const obj1 = { 'a': 1, 'b': 2, 'c': 3}
const obj2 = Object.create(obj1);  // One of multiple ways to inherit an object in JS.

// Here you see how the properties of obj1 sit on the 'prototype' of obj2
console.log(obj2)  // Prints: obj2.__proto__ = { 'a': 1, 'b': 2, 'c': 3}

console.log(Object.keys(obj2));  // Prints: an empty Array.
console.log(Object.entries(obj2));  // Prints: an empty Array.

for (let key in obj2) {
  console.log(key);              // Prints: 'a', 'b', 'c'
} 
```

但是，请帮我一个忙，避免*继承*。:-)

* * *

## 回答 #3

> 赞同：141
> 
> 时间：2013-12-18T16:46:13.810

没有本地方法，但[lodash#mapValues](http://lodash.com/docs#mapValues)会出色地完成这项工作

```
_.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });
// → { 'a': 3, 'b': 6, 'c': 9 } 
```

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2013-02-11T10:52:20.620

写一个很容易：

```
Object.map = function(o, f, ctx) {
    ctx = ctx || this;
    var result = {};
    Object.keys(o).forEach(function(k) {
        result[k] = f.call(ctx, o[k], k, o); 
    });
    return result;
} 
```

带有示例代码：

```
> o = { a: 1, b: 2, c: 3 };
> r = Object.map(o, function(v, k, o) {
     return v * v;
  });
> r
{ a : 1, b: 4, c: 9 } 
```

注意：此版本还允许您（可选）设置`this`回调的上下文，就像`Array`方法一样。

**编辑**- 更改为删除使用`Object.prototype`, 以确保它不会与`map`对象上命名的任何现有属性发生冲突。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2013-02-11T10:53:37.717

您可以使用[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)然后`forEach`在返回的键数组上：

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 },
    newObject = {};
Object.keys(myObject).forEach(function (key) {
    var value = myObject[key];
    newObject[key] = value * value;
}); 
```

或者以更模块化的方式：

```
function map(obj, callback) {
    var result = {};
    Object.keys(obj).forEach(function (key) {
        result[key] = callback.call(obj, obj[key], key, obj);
    });
    return result;
}

newObject = map(myObject, function(x) { return x * x; }); 
```

请注意，它`Object.keys`返回一个仅包含对象自己的可枚举属性的数组，因此它的行为类似于`for..in`带有`hasOwnProperty`检查的循环。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2016-10-12T21:01:19.260

这真的很烦人，JS 社区的每个人都知道。*应该*有这个功能：

```
const obj1 = {a:4, b:7};
const obj2 = Object.map(obj1, (k,v) => v + 5);

console.log(obj1); // {a:4, b:7}
console.log(obj2); // {a:9, b:12} 
```

这是天真的实现：

```
Object.map = function(obj, fn, ctx){

    const ret = {};

    for(let k of Object.keys(obj)){
        ret[k] = fn.call(ctx || null, k, obj[k]);
    });

    return ret;
}; 
```

必须一直自己实现这一点非常烦人；）

如果你想要一些更复杂的东西，它不会干扰 Object 类，试试这个：

```
let map = function (obj, fn, ctx) {
  return Object.keys(obj).reduce((a, b) => {
    a[b] = fn.call(ctx || null, b, obj[b]);
    return a;
  }, {});
};

const x = map({a: 2, b: 4}, (k,v) => {
    return v*2;
}); 
```

但是将此映射函数添加到Object是安全的，只是不要添加到Object.prototype。

```
Object.map = ... // fairly safe
Object.prototype.map ... // not ok 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-10-21T17:39:17.123

我来这里是为了寻找并回答将对象映射到数组的问题，结果得到了这个页面。如果您来这里寻找与我相同的答案，这里是您如何映射和对象到数组。

您可以使用 map 从对象返回一个新数组，如下所示：

```
var newObject = Object.keys(myObject).map(function(key) {
   return myObject[key];
}); 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2019-05-13T10:45:32.547

JavaScript 刚刚获得了新`Object.fromEntries`方法。

## 例子

```
function mapObject (obj, fn) {
  return Object.fromEntries(
    Object
      .entries(obj)
      .map(fn)
  )
}

const myObject = { a: 1, b: 2, c: 3 }
const myNewObject = mapObject(myObject, ([key, value]) => ([key, value * value]))
console.log(myNewObject)
```

## 解释

`[[<key>,<value>], ...]`上面的代码将 Object 转换为可以映射的嵌套数组 ( )。`Object.fromEntries`将数组转换回对象。

这种模式最酷的地方在于，您现在可以在映射时轻松考虑对象键。

## 文档

*   [`Object.fromEntries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries)
*   [`Object.entries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)

## 浏览器支持

`Object.fromEntries`目前只有[这些浏览器/引擎](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries#Browser_compatibility)支持，但是有可用的 polyfills（例如[@babel/polyfill](https://babeljs.io/docs/en/babel-polyfill)）。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2016-08-03T20:45:34.403

接受的答案有两个缺点：

*   它误用`Array.prototype.reduce`了 ，因为减少意味着改变复合类型的结构，这在这种情况下不会发生。
*   它不是特别可重复使用

* * *

### 一种 ES6/ES2015 函数式方法

请注意，所有函数都以柯里化形式定义。

```
// small, reusable auxiliary functions

const keys = o => Object.keys(o);

const assign = (...o) => Object.assign({}, ...o);

const map = f => xs => xs.map(x => f(x));

const mul = y => x => x * y;

const sqr = x => mul(x) (x);

// the actual map function

const omap = f => o => {
  o = assign(o); // A
  map(x => o[x] = f(o[x])) (keys(o)); // B
  return o;
};

// mock data

const o = {"a":1, "b":2, "c":3};

// and run

console.log(omap(sqr) (o));
console.log(omap(mul(10)) (o));
```

*   在 A 行`o`被重新分配。由于 Javascript 通过[共享](https://stackoverflow.com/a/38533677/6445533)`o`传递引用值，因此生成了一个浅拷贝。我们现在可以在不改变父作用域的情况下在`o`内部`omap`进行变异`o`。
*   在 B 行`map`的返回值被忽略，因为`map`执行了`o`. 由于此副作用保留在父范围内`omap`且在父范围内不可见，因此完全可以接受。

这不是最快的解决方案，而是一种声明性和可重用的解决方案。这是与单行相同的实现，简洁但可读性较差：

```
const omap = f => o => (o = assign(o), map(x => o[x] = f(o[x])) (keys(o)), o); 
```

* * *

### 附录 - 为什么默认情况下对象不可迭代？

ES2015 指定了迭代器和可迭代协议。但是对象仍然不可迭代，因此不可映射。[原因是数据和程序级别的混合](https://stackoverflow.com/a/38777177/6445533)。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2017-07-17T22:58:21.220

# 最小版本

## ES2017

```
Object.entries(obj).reduce((a, [k, v]) => (a[k] = v * v, a), {})
                                                  ↑↑↑↑↑ 
```

## ES2019

```
Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, v * v]))
                                                           ↑↑↑↑↑ 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2020-04-05T08:53:12.440

您可以使用以下命令将对象转换为数组：

**您可以将对象值转换为数组：**

```
myObject = { 'a': 1, 'b': 2, 'c': 3 };

let valuesArray = Object.values(myObject);

console.log(valuesArray);
```

**您可以将对象键转换为数组：**

```
myObject = { 'a': 1, 'b': 2, 'c': 3 };

let keysArray = Object.keys(myObject);

console.log(keysArray);
```

**现在您可以执行正常的数组操作，包括 'map' 函数**

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2016-10-03T10:22:10.237

以获得最佳性能。

如果您的对象不经常更改但需要经常迭代，我建议使用本机 Map 作为缓存。

```
// example object
var obj = {a: 1, b: 2, c: 'something'};

// caching map
var objMap = new Map(Object.entries(obj));

// fast iteration on Map object
objMap.forEach((item, key) => {
  // do something with an item
  console.log(key, item);
});
```

Object.entries 已经在 Chrome、Edge、Firefox 和 beta Opera 中运行，因此它是一个面向未来的功能。它来自 ES7，所以在它不起作用的地方为 IE填充[https://github.com/es-shims/Object.entries 。](https://github.com/es-shims/Object.entries)

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2018-09-29T12:03:26.867

你可以使用`map`方法和`forEach`数组，但如果你想使用它，`Object`那么你可以像下面这样使用扭曲：

**使用 Javascript (ES6)**

```
var obj = { 'a': 2, 'b': 4, 'c': 6 };   
Object.entries(obj).map( v => obj[v[0]] *= v[1] );
console.log(obj); //it will log as {a: 4, b: 16, c: 36}

var obj2 = { 'a': 4, 'b': 8, 'c': 10 };
Object.entries(obj2).forEach( v => obj2[v[0]] *= v[1] );
console.log(obj2); //it will log as {a: 16, b: 64, c: 100} 
```

**使用 jQuery**

```
var ob = { 'a': 2, 'b': 4, 'c': 6 };
$.map(ob, function (val, key) {
   ob[key] *= val;
});
console.log(ob) //it will log as {a: 4, b: 16, c: 36} 
```

或者您也可以使用其他循环`$.each`，例如以下示例：

```
$.each(ob,function (key, value) {
  ob[key] *= value;
});
console.log(ob) //it will also log as {a: 4, b: 16, c: 36} 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2013-02-11T10:51:04.640

上`map function`不存在，`Object.prototype`但是您可以像这样模拟它

```
var myMap = function ( obj, callback ) {

    var result = {};

    for ( var key in obj ) {
        if ( Object.prototype.hasOwnProperty.call( obj, key ) ) {
            if ( typeof callback === 'function' ) {
                result[ key ] = callback.call( obj, obj[ key ], key, obj );
            }
        }
    }

    return result;

};

var myObject = { 'a': 1, 'b': 2, 'c': 3 };

var newObject = myMap( myObject, function ( value, key ) {
    return value * value;
}); 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-08-09T06:12:00.280

编辑：使用较新的 JavaScript 功能的规范方式是 -

```
const identity = x =>
  x

const omap = (f = identity, o = {}) =>
  Object.fromEntries(
    Object.entries(o).map(([ k, v ]) =>
      [ k, f(v) ]
    )
  ) 
```

`o`某个对象在哪里，`f`是您的映射功能。或者我们可以说，给定一个 from 的函数`a -> b`和一个值为 type`a`的对象，生成一个值为 type 的对象`b`。作为伪类型签名 -

```
// omap : (a -> b, { a }) -> { b } 
```

* * *

最初的答案是为了演示一个强大的组合器，`mapReduce`它允许我们以不同的方式思考我们的转换

1.  `m`,*映射*功能 – 让您有机会在...之前转换传入的元素
2.  `r`，*归约*函数——这个函数将累加器与映射元素的结果相结合

直观地说，`mapReduce`创建一个新的 reducer，我们可以直接插入`Array.prototype.reduce`. 但更重要的是，我们可以`omap`通过使用对象 monoid`Object.assign`和`{}`.

```
const identity = x =>
  x

const mapReduce = (m, r) =>
  (a, x) => r (a, m (x))

const omap = (f = identity, o = {}) =>
  Object
    .keys (o)
    .reduce
      ( mapReduce
          ( k => ({ [k]: f (o[k]) })
          , Object.assign
          )
      , {}
      )

const square = x =>
  x * x

const data =
  { a : 1, b : 2, c : 3 }

console .log (omap (square, data))
// { a : 1, b : 4, c : 9 }
```

请注意，我们实际上必须编写的程序的唯一部分是映射实现本身——

```
k => ({ [k]: f (o[k]) }) 
```

这就是说，给定一个已知对象`o`和一些 key `k`，构造一个对象，其计算属性`k`是调用`f`key 的值的结果`o[k]`。

如果我们首先抽象出`mapReduce`的测序潜力`oreduce`

```
// oreduce : (string * a -> string * b, b, { a }) -> { b }
const oreduce = (f = identity, r = null, o = {}) =>
  Object
    .keys (o)
    .reduce
      ( mapReduce
          ( k => [ k, o[k] ]
          , f
          )
      , r
      )

// omap : (a -> b, {a}) -> {b}
const omap = (f = identity, o = {}) =>
  oreduce
    ( mapReduce
        ( ([ k, v ]) =>
            ({ [k]: f (v) })
        , Object.assign
        )
    , {}
    , o
    ) 
```

一切都一样，但`omap`现在可以在更高级别定义。当然，新的`Object.entries`让这看起来很傻，但练习对学习者来说仍然很重要。

你不会看到`mapReduce`这里的全部潜力，但我分享这个答案，因为看看它可以应用多少地方很有趣。如果您对它的派生方式以及它可能有用的其他方式感兴趣，请参阅[此答案](https://stackoverflow.com/a/48505969/633183)。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-01-07T22:02:46.197

我在谷歌搜索中第一个尝试学习如何做到这一点，并认为我会与其他人分享我最近找到的解决方案，该解决方案使用不可变的 npm 包。

我认为分享它很有趣，因为 immutable 在他们自己的文档中使用了 OP 的确切情况 - 以下不是我自己的代码，而是从当前的 immutable-js 文档中提取的：

```
const { Seq } = require('immutable')
const myObject = { a: 1, b: 2, c: 3 }
Seq(myObject).map(x => x * x).toObject();
// { a: 1, b: 4, c: 9 } 
```

并不是说 Seq 有其他属性（“Seq 描述了一个惰性操作，允许它们通过不创建中间集合来有效地链接使用所有高阶集合方法（例如 map 和 filter）”）以及其他一些 immutable-js 数据结构也可能非常有效地完成这项工作。

任何使用这种方法的人当然都必须`npm install immutable`并且可能想要阅读文档：

[https://facebook.github.io/immutable-js/](https://facebook.github.io/immutable-js/)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-08-13T23:37:25.267

## TypeScript 中的对象映射器

我喜欢这个使用的例子`Object.fromEntries`，[但是](https://stackoverflow.com/a/56110762/450913)，它们仍然不是很容易使用。使用`Object.keys`然后查找的答案`key`实际上是在进行可能没有必要的多次查找。

我希望有一个`Object.map`函数，但我们可以创建自己的函数并调用它`objectMap`，并能够同时修改`key`和`value`：

**用法（JavaScript）：**

```
const myObject = { 'a': 1, 'b': 2, 'c': 3 };

// keep the key and modify the value
let obj = objectMap(myObject, val => val * 2);
// obj = { a: 2, b: 4, c: 6 }

// modify both key and value
obj = objectMap(myObject,
    val => val * 2 + '',
    key => (key + key).toUpperCase());
// obj = { AA: '2', BB: '4', CC: '6' } 
```

**代码（打字稿）：**

```
interface Dictionary<T> {
    [key: string]: T;
}

function objectMap<TValue, TResult>(
    obj: Dictionary<TValue>,
    valSelector: (val: TValue, obj: Dictionary<TValue>) => TResult,
    keySelector?: (key: string, obj: Dictionary<TValue>) => string,
    ctx?: Dictionary<TValue>
) {
    const ret = {} as Dictionary<TResult>;
    for (const key of Object.keys(obj)) {
        const retKey = keySelector
            ? keySelector.call(ctx || null, key, obj)
            : key;
        const retVal = valSelector.call(ctx || null, obj[key], obj);
        ret[retKey] = retVal;
    }
    return ret;
} 
```

如果您不使用 TypeScript，请在[​​ TypeScript Playground](http://www.typescriptlang.org/play/)中复制上述代码以获取 JavaScript 代码。

另外，我在参数列表中放在`keySelector`后面的原因`valSelector`是因为它是可选的。

* 一些功劳归功于 alexander-mills 的[回答](https://stackoverflow.com/a/40008272/450913)。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-02-02T13:30:08.270

基于@Amberlamps 的回答，这是一个实用函数（作为评论，它看起来很丑）

```
function mapObject(obj, mapFunc){
    return Object.keys(obj).reduce(function(newObj, value) {
        newObj[value] = mapFunc(obj[value]);
        return newObj;
    }, {});
} 
```

用途是：

```
var obj = {a:1, b:3, c:5}
function double(x){return x * 2}

var newObj = mapObject(obj, double);
//=>  {a: 2, b: 6, c: 10} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2019-02-06T22:06:06.390

我的回复主要基于此处评分最高的回复，希望每个人都能理解（在我的 GitHub 上也有相同的解释）。这就是他对地图的实施有效的原因：

```
Object.keys(images).map((key) => images[key] = 'url(' + '"' + images[key] + '"' +    
')'); 
```

该函数的目的是获取一个对象并使用对所有对象（对象和数组等）都可用的方法修改对象的原始内容，而不返回数组。几乎 JS 中的所有东西都是一个对象，因此继承管道中的元素在技术上可能会使用那些可用的对象（反之亦然）。

之所以可行，是因为 .map 函数返回一个数组，要求您提供数组的显式或隐式 RETURN，而不是简单地修改现有对象。您实际上通过使用 Object.keys 来欺骗程序认为对象是一个数组，这将允许您使用 map 函数，它作用于各个键关联的值（我实际上不小心返回了数组但修复了它）。只要没有正常意义上的返回，就不会有原始对象创建的数组仍然完好无损并按程序修改。

这个特定的程序接受一个名为 images 的对象，并获取其键的值并附加 url 标签以在另一个函数中使用。原文是这样的：

```
var images = { 
snow: 'https://www.trbimg.com/img-5aa059f5/turbine/bs-md-weather-20180305', 
sunny: 'http://www.cubaweather.org/images/weather-photos/large/Sunny-morning-east-   
Matanzas-city- Cuba-20170131-1080.jpg', 
rain: 'https://i.pinimg.com/originals/23/d8
/ab/23d8ab1eebc72a123cebc80ce32b43d8.jpg' }; 
```

...修改后是这样的：

```
var images = { 
snow: url('https://www.trbimg.com/img-5aa059f5/turbine/bs-md-weather-20180305'),     
sunny: url('http://www.cubaweather.org/images/weather-photos/large/Sunny-morning-   
east-Matanzas-city- Cuba-20170131-1080.jpg'), 
rain: url('https://i.pinimg.com/originals/23/d8
/ab/23d8ab1eebc72a123cebc80ce32b43d8.jpg') 
}; 
```

只要没有返回，对象的原始结构就会保持不变，允许正常的属性访问。不要让它像正常一样返回一个数组，一切都会好起来的。目标是将原始值（images[key]）重新分配给想要的东西，而不是其他任何东西。据我所知，为了防止数组输出，必须重新分配图像[键]，并且没有隐式或显式请求返回数组（变量赋值会这样做并且对我来说来回出现故障）。

编辑：

将解决他关于新对象创建的其他方法以避免修改原始对象（并且重新分配似乎仍然是必要的，以避免意外创建一个数组作为输出）。这些函数使用箭头语法，如果您只是想创建一个新对象以供将来使用。

```
const mapper = (obj, mapFn) => Object.keys(obj).reduce((result, key) => {
                result[key] = mapFn(obj)[key];
                return result;
            }, {});

var newImages = mapper(images, (value) => value); 
```

这些函数的工作方式是这样的：

mapFn 采用稍后添加的函数（在本例中为 (value) => value），并在 mapFn( obj)[键],

然后重新定义与 result[key] = mapFn(obj)[key] 中的键关联的原始值

并返回对结果执行的操作（位于 .reduce 函数末尾的括号中的累加器）。

所有这些都是在所选对象上执行的，并且仍然不能对返回的数组进行隐式请求，并且据我所知，仅在重新分配值时才有效。这需要一些心理体操，但减少了所需的代码行，如上所示。输出完全相同，如下所示：

```
{snow: "https://www.trbimg.com/img-5aa059f5/turbine/bs-   
md-weather-20180305", sunny: "http://www.cubaweather.org/images/weather-
photos/l…morning-east-Matanzas-city-Cuba-20170131-1080.jpg", rain: 
"https://i.pinimg.com/originals/23/d8
/ab/23d8ab1eebc72a123cebc80ce32b43d8.jpg"} 
```

请记住，这适用于非数字。您可以通过在 mapFN 函数中简单地返回值来复制任何对象。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-10-18T21:25:58.800

```
const mapObject = (targetObject, callbackFn) => {
    if (!targetObject) return targetObject;
    if (Array.isArray(targetObject)){
        return targetObject.map((v)=>mapObject(v, callbackFn))
    }
    return Object.entries(targetObject).reduce((acc,[key, value]) => {
        const res = callbackFn(key, value);
        if (!Array.isArray(res) && typeof res ==='object'){
            return {...acc, [key]: mapObject(res, callbackFn)}
        }
        if (Array.isArray(res)){
            return {...acc, [key]: res.map((v)=>mapObject(v, callbackFn))}
        }
        return {...acc, [key]: res};
    },{})
};
const mapped = mapObject(a,(key,value)=> {
    if (!Array.isArray(value) && key === 'a') return ;
    if (!Array.isArray(value) && key === 'e') return [];
    if (!Array.isArray(value) && key === 'g') return value * value;
    return value;
});
console.log(JSON.stringify(mapped)); 
// {"b":2,"c":[{"d":2,"e":[],"f":[{"g":4}]}]} 
```

这个函数递归地遍历对象和对象数组。如果返回 undefined 属性可以删除

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-03-16T13:33:26.840

如果您`map`不仅对 ping 值感兴趣，而且对键感兴趣，我已经写过[`Object.map(valueMapper, keyMapper)`](https://github.com/MattiSG/Object.map.js/blob/master/README.md)，它的行为方式如下：

```
var source = { a: 1, b: 2 };
function sum(x) { return x + x }

source.map(sum);            // returns { a: 2, b: 4 }
source.map(undefined, sum); // returns { aa: 1, bb: 2 }
source.map(sum, sum);       // returns { aa: 2, bb: 4 } 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-08-11T04:32:19.470

我需要一个允许修改键的版本（基于@Amberlamps 和@yonatanmn 的答案）；

```
var facts = [ // can be an object or array - see jsfiddle below
    {uuid:"asdfasdf",color:"red"},
    {uuid:"sdfgsdfg",color:"green"},
    {uuid:"dfghdfgh",color:"blue"}
];

var factObject = mapObject({}, facts, function(key, item) {
    return [item.uuid, {test:item.color, oldKey:key}];
});

function mapObject(empty, obj, mapFunc){
    return Object.keys(obj).reduce(function(newObj, key) {
        var kvPair = mapFunc(key, obj[key]);
        newObj[kvPair[0]] = kvPair[1];
        return newObj;
    }, empty);
} 
```

事实对象=

```
{
"asdfasdf": {"color":"red","oldKey":"0"},
"sdfgsdfg": {"color":"green","oldKey":"1"},
"dfghdfgh": {"color":"blue","oldKey":"2"}
} 
```

编辑：稍作更改以传入起始对象 {}。允许它是 [] （如果键是整数）

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-11-16T12:32:18.553

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };

Object.prototype.map = function(fn){
    var oReturn = {};
    for (sCurObjectPropertyName in this) {
        oReturn[sCurObjectPropertyName] = fn(this[sCurObjectPropertyName], sCurObjectPropertyName);
    }
    return oReturn;
}
Object.defineProperty(Object.prototype,'map',{enumerable:false});

newObject = myObject.map(function (value, label) {
    return value * value;
});

// newObject is now { 'a': 1, 'b': 4, 'c': 9 } 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-12-09T12:44:33.183

为了更*准确地*响应OP 的要求，OP 需要一个对象：

> `myObject = { 'a': 1, 'b': 2, 'c': 3 }`

有一个 map 方法`myObject.map`，

> 类似于 Array.prototype.map ，其用法如下：
> 
> ```
> newObject = myObject.map（函数（值，标签）{
>     返回值*值；
> });
> // newObject 现在是 { 'a': 1, 'b': 4, 'c': 9 }
> ```

*恕*我直言（以“*接近所要求的内容*”+“不需要不必要的 ES{5,6,7}”来衡量）答案是：

```
myObject.map = function mapForObject(callback)
{
  var result = {};
  for(var property in this){
    if(this.hasOwnProperty(property) && property != "map"){
      result[property] = callback(this[property],property,this);
    }
  }
  return result;
} 
```

上面的代码避免了有意使用任何语言特性，这些特性只在最近的 ECMAScript 版本中可用。使用上面的代码可以解决这个问题：

```
myObject = { 'a': 1, 'b': 2, 'c': 3 };

myObject.map = function mapForObject(callback)
{
  var result = {};
  for(var property in this){
    if(this.hasOwnProperty(property) && property != "map"){
      result[property] = callback(this[property],property,this);
    }
  }
  return result;
}

newObject = myObject.map(function (value, label) {
  return value * value;
});
console.log("newObject is now",newObject);
```

[此处的替代测试代码](https://alexmahr.de/runjavascript.html#bXlPYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfTsKCm15T2JqZWN0Lm1hcCA9IGZ1bmN0aW9uIG1hcEZvck9iamVjdChjYWxsYmFjaykKewogIHZhciByZXN1bHQgPSB7fTsKICBmb3IodmFyIHByb3BlcnR5IGluIHRoaXMpewogICAgaWYodGhpcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgJiYgcHJvcGVydHkgIT0gIm1hcCIpewogICAgICByZXN1bHRbcHJvcGVydHldID0gY2FsbGJhY2sodGhpc1twcm9wZXJ0eV0scHJvcGVydHksdGhpcyk7CiAgICB9CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KCm5ld09iamVjdCA9IG15T2JqZWN0Lm1hcChmdW5jdGlvbiAodmFsdWUsIGxhYmVsKSB7CiAgcmV0dXJuIHZhbHVlICogdmFsdWU7Cn0pOwpjb25zb2xlLmxvZygibmV3T2JqZWN0IGlzIG5vdyIsbmV3T2JqZWN0KTs=)

除了有些人不赞成之外，还可以像这样将解决方案插入原型链中。

```
Object.prototype.map = function(callback)
{
  var result = {};
  for(var property in this){
    if(this.hasOwnProperty(property)){
      result[property] = callback(this[property],property,this);
    }
  }
  return result;
} 
```

一些东西，在仔细监督的情况下应该不会有任何不良影响，也不会影响`map`其他对象（即 Array's `map`）的方法。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-01-09T21:40:22.663

首先，使用 Object.entries(collection) 转换您的 HTMLCollection。然后它是一个可迭代的，您现在可以在其上使用 .map 方法。

```
Object.entries(collection).map(...) 
```

参考 [https://medium.com/@js_tut/calling-javascript-code-on-multiple-div-elements-without-the-id-attribute-97ff6a50f31](https://medium.com/@js_tut/calling-javascript-code-on-multiple-div-elements-without-the-id-attribute-97ff6a50f31)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-08-06T09:17:44.813

我只处理字符串以减少豁免：

```
Object.keys(params).map(k => typeof params[k] == "string" ? params[k] = params[k].trim() : null); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-01-22T13:55:54.557

嘿写了一个可能有帮助的小映射器函数。

```
 function propertyMapper(object, src){
         for (var property in object) {   
           for (var sourceProp in src) {
               if(property === sourceProp){
                 if(Object.prototype.toString.call( property ) === '[object Array]'){
                   propertyMapper(object[property], src[sourceProp]);
                   }else{
                   object[property] = src[sourceProp];
                }
              }
            }
         }
      } 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-05-22T23:41:00.450

如果有人正在寻找将对象映射到新对象或数组的简单解决方案：

```
// Maps an object to a new object by applying a function to each key+value pair.
// Takes the object to map and a function from (key, value) to mapped value.
const mapObject = (obj, fn) => {
    const newObj = {};
    Object.keys(obj).forEach(k => { newObj[k] = fn(k, obj[k]); });
    return newObj;
};

// Maps an object to a new array by applying a function to each key+value pair.
// Takes the object to map and a function from (key, value) to mapped value.
const mapObjectToArray = (obj, fn) => (
    Object.keys(obj).map(k => fn(k, obj[k]))
); 
```

这可能不适用于所有对象或所有映射函数，但它适用于简单的浅对象和简单的映射函数，这正是我所需要的。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-07-31T15:21:04.323

另一种方法是使用自定义 json stringify 函数，该函数也可以处理深层对象。如果您打算将其作为 json 发布到服务器，这可能会很有用

```
const obj = { 'a': 1, 'b': 2, x: {'c': 3 }}
const json = JSON.stringify(obj, (k, v) => typeof v === 'number' ? v * v : v)

console.log(json)
console.log('back to json:', JSON.parse(json))
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-05-17T15:25:00.670

我需要一个函数来选择性地映射不仅（或排他地）值，还映射键。原始对象不应更改。该对象也只包含原始值。

```
function mappedObject(obj, keyMapper, valueMapper) {

    const mapped = {};
    const keys   = Object.keys(obj);
    const mapKey = typeof keyMapper == 'function';
    const mapVal = typeof valueMapper == 'function';

    for (let i = 0; i < keys.length; i++) {
        const key = mapKey ? keyMapper(keys[i]) : keys[i];
        const val = mapVal ? valueMapper(obj[keys[i]]) : obj[keys[i]];
        mapped[key] = val;
    }

    return mapped;
} 
```

采用。传递一个 keymapper 和一个 valuemapper 函数：

```
const o1 = { x: 1, c: 2 }
mappedObject(o1, k => k + '0', v => v + 1) // {x0: 2, c0: 3} 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2016-10-03T09:20:04.770

我特别想使用与用于单个对象的数组相同的函数，并希望保持简单。这对我有用：

```
var mapped = [item].map(myMapFunction).pop(); 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2020-04-28T15:45:50.023

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };
Object.keys(myObject).filter((item) => myObject[item] *= 2)
console.log(myObject)
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2020-07-01T10:49:30.710

```
var myObject = { 'a': 1, 'b': 2, 'c': 3 };

for (var key in myObject) {
  if (myObject.hasOwnProperty(key)) {
    myObject[key] *= 2;
  }
}

console.log(myObject);
// { 'a': 2, 'b': 4, 'c': 6 }
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2021-05-21T12:27:26.350

这是另一个版本，它允许映射函数根据当前键和值声明任意数量的新属性（键和值）。E：现在也适用于数组。

```
Object.defineProperty(Object.prototype, 'mapEntries', {
  value: function(f,a=Array.isArray(this)?[]:{}) {
    return Object.entries(this).reduce( (o, [k,v]) => 
      Object.assign(o, f(v, Array.isArray(a)?Number(k):k, this)),
      a);
  }
});

const data = { a : 1, b : 2, c : 3 };
const calculate = (v, k) => ({
  [k+'_square']: v*v,
  [k+'_cube']: v*v*v
});
console.log( data.mapEntries( calculate ) );
// {
//  "a_square": 1,  "a_cube": 1,
//  "b_square": 4,  "b_cube": 8,
//  "c_square": 9,  "c_cube": 27
// }

// Demonstration with an array:
const arr = [ 'a', 'b', 'c' ];
const duplicate = (v, i) => ({
  [i*2]: v,
  [i*2+1]: v+v
});
console.log( arr.mapEntries( duplicate ) );
// [ "a", "aa", "b", "bb", "c", "cc" ]
```

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2018-04-09T11:12:31.717

```
const orig = { 'a': 1, 'b': 2, 'c': 3 }

const result = _.transform(orig, (r, v, k) => r[k.trim()] = v * 2);

console.log(result);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
```

使用 new [_.transform() 转换 object](https://lodash.com/docs/4.17.5#transform)。

* * *

## 回答 #36

> 赞同：-2
> 
> 时间：2019-03-01T20:49:55.970

```
settings = {
  message_notification: {
    value: true,
    is_active: true,
    slug: 'message_notification',
    title: 'Message Notification'
  },
  support_notification: {
    value: true,
    is_active: true,
    slug: 'support_notification',
    title: 'Support Notification'
  },
};

let keys = Object.keys(settings);
keys.map(key=> settings[key].value = false )
console.log(settings) 
```

* * *

## 回答 #37

> 赞同：-2
> 
> 时间：2019-05-31T03:26:26.540

ES6：

```
Object.prototype.map = function(mapFunc) {
    return Object.keys(this).map((key, index) => mapFunc(key, this[key], index));
} 
```

ES2015：

```
Object.prototype.map = function (mapFunc) {
    var _this = this;

    return Object.keys(this).map(function (key, index) {
        return mapFunc(key, _this[key], index);
    });
}; 
```

在节点中测试：

```
> a = {foo: "bar"}
{ foo: 'bar' }
> a.map((k,v,i) => v)
[ 'bar' ] 
```

* * *

## 回答 #38

> 赞同：-2
> 
> 时间：2020-07-17T18:50:21.543

使用以下地图函数来定义`myObject.map`

```
o => f=> Object.keys(o).reduce((a,c)=> c=='map' ? a : (a[c]=f(o[c],c),a), {}) 
```

```
let map = o => f=> Object.keys(o).reduce((a,c)=> c=='map' ? a : (a[c]=f(o[c],c),a), {})

// TEST init

myObject = { 'a': 1, 'b': 2, 'c': 3 }
myObject.map = map(myObject);        

// you can do this instead above line but it is not recommended 
// ( you will see `map` key any/all objects)
// Object.prototype.map = map(myObject);

// OP desired interface described in question
newObject = myObject.map(function (value, label) {
    return  value * value;
});

console.log(newObject);
```

* * *

## 回答 #39

> 赞同：-2
> 
> 时间：2021-07-09T12:22:13.637

# 异步，有人吗？

尽管有大量评论，但我没有找到使用`async`映射器的解决方案。这是我的。

使用[p-map](https://www.npmjs.com/package/p-map)，一个受信任的 (@sindresorhus) 和小依赖。

（请注意，没有传递任何选项`p-map`。如果您需要调整并发/错误处理，请参阅文档）。

## 打字稿：

```
import pMap from "p-map";

export const objectMapAsync = async <InputType, ResultType>(
  object: { [s: string]: InputType } | ArrayLike<InputType>,
  mapper: (input: InputType, key: string, index: number) => Promise<ResultType>
): Promise<{
  [k: string]: ResultType;
}> => {
  const mappedTuples = await pMap(
    Object.entries(object),
    async ([key, value], index) => {
      const result = await mapper(value, key, index);
      return [key, result];
    }
  );

  return Object.fromEntries(mappedTuples);
}; 
```

## 纯JS：

```
import pMap from "p-map";

export const objectMapAsync = async (
  object,
  mapper
) => {
  const mappedTuples = await pMap(
    Object.entries(object),
    async ([key, value], index) => {
      const result = await mapper(value, key, index);
      return [key, result];
    }
  );

  return Object.fromEntries(mappedTuples);
};

}; 
```

## 使用示例：

（高度做作，没有错误处理，没有类型）

```
// Our object in question.
const ourFavouriteCharacters = {
  me: "luke",
  you: "vader",
  everyone: "chewbacca",
};

// An async function operating on the object's values (in this case, strings)
const fetchCharacter = (charName) =>
  fetch(`https://swapi.dev/api/people?search=${charName}`)
    .then((res) => res.json())
    .then((res) => res.results[0]);

// `objectMapAsync` will return the final mapped object to us
//  (wrapped in a Promise)
objectMapAsync(ourFavouriteCharacters, fetchCharacter).then((res) =>
  console.log(res)
); 
```

# iphone - 在 QLPreviewController 中启用横向模式

> ID：14810508
> 
> 赞同：0
> 
> 时间：2013-02-11T10:41:15.733
> 
> 标签：iphone, ios, ios6

在我的 iPhone 应用程序中，我使用的是 QLPreviewController。如何为其启用横向模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:50:48.270

尝试以下：

在“AppDelegate”中

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
return UIInterfaceOrientationMaskLandscape;
} 
```

在您实施“QLPreviewController”的相应“ViewController”中

在下面添加：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    return YES;
else if (interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    return YES;
else 
    return NO;
} 
```

希望，对你有帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:21:25.043

在应用程序委托中执行此操作无济于事。创建一个扩展**`UIVieController , UITabbarController (if you are using one in your app)`**并覆盖**Nishant B**为您提供的这两个方法。这两个是iOS6新增的两个api。

# iphone - 为什么我在发送多个请求时收到此错误（HTTP 错误 400。）？

> ID：14810510
> 
> 赞同：1
> 
> 时间：2013-02-11T10:41:38.403
> 
> 标签：iphone, ios, objective-c, twitter

请求 61E31B28-2196-41FC-9F82-B60D236D4347 失败并出现错误：错误域 = HTTP 代码 = 400“操作无法完成。当我发送多个请求以从 twitter 获取数据时出现此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:59:00.690

您的应用程序似乎达到了她的速率限制，请看[这里](https://dev.twitter.com/docs/rate-limiting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:16:10.383

它是服务器响应状态**HTTP CODE = 400**表示您的 URL 参数可能存在任何错误或错误，因此它将**响应 400 视为错误请求**。

当它给出**HTTP CODE = 200**意味着一切都很好并且它给出了**成功**。

# java - 带有对象通配符的通用数组列表

> ID：14810513
> 
> 赞同：0
> 
> 时间：2013-02-11T10:41:48.487
> 
> 标签：java, generics

我创建了一个如下列表。

```
ArrayList<? extends Object> arr = new ArrayList<Object>(); 
```

我通过上面的线理解这是一个上限，任何作为对象子类的元素都可以添加到列表中。现在我正在尝试这样：

```
String str = new String("str");
Integer i = new Integer(4);
Object obj = new Object();
arr.add(obj);
arr.add(str);
arr.add(i); 
```

他们都给出了错误。这里有什么问题？但是当我把它改成

```
ArrayList<? super Object> arr = new ArrayList<Object>(); 
```

一切正常。这是下界。谁能给我解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:43:34.420

当您的集合使用具有上限的通配符作为泛型类型时，您不能将任何内容添加到集合中，**除了 null 。**原因是您可能只是在收藏中添加了错误的时间。更多解释[**参考这里**](https://stackoverflow.com/questions/13993745/add-strings-through-use-of-generic-extends-causes-compiler-error/13993770#13993770)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:23:13.487

声明`ArrayList <? extends Object> arr`意味着它`arr`带有`ArrayList`某种未知类型的元素，而关于这种未知类型的唯一已知就是它扩展了`Object`。一旦你不知道`ArrayList`元素的类型，你可以放在那里的唯一值就是`null`. 放入任何其他值将导致错误，因为编译器无法验证您放入的值是否可`ArrayList`转换为（未知）类型的`ArrayList`元素。事件以下代码将是非法的：

```
arr.set (0, arr.get (0)); 
```

这是非法的，因为从编译器的角度来看，它`arr.get (0)`会返回一些未知类型的值，它扩展了对象，所以它会像`arr.set (0, (Object)arr.get (0))`. 但它不能安全地将类型的值`Object`放入`arr`，因为`arr`不是`ArrayList`，`Object`而是`ArrayList`扩展的某种未知类型`Object`。它可能是`ArrayList`Integer或其他的`String`。`ArrayList`

# html - 为什么我的背景颜色没有填满我的所有页面？

> ID：14810515
> 
> 赞同：1
> 
> 时间：2013-02-11T10:42:02.557
> 
> 标签：html, css

我有以下 HTML：

```
<!doctype html>
<html lang="en" class="light">
<head>
.....
</head>
<body>
...
...
... 
```

我的 CSS 看起来像这样：

```
html.light body
{ background-color:#15293E ; } 
```

我的页面上有足够长的文本以显示滚动条。但是，当我滚动到底部时，我注意到背景颜色并没有一直到页面底部。

我在做什么有问题吗。它看起来像简单的 HTML，但我无法获得背景颜色来填充页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:58:44.210

**选项 1**：

*   你有一个固定的高度，比如你`height:100%`的`max-height`body/html 样式

**选项 2**：

*   您的内容是浮动的或浮动的`position:absolute`，因此正文不会像内容似乎延伸的那样延伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:43:13.007

尝试为根指定 100% 的高度：

```
html, body { height:100%; } 
```

# ios - 使用 NSURL 连接的延迟加载

> ID：14810517
> 
> 赞同：0
> 
> 时间：2013-02-11T10:42:05.160
> 
> 标签：ios

我正在使用以下代码在 tableview 中加载图像。

[懒表图像](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

问题是

当我点击图像时，我会使用服务调用（发布方法）进入该图像的详细视图。
在那个服务电话中，我得到了 xml 格式。通过使用解析，我将获得数据。

但问题是当我点击后退按钮时，它会转到 mainView（延迟加载 tableview）。
当我连续做时，应用程序会崩溃。

请给我上述问题的解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T21:07:17.497

为什么不尝试使用延迟加载库。我强烈推荐[SDWebImage](https://github.com/rs/SDWebImage)。您只需要添加一行即可完成。阅读自述文件，非常简单。

# java - Java 中的文件创建

> ID：14810520
> 
> 赞同：-2
> 
> 时间：2013-02-11T10:42:09.330
> 
> 标签：java, file

我想创建一个文件，其内容应如下所述：

```
Start

NAME      COLLEGE        COUNTRY    MOBILE

xyz        college1      India      1234567890

abc        college2       Germany    4561237890

End 
```

在上面的文件中，列名是固定的，只有每一行的值会改变。未定义行数。我在java中使用String Template尝试了这个，下面的sample.st

```
Start

NAME COLLEGE COUNTRY MOBILE

$name$ $college$ $country$ $mobile$

End 
```

占位符值将被实际 vales 替换。但我不确定这种方法可以有多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:43:34.753

为什么不只为每一行使用模板？使用 a`StringBuilder`连接标题，然后遍历行，通过模板生成字符串并附加到`StringBuilder`.

例如在伪代码中：

```
StringBuilder sb = new StringBuilder();
sb.append("START\n");
sb.append(....)
foreach(Row r : rows) {
   sb.append(template);
}
sb.append("END\n"); 
```

如果做不到这一点，请查看[Velocity](http://velocity.apache.org/)或[Freemarker](http://freemarker.sourceforge.net/)等模板库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:46:21.503

是啊，为什么不呢？就在您阅读文件时，请确保您跳过标题和开始&结束，然后逐行阅读文件。

还可以考虑使用一些分隔符，例如“;” 除非您想通过 sed/awk 之类的方式来阅读它——阅读时这样会更舒服。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:53:35.447

用途`Formatter`和`Scanner`类别：

**文件创建**

```
Formatter f=new Formatter("data.txt");
    f.format("%s%n","START");
    f.format("%s\t\t%s\t\t%s\t\t%s%n","NAME","COLLEGE","COUNTRY","MOBILE");
    for(int i=0;i<10;i++)
    {
     f.format("%d\t\t%d\t\t%d\t\t%d%n",i,i,i,i);  // Apply your logic for input over here
    }
    f.format("%s%n","END");
    f.close(); 
```

**文件读取**

```
 Scanner s=new Scanner(new File("data.txt"));
    while(s.hasNext())
    {
        System.out.println(s.nextLine());   
    }
    s.close();
    } 
```

# android - 如何在画廊上叠加图像视图？

> ID：14810527
> 
> 赞同：2
> 
> 时间：2013-02-11T10:42:37.877
> 
> 标签：android, android-layout, overlay

我想像下图一样覆盖图像视图和画廊

![我想要这样](../Images/ee0eefeceab0336c5690daf19d4b493d.png)

我试过这样..

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="70dp" >
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:src="@drawable/title_header" />

<Gallery 
        android:id="@+id/Gallery" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"></Gallery>

</RelativeLayout> 
```

但它不是覆盖。请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:58:13.870

请试试这个

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="70dp" >

<Gallery 
    android:id="@+id/Gallery" 
    android:layout_width="fill_parent" 
    android:layout_marginTop="10dip"
    android:layout_height="wrap_content"></Gallery>

<ImageView
    android:layout_width="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_height="wrap_content"        
    android:src="@drawable/title_header" />

</RelativeLayout> 
```

`android:layout_marginTop="10dip"`根据需要给予价值。

# maven - 由于 CVS 文件夹，在 Maven 项目上运行声纳分析失败

> ID：14810532
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:06.623
> 
> 标签：maven, cvs, sonarqube

我正在评估 Sonar 以分析我的项目。当我使用“mvn sonar:sonar”运行声纳目标时，出现以下异常：

“未能执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar ... 源目录与包声明不对应”

此错误中提到的 Java 文件是“../foo/bar/CVS/Base/MyClass.java”。

虽然这是我的源目录的一部分，但这是一个由 CVS 系统创建的文件，在我看来，声纳分析应该忽略它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:33:46.230

您没有正确指定 POM 中的属性，CVS 文件永远不应被视为源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T05:33:53.777

当然，资源配置不当。

而且还专门指定CVS，可以使用属性如

```
sonar.scm.provider=cvs 
```

# php - 通过代码截取网页的屏幕截图

> ID：14810533
> 
> 赞同：2
> 
> 时间：2013-02-11T10:43:07.290
> 
> 标签：php, javascript, jquery

我有一个在特定 div 中动态生成 HTML 标签的网站。现在，在创建了所有 HTML 标记之后，我将这些 HTML 标记保存在数据库中。问题是我需要截取生成 HTML 标签的网页的屏幕截图。当我要保存它时，但是；

1.  就屏幕截图而言，我无法想象从哪里开始。
2.  我不想使用第三方 API，因为他们通常会要求一个 url，然后去网站截屏，然后通过电子邮件发送给你。

为什么我不能使用它们是因为当我动态创建 HTML 标签时，它们只是在浏览器上。如果其他人尝试访问相同的链接，他们将获得一个没有当前创建的 HTML 标签的页面（即使我刷新页面，标签也消失了。）。

我不想要一个完整的解决方案，只是一个关于如何开始为这个问题构建解决方案的提示，我的屏幕截图是指图像。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:47:11.160

*   如果您使用的是 HTML5，请检查 HTML2Canvas ( [http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/) )
*   如果您可以访问服务器环境并在其上安装额外的，请尝试 wkhtmltoimage ( [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:47:23.093

我的建议是使用[PhantomJS](http://phantomjs.org/)，它是一种可以通过命令行运行并指定输出的网络浏览器。您可以将其指定为图像、pdf 或其他内容。

不好的是你需要在某个地方指出它，但除此之外它非常适合这类事情。但它不必是公共 url，它可以在内部使用，或者甚至可以从其他地方提供 html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-18T10:29:11.543

使用 webshot 库，它简单易用。您还可以使用 window.print() 方法截取网页的屏幕截图

# makefile - 对于 automake：如何在 configure.ac 中执行命令？

> ID：14810537
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:25.037
> 
> 标签：makefile, configure, autoconf, automake

在汽车制造

我想将命令执行结果分配给 Makefile 变量

如何在**configure.ac**中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T00:58:21.483

要将 的输出分配给`echo foo`变量`var` （即`var=foo`），请将其放入`configure.ac`：

```
AC_SUBST([var],[$( echo foo )])  # use backticks for maximal portability 
```

或者，分配 var 然后调用`AC_SUBST([var])` （没有第二个参数）。

# vbscript - 如何使用 vbscript 在邮件的页眉或页脚中写入消息

> ID：14810538
> 
> 赞同：0
> 
> 时间：2013-02-11T10:43:26.517
> 
> 标签：vbscript

我在 vb 脚本中遇到了一些问题。当我解析文本正文中的文件并发送给所有收件人时。

但我想在文本正文的标题部分附加一些消息。例如，此邮件是自动生成的。无需回复。我正在使用：

objMessage.Textbody = "自动生成的邮件" objMessage.Textbody = file.ReadAll

此处文件在文本正文中解析，但“自动生成的邮件”未在文本正文中出现。

任何想法家伙，如何在页眉或页脚中写消息。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:16:07.717

只需附加 objMessage.Textbody ="Auto Generated mail" & file.ReadAll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:04:43.840

objMessage.Textbody ="自动生成的邮件" & file.ReadAll

每个人都是一条线

# iphone - iphone开发：控制UITableViewCell

> ID：14810540
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:31.487
> 
> 标签：iphone, ios, objective-c, uitableview

在我的应用程序中，我有`UITableView`. 我用复选标记标记选定的单元格，如果它再次被选中，则删除复选标记。我有一个 UIBarButtonItem，它是一个“下一步”按钮，默认情况下它是禁用的。

我的问题是，如果至少有一个`UITableViewCell`有复选标记，则必须启用下一个按钮。如何控制所有单元格，无论其中至少一个是否有复选标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:45:42.023

你不能“只是”使用一个布尔变量，当单元格被选中时它被设置为true，而不是被选中时设置为false？然后每次重新加载 tableview 并相应地禁用/启用下一个按钮时检查一下？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:53:03.013

在 didSelectRowAtindexPath 中只检查是否选中了 chemark，如果是则取消选中它，如果未选中则选中它。

伪代码，不是实际代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
(NSIndexPath *)indexPath
{
    if(checkmark checked )
    {
    un checked it
    nextButton.enabled=false;
    }
    else
    {
    checked it;
    nextButton.enabled=false;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:56:47.277

通常，我认为最好的方法是为每个对象设置一个布尔值。

我希望您有一个传递给表格视图的对象数组。

因此，在 didSelect 方法中，如果设置了数组中的至少 1 个对象，则可以检查 FOR 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:21:29.587

在 tableView 中启用 multipleSelection。在 viewDidLoad

> tableView.allowsMultipleSelection = YES；

每次选择或取消选择一行时，检查`[tableView indexPathsForSelectedRows]`数组的计数。如果计数大于 0，请启用您的按钮。否则禁用它。

> [tableView indexPathsForSelectedRows] 返回一个 NSArray。

不需要额外的参数。

# windows - 在 Windows 批处理文件中获取 YYYYMMDD 格式的日期

> ID：14810544
> 
> 赞同：95
> 
> 时间：2013-02-11T10:43:37.467
> 
> 标签：windows, batch-file

我需要在批处理文件中以 YYYYMMDD 格式获取日期。

我正在使用：

```
set mydate=%date:~6,4%%date:~3,2%%date:~0,2%
echo %mydate% 
```

我需要它在整个系统中保持一致，即使在更改时间设置时也是如此。

请指教。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-12T06:07:53.740

如果在阅读了其他问题并查看了评论部分中提到的链接后，您仍然无法弄清楚，请继续阅读。

首先，你出错的地方是偏移量。

它应该看起来更像这样......

```
set mydate=%date:~10,4%%date:~6,2%/%date:~4,2%
echo %mydate% 
```

如果日期是`Tue 12/02/2013`那么它将显示为`2013/02/12`.

要删除斜杠，代码看起来更像

```
set mydate=%date:~10,4%%date:~7,2%%date:~4,2%
echo %mydate% 
```

这将输出`20130212`

以及将来做的提示，如果`mydate`等于`%date:~10,4%%date:~7,2%`或类似的东西，你可能忘记了波浪号（〜）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:19:28.813

你可以试试这个！这应该适用于 Windows 机器。

```
for /F "usebackq tokens=1,2,3 delims=-" %%I IN (`echo %date%`) do echo "%%I" "%%J" "%%K" 
```

# java - 如何为 JAXB 映射对象列表？

> ID：14810545
> 
> 赞同：3
> 
> 时间：2013-02-11T10:43:37.643
> 
> 标签：java, jaxb, unmarshalling

> 笔记：
> 
> 我不需要创建 java 对象，因为我只需要检查一些值，但我没有找到任何东西可以将它们解组为通用对象或树或任何东西。类似于 Jackson 的 JsonNode。如果可能的话，请告诉我，这样我就可以避免所有这些混乱的对象来映射所有内容。

现在的问题：

我必须解组一个简单的 xml，但结果始终为空。我尝试了不同的注释，但如果它们没有失败，则结果为空。

这似乎与[此问题](https://stackoverflow.com/questions/10485002/java-unmarshal-list-of-objects-with-jaxb)的情况相同，但使用相同的注释不起作用。

xml类似于：

```
<ServiceList>
   <Service Id="1" Code="c" Name="name" ServiceRegistrationStatusID="3" CheckedRegistrationStatusID="2" />
</ServiceList> 
```

我正在像这样解组它：

```
ServiceList list = JAXB.unmarshal(new StringReader(xml), ServiceList.class); 
```

所以我创建了两个这样的内部类：

```
@XmlRootElement
public static class ServiceList {
    private List<Service> services;

    public List<Service> getServices() { return services; }
    @XmlElementWrapper(name = "ServiceList")
    @XmlElement(name = "Service")
    public void setServices(List<Service> services) { this.services = services; }

}

@XmlRootElement(name = "Service")
public static class Service {
    private String id;
    private String code;
    private String name;
    private String serviceRegistrationStatusID;
    private String checkedRegistrationStatusID;

    public String getId() {
        return id;
    }
    @XmlAttribute(name = "Id")
    public void setId(String id) {
        this.id = id;
    }
    public String getCode() {
        return code;
    }
    @XmlAttribute(name = "Code")
    public void setCode(String code) {
        this.code = code;
    }
    public String getName() {
        return name;
    }
    @XmlAttribute(name = "Name")
    public void setName(String name) {
        this.name = name;
    }
    public String getServiceRegistrationStatusID() {
        return serviceRegistrationStatusID;
    }
    @XmlAttribute(name = "ServiceRegistrationStatusID")
    public void setServiceRegistrationStatusID(String serviceRegistrationStatusID) {
        this.serviceRegistrationStatusID = serviceRegistrationStatusID;
    }

    public String getCheckedRegistrationStatusID() {
        return checkedRegistrationStatusID;
    }
    @XmlAttribute(name = "CheckedRegistrationStatusID")
    public void setCheckedRegistrationStatusID(String checkedRegistrationStatusID) {
        this.checkedRegistrationStatusID = checkedRegistrationStatusID;
    }

} 
```

我在一个静态方法中解组xml，所以我不得不把pojos作为静态的。

对此有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:56:29.833

尝试删除 `@XmlElementWrapper(name = "ServiceList")`，它应该工作

# magento-1.7 - 新的 cms 页面正在重定向到主页

> ID：14810547
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:38.937
> 
> 标签：magento-1.7

我正在magento 1.7.0.2 上建立一个电子商务商店。我创建了一个新的 cms 页面，该页面重定向到存储主页。浏览器不会进入新的 csm 页面。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:48:04.300

打开你的magento管理面板。

去

> 系统>配置>>Web> URL选项

和改变

> 自动重定向到基本 URL

到

> 不

# signal-processing - 图像中的碱基和高频

> ID：14810548
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:45.877
> 
> 标签：signal-processing, matlab

***嗨，要使用 matlab 检测碱基和高频，我想像图片中一样将 25% 的图像像素设置为 0，有人知道我该怎么做***

谢谢你

![将中心像素置零][1]

![将边界像素置零][2]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:51:24.923

假设您有一个`img`100x80 的图像并且您希望将中间的 25% 设置为零，您可以这样做：

```
img(26:75,21:60) = 0; 
```

概括这一点应该不难。

您可能也有兴趣将它们设置为`NaN`而不是 0，只需尝试一下。

# c - 检测字符串中的元音

> ID：14810549
> 
> 赞同：0
> 
> 时间：2013-02-11T10:43:55.007
> 
> 标签：c, string, strchr

我试图编写一个函数来检测字符串中的元音和数字。遍历字符串，我试图做一个单行 if 语句来检查一个字符是否是元音。代码如下...

```
void checkString(char *str)
{
    char myVowels[] = "AEIOUaeiou";

    while(*str != '\0')
    {
        if(isdigit(*str))
            printf("Digit here");
        if(strchr(myVowels,*str))
            printf("vowel here");
        str++;
    }
} 
```

数字检查工作完美。但是“（strchr（myVowels，*str））”不起作用。它说明了形式参数和实际参数 1 的不同类型。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:54:53.067

很可能您没有包含正确的头文件。

这工作得很好：

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

void checkString(const char *str)
{
    char myVowels[] = "AEIOUaeiou";

    printf("checking %s... ", str);

    while(*str != '\0')
    {
        if(isdigit(*str))
            printf("Digit here ");
        if(strchr(myVowels,*str))
            printf("vowel here ");
        str++;
    }

    printf("\n");
}

int main(void)
{
  checkString("");
  checkString("bcd");
  checkString("123");
  checkString("by");
  checkString("aye");
  checkString("H2CO3");
  return 0;
} 
```

输出（[ideone](http://ideone.com/hBnz1d)）：

```
checking ... 
checking bcd... 
checking 123... Digit here Digit here Digit here 
checking by... 
checking aye... vowel here vowel here 
checking H2CO3... Digit here vowel here Digit here 
```

# c++ - c ++：在不同链接库中定义的相同函数的运行时冲突

> ID：14810550
> 
> 赞同：1
> 
> 时间：2013-02-11T10:43:55.803
> 
> 标签：c++, qt, ubuntu, g++, gsoap

我有以下问题：我将几个共享 (.so) 库链接到我的 Qt 应用程序，其中一些包含自动生成的 gSoap 源文件的 soapC.cpp 文件。soapC.cpp 文件在不同的 .so 库中并不完全相同，但它们包含许多相同的函数，我们称它们为 foo()。

当我构建我的应用程序时，我按特定顺序链接所有这些库，比如说 lib1.so、lib2.so、lib3.so 等，并且编译运行顺利（我使用的是 g++ compiler v. 4.6） .

但是，当我运行我的应用程序时，我注意到当一段代码（例如在 lib3.so 中）尝试调用也在 lib3.so 中定义的 foo() 时，由于某些原因，来自 lib1.so 的 foo() 被调用。这会导致麻烦和我的应用程序段错误。

我的问题是，是否有任何 c++/链接器选项可以传递给编译器，这会导致在我的应用程序运行时真正来自 lib3.so 的 foo() 将被执行而不是来自 lib1.so 的 foo()？我没有运气尝试 -Bsymbolic 和 -Bsymbolic-functions。

一个可能的解决方案是使用命名空间，但由于代码非常复杂，这是最后可能的解决方案。如果有一个快速简便的解决方案，那就太好了。顺便提一句。我在 Ubuntu 下执行此操作，在 Windows 下，相同的代码可以完美运行并执行应有的操作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:02:00.537

我假设冲突的函数在生成的代码中？

命名空间是最简单的解决方法，您不必为每个头文件和 cpp 文件命名，只需将它们包装起来！为每个库创建一个单独的头文件和cpp文件，并在每个库中#include所有生成的头文件和源文件，并且只将包装器cpp编译到库中。如果文件被重新生成，也将限制破损（最坏的情况，必须将标题或 cpp 添加到您的包装器中）。

lib1.h

```
namespace lib1 {
#include "generated header 1.h"
#include "generated header 2.h"
#include "generated header 3.h"
} 
```

lib1.cpp

```
namespace lib1 {
#include "generated source file 1.cpp"
#include "generated source file 2.cpp"
#include "generated source file 3.cpp"
} 
```

# ruby-on-rails - Net:IMAP 速度和性能建议

> ID：14810552
> 
> 赞同：0
> 
> 时间：2013-02-11T10:43:58.093
> 
> 标签：ruby-on-rails, ruby, imap

我正在使用 Mikel 的邮件[https://github.com/mikel/mail](https://github.com/mikel/mail) ruby​​ gem 从 IMAP 服务器读取。

这一切都很好，但是我想知道你们是否知道加快搜索命令请求的方法。

一个简单的查询，例如：

```
Mail.find(:what => :last, :count => 2, :order => :desc, :keys => ['FROM', 'Jim Smith']) 
```

似乎需要一段时间才能请求。我可以以更快的方式执行此操作或以任何方式改进我的查询吗？此查询的平均加载时间约为 10-30 秒。

任何帮助，如果有的话，将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:14:12.117

在客户端没有什么可以做的。必须是 IMAP 服务器应该快速响应所需的数据。如果用户的邮箱很大，搜索字符串可能需要更长的时间。

您正在点击的查询将检查用户邮箱的所有邮件（['FROM'，'Jim Smith']），因此肯定需要更长的时间。

# tomcat - t 找到基本名称 org.eclipse.persistence.exceptions.i18n.PersistenceUnitLoadingExceptionResource 的捆绑包，语言环境 en_US

> ID：14810553
> 
> 赞同：0
> 
> 时间：2013-02-11T10:44:04.247
> 
> 标签：tomcat, persistence, eclipselink

我在 Tomcat 中运行应用程序时遇到问题，它一直显示此错误。

任何纠正它的帮助将不胜感激。

BR

操作

2013-02-11 10:38:57,932 错误 [com.nfi.util.LoggingUtil] - (NonTranAlertJPA.java:30) 在 com.nfialert.nta.BAL.ClusterAlertService.StartOnlineService(ClusterAlertService.java:73) 在 com。 nfialert.nta.BAL.ClusterAlertService.run(ClusterAlertService.java:53) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java: 603) 在 java.lang.Thread.run(Thread.java:636)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:56:33.670

这不是tomcat问题。

异常发生在`com.nfialert.nta.BAL.ClusterAlertService`类中。询问此类的供应商。

# delphi - 如何在 C++ Builder 中使用 Delphi "in" 运算符

> ID：14810555
> 
> 赞同：7
> 
> 时间：2013-02-11T10:44:05.910
> 
> 标签：delphi, set, c++builder, c++builder-xe

我是一个新手程序员。我需要`in`像这样在 C++ Builder XE 中使用 Delphi 的运算符：

```
if (dgColLines in DBGrid->Options)
    // include vertical lines in total (one per column)
    TotalColumnWidth = TotalColumnWidth + ColumnCount; 
```

```
if (dgColLines **in** DBGrid->Options) 
```

如何在 C++ Builder 中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T10:50:54.270

使用[`Contains`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Set.Contains)方法检查集合是否包含特定元素：

```
if( DBGrid->Options.Contains(dgColLines) )
  TotalColumnWidth = TotalColumnWidth + ColumnCount; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T11:01:42.320

查看有问题的属性`TDBGrid.Options`，其类型[`TDBGridOptions`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.DBGrids.TDBGridOptions)定义为：

```
typedef System::Set<TDBGridOption, TDBGridOption::dgEditing,
    TDBGridOption::dgTitleHotTrack> TDBGridOptions; 
```

如您所见，C++ Builder 使用模板[`System::Set<T, minEl, maxEl>`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Set)来模拟 Delphi 集合类型。

[使用](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Set_Methods)内置 Delphi 集合运算符的所有可用功能都通过`Set`. 具体到这个问题，集合成员资格正在测试使用[`Contains()`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Set.Contains).

# mysql - 如何在插入之前在mysql中生成唯一ID？

> ID：14810556
> 
> 赞同：-5
> 
> 时间：2013-02-11T10:44:07.400
> 
> 标签：mysql

我想在插入之前在 mysql 中生成唯一的 id。哪个概念更适合这个。请告诉我建议。

我想用字符串自动递增......就像创建 SKU id

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T10:46:13.850

您可以只设置一个自动递增的主键，以便每次都获得一个唯一的 id。大多数情况下都会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:49:39.053

但是，您可以像这样[获得自动增量值](https://stackoverflow.com/questions/933565/get-auto-increment-value-with-mysql-query)，使[A_I](http://www.w3schools.com/sql/sql_autoincrement.asp)列每次插入都会增加您的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:47:10.270

您可以将主键设置为自动增量，这对您有用...

# database-connection - 运行报告后，BIRT 报告没有关闭连接？

> ID：14810561
> 
> 赞同：1
> 
> 时间：2013-02-11T10:44:23.203
> 
> 标签：database-connection, tomcat7, jndi, birt

我们在基于 Spring MVC 的 web 应用程序中使用 BIRT Reports。我们的应用中有 2-3 份报告。

其中一个使用 BIRT 图表，另外两个是非常简单的列表报告。然后，所有这些都为 i/p 参数使用多个数据集。

例如，报告 1 正在使用 i/p 参数，例如 Division、Product 等，它们是下拉菜单，并且来自数据库。它们被配置为 BIRT 报告中的数据集。

每当我运行报告时，它们在最初的几次尝试中都能正常工作。之后它变得非常慢，然后它根本不起作用。BIRT 报告打开的连接似乎没有被关闭。

我们使用 tomcat 作为应用服务器和 jndi 数据源来连接到 BIRT 报告中的数据库。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T06:47:29.647

最新版本的 Birt 已修复该错误。你用的是什么版本的Birt？

# iphone - sqlite 文件已加密或不是数据库 iPhone sms.db

> ID：14810562
> 
> 赞同：1
> 
> 时间：2013-02-11T10:44:23.363
> 
> 标签：iphone, sqlite

我有从 iphone 获取的 sms.db sqlite 数据库（未加密）。我正在尝试使用 sqlite 命令行工具（版本 3.7.12）来查看数据库中的内容。

为此我做

```
sqlite3 sms.db 
```

这将我带到 sqlite 提示符，然后我尝试通过执行查看表（或在数据库上执行任何其他命令）

```
.tables 
```

这样做我得到这个错误

```
Error: file is encrypted or is not a database 
```

我很确定它没有加密，它是一个 db 文件。难道我做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-10T14:29:43.517

如果您有错误**sqlite file is encrypted or is not a database**，并且您知道该文件未加密，则可能是您的 SQL 库数据库版本已过期。见[http://www.matt.elementfx.com/forensics/index.php#manip](http://www.matt.elementfx.com/forensics/index.php#manip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T06:09:00.957

好的，我已经找到原因了。我在打开 .db 文件时面临的主要问题是，在 iPhone(>3gs) 中，虽然目录结构和元数据未加密，但单个文件已加密。

所以我可以查看文件的名称及其各自的元数据。

但是我无法在文件中找到数据，因为我没有解密操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:49:14.100

我看到这是一个老问题，我仍然会回答，因为我最近还必须找出如何从 sqlite 短信数据库中检索数据。要在命令行工具中成功检索短信信息，请按照以下步骤操作 >

```
1.sqlite3 3d0d7e5fb2ce288813306e4d4636395e047a3d28
2..tables
3..header on
4.select * from message 
```

希望这对一开始也感到困惑的开发人员有所帮助。

# c# - 如何从另一个 wpf 窗口更改 WPF 窗口的标签文本

> ID：14810564
> 
> 赞同：1
> 
> 时间：2013-02-11T10:44:27.967
> 
> 标签：c#, wpf

我有一个 Page Call Page 1，在第一页上有 1 个控件 - 标签 - 按钮

单击按钮时，我将打开新的 Wpf 窗口，其中有一个按钮，单击该按钮时，我想更改第一个窗口标签文本。

```
LobbyStandardPopupView objLobbyStandardPopupView = new LobbyStandardPopupView();
objLobbyStandardPopupView.Show();

LobbyStandardView objLobbyStandardView = new LobbyStandardView();
objLobbyStandardView.Ring_Game.Text = "Hello"; 
```

我尝试创建对象并更改控制值，但它没有受到影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T11:01:47.940

在您的通话窗口中：

```
ChildWindow w = new ChildWindow ();
w.Owner = this; //here your calling window
w.Show(); 
```

在您的子窗口上：

```
(this.Owner as YourMainWindow).YourProperty  = "Your Text"; 
```

Owner 属性是一个窗口，所以如果你想访问你的自定义属性，你必须转换为你的窗口类型。

在您的情况下，使用页面，将此属性添加到您的`LobbyStandardPopupView`：

```
 public LobbyStandardView mycallingpage = null;
 public LobbyStandardPopupView(LobbyStandardView callingPage)
 {
     InitializeComponent();
     mycallingpage = callingPage;
 } 
```

在您的按钮事件中：

```
mycallingpage.Ring_Game.Text = "Hello"; 
```

# ios - 如何从 iOS 应用程序中找到未使用的 .h、.m 和 xib

> ID：14810568
> 
> 赞同：3
> 
> 时间：2013-02-11T10:44:47.523
> 
> 标签：ios, xcode

请让我知道是否有办法从 iOS 应用程序中找出未使用的 .h 、 .m 文件和 xibs 。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:38:03.560

最后搜索已经完成，arun 的出色工作是从应用程序文件夹中查找未使用的图像以及其他文件。

我的问题仍然悬而未决，我需要从 xcode 的项目文件夹中获取未使用的文件。如果有办法将不胜感激

[https://github.com/arun80/xcodeutils](https://github.com/arun80/xcodeutils)

# ios - 在工具栏中实现一个编辑按钮（故事板）

> ID：14810575
> 
> 赞同：0
> 
> 时间：2013-02-11T10:45:03.327
> 
> 标签：ios

我正在尝试实现一个工具栏按钮。
在这种情况下，我认为是一个编辑按钮。
我在检查器中选择工具栏，然后添加一个带有情节提要的按钮。
我在 viewdidload 中写了这个方法，但是出了点问题。该按钮未显示在工具栏中。

有人可以帮我让它工作吗？

```
 - (void)viewDidLoad
{
     [super viewDidLoad];

     UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Birds"
                                                                    style:UIBarButtonItemStyleBordered 
                                                                   target:self 
                                                                   action:@selector(goToBirdsView:)];

     NSArray *toolbarItems = [NSArray arrayWithObject:editButton];

     self.navigationController.toolbarHidden = NO;
}

-(IBAction)goToBirdsView:(UIButton *)sender 
{
     [self performSegueWithIdentifier:segueToBirdsList sender:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:50:24.270

```
- (void)viewDidLoad
{
     toolBar = [[UIToolBar alloc]initWithFrame:(As_U_Need)];
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc]   initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
        [barItems addObject:flexSpace];

        UIBarButtonItem * editButton= [[UIBarButtonItem alloc] initWithTitle:@"Birds" style:UIBarButtonItemStyleBordered target:self action:@selector(goToBirdsView:)];
    [barItems addObject: editButton];

    [toolBar setItems:barItems animated:YES];
    [self.view addSubView:toolBar];

}

-(IBAction)goToBirdsView:(UIButton *)sender 
{
           [self performSegueWithIdentifier:segueToBirdsList sender:self];
} 
```

# android - 附件图片无法发送到邮件

> ID：14810582
> 
> 赞同：0
> 
> 时间：2013-02-11T10:45:37.063
> 
> 标签：android

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
        emailIntent.setType("image/jpg");
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] 
        {"me@gmail.com"}); 
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
        "Test Subject"); 
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
        "go on read the emails"); 
        Log.v(getClass().getSimpleName(), "sPhotoUri=" + Uri.parse("file:///sdcard/2944154479.jpg"));
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/2944154479.jpg"));
        startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

我使用上面的代码将图像发送到电子邮件，电子邮件页面显示文件已附加但我只收到消息，附件没有收到我的邮件。

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:49:18.070

您首先必须将类型设置`text/plain`为添加您的消息。然后将类型设置`jpeg/image`为添加图像。否则您的信息将被误解。

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,getResources().getString(R.string.emlSendToFriendSubject));
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{emailto});
    emailIntent.setType("text/plain");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,getResources().getString(R.string.emlSendToFriendBody));
    File file = getFileStreamPath(EMAIL_TEMP_FILE);
    emailIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    emailIntent.setType("image/jpeg");
    emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+file.getAbsolutePath()));
    startActivityForResult(Intent.createChooser(emailIntent, getResources().getString(R.string.btnSendToFriend)),ActMain.EMAIL_DONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:48:10.807

请尝试以下代码，它将为您工作。

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
          emailIntent.setType("jpeg/image");
          emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                       new String[] { "" });
          emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
          Date cal = Calendar.getInstance().getTime();
          emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "body");

          Uri uri = Uri.fromFile(new File(Environment
                       .getExternalStorageDirectory(), "/HB.jpg"));

          emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
          emailIntent.setType("text/plain");

          startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T16:36:24.927

尝试这个 ：）

```
String path = ...;

//Need to remove file:////, it has to be something like this storage/emulated/0/repertory/image.jpg
 if(path.startsWith("file")){
    path = path .replace("file:////", "");
 }

Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(path)));
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"test@test.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
i.putExtra(Intent.EXTRA_TEXT   , "body");
startActivity(Intent.createChooser(i, "Sending email...")); 
```

# android - 添加对库项目的引用

> ID：14810583
> 
> 赞同：0
> 
> 时间：2013-02-11T10:45:38.530
> 
> 标签：android, eclipse, google-play-services

当我想使用 Eclipse 添加对我的 Android 项目的 google-play-services_lib 的引用时，我遇到了问题。我按照 developer.android.com 上描述的步骤操作，当我添加时它似乎可以工作，因为我有这个图标：![http://cyberterry.fr/pb_library2.png](../Images/47c3497307cf354087770ed4af9ae1ce.png)

但是之后，当我单击应用/确定并关闭此窗口时，如果我重新打开同一个窗口，我会看到这个图标：

![在此处输入图像描述](../Images/1870c0685f18985602fd0fe6ff05d1d5.png)

我不明白..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:05:14.803

在“android-sdk-macosx/extras/google/google_play_services/libproject/google-play-services_lib/libs”中有一个名为“google-play-services.jar”的.jar 将这个.jar 复制到一个名为“libs”的文件夹中在项目的根目录中。忘记以这种方式添加您正在添加。它必须工作。

# wordpress - wordpress cufon 不工作

> ID：14810588
> 
> 赞同：0
> 
> 时间：2013-02-11T10:45:55.360
> 
> 标签：wordpress, plugins, cufon

我刚刚为 wordpress 安装了 cufon 插件，并试图让它进行字体替换。

我有以下html：

```
<h2 class="gentium twelve columns"><?php echo get_bloginfo('description'); ?></h2> 
```

以及以下 cufon css 调用：

```
Cufon.set('fontFamily', 'gentium-italic').replace('h2'); 
```

在管理面板中，cufon 插件识别出“gentium-italic.js”的存在，我没有收到任何 javascript 错误，但字体没有在前端被替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:51:38.567

打开您的 Cufon 生成的字体文件并检查`font-family`那里指定的名称是否与您在`Cufon.set()`函数中使用的名称匹配。您要查找的代码应类似于：

```
Cufon.registerFont({"w":199,"face":{"font-family":"gentium-italic"... 
```

# visual-studio-2010 - 在 Visual Studio 2010 中开发 Window 手机应用程序

> ID：14810595
> 
> 赞同：0
> 
> 时间：2013-02-11T10:46:12.047
> 
> 标签：visual-studio-2010, windows-phone-7

我对 Windows Phone 应用程序开发非常陌生。我有 Visual Studio 2010，我想在其中开发 Windows Phone 应用程序。那么是否有任何插件可以让我在现有的 Visual Studio 2010 中开发 Windows Phone 应用程序？

当我用谷歌搜索时，我找到了带有 Visual Studio 2012 Express 的 Windows Phone SDK。但我想用我现有的 Visual Studio 2010 开发 Windows Phone 应用程序。是否有可能，如果是，那么如何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:55:16.643

如果您想为 Windows Phone 7.5 和 7.8 手机开发应用程序，您可以在 Visual Studio 2010 Express for Windows Phone SDK 的帮助下完成。但是，请记住，您无法为 WP 8.0 开发应用程序。（顺便说一句，您的 7.5/7.8 应用程序也可以在 WP 8 设备上运行，但关键是您不能使用 8.0 特定应用程序）

并且要开发 7.5/7.8 应用程序，您必须以相同的顺序下载以下 SDK。

[WP 7.1 SDK](http://www.microsoft.com/en-in/download/details.aspx?id=27570)

[WP 7.1.1 SDK 更新](http://www.microsoft.com/en-in/download/details.aspx?id=29233)

[WP 7.8 SDK 更新](http://www.microsoft.com/en-in/download/details.aspx?id=36474)

# c# - WebRequestHandler 停止发送请求

> ID：14810599
> 
> 赞同：0
> 
> 时间：2013-02-11T10:46:17.433
> 
> 标签：c#, asp.net-web-api

我们已经编写了一个[`DelegatingHandler`](http://msdn.microsoft.com/en-us/library/system.net.http.delegatinghandler.aspx)处理我们正在调用的 REST api 的身份验证方案。但是，我们似乎陷入了内部`WebRequestHandler`停止发出请求的情况。

我正在寻找任何可能导致该处理程序停止工作的任何帮助或建议。

我看了看，我看不到`WebRequestHandler`可能有的任何内部状态 - 但是通过尝试发送消息的内部跟踪，我可以在`StartGettingResponse`（来自`HttpClientHandler`）中看到：

```
 {
        if (state.identity != null)
        {
            using (state.identity.Impersonate())
            {
                state.webRequest.BeginGetResponse(this.getResponseCallback, state);
                goto Label_0046;
            }
        }
        state.webRequest.BeginGetResponse(this.getResponseCallback, state);
    Label_0046:
        state.requestMessage.MarkRtcFlushComplete();
    } 
```

`identity`是`null`。`BeginGetResponse`被调用，但`GetResponseCallback`（这`getResponseCallback`是一个缓存的委托）永远不会被调用。我们没有看到任何例外。没有网络流量（任何类型的）。

* * *

我们的委托处理程序的代码：

```
if (request.Headers.Authorization == null)
{
    ClaimsIdentity ident = User == null ? null : User.Identity as ClaimsIdentity;
    if (PreAuthenticate)
    {
        var token = await GenerateAuthenticationToken(ident, guessedRealm,true);
        if (cancellationToken.IsCancellationRequested) return null;
        if (token != null)
        {
            request.Headers.Authorization = new AuthenticationHeaderValue("Bearer", token);
        }
    }
    var firstFlight = await base.SendAsync(request, cancellationToken);

    if (firstFlight.StatusCode != System.Net.HttpStatusCode.Unauthorized) return firstFlight;

    var wwwAuth = firstFlight.Headers.WwwAuthenticate;

    var bearerAuth = wwwAuth.SingleOrDefault(hv => hv.Scheme == "Bearer");

    var realmInfo = bearerAuth.Parameter;

    var realm = realmInfo.Substring(7).TrimEnd('"');

    request.Headers.Authorization = new AuthenticationHeaderValue("Bearer",
        await GenerateAuthenticationToken(ident, realm,false)
    );
    if (cancellationToken.IsCancellationRequested) return null;
}
return await base.SendAsync(request, cancellationToken); 
```

（错误检查和未遵循的路径已删除 - 除了`PreAuthenticate`is `false`）。我们可能会遇到第一次调用`SendAsync`返回（如预期）401 响应的情况。我们生成一个合适的授权令牌并将其作为标头附加。但是第二次调用`SendAsync`never 会导致任何网络流量发生。

我正在使用 MS Network Monitor 检查网络流量，它可以看到第一个请求（以及之前的几个请求，它们也使用相同的处理程序，但没有遇到相同的问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:15:15.267

事实证明，我们泄漏了`HttpResponseMessage`之前一些调用返回的对象，而不是调用`Dispose`它们。（事实上​​，即使在我展示的代码片段中，我们也会泄漏`firstFlight`）

发生这种泄漏并不是特别明显，并且只有一两个泄漏就足以使后续请求在内部排队`System.Net.Connection`但从未实际发送（我认为是因为它强制每个服务器的 HTTP 连接限制）

# jquery - 如何在 jQuery UI Datepicker 中将 minDate 设置为当前日期？

> ID：14810602
> 
> 赞同：61
> 
> 时间：2013-02-11T10:46:26.373
> 
> 标签：jquery, jquery-ui-datepicker

这是我的代码，它不能正常工作。我想设置`minDate`为当前日期。我该怎么做？

```
$("input.DateFrom").datepicker({
    changeMonth: true, 
    changeYear: true, 
    dateFormat: 'yy-mm-dd',
    maxDate: 'today',
    onSelect: function(dateText) {
        $sD = new Date(dateText);
        $("input#DateTo").datepicker('option', 'minDate', min);
    } 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-11T10:48:46.073

`minDate: 0`您可以通过添加选项将 minDate 指定为今天。

```
$("input.DateFrom").datepicker({
    minDate: 0,
    ...
}); 
```

**演示**：http: [//jsfiddle.net/2CZtV/](http://jsfiddle.net/2CZtV/)

**文档**：http: [//jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-11T10:48:31.580

您可以使用该`minDate`属性，如下所示：

```
$("input.DateFrom").datepicker({
    changeMonth: true, 
    changeYear: true, 
    dateFormat: 'yy-mm-dd',
    minDate: 0, // 0 days offset = today
    maxDate: 'today',
    onSelect: function(dateText) {
        $sD = new Date(dateText);
        $("input#DateTo").datepicker('option', 'minDate', min);
    }
}); 
```

您还可以指定日期，如下所示：

```
minDate: new Date(), // = today 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T10:59:13.430

使用这个：

```
 onSelect: function(dateText) {
                 $("input#DateTo").datepicker('option', 'minDate', dateText);
            } 
```

这可能有用：http: [//jsfiddle.net/injulkarnilesh/xNeTe/](http://jsfiddle.net/injulkarnilesh/xNeTe/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-10T13:20:25.727

当前日期的 minDate 属性适用于 -> minDate:"yy-mm-dd" 或 minDate:0

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-07T04:20:43.333

我使用此方法设置开始日期，因为上述或其他代码对我不起作用

```
$(document).ready(function() {
 $('#dateFrm').datepicker('setStartDate', new Date(yyyy, dd, MM));
 });
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-03T08:08:13.390

也可以使用：

```
$("input.DateFrom").datepicker({
    minDate: 'today'
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-28T10:51:27.963

**在 jQuery Datepicker 中将 minDate 设置为当前日期：**

```
$("input.DateFrom").datepicker({
    minDate: new Date()
}); 
```

# java - 在 UNIX 中监视文件/文件夹以获取更改通知

> ID：14810603
> 
> 赞同：4
> 
> 时间：2013-02-11T10:46:31.983
> 
> 标签：java, unix, file-monitoring

要求是监视多个文件夹和文件以了解 UNIX 中的任何更改。我需要能够为创建/修改/删除之类的任何更改挂钩我的 java 代码。有人可以建议任何基于 Java 的框架来做同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:47:49.200

如果您使用 Java 7，则可以使用[WatchService API](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)来监视对文件系统的更改。

如果你被 Java 6 困住了，你可以看看[这篇文章](https://stackoverflow.com/questions/10008351/file-system-change-monitoring-through-java)或[其他](https://stackoverflow.com/questions/1096404/is-there-a-sophisticated-file-system-monitor-for-java-which-is-freeware-or-open)文章中提出的一些替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:47:42.767

你看过 Java 7 的[File Notifier 服务](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)吗？

> java.nio.file 包提供了一个文件更改通知 API，称为 Watch Service API。此 API 使您能够向监视服务注册一个（或多个目录）。注册时，您告诉服务您感兴趣的事件类型：文件创建、文件删除或文件修改。当服务检测到感兴趣的事件时，它会被转发到注册的进程。注册的进程有一个线程（或线程池）专门用于监视它注册的任何事件。当一个事件进来时，它会根据需要进行处理。

对于不能使用 Java 7 的人来说，[JNotify是一个类似的服务/库。](http://jnotify.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:48:29.480

Java 7 引入了`WatchService`哪些监视注册对象的更改和事件。

例子 -

```
Path myDir = Paths.get("D:/test");       

    try {
       WatchService watcher = myDir.getFileSystem().newWatchService();
       myDir.register(watcher, StandardWatchEventKind.ENTRY_CREATE, 
       StandardWatchEventKind.ENTRY_DELETE, StandardWatchEventKind.ENTRY_MODIFY);

       WatchKey watckKey = watcher.take();

       List<WatchEvent<?>> events = watckKey.pollEvents();
       for (WatchEvent event : events) {
            if (event.kind() == StandardWatchEventKind.ENTRY_CREATE) {
                System.out.println("Created: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKind.ENTRY_DELETE) {
                System.out.println("Delete: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKind.ENTRY_MODIFY) {
                System.out.println("Modify: " + event.context().toString());
            }
        }

    } catch (Exception e) {
        System.out.println("Error: " + e.toString());
    }
} 
```

# uima - Alchemy API - TextGetCategory 对我不起作用

> ID：14810604
> 
> 赞同：0
> 
> 时间：2013-02-11T10:46:42.503
> 
> 标签：uima, alchemyapi

当我使用端点[http://access.alchemyapi.com/calls/text/TextGetCategory](http://access.alchemyapi.com/calls/text/TextGetCategory)并打开 CAS Visual Debugger 并提供文本作为法国的度假地点或 url ( [http://www.guardian.co.uk/travel /france+beach](http://www.guardian.co.uk/travel/france+beach) ) 与法国的海滩相关，它总是显示类别为未知，得分为 0.4。所以我尝试给出各种文本，如“意大利餐馆”或“智能手机”，它给出了相同的类别和分数。

我从 SVN 沙箱中获取了 Alchemy API 代码，Eclipse 是我的 IDE。除了我提供了我的私有 api 密钥外，我没有更改此 api 的任何默认值。有没有人在使用 TextGetCategory 时遇到过相同或类似的问题？

任何类型的输入将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:14:59.330

你能提供你正在使用的文本的例子吗？如果文本太短，结果会变得不那么准确或不确定，而“Apple Computers”返回相当高的分数，“Italian Restaurants”太短而无法正确确定类别。尝试一些包含更多文本的测试。

此外，如果您要提交 URL，请确保您使用的是[http://access.alchemyapi.com/calls/url/URLGetCategory](http://access.alchemyapi.com/calls/url/URLGetCategory)端点以及“url”查询字符串或帖子值以及您的 api 密钥。当我这样做时，我得到了 url [http://www.guardian.co.uk/travel/france+beach](http://www.guardian.co.uk/travel/france+beach)的结果，反映它在“娱乐”类别中，正如预期的那样。

希望对您有所帮助，如果还不够，请告诉我！

# java - 除非我指定访问角色，否则 Spring Security 会忽略我的基本身份验证

> ID：14810607
> 
> 赞同：0
> 
> 时间：2013-02-11T10:46:59.090
> 
> 标签：java, spring, spring-security, resteasy

使用 Spring 3.1.2 和 RestEasy 2.3.4。

我有一些 REST 资源。但是，我不想在 Spring 中指定所有这些角色都需要哪些角色。这是我目前的设置：

```
<security:http auto-config="true" use-expressions="true">
    <security:http-basic/>
    <security:intercept-url pattern="/secrets/**" access="ROLE_USER"/>
    <security:intercept-url pattern="/**"/>
</security:http> 
```

对“/secret/**”的调用通过了身份验证，我可以从 SecurityContextHolder-object 访问用户和角色。但是，即使我通过了基本凭据，对 '/**' 的调用也不会获得身份验证。我想根据获取的数据而不是通过 url 进行授权。

除非我指定访问权限，否则 Spring Security 似乎忽略了我的基本身份验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:58:35.260

尝试**isFullyAuthenticated()**表达式：

```
<security:intercept-url pattern="/**" access="isFullyAuthenticated()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:48:45.683

我最终得到了一个不太完美的解决方案。我将经过身份验证的访问权限放在了 secrets url 的顶部。然后我允许所有其他未经身份验证的访问 GET 方法。这暂时解决了这个问题。我仍然希望根据正在访问的数据进行身份验证。

中间的intercept-url 行确实需要身份验证，即使它应该存在，也不会将身份验证信息传递给服务。

```
<security:http use-expressions="true">
    <security:intercept-url pattern="/secrets/**" access="isAuthenticated()"/>
    <security:intercept-url pattern="/**" method="GET" access="isAnonymous()"/>
    <security:intercept-url pattern="/**" access="isAuthenticated()"/>
    <security:http-basic/>
</security:http> 
```

# java - 休眠 MS SQL 连接

> ID：14810610
> 
> 赞同：2
> 
> 时间：2013-02-11T10:47:14.337
> 
> 标签：java, sql, hibernate

我正在使用 jar jtds-1.3.0.jar 通过休眠连接到 MS SQL，下面是配置文件

```
<hibernate-configuration>
<session-factory>
    <!-- Database connection settings -->
    <property name="connection.url">jdbc:jtds:sqlserver://localhost/login</property>
    <property name="connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
    <property name="connection.username">sa</property>
    <property name="connection.password">user</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>

    <!-- Echo all executed SQL to stdout -->

        <property name="show_sql">true</property>
    <!--  Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">update</property>

    <!-- configuration pool via c3p0--> 
    <property name="c3p0.acquire_increment">5</property> 
    <property name="c3p0.idle_test_period">100</property> <!-- seconds --> 
    <property name="c3p0.max_size">20</property> 
    <property name="c3p0.max_statements">50</property> 
    <property name="c3p0.min_size">5</property> 
    <property name="c3p0.timeout">1800</property> <!-- seconds --> 
    <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
    <!--Basic user functionality-->

</session-factory> 
```

但是每次我运行我的项目时，它都会出现网络错误和连接被拒绝的错误。我为仍然给出错误的[这个链接提供了参考。](https://stackoverflow.com/questions/2497725/connecting-to-ms-sql-through-hibernate)下面是我的堆栈跟踪

```
java.sql.SQLException: Network error IOException: Connection refused: connect
at net.sourceforge.jtds.jdbc.JtdsConnection.<init>(JtdsConnection.java:434)
at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:183)
at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:183)
at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:172)
at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:152)
at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1074)
at com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPendingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1061)
at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
at com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.run(BasicResourcePool.java:1796)
at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:635) Caused by: java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:300)
at net.sourceforge.jtds.jdbc.SharedSocket.<init>(SharedSocket.java:253)
at net.sourceforge.jtds.jdbc.JtdsConnection.<init>(JtdsConnection.java:329) 
```

下面是图片 ![服务器配置管理器](../Images/832eb1124bfcc549e90cb622beb722f8.png) ，谁能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:02:20.967

您确定您的服务器正在侦听端口 1433 吗？要确认实际问题出在 Java（即您的配置）上，请运行

```
telnet localhost 1433 
```

如果你没有得到答案，那么 MS SQL 很可能没有在 1433 上运行。在 MS SQL 中有一个使用动态端口的选项，请确保你没有启用它。

[http://frightanic.com/software-development/connecting-to-ms-sql-server-2012-express-through-jdbc-failed/](http://frightanic.com/software-development/connecting-to-ms-sql-server-2012-express-through-jdbc-failed/)：

> 第一个障碍是了解 MS SQL Express 默认使用动态端口。要从 Java 以 TCP/IP 方式连接，您需要手动配置静态端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:13:24.160

是`portNumber`是可选的。默认值为 1433。如果您使用`default`，则不必`port`在`URL`.

```
<property name="connection.pool_size">10</property> 
```

它一次只允许一个连接。我猜想在你的程序中你试图打开另一个会话的地方。

看看

[Hibernate 配置连接池大小](https://stackoverflow.com/questions/9802684/hibernate-config-connection-pool-size)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:08:47.853

尝试将网址更改为：

```
<property name="connection.url">jdbc:jtds:sqlserver://localhost:1443;DatabaseName=login</property> 
```

将模式名称与服务器地址分开。

我使用 DBVisualizer 连接到 MS Sql，它显示了 url 配置的格式：

```
URL Format: jdbc:jtds:sqlserver://<server>:<port1443>;DatabaseName=<database> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T11:27:11.837

我找到了解决问题的方法。我通过引用[此](https://stackoverflow.com/questions/13231606/jdbcjtds-connection-to-sql-server)讨论将端口号从 1433 更改为 1434，该端口号处于活动状态。谢谢大家的时间

# jquery - 在幻灯片悬停时添加暂停

> ID：14810611
> 
> 赞同：0
> 
> 时间：2013-02-11T10:47:17.000
> 
> 标签：jquery, slideshow, mouseover

嗨，我正在尝试为我拥有的幻灯片添加暂停。

```
$(document).ready(function() {
  $('#slides').superslides({
    slide_easing: 'easeInOutCubic',
    slide_speed: 900,
    pagination: true,
    hashchange: true,
    scrollable: true,
    pagination: false,
    play:6000
  });
}); 
```

我要添加什么以使幻灯片在鼠标悬停时暂停

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T16:38:54.830

我不知道你是否找到了你问题的答案。[然而，在Github 文档](https://github.com/nicinabox/superslides#api)中有一个 API 调用用于超级幻灯片。要实现这一点，您可能会执行以下操作：

```
$('#slides').on('mouseenter', function() { $(this).superslides('stop'); }); 
```

并离开悬停：

```
$('#slides').on('mouseleave', function() { $(this).superslides('start'); }); 
```

如果这有帮助，请告诉我！

# asp.net-mvc - 调试 ASP.NET MVC 操作筛选器

> ID：14810615
> 
> 赞同：3
> 
> 时间：2013-02-11T10:47:23.973
> 
> 标签：asp.net-mvc, debugging

我最近不幸需要在 ASP.NET MVC 操作中找到错误的根本原因。错误结果出现在操作上声明的操作过滤器之一中。然而，发现这个错误主要是运气，而且花费的时间比合理的要多。将来，如何调试 ASP.NET MVC 操作过滤器的问题？

尤其：

*   如何找出针对特定请求执行的过滤器以及执行顺序？
*   我可以逐步通过这些过滤器吗？
*   我至少可以在每个过滤器之间执行一些钩子以帮助找到根本原因（例如通过跟踪某些状态）吗？
*   当过滤器中止请求或导致异常时，我可以挂钩一些事件吗？

我尝试使用 VS.NET 调试器；但是它不会以有用的方式进入过滤器。如果我在请求之前暂停执行，服务器会酌情等待调试器，但是当我随后使用 Step into 或 step over 时，它会继续执行而不单步通过任何过滤器（只是我的代码已关闭）。如果我事先知道注册了哪些过滤器，我可能可以设置一个断点，但这几乎不实用，尤其是因为某些过滤器在第三方代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-16T20:32:57.653

以下代码将按调用顺序写入控制器和操作的名称。我希望它对其他人也有帮助，因为它对我帮助很大。

如果您有一个基本控制器并让其余控制器从它继承，那就太好了，然后以下代码将让您知道所有控制器和为任何请求调用的操作。

```
#if DEBUG 
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
            {
                 string controller = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
                 string action = filterContext.ActionDescriptor.ActionName;

                 Debug.WriteLine("Controller-" + controller + ", Action-" + action);
            }
#endif 
```

PS-如果您想要更多详细信息，例如操作的处理时间或某些可插拔系统，请使用[Glimpse](http://getglimpse.com/ "一瞥")。只需几分钟即可使其运行。这是一个很棒的工具。附带说明一下，glimpse 提供的时间并不准确，因为还包括 Glimpse 的一些开销。

# html - CSS：设置 div 高度以填充父 div，无位置：abolute；

> ID：14810621
> 
> 赞同：4
> 
> 时间：2013-02-11T10:47:46.723
> 
> 标签：html, css, height, parent-child

我（再次）遇到了将子`<div>`标签的大小调整为其父大小的问题。父元素由另一个脚本控制（不想触摸它），可以放置在屏幕上具有可变高度/宽度的任何位置。在我下面的示例中，这是`#container`. 我想在里面放一些布局，它有一些可变的和一些固定的尺寸：

*   一个页脚（这里：）`#footer`，具有固定的高度（例如 100 像素）并填满父级的整个宽度
*   左侧的导航栏（此处`#left`：），具有固定宽度（例如 150 像素）并填满上部的整个高度
*   导航栏右侧的内容部分，即剩余空间。

我为“页脚”找到了一些解决方案，它确实有效（[让一个 div 填充剩余屏幕空间的高度](https://stackoverflow.com/questions/90178/make-a-div-fill-the-remaining-screen-space)-> 'daniels' 发布）。但我无法达到`#left`填满整个高度的部分。

下面是我的示例代码（在线版本：[http](http://worldtalk.de/v2013/test.html) ://worldtalk.de/v2013/test.html ；不会永远在线！）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Title</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <style type="text/css" media="screen">
    * {  margin: 0; }
    html, body { height: 100%; }
    #container {
        position: absolute; /* have no control over that container element */
        width: 400px;  height: 300px;
        top: 100px;    left: 10px;
        background: red;
    }
    #upper {
        min-height: 100%;
        height:     auto !important;
        height:     100%;
        margin:     0 auto -100px; /* -100px being the size of the footer */
    }
    #footer {
        background: green;
        height: 100px;
    }
    #left {
      background: yellow;
      float: left; width: 150px;

      /* the following CSS doesn't do what I want... */

      min-height: 100%;
      height:     auto !important;
      height: 100%;
    }
    </style>
</head>
<body>
    <div id="container">
      <div id="upper">
        <div id="left">left - shall reach down until footer</div>
        content part...<br> shall be next to it...
      </div>
      <div id="footer">footer</div>
    </div>
</body>
</html> 
```

有什么想法可以在不使用 JavaScript 的情况下实现这一目标？

问候，斯特凡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:01:40.903

**解决方案 1**

我认为问题`position:absolute;`在于左侧导航将放置在页脚的顶部，但是这里是一个使用绝对左侧导航和页脚的解决方案。它的缺陷是左侧导航在页脚下继续，这可能是也可能不是问题。

```
#footer {
  position:absolute;
  left:0;
  right:0;
}

#left {
  position:absolute;
  bottom:0;
} 
```

[http://jsfiddle.net/LmCLz/1/](http://jsfiddle.net/LmCLz/1/)

**解决方案 2**

像这样重新排列元素：

```
<div id="container">
    <div class="inner">
        <div id="left">left - shall reach down until footer</div>
        <div id="right">content part...<br> shall be next to it...</div>
        <div class="clear"></div>
    </div>
    <div id="footer">footer</div>
</div> 
```

然后应用 a`margin-bottom:-100px;`为页脚腾出空间：

```
.inner {
    height:100%;
    margin-bottom:-100px;
} 
```

[http://jsfiddle.net/LmCLz/3/](http://jsfiddle.net/LmCLz/3/)

# php - 如何通过 AJAX 提交同名文本框值

> ID：14810624
> 
> 赞同：1
> 
> 时间：2013-02-11T10:47:50.560
> 
> 标签：php, ajax, form-submit

我有许多通过 jQuery 动态添加的文本框。他们都有相同的名字，比如......

```
<input type="text" name="employer" id="employer" />
<input type="text" name="position" id="position" />
<input type="text" name="city" id="city" />

<input type="text" name="employer" id="employer" />
<input type="text" name="position" id="position" />
<input type="text" name="city" id="city" />

so many... 
```

我通过 AJAX 传递所有文本框值，但它不起作用。我的 AJAX 代码如下..

**AJAX**

```
$.ajax(
    {
      type: "POST",
      url: $("#cfgRoot").val()+'/accounts/educationInfoPost.php',
      data:
      {
        employer:$("#employer").val().trim(),
        position:$("#position").val().trim(),
        city:$("#city").val().trim()
      }
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:53:46.323

```
var empName = $("input[name=employer]").map(function(){
   return $(this).val();
}).get().join(",");
```

并将其传递给 ajax 数据。

**代码**

```
 var empName = $("input[name=employer]").map(function(){
   return $(this).val();
}).get().join(",");

var position = $("input[name=position]").map(function(){
   return $(this).val();
}).get().join(",");

var city = $("input[name=city]").map(function(){
   return $(this).val();
}).get().join(",");

$.ajax(
{
    type: "POST",
    url: $("#cfgRoot").val()+'/accounts/educationInfoPost.php',
    data:
    {
        employer:empName,
        position:position,
        city:city
    }
});
```

还有一件事**不要为 DOM 添加相同的 ID。**

**每个 DOM 的 ID 必须是唯一的**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:53:45.957

您认为当您给 2 个输入提供相同的名称和相同的 ID 时会发生什么？

如果您有多个输入，并且您希望它们具有相同的名称，那么您至少应该给它们提供相似的名称。

就像是

```
<input type="text" name="employer1" class="employer" />
<input type="text" name="position1" class="position" />
<input type="text" name="city1" class="city" /> 
```

或者，您可以将它们提供给数组

```
<input type="text" name="employer[]" class="employer" />
<input type="text" name="position[]" class="position" />
<input type="text" name="city[]" class="city" /> 
```

至于通过 AJAX 发送此数据，您可能只想序列化整个表单。当然，这是基于您希望一次性发送所有表单数据的假设。

```
var serializedForm = $('form').serialize();
$.ajax(
{
    data: serializedForm,
    //rest of the code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:57:18.667

您的字段 ID 不是唯一的，请尝试使您的 ID 唯一，它应该可以工作。

# javascript - 在不使用选择器的情况下使用 javascript 更改 HTML

> ID：14810629
> 
> 赞同：1
> 
> 时间：2013-02-11T10:48:05.967
> 
> 标签：javascript, html, ajax, responsive-design, ssi

好的-首先我知道这并不理想-但是我们继承了一个问题并且一些经过深思熟虑的SSI html。

所以一些背景：我们已经实现了一个响应式站点，它必须包含来自客户端的一些 SSI 代码，用于全球顶部导航和页脚 - 到目前为止一切都很好。但是，当网站在移动设备上调整大小/加载时，SSI 需要从 DESKTOP 更改为 MOBILE。我们目前正在做所有这些客户端。我们在断点处有一个触发器来更改 dom 以执行所有响应式操作。

一个类似的例子在这里[http://www.conrandesigngroup.com](http://www.conrandesigngroup.com)。（调整浏览器大小以查看会发生什么。）

通常我们会将 SSI 加载到保存页面中，并使用某种选择器将代码 AJAX 到适当的位置。

问题：SSI 不是完全形成的 HTML，它看起来像这样：

```
<!-- desktop ssi -->
</head>
<body>
Whole bunch of desktop html...
<div class="content"> 
```

那么我们为移动站点提供的 SSI 是：

```
<!-- mobile ssi -->
<script>some script...</script>
</head>
<body>
Whole bunch of mobile html...
<div class="content"> 
```

所以你会注意到有一个结束`</head>`和一个开口`<body>`，最后有一个开口`<div>`。所以我们无法选择它并使用 DOM 替换。我们正在考虑在代码的任一侧使用注释并使用 javascript 正则表达式来替换代码。我不确定这是否真的会更新浏览器。

所以在桌面模式下，整个页面将如下所示：

```
<html>
<title>my page</title>
<head>
...all the head stuff
<!-- START of ssi -->
<!-- desktop ssi -->
</head>
<body>
Whole bunch of desktop html...
<div class="content">
<!-- END of SSI -->
...all the page HTML
</div>
</body>
</html> 
```

这很好 - HTML 都放在服务器端，我们可以正确打开和关闭标签。问题是我们如何使用客户端代码更改评论中的 HTML`<!- START of ssi -->...<!-- END of SSI -->`

最后，它并不是一个真正的 SSI 问题 - 而是一种更改一些 HTML 的方法，这些 HTML 没有很好地包含在一个元素中。

有人遇到过这个问题或有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:40:17.013

共同点是这样的：

*   `body`元素包含内容
*   移动和桌面内容都从 body 的第一个孩子开始

对于两个版本，清空第一个元素的代码是相同的：

```
document.getElementsByTagName("body")[0].firstChild.innerHTML = ""; 
```

将代码包装在一个`pre`元素中以便于修改。

**参考**

*   [W3C DOM4](https://www.w3.org/TR/dom/)

# asp.net-mvc - FourSquare 签到问题

> ID：14810634
> 
> 赞同：1
> 
> 时间：2013-02-11T10:48:15.427
> 
> 标签：asp.net-mvc, foursquare

在 FourSquare 我是以下场地的场地经理

[https://foursquare.com/v/blue-label-labs/51127b9ce4b0fe8b7daf9dbb](https://foursquare.com/v/blue-label-labs/51127b9ce4b0fe8b7daf9dbb)

该场地位于美国纽约布鲁克林，邮编 11211。

在这个场地，当任何用户从 +5:30 时区（场地时区为 -5:00）签到时，我没有获得该用户的任何历史记录，也没有让该用户进入这里（API 服务）还。

我想在我的场地获得来自世界各地任何用户的所有签到。

有没有时区问题？任何机构可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:52:49.723

Foursquare 不允许您签到某个位置，除非它认为用户实际上就在附近，因此这可能与该特定用户从地球另一端签到的事实有关。这也意味着您无法真正在特定地点从“世界各地”获得签到。

有关更多应用程序或产品问题，请参阅[Foursquare 支持](http://support.foursquare.com/home)并为 API 或平台问题保留 StackOverflow。

# c# - SQL CLR C# 用户定义函数 - 从地址获取房屋或公寓号码

> ID：14810637
> 
> 赞同：1
> 
> 时间：2013-02-11T10:48:28.947
> 
> 标签：c#, sql, clr, user-defined-functions

我有以下 SQL CLR C# UDF：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using System.Collections;
using System.Text;

public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString clrFn_GetDigits(string theWord)
    {

        if (theWord == null) { theWord = ""; }
        string newWord = "";

        char[] KeepArray = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '\\', '/', '-', ' '};

        foreach (char thischar in theWord)
        {
            foreach (char keepchar in KeepArray)
            {
                if (keepchar == thischar)
                {     
                    newWord += thischar;
                }    
            }  
        }

        return (SqlString)(newWord.Trim());
    }
} 
```

到目前为止，这很好用，除了以下地址：

```
141A, Some Street Avenue
4b, St Georges Street
16E Test Avenue 
```

我希望我的函数返回 141A、4b 和 16E

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:58:04.570

我没有测试下面的代码，但是按照这些思路，需要进行一些错误检查以确保转换不会失败，但是这个解决方案可以为您提供所需的

```
 char[] KeepArray = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '\\', '/', '-', ' ' };

        foreach (char thischar in theWord) {

            if (KeepArray.Contains(thischar)) {

                newWord += thischar;
            }
            else if (Char.IsLetter(thischar) && newWord.Length > 0){

                try {
                    if (Char.IsDigit((Convert.ToChar(newWord.Substring(newWord.Length - 1, 1))))) {
                        newWord += thischar;

                    }

                }
                catch {

                }
            }

        } 
```

# parsing - Unix：解析一个 csv（实际上是分号）分隔的文件，将每个日期字段增加一天

> ID：14810640
> 
> 赞同：0
> 
> 时间：2013-02-11T10:48:33.147
> 
> 标签：parsing, unix, date, csv, increment

我一直在寻找可以做到这一点的东西。我认为这会相对简单。

我使用包含 awk 的 bash 脚本来替换特定列中的日期，但我不知道如何自动识别日期字段、智能地递增日期以及将修改后的日期写回文件。每行大约包含 30 列，大约 10 列包含 dd.mm.YYYY 格式的日期。

对方法的任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:52:01.450

我会编写一个脚本（Perl？）来执行此操作，并使用该脚本语言的日期库（例如[Date::Manip](http://search.cpan.org/~sbeck/Date-Manip-6.38/lib/Date/Manip.pod)）智能地处理日期。Perl（或您自己喜欢的脚本语言）应该能够处理打开文件、读取/解析、进行日期操作和重写等所有复杂性，而不会产生其他进程等。

编辑：关于你上面的评论，你有什么样的 Unix，你无权访问 Perl/Python/Ruby 等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:51:11.720

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    OFS=FS=";"
}

{
    for (i=1;i<=NF;i++) {

        dx = mktime(gensub(/(..)\.(..)\.(....)/, "\\3 \\2 \\1 0 0 0", "", $i)) + 86400

        $i = (dx == "86399" ? $i : strftime("%d.%m.%Y", dx))
    }
}1 
```

内容`file`：

```
COL1;COL2;COL3;COL4;COL5;COL6;COL7;COL8;COL9;COL10;COL11;COL12;COL13;COL14;COL15;COL16;COL17;COL18;COL19;COL20;COL21;COL22;COL23;COL24;COL25;COL26;COL27 1234567;12345;Abc;123;12345678999;ABC;1234-123456-12-123;1234567;15.11.2012;15.11.2012;31.01.2013;10.01.2011;10.01.2014;10.01.2013;10.01.2014;;Abc/123;1A;;0;0;Abcdef;15.01.2014;15.01.2014;ABC;-123456789;05.02.2013 
```

结果：

```
COL1;COL2;COL3;COL4;COL5;COL6;COL7;COL8;COL9;COL10;COL11;COL12;COL13;COL14;COL15;COL16;COL17;COL18;COL19;COL20;COL21;COL22;COL23;COL24;COL25;COL26;COL27 1234567;12345;Abc;123;12345678999;ABC;1234-123456-12-123;1234567;16.11.2012;16.11.2012;01.02.2013;11.01.2011;11.01.2014;11.01.2013;11.01.2014;;Abc/123;1A;;0;0;Abcdef;16.01.2014;16.01.2014;ABC;-123456789;06.02.2013 
```

或者，这是单线：

```
awk -F ";" '{ for (i=1;i<=NF;i++) { dx = mktime(gensub(/(..)\.(..)\.(....)/, "\\3 \\2 \\1 0 0 0", "", $i)) + 86400; $i = (dx == "86399" ? $i : strftime("%d.%m.%Y", dx)) } }1' OFS=";" file 
```

要覆盖原始文件，请使用重定向：

```
awk -f script.awk file > temp && mv temp file 
```

# compact-framework - .Net Compact Framework for Windows Embedded

> ID：14810641
> 
> 赞同：0
> 
> 时间：2013-02-11T10:48:35.333
> 
> 标签：compact-framework, windows-embedded-compact

我可以在 Windows 7 Compact Embedded 上使用 .Net Framework(Regular) 还是只能使用 .net compact framework？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:48:56.897

对于 Windows Embedded Compact，您必须使用 Compact Framework（但对于 Windows Embedded Standard，您必须使用完整的框架）。无法加载完整的框架程序集，并且完整的框架 CLR 将不会在 CE (Compact) 下执行。

# php - 只能由 PHP 读取的文件

> ID：14810642
> 
> 赞同：1
> 
> 时间：2013-02-11T10:48:36.477
> 
> 标签：php, chmod

我有另一个问题：

当我写入`localhost/folder/file.txt`浏览器时，它会打开并显示 file.txt 的内容。

但我想让这个文件只能被 PHP 读取，而不是浏览器。

我尝试了一切，`chmod`但它不起作用。有可能这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:50:21.667

写入Web 根目录*之外*的文件，然后 Web 服务器将无法将其提供给客户端。（文件不需要位于文档根目录下以便 PHP 读取它）。

其他选项包括：

*   使用您的网络服务器的 auth/authz 系统来保护文件（不推荐用于此问题，因为配置错误更有可能破坏安全性，然后文件将被放置在错误的位置）
*   改用数据库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T10:50:46.687

您可以拒绝访问`.txt`扩展程序。

`.htaccess`

```
# prevent viewing of a specific file
<Files file.txt>
 order allow,deny
 deny from all
</Files>

# multiple file types
<FilesMatch ".(htaccess|htpasswd|ini|phps|fla|psd|log|sh|txt)$">
 Order Allow,Deny
 Deny from all
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:50:07.110

您可以将文本文件作为 BLOB 或 TEXT 放入 mySQL 数据库。因此，浏览器无法读取，只能通过查询（通过 php）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:14:23.247

最简单的解决方案：

```
$s=file_get_contents('test.txt'); 
```

如果文件有一些代码要执行，你可以`eval`。

```
eval(file_get_contents('test.txt')); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-11T11:16:04.643

你试过 chmod 到 660 吗？

我只是使用我的网络服务器尝试过，它不可用。

# hipaa - 是否记录了任何健康信息交换的 API？

> ID：14810647
> 
> 赞同：2
> 
> 时间：2013-02-11T10:48:53.587
> 
> 标签：hipaa, truevault

我不确定 StackExchange 中的正确站点来问这个问题，但由于它是关于 API 的，所以我只是使用 Stack Overflow。

在美国，目前越来越多的州和公司正在建立健康信息交换系统，以便在不同医院、诊所等之间以电子方式交换记录。我想知道的是：这些协议、API 等是否记录在任何地方？在过去的几周里，我断断续续地试图从任何州找到任何东西，详细说明这些具体是如何工作的，但我找不到任何东西。我确实发现对“文档”和“标准”的模糊引用，没有关于协议、编码等的详细信息。

可能只是没有使用正确的术语进行搜索，尽管我的一部分人开始怀疑任何地方都没有记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T17:31:52.683

是时候做一个缩略词炖了。

我不知道特定 HIE 供应商提供的公开*公共*API 的任何特定产品/平台。但是，HIT 社区中有多种 HIE 常用的标准：

[HL7 标准](https://en.wikipedia.org/wiki/Health_Level_7#HL7_standards)为各种患者健康信息定义了大量的数据交换和消息格式。HL7 v2 是一种自定义分隔格式。HL7 v3 是一种 XML 格式。两者具有相似的语义。这通常用于与 HIE 交换健康信息。请注意，这是一个非常广泛的标准，HL7 消息在很大程度上取决于每个供应商需要或使用的单个元素的解释或定制。

[CCD](https://en.wikipedia.org/wiki/Continuity_of_Care_Document)和[CCR](https://en.wikipedia.org/wiki/Continuity_of_Care_Record)也常用于交换健康数据，尤其是与 HealthVault 等 PHR（个人健康记录）系统结合使用。

[LOINC](https://en.wikipedia.org/wiki/LOINC)和[SNOMED](https://en.wikipedia.org/wiki/SNOMED)是在 HL7 消息中使用的标准名称和标识符集。

我经常看到在 SOAP 消息中使用[SAML](https://en.wikipedia.org/wiki/SAML)来提供额外的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T02:27:43.910

SAML 仅提供身份验证/授权支持。HL7 未加密，因此在企业之间进行通信时，为了符合 HIPAA，您需要通过 SSL 或 VPN 对连接进行加密，或者使用[CloudPrime等应用层加密解决方案](http://www.cloudprime.net/resources_healthcare.php)

披露：我是 CloudPrime 的顾问。

# c++ - 当函数没有显式返回值时如何强制编译器错误

> ID：14810651
> 
> 赞同：3
> 
> 时间：2013-02-11T10:49:04.107
> 
> 标签：c++, gcc

我犯的最常见错误之一是我忘记从方法/函数返回结果，而编译器不会抱怨。

如果没有返回结果，如何让 GCC 引发编译错误？（这些通常是微不足道的情况，方法中没有 return 语句）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:51:22.400

使用`-Wreturn-type`（我会推荐至少`-Wall`，也许也是`-Wextra`）。当您不返回值时，它会发出警告；您可以使用`-Werror`它来使其成为错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T10:53:26.047

`-Wall -Werror`使用标志编译。这将产生一个错误：

> 错误：函数中没有返回语句返回非 void

`-Wall`本身只会产生警告。

我也建议编译`-Wextra`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:51:45.207

`g++ -Werror main.cpp -o main`警告为错误！-Wall 也有帮助

# javascript - 如何在回合制游戏中切换回合？

> ID：14810652
> 
> 赞同：0
> 
> 时间：2013-02-11T10:49:04.947
> 
> 标签：javascript, facebook-javascript-sdk

我正在尝试在 javascript 上构建一个简单的回合制 facebook 游戏。所以在我的游戏中，当玩家（即 Alex）按下提交按钮并结束他的回合时，轮到另一个玩家（即 Jack）。我的问题如下：起初游戏在亚历克斯的电脑上运行。然后，在亚历克斯的电脑上发生事件触发后，游戏必须在杰克的电脑上继续（或创建一个新的实例）。它是请求对话框（玩家对玩家）的一部分吗？我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:25:35.397

如果你想做 SongPop 之类的东西，而第二个玩家何时轮到他并不重要，你可以简单地通过以下几个步骤来做到这一点：

1.  亚历克斯轮到他开始比赛。
2.  [当轮到他时，您的应用程序会使用requests dialogs](https://developers.facebook.com/docs/reference/dialogs/requests/)告诉 Alex 告诉 Jack 现在轮到他了。
3.  Jack 登录 Facebook 并查看来自 Alex 的请求的通知。
4.  当杰克点击此通知时，他会被带到应用程序。
5.  每次用户进入您的应用主页时，您的应用都会检查是否有任何请求需要[处理和删除](https://developers.facebook.com/docs/concepts/requests/#deleting)。
6.  应用程序允许杰克在亚历克斯开始的游戏中轮到他。

如果您希望用户轮流更多，例如在国际象棋游戏中，则将重复步骤 2-6。而且，当然，考虑在游戏结束时通知没有走最后一回合的玩家。

如果你想做像 Rummikub 这样的事情，每个玩家必须同时在线，你的逻辑会更复杂，你不会使用应用程序请求来通知用户他应该轮到他。在这种情况下，您需要实时检查玩家所采取的行动并通知其他玩家这些行动。

# log4j - Cloudbees RUN@Cloud：无法挂钩 log4j 错误

> ID：14810660
> 
> 赞同：0
> 
> 时间：2013-02-11T10:49:25.170
> 
> 标签：log4j, cloudbees

在 RUN@Cloud 我有来自 staxnet 启动的以下跟踪：

警告：无法挂钩 log4j 错误 java.lang.NoClassDefFoundError: org/apache/log4j/AppenderSkeleton at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(Unknown Source) at java.lang.ClassLoader .defineClass(Unknown Source) at com.staxnet.appserver.jmx.ApplicationObjectFactory$InjectableClassLoader.initClass(ApplicationObjectFactory.java:75) at com.staxnet.appserver.jmx.ApplicationObjectFactory$InjectableClassLoader.loadClass(ApplicationObjectFactory.java:58) at java .lang.ClassLoader.loadClass(Unknown Source) at com.staxnet.appserver.jmx.ApplicationObjectFactory.loadApplicationClass(ApplicationObjectFactory.java:37) at com.staxnet.appserver.jmx.ApplicationObjectFactory.createApplicationObject(ApplicationObjectFactory.java:21) at com .staxnet.appserver.jmx.AppManagementContext。hookLog4JEvents(AppManagementContext.java:60) 在 com.staxnet.appserver.jmx.AppManagementContext.onBeforeContextInitialized(AppManagementContext.java:50) 在 com.staxnet.appserver.jmx.AppManagementContext.containerEvent(AppManagementContext.java:31)

我知道这是因为我的应用程序中没有 log4j，但这是故意的，因为我们使用 slf4j+logback 可以正常工作。

它似乎并没有阻止应用程序启动或运行，但我们无法添加 log4j，因为它与我们的日志记录冲突。这是否让我们错过了一些来自 staxnet 服务器的重要日志？

我们有带有通知的 papertrail，我们希望在启动期间收到错误通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:16:54.467

cloudbees支持的回答：

> 嗨加斯帕德，
> 
> 您可以放心地忽略此错误。
> 
> 这是由于很久以前引入的一个平台组件试图更好地与应用程序日志集成造成的。如今，我们依靠 Papertrail 插件来实现此功能。这保留在平台上，以确保我们托管的最旧应用程序的向后兼容性。
> 
> Nicolas De Loof CloudBees, Inc

# ios5 - 在容器视图控制器的子视图控制器中处理 UIButton

> ID：14810668
> 
> 赞同：1
> 
> 时间：2013-02-11T10:49:52.447
> 
> 标签：ios5, uibutton, parent-child, viewcontroller, containment

我正在创建自定义容器 ViewController 类，并且能够创建 5 个子视图控制器，并能够使用以下 API 从一个子视图控制器移动到另一个子视图控制器：

```
transitionFromViewController:fromViewController
        toViewController:toViewController
            duration:1.0
             options:0
          animations:^{
                              }
          completion:^(BOOL finished) {
                          }]; 
```

子视图控制器占据了父视图控制器的一部分。每次用户滑动时，我都会关闭前一个控制器，而当前控制器会出现在可显示区域。

现在我在子视图控制器上有按钮，当我单击它们时，我没有收到事件或触发子视图控制器的 Action 方法。但是即使当前正在显示子视图，父视图控制器也会为其按钮获取回调。添加下面的代码片段（虽然它有点大，但这将帮助您分析我是否做错了）。

**父视图控制器：**

```
- (void) handleSwipeGestureLeft:(UISwipeGestureRecognizer *)gesture
{
    if (showPopupValue) {
        return;
    }

    NSInteger index = [arrayOfChildVCs indexOfObject:selectedViewController];
    index = MIN(index+1, [arrayOfChildVCs count]-1);

    UIViewController *newSubViewController = [arrayOfChildVCs objectAtIndex:index];

    endFrame.origin.x = -1024;

    startOfNewVCFrame.origin.x = 1024;

    [self transitionFromViewController:selectedViewController toViewController:newSubViewController];
    selectedViewController = newSubViewController;

}
- (void) handleSwipeGestureRight:(UISwipeGestureRecognizer *)gesture
{
    if (showPopupValue) {
        return;
    }

    NSInteger index = [arrayOfChildVCs indexOfObject:selectedViewController];
    index = MAX(index-1, 0);

    UIViewController *newSubViewController = [arrayOfChildVCs objectAtIndex:index];

    endFrame.origin.x = 1024;

    startOfNewVCFrame.origin.x = -1024;

    [self transitionFromViewController:selectedViewController toViewController:newSubViewController]; 
    selectedViewController = newSubViewController;

}

- (void) populateChildVCList
{

    if (self.currentactivity == EPI_Normal) 
    {
        arrayOfImageNames = [[NSArray alloc]initWithObjects:@"AD_Initiate_SPI_Normal.jpg", @"AD_Initiate_CPI_Normal.jpg", @"AD_Initiate_EAC_Normal.jpg", @"AD_Initiate_PV_Normal.jpg", @"AD_Initiate_EV_Normal.jpg", nil];
    }
    else 
    {
        arrayOfImageNames = [[NSArray alloc]initWithObjects:@"AD_Initiate_SPI_Trigger.jpg", @"AD_Initiate_CPI_Trigger.jpg", @"AD_Initiate_EAC_Trigger.jpg", @"AD_Initiate_PV_Trigger.jpg", @"AD_Initiate_EV_Trigger.jpg", nil];
        isTriggerOn = YES;
    }

    arrayOfChildVCs = [[NSMutableArray alloc] init];

    [arrayOfChildVCs addObject:[[PopupDummyViewController alloc]initWithNibName:@"PopupDummyViewController" bundle:nil]]; // Note: Add one dummy VC to initiate swap

    for (int vcIndex = 0; vcIndex < [arrayOfImageNames count]; vcIndex++) 
    {
        PiSLAComplianceViewController *childPopupController = [[PiSLAComplianceViewController alloc]initWithNibName:@"PiSLAComplianceViewController" bundle:nil];

        childPopupController.popUpImageName = [arrayOfImageNames objectAtIndex:vcIndex];
        childPopupController.imageIndex = vcIndex;
        childPopupController.isTriggerOn = isTriggerOn;

        [arrayOfChildVCs addObject:childPopupController];
    }

    selectedViewController = [arrayOfChildVCs objectAtIndex:0];
    selectedViewController.view.frame = CGRectMake(0, 100, 100, 511); // Took the imageview coordinates
    // Add the dummy view controller to Container View Initially
    [self addChildViewController:selectedViewController];

    [self.view addSubview:selectedViewController.view];

    // notify it that move is done
    [selectedViewController didMoveToParentViewController:self];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [super viewDidLoad];

    UISwipeGestureRecognizer *swipeGestureRecognizerRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGestureRight:)];
    [swipeGestureRecognizerRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [ self.view addGestureRecognizer:swipeGestureRecognizerRight];

    UISwipeGestureRecognizer *swipeGestureRecognizerLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGestureLeft:)];
    [swipeGestureRecognizerLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [ self.view addGestureRecognizer:swipeGestureRecognizerLeft];

    endFrame = deliverableimageview.frame;
    startOfNewVCFrame = deliverableimageview.frame;

    [self populateChildVCList]; // To Create list of child view controllers and loads one invisible dummy view controller to be ready for swiping

}

- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController
{
    if (fromViewController == toViewController)
    {
        // cannot transition to same
        return;
    }

    // animation setup

    toViewController.view.frame = startOfNewVCFrame;

    // notify
    [fromViewController willMoveToParentViewController:nil];
    [self addChildViewController:toViewController];

    // transition
    [self transitionFromViewController:fromViewController
                      toViewController:toViewController
                              duration:1.0
                               options:0
                            animations:^{
                                toViewController.view.frame = fromViewController.view.frame;
                                fromViewController.view.frame = endFrame;
                            }
                            completion:^(BOOL finished) {
                                [toViewController didMoveToParentViewController:self];
                                [fromViewController removeFromParentViewController];

                            }];

} 
```

# google-chrome - 无法为 contentscript 加载 javascript

> ID：14810669
> 
> 赞同：0
> 
> 时间：2013-02-11T10:49:53.757
> 
> 标签：google-chrome, google-chrome-extension

我正在为谷歌浏览器开发扩展。我正在尝试加载 css 文件。如果 css 文件位于扩展名的根目录中，则加载正常。但是如果我将 css 放在 /css 文件夹中然后尝试加载 css 那么它会给出错误 could not load javascript for contentscript

```
{
"name": "test",
"version": "1.0",
"manifest_version": 2,
"description": "This is test",
"background":{"scripts":["background.js"]},
"permissions": 
 [
  "http://*/*",
  "https://*/*",
  "file://*"
 ],
"content_scripts":
 [
  {
 "matches":["*://mail.google.com/*"],
 "css":["mystyle.css", "default.css","style.css"],
 "js":["jquery.js","myscript.js","DOMAlert.js","css/core.js"]
  }
 ]
} 
```

我是开发扩展的新手，所以请帮助解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T03:24:48.090

我似乎有同样的问题。当我添加一个插件外部的脚本时，我设法实现了这一点。检查您的所有 js 脚本以确保准确的拼写和大小写。如果存在权限问题或文件不存在，它只会抱怨 javascript。

# java - 适用于 Android 的 QR 码阅读器和生成器应用程序

> ID：14810673
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:50:06.810
> 
> 标签：java, android, barcode, qr-code, zxing

新手在这里，我已经尝试使用`zxing`库来创建一个可以生成二维码图像并将其保存在手机 SD 卡、二维码扫描仪并能够扫描我的 SD 上的二维码图像的 Android 应用程序。

我在使用 Android 开发人员工具方面的编程知识为零，但我有 Java 编程背景，我只需要一个用于解码和编码的工作示例......

我已经尝试过 [解码器处理](http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/DecodeHandler.java)程序来解码图像，但我不知道将它放在 ADT 应用程序的哪个位置。

编码器处理程序也是如此……我很难理解 Google Developers 网站上的说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:00:00.717

为了开始在android中开发，你必须学习一些基本的想法：Android是如何工作的，如何正确地开发等。开始，我建议你使用[http://developer.android.com/training/basics/firstapp/索引.html](http://developer.android.com/training/basics/firstapp/index.html)

您还可以阅读解释 android 基础的本教程。一旦你了解了 android 的工作原理，理解 Decoder Handler 就会容易得多。

如果您需要更多帮助，请开始一个新问题，更准确地了解您遇到的错误或对代码的理解。

# php - 如何在 php 中多次重新声明同一个类方法？

> ID：14810675
> 
> 赞同：0
> 
> 时间：2013-02-11T10:50:08.633
> 
> 标签：php, html, database, class

我的代码有问题。我有这样的代码：

```
<?php
     include('php/SelectHistory.php');
     include('php/SelectSmallHistoryUser.php');
     include('php/SelectSmallHistoryProject.php');
     include('php/SelectSmallHistoryFunctionality.php');

     $newHistoryRow = SelectHistory();

     echo "<table width='100%'>";

     if (count($newHistoryRow) > 0)
     {
         foreach ($newHistoryRow as $current)
         {
              $chosenUser = SelectSmallHistoryUser($current->userID);
              $chosenProject = SelectSmallHistoryProject($current->projectID);
              $chosenFunctionality = SelectSmallHistoryFunctionality($current->functionalityID);
              echo "<tr>";
              echo "<td>" . $chosenUser->fullName . " was busy with " . $chosenFunctionality->functionalityName . " on " . $chosenProject->projectName . " at " . $current->lastModifiedDate;
              echo "</tr>";
              unset($chosenUser);
              unset($chosenProject);
              unset($chosenFunctionality);
          }
      }
      else
      {
          echo "<tr><td>No History To Display.</td></tr>";
      }

      echo "</table>";
?> 
```

我遇到的问题是在循环中，它声明了一个驻留在类中的方法。现在因为它正在处理来自数据库的数据，如果事物的数量超过一个，我会收到“已声明的类”错误。

有没有办法可以解决这个问题，或者我可以使用另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:52:41.527

我猜是做一个新的。`$var = new SelectHistory();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:06:48.300

而不是像上面那样创建对象，你应该做的是定义一个静态函数来获取你想要的数据。您可以在不创建对象的情况下调用如下函数。

```
SelectSmallHistoryUser::getData($current->userID); 
```

使用循环创建对象是不可接受的。[阅读更多](http://php.net/manual/en/language.oop5.static.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T11:06:50.517

这是创建类的正确方法：

```
class TestClass {
    public $property;
    //some other properties
    function __construct($id) {
        $this->property=$id;
        //do some other stuff
    }
    //some other functions
} 
```

创建类实例的正确方法是：

```
 $test = new TestClass($id); 
```

注意`__construct()`函数和`new`关键字，然后再次尝试执行您的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:03:35.130

在循环中声明或包含类是不好的。但是检查一下：[http ://www.php.net/manual/en/function.class-exists.php](http://www.php.net/manual/en/function.class-exists.php)

# android - GPS onCreate 问题

> ID：14810680
> 
> 赞同：0
> 
> 时间：2013-02-11T10:50:27.043
> 
> 标签：android, android-activity, gps

我遇到了一个我无法弄清楚的问题。我尝试了很多方法，但没有一个让我知道为什么它们不起作用。

**问题**

每次我想运行应用程序时，它都会崩溃。在第 43 行，它显示 // Crash here。

我想要做的是，我有 2 个带有十进制输入的 textView。

**对不起，我复制了错误的 xml，但它仍然是同样的问题**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
android:id="@+id/lat"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="My text edit this." >
    <requestFocus />
</EditText>

<EditText
android:id="@+id/lng"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="My text edit this."
 /> 
```

这是**主要**的：

```
public class Starter extends Activity implements LocationListener {
protected boolean _active = true;
AlertDialog alertDialog;
int progress = 0;
Location_Finder loc;
protected       int _splashTime = 2000;   
private         Thread splashTread;
public LocationManager lm;

EditText LatText = null;
EditText LongText = null;

double  latitude = 18.9599990845; 
double  longitude = 72.819999694;

public void onCreate(Bundle paramBundle)
    {
        super.onCreate(paramBundle);
        setContentView(R.layout.starter);

        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, this);

        LatText = (EditText) findViewById(R.id.text_lat);
        LongText = (EditText) findViewById(R.id.text_lng);

        double currentLat = latitude;
        double currentLong = longitude;

                    //Crash here 
        LatText.setText(Double.toString(currentLat));
        LongText.setText(Double.toString(currentLong));

        splashTread = new Thread() {
            @Override
            public void run() {
                try {                   
                    synchronized(this) {
                        wait(_splashTime);
                    }                   
                } catch(InterruptedException e) {
                    System.out.println("EXc=" + e);
                } 
                finally {              

                    startActivity(new Intent(Starter.this, LocationUpdater.class ));                 
                    //stop();
                    finish();
                }
            }
        };      
        splashTread.start();

        }

/* This method is called when use position will get changed */
public void onLocationChanged(Location loc) {
    if (loc != null) {

    double lat = loc.getLatitude();
    double lng = loc.getLongitude();

    String lat_text = ""+ lat + "";
    String long_text = ""+ lng + "";

    LatText.setText(lat_text);
    LongText.setText(long_text);

    }
}

public void onProviderDisabled(String provider) {
    // required for interface, not used
}

public void onProviderEnabled(String provider) {
    // required for interface, not used
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // required for interface, not used
}

protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

**日志**

```
 02-11 13:59:16.499: D/AndroidRuntime(10702): Shutting down VM
  02-11 13:59:16.499: W/dalvikvm(10702): threadid=1: thread exiting with uncaught             exception (group=0x41f592a0)
  02-11 13:59:16.504: E/AndroidRuntime(10702): FATAL EXCEPTION: main
  02-11 13:59:16.504: E/AndroidRuntime(10702): java.lang.RuntimeException: Unable to       start activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.Starter}: java.lang.NullPointerException
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread.access$600(ActivityThread.java:140)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.os.Handler.dispatchMessage(Handler.java:99)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.os.Looper.loop(Looper.java:137)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread.main(ActivityThread.java:4898)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at java.lang.reflect.Method.invokeNative(Native Method)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at java.lang.reflect.Method.invoke(Method.java:511)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at dalvik.system.NativeStart.main(Native Method)
  02-11 13:59:16.504: E/AndroidRuntime(10702): Caused by: java.lang.NullPointerException
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at com.androidhive.jsonparsing.Starter.onCreate(Starter.java:44)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.Activity.performCreate(Activity.java:5206)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
  02-11 13:59:16.504: E/AndroidRuntime(10702):  ... 11 more 
```

**这是需要的**

当应用程序启动时，我希望它获取纬度和经度，并将其放入带有当前位置 lat 和 long 值的 textView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:35:05.810

代替

```
LatText.setText(Double.toString(currentLat));
LongText.setText(Double.toString(currentLong)); 
```

和

```
LatText.setText(String.valueOf(currentLat));
LongText.setText(String.valueOf(currentLong)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T11:03:57.537

从您的堆栈跟踪中，我会说 LatText 为空，因为您没有使用正确的 id。

尝试`LatText = (EditText) findViewById(R.id.lat);`按照您的 xml 布局中定义的方式使用

* * *

**旧答案**

我认为你在这里做事倒退：

1.  `LocationManager.requestLocationUpdates()`可能需要很长时间，~~应该在后台线程中完成。~~
2.  从后台线程启动/完成活动或修改 UI 是不安全的。您应该为此使用 UI 线程

您可以使用后台线程来请求位置，并用于`runOnUiThread`更新您的 TextViews 或启动新活动。

**重要提示：**确保在活动的 onPause 方法中停止线程！

# bash - 检查用户是否存在

> ID：14810684
> 
> 赞同：208
> 
> 时间：2013-02-11T10:50:45.440
> 
> 标签：bash

我想创建一个脚本来检查用户是否存在。我正在使用以下逻辑：

```
# getent passwd test > /dev/null 2&>1
# echo $?
0
# getent passwd test1 > /dev/null 2&>1
# echo $?
2 
```

所以如果用户存在，那么我们就成功了，否则用户不存在。我已将上述命令放入 bash 脚本中，如下所示：

```
#!/bin/bash

getent passwd $1 > /dev/null 2&>1

if [ $? -eq 0 ]; then
    echo "yes the user exists"
else
    echo "No, the user does not exist"
fi 
```

现在，我的脚本总是说用户无论如何都存在：

```
# sh passwd.sh test
yes the user exists
# sh passwd.sh test1
yes the user exists
# sh passwd.sh test2
yes the user exists 
```

为什么上述条件总是评估为 TRUE 并说用户存在？

我哪里错了？

**更新：**

在阅读了所有回复后，我在脚本中发现了问题。问题是我重定向`getent`输出的方式。所以我删除了所有重定向的东西，使这`getent`条线看起来像这样：

```
getent passwd $user  > /dev/null 
```

现在我的脚本工作正常。

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2013-02-11T12:29:22.270

您也可以通过`id`命令检查用户。

`id -u name`为您提供该用户的 ID。如果用户不存在，你会得到命令返回值 ( `$?`)`1`

正如其他答案所指出的那样：如果您只想检查用户是否存在，请直接使用`if`with `id`，因为`if`已经检查了*exit code*。无需摆弄字符串`[`,`$?`或`$()`:

```
if id "$1" &>/dev/null; then
    echo 'user found'
else
    echo 'user not found'
fi 
```

（无需使用`-u`，因为您无论如何都会丢弃输出）

此外，如果您将此代码段转换为函数或脚本，我建议您也适当地设置*退出*代码：

```
#!/bin/bash
user_exists(){ id "$1" &>/dev/null; } # silent, it just sets the exit code
if user_exists "$1"; code=$?; then  # use the function, save the code
    echo 'user found'
else
    echo 'user not found' >&2  # error messages should go to stderr
fi
exit $code  # set the exit code, ultimately the same set by `id` 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-11T14:08:13.080

无需明确检查退出代码。尝试

```
if getent passwd $1 > /dev/null 2>&1; then
    echo "yes the user exists"
else
    echo "No, the user does not exist"
fi 
```

如果这不起作用，则说明您的 有问题`getent`，或者您定义的用户比您想象的要多。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-02-11T10:52:49.613

你为什么不简单地使用

```
grep -c '^username:' /etc/passwd 
```

如果用户存在，它将返回 1（因为用户最多有 1 个条目），如果不存在则返回 0。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-09-28T03:43:53.290

这就是我最终在`Freeswitch`bash 启动脚本中所做的事情：

```
# Check if user exists
if ! id -u $FS_USER > /dev/null 2>&1; then
    echo "The user does not exist; execute below commands to crate and try again:"
    echo "  root@sh1:~# adduser --home /usr/local/freeswitch/ --shell /bin/false --no-create-home --ingroup daemon --disabled-password --disabled-login $FS_USER"
    echo "  ..."
    echo "  root@sh1:~# chown freeswitch:daemon /usr/local/freeswitch/ -R"
    exit 1
fi 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-10-30T14:32:58.520

到目前为止最简单的解决方案：

```
if id -u "$user" >/dev/null 2>&1; then
    echo 'user exists'
else
    echo 'user missing'
fi 
```

`>/dev/null 2>&1`可以在 Bash 中缩短为，`&>/dev/null`如果您只想知道用户**是否不**存在：

```
if ! id -u "$user" >/dev/null 2>&1; then
    echo 'user missing'
fi 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-05-09T12:10:39.443

我建议使用 id 命令，因为它测试**有效**的用户是否存在 wrt passwd 文件条目，这不是必需的，这意味着相同：

```
if [ `id -u $USER_TO_CHECK 2>/dev/null || echo -1` -ge 0 ]; then 
echo FOUND
fi 
```

注意：0 是根 uid。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-02-24T08:18:47.463

我以这种方式使用它：

```
if [ $(getent passwd $user) ] ; then
        echo user $user exists
else
        echo user $user doesn\'t exists
fi 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-08-17T11:18:15.500

[检查Linux用户是否存在的脚本](https://i.stack.imgur.com/hGoVU.png)

# 脚本检查用户是否存在

```
#! /bin/bash
USER_NAME=bakul
cat /etc/passwd | grep ${USER_NAME} >/dev/null 2>&1
if [ $? -eq 0 ] ; then
    echo "User Exists"
else
    echo "User Not Found"
fi 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-10-01T00:32:35.120

迟到的答案，但`finger`也显示了有关用户的更多信息

```
 sudo apt-get finger 
  finger "$username" 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-07-11T05:51:35.350

使用 sed：

```
username="alice"
if [ `sed -n "/^$username/p" /etc/passwd` ]
then
    echo "User [$username] already exists"
else
    echo "User [$username] doesn't exist"
fi 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2019-02-19T02:02:32.473

用户信息存储在 /etc/passwd 中，因此您可以使用“grep 'usename' /etc/passwd”来检查用户名是否存在。同时你可以使用“id”shell命令，它会打印用户id和组id，如果用户不存在，它会打印“no such user”消息。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-02-09T05:15:39.410

实际上我无法重现该问题。问题中编写的脚本工作正常，但 $1 为空的情况除外。

但是，脚本中存在与`stderr`. 虽然这两种形式存在`&>`，`>&`但在您的情况下，您想使用`>&`. 您已经重定向`stdout`，这就是表单`&>`不起作用的原因。您可以通过这种方式轻松验证它：

```
getent /etc/passwd username >/dev/null 2&>1
ls 
```

您将看到`1`在当前目录中命名的文件。你想`2>&1`改用，或者使用这个：

```
getent /etc/passwd username &>/dev/null 
```

这也将`stdout`和重定向`stderr`到`/dev/null`。

**警告**重定向`stderr`到`/dev/null`可能不是一个好主意。当事情出错时，你将不知道为什么。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-02-11T11:00:43.117

根据您的 shell 实现（例如 Busybox 与成熟），`[`操作员可能会启动一个进程，更改`$?`.

尝试

```
getent passwd $1 > /dev/null 2&>1
RES=$?

if [ $RES -eq 0 ]; then
    echo "yes the user exists"
else
    echo "No, the user does not exist"
fi 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-05-02T10:13:22.903

登录到服务器。 **grep "username" /etc/passwd** 这将显示用户详细信息（如果存在）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-10-15T07:40:38.720

下面是检查操作系统分布的脚本，如果不存在则创建用户，如果用户存在则不执行任何操作。

```
#!/bin/bash

# Detecting OS Ditribution
if [ -f /etc/os-release ]; then
    . /etc/os-release
    OS=$NAME
elif type lsb_release >/dev/null 2>&1; then
OS=$(lsb_release -si)
elif [ -f /etc/lsb-release ]; then
    . /etc/lsb-release
    OS=$DISTRIB_ID
else
    OS=$(uname -s)
fi

 echo "$OS"

 user=$(cat /etc/passwd | egrep -e ansible | awk -F ":" '{ print $1}')

 #Adding User based on The OS Distribution
 if [[ $OS = *"Red Hat"* ]] || [[ $OS = *"Amazon Linux"* ]] || [[ $OS = *"CentOS"*  
]] && [[ "$user" != "ansible" ]];then
 sudo useradd ansible

elif [ "$OS" =  Ubuntu ] && [ "$user" != "ansible" ]; then
sudo adduser --disabled-password --gecos "" ansible
else
  echo "$user is already exist on $OS"
 exit
fi 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-01-27T16:33:10.577

如果系统用户`some_user`不存在则创建

```
if [[ $(getent passwd some_user) = "" ]]; then
    sudo adduser --no-create-home --force-badname --disabled-login --disabled-password --system some_user
fi 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-06-10T07:09:00.043

我喜欢这个不错的单线解决方案

```
getent passwd username > /dev/null 2&>1 && echo yes || echo no 
```

并在脚本中：

```
#!/bin/bash

if [ "$1" != "" ]; then
        getent passwd $1 > /dev/null 2&>1 && (echo yes; exit 0) || (echo no; exit 2)
else
        echo "missing username"
        exit -1
fi 
```

利用：

```
[mrfish@yoda ~]$ ./u_exists.sh root
yes
[mrfish@yoda ~]$ echo $?
0

[mrfish@yoda ~]$ ./u_exists.sh
missing username
[mrfish@yoda ~]$ echo $?
255

[mrfish@yoda ~]$ ./u_exists.sh aaa
no
[mrfish@indegy ~]$ echo $?
2 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-18T10:33:27.793

```
echo "$PASSWORD" | su -c "cd /" "$USER"
if [ "$?" = "0" ];then
 echo "OK"
else
 echo "Error"
fi 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-01T11:39:41.367

```
#!/bin/bash
read -p "Enter your Login Name: " loginname
home=`grep -w $loginname /etc/passwd | cut -ef:6 -d:`
if [ $home ]
    echo "Exists"
else
    echo "Not Exist"
fi 
```

# css - 下拉菜单在 Safari 中不起作用

> ID：14810685
> 
> 赞同：0
> 
> 时间：2013-02-11T10:50:45.787
> 
> 标签：css, drop-down-menu, menu, navigation

似乎找不到问题所在。firefox 工作正常 - 但 safari 不行。一个简单的 css 下拉菜单，但在 safari 中，下拉菜单会下拉，但一旦您尝试将鼠标放在下拉元素上，它就会消失 - 只有当您在下拉元素上快速移动鼠标时，它才会隐藏。

[http://singknaben-v2.marknolan.ch](http://singknaben-v2.marknolan.ch)

将鼠标悬停在“DER CHOR”并尝试使用 safari 在子元素上导航。我看不出问题出在哪里。任何帮助appriciated...

谢谢，标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:08:21.733

问题是元素不够高。鼠标在到达子元素之前停止悬停在元素上。通过应用大约 30px 的“高度”css 样式可以非常简单地修复它。

# php - $object->lol 和 $object->$lol 的区别

> ID：14810692
> 
> 赞同：1
> 
> 时间：2013-02-11T10:51:17.893
> 
> 标签：php

我对这两种代码感到困惑，想知道它们之间有什么区别：

```
$object->$lol
// and
$object->lol 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:56:22.870

`$object->lol`将指向对象类上定义的某些属性：

```
class SomeClass {
    public $lol = 'some value';
}

$object = new SomeClass();
echo $object->lol; //will yield 'some value' 
```

并将`$object->$lol`指向对象类上定义的某些属性，但将根据以下值访问正确的属性`$lol`：

```
class SomeClass {
    public $lol = 'some value';
    public $random = 'random value';
}

$lol = 'random';

$object = new SomeClass();
echo $object->lol; //will yield 'some value'
echo $object->$lol; //will yield 'random value' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T10:56:25.620

`$object->lol`访问对象上命名的实例`lol`变量`$object`。

`$object->$lol`访问名称包含在变量中的实例`$lol`变量。它也可以在`$object`对象上访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T10:56:36.380

AFAIK，它的工作原理与以下相同：

```
$var  = "var2";
$var2 = "hello world";
echo $$var; // This returns "hello world" 
```

因此，我假设 $object->$lol 会为您获取具有 $lol 变量名称的变量。

[这是有关此的更多信息...](http://php.net/manual/en/language.variables.variable.php#example-106)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T10:54:15.743

第一个就像

```
$lol = 'foo';
$object->{$lol} == $object->foo; 
```

第二个是常规的财产访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-18T14:51:06.323

我会解释给你看，看看这段代码：

```
<?php
$var1->"hello";
$var2->$var1;
?> 
```

如果我们执行打印或回显，$var1 将显示“hello”，但在 $var2 中我们将再次看到“hello”，因为 $var1 和 $var2 是相同的。

在第二个代码中：

```
<?php
$var1->"hello";
$var2->"var1";
?> 
```

现在我们打印 $vare1，它会显示“hello”，但 $var2 会显示“var1”。我希望这可以帮助您解决问题。

# unix - 使用 awk 或 sed 或两者（再次）修改文本文件

> ID：14810698
> 
> 赞同：0
> 
> 时间：2013-02-11T10:51:33.047
> 
> 标签：unix, text, sed, awk

真的很抱歉，我遇到了同样的问题 - awk 和 sed

我想转换包含以下内容的大型文本文件：

```
>hg19_ct_UserTrack_3545_12513 range=chr1:52035541-52035716 5'pad=0 3'pad=0 strand=+ repeatMasking=none
CACACATACTTTTATTCAAGCCTCAGAGCAACCCTGCAAAATGAGTATTA
TCTCCACTTTACAATCAGGAGGCTGAGTCATAAGGAGGTGAGTCACCTGC
CTAGGGCCACATAGCTAGCAAGGAGCCAAGCTGGAATTTTAAGCCACGTT
TGTCTGATTCTTTCTGCATACCATGC
>hg19_ct_UserTrack_3545_13212 range=chr1:186122154-186122314 5'pad=0 3'pad=0 strand=+ repeatMasking=none
ATCTTCAGGGACAAGTTTTTACAAACTCTCTTAATGGTTTTACCACCCTC
CCTATCAGGACCAAGATCAAATACTTGATGTAAGGCATTTGTTTAATTTT
CTTTAGACAAAGAGGATAGTAATTCTTGCATAAACGTTTTTGTGTATCAT
CCATAAAATAT 
```

等等等等

到：

```
>range=chr1:52035541-52035716 5'pad=0 3'pad=0 strand=+ repeatMasking=none
CACACATACTTTTATTCAAGCCTCAGAGCAACCCTGCAAAATGAGTATTA
TCTCCACTTTACAATCAGGAGGCTGAGTCATAAGGAGGTGAGTCACCTGC
CTAGGGCCACATAGCTAGCAAGGAGCCAAGCTGGAATTTTAAGCCACGTT
TGTCTGATTCTTTCTGCATACCATGC
>range=chr1:186122154-186122314 5'pad=0 3'pad=0 strand=+ repeatMasking=none
ATCTTCAGGGACAAGTTTTTACAAACTCTCTTAATGGTTTTACCACCCTC
CCTATCAGGACCAAGATCAAATACTTGATGTAAGGCATTTGTTTAATTTT
CTTTAGACAAAGAGGATAGTAATTCTTGCATAAACGTTTTTGTGTATCAT
CCATAAAATAT 
```

我试过了`awk 'NR==1{sub(/^[^ ]* /,"")} 1'`，`sed -i '1s/\w\+ //'`但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:04:52.150

我假设您想删除以大于号开头的行中的第一个单词。在这种情况下，您可以`awk`像这样使用：

```
awk '{sub(/^>[^ ]* /,">")} 1' 
```

去掉限制，`NR==1`意味着后面的块只会在第一行执行。还包括`>`在模式和替换。

输出：

```
>range=chr1:52035541-52035716 5'pad=0 3'pad=0 strand=+ repeatMasking=none
CACACATACTTTTATTCAAGCCTCAGAGCAACCCTGCAAAATGAGTATTA
TCTCCACTTTACAATCAGGAGGCTGAGTCATAAGGAGGTGAGTCACCTGC
CTAGGGCCACATAGCTAGCAAGGAGCCAAGCTGGAATTTTAAGCCACGTT
TGTCTGATTCTTTCTGCATACCATGC
>range=chr1:186122154-186122314 5'pad=0 3'pad=0 strand=+ repeatMasking=none
ATCTTCAGGGACAAGTTTTTACAAACTCTCTTAATGGTTTTACCACCCTC
CCTATCAGGACCAAGATCAAATACTTGATGTAAGGCATTTGTTTAATTTT
CTTTAGACAAAGAGGATAGTAATTCTTGCATAAACGTTTTTGTGTATCAT
CCATAAAATAT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:15:29.917

这是一种使用方法`sed`：

```
sed '/^>/s/[^ ]* />/' file 
```

结果：

```
>range=chr1:52035541-52035716 5'pad=0 3'pad=0 strand=+ repeatMasking=none
CACACATACTTTTATTCAAGCCTCAGAGCAACCCTGCAAAATGAGTATTA
TCTCCACTTTACAATCAGGAGGCTGAGTCATAAGGAGGTGAGTCACCTGC
CTAGGGCCACATAGCTAGCAAGGAGCCAAGCTGGAATTTTAAGCCACGTT
TGTCTGATTCTTTCTGCATACCATGC
>range=chr1:186122154-186122314 5'pad=0 3'pad=0 strand=+ repeatMasking=none
ATCTTCAGGGACAAGTTTTTACAAACTCTCTTAATGGTTTTACCACCCTC
CCTATCAGGACCAAGATCAAATACTTGATGTAAGGCATTTGTTTAATTTT
CTTTAGACAAAGAGGATAGTAATTCTTGCATAAACGTTTTTGTGTATCAT
CCATAAAATAT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:54:09.633

似乎您只想删除第一个字段，直到第一个空格。你可以这样做：

```
cut -f2- -d ' ' 
```

# cocoa - 如何在 NSOutlineView 中禁用取消选择行

> ID：14810700
> 
> 赞同：0
> 
> 时间：2013-02-11T10:51:35.357
> 
> 标签：cocoa, nstableview, nsoutlineview

我有`NSOutlineView`，但我不知道如何禁用其中的取消选择行。当我单击`NSOutlineView`没有任何单元格的位置时出现问题，选定的行未被选中。有什么办法，当有人点击时如何保持选定的行`NSOutlineView`？但是当有人点击其他单元格时，它必须正常工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:57:47.040

在 Interface Builder 中转到**Attribute inspector**，在**Table View**部分下确保`Empty`未选中。

# javascript - 用空值替换选项

> ID：14810703
> 
> 赞同：1
> 
> 时间：2013-02-11T10:51:40.420
> 
> 标签：javascript, jquery, html

假设我们在 html select 中有三个选项，即 select、Male、Female。单击时，我想用“”替换选择。

我尝试了以下代码。

```
<select id="ageID">
    <option value="none" >loading...</option>
    <option value="one" >one</option>
    <option value="two">two</option>
    <option value="three">three</option>
</select>  

$("#ageID").on("click",function(){

    $(this).children().first().remove();
    $(this).children().first().before(" <option value='none' > </option>");

}); 
```

它在 google chrome 上完美运行，但在 mozilla 或 IE 上却不行。您可以尝试使用[http://jsfiddle.net/](http://jsfiddle.net/)运行它 请提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:53:28.277

你可以这样做 ：

```
$("#ageID").on("click focus",function(){
    this.options[0].text='';
}); 
```

[示范](http://jsbin.com/ozamoz/2/)

我添加了该`focus`事件，因为我认为您希望尽快进行更改（只有 不会出现这种情况`click`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:55:32.927

试试这个：

```
$("#ageID").on("click",function(){

    $(this).children().first().remove();
    $(this).children().first().before('<option value="none"> </option>');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:02:17.913

为什么不试试这个：

```
$("#ageID").on("click",function(){
    $('option:first',this).text('');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:05:32.783

我想你想要这样的东西

```
$("#ageID").on("click",function(){

    $(this).children().first().remove();
    $(this).prepend("<option value='' ></option>");

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-11T10:57:48.940

你可以用简单的 CSS 来模仿它：

小提琴：http: [//jsfiddle.net/E4ah9/](http://jsfiddle.net/E4ah9/)

HTML

```
<select id="ageID">
    <option value="none" disabled selected class="placeholder">loading...</option>
    <option value="one" >one</option>
    <option value="two">two</option>
    <option value="three">three</option>
</select> 
```

CSS

```
.placeholder { display: none; } 
```

# jsp - 如何设置隐藏标签的值

> ID：14810708
> 
> 赞同：0
> 
> 时间：2013-02-11T10:51:58.700
> 
> 标签：jsp, struts-1

我正在使用`<html:hidden styleId="user" property="issueBranch" value='' />` For value of`<html:hidden>`我想设置我从中获得的值`<bean:write name="sessionData" property="userId"/>` 如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:41:28.420

采用

```
<html:hidden styleId="user" property="issueBranch"/> 
```

并在调度到 JSP 的操作中，将表单 bean 的`issueBranch`属性设置为您想要的：

```
myActionForm.setIssueBranch(sessionData.getUserId()); 
```

# c - C中的类型问题

> ID：14810712
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:52:09.100
> 
> 标签：c, pointers, incompatibletypeerror

这可能是一个愚蠢的问题，我看到有人问过类似的问题，但我没有得到答案。为什么以下代码会产生：

> 错误：从类型“struct node_t *”分配给类型“node_t”时类型不兼容</p>

```
node_t list_array[10];
typedef struct node
{
    int value;
    struct node *next;
    struct node *prev;
} node_t;

node_t* create_node(void)
{
    node_t *np;
    np->next = NULL;
    np->prev = NULL;
    np->value = rand() % 10;
    return np;
}

int main(void)
{
int i;
for(i = 0; i < 10; i++)
{
    list_array[i] = create_node();
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:53:33.597

将数组变成指针数组以修复错误，因为`create_node`返回一个指针：

```
node_t *list_array[10]; 
```

请注意，您没有分配任何内存，`create_node`因此使用`np`是非法的。尝试：

```
node_t *np = malloc(sizeof *np); 
```

> 我想制作一个 node_t 结构数组

在这种情况下，您可以离开 node_t list_array[10] 并且：

*   `&list_array[i]`作为参数传递给函数
*   让函数返回 a`node_t`而不是 a`node_t *`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T10:54:39.743

因为一个是结构体，另一个是结构体的*指针*。

该`create_node()`函数返回一个*指向*节点的指针（`malloc()`顺便说一句，您确实应该在该函数中使用它），然后您尝试将其分配给数组中的实际结构。

您只需将声明更改为：

```
node_t *list_array[10]; 
```

所以它是一个指针数组而不是一个结构数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T10:55:00.883

因为`create_node()`返回一个*指针*，但是`list_array[i]`是一个实际的*实例*。您不能在实例上分配指针，它们完全不同。

解决方案通常是将每个节点表示为一个指针，它需要`list_array`是一个指针数组：

```
node_t *list_array[10]; 
```

然后分配有意义，代码将编译。

但是请注意，代码不会“工作”，因为它取消引用`NULL`内部的指针`create_node()`。看来你忘了打电话`malloc()`：

```
node_t* create_node(void)
{
    node_t *np;
    if((np = malloc(sizeof *np)) != NULL)
    {
        np->next = NULL;
        np->prev = NULL;
        np->value = rand() % 10;
    }
    return np;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T11:59:05.533

这是经典的“指针与实例”混淆。比你的警告更严重的是：

```
node_t *np;
np->next = NULL; 
```

这将编译，然后是段错误。

由于对指针是什么的误解而产生了混淆。编译时，指针只是一个数字，例如 140734799803888。此数字*仅用于定位*物理数据块。这是一个内存*地址*。

指针与实例令人困惑，这是您在编程中遇到的第一个概念挑战。所以这里有一个类比：

如果您曾经使用过 GPS，它会告诉您您*在哪里*（指针），但不会告诉您您是*什么*（数据）。指针的工作方式相同。如果有人想和你握手，他们不会摇 GPS 坐标（指针）！他们会使用 GPS 坐标来定位您，然后亲自拜访您（数据）并与您握手。这就是指针的工作原理。

因此，在上面的代码中，您声明了一个指针`np`，但不给它任何位置来跟踪。然后，你问“使用里面的数字`np`来定位我的数据”（但你还没有设置一个数字`np`！）特别是，`np->next`要求使用位置`np + someOffset`（这是未定义的！）来查找你的物理数据（这是无处可去的） , 并改变它。

这就是为什么你得到一个段错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T10:54:45.193

`node_t list_array[10]`应该是`node_t *list_array[10]` 你也有，而不是`malloc`你的`node_t *np`

`node_t *np = malloc(sizeof(node_t));`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T13:52:21.187

对于这个程序，我认为使用动态存储持续时间 (malloc) 没有意义。如果您希望将所有对象保持在静态存储期间，我会处理 create_node 以支持 memcpy。例如，

```
#include <string.h>

typedef struct node
{
    int value;
    struct node *next;
    struct node *prev;
} node_t;

int main(void) {
    node_t list_array[10];
    for (int i = 0; i < sizeof (list_array) / sizeof (*list_array); i++) {
        memcpy(list_array + i,
               &(node_t){ .value = rand() % 10,
                          .next = NULL,
                          .prev = NULL },
               sizeof (*list_array));
    }
    return 0;
} 
```

# java - 如何在 xsd 中维护元素版本

> ID：14810715
> 
> 赞同：1
> 
> 时间：2013-02-11T10:52:21.907
> 
> 标签：java, xsd, jaxb, versioning

我有 3 个不同的 xsd。xsd2 是 xsd1 的超集。xsd3 是 xsd2 的超集。我有所有 3 个不同的客户端，它们可能属于任何一个 xsds。对于他们使用他们的 xsd 提出的每个 xml 请求，我必须生成一个 xml 响应。我想如果我在某个地方维护哪个元素，哪个版本支持元素属性，然后基于该列表，我可以选择使用 xsd3 填充或不填充该元素。在服务器上，我正在考虑使用 xsd3。因此使用版本列表，我将能够生成可由 xsd1 和 xsd2 解析的 xml。我想在 xsd 本身内部维护这个元素版本映射。我怎么做？我在服务器端使用 jaxb 进行 xml 解析

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:47:05.307

从您的描述看来，版本之间的差异似乎只是在声明的元素集合中，因此我们可以通过删除一些 xs:element 元素从 xsd3 派生 xsd2，并且从 xsd2 派生 xsd1 也是如此。

在这种假设下，管理元素-版本映射的最简单方法是将某个非 XSD 命名空间中的属性添加到每个元素声明，指定哪些版本包含/支持该元素。

```
<xs:element name="E" type="tns:T" my:versions="1"/>
<xs:element name="F" type="tns:T2" my:versions="1 2 3"/>
<xs:element name="G" type="tns:T3" my:versions="1 2"/>
<xs:element name="H" type="tns:T4" my:versions="1"/> 
```

您还可以使用 xs:annotation/xs:appinfo 来管理更复杂的信息。

这些是否为您提供所需的东西取决于您的 XSD 工具提供的接口，或者取决于您从模式文档中提取信息并在没有 XSD 工具帮助的情况下自行利用它的能力。

# css - 使用 css3 渐变实现多种颜色

> ID：14810717
> 
> 赞同：0
> 
> 时间：2013-02-11T10:52:25.317
> 
> 标签：css

如何![](../Images/1082b63caa4c2003a75f313374f9e01d.png)使用 css3 渐变来实现这种多种颜色？我看过这个[网站](https://do.com/users/sign_up)，他们使用 css3 渐变完成，并且他们只有一个 div 用于多种颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:16:46.763

使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)并在每个“硬”颜色变化上放置 2 个停靠点（例如，将两个停靠点都放在 50% 处）

# mysql - 在 MySQL 上的延迟作业：'此版本的 MySQL 尚不支持'LIMIT & IN/ALL/ANY/SOME 子查询'

> ID：14810718
> 
> 赞同：0
> 
> 时间：2013-02-11T10:52:26.573
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

尝试在 MySQL 环境中部署 Rails 3 应用程序，但遇到了`delayed_job`(v3.0.5) gem 的问题。

`db:migrate`似乎一切正常：

```
==  CreateDelayedJobs: migrating ==============================================
-- create_table(:delayed_jobs, {:force=>true})
   -> 0.0055s
-- add_index(:delayed_jobs, [:priority, :run_at], {:name=>"delayed_jobs_priority"})
   -> 0.0040s
==  CreateDelayedJobs: migrated (0.0096s) ===================================== 
```

但正在尝试`script/delayed_job run`（很长的查询警告）：

```
delayed_job: process with pid 10713 started.
Mysql2::Error: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery': UPDATE `delayed_jobs` SET `locked_at` = '2013-02-11 10:43:13', `locked_by` = 'delayed_job                       host:dev pid:10713' WHERE `delayed_jobs`.`id` IN (SELECT  id FROM `delayed_jobs`  WHERE ((run_at <= '2013-02-11 10:43:13' AND (locked_at IS NULL OR locked_at < '2013-02-11 06:4                      3:13') OR locked_by = 'delayed_job host:dev pid:10713') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) AND ((run_at <= '2013-02-11 10:43:13' AND (l                      ocked_at IS NULL OR locked_at < '2013-02-11 06:43:13') OR locked_by = 'delayed_job host:dev pid:10713') AND failed_at IS NULL) 
```

我可以确认桌子都在那里并且是空的。

我尝试过：MySQL 5.1 和 5.5 以及 Percona 和 MariaDB。我在 Linux 和 Windows 机器上都试过了。

令我难以置信的是，这在 sqlite3 上运行良好，但在 MySQL 上运行良好。鉴于 gem 的受欢迎程度，我希望我在某个地方犯了错误，而不是它在 MySQL 上损坏的可能性。

谢谢。

--

我已经在 Postgres 9.1 中进行了测试，它工作正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:34:01.183

我有同样的问题并发现了这个。看来您现在需要使用旧版本。他们昨天对活动记录宝石进行了一些更新。

[https://github.com/collectiveidea/delayed_job_active_record/issues/32](https://github.com/collectiveidea/delayed_job_active_record/issues/32)

# json - Highchart不显示json数据

> ID：14810721
> 
> 赞同：0
> 
> 时间：2013-02-11T10:52:35.870
> 
> 标签：json, highcharts

我无法弄清楚我的 Highchart 做错了什么。它应该读取一个 json 数组，（实际上只是一个日期和一个值并将其绘制到图表上。但是，我似乎无法得到任何点来绘制到图表上。我做错了什么？

php代码：

```
$statement = "select count(title) from node where title like 'WEN%'";
$result = mysql_query($statement);
while ($row = mysql_fetch_array($result)) {
   $data = $row['count(title)'];
}

$x = time() * 1000;
$y = $data;

$array = array($x,$y);

echo json_encode($array); 
```

html/javascript 代码：

```
 <p>Chart</p>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto">

     <script>
    function requestData() {
       jQuery.ajax({
            url: 'queryp.php',
            datatype: 'json',
            success: function(point)  {
                var series = chart.series[0];

                // add the point
                chart.series[0].addPoint(point, true);

                // call it again after one second
                setTimeout(requestData, 5000);    
            },
            cache: false
        });

    }

    </script>  

    <script type="text/javascript">

    jQuery(function () {
        jQuery(document).ready(function() {
            Highcharts.setOptions({
                global: {
                    useUTC: false
                }
            });

            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'spline',
                    marginRight: 10,
                    events: {
                        load: requestData

                    }
                },
                title: {
                    text: 'Live Query Data'
                },
                xAxis: {
                    type: 'datetime',
                    tickPixelInterval: 150
                },
                yAxis: {
                    title: {
                        text: 'Value'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                legend: {
                    enabled: true
                },
                exporting: {
                    enabled: false
                },
                series: [{
                    name: 'Query Data',
                    data: []
                }]
            });
        });

    });

    </script>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:12:39.970

您的`series[0]`对象没有名为的方法`addPoint`，您应该在控制台中看到它。

如果要附加到`data`数组，只需使用`push`

```
chart.series[0].data.push(point[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:52:29.093

问题是您正在引用尚未准备好的图表变量 - 您正在使用加载事件处理程序。使用这样的东西：

```
function requestData() {
    var series;
    if(chart.series[0]){
        /* all other cases load chart */
        series = chart.series[0];
    } else { 
        /* first load chart */
        series = this.series[0];
    }  
    jQuery.ajax({
        url: 'queryp.php',
        datatype: 'json',
        success: function(point)  {
            series.addPoint(point, true);
            setTimeout(requestData, 5000);   
         }
    });
} 
```

此外，请确保值是数字。不是字符串。

# asp.net - 有没有办法让管理员更改存储在凭据标签中的用户名和密码？

> ID：14810723
> 
> 赞同：1
> 
> 时间：2013-02-11T10:52:38.367
> 
> 标签：asp.net

我已使用 web.config 文件中的凭据标记来验证我的管理员身份。现在我想知道有什么方法可以制作一个带有表单的页面，供管理员更改用户名和密码？这是我在 web.config 中的代码：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <sessionState cookieless="AutoDetect" mode="InProc"  timeout="114400">
    </sessionState>
    <authentication mode="Forms">
        <forms timeout="1440" loginUrl="~/entrance_before_paying.aspx" defaultUrl="Admin/Default.aspx" name=".ASPXFORMSDEMO"  cookieless="AutoDetect" protection="All">
            <credentials passwordFormat="Clear">
                <user name="elmiragolshanff@yahoo.com"  password="elmira" />
            </credentials>
        </forms>
    </authentication>
</system.web> 
```

我在登录页面中使用了此代码来检查用户是否为管理员：

```
private void enter()
{
    if (FormsAuthentication.Authenticate(TextBox1.Text.Trim(), TextBox2.Text.Trim())) 
    {
        FormsAuthentication.RedirectFromLoginPage("admin user name in credential tag", true);
    }
    else
    {
       // enter as a user}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:06:50.800

是的，你可以这样做

```
 <location path="Admin">
    <system.web>
      <authorization>
        <allow users="ram"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

在 web.config 文件中使用上述代码。这将只允许用户“ram”访问“Admin”文件夹内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:32:01.227

我使用了这段代码现在它工作正常

```
<form ID="form1"  runat="server">
   <div>
    <asp:TextBox ID="txtUsername" runat="server">
    </asp:TextBox>
    <asp:TextBox ID="txtPassword" runat="server">
    </asp:TextBox>
    <asp:Button ID="btnWrite" runat="server" onclick="btnWrite_Click" Text="Modify" />
</div> 
```

在 ChangePassword.aspx.cs 中：

```
 protected void btnWrite_Click(object sender, EventArgs e)
   {
    Configuration webconfig = WebConfigurationManager.OpenWebConfiguration("/wite your site name");
    SystemWebSectionGroup sysweb = (SystemWebSectionGroup)webconfig.GetSectionGroup("system.web");
    AuthenticationSection authSection = sysweb.Authentication;
    FormsAuthenticationUserCollection users = authSection.Forms.Credentials.Users;
    FormsAuthenticationUser user = users[0];
    user.Name = txtUsername.Text;
    user.Password = txtPassword.Text;
    webconfig.Save();
    } 
```

# html - 输入看起来像选择的选择

> ID：14810726
> 
> 赞同：1
> 
> 时间：2013-02-11T10:52:44.927
> 
> 标签：html, css, input, jquery-chosen

是否可以使输入看起来像已选择（[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)）选择？我不需要自动完成，我需要圆形边框，活动时的蓝色边框，相同的高度，相同的背景。

PS：标准输入和选择的选择看起来太不同了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:55:46.650

看看[推特引导程序](http://twitter.github.com/bootstrap/base-css.html#forms)

[表单元素示例在这里](http://twitter.github.com/bootstrap/base-css.html#forms)。它们看起来或多或少像选择的输入。

# javascript - 多边形SVG的不同笔画

> ID：14810727
> 
> 赞同：0
> 
> 时间：2013-02-11T10:52:45.563
> 
> 标签：javascript, html, svg

如何在不同颜色的 SVG 多边形中设置笔触颜色？例如，我们有四边形，必须设置 2 笔红色和 2 笔黑色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:05:27.197

绘制2条路径。使一条路径为多边形的红色部分，另一条为黑色。

# opengl - 具有非标准化纹理格式的 glTexImage2DMultisample

> ID：14810732
> 
> 赞同：1
> 
> 时间：2013-02-11T10:53:01.473
> 
> 标签：opengl, glsl, opengl-3, multisampling

我在使用非标准化的内部格式（例如`GL_RGBA32UI`, `GL_RGBA32I`. 这是我的代码：

```
width1=height1=32;
*target11=GL_TEXTURE_2D_MULTISAMPLE,*format=GL_RGBA16UI;
*samples=1;
glGenTextures(1, &id1);
glBindTexture(*target11, id1);
glGenFramebuffers(1, &Fboid);
GLint framebuffer;
glGetIntegerv(GL_DRAW_FRAMEBUFFER_BINDING,&framebuffer);
glGenRenderbuffers(1, &depth);
glPixelStorei(GL_UNPACK_ALIGNMENT,1);
glTexImage2DMultisample(GL_TEXTURE_2D_MULTISAMPLE, *samples ,*format, width1, height1,true);    
glBindFramebuffer(GL_FRAMEBUFFER, Fboid);

glBindRenderbuffer(GL_RENDERBUFFER, depth);
glRenderbufferStorageMultisample(GL_RENDERBUFFER,*samples, GL_DEPTH_COMPONENT24, width1, height1);
glFramebufferRenderbuffer(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depth);            glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,*target11,id1,0);
glEnable(GL_MULTISAMPLE);
draw_cube(0);

glDisable(GL_MULTISAMPLE);  
status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
switch(status)
    {
            case GL_FRAMEBUFFER_COMPLETE:                       tdkPrintf("GL_FRAMEBUFFER_COMPLETE\n");                        break;
            case 0x8CDB:                                        tdkPrintf("GL_FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER\n");          break;
            case GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:          tdkPrintf("GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT\n");           break;
            case GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:  tdkPrintf("GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\n");   break;        
            case GL_FRAMEBUFFER_UNSUPPORTED:                    tdkPrintf("GL_FRAMEBUFFER_UNSUPPORTED\n");                     break;  
            default:                                            tdkPrintf("Unknown issue (%X).\n",status);                     break;
        }

glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);

render_cube(); 
```

手动标准化片段着色器中的纹理数据：对于`GL_RGBA16UI`：`factor = 65535`

```
uniform usampler2DMS tk_diffuseMap;
in vec3 ps_texCoord;
out vec4 fragColor;
uniform int samples;
uniform uint factor; 
void main(void)
{

    vec2 iTmp = textureSize(tk_diffuseMap);
    vec2 tmp =floor(iTmp * ps_texCoord.xy);
    uvec3 temp;  
    vec3 temp1;
    vec4 color;
    for(int i = 0; i < samples; ++i)
    {
         temp= texelFetch(tk_diffuseMap, ivec2(tmp), i).rgb;
         temp1=vec3(temp);
         temp1=temp1/factor;
        color = color + vec4(temp1,1.0);
    }

    fragColor = vec4(color/samples);
} 
```

使用此代码，我将获得整个几何图形的白色纹理。但是，它适用于标准化纹理格式。在未归一化纹理的情况下，写入帧缓冲区的正确方法是什么？

# java - 如何从arraylist中删除对象

> ID：14810735
> 
> 赞同：0
> 
> 时间：2013-02-11T10:53:21.567
> 
> 标签：java, android, arraylist

我有团队 ArrayList 的课程，我想删除名称为“FREE”的团队；

所以我尝试了：

```
 public void removeFree()
{

    for (int i = 0 ; i < numberOfTeams ; i++ )
    {
        if (this.getListOfTeams().get(i).getName() == "FREE")
        {
            this.getListOfTeams().remove(i);
        }
        else
        {}
    }
} 
```

这使我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:54:09.990

使用 equals() 方法检查两个字符串是否有意义地相等。`==`运算符只检查两个引用变量是否引用同一个对象。

```
 if (this.getListOfTeams().get(i).getName() == "FREE") 
```

应该

```
 if (this.getListOfTeams().get(i).getName().equals("FREE")) 
```

还要添加更多，即使您使用 equals() ，您也会`ConcurrentModificationException`在迭代它时从 arrayList 中删除元素。您必须使用迭代器并从中删除元素。

```
Iterator<Team> itr = getListOfTeams.iterator();
while(itr.hasNext()){
  if (itr.next().getName().equals("FREE"))
        {
            itr.remove();
        }
        else
        {}
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:57:47.710

要`List`在迭代时删除元素，将 an`Iterator`与`remove`方法一起使用会更安全：

```
for (Iterator it = getListOfTeams().iterator;it.hasNext();) {
    String name = it.next();
    if ("FREE".equals(name) {
        it.remove();
    }
    else{}
} 
```

请注意Java中的String值比较通常应该通过方法来完成`String.equals()`。`==`是引用相等运算符。请参阅[如何比较 Java 中的字符串？](https://stackoverflow.com/q/513832/851811)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:56:35.813

您在循环同一个 ArrayList 时试图删除一个项目。您需要先克隆，迭代克隆的列表，然后删除第一个指针的项目。

所以考虑一下：

```
List<Object> arrayToIterate = getListOfTeams().clone();
for (int i = 0 ; i < numberOfTeams ; i++ )
{
    if (tarrayToIterate.get(i).getName().equals("FREE"))
    {
        this.getListOfTeams().remove(i);
    }
    else
    {}
} 
```

此外，您正在将字符串与 == 而不是等于进行比较。

# php - PHP如果不是空行做更新否则插入

> ID：14810753
> 
> 赞同：2
> 
> 时间：2013-02-11T10:54:01.947
> 
> 标签：php, mysqli

这段代码有什么问题。如果表为空，我无法进入插入函数，它总是在更新。谁能帮我解决这个问题？

```
 while ($row = $result->fetch_object()) {

         if ($result->num_rows > 0) {

               $updatequery = sprintf("UPDATE stat_mailings SET cat_id='%s', mailing_name='%s', mailing_unique_id='%s', segment_id='%s', 
                                                                        campaign_id='%s', landing_page='%s', total_sent='%s' WHERE mailing_id='%s'",
                                        $row->category_id,
                                        mysqli_real_escape_string($mysqli, $row->mailing_naam),
                                        $row->unique_id,
                                        $row->mailing_segment,
                                        mysqli_real_escape_string($mysqli, $row->utm_campaign),
                                        mysqli_real_escape_string($mysqli, $row->landing_page),
                                        $row->mailing_total_sent, 
                                        $row->id                                           
                );

                 $mysqli->query($updatequery);
                 echo $error = $mysqli->error;   

        } else {

           $insertquery = sprintf("INSERT INTO stat_mailings SET mailing_id='%s', cat_id='%s', mailing_name='%s', mailing_unique_id='%s', segment_id='%s', 
                                                                        campaign_id='%s', landing_page='%s', total_sent='%s'",
                                        $row->id,
                                        $row->category_id,
                                        mysqli_real_escape_string($mysqli, $row->mailing_naam),
                                        $row->unique_id,
                                        $row->mailing_segment,
                                        mysqli_real_escape_string($mysqli, $row->utm_campaign),
                                        mysqli_real_escape_string($mysqli, $row->landing_page),
                                        $row->mailing_total_sent                                                                                       
                );

                 $mysqli->query($insertquery);
                 echo $error = $mysqli->error;      

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:11:25.993

Mysql 正是为此目的而具有强大的功能 - ON DUPLICATE 查询。
看起来像

```
INSERT INTO t SET f1=val,f2=val2 ON DUPLICATE KEY UPDATE f1=val,f2=val2 
```

等等。
只需确保您在关键字段上有一个唯一索引。
因此，您可以摆脱 SELECT 查询和结果检查。

# ruby-on-rails - Rails 视图模板路径加载似乎不正确

> ID：14810754
> 
> 赞同：0
> 
> 时间：2013-02-11T10:54:07.250
> 
> 标签：ruby-on-rails, ruby

我有一个问题，Rails 根据控制器路径搜索附加子目录。有没有办法让 rails 停止搜索一个额外的子目录？我有点喜欢我现在拥有的目录结构。这是详细信息：

Rails 将返回此错误消息。如您所见，它会进行`v1`两次：

```
Template is missing
Missing template api/v1/v1/print 
```

我有一个控制器`app/controllers/api/v1/v1_controller.rb`和一个视图`app/views/api/v1/print.html.erb`

config/routes.rb 中的具体路由是（半截断的）：

```
namespace :api do
    scope module: :v1 do
        match "v1/print",
            :to => "v1#print"
    end
end 
```

根据路线，它看起来不错。耙路线显示了这一点：

```
api_v1_print GET|POST /api/v1/print(.:format)  api/v1/v1#print {:format=>"html"} 
```

为什么一个目录太深了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:56:18.860

~~只需`v1`从比赛中删除，如下所示：~~

 ~~```
namespace :api do
    scope module: :v1 do
        match "print",
            :to => "v1#print"
    end
end 
```~~  ~~**编辑**

抱歉，问题出在您的模板文件夹中。

```
app/views/api/v1/print.html.erb
app/views/(namespace)/(module)/(action) <- you have forgoten the controller 
```

正确的是：

```
app/views/api/v1/v1/print.html.erb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:04:16.150

问题是 Rails 假设每个控制器都有一个子目录。由于模块和控制器名称中有 v1，因此形成了重复。我不会违背 Rails 的约定。相反，我会将控制器的名称更改为 API 控制器（或类似名称）并将模板放在名为 API 的目录下。

如果您仍然想这样做，只需`render`在您的打印操作中使用并指定您想要使用的确切文件（参见[此处](http://guides.rubyonrails.org/layouts_and_rendering.html)）~~

# sql - 每次当前时间等于我行中的时间时如何调用函数？

> ID：14810760
> 
> 赞同：0
> 
> 时间：2013-02-11T10:54:20.650
> 
> 标签：sql, sql-server

我的表中有“日期”列。每次当当前时间等于“日期”列中的时间时，我都需要为此表调用我的函数。我不知道是否可以在 ms sql server 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:49:25.910

您似乎正在尝试实施某种调度。

您可以尝试使用一种名为[*SQL Server Agent*](http://msdn.microsoft.com/en-us/library/ms189237.aspx)的 SQL Server 服务来实现。虽然它可能不适合对时间事件的*各种*响应，但它应该能够管理某些任务。

您需要为其设置 SQL Server 代理*作业*。

一项作业需要至少包含一个*作业步骤*，并且至少有一个可运行的*计划。*也许，此时您最容易使用*Transact-SQL*类型的作业步骤。

Transact-SQL 作业步骤只是一个 Transact-SQL 脚本，一个多语句查询。在您的情况下，它可能会首先检查是否有与当前时间匹配的行。然后，对于每个匹配的行，或者对于它们的整个集合，它将执行 Transact-SQL 允许您执行的任何类型的操作。

# behat - 使用 Behat 预定义步骤的翻译（Phar 安装）

> ID：14810765
> 
> 赞同：3
> 
> 时间：2013-02-11T10:54:41.197
> 
> 标签：behat, mink

我已经使用 Mink Extension 的预定义步骤定义运行了一些测试。只要他们使用英语，他们就可以工作。

现在我用德语步骤尝试了以下场景：

```
# language: de
Funktionalität: Demo

  @javascript
  Szenario: Test 1
    Angenommen I am on "/"
    Angenommen ich bin auf "/"
    ... 
```

Behat 现在告诉我德语步骤定义未定义，而英语版本有效。

根据 CLI 帮助，`behat --lang de -dl`应该显示翻译的定义，但它只显示英文的...

我在这里做错了什么？

编辑：这是一个重建场景的脚本。它遵循临时目录中的文档 ( [http://extensions.behat.org/mink/#through-phar ) 中的安装步骤并运行测试功能文件。](http://extensions.behat.org/mink/#through-phar)

```
#!/bin/bash

set -e

TEMPDIR=/tmp/behat-$$
mkdir $TEMPDIR
cd $TEMPDIR

curl http://behat.org/downloads/behat.phar >behat.phar
curl http://behat.org/downloads/mink.phar >mink.phar
curl http://behat.org/downloads/mink_extension.phar >mink_extension.phar

cat >behat.yml <<EOF
default:
  extensions:
    mink_extension.phar:
      mink_loader: 'mink.phar'
      base_url:    'http://behat.org'
      goutte:      ~
EOF

mkdir features
cat >features/test.feature <<EOF
# language: de
Funktionalität: Demo

  Szenario: Öffne Startseite DE + EN
    Angenommen I am on "/"
    Angenommen ich bin auf "/"
EOF

php behat.phar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-11T11:53:54.557

基本上你没有做错什么。

虽然 Behat/Gherkin 本身的翻译包含在 behat.phar 文件中，但 MinkExtension 中步骤定义的翻译在 mink_extension.phar 档案中缺失。

这似乎是因为[构建脚本](https://github.com/Behat/MinkExtension/blob/master/build.php)仅包含 MinkExtension/src/ 中的文件，而没有 MinkExtension/i18n/。你可以打开一个[问题给 MinkExtension](https://github.com/Behat/MinkExtension/issues)来解决这个问题。

作为一种解决方法，我建议使用 composer 而不是使用 phar 档案来安装 Behat/Mink。

创建以下 composer.json 文件：

```
{
    "require": {
        "behat/behat": "2.4.*@stable",
        "behat/mink": "1.4.*@stable",
        "behat/mink-extension": "*",
        "behat/mink-goutte-driver": "*",
        "behat/mink-selenium2-driver": "*"
    },
    "minimum-stability": "dev",
    "config": {
        "bin-dir": "bin/"
    }
} 
```

然后安装它：

```
curl http://getcomposer.org/installer | php
php composer.phar install 
```

# c++ - 链表插入（使用的类）

> ID：14810767
> 
> 赞同：-1
> 
> 时间：2013-02-11T10:54:43.640
> 
> 标签：c++

```
template <class T>
void List<T>::insertAtHead(T item)
{
   ListItem<T> *node=new ListItem<T>(item);
   ListItem<T> *temp;

   temp=head;
   head=node;
   head->next=temp;
   temp->prev=head;
} 
```

有人可以指出这段代码有什么问题吗？我正在制作一个带有类的链接列表。我真的很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:03:54.100

你可能从`head == NULL`. 尝试检查空指针：

```
template <class T>
void List<T>::insertAtHead(T item)
{
   ListItem<T> *node=new ListItem<T>(item);
   ListItem<T> *temp;

   temp=head;
   head=node;
   head->next=temp;
   if (temp)
       temp->prev=head;
} 
```

# c# - MVC4 URLHelper 工作，但 HTMLHelper 不是。我究竟做错了什么

> ID：14810771
> 
> 赞同：2
> 
> 时间：2013-02-11T10:54:51.303
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在[上一篇文章](https://stackoverflow.com/questions/14771615/mvc-helpers-working-inline-but-not-in-app-code/14771649#comment20683028_14771649)中，我问了一个关于开始使用助手的问题。我成功了，但是当我尝试使用该技术时 1\. 编写基于 Html.RenderAction 的不同助手，以及 2\. 传入我自己的自定义助手时，一旦将它们导出到 App_Code 就会出错。

再次强调，它们是内联的，但不是在导出到 App_Code 时。

这是原始代码：

我的代码的许多部分只有以下内容：

```
 <section class="Box">
        @{ Html.RenderAction("PageOne"); }
    </section> 
```

许多其他部分都有这个：

```
@if (@Model.PageTwo)
{
    <section class="Box">
        @{ Html.RenderAction("PageTwo"); }
    </section>
} 
```

所以我的第一步是将以下内容提取到一个内联助手中，它可以在我上面的所有代码块中使用：

```
@helper Item(HtmlHelper html, string action, string htmlClass)
{
    <section class="@htmlClass">
        @{ html.RenderAction(action); }
    </section>
} 
```

上面的帮助程序允许我用以下行替换所有看起来像上面第一个代码段的代码块：

```
@Item(Html, "PageOne", "Box") 
```

然后我继续编写第二个助手，如下所示：

```
@helper Item(HtmlHelper html, string action, string htmlClass, bool test)
{
    if (test)
    {
        @Item(html, action, htmlClass)
    }
} 
```

这个助手允许我用这一行替换所有看起来像上面第二个代码段的代码块：

```
@Item(Html, "PageTwo", "Box", @Model.ShowThisTorF) 
```

我的主要问题再次是，这是内联的，所以当我将它删除到 App_Code 时为什么不这样做。

将其移至 App_Code 后，出现以下错误： 第一个问题是关于添加使用引用（因为 HtmlHelper 不明确），我在其中添加了以下代码行：

```
 @using HtmlHelper=System.Web.Mvc.HtmlHelper 
```

这消除了第一个错误，但随后我得到另一个错误：

> System.Web.Mvc.HtmlHelper 不包含“RenderAction”的定义，并且找不到接受“System.Web.Mvc.HtmlHelper”类型的第一个参数的扩展方法“RenderAction”（您是否缺少 using 指令或装配参考？）

我也尝试了其他参考，但没有结果：

```
 @using HtmlHelper=System.Web.WebPages.Html.HtmlHelper 
```

我遇到的另一个问题是，一旦我让第一个块工作，我认为第二个块不会工作。即使它在内联工作得很好。

另外，我知道这很明显，但是如果我不在这里说，有人会在他们的回答中问它。当我将它移到文件 App_Code 中时，我确实根据需要添加了文件名前缀，因此一行代码块看起来像：

```
@Helpers.Item(Html, "PageOne", "Box")
@Helpers.Item(Html, "PageTwo", "Box", @Model.ShowThisTorF) 
```

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:01:14.743

App_Code 目录中正确的`HtmlHelper`内部助手是 `System.Web.Mvc.HtmlHelper`.

因为`RenderAction`是一种扩展方法，所以您需要`using`为声明它的命名空间添加一个`@using System.Web.Mvc.Html`

因此，假设您的文件已命名`Helpers.cshtml`并位于 App_Code 目录中，这应该可以工作：

```
@using HtmlHelper=System.Web.Mvc.HtmlHelper
@using System.Web.Mvc.Html

@helper Item(HtmlHelper html, string action, string htmlClass)
{
    <section class="@htmlClass">
        @{ html.RenderAction(action); }
    </section>
}
@helper Item(HtmlHelper html, string action, string htmlClass, bool test)
{
    if (test)
    {
        @Item(html, action, htmlClass)
    }
} 
```

以及用法：

```
@Helpers.Item(Html, "PageOne", "Box")
@Helpers.Item(Html, "PageTwo", "Box", @Model.ShowThisTorF) 
```

# javascript - RegEx - JavaScript - 使用任何协议、子域和文件夹验证已知域

> ID：14810773
> 
> 赞同：1
> 
> 时间：2013-02-11T10:54:53.830
> 
> 标签：javascript, regex

我需要使用 JavaScript 验证已知域，例如**domain.com**，但我需要使用任何子域或子子域等验证它，以及使用任何协议以及任何文件夹、子文件夹等等，我有这个正则表达式：

```
RegEx: /http:\/\/([\.|a-z]+).domain([\.|a-z]+)\// 
```

问题是它没有得到 https/ftp/ftps ......它得到了*domain* **.com** / *domain* **.org** ......我需要验证，像这样：

```
To validate: *://*.domain.com/*
Example: http://example.domain.com/subfolder2/folder24/
Example: https://subdomain.domain.com/folder/
Example: ftp://www.example.domain.com/folder2/folder/
Example: http://www.domain.com/folder/sub-folder/ 
```

我的意思是，任何协议、任何子域和任何文件夹，当然，它们也都在一起：

```
Example: https://example.domain.com/folder/folder/ 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:03:27.890

试试这个正则表达式：

```
/^(https?|ftp):\/\/[.a-z]+\.domain\.com[.a-z0-9/-]+/ 
```

这将匹配您所访问的域：

```
http://example.domain.com/subfolder2/folder24/
https://subdomain.domain.com/folder/
ftp://www.example.domain.com/folder2/folder/
http://www.domain.com/folder/sub-folder/ 
```

这个怎么运作：

```
# /            - Regex start,
# ^            - Match the start of the string,
# (https?|ftp) - followed by `https`, `http` or `ftp`,
# :\/\/        - followed by `://`,
# [.a-z]+      - followed by any amount of letters or periods,
# \.           - followed by a period,
# domain\.com  - followed by the domain name,
# [.a-z0-9/-]+ - followed by the rest of a possible url.
# /            - regex end. 
```

# django - 如何在 Django 中将 http 请求从 Post 更改为 Get？

> ID：14810775
> 
> 赞同：2
> 
> 时间：2013-02-11T10:54:57.723
> 
> 标签：django, django-views

假设我有一个将接受 POST 请求的视图。验证检查通过后，我需要使用 GET 方法将请求重定向到另一个 HTML/视图：

```
def view1(request):
    if request.POST:
       form = TempForm(request.POST)
       if form.is_valid():
           return redirect(request, 'view2')

def view2(request):
    if request.POST:
       #POST stuff here
    else:
       #GET stuff here 
```

我的问题是，在 之后`form.is_valid()`，重定向请求将作为 POST 方法传递。我的最终目标是使用 GET 方法重定向 view2。

我可以在 Django 中做这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:21:07.003

您可以使用[HttpResponseRedirect](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpResponseRedirect)类重定向到您喜欢的任何 URL。由于它是重定向，因此请求将是 GET 请求（使用 http 重定向无法进行 POST - 这是 http 协议的限制）。

如果您需要添加 GET 参数，您可以简单地自己创建 GET 字符串 -

```
get_string = "?"
get_strint += "my_param=" + my_variable + "&"
get_string += "my_other_param=" + my_other_variable
return HttpResponseRedirect('/my_url/' + get_string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T23:50:33.723

用户代理（浏览器）决定是否使用 POST 或 GET 进行重定向。如果被重定向，大多数浏览器将从 POST 切换到 GET。我知道你可以被重定向并留在 POST 中的唯一方法是如果你明确地这样做，例如使用 curl -X POST。

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# c++ - C++ 浮点异常

> ID：14810787
> 
> 赞同：0
> 
> 时间：2013-02-11T10:55:48.440
> 
> 标签：c++, visual-c++

我在我的应用程序中对浮点数进行了一些计算。在某些情况下，我得到了 -1.#J 和 1.#R 这样的数字。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:01:43.007

`-1.#J`是 NaN 还是 inf：[浮点错误 -1.#J 是什么意思？](https://stackoverflow.com/questions/840081/what-does-floating-point-error-1-j-mean)

`1.#R`下溢（指数太小）： http: [//www.windows-api.com/microsoft/VC-Language/31121018/1r-result-from-floating-point-arithmetic.aspx](http://www.windows-api.com/microsoft/VC-Language/31121018/1r-result-from-floating-point-arithmetic.aspx)

# java - 当对象被创建时

> ID：14810794
> 
> 赞同：-2
> 
> 时间：2013-02-11T10:56:20.283
> 
> 标签：java

我在java中有以下场景。

```
class Apple {

    static Apple ap = new Apple();

    public static void main(String[] arg) {
    }
} 
```

这个全局对象是什么时候创建的？
如果它是在类加载器时创建的，它会在那时加载所有非静态成员吗​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:15:28.737

`ap`当类第一次加载到内存中时被初始化。

`ap`初始化时，它会创建一个对象`Apple`，并且该对象的所有非静态成员`ap`都按照构造函数中的指定进行初始化。

所以非静态成员`ap`在类加载时被初始化。

# python - 烧瓶 url_for 生成 http URL 而不是 https

> ID：14810795
> 
> 赞同：65
> 
> 时间：2013-02-11T10:56:21.863
> 
> 标签：python, url-routing, flask, werkzeug

我`url_for`用于在用户注销时生成重定向 URL：

```
return redirect(url_for('.index', _external=True)) 
```

但是，当我将页面更改为*https*连接时，`url_for`仍然给我*http*。

我想明确要求在 URL 的开头`url_for`添加*https 。*

你能指点我如何改变它吗？我查看了 Flask 文档，没有运气。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-27T12:17:54.487

使用 Flask 0.10，将会有比 wrapping 更好的解决方案`url_for`。如果您查看[https://github.com/mitsuhiko/flask/commit/b5069d07a24a3c3a54fb056aa6f4076a0e7088c7](https://github.com/mitsuhiko/flask/commit/b5069d07a24a3c3a54fb056aa6f4076a0e7088c7)，`_scheme`则添加了一个参数。这意味着您可以执行以下操作：

```
url_for('secure_thingy',
        _external=True,
        _scheme='https',
        viewarg1=1, ...) 
```

`_scheme`设置 URL 方案，生成一个 URL，`https://..`而不是`http://`. 但是，默认情况下 Flask 只生成路径（没有主机或方案），因此您需要包含`_external=True`to go from `/secure_thingy`to `https://example.com/secure_thingy`。

* * *

**但是，请考虑将您的网站设置为仅 HTTPS。**似乎您正在尝试仅对少数“安全”路由部分强制实施 HTTPS，但如果链接到安全页面的页面未加密，则无法确保不会更改您的 https-URL。这类似于[混合内容](https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content)。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-06-15T17:53:12.177

如果您想影响所有服务器生成的 URL (`url_for`和`redirect`) 的 URL 方案，而不是`_scheme`在每次调用时都设置，似乎“正确”的答案是使用 WSGI 中间件，如以下代码段所示：[http:// flask.pocoo.org/snippets/35/](http://flask.pocoo.org/snippets/35/)

（[这个 Flask 错误](https://github.com/pallets/flask/issues/1065)似乎证实了这是首选方式。）

基本上，如果你的 WSGI 环境有`environ['wsgi.url_scheme'] = 'https'`，那么`url_for`就会生成`https:`URL。

我从中获取`http://`URL 是`url_for`因为我的服务器部署在 Elastic Beanstalk 负载均衡器后面，该负载均衡器以常规 HTTP 与服务器通信。我的解决方案（特定于 Elastic Beanstalk）是这样的（从上面链接的片段中简化）：

```
class ReverseProxied(object):
    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        scheme = environ.get('HTTP_X_FORWARDED_PROTO')
        if scheme:
            environ['wsgi.url_scheme'] = scheme
        return self.app(environ, start_response)

app = Flask(__name__)
app.wsgi_app = ReverseProxied(app.wsgi_app) 
```

其中特定于 Elastic Beanstalk 的部分是`HTTP_X_FORWARDED_PROTO`. 其他环境将有其他方法来确定外部 URL 是否包含 https。如果您只想始终使用 HTTPS，则可以无条件设置`environ['wsgi.url_scheme'] = 'https'`.

`PREFERRED_URL_SCHEME`不是这样做的方法。[只要请求正在进行](https://github.com/pallets/flask/commit/b49074eb6b19d8f5fdb3301a6e50f11845dd530d)，它就会被忽略。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-10-29T17:23:28.043

我用 arg 尝试了接受的答案，但我发现使用config 变量并将其设置为 https`url_for`更容易：[`PREFERRED_URL_SCHEME`](http://flask.pocoo.org/docs/0.10/config/#builtin-configuration-values)

```
app.config.update(dict(
  PREFERRED_URL_SCHEME = 'https'
)) 
```

因为您不必将其添加到每个`url_for`呼叫中​​。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2017-08-15T12:45:27.950

如果您通过 Nginx 等反向代理访问您的网站，那么 Flask 会正确检测到`HTTP`.

```
Browser -----HTTPS----> Reverse proxy -----HTTP----> Flask 
```

最简单的解决方案是配置您的反向代理来设置`X-Forwarded-Proto`标头。Flask 会自动检测这个 header 并相应地管理方案。Flask 文档中的 Proxy Setups 部分有[更详细的解释](http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/#proxy-setups)。例如，如果您使用 Nginx，则必须在`location`块中添加以下行。

```
proxy_set_header   X-Forwarded-Proto    $scheme; 
```

正如其他提到的，如果您无法更改代理的配置，您可以使用 werkzeug ProxyFix 或按照文档中的说明构建自己的修复：http: [//flask.pocoo.org/docs/0.12/deploying/ wsgi-standalone/#proxy-setups](http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/#proxy-setups)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-31T02:34:43.207

`_scheme`每次通话的设置都`url_for()`非常繁琐，而且`PREFERRED_URL_SCHEME`似乎不起作用。但是，在 WSGI 级别处理请求的假定方案似乎成功地说服了 Flask 始终构造 HTTPS URL：

```
def _force_https(app):
    def wrapper(environ, start_response):
        environ['wsgi.url_scheme'] = 'https'
        return app(environ, start_response)
    return wrapper

app = Flask(...)

app = _force_https(app) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-07-28T23:08:42.517

对于最近在这里结束的任何人，都有一个官方的 uwsgi 修复程序： [https ://stackoverflow.com/a/23504684/13777925](https://stackoverflow.com/a/23504684/13777925)

FWIW这仍然对我不起作用，因为标头没有正确设置，所以我增加了 ReversedProxied 中间件，如果这样发现更喜欢 https：

```
class ReverseProxied(object):
"""
Because we are reverse proxied from an aws load balancer
use environ/config to signal https
since flask ignores preferred_url_scheme in url_for calls
"""

    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        # if one of x_forwarded or preferred_url is https, prefer it.
        forwarded_scheme = environ.get("HTTP_X_FORWARDED_PROTO", None)
        preferred_scheme = app.config.get("PREFERRED_URL_SCHEME", None)
        if "https" in [forwarded_scheme, preferred_scheme]:
            environ["wsgi.url_scheme"] = "https"
        return self.app(environ, start_response) 
```

称为：

```
app = flask.Flask(__name__)
app.wsgi_app = ReverseProxied(app.wsgi_app) 
```

这样，如果您明确设置了环境变量“PREFERRED_URL_SCHEME”，或者如果 nginx/etc/proxy 设置了 X_FORWARDED_PROTO，它会做正确的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-29T15:13:20.933

我个人无法通过此处的任何答案解决此问题，但发现只需添加`--cert=adhoc`到烧瓶运行命令的末尾，这使烧瓶应用程序使用 https 运行，即可解决问题。

`flask run --host=0.0.0.0 --cert=adhoc`

# java - 如何在java中创建具有特定高度和宽度的特定位置的图像文件

> ID：14810802
> 
> 赞同：0
> 
> 时间：2013-02-11T10:56:38.097
> 
> 标签：java, image, opencv

我正在实施从图像中检测矩形对象的项目。我想将该部分存储到内存中。由于我每次得到的高度和宽度都是不可预测的，所以我不知道如何通过在 sd 卡上创建将完全占据矩形对象的图像文件来存储矩阵的那部分

我如何创建图像，例如。demo.jpg in //temp/ 大小为 90x50

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T11:10:23.373

使用 php GD 函数。使用如下代码

```
header ('Content-Type: image/png');
$im = @imagecreatetruecolor(120, 20)
  or die('Cannot Initialize new GD image stream');
$text_color = imagecolorallocate($im, 233, 14, 91);
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);
imagepng($im);
imagedestroy($im); 
```

从 [http://php.net/manual/en/function.set-error-handler.php获取帮助](http://php.net/manual/en/function.set-error-handler.php)

# zend-framework2 - Zend Framework - 使用控制器返回图像/文件

> ID：14810805
> 
> 赞同：2
> 
> 时间：2013-02-11T10:56:45.343
> 
> 标签：zend-framework2

我是 Zend Framework 2 的新手，只知道一点基础知识。我也很难找到很多例子。

问题：获取数据库中的BLOB字段并通过控制器显示。例如：www.mysite.com/images/2 将从数据库中检索一个 BLOB 并将其作为图像显示给用户，这样 html 标记之类`<img src="http://www.mysite.com/images/2"/>`的就会显示图像。

我通常在 ASP.NET MVC 中执行此操作，但不知道如何在此处执行此操作。如果有人能启发我如何实现它，我会很高兴。

假设我已经从数据库中获取了图像。

我设法找到了如何返回 JSON 并相信一些简单的事情会起作用。但找不到解决办法。我还需要发送这样的文件。

```
public function displayAction()
{
    $id = 10;
    $albumImage = $this->getAlbumImageTable()->getAlbumImage($id);

    if ($albumImages){
        //Show the image $albumImage
        //return JsonModel(array(...)) for json but for image ???
    } else{
        //Show some other image
    }
} 
```

如果有人可以提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T11:18:23.527

*从 Zend Framework 2.0 到 2.1*

如果要返回图像，只需返回填充内容的响应对象：这将告诉`Zend\Mvc\Application`完全跳过`Zend\Mvc\MvcEvent::EVENT_RENDER`事件并转到`Zend\Mvc\Application::EVENT_FINISH`

```
public function displayAction()
{
    // get image content
    $response = $this->getResponse();

    $response->setContent($imageContent);
    $response
        ->getHeaders()
        ->addHeaderLine('Content-Transfer-Encoding', 'binary')
        ->addHeaderLine('Content-Type', 'image/png')
        ->addHeaderLine('Content-Length', mb_strlen($imageContent));

    return $response;
} 
```

这将导致应用程序与[短路](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/Mvc/Application.php#L265-L273)，`Zend\Mvc\Event::EVENT_FINISH`进而能够将响应发送到输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T12:45:48.903

除了 Ocramius 的代码，如果您将图像上传到应用程序内的文件夹中，您可以使用以下方法检索内容：

```
$imageContent =  file_get_contents('data/image/photos/default.png');
$response->setContent($imageContent);
$response
    ->getHeaders()
    ->addHeaderLine('Content-Transfer-Encoding', 'binary')
    ->addHeaderLine('Content-Type', 'image/png')
    ->addHeaderLine('Content-Length', mb_strlen($imageContent));

return $response; 
```

# android - 在通知被按下时创建一个动作，Android

> ID：14810809
> 
> 赞同：0
> 
> 时间：2013-02-11T10:57:05.723
> 
> 标签：android, audio, android-intent, notifications, android-pendingintent

所以似乎无法正确配置或运行它。

试图获得打开 MainActivity3 文件的通知，然后让它运行我想要的任何东西，此刻只是为了让它播放声音。

对 android 开发完全陌生，但认为我是正确的。您会看到我有两种方法，但都无法正常工作。

MainActivity.java

```
package com.example.firstapp;

import android.media.MediaPlayer;
//import android.media.RingtoneManager;
import android.os.Bundle;
import android.os.Vibrator;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.v4.app.NotificationCompat;
import android.view.Menu;
//import android.app.*;
import android.view.*;
import android.widget.*;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //vibrate controls

    //Notification
    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.follownavi)
            .setContentTitle("Hey")
            .setContentText("");   

    PendingIntent pendingIntent;
    //Intent intent = new Intent();

   Intent intent= new Intent(MainActivity3.onNewIntent(), MainActivity3.class);
   intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);

   //intent.setClass(getApplicationContext(),MainActivity3.class);
   pendingIntent =  PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
   mBuilder.addAction(R.drawable.follownavi,"LISTEN",pendingIntent);
   mBuilder.setContentIntent(pendingIntent);

   NotificationManager notificationManager = (NotificationManager)     getSystemService(Context.NOTIFICATION_SERVICE);
   notificationManager.notify(1, mBuilder.build());

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    //get touch location
    int x = (int)event.getX();
    int y = (int)event.getY();
    //put on screen
    TextView tester = (TextView) findViewById(R.id.textView1);
    tester.setText("this is x:" + x + " and this is y:" + y);

    //move image
    ImageView iv = (ImageView) findViewById(R.id.NaviFollow);

    if(y > 222)
    {
    iv.setX(x - 125);
    iv.setY(y - 350);

    //cause vibration
    Vibrator v = (Vibrator) getSystemService(VIBRATOR_SERVICE);
    v.vibrate(300);
    }

return true;
}

} 
```

一旦通知被调用并出现它意味着运行这个文件 MainActivity3

```
 package com.example.firstapp;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;

public class MainActivity3 extends Activity {

protected Context onNewIntent()
{
MediaPlayer mp2 = MediaPlayer.create(getApplicationContext(), R.raw.listen);
 mp2.start();
return null;

}
} 
```

错误似乎是调用是静态的，但它想要无效，非常混乱错误代码

无法从类型 MainActivity3 MainActivity.java /firstApp/src/com/example/firstapp 第 38 行对非静态方法 onNewIntent() 进行静态引用

如果我更改方法以适应，那么媒体播放器 getApplicationContext 将无法工作

在做了更多研究之后，我觉得清单可能会阻止它，但仍然不确定 android 的结构。

显现

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.firstapp"
 android:versionCode="1"
 android:versionName="1.0" >
 <uses-permission android:name="android.permission.VIBRATE"/>
 <uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:allowBackup="true"
    android:icon="@drawable/navibutton"
    android:label="Navi"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.firstapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
            <receiver android:enabled="true" android:name=".BootUpReceiver"
    android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
                                <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>    
    </receiver>
    </application>

</manifest> 
```

请帮助，因为真的陷入困境并很想放弃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:43:37.533

你没有对 PendingIntent 做任何事情。您应该在调用 build() 之前在 Notification Builder 中设置它

```
mBuilder.setContentIntent(pendingIntent); 
```

此外，您必须意识到创建一个新的 Activity 并在 onCreate 上做一些事情对于执行操作并不是一个好主意。例如，如果您想在同一活动中显示敬酒，您可以在 Intent 中设置特定数据并在 onNewIntent() 中执行此操作。接受的答案有一个配置新意图处理的示例。

[Android：new Intent() 使用 android:launchMode="singleTop" 启动新实例](https://stackoverflow.com/questions/2424488/android-new-intent-starts-new-instance-with-androidlaunchmode-singletop)

# html - 如何设置字段位置？

> ID：14810814
> 
> 赞同：1
> 
> 时间：2013-02-11T10:57:22.323
> 
> 标签：html, css

火狐、Safari、IE
![在此处输入图像描述](../Images/88180595a92a3f02b898d8c2f0f9b280.png)![在此处输入图像描述](../Images/cdc1ecc3cb80bc7783c5d407f6310a06.png)![在此处输入图像描述](../Images/bf4f601423facc27f80de8fe5b4fa0a8.png)

可以看到在不同的浏览器中出现 1-2 px 的差异`input`，`div`如何清除呢？

HTML：

```
<input type="text" class="my-input-select" disabled="disabled"/>
<div class="my-input-select-box" >
    <ul style="z-index:100">
        <li>All</li>
        <li>Products</li>
        <li>Categories</li>
        <li>Clients</li>
        <li>News</li>
    </ul>
</div> 
```

CSS：

```
.my-input-select{
    border: 1px solid #acacac;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    padding: 5px;
    background: url(images/forms/select.png) no-repeat 98% center;
    cursor: pointer;
    display: block;
}

div.my-input-select-box{
    position: relative;
    margin: 0;
    padding: 0;
}

div.my-input-select-box ul{
    position: absolute;
    background: red;
    left: 110px;
    top: 26px;
    width: 172px;
    z-index: 100;
    margin: 0;
    padding: 0;
}

div.my-input-select-box li{
    border-bottom: medium none;
    color: #393939;
    cursor: pointer;
    display: block;
    font-size: 12px;
    line-height: 12px;
    list-style-type: none;
    margin: 0;
    padding: 6px 2px 6px 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:05:03.227

您必须使用 html、css 重置，例如[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

# c# - 枚举到数组索引的 int 强制转换

> ID：14810817
> 
> 赞同：0
> 
> 时间：2013-02-11T10:57:25.623
> 
> 标签：c#, enums

我很困惑我应该怎么做才能完成这项工作：

```
enum Phonemes { Phoneme0 = 0, Phoneme1 = 1, Phoneme2 = 2 };
enum Features { PhonemeID = 0, IsFirst = 1, IsLast = 2 };

        int[][] inputs = new int[3][];
        inputs[0] = new int[3];
        inputs[1] = new int[3];
        inputs[2] = new int[3];

        inputs[(int)Phonemes.Phoneme0][int()Features.PhonemeID] = 1; 
```

int 的第一个枚举工作正常，但是一旦我添加 [int()Features.PhonemeID]，编译器就不再喜欢它了。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:58:46.920

将其更改为：

```
 inputs[(int)Phonemes.Phoneme0][(int)Features.PhonemeID] = 1; 
```

你的括号是错误的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:58:35.607

我认为这是一个简单的错字

将其更改为：

```
inputs[(int)Phonemes.Phoneme0][(int)Features.PhonemeID] = 1; 
```

你写`int()`的不是`(int)`

# macos - 如何使 NSTableView 不重用 TableCellViews

> ID：14810818
> 
> 赞同：8
> 
> 时间：2013-02-11T10:57:37.367
> 
> 标签：macos, cocoa, nstableview

我希望我的基于视图的 NSTableview 不重用以前生成的滚动超出范围的 TableCellViews。我认为 UITableView 可以通过覆盖 dequeueReusableCellWithIdentifier: 返回 nil 来实现这一点。NSTableView 有类似的解决方案吗？

-

我的背景：我有一个非常复杂的基于视图的tableView，以通常的方式绑定到ManagedObjects（即table-content、-selection 和-sortdescriptor 绑定到arraycontroller，tableCellView-elements 绑定到objectValue）。

该表大约有 20 列，但最多 400 行。滚动确实很慢，但时间分析表明不存在单一的缓慢来源（最大的单个方法调用大约需要 5% 的时间）。在没有太多性能提升的情况下缓存了我的 ManagedObject 的派生/自定义属性后，我现在尝试缓存视图（以避免在视图进入范围时频繁重新绑定 tablecellViews）。

我目前正在尝试的是不绑定表格内容，而是使用 NSDatasource 协议获取我的视图。在里面

```
-(NSView*) tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

如果它们存在，我想返回缓存的 TableCellViews。否则我通过创建一个新的

```
[self.table makeViewWithIdentifier:... owner:self]; 
```

由于 makeViewWithIdentifier 可能会返回我已经缓存的视图，因此表格内容会被错误的单元格弄乱。

这种方法的性能明显更好......

-

其他关于使滚动更高效的想法也得到了应用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-28T03:54:44.347

在您的 tableView:viewForTableColumn: 实现中，将返回视图上的 .identifier 设置为 nil。这将防止表缓存它。然后，您可以管理自己的缓存。FWIW，您甚至不必使用 makeViewWithIdentifier: ；您可以从头开始手动创建视图，而不是使用该方法（从 NIB 加载预设置视图）。

但是，如果您遇到性能问题，最好通过查看慢的原因和原因来解决这些问题。你没有提供为什么它很慢的信息，所以很难说该怎么做。20列很多。通过尝试在 NSTableCellView 或 NSTableRowView 上使用 canDrawSubviewsIntoLayer 来减少层数，您可能会获得更好的性能。但是在执行此操作时有很多注意事项和需要注意的事项。

科尔宾

# concurrency - 比较 2 张地图的元素 - 我这样做对吗？

> ID：14810819
> 
> 赞同：1
> 
> 时间：2013-02-11T10:57:39.440
> 
> 标签：concurrency, go

周末刚开始使用 Go，我不确定我是否正确使用了 Go 的特性，或者我是否根本没有做过这种“Go-like”。

该代码应该遍历一个名为的地图的元素，`non_placed_alleles`并将每个元素与 中的所有元素进行比较，这些元素`placed_alleles`也存储在地图中。我正在尝试对其中的每个元素使用一个 go-routine，`non_placed_alleles`因为比较非常昂贵并且需要很长时间。

这是主要功能的一些内容：

```
runtime.GOMAXPROCS(8) // For 8 consecutive routines at once? got 10 CPUs
c := make(chan string)
for name, alleles := range non_placed_alleles {
    go get_best_places(name, alleles, &placed_alleles, c) 
    // pointer to placed_alleles as we only read, not write - should be safe?
}
for channel_item := range c {
    fmt.Println("This came back ", channel_item)
} 
// This also crashes with "all goroutines are sleeping", 
// but all results are printed 
```

这是被调用的函数：

```
func get_best_places(name string, alleles []string, placed_alleles *map[string] []string, c chan string) {
    var best_partner string
    // Iterate over all elements of placed_alleles, find best "partner"
    for other_key, other_value := range *placed_alleles {
        best_partner := compare_magic() // omitted because boring
    }
    c <- best_partner
} 
```

有没有办法让这个“更好”？快点？我是否正确使用了指针魔术和 goroutines？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:10:29.097

一些观察：

*   您可能想使用缓冲通道

    `c := make(chan string, someNumber) // someNumber >= goroutines cca`

*   死锁源于对没有人关闭的通道进行测距（这就是 range 语句终止的方式）。在 Go 中协调事物的机制因任务而异。在这种情况下，有些人可能会使用[sync.WaitGroup](http://golang.org/pkg/sync/#WaitGroup)。请仔细检查位于前面链接下方的示例代码，以获取有关正确使用 WaitGroup 的提示。另一种选择是某种/任何其他类型/方式来计算已启动与已完成的工人（WaitGroup 封装，但我倾向于将其视为矫枉过正）。

*   在这种情况下，无需传递指向 map 的指针。Go 中的地图具有完整的引用语义（无论如何它只是引擎盖下的一个指针）。

# sql - SQL：如何创建结果，如下所示

> ID：14810824
> 
> 赞同：0
> 
> 时间：2013-02-11T10:57:56.290
> 
> 标签：sql

我面临以下情况的问题：

进出口表：

```
Column_1  Column_2
A             A 
B             B 
C             C
D             D 
```

交叉加入会给我以下结果

```
Actual O/P Value:
AA
AB--This combinati

on is Repeated
    AC
    AD

BA--This combination is Repeated
BB
BC
BD

CA
CB
CC
CD

DA
DB
DC
DD 
```

预期的操作：

```
AA
AB
AC
AD

BB
BC
BD

CC
CD

DD 
```

我不想重复组合：像 AB 和 BA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:01:29.600

添加一个额外的条件，要求第二个值大于或等于第一个值：

```
.... WHERE (Column_2 >= Column_1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:03:33.090

```
select distinct least(column_1, column_2), greatest(column_1, column_2)
from ip_table 
   cross join ip_table
order by 1 
```

# java - 防止 JAXRSClientFactory 重用连接

> ID：14810825
> 
> 赞同：1
> 
> 时间：2013-02-11T10:57:55.820
> 
> 标签：java, rest, cxf, keep-alive

我正在使用**JAXRSClientFactory**实例化 REST 客户端以进行集成测试。

在两次测试之间，我重新启动了我的 Jetty 服务器，并将新的 REST 客户端实例化到相同的 URL。但是，CXF 似乎在使用某种连接池或连接保持活动系统，因为我在重新启动服务器后的第一次测试中遇到连接错误。

我没有在文档中找到任何说明使用连接池的内容：是这样吗？如果是这样，我该如何防止它，或者在测试结束时刷新给定客户端的连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:51:46.363

Dammit,

I finally found how to do it.

here is the code :

```
import org.apache.cxf.jaxrs.client.ClientConfiguration;
import org.apache.cxf.jaxrs.client.JAXRSClientFactory;
import org.apache.cxf.jaxrs.client.WebClient;
import org.apache.cxf.transport.http.HTTPConduit;
import static org.apache.cxf.transports.http.configuration.ConnectionType.CLOSE;

...

MyService proxy = JAXRSClientFactory.create("url", MyService.class);

// Disable keep-alive connection
ClientConfiguration config = WebClient.getConfig(proxy);
HTTPConduit conduit = config.getHttpConduit();
conduit.getClient().setConnection(CLOSE); 
```

# c# - 将文本文件上传到数据库

> ID：14810826
> 
> 赞同：0
> 
> 时间：2013-02-11T10:57:57.127
> 
> 标签：c#, sql, database, winforms

我有具有下一个结构的文本文件：

```
id=123
name=value
year=2013 
```

第一部分（id、name、year）是列名，最后一部分是我需要在列中传递的数据。我不知道该怎么做。1\. 我正在逐行读取文件 2\. ??

我只有愚蠢的想法用查询替换'='并尝试运行它。但它看起来像个坏主意......

我还需要检查数据库中是否存在数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:07:13.377

1.  上传您的文本文件
2.  逐行阅读
3.  更新数据库

## 我会怎么做

*   上传文本文件
*   创建一个`List`具有这些值并已实现 [验证](http://fluentvalidation.codeplex.com/)的对象。
*   [阅读每一行](http://msdn.microsoft.com/en-us/library/aa287535%28v=vs.71%29.aspx)和每三行`try`以构造该类型的有效对象以防出错，因为我不得不使用正则表达式或类似的东西来区分键和值。
*   使用我的对象列表通过 LINQ2SQL 更新数据库

# c# - 使用 .net 数据集连接到不同的数据库

> ID：14810831
> 
> 赞同：0
> 
> 时间：2013-02-11T10:58:06.537
> 
> 标签：c#, dataset

我有许多具有相同结构的数据库，并且我设计了一个与数据库设计相匹配的数据集。使用在设计时询问并在 app.config 中定义的 connectionStrings 很容易连接到数据库。但是当试图在运行时更改数据库时会出现问题。我找不到任何非反射解决方案来处理它。有没有其他方法可以在运行时动态更改数据集的连接字符串，或者至少创建具有不同连接字符串的数据集！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:21:01.487

gzaxx 答案将不起作用，仅仅是因为不同的 DBMS 与不同的 ADO.NET 提供程序一起工作，这些提供程序可能相互兼容，也可能不兼容。它背后有很多理论，我不会在这个文本框中输入所有这些，但您需要了解主要问题是 TableAdapters，而不是 DataTable。您的业​​务和 UI 层通常只与 DataTables 对话，因为您在创建表列时正确使用了相应的数据类型，所以几乎所有 DBMS 都具有相同的结构。因此，理论上，如果 Typed DataSets 可以提供一种为每个 DataTable 附加多个适配器的方法，那么您可以为您支持的每个 DBMS 添加一个适配器，同时保持 DataTable 结构相同。

我自己不得不在一个有点大的项目中处理这个问题，对我来说唯一可行的解​​决方案是将我的数据访问分离到一个单独的项目（一个类库）中，然后为我支持的每个 DBMS 创建一个这样的 DLL。希望这可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:09:12.247

您正在填充`DataSet`使用`TableAdapter`，您可以轻松地修改`TableAdapter`连接字符串，如下所示：

```
myTableAdapter.Connection.ConnectionString = connectionString; 
```

希望这可以帮助 ：）

# java - 使用自己的线程来实现带有短动画的弹出窗口？

> ID：14810836
> 
> 赞同：0
> 
> 时间：2013-02-11T10:58:23.383
> 
> 标签：java, user-interface, swt

我将不得不使用 Java SWT 实现弹出窗口。这些弹出窗口将以 100 毫秒的动画弹出。100ms 是边界，在此边界之下用户认为动作是立即发生的。

问题是：我应该为这个动画使用自己的线程吗？有人知道，原生弹出窗口是如何实现的吗？

示例：我可以在 UI 线程上的动画步骤之间调用睡眠，或者我可以在额外的线程上提取睡眠。

```
for(int i=0; i<height; i+=10){
   //change height here
   Thread.sleep(10); //makes UI unresposible for 10 ms
} 
```

问题是 - 在这么短的时间内裸露 UI 是否不负责任，还是应该在额外的线程上完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:05:43.257

回答你的问题..我真的取决于你的应用程序的需要。这总是非常好的建议，不要在 UI 线程中执行任何长时间运行的进程（总是取决于“长”是什么）。

无论如何，它不会让你的 GUI 停止 10 毫秒，而是总共 100 毫秒。SWT 中的 GUI 是由`readAndDispatch()`方法驱动的，所以在进行新调用之前，GUI 处于冻结状态（这就是为什么你必须首先使用`display.syncExec()`和`displayAsyncExec()`方法）..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:13:34.973

您可以使用 Trident 或任何其他计时框架。我看到 trident api 同时支持 SWT 和 Swing。基本上它在 UI 线程上异步运行你的动画逻辑。

[http://kenai.com/projects/trident/pages/Home](http://kenai.com/projects/trident/pages/Home)

# node.js - 用 node.js 和 express 提供一个带有 JS 的 HTML 页面

> ID：14810837
> 
> 赞同：0
> 
> 时间：2013-02-11T10:58:27.090
> 
> 标签：node.js, express

我正在尝试使用 node.js 和 express 提供带有链接 js 脚本的 html 页面。这是提供页面的服务器：

```
var express = require("express");
var app2 = express();
app2.get('/', function(req, res) {
   res.sendfile('./index.html');
});
app2.listen(process.env.VCAP_APP_PORT || 3000); 
```

这是页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
</head>
<body>
    <h1>Demo</h1>
    <script src="/js/socket.io.js"></script>
    <script src="/js/codice.js"></script>
</body> 
```

如您所见，我的 js 文件夹中有两个 js 脚本，但是当我启动页面时它们没有加载。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:06:17.213

您通常要做的是将任何公共资源（JavaScript 文件、CSS 文件、图像等）放在一个目录中（Express 默认将其命名为*公共*），然后在您的调用中使用[`express.static`中间件：](http://www.senchalabs.org/connect/static.html)`app.configure`

```
app.configure(function () {
    // Various other middleware functions...
    app.use(express.static(path.join(__dirname, "public")));
}); 
```

这有效地运行了一个静态文件服务器，它将返回*公共*目录中的任何文件。目前，您的浏览器正在请求您的 JS 文件，但 Express 服务器不知道如何处理它们。他们最终会超时。

如果您使用全局`express`可执行文件生成应用程序的初始状态（如果您通过 npm 全局安装 Express 则可用），它将为您设置大部分内容。

# c++ - cvSetImageData 和 cvCreateImage c++ 等效接口

> ID：14810838
> 
> 赞同：0
> 
> 时间：2013-02-11T10:58:28.347
> 
> 标签：c++, c, opencv, legacy-code, data-conversion

有没有可以对这两个函数做同样操作的c++ opencv接口？

嗨，我实际上是这样使用这两个功能的

```
IplImage *image;
ARUint8 *dataPtr; // unsigned chars, in format ARGB
cv::Size size;

//do stuff

image = cvCreateImage(*size, IPL_DEPTH_8U, channels );

cvSetImageData( image, dataPtr, size->width * channels ); 
```

最适合创建的一个用于初始化一个空的 IplImage *image，第二个用于将原始数据从外部源 (dataPtr) 复制到图像本身。

我知道第一个应该是微不足道的，替换IplImage con un cv::Mat，问题是我不知道如何将参数“IPL_DEPTH_8U”传递给构造函数。

要使用 c++ 接口复制数据，我不知道...

PS：ARUint8 *dataPtr 是我的数据源，我不能有其他源，但是我需要将它转换为opencv数据表示

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:09:22.053

就像您怀疑的那样，在 C++ 接口中，您可以通过`cv::Mat`. 您将必须使用对应的适当类型`IPL_DEPTH_8U`（可能`CV_8U`或`CV_8UC3`取决于您拥有的频道数量）。

构造函数重载之一可以采用指向现有数据的原始指针，因此您可以这样做：

```
cv::Mat image(size, CV_8U, (void*)dataPtr); 
```

另请注意， cv::Mat 构造函数可以接受一个`step`参数，如果您的数据在行尾有填充，或者任何其他更复杂的格式，则需要该参数。

您还可以随时[在线浏览 Mat::Mat 的 OpenCV 文档以](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat)获取更多详细信息。

# blackberry - 黑莓字段管理器滚动显示 NullpointerException

> ID：14810844
> 
> 赞同：1
> 
> 时间：2013-02-11T10:58:41.483
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde

我在使用 Blackberry 水平和垂直字段管理器时遇到问题。在我的示例应用程序中，我将两个垂直字段管理器添加到一个水平字段管理器中，GUI 如下图所示。

![图形用户界面](../Images/cd978220d58180e5784f661db6399b9c.png)

在按钮的字段更改侦听器中，我正在删除左侧 VFM，然后只显示主页按钮，在主页按钮侦听器中，我正在添加左侧 VFM，然后返回到上面的屏幕。

滚动左侧内容并删除左侧 VFM 后出现问题，然后仅显示 Home 按钮，并且触控板导航（滚动）导致 Null Pointer 异常屏幕。下图包含错误的模拟器屏幕截图。

![错误画面](../Images/fe18ad1ccad467603bc55bdf875b51de.png)

这是重现错误的完整源代码。

```
public class MyApp extends UiApplication{
    public static void main(String[] args)
    {
        // Create a new instance of the application and make the currently
        // running thread the application's event dispatch thread.
        MyApp theApp = new MyApp();       
        theApp.enterEventDispatcher();
    }

    /**
     * Creates a new MyApp object
     */
    public MyApp()
    {        
        // Push a screen onto the UI stack for rendering.
        pushScreen(new MyScreen());
    }
}

public final class MyScreen extends MainScreen{

    private HorizontalFieldManager hfmMainManager = null;

    private VerticalFieldManager menuButtonManager = null;

    private String[] buttons = new String[]{"BUTTON ID 1",
            "BUTTON ID 2",
            "BUTTON ID 3",
            "BUTTON ID 4",
            "BUTTON ID 5",
            "BUTTON ID 6",
            "BUTTON ID 7",
            "BUTTON ID 8",
            "BUTTON ID 9",
            "BUTTON ID 10"};

    private boolean menuShowing = false;

    /**
     * Creates a new MyScreen object
     */
    public MyScreen()
    {        
        super( Manager.NO_VERTICAL_SCROLL | MainScreen.NO_VERTICAL_SCROLLBAR
                | Manager.NO_HORIZONTAL_SCROLL | Manager.NO_HORIZONTAL_SCROLLBAR);

        hfmMainManager = new HorizontalFieldManager(Manager.NO_HORIZONTAL_SCROLL
                | Manager.NO_HORIZONTAL_SCROLLBAR);

        ////////////////////MENU BUTTONS
        menuButtonManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR);

        menuButtonManager.add(new ButtonField("Header Button", Field.FIELD_HCENTER));
        VerticalFieldManager vfmScrollable = new VerticalFieldManager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR);
        for (int i = 0; i < buttons.length; i++) {

            ButtonField buttonField = new ButtonField(buttons[i], Field.FIELD_HCENTER);
            buttonField.setChangeListener(listenerButton);
            vfmScrollable.add(buttonField);
        }
        menuButtonManager.add(vfmScrollable);

        hfmMainManager.add(menuButtonManager);

        VerticalFieldManager vfmMenuContentManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLLBAR | Manager.NO_VERTICAL_SCROLL);

        ButtonField buttonField = new ButtonField("Home Button", Field.FIELD_HCENTER);
        buttonField.setChangeListener(listenerButton);
        buttonField.setMargin(10, 0, 10, 0);
        vfmMenuContentManager.add(buttonField);

        hfmMainManager.add(vfmMenuContentManager);

        add(hfmMainManager);

        menuShowing = true;
    }

    private FieldChangeListener listenerButton = new FieldChangeListener() {

        public void fieldChanged(Field arg0, int arg1) {

            synchronized (UiApplication.getEventLock()) {
                if(menuShowing){
                    menuShowing = false;
                    hfmMainManager.delete(menuButtonManager);
                }else{
                    menuShowing = true;
                    hfmMainManager.insert(menuButtonManager, 0);    
                }
            }
        }
    };
} 
```

我该如何解决这个问题？

提前致谢

问候

阿尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:44:00.857

在尝试从焦点或非焦点事件更改字段结构时，我看到了类似的行为。当一个字段在焦点事件中间从屏幕上移除时，焦点跟踪可能会失去同步，并导致像这样的异常错误。尝试从获取 UI 锁更改为调用 invokeLater。这样，更改侦听器可以在您删除 VFM 之前完成执行，从而保持所有不变量。

摆脱这个：

```
synchronized (UiApplication.getEventLock()) { 
```

用这个替换它：

```
UiApplication.getInstance().invokeLater(new Runnable{ public void run() { 
```

# mysql - 仅将 3 个字段插入 54 个字段的 mysql 表中

> ID：14810848
> 
> 赞同：0
> 
> 时间：2013-02-11T10:58:47.223
> 
> 标签：mysql

如何在具有 54 个字段的 MySQL 数据库表的仅 3 个字段中插入数据

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:00:04.427

像这样列出列：

```
INSERT INTO `tableName` ( `col1`, `col2`, `col3` ) 
VALUES ( 'value1', 'value2', 'value3' ); 
```

这样，只有列出的列将通过查询接收值。所有其他列将设置为其各自的默认值（或 null）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:00:30.077

这里是。首先指定列定义，然后指定相应的值。

但请确保其余列接受`NULL`或必须用`default`值指定。

[文档](http://www.w3schools.com/php/php_mysql_insert.asp)

```
INSERT INTO tbl(col1, col2, col3) VALUES("VALUE","VALUE","VALUE") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:00:41.217

```
INSERT INTO database (field1, field2, field3) VALUES (value1, value2, value3) 
```

忽略其余字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:01:23.687

用这个：

认为

```
INSERT INTO table_name ( field1, field2,...fieldN )
                       VALUES
                       ( value1, value2,...valueN ); 
```

适合您的情况

```
INSERT INTO table_name ( field1, field2,field3)
                       VALUES
                       ( value1, value2,value3 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T11:01:34.490

```
insert into tablename ('column1','column2','column3')
values('val1','val2','val3'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T11:01:45.973

您可以在 INSERT 语句中指定您需要的字段，例如 -

```
INSERT INTO table1(column1, column2, column3) VALUES (1, 2, 3); 
```

**注意：**所有其他列必须具有默认值 -

```
CREATE TABLE table1 (
  column1 VARCHAR(255) DEFAULT NULL,
  column2 VARCHAR(255) DEFAULT NULL,
  column3 VARCHAR(255) DEFAULT NULL,
  column4 VARCHAR(255) DEFAULT 'default value for column4',
  column5 VARCHAR(255) DEFAULT 'default value for column5'
) 
```

# java - 为什么 Eclipse 的 m2e 插件向 src 插入可选属性，它有什么作用

> ID：14810849
> 
> 赞同：8
> 
> 时间：2013-02-11T10:58:51.077
> 
> 标签：java, eclipse, maven, m2e, eclipse-jdt

`Maven -> Update Project...`在运行工具并`Update project configuration from pom.xml`选中选项后，我开始在我的 .classpath 文件中注意到这些属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src">
        <attributes>
            <attribute name="optional" value="true"/>
            <attribute name="maven.pomderived" value="true"/>
         </attributes>
    </classpathentry>
    ...
</classpathentry> 
```

最让我挑眉的属性是：`<attribute name="optional" value="true"/>`.

它有什么作用？它看起来非常可疑，因为我在项目中发现我的 java 源文件没有任何可选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:20:19.497

添加这是因为该`src`文件夹是 maven 的可选文件夹。`src`如果丢失，该项目不应抱怨。（实际上默认情况下应该是`src/main/java`and `src/test/java`）。这意味着添加或删除`src`作为源文件不需要更新您的 Maven 配置。

在您的情况下，此属性不需要存在，但它清楚地表明，只要可以编译所有内容，maven 就不会关心源文件夹是否存在（因此 Eclipse 也不应该关心）。

# mysql - MySQL查询以获取上周的数据

> ID：14810856
> 
> 赞同：-2
> 
> 时间：2013-02-11T10:59:34.827
> 
> 标签：mysql

我想运行一个 MYSQL 查询来获取前一周的数据。日期列的数据类型是 DATETIME。有人可以建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T11:13:15.460

```
SELECT * 
  FROM calendar 
 WHERE dt BETWEEN CURDATE()-INTERVAL 1 WEEK AND CURDATE(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-07T18:47:23.143

这是另一个版本：

```
SELECT * FROM table WHERE 
YEARWEEK(`date`, 1) = YEARWEEK( CURDATE() - INTERVAL 1 WEEK, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T08:22:09.597

```
SELECT id FROM tbl
WHERE date >= curdate() - INTERVAL DAYOFWEEK(curdate())+6 DAY
AND date < curdate() - INTERVAL DAYOFWEEK(curdate())-1 DAY 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T08:57:34.597

这是我发现在前一个星期一到当前星期一之间获取数据最可靠的解决方案。（这是大多数人说过去一周时的意思，但不是全部，这反映在 mysql 中）。

```
SELECT 
   * 
FROM 
   table 
WHERE 
   date BETWEEN 
      (CURDATE() - INTERVAL 1 DAY) + INTERVAL -1 WEEK - INTERVAL WEEKDAY((CURDATE() - INTERVAL 1 DAY)) DAY 
      and 
      (CURDATE() - INTERVAL 1 DAY) + INTERVAL 0 WEEK - INTERVAL WEEKDAY((CURDATE() - INTERVAL 1 DAY)) DAY 
```

再换一周也很容易

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-11T11:14:30.700

为当前日期时间创建变量 - 1 周并进行以下查询：

```
SELECT * FROM table WHERE date > $datatime 
```

# android - 从 Titanium 运行 HelloWorld 应用程序

> ID：14810857
> 
> 赞同：1
> 
> 时间：2013-02-11T10:59:35.413
> 
> 标签：android, titanium

我对钛很陌生。我在 Titanium 上创建了一个 HelloWorld 应用程序。并尝试在连接到我的计算机的 Android 设备上运行它。但是当我尝试在设备上运行应用程序时，它会显示一些错误，例如

> [INFO] 日志文件 = C:\Titanium\Workspace\HelloWorld\build.log [DEBUG] C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py install HelloWorld C:\AndroidSDk\android-sdk-windows C:\Titanium\Workspace\HelloWorld com.titanium.helloworld 1 [DEBUG] 检测到模块分析，路径 = C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\ win32\3.0.0.GA\android\modules\titanium-analytics.jar [DEBUG] 检测到模块android，路径= C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\ android\modules\titanium-android.jar [DEBUG] 添加所需库：jaxen-1.1.1.jar [DEBUG] 添加所需库：ti-commons-codec-1.3.jar [DEBUG] 添加所需库：kroll-common。 jar [DEBUG] 添加所需库：titanium.jar [DEBUG] 检测到模块 app，路径 = C：\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\modules\titanium-app.jar [DEBUG] 检测到模块 ui，路径 = C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\modules\titanium-ui.jar [DEBUG] 添加所需库：android-support-v4.jar [DEBUG] 检测到模块文件系统，路径 = C:\Documents和 Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\modules\titanium-filesystem.jar [DEBUG] 检测到模块媒体，路径 = C:\Documents and Settings\xxx\Application Data\ Titanium\mobilesdk\win32\3.0.0.GA\android\modules\titanium-media.jar [DEBUG] 检测到模块语言环境，路径 = C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0。 0.GA\android\modules\titanium-locale.jar Traceback（最近一次调用最后）：文件“C：\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py”，第 2324 行，在 builder = Builder(project_name,sdk_dir,project_dir,template_dir,app_id) 文件“C :\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py"，第 362 行，在**init** android_creator.create(parent_dir, project_dir=self.top_dir, build_time=True) 文件 "C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\android.py",第 344 行，在创建 self.build_modules_info(resource_dir, app_bin_dir, include_all_ti_modules=include_all_ti_modules) 文件“C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\android.py”中，第 170 行，在 build_modules_info compiler.compile(compile_bytecode=False, info_message=None) 文件“C:\Documents and Settings\xxx\Application Data\Titanium\mobilesdk\win32\3.0.0.GA\android\compiler.py”中，第 271 行，在 os.walk(self.project_dir, True, None, True) 中为 root、dirs、文件编译时：TypeError: walk() 最多接受 3 个参数（给定 4 个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:20:11.540

I solved this issue by setting Environment Variable for JAVA_HOME and path. JAVA_HOME - C:\Java\jdk1.6.0_25 and path - C:\Java\jdk1.6.0_25\bin. Thanks...

# linq - 对数组进行排序并返回所有小于 X 的数字

> ID：14810861
> 
> 赞同：1
> 
> 时间：2013-02-11T10:59:52.487
> 
> 标签：linq

使用 linq，如何对数组进行排序，然后返回所有小于 X 的数字

对于排序，我使用它：（这是一个好方法吗？）

> var sorted = (从数组中的数字按数字升序选择数字).ToArray();

所以我把它排序在“排序”数组中。

我怎样才能返回其中小于 X 的所有数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:04:14.230

为什么要在过滤*之前*进行排序？这比先过滤并排序其余部分效率低：

```
var sorted = array.Where(i => i < x).OrderBy(i => i).ToArray(); 
```

或在查询语法中：

```
var sorted = (from i in array
              where i < x
              orderby i
              select i).ToArray(); 
```

[LINQ 扩展方法的顺序不影响性能？](https://stackoverflow.com/questions/10110013/order-of-linq-extension-methods-does-not-affect-performance)（标题具有误导性，实际上`OrderBy`是 E.Lippert 在他的回答中解释的顺序很重要的例外情况之一）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:04:07.303

```
var result = from n in array
             where n < value
             orderby n
             select n; 
```

或者在方法语法中：

```
var result = array.Where(n => n < value).OrderBy(n => n); 
```

如果您已经有排序数组，您也可以使用[TakeWhile](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.takewhile.aspx)

```
var result = sortedArray.TakeWhile(n => n < value); 
```

请记住，最好在排序之前过滤序列。为什么？因为当您进行排序时，所有项目都存储在内部排序结构中。因此，您必须排序的项目越少，您的代码运行得越快（并且使用的内存越少）。

# sql - 从数据库中选择 wp-option 表

> ID：14810862
> 
> 赞同：-4
> 
> 时间：2013-02-11T10:59:53.107
> 
> 标签：sql, wordpress

我必须从 wordpress 数据库中选择表。如何从数据库中选择 wp-option 数据库表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:08:34.843

```
global $wpdb; 
$wpdb->query( "SELECT * FROM $wpdb->$options" ); 
```

但是你的问题很模糊。你想达到什么目的？

如果它只是获得一个选项的值，那么您还有另一个 API 可以这样做。

[http://codex.wordpress.org/Function_Reference/get_option](http://codex.wordpress.org/Function_Reference/get_option)

例如 echo get_option('option_name', 'default_value');

# c# - ORA-01005: 给出了空密码；登录被拒绝

> ID：14810868
> 
> 赞同：2
> 
> 时间：2013-02-11T11:00:04.767
> 
> 标签：c#, sql-server, ssas, bids

我已经使用 SQL Server AMO 命名空间以编程方式创建了一个 SSAS 数据库。它已经创建成功。但是当我要使用数据源的 BIDS 探索数据时，它会提示这样的错误，

ORA-01005: 给出了空密码；登录被拒绝

我的连接字符串是

```
 @"Provider=OraOLEDB.Oracle.1;Data Source=//cmbtrndb02/hector;Password=trnint16;User ID=trnint16;Intergrated Security=yes"; 
```

我已将 ConnectionStringSecurity 属性用作“未更改”，但它给出了相同的错误。

```
ds.ConnectionStringSecurity = ConnectionStringSecurity.Unchanged; 
```

这可能是什么问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-21T23:44:12.093

旧帖子，但也许这可以帮助某人（就像它帮助了我一样）：

如果您在项目中使用“System.Data.Entity.Infrastructure”（也许您出于某种原因将 DbContext 转换为 ObjectContext？）您将收到此错误 (ORA-01005)。

正如我最终发现的那样，您只需在“Oracle.ManagedDataAccess.Client”的字符串连接上添加“Persist Security Info=true”即可轻松避免它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T14:50:22.577

如果由于某种原因您确实需要从其他连接中获取连接字符串，例如 user2306318 所指的，您需要将选项“Persist Security Info=True”添加到您的连接字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T15:15:08.667

您只需在连接字符串中包含密码，如下所示：如果您的用户名是*carl*，密码是*bullet56*，则：

> connectionString="数据源=LocalHost；用户ID=carl；Unicode=True；**密码=bullet56** "

希望它会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:14:43.050

当您使用 objcon.connectstring 时，新的连接对象会丢失密码。也许您正在代码中某处从连接对象（=无密码）读取连接字符串，而不是提供包括密码在内的完整连接字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-12T09:05:57.057

例如

> gacutil /u 策略。**2.102** .Oracle.数据访问

设置您的版本程序集

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-01T09:41:53.990

我在使用 oracle 19c 的 spring boot 中遇到了同样的错误，我只是将 jdk 版本更改为最新的 ie 13，它解决了我的问题。

# c# - C#中的递归

> ID：14810869
> 
> 赞同：1
> 
> 时间：2013-02-11T11:00:05.723
> 
> 标签：c#, recursion

我有一个自定义类型的对象（菜单），它可以包含相同类型的子元素，自然可以包含子元素等等。

我希望从这些对象中生成菜单和子菜单，但我想知道如何递归地遍历它们，这样我就不必对所有循环进行硬编码。我对递归不熟悉，有没有人能够阐明如何遍历 Menu 对象和所有底层对象？

示例代码：

```
public class Menu {
    public int MenuID { get; set; }
    public int Name { get; set; }
    public Menu[] _ChildMenus { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:21:26.490

这是一种选择：

```
private void TraverseMenu(Menu menu)
{
    Output(string.Format("Now reading menu #{0}, named {1}", menu.MenuID, menu.Name));
    if (menu._ChildMenus != null)
    {
        foreach (Menu child in menu._ChildMenus)
        {
            TraverseMenu(child);
        }
    }
} 
```

如果您需要知道每个菜单嵌套的“深度”程度，您可以添加一个级别参数：

```
private void TraverseMenu(Menu menu, int level)
{
    Output(string.Format("Now reading menu #{0}, named {1} in level {2}", menu.MenuID, menu.Name, level));
    if (menu._ChildMenus != null)
    {
        foreach (Menu child in menu._ChildMenus)
        {
            TraverseMenu(child, level + 1);
        }
    }
}

private void TraverseMenu(Menu menu)
{
    TraverseMenu(menu, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:27:16.640

出于渲染目的，您可以使用局部视图。

```
-- MenuView.cshtml

@model IEnumerable<Menu>

@if (Model != null && Model.Any())
{
    <ul>
        @foreach(var menu in Model)
        {
            <li>
                <a href='some/path/to/menu?id=@menu.MenuID'>@menu.Name</a>
                @Html.RenderPartial("MenuView", menu._ChildMenus)
            </li>
        }
    <ul>
} 
```

编辑：由于主题从“C# 中的递归”中与 MVC 相关的内容发生了变化，这似乎有点无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:48:36.143

通常每个*级别*的菜单都需要一个与之关联的不同循环，例如第一级（例如：home、products、about_us）将水平显示在顶部，第二级将出现在相关父菜单项下方的下拉列表中，第三级将出现在第二级菜单项等下方。

因此，对于循环，您理论上不希望按级别拆分它们，同时保持与父菜单项的链接，以便显示它们。另一个更普遍的事情是树中的最高菜单通常被忽略为其他菜单项的容器元素，这允许您拥有多个顶级菜单，如下所示：

**编辑：** *修复了代码..随时返回编辑历史以了解我是多么的非天才：p*

```
string html;
int lastLevel = 0;
void placeMenu( Menu menu, int level)
{
    // if level hasn't changed close last menu-item
    if( lastLevel == level ) html += "</li>";

    // if we're deeper, open a new <UL>
    else if( lastLevel < level ) html += "<ul>";

    // if we're less deep, close the last <UL> and it's parent menu-item
    else if( lastLevel > level ) html += "</ul></li>";

    // add current menu item without closing it's <LI> so the next itteration of the loop can add a submenu if needed
    html += "<li><a href='http://link/to/page'>" + menu.Name + "</a>";

    lastLevel = level;
}

void setupMenu( Menu menu, int level )
{
    foreach( var currentMenu in menu._ChildMenus )
    {
        // place current menu
        placeMenu( currentMenu, level + 1 );

        // place submenus
        setupMenu( currentMenu, level + 1 );
    }
}

string setupWholeMenu( Menu menu )
{
    setupMenu( menu, 0 );

    // close any elements left open by the recursive loop
    html = html + "</li></ul>";

    return html;
} 
```

此代码旨在从您的菜单结构中创建一个普通的 html 无序级列表，这是在 HTML 中添加和设置菜单样式的标准方法，当您拥有这种格式的菜单时，请查看其中一些资源以设置菜单样式。在这里使用 HTML 无序列表的原因是，如果正确实施，如果禁用 Javascript 和 CSS（GSM 和屏幕阅读器适用于部分视力），这个列表结构仍然会显示，并且如果禁用 Javascript，它仍然适用于 IE6+ 的所有内容。

*   [100 个很棒的 CSS 菜单教程](http://www.noupe.com/css/100-great-css-menu-tutorials.html)
*   [CSS 菜单制作器](http://cssmenumaker.com/css-menus)
*   [Suckerfish 下拉菜单](http://www.htmldog.com/articles/suckerfish/dropdowns/)（我第一次学习如何制作 CSS 菜单的地方）

老实说，虽然在 MVC 中通常更容易以声明方式直接将菜单设置为 HTML 中的无序列表，然后如果将其放置在部分共享页面中或通过定义在任何地方显示它，则可以以多种方式设置它的样式它在您的布局页面中。如果您具有如上所示的动态菜单结构，这种方法仍然可以工作，只是您使用 Razor 构建列表，这可能也更容易。

另一点需要注意的是，在这种递归函数中，您应该使用[StringBuilder](http://www.dotnetperls.com/stringbuilder)，因为它比连接字符串更有效。然而，对于一个菜单结构（最多包含 30 个项目，每个项目由 2-3 个 concats 构建），这不会导致任何明显的延迟，只是将来要记住的事情。

# python - Python 提高 random.sample 的性能

> ID：14810871
> 
> 赞同：0
> 
> 时间：2013-02-11T11:00:10.077
> 
> 标签：python, performance, optimization, random, dictionary

我正在编写一个函数来随机选择存储在字典中的元素：

```
import random
from liblas import file as lasfile
from collections import defaultdict

def point_random_selection(list,k):
    try:
        sample_point = random.sample(list,k)
    except ValueError:
        sample_point = list
    return(sample_point)

def world2Pixel_Id(x,y,X_Min,Y_Max,xDist,yDist):
    col = int((x - X_Min)/xDist)
    row = int((Y_Max - y)/yDist)
    return("{0}_{1}".format(col,row))

def point_GridGroups(inFile,X_Min,Y_Max,xDist,yDist):
    Groups = defaultdict(list)
    for p in lasfile.File(inFile,None,'r'):
        id = world2Pixel_Id(p.x,p.y,X_Min,Y_Max,xDist,yDist)
        Groups[id].append(p)
    return(Groups) 
```

其中 k 是要选择的元素的数量。组是字典

```
file_out = lasfile.File("outPut",mode='w',header= h)
for m in Groups.iteritems():
   # select k point for each dictionary key 
   point_selected = point_random_selection(m[1],k)
   for l in xrange(len(point_selected)):
     # save the data 
     file_out.write(point_selected[l])
file_out.close() 
```

我的问题是这种方法非常慢（对于 4 天左右的 ~800 Mb 文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:03:00.830

*您可以在阅读坐标时*尝试更新您的样本。这至少使您不必在运行示例之前将所有内容存储在内存中。*这不能保证让事情变得更快*。

以下内容基于[BlkKnght](https://stackoverflow.com/a/12134726)从文件输入构建随机样本而不保留所有行的出色答案。这只是将其扩展为保留多个样本。

```
import random
from liblas import file as lasfile
from collections import defaultdict

def world2Pixel_Id(x, y, X_Min, Y_Max, xDist, yDist):
    col = int((x - X_Min) / xDist)
    row = int((Y_Max - y) / yDist)
    return (col, row)

def random_grouped_samples(infile, n, X_Min, Y_Max, xDist, yDist):
    """Select up to n points *per group* from infile"""

    groupcounts = defaultdict(int)
    samples = defaultdict(list)

    for p in lasfile.File(inFile, None, 'r'):
        id = world2Pixel_Id(p.x, p.y, X_Min, Y_Max, xDist, yDist)
        i = groupcounts[id]
        r = random.randint(0, i)

        if r < n:
            if i < n:
                samples[id].insert(r, p)  # add first n items in random order
            else:
                samples[id][r] = p  # at a decreasing rate, replace random items

        groupcounts[id] += 1

    return samples 
```

上面的函数获取`inFile`你的边界坐标，以及样本大小`n`，并返回每组中最多有`n`项目的分组样本，统一挑选。

因为你使用`id`for 只是作为一个组键，我把它简化为只计算`col, row`元组，没有必要把它变成一个字符串。

您可以使用以下命令将这些写入文件：

```
file_out = lasfile.File("outPut",mode='w',header= h)

for group in samples.itervalues():
    for p in group:
        file_out.write(p)

file_out.close() 
```

# android - 打开 web 视图或幻灯片图像的 android 菜单

> ID：14810872
> 
> 赞同：0
> 
> 时间：2013-02-11T11:00:12.813
> 
> 标签：android, webview, onclick

我需要创建一个菜单来打开网页视图页面或带有图像幻灯片的简单页面。

我更精通网络编程，而不是Android编程。因此，如果在 a 中更容易做到，`WebView`我会使用它。否则我将使用图像幻灯片。

所以现在，当我按下手机的菜单按钮时，我需要 2 个项目。单击后，他们应该在应用程序中打开 2 个不同的链接（而不是在浏览器中）。

我`menu.xml`现在只做了：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_howto" android:title="@string/howto"
          android:icon="@android:drawable/ic_menu_howto" />

    <item android:id="@+id/menu_about" android:title="@string/about"
          android:icon="@android:drawable/ic_menu_info" />
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:02:40.027

在您的主目录中`class`，您必须 @override 菜单，例如：-

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

然后要使菜单按钮可点击，您必须在之后添加它

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.exit:
            finish();
         return true;
        case R.id.loadanotherwebpage:
loadUrl("www.google.com"); 
// inside the menu button you don't need to call Super.loadUrl, LoadUrl its enough 
            return true;
        case R.id.share:
            share(); // here i'm calling the share method !
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

编辑：如果你想从资产文件中加载 html 文件，那么这样做

```
 super.loadUrl("file:///android_asset/index.html"); 
```

希望你所要求的:)

# python - Thrift 服务器对于简单的操作来说真的很慢

> ID：14810874
> 
> 赞同：2
> 
> 时间：2013-02-11T11:00:18.597
> 
> 标签：python, haskell, thrift, thrift-protocol

我正在运行一个简单的 Thrift 服务器（[http://thrift.apache.org/](http://thrift.apache.org/)）作为 Python（服务器）和 Haskell（客户端）之间的跨语言平台。唯一需要发送的数据结构是双精度的 3 元组，因此服务器/客户端实现也非常简单 - 只需遵循教程即可。

然而，它真的，真的很慢！当我需要大约 0.1 秒或更低的时间时，每个服务器响应的响应时间约为 0.5 秒。

有人对如何加快速度有任何想法吗？您可以在下面看到我的简单服务器实现：

```
 1 import sys
  2 
  3 from vision import Vision
  4 from vision.ttypes import *
  5 
  6 from thrift.transport import TSocket
  7 from thrift.transport import TTransport
  8 from thrift.protocol import TBinaryProtocol
  9 from thrift.protocol.TBinaryProtocol import TBinaryProtocolAccelerated
 10 from thrift.server import TServer
 11 
 12 class VisionHandler:
 13   def observe(self):
 14     ret = Position()
 15     ret.x,ret.y,ret.z = (1,2,3)
 16     return ret
 17     
 18 ret = Position()
 20 handler = VisionHandler()
 21 processor = Vision.Processor(handler)
 22 transport = TSocket.TServerSocket(port=9090)
 23 tfactory = TTransport.TBufferedTransportFactory()
 24 pfactory = TBinaryProtocol.TBinaryProtocolFactory()
 25 
 26 server = TServer.TSimpleServer(processor, transport, tfactory, pfactory)
 27 
 28 print 'Starting the vision server...'
 29 server.serve()
 30 print 'done.' 
```

客户端只需通过运行查询该服务器

```
36   client = do
37     handle <- hOpen ("localhost", PortNumber 9090)
38     let binProto = BinaryProtocol handle
39     return (binProto, binProto) 
```

进而

```
res <- Client.observe =<< client 
```

据我所知，这都是非常标准的！怎么这么慢？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:16:12.087

除了 Ellioh answer 中关于套接字选项的很好建议之外，问题之一是您的操作似乎有点小而且可以通过套接字处理，而且大部分时间都花在网络和类似的延迟上。通常，人们会尝试将您的呼叫分组以传输更多数据并在每次呼叫中完成更多工作。粒度在网络分布式应用程序中非常重要，您需要找到良好的性能衡量标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:11:48.270

很可能是因为套接字选项。我不记得 Thrift 是否允许设置套接字选项，但设置`TCP_NODELAY`关闭拥塞控制有可能解决问题。

如果[这](https://github.com/evernote/evernote-sdk-python/blob/master/lib/thrift/transport/TSocket.py)是您使用的相同代码，则可以轻松访问套接字。尝试继承 TSocket。

应该为服务器端（从 accept() 返回的套接字）和客户端（由客户端创建的套接字）端的套接字发送/接收数据设置该选项。Thrift 并不慢，所以问题不应该出在序列化上，除非你正在序列化一些非常可怕的东西。这意味着问题在于所有“连接、发送数据、获得答案”的东西。几乎可以肯定应该是因为 Nagle 算法被`TCP_NODELAY`.

# mysql - MySQL 多个 IN 子句不起作用

> ID：14810877
> 
> 赞同：0
> 
> 时间：2013-02-11T11:00:35.950
> 
> 标签：mysql, where-in

我有一个 MySQL 表列量规，其中包含字符串值 '61,80,112,256'。所以我尝试执行该查询：

```
select * from table where 256 in (rubrics) and 61 in (rubrics) 
```

并且没有结果返回。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:05:40.647

由于您的`rubrics`列是逗号分隔的列表，因此`IN`运算符将不起作用。

MySQL 确实有一个可以在字符串列表中查找值的函数，因此您应该能够使用[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)：

```
select *
from yourtable
where find_in_set(61, rubrics)
  or find_in_set(256, rubrics) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/869bbe/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:04:07.200

类似的东西`WHERE rubrics LIKE '%,256,%' OR rubrics LIKE '256,%' OR rubrics LIKE '%,256'`。使用括号您也可以过滤`61`，但结果查询会变得混乱。你最好规范化你的数据，这样你就可以使用子查询和使用键的连接（真正的交易）。

（另请参阅bluefeet的答案，这`FIND_IN_SET`是一种更好的方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:03:39.407

试试这个

```
select * from table where rubrics like '%'+'256,'+'%' and rubrics like '%'+'61,'+'%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:08:26.270

`IN`运算符不适用于字符串

使用正确的子字符串匹配运算符，例如`LIKE`或`LOCATE`

一个建议 - 更新您的 rubics 列以`,`字符开头和结尾，这将使您的`LOCATE(",62,", rubics)`操作明确，而不是`LOCATE("62", rubics)`匹配 622 和 262 以及其他组合。`,62,`如果您的 rubics 具有价值，则定位将失败，因为`62,blah,foo,bar`它不是以`,`

# objective-c - 键盘不适用于 UIActionSheet 中的 UITextField

> ID：14810888
> 
> 赞同：0
> 
> 时间：2013-02-11T11:01:07.317
> 
> 标签：objective-c, cocoa-touch, uiactionsheet

操作表与文本字段一起出现。当我单击文本字段时，键盘出现但无法正常工作。当我输入时，它们在文本字段中不可见

```
UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Select reminder date and time"
                                                  delegate:self
                                         cancelButtonTitle:@"Cancel"
                                    destructiveButtonTitle:@"Save"
                                         otherButtonTitles:nil,nil];
menu.tag =10;
[menu showInView:self.view];
UITextField  *txtReminderTitle= [[UITextField alloc] initWithFrame:CGRectMake(20.0, 190, 280.0, 40.0)];
[txtReminderTitle setTag:99];
[txtReminderTitle setBackgroundColor:[UIColor whiteColor]];
[txtReminderTitle setFont:[UIFont boldSystemFontOfSize:17]];
[txtReminderTitle setBorderStyle:UITextBorderStyleNone];
[txtReminderTitle setTextAlignment:UITextAlignmentCenter];
txtReminderTitle.borderStyle = UITextBorderStyleRoundedRect;
txtReminderTitle.keyboardType = UIKeyboardTypeDefault;
txtReminderTitle.returnKeyType = UIReturnKeyDone;
txtReminderTitle.delegate =self;
[menu addSubview:txtReminderTitle]; 
```

请把我从这个问题中解救出来。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:41:12.833

我发现，当你添加`UITextField`到`UIActionSheet`then时`UITextField`，它仍然在下面，`UIActionSheet`所以你需要在`UITextField`上面显示`UIActionSheet`

为 add 编写以下代码`UITextField`：

```
UIWindow *appWindow = [UIApplication sharedApplication].keyWindow;
[appWindow insertSubview:txtReminderTitle aboveSubview:menu]; 
```

# razor - 在 Razor 动态属性中编码 WhiteSpace

> ID：14810889
> 
> 赞同：1
> 
> 时间：2013-02-11T11:01:11.143
> 
> 标签：razor, whitespace, html-encode

我有使用 Razor 生成的动态 HTML 属性。

一切似乎都工作正常，除非我生成一个带有空格的属性值，例如：

```
item.Name = "Organisation Structure"; 
```

然后，当我尝试在动态属性中呈现此值时，Razor 认为空格后面的文本是另一个完全不同的属性。

```
 <a href="@item.Url" @(!item.HasSubItems ? "data-tab-title=" + item.Name : "")></a> 
```

错误地呈现为：

```
<a href="/index" data-tab-title="Organisation" structure=""></a> 
```

而不是这样：

```
<a href="/index" data-tab-title="Organisation structure"></a> 
```

我什至尝试过`Html.Encode(item.Name)`如下使用：

```
<a href="@item.Url" @(!item.HasSubItems ? "data-tab-title=" + Html.Encode(item.Name) : "")></a> 
```

请，这个问题的任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:35:02.390

我通过简单地解决了这个问题`String.Replace("","&nbsp")`

```
<a @(!item.HasSubItems ? "data-tab-title=" + item.Name.Replace(" ","&nbsp") : "") href="@item.Url" ></a> 
```

这很好地解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T11:06:00.163

你可以试试：

```
@{
  var dynamicLink = string.Format("<a href='{0}' {1}></a>", item.Url, (!item.HasSubItems)? "data-tab-title='" + item.Name +"'" : "");
 }

@Html.Raw(dynamicLink) 
```

# http - 使用 HTTP 流水线有什么缺点？

> ID：14810890
> 
> 赞同：53
> 
> 时间：2013-02-11T11:01:18.790
> 
> 标签：http, http-pipelining

[WWDC 2012 session 706 - Networking Best Practices](https://developer.apple.com/videos/wwdc/2012/?id=706)解释了[HTTP Pipelining](http://en.wikipedia.org/wiki/HTTP_pipelining)。

*   默认情况下，它在 iOS 上[禁用](https://developer.apple.com/documentation/foundation/nsmutableurlrequest/1412705-httpshouldusepipelining)
*   在谈话中，它把它描述为一个巨大的性能胜利。

为什么您不想使用它？

![流水线](../Images/5312cfe79a50641a4a8223d9cc9e813c.png)

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-02-11T13:32:17.800

### 实现错误

为了使流水线工作，响应必须按照请求的顺序返回。一个简单的服务器实现可能只是在计算出响应后立即发送响应。如果并行发送多个请求，并且第一个请求需要更长的时间来处理（例如处理更大的图像），那么响应将是无序的。

这是客户端的问题，因为 HTTP 是无状态协议，客户端无法将请求与响应匹配。它取决于响应返回的顺序。

> [服务器必须以与接收请求相同的顺序发送对这些请求的响应。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html)

*   Safari 显然至少对图像使用了 HTTP 管道。 [这会导致图像被交换的问题](http://tech.vg.no/2011/12/14/safari-on-ios-5-randomly-switches-images/)。
*   [AFNetworking](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/UIImageView+AFNetworking.m)曾经使用流水线，但在[报告问题](https://github.com/AFNetworking/AFNetworking/issues/528)后被撤消。
*   所有主要浏览器（Opera 除外）都禁用或未实现 HTTP 管道。

### 性能问题

即使服务器确实支持流水线，性能问题也可能出现，因为所有后续请求都必须等待第一个请求完成（线头阻塞）。

*   [本文](https://devcentral.f5.com/blogs/us/http-pipelining-a-security-risk-without-real-performance-benefits)讨论了某些情况下的性能*损失*和潜在的拒绝服务攻击。

*   [这篇文章](http://www.guypo.com/technical/http-pipelining-not-so-fast-nor-slow/)还表明流水线并不是一个巨大的胜利。

*   [WWDC 2015 - Networking with NSURLSession 很好地](https://developer.apple.com/videos/wwdc/2015/?id=711)解释了线头阻塞。（解决方案是切换到支持优先级的 HTTP 2）

[![线头阻塞](../Images/1afad068c2b2a813bc7063fd0463f70b.png)](https://i.stack.imgur.com/sdCNX.png)

所以总而言之，HTTP流水线的问题是：

*   一些服务器和[大多数代理](https://en.wikipedia.org/wiki/HTTP_pipelining#Implementation_in_web_proxies)不支持它。（可能是出于安全/可靠性/或性能问题）
*   一些服务器不正确地支持它，这可能导致客户端错误。
*   这不一定是性能上的胜利。
*   易受线头阻塞

# javascript - 在图表上显示最后一个 Y 轴值

> ID：14810891
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:01:21.147
> 
> 标签：javascript, highcharts

我有一个带有日期时间 X 轴的样条图。默认情况下，我想在图表上显示最新/最后的 Y 轴值。

我所有的值目前都设置为在悬停时显示在工具提示中，我不知道如何实现这一点。这是一个每日统计图表，每天都会更新，所以如果用户可以快速看到 Y 轴上的最新值，那就太好了。

任何提示或解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:28:54.053

好的，所以我已经设法使用 dataLabels 属性及其格式化程序来做到这一点。

重要的部分是 dataLabels 选项。您首先必须将其设置为启用，然后制作一个格式化程序以仅在它是系列的最后一个点时返回点值。标签的 x 和 y 值也必须根据您的需要进行编辑（取决于图表容器的宽度/高度等）。在示例中，我只是试图使其可读。

这是片段：

```
var chart = new Highcharts.Chart({

chart: {
    renderTo: 'container'
},

xAxis: {
    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
},

plotOptions: {
    series: {
       dataLabels : {
                enabled : true,
                align : 'left',
                x : 3,
                y : 9,
                formatter : function() {
                    if (this.point.x == this.series.data[this.series.data.length - 1].x) {
                        return this.y;
                    } else {
                        return null;
                    }
                }
            }
    }
},

series: [{
    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
}, {
    data: [106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5]
}]

}); 
```

我也做了这个解决方案的小提琴：http: [//jsfiddle.net/tzEdX/](http://jsfiddle.net/tzEdX/)

# javascript - 如何在单独的 Ext 网格中显示关联模型？

> ID：14810893
> 
> 赞同：0
> 
> 时间：2013-02-11T11:01:25.833
> 
> 标签：javascript, extjs, grid, extjs4

我有两个关联的模型，用户和订单。一个用户有很多订单。

```
Ext.define("User", {
    extend: 'Ext.data.Model',
    fields: [
        'id', 'name'
    ],

    hasMany: {model: 'Order', name: 'orders'},

    proxy: {
        type: 'ajax',
        url : 'users.json',
        reader: {
            type: 'json',
            root: 'users'
        }
    }
});

Ext.define("Order", {
    extend: 'Ext.data.Model',
    fields: [
        'id', 'total'
    ],

    belongsTo: 'User'
}); 
```

我想在一个网格面板中显示所有用户，并在另一个网格中显示所有订单。我知道如何在网格中显示所有用户，我只是用用户模型定义了一个商店。但是对于如何在单独的网格中显示所有订单我有点迷茫。我必须定义一个单独的商店吗？我使用什么代理？有人有见识吗？基本上，我只需要概念上的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:05:09.353

我相信您所要求的是一个相当常见的用例。不幸的是，ExtJs 还不能开箱即用地处理这个问题，就像当前每个网格都绑定到一个商店一样，但是您的订单商店是在每次您通过其用户关联访问它时动态创建的。

好消息是您有多种方法可以实现这一目标。我能想到的最好的方法是，每次用户点击用户行时，您都会得到您的订单商店 ( `user.orders()`)。然后，您可以使用这个新商店[重新配置您的网格。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:13:13.787

通常每个 Grid 都需要自己的 Store。显示所有订单的方式与显示所有用户的方式相同，只需更改商店 ID 就可以了。

# android - Android Dropbox api 需要重新认证

> ID：14810896
> 
> 赞同：2
> 
> 时间：2013-02-11T11:01:34.040
> 
> 标签：android, authentication, dropbox

在我的应用程序中，我使用 dropbox api 来保存一些文件，没关系。身份验证后，我关闭应用程序并重新启动应用程序。每次我打开应用程序时都需要重新验证。我希望应用程序记住我的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T23:54:34.050

[Dropbox 教程](https://www.dropbox.com/developers/core/start/android#authenticating)建议将身份验证令牌存储为 SharedPreferences，以便您稍后恢复它。

您可以在位于 的 Dropbox SDK 中看到一个示例应用程序`\dropbox-android-sdk-1.6\examples\DBRoulette`。

在活动的`onCreate()`方法中检查是否存储了首选项，如果它是调用身份验证窗口的即时使用`session.setOAuth2AccessToken(RESTORED_TOKEN);`

执行此操作的示例代码：

```
public void onCreate() {
    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
    mDBApi = new DropboxAPI<AndroidAuthSession>(session);

    String token = getTokenFromPreferences();
    if (token != null) {
        session.setOAuth2AccessToken(token);
    } else {
        mDBApi.getSession().startOAuth2Authentication(MyActivity.this);
    }
} 
```

# iphone - 如何获取ios文件夹中所有文件的名称和创建日期？

> ID：14810900
> 
> 赞同：-2
> 
> 时间：2013-02-11T11:01:42.037
> 
> 标签：iphone, ios, xcode, jailbreak

我正在使用以下代码在给定路径获取文件的创建日期，它工作正常。

```
NSDictionary* attrs = [fm attributesOfItemAtPath:@"/Users/me/Desktop/ios" error:nil];

    if (attrs != nil) {
        NSDate *date = (NSDate*)[attrs objectForKey: NSFileCreationDate];
        NSLog(@"Date Created: %@", [date description]);

    }
    else {
        NSLog(@"Not found");
    } 
```

现在我想获取路径中给定文件夹中所有文件的名称和创建日期。我该怎么做？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:20:51.803

首先从您的目录中获取所有文件的列表，然后循环直到所有文件完成

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];
for(int i=0;i<[dirContents count];i++)
{
NSDictionary* attrs = [fm attributesOfItemAtPath:[dirContents objectAtIndex:i] error:nil];

    if (attrs != nil) {
        NSDate *date = (NSDate*)[attrs objectForKey: NSFileCreationDate];
        NSLog(@"Date Created: %@", [date description]);

    }
    else {
        NSLog(@"Not found");
    }
} 
```

# cuda - 实现 FDTD 方程时的内存合并

> ID：14810904
> 
> 赞同：1
> 
> 时间：2013-02-11T11:01:43.130
> 
> 标签：cuda

我试图在 GPU 上实现 FDTD 方程。我最初实现了使用全局内存的内核。内存合并不是那么好。因此，我实现了另一个使用共享内存来加载值的内核。我正在研究`1024x1024`.

代码如下

```
__global__ void update_Hx(float *Hx, float *Ez, float *coef1, float* coef2){
    int x = threadIdx.x + blockIdx.x * blockDim.x;
    int y = threadIdx.y + blockIdx.y * blockDim.y;
    int offset = x + y * blockDim.x * gridDim.x;
    __shared__ float  Ez_shared[BLOCKSIZE_HX][BLOCKSIZE_HY + 1];
    /*int top = offset + x_index_dim;*/
    if(threadIdx.y == (blockDim.y - 1)){
        Ez_shared[threadIdx.x][threadIdx.y] = Ez[offset];
        Ez_shared[threadIdx.x][threadIdx.y + 1] = Ez[offset + x_index_dim];
   }
    else{
        Ez_shared[threadIdx.x][threadIdx.y] = Ez[offset];
    }
} 
```

常数`BLOCKSIZE_HX`=`16`和`BLOCKSIZE_HY`= `16`。

当我运行视觉分析器时，它仍然说内存没有合并。

编辑：我使用 GT 520 显卡，cuda 计算能力为 2.1。我的全局 L2 事务/访问 =`7.5`即有`245 760`用于 `32768`执行该行的 L2 事务`Ez_shared[threadIdx.x][threadIdx.y] = Ez[offset];`

`Global memory load efficiency`是`50%`。

`Global memory load efficiency`=`100 * gld_requested_throughput/ gld_throughput`

尽管我的线程正在查看 16 个连续值，但我无法弄清楚为什么会有如此多的内存访问。有人可以指出我做错了什么吗？

编辑：感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:59:24.887

您的内存访问模式是这里的问题。您只能获得 50% 的效率（对于 L1 和 L2），因为您正在访问 16 个浮点数的连续区域，即 64 个字节，但 L1 事务大小为 128 个字节。这意味着对于请求的每 64 个字节，必须将 128 个字节加载到 L1（因此也加载到 L2）。

您也有共享内存库冲突的问题，但这目前不会对您的全局内存加载效率产生负面影响。

您可以通过多种方式解决负载效率问题。最简单的方法是将 x 维度块大小更改为 32。如果这不是一个选项，您可以更改全局内存数据布局，以便每两个连续的 blockIdx.y（[0, 1]、[2,3] 等） ) 值将映射到一个连续的内存块。如果即使这样也不是一个选项，并且您必须只加载一次全局数据，您可以使用非缓存全局内存加载来绕过 L1 - 这将有所帮助，因为 L2 使用 32 字节事务，因此您的 64 字节将在两个 L2 中加载无开销的事务。

# iphone - SQLite 文件未添加到捆绑资源中

> ID：14810908
> 
> 赞同：3
> 
> 时间：2013-02-11T11:01:50.277
> 
> 标签：iphone, xcode, bundle

我有一个文件`event_setup.sqlite`放在我的应用程序中并复制到`Copy Bundle Resources`构建阶段中的部分。

当将此文件从资源复制到文档目录时，我的应用程序说找不到该文件。我正在使用以下代码从资源中复制文件并告诉我该文件不存在：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    [self checkAndCreateDatabase: @"event_setup.sqlite"];
    return YES;
}

-(void)checkAndCreateDatabase:(NSString *)name{
    /*----Get the path to the Database----*/
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentsDir stringByAppendingPathComponent:name];

    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];

    success = [fileManager fileExistsAtPath:databasePath];

    if(success){
        NSLog(@"Database already exists");
        return;
    }
    else{
        NSLog(@"Database does not exist");
        NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:name];

        bool test = [fileManager fileExistsAtPath:databasePathFromApp];
        if(test){
            NSLog(@"file does exist in resources: %@", databasePathFromApp);
        }
        else{
            NSLog(@"file does not exist in resources: %@", databasePathFromApp);
        }

        [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
    }
} 
```

当我运行此代码时，我在日志中得到以下信息：

```
file does not exist in resources: /Users/samrowley/Library/Application Support/iPhone Simulator/6.1/Applications/583D4293-3AD5-45FB-B502-9919F51FDB7B/Test.app/event_setup.sqlite 
```

我试过清理应用程序，重新启动 Xcode，删除文件并将其重新复制到 Xcode 中，但似乎没有任何效果。

**编辑：**

终端命令的输出：

```
-rw-r--r--   1 samrowley  staff    2797 11 Feb 10:51 divider.png
-rw-r--r--   1 samrowley  staff    2803 11 Feb 10:51 divider@2x.png
drwxr-xr-x   3 samrowley  staff     102 11 Feb 10:51 en.lproj
-rw-r--r--   1 samrowley  staff    2937 11 Feb 10:51 header.png
-rw-r--r--   1 samrowley  staff    3205 11 Feb 10:51 header@2x.png 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:40:11.010

这个问题的答案是文件没有正确添加到目标中。要将其添加到 Target，您需要进入 File Inspector，在 Target Inspector 下，必须检查该文件的应用名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-07T14:11:36.467

很高兴我找到了@SamRowley 的答案，因为这让我烦恼了一段时间。在我创建的所有其他应用程序中，sqlite 数据库都毫无问题地出现在 Application Bundle 中，所以这次我一定以不同的方式添加了它。我包含了这张 Xcode 7.3.1 的图片，因为名称似乎略有变化。您需要`Target Membership`按此图所示进行检查，否则文件将不会被复制到应用程序包中。

[![在此处输入图像描述](../Images/5739d613df7976121554bd675c8fcee8.png)](https://i.stack.imgur.com/Xa0p1.png)

# c#-4.0 - C#中dynamic和T的实际区别是什么

> ID：14810914
> 
> 赞同：6
> 
> 时间：2013-02-11T11:02:21.340
> 
> 标签：c#-4.0, generics, dynamic

我阅读了`dynamic`C# 2010 中的 Type。（相应的[msdn](http://msdn.microsoft.com/en-us/library/vstudio/dd264736.aspx)条目）

我对开发通用函数之间`T`的实际区别感到困惑。`dynamic`我当前的测试没有显示使用`dynamic`方法的新方法，这是不可能的`T`。此外，似乎动态在运行时需要更多时间来完成相同的任务。

一些示例代码可以说明我的观点：

```
// Sample Object
public class SampleObj
{
    public string Test { get; set; }
} 
```

我的测试方法（*也测量速度*）：

```
static void Main(string[] args)
{
    var sampleObj1 = new SampleObj { Test = "Test1" };
    var sampleObj2 = new SampleObj { Test = "Test2" };

    Stopwatch c1 = Stopwatch.StartNew();
    bool res1 = CompareObjectsT<SampleObj>(sampleObj1, sampleObj2);
    c1.Stop();
    Console.WriteLine("Comparison T: {0} time: {1} ms", res1, c1.ElapsedMilliseconds);

    Stopwatch c2 = Stopwatch.StartNew();
    bool res2 = CompareObjectsDyna(sampleObj1, sampleObj2);
    Console.WriteLine("Comparison dynamic: {0} time: {1} ms", res2, c2.ElapsedMilliseconds);
    c2.Stop();

    var instance = new X<SampleObj>();

    Console.ReadLine();
} 
```

结果是：

```
Comparison T: False time: 6 ms
Comparison dynamic: False time: 3969 ms 
```

与 T 比较相比，动态函数需要**更多时间。**

反编译我的测试应用程序揭示了反射的大量使用，这可能会导致大量时间：

```
private static bool CompareObjectsDyna([Dynamic] object source1, [Dynamic] object source2)
{
    if (<CompareObjectsDyna>o__SiteContainer2.<>p__Site3 == null)
    {
        <CompareObjectsDyna>o__SiteContainer2.<>p__Site3 = CallSite<Func<CallSite, object, bool>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(bool), typeof(Program)));
    }
    if (<CompareObjectsDyna>o__SiteContainer2.<>p__Site4 == null)
    {
        <CompareObjectsDyna>o__SiteContainer2.<>p__Site4 = CallSite<Func<CallSite, Type, object, object, object>>.Create(Binder.InvokeMember(CSharpBinderFlags.None, "Equals", null, typeof(Program), new CSharpArgumentInfo[] { CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.IsStaticType | CSharpArgumentInfoFlags.UseCompileTimeType, null), CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null), CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null) }));
    }
    return <CompareObjectsDyna>o__SiteContainer2.<>p__Site3.Target(<CompareObjectsDyna>o__SiteContainer2.<>p__Site3, <CompareObjectsDyna>o__SiteContainer2.<>p__Site4.Target(<CompareObjectsDyna>o__SiteContainer2.<>p__Site4, typeof(object), source1, source2));
} 
```

我考虑过[这篇文章](https://stackoverflow.com/questions/961581/whats-the-difference-between-dynamicc-4-and-var)，但这并没有回答我的问题。

有人可以告诉我，在什么情况下动态比 T 更有效？（*希望有一个小的实用样本*）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T11:10:34.447

简短的回答是泛型类型 T 必须在编译时知道，但动态是在运行时推断的。

# r - 如何使用R中的矩阵计算时间

> ID：14810918
> 
> 赞同：1
> 
> 时间：2013-02-11T11:02:35.990
> 
> 标签：r, time, matrix

我有一个像下面这样的矩阵（第一行是:)：

```
 method       start         i2         i3         i4         i5         i7        
1    "m1"   "17:19:02" "17:19:10" "17:19:18" "17:19:26" "17:19:36" "17:19:47" 
```

因此，在每一行中，我在*每个*间隔中都有`method name`然后是`start time`然后是。我需要计算每个的时间量。我想我需要将格式更改为时间，然后做减号，但我不知道该怎么做。`end time` *`i(x)``i(x)``(start time - i(x) time)`*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:12:01.407

```
#some data
df <- read.table(text='method       start         i2         i3         i4         i5         i7        
1    "m1"   "17:19:02" "17:19:10" "17:19:18" "17:19:26" "17:19:36" "17:19:47"
2    "m2"   "17:19:05" "17:19:10" "17:19:18" "17:19:26" "17:19:36" "17:19:47"',stringsAsFactors=FALSE)

m <- as.matrix(df)

#transform matrix to data.frame
df <- as.data.frame(m,stringsAsFactors=FALSE)

#melt to long format
library(reshape2)
df <- melt(df,id.vars="method")
#transform to date-time
df$value <- as.POSIXct(df$value,"%H:%M:%S",tz="GMT")

#calculate time differences
library(plyr)
ddply(df,.(method),transform,timediff = value-value[variable=="start"])

   method variable               value timediff
1      m1    start 2013-02-11 17:19:02   0 secs
2      m1       i2 2013-02-11 17:19:10   8 secs
3      m1       i3 2013-02-11 17:19:18  16 secs
4      m1       i4 2013-02-11 17:19:26  24 secs
5      m1       i5 2013-02-11 17:19:36  34 secs
6      m1       i7 2013-02-11 17:19:47  45 secs
7      m2    start 2013-02-11 17:19:05   0 secs
8      m2       i2 2013-02-11 17:19:10   5 secs
9      m2       i3 2013-02-11 17:19:18  13 secs
10     m2       i4 2013-02-11 17:19:26  21 secs
11     m2       i5 2013-02-11 17:19:36  31 secs
12     m2       i7 2013-02-11 17:19:47  42 secs 
```*

# azure-devops - 如何更改 TFS 发件人 ID？

> ID：14810919
> 
> 赞同：1
> 
> 时间：2013-02-11T11:02:38.747
> 
> 标签：azure-devops, tfs-alerts

我在 visualstudio.com 使用 TFS 托管服务

我已成功为我的帐户设置警报。

我从以下 ID 收到这些警报电子邮件：admin@visualstudio.com

是否可以更改它以反映我们的公司名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T02:23:16.970

2013 年 12 月 11 日左右推出的 Visual Studio Online 更新更改了警报电子邮件的“发件人”。他们现在看起来好像来自最有逻辑的人，他们的 Visual Studio Online 电子邮件地址。

例如，如果 Jane Joe 更改了会导致警报的内容，则警报现在来自 Jane Joe 的 Microsoft 帐户电子邮件地址，而不是通用 admin@visualstudio.com（或其他）帐户。

这不是微软第一次更改这些电子邮件中的发件人信息，因此不能保证它们会保持这种状态，但目前它是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:16:50.390

在 TFS 支持论坛上回复的当前日期似乎是不可能的：

[更改发件人电子邮件地址](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/94fa425e-8fa8-4d93-a834-5547d2e4f543)

# android - 安卓三星计算器

> ID：14810922
> 
> 赞同：2
> 
> 时间：2013-02-11T11:02:49.657
> 
> 标签：android, calculator

当用户单击一个按钮时，它会启动 Android 计算器。问题是我想像这张[图片](https://www.google.es/search?hl=es&q=samsung%20popup%20calculator&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42080656,d.Yms&biw=989&bih=613&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&authuser=0&ei=x80YUZXMCMTVtQbN2ICoBQ#imgrc=uRBHoGVurAw20M%3a;paDPIGsPXbxdMM;http%253A%252F%252Fwww.dvice.com%252Fsites%252Fdvice%252Ffiles%252Fstyles%252Fmedia_gallery_image%252Fpublic%252Fimages%252Fsamsung-galaxy-note-10-1-dvice-13.jpg;http%253A%252F%252Fwww.dvice.com%252Farchives%252F2012%252F08%252Fsamsung-galaxy-8.php;710;473)一样启动小版本的计算器：

当我尝试使用以下代码时，我能够启动计算器的大版本：

```
Intent i = new Intent(); 
                i.setClassName("com.sec.android.app.popupcalculator","com.sec.android.app.popupcalculator.Calculator"); 
             startActivity(i); 
```

有没有办法启动小版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:10:54.480

一个不会直接解决您的问题但可以避免其他一些问题的建议：

通过启动活动：“com.sec.android.app.popupcalculator.Calculator”，您将启动仅适用于某些 Android 设备的计算器。根据不同的设备，活动名称是不一样的。所以我建议你按照这里的描述找到你的计算器：

[如何在我的应用程序上为所有手机调用 android 计算器](https://stackoverflow.com/questions/13662506/how-to-call-android-calculator-on-my-app-for-all-phones)

在小屏幕上启动计算器时，您可以使用自定义对话框： http: [//developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)或在小窗口中启动您的活动：请参阅[Android-Activity 不填满父屏幕](https://stackoverflow.com/questions/1903590/android-activity-that-does-not-fill-the-parent-screen)。

# java - Java查找字符串字符是否在给定范围内

> ID：14810926
> 
> 赞同：1
> 
> 时间：2013-02-11T11:03:10.183
> 
> 标签：java, string, unicode, encoding, utf-8

我是 java 和编码的新手，因此这个问题。

我基本上有一个文本文件，其中包含以十六进制值表示的一组有效字符。示例：0x2000-0x4002,0x5002-0x5F00

现在我有另一个包含字符串的文件。示例：我正在尝试使用此文件。

我的问题是检查第二个文件的每个字符是否有效并且在上述文件描述的范围内。

所以这就是我正在做的事情：

```
public class Test
{
   //This is a function used to build the ranges.
   public void build range() {}

   //This function will test whether the string str is in given range.
   public bool check range(String str)
   {
      int codePointCount = str.codePointCount(0, str.length());
      for( in ti =0; i< codePointCount; i++)
      {
          int value = str.codePointAt(i);
          if( value >= 2000 && value <= 4002 )
             continue;
          if( value >= 5002 && value <= 5F00 )
             continue;
          return false;
      }
      return true;
   } 
} 
```

请让我知道这段代码是否正确，或者我在编码方面遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:14:53.443

我建议使用正则表达式，这就是想法

```
 boolean ok = !str.matches(".*[^\u2000-\u4002\u5002-\u5F00].*"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:22:04.437

首先是一个小修正：

```
 for (int i = 0; i < str.length(); )
  {
      int value = str.codePointAt(i);
      i += Character.charCount(value);
      if( value >= 0x2000 && value <= 0x4002 )
         continue;
      if( value >= 0x5002 && value <= 0x5F00 )
         continue;
      return false;
  } 
```

但就长度/可读性而言，@EvgeniyDororfeev 的答案是最好的。

# signal-processing - 不使用 MATLAB 在线验证 FIR 输出

> ID：14810927
> 
> 赞同：0
> 
> 时间：2013-02-11T11:03:14.387
> 
> 标签：signal-processing, fft

我需要测试我的 FIR、IIR 和 FFT 代码。我有示例代码，我需要知道输出以查看我的代码是否真的有效。我无权访问 MATLAB。请建议任何方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:22:12.147

除非您有特定的测试平台（C、Java 等），否则[Gnu Octave](http://www.gnu.org/software/octave/)是 MATLAB 的一个很好的免费替代品。

# javascript - 基于具有项目ID的数组的jQuery可拖放计算是错误的

> ID：14810938
> 
> 赞同：0
> 
> 时间：2013-02-11T11:03:41.247
> 
> 标签：javascript, jquery, drag-and-drop, draggable

我用一些测试用例做了一张图片，只是为了告诉你计算什么时候出错。在第 3 种情况下，如果我移出第 1 项而不是第 2 项，它会起作用。在尝试解决这个问题几个小时后，我开始感到有点盲目。

计算有什么问题，可能是事件吗？有没有更好的方法来做到这一点？

![在此处输入图像描述](../Images/52754f4b9c16dd0c459e871eda8d605b.png)

jsbin：http: [//jsbin.com/ejasun/1/edit](http://jsbin.com/ejasun/1/edit)

代码：

```
var price = 0, math = '', items = [], state = 'outside';
$(function() {
  function calcPrice(math) {
    var value = null;
    if(items.length === 0) {
      price = 0;
    }
    console.log("Item array: " + items);
      $.each( items, function( key, value ) {
        if(math == 'add')
          price += $(".draggable[data-item='" + value + "']").data('price');
        console.log("Total price: " + price);
        if(math == 'remove'){
          console.log("Total price " + price + " -= " + $(".draggable[data-item='" + value + "']").data('price'));
          price -= $(".draggable[data-item='" + value + "']").data('price');
        }
      });
    $("#droppable").text(price);
  }
  $(".draggable").draggable({ containment: "#container", scroll: false });
  $("#droppable").droppable({
    drop: function(e, u) {  items.push(u.draggable.data('item'));
      price = 0;
      calcPrice('add');
      u.draggable.data('state', 'inside');
    },
    out: function(e, u) {
      if(u.draggable.data('state') == 'inside') {
        u.draggable.data('state', 'outside');
        items.splice($.inArray(u.draggable.data('item'), items,1)); 
        calcPrice('remove');
      }
    }
  });
}); 
```

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div id="container">
    <div id="droppable"></div>
    <div class="draggable" data-item="2" data-price="542" data-state="outside">item: 2<br>price: 542</div>
    <div class="draggable" data-item="1" data-price="541" data-state="outside">item: 1<br>price: 541</div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:51:11.257

您的[$.inArray](http://api.jquery.com/jQuery.inArray/)函数是错误的，并且[拼接](http://www.w3schools.com/jsref/jsref_splice.asp)也是如此。你可以这样做：

```
var price = 0, math = '', items = [], state = 'outside';
 $(function() {
  function calcPrice(math) {
   var value = null;

   price = 0;

console.log("Item array: " + items);
  $.each( items, function( key, value ) {
    price+= $(".draggable[data-item='" + value + "']").data('price');

  });

$("#droppable").html(price);
}

 $(".draggable").draggable({ containment: "#container", scroll: false });
 $("#droppable").droppable({
   drop: function(e, u) {  
     items.push(u.draggable.data('item'));
     price = 0;
     calcPrice('add');
     u.draggable.data('state', 'inside');
  },
   out: function(e, u) {
     if(u.draggable.data('state') == 'inside') {
       u.draggable.data('state', 'outside');
       var myIndex = $.inArray(u.draggable.data('item'), items);
       items.splice(myIndex, 1);
       price = $("#droppable").text();
       calcPrice('remove');
     }
   }
 });
 }); 
```

如果您只想在放入或拖出某些东西时添加和删除价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:02:46.363

您的代码中有两个问题：

**问题 1：** 在`drop:`您没有检查该元素是否已存在于列表中。您需要为每个元素设置一个 ID，并在放置时查看是否`items[]`有一个具有相同 ID 的元素。在您的代码中，如果我多次从下拉框中删除相同的元素，则每次都会添加价格。

**问题2：** 这是您描述的问题。澄清这里发生了什么。您的代码不会删除相反的值。它删除的价格等于数组中剩余的价格（在下拉框中）。所以你的逻辑`out:`需要修改。

所以你需要重新思考你的`drop:`逻辑`out:`

# jquery - jQuery图像每个循环问题

> ID：14810939
> 
> 赞同：0
> 
> 时间：2013-02-11T11:03:41.247
> 
> 标签：jquery

我目前正在循环浏览一组图像以检查每个图像的宽度。如果图像宽度小于图像高度，我想将“A 类”添加到该特定图像，否则我想将“B 类”添加到该特定图像。

我可以让这个工作，但它是非常喜怒无常的。它通常可以工作，但有时它会在图像中添加“B 类”，而应该添加“A 类”。我也尝试使用布尔值来确保函数的每个部分在应该触发时触发，但我仍然得到相同的结果。任何想法可能是什么问题？

下面的代码：

```
loadContent = function() {
        //set up ajax
        ajaxLoader.ajaxStart(function() {
            $(this).fadeIn(200);
        }).ajaxStop(function() {
            $(this).fadeOut(200);

        //load the content
        fixedWrap.load(postLink, function() {
            var loopingImages,
                slideImage = $('.ddbSlide img'),
                slideImageFirst = $('.ddbSlide img:first');

                //start the image loop
                slideImage.each(function() {
                var imgWidth = $(this).width(),
                    imgHeight = $(this).height();
                loopingImages = true;
                //
                if (imgWidth <= imgHeight) {
                    $(this).addClass('ddbImagePortrait');
                    $(this).css({ left: '55%' });
                    loopingImages = false;
                } else {
                    $(this).addClass('ddbImage');
                    $(this).css({ left: '34%' });
                    loopingImages = false;
                }
            });

            if (loopingImages == false) {
                var checkingClass;
                if (slideImageFirst.hasClass('ddbImagePortrait')) {
                    $('.articleTextWrap').css({ left: '20%' });
                    checkingClass = false;
                } else {
                    $('.articleTextWrap').css({ left: '5%' });
                    checkingClass = false;
                }
                if (checkingClass == false) {
                addSlider();
                }
            }

            return false;
        })
    }; //END loadContent function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:08:12.737

加载图像后检查宽度和高度：

```
slideImage.each(function() {

    $(this).load(function(){
        //image successfully loaded, do stuff here
        console.log($(this).height());
    }).error(function(){
        //something went wrong
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:19:57.617

您的代码有 2 个问题

首先`loopingImages`总是`false`尝试这个，

```
loopingImages = true;
//
if (imgWidth <= imgHeight) {
    $(this).addClass('ddbImagePortrait');
    $(this).css({ left: '55%','position':'relative' });
} else {
    $(this).addClass('ddbImage');
    $(this).css({ left: '34%' ,'position':'relative'});
    loopingImages = false;
} 
```

第二次`checkingClass`总是`false`为了这个尝试，

```
var checkingClass;
if (slideImageFirst.hasClass('ddbImagePortrait')) {
    $('.articleTextWrap').css({ left: '20%','position':'relative' });
    checkingClass = true;
} else {
    $('.articleTextWrap').css({ left: '5%' ,'position':'relative'});
    checkingClass = false;
} 
```

# java - 使用带有大文件的自定义 RecordReader 时出现堆错误

> ID：14810940
> 
> 赞同：0
> 
> 时间：2013-02-11T11:03:48.823
> 
> 标签：java, hadoop, heap-memory

我编写了一个自定义文件阅读器来不拆分我的输入文件，因为它们是大型 gzip 文件，我希望我的第一个映射器工作只是简单地对它们进行压缩。我按照“Hadoop The Definitive Guide”中的示例进行操作，但在尝试读取 BytesWritable 时出现堆错误。我相信这是因为字节数组的大小为 85713669，但我不确定如何克服这个问题。

这是代码：

```
public class WholeFileRecordReader extends RecordReader<NullWritable, BytesWritable> {

private FileSplit fileSplit;
private Configuration conf;
private BytesWritable value = new BytesWritable();
private boolean processed = false;

@Override
public void close() throws IOException {
    // do nothing
}

@Override
public NullWritable getCurrentKey() throws IOException,
        InterruptedException {
    return NullWritable.get();
}

@Override
public BytesWritable getCurrentValue() throws IOException,
        InterruptedException {
    return value;
}

@Override
public float getProgress() throws IOException, InterruptedException {
    return processed ? 1.0f : 0.0f;
}

@Override
public void initialize(InputSplit split, TaskAttemptContext context)
        throws IOException, InterruptedException {
    this.fileSplit = (FileSplit) split;
    this.conf = context.getConfiguration();
}

@Override
public boolean nextKeyValue() throws IOException, InterruptedException {
    if (!processed) {
        byte[] contents = new byte[(int) fileSplit.getLength()];
        Path file = fileSplit.getPath();
        FileSystem fs = file.getFileSystem(conf);
        FSDataInputStream in = null;
        try {
            in = fs.open(file);
            IOUtils.readFully(in, contents, 0, contents.length);
            value.set(contents, 0, contents.length);
        } finally {
            IOUtils.closeStream(in);
        }
        processed = true;
        return true;
    }
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:19:45.367

一般来说，您不能将整个文件加载到 Java VM 的内存中。您应该找到一些流式解决方案来处理大文件 - 逐块读取数据并将结果保存在内存中而不修复整个数据集
这个特定任务 - 解压缩可能不适合 MR，因为没有将数据逻辑划分为记录。
另请注意，hadoop 会自动处理 gzip - 您的输入流将已经解压缩。

# machine-learning - 从单个单词中提取特征

> ID：14810944
> 
> 赞同：5
> 
> 时间：2013-02-11T11:03:56.717
> 
> 标签：machine-learning, nlp, feature-extraction

通常人们想通过使用词袋方法从文本中获取特征，计算单词并计算不同的度量，例如 tf-idf 值，如下所示： [How to include words as numeric feature in classification](https://stackoverflow.com/questions/4207057/how-to-include-words-as-numerical-feature-in-classification)

但我的问题不同，我想从一个单词中提取一个特征向量。例如，我想知道土豆和炸薯条在向量空间中彼此靠近，因为它们都是由土豆制成的。我想知道牛奶和奶油也很接近，热和温暖，石头和坚硬等等。

这个问题叫什么？我可以通过查看大量文档来了解单词的相似性和特征吗？

我不会用英文实现，所以我不能使用数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T11:52:17.127

嗯，文本数据的特征提取（例如 tf-idf）是基于*统计*的。另一方面，您正在寻找意义（*语义*）。因此，没有像 tf-idef 这样的方法适合您。

在 NLP 中存在 3 个基本级别：

1.  形态分析
2.  句法分析
3.  语义分析

（更高的数字代表更大的问题:)）。形态学以大多数语言而闻名。句法分析是一个更大的问题（它处理诸如什么是动词、某个句子中的名词……）。语义分析面临最大的挑战，因为它处理的意义很难在机器中表示，有很多例外并且是特定于语言的。

据我了解，您想知道单词之间的一些关系，这可以通过所谓的**依赖树库**（或只是**树库**）来完成：[http](http://en.wikipedia.org/wiki/Treebank) ://en.wikipedia.org/wiki/Treebank 。它是一个句子的数据库/图形，其中一个单词可以被认为是一个节点，关系是一个弧。捷克语有很好的树库，英语也会有一些，但对于许多“覆盖较少”的语言来说，找到一个可能是个问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:24:12.080

用户1506145，

这是我过去使用的一个简单想法。收集大量类似维基百科文章的短文档。对每个文档进行字数统计。对于第 i 个文档和第 j 个单词，让

I = 文件数，

J = 字数，

x_ij = 第 j 个单词在第 i 个文档中出现的次数，并且

y_ij = ln( 1+ x_ij)。

令 [U, D, V] = svd(Y) 为 Y 的奇异值分解。所以 Y = U*D*transpose(V))，U 为 IxI，D 为对角线 IxJ，V 为 JxJ。

您可以使用 (V_1j, V_2j, V_3j, V_4j) 作为 R^4 中第 j 个单词的特征向量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-26T10:32:20.207

我很惊讶以前的答案没有提到词嵌入。词嵌入算法可以为给定数据集中的每个词生成词向量。这些算法可以从上下文中推断词向量。例如，通过查看以下句子的上下文，我们可以说“聪明”和“聪明”在某种程度上是相关的。因为上下文几乎相同。

`He is a clever guy He is a smart guy`

可以构造一个共现矩阵来做到这一点。但是，效率太低了。为此目的设计的一种著名技术称为 Word2Vec。可以从以下论文中研究。
[https://arxiv.org/pdf/1411.2738.pdf](https://arxiv.org/pdf/1411.2738.pdf)
[https://arxiv.org/pdf/1402.3722.pdf](https://arxiv.org/pdf/1402.3722.pdf)

我一直用它来写瑞典语。它在检测相似词方面非常有效，而且完全无监督。

可以在 gensim 和 tensorflow 中找到一个包。

# maven - Netbeans jUnit 4 - 项目类路径中缺少 Java EE API

> ID：14810946
> 
> 赞同：1
> 
> 时间：2013-02-11T11:04:03.427
> 
> 标签：maven, testing, netbeans, junit, junit4

我有明确的 Maven 网络应用程序项目。我将 jUnit 添加到 pom.xml 中。

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>

    <dependency>
      <!-- jsoup HTML parser library @ http://jsoup.org/ -->
      <groupId>org.jsoup</groupId>
      <artifactId>jsoup</artifactId>
      <version>1.7.2</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>         
    </dependency>  

</dependencies> 
```

我的应用程序中有一个非常简单的 Servlet。我想为此 servlet 生成 jUnit 4 测试。因此，我单击 Servlet 包 > 工具 > 创建测试。在此之后，我得到了带有方法的测试类。

```
public void testProcessRequest() throws Exception {
    System.out.println("processRequest");
    HttpServletRequest request = null;
    HttpServletResponse response = null;
    MyServlet instance = new MyServlet(); // This is the problem 
    instance.processRequest(request, response);
    // TODO review the generated test code and remove the default call to fail.
    //fail("The test case is a prototype.");

} 
```

MyServlet 带有下划线，错误是：“项目类路径中缺少 Java EE API”。

我尝试在 pom 中修改依赖项的范围，但问题仍然存在。

# javascript - 为什么这个分组运算符 + 函数立即被调用

> ID：14810951
> 
> 赞同：10
> 
> 时间：2013-02-11T11:04:18.487
> 
> 标签：javascript, iife

我正在研究立即调用函数表达式 (IIFE) 的行为，在此过程中我遇到了以下情况。

```
(function () {
    document.write("bar");
})

(function () {
    document.write("foo");
}()); 
```

我认为第一个只是一个分组运算符，里面有一个函数表达式，没有调用它。第二个是分组运算符以及函数表达式，但现在调用该函数。

我觉得奇怪的是两者都被调用了，这是为什么呢？

```
(function () {
    document.write("bar");
})

var x = 1;

(function () {
    document.write("foo");
}()); 
```

当我通过在两者之间插入一个变量声明来打破这两者时，它只是写了 foo. 这是我所期望的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T11:06:50.787

因为您忘记了第一个函数表达式后的分号：

```
(function () {
    document.write("bar");
}); 
```

否则，第二个“分组运算符”被解释为函数调用。所以这：

```
(function a() {
    ...
})

(function b() {
    ...
}()); 
```

基本上是一样的：

```
function b() {
    ...
}

(function a() {
    ...
})(b()); 
```

重新排序使它更容易看到。请记住，空白字符在 JavaScript 中没有任何意义，并且会被忽略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T11:10:40.097

正如 Felix Kling 正确指出的那样：缺少的分号导致第二个 IIFE 周围的括号被解释为*函数调用*，而不仅仅是对函数表达式进行分组。没有换行符会变得更加清晰：

```
(function () {
    document.write("bar");
})(function () {
    document.write("foo");
}()); 
```

或进行一些调整：

```
(function () {
    document.write("bar");
})(
    function () {
        document.write("foo");
    }()
); 
```

第一个函数表达式被调用，第二个函数表达式的结果作为它的第一个也是唯一的参数。您还应该注意`foobar`是写而不是`barfoo`，因为第二个函数首先被调用，其结果作为参数传递给第一个函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T11:10:54.467

你也可以这样写一个 IIFE：`(function () {})()`

通过省略分号，您的第一个代码片段实际上调用了第一个函数，第二个 IIFE 作为第一个的参数传递。

```
 executing as parameter for the first IIFE
                                               \/ 
(function () {document.write("bar");})( (function () {document.write("foo");}());) 
```

首先打印`foo`，然后`bar`不同于：

```
(function () {
    document.write("bar");
})();

(function () {
    document.write("foo");
}()); 
```

打印`barfoo`或

```
(function () {
    document.write("bar");
});

(function () {
    document.write("foo");
}()); 
```

其中第一个现在仅被视为分组运算符。

# layout - 果园放置文件不隐藏标题部分

> ID：14810955
> 
> 赞同：2
> 
> 时间：2013-02-11T11:05:01.727
> 
> 标签：layout, orchardcms, placement

在果园中，我有一个placement.info 文件，当我查看作者时应该隐藏标题部分：

```
<Match ContentType="Author">
    <Place Parts_Title="-" />
    <Place Parts_Breadcrumbs="-" />
</Match> 
```

作者是我创建的自定义内容类型，面包屑部分是自定义部分。

面包屑部分被隐藏，但仍显示标题。如果我使用形状跟踪检查它肯定是我想要删除的 Parts_Title，但我的放置文件的内容似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-04T08:10:15.850

[这里有类似的问题。](https://stackoverflow.com/questions/23449507/orchard-1-8-unable-to-hide-metadata-published-date-from-custom-part-using-plac)

这是因为您的自定义部件的 Placement.info 是首先加载的，而 Orchard Title 部件是在覆盖它之后加载的。

为了解决这个问题，在您的自定义部件的 Module.txt 中，依赖**Title**。这将强制在您的自定义部件之前先加载 Orchard Title。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T17:39:14.300

我没有完整的例子可以继续，但在我看来，这部分`Parts_Title`与果园附带的部分相冲突。
尝试将您的位置中的修饰符以及您的形状扩展为：

```
Parts_MyModule_Title 
```

这只是增加了一些清晰度，并且可以防止果园踩到自己。

# google-app-engine - 从 App Engine 上的 Google Cloud Storage 读取文件

> ID：14810956
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:02.513
> 
> 标签：google-app-engine, google-cloud-storage

我正在使用 Google App Engine 开发应用程序。我需要从我的 Google Cloud Storage 中读取 PDF 文件。这里的代码：

```
String filename = "...";
BlobstoreService blobstore = BlobstoreServiceFactory.getBlobstoreService();
BlobKey blobkey = blobstore.createGsBlobKey(filename);
blobstore.serve(blobkey, httpResponse); 
```

仅当我在存储桶中的文件上设置“公开共享”时，它才有效。如何在不设置“公开共享”的情况下读取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:43:45.740

您需要将应用的服务帐号添加到存储桶 acls。[请参阅Google 云存储先决条件](https://developers.google.com/appengine/docs/python/googlestorage/overview#Prerequisites)的第 5 节。

# ruby-on-rails - 调用具有相同类名的不同模块的控制器

> ID：14810958
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:03.780
> 
> 标签：ruby-on-rails, ruby, routes

在我的应用程序的控制器中，我有两个不同的文件夹。在文件夹中，我有两个同名的控制器，如下所示：

```
/controller/a/xyz_controller.rb    
/controller/b/xyz_controller.rb 
```

上述两个控制器都包含不同的模块名称。“ **/controller/a/xyz_controller.rb** ”的模块名称是“ ***a*** **”，“ /controller/b/xyz_controller.rb** ”的模块名称是“ ***b*** ”。

我的应用程序的名称是“ **a** ”。在 routes.rb 里面，我有这样的东西：

```
get "reports/update_notes"=>"b::xyz#function" 
```

但不知何故，它默认调用“ **a ”的“函数”。**

如何通过 routes.rb调用“ **b ”控制器的功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:32:57.147

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

```
match "reports/update_notes" => "xyz#function", :via => :get, :module => 'b' 
```

可能是最透明的，但 get 也应该以同样的方式工作。如果您希望模块名称作为模式的一部分，则需要使用路径样式而不是类样式：

```
get "reports/update_notes" => "b/xyz#function" 
```

# android - EditText onClick 不显示虚拟键盘

> ID：14810959
> 
> 赞同：5
> 
> 时间：2013-02-11T11:05:04.463
> 
> 标签：android, android-edittext, android-virtual-keyboard

如果我单击我的 EditText，则不会显示虚拟键盘。显示光标，但没有可键入的键盘。

我什至尝试过手动打开但没有用。

这是我的代码：

```
public class CreateNote extends Activity {
EditText titleEdit;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.createnote);
    titleEdit = (EditText) findViewById(R.id.titleEdit);
    titleEdit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            InputMethodManager imm = (InputMethodManager) CreateNote.this
                    .getSystemService(Service.INPUT_METHOD_SERVICE);
            imm.showSoftInput(titleEdit, 0);
        }
    });
    }
   } 
```

布局片段：

```
 <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#989898" >

    <EditText
        android:id="@+id/titleEdit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/edittextdrawale"
        android:ems="10"
        android:textColor="#fff"
        android:textColorHint="#fff" >

        <requestFocus />
    </EditText>

</FrameLayout> 
```

我的虚拟键盘玩捉迷藏的原因是什么？我在真实设备上测试，而不是在模拟器上测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T11:12:08.467

Try with this, it worked for me.

```
EditText etHorseName = (EditText) getView().findViewById(R.id.horseName);
etHorseName.clearFocus(); 
```

in `onCreate()` or where you want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T08:55:08.097

迟到的答案，但这里是如何在不添加代码的情况下解决它，只需从您的 XML 中删除它：

```
<requestFocus /> 
```

不知道为什么设置后键盘不显示...但是如果您首先松开焦点然后单击编辑文本，它确实会显示。我在 Android 2.3.6 上遇到了问题，但它在 4.1.2 上运行，所以也许这是一个早期的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:24:25.810

这只是一种默认行为，您不应该手动执行此操作，请从您的代码中删除以下部分。

```
titleEdit.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        InputMethodManager imm = (InputMethodManager) CreateNote.this
                .getSystemService(Service.INPUT_METHOD_SERVICE);
        imm.showSoftInput(titleEdit, 0);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T11:50:29.090

尝试使用以下代码隐藏和显示键盘：

```
InputMethodManager imm = (InputMethodManager) this.getSystemService(Service.INPUT_METHOD_SERVICE);
// To show keyboard
imm.showSoftInput(titleEdit, 0);
// To hide keyboard
imm.hideSoftInputFromWindow(titleEdit.getWindowToken(), 0); 
```

# android - navigator.geolocation.getCurrentPosition 在 Android 浏览器上失败

> ID：14810966
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:17.827
> 
> 标签：android, browser, geolocation, navigator

我正在尝试在 Android 浏览器上获取地理位置，但没有任何反应。我使用的是三星 Galaxy S3，但我不确定我的浏览器版本。Android 版本是 4.1.2 这是我的代码：

```
if (navigator.geolocation) {

            var timeoutVal = 10 * 1000 * 1000;
            navigator.geolocation.getCurrentPosition(
              displayPosition,
              displayError,
              { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
            );
        } 
```

这是我从该站点复制和粘贴的代码，它给了我“navigator.geolocation”，但是当涉及“getCurrentPosition”时，我的代码停止工作。移动 Chrome 工作正常，但事实并非如此。我分享了我的立场，但仍然没有任何反应。任何帮助都会得到帮助。谢谢。

谢谢大家，我找到了解决方案，经过一些 javascript 操作后，我得到了地理位置。我试图在文档准备好之前获取地理位置。它奏效了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T12:36:20.120

我知道这有点旧，但它不断出现在搜索中，所以我想我会添加一个对我有帮助的提示。

因为我想在页面加载时获得正确的位置，所以我发现我需要在页面加载后引入一个非常短的延迟。当我没有延迟时，我不会收到错误，但我也不会激活手机上的定位协议。这半秒的延迟解决了这个问题。你可以试试延迟，看看它是否能解决你的问题。

setTimeout(function() {getAutoLocation(true)},500);

我在“getAutoLocation(true)”函数中获得了位置。此 setTimeout 仅用于引入延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:44:10.817

似乎PhoneGap的地理位置有问题我有同样的问题我在Android 4.1.2上使用S3，phonegap地理定位功能不起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:50:35.197

为了获得没有错误的地理位置，您必须在使用地理位置提供的值之前使该代码块工作，因为操作是异步执行的，在这个问题中，我通过在其他 .js 文件之前加载我的地​​理位置脚本找到了解决方案。这解决了我的问题，这个问题的另一个技巧是，当您授予浏览器“始终”读取您的位置的权限时，地理位置工作更加稳定。首次加载后，您永远不会遇到地理定位错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-23T19:53:20.977

我发现一些 Android 手机（新旧）无法正常运行该功能 `getCurrentPosition`，可能是为了节省一些电池。

我使用了这个功能`watchPosition`，然后高精度 GPS 启动了。

阅读本文以了解如何正确使用参数：http: [//dev.w3.org/geo/api/spec-source.html#watch-position](http://dev.w3.org/geo/api/spec-source.html#watch-position)

就我而言，这有效：

```
{
  maximumAge: 0, timeout: 2000, enableHighAccuracy: true
} 
```

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T11:16:36.990

您是否在清单中授予 Internet 权限？

```
<manifest xlmns:android...>
 ...
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

# magento - 如何在 magento 1.7.0.1 中删除必填字段验证？

> ID：14810967
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:27.100
> 
> 标签：magento, magento-1.7

我是magento的初学者。我需要删除可配置产品中选择选项的必填字段并添加到magento的购物车页面中。在产品详细信息页面中，客户可以购买一套产品和单个产品。例如，产品A可以购买衬衫型号和产品 B 可以购买裤子型号，但产品 A 和产品 B 可以显示衬衫和裤子。所以我正在使用产品

![在此处输入图像描述](../Images/8ddb7a9a98625505621367e54840e515.png)

如何删除必填字段并添加到magento中的购物车页面？请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:28:20.733

您使用了错误的产品。始终需要可配置的产品选项。

我认为你需要考虑使用分组或捆绑的产品来做你想做的事。

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-grouped-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-grouped-product)

[http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype)

# ios - 使用 PDF 内容创建存档/.pkg 以在 Apple 托管时出现可执行文件的奇怪错误

> ID：14810971
> 
> 赞同：1
> 
> 时间：2013-02-11T11:05:35.993
> 
> 标签：ios, ios6, in-app-purchase, app-store-connect

我为我的应用程序启用了应用程序内购买并集成了这些类。购买类型是`Non-Consumable`，我将 Host Content with Apple 标记为 YES。当我想通过 Apple 托管内容时，我需要提供托管内容包。

以下是我创建包 (.pkg) 的步骤：

*   文件 -> 新建 -> 项目... -> 其他 (iOS) -> 应用内购买内容。新项目被创建。

*   将数据放入此项目，使用 .plist 文件进行必要的更改，然后选择：产品 -> 存档。

*   在这一步之后，我在验证时收到错误：

![在此处输入图像描述](../Images/039adc93fc6c0b60f8b43d871b1b7873.png)

一旦我能够使用 Test3 和 Test 4 创建包。但是在创建除演示之外的原始包时，它每次都会抛出这个错误。

这是参考网址：[Configuring and Creating App Store Hosted Content for iOS 6 In-App Purchases](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases#Archiving_the_Hosted_Content_Package)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-22T05:40:27.717

打开终端，输入“cd”，然后将包含文件的文件夹拖到终端窗口并按回车键，然后使用命令`ls -l yourfile.extension`和`chmod -x yourfile.extension`

用你的实际文件名替换 yourfile.extension

实际发生的是 mac osx 默认包含可执行文件位。通过 Chmod，您将删除它，这是 ios 托管应用程序内容所必需的。

# jakarta-ee - JavaEE EJB 和 Groovy

> ID：14810973
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:38.517
> 
> 标签：jakarta-ee, maven, groovy, ejb

我想尝试 Groovy，我想现在在一个新的 javaee 项目（没有 grails 或类似项目）中仅将它用于视图层。还有很多关于 groovy + javaee 的讨论，但我找不到与我的匹配的工作案例。

所以我有一个 maven ear 项目，模型/控制器 ejb 模块现在将保留在 java 上（我包含了 groovy 依赖项，但似乎你必须为此使用 java），而视图模块具有完整的 groovy 支持。我正在使用 Eclipse + m2e，到目前为止，一切都可以很好地集成和编译。在视图模块中，我什至可以制作一个 groovy bean，它似乎工作正常。问题是我找不到通过 @EJB 注释将 EJB bean 注入 groovy bean 的方法。由于我找不到类似设置的示例，因此这甚至是不可能的。

所以只是为了满足我的好奇心，如果有人知道我如何让我的 groovy bean 从 EJB 读取数据？它根本不需要通过上述注释，任何方式都可以。我可以为一个人创建一个网络服务，但这有点过于复杂和多余。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:12:54.377

我知道这是一个*稍微*旧的线程，但对于任何搜索的人，我都设法在 Java EE 6 项目中成功使用 Groovy。控制器和 EJB 都使用`@EJB`.

这是我的设置：

*   Eclipse 朱诺 4.2.2
*   Ubuntu 12.04
*   Groovy 2.1.3
*   JSF 2.1
*   玻璃鱼 3.1.2

最棘手的部分是需要将 Groovy 库复制到 中`glassfish/lib`，也需要使用我的 postgres jdbc 驱动程序。

我在 Eclipse 中创建了一个新的企业应用程序项目，并创建了：

*   连接器模块：接口和模型，一切都是 java，但我认为 groovy 是可行的
*   网络模块：groovy 控制器
*   ejb 模块：groovy ejbs

控制器：

```
@ManagedBean
@ViewScoped
class Controller {
    @EJB ServiceLocal service

    List list() {
        service.list()
    }
} 
```

EJB：

```
@Stateless
class Service implements ServiceLocal {

    @Override
    public List<Model> list() {
        [
            [name: "A"],
            [name: "B"],
            [name: "C"]
        ]
    } 
```

和观点：

```
<h:dataTable value="#{controller.list()}" var="e">
    <h:column>
        <f:facet name="header">Name</f:facet>
        #{e.name}
    </h:column>
</h:dataTable> 
```

它工作正常。

# c# - 父节点包含所有子节点数据的总和

> ID：14810974
> 
> 赞同：0
> 
> 时间：2013-02-11T11:05:39.747
> 
> 标签：c#, asp.net, recursion, tree

我为 Web 应用程序创建了一个动态树。我的树结构如下：

```
id     name     pid     data1     data2

1      Item1    0 

2      Item2    1       70        45

3      Item3    0   

4      Item3    1       56        48

3      Item3    3       34        48
 ........ 
```

父节点不包含 data1 和 data2 的任何值。我已经为树创建了递归列表。但现在我需要做的是将所有子节点的 data1 和 data2 的值显示为父节点中 data1 和 data2 的值。

树是多级的。如何将其子节点的值添加到每个父节点？我正在使用 C# 顺便说一句。谢谢

更新：

```
 public class MyTree
{
    public MyTree()
    {
        children = new List<MyTree>();
    }
    public int id { get; set; }
    public string data { get; set; }
    public int pid { get; set; }
    public decimal? data1 { get; set; }
    public decimal? data2 { get; set; }            
    public IList<MyTree> children { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:23:13.753

如果设置了以下成员变量/更新的属性对，则将给出显式值，如果未设置，则将给出所有子值的递归总和：

```
private decimal? _data1;
public decimal? data1
{
    get
    {
        if (_data1.HasValue)
            return _data1;
        // This needs System.Linq but can be done manually.
        return children.Sum(c => c.data1);
    }
    set { _data1 = value; }
} 
```

（同样适用于`data2`。）

它不会阻止您在具有子元素的元素上显式设置值。

# html - 限制添加到 HTML5 画布的文本长度

> ID：14810976
> 
> 赞同：1
> 
> 时间：2013-02-11T11:05:46.400
> 
> 标签：html, html5-canvas

我正在使用 HTML5 画布构建树结构引擎。每个树节点都有一个名称，该名称与数据库中的其他几个值一起读取。每个节点由一个块表示，块的大小是固定的。我的问题是块的名称通常太长而无法放入块中。在将一段文本添加到画布之前，我如何确定一段文本的长度（宽度），如果它太长，我该如何切断它？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:08:53.833

`context.measureText("some text").width;`

# javascript - Javascript - Sencha touch 2.1 - 调用 app.js 级别的函数返回“[object Object] has no method 'getLocalLoggedUserDetails'”

> ID：14810981
> 
> 赞同：2
> 
> 时间：2013-02-11T11:06:07.490
> 
> 标签：javascript, extjs, sencha-touch-2

我在`app.js`我的 sencha touch 2.1 应用程序级别编写了一个简单的全局函数。现在，根据在堆栈和其他来源中找到的线索，我所要做的就是从任何地方调用它

`TimeMobile.app.myGlobalFunction(params);`

关键是，它不起作用，我收到错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“getLocalLoggedUserDetails”

我试图改为调用该`launch()`函数并且它正在工作。这比以前更让我困惑，因为此时这不是语法问题。

我这样调用全局函数：

`var LoggedUserDetails = TimeMobile.app.getLoggedUserDetails(true);`

我的 app.js 是这样定义的：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    models: [
        'LoginResponse'
    ],
    stores: [
        'LoginStore',
        'PlannedActivityListStore',
        'RemoteUserDetailsStore',
        'LocalUserDetailsStore'
    ],
    views: [
        'LoginView'
    ],
    name: 'TimeMobile',
    controllers: [
        'ctlLogin',
        'ctlPlannedActivities'
    ],

    launch: function() {
        //this.TimeMobile =this;
        TimeMobile.app.LoggedUser ='';
        TimeMobile.app.LoggedUserPsw ='';
        TimeMobile.app.AnagId = 'CTEL';
        TimeMobile.app.CurrentDate = new Date().toISOString();
        TimeMobile.app.LoggedUserDetails = TimeMobile.model.mdlUserDetails();

        Ext.create('TimeMobile.view.LoginView', {fullscreen: true});
    },

    getLoggedUserDetails: function(enabled) {
        if (enabled)
        {
            //var store= TimeMobile.app.LocalUserDetailsStore();
            //return store.getAt(0);
            console.log('called');
        }
        else
        {
            return null;
        }
    }

}); 
```

当我`getLoadedUserDetails`使用语法调用时，`TimeMobile.app.getLoadedUserDetails(true);`我得到了前面提到的错误。 `TimeMobile.getLoadedUserDetails(true);`也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:48:56.820

Chrome 缓存阻止我的 app.js 在应用程序刷新时被下载。

我的错。

要禁用 chrome 缓存，请转到控制台，单击右下角的齿轮图标，然后在“常规”选项卡中找到“禁用缓存”复选框。

**PS** *对于那些没有说任何问题的-1ed 的人，玩得开心（在我的个人资料中，您可以找到很多问题或答案，您可以从中获得更多乐趣）。*

# ruby-on-rails - Rails 表单中的 GET 方法

> ID：14810989
> 
> 赞同：1
> 
> 时间：2013-02-11T11:06:36.123
> 
> 标签：ruby-on-rails, post, get

我正在使用搜索表单，并希望在 ruby​​ on rails 表单中使用 GET 请求。我用这样的东西

1) 在视图中

```
form_tag(:action => "actionxyz", :method => "get") 
```

2) 在路线中

```
get 'actionxyz', :controller => :controllerabc 
```

检查请求时，会看到以下内容

```
<form accept-charset="UTF-8" action="/actionxyz?method=get" method="post"><div style="margin:0;padding:0;display:inline"> 
```

在我看到的网址中还有更多信息，`/actionxyz?method=get`而不是我提供的搜索字符串。提供的搜索字符串出现在 POST 数据中。这是否意味着 rails 没有使用 GET 方法，或者我的解释是错误的。请澄清 ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T11:53:19.060

它将方法解释`get`为表单应该去的路径的一部分，而不是`form_tag`. 所以，你必须隔离它：

```
form_tag( {:action => "actionxyz"}, :method => "get") do 
```

要不就

```
form_tag url_path, method: :get do #where url_path is your route 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T11:16:42.883

form_tag 只需要 URL：

```
form_tag '/actionxyz', :method => "get" 
```

# java - 2种PointcutExpressions

> ID：14810990
> 
> 赞同：0
> 
> 时间：2013-02-11T11:06:44.933
> 
> 标签：java, reflection, aspectj

如果方法匹配，将 org.aspectj.lang.reflect.PointcutExpression 转换为 org.aspectj.weaver.tools.PointcutExpression 以进行检查的正确方法是什么？

设置：我得到了 reflect.Advice 方法并从中提取了相应的 PointcutExpressions。然后我想检查一个特定的方法（reflect.Method）是否与该调用匹配。

我的第一个想法是像这样使用 PointcutExpressionParser：

```
pointcutExpressionParser.parsePointcutExpression(reflectPointcutExpression.asString()); 
```

但这并不能很好地工作，因为 asString() 方法只给出了应该匹配的方法声明，而不是 aspectj 模式（调用、执行、设置等）。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:48:46.177

我找到了问题的原因。

`Advice.getPointcutExpression()`将真正的切入点输出为字符串（如果它直接写入 Advice）或在 Aspect 中声明的切入点的签名。声明的切入点可以通过`AJType.getDeclaredPointcuts()`

# sharepoint - Microsoft.Sharepoint.Utilities dll 在参考列表中不可见

> ID：14810996
> 
> 赞同：0
> 
> 时间：2013-02-11T11:06:51.477
> 
> 标签：sharepoint, sharepoint-2010

我无法添加 Microsoft.Sharepoint.Utilities dll。我有管理员权限，我是 Web 应用程序的农场管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:58:14.353

您应该添加对 Microsfot.Sharepoint.dll 的引用，然后使用

```
Using Microsoft.Sharepoint.Utilities 
```

如果您仍然有问题，请找出您正在使用合适的引用类型（x 64 或 x 86）和/或良好的框架 3.0 +

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:33:01.833

~~此 DLL 可以在 SharePoint 的 ISAPI 文件夹中的 14 hive 中找到~~

很抱歉造成误解。您正在寻找的命名空间位于 Micsrosoft.Sharepoint.dll 中。所以你需要做的是在你的项目中添加对 Microsfot.SharePoint.dll 的引用，并将类中的 using 语句添加到 Microsoft.SharePoint.Utilities。

请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.aspx)说明

这应该没问题。

希望能帮助到你，

安德鲁

# opencv - opencv，模板匹配

> ID：14810997
> 
> 赞同：0
> 
> 时间：2013-02-11T11:07:01.390
> 
> 标签：opencv

我正在为某个项目使用opencv。并有一个应该解决的任务。任务很简单。我有一张主图片和一个模板，而不是将主图片与模板进行比较。我使用 matchTemplate() 函数。我只是对某一刻感到好奇。在文档中，我发现了以下信息：要识别匹配区域，我们必须通过滑动模板图像与源图像进行比较。通过滑动，我们的意思是一次移动一个像素（从左到右，从上到下）。在每个位置，都会计算一个度量，因此它表示该位置的匹配“好”或“坏”（或补丁与源图像的特定区域的相似程度）。对于 T 超过 I 的每个位置，您将度量存储在结果矩阵 (R) 中。R 中的每个位置都包含匹配指标。

因此，例如，您有主图片和模板。而且您知道至少在主图中有一个模板条目。它工作正常。但是如果你不知道主图0或10中有多少个模板？有什么方法可以计算吗？应该使用哪种算法？我如何理解结果矩阵中的度量是什么意思？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:56:02.903

matchTemplate() 函数创建一个新矩阵，其中每个像素保存给定模板在该点与图像匹配程度的值。为了检测与模板匹配的所有区域，您需要遍历结果矩阵并检查每个像素是否超过某个阈值。
如果一个像素超过阈值，则意味着它是图像中与模板匹配的区域的左上角。一个简单的实现可能如下所示：

```
double PATT_THRESH = 0.4
IplImage *result = cvCreateImage(cvSize(imageW, imageH), IPL_DEPTH_32F, 1);
vector<CvPoint> foundTemplates;
cvMatchTemplate(image, pattern, result, CV_TM_SQDIFF_NORMED);
for (int i = 0 ; i < result->width ; ++i) {
    for (int j = 0 ; j < result->height ; ++j) {
        if (cvGet2D(result, j, i).val[0] < PATT_THRESH) {
            foundTemplates.push_back(cvPoint(i, j);
        }
    }

} 
```

我不知道您使用的是什么语言，但很容易翻译成其他语言。希望有帮助。