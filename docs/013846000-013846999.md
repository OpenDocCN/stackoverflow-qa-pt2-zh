# StackOverflow 问答 13846000-13846999

# java - ZipEntry 的路径名称的文件分隔符？

> ID：13846000
> 
> 赞同：29
> 
> 时间：2012-12-12T18:12:01.970
> 
> 标签：java, path, zip, path-separator

ZIP 条目存储条目的完整路径名，因为（我确定下一部分）ZIP 存档没有组织为目录。元数据包含有关文件应该如何存储（在目录内）的信息。

如果我在 Windows 中创建 ZIP 文件，当我在另一个操作系统（例如 Mac OS X）中解压缩数据时，文件结构将保持与以前在 Windows 中的相同。这是因为解压缩器旨在处理此问题，还是因为 ZIP 中的文件分隔符是标准的？

我问这个是因为我试图使用压缩文件的名称在 ZIP 文件中找到一个条目。但是我应该使用哪个文件分隔符使其在 Windows 以外的系统中工作？

我正在使用 Java，method: `.getName()`of the`ZipEntry`给了我使用 Windows 文件分隔符的路径`\`。如果我使用 java`File.separator`分隔符使其在另一个操作系统上工作就足够了吗？还是我必须尝试使用​​每个可能的分隔符查找我的文件？

**荣誉正确答案提及**

@Eren Yilmaz 给出的答案正确描述了许多工具（甚至是您可以自己编码的工具）的功能。但是鉴于 .zip 标准清楚地记录了它**必须**是怎样的，因此必须更新正确的答案

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-06-06T10:49:00.330

[.zip 文件规范](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT)指出：

> 4.4.17.1 文件名，带有可选的相对路径。存储的路径不得包含驱动器或设备号，或前导斜杠。所有斜杠必须是正斜杠“/”而不是反斜杠“\”，以便与 Amiga 和 UNIX 文件系统等兼容。如果输入来自标准输入，则没有文件名字段。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-10T14:59:07.817

文件分隔符取决于创建 zip 文件的应用程序。一些应用程序使用系统文件分隔符，而一些应用程序使用“文明的”正斜杠“/”。因此，如果您正在创建 zip 文件然后使用它，那么您可以简单地使用正斜杠作为文件分隔符。如果 zip 文件是在其他地方创建的，那么您应该找出使用了哪个分隔符。我不知道一种简单的方法，但是您可以使用粗略的方法并在进行时检查两种分隔符类型。

某些应用程序，尤其是自定义邮政编码创建代码，可以在不同的邮政编码条目上混合分隔符，因此不要忘记检查每个条目。

# sql - 如何在 MDX 中排除以特定字符串开头的列？

> ID：13846004
> 
> 赞同：0
> 
> 时间：2012-12-12T18:12:14.450
> 
> 标签：sql, mdx, business-intelligence, cube

我正在尝试使用等效的 SQL 编写 MDX 查询：

```
SELECT m.ID, m.CID, m.Orders
FROM dbo.Measures as m
WHERE SUBSTRING(m.CID, 1, 4) <> 'PID_' 
```

本质上，排除 CID 开头的所有行`'PID_'`

到目前为止，这是我在 MDX 中所拥有的：

```
SELECT 
{
    [Measures].[ID] AS ID,
    [Measures].[Orders] AS NumberOfOrders,
}
ON COLUMNS, 
{
    [Channel].[Channel Account ID].[Channel Account ID].Members
    * [Channel].[Channel].[Channel].Members // exclude accounts starting with 'PID_'
} 
```

我已经尝试过`EXCEPT`and `-`and`WHERE`子句，但似乎没有一个有效。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:36:41.950

我通过 xQbert 提供的链接找到了答案。

这是答案：

```
ON COLUMNS, 
{
    FILTER([Channel].[Channel Account ID].[Channel Account ID].Members, 
        LEFT([Channel].[Channel Account].Properties("Channel Account ID"), 4) 
            <> "PID_")
    * [Channel].[Channel].[Channel].Members
} 
```

# java - 整数和的总值不等于计算值

> ID：13846009
> 
> 赞同：1
> 
> 时间：2012-12-12T18:12:52.337
> 
> 标签：java, c

在 Java 中进行 unsigned int 转换时，我得到了一些“异常”结果，我已将其缩减为如下所示的最小情况。C 中的相同代码会产生相似的结果。

问题是，当我使用高斯求和公式 n(n+1)/2 计算所有整数值的绝对值的理论总和时（参见[https://en.wikipedia.org/wiki/Summation](https://en.wikipedia.org/wiki/Summation)），值 I如果我实际上将所有绝对值一一相加，则计算与总数不匹配。

请注意，当我使用求和公式计算总数时，将省略除以 2 "/2"，因为我将负数和正数都添加为绝对值，最后我必须添加 (longIntegerMax + 1)，因为负数末尾有一个额外的数字 (Integer.MIN)，其绝对值为 Integer.MAX + 1。

```
public static void main( String[] asArguments ){
    long longAbsoluteTotal = 0;
    long longNumberOfIntegers = 0;
    long longIntegerMax = Integer.MAX_VALUE;
    long longIntegerMin = Integer.MIN_VALUE;
    for( int i = Integer.MIN_VALUE;; i++ ){
        longNumberOfIntegers++;
        if( i < 0 ){
            longAbsoluteTotal += i * -1;
        } else {
            longAbsoluteTotal += i;
        }
        if( i == Integer.MAX_VALUE ) break;
    }
    long longCalculatedTotal = longIntegerMax * (longIntegerMax + 1) + longIntegerMax + 1; 
    System.out.println( "count of all integers: " + longNumberOfIntegers ); 
    System.out.println( "total of absolute value of all integers: " + longAbsoluteTotal );
    System.out.println( "calculated total of absolute value of all integers: " + longCalculatedTotal );
} 
```

输出：

```
 count of all integers: 4294967296
 total of absolute value of all integers: 4611686014132420608
 calculated total of absolute value of all integers: 4611686018427387904 
```

如您所见，计算出的总数接近实际总数，但并不完全匹配。为什么不？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T18:27:50.133

问题在这里..

```
longAbsoluteTotal += i * -1; 
```

`( i * -1 )`仍然是整数运算，它产生一个大于 Integer.MAX_VALUE 的数字并溢出回 Integer.MIN_VALUE ；

您可以按照@Evgeniy 的建议解决此问题，或者您可以使用

```
longAbsoluteTotal += i * -1L; 
```

强制长算术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:18:24.393

改变

```
for( int i = Integer.MIN_VALUE;; i++ ){ 
```

到

```
for( long i = Integer.MIN_VALUE;; i++ ){ 
```

一切都会好的

它类似于 -Integer.MIN_VALUE == -2147483648

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:45:31.787

```
4611686014132420608 - 4611686018427387904 = -4294967296 = Integer.MIN_VALUE * 2 
```

原因是

```
Integer.MIN_VALUE * -1 == Integer.MIN_VALUE 
```

由于我们使用二进制补码来表示负值。

Integer.MIN_VALUE(0x80000000) = 0x7fffffff + 0x1 = 0x80000000 的二进制补码。

# javascript - jQuery删除行

> ID：13846014
> 
> 赞同：0
> 
> 时间：2012-12-12T18:13:07.827
> 
> 标签：javascript, jquery

使用 jQuery 相对较新，我希望有人能指出我如何最好地删除某个表格行的正确方向。

来源：

```
<table>
    <tr class="first">
        <td class="first b b-posts"><a href='edit.php'>1</a></td>
        <td class="t posts"><a href='edit.php'>Bericht</a></td>
    </tr>
    <tr>
        <td class="first b b_pages"><a href='edit.php?post_type=page'>0</a></td>
        <td class="t pages"><a href='edit.php?post_type=page'>Pagina's</a></td>
    </tr>
    <tr>
        <td class="first b b-cats"><a href='edit-tags.php?taxonomy=category'>1</a></td>
        <td class="t cats"><a href='edit-tags.php?taxonomy=category'>Categorie</a></td>
    </tr>
    <tr>
        <td class="first b b-tags"><a href='edit-tags.php'>0</a></td>
        <td class="t tags"><a href='edit-tags.php'>Trefwoorden</a></td>
    </tr>
</table> 
```

这是我想删除的位：

```
<tr>
    <td class="first b b-tags"><a href='edit-tags.php'>0</a></td>
    <td class="t tags"><a href='edit-tags.php'>Trefwoorden</a></td>
</tr> 
```

我已经尝试使用这些下一行代码，这给我留下了一个空白`tr`

```
jQuery(document).ready(function(a) {
    a("tr td.b-tags").remove();
    a("tr td.tags").remove();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:15:28.997

您可以`eq`根据要删除的行索引使用。
请注意，索引是从零开始的。
所以`eq(3)`删除第四个。

```
$('table tr:eq(3)').remove(); 
```

或基于子`td`类。

```
$('.b-tags').parent().remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:15:50.197

假设它总是最后一个元素，你可以使用这个：

```
$('table tr').last().remove(); 
```

或者，如果它是第四个元素，`:eq()`请在您的选择器中使用：

```
$('table tr:eq(3)').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:15:59.667

这应该有效：

```
$('.b-tags').parent().remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:16:06.953

```
$('td.first.b.b-tags').closest('tr').remove();​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/uz3E5/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T18:18:13.237

$("first.bb-tags").parent().remove();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T18:24:56.637

如果要删除表中的最后一行，可以这样做：

```
$("table tr").filter(":last").remove(); 
```

[这是示例](http://jsfiddle.net/rkSr4/)

# c++ - [](int* p){delete p;} 是什么意思？

> ID：13846016
> 
> 赞同：3
> 
> 时间：2012-12-12T18:13:16.720
> 
> 标签：c++

有人可以帮我理解什么

```
[](int* p){delete p;} 
```

方法？

我在文档中找到了它。对于 shared_ptr [http://www.cplusplus.com/reference/memory/shared_ptr/shared_ptr/](http://www.cplusplus.com/reference/memory/shared_ptr/shared_ptr/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T18:14:36.473

这是一个无捕获的[lambda 表达式](http://msdn.microsoft.com/en-us/library/dd293608.aspx)，它接受一个指向 an 的指针`int`并调用`delete`它。[这是](http://msdn.microsoft.com/en-us/library/dd293603.aspx)另一个解释 lambda 语法的 MSDN 链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T18:14:51.310

这表示 C++11 风格的[lambda 表达式](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)（“lambda 函数”）。它需要一个指向整数的指针并`delete`s 它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T18:18:28.040

它类似于

```
void foo(int* p){
   delete p;
} 
```

但可以内联编写为另一个函数的一部分（例如作为回调传递）。

# sql - 从字符串中删除空格，SQL

> ID：13846017
> 
> 赞同：5
> 
> 时间：2012-12-12T18:13:21.027
> 
> 标签：sql, oracle

我正在尝试编写一个删除所有空格的 SQL 查询，这样如果一个字符串只有空格，那么最终的字符串就是''。

我已经尝试过这段代码，但显然它不适用于多个空间：

```
regexp_replace(:P14_search_text, '( ){1,}', '') 
```

存在：`P14_search_text`我要修改的字符串。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T18:17:55.477

怎么样：

```
regexp_replace(:P14_search_text, '[[:space:]]*', ''); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T18:20:52.550

尝试这个：

```
 Select Replace(:P14_search_text, ' ', ''); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T17:42:48.573

我尝试了与@Don 建议的方法相同的方法，它适用于 oracle 10 xe。

```
select replace('     lkjds  d   s   adkj      ', ' ', '') from dual 
```

结果

```
lkjdsdsadkj 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T18:27:45.120

希望这对你有帮助，

```
SELECT REGEXP_REPLACE(' Any  String ','( ){1,}','') "REGEXP_REPLACE"  FROM DUAL;
SELECT REGEXP_REPLACE('  ','( ){1,}','') "REGEXP_REPLACE"  FROM DUAL; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T18:27:48.600

以下查询在 oracle 中对我有用：

```
select
    :tst_val AS INPUT,
    regexp_replace(:tst_val, '[[:space:]]*', '') AS MODIFIED
from
    dual 
```

如果此查询对您不起作用，您能告诉我们您得到什么结果吗？

# c++ - 在 C++ 中使用错误检查将命令行 char 参数解析为整数

> ID：13846018
> 
> 赞同：2
> 
> 时间：2012-12-12T18:13:23.987
> 
> 标签：c++, arguments, error-checking

我正在尝试编写一个将两个整数作为命令行参数的程序。整数都需要大于 0。我知道我需要从 char 转换，但我只使用 atoi 做过，我现在知道我不应该这样做。我见过人们使用 sstreams 和 strtol 但我不确定在这种情况下它们将如何工作。实现这一目标的最佳方法是什么？

```
#include <iostream>
#include <string>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

using namespace std;

const int N = 7;
const int M = 8;//N is number of lines, M number of values

//--------------
//-----Main-----
//--------------
int main(int argc, char* argv[])
{
    if((argc != 0) && (argv[0] != NULL) && (argv[1] != NULL))
    {       
        N = argv[0];
        M = argv[1];
    }
    else
    {
        cout << "Invalid or no command line arguments found. Defaulting to N=7 M=8.\n\n" << endl;
    }

    //Blah blah blah code here

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:24:31.330

在 C++11 中有`stoi`, `stol`,`stoll`为此：[http ://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

如果字符串格式不正确，则抛出`invalid_argument`或异常。`out_of_range`

using 没有什么特别的错误`atoi`，除了它没有报告异常的机制，因为它是一个 C 函数。所以你只有返回值 - 问题是所有返回值`atoi`都是有效值，所以没有办法区分返回值 0 是正确解析“0”还是解析失败。此外， atoi 不会检查该值是否超出可用值范围。第一个问题很容易通过自己进行检查来解决，第二个问题更难解决，因为它涉及实际解析字符串 - 这首先破坏了使用外部函数的意义。

你可以`istringstream`这样使用：

C++11 之前的版本：

```
int val;
std::istringstream iss(arg[i]);
iss >> val;
if (iss.fail()) {
   //something went wrong
} else {
    //apparently it worked
} 
```

C++11：

```
int val;
std::istringstream iss(arg[i]);
iss >> val;
if(iss.fail()) {
   if(!value) {
       //wrong number format
   } else if(value == std::numeric_limits<int>::max() || 
             value == std::numeric_limits<int>::min() 
   {
       //number too large or too small
   }
} else {
   //apparently it worked
} 
```

不同之处在于，在 C++11 之前，仅检测到格式错误（根据标准），也不会覆盖错误值。在 C++11 中，如果是格式错误，值将被 0 覆盖，如果数字太大或太小而无法适应类型，则值将被覆盖。两者都在流上设置失败标志以指示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:22:00.163

在这种特定情况下，`atoi`将正常工作。问题`atoi`在于，您无法区分它的返回`0`表示某种错误，以及它的返回`0`表示输入是`0`.

但是，在您的情况下，有效输入必须大于 0。您不关心输入是`0`还是其他无法转换的东西。无论哪种方式，您都将其设置为默认值。

因此，我会做类似的事情：

```
int convert(char *input, int default) { 
    int x = atoi(input);
    return x==0 ? default : x;
}

if (argc > 1)
    N = convert(argv[1], 7);

if (argc > 2)
    M = convert(argv[2], 8); 
```

请注意，`argv[0]`传统上保存被调用程序的名称。在命令行上传递的参数作为`argv[1]`through接收`argv[argc-1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:26:53.483

首先，您不能`const`对 M 和 N 使用限定符，因为您将更改它们的值：

```
int N = 7;
int M = 8;//N is number of lines, M number of values 
```

其次，您不需要检查`(argv[0] != NULL) && (argv[1] != NULL)`，只需检查`argc`(argument count) 是否大于或等于 3：

```
if(argc >= 3) 
```

然后你需要把它转换成整数。如果您不想使用`atoi`，并且如果您没有 C++11 编译器，您应该使用 C++`stringstream`或 C`strtol`

```
stringstream ss;
int temp;
ss << argv[1]; // Put string into stringstream
ss >> temp;    // Get integer from stringstream
// Check for the error:
if(!ss.fail())
{
    M = temp;
}

// Repeat 
ss.clear(); // Clear the current content!
ss << argv[2]; // Put string into stringstream
ss >> temp;    // Get integer from stringstream
// Check for the error:
if(!ss.fail())
{
    N = temp;
} 
```

因此，整个代码将如下所示：

```
#include <iostream>
#include <string>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <sstream>
using namespace std;

int N = 7;
int M = 8;//N is number of lines, M number of values

//--------------
//-----Main-----
//--------------
int main(int argc, char* argv[])
{
    if(argc >= 3)
    {       
       stringstream ss;
       int temp;
       ss << argv[1]; // Put char into stringstream
       ss >> temp;    // Get integer from stringstream
       // Check for the error:
       if(!ss.fail())
       {
           M = temp;
       }

       // Repeat
       // empty
       ss.clear();
       ss << argv[2]; // Put char into stringstream
       ss >> temp;    // Get integer from stringstream
       // Check for the error:
       if(!ss.fail())
       {
           N = temp;
       }

    cout << M << " " << N;
    }
    else
    {
        cout << "Invalid or no command line arguments found. Defaulting to N=7 M=8.\n\n" << 

endl;
    }

    //Blah blah blah code here

    return 0;
} 
```

此外，C 头文件包含`c`前缀，而不是`.h`后缀（`<cstdio>`而不是`<stdio.h>`）

# workflow-foundation-4 - WF 和分层状态机

> ID：13846019
> 
> 赞同：3
> 
> 时间：2012-12-12T18:13:28.643
> 
> 标签：workflow-foundation-4, workflow-foundation

搜索 bing 和 google 我找到了一些，但令人惊讶的是，关于与 Windows 工作流程相关的状态图的信息很少。我得出的唯一明确答案是“是的，它可以处理状态图，这是一个教程。”

但我要确定的是：

*   它是否支持像[Samek 的 QHSM](http://www.hessmer.org/dev/qhsm/)一样丰富的分层状态机。例如：
    *   它能否处理从嵌套状态到另一个嵌套状态的转换，所有进入和退出事件都被正确触发？
    *   它是否处理或促进向历史的过渡？
*   将 WF 用于（分层）状态图时，我应该考虑哪些缺点（如果有）？
*   从 WF4 到 WF45，故事发生了怎样的变化（如果有的话）？

我不担心 WF（分层）状态图是否比 Samek 慢得多。这只是我好奇的表现力。

# php - 无法在单机上模拟服务器到服务器的 PHP 脚本

> ID：13846025
> 
> 赞同：0
> 
> 时间：2012-12-12T18:13:55.533
> 
> 标签：php, nginx

在我运行 Windows 7 的开发 PC 上，我试图模拟这样一个简单的服务器到服务器的安排；

**脚本`/test/index.php`**

```
<?php
echo "<div>hello</div>";
echo file_get_contents("http://localhost/test/server.php");
?> 
```

**脚本`/test/server.php`**

```
<?php
echo "<div>world</div>";
?> 
```

但是当我指向浏览器时，`http://localhost/test/`我没有得到任何响应。浏览器只是挂起。但是，如果我`server.php`用一个`server.html`只包含这个的文件替换；

```
<div>world</div> 
```

然后我得到了想要的回应；

```
hello
world 
```

为什么第一种方法不起作用？它应该工作吗？

**信息**

我通过在命令行上执行此命令来运行 PHP；

```
php-cgi -b 127.0.0.1:9000 
```

我使用 nginx 作为我的网络服务器。在我`nginx.conf`的文件中有一行；

```
worker_processes        1; 
```

在 nginx 文档的某处，它说您应该始终`1`在 Windows 机器上将上述设置为值，但我不知道该设置有什么影响，或者它是否与我的问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:17:09.227

PHP 要求每个作为服务器的 PHP 页面都有一个进程。在您的场景中，您一次只允许处理一个请求。当您的第一个请求导致第二个 PHP 请求得到服务时，系统有效地死锁，而第一个脚本等待第二个脚本运行，因为一次只能运行一个脚本，它永远不会运行。

增加工作进程将允许运行多个并发脚本。

# sql - ORA-904 引用基表时，在包含嵌套表和其他连接的查询中

> ID：13846026
> 
> 赞同：2
> 
> 时间：2012-12-12T18:13:59.577
> 
> 标签：sql, oracle, oracle11g

我已将问题查询提炼为以下示例，但在 metalink 上找不到任何表明这是已知错误或预期行为的内容。

以下脚本是自包含的，因此任何人都可以重现这一点，我正在使用在 RHEL 上运行的 Oracle 11.2.0.3.0 企业 64 位，通过 SQL Developer 提交查询，在 SQL Plus 中出现相同的结果。

第一：创建嵌套表类型。

```
create type nested_type_test as table of varchar(32); 
```

第二：使用类型作为嵌套类型创建表。

```
create table nested_table_test (
  uuid          varchar(32)
  , some_values nested_type_test
)
NESTED TABLE some_values STORE AS nested_some_values; 
```

第三：创建一个我们将用来创建连接语句的任意表。

```
create table join_table (
  uuid  varchar(32)
); 
```

现在来看一些简单的 SQL 语句：

```
select *
from nested_table_test ntt, table(some_Values) sv;

select *
from nested_table_test ntt, table(some_Values) sv
where ntt.uuid = 'X'; 
```

两者都有效，我没有插入数据，但出于这个错误/测试的目的，我们不需要，因为问题是解析问题。下一条语句，我将连接添加到为此目的生成的任意表中。

```
select *
from nested_table_test ntt, table(some_Values) sv
inner join join_table jt on jt.uuid = ntt.uuid; 
```

这现在产生：`ORA-00904: "NTT"."UUID": invalid identifier`- 但我知道该字段存在并且可以在 where 子句中引用它。取出这样的`TABLE(some_values)`子句，

```
select *
from nested_table_test ntt
inner join join_table jt on jt.uuid = ntt.uuid; 
```

并且查询有效，所以我知道它与语句中嵌套表子句的存在是隔离的。

如果我切换到使用手动连接而不是 ANSI 连接，它会再次解析并执行。

```
select *
from nested_table_test ntt, table(some_Values) sv, join_table jt
where jt.uuid = ntt.uuid; 
```

或者，甚至更hack-ish：

```
select *
from nested_table_test ntt, table(some_Values) sv
inner join join_table jt on 1=1
where jt.uuid = ntt.uuid; 
```

也解析 - 所以问题不是`ntt.uuid`问题本身，而是它出现在解析器似乎难以解决的语句中。

已知错误、未知错误或预期行为？

编辑：使用`CROSS JOIN table(some_values) sv`会导致服务器上的段错误和跟踪文件，同时转储连接 - 这肯定是一个错误。这也是我不在纯 ANSI 连接语法中的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:48:29.087

当您混合使用 oracle 和 ANSI 连接语法时，这是预期的行为。ANSI 连接优先于`,`逗号连接（交叉连接），从左到右解析，因此这意味着`ntt`当您尝试引用列时尚未连接`ntt.uuid`，这就是您可能会收到该错误的原因。为此，请选择一种连接类型。例如：

```
select *
from nested_table_test ntt 
    , table(some_Values) sv
    , join_table jt 
where jt.uuid = ntt.uuid; 
```

或者

```
select *
  from nested_table_test ntt
 cross join  table(some_Values) sv
  join join_table jt
    on (jt.uuid = ntt.uuid) 
```

# zend-framework - 在zend表单中添加信息和文件上传失败

> ID：13846028
> 
> 赞同：1
> 
> 时间：2012-12-12T18:14:09.070
> 
> 标签：zend-framework, zend-form

我有2个问题。第一个问题，我有 2 个输入文件（Zend_Form_Element_File），每个输入文件都必须将文件重定向到不同的目录。我使用 Zend_File_Transfer_Adapter_Http 来更新文件。

要查看的与问题相关的文件是：

**控制器/表单/上传类** [http://pastebin.com/6hTADeMQ](http://pastebin.com/6hTADeMQ)

另一个问题是我在编辑记录时必须显示与我在表单中加载的记录相关的文件名。如何插入 div 并打印此信息。遵循 Zend 表单文件： http: [//pastebin.com/TPAaiEPz](http://pastebin.com/TPAaiEPz)

# window.open - 有没有办法返回打开子窗口的用户控件对象父级？

> ID：13846032
> 
> 赞同：1
> 
> 时间：2012-12-12T18:14:28.930
> 
> 标签：window.open

我在一个页面上使用了多个控件，其中包含控件内部的 3 个按钮。其中一个按钮启动另一个对话框窗口，完成后关闭并返回一个值。该值正在正确返回，问题是子级的父级始终是添加到页面的最后一个控件。有没有办法指定哪个控件是子窗口的真正父级？

```
function Button1Click(){
    window.open('<%=DialogLocationHref %>');
}
function Button1Returned(retValue){
    document.getElementById('<%=txtValue1.ClientID%>').value = retValue;
} 
```

父窗口摘录

```
...
if (window.parent.Button1Returned != null){
    window.parent.Button1Returned('+ someValue + ');
} 
```

# c++ - C++ 中大文件读/写的性能问题

> ID：13846033
> 
> 赞同：2
> 
> 时间：2012-12-12T18:14:34.920
> 
> 标签：c++, linux, qt, sockets, io

我正在通过 Qt 开发一个应用程序。

在这个应用程序中，主线程是一个 Web 服务器。另一个线程有时会从大文件 (250mb) 中读取数据并将它们写入输出文件 (~2gb)。

该线程对文件执行高 I/O 操作，CPU iowait 约为 70%。

我的问题是写入文件时，Web 服务器没有快速响应。我的理解是服务器的 qt 套接字（在 Linux 上）由连接到 poll 或 select 事件系统的系统套接字表示。所以 Qt 仅在 poll 发出事件时才向我的应用程序发送信号。

我认为文件写入的 io 操作太大可能会阻塞轮询系统，所以我的 qt 服务器没有收到套接字事件。当线程完成写入数据时，一切都变得正常。

文件写入如下所示：

```
while(dataToRead){
    // context has the list of files to read and current step
    dataToRead = extractData(context, &pBuffer, &sizeBuf);

    fwrite (pBuffer, 1, sizeBuf, pOutFile);

    free(pBuffer);
    pBuffer = NULL;

    // usleep(100000);
} 
```

如果我使用 usleep 功能添加中断，这有助于避免问题，但如果我没有使用足够大的睡眠，则不能完全避免。但是过大的sleep会破坏性能，而i是尽可能快地生成文件。

我做错了什么？尽可能快地读/写文件是否安全？在上述功能中睡眠是强制性的吗？但是我们怎么知道好的时间片呢？

我正在使用 Intel Core i5 2500 和标准 HDD 驱动器开发 Mint LMDE、Linux 3.2.0 64 位。

编辑：重现问题的示例程序可在此处获得：[https](https://bugreports.qt-project.org/secure/attachment/30436/TestQtBlocked.zip) ://bugreports.qt-project.org/secure/attachment/30436/TestQtBlocked.zip 。需要qt的qmake编译。如果你运行它，它将创建一个空的 3GB 文件，工作线程将在启动时启动，并在几秒钟内创建文件。在此期间，如果您尝试连接到 http://localhost:8081/ 并运行许多 F5 刷新页面，您会看到有时它没有快速响应。如果有人可以用我的示例程序重现我的问题并告诉我，这可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:55:51.740

如果您正在饿死主线程的选择调用，请创建一个单独的线程来执行文件 I/O。当事件来自 Qt 时，触发某种 IPC 唤醒您的工作线程以执行大文件 I/O 并立即从您的事件处理程序返回。

（这假设异步写入文件对您的程序逻辑有意义。只有您才能确定这是否属实。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:46:54.457

来自手册页： size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);

你想写 sizeBuf , 1 个元素。

您可能想使用 setvbuf 调整缓冲。

setvbuf(pOutfile, NULL, _IONBF, 0) - 禁用缓冲。

完整示例位于： http: [//publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp ?topic=%2Frtref%2Fsetvbuf.htm](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frtref%2Fsetvbuf.htm)

更好地切换到使用文件描述符，而不是文件流。

使用文件描述符，您可以使用 sendfile 和 slice。人发送文件人切片

# javascript - （如何）我可以使用 Chrome 的检查器在使用 cachebusters 的文件上设置断点吗？

> ID：13846043
> 
> 赞同：3
> 
> 时间：2012-12-12T18:15:01.537
> 
> 标签：javascript, google-chrome, inspector

我正在尝试在 JS 文件上设置断点，但由于 URL 上的缓存拦截器（例如 &random=123），Chrome 似乎无法识别该页面是相同的。

无论其 URL 参数如何，如何让 Chrome 相信该页面是相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:53:20.717

将以下内容放入您想要休息的 JS 中

`debugger;`

# jquery - Jquery在图像上提交

> ID：13846044
> 
> 赞同：-1
> 
> 时间：2012-12-12T18:15:03.350
> 
> 标签：jquery, image, jquery-selectors

我有一个图像列表，我希望用户能够单击图像并使用 jquery 提交数据。因此，给定几张图片，用户可以点击其中任何一张，它会自动提交到带有该人选择的图片 id 的 jquery 登录页面。这是我尝试使用列表作为图像的代码..

```
<ul>
<li><img id='1' src='/img1.png'></li>
<li><img id='2' src='/img2.png'></li>
<li><img id='3' src='/img3.png'></li>
</ul>

$(function()
{
     $('#img').click(function()
     {
       var datastring = //either 1,2,3 corresponding to image id
       $.ajax({   
       type: "POST",   
       url: "process.php",   
       data: dataString,   
       success: function() {   
          alert('Image Submitted')  
       }      
     });   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:21:16.303

完整版：

```
$(document).ready(function() {
  $('img').click(function()
  {
   var datastring = $(this).attr('id'); // or simply $(this).id;
   $.ajax({   
   type: "POST",   
   url: "process.php",   
   data: dataString,   
   success: function() {   
      alert('Image Submitted')  
  }      
 });   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:22:27.047

试试这个：

```
$('img').click(function() {
    var datastring = $(this).prop('id');
    $.ajax({
        type: "POST",
        url: "process.php",
        data: dataString,
        success: function() {
            alert('Image Submitted')
        }
    });
});​ 
```

**PS**`.attr`查看和之间区别的最简单方法`.prop`是以下示例：

```
<input blah="hello" /> 
```

1.  **`$('input').attr('blah')`**：`'hello'`按预期返回。这里没有惊喜。
2.  **`$('input').prop('blah')`**: 返回`undefined`——因为它正在尝试这样做`[HTMLInputElement].blah`——并且该 DOM 对象上不存在这样的属性。它仅作为该元素的属性存在于范围内，即`[HTMLInputElement].getAttribute('blah')`

所以，一个属性在 DOM 中；一个属性位于解析为 DOM 的 HTML 中。所以使用道具！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:23:26.210

快速浏览一下建议更改这些行：

```
$('#img').click(function()
 {
   var datastring = //either 1,2,3 corresponding to image id 
```

对此：

```
 $('img').click(function()
 {
   var datastring = $(this).attr('id'); 
```

所以我们已经失去了，`#`因为你不是在寻找一个 id。我们还添加了检索 id。

这部分参见[http://jsfiddle.net/tAH7F/](http://jsfiddle.net/tAH7F/)

# asp.net - 将 linq 转换为 sql 到 linq 实体的最佳方法

> ID：13846047
> 
> 赞同：0
> 
> 时间：2012-12-12T18:15:08.483
> 
> 标签：asp.net, linq-to-sql, linq-to-entities

我有一个使用 linq 2 sql 的 asp.net Web 表单应用程序。许多控件数据绑定到 linq 数据源控件。

我想清理这个应用程序，以便我可以轻松使用 html5 的离线功能。

我想我可能应该将我的 linq 2 sql 语句从后面的代码移动到类，然后调用类。没有把握？

我想做的是有一个干净的分离，因为 MS 不再推广 linq 2 sql，我想转移到 linq 2 实体。

最终，从现在开始，我想将这个应用程序转换为 mvc，但一步一步。

为每个表单创建单独的数据类或者只创建数据库第一个 linq 到实体类会更好吗？

谢谢，

雪莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:11:45.943

我建议[在此处](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)查看存储库模式建议。自 2009 年以来，我一直在使用带有 LINQ-to-SQL 和 ASP.NET MVC 的存储库模式，它对我管理数据交互、维护关注点分离，尤其是测试非常有用。

# c++ - 将mysql包含到cmake中

> ID：13846049
> 
> 赞同：2
> 
> 时间：2012-12-12T18:15:15.443
> 
> 标签：c++, mysql, cmake

我正在kdevelop（与cmake集成）中编写一个控制台应用程序，我想在其中连接到mysql。我已经安装了 libmysqlclient16-dev。我的 main.cpp 文件如下所示：

```
#include <stdlib.h>
#include <iostream>
#include <mysql/mysql.h> 

int main(int argc, char **argv) { 
    MYSQL *conn_ptr; 
    conn_ptr = mysql_init(NULL); 
    if (!conn_ptr) { 
        std::cout << "mysql init failed\n"; 
        exit(1); 
    } 
    conn_ptr = mysql_real_connect (conn_ptr, "localhost", "user", "pass", "db", 0, NULL, 0); 
    if (conn_ptr) { 
        std::cout << "connection success\n"; 
    } else { 
        std::cout << "connection failed\n"; 
    } 
    mysql_close(conn_ptr); 
    return 0; 
} 
```

当我手动编译它时，它可以编译并正常工作：

```
g++ main.cpp -lmysqlclient -o main 
```

但我想以某种方式将它包含在 cmake 中。由 kdevelop 生成的 CMakeLists.txt 如下所示：

```
project(finances)

add_executable(finances main.cpp) 
```

我应该向 cmake 添加什么以使其包含 mysqlclient 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:53:20.190

```
target_link_libraries(finances mysqlclient) 
```

似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T16:07:16.217

```
target_link_libraries(projectName mysqlclient) 
```

*将projectName*更改为您当前的*项目名称*

# python - Python 3.3 Mysql 连接器

> ID：13846050
> 
> 赞同：18
> 
> 时间：2012-12-12T18:15:17.267
> 
> 标签：python

> **可能重复：**
> [Python 3.0 的 MySQL-db 库？](https://stackoverflow.com/questions/384471/mysql-db-lib-for-python-3-0)

我使用 python3.3 并且无法连接到 MySQL，因为我没有找到 MySQL 连接器的模块。

如何使用 python3.3 连接到 MySQL？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T18:23:53.123

您可能会喜欢一个名为[Pymysql的模块：](https://github.com/petehunt/PyMySQL/)

```
"""This pure Python MySQL client provides a DB-API to a MySQL database by talking directly to the server via the binary client/server protocol."""

import pymysql
conn = pymysql.connect(host='127.0.0.1', unix_socket='/tmp/mysql.sock', user='root', passwd=None, db='mysql')
cur = conn.cursor()
cur.execute("SELECT Host,User FROM user")
for response in cur:
    print(response)
cur.close()
conn.close() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T18:24:23.930

据我所知，没有人将 C 扩展模块移植`mysql`到 Python 3，但至少有两个纯 Python 模块可以很好地与 Python 3（以及 PyPy 等）一起工作：

*   [PyMySQL](https://github.com/petehunt/PyMySQL/)
*   [MySQL 连接器/Python](http://dev.mysql.com/doc/connector-python/en/index.html)

[python3 mysql](http://bit.ly/TV1Q2q)的快速谷歌出现了更多（以及指向这两个项目的各种指针，包括以前提出完全相同的问题的 SO 问题）。

# javascript - 未捕获的类型错误：无法读取 null 的属性“值”，需要一些指导

> ID：13846051
> 
> 赞同：0
> 
> 时间：2012-12-12T18:15:21.140
> 
> 标签：javascript, jquery

我一直试图在我的开发人员工具中找出这个特殊问题，但到目前为止我还没有运气。我的一个 js 文件有一个错误，上面写着

```
Uncaught TypeError: Cannot read property 'value' of null 
```

以下错误指的是下面 dt_version 的第一个变量。特别是如果我注释掉第一行代码。我在 offload1 和 offload2 的以下变量上得到相同的错误。该变量是我试图传递的数字。当页面加载时，我在我的身体上运行这个功能......`onload=updatetotal();`

```
 function updatetotal() {
    var dt_version = document.getElementById("dt_version").value-0;
    var offload1 = document.getElementById("capacity_offload1").value-0;
    var offload2 = document.getElementById("capacity_offload2").value-0;
    var offload3 = document.getElementById("capacity_offload3").value-0;
    } 
```

如果运行 if 语句来查找`document.getElementByID("dt_version");`...它默认为 false ..因此它不会在上一页上被延续，我可以看到它的输入很好，其中包含值。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:17:50.943

这个错误意味着id`dt_version`不存在。检查您的 html 以确保它存在：

```
var dt =  document.getElementById("dt_version");
if (dt){
   // do your stuff
}else {
    console.log("dt does not exist")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:13:58.050

此错误的另一个原因可能是 - 当您在页面加载时调用 javascript 函数时，您的控件可能尚未完全呈现到页面。一个简单的解决方案就是将该控件移到页面的开头。如果它不起作用，那么一个可靠的解决方案是，调用 jquery $(document).ready() 中的函数。

# r - 使用 R 在一张图中绘制多个列表

> ID：13846052
> 
> 赞同：3
> 
> 时间：2012-12-12T18:15:25.257
> 
> 标签：r, plot, sar

我刚开始使用R，所以请宽容...

目前我正在尝试可视化 SAR 在 Linux 服务器上收集的一些磁盘性能数据。CSV 数据的标题如下所示：

```
timestamp; DEV; tps; rd_sec/s; wr_sec/s; avgrq-sz; avgqu-sz; await, svctm; %util 
```

DEV 代表我用来分组数据的设备名称：

```
disks <- split(x = dkstbl, f = dsktbl[, "DEV"]) 
```

使用带有操作库的 RStudio，我绘制了以下图：

```
manipulate(
  plot(disks[disk][[1]]$tps[time], 
       disks[disk][[1]]$await[time], 
       xlim = c(0,max(disks[disk][[1]]['tps'])), 
       ylim = c(0,max(disks[disk][[1]]['await'])),
       main = paste(disk,disks[disk][[1]]$X00.00.01[time]),
       xlab = 'IOPS',
       ylab = 'AWAIT'
       ), 
  time = slider(1, 1000),
  disk = picker(as.list(names(disks)))
) 
```

这几乎是我想要的，但仍然不完全是。我想要的应该包含一个图上所有磁盘的数据，并且可能看起来像这样：

```
manipulate(
  plot(disks[*][[1]]$tps[time], 
       disks[*][[1]]$await[time], 
       xlim = c(0,max(disks[*][[1]]['tps'])), 
       ylim = c(0,max(disks[*][[1]]['await'])),
       main = paste(disks[*][[1]]$X00.00.01[time]),
       xlab = 'IOPS',
       ylab = 'AWAIT'
       ), 
  time = slider(1, 1000)
) 
```

...其中星号 (*) 需要替换为可以一次绘制所有磁盘的东西。我该如何做到这一点？

谢谢和干杯，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:20:28.890

首先，我看不出您首先拆分原始 data.frame 的任何原因。

其次，如果我理解正确，您想查看所有磁盘的观察结果，对于一个特定的时间点，对吗？

所以我认为以下解决了你的问题：

```
disk <- do.call("rbind", disks)
manipulate(
  plot(disk$tps[disk$Time==time],
     disk$await[disk$Time==time],
     xlim = c(0,max(disk$tps)),
     ylim = c(0,max(disk$await)),
     main = "All disks",
     xlab = 'IOPS',
     ylab = 'AWAIT'
  ),
  time = picker(as.list(levels(disk$Time)))
) 
```

一个人应该努力让事情变得简单......

# algorithm - 集合交点的并行算法

> ID：13846054
> 
> 赞同：4
> 
> 时间：2012-12-12T18:15:27.607
> 
> 标签：algorithm, parallel-processing, distributed-computing, set, set-intersection

我有 n 组（分布在 n 列上）表示网格节点的数据，我想知道一种有效的并行算法来找到这些组的交集，即公共节点。只要任何 2 个集合共享一个节点，就定义了一个交集。

例如;

输入：

```
Rank 0: Set 1 - [0, 1, 2, 3, 4]

Rank 1: Set 2 - [2, 4, 5, 6]

Rank 2: Set 3 - [0, 5, 6, 7, 8] 
```

**实现并行算法——>结果：（找到交叉点后）**

```
Rank 0: [0, 2, 4]

Rank 1: [2, 4, 5, 6]

Rank 2: [0, 5, 6] 
```

该算法需要在 n-rank 上完成，每个 rank 有 1 个集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:37:20.200

您应该能够使用哈希表并行处理这种快速 O(N)。

对于每个集合 S_i，对于每个成员 m_x（所有这些都可以并行完成），将集合成员放入与集合名称关联的哈希表中，例如，。每当你从集合 S_j 在 m_x 的哈希表中命中时，你现在就有了相应的集合编号 S_i，并且你立即知道 S_i 与 S_j 相交。您可以将 m_x 放在派生的交集中。

您需要一个并行安全的哈希表。这很容易; 在更新期间锁定存储桶。

[另一个答案建议对集合进行排序。对于大多数排序算法，将是 O(N ln N) 时间，而不是那么快]。

# django - 我应该使用约束吗？

> ID：13846056
> 
> 赞同：1
> 
> 时间：2012-12-12T18:15:29.073
> 
> 标签：django, django-models

我正在开发一个类似 Twitter 的系统，并且有一个模型来记录谁关注了谁。有两个字段，两个字段都是外键并指向 User 模型。

显然，您不希望重复关注者-关注者记录，因此我`unique_together`在内部`Meta`类中使用该属性，以便关注者-关注者对是唯一的。试图违反此抛出`IntegrityError`和 500 状态代码。

这感觉就像是“第二道防线”，因为我的视图和模板代码不会让用户有机会关注某人两次。

我应该/我可以做一些类似的事情来确保你不能跟随自己吗？

列出所有用户的视图和模板（每个用户都有一个按钮可以单击以关注该用户）没有列出当前登录的用户，因此应该没有机会关注自己。但我没有任何相当于`unique_together`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:29:42.933

伙计，没有。

我不知道你*为什么*要这样做，但假设这不是与一个疯子教授的大学项目，你就是在浪费你的时间。

也就是说，如果他不是疯子，他就不会尝试破解 following/followee 。如果他这样做了怎么办？如果它是出于创业的想法，那么花更少的时间解决这个（微不足道的）问题，而花更多的时间在任何商业模式或营销或你*需要*做的事情上。

一个小错误不会成为表演的终结者。

如果您被外包出去，请将其保留为错误并延长联系以修复它:)

如果你只是想解决这个问题，只需检查模型或验证追随者与被追随者不同

# emacs - 获取当前文件名 yank-able 的快速方法是什么（使用 Cy）

> ID：13846058
> 
> 赞同：2
> 
> 时间：2012-12-12T18:15:35.703
> 
> 标签：emacs

有时我编辑具有特定后缀的文件和具有相同基名但另一个后缀的文件。由于基本名称又长又笨拙，我想重用现有文件名来构造另一个名称。

我目前做的是：

`C-x C-b`（这显示了缓冲区列表）

`C-x o`（现在我在缓冲区列表中）

`M-right M-left`（在基本名称的开头）

`C-space M-right ... M-w`（复制基本名称）

`C-x o`（回到我来的地方）

...

必须有更规范的方法来做到这一点！（我对涉及正确定义命令的方式不感兴趣，我已经有太多了......）

* * *

编辑：实际上，我想要的是用这个名字做一些事情，最常见的是创建或读取相关文件。@Trey Jackson`C-x C-v`就是这样！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:33:05.840

严格来说，这个命令做你想做的事，即使你不想要一个命令：

```
(defun copy-base-filename-as-kill ()
  (interactive)
  (let ((filename (buffer-file-name)))
    (when filename
      (kill-new (file-name-nondirectory (file-name-sans-extension filename)))))) 
```

但是，如果您真的只是使用这个名称来做其他​​事情......也许更好的解决方案是让做其他事情更容易。

如果您想要根据当前名称创建一个新名称，请尝试使用命令`C-x C-v`(aka )。`M-x find-alternate-file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:29:58.367

我不认为有任何开箱即用的东西可以做到这一点，但这里有一个小的 elisp 函数：

```
(defun copy-buffer-filename ()
  (when (buffer-file-name) 
    (kill-new (file-name-nondirectory (buffer-file-name))))) 
```

# ruby-on-rails - ActiveRecord 传递关联删除

> ID：13846063
> 
> 赞同：4
> 
> 时间：2012-12-12T18:15:52.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有以下模型：

```
class Organization < ActiveRecord::Base
  has_many :providers, :dependent => :destroy
  has_many :products, :through => :providers
end

class Provider < ActiveRecord::Base
  belongs_to :organization
  has_many :products, :inverse_of => :provider
end

class Product < ActiveRecord::Base
  belongs_to :provider, :inverse_of => :products
end 
```

当我创建一个具有提供者（并且没有产品）的组织，然后使用销毁将其删除时：

```
Organization.find(1).destroy 
```

Rails 3.0.x**不会**删除相关的提供者，留下不存在的组织 ID。这是一种奇怪的行为，我希望那里要么 nil 要么删除提供者（这就是我想要做的）。

我看到有传递关联 has_many :products :through => :providers - 我想知道这是否是 provider 未被删除的原因。

谢谢你的帮助

编辑：

好的，这和Rails无关，我们在Provider类中进行了以下检查

```
 def prevent_redhat_deletion
    if redhat_provider?
      errors.add(:base, _("Red Hat provider can not be deleted"))
      return false
    end
    true
  end 
```

显然我正在删除一个redhat_provider。出于某种原因，Rails 不会因错误而退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:01:15.027

您还可以尝试将 :dependent = :destroy 更改为 :dependent => :delete。查看提供程序是否被删除。如果他们这样做，则可能是您的代码阻止了删除。

# c++ - 如何为结构成员分配其他函数返回的值？

> ID：13846064
> 
> 赞同：1
> 
> 时间：2012-12-12T18:15:50.900
> 
> 标签：c++, multithreading, struct

我正在尝试制作一个多线程程序。
我可以编译成功，但我的程序总是崩溃。

这是我的代码片段：

```
// in global declaration
typedef struct MyData {
    int nSumber;
    char *szFileName;
} MYDATA, *PMYDATA;

PMYDATA pData[MAX_THREAD];

// in my OpenDialog function
OPENFILENAME ofn;
char szFile[MAX_PATH];
ofn.lpstrFile = szFile;
ofn.lpstrFile[0] = '\0';
if(GetOpenFileName(&ofn))
    // I think this line that makes my program crash
    pData[0]->szFileName = ofn.lpstrFile; 
```

我做错了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:23:32.263

该`pData`数组包含指向`MYDATA`未指向有效内存的指针，因为您尚未分配任何内存。

```
if(GetOpenFileName(&ofn)) {
  pData[0] = new MYDATA();
  pData[0]->szFileName = ofn.lpstrFile;
} 
```

现在你需要调用`delete`每个*分配*的`pData`元素来释放内存。

因此，与其经历所有这些麻烦，不如使用`std::vector<MYDATA>`.

```
std::vector<MYDATA> dataVec;

// ...

if(GetOpenFileName(&ofn)) {
  MYDATA data;
  data.szFileName = ofn.lpstrFile;
  data.nSumber = something; // you probably want to init this also
  dataVec.push_back(data);
} 
```

我不确定是否`szFileName`是 a`char *`并且只是将其指向`ofn.lpstrFile`. 您可能需要分配内存并将文件名存储在`struct`. 如果是这种情况，请更改`szFileName`为`std::string`而不是`char *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:20:21.740

你的问题遗漏了很多细节，但如果`char szFile[MAX_PATH]`是函数的本地，它就在堆栈上。您不能将它保存在全局变量中并期望它在其他地方使用，因为一旦`szFile`超出范围（在`}`函数的下一个或末尾），堆栈空间就会被重新使用。

要进行快速测试`ofn.lpstrFile = new char[MAX_PATH]`，请尝试查看您的崩溃是否消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:20:45.350

这仅分配指向数据的指针数组：

```
PMYDATA pData[MAX_THREAD]; 
```

您需要实际分配一个`MYDATA`at`pData[0]`才能使其有效。

# wpf - 交互触发条件和其他适配器

> ID：13846065
> 
> 赞同：1
> 
> 时间：2012-12-12T18:15:56.750
> 
> 标签：wpf, mvvm

我需要使用一些带有交互触发器的附加条件，例如：

作为对事件的反应，我想执行命令，但前提是条件匹配。另外我希望命令会延迟执行。我可以用那个伪 xaml 来表达这一点。

```
<ci:RoutedEventTrigger Event="{x:Static Selector.SelectionChangedEvent}">
  <li:TriggerCondition ActualValue="{Binding Value}" ExpectedValue="{StaticResource foo}">
    <li:DelayAction DelayTime="{StaticResource delayTime}">
       <InvokeCommandAction CommandName="{StaticResourc commandName}"/>
    </li:DelayAction>
  </li:TriggerCondition>
</ci:RoutedEventTrigger> 
```

我尝试编写 TriggerCondition 和 DelayAction 类，但几乎所有交互代码都是内部的。

所以问题是我怎样才能达到期望的行为？使用条件和延迟编写 RoutedEventTrigger 看起来并不那么通用，而且我还有 InputBindingTrigger 等等。

提前致谢

**更新：** 我已经使用反射制作了我想要的东西，但我仍在寻找你的建议如何以正确的方式做到这一点:)

```
 [ContentProperty("Actions")]
  public abstract class TriggerDecorator : TriggerAction<DependencyObject>
  {
    private static readonly DependencyPropertyKey ActionsPropertyKey = 
      DependencyProperty.RegisterReadOnly("Actions", typeof (TriggerActionCollection),typeof (TriggerDecorator), new FrameworkPropertyMetadata());
    public static readonly DependencyProperty ActionsProperty = ActionsPropertyKey.DependencyProperty;
    public TriggerActionCollection Actions
    {
      get { return (TriggerActionCollection) GetValue(ActionsProperty); }
    }

    private readonly MethodInfo myTriggerAction_CallInvokeMethod;

    public TriggerDecorator()
    {
      var triggerActionType = typeof (TriggerAction);
      myTriggerAction_CallInvokeMethod = triggerActionType.GetMethod("CallInvoke", BindingFlags.Instance | BindingFlags.NonPublic);
      if(myTriggerAction_CallInvokeMethod == null)
        throw new InvalidOperationException();

      var actionCollection = (TriggerActionCollection)Activator.CreateInstance(typeof(TriggerActionCollection), true);
      SetValue(ActionsPropertyKey, actionCollection);
    }

    protected override void OnAttached()
    {
      base.OnAttached();

      if(AssociatedObject == null)
        return;
      Actions.Attach(AssociatedObject);
    }

    protected override void OnDetaching()
    {
      base.OnDetaching();
      Actions.Detach();
    }

    protected void ExecuteActions(object parameter)
    {
      var param = new[] {parameter};
      foreach (var triggerAction in Actions)
        myTriggerAction_CallInvokeMethod.Invoke(triggerAction, param);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:08:20.910

你可以定制`EventTrigger`

像这样的东西应该工作：

```
 public sealed class DelayAction : System.Windows.Interactivity.EventTrigger
    {
        private EventArgs _eventArgs;
        private DispatcherTimer _delayTimer;

        public static readonly DependencyProperty DelayProperty =
            DependencyProperty.Register("Delay", typeof(double)
            , typeof(DelayAction), new PropertyMetadata(0.0));

        public double Delay
        {
            get { return (double)base.GetValue(DelayProperty); }
            set { base.SetValue(DelayProperty, value); }
        }

        protected override void OnDetaching()
        {
            if (_delayTimer != null)
            {
                _delayTimer.Stop();
                _delayTimer = null;
            }
            base.OnDetaching();
        }

        protected override void OnEvent(EventArgs eventArgs)
        {
            if (_delayTimer != null)
            {
                _delayTimer.Stop();
            }
            _eventArgs = eventArgs;
            _delayTimer = new DispatcherTimer();
            _delayTimer.Interval = TimeSpan.FromMilliseconds(this.Delay);
            _delayTimer.Tick += new EventHandler(TimerTick);
            _delayTimer.Start();
        }

        private void TimerTick(object sender, EventArgs e)
        {
            this._delayTimer.Stop();
            base.InvokeActions(this._eventArgs);
        }
    } 
```

用法：

```
<Button Click="Button_Click">
    <i:Interaction.Triggers>
        <myTriggers:DelayAction Delay="1000" EventName="Click">
         // do stuff
        </myTriggers:DelayAction>
    </i:Interaction.Triggers>
</Button> 
```

# wordpress - 选择中的 A JAX 列表类别和子类别 - Wordpress

> ID：13846070
> 
> 赞同：1
> 
> 时间：2012-12-12T18:16:12.380
> 
> 标签：wordpress

我想为类别创建动态加载，例如，有“国家”类别，然后是子类别中的“美国”、“巴西”、“西班牙”，以及“纽约”、“里约热内卢”和“巴塞罗那” “在一个子子类别中。

像这样的美国 [USA(New York), Brazil(Rio)] ; 欧洲 [西班牙(巴塞罗那)]

所以我有 3 个选择：第一个用户必须选择“America”或“Europe”，然后如果我选择“America”，第二个会加载“Brazil”和“USA”供我选择，依此类推。

我正在尝试的是使用该函数并根据带有属性的当前选择`wp_dropdown_categories`动态填充下一个选择。`wp_dropdown_categories``child_of`

我尝试用上面的 javascript 做一些事情来获得为第一个选择的选项并且它有效，但我看不到动态填充另一个选择的方法，比如制作一个`wp_dropdown_categories`child_of，像这样`wp_dropdown_categories('child_of=the_category_i_have_chosen');`

```
<script type="text/javascript">
    var dropdown = document.getElementById("cat");
    function onCatChange() {
        var value = dropdown.options[dropdown.selectedIndex].value
        }
    }
    dropdown.onchange = onCatChange;
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-29T10:19:46.530

我将其用于城市/州选择。“sehir”是自定义分类名称。

头文件.php

```
<script type="text/javascript">
$(function(){
$('#main_scat').change(function(){
    var $mainsCat=$('#main_scat').val();

    // call ajax
    $("#sub_scat").empty();
    $.ajax({
        url:"<?php bloginfo('url'); ?>/wp-admin/admin-ajax.php",       
        type:'POST',
        data:'action=my_special_ajax_calls&main_catids=' + $mainsCat,

        success:function(results)
        {
            //  alert(results);
            $("#sub_scat").removeAttr("disabled");      
            $("#sub_scat").append(results);
        }
    });
});
});
</script> 
```

函数.php

```
function implement_ajax_sehir() {
if(isset($_POST['main_catids'])) {
    if($_POST['main_catids'] != 0) {
        $categories=  get_categories('child_of='.$_POST['main_catids'].'&hide_empty=1&taxonomy=sehir'); 
        foreach ($categories as $cat) {
            $option .= '<option value="'.$cat->term_id.'">';
            $option .= $cat->cat_name;
            $option .= '</option>';
        }
        echo '<option value="0" selected="selected">İlçe Seçiniz</option>'.$option;
        die();
    } else {
        echo '<option value="0" selected="selected">İlçe Seçiniz</option>';
    }
}
}
add_action('wp_ajax_my_special_ajax_calls', 'implement_ajax_sehir');
add_action('wp_ajax_nopriv_my_special_ajax_calls', 'implement_ajax_sehir'); 
```

主要类别选择框代码：

```
<?php
$args = array(
'taxonomy' => 'sehir', 
'name'=>'main_scat', 
'hide_empty'=>1,
'depth'=>1,
'hierarchical'=> 1, 
'show_count' => 0,
'show_option_all'=>'Şehir Seçiniz'
);
wp_dropdown_categories( $args ); 
?> 
```

子类别选择框：

```
<select name="sub_scat" id="sub_scat" disabled="disabled"><option value="0" selected="selected">İlçe Seçiniz</option></select> 
```

您可以通过这种方式进行改进。

# android - NoClassDefFoundError MapView 活动

> ID：13846071
> 
> 赞同：0
> 
> 时间：2012-12-12T18:16:18.010
> 
> 标签：android, android-mapview, noclassdeffounderror

我已将 mapview 活动添加到应用程序，尝试打开 mapView 活动会导致崩溃。我不熟悉这个问题，这里关于它的其他线程倾向于引用我似乎没有的库或类路径，这可能是问题，但我并不真正理解它。

> ```
> 12-12 18:01:26.075: E/AndroidRuntime(4655): FATAL EXCEPTION: main
> 12-12 18:01:26.075: E/AndroidRuntime(4655): java.lang.NoClassDefFoundError: com.b00517566.weekST.MyMapViewer
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at com.b00517566.weekST.WeekSevenTwoActivity.updateWeatherView(WeekSevenTwoActivity.java:144)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at com.b00517566.weekST.WeekSevenTwoActivity.access$0(WeekSevenTwoActivity.java:142)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at com.b00517566.weekST.WeekSevenTwoActivity$1.onClick(WeekSevenTwoActivity.java:63)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.view.View.performClick(View.java:4202)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.view.View$PerformClick.run(View.java:17340)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.os.Handler.handleCallback(Handler.java:725)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.os.Handler.dispatchMessage(Handler.java:92)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.os.Looper.loop(Looper.java:137)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at android.app.ActivityThread.main(ActivityThread.java:5039)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at java.lang.reflect.Method.invokeNative(Native Method)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at java.lang.reflect.Method.invoke(Method.java:511)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
> 12-12 18:01:26.075: E/AndroidRuntime(4655):   at dalvik.system.NativeStart.main(Native Method) 
> ```

```
public class MyMapViewer extends MapActivity {
        /** Called when the activity is first created. */

        @Override
        public void onCreate(Bundle savedInstanceState) {//class begins
            super.onCreate(savedInstanceState);
            setContentView(R.layout.my_mapview);//sets the layout to the xml

            MapView mapView = (MapView) findViewById(R.id.mapview);//creates a new mapview initialisation
            mapView.setBuiltInZoomControls(true);//adds the zoom function to the map

            List<Overlay> mapOverlays = mapView.getOverlays();//the mapOverlay listobject is initialised to teh mapView
            Drawable drawable = this.getResources().getDrawable(R.drawable.station_icon);//points to marker icon
            MyItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable, this);//instantiates Itemizer

            GeoPoint point = new GeoPoint((int)(54.684624 * 1e6),
                    (int)(-5.880218 * 1e6));//converts double cords to microdegrees for Geopoint
            OverlayItem overlayitem = new OverlayItem(point, "Jordanstown", "Shore Road, Newtownabbey, Belfast, Antrim BT370QB ");

            GeoPoint point1 = new GeoPoint((int)(54.66370520273512 * 1e6),
                    (int)(-5.930986404418945 * 1e6));//converts double cords to microdegrees for Geopoint
            OverlayItem overlayitem2 = new OverlayItem(point1, "Valley JuiJitsu Club", "Valley Park Newtownabbey BT36 6");

            GeoPoint point2 = new GeoPoint((int)(54.644600844283104 * 1e6),
                    (int)(-5.666391849517822 * 1e6));//converts double cords to microdegrees for Geopoint
            OverlayItem overlayitem3 = new OverlayItem(point2, "Peninsula Martial Arts", "3 Balloo Link, Bangor, Down BT19 7HJ");

            itemizedoverlay.addOverlay(overlayitem); //calls teh addOverlay method
            mapOverlays.add(itemizedoverlay);//adds above to the itemizedoverlay
         }//end of class

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }//a necessary generated method
    } 
```

该代码对我来说看起来不错，因此问题应该与编辑器或项目属性中的某些内容有关。任何有关如何解决此问题的建议将不胜感激。

显现

> ```
>  <?xml version="1.0" encoding="utf-8"?> <manifest
>  xmlns:android="http://schemas.android.com/apk/res/android"
>      package="com.b00517566.weekST"
>      android:versionCode="1"
>      android:versionName="1.0" >
> 
>      <uses-sdk android:minSdkVersion="9" />
>      <uses-permission android:name="android.permission.INTERNET"/>
> 
>      <application
>          android:icon="@drawable/ic_launcher"
>          android:label="@string/app_name" >
>          <activity
>              android:name=".WeekSevenTwoActivity"
>              android:label="@string/app_name" >
> 
>          </activity>
>          <activity android:name="splash">
>                <intent-filter>
>                  <action android:name="android.intent.action.MAIN" />
> 
>                  <category android:name="android.intent.category.LAUNCHER" />
>              </intent-filter>
>          </activity>
>          <activity 
> 
>              android:name="MyMapViewer"
>              android:theme="@android:style/Theme.NoTitleBar">
> 
>              </activity>
>      </application>
> 
>  </manifest> 
> ```

```
private void updateWeatherView() {      

startActivity(new Intent(this, MyMapViewer.class));
}//end of method 
```

如您所见，它非常简单，没有其他 MyMapViewer 类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:46:23.550

`<uses-library android:name="com.google.android.maps" />`

> mainfest 添加这个库

并添加权限

```
 <!--permissions -->
     <uses-permission
         android:name="android.permission.INTERNET">
     </uses-permission>
     <uses-permission
         android:name="android.permission.ACCESS_FINE_LOCATION">
     </uses-permission> 
```

# javascript - 使用 if (!num) 在 javascript 中测试 typeof

> ID：13846072
> 
> 赞同：3
> 
> 时间：2012-12-12T18:16:24.640
> 
> 标签：javascript, typeof

我正在编写一个需要测试传递的参数是否是数字的函数。我是新手，所以我只是写了这样的东西：

```
if (typeof num !== "number") {
    return false;
} 
```

我出于同样的目的查看了其他人的代码，他们只是有这样的东西：

```
if (!num) {
    return false;
} 
```

我觉得这很混乱。如果将零传递给函数， !num 不会评估为真吗？第二段代码如何可靠地测试 num 参数的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:17:29.213

> *“如果将零传递给函数，不会`!num`评估为真吗？”*

是的，如果`NaN`或任何虚假的非数字值也是如此。

> *“第二段代码如何可靠地测试`num`参数的类型？”*

它没有。它只测试值的“虚假性”。每个虚假值都会给语句一个`true`结果`if`。

这些值是：

*   `false`
*   `""`
*   `0`
*   `NaN`
*   `null`
*   `undefined`

任何其他值都将不符合`if`条件。

*（当然，如果您不使用 否定该值，所有这一切都会颠倒过来`!`）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:23:44.213

您可以使用该功能：[isNaN(value)](http://www.w3schools.com/jsref/jsref_isnan.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:24:11.177

您对第二条语句没有正确验证输入是否为数字是正确的。你不妨像这样改进你的检查：

> if ((typeof(num) !== "number) || (isNaN(num) || (!isFinite(num) {
> 
> > ```
> >  return false; 
> > ```
> > 
> > }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:27:39.070

您是正确的，这不是有效的代码行。[这是测试](http://jsfiddle.net/CrvNV/) 正确的代码是：

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

如[本答案中所述](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric/174921#174921)

# java - ubuntu 10.04 中的午餐玉 IPMS 跨平台代理迁移

> ID：13846076
> 
> 赞同：0
> 
> 时间：2012-12-12T18:16:34.270
> 
> 标签：java, migration, ubuntu-10.04, agents-jade

我在 Ubuntu 10.04 中遇到[JADE](http://jade.tilab.com/) IPMS 跨平台代理迁移问题。当我用命令吃玉时 >java -cp lib/jade.jar;lib/migration.jar jam.Boot -gui -platform-id Platform1 services jam.core.mobility.AgentMobilityAgent;jade.core.migratio.InterPlatformMobilityService -accept-国外代理真。错误是：

```
lib/migration.jar: line 1: PK: command not found
lib/migration.jar: line 2: META-INF/��PK: No such file or directory
K-*��ϳR0�3��r�Cq,HL�HU�%���_^jMETA-INF/MANIFEST.MF�M��LK-.
                            y���RKRSt�*A�M�
�u�
   L4�K�|3����+�KRs�&lt;���4y�x�PK
N<accs/PK
N<
  accs/client/PK
N<fipa/PK
N<
  fipa/agents/PK
N<  fipa/api/PK
N<
fipa/jade/PK
N<fipa/jade/compat/PK
N<fipa/launcher/PK
N<jade/PK
N<
jade/core/PK
N<jade/core/launcher/PK 
```

我在窗口中成功午餐相同的命令，但 ubuntu 失败。我是 Jade 编程的新手，请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:20:30.250

在 Linux 上，类路径用`:`, not分隔`;`，用于分割命令。

# asp.net - Gridview 编辑模板中的 ASP INLINE 下拉列表框

> ID：13846077
> 
> 赞同：0
> 
> 时间：2012-12-12T18:16:41.427
> 
> 标签：asp.net, vb.net, gridview

我正在尝试将下拉列表框编码到 gridview 的编辑模板中。我有所有的工作。我想不通的是如何将下拉列表框中的值返回到 Gridview，以便更新按钮会发回。

我需要使用 ASP 内联代码来执行此操作，而不是页面后面的代码。我已将 gridview 中的字段转换为 Templatefield。

这是我到目前为止所拥有的，但我一直在改变以尝试其他事情......

```
<asp:TemplateField HeaderText="Vehicle ID" SortExpression="tractorID"> 
 <EditItemTemplate> 
    <asp:DropDownList ID="DropDownList7" runat="server"  Width="70px" DataValueField="Value" 
                      SelectedValue='<%# Bind("tractorID") %>' DataSourceID="SqlDataSource1"  /> 
 </EditItemTemplate> 
 <ItemTemplate> 
    <asp:Label ID="Label1" runat="server" Text='<%# Eval("tractorID") %>'></asp:Label> 
 </ItemTemplate> 
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:12:22.730

这是完成工作的正确代码。我无法找出 INLINE 解决方案，不得不将其添加到 RowDataBound 事件中。

```
' gets value of originally loaded record.
Dim vehID = row.Field(Of Integer)("tractorID") 
'  finds the dropdownlist to add the value to.
Dim tractorDDL As DropDownList = DirectCast(e.Row.FindControl("DropDownlist7"), DropDownList)
' Adds the value to the ddl
tractorDDL.Items.Add(vehID )      '  Adds value of the original record 
```

完美运行。

# objective-c - Sin 和 Cos 函数返回不正确的结果

> ID：13846079
> 
> 赞同：5
> 
> 时间：2012-12-12T18:16:47.593
> 
> 标签：objective-c, math

> **可能重复：**
> [将正弦 180 的值设为 1.22465e-16](https://stackoverflow.com/questions/6566512/getting-value-of-sine-180-as-1-22465e-16)

我正在计算圆周上的一个点。我有圆的半径和中心点。在这里你会说，重要的是，有一个相同的直接公式。是的，角度是弧度

```
x = x + r*sin(angle)
y = y + r*cos(angle) 
```

好的，现在这里的问题是即使我以弧度传递角度。然而，对于下面提到的角度，我没有得到正确的答案

```
for 90 degree (rads = 1.5708) i get y axis = -4.3774e-08
for 180 degree (rads = 3.14159) i get x axis = -8.74228e-08
for 270 degree (rads = 4.71239) i get y axis = 1.19249e-08
for 360 degree (rads = 6.28319) i get x asix = 1.74846e-07 
```

我正在将度数转换为弧度

```
return degrees * M_PI / 180; 
```

我不确定为什么会这样。一定有什么严重的错误。

这是用于转换的代码

```
float angle = DegreesToRadians(90);

float x = sin(angle);
float y = cos(angle); 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T18:33:07.297

`M_PI`在“math.h”中定义为

```
#define M_PI        3.14159265358979323846264338327950288 
```

这只是*大约*（无理数）Pi。所以

```
cos(M_PI/2), sin(M_PI), cos(3*M_PI/2), sin(2*M_PI) 
```

仅*接近于*零。Pi 不能完全表示为 a`float`或`double`。

根据您的输出，我假设您使用了`float`. 由于 a 的有效位数`float`约为 7，并且`sin()`和`cos()`在该点的斜率（一阶导数）为`+/- 1`，因此我会说结果与您预期的一样好。使用`double`会产生更好的结果，但不完全为零。

所以没有什么*严重*的错误，你不能指望浮点计算的结果是准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:33:18.357

要为[重复](https://stackoverflow.com/questions/13100144/java-math-cosmath-toradiansangle-returns-weird-values/13100229#13100229)的问题添加评论...

一种替代方法是使用梯度或度数而不是弧度，这样整个圆的倍数以及每个象限的倍数都是整数，并且*这些*参数的正弦和余弦也可以精确表示。

还必须惊叹一些数学库的实现如何处理 pi 的倍数：由于浮点数或双精度数中 pi 的表示与真实值相差一些*delta*，因此 N*(pi+-delta) 是偏离真实值 N*delta。因此，在编写良好的库中，sin((pi/2)+(2*pi)*n) 随 n 增加；对于编写不佳的库，该参数被评估为 2*pi 的模*逼近，为每个**n*给出完全相同的偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:03:26.837

一般来说，在处理浮点数时，不建议将结果（相等）与任何特定数字进行比较，可能是 0、1 甚至 pi 或 e。-8.74228e-08 非常接近，几乎可以在所有可计算的情况下被视为 0。（如果不是，那么无论如何你都有浮点/双精度的重要问题）

如果您需要在程序代码中比较它们，您应该减去这些值并将结果与​​ < 或 > 以及一些非常小的数字进行比较。例如

```
if (sin(something*pi) < 0.0001f) ... 
```

而不是

```
if (sin(something*pi) == 0) ... 
```

# chromium - Chromium URL 斜杠

> ID：13846080
> 
> 赞同：1
> 
> 时间：2012-12-12T18:16:53.720
> 
> 标签：chromium, slash

我正在尝试连接我公司的网页。我注意到一个问题，但无法解决。

当我输入“http://www.example.com/a”时，它会重定向到 404 页面。但是当我输入 /a/ 而不是 /a 时，页面加载没有任何问题。

此问题仅适用于 Chromium，Firefox 将 /a 和 /a/ 呈现为相同的 URL，并且页面正在加载而没有任何问题。

谁能解释我为什么会遇到这个问题？或者是否有任何关于此的错误报告？

我的系统是：Ubuntu 12.10.1 LTS - 32 位操作系统和 Chromium 20.0.1132.47 Ubuntu 12.04 (144678) 浏览器。

提前致谢。

# android - android webview 全屏显示 youtube.com/tv 视频

> ID：13846081
> 
> 赞同：5
> 
> 时间：2012-12-12T18:16:53.250
> 
> 标签：android, webview, youtube, fullscreen

我正在制作一个用于在电视机上显示 youtube.com/tv 的应用程序。它具有简单而漂亮的布局，并且还具有一些不错的功能，例如通过智能手机配对和控制它。所以.. 我使用 webview 来获取网址：youtube.com/tv

一切正常，除了我希望它在选择 vid 时自动全屏显示。

通常我已经找到了我所有的答案，（在这里）但是这个很难。

我希望一切都发生在 webview 中。那应该可以吗？还是我需要开始一个新的意图，或者创建一个新类 videoview.java 来调用 eks。视频视图.xml？对此真的不确定.. 我问的原因是，当一个视频开始时，youtube.com/tv 会像播放列表一样自动播放下一个，希望保持这种状态。

[我在http://developer.android.com/reference/android/webkit/WebChromeClient.html#onShowCustomView(android.view.View](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onShowCustomView(android.view.View) , android.webkit.WebChromeClient.CustomViewCallback)找到了一些关于 HTML5 全屏的文档，但是仍然很困惑。这是要走的路吗？使用：

```
public void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback) 
```

和：

```
public void onHideCustomView () 
```

这是我的主要 TV.java 直到现在。请温柔一点，因为我对这些东西很陌生。

```
@SuppressLint("SetJavaScriptEnabled")
public class Tv extends Activity
{
    WebView web;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        //Transparent actionBar Only option menu available...
        requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
        ActionBar actionBar = getActionBar();
        actionBar.setBackgroundDrawable(null);
        setDisplayShowHomeEnabled(false);
        setTitleShowHomeEnabled();
        getActionBar().setDisplayShowHomeEnabled(false);
        getActionBar().setDisplayShowTitleEnabled(false);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        // webview id
        web = (WebView) findViewById(R.id.webview);
        //webchromeclient
        web.setWebChromeClient(new WebChromeClient());
        //hide search bar
        web.setWebViewClient(new myWebClient());
        //Enable javascript
        web.getSettings().setJavaScriptEnabled(true);
        web.getSettings().setPluginState(PluginState.ON);
        //Scale video controls
        web.setInitialScale(150);
        // Test

        //web.getSettings().setLoadWithOverviewMode(true);
        //web.getSettings().setUseWideViewPort(true);
        //web.setVerticalScrollbarOverlay(true);
        //web.getSettings().setAllowFileAccess(true);

        //Load url
        web.loadUrl("http://www.youtube.com/tv");
        //Load file from assets NB: Missing "S" is correct
        // web.loadUrl("file:///android_asset/yt.html");
    }

    //Fullscreen
    public void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)
    {
    }

    public void onHideCustomView ()
    {
    }
    //End fullscreen

    private void setTitleShowHomeEnabled()
    {
    }

    private void setDisplayShowHomeEnabled(boolean b)
    {
    }

    public class myWebClient extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon)
        {
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;

        }
    }

    // To handle "Back" key press event for WebView to go back to previous screen.
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack())
        {
            web.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    // Ask if user wants to exit
    @Override
    public void onBackPressed()
    {
        new AlertDialog.Builder(this)
        .setMessage("Are you sure you want to exit?")
        .setCancelable(false)
        .setPositiveButton("Yes", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int id)
            {
                //Tv.this.finish();
                android.os.Process.killProcess(android.os.Process.myPid());
            }
        })
        .setNegativeButton("No", null)
        .show();
    }

    //Option menu
    public class SimpleOptionMenu extends Activity
    {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.webview);

        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case R.id.text1:    
            AlertDialog alertDialog = new AlertDialog.Builder(this).create(); //Read Update
            alertDialog.setTitle("Information");
            alertDialog.setMessage("In order to log in to your account and activate the use of your smart phone, please select: -Sign in & settings- -> -Sign in- in the left menu, write down the activation code, and then click on -Activate- in this menu. Have a happy tube :) ");

            alertDialog.setButton("Continue..", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {
                    // here you can add functions
                }
            });

            alertDialog.show();
            break;

        case R.id.text2:   
            Intent intent = new Intent(this, GetActivation.class);
            this.startActivity(intent);
            break;
            //Exit
        case R.id.text3: 
            android.os.Process.killProcess(android.os.Process.myPid()); // <- Complete kill
            //Tv.this.finish(); <-Dosent kill totally
            return true;
        default:
            return false;
        }
        return true;
    }
} 
```

# encoding - 使用 Glotpress 和 Cyrillic 字符串时的 .mo 文件不正确

> ID：13846087
> 
> 赞同：2
> 
> 时间：2012-12-12T18:17:18.907
> 
> 标签：encoding, character

我正在使用 GlotPress 翻译一些项目。当翻译者使用这个词时我遇到了一个问题：“Подписка” 最后一个“а”是西里尔字母，而不是“常规 a”。

这是正在发生的事情的示例：http: [//i.imgur.com/Nqspa.png](http://i.imgur.com/Nqspa.png)

如果我导出 .po，在 poedit 上打开它，.mo 文件是正确的（没有显示错误），它们仅在直接从 GlotPress 使用 .mo 时出现。

我不能要求翻译人员避免使用西里尔字母 а，我也不知道这是否发生在任何其他语言的任何其他字符上。我也不能要求他们下载文件，在 poedit 上打开并保存。

# python - 查询接受 7 个位置参数，但给出了 8 个

> ID：13846090
> 
> 赞同：1
> 
> 时间：2012-12-12T18:17:37.777
> 
> 标签：python, sqlite, python-3.x

我不断收到错误：

```
Traceback (most recent call last):
  File "C:\Users\Shepard\Desktop\Final Program\TestMaker.py", line 53, in <module>
    qs.AddQuestion(None, Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5])
TypeError: AddQuestion() takes 7 positional arguments but 8 were given 
```

似乎很容易弄清楚。我刚刚浏览了所有查询语句并计算了七个位置参数。每次。包括身份证。这是什么黑魔法？我很迷茫，这甚至不是可笑的。

这是生成 sqlite3 查询的所有代码。

```
def CreateDb(self):
    query = """CREATE TABLE Questions
             (id INTEGER PRIMARY KEY, Question TEXT, Answer1 TEXT, Answer2 TEXT, Answer3 TEXT, Answer4 TEXT, CorrectAnswer TEXT)"""
    self.cursor.execute(query)
    self.connection.commit()

def AddQuestion(self, Question, Answer1, Answer2, Answer3, Answer4, CorrectAnswer):
    self.cursor.execute("""INSERT INTO questions
                            VALUES (?, ?, ?, ?, ?, ?, ?, ?)""", [None, Question, Answer1, Answer2, Answer3, Answer4, CorrectAnswer])
    self.connection.commit()

if __name__ == "__main__":
    qs = QuestionStorage(testName + ".db")
    qs.CreateDb()    
    qs.AddQuestion(None, Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5]) 
```

我现在很迷茫：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:22:54.440

`AddQuestion`是对象的绑定方法（`qs`在您的情况下是对象），而不是未绑定的函数。这意味着当你调用它时，它`qs`会自动作为第一个位置参数传递，在你显式传递的参数之前。这就是为什么方法通常被写`self`为第一个参数。

你需要改变

```
qs.AddQuestion(None, Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5]) 
```

至

```
qs.AddQuestion(Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:27:47.617

这不需要`None`（AFAICT）：

```
qs.AddQuestion(None, Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5]) 
```

此外，您稍后会在查询中遇到问题`.AddQuestion`- 我在下面为占位符计算 8 个...

```
VALUES (?, ?, ?, ?, ?, ?, ?, ?) 
```

和 7 的参数......所以，不知道你要做什么！

# android - Android - 动画开始偏移无法正常工作

> ID：13846092
> 
> 赞同：7
> 
> 时间：2012-12-12T18:17:48.077
> 
> 标签：android, animation

我正在尝试制作一个动画，该动画将从当前位置滑动到屏幕中心，然后翻转。我让每个移动组件都正常工作，但是一旦我将它们全部放入带有 startoffset 的集合中，动画直到该偏移结束时才会开始，并且它会立即执行所有动画。非常感谢您对此的任何帮助。

**slide_down.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- Slide down -->
    <translate 
        android:fromYDelta="0%" 
        android:toYDelta="100%"
        android:duration="1000"/>

    <!-- Set alpha to fully opaque -->
    <alpha 
        android:fromAlpha="0.8"
        android:toAlpha="1.0"
        android:duration="1000" />

    <!-- Flip image once it's in the center -->
    <!-- ***** HERE IS THE only offset I set ****** -->
    <scale
        android:fromXScale="0.0"
        android:toXScale="1.0"
        android:pivotX="50%"
        android:fromYScale="1.0"
        android:toYScale="1.0"
        android:startOffset="1000"
        android:duration="200" />
</set> 
```

**调用代码**

```
Animation anim = AnimationUtils.loadAnimation(getActivity(), slideDirection);
        anim.setAnimationListener(new AnimationListener() {
            public void onAnimationStart(Animation animation) {             
            }

            public void onAnimationRepeat(Animation animation) {                
            }

            public void onAnimationEnd(Animation animation) {
                mCallBack.categorySelected(view.getId());
            }
        });

        view.clearAnimation();
        view.startAnimation(anim); 
```

谢谢，德曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:41:06.627

动画偏移总是从动画开始计算。如果你想让你的动画一个一个地播放，那么你必须自己计算偏移量。

以下将播放翻译 1 秒，然后 alpha 再播放一秒，然后缩放 200 毫秒 -

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- Slide down -->
    <translate 
        android:fromYDelta="0%" 
        android:toYDelta="100%"
        android:duration="1000"/>

    <!-- Set alpha to fully opaque -->
    <alpha 
        android:fromAlpha="0.8"
        android:toAlpha="1.0"
        android:startOffset="1000"
        android:duration="1000" />

    <!-- Flip image once it's in the center -->
    <!-- ***** HERE IS THE only offset I set ****** -->
    <scale
        android:fromXScale="0.0"
        android:toXScale="1.0"
        android:pivotX="50%"
        android:fromYScale="1.0"
        android:toYScale="1.0"
        android:startOffset="2000"
        android:duration="200" />
</set> 
```

# git - Gitolite 在 localhost 上询问 git ssh 密码

> ID：13846096
> 
> 赞同：3
> 
> 时间：2012-12-12T18:17:55.420
> 
> 标签：git, ssh, gitlab

我现在第三次设置 GitLab 和 gitolite。第一次一切顺利，不需要额外的设置，除了邮件功能外一切正常。所以我做了一个愚蠢的举动并重新安装了所有东西，现在我的 git 在我想要执行推或拉时要求输入密码。甚至 gitlab 测试也不起作用。我试过`ssh -vvv git@localhost`并得到以下提示

```
ssh -vvv git@localhost
OpenSSH_5.3p1 Debian-3ubuntu7, OpenSSL 0.9.8k 25 Mar 2009
debug1: Reading configuration data /root/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to localhost [127.0.0.1] port 22.
debug1: Connection established.
debug1: permanently_set_uid: 0/0
debug1: identity file /root/.ssh/identity type -1
debug3: Not a RSA1 key file /root/.ssh/id_rsa.
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug3: key_read: missing keytype
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug2: key_type_from_name: unknown key type '-----END'
debug3: key_read: missing keytype
debug1: identity file /root/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /root/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3p1 Debian-3ubuntu7
debug1: match: OpenSSH_5.3p1 Debian-3ubuntu7 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3p1 Debian-3ubuntu7
debug2: fd 3 setting O_NONBLOCK
debug1: SSH2_MSG_KEXINIT sent
debug3: Wrote 792 bytes for a total of 831
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-    exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug3: Wrote 24 bytes for a total of 855
debug2: dh_gen_key: priv key bits set: 130/256
debug2: bits set: 507/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug3: Wrote 144 bytes for a total of 999
debug3: check_host_in_hostfile: filename /root/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 6
debug1: Host 'localhost' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:6
debug2: bits set: 506/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug3: Wrote 16 bytes for a total of 1015
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug3: Wrote 48 bytes for a total of 1063
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /root/.ssh/identity ((nil))
debug2: key: /root/.ssh/id_rsa (0x2b289fea3380)
debug2: key: /root/.ssh/id_dsa ((nil))
debug3: Wrote 64 bytes for a total of 1127
debug1: Authentications that can continue: publickey,password
debug3: start over, passed a different list publickey,password
debug3: preferred gssapi-keyex,gssapi-with-mic,gssapi,publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /root/.ssh/identity
debug3: no such identity: /root/.ssh/identity
debug1: Offering public key: /root/.ssh/id_rsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug3: Wrote 368 bytes for a total of 1495
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /root/.ssh/id_dsa
debug3: no such identity: /root/.ssh/id_dsa
debug2: we did not send a packet, disable method
debug3: authmethod_lookup password
debug3: remaining preferred: ,password
debug3: authmethod_is_enabled password
debug1: Next authentication method: password
git@localhost's password: 
```

然后它一直提示输入密码。我读取了 SSH 密钥，修改了`sshd_config`允许`git`用户。我搜索了几个小时，没有发现任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:43:19.210

作为[OP btype](https://stackoverflow.com/users/518801/btype) [评论](https://stackoverflow.com/questions/13846096/gitolite-asking-for-git-ssh-password-on-localhost#comment19210370_13846096)：

> 这是 gitolite 和 git-account 的混合不工作，但缺少`.pub`的是失败。

所以需要在`gitolite-admin/keys`repo 中添加 ssh 密钥并推送到 gitolite 服务器，这会将密钥添加到`~git/.ssh/authorized_keys`文件中。

请参阅“ [gitolite 之类的程序如何工作？](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work/13320256#13320256) ”

如果该过程未正确完成，则对该服务器的任何 git 命令（推/拉/克隆）都会要求输入密码。

# objective-c - 我可以使用一个 viewController 而不是 5 个吗？

> ID：13846097
> 
> 赞同：2
> 
> 时间：2012-12-12T18:17:58.450
> 
> 标签：objective-c, ios

我希望用户输入 5 个关于他自己的详细信息，但我不想使用无聊的 5 个文本字段表单。我希望用户一次看到一个文本字段-> 单击按钮并移至下一个文本字段。我的问题是，我必须为此使用 5 个视图控制器吗？我试图找到一种更优雅的方式。

我`setHidden:YES`为每个使用过的文本字段考虑了类似的东西，但它不是动画的，看起来有点难看，所以我正在寻找一个替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:01:58.643

我认为你应该只用一个`UIViewController` `(DetailViewController)`和一个`UIView`作为容器`(DetailViewContainer)`，这个容器包含你的 5 个详细信息`UIView` `(DetailView)`。如果你想在每个之间实现特定的过渡动画，`DetailView`你可以在里面实现你的过渡动画`DetailViewContainer`。

如果我应该做和你一样的任务，我会按照以下方式做：

```
typedef enum
{
    firstDetailView,
    secondDetailView,
        ...
}DetailViewType;

@protocol DetailViewDelegate <NSObject>

- (void)detailViewDidEndEditingWithValue:(NSString)value detailViewType:(DetailViewType)detailViewType;

@end

//

@interface DetailViewController : UIViewController <DetailViewDelegate>
@end

@implementation DetailViewController
- (void)detailViewDidEndEditingWithValue:(NSString)value detailViewType:(DetailViewType)detailViewType
{
    //save new detail to model here
}
@end

//

@interface DetailView : UIView
@property(nonatomic, weak) id<DetailViewDelegate> delegate;
@end

@implementation DetailView
- (void)saveDetailValue
{
    [delegate detailViewDidEndEditingWithValue:self.value detailViewType:self.type];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:11:09.017

So there are tons of ways you could approach this, but to specifically answer your question about having to use 5 view controllers... no. You wouldn't have to. You could create a say... "QuestionViewController" that handles displaying the question and then keeps pushing new instances of that controller onto the navigation stack with different questions.

**.h**

```
@interface QuestionViewController : UIViewController

@property (nonatomic, strong) NSString *question;

- (IBAction) nextQuestion:(id)sender;

@end 
```

**.m**

```
#import "QuestionViewController.h"
#import "AppDelegate.h"

@implementation QuestionViewController

@synthesize question = _question;

- (IBAction)nextQuestion:(id)sender
{
    AppDelegate *delegate = (AppDelegate*) [[UIApplication sharedApplication] delegate];

    QuestionViewController *vc = [[QuestionViewController alloc]     initWithNibName:@"QuestionViewController"
                                                                          bundle:nil];

    vc.question = [delegate getNextQuestion];

    [self.navigationController pushViewController:vc
                                         animated:YES];
}

@end 
```

So in my example, the app delegate would manage which question comes next and then the question view controller would simply fetch the next question and push a new instance of itself onto the view stack. You could wire a button up to the **nextQuestion:(id)sender** action. This should be enough to get you going if you decide to stick with the "one question per controller" idea.

Like I said, I'm not weighing in on what type of design is the best. I'm just saying if you want to do it the way you described... this would keep you from having to create a bunch of similar controllers.

Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:23:31.603

每个页面应该使用一个 ViewController
如果您的文本字段在同一页面上，那么您应该使用一个具有 5 个子视图的 viewController。

使用`view setHidden`，但如果你想要动画，那么简单的动画到完全透明的颜色（使用`view.alpha = 0.0`），然后隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:25:49.147

你真的可以疯狂地使用它，并`IBoutletCollection`在你的 5中使用类似 a 的东西`UITextFields`。然后，您可以轻松管理`UITextField`要显示的正确内容（基于问题的索引）：

```
Question 1 => UITextField (0)
Question 2 => UITextField (1) 
```

然后，您可以使用 Wojtek 建议的内容：带有一些效果的漂亮动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T19:45:13.087

A single text field and label (for the question) would do. Your single view controller could change the question and empty the text field every time when a new question is due. There is no need to hassle with 4 hidden views/pairs of views and 1 visible.

If you want to go for some basic animations "for free" then go for a UISlider with paging enabled, carrying 5 pairs of label and text field.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T18:22:45.610

如果你想要简单的淡入/淡出过渡，你可以这样做

```
 [UIView animateWithDuration:duration animations:^{
    if(something)
    //fade in
    view.alpha = 1.f;
    else {
    //fade out
 view.alpha = 0.f;
    view.hidden = YES;
}]; 
```

# autocomplete - Extjs 4 组合框自动完成问题

> ID：13846098
> 
> 赞同：0
> 
> 时间：2012-12-12T18:17:59.727
> 
> 标签：autocomplete, extjs4

我面临组合自动完成问题的问题：1）它没有在用户提前输入时过滤搜索 2）我观察到（在萤火虫中）每次我输入一个字母时，它都会通过休息调用获取结果。任何指针都会有所帮助... 代码：型号----------

```
Ext.define('TopoApplication.model.MDeviceDetail', {
extend: 'Ext.data.Model',
fields: [
{
name: 'deviceName',
mapping: 'name'
},
{
name: 'id',
mapping: 'id'
},
{
name: 'deviceType',
mapping: 'deviceType'
},
{
name: 'longname',
mapping: 'longname'
},
{
name: 'state',
mapping: 'state'
}

],
proxy: {
type : 'rest',
extraParams: {
test:'2'
},
url :'topo/message',
// format: 'json',
reader: {
type:'json',
root : 'devicelist'
}

}

}); 
```

* * *

店铺：

```
Ext.define('TopoApplication.store.SDeviceDetail', {
extend : 'Ext.data.Store',
model : 'TopoApplication.model.MDeviceDetail',
autoLoad: true
}); 
```

看法： - - - - - - - - - - - - - - - - -

```
var combo = {
xtype : 'combo',
fieldLabel : 'Search By Device Name',
forceSelection : true,
valueField : 'id',
displayField : 'deviceName',
typeAhead : true,
hideTrigger: true,
loadingText : 'Querying....',
// pageSize : 20,
minChars : 1,
triggerAction : 'all',
//itemSelector : 'div.search-item',
store : 'SDeviceDetail',
listeners: {
'select': {fn:function(){console.log(this.getValue());}}
}
};

Ext.define('TopoApplication.view.device.DeviceDetail', {

extend : 'Ext.window.Window',
title : 'Device Detail Information',
width : 500,
height : 620,
alias : 'widget.deviceDetail',
defaults : {
bodyStyle : 'padding:15px'
},
items : combo,
initComponent : function() {
console.log('initComponent: DeviceDetail Window');
this.viewConfig = {
forceFit : true
};
this.callParent(arguments);
this.show();
}
}); 
```

控制器： - - - - - - - - - - - -

```
Ext.define('TopoApplication.controller.CDeviceDetail', {
extend : 'Ext.app.Controller',
stores : ['SDeviceDetail'],
models : ['MDeviceDetail'],
views : ['device.DeviceDetail'],
// views : ['device.Grid'],
init : function() {
// When we declare stores and models, the controller will automatically create getter functions for them.
// this.getSDeviceDetailStore().load();

this.control({
'viewport>panel' : {
render : this.onPanelRendered
}
});
console.log('Initialized CDeviceDetail Controller');
},

onPanelRendered : function() {
console.log('The panel was rendered');
}

}); 
```

提前致谢。

阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:18:52.627

只需将**“查询模式：本地”**添加到组合框配置即可解决此问题。

# c++ - C++ for循环初始化计数器错误

> ID：13846101
> 
> 赞同：2
> 
> 时间：2012-12-12T18:06:51.057
> 
> 标签：c++

我在 C++ 中有一个简单的 for 循环，初始化语句是：

> for (int n = 0; n < this->fileLines.size(); n++) {

出于某种疯狂的原因，n 的值不是设置为 0，而是设置为 249758，这会导致 for 循环评估错误。

任何想法为什么这是初始化错误（即，不为 0）？

![在此处输入图像描述](../Images/a8e78ecb7b5dbce081521af5157aeb2e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T18:22:35.203

我认为您需要在 for 循环之后验证 n 的值是什么，我看不出有任何方法可以非 0。检查开关开始时的值。您的断点可能在 n 实际设置之前中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:38:11.470

你试过坚持

```
std::cerr<<n<<std::endl; 
```

在`for`循环内部？这似乎是在程序运行期间观察值以验证它是否按照您的想法进行的更直接的方法，并且优化不会给您这个输出带来问题。

也许您的程序是多线程的，并且有人不恰当地写入该内存位置？

# html - 如何使用 CSS 将文本从一个框流到另一个框

> ID：13846108
> 
> 赞同：0
> 
> 时间：2012-12-12T18:18:27.783
> 
> 标签：html, css

我在 html 中有几个框

```
<div class="parent">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
</div> 
```

用 css 定义

```
.box{
width : 200px;
height : 300px;
display :  block;
float : left
} 
```

有没有办法在父级中提供日志文本并在子级中`DIV`流动文本？还是应该做？`DIV``CSS``Javascript`

当然，在哪里提供文本并不重要，我只想将多余的文本流到下一个框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:30:00.210

将您的 HTML 更改为包含内容的单个元素，例如：

```
<div class="parent">
  <div class="box"></div>
</div> 
```

然后添加这些样式规范：

```
.box {
   -moz-column-count: 3;
   -webkit-column-count: 3;
   column-count: 3;
   height: 10em; /* Or whatever height is appropriate. */
} 
```

有关 CSS 列的更多信息，请参阅[http://css-tricks.com/snippets/css/multiple-columns/](http://css-tricks.com/snippets/css/multiple-columns/)或[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts#The_columns_shorthand](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts#The_columns_shorthand) .

# c# - 全局热键分配窗口

> ID：13846111
> 
> 赞同：0
> 
> 时间：2012-12-12T18:18:48.587
> 
> 标签：c#, registerhotkey, global-hotkey

我已经构建了一个具有主窗口的 WPF 应用程序

我想按 Ctr+Alt+1 激活/最大化窗口

然后我在窗口上有一个 9 选项卡式面板

我想分别用 1-9 的热键访问每个选项卡（当主窗口处于活动状态时），当窗口不活动并最大化时，我想删除热键

在每个选项卡上我有 9 个按钮，然后我希望能够在选项卡处于焦点时再次使用热键 1-9 激活按钮单击。

我发现了一篇文章[http://www.codeproject.com/Articles/160441/Using-C-Interfaces-to-Make-Applications-Resilient](http://www.codeproject.com/Articles/160441/Using-C-Interfaces-to-Make-Applications-Resilient)它提供了一种生成类热键的好方法，但我正在进入试图实现这个功能真是一团糟。

我应该怎么办？（我不想使用 Autohotkey 顺便说一句）

有没有比上面的链接更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:58:58.397

据我所知，没有其他方法可以在没有 WinApi 的 pinvoke 的情况下创建全局热键。检查 wpf： http: [//outcoldman.com/en/blog/show/240](http://outcoldman.com/en/blog/show/240)

# liferay - 如何通过修改经典主题创建 LifeRay 主题？

> ID：13846116
> 
> 赞同：0
> 
> 时间：2012-12-12T18:19:05.687
> 
> 标签：liferay

我想创建自定义 liferay 主题。在教程中说我要将目录从经典主题复制到`_diff`我的主题文件夹。但我找不到经典主题文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:07:31.370

如果您已经使用 maven（如果您使用的是 maven）创建了 liferay-theme 项目，如下所示

```
mvn archetype:generate \
-DarchetypeArtifactId=liferay-theme-archetype \
-DarchetypeGroupId=com.liferay.maven.archetypes \
-DarchetypeVersion=6.1.0 \
-DartifactId=sample-theme \
-DgroupId=com.liferay.sample \
-Dversion=1.0-SNAPSHOT 
```

然后只需查看 ./target/liferay-theme/work 文件夹。啊，就是这样。

无需实际*编译*它——Liferay 会在maven 插件`theme-merge`阶段合并您的主题应该应用于经典主题的任何更改。`liferay`它的工作原理很像 maven 叠加层，因此您可以忽略不打算更改的经典主题中的每个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T13:55:40.487

There is no classic theme folder. Simply make copies of the /css /images /js and /templates folder from /docroot and put them into the /_diffs folder.

Then you start making all your edits in the /_diffs folder copies. When the project is built via ANT, it overwrites the files in the root /docroot folders you copied.

If you want to embed images in a theme, put them in /docroot/_diffs/images/custom and use this code.

```
<img src="$themeDisplay.getPathThemeImages()/custom/logo.png" id="splash_logo" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T04:23:54.727

您可以在 liferay 中创建新主题，而无需修改默认的 liferay 主题。

使用以下链接创建主题。

[https://help.liferay.com/hc/en-us/articles/360035353731-Introduction-to-Creating-a-Theme](https://help.liferay.com/hc/en-us/articles/360035353731-Introduction-to-Creating-a-Theme)

这对于搜索自定义 liferay 主题的人很有用。

并转到管理员帐户右上角的设置图标，然后单击`look-and-feel`-> 定义此页面的特定外观。-> 更改当前主题

# javascript - 重新排列 javascript 对象 - 使用 .sort() 的键不会保留在正在排序的数组上

> ID：13846120
> 
> 赞同：1
> 
> 时间：2012-12-12T18:19:17.197
> 
> 标签：javascript, jquery, arrays, sorting

```
var tagged={"tagged":[
{"positionX":11,"positionY":13},
{"positionX":12,"positionY":18},
{"positionX":10,"positionY":20}
]}; 
```

所以我有这个对象，

我需要重建它，使其最终看起来如下：

```
var tagged={"tagged":[
{"positionX":10,"positionY":20},
{"positionX":11,"positionY":13},
{"positionX":12,"positionY":18}
]}; 
```

按位置 X ASC 排序。

我试过了：

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
        var tagged={"tagged":[
        {"positionX":11,"positionY":13},
        {"positionX":12,"positionY":18},
        {"positionX":10,"positionY":20}
        ]};

        tagged=tagged.tagged;

        var newtagged=new Array();
        for (var i = 0; i < tagged.length; i++) {
        newtagged[i]=tagged[i].positionX;   
        }

        var sorted=newtagged.sort(function(a,b){return a-b});

        $(sorted).each(function(k,v){   
        alert(v);
        });
</script> 
```

确实有一个成功的排序，但新的“排序”数组中的键不正确。

所以我无法根据键的原始读取来检索原始对象中的所有正确值，我的意思是，如果没有排序的原始键，我不知道排序后的“positionX”属于什么，这样我就是无法在标记的数组中检索其对应的位置 Y。.sort(函数(){}); 将新键分配给排序数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:23:32.550

如果我正确理解您的问题，您希望根据 positionX 的值对标记进行排序。如果是这种情况，您可以简单地传递一个函数来比较属性。

```
var sorted=tagged.sort(function(a,b){return a.positionX-b.positionX}); 
```

# wolfram-mathematica - 在 Manipulate 中绘制 NDSolve

> ID：13846121
> 
> 赞同：4
> 
> 时间：2012-12-12T18:19:20.687
> 
> 标签：wolfram-mathematica

我有以下工作 Mathematica 代码：

```
ODENInit[n_, xIni_] := 
    Join[{x[1][0] == xIni}, Table[x[i][0] == 0, {i, 2, n}]]
ODEN[n_] := 
    Join[{x[1]'[t] == k1 - k2 x[1][t]}, 
    Table[x[i]'[t] == k1 x[i - 1][t] - k2 x[i][t], {i, 2, n}]]
ODENVars[n_] := Table[x[i][t], {i, 1, n}];

Manipulate[
    Module[{sol}, 
        sol = NDSolve[
            Join[ODEN[10], ODENInit[10, 0]] /. {k1 -> mk1, k2 -> mk2}, 
                 ODENVars[10], {t, 0, 10}];
        Plot[Evaluate@Table[x[i][t] /. sol, {i, 1, 10}], {t, 0, 10}]], 
    {{mk1, 1}, 0.1, 10, .1}, {{mk2, 1}, 0.1, 10, .1}] 
```

有什么方法可以重写 Manipulate 部分，这样我就不需要将 k1 和 k2 参数重新分配给虚拟参数，这里是 mk1 和 mk2？感谢您提前提供任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:28:08.687

是的，只需让它们成为 function 的参数`ODEN`。还有几点需要改进代码：

1) 使用`Initialization`引入函数使代码自可靠

3）`ControlType -> None`用于引入一个虚拟的本地化变量以避免额外的`Module`内部`manipulate`- 因为无论如何都会围绕它的内容进行`Manipulate`包装。`DynamicModule`

```
Manipulate[

 sol = NDSolve[Join[ODEN[10, k1, k2], ODENInit[10, 0]], 
   ODENVars[10], {t, 0, 10}];

 Plot[Evaluate@Table[x[i][t] /. sol, {i, 1, 10}], {t, 0, 10}],

 {{k1, 1}, 0.1, 10, .1},
 {{k2, 1}, 0.1, 10, .1},
 {sol, ControlType -> None},

 Initialization :> {

   ODENInit[n_, xIni_] := 
    Join[{x[1][0] == xIni}, Table[x[i][0] == 0, {i, 2, n}]],

   ODEN[n_, k1_, k2_] := 
    Join[{x[1]'[t] == k1 - k2 x[1][t]}, 
     Table[x[i]'[t] == k1 x[i - 1][t] - k2 x[i][t], {i, 2, n}]],

   ODENVars[n_] := Table[x[i][t], {i, 1, n}]

   }] 
```

![在此处输入图像描述](../Images/51fa449c2d0c4211e17b8c2283cd66e8.png)

要回答您的评论，如果您真的很容易`k`在函数之外保持全局定义，那么这将是：

```
Manipulate[

 Block[{sol, k1 = mk1, k2 = mk2},
  sol = NDSolve[Join[ODEN[10], ODENInit[10, 0]], 
    ODENVars[10], {t, 0, 10}];
  Plot[Evaluate@Table[x[i][t] /. sol, {i, 1, 10}], {t, 0, 10}]],

 {{mk1, 1}, 0.1, 10, .1}, {{mk2, 1}, 0.1, 10, .1}] 
```

# javascript - 有没有办法使用 javascript 在 Windows 中获取 ProgramData 的路径？

> ID：13846125
> 
> 赞同：0
> 
> 时间：2012-12-12T18:19:56.343
> 
> 标签：javascript

我需要使用 javascript 在 Windows（XP、Vista、7、8）中为当前用户获取 APPDATA 的路径。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:21:48.497

简短的回答是否定的。但是，您可以使用 activex 来获取它。但这仅适用于 IE

# erlang - erlang function : 验证参数的格式

> ID：13846128
> 
> 赞同：1
> 
> 时间：2012-12-12T18:20:15.857
> 
> 标签：erlang

我从二郎开始

目前我有一个函数，它以帐号为参数

在这个函数中我做了测试：

测试这个数字是否为空 测试字符数是否等于 9 字符

测试这些字符是数字还是字母

这个函数的结构是：

```
 checkNumCompte(numeroCompte) ->
if numeroCompte==null
...... 
```

我认为我们应该开发一个子功能第一个是验证字符的数字第二个是验证字符的格式

最好的问候

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:14:43.790

erlang 中的用法是使用 try 将变量与模式匹配并使用警卫。例如，对于您给出的 3 个案例，您可以编写如下内容：

```
checkNumCompte(C=[_,_,_,_,_,_,_,_,_]) -> % check that C is a list of 9 elements
                                         % you could imagine to test that 2 charaters are equal using a 
                                         % pattern like [_,_A,_,_A,_,_,_,_,_]
    Resp = case lists:foldl(
                     fun(X,A) when A == true andalso X >= $a andalso X =< $z -> A;
                        (_,_) -> false end, 
                        %% a function to test the set of character, you can call any function here
                     true,
                     C) of
               true -> ok;
               _ -> badNumCompte
            end,
    {Resp,C};
checkNumCompte(C) -> %% if the variable is not a list or has a bad length 
    {badNumCompte,C}. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:29:35.613

谢谢你的回答，我试试这个代码：

```
-export([check_num_compute/1]).
check_num_compute(NumeroCompte) when length(NumeroCompte) == 9->
    case io_lib:printable_unicode_list(NumeroCompte) of
        true -> validate_contents(NumeroCompte);
        false -> {error, bad_arg}

    end;
check_num_compute(_) ->
io:format("count number incorrect\n").
validate_contents([]) -> io:format("count number coorect\n"); 
validate_contents([C|Cl]) when C >= $0 ,C  =< $9 ->
validate_contents(Cl);
validate_contents(_) ->io:format("count number correct but it s not only number\n"). % if any character isn't a number than bad_arg, 
```

但是此代码不会测试 NumeroCompte 是否为空

当它为空时，我想显示此消息：

帐号为空

而且我想知道如何做同样的事情（以显示我的消息（正确，空，不正确..）与您的响应的第二个代码：

```
check_num_compute_version2(NumeroCompte2) when length(NumeroCompte2) == 9->
    case io_lib:printable_unicode_list(NumeroCompte2) of
        true -> validate_contents2(NumeroCompte2);
        false -> {error, bad_arg}
    end;
check_num_compute_version2(_) ->
    {error, bad_arg}.

validate_contents2(NumeroCompte2)->
    [] == lists:dropwhile(fun(C)->C >= $0 andalso C =< $9 end,
                          NumeroCompte2). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:51:04.370

我会尝试以下方法。我不知道您是否需要帐号仅是数字还是仅是字母，所以我随意决定您希望它只是数字。

**编辑以匹配您的评论 ***

```
check_num_compute(NumeroCompte) when length(NumeroCompte) == 9->
    case io_lib:printable_unicode_list(NumeroCompte) of
        true -> validate_contents(NumeroCompte);
        false -> {error, not_string_of_numbers}
    end;
check_num_compute(NumeroCompte) when is_list(NumeroCompte) ->
    {error, wrong_length};
check_num_compute(_) ->
    {error, not_string}.

validate_contents(NumeroCompte)->
    AcceptFn = fun(C)->C >= $0 andalso C =< $9 end,
    case lists:dropwhile(AcceptFn, NumeroCompte) of
        [] -> true;
        _ -> {error, not_all_numbers}
    end.

19> t:check_num_compute([1,2,3,4,5,6,7,8,9]).
    {error,not_string_of_numbers}
20> t:check_num_compute("123456789").
    true
21> t:check_num_compute([1,2,3,4,5,6,7,8,9]).
    {error,not_string_of_numbers}
23> t:check_num_compute("12345678f").
    {error,not_all_numbers}
25> t:check_num_compute([]).
    {error,wrong_length} 
```

如果您希望帐号仅是字母，那么对 validate_contents/1 进行简单更改就足够了。

此外，与 list:dropwhile/2 方法相比，您可能更喜欢以下方法：

```
validate_contents([]) -> 
    true;
validate_contents([C|Cs]) when C >= $0, C =< $9 ->
    validate_contents(Cs);
validate_contents(_) -> 
    {error, bad_arg}. 
```

# apache-flex - 在 Flex 中的 dataProvider 更新上删除了 selectedItem

> ID：13846135
> 
> 赞同：1
> 
> 时间：2012-12-12T18:20:45.827
> 
> 标签：apache-flex, selecteditem, updating, dataprovider, listcollectionview

在**flex**中，我使用了一个组件，该组件从其 dataProvider ( **ListCollectionView** ) 中显示特定项目 (selectedItem 字段)。

我的 dataProvider 的元素可以通过不同的方式进行编辑。每次编辑时，都会发送一个更新事件，从而更新 dataProvider 集合（ListCollectionView:: **listChangeHandler**）。

在此过程中，如果我的 selectedItem 是已编辑的元素，它会被删除（通过 ListCollectionView:: **moveItemInView**设置为 null ），即使已编辑的字段在任何地方都没有使用。

**有没有办法避免这种情况？**

更具体地说，不必先保存它，让它丢失并在之后恢复它（这在此处几乎不可行）

* * *

**编辑：** 好的，我想我可以进一步解释：

在我的代码中，我对绑定到 dataProvider 的列表中的一项的属性进行了处理。我不知道具体原因，可能是因为项目的类是 [bindable]，这会引发更新事件。

此事件被 ArrayList::itemUpdateHandler 捕获，并将其分派给 ListCollectionView::listChangeHandler。此时，事件“kind”是“update”，这对我来说似乎没问题……</p>

但是从那里开始，它转到**ListCollectionView::moveItemInView**（我认为这是有意义的，因为如果列表已排序，该项目应该必须更新其位置）。此函数将项目从其以前的位置移除并将其添加到其新位置。

当它删除它时，它会发送一个带有“remove”类型的新事件。这就是问题所在：我的组件侦听它使用的数据的删除事件，如果删除了这个元素，则删除它的 selectedItem。

我认为在调用 moveItemInView 时出现问题：ListCollectionView::handlePropertyChangeEvents 中的**调用**（由 listChangeHandler 调用）是：moveItemInView(updateEntry.item, updateEntry.item, eventItems); （其中 updateEntry.item 是列表的修改项，而 eventItems 是一个空数组）

而它的**原型**是：私有函数 moveItemInView(item:Object, dispatch:Boolean = true, updateEventItems:Array = null):void

那是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:34:56.057

你如何更新数据提供者？如果是这样

```
list.dataProvider = newDataProvider 
```

然后你看到的行为是预期的。从 List 的角度来看，您已经完全替换了 dataProvider，并且 List 无法知道旧的 selectedItem/selectedIndex 是否仍然有效。我认为它做出了正确的假设，假设它不是。

还是使用 dataProvider 的 refresh 方法更新 dataProvider：

```
list.dataProvider.refresh(); 
```

在这种情况下，dataProvider 的长度可能会改变；它的元素也是如此。在这种情况下，将分派一个 collectionChange 事件，并且列表应该有一个方法来处理 collectionChange 事件。List 无法知道之前选择的项目是否会在新列表中；它的索引是否会改变，或者即使旧的 selectedIndex 仍然有效。因此， selectedItem 被重置。

通常要在任何一种情况下保留 selectedItem/selectedIndex，您应该存储对它的引用并在 dataProvider 更改后将其重置：

```
mySelectedItem = list.dataProvider.selectedItem;
// update dataProvider Here
list.dataProvider.selectedItem = mySelectedItem; 
```

如果您只是更新 dataProvider 中的项目；那么 selectedIndex/selectedItem 不应该受到影响。

# jquery - 更改 JQuery UI 选项卡名称不适用于 Internet Explorer

> ID：13846137
> 
> 赞同：0
> 
> 时间：2012-12-12T18:20:55.973
> 
> 标签：jquery, jquery-ui, internet-explorer-9

在 Firefox 和 Chrome 中，我可以动态更改 JQuery UI 选项卡上的文本：

```
$('#tabs ul:first li:eq(' + tabNumber + ') a').append(" ( " + counter + " )"); 
```

但是，这不适用于 Internet Explorer 9。 .append() 函数不是罪魁祸首，似乎是 IE 找不到`'#tabs ul:first li:eq(' + tabNumber + ') a'`.

有谁知道可能的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:58:04.987

通过将 tabNumber 设置为修复

```
var tabNumber = tabId.charAt( tabId.length-1 ) - 1; 
```

代替

```
var tabNumber = tabId[tabId.length - 1] - 1; 
```

后者似乎不适用于 IE。

# android - android意图不适用于wifi，声音，蓝牙？

> ID：13846143
> 
> 赞同：2
> 
> 时间：2012-12-12T18:21:21.970
> 
> 标签：android, android-intent, settings, android-wifi

我正在尝试调用显示 WiFi、声音和蓝牙但不起作用的设置：我将把我的代码和 logcat

我想在这里使用看图片![在此处输入图像描述](../Images/f671e33453fd1e008ea4c088536a49cc.png)

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    setContentView(R.layout.wifi);

    Button wifi =(Button)findViewById(R.id.wifi);
    wifi.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Intent intent = new Intent(android.provider.Settings.AUTHORITY);
            intent.putExtra(Settings.EXTRA_AUTHORITIES, new String[] {                      

                    android.provider.Settings.ACTION_BLUETOOTH_SETTINGS
                                });
            intent.putExtra(Settings.EXTRA_AUTHORITIES, new String[] {                      

                    android.provider.Settings.ACTION_WIFI_SETTINGS
                                });
            startActivity(intent);
        }
    });
} 
```

> 日志猫

```
12-13 10:36:04.229: E/AndroidRuntime(1167): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=authorities cat=[android.settings.BLUETOOTH_SETTINGS,android.settings.SOUND_SETTINGS,android.settings.WIRELESS_SETTINGS] }
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.app.Activity.startActivityForResult(Activity.java:3217)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.app.Activity.startActivity(Activity.java:3324)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at com.example.settings.WifiActivity$1.onClick(WifiActivity.java:30)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.view.View.performClick(View.java:3511)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.view.View$PerformClick.run(View.java:14109)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.os.Handler.handleCallback(Handler.java:605)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.os.Looper.loop(Looper.java:137)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at java.lang.reflect.Method.invoke(Method.java:511)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-13 10:36:04.229: E/AndroidRuntime(1167):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:48:27.170

您需要像这样使用 EXTRA_AUTHORITIES：

```
intent.putExtra(Settings.EXTRA_AUTHORITIES, new String[] {
    Calendar.AUTHORITY
}); 
```

并且 intent.addCategory 不用于此。仅使用一个 android.provider.Settings。按意图键入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:31:04.390

它在说`ActivityNotFound`。所以问题一定出在这一行。

```
Intent intent = new Intent(android.provider.Settings.EXTRA_AUTHORITIES); 
```

我觉得你应该试试

```
startActivity(new Intent(Settings.ACTION_SETTINGS)); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-07-20T18:18:56.300

```
No Activity found to handle Intent { 
    act=android.settings.WIFI_DISPLAY_SETTINGS 
}

onCreate    XT1706
onCreate    MobileName=XT1706
onCreate    WIFI_DISPLAY_SETTINGS is null
onCreate    android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.settings.WIFI_DISPLAY_SETTINGS }
onCreate    XT1706
onCreate    MobileName=XT1706
onCreate    WIFI_DISPLAY_SETTINGS is null
onCreate    android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.settings.WIFI_DISPLAY_SETTINGS }
onCreate    XT1706 
```

# java - 无法通过 JSON 按类别查找 liferay 文章

> ID：13846150
> 
> 赞同：2
> 
> 时间：2012-12-12T18:21:54.377
> 
> 标签：java, json, liferay, liferay-6

我正在尝试`liferay`通过`JSONWS`服务按类别查找文章。我能够找到正确的`Vocabulary`，然后`Categories`是`Vocabulary`，但我无法确定如何在任何其他 API 中实际使用该信息。

我查看了所有`JournalArticle`调用，没有引用任何类型`Vocabulary`或`Category`参数。Google 展示了如何通过 java[从文章中检索类别。](http://www.liferay.com/community/forums/-/message_boards/message/10984882)

我找不到通过 JSON 调用获取文章类别的方法。为什么JSON api 中缺少`Category`和信息？`Vocabulary`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:15:04.323

众所周知，Liferay 不会向 JSON api 公开所有本地服务。因此，我们通常会创建自己的 REST servlet，其中包含必要的方法。使用 Spring 创建这些类型的 servlet 非常容易，并且您可以完全控制要提供的 API...

# ibm-connections - 为什么 IBM Connections Mail 会加载 HTML 版本而不是 Embedded Experience 版本的电子邮件？

> ID：13846153
> 
> 赞同：0
> 
> 时间：2012-12-12T18:22:09.087
> 
> 标签：ibm-connections, ibm-sbt

我正在查看 ACME Airlines 演示，一切似乎都运行良好，除了发送给预订航班的审批人的电子邮件是使用 HTML 部分而不是嵌入式体验呈现的。

这就是我得到的：

![IBM Connections 邮件](../Images/f6fc0c7fcdd0de3bd1d5022cd2b2ff5e.png)

MIME 消息信息：

```
Received: from 192.168.0.64 ([192.168.0.64])
by dominoww.demos.ibm.com (Lotus Domino Release 8.5.3)
with ESMTP id 2012121210521758-3 ;
Wed, 12 Dec 2012 10:52:17 -0500 
Date: Wed, 12 Dec 2012 09:52:19 -0600 (CST)
From: wpadmin@demos.ibm.com
To: gbandini@demos.ibm.com
Cc: lsuarez@demos.ibm.com
Message-ID: <1781867189.1.1355327539212.JavaMail.wpadmin@demos.ibm.com>
Subject: Travel Request For Lucille Suarez
MIME-Version: 1.0
X-MIMETrack: Itemize by SMTP Server on domino/ibm(Release 8.5.3|September 15, 2011) at
12/12/2012 10:52:17 AM,
Serialize by Notes Server on domino/ibm(Release 8.5.3|September 15, 2011) at
12/12/2012 11:06:04 AM,
Serialize complete at 12/12/2012 11:06:04 AM
Content-Type: multipart/alternative; 
boundary="----=_Part_0_168610966.1355327539158"

------=_Part_0_168610966.1355327539158
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=us-ascii

Please approve the travel request for Lucille Suarez at http://acmeairlines.com:8080/acme.social.sample.webapp/js/../
------=_Part_0_168610966.1355327539158
Content-Transfer-Encoding: 7bit
Content-Type: text/html; charset=us-ascii

Please approve the travel request for Lucille Suarez at <a href="http://acmeairlines.com:8080/acme.social.sample.webapp/js/../">Acme Air</a>.
------=_Part_0_168610966.1355327539158
Content-Transfer-Encoding: 7bit
Content-Type: application/embed+json

{"gadget":"http:\/\/acmeairlines.com:8080\/acme.social.sample.webapp\/js\/..\/gadgets\/airlines\/airlines.xml","context": {"ApproverId":"gbandini@demos.ibm.com","FlightId":"101","UserId":"lsuarez@demos.ibm.com"}}
------=_Part_0_168610966.1355327539158-- 
```

我可以检查哪些内容以确定嵌入式体验未加载的原因？

*   gadget.xml 已通过管理界面添加
*   它在操场上运行良好
*   如果我将它注入到活动流中它会起作用
*   小部件管理设置：[屏幕 1](https://imgur.com/nigDe) [屏幕 2](https://imgur.com/IQOle)
*   在 Connections 邮件中打开电子邮件后的控制台：

> [信息] open() 已弃用，请改用 load() 方法。(connectionsww.demos.ibm.com:17) [警告] ActivityCount 无法使用小部件解析：defaultSpinnerController。(socpim:84) [警告] ActivityCount 无法解析。(socpim:84)

*   连接可以到达运行演示应用程序的计算机
*   Connections 服务器已重新启动，并且服务已重新启动多次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:15:56.723

小工具的小部件目录条目中的 Jesse 是否检查了连接邮件先决条件？

![在此处输入图像描述](../Images/894b9f34f60bd3166a56e45860b128d5.png)

# python - 在 Python 2.7 中跟踪期间来自 .egg 的文件的奇怪 co_filename

> ID：13846155
> 
> 赞同：0
> 
> 时间：2012-12-12T18:22:17.063
> 
> 标签：python, egg, python-internals

`frame.f_code.co_filename` 当通过 Python 2.7 解释器而不是eqauls 跟踪（使用 sys.settrace）python .egg 执行时，`<path-to-egg>/<path-inside-egg>`类似于`build/bdist.linux-x86_64/egg/<path-inside-egg>`

它是一个错误吗？以及如何揭示真正的彩蛋路径？

在 Python 2.6 和 Python 3 中，一切都按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:27:00.953

不，这不是错误。Eggs 在创建时会将其字节码编译到`build/bdist.<platform>/egg/`路径中，您会看到它反映在`co_filename`变量中。`bdist`代表二进制分发。

# jquery - 为什么我的页面比元素高？

> ID：13846158
> 
> 赞同：0
> 
> 时间：2012-12-12T18:22:23.220
> 
> 标签：jquery, html, css, browser, height

我很震惊。在 Internet Explorer 和 Mozilla Firefox 中，这个页面真的很高！我一直在使用 jQuery 将元素的高度设置为几乎与元素一样高。它在 Chrome 中看起来很完美，但 IE 和 FF 呈现一个非常高的页面。更奇怪的是，当使用 Firefox 的检查器时，我可以看到页面超出了元素的高度！

jQuery：

```
(function($){
   var resize = function(){
      var height = $('html').height();
      $('#wrap > div').height(height-38);
      $('html').height(height); // Added this to try and fix the height
   };
   $(window).resize(resize).load(resize);
})(jQuery); 
```

HTML 布局：

```
<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8" />
      <!-- ... --->
   </head>
   <body>
      <div id="wrap"><div> <!-- I want the child of #wrap to be the height of the entire page. -->
         <div id="left"><div>
            <!-- ... -->
         </div></div>
         <div id="main">
            <!-- ... -->
            <div class="clear"></div>
            <div id="body">
               <!-- ... -->
            </div>
         </div>
      </div></div>
   </body>
</html> 
```

CSS：

```
html{height: 100%;}
body{background: url('images/body.jpg') no-repeat fixed left top; border: 8px solid #BBB0A2; border-width: 8px 0 0 6px; min-width: 902px;}
#wrap{max-width: 1130px;}
#wrap > div{float: right;}
#main{float: left; width: 630px; height: 100%; padding: 10px 20px 20px 20px; background: #FFFFFF;}
#body{margin-top: 20px; font: 13px/18px Georgia, serif; color: #AE9073; position: relative;} 
```

这是我正在尝试使用的网站：[http ://www.phoenixarizonashutters.com/](http://www.phoenixarizonashutters.com/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:01:36.813

我不确定我是否理解您的要求，但您的代码有很多内联样式，这是一种不好的做法。

你有一个受 jQuery 函数影响的 div.clear

```
$('#wrap > div').height(height-38) 
```

为了防止您的选择器选择 .clear 您可以使用 :not 方法。

```
jQuery $('#wrap > div:not(".clear")').height(height-38) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:15:47.103

您包含的代码没有说明问题，但如果我访问您的网站，我可以看到这两个元素：

```
<div style="height: 695px;">...</div>
<div class="clear" style="height: 695px;"></div> 
```

您的清除 div 可能不需要高度 - 删除导致该高度的任何原因，您的网站就会变得更合理。

# c# - Base 64 编码问题

> ID：13846163
> 
> 赞同：0
> 
> 时间：2012-12-12T18:22:40.260
> 
> 标签：c#, .net, base64

我有一些 Base64 编码的数据作为字节数组，我试图将其转换回原始格式。

数据到达我的函数编码两次。我想要实现的是：

```
string encoded = "some base 64 string";
byte [] data = System.Convert.FromBase64String(System.Convert.FromBase64String(encoded)); 
```

上面的陈述当然是错误的，因为我无法弄清楚要使用哪种功能组合，并且在尝试时遇到了 unicode 问题。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:48:49.273

如果我正确理解您的问题，那么您正在尝试这样做：

*   将base64字符串转换为字节数组
*   将字节数组转换为 ASCII 字符串
*   使用 base64 将该字符串转换为字节数组

在这种情况下，您的声明将如下所示：

```
byte[] twiceDecoded = Convert.FromBase64String(Encoding.ASCII.GetString(Convert.FromBase64String(encoded))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:47:02.667

使用您的示例数据和下面的代码，我可以获得`docx`（也`zip`）文件（*`50 4B 03 04 14 00`*）的签名。如果您发布的示例是从`encoded`字符串的开头开始的，那么下面的代码很可能会起作用。

```
byte[] buf = Convert.FromBase64String(encoded);
var hex2 = Encoding.Unicode.GetString(buf);
byte[] data = Convert.FromBase64String(hex2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:46:16.217

我取决于您喜欢哪种输出格式。这是一个小示例代码，它解密您的 base64 值并返回一个 UTF8 格式的字符串：

```
public static string DecodeFrom64(string value)
{
    byte[] encodedDataAsBytes = System.Convert.FromBase64String(value);
    return System.Text.Encoding.UTF8.GetString(encodedDataAsBytes);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:46:46.110

如果我理解正确，你有一个`byte[]`包含 base64 编码数据的，并且你想得到一个`string`包含原始字符串的。

您要做的第一件事是将其`byte[]`放入`string`. 假设您知道数组中有多少字节，并且知道使用了哪种文本编码（即 UTF-8、Unicode、ASCII 等），您可以这样写：

```
string base64String = Utf8Encoding.GetString(bytes); 
```

用正确的文本编码代替`Utf8Encoding`那里。如果字符串确实是 base64，那么 Utf8Encoding 应该可以工作。或者可能是 Unicode 编码之一，如果它是每个字符 2 个字节。

然后，您应该能够像这样获得原始字符串：

```
string originalString = Convert.FromBase64String(base64String); 
```

# ruby-on-rails-3 - Rails 并发问题 - 如何使用锁

> ID：13846172
> 
> 赞同：0
> 
> 时间：2012-12-12T18:23:14.190
> 
> 标签：ruby-on-rails-3, concurrency

我有一个执行一些长任务的 lib 类（“更新程序”），这个任务可以手动启动（在浏览器中）或每 2 小时启动一次（我已经实现了 gem，每 2 小时执行一次这个任务的计划）。

看到这些任务在数据库上做了很多工作，我认为可能会发生一些并发错误（例如，如果调用 when 尚未工作）。我说对了吗？

我想到了一个使用互斥锁的解决方案，我的 Updater 类有一个伪代码，如下所示：

```
module Updater
  def start
    #do some job
  end
end 
```

我认为一个正确的解决方案是这样的

```
module Updater
  def start
    mutex.lock
       #do some job
    mutex.unlock
  end
end 
```

我的解决方案正确吗？

请提供更多关于并发的信息（例如如何在 Rails 中正确使用互斥锁，我必须要求什么等）？我已经搜索过，但没有找到任何很好的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:15:15.630

我认为使用[Ruby Mutex](http://www.ruby-doc.org/core-1.9.3/Mutex.html)的正确方法是获得一个锁，运行一个代码块，然后再次释放锁，即结合解锁调用锁......

```
@mutex = Mutex.new
..

def start
  @mutex.lock
  begin
    ..
  ensure
    @mutex.unlock rescue nil
  end
end 
```

或使用同步方法：

```
@mutex = Mutex.new
..

def start
  @mutex.synchronize do
    # do something
  end
end 
```

可以在机架中间件类[Rack::Lock](https://github.com/rack/rack/blob/master/lib/rack/lock.rb)中找到一个示例。但是我不确定它是否对您有帮助，即使您使用诸如 之类的类变量`@@mutex`，因为互斥量/信号量可能不会在不同任务和不同进程之间保留（我假设“任务”是由“rake”启动的不同进程任务”）。Mutex 类对于实现线程安全很有用，因为它实现了一个简单的信号量，可用于协调对来自多个并发线程的共享数据的访问。然而，还有一个[关于线程安全的不错的 RailsCast](http://railscasts.com/episodes/365-thread-safety)（不幸的是只在付费墙后面）。

在您的情况下，它可能有助于在数据库中创建一个全局锁定标志，或者在文件系统中创建一个全局锁定文件，并在进程结束时`touch lock.txt`再次删除它。可以使用 Kernel.system 或 %x在 Ruby`rm lock.txt`中执行这些[shell 命令。](http://4loc.wordpress.com/2010/04/01/calling-shell-commands-from-ruby/)如果文件存在`File.exists?("lock.txt")`，则可以暂停更新。

# filesystems - 在 USB 大容量存储类设备上，块大小是否等于集群大小？如何确定 USB 驱动器的簇大小？

> ID：13846174
> 
> 赞同：0
> 
> 时间：2012-12-12T18:23:15.207
> 
> 标签：filesystems, usb-drive, scsi

在 USB 大容量存储类设备（usb 棒，例如 4gb）上，如何确定“集群”大小。

这里的集群，取自 Fat32 文件系统的上下文。

使用 SCSI 命令，我可以确定逻辑块大小，即 512 字节。这与集群大小相同吗？这可以被视为集群大小吗？

对于这样的无盘设备，集群大小仍然相关吗？

最后，在这种情况下，逻辑块和集群之间的关系是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:44:48.730

1.  逻辑块是设备/设备驱动程序决定向操作系统公开的任何内容，作为传输的基本单元。注意：在 SSD 的情况下，这是非常低效的。
2.  用于簿记/性能目的的文件系统根据集群管理分配，集群通常是两组逻辑扇区的幂。更大的集群意味着更少的簿记，但更大的内部碎片。

# c# - LinqtoSql 中的链接方法：如何获取实体上下文

> ID：13846180
> 
> 赞同：0
> 
> 时间：2012-12-12T18:23:44.973
> 
> 标签：c#, linq, generics, audit

我有一个正在使用的审计库。我相信这个问题更多地与泛型有关，因为我不确定如何编写与所讨论的方法类似的方法。

我有以下“链接”方法，似乎无法获取查找表的上下文：

```
AuditProperty(m => m.StationTypeId)
.GetValueFrom(stationtypeId => GetStationType(stationtypeId))
.WithPropertyName("StationType"); 
```

这个想法是将一个 ID 传递给 GetValueFrom() linq 方法，并从（在这种情况下）stationtype 表中返回一个字符串。我已经通过在运行时将静态表分配给实际的 Stationtype 表（下面是 stationTypeTable）来使其工作，因此我可以执行如下查找：

```
public string GetStationType(int? stationTypeID)
        {

            var stationtype = stationTypeTable.FirstOrDefault(st => object.Equals(st.Id, stationTypeID));
            return stationtype != null ? stationtype.Value : String.Empty;
        } 
```

我知道这是不好的做法。当某些主键 ID 不存在时，我遇到了异常。但是，当我调用 linq 方法时，我实际上似乎无法获得任何表的上下文。知道如何正确地做到这一点吗？linq 方法如下供您参考：

```
public class EntityAuditConfiguration<TEntity> : EntityAuditConfiguration
{
    /// <summary>
    /// Customize the default behavior when auditing a specific property
    /// </summary>
    public CustomPropertyAuditor<TEntity, T> AuditProperty<T>(Expression<Func<TEntity, T>> propertySelector)
    {
        var config = new CustomPropertyAuditor<TEntity, T>();
        CustomizedProperties.Add(propertySelector.ToPropertyInfo(), config);
        return config;
    }

    /// <summary>
    /// Include an association (relationship) table to audit along with the parent table
    /// </summary>
    public RelatationshipConfiguration<TChildEntity, TEntity> AuditMany<TChildEntity>(Expression<Func<TEntity, IEnumerable<TChildEntity>>> selector)
        where TChildEntity : class
    {
        var relationship = new RelatationshipConfiguration<TChildEntity, TEntity>();
        ((IEntityAuditConfiguration) this).Relationships.Add(relationship);
        return relationship;
    }
}

public class CustomPropertyAuditor<TEntity, TProp> : IPropertyAuditor
{
    private Expression<Func<TProp, string>> _propertySelector;
    private string _propertyName;

    public CustomPropertyAuditor<TEntity, TProp> WithPropertyName(string propertyName)
    {
        if (propertyName == null) throw new ArgumentNullException("propertyName");
        _propertyName = propertyName;
        return this;
    }

    public CustomPropertyAuditor<TEntity, TProp> GetValueFrom(Expression<Func<TProp, string>> valueSelector)
    {
        if (valueSelector == null) throw new ArgumentNullException("valueSelector");
        _propertySelector = valueSelector;
        return this;
    }

    AuditedProperty IPropertyAuditor.AuditProperty(PropertyInfo property, object oldValue, object newValue)
    {
        var auditedProperty = new AuditedProperty(_propertyName ?? property.Name);
        var func = _propertySelector.Compile();

        if (oldValue != null)
            auditedProperty.OldValue = func.DynamicInvoke(oldValue).ToString();

        if (newValue != null)
            auditedProperty.NewValue = func.DynamicInvoke(newValue).ToString();

        return auditedProperty;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:41:18.283

我只是创建了一个列表并将每一行添加到我类的 oncreate() 方法中的列表中。这些查找表应该在上下文中可用，我不应该创建单独的查找列表（但它现在可以 100% 工作）。有人有其他更好的想法吗？

# css - 将内部 div 位置更改为固定比外部宽度扩展更多

> ID：13846181
> 
> 赞同：0
> 
> 时间：2012-12-12T18:23:47.290
> 
> 标签：css, html, less

我正在为 Wordpress 主题创建一个固定的滑动侧边栏，因此我必须从[本教程](http://jqueryfordesigners.com/fixed-floating-elements/)中创建一个固定位置的侧边栏。

外部门目前的性质是相对的。当我尝试将其更改为固定时，它正在更改侧边栏的位置。因此，我尝试在以下部门之后再创建一个部门：

```
<div id="sidebar1" class="sidebar fourcol last clearfix" role="complementary"> 
```

带有 id 侧边栏包装器。

当我为 sidebar-wrapper 创建 css 属性时，`position:fixed;`它实际上可以工作，但我看到它的宽度是 489 像素，超出了它的外部 div 宽度 359 像素。由于外部 div 宽度是动态的，我无法为内部 div 创建宽度属性。

[请在此处找到代码片段](http://jsbin.com/olaxav/1/edit)。

问题是因为固定位置的 div 试图使用浏览器的所有可用空间，而不是继承父 div 的宽度。当我尝试声明继承它正在更改为 419 像素时，我很困惑它是如何获得该像素数的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:36:34.727

我已经使用 jQuery 来计算侧边栏的宽度，并使用 jQuery 动态定义了固定分区的 css 属性宽度，它解决了我的问题。

# java - 如何在java中解析文本文件时在行之间跳过

> ID：13846182
> 
> 赞同：3
> 
> 时间：2012-12-12T18:23:50.013
> 
> 标签：java, parsing, text-files

我正在编写一个编译器程序来读取文本文件。文本文件中的一些命令会告诉我跳回文本文件中的某一行并从那里读取。事实上，这段代码我一次读取一行，直到文档结束。无论如何让解析器向后或向前跳到文本文件中的某一行？假设我目前在第 8 行，指令是返回并阅读第 4 行？

这是我解析文件的代码。

```
try {
    FileInputStream fstream = new FileInputStream("compilers.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
    String strLine;

    while ((strLine = br.readLine()) != null && checker == false) {
        // rest of code in here
    }
    in.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:27:12.280

有 Stream`mark()`和`reset()`函数，但使用`BufferedStream`s 时可能会失败。最好将整个文件读入一个`ArrayList`，每行一个条目。

ArrayList 的示例：

```
List<String> lines = new ArrayList<String>();
while ((strLine = br.readLine()) != null) {
    lines.add(strLine);
}

// later get line by:
// first line has index 0    
String line = lines.get(8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:31:03.267

你可以这样做`Map`

```
HashMap<Integer, String> 
```

键是您的行号，值是您的行。因此，您可以在需要时逐行获取。

```
Map<Integer, String> lineMap = new HashMap<Integer, String>();
int i = 1;
while ((strLine = br.readLine()) != null && !checker) {
    lineMap.put(i, strLine);
    // do what you want
    // if you are in line 8 (i=8)
    // get my line 4 (lineMap.get(4))
    i++;
} 
```

# android - android：显示错误的方法

> ID：13846185
> 
> 赞同：1
> 
> 时间：2012-12-12T18:23:57.133
> 
> 标签：android

是否有推荐的“Android 方式”向用户显示错误？

例如，假设我在我的应用程序/服务中捕获了一个异常并且需要通知用户 - 如果正在显示应用程序，这是显示 toast/弹出对话框的常用方法，如果在通知栏中显示通知应用程序在后台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:27:26.960

当然，取决于错误的类型。但永远不要在通知栏中显示错误。

作为一般规则，请尝试在不通知用户的情况下优雅地继续执行应用程序。

如果错误导致您的应用无论如何都无法继续执行用户要求它执行的操作，请显示 Toast。

编辑：正如我在回复中的评论中提到的，您可以根据错误的严重程度显示 AlertDialog 或 Toast。

然而，在我看来，使用通知来显示错误消息仅适用于非常特定的用例，例如下载器或音乐播放器，其中应用程序在后台执行用户创建的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:30:49.193

如果您想提供您的任何自定义消息，那么您正在回答您的问题，这可以通过使用 Toast 来完成。

```
try {
///stuffs
} catch(IOException ioe) {
Toast.makeT......
} 
```

# java - 模板处理 - 在字符串中查找变量引用

> ID：13846188
> 
> 赞同：3
> 
> 时间：2012-12-12T18:24:18.683
> 
> 标签：java, regex, string

我正在构建一个非常简单的模板处理器。它只能替换变量的值。

我想我会首先将字符串分解成部分（常量部分和变量引用）。然后我会用相应的值替换所有变量引用。最后，我会将所有部分重新连接在一起。

* * *

为了分解字符串，我需要按以下方式对其进行切片。

像这样的字符串

```
"UPDATE {ix:tablename} SET value = value + 1 WHERE {ix:column} = {ix:value}" 
```

应该导致以下数组

```
[
  "UPDATE ",
  "{ix:tablename}",
  " SET value = value + 1 WHERE ",
  "{ix:column}",
  " = ",
  "{ix:value}"
] 
```

我知道这可以通过重复搜索第一个左括号，然后是第一个右括号来完成。但是没有比这更优雅的解决方案（也许是一些正则表达式的魔法？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:28:11.307

您可以使用正则表达式拆分获得所需的数组：

```
MyString.split("(?=\\{ix:)|(?<=\\})") 
```

[（`{`and`}`需要在正则表达式中转义为`\{`and ，因为它是一个 Java 字符串，所以s 需要进一步转义为。）`\}``\``\\`]

即前瞻`{ix:`或后视`}`并在该位置拆分（如果找到）。

如果有可能`}`在其他情况下有效，我可能会采取不同的方法。

## 环顾四周

正则表达式的一个经常被遗忘的方面，特别是在拆分时，是它可以匹配**位置**，也称为零宽度匹配。

大多数人都熟悉位置匹配，例如`^`and `\b`，但很少有人熟悉允许指定临时条件的环视。

当一个正则表达式只包含位置匹配结构时，虽然匹配中不包含任何字符，但正则表达式仍然记录匹配发生的*位置*——大多数字符串操作只需要一个位置和一个长度，长度为 0 仍然允许拆分 (或更换）发生在指定位置。

Lookaheads 和lookbehinds 允许您通过指定子表达式来匹配位置，这些子表达式从正在测试的位置开始在字符串中向前（向前）和向后（向后）检查。

在语法方面，前瞻看起来像`(?=subexpr)`，而后瞻看起来像`(?<=subexpr)`.

有否定的版本 - 当模式必须失败时被认为是成功的 - 分别是`(?!subexpr)`和`(?<!subexpr)`。

Lookarounds 是非捕获的——它们的匹配*不会*像 standard 那样放在反向引用组中`(group)`，尽管它们可以包含反向引用。

### 后视限制

Java* 中的 Lookbehinds 有一个限制，即它们不能是无限长度 - 所以你不能这样做`(?<=\w+)`，而是需要使用具有上限的数字量词，例如`(?<=\w{1,99}`

^(（*几个正则表达式实现没有这个限制；尽管许多有更严格的固定长度限制。）)

Lookaheads 没有这样的限制（当然，出于性能原因，您应该将它们限制为仅匹配所需的内容）。

# php - PHP threading call to a php function asynchronously

> ID：13846192
> 
> 赞同：47
> 
> 时间：2012-12-12T18:24:48.570
> 
> 标签：php

What I'm looking to do is load in some data from a database or from memcache asynchronously.

I know, I know. "PHP doesn't support threading".

But what about register_tick_function? Isn't that indeed threading?

Has anyone done any kind of predictive preload or really any background processing utilizing register_tick_function?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-14T05:04:06.150

[http://php.net/pthreads](http://php.net/pthreads)

[http://docs.php.net/Thread](http://docs.php.net/Thread)

PHP certainly can support threading. Loading data from a SQL/NoSQL database in parallel is definitely a possibility. See the PHP manual, examples found in github and pecl packages, and a little bit more info on [http://pthreads.org](http://pthreads.org)

Please note, the documentation did state that this is part of the core, this is ( my ) human error. You must install pthreads with a thread-safe version of php, it can be installed from pecl ( windows incuded, dlls @ [http://windows.php.net/downloads/pecl/releases/pthreads](http://windows.php.net/downloads/pecl/releases/pthreads) ). Apologies.

# mysql - Delphi - 将 TStringStream 保存到 SQL

> ID：13846195
> 
> 赞同：2
> 
> 时间：2012-12-12T18:24:58.853
> 
> 标签：mysql, delphi, delphi-xe2, stringstream

我正在使用 Embarcadero Delphi XE2

我正在创建一个快速报告（它不是那么重要）并将其保存到 TStringStream

接下来只是为了测试，我将该 TStringStream 输出到文件，并且 PDF 可以正常保存并正常打开。它的重量约为 40KB（更少）

接下来我需要做的是通过 INSERT 将此 PDF (TStringStream) 写入 SQL 数据库，我唯一要做的修改就是将所有 " 替换为 "" 因为它在 " 引号内，否则 SQL 不起作用。

奇怪的是，当我从数据库加载文件时，甚至加载到附件是之前保存的 PDF 数据的 SELECT 长度（附件）。当我这样做时，大小超过 50KB（对于某些 PDF 甚至大约 70KB），并且 PDF 是整个空白的。

我被迫为这个项目使用一个简单的 mysql 单元，它不允许一些 setParams 或通过我搜索的 Blob 对象保存它。所以我需要一个关于这个简单方法的答案。将 TStringStream 插入 SQL 数据库。

数据库字段类型为 MEDIUMBLOB

提前致谢！

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:18:24.823

在数据库中定义一个 blob 字段，然后您可以使用 DataSet 组件的`CreateBlobStream()`方法获取一个`TStream`对象，您可以根据需要使用该对象读取和写入该 blob 字段。

您甚至可以`TMemoryStream`完全消除它，这取决于它在其余代码中的使用方式。例如，如果您只是为了将 PDF`TMemoryStream`存储在数据库中而将 PDF 保存到临时文件中，那么您可以摆脱并让`TMemoryStream`FastReport 通过返回的 直接将 PDF 保存到 blob 字段。`TStream``CreateBlobStream()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:56:00.130

这取决于您使用的数据类型。正如 tvdien 所说，如果您还没有，请查看存储的 blob 字段。使用 blob 字段，加载到数据库并保存回内存流很容易。要加载到数据库，您可以这样做：

`TBlobField(MyQuery.FieldByName('MyName')).LoadFromStream(MyMemoryStream)`

`SaveToStream`并使用TBlobField 类中的从数据库复制回内存流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:11:57.657

问题通过以下方式解决：

1.  通过 frxPDFExport 导出，

2.  将其流覆盖到 TMemoryStream，

3.  将 TMemoryStream 转换为十六进制字符串

4.  并将其作为 '0x'+converted_hex_string 插入到 sql

无论如何感谢您的帮助，希望这个答案有助于解决类似的问题

重要：它必须是 TMemoryStream 因为 PDF 中有一些奇怪的 ASCII 字符，所以当我将它导出到 TStringStream 然后转换为十六进制时，它就损坏了。

您可以在网上查找将字节数组（TMemoryStream）转换为十六进制字符串的功能。

杰克。

# r - mzR 包不可用 Bioconductor，试图安装 xcms

> ID：13846199
> 
> 赞同：0
> 
> 时间：2012-12-12T18:25:08.000
> 
> 标签：r, bioconductor

尝试在 Ubuntu 10.04 上安装 xcms 时，我一直遇到依赖问题。使用当前的策略，我正在从源代码安装 xcms。

这是跟踪： rob@rob-desktop:~/Desktop$ sudo R CMD INSTALL xcms/ * 安装到库 '/home/rob/R/x86_64-pc-linux-gnu-library/2.10'</p>

```
* installing *source* package ‘xcms’ ...
** libs
rm -f massifquant/xcms_massifquant.o massifquant/TrMgr.o massifquant/Tracker.o massifquant/SegProc.o massifquant/DataKeeper.o massifquant/OpOverload.o obiwarp/mat.o obiwarp/vec.o obiwarp/xcms_dynprog.o obiwarp/xcms_lmat.o xcms_obiwarp.o fastMatch.o mzClust_hclust.o mzROI.o util.o xcms.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/xcms_massifquant.cpp -o massifquant/xcms_massifquant.o
massifquant/xcms_massifquant.cpp: In function ‘SEXPREC* massifquant(SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*, SEXPREC*)’:
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
massifquant/xcms_massifquant.cpp:120: warning: deprecated conversion from string constant to ‘char*’
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/TrMgr.cpp -o massifquant/TrMgr.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/Tracker.cpp -o massifquant/Tracker.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/SegProc.cpp -o massifquant/SegProc.o
massifquant/SegProc.cpp: In member function ‘double SegProc::Rf_pt(double, double, int, int)’:
massifquant/SegProc.cpp:361: warning: deprecated conversion from string constant to ‘char*’
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/DataKeeper.cpp -o massifquant/DataKeeper.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c massifquant/OpOverload.cpp -o massifquant/OpOverload.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c obiwarp/mat.cpp -o obiwarp/mat.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c obiwarp/vec.cpp -o obiwarp/vec.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c obiwarp/xcms_dynprog.cpp -o obiwarp/xcms_dynprog.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c obiwarp/xcms_lmat.cpp -o obiwarp/xcms_lmat.o
g++ -I/usr/share/R/include      -fpic  -g -O2 -c xcms_obiwarp.cpp -o xcms_obiwarp.o
gcc -std=gnu99 -I/usr/share/R/include      -fpic  -g -O2 -c fastMatch.c -o fastMatch.o
gcc -std=gnu99 -I/usr/share/R/include      -fpic  -g -O2 -c mzClust_hclust.c -o mzClust_hclust.o
gcc -std=gnu99 -I/usr/share/R/include      -fpic  -g -O2 -c mzROI.c -o mzROI.o
gcc -std=gnu99 -I/usr/share/R/include      -fpic  -g -O2 -c util.c -o util.o
gcc -std=gnu99 -I/usr/share/R/include      -fpic  -g -O2 -c xcms.c -o xcms.o
g++ -shared -o xcms.so massifquant/xcms_massifquant.o massifquant/TrMgr.o massifquant/Tracker.o massifquant/SegProc.o massifquant/DataKeeper.o massifquant/OpOverload.o obiwarp/mat.o obiwarp/vec.o obiwarp/xcms_dynprog.o obiwarp/xcms_lmat.o xcms_obiwarp.o fastMatch.o mzClust_hclust.o mzROI.o util.o xcms.o -L/usr/lib64/R/lib -lR
** R
** inst
** preparing package for lazy loading
Error : package 'mzR' required by 'xcms' could not be found
ERROR: lazy loading failed for package ‘xcms’
* removing ‘/home/rob/R/x86_64-pc-linux-gnu-library/2.10/xcms’
* restoring previous ‘/home/rob/R/x86_64-pc-linux-gnu-library/2.10/xcms’ 
```

所以我用谷歌搜索了一段时间，试图弄清楚如何安装 mzR。

我试图打开 R 并使用：

> 来源（“http://bioconductor.org/biocLite.R”） biocLite（“mzR”）

这让我明白了：使用 R 版本 2.10.1，biocinstall 版本 2.5.11。安装 Bioconductor 2.5 版软件包：[1]“mzR”请稍候...

install.packages(pkgs = pkgs, repos = repos, ...) 中的警告：缺少参数“lib”：使用“/home/rob/R/x86_64-pc-linux-gnu-library/2.10”警告消息：在 getDependencies(pkgs, dependencies, available, lib) 中：包 'mzR' 不可用

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:35:01.097

几个快速的：

*   Ubuntu 10.04 已经有两年半的历史了。也许您想考虑升级？

*   R 2.10.1 也很旧。您肯定总是想升级。您*可以*通过查看`src/bin/linux/ubuntu/`任何 CRAN 镜像来轻松升级它。

*   mzR 依赖于我们的 Rcpp 包

*   Rcpp，如果你想要最新版本，需要最近的 R。所以如果我是你，我真的会升级 R。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:50:29.033

除了 Dirk 的回答，请注意`mzR`需要更新版本的`R`和 Bioconductor；`mzR`自 BioC 2.9 (R-2.14) 以来一直可用。一般来说，建议使用最新`R`的 Bioc 用法。

# python - 用于类实例变量的对象方法链接的 Python 方式

> ID：13846202
> 
> 赞同：2
> 
> 时间：2012-12-12T18:25:19.073
> 
> 标签：python, python-2.7

用例：

我有一个接收实例变量（表单字段）的表单对象。现在我喜欢使用方法链来验证那里的变量。带有任意方法的示例：

```
class Field(object):

    def __init__(self, form, name):
        self.form = form
        self.name = name

    def unspace(self):
        setattr(self.form, self.name, getattr(self.form, self.name).replace(' ',''))
        return self

    def len_valid(self, length):
        if len(getattr(self.form, self.name)) < length :
            setattr(self.form, self.name + '_invalid', True)
            self.form.valid = False
        return self

class Forms(object):                                                                                    

    def __init__(self):
        self.valid = True

    def validate(self, name):
        return Field(self,name)

f = Forms()         # create the form with some data
f.a = 'J o Hn '
f.b = ' Too   L o n g'

f.validate('a').unspace().len_valid(2)  
f.validate('b').unspace().len_valid(5)  

RESULT :
f.a : 'JoHn'
f.a_invalid : True
f.b : 'TooLong'
f.valid : False 
```

这是在 Form 实例变量上创建方法链接的 Pythonic 方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:32:46.230

是和不是。

链接方法调用的 Pythonic 方式正是您所写的：

```
f.validate('a').unspace().len_valid(2) 
```

但是动态访问属性的 Pythonic 方法是不要这样做，除非你必须这样做。如果表单变量存储在 a`dict`而不是对象的实例变量中，那么一切都会变得更加简单和可读。

即使您确实需要可以访问表单变量`f.a`而不是`f['a']`（例如，因为这是交互式 shell 的一部分，或者某些第三方 API 需要），实际上围绕 a 编写所有代码`dict`并使用您的最喜欢`AttrDict`的类（来自 PyPI 或 ActiveState），为您的用户/第三方 API 提供属性样式访问。

此外，如果您`Field`使用某些方法进一步将对象更改为对值的简单包装，而不是（实际上）对父项和键的引用，它会更简单。

此外，如果您像 一样动态生成新属性`a_invalid`，您可能希望*始终*生成它们，而不仅仅是当它们为真时。否则，检查是否`a`有效看起来像这样：

```
try:
    avalid = not f.a_invalid
except NameError:
    avalid = True 
```

这非常令人费解，但如果您的调用者想避免这种情况，唯一的方法是这样的：

```
avalid = not getattr(f, 'a_invalid', False) 
```

这似乎首先破坏了为调用者伪造属性的整个目的。

另外，请记住，您必须确保永远不会有名称以 . 结尾的字段`_invalid`。既然你可以在 Python 中为几乎任何东西附加新属性，所以如果你真的想以这种方式做所有事情，为什么要使用`f.a_invalid`而不是，比如说，`f.a.invalid`？

既然你在评论中问过，一个值的简单包装看起来像这样：

```
class Field(object):

    def __init__(self, value):
        self.value = value
        self.valid = True

    def unspace(self):
        self.value = self.value.replace(' ', '')
        return self

    def len_valid(self, length):
        if len(self.value) < length:
            self.valid = False
        return self 
```

不要让每个字段都到达表单以设置其有效性，只需让表单执行此操作：

```
class Form(object):
    …
    def valid(self):
        return all(field.valid for field in self.fields) 
```

如果你真的需要让它`valid`看起来像一个成员变量而不是一个方法，只需使用`@property`.

# interface - 在哪里为分层架构中的存储库定义接口？

> ID：13846209
> 
> 赞同：19
> 
> 时间：2012-12-12T18:25:51.293
> 
> 标签：interface, domain-driven-design, layer, n-tier-architecture, ddd-repositories

**背景**

我正在尝试创建一个简单的应用程序来真正理解 DDD+TDD+etc 的整个堆栈。我的目标是在运行时动态注入 DAL 存储库类。这使我的域和应用程序服务层可测试。我现在计划使用“穷人的 DI”来完成这个......所以我会在启动附近的一个简单的控制台应用程序中做到这一点：

```
    // 可怜人的 DI，在运行时注入 DAL 存储库类
    var productRepository = new SimpleOrder.Repository.ProductRespository();
    var customerRepository = new SimpleOrder.Repository.CustomerRepository();
    var orderRepository = new SimpleOrder.Repository.OrderRepository();

    // 在应用服务层将构造函数注入到这个类中，
    // SimpleOrder.ApplicationFacade
    OrderEntry oe = new OrderEntry(customerRepository, orderRepository, productRepository);

```

为了完成这种依赖注入，我创建了三个存储库接口：

```
-- ICustomerRepository
-- IOrderRepository
-- IProductRespository

```

一个典型的实现：

```
    命名空间 SimpleOrder.Domain.Interfaces
    {
        公共接口 ICustomerRepository
        {
            客户 GetCustomerById(int customerId);
            无效 SaveCustomer（客户客户）；
        }
    }

```

** 请注意，SaveCustomer 引用了域层中定义的 Customer 模型类。这是其他存储库的典型特征。

但是我不确定它们应该在哪个项目/层中实现。我在一个解决方案中有 5 个项目：

1.  **SimpleOrder.ConsoleClient (presentation)** -- 我想从这里注入域的具体实现作为应用程序

2.  **SimpleOrder.ApplicationFacade（应用程序服务）** ——在域中编排低级方法的大块高级、粗粒度方法

3.  **SimpleOrder.Contracts——** 用于表示和应用程序服务之间通信的 DTO 类

4.  **SimpleOrder.Domain(domain/bll)** ——域模型类Customer、Order、OrderItem、Product

5.  **SimpleOrder.Repository (dal)** -- 实现存储库接口

这是我看到的选项：

**选项 1：**在 SimpleOrder.Contracts 中定义存储库接口 ...

PRO：这是我*认为*他们应该属于的地方，因为我创建它是为了在各个关注点/层之间共享合同。例如，此处定义了 DTO。

缺点：但是每个接口的方法签名都引用了域模型类。
这意味着我必须添加对 SimpleOrder.Domain 的引用，但是当在另一个项目中引用 SimpleOrder.Contracts 时，它必须随身携带 SimpleOrder.Domain。这感觉不对。

**选项 2：**与上述相同的场景，但我还在 SimpleOrder.Contracts 中为每个域模型类定义接口，以便我可以打破存储库接口与实际模型类的耦合。

例子：

```
    命名空间 SimpleOrder.Domain.Interfaces
    {
        公共接口 ICustomerRepository
        {
            ICustomer** GetCustomerById(int customerId);
            无效 SaveCustomer（ICustomer 客户）；
        }

        公共接口 ICustomer
        {
            int 客户 ID { 获取；放; }
            字符串名称 { 获取；放; }
            System.Collections.Generic.List Orders { get; }
        }
    }

```

影响：每个领域模型类都必须实现他的相关接口。IE，

```
    公共类客户：SimpleOrder.Domain.Interfaces.ICustomer
    {
        公共客户（）
        {
            _orders = 新列表（）；
        }

        公共 int CustomerId { 获取；放; }
        公共字符串名称 { 获取；放; }

        私有列表_orders；
        公共虚拟列表订单{
            得到{返回_orders; }
        }
    }

```

PRO：修复选项 1 的问题。

缺点：这会增加项目中文件的数量（以及感知的复杂性），因为每个域类现在都有一个关联的接口。

**选项 3：**在 SimpleOrder.Domain 中定义存储库接口

影响：为了在运行时从 SimpleOrder.ConsoleClient 将具体的存储库类注入应用程序服务层（SimpleOrder.ApplicationFacade 项目），SimpleOder.ConsoleClient 还需要对 SimpleOrder.Domain 的引用。

PRO：这也解决了选项 1

CON：我试图避免直接从表示层引用领域层，因为现在表示层可以对领域层了解太多。当我将来用 WPF 或 ASP.NET MVC 应用程序替换控制台应用程序时，我会冒第二个和后续表示层实现尝试调用模型而不是应用程序服务层中的方法的风险。（但是我确实在选项 4 中考虑了这一点。）

**选项 4：**将接口放在 SimpleOrder.Domain 中，然后从 SimpleOrder.ConsoleClient 引用 SimpleOrder.Domain。

PRO：修复了上述所有问题。

CON：这感觉不对，因为当我应该*只*提供对 SimpleOrder.ApplicationFacade 中更高级别的块状方法的访问时，我将提供从表示层直接访问域层中较低级别方法的访问。

**问题** 我已经尝试了每一个，但已经选择了选项 4，但是这让我对它产生了不好的印象。有更好的选择吗？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T18:45:07.273

根据我对您问题的理解，我同意选项 4 是最好的。存储库接口应在所有域对象旁边的域层中声明。所述接口的实现应该是基础设施层的一部分——将你的领域层连接到世界的层。看看[Hexagonal Architecture](https://web.archive.org/web/20170730135337/http://alistair.cockburn.us/Hexagonal+architecture)以了解其中的一些动机。

为了解决选项 4 的缺点，您不应将控制台应用程序视为仅仅是表示层。它还具有其他职责，例如作为应用程序的主机和 DI 术语中的[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。控制台应用程序可能有一个表示组件，它只与应用程序服务通信。您还可以将应用程序服务封装在使用 ASP.NET WebAPI 实现的[开放主机服务后面。](http://www.scribd.com/doc/12393457/29/Open-Host-Service)然后表示层将仅引用此服务，并对底层域层隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:20:04.780

我同意eulerfx。我唯一要补充的是它感觉不对，因为传统的 N 层架构会让你让一切都依赖于数据库并使用抽象来打破这些依赖关系。

您应该查看[洋葱架构](http://www.develop.com/onionarchitecture)，这是您在选项 4 中组织依赖项的方式的一个示例。我个人认为这是可用的最具可扩展性的架构模型。如果您将此架构与 DDD 实践相结合，您会以最少的工作量获得最大的灵活性。

附带说明一下，我见过的许多实现将存储库和域服务的合同分解为自己的项目。不过，这纯粹是一个组织决定。将它们包含在您的域模型项目中是完全有效的。

# c# - 在 Windows 7 上启动 exe 程序时会触发什么事件？

> ID：13846210
> 
> 赞同：2
> 
> 时间：2012-12-12T18:26:00.140
> 
> 标签：c#, winapi, c#-4.0, windows-7, c#-3.0

在 Windows 7 上，当一个 exe 程序启动时，会触发什么事件？如何在代码中连接此事件以捕获启动？

.exe 可以是任何可在 Windows 7 上运行的程序，例如 WPF 应用程序或 Windows XP 的旧版应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:28:07.027

有可以在内核模式下处理的进程创建钩子。任何向用户模式报告的内容都将在事后发生（事件日志条目、WMI 事件）。

# wpf - BoundData 样式模板说明 WPF XAML 的 ListBox/ListBoxItem

> ID：13846211
> 
> 赞同：1
> 
> 时间：2012-12-12T18:26:03.660
> 
> 标签：wpf, listbox, styles, controltemplate, listboxitem

如何让数据绑定 ListBox 接受 ListBoxItem 的模板样式（从我的 ResourceDictionary 中与相应样式同名）？

我在 Blend 4 中看到，在 SimpleStyles ResourceDictionary 文件中，“SimpleListBoxItem”的属性设置为：

```
 d:IsControlPart="True" 
```

但是我只能在为 xaml 硬编码 ListBoxItems 显式使用 SimpleListBoxItem 样式时使用它？

对我来说有意义的是将样式应用于 ListBox 中的 ControlTemplate。我看到列表框中的控件模板如下所示：

```
ControlTemplate TargetType="{x:Type ListBox}">
                <Grid>
                    <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" 
                            Background="{TemplateBinding Background}"
                            />
                    <ScrollViewer Margin="1" Style="{DynamicResource SimpleScrollViewer}" Focusable="false" Background="{TemplateBinding Background}">

                        <!-- The StackPanel is used to display the children by setting IsItemsHost to be True -->
                        <StackPanel Margin="2" IsItemsHost="true"/>

                    </ScrollViewer>
                </Grid> 
```

有没有办法在该堆栈面板中再放置一个嵌套的“ItemsHost”样式模板？也许是一个数据模板？

提前致谢，如果需要进一步说明，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:54:22.970

有两个选项可用于从样式中将样式应用于项目`ListBox`， `ItemContainerStyle`以及`ItemTemplate`.

1)`ItemContainerStyle`适用于类型`ListBoxItem`- 设置它样式列表中每个项目的容器：

```
<Style TargetType="ListBoxItem" x:Key="SimpleListBoxItem">
    <Setter Property="Background" Value="Green">
    <!-- etc -->
</Style>

<Style TargetType="ListBox" x:Key="ListBoxStyle">
    <Setter Property="ItemContainerStyle" Value="{StaticResource SimpleListBoxItem}">
</Style> 
```

2）该`ItemTemplate`属性允许您完成重新定义每个项目如何显示的模板，例如：

```
<Style TargetType="ListBox" x:Key="ListBoxStyle">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="This is an item" />
                    <ContentControl Grid.Column="1" Text="{Binding}" />
                <Grid>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# python - 从两个非归一化光谱创建复合光谱

> ID：13846213
> 
> 赞同：2
> 
> 时间：2012-12-12T18:26:20.360
> 
> 标签：python, scipy

在 Python 中，我试图规范化两个数组，然后取它们重叠的区域的平均值来创建一个新的复合数组。

为此，我认为我必须：

1.  找到重叠区域，
2.  插值重叠的 y 值，
3.  遍历以找到最佳拟合的归一化常数，然后
4.  将碎片粘贴在一起以形成我的新曲线

使用一些半随机值，如下所示：

![在此处输入图像描述](../Images/fc0b72f01ad292d1f9beae5676e69c98.png)

此代码适用于 y 值相距不太远的小型数据集，但当 Y1 和 Y2 之间存在数量级时 Python 会崩溃（显然是由于迭代）。这是代码：

```
X1o = [x for x in X1 if x > X2[0]]
X2o = [x for x in X2 if x < X1[-1]]
Y1o = [y for y in Y1[(len(Y1)-len(X1o)):]]
Y2o = [y for y in Y2[:len(X2o)]]
Y2o = list(interp(X1o,X2o,Y2o))

c = abs(min(Y1o)-max(Y2o))
Y2test = [y2+c for y2 in Y2o]
Y2s = []
d = 0.01*min(Y2test)
while min(Y2test) < max(Y1o):
  Y2test = [y+d for y in Y2test]
  Y2s.append(Y2test)
  plot(X1o,Y2test,c='k',alpha=0.5)

idx = min(map(lambda i: (u.squaredError(Y1o, i), i, Y2s.index(i)), Y2s))[-1]         
Yavg = [(y1+y2)/2 for y1,y2 in zip(Y1o,Y2s[idx])]
diff = Y2s[idx][0]-Y2o[0]

X = [x for x in X1 if x < X2[0]] + X1o + [x for x in X2 if x > X1[-1]]
Y = [y for x,y in zip(X1,Y1) if x < X2[0]] + Yavg + [y+diff for x,y in zip(X2,Y2) if x > X1[-1]] 
```

我真的需要用具有数千个数据点的恒星光谱来做到这一点，并且在 y 值之间的分布高达 20 个数量级。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:00:34.773

您的代码将从 numpy 和使用较少的 python 列表中受益匪浅，这些列表效率低下，尤其是您的 line `Y2s.append(Y2test)`。当你的`while`周期太长时，你只会追加一个很长的列表，这既慢又低效。

话虽如此，代码的瓶颈是最小化。您目前正在使用 python 列表进行暴力破解。您将从使用[scipy.optimize](http://docs.scipy.org/doc/scipy-0.10.0/reference/tutorial/optimize.html)函数之一中受益匪浅。

以下是我会做的一些广泛的建议：

1.  找到两个光谱的 x 坐标极值，将两者插入到公共 x 值的网格中。
2.  使用 scipy.optimize.fmin 为您进行最小化并计算最佳标准化。
3.  将归一化光谱的部分内插到公共网格

这是 fmin 的一些示例代码（未经测试）：

```
import numpy as np
import scipy.optimize as opt

# y1 = interpolated values for one of the spectra
# y2 = interpolated values for the other spectra, normalise this one 

def errfunc(p, a1, a2):
    return np.sum(a1 - a2 * p)

p0 = 1\.  # initial guess
norm_factor = opt.fmin(errfunc, p0, args=(y1, y2)) 
```

这应该给你最合适的`norm_factor`。

# c++ - 在 C++ 中序列化一个类

> ID：13846223
> 
> 赞同：-4
> 
> 时间：2012-12-12T18:27:09.613
> 
> 标签：c++, serialization

我需要一种将代码中的类序列化为字符串的方法。稍后，使用该字符串我需要填充该类的一个实例。

IE

```
enum AlarmStatus
{
   Clear=0,
   Active
};

class AlarmInfo
{
public:
std::string S;
int I;
AlarmStatus alarmStatus;
void setAlarmStatus(AlarmStatus alarmStatus);
AlarmStatus getAlarmStatus();
}; 
```

有什么想法可以在代码中做到这一点吗？我知道 boost 有可以序列化一个类的 boost/archive/ 库，但它不是“HeaderOnly 库”？是否有一个仅是 Header 的库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:31:48.840

C++ 没有反射。因此，某些其他编程语言提供的功能（如 C# 的`BinaryFormatter`、`XmlSerializer`、 或`DataContractSerializer`）是不可能实现的。您必须自己实现序列化。

（就个人而言，我认为这是一件好事。您的文件格式不应该与您的实现如此耦合，因为一段时间后您会想要更改实现。然后发现您搞砸了，因为您的文件格式定义在该代码的条款）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:38:52.500

创建一个往返串行代码并调用它

```
struct Person{
  string name;
  int age;

  void toSerial(ostream& stream){ stream << name << age; }
  void fromSerial(istream& stream){  stream >> name >> age; }
}

int main(){
  Person person;
  //save to data.txt
  ofstream fileOut("data.txt");      
  person.toSerial(fileOut);
  fileOut.close();

  //load from data.txt
  ifstream fileIn("data.txt");
  person.fromSerial(fileIn); 
```

}

# php - 试图在 php 中访问包含对象的属性

> ID：13846230
> 
> 赞同：0
> 
> 时间：2012-12-12T18:27:31.750
> 
> 标签：php, class

在寻找解决方案和模式数小时后，我该问问专业人士了。

我很想在逻辑层次结构中排序我的对象，但仍然希望能够访问父对象的属性。一个简单的例子，我希望它如何工作......

```
 class car {

       public $strType;  // holds a string
       public $engine;   // holds the instance of another class

       public function __construct(){
           $this->type = "Saab";
           // Trying to pass on $this to make it accessible in $this->engine
           $this->engine = new engine($this);
       }

    }

    class engine {

        public $car;

        public function __construct($parent){
            $this->car = $parent;
        } 

        public function start(){
            // Here is where I'd love to have access to car properties and methods...
            echo $this->car->$strType;
        }
    }

    $myCar = new car();
    $myCar->engine->start(); 
```

我不会实现的是引擎中的方法可以访问“父”汽车属性。我设法做到了这样，但我相信这非常非常丑陋......

```
 $myCar = new car();
    $myCar->addParent($myCar); 
```

从 addParent 方法中，我将能够将实例传递给引擎对象。但这不可能是线索，不是吗？我的整个想法很奇怪吗？

我不希望引擎从汽车继承，因为汽车有很多方法和属性，而引擎没有。希望你明白我的意思。

希望得到提示，干杯鲍里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:39:27.293

正如@Wrikken 提到的，正确的语法是`echo $this->car->strType;`

`type`似乎不是 的成员`car`，但如果您将其更改为

```
$this->strType = "Saab"; 
```

那么有问题的陈述现在应该呼应“萨博”

虽然我认为这里的好做法是不让引擎类包含汽车对象，但汽车类应该包含一个引擎对象。并且属性会更好`private`。所以你可以有一个 car 方法，比如

```
public startEngine() {
    $success = $this->engine->start();
    if(success) {
        echo "Engine started successfully!";
    } else {
        echo "Engine is busted!";
    }
} 
```

Where`engine::start()`返回一个布尔值。

# r - 在图形窗口的各个面板上控制 ylab 和 xlab

> ID：13846241
> 
> 赞同：0
> 
> 时间：2012-12-12T18:20:18.617
> 
> 标签：r, data-visualization

考虑以下示例：

```
dat <- matrix(rexp(240, rate=.1), ncol=6)
par(mfrow=c(3,2))

for (i in 1:6){
    plot(dat[,i],xlab = "Day of year",col = "black",
         ylab = expression(paste("Temperature ",degree,"C")))
  } 
```

这会产生 6 个子图，其中清楚地显示了 x 和 y 标签。 ![在此处输入图像描述](../Images/dc4cedf63687caa4eabb264968c96b64.png)

我想对此进行更改，以便 ylabel 仅显示在右侧的面板上（以避免重复）。所以，我写：

```
for (i in 1:6){
  if (i %% 2 == 0){
    plot(dat[,i],ylab = "",xlab = "Day of year",col = "black")
  }
  else {plot(dat[,i],ylab = expression(paste("Temperature ",degree,"C")),
             xlab = "Day of year",col = "black")
  }
} 
```

产生： ![在此处输入图像描述](../Images/7672aa6f7d541a0635f13b3d8abea142.png)

我们可以看到现在只有偶数面板有 ylabel。我还想要这个图，以便只有面板 5 和 6 有 xlabel，我可以通过添加另一个 if 语句来实现。但是，做这么简单的事情似乎需要做很多工作。任何人都可以建议一种替代方法。由于我是 RI 的初学者，因此我更愿意首先使用一些 R 基本函数，即不是 lattice 也不是 ggplot。但是，如果没有更简洁的方法来使用基本功能，欢迎提出其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:34:57.017

`ifelse`是一个有用的捷径。

```
for (i in 1:6){
    plot(dat[,i],xlab = ifelse(i %% 2 == 0,"","Day of year",col = "black",
         ylab = ifelse(i %% 2 == 0,"",expression(paste("Temperature ",degree,"C"))) 
```

此外，如果所有轴都相同，则可以使用`mtext`with 。`outer=TRUE`绘制没有标签的所有内容后，请尝试：

```
mtext("Day of Year", side=1, padj=-2, outer=TRUE)
mtext("Temperature", side=2, padj=2, outer=TRUE) 
```

![在此处输入图像描述](../Images/57976c7bb3d39fe8e12a486db877154c.png)

# coredump - 超出 CPU 时间限制（核心转储）含义

> ID：13846248
> 
> 赞同：2
> 
> 时间：2012-12-12T18:28:13.693
> 
> 标签：coredump

当我在面试街解决一些问题时，当我们未能通过测试用例时，有时会出现“超出 CPU 时间限制（核心转储）”的消息。

这条消息的实际含义是什么？

![这是消息](../Images/4af02138dc3721a4e3b626586dfbc457.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T04:12:37.110

这意味着您的代码超出了比赛的时间限制。

在他们的网站上查看评分规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T16:12:30.267

```
unlimit cpu 
```

这是你需要的吗？

# google-docs - 您可以将 Google Docs 用作您自己的应用程序的文本编辑器吗？

> ID：13846249
> 
> 赞同：6
> 
> 时间：2012-12-12T18:28:18.687
> 
> 标签：google-docs, google-docs-api, rich-text-editor, google-drive-realtime-api

我知道 Google Drive 有一个 API。有没有办法使用它来本质上使用 Google Docs 作为应用程序的富文本编辑器？即我希望能够做到以下几点：

1.  创建一个文档。
2.  像往常一样编辑文档，但嵌入在我的应用程序中。
3.  保存文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:31:29.177

如果您在您的应用程序中嵌入浏览器，我认为如果您可以获得用户谷歌帐户并且您可以遵循谷歌身份验证 API，这是可行的。

# recursion - 如何防止 DB2 中的递归触发器调用

> ID：13846253
> 
> 赞同：2
> 
> 时间：2012-12-12T18:28:44.840
> 
> 标签：recursion, triggers, db2

我有一个更新语句，嵌套在更新触发器中：

```
CREATE TRIGGER "BAD_RECURSIVE_TRIGGER" 
    AFTER UPDATE ON "MYTABLE"
    REFERENCING  NEW AS NEW_ROW
    FOR EACH ROW
WHEN (NEW_ROW.ORDER IS NOT NULL)
BEGIN ATOMIC
    IF <SOMECONDITION> THEN
    UPDATE "MYTABLE" SET ORDER=ORDER+1 // This "update" fires the recursion.
    WHERE <OTHERCONDITION>
END IF;
END; 
```

我想阻止触发器的递归执行，这是在 DB2 (v9.7) 上，我已经看到 SQL-Server 和 ORACLE 数据库的类似问题：

[防止 PostgreSQL 中的递归触发器](https://stackoverflow.com/questions/708562/prevent-recursive-trigger-in-postgresql)

[如何防止数据库触发器递归？](https://stackoverflow.com/questions/1529412/database-trigger-is-recurising-how-to-prevent-this)

但是我找不到通过 DB2 防止这种情况发生的方法。有没有办法防止对 DB2 的递归触发器调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:18:52.883

**更新前**创建触发无级联...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:09:01.793

您不想将整数类型的列用于这样的事情，因为它需要（最终）重新排序给定“组”中的所有其他条目。

当您希望允许重新定位条目时，请改用*浮动*类型。这将允许通过简单地修改所需条目来更改顺序。
有这样的声明：

```
UPDATE Example SET ordering = (((SELECT COALESCE(ordering, FLOAT_MAX_VALUE)
                                FROM Example 
                                WHERE id = @entry_above_insertion_point)
                               -
                               (SELECT COALESCE(ordering, FLOAT_MIN_VALUE)
                                FROM Example 
                                WHERE id = @entry_below_insertion_point))
                               / 2)
                              + (SELECT COALESCE(ordering, FLOAT_MIN_VALUE)
                                   FROM Example 
                                   WHERE id = @entry_below_insertion_point)
WHERE id = @entry 
```

这会将条目放在两个当前条目之间的“中间”。由于浮点的工作方式，您希望从 0 开始值；怀疑您是否需要对数据进行标准化。

# jquery-ui - 如何从 ui 对象中获取选定的值？

> ID：13846256
> 
> 赞同：0
> 
> 时间：2012-12-12T18:29:18.440
> 
> 标签：jquery-ui, jquery-ui-autocomplete

此控件具有以下事件`select`：

```
select( event, ui ) 
```

如何从`ui`对象中获取选定的值

[http://api.jqueryui.com/autocomplete/#event-select](http://api.jqueryui.com/autocomplete/#event-select)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:34:01.997

您可以从对象成员`value`公开的恰当命名的属性中获取选定的值：`item``ui`

```
select: function(event, ui) {
    console.log(ui.item.value);
} 
```

# python - 从 Django 模板访问容器的方法

> ID：13846265
> 
> 赞同：0
> 
> 时间：2012-12-12T18:30:11.883
> 
> 标签：python, django

我有一个 Python 对象，它是容器子类的一个实例。所以这个对象，`x`，可以表现得像`x['name']`。这个对象也有方法，比如说`x.bar()`。

如何`x.bar`从 Django 模板调用？在模板`x.bar`中将始终被评估为`x['bar']`第一个，这给出了`None`.

我能想到的最好的方法是创建一个`x`没有阴影的对象`getitem`。但我不能`delattr` `__getitem__`。

有更好的想法吗？缺少在上下文或模板标记中手动传递这些调用的结果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:12:30.243

这是 Django 模板进行表达式评估的方式中的一个基本缺陷。查看模板标签[`{% expr -arbitrary-python-expression- %}`](http://djangosnippets.org/snippets/9/)以获取解决方法。例如`{% expr x.bar(1,2,3) as snort %}`，在当前上下文中为您提供了一个名为`snort`.

或者，您可以尝试[Jinja2](http://jinja.pocoo.org/docs/)模板。它们非常接近 Django，但它们允许使用完整的 Python。

注意：Jinja2*与*Django 的模板系统不同，如果您使用任何依赖于模板系统的页面嵌入 django 应用程序，这可能会破坏它们。`{% expr %}`对于标签来说，情况并非如此。

# eclipse - Eclipse 将 * 添加到注释块

> ID：13846266
> 
> 赞同：0
> 
> 时间：2012-12-12T18:30:20.293
> 
> 标签：eclipse

在eclipse中的一段代码中添加/*和*/后，保存后，编辑器在每一行之前添加*，最终转换为：

```
/*
line_of_code1
line_of_code2
line_of_code3
*/ 
```

对此：

```
/*
 *  line_of_code1
 *  line_of_code2
 *  line_of_code3
 */ 
```

我真的想避免它，因为在取消注释后我需要手动删除每个 *。这是什么保存操作或格式化程序操作，我该如何禁用它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:34:38.947

您可以只使用`Ctrl+Shift+C`（或`Ctrl+ /`）作为行注释或`Ctrl+Shift+/`块注释（它也会切换）。默认情况下，Eclipse 不添加这些星号。

添加星号通常只发生在 /** 中，例如在编写 javadoc 时。你确定你没有使用双星号吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:34:11.533

Eclipse for Java 仅在您使用 /** 而不是 /* 时才会这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:35:34.350

如果您想暂时注释一段代码，您可以在选定的行上使用快捷键**Ctrl + / 。**这适用于切换模式，因此您将能够非常快速地添加和删除评论。

# java - 对于 2 个数字，如何测试一个是否是另一个的整数幂？

> ID：13846267
> 
> 赞同：1
> 
> 时间：2012-12-12T18:30:22.040
> 
> 标签：java, algorithm, logarithm, exponent

对于整数 x、y 和 n，（仅给出 x 和 y）测试 x ^n = y？如果 x = 8，y = 512，则 n = 3，所以这是真的。但如果 x = 8 和 y = 500，n 必须在 2.98 左右（不是整数），因此该语句评估为假。使用对数是进行此测试的最佳方法吗？

[检查一个整数是否是另一个整数的整数幂](https://stackoverflow.com/questions/4429044/check-if-one-integer-is-an-integer-power-of-another)提供了一些解决方案：

`int n = y; while(n < x) n *= y; return n == x`,

```
while (x%y == 0)  x = x / y
return x == 1 
```

和对数方法（这是我的版本）：

```
return ((log(y, x) % 1) == 0) // log(expression, base) 
```

日志(y, x) = 日志[x] y

哪种方法计算速度更快，尤其是对于大数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:37:15.663

对数方法需要更加小心，因为对数函数由于使用了浮点逼近，所以有少量的不准确性。例如 3 ^(10) = 59049，但是：

```
log(59049, 3)
   ===> 9.999999999999998 
```

您是否可以对此进行补偿（通过检查答案是否“足够接近”最接近的整数）取决于您的*x*和*y*的范围。如果*y*小于 2 ^(32)，那么我认为最接近的对数可以按比例得到一个整数（没有真正的答案是一个整数）是：

```
1 - log(4294967295, 65536) / 2
   ===> 1.049693665322593e-11 
```

所以选择一个小于这个的 epsilon，你可以放心地使用对数方法：

```
n = log(y, x);
e = round(n);
if (abs(1 - n / e) < epsilon) {
    /* y == x to the power of e */
} else {
    /* y not a power of x */
} 
```

*如果y*的允许范围更大，那么您必须为 epsilon 找到合适的值。但请注意：对于足够大的*y* ，双精度浮点中可能*没有合适的 epsilon 。*例如，如果*y*可以大到 2 ^(48) − 1 那么就是这样，因为

```
log(281474976710655, 16777216)
   ===> 2.0 exactly 
```

因此，对于足够大的*y*，您不能依赖对数：您需要在之后显式执行取幂作为检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:47:04.303

对于相当小的输入，我相当确定您的第三种方法效果最好。（不过，您需要更加小心地检查完整性。）

一些值得思考的食物：

1.  您可以计算一个`x`大致`sqrt(y)`非常快的幂（即 O(M(log y)) 时间），然后通过这个幂（在 O(M(log y) log log y) 时间）得到两个子问题大小的一半。

2.  您可以对对数使用相当差的近似值来获得相当严格的`n`. 如果我知道一个在 的常数范围内的整数`log_x(y)`，那么我只需检查 的常数次方`x`。使用 Edward Falk 的回答中举例说明的“平方和乘法技术”可以最快地完成这些检查。

3.  给定一个相当宽的界限`n`，您可以使用算术模一个适度大小的随机素数来显着缩小候选集`n`。应该可以使用算术模数几个中等大小的随机素数以及中国剩余定理来非常有效地将可能缩小`n`到零或一。

以第二个想法运行：请注意，我只需要最高位 就`y`可以得到一个近似值`log y`，最多是一个常数；其他一切都是肉汁。您应该能够使用 FPU 取前 53 位的对数，使用数字的长度进行调整，然后`O(M(log y))`及时检查最接近的整数。第三个想法让您可以使用随机化来检查是否及时`x^n == y`，`O(log y)`这是最佳的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T07:59:47.587

这种方法应该可以解决问题：

```
void toCheckPower(){
    Scanner sc=new Scanner(System.in);

    int n=sc.nextInt();
    System.out.println("No of which power is checked="+n);

    int pow=sc.nextInt();
    int num=pow;
    System.out.println("No to check power="+pow);
    int sum=1;

    while(sum<=pow){
        sum=sum*n;
        if(sum==pow){
            System.out.println(pow+" is a Power of "+n);
            break;
        }
        else if(sum>pow){
            System.out.println(pow+" is not a Power of "+n);
            break;
        }
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:01:43.573

如果存在 a *b*和*e*其中*b* ^ *e* = *n* ，则数*n*是完美幂。例如 216 = 6^3 = 2^3 * 3^3 是完美幂，但 72 = 2^3 * 3^2 不是。如果数字*n*是完美幂，则指数*e*必须小于 log2 *n*，因为如果*e*大于则 2 ^ *e*将大于*n************. 此外，只需要测试素数 *e*s，因为如果一个数是复合指数的完美幂，它也将是复合分量的素因数的完美幂；例如，2^15 = 32768 = 32^3 = 8^5 是一个完美的立方根，也是一个完美的五次根。***********

 ***我的博客上有一个[实现](http://programmingpraxis.com/2012/03/13/perfect-power-predicate/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T19:13:37.073

对于大量数据，日志可能会更快，但您应该对其进行基准测试。这将涉及到 double 和 back 的转换，这可能是一个问题。

我认为这可能是一个更好的解决方案：

```
long y = 512;
long x = 8;
if (x <= 1) return false;
while (y>1) {
    // Find maximum x^(2^n) <= y
    long xp = x;   // x to some maximum power
    long xp2;      // experimental value of xp
    while ((xp2 = xp*xp) <= y)
      xp = xp2;
    if (y%xp != 0) return false;  // reject
    y /= xp;
}
return y == 1; 
```

仍然有可以改进的方法，我只测试了几个案例，但它似乎有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T19:00:28.663

如果没有基准测试，并且只是观察正在发生的事情，这个应该是最快的。

```
int n = y; while(n < x) n *= y; return n == x; 
```

（但是请注意，您已经从描述中颠倒了 x & y 的含义，并且 n 完全不同）

```
while (x%y == 0)  x = x / y; 
```

这是做除法和取模（本质上是第二次除法），所以它做了两倍的工作，但它可以更早地退出循环，所以它可能会赢。

```
return ((log(y, x) % 1) == 0) 
```

这使用了本质上是邪恶的浮点（尽管浮点在现代 CPU 芯片中变得更好更快）。然而，当你需要知道它是否完整时，你做它的模数是测试它是偶数还是奇数。***

# javascript - jQuery搜索替换字符串

> ID：13846268
> 
> 赞同：1
> 
> 时间：2012-12-12T18:30:27.197
> 
> 标签：javascript, jquery, replace

我正在尝试重命名克隆函数中的某些字段，但我不确定如何重命名（增加）字段名称。

```
var tr = $copy.clone();
tr('input').each(function() {
  console.log(this.name); 
  this.name = something;
}); 
```

**字段名称示例：**

```
field[subform][0][subsubform][2][name] 
```

在这种情况下，我需要`[2]`增加到`[3]`. 该名称可以有或多或少的括号，但它始终是我需要增加的倒数第二个。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:51:03.920

如果它总是倒数第二个，你可以这样做

```
var name = 'field[subform][0][subsubform][2][name]';
var firstStr = name.split('][').slice(0,-2);
var secStr = name.split('][').slice(-2);
secStr[0] = +secStr[0] +1; 
console.log(firstStr.concat(secStr).join('][')); 
```

[http://jsfiddle.net/3TuHg/](http://jsfiddle.net/3TuHg/)

或者像这样

```
var name = 'field[subform][0][subsubform][2][name]';
var str = name.split('][');
str[str.length - 2] = +str[str.length - 2] + 1;
str = str.join('][');
console.log(str); 
```

[http://jsfiddle.net/NsGvv/](http://jsfiddle.net/NsGvv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:44:38.533

假设它总是在`[...]`字符串末尾的 a 之前：

```
name.replace(/\[(\d+)\](\[[^\[]+\])$/, function (pattern, value, tail) {
    return "[" + (parseInt(value, 10) + 1) + "]" + tail;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:59:21.727

使用`indexOf`和`substr`。

以下代码获取数字之前的字符串的第一部分、数字和数字之后的字符串。然后将数字加 1 并连接所有内容。

```
var string = "field[subform][0][subsubform][2][name]",
    beg = string.indexOf("subsubform][") + 12,
    end = string.indexOf("]", beg);
string = string.substr(0, beg) + (parseInt(string.substr(beg, end)) + 1) + string.substr(end); 
```

[**演示**](http://jsfiddle.net/qGMfS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T19:09:36.973

正则表达式很有趣。匹配模式 [number][string]end 的行，读取数字，加一，加入匹配的其他部分，并设置新名称。

```
$(tr).find("input").prop("name", function() {
    return this.name.replace(
        /\[(\d+)(\]\[[^[]+]$)/,
        function (a,b,c) { 
            return "[" + (parseInt(b,10)+1) + "]" +  c;
        }
    )
}); 
```

# java - 如何在 Java 中正确旋转多个对象？

> ID：13846269
> 
> 赞同：1
> 
> 时间：2012-12-12T18:30:29.443
> 
> 标签：java, graphics, rotation, box2d, jbox2d

我有一个包含对象的 Arraylist，其中包含我想使用 Graphics2D 在屏幕上绘制的对象的位置和旋转。

```
public void render(Graphics g1) {
Graphics2D g = (Graphics2D) g1;
g.setColor(Color.white);
for(PhysicObject object : entities) {

if (object.getBody().getType() == BodyType.DYNAMIC) {
            Vec2 position = object.getBody().getPosition().mul(30);
            g.translate(position.x, position.y);
            g.rotate(object.getBody().getAngle());
            g.fillRect((int)-(object.width), (int)-(object.height), (int)(object.width*2), (int)(object.height*2));
        }
    }

} 
```

第一个对象始终正确旋转，但以下对象围绕第一个对象而不是自身旋转。

希望有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:47:29.260

要独立旋转每个对象，您必须撤消第一个对象的平移和旋转。所以最简单的方法是使用 AffineTransform 来“组合”这两个转换并更轻松地撤消它们。例如

```
 AffineTransform t = new AffineTransform();
    t.translate(position.x, position.y);        
    t.rotate(object.getBody().getAngle());
    g.transform(t);
    g.fillRect((int)-(object.width), (int)-(object.height), (int)(object.width*2), (int)(object.height*2));
    try{
        g.transform(t.createInverse());
    }catch(NoninvertibleTransformException e){
        //...
    } 
```

createInverse() 创建“相反”转换并将图形空间返回到其原始状态。然后下一个转换应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:46:46.097

当你`translate`和`rotate`这永久地影响你的图形对象。请务必在`fillRect`调用后将 bask 平移和旋转到原始原点和方向。

```
g.translate(-position.x, -position.y);
g.rotate(-object.getBody().getAngle()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:50:51.993

不要使用 Graphics 上下文旋转方法，而是尝试使用[AffineTransformation](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html)。

您将需要在每个循环上重置转换。

更好的是利用形状 API 并转换形状

# javascript - Javascript预加载图像片段不起作用

> ID：13846271
> 
> 赞同：0
> 
> 时间：2012-12-12T18:30:39.300
> 
> 标签：javascript, image-preloader

我真的不明白我的这个预加载片段有什么问题，loadWrapper 像 if 语句不起作用一样消失并不重要。希望任何人都可以发现问题：

```
//html

<script type='text/javascript'>$(document).ready(function(){preloadImages()});</script>

//js

function preloadImages()
{
var xmlDoc = loadXMLDoc("http://www.wdagdesign.com/ice2/menu.xml");
var y = xmlDoc.getElementsByTagName("title");
var imgCount = y.length;

for(var i=0; i<imgCount;i++)
{
    var imgObj = new Image();
    var $pic = xmlDoc.getElementsByTagName("pic")[i].childNodes[0].nodeValue;

    imgObj.src = $pic;
    imgObj.onLoad = imagesLoaded($pic);
}
}

var $imageCount = 0;

function itemsLength()
{
var xmlDoc = loadXMLDoc("http://www.wdagdesign.com/ice2/menu.xml");
var y = xmlDoc.getElementsByTagName("title");

return y.length;
}

function imagesLoaded($pic)
{

$imageCount += 1;

if($imageCount != itemsLength())
{
    return;

}else{

    createMenu();
    var $loadingWrapper = document.getElementById('loadingWrapper');
    var $loading= document.getElementById('loading');
    TweenMax.to($loadingWrapper,0,{css:{display:'none'}});
    TweenMax.to($loading,0,{css:{display:'none'}});
    $imageCount = 0;

}

}

function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
{
    xhttp=new XMLHttpRequest();
}
else
{
    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xhttp.open("GET",dname,false);
xhttp.setRequestHeader("Cache-Control", "no-cache");
xhttp.setRequestHeader("Pragma", "no-cache");
xhttp.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT");
xhttp.send();
return xhttp.responseXML;
} 
```

希望有人可以帮我解决这个问题。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:56:20.660

我不会推出自己的图像预加载器（除非你想了解它是如何工作的），而是使用现有的解决方案，比如[waitForImages](https://github.com/alexanderdickson/waitForImages)。

这应该与您拥有的代码相同：

添加此脚本标记：

```
<script src="https://raw.github.com/alexanderdickson/waitForImages/master/src/jquery.waitforimages.js"></script> 
```

你可以使用这个 JS 代码：

```
$(document).ready(function() {
    $('body').waitForImages({
        waitForAll: true,
        finished: function() {
            createMenu();

            $('#loadingWrapper, #loading').fadeOut();
        }  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:25:12.697

将我经验不足的目光投向这两个问题。

你的 html 脚本中需要这个吗？

```
$(document).ready(function(){preloadImages()}); 
```

如果您正在预加载，您希望它们立即加载，而不一定要在文档准备好之后加载。

以及以下；

```
TweenMax.to($loadingWrapper,0,{css:{display:'none'}});
TweenMax.to($loading,0,{css:{display:'none'}}); 
```

display:"none" 将隐藏输出，直到您将其更改为 display:"block" （或其他内容）。我不知道 TweenMax.to() 的 API，但如果 css 参数是可选的，请尝试删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:35:08.293

我认为您的问题出在 onLoad 方法上：

```
imgObj.onload = imagesLoaded($pic); 
```

它应该是 ：

```
imgObj.onload = function () {
    imagesLoaded($pic);
}; 
```

在第一种情况下，立即调用 imagesLoaded 函数。在我的示例中，该函数在加载图像时运行

# c# - Unity 中的错误 CS0111：Update() 已定义

> ID：13846272
> 
> 赞同：0
> 
> 时间：2012-12-12T18:30:44.620
> 
> 标签：c#, controller, unity3d, xbox360

我正在尝试让我的 Xbox 控制器在 Unity 中工作。我使用了这个视频：[http ://www.youtube.com/watch?v=J8HaAyLzPh4](http://www.youtube.com/watch?v=J8HaAyLzPh4)

编写脚本后，我收到以下错误：

```
Assets/XBox360ControllerScript.cs(88,14): error CS0111: A member 
`XBox360ControllerScript.Update()' is already defined. 
Rename this member or use different parameter types. 
```

这是我的代码：

```
using UnityEngine;
using System.Collections;

public class XBox360ControllerScript : MonoBehaviour 
{

    // These are used to modify player movent
    float PlayerMovementSpeed = 30;
    float PlayerRotationSpeed = 100;

    // Seperating Movement and Button inputs into different functions is easier for debugging
    void Update ()
    {
        Movement();
        UserInputs();
    }

    /// <summary>
    /// This function handles movement calculations. You can adjust the code to work with different AXES if preferred.
    /// Right Thumbstick uses the 4th and 5th Input Joystick Axes.
    /// Left Thumbstick uses the X and Y Input Joystick Axes.
    /// For movement the Vertical Axis is read from moving the LEFT THUMBSTICK up and down, 
    /// and the Horizontal Axis is read from moving the LEFT THUMBSTICK left and right.
    /// Rotation is read from the RIGHT THUMBSTICK
    /// </summary>
    void Movement()
    {
        //This line is for vertical movement, using the Z AXIS
        transform.Translate(0,0,Input.GetAxis("Vertical") * Time.deltaTime * PlayerMovementSpeed);

        //This line is for horizontal movement, using the X AXIS. When combined with vertical movement it can be used for strafing.
        transform.Translate(Input.GetAxis("Horizontal") * Time.deltaTime * PlayerMovementSpeed, 0, 0);

        //This line if for rotation, using the Y AXIS
        transform.Rotate(0,Input.GetAxis("RightStick") * Time.deltaTime * PlayerRotationSpeed,0);
    }

    /// <summary>
    /// This function handles the Inputs from the buttons on the controller
    /// </summary>
    void UserInputs()
    {
        if(Input.GetButtonDown("XBox360 A"))
            Debug.Log("A Button");
        if(Input.GetButtonDown("XBox360 B"))
            Debug.Log("B Button");
        if(Input.GetButtonDown("XBox360 X"))
            Debug.Log("X Button");
        if(Input.GetButtonDown("XBox360 Y"))
            Debug.Log("Y Button");
        if(Input.GetButtonDown("XBox360 LB"))
            Debug.Log("LB Button");
        if(Input.GetButtonDown("XBox360 RB"))
            Debug.Log("RB Button");
        if(Input.GetButtonDown("XBox360 Back"))
            Debug.Log("Back Button");
        if(Input.GetButtonDown("XBox360 Start"))
            Debug.Log("Start Button");
        if(Input.GetButtonDown("XBox360 Leftstick"))
            Debug.Log("Leftstick Button");
        if(Input.GetButtonDown("XBox360 Rightstick"))
            Debug.Log("Rightstick Button");

        //Triggers are read from the 3rd JOystick Axis and read from a Sensitivity rating from -1 to 1
        if(Input.GetAxis("XBox360 Triggers") > 0.001)
            Debug.Log("Right trigger");
        if(Input.GetAxis("XBox360 Triggers") < 0)
            Debug.Log("Left trigger");

        //The Dpad is read from the 6th and 7th Joystick Axes and from a Sensitivity rating from -1 to 1
        if(Input.GetAxis("XBox360 Dpad Horizontal") > 0.001)
            Debug.Log("DPAD right button");
        if(Input.GetAxis("XBox360 Dpad Horizontal") < 0)
            Debug.Log("DPAD left button");
        if(Input.GetAxis("XBox360 Dpad Vertical") > 0.001)
            Debug.Log("DPAD up button");
        if(Input.GetAxis("XBox360 Dpad Vertical") < 0)
            Debug.Log("DPAD down button");
    }

    // Use this for initialization
    void Start () 
    {

    }

    // Update is called once per frame
    void Update () 
    {

    }
} 
```

它与 youtube 视频中的完全一样......我怎样才能修复错误/让我的控制器工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:37:10.813

```
// Seperating Movement and Button inputs into different functions is easier for debugging
void Update ()
{
    Movement();
    UserInputs();
} 
```

和

```
// Update is called once per frame
void Update () 
{
} 
```

是矛盾的。您只能在类中定义*一个*具有相同参数（在本例中为无）的 Update() 方法。

# javascript - 使用 Javascript 添加和减去输入值

> ID：13846275
> 
> 赞同：1
> 
> 时间：2012-12-12T18:30:50.547
> 
> 标签：javascript, jquery

我需要使用 Javascript 进行加减运算。我已经成功地将所有输入字段加在一起，但无法从第一个字段中减去该总数。我在下面插入了一个示例，而您一开始的余额为 1500，然后插入假设您有 3 个字段的业务成本。如前所述，我可以成功地将所有字段相加，但不能从余额中减去该总额并将其显示在下方。

添加脚本

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){           
        $('input').each(function() {
            $(this).keyup(function(){  
                calculateTotal($(this));
            });
        });
    });

    function calculateTotal(src) {
        var sum = 0;
        var sumtable = src.closest('.sumtable');

        sumtable.find('input').each(function() {
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });

        sumtable.find(".total").html(sum.toFixed(2));
    }   
</script> 
```

HTML

```
<tr>
    <td>
    <font face='Verdana'>
    <input name='amount' size='6' value='1500.00'></font></td>
</tr>
<table border='0' cellpadding='0' cellspacing='0' width='16%' height='31'  class='sumtable'>
<tr>

    <font face='Verdana' style='font-size: 8pt; font-weight:700'>
    Amount:</font></td>
</tr>
<tr>
    <td>
    <font face='Verdana'>
    <input name='amount' size='6' ></font></td>
</tr>
<tr>
    <td>
    <font face='Verdana'>
    <input name='amount' size='6' ></font></td>
</tr>
<tr>
    <td>
    <font face='Verdana'>
    <input name='select3_amount' size='6' ></font></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<p align='right'><b>
<font face='Verdana' size='2'>Total Cost: $ 
</font></b> </td>
                <td><b><font face='Verdana' size='2'><span class='total'>0</span></font></b></td>
</tr>
<tr>
<td>
<p align='right'><b>
<font face='Verdana' size='2'>Total Remaining: $ 
</font></b> </td>
<td><b><font face='Verdana' size='2'><span class='balance'>0</span></font></b></td>
</tr>
</table> 
```

我需要添加什么来显示剩余余额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:37:14.697

这是你的想法：http: [//jsfiddle.net/ZZX5D/](http://jsfiddle.net/ZZX5D/)？

```
var bal = $('input[name="amount"]').val();
bal = bal - sum
sumtable.find(".balance").html(bal.toFixed(2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:40:07.860

您并没有首先减去这些值。

```
$(function(){           
        $('input').each(function() {
            $(this).keyup(function(){  
                calculateTotal($(this));
            });
        });
    });

    function calculateTotal(src) {
        var sum = 0;
        var sumtable = src.closest('.sumtable');

        sumtable.find('input').each(function() {
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });

        sumtable.find(".total").html(sum.toFixed(2));
        var balance = parseFloat($('.actual').val()) - sum
        sumtable.find(".balance").html(balance.toFixed(2));
    }  

   Added a `class actual` to the **Actual Amount** 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/H5NEE/)**

​</p>

# ruby-on-rails - 为什么 has_one 不适合我？

> ID：13846277
> 
> 赞同：0
> 
> 时间：2012-12-12T18:31:02.750
> 
> 标签：ruby-on-rails

我期望当我创建一个 BrickItem 时，它会引用一个能力。然而，当 BrickItem 创建时，abilities_id 为空。为什么？

我的表创建：

```
 create_table "brick_items", :force => true do |t|
  t.integer  "abilities_id" 
```

我的能力迁移：

```
 Ability.create :name => 'my choice' 
```

我的控制器：

```
def create
        @brick_item = BrickItem.new(params[:brick_item])
        @brick_item.build_ability(:id => 1) 
```

我的模型：

```
 class BrickItem < ActiveRecord::Base
  has_one :ability
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:49:46.750

我不确定我是否完全了解整个情况，但从您共享的代码来看，似乎存在几个问题：

1.  您应该调用列ability_id，因为只有一个
2.  如果砖项目拥有ability_id，那么你应该使用belong_to而不是has_one
3.  build_ability 只会构建一个新的能力。您应该使用 create_ability。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:34:31.390

对不起，我不明白你的代码，如果你试图创建和能力，你应该看起来像这样（在你的能力控制器上）

```
def create
    @brick_item =  @brick_item = BrickItem.new(params[:brick_item])
    @ability = @brick_item.build_brick_item(params[:ability])
end 
```

但我不太确定你想做什么。

# android - setText 在检查更改？

> ID：13846278
> 
> 赞同：0
> 
> 时间：2012-12-12T18:31:09.970
> 
> 标签：android, if-statement, radio-button, switch-statement, oncheckedchanged

我正在尝试制作一个简单的文字游戏，但我什至无法完成第一步。布局中有一个文本视图和 3 个单选按钮。我想在您单击其中一个单选按钮时更改文本并确定应用程序将使用什么文本，我有一个位置 int。示例：我选择按钮一：如果位置 = 1，则将设置文本设置为文本 2。如果位置 = 9，则将文本设置为 11，依此类推。这是代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.TextView;

public class Game extends Activity implements OnCheckedChangeListener{
    public int position;
    TextView text;
    RadioGroup rggr;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        position = 1;
        text = (TextView) findViewById(R.id.text);

        setContentView(R.layout.p1);

        rggr = (RadioGroup) findViewById(R.id.rgGr);
        rggr.setOnCheckedChangeListener(this);
    }

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // TODO Auto-generated method stub
        switch (checkedId){
                case R.id.rb1:
                    if(position == 1){
                        text.setText("this is text 1");
                        position = 2;

                    }
                }
            }
        } 
```

如果我更改行“text.setText（“这是文本 1”）；” 到别的东西。例如 setcontentview 然后一切正常。但是当我想更改文本时，它会在我选择单选按钮的那一刻崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:41:16.220

看起来您在为此活动设置 UI 之前尝试获取对 TextView 的引用。代替

```
 text = (TextView) findViewById(R.id.text);
    setContentView(R.layout.p1); 
```

尝试

```
 setContentView(R.layout.p1);
    text = (TextView) findViewById(R.id.text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:42:35.697

如果您在设置内容视图之前尝试获取视图，它将为空，因此在此示例中，文本为空，因为您在设置内容视图之前调用它。您可以使用调试器进行验证。

因此，当您尝试通过 text.setText(...) 访问它时，它会因 NullPointerException 而崩溃

正如大卫 M 也说过，在 setContentView 之后调用 findViewById 将解决问题

正如 David M 所评论的那样，对于将来的参考，LogCat 输出将很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:19:54.823

感谢大家。这是错误的顺序

```
 setContentView(R.layout.p1);
 text = (TextView) findViewById(R.id.text); 
```

谢谢你。

# ruby-on-rails - Rails 减慢具有大量 has_many 关系的模型的加载时间

> ID：13846280
> 
> 赞同：0
> 
> 时间：2012-12-12T18:31:22.750
> 
> 标签：ruby-on-rails, ruby

我正在处理一个模型（用户）的项目，该模型已经积累了大约十几个“has_many”关系。虽然 User 模型本身并不包含大量数据，但它的加载速度非常慢。

作为测试，我发现如果我注释掉“has_many”关系，它的加载速度会大大加快。

显然我在实践中不能这样做，但是'has_many'发生了什么导致它显着增加了加载时间？我无法想象它实际上是在查询这些关系，对吧？

我能做些什么来加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:16:16.827

只是不要在没有必要的情况下调用关联并检查是否启用了任何预加载。

# haskell - 使用 RankNTypes 和 TypeFamilies 的非法多态或限定类型

> ID：13846284
> 
> 赞同：11
> 
> 时间：2012-12-12T18:31:37.610
> 
> 标签：haskell, type-families

我一直在缓慢地移植[llvm](https://github.com/alphaHeavy/llvm)包以使用数据类型、类型族和类型 nats，并在尝试通过引入由其参数化的新类型来删除用于对值（`ConstValue`和）进行分类的两种新类型时遇到了一个小问题恒常性。`Value``Value`

`CallArgs`仅接受`Value 'Variable a`参数并提供将 a 转换为 a 的`Value 'Const a`函数`Value 'Variable a`。我想概括`CallArgs`一下，允许每个参数是`'Const`or `'Variable`。这是否可以使用类型族以某种方式对其进行编码？我认为这可能与fundeps是可行的。

```
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE TypeFamilies #-}

data Const = Const | Variable

data Value (c :: Const) (a :: *)

type family CallArgs a :: * 
type instance CallArgs (a -> b) = forall (c :: Const) . Value c a -> CallArgs b
type instance CallArgs (IO a)   = IO (Value 'Variable a) 
```

...无法编译：

```
/tmp/blah.hs:10:1:
    非法多态或限定类型：
      forall (c :: Const)。价值约
    在“CallArgs”的类型实例声明中

```

以下解决方案有效（相当于遗留代码），但需要用户强制转换每个常量`Value`：

```
type family CallArgs' a :: * 
type instance CallArgs' (a -> b) = Value 'Variable a -> CallArgs' b
type instance CallArgs' (IO a)   = IO (Value 'Variable a) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:23:31.880

`CallArgs`你要求的有点像一个非确定性函数，它接受并`a -> b`返回`Value 'Const a -> blah`or `Value 'Variable a -> blah`。有时您可以使用非确定性函数做的一件事是翻转它们。事实上，这个有一个确定性逆。

```
type family   UnCallArgs a
type instance UnCallArgs (Value c a -> b) = a -> UnCallArgs b
type instance UnCallArgs (IO 'Variable a) = IO a 
```

现在，任何你会写这样的类型的地方

```
foo :: CallArgs t -> LLVM t 
```

或类似的东西，你可以这样写：

```
foo :: t -> LLVM (UnCallArgs t) 
```

当然，您可能想选择一个比`UnCallArgs`、maybe`Native`或类似名称更好的名称，但要做到这一点需要一些我没有的领域知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:06:59.180

将包装forall c。在`newtype AV`为你工作？

```
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE TypeFamilies #-}

data CV = Const | Variable

data Value (c :: CV) (a :: *)

data AV a = AV (forall c. Value c a)

type family CallArgs a :: * 
type instance CallArgs (a -> b) = AV a -> CallArgs b
type instance CallArgs (IO a)   = IO (Value 'Variable a) 
```

# javascript - MediaElement.js + jQuery 改进了播放列表（希望如此）

> ID：13846286
> 
> 赞同：4
> 
> 时间：2012-12-12T18:31:48.120
> 
> 标签：javascript, jquery, jquery-events, mediaelement.js, playlist

我的 JavaScript 框架：jQuery 1.8.3

使用 mediaelement.js 和播放列表播放音频（来自这个线程） [mediaelement.js 和自定义播放列表](https://stackoverflow.com/questions/11867779/mediaelement-js-and-custom-playlist)

我一直在试图弄清楚如何更改脚本（在底部）以使用这种列表：

```
 <ul class="mejs-list">
     <li class="current"><a href="/media/file-1.mp3">Nice Name for file1</a> 
       other random text or html/img, file description etc </li>
    <li><a href="/media/file-2.mp3">Nice Name for file2</a>other text or html/img</li>
    <li><a href="/media/file-3.mp3">Nice Name for file3</a>other text or html/img</li>
</ul> 
```

而不是这个

```
<ul class="mejs-list">
  <li>/media/file-1.mp3</li>
  <li class="current">/media/file-2.mp3</li>
  <li>/media/file-3.mp3</li>
</ul> 
```

这个脚本把这个列表变成了一个播放列表，效果很好，但是创建了显示完整路径的链接，我更喜欢从链接中获取 src 而不是 li 中的文本，所以我可以使用更好的名称。

```
<script>
$(function(){
    $('audio').mediaelementplayer({
        success: function (mediaElement, domObject) {
            mediaElement.addEventListener('ended', function (e) {
                mejsPlayNext(e.target);
            }, false);
        },
        keyActions: []
    });

    $('.mejs-list li').click(function() {
        $(this).addClass('current').siblings().removeClass('current');
        var audio_src = $(this).text();
        $('audio#mejs:first').each(function(){
            this.player.pause();
            this.player.setSrc(audio_src);
            this.player.play();
        });
    });

});

function mejsPlayNext(currentPlayer) {
    if ($('.mejs-list li.current').length > 0){ // get the .current song
        var current_item = $('.mejs-list li.current:first'); // :first is added if we have few .current classes
        var audio_src = $(current_item).next().text();
        $(current_item).next().addClass('current').siblings().removeClass('current');
        console.log('if '+audio_src);
    }else{ // if there is no .current class
        var current_item = $('.mejs-list li:first'); // get :first if we don't have .current class
        var audio_src = $(current_item).next().text();
        $(current_item).next().addClass('current').siblings().removeClass('current');
        console.log('elseif '+audio_src);
    }

    if( $(current_item).is(':last-child') ) { // if it is last - stop playing
        $(current_item).removeClass('current');
    }else{
        currentPlayer.setSrc(audio_src);
        currentPlayer.play();
    }
}
</script> 
```

如果使用 jQuery 和 mediaelement.js 有更好的方法，我愿意接受建议。

ps
如果我可以有上一个和下一个曲目链接，那也是一个加号，但这不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:22:52.327

想通了，并为每个人的利益发布答案。

HTML

```
<audio id="mejs" src="track1.mp3" type="audio/mp3" controls></audio>
<ul class="mejs-list">
  <li id="track1.mp3">Track1</li>
  <li id="track2.mp3">Track2</li>
  <li id="track3.mp3">Track3</li>
</ul> 
```

javascript

```
 <script>
        $(function(){
            $('audio').mediaelementplayer({
                success: function (mediaElement, domObject) {
                    mediaElement.addEventListener('ended', function (e) {
                        mejsPlayNext(e.target);
                    }, false);
                },
                keyActions: []
            });

            $('.mejs-list li').click(function() {
                $(this).addClass('current').siblings().removeClass('current');
                var audio_src = this.id;
                $('audio#mejs:first').each(function(){
                    this.player.pause();
                    this.player.setSrc(audio_src);
                    this.player.play();
                });
            });

        });

        function mejsPlayNext(currentPlayer) {
            if ($('.mejs-list li.current').length > 0){ // get the .current song
                var current_item = $('.mejs-list li.current:first'); // :first is added if we have few .current classes
                var audio_src = $(current_item).next().text();
                $(current_item).next().addClass('current').siblings().removeClass('current');
                console.log('if '+audio_src);
            }else{ // if there is no .current class
                var current_item = $('.mejs-list li:first'); // get :first if we don't have .current class
                var audio_src = $(current_item).next().text();
                $(current_item).next().addClass('current').siblings().removeClass('current');
                console.log('elseif '+audio_src);
            }

            if( $(current_item).is(':last-child') ) { // if it is last - stop playing
                $(current_item).removeClass('current');
            }else{
                currentPlayer.setSrc(audio_src.match('http.*\.mp3'));
                currentPlayer.play();
            }
        }
        </script> 
```

注意：这不验证 HTML 标准（WC3），但它确实有效，在 Mac 上测试了 Chrome、Safari、Firefox，最新版本仍在寻找符合 HTML 的版本进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:35:10.437

我认为应该是

```
 $(current_item).next().attr('id'); 
```

在 mejsPlayNext 函数中。

```
 <script>
    $(function(){
        $('audio').mediaelementplayer({
            success: function (mediaElement, domObject) {
                mediaElement.addEventListener('ended', function (e) {
                    mejsPlayNext(e.target);
                }, false);
            },
            keyActions: []
        });

        $('.mejs-list li').click(function() {
            $(this).addClass('current').siblings().removeClass('current');
            var audio_src = this.id;
            $('audio#mejs:first').each(function(){
                this.player.pause();
                this.player.setSrc(audio_src);
                this.player.play();
            });
        });

    });

    function mejsPlayNext(currentPlayer) {
        if ($('.mejs-list li.current').length > 0){ // get the .current song
            var current_item = $('.mejs-list li.current:first'); // :first is added if we have few .current classes
            var audio_src = $(current_item).next().attr('id');
            $(current_item).next().addClass('current').siblings().removeClass('current');
            console.log('if '+audio_src);
        }else{ // if there is no .current class
            var current_item = $('.mejs-list li:first'); // get :first if we don't have .current class
            var audio_src = $(current_item).next().attr('id');
            $(current_item).next().addClass('current').siblings().removeClass('current');
            console.log('elseif '+audio_src);
        }

        if( $(current_item).is(':last-child') ) { // if it is last - stop playing
            $(current_item).removeClass('current');
        }else{
            currentPlayer.setSrc(audio_src.match('http.*\.mp3'));
            currentPlayer.play();
        }
    }
    </script> 
```

# command-line - Windows 批处理脚本

> ID：13846288
> 
> 赞同：0
> 
> 时间：2012-12-12T18:32:26.423
> 
> 标签：command-line, batch-file

我如何在 Windows 命令行中传递一个恰好位于文件夹名称中的空格？当我从文件夹名称中删除空格时，我可以执行目录复制。我已经用谷歌搜索了转义空间等，但我还没有找到它。

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T04:27:33.003

使用引用将解决这个问题。这是一个例子。

```
 C:\Users\Administrator>copy "C:\users\Administrator\desktop\new folder" "C:\users\Administrator"
 The command completed successfully.

 C:\Users\Administrator> 
```

我希望这有帮助。

# java - 验证 guice 模块配置 - 如何使用 SPI？

> ID：13846289
> 
> 赞同：1
> 
> 时间：2012-12-12T18:32:42.973
> 
> 标签：java, validation, dependency-injection, guice

我正在编写一个使用 Guice 引导服务器的框架，因此我扩展了 Guice`AbstractModule`以创建一个`Module`为用户配置代码提供一些便利方法的框架。但是，我想在启动代码之前检查配置是否正常。所以它必须在这里的某个地方：

```
// here, before the injector is created?
Injector injector = Guice.createInjector(someModule);               
// here, after configure() is called?
Object something = injector.getInstance(SomeServer.class);
// start the server 
```

似乎在创建注入器之前我可以检查的东西不多，因为模块还没有被`configure()`编辑。有人提到使用 Guice SPI 来验证模块配置，但文档不太清楚。使用 Guice 的人能否简要说明在使用注入器之前验证模块的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:20:23.540

我没有亲身经历太多，但在我看来，你有三个选择：

*   如果您`MyConvenienceMethodModule.myConfigure()`的`MyConvenienceMethodModule.validate()`便捷方法具有足够的表现力以提供有用的信息，而无需运行`configure()`. 从理论上讲，您可以`Module.configure(Binder)`使用模拟进行调用，但是使用 Guice 的 EDSL 太复杂了；改用`ElementVisitor`（下）。

*   调用[`Elements.getElements()`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/spi/Elements.html#getElements%28com.google.inject.Module...%29)特定`Module`的以检查绑定状态。因为元素可能有多种类型，您可能想要创建一个[`ElementVisitor`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/spi/ElementVisitor.html)替代（可能通过创建一个子类[`DefaultElementVisitor`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/spi/DefaultElementVisitor.html)来将您与尚未创建的未来元素隔离）。通过这种方式，您可以很好地查看所有绑定，甚至是 Guice 的 EDSL 中的绑定，同时仍在模块的上下文中。**我认为这是你最好的选择。**

*   像往常一样创建您的注射器并致电[`getAllBindings()`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Injector.html#getAllBindings%28%29)进行调查。如果您的配置的健全性取决于多个模块的交互方式，而不是单个模块的结构方式，这可能是您的最佳选择。如果您只在这一点上进行检查，您将无法真正区分一个模块与另一个模块。

# git - 默认情况下，如何让 Git pull 对我的所有存储库使用 rebase？

> ID：13846300
> 
> 赞同：300
> 
> 时间：2012-12-12T18:33:20.233
> 
> 标签：git

有没有办法设置主机 Git 存储库，以便默认`git pull`使用其（本地）克隆完成的任何操作？`--rebase`通过在 Stack Overflow 上搜索，我了解了`branch.autosetuprebase`，但需要为每个克隆单独配置。

我的项目流程是这样设置的，以便我们`pull`在向它添加功能分支`develop`之前先`merge`创建分支。这`pull`几乎总是使用`--rebase`，所以我试图弄清楚这是否可以成为默认值。

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-12-20T14:45:11.827

默认拉取行为现在有 3 种不同级别的配置。从最一般到最细粒度，它们是：

### 1.`pull.rebase`

将此设置为`true`意味着`git pull`始终等效于`git pull --rebase`（除非`branch.<branchname>.rebase`明确设置为`false`）。这也可以按存储库或全局设置。

### 2.`branch.autosetuprebase`

将此设置为`always`意味着无论何时创建跟踪分支，都会为其创建如下所示的配置条目。对于更细粒度的控制，这也可以设置为`never`，`local`或者`remote`并且可以设置为每个存储库或全局。有关详细信息，请参阅`git config --help`。

### 3.`branch.<branchname>.rebase`

将此设置为`true`意味着该特定分支将始终通过变基从其上游拉取，除非`git pull --no-rebase`明确使用。

# 结论

因此，虽然您无法更改存储库的所有未来克隆的默认行为，但您可以通过`git config --global pull.rebase true`.

* * *

## 回答 #2

> 赞同：235
> 
> 时间：2013-07-12T16:38:46.913

怎么样

```
git config --global pull.rebase true 
```

这将告诉 git 始终使用 rebase 拉动。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2014-10-02T12:53:46.743

# 答案是不。

没有办法设置远程存储库，以便克隆它的每个人都具有`git pull`更改的默认行为。

但是，您可以设置一个服务器端挂钩来检查是否没有人推送合并提交（可能是[这样](http://devblog.nestoria.com/post/98892582763/maintaining-a-consistent-linear-history-for-git-log)的）。

还有一些您可能感兴趣的配置选项。从远程存储库克隆的所有开发人员都必须自己手动设置。

## 1\. 选项`branch.<name>.rebase`

您可以将本地分支配置为始终使用`--rebase`，就像这样，用`<name>`分支名称替换：

```
git config branch.<name>.rebase true 
```

在 上运行后`master`，中的`master`部分`.git/config`如下所示：

```
[branch "master"]
    remote = origin
    merge = refs/heads/master
    rebase = true 
```

## 2\. 选项`branch.autosetuprebase`

为每个 Git 分支运行之前的配置命令可能很麻烦，因此您可以将 Git 配置为自动为每个新分支设置它：

```
git config branch.autosetuprebase always 
```

（您也可以指定`never`、`remote`和`local`，详情请参阅`man git-config`。）

如果没有该`--global`选项，配置将保存到`.git/config`，并且只有当前存储库受到影响。使用`--global`，配置保存到`~/.gitconfig`，并且每个未配置的存储库都会受到影响。

此选项不会影响已经存在的分支。

## 3\. 选项`pull.rebase`

```
git config pull.rebase true 
```

（您也可以`--global`选择它。）

如果此选项为 true，则 running`git pull`等效于`git pull --rebase`，除非`branch.<name>.rebase`已设置为`false`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-24T10:31:43.797

这使得在 给定分支上`--rebase`发出 a 时该选项成为默认选项。`git pull`

@Flimm，我需要添加`true`以使您的第一个选项起作用。

所以正确的语法是：

```
git config branch.<branch>.rebase true 
```

`develop`要在分支上运行此命令：

```
git config branch.develop.rebase true 
```

现在`develop`部分`.git/config`看起来像这样：

```
[branch "develop"]
        remote = origin
        merge = refs/heads/develop
        rebase = true 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-18T11:49:46.967

目前无法为存储库设置默认策略。

如果你自己想要它并且至少使用 git 1.7.9，你可以全局设置`pull.rebase`配置如下：

```
git config --global pull.rebase true 
```

但是你必须在每台机器上做。一种选择是使用该选项配置默认用户主页模板/骨架。但是，用户可能会更改该选项。

如果您不想要合并，您可以定义一个服务器端挂钩来拒绝合并推送。

供您参考，他是pull.rebase的[源文档：](https://git-scm.com/docs/git-config#git-config-pullrebase)

> 如果为 true，则在获取的分支之上重新设置分支，而不是在运行“git pull”时从默认远程合并默认分支。请参阅“branch..rebase”以在每个分支的基础上进行设置。
> 
> 合并时，将 --rebase-merges 选项传递给 git rebase 以便本地合并提交包含在 rebase 中（有关详细信息，请参阅[git-rebase](https://git-scm.com/docs/git-rebase) ）。
> 
> 保存时，还将 --preserve-merges 传递给 git rebase 以便本地提交的合并提交不会通过运行 git pull 变平。
> 
> 当值是交互式时，rebase 以交互模式运行。
> 
> 注意：这是一个可能很危险的操作；除非您了解其含义，否则不要使用它（有关详细信息，请参阅[git-rebase](https://git-scm.com/docs/git-rebase)）。

# css - wordpress 在页脚下方添加了不需要的边距

> ID：13846304
> 
> 赞同：-1
> 
> 时间：2012-12-12T18:33:36.437
> 
> 标签：css, footer, margins

我在档案中找到的任何东西都没有为我工作，所以希望你能帮助我找到解决方案。我在 Dreamweaver 中创建了我的模板，并且几乎成功地将其全部转换为 wordpress 主题，但现在 wordpress 在页脚下方添加了一个小边距。

原始布局上没有出现边距：http: [//merrymeadowspagosa.com/post.html](http://merrymeadowspagosa.com/post.html)

但它在模板上：http: [//merrymeadowspagosa.com/](http://merrymeadowspagosa.com/)

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:37:50.937

与wordpress无关。纯 css：您的`body`元素有`padding-bottom`40px 需要删除。使用 Chrome 开发工具检查它

# batch-file - Hbase 批量查询示例

> ID：13846309
> 
> 赞同：2
> 
> 时间：2012-12-12T18:33:55.680
> 
> 标签：batch-file, hbase

我在“hadoop 设计模式”一书中读到，“HBase 支持批量查询，因此将我们想要执行的所有查询缓冲到某个预定大小是理想的。这个常量取决于您之前可以舒适地存储在内存中的记录数查询 HBase。”

我试图在网上搜索一些示例，但找不到任何示例，有人可以向我展示使用 java map reduce 的示例吗？

谢谢。

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:50:03.080

这是你想要的吗？您可以将 HBase Get 对象保存在列表中并同时提交该列表。这比多次调用 table.get(get) 好一点。

```
Configuration conf = HBaseConfiguration.create();
pool = new HTablePool(conf, 5);
HTableInterface table = pool.getTable('table');
List<Get> gets = new ArrayList<Get>();
table.get(gets); 
```

# c# - 我很难设置我的 OleDb 连接

> ID：13846310
> 
> 赞同：0
> 
> 时间：2012-12-12T18:33:57.057
> 
> 标签：c#, oledb

您好我正在尝试建立与数据源的连接并提取信息并将其显示在网格视图中。问题是我总是得到 ada 的空值。是否可能输入错误的查询或适配器有问题？

此外，我使用 myInt 变量插入不同的数据源，因为我必须处理多个文件，也许这也可能有问题。

```
try
            {
                //establish connectioin
                OleDbConnection conn = new OleDbConnection(("provider=Microsoft.Jet.OLEDB.4.0; " + ("data source=" + myInt + ";" + "Extended Properties=Excel 8.0;")));

               OleDbDataAdapter ada = new OleDbDataAdapter("SELECT * FROM MarkingSheet$]", conn);

                DataSet ds = new DataSet();

               ada.Fill(ds);
               dataGridView1.DataSource = ds.Tables[0].DefaultView;

               conn.Close();
            } 
```

回答这对我有用

```
OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + myPath + ";Excel 12.0;HDR=YES;"); ;
              conn.Open();
              OleDbDataAdapter ada = new OleDbDataAdapter("select * from [Marking Sheet$]", conn); ;
               DataSet ds = new DataSet();
               ada.Fill(ds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:45:09.323

您的代码中的错误是您尝试填充适配器时没有打开连接。你的 SQL 语句也是错误的。您可能还希望像这样将 DataTable 绑定到 DataGridView：-

```
 try
     {

         OleDbConnection conn = new OleDbConnection(("provider=Microsoft.Jet.OLEDB.4.0; " + ("data source=" + myInt + ";" + "Extended Properties=Excel 8.0;")));

         OleDbDataAdapter ada = new OleDbDataAdapter("SELECT * FROM [MarkingSheet$]", conn);

         DataSet ds = new DataSet();

         conn.Open();             

         ada.Fill(ds.Tables[0]);

         conn.Close();

         BindingSource bs = new BindingSource();
         bs.Datasource = ds.Tables[0];

         dataGridView1.DataSource = bs;

      }
  catch(OledbException x)
      {
        // Handle Exception
      } 
```

编辑*** *

尝试将连接字符串更改为：-

```
string connString = "provider=Microsoft.Jet.OLEDB.4.0;Data source=" + myInt + ";Extended Properties=Excel 8.0;HDR=Yes;IMEX=1\";"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:36:08.063

将sql更改为

```
"SELECT * FROM [MarkingSheet$]" 
```

因为缺少左括号。

# xml - “非零退出状态”错误下载 XML 和 RCurl R 包

> ID：13846311
> 
> 赞同：8
> 
> 时间：2012-12-12T18:33:59.867
> 
> 标签：xml, r, installation, package, rcurl

**我有这个问题：**

```
> install.packages("RCurl")
Installing package(s) into ‘/home/username/R/x86_64-redhat-linux-gnu-library/2.13’
(as ‘lib’ is unspecified)
trying URL 'http://lib.stat.cmu.edu/R/CRAN/src/contrib/RCurl_1.95-3.tar.gz'
Content type 'application/x-gzip' length 868491 bytes (848 Kb)
opened URL
==================================================
downloaded 848 Kb

* installing *source* package ‘RCurl’ ...
checking for curl-config... no
Cannot find curl-config
ERROR: configuration failed for package ‘RCurl’
* removing ‘/home/username/R/x86_64-redhat-linux-gnu-library/2.13/RCurl’
Warning in install.packages :
  installation of package 'RCurl' had non-zero exit status

The downloaded packages are in
    ‘/tmp/RtmpKyAgF8/downloaded_packages’ 
```

**和：**

```
> install.packages("XML")
Installing package(s) into ‘/home/username/R/x86_64-redhat-linux-gnu-library/2.13’
(as ‘lib’ is unspecified)
trying URL 'http://lib.stat.cmu.edu/R/CRAN/src/contrib/XML_3.95-0.1.tar.gz'
Content type 'application/x-gzip' length 1724282 bytes (1.6 Mb)
opened URL
==================================================
downloaded 1.6 Mb

* installing *source* package ‘XML’ ...
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
No ability to remove finalizers on externalptr objects in this verison of R
checking for sed... /bin/sed
checking for pkg-config... /usr/bin/pkg-config
checking for xml2-config... no
Cannot find xml2-config
ERROR: configuration failed for package ‘XML’
* removing ‘/home/username/R/x86_64-redhat-linux-gnu-library/2.13/XML’
Warning in install.packages :
  installation of package 'XML' had non-zero exit status

The downloaded packages are in
    ‘/tmp/RtmpKyAgF8/downloaded_packages’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-03T19:00:33.370

在 CentOS 6.4 上运行，我刚刚成功地按照以下步骤操作：

1.  使用 Linux 命令行安装 curl-devel 和 libxml：

```
$ sudo yum install curl curl-devel
$ sudo yum -y install libxml2 libxml2-devel 
```

2.  在 R 控制台上，重新启动 R 会话并安装 RCurl 和 XML 包：

```
>> install.packages("RCurl")
>> install.packages("XML") 
```

3.  加载库：

```
>> library(RCurl)
>> library(XML) 
```

希望这可以为您节省一天的时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:53:37.810

您需要将 RCurl 和 XML 的版本与您正在使用的 R 版本相匹配。由于您的 R 版本比当前版本更落后一个主要版本，因此没有理由认为当前版本的 XML 和 Rcurl 会匹配。您可以尝试从它们的存档版本安装。我会从大约一年半前挑选一个.....或者只是更新你的 R 安装。

@TylerRinker 的链接中可能有一个有用信息的内核，尽管它是针对错误操作系统的错误版本。如果您修剪 URL 并查看：http: [//www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/2.13/](http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/2.13/)您将能够确定要使用哪个版本的源包用于您在 redhat 上过时的 R 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T01:54:48.450

安装 RCurl 时我遇到了类似的问题。包含我需要的软件包在 Amazon Linux 上称为 libcurl-devel，根据[回答我问题的这篇文章](https://www.centos.org/forums/viewtopic.php?f=13&t=44963)，CentOS 也是如此。可以用命令安装`sudo yum install libcurl-devel`。如果您使用的是基于 Debian 的发行版，则该软件包可能具有不同的名称，并且将使用 apt 进行安装。

您的 XML lib 问题可能有类似的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-23T10:20:42.020

在 Ubuntu 上安装 curl 和 xml。跑

```
sudo apt-get install libcurl4-openssl-dev libxml2-dev 
```

R 中 package install 的错误消息表明`curl`和`xml`库不存在或找不到。

# git - 如何在保留 master 更改的同时 Git Merge？

> ID：13846317
> 
> 赞同：1
> 
> 时间：2012-12-12T18:34:14.530
> 
> 标签：git, merge, git-merge

我在 git repo 中有 wordpress 主题，我对其进行了修改以满足我的需要。现在已经发布了主题的版本更新。我为主题更新创建了一个新分支并在那里提交了更新。现在我希望`master`在合并时保留我对分支的更改。

但是怎么做？

当我将分支合并回`master`with 时`git merge theme`，它会覆盖我想要保留的更改！

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:46:15.950

如果您在提交对主题的更改`theme` *后*分支到，它们已经在分支版本中（对于 git），因此将被覆盖。但你可以解决这个问题。首先，如果您已经合并，您的`theme`分支进入`master`，通过`git log`（或使用 gitk）找到 master*在*您合并之前的提交`theme`（`git reflog`可能也知道这一点）。运行`git reset --hard $commitid`，`$commitid`你刚刚发现的提交的 id 在哪里。这是为了撤消（坏）合并。

然后，仍然在 master 上，您在对主题进行更改*之前*`git log`通过并找到第一个提交。记下提交 ID，然后替换为您刚刚记下的 ID：*`COMMITID`*

 *```
git checkout COMMITID 
```

Git 会说出一些关于分离的 HEAD 等的内容，但现在忽略它。现在你再次分支：

```
git checkout -b theme-new  # equivalent to git branch theme-new 
```

这将为您提供与 master 处于相同状态的分支`COMMITID`。现在您再次下载新的主题版本并将其复制到存储库中。提交该更改。切换回主控：

```
git checkout master 
```

验证 master 是否在您对其进行的最后一次提交上。然后做：

```
git merge theme-new 
```

可能存在冲突，请参阅[gitbook 中的此有用参考](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts)以了解如何管理它们。完成合并后，您应该拥有您想要的东西。

* * *

为什么会这样：在提交自定义主题*后，*您从 master 分支。这样，git 假设在*新*分支中已经包含了自定义主题。通过从*上游*复制更新的主题（并提交），你告诉 git 你想用下载的版本完全覆盖你的自定义版本。在合并时，git 会查找两个分支的最新共同提交（包括您的自定义），并且仅应用在该提交*之后*所做的任何提交。

因此，它将应用确切的提交，用上游版本覆盖整个主题。你显然不希望那样。通过执行我上面描述的操作，您将告诉 git，*上游*版本实际上是与您创建的版本“并行”创建的。所以它会更加小心，看看它如何合并更改。我会画一个漂亮的图表：

```
 G---H theme
             /
A---B---C---D       master
     \
      E---F         theme-new 
```

假设提交`A`并且`B`是您在主题自定义之前对数据和任何开发的初始签入。进一步假设这`C`是您自定义主题的提交，并且`D`是其他内容。`G`并且是您为从*上游*`H`下载和应用包所做的提交，而实际上是相同的，只是在另一个分支中。`theme`*`E``F`*

 *`theme`merging和into master的区别`theme-new`只是分支实际发散的地方`master`，这很关键。如您所见，git 假设您的自定义*包含*在 中，因为您在自定义*后*`theme`分支了。但是在 中，git 不会假设，因为您在更改*之前*将其分支。因此，它将尝试与自定义项进行实际合并。*`theme-new`***

# plot - 八度图文本字段大小

> ID：13846320
> 
> 赞同：0
> 
> 时间：2012-12-12T18:34:34.327
> 
> 标签：plot, octave, font-size

我正在使用以下方法将文本添加到八度图：

h = 文本（x1，-2，'x_1'）；

然后我尝试使用以下方法更改字体大小：

设置（h，'字体大小'，16）；

只有下标 '1' 的大小会发生变化。这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:08:05.737

我正在运行 Octave 3.4.0 和 gnuplot 4.4.0。我无法重现这种行为。我的钱花在了虫子上。

# c# - 在另一幅图像上绘制图像的变化部分

> ID：13846321
> 
> 赞同：0
> 
> 时间：2012-12-12T18:34:36.950
> 
> 标签：c#, image, merge

假设我有两个图像 img1.jpg 和 img2.jpg。使用一些例程，我可以提取两个图像之间的差异。现在差异保存在另一个名为 diff 的位图变量中

这是代码

```
Bitmap diff = new Bitmap(bounds.Width, bounds.Height);
Graphics g = Graphics.FromImage(diff);
g.DrawImage(secondImg, 0, 0, bounds, GraphicsUnit.Pixel);
g.Dispose(); 
```

我知道矩形方面的差异，也保存了差异变量的差异。现在我想在我的第一张图片上合并或绘制这种差异。我试过像这样的代码

```
Graphics g1 = Graphics.FromImage(firstImg);
g1.DrawImage(secondImg, 0, 0, bounds, GraphicsUnit.Pixel);
g1.Dispose(); 
```

但它不起作用，因为当我打开我的第一张图片 img1.jpg 时，我看到该图片有任何变化。我想在我的第一张图片 img1.jpg 上绘制更改。我的代码有什么问题，无法在第一张图像上转储或绘制更改。

基本上我必须重建img1，如果我有img2和img2和img1之间的差异。请指导我。谢谢

# html - 如何在不使用浮动的情况下修复按钮位置

> ID：13846324
> 
> 赞同：0
> 
> 时间：2012-12-12T18:34:52.103
> 
> 标签：html, css

我无法正确对齐并排的按钮。我需要在不使用浮动资源的情况下构建解决方案。看见：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Documento sem título</title>
        <style type="text/css">
            * {
                margin:0px;
                padding:0px;
            }
            a {
                display:inline-block;
                padding: .63em;
                border:1px solid #ccc;
                position:relative;
            }
            .b2 {
                padding: .0em 1em .0em 2.1em;
                text-decoration:none
            }
            .icon {
                position:absolute;
                width:16px;
                height:16px;
                background-color:#999;
                top:50%;
                margin-top:-8px;
                left:2px;
            }
        </style>
    </head>

    <body>
        <div style="background-color:#f0f0f0; margin-top:50px; position:relative; height:22px; padding:4px;"> <a href="#"><span class="icon"></span></a>

            <div style="display:inline-block; width:2px; height:22px; background-color:#666;"></div> <a href="#"><span class="icon"></span></a>
 <a href="#" class="b2"><span class="icon"></span><span>Casa d wqe dde qeasd sd</span></a>

        </div>

<h2 style="background:#999"> test</h2>

<a href="#" class="b2"><span class="icon"></span><span>Casa d wqe dde qeasd sd</span></a>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:42:33.513

在这里试试这个：

```
div .b2 {
    top:-6px;
} 
```

[演示](http://jsfiddle.net/u59xD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:44:31.657

使用无序列表项怎么样？看到这个 jsFiddle：[jsFiddle](http://jsfiddle.net/QtndN/)

您可以使用这样的 CSS 属性将其设置为内联：

```
li {
list-style:none;
display:inline;
} 
```

# c++ - 如何以特定于语言环境的方式格式化不完整的日期和时间

> ID：13846334
> 
> 赞同：3
> 
> 时间：2012-12-12T18:35:49.223
> 
> 标签：c++, boost, c++11, locale, boost-locale

> 如何以特定于语言环境的方式格式化不完整的日期和/或时间？

我有一个日期/时间存储在一组 7 个字符串中：

*   `dayOfWeek`- 星期几。([1,7])
*   `dayOfMonth`- 一个月中的哪一天。([1,31])
*   `monthOfYear`- 一年中的月份。([0,11])
*   `year`- 那一年。([-∞,∞])
*   `hourOfDay`- 一天中的时间。([0,11])
*   `minuteOfHour`- 小时的分钟。([0,59])
*   `meridianOfDay`- 当天的子午线。([0,1])

由于各种原因，其中大部分是通过使用 IR on web 数据获得的，其中一些字符串可能为空。那么问题是如何以特定于语言环境的方式格式化这些不完整的日期/时间。

我目前使用**boost.locale 所做**的是创建一个`date_time`并添加各种完整的日期/时间组件，然后`date_time`以特定于语言环境的方式将其存储在字符串中。像这样的东西：

```
date_time dateTime;
if(!dayOfWeek.empty())
  dateTime = period::day_of_week(lexical_cast<int>(dayOfWeek));
if(!dayOfMonth.empty())
  dateTime = period::day(lexical_cast<int>(dayOfMonth));
if(!monthOfYear.empty())
  dateTime = period::month(lexical_cast<int>(monthOfYear));
if(!year.empty())
  dateTime = period::extended_year(lexical_cast<int>(year));
if(!hourOfDay.empty())
  dateTime = period::hour_12(lexical_cast<int>(hourOfDay));
if(!minuteOfHour.empty())
  dateTime = period::minute(lexical_cast<int>(minuteOfHour));
if(!meridianOfDay.empty())
  dateTime = period::am_pm(lexical_cast<int>(meridianOfDay));

std::stringstream stringStream;
stringStream.imbue(desiredLocale);
stringStream << dateTime;

std::string localeSpecificDateTime = stringStream.str(); 
```

这在某种程度上有效。我有一个语言环境格式化`date_time`。但是，由于I 开头，不完整的字段填充了*now的日期/时间。*`date_time`

如果可以将不完整的字段标记为不包含在`date_time`.

**PS**：我知道我可以为每个语言环境维护 127 (2 ⁷ -1) 个格式化字符串，但是创建/查找这些字符串然后维护它们似乎是一种精神错乱的方法！

# ruby - 在define_method中调用super时没有超类方法

> ID：13846339
> 
> 赞同：7
> 
> 时间：2012-12-12T18:36:17.280
> 
> 标签：ruby

*   为什么我`talk: super: no superclass method talk (NoMethodError)`在覆盖已存在的方法时会收到以下错误？
*   如何修复此代码以调用超级方法？

这是我正在使用的示例代码

```
class Foo
  def talk(who, what, where)
    p "#{who} is #{what} at #{where}" 
  end
end

Foo.new.talk("monster", "jumping", "home")

class Foo
  define_method(:talk) do |*params|
    super(*params)
  end
end

Foo.new.talk("monster", "jumping", "home") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:48:14.517

它不起作用，因为您覆盖了#talk。试试这个

```
class Foo
  def talk(who, what, where)
    p "#{who} is #{what} at #{where}" 
  end
end

Foo.new.talk("monster", "jumping", "home")

class Bar < Foo
  define_method(:talk) do |*params|
    super(*params)
  end
end

Bar.new.talk("monster", "table", "home") 
```

# android - 如何超过方法代码的 65535 字节限制

> ID：13846340
> 
> 赞同：5
> 
> 时间：2012-12-12T18:36:19.027
> 
> 标签：android, sqlite

我有一个产品列表，但 Java 抱怨该方法超出了 65535 字节的限制。如何添加更多单词并克服限制？

```
public class ProductList extends Activity {

   // List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_product_list);

    String as = System.getProperty("line.separator");

    String products[] = {

            // I want these words to keep in a database
            // Because here is 65kb limit but I need more...

            "Banana"    +as+    "Its color is yellow."  ,
            "Orange"    +as+    "Orange is a sour fruit."   ,
            "Onion" +as+    "Onion usually used on Pizza"   ,
            "Google"    +as+ "Google is a giant search engine." ,
            "Love"  +as+    "Love is related to heart." ,
            "Lily"  +as+    "It  is one kind of white flower."  ,
            "Banana"    +as+    "Its color is yellow."  ,
            "Orange"    +as+    "Orange is a sour fruit."   ,
            "Onion" +as+    "Onion usually used on Pizza"   ,
            "Google"    +as+ "Google is a giant search engine." ,
            "Love"  +as+    "Love is related to heart." ,
            "Lily"  +as+    "It  is one kind of white flower."  ,           
            "Banana"    +as+    "Its color is yellow."  ,
            "Orange"    +as+    "Orange is a sour fruit."   ,
            "Onion" +as+    "Onion usually used on Pizza"   ,
            "Google"    +as+ "Google is a giant search engine." ,

    };

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list,   products);
    lv.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */
    inputSearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            ProductList.this.adapter.getFilter().filter(cs);
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

}

} 
```

为了更容易理解：

![在此处输入图像描述](../Images/f9d93b755aef70c6ba2f4ce419efdcb6.png)

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T18:39:52.673

据我所知，这不是 Sqlite 的限制 - Eclipse 错误表明它是*方法*的问题。

我*强烈*建议，如果您有大量数据，则应将其保存在单独的资源中。然后只需在执行时加载资源。无需将其融入您的*代码*中。如果需要，您始终可以包含一些字符串以替换为平台行分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:51:21.153

您在堆栈上分配该数组，并且堆栈通常有 64kb 的限制，它可以容纳多少。

您的解决方案是使用堆。如果您将代码更改为

```
// allocate an array on the heap
ArrayList<String> products = new ArrayList<String>();
products.add("Banana" +as+ "Its color is yellow.");
products.add("Orange" +as+ "Orange is a sour fruit.");
products.add("Onion" +as+ "Onion usually used on Pizza");
// etc 
```

然后我打赌那会奏效。

但是，您最好的选择是按照 Jon Skeet 的说法，将所有数据存储在资源中，并在需要时加载。由于看起来您使用的是 Android，因此我建议您使用[String Arrays](https://developer.android.com/guide/topics/resources/string-resource.html#StringArray)，这就是您应该如何处理此类数据的方式。

**更新：**

有趣的。所以事实证明这是一个Java限制。看到[这个答案](https://stackoverflow.com/a/5689834/324625)。我的理解是class文件中的跳转偏移量是16位的，也就是说方法的大小最多可以是65535字节。

因此，hack 解决方案是将其拆分为更小的方法：

```
// allocate an array on the heap
ArrayList<String> products = new ArrayList<String>();
addFirstThousand(products);
addSecondThousand(products);
// etc.

private void addFirstThousand(ArrayList<String> products) {
    products.add("Banana" +as+ "Its color is yellow.");
    products.add("Orange" +as+ "Orange is a sour fruit.");
    products.add("Onion" +as+ "Onion usually used on Pizza");
    // etc
} 
```

但这是一个***可怕***的想法。将这些字符串放在某种数据文件中然后在运行时加载它确实会更好。如果出于某种原因您真的反对做正确的事情并使用 Google 为您提供的[字符串数组](https://developer.android.com/guide/topics/resources/string-resource.html#StringArray)，那么您也可以将这些字符串放在 assets 中的文本文件中，然后通过普通的 Java 读取它`BufferedReader`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:40:01.680

解决方案是将对象动态分配到堆中，这实际上是无限的。

# google-app-engine - Google App Engine 中的数据是否始终按顺序存储？

> ID：13846347
> 
> 赞同：0
> 
> 时间：2012-12-12T18:36:44.407
> 
> 标签：google-app-engine, objectify

如果我在 Google App Engine 中保存/存储列表，数据是否总是按顺序存储？例子：

```
 List<String> = {"one", "two", "three"} 
```

它们是否按顺序存放？例如，使用对象化：

```
 @Entity
 class { List<String> } 
```

当我加载实体时，列表的顺序是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:51:14.810

您的字符串列表将以相同的顺序存储。如果您移动到 ​​@Embedded 复杂对象，这也应该始终如一地工作，详细说明如下[http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded)

# javascript - 插件可以与 downthemall 插件通信吗？

> ID：13846356
> 
> 赞同：3
> 
> 时间：2012-12-12T18:37:17.850
> 
> 标签：javascript, firefox-addon

**嗨，** 我想编写用于管理下载链接的firefox插件（调度，重试，自动刷新下载地址......）

但我不想重新发明轮子（它实际上不会下载它只会管理上面的链接）

那么，有没有办法与 downThemall 通信（或者 - 如果不可能 - 火狐常规下载）？是否有一些 api 或其他东西可以与另一个插件通信？

*   添加指向 DTA 的链接
*   获取链接状态（完成、暂停、失败）
*   ... 无论如何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:59:47.077

是的，有一个[API](https://github.com/downthemall/downthemall-mirror/blob/master/modules/api.js)。它通过`DTA`全局变量暴露给 ChromeWindow。

# maven - Maven 3 可以重新下载损坏的文件而不是使构建失败吗？

> ID：13846357
> 
> 赞同：9
> 
> 时间：2012-12-12T18:37:23.653
> 
> 标签：maven, continuous-integration, maven-3

```
[WARNING] The POM for org.testng:testng:jar:5.14.10 is invalid,
          transitive dependencies (if any) will not be available: 1 problem was
          encountered while building the effective model for
          org.testng:testng:5.14.10

[FATAL]   Non-readable POM
          /home/teamcity/.m2/repository/org/sonatype/oss/oss-parent/3/oss-parent-3.pom:
          input contained no data @
          /home/teamcity/.m2/repository/org/sonatype/oss/oss-parent/3/oss-parent-3.pom 
```

损坏的文件发生在`~/.m2`，每个人都知道。修复它就像删除损坏的文件一样简单，因此 Maven 可以重新下载它。但是，我不想手动 grep 日志、连接到构建代理并手动删除这些文件。可靠的构建应该能够处理这些问题。

**有什么方法可以让 Maven 重新下载损坏的文件而不是使构建失败？我不想`~/.m2`在每次构建执行之前删除，因为它会使构建变得非常慢。**

为什么会这样？我的一位客户的基础设施损坏了。虚拟机经常在没有任何通知的情况下重新启动。而且由于大部分时间都在执行构建，因此文件在例如`~/.m2`. 在这件事上我没有什么可以改变的，这是他们的服务器和他们的政策——或者只是无能。但是我必须手动修复构建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:21:51.990

就 Maven 3.0.4 而言，没有办法通过一次调用 maven 来解决这个问题。

你可以做的是编写一个聚合器插件，它逐步遍历反应器中的每个模块，并通过 API 调用（而不是 mojo 注释）解决它们的依赖关系，从而允许捕获故障并清除和重试。

它不会捕获所有情况（例如插件依赖项），但如果你做了类似的事情

```
$ mvn org.mine.maven:resolve-all:resolve-all || rm -rvf ~/.m2/repository
$ mvn clean verify 
```

它会更可靠。

如果您很高兴需要 Maven 3.x，您可以编写一个构建扩展并将其放入`$MAVEN_HOME/lib`，构建扩展可以执行与插件相同的技巧，但由于它在插件解析*之前*发挥作用，它可以捕获插件的情况.

很多工作，就个人而言，一个好的 MRM 使重新下载变得愚蠢快速，在使用 Maven 的 8 年中，我可能有 3-4 次本地 repo 腐败......播放和元数据（pom）从一个解决，而工件来自另一个......只有一种情况是“错误下载的HTML”......所有这些都将被MRM阻止

# java - getJson 无法调用 Struts2 操作

> ID：13846358
> 
> 赞同：0
> 
> 时间：2012-12-12T18:37:25.263
> 
> 标签：java, jquery, ajax, json, struts2

HTML 文件

```
<html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    var $ = jQuery;
    $(function(){
        $("#introForm").submit(function(){

            $.getJSON('ajax/test.action', formInput,function(data){    
                alert(data.greeting);
            });

            return false;
        });
    });
</script>
</head>
<body>
<form  id="introForm">
    <label >Enter Your Name</label>

    <input type="submit">
</form>

</body>
</html> 
```

Struts.xml 动作

```
 <package  extends="json-default" name="jsonStruts2" namespace="/ajax" >
    <action name="test" class="com.vrde.daems.action.TestAction" method="sayHello">
        <result type="json"></result>
    </action>
</package> 
```

Java 类（TestAction.java）

```
public class TestAction {
    private String greeting;

    public String getGreeting() {
        return greeting;
    }

    public void setGreeting(String greeting) {
        this.greeting = greeting;
    }

    public String sayHello()
    {
        greeting = "Hello Ajax";
        return "success";
    }
} 
```

`sayHello()`当我点击提交按钮时，方法没有被调用..但是当我直接输入 url 时，浏览器上会显示 json 格式的内容`localhost:8000/ajax/test` 谁能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:29:50.220

将您的输入更改为像这样的按钮`<input id="btn_send" type="buttom">`和您的脚本

```
$("#btn_send").click(function(){

   $.getJSON('ajax/test.action', $('#formInput').serialize(), function(data){    
        alert(data.greeting);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:43:47.310

这是因为`formInput`在您的脚本中未定义。您需要将其从`getJSON`.

```
<script type="text/javascript">
   var $ = jQuery;
   $(function(){
     $("#introForm").submit(function(){
        $.getJSON('ajax/test.action', function(data){
            alert(data.greeting);
        });
        return false;
     });
   });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:45:23.370

尝试

```
<script type="text/javascript">

var $ = jQuery;
$(function(){

    $("#introForm").submit(function(){

        $.getJSON("<s:url action='test' namespace='ajax' includeParams='none' />", formInput,function(data){

            alert(data.greeting);
        });

        return false;

    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:43:23.940

```
<script type="text/javascript">
    var $ = jQuery;
    $(function(){
        $("#introForm").submit(function(){
            $.getJSON('./test.action', formInput,function(data){
                alert(data.greeting);
            });

            return false;
        });
    });
</script> 
```

如果您在同一个控制器中引用操作，这将起作用......

# c++ - 当我明确使用默认构造函数时，为什么会出现编译错误？

> ID：13846365
> 
> 赞同：1
> 
> 时间：2012-12-12T18:37:54.793
> 
> 标签：c++

> **可能重复：**
> [带空括号的默认构造函数](https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets)

谁能解释为什么我得到以下代码的编译错误？

```
CString CDiagram::GetFormattedMessage()
{
    CString strFormat();
    strFormat = "Warning : %s"
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:38:43.700

您声明了一个`strFormat`返回 type的函数`CString`。哎呀。谷歌“C++ 最令人头疼的解析”以获取更多文献。正确的语法是

```
CString strFormat; 
```

它*确实*显式地调用了默认构造函数，不像在 Java 中，它只会声明一个空变量而不实例化它。

# .htaccess - 相同的 .htacces - 多个停放的域 - 相同的根文件夹 - 重定向到语言链接

> ID：13846373
> 
> 赞同：1
> 
> 时间：2012-12-12T18:38:12.110
> 
> 标签：.htaccess, lang

我有多个域。

```
domain.com
domain.dk
domain.ro ... etc 
```

所有这些都通过 Parked Domains 指向同一个根文件夹。所以 .htaccess 文件对所有人都是一样的。

还有一个 php 语言脚本和一个 php 货币脚本，可以帮助用户通过会话变量更改语言。该链接如下所示：（`index.php?lang=en&currency=USD`这是默认会话变量 'en' AND 'USD' ）。

我怎样才能设置 .htaccess 所以当有人点击 www.domain.dk 重定向到？

```
www.domain.dk/index.php?lang=da&currency=DKK 
```

我如何设置 .htaccess 所以当有人点击 www.domain.ro 重定向到？

```
www.domain.ro/index.php?lang=ro&currency=RON 
```

ETC ...

谢谢你。弗罗林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:14:45.833

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} \.dk$
RewriteRule ^$ /index.php?lang=da&currency=DKK [QSA]

#repeat for .ro 
```

# objective-c - NSMenuItem 中的中心图标

> ID：13846374
> 
> 赞同：1
> 
> 时间：2012-12-12T18:38:15.743
> 
> 标签：objective-c, macos, cocoa

我有以下菜单，其中包含在左侧显示图标的项目。

我知道左侧有这么多白色是 OS X 默认设置，但我想让图标居中在文本和边缘之间的中间。

有没有办法让这些图标居中？

![在此处输入图像描述](../Images/8b2c12df0bf740a99c00034afdfae7e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:44:43.570

左边的那个空间是菜单项的状态，用复选标记和破折号等标记表示。如果没有子类化 NSMenuItem，您将无法删除该空间。

您仍然可以选择为每个菜单项设置自己的视图。在其中，您可以按照您想要的方式放置图像和文本。

请参阅 Apple 的[NSMenuItem 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html)。

他们的文档[《应用程序菜单和弹出列表简介》](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MenuList/MenuList.html%23//apple_ref/doc/uid/10000032i)也提供了丰富的信息。

# vb.net - SoundCloud API，就像一首曲目（VB.Net）

> ID：13846375
> 
> 赞同：2
> 
> 时间：2012-12-12T18:38:17.960
> 
> 标签：vb.net, soundcloud

在 VB.net 中制作 SoundCloud 桌面客户端时遇到了麻烦：我根本无法喜欢和不喜欢曲目。

登录、播放音乐、获得点赞……一切正常，但点赞曲目给我一个 404（找不到文件）错误。

这是我正在使用的代码：

```
Dim request As WebRequest = WebRequest.Create("https://api.soundcloud.com/me/favorites" & "?client_id=" & Soundcloud.client_ID & "&oauth_token=" & _Token)
request.Method = "PUT"
Dim postData As String = Track.id
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
request.ContentType = "application/x-www-form-urlencoded"
request.ContentLength = byteArray.Length
Dim dataStream As Stream = request.GetRequestStream()
dataStream.Write(byteArray, 0, byteArray.Length)
dataStream.Close()
Dim response As WebResponse = request.GetResponse()
Console.WriteLine(CType(response, HttpWebResponse).StatusDescription)
dataStream = response.GetResponseStream()
Dim reader As New StreamReader(dataStream)
Dim responseFromServer As String = reader.ReadToEnd()
Console.WriteLine(responseFromServer)
reader.Close()
dataStream.Close()
response.Close() 
```

开发者网站并没有真正说明什么，它只是说：“GET，PUT，DELETE /users/{id}/favorites/{id} 用户最喜欢的曲目”

有谁能帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:13:22.550

我用“api.soundcloud.com/me/favorites/”替换了 URL；& Track.id & "?client_id=" & Soundcloud.client_ID & "&oauth_token=" & _Token

那没有用，但是一旦我将 PostData 设置为 String.Empty 就可以了……无论如何，谢谢！

# javascript - Javascript变量范围阻碍了我

> ID：13846378
> 
> 赞同：2
> 
> 时间：2012-12-12T18:38:25.200
> 
> 标签：javascript, infovis

我似乎一辈子都得不到这个。在调用 getJson2 函数后，我无法访问变量“json”。我通过一个 php 脚本动态地获取我的 json，这很有效。但后来它消失了。[在InfoVis 示例](http://philogb.github.com/jit/static/v20/Jit/Examples/Spacetree/example1.html)中，有一个示例用作指南，其中 json 嵌入在 init 函数中。我正在尝试动态地获取它。

```
<script language="javascript" type="text/javascript">
var labelType, useGradients, nativeTextSupport,animate,json;
function getJson2()
{
  var cd = getParameterByName("code");
  $.get("tasks.php?code="+cd, function(data){
    return data;
  })
 };
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}

(function() {
  var ua = navigator.userAgent,
      iStuff = ua.match(/iPhone/i) || ua.match(/iPad/i),
      typeOfCanvas = typeof HTMLCanvasElement,
      nativeCanvasSupport = (typeOfCanvas == 'object' || typeOfCanvas == 'function'),
      textSupport = nativeCanvasSupport 
        && (typeof document.createElement('canvas').getContext('2d').fillText == 'function');
  //I'm setting this based on the fact that ExCanvas provides text support for IE
  //and that as of today iPhone/iPad current text support is lame
  labelType = (!nativeCanvasSupport || (textSupport && !iStuff))? 'Native' : 'HTML';
  nativeTextSupport = labelType == 'Native';
  useGradients = nativeCanvasSupport;
  animate = !(iStuff || !nativeCanvasSupport);
})();
debugger;
var Log = {
  elem: false,
  write: function(text){
    if (!this.elem) 
      this.elem = document.getElementById('log');
    this.elem.innerHTML = text;
    debugger;
    this.elem.style.left = (500 - this.elem.offsetWidth / 2) + 'px';
  }
};  
function init(){
json = getJson2();
    //init data
var st = new $jit.ST({  
    //id of viz container element  
    injectInto: 'infovis',  
    //set duration for the animation  
    duration: 800,  
    //set animation transition type  .................. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:49:18.963

```
function getJson2()
{
  var cd = getParameterByName("code");
  $.get("tasks.php?code="+cd, function(data){
    return data;
  })
}; 
```

`getJson2()`不返回任何东西。回调函数`$.get()`返回一些东西，但没有任何东西在监听那个返回。

听起来您想要同步加载。`$.get()`只是此`$.ajax()`调用的简写：（[*请参阅文档）*](http://api.jquery.com/jQuery.get/)

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

并`$.ajax()`支持更多功能，例如设置`async`为`false`.

```
$.ajax({
  url: "tasks.php?code="+cd,
  async: false,
  dataType: 'json',
  success: function(data) {
    // data !
  }
}); 
```

这意味着，`getJson2`然后变为：

```
function getJson2()
{
  var cd = getParameterByName("code");
  var jsonData;

  $.ajax({
    url: "tasks.php?code="+cd,
    async: false,
    dataType: 'json',
    success: function(data) {
      jsonData = data;
    }
  });

  return jsonData;
};

var myJsonData = getJson2(); 
```

或者仍然使用`$.get`异步样式，并使用回调代替。

```
function getJson2(callback)
{
  var cd = getParameterByName("code");
  $.get("tasks.php?code="+cd, function(data){
    callback(data);
  });
};

getJson2(function(data) {
  // do stuff now that json data is loaded and ready
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:41:58.717

`$.get`调用是异步的。当您调用 时`return data;`，该函数早已返回。在函数范围之外创建一个变量，然后在`$.get`回调处理程序中分配`data`给该变量。

```
var json;

function getJson2(){
    // ...
    $.get(...., function(response){
        json = response;
    }
}); 
```

或者，您可以进行*同步*Ajax 调用，在这种情况下返回您的数据将起作用（但当然会阻止脚本执行，直到收到响应）。要做到这一点，请参阅[jQuerys](http://api.jquery.com/jQuery.ajax/)[函数](http://api.jquery.com/jQuery.ajax/)`asynch`的参数。[`$.ajax`](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:52:37.053

jQuery $.get 调用是异步的，实际上返回的是一个承诺，而不是数据本身。

处理此问题的一种优雅方法是使用[then() 方法](http://api.jquery.com/deferred.then/)：

```
$.get(...).then(function(data){...}); 
```

或者，更改您的 ajax 设置以使调用同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:44:40.320

```
$.get("tasks.php?code="+cd, function(data){
    return data;
  }) 
```

$.get 是异步的。所以你的价值永远不会被退回。您必须创建一个回调。

同样的问题出现在这里： [Return $.get data in a function using jQuery](https://stackoverflow.com/questions/1639555/jquery-return-get-data-in-a-function)

# php - 如何正确地将设置传递给 CakePHP 中的组件

> ID：13846380
> 
> 赞同：5
> 
> 时间：2012-12-12T18:38:32.733
> 
> 标签：php, cakephp

我正在使用 CakePhp 2.2.3 并且正在制作一个组件。

零件：

```
App::uses('Component', 'Controller');
class ExampleComponent extends Component {

public $settings = array();

protected $_defaults = array(
    'a1' => null,
    'a2' => 2
);

public function __construct(ComponentCollection $collection, $settings = array()) {

    $settings = array_merge($this->_defaults, $settings);
    $this->settings = $settings;

}

public function sum() {
    $sum = $this->settings['a1'] + $this->settings['a2'];
    return $sum;
}

} 
```

控制器：

```
class ExampleController extends AppController {
public $components = array('Example');

public function index () {
    $this->set('sum', $this->Example->sum(array('a1' => 2, 'a2' => 3)));
}
} 
```

结果我回来了 (int) 2 。但我认为应该是5。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:45:22.587

您在错误的时间传递了默认设置。 `__construct`当您使用以下行实例化您的组件时被调用。

```
public $components = array('Example'); 
```

因此，如果您想将参数传递给组件初始化，您可以这样做：

```
public $components = array('Example'=>array('a1'=>'2', 'a2'=>'3')); 
```

如果要继续传递参数，请使用以下行：

```
$this->set('sum', $this->Example->sum(array('a1' => 2, 'a2' => 3))); 
```

然后，您将不得不将 sum() 函数调整为：

```
public function sum($new_settings) {

    $sum = $new_settings['a1'] + $new_settings['a2'];
    return $sum;
} 
```

# c++ - 空范围折叠操作的结果

> ID：13846386
> 
> 赞同：1
> 
> 时间：2012-12-12T18:38:54.200
> 
> 标签：c++, functional-programming

我正在编写允许对范围进行一些函数编程操作的[库。](http://volnitsky.com/project/ro/)范围是 STL 容器的泛化。我的问题是空范围折叠的结果应该是什么？

```
auto r  = range(4);    // lazy numeric range {0,1,2,3}
auto r0 = range(0);    // empty range {}
vector<string> vs  {"a", "bb"};
vector<string> vs0 {};

// this is obvious and implemented part    

cout <<  (r  || add);  // 6,  || - folding op
cout <<  (r0 || add);  // 0
cout <<  (vs || add);  // "abb"
cout <<  (vs0|| add);  // ""

cout <<  (r  || mul);  // 0
cout <<  (r0 || mul);  // 1

cout <<  (r  || max);  // 3

//  What result of these should be?

cout <<  (r0 || div);   // ???
cout <<  (r0 || sub);   // ???
cout <<  (r0 || max);   // -∞ ???
cout <<  (r0 || min);   // +∞ ???
cout <<  (r0 || ???);   // result of arbitrary op? 
```

**编辑 - 答案**

[http://en.wikipedia.org/wiki/Identity_element](http://en.wikipedia.org/wiki/Identity_element)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:31:40.190

我假设您的“文件夹”是某个模板的实例，附加了一个二进制函数，可能还有一个初始值。

传统上，折叠被定义为在（初始，第一个），然后（旧值，下一个）上递归调用所述二进制函数，直到你用完调用它的东西。

没有这样的初始值可以使减法和除法按您期望的方式工作（例如 fold({1,2}) 是 1/2）。

因此，减法和除法的“文件夹”要么是“逆的总和”，要么是“逆的乘积”（即 fold(r) = 1/fold(r) 和 fold(r) = -fold(r)，这似乎很无聊），或者它们是根本不同的东西，不适用于空容器。

max 和 min 应该清楚地为给定类型生成最高和最低值，或者是在空容器上没有意义的第二种类型的文件夹。

通过“不工作”，他们可以抛出异常，或者他们可以返回类似 a 的东西`boost::optional<T>`——即，在一个空列表上，他们不返回任何东西。

您的文件夹类型可以采用一个函数来查找给定类型的初始值，该函数应该解析为特征模板类或自由函数（类似于`std::begin`）。

...

编辑：从下面的评论中，对答案的改进。

这里真正的诀窍是减法和除法没有左手身份但有右手身份！

仅具有右手标识的操作应表示为右手折叠，仅具有左手标识的操作应表示为左手折叠（又名 foldr 和 foldl）

即，在具有二元运算`{a,b,c}`标识的列表上表达折叠的自然方式是：`id``*op*`

```
( (id *op* a) *op* b ) *op c 
```

但是对于没有左手身份的操作，这是行不通的。

但是，如果你反转弃牌，你会得到：

```
a *op* (b *op* (c *op* id)) 
```

只要您有右手身份，它就可以工作。

这对于`div`和`sub`--`div`右手身份为 1 和`sub`右手身份为 0 很重要，但两者都没有左手身份。（不存在`e`对`e-x = x`all`x`的元素。有一个对 all的元素`e`，即 0）。`x-e = x``x`

取幂也是如此（它的右手身份为`1`，但没有左手身份）。

这仍然不符合对应该做什么的天真期望`fold div`。它适用于长度为 2 的列表，但在长度为 3 的列表上会发生一些不直观的事情。但至少它在数学上是合理的。:)

# eclipse - 如何查看哪个 POm 依赖项正在将某个 jar 添加到 Eclipse 类路径

> ID：13846388
> 
> 赞同：0
> 
> 时间：2012-12-12T18:38:54.653
> 
> 标签：eclipse, maven

是否可以使用 eclipse 的 m2e maven 插件（或其他一些简单的方法）来确定`<dependency>`我的 POM 中的哪个条目是将给定的 .jar 添加到类路径的原因。afaik 右键单击​​只允许我查看给定工件的 pom。

![Eclipse 示例](../Images/c5fb9aa5424e42013942a75cdcd1e9f6.png)

在这个例子中，我的 pom 看起来像

```
<dependencies>
    <dependency>
        <groupId>eu.medsea.mimeutil</groupId>
        <artifactId>mime-util</artifactId>
        <version>2.1.1</version>
    </dependency>
</dependencies> 
```

所以很容易理解谁负责添加 log4j 东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:18:38.157

在 m2e POM 编辑器中打开 POM（默认情况下应该会发生），单击 Dependency Hierarchy，在过滤器框中输入违规依赖项的名称。它将突出显示将其拖入的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:14:42.493

哦，好想它.. 右键单击​​-> maven-> 排除 maven 工件会在导致包含的依赖项上放置一个很好的排除元素

```
<dependencies>
    <dependency>
        <groupId>eu.medsea.mimeutil</groupId>
        <artifactId>mime-util</artifactId>
        <version>2.1.1</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
</dependencies> 
```

# sql - sql 插入到在用户定义函数中使用 newid 的表中

> ID：13846391
> 
> 赞同：0
> 
> 时间：2012-12-12T18:39:21.207
> 
> 标签：sql, sql-server, sql-server-2008, newid

> **可能重复：**
> [sql server 函数中的 newid()](https://stackoverflow.com/questions/772517/newid-inside-sql-server-function)

我必须根据查看表的函数的参数返回一个值，并且当它为空时插入该表的新记录。不幸的是，我遇到了这个有趣的错误：在函数中无效使用副作用运算符“newid”

如果我无法更改目标表，是否有解决方法？使用 SQL Server 2008 谢谢！

# asp.net-mvc-4 - DataContract 属性被忽略

> ID：13846393
> 
> 赞同：0
> 
> 时间：2012-12-12T18:39:31.347
> 
> 标签：asp.net-mvc-4, asp.net-web-api, datacontract

我不知道为什么，但是每当我尝试添加 [DataContract] 属性时，它都会被忽略，如下例所示：

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;

[DataContract]
public partial class Employee
{
    [DataMember]
    private int EmployeeId { get; set; }

    public string Name { get; set; }

    public string State { get; set; }
} 
```

我将 DataMember 添加到私有属性中，例如在 EmployeeId 中，当我使用 fiddler 调用 get 时，它不会被序列化。

我也尝试过使用 [IgnoreDatamember] 属性，无论如何我试图忽略的内容都会被序列化。

我有“使用 System.Runtime.Serialization;” 所以我不确定我是否缺少任何东西来使这些属性正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T20:11:11.950

您必须将属性 DataMember 添加到要序列化的所有属性中。如果需要序列化，在类中添加属性：

```
[Serializable, DataContract]
public partial class Employee
{
...
} 
```

此链接可以提供帮助：[SerializableAttribute](https://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx "SerializableAttribute 类")

# asp.net-mvc - Linq query with count (extension method)

> ID：13846395
> 
> 赞同：2
> 
> 时间：2012-12-12T18:39:33.950
> 
> 标签：asp.net-mvc, linq

I expect a very simple solution, but I can't for the life of me figure this out...

I am trying to create the LINQ equivalent of this:

```
SELECT Group, COUNT(*) as GroupCount
FROM table1
WHERE Valid > 0
GROUP BY Group, Project 
```

I have this so far:

```
var model = _db.table1
    .Where(r => r.Valid > 0)
    .GroupBy(r => new { r.GROUP, r.Project})
    .Select(r => new{ r.GROUP, GroupCount = r.count()}; 
```

What is wrong with my query? Visual studio throws and error stating that:

> System.Linq.IGrouping' does not contain a definition for 'GROUP' and no extension method 'GROUP' accepting a first argument of type 'System.Linq.IGrouping' could be found (are you missing a using directive or an assembly reference?)

EDIT: Just a note: The above error is given for `r.Group` in the `Select` clause.

It also throws an error stating that the `count` extension method doesn't exist, but I've seen other examples done this way. Maybe I was looking at an example from an old version of LINQ?

EDIT2: Some example data

```
GroupName    ProjectID    Step    Other Info...
-----------------------------------------------
GroupA     |     1      |   1   | ..............
GroupA     |     1      |   2   |..............
GroupA     |     3      |   1   | ..............
GroupB     |     4      |   1   | ..............
GroupB     |     5      |   1   | ..............
GroupC     |     6      |   1   |.............. 
```

Desired result:

```
 GroupName    Group Count
--------------------------- 
GroupA      |     2
GroupB      |     2
GroupC      |     1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:53:25.983

Well, you have following errors in the `.Select` statement:

*   `.count` should be `.Count` (C# is case sensitive)
*   `r.GROUP` should be `r.Key` or `r.Key.GROUP` (.GroupBy() returns an [IGrouping<TKey, TElement>](http://msdn.microsoft.com/en-us/library/bb344977.aspx))
*   You forgot the last parenthesis in the Select method. (But maybe that was just a typo in the example)

Result:

```
var model = _db.table1
    .Where(r => r.Valid > 0)
    .GroupBy(r => new { r.GROUP, r.Project })
    .Select(r => new { r.Key.GROUP, GroupCount = r.Count() }); 
```

* * *

**UPDATE:**

After the comments and question update; it looks like you are only grouping by group, so that would turn in to something like this to yield the output you requested:

```
var model = _db.table1
    .Where(r => r.Valid > 0)
    .GroupBy(r => new { r.GROUP }) // First, group only on GROUP
    .Select(r => new 
    { 
        r.Key.GROUP, 
        // Second, group on unique ProjectId's
        GroupCount = r.GroupBy(g => g.Project).Count()
    }); 
```

Or simplified:

```
var model = _db.table1
    .Where(r => r.Valid > 0)
    .GroupBy(r => r.GROUP) // First, group only on GROUP
    .Select(r => new 
    { 
        Group = r.Key, 
        // Second, group on unique ProjectId's
        GroupCount = r.GroupBy(g => g.Project).Count() 
    }); 
```

As you asked in the comments, yes, you could say that the values are concatenated in the GroupBy clause. So `new { r.GROUP, r.Project }` would group all pairs with the same value.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:44:34.623

LINQ queries are case-sensitive. You're trying to access `r.GROUP`, which probably doesn't exist. Use `r.Group` instead. Also change `r.count()` to `r.Count()`. Here's the corrected code:

```
var model = _db.table1
    .Where(r => r.Valid > 0)
    .GroupBy(r => new { r.Group, r.Project})
    .Select(r => new{ r.Key, GroupCount = r.Count()}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:46:37.310

When you're doing the Group By, you're creating a new anonymous type (not of the type you think it is). Thus, when you're doing the select statement, it has no idea what the heck GROUP is.

To mitigate this, follow the 2nd answer [located here](https://stackoverflow.com/questions/847066/group-by-multiple-columns).

# solr - solr 搜索结果在突出显示时将多值字段作为单个字符串返回

> ID：13846399
> 
> 赞同：7
> 
> 时间：2012-12-12T18:39:56.180
> 
> 标签：solr

我有一个正在搜索的多值字段。在“结果”区域中，该字段作为字符串数组返回。在高亮部分中，数组元素被组合成一个没有分隔符的字符串。我是否必须根据结果部分解析突出显示？似乎突出显示应该返回一个字符串数组。

这是我回来的：

```
<result name="response" numFound="1" start="0">
    <doc>
        <arr name="NameList">
            <str>Beacher, Mike</str>
            <str>Cally, Karl T.</str>
            <str>Amerson, Judy</str>
        </arr>
    </doc>
</result>
<lst name="highlighting">
    <lst name="my_doc">
        <arr name="NameList">
            <str>Beacher, MikeCally, Karl T.<em>Amerson, Judy</em>
            </str>
        </arr>
    </lst>
</lst> 
```

我期待突出显示的结果看起来像这样：

```
<arr name="NameList">
    <str>Beacher, Mike</str>
    <str>Cally, Karl T.</str>
    <str><em>Amerson, Judy</em></str>
</arr> 
```

到目前为止，我还没有发现任何关于这个的问题——除非我不擅长搜索。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T10:57:45.943

Solved it.

This functionality is now available using the `preserveMulti` parameter in Solr 4.1.

Discussed **[here](http://mail-archives.apache.org/mod_mbox/lucene-dev/201209.mbox/%3C1491213873.130736.1348695188723.JavaMail.jiratomcat@arcas%3E)**

# c - C 宏中的分组

> ID：13846403
> 
> 赞同：2
> 
> 时间：2012-12-12T18:40:05.967
> 
> 标签：c

> **可能重复：**
> [C/C++ 宏中的 Do-While 和 if-else 语句](https://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros)
> [当我们定义宏时，do while(0) 有什么用？](https://stackoverflow.com/questions/923822/whats-the-use-of-do-while0-when-we-define-a-macro)

我经常看到这样的代码：

```
#define foo() do { xxx; yyy; zzz; } while (0) 
```

为什么在这里使用 do-while 包装器？为什么不简单

```
#define foo() { xxx; yyy; zzz; } 
```

?

编辑：删除分号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:09:30.043

这是简单的答案。

```
#define foo() do { xxx; yyy; zzz; } while (0)
#define foo() { xxx; yyy; zzz; } 
```

* * *

```
if (condition)
    foo();
else
    x++; 
```

当您使用 do-while 版本时，它将正确扩展为：

```
if (condition)
    do { xxx; yyy; zzz; } while (0);
else
    x++; 
```

当您使用 {} 版本时，它会扩展为这个，这是一个语法错误（与 不匹配`if`）`else`。*注意第二行中多余的分号。*

```
if (condition3)
    { xxx; yyy; zzz; };
else
    x++; 
```

# c# - 如何防止 Resharper 大量缩进 lambda？

> ID：13846409
> 
> 赞同：20
> 
> 时间：2012-12-12T18:40:38.343
> 
> 标签：c#, visual-studio, visual-studio-2012, resharper, autoformatting

我安装了 Resharper，主要是默认设置。目前，我希望我的多行 lambda 表达式看起来像这样：

```
foobarclass.biz.baz.Event += (s, e) =>
  {
    foo.Bar.DoThings.Whatever();
  }; 
```

但是，Resharper “有帮助” 会将我的代码重新格式化为：

```
foobarclass.biz.baz.Event += (s, e) =>
                                 {
                                     foo.Bar.DoThings.Whatever();
                                 }; 
```

在某些情况下，还会分解长语句，因此最终看起来像这样：

```
foobarclass.biz.baz.Event += (s, e) =>
                                 {
                                     foo.
                                        Bar.
                                        DoThings.
                                        Whatever();
                                 }; 
```

如您所知，这种自动格式化使代码的可读性*大大降低。*我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-12T18:47:49.073

尝试取消选中：

> RESHARPER -> OPTIONS -> C# -> 格式化样式 -> 其他 -> 缩进匿名方法体

# javascript - 鼠标按下对象 + GUI 界面

> ID：13846411
> 
> 赞同：2
> 
> 时间：2012-12-12T18:40:44.573
> 
> 标签：javascript, user-interface, three.js, mousedown

问题如下：如果我将 renderer.domElement 添加到我的相机属性中，GUI 可以完美运行，但 mousedown 操作不起作用。

相反，如果我删除 renderer.domElement，则 mousedown 操作会起作用，但在我将鼠标悬停后，GUI X 会随着我的鼠标移动而缩放。

这是代码：

```
function init()
{

// scene
scene = new THREE.Scene();

// camera
var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;
camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
camera.lookAt(scene.position);  
var distance = 1000; 
camera.position;y = 150;
camera.position.z = 1500;
scene.add(camera);

// renderer
renderer = new THREE.CanvasRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );

// controls
controls = new THREE.TrackballControls( camera); 
```

请问我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:07:45.443

试试这个：

```
controls = new THREE.TrackballControls( camera, renderer.domElement ); 
```

# c++ - 如何根据设置类自动组织应用程序设置和构建 GUI？

> ID：13846418
> 
> 赞同：0
> 
> 时间：2012-12-12T18:41:08.833
> 
> 标签：c++, winapi, visual-c++

我的`c++`应用程序一直在增长，现在我面临着十几个应用程序设置（应用程序类的成员变量）以及代表这些设置的许多 GUI 元素。为了更好地控制所有选项/设置，我正在考虑执行以下操作：

1.  创建应用程序设置类，这将更容易跟踪所有选项。
2.  从主 GUI 中删除代表设置/选项的 GUI 元素并将它们移动到单独的窗口中。
3.  从设置类定义自动生成设置窗口。

我想知道这种方法是否有意义。是否有任何库可以基于类定义构建 GUI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:51:37.150

vartypes项目应该有助于解决这个问题[。](http://code.google.com/p/vartypes/)

它使用 QT 框架为您声明的变量生成 GUI。变量可以在代码中声明，也可以从 xml 文件动态加载。

# php - 使用 Graph API 发布 Facebook 通知

> ID：13846420
> 
> 赞同：0
> 
> 时间：2012-12-12T18:41:14.667
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试使用 facebook graph api post 方法发布通知，但我得到了

```
(#15) This method must be called with an app access_token. 
```

但是，我在查询字符串中发送的 access_token 是使用此方法获取的应用程序访问令牌

```
$token_url = "https://graph.facebook.com/oauth/access_token?client_id=".FB_APP_ID."&client_secret=".FB_SECRET."&grant_type=client_credentials"; 
```

我见过很少有人实施它，但不知道为什么它对我不起作用，有人请告诉我我哪里错了。

谢谢

**编辑**

我得到它的工作，这是改变

这行代码永远不会起作用，因为内部 access_token 将覆盖我们试图在查询字符串中传递的应用程序 access_token。

```
$this->facebook->api("/".$to_userId."/notifications?access_token=$app_token_url&template=message",'POST'); 
```

所以使用这个代码

```
 $data = array(
    'href'=> 'https://apps.facebook.com/MY_APP/',
    'access_token'=> $app_token,
    'template'=> 'test'
    );
    try {

    $this->facebook->api("/".$to_userId."/notifications",'POST',$data);
    } catch (FacebookApiException $e) {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:24:51.493

您的应用是否在应用设置中意外配置为“本机/桌面”应用？如果是这样，将其改回“网络”

# php - 如何通过 PHP 重置 MYSQL 表

> ID：13846422
> 
> 赞同：-1
> 
> 时间：2012-12-12T18:41:20.657
> 
> 标签：php, mysql, reset

这似乎是一个简单的问题，答案很简单。

我只想创建一种从 PHP 页面清除表的方法，同时仍保留删除将创建的空列。

我试图查一下，但一切似乎都过于复杂了。我不想使用 Java 或任何其他语言。只有 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:42:52.937

如果重置意味着从表中删除所有数据，则可以使用 Truncate table_name：

```
mysql_query("TRUNCATE table_name"); 
```

# jsf - 使用具有相同视图范围的 bean 通过 h:link 传递参数（值为 null，因此不会添加到 URL 中）

> ID：13846434
> 
> 赞同：3
> 
> 时间：2012-12-12T18:42:12.027
> 
> 标签：jsf, jsf-2, primefaces, selectonemenu

我有一个具有视图范围的 bean，并希望在两个不同页面之间以及在此链接之前的第一页上传递参数，我在`<p:selectOneMenu/>`其中选择测试哪个 id 应该作为 GET 参数传递

```
<p:selectOneMenu value="#{addQuestion.test}" id="tests"
    converter="#{testConverter}" required="true" requiredMessage="Please, choose test">
    <f:selectItem itemLabel="--Select a test--" itemValue="" />
    <f:selectItems value="#{addQuestion.testList}" var="testItem"
        itemValue="#{testItem}" itemLabel="#{testItem.testName}" />
    <p:ajax process="@this"
        listener="#{addQuestion.getQuestionsBySubject()}"
        update="addingQuestionsTable, testId" />
</p:selectOneMenu>
<h:link value="Add new question" outcome="addQuestion">
    <f:param id="testId" name="testId" value="#{addQuestion.test.testIdentifer.testId}"/>
</h:link> 
```

//在第二页

```
<f:metadata>
    <f:viewParam name="testId"
        value="#{addQuestion.test.testIdentifer.testId}"
        converter="#{testConverter}" required="true" requiredMessage="Invalid page access. Please use a link from within the system."/>
</f:metadata> 
```

和豆

```
@ManagedBean(name = "addQuestion")
@ViewScoped
public class AddQuestion implements Serializable {
    private Test test;
    //get
    //set
} 
```

但是当我试图在第二页上获得价值时，我没有什么可表达的`#{addQuestion.test.testIdentifer.testId}"`而且在开发模式下我也得到 了

> 具有 null 值，因此不会添加到 URL。

My`#{testConverter}`是视图范围内的托管 bean。

如何在一个具有视图范围的 bean 中传递 testId 以及为什么会出现此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T19:20:57.797

类似的`<f:xxx>`标签`<f:param>`不会生成任何 HTML，因此在 ajax 请求的 HTML DOM 树中没有任何内容需要更新。这些`<h:xxx>`组件是生成 HTML 的组件，并且可以根据 ajax 请求在 HTML DOM 树中更新。您需要更新`<h:link>`组件而不是`<f:param>`标签。所以，把它`id`从`<f:param>`移到`<h:link>`。

```
<h:link id="testId" value="Add new question" outcome="addQuestion">
    <f:param name="testId" value="#{addQuestion.test.testIdentifer.testId}"/>
</h:link> 
```

# mysql - MySql 视图脚本中的注释

> ID：13846441
> 
> 赞同：7
> 
> 时间：2012-12-12T18:42:35.360
> 
> 标签：mysql

有可能这样做吗？我尝试了多个 gui(mysql workbench、navicat、toad for mysql)，但没有一个会保存这样的评论：

```
 -- something important
 select .....
-- something else important 
```

等等

有没有我经过的设置，或者这是根本无法完成的事情？我问，因为 TOAD for Oracle 保存了我在上面的代码块中发布的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:43:14.777

`mysql`命令行客户端*将*保存 EVENT、FUNCTION、PROCEDURE、TRIGGER的注释，但前提是您包含该`--comments`选项。

`mysql`通过创建`~/.my.cnf`具有以下内容的文件，您始终可以包含注释：

```
[mysql]
comments=1 
```

不幸的是，即使提供了这个选项，MySQL 似乎也没有保留 VIEW 的注释。

`ORDER BY`我决定在 VIEW 中存储注释的唯一方法是在字段末尾包含一个虚拟字符串。例如：

```
CREATE
DEFINER = `root`@`localhost`
SQL SECURITY INVOKER
VIEW  
ex
AS
SELECT
*
FROM 
mysql.user
ORDER BY
user,
'a comment can go here'; 
```

访问[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_comments)以获取更多详细信息。

在 MySQL 5.1 之前，您可以在 s 中使用 MySQL 特定的注释 ( `/*! a comment */`) `VIEW`，但在 5.1 和字母中删除了该“功能”。有关更多详细信息，请参见[此处](http://rpbouman.blogspot.com/2006/12/mysql-stored-routines-and-command-line.html)。

# javascript - 将全局变量抽象为属性？

> ID：13846442
> 
> 赞同：0
> 
> 时间：2012-12-12T18:42:37.610
> 
> 标签：javascript, properties, global-variables, abstraction

我正在阅读 DOM Scripting 并且有一个关于下面抽象的初学者问题。原始代码不包含“clearTimeout”，而“movement”被声明为全局变量。虽然代码运行良好，但动画并不流畅，这就是添加 clearTimeout 的原因。然而，我的问题是，为什么我不能只测试“运动”并且当它失败时（在第一次鼠标悬停调用 moveElement 时）继续执行其余的函数？如果我将“运动”保留为全局变量，而不是使其成为属性，那么代码根本不会运行？

如果有助于查看其他 JS 和 HTML，我已将剩余代码插入[jsFiddle](http://jsfiddle.net/KMcA/7NES8/)。

```
function moveElement(elementID,final_x,final_y,interval) {
  if (!document.getElementById) return false;
  if (!document.getElementById(elementID)) return false;
  var elem = document.getElementById(elementID);
  if (elem.movement) { //Why can't I use "movement"?
    clearTimeout(elem.movement);
  }
  var xpos = parseInt(elem.style.left);
  var ypos = parseInt(elem.style.top);

  if (xpos == final_x && ypos == final_y) {
    return true;
  }
  if (xpos < final_x) {
    xpos++;
  }
  if (xpos > final_x) {
    xpos--;
  }
  if (ypos < final_y) {
    ypos++;
  }
  if (ypos > final_y) {
    ypos--;
  }
  elem.style.left = xpos + "px";
  elem.style.top = ypos + "px";
  var repeat = "moveElement('"+elementID+"',"+final_x+","+final_y+","+interval+")";
  elem.movement = setTimeout(repeat,interval); //Originally global property
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:48:34.550

一个属性永远不能是`undefined`，只能有一个`undefined`作为值。相反，变量可能是`undefined`（未定义）或具有`undefined`值。

当你说`if (movement)`，在`movement`没有定义的情况下，它会抛出一个异常。

当您说`if (elem.movement)`时，在`elem.movement`未定义的情况下，它将评估为 false 并无一例外地使条件失败。

如果要`movement`用作全局变量，则必须先*声明*它，然后再尝试通过以下方式读取它：

```
var movement;
function moveElement(elementID,final_x,final_y,interval) {
    ...
} 
```

或者，您可以尝试将全局`movement`作为属性读取，因为所有全局变量都只是`window`对象的属性（在浏览器中）：

```
if (window.movement) { // this will never throw an exception
    clearTimeout(movement);
} 
```

最后，您可以将 if 语句切换为通过`typeof`运算符保护自己免受这些异常影响的语句：

```
if (typeof movement !== 'undefined') {
    clearTimeout(movement);
} 
```

# python - Python - 如何在 Python shell 中定义函数？

> ID：13846449
> 
> 赞同：0
> 
> 时间：2012-12-12T18:43:01.040
> 
> 标签：python

```
>>> def f(x):
...     print x
... f('hello')
  File "<stdin>", line 3
    f('hello')
    ^
SyntaxError: invalid syntax
>>> 
```

我在 Python shell 中的提示符下。为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:44:51.080

在“print x”之后输入一个空行。通常，`...`提示表示 Python 期望当前块的进一步输入，在本例中为 function `f`。

正如 Iguananaut 所指出的，与标准 Python shell 相比，IPython 具有出色的编辑功能，例如选项卡自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:44:36.137

您需要在最后一行之后按两次 Enter 键才能返回`>>>`提示，在这种情况下您可以输入新的表达式。

此外，如果你打算在解释器中输入大量多行表达式，你应该看看[IPython](http://ipython.org/)（现在有资金支持！）。它支持更好地编辑多行语句，如果您使用 qtconsole 或笔记本，效果会更好。

# local-storage - 是否有在 SPA（html5 单页应用程序）中同步本地和远程数据的最佳实践/模式？

> ID：13846456
> 
> 赞同：11
> 
> 时间：2012-12-12T18:43:30.223
> 
> 标签：local-storage, data-synchronization, singlepage, single-page-application, breeze

我正在使用 jqueryMobile + 淘汰赛 + 微风 + WebAPI 编写一个简单的“todo - helloworld”，以了解移动环境中的 SPA（单页应用程序）（不可靠的互联网连接）

为了启用离线使用，WebApp 将利用

*   应用程序缓存
*   本地存储

应用程序应尽可能使用远程数据库来加载和保存数据，但应能够在离线时无缝切换到本地存储，并在重新在线时同步本地/远程更改。

现在回到问题：应用程序将使用 Breeze 的 EntityManager 来管理数据（本地缓存和远程同步）

*   “远程数据库”

为了减轻不一致/并发问题，我将使用 2 个本地存储密钥：

*   “localDb”用于远程数据库的本地副本（待办事项列表）
*   “localPendingChanges”表示应用程序无法提交到远程数据库的更改

所以流程或多或少是（伪代码）：

```
LoadData
  if(online)
    load remoteDb
    save localDb                   // save a local copy of the fresh loaded remotDb
    if(localPendingChanges)
      load localPendingChanges     // we are merging in the Breeze entityManager remote data with localPendingChanges
      Savedata                     // we are online and we have pending changes, so we should sync everything back to the remoteDb as soon as possible
  if(offline)
    load localDb
    if(localPendingChanges)
      load localPendingChanges     // we are merging in the Breeze entityManager local data with localPendingChanges

SaveData
  if(online)
    save remoteDb
    clear localPendingChanges      // until we are online there is no need to keep localPendingChanges
    LoadData                       // we are loading data from remoteDb to update our localDb to the latest version
  if(offline)
    save localPendingChanges       // we are saving only the changes to localstorage 
```

您如何看待这种方法？是不是一团糟？可以吗？多用户场景下的并发问题怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:34:02.220

这似乎是合理的，不太确定为什么需要两个 localStorage 键。保存在 localStorage 中的每个实体的 entityState（未修改、修改、添加、删除），因此您始终可以从任何本地副本中“提取”（参见 EntityManager.getEntities 方法）只是待处理的更改。那么为什么不在关闭应用程序之前将整个 entityManager 状态保存到 localStorage。

至于并发问题，您绝对应该在每个 entityType 上设置一个并发属性。只要存在这种情况，并且如果您通过实体框架进行保存，那么微风就会在保存期间检测到任何乐观并发违规并抛出异常。显然，在出现此类异常后，您已经确定了应用程序的正确行为。

我相信您已经看到了，但是 QueryOptions.MergeStrategy (PreserveChanges, OverwriteChanges) 在任何查询后在本地计算机上保留或覆盖数据方面非常有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-02T20:18:02.410

我认为您将本地更改保存在与服务器同步的不同位置是正确的。几个月来我一直在解决这个问题，并提出了一些看起来非常像版本控制系统的东西，其中一个集合中的一个键中的所有数据都是单独的版本。您可以将更改从服务器下载到本地数据库，如果双方都通过冲突解决回调进行了更改，它将处理。

目前我对 Knockout 了解不多，但该库本身不依赖于任何单独的项目，并且正在通过 Node.JS、Dojo 和 jQuery 中的测试用例。它有一个超级紧凑的 API（.get、.set、.feed（用于从服务器加载下载的数据）和 .getFirst（用于访问需要上传的内容）。

URL 位于[https://github.com/forbesmyester/SyncIt](https://github.com/forbesmyester/SyncIt)，它也有相当全面的演示和文档。

# c# - 选择特定的读卡器以通知 PIN

> ID：13846457
> 
> 赞同：1
> 
> 时间：2012-12-12T18:43:30.877
> 
> 标签：c#, smartcard-reader

我的 PC 上连接了多个读卡器，如果两个读卡器都插入了卡，我如何从特定读卡器的特定卡读取证书？

阅读器具有相同的 providerName（SafeSign 标准加密服务提供商）。如何选择一个特定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:13:47.997

如果您无法使用它们的 ATR（更准确地说，ATR 的历史字节）区分卡，唯一的选择是从它们（或卡上的其他内容）读取证书并使用数据中的唯一标识信息。

# magento - 在 app/code/local 文件夹中覆盖 Magento Adminhtml 控制器

> ID：13846462
> 
> 赞同：0
> 
> 时间：2012-12-12T18:43:48.307
> 
> 标签：magento

我想覆盖`app/code/local`文件夹中的 Magento Admin 核心控制器。

我需要覆盖`app/code/core/Mage/Adminhtml/controllers/CustomerController.php`

在`app/code/local/Mage/Adminhtml/controllers/CustomerController.php`路径中。

我已经复制了核心文件并在本地文件夹中创建了相同的路径。

仍然没有从本地文件夹加载文件，它只从核心文件加载。

我已经清除了 Magento 缓存并为目录中的所有文件夹设置了文件权限（777）`app/code/local`。

有人可以建议我解决这个问题吗？

非常感谢任何帮助。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:11:02.537

Magento 控制器的自动加载与其他类（块、模型等）不同，如果您希望重载它，最好的办法是[配置您自己的控制器，以便在路由之前对其进行检查](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T13:06:49.920

让我向您展示我如何覆盖客户控制器

在 app/code/local/'你的公司'/'你的模块名称'/etc/config.xml

启用自定义模块

`<config> <modules> <company_module> <active>true</active> <codePool>local</codePool> </company_module> </modules> </config>`

路由自定义模块路径

`<frontend> <routers> <company_module> <use>standard</use> <args> <module>company_module</module> <frontName>customer</frontName> </args> </company_module> </routers> </frontend>`

重写类

`<global> <rewrite> <company_module_address> <from><![CDATA[#^/address/#]]></from> <to>/customer/address/</to> </company_module_address> </rewrite> </global>`

在 app/code/local/company/module/controllers/AddressController.php

`<?php`

`require_once 'Mage/Customer/controllers/AddressController.php';`

`class Company_Module_AddressController extends Mage_Customer_AddressController { //Show your magic here }`

希望这会有所帮助...谢谢

# java - 大量（浮点）值的最佳数据结构

> ID：13846463
> 
> 赞同：0
> 
> 时间：2012-12-12T18:43:58.837
> 
> 标签：java, android, arrays, memory-management

我正在为 Android 开发一个可视化应用程序（包括运行 Android 2.2 的旧设备）。

我的应用程序的输入模型包含一个区域，通常由数万个顶点组成。典型模型有 50000-100000 个顶点（每个顶点都有一个**x、y、z** `float`坐标），即它们使用了 600K-1200 KB 的总内存。该应用程序要求所有顶点在内存中随时可用。这就是我可以分享的关于这个应用程序的全部内容（我不允许分享高级用例），所以我想知道我的以下结论是否正确以及是否有更好的解决方案。

例如，假设有`count`=50000 个顶点。我看到两个解决方案：

1.）我早期的解决方案是使用自己的`VertexObj`（由于封装更好的可读性，访问单个坐标时更好的局部性）：

```
public static class VertexObj { 
      public float x, y, z;
}

VertexObj mVertices = new VertexObj[count]; // 50,000 objects 
```

2.）我的另一个想法是使用大的`float[]`代替：

```
float[] mVertices = new VertexObj[count * 3]; // 150,000 float values 
```

第一个解决方案的问题是内存开销很大——我们在移动设备上，应用程序的堆可能被限制在 16-24MB（我的应用程序也需要内存来处理其他事情）。根据[Android](https://developer.android.com/training/articles/perf-tips.html#ObjectCreation)官方页面，在非真正需要时应避免对象分配。在这种情况下，即使对于 50,000 个顶点，内存开销也可能很大：

首先，“有用”的内存是 50000*3*4 = 600K（这被`float`值用完了）。然后我们有 +200K 由于`VertexObj`元素的开销，可能还有 +400K 由于 Java 对象头（在 Android 上每个对象也可能至少 8 个字节）。这是 50,000 个顶点的 600K“浪费”内存，这是 100% 的开销 (!)。在 100,000 个顶点的情况下，开销为 1.2MB。

第二种解决方案要好得多，因为它只需要有用的 600K 作为`float`值。

显然，结论是我应该选择`float[]`，但我想知道这种情况下的风险。请注意，我的怀疑也可能与内存管理的较低级别（不是严格的 Android 特定）方面有关。

据我所知，当我写入时`new float[300000]`，应用程序会请求 VM 保留一个 300000*4 = 1200K 字节的连续块。（我在 Android 中遇到过，我请求了一个 1MB `byte[]`，我得到了一个`OutOfMemoryException`，即使 Dalvik 堆有超过 1MB 的空闲空间。我想这是因为它无法保留一个**连续**的 1MB 块。）

由于Android的VM的GC不是compacting GC，如果内存“碎片化”，那么这么大的`float[]`分配恐怕会导致OOM。如果我在这里，那么这个风险应该被处理。例如，分配更多`float[]`对象（每个对象将存储一部分，例如 200KB）怎么样？这种链表内存管理机制被操作系统和虚拟机使用，所以我觉得我需要在这里（在应用程序级别）使用它听起来很不寻常。我错过了什么？

如果没有，那么我猜最好的解决方案是使用`float[]`对象的链接列表（以避免OOM但保持开销小）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:58:57.487

您在分配数组时面临的内存不足`float`非常奇怪。

如果堆中可用的最大可计数内存块小于浮点数组所需的内存，则堆会增加其大小以容纳所需的内存。

当然，如果堆已经达到应用程序可用的最大值，这将失败。这意味着，您的应用程序已经用尽了堆，然后释放了大量导致内存碎片的对象，并且没有更多的堆可供分配。但是，如果是这种情况，并且假设碎片内存足以容纳浮点数组（否则您的应用程序将无法运行），那么这只是分配顺序的问题。

如果您在应用程序启动期间为浮点数组分配所需的内存，那么您就有足够的内存供它使用。然后，您只需让您的应用程序完成剩余的工作，因为计数内存已经分配。

`DDMS`您可以使用in `Eclipse`、选择您的应用程序并按下`Update Heap`按钮轻松检查正在分配的内存块（和空闲的内存块） 。

只是为了避免误导你，我在发布之前已经对其进行了测试，分配了几个连续的`float[300000]`.

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:55:35.513

我实际上遇到了一个问题，我想为测试用例嵌入数据。由于我声明了这样的数组，当函数超过 65,535 字节的数据时，Eclipse 一直在抱怨嵌入巨大的数组。然而，这实际上是一种相当普遍的方法。

其余的进入优化。最大的问题是：进行所有这些优化是否值得？如果您对 RAM 不敏感，那么使用 1.2 兆应该没问题。如果你有一个那么大的数组，Java 也有可能会发牢骚，但你可以做一些事情，比如使用像 LinkedList 这样更高级的数据结构，或者将数组分割成更小的数组。对于静态设置的数据，如果您正在疯狂地阅读它，我觉得数组可能是一个不错的选择。

我知道您可以为整数创建 .xml 文件，因此将其存储为整数并采用诸如乘以值、读入然后除以一个值之类的策略将是另一种选择。您还可以将文本文件之类的内容放入您的资产文件夹中。只需在应用程序中执行一次，您就可以随心所欲地读/写。

至于 double vs float，我觉得在你的情况下，一个数学或科学案例，如果你能把它拉下来，double 会更安全。如果您进行任何数学运算，则使用 double 出错的可能性会更小，尤其是像乘法这样的运算。花车通常更快。我不确定 Java 是否进行 SIMD 打包，但如果确实如此，则可以将更多的浮点数打包到 SIMD 寄存器中而不是双精度数

# objective-c - iOS UISearchBar 文本字段背景

> ID：13846470
> 
> 赞同：1
> 
> 时间：2012-12-12T18:44:36.967
> 
> 标签：objective-c, ios, uikit, uisearchbar

我正在尝试在 iOS 上自定义 UISearchBar 的文本字段，但我遇到了问题。使用以下方法：

```
[searchBar setSearchFieldBackgroundImage:searchFieldImage forState:UIControlStateNormal]; 
```

给了我文本字段中的图像，但它很小。图像只有 40x15 px 尺寸，用于拉伸。我正在按如下方式创建图像：

```
UIImage *searchFieldImage = [[UIImage imageNamed:@"input_15x40.png"]
                  resizableImageWithCapInsets:UIEdgeInsetsMake(7, 19, 7, 20)]; 
```

但是，这种外观修改似乎并没有拉伸图像 - 只是按原样处理。如何使用可拉伸图像自定义 UISearchBar 的文本字段图像？

**编辑** 我应该说条是水平拉伸的，但它不是垂直拉伸的，因此只有 15px 的高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:00:02.823

我可以在您的代码中看到的唯一问题是您创建了名为 searchFieldImage 的 var 并将其用作 searchField。

这段代码对我有用：

```
UIImage *searchFieldImage = [[UIImage imageNamed:@"input_15x40.png"]
              resizableImageWithCapInsets:UIEdgeInsetsMake(7, 19, 7, 20)];

[searchBar setSearchFieldBackgroundImage:searchFieldImage forState:UIControlStateNormal]; 
```

-

编辑：

在高度中，图像不会被拉伸，因为图像的高度会设置包裹它的视图的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T10:54:14.727

```
let searchTextField = searchBar.valueForKey("_searchField") as? UITextField
searchTextField?.backgroundColor = UIColor.redColor() 
```

# c - OpenMP 的生命游戏

> ID：13846477
> 
> 赞同：1
> 
> 时间：2012-12-12T18:44:58.567
> 
> 标签：c, optimization, openmp, conways-game-of-life

我做了一个生命游戏的顺序版本，但现在我需要使用 OpenMP 制作我的代码的并行版本，但我遇到了一些问题。如果有人可以帮助我，那就太好了。谢谢。这是我的顺序代码：

```
// Swapping the two grids   
 #define SWAP_BOARDS( b1, b2 )  do { \
 char* temp = b1; \
 b1 = b2; \
 b2 = temp; \
 } while(0)

// Simplifying access to grid elements
   #define BOARD( G, X, Y )  ((G)[NC*(X)+(Y)])

 char* sequential_game_of_life (char* outgrid, char* ingrid, 
       const int nrows, const int ncols, const int gens_max) {

  const int NC = ncols;
  int curgen, i, j;

 for (curgen = 0; curgen < gens_max; curgen++)
   {

  for (i = 0; i < nrows; i++)
{
  for (j = 0; j < ncols; j++)
    {
      const int inorth = mod (i-1, nrows);
      const int isouth = mod (i+1, nrows);
      const int jwest = mod (j-1, ncols);
      const int jeast = mod (j+1, ncols);

      const char neighbor_count = 
    BOARD (ingrid, inorth, jwest) + 
    BOARD (ingrid, inorth, j) + 
    BOARD (ingrid, inorth, jeast) + 
    BOARD (ingrid, i, jwest) +
    BOARD (ingrid, i, jeast) + 
    BOARD (ingrid, isouth, jwest) +
    BOARD (ingrid, isouth, j) + 
    BOARD (ingrid, isouth, jeast);

      BOARD(outgrid, i, j) = alivep (neighbor_count, BOARD (ingrid, i, j));
    }
}
  SWAP_BOARDS( outgrid, ingrid );
}
  return outgrid;
 } 
```

我知道我必须平行这 3 个，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:05:13.400

我认为外循环不能并行化，因为每一代的输入都是上一代，所以它有一个顺序公式（至少你不能做微小的变化！）

`0`如果嵌套循环遍历矩阵或类似的东西，我更喜欢从to `ncol*nrow`（在你的情况下）运行单个循环`i`并`j`从循环索引中查找和查找。

像这样：

```
// because you are running a parallel codes multiple times in a loop,
// it would be better to make the thread swarm first and schedule the
// tasks in each loop iteration, to avoid multiple creation and destruction
// of working threads
#pragma omp parallel
for (curgen = 0; curgen < gens_max; curgen++)
{
    #pragma omp for
    for (t = 0; t < nrows*ncols; t++)
    {
        int i = t / ncols;
        int j = t % ncols;
        const int inorth = mod (i-1, nrows);
        const int isouth = mod (i+1, nrows);
        const int jwest = mod (j-1, ncols);
        const int jeast = mod (j+1, ncols);

        const char neighbor_count = 
            BOARD (ingrid, inorth, jwest) + 
            BOARD (ingrid, inorth, j) + 
            BOARD (ingrid, inorth, jeast) + 
            BOARD (ingrid, i, jwest) +
            BOARD (ingrid, i, jeast) + 
            BOARD (ingrid, isouth, jwest) +
            BOARD (ingrid, isouth, j) + 
            BOARD (ingrid, isouth, jeast);

        BOARD(outgrid, i, j) = alivep (neighbor_count, BOARD (ingrid, i, j));
    }
    SWAP_BOARDS( outgrid, ingrid );
} 
```

我在我的笔记本电脑上使用双核 2.53 GHz CPU 在 1000x1000 矩阵上运行了 1000 代以上的代码，并获得了 69% 的速度提升。

# c++ - 这是进行递归的有效方式（良好风格）吗

> ID：13846488
> 
> 赞同：1
> 
> 时间：2012-12-12T18:45:28.557
> 
> 标签：c++, recursion

除了这段代码效率低下之外，我在这里编写递归函数的方式是否被认为是“好风格”。例如，我正在做的事情是创建一个包装器，然后将它传递给`int mid`和一个计数器`int count`。

这段代码所做的是从数组中获取值，然后查看它`blockIndex`是否大于`mid`. 那么，除了效率低下，我会得到一份编写这样的递归函数的工作吗？

```
int NumCriticalVotes :: CountCriticalVotesWrapper(Vector<int> & blocks, int blockIndex)
{

    int indexValue = blocks.get(blockIndex);
    blocks.remove(blockIndex);
    int mid = 9;

    return CountCriticalVotes(blocks, indexValue, mid, 0);
}

int NumCriticalVotes :: CountCriticalVotes(Vector<int> & blocks, int blockIndex, int mid, int counter)
{
    if (blocks.isEmpty())
    {
        return counter;
    }

    if (blockIndex + blocks.get(0) >= mid)
    {
        counter += 1;
    } 

    Vector<int> rest = blocks;
    rest.remove(0);
    return CountCriticalVotes(rest, blockIndex, mid, counter);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:05:37.717

这是有效的，它适用于足够小的集合。

然而，它的效率非常低——对于每个递归调用，您都在创建 Vector 的整个未计算部分的副本。因此，如果您计算一个包含 1000 个项目的向量，您将首先创建一个包含 999 个项目的向量，然后再创建一个包含 998 个项目的向量，然后再创建一个包含 997 个项目的向量，以此类推，一直到 0 个项目。

这本身会非常浪费，但似乎会变得更糟。然后，您正在从 Vector 中删除一个项目 - 但您正在删除第*一个*项目。假设您的 Vector 类似于`std::vector`，删除最后一项需要恒定时间，但删除第一项需要线性时间 - 即，要删除第一项，之后的每个项目都“向前”移动到空出的位置。

这意味着您的算法不是采用恒定空间和线性时间，而是在空间和时间上都是二次的。除非涉及的收藏非常少，否则将是*相当*浪费的。

我不会为每个调用创建一个全新的 Vector，而是将偏移量传递到现有的 Vector 中。这将避免复制和删除项目，因此使其在时间和空间上都是线性的非常简单（这仍然远未达到最佳状态，但至少不如二次方那么糟糕）。

要进一步减少使用的空间，请将数组视为两半。分别计算每一半，然后将结果相加。这会将递归深度减少到对数而不是线性，这通常是*相当*大的（例如，对于 1000 个项目，它的深度约为 10 而不是大约 1000。对于一百万个项目，深度上升到大约 20 而不是一百万）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:57:54.423

在不确切知道您要完成什么的情况下，这是一个非常难以回答的问题。我看到递归或一般编码的方式是它是否满足以下三个要求。

1.  它是否完成了所有需要的功能？
2.  它是否具有容错性？这意味着当传递无效输入或边缘情况时它不会中断。
3.  它是否在足够的时间内完成了它的目标？

我认为您担心数字 3，我可以说时间应该适合问题。例如，如果您搜索 2 个巨大的列表，则 O(n^2) 可能是不可接受的。但是，假设您正在搜索 2 个小集合 O(n^2) 可能足够快。

我能说的是尝试在测试用例上对算法的不同实现进行计时。仅仅因为您的解决方案是递归的，并不意味着它总是比“蛮力”实现更快。（这当然视具体情况而定）。

要回答您的问题，就递归而言，此示例看起来不错。但是，你会得到一份编写这样代码的工作吗？我不知道这对其他两个编码要求的满足程度如何？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:01:39.357

您的解决方案的问题是您传递计数。停止传递计数并使用堆栈来跟踪它。另一个问题是我不确定你的第二个条件是什么。

```
int NumCriticalVotes :: CountCriticalVotesWrapper(Vector<int> & blocks, int blockIndex)
{

    int indexValue = blocks.get(blockIndex);
    blocks.remove(blockIndex);
    int mid = 9;

    return CountCriticalVotes(blocks, indexValue, mid);
}

int NumCriticalVotes :: CountCriticalVotes(Vector<int> & blocks, int blockIndex, int mid)
{
    if (blocks.isEmpty())
    {
        return 0;
    }

    if (/*Not sure what the condition is*/) 
    {
        return 1 + CountCriticalVotes(blocks, blockIndex, mid);
    }

    return CountCriticalVotes(blocks, blockIndex, mid);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:07:06.110

很主观的问题。尾递归很好（在我的书中），但我会在每次调用时创建一个新向量来平衡它，这使得线性算法成为二次方。独立于递归，这是一个很大的禁忌，特别是因为它很容易避免。

一些关于代码打算完成的评论也会有所帮助，尽管我认为在上下文中问题会更小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T19:14:16.210

在 C++ 中，使用递归遍历*任意长度*的列表从来都不是一个好习惯。这不仅仅是关于性能。该标准不强制要求尾调用优化，因此如果您不能保证列表的大小有限，则存在堆栈溢出的风险。

当然，递归深度必须是几十万，典型的堆栈大小，但是在设计程序时很难知道它将来必须能够处理什么样的输入。这个问题可能会在很久以后再次困扰你。

# matlab - 如何文本扫描以读取文件中的所有行

> ID：13846491
> 
> 赞同：4
> 
> 时间：2012-12-12T18:45:46.250
> 
> 标签：matlab

我正在尝试使用以下内容读取 .m 文件中的所有行

```
file_content = textscan(fid, '%s', 'delimiter', '\n', 'whitespace', '') 
```

但这只是返回

```
file_content = 

    {0x1 cell} 
```

实际上我的文件有 224 行。所以如果我使用

```
file_content = textscan(fid,'%s',224,'delimiter','\n') 
```

我得到了所有的线路

```
file_content = 

    {224x1 cell} 
```

读取 .m 文件中的所有数据（主要是字符串）的更合适的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:31:00.250

由于您没有列出您的需求（您是否正在阅读一个大文件？很多小文件？速度是一个问题吗？您真正想要做什么？）我给您最简单的答案：

你来做这件事：

```
f = fopen('data.txt');             
g = textscan(f,'%s','delimiter','\n');
fclose(f); 
```

阅读后记得关闭，否则你将无法再次阅读。

您可以将第一行设为 g{1}{1}，将第二行设为 g{1}{2}，依此类推。

这是[textscan](http://www.mathworks.com/help/matlab/ref/textscan.html)的 matlab 文档，其中提供了更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-30T21:15:49.920

这是一种对我有用的方法：

```
fid = fopen('filename','r'); %opening in read mode (default)
inter = textscan(fid,'%[^\n]'); 
lines = inter{1,1};
fclose(fid); 
```

此命令“逐行”读取整个文件。例如，我有一个 1332 行的文本文件，这段代码创建了一个变量`inter` ，它是 a `{1,1 cell}`，`lines`它是 a `[1x102944 char]`。

我不确定它为什么/如何工作（如果其他人阅读这篇文章知道如何工作，那就太好了！）但它适用于我的程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-07T03:48:02.317

对 textscan 的调用意味着“读取所有内容直到 \n”。

一般来说，您的文件可能有混合的行尾，或者根本没有，并且记录由“：”或其他东西分隔。

# list - 在 Spark 列表的自定义 itemRenderer 中格式化日期

> ID：13846494
> 
> 赞同：1
> 
> 时间：2012-12-12T18:45:53.857
> 
> 标签：list, apache-flex, formatting, itemrenderer, flex-spark

我想有效地格式化使用自定义 ItemRenderer 的 Spark 列表的日期属性。所有日期的格式都应该相同，所以我真的不想为每个列表项实例化一个新的 DateTimeFormatter。如何在下面的示例中使用单个 DateTimeFormatter 来格式化属性 data.lastModified？

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" 
                autoDrawBackground="true">
    <mx:VBox height="100%" width="100%" paddingBottom="10" paddingTop="10" paddingLeft="10" paddingRight="10">
        <s:Label text="{data.name}" fontSize="16" height="100%"/>
        <mx:HBox width="100%">
            <s:Label text="{data.client}"/>
            <s:Label width="100%" text="{data.lastModified}" textAlign="right"/>
        </mx:HBox>
    </mx:VBox>
</s:ItemRenderer> 
```

这里是使用：

```
<s:List id="projectsList" left="12" top="172" bottom="10" width="303"
                    dataProvider="{projectsArray}" itemRenderer="ProjectListItemRenderer"></s:List> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:18:43.370

在 ActionScript 中定义 DateFormatter 并将其设为静态。有点像这样：

```
public static var dateFormatter : DateFormatter = new DateFormatter(); 
```

无论您有多少类实例，这都会创建 DateFormatter 的单个实例。不过，您必须使用类名访问 DateFormatter。如果您需要在 DateFormatter 上设置属性，您可以在静态方法中进行；有点像这样：

```
public static var dateFormatter : DateFormatter = ThisClass.createDateFormatter();

public static function createDateFormatter():DateFormatter{
  var df :DateFormatter = new DateFormatteR():
  df.dateStyle = DateTimeStyle.MEDIUM;
  return df;
} 
```

# android - 修改实时摄像机视图

> ID：13846500
> 
> 赞同：2
> 
> 时间：2012-12-12T18:46:18.047
> 
> 标签：android, android-camera

如何在 Android 上修改实时摄像头视图？

我正在搜索并发现这个应用程序[https://play.google.com/store/apps/details?id=com.fingersoft.cartooncamera](https://play.google.com/store/apps/details?id=com.fingersoft.cartooncamera)是我想做的一个很好的例子。我也想对我的相机视图应用一些效果。我需要找到一种方法来添加一些效果或在我的相机视图上绘制一些东西。

据我了解，我必须获取一些视频流，应用一些更改并在相机视图中显示。

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T05:26:45.383

您可以在这篇[文章](http://p2p.wrox.com/book-professional-android-application-development-isbn-978-0-470-34471-2/72528-article-using-android-camera.html)中找到有关此主题[Android-Camera Preview](https://stackoverflow.com/questions/2456802/android-camera-preview)的更多信息。另一种方法是使用[OpenCV](http://developer.sonymobile.com/knowledge-base/tutorials/android_tutorial/get-started-with-opencv-on-android/)。

我能想到的获取图像并在屏幕上预览的最小代码如下所示：

```
public class MainActivity extends Activity implements Callback {

    Camera camera;
    SurfaceView surfaceView;
    SurfaceHolder holder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        surfaceView = (SurfaceView) findViewById(R.id.surfaceView1);
    }

    @Override
    protected void onResume() {
        super.onResume();
        camera = Camera.open();
        Camera.Parameters parameters = camera.getParameters();
        parameters.setPictureFormat(ImageFormat.JPEG);
        camera.setParameters(parameters);

        holder = surfaceView.getHolder();
        holder.addCallback(this);

        camera.setPreviewCallback(new PreviewCallback() {
            public void onPreviewFrame(byte[] data, Camera camera) {
                // You could apply some pixel operations directly here.
                Log.d("Camera", "Camera image aquired");
            }
        });
    }

    @Override
    protected void onPause() {
        super.onPause();
        camera.stopPreview();
        camera.release();
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            camera.setPreviewDisplay(holder);
        } catch (IOException e) {
            e.printStackTrace();
        }
        camera.startPreview();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
    }
} 
```

可以在[GitHub 上](http://github.com/commonsguy/cw-advandroid/tree/master/Camera/Preview/)找到执行此操作的完整示例。

# jquery - iOS 错误？使用 jQuery 聚焦时无法更改选择中的文本

> ID：13846503
> 
> 赞同：5
> 
> 时间：2012-12-12T18:46:27.420
> 
> 标签：jquery, iphone, focus, optgroup

我正在使用带有 optgroups 的选择在移动设备上进行一些导航。我使用 optgroup 的标签来指示它所属的部分 - 然后使用选项本身来指定子部分。

The problem is that in pretty much every browser I come across doesn't show the optgroup when the select is not in focus. 我通过编写以下 jQuery 解决了这个问题：

```
$(".Nav-Interior-Mobile select option:selected").each( function() {
    pageGroupLabel = $(this).parent('optgroup').attr('label');
    pageItemLabel = $(this).text();
    $(this).text(pageGroupLabel + " > " + pageItemLabel);
});
$('.Nav-Interior-Mobile select').focus( function() {
    $(this).find('option:selected').text(pageItemLabel); 
});
$('.Nav-Interior-Mobile select').blur( function() {
    $(this).find('option:selected').text(pageGroupLabel + " > " + pageItemLabel); 
}); 
```

这似乎适用于除 iOS 之外的所有应用程序。在 iOS 中，用于更改选择的 UI 不会反映用于焦点的新文本。我可以看到 Apple 用户界面上方的实际选择发生了变化——但他们的用户界面根本没有变化。

任何人都知道如何做到这一点？

模糊时它在这里工作：

![http://files.secondstreetmedia.com/support/todd/blurred.PNG](../Images/521bcf261313f957bae9eaceba71c1db.png)

并且在专注时无法工作（他们的 UI 应该只是说“Web”时仍然有“Branding > Web”）：

![http://files.secondstreetmedia.com/support/todd/focused-2.jpg](../Images/6ec98ae480e289ada1a4a70309f0b193.png)

* * *

这绝对是一个错误 - 如果您向下滚动然后在列表中备份 - 然后文本会更改 - 奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:58:32.000

尝试使用此处发布的 quickChange 插件：

[在移动 Safari 下拉列表项选择框上使用“下一步”时选择/下拉的 onchange() JS 事件的奇怪行为](https://stackoverflow.com/questions/5960731/strange-behavior-of-select-dropdowns-onchange-js-event-when-using-next-on-m/7284325#7284325)

将插件代码粘贴到您的 Javascript 文件后，您应该能够将 onfocus 代码替换为：

```
$('.Nav-Interior-Mobile select').quickChange(function() { 
    $(this).find('option:selected').text(pageItemLabel);
}); 
```

并且您现有的 onblur 代码应该继续用于将值更改回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-07T07:17:39.823

为什么首先要这样做？您不应该弄乱选择/选项的设计。您可以在“选择”顶部添加“标签”“div”，将“选择”不透明度设置为 0，如果要添加自定义文本，请在添加的“DIV”上执行。简而言之，它是这样的：

```
<div class="select-wrapper">
    <div class="color-label"> YOUR COLOR : <span id="selectedColor"></span></div>
    <select class="color-select">
        <option value="blue" selected="selected"> Blue</option>
        <option value="green"> Green</option>
        <option value="red"> Red</option>
        <option value="orange"> Orange</option>
        <option value="white"> White</option>
    </select>
</div> 
```

CSS：

```
.select-wrapper {
    display: flex;
    position: relative;
    justify-content: center;
}

.color-label {
    position: absolute;
}
.color-select{
    opacity: 0;
} 
```

查询脚本：

```
$(".color-select").on('change',function(){
    var optionSelected = $('>option:selected',this);
    $('#selectedColor').text(optionSelected.text());
  }); 
```

小提琴在这里：http: [//jsfiddle.net/w8t39bm1/1/](http://jsfiddle.net/w8t39bm1/1/)

# html - Mac 上的下拉问题

> ID：13846509
> 
> 赞同：2
> 
> 时间：2012-12-12T18:46:52.003
> 
> 标签：html, macos

我不知道这个问题是否相关，但它已经成为我工作场所的一个问题，所以......

`<select>`我们的一位客户（使用 Mac）在我们使用默认标签制作的下拉列表中向我们展示了一个“问题” 。下拉列表有 43 个`<option>`。在我们的 Windows PC 中，下拉菜单有一个滚动条（如您在屏幕截图中所见），一次只显示一些项目。但是在客户端的浏览器中，下拉菜单会同时显示所有项目。有没有办法在 Mac PC 的下拉菜单中设置滚动条？如果不是，我可以申请哪些可能的替代方案来摆脱这个问题？请注意，下拉列表使用 HTML 的默认值`<select>`和`<option>`标签，我希望不要使用任何 jQuery 插件作为替代。
谢谢 ：）

**编辑：**供参考，这里是网站 -~~[http://webcityhome.com/client/aairportershuttle/reservation.php](http://webcityhome.com/client/aairportershuttle/reservation.php)（在上车地点，前往“码头”并选择“码头号”）~~ **（链接失效）**

这是我们 PC 中的 Windows 屏幕截图 -
![窗口截图](../Images/3801fa25c6fc9d4bee2ac736c964f43b.png)

这是客户端PC中的Mac屏幕截图-
![Mac 截图](../Images/9871a53f91407be03b12f9b67a35a707.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:02:07.303

这是 OS X 上下拉列表的正常预期行为。OS X 使用列表的整个可用垂直空间，它不会将其限制在屏幕的任意部分。

我会礼貌地告诉你的客户推它。他想要做的是改变标准操作系统提供的控件的默认行为。这不是网站开发人员的工作，也不是问题。更改它并为所有用户提供意外行为将是一个问题。

**OS X 中的每个下拉列表都以这种方式工作。***询问您的客户为什么这只是您*网站上的一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:58:48.390

Mac OSX 上的 Chrome 或 Safari 似乎没有问题。这是一个屏幕截图。 ![在此处输入图像描述](../Images/6a5202e25fbc5e815fb5807afadbefe8.png)

它显示一个向下滚动的箭头，该箭头在滚动或鼠标悬停时被激活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:57:31.970

我不确定这是否真的有效，但请尝试将其添加到您的样式表中：

`select { height:7em; overflow:scroll; }`

`<select>`和标签都`<option>`可以使用 CSS 进行样式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T19:00:49.207

如果您想要滚动条，请尝试添加大小属性，例如`<select size="20">`.

# groovy - 如何从项目 build.gradle 访问在 Gradle buildSrc 中编译的类？

> ID：13846512
> 
> 赞同：0
> 
> 时间：2012-12-12T18:47:01.713
> 
> 标签：groovy, gradle

我是 Gradle 的新手。我读过 buildSrc 中的代码由 Gradle 编译并添加到项目 build.gradle 的类路径中。我想不通的是如何从 build.gradle 在 buildSrc 中创建类的实例。

这是我的目录结构：

```
build.gradle
src/test/groovy
    com.company.content.acceptance 
    com.company.tests.acceptance   
buildSrc/src/test/groovy
    com.company.test.report 
```

如何在项目 build.gradle 中的 com.company.test.report 包中创建类的实例？

谢谢，

-erzsebet

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:07:34.350

`buildSrc/src/test/groovy`无法从主构建中访问其中的类，但可以访问其中的类`buildSrc/src/main/groovy`。

# php - 声明变量的值并稍后在包含中调用它（PHP）

> ID：13846513
> 
> 赞同：0
> 
> 时间：2012-12-12T18:47:07.593
> 
> 标签：php, if-statement, include, echo

我很惊讶我在这个网站上找不到类似的问题。可能我的搜索能力有点生疏了……

所以我`<head>`在我网站的每个页面中命名一个变量，如下所示：

`<?php $color="orange" ?>`

颜色也可以等于蓝色或绿色或其他。因此，如果颜色是橙色，我想在网站的包含文件中显示橙色。比方说……菜单……

`<?php include 'inc/menu.php'; ?>`

现在，在其中包括我有这样的东西：

`<?php if ($color="orange") { echo "<span id='showmyorange'></span>";} else {echo "";} ?>`

我也可以使用这样的东西：

`<div class="<?php echo $color>">`

但是，它似乎默认为一个选项，好像在`$color`不回头查看我的页面标题中的信息的情况下定义了值，好像`$color=""`. 如何在调用它的包含文件之外定义变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:50:19.990

你需要改变这一行：

```
<?php if ($color="orange") { echo "<span id='showmyorange'></span>";} else {echo "";} ?> 
```

对此：

```
<?php if ($color=="orange") { echo "<span id='showmyorange'></span>";} else {echo "";} ?> 
```

注意双 == 符号。一个用于分配变量，两个“==”用于面对值。

# http - 这个 HTTP“重定向”是如何工作的？

> ID：13846515
> 
> 赞同：0
> 
> 时间：2012-12-12T18:47:14.207
> 
> 标签：http, redirect, http-status-code-404

当我请求此 URL 时：

```
http://www.w3.org/TR/html5/embedded-content-1.html#the-img-element 
```

服务器以`404`（未找到文件）HTTP 响应进行响应。然而，片刻之后，一个**不同的 URL**被加载到浏览器中，即：

```
http://www.w3.org/TR/html5/the-img-element.html#the-img-element 
```

服务器基本上发送**第二个 HTTP 响应**，其 URL 与最初请求的 URL 不同。

![在此处输入图像描述](../Images/50bca02d85dc3c6b4d61364957d6a7ee.png)

这种“重定向”怎么可能？第一个 HTTP 响应是 a `404`，而不是`3xx`. Afaik，`404`响应*不会*触发浏览器的第二个 HTTP 请求。那么，服务器是否只是推送第二个响应而不发出任何请求？如果是，为什么浏览器允许这样做？

* * *

**亲自查看：**打开 Chrome 开发工具的“Net”选项卡，并确保“Preserve Log on Navigation”标志已激活。现在，加载第一个 URL（从上面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:53:46.260

让我在这里回答我自己的问题。

第二个 HTTP 请求由 JavaScript 代码发起，该代码作为`404`响应返回的页面的一部分执行。该页面包含：

```
<body onload="fixBrokenLink(404)"> 
```

接着：

```
function fixBrokenLink(is404) {
    if (window.location.hash.length < 1 && !is404)
        return;

    var fragid = window.location.hash.substr(1);
    if (fragid && document.getElementById(fragid))
        return;

    var script = document.createElement('script');
    script.src = 'fragment-links.js';
    document.body.appendChild(script);
} 
```

我喜欢我提出问题、发表评论、然后回答的方式，所有这些都没有任何其他人参与。`:)`

# go - GOlang Scanf 错误

> ID：13846522
> 
> 赞同：6
> 
> 时间：2012-12-12T18:47:37.843
> 
> 标签：go

当第一次使用 Scanf 两次时，它会获得用户输入，但第二次不会并返回函数。这只是在 Windows 上运行时的问题。当我在我的 Mac 上运行它时，它会按预期工作，首先询问用户他们的用户名，然后是他们的密码。以下是问题中的代码。我不确定为什么它在 Mac 上可以正常工作，但在 Windows 上却不行。感谢您提前提供任何帮助。谢谢你。

```
func credentials() (string, string) {

    var username string
    var password string

    fmt.Print("Enter Username: ")
    fmt.Scanf("%s", &username)

    fmt.Print("Enter Password: ")
    fmt.Scanf("%s", &password)

    return username, password
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T19:10:43.610

Scanf 有点挑剔，因为它使用空格作为分隔符，而且（至少对我而言）相当不直观。Bufio 很好地抽象了其中的一些内容：

```
func credentials() (string, string) {
    reader := bufio.NewReader(os.Stdin)

    fmt.Print("Enter Username: ")
    username, _ := reader.ReadString('\n')

    fmt.Print("Enter Password: ")
    password, _ := reader.ReadString('\n')

    return strings.TrimSpace(username), strings.TrimSpace(password) // ReadString() leaves a trailing newline character
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-03T20:20:25.560

您需要添加换行符：

```
package main
import "fmt"

func main() {
   var user, pass string
   fmt.Scanf("%s\n", &user)
   fmt.Println(user)
   fmt.Scanf("%s\n", &pass)
   fmt.Println(pass)
} 
```

或者，您可以使用`Scanln`：

```
package main
import "fmt"

func main() {
   var user, pass string
   fmt.Scanln(&user)
   fmt.Println(user)
   fmt.Scanln(&pass)
   fmt.Println(pass)
} 
```

[https://golang.org/pkg/fmt#Scanln](https://golang.org/pkg/fmt#Scanln)

# sql - 如何引用 sql 中紧接在组中另一条记录之前的记录？

> ID：13846523
> 
> 赞同：2
> 
> 时间：2012-12-12T18:47:43.960
> 
> 标签：sql, sql-server-2008

我有一个奇怪的更新查询要写。

这是桌子

```
PK-ID (int) --- FK-ID (int) --- Value (int) 
```

在我的数据集中，如果我按 FK-ID 分组并按 PK-ID 排序，假设这是一组示例：

```
5 --- 10 --- 23
7 --- 10 --- 49
8 --- 10 --- 81 
```

由于某些旧软件中的错误，记录 7 和 8 的值不正确。7 的正确值是 (49-23) = 26，8 的正确值是 (81-4​​9) = 32。记录 5 是正确的。

当它按 FK-ID 分组并按 PK-ID 排序时，我需要更新每条记录以减去它之前的记录的值。如果没有前面的记录，我不需要更改该值。

有没有办法编写一个通用的 sql 更新查询来完成这个？我将如何（有条件地）检索组中先前记录的值？我正在使用 SQL Server 2008。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:01:16.140

```
with ordered as (
    select *, rn = row_number() over (partition by fk_id order by pk_id)
      from tbl
    )
update cur
   set value = cur.value - prior.value
  from ordered cur
  join ordered prior on prior.fk_id = cur.fk_id
                and prior.rn = cur.rn-1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:38:22.683

这是我认为正确的答案，使用与前一个类似的想法。toupdate 子查询根据问题中的规则计算值（更新具有相同外键和连续主键的记录）。它确实假设 id 是某种数字值。

```
with toupdate as (
    select t.pkid, t.value - tprev.value as newval
    from t join
         t tprev
         on t.pkid = tprev.pkid+1 and t.fkid = tprev.fkid
   )
update t
    set value = newvalue
    from toupdate
    where t.pkid = toupdate.pkid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:00:37.493

我希望它应该返回你想要的（对不起，我现在不能尝试）；你只需要将它与`UPDATE`

```
 WITH cte1 AS 
 (SELECT pk_id, fk_id, value, ROW_NUMBER() OVER (PARTITION BY fk_id ORDER BY pk_id DESC)
 as num 
 FROM your_table 
 )

 SELECT a.*, 
 --CASE 
 --  WHEN b.pk_id IS NOT NULL THEN a.value-b.value 
 --  ELSE 0 END 
 a.value-b.value as valid_number
 FROM cte1 a
 --LEFT JOIN cte1 b ON (b.fk_id = a.fk_id AND b.num = a.num-1)
 INNER JOIN cte1 b ON (b.fk_id = a.fk_id AND b.num = a.num-1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:07:31.480

```
update t set value = value -
              isnull((select top 1 value 
                                 from t t2 
                                     where t2.FKID=t.FKID 
                                       and t2.PKID<t.PKID 
                        order by PKID desc),0); 
```

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/6605f/1)

# android-intent - 在 extras.getboolean 中传递给其他活动的错误值

> ID：13846528
> 
> 赞同：1
> 
> 时间：2012-12-12T18:48:00.260
> 
> 标签：android-intent

我有两个活动，MoneFirst 和 MOne。当我尝试启动 MOne 并发送额外的信息时，问题出现在 getBoolean 中。events 是 false，而 myplace 是 true。虽然 MOne 将 events 设为 false 而 myplace 也设为 false。它可能采用默认值。但为什么？

万一第一：

```
 Intent i = new Intent(MOneFirst.this,MOne.class);
      Log.d("Details of selecting move and view", 
      "Radius is " + r + " Type" + t + "My Events" 
      +events + "My Places" + myplaces );
      i.putExtra("r", r);
i.putExtra("t", t);
i.putExtra("events", events);
i.putExtra("myplaces", myplaces);
startActivity(i); 
```

在 MOne 中获取值：

```
Intent J = getIntent();
Bundle extras = J.getExtras();
r = extras.getDouble("r");
t  = extras.getString("t");
events = extras.getBoolean("events");
myplace = extras.getBoolean("myplace"); 
```

我在这里省略了细节并显示“根据我”的相关代码。

# grid - KendoUI read() 和 query() 数据源方法不一致

> ID：13846531
> 
> 赞同：0
> 
> 时间：2012-12-12T18:48:04.227
> 
> 标签：grid, datasource, kendo-ui

单击按钮时，我需要阅读数据的第一页。常见的答案是通过 parameterMap 使用数据源的 query() 方法、指定页面和其他附加值。问题是在我的数据源中我也在使用聚合，而 query() 方法似乎根本无法处理它们。我对吗？是因为只有 read() 使用“transport.read”设置吗？是否有另一种方法可以将绑定到数据源的网格重置为包含所有数据源设置的第一页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:46:29.890

是的，伙计，分页有特定的方法-> **dataSource.page(3)**。[这](http://docs.kendoui.com/api/framework/datasource#page)是文档中的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:58:59.917

我使用“datasource.page(1)”解决了我的问题（通过数据源读取数据的第一页，带有参数）并通过“可观察”对象设置 parameterMap 中的值，因此当我更改参数时它们会更新和通过“page(1)”请求发送。

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    param1: "value1",
    param2: "value2",
    param3: "value3"
});

var datasource = new kendo.data.DataSource({
    transport: {
        parameterMap: function (inputParams, operation) {
            return JSON.stringify($.extend({
                param1: vm.get("param1"),
                param2: vm.get("param2"),
                param3: vm.get("param3"),
            ));
        }
    }
});

$("#btn").bind("click", function(e) {
    // set call parameters, if needed
    vm.set("param1", "new value");
    datasource.page(1);
});

=== HTML ===
<button class="k-button" id="btn">GetData</button> 
```

# ruby-on-rails-3 - 返回内存（十六进制）地址而不是 Rails 中的值

> ID：13846532
> 
> 赞同：3
> 
> 时间：2012-12-12T18:48:04.957
> 
> 标签：ruby-on-rails-3, formtastic

我绝对是一个菜鸟，所以这可能是我忽略的一些简单的事情，但是，我为尝试找到解决方案所做的搜索是空的。

我使用具有 5 个输入字段的 formtastic 构建了一个表单：两个是文本框，三个是选择列表。

```
<%= semantic_form_for @player do |f| %>
<%= f.inputs do %>
    <%= f.input :firstname, :label => "First Name " %>
    <%= f.input :lastname, :label => "Last Name " %>
    <%= f.input :leagueid, :as => :select, :collection => League.all(:order => :leaguename), :label => "League " %>
    <%= f.input :team_1, :as => :select, :collection => Team.all(:order => :name), :label => "Team 1 " %>
    <%= f.input :team_2, :as => :select, :collection => Team.all(:order => :name), :label => "Team 1 " %>
<% end %>
    <%= f.actions %>
  <% end %> 
```

正在发生的事情是团队列表完美运行（显示团队名称）。然而，联赛名单是另一回事。列表中的所有条目如下所示（在“League:”之后有不同的代码）：

```
#<League:0x007fe29c406498> 
```

如果我使用表单创建播放器，它工作正常。正确的联赛 ID 会进入数据库和所有内容。我只是想不通为什么球队的名字会显示，而无论是什么都显示的是联盟。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:19:22.513

`to_s`将对象转换为字符串时，除非您提供字符串转换的方法，否则 Ruby 会将它们转换为您所看到的内存地址。我没有使用过formtastic，但我相信向`to_s`您的League 类添加一个方法应该会使其显示您想要的内容。

尝试添加

```
def to_s
  @name    # use whatever you want to be displayed. 
end 
```

到联赛班。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:43:42.943

您可以尝试在选择列表中明确指定应用作文本和 id 的字段。我相信它看起来像。

```
<%= f.input :leagueid, :as => :select, :collection => Hash[League.all.map { |league| [league.leaguename, league.id] }] 
```

语法很疯狂。对 map 的调用返回一个名称/id 对数组，例如`[ ['league1', 1], ['league2', 2] ]`. 调用`Hash`它会将其转换为哈希，例如`{'league1' => 1, 'league2' => 2}`. 似乎选择列表应该使用这个哈希来填充自己。

在[http://rdoc.info/github/justinfrench/formtastic](http://rdoc.info/github/justinfrench/formtastic)的“使用”部分下有一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:11:32.200

:member_name 是我认为的解决方案。

```
<%= f.input :leagueid, :as => :select, :collection => League.all(:order => :leaguename), :label => "League " %> 
```

可能会为你工作

```
<%= f.input :leagueid, :as => :select, :member_name => :league, :collection => League.all(:order => :leaguename), :label => "League " %> 
```

我的问题是我有一个模型的字段与模型同名，我认为这让 Formtastic 感到困惑

脚手架示例：

```
 rails g scaffold Countries code:string country:string
  rails g scaffold Types title:string description:string 
```

模型：

```
class Sign < ActiveRecord::Base   
attr_accessible :title, :country_id, :type_id 
belongs_to :country   
belongs_to :type 
```

表单视图：

```
<%= f.input :type %>
<%= f.input :country, :member_label => :country  %> 
```

没有 member_label 的表单会导致对象 ID 显示在国家/地区的选择框中，尽管 ID 已正确保存。类型选择在没有声明 member_label 的情况下完美运行。请注意，我不需要指定`:as => :select`，因为 formtastic 可以从 belongs_to 关系中推断出这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T21:00:59.220

尝试使用：

```
<%= form.input :league, :member_label => :leaguename %> 
```

这将覆盖 Formtastic Column Select 的命名约定。还请查看：[覆盖列名称约定 wiki](https://github.com/justinfrench/formtastic/wiki/1.1-How-It-Works)

希望这有帮助。

# php - 克隆 CodeIgniter 的数据库对象

> ID：13846539
> 
> 赞同：4
> 
> 时间：2012-12-12T18:48:30.150
> 
> 标签：php, codeigniter

我正在开发 CodeIgniter 的子查询库（[链接到项目](http://labs.nticompassinc.com/CodeIgniter-Subqueries/)），它通过返回您可以使用的数据库对象而不是普通`$this->db`对象来工作。

最初，我每次都在创建新的数据库对象：

```
$this->CI =& get_instance();
$db = $this->CI->load->database('', true); 
```

但后来我意识到（或者更确切地说有人向我指出）这每次都会建立一个新的数据库连接！所以我决定尝试`clone`对象而不是制造新对象。

我将代码更新为如下所示（[链接到完整代码](https://github.com/NTICompass/CodeIgniter-Subqueries/blob/v3.0-beta/libraries/Subquery.php#L56)）：

```
class Subquery{
    var $CI, $db;

    function __construct(){
        $this->CI =& get_instance();
        $this->db = $this->CI->db; // Default database connection
    }

    function start_subquery(){
        $newDatabase = clone $this->db;
        // some more code
        return $newDatabase;
    }
} 
```

我对此进行了测试，它似乎有效，但我不确定这是否能解决问题。using`clone`是建立一个新的数据库连接，还是在内部使用引用并且只保留一个连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:00:59.737

首先，`=&`如果您不使用 PHP 4（我假设`get_instance`返回一个对象），这是不必要的并且可能有害。

至于是否`clone`创建新连接..这取决于数据库实现。据我所知，`PDO`克隆时不会创建额外的连接。如果您想对此进行测试，请创建一个小脚本，该脚本运行`start_subquery`到某种效果，然后休眠相当长的时间。连接到mysql并运行：

```
SHOW STATUS WHERE `variable_name` = 'Threads_connected' 
```

如果它超过 2 个（运行查询的连接和来自脚本的连接），那么由于某种原因正在建立一个额外的连接。

至于你*是否*应该克隆数据库，我不知道你为什么要这样做，但我真的不知道这个类的用例，我对 CI 也不太了解。

# model-view-controller - 浏览器未显示 MVC 响应视图

> ID：13846540
> 
> 赞同：1
> 
> 时间：2012-12-12T18:48:31.507
> 
> 标签：model-view-controller, browser, freeze, no-response

我有一个大部分时间都能正常工作的 ASP.NET MVC 应用程序。有时，用户抱怨他们提交了一个操作请求，应用程序似乎挂起（即即使几分钟后浏览器也没有收到响应，最终浏览器超时。）我可以从 HttpWatch 看到正在提交请求，IIS日志显示接收请求的服务器，应用程序日志显示正在调用并正常完成的请求操作。HttpWatch 给出的错误通常是“ERROR_INTERNET_CONNECTION_RESET”或“NS_ERROR_NET_RESET”。

该应用程序还向同一服务器发出许多 Ajax 请求，这些请求似乎都正常运行 - “挂起”情况仅发生在完整的 HTTP 页面加载（即不是 Ajax 请求）上。

起初我以为这与浏览器有关，但它同时发生在 IE8 和 IE9 以及 FireFox 17 上，这可能是上面发布的两条不同错误消息的原因。c

有谁知道问题是什么？

# caching - IE10 - 无法阻止 iframe 的缓存

> ID：13846541
> 
> 赞同：1
> 
> 时间：2012-12-12T18:48:32.007
> 
> 标签：caching, iframe, internet-explorer-10, html5-appcache

我在页面上有模式框正在 iframe 中打开动态内容。

`<a href="popup.php?id=52" rel="modal">Link 1</a>`（固定标识）

`<a href="popup.php?id=53" rel="modal">Link 1</a>`（固定ID）...

但无论我做什么，我都无法阻止 iframe 内容缓存在 IE10 中（似乎其他浏览器都不错）。

*   我使用html5，所以元标记是无助的。
*   Cache.manifest 让我的页面一团糟（或者如果只放 NETWORK：* - 无效）。
*   PHP 标头`header("Cache-Control: no-cache"); header("Expires: -1");`对 IE10 也不起作用。
*   在 web 中找到的 JS/JQuery 解决方案我无法正确应用。

除了为 href 添加另一个动态 GET 参数之外的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:05:32.843

我不确定这是否适用于 IE10，但几年前 Firefox 在缓存 iframe 的内容时遇到了类似的问题，让它重新加载的一个技巧是使用 JavaScript 强制重新加载，如下所示：

```
var orig_src = iframe.src;
iframe.src = "blank.html"; # A blank document you'll need to create
setTimeout(function() { iframe.src = orig_src; }, 100); 
```

或更简单的技术

```
iframe.src = iframe.src; 
```

...这在 IE10 中也可能有效，也可能无效。

# html - 每边的侧边栏？

> ID：13846546
> 
> 赞同：1
> 
> 时间：2012-12-12T18:48:56.890
> 
> 标签：html, css

我知道这应该是一件简单的事情，但我有这么多的编码，我认为这可能会干扰到这一点。我正在尝试在内容的每一侧制作一个薄侧边栏。也许用于广告或其他东西。

这是代码：

```
<div id="content">
    <article>
       This is a test.
    </article>
</div>
    <aside id="space">
        Hello.
    </aside> 
```

有什么问题吗？

**编辑：** 我知道那不是两个侧边栏。我需要先做一个工作，哈哈。

这是它的CSS，如果它有帮助的话：

```
#content{
    float: left;
    width: 1366px;
    height: 350px;
}
article {
    background: #F5F5F5;
    border: 1px solid grey;
    padding: 10px;
    margin: 0px 325px;
    height: 325px;
    width: 660x;
    -webkit-box-shadow: rgb(110,110,110) 5px 5px 100px inset;
}
#space{
    float: left;
    width: 20px;
    height: 40px;
    margin: 10px 0px;
    padding: 20px;
    background: #66CCCC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:01:35.523

那是你要的吗？

**HTML**

```
 <aside id="left">
     left
  </aside>

  <div id="content">
     <article>
         This is a test.
     </article>
  </div>

  <aside id="right">
     right
  </aside> 
```

**CSS**

```
 body {
      width: 80%;
      margin: 0 auto;
  }

  #left, #content, #right {
     float: left;

      text-align: center;
  }

  #left, #right {
      width: 15%;
      background-color: #eee;
  }

  #content {
      width: 70%;
      background-color: #aaa;
  } 
```

[http://jsfiddle.net/fYFX6/](http://jsfiddle.net/fYFX6/)

如果需要，您可以向边栏添加边距。

# ios - 从另一个 UIViewController 推送一个 UIViewController - 如何？

> ID：13846547
> 
> 赞同：1
> 
> 时间：2012-12-12T18:49:08.217
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, pushviewcontroller, navigationcontroller

我有一个 UIViewController 子类（比如 BBB），它继承自已经编写的自定义 UIViewController 类（比如 AAA）。BBB 类中有一个 UITableView，当用户点击 UITableView 的任何单元格时，我想推送另一个 UIViewController 类（比如 CCC）。

所以，我尝试用 BBB 的`tableView: didSelectRowAtIndexPath:` 方法推动 CCC 控制器。

我的代码是，

```
CCC *ccc = [[CCC alloc] init];
[self.navigationController pushViewController:ccc animated:YES];
[ccc release]; 
```

点击单元格时没有任何反应，因此我通过以下代码检查了 BBB 类的导航控制器。

```
if (self.navigationController == nil)
{
    NSLog(@"Navigation controller is nil");
} 
```

该消息已成功打印:) 所以，我试图为导航控制器分配一些东西，但我的运气不好，它是一个只读属性。

然后我尝试通过将 ccc 分配为 rootviewcontroller 来创建本地 UINavigationController，然后尝试推送该本地导航控制器。它抛出一个异常“不支持多次推送同一个视图控制器实例”。

我的问题是，

*   是否可以找到导航控制器在 AAA 类中获得 nil 值的位置？我没有在我的 BBB 类中将导航控制器设为 nil，并且我发现在 AAA 类中是否有任何类似“self.navigationController = nil”的语句。但没有什么是那样的。

*   如何推送 CCC 类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:17:23.477

将它放入您的应用程序委托中，您的代码的第一个版本应该可以工作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window makeKeyAndVisible];
    AAA *aaa = [[AAA alloc] init];
    self.window.rootViewController = [[UINavigationController alloc] initWithRootViewController: aaa];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:56:58.420

要`self.navigationController`正确设置属性，您必须创建一个`UINavigationController`with `[[UINavigationController alloc] initWithRootViewController: aaa]`。然后，无论您当前添加 aaa （splitViewController 或 UIWindow 等），请改用您创建的导航控制器。

例如，如果您使用代码设置视图，请在您的应用委托中：

```
AAA *aaa = [[AAA alloc] init];
UINavigationController *root = [[UINavigationController alloc] initWithRootViewController: aaa];
UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[window makeKeyAndVisible];
window.rootViewController = root; 
```

现在，`aaa.navigationController`将指向`root`，因此您可以执行原始帖子中的操作：`[self.navigationController pushViewController: bbb animated: YES];`

# c# - 带 % 的参数化查询

> ID：13846548
> 
> 赞同：2
> 
> 时间：2012-12-12T18:49:11.757
> 
> 标签：c#, sql-server-2008, select, parameterized

我有一个选择语句

```
command.commandText = "SELECT FIRSTNAME, LASTNAME FROM MYTABLE" +
                      " WHERE STATE LIKE @STATE + '%';"; 
```

这给了我一个“'”错误

我试过这个

```
command.commandText = "SELECT FIRSTNAME, LASTNAME FROM MYTABLE" +
                      " WHERE STATE LIKE @STATE" + "'%';"; 
```

这给了我“％”错误......正确的方法是什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T18:52:25.673

您必须在实际参数值中添加 %，而不是在查询中：

```
command.commandText = "SELECT FIRSTNAME, LASTNAME FROM MYTABLE WHERE STATE LIKE @STATE";
command.Parameters.AddWithValue("STATE", "CALI%"); 
```

例如，如果您在 string 中保存了一些值，`valState`只需附加：`%``AddWithValue`

```
string valState = "Cali";
// ...
command.Parameters.AddWithValue("STATE", valState + "%"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:51:49.377

尝试将 放入`%`您要绑定的字符串中

```
stateStr += "%"; 
```

然后绑定`stateStr`

# wolfram-mathematica - Set::write: 创建函数时出错

> ID：13846551
> 
> 赞同：0
> 
> 时间：2012-12-12T18:49:13.320
> 
> 标签：wolfram-mathematica

我对 Mathematica 很陌生，我对创建函数时产生的错误感到非常沮丧。下面，我正在编写一个函数，用于“居中”矩阵，其中行对应于示例，列对应于特征。目的是从每个元素中减去它所属列的平均值。

```
centerdata[datamat_] := (

  numdatapoints = 
   Dimensions[datamat][[1]](*Get number of datapoints*)

     numberfeatures = 
    Dimensions[datamat[[1]]][[1]](*Get number of datapoints*)

      columnmean = ((Total[datamat])/numdatapoints)

      For[i = 1, i < numdatapoints + 1, i++, (* For each row*)

       For[j = 1, j < numfeatures + 1, j++, (* For each element*)

              datum = datamat[[i]][[j]];
         newval = (datum - (colmean[[j]]));
         ReplacePart[datamat, {i, j} -> newval];
         ];
       ];

  Return[datamat];
  ) 
```

为矩阵运行此函数，我收到以下错误：

"Set::write: 4 {5.84333,3.054,3.75867,1.19867} 中的标记时间受保护。>> Set::write: "4\ 150 中的标记时间受保护。"

其中 {5.84333,3.054,3.75867,1.19867} 是数据矩阵中的第一个示例，而 150 是矩阵中示例的数量（我使用的是著名的[iris dataset](http://en.wikipedia.org/wiki/Iris_flower_data_set)，对于任何感兴趣的人）。这些错误对应于以下代码：

```
numdatapoints = Dimensions[datamat][[1]](*Get number of datapoints*)

numberfeatures = Dimensions[datamat[[1]]][[1]](*Get number of datapoints*) 
```

谷歌搜索和玩弄这个错误并没有多大帮助，因为一般回复与乘法有关，这显然没有在这里完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:47:18.360

给定一个数据表 ( `tab`)，该函数`Mean[tab]`将返回每列均值的列表。接下来，您想从表中的每一行中减去这个（按元素），试试这个：

```
Map[Plus[-Mean[tab],#]&,tab] 
```

我有一种感觉，可能有一个内在的统计函数可以在一个语句中执行此操作，或者我对更简单的解决方案视而不见。

由于您是初学者，我建议您立即阅读以下文档：

*   `Map`，这是 Mathematica 等函数式编程语言中的基本运算符之一；和
*   *纯函数*，其使用涉及神秘符号`#`和`&`.

如果您在 Mathematica 程序中编写循环，则几乎可以肯定您误用了系统。

# python - Python 导入函数

> ID：13846556
> 
> 赞同：0
> 
> 时间：2012-12-12T18:49:45.970
> 
> 标签：python, import

如果我在我的代码中定义了一个函数，让我们调用 foo()，我使用以下代码：

```
from mod1 import * 
```

使用 mod1 包含一个也具有相同名称的函数 foo() 并调用 foo() 函数，这会在评估它时覆盖我对函数的原始定义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:55:08.883

据我所知会。

您需要重命名`foo()`已构建的函数**或**将模块输入更改为读取 `import mod1`并随后定义该`foo()`函数的任何`mod1`使用`mod1.foo()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:55:10.410

取决于函数在哪里：

```
def foo():
    pass

from mod1 import *

foo() # here foo comes from mod1

# ------- 
# another interesting case

def foo():
    from mod1 import *
    foo() # this will also call foo from mod1
foo()     # but this one is still the foo defined above.     

# ---------
# The opposite 

from mod1 import *

def foo():
    pass

foo() # here foo is the one defined above 
```

无论如何，`from module import *`这被认为是一种非常糟糕且容易出错的做法。它在 C++ 中是一种类似的`using namespace std;`东西。尽可能避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:55:09.587

我得到以下信息：

文件 mod1.py 包含

```
def foo():
    print "hello foo" 
```

然后我启动 python 解释器并执行以下操作：

```
>>> def foo():
...     print "hello world"
... 
>>> from mod1 import *
>>> foo()
hello foo
>>> 
```

所以是的，它会覆盖。

除非你这样做，否则一个新的

```
def foo():
    print "new foo" 
```

在这种情况下，它将打印“new foo”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T18:57:12.270

## 一个.py

```
def foo():
    print 'Hello A' 
```

## 测试

```
>>> def foo():
...     print 'Hello 1'
... 
>>> foo()
Hello 1
>>> from a import *
>>> foo()
Hello A
>>> def foo():
...     print 'Hello 2'
... 
>>> foo()
Hello 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T20:20:17.543

这取决于函数定义和`import`语句的相对顺序。第二个执行的将覆盖第一个。

# java - 游戏开发中的 JRebel（性能）

> ID：13846558
> 
> 赞同：1
> 
> 时间：2012-12-12T18:49:53.380
> 
> 标签：java, performance, jrebel

我正在用纯 Java 编写游戏（没有外部库）。在启用 JRebel 的情况下运行项目会降低性能并且帧速率低于 1 fps。

有没有办法使用 JRebel 进行游戏开发？例如，我可以在对代码进行一些更改后手动“运行”JRebel，这样它就不会减慢游戏速度，但我仍然会在不重新启动应用程序的情况下看到更改？

我正在使用 Eclipse 和 Java 1.6，最新的 JRebel。我以前没有使用 JRevel 的经验，因此欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:52:57.227

这似乎不太适合 JRebel。目的是当您运行一个需要很长时间重新部署的应用程序时，例如一个复杂的 WAR，您可以即时重新加载类。重新启动游戏需要多长时间？

当请求没有发生时，Web 应用程序很少工作，因此您可以开发、重新加载、测试、开发......等等。即使在您编写代码时，您的游戏也可能正在执行工作，因此 JRebel 可能会在您键入时努力重新加载类，因为您的代码的每一帧都需要一个新的类定义。这是我的猜测。

# asp.net - 注册后改变和保存自定义文化

> ID：13846559
> 
> 赞同：1
> 
> 时间：2012-12-12T18:49:56.797
> 
> 标签：asp.net, localization, globalization, cultureinfo

我最近在 ASP.NET 中注册了一些自定义文化，后来我们的客户要求我更改其中一种文化。例如，我注册`en-EU`了一个毯子“欧盟英语”语言区域，用于欧盟的英语。我被要求将它从欧盟重新标记为欧洲。Iso 代码`en-EU`将保持原样，但我需要将**英文名称**和本**机名称**属性从`English (European Union)`更改为`English (Europe)`。我可以在不取消注册并重新注册的情况下执行此操作吗？如果我必须注销并重新注册，我会丢失存储在其中的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:13:48.647

看起来在您再次注册之前，它必须已经取消注册（因为如果自定义文化已经注册， [Register](http://msdn.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.register.aspx)会抛出 InvalidOperationException）。

但是，您可以做的是从现有的自定义文化初始化 CultureAndRegionInfoBuilder，然后取消注册（此时您不再需要它），然后进行更改并再次注册。

即像这样：（未经测试的代码）

```
 // Initalize the CultureAndRegionInfoBuilder with en-EU
  CultureAndRegionInfoBuilder car = new CultureAndRegionInfoBuilder("en-EU", 
                                         CultureAndRegionModifiers.None);
  car.LoadDataFromCultureInfo(CultureInfo.CreateSpecificCulture("en-EU"));
  car.LoadDataFromRegionInfo(new RegionInfo("en-EU"));

  // Unregister it
  CultureAndRegionInfoBuilder.Unregister("en-EU"); 

  // Update it
  car.CultureEnglishName = "English (European Union)";
  car.CultureNativeName = "English (Europe)";

  // Re-register it
  car.Register(); 
```

# f# - 使用 Unquote 断言时的 MissingMethodException

> ID：13846561
> 
> 赞同：5
> 
> 时间：2012-12-12T18:50:04.520
> 
> 标签：f#, nunit, missingmethodexception, f#-unquote

我正在尝试使用带有 NUnit 的[unquote作为测试运行器。](http://code.google.com/p/unquote/)测试用例取自[Getting Started](http://code.google.com/p/unquote/wiki/GettingStarted)并在 NUnit 之外运行时按预期工作：

```
namespace FsTest.Tests

open NUnit.Framework
open Swensen.Unquote

[<TestFixture>]
module Example =

    [<Test>]
    let foo() = 
        test <@ (1+2)/3 = 1 @> 
```

在 NUnit 下我得到这个异常：

> FsTest.Tests.Example.foo：System.MissingMethodException：找不到方法：'System.Tuple `2<Microsoft.FSharp.Collections.FSharpList`1，Microsoft.FSharp.Quotations.FSharpExpr> Internal.reduceFullyAndGetLast(Microsoft.FSharp.Quotations.FSharpExpr)'。

我想知道上面的代码是否有问题以及如何使它工作。如果有帮助的话， Unquote`raise`也会以同样的方式失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T19:49:06.630

根据您对问题的描述，我怀疑您需要使用`FSharp.Core`从版本 4.0.0.0 到版本 4.3.0.0 的绑定重定向来配置您的 NUnit 项目，因为最新版本的 Unquote 是为 .NET 4.0 构建的，并且您的测试项目的目标是 .NET 4.5.

有关详细信息，请参阅[此](http://code.google.com/p/unquote/issues/detail?id=78)取消引用问题。我相信您的配置看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <runtime>
    <legacyUnhandledExceptionPolicy enabled="true" />
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity
          name="FSharp.Core"
          publicKeyToken="b03f5f7f11d50a3a"
          culture="neutral"/>
        <bindingRedirect
          oldVersion="2.0.0.0"
          newVersion="4.3.0.0"/>
        <bindingRedirect
          oldVersion="4.0.0.0"
          newVersion="4.3.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

我不确定您需要将它放在 NUnit 项目的确切位置，但可能在通过[项目编辑器](http://www.nunit.org/index.php?p=projectEditor&r=2.2)指定的配置文件中？

不幸的是，我没有安装 VS2012，所以我无法真正为您诊断这个问题。

# debugging - 有没有办法在 OllyDbg 中打开多个内存转储？

> ID：13846570
> 
> 赞同：0
> 
> 时间：2012-12-12T18:50:30.180
> 
> 标签：debugging, memory, ollydbg

我想在 OllyDbg 中同时查看多个内存区域，但似乎只有一个“转储”窗口，它是由“在转储中显示”命令激活的。有没有办法打开多个这样的窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:01:51.043

是的。您可以打开多个转储窗口。

这是一种解决方法：

*   转到“内存映射”窗口（“窗口”>“内存映射”或单击“M”按钮）。
*   到达此处后，您可以单击您选择的内存段。
*   这将打开一个新的转储窗口。

您可以多次执行此操作以调出更多转储窗口。

此外，在转储窗口中，您可以使用 Ctrl+G 来显示“输入地址以跟随”提示。在此处输入您要跳转的地址。

# c - C 中的链表：输入字符串并显示时出现问题

> ID：13846572
> 
> 赞同：0
> 
> 时间：2012-12-12T18:50:36.753
> 
> 标签：c, visual-studio

我为链表编写了代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct student{
       char name[256];
       int id;  
       struct student *next;
};
  struct student *start;
  struct student *last;     

void enter(void);
void add( struct student *i,struct student **last);
void display(struct student *first);       

int main(int argc, char *argv[])
{
  start=last=NULL;

   enter();
   enter();
   enter();
   display(start);

  system("PAUSE");  
  return 0;
}

void add( struct student *i,struct student **last)
{
     if (!*last){ *last=i; start=i;}
     else {(*last)->next=i;*last=i;}
     i->next=NULL;

     }
void enter(void)
{
   struct student *info;

   info=(struct student *)malloc(sizeof(struct student));

    printf("Enter the name of the student:\n");
    fgets(info->name,255,stdin);
    fflush(stdin);
    // gets(info->name);
     printf("Enter the student id:\n");
     scanf("%d%",&info->id); 
     add(info,&last);

 }

 void display(struct student *first)
 {
      while(first)
      {
                  printf("\n\n\n\nName: %s\n",first->name);
                  printf("Id: %d\n", first->id);
                  first=first->next;
                  }
  } 
```

它确实创建了一个链接列表，但是当我尝试输入值时：它显示

![输出](../Images/05bd07181822c5397aae306cb2bc8ec7.png)

对于第一个元素，它为 id 正确使用名称，我需要在 id 数字之后手动输入 \n（否则它不会退出 scanf 模式），并且从第二个元素开始，它不会提示输入名称，它会跳过“Enter name”并询问 id 我需要在哪里再次手动输入 \n。在显示链表元素时，它确实显示名字，但从第二个名字开始显示\n。我已经使用了 fflush(stdin)。您能否让我知道为什么会出现这种行为？我附上了o / p图片。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:56:09.140

如果我有一个镍...

无论如何，这里有很多问题：

1）不要`fflush(stdin)`，那是未定义的行为

`scanf`2) 混合s 和s从来都不是一个好主意`fgets`，它只会让事情变得混乱。

```
scanf(" %s", info->name); // will do instead of your fgets statement 
```

`%`3）你的scanf中有一个额外的：

```
scanf("%d%",&info->id);  // should be scanf("%d",&info->id); 
```

* * *

为了完整...

为什么你现在遇到问题：

`fgets()`接受一个字符串并包含换行符，因此当您询问名称时，您会得到 "name\n"

`scanf()`接受号码并***离开***换行符。因此，当您要求提供 ID 时，您会输入数字，但换行符`'\n'`仍在`stdin`.

下次您`fgets()`运行时，它会自动将其作为第二个名称的输入。似乎“跳过”输入请求。

* * *

**编辑**
如果您使用的原因`fgets()`是读取其中包含空格的字符串（如`"first_name last_name"`），也可以`scanf()`使用 Negated scanset 选项来完成：

```
scanf(" %[^\n]",info->name); 
```

# jquery - 在jquery中制作按钮触发功能

> ID：13846575
> 
> 赞同：0
> 
> 时间：2012-12-12T18:50:41.637
> 
> 标签：jquery, html

我有以下 jQuery 代码：

```
$("#btnReset").click(function () {
    ColReorder.fnReset(oTable);
    return false;
}); 
```

HTML如下：

```
<div style="padding: 5px 5px 1px 0px; float: right" id="globalbutton-row" class="ex">
    <button class="button" type="button" id="btnReset"><%=rb.getString("button.reset")%></button>
    <button class="button" type="button" id="btnDeveloperSampleMenu" onclick="javascript:CallDeveloperSampleMenu()"><%=rb.getString("button.devsamplemenu")%></button>
</div> 
```

我希望“重置”按钮启动功能 ColReOrder.fnReset 但由于某种原因这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:54:01.097

您必须小心不要引用 DOM 中尚未加载的任何内容。如果`<button>`在您的代码被触发之前没有将其加载到 DOM 中，则不会发生任何事情。您可以通过在加载所有内容时运行代码来解决此问题：

```
$(document).ready(function() {
  $("#btnReset").click( function () {
    ColReorder.fnReset( oTable );
    return false;
  } );
}); 
```

此外，如果`<button>`通过 AJAX 或其他方式添加，您将遇到同样的问题。您可以使用[on()](http://api.jquery.com/on/)方法解决此问题：

```
$(document).ready(function() {
  $(document).on('click',"#btnReset", function(event) {
    ColReorder.fnReset( oTable );
    return false;
  } );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:53:38.720

尝试使用事件委托。当您的 javascript 被执行时，该元素可能尚未加载到 dom 中。将单击事件附加到文档将通过侦听单击然后在单击时搜索您的选择器来使代码工作。

```
$(document).on('click','#btnReset',function () {
  ColReorder.fnReset( oTable );
  return false;
  } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:54:13.297

您必须在加载文档后执行代码。

```
$(function() {
  $("#btnReset").click( function () {
    ColReorder.fnReset( oTable );
    return false;
  });
}); 
```

# ember.js - 为什么查看。车把需要

> ID：13846576
> 
> 赞同：2
> 
> 时间：2012-12-12T18:50:42.477
> 
> 标签：ember.js

我无法理解 Ember.js 中的某些内容，我包含一个属性，但为了显示它我必须执行 {{view.property}}，为什么我不能简单地使用 {{property}} ？

在以下示例中，仅显示 {{view.test}}。

视图不应该是默认范围吗？

索引.html：

```
<script type="text/x-handlebars" data-template-name="places">
    {{test}} {{view.test}}
</script> 
```

应用程序.js：

```
App.PlacesController = Ember.ArrayController.extend({
});

App.PlacesView = Ember.View.extend({
templateName: 'places',
test: 'test' 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:24:04.697

从 Ember 1.0pre 开始，模板中把手助手的上下文已更改为控制器。

在此之前，它是视图。该`view`关键字可用于从视图访问属性。

尝试将`test`属性添加到您的控制器，看看会发生什么。

# ravendb - 在嵌入式模式下设置 RavenDB 时遇到问题

> ID：13846579
> 
> 赞同：1
> 
> 时间：2012-12-12T18:51:04.987
> 
> 标签：ravendb

我[将此](http://msdn.microsoft.com/pt-br/magazine/hh547101%28en-us%29.aspx)用作参考并安装了两者（使用nuget）

安装包 RavenDB.Client -Version 1.0.992

和

安装包 RavenDB-Embedded -Version 1.0.919

（[官方](http://ravendb.net/docs/server/deployment/embedded)链接建议使用**Install-Package RavenDB-Embedded**。但是该 nuget 命令失败并出现错误 Install-Package : Unable to find package 'RavenDB-Embedded'。）

但是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Raven.Client.Document;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
           var Store = new DocumentStore { ConnectionStringName = "RavenDB" };
            var instance =  new EmbeddableDocumentStore { ConnectionStringName = "RavenDB" };
        }
    }
} 
```

无法识别 EmbeddableDocumentStore。EmbeddableDocumentStore 的命名空间是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:53:05.563

在谷歌小组中环顾四周并进行一些实验后，我得到了解决方案

利用

```
Install-Package RavenDB.Embedded -Version 1.0.992 
```

此外，如果它是一个控制台应用程序：右键单击控制台项目--> 属性-->

将目标框架设置为 .NET Framework4（而不是默认的 .NET Framework 4 客户端配置文件）

# algorithm - 堆树中的第 K 个元素

> ID：13846585
> 
> 赞同：6
> 
> 时间：2012-12-12T18:51:22.673
> 
> 标签：algorithm, data-structures, tree, heap

我有一个堆（像二叉树一样实现：每个节点都有两个指向子节点的指针和一个指向父节点的指针）。

给定其中的元素数量，如何找到第 k 个元素（按 BFS 顺序）？我认为它可以在 O(logn) 时间内完成..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T19:36:57.190

（我假设“第 k 个元素（按 BFS 顺序）”是指从输入的从上到下、从左到右扫描的角度来看的第 k 个元素。）

由于您知道二叉堆是一棵完全二叉树（可能在最后一层除外），因此您知道树的形状是具有一定高度的完美二叉树（对于某些 k，包含 2 ^k个节点），具有一定数量的节点从左到右填充。当您写出图片中节点的数量时，这些树的一个非常漂亮的属性就会出现，对这些值进行单索引：

```
 1
            2                3
        4       5        6       7
       8 9    10 11    12 13   14 15 
```

请注意，每一层都从一个节点开始，该节点是 2 的幂。因此，假设您要查找数字 13。不大于 13 的 2 的最大幂是 8，因此我们知道 13 必须出现在行中

```
 8  9 10 11 12 13 14 15 
```

我们现在可以使用这些知识对从 13 到树根的路径进行逆向工程。例如，我们知道 13 在这一行数字的后半部分，这意味着 13 属于根的右子树（如果它属于左子树，那么我们将在包含8、9、10 和 11。）这意味着我们可以直接从根开始，扔掉一半的数字来得到

```
12 13 14 15 
```

我们现在位于树中的节点 3。那么我们是向左还是向右呢？嗯，13 在这些数字的前半部分，所以我们现在知道我们需要下降到节点 3 的左子树。这将我们带到节点 6，现在我们剩下了前半部分数字：

```
12 13 
```

13 在这些节点的右半部分，所以我们应该向右下降，带我们到节点 13。瞧！在那里！

那么这个过程是如何工作的呢？好吧，我们可以使用一个非常非常可爱的技巧。让我们用二进制写出我们上面的树：

```
 0001
            0010                    0011
      0100        0101        0110        0111
   1000  1001  1010  1011  1100  1101  1110  1111
                                 ^^^^ 
```

我已经指出了节点 13 的位置。我们的算法以下列方式工作：

1.  找到包含该节点的层。
2.  虽然不在相关节点上：
    1.  如果节点位于其所在层的前半部分，则向左移动并丢弃范围的右半部分。
    2.  如果节点位于其所在层的后半部分，则向右移动并丢弃范围的左半部分。

让我们考虑一下这在二进制中意味着什么。找到包含节点的层**相当于找到数字中设置的最高有效位**。在 13 中，有二进制表示 1101，MSB 是 8 位。这意味着我们处于从 8 开始的层中。

那么我们如何确定我们是在左子树还是右子树呢？好吧，要做到这一点，我们需要看看我们是在这一层的前半部分还是后半部分。现在来看一个可爱的技巧 -**看看 MSB 之后的下一位**。如果该位设置为 0，则我们处于范围的前半部分，否则我们处于范围的后半部分。因此，我们可以通过查看数字的下一位来确定我们在范围的哪一半！这意味着我们可以通过查看数字的下一位来确定要下降到哪个子树。

一旦我们这样做了，我们就可以重复这个过程。我们在下一个级别做什么？好吧，如果下一位是零，我们向左走，如果下一位是一，我们向右走。看看这对 13 意味着什么：

```
 1101
  ^^^
  |||
  ||+--- Go right at the third node.
  ||
  |+---- Go left at the second node.
  |
  +----- Go right at the first node. 
```

换句话说，我们可以通过查看 MSB 之后的数字位来拼出从树根到我们所讨论节点的路径！

这总是有效吗！你打赌！让我们试试数字 7。它具有二进制表示 0111。MSB 在 4 的位置。使用我们的算法，我们会这样做：

```
0111
  ^^
  ||
  |+--- Go right at the second node.
  |
  +---- Go right at the first node. 
```

从我们的原始图片来看，这是正确的道路！

这是该算法的一些粗略的 C/C++ 伪代码：

```
Node* NthNode(Node* root, int n) {
    /* Find the largest power of two no greater than n. */
    int bitIndex = 0;
    while (true) {
        /* See if the next power of two is greater than n. */
        if (1 << (bitIndex + 1) > n) break;
        bitIndex++;
    }

    /* Back off the bit index by one.  We're going to use this to find the
     * path down.
     */
    bitIndex--;

    /* Read off the directions to take from the bits of n. */
    for (; bitIndex >= 0; bitIndex--) {
        int mask = (1 << bitIndex);
        if (n & mask)
            root = root->right;
        else
            root = root->left;
    }
    return root;
} 
```

**我没有测试过这段代码！** 套用 Don Knuth 的话说，我刚刚证明了它在概念上做了正确的事情。我在这里可能有一个错误。

那么这段代码有多快呢？嗯，第一个循环一直运行，直到找到大于 n 的 2 的第一次幂，这需要 O(log n) 时间。循环的下一部分一次通过 n 的位向后计数，在每一步做 O(1) 工作。因此，整个算法总共需要**O(log n) 时间**。

希望这可以帮助！

# html - html5中的下拉菜单

> ID：13846588
> 
> 赞同：2
> 
> 时间：2012-12-12T18:51:31.243
> 
> 标签：html, drop-down-menu, nav

我有以下具有导航的代码，我想向它们添加子菜单/下拉菜单。（比如说从类别中下拉）。我应该如何实施？请帮忙

```
<nav>
    <div class="navbutton"><a href="...">contact us </a></div>
    <!-- <div class="navbutton"><a href="...">forum </a></div>-->
    <div class="navbutton"><a href="#">Categories</a></div>
    <div class="navbutton"><a href="Register.html">Register </a></div>
    <div class="navbutton"><a href="...">About Us </a></div>
    <div class="navbutton"><a href="...">Home Page </a></div>           
</nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:54:25.703

网上有很多关于如何做下拉菜单的教程，但我建议忽略所有这些并找到一个好的客户端库并使用它。重新发明轮子是没有意义的。

尤其如此，因为您仍然会遇到让您羡慕死者的跨浏览器问题。

搜索“RIA 库”、“javascript gui 库”等...

对于初学者来说，这是一个我喜欢的库：http: [//isomorphic.com/](http://isomorphic.com/)

我与他们没有任何关系。

# vb.net - VB.Net 树视图“回滚”

> ID：13846589
> 
> 赞同：0
> 
> 时间：2012-12-12T18:51:33.863
> 
> 标签：vb.net, recursion, treeview

我正在动态填充树视图，所以我不知道我可能拥有的级别数量。

有没有办法回滚到上一个级别？这是我的代码示例：

```
Private Sub RecursiveTreeAssembly(FileName As String, node As TreeNodeCollection)
    'Sets sFileNamePath to correct path value
    FileNameToFilePath(FileName)

    'Start SolidEdge
    StartSolidEdge()

    'Open document
    OpenSolidEdgeDocument(sFileNamePath)

    'Get the parts list for the opened document (FileName)
    partList = clsPartInformation.GetAll()

    'Populate tree View
    If partList.Count > 0 Then
        'PartsList retrieved, close document
        CloseSolidEdgeDocument(FileName)

        'Go through all part lists and display them in tree view
        For i As Integer = 0 To partList.Count - 1
            'Is it Assembly, Parametric, Material, Part to buy
            If IsAssembly(partList(i).Part_No) Then
                node(iterator).Nodes.Add(partList(i).Part_No)
            ElseIf IsMaterial(partList(i).Part_No) Then
                node(iterator).Nodes.Add(partList(i).Part_No)
            ElseIf IsPart(partList(i).Part_No) Then
                node(iterator).Nodes.Add(partList(i).Part_No)
            End If

            tvDessins.ExpandAll()
        Next
    End If

    'Go through tree view to populate it
    While iterator < tvDessins.Nodes(0).Nodes.Count
        If rollback Then
            node = tvDessins.Nodes
            currFileName = node(0).Nodes.Item(iterator).Text
        Else
            currFileName = node(iterator).Nodes.Item(0).Text
        End If

        If IsAssembly(currFileName) Then
            rollback = False
            'Call itself again
            RecursiveTreeAssembly(currFileName, node(0).Nodes)
        Else
            'Rollback nodes
            rollback = True
        End If

        iterator += 1
    End While
End Sub 
```

tvDessin 是我的树视图。在下面的代码中，我将遍历一个树视图，该树视图已经递归地给出了一些项目。我的零件清单包含零件号，效果很好。

在回滚期间，我将树节点设置为开头： node = tvDessins.Nodes

而不是简单地转到父节点......这就是我想要实现的！

谢谢，抱歉发了这么长的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:26:48.930

我想到了。

这是答案：

```
If rollback Then
    currFileName = node.Item(0).Parent.Nodes(iterator).Text 'retrieves parent
Else
    currFileName = node(iterator).Nodes.Item(0).Text
End If 
```

# box2d - 如何使用anengine box2d 打破/剖析精灵？

> ID：13846593
> 
> 赞同：0
> 
> 时间：2012-12-12T18:51:38.603
> 
> 标签：box2d, sprite, andengine

我有一个精灵，它是一根棍子。我的精灵连接到物理 Boxbody(box2d)。我想如果我点击棍子的中间，它应该从中间折断，如果我点击开始，它应该在那一点被折断。

任何建议或链接都​​将是可观的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:38:54.663

我不确切知道如何从段创建多边形的数学，但你需要理解它的方式是你必须破坏你拥有的当前多边形，然后在旧多边形所在的位置创建两个新多边形，这将模拟效果将多边形“折断/切割”成两半。

# javascript - addEventListener 的参数错误

> ID：13846595
> 
> 赞同：0
> 
> 时间：2012-12-12T18:51:43.077
> 
> 标签：javascript, class, parameters, addeventlistener

好的，所以我得到了以下 javaScript 代码。

```
function test(id)
{
alert(id);
}

var elem = document.getElementsByClassName('outsideDiv');

for(var i=0; i < elem.length; i++)
{
elem[i].addEventListener('mouseover', function(){test(i);}, false);
} 
```

这使所有具有该类的 div 鼠标悬停，但该函数始终返回最新的 i 索引。在这种情况下，我有 5 个 div 元素，警报总是 5 没有我悬停的女巫。谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:59:51.837

尝试改用这个：

```
function mouseOverFunc(i) {
    return function () {
        test(i);
    };
}

function test(id) {
    alert(id);
}

var elem = document.getElementsByClassName('outsideDiv');

for(var i=0; i < elem.length; i++) {
    elem[i].addEventListener('mouseover', mouseOverFunc(i), false);
} 
```

仅仅因为您向元素添加事件侦听器并不意味着`i`为每个侦听器保留 的值。您需要创建一个闭包，该闭包将使用`i`.

发生这种情况的原因是绑定到每个侦听器的函数只是一个引用。当事件发生时（鼠标悬停），函数最终被调用，但是 的值是`i`多少？`for`循环很久以前就执行完了，所以 的值是`i`结束值 - `5`。

# xml - rss-feed 在翻板中显示不正确

> ID：13846606
> 
> 赞同：0
> 
> 时间：2012-12-12T18:52:24.720
> 
> 标签：xml, atom-feed, flipboard

# 我在为翻板制作我的 rss-feed 时遇到了一些问题。

有一个俄罗斯网站[vesti.ru的](http://vesti.ru)[RSS-feed](http://www.vesti.ru/vesti.rss)非常丑陋。它具有 cp-1251 编码，一个帖子的许多外壳等等 - beee。

但是这个网站提供了非常有趣的新闻提要，所以我决定重新解析它的 rss-feed 以使其对翻板友好。我用过 PyAtom。我的应用程序现在在 heroku 上运行。Rss-feed 位于[此处](http://flipboardfriendly.herokuapp.com/vesti_ru)

## 我的问题是什么：

我也可以通过谷歌阅读器的提要在谷歌阅读器和翻板中阅读[我的提要。](http://flipboardfriendly.herokuapp.com/vesti_ru)但是我不能在原生翻板中获取我的提要项目，而不是使用谷歌阅读器。

Flipboard 总是对我说：**“没有项目”**（但正确显示提要标题）

我认为这是某种 Heroku 限制，并尝试从我的[Dropbox 公共页面](https://dl.dropbox.com/u/60606921/zrss.xml)将我的提要加载到 Flipboard 中，但又失败了。

请帮我弄清楚为什么 Flipboard 拒绝显示我的提要并总是说**“没有项目”**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:55:12.520

您不能只使用您的阅读器帐户并在flipboard中打开提要，然后按`+`图标，现在可以将提要直接发送到您的flipboard帐户吗？

# java - 当我运行项目时，我的应用程序未在模拟器上显示

> ID：13846608
> 
> 赞同：1
> 
> 时间：2012-12-12T18:52:28.527
> 
> 标签：java, android, android-emulator

当我尝试运行它在模拟器上成功安装的项目时，但模拟器没有在其应用程序菜单中显示我的应用程序启动器图标。但是它在设置>应用程序>管理应用程序>所有应用程序中的已安装应用程序中显示了我的应用程序，这意味着已安装了一个应用程序。但它没有运行。

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.thenewboston.travis"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.thenewboston.travis.SPLASH" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.thenewboston.travis.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.thenewboston.travis.MENU" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    </application>

     </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:58:18.290

确保您的启动活动在清单中正确声明了其意图过滤器，以便在启动器中显示。

假设您希望“Splash”成为您的主要活动，请将其声明更改为此（特别是意图过滤器操作）

```
 <activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
 </activity> 
```

您的意图过滤器操作不是 android 默认值的一部分（以及启动器通常寻找的内容）。只有旨在寻找“com.thenewboston.travis.SPLASH”动作的启动器才能看到您的活动

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T18:54:49.663

```
 <activity
    android:name=".Splash"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="com.thenewboston.travis.SPLASH" /> //try "android.intent.action.MAIN" here//
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

# c++ - 文件 IO 从文件中读取多种类型

> ID：13846614
> 
> 赞同：1
> 
> 时间：2012-12-12T18:52:38.677
> 
> 标签：c++, parsing, file-io, io

假设我有一个像这样的文本文件

```
6 3
john
dan
lammar 
```

我可以读取数字，并且只有在单独的文件中才能读取名称。但是这里的数字和名称都在一个文件中。我如何忽略第一行并直接从第二行开始阅读？

```
int main()
{
vector<string> names;
fstream myFile;
string line;
int x,y;
myFile.open("test.txt");
    //Im using this for reading the numbers
while(myFile>>x>>y){}
//Would use this for name reading if it was just names in the file
while(getline(myFile,line))
    names.push_back(line);
cout<<names[0];
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:01:38.740

我不确定我是否正确，但如果你总是想跳过第一行 - 你可以简单地跳过它吗？

```
int main()
{
    vector<string> names;
    fstream myFile;
    string line;
    int x,y;
    myFile.open("test.txt");
    //skip the first line
    myFile>>x>>y;
    //Would use this for name reading if it was just names in the file
    while(getline(myFile,line))
    names.push_back(line);
    cout<<names[0];
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:01:19.363

如果您使用 fstream，只需调用 ignore() 方法：

```
istream&  ignore ( streamsize n = 1, int delim = EOF ); 
```

所以它变得非常容易：

```
ifstream file(filename);
file.ignore(numeric_limits<streamsize>::max(), '\n');    // ignore the first line

// read the second line
string name; getline(flie, name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:09:32.807

尝试这样的事情：

```
int main()
{
    std::vector<std::string> names;
    std::fstream myFile;
    myFile.open("test.txt");
    if( myFile.is_open() )
    {
        std::string line;

        if (std::getline(myFile, line))
        {
            std::istringstream strm(line);

            int x, y;
            strm >> x >> y;

            while (std::getline(myFile, line))
                names.push_back(line);
        }

        myFile.close();

        if( !names.empty() )
            std::cout << names[0];
    }
    return 0;
} 
```

# asp.net - 在按钮事件中的 datalist 中找到控件

> ID：13846619
> 
> 赞同：0
> 
> 时间：2012-12-12T18:53:05.603
> 
> 标签：asp.net, datalist

我将数据列表作为问题的标签，将文本区域作为答案，因为数据列表在标签上呈现问题，并且用户将在文本区域中添加答案作为插入数据库中的答案。我做了我的代码，但是当我添加我的代码以查找控件（标签、文本区域）时，尽管我为问题添加了答案，但它们返回了 null 值。

```
protected void BT_submit_Click(object sender, ImageClickEventArgs e)
{

    Label QID = (Label)Dl_Question.FindControl("lbl_QID");
    HtmlTextArea QAnswer = (HtmlTextArea)Dl_Question.FindControl("Txt_Answer");
} 
```

数据列表代码：

```
<asp:DataList ID="Dl_Question" runat="server" onitemdatabound="Dl_Question_ItemDataBound"                                                                          onitemcommand="Dl_Question_ItemCommand">
   <ItemTemplate>
      <asp:Label ID="lbl_QID" runat="server" Text='<%# Eval("ID") %>' Visible="false">
      </asp:Label><br />
      <asp:Label ID="Lbl_Question" runat="server" Text='<%# Eval("Question") %>'></asp:Label>  <br />
      <textarea id="Txt_Answer" cols="80" rows="5" runat="server"></textarea>
   </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:02:10.520

我会假设你正在寻找比你想象的更高的水平。你可能需要这样的东西：

```
Label QID = Dl_Question.**Items[n]**.FindControl("lbl_QID") as Label; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:13:47.043

如果您不想费心指定控制继承人 achy 使用[递归算法](http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html)。

# javascript - 如何让脚本最后加载到网页上？

> ID：13846621
> 
> 赞同：10
> 
> 时间：2012-12-12T18:53:13.933
> 
> 标签：javascript, html, rss, load

我有一个网页，上面主要是基本的 HTML。有一个部分我使用从外部源 (url) 提取的 JavaScript 加载 RSS 提要。问题是我的页面将加载所有内容，直到该脚本，等待脚本加载（有时长达几秒钟），然后加载页面的其余部分。

在它首先呈现整个页面后，如何强制它加载脚本？

我的代码是这样的：

```
<html>
<more html>
<script language="JavaScript" src="http://..." type="text/javascript"></script>
<more html>
... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T18:54:29.733

两种选择：

1.  将您的脚本块放在页面的末尾。无论如何，这是一种很好的做法，因为您的页面结构将在用于操作它的脚本之前加载。因为用户通常会注意到页面加载而不是脚本，所以总体上看起来加载速度更快。
2.  在开始标记中包含`defer`属性。`script`请注意，`defer`只能在*外部*脚本文件（具有`src`属性的文件）上使用。请参阅[https://developer.mozilla.org/en-US/docs/HTML/Element/script](https://developer.mozilla.org/en-US/docs/HTML/Element/script)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-21T05:23:57.833

将`defer`属性添加到头部的脚本标签也可以

```
<script language="JavaScript" src="http://..." type="text/javascript" defer></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T18:43:09.400

在页面加载后加载脚本的一种非常可靠的方法是将脚本包含在 javascript 中。

```
var theScript = document.createElement("script");
theScript.setAttribute("type","text/javascript");
theScript.setAttribute("src","//www.mysite.com/script.js");
document.getElementsByTagName("head")[0].appendChild(theScript); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-20T19:12:32.283

您可以尝试包装调用提要的函数

```
jQuery(window).load(function(){
//embed RSS feed 
}); 
```

强制它最后加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T18:54:39.837

将您的脚本标签移动到末尾，它将在其他所有内容之后加载。例如：

```
<html>
  <more html>
  <more html>
  <script language="JavaScript" src="http://..." type="text/javascript"></script>
</html 
```

# css - 调整大小不再 100% 的标题

> ID：13846622
> 
> 赞同：0
> 
> 时间：2012-12-12T18:53:17.713
> 
> 标签：css, header, resize, scroll

我得到的是这段 CSS 代码：

```
#menu_top{
margin: 0;
position:fixed;
background: #4d4d4d;
width: 100%;
height: 90px;
border-bottom: 1px solid #000;
} 
```

这对于javascript：

```
$(window).scroll(function(){
    $('#menu_top').css('left',-$(window).scrollLeft());
}); 
```

但是当我将窗口调整为非常小的尺寸时，标题不再是宽度的 100%。向右滚动时，它并没有完全填满所有内容。

那么，即使在调整大小时，我如何才能完成 100% 的完整窗口填充呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:24:51.990

您必须给出`#menu_top`最`min-width`宽的元素。

[http://jsfiddle.net/XhRaB/](http://jsfiddle.net/XhRaB/)

# hibernate - 在 tomcat 中通过 web 监控泄露的 jdbc hibernate 连接

> ID：13846640
> 
> 赞同：1
> 
> 时间：2012-12-12T18:54:21.050
> 
> 标签：hibernate, tomcat, jdbc, resource-leak

我记得大约 5 年前我正在做一个有一些 url 之类的项目

[http://myhost.com/connections](http://myhost.com/connections)

这显示了打开连接的堆栈跟踪，所以我可以很容易地找出泄漏。我现在如何在使用休眠的 tomcat 应用程序中设置这样的 url？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:15:22.673

如果你使用 DBCP ，你可以看看[这个项目。](https://github.com/nicolas-raoul/Commons-DBCP-monitoring)它不提供堆栈跟踪，但您始终可以通过`Thread.getAllStackTraces()`并过滤状态、名称等来获取它们。

# html - （Chrome 的）HTML5 画布可以显示 Adob e Typekit 字体吗？

> ID：13846643
> 
> 赞同：2
> 
> 时间：2012-12-12T18:54:28.853
> 
> 标签：html, google-chrome, canvas, fonts, typekit

我有一个可以正确显示 Verdana 的画布，只要我不指定粗体（在这种情况下它默认为 Times。我想在画布上使用 Typekit 字体，但它似乎没有注册：我加载了 400 和 700 的权重，例如通过“正常 12px “proxima-nova””，但到目前为止，它似乎总是默认为 Times。

如何让 HTML5 画布（至少在 Chrome 中）正确显示 Typekit 字体？我想要正常和粗体的重量；我需要 500 和 900 的重量，还是应该在 400 和 700 上做一些事情？

TIA,

# python - 为 Google 群组配置 API 以添加成员

> ID：13846645
> 
> 赞同：0
> 
> 时间：2012-12-12T18:54:29.620
> 
> 标签：python, google-app-engine, google-api, google-apps, google-provisioning-api

好的，我已经注册了 Google Apps Business，我已经在设置中启用了配置。我创建了一个名为“test”的组。我已将我的电子邮件添加为组“myEmail@gmail.com”以及“admin@myTestDomain.mygbiz.com”的所有者。

这是我在 Python 中使用 Aptana studio 编写的代码：

```
import gdata.apps.groups.client

groupClient = gdata.apps.groups.client.GroupsProvisioningClient(domain='myTestDomain.mygbiz.com')
groupClient.ClientLogin(email='admin@myTestDomain.mygbiz.com', password='myPassword', source='apps')
groupClient.AddMemberToGroup('test', 'emailToAdd@gmail.com') 
```

我试图以许多不同的方式做到这一点，但没有成功。有人有什么想法吗？您的帮助将不胜感激。

截图：![谷歌设置](../Images/c8a3e9369d243ad3748879a070d65b96.png) ![谷歌设置](../Images/1a1755ba40897baf02d3eb0e1fafb3d0.png) ![我在 Aptana 中的代码](../Images/dd5bb2b04728792b2f12cff83759c93a.png)

**编辑 1**：我应该注意，我还使用 mygbiz 域上的实际电子邮件作为该组的所有者，但没有成功。

**编辑2**：我还在我的设置中将我的谷歌群组启用为“公开”，并允许所有者添加来自域外的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:47:30.770

愚蠢的错误。我忘记在我的“站点包”文件夹中包含 gdata。现在可以了。

# c++ - 删除 C 上的非泛型模板参数

> ID：13846654
> 
> 赞同：5
> 
> 时间：2012-12-12T18:54:53.807
> 
> 标签：c++, templates, typedef, boost-ublas

我正在使用 ublas 作为我的矩阵代码，但我希望它是可交换的，所以我这样做了：

```
typedef boost::numeric::ublas::matrix<double> cMatrix; 
```

今天，我需要将其中一些矩阵更改为有界大小，所以我也会有这个：

```
typedef boost::numeric::ublas::bounded_matrix<double, 3, 3> Matrix3d; 
```

问题是我的旧函数声明：

```
void cClass::function(int param1,
                      int param2,
                      cMatrix &param3,
                      int param4); 
```

不再工作。它给了我：

```
error : a reference of type "cMatrix &" (not const-qualified) cannot be initialized with a value of type "Matrix3d" 
```

我设法通过将声明更改为：

```
template <class A>
void cClass::function(int param1,
                      int param2,
                      boost::numeric::ublas::matrix<double, boost::numeric::ublas::row_major, A> &param3,
                      int param4); 
```

问题是我的定义是一个 cpp 文件，所以我必须在 cpp 中做这样的事情：

```
void dummyFunc()
{
  cClass dummy(NULL, NULL);
  cMatrix c;
  Matrix12d d12;
  dummy.function(-1, -1, c, -1);
  dummy.function(-1, -1, d12, -1);
} 
```

有什么方法可以避免执行 dummyFunc 或以其他方式概括该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T10:45:12.070

我建议对 Thibaut 的（正确）答案进行改进：

```
template<class UblasMatrix, typename /*Dummy*/ = UblasMatrix::array_type>
void cClass::function(int param1,
                      int param2,
                      UblasMatrix &param3,
                      int param4); 
```

多亏了 SFINAE，第二个模板参数只是（几乎）确定您正在使用某种 ublas 矩阵而不是其他东西（比如，假设`std::vector<doubel>`）调用该函数。这避免了令人困惑的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:16:50.503

如果两者都`matrix`具有`bounded_matrix`完全相同的 API，则可以抽象类型并`cClass::function`使用可变参数模板进行泛化：

```
template<template <class...> class M, class... Arg>
void cClass::function(int param1,
                      int param2,
                      M<Arg...> &param3,
                      int param4); 
```

# jquery - 关闭 Fancybox 2 窗口并重定向父窗口

> ID：13846660
> 
> 赞同：0
> 
> 时间：2012-12-12T18:55:12.930
> 
> 标签：jquery, fancybox

我有一个 Fancybox 2 iframe 模式窗口，其中包含一个“添加到购物车”表单。提交表单后，将在 Fancybox 模式窗口中加载成功/确认页面。

我想在这个成功/确认页面上运行一个脚本，关闭 Fancybox 窗口并将父窗口重定向到这个 URL：'/shop/basket' 我该怎么做？

这是我目前得到的代码（它只是关闭了 Fancybox 窗口，但不执行父窗口重定向）：

```
<script type="text/javascript">
  $(function() { parent.$.fancybox.close(); });
</script> 
```

编辑：

这就是我在 functions.js 文件中初始化 Fancybox 的方式：

```
$(".add-to-cart-popup").fancybox({
    width       : 580,
    height      : 744,
    closeClick  : false,
    scrolling   : 'auto'
}); 
```

编辑2：

这段代码做我正在寻找的 - 但任何人都可以想到任何更好的方法吗？这只是我一起破解的东西：

```
<script type="text/javascript">
  $(function() { parent.$.fancybox.close(); });
  window.parent.location.href = '/shop/basket';
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T03:41:35.197

不要尝试从子页面进行重定向，而是从父页面本身进行重定向。

如果您的父页面 (functions.js) 中有此代码：

```
$(".add-to-cart-popup").fancybox({
    width       : 580,
    height      : 744,
    closeClick  : false,
    scrolling   : 'auto'
}); 
```

然后只需将`afterClose`回调添加到它;

```
$(".add-to-cart-popup").fancybox({
    width       : 580,
    height      : 744,
    closeClick  : false,
    scrolling   : 'auto',
    afterClose  : function() {
       location.href = "/shop/basket";
    }
}); 
```

...您仍然需要`parent.$.fancybox.close();`从子页面执行

# jquery - 你如何对 JQuery 排序执行重置

> ID：13846662
> 
> 赞同：11
> 
> 时间：2012-12-12T18:55:15.667
> 
> 标签：jquery, jquery-ui-sortable

我正在使用 JQuery 可排序。我想知道是否有可能在多次求助后将可排序控件恢复到类似于表单重置的原始状态。“取消”选项似乎只影响最后一次排序尝试，而不是全部。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T14:59:14.260

我个人喜欢这样做：

```
$("#sortable").sortable({config...});
var cache = $("#sortable").html(); 
```

重置时

```
$("#sortable").html(cache).sortable("refresh"); 
```

我尝试使用 .clone() 和 .children() 甚至 $("#sortable > *)，但发现缓存 .html() 是最好的选择。

在我的情况下，我有两个连接列表。一个包含用户可以排序或删除的当前项目，另一个包含用户可以从中抓取以添加到“当前项目”列表的可用项目列表。我需要一种将所有内容重置为原始状态的方法。上面的效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-12T10:01:09.457

这是简单的方法

```
$( "#sortable" ).sortable( "cancel" ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T18:58:54.177

存储对原始元素顺序的引用，然后使用它重新排序它们。

```
var sortableElements = $("#sortable div");
$("#sortable").sortable(); 
```

现在，当您想要恢复原始排序顺序时，只需将 div 附加到 #sortable 元素即可。

```
$("#sortable").append(sortableElements); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T18:59:27.650

您可以在准备好的文档上缓存父级的副本，并在重置时将其恢复。

例如，如果`<ul class="parent">`是您的可排序元素：

```
var sortableCache;
$(document).ready(function() {
    ...
    $('ul.parent').sortable({ ... });
    ...
    sortableCache = $('ul.parent').clone(true);
}); 
```

重置时，您可以执行以下操作：

```
$('ul.parent').replaceWith(sortableCache); 
```

# node.js - RESTFUL EJS 模板服务的实现方法？

> ID：13846665
> 
> 赞同：0
> 
> 时间：2012-12-12T18:55:35.793
> 
> 标签：node.js, rest, ejs

想象一个已经拥有完整电子商务目录和采购等后台的服务，它带有一个 RESTFUL API，开发人员可以使用该 API 远程连接以从中创建电子商务网站。我已经建立了这个。我希望的是在此之上实现 RESTFUL EJS 服务的一些建议，这将允许开发人员通过 http 资源 URL 和典型的目录查询在同一个调用中指定 EJS 模板文件，例如：

```
http://mywebsite.ecommerceapi.com/catalogid/products?query=sunglasses&ejs=httpurl 
```

然后，生成的服务将返回呈现的 EJS 模板（对查询和 EJS 模板使用缓存等）。这将主要用于 SEO 目的，并允许开发人员在模板方面创建与服务器端相同的解决方案客户端，因此它简化了客户端和服务器端模板如何完成的开发，而不管用于设置网站的技术。

你的建议？我也对你说“这是一个坏主意”没有意见，但请给出理由。

# android - GC 顺序（如何工作）

> ID：13846666
> 
> 赞同：0
> 
> 时间：2012-12-12T18:55:44.763
> 
> 标签：android

在这种情况下，垃圾收集收集引用的顺序是什么：

Activity -> Button -> onClickListener 的匿名类。

当 onClickListener 持有对包装类（Activity）的引用时，所有这些都是垃圾收集的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:08:52.050

如果您从未在 Activity 之外传递您的 Button 或侦听器，那么这根本不会影响 GC 过程。当 Activity 不再在任何地方引用时，它们都会被垃圾收集。

# java - ArrayList 与 char[]。这对于构建大字符串最有效

> ID：13846667
> 
> 赞同：0
> 
> 时间：2012-12-12T18:55:52.087
> 
> 标签：java, performance, parsing, arraylist, character-arrays

我正在逐字节读取数据。当我确定我有完整的消息时，我需要将它作为字符串传递给另一个函数。有些消息可能非常大，但大小经常变化。大家觉得哪种实现最有效：

```
public test class
{
   char[] buffer = new char[MAX_SIZE_7200];
   int bufferIndex = 0;
   void parseData(ArrayList<Byte> msg, length)
   {
       while (!msg.isEmpty())
       {
          buffer[bufferIndex++] = (char) msg.remove(0);
          if (isfullmessage)
          {
             parseData(new String(buffer, 0, bufferIndex);
             bufferIndex = 0;  //restart and continue parsing data
          }
       }
   }
 } 
```

或者：

```
public test class
{
   List<Character> buffer = new ArrayList<Character>();
   int bufferIndex = 0;
   void parseData(ArrayList<Byte> msg, length)
   {
       while (!msg.isEmpty())
       {
          buffer.add((char) msg.remove(0));
          if (isfullmessage)
          {
              StringBuilder builder = new StringBuilder(buffer.size());
              for (Character ch: buffer)
              {
                  builder.append(ch);
              }
              parseData(builder.toString());
              buffer.clear();
          }
       }
   }
 } 
```

或者：

```
public test class
    {
       StringBuilder buffer = new StringBuilder();
       int bufferIndex = 0;
       void parseData(ArrayList<Byte> msg, length)
       {
           while (!msg.isEmpty())
           {
              buffer.append((char) msg.remove(0));
              if (isfullmessage)
              {                  
                  parseData(builder.toString());
                  buffer.clear();  //some stringbuilder clear function
              }
           }
       }
     } 
```

还是有更有效的方法。请注意，我的变量在函数范围之外保存了我完成的消息，因为我可能会处理不包含完整消息的数据，并且可能需要多次执行函数来获取完整消息并对其进行处理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T18:58:53.563

使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)。它支持一次添加一个字符，根据需要扩展容量，并且可以重置以进行重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:00:27.680

我认为这取决于您的消息的平均长度。对于更“完整”的消息，char 将是更好的选择，因为它的元素类型

对于稀疏的情况，列表模板会更好，因为内存消耗会更低，尽管有对象表示的开销

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:05:26.227

您通过在循环中删除此 ArrayList 的第一个元素来迭代 ArrayList msg 的元素。ArrayList 将其所有元素存储在一个数组中。删除第一个元素很慢，因为需要复制数组中的所有元素（第一个元素除外）。

因此，最大的开销可能不是在数组中设置字符或将字符附加到 StringBuilder，但最大的开销可能是对 msg.remove(0) 的重复调用。

您可以使用以下方法解决此问题：

```
int index = 0;
while (index < msg.length()) {
    buffer[bufferIndex++] = (char) msg.get(index);
    index++;
    // etc.
} 
```

# .net - RsiOPCAuto.dll...在哪里可以找到？

> ID：13846670
> 
> 赞同：1
> 
> 时间：2012-12-12T18:56:06.403
> 
> 标签：.net, integration, dde

我需要与工厂机械进行交互，在我们的每个工厂，我们都使用 RSLinx 与该机械进行通信。根据[这篇博](http://industrial-software.blogspot.com/2009/11/rockwell-opc-automation-with-visual.html?showComment=1355333939007#c5033188581763197471)文，从 RSLinx 读取数据相对容易：

```
 Dim OpcServer As New RsiOPCAuto.OPCServer
    Dim OpcGroup As RsiOPCAuto.OPCGroup
    Dim OpcItem As RsiOPCAuto.OPCItem
    Dim vItem As String = ""

    Try
        OpcServer.Connect("RSLinx Remote OPC Server", "192.168.195.128")

        ' Add this group to the shared topic
        OpcGroup = OpcServer.OPCGroups.Add("INDEC")
        OpcGroup.IsSubscribed = False
        OpcGroup.IsActive = False
        OpcGroup.UpdateRate = 250

        OpcGroup.OPCItems.DefaultAccessPath = "OPC_Test"
        OpcGroup.OPCItems.AddItem("OPC_Bit001", 1)
        OpcItem = OpcGroup.OPCItems.Item(1)

        OpcItem.Read(2, vItem)

        OpcItem = Nothing
        OpcServer.OPCGroups.RemoveAll()
        OpcGroup = Nothing
        OpcServer.Disconnect()
        OpcServer = Nothing

        'Add and Error the list box
    Catch ex As PlatformNotSupportedException
        MsgBox("Error In Get Plc Data: " & ex.Message)
    End Try

    MsgBox(vItem) 
```

但是...它说我需要添加对 RsiOPCAuto.dll 的引用，但我不知道：

1.  在哪里可以找到它
2.  它所能做的一切
3.  关于许可的任何事情

不过，具体来说，我很好奇是否有人知道我在哪里可以找到该 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T00:09:33.883

此文件 RsiOpcAuto.dll 位于 c/programfiles/commonfiles/Rockwell，只要您拥有 rslinx oem 或专业（网关）版本 2.54 或更低版本。

# iphone - 如果已安装，则打开 iphone 应用程序的 URL，如果未安装，则打开 iTunes？

> ID：13846673
> 
> 赞同：2
> 
> 时间：2012-12-12T18:56:26.950
> 
> 标签：iphone, installation, itunes-app

我想在我的网站上发布一个 URL，单击该 URL 时会打开我的 iphone 应用程序（如果它已安装在手机上），或者如果尚未安装该应用程序，则使用我的应用程序打开 iTunes，允许安装它。

这似乎是一种基本的事情，可以通过魔术公式 URL 快速完成，但我似乎无法在任何地方找到相关文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:21:52.387

这正是 iOS 6 中智能应用横幅的用途：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

“如果应用程序已经安装在用户的设备上，横幅会智能地改变它的动作，点击横幅会简单地打开应用程序。如果用户的设备上没有你的应用程序，点击横幅会带他到该应用程序在 App Store 中的条目。”

# ruby-on-rails - 如何链接到不同的文章 ruby on rails

> ID：13846675
> 
> 赞同：0
> 
> 时间：2012-12-12T18:56:32.830
> 
> 标签：ruby-on-rails

我有一个滑块，其中包含用户可以浏览的几篇文章

现在我有

html

```
 <%= link_to 'read more', @article %> 
```

控制器

```
 class StaticPagesController < ApplicationController
 def home
    @user = current_user
    @article = Article.find(1)
 end

 def comics
 end
 end 
```

这链接到第一篇文章，因为它说 find(1) 但我不太确定如何在我的控制器中编写它，以便我可以使用相同的 <%= link_to 'read more', @article %> 它将链接到我想要的文章。

我希望能够将该链接添加到我的每个滑块并将其定向到正确的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:19:43.963

我认为您应该坚持使用 Rails 约定，而不是*StaticPagesController将**ArticlesController*之类的东西作为资源（请参阅[Resource Routing: the Rails Default](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)）。通过此设置，您可以按如下方式使用 url 助手：

```
<%= link_to "Read more", article_path(@article) %> 
```

@article是您要为其生成 url 的当前文章*。*这将使用 params[:id] 中的文章 ID 路由到 ArticleController 的 show 操作。

# perl - Perl 中的 //= 是什么？

> ID：13846676
> 
> 赞同：33
> 
> 时间：2012-12-12T18:56:36.733
> 
> 标签：perl

我找到了我需要的一些 Perl 代码的示例，但其中有一些我不认识的东西。

```
my $i //= '08'; 
```

我在任何地方都找不到任何参考！它似乎与以下内容相同：

```
my $i = '08'; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-12T19:00:17.000

`//=`运算符是or ['logical defined-or'](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)运算符的[赋值运算符](http://perldoc.perl.org/perlop.html#Assignment-Operators)版本。`//`

在`my`变量声明的上下文中，变量最初是未定义的，因此它*等同*于赋值（最好写成`my $i = '08';`）。不过，总的来说，

```
$i //= '08'; 
```

是以下的简写：

```
$i = (defined $i) ? $i : '08'; 
```

它记录在 Perl 运算符 ( `perldoc perlop`) 中的两个地方（简而言之，在赋值运算符部分下，完整的在“逻辑定义或”部分）。它是在 Perl 5.10.0 中添加的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T19:05:20.730

简短的回答：它与`my $i = '08';`.

* * *

首先，我们来看看`$i //= '08';`

```
EXPR1 //= EXPR2; 
```

是相同的

```
EXPR1 = EXPR1 // EXPR2; 
```

除了 EXPR1 只计算一次。这是一种方便的书写方式

```
EXPR1 = EXPR2 if !defined(EXPR1); 
```

有关 Perl 运算符的文档，请参阅[perlop](http://perldoc.perl.org/perlop.html)。

* * *

回到`my $i //= '08';`。这意味着

```
my $i;
$i = '08' if !defined($i); 
```

但`$i`将始终未定义。写会好很多

```
my $i = '08'; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T19:01:52.777

它是“定义或”运算符。

```
$i //= '08'; 
```

相当于：

```
$i = defined($i)? $i: '08'; 
```

它是在 Perl 5.10.0 中引入的，旧版本不支持。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-12T19:03:45.680

`$i //= '08'`是一样的`$i = defined($i) ? $i : '08'`。它与 几乎相同`$i ||= '08'`，翻译为`$i = $i ? $i : '08'`。现在，当您使用 声明变量时`my`，它被设置为`undef`. 因此，它将始终跟随`08`分支。另外，如果您想知道，该`//`运算符出现在 Perl v5.10 中；所以它会在旧的 Perls 上产生一个编译错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-12T19:01:31.280

它几乎与 相同`||`，只是它检查是否`$i`已定义，而不仅仅是 true。

# c# - 在 Silverlight 中序列化散列

> ID：13846678
> 
> 赞同：1
> 
> 时间：2012-12-12T18:56:41.473
> 
> 标签：c#, serialization, hashcode

我有一个 Silverlight 应用程序。这个应用程序回调一个网络服务（我已经写过）来获取客户列表。我正在尝试生成一个代表客户列表的哈希码。为了做到这一点，我在我的 Silverlight 应用程序和服务器端代码中编写了以下代码：

```
public static string GetHashCode<T>(T data)
{
  SHA256Managed crypto = new SHA256Managed();
  try
  {
    // Serialize the object
    byte[] serializedBytes;
    using (var memoryStream = new MemoryStream())
    {
      var serializer = new DataContractSerializer(typeof(T));
      serializer.WriteObject(memoryStream, data);
      memoryStream.Seek(0, SeekOrigin.Begin);
      serializedBytes = memoryStream.ToArray();
    }

    byte[] hashed = crypto.ComputeHash(serializedBytes);

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < hashed.Length; i++)
      sb.Append(hashed[i].ToString("X2"));
    return sb.ToString();
  }
  catch (Exception)
  {
    return string.Empty;
  }
} 
```

我在服务器端的方法如下所示：

```
[OperationContract]
public List<Customer> GetCustomers() 
{
  List<Customer> customers = Customer.GetAll();
  string hash = GetHashCode<List<Customer>>(customers);
  return customers;
} 
```

在客户端，在我的 Silverlight 应用程序中，我的 GetCustomersCompleted 事件处理程序中有以下内容：

```
string hash = GetHashCode<List<Customer>>(e.Result.ToList()); 
```

请注意，我首先将事件处理程序 Result 转换为列表。原因是因为Result实际上是一个ObservableCollection。我提出这个是因为我相信这就是我的问题所在。

我的问题是，即使数据相同，我的哈希值在服务器端和客户端也是不同的。这是基于我在监视窗口中看到的。我感觉它与结果从我的服务器传递到我的应用程序时发生的序列化有关。但是，我不确定如何解决这个问题。我需要数据的哈希值，但我不知道如何让它们对齐。感谢您提供任何帮助。

# jquery - 使用 Typescript 和 jQuery 时出现“Microsoft JScript 运行时错误：'$' 未定义”

> ID：13846683
> 
> 赞同：5
> 
> 时间：2012-12-12T18:57:11.850
> 
> 标签：jquery, typescript

我在尝试使用 Typescript 的简单 jQuery 示例时遇到此错误：

“tsc.js(23915, 17) Microsoft JScript 运行时错误：'$' 未定义”

我的整个 .ts 文件：

```
/// <reference path="scripts/jquery-1.8.d.ts" />

$(document).ready(function () {}); 
```

jquery-1.8.d.ts 来自DefinitelyTyped，但如果我使用标准jquery.d.ts，我会得到同样的错误。我在参考标签上没有收到任何错误，它是正确的并且正在查找 .d.ts 文件。

我显然在这里遗漏了一些基本的东西，我不知道为什么会出现这个错误。我已经安装了 VS 2012 扩展并且在 jQuery 上获得了完全的自动完成功能......所以当我输入“$”时，我确实得到了自动完成弹出窗口。生成的 .js 文件是正确的，没有错。一个更复杂的 .ts 文件正在正确编译，输出 .js 文件非常好，所以我想这比错误更令人烦恼。或者我是否因为这个运行时错误而错过了其他错误？

我通过在 VS 中添加一个“外部工具”来编译，命令：C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.1.1\tsc.exe arguments: -e "$(ItemPath)" --sourcemap

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:39:56.973

我相信问题出在您正在使用的命令本身，或者至少是您传入的选项之一。“-e”告诉编译器“在编译后执行脚本”。因此，您看到的“Microsoft JScript 运行时错误：'$' 未定义”不是编译错误，而是文件编译后出现并正在执行的运行时错误。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:02:41.993

您需要在 HTML 文件中包含真正的 jquery.js，例如：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="myApp.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:54:36.570

- 删除了我原来的答案..

你到底从哪里得到错误：“tsc.js(23915, 17) Microsoft JScript runtime error: '$' is undefined”？

本主题中还有一个很好的大纲，介绍了如何让编译器在构建时编译您的 .ts 文件：http: [//typescript.codeplex.com/discussions/403394](http://typescript.codeplex.com/discussions/403394) 之后，您可以保持 .ts 文件的构建操作“打字稿编译”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-12T02:09:51.623

不知道我们不应该重复答案...我对旧答案进行了一些更改。好的，我的解决方案是：

我正在使用 VS 2015，而且我是 typescript 的新手。我在我的项目中使用了 jQuery 和传单。

1.  从 VS 2015 中的 NuGet 管理器下载所有这些库。 [![在此处输入图像描述](../Images/037620ced41f14bbda0fc6d486ae4241.png)](https://i.stack.imgur.com/GldXb.png)

2.  按照本教程中的说明拖动库文件 (.js)：

[https://taco.visualstudio.com/en-us/docs/get-started-first-mobile-app/](https://taco.visualstudio.com/en-us/docs/get-started-first-mobile-app/)

3.  通过添加这些行来修改 index.html 文件。

    ```
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="css/leaflet.css" />

    <script src="scripts/jquery-2.2.3.min.js"></script>
    <script src="scripts/jquery.mobile-1.4.5.min.js"></script>
    <script src="scripts/leaflet-0.7.3.min.js"></script> 
    ```

4.  修改 index.ts 文件。首先将这些行添加到顶部以引用您的库。您可能需要更改路径。

```
/// <reference path="jquery.d.ts"/>
/// <reference path="leaflet.d.ts"/> 
```

5.  在 onDeviceReady() 中添加您自己的代码，否则您可能会收到 javascript 运行时错误，例如 sysmbol "$" 未定义。我猜这是因为代码尝试在设备尚未准备好时加载某些功能。这对我有用。希望它也能帮助你。

    ```
     function onDeviceReady() {

        document.addEventListener('pause', onPause, false);
        document.addEventListener('resume', onResume, false);

        var parentElement = document.getElementById('deviceready');
        var listeningElement = parentElement.querySelector('.listening');
        var receivedElement = parentElement.querySelector('.received');
        listeningElement.setAttribute('style', 'display:none;');
        receivedElement.setAttribute('style', 'display:block;');

        // your code goes in here

        } 
    ```

# mysql - 自动将mysql自动增量设置为最小值

> ID：13846684
> 
> 赞同：3
> 
> 时间：2012-12-12T18:57:12.660
> 
> 标签：mysql, reset, auto-increment

我只是想知道，是否有一种优雅的方法可以根据当前内容自动将 mysql 表的自动增量重置为最低值。

例子：

表：

```
1  content of row 1
2  content of row 2
3  content of row 3
4  content of row 4
5  content of row 5 
```

现在自动增量将是 6

但在我插入新内容之前，我删除了第 3,4 和 5 行。内容如下所示：

```
1  content of row 1
2  content of row 2 
```

自动增量仍为 6。

这就是问题所在。

我希望自动增量为 3，因为根据插入的 ID，它是可能的最低值。

如果自动增量会“无限”增长并超出 12 位长整数的范围，这将阻止非常大的数字。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T19:06:43.713

这取决于您的存储引擎，

对于 MySQL 5.6+ 上的 MyISAM 和 InnoDB，您可以将`AUTO_INCREMENT`表的值设置为`1`. 该值将自动增加到最大当前值 + 1。这样做。

```
ALTER TABLE table_name AUTO_INCREMENT = 1; 
```

对于 MySQL < 5.6 上的 InnoDB，这将不起作用，您需要像这样手动执行此操作：

```
SELECT MAX(autoincrement_field) + 1 FROM table_name INTO @maxautoinc;
ALTER TABLE table_name AUTO_INCREMENT = @maxautoinc; 
```

请注意，在最后一种情况下，两个查询需要使用相同的数据库连接运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T20:48:13.687

重置自动增量 ID。

[http://community.spiceworks.com/scripts/show/3042-reset-auto-increment-ids](http://community.spiceworks.com/scripts/show/3042-reset-auto-increment-ids)

根据数据库中的当前值，将数据库中的所有自动增量列更新为可能的最小值。我们需要在清理数据库后执行此操作。

在存储过程中使用准备好的语句：

```
drop PROCEDURE if exists reset_autoincrement;
DELIMITER //
CREATE PROCEDURE reset_autoincrement (IN schemaName varchar(255))
 BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE o_name VARCHAR(255);
    DECLARE o_table VARCHAR(255);
    DECLARE cur1 CURSOR FOR SELECT COLUMN_NAME, TABLE_NAME FROM information_schema.`COLUMNS` WHERE extra LIKE '%auto_increment%' and table_schema=schemaName;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    OPEN cur1;
    read_loop: LOOP
     FETCH cur1 INTO o_name, o_table;

     IF done THEN
       LEAVE read_loop;
     END IF;

  set @qry1 = concat('SELECT MAX(`',o_name,'`) + 1 as autoincrement FROM `',o_table,'` INTO @ai'); 
  PREPARE stmt1 FROM @qry1;
  EXECUTE stmt1;

  IF @ai IS NOT NULL THEN
      SELECT  o_name, o_table;
   select @qry1;
   select @ai;
   set @qry2 = concat('ALTER TABLE `',o_table,'` AUTO_INCREMENT = ', @ai);
   select @qry2;
   PREPARE stmt2 FROM @qry2;
   EXECUTE stmt2;
  END IF;

    END LOOP;

    CLOSE cur1;
 END //
DELIMITER ;

call reset_autoincrement('my_schema_name'); 
```

# node.js - Node.js 事件系统与 Akka 的 Actor 模式有何不同？

> ID：13846688
> 
> 赞同：99
> 
> 时间：2012-12-12T18:57:23.613
> 
> 标签：node.js, events, akka, actor

我已经工作`Node.js`了一段时间，并认为自己对 Java 非常擅长。但我刚刚发现`Akka`并立即对它的演员模式感兴趣（据我了解）。

现在，假设我的 JavaScript 技能与我的 Scala/Java 技能相当，我想专注于任一系统的实用性。特别是在网络服务方面。

据我了解，Node 非常擅长处理许多并发操作。我想资产管理系统的一个好的 Node Web 服务将擅长处理同时提交更改的许多用户（在大型、高流量的应用程序中）。

但是在阅读了 Akka 中的演员之后，它似乎会在同一件事上表现出色。我喜欢将工作减少到一口大小的想法。另外，几年前我涉足 Erlang 并爱上了它使用的消息传递系统。

我从事许多处理复杂业务逻辑的应用程序，我认为是时候更深入地研究其中一个了。尤其是升级遗留的 Struts 和 C# 应用程序。

反正避免圣战，两个系统有什么本质区别？似乎两者都朝着同一个目标。也许 Akka 的“自我修复”架构具有优势。

**编辑**

看起来我的选票很接近。请不要将此问题视为“哪个更好，node 还是 akka？”。我正在寻找的是事件驱动库（如 Node）和基于 actor 的库（如 Akka）的根本区别。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-16T10:10:52.557

在不深入细节的情况下（我对 Node.js 知之甚少），主要区别在于 Node.js 仅支持没有并行性的并发，而 Akka 两者都支持。这两个系统都是完全事件驱动的，并且可以扩展到大的工作负载，但是在 Node.js 中缺乏并行性使得它变得困难（即并行性是通过启动多个节点并相应地分派请求来显式编码的；因此它在运行时不灵活） ，而在 Akka 中由于其可调的多线程执行程序而非常容易。给定小的独立工作单元（actor 调用），Akka 将自动为您并行执行。

另一个重要的区别是 Akka 包含一个以结构化方式处理故障的系统（通过让每个 Actor 由其父级监督，这是强制性的），而 Node.js 依赖于作者将错误条件从回调传递到回调的约定。潜在的问题是异步系统不能使用基于同步堆栈的系统所采用的标准异常方法，因为在回调错误发生时，“调用”代码将转移到不同的任务。将故障处理内置到系统中使得构建在该系统上的应用程序更有可能是健壮的。

以上内容并不详尽，我相信还有很多不同之处。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T09:49:29.433

我还没有使用 Akka，但它似乎类似于 erlang，但在 java 中。在 erlang 中，所有进程都像 Akka 中的演员，它们有邮箱，你可以在它们之间发送消息，你有监督者等。

Node.js 使用协作并发。这意味着您在允许时具有并发性（例如，当您调用 io 操作或某些异步事件时）。当您进行一些长时间的操作（在长循环中计算某些东西）时，整个系统都会阻塞。

Erlang 使用抢先式任务切换。当您有长循环时，系统可以暂停它以运行其他操作并在一段时间后继续。对于大规模并发，如果您只执行短操作，Node.js 就很好。两者都支持数百万客户端：http: [//blog.caustik.com/2012/08/19/node-js-w1m-concurrent-connections/](http://blog.caustik.com/2012/08/19/node-js-w1m-concurrent-connections/) [http://blog.whatsapp.com/index.php/2012/01/ 2011 年是 100 万/](http://blog.whatsapp.com/index.php/2012/01/1-million-is-so-2011/)

在java中，您需要线程来执行任何并发性，否则您不能像erlang那样在函数内部暂停执行（实际上erlang在函数调用之间暂停，但这适用于所有函数）。您可以在消息之间暂停执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-08T17:19:04.427

我不确定这是一个公平的比较。我将其更多地阅读为“基于事件的系统与参与者模型相比如何？”。Nodejs 可以支持演员模型，就像 Scala 在 Akka 中所做的那样，或者 C# 在 Orleans 中所做的那样，实际上查看[nactor](https://www.npmjs.org/package/nactor)，似乎有人已经在尝试它了。

至于事件系统与参与者模型的比较，我会让更聪明的人来描述它。关于 Actor 模型的几点简要说明：

*   Actor模型是基于消息的
*   Actor 模型往往在分布式系统（集群）中表现良好。当然，基于事件的系统可以是分布式的，但我认为参与者模型在分布式计算方面具有内置的分布。新请求可以路由到不同筒仓中的新参与者，但不确定这在基于事件的情况下如何工作。
*   Actor 模型支持失败，如果集群 1 出现故障，观察者通常可以找到不同的筒仓来完成工作

另外，看看[戏剧](https://github.com/stagas/drama)。这是另一个 nodejs 演员模型实现。

# mysql - 向 MySQL 查询添加限制子句会显着降低它的速度

> ID：13846691
> 
> 赞同：7
> 
> 时间：2012-12-12T18:57:37.700
> 
> 标签：mysql, performance, limit

我正在尝试解决 MySQL 上的性能问题，所以我想创建一个较小版本的表来使用。当我在查询中添加 LIMIT 子句时，它从大约 2 秒（对于完整插入）变为天文数字（42 分钟）。

```
mysql> select pr.player_id, max(pr.insert_date) as insert_date from player_record pr
inner join date_curr dc on pr.player_id = dc.player_id where pr.insert_date < '2012-05-15'
group by pr.player_id;
+------------+-------------+
| 1002395119 | 2012-05-14  |
...
| 1002395157 | 2012-05-14  |
| 1002395187 | 2012-05-14  |
| 1002395475 | 2012-05-14  |
+------------+-------------+
105776 rows in set (2.19 sec)

mysql> select pr.player_id, max(pr.insert_date) as insert_date from player_record pr
inner join date_curr dc on pr.player_id = dc.player_id where pr.insert_date < '2012-05-15' 
group by pr.player_id limit 1;
+------------+-------------+
| player_id  | insert_date |
+------------+-------------+
| 1000000080 | 2012-05-14  |
+------------+-------------+
1 row in set (42 min 23.26 sec)

mysql> describe player_record;
+------------------------+------------------------+------+-----+---------+-------+
| Field                  | Type                   | Null | Key | Default | Extra |
+------------------------+------------------------+------+-----+---------+-------+
| player_id              | int(10) unsigned       | NO   | PRI | NULL    |       |
| insert_date            | date                   | NO   | PRI | NULL    |       |
| xp                     | int(10) unsigned       | YES  |     | NULL    |       |
+------------------------+------------------------+------+-----+---------+-------+
17 rows in set (0.01 sec) (most columns removed) 
```

player_record 表中有 2000 万行，因此我在内存中为我要比较的特定日期创建了两个表。

```
CREATE temporary TABLE date_curr 
(
      player_id INT UNSIGNED NOT NULL, 
      insert_date DATE,     
      PRIMARY KEY player_id (player_id, insert_date)
 ) ENGINE=MEMORY;
INSERT into date_curr 
SELECT  player_id, 
        MAX(insert_date) AS insert_date 
FROM player_record 
WHERE insert_date BETWEEN '2012-05-15' AND '2012-05-15' + INTERVAL 6 DAY
GROUP BY player_id;

CREATE TEMPORARY TABLE date_prev LIKE date_curr;
INSERT into date_prev 
SELECT pr.player_id,
       MAX(pr.insert_date) AS insert_date 
FROM  player_record pr 
INNER join date_curr dc 
      ON pr.player_id = dc.player_id 
WHERE pr.insert_date < '2012-05-15' 
GROUP BY pr.player_id limit 0,20000; 
```

date_curr 有 216k 条目，如果我不使用限制， date_prev 有 105k 条目。

这些表只是流程的一部分，用于将另一个表（5 亿行）缩减为可管理的内容。date_curr 包括当前周的 player_id 和 insert_date，date_prev 包含当前周之前的 player_id 和最近的 insert_date，用于 date_curr 中存在的任何 player_id。

这是解释输出：

```
mysql> explain SELECT pr.player_id, 
                      MAX(pr.insert_date) AS insert_date 
               FROM   player_record pr 
               INNER  JOIN date_curr dc 
                      ON pr.player_id = dc.player_id
               WHERE  pr.insert_date < '2012-05-15' 
               GROUP  BY pr.player_id 
               LIMIT  0,20000;                    
+----+-------------+-------+-------+---------------------+-------------+---------+------+--------+----------------------------------------------+
| id | select_type | table | type  | possible_keys       | key         | key_len | ref  | rows   | Extra                                        |
+----+-------------+-------+-------+---------------------+-------------+---------+------+--------+----------------------------------------------+
|  1 | SIMPLE      | pr    | range | PRIMARY,insert_date | insert_date | 3       | NULL     | 396828 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | dc    | ALL   | PRIMARY             | NULL        | NULL    | NULL | 216825 | Using where; Using join buffer               |
+----+-------------+-------+-------+---------------------+-------------+---------+------+--------+----------------------------------------------+
2 rows in set (0.03 sec) 
```

这是在一个有 24G RAM 专用于数据库的系统上，目前几乎是空闲的。这个特定的数据库是测试，所以它是完全静态的。我重新启动了mysql，它仍然具有相同的行为。

这是“show profile all”输出，大部分时间都花在复制到 tmp 表上。

```
| Status               | Duration   | CPU_user   | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function       | Source_file   | Source_line |
| Copying to tmp table | 999.999999 | 999.999999 |   0.383941 |            110240 |               18983 |        16160 |           448 |             0 |                 0 |                 0 |                43 |     0 | exec                  | sql_select.cc |        1976 | 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T06:55:44.727

答案有点长，但我希望你能从中学到一些东西。

因此，根据解释语句中的证据，您可以看到 MySQL 查询优化器可以使用两个可能的索引，它们如下所示：

```
possible_keys
PRIMARY,insert_date 
```

然而 MySQL 查询优化器决定使用以下索引：

```
key
insert_date 
```

这是 MySQL 查询优化器使用错误索引的罕见情况。现在有一个可能的原因。您正在处理静态开发数据库。您可能会从生产中恢复它以进行开发。

当 MySQL 优化器需要决定在查询中使用哪个索引时，它会查看所有可能索引的统计信息。您可以在这里阅读更多关于统计信息 的信息[http://dev.mysql.com/doc/innodb-plugin/1.0/en/innodb-other-changes-statistics-estimation.html](http://dev.mysql.com/doc/innodb-plugin/1.0/en/innodb-other-changes-statistics-estimation.html)作为初学者。

因此，当您从表中更新、插入和删除时，您会更改索引统计信息。可能是 MySQL 服务器因为静态数据统计错误，选择了错误的索引。然而，这只是一个可能的根本原因的猜测。

现在让我们深入研究索引。有两个可能的索引可以使用主键索引和 insert_date 上的索引。MySQL 使用了 insert_date 之一。请记住，在查询执行期间，MySQL 始终只能使用一个索引。让我们看看主键索引和 insert_date 索引之间的区别。

*关于主键索引（又名聚集）的简单事实：*

1.  主键索引通常是包含数据行的 btree 结构，即它是包含日期的表。

*关于二级索引（又名非聚集）的简单事实：*

1.  二级索引通常是一个 btree 结构，其中包含被索引的数据（索引中的列）和指向主键索引上数据行位置的指针。

这是一个微妙但很大的区别。

让我解释一下，当您阅读主键索引时，您正在阅读该表。该表也按主索引的顺序排列。因此，要找到一个值，我会搜索索引读取数据，即 1 操作。

当您读取二级索引时，您搜索索引找到指针，然后读取主键索引以根据指针查找数据。这本质上是 2 个操作，使得读取二级索引的操作成本是读取主键索引的两倍。

在您的情况下，因为它选择 insert_date 作为使用它的索引，所以只是为了进行连接而做的工作加倍。那是问题一。

现在，当您限制记录集时，它是查询的最后执行部分。MySQL 必须根据 ORDER BY 和 GROUP BY 条件对整个记录集进行排序（如果尚未排序），然后根据 LIMIT BY 部分获取所需的记录数并将其发送回。MySQL 必须做很多工作来跟踪要发送的记录以及它在记录集中的位置等。 LIMIT BY 确实会影响性能，但我怀疑可能有一个促成因素读取。

查看您的 GROUP BY，它是按 player_id 的。使用的索引是 insert_date。GROUP BY 本质上是对您的记录集进行排序，但是因为它没有用于排序的索引（请记住，索引是按照其中包含的列的顺序排序的）。本质上，您是在询问 player_id 的排序/顺序，并且使用的索引是在 insert_date 上排序的。

这一步导致了文件排序问题，它本质上是读取从读取二级索引和主索引返回的数据（记住这两个操作），然后必须对它们进行排序。排序通常在磁盘上完成，因为它在内存中是一项非常昂贵的操作。因此，整个查询结果被写入磁盘并以非常慢的速度进行排序以获得您的结果。

通过删除 insert_date 索引，MySQL 现在将使用主键索引，这意味着数据是有序的（ORDER BY/GROUP BY）player_id 和 insert_date。这将消除读取二级索引然后使用指针读取主键索引（即表）的需要，并且由于数据已经排序，因此 MySQL 在应用 GROUP BY 查询时几乎不需要工作。

现在，如果您可以在删除索引后发布解释语句的结果，那么以下是一个有根据的猜测，我可能能够证实我的想法。因此，通过使用错误的索引，结果在磁盘上被排序以正确应用 LIMIT BY。删除 LIMIT BY 允许 MySQL 可能在内存中排序，因为它不必应用 LIMIT BY 并跟踪返回的内容。LIMIT BY 可能导致创建临时表。再一次很难说没有看到语句之间的差异，即解释的输出。

希望这能让您更好地理解索引以及为什么它们是一把双刃剑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-08T13:00:17.190

有同样的问题。当我添加它时`FORCE INDEX (id)`，它又回到了查询的几毫秒，它没有限制，同时产生相同的结果。

# plugins - 确定按钮在 CKEditor 插件中不起作用

> ID：13846692
> 
> 赞同：0
> 
> 时间：2012-12-12T18:57:37.763
> 
> 标签：plugins, ckeditor

我在用着：

[https://github.com/frozeman/MediaEmbed](https://github.com/frozeman/MediaEmbed)

在CKEditor中嵌入youtube视频等，它工作正常，除了我在IE9中出现错误......更烦人的是它甚至没有显示为错误，它只是不工作！

在Firefox中打开框，然后添加嵌入代码后，单击“确定”并将其放入编辑器中，但是在ie9中，框打开，您可以将代码粘贴到框，您可以单击取消按钮和框关闭，但如果你点击确定，什么都不会发生！

任何帮助表示赞赏，现在完全被这个震惊了！

代码在这里：

```
 /*
    * Embed Media Dialog based on http://www.fluidbyte.net/embed-youtube-vimeo-etc-into-ckeditor
    *
    * Plugin name:      mediaembed
    * Menu button name: MediaEmbed
    *
    * Youtube Editor Icon
    * http://paulrobertlloyd.com/
    *
    * @author Fabian Vogelsteller [frozeman.de]
    * @version 0.1
    */
    ( function() {
        CKEDITOR.plugins.add( 'mediaembed',
        {
            init: function( editor )
            {
               var me = this;
               CKEDITOR.dialog.add( 'MediaEmbedDialog', function ()
               {
                  return {
                     title : 'Embed Media',
                     minWidth : 550,
                     minHeight : 200,
                     contents :
                           [
                              {
                                 id : 'iframe',
                                 expand : true,
                                 elements :[{
                                    id : 'embedArea',
                                    type : 'textarea',
                                    label : 'Paste Embed Code Here',
                                    'autofocus':'autofocus',
                                    setup: function(element){
                                    },
                                    commit: function(element){
                                    }
                                  }]
                              }
                           ],
                      onOk : function() {
                        for (var i=0; i<window.frames.length; i++) {
                           if(window.frames[i].name == 'iframeMediaEmbed') {
                              var content = window.frames[i].document.getElementById('embed').value;
                           }
                        }
                        console.log(this.getContentElement( 'iframe', 'embedArea' ).getValue());
                        editor.insertHtml(this.getContentElement( 'iframe', 'embedArea' ).getValue());
                     }
                  };
               } );

                editor.addCommand( 'MediaEmbed', new CKEDITOR.dialogCommand( 'MediaEmbedDialog' ) );

                editor.ui.addButton( 'MediaEmbed',
                {
                    label: 'Embed Media',
                    command: 'MediaEmbed',
                    icon: this.path + 'images/icon.png'
                } );
            }
        } );
    } )(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:51:02.110

您使用的是哪个版本的 CKEditor？

我在最新的 Chrome、Firefox 和 IE9 中使用[CKEditor 4.0](http://ckeditor.com/)和 WFM 对其进行了测试。看来您的插件在 3.6.x 分支中存在一些问题。为什么不考虑更新到最新的稳定版本？

# javascript - 在javascript上将NSString转换为数组

> ID：13846696
> 
> 赞同：2
> 
> 时间：2012-12-12T18:57:59.323
> 
> 标签：javascript, ios, arrays, nsstring

我有一个这样的字符串。

```
NSString *test = [[NSString stringWithFormat:@"[1,2,3,4,5]" ] retain];
NSString *sendString = [NSString stringWithFormat:@"inits('%@')",test]  ;
[webView stringByEvaluatingJavaScriptFromString:sendString]; 
```

我在 javascript 函数中调用它

```
 function inits(timings) 
{  
    var arr = new Array()
     arr = timings;

        if($.isArray(arr))
        {
            alert(arr);
        }
        else
        {
            alert('0');
        }
    } 
```

它显示警报“0”。我如何将它转换为javascript上的数组？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:02:56.237

检查从应用程序发回的时间

警报（类型（计时））；

这将告诉你什么会回来，然后你将要做什么才能转换为一个数组，因为我相信这将是一个被传回的字符串，因此你必须对其进行拆分才能使它数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:07:06.193

不确定Javascripts，但如果它总是以字符串形式出现，请尝试这个，

```
NSString *test = @"[1,2,3,4,5]";
NSString *sendString = [NSString stringWithFormat:@"inits(%@)",test]; 
```

或者

```
NSString *sendString = [NSString stringWithFormat:@"inits([1,2,3,4,5])"]; 
```

# performance - Postgresql - 使用索引过滤表中超过 1 亿行的行

> ID：13846704
> 
> 赞同：1
> 
> 时间：2012-12-12T18:58:21.627
> 
> 标签：performance, postgresql, indexing, sharding, clustered-index

我有超过 1 亿行的表格。我必须像以下查询一样计算和提取行。查询运行时间很长。解释表明查询不使用在“created_date”列上创建的 b-tree 索引。我在[stackoverflow](https://stackoverflow.com/questions/9435806/postgresql-ignoring-index-on-timestamp-column)上找到了一些解释，当表有很多行时，b-trees indicies 对过滤是无用的。

集群索引有一个建议。如果我也经常使用查询，我应该在“created_date”索引上聚集表，我在哪里按 ID 排序？

您对更快的查询有何建议？也许我应该阅读更多关于分片的信息？

```
 explain SELECT count(r.id) FROM results_new r
 WHERE r.searches_id = 4351940 AND (created_date between '2008-01-01'  and '2012-12-13') 

Limit  (cost=1045863.78..1045863.79 rows=1 width=4)
   ->  Aggregate  (cost=1045863.78..1045863.79 rows=1 width=4)
    ->  Index Scan using results_new_searches_id_idx on results_new r  (cost=0.00..1045012.38 rows=340560 width=4)"
          Index Cond: (searches_id = 4351940)"
          Filter: ((created_date >= '2008-01-01 00:00:00'::timestamp without time zone) AND (created_date <= '2012-12-13 00:00:00'::timestamp without time zone)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:27:13.237

从外观上看，数据库已决定查找一个`searches_id`将产生比查找`created_date`范围更少的行。（并且将两个索引扫描的结果与位图相结合是不值得的......）

如果您经常需要此查询，请考虑创建一个索引`searches_id, created_date`，然后两个条件都应进入索引条件。

# ruby - 将字符串替换为 Int

> ID：13846713
> 
> 赞同：0
> 
> 时间：2012-12-12T18:58:54.147
> 
> 标签：ruby

```
#! /usr/bin/env ruby

filepath = "chapter1.xhtml"
text = File.read(filepath)

i=1

text = File.read(filepath)

while i!=91

replace = text.gsub(/123123/) do |match|
  match=i.to_s()
end
File.open(filepath, "w") {|file| file.puts replace}
    i=i+1
end 
```

我想将 Ruby1,Ruby1,Ruby1 替换为 Ruby1,Ruby2,Ruby3 但我的代码不起作用。我的错在哪里，我该如何解决？

例如

红宝石1 红宝石1 红宝石1

替换为

红宝石1 红宝石2 红宝石3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:15:59.437

```
input_path  = "chapter1.xhtml"
output_path = "new.txt"
#input = 'input file <section id="bolum1"> <section id="bolum1"> <section id="bolum1">'
string_to_replace = 'bolum1'
File.open(output_path, "w") do |output|
    File.open(input_path, 'r') do |f|
        f.readlines.each do |line|
            counter = 0
#            result = input.gsub(string_to_replace) do |match|
            result = line.gsub(string_to_replace) do |match|
#                puts "found=#{match}"
                counter += 1
                match[-1, 1] = counter.to_s # replace last char by counter
#                puts "replace=#{match}"
                match # the result of the block replaces the matched string
            end
            p result
            output.write(result)
        end
    end # input file will automatically be closed at the end of the block
end # output file will automatically be closed at the end of the block 
```

文件 chapter1.xhtml ：

```
input file <section id="bolum1"> <section id="bolum1"> <section id="bolum1">
input file <section id="bolum1"> <section id="bolum1"> <section id="bolum1"> 
```

执行 ：

```
$ ruby -w t.rb 
"input file <section id=\"bolum1\"> <section id=\"bolum2\"> <section id=\"bolum3\">\n"
"input file <section id=\"bolum1\"> <section id=\"bolum2\"> <section id=\"bolum3\">" 
```

我不确定这是正确的解决方案，因为我不知道您的意见。是 XML 吗？使用适当的 XML 库可能会更好。它更复杂吗？也许输入必须用语法解析。请参阅 www.antlr4.org 和[http://pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference](http://pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference)。本书的源代码是免费的，并且包含解析 XML 的语法。

希望有帮助。乙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:31:15.017

`text = File.read(filepath)`读取整个文件，因此您在循环中一次又一次地读取它。

同上`File.open`，您擦除文件 90 次。

```
My code doesn't work. 
```

您应该解释发生了什么、错误消息等。

# mysql - MySQL 查询在登台服务器上的运行速度比本地开发机器慢 5 倍

> ID：13846723
> 
> 赞同：1
> 
> 时间：2012-12-12T18:59:23.040
> 
> 标签：mysql, performance, indexing

我有一个查询在我的登台服务器上运行慢 5 倍，而不是我的本地开发机器。

Stackoverflow 不想很好地处理格式；查询、描述和解释位于[此处](https://gist.github.com/4270389)

查看`describe`语句，我看不出本地模式和远程模式之间有任何区别。

2 台机器的记录数处于同一数量级（500k 与 600k）

**编辑以回应评论**

这是我将查询放入 MySQL Workbench 并查看查询时间的非常不科学的方法。本地查询时间大约为 1.3 秒，远程查询时间大约为 5.2 秒（因此慢了 4 倍）。我确信有更好的方法来测试这个查询时间。

机器不一样。我的开发机器是一台配备 8 GB RAM 的 Mac Book Pro。登台服务器是一个具有 512 兆 RAM 的 linode VPS。登台服务器上不应该有太多负载（我是唯一使用它的人）。我注意到大多数查询在本地机器和登台服务器上几乎在相同的时间范围内运行，所以我很困惑为什么这个查询有如此截然不同的时间范围。

**内存问题**

由于没有使用临时表（在 中没有提及`EXPLAINS`），RAM 的数量仍然是一个问题吗？

**输出自`free`**

```
 total       used       free     shared    buffers     cached
Mem:        508576     453880      54696          0       4428     254200
-/+ buffers/cache:     195252     313324
Swap:       262140      19500     242640 
```

**概要添加到 Gist**

看起来远程需要 2.5 秒“发送数据”，而本地只需要 0.5 秒。这是 I/O 问题吗？（要点中的完整分析信息）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:26:03.587

您的登台服务器的 RAM 是 Mac Book Pro 的十六分之一。

在不知道您的两个 MySQL 实例有多少 RAM 可用的情况下，很难确定，但这是我首先要看的地方。

此外，如果您在本地从 MySQL 命令行运行这些查询，时间比较如何？时间的增加可能是网络传输而不是查询处理。

实际上...网络传输时间是我首先要看的地方...然后是 MySQL 内存使用情况。

## 编辑以下问题更新

“发送数据”阶段是服务器向客户端[ref](http://dev.mysql.com/doc/refman/5.6/en/general-thread-states.html)发送数据的阶段。我不知道你的数据集到底有多大，但是对于大约 50kB 的数据来说，2.5s 似乎相当高。查看分析数据后，几乎所有时间都花在发送数据上，所以我强烈怀疑这里的网络。

## 编辑 2

一些研究将我带到[此页面](http://petewarden.typepad.com/searchbrowser/2008/10/how-to-profile-mysql.html)，该页面表明“发送数据”具有误导性，这*实际上*是执行查询所花费的时间。

因此，我真的认为您需要查看服务器上的 CPU 和内存使用情况，因为它的规格比您的 MacBook 低得多。

# php - 更简洁的方法来检查今天是否在 2 个日期之间

> ID：13846725
> 
> 赞同：1
> 
> 时间：2012-12-12T18:59:29.137
> 
> 标签：php

> **可能重复：**
> [如何检查日期是否在给定范围内？](https://stackoverflow.com/questions/976669/how-to-check-if-a-date-is-in-a-given-range)

在接下来的几天之间，我需要在我的网站上显示一些信息：

12/28 至 1/1

这是我目前的做法，但看起来很丑：

```
$today = date('m/d');
$days = array('12/28', '12/29', '12/30', '12/31', '1/1');

if(in_array($today, $days)) {
    // show stuff
} 
```

什么是更清洁的方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T19:03:04.717

查看[mktime()](http://php.net/manual/en/function.mktime.php)函数

```
$dateStart = mktime(0, 0, 0, 12, 28, 2012);
$dateEnd = mktime(0, 0, 0, 1, 1, 2013);

if (time() < $dateEnd && time() > $dateStart)
    // show stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:07:34.897

我很确定您可以创建日期对象并进行比较。

像这样的东西：

```
$today = new DateTime();
$start = new DateTime("2012-12-28");
$end = new DateTime("2012-01-01");

if($start <= $today && $today <= $end) {
    // show stuff
} 
```

有关详细信息，请参阅[datetime 构造函数](http://php.net/manual/en/datetime.construct.php)。

（我个人喜欢面向对象的方法，但 Hast 的答案在技术上更快，内存占用更少，并且是 PHP 代码的完全旧部分。但如果您需要对日期做进一步的处理，例如计算星期几或添加时间间隔和重新显示，你会很高兴有这些物体。）

# java - 为什么无法在小程序中获取远程数据源？

> ID：13846727
> 
> 赞同：1
> 
> 时间：2012-12-12T18:59:32.413
> 
> 标签：java, oracle, applet, weblogic, jndi

我试图对 Weblogic 10.3.5 中的数据源进行 JNDI 查找。

我有以下代码：

```
 try {
    //jbInit();

    env.put(javax.naming.Context.INITIAL_CONTEXT_FACTORY,"weblogic.jndi.WLInitialContextFactory");
    env.put(javax.naming.Context.PROVIDER_URL,"t3://localhost:7001");

    try {
        Context ctx = new InitialContext(env);
        javax.sql.DataSource ds = (javax.sql.DataSource) ctx.lookup("jdbc/sandboxDS");
        conn = ds.getConnection();
    } catch(Exception e){
        e.printStackTrace();
    }

    if(conn != null){
        System.out.println("Got connection...");

        String colDescQuery =
        "select column1 from my_table where table_name = 'your_table' order by col_order_no";
        Statement colDescStmt = conn.createStatement();
        ResultSet colDescRS = colDescStmt.executeQuery(colDescQuery);

        while (colDescRS.next()) {
        System.out.println(colDescRS.getString(1));
        }                 

    } else {
        System.out.println("No connection...");
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

当我将此代码作为独立的 Java 程序运行时，它可以完美运行。找到连接并且查询返回预期结果。

当我在一个小程序中使用相同的代码并从 JDeveloper 小程序查看器中运行它时，它会在 InitialContext 被实例化的地方挂起。没有抛出异常，它只是挂起永远不会返回。

关于这里发生了什么的任何想法？我的类路径中有 weblogic.jar 和 wlthint3client.jar 用于两次运行。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:04:05.867

小程序有沙盒限制，因此它们无法连接到下载位置以外的服务器。

确保您的小程序也部署到您的 JNDI 数据源所在的同一 WebLogic Server。

# ios - 在 iOS 中动态添加一堆控件到屏幕

> ID：13846736
> 
> 赞同：0
> 
> 时间：2012-12-12T19:00:04.517
> 
> 标签：ios, dynamic, controls, runtime, add

我正在用户从下拉列表中选择一个选项的屏幕上工作。基于这个选择，他在屏幕上添加了一堆控件。我的下拉菜单位于屏幕的右下角。它占据了底部 20-25% 的屏幕空间。在底部剩余的 75% 屏幕中，我需要添加 9 个标签、6 个 UItext 字段、2 个下拉菜单和 2 个按钮。我在这里附上一个标记。

我的问题是：在 ASP.NET 中，我有一个具有上述所有控件的中继器。在名为“添加更多”的按钮之一中。如果我单击该按钮，它会在当前的底部添加相同的中继器。我们在 iOS 中有类似的东西吗？就像一个中继器，它有一堆控件，然后单击添加，然后在底部添加确切的中继器，依此类推。如果弹出基于我的解释的任何想法/新想法，请告诉我。谢谢。

链接 [http://dl.dropbox.com/u/40597849/mockup2.png](http://dl.dropbox.com/u/40597849/mockup2.png)

因此，当用户单击“添加更多”时，应再次添加右侧包含 8 个标签、文本框、下拉菜单和其下方的 2 个按钮（其中一个名为“添加更多”）的大矩形。如果您需要更多信息，请询问我。

```
ITMCustomView *cView = [[ITMCustomView alloc] initWithFrame:frame];
cView.delegate =self;
CGPoint scrollPoint = CGPointMake(0.0, (frame.origin.y/400)*400);
[self.scrollView setContentOffset:scrollPoint animated:YES];
[self.scrollView addSubview:cView]; 
```

最初我添加的第一个自定义视图，我用这个帧大小（187、585、350、21）添加它；. 接下来，每当我点击添加更多时，我都会调用这个代表

```
[self.delegate addNewSize:CGRectMake(187,self.y+ 400 , 400, 400)]; 
```

这将调用上述 5 行代码并创建一个新的自定义视图并将其添加到滚动视图中。我将 self.y 存储为当前正在构建的任何框架的 y 值。那么如何让我的滚动视图自由上下移动。屏幕显示自定义视图，因为它们被添加但不允许我再上去。我想假设添加自定义视图 5 次，我添加了 4 个我只想向上滚动，请参阅我添加了 4 个向下滚动，然后再添加 1 个自定义视图并使用它进行其他处理。但是我的滚动视图不起作用，它卡在刚刚添加的自定义视图上，使我无法向上滚动。如果您需要更多信息，请询问我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:03:10.187

使用包含所有视图的自定义视图。

1.）制作一个自定义类`myView`，其中子类`UIView`。
2.) 在该视图类中添加您需要的所有控件。
3.) 包含`myView`在您的主视图中。
4.) 尽可能多`myView`地启动并将它们添加到您的主视图中。

我希望这足够清楚，可以让您继续前进。

* * *

*更新：*至于详细说明 bgoers 的评论。
当您创建一个新的类`myView`子类时，`UIView`您会得到一张空表。此工作表将包含您在课堂上或在您开始时指定的框架（由您决定）。在该框架内（`myView.h`和`myView.m`in `initWithFrame`），您可以添加子视图，如按钮或标签。这些子视图将相对于工作表 myView 放置。

例如，您的草拟是一个包含所有控件的自定义视图。通过简单地启动另一个自定义视图而不添加更多子视图，我可以让另一个看起来完全一样。我需要做的就是将第二个自定义视图移动到我想要的位置，所有子视图都将跟随。

我鼓励你阅读如何子类化以及它在 iOS 中的工作原理。一旦掌握了窍门，它就非常简单。

# javascript - 是否可以使用 javascript 或 jQuery 进行 301 重定向？

> ID：13846738
> 
> 赞同：33
> 
> 时间：2012-12-12T19:00:16.817
> 
> 标签：javascript, jquery, seo, http-status-code-301

我正在运行 Apache 2.0，我只是想知道是否可以使用 JavaScript 或 jQuery 进行 301 重定向。

我有一个指向指定位置的`<a></a>`标签，`href`当我单击该链接时，系统会要求我进行 301 重定向。

这是针对 SEO 的，我正在尝试找到一种方法来将 301 重定向到链接中的同一页面，而无需创建新页面或创建表单/提交。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-09-09T19:46:23.677

我知道这是一个老问题，但答案并没有真正解决问题中提出的主要问题，即出于 SEO 目的的 301 重定向（今天的答案很可能与问题最初时的答案不同问和回答）。

不，您不能从客户端进行 301 重定向的答案在技术上是正确的，但是（更重要的是）您不一定需要这样做。虽然首选真正的 301，但在这种不可能的情况下（例如，从 hashbang URL 转换回传统 URL），问题实际上是是否存在实现目标的可行替代方案。

[Search Engine Land](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157)对 Google 关于 JavaScript 的功能进行了详细测试，这是该文章的相关摘录：

> 1.  JavaScript 重定向
> 
> 我们首先测试了常见的 JavaScript 重定向，改变了 URL 以不同方式表示的方式。我们选择的方法是 window.location 函数。执行了两个测试：测试 A 包括 window.location 函数中的绝对 URL。测试 B 使用相对 URL。
> 
> 结果：重定向很快被谷歌跟踪。从索引的角度来看，它们被解释为 301——最终状态 URL 取代了 Google 索引中的重定向 URL。
> 
> 在随后的测试中，我们使用了一个权威页面并实现了一个 JavaScript 重定向到网站上具有完全相同内容的新页面。原始 URL 在热门查询的 Google 第一页上排名。
> 
> 结果：正如预期的那样，重定向被谷歌跟踪，原始页面从索引中删除。新 URL 被编入索引，并立即针对相同的查询将其排在相同的位置。这让我们感到惊讶，并且似乎表明 JavaScript 重定向可以（有时）从排名的角度来看与永久 301 重定向完全一样。
> 
> 下次您的客户想要为他们的网站移动实施 JavaScript 重定向时，您的回答可能不需要是“请不要”。在这种关系中似乎存在排名信号的转移。[支持这一发现的是谷歌指南](https://support.google.com/webmasters/answer/2721217?hl=en)的引用：
> 
> “使用 JavaScript 重定向用户可能是一种合法的做法。例如，如果您在用户登录后将其重定向到内部页面，您可以使用 JavaScript 来执行此操作。在检查 JavaScript 或其他重定向方法以确保您的网站遵守根据我们的指南，请考虑意图。请记住，移动网站时最好使用 301 重定向，但如果您无权访问您网站的服务器，则可以为此目的使用 JavaScript 重定向。”

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-12T19:02:27.117

总之**没有**。

JavaScript 完全在客户端运行。301 重定向应该作为来自服务器的响应。这意味着如果没有服务器支持，您将无法执行此操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T19:03:02.950

301 是服务器响应代码。您将无法从 jQuery 创建 301 重定向。

您必须从 PHP 执行 301。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-13T02:51:52.287

如果这仅用于 SEO 目的，那么这将起作用
`<meta http-equiv="refresh" content="0;url=YOUR_URL">`
Google 将其视为 301 重定向，尽管它不是

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T19:05:59.940

[301 重定向](http://en.wikipedia.org/wiki/HTTP_301)是永久重定向，基本上是 HTTP 服务器响应。JavaScript/jQuery 是在客户端上执行的东西。两个不同的世界。

相反，如果您不能在服务器上执行此操作，您实际上可以将最终 URL 放入 href 中。

或者，如果您询问是否可以重定向当前页面，是的，可以使用 META 重定向或更改 window.location。

如果您使用的是 Apache，则可以使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)进行 301 重定向。

# javascript - Javascript 在 IE9 中间歇性执行

> ID：13846747
> 
> 赞同：0
> 
> 时间：2012-12-12T19:00:57.850
> 
> 标签：javascript, internet-explorer-9, flexslider

在[这个页面上](http://olsta.brightagency.net)，我的 javascript 文件只是间歇性地执行。文件中有一个警报调用，以使其在执行时显而易见。有问题的文件的内容如下。

据我所知，这只发生在 Internet Explorer 9 中。

我能做些什么来确定为什么它并不总是执行？

有问题的代码：

```
jQuery(document).ready(function($) {
    if ($('.flexslider').length) {
        console.log($('.flexslider').length);
        $('.flexslider').flexslider({
            controlNav: false,
            animation: "slide",
        });
        alert('sucess');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:15:01.387

问题出在console.log 上。在 IE 中，如果您没有打开开发人员工具窗口，则控制台未定义。

# r - 类似“make”的依赖跟踪库？

> ID：13846758
> 
> 赞同：15
> 
> 时间：2012-12-12T19:01:33.013
> 
> 标签：r, makefile

Makefile 有很多值得喜欢的地方，但也有很多麻烦。

在做各种项目的过程中（我是一名研究科学家、“[数据科学家](http://en.wikipedia.org/wiki/Data_science)”或其他），我经常发现自己从磁盘上的一些数据对象开始，从中生成各种工件，从这些工件生成工件，并且很快。

如果我可以说“这个对象依赖于这些其他对象”，“这个对象是从这些对象以下列方式创建的”，然后请求一个 Make-like 框架来处理实际构建它们的细节，那就太好了，找出需要更新的对象，将工作分配给多个处理器（如 Make 的`-j`选项），等等。Makefiles 可以做到这一切——但最大的问题是所有的动作都必须写成 shell 命令。如果我在 R 或 Perl 或其他类似环境中工作，这并不方便。此外，Make 中的一个强有力的假设是所有目标都是文件 - 有一些例外和解决方法，但如果我的目标是数据库中的行，那将是非常痛苦的。

需要明确的是，我不是在追求软件构建系统。我对（更普遍地？）处理依赖项网络的东西感兴趣。

有人知道这些依赖网络的框架吗？似乎它可能是一个很好的数据科学工具，并直观地显示结果是如何产生的，等等。

我最近看到的一个非常有趣的例子是[IncPy](https://github.com/pgbovine/IncPy/)，但它看起来已经有一段时间没有被触及了，而且它与 Python 非常紧密地结合在一起。它可能也比我希望的要雄心勃勃，这就是为什么它必须与 Python 如此紧密地结合在一起。

抱歉这个模糊的问题，让我知道是否有一些澄清会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T03:30:31.833

今天宣布了一个名为“Drake”的新系统，专门针对这种情况： [http](http://blog.factual.com/introducing-drake-a-kind-of-make-for-data) ://blog.factual.com/introducing-drake-a-kind-of-make-for-data 。看起来很有希望，虽然我还没有真正尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-30T22:12:29.203

这个问题已经有好几年了，但我认为在此处添加[重制](https://github.com/richfitz/remake)链接是相关的。

从 GitHub 存储库：

> 这里的想法是重新想象一组来自 make 但为 R 构建的想法。而不是对 R 的不同实例进行一系列调用（就像在 R 脚本上运行 make 时发生的那样），这个想法是定义R会话中的管道。remake 不是语言不可知论（就像 make must be），而是毫无歉意地以 R 为重点。

它还没有在 CRAN 上，我也没有尝试过，但它看起来很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-15T15:31:05.590

我会尝试一下[Bazel 。](https://bazel.build/)它主要是一个软件构建系统，但凭借其[`genrule`](https://docs.bazel.build/versions/4.2.2/be/general.html#genrule)工件类型，它也可以执行任意文件生成。

Bazel 非常可扩展，使用其类似 Python 的[Starlark](https://docs.bazel.build/versions/4.2.2/skylark/language.html)语言，对于复杂的任务应该比 make 更容易使用。`genrule`你可以从手工编写简单的步骤开始，然后将常用模式重构为[宏](https://docs.bazel.build/versions/4.2.2/skylark/macros.html)，如果事情变得更复杂，甚至可以编写自己的[规则](https://docs.bazel.build/versions/4.2.2/skylark/rules.html)。因此，您应该能够在高层次上表达您的个人转换，以模拟您对它们的看法，然后使用感觉像是一种适当的编程语言的东西将该表示转换为较低级别的构造。

make 取决于时间戳，而 Bazel 则检查指纹。因此，如果在任何一个步骤产生相同的输出，即使其输入之一发生了变化，那么后续步骤将不需要再次重新计算。如果您的某些数据处理步骤投影或过滤数据，则这种事情发生的可能性很高。

我看到你的问题被标记为 R，尽管它没有太多提及。在引擎盖下，在 Bazel 中，R 计算仍然归结为`R CMD`shell 上的调用。但是您可以以复杂的方式组装复杂的多行命令，以读取您的输入、处理它们并存储输出。`R`如果二进制文件的初始化成本是一个问题， [Rserve](http://www.rforge.net/Rserve/)可能会有所帮助，尽管使用它会使设置依赖于`Rserve`我相信的本地可访问实例。即使这样，我也看不到任何可以避免将数据存储到文件并从文件中加载回来的成本。如果您希望通过在步骤之间将内容保存在内存中来避免该成本，那么您将寻找一个非常特定于 R 的工具，而不是您要求的通用工具。

在“直观地显示结果是如何生成的”方面，[`bazel query --output graph`](https://docs.bazel.build/versions/4.2.2/user-manual.html#query)可用于生成依赖图的[graphviz](https://graphviz.org/) `dot`文件。

免责声明：我目前在 Google 工作，该公司内部使用 Bazel 的一种变体，称为 Blaze。实际上 Bazel 是 Blaze 的开源发布版本。我非常熟悉使用 Blaze，但不熟悉从头开始设置 Bazel。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T02:19:16.043

[Red-R](http://www.red-r.org/)有一个数据流编程的概念。我还没有尝试过。

# jquery - Jquery 菜单关闭

> ID：13846762
> 
> 赞同：0
> 
> 时间：2012-12-12T19:01:36.943
> 
> 标签：jquery

所以我正在研究这个简单的脚本，当你点击它外部时，它应该隐藏任何对象。

这是[**jsFiddle**](http://jsfiddle.net/9H2DR/)和我的简单代码：

**HTML**

```
<div class="container">
    Click anywhere in this div

    <div style="border:1px solid blue; float:right;">div should still open/close</div>
</div>

<div class="close_me">Close me!</div>​ 
```

**JS**

```
$(".container").click(function(){
    $(".close_me").toggle();
});

helper_close(".close_me", ".container");

//this is simplified example of my function
function helper_close(target, avoid){
    //note that this function will be called once per object
    //so it should be fine to bind new event on document
    $(document).on("click", function(event){

        if( $(event.target).is(avoid) )
            return true;

        $(target).hide();
    });
} 
```

​现在您可以看到它有效，（有点）问题是，`close_me`当您单击 内部的任何位置时`container`，它也应该出现/消失，正如您所看到的，这现在不会发生。

我知道我可以指定每个我想“避免”的对象，但是如果我在那个容器中有 20 个 div 怎么办？那么代码看起来很丑陋......所以我需要一些更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:07:43.020

只需检查单击的元素是否在链上某处与“避免”选择器匹配，如果没有，则隐藏：

```
$(document).on("click", function(event){
    if(! $(event.target).closest(avoid).length ) $(target).hide();
}); 
```

[**小提琴**](http://jsfiddle.net/9H2DR/1/)

# testing - RSpec我是否测试关系的双方

> ID：13846763
> 
> 赞同：0
> 
> 时间：2012-12-12T19:01:37.707
> 
> 标签：testing, rspec, relationship

假设我有两个模型

```
class User < ActiveRecord::Base
  has_many :friendships, :dependent => :destroy
  has_many :followings, :through => :friendships, :foreign_key => "followed_id"
end

class Friendship < ActiveRecord::Base
  belongs_to :user 
  belongs_to :following, :class_name => "User", :foreign_key => "followed_id"
end 
```

现在在我的 user_spec.rb 我有这个测试

```
it "should delete all friendships after user gets destroyed" do
  @user.destroy
  [@friendship].each do |friendship|
    lambda do
      Friendship.find(friendship)
    end.should raise_error(ActiveRecord::RecordNotFound)
  end
end 
```

这是测试 :dependent => :destroy 关系的正确位置吗？或者这是否属于friendship_spec.rb 或者我测试这两个规范中的哪一个无关紧要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:07:32.470

这种事情有时是一个品味问题，但我认为规范`User`可能是测试这一点的最佳场所。您为开始测试而调用的方法是 on 方法`User`，因此与其他测试一起测试它也是有意义的`User`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:11:12.290

您可以考虑使用[shoulda_matchers](https://github.com/thoughtbot/shoulda-matchers)来测试您的关联：

```
# user_spec.rb
it { should have_many(:friendships).dependent(:destroy) }

# friendship_spec.rb
it { should belong_to(:user) } 
```

让每个模型测试自己的关联是最好的方法恕我直言。

# sql-server - SQL Server Excel 链接服务器远程服务器执行问题

> ID：13846767
> 
> 赞同：0
> 
> 时间：2012-12-12T19:01:41.843
> 
> 标签：sql-server, excel, linked-server

这是我第一次不得不将 Excel 工作表用作链接服务器，经过大量的努力并解决了一个问题，结果又遇到了另一个问题，我决定伸出援手。长话短说我有一个从 Excel 链接服务器中提取数据的 SP（这最初只是一个开放数据源而不是链接服务器，但我在那里也遇到了问题）SP 在本地工作正常，但是当我远程运行它时，我是刚刚收到错误 7302“无法创建提供程序的实例”，然后在进行一些搜索后，我在提供程序设置中启用了“允许处理中”和“动态参数”，现在我得到：

> *消息 7399...
> 链接服务器“JOBDETAILS”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”报告错误。提供商没有提供有关该错误的任何信息。
> 消息 7303...
> 无法为链接服务器“JOBDETAILS”初始化 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”的数据源对象。*

我查看了本地和远程服务器上的事件查看器，当我尝试使用 Windows 凭据从远程执行时，本地正在记录 Com 应用程序权限问题（最终结果将使用 SQL 凭据运行，但我也尝试使用 Windows 进行故障排除) 所以我更正了权限问题，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:53:28.513

解决了我自己的愚蠢问题，今天早上回顾了所有事情，并意识到我已将链接服务器指向映射驱动器。

# php - PHP, in_array, 0 值

> ID：13846769
> 
> 赞同：28
> 
> 时间：2012-12-12T19:01:43.023
> 
> 标签：php, arrays

我试图了解`in_array`下一个场景中的行为：

```
$arr = array(2 => 'Bye', 52, 77, 3 => 'Hey');
var_dump(in_array(0, $arr)); 
```

的返回值为`in_array()`boolean `true`。如您所见，**没有**等于 的值`0`，所以如果有人可以帮助我理解为什么该函数返回 true？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-12T19:06:22.523

[根据文档](http://php.net/manual/en/function.in-array.php)中的评论，这是一个已知问题。考虑以下示例：

```
in_array(0, array(42));      // FALSE
in_array(0, array('42'));    // FALSE
in_array(0, array('Foo'));   // TRUE 
```

为避免这种情况，请提供第三个参数 ，`true`将比较置于*严格模式下*，这不仅会比较值，还会比较类型：

```
var_dump(in_array(0, $arr, true)); 
```

存在其他不需要将每个检查都置于严格模式的解决方法：

```
in_array($value, $my_array, empty($value) && $value !== '0'); 
```

### 但为什么？

这一切背后的原因很可能是[字符串到数字的转换](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)。如果我们尝试从“Bye”中获取一个数字，我们会得到`0`，这是我们要求查找的值。

```
echo intval("Bye"); // 0 
```

为了确认这一点，我们可以使用查找与*匹配*值`array_search`关联的键：

 *```
$arr = array(2 => 'Bye', 52, 77, 3 => 'Hey');
echo array_search(0, $arr); 
```

在此，返回的键是`2`，意思`0`是在转换为`Bye`整数时找到。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T19:05:35.577

尝试在调用中添加第三个参数`true`（严格模式）`in_array`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T19:16:26.487

这是松散比较和[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)的结果。

松散比较意味着 PHP在比较元素时 使用`==`not 。不比较两个变量类型是否相等，只比较它们的值，而将确保它们在类型和值上匹配（例如比较和）。`===``==``===``0 == FALSE``0 === FALSE`

因此，基本上，您的 in_array 函数正在检查：

```
0 == 'Bye'
0 == 'Hey'
0 == 77 
```

*请注意，由于您创建阵列的方式，52 会丢失。*

因此，请注意，如果您这样做：

```
print (0 == 'Bye'); 
```

您将得到 1。显然，PHP将“再见”[类型](http://php.net/manual/en/language.types.type-juggling.php)转换为 0，这与将字符串转换为 int 时会发生的情况相同，例如`(int) 'string'`将等于 0。从[字符串转换为数字 doc 的](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)具体参考（重点补充）：

> 该值由字符串的初始部分给出。如果字符串以有效的数字数据开头，这将是使用的值。 **否则，该值将为 0（零）**。有效的数字数据是一个可选的符号，后跟一个或多个数字（可选地包含一个小数点），后跟一个可选的指数。指数是“e”或“E”后跟一位或多位数字。

显然，整数类型优先于字符串类型（即，它可以通过将 int 0 转换为字符串来轻松进行比较，然后返回 False）。这是在[比较运算符文档](http://php.net/manual/en/language.operators.comparison.php)中指定的：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

感谢您提出一个有趣的问题，让我进行了一些研究并学习了一些新东西！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:07:12.770

in_array 应该用于索引数组（[0]、[1]、[2] 等），而不是您定义的字典（键值存储）。

如果您想检查您的数组 $arr 是否包含“0”，请尝试使用 PHP 函数 array_key_exists - [http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)。

```
var_dump(array_key_exists(0, $arr)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-18T20:43:50.997

类型比较（第三个参数）需要更多的系统资源和更多的时间。只需这样做：

```
$x=0;
$result=in_array($x.'',array('ABC','BAC','12c','54'));
var_dump($result); 
```*

# sql - UNION ALL 查询：“定义的字段太多”

> ID：13846776
> 
> 赞同：7
> 
> 时间：2012-12-12T19:02:23.943
> 
> 标签：sql, ms-access

我正在尝试获得 3 个表的 UNION，每个表都有 97 个字段。我尝试了以下方法：

```
select * from table1
union all
select * from table2
union all
select * from table3 
```

这给了我一条错误消息：

```
Too many fields defined. 
```

我还尝试从第一个表中显式选择所有字段名称（为简洁起见添加了省略号）：

```
select [field1],[field2]...[field97] from table1
union all
select * from table2
union all
select * from table3 
```

当我只 UNION 两个这样的表时，它工作正常：

```
select * from table1
union all
select * from table2 
```

作为这个查询的结果，我不应该得到超过 97 个字段；两桌 UNION 只有 97。那为什么我要`Too many fields`3 桌呢？

编辑：正如 RichardTheKiwi 在下面指出的，Access 正在总结 UNION 链中每个 SELECT 查询的字段计数，这意味着我的 3 个表超过了 255 个字段的最大值。因此，我需要像这样编写查询：

```
select * from table1
union all
select * from
(select * from table2
union all
select * from table3) 
```

效果很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T19:06:52.613

It appears that the number of fields being tracked (limit 255) is counted against ALL parts of the UNION ALL. So 3 x 97 = 291, which is in excess. You could probably create a query as a UNION all of 2 parts, then another query with that and the 3rd part.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T22:27:35.770

I had two tables with 173 fields each (2 x 173 > 255!). So I had to resort to splitting the tables in half (keeping the primary key in both), before using the UNION statement and reassembling the resulting output tables using a JOIN.

```
 select u1.*, u2.* 
    from (
      select [field1_PKID],[field2],...,[field110] 
      from table1

      union all

      select [field1_PKID],[field2],...,[field110] 
      from table2
      ) as u1
    inner join (
      select [field1_PKID],[field111],...,[field173] 
      from table1

      union all 

      select [field1_PKID],[field111],...,[field173] 
      from table2
      ) as u2
    on [u1].[field1_PKID] = [u2].[field2_PKID] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:19:24.433

Perhaps if your 3 tables have duplicate records you can go with UNION instead of UNION ALL which may reduce the number of fields to be tracked. Because UNION will always serve the business purpose which removes duplicates. In that case your query will be like following,

```
select * from table1
union
select * from table2
union
select * from table3; 
```

# php - Wordpress 插件 SEO Facebook 导致错误：在没有堆栈帧的情况下引发异常

> ID：13846779
> 
> 赞同：2
> 
> 时间：2012-12-12T19:02:30.373
> 
> 标签：php, wordpress

当我激活插件时： SEO Facebook Comments 代替页面评论时出现错误：

> 致命错误：在第 0 行的 Unknown 中抛出没有堆栈帧的异常

然后当我启用 WP_DEBUG 我得到：

```
( ! ) Notice: register_uninstall_hook was called incorrectly. Only a static class method or function can be used in an uninstall hook. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in C:\wamp\www\wp-includes\functions.php on line 2944
Call Stack
#   Time    Memory  Function    Location
1   0.0005  365640  {main}( )   ..\index.php:0
2   0.0008  369280  require( 'C:\wamp\www\wp-blog-header.php' ) ..\index.php:17
3   0.0013  389656  require_once( 'C:\wamp\www\wp-load.php' )   ..\wp-blog-header.php:12
4   0.0019  405168  require_once( 'C:\wamp\www\wp-config.php' ) ..\wp-load.php:29
5   0.0028  508984  require_once( 'C:\wamp\www\wp-settings.php' )   ..\wp-config.php:92
6   0.2159  24384776    include_once( 'C:\wamp\www\wp-content\plugins\seo-facebook-comments\seofacebook.php' )  ..\wp-settings.php:195
7   0.2205  24806704    SEOFacebookComments->__construct( ) ..\seofacebook.php:594
8   0.2213  24816992    register_uninstall_hook( )  ..\seofacebook.php:95
9   0.2213  24817224    _doing_it_wrong( )  ..\plugin.php:679
10  0.2213  24818200    trigger_error ( )   ..\functions.php:2944 
```

当我检查[wp-content\plugins\seo-facebook-comments\seofacebook.php](http://plugins.svn.wordpress.org/seo-facebook-comments/trunk/seofacebook.php)第 195 行时： `wp_register_style('fbSEOStylesheet', $fbSEOStyleURL);`

有什么想法有什么问题，或者我可以在哪里开始调试以找到错误？

使用最新版本的 WordPress。

更新：当我搜索插件目录时，我找到了 register_untilstall_hook 的 1 个实例

```
register_activation_hook( __FILE__, array( &$this, 'install' ) );
register_deactivation_hook( __FILE__, array( &$this, 'remove' ) );
register_uninstall_hook( __FILE__, array( &$this, 'remove' ) ); 
```

更新 2：我能够修复以下错误：[https](https://stackoverflow.com/a/11976433/560287) ://stackoverflow.com/a/11976433/560287但我仍然在评论部分收到原始错误。关于这可能是什么的任何想法？

# java - Java 应用程序与视频游戏通信

> ID：13846782
> 
> 赞同：1
> 
> 时间：2012-12-12T19:02:49.597
> 
> 标签：java, input, middleware, awtrobot

我有一个 java 应用程序，它从无线设备获取数据，通过蓝牙连接并根据数据执行特定操作。

目的是让这个应用程序成为一种中间件，无线设备告诉它要加载什么游戏，然后执行什么动作，即前进、跳跃、环顾四周。

目前，这一切都是通过使用 Robot 类并模拟按键和鼠标移动事件来完成的，而这很有效；我想要的是能够直接加载游戏并与之交互。

我不确定我的 java 应用程序如何加载来自无线设备的游戏 (.exe) 和输入命令，我只需要解决 Robot 类吗？

提前致谢。

# asp.net - 在隐藏的gridview中隐藏或插入tbody和tr标签？

> ID：13846787
> 
> 赞同：0
> 
> 时间：2012-12-12T19:03:05.817
> 
> 标签：asp.net, html, vb.net, accessibility, section508

我正在尝试验证开发人员在其上使用 gridview 的 ASP.Net 站点上的页面。似乎最初他们使用的是“占位符”网格视图，该网格视图基于单击某些按钮以显示数据而变得隐藏或可见。但是，在单击这些按钮之前，我看到一个空表，并且我正在使用的验证工具抱怨没有 tbody 或 tr 标签。有没有办法完全隐藏表格标签或在隐藏的网格视图中插入 tbody/tr？

这是 aspx.vb 文件中的 gridview 标记：

```
<asp:GridView ID="GridView1"  runat="server" AutoGenerateColumns="False" summery="This table displays system notification items."
 AllowPaging="True" PagerSettings-Position="Top" PagerStyle-HorizontalAlign ="Right" PageSize ="15"  >
<Columns>
    <asp:TemplateField>
     <ItemTemplate>
      <asp:Image ID="image1" runat="server" ImageUrl="~/cmsicons/flag_red.gif" AlternateText="Overdue" Visible='<%# Eval("IsVisible")%>'/>
     </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataFormatString="{0:MM/dd/yyyy}" DataField="showdate" HeaderText="Due Date" 
        SortExpression="showdate"  />
        <asp:BoundField DataFormatString="{0:MM/dd/yyyy}" DataField="ModifiedDate" HeaderText="ModifiedDate" 
        SortExpression="ModifiedDate"  />
    <asp:TemplateField HeaderText="Data ID" SortExpression="DataRecordID">            
        <ItemTemplate>   
          <asp:HyperLink text='<%# Eval("DataRecordID") %>'  runat="server" NavigateUrl='<%# Eval("DataRecordID", "CMSManageAllDataRecord.aspx?dataid={0}") %>' ></asp:HyperLink> 
        </ItemTemplate> 

        </asp:TemplateField> 

    <asp:BoundField DataField="RecordName" HeaderText="Title" 
        SortExpression="RecordName" />       
    <asp:BoundField DataField="subcdrl" HeaderText="CDRL Number" 
        SortExpression="subcdrl" />        
    <asp:BoundField DataField="subcdrl" HeaderText="Sub Cdrl Count" 
        SortExpression="subcdrl" Visible ="false"  /> 
    <asp:BoundField DataField="StatusName" HeaderText="Status" 
        SortExpression="StatusName" />

</Columns>
<EmptyDataTemplate>
                <div>No Data found</div>
            </EmptyDataTemplate>
 <FooterStyle CssClass="GridViewFooterStyle" />
<RowStyle CssClass="GridViewRowStyle" />    
<SelectedRowStyle CssClass="GridViewSelectedRowStyle" />
<AlternatingRowStyle CssClass ="GridViewAlternatingRowStyle" />
<PagerStyle CssClass="GridViewPagerStyle" HorizontalAlign="Right"    />
<HeaderStyle CssClass="GridViewHeaderStyle" />

</asp:GridView> 
```

这是我查看源代码时看到的输出：

```
<div class="AspNet-GridView" id="ctl00_ContentPlaceHolder1_GridView1">
          <table cellpadding="0" cellspacing="0" summary="">
          </table>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:31:46.027

你绝对可以用Javascript隐藏它，如果这是一个选项，一种方法是

```
<script>
function hideGV(){
    document.getElementById('<%=GridView1.ClientID%>').style.display='none';
}
</script> 
```

如果您想插入`tbody/tr`元素并使用 jQuery 是您的一个选项，这里有一个示例。

插入的 jQuery 选项`tbody/tr`

```
<script>
​$(function(){
    $('#<%=GridView1.ClientID%>').append('<tbody><tr><td></td></tr></tbody>');
});​
</script> 
```

# jquery - 从 JS 对话框中单击发布到控制器操作方法

> ID：13846790
> 
> 赞同：0
> 
> 时间：2012-12-12T19:03:08.537
> 
> 标签：jquery, asp.net-mvc, razor

我的视图中有一个 JS 对话框。当视图返回时，对话框被最大化/打开。该视图还有一个链接，当用户单击该链接时，此对话框将打开。

我在对话框中有一个名为 Submit 的按钮。我想要做的是当模式框打开时，其余的页面元素应该被模糊或禁用。当他们单击对话框中的提交按钮时，它应该与模型属性一起发布到控制器操作方法。我不太擅长 JS 语法，但我如何在提交点击中以“确认”的提交值发回名为“创建”的控制器操作？

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

@using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true)
        <div class="exception">@(ViewBag.ErrorMessage)</div>

        //xyz elements here

            <div class="bodyContent">
        <span class="leftContent">
            @Html.Label("Run Dates")
        </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
            Click here to Select Run Dates</span>
            <br />
            <span id="RunDatesDisplayy"></span></span>
    </div>

    <div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
        overflow: scroll; width: 800px; height: 450px; display: none;">
        <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
            <thead>
                <tr>
                    <th>
                        Run Dates:
                    </th>
                </tr>
            </thead>
            <tbody>
                    @Html.EditorFor(x => x.RunDatesDisplay)
            </tbody>
        </table>
    </div>
} 
```

对话框的 JS 文件（runDates.js）：

```
var RunDialog;
$(document).ready(function () {

    RunDialog = $("#runDatestreeview").dialog({ resizable: false, autoopen: false, height: 140, modal: true, width: 630, height: 400,
        buttons: { "Submit": function () {
            $(this).dialog("close");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $('#RunDatesChildDialogLink').click(function () {
        RunDialog.dialog('open');
        $("#runDatestreeview").parent().appendTo("form");
    });

    $("#runDatestreeview").parent().appendTo("form");
}); 
```

控制器动作：

```
[HttpPost]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                     string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1, List<string> Replicates)
        {

**EDIT:**

var RunDialog;

$(document).ready(function () {

    RunDialog = $("#runDatestreeview").dialog({ resizable: false, autoopen: false, height: 140, modal: true, width: 630, height: 400,
        buttons: { "Continue": function () {
            var str = $("#form").serialize();

            $.ajax({
                url: "/RunLogEntry/Create",
                data: str,
                cache: false,
                type: 'POST',
                dataType: 'json',
                contentType: "application/json;charset=utf-8",
                success: function (data, status) {
                },
                error: function (xhr, ajaxOptions, thrownError) { alert('error') }
            });

        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $('#RunDatesChildDialogLink').click(function () {
        RunDialog.dialog('open');
        $("#runDatestreeview").parent().appendTo("form");
    });

    $("#runDatestreeview").parent().appendTo("form");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:11:17.573

*示例展示如何将数据发布到控制器方法*

**剃刀代码：**

```
<div id="form">
        <table width="600">
            <tr>
                <td>Select Date:</td>
                <td>
                    <input class="txtDate" type="date" size="20"></td>
            </tr>
            <tr>
                <td>Select Expense Type:</td>
                <td>
                    <select class="ExpenseType">
                        <optgroup label="Room">
                            <option>Room Fare</option>
                        </optgroup>

                        <optgroup label="Mess">
                            <option>Monthly Mess</option>
                        </optgroup>

                        <optgroup label="Others">
                            <option>Bus Fare</option>
                            <option>Tapari</option>
                            <option>Mobile Recharge</option>
                            <option>Auto</option>
                        </optgroup>
                    </select></td>
            </tr>
            <tr>
                <td>Enter Cost:</td>
                <td>
                    <input  class="cost" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>Extra Details:</td>
                <td>
                    <input class="extra" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button href="javascript:void(0);" onClick="saveExpense();" >Submit</button></td>
            </tr>
        </table>
    </div> 
```

**jQuery代码：**

```
 <script>
function saveExpense()
    {
        var expenseobject = {
            date:$('.txtDate').val() ,
            type:$('.ExpenseType').val() ,
            cost: $('.cost').val(),
            extra:$('.extra').val()

        };

        $.ajax({
            url: './saveexpense',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ obj: expenseobject }),
            success: function (result) {
                handleData(result);

            }
        });

    }
</script> 
```

**控制器：**

```
 public ActionResult SaveExpense(Expense obj)
        {
            obj.ExpenseId = Guid.NewGuid();
            if (ModelState.IsValid)
            {
                context.expenses.Add(obj);
                context.SaveChanges();
                int total=context.expenses.Sum(x => x.cost);
                return Json(new {spent=total,status="Saved" });

            }
            else
                return Json(new { status="Error"});   
        } 
```

希望这能让你通过现在...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:26:52.937

我只是做了一个简单的帖子并使用了 form.serialize 而不是手动设置每个模型属性。简短而简单

```
$.post("/RunLogEntry/Create", $("#form").serialize(), function (json) {
            // handle response
        }, "json"); 
```

# c# - 通过 IIS Live Smooth Streaming 发布动态播放列表

> ID：13846801
> 
> 赞同：1
> 
> 时间：2012-12-12T19:03:52.913
> 
> 标签：c#, iis, live-streaming, expression-encoder, smooth-streaming

我通过使用带有 IIS 平滑流的表达式编码器来发布视频。

我想将系统转换为程序化方式。如何通过 IIS Smooth Streaming 发布我的动态视频播放列表（我使用 WPF 制作的）？我必须使这个播放列表可更新并将其与实时流同步。

我可以使用 Expression Encoder SDK 或 IIS Smooth Streaming Format API 执行此操作吗？你有什么建议？

提前致谢。

# android - Edittext getText toString

> ID：13846803
> 
> 赞同：0
> 
> 时间：2012-12-12T19:04:01.860
> 
> 标签：android

下面是我的 EditText，我想把它输入一个字符串 tel Toast 将成功显示 getText toString 但是，我没有看到在 LogCat 中放入 tel 的值。

```
 edittext = (EditText) findViewById(R.id.editTel);
     edittext.setOnEditorActionListener(new OnEditorActionListener() {  
         @Override  
         public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {  
            Toast.makeText(Reserve.this, edittext.getText().toString(), Toast.LENGTH_SHORT).show();  
            tel = edittext.getText().toString();
             return true;  
         }  
     });

     Log.d("TEL", "The tel is: "+tel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:06:12.747

将`Log.d("TEL", "The tel is: "+tel);`内部`onEditorAction`方法设置为：

```
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
Toast.makeText(Reserve.this, edittext.getText().toString(),
                                 Toast.LENGTH_SHORT).show();
tel = edittext.getText().toString(); 
Log.d("TEL", "The tel is: "+tel);
return true;
}
}); 
```

因为也许外部没有达到可能的控制 `OnEditorActionListener`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:20:24.363

您只是调用了一个方法，该方法存储了对 EditText 对象内的一个对象（属于 OnEditorActionListener 类）的引用。流程继续立即执行 Log.d() 方法，打印并清空“tel”。OnEditorActionListener.onEditorAction() 方法将在其他任何时候被调用，由用户操作触发，并执行其中的代码。也许流程可以更清晰地写成这样：

```
 OnEditorActionListener listener = new OnEditorActionListener() {  
         @Override  
         public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {  
            Toast.makeText(Reserve.this, edittext.getText().toString(), Toast.LENGTH_SHORT).show();  
            tel = edittext.getText().toString();
             return true;  
         }  
     });

edittext = (EditText) findViewById(R.id.editTel);
edittext.setOnEditorActionListener(listener);
Log.d("TEL", "The tel is: "+tel); 
```

这种方式更清楚的是 onEditorAction() 方法完全独立于该段代码的正常执行流程。

# django - 大写 Django 中属性的 list_display 标头

> ID：13846806
> 
> 赞同：0
> 
> 时间：2012-12-12T19:04:09.160
> 
> 标签：django, django-admin

我有一个属性是首字母缩略词，例如，`FOO`我想在管理员中显示为`FOO`. 它显示为`Foo`。我可以让它显示为`FOO`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:25:36.220

我没有试过这个，但我想你可以用`short_description`这个：

```
def foo(self):
  # your code here

foo.short_description = 'FOO' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:26:54.337

是 - 您可以覆盖管理模板并应用`{{..|upper}}`过滤器。

可以在[此处](http://www.caktusgroup.com/blog/2009/01/20/overriding-django-admin-templates-for-fun-and-profit/)和[此处找到覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-vs-replacing-an-admin-template)

另一种方法是：

```
class MyClassAdmin(admin.ModelAdmin):
    list_display = ('upper_case_foo','somethingelse')

    def upper_case_foo(self, obj):
        return ("%s"%(obj.foo)).upper()
    upper_case_foo.short_description = 'FOO' 
```

文档[在这里](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

# css - 为什么不透明度会否定指针事件？

> ID：13846807
> 
> 赞同：3
> 
> 时间：2012-12-12T19:04:12.290
> 
> 标签：css, opacity

在以下设置中，为什么单击事件（和任何其他指针事件）没有被触发？

如果您删除该`opacity: 0.5`行，它将正常工作。

[http://jsfiddle.net/523ve/](http://jsfiddle.net/523ve/)

对于后代，以防 jsFiddle 出现故障（12 月 21 日*即将*到来）：

HTML：

```
<div>
    <a>Click</a>
    <p>Paragraph</p>
</div> 
```

CSS：

```
div { position: relative; margin: 40px; }
a { position: absolute; top: 0; right: 0; }
p { opacity: 0.5; } 
```

JS：

```
$(document).ready(function(event) {
    $("a").click(function(event) {
        alert("Alert");
    });
}); 
```

（在最新稳定的 Chrome 和 Firefox 中测试）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:12:38.243

> “由于不透明度小于 1 的元素是从单个屏幕外图像合成的，因此它之外的内容不能按 z 顺序在其内部的内容之间分层。出于同样的原因，实现必须为任何内容创建新的堆叠上下文opacity 小于 1 的元素。如果 opacity 小于 1 的元素未定位，则实现必须在其父堆叠上下文中绘制它创建的层，其堆叠顺序与如果它是具有`z-index: 0`和 的定位元素时使用的堆叠顺序相同`opacity: 1`……”

[http://www.w3.org/TR/css3-color/#transparency](http://www.w3.org/TR/css3-color/#transparency)

* * *

**编辑**：

此外，您的特定示例的`<p>`元素与`<a>`.

[http://jsfiddle.net/523ve/4/](http://jsfiddle.net/523ve/4/)

因此，您可以通过移动 以`<a>`使其不会干扰或使用`z-index`重新调整堆叠顺序来解决此问题。后一个选项可能有跨浏览器问题，但我没有测试过。我建议重构您的 HTML，以便这两个元素不会相互重叠。

* * *

**编辑 2**：

这是一个相关的 SO question，但是接受的答案不正确。

[什么更重要：浏览器中的不透明度或 z-index？](https://stackoverflow.com/questions/2837057/what-has-bigger-priority-opacity-or-z-index-in-browsers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:11:23.547

你可能会明白这一行

opacity CSS 属性指定元素的透明度，即元素**背后的背景被覆盖**的程度。

将此属性与 1 不同的值使用会将元素置于新的堆叠上下文中。

[来源：MDN](https://developer.mozilla.org/en-US/docs/CSS/opacity)

这里`p`是重叠`a`的，所以要么将宽度设置`p`为不重叠`a`，要么设置`a`得更高`z-index`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T19:12:41.950

`a`元素出现在 之前，`p`请注意它`p`是 100% 宽的。这意味着它`p`实际上是 ABOVE `a`。

您可以将`a`元素的 z-index 更改为 0 以上的值（http://jsfiddle.net/523ve/5/）或交换`p`并`a`在您的 HTML 中，以便`a`之后出现`p`（http://jsfiddle.net/523ve/3/） .

我希望我写的东西有意义;)。

# html - 没有使用 JSP 获取 url 变量

> ID：13846809
> 
> 赞同：0
> 
> 时间：2012-12-12T19:04:21.150
> 
> 标签：html, jsp

我正在为学校编写一个在线文本编辑器。我已经能够使用自定义名称保存文件，所以这不是问题。使用我拥有的 HTML 表单，它将 TextArea 的文本提交到用户指定的文件中，然后将 url 设置为 blah.org/text.jsp?status=gen。在后面的代码中，如果变量 status == gen，我让程序写入文件，否则什么也不做。单击提交时，我无法创建文件，我认为这与我在 URL 中获取变量有关。这是我的代码：

```
 /* Set the "user" variable to the "user" attribute assigned to the session */
String user = (String)session.getAttribute("user");
String status = request.getParameter("status");
    /* Get the name of the file */
String name = request.getParameter("name");
    /* Set the path of the file */
String path = "C:/userFiles/" + user + "/" + name + ".txt";
/* Get the text in a TextArea */
String value = request.getParameter("textArea");
    /* If there isn't a session, tell the user to Register/Log In */
if (null == session.getAttribute("user")) {
out.println("Please Register/Log-In to continue!");
    if (status == "gen") {
        try {
            FileOutputStream fos = new FileOutputStream(path);
            PrintWriter pw = new PrintWriter(fos);
            pw.println(value);
            pw.close();
            fos.close();
    }
    catch (Exception e) {
        out.println("<p>Exception Caught!");
    }
} else {
out.println("Error");
}
} 
```

和形式：

```
<form name="form1" method="POST" action="text.jsp?status=gen">
<textarea cols="50" rows="30" name="textArea"></textarea>
<center>Name: <input type="text" name="name" value="Don't put a .ext"> <input type="submit" value="Save" class="button"></center>
other code here </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:08:46.933

代替

```
if (status == "gen") { 
```

和

```
if ( status.equals("gen") ) { 
```

甚至更好

```
if ( "gen".equals(status) ) { 
```

您的第一条语句执行对象相等而不是字符串相等。因此，它总是返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:08:57.113

您正在比较字符串与`==`而不是将它们与`.equals()`. `==`比较字符串是相同的对象实例，而不是它们是否包含相同的字符。

请务必阅读[IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。流应始终在 finally 块中关闭，或者您应该使用 Java 7 try-with-resources 构造。

# html - 如何调动已经存在的网站？

> ID：13846816
> 
> 赞同：-2
> 
> 时间：2012-12-12T19:04:56.610
> 
> 标签：html, mobile

我正在尝试创建学校网站的移动版本，有没有简单的方法可以做到这一点？我宁愿不花钱让一些网站为我做这件事。我可以加载外部 html 模板而不仅仅是外部 css 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:09:35.273

你当然可以。但是，这不是可以自动完成的任务。您需要坐下来创建一个新的`HTML`和/或新的`CSS`. 但您也可以保持原样，因为您可以在大多数智能手机上毫无问题地查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:13:44.403

您可以找到许多免费和付费工具来帮助您创建移动网站。看看这个[列表](http://mashable.com/2010/12/16/create-mobile-site-tools/)。我相信还有更多。如果您不想花一分钱，并且打算获得一些编程经验，那么您将需要一些 HTML5 和 CSS 知识。

如果您计划一些大而奇特的想法，请查看[jQuery Mobile](http://jquerymobile.com/)或[Sencha Touch](http://sencha.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:16:16.297

您是否在使用诸如 Wordpress Joomla 或 Drupal 之类的内容管理系统 (CMS)？如果是这样，请查找去年创建的响应式模板。某些 CMS 的另一个选项是在检测到移动设备时呈现不同模板的插件/插件。

如果您不使用 CMS，则需要做更多的工作，那里有很多响应式框架，其中两个是[Bootstrap](http://twitter.github.com/bootstrap/)和[Zurb Foundation](http://foundation.zurb.com)。

# android - 如何在 GAE 上创建和仅使用没有客户端的 SOAP 服务器？

> ID：13846817
> 
> 赞同：1
> 
> 时间：2012-12-12T19:04:59.070
> 
> 标签：android, google-app-engine

首先，对不起我糟糕的英语。我找到了这篇文章并关注它。 [https://developers.google.com/appengine/articles/soap?hl=vi](https://developers.google.com/appengine/articles/soap?hl=vi)

它奏效了。现在我只想创建这样的服务器以在其他客户端中使用。可以吗？例如，当我将 HelloSOAPServerServlet 部署到 abc@appspot.com 并且当我想使用我的服务时，我只需将此 URL：abc@appspot.com/hellosoapserver?name=SOAP&arriving=true 粘贴到浏览器。我怎么能做这样的事情？因为我希望我的客户使用此服务的是 Andoird 电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:15:30.833

`abc@appspot.com`是一个电子邮件地址。您不能将 GAE 代码部署到它。

创建[GAE 应用程序](https://appengine.google.com)时，您必须选择一个唯一的应用程序名称，例如`mysoap`. 您的应用程序的 url 将是`http://mysoap.appspot.com/`.

[将代码上传](https://developers.google.com/appengine/docs/java/gettingstarted/uploading)到它后，您可以在以下位置访问您的 SOAP`http://mysoap.appspot.com/hellosoapserver?name=SOAP&arriving=true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:21:56.477

你在那个例子中得到了它。

您在以下位置创建了 SOAP Web 服务：

**在 Google App Engine 上构建 SOAP 服务器**

然后您创建了一个从 Servlet 使用它的客户端：

**使用 JAX-WS 在 Google App Engine 上构建 SOAP 客户端**

现在您需要从您的 Android 应用程序中使用正确的参数值对该 URL 进行 HTTP 客户端调用。

使用[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)提供的示例和 url 提供了您的示例

```
 URL url = new URL(" http://greeter-client.appspot.com/hellosoapclient?name=SOAP&arriving=true");
   HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
   try {
     InputStream in = new BufferedInputStream(urlConnection.getInputStream());
     readStream(in);
    finally {
     urlConnection.disconnect();
   } 
```

在**readStream**中，您可以从 GAE 托管的服务中读取响应

readStream 可以是这样的：

```
private static String readStream(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

# mobile-safari - 如何指定可下载文件的内容类型

> ID：13846820
> 
> 赞同：2
> 
> 时间：2012-12-12T19:05:08.177
> 
> 标签：mobile-safari, mime-types, passbook

这个[SO 答案](https://stackoverflow.com/a/13489914/1015071)适用于我，但我不知道如何“将内容类型更改为 application/vnd.apple.pkpass”

目前，指向我的 pkpass 的直接链接会触发下载，我不知道在哪里设置内容类型。

我已要求我的托管服务提供商确认“application/vnd.apple.pkpass”是受支持的 MIME 类型

我试过了

当从 iOS 6 或 Mac OS 10.8 单击链接时，我该怎么做才能使文件被识别为“application/vnd.apple.pkpass”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:11:25.817

您需要更改 Web 服务器的配置才能执行此操作。如何执行此操作取决于您使用的 Web 服务器。如果您有一家托管公司为您管理您网站的服务器，您可能需要请他们这样做或告诉您在哪里可以。

许多托管公司使用 Apache 作为 Web 服务器。如果是这样，您可以在公共 HTML 目录中创建一个 .htaccess 文件，并将其放入其中：

```
AddType application/vnd.apple.pkpass .pkpass 
```

这将使以“.pkpass”结尾的任何文件都以该内容类型下载。

这假设您让客户端下载一个静态文件。如果你动态生成这个文件，你根本不需要弄乱服务器，只需要发送一个标题。这取决于您使用的脚本语言，例如在 PHP 中您会这样做：

```
header("Content-Type: application/vnd.apple.pkpass"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T17:08:09.153

如果您正在动态生成通行证，您可能会发现以下内容有助于确保每次下载新的 .pkpass，并按照 Apple 的建议使用最后修改的标头提供文件。

用 PHP 编写，但很容易移植到其他语言。

```
// Assumes a .pkpass bundle named pass.pkpass in the same directory.

//Prevent caching
header("Pragma: no-cache");
header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0");

// Set MIME type, encoding and force download
header("Content-type: application/vnd.apple.pkpass; charset=UTF-8");
header('Content-Transfer-Encoding: binary');
header('Content-Disposition:attachment; filename="pass.pkpass"');

// Provide a content-length header based on the file size
$filesize = filesize('pass.pkpass');
if ($filesize)
  header("Content-Length: ". $filesize);

// Set a last-modified header (used by the device in update requests)
date_default_timezone_set("UTC");
header('Last-Modified: ' . date("D, d M Y H:i:s", time())) . ' GMT');

// Clear anything that may be in the output buffer and send the bundle contents
flush();
readfile('pass.pkpass');

// Do any clean up required

exit(); 
```

# json - 淘汰视图模型，一个大的还是多个？

> ID：13846824
> 
> 赞同：2
> 
> 时间：2012-12-12T19:05:29.997
> 
> 标签：json, mvvm, binding, knockout.js, viewmodel

我正在处理的项目是使用 MVVM 作为设计模式开发的单页 Web 应用程序。

除了对整个页面的第一个请求之外，其他所有事务都是基于 JSON 的，每个 JSON 都使用 Knockout 在表示级别绑定。

目前我们正在使用单个 Knockout-viewModel 开发整个应用程序，每个 JSON 都在 viewModel 中被解析并绑定到表示级别。

现在，考虑到 viewModel 目前有多大，我想知道将整个事物拆分为不同（较小）的 viewModel 是否是一种好习惯，这些 viewModel 专门绑定到页面中的单个元素（[如本文中所述](http://blog.yojimbocorp.com/2012/02/14/multiple-view-models-with-knockout/)），使得大量使用 Knockout 的映射插件来生成空结构（并刷新数据）。

如果这不是最佳实践，您建议如何管理 JSON 绑定？目前我们`$.jsonparse()`用来获取一个对象，然后我们将不同的数据推送到一些可观察的数组中。但我不认为这是解决这个问题的最佳方法。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:21:48.510

我非常喜欢在许多较小的模块中分散复杂性，而不是一个具有所有复杂性的单一模块。

我倾向于拥有多个视图模型并使用[Knockout.Postbox](https://github.com/rniemeyer/knockout-postbox)库在它们之间进行通信。

# c# - 如何优化图像比较例程执行时间

> ID：13846831
> 
> 赞同：0
> 
> 时间：2012-12-12T19:05:56.693
> 
> 标签：c#, image, comparison

我只是对我的桌面进行了两次截图，几乎没有什么变化，并使用 win32 api 以编程方式比较两个图像。我的图像扩展名是 jpg，图像高度和宽度都是：- 高度：-768 宽度：- 1366。我使用秒表类只是为了查看我的例行程序花费了多少时间来获取差异图像并将其保存到桌面。我发现它需要 47 毫秒。有什么办法可以减少例行程序所花费的时间。这是我的常规代码。请查看我的例程并检查如何减少此例程所花费的时间。谢谢

```
 private void button1_Click(object sender, EventArgs e)
    {
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();

        Bitmap firstImg = new Bitmap(@"C:\Users\TRIDIP\Desktop\pic1.jpg");
        Bitmap secondImg = new Bitmap(@"C:\Users\TRIDIP\Desktop\pic2.jpg");

        Rectangle bounds = GetBoundingBoxForChanges(firstImg, secondImg);

        if (bounds == Rectangle.Empty)
        {
    return;
        }

        Bitmap diff = new Bitmap(bounds.Width, bounds.Height);
        Graphics g = Graphics.FromImage(diff);
        g.DrawImage(secondImg, 0, 0, bounds, GraphicsUnit.Pixel);
        g.Dispose();

        stopwatch.Stop();

        string strmm = string.Format("Time elapsed {0} {1} {2} {3}",  stopwatch.Elapsed.Hours.ToString(), stopwatch.Elapsed.Minutes.ToString(), stopwatch.Elapsed.Seconds.ToString(), stopwatch.Elapsed.Milliseconds.ToString());
        MessageBox.Show(strmm);
    }

    private Rectangle GetBoundingBoxForChanges(Bitmap _prevBitmap, Bitmap _newBitmap)
    {
        // The search algorithm starts by looking
        //    for the top and left bounds. The search
        //    starts in the upper-left corner and scans
        //    left to right and then top to bottom. It uses
        //    an adaptive approach on the pixels it
        //    searches. Another pass is looks for the
        //    lower and right bounds. The search starts
        //    in the lower-right corner and scans right
        //    to left and then bottom to top. Again, an
        //    adaptive approach on the search area is used.
        //

        // Note: The GetPixel member of the Bitmap class
        //    is too slow for this purpose. This is a good
        //    case of using unsafe code to access pointers
        //    to increase the speed.
        //

        // Validate the images are the same shape and type.
        //
        if (_prevBitmap.Width != _newBitmap.Width ||
            _prevBitmap.Height != _newBitmap.Height ||
            _prevBitmap.PixelFormat != _newBitmap.PixelFormat)
        {
            // Not the same shape...can't do the search.
            //
            return Rectangle.Empty;
        }

        // Init the search parameters.
        //
        int width = _newBitmap.Width;
        int height = _newBitmap.Height;
        int left = width;
        int right = 0;
        int top = height;
        int bottom = 0;

        BitmapData bmNewData = null;
        BitmapData bmPrevData = null;
        try
        {
            // Lock the bits into memory.
            //
            bmNewData = _newBitmap.LockBits(new Rectangle(0, 0, _newBitmap.Width, _newBitmap.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
            bmPrevData = _prevBitmap.LockBits(new Rectangle(0, 0, _prevBitmap.Width, _prevBitmap.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

            // The images are ARGB (4 bytes)
            //
            int numBytesPerPixel = 4;

            // Get the number of integers (4 bytes) in each row
            //    of the image.
            //
            int strideNew = bmNewData.Stride / numBytesPerPixel;
            int stridePrev = bmPrevData.Stride / numBytesPerPixel;

            // Get a pointer to the first pixel.
            //
            // Note: Another speed up implemented is that I don't
            //    need the ARGB elements. I am only trying to detect
            //    change. So this algorithm reads the 4 bytes as an
            //    integer and compares the two numbers.
            //
            System.IntPtr scanNew0 = bmNewData.Scan0;
            System.IntPtr scanPrev0 = bmPrevData.Scan0;

            // Enter the unsafe code.
            //
            unsafe
            {
                // Cast the safe pointers into unsafe pointers.
                //
                int* pNew = (int*)(void*)scanNew0;
                int* pPrev = (int*)(void*)scanPrev0;

                // First Pass - Find the left and top bounds
                //    of the minimum bounding rectangle. Adapt the
                //    number of pixels scanned from left to right so
                //    we only scan up to the current bound. We also
                //    initialize the bottom & right. This helps optimize
                //    the second pass.
                //
                // For all rows of pixels (top to bottom)
                //
                for (int y = 0; y < _newBitmap.Height; ++y)
                {
                    // For pixels up to the current bound (left to right)
                    //
                    for (int x = 0; x < left; ++x)
                    {
                        // Use pointer arithmetic to index the
                        //    next pixel in this row.
                        //
                        if ((pNew + x)[0] != (pPrev + x)[0])
                        {
                            // Found a change.
                            //
                            if (x < left)
                            {
                                left = x;
                            }
                            if (x > right)
                            {
                                right = x;
                            }
                            if (y < top)
                            {
                                top = y;
                            }
                            if (y > bottom)
                            {
                                bottom = y;
                            }
                        }
                    }

                    // Move the pointers to the next row.
                    //
                    pNew += strideNew;
                    pPrev += stridePrev;
                }

                // If we did not find any changed pixels
                //    then no need to do a second pass.
                //
                if (left != width)
                {
                    // Second Pass - The first pass found at
                    //    least one different pixel and has set
                    //    the left & top bounds. In addition, the
                    //    right & bottom bounds have been initialized.
                    //    Adapt the number of pixels scanned from right
                    //    to left so we only scan up to the current bound.
                    //    In addition, there is no need to scan past
                    //    the top bound.
                    //

                    // Set the pointers to the first element of the
                    //    bottom row.
                    //
                    pNew = (int*)(void*)scanNew0;
                    pPrev = (int*)(void*)scanPrev0;
                    pNew += (_newBitmap.Height - 1) * strideNew;
                    pPrev += (_prevBitmap.Height - 1) * stridePrev;

                    // For each row (bottom to top)
                    //
                    for (int y = _newBitmap.Height - 1; y > top; y--)
                    {
                        // For each column (right to left)
                        //
                        for (int x = _newBitmap.Width - 1; x > right; x--)
                        {
                            // Use pointer arithmetic to index the
                            //    next pixel in this row.
                            //
                            if ((pNew + x)[0] != (pPrev + x)[0])
                            {
                                // Found a change.
                                //
                                if (x > right)
                                {
                                    right = x;
                                }
                                if (y > bottom)
                                {
                                    bottom = y;
                                }
                            }
                        }

                        // Move up one row.
                        //
                        pNew -= strideNew;
                        pPrev -= stridePrev;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            int xxx = 0;
        }
        finally
        {
            // Unlock the bits of the image.
            //
            if (bmNewData != null)
            {
                _newBitmap.UnlockBits(bmNewData);
            }
            if (bmPrevData != null)
            {
                _prevBitmap.UnlockBits(bmPrevData);
            }
        }

        // Validate we found a bounding box. If not
        //    return an empty rectangle.
        //
        int diffImgWidth = right - left + 1;
        int diffImgHeight = bottom - top + 1;
        if (diffImgHeight < 0 || diffImgWidth < 0)
        {
            // Nothing changed
            return Rectangle.Empty;
        }

        // Return the bounding box.
        //
        return new Rectangle(left, top, diffImgWidth, diffImgHeight);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:32:00.597

首先，我建议通过代码计时数百/数千次以确定平均速度 - 单次通过绝不是计时代码的好方法。此外，您正在从磁盘加载两个大图像，这很容易比整个 diff 操作花费更长的时间，因此您可能希望从时序测试中消除加载过程（因为无论如何您都无法优化该代码）。

通过查找顶部/左侧然后底部/右侧，您已经开始走上正确的轨道。但也许你可以做得更好一点。您需要寻找早退和不必要的工作。例如，为什么第一个循环跟踪上/左/下/右？在您遇到第一个差异之前，检查是否需要更新底部是没有意义的。一旦找到顶部，就没有必要检查是否需要更新它。因此，请考虑将循环拆分，以便在循环中更新更少的状态（但不增加您考虑的像素数量）

然后你必须开始减少每像素的开销并利用你对处理器/总线/内存架构的了解——例如，如果你有一个 64 位处理器，一次读取 32 位很可能比一次读取 64 位 - 所以使用 longs (Int64) 来比较*对*每次迭代的像素数，而不是只有一个。这将更好地利用处理器的寄存器宽度并将循环的迭代次数减半（将与 x 值相加的次数减半，以及再次绕过循环的分支数）。（注意：您必须小心宽度为奇数的图像，如果您发现一对不同的像素，则需要检查该对中的每个像素以确定差异的确切位置）。根据您的处理器/总线架构，您可能会使用更广泛的数据类型获得更多收益。

接下来，您可以查看缓存一致性是否有帮助。在您的第二个（底部/右侧）循环中，您正在反向迭代 X 值。根据您的处理器架构，这可能比向前遍历它们要慢得多 - 因此，通过向前搜索每条扫描线，您平均可以获得更好的时间。

（注意：以上可能不是做到这一点的“最佳方式”，并且可能有硬件加速技巧可以使处理器更快，但希望它能给你一些关于懒惰如何帮助你的想法走得更快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:18:48.347

这并不是这个问题的真正答案，但也许这会有所帮助。

首先，我认为您将大部分时间都花在了在屏幕上绘制图像而不是比较图像上。尝试在没有平局的情况下测量时间，这通常是一项繁重的操作。

其次，在时间测量之前运行该方法一次（或两次）是个好主意，因为第一次运行代码可能需要更长的时间才能运行，更好的是运行 1000 次并将总时间乘以 1000 得到平均估计。

最后但并非最不重要的一点是，也许您可​​以跳过几个像素并检查每个第二个像素，但它仍然会给您带来良好的结果吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:29:58.120

在这样的代码中 x > right inside loop 可以被删除（我们在循环“x”中有相同的检查）

```
for (int x = _newBitmap.Width - 1; x > right; x--)
// Found a change.
//
if (x > right)
{
    right = x;
} 
```

但是尝试在优化之前重构代码。

# objective-c - Grand Central Dispatch：应用程序在分配实例成员时崩溃

> ID：13846834
> 
> 赞同：1
> 
> 时间：2012-12-12T19:06:07.560
> 
> 标签：objective-c, ios, grand-central-dispatch

首先，这一切都可以在不使用 GCD 的情况下工作，但我希望这发生在一个单独的线程中，所以尝试 GCD。我有一个登录屏幕，在按下登录按钮时我有以下操作：

```
- (void)login
{
    dispatch_queue_t buckyballLoginFetcherQ = dispatch_queue_create("Login Queue", NULL);
    dispatch_async(buckyballLoginFetcherQ, ^
    {
        NSDictionary *resultDictionary = [MyService login:self.name.text password:self.password.text];
        self.userDetails = [resultDictionary valueForKey:USER_DETAILS_ATTRIBUTE];
        [self performSegueWithIdentifier:@"Login" sender:self];
    });
} 
```

在上面调用的 MyService 方法中：

```
+ (NSDictionary *)executeRequest:(NSDictionary *)requestDictionary
{
    // Prepare the URL request and do the following
    NSData *results = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&urlRequestError];

    // Process results
    ...
} 
```

现在崩溃的位：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"Login"])
{
    MyDestinationTableViewController *myDestinationTableViewController = nil;
    UITabBarController *tbc = (UITabBarController *)[segue destinationViewController];
    for (UIViewController *vc in [tbc viewControllers])
    {
        if ([vc isKindOfClass:[UINavigationController class]])
        { // in our case all view controlers are navigation controllers :-)
            UINavigationController *nc = (UINavigationController *)vc;
            if ([[[nc viewControllers] lastObject] isKindOfClass:[BuckyballsTableViewController class]])
            {
                myDestinationTableViewController = [[nc viewControllers] lastObject];

                /**************CRASH LINE************/
                buckyballsTableViewController.userDetails = self.userDetails;
            }
        }
    }
} 
```

再次没有 GCD 它可以工作，但它会支撑屏幕，所以我想异步执行它。是导致问题的实例成员吗？或者我需要以不同的方式使用它还是用它做更多的事情？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:08:37.013

只有主线程可以操作 UI，因此使用此代码片段在主线程上调用这些位：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self performSegueWithIdentifier:@"Login" sender:self];
}); 
```

# jquery - 有没有办法在 $.post 数据参数中一起使用查询字符串和对象？

> ID：13846835
> 
> 赞同：1
> 
> 时间：2012-12-12T19:06:07.287
> 
> 标签：jquery, jquery-post

我正在使用 $.post 将数据发送到服务器。我要发送 4 个值，两个来自表单，两个是我在函数中编写的：

```
 var desc = $('textarea[name="image_description"]').fieldSerialize();
    var album = $('select[name="album"]').fieldSerialize();
```

而另外两个我只是放入一个对象

```
{a:"something", b:"something else"}
```

我知道我可以获取表单元素的值并将它们添加到对象中，但我想知道是否有一种简单的方法可以将这两种类型（即查询字符串和对象）组合到数据参数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:00:51.497

.serialize() 返回字符串，这意味着您可以从函数中附加附加值。

```
var data = $("#yourForm").serialize() + "&a=something&b=else"; 
```

我认为解决您的问题很容易且足够，但如果您需要更特殊的方法来解决问题，请查看[http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)。

所以你可以做类似的事情

```
var myObject = {
 a: "something",
 b: "else"
};

var moreValues = $.param(myObject);

var data = $("#yourForm").serialize() + "&" + moreValues; 
```

# java - 在同一个模拟上使用多个 ArgumentMatchers

> ID：13846837
> 
> 赞同：19
> 
> 时间：2012-12-12T19:06:16.390
> 
> 标签：java, mockito

我正在尝试在 Mock 上使用 Mockito 来执行此操作：
当 Mock.someMethod(..) 用 argument1 调用时 --> return result1
当 Mock.someMethod(..) 用 argument2 调用时 --> return result2
当 Mock.someMethod (..) 使用参数 3 调用 --> 返回结果 3

```
 when(mock.method(Matchers.argThat(new MyMatcher1() {

        @Override
        public boolean matches(Object arg0) {
                   // comparision logic
        }
    }))).thenReturn(result1);

    when(mock.method(Matchers.argThat(new MyMatcher2() {

        @Override
        public boolean matches(Object arg0) {
                   // comparision logic
        }
    }))).thenReturn(result2);

    when(mock.method(Matchers.argThat(new MyMatcher3() {

        @Override
        public boolean matches(Object arg0) {
                   // comparision logic
        }
    }))).thenReturn(result3); 
```

但是 Mockito 正确地存根第一个，但是在第二个上它抛出 NullPointer 异常，因为它出于某种原因尝试使用 null agrument 运行 Matcher。我不确定它是否受支持。

如果这不是正确的方法，如何使用 Mockito 来实现？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-13T02:19:45.730

而不是写

```
when(mock.method(Matchers.argThat(new MyMatcher1() {
    @Override
    public boolean matches(Object arg0) {
           // comparison logic
    }
}))).thenReturn(result1); 
```

试试这个。

```
doReturn(result1).when(mock).method(Matchers.argThat(new MyMatcher1() {

    @Override
    public boolean matches(Object arg0) {
               // comparison logic
    }
})); 
```

同样对于`result2`和`result3`。

这在[http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#12](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#12)中有描述，但在我看来，文档并不清楚这个结构实际上是需要的。案子。我将与 Mockito 团队的其他成员讨论如何改进此处的文档。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:57:10.847

根据经验，如果测试失败，您应该能够查明被测单元的问题。避免专门为一项测试编写自定义匹配器。如果一个方法需要返回多个值，通常只需通过按测试预测的顺序返回值来简单地存根该方法就足够了。

例如

```
when(mock.method(any(Object.class))).thenReturn(result1, result2, result3); 
```

这将在第一次调用时返回结果 1，在第二次调用时返回 result2，依此类推。

显然在某些情况下这是不够的，但通常情况下，越简单的测试越好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T22:27:21.017

通过在自定义 ArgumentMatcher 中进行空检查，我现在能够解决这个问题。它起作用了，因为 NPE 仅在 Mockito 调用 when() 语句时才在启动期间。此时它甚至不应该调用 ArgumentMatcher.matches() ！感觉就像 Mockito 中的一个错误。

# regex - 使用正则表达式在perl中删除最多_？

> ID：13846838
> 
> 赞同：2
> 
> 时间：2012-12-12T19:06:21.353
> 
> 标签：regex, perl

我将如何在 perl 中删除“_”之前的所有字符？因此，如果我有一个字符串“124312412_hithere”，它会将字符串替换为“hithere”。我想有一种非常简单的方法可以使用正则表达式来做到这一点，但我还是新手，所以我需要帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:26:40.413

删除直到并包括 " `_`" 的所有字符：

```
s/^[^_]*_//; 
```

删除 " `_`" 之前的所有字符：

```
s/^[^_]*(?=_)//; 
```

删除 " `_`" 之前的所有字符（假设存在 " `_`"）：

```
s/^[^_]*//; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T19:10:14.260

这比它需要的要冗长一些，但对于您了解正在发生的事情可能更有价值：

```
my $astring = "124312412_hithere";
my $find = "^[^_]*_";
my $replace = "_";

$astring  =~ s/$find/$replace/;

print $astring; 
```

此外，您的问题中存在一些相互矛盾的要求。如果您只想`hithere`（没有前导`_`），请将其更改为：

```
$astring  =~ s/$find//; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T19:33:05.323

我知道这与所要求的略有不同，但在这种情况下（您知道要查找的字符存在于字符串中）我更喜欢使用`split`：

```
$str = '124312412_hithere';
$str = (split (/_/, $str, 2))[1]; 
```

在这里，我将字符串拆分为多个部分，使用“_”作为分隔符，但最多为 2 个部分。然后，我将第二部分分配回`$str`.

这个解决方案中仍然有一个正则表达式（/_/），但我认为这是一个比充满字符类、条件匹配等的正则表达式更容易阅读和理解的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:12:53.800

你可以试试这个： -

```
$_ = "124312412_hithere";
s/^[^_]*_//;
print $_;    # hithere 
```

请注意，这也将删除`_`（正如我从您的示例输出中推断的那样）。如果您想保留`_`（因为根据您的第一个陈述，您想要什么似乎值得怀疑），您可能需要使用`look-ahead`@ikegami 的答案。

另外，为了更清楚一点，正则表达式中的任何替换和匹配都默认应用于`$_`. 因此，您无需将其`$_`显式绑定。这是暗示的。

因此，`s/^[^_]*_//;`本质上与 - 相同`$_ =~ s/^[^_]*_//;`，但实际上并不需要后者。

# html - 我在这里需要什么 CSS 选择器？

> ID：13846841
> 
> 赞同：-3
> 
> 时间：2012-12-12T19:06:36.167
> 
> 标签：html, css, wordpress, selector

我用 php 生成了这段代码：

```
<li class="current"><li><a href="#">Page1</a></li></li>
<li><li><a href="#">Page2</a></li></li>
<li><li><a href="#">Page3</a></li></li>
<li><li><a href="#">Page4</a></li></li> 
```

我想添加一个 css 属性来标记`a`里面的 class `current`。

我已经尝试过`.li + li + a {property:attribute}`等...

![在此处输入图像描述](../Images/12d64d4d5dfd09dac50b3bb9e5dcee16.png)

有什么建议么 ？

////////////////////// 编辑

好吧，伙计们……我们什么也没做。我试图简化代码。这是整个代码（由wordpress生成）：

[http://pastebin.com/GJ3zXd93](http://pastebin.com/GJ3zXd93)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:10:42.613

您可以使用：

```
li.current li a 
```

但很可能双重列表项是一个错误，因此您可能希望使用它来代替：

```
li.current a 
```

另外，作为旁注，“。” 在您编写的选择器中试图查找具有“li”类的元素，而不是列表项元素。

随着您问题的最新更新：

我想我知道这里发生了什么。您可能有一个为您生成菜单的小部件。对小部件的调用`ul`位于 PHP 中的 a 中。小部件在`div`. 您可能还使用小部件调用的参数将每个菜单项包装在`li`. 这会给你你所拥有的结构：

```
<ul>
    <div>
        <ul>
            <li><li></li></li>
        </ul>
    </div>
</ul> 
```

要解决此问题，请找到您调用小部件的位置，然后移除`ul`包裹在它周围的小部件。然后从小部件调用中删除 before 和 after 参数。那应该给你这个结构：

```
<div>
    <ul>
        <li></li>
    </ul>
</div> 
```

然后，您应该可以更轻松地设置菜单样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:09:36.667

你要：

```
.current a {} 
```

（元素的后代的所有链接`.current`）。

# php - Magento 重新索引单个项目和相关组产品的正确方法

> ID：13846843
> 
> 赞同：24
> 
> 时间：2012-12-12T19:06:44.410
> 
> 标签：php, magento, model

**在对单个项目进行修改后重新索引单个项目的正确方法是什么。**

示例上下文：

我们公司依赖名为 Stone Edge 的第三方库存管理平台。我们还在多个店面销售商品，包括 Magento、亚马逊、Ebay 和 Buy.com

每 10 分钟一次，Stone Edge 将从站点下载所有订单，然后将库存调整发送回我们的 Magento 商店。这是通过向存储在我们的网络服务器上的 php 脚本发送一个简单的 http 请求来完成的，其中包含自上次更新以来库存更改的库存中每个项目的键值对数组。

在这些中的每一个上完成保存功能后，然后重新索引该项目，以免在更新时间和下一次站点范围重新索引之间反映 0 库存。

我在 Magento 论坛上找到了有关如何重新索引该项目的讨论：

```
$item->setForceReindexRequired(true);
Mage::getSingleton('index/indexer')->processEntityAction($item,Mage_CatalogInventory_Model_Stock_Item::ENTITY,Mage_Index_Model_Event::TYPE_SAVE); 
```

在这组说明之前，您会看到类似

```
$item = Mage::getModel('cataloginventory/stock_item')->loadByProduct($entityid);
$item->addQty($change);
$item->save(); 
```

但是，完成此操作后，问题变得明显。项目本身被重新索引，但如果它们是分组产品的成员，则不会更新组产品。

我需要解决一个明显的问题。解决这个问题的最佳方法是什么？

如果我碰巧想出一个答案，我会发布一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-21T01:12:44.883

请注意，与分组产品相关的生产集合将尝试加入价格指数。所以你需要运行价格指数，然后你会看到结果。要仅运行您可以运行的价格指数，请进入 magento 根文件夹，然后：

```
php shell/indexer.php --reindex catalog_product_price 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:03:37.347

First of all, thanks for the per-product reindex code. Was looking for that.

As for updating the parents, I would collect the parent ID's of products in an array when updating the simple products.

`$masterIds[] = Mage::getModel('catalog/product_type_configurable') ->getParentIdsByChild( $product->getId() )`

And when you're done with the simple products, just go over the masters and set them up to be reindexed as well with `->setForceReindexRequired(true)`

# silverlight - Silverlight 加载屏幕直接从 0% 变为 100%

> ID：13846848
> 
> 赞同：0
> 
> 时间：2012-12-12T19:07:11.290
> 
> 标签：silverlight, loading, progress

我有一个使用默认启动加载进度条的 silverlight 应用程序。它曾经从 0% 开始，逐渐向 100% 移动。前几天，我对xap文件做了一个小更新，从那以后，它加载了很长时间停留在0%，然后突然加载，即不再显示加载进度。我在几台计算机和浏览器上对其进行了测试，并且发生了同样的事情。我很担心，因为一些用户可能认为该应用程序已冻结。知道如何纠正这个问题吗？

编辑：我发现如果我将 xap 文件放在另一个 Web 服务器上，进度条就可以工作。

# php - 在 php 中加载 xml 文件 - 缺少访问权限？

> ID：13846850
> 
> 赞同：2
> 
> 时间：2012-12-12T19:07:18.030
> 
> 标签：php, xml, access-rights

我想使用以下代码从某个链接读取 XML 文件

```
$filename = 'http://XXXXX/rss.xml';
$xml = simplexml_load_file($filename); 
```

当我尝试时，我收到以下错误消息：

```
 wrapper is disabled in the server configuration by allow_url_fopen=0 

failed to open stream: no suitable wrapper could be found in 

I/O warning : failed to load external entity 
```

有什么问题？可能是服务器不支持 simplexml_load_file 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:16:18.297

当`allow_url_fopen`设置为 时`0`，您无权访问文件等 URL 对象。阅读[官方手册](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)了解更多信息。

您不能通过 .htaccess 更改此值，因此您必须`allow_url_fopen=1`在`php.ini`文件中进行设置。如果您使用的是共享主机或某种类型的主机，您应该联系主机技术支持并向他们描述您的问题。

# php - htaccess 重定向到另一个端口并将关键字附加到我的 uri

> ID：13846855
> 
> 赞同：0
> 
> 时间：2012-12-12T19:07:32.167
> 
> 标签：php, .htaccess

我在 ubuntu 上，我有清漆缓存，我搜索了很多问题，但找不到，

当我进入

```
http://127.0.0.1/soccer 
```

这个 uri 意味着需要 football.php，我的浏览器将我重定向到，

```
http://127.0.0.1:8000/soccer/?tab_id=soccer 
```

但是当我打字时，

```
http://127.0.0.1/soccer/ 
```

这个很好用，有趣的是，这个问题只发生在“soccer”和“save”关键字中，

这是我的 .htaccess

```
# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
# Or, compress certain file types by extension:
<files *.php>
SetOutputFilter DEFLATE
</files>
<files *.html>
SetOutputFilter DEFLATE
</files>
RewriteEngine On
Options -MultiViews
RewriteRule ^([//0-9a-zçöşığüA-ZÇÖŞİĞÜ-]+)$ tab.php?tab_id=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:25:10.017

这里发生的事情可能是 mod_dir 干扰了 URI 的处理。默认情况下，如果加载了 mod_dir，它会在 URI 的末尾添加一个尾部斜杠，当尾部斜杠丢失时，它认为映射到一个目录。当 URL/文件映射管道导致看起来像一个目录被文件处理（例如通过 mod_rewrite）时，这会导致问题，mod_dir 不知道，因为这发生在管道的下游，因此 mod_dir 将 URI 标记为重定向，然后在管道中进一步向下（或向上）发生其他事情，最终导致一个由多个模块处理的 URI，这些模块在不应该发生重定向时被重定向。

澄清一下，当我的意思是“*它将在 URI 的末尾添加一个斜杠*”时，我的意思是 mod_dir 302 将浏览器重定向到相同的 URI，但它以斜杠结尾。

你可以尝试几件事：

1.  通过包含一个`DirectorySlash Off`. 这使得 mod_dir 不会重定向浏览器，但[请注意关闭它还有其他后果](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)。您可以在 htaccess 文件中添加该指令。

2.  处理 mod_rewrite 中的尾部斜杠：

    ```
    RewriteEngine On
    Options -MultiViews

    RewriteRule ^([//0-9a-zçöşığüA-ZÇÖŞİĞÜ-]+)$ /$1/ [L,R=301]
    RewriteRule ^([//0-9a-zçöşığüA-ZÇÖŞİĞÜ-]+)/$ tab.php?tab_id=$1 [QSA,L] 
    ```

# jquery - 按钮上的 jQuery UI 1.9 工具提示在悬停时不起作用

> ID：13846862
> 
> 赞同：2
> 
> 时间：2012-12-12T19:07:55.180
> 
> 标签：jquery, jquery-ui, button, checkbox, tooltip

我正在使用 jQuery UI 1.9 来制作复选框按钮和工具提示。我的 HTML 很简单：

```
<input type="checkbox" id="jq-ui-button" value="Test" title="tooltipppp">
<label for="jq-ui-button">Label ok</label> 
```

然后我调用JS：

```
$("input[type='checkbox']").button();
$("input[type='checkbox']").tooltip(); 
```

[http://jsfiddle.net/rniestroj/JnApC/](http://jsfiddle.net/rniestroj/JnApC/)

问题是我在单击按钮/复选框时看到了工具提示，但我想在悬停时正常​​看到工具提示。这是 jQuery UI 1.9 中的错误还是我怎样才能达到我想要的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:14:57.740

我的理解是，当`.button()`应用于复选框时，它是被样式为按钮的关联标签。因此，可能需要将 应用于`.tooltip()`标签而不是复选框本身：

```
$("input[type='checkbox']").button();
$("label[for='jq-ui-button']").tooltip(); 
```

因此，也需要将关联`title`属性应用于标签：

```
<input type="checkbox" id="jq-ui-button" value="Test">
<label for="jq-ui-button" title="tooltipppp">Label ok</label> 
```

# android - 报警管理器和服务

> ID：13846863
> 
> 赞同：0
> 
> 时间：2012-12-12T19:08:04.070
> 
> 标签：android, alarmmanager

我有这段代码来自动启动我的服务，我认为当 alarmmanager 等待 60 秒时 AlarmON.class 运行，但不是。错误在哪里？

当我重新启动时，我看到了 toast：“服务已创建”和“服务已启动”。

谢谢您的帮助！

```
public class AutoStart extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("com.example.startatboot.UnUsedService");
    context.startService(serviceIntent);
    }
} 
```

和服务：

```
public class UnUsedService extends Service {
private PendingIntent pendingIntent;

@Override
public IBinder onBind(Intent intent) {
return null; 
}
@Override
public void onCreate() {
super.onCreate();
Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();

}

@Override
public void onStart(Intent intent, int startId) {
Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

Intent myIntent = new Intent(UnUsedService.this, AlarmON.class);
pendingIntent = PendingIntent.getService(UnUsedService.this, 0, myIntent, 0);

     AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

     Calendar calendar = Calendar.getInstance();
     calendar.setTimeInMillis(System.currentTimeMillis());
     calendar.add(Calendar.SECOND, 60);
     alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),    pendingIntent);

Toast.makeText(UnUsedService.this, "Start Alarm", Toast.LENGTH_LONG).show();
}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:21:03.463

你不需要打电话

```
calendar.setTimeInMillis(System.currentTimeMillis()); 
```

因为...

```
Calendar calendar = Calendar.getInstance(); does the same thing. 
```

这就像说给我当前时间，然后将当前时间设置为当前时间。

还可以尝试将代码从 onStart 移动到 onCreate，我已经看到 Android 不会为服务调用 onStart 的问题。

根据您的评论，我编辑了我的帖子。

您是否在清单中注册了 AlarmON 服务？例如在应用程序部分：

```
<service
    android:name=".AlarmON"
    android:label="@string/service_name" >
</service> 
```

# list - 将 show 与 Haskell 中的列表一起使用

> ID：13846870
> 
> 赞同：1
> 
> 时间：2012-12-12T19:08:34.273
> 
> 标签：list, haskell, types

我在`show`打印由列表列表给出的矩阵行时遇到了一些麻烦。

我有这个：

```
data Matrix = Mat Int [[Bit]] 
    deriving Eq 
```

其中参数`Int`是平方矩阵的阶并且`Bit`是 Int（0 或 1）。我需要我的代码能够执行以下操作，`Matrix`例如`Show`：

```
Main> Mat 3 [[0,0,1],[1,0,1],[1,1,1]
[0,0,1]
[1,0,1]
[0,0,1] 
```

到目前为止，我只有：

```
instance Show Matrix where
    show (Mat i (x:xs)) = (show x) ++ "\n" 
```

但这显然只返回第一个列表。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T19:10:23.473

简单的方法是`show`所有行，并将它们放在各自的行上：

```
instance Show Matrix where
    show (Mat _ rows) = unlines $ map show rows 
```

这样做的一个小缺点是它还在最后一行之后添加了一个换行符，为避免这种情况，您可以使用

```
instance Show Matrix where
    show (Mat _ rows) = intercalate "\n" $ map show rows 
```

（需要导入`Data.List`for `intercalate`）

# java - 什么时候应该将一组环绕动作组合到同一个方面，什么时候应该创建不同的方面？

> ID：13846873
> 
> 赞同：4
> 
> 时间：2012-12-12T19:08:41.390
> 
> 标签：java, aop

我目前正在学习**面向方面的编程**，当我尝试练习一点时，我意识到我在同一方面设计了不同的方法，我开始想知道这是否是最好的方法，或者我是否应该创建不同的方面针对不同的方法。我将尝试解释更多我所做的事情：我有 2 节课：

1.  **Calculator**类有多种方法，如加法、乘法、求反、重置等。
2.  **AOPmain**类。

我创建了另一个类（**ReturnMessage**类）作为**方面**，在这个类中我创建了 2 个方法 - 正如您在下面的代码中看到的那样）（一个应用于**Calculator**类中的一半方法，第二个应用于一个用于同一类中的其他一些方法 - **Calculator**）。我的问题是：在一个方面编写多个方法以与其他方法进行交互是一种好习惯，还是为它创建不同的方面会更好？这是我**方面**的代码：

```
@Aspect
public class ReturnMessage {
    //the joinPoint is used to get the method names and args.
    @Before("execution(public void *(double))")
    public void returningMessage( JoinPoint jp) {
        String method = jp.getSignature().getName();
        double value = (Double) jp.getArgs()[0];
        System.out.println("Going to "+method+" "+value);
    }
    @Before("@annotation(lala)")
    public void returnMsg2(MyAnnotation lala) { //<-- should I create another aspect to put this method?
        System.out.println(lala.msg());
    }
} 
```

我相信这不仅对我来说会很有趣，而且对所有开始使用 aop 编程的 stackoverflow 用户都会很有趣，所以我希望你们保持冷静。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:23:08.693

我会为我想要跟踪的每个横切关注点创建一个方面。可以，在您的方面有多个切入点/方法。

你可以有一个负责记录的方面，一个负责指标等...

当我与 AoP 一起测量性能时，我发现此链接非常有用。现有应用程序。

它讨论了现有代码库的方面，但它可以应用于任何情况。

[将 AspectJ 应用于现有代码库](http://www.rossenstoyanchev.org/write/prog/eclipse/eclipse5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:29:30.303

即使它们不是传统的对象，方面也是软件组件，应该尊重良好设计的原则——包括[高内聚](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#High_Cohesion)。我不是 AspectJ 专家，但我想说，在决定是否要向方面添加方法时，最重要的是要牢记高内聚力。

面向方面的编程已经有可能使执行路径更加模糊，所以我认为将每个方法分离到自己的方面并不是一个好主意。对于在同一系统中工作的未来开发人员来说，这将导致许多“老兄我的代码在哪里”的游戏。我认为在一个方面将方法组合在一起是一个更好的主意，这样更容易找到它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:06:21.420

An`aspect`也是 a`class`并且正如其他人所回答的那样，它应该包含相关的功能。套用 Cygnusx1 的话说，您不希望单个方面有日志记录和生成指标的建议。

根据他们所针对的切入点，可能需要进一步组织。例如，考虑`Logger`切面生成多个不同的日志，例如简洁和详细。

在包中创建这个方面是有意义的`com.company.project.logging`。但是您是否希望它引用代码中需要建议的*所有地方？*可能不是。

我要做的是创建一个*抽象方面*并扩展，其中包含具体的建议和抽象的命名切入点。然后，我将在实现这些抽象切入点的各种包等中`com.company.project.dataaccess`使用具体方面来扩展它。`com.company.project.purchase`

因此，我所做的是公开了一个执行日志记录的方面，并允许各个模块所有者定义何时应该触发这些。

# compiler-construction - 消除间接左递归

> ID：13846874
> 
> 赞同：1
> 
> 时间：2012-12-12T19:08:46.483
> 
> 标签：compiler-construction, grammar, context-free-grammar, javacc

我的大脑正在试图从生产规则中消除一些左递归。我正在使用 JavaCC 构建编译器，我需要使用以下 2 个生产规则：

```
expression := fragment ( ( + | - | * | / )  fragment )*

fragment := identifier | number | ( + | - ) fragment | expression 
```

但问题是片段与片段相关的表达式有关，即：间接左递归。

我环顾了互联网，每个人似乎都在使用这个算法，可以在[这里](http://www.cs.may.ie/staff/jpower/Courses/Previous/parsing/node30.html)找到。该站点没有解释直接左递归消除，您可以在[此处找到](http://web.cs.wpi.edu/~kal/PLT/PLT4.1.2.html)

我最终得到这样的规则：

```
void expression(): {}
{
  fragment()
  (
    (< PLUS >|< MINUS >|< DIVIDE >|< ASTERISKS >)
    fragment()
  )*
}

void k(): {}
{
  (
    ((< PLUS >|< MINUS >|< DIVIDE >|< ASTERISKS >)fragment())*k()
  | fragment()
  )
} 

void fragment(): {}
{
  (
    < ID >k()
  | number()k()
  | (< PLUS >|< MINUS >)fragment()k()
)
} 
```

它们是用用于 JavaCC 的代码编写的，因此希望您能理解它们。基本上，我引入了一个规则 K 来处理递归，但问题仍然存在，因为 K 的第一部分可以减少到零，因为它是 *​​（0 次或更多次），这让你剩下 K -> k()递归！！

我不知道从这里去哪里，并且掉了很多头发。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:42:34.553

我建议重写规则`expression`如下：

```
expression := ( identifier | number | ( + | - ) fragment ) ( ( + | - | * | / ) fragment )* 
```

实际上，这只是`fragment`原始定义中的替换，Kleene 运算符方便地吸收了一些术语。

当然，如果它应该反映原始规则，则需要适应通过解析创建的任何结构。

# jquery - 我在我的网站上使用 joomla，但加载速度太慢，我不知道为什么，请谁能帮助我

> ID：13846879
> 
> 赞同：0
> 
> 时间：2012-12-12T19:09:01.723
> 
> 标签：jquery

我的网站是[http://www.seoitc.com](http://www.seoitc.com)我使用的是 joomla 2.5，强大的服务器，但是我的网站在主页上总是加载太长，我尝试了优化的 html + 图片，但还是很慢，我不知道为什么，谁能帮忙请问我？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:24:00.793

您的网站如此缓慢的原因是由于很多因素，这里没有深入探讨所有问题，这只是一些主要问题，如果您解决了这些问题应该会有所增加。

您的服务器托管在美国 IP 地址：98.129。***.***

所以我从美国的服务器和欧盟的服务器上运行了很多测试。

[http://www.webpagetest.org/result/121212_03_PKH/](http://www.webpagetest.org/result/121212_03_PKH/)

[http://www.webpagetest.org/result/121212_VJ_PKQ/](http://www.webpagetest.org/result/121212_VJ_PKQ/)

[http://www.webpagetest.org/result/121212_K2_PN1/](http://www.webpagetest.org/result/121212_K2_PN1/)

[http://www.webpagetest.org/result/121212_D5_PNH/](http://www.webpagetest.org/result/121212_D5_PNH/)

[http://www.webpagetest.org/result/121212_J2_PNP/](http://www.webpagetest.org/result/121212_J2_PNP/)

[http://www.webpagetest.org/result/121212_BN_PQF/](http://www.webpagetest.org/result/121212_BN_PQF/)

**主机** 您使用的主机非常慢，您应该立即更改，它有一个第一个字节问题（服务器确认有人第一次访问该站点所需的时间，也可以是DNS）

**Java-scripts** 你的网站有大量的 JavaScript，甚至没有使用很多 JavaScript，因为你是 Joomla，你可以使用 CUSTOM HTML 将 JavaScript 发布到模块中，并将它们放在页脚中，此外，你应该仅在使用它们的页面上发布这些 java 脚本，例如，如果画廊仅用于一页而不是 FrontPage，则在 FrontPage 上执行画廊的 JavaScript 毫无意义。

排队; 尝试使用尽可能少的内联代码，以便将其缩小并压缩。这也适用于 CSS。

此外，您正在加载旧版本的 Jquery 和较新版本，您有效地加载了 2 个 Jquery LIB，您应该只使用一个。

**图像** 您需要优化图像并了解哪种格式的图像最好，例如，当 Jpeg 无损压缩图像更合适并节省更多 BW 时，您的滑块有 GIF，从而为您的用户提供更快的速度，也有似乎是在这些滑块上多次重新加载图像的问题，看起来像 Ajax 请求。

PNG 文件非常适合用于菜单、图标等，但您应该尝试使用 PNG sprite 来减少需要请求的文件数量。在 CSS 中查找 PNG Sprite。

**CSS** 目前你正在使用 5 个 CSS 文件，你应该尝试使这个 1 没有内联。

主要问题是您的虚拟主机，然后解决其他问题。

****附加说明：* *** *从 / 切换到 /en/ 似乎也有延迟，因此您可能需要调查用于进行重定向的代码/插件。*

# sql - SQL - 在 WHERE 中允许空值，但仍根据其他参数返回数据

> ID：13846881
> 
> 赞同：0
> 
> 时间：2012-12-12T19:09:14.447
> 
> 标签：sql, sql-server-2005, parameters

这对我来说有点难以正确解释，所以请多多包涵。

我正在尝试创建一个动态 SQL 查询，以允许用户为我为查询创建的各种参数输入数据。如果所有参数都已填写，我让它运行，但我不知道如何允许这些参数中的一个或任何一个允许空值并仍然根据其他参数返回数据。例如，使用下面的查询信息，如果我将 @Client 参数设置为 NULL，我希望为所有客户端返回相同的信息，而不是指定 1 个客户端。我希望除日期字段外的所有其他参数都具有类似的功能，因为这些始终是必需的。

我想允许空值的原因是这个查询的最终产品，我正在使用 VS 2010 中的 Telerik 编写一份报告，该报告将部署给我的公司使用。在 Telerik 中，您可以允许参数在运行时为空。目标是让这份报告在各种情况下都有用，基本上是为了让我不必在明年编写 100 个不同的查询，也让用户对他们需要的内容有更多的控制/访问权限。

这在 SQL 中可能吗？

这是我现在拥有的：

```
 DECLARE @Product int
    DECLARE @OrderDate1 datetime
    DECLARE @OrderDate2 datetime
    DECLARE @Status int
    DECLARE @Queue int
    DECLARE @Client int

    SET @Product = 86
    SET @OrderDate1 = '2012-09-01'
    SET @OrderDate2 = '2012-11-30'
    SET @Status = 80
    SET @Queue = 0
    SET @Client = 56156

    SELECT 
    CAST(oi.OrderID AS VARCHAR(MAX))+'.'+CAST(oi.OrderItemID AS VARCHAR(MAX)) AS OrderNumber
    ,CASE WHEN p.Abbreviation IS NULL THEN NULL
        ELSE p.Abbreviation END AS Product
    ,o.OrderDate
    ,v.ContactFirstName+' '+v.ContactLastName AS Vendor
    ,m.Description AS Status
    ,q.Description AS Queue

    FROM
    OrderItems oi
    JOIN Orders o (NOLOCK) ON o.OrderID = oi.OrderID
    JOIN Products p (NOLOCK) ON p.ProductID = oi.ProductID
    JOIN Vendors v (NOLOCK) ON v.VendorID = oi.VendorID
    JOIN Milestones m (NOLOCK) ON m.MilestoneID = oi.LastMilestoneID
    JOIN Queues q (NOLOCK) ON q.QueueID = oi.QueueID

    WHERE
    oi.ProductID in (@Product)
    and o.OrderDate BETWEEN @OrderDate1 and DATEADD(DD, 1, @OrderDate2)
    and oi.LastMilestoneID in (@Status)
    and oi.QueueID in (@Queue)
    and o.ClientID in (@Client) 
```

DDL：

```
 CREATE TABLE OrderItems
(
OrderID int,
OrderItemID int,
ProductID int,
VendorID int,
LastMilestoneID int,
QueueID int
)
insert into OrderItems
Values(1234567, 1, 86, 105111, 80, 0)
CREATE TABLE Orders
(
OrderID int,
ClientID int,
OrderDate datetime
)
insert into orders
Values(1234567, 56156, '2012-11-08')
CREATE TABLE Products
(
ProductID int,
Abbreviation Varchar(20),

)
insert into products
Values(86, 'Product1')
CREATE TABLE Vendors
(
VendorID int,
ContactFirstName Varchar(20),
ContactLastName Varchar(20)
)
insert into vendors
Values(105111, 'john', 'doe')
 CREATE TABLE Milestones
 (
MilestoneID int,
Description Varchar(20)
)
insert into milestones
values(80, 'Status 1')
CREATE TABLE Queues
(
QueueID int,
Description Varchar(20)
)
insert into Queues
values(0, 'Queue1') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:14:58.320

由于参数是单个值，我会使用`=`而不是`IN`. 一个非常简单的方法对于大型表效果不佳是：

```
WHERE (@Product IS NULL OR oi.ProductID = @Product)
  AND (@Status IS NULL OR oi.LastMilestoneID = @Status)
  ... etc 
```

您尝试执行的是 Erland Sommarskog 所称的“动态搜索条件”。阅读[本文](http://www.sommarskog.se/dyn-search-2005.html)，了解您的所有选项以及每个选项的优缺点。

# linux - FTP 文件上传 - 脚本 STUCK

> ID：13846882
> 
> 赞同：1
> 
> 时间：2012-12-12T19:09:15.820
> 
> 标签：linux, bash, unix, terminal

我有一个基本的 bash 脚本，用于复制文件并将其上传到我的 FTP：

```
cp -i /var/mobile/file.db /var
cd /var

HOST=MYFTPHOST
USER=USERNAME
PASS=PASSWORD

ftp -inv $HOST << EOF
  user $USER $PASS
  cd websitefolder
  put sms.db
  bye
EOF

rm -f file.db 
```

当我运行脚本时，它会将文件完美地保存到我的 FTP 中。但是我正在从不同的计算机上运行脚本，所以我希望脚本每次上传时都像这样将 file.db 上传到我的 FTP：

*   文件 1.db
*   文件2.db
*   文件 3.db
*   文件 4.db

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:37:28.020

您的问题有点不清楚，但如果我理解正确，您正在尝试按顺序命名数据库文件而不覆盖任何旧文件。您必须从 FTP 服务器获取文件列表，以便找出已上传的文件。

此代码将从服务器获取以“file”开头并以“.db”结尾的文件列表，计算它们，然后将“file.db”的名称更改为“fileXX.db”，其中“XX”是命名序列中的下一个数字（即 file1.db、file2.db、file3.db 等）。

我不确定“sms.db”来自哪里。我已在脚本中将其更改为“file.db”。

```
cp -i /var/mobile/file.db /var
cd /var

HOST=MYFTPHOST
USER=USERNAME
PASS=PASSWORD

ftp -inv $HOST << EOF
user $USER $PASS
cd websitefolder
LIST=$(ls | grep file*.db)
bye
EOF

FILECOUNT=0
for FILE in $LIST
do
    if [ -f $FILE ];
    then
        FILECOUNT+=1
done
FILECOUNT+=1
NEXTDB="file$FILECOUNT.db"
mv file.db $NEXTDB

ftp -inv $HOST << EOF    
put $NEXTDB
bye
EOF 
```

# wordpress - 条件标签在 wordpress 中无法正常工作

> ID：13846883
> 
> 赞同：0
> 
> 时间：2012-12-12T19:09:18.597
> 
> 标签：wordpress

我的网站上安装了小部件逻辑小部件。我在里面使用下面的代码

```
is_category(6) || is_page(array(1203, 1436, 1448)) 
```

但是小部件没有显示`page-id=1436, page-id=1448`

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:30:07.527

编辑：刚刚检查了`is_page()`WordPress 核心中的函数，没有：它确实查看了一个数组，该数组可以是一个 ID 数组（带有`in_array`）（参见 wp-includes/query.php，第 3374 行）。（在 WordPress 2.5 中添加了数组功能）。正如 Matanya 所说，您必须在循环之外使用它。

# java - JProgressBar 太快

> ID：13846887
> 
> 赞同：3
> 
> 时间：2012-12-12T19:09:34.883
> 
> 标签：java, swing, jprogressbar

我正在尝试添加进度条。一切正常，我没有收到任何错误。但是进度条从 0% 到 100% 甚至没有经过它之间的值（我的意思是它太快了，用户看不到进度条块填充）

```
pr = new JProgressBar();

            pr(0);
            pr(true);
..

public void iterate(){

        while (i<=20000){
            pr.setValue(i);
            i=i+1000;
            try{
                Thread.sleep(150);
            }catch (Exception e){
                e.printStackTrace();
            }
        }
    } 
```

单击 i 按钮时，我调用该`iterate()`方法，并且我希望它逐步更新进度条。相反，它会暂停一段时间，然后显示一个完整的进度条。

我该如何解决这个问题？

2.) 我不喜欢进度条标签的默认蓝色。我需要改变颜色。我试过 `pr.setForeground(Color.GRAY); pr.setBackground(Color.RED);`了，但是没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T19:14:06.110

问题是，您正在尝试在事件调度线程的上下文中更新进度。

这基本上意味着当您在循环中时，EDT 无法处理您正在发出的任何绘制请求。

您需要做的是如何将工作卸载到单独的线程并根据需要更新进度条。这样做的问题是，您永远不应该从除 EDT 之外的任何线程更新 UI。

但不要绝望，你有很多选择，最好是使用[Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

**更新了示例**

![在此处输入图像描述](../Images/90423e9b0050a5b11a4af470cbdf948e.png)

```
public class SwingWorkerProgress {

    public static void main(String[] args) {
        new SwingWorkerProgress();
    }

    public SwingWorkerProgress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JProgressBar pbProgress;
        private JButton start;

        public TestPane() {

            setBorder(new EmptyBorder(10, 10, 10, 10));
            pbProgress = new JProgressBar();
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(4, 4, 4, 4);
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(pbProgress, gbc);

            start = new JButton("Start");
            gbc.gridy++;
            add(start, gbc);

            start.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    start.setEnabled(false);
                    ProgressWorker pw = new ProgressWorker();
                    pw.addPropertyChangeListener(new PropertyChangeListener() {

                        @Override
                        public void propertyChange(PropertyChangeEvent evt) {
                            String name = evt.getPropertyName();
                            if (name.equals("progress")) {
                                int progress = (int) evt.getNewValue();
                                pbProgress.setValue(progress);
                                repaint();
                            } else if (name.equals("state")) {
                                SwingWorker.StateValue state = (SwingWorker.StateValue) evt.getNewValue();
                                switch (state) {
                                    case DONE:
                                        start.setEnabled(true);
                                        break;
                                }
                            }
                        }

                    });
                    pw.execute();
                }
            });

        }
    }

    public class ProgressWorker extends SwingWorker<Object, Object> {

        @Override
        protected Object doInBackground() throws Exception {
            int i = 0;
            int max = 2000;

            while (i < max) {
                i += 10;
                int progress = Math.round(((float)i / (float)max) * 100f);
                setProgress(progress);
                try {
                    Thread.sleep(25);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:14:33.210

你为什么要迭代`i=i+1000;`？请尝试这样的事情：

```
public void iterate(){

        int i = 0;

        while (i<=100){
            pr.setValue(i);
            i=i+10;
            try{
                Thread.sleep(150);
            }catch (Exception e){
                e.printStackTrace();
            }
        }
} 
```

此外，您应该使用一个`SwingWorker`或至少一个额外的`Thread`，但之前已经提到过。

# jquery - Jquery中的拖放列表

> ID：13846891
> 
> 赞同：1
> 
> 时间：2012-12-12T19:09:50.383
> 
> 标签：jquery

我使用基本的 HTML 和 jQuery 创建了这个列表。这只是对更大项目的测试，但它似乎不起作用。

我有一个 .css 页面、一个 html 页面和一个 .js 页面，它们应该可以一起运行。

这是HTML。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en" lang="en">
<head>
<title>JQuery Drag List Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="title" content="" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<link rel="stylesheet" type="text/css" href="/css/testingcolumns.css"></link>

</head>
<body>

<ul>
  <li class="item">Coffee</li>
  <li class="item">Tea</li>
  <li class="item">Milk</li>
</ul> 

<div id="list"></div>

<script type="text/javascript" src="js/jq/dragdrop.js"></script>
<script type="text/javascript" src="/js/jq/jq-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/jq/jq-ui-1.8.16.custom.min.js"></script>

</body>
</html> 
```

这是 jQuery

```
$(document).ready(function() {
    $('li').draggable({
        containment: 'document',
        revert: true,
        start: function() {
            contents = $(this).text();
        }
    });

    $('#list').droppable({
        hoverClass: 'border',
        accept: '.item',
        drop: function() {
            $('#list').append(contents + ' <br /> ');
        }
    });

});​ 
```

这是CSS

```
ul {
width: 150px;
padding: 0px;
list-style: none;
}

#list {

width: 120px;
height: 180px;
background-color: #0F9;
border: 1px solid #000;
overflow: auto;
 }

#list.border {
border-width: 2px;
} 
```

所有这些都应该可以工作，但是由于某种原因，当我使用 Dreamweaver 在浏览器中预览时，3 个列表元素显示为项目符号，而列表（在 Dreamweaver 中显示为绿框）根本不出现。项目符号不会在浏览器中拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:36:48.743

尝试切换您在页面中包含 JS 文件的顺序：

```
<script type="text/javascript" src="js/jq/dragdrop.js"></script>
<script type="text/javascript" src="/js/jq/jq-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/jq/jq-ui-1.8.16.custom.min.js"></script> 
```

至

```
<script type="text/javascript" src="/js/jq/jq-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/jq/jq-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript" src="js/jq/dragdrop.js"></script> 
```

我不知道 dragdrop.js 是什么，但如果它使用 jQuery 或 jQuery UI，那可能是你的问题。

# javascript - 如何使 Wrapper div 仅包含非溢出 div

> ID：13846894
> 
> 赞同：3
> 
> 时间：2012-12-12T19:10:20.787
> 
> 标签：javascript, css, html

我有一个包含内容的 div 的 div。外部 div 具有动态宽度（例如 80%）。内部 div 具有固定的宽度（例如 100 像素）。

问题是我只想显示这么多的内部 div，以便没有内部 div“溢出”/“被剪切”，如图 1 所示。

我还想将“自由”空间“分配”为均匀分布的内部 div 之间的边距，如图 2 所示。

我希望有人理解我的问题，并且知道如何使用 css 和尽可能少的 javascript 来实现这一点:)

![示例图像](../Images/b7439ac1bf06666fcec078da5b1994e2.png)

PS：如果很容易做到，是否可以让第一个和最后一个div有一个最大值。外边界的边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:36:31.057

在您使用更多信息编辑问题之前开始此操作，但我相信您所追求的缺失部分是`text-align: justify`“外部”。

```
.outer{
    background: red;
    width: 80%;
    overflow: hidden;
    height: 48px;
    text-align: justify;
}

.inner{
    background: blue;
    width: 100px;
    height: 40px;
    margin: 4px;
    display: inline-block;
}​ 
```

[这是一个小提琴。](http://jsfiddle.net/digthedoug/uS5BV/)

不完全确定你所说的 max-margin 是什么意思，但听起来这可以通过在容器的左侧和右侧给容器一个固定的填充来实现。

# javascript - JavaScript，如何每 x 秒更改 div 标签的背景

> ID：13846896
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:10:27.590
> 
> 标签：javascript, jquery, css, background-image

我正在尝试编写一些 JavaScript 代码来每 X 秒更改两个 div 标签的背景。这是我的代码：

HTML

```
<div id="bg_left"></div>
<div id="bg_right"></div> 
```

CSS body{ 高度：100%; }

```
#bg_left{
   height:100%;
   width:50%;
   left:0;
   position:fixed;
   background-position:left;
}
#bg_right{
    height:100%;
    width:50%;
    right:0;
    position:fixed;
    background-image:url(http://presotto.daterrawebdev.com/d/img/pp_hey_you_bg.png);
    background-position:right;
} 
```

JAVA脚本

```
 function carousel_bg(id) {
     var bgimgs = [  'pp_hey_you_bg.png', 'burningman_bg.png' ]; 
     var img1 = bgimgs[id];
     var img2 = bgimgs[id+1];
     var cnt = 2; 

     $('#bg_left').css("background-image", "url(http://presotto.daterrawebdev.com/d/img/"+img1+")");
     $('#bg_right').css("background-image", "url(http://presotto.daterrawebdev.com/d/img/"+img2+")");

     id = id + 1;
     if (id==cnt) id = 0;

     setTimeout("carousel_bg("+id+")", 10000); 
 }

 $(document).ready(function() {
        carousel_bg(0);     
 }); 
```

​ 背景图像应该是随机变化的，但它们甚至根本没有变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:11:37.620

好的，我在你的 jsFiddle 中看到了这个问题。因为您将字符串传递给`setTimeout()`该字符串，所以只会在顶级范围内进行评估。但是，您传递的函数名称不在顶级范围内（它位于 jsFiddle 的 onload 处理程序中）。所以，我改变了你的 JS 在 jsFiddle 中的定位方式，所以它现在处于顶级范围。我还修复了选择图像的逻辑，它现在可以在这里工作：http: [//jsfiddle.net/jfriend00/awVYP/](http://jsfiddle.net/jfriend00/awVYP/)

而且，这是一个清理后的版本，它不将字符串传递给`setTimeout()`（编写 javascript 的更好方法），它传递一个本地函数并使用闭包来跟踪当前索引：http: [//jsfiddle.net/jfriend00/ LVGNN/](http://jsfiddle.net/jfriend00/LVGNN/)

```
 function carousel_bg(id) {
        var bgimgs = [  'pp_hey_you_bg.png', 'burningman_bg.png' ]; // add images here..

        function next() {
            if (id >= bgimgs.length) {
                id = 0;
            }
            var img1 = bgimgs[id];
            id++;
            if (id >= bgimgs.length){
                id = 0;
            }
            var img2 = bgimgs[id];

            $('#bg_left').css("background-image", "url(http://presotto.daterrawebdev.com/d/img/"+img1+")");
            $('#bg_right').css("background-image", "url(http://presotto.daterrawebdev.com/d/img/"+img2+")");
            setTimeout(next, 1000);
        }
        next();
    }

    $(document).ready(function() {
            carousel_bg(0);     
    }); 
```

* * *

先前对 OP 代码的早期版本的评论：

```
$('#body') 
```

应该：

```
$('body') 
```

甚至更快：

```
$(document.body) 
```

此外，您的 jsFiddle 显示了一个奇怪的问题。你的 CSS 在 HTML 标签上有一个背景图片，但是你的 javascript 在 body 标签上设置了一个半透明的背景图片。这真的是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:01:34.967

为了测试，我在数组中添加了另一个图像，以便我们在排序中得到一些区别。

```
function carousel_bg(id) {
    var bgimgs = [  'http://presotto.daterrawebdev.com/d/img/pp_hey_you_bg.png', 'http://presotto.daterrawebdev.com/d/img/burningman_bg.png', 'http://gallery.orobouros.net/var/albums/2012/NewYorkComicCon2012/Legend-of-Korra/nycc_20121013_164625_0041.jpg?m=1354760251' ]; // add images here..
    var img1 = bgimgs[id+1];
    var img2 = bgimgs[id];
    var cnt = bgimgs.length; // change this number when adding images..

    $('#bg_left').css("background-image", "url("+img1+")");
    $('#bg_right').css("background-image", "url("+img2+")");

    id = id + 1;
    if (id== (cnt - 1) ) id = 0;

    setTimeout("carousel_bg("+id+")", 10000);
} 
```

这里有两个变化：

1.  对于您的图像总数，我正在动态检索数组中的图像总数，而不是手动检索（**bgimgs.length**）
2.  在重置 id 值的条件中，将总计数减去 1。由于 JS 具有从零开始的索引，因此不这样做会导致未定义的错误（3 项数组将在原始代码中吐出 4 的值最后一次迭代）。

虽然此代码确实循环通过您的数组，但它不是随机的。那是另一个话题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T16:22:49.103

对于那些不使用 JQuery 的人，只需执行以下操作：

```
document.body.style.backgroundImage="url(images/mybackgroundimage.jpg)"; 
```

# visual-studio - 从扩展中禁用 Visual Studio 的功能

> ID：13846900
> 
> 赞同：1
> 
> 时间：2012-12-12T19:10:46.897
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-extensions

我想知道是否可以从扩展中拦截或禁用不同的 Visual Studio 命令或功能？

例如，你能阻止用户访问 File -> Open 命令吗？我正在尝试开发一个有助于强制执行一些编码标准的扩展，作为其中的一部分，我想在用户尝试执行它们时禁用或拦截一些不同的事情。例如，可能会禁用编辑项目属性的功能或类似的功能，以阻止用户签入他们的本地更改并破坏构建或弄乱其他团队成员。

Extension API 中是否存在对此的挂钩，或者我们是否坚持使用旧的 Word 文档要求人们玩得好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:49:30.897

你可以，但在我提供细节之前，我确实想回应 Greg 的评论：你最好花时间制作一个非常棒的工具，开发人员可以运行它来捕捉“坏问题”，而不是玩打地鼠来禁用命令。禁用命令可能很危险，因为通常有多个命令可能会做同样的“坏”事情。此外，禁用可能会导致 VS 的其他部分不稳定。使用您的项目属性示例，编写一个在您的代码库中运行的工具，并查找“坏”的项目文件，并发出构建警告。每次您的开发人员进行构建时都运行此程序。这样他们仍然可以获得近乎实时的反馈，而不必确保他们安装了扩展。（另外，您可以将该工具检查到您的代码库中以确保每个人都同步）

也就是说，在这里实现[IVsRegisterPriorityCommandTarget](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsregisterprioritycommandtarget%28v=vs.110%29.aspx)可能是正确的选择。性能影响可能很大，因此您*需要*确保您的实现速度很快，否则您会减慢 VS。如果您从处理程序返回 E_NOTSUPPORTED，这将导致正常路由。返回 S_OK 但不转发将阻止路由发生。

# javascript - 手游中奖消息问题-提示框

> ID：13846901
> 
> 赞同：0
> 
> 时间：2012-12-12T19:10:51.637
> 
> 标签：javascript, cordova, mobile, tic-tac-toe

我为一个大学项目制作了一个简单的井字游戏，它使用 HTML 和 JavaScript 运行。在桌面上查看时可以正常工作，但在移动设备上会出现问题。在移动设备上，当您获胜时，最终的获胜棋子不会显示，但其他所有内容（如警报框）都会显示。

你可以在这里试试——http: [//stuffmadeby.me/test/tictactoe/——](http://stuffmadeby.me/test/tictactoe/)如果在移动智能手机上查看这个页面。

有没有什么办法解决这一问题？

奇怪的是它在桌面上的工作方式，而不是在移动设备上的工作方式，因为我想使用 PhoneGap 将其打包成一个简单的应用程序。

```
 $(document).ready(function(e) {
    $('#messages').hide();
    var currentPlayer=1;
    square=new Array(3)
    square[0]=new Array(3);
    square[1]=new Array(3);
    square[2]=new Array(3);

    var Ximg = $('<img />').attr('src','images/x.png');
    var Oimg = $('<img />').attr('src','images/o.png');

    samego=false;
    endgame=false;

    $('.square').click(function() {
        samego=false;
        input=$(this).attr('id');
        arrayindex=input.split("");
        x=arrayindex[0];
        y=arrayindex[1];
            if(square[x][y]=='X'||square[x][y]=='O') {
                $('#messages').html("That square has already been filled! try again.");
                samego=true;
            } else {
                currentPlayer==1 ? square[x][y]='X' : square[x][y]='O';
                currentPlayer==1 ? $('#'+input).html('<img src="images/x.png"/>') :
                $('#'+input).html('<img src="images/o.png"/>');
            }
            checkStatus();
    }); /* ends .square click function */

    function checkStatus() {
        if(
            square[0][0]=='X'&&square[0][1]=='X'&&square[0][2]=='X'||
            square[0][0]=='X'&&square[1][1]=='X'&&square[2][2]=='X'||
            square[1][0]=='X'&&square[1][1]=='X'&&square[1][2]=='X'||
            square[2][0]=='X'&&square[2][1]=='X'&&square[2][2]=='X'||
            square[0][1]=='X'&&square[1][1]=='X'&&square[2][1]=='X'||
            square[2][0]=='X'&&square[1][1]=='X'&&square[0][2]=='X'||
            square[0][2]=='X'&&square[1][2]=='X'&&square[2][2]=='X'||
            square[0][0]=='X'&&square[1][0]=='X'&&square[2][0]=='X'
    )
    {
        $('#messages').show().html("Player 1 wins!");
        alert("Player 1 wins! Click to reset!");
        reinitialise();
        endgame=true;
    }
        if(
            square[0][0]=='O'&&square[0][1]=='O'&&square[0][2]=='O'||
            square[0][0]=='O'&&square[1][1]=='O'&&square[2][2]=='O'||
            square[1][0]=='O'&&square[1][1]=='O'&&square[1][2]=='O'||
            square[2][0]=='O'&&square[2][1]=='O'&&square[2][2]=='O'||
            square[0][1]=='O'&&square[1][1]=='O'&&square[2][1]=='O'||
            square[2][0]=='O'&&square[1][1]=='O'&&square[0][2]=='O'||
            square[0][2]=='O'&&square[1][2]=='O'&&square[2][2]=='O'||
            square[0][0]=='O'&&square[1][0]=='O'&&square[2][0]=='O'
    )
    {
        $('#messages').html("Player 2 wins!");
        alert("Player 2 wins! Click to reset!");
        reinitialise();
        endgame=true;
    }

    var filled=0;
    for(x=0;x<3;x++) {
        for(y=0;y<3;y++) {
            if(square[x][y]=='X'||square[x][y]=='O') {
                filled++;
            }
        }
    } /* ends var filled */

    if(!samego&&!endgame) {
        currentPlayer==1 ? currentPlayer=2 : currentPlayer=1;
    } /* ends if */

    if(filled==9) {
        $('#messages').html("It's a draw!");
        alert("It's a draw! Click to reset!");
        reinitialise();
    } /* ends filled==9 */

    endgame=false;
    $('#player').html('Current Player = Player '+currentPlayer);

    } /* ends function check status */

    function reinitialise() {
        $('#messages').hide();
        $('#messages').html('');    
        square[0][0]=''; $('#00').html('');
        square[0][1]=''; $('#01').html('');
        square[0][2]=''; $('#02').html('');
        square[1][0]=''; $('#10').html('');
        square[1][1]=''; $('#11').html('');
        square[1][2]=''; $('#12').html('');
        square[2][0]=''; $('#20').html('');
        square[2][1]=''; $('#21').html('');
        square[2][2]=''; $('#22').html('');
        currentPlayer=1;
    } /* ends function reintialise */

}); /* ends whole function */ 
```

# jquery - 带空格的 jQuery

> ID：13846902
> 
> 赞同：2
> 
> 时间：2012-12-12T19:10:56.103
> 
> 标签：jquery, image, keypress, space

请看示例代码：

[**JSFIDDLE**](http://jsfiddle.net/Alidad/5Agu9/)

```
$(document).ready(function () {
    $('#preview').hide();
    $("#photo").click(update);
    $("#title").keypress(update);
});

function update() {
    $('#preview').slideDown('slow');
    var title = $("#title").val();
    var photo = $("#photo").val();
    $('#Displaytitle').html(title);
    $('#image').html('<img src="' + photo + '"/>');
}​ 
```

他们要做的是，当Select select图像删除菜单和有关图像的标题名称时，标题名称和图像显示在同一行（第一个标题和第二个图像）上。

我遇到的问题是，请播放慢速按键，如您所见，当您按下第一个键时，它不会显示在文本框中，但是如果您按下第二个键，它将显示您按下的第一个键的字母形式。

我想要的是标题名称和图像要放在一起，并且两者之间没有空格（标题名称和关键字）。

我怎样才能解决这个问题而不显示空间，我认为它来自按键事件，但不确定它是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:26:29.080

您需要使用 jQuery keyup 函数而不是 keypress 函数。[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:22:40.977

如果我理解正确的话，这一定是解决方案 [http://jsfiddle.net/5Agu9/12/](http://jsfiddle.net/5Agu9/12/)

```
$(document).ready(function(){
$('#preview').hide();    
$("#photo").click(update);
    $("#title").on('keyup keypress',update);
});

function update(){        

$('#preview').slideDown('slow');
var title = $("#title").val();
var photo = $("#photo").val();
$('#Displaytitle').html(title+'<img src="'+photo+'"/>');

} 
```

您使用了[keypress](http://api.jquery.com/keypress/ "按键")，但您需要使用[keyup](http://api.jquery.com/keyup/) 并合并您需要使用的标题和照片的值 +

# android - 从 android 应用程序中的 fql 查询中提取信息

> ID：13846911
> 
> 赞同：3
> 
> 时间：2012-12-12T19:11:40.300
> 
> 标签：android, facebook, facebook-fql

我正在尝试将我上传的视频的视频 ID 和其他信息存储在 android 中的不同字符串中。现在我已经创建了一个 fql 查询来获取视频详细信息。我正在使用 json 解析来提取这样的值-

```
String fqlQuery = "SELECT vid, owner, title, description,updated_time, created_time FROM    video WHERE owner=me()";
                    Bundle params = new Bundle();
                    params.putString("q", fqlQuery);
                    Session session = Session.getActiveSession();
                    Request request = new Request(session,"/fql",params,HttpMethod.GET,new Request.Callback()
                    {
                        public void onCompleted(Response response)
                        {
                            try
                            {
                                JSONObject json = Util.parseJson(response.toString());
                                JSONArray data = json.getJSONArray( "data" );
                                for ( int i = 0, size = data.length(); i < size; i++ )
                                {
                                    JSONObject getVideo = data.getJSONObject( i );
                                    userNameView.setText(getVideo.getString("vid"));

                                }

                            }
                            catch(Exception e){userNameView.setText(e.toString());}
                        }                  
                    }); 
                    Request.executeBatchAsync(request);                 
                }
            }); 
```

但它让我异常 -

> org.json.JSONException: {Response:responseCode:200,graphObject:GraphObject{graphObjectClass=GraphObject,state= {"data":[{"owner":...}]}}} 字符 25 处的未终止对象

这是我第一次使用 android、facebook sdk 以及 json 解析，所以我会非常感谢提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:15:44.957

```
 queryButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            String fqlQuery = "SELECT uid, name, pic_square, status FROM user WHERE uid IN " +
                  "(SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 25)";
            Bundle params = new Bundle();
            params.putString("q", fqlQuery);
            Session session = Session.getActiveSession();

            Request request = new Request(session,
                "/fql",                         
                params,                         
                HttpMethod.GET,                 
                new Request.Callback(){         

                    @SuppressWarnings("deprecation")
                    public void onCompleted(Response response) {

                            GraphObject graphObject = response.getGraphObject();

                            if (graphObject != null)
                            {
                                if (graphObject.getProperty("data") != null)
                                {
                                    try {
                                        String arry = graphObject.getProperty("data").toString();

                                        JSONArray jsonNArray = new JSONArray(arry);

                                        for (int i = 0; i < jsonNArray.length(); i++) {

                                            JSONObject jsonObject = jsonNArray.getJSONObject(i);

                                            String name = jsonObject.getString("name");
                                            String uid = jsonObject.getString("uid");

                                            String pic_square = jsonObject.getString("pic_square");
                                            String status = jsonObject.getString("status");

                                            Log.i("Entry", "uid: " + uid + ", name: " + name + ", pic_square: " + pic_square + ", status: " + status);
                                        }

                                    } catch (JSONException e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    }                                       
                                }
                            }

                    }                  
            }); 
            Request.executeBatchAsync(request);                 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:20:10.860

好吧，最后我在这里找到了问题，response.toString() 没有给出纯 JSONObject 字符串，所以我不得不从 response.toString() 的输出中获取子字符串，使它看起来像一个 JSONObject 字符串。

```
 int indexex=nthOccurrence(response.getGraphObject().toString(),'{',1);
       int index=response.getGraphObject().toString().length()-1;
       String edit=response.getGraphObject().toString().substring(indexex, index);
       JSONObject json = Util.parseJson(edit);
       JSONArray data = json.getJSONArray( "data" );
       for ( int i = 0, size = data.length(); i < size; i++ )
       {
          JSONObject getVideo = data.getJSONObject( i );
          userNameView.setText(getVideo.getString("vid"));              
       } 
```

我想这可能不是正确的方法，但这是我能想到的唯一方法。如果有人知道更好的方法，请回复。谢谢

# ruby-on-rails - Ruby：将表格数据格式化为 JSON

> ID：13846912
> 
> 赞同：0
> 
> 时间：2012-12-12T19:11:42.870
> 
> 标签：ruby-on-rails, ruby, json, chap-links-library

我正在尝试为开源项目的错误和更新制定时间表。我是红宝石的新手，但我逐渐获得了一些经验。

我创建了一个名为history_gems 的表，模型中包含以下代码：

```
class HistoricalGem < ActiveRecord::Base
  attr_accessible :build_date, :version
  belongs_to :ruby_gem, :foreign_key => :gem_id
end 
```

我正在使用一个 JS 插件（http://almende.github.com/chap-links-library/js/timeline/doc），它需要具有两个字段名称的对象（“开始”用于日期，“内容”用于title) 在 JSON Array 中使用 JS 显示时间线。

我相信我必须在控制器中做这样的事情，它定义了我的时间线方法来呈现 JSON：

```
def timelinem
@name = params[:id]
@rpm = AbcTable.find_by_name(@name)
respond_to do |format|
  format.json { render :json => @rpm.json_timelines }
   end
end 
```

然后我可能不得不在我的模型中定义一个“json_timelines”方法，可能是这样的：

```
def json_timelines(gems = [])
    dates = []
    gem_id.each { |p|
        gems << p
        dates << p.build_date(gems)
    end
   }
 end 
```

我只是从 RoR 开始，即使经过几个小时的指南、教程和调试，我也无法将这段代码放在一起。任何人都可以帮助我吗？我不认为我做得对。

顺便说一句，如果我忽略了一些明显的事情，请不要太苛刻，我只有 16 岁:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:40:58.207

只要返回可序列化为 JSON 的对象（例如Array[或](http://www.ruby-doc.org/core-1.9.3/Array.html)Hash [）](http://www.ruby-doc.org/core-1.9.3/Hash.html)`render :json => ...`，您的代码中的 就应该可以正常工作（但使用`HistoricalGem`而不是）。`AbcTable``json_timelines`

为您的方法定义尝试这样的事情：

```
def json_timelines(gems = [])
  gems.map do |g|
    {
      :content => g.title,
      :date    => g.build_date
    }
  end
end 
```

上面的代码片段假设您的“historical_gems”表有“title”和“build_date”列；如果没有，请调整代码以反映您实际希望在 JSON 中表示的字段。

# actionscript-3 - 错误 1046 和 1119

> ID：13846914
> 
> 赞同：0
> 
> 时间：2012-12-12T19:11:48.637
> 
> 标签：actionscript-3, class, import, package, mouseevent

您好，我有 2 个错误，我似乎无法解决。虽然看起来应该问题不大。

```
package  {

import flash.display.MovieClip; //line 3
import flash.events.MouseEvent;

public class video01 extends MovieClip {

    public function video01() {
        // constructor code
        import flash.events.MouseEvent;

        trace("movieclip 1 geladen");

        btn_terug.addEventListener(MouseEvent.CLICK.terug); //line 16

    }

    public function terug(evt:MouseEvent):void {
    trace("knop ingedrukt");

    }

} 
```

}

错误是：第 3 行 1046：找不到类型或不是编译时常量：btn_terug。第 16 行 1119：通过静态类型 String 的引用访问可能未定义的属性 terug。

有什么想法吗？

* * *

*编辑*

这是我的主要代码，它位于 .fla 的时间线上：

```
import fl.video.*;
import flash.events.MouseEvent;
import flash.display.MovieClip;

stop();

btn_1.addEventListener(MouseEvent.CLICK,speel1);
btn_2.addEventListener(MouseEvent.CLICK,speel2);
btn_3.addEventListener(MouseEvent.CLICK,speel3);
btn_4.addEventListener(MouseEvent.CLICK,speel4);
btn_5.addEventListener(MouseEvent.CLICK,speel5);
btn_6.addEventListener(MouseEvent.CLICK,speel6);
btn_7.addEventListener(MouseEvent.CLICK,speel7);
btn_8.addEventListener(MouseEvent.CLICK,speel8);
btn_9.addEventListener(MouseEvent.CLICK,speel9);

var mc_video01:MovieClip = new video01();
var mc_video02:MovieClip = new video02();
var mc_video03:MovieClip = new video03();
var mc_video04:MovieClip = new video04();
var mc_video05:MovieClip = new video05();
var mc_video06:MovieClip = new video06();
var mc_video07:MovieClip = new video07();
var mc_video08:MovieClip = new video08();
var mc_video09:MovieClip = new video09();

var filmAan = false;

function speel1(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video01);
    mc_video01.x=340; 
    mc_video01.y=227;
    mc_video01.width=1360;
    mc_video01.height=1060;

    filmAan = true;
}
}
function speel2(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video02);
    mc_video02.x=340; 
    mc_video02.y=227;
    mc_video02.width=1360;
    mc_video02.height=1060;

    filmAan = true;
}
}
function speel3(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video03);
    mc_video03.x=340; 
    mc_video03.y=227;
    mc_video03.width=1360;
    mc_video03.height=1060;

    filmAan = true;
}
}
function speel4(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video04);
    mc_video04.x=340; 
    mc_video04.y=227;
    mc_video04.width=1360;
    mc_video04.height=1060;

    filmAan = true;
}
}
function speel5(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video05);
    mc_video05.x=340; 
    mc_video05.y=227;
    mc_video05.width=1360;
    mc_video05.height=1060;

    filmAan = true;
}
}
function speel6(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video06);
    mc_video06.x=340; 
    mc_video06.y=227;
    mc_video06.width=1360;
    mc_video06.height=1060;

    filmAan = true;
}
}
function speel7(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video07);
    mc_video07.x=340; 
    mc_video07.y=227;
    mc_video07.width=1360;
    mc_video07.height=1060;

    filmAan = true;
}
}
function speel8(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video08);
    mc_video08.x=340; 
    mc_video08.y=227;
    mc_video08.width=1360;
    mc_video08.height=1060;

    filmAan = true;
}
}
function speel9(evtObj:MouseEvent):void {
trace("knop 1: video 1");
    if (filmAan == false) {

    addChild(mc_video09);
    mc_video09.x=340; 
    mc_video09.y=227;
    mc_video09.width=1360;
    mc_video09.height=1060;

    filmAan = true;
}
} 
```

主页有 9 个按钮，用于打开带有视频的影片剪辑，以及返回主页的按钮。每个影片剪辑都有一个名为 video01、video02 等的类。（如上所示）它的主 .fla 类的标题为“main”。

主页上的按钮起作用，并且都打开一个不同的影片剪辑（里面有按钮）。我想要做的是让 btn_terug 移除孩子。但我在第 3 行收到错误 1046。

希望这能澄清我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:58:47.593

唷，你在这个地方到处都是，大声笑..所以所有导入语句都在`package`......除了你有`import flash.event.MouseEvent`两次之外。它不应该存在于构造函数代码中。其次，你的事件监听器应该是这样的：

`btn_terug.addEventListener(MouseEvent.CLICK, terug);`

不是 `btn_terug.addEventListener(MouseEvent.CLICK.terug);`

```
package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class video01 extends MovieClip
    {
        public function video01()
        {
            trace("movieclip 1 geladen");
            btn_terug.addEventListener(MouseEvent.CLICK, terug);
        }

        public function terug(evt:MouseEvent):void
        {
            trace("knop ingedrukt");
        }
    }
} 
```

看看现在的代码有多漂亮？=)

# java - GAE 数据存储查询整数字段

> ID：13846915
> 
> 赞同：2
> 
> 时间：2012-12-12T19:11:50.833
> 
> 标签：java, google-app-engine, google-cloud-datastore, apache-commons-beanutils

我在查询 GAE 数据存储时发现了奇怪的行为。在某些情况下，过滤器不适用于整数字段。以下 java 代码重现了该问题：

```
log.info("start experiment");

DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

int val = 777;

// create and store the first entity.
Entity testEntity1 = new Entity(KeyFactory.createKey("Test", "entity1"));
Object value = new Integer(val);
testEntity1.setProperty("field", value);
datastore.put(testEntity1);

// create the second entity by using BeanUtils.
Test test2 = new Test(); // just a regular bean with an int field
test2.setField(val);

Entity testEntity2 = new Entity(KeyFactory.createKey("Test", "entity2"));

Map<String, Object> description = BeanUtilsBean.getInstance().describe(test2);
for(Entry<String,Object> entry:description.entrySet()){
    testEntity2.setProperty(entry.getKey(), entry.getValue());
}

datastore.put(testEntity2);

// now try to retrieve the entities from the database...

Filter equalFilter = new FilterPredicate("field", FilterOperator.EQUAL, val);

Query q = new Query("Test").setFilter(equalFilter);

Iterator<Entity> iter = datastore.prepare(q).asIterator();

while (iter.hasNext()) {
    log.info("found entity: " + iter.next().getKey());
}

log.info("experiment finished"); 
```

日志如下所示：

```
INFO: start experiment
INFO: found entity: Test("entity1")
INFO: experiment finished 
```

出于某种原因，即使两个实体实际上都存储在数据存储中并且两个“字段”值都是 777（我在数据存储查看器中看到），它也只能找到第一个实体！为什么实体的创建方式很重要？我想使用 BeanUtils，因为它很方便。

本地开发服务器和部署到 GAE 时也会出现同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:56:19.163

好的，我发现了发生了什么。“问题”是由于某种原因 BeanUtils 将整数转换为字符串。字符串在数据存储查看器中看起来完全一样，但它当然不一样。这几乎愚弄了我。我应该研究过 apache BeanUtils 手册之类的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:04:14.517

在查询数据之前，您是否在写入后 1 秒给了数据存储？有时您不必（也许是祖先查询），但有时您必须这样做。GAE/J 文档将提供完整的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:35:08.140

使用 BeanUtils 创建实体这一事实完全无关紧要。如果实体在数据存储中（您可以在查看器中看到它们）并且字段值已编入索引（它不会在数据存储查看器中的值旁边显示“未索引”），那么您可以使用过滤器查询它们。这行得通……它是数据存储的基本功能。

鉴于实体已创建和索引，我建议 Ian Marshalls 的建议可能是正确的。要对此进行测试，请转到 App Engine 的首选项并取消勾选“启用本地 HRD 支持”。这将确保您在编写实体时可以立即查询它。

如果您存储 Integer 或 int 或任何其他数值并不重要 - 它们都在内部存储为 long 值，当您读回您的值时，您将获得 Long（尽管存储了 Integer）

# database - 为配置选择正确的存储

> ID：13846917
> 
> 赞同：6
> 
> 时间：2012-12-12T19:11:55.387
> 
> 标签：database, configuration, nosql, storage

我们有使用大量配置的应用程序和服务，其中大部分当前是硬编码在 java 代码中并分布在很多类中。显然，这需要更改，我们希望将其集中在一个地方，并且应该由其中一项服务（例如 ConfigurationService）检索和公开，该服务还包含为其客户端缓存配置以获得更好的性能。我们还需要为长时间运行的应用程序动态重新加载配置并避免重新启动。我想就我应该为此目的使用的存储类型发表一些评论 -

## 数据类型 -

数据不需要结构化。它可以是一个简单的键值对，也可以是多键单值对。以下是一些随机配置示例 -

*   “Client_Id”->“ABC”（简单键值）
*   [“User_Type”：“Admin”，“Region”：“Mumbai”，“User_rating”：“9”] -> [“Commission”：“10%”]（多键值）
*   ["User_Id" -> "123"] -> ["WhitelistedRegions"->"Mumbai, Goa"] （基于上下文的配置，值是一个列表）

## 存储解决方案 -

基本上，形成密钥的参数的集合和类型是不固定的，这给了我一个暗示，这个配置并不是真正结构化的。整个配置的体积不会很大。与读取相比，写入将非常少。

*   **数据库 (RDBMS / NoSQL)** - 使用数据库表的优势可能是它提供的安全性和备份。由于这看起来不像关系数据，因此我会考虑使用 NoSQL 解决方案。我个人并没有真正使用过它们中的任何一个，请告诉我哪一个更适合这种数据。由于可能有很多不同的键，我们应该能够选择精确的键（某种索引）。数据库使用会引入延迟，但可以构建有效的缓存来克服这个问题（因为不会对配置进行太多写入）。数据更容易查询。

*   **文件（XML 或其他平面文件）** ——我们可以使用这些文件保持简单。缓存也可以用于文件的情况。只要可以将整个配置导入内存 (RAM)，这也是一个选项（必须实现选择性缓存失效）。文件提供版本控制，必须研究权限/安全性。如果 XML 文件变大，它们尤其会变得更加混乱。如果我们使用文件，数据可能不容易查询。

假设动态重新加载和缓存失效是分开实现的，哪个应该是更好的存储解决方案？这里还应该考虑哪些其他因素？

如果要使用文件来存储此类配置，那么对于此类用例，更好的文件格式是什么？

注意：我在 SO 上问了一个[类似的问题](https://stackoverflow.com/questions/13815271/designing-configuration-storage-retrieval-system)，但可能没有像我应该的那样清楚地提出问题，所以创建了一个新问题，而不是进行大量编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:23:25.630

请帮自己一个忙，并评估[Archaius](https://github.com/Netflix/archaius)或[Curator](https://github.com/Netflix/curator)是否适合您的需求。Archaius 可能更适合应用程序和容器配置，而 Curator 可能更适合机器级配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:24:02.843

您提供的示例表明您可能需要某种规则引擎。为了说明我的意思，我将您的示例解释为具有以下语义：

```
if (true) {
    Client_Id = "ABC";
}
if (User_Type == "Admin" && Region == "Mumbai" && "User_rating" == "9") {
    Commission = "10%";
}
if (User_Id == "123") {
    WhitelistedRegions" = ["Mumbai", "Goa"];
} 
```

如果我的解释是错误的，那么也许您可以编辑您的问题以澄清您的预期含义。另一方面，如果我的解释是正确的，那么我不知道任何为您的要求量身定制的特定配置语法。相反，我怀疑您将不得不将您想要的语义硬塞到您决定使用的任何配置语法的约束中。

我可能会尝试将您的示例（我的解释）硬塞进[Config4*](http://www.config4star.org/)的语法中（免责声明：我是它的主要开发者）的方式如下：

```
uid-rule {
    # unconditional
    client_Id = "ABC";
}
uid-rule {
    condition {
        User_Type = "Admin";
        Region = "Mumbai";
        User_rating = "9";
    }
    Commission = "10%%";
}
uid-rule {
    condition { User_Id = "123"; }
    WhitelistedRegions = ["Mumbai", "Goa"];
} 
```

*我建议您阅读Config4* 入门*手册（[HTML](http://www.config4star.org/config4star-getting-started-guide/overview-of-config4star-syntax.html)、[PDF](http://www.config4star.org/download/manuals/config4star-getting-started-guide.pdf) ）的第 2 章，以便理解上述示例中使用的语法。

我最初尝试将您的示例硬塞到 XML 语法中是：

```
<rules>
    <rule>
        <property name="client_Id" value="ABC"/>
    </rule>
    <rule>
        <condition name="User_Type" value="Admin"/>
        <condition name="Region" value="Mumbai"/>
        <condition name="User_rating" value="9"/>
        <property name="Commission" value="10%"/>
    </rule>
    <rule>
        <condition name="User_Id" value="123"/>
        <property name="WhitelistedRegions" value="Mumbai, Goa"/>
    </rule>
</rules> 
```

请注意，无论是 Config4* 解析器还是 XML 解析器都不会为您提供开箱即用的语义。相反，您应该编写一个名为`RulesEngine`. 这样的类将： (1) 解析配置文件以获取规则并将解析后的表示缓存在内存中；(2) 提供一个简单的 API 来查询内存中的规则集；(3)提供`reloadConfiguration()`重新解析配置文件的方法。您的应用程序会以某种方式触发该`reloadConfiguration()`方法的调用（例如，每隔几分钟一次）。

如果您使用 XML 作为配置语法，那么我建议您通过将 XML 文件存储在 Web 服务器上来实现集中化目标。XML 解析器可以在那里检索文件形式。如果您使用 Config4* 语法，那么 Config4* 集成`curl`可以做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:21:11.073

有不同的方式来看待这种情况。

1.  我决定将数据存储在何处的方式通常基于数据类型。

    如果我正确读取您的数据，它会指定客户 ID、基于用户位置和评级的佣金以及适用于特定用户的区域。对我来说，它更多的是业务静态数据而不是配置（尽管这不会经常更改）。因此，我更愿意将其保存在数据库中。

2.  我是否需要为用户提供一个屏幕来更新这些数据。如果有 UI，您无需通过提出票证或发布过程即可在 PROD 环境中执行此操作。但是拥有 UI 会将选择转移到数据库。

3.  如果没有 UI，那么文件配置可能是更好的选择。因为你可以在你的应用程序中有一个文件观察服务来观察这个配置文件。修改文件后，此服务将读取文件并更新配置而无需重新启动。在数据库的情况下动态重新加载可能不那么简单。您仍然可以提供一个管理屏幕来手动触发配置重新加载。

4.  对于文件类型，您可以选择 Ciaran 提出的选择，但这需要一些额外的学习。考虑到您没有大量配置，您可以坚持使用 xml。

5.  缓存数据我认为不会对数据库和文件之间的选择产生任何影响，因为两者都很容易实现。但是，如果您使用一些像 hibernate 这样的 ORM，您将免于缓存数据的额外工作，但 ORM 带来了定义到数据库表的类映射的另一个复杂性。

# android - 在内部存储android上下载文件时出错

> ID：13846918
> 
> 赞同：1
> 
> 时间：2012-12-12T19:12:14.373
> 
> 标签：android, file, logging, storage, internal

当我认为下载非常简单时，当我尝试从 Internet 下载 xml 文件并将其保存在内部存储器中时遇到错误。我使用内部存储器是因为我正在三星 Galaxy s3 上测试我的应用程序。

这是下载器的代码。它实际上是一个从活动中调用的线程

```
public class DownloaderThread extends Thread
{
    private static final int DOWNLOAD_BUFFER_SIZE = 4096;
    Context context;
    private String downloadUrl = "some address";

    public void run()
    {
            URL url;
            URLConnection conn;
            String fileName;
            BufferedInputStream inStream;
            BufferedOutputStream outStream;
            File outFile;
            FileOutputStream fileStream;

            try
            {
                    url = new URL(downloadUrl);
                    conn = url.openConnection();
                    conn.setUseCaches(false);
                    fileName = "file.xml";

                    Log.v("XML", "Download Started");

                    // start download
                    inStream = new BufferedInputStream(conn.getInputStream());
                    outFile = new File(context.getFilesDir() + "/" + fileName);
                    fileStream = new FileOutputStream(outFile);
                    outStream = new BufferedOutputStream(fileStream, DOWNLOAD_BUFFER_SIZE);
                    byte[] data = new byte[DOWNLOAD_BUFFER_SIZE];
                    int bytesRead = 0;
                    while(!isInterrupted() && (bytesRead = inStream.read(data, 0, data.length)) >= 0)
                    {
                            outStream.write(data, 0, bytesRead);
                    }

                    outStream.close();
                    fileStream.close();
                    inStream.close();

                    if(isInterrupted())
                    {
                            outFile.delete();
                    }
                    else
                    {
                            Log.v("XML","Download Finished");
                            Log.v("PATH","File is stored in direcotry:" + outFile.getAbsolutePath().toString());
                    }
            }
            catch(MalformedURLException e)
            {
                e.printStackTrace();
                Log.v("Error",e.toString());

            }
            catch(FileNotFoundException e)
            {
                e.printStackTrace();
                Log.v("Error",e.toString());
            }
            catch(Exception e)
            {
                e.printStackTrace();
                Log.v("Error",e.toString());
            }
    } 
```

这是调用线程的代码：

```
public boolean onOptionsItemSelected(MenuItem item) {
     ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
     android.net.NetworkInfo wifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
     android.net.NetworkInfo datac = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
     if ( item.getItemId() == DOWNLOAD_XML_MENU_ITEM ) {
            if ((wifi != null & datac != null) && (wifi.isConnected() | datac.isConnected())) 
            {
                downloaderThread = new DownloaderThread();
                downloaderThread.start();
            }
            else 
            {
                displayConnectionAlert();
            }
        }
        return true;
    } 
```

我收到的错误是：标记跟踪 - 没有这样的文件和目录，并且在开始下载日志后，我在 outFile 的路径上得到 NullPointerException。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:36:36.453

您使用的`Context`是从未分配过值的引用，因此是 NPE。

```
Context context; // never initialised anywhere, thus null 
```

由于所有变量都用于解析`context.getFilesDir()`，因此我建议您只需为线程类创建一个以路径为参数的构造函数；IE：

```
public DownloaderThread(String targetDir) { /* implement here */ } 
```

或者，您实际上可以传入一个`Context`实例，但只需确保它是应用程序上下文（而不是 a `Activity`）以避免潜在的内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:15:54.780

除其他外，您需要调用`conn.connect()`. 只是打开连接不会连接到主机。

另外，快速提示：创建文件时，使用它更容易并且（恕我直言）更好，`new File(getFilesDir(), fileName)`而不是进行字符串连接。

# ruby-on-rails - 如何手动在我的 Rails 项目中包含 twitter bootstrap（不使用任何 gem）？

> ID：13846932
> 
> 赞同：2
> 
> 时间：2012-12-12T19:13:28.217
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在学习 Rails，想玩 Rails 和 Twitter Bootstrap。我的 Rails 项目布局是：

```
├─assets
│  ├─images
│  ├─javascripts
│  └─stylesheets
├─controllers
├─helpers
├─mailers
├─models
└─views
    ├─course
    └─layouts 
```

Twitter Bootstrap 布局是：

```
├─css
├─img
└─js 
```

我知道 Bootstrap css 文件引用了它的图像文件，例如：

```
[class*=" icon-"] {
  display: inline-block;
  width: 14px;
  height: 14px;
  *margin-right: .3em;
  line-height: 14px;
  vertical-align: text-top;
  background-image: url("../img/glyphicons-halflings.png");
  background-position: 14px 14px;
  background-repeat: no-repeat;
  margin-top: 1px;
} 
```

所以他们必须保留那里的相对位置，否则我必须更改 CSS 文件。我想知道，如果我不想使用任何与 Bootstrap 相关的 gem，将这些 Bootstrap 文件放入我的 Rails 项目的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:44:15.763

首先，您可能应该将 Bootstrap 源文件移动到 Rails 应用程序中 assets 文件夹中的适当位置 - 即文件`stylesheets`夹中的 CSS 文件、 JS`javascripts`和 中的图像`images`。

如前所述，您需要在 Bootstrap 的 CSS 中更改图像的路径。但是，如果您计划在生产环境中使用您的应用程序，则需要使用 Rails 的资产路径助手。

例如，`background-image: url('../images/glyphicons-halflings.png');`在使用资产管道时是绝对不正确的。这在开发中可以正常工作，但是一旦您为生产环境预编译资产，事情就不起作用了——Rails 将指纹附加到资产文件名以进行缓存，这使得上面的 URL 不正确。

[资产管道的 Rails 指南中](http://guides.rubyonrails.org/v3.1.0/asset_pipeline.html#coding-links-to-assets)概述了在资产中编码路径的正确方法。如果您只使用 CSS，您应该将`.erb`扩展名添加到您的文件名（以获取`bootstrap.css.erb`）并执行以下操作：

```
background-image: url(<%= asset_path 'glyphicons-halflings.png' %>); 
```

如果您使用的是 SASS/SCSS，您也可以使用内置的`asset-path`或`image-path`帮助程序。同样，我在上面链接到的指南中也提到了这一点。

最后，您可能应该使用 gem，因为这项工作已经为您完成。但是，如果你必须这样做，这应该足够好。当然，如果您想更新 Bootstrap，则必须再次执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T04:43:21.350

我遇到了同样的麻烦，不想安装 gem 等。

有一个更简单的解决方案。

只需覆盖自定义 CSS 中背景图像的图标选择器。

```
[class^="icon-"], [class*=" icon-"] {
  background-image: url("/assets/img/glyphicons-halflings.png");
}
[class^="icon-white"], [class*=" icon-white"] {
  background-image: url("/assets/img/glyphicons-halflings-white.png");
} 
```

将 glyphicons PNG 放在 app/assets/images/img/ （或任何你想要的地方），你就完成了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:12:19.230

您必须将每个 Glyphicons 图标更改为资产路径。这是很多工作。此外，您必须使用 LESS，因此使用带有 rails 的引导程序的最简单方法是使用 gem。这是我使用 gem 'twitter-bootstrap-rails' 的 gem 这个 gem 还包括[很棒的字体](http://fortawesome.github.com/Font-Awesome/)所以也检查一下

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-21T14:28:30.073

重定向来电`routes.rb`

```
 get '/img/:name', to: redirect {|params, req| "/assets/#{params[:name]}.#{params[:format]}" } 
```

这会将调用重定向`/img`到`/assets`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T19:23:42.050

您可以将 css 和 js 文件放在项目中的任何位置，因为它们不会相互引用，但是，您必须更新 css 文件中的 glypicon 引用。

在你的情况下：

```
background-image: url("../images/glyphicons-halflings.png"); 
```

编辑：我更新了路径。我最初包含了与您给定的目录结构不正确的“资产”。

# iphone - tableView 作为半透明视图中的子视图

> ID：13846936
> 
> 赞同：2
> 
> 时间：2012-12-12T19:13:46.770
> 
> 标签：iphone, uitableview, view, subview, alpha

我正在开发一个小的 iOS 组件，但我遇到了带有子视图的半透明视图的问题。这是我的场景：
- 一个带有半透明背景的视图，使用`[UIColor colorWithRed:green:blue:alpha]`
- 一点点`UITableView`, with `alpha = 1.0`, 作为子视图添加到半透明视图
- 其他一些子视图

一切正常，但是当向上或向下滚动时会出现问题`UITableView`，事实上，半透明视图周围的区域`UITableView`失去了透明度，变得比原来的背景颜色更暗。

这是解释问题的图像：
![](../Images/272b6b0a4fa09355c617b86787753fd2.png)

看看有两个箭头的空间......

谁能帮我解决这个问题？
非常感谢您的关注！

**更新：**
一些代码：

```
_alertBg = [[UIView alloc] initWithFrame:CGRectZero];
_alertBg.backgroundColor = self.backgroundColor;
_alertBg.frame = CGRectMake((_bgView.frame.size.width - 240) / 2, (_bgView.frame.size.height - 260) / 2, 240, 260);
_alertBg.layer.cornerRadius = 8.0;
_alertBg.layer.borderWidth = 2.0;
_alertBg.layer.borderColor = self.borderColor.CGColor;
_alertBg.layer.shadowColor = [UIColor grayColor].CGColor;
_alertBg.layer.shadowOffset = CGSizeMake(0, 3);
_alertBg.layer.shadowOpacity = 0.8;
_alertBg.layer.masksToBounds = YES;
[_bgView addSubview:_alertBg];

_table = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStylePlain];
_table.frame = CGRectMake(10, _titleLabel.frame.origin.y + _titleLabel.frame.size.height + 12, _alertBg.frame.size.width - 20, 150);
_table.layer.cornerRadius = 6.0;
_table.layer.masksToBounds = YES;
_table.delegate = self;
_table.dataSource = self;
[_alertBg addSubview:_table]; 
```

从上面的代码中，`self.backgroundColor`类似于`[UIColor colorWithRed:0 green:0 blue:1 alpha:0.7]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:52:07.783

我把可用的代码放在一个测试项目中，遇到了和你一样的问题。注释掉`_alertBg.layer.shadowOpacity = 0.5;`解决了我的问题。也许有人可以澄清为什么这是一个问题，我对 QuartzCore 的经验有限。

编辑：好的，接近​​真正的原因。似乎如果您没有设置`_alertBg.layer.shadowPath`属性，当您滚动表格时会发生各种疯狂的事情（我的猜测是表格滚动调用重绘`_alertBg`并且阴影重绘被快速连续调用太多次你会得到那些视觉伪影）。

添加一个`shadowPath`解决了这个问题，所以层代码`_alertBg`应该如下：

```
_alertBg.layer.cornerRadius = 8.0;
_alertBg.layer.borderWidth = 2.0;
_alertBg.layer.borderColor = [UIColor colorWithRed:0 green:0 blue:1 alpha:0.7].CGColor;
_alertBg.layer.shadowColor = [UIColor grayColor].CGColor;
_alertBg.layer.shadowOffset = CGSizeMake(0, 5);
_alertBg.layer.shadowOpacity = 0.8;
_alertBg.layer.shadowPath = [UIBezierPath bezierPathWithRect:_alertBg.bounds].CGPath;
_alertBg.layer.masksToBounds = YES; 
```

只需根据自己的喜好修复它，您就`shadowPath`应该准备好了。

PS：在我的谷歌搜索中，我发现[了这篇关于阴影的优秀博客文章](http://d3signerd.com/deep-dive-into-calayer-shadows/)，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:35:56.070

也许将tableView的背景颜色与_alertBg匹配？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:23:19.830

它可能是`dequeueReusableCellWithIdentifier`.

试试这个......，在委托方法的方法中设置`dequeueReusableCellWithIdentifier`为`nil`如下所示`cellForRowAtIndexPath``UITableViewController`

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil]; 
```

另请参阅我的这个答案可能是你可以从中得到一些想法..

[iPhone在Uitableview单元格中隐藏/显示标签](https://stackoverflow.com/questions/13855445/iphone-hide-show-labels-in-uitableview-cell)

# python - 使用python解析特定文件

> ID：13846937
> 
> 赞同：-2
> 
> 时间：2012-12-12T19:13:53.783
> 
> 标签：python, fileparsing

我有一个 300 兆的文件，其中包含这样的行

```
[0] ppt: (non-cluster) 4294967295 1 1.9.1.25
timestamp: 1355333137
states: 680 [138(average 2752 0)][139(average 2802 0)][2253(average 2008 0)][2484(average 2321 0)][2578(average 2792 0)][2615(average 3518 0)]
[1] ppt: (non-cluster) 4294967295 1 1.9.1.26
timestamp: 1355333137
states: 676 [138(average 2761 0)][139(average 2777 0)][2253(average 2075 0)][2484(average 2318 0)][2578(average 2792 0)][2615(average 3522 0)] 
```

我将不胜感激有关如何使用 Python 解析文件、生成字典列表的建议

```
1.9.1.25 ( 138: 2752, 139: 2802, 2253: 2008, 2484: 2321, 2578: 2792, 2615: 3518)
1.9.1.26 ( 138: 2761, 139: 2777, 2253: 2075, 2482: 2318, 2578: 2793, 2615: 3522) 
```

并将列表存储在文件中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:00:56.603

这不是很优雅，但你去：

```
import re

start_ln = re.compile(r'\[\d+\] ppt: \(.*?\) \d+ \d+ (?P<ivar>\d+\.\d+\.\d+\.\d+)')
tstamp_ln = re.compile(r'timestamp: \d+')
state_ln = re.compile(r'states: (?P<pcount>\d+) (?P<ggroup>(\[\d+\(average \d+ \d+\)\])+)')
group_p = re.compile(r'\[(?P<st>\d+)\(average (?P<avg>\d+) \d+\)\]')

f = open('pfile', 'r')

state = 'WAIT'
llist = []
ldict = {}
cvar = None

for ln in f:
    if state == 'WAIT':
        mtch = start_ln.match(ln)
        if mtch is not None:
            cvar = mtch.groupdict()['ivar']
            ldict = {}
            state = 'LINE#1'
            continue
    elif state == 'LINE#1':
        mtch = tstamp_ln.match(ln)
        if mtch is not None:
            ldict.update(mtch.groupdict())
            state = 'LINE#2'
            continue
    elif state == 'LINE#2':
        mtch = state_ln.match(ln)
        if mtch is not None:
            groupline = mtch.groupdict()['ggroup']
            mtch2 = group_p.findall(groupline)
            ldict[cvar] = dict(mtch2)
            cvar = None
            state = 'WAIT'
        llist.append(ldict)

for i in llist:
    print i 
```

根本没有错误检查——而且“状态表示法”有点肤浅，但它应该可以解决问题。

# ruby-on-rails - Rails 迁移更改与上/下

> ID：13846940
> 
> 赞同：3
> 
> 时间：2012-12-12T19:14:06.170
> 
> 标签：ruby-on-rails, migration

`up`我完全理解/`down`方法和方法之间的区别`change`，但我不明白为什么 rails 似乎会生成另一个。

我刚刚运行了以下命令并获得了一个`change`方法：

```
rails generate migration AddUpdaterCreatorToRequest 
```

大约十分钟前，我运行了以下命令并获得了`up`and`down`方法：

```
rails generate migration AddClientPrimaryEngineer 
```

是什么赋予了？两者都以 add 开头（有一段时间我想知道是否没有一些 NLP 之类的东西正在发生......）是不是第二个缺少“To”来让它给我一个`change`代替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:28:12.473

如果 Rails 碰巧成功解析了迁移名称并且能够为您生成代码，它将使用该`change`方法。否则它只会回退到`up`/`down`方法，让你填补碎片。

我认为第二个迁移名称应该是*CreateClientPrimaryEngineer*。

# php - 如何使用 MYSQL 查询检索不同元素组合的平均值？

> ID：13846941
> 
> 赞同：2
> 
> 时间：2012-12-12T19:14:08.590
> 
> 标签：php, mysql

我有一个类似这样的 MYSQL 表：

```
Fruit   |Color  |Brand  |Rating
-------------------------------
Apple   Red     b1      5.4
Banana  Yellow  b2      1.1
Apple   Red     b1      2.2
Apple   Green   b3      4.1
Apple   Green   b2      1.9
Apple   Red     b1      3.7 
```

哪个是检索每个不同项目的平均评分的正确查询？ie 如何获得组合“Apple Red b1”的平均评分？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:21:04.357

尝试-

```
SELECT Fruit, Color,Brand, AVG(Rating)
FROM Fruit_Ratings
GROUP BY Fruit, Color, Brand; 
```

来自 - [http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_avg)

SQLFiddle 显示查询 - [http://sqlfiddle.com/#!2/c24aa/1](http://sqlfiddle.com/#!2/c24aa/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:23:14.043

这应该适用于您的情况：

```
SELECT AVG(Rating) FROM table GROUP BY Fruit, Color, Brand; 
```

# mysql - mysql排序规则为utf8_unicode_ci时的sphinx排序规则

> ID：13846942
> 
> 赞同：3
> 
> 时间：2012-12-12T19:14:10.360
> 
> 标签：mysql, sphinx, collation

如果在可搜索的 MySQL 表中使用 utf8_unicode_ci，那么在 Sphinx 配置文件中设置哪种排序规则会更好？我希望能够对搜索到的数据进行排序，注意变音符号（重音），不区分大小写。

PS我目前正在阅读[http://sphinxsearch.com/docs/2.0.6/collat](http://sphinxsearch.com/docs/2.0.6/collations.html) ​​ions.html，但对我来说并非一切都清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:12:36.643

确保您在源配置中使用 sql_query_pre = SET NAMES utf8 ，在索引配置中使用 charset_type = utf-8 并且您需要为元音变音添加到默认的 charset_table utf 代码，例如，检查[http://sphinxsearch.com/wiki/doku .php?id=charset_tables](http://sphinxsearch.com/wiki/doku.php?id=charset_tables)

# javascript - 如何使 3D 地球动画始终从面向相机的球体的同一侧开始

> ID：13846944
> 
> 赞同：1
> 
> 时间：2012-12-12T19:14:25.770
> 
> 标签：javascript, animation, rotation, textures, three.js

我认为这是一个非常简单的问题（我只是在学习three.js）而且我找不到合适的词来搜索，但我们开始了。

我正在制作一个旋转的地球动画。当查看器加载页面时，我希望地球始终从同一点开始旋转。由于我正在学习，因此我从[http://jeromeetienne.github.com/threejsboilerplatebuilder/](http://jeromeetienne.github.com/threejsboilerplatebuilder/)的样板开始，并减去了我不需要的元素，并尝试根据其他找到的示例添加我需要的东西在网络周围。除了初始方向问题之外，动画效果很好。现在，如果我重新加载动画，地球位置会恢复到我点击重新加载之前的位置，而不是重置到初始位置。这是我的脚本：var 场景、渲染器、作曲家；var 相机，cameraControl；var 地球；

```
 if( !init() )   animate();

    // init the scene
    function init(){

        if( Detector.webgl ){
            renderer = new THREE.WebGLRenderer({
                antialias       : true, // to get smoother output
            });
        }else{
            renderer    = new THREE.CanvasRenderer();
        }
        renderer.setSize( 567,567 );
        document.getElementById('Stage_globe3d').appendChild(renderer.domElement);

        // create a scene
        scene = new THREE.Scene();

        // put a camera in the scene
        var cameraH = 3;
        var cameraW = cameraH / 567 * 567;
        camera  = new THREE.OrthographicCamera( -cameraW/2, +cameraW/2, cameraH/2, -cameraH/2, -10000, 10000 );
        camera.position.set(0, 0, 5);
        scene.add(camera);

        // here you add your objects

        var light   = new THREE.DirectionalLight(0xffffff, 2 );
        light.position.set( 0,0,10 ).normalize();
        scene.add( light );

        var geometry    = new THREE.SphereGeometry( 1.45, 50, 50 );
        var material    = new THREE.MeshLambertMaterial({map: THREE.ImageUtils.loadTexture("images/world.jpg")});
        var globe   = new THREE.Mesh( geometry, material ); 
        // tried adding this, but it didn't work
                   //globe.rotation.y = 100;
        scene.add( globe );

    }

    // animation loop
    function animate() {

        // loop on request animation loop
        // - it has to be at the begining of the function
        // - see details at http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
        requestAnimationFrame( animate );

        // do the render
        render();
    }

    // render the scene
    function render() {

        var PIseconds   = Date.now() * Math.PI;

        // animation of all objects
        for( var i = 0; i < scene.objects.length; i ++ ){
            scene.objects[ i ].rotation.y = PIseconds*0.00003 * (i % 2 ? 1 : 1);
        }

        // actually render the scene
        renderer.render( scene, camera );
    } 
```

我认为这可能与基于当前时间的旋转动画（我从样板文件中获得）有关，但我已经看到其他示例做类似的事情但仍然总是从相同的初始位置开始（沃尔特迪斯尼头来自例如github上的three.js示例）。有人可以告诉我我做错了什么并引导我朝着正确的方向前进吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:50:07.647

在你的`init()`例行程序中

```
globe.rotation.y = initialValueInRadians; 
```

然后在你的`render()`循环中，设置

```
globe.rotation.y += delta; 
```

其中`delta`被定义为常数，如`0.01`，或作为*经过*时间的函数。

# c - 如何获取 EventID 并使用它来获取 gpu 处理内核的实际时间？

> ID：13846948
> 
> 赞同：0
> 
> 时间：2012-12-12T19:14:38.050
> 
> 标签：c, opencl

可能是论坛上更直接和快速回答的问题之一。我正在开发一个 openCL 项目，我正在尝试找到一种方法来获取 eventID，以便使用 getEvent() 来找出 GPU 处理图像所花费的时间（我正在处理图像卷积）。有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:50:47.180

任何以 clEnqueue 开头的命令都可以返回一个 cl_event（或者更准确地说，可以填写您传入地址的 cl_event 的内容）。这是创建事件的典型方式，您可以稍后从中查询计时值。

因此，声明一个 cl_event 对象，然后将其地址作为最后一个参数传递给 clEnqueueNDRangeKernel，然后在内核运行完成后（您可以使用 clFinish 或等待事件），使用 cl_event 调用 clGetEventProfilingInfo 并请求 CL_PROFILING_COMMAND_START 和 CL_PROFILING_COMMAND_END，减去它们以获得执行时间。注意：命令队列必须启用分析（包括在 clCreateCommandQueue 的属性参数中设置的 CL_QUEUE_PROFILING_ENABLE 标志）才能工作。

最后，一定要 clReleaseEvent 否则你会泄漏内存。

# c# - System.Reflection 如何访问类成员数据/信息？

> ID：13846955
> 
> 赞同：2
> 
> 时间：2012-12-12T19:14:50.820
> 
> 标签：c#, .net, class, c#-4.0, reflection

有人建议我不要使用反射。我真的很想知道，是因为反射*很贵*吗？如果不是，那么避免使用它的原因是什么？

我当前和未来的项目可能还需要访问任何给定的类成员信息。因为我有时需要列出字段和属性 - 值或声明名称。

所以我想知道的是：

**反射是如何工作的？它是如何获取信息的？（一个简短的解释就可以了）**

为什么不建议在应用程序中使用反射？如果您确实需要获取作为字段或属性值或名称的所需信息，您可以**不**使用 System.Reflection 来完成吗？

一些背景。

我当前项目中的用法（例如）是列出特定的 sql server 表列名称或 SQL 表名称。

我可以想出其他方法让它返回为`List<strings>`.

**如果我真的知道它为什么或有多“糟糕”**，使用`reflection`，

..如果我真的想避免它，我可以做出决定，因为我可能会找到一种替代方法（在这种特定情况下）。

通过在我需要（例如）表名列表的任何时候访问数据库（不优选），或者我可以执行一次（访问数据），然后将其存储在文本文件或 xml 中，如果我真的必须避免反射的话。

我也知道一些更优雅的。但这不是问题。（这只是一个示例，因为可能还有许多其他用例，您可能知道。）

更新

此问题已关闭，请帮助重新打开它，并在下面投票“重新打开”

谢谢 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T19:25:39.127

CLR 程序集（可执行或动态链接库）通常包含有关其结构的元数据，这意味着有关类型、结构、方法、字段、它们的名称的信息以及一堆其他信息，这些信息在“传统”语言中是通常仅由偏移量和大小信息丢失和替换。

反射是一个强大的工具，一些（通常是高级的）事情只能使用反射来实现。但是，它也引起了对安全性和封装的担忧，因为您开始依赖程序（或其他程序）的各个部分的实现，而您通常应该避免这些并只信任这些部分提供的接口。另一个问题是性能，因为要访问所有这类（最终是文本）信息，程序会变慢，与使用非反射方法（通常仍使用偏移量和大小信息）相比。例如，您可以使用反射重新实现多态性并绕过虚拟方法表。但后者比前者快很多倍。

必要时使用反射，但非必要时不要使用。它是非常强大的工具之一，人们建议不要使用它们，但如果你真的知道你在做什么，你可以使用它们。话虽如此，请记住，以错误的方式使用反射技术不仅会引发上述问题，而且还会使您的代码更难维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:21:32.603

如果它像“从不使用反射”那么简单，我们根本就没有反射。

反射*很*慢，因此，您必须谨慎使用它。通常有更好的解决方案（在设计和性能方面）使用接口、委托等来实现您的目标（想到依赖注入和动态类型）。

尝试弄清楚如何使用面向对象的设计来解决您的问题*而无需*反思。如果您确实需要使用反射，请考虑其性能将如何影响您的应用程序，并进行相应的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:22:45.827

反射通过解析类类型信息来工作。谨慎使用它，因为它的计算成本很高。

# java - java.util.prefs.FileSystemPreferences 尝试打开损坏的路径

> ID：13846960
> 
> 赞同：4
> 
> 时间：2012-12-12T19:15:08.873
> 
> 标签：java, preferences, openjdk

从最近开始，一些 Java 应用程序开始时不时地打印以下警告：

```
java.util.prefs.FileSystemPreferences syncWorld
WARNING: Couldn't flush user prefs: java.util.prefs.BackingStoreException: /home/yha/.java/.userPrefs/_!(k![@"k!'`!~!"p!(@!bw"y!#4![!"v!':!d@"t!'`!bg"0!&@!e@"w!'`!ew"0!(k!c!"l!&:!d!"y!'k!bg"n!$0!,w"h!(!!c!"s!'k!}w"h!(@!a@"v!'4!.@"5!'}!a@"s!'`!cw!n!(0= create failed. 
```

“创建失败”。不开玩笑！那是什么样的文件名？

谷歌搜索后，我现在知道 Java Preferences Subsystem 是什么，Linux 上存储的默认值应该是什么`$HOME/.userPrefs`，但是......这并不能解释我在日志消息中的路径来自哪里。而且我仍然不知道在哪里设置这个值。也许某个配置文件的存储文件路径已损坏。

在 Kubuntu 12.10 上使用 openjdk-7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:41:24.703

那个古怪的字符串是调用的结果`java.util.prefs.Base64.byteArrayToAltBase64()`。如果你反转这个过程，你会得到：`"yEdeditor.DocumentType{typeString='application-yfiles'}"`. 那个字符串对你有什么意义吗？

文件名字符可能最终不是问题（它们可能是正确的）。如果您的 ubuntu 主目录已加密，您很可能会遇到[这个“众所周知的”问题](https://bugs.launchpad.net/ecryptfs/+bug/344878)（加密文件系统中文件的最大文件名长度为 143 个字符）。非常微妙且极难诊断的错误。

# wordpress - Wordpress 3.5 - 与小部件相比的错误

> ID：13846965
> 
> 赞同：0
> 
> 时间：2012-12-12T19:15:38.727
> 
> 标签：wordpress

当 WordPress 更新到 v3.5 时，我在管理面板中出现错误：http: [//gyazo.com/5ff2e63261a11331dd1df7cdd121d606](http://gyazo.com/5ff2e63261a11331dd1df7cdd121d606)。一切正常，但小部件不起作用（我无法将小部件推送到侧边栏）。

我知道这是因为我的主题，但我不能将它们更改为另一个，所以我必须修复这个错误。

哪里可能有问题？我确信它与我的主题框架相比，但我不知道在哪里可以找到有用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:31:07.090

今天早上我更新到 WP 3.5。这样做之后，我的任何小部件都不会扩展，无法将小部件移入和移出侧边栏等。你遇到了同样的问题。

但我找到了解决方案（无论如何对我来说）：

Bulletproof Security 将 .htaccess 放在 wp-admin 文件夹中，这将阻止小部件在 3.5 中正常工作。

[我在哪里找到该信息](http://wordpress.org/support/topic/troubleshooting-wordpress-35-master-list?replies=4)

如果您曾经（或曾经）使用过 Bulletproof Security，请删除 wp-admin 文件夹中的 .htaccess 文件，一切都会好起来的。（至少它对我有用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:29:37.410

我在[AndroidsChick.com上也遇到了同样的问题](http://www.androidschick.com)

这让我发疯....我已经逐步停用插件和测试....在我的安装中它是

Widget Logic Visual 插件！停用后一切恢复正常！:)

现在我必须找到 Widget Logic 插件的替代品，因为我所有的 Widget 都是可见的！

希望这可以帮助某人解决这个可怕的问题.... :)

# python - 如何在python中遍历（x，y）列表

> ID：13846969
> 
> 赞同：0
> 
> 时间：2012-12-12T19:15:55.707
> 
> 标签：python

如何浏览`(x,y)`python 中的列表列表？

我在python中有一个这样的数据结构，它是一个列表的列表`(x,y)`

```
coords = [
      [[490, 185] , [490, 254], [490, 312] ],  # 0
      [[420, 135] , [492, 234], [491, 313], [325, 352] ],  # 1
] 
```

我想浏览列表并获取`x, y`每组：

```
# where count goes from 0 to 1
 a_set_coord[] = coords[count]
 for (tx, ty) in a_set_coord:
    print "tx = " + tx + " ty = " + ty 
```

但我得到错误：

```
SyntaxError: ("no viable alternative at input ']'" 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:17:31.837

删除之后的括号`a_set_coord`：

```
a_set_coord = coords[count] 
```

此外，该`print`语句尝试连接字符串和整数。将其更改为：

```
print "tx = %d ty = %d" % (tx, ty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:54:03.033

使用一个简单的`for`循环。

```
for i in coords:
   x = i[0]
   y = i[1]
   if len(i) == 3: z = i[2] # if there is a 'z' coordinate for a 3D graph.
   print(x, y, z) 
```

这假设每个列表`coords`的长度只有 2 或 3。如果不同，这将不起作用。但是，考虑到列表是坐标，应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:22:00.520

如果您只想将列表列表平展一层，`itertools.chain`或者`itertools.chain.from_iterable`可能会很有帮助：

```
>>> coords = [
...       [[490, 185] , [490, 254], [490, 312] ],  # 0
...       [[420, 135] , [492, 234], [491, 313], [325, 352] ],  # 1
... ]
>>> import itertools as it
>>> for x,y in it.chain.from_iterable(coords):
...     print ('tx = {0} ty = {1}'.format(x,y))
... 
tx = 490 ty = 185
tx = 490 ty = 254
tx = 490 ty = 312
tx = 420 ty = 135
tx = 492 ty = 234
tx = 491 ty = 313
tx = 325 ty = 352 
```

# forms - 带参数的 symfony2 表单查询构建器

> ID：13846970
> 
> 赞同：23
> 
> 时间：2012-12-12T19:16:03.397
> 
> 标签：forms, symfony, builder, query-builder

我想将我的实体放在查询生成器的功能中：

```
->add( 'weeks', 'entity', array(
    'class' => 'MV\CaravanBundle\Entity\CaravanRow',
    'property' => 'line',
    'query_builder' => function(EntityRepository $er ) use ( $caravan ) {
        return $er->createQueryBuilder('w')
                  ->orderBy('w.dateFrom', 'ASC')
                  ->where('w.caravan = ?', $caravan )
                  ->andWhere('w.visible = 1')
                  ->andWhere('w.booked = 0');
} 
```

但得到消息：

> 在此上下文中不允许使用“实体\名称”类型的表达式

那么提供查询构建器信息的（最佳）方法是什么。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-12T19:45:00.747

您应该像这样单独设置参数：

```
->add( 'weeks', 'entity', array(
    'class' => 'MV\CaravanBundle\Entity\CaravanRow',
    'property' => 'line',
    'query_builder' => function(EntityRepository $er ) use ( $caravan ) {
        return $er->createQueryBuilder('w')
                  ->orderBy('w.dateFrom', 'ASC')
                  ->where('w.caravan = ?1')
                  ->andWhere('w.visible = 1')
                  ->andWhere('w.booked = 0')
                  ->setParameter(1, $caravan);
} 
```

您可以使用整数或字符串，但每种语法略有不同。查看[文档](http://docs.doctrine-project.org/en/2.0.x/reference/query-builder.html#binding-parameters-to-your-query)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-19T11:41:18.637

我最近遇到了几乎同样的问题。唯一的区别是必须在“setDefaultOptions”中设置“query_builder”选项。基本上表单是这样创建的：

```
$builder->add('field', 'query_type', array('id' => 1)); 
```

'query_type' 类如下所示：

```
class QueryType extends AbstractType
{
     public function setDefaultOptions(OptionsResolverInterface $options)
     {
              $resolver->setRequired(array('id'));

              $resolver->setNormalizers(array(
                  'query_builder' => function (Options $options, $configs) {
                          return function (EntityRepository $er) use ( $options ) {
                              return $er->getSomething( $options['id'] );

                       };
                  },
              ));
     }
} 
```

我使用 setNormalizers 函数来访问我的 $options 数组，然后我可以使用参数调用 querybuilder。

希望这对某人有用！

# count - 错误“无法更新更新查询中的所有记录；由于类型转换失败，没有更新 9 个字段” Dcount 更新查询

> ID：13846971
> 
> 赞同：0
> 
> 时间：2012-12-12T19:16:12.243
> 
> 标签：count, ms-access-2007, sql-update, type-conversion, calculated-field

我知道将计算数据存储在表格中是多么的错误！但是，在这种情况下，这对于我需要的东西是非常必要的。

我正在使用这个语句：

```
更新商业街
SET BusinessesPerStreet
= DCount("*","Businesses","StreetName='" & Replace(StreetName,"'","''") & "'");

```

它通过询问我是否确定要继续更新表中的正确记录，因为这无法撤消，但随后给了我一个错误：

```
Microsoft Office Access 无法更新更新查询中的所有记录。
由于类型转换失败，Microsoft Office Access 未更新 9 个字段

```

当它说“字段”时，我确信它表示记录，因为我目前在这个表中有 9 条记录，一旦我有了这个工作，我就会增加到 100 多条。

将要更新的字段是 Long Integer 字段，这应该没问题，因为 Dcount 函数将产生数字结果。

这个说法有什么问题？

感谢您给我时间来帮助我解决这个问题。真的非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:21:09.583

如果没有看到数据，就无法确定转换失败的原因，但可能某些数据已经包含双引号？或者，也许您的某些记录有空数据？

# java - 在 Android 设备上通过 JTDS 连接到 Azure SQL DB

> ID：13846978
> 
> 赞同：2
> 
> 时间：2012-12-12T19:16:29.667
> 
> 标签：java, android, jdbc, azure, jtds

我正在使用 JTDS 1.2.7 将我的 Android 应用程序连接到 Windows Azure SQL Server。

源代码：

```
String connectionString = 
"jdbc:jtds:sqlserver://SERVER.database.windows.net:1433;database=demo;" +
"user=test@SERVER;password=PASSWORD;ssl=require";
Class.forName("net.sourceforge.jtds.jdbc.Driver");
Connection con = DriverManager.getConnection(connectionString);
Statement st = con.createStatement();
res=st.executeQuery(sql); 
```

当我尝试连接到数据库时，我得到 java.lang.NoClassDefError: com.sun.net.ssl.SSLContext 异常。我试图将 jsse.jar 添加到我的构建路径中，但应用程序只是关闭而不是建立连接。我究竟做错了什么？

# eclipse - eclipse e4（Juno）：无法隐藏视图部分最小化/最大化按钮

> ID：13846979
> 
> 赞同：4
> 
> 时间：2012-12-12T19:16:45.473
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-juno, e4

在零件堆栈中，我有零件视图。，并且每个视图都有最小化/最大化按钮，

有什么方法可以隐藏某些特定视图部分的最小化/最大化按钮吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T10:14:21.423

这是 e4 中的一个错误： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=394231](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394231)

有两种不同的方法可以解决此问题：

1.  移除这个依赖 org.eclipse.e4.ui.workbench.addons.swt
2.  使用这个 CSS 片段：

    .MPartStack { swt-maximize-visible: false; swt-最小化可见：假；}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T06:09:01.997

但是，如果您应用以下规则，则会出现另一个错误：

```
.MPartStack { 
    swt-maximize-visible: true; 
    swt-minimize-visible: false; 
} 
```

*   最初“最小化”按钮是隐藏的。
*   如果您最大化零件堆栈，现在“最小化”按钮是可见的，您可以真正最小化零件堆栈。

`MinMaxAddon#setCTFButtons(..)`不尊重css规则所说的，它总是显示最大化零件堆栈的“最小化”按钮。

# javascript - 停止右键单击并转到标签的链接功能

> ID：13846982
> 
> 赞同：0
> 
> 时间：2012-12-12T19:17:06.160
> 
> 标签：javascript, html

我有一个像下面这样的标签。我的问题是，当用户右键单击它时，如何使该`<a/>`标签的行为不像链接。由于在常规单击时`onclick`事件将触发并返回 false 我对链接的常规单击很好，当用户右键单击鼠标然后获得像在新选项卡中打开或在新窗口中打开这样的选项时，问题就出现了我必须防止这种情况发生。我发现我可以`javascript:void(0)`在 href 中使用来做到这一点，但由于某种原因，我无法更改 href，因为它用于其他一些东西。有没有什么东西可以使用。

```
<A title="Test1" onclick="javascript:search1('search'); return false;"href="team">search</A> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:14:50.267

通常，没有通用的解决方案，每个浏览器都按照自己的方式行事。HTML 5 说应该支持 form.oncontextmenu 事件处理程序。所以这

```
<script>
    document.oncontextmenu=function("alert('dont play with sources');return false");
</script> 
```

如果您使用 HTML 5，应该可以工作。

您还可以删除 javascript 字，onclick 已经在等待 js 代码（就像 oncontextmenu 一样）。

```
 <a onclick="search1('.... 
```

# java - 从 Java 应用程序执行 Jar 文件

> ID：13846983
> 
> 赞同：0
> 
> 时间：2012-12-12T19:17:17.583
> 
> 标签：java, cmd, processbuilder

我编写了 2 种方法来尝试从我的 Java 应用程序执行 Jar 文件，但它们都没有做任何事情。Java Runtime Environment 安装在 C: 驱动器上，默认情况下其 Path 指向 C: 驱动器上的目录。我尝试执行的 Jar 文件位于 E: 驱动器上。

jar 位置：E:\Demo Folder\MyDemo.jar

我尝试使用以下 2 种方法执行 MyDemo.jar：

方法一：

```
try {
    Runtime.getRuntime().exec("cmd /c start %SystemDrive%\\java -jar " + "E:/Demo Folder/MyDemo.jar");
} catch (IOException ex) {
    System.err.println(ex.getMessage());
} 
```

方法二：

```
try {
    File dirFile = new File("E:/Demo Folder/");
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "E:/Demo Folder/MyDemo.jar");
    pb.directory(dirFile);
    Process p = pb.start();
} catch (Exception ex) {
    System.err.println(ex.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:09:26.397

您没有尝试将调用逻辑放在 E:/Demo Folder/rundemo.bat`（或 .cmd）文件中，然后从您的 java 中调用该 .bat 吗？这通常更理智，更容易排除故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:05:10.543

我猜问题是jar文件路径中的空间。尝试这个：

```
new ProcessBuilder("java", "-jar", "\"E:/Demo Folder/MyDemo.jar\""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:09:51.590

要启动外部 java 可执行应用程序，您必须首先找到 java.exe 文件（加载 JVM）并传递 -jar 参数以指示加载可执行 JAR 文件。在您提供的两种方法中，您的代码中都有小错误。

在方法一中：

> cmd /c 开始 %SystemDrive%\\java -jar

%SystemDrive% 被视为字符串文字，因为 java 不知道 Windows 特定的环境变量。

在方法二中：

> “java”、“-jar”、“E:/Demo 文件夹/MyDemo.jar”

您假设 java.exe 已添加到 PATH 环境变量中，但情况可能并非如此。此外，根据您对“%”运算符的使用，我假设您在 Windows 机器上，因此它使用 \ 作为目录...“E:/Demo Folder/MyDemo.jar”可能不会返回有效位置。

尝试以下代码段：

```
try {
    File dirFile = new File("E:\\Demo Folder\\");
    ProcessBuilder pb = new ProcessBuilder(System.getProperty("java.home") + File.separator + "bin" + File.separator + "java", "-jar", new File(dirFile, "MyDemo.jar").getAbsolutePath());
    pb.directory(dirFile);
    Process p = pb.start();
} catch (Exception ex) {
    System.err.println(ex.getMessage());
} 
```

# ruby - Ruby TCPServer 获取客户端 IP 地址

> ID：13846984
> 
> 赞同：3
> 
> 时间：2012-12-12T19:17:19.033
> 
> 标签：ruby

这是我不工作的脚本（只是挂起......）

```
require 'socket'
server = TCPServer.new 2000

loop do
  Thread.start(server.accept) do |client|
    sock_domain, remote_port, remote_hostname, remote_ip = server.peeraddr
    client.puts "Hello !"
    client.puts "Time is #{Time.now}"
    puts "connection coming from #{remote_ip} and port #{remote_port}"
    client.close
  end
end 
```

我想要连接客户端 IP 的输出，但连接已建立，但没有任何反应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T19:33:36.200

代码很好，除了这个：

```
sock_domain, remote_port, remote_hostname, remote_ip = server.peeraddr 
```

应该是这样的：

```
sock_domain, remote_port, remote_hostname, remote_ip = client.peeraddr
                                                       ^^^^^^ 
```

# c# - Oracle 存储过程不在 .NET 中执行？

> ID：13846990
> 
> 赞同：0
> 
> 时间：2012-12-12T19:17:50.090
> 
> 标签：c#, visual-studio, oracle

我在 Oracle 和 .NET 中遇到了一个非常罕见的问题，我有一个简单的选择来检索产品列表，它可以正常工作。但是，对于存储过程，它似乎没有执行它，但它没有说明任何错误或缺少参数。在 SQL Developer 中运行时，它可以正常工作。

```
OracleCommand ora_cmd = new OracleCommand("a6r1.PR_ABC_P_ALTA_TARJETA_PAYWARE", ora_conn);
ora_cmd.BindByName = true;
ora_cmd.CommandType = CommandType.StoredProcedure;

int exito = 0;

ora_cmd.Parameters.Add("Lc_Param_Issuer", OracleDbType.Varchar2, issuer, ParameterDirection.Input);
ora_cmd.Parameters.Add("Ln_Param_Valid_Product", OracleDbType.Varchar2, DropDownListProducto.SelectedValue.ToString(), ParameterDirection.Input);
ora_cmd.Parameters.Add("Ln_Param_Total", OracleDbType.Int32, Convert.ToInt32(TextBoxCantidad.Text) , ParameterDirection.Input);
ora_cmd.Parameters.Add("Lc_Param_User", OracleDbType.Varchar2, user, ParameterDirection.Input);
ora_cmd.Parameters.Add("Lc_Encrypted_Password", OracleDbType.Varchar2, pass, ParameterDirection.Input);
ora_cmd.Parameters.Add("Lc_Exito", OracleDbType.Int32, exito, ParameterDirection.Output);
/*********************Oracle Command**********************************************************************/

ora_cmd.ExecuteNonQuery(); 
```

* * *

SP 太大放在这里，所以我只添加表头。

```
PROCEDURE PR_ABC_P_ALTA_TARJETA_PAYWARE (
     Lc_Param_Issuer In Varchar2,
     Ln_Param_Valid_Product In Varchar2,
     Ln_Param_Total In Number,
     Lc_Param_User In Varchar2,
     Lc_Encrypted_Password In Varchar2,
     Lc_Exito Out Number
     ) 
```

任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:34:18.757

尝试这个：

```
 using Oracle.DataAccess;
    using Oracle.DataAccess.Client;

    public DataTable ExecuteSP()
    {
        using (OracleConnection cn = new OracleConnection(GetConnectionString()))
        {
            OracleDataAdapter da = new OracleDataAdapter();
            OracleCommand cmd = new OracleCommand();
            cmd.Connection = cn;
            cmd.CommandText = "PR_ABC_P_ALTA_TARJETA_PAYWARE";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.BindByName = true;
            cmd.Parameters.Add("Lc_Param_Issuer", OracleDbType.Varchar2, issuer, ParameterDirection.Input);
            cmd.Parameters.Add("Ln_Param_Valid_Product", OracleDbType.Varchar2, DropDownListProducto.SelectedValue.ToString(), ParameterDirection.Input);
            cmd.Parameters.Add("Ln_Param_Total", OracleDbType.Int32, Convert.ToInt32(TextBoxCantidad.Text) , ParameterDirection.Input);
            cmd.Parameters.Add("Lc_Param_User", OracleDbType.Varchar2, user, ParameterDirection.Input);
            cmd.Parameters.Add("Lc_Encrypted_Password", OracleDbType.Varchar2, pass, ParameterDirection.Input);
            cmd.Parameters.Add("Lc_Exito", OracleDbType.Int32, exito, ParameterDirection.Output);

            cmd.Parameters.Add("T_CURSOR", OracleDbType.RefCursor).Direction = ParameterDirection.Output;
            da.SelectCommand = cmd;
            DataTable dt = new DataTable();
            da.Fill(dt);
            return dt;
        }
    } 
```

# php - jQuery Mobile 登录处理程序

> ID：13846993
> 
> 赞同：0
> 
> 时间：2012-12-12T19:18:09.497
> 
> 标签：php, javascript, ajax, jquery-mobile, login

我开始开发一个 Web 应用程序作为我学位的主要项目。应用程序的目的并不重要。我的问题是处理登录。我用 jQuery mobile 设置登录没有问题，实际上工作得很好。问题是我正在通过 ajax 使用 php 脚本处理登录并在该过程中创建会话。因此，为了检查用户是否登录，我通常会使用 php 脚本，但在这种情况下我不能。我需要继续只使用客户端进行身份验证。解决方案是什么？我可以使用一些原生 jQuery 函数来处理身份验证，还是需要编写一些 JS 脚本？如果有人有任何解决方案，我不需要实际的代码，只是最好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:28:46.637

只要登录身份验证仅限于设备，您就可以实现此目的。我的意思是用户ID/密码组合可以本地存储在设备上。您可以为此选择本地文件系统存储。以下是步骤：

1) 使用 uid/密码进行用户注册
2) 检查 uid 是否存在于您的本地存储中。如果不通过将其写入本地存储来注册。
3) 稍后当用户返回时，针对本地存储验证登录凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:25:54.680

我假设您正在使用移动 Web 框架开发本机应用程序。在这种情况下，您有两种选择：

*   将登录详细信息发布到某处的服务器，进行身份验证并返回会话，允许用户访问。这显然需要访问互联网，但会更安全。
*   用户注册时，使用 JavaScript将凭据存储在[本地存储中。](http://diveintohtml5.info/storage.html)加密此值并在用户登录时与之比较。

# objective-c - 在 PrepareForSegue 中设置属性对于 ViewDidLoad 为空，但稍后更正

> ID：13846997
> 
> 赞同：3
> 
> 时间：2012-12-12T19:18:24.807
> 
> 标签：objective-c, ios, properties, viewdidload

我对此进行了上下搜索，发现了一些相似但不是我的确切问题。在我的详细视图控制器中，我有一个打开弹出表视图控制器的 segue。在 PrepareForSegue 方法中，我设置了表格视图的属性，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"StateSegue"])
    {
        popover = [(UIStoryboardPopoverSegue *)segue popoverController];
        StatePickerController *statePicker = (StatePickerController *)popover.contentViewController;
        statePicker.delegate = self;
        statePicker.pickerType = @"states";
    }
} 
```

我同时传递了委托和pickerType 值。在我的表视图 StatePickerController 中，我在标题中声明了这些属性，如下所示：

```
@property (nonatomic,assign) id<StatePickerDelegate> delegate;
@property (nonatomic,strong) NSString *pickerType; 
```

我知道这些值正在正确地传递到我的弹出框控制器中，因为稍后在 didSelectRowAtIndexPath 中我可以同时引用它们并且我得到了正确的委托和“状态”，但是在 viewDidLoad 方法中，两者仍然是（null）。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(150.0, 140.0);
    self.states = [NSMutableArray array];
    NSLog(@"%@",self.delegate); //returns (null)
    NSLog(@"%@",self.pickerType); //returns (null)
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%@",self.pickerType); //corectly logs "state"
    NSString *state = [_states objectAtIndex:indexPath.row];
    [self.delegate stateSelected:state]; //correctly runs method on detailviewcontroller
} 
```

在设置这些属性的 viewDidLoad 方法之后是否有一些点？我需要在视图加载时立即访问这些值，因为我需要根据从 detailviewcontroller 传递的内容来确定表中填充的数据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T19:31:00.083

viewWillAppear 在 vi​​ewDidLoad 之后被调用。使用它来检查 prepareForSegue 方法之后的值。

# java - 使用脚本更新 android 应用程序版本和内部版本号而不更改 androidManifest VersionCode 和 VersionName

> ID：13846999
> 
> 赞同：1
> 
> 时间：2012-12-12T19:18:34.257
> 
> 标签：java, android

在游戏开始之前，我已经能够通过脚本文件将我的 versionCode 自动更改为 androidmanifest.xml 中的内部版本号为我当前的 git 提交号。但由于某种特殊原因，我不想使用 versionCode 作为我的游戏版本号。我想使用除 versionCode 和 VersionName 以外的东西，我可以在游戏开始之前通过脚本保存我的 git 提交号，然后在游戏期间我可以读取该值并在我的游戏中显示。所以我需要两件事

1.  如何在 androidManifest 文件中创建一个额外的标签，我可以在其中保存这个值
2.  以及在游戏运行之前更改要在脚本文件中使用的标记值的脚本

我使用以下脚本更改清单中的 versionCode 标记

```
newverfull=$(git --git-dir="../../.git" --work-tree="../../" rev-list master | wc -l)

manf=AndroidManifest.xml

newvers=`echo $newverfull | sed 's/[^0-9].*$//'`

vers=`sed -n '/versionCode=/s/.*"\([0-9][0-9]*\)".*/\1/p' $manf`

sed /versionCode=/s/'"'$vers'"'/'"'$newvers'"'/ $manf  >new$manf && cp new$manf $manf && rm -f new$manf 
```

我感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:20:33.020

我设法更改了我之前发布的脚本。我还在清单文件中创建了一个元数据，并使用下面的脚本更改了它的值。

谢谢您的帮助。干杯!

```
 newverfull=$(git --git-dir="../../.git" --work-tree="../../" rev-list master | wc -l)
manf=AndroidManifest.xml
verbase=`echo $newverfull | sed 's/\(.*\.\)\([0-9][0-9]*\).*$/\1/'`
vername=`sed -n '/GameVersion/s/.*"\([^"]*\)".*/\1/p' $manf`
sed /GameVersion/s/'"'$vername'"'/'"'$verbase'"'/ $manf  >new$manf && cp new$manf $manf && rm -f new$manf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T23:42:19.427

看看这个 shell 脚本。

[https://github.com/eaglesakura/jenkins-script/blob/master/update-AndroidManifest.sh](https://github.com/eaglesakura/jenkins-script/blob/master/update-AndroidManifest.sh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:32:19.740

这是一个例子。自定义标签是 GameVersion。

```
<application android:name=".MyApplication"
             android:icon="@drawable/icon"
             android:label="@string/app_name">

    <meta-data android:name="GameVersion" android:value="1.9" />

    <activity android:name="com.someone.something.MainActivity"
              android:theme="@android:style/Theme.Translucent.NoTitleBar"
              android:screenOrientation="sensor"
              android:label="@string/app_name"> 
```

要访问它：

```
 ApplicationInfo ai = _context.getPackageManager().getApplicationInfo(_context.getPackageName(),PackageManager.GET_META_DATA);
    ai.metaData.get("GameVersion") 
```

如您所见，您需要一个上下文来获取对 PackageManager 的引用。我更喜欢使用 getApplicationContext() 来执行此操作，但如果您正在获取数据，则可以使用您的活动上下文。