# StackOverflow 问答 15889000-15889999

# installation - Putty 跳过安装向导

> ID：15889005
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:08:01.633
> 
> 标签：installation, wizard, putty

我从这里下载了适用于 Windows x86 的 putty.exe 安装程序 - [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html) 我正在运行 Windows 7。当我运行可执行文件时，它直接进入Putty 配置窗口，而不运行设置过程。我在这里看不到第一张图片中显示的欢迎对话框 - [https://www.openshift.com/page/install-and-setup-putty-ssh-client-for-windows](https://www.openshift.com/page/install-and-setup-putty-ssh-client-for-windows) 所以我无法保存配置和重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:23:39.020

听起来您想下载“Windows 安装程序”而不仅仅是 .exe。.exe 文件是独立的，不需要安装。无论哪种方式，它都具有相同的功能。

# jquery - 新页面上的 PartialView 渲染

> ID：15889007
> 
> 赞同：1
> 
> 时间：2013-04-08T21:08:09.840
> 
> 标签：jquery, asp.net-mvc

在名为 CreateAdmin 的父视图中，我有一些 Html 控件、按钮和用于部分视图的 div 占位符

```
@using (Html.BeginForm())
{   
    <p style="padding-left: 920px;">
        <button name="button" value="search" id="SearchResultbtn">
        Search</button>
    </p>
    <div class="editor-field" id="searchResult">
        //place holder for the partial view
    </div>
} 
```

单击“搜索”按钮时，部分视图应在此内部动态呈现

```
<div id="searchResult"><div> 
```

这个jquery是

```
 $(document).ready(function () {
    $("#SearchResultbtn").click(function () {
        $.get('/Views/Shared/_AdminSearchResult.cshtml', function (data) {
            $('#searchResult').html(data);
        });
    });
}); 
```

我的控制器方法是

```
[HttpPost]
    public ActionResult CreateAdmin(string button, Administration admin)
    {
        if (button == "search")
        {
            var result = Administration.GetAdministrationList();
            if (result.Count() != 0)
                return PartialView("_AdminSearchResult", result);
        }
    } 
```

我在共享文件夹名称中的部分视图是_AdminSearchResult.cshtml。

问题是部分视图正在一个新页面中呈现，而不是它应该在的位置。有人可以指出我要去哪里磨损。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:11:31.180

这应该读到以下内容：

```
 $(document).ready(function (e) {
    $("#SearchResultbtn").click(function (e) {
        e.preventDefault();
        $("#searchResult").load('@Url.Action("CreateAdmin")');
    });
}); 
```

# javascript - DurandalJS - 在没有视图模型刷新的情况下导航

> ID：15889011
> 
> 赞同：1
> 
> 时间：2013-04-08T21:08:16.833
> 
> 标签：javascript, durandal

我有一个我在视图中显示的联系人组列表。当我单击联系人组时，我想更改当前哈希并加载关联的联系人。

说，我有 3 个联系人组

> 全部（无 ID）
> 
> 朋友（ID := 1）
> 
> 家庭（ID := 2）
> 
> 其他（编号：= 3）

如果我单击好友，则 url 需要更改为 #/people/1 并且需要使用参数 (Id = 1) 调用回调。如果单击全部，则不应传递任何 ID (#/people) 以加载所有联系人。

就像是：

```
router.when("#/people/:id", function (routeData) {
    console.log(routeData.Id); //Output: 1

    // Load contacts by id
});

router.when("#/people", function () {
    // Load all contacts
});

function onContactGroupClick(contactGroup) {
    router.navigateToWithoutReset("#/people/" + contactGroup.Id);
} 
```

原因是，我希望有一个中心位置，无论是通过代码还是手动进行调用（更改 URL，或单击超链接）都无关紧要。

一个很好的例子是 Gmail/Contacts

如果我使用 DurandalJS 的 router.navigateTo，整个视图模型将被重新加载。有没有办法用 DurandalJS 做到这一点但不刷新视图模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T03:35:06.150

你说的中心位置是什么意思？

据我了解，这是您正在寻找的：

```
define(["services/dataservice"], function (dataservice) {
        var allContacts = ko.observableArray();
        var friendsContacts = ko.observableArray();
        var contacts = ko.observableArray();
        var loadedAllData= false;
        var loadedFriends = false;
        var vm = {
            activate: activate,
            contacts: contacts,
        };
        return vm;

        function activate(routeData) {
            var id = parseInt(routeData.id);
            if(id === 1)
            {
               if(loadedFriends)
               {
                  //push friends observable into contacts
               }
               else
               {
                  //load friends from server and set loadedFriends to true.
               }
            }
            else
            {
               if(loadedAll)
               {
                   //push all contacts this into the contacts array
               }
               else
               {
                   //load from the webserver, and also filter friends and put them into friends observable. Here set both loadedAll and loadedFriends to true.
               }
            }
        }
    }
); 
```

因此，如果您将视图与联系人绑定，那么当您第一次来到此屏幕时，从 URL 或超链接寻找朋友时，它应该只从 Web 服务器加载朋友数据，随后返回到同一屏幕时，朋友数据应该有它就不会一次又一次地加载。Durandal 将使用相同的虚拟机并且不会重置标志和可观察对象（除非并且直到您手动点击浏览器刷新按钮）。

# java - 在单击侦听器中编辑警报对话框

> ID：15889012
> 
> 赞同：0
> 
> 时间：2013-04-08T21:08:20.160
> 
> 标签：java, android, android-alertdialog, onclicklistener

下面的警报对话框有一个标题和四个项目（即红色、绿色、蓝色和黑色）。每次选择其中一项时，我都想更改图标。

这是我的代码：

```
final AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
final CharSequence[] items = {"Red", "Green", "Blue", "Black"};

alertDialog.setTitle("Pick a color");

alertDialog.setSingleChoiceItems(items, 1, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface arg0, int num) {
        switch(num) {
            case 0: alertDialog.setIcon(R.drawable.red);
            break;

            case 1: alertDialog.setIcon(R.drawable.green);
            break;

            case 2: alertDialog.setIcon(R.drawable.blue);
            break;

            case 3: alertDialog.setIcon(R.drawable.black);
            break;
            }
    }
}); 
```

我可以证明正在调用 .setIcon() 方法这一事实；但是，警报对话框的美感没有任何变化。实际上，即使执行了正确的方法，图标也不会被更改。

有人可以解释一下如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:20:17.407

您正在将图标设置为生成`AlertDialog`器，但应该设置为 AlertDialog 本身。改变：

```
alertDialog.setIcon(R.drawable.XxX); 
```

至：

```
((AlertDialog)arg0).setIcon(R.drawable.XxX); 
```

# c++ - C++游戏引擎中的复合、组件和实体

> ID：15889019
> 
> 赞同：3
> 
> 时间：2013-04-08T21:08:48.010
> 
> 标签：c++, game-engine, composite, entity-system, component-based

我正在开发一个游戏的学校项目。我们使用由我们拥有的一个团队制造的引擎。引擎的构建对我来说不清楚，似乎是一种反模式。然而，似乎没有人能让我清楚地选择设计。该引擎应该使用“基于组件”的设计，但我没有看到它。下面是 Component、Composite 和 Entity 类的代码。简而言之，我的问题是：**这段代码是使用有效的设计模式还是仅仅为了“实现设计模式”而过于复杂，从而导致反模式**？

**组件.cpp：**

```
#include "Engine\Component.h"
#include "Engine\Composite.h"

Component::Component(Composite* parent)

{
    this->parent = parent;
}

Component::~Component()
{
} 
```

**实体.cpp**

```
#include "Engine\Entity.h"
#include "Engine\Game.h"

Entity::Entity(Composite* parent):Composite(parent)
{
    this->mass = 1;
    node = NULL;
}

void Entity::update()
{
    Composite::update();

    this->angularVelocity += this->angularAccelaration;
    this->orientation += this->angularVelocity;

    this->accelaration = (1 / this->mass) * this->force;
    this->velocity += this->accelaration;
    this->position += this->velocity;
    if (node != NULL)
    {
        this->node->setPosition(this->position);
        this->node->setRotation(this->orientation);
    }
}

void Entity::draw()
{
    Composite::draw();

    if (node == NULL) return;
    if (!this->visible)
    {
        this->node->setVisible(false);
        return;
    }
    this->node->setVisible(true);

    this->node->render();
}

void Entity::createNode(std::string modelPath)
{
    // Get the mesh
    irr::scene::IAnimatedMesh* mesh = Game::getSceneManager()->getMesh(modelPath.c_str());

    // Create model entity
    this->node =  Game::getSceneManager()->addMeshSceneNode( mesh );
    this->node->setMaterialFlag(EMF_FOG_ENABLE, true);
}

Entity::~Entity()
{
    Composite::~Composite();
    if (node != NULL)
    {
        node->drop();
    }
} 
```

**复合材料.cpp**

```
#include "Engine\Composite.h"

Composite::Composite(Composite* parent):Component(parent)
{
}

Composite::~Composite()
{
    for (std::list<Component*>::iterator i = components.begin(); i != components.end(); ++i)
    {
        delete (*i);
    }
    components.clear();
}

void Composite::handleMessage(unsigned int message, void* data)
{
    for (std::list<Component*>::iterator i = components.begin(); i != components.end(); ++i)
    {
        (*i)->handleMessage(message, data);
    }
}

void Composite::update()
{
    for (std::list<Component*>::iterator i = components.begin(); i != components.end(); ++i)
    {
        (*i)->update();
    }
}

void Composite::draw()
{
    for (std::list<Component*>::iterator i = components.begin(); i != components.end(); ++i)
    {
        (*i)->draw();
    }
}

void Composite::addComponent(Component* component)
{
    components.push_back(component);
}

void Composite::removeComponent(Component* component)
{
    components.remove(component);
    delete component;
} 
```

下一段代码是 Player.cpp，它使用复合和实体作为混合类型的对象（我真的不明白逻辑）。

**播放器.cpp**

```
#include "Player.h"
#include "Messages.h"
#include <iostream>

Player::Player(Composite* parent) : Entity(parent)
{
    createNode("../assets/sydney.md2");
    //i = 0;
    //v3f = vector3df(0,0,0);
    /*networker = new NetworkComponent();
    addComponent(networker);
    networker->registerVar(&i);
    networker->registerVar(&v3f);*/
}

void Player::update() {
    Composite::update();
    //std::cout<<i<<std::endl;
    //std::cout<<"vectorx="<<v3f.X<<"\n";
}

void Player::handleMessage(unsigned int message, void* data) {
    switch(message) {
        case DAMAGE: /* Do something */;
    }
    delete data;
}

Player::~Player()
{
    Entity::~Entity();
} 
```

我根本不相信这是基于组件的设计。不应该删除实体，只使用复合和组件。组件基类不应该是空的，从不直接使用吗？就像一个名为“Rigidbody”的组件，它拥有一个用于刚体数据的数据结构和一些覆盖完全虚拟组件基类的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:30:56.737

发布的代码是[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)的变体。这种设计模式是一种*结构*模式，用于允许客户以统一的方式处理单个对象和复杂对象，例如由多个对象组成的对象。例如，渲染循环可以遍历对象集合，调用`draw()`其中的每一个。由于这是一种结构模式，因此很难主观回答这是否是过度工程的实例[，](http://en.wikipedia.org/wiki/Overengineering)因为它需要检查更多的类层次结构和架构。

然而，无论是类命名约定`Component`还是`Composite`复合设计模式的使用都没有暗示这是一种“基于组件”的设计。我不熟悉[游戏编程组件模式](http://gameprogrammingpatterns.com/component.html)，但它本质上似乎是在算法类中耦合状态的[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)，从而简化了 和 之间的`strategy`接口`context`。在任何一种情况下，这两种模式都是实现可互换和封装算法的*行为模式。*因此，发布的代码没有实现“基于组件”的设计，因为既不是`Component`, `Composite`, `Entity`, 也不是`Player`类提供了一种以可互换方式封装算法的方法。例如，`Entity::update()`将始终以相同的方式计算位置。如果需要使用不同的物理模型（考虑扭曲到具有不同物理集的行星的情况） ，这种耦合需要`Entity`扩展类层次结构，而不是委托给封装算法的类层次结构。`Entity``Entity``Physics`

# c# - 如何在 Gridview 中保持顺序

> ID：15889021
> 
> 赞同：1
> 
> 时间：2013-04-08T21:08:53.700
> 
> 标签：c#, asp.net, gridview

在我的程序（asp.net、C#）中，我使用 gridview 来显示数据。它从以下查询中获取数据。

```
select * from Nametable where NameID in (4,3,1,22,15,8,9,5,7) 
```

但问题是 Gridview 以 NameID 的升序显示数据，例如`(1,3,4,5,7,8,9,15,22)`. 我不想对数据进行排序，它应该完全按照我在查询中提到的方式显示`(4,3,1,22,15,8,9,5,7)`

这是我的代码

```
private void loadGridView()
{
    Query = "select * from Nametable where NameID in (4,3,1,22,15,8,9,5,7)"

        DataSet ds = SqlHelper.ExecuteDataset(CommonSettings.Constring, CommandType.Text, Query);
        GridView1.DataSource = ds;
        GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:18:03.610

使用您提供的代码很难做到这一点。它与您的 没有任何关系`GridView`，它是从 SQL 返回数据的方式。SQL 根本不会以这种方式为您排序结果。您必须像这样指定一个显`CASE`式`ORDER BY`：

```
Query = "select * from Nametable where NameID in (4,3,1,22,15,8,9,5,7) " +
        "order by case NameID when 4 then 0 " +
                             "when 3 then 1 " +
                             "when 1 then 2 " +
                             "when 22 then 3 " +
                             "when 15 then 4 " +
                             "when 8 then 5 " +
                             "when 9 then 6 " +
                             "when 5 then 7 " +
                             "when 7 then 8 end"; 
```

显然这是*非常*麻烦的。我强烈建议您尝试按列排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:18:22.970

Datagridview 的列有一个排序属性。可能为 ID 列启用了排序。检查 datagridview 的属性以禁用排序或以编程方式禁用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:32:09.280

您可以使用列（NameId、SortOrder）创建一个临时表作为查询的一部分，加入它，并按 SortOrder 对结果集进行排序——这将实现你想要做的——但它有点做作。

# php - 提交给 MySQL 的 PHP 代码不起作用

> ID：15889022
> 
> 赞同：0
> 
> 时间：2013-04-08T21:08:54.850
> 
> 标签：php, mysql, mysqli

很长时间以来，我一直想弄清楚哪里出了问题，但我无法弄清楚。我一直在尝试连接到本地 MySQL 数据库。当我运行它时，不会引发任何错误。另外，我知道数据库和表存在，并且我知道我的用户名和密码是正确的。

```
<?php 
// Connects to your Database 
$con = mysqli_connect("localhost", "**MY_USERNAME**", "**MY_PASSWORD**", "gamesite_data") or die(mysql_error()); 
$username = $_POST["username"];
$password = $_POST["password"];
$first_name = $_POST["first_name"];
$last_name = $_POST["last_name"];
$age = $_POST["age"];

mysqli_query($con, "INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ($username, $password, $firstname, $last_name, $age);"
);
?> 
<?php
mysqli_close($con)
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:55:56.277

这里：

```
mysqli_query($con, "INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ($username, $password, $firstname, $last_name, $age);"
); 
```

应该

```
mysqli_query($con, "INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ($username, $password, $first_name, $last_name, $age);"
); 
```

你没有`$firstname`变量，你有`$first_name`

还要记住，您需要`mysqli_real_escape_string()`用于所有`$_POST`值。

我认为将变量作为字符串传递给查询是一个好习惯：

```
"INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ('$username', '$password', '$first_name', '$last_name', '$age');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:58:21.163

我注意到你的代码在这里你犯了两个错误，第一个是你在你的 sql 查询中使用了错误的变量名。你声明了 $first_name 变量，但是你使用了 $firstname，第二个你在你的值结束后使用了额外的分号 (;) .

请使用此代码

```
<?php
$con = mysqli_connect("localhost", "root", "", "gamesite_data");
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
}
$username = $_POST["username"];
$password = $_POST["password"];
$first_name = $_POST["first_name"];
$last_name = $_POST["last_name"];
$age = $_POST["age"];
$query = "INSERT INTO information (`username`, `password`, `first_name`, `last_name`,  `age`) VALUES ($username, $password, $first_name, $last_name, $age)";
$result = mysqli_query($con, $query);
?> 
```

希望它的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:18:38.353

如果 username、password、first_name、last_name 的值是字符串，则必须在此处用单引号将它们括起来：

```
mysqli_query($con, "INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ('".$username."', '".$password."', '".$firstname."', '".$last_name."', ".$age.")"); 
```

如果你使用`mysqli_connect`，你必须使用也`mysqli_error`代替`mysql_error`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T21:31:50.390

尝试这个

```
 <?php 
 // Connects to your Database 
 $con = new mysqli("localhost", "**MY_USERNAME**", "**MY_PASSWORD**", "gamesite_data") or die(mysql_error()); 
 $username = $_POST["username"];
 $password = $_POST["password"];
 $first_name = $_POST["first_name"];
 $last_name = $_POST["last_name"];
 $age = $_POST["age"];

 $query="INSERT INTO information (`username`, `password`, `first_name`, `last_name`, `age`) VALUES ('$username', '$password', '$firstname', '$last_name', '$age')";
 $con->query($query);
 $con->close();
 ?> 
```

# asp.net-web-api - servicestack 中的 delegatingHandler (webapi) 等效项

> ID：15889023
> 
> 赞同：1
> 
> 时间：2013-04-08T21:08:59.827
> 
> 标签：asp.net-web-api, servicestack

我正在尝试从 asp.net mvc4 webapi 框架迁移到 servicestack 框架。我在 webapi 中有一个 delegatingHandler 与 servicestack 中的这个等效吗？

这是我将验证我的请求并返回自定义响应的地方，而无需进一步说明。

我的委托处理人

```
public class xyzDH : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        int maxLengthAllowed = 200;
        long? contentLen = request.Content.Headers.ContentLength; 
        if (contentLen > maxLengthAllowed)
        {
            var defaultResponse = ResponseHelper.GetBaseResponse("Content Lenght Issue", true, UploadLogSizeIssue);
            return Task<HttpResponseMessage>.Factory.StartNew(() =>
            {
                var response = new HttpResponseMessage(HttpStatusCode.OK)
                    {
                        Content = new StringContent(defaultResponse.ToString(), Encoding.UTF8, "message/http")
                    };
                return response;
            });
        }

        return base.SendAsync(request, cancellationToken);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:39:35.520

浏览一下[ServiceStack 的简单架构](https://github.com/ServiceStack/ServiceStack/wiki/Architecture-overview)是一个好主意，可以让您全面了解 ServiceStack 是如何组合在一起的。

### [自定义挂钩、过滤器和扩展点](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)

ServiceStack 允许在[Order of Operations wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)中确定许多自定义挂钩和可扩展点。您可以使用自定义[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)或[全局过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)来执行此操作，这使您可以直接写入响应，之后您可以调用`httpResponse.EndServiceStackRequest()`扩展方法来表示不应再对请求进行处理。

### [验证器](https://github.com/ServiceStack/ServiceStack/wiki/Validation)

由于您在请求验证的上下文中询问，您应该查看[ServiceStack 的内置验证](https://github.com/ServiceStack/ServiceStack/wiki/Validation)，它允许使用内置的 FluentValidation 进行声明式验证。

### [错误处理](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)

在很多情况下，只需抛出一个普通的 C# 异常即可。ServiceStack 提供了一个很好的故事，其中包括序列化服务客户端中的异常。阅读[错误处理 wiki](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)，了解自定义异常处理的不同方法。

## 使用全局请求过滤器

[这是您可以使用 ServiceStack全局请求过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)重写 WebApi 委托处理程序的方法：

```
this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    int maxLengthAllowed = 200;
    if (httpReq.ContentLength > maxLengthAllowed)
    {
        //httpRes.StatusCode = 200; //No-op, not needed since its the default
        //Guess it could also be "message/http" but never heard of it
        httpRes.ContentType = "text/plain"; 
        httpRes.Write("Content Length Issue"); //Whatever you want in body
        httpRes.EndServiceStackRequest(); //No more processing for this request
    }
}); 
```

**警告：**不建议返回`200 OK`无效的 HTTP 请求，如上所示。如果请求无效，它应该是一个`400 BadRequest`错误，当您[抛出一个继承 ArgumentException 的 C# Exception](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)时，ServiceStack 将自动写入该错误。

# javascript - 在 JavaScript 中将字符串“04/09/2013” MM/DD/YYY 转换为日期格式

> ID：15889025
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:09:09.483
> 
> 标签：javascript, jquery

我想将“04/09/2013”​​转换为日期，这样我就可以比较开始日期和结束日期，例如 if (stardate < enddate) { //do this } else {}。我想将其转换为 MM/DD/YYYY 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:12:25.600

在 JavaScript 中使用日期非常困难。我强烈推荐你使用 moment.js 库

[http://momentjs.com/](http://momentjs.com/)

# ios - iOS App在facebook sdk登录按钮上崩溃

> ID：15889027
> 
> 赞同：1
> 
> 时间：2013-04-08T21:09:10.860
> 
> 标签：ios, facebook, cocos2d-iphone

我的主屏幕上有一个 facebook 登录按钮。我可以根据需要使用该按钮多次登录和注销，而且它总是可以正常工作。然后在另一层，有一个按钮可以在 Facebook 上分享我的分数。有两种情况： Case1 是如果我登录了，它会分享分数。Case2是如果我没有登录，它会告诉用户我需要登录。这是我的分享按钮代码：

```
[FBRequestConnection startForPostStatusUpdate:message
                            completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                                UIAlertView *alert;
                                NSLog(@"%@",error);
                                if (!error)
                                {
                                    alert = [[UIAlertView alloc] initWithTitle:@"You score" message:@"has been published" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                                }
                                else{
                                    alert = [[UIAlertView alloc] initWithTitle:@"Login Failed" message:@"Please login to your facebook account" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                                }

                                [alert show];
                                [alert release]; 
```

所有这一切都按预期工作，但是如果我从上面描述的案例 2 返回到出现 facebook 登录按钮的主屏幕，那么如果我单击登录按钮，则会打开 facebook 权限页面。当我单击确定时，应用程序崩溃。它转到委托方法`loginViewShowingLoggedInUser`，但在转到委托方法之前`loginViewFetchedUserInfo`，它崩溃了。可能是什么原因？

# jquery - 从输入设置 Jquery UI 滑块的初始值

> ID：15889031
> 
> 赞同：12
> 
> 时间：2013-04-08T21:09:25.750
> 
> 标签：jquery, jquery-ui

我正在尝试概括一些滑块代码，以便它可以与一些输入+滑块组合一起使用。

我基本上一切正常 - 滑动滑块，输入值更新或在输入中输入一个数字，滑块移动到正确的位置。

但是，我无法从输入的默认值初始化滑块。这是我的代码的样子：

**Javascript**

```
$(".slider").slider({
        min: 0,
        max: 5,
        value: $(this).parent().find(".inputNumber").val(),
        step: 0.25,
        slide: function (event, ui) {
            $(this).parent().find(".inputNumber").val(ui.value);
        }
    }); 
```

**HTML**

```
 <div class="inputWrap hidden">
    <input class="mini inputNumber" type="text" value="0.5">
    <div class="slider"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T21:33:10.147

这对我有用（使用任意数量的滑块）：

```
$(".slider").slider({
    min: 0,
    max: 5,
    step: 0.25,
    slide: function (event, ui) {
        $(this).parent().find(".inputNumber").val(ui.value);
    },
    create: function(event, ui){
        $(this).slider('value',$(this).parent().find(".inputNumber").val());
    }
}); 
```

演示：http: [//jsfiddle.net/darkajax/uv5aC/](http://jsfiddle.net/darkajax/uv5aC/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:13:17.950

这似乎有效

```
$(".slider").each(function(){
    $(this).slider({
    min: 0,
    max: 5,
    step: 0.25,
    slide: function (event, ui) {
        $(this).parent().find(".inputNumber").val(ui.value);
    }
}).slider( "option", "value", $(this).parent().find(".inputNumber").val() );
}); 
```

[**小提琴**](http://jsfiddle.net/uMgnX/2/)

# uitableview - 带有自定义单元格的 NSFetchedResultsController

> ID：15889034
> 
> 赞同：1
> 
> 时间：2013-04-08T21:09:30.697
> 
> 标签：uitableview, core-data, nsfetchedresultscontroller

我正在使用 NSFetchedResultsController，但我不知道如何解决我当前的问题。我的表格视图中的标题是单元格而不是真正的标题，因为我不希望标题在滚动时粘在顶部。

该消息非常清楚：

```
CoreData: error: Serious application error.  An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.  Invalid update: invalid number of rows in section 1\.  The number of rows contained in an existing section after the update (2) must be equal to the number of rows contained in that section before the update (0), plus or minus the number of rows inserted or deleted from that section (1 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null) 
```

但是插入1行后section的行数需要为2！我怎样才能让表格视图知道这一点？我已经在做这样的事情了：

```
indexPath = [NSIndexPath indexPathForRow:indexPath.row + 1
                               inSection:section];

newIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row + 1
                                  inSection:section]; 
```

但在这种特殊情况下，它不起作用，在第一次崩溃之后，一切都按原样工作，因为这是唯一一次插入两个单元格，而只有一个来自核心数据本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:35:56.307

我终于找到了解决我的问题的方法！

我只是检查它是否是第一次通过 NSFetchedResultsController 委托 (didChangeObject:) 添加来自 NSFetchedResultsController 的单元格，如果是，我手动添加另一行。

片段：

```
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    NSInteger section = 1;
    indexPath = [NSIndexPath indexPathForRow:indexPath.row + 1
                                   inSection:section];

    NSMutableArray *newIndexPaths = [NSMutableArray array];
    id <NSFetchedResultsSectionInfo> sectionInfo = [controller.sections objectAtIndex:0];
    if ([sectionInfo numberOfObjects] == 1) {
        newIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row
                                          inSection:section];
        [newIndexPaths addObject:newIndexPath];
    }

    newIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row + 1
                                      inSection:section];
    [newIndexPaths addObject:newIndexPath];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:newIndexPaths
                                  withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                  withRowAnimation:UITableViewRowAnimationFade];
            break;
        default:
            break;
    }
} 
```

# python - 文本文件中的新行

> ID：15889043
> 
> 赞同：0
> 
> 时间：2013-04-08T21:10:04.743
> 
> 标签：python

我有一个格式为 example.txt 的文件：

```
a,b,c,d 
```

我想将其转换为：

```
a
b
c
d 
```

我写了这个，但它不起作用：

```
with open('newline.txt', 'w') as f: 
    f.write (file("example.txt", "r").read().replace(",", "\n")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:18:55.040

你也可以这样做：

```
with open('newline.txt', 'w') as f:  
    f.writelines (w + '\n' for w in open("example.txt").read().split(",")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:13:29.257

它应该是：

```
with open('newline.txt', 'w') as f: 
    f.write (open("example.txt", "r").read().replace(",", "\n")) 
```

[纪录片](http://docs.python.org/2/library/functions.html#file)中说，打开文件时，最好使用 open() 而不是直接调用 file() 构造函数

# android - 是否可以在新的 Android 开发者控制台中发布之前更新 APK 和商品详情？

> ID：15889044
> 
> 赞同：2
> 
> 时间：2013-04-08T21:10:07.723
> 
> 标签：android, developer-console

“新开发者控制台”现在是所有用户的标准。所以我们都必须处理旧控制台的行为变化。您曾经能够上传和发布 APK 更新并一步更新您的商品详情。我无法弄清楚如何在新控制台中做到这一点。

这是我尝试过的：

1.  我使用“简单模式”上传了我的 apk，但随后在有机会更改商品详情（例如最近的更改）之前被提示“立即发布”。

2.  我更改为“高级模式”并且能够上传我的 apk 并保存为草稿。然后我尝试访问商店列表，但这表示我无法保存更改，因为我已经存档或重新激活了一个或多个 apk。

3.  我改变了战术。我从前往商品详情开始并修改了我最近的更改。然后我尝试去 APK 区域上传我的新版本，它说如果不发布就无法保存商品详情。

我错过了什么吗？请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:16:03.360

我注意到新的开发者控制台也有同样的事情。但是，他们不允许您同时发布两者并不重要，因为无论如何商店都需要几个小时才能更新您的更改。当我看到商店从更改中更新时，我总是会看到它同时更新所有更改，即使它们是单独“发布”的（假设您在商店更新之前已经全部完成）。

# c++ - 使用 OpenCV 调整对比度和亮度

> ID：15889046
> 
> 赞同：1
> 
> 时间：2013-04-08T21:10:09.627
> 
> 标签：c++, opencv, image-processing, computer-vision

所以我试图用 OpenCV 来增加对比度和亮度。这就是我正在做的事情：

```
Mat image_copy;
cvtColor(image, image_copy, CV_BGRA2BGR);
image_copy.convertTo(image, -1, 1.3, 0.15); 
```

我得到的图像看起来很奇怪。它有蓝色调。红色和蓝色是颠倒的。所以我的红色套头衫是蓝色的，桌子上的一个蓝色罐头是红色的。

为什么？

我基本上是想达到与您在此处将对比度设置为 30 并将亮度设置为 15 时相同的效果：

[http://camanjs.com/examples/](http://camanjs.com/examples/)

# iphone - 无法从 for-in 循环中更新 NSMutableDictionary 值？

> ID：15889047
> 
> 赞同：2
> 
> 时间：2013-04-08T21:10:11.223
> 
> 标签：iphone, ios, objective-c, ipad

我在更新 NSMutableDictionary 值时遇到了一个奇怪的问题。我正在运行一个 for-in 循环，一切都很好，我的数学很好。

当我尝试使用该`setValue: forKey:`方法更新我的字典时，问题就出现了。

```
for(NSString *key in self.planetDictionary){
         if(![key isEqualToString:planet]){ 

             * * *
            //do some math and stuff, create an NSNumber:
             NSNumber *update = [NSNumber numberWithFloat:updatedProbability];

             //Problem code, EXC_BAD_ACCESS here:
             [self.planetDictionary setValue:update forKey:key];
        }
    } 
```

我得到 EXC_BAD_ACCESS 崩溃。我可以确认其他一切都很好，它只是我尝试更新值的单行。

这是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T21:18:18.270

你不能改变你正在快速枚举的对象。每次都会崩溃。作为一种解决方法，您可以先制作一个副本：

```
NSDictionary *dictionary = [self.planetDictionary copy];

for (NSString *key in dictionary) {
     if (![key isEqualToString:planet]) {              
         NSNumber *update = [NSNumber numberWithFloat:updatedProbability];
         [self.planetDictionary setValue:update forKey:key];
    }
} 
```

或者，如果您的字典中有大对象（符合`NSCopying`，否则它只是一个浅拷贝并且不会很重要），因此您不想复制所有对象，那么您可以简单地复制键（作为数组）并像这样枚举它们：

```
NSArray *keysCopy = [[self.planetDictionary allKeys] copy];

for (NSString *key in keysCopy) {
    if (![key isEqualToString:planet]) { 
        NSNumber *update = [NSNumber numberWithFloat:updatedProbability];
        [self.planetDictionary setValue:update forKey:key];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:13:38.910

看起来你在枚举它时正在改变它。

循环时不能更改 NSDictionary。

您可能希望在循环之前对其进行复制，并在更改原始文件时枚举该副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T21:16:35.160

在 for 循环中使用它时不能更新它。使用字典键的副本在 for 循环中使用并更新 for 循环内的原始键。

# datetime - Solr：查询本周添加的文档的最佳方式是什么？

> ID：15889051
> 
> 赞同：0
> 
> 时间：2013-04-08T21:10:33.120
> 
> 标签：datetime, solr, pysolr

好吧，伙计们。所以我希望我的查询能够命中相同的过滤器缓存，我真正不想做的是在我的代码中计算一周的开始并基于此构造查询。有没有办法让 solr 根据周返回？

我在这里找不到任何东西：http: [//docs.lucidworks.com/display/lweug/Solr+Date+Format](http://docs.lucidworks.com/display/lweug/Solr+Date+Format) Using [NOW/DAY-7DAYS TO NOW/DAY+1DAY] 不会有帮助，因为它不知道开始和结束星期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:10:38.797

确实涉及客户端的计算并基于此制定查询，因此，可能不是您要查找的内容:)

在 java 中（如果你的一周从星期一开始）：

客户：

```
(new Date().getTime()-345600000)/604800000 = 2257 
```

询问：

```
select?q=*:*&fq={!frange%20l=2257%20u=2258}div(sub(field(last_update),345600000),604800000)&wt=json&indent=true 
```

# ruby-on-rails - 在 Rails 应用程序上验证 Twitter

> ID：15889054
> 
> 赞同：0
> 
> 时间：2013-04-08T21:10:45.020
> 
> 标签：ruby-on-rails, twitter, twitter-oauth, spree

我正在使用 twitter gem 和 amniauth 来获取用户的推文并将它们显示在我的主页上。但是当我尝试从命令行获取推文时，我收到了“错误的身份验证数据”错误。

宝石文件：

```
gem 'omniauth'
gem 'omniauth-twitter'
gem 'twitter' 
```

config/initializers 中的 Twitter.rb：

```
Twitter.configure do |config|
  config.consumer_key = 'key'
  config.consumer_secret = 'secret'
  config.oauth_token = 'token'
  config.oauth_token_secret = 'secret'
end 
```

配置/初始化程序中的omniauth.rb：

```
require 'omniauth-twitter'
config.omniauth :twitter, 'key', 'secret' 
```

我已经仔细检查了我的密钥和密码，但我无法让它运行。我正在使用狂欢。这是错误：

```
irb(main):001:0> require 'twitter'
=> true
irb(main):002:0> Twitter.user_timeline(213747670)            
Twitter::Error::BadRequest: Bad Authentication data
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/response/raise_error.rb:21:in `on_complete'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/response.rb:9:in `block in call'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/response.rb:63:in `on_complete'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/response.rb:8:in `call'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/request/url_encoded.rb:14:in `call'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/request/multipart.rb:13:in `call'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/request/multipart_with_file.rb:14:in `call'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/connection.rb:247:in `run_request'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/faraday-0.8.7/lib/faraday/connection.rb:100:in `get'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/client.rb:81:in `request'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/client.rb:64:in `get'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/api/utils.rb:51:in `objects_from_response'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/api/utils.rb:42:in `objects_from_response_with_user'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter/api/timelines.rb:53:in `user_timeline'
    from /usr/local/lib64/ruby/gems/1.9.1/gems/twitter-4.6.2/lib/twitter.rb:52:in `method_missing'
    from (irb):2 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T12:33:33.970

要获取和显示用户的推文，最好使用*twitter* gem。
有关分步说明，请参阅以下链接

[http://shouweick.blogspot.in/2011/11/rails-3-and-twitter-api-by-shouweick.html?showComment=1381925399790#c6571680143535387130](http://shouweick.blogspot.in/2011/11/rails-3-and-twitter-api-by-shouweick.html?showComment=1381925399790#c6571680143535387130)

[https://gist.github.com/fnichol/867550](https://gist.github.com/fnichol/867550)

# perl - 在 perl 中从 XML 文件中提取属性和值

> ID：15889055
> 
> 赞同：0
> 
> 时间：2013-04-08T21:10:47.910
> 
> 标签：perl, xml-parsing, stanford-nlp

这是我从 Stanford CoreNLP 获得的输出 XML 文件的一部分：

```
<collapsed-ccprocessed-dependencies>  
      <dep type="nn">
        <governor idx="25">Mullen</governor>
        <dependent idx="24">Ms.</dependent>
      </dep>
      <dep type="nsubj">
        <governor idx="26">said</governor>
        <dependent idx="25">Mullen</dependent>
      </dep>
    </collapsed-ccprocessed-dependencies>
  </sentence>
</sentences>
<coreference>
  <coreference>
    <mention representative="true">
      <sentence>1</sentence>
      <start>1</start>
      <end>2</end>
      <head>1</head>
    </mention>
    <mention>
      <sentence>1</sentence>
      <start>33</start>
      <end>34</end>
      <head>33</head>
    </mention>
  </coreference>
 </coreference>
<mention representative="true">
      <sentence>1</sentence>
      <start>6</start>
      <end>9</end>
      <head>8</head>
    </mention>
    <mention>
      <sentence>1</sentence>
      <start>10</start>
      <end>11</end>
      <head>10</head>
    </mention>
  </coreference>
  <coreference> 
```

如何使用 Perl 解析它，以便得到如下内容：

```
1\. sentence 1, head 1
   sentence 1, head 33
2\. sentence 1, head 8
   sentence 1, head 10 
```

我尝试过使用 XML::Simple，但输出不容易理解。这是我所做的：使用 XML::Simple；使用 Data::Dumper；

```
$outfile = $filename.".xml";
$xml = new XML::Simple;

$data = $xml -> XMLin($outfile);
print Dumper($data); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:28:19.320

XML::Simple 具有最难使用的接口。你可以使用类似的东西

```
use XML::LibXML qw( );

my $parser = XML::LibXML->new();
my $doc = $parser->parse_string($xml);

my $coref_count;
for my $coref_node ($doc->findnodes('//coreference/coreference')) {
   ++$coref_count;

   my $mention_count;
   for my $mention_node ($coref_node->findnodes('mention')) {
      ++$mention_count;

      my $sentence = $mention_node->findvalue('sentence/text()');
      my $head     = $mention_node->findvalue('head/text()');

      my $prefix = "$coref_count.";
      $prefix = ' ' x length($prefix) if $mention_count == 1;

      print "$prefix sentence $sentence, head $head\n";
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:28:18.350

令人遗憾的是，`XML::Simple`它首先提出了对`Simple`命名空间的要求。它的实现可能很简单，但使用起来并不简单，除非在最微不足道的情况下。如果你想要类似的东西，那么[`XML::Smart`](https://metacpan.org/module/XML%3a%3aSmart)提供一个嵌套的数据结构 API，但它做得更好。

值得庆幸的是，优秀的 Perl XML 模块有很多选择。[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)是其中之一，它允许您指定在解析期间遇到 XML 数据中的特定元素时将执行的回调子例程。

这个程序使用`XML::Twig`，并设置一个回调 on `coreference[mention]`，即`coreference`至少有一个`mention`孩子的元素。

处理程序子例程中的代码不进行任何检查，并假定总是至少有两个`mention`子元素，每个子元素都有一个`sentence`和一个`header`元素。这些节点的文本值以您描述的格式输出。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new(twig_handlers => {
  'coreference[mention]' => \&handle_coreference
});
$twig->parsefile('myxml.xml');

my $n;
sub handle_coreference {

  my ($twig, $elt) = @_;

  my @mentions = $elt->children('mention');

  for my $i (0 .. $#mentions) {
    printf "%s sentence %d, head %d\n",
      $i == 0 ? sprintf '%3d.', ++$n : '    ',
      map $mentions[$i]->first_child_trimmed_text($_), qw/ sentence head /;
  }
} 
```

**输出**

```
 1\. sentence 1, head 1
     sentence 1, head 33
  2\. sentence 1, head 8
     sentence 1, head 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:28:39.273

就像是：

```
use strict;
use warnings;

use XML::Rules;

my $mention_cnt;
my $ref_cnt = 1;
my @rules = (
  coreference => sub {
    $ref_cnt++ if $mention_cnt;
    $mention_cnt = 0;
  },
  mention => sub {
    my $d = $_[1];
    my $str = $mention_cnt++ ? " " x 6 : sprintf("%-6s", "$ref_cnt.");
    print "$str sentence: $d->{sentence} head: $d->{head}\n";
  },
  'sentence,head' => 'content',
);

my $xr = XML::Rules->new(
  rules => \@rules,
);
$xr->parse($xml); 
```

# jquery - jQuery 列表项菜单

> ID：15889060
> 
> 赞同：1
> 
> 时间：2013-04-08T21:11:17.797
> 
> 标签：jquery, menu, traversal

我们有一个主菜单，它可以包含任意数量或父子项。我们希望所有子 UL 一开始就隐藏，然后单击给定的 li，它的子 UL 会显示。

你可以在这里看到这个工作：http: [//jsfiddle.net/JnL58/12/](http://jsfiddle.net/JnL58/12/)

```
$("ul.nav_categories ul").hide();

$("ul.nav_categories li").click(function(el){
    el.preventDefault();
    var cur_el = $("> ul", this);
    if (cur_el.length > 0) {
        $("> ul", this).show();
    }
}); 
```

我们正在努力解决的问题是将相关 UL 的 APART 隐藏在被点击的元素父 UL 或兄弟 Ul 中。

[所以本质上它是一个像http://jsfiddle.net/FjCcT/4/](http://jsfiddle.net/FjCcT/4/)这样的下拉菜单，它适用于点击而不是翻转：

```
$("ul.nav_categories ul").hide();
$("ul.nav_categories li").hover(function(){
    if ($("> ul", this).length > 0) {
        $("> ul", this).show();
    }
}, function(){
    if ($("> ul", this).length > 0) {
        $("> ul", this).hide();
    }
}); 
```

请注意，这需要在不同的级别上工作，例如 2、3、4 甚至可能 5 项深度。列表是动态的，因此我们不会知道级别数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:16:44.567

总编辑。当然，解决方案必须非常简单。:3

```
$("ul.nav_categories ul").hide();

$("ul.nav_categories li").click(function(){
    $('li > ul').not($(this).parents('ul')).hide();
    $(this).find('> ul').show();
    return false;
}); 
```

[http://jsfiddle.net/Bhnzc/3/](http://jsfiddle.net/Bhnzc/3/)

# bash - BASH 函数：意外标记“2”附近的语法错误

> ID：15889063
> 
> 赞同：1
> 
> 时间：2013-04-08T21:11:24.650
> 
> 标签：bash, function, syntax, token

我完全不知道为什么这个错误不断发生，我相当确定我使用了正确的语法，但是，每次我执行这个 BASH 脚本时，我都会收到以下错误：

```
/home/clucky/MCServerBackup/MCServerBackup.sh: line 200: syntax error near unexpected token `'2''
/home/clucky/MCServerBackup/MCServerBackup.sh: line 200: `    logInfo() '2' "none" "Minecraft: $minecraftsize.$minecraftsized $minecraftunit"' 
```

特别是它似乎正在引用的行是第 200 行，这是代码尝试执行函数的位置`logInfo()`，如下所示：

```
logInfo() '2' "none" "Minecraft: $minecraftsize.$minecraftsized $minecraftunit" 
```

在上面的代码行中，`2`是缩进级别（2 x 5 个空格）。`none`告诉函数忽略`logLevel`配置中指定的内容并无论如何记录它。`Minecraft: $minecraftsize...$minecraftunit`是添加到日志文件中的内容，其中以 $ 开头的单词当然是变量。整个代码可以在下面查看。

```
#! /usr/bin/env bash
#Declare Functions
logInfo() {
if [ "$logInFile" == "true" ] || [ "$logInConsole" == "true" ] ; then
    let tabAmount=5*$1
    indent=""
    for (( indentrepeat=0; indentrepeat < $tabAmount; indentrepeat++ ))
    do
        indent="$indent "
    done
    if [ "$2" == "none" ] ; then

        infoItem="$3"
    else
        if [ "$logLevel" == "high" ] ; then
            if [ "$2" == "subtask" ] ; then
                #High + Subtask
                infoItem="`date '+%H:%M:%S'` $3"
            elif [ "$2" == "task" ] ; then
                #High + Task
                infoItem="`date '+%H:%M:%S'` $3"
            fi
        elif [ "$logLevel" == "medium" ] ; then
            if [ "$2" == "subtask" ] ; then
                #Medium + Subtask
                infoItem="$3"
            elif [ "$2" == "task" ] ; then
                #Medium + Task
                infoItem="`date '+%H:%M:%S'` $3"
            fi
        else
            if [ "$2" == "subtask" ] ; then
                #Low + Subtask
                infoItem=''
            elif [ "$2" == "task" ] ; then
                #Low + Task
                infoItem="$3"
            fi
        fi
    fi
    if [ "$logInFile" == "true" ] ; then
        echo -e "$indent$infoItem" >> backup.log
    fi
    if [ "$logInConsole" == "true" ] ; then
        echo -e "$indent$infoItem"
    fi
fi
}
logError() {
if [ "$logInFile" == "true" ] || [ "$logInConsole" == "true" ] ; then
    let tabAmount=5*$1
    indent=""
    for (( indentrepeat=0; indentrepeat < $tabAmount; indentrepeat++ ))
    do
        indent="$indent "
    done
    if [ "$logInFile" == "true" ] && [ "$logErrors" == "true" ] ; then
        echo -e "$indent[ERROR] $2" >> backup.log
    fi
    if [ "$logInConsole" == "true" ] && [ "$logErrors" == "true" ] ; then
        echo -e "$indent[ERROR] $2"
    fi
fi
}
#Set Variables
source config.sh
minecraftsize=0
sqlsize=0
websitesize=0
timedate=`date '+%m.%d.%Y-%H:%M'`
#Update
if [ $version != "1.0.0" ] ; then
    source update.sh
fi
#Trigger General Settings
echo -ne "\033]0;$serverName - Backup\007"
if [ "$serverDirectory" == "default" ] ; then
    BINDIR="$(dirname "$(readlink -fn "$0")")"
    cd "$BINDIR"
else
    if [ -d "$serverDirectory" ] ; then
        cd "$serverDirectory"
    else
        directoryExists=false
        echo '$serverDirectory defined as '"$serverDirectory"' does not exist. Please double check your configuration and make sure this folder exists.'
        if [ "$logInFile" == "true" ] ; then
            echo "-------------- `date '+%d-%B-%Y %H:%M'` --------------" >> backup.log
            echo -e '     [ERROR] $serverDirectory defined as '"$serverDirectory"', does not exist. Please double check your configuration and make sure this folder exists.'"\n" >> backup.log
        fi
    fi
fi
if [ "$purgeFiles" == "true" ] || [ "$backupMinecraft" == "true" ] || [ "$backupMySQL" == "true" ] || [ "$backupWebsite" == "true" ] && [ "$directoryExists" != "false" ] ; then
    echo "-------------- `date '+%d-%B-%Y %H:%M'` --------------" >> backup.log
    #Create Directories
    echo "[`date '+%H:%M:%S'`] Directory Creation Started" >> backup.log
    if [ ! -d ".backups" ] ; then
        mkdir -p .backups
    fi
    mkdir -p .backups/$timedate
    if [ "$backupMySQL" == "true" ] ; then
        mkdir -p .backups/$timedate/MySQL
    fi
    if [ "$backupWebsite" == "true" ] ; then
        mkdir -p .backups/$timedate/Website
    fi
    if [ "$backupMinecraft" == "true" ] ; then
        mkdir -p .backups/$timedate/MinecraftServers
    fi
    echo "[`date '+%H:%M:%S'`] Directory Creation Completed" >> backup.log
    #Backup Minecraft Servers
    if [ "$backupMinecraft" == "true" ] ; then
        echo "[`date '+%H:%M:%S'`] Minecraft Backup Started" >> backup.log
        for (( servercount = 0; servercount < ${#mcservers[@]}; servercount++ ))
        do
            echo "     ${mcservers[servercount]}" >> backup.log
            tar -zcpf .backups/$timedate/MinecraftServers/${mcservers[servercount]}.tar.gz --directory ${mcservers[servercount]} ${fileexcludes[servercount]} .
        minecraftsize=`expr $minecraftsize + $(ls -la .backups/$timedate/MinecraftServers/${mcservers[servercount]}.tar.gz | awk '{ print $5}')`
        done
        echo "[`date '+%H:%M:%S'`] Minecraft Backup Completed" >> backup.log
    fi
    #Copy MySQL Databases
    if [ "$backupMySQL" == "true" ] ; then
        echo "[`date '+%H:%M:%S'`] MySQL Backup Started" >> backup.log
        for (( sqlcount = 0; sqlcount < ${#sqldatabases[@]}; sqlcount++ ))
        do
            if [[ "${sqldatabases[sqlcount]}" =~ @ ]] ; then
                sqldatabases[sqlcount]=${sqldatabases[sqlcount]//[@]/}
                mysqldump -u"$sqluser" -p"$sqlpass" -h"$sqlhost" ${sqldatabases[sqlcount]} > .backups/$timedate/MySQL/${sqldatabases[sqlcount]}.sql;
                sqlsize=`expr $sqlsize + $(ls -la .backups/$timedate/MySQL/${sqldatabases[sqlcount]}.sql | awk '{ print $5}')`
                echo "     ${sqldatabases[sqlcount]}*" >> backup.log
            else
                mysqldump -u"$sqluser" -p"$sqlpass" -h"$sqlhost" --skip-lock-tables ${sqldatabases[sqlcount]} > .backups/$timedate/MySQL/${sqldatabases[sqlcount]}.sql;
                sqlsize=`expr $sqlsize + $(ls -la .backups/$timedate/MySQL/${sqldatabases[sqlcount]}.sql | awk '{ print $5}')`
                echo "     ${sqldatabases[sqlcount]}" >> backup.log;
            fi
        done
    fi
    #Backup Website
    if [ "$backupWebsite" == "true" ] ; then
        echo "[`date '+%H:%M:%S'`] Website Backup Started" >> backup.log
        if [ "$websiteDirectory" == "default" ] ; then
            websiteDirectory=var/www/
        fi
        if [ -d "$websiteDirectory" ] ; then
            tar -zcpf .backups/$timedate/Website/website.tar.gz --directory $websiteDirectory $websiteExcludes .
            echo "[`date '+%H:%M:%S'`] Website Backup Completed" >> backup.log
        else
            logError "5" "\0044websiteDirectory defined as $websiteDirectory does not exist. Please double check your configuration and make sure this folder exists."
            echo "[`date '+%H:%M:%S'`] Website Backup Cancelled" >> backup.log
        fi
    fi
    #Purge files 3 days old
    if [ "$purgeFiles" == "true" ] ; then
        echo "[`date '+%H:%M:%S'`] Purging Old Backups" >> backup.log
        find .backups* -mmin +$purgeTime -exec rm --recursive {} \;
        echo "[`date '+%H:%M:%S'`] Purging Complete" >> backup.log
    fi
    #Read back file size
    let filesize=$minecraftsize+$sqlsize+$websitesize
    if [ "$filesize" -ge 1024 ] ; then
        if [ "$filesize" -ge 1048576 ] ; then
            if [ "$filesize" -ge 1073741824 ] ; then
                filedivider=1073741824
                fileunit="GB"
            else
                filedivider=1048576
                fileunit="MB"
            fi
        else
            filedivider=1024
            fileunit="KB"
        fi
    else
        filedivider=1
        fileunit="Bytes"
    fi
    let filesized='(''('$filesize%$filedivider')'*100')'/$filedivider
    let filesize=$filesize/$filedivider
    echo "     Total Compression Size: $filesize.$filesized $fileunit" >> backup.log
    if [ "$backupMinecraft" == "true" ] ; then
        if [ "$minecraftsize" -ge 1024 ] ; then
            if [ "$minecraftsize" -ge 1048576 ] ; then
                if [ "$minecraftsize" -ge 1073741824 ] ; then
                    minecraftdivider=1073741824
                    minecraftunit="GB"
                else
                    minecraftdivider=1048576
                    minecraftunit="MB"
                fi
            else
                minecraftdivider=1024
                minecraftunit="KB"
            fi
        else
            minecraftdivider=1
            minecraftunit="Bytes"
        fi
    let minecraftsized='(''('$minecraftsize%$minecraftdivider')'*100')'/$minecraftdivider
    let minecraftsize=$minecraftsize/$minecraftdivider
    logInfo() '2' "none" "Minecraft: $minecraftsize.$minecraftsized $minecraftunit"
    fi
    if [ "$backupMySQL" == "true" ] ; then
        if [ "$sqlsize" -ge 1024 ] ; then
            if [ "$sqlsize" -ge 1048576 ] ; then
                if [ "$sqlsize" -ge 1073741824 ] ; then
                    sqldivider=1073741824
                    sqlunit="GB"
                else
                    sqldivider=1048576
                    sqlunit="MB"
                fi
            else
                sqldivider=1024
                sqlunit="KB"
            fi
        else
            sqldivider=1
            sqlunit="Bytes"
        fi
    let sqlsized='(''('$sqlsize%$sqldivider')'*100')'/$sqldivider
    let sqlsize=$sqlsize/$sqldivider
    echo "          MySQL: $sqlsize.$sqlsized $sqlunit" >> backup.log
    fi
    if [ "$backupWebsite" == "true" ] ; then
        if [ "$websitesize" -ge 1024 ] ; then
            if [ "$websitesize" -ge 1048576 ] ; then
                if [ "$websitesize" -ge 1073741824 ] ; then
                    websitedivider=1073741824
                    websiteunit="GB"
                else
                    websitedivider=1048576
                    websiteunit="MB"
                fi
            else
                websitedivider=1024
                websiteunit="KB"
            fi
        else
            websitedivider=1
            websiteunit="Bytes"
        fi
    let websitesized='(''('$websitesize%$websitedivider')'*100')'/$websitedivider
    let websitesize=$websitesize/$websitedivider
    echo "          Website: $websitesize.$websitesized" >> backup.log
    fi
    echo "" >> backup.log
fi 
```

正如我之前所说，我完全迷失了，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:19:31.693

您不会调用带括号的函数。改变：

```
 logInfo() '2' "none" "Minecraft: $minecraftsize.$minecraftsized $minecraftunit" 
```

到

```
 logInfo '2' "none" "Minecraft: $minecraftsize.$minecraftsized $minecraftunit" 
```

# android - 如何在我拥有和控制的设备上授予超级用户对我的应用程序的访问权限？

> ID：15889071
> 
> 赞同：0
> 
> 时间：2013-04-08T21:11:48.027
> 
> 标签：android

# 背景

*   我们构建和控制运行应用程序的硬件设备。
*   （编辑）我们也将尽快构建 Android 操作系统的自定义版本。
*   我们正在构建一个我们希望“永远在线”的应用程序。
*   我们希望应用程序能够独立于市场进行自我更新。因此，我们托管了一项服务，客户端应用程序将定期轮询更新，下载 apk，然后安装它。其中的谎言...

# 问题

我希望 UpdateService 安装下载的应用程序更新**而不**给用户通常的权限和更新提示 - 毕竟，我们控制硬件和软件。为此，我**认为**我需要授予我的应用超级用户权限（但是，如果有其他方式，那么我的问题将变得完全不同）。但我不知道该怎么做。

我**已经**阅读了一个可以安装的超级用户应用程序 - 但这似乎是想要根植自己手机的用户的用户解决方案。或者为想要分发需要超级用户的应用程序的开发人员提供解决方案，但他们不控制用户安装它的设备。

android 操作系统中是否有一个文件列出了应该有 su 的应用程序或用户？如果是这样，那没问题；我们控制一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T16:20:20.440

首先我下载然后运行卸载和安装（系统已root）

```
private void uninstall() {

        try {
            Process p = Runtime.getRuntime().exec("su");
            InputStream es = p.getErrorStream();
            DataOutputStream os = new DataOutputStream(p.getOutputStream());

            os.writeBytes("pm uninstall  com.example.app\n");

            os.writeBytes("exit\n");
            os.flush();
            int read;
            byte[] buffer = new byte[4096];
            String output = new String();
            while ((read = es.read(buffer)) > 0) {
                output += new String(buffer, 0, read);
            }
            p.waitFor();
        } catch (Exception e) {
        }
    }

    private void install() {
        try {
            // Do the magic
            Process p = Runtime.getRuntime().exec("su");
            InputStream es = p.getErrorStream();
            DataOutputStream os = new DataOutputStream(p.getOutputStream());

            os.writeBytes("pm install /mnt/sdcard/exampple/app.apk\n");

            os.writeBytes("exit\n");
            os.flush();
            int read;
            byte[] buffer = new byte[4096];
            String output = new String();
            while ((read = es.read(buffer)) > 0) {
                output += new String(buffer, 0, read);
            }
            p.waitFor();

        } catch (IOException e) {
            Log.d("catch silant", "1");
        } catch (InterruptedException e) {
            Log.d("catch silant", "2");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:44:54.850

看看这个：[https ://code.google.com/p/auto-update-apk-client/downloads/detail?name=auto-update-apk-client_2012-10-04.tgz&can=2&q=](https://code.google.com/p/auto-update-apk-client/downloads/detail?name=auto-update-apk-client_2012-10-04.tgz&can=2&q=)

我认为它可以帮助您，如果您成功，我现在也在尝试这样做，请写信，因为我很难做到。

# html - 在css菜单上添加下拉效果

> ID：15889075
> 
> 赞同：0
> 
> 时间：2013-04-08T21:11:55.837
> 
> 标签：html, css

**在发布问题之前，我已经竭尽全力地搜索了这个网站以寻找答案，我尝试了多种解决方案，但对我的确切代码没有任何作用。虽然您可能会在本网站上找到重复的问题。我不认为它是重复的，除非编码和解决方案完全相同。该站点上的任何内容都不适用于我的确切编码，因此我需要发布我的确切代码以寻求帮助。**

我有一个类似于下面的菜单。和它的下拉。现在嵌套的 ul 只是简单地传播到整个页面。它需要显示在管理下的一个不错的下拉部分中。我试过搜索这个并问我的同事他们以前没有做过。我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/z3Lpm/](http://jsfiddle.net/z3Lpm/)

```
<div id="menu"> 
 <ul>
   <li><a href="#">Home</a></li> 
   <li><a href="#">Administration</a> 
       <ul> 
           <li><a href="#">Products</a></li> 
       </ul> 
   </li> 
 </ul>
</div> 
```

（不是我的完整菜单，但你明白了。）

然后我的CSS：

```
#menu{
   width: 100%;
   border: 1px solid #000;
   height: 50px;
   background-color:#181818;
   font-family: Helvetica, sans-serif;
   font-size: 13px;
}

#menu ul{
    margin-top:  20px;
}

#menu ul li{
    list-style-type: none;
    display: inline;
    margin-left: 50px;
}

#menu ul li a:link{
   color: #FFF;
   text-decoration: none;
   text-transform: uppercase;
   padding-top: 40px;
   padding-bottom: 40px;
   padding-left: 20px;
   padding-right: 20px;
}

#menu ul li a:visited{
   color: #FFF;
   text-decoration: none;
   text-transform: uppercase;
}

#menu ul li a:hover{
   color: #FFF;
   background-color: #81B101;
   -webkit-box-shadow: 0px 4px 5px rgba(50, 50, 50, 0.93);
   -moz-box-shadow:    0px 4px 5px rgba(50, 50, 50, 0.93);
   box-shadow:         0px 4px 5px rgba(50, 50, 50, 0.93);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:53:56.093

在这里，我没有改变颜色或任何东西，因为我不知道你在用它们做什么。让我知道这是否适合您。

[http://jsfiddle.net/talymo/LDNpG/](http://jsfiddle.net/talymo/LDNpG/)

```
#menu{
    background-color:#181818;
    font-family: Helvetica, sans-serif;
    font-size: 13px;
    height:50px;
}

    #menu ul{
        list-style:none;
        padding-top:15px;
    }

        #menu ul li{
            padding:0px 20px;
            width:auto;
            float:left;
            position:relative;
        }

        #menu ul li:hover > ul{
            display:block;     
        }

            #menu ul li a{
                color: #FFF;
                text-decoration: none;
                text-transform: uppercase;
                padding-top: 40px;
                padding-bottom: 40px;
                padding-left: 20px;
                padding-right: 20px;
            }

            #menu ul li a:hover{
               color: #FFF;
               background-color: #81B101;
               -webkit-box-shadow: 0px 4px 5px rgba(50, 50, 50, 0.93);
               -moz-box-shadow:    0px 4px 5px rgba(50, 50, 50, 0.93);
               box-shadow:         0px 4px 5px rgba(50, 50, 50, 0.93);
            }

        #menu ul li ul{
            overflow:hidden;
            padding:0;
            margin:0;
            display:none;
            position:absolute;
            top:20px;
        } 
```

# java - SQLite WHERE 语句不起作用？

> ID：15889076
> 
> 赞同：1
> 
> 时间：2013-04-08T21:11:57.850
> 
> 标签：java, android, sql

我正在制作一个应用程序来存储书名、添加日期和需要归还书的日期。下面，我展示了`where`获取从今天到两天之间归还的所有书籍的语句，以列表视图的形式返回。但是，它不起作用，我不确定我哪里出错了：

```
 public Cursor fetchAllDue() {

    //get todays date
    Calendar cal=Calendar.getInstance();
    int currentDay=cal.get(Calendar.DAY_OF_MONTH);

    //Add days on to todays date
    cal.set(Calendar.DAY_OF_MONTH, currentDay+2);
    cal.getTime(); //Result

    //format back to string
    String formattedDate = new SimpleDateFormat("dd-MM-yyyy HH:mm").format(cal.getTime());

  //get todays date
    Calendar cal1=Calendar.getInstance();
    int currentDay1=cal1.get(Calendar.DAY_OF_MONTH);

    //Atodays date
    cal1.set(Calendar.DAY_OF_MONTH, currentDay1);
    cal1.getTime(); //Result

    //format back to string
    String formattedDate1 = new SimpleDateFormat("dd-MM-yyyy HH:mm").format(cal1.getTime());

    //body = date added, needs to be changed
    return mDb.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_TITLE,
            KEY_BODY, KEY_EXTRA, KEY_DUE }, KEY_DUE + " BETWEEN 'formattedDate1' and 'formattedDate2'", null, null, null, null);
} 
```

这是为“到期日”输入日期时的代码：

```
 //convert string to int.
            int myNum = Integer.parseInt(editbox3.getText().toString());

            //get todays date
            Calendar cal=Calendar.getInstance();
            int currentDay=cal.get(Calendar.DAY_OF_MONTH);

            //Add days on to todays date
            cal.set(Calendar.DAY_OF_MONTH, currentDay+myNum);
            cal.getTime(); //Result

            //formate back to string
            String formattedDate = new SimpleDateFormat("dd-MM-yyyy HH:mm").format(cal.getTime());

            bundle.putString(NotesDbAdapter.KEY_DUE,formattedDate
                    .toString()); 
```

日期都是字符串。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:19:13.917

你的查询是错误的。您使用`formattedDate1`and`formattedDate2`但您的代码正在设置`formattedDate`and `formattedDate1`，更不用说非常重要的事实，即这些不会影响您的查询，因为您没有传递它。它应该是这样的：

```
String where = KEY_DUE + " BETWEEN ? AND ?";
String[] args = { String.valueOf(formattedDate1), String.valueOf(formattedDate2) };
return mDb.query(DATABASE_TABLE, where, args, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:16:43.510

我认为**WebnetMobile**的答案是正确的！

在 Android 上使用 SQLite，我总是使用`INTEGER`包含日期的 UNIX 时间戳的字段。因此，我可以更快地执行查询，并且没有`WHERE`字符串日期转换问题。

```
Date date;
...
long timeStamp = date.getTime(); 
```

您还可以尝试使用日期作为查询的参数：

```
Date from, to;
long timeStampFrom = from.getTime();
long timeStampTo = to.getTime();

String[] params = new String[] { String.valueOf(from), String.valueOf(to) };
c = db.rawQuery("SELECT * FROM " + getTableName() + " WHERE DateTime BETWEEN ? AND ?", params); 
```

或者如果你想使用 UNIX 时间戳：

```
String[] params = new String[] { String.valueOf(timeStampFrom ), String.valueOf(timeStampTo )) };
c = db.rawQuery("SELECT * FROM " + getTableName() + " WHERE DateTime BETWEEN ? AND ?", params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:58:50.300

很确定这会奏效，伙计。

基本上是其他两个答案的混合。

```
 String[] params = new String[] { String.valueOf(formattedDate1), String.valueOf(formattedDate2) };

     return mDb.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE duedate BETWEEN ? AND ?", params); 
```

让我知道这是否有帮助。

# javascript - HighCharts - JQuery - 简单示例不起作用

> ID：15889077
> 
> 赞同：0
> 
> 时间：2013-04-08T21:12:06.267
> 
> 标签：javascript, jquery, html, highcharts

highcharts 网站上的这个简单示例对我不起作用（[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie -基本/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-basic/)）。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://www.highcharts.com/js/highcharts.js"></script>

<script type="text/javascript">

    $(function () {
        $('#container').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Browser market shares at a specific website, 2010'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Browser share',
                data: [
                    ['Firefox',   45.0],
                    ['IE',       26.8],
                    {
                        name: 'Chrome',
                        y: 12.8,
                        sliced: true,
                        selected: true
                    },
                    ['Safari',    8.5],
                    ['Opera',     6.2],
                    ['Others',   0.7]
                ]
            }]
        });
    });
</script>
</head>

<body>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</body>
</html> 
```

我刚刚从 jsfiddle 复制了它，所以不知道为什么它不起作用！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T17:33:01.193

我无法让 HighCharts 演示在本地工作，但找到了另一个问题的答案......

问题是.highchart。采用

```
var chart = new Highcharts.Chart({
chart: {
    //alignTicks: false,
    type: 'line',
    renderTo: 'container'
},
... 
```

}

请参阅此页面： [JSFiddle API 示例已损坏](https://stackoverflow.com/questions/15248383/jsfiddle-api-examples-are-broken)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:31:47.687

小提琴实际上是使用来自`http://code.highcharts.com/highcharts.js`.. 的 highcharts 代码。我在你的代码中测试了这个链接，它似乎正在工作。我收到`highcharts method is undefined...`与您显示的链接有关的控制台错误。

# asp.net-mvc - 如何在 MVC 中使用全局变量

> ID：15889086
> 
> 赞同：-2
> 
> 时间：2013-04-08T21:12:46.613
> 
> 标签：asp.net-mvc

我想创建一个类的单个实例，该实例应该可供我的所有控制器使用。这有点像系统中只有一个用户的购物车。我一直在为此使用会话状态，但一段时间后它会超时，这是一个问题。

我会考虑使用应用程序状态并将其连接到 global.asax 中。这是在 MVC 中如何完成的，还是有一种更适合框架的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:24:04.070

使用单例。如果检测到已分配的类，则让具有类方法的类返回自身。其他分配自己并返回自己。转到此处以获取有关确切方法的一些信息。[http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:21:40.390

我建议查找 System.Runtime.Caching 命名空间，因为它使您能够根据需要在内存中缓存变量。

但是，如果是我将数据存储在某种描述的数据源中，我可能会这样做。

# ios - 更改容器高度后 UIButton 不可点击

> ID：15889093
> 
> 赞同：1
> 
> 时间：2013-04-08T21:13:14.923
> 
> 标签：ios, objective-c

UIButton 包含在 UIScrollView 中。我在xib中有这个设置。我使用 NSLayoutConstraint 来更改滚动视图的高度。单击按钮后，滚动视图会更改高度，但随后 UIButton 变得不可单击。

这是代码：

```
- (IBAction)TagPressed:(UIButton *)sender {

    if (self.height.constant == 200) {

       self.height.constant = 88;
    }else
       self.height.constant = 200;

    [self.view setNeedsUpdateConstraints];

    [UIView animateWithDuration:0.5f animations:^{
        [self.view layoutIfNeeded];
    }];

    DRect(_scrollView.frame)
    DRect(self.view.frame)
    DRect(sender.frame)
    NSLog(sender.selected ? @"Selected" : @"Not Selected"); 
```

}

Drect 是帧的 nslog。所以控制台输出是：

```
2013-04-08 17:04:19.264 TouchSelectApp[93618:c07] CGRect ( 20.000000, -112.000000, 62.000000, 200.000000)
2013-04-08 17:04:19.266 TouchSelectApp[93618:c07] CGRect ( 0.000000, 300.000000, 320.000000, 88.000000)
2013-04-08 17:04:19.266 TouchSelectApp[93618:c07] CGRect ( 7.000000, 78.500000, 48.000000, 44.000000) 
```

(lldb) po [[UIApp keyWindow] recursiveDescription] 的输出我必须添加一个额外的按钮来创建调试停止。我关心的按钮在 SelectableTag 内部。

```
$0 = 0x0887e0e0 <UIWindow: 0x7197a90; frame = (0 0; 320 568); autoresize = W+H; layer =    <UIWindowLayer: 0x7199620>>
   | <UIView: 0x719ed20; frame = (0 20; 320 548); autoresize = W+H; layer = <CALayer: 0x719edd0>>
   |    | <UIRoundedRectButton: 0x719b9d0; frame = (51 464; 73 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0x719baf0>>
   |    |    | <UIGroupTableViewCellBackground: 0x719c2a0; frame = (0 0; 73 44); userInteractionEnabled = NO; layer = <CALayer: 0x719c370>>
   |    |    | <UIImageView: 0x719da50; frame = (1 1; 71 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x719dd20>>
   |    |    | <UIButtonLabel: 0x719d0f0; frame = (12 12; 49 19); text = 'Button'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x719d1e0>>
   |    | <UIView: 0x71a1160; frame = (0 300; 320 88); autoresize = RM+BM; layer = <CALayer: 0x71a11c0>>
   |    |    | <SelectableTag: 0x719fcc0; baseClass = UIScrollView; frame = (20 -112; 62 200); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0x71a04e0>; layer = <CALayer: 0x719fef0>; contentOffset: {0, 0}>
   |    |    |    | <UIImageView: 0x71a0c20; frame = (55 193; 7 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x71a0cc0>>
   |    |    |    | <UIImageView: 0x71a0dd0; frame = (55 62; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x71a0e70>>
   |    |    |    | <UIRoundedRectButton: 0x719ddd0; frame = (-1 7; 64 44); opaque = NO; layer = <CALayer: 0x719b630>>
   |    |    |    |    | <UIGroupTableViewCellBackground: 0x719d630; frame = (0 0; 64 44); userInteractionEnabled = NO; layer = <CALayer: 0x719b690>>
   |    |    |    |    | <UIImageView: 0x719dea0; frame = (1 1; 62 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x719d990>>
   |    |    |    |    | <UIButtonLabel: 0x71a1630; frame = (12 12; 40 19); text = 'Test1'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x71a1e50>> 
```

(lldb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T23:58:12.380

从[*UIView Class Reference*](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCCAICB)[的文档`hitTest:withEvent:`中](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCCAICB)*：*

 *> 位于接收器边界之外的点永远不会被报告为命中，即使它们实际上位于接收器的子视图之一内。如果当前视图的`clipsToBounds`属性设置为`NO`并且受影响的子视图超出了视图的边界，则可能会发生这种情况。

滚动视图的父级是带有 address 的视图`0x71a1160`。请注意，滚动视图的`frame.origin.y`值为 -112。因此，滚动视图的前 112 个点超出了其父级的范围。滚动视图的那部分将永远不会收到触摸。您的 Test1 按钮完全位于滚动视图的那部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:22:05.960

我也注意到 UIButtons 的这种行为。更改父视图的框架后，如果再次添加按钮，它将起作用。*

# imageview - 当我将它作为 webstart 或在浏览器中运行时，javaFx 中的 ImageView 不显示

> ID：15889096
> 
> 赞同：0
> 
> 时间：2013-04-08T21:13:18.530
> 
> 标签：imageview, javafx

我一直在尝试将图像加载到`ImageView`中，当我将它作为独立应用程序运行时它工作正常，但是当我尝试在浏览器中运行它或作为 webstart 时它没有显示。

我试过了：

```
ivFoto = new ImageView(new Image("file:/C:/Users/Carlos/Desktop/4fbzW.jpg")); 
```

或者

```
ivFoto = new ImageView(new Image("file:\\C:\\Users\\Carlos\\Desktop\\4fbzW.jpg")); 
```

或者

```
ivFoto = new ImageView("file:///C:/Users/Carlos/Desktop/4fbzW.jpg"); 
```

如果有人知道我在这里做错了什么，我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:48:41.493

将图像 ( `4fbzW.jpg`) 打包到应用程序 jar 文件中（与加载图像的类位于同一位置）并将其作为资源引用：

```
ivFoto = new ImageView(
  new Image(
    this.getClass().getResource("4fbzW.jpg").toExternalForm()
  )
); 
```

* * *

您的问题中的图片参考有一些问题：

1.  对`file:`协议进行硬编码。

    JavaFX 应用程序通常会打包为 jar 文件，因此应使用 jar 协议访问应用程序的资源。通过使用该`getResource`方法，资源将被用于加载引用资源的类的相同协议获取，因此它将自动使用正确的协议来查找资源，您无需担心这个细节。

2.  引用开发机器上的本地资源。

    Webstart 和浏览器嵌入式应用程序部署方案主要用于引用通过网络交付给远程客户端的应用程序。客户端计算机的用户可能有任何用户名或正在使用任何支持的操作系统，因此他们不太可能拥有位于以下位置的文件：`C:/Users/Carlos/Desktop`. 通过将图像与您的应用程序打包并从相对于应用程序代码的位置获取它，那么无论将图像部署在何处，都可以始终一致地找到该图像。

3.  基于文件的访问违反了 WebStart 和浏览器嵌入式应用程序的安全沙箱

    这种部署模式以受限权限运行应用程序，以防止恶意应用程序做坏事（例如删除所有用户文件或将其发送到外国情报机构）。要允许应用程序在这些部署模式下以提升的安全权限运行，您需要对[应用程序进行签名，](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)并且用户需要明确信任您提供的软件。在您的应用程序的特定情况下，我不建议您签名，而是将您需要的资源与应用程序一起打包，这样您和您的用户就无需承受签名应用程序的不便。

* * *

另请参阅：[javafx.scene.image.Image("flower.png") 在哪里寻找flower.png？](https://stackoverflow.com/questions/10575410/where-does-javafx-scene-image-imageflower-png-look-for-flower-png)

# c++ - 设置菜单 UI 实现

> ID：15889099
> 
> 赞同：0
> 
> 时间：2013-04-08T21:13:24.177
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我正在尝试实现一个 BB10 设置菜单，例如看起来像日历应用程序中的那个。这里的问题是，我应该使用哪些组件？将 ListView 与 XML 模型一起使用看起来很棒，但与翻译不兼容。对于带有几个条目的简单菜单，使用 C++ 模型看起来有点过头了……在某处可能有一个既定的模式，但我找不到它。

[日历应用设置视图的屏幕截图](http://i.stack.imgur.com/HIiJ3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:32:00.660

你想要的是[标题栏](https://developer.blackberry.com/cascades/reference/bb__cascades__titlebar.html)的消耗性内容属性：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:57:39.447

我将创建一个 QML 对象，您可以为每个条目重复使用该对象，其中包含标题和图像的属性。

例如，可能是这样的：

SettingEntry.qml

```
Container {
    property alias title:title.Text
    signal click()
    TextView {
        id: title
        text: "[title goes here]"
    }
    gestureHandlers: [
        TapHandler {
             onTapped: {
                 click();
             }                
        }
    ]
} 
```

然后在您的设置页面中，您可以像使用普通对象一样使用它：

```
Page {
    Container {
        SettingEntry {
            title: "General"
            onClick: {
                //open general page
            }
        }
        SettingEntry {
            title: "Invitation Settings"
        }
    }
} 
```

上面显然是非常简化的，你会想要包含一个图标图像，添加翻译代码并添加视觉调整，如填充宽度和填充。
但是，它应该让您很好地了解从哪里开始。

我还包括了一个手势处理程序和信号，以向您展示如何处理诸如点击之类的事件。

# javascript - JQuery 事件导致页面重新加载。怎么修？

> ID：15889105
> 
> 赞同：1
> 
> 时间：2013-04-08T21:13:31.483
> 
> 标签：javascript, jquery, html

我正在观察 onClick 事件导致页面重新加载的行为。

```
$('#target').click(function(){
    $('#target').hide();
}) 
```

因此显示了对象，单击时隐藏，但随后页面重新加载并再次显示该对象。我正在研究一个在我之前设置的网站，所以我并不完全了解它的所有部分。知道什么可能导致这种行为以及如何解决它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T21:16:05.083

您需要通过以下方式防止默认事件行为`event.preventDefault`：

```
$("#target").on("click", function (e) {
    $(this).hide();
    e.preventDefault();
}); 
```

使用`return false`也可以，但它[的作用超出了您的预期](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)。

这符合[活动取消标准](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-cancelation-h3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:14:21.230

添加一个

```
return false; 
```

作为最后一条语句，以便不调用链接，只执行您的函数（onclick）。

# c++ - 如何从变量值初始化对象？

> ID：15889112
> 
> 赞同：0
> 
> 时间：2013-04-08T21:13:51.853
> 
> 标签：c++, visual-c++

我想通过获取用户输入来生成即将初始化的对象的名称。这可能吗？有没有办法根据变量值命名对象？

我知道在“test x”下面的代码中不起作用，我知道为什么......但是有没有办法让它工作？我一直试图弄清楚这两天。我最接近的可能是字符串流......甚至更糟......这是不可能的？有什么帮助吗？

```
#include <iostream>
using namespace std;
#include <string>

class test
{
public:
    string wtf;
};

int main()
{
    test y;         // showing normal initialize
    y.wtf = "a";    // assign value

    string x;       
    cin >> x;       // initialize string and get input

    test x          // trying to initialize object based on input
    x.wtf = "a";    // then assign a value

    cout << y.wtf;  // printing both to test
    cout << x.wtf;

    return 0;
} 
```

我的意图是有一个单独的数组来保存员工编号（在开头与“emp”或其他内容连接）来为每个员工启动对象。所以用户会输入一个员工编号，比如 1234，然后我会创建一个字符串，添加 emp + 1234 并输出“emp1234”......然后我会启动一个像“test emp1234”这样的对象，它会有一堆与它相关的差异变量，在类内。

我可能看错了……而且可能解释得很糟糕。我显然对此很陌生，但我可以使用任何可能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:16:58.030

我会这样做：

```
#include <vector>
#include <string>
#include <iostream>
#include <stdexcept>

test make_test()
{
    std::string s;
    if (!(std::cin >> s))
    {
        throw std::runtime_error("Premature end of input");
    }
    return { "emp" + s };
}

int main()
{
    std::vector<test> v;

    for (int i = 0; i != 10; ++i)
    {
         v.push_back(make_test());
         std::cout << "Added employee '" << v.back().wtf << "'\n";
    }
} 
```

这将用十个员工记录填充一个向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:18:07.313

不，您不能仅仅因为名称在运行时不存在而在运行时创建变量名。它们是仅在编译期间有用的静态结构。

但是，听起来你真的只想要一个`std::map`. 您可以使用它从整数（员工编号）映射到`test`对象：

```
std::map<int, test> employees;

int employeeNumber;
std::cin >> employeeNumber;

employees[employeeNumber]; // Will default construct a test object mapped to employeeNumber

// Alternatively:
test t( /* some constructor args */ );
employees[employeeNumber] = t; 
```

然后，如果您想`test`使用员工编号访问对象`1234`，例如，您可以简单地执行以下操作：

```
employees[1234] 
```

# php - 解析错误：语法错误，意外的 ';' 在代码中

> ID：15889113
> 
> 赞同：-9
> 
> 时间：2013-04-08T21:13:52.753
> 
> 标签：php

我有一个 php 脚本，它给了我一个错误：

```
Parse error: syntax error, unexpected ';' in CODE on line 58 
```

我不太了解php，我希望有人能看看代码并告诉我有什么问题，拜托。

如果我删除 ; 在链接 58 上，它继续在每个“;”上继续

这是代码：

```
http://pastebin.com/86zLG73M 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:15:50.500

第 58 行是：

```
$_SESSION['group_id'] = ( integer ); 
```

但这没有任何意义。`( integer )`不是有效的 PHP 表达式。

我会为你纠正它，但我不知道你的意图是什么。PHP 解释器也没有，这就是为什么它到达分号并发疯的原因......难怪这`;`是“意外”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:15:53.783

不要写`( integer )`；把价值放在...？

# css - 选择框使用自定义字体创建未知间距

> ID：15889115
> 
> 赞同：1
> 
> 时间：2013-04-08T21:13:59.877
> 
> 标签：css, option, html-select, html4, custom-font

我正在使用在 IE8 中完美加载的自定义字体。但是，我所有的选择框都会在所选子元素的顶部产生随机（不必要的间距）。

我在一天的大部分时间里一直在做研究，但是，我无法找到原因和解决方法来解决为什么 IE 会产生这种导致选项被剪裁的多余间距。

有任何想法吗？

> **请在 Internet Explorer 8 中查看：** [https ://give.massgeneral.org/bootstrap/sslpage.aspx?pid=2045](https://give.massgeneral.org/bootstrap/sslpage.aspx?pid=2045)

# javascript - 添加 jQuery Accordion 元素时，需要新元素默认打开

> ID：15889117
> 
> 赞同：0
> 
> 时间：2013-04-08T21:14:14.737
> 
> 标签：javascript, jquery, .net

我有一个手风琴，我正在动态创建新元素。但是，当我这样做时，我似乎无法让最新的元素默认打开。它始终是第一个元素。

想法？

这是HTML：

```
 <asp:MultiView ID="MainView" runat="server">
        <asp:View ID="View1" runat="server">
            <table style="width: 100%; border-width: 3px; border-color: #C4F691; border-style: solid">
                <tr>
                    <td>
                        <div class="rowClassSpace">
                            &nbsp;</div>
                        <div id="accordion">
                            <a href="#">Make/Model (Insured Vehicle)</a>
                                <div>
                                    <p>
                                        Content
                                    </p>
                                </div>
                        </div>
                        <div>
                            <button id="addAccordion">
                                Add Another Vehicle</button>
                            </div>
                    </td>
                </tr>
            </table>
        </asp:View>
    </asp:MultiView> 
```

这是JS：

```
 //  Initialize accordion
    $(document).ready(function () {
        $(function () {
        $("#accordion").accordion();
        });
     });

    //  Adding according sections
    $('#addAccordion').click(function () {
    });

    function addAccordion() {
       var active = $('#accordion').accordion('option', 'active');
       $('#accordion').append('<a href="#">Make/Model (Other Car #)</a><div><p>New data</p></div>').accordion('destroy').accordion({ active: active});
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:47:08.097

建议使用`destroy`方法破坏现有的，然后追加新的部分，然后初始化新的手风琴实例。您使用的标记也使用`<a>`标签看起来很奇怪

通过计算现有部分，您可以在`active`添加新部分之前将索引设置为部分数量，以便打开添加的最新部分

```
var template=function(ctr){
   /* using html markup per docs*/
    return '<h3>Section '+ctr+'</h3><div>Content '+ctr+'</div>';
};

var accordOptions={
    collapsible:true,
    active:0
};
var $accord=$('#accordion').accordion(accordOptions);

$('button').click(  addSection);

function addSection(){
    var num_sections=$accord.children('h3').length;
    /* set active index to number of current sections*/
    accordOptions.active=num_sections;
    $accord.accordion('destroy')
            .append( template( num_sections +1 ) )
            .accordion( accordOptions);
} 
```

演示：http: [//jsfiddle.net/HnVqD/](http://jsfiddle.net/HnVqD/)

# android - 如何将图像从 Activity 而不是 XML 文件放入 ImageView？

> ID：15889124
> 
> 赞同：1
> 
> 时间：2013-04-08T21:14:43.520
> 
> 标签：android

我要做的是放置多个图像而不会出现内存不足问题，因此我使用方法 PutImage() 并尝试将图像放入 ImageView 但来自 Activity 而不是 XML 文件

**这是我的 XML 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" android:fitsSystemWindows="true"       android:alwaysDrawnWithCache="false">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    />

</RelativeLayout> 
```

**这是活动**

```
public class RecipeBanana extends Activity {
ImageView v;
Button button;
Context localcontext = null;     
public static Drawable getAssetImage(Context context, String filename) throws IOException {
AssetManager assets = context.getResources().getAssets();
InputStream buffer = new BufferedInputStream((assets.open("drawable/" + filename + ".jpg")));
Bitmap bitmap = BitmapFactory.decodeStream(buffer);
return new BitmapDrawable(bitmap);
}

public void PutImage(ImageView v, String x){

    try {
        v.setImageDrawable(Drawable.createFromStream(localcontext.getAssets().open("flags/" + x + ".jpg"), null));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recipe_banana);

        ImageView v=(ImageView) findViewById(R.id.imageView1);
        PutImage(v,"bananarecipe");
        addListenerOnButton();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:09:28.227

你从来没有调用 getAssetImage() 所以你不需要那个方法，删除它。您无需创建变量来保存对上下文的引用。Activity*是一个*上下文，因此您可以`getAssets()`直接调用而无需在其前面放置任何内容。

试试这样：

```
public class RecipeBanana extends Activity {
    ImageView v;
    Button button; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recipe_banana);
        ImageView v=(ImageView) findViewById(R.id.imageView1);
        PutImage(v,"bananarecipe");
        addListenerOnButton();
    }
    public void PutImage(ImageView v, String filename){
        try {
            v.setImageDrawable(Drawable.createFromStream(getAssets().open("flags/" + filename + ".jpg"), null));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

如果您有一个`bananarecipe.jpg`内部调用的文件，则使用此代码，`assets/flags/`那么它应该加载到您的 ImageView 中。

# javascript - 使用 Knockout-Validation 插件进行唯一值验证

> ID：15889129
> 
> 赞同：1
> 
> 时间：2013-04-08T21:14:56.353
> 
> 标签：javascript, knockout.js, knockout-validation

我正在使用带有 Knockout-Validation 插件的 KnockoutJS 来验证表单上的字段。我在使用本机验证规则验证值是否唯一时遇到问题 -`unique`

我正在使用 Ryan Niemeyer 的编辑器模式来允许用户编辑或创建`Location`. 这是我的[小提琴](http://jsfiddle.net/bflemi3/Hz7au/)，可以完整地查看我的问题。

```
function Location(data, names) {
    var self = this;

    self.id = data.id;
    self.name = ko.observable().extend({ unique: { collection: names }});
    // other properties
    self.errors = ko.validation.group(self);

    // update method left out for brevity
}

function ViewModel() {
    var self = this;

    self.locations = ko.observableArray([]);   

    self.selectedLocation = ko.observable();
    self.selectedLocationForEditing = ko.observable();

    self.names = ko.computed(function(){
        return ko.utils.arrayMap(self.locations(), function(item) {
            return item.name();
        });
    });  

    self.edit = function(item) {
        self.selectedLocation(item);
        self.selectedLocationForEditing(new Location(ko.toJS(item), self.types));
    };

    self.cancel = function() {
        self.selectedLocation(null);
        self.selectedLocationForEditing(null);
    };

    self.update = function(item) {
        var selected = self.selectedLocation(),
            updated = ko.toJS(self.selectedLocationForEditing()); //get a clean copy

        if(item.errors().length == 0) {
            selected.update(updated);
            self.cancel();
        }
        else
            alert("Error");        
    };

    self.locations(ko.utils.arrayMap(seedData, function(item) {
        return new Location(item, self.types, self.names());
    })); 
} 
```

我有一个问题。由于`Location`正在编辑的对象是从`locations`observableArray 中“分离”的（参见方法），因此当我在 detached中`Location.edit`进行更改时，计算数组中的值不会更新。因此，当验证规则将其与数组进行比较时，它将始终返回 true 的有效状态，因为计数器只会为 1 或 0。（请参阅下面的淘汰验证算法）`name``Location``names``names`

在`unique`验证规则的选项参数中，我可以为`externalValue`. 如果此值未定义，那么它将检查匹配名称的计数是否大于或等于 1 而不是 2。这适用于用户更改名称、转到另一个字段然后返回的情况除外到名称，并希望将其更改回原始值。该规则只看到该值已存在于`names`数组中，并返回一个有效的 false 状态。

这是来自 knockout.validation.js 的处理`unique`规则的算法......

```
function (val, options) {
    var c = utils.getValue(options.collection),
        external = utils.getValue(options.externalValue),
        counter = 0;

    if (!val || !c) { return true; }

    ko.utils.arrayFilter(ko.utils.unwrapObservable(c), function (item) {
        if (val === (options.valueAccessor ? options.valueAccessor(item) : item)) { counter++; }
    });
    // if value is external even 1 same value in collection means the value is not unique
    return counter < (external !== undefined && val !== external ? 1 : 2);
} 
```

我曾考虑将其用作创建自定义验证规则的基础，但是当用户想要返回原始值时，我一直被困在如何处理这种情况上。

我感谢任何和所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:18:29.580

一种可能的解决方案是在唯一验证器中**不包含** `name`当前编辑项目的 （当然，在创建新项目时您需要完整列表）。

因此，将 Location 名称更改回其原始值时不会触发唯一检查：

```
self.namesExceptCurrent = function(name){
    return ko.utils.arrayMap(self.locations(), function(item) {
        if (item.name() !== name)
            return item.name();
    });
}

self.edit = function(item) {
    self.selectedLocation(item);
    self.selectedLocationForEditing(
        new Location(ko.toJS(item), 
        self.types, 
        self.namesExceptCurrent(item.name())));
}; 
```

演示[JSFiddle。](http://jsfiddle.net/38pk2m69/)

# python - 如何找到列表中数字的累积总和？

> ID：15889131
> 
> 赞同：113
> 
> 时间：2013-04-08T21:15:02.857
> 
> 标签：python, list, sum, accumulate

```
time_interval = [4, 6, 12] 
```

我想总结这些数字`[4, 4+6, 4+6+12]`以获得列表`t = [4, 10, 22]`。

我尝试了以下方法：

```
t1 = time_interval[0]
t2 = time_interval[1] + t1
t3 = time_interval[2] + t2
print(t1, t2, t3)  # -> 4 10 22 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-04-08T21:31:07.867

如果您正在使用这样的数组进行大量数值工作，我建议您[`numpy`](https://docs.scipy.org/doc/numpy/user/whatisnumpy.html)使用累积和函数[`cumsum`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html)：

```
import numpy as np

a = [4,6,12]

np.cumsum(a)
#array([4, 10, 22]) 
```

对于这种事情，Numpy 通常比纯 python 更快，与[@Ashwini's`accumu`](https://stackoverflow.com/a/15889203/1730674)相比，请参见：

```
In [136]: timeit list(accumu(range(1000)))
10000 loops, best of 3: 161 us per loop

In [137]: timeit list(accumu(xrange(1000)))
10000 loops, best of 3: 147 us per loop

In [138]: timeit np.cumsum(np.arange(1000))
100000 loops, best of 3: 10.1 us per loop 
```

但当然，如果它是您唯一使用 numpy 的地方，那么依赖它可能不值得。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-04-08T21:19:42.960

在 Python 2 中，您可以像这样定义自己的生成器函数：

```
def accumu(lis):
    total = 0
    for x in lis:
        total += x
        yield total

In [4]: list(accumu([4,6,12]))
Out[4]: [4, 10, 22] 
```

在 Python 3.2+ 中，您可以使用[`itertools.accumulate()`](http://docs.python.org/3/library/itertools.html#itertools.accumulate)：

```
In [1]: lis = [4,6,12]

In [2]: from itertools import accumulate

In [3]: list(accumulate(lis))
Out[3]: [4, 10, 22] 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-09-16T15:12:20.087

我用 Python 3.4 对前两个答案进行了基准测试，我发现`itertools.accumulate`它比`numpy.cumsum`许多情况下都快，通常要快得多。但是，正如您从评论中看到的那样，情况可能并非总是如此，并且很难详尽地探索所有选项。（如果您有更多感兴趣的基准测试结果，请随时添加评论或编辑此帖子。）

一些时间...

对于短列表`accumulate`，速度大约快 4 倍：

```
from timeit import timeit

def sum1(l):
    from itertools import accumulate
    return list(accumulate(l))

def sum2(l):
    from numpy import cumsum
    return list(cumsum(l))

l = [1, 2, 3, 4, 5]

timeit(lambda: sum1(l), number=100000)
# 0.4243644131347537
timeit(lambda: sum2(l), number=100000)
# 1.7077815784141421 
```

对于更长的列表`accumulate`，速度大约快 3 倍：

```
l = [1, 2, 3, 4, 5]*1000
timeit(lambda: sum1(l), number=100000)
# 19.174508565105498
timeit(lambda: sum2(l), number=100000)
# 61.871223849244416 
```

如果`numpy` `array`不强制转换为`list`，`accumulate`仍然快 2 倍：

```
from timeit import timeit

def sum1(l):
    from itertools import accumulate
    return list(accumulate(l))

def sum2(l):
    from numpy import cumsum
    return cumsum(l)

l = [1, 2, 3, 4, 5]*1000

print(timeit(lambda: sum1(l), number=100000))
# 19.18597290944308
print(timeit(lambda: sum2(l), number=100000))
# 37.759664884768426 
```

如果您将导入放在两个函数之外并且仍然返回 a `numpy` `array`，`accumulate`则仍然快近 2 倍：

```
from timeit import timeit
from itertools import accumulate
from numpy import cumsum

def sum1(l):
    return list(accumulate(l))

def sum2(l):
    return cumsum(l)

l = [1, 2, 3, 4, 5]*1000

timeit(lambda: sum1(l), number=100000)
# 19.042188624851406
timeit(lambda: sum2(l), number=100000)
# 35.17324400227517 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-12-13T03:51:43.827

试试这个 [`itertools.accumulate()`](https://docs.python.org/3/library/itertools.html#itertools.accumulate)功能。

```
import itertools  

list(itertools.accumulate([1,2,3,4,5]))
# [1, 3, 6, 10, 15] 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-10-09T09:43:50.107

看哪：

```
a = [4, 6, 12]
reduce(lambda c, x: c + [c[-1] + x], a, [0])[1:] 
```

将输出（如预期）：

```
[4, 10, 22] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-07-15T16:54:36.383

[PEP 572](https://www.python.org/dev/peps/pep-0572/) （Python 3.8 中的新功能）中的赋值表达式提供了另一种解决此问题的方法：

```
time_interval = [4, 6, 12]

total_time = 0
cum_time = [total_time := total_time + t for t in time_interval] 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-03-23T16:59:46.360

`for`您可以使用简单的循环以线性时间计算累积和列表：

```
def csum(lst):
    s = lst.copy()
    for i in range(1, len(s)):
        s[i] += s[i-1]
    return s

time_interval = [4, 6, 12]
print(csum(time_interval))  # [4, 10, 22] 
```

标准库[`itertools.accumulate`](https://docs.python.org/3/library/itertools.html#itertools.accumulate)可能是更快的选择（因为它是用 C 实现的）：

```
from itertools import accumulate
time_interval = [4, 6, 12]
print(list(accumulate(time_interval)))  # [4, 10, 22] 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2021-08-16T10:18:44.197

从**python 3.8**开始可以使用[赋值表达式](https://docs.python.org/3/whatsnew/3.8.html#assignment-expressions)，所以这样的事情变得更容易实现

```
nums = list(range(1, 10))
print(f'array: {nums}')

v = 0
cumsum = [v := v + n for n in nums]
print(f'cumsum: {cumsum}') 
```

生产

```
array: [1, 2, 3, 4, 5, 6, 7, 8, 9]
cumsum: [1, 3, 6, 10, 15, 21, 28, 36, 45] 
```

可以应用相同的技术来查找兼积、均值等。

```
p = 1
cumprod = [p := p * n for n in nums]
print(f'cumprod: {cumprod}')

s = 0
c = 0
cumavg = [(s := s + n) / (c := c + 1) for n in nums]
print(f'cumavg: {cumavg}') 
```

结果是

```
cumprod: [1, 2, 6, 24, 120, 720, 5040, 40320, 362880]
cumavg: [1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0] 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-08T21:19:58.600

首先，您需要一个正在运行的子序列列表：

```
subseqs = (seq[:i] for i in range(1, len(seq)+1)) 
```

然后你只需调用`sum`每个子序列：

```
sums = [sum(subseq) for subseq in subseqs] 
```

（这不是最有效的方法，因为您要重复添加所有前缀。但这对于大多数用例来说可能无关紧要，如果您不必考虑就更容易理解运行总数。）

如果您使用的是 Python 3.2 或更高版本，您可以使用[`itertools.accumulate`](http://docs.python.org/3/library/itertools.html#itertools.accumulate)它来为您执行此操作：

```
sums = itertools.accumulate(seq) 
```

如果您使用的是 3.1 或更早版本，您可以直接从文档中复制“等效于”源代码（更改`next(it)`为`it.next()`2.5 或更早版本除外）。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-05-06T13:47:37.853

根据列表的长度和性能，可能会有很多答案。我可以在不考虑性能的情况下思考的一种非常简单的方法是：

```
a = [1, 2, 3, 4]
a = [sum(a[0:x]) for x in range(1, len(a)+1)]
print(a) 
```

`[1, 3, 6, 10]`

这是通过使用列表理解，这可能工作得很好，只是在这里我在子数组上添加了很多次，你可能会即兴创作并让它变得简单！

为你的努力干杯！

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-11-16T15:38:38.703

如果您想要一种没有 numpy 在 2.7 中工作的 Pythonic 方式，这将是我的做法

```
l = [1,2,3,4]
_d={-1:0}
cumsum=[_d.setdefault(idx, _d[idx-1]+item) for idx,item in enumerate(l)] 
```

现在让我们尝试一下并针对所有其他实现进行测试

```
import timeit, sys
L=list(range(10000))
if sys.version_info >= (3, 0):
    reduce = functools.reduce
    xrange = range

def sum1(l):
    cumsum=[]
    total = 0
    for v in l:
        total += v
        cumsum.append(total)
    return cumsum

def sum2(l):
    import numpy as np
    return list(np.cumsum(l))

def sum3(l):
    return [sum(l[:i+1]) for i in xrange(len(l))]

def sum4(l):
    return reduce(lambda c, x: c + [c[-1] + x], l, [0])[1:]

def this_implementation(l):
    _d={-1:0}
    return [_d.setdefault(idx, _d[idx-1]+item) for idx,item in enumerate(l)]

# sanity check
sum1(L)==sum2(L)==sum3(L)==sum4(L)==this_implementation(L)
>>> True    

# PERFORMANCE TEST
timeit.timeit('sum1(L)','from __main__ import sum1,sum2,sum3,sum4,this_implementation,L', number=100)/100.
>>> 0.001018061637878418

timeit.timeit('sum2(L)','from __main__ import sum1,sum2,sum3,sum4,this_implementation,L', number=100)/100.
>>> 0.000829620361328125

timeit.timeit('sum3(L)','from __main__ import sum1,sum2,sum3,sum4,this_implementation,L', number=100)/100.
>>> 0.4606760001182556 

timeit.timeit('sum4(L)','from __main__ import sum1,sum2,sum3,sum4,this_implementation,L', number=100)/100.
>>> 0.18932826995849608

timeit.timeit('this_implementation(L)','from __main__ import sum1,sum2,sum3,sum4,this_implementation,L', number=100)/100.
>>> 0.002348129749298096 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-04-08T21:21:29.280

```
values = [4, 6, 12]
total  = 0
sums   = []

for v in values:
  total = total + v
  sums.append(total)

print 'Values: ', values
print 'Sums:   ', sums 
```

运行此代码给出

```
Values: [4, 6, 12]
Sums:   [4, 10, 22] 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-08T21:21:00.723

尝试这个：

```
result = []
acc = 0
for i in time_interval:
    acc += i
    result.append(acc) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-08-30T10:10:32.663

在 Python3 中，要查找第一个`i`元素是原始列表中前 i+1 个元素的总和的列表的累积和，您可以执行以下操作：

```
a = [4 , 6 , 12]
b = []
for i in range(0,len(a)):
    b.append(sum(a[:i+1]))
print(b) 
```

或者您可以使用列表理解：

```
b = [sum(a[:x+1]) for x in range(0,len(a))] 
```

**输出**

```
[4,10,22] 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-08-08T17:32:53.917

```
l = [1,-1,3]
cum_list = l

def sum_list(input_list):
    index = 1
    for i in input_list[1:]:
        cum_list[index] = i + input_list[index-1]
        index = index + 1 
    return cum_list

print(sum_list(l)) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-30T09:52:58.720

有点hacky，但似乎有效：

```
def cumulative_sum(l):
  y = [0]
  def inc(n):
    y[0] += n
    return y[0]
  return [inc(x) for x in l] 
```

我确实认为内部函数可以修改`y`外部词法范围中的声明，但这不起作用，所以我们用结构修改来玩一些讨厌的黑客攻击。使用生成器可能更优雅。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-11T15:26:13.867

无需使用 Numpy，您可以直接在数组上循环并沿途累加总和。例如：

```
a=range(10)
i=1
while((i>0) & (i<10)):
    a[i]=a[i-1]+a[i]
    i=i+1
print a 
```

结果是：

```
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45] 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-04-08T21:24:52.203

```
lst = [4, 6, 12]

[sum(lst[:i+1]) for i in xrange(len(lst))] 
```

如果您正在寻找更有效的解决方案（更大的列表？），那么生成器可能是一个不错的选择（或者`numpy`如果您真的关心性能，就使用它）。

```
def gen(lst):
    acu = 0
    for num in lst:
        yield num + acu
        acu += num

print list(gen([4, 6, 12])) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-04-08T21:27:28.730

```
In [42]: a = [4, 6, 12]

In [43]: [sum(a[:i+1]) for i in xrange(len(a))]
Out[43]: [4, 10, 22] 
```

对于小列表，这比*@Ashwini上面的生成器方法快一点*

```
In [48]: %timeit list(accumu([4,6,12]))
  100000 loops, best of 3: 2.63 us per loop

In [49]: %timeit [sum(a[:i+1]) for i in xrange(len(a))]
  100000 loops, best of 3: 2.46 us per loop 
```

对于较大的列表，生成器肯定是要走的路。. .

```
In [50]: a = range(1000)

In [51]: %timeit [sum(a[:i+1]) for i in xrange(len(a))]
  100 loops, best of 3: 6.04 ms per loop

In [52]: %timeit list(accumu(a))
  10000 loops, best of 3: 162 us per loop 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-11T13:44:47.280

我认为下面的代码是最简单的：

```
a=[1,1,2,1,2]
b=[a[0]]+[sum(a[0:i]) for i in range(2,len(a)+1)] 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-08-23T01:26:27.277

用于累积和的纯 python oneliner：

```
cumsum = lambda X: X[:1] + cumsum([X[0]+X[1]] + X[2:]) if X[1:] else X 
```

[这是一个受递归累积和](https://stackoverflow.com/questions/13347515/recursive-cumulative-sums)启发的递归版本。一些解释：

1.  第一项`X[:1]`是包含前一个元素的列表，几乎与`[X[0]]`（它会抱怨空列表）相同。
2.  第二项中的递归`cumsum`调用处理当前元素`[1]`和长度将减一的剩余列表。
3.  `if X[1:]`对于 来说更短`if len(X)>1`。

测试：

```
cumsum([4,6,12])
#[4, 10, 22]

cumsum([])
#[] 
```

与累积产品类似：

```
cumprod = lambda X: X[:1] + cumprod([X[0]*X[1]] + X[2:]) if X[1:] else X 
```

测试：

```
cumprod([4,6,12])
#[4, 24, 288] 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-09T18:17:22.520

这是另一个有趣的解决方案。这利用[`locals()`](https://docs.python.org/3/library/functions.html#locals)了理解的字典，即在列表理解范围内生成的局部变量：

```
>>> [locals().setdefault(i, (elem + locals().get(i-1, 0))) for i, elem 
     in enumerate(time_interval)]
[4, 10, 22] 
```

以下是`locals()`每次迭代的外观：

```
>>> [[locals().setdefault(i, (elem + locals().get(i-1, 0))), locals().copy()][1] 
     for i, elem in enumerate(time_interval)]
[{'.0': <enumerate at 0x21f21f7fc80>, 'i': 0, 'elem': 4, 0: 4},
 {'.0': <enumerate at 0x21f21f7fc80>, 'i': 1, 'elem': 6, 0: 4, 1: 10},
 {'.0': <enumerate at 0x21f21f7fc80>, 'i': 2, 'elem': 12, 0: 4, 1: 10, 2: 22}] 
```

小型列表的性能并不差：

```
>>> %timeit list(accumulate([4, 6, 12]))
387 ns ± 7.53 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

>>> %timeit np.cumsum([4, 6, 12])
5.31 µs ± 67.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

>>> %timeit [locals().setdefault(i, (e + locals().get(i-1,0))) for i,e in enumerate(time_interval)]
1.57 µs ± 12 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```

对于较大的列表，显然是持平的。

```
>>> l = list(range(1_000_000))
>>> %timeit list(accumulate(l))
95.1 ms ± 5.22 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

>>> %timeit np.cumsum(l)
79.3 ms ± 1.07 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

>>> %timeit np.cumsum(l).tolist()
120 ms ± 1.23 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

>>> %timeit [locals().setdefault(i, (e + locals().get(i-1, 0))) for i, e in enumerate(l)]
660 ms ± 5.14 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

尽管该方法丑陋且不实用，但它确实很有趣。

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2016-05-14T04:34:35.117

这将是 Haskell 风格的：

```
def wrand(vtlg):

    def helpf(lalt,lneu): 

        if not lalt==[]:
            return helpf(lalt[1::],[lalt[0]+lneu[0]]+lneu)
        else:
            lneu.reverse()
            return lneu[1:]        

    return helpf(vtlg,[0]) 
```

# ruby - 使用 Ruby 将字符串与变量连接起来

> ID：15889134
> 
> 赞同：2
> 
> 时间：2013-04-08T21:15:10.373
> 
> 标签：ruby, watir

我正在编写一个测试脚本，该脚本打开一个带有不带“www”和“com”的 URL 列表的文件。

我正在尝试阅读每一行并将该行放入 URL。然后我检查它是否重定向甚至存在。

我的问题是当我从文件中读取该行并将其分配给一个变量时。然后，我与加载后 URL 中的内容和我最初放入的内容进行比较，但它似乎在我的变量之后添加了一个 return。

基本上它总是说重定向，因为它放置“ [http://www.line](http://www.line) \n.com/”。

我怎样才能摆脱“\ n”？

```
counter = 1
    file = File.new("Data/activeSites.txt", "r")
        while (line = file.gets)
                puts "#{counter}: #{line}"
                counter = counter + 1
                browser.goto("http://www." + line + ".com/")

if browser.url == "http://www." + line + ".com/"
                    puts "Did not redirect"
                else
                    puts ("Redirected to " + browser.url)
                    #puts ("http://www." + line + ".com/")
                    puts "http://www.#{line}.com/"
                end 
```

基本上它总是说重定向，因为它放[http://www.line](http://www.line)然后返回 .com/

我怎样才能摆脱退货？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:24:53.683

简短的回答：`strip`

```
"text\n   ".strip # => "text" 
```

长答案：

您的代码不是很像 ruby​​，可以重构。

```
# Using File#each_line, the line will not include the newline character
# Adding with_index will add the current line index as a parameter to the block
File.open("Data/activeSites.txt").each_line.with_index do |line, counter|
  puts "#{counter + 1}: #{line}"

  # You're using this 3 times already, let's make it a variable
  url = "http://#{line}.com"

  browser.goto(url)

  if browser.url == url
    puts "Did not redirect"
  else
    puts ("Redirected to " + browser.url)
    puts url
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:18:29.220

那是因为您的行被换行符终止。你需要`strip`关闭它：

```
while (line = file.gets)
  line.strip!
  puts "#{counter}: #{line}" 
  # ... 
```

请注意，有更好的方法可以遍历文件中的行：

```
File.foreach("Data/activeSites.txt") do |line|
  # ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:02:25.937

这是您将其重新缩进到“Ruby 方式”后的代码：

```
counter = 1
file = File.new("Data/activeSites.txt", "r")
while (line = file.gets)
  puts "#{counter}: #{line}"
  counter = counter + 1
  browser.goto("http://www." + line + ".com/")

  if browser.url == "http://www." + line + ".com/"
    puts "Did not redirect"
  else
    puts ("Redirected to " + browser.url)
    #puts ("http://www." + line + ".com/")
    puts "http://www.#{line}.com/"
  end 
```

这是不正确的，因为它缺少`end`. `while`但是，它也没有正确处理文件 IO。

我是这样写的：

```
File.foreach("Data/activeSites.txt") do |line|
  puts "#{ $. }: #{ line }"

  browser.goto("http://www.#{ line }.com/")

  if browser.url == "http://www.#{ line }.com/"
    puts "Did not redirect"
  else
    puts "Redirected to #{ browser.url }"
    puts "http://www.#{ line }.com/"
  end
end 
```

`File.foreach`是从 IO 继承的方法。如果您正确读取文件，则不需要`strip`or `chomp`，因为 Ruby 在[`IO.foreach`](http://ruby-doc.org/core-2.0/IO.html#method-c-foreach)读取该行时会正确处理它。

每次 IO 读取一行时，它都会增加`$.`全局，这是`$INPUT_LINE_NUMBER`. 没有必要保留一个柜台。使用：

```
require 'english' 
```

将启用详细名称。有关更多信息，请参阅[英文文档](http://www.ruby-doc.org/stdlib-2.0/libdoc/English/rdoc/English.html)。

# javascript - 如何使 setTimeout 引用对象的上下文？

> ID：15889138
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:15:42.740
> 
> 标签：javascript, object, this, settimeout

```
var myObj = {
    name:"mike",
    go:function(){
        console.log(this.name);
    }

}

myObj.go()   //logs out mike
setTimeout(this.myObj.go,200)  //logs out (emptyString) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:17:13.490

[试试这个](http://jsfiddle.net/VT5wH/)：

```
setTimeout(function(){
  myObj.go();
},200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:17:57.133

在之前定义一个引用对象的变量：

```
var _this = this;
setTimeout(function() {_this.myObj.go();}, 200); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:17:57.907

几种方式：

```
setTimeout(this.myObj.go.bind(this.myObj), 200); 
```

或者

```
var that = this;
setTimeout(function () {
    that.myObj.go();
}, 200); 
```

请注意，`.bind`旧浏览器不支持它，因此可能需要 polyfill 才能支持它。以下是有关该方法的一些信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T21:18:32.160

```
var myObj = {
    name:"mike",
    go:function(){
        console.log(this.name);
    }

}

setTimeout(function(){myObj.go()},200) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T21:20:46.870

尝试这个

```
var myObj = {
    name:"mike",
    go:function(){
        console.log(this.name);
    }

}

myObj.go();   //logs out mike
setTimeout(function(){
    myObj.go(); //logs out mike too
},200); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T21:39:26.933

你的代码是正确的减去一些东西。

```
setTimeout(this.myObj.go,200) 
```

应该

```
setTimeout(function() {myObj.go()},200) 
```

它是未定义的，因为`this.myObj`它不在 setTimeout 的范围内，也不包含在匿名函数或变量函数中。不过，您走在正确的轨道上！

# iis-7 - 带 IIS7 的 GoPro 摄像机直播

> ID：15889142
> 
> 赞同：1
> 
> 时间：2013-04-08T21:15:55.273
> 
> 标签：iis-7, video-streaming

这里有没有人成功设置 GoPro 摄像机通过 IIS7 Live Smooth Streaming 服务进行流式传输？

GoPro 相机是否适合实时流媒体播放，或者你们还有其他更好的选择吗？当然，它需要与 IIS 兼容。

感谢您花时间阅读本文。

# unix - 删除数字之间的冒号和 -

> ID：15889147
> 
> 赞同：0
> 
> 时间：2013-04-08T21:16:06.050
> 
> 标签：unix, sed, awk

我有一个这样的文件：

```
chr1:34610-36081          1.20286
chr1:69090-70008          0.0392553
chr1:321083-321115        0
chr1:321145-321207        85.0555
chr1:367658-368597        0.114414 
```

我想转换为：

```
chr1 34610 36081          1.20286
chr1 69090 70008          0.0392553
chr1 321083 321115        0
chr1 321145 321207        85.0555
chr1 367658 368597        0.114414 
```

我可以删除冒号，但我不能在它们之间创建一个空格

```
cut -d: -f1,2 file | sed s/\:/\/g 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:20:47.493

您可以`tr`为此使用：

```
tr ':-' ' ' < /your/file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:19:04.223

最简单的解决方案是`sed`：

```
$ sed 's/[:-]/ /g' file
chr1 34610 36081          1.20286
chr1 69090 70008          0.0392553
chr1 321083 321115        0
chr1 321145 321207        85.0555
chr1 367658 368597        0.114414 
```

要将更改存储回文件，您可以使用以下`-i`选项：

```
$ sed -i 's/[:-]/ /g' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:18:52.023

到目前为止，我们有`tr`解决方案和`sed substitution`解决方案，awk 有点过头了，但我们可以玩它`sed + tr`：甚至比`sed s/../../`:)

```
sed 'y/:-/  /' file 
```

例如：

```
kent$  echo "chr1:34610-36081          1.20286
chr1:69090-70008          0.0392553
chr1:321083-321115        0
chr1:321145-321207        85.0555
chr1:367658-368597        0.114414"|sed 'y/:-/  /' 
chr1 34610 36081          1.20286
chr1 69090 70008          0.0392553
chr1 321083 321115        0
chr1 321145 321207        85.0555
chr1 367658 368597        0.114414 
```

# business-objects - Business Objects XI Web Intelligence 如何在提示中引用度量列表作为变量？

> ID：15889149
> 
> 赞同：1
> 
> 时间：2013-04-08T21:16:33.300
> 
> 标签：business-objects

要求是在两个提示中向用户显示度量名称列表。用户从每个提示中选择一个度量名称。根据用户的选择，实际的度量被映射到报告中的块中。有些度量是计数，有些是美元金额总和，因此适用数据类型特定的格式。

最终报告对用户选择的两个度量进行并排比较。

提示 #1 针对左侧方块

提示 #2 针对右手块

每个度量名称列表有 10 个项目长。

我们的想法是，这份报告可以用作模板，对两种度量进行许多不同的并排比较。

如何在提示中引用度量列表作为变量？

如何将用户选择映射到数据提供者中的实际度量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:03:23.780

如果我理解正确，您希望用户可以在收入、金额、成本、盈利能力、平均价格等之间进行选择。

这些值中的每一个都代表宇宙中的一个度量。

我会在宇宙中创造一个物体

```
[promptMeasure]=
case @prompt('Select measure','A',{'Revenue', 'Amount', 'Cost', 
'Profitability', 'Average Price'}),mono, constrained,persistent) 
when 'Revenue' then [Revenue] 
when 'Amount' then [Amount] 
when 'Cost' then [Cost] 
when 'Profitability' then [Profitability] 
when 'Average Price' then [Average Price] end 
```

将此对象添加到报表中的查询。在报告中，您还可以使用函数 FormatNumber 并根据提示值应用条件格式：

例如：

```
[FormattedMeasure]=if UserResponse("Select measure")='Profitability' 
then FormatNumber([promptMeasure];"#,##0.0%") 
else FormatNumber([promptMeasure];"#,##0.00") 
```

# javascript - 将 iPad 的“Return”视为“Tab”

> ID：15889152
> 
> 赞同：0
> 
> 时间：2013-04-08T21:16:43.120
> 
> 标签：javascript, jquery, html, ipad

如何使`return`iPad 键盘上的`tab`键在 HTML 表单中充当键？

我目前的解决方案是这样的：

```
$('input[type=text]').keydown(function(e)
{
  if (e.keyCode == 13)
  {
    e.preventDefault();
    $(this).nextAll('input[type=text]:first').focus();
  }
}); 
```

我在下面的链接中找到了这个解决方案，它适用于答案评论中包含的[JSFiddle](http://jsfiddle.net/zfBNE/)。

*   [jQuery如何通过输入文本字段使Enter（Return）充当Tab键但最终触发提交按钮](https://stackoverflow.com/questions/5835008/jquery-how-to-make-enter-return-act-as-tab-key-through-input-text-fields-but-i)

这个解决方案在我的情况下不起作用（在 iPad 或 PC 上）。根据评论，我认为可能是我的 HTML 结构造成了麻烦，尽管我不确定如何更改它以实现相同的布局。

我还能如何使`return`键跳转到下一个输入字段？

我的表单的 HTML 块如下（跳过以避免长 HTML 读取）：

```
<div class="row">
  <div class="span6">
    <div class="control-group" id="GuestName_group">
      <label class="control-label" for="textbox_Name"><i class="icon-user"></i> Guest Name</label>
      <div class="controls controls-row">
        <input type="text" class="span6" id="textbox_Name" data-provide="typeahead"  placeholder="Lastname, Firstname">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="textbox_Group"><i class="icon-home"></i> Organization</label>
      <div class="controls controls-row">
        <input type="text" class="span6" id="textbox_Group" placeholder="Organization">
      </div>
    </div>
  </div>
  <div class="span6">
    <div class="control-group">
      <label class="control-label" for="select_Host"><i class="icon-star"></i> AOELab Host Name</label>
      <div class="controls controls-row">
        <select class="span6" id="select_Host">
          {% for person in host_names %}
          <option value="{{ person.bems }}">{{ person.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="textarea_Purpose"><i class="icon-question-sign"></i> Purpose</label>
      <div class="controls controls-row">
        <label class="radio inline">
          <input type="radio" name="optionsPurpose" id="radio_Purpose1" value="meeting" checked>
          Meeting
        </label>
        <label class="radio inline">
          <input type="radio" name="optionsPurpose" id="radio_Purpose2" value="tour">
          Tour
        </label>
        <label class="radio inline">
          <input type="radio" name="optionsPurpose" id="radio_Purpose3" value="other">
          Other...
        </label>
      </div>
      <div class="controls controls-row">
        <textarea class="span6" id="textarea_Purpose" placeholder="Why are you here?"></textarea>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:21:28.403

```
$('input[type=text]').on('keydown', function (e) {
    if (e.which == 13) {
        var tabables = $("*[tabindex != '-1']:visible"),
             index = tabables.index(this);

        tabables.eq(index + 1).focus();
        e.preventDefault();
    }
}); 
```

[**小提琴**](http://jsfiddle.net/Kuefx/)

# vb.net - 如何编写这个 LINQ/EF 查询？

> ID：15889161
> 
> 赞同：1
> 
> 时间：2013-04-08T21:17:12.920
> 
> 标签：vb.net, entity-framework, linq-to-entities, razor-2

所以我有一个包含多对多关系的 Entity Framework 5 模型。

`CategoryValues --< CourseCategoryValues >-- Courses`

我有一个 LINQ 查询，它选择`Course`数据库中的每一个。我真的很想将其修改为仅选择`Courses`属于特定`CategoryValue`. 到目前为止我的尝试失败了？

谁能帮我解决这个问题？

这是我尝试过的：

```
Using database As SiteDataContext = New SiteDataContext
    database.Configuration.ProxyCreationEnabled = False
    database.Courses.Include("Classes")
    database.Courses.Include("CourseCategoryValues")
    query = (From c In database.Courses Select c Order By c.Name).Where(
                                                                        Function(c) 0 < c.Classes.Where(Function([class]) [class].Status.ToLower = "open").Count
                                                            ).Include(Function(r) r.Classes).Include(Function(r) r.CourseCategoryValues)
    ' Here is where I am trying to narrow down the query results
    If (pid.HasValue) AndAlso (0 <> pid.Value) Then
        query.Where(Function(c) c.CourseCategoryValues.Any(Function(v) v.CategoryValue.CategoryValueID = pid))
    End If

    model.PageData = query.ToList
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:39:24.483

我认为您只是缺少将过滤器分配给查询变量。`Where`返回一个新的可查询对象，它不会修改您应用的可查询对象`Where`。所以，你需要：

```
query = query.Where(...) 
```

`Where`表达式本身对我来说看起来是正确的。

# rest - Neo4j get_or_create 唯一的 REST 批处理 API 问题

> ID：15889163
> 
> 赞同：1
> 
> 时间：2013-04-08T21:17:18.107
> 
> 标签：rest, batch-file, unique, neo4j

以下 REST API 批处理失败：

```
POST http://localhost:7474/db/data/batch [{"method":"POST","to":"index/node/name uniqueness=get_or_create","body":{"key":"name","value":"Person1","properties":{"Type":"PERSON"}},"id":1},
{"method":"POST","to":"index/node/name?uniqueness=get_or_create","body":{"key":"name","value":"Person2","properties":{"Type":"PERSON"}},"id":2},
{"method":"POST","to":"{1}/relationships","body":{"type":"Knows","to":"{2}","data":{"Since":"2012"}},"id":3}] 
```

带有 500 内部服务器错误。

由于某种原因，在使用 uniqueness=get_or_create 时，似乎无法使用 {1} 和 {2} 引用批处理中的节点。还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:11:04.567

您可以在第三个操作中使用 cypher 和索引查找来访问新创建的节点。

```
start n1=node:name(name={name1}), n2=node:name(name={name2}) 
create n1-[:Knows {props}]->n2 
```

与参数

```
{
"query":"start n1=node:name(name={name1}), n2=node:name(name={name2}) create n1-[:Knows {props}]->n2",
"params":{"name1":"Person1","name2":"Person2","props":{"Since":"2012"}}
} 
```

# python - Qt：大型数据集的 QTable 替代品

> ID：15889166
> 
> 赞同：0
> 
> 时间：2013-04-08T21:17:48.117
> 
> 标签：python, qt, pyqt

我正在编写一个显示数据库表内容的应用程序。我的应用程序应在文本和数字数据中显示与每个元组/行关联的图像。

问题是我正在处理庞大的数据集（最多 50k 个条目）。用户当然不会同时看到多个条目。但他应该仍然能够以类似表格的视图浏览数据。

关于视觉外观，QTable 可以胜任。但是，在阅读了有关此的博客文章后，QTable 对于此类任务似乎相当缓慢，这是可以理解的，因为对于 50k 条目，大约需要创建 50k 个小部件 QObjects。

我虽然使用 QSlider 作为表格滚动条和固定布局的替代品。每当更改滑块时，构成行的 gui 元素的内容都会调整。

但是，是否有任何小部件和/或解决方案可以提供 QTable 的外观和感觉，但只允许我生成那些实际显示的小部件？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:43:02.317

覆盖相应委托类的绘制方法解决了我的问题。感谢 cmannett85。

# xcode - XCode 不会自动生成 Obj。从 .h 到 .m 源文件的 C 代码

> ID：15889169
> 
> 赞同：0
> 
> 时间：2013-04-08T21:17:50.430
> 
> 标签：xcode

我正在关注 Nick Kuh 关于如何制作 iPhone 应用程序的书。我是初学者。我在第 4 章。我被卡在单击并从视图拖动到视图控制器的位置。该程序未在 .m 源文件中自动生成（例如：未在 .m 源文件中以 @sythesize DealerCard1 的形式出现，等等）。我应该把这些写进去还是应该自动为我做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:45:34.090

Xcode 不会生成`@synthesize`，因为不再需要它。编译器知道如何在编译时为您生成 @synthesize。

您的代码将构建并运行良好——无论是否使用 @synthesize。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T21:21:55.787

你好，是的，你应该大部分都必须写这些。我假设您在将视图拖到控制器时使用的是 UI 外观？无论如何，在 .h 文件中，您可能需要等效于

```
@property (nonatomic, retain) IBOutlet UIView *myDraggedView; 
```

然后在 .m 文件中你可能需要

```
@sythesize myDraggedView 
```

然后，您需要将该属性连接到您拖到控制器上的视图。但是你应该用谷歌搜索如何做到这一点，因为有比我现在能写的更好的教程。但是您应该在界面生成器中查找与对象的连接事件。总之祝你好运！

# python - 如何使用 pyparsing 解析 F5 bigip.conf

> ID：15889170
> 
> 赞同：2
> 
> 时间：2013-04-08T21:17:55.150
> 
> 标签：python, pyparsing, f5

我试图弄清楚如何使用这个漂亮的库来解析 BigIP 配置文件......语法应该是这样的：

```
stanza :: name { content }
name   :: several words, might contain alphas nums dot dash underscore or slash
content:: stanza OR ZeroOrMore(printable characters) 
```

为了使事情稍微复杂一点，一个例外：

如果名称以“规则”开头，则内容不能是“节”

我从这个开始：

```
from pyparsing import *
def parse(config):
    def BNF():
        """
        Example:
        ...
        ltm virtual /Common/vdi.uis.test.com_80_vs {
            destination /Common/1.2.3.4:80
            http-class {
                /Common/http2https
            }
            ip-protocol tcp
            mask 255.255.255.255
            profiles {
                /Common/http { }
                /Common/tcp { }
            }
            vlans-disabled
        }
        ...
        """        
        lcb, rcb, slash, dot, underscore, dash = [c for c in '{}/._-']
        name_word = Word(alphas + nums + dot + underscore + slash + dash)
        name = OneOrMore(name_word).setResultsName("name")
        stanza = Forward()
        content = OneOrMore(stanza | ZeroOrMore(OneOrMore(Word(printables)))).setResultsName("content")
        stanza << Group(name + lcb + content + rcb).setResultsName("stanza")
        return stanza

    return [x for x in BNF().scanString(config)] 
```

上面的代码似乎锁定在某个无限循环中。如果“名称”以“规则”开头，它也缺少我排除查找“节”的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:35:36.937

OneOrMore(ZeroOrMore(OneOrMore(Word(printables))) 将始终匹配，从而导致无限循环。

此外，printables 包括一个右大括号，它被内容术语消耗，并且不再可用于该节。（如果您的内容可以包含右括号，则需要定义一些东西来转义它，以区分内容括号和节括号。）

要解决名称规则，您需要另一个内容定义，一个不包含节的内容定义和一个“规则规则”。

```
def parse(config):
    def BNF():
        lcb, rcb, slash, dot, underscore, dash = [c for c in '{}/._-']
        printables_no_rcb = Word(printables, excludeChars=rcb)
        name_word = Word(alphas + nums + dot + underscore + slash + dash)
        name = OneOrMore(name_word).setResultsName("name")
        rule = Group(Literal('rule') + name).setResultsName("name")
        rule_content = OneOrMore(printables_no_rcb).setResultsName("content")
        stanza = Forward()
        content = OneOrMore(stanza | OneOrMore(printables_no_rcb)).setResultsName("content")
        stanza << Group(rule + lcb + rule_content + rcb | name + lcb + content + rcb).setResultsName("stanza")
        return stanza
    return [x for x in BNF().scanString(config)] 
```

# r - 如何从 R 中的线性模型在特定 X 处生成随机 Y？

> ID：15889174
> 
> 赞同：4
> 
> 时间：2013-04-08T20:29:59.140
> 
> 标签：r

假设我们有一个`f1`适合某些数据点`x`的线性模型：`y`

```
f1 <- lm(y ~ x,data=d) 
```

如何使用**R**中的这种拟合在`y`新`x`值（与旧`x`值不同但在旧值范围内）生成新值？`x``f1`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-03T14:18:32.157

`stats:::simulate.lm`允许您从拟合的线性模型中进行采样`lm`（与[@Bulat 的方法](https://stackoverflow.com/a/37143607/1870254)相反，它使用残差方差的无偏估计）。要模拟自变量的不同值，您可以像这样修改：

```
# simulate example data
x <- runif(20, 0, 100)
y <- 5*x + rnorm(20, 0, 10)
df <- data.frame(x, y)

# fit linear model
mod <- lm(y ~ x, data = df)

# new values of the independent variable
x_new <- 1:100

# replaces fitted values of the model object with predictions for new data,
mod$fitted.values <- predict(mod, data.frame(x=x_new)) # "hack" 

# simulate samples appropriate noise and adds it the models `fitted.values`
y_new <- simulate(mod)[, 1] # simulate can return multiple samples (as columns), we only need one

# visualize original data ...
plot(df)
# ... alongside simulated data at new values of the independent variable (x)
points(x_new, y_new, col="red") 
```

[![在此处输入图像描述](https://i.stack.imgur.com/qfqBn.png)](https://i.stack.imgur.com/qfqBn.png)

（黑色为原始数据，红色为模拟数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T15:59:54.093

我正在研究同样的问题。

简单来说，可以通过使用残差中的样本来完成：

```
mod <- lm(y ~ x, data = df)

x_new <- c(5) # value that you need to simulate for.
pred <- predict(mod, newdata=data.frame(x = x_new))
err <- sample(mod$residuals, 1)
y <- pred + err 
```

有一个`simulate(fit, nsim = 10, XX = x_new)`功能，应该为你做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:41:26.160

您可以`predict`为此使用：

```
x <- runif(20, 0, 100)
y <- 5*x + rnorm(20, 0, 10)
df <- data.frame(x, y)
df
plot(df)

mod <- lm(y ~ x, data = df)

x_new <- 1:100
pred <- predict(mod, newdata=data.frame(x = x_new))
plot(df)
points(x_new, pred) 
```**

# java - 检查消息是否包含字符串

> ID：15889177
> 
> 赞同：0
> 
> 时间：2013-04-08T21:18:01.173
> 
> 标签：java, string, contains

我有一个检查 id 一个短语是否包含在消息中的类，我尝试使用`Matcher`and`Pattern`和 with 进行`String.contains()`检查，但返回的结果很奇怪。

这是课程：

```
public class MotsClesFilter implements EmailFilter {

    final String NAME = "Filtrage par mots cles";
    /*private Pattern chaineSpam;
    private Matcher chaineCourriel;*/
    private int nbOccMotSpam;
    private byte confidenceLevel;
    @Override
    public String getFilterName() {
        return this.NAME;

    }

    @Override
    public byte checkSpam(MimeMessage message) {
        analyze(message);

        if(this.nbOccMotSpam==0)
            this.confidenceLevel = 1;
        else if (this.nbOccMotSpam>0 && this.nbOccMotSpam<2)
            this.confidenceLevel = CANT_SAY;
        else if (this.nbOccMotSpam>1 && this.nbOccMotSpam<3)
            this.confidenceLevel = 50;
        else if (this.nbOccMotSpam>3 && this.nbOccMotSpam<4)
            this.confidenceLevel = 65;
        else if (this.nbOccMotSpam>4 && this.nbOccMotSpam<5)
            this.confidenceLevel = 85;
        else this.confidenceLevel = 90;
        return (getConfidenceLevel());
    }

    public void analyze(MimeMessage message){
        try {
            List<String> listeChaines = new ArrayList<String>(); 
            BufferedReader bis = new BufferedReader(new InputStreamReader(new FileInputStream(new File("SpamWords.txt"))));
            while(bis.ready()){
                String ligne = bis.readLine();
                listeChaines.add(ligne);
            }

            String mail = ((String.valueOf(message.getContent())));
            //System.out.println(mail);

            for (int j =0; j<listeChaines.size();j++){
                //System.out.println(listeChaines.get(j));
                Pattern chaineSpam = Pattern.compile(listeChaines.get(j),Pattern.CASE_INSENSITIVE);
                Matcher chaineCourriel = chaineSpam.matcher(mail);
                if (chaineCourriel.matches())
                    this.nbOccMotSpam++;

            }

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    @Override
    public byte getConfidenceLevel() {
        // TODO Auto-generated method stub
        return this.confidenceLevel;
    }

    @Override
    public boolean enabled() {
        // TODO Auto-generated method stub
        return true;
    }
} 
```

如果使用匹配，则返回的结果`checkSpam`始终为 1，如果使用 find，则返回 90，当我使用`mail.contains(listeChaines.get(j))`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:21:37.263

这意味着消息与文件中的任何字符串都不匹配，但文件中至少有 5 个字符串可以*在*消息中找到。

`matches()`检查*整个*字符串是否与模式匹配。如果某些子字符串匹配它，则不会。

# c - 标头中的 EXPORT_SYMBOL 导致“导出两次”错误

> ID：15889194
> 
> 赞同：2
> 
> 时间：2013-04-08T21:19:05.247
> 
> 标签：c, linux, gcc, linux-kernel, c99

我有一个头文件，其中声明了几个全局变量，格式如下：

**常量.h**

```
#ifndef CONSTANTS_H
#define CONSTANTS_H

extern unsigned var;
EXPORT_SYMBOL(var);

#endif 
```

**常量.c**

```
#include "constants.h"
unsigned var = 10; 
```

**foo.c**

```
#include "constants.h" 
```

当我尝试编译内核模块时，每个导出的符号都会出现以下错误：

```
WARNING: /home/vilhelm/proj/constants: 'var' exported twice. Previous export was in /home/vilhelm/proj/foo.ko 
```

我怀疑每次包含**constants.h**头文件时都会导出符号，但我不明白为什么。**constants.h**中的包含保护不应该防止`EXPORT_SYMBOL(var)`被多次读取吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:52:47.920

> constants.h 中的包含保护不应该阻止 EXPORT_SYMBOL(var) 被多次读取吗？

*包含保护防止标头在同一个*源文件中多次包含。它不能阻止它通过*多个*源文件被包含。请记住，来自所有来源的对象都链接到一个对象中，因此会产生冲突。

假设您有另一个头文件，它也包含在源文件中，称为 foo.h，它又包含 constants.h。文件 constants.c 将尝试包含 constants.h 两次（一次直接通过 constants.h，另一次通过 foo.h）。include 守卫在这里工作，constants.h 只会被包含一次。

foo.c 也会发生同样的事情。它将尝试包含 constants.h 两次（一次直接通过 constants.h，再次通过 foo.h）。include 守卫在这里也可以工作，constants.h 只会被包含一次。

但是随后这两个对象，constants.o 和 foo.o 将被链接在一起，每个对象都通过 constants.h 拥有其EXPORT 的*单个*副本。这加起来是两个。

您要确保导出仅在最终链接中出现一次。一种方法是将它们从常量.h 之类的公共文件中取出，并将它们移动到名为exports.c 的文件中。

# backup - sql server 恢复备份错误

> ID：15889197
> 
> 赞同：62
> 
> 时间：2013-04-08T21:19:14.377
> 
> 标签：backup, sql-server-2012, database-backups, sql-server-2012-express

我已经备份了我在另一台运行 SQL Server 2012 Express Edition 的机器上创建的数据库，我想在我的机器上恢复它，它运行相同。我勾选了覆盖现有复选框的复选框，并收到此错误：

```
Backup mediaset is not complete. Files: D:\question.bak. Family count:2\. Missing family sequence number:1 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-09T03:29:35.167

如果在进行备份时，备份目标文本框中列出了多个文件，则会发生这种情况。返回您的源服务器并再次创建备份；这一次，确保只列出一个目标文件。

如果您将多个文件列为备份目标，则备份将在它们之间进行条带化；您将需要所有文件来执行还原。

您可以通过对复制到目标服务器的单个文件执行 RESTORE LABELONLY 来验证这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-14T18:29:00.127

[Sandra Walter's Answer](https://stackoverflow.com/a/15892786/901641)对所发生的事情提供了准确的描述，但我发现答案有点欠缺。

要进行非条带化备份（这就是在这种情况下发生的情况），请返回到设置数据库备份的窗口。底部是不同条纹将去往的路径列表。

转到每个列出的路径并删除备份的条带。

然后从窗口中的列表中删除除一个路径之外的所有路径。并单击“确定”按钮。您的非条带备份将在该路径上创建。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-05T04:12:21.367

我的备份安排在两个不同的位置。一旦我在恢复过程中选择了这两个选项，它就对我有用。

# asp.net-mvc - 果园 - 点击屏幕并显示小部件等

> ID：15889198
> 
> 赞同：0
> 
> 时间：2013-04-08T21:19:19.340
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

我记得在教程中看到过这个，但不记得如何访问它。

使用 Orchard，您可以从 moudles/galary 中 d/l 一些内容，当您查看网站时，您可以在屏幕上的任何位置选择它，它会告诉您它在哪个小部件和图层上（在屏幕底部）

是设计师工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:40:56.983

是的。从设计器工具模块启用形状跟踪功能。有关详细信息，请参阅[http://docs.orchardproject.net/Documentation/Customizing-Orchard-using-Designer-Helper-Tools](http://docs.orchardproject.net/Documentation/Customizing-Orchard-using-Designer-Helper-Tools)。

# html - 在网站上播放 Flac 文件

> ID：15889204
> 
> 赞同：2
> 
> 时间：2013-04-08T21:19:43.817
> 
> 标签：html, web, audio-player, flac

有没有办法在网站上播放 Flac 文件，最好使用 HTML5 和/或 jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:31:30.957

我不知道任何浏览器内的 Flac 播放器。但是，如果你追求无损文件格式，你可以考虑 [mp3HD](http://en.wikipedia.org/wiki/Mp3HD)，它也是无损的，和 Flac 一样，但向后兼容 mp3，这意味着任何 mp3 播放器都可以播放。

# mysql - Node.js 错误“现在无法切换到旧模式。” 使用 MySQL NPM

> ID：15889205
> 
> 赞同：0
> 
> 时间：2013-04-08T21:19:46.953
> 
> 标签：mysql, node.js

[通过mysql npm](https://npmjs.org/package/mysql)发出查询时，Node.js 会引发以下错误。

```
_stream_readable.js:664
throw new Error('Cannot switch to old mode now.');

Error: Cannot switch to old mode now.
at emitDataEvents (_stream_readable.js:664:11)
at Socket.Readable.resume (_stream_readable.js:649:3) 
```

引发此错误的示例代码：

```
query  = mysqlCLI.query( 'SELECT * FROM foo WHERE bar = 1' );
results = [];

mysqlCLI.resume();

query

  .on( 'error', function ( err ) {

    console.log( 'Bad Things: ', err );

  })

  .on( 'result', function ( row ) {

      results.push( row );

  })

  .on( 'end', function (){

    mysqlCLI.pause();

    dataHandler( results );

  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:19:46.953

这需要相当多的故障排除，但最终的解决方法是删除`mysqlCLI.pause();`和`mysqlCLI.resume();`. 这个问题的奇怪之处在于代码在 Windows Server 2003 上执行得很好，但是一旦我通过 Git 克隆它就在 CentOS 5.9 (RHEL) 下崩溃了。

# java - Jersey post消费总是调用对象的默认构造函数

> ID：15889208
> 
> 赞同：0
> 
> 时间：2013-04-08T21:19:48.960
> 
> 标签：java, json, jersey

当我尝试使用以 Person 作为参数的休息服务时，永远不会在我的 Person 类中调用非默认构造函数。

这是我的人员类：

```
@XmlRootElement(name = "person")
public class Person {

protected String name;

public Person(String name) {
    this.name=name;
}

// default constructor
public Person(){this.name="";}

@XmlElement(required=true, name="name")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
};

} 
```

这是我的网络方法：

```
@Path("person/")
public class PostResource {

@Path("create")
@POST
@Produces("text/plain")
@Consumes("application/json")
public String createPerson(Person person) {
    return person.getName();
}
} 
```

这是我休息电话的正文：

```
{

"person": { "name":"some name"}

} 
```

传递给 createPerson 的人员对象的名称始终为空（或我在默认构造函数中指定的任何内容）

任何线索为什么？？？此外，该方法确实成功返回，因此它响应正确，只是没有正确接受对象

# c - 将 uint16_t 变量与数字相乘的奇怪结果

> ID：15889212
> 
> 赞同：5
> 
> 时间：2013-04-08T21:20:00.983
> 
> 标签：c

我有一段非常简单的 C 代码，它给了我奇怪的结果。我正在为 Micaz 微粒开发一个简单的无线传感器网络应用程序。它似乎有 ATmega128L 8 位 AVR 微处理器。我正在使用 AVR studio 编写和编译代码。

```
uint16_t myvariable;
uint16_t myresult;
myresult = myvariable*256; 
```

当 myvariable 为 3 时，我发现 myresult 总是重置为 512。只是想知道为什么它会这样工作。我的猜测是，这种文字数字 256 和 uint16_t 的混合神奇地导致了问题。但我不知道为什么。有人可以对此给出详细的解释吗？感谢任何帮助！

更详细的源代码如下。

```
static uint16_t myvariable[2];
static uint8_t AckMsg[32];
uint16_t myresult[MAX_SENDERS];

void protocol()  
{           
    if(thisnodeid != 5){   // sender nodes
      while (1)
      {         
        if(AckReceived && !MsgSent) {
          // If ACK received and a new message not sent yet,
          // send a new message on sending node.
        }

        else if(!AckReceived && MsgSent)
        {
            lib_radio_receive_timed(16, 32, AckMsg, 120);
            myvariable[0] = AckMsg[0];
            myvariable[1] = AckMsg[1];
            // Bug!!!, variable overflowed.
            myresult[thisnodeid] = 256*myvariable[1] + myvariable[0];  
        }

      }
    }           

} 
```

我真正想弄清楚的是，编译器如何编译以下代码行，因为我知道是这行代码导致了这个错误。提前感谢您提供任何信息！

```
myresult[thisnodeid] = 256*myvariable[1] + myvariable[0]; 
```

当 myvariable[1]=3，myvariable[0]=0 时，我总是得到 myresult[] = 512。看起来 768 总是重置为 512。只是不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T18:44:26.620

我在标准系统上尝试了这段代码没有任何问题：

```
#include <stdio.h>
#include <string.h>
#include <stdint.h>
#define MAX_SENDERS 10
static uint16_t myvariable[2];
static uint8_t AckMsg[32];
uint16_t myresult[MAX_SENDERS];
main()
{
    AckMsg[0] = 0;
    AckMsg[1] = 3;
    myvariable[0] = AckMsg[0];
    myvariable[1] = AckMsg[1];
    myresult[0] = 256*myvariable[1] + myvariable[0];  
    printf("%d", (int)myresult[0]);
} 
```

因此，要调试您的代码，您应该尝试替换以下行：

```
myvariable[0] = AckMsg[0];
myvariable[1] = AckMsg[1];
// Bug!!!, variable overflowed.
myresult[thisnodeid] = 256*myvariable[1] + myvariable[0]; 
```

经过 ：

```
uint16_t tmp;
myvariable[0] = AckMsg[0];
myvariable[1] = AckMsg[1];
tmp = 256*myvariable[1] + myvariable[0]; 
myresult[thisnodeid] = 256*myvariable[1] + myvariable[0]; 
printf("%d %d\n", (int)(AckMsg[0]), (int)(AckMsg[1]));
printf("%d %d\n", (int)(thisnodeid), (int)(MAX_SENDERS));
printf("%d %d\n", (int)(myvariable[0]), (int)(myvariable[1]));
printf("%d %d\n", (int)(tmp), (int)(myresult[thisnodeid])); 
```

这可能会带来有关问题根源的有用信息。

如果您无法在调试器中打印某些内容，则可以尝试以下操作：

```
uint16_t i = 0;
uint16_t n = 255;
myresult[thisnodeid] += myvariable[1];
while (i != n) {
    myresult[thisnodeid] += myvariable[1];
    i += 1;
}
myresult[thisnodeid] += myvariable[0]; 
```

它会很慢，但它可以让您检测到实际发生过低的位置，因为唯一大于 255 的变量是`myresult`.

# scripting - awk：如果缺少则添加一行

> ID：15889213
> 
> 赞同：0
> 
> 时间：2013-04-08T14:17:10.197
> 
> 标签：scripting, awk

我有一个处理 .ICS 日历文件的 awk 脚本。如果缺少 ATTENDEE 行，我需要添加它。

我已经有一个脚本，它解析所有事件，只考虑我需要给定 CHECKPARM 标准的事件。如果与会者不存在，我需要添加它。

```
/BEGIN:VEVENT/ { cache = 1; }

/CHECKPARM/ {
    if( index( $0, var ) )
        printf( "%s", cached_lines );
    else
        drop = 1;
    cached_lines = "";
    cache = 0;
}

# this doesn't work
#!~ /ATTENDEE/ {
#    printf ("ATTENDEE: %s", organizer);
#}

cache  {
    cached_lines = cached_lines $0 "\n";
    next;
};

!drop { print; }

/END:VEVENT/ { drop = 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:37:01.960

尝试使用标志，如果存在线，则设置它，如果不存在，则添加线。像这样的东西：

```
/ATTENDEE/ {att = 1}

!att {
    printf ("ATTENDEE: %s\n", organizer)
} 
```

# auto-increment - Squeryl获取序列的值

> ID：15889220
> 
> 赞同：0
> 
> 时间：2013-04-08T21:20:31.907
> 
> 标签：auto-increment, atomic, squeryl

我在数据库中插入一个新行，它的 id 是自动递增的（“串行”）。插入后如何获取 id 的值？目前，我正在使用以下解决方法：

```
inTransaction {
  Schema.table.insert(new Entry(
      content = "..."
  ))
  def entries = from(Schema.table)(e => select(e) orderBy(e.id desc)).page(0, 1)
  val id = entries.headOption match {
    case Some(entry) => entry.id
    case None => 0
  }
} 
```

如果没有更简单的方法，我如何确保整个块都是原子操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:25:19.017

是的，

```
val new = Schema.table.insert(myOriginalOld)
Console println new.id 
```

# python - 类没有属性，即使将 self 作为参数给出 - Python

> ID：15889232
> 
> 赞同：0
> 
> 时间：2013-04-08T21:21:05.887
> 
> 标签：python

我有以下`Python`课程：

```
import sys
import re

class Parser:

    def __init__(self, filename=""):
        self.filename = filename

    def parse(self):

        try:
            table = {}
            fp = open(self.filename, 'r')
            records = fp.readlines()
            for record in records:
                (index, column, value) = record.strip().split()
                value = value[:3]
                table[column] = value

            return table

        except IOError:
            print "Could not open file ", self.filename
            sys.exit(1) 

    def organize_map(self, table={}):

        new_table = {
            'profile_1': [],
            'profile_2': [],
            'profile_3': [],
            'profile_4': []
        }

        for k, v in table.iteritems():

            if re.match("profile1", k):
                new_table['profile_1'].append(int(v))
            elif re.match("profile2", k):
                new_table['profile_2'].append(int(v))
            elif re.match("profile3", k):
                new_table['profile_3'].append(int(v))
            elif re.match("profile4", k):
                new_table['profile_4'].append(int(v)) 

        for k, v in new_table.iteritems():
            v.sort()
            v = v[2:len(v)-2]
            new_table[k] = v
            new_table[k].append(avg(v))
            new_table[k].append(std(v))

        return new_table

parser = Parser()
table = parser.parse()
print parser.organize_map(table) 
```

当我执行`parser.py`文件时，我得到：

```
 File "parser.py", line 94, in <module>
    print parser.organize_map(table)
AttributeError: Parser instance has no attribute 'organize_map' 
```

我不知道为什么...我`organized_map()`用`self`关键字定义...任何想法？示例文件：

```
1: profile1_test_1 155700802.32
2: profile1_test_2 156129130.88
3: profile1_test_3 155961744.64
4: profile1_test_4 155917583.6
5: profile1_test_5 156193748.16
6: profile1_test_6 155749778.88
7: profile1_test_7 156040104.72
8: profile1_test_8 156934277.68
9: profile1_test_9 156976866.56 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:27:29.373

您在源代码中将缩进与制表符和空格混合在一起，可能 python 解释器对制表符的解释与您预期的不同。的定义`organize_map`用制表符缩进，很可能最终被视为`parse`.

不要将缩进与制表符和空格混合，这只会导致混乱。您还可以`-t`在运行脚本时使用 Python 的参数来获取有关不一致缩进的警告：

```
python -t myscript.py 
```

# javascript - 从客户端检测到潜在危险的 Request.Form 值 tbpassword="9 网络，我收到一条错误消息 “从客户端检测到潜在危险的 Request.Form 值”当我输入带有特殊字符“<”和“>”的密码时，我在网上找到了一些解决方案，说 add validrequest="false" 和 requestValidationMode=" 2.0" 我确实在 web.config 文件中添加了这两个语句 问问题 问问题 2013-04-08T21:21:42.280 750 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 网络，我收到一条错误消息 “从客户端检测到潜在危险的 Request.Form 值”当我输入带有特殊字符“<”和“>”的密码时，我在网上找到了一些解决方案，说 add validrequest="false" 和 requestValidationMode=" 2.0" 我确实在 web.config 文件中添加了这两个语句，并且在页面顶部我的 web 配置看起来像这样 <system.web> <authorization> <allow roles="TARGET.DRP.ADMINS, TARGET.DRP.BUSINESS_ADMINS, TARGET.DRP.DEVICE_MNGRS, TARGET.DRP.USERS, TARGET.DRP.MANUFACTURERS"/> <deny users="?"/> </authorization> <httpRuntime requestValidationMode="2.0"/> <compilation debug="true"/> <pages validateRequest="false"/> </system.web> 而且只有当密码有“<”或“>”时才会显示，但如果密码有“<”和“>”，它工作正常。有没有办法解决这个问题。 谢谢.. Mongodb toArray() 性能 我有一个包含 727000 个文档的集合“匹配”。它内部有 6 个字段，没有数组，只有简单的整数和对象 ID。我正在对集合进行如下查询： matches.find({ $or: [{ homeTeamId: getObjectId(teamId) }, { awayTeamId: getObjectId(teamId) } ], season: season, seasonDate: { '$gt': dayMin, '$lt': dayMax } }).sort({ seasonDate: 1 }).toArray(function (e, res) { callback(res); }); 结果仅返回大约 7-8 个文档。查询大约需要 100 毫秒，我认为这很合理，但主要问题是，当我调用方法 toArray() 时，它增加了大约 600 毫秒！我在笔记本电脑、Intel Core I5、6GB RAM 上运行服务器，但我不敢相信它为 7-8 个文档增加了 600 毫秒。尝试使用 mongodb-native 驱动程序，现在切换到 mongoskin，仍然得到同样缓慢的结果。有什么建议么 ？ javascriptjqueryasp.netajaxasp.net-mvc-3 4 2 回答 2 This answer is useful 1 如果您使用 GET 提交表单，除非您对值进行编码，否则它将无法工作- 于 2013-04-08T21:26:10.913 回答 This answer is useful 0 把validateRequest="false"你的web.config作为： <pages validateRequest="false" ... > 这使它工作。之后，您需要小心在页面上呈现的内容以及从用户输入中获得的内容。 msdn 上的页面元素 于 2013-04-09T00:42:42.977 回答 Related 2 windows - 如何连接 Windows 批处理文件的命令输出 1 iphone - 从 iphone 中的 sqlite 和 tableview 中删除数据 3 android - 来自android中url的图库图片？ 3 iphone - 是否可以根据语言有 2 个不同的应用程序图标？ 0 deployment - 在 Eclipse Juno 和 GlassFish 3.1.2.2 上增量发布 1 ruby-on-rails - 在 rails 2 模型中获取完整的链接 url 1 wpf - 将 DataGrid 列宽设置为 Star 样式 1 ios - 如何在 iOS 中获取绝对图像位置？ 1 asp.net - 获取到 localhost 的连接被中断。尝试发送 [DataContract] 标记对象的 JSON 表示时 1 wordpress - 如何在 magento 的博客页面上显示购物车和帐户链接？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15889240
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc-3

网络，我收到一条错误消息

“从客户端检测到潜在危险的 Request.Form 值”当我输入带有特殊字符“<”和“>”的密码时，我在网上找到了一些解决方案，说 add validrequest="false" 和 requestValidationMode=" 2.0" 我确实在 web.config 文件中添加了这两个语句，并且在页面顶部我的 web 配置看起来像这样

`<system.web> <authorization> <allow roles="TARGET.DRP.ADMINS, TARGET.DRP.BUSINESS_ADMINS, TARGET.DRP.DEVICE_MNGRS, TARGET.DRP.USERS, TARGET.DRP.MANUFACTURERS"/> <deny users="?"/> </authorization> <httpRuntime requestValidationMode="2.0"/> <compilation debug="true"/> <pages validateRequest="false"/> </system.web>`

而且只有当密码有“<”或“>”时才会显示，但如果密码有“<”和“>”，它工作正常。有没有办法解决这个问题。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:26:10.913

如果您使用 GET 提交表单，除非您对值进行编码，否则它将无法工作-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:42:42.977

把`validateRequest="false"`你的`web.config`作为：

```
<pages validateRequest="false" ... > 
```

这使它工作。之后，您需要小心在页面上呈现的内容以及从用户输入中获得的内容。

[msdn 上的页面元素](http://msdn.microsoft.com/en-us/library/950xf363(v=vs.100).aspx)

# python - 在python中将变量发送到TCPHandler

> ID：15889241
> 
> 赞同：1
> 
> 时间：2013-04-08T21:21:50.317
> 
> 标签：python, tcp, socketserver

我对如何在 python 中使用 SocketServer.TCPServer 将变量发送到 TCPHandler 感到困惑。

```
HOST, PORT = hosts[0], args.port
server = SocketServer.TCPServer((HOST, PORT), METCPHandler)
server.serve_forever() 
```

哪个电话：

```
class METCPHandler(SocketServer.BaseRequestHandler):           
    def handle(self):
        self.data = self.request.recv(1024).strip()
        print "{} wrote:".format(self.client_address[0])
        r = MExpressHandler(self.data, False) 
```

但我想将调试布尔值传递给 MExpressHandler.. 所以

```
HOST, PORT = hosts[0], args.port
server = SocketServer.TCPServer((HOST, PORT), METCPHandler(debug))
server.serve_forever() 
```

失败。这样做的正确方法是什么？我是否必须重新创建整个 TCPHandler 覆盖`__init__`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:51:23.497

相信你的直觉，正确的方法*确实*是继承 TCPServer 并覆盖该`__init__`方法，但是 Python 使这非常容易！

```
import SocketServer

class DebugTCPServer(SocketServer.TCPServer):
    def __init__(self, server_address, RequestHandlerClass, bind_and_activate=True, debug=True):
        self.debug = debug
        SocketServer.TCPServer.__init__(self, server_address, RequestHandlerClass, bind_and_activate=True)

class DebugMETCPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        # self.server is an instance of the DebugTCPServer
        DEBUG = self.server.debug
        self.data = self.request.recv(1024).strip()
        if DEBUG:
            print "{} wrote:".format(self.client_address[0])
        r = MExpressHandler(self.data, False)

server = DebugTCPServer((HOST, PORT), DebugMETCPHandler, debug=True) 
```

或者因为我们指定`debug=True`为默认值：

```
server = DebugTCPServer((HOST, PORT), DebugMETCPHandler) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T09:39:17.807

正如我在这篇[文章](https://stackoverflow.com/questions/6875599/)中已经提出的那样，可以在不对 TCPServer 进行子类化的情况下做到这一点。它实际上更简洁和通用。

您可以通过以下方式为处理程序提供参数：

```
class METCPHandler(SocketServer.BaseRequestHandler):
  def __init__(self, debug):
    self.debug = debug

  def __call__(self, request, client_address, server):
    h = METCPHandler(self.debug)
    SocketServer.StreamRequestHandler.__init__(h, request, client_address, server) 
```

您现在可以将处理程序的**实例**提供给 TCPServer：

```
SocketServer.TCPServer((HOST, PORT), METCPHandler(True)) 
```

TCPServer 通常会为每个请求创建一个新的**METCPHandler**实例，但在这种情况下，将**调用 __call__**方法而不是构造函数（它已经是一个实例。）

在**调用**方法中，我显式地复制了当前的 METCPHandler 并传递给超级构造函数，以符合“一个请求一个处理程序实例”的原始逻辑。

值得看看 SocketServer 模块来了解这里发生了什么：[https ://github.com/python/cpython/blob/2.7/Lib/SocketServer.py](https://github.com/python/cpython/blob/2.7/Lib/SocketServer.py)

# node.js - Mongodb toArray() 性能

> ID：15889242
> 
> 赞同：3
> 
> 时间：2013-04-08T21:21:55.547
> 
> 标签：node.js, mongodb, nosql

我有一个包含 727000 个文档的集合“匹配”。它内部有 6 个字段，没有数组，只有简单的整数和对象 ID。我正在对集合进行如下查询：

```
matches.find({
  $or: [{
      homeTeamId: getObjectId(teamId)
    }, {
      awayTeamId: getObjectId(teamId)
    }
  ],
  season: season,
  seasonDate: {
    '$gt': dayMin,
    '$lt': dayMax
  }
}).sort({
  seasonDate: 1
}).toArray(function (e, res) {
  callback(res);
}); 
```

结果仅返回大约 7-8 个文档。查询大约需要 100 毫秒，我认为这很合理，但主要问题是，当我调用方法 toArray() 时，它增加了大约 600 毫秒！我在笔记本电脑、Intel Core I5、6GB RAM 上运行服务器，但我不敢相信它为 7-8 个文档增加了 600 毫秒。尝试使用 mongodb-native 驱动程序，现在切换到 mongoskin，仍然得到同样缓慢的结果。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T17:50:00.280

toArray() 方法迭代抛出所有游标元素并将它们加载到内存中，这是一个成本很高的操作。也许您可以添加索引以提高查询性能，和/或避免 toArray 迭代自己抛出 Cursor。

问候， 莫西

# angularjs - 如何在 ng-repeat 中分隔组

> ID：15889246
> 
> 赞同：8
> 
> 时间：2013-04-08T21:22:03.740
> 
> 标签：angularjs

我有我想展示的项目，通常使用 ng-repeat。我想以某种顺序显示（简单），但是每当有序属性发生变化时，我都想要一些 HTML 介于两者之间。

示例：（[小提琴](http://jsfiddle.net/7pzLC/)）：

```
<div ng-app ng-controller="Main">
   <div ng-repeat="item in items | orderBy:'role'">
        {{item.role}} - {{item.name}}
   </div>
</div>

function Main($scope){
    $scope.items = [{name: 'First', role: 1}, 
                    {name: 'Second', role:2}, 
                    {name: 'Third', role: 1}, 
                    {name: 'Fourth', role: 2}];
    } 
```

我希望它打印：

> 1 - 第一
> 1 - 第三
> （一些分隔符）
> 2 - 第二
> 2 - 第四

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T21:33:02.523

您将希望在您的范围内创建一个函数。

```
$scope.currentRole = 'something';
$scope.CreateHeader = function(role) {
      showHeader = (role!=$scope.currentRole); 
       $scope.currentRole = role;
      return showHeader;
} 
```

然后在您的 HTML 中：

```
<div ng-app ng-controller="Main">
   <div ng-repeat="item in items | orderBy:'role'">
       <div ng-show="CreateHeader(item.role)">
       something here for the header
      </div>
        {{item.role}} - {{item.name}}

   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T15:56:28.927

@lucuma 的解决方案仅在第一次通过循环时有效。如果 Angular 刷新列表，变量仍然会从前一个循环中设置。

相反，我`header`在初始化期间向列表中添加了一个新属性（例如 ）：

```
function Main($scope){
    $scope.items = [{name: 'First', role: 1, header: false}, 
                    {name: 'Second', role:2, header: false}, 
                    {name: 'Third', role: 1, header: true}, 
                    {name: 'Fourth', role: 2, header: false}];
} 
```

然后@lucuma 的 HTML 工作：

```
<div ng-app ng-controller="Main">
  <div ng-repeat="item in items | orderBy:'role'">
    <div ng-show="item.header">    // <== with this change
      something here for the header
    </div>
    {{item.role}} - {{item.name}}
  </div>
</div> 
```

哦，您可以在初始化时对列表进行一次排序并删除`orderBy`过滤器。

# sql-server - 按 BLOB 列中的值选择表

> ID：15889249
> 
> 赞同：0
> 
> 时间：2013-04-08T21:22:16.237
> 
> 标签：sql-server

我们使用 ADO 和 SQL Server。

我们的表有一个 blob 列`XMLFIELD`，在这个 blob 中，我们存储了一个包含信息的完整 XML 文件。

```
 <XML>
          .... much much text and fields ....
     <\XML> 
```

读写这个XML字段没问题

如何构建查询以仅选择`XMLFIELD`包含特定文本/单词的数据集

```
select * from MyTable where XMLFIELD contains a special word 
```

或者

```
select * from MyTable where XMLFIELD contains a special field 
and has a special value 
```

# c++ - 无符号整数的最大值

> ID：15889253
> 
> 赞同：9
> 
> 时间：2013-04-08T21:22:42.260
> 
> 标签：c++, int

这就是我想要的：

```
unsigned int max_unsigned_int_size;
max_unsigned_int_size = ???; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-08T21:24:29.073

### [C](http://www.cplusplus.com/reference/climits/)

```
#include <limits.h>
unsigned int max_unsigned_int_size = UINT_MAX; 
```

### [C++](http://www.cplusplus.com/reference/limits/numeric_limits/)

```
#include <limits>
unsigned int max_unsigned_int_size = std::numeric_limits<unsigned int>::max(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-08T21:25:16.127

```
unsigned int max_unsigned_int_size = -1; 
```

保证做正确的事。无符号类型的算术始终是模数。

但在具体情况下，您始终应该使用`UINT_MAX`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-08T21:24:11.123

您正在寻找

```
#include <limits>
std::numeric_limits<unsigned int>::max(); 
```

如果您想要大小，`sizeof`可以乘以 CHAR_BITS 以获得位。

或者，有

```
std::numeric_limits<unsigned int>::digits(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-08T21:24:03.557

你需要[`std::numeric_limits::max()`](http://en.cppreference.com/w/cpp/types/numeric_limits/max)

```
#include <limits>

...

max_insigned_int_size = std::numeric_limits<unsigned int>::max(): 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T21:24:15.570

*   对于 C，值由`UINT_MAX`in给出[`limits.h`](http://www.cplusplus.com/reference/climits/)。
*   对于 C++，您也可以使用`std::numeric_limits<unsigned int>::max()`from [`limits`](http://www.cplusplus.com/reference/limits/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T21:24:35.937

```
#include <limits>

max_unsigned_int_size = std::numeric_limits<unsigned int>::max(); 
```

# java - 如何将 res/color/xml 样式应用于动态创建的按钮

> ID：15889258
> 
> 赞同：0
> 
> 时间：2013-04-08T21:22:50.527
> 
> 标签：java, android, eclipse

我有一个 xml 文件 res/color/btn_black，它允许我对按钮应用渐变外观。

我可以通过调用在 layout.xml 中成功使用它：

```
<Button
    android:background="@color/btn_black"
/> 
```

在其他地方，我在 Java 中动态创建按钮，并且我想应用相同的样式。当我尝试使用：

```
myButton.setBackgroundColor(getResources().getColor(R.color.btn_black)); 
```

我收到此错误：

```
android.content.res.Resources$NotFoundException: 
  File res/color/btn_black.xml from color state list resource ID #0x7f040001 
```

这似乎是我在这里找到的其他问题的正确方法，但它对我不起作用。我究竟做错了什么？

编辑：这是文件 btn_black.xml 供参考

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#343434" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
  </item>
  <item>
    <shape>
        <gradient
            android:startColor="#343434"
            android:endColor="#171717"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
  </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:49:03.797

似乎以错误的方式定义了您的 colors.xml 中的颜色。您的 colors.xml 应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="btn_black">#000000</color>
</resources> 
```

如我所见，您已经定义了 res/color/btn_black.xml，有什么问题。您需要在 /res/values/ 目录中创建 colors.xml 文件。

如果你有一个渐变 xml 文件，那么你需要把它放在 /res/drawable/ 文件夹中并调用 myButton.setBackground(getResources().getDrawable(R.drawable.btn_black)) 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:34:32.833

我认为最好的解决方案是为具有特定样式的按钮定义布局。然后，您可以使用您创建的布局为按钮充气。

请参阅此问题以获取特定帮助[android set style in code](https://stackoverflow.com/questions/3142067/android-set-style-in-code)

因此，在您的情况下，您可以使用具有定义布局的 xml 文件并膨胀以编程方式创建的按钮

# javascript - 在页面加载时水平和垂直居中 DIV

> ID：15889277
> 
> 赞同：1
> 
> 时间：2013-04-08T21:24:27.357
> 
> 标签：javascript, jquery, html, css

如何在页面加载时立即将 DIV 水平和垂直居中？

我目前正在使用以下解决方案：

**HTML：**

```
<div class="container">
  <div class="visitorSelect">
    <a href="/visitorLog/boeing">
      <div class="tile double icon bg-color-blue">
        <div class="tile-content">
          <i class="icon-plane"></i>
        </div>
        <div class="brand">
          <span class="name">Employee</span>
        </div>
      </div>
    </a>

    <a href="/visitorLog/guest">
      <div class="tile double icon bg-color-orange">
        <div class="tile-content">
          <i class="icon-group"></i>
        </div>
        <div class="brand">
          <span class="name">Guest</span>
        </div>
      </div>
    </a>
  </div> <!-- visitorSelect -->
</div> <!-- container --> 
```

**JavaScript：**

```
<script>
$(document).ready(function()
{
  $(window).resize(function()
  {
    $('.visitorSelect').css(
    {
      position: 'absolute',
      left: ($(window).width() - $('.visitorSelect').outerWidth()) / 2,
      top: ($(window).height() - $('.visitorSelect').outerHeight()) / 2
    });
  });

  // call `resize` to center elements
  $(window).resize();
});
</script> 
```

当我最初加载页面时，`DIV`到中心显示在页面的右侧，略低于垂直中心。*但是，当我手动调整页面大小时，它会准确*捕捉到它应该在的位置。

我需要采取哪些其他步骤才能在文档加载时使元素正确居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:40:36.867

除非这是某种模态或不寻常的东西，否则当 CSS Margin Auto 会为此工作时，我不会完全使用脚本来执行此操作。这是一个教程[http://demo.tutorialzine.com/2010/03/centering-div-vertically-and-horizo​​ntally/demo.html](http://demo.tutorialzine.com/2010/03/centering-div-vertically-and-horizontally/demo.html)

下面是一个 CSS 示例：

```
div.container{
  width:100%;
  height:100%;
}
div.visitorSelect {
  width:200px;
  height:200px;
  margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:41:34.570

在计算宽度*之前*将 .visitor 元素设置为绝对定位。

默认情况下，静态 div 将拉伸到父级的全宽；绝对 div 不会。这弄乱了你的第一个计算。

您可能应该在调整大小事件函数之外，在 CSS 或 ready() 函数中设置位置 css 规则。这是对代码更改最少的修复程序：

```
$(document).ready(function()
{
  $(window).resize(function()
  {
    $('.visitorSelect').css(
    {
      position: 'absolute'
    });

    $('.visitorSelect').css(
    {
      left: ($(window).width() - $('.visitorSelect').outerWidth()) / 2,
      top: ($(window).height() - $('.visitorSelect').outerHeight()) / 2
    });
  });

  // call `resize` to center elements
  $(window).resize();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:39:26.277

页面加载后，您应该定位**div ：**

```
<script>
$(document).ready(function()
{
  $('.visitorSelect').css(
    {
      position: 'absolute',
      left: ($(window).width() - $('.visitorSelect').outerWidth()) / 2,
      top: ($(window).height() - $('.visitorSelect').outerHeight()) / 2
    });

  $(window).resize(function()
  {
    $('.visitorSelect').css(
    {
      position: 'absolute',
      left: ($(window).width() - $('.visitorSelect').outerWidth()) / 2,
      top: ($(window).height() - $('.visitorSelect').outerHeight()) / 2
    });
  });

  // call `resize` to center elements
  $(window).resize();
});
</script> 
```

# oracle - hsqldb 是否提供类似于 listagg 的功能？

> ID：15889279
> 
> 赞同：3
> 
> 时间：2013-04-08T21:24:30.640
> 
> 标签：oracle, hsqldb

我正在寻找 HSQLDB 中的一个函数（或一组函数），它的功能类似于 Oracle 的 LISTAGG。

我将此作为更大选择的一部分，并希望在 HSQLDB 中保持语法尽可能相似：

```
SELECT LISTAGG(owner_nm, ', ') WITHIN GROUP (ORDER BY owner_nm) 
       FROM OWNERSHIP WHERE FK_BIZ_ID = BIZ.BIZ_DATA_ID) AS CURRENT_OWNER 
```

重点是我们正在尝试使用 HSQLDB 进行远程工作，使用 Oracle 进行现场工作、生产等，所以我想尽可能少地更改 DDL 来实现这一点。

查看 ARRAY_AGG，它似乎没有做任何类似的事情（只要能够像我们在上面使用 OWNERSHIP 所做的那样从单独的表中提取数据）。关于我如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:45:39.370

`group_concat`可能是您正在寻找的：

[http://www.hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs](http://www.hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs)

从手册中引用：

> *GROUP_CONCAT 是从 ARRAY_AGG 派生的专用函数。此函数以与 ARRAY_AGG 相同的方式计算数组，删除所有 NULL 元素，然后返回一个字符串，该字符串是数组元素的串联*

# php - 使用 ajax 插入 HTML 输入。代码有问题

> ID：15889283
> 
> 赞同：0
> 
> 时间：2013-04-08T21:24:57.157
> 
> 标签：php, ajax, mysqli

如果我只使用 php 单击提交按钮，数据将记录在 mysql 中。

通过 ajax _autosave.php 仅更新有效。插入不起作用。疯了....无法理解

first.php 中的 ajax 代码

```
<script type="text/javascript">
$(document).ready(function() {
setInterval(function (){
var date_day1=$("#date_day1").val();
var amount1=$("#amount1").val();
DATA = 'date_day1=' + date_day1 + '&amount1=' + amount1;
$.ajax({
type: "POST",
url: "_autosave.php",
data: DATA,
cache: false,
/*success: function(){
$(".done").show().html("Saved as a draft!");
}*/
});
setTimeout(function(){
$(".done").hide();
}, 1000);// 15 seconds
}, 3000);// 1 minute
});
</script> 
```

HTML 输入

```
<td><input type="text" name="date_day1" id="date_day1" value="<?php echo $_POST['date_day1']?>" size="1"></td>
<td><input type="text" name="amount1" id="amount1" value="<?php echo $_POST['amount1']?>" size="5"></td> 
```

first.php 和 _autosave.php 中相同的部分 php 代码

```
$date_day1 = $_POST['date_day1'];
$amount1 = $_POST['amount1'];

if ($stmt = mysqli_prepare($mysqli, "SELECT RecordDay FROM 2_1_journal WHERE RecordDay = ? ")) {
$stmt->bind_param('s', $date_day1);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($RecordDay);
$stmt->fetch();
//echo $RecordDay .' $RecordDay<br>';
}

if ($RecordDay == $date_day1) {
if ($stmt = mysqli_prepare($mysqli, "UPDATE 2_1_journal SET Amount = ? WHERE RecordDay = ? ") ) {
$stmt->bind_param( 'ds', $amount1 , $date_day1 );
$stmt->execute();
/*echo $date_day1 .' date_day1<br>';
echo $amount1 .' amount1<br>';*/
}    
}
else {
if ($stmt = mysqli_prepare($mysqli, "insert into 2_1_journal
(RecordDay, Amount, DebitAccount, CreditAccount)
values(?,?,?,? )")) {
$stmt->bind_param('sdss', $date_day1, $amount1, $debit1, $credit1 );
$stmt->execute(); //execute above insertion
}
} 
```

更新适用于两个文件（从两个文件中调用）。只有在没有 ajax 的情况下调用 Insert 才有效。怎么了？

**更新** 终于发现哪里不对了。如果 $_POST 未设置（不发送），则 mysql 中不会记录任何内容。但是执行后没有错误消息。只需记住这里的所有变量 $stmt->bind_param('sdss', $date_day1, $amount1, $debit1, $credit1 ); 必须存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:36:37.100

`data`语法可能是原因，请使用以下格式：

```
data: { key1: "value1", key2: "value2" } 
```

请参阅以下示例：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
type: "POST",
url: "some.php",
data: { name: "John", location: "Boston" }
}) 
```

因此，对于您的情况，请尝试：

```
$.ajax({
type: "POST",
url: "_autosave.php",
data: {date_day1:$("#date_day1").val(), amount1: $("#amount1").val()},
cache: false,
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:30:48.537

在插入时绑定 5 个参数而不是 4 个

# .net - 循环文件名

> ID：15889288
> 
> 赞同：0
> 
> 时间：2013-04-08T21:25:27.193
> 
> 标签：.net, vb.net, file

我正在尝试遍历文件夹中的所有文件，并仅列出文件名中包含特定文本的文件。例如，当`TEST.pdf`在文件夹 X 中移动一个新文件时，如果该文件夹中已经有一个名为`Test.pdf`的文件，那么新文件应该重命名为`Test1.pdf`，依此类推。为了首先做到这一点，我试图找到`TEST`名称中包含该单词的所有现有文件的计数。

这是我到目前为止的代码：

```
For Each FoundFile As String In My.Computer.FileSystem.GetFiles(varFolderPath, FileIO.SearchOption.SearchTopLevelOnly, varFileName & "*")
    If FoundFile.Contains(varFileName) Then                                                                             
        Response.Write(FoundFile & "</br>")
    End If
Next 
```

`varFileName`被传递的变量的值为`TEST.pdf`。

目前，我在文件夹中有`Test.pdf`,`Test1.pdf`和`Test2.pdf`，但由于某种原因，这段代码没有列出所有三个文件，而是`Test.pdf`在响应中显示我。

如果我将`For Each`循环更改为：

```
For Each fileName As String In Directory.GetFiles(varFolderPath, varFileName & "*") 
```

然后我仍然得到相同的结果 only `TEST.pdf`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:28:19.370

> 目前我的文件夹中有Test.pdf、Test1.pdf和Test2.pdf，但由于某种原因，这段代码没有列出所有三个文件，只是在response.write中显示了Test.pdf文件。

那很简单。名称“Test1.pdf”不包含“TEST.pdf”，即使您以不区分大小写的方式查看它。

也许您应该分别匹配扩展名和非扩展名部分 - 检查扩展名是否匹配*并且*文件名的第一部分是否以搜索文件名的第一部分开头。所以像：

```
Dim extension = Path.GetExtension(varFileName)
Dim rest = Path.GetFileNameWithoutExtension(varFileName)
If Path.GetExtension(FoundFile) = extension AndAlso _
   Path.GetFileNameWithoutExtension(FoundFile).StartsWith(rest) Then
    Response.Write(FoundFile & "</br>")
End If 
```

# asp.net - asp.net insertCommand 导致 NULL 值

> ID：15889294
> 
> 赞同：0
> 
> 时间：2013-04-08T21:26:15.677
> 
> 标签：asp.net, null, sql-insert

我有两个列表框，它们的值通过按钮发送到 TableC 中。

```
<asp:SqlDataSource ID="sql1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionDataBase %>" 
        SelectCommand="SELECT [Name] + ' (' + [CNbr] + ')' AS FullName, [CNbr] AS CNum FROM [TableA] ORDER BY [Name]">
    </asp:SqlDataSource>

    <asp:ListBox ID="lst1" runat="server" DataSourceID="sql1" DataTextField="FullName" DataValueField="CNum" AutoPostBack="true">
    </asp:ListBox>

    <asp:SqlDataSource ID="sql2" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionDataBase %>"  
                InsertCommand="INSERT INTO [TableB] ([CNbr], [RDate]) VALUES (@CNbr, @RDate)" 
        <InsertParameters>
            <asp:Parameter Name="CNbr" Type="String" />
            <asp:Parameter Name="RDate" Type="DateTime" />
        </InsertParameters>

        <asp:ImageButton ID="ibnCheckOutBtn" runat="server" 
            ImageUrl="./images/vidCheckOutButton.png" onclick="ibnCheckOutBtn_Click"   /> 
```

ASPX.CS 文件：

```
protected void ibnBtn_Click(object sender, ImageClickEventArgs e)
{
    sql2.Insert();
} 
```

我不太了解 C#，而且我的课程没有涵盖大多数 C#，因此我正在寻找一种不使用大量后台代码的解决方案。我得到的错误是：

无法将值 NULL 插入列“CNbr”、表“TableB”；列不允许空值。插入失败。该语句已终止。

但是，不应出现空值，因为这些值是从完全填充的列表框中获取的。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:25:44.643

您需要以类似的方式将值分配给 sql2 插入参数，如下所示：

```
protected void ibnBtn_Click(object sender, ImageClickEventArgs e)
{
    sql2.InsertParameters["CNbr"].DefaultValue = this.FindControl("lst1").SelectedValue;
    sql2.InsertParameters["RDate"].DefaultValue = DateTime.Now.ToString();
    sql2.Insert();
} 
```

# javascript - JavaScript 中的递归过多

> ID：15889295
> 
> 赞同：1
> 
> 时间：2013-04-08T21:26:17.070
> 
> 标签：javascript

我有这个打开新页面的 JavaScript：

```
$(document).ready(function () {
    //$('a[id$="lnkHidden"]').trigger("click");    // Not sure if this is actually necessary

    $('table[id$="dataTable"]').find("tbody").on("click", "tr", function () {
        $(this).find('a[id$="lnkHidden"]').trigger("click");
    });
}); 
```

这是 JS 脚本调用的按钮：

```
<h:commandLink id="lnkHidden" action="#{bean.pageRedirect}" style="text-decoration:none; color:white; display:none">

</h:commandLink> 
```

单击表格行后，我收到此错误消息：

```
too much recursion [Break On This Error] ...,c=l.length;c--;)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f));if(i){if(o||e){if(o){for(l=‌​[],... 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:12:57.560

您可以使用原始代码中的这些更改来切断无限循环

*   添加第二个参数来触发。通话变成`.trigger("click", [ true ])`
*   事件处理程序中的名称参数：`function(event, simulated)`
*   使用从触发器设置为 true 的模拟参数：`simulated || $(this).find('a[id$="lnkHidden"]').trigger("click", [ true ]);`

但是，不建议使用事件触发和那种选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:51:14.940

您可以直接更改当前 URL，而不是触发合成点击事件：

```
$(document).ready(function () {
    $('table[id$="dataTable"]').find("tbody").on("click", "tr", function () {
        var links = $(this).find('a[id$="lnkHidden"]');
        if(links.length && links[0].href) {
            window.location.href = links[0].href;
        }
    });
}); 
```

# crystal-reports - Crystal Reports 中的长字符串

> ID：15889296
> 
> 赞同：1
> 
> 时间：2013-04-08T21:26:22.193
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-2010, crystal-reports-8.5

我有一个报告 CR。在我的报告中，我检查表中是否存在多次记录，如果是这种情况，我将这些记录的“其他”列连接起来，并在报告中仅显示一行与连接值。但是，连接的字符串可能很长，我认为 StringVar 有 254 个字符的限制。即使我认为要使用多个 StringVar，我也无法猜测我应该声明多少变量，因为我无法每次都猜测我可以拥有多少重复记录。请问有什么帮助吗？

非常感谢 ！瓦卢

# html - HTML5 (& CSS3?) 在背景中创建一个正方形网格

> ID：15889300
> 
> 赞同：0
> 
> 时间：2013-04-08T21:26:42.187
> 
> 标签：html, css

我有一个背景的想法，但我不知道它是否可以完成，如果可以，最好的方法是什么。只是为了让您了解我的想法，它是一个正方形网格作为页面的背景，但是当您将鼠标悬停在一个正方形上时，它会改变颜色并慢慢向后移动（我知道如何制作动画部分）。网格应该跨越整个页面，宽度和高度，并且溢出将被隐藏。我也希望如果页面可以调整大小

所以我想知道这是否可以做到。如果可以，我将如何生成网格？

我完全不知所措。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:41:26.103

我会用`<canvas>`. 或者也许用相同大小的 DIV 填充整个身体，高度和宽度以百分比定义。可以说这将是 10x10 DIV 的网格。或者，您可以使用 jQuery 即时创建任意数量的 DIV（以填充整个高度）。您可以浮动这些 DIV 以填充整个视口，如果调整窗口大小，则使用媒体查询来排列它们。悬停时，您可以在每个 DIV 上应用一些动画。当然，您可以在这些 DIV 上放置其他元素。

# c# - 如何在我的应用程序处理过程中实时创建 avi 视频文件？

> ID：15889302
> 
> 赞同：1
> 
> 时间：2013-04-08T21:26:58.397
> 
> 标签：c#

编辑：

这就是我所做的： 在 Form1 中：

```
ScreenCapture sc;
AviFile af; 
```

在 Form1 构造函数中：

```
sc = new ScreenCapture();
af = new AviFile(); 
```

在 Form1 timer1 滴答事件中：

```
private void timer1_Tick(object sender, EventArgs e)
        {
            if (playImages == true)
            {
                timer1.Enabled = false;
                play();
                timer1.Enabled = true;
            }
            else
            {
                af.CreateAvi(this.sc);
            }
        } 
```

更改后的 AviFile 类：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Text;
using System.Windows.Forms;
using AviFile;
using ScreenShotDemo;

namespace ScreenVideoRecorder
{
    class AviFile
    {
        AviManager aviManager;

        Bitmap bmp;

        public AviFile()
        {
            aviManager = new AviManager(@"d:\testdata\new.avi", false);
        }

        public void CreateAvi(ScreenCapture sc)
        {
            bmp = new Bitmap(sc.CaptureScreen());
            VideoStream aviStream = aviManager.AddVideoStream(false, 25, bmp);//dlg.Rate, bmp);
            aviStream.AddFrame(bmp);
            bmp.Dispose();
        }

        public AviManager avim
        {
            get
            {
                return aviManager;
            }
            set
            {
                aviManager = value;
            }
        }
    }
} 
```

在Form1按钮单击事件停止：

```
private void button3_Click(object sender, EventArgs e)
        {
            timer1.Enabled = false;
            if (af != null)
            {
                af.avim.Close();
            }
        } 
```

但在我在截屏几秒钟后运行它后停止它之前：这是 button1，它启动计时器并截屏：

```
private void button1_Click(object sender, EventArgs e)
        {
            playImages = false;
            timer1.Enabled = true;
        } 
```

几秒钟后，我得到了一个例外：

```
Exception in AVIFileCreateStream: -2147205019

System.Exception was unhandled
  HResult=-2146233088
  Message=Exception in AVIFileCreateStream: -2147205019
  Source=AviFile
  StackTrace:
       at AviFile.VideoStream.CreateStreamWithoutFormat()
       at AviFile.VideoStream.CreateStream()
       at AviFile.VideoStream..ctor(Int32 aviFile, Boolean writeCompressed, Double frameRate, Bitmap firstFrame)
       at AviFile.AviManager.AddVideoStream(Boolean isCompressed, Double frameRate, Bitmap firstFrame)
       at ScreenVideoRecorder.AviFile.CreateAvi(ScreenCapture sc) in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\AviFile.cs:line 27
       at ScreenVideoRecorder.Form1.timer1_Tick(Object sender, EventArgs e) in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\Form1.cs:line 61
       at System.Windows.Forms.Timer.OnTick(EventArgs e)
       at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at ScreenVideoRecorder.Program.Main() in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\Program.cs:line 19
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

课程中的例外是：VideoStream 这不是我的课程，它来自我下载源文件的网站：http: [//www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile -图书馆](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:34:03.573

你的问题并不完全清楚你在问什么。

但似乎您只想将屏幕截图`AviFile`直接放入而不是将它们保存到磁盘然后加载它们。

关键代码是这样的：

```
bitmap = (Bitmap)Bitmap.FromFile(Form1.imagesFiles[n]);
aviStream.AddFrame(bitmap);
bitmap.Dispose(); 
```

您可以执行以下操作，而不是将它们从文件加载到内存中：

```
bitmap = new Bitmap(sc.CaptureScreen());
aviStream.AddFrame(bitmap);
bitmap.Dispose(); 
```

这样你就不会保存到磁盘，你只是直接插入到 AVI 流中。

# sql - 您如何显式显示 count(*) 等于 0 的行

> ID：15889305
> 
> 赞同：1
> 
> 时间：2013-04-08T21:27:23.867
> 
> 标签：sql, database, db2

我在 DB2 中运行的查询

```
select  yrb_customer.name, 
        yrb_customer.city, 
        CASE count(*) WHEN 0 THEN 0 ELSE count(*) END as #UniClubs 
from  yrb_member, yrb_customer 
where yrb_member.cid = yrb_customer.cid and yrb_member.club like '%Club%' 
group by yrb_customer.name, yrb_customer.city  order by count(*) 
```

向我显示属于包含“俱乐部”一词的俱乐部的人员，并显示他们所属的此类俱乐部的数量 ( `#UniClubs`) 以及他们的姓名和城市。但是对于不属于这样一个俱乐部的学生，我仍然希望他们出现，但只有 0 而不是他们被隐藏，这就是现在正在发生的事情。我无法使用`count(*)`. 有人可以解释一下吗？如果以上内容不够清楚，我可以进一步解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:30:22.670

我不熟悉 DB2，所以我在黑暗中尝试，但试试这个：

```
select  yrb_customer.name, 
        yrb_customer.city, 
        CASE WHEN yrb_member.club like '%Club% THEN count(*) ELSE 0 END as #UniClubs 
from  yrb_member, yrb_customer 
where yrb_member.cid = yrb_customer.cid
group by yrb_customer.name, yrb_customer.city  order by count(*) 
```

基本上，您不想在 WHERE 子句中过滤 %Club% ，因为您希望所有行都返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:30:42.620

你会想要一个`LEFT JOIN`：

```
SELECT yrb_customer.name, yrb_customer.city,
       COUNT(yrb_member.club) as clubCount
FROM yrb_customer
LEFT JOIN yrb_member
       ON yrb_member.cid = yrb_customer.cid
          AND yrb_member.club LIKE '%Club%
GROUP BY yrb_customer.name, yrb_customer.city
ORDER BY clubCount 
```

此外，如果元组 ( `yrb_customer.name`, `yrb_customer.city`) 是唯一的（或者应该是唯一的 - 您是否计算所有与同一个人同名的学生？），您可能会从以下方面获得更好的性能：

```
SELECT yrb_customer.name, yrb_customer.city,
       COALESCE(club.count, 0)
FROM yrb_customer
LEFT JOIN (SELECT cid, COUNT(*) as count
           FROM yrb_member
           WHERE club LIKE '%Club%
           GROUP BY cid) club
       ON club.cid = yrb_customer.cid
ORDER BY club.count 
```

* * *

隐藏原始结果的原因是因为在原始查询中，您有一个隐式内部联接，这当然需要匹配行。隐式连接语法（逗号分隔`FROM`子句）非常适合内部（常规）连接，但对于左连接来说很*糟糕*，这是您真正需要的。`WHERE`不推荐使用隐式连接语法（以及子句中某些类型的相关过滤）。

# vb.net - 嵌套类上的隐藏功能

> ID：15889309
> 
> 赞同：0
> 
> 时间：2013-04-08T21:27:30.990
> 
> 标签：vb.net, vb.net-2010

```
Public Class Class1

Private names As List(Of String)
Private _class2 As New Class2

Public Sub AddName(ByVal name As String)
    names.Add(name)
    _class2.Add()
End Sub

Public ReadOnly Property AddAge(ByVal name As String) As Class2
    Get
        _class2.index = names.IndexOf(name)
        Return _class2
    End Get
End Property

Public Sub Clear()
    names.Clear()
    _class2.Clear()
End Sub

Public Class Class2

    Private _age As List(Of Integer)
    Protected Friend index As Integer

    Public Property Age() As Integer
        Get
            Return _age(index)
        End Get
        Set(ByVal value As Integer)
            _age(index) = value
        End Set
    End Property

    Public Sub Add()
        _age.Add(0)
    End Sub

    Public Sub Clear()
        _age.Clear()
    End Sub

End Class
End Class 
```

如何在 class2 上隐藏、Sub Clear 和 Sub Add，以便它们仅在 class1 上可见，例如；

```
Public Sub Clear()
    names.Clear()
    _class2.Clear() '<<<<<<<
End Sub 
```

我希望它们在 Sub Main() 上不可见，就像它们在下面一样。

```
Sub Main()
    Dim person As New Class1

    person.AddAge("kid").Clear() '<<<<<<
    person.AddAge("kid").Add() '<<<<<<

End Sub 
```

如果我设置了受保护的，我的 class1 就无法访问它。如果我设置了受保护的朋友，Sub Main() 仍然可以访问它们。感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:40:47.000

二手 -Hans Passant- 评论。

“对 .NET 的信任遵循程序集边界。如果您在一个程序集中获得两个类，那么有两个程序员知道在出现问题时如何找到彼此。获得所需内容的唯一方法是将这些类放在单独的“

# google-apps-script - 如何在电子表格的 Google Apps 脚本中监控点击事件？

> ID：15889320
> 
> 赞同：8
> 
> 时间：2013-04-08T21:28:02.333
> 
> 标签：google-apps-script

我正在使用脚本管理 Google 电子表格。onEdit 正在工作 - 我可以通过将单元格着色为红色

```
SpreadsheetApp.getActiveRange().setBackgroundRGB(255, 0, 0); 
```

在 onEdit 函数中。我想将相同的代码放在 onClick 函数中，这样当用户单击单元格时，它会立即变为红色。这可能吗？我在文档中找不到任何方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T07:34:43.277

正如上面的评论所述，之前没有办法（现在）`onClick()`为谷歌电子表格创建一个函数。这是有道理的，因为 google app 脚本函数是在服务器中处理的，`onClick()`事件执行产生的负载量很容易耗尽默认提供的所有请求配额。

您应该使用文档来[创建按钮并单击它](https://developers.google.com/apps-script/guides/menus?hl=en#drawings)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-19T14:58:56.970

你可以更接近......使用一个选项为单元格创建验证......比如“完成”。单击下拉菜单，选择完成。现在创建一个触发器 onChange 或 onEdit 来触发。您可以获得单元格/范围上下文化功能....例如在行或列上触发。这很容易复制和编程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-07T10:58:37.070

我相信新的触发器 onSelectionChange(e) 会实现这一点。它在文档中，但在撰写本文时尚未在我的工作表上工作。[https://developers.google.com/apps-script/guides/triggers?hl=en](https://developers.google.com/apps-script/guides/triggers?hl=en)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-25T08:06:35.823

您可以将绘图添加为按钮 - [https://developers.google.com/apps-script/guides/menus#clickable_images_and_drawings_in_google_sheets](https://developers.google.com/apps-script/guides/menus#clickable_images_and_drawings_in_google_sheets)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T22:40:38.570

Try this for a click event:

function onSelectionChange(e) { e.source.toast('Sheet: ' + e.range.getSheet()(.getName() + ' Range: ' + e.range.getA1Notation());
}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-22T00:12:56.987

创建背景透明的“绘图”；然后将绘图移动并放置在您需要的单元格顶部，然后将脚本分配给绘图。

# mule - 配置多个全局 HTTP 连接器时，为什么 REST 组件不会收到应用程序内部的调用？

> ID：15889326
> 
> 赞同：0
> 
> 时间：2013-04-08T21:28:18.627
> 
> 标签：mule, mule-studio, cloudhub

我正在努力配置一个具有多个全局 HTTP 连接器和一个 REST 组件的应用程序并将其部署到 CloudHub。

我的应用程序有两个流：一个轮询新闻的 RSS 提要，并将该提要的 json 表示发布到同一应用程序中的 http 入站端点（端点驻留在第二个流上）。第二个流程接收该帖子，执行一些魔术，包括将项目持久化到存储，然后通过 http 出站端点通知外部 node.js Web 应用程序通过 Web 套接字将项目推送到活动客户端。

我已经尝试了几十种不同的配置，涉及各种 HTTP 全局连接器和 http 入站和出站端点，但我无法让一切正常工作。我目前有：

1.  轮询 HTTP 连接器
    *   引用上述轮询 http 连接器以获取 RSS 源的 HTTP 端点
2.  一个全局连接器（我们将调用 HTTP_ONE）接收消息`localhost:${http.port}`
    *   配置为引用 HTTP_ONE 并配置为将活动发布到 /api/v1/activity 的 http 出站端点
    *   一个配置为接收消息的 http 入站端点`/api/v1`和一个位于该端点后面的 Jersey 控制器，它采用`/activity`.
3.  另一个全局连接器 (HTTP_TWO) 将外部主机设置为代理主机名（例如 somehost.somewhere.com）。
    *   配置为将消息发布到 somehost.somewhere.com 的 http 出站端点

在我的本地主机上，我不得不使用各种属性来允许在我的笔记本电脑的多个端口上进行所有这些活动。

在 CloudHub 上，我在任何地方都使用 localhost 和 ${http.port}，但在调用外部 Web 服务的出站端点中除外。

我可以让一个流程或另一个工作，但不能同时工作......我的问题似乎是将给定的新闻项目从 RSS 提要发布到入站 HTTP 端点。它将帖子发送到`http://localhost:80/api/v1/activity`，但连接器说不存在这样的路径（它只列出 /api/v1 作为选项），这让我认为呼叫没有到达位于 Global 后面的 Jersey Controller连接器和`/api/v1/activity`. 这种行为是使用 REST 组件和多个全局 http 连接器的固有缺陷吗？另外，为什么我们在进行出站呼叫时必须引用全局 HTTP 连接器？为什么我们不能使用默认的 HTTP 连接器？（也许最后两个问题应该在后续的帖子中......）

**以下是这两个流程的大部分相关配置：**

**全球连接器**

```
<http:polling-connector name="PollingHttpConnector" pollingFrequency="60000" doc:name="HTTP Polling" clientSoTimeout="10000" cookieSpec="netscape" receiveBacklog="0" receiveBufferSize="0" sendBufferSize="0" serverSoTimeout="10000" socketSoLinger="0" validateConnections="true"/>
<http:connector name="EduStream_HTTP" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="${edustream.host}"  doc:name="HTTP\HTTPS" proxyPort="80"/>
<http:connector name="EduStreamESB_HTTP" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="localhost" proxyPort="${http.port}" doc:name="HTTP\HTTPS"/> 
```

**新闻 RSS 源流**

```
<flow name="ucdNewsConsumer" doc:name="ucdNewsConsumer">
    <http:inbound-endpoint address="http://news.ucdavis.edu/xml/getnews.php/rss/category/General%20Interest" 
        connector-ref="PollingHttpConnector" doc:name="HTTP" exchange-pattern="one-way"/>
    <rss:feed-splitter/>
    <rss:entry-last-updated-filter/>  
    <component class="edu.ucdavis.edustream.esb.news.rss.EntryReceiver" doc:name="Java"/>
    <logger message="#[payload]" level="INFO" doc:name="Logger"/>
    <http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="${http.port}" path="api/v1/activity"    doc:name="HTTP"  mimeType="application/json" connector-ref="EduStreamESB_HTTP" />
    <logger message="Payload is: #[payload] Inbound Headers:  #[headers:INBOUND:*] Outbound Headers:  #[headers:OUTBOUND:*] Exception is:  #[exception]" level="INFO" doc:name="Logger"/>
</flow> 
```

**活动发布服务——核心流程**

```
<flow name="edustreamesbFlow1" doc:name="edustreamesbFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="${http.port}" doc:name="HTTP" contentType="application/json" mimeType="application/json" path="api/v1" connector-ref="EduStreamESB_HTTP"/>
    <jersey:resources doc:name="REST">
        <component class="edu.ucdavis.edustream.esb.activity.restapi.ActivityController"/>
    </jersey:resources>
    <component class="edu.ucdavis.edustream.esb.activity.restapi.JerseyResponseTransformer" doc:name="JerseyRespTrans"/>

    <flow-ref name="PublishActivity" doc:name="Publish Activity"/>         
</flow>
<sub-flow name="PublishActivity" doc:name="PublishActivity">
    <component doc:name="ActivityService">
        <spring-object bean="activityService"/>
    </component>
    <logger message="#[payload] #[message]" level="INFO" doc:name="Logger"/>
    <http:outbound-endpoint exchange-pattern="request-response" host="${edustream.host}" port="80" path="api/v1/activity" mimeType="application/json" contentType="application/json" doc:name="HTTP" connector-ref="EduStream_HTTP"/>
</sub-flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:41:35.780

我不明白为什么`proxyHostname`并且在连接器和连接器`proxyPort`上都进行了配置，而来自这些连接器的 HTTP 端点的目标地址与它们的目标地址相同。这对我来说没有任何意义。`EduStream_HTTP``EduStreamESB_HTTP`

你**真的确定**你需要使用代理吗？

答案显然是否定的：您`EduStreamESB_HTTP`从 CloudHub 调用 CloudHub，因此不需要代理。

因为`EduStreamESB_HTTP`，也许……但这似乎仍然很奇怪。

# ios - iOS 中的宏录制

> ID：15889329
> 
> 赞同：3
> 
> 时间：2013-04-08T21:28:19.673
> 
> 标签：ios, cocoa-touch, macros, playback

是否可以在 iPhone 上记录一组触摸事件然后播放？我搜索了很多，但找不到任何答案。如果可能的话，任何人都可以用一个例子来解释。我不是在寻找测试目的。在我的应用程序中，我不想创建动画，而只想记录一组事件，然后想要回放以向用户解释应用程序流程。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:40:45.913

录音很简单。查看[UIResponder上的各种“](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/cl/UIResponder)**响应触摸事件**”和“**响应运动事件**”方法。只需创建您自己的 UIView 子类（因为继承自）并保留传递给相关方法的事件的副本。`UIView``UIResponder`

播放有点复杂；没有办法制作`UITouch`或`UIEvent`对象（因此您不能制作假事件并将其传递给`-[UIApplication sendEvent:]`）。但是，没有什么能阻止您手动解析 Event 对象数组并自行处理它（除了它是某种丑陋的代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:49:04.917

没有内置的宏功能，但您当然可以将该功能构建到您的应用程序中。不过，您需要做的不仅仅是回放事件。触摸通常不可见，但如果您试图向用户解释如何使用您的应用程序，您可能希望对触发不同响应的触摸有某种视觉表示，类似于 iOS 模拟器使用的方式当您按住选项键时，白点表示多次触摸。

假设您可以解决该问题，您会想到两种轻松记录用户操作的策略：

*   **使用撤消管理器：** NSUndoManager 已经设置为“记录”可撤消的事件。如果您花一些时间使应用程序中的所有内容都可撤消，您可以（也许）执行一组操作，将它们全部撤消以将它们移至重做堆栈，然后将重做堆栈中的事件作为脚本保存。

*   **使用可访问性：**只要触摸用户界面元素，可访问性框架就会发送通知。您的应用可以使用这些通知来创建播放脚本。不过，您仍然需要编写代码来回放脚本中的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:48:10.553

您可以使用 AirServer 镜像您的应用程序并使用任何屏幕捕获软件来制作视频。

# java - Java Server：向浏览器发送 HTML 代码的套接字

> ID：15889331
> 
> 赞同：3
> 
> 时间：2013-04-08T21:28:24.837
> 
> 标签：java, html, sockets, browser

我正在尝试编写一个简单的 Java 程序，使用`ServerSockets`它将向浏览器发送一些 HTML 代码。这是我的代码：

```
ServerSocket serverSocket = null;
try {
    serverSocket = new ServerSocket(55555); 
} catch (IOException e) {
    System.err.println("Could not listen on port: 55555.");
    System.exit(1);
}

Socket clientSocket = null; 
try {
    clientSocket = serverSocket.accept();

    if(clientSocket != null) {           
        System.out.println("Connected");
    }
} catch (IOException e) {
    System.err.println("Accept failed.");
    System.exit(1);
}

PrintWriter out = new PrintWriter(clientSocket.getOutputStream());

out.println("HTTP/1.1 200 OK");
out.println("Content-Type: text/html");
out.println("\r\n");
out.println("<p> Hello world </p>");
out.flush();

out.close();

clientSocket.close();
serverSocket.close(); 
```

然后我进入`localhost:55555`我的浏览器并没有显示任何内容。我知道连接正在工作，因为程序在 if 语句中检查了“已连接”。我也尝试过从 inputStream 输出数据并且有效。但是我试图在浏览器中输出的文本根本没有显示，程序完成运行，我得到一个

> “问题加载页面 - 连接已重置”

在我的浏览器中，但没有文字。

我已经在互联网上搜索过，似乎其他人都以这种方式编码，他们的文本显示很好，他们还有其他问题。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:54:08.237

我在 Chrome、Firefox、IE 和 Opera 中测试了您的代码，并且可以正常工作。

但是，我建议您使用多线程并从本质上生成一个新线程来处理每个新请求。

您可以创建一个实现 runnable 并在构造函数中采用 clientSocket 的类。这实质上将使您的自定义网络服务器能够同时接受多个请求。

如果要处理多个请求，还需要一个 while 循环。

一个很好的阅读证明上述内容：[https ://web.archive.org/web/20130525092305/http://www.prasannatech.net/2008/10/simple-http-server-java.html](https://web.archive.org/web/20130525092305/http://www.prasannatech.net/2008/10/simple-http-server-java.html)

如果网络存档不起作用，我将在下面发布代码（取自上面）：

```
/*
* myHTTPServer.java
* Author: S.Prasanna
* @version 1.00
*/

import java.io.*;
import java.net.*;
import java.util.*;

public class myHTTPServer extends Thread {

static final String HTML_START =
"<html>" +
"<title>HTTP Server in java</title>" +
"<body>";

static final String HTML_END =
"</body>" +
"</html>";

Socket connectedClient = null;
BufferedReader inFromClient = null;
DataOutputStream outToClient = null;

public myHTTPServer(Socket client) {
connectedClient = client;
}

public void run() {

try {

System.out.println( "The Client "+
  connectedClient.getInetAddress() + ":" + connectedClient.getPort() + " is connected");

  inFromClient = new BufferedReader(new InputStreamReader (connectedClient.getInputStream()));
  outToClient = new DataOutputStream(connectedClient.getOutputStream());

String requestString = inFromClient.readLine();
  String headerLine = requestString;

  StringTokenizer tokenizer = new StringTokenizer(headerLine);
String httpMethod = tokenizer.nextToken();
String httpQueryString = tokenizer.nextToken();

StringBuffer responseBuffer = new StringBuffer();
responseBuffer.append("<b> This is the HTTP Server Home Page.... </b><BR>");
  responseBuffer.append("The HTTP Client request is ....<BR>");

  System.out.println("The HTTP request string is ....");
  while (inFromClient.ready())
  {
    // Read the HTTP complete HTTP Query
    responseBuffer.append(requestString + "<BR>");
System.out.println(requestString);
requestString = inFromClient.readLine();
}

if (httpMethod.equals("GET")) {
if (httpQueryString.equals("/")) {
 // The default home page
sendResponse(200, responseBuffer.toString(), false);
} else {
//This is interpreted as a file name
String fileName = httpQueryString.replaceFirst("/", "");
fileName = URLDecoder.decode(fileName);
if (new File(fileName).isFile()){
sendResponse(200, fileName, true);
}
else {
sendResponse(404, "<b>The Requested resource not found ...." +
"Usage: http://127.0.0.1:5000 or http://127.0.0.1:5000/</b>", false);
}
}
}
else sendResponse(404, "<b>The Requested resource not found ...." +
"Usage: http://127.0.0.1:5000 or http://127.0.0.1:5000/</b>", false);
} catch (Exception e) {
e.printStackTrace();
}
}

public void sendResponse (int statusCode, String responseString, boolean isFile) throws Exception {

String statusLine = null;
String serverdetails = "Server: Java HTTPServer";
String contentLengthLine = null;
String fileName = null;
String contentTypeLine = "Content-Type: text/html" + "\r\n";
FileInputStream fin = null;

if (statusCode == 200)
statusLine = "HTTP/1.1 200 OK" + "\r\n";
else
statusLine = "HTTP/1.1 404 Not Found" + "\r\n";

if (isFile) {
fileName = responseString;
fin = new FileInputStream(fileName);
contentLengthLine = "Content-Length: " + Integer.toString(fin.available()) + "\r\n";
if (!fileName.endsWith(".htm") && !fileName.endsWith(".html"))
contentTypeLine = "Content-Type: \r\n";
}
else {
responseString = myHTTPServer.HTML_START + responseString + myHTTPServer.HTML_END;
contentLengthLine = "Content-Length: " + responseString.length() + "\r\n";
}

outToClient.writeBytes(statusLine);
outToClient.writeBytes(serverdetails);
outToClient.writeBytes(contentTypeLine);
outToClient.writeBytes(contentLengthLine);
outToClient.writeBytes("Connection: close\r\n");
outToClient.writeBytes("\r\n");

if (isFile) sendFile(fin, outToClient);
else outToClient.writeBytes(responseString);

outToClient.close();
}

public void sendFile (FileInputStream fin, DataOutputStream out) throws Exception {
byte[] buffer = new byte[1024] ;
int bytesRead;

while ((bytesRead = fin.read(buffer)) != -1 ) {
out.write(buffer, 0, bytesRead);
}
fin.close();
}

public static void main (String args[]) throws Exception {

ServerSocket Server = new ServerSocket (5000, 10, InetAddress.getByName("127.0.0.1"));
System.out.println ("TCPServer Waiting for client on port 5000");

while(true) {
Socket connected = Server.accept();
    (new myHTTPServer(connected)).start();
}
}
} 
```

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:32:17.257

1.  HTTP 中的行终止符是`\r\n.`这意味着你不应该使用`println()`，你应该使用`print()`并在每一行添加一个显式的`\r\n`自己。

2.  HTTP GET 的结果应该是一个 HTML 文档，而不是一个片段。浏览器有权忽略或抱怨。发送这个：

    ```
    <html>
    <head/>
    <body>
    <p> Hello world </p>
    </body>
    </html> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-16T08:35:15.860

在我的电脑中，至少要获取套接字的输入流：

```
clientSocket.getInputStream(); 
```

没有这条线，有时 chrome 不起作用

~~您需要先从套接字读取输入~~

 ~~```
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
String line = "";
while((line = bufferedReader.readLine()) != null){
    System.out.println(line);
    if(line.isEmpty())
        break;
} 
```~~  ~~* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-06T11:12:33.243

您应该接受客户端（在这种情况下为浏览器）发送的请求，只需添加以下行：

```
Buffered reader in = new Buffered reader(new InputStreamReader(client_socket.getInputStream())); 
```

注意：您需要将“client_socket”部分替换为您自己的客户端套接字名称。

为什么我们需要接受浏览器请求？这是因为如果我们不接受请求，浏览器不会从服务器获得任何已收到发送的请求的确认，因此它认为服务器不再可访问。

我的代码：

```
public class Help {
    public static void main(String args) throws IOException{
        ServerSocket servsock new serverSocket(80)
        Socket cs servsock, accept();
        Printwriter out new Printwriter(Cs.getoutputstream), true)
        BufferedReader in new BufferedReader(new InputStreamReader(cs.getInputStream());
        out.println("<html> <body> <p>My first StackOverflow answer </p> </body> </html>");
        out.close();
        servsock.close();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-15T23:23:31.863

您需要在打印时将 PrintWriter 设置为自动刷新。

`PrintWriter out = new PrintWriter(clientSocket.getOutputStream());`

应该

`PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);`~~

# ios - AVAssetExportSession 忽略 videoComposition 旋转和剥离元数据

> ID：15889333
> 
> 赞同：12
> 
> 时间：2013-04-08T21:28:34.217
> 
> 标签：ios, video, orientation, avassetwriter, avassetexportsession

我试图在上传到我的 iOS 设备之前旋转视频，因为其他平台（例如 android）无法正确解释 iOS 录制视频中的旋转信息，因此播放它们时旋转不正确。

我查看了以下堆栈帖子，但没有成功将其中任何一个应用于我的案例：

*   [iOS旋转每一帧视频](https://stackoverflow.com/questions/13102646/ios-rotate-every-frame-of-video)

*   [使用 AVMutableVideoCompositionLayerInstruction 旋转视频](https://stackoverflow.com/questions/5187789/rotating-video-w-avmutablevideocompositionlayerinstruction)

*   [AVMutableVideoComposition 以纵向模式捕获的旋转视频](https://stackoverflow.com/questions/12136841/avmutablevideocomposition-rotated-video-captured-in-portrait-mode)

*   [iOS AVFoundation：设置视频方向](https://stackoverflow.com/questions/13465746/ios-avfoundation-setting-orientation-of-video)

* * *

我处理了[Apple AVSimpleEditor](http://developer.apple.com/library/ios/#samplecode/AVSimpleEditoriOS/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012797-Intro-DontLinkElementID_2)项目示例，但不幸的是，在创建 AVAssetExportSession 并调用 exportAsynchronouslyWithCompletionHandler 时，没有执行任何旋转，更糟糕的是，旋转元数据被从结果文件中删除。

这是运行导出的代码：

```
AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:[_mutableComposition copy] presetName:AVAssetExportPresetPassthrough];
exportSession.outputURL = outputURL;
exportSession.outputFileType = AVFileType3GPP;
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.videoComposition = _mutableVideoComposition;

[exportSession exportAsynchronouslyWithCompletionHandler:^(void)
 {
     NSLog(@"Status is %d %@", exportSession.status, exportSession.error);

     handler(exportSession);
     [exportSession release];
 }]; 
```

_mutableComposition 和 _mutableVideoComposition 值在此处由此方法初始化：

```
- (void) getVideoComposition:(AVAsset*)asset
{

    AVMutableComposition *mutableComposition = nil;
    AVMutableVideoComposition *mutableVideoComposition = nil;

    AVMutableVideoCompositionInstruction *instruction = nil;
    AVMutableVideoCompositionLayerInstruction *layerInstruction = nil;
    CGAffineTransform t1;
    CGAffineTransform t2;

    AVAssetTrack *assetVideoTrack = nil;
    AVAssetTrack *assetAudioTrack = nil;
    // Check if the asset contains video and audio tracks
    if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) {
        assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo][0];
    }
    if ([[asset tracksWithMediaType:AVMediaTypeAudio] count] != 0) {
        assetAudioTrack = [asset tracksWithMediaType:AVMediaTypeAudio][0];
    }

    CMTime insertionPoint = kCMTimeZero;
    NSError *error = nil;

    // Step 1
    // Create a composition with the given asset and insert audio and video tracks into it from the asset
    // Check whether a composition has already been created, i.e, some other tool has already been applied
    // Create a new composition
    mutableComposition = [AVMutableComposition composition];

    // Insert the video and audio tracks from AVAsset
    if (assetVideoTrack != nil) {
        AVMutableCompositionTrack *compositionVideoTrack = [mutableComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetVideoTrack atTime:insertionPoint error:&error];
    }
    if (assetAudioTrack != nil) {
        AVMutableCompositionTrack *compositionAudioTrack = [mutableComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetAudioTrack atTime:insertionPoint error:&error];
    }

    // Step 2
    // Translate the composition to compensate the movement caused by rotation (since rotation would cause it to move out of frame)
    t1 = CGAffineTransformMakeTranslation(assetVideoTrack.naturalSize.height, 0.0);
    // Rotate transformation
    t2 = CGAffineTransformRotate(t1, degreesToRadians(90.0));

    // Step 3
    // Set the appropriate render sizes and rotational transforms
    // Create a new video composition
    mutableVideoComposition = [AVMutableVideoComposition videoComposition];
    mutableVideoComposition.renderSize = CGSizeMake(assetVideoTrack.naturalSize.height,assetVideoTrack.naturalSize.width);
    mutableVideoComposition.frameDuration = CMTimeMake(1, 30);

    // The rotate transform is set on a layer instruction
    instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mutableComposition duration]);
    layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:(mutableComposition.tracks)[0]];
    [layerInstruction setTransform:t2 atTime:kCMTimeZero];

    // Step 4
    // Add the transform instructions to the video composition
    instruction.layerInstructions = @[layerInstruction];
    mutableVideoComposition.instructions = @[instruction];

    TT_RELEASE_SAFELY(_mutableComposition);
    _mutableComposition = [mutableComposition retain];
    TT_RELEASE_SAFELY(_mutableVideoComposition);
    _mutableVideoComposition = [mutableVideoComposition retain];
} 
```

[我从这里](http://developer.apple.com/library/ios/#samplecode/AVSimpleEditoriOS/Listings/AVSimpleEditor_AVSERotateCommand_m.html#//apple_ref/doc/uid/DTS40012797-AVSimpleEditor_AVSERotateCommand_m-DontLinkElementID_16)从 AVSERotateCommand 中提取了这个方法。谁能建议为什么这种方法不能成功地将我的视频旋转必要的 90 度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T20:49:46.963

因为您使用`AVAssetExportPresetPassthrough`的是 ，所以`AVAssetExportSession`会忽略`videoComposition`，使用任何其他预设。

# python - 需要解释使用 '%' 和 '/' 到 Tkinter 的网格按钮

> ID：15889335
> 
> 赞同：0
> 
> 时间：2013-04-08T21:28:41.183
> 
> 标签：python, user-interface, grid, tkinter, modulo

下面的代码用于我使用 Tkinter 制作的一个简单的计算器，以实现一个简单的 gui。我是 Python 新手，它基本上是我的第一门编程语言。这是我第一次尝试创建 gui。计算器工作正常，差不多。到目前为止，这些按钮完成了他们应该做的事情。我的问题是：在下面的代码中，我设置了 row = index%3 和 column = index/3。这将我的按钮放置在一个不错的 3 x 3 块中。但是，我在没有完全理解的情况下使用了这个片段。我在网上找到的。我发现我可以修改它以获得理想的结果，但我并不完全清楚为什么它会以这种方式工作。我想这基本上是一个数学问题。不过，任何澄清将不胜感激。对不起，如果它的结构奇怪，我不习惯这个论坛格式化业务。

```
self.operators = ['+', '-', '*', '/','%','^','C','M','M+']     
for index in range(9):
  Button(self.opFrame, relief=GROOVE, bg="light yellow", 
    text=self.operators[index], width=3, height=1,
    command=lambda arg=self.operators[index],
    arg2=self.num_dict,
    arg3=self.num_list,
    arg4=self.count : self.buttonClick(arg,arg2,arg3,arg4)).grid(padx=2,pady=2,row=index%3,column=index/3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:44:28.100

该`%`运算符产生索引除以三的余数，因此在九次迭代中，它将按此顺序产生*0、1、2、0、1、2、0、1、2*。换句话说，它在每次迭代中“循环”值 0、1 和 2。

使用`/`，您可以计算指数除以三：*0, 0, 0, 1, 1, 1, 2, 2, 2*。这样，您每三次迭代就移动到下一列。

如果您更改运算符的顺序并按如下方式排列，则更容易看到它`self.operator`：

```
self.operators = ['+', '/', 'C',
                  '-', '%', 'M',
                  '*', '^', 'M+']

for index in range(9):
    Button(...).grid(padx=2,pady=2,row=index/3,column=index%3) 
```

# c++ - std::find 未按预期运行

> ID：15889336
> 
> 赞同：0
> 
> 时间：2013-04-08T21:28:46.970
> 
> 标签：c++, find

std::find 没有按我的预期进行评估。

我有一个向量 lexeme_ 定义为

```
static const std::string delimiters_[] = {" ", ",", "(", ")", ";", "=", ".", "*", "-"};

static std::vector<std::string> lexeme_(std::begin(delimiters_), std::end(delimiters_)); 
```

我有一个使用`std::find`定义为的评估

```
while ( std::find(lexeme_.begin(),lexeme_.end(),std::string(&commandLine_.at(position_))) == lexeme_.end())             
{
    // Concat each successive alphanumeric character to 'token'
    token += commandLine_.at(position_);
    // Update the index into 'commandLine'
    position_ += 1;
} 
```

评估应该将`char`lexeme_ 中的 a`char`与类似于此 Java 表达式的命令行中的 a 进行比较

```
!lexeme.contains(Character.toString(commandLine.charAt(position))) 
```

评估应该比较`char`s 并且如果它确定`char`在`delimiters`比较中满足 a in ，则 while 循环将退出。

测试用例

```
#include<algorithm>
#include<iostream>    

static const std::string delimiters_[] = {" ", ",", "(", ")", ";", "=", ".", "*", "-"};

static std::vector<std::string> lexeme_(std::begin(delimiters_), std::end(delimiters_));

std::string commandLine = "check me";

while (std::find(lexeme_.begin(),lexeme_.end(),std::string(&commandLine_.at(position_))) == lexeme_.end())             
{
    std::cout "I should stop printing when encountering a space ' ' << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:33:49.973

您的临时比较字符串的构造函数不正确。它不是构建单个字符串，而是构建一个从该字符开始并到原始字符串末尾的字符串，如果幸运的话 - 可能有一些`std::string`实现不会自动零终止内部缓冲区。

所以代替这个：

```
std::string(&commandLine_.at(position_)) 
```

采用：

```
std::string(1, commandLine_.at(position_)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:33:42.307

这个表达式：

```
 std::string(&commandLine_.at(position_)) 
```

`std::string`通过传递指向对象的指针来创建对象`char`。但是，指向`char`对象的指针是（以空结尾的）C 字符串，而不是指向单个字符的指针。

没有构造函数`std::string`接受单个字符。您可以将向量设为`char`s 的向量，然后`commandLine_.at(position_)`在该向量内进行搜索。

但是，从您的测试用例来看，在我看来，您想要的只是[`find_first_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of)成员函数`std::string`：

```
#include <algorithm>
#include <iostream>

int main()
{
    std::string commandLine = "Check me";
    std::string delimiters = " ,();=.*-";
    auto pos = commandLine.find_first_of(delimiters);
    std::cout << pos;
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy%243877)。

# javascript - 如何更改 javascript 中的全局变量？

> ID：15889340
> 
> 赞同：1
> 
> 时间：2013-04-08T21:28:57.217
> 
> 标签：javascript, global, var

我的 html 页面显示了一个按钮，该按钮在单击时调用一个函数。我通过在单击时显示一条消息来检查该按钮是否正常工作，并且它工作正常。我创建了这个函数来更改全局变量，但是当我单击 html 页面上的另一个按钮以显示变量的值时，变量没有更改为我使用函数设置的值。有人可以在下面的代码中找到问题吗？

```
 var a = 5;
    var b = 16;
    var c = 27;

    function reset(){
    a = 0;
    b = 0;
    c = 0;
    } 
```

我调用该函数的html代码：

```
 <!DOCTYPE HTML>

   <html>
   <center>
   <script type="text/javascript" src="game.js" > </script>
   <form>
   <input type="button" value="Reset Variables" style="width:250px;height:50px" onclick="reset()" >
   </form>
   </html> 
```

显示变量的 Javascript 代码：

```
 function display(){

    document.write("A is equal to " + a + "<br/>");
    document.write("B is equal to " + b + "<br/>");
    document.write("C is equal to " + c );

} 
```

Html 显示变量

```
 <!DOCTYPE HTML>

   <html>
   <center>
   <script type="text/javascript" src="game.js" > </script>
   <form>
   <input type="button" value="Show Variables" style="width:250px;height:50px" onclick="display()" >
   </form>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:41:06.993

那行不通，因为您在函数范围内断言该变量。但是您的变量当前存储在全局范围（窗口）中，因此此代码将起作用：

```
var a = 5;
function reset() {
    console.log(window.a); // 5
    window.a = 10;
}
reset();
console.log(a); // 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:18:33.417

将函数名称更改为 reset_vars 或其他任何内容。reset() 是用于重置表单的内置 DOM 函数。

[http://www.w3schools.com/jsref/met_form_reset.asp](http://www.w3schools.com/jsref/met_form_reset.asp)

除非定义了局部变量，否则在函数内部使用全局变量时不会发生任何冲突。在这种情况下，使用 window.variable_name 来访问全局变量。

# android - ListView android：我看不到我的列表项

> ID：15889343
> 
> 赞同：0
> 
> 时间：2013-04-08T21:29:08.880
> 
> 标签：android, listview

我正在尝试在我的 android 应用程序中显示 ListView。（我知道我没有扩展 ListActivity，可能是错误？）我的代码：

```
public class Home extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        startLocation();
        createMenuTabs();

        final String[] datos = new String[]{"Lista 1","Lista 2","Lista 3","Lista 4","Lista 5"}; 
        ArrayAdapter<String> adaptador = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, datos);
        ListView urban_lines_list = (ListView)findViewById(R.id.urban_lines_list);
        urban_lines_list.setAdapter(adaptador);
    }
} 
```

XML 是：

```
 <LinearLayout android:id="@+id/Urbano"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="match_parent" >
      <TextView android:id="@+id/urban_lines"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:text="@string/list_of_lines"/>
      <ListView android:id="@+id/urban_lines_list"
          android:layout_width="match_parent"
          android:layout_height="match_parent"/>
 </LinearLayout> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:32:18.733

您的 TextView 正在填满整个屏幕，只需将其高度更改为`wrap_content`.

```
<TextView android:id="@+id/urban_lines"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/list_of_lines"/> 
```

# php - CodeIgniter 会话中的 user_data 是用来做什么的？

> ID：15889344
> 
> 赞同：3
> 
> 时间：2013-04-08T21:29:09.840
> 
> 标签：php, codeigniter, session, session-variables

当我在 CodeIgniter 中运行`var_dump($this->session->all_userdata());`时，它会打印

```
array (size=5)
  'session_id' => string '3403084ad9f5e2582a8d9269ceb68fb7' (length=32)
  'ip_address' => string '127.0.0.1' (length=9)
  'user_agent' => string 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/6.0)' (length=64)
  'last_activity' => int 1365456079
  'user_data' => string '' (length=0) 
```

由于这些是由 CI 自动填充的值，我想知道我是否可以/应该覆盖 user_data 索引，例如 'user_data' => $username。

如果 CI 不断更新这个索引，这将不起作用。比我必须用我自己的索引来存储我的会话数据。任何有 CI 经验的人都知道会话数组中的这个固定索引的用途。没有它的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:31:03.160

该`user_data`字段用于所有额外的会话参数

一旦你想放置一个你用来做的会话值：

```
$this->session->set_userdata('x','y'); 
```

然后将值`userdata('x')`存储在`user_data`会话的数组键中`y`

所以你`user_data`现在在会话中的键看起来像（或类似的东西：D）：

```
'user_data' => ['x'=>'y'] 
```

所以绝对，是的，你将覆盖 user_data 的值，只需设置一些你需要/想要的会话值

文档中有关 user_data 字段的更多信息似乎是 CI 用于存储会话参数的 db 字段：http: [//ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

`user_data`在 system7libraries/session.php 中，仅针对这些行没有大的痕迹：

```
// Run the update query
        $this->CI->db->where('session_id', $this->userdata['session_id']);
        $this->CI->db->update($this->sess_table_name, array('last_activity' => $this->userdata['last_activity'], 'user_data' => $custom_userdata)); 
```

这似乎正在更新一个名为`user_data`which (似乎) 与会话数据库相关的数据库字段

# python - 用 Python 相交矩形

> ID：15889345
> 
> 赞同：2
> 
> 时间：2013-04-08T21:29:10.597
> 
> 标签：python, math, logic, conditional, intersection

给定两个矩形 r1 和 r2，我尝试测试两者是否相交。为什么以下两个函数不产生相同的输出？

功能一：

```
def separate_helper(r1, r2):
  r1_left, r1_top, r1_right, r1_bottom = r1
  r2_left, r2_top, r2_right, r2_bottom = r2

  if r1_right < r2_left:
    separate = True
  elif    r1_left > r2_right:
    separate = True
  elif r1_top > r2_bottom:
    separate = True
  elif r1_bottom < r2_top:
    separate = True
  elif contains(r1, r2):
    separate = False
  else:
    separate = False
  return separate 
```

功能二：

```
def separate_helper2(r1, r2):
  r1_left, r1_top, r1_right, r1_bottom = r1
  r2_left, r2_top, r2_right, r2_bottom = r2

  separate = r1_right < r2_left or \
    r1_left > r2_right or \
    r1_top > r2_bottom or \
    r1_bottom < r2_top or \
    not contains(r1, r2)
  return separate 
```

检查矩形 1 是否包含矩形 2 的函数：

```
def contains(r1, r2):
  r1_left, r1_top, r1_right, r1_bottom = r1
  r2_left, r2_top, r2_right, r2_bottom = r2
  return r1_right >= r2_right and  r1_left <= r2_left and  r1_top <= r2_top and  r1_bottom >= r2_bottom 
```

**这是一个失败**的测试用例：

> 断言分离助手（[29, 35, 53, 90], [23, 47, 90, 86]）== 分离助手2（[29, 35, 53, 90], [23, 47, 90, 86]）

只有当矩形 1 包含矩形 2 时它才会失败，但我无法理解为什么。

**编辑：**

我正在使用 Python 和鼻子的快速检查来测试该功能。这是我正在使用的测试代码：

```
from qc import forall, lists, integers
from intersect import separate_helper, separate_helper2

@forall(tries=100, r1=lists(items=integers(), size=(4, 4)), r2=lists(items=integers(), size=(4, 4)))
def test_separate(r1, r2):
  assert separate_helper(r1, r2) == separate_helper2(r1, r2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:41:11.410

看看你的第一个版本：

```
elif contains(r1, r2):
  separate = False
else:
  separate = False 
```

假设您通过了所有正确的交集案例，这将返回`False`是否`r1`包含`r2`。

但是在您的第二个版本中：

```
... or \
not contains(r1, r2) 
```

这将返回`False`is`r1`不包含`r2`，`True`否则。

因此，在“矩形 1 包含矩形 2”的情况下，他们正在做不同的事情。

作为一个附带问题：为什么 contains 应该返回与contains不同的`r1`结果？`r2``r2``r1`

# javascript - 有没有办法在我启动 IE 时自动打开控制台？

> ID：15889346
> 
> 赞同：0
> 
> 时间：2013-04-08T21:29:11.417
> 
> 标签：javascript, internet-explorer

Internet Explorer 总是显示 F12 调试以避免在 javascript 中未定义控制台？有命令行 arg 吗？这听起来很现实。

由于其他原因，我也喜欢在调试时始终打开控制台。

# sql-server - 插入 JSON 数据时数据被截断

> ID：15889347
> 
> 赞同：2
> 
> 时间：2013-04-08T21:29:16.910
> 
> 标签：sql-server, json, coldfusion

我有一个将“文本”作为数据类型的 SQL 表。我正在尝试使用带有 cf_sql_longvarchar 的 CfQueryparam 插入 JSON 数据，我在 ColdFusion 变量中有。

但是，当我检查列中的值时，我丢失了数据。我将 SQL 表中列的总长度与保存的数据进行了比较。我在该列中留下了足够的数据长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T04:59:03.987

这可能与 CF 管理员下的数据源中的设置有关。

我会弄乱 CLOB 和你的 char 缓冲区值，看看你能想出什么。

![在此处输入图像描述](https://i.stack.imgur.com/crB4L.jpg)

# java - 我可以在我的 Java 类中减少这种重复出现的模式吗？

> ID：15889353
> 
> 赞同：0
> 
> 时间：2013-04-08T21:30:01.270
> 
> 标签：java, design-patterns, interface, refactoring

我有以下界面：

```
public interface Gravy {

     public List<Giblet> getGiblets();
     public Giblet getGiblet(String id);
     public int getNumGiblets();
     public void addGiblet();
     public void removeGiblet(Giblet giblet);

     public List<Carrot> getCarrots();
     public Carrot getCarrot(String id);
     public int getNumCarrots();
     public void addCarrot();
     public void removeCarrot(Carrot carrot);

     public List<Gravy> getGravies();
     public Gravy getGravy(String id);
     public int getNumGravies();
     public void addGravy();
     public void removeGravy(Gravy gravy);

} 
```

如您所见，我的`Gravy`. 一个`Gravy`对象可以包含内脏、胡萝卜和其他（较小的）肉汁。所有这些都可以添加、删除或查询。

有两点需要注意：

1.  `Carrot`s 和`Giblet`s 有一些共同点，但都与`Gravy`s 有很大不同。

2.  稍后我可能需要添加更多项目（因此需要重构）......

是否可以减少上面的代码，使“动词”只写一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T21:37:16.753

这取决于您认为该组功能的相似程度。例如，如果一组功能可以被视为本身的东西，例如一组成分，那么您可以执行以下操作：

```
public interface Ingredient<T> {
     public List<T> getAll();
     public T get(String id);
     public int size();
     public void add(T item);
     public void remove(T item);
}

public interface Gravy {
     public Ingredient<Giblet> getGiblets();
     public Ingredient<Carrot> getCarrots();
     public Ingredient<Gravy> getGravies();
} 
```

# excel - 保护带有密码的工作表不显示

> ID：15889354
> 
> 赞同：1
> 
> 时间：2013-04-08T21:30:21.837
> 
> 标签：excel, vba

Excel 中是否有内置方法可以使用密码保护工作簿中的一个电子表格？

就像用户勾选或选择 Control 时，会在 Worksheet 可见之前提示输入密码。

如果它没有内置在 Excel 中，可以用 VBA 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:43:47.857

您可以尝试以下方法：

*   制作工作表`VeryHidden`，`Protected`使其无法从标准 xl 菜单中不受保护或检测到
*   `Workbook_BeforeClose`在和`Workbook_Open`事件上重新添加此保护
*   在这个例子中，我使用了一张名为*YourSheet的工作表*
*   您还应该保护此项目中的 VBA 以增加安全性。

插入一个`Active X`复选框并使用代码检查是否：

1.  复选框为真
2.  用户知道工作`UnHide`表的密码。（本例使用*Fred*）

**复选框代码**

```
Private Sub CheckBox1_Click()
    Dim StrPass As String
    If CheckBox1.Value Then
        StrPass = Application.InputBox("Please enter the password", "Admin check")
        If StrPass = "fred" Then
            With ThisWorkbook.Sheets("YourSheet")
                .Unprotect "fred"
                .Visible = xlSheetVisible
                MsgBox "Sheet unhidden!", vbInformation
            End With
        Else
            MsgBox "wrong password", vbCritical
        End If
    End If
End Sub 
```

**`ThisWorkbook`模块_**

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    With ThisWorkbook.Sheets("YourSheet")
        .Protect "fred"
        .Visible = xlVeryHidden
    End With
End Sub

Private Sub Workbook_Open()
    With ThisWorkbook.Sheets("YourSheet")
        .Protect "fred"
        .Visible = xlVeryHidden
    End With
End Sub 
```

# javascript - Angular JS：ng-show 中的绑定不起作用

> ID：15889361
> 
> 赞同：11
> 
> 时间：2013-04-08T21:31:04.877
> 
> 标签：javascript, angularjs

我有一个指令和一个控制器：

```
app.directive('responseBox', function(){
return {
    restrict: 'E',
    transclude: true,
    templateUrl: 'responseBox.html',
    link: function(scope, element, attrs) {
        element.bind("click", function () {
            scope.toggle();
        })
    }
}}); 
```

和一个控制器：

```
app.controller('responseBoxCtrl', function($scope) {
$scope.opened = false;
$scope.toggle = function() {
    $scope.opened = !$scope.opened;
    console.log($scope.opened);
}}); 
```

响应框.html：

```
<div class="promptBlockResponse" ng-transclude>
<div class="btn-toolbar" style="text-align: right;">
    <div class="btn-group" ng-show="opened">
        <a class="btn btn-link" href="#"><i class="icon-pencil icon-white"></i></a>
        <a class="btn btn-link" href="#"><i class="icon-remove icon-white"></i></a>
    </div>
</div> 
```

在主 html 文件中：

```
<response_box ng-controller="responseBoxCtrl"></response_box> 
```

我希望 btn-group 显示打开的变量何时为真。当我单击 responseBox 时，我可以看到变量切换，但 btn-group 不显示/隐藏。我错过了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T02:10:02.290

因此，重复 Josh 和我在上面的评论中所说的话，点击处理程序在 Angular 的“外部”运行，因此您需要调用`scope.$apply()`以使 Angular 运行摘要循环以注意到所做的更改`scope`（然后它会更新您的看法）：

```
$scope.toggle = function() {
    $scope.opened = !$scope.opened;
    console.log($scope.opened);
    $scope.$apply();
}}); 
```

在模板中使用 ng-click 可以消除链接功能：

```
<div class="promptBlockResponse" ng-transclude ng-click="toggle()"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-01T03:17:06.650

在 Angular 1.3 和 1.2 中，自定义元素指令的 HTML 模板中的以下片段：

```
<div ng-click="toggle($event)"></div>
<div ng-show="data.isOpen"></div> 
```

以及该自定义指令的控制器片段：

```
$scope.toggle = function ($event, destinationState) {
....
data.isOpen = true; //this is in scope and a digest cycle is already running
//calling $scope.$apply will cause an error 
```

演示了您确实需要使用 $apply 的范围内场景。

我遇到了这个 SO 问题，因为我在我的

```
<div ng-show="{{data.isOpen}}"> 
```

更改为

```
 <div ng-show="data.isOpen"></div> 
```

当我一开始以为我遇到了范围问题时，我的绑定工作了。

所以在 Angular 1.2 和 1.3 中，ng-click 不是 Angular 的“外部”，至少使用我用于我的`toggle`函数的签名并在此处解释： [$apply already in progress error](https://stackoverflow.com/questions/18626039/apply-already-in-progress-error)

我发现了我最初认为是范围问题的双括号 ng-show 问题，这要归功于这个 SO： [为什么 ng-show 不删除类 ng-hide](https://stackoverflow.com/questions/21578793/why-doesnt-ng-show-remove-class-ng-hide)

# java - 为什么这会引发 NullPointerException？

> ID：15889365
> 
> 赞同：1
> 
> 时间：2013-04-08T21:31:05.763
> 
> 标签：java, nullpointerexception, game-engine

空指针通常意味着某个参数中存在程序员错误，是否可以查看我的代码以确保我没有遗漏任何明显的东西？

它只是一个简单的基于 % 的扑克机器人，很确定这就是它“认为”错误所在的地方。

```
public Action act(Set<Action> actions) {
    Random generator = new Random();
    int roll = generator.nextInt(100) + 1; //gives number between 1 and 100
    System.out.println("roll = " + roll);
    Action myAction = null;

    if (roll <= 30) { // RAISE 30%
        if (actions.contains(Action.RAISE)) {
            myAction = Action.RAISE;
        } else if (actions.contains(Action.BET)) {
            myAction = Action.BET;
        } else if (actions.contains(Action.CALL)) {
            myAction = Action.CALL;
        }
    } else if (roll > 30 && roll <= 90) { // CALL/CHECK 60%
        if (actions.contains(Action.CALL)) {
            myAction = Action.CALL;
        } else if (actions.contains(Action.CHECK)) {
            myAction = Action.CHECK;
        }
    } else if (roll > 90) { // FOLD 10%
        if (actions.contains(Action.FOLD)) {
            myAction = Action.FOLD;
        }

    return myAction;
} 
```

}

编辑：

下面是添加的 set Action 方法：

```
public Action act(Set<Action> actions, int minBet, int currentBet) {
    action = client.act(actions);
    switch (action) {
        case CHECK:
            break;
        case CALL:
            betIncrement = currentBet - bet;
            if (betIncrement > cash) {
                //TODO: All-in with partial Call.
                betIncrement = cash;
            }
            cash -= betIncrement;
            bet += betIncrement;
            break;
        case BET:
            betIncrement = minBet;
            if (betIncrement >= cash) {
                //TODO: All-in with partial Bet.
                betIncrement = cash;
            }
            cash -= betIncrement;
            bet += betIncrement;
            raises++;
            break;
        case RAISE:
            currentBet += minBet;
            betIncrement = currentBet - bet;
            cash -= betIncrement;
            bet += betIncrement;
            raises++;
            break;
        case FOLD:
            hand.removeAllCards();
            break;
    }
    return action;
} 
```

Action方法继承自接口类Client.java：

```
Action act(Set<Action> allowedActions); 
```

非常感谢！

解决方案：

当我尝试对自己运行两个相同的机器人时，它在某处发生冲突，导致空指针。当我使用任何两个不同的机器人时，它运行良好，没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:34:04.027

不清楚你在哪里得到 NPE，但我敢打赌 null 输入参数

```
 Set<Action> actions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:35:47.733

A `NullPointerException`, 如果您尝试在`null`变量上调用方法，也可能会发生。这里可能就是这种情况。

[如果这没有帮助，请花点时间发布引发异常的确切行。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:56:22.980

你能检查一下`if(null == actions)`吗？这将提供一些见解。

# asp.net-mvc-4 - 断开客户端与服务器端信号器的连接

> ID：15889367
> 
> 赞同：14
> 
> 时间：2013-04-08T21:31:12.503
> 
> 标签：asp.net-mvc-4, signalr

我将 SignalR 1 与带有表单身份验证的 MVC4 C# Web 应用程序一起使用。我的布局页面中有一段 JavaScript 代码：

```
$(documnet).ready(function(){
       connect to hub code ...
}) 
```

我想断开用户与集线器的连接，并在他登录并验证成功后再次开始连接。我想从我的帐户控制器和方法中的服务器端执行此操作：

```
public ActionResult LogOn(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (System.Web.Security.Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, false);
            ....here , disconnect from hub
            ....to make the user reconnect     
} 
```

我想这样做的原因是，如果用户在登录后更改为经过身份验证并且连接仍然存在，SignalR 会引发错误。错误是：

> 连接 ID 的格式不正确。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-09T07:19:57.693

您无法从服务器停止和启动 SignalR 连接。你需要打电话

```
$.connection.hub.stop(); //on the client before the user attempts to log on and then call 
$.connection.hub.start(); //after the log on attempt has completed. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T23:12:00.967

您可以按照您的要求做的一种方法是在您的客户端上编写一个断开连接事件，服务器可以通过 SignalR 调用该事件。也许有点像这样：

```
myHub.client.serverOrderedDisconnect = function (value) {
    $.connection.hub.stop();
}; 
```

然后，在服务器上，是这样的：

```
Clients.Client(Context.ConnectionId).serverOrderedDisconnect(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-17T19:49:10.927

如果有人仍在寻找解决方案（SignalR 2.4.1 版）：

```
GlobalHost.DependencyResolver.Resolve<ITransportHeartbeat>().GetConnections().First(c => c.ConnectionId == "YourId").Disconnect(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-09T18:03:08.257

尝试从 javascript 控制一切。以下是注销示例，登录类似。

从[http://www.asp.net/signalr/overview/security/introduction-to-security](http://www.asp.net/signalr/overview/security/introduction-to-security)：

> 如果用户的身份验证状态在活​​动连接存在时发生更改，则用户将收到一条错误消息，指出“在活动 SignalR 连接期间用户身份无法更改”。在这种情况下，您的应用程序应该重新连接到服务器，以确保连接 ID 和用户名是协调的。例如，如果您的应用程序允许用户在活动连接存在时注销，则连接的用户名将不再与为下一个请求传入的名称匹配。您需要在用户注销之前停止连接，然后重新启动它。
> 
> 但是，重要的是要注意大多数应用程序不需要手动停止和启动连接。如果您的应用程序在注销后将用户重定向到单独的页面，例如 Web 窗体应用程序或 MVC 应用程序中的默认行为，或者在注销后刷新当前页面，则活动连接将自动断开并且不需要任何其他操作。
> 
> 以下示例显示了如何在用户状态发生更改时停止和启动连接。

```
<script type="text/javascript">
$(function () {
    var chat = $.connection.sampleHub;
    $.connection.hub.start().done(function () {
        $('#logoutbutton').click(function () {
            chat.connection.stop();
            $.ajax({
                url: "Services/SampleWebService.svc/LogOut",
                type: "POST"
            }).done(function () {
                chat.connection.start();
            });
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T21:58:54.597

试试这个：

```
public ActionResult LogOn(LoginModel model, string returnUrl) {
    if (ModelState.IsValid) {
        if (System.Web.Security.Membership.ValidateUser(model.UserName, model.Password)) {
            FormsAuthentication.SetAuthCookie(model.UserName, false);
            connection.Stop();
        }
} 
```

假设您的连接句柄是`connection`. `connection`挑战是在 Action Method 中访问对象的句柄。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-22T00:45:00.120

您可以在 .Net Core 中直接使用集线器上下文中止（）连接

```
Context.Abort(); 
```

看下面的方法

[https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.signalr.hubcallercontext.abort](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.signalr.hubcallercontext.abort)

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2016-06-23T14:45:53.927

将以下函数复制并粘贴到您的 Hub 中

```
Use HttpContext.Current.Response.End(); 
```

强制客户端在您的集线器中断开连接

# scala - 在 Akka 微内核中指定主类时编译器错误？

> ID：15889368
> 
> 赞同：0
> 
> 时间：2013-04-08T21:31:15.497
> 
> 标签：scala, akka, microkernel

这是我在`Build.scala`. 当我去运行`sbt run`或`sbt dist`我得到相同的编译器错误`not found: value distMainClass`。这很烦人，因为我检查了 akka-microkernel-plugin 项目以`distMainClass`在 2.0 版中找到。我使用的是 2.0.5，它也存在于 2.1.0 中。

```
lazy val ServiceKernel = Project(
    id = "tracker-kernel",
    base = file("."),
    settings = defaultSettings ++ AkkaKernelPlugin.distSettings ++ Seq(
      libraryDependencies ++= Dependencies.serviceKernel,
      distJvmOptions in Dist := "-Xms512M -Xmx2G -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:ParallelGCThreads=2",
      outputDirectory in Dist := file("target/s.Tracker-dist"),
      distMainClass in Dist := "namespace.ServiceKernel" //says not found
    )
  ) 
```

关于问题根源的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:44:53.317

我们发现问题是您忘记导入缺少的设置，例如：

```
import akka.sbt.AkkaKernelPlugin.distMainClass 
```

# java - 通过 Maven 中的安全校验和锁定依赖项

> ID：15889370
> 
> 赞同：4
> 
> 时间：2013-04-08T21:31:23.393
> 
> 标签：java, maven, jar, dependencies, checksum

当我使用 POM 分发源项目时，我可以使用版本字符串定义依赖项。如果这些依赖项不在本地存储库中，则构建将下载这些依赖项，它甚至会使用来自同一存储库的元数据验证这些下载文件的校验和 ( `-C`)。

但是，构建将从许多公共存储库（和代理）下载这些依赖项，如果他们返回未修改的文件，我的用户将受到这些公共服务的摆布。

我想有一种方法来记录我所有构建依赖项的校验和并将它们与 POM 一起发送（所以我确信文件没有改变，但我不需要将本地存储库的副本发送给构建器）。

有 Maven 方法可以做到这一点吗？与此类似，是否有一种简单的方法来归档我的依赖项（包含所有使用过的工件和元数据文件的本地存储库的副本），以便即使中央存储库失败或将它们发送给离线客户，我也可以重复构建？

（如果可能的话，两者都不需要存储库代理。我知道我可以构建一些东西来做到这一点，我只是想知道 maven 中是否已经有一个基础设施。也许运送一个只包含元数据文件或类似文件的本地存储库?)

注意：我不是在寻找`createChecksum`生成的工件，而是在锁定使用的依赖项的校验和。我找到了一个[`maven-create-checksums`](http://nicoulaj.github.io/checksum-maven-plugin/examples/generating-project-dependencies-checksums.html)插件，但没有对应的验证器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-12T19:35:01.970

有[BitcoinjEnforcerRules](https://github.com/gary-rowe/BitcoinjEnforcerRules)，它似乎是 Maven 的执行器插件的[插件](http://maven.apache.org/enforcer/maven-enforcer-plugin/)（没错，它是插件的插件）。它的工作方式类似于[gradle-witness](https://github.com/WhisperSystems/gradle-witness)，这意味着它将（希望）*所有*使用的工件依赖项的校验和与您之前创建的列表进行比较。

虽然总比没有好，但理想的解决方案是，如果可以简单地为直接依赖项的 POM 设置校验和（或用于签署 POM 的 openPG 密钥，以防它是快照工件），并且这些依赖项的 POM 将包含它的工件的校验和，以及其直接依赖项的 POM 的校验和（/openPG 密钥，如果是快照），等等。请注意，如果使用校验和，那么它们应该绑定到特定的 Maven 存储库，因为相同的（不变的，即非快照）工件在不同的存储库中可能具有不同的校验和。

# c# - HttpResponse 的区别：SetCookie、AppendCookie、Cookies.Add

> ID：15889371
> 
> 赞同：31
> 
> 时间：2013-04-08T21:31:24.103
> 
> 标签：c#, asp.net, cookies

在 ASP.NET 中创建多值 cookie 有一些不同的方法：

```
var cookie = new HttpCookie("MyCookie");
cookie["Information 1"] = "value 1";
cookie["Information 2"] = "value 2";

// first way
Response.Cookies.Add(cookie);

// second way
Response.AppendCookie(cookie);

// third way
Response.SetCookie(cookie); 
```

我什么时候应该使用哪种方式？我已经读过该`SetCookie`方法会更新 cookie，如果它已经退出的话。其他方式不也更新现有的cookie吗？

以下代码是编写单值 cookie 的最佳实践吗？

`Response.Cookies["MyCookie"].Value = "value";`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-08T21:45:56.067

如果我没记错的话

```
Response.Cookies.Add(..) 
```

和

```
Response.AppendCookie(..) 
```

将允许将多个同名 cookie 附加到响应中。

另一方面

```
Response.SetCookie(..) 
```

和

```
Response.Cookies[key].Value = value; 
```

将始终覆盖以前的同名 cookie。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-08T22:35:30.317

> 我什么时候应该使用哪种方式？

这取决于您要执行的 Cookie 操作。

请注意，`Add`and`AppendCookie`正在执行相同的功能，除了`AppendCookie`您没有引用 the 的`Cookies`属性`Response` `class`并且它正在为您执行此操作。

*   `Response.Cookies.Add`-**将**指定的 cookie 添加到 cookie 集合中。
*   `Response.AppendCookie`-**将**HTTP cookie 添加到 **内部**cookie 集合
*   `Response.SetCookie`-**更新**cookie 集合中的现有 cookie。

`Exceptions`添加重复 cookie 或尝试更新不存在的 cookie 时不会抛出。

这些方法的主要`exception`内容是：（`HttpException`在*发送 HTTP 标头后附加一个 cookie。*）

Add 方法允许 cookie 集合中的重复 cookie。使用 Set 方法确保 cookie 集合中 cookie 的唯一性。

感谢[MSDN](http://msdn.microsoft.com/)！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-16T12:58:57.817

在 Wiktor 的回复中捎带[tne 的](https://stackoverflow.com/users/2266481/tne)`AppendCookie`评论，`SetCookie`不应该使用它们 - 它们供 .NET 框架内部使用。它们不应该公开，但它们是公开的，我的猜测是作为 IIS 管道在其他地方的黑客攻击。

所以你应该这样设置你的cookie（或者写一个扩展方法来设置多个cookie）：

```
string cookieName = "SomeCookie";
string cookieValue = "2017";

if (Response.Cookies[cookieName] == null)
{
    Response.Cookies.Add(new HttpCookie(cookieName, cookieValue));
}
else
{
    Response.Cookies[cookieName].Value = cookieValue;
} 
```

# url - 尝试通过应用程序协议处理程序打开带有参数的应用程序

> ID：15889372
> 
> 赞同：4
> 
> 时间：2013-04-08T21:31:29.980
> 
> 标签：url, registry, protocol-handler, uri-scheme

我目前正在尝试找出我创建的应用程序协议处理程序的问题。[按照 MSDN ( http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx) )上列出的说明，我可以注册我的应用程序**PDF Annotator**以通过以下方式打开一个网址。我遇到的问题是当我尝试将参数与调用一起传递时。应用程序将打开，但传递的文件参数未在应用程序中打开。

按照 MSDN 的规定，我的注册表项是逐字记录的。我的 HTML 代码如下：

```
PDFAnnotator:C:\path\to\file\file.pdf 
```

我理解协议处理程序的方式是它获取 URL 并尝试通过命令行启动它。话虽如此，我可以在 PDFAnnotator 中使用提示符中的以下命令打开我的 pdf 文件：

```
PDFAnnotator.exe C:\path\to\file\file.pdf 
```

我尝试过以不同方式格式化 HTML 中的文件路径，认为这也是问题所在。有没有其他人遇到过这个问题或类似的问题？

**后代的强制性更新**（[http://xkcd.com/979/](http://xkcd.com/979/)）**：**

我这样做的原因是因为我的应用程序处理的 PDF 中有一半是可编辑的，而另一半是只读的。我试图使用 Acrobat 插件（我只针对 chrome）将只读链接保留在浏览器中，而该协议将允许我将可编辑链接的链接设置为使用 Annotator 打开。我一时兴起尝试扭转这种情况（将默认设置为 Annotator 并为 Acrobat 创建协议）。我这样做了，首先尝试了 Acrobat 的 URI 方案 (acrobat://)，它在打开 Acrobat 之外不起作用。然后，我尝试为 Acrobat 创建一个协议。当它启动时，它给了我一个错误，说明文件名、路径名或卷的路径错误。那么，进步？随着其他优先事项的出现，我暂时放弃了这一点，但希望这对未来的人有所帮助。

# google-search-api - 谷歌自定义搜索排序属性问题

> ID：15889374
> 
> 赞同：0
> 
> 时间：2013-04-08T21:31:32.290
> 
> 标签：google-search-api, google-custom-search

我在 GCS 请求中使用 sort 属性时遇到问题。每当我使用针对 PageMap 元素的排序时，它都会返回 0 个结果。看看下面。我只是错过或误解了什么吗？

请求无排序： [http ://www.google.com/cse?cx=010537259921960391009:s7pan_vavqu&output=xml_no_dtd&q=fire+more:pagemap:course](http://www.google.com/cse?cx=010537259921960391009:s7pan_vavqu&output=xml_no_dtd&q=fire+more:pagemap:course)

请求排序： [http ://www.google.com/cse?cx=010537259921960391009:s7pan_vavqu&output=xml_no_dtd&q=fire+more:pagemap:course&sort=course-coursenumber:a](http://www.google.com/cse?cx=010537259921960391009:s7pan_vavqu&output=xml_no_dtd&q=fire+more:pagemap:course&sort=course-coursenumber:a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T09:04:44.160

您可能没有启用排序选项。阅读如何做到这一点：http: [//support.google.com/customsearch/bin/answer.py ?hl=en&answer=2549537](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2549537)

# sql - SQL：唯一索引中的类型转换

> ID：15889375
> 
> 赞同：2
> 
> 时间：2013-04-08T21:31:37.167
> 
> 标签：sql, postgresql

```
CREATE TABLE foo (
    dt AS DATE,
    ts AS TIMESTAMP
); 
```

什么是创建唯一约束的正确方法，其中的日期值`ts`出现一次`dt`；例子：

```
dt         | ts
2010-01-02 | 2010-01-02 17:19:08
2010-01-02 | 2011-11-11 01:01:01
2010-01-02 | 2011-11-11 17:19:08 -- would error on insert (already a 2011-11-11) 
```

试图：

1.  无效的语法，但我想要实现的目标：

    ```
    CREATE UNIQUE INDEX unique_tsdate_per_dt ON foo(dt,ts::date); 
    ```

2.  不完整的尝试 - 可能是子查询？

    ```
    CREATE UNIQUE INDEX unique_tsdate_per_dt ON foo(dt) WHERE ts::date -- ? 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:49:57.780

我认为您正在寻找`::date`演员表的功能形式：

```
CREATE UNIQUE INDEX unique_tsdate_per_dt ON foo(dt, date(ts)); 
```

然后你会得到这样的结果：

```
=> insert into foo (dt, ts) values ('2010-01-02', '2010-01-02 17:19:08');
=> insert into foo (dt, ts) values ('2010-01-02', '2011-11-11 01:01:01');
=> insert into foo (dt, ts) values ('2010-01-02', '2011-11-11 17:19:08');
ERROR:  duplicate key value violates unique constraint "unique_tsdate_per_dt"
DETAIL:  Key (dt, date(ts))=(2010-01-02, 2011-11-11) already exists. 
```

# php - 如何使用php在行中获取字符串

> ID：15889376
> 
> 赞同：0
> 
> 时间：2013-04-08T21:31:44.457
> 
> 标签：php, mysql

我有一个像 settings.txt 这样的文件。其中包含一些行

```
SET VERSION=3
SET BACKUP_DRIVE=D:\
SET BACKUP_DIRECTORY=BACKUP\
SET HOURLY_DIRECTORY=HOURLY\
SET INPUT_DIRECTORY=C:\MySQL\Data\CDR\
SET username=username
SET password=password 
```

此文件位于其他位置或其他服务器上。我已经使用 ...

```
$frserver =  file_get_contents("http://ip is here/cdr/settings.txt"); 
```

我用这个

```
$File = file_get_contents("http://ip is heresettings.txt");
$FileArr = explode("\r\n",$File);
echo $FileArr[5]; // This will output: SET username=desired username 
```

并得到“SET username=desired username” bt 我只想要“desired username”..just this issue left nw

现在我无法从中获取用户名和密码。如何获取用户名和密码，以便我可以在数据库中比较它们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:36:31.450

假设

```
$frserver = 'SET VERSION=3
SET BACKUP_DRIVE=D:\
SET BACKUP_DIRECTORY=BACKUP\
SET HOURLY_DIRECTORY=HOURLY\
SET INPUT_DIRECTORY=C:\MySQL\Data\CDR\
SET username=username
SET password=password'; 
```

整个解决方案就是这两行：

```
preg_match_all('~^SET\s+([^=]+)=(.*)$~m', $frserver, $matches);
$params = array_combine($matches[1], $matches[2]); 
```

因此，之后您可以相应地检索`$params['username']`变量`$params['password']`。

ideone 上的实时示例：http: [//ideone.com/pn2Wbp](http://ideone.com/pn2Wbp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:38:08.087

```
$File = file_get_contents("Settings.txt");
$FileArr = explode("\r\n",$File);
echo $FileArr[5]; // This will output: SET username=username 
```

解释：

此代码将分解由换行符指定的文件的内容，由换行符表示，`\r\n`这是换行符的 windows 格式。HTML 等效：`<br>`

要查看完整的数组：

```
print_r($FileArr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:45:13.050

如果您只需要从文本文件中获取数据，我建议使用 csv，如下所示：

```
key,value
VERSION,3
BACKUP_DRIVE,D:\
BACKUP_DIRECTORY,BACKUP\
HOURLY_DIRECTORY,HOURLY\
INPUT_DIRECTORY,C:\MySQL\Data\CDR\
username,username
password,password 
```

然后您可以执行以下操作将所有这些键和值放入 PHP 数组中：

```
$contents = file_get_contents('http://ip is here/cdr/settings.txt');
$lines = explode("\n",$contents);
foreach($lines as $line) {
   $pair = str_getcsv($line);
   $settings[] = array($pair[0]=>$pair[1]);
}
// print_r to see the array
print_r($settings); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T21:47:18.573

您可能最好使用`file()`它来获取数据，这样返回的数据已经在一个数组中（每行文本一个元素）：

```
$raw_array = file('http://ip is here/cdr/settings.txt'); 
```

然后也许运行数组遍历将所有内容设置为可用数组

```
$final_array = array();
array_walk($raw_array, function($value) use $final_array {
    $value = trim($value); // trim newlines
    $value = str_replace('SET ', '', $value); // remove 'SET '
    $value_array = explode('=', $value); // break up value on '='
    $final_array[$value_array[0]] = $value_array[1]; // set key/value in $final_array
}); 
```

对于不支持匿名函数的 PHP 版本 < 5.3，您需要在此处使用命名函数，因此它可能如下所示：

```
$final_array = array();
array_walk($raw_array, 'parse_raw_array', $final_array);

function parse_raw_array ($value, $key_not_used, $final_array) {
    $value = trim($value); // trim newlines
    $value = str_replace('SET ', '', $value); // remove 'SET '
    $value_array = explode('=', $value); // break up value on '='
    $final_array[$value_array[0]] = $value_array[1]; // set key/value in $final_array
}); 
```

然后只需根据需要从 $final_array 访问键/值

```
$username = $final_array['username'];
$password = $final_array['password']; 
```

话虽这么说，像这样清楚地传递您的 MySQL 凭据（我假设就是这样）可能不是一个好主意。

# ios - Flex AS3 Iphone - 如何打开原生地图应用程序？

> ID：15889384
> 
> 赞同：0
> 
> 时间：2013-04-08T21:32:17.390
> 
> 标签：ios, actionscript-3, flash, apache-flex, air

我有一堆按钮可以打开默认地图应用程序并将某些内容放入用户系统剪贴板。它在 Android 平板电脑上运行良好，但当点击按钮时，Iphone 什么也不做。这是代码：

```
 case "MapYummyYummy":
        System.setClipboard( "1665 Stelton Rd  Piscataway Nj 08901" )
        _callURL = "geo: 40.4978922, -74.4488224";
        var targetURL:URLRequest = new URLRequest(_callURL);
        navigateToURL(targetURL);
        break; 
```

有谁知道可以在 Iphone 设备上使用的等效项？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:27:39.303

你试过这个 setData 方法吗？（我没有这方面的经验，但看起来是一个可行的选择）。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html#setData()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html#setData())

通过 URL 参考的 iOS 启动地图：http: [//developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

查询位置：

[http://maps.apple.com/?q=cupertino](http://maps.apple.com/?q=cupertino)

设置方向的开始和结束：

[http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino](http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino)

希望它对你有用（查找未测试）。

# java - 扫描仪在 Mac OSX 终端中无法正常工作

> ID：15889389
> 
> 赞同：0
> 
> 时间：2013-04-08T21:32:35.883
> 
> 标签：java, macos, io, intellij-idea, java.util.scanner

我有一个用户可以运行的 hacky Ant 命令来做一些事情。此命令提示用户输入。在 IntelliJ 中，在测试时，它可以正常工作。但是当我从终端运行 ant 目标时，我得到了奇怪的行为。这是代码：

```
 Scanner userIn = new Scanner(System.in);
    PrintWriter writer = new PrintWriter(System.out);
    writer.println(error + "  If you continue with the load, some data may be in a corrupted state.  Would you like to continue? (y/n): ");
    writer.flush();
    String userResponse = userIn.next();
    while (!(userResponse.equalsIgnoreCase("y") || userResponse.equalsIgnoreCase("n")
      || userResponse.equalsIgnoreCase("yes") || userResponse.equalsIgnoreCase("no"))) {
      writer.println("Invalid input.  Please specify if you would like to continue with the load. (y/n): ");
      writer.flush();
      userResponse = userIn.next();
    }
    return userResponse.equalsIgnoreCase("y") || userResponse.equalsIgnoreCase("yes"); 
```

从终端运行 ant 命令时，错误消息会正确显示，但是当用户输入输入时，要么什么都没有发生，要么我必须按回车键很多次才能处理任何事情。它也拒绝正确读取输入。如果我输入yes，它仍然会永远循环，提示输入，就好像用户输入了无效输入一样。

这是某种错误吗？我不擅长使用扫描仪吗？

编辑：我已经尝试使用 nextLine() 代替。有时，但并非始终如一，我得到一个 java.util.NoSuchElementException: No line found 异常。其他时候，如果我按 Enter 10 次以上，它就会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T18:15:31.360

我遇到了同样的问题，我的程序（通过 ant 运行）会创建一个扫描仪，但是当被要求输入时，程序似乎只是循环并且不接受任何输入，直到我用 ctrl+c 终止。原来问题是我的 build.xml 文件中的“fork”属性。我有 fork="yes" 并将其更改为“no”，或者只是将其完全取出，扫描仪工作得很好。希望这可以帮助！

# sql-server-2008 - 在存储过程中加入 sql 语句

> ID：15889390
> 
> 赞同：0
> 
> 时间：2013-04-08T21:32:51.453
> 
> 标签：sql-server-2008, select, stored-procedures

我试图在我的存储过程中加入这两个语句。我该怎么做才能得到一张桌子，这样我就可以使用 groupBy 列。

```
Select 
  TableA.Name,
  TableB.Occupation,
  'Group1' AS [groupBy]
From
 TableA,
 TableB
Where
 TableA.ID = 1

Select 
  TableA.Name,
  TableB.Occupation,
  'Group2' AS [groupBy]
From
 TableA,
 TableB
Where
 TableB.ID = 10 
```

我的结果应该是这样的

```
Name    Occupation      GroupBy
David   Doctor          Group1
John    Pilot           Group1
Dwayne  Wrestler        Group2
Axel    RockStar        Group2 
```

更新

```
Table A

ID Name  Occupation  
1  David Doctor
1  John  Pilot
2  Mike  Clerk

Table B 

ID  Name   Occupation
3   Wayne  Writer
4   Shane  Publisher 
```

10 德韦恩摔跤手 10 阿克塞尔摇滚明星

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:59:04.417

似乎您可以使用 a`UNION ALL`来获得结果：

```
Select 
  TableA.Name,
  TableA.Occupation,
  'Group1' AS [groupBy]
From TableA
Where TableA.ID = 1
union all
Select 
  TableB.Name,
  TableB.Occupation,
  'Group2' AS [groupBy]
From TableB
Where TableB.ID = 10 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/92dd6/3)。A`UNION ALL`将返回两个查询之间的所有行。如果您认为您可能有要删除的重复项，那么您可以使用`UNION`.

# html - 2 100% 列 + 粘性页脚

> ID：15889391
> 
> 赞同：0
> 
> 时间：2013-04-08T21:32:51.980
> 
> 标签：html, css

所以我正在创建一个网站，这里是：[http ://www.testeeee.cixx6.com/](http://www.testeeee.cixx6.com/)

而且我不能把site_contente、内容和侧边栏（这2 个在site_contente 里面）100% 的高度。

基本上我希望内容和侧边栏无论如何都是 100%。当内容 div 上的内容超过 100% 时，我希望它滚动，我的意思是，只滚动内容滚动。

我想要的示例：

[http://i.stack.imgur.com/i2rid.jpg](https://i.stack.imgur.com/i2rid.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:34:09.853

根据您提交的内容，您需要使用 iframe。但是，您可能指的是这样的事情：[我如何强制浮动 DIV 匹配另一个浮动 DIV 的高度？](https://stackoverflow.com/questions/526294/how-might-i-force-a-floating-div-to-match-the-height-of-another-floating-div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:38:41.360

在 DIV 中设置滚动使用样式属性

```
overflow:scroll|auto
overflow-x: scroll|auto
overflow-y: scroll|auto 
```

对于尺寸，我想你已经回答了

编辑¿你试过了吗？？？：

从其他答案中提到的问题复制：

```
<DIV id="site_content" >

<DIV id="content" style="float : left; width :65%; height:auto;background-color:#FDD017;">
</DIV>

<DIV id="side_bar" style="float : left; width :35%;height:auto; background-color:#FDD017;">
</DIV>

</DIV> 
```

# c# - 如何以编程方式在 SlideMaster 和默认视图之间切换？

> ID：15889392
> 
> 赞同：0
> 
> 时间：2013-04-08T21:32:52.760
> 
> 标签：c#, vsto, powerpoint

我需要通过单击按钮在 SlideMaster 模式下切换到选定的主父幻灯片。此外，我需要返回默认模式并选择此模式幻灯片中的最后选择。

有谁知道怎么做（对于PP2007 / PP2010 / PP2013）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:16:29.183

我会在 VBA 中这样做：

```
Sub Switch_To_Slidemaster()

Dim curSLD As Long
    curSLD = ActiveWindow.View.Slide.SlideIndex

'switch to SlideMaster
Application.Windows(1).ViewType = ppViewSlideMaster

'return to default
Application.Windows(1).ViewType = ppViewNormal

'set slide
ActiveWindow.Presentation.Slides(curSLD).Select

End Sub 
```

我希望你能应对转换。（针对 PP 2010 测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:12:35.743

我已经在 PP2007、PP2010、PP2013 中测试了这段代码，它可以工作。

```
private int _slideIndexInDefaultView;

private void ButtonNormalView_Click(object sender, RibbonControlEventArgs e)
    {
        // Default view
        Globals.AddIn.Application.Windows[1].ViewType = Microsoft.Office.Interop.PowerPoint.PpViewType.ppViewNormal;
        Globals.AddIn.Application.ActiveWindow.Presentation.Slides[_slideIndexInDefaultView].Select();
    }

    private void ButtonSlideMasterView_Click(object sender, RibbonControlEventArgs e)
    {
        // Slide master view
        _slideIndexInDefaultView = Globals.AddIn.Application.ActiveWindow.View.Slide.SlideIndex;
        Globals.AddIn.Application.Windows[1].ViewType = Microsoft.Office.Interop.PowerPoint.PpViewType.ppViewSlideMaster;
    } 
```

# php - php mail() 函数中“发件人”的正确格式

> ID：15889397
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:33:19.793
> 
> 标签：php, email, gmail, aol

我想让 php 生成的电子邮件的“发件人”部分仅来自公司名称。显然，这让垃圾邮件过滤器很伤心。所以，我的代码是...

```
$mail->FromName = 'Company Name <some_email@domain.com>'; 
```

我的问题是 gmail 和 aol 不断返回这些电子邮件，发件人部分看起来像这样......

```
From: "Company Name <some_email@domain.com>" <> 
```

最后对“<>”有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:07:10.337

`<>`末尾的表示`"Company Name <some_email@domain.com>" <>`地址被解释为仅包含关联的名称部分，没有真实的电子邮件地址。

尝试将 From 地址生`'Company Name' <some_email@domain.com>`成为`some_email@domain.com (Company Name)`

**编辑：** 此问题的另一个可能原因是您的邮件程序为 From 标头的名称部分和地址部分使用了单独的字段。如果是这样的话：

```
$mail->From = "some_email@domain.com";
$mail->FromName = "Company Name"; 
```

应该解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:15:21.140

在任何体面的邮件程序 (MUA) 中，您应该能够看到您已发送和已发送给您的电子邮件的原始内容和标题。如果你看一下后者，你会发现正确的做法是：

```
$from='"Human readable version of address" <mailbox@domain.com>'; 
```

顺便说一句：您帖子的标题说您正在使用 mail() 函数，但您的示例代码没有调用函数。您的代码暗示您是某种类来实现您的电子邮件，但您没有提供该类是什么的详细信息 - 并且 AFAIK 没有捆绑在 PHP 中的标准类。因此，我们不知道你的代码实际上对你提供给它的地址做了什么——如果它是一个现成的包，它应该带有文档。

# objective-c - 调用 NSMutableArray:addObject 会导致无法识别的选择器异常

> ID：15889401
> 
> 赞同：0
> 
> 时间：2013-04-08T21:33:41.417
> 
> 标签：objective-c

我正在尝试在数组上调用 addObject 时遇到无法识别的选择器异常。但是我的数组是 NSMutableArray，而不是 NSArray。我不明白为什么会这样。

我有以下课程：

```
@interface A : NSObject
@property (nonatomic, copy)     NSMutableArray* children;
- (id) init;
- (void) addChild: (A*) child;
@end

@interface B : A
- (id) init;
@end

@implementation A
- (id) init 
{ 
   self = [super init];
   return self;
} 

- (void) addChild: (A*) child
{
    [self.children addObject:child];
}
@end

@implementation B
-(id) init 
{
    self = [super init];
    if (self != nil)
    {
           self.children = [[NSMutableArray alloc] init];
    }
    return (self);
} 
```

然后，如果我创建一个 B 类型的对象并调用 [b addChild: anObject] 我得到一个无法识别的选择器，我不明白为什么。

输出是：

```
2013-04-08 14:31:08.046 otest[13381:7e03] -[__NSArrayI addObject:]: unrecognized selector sent to instance 0x17759c0 
```

问题是什么？

TIA

（请关注实际的代码和问题，而不是讨论为什么我不在 A 的 init 中分配数组，除非相关。我想了解为什么现在的代码不起作用。谢谢）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:46:22.903

通过使用存储限定符`copy`而不是声明数组`strong`，您的可变数组将在分配时被复制并变成不可变的 NSArray。

# dart - DART 字符串常量设置为编译时的时间戳

> ID：15889406
> 
> 赞同：0
> 
> 时间：2013-04-08T21:33:59.673
> 
> 标签：dart

如何在**编译**时将字符串常量自动设置为日期戳？

就像是：

```
 const String COMPILE_DATESTAMP = eval_static(DateTime.now().toString());
    ...
    String s = "This program was compiled $COMPILE_DATESTAMP"; 
```

其中 s 将代表例如“该程序已编译 1971-02-03 04:05:06”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:19:44.350

感谢您的提问！

Dart 中没有必需的编译步骤。（我们确实有一个可选的 Dart-to-JavaScript 编译器，甚至还有一个进行树抖动的 Dart-to-Dart 处理器。） Dart 的 VM 接受文本文件形式的输入。与 Ruby 或 Python 类似，它运行基于文本的脚本。

正如其他人所提到的，这是某种构建步骤的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:28:25.893

我是 Dart 的新手，但我在文档中没有看到任何东西表明这样的事情是可能的。我强烈怀疑它不是。

如果你真的需要你描述的功能，我认为你最好的选择是推出你自己的构建脚本。像这样简单的东西：

```
#!/bin/bash

sed -ri "s/INSERT_DATETIME_HERE/`date`/" $1
dart2js $1 -o$1.js 
```

可以根据您的需要进行修改。（如果是我，我会想要在那里进行一些健全性检查；我只是建议一个起点。）您的代码将变为：

```
const String COMPILE_DATESTAMP = "INSERT_DATETIME_HERE";
...
String s = "This program was compiled $COMPILE_DATESTAMP"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:58:17.840

您必须编写另一个可以检查实际编译程序的[![](https://i.stack.imgur.com/G1dzB.png)dart](/questions/tagged/dart "显示标记为“飞镖”的问题")程序。然后很简单：

```
File compiledApp = new File('path/to/compiled/app.dart');
compiledApp.lastModified().then(
   (modifiedDate)
   {
        print("This program was compiled $modifiedDate");
   },
   onError: (exp) 
            {
               // File doesn't exist ?
            }
   ); 
```

这个技巧建立在编译器将修改文件的“最后修改日期”的知识之上

# c# - if语句c#中的星期几和一天中的几小时

> ID：15889412
> 
> 赞同：0
> 
> 时间：2013-04-08T21:34:11.107
> 
> 标签：c#, datetime, if-statement, dayofweek, timeofday

如果一天中的一天和一天中的时间在 if 语句中相等，我想做一些事情。我有一天的部分，只是无法弄清楚时间部分。假设我希望时间是上午 9 点。

这是我到目前为止所拥有的

```
var dt_check_monday = DateTime.Now.DayOfWeek;
if (dt_check_monday == DayOfWeek.Monday && time_now = DateTime.Now.Hour==9)
{
//do something
} 
```

我不能使用这个我得到一个错误：

> 运算符“&&”不能应用于“bool”和“System.TimeSpan”类型的操作数

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:35:46.157

= 是一个任务。== 是“等于”

你的第二个 = 应该是 ==

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:36:10.973

你应该这样做：

```
if (DateTime.Now.DayOfWeek == DayOfWeek.Monday && DateTime.Now.Hour == 9)
{

} 
```

您的代码对未声明的变量进行了赋值，`time_now`而您正在执行的赋值`time_now =`是导致它失败的原因。

您还应该考虑修改命名变量的`dt_check_monday`方式，如果其中的值是 ，则绝对没有任何意义`DayOfWeek.Wednesday`，请考虑将其更改为类似`dt_currentDayOfWeek`但已经存在的形式，`DateTime.Now.DayOfWeek`这就是我从示例中删除变量的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:37:14.497

如果您想保留 time_now 以供以后使用，则必须用括号将 if 语句中的赋值括起来。

```
var dt_check_monday = DateTime.Now.DayOfWeek;
if (dt_check_monday == DayOfWeek.Monday && (time_now = DateTime.Now.Hour) == 9)
{
    //do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T21:39:31.433

我认为`time_now`有`TimeSpan`数据类型。所以你可以试试这个

```
if (dt_check_monday == DayOfWeek.Monday && time_now.Hours == 9)
 {
    //do something
 } 
```

# php - 链接两个数组并像 MySQL DB 一样使用它们

> ID：15889413
> 
> 赞同：4
> 
> 时间：2013-04-08T21:34:11.137
> 
> 标签：php

我试图帮助一个伙伴，她坚持使用数组，所以这次没有使用数据库:(县页面显示所有县，当点击一个时，它会被带到另一个页面，显示该县的步行。

```
$countys = array();
$countys[101] = array(
                "name" => "Armagh",
                "img" => "css/images/map.jpg",
                "largeimg" => "css/images/banmap.jpg"
            );

$countys[102] = array(
                "name" => "Antrim",
                "img" => "css/images/map.jpg",
                "largeimg" => "css/images/banmap.jpg"
            );

$walks = array();
$walks[1] = array(
    "name" => "Portadown Walk",
    "county" => "Armagh",
    "img" => "css/images/map.jpg",
    "location" => "Portadown", 
    "largeimg" => "css/images/banmap.jpg"
);

$walks[2] = array(
    "name" => "Antrim Walk",
    "county" => "Antrim",
    "img" => "css/images/map.jpg",
    "location" => "Causeway"
); 
```

多维数组是否可以正常工作，或者可能是 for/while 循环来检查 $walk['county'] 是否等于县？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T22:53:03.917

**桌子**

如果您想使用数组作为数据库，显然最好的表格建模方法是使用 2D 数组：

```
$counties = array();
$countiesKey = 0;

// add a row
$counties[++$countiesKey] = array(
    "name"     => "Armagh",
    "img"      => "css/images/map.jpg",
    "largeimg" => "css/images/banmap.jpg"
);
// and another...
$counties[++$countiesKey] = array(
    "name"     => "Antrim",
    "img"      => "css/images/map.jpg",
    "largeimg" => "css/images/banmap.jpg"
); 
```

这大致相当于下面的表定义（为简单起见，我们将使用 MySQL 进行比较并假设所有字符串字段为`VARCHAR(1024)`）：

```
CREATE TABLE counties (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(1024),
    img VARCHAR(1024),
    largeimg VARCHAR(1024)
); 
```

* * *

**唯一索引**

所以我们使用数组索引作为我们的主键。但是为了基于除主键之外的任何“列”来搜索数据库，它需要一个`O(n)`操作：我们需要迭代整个表并检查每一行的相关值。这就是索引发挥作用的地方。如果我们也想在我们的县名上添加索引怎么办？好吧，我们可以使用一个单独的关联数组：

```
$countiesNameIndex = array();
$countiesNameIndex['Armagh'] = 1;
$countiesNameIndex['Antrim'] = 2; 
```

关联数组被实现为哈希表，因此通过键访问元素大致是`O(1)`. 这使我们能够在按县名搜索时大大加快对行的访问：

```
$search = 'Antrim';
$result = array();
if (isset($countiesNameIndex[$search])) {
    $result[$countiesNameIndex[$search]] = $counties[$countiesNameIndex[$search]];
}
return $result; 
```

该索引可以在添加和删除行时动态维护：

```
// Insert a row
$row = array( /* row data */ );
if (isset($countiesNameIndex[$row['name']])) {
    // insert fails, duplicate value in column with unique index
}
$counties[++$countiesKey] = $row;
$countiesNameIndex[$row['name']] = $countiesKey;

// Delete a row
$idOfRowToDelete = 2;
if (isset($counties[$idOfRowToDelete])) {
    unset(
        $countiesNameIndex[$counties[$idOfRowToDelete]['name']], 
        $counties[$idOfRowToDelete]
    );
} 
```

随着数据集变大，这种索引方法将大大加快数据访问速度。

* * *

**非聚集索引**

让我们快速看看我们将如何实现一个不携带有关它引用的行的顺序信息的非唯一索引 - 实现非常相似。这会比我们的唯一索引慢一点，但比迭代整个数据集要快得多：

```
$countiesImgIndex = array();

// Insert a row
// INSERT INTO counties ( ... ) VALUES ( ... )
$row = array( /* row data */ );
if (!isset($countiesImgIndex[$row['img']])) {
    $countiesImgIndex[$row['img']] = array();
}
$counties[++$countiesKey] = $row;
$countiesImgIndex[$row['img']][] = $countiesKey;

// Search using the index
// SELECT * FROM counties WHERE img = 'css/images/map.jpg'
$search = 'css/images/map.jpg';
$result = array();
if (isset($countiesImgIndex[$search])) {
    foreach ($countiesImgIndex[$search] as $rowId) {
        $result[$rowId] = $counties[$rowId];
    }
}
return $result;

// Delete a row
// DELETE FROM counties WHERE id = 2
$idOfRowToDelete = 2;
if (isset($counties[$idOfRowToDelete])) {
    $key = array_search($idOfRowToDelete, $countiesImgIndex[$counties[$idOfRowToDelete]['img']]);
    if ($key !== false) {
        array_splice($countiesImgIndex[$counties[$idOfRowToDelete]['img']], $key, 1);
    }
    unset($counties[$idOfRowToDelete]);
} 
```

* * *

**使用多个索引**

我们甚至可以使用这些索引来执行更复杂的操作——考虑如何实现 SQL 查询

```
SELECT *
FROM counties
WHERE name = 'Antrim'
  AND img  = 'css/images/map.jpg' 
```

首先我们看一下最具体的索引（唯一索引）：

```
$result = array();

$nameSearch = 'Antrim';
$imgSearch = 'css/images/map.jpg';

if (!isset($countiesNameIndex[$nameSearch])) {
    return $result;
} 
```

接下来我们检查该行是否与其他条件匹配：

```
if ($counties[$countiesNameIndex[$nameSearch]]['img'] === $imgSearch) {
    $result[$countiesNameIndex[$nameSearch]]
        = $counties[$countiesNameIndex[$nameSearch]];
}

return $result; 
```

您可以看到，在这种情况下，我们只需要使用 1 个索引，因为正在查询的列之一具有唯一索引。这意味着我们可以直接转到唯一重要的行并检查它是否符合条件。现在让我们假设我们在另一个非唯一列 - 上有一个索引`largeImg`。这个操作有点复杂，但我们可以通过使用来走捷径[`array_intersect()`](http://php.net/array-intersect)：

```
$result = array();

$imgSearch = 'css/images/map.jpg';
$largeImgSearch = 'css/images/banmap.jpg';

if (!isset($countiesImgIndex[$imgSearch], $countiesLargeImgIndex[$largeImgSearch])) {
    return $result;
}

return array_intersect(
    $counties[$countiesImgIndex[$imgSearch]], 
    $counties[$countiesLargeImgIndex[$largeImgSearch]]
); 
```

* * *

**外键和连接表**

但是当我们开始想加入另一个表时呢？再说一次，这很像我们在 SQL 中做的。假设我们有以下 SQL 表定义：

```
CREATE TABLE walks (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(1024),
    location VARCHAR(1024),
    county INT
); 
```

显然我们从另一个数组开始，并插入一些行：

```
$walks = array();
$walksKey = 0;

$walks[++$walksKey] = array(
    "name" => "Portadown Walk",
    "county" => 1,
    "location" => "Portadown", 
);
$walks[++$walksKey] = array(
    "name" => "Antrim Walk",
    "county" => 2,
    "location" => "Causeway"
); 
```

很明显那里发生了什么，该`county`列引用了`$counties`表中行的 ID。顺便说一下，我们使用计数器来跟踪 ID 而不是使用`$arr[] =`赋值语法的原因有两个：首先，它确保当从表中删除行时 ID 始终保持不变，其次它更容易（计算成本更低) 以提取最后插入的行的 ID - 这在使用外键创建复杂的表结构时会有所帮助，正如您在此处看到的那样。

现在让我们看一下将这些数据关联起来。假设我们运行了这个 SQL 查询：

```
SELECT c.*, w.*
FROM walks w
JOIN counties c ON w.county = c.id
LIMIT 0, 10 
```

这可以按如下方式实现：

```
$result = array();
$i = 0;
foreach ($walks as $walkId => $walksRow) {
    $result[$walkId] = array_merge($counties[$walksRow['county']], $walksRow);
    if (++$i == 10) {
        break;
    }
}
return $result; 
```

现在您可能已经发现了一个问题：两个表都包含一个名为 name 的列。上面的代码将从表中返回每一行的`name`值`walks`。您可以轻松调整此行为，但具体如何实施将取决于您想要的结果。

* * *

**排序结果集**

PHP 提供了一个可以为您完成大部分工作的函数 - [`array_multisort()`](http://php.net/array-multisort). 需要注意的最重要的一点是，应在提取结果行后应用顺序，以尽量减少所需操作的数量*。*

```
SELECT c.*, w.*
FROM walks w
JOIN counties c ON w.county = c.id
ORDER BY w.location ASC 
```

```
// Collect the result set in $result as above

$location = array();

foreach ($result as $row) {
    $location[] = $row['name'];
}
array_multisort($location, SORT_ASC, $result);

return $result; 
```

* * *

希望以上示例应该开始演示一些可用于使用 PHP 数组在 RDBMS 上实现某些功能的逻辑。可以进行某些相当简单的优化，即使随着数据集的增长，这些操作也会相对便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:56:37.547

恕我直言，多维数组最适合这个。

```
$countys[101] = array(
    "name"     => "Armagh",
    "img"      => "css/images/map.jpg",
    "largeimg" => "css/images/banmap.jpg",
    "walks"    => array(
        array(
            "name"     => "Portadown Walk",
            "img"      => "css/images/map.jpg",
            "location" => "Portadown", 
            "largeimg" => "css/images/banmap.jpg"
        ),
        array(
            "name"     => "Some other Walk",
            "img"      => "css/images/map.jpg",
            "location" => "Somewhere else", 
            "largeimg" => "css/images/banmap.jpg"
        )
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:59:16.000

(1) 设置一个唯一值（例如县名）作为关联数组的键：

```
$countys['Armagh'] = array(
                         "img" => "css/images/map.jpg",
                         "largeimg" => "css/images/banmap.jpg"
                         );

$countys['Antrim'] = array(
                         "img" => "css/images/map.jpg",
                         "largeimg" => "css/images/banmap.jpg"
                         );

$walks['Armagh'] = array(
                        "Portadown Walk" => 
                        array("img" => "css/images/map.jpg",
                              "location" => "Portadown", 
                              "largeimg" => "css/images/banmap.jpg"),
                        "Another Walk" =>
                        array("img" => "css/images/anothermap.jpg",
                              "location" => "a location",
                              "largeimg" => "...")
                   ); 
```

(2) 在 上`page1`，您可以按名称列出所有这些县：

```
foreach ($countys as $countyname => $county) {

    echo $countyname, $county['img'], "<br />"; // add code for linking to page2
    // pass $countyname with the URL

} 
```

(3) on ，使用从 page1 传递的 URL 参数`page2`读取：`$walks`

```
$countyname = $_GET['countyname'];

foreach ($walks[$countyname] as $walkname => $walk) {

    echo $walkname, $walk['location'], "<br />";

} 
```

# c++ - 如何在作用域枚举上重载 |= 运算符？

> ID：15889414
> 
> 赞同：31
> 
> 时间：2013-04-08T21:34:11.960
> 
> 标签：c++, c++11, enums, operator-overloading, bitwise-operators

**如何`|=`在强类型（作用域）`enum`**（在 C++11、GCC 中）上重载运算符？

我想在强类型枚举上测试、设置和清除位。为什么要强类型？因为我的书说这是很好的做法。但这意味着我必须`static_cast<int>`无处不在。为了防止这种情况，我重载了`|`and`&`运算符，但我不知道如何*在 enum 上*`|=`重载运算符。对于一个类，您只需将[运算符定义放在 class](https://stackoverflow.com/a/4421719/146622)中，但对于在语法上似乎不起作用的枚举。

 *这是我到目前为止所拥有的：

```
enum class NumericType
{
    None                    = 0,

    PadWithZero             = 0x01,
    NegativeSign            = 0x02,
    PositiveSign            = 0x04,
    SpacePrefix             = 0x08
};

inline NumericType operator |(NumericType a, NumericType b)
{
    return static_cast<NumericType>(static_cast<int>(a) | static_cast<int>(b));
}

inline NumericType operator &(NumericType a, NumericType b)
{
    return static_cast<NumericType>(static_cast<int>(a) & static_cast<int>(b));
} 
```

我这样做的原因：这就是它在强类型 C# 中的工作方式：一个枚举只有一个结构，其中包含其基础类型的字段，以及在其上定义的一堆常量。但它可以有任何适合枚举隐藏字段的整数值。

而且似乎 C++ 枚举的工作方式完全相同。在这两种语言中，强制转换都需要从 enum 到 int，反之亦然。但是，在 C# 中，按位运算符默认是重载的，而在 C++ 中则不是。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-08T21:39:45.480

```
inline NumericType& operator |=(NumericType& a, NumericType b)
{
    return a= a |b;
} 
```

这行得通吗？[编译运行：（Ideone）](http://ideone.com/BJXDbw)

```
#include <iostream>
using namespace std;

enum class NumericType
{
    None                    = 0,

    PadWithZero             = 0x01,
    NegativeSign            = 0x02,
    PositiveSign            = 0x04,
    SpacePrefix             = 0x08
};

inline NumericType operator |(NumericType a, NumericType b)
{
    return static_cast<NumericType>(static_cast<int>(a) | static_cast<int>(b));
}

inline NumericType operator &(NumericType a, NumericType b)
{
    return static_cast<NumericType>(static_cast<int>(a) & static_cast<int>(b));
}

inline NumericType& operator |=(NumericType& a, NumericType b)
{
    return a= a |b;
}

int main() {
    // your code goes here
    NumericType a=NumericType::PadWithZero;
    a|=NumericType::NegativeSign;
    cout << static_cast<int>(a) ;
    return 0;
} 
```

打印 3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T22:06:42.693

[这似乎对我有用：](http://ideone.com/LmfzjP)

```
NumericType operator |= (NumericType &a, NumericType b) {
    unsigned ai = static_cast<unsigned>(a);
    unsigned bi = static_cast<unsigned>(b);
    ai |= bi;
    return a = static_cast<NumericType>(ai);
} 
```

但是，您仍然可以考虑为您的`enum`位集合定义一个类：

```
class NumericTypeFlags {
    unsigned flags_;
public:
    NumericTypeFlags () : flags_(0) {}
    NumericTypeFlags (NumericType t) : flags_(static_cast<unsigned>(t)) {}
    //...define your "bitwise" test/set operations
}; 
```

然后，将您的`|`和`&`运算符更改为返回`NumericTypeFlags`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-18T23:46:48.353

我厌倦了枚举算术的所有样板，并转向更像这样的习语：

```
struct NumericType {
    typedef uint32_t type;
    enum : type {
        None                    = 0,

        PadWithZero             = 0x01,
        NegativeSign            = 0x02,
        PositiveSign            = 0x04,
        SpacePrefix             = 0x08
    };
}; 
```

这样我仍然可以`NumericType::type`为了清楚起见传递参数，但我牺牲了类型安全。

我考虑制作一个通用模板类来代替`uint32_t`它提供算术重载的*一个*副本，但显然我不允许从一个类派生一个枚举，所以无论如何（感谢 C++！）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-23T13:22:59.063

> 为什么要强类型？因为我的书说这是很好的做法。

那么你的书不是在谈论你的用例。无范围枚举适用于标志类型。

```
enum NumericType : int
{
    None                    = 0,

    PadWithZero             = 0x01,
    NegativeSign            = 0x02,
    PositiveSign            = 0x04,
    SpacePrefix             = 0x08
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T21:57:04.217

通过组合不同的值来生成新的、未定义的值，你完全违背了强类型范式。

看起来您正在设置完全独立的单个标志位。在这种情况下，将您的位组合成一个数据类型是没有意义的，这样的组合会产生一个未定义的值。

你应该决定你的标志数据的大小（`char`, `short`, `long`, `long long`）并使用它。但是，您可以使用特定类型来测试、设置和清除标志：

```
typedef enum
{
    PadWithZero             = 0x01,
    NegativeSign            = 0x02,
    PositiveSign            = 0x04,
    SpacePrefix             = 0x08
} Flag;

typedef short Flags;

void SetFlag( Flags & flags, Flag f )
{
    flags |= static_cast<Flags>(f);
}

void ClearFlag( Flags & flags, Flag f )
{
    flags &= ~static_cast<Flags>(f);
}

bool TestFlag( const Flags flags, Flag f )
{
    return (flags & static_cast<Flags>)(f)) == static_cast<Flags>(f);
} 
```

这是非常基本的，当每个标志只有一个位时很好。对于屏蔽标志，它有点复杂。有一些方法可以将位标志封装到强类型类中，但它确实是值得的。在你的情况下，我不相信它是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-14T03:58:23.880

在阅读了这个问题之后，我重载了对所有枚举都有效的按位运算符。

```
template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T operator~(const T& value)
{
    return static_cast<T>(~static_cast<int>(value));
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T operator|(const T& left, const T& right)
{
    return static_cast<T>(static_cast<int>(left) | static_cast<int>(right));
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T& operator|=(T& left, const T& right)
{
    return left = left | right;
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T operator&(const T& left, const T& right)
{
    return static_cast<T>(static_cast<int>(left) & static_cast<int>(right));
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T& operator&=(T& left, const T& right)
{
    return left = left & right;
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T operator^(const T& left, const T& right)
{
    return static_cast<T>(static_cast<int>(left) ^ static_cast<int>(right));
}

template<typename T, typename = std::enable_if_t<std::is_enum_v<T>>>
inline T& operator^=(T& left, const T& right)
{
    return left = left ^ right;
} 
```*

# php - $this->{$this->varname}() 语法

> ID：15889418
> 
> 赞同：1
> 
> 时间：2013-04-08T21:34:28.000
> 
> 标签：php

[http://www.php.net/manual/en/functions.variable-functions.php#24931](http://www.php.net/manual/en/functions.variable-functions.php#24931)

该函数执行类似`$this->{$this->varname}()`. 我尝试了它并确认这是有效的语法，但它让我想知道...... php.net 在哪里讨论在这样的变量名中使用大括号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:40:22.177

[变量变量](http://docs.php.net/manual/en/language.variables.variable.php)：

> 类属性也可以使用变量属性名称来访问。...
> 
> 也可以使用花括号来明确界定属性名称。

请参阅该页面上的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:42:43.767

为什么它不应该工作？

这些是变量变量/函数名称。

```
$f = "time";
$f(); // returns the actual time 
```

现在是一样的，只是在对象上下文中（[http://php.net/manual/en/functions.variable-functions.php](http://php.net/manual/en/functions.variable-functions.php)）：

```
$object->$f; // calls the method with the name $f in $object 
```

现在，要说它是带有 name 的方法`$this->varname`，您需要编写`$this->{$this->varname}`as`$this->$this->varname`将被解释为您不想要`($this->$this)->varname`的结果。`in $this->{$this->__toString()}->varname`

# .net - 使用 linq 生成完全动态的 SQL

> ID：15889419
> 
> 赞同：1
> 
> 时间：2013-04-08T21:34:31.523
> 
> 标签：.net, sql, linq, dynamic-sql

我一直在使用 Linq to Entity Framework 并且一直很喜欢它。

但是，我现在需要在 sql server 上查询一个完全动态的数据库表。我不知道编译时的表名、结构或列名。

有没有办法使用类似 Linq 的语法来编译 SQL 查询？我在运行时获得了表名和列名，我需要使用 order by 进行复杂的搜索（例如 where cola = x and (cola = y or colb = z) or (colc in n..p)）并可能分组

我发现了一些看起来很有希望的东西，[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，但我不明白a）如何动态选择任意表b）如何防止注入。作者说“第 2 部分”中还有更多内容——但我找不到任何指向它的链接，并且该博客来自 2008 年。

我在想象一些语法，比如

```
public void SelectPizzasCheaperThan(int price) {
    var table = con.selectDB(tablename);
    var result = table.where(x => x.Field<string>("Food") = "Pizza");
    result = result.where(x => x.Field<int>("price") < price);
    result = result.select(x => new {Name = field<string>("Name"), Price = field<int>("price")}).ToList();
} 
```

（显然，那些硬编码的字符串将是在运行时定义的任意变量）

已经有这样的事情了吗？特别是，来自微软的任何东西？

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:44:22.977

参数是注射安全的。

[SqlCommand.Parameters 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

对 SqlDbType 使用 switch (if elseif) 但您可以动态构建它们。

# php - 创建目录 PHP 时用户是“nobody”

> ID：15889420
> 
> 赞同：1
> 
> 时间：2013-04-08T21:34:32.070
> 
> 标签：php, apache

我有以下代码：

```
 mkdir($thumb_dir) 
```

它在正确的位置创建一个目录，但是当我查看权限时

```
Owner : nobody
Group : nobody 
```

我没有 shell 访问权限`chown`。如何防止将用户分配为nobody，以及如何删除我已经创建的文件夹，因为我没有权限。

这是一个godaddy共享服务器...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:48:53.453

您可以使用 rmdir() 删除空目录。

没有人是运行 apache 进程的用户。您不能从 php 中更改所有者，也不能在没有 root 权限的情况下使用 shell 访问（或对其进行任何更改）删除该文件夹；你只能通过 php 来操作它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:52:21.057

这是因为 Web 服务器是由`nobody`用户运行的。因此，您在文件系统上所做的一切都将使用`nobody`.

您通常无法对此进行任何更改。您必须管理与您拥有的 FTP 用户不同的 Apache 用户。如果您使用 PHP 创建目录，则只能使用 PHP 删除它（`rmdir()`在目录为空时使用），如果您创建文件，您很可能也必须从 PHP 中删除它们。

我建议您使用 FTP 用户创建目录结构，并因此尽可能少地保留 PHP 生成的内容。

您可以使用许可授权（使用`chmod`）来缓解症状，但这在安全方面通常不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:45:22.167

用于`rmdir($thumb_dir);`删除它。

您不能在共享服务器上更改您的 PHP 用户。

# entity-framework - 自相关外部参照表的代码优先映射

> ID：15889423
> 
> 赞同：1
> 
> 时间：2013-04-08T21:34:43.773
> 
> 标签：entity-framework, code-first

我已经阅读了 StackOverflow 上的几个线程，但无法弄清楚这一点。我希望有人可以提供一些建议。我有一些看起来像这样的 POCO 类：

```
Person
{
  int PersonCode {get; set;}
  ...
  virtual List<PersonContact> {get; set;}
}

PersonContact
{
  int PersonPersonCode {get; set;}
  int ContactPersonCode {get; set;}
  int PersonContactTypeCode {get; set;}

  virtual PersonContactType {get; set;}
  virtual Person Person {get; set;}    // not sure I really need this one
  virtual Person Contact {get; set;}
} 
```

每个 Person 记录将有零到多个 PersonContact 记录。每个 PersonContact 记录将一个 Person 记录链接到另一个 Person 记录，并使用 PersonContactTypeCode 指示两个 Person 记录之间的关系类型。

我需要能够对此进行映射，以便可以将 Person 记录导航到他的相关 PersonContact 记录。像这样的东西：

```
var john = new Person(...);
var david = new Person(...);
john.PersonContacts.Add(new PersonContact
  {
    Contact = david,
    PersonContactType = ... // manager
  }); 
```

进而

```
john.PersonContacts
  .Where(c => c.PersonContactType.PersonContactTypeCode == "manager")
  .FirstOrDefault(); 
```

会回来

```
david 
```

我已经尝试过很多 Data Annotations 和 Fluent API 的组合，以至于我几乎不记得我从哪里开始了。我似乎对这个组合有最好的运气：

```
modelBuilder.Entity<Person>()
    .HasMany(entity => entity.PersonContacts)
        .WithRequired(person => person.Person)
        .HasForeignKey(xref => xref.PersonPersonCode)
        .WillCascadeOnDelete(false);

modelBuilder.Entity<Person>()
    .HasMany(entity => entity.PersonContacts)
        .WithRequired(xref => xref.Contact)
        .HasForeignKey(entity => entity.ContactPersonCode)
        .WillCascadeOnDelete(false); 
```

但是，当我尝试向一个人添加多个 PersonContact 时，我收到此错误：

```
Multiplicity constraint violated. The role 'Person_PersonContacts_Source' of the
relationship '...Entities.Person_PersonContacts' has multiplicity
1 or 0..1. 
```

我真的很感激任何帮助，我现在完全被难住了。顺便说一句，如有必要，我愿意更改这些 POCO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:33:16.447

试试这个：

```
public class Person
{
   [Key]
   [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
   public int PersonId {get; set;}
   ...
   public virtual ICollection<PersonContact> PersonContacts {get; set;}
}

public class PersonContact
{
   [Key]
   [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
   public int ContactId {get; set;}

   [ForeignKey("Person"), DatabaseGenerated(DatabaseGeneratedOption.None)]
   public int PersonId {get; set;}       

   public virtual Person Person {get; set;}         
} 
```

我已经使用`Property Mapping`而不是`Fluent Mapping`像你在你的尝试中尝试过的那样。如果您有任何问题，请告诉我。至于你的两个实体之间的关系，这就是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T23:30:42.193

我猜这是因为您使用相同的导航属性链接到`PersonContact.Person`and `PersonContact.Contact`。

假设：

```
Person
{
  int PersonCode {get; set;}
  ...
  virtual ICollection<PersonContact> PersonContacts {get; set;}
} 
```

尝试类似：

```
modelBuilder.Entity<PersonContact>()
    .HasRequired(x => x.Person)
        .WithMany(x => x.PersonContacts)
        .HasForeignKey(x => x.PersonPersonCode)
        .WillCascadeOnDelete(false);

modelBuilder.Entity<PersonContact>()
    .HasRequired(x => x.Contact)
        .WithMany()
        .HasForeignKey(x => x.ContactPersonCode)
        .WillCascadeOnDelete(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:42:07.377

我设法使用类似这样的东西来完成类似的工作

在我的域类中

```
public class PersonContact
{
    public int Id { get; set; }

    [Required]
    public virtual Person ContactPerson { get; set; }

    [Required]
    public virtual Person Person { get; set; }

[Required]
public int ContactType { get; set; }

}

public class Person
{
int Id { get; set; }

    private readonly  List<PersonContact> _contacts = new  List<Contact>();

    public virtual  List<PersonContact> Contacts
    {
        get
        {
            return this._contacts;
        }
    }
} 
```

在我的上下文中

```
 public DbSet<Person> People { get; set; }
 public DbSet<PersonContact> Contacts { get; set; } 
```

我在迁移中进行了此更改，并且必须编辑生成的创建表代码以将 Cascade delete 设置为 false，以便在 PersonContact 表内将人员表的 fwo 外键设置为 false。

我在 PersonContact 表中得到一个额外的 Person_Id1 列。它似乎填充了与 Person_Id 相同的数据。当我创建绑定源时，EF 似乎需要这 - 因为没有它我会出错。

我不会将显式外键放入，让迁移创建它们。

# python - 在 Google App Engine (GAE) 上运行 Boto

> ID：15889424
> 
> 赞同：6
> 
> 时间：2013-04-08T21:34:49.823
> 
> 标签：python, google-app-engine, amazon-ec2, boto

我是 Python 新手，希望获得有关如何在 GAE Python 应用程序上“导入 boto.ec2”以控制 Amazon EC2 实例的帮助。我正在使用 PyDev/Eclipse 并在我的 Mac 上安装了 boto，但仅使用“import boto”不起作用（我得到：：没有名为 boto.ec2 的模块）。我读过 GAE 支持 boto，但我无法在任何地方找到说明。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T00:20:49.250

听起来您还没有将 boto 代码复制到应用引擎目录的根目录。

Boto 与 GAE 一起使用，但 Google 不向您提供代码。将其复制到 GAE 目录的根目录后，开发服务器应该可以工作，并且在您下次上传后，它也可以在产品服务器上工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T16:52:48.200

符号链接应该足够了。在您的项目根目录中：

```
ln -s /path/to/boto/boto boto 
```

谷歌应用引擎会在部署你的应用时上传它。

# bash - 检查文件中的变量值并根据需要替换 Bash 脚本

> ID：15889425
> 
> 赞同：0
> 
> 时间：2013-04-08T21:34:53.053
> 
> 标签：bash, variables, if-statement, sed

这个问题与帖子有关： [使用循环和 sed Bash 脚本在不同目录中的文件中设置变量值](https://stackoverflow.com/questions/15708135/setting-variables-value-in-a-file-in-different-directory-using-loops-and-sed-bas)

我正在寻找一种方法来检查文件中的变量值并根据需要进行更新。要更改值，我执行以下操作：

```
#!/bin/bash

cd '/home/me/'
source server.properties
server_var="$server_name"
echo "$server_var"
echo "$application_name"
if [ "$server_var" != "server1" ]; then
    echo "Uncorrect Value"
    sed -i -e 's@server_name=$server_var@server_name=server1@g' server.properties
fi
cd '/home/test/' 
```

感谢您的建议，现在我的 if 语句可以工作，但是该`sed`命令不会更新文件中的变量值。关于这个问题，你能指出我正确的方向吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:48:07.663

```
if [ -n "$server_name" ]
then
    sed ...
fi 
```

顺便说一句，我认为您的`set`命令不能设置`$server_name`. 它将设置`$1`,`$2`等。

# javascript - 是否可以在 d3 中将一个（或多个）布局嵌套在另一个不同的布局中？

> ID：15889435
> 
> 赞同：2
> 
> 时间：2013-04-08T21:35:23.583
> 
> 标签：javascript, layout, d3.js

我正在尝试构建一个强制导向的布局，其中连接的节点有自己的内部布局，而不仅仅是递归的强制导向布局（我相信，层次结构布局可以实现）。“内部”布局将是自定义的，但为了说明起见，假设我希望节点在内部具有分区布局。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T03:24:46.090

我的问题真的是双重的：

1.  您能否以合理的方式使用 D3 实现不止一种布局样式（例如，力导向图中的气泡图），或者 D3 是否是此类事情的错误工具，*以及*
2.  您可以为这些布局中的每一个使用 D3 布局，还是必须自定义所有内容。

最后，设计改变了，不再需要这种奇怪的场景。不过，我对 D3 更加熟悉，我想我可以回答。

是的。可以办到。每个布局都是它自己的离散对象，有它自己的工作数据，并且可以被赋予它自己的 DOM 元素来填充。如果您可以管理两者之间的交互（确保一个仅在需要时覆盖另一个更改），那么创建两个甚至共享相同数据和 DOM 输出的布局可能会起作用。

我知道你*可以*肯定地做的是手动操作D3 正在做的*任何事情。*实际上，在开发过程中，我确实在同一页面上有两个布局，想想看。我用预先确定的 x/y 坐标布置了一半的图形，并允许其余部分通过力导向布局来布置。第一个集合，即手动放置的节点，可以通过其他逻辑而不是预先确定的坐标来放置，并且功能大致相同。

# php - FB 批量请求：获取托管页面的配置文件图像

> ID：15889436
> 
> 赞同：0
> 
> 时间：2013-04-08T21:35:24.883
> 
> 标签：php, facebook, facebook-graph-api, batch-file, fbconnect

您好，我试图获取我管理的页面的所有配置文件图像。我试过这样的事情：

> // 我的循环：

```
$request[] = array(
                 'method' => 'POST',
                 'relative_url' => '/'.$account->id.'/?fields=picture.type(large)&access_token='.$account->access_token.''
             ); 
```

进而：

```
 $batchResponse = $this->facebook->api('?batch='.json_encode($request),'POST',array('access_token' => $this->facebook->getAccessToken())); 
```

没有成功 ：/

我还尝试在body标签中设置页面的access_token：

```
 $request[] = array(
       'method' => 'POST',
       'relative_url' => '/'.$account->id.'/?fields=picture.type(large)'
       'body' => '&access_token='.$account->access_token.''
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:00:12.387

您的[PHP 脚本应该让您登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)。如果登录成功，SDK 将为您管理 access_token。

然后发出这个请求：

```
$result = $this->facebook->api('/me/accounts?fields=name,picture.type(large)', 'GET'); 
```

如果您不想进行身份验证，则可以传递一个 id 数组：

```
$page_ids = array( _PAGE_ID_1, _PAGE_ID_2, ...);
$result = $this->facebook->api('/?ids=' . implode(',',$page_ids) . '&fields=name,picture.type(large)', 'GET'); 
```

对于这些查询，您正在*获取*数据，因此您应该使用`GET`请求。在 Facebook API 中，`POST`请求仅在您向 Facebook 发送数据时使用。

# dropbox-api - 如何判断 Dropbox API 503 是每个用户还是每个应用程序

> ID：15889438
> 
> 赞同：3
> 
> 时间：2013-04-08T21:35:30.107
> 
> 标签：dropbox-api

我最近有一个用户以非常高的速度访问 Dropbox API 并引起了大量的 503 响应。根据[Dropbox API 文档](https://www.dropbox.com/developers/core/api)，当“您的应用发出太多请求并且受到速率限制”时会导致 503。503 可以在每个应用程序或每个用户的基础上触发。

503 响应的 JSON 正文如下：

```
{"error": "Service Unavailable"} 
```

这并没有给我太多关于我受到限制的信息。每个应用程序或每个用户。这可能非常重要，因为它会影响我是尝试回退和限制对 Dropbox 的所有应用程序请求，还是仅针对特定用户的请求。

有什么方法可以检测出这种反应是在什么基础上发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T17:01:45.090

[如果您提出要求](https://www.dropbox.com/developers/contact)， Dropbox 将帮助您解决或提高您的速率限制。我认为他们故意对速率限制的含义模棱两可。速率限制的存在是有原因的，我认为 Dropbox 或任何人都不想泄露规避它们的秘密。

来自截至 2014 年 7 月 8 日的核心文档

[https://www.dropbox.com/developers/core/docs](https://www.dropbox.com/developers/core/docs)

如果您仍在使用 OAuth 1.0a 作为身份验证，您将收到 503。如果您使用 OAuth 2.0，您将收到 429。但是，是的，他们不清楚是每个应用程序还是每个用户。

他们在[最佳实践](https://www.dropbox.com/developers/core/bestpractices)页面中提到，如果您需要解决这些限制，您应该[联系开发人员团队。](https://www.dropbox.com/developers/contact)

# javascript - 如何水平扩展内联跨度的可点击区域？

> ID：15889439
> 
> 赞同：1
> 
> 时间：2013-04-08T21:35:39.170
> 
> 标签：javascript, css, html

我有两个跨度，单击时都会触发一个动作：

```
<div>
    <span>This is a multiline<br/>
    chunk of text.</span>  <span>And this is a <br/>
    second one.</span>
</div> 
```

我希望用户能够单击包含 div 中的任何位置（其样式看起来像一个框），并将单击与一个或另一个跨度相关联。现在，用户必须点击实际文本才能触发点击事件。

这是它的样子：http: [//jsfiddle.net/bJJLF/1/](http://jsfiddle.net/bJJLF/1/)。

我希望跨度看起来像一个单独的段落（即，我可能需要保持它们的样式`display: inline`）。会有换行符，但我很灵活：它们是如何创建的（所以我可以在`</br>`必要时杀死 s ）。

是否有一个我缺少的简单的 css 解决方案，或者我是否必须在周围的框上放置一个点击处理程序并进行坐标数学以确定点击属于哪个跨度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:49:48.057

好的，所以我找到了一个到目前为止看起来相当不错的纯 CSS 解决方案。任何有关改进它的建议都会有所帮助。现在的主要限制是您需要知道包含框的宽度，这是我可以使用的限制。

这个想法是您在跨度上创建一个绝对定位的伪前元素。你给它一个比 span 低的 z-index，你将它的高度设置为 span 高度的 100%，将 left 设置为 0，宽度等于容器的宽度：

```
span:before {
  content: '';
  display: inline-block;
  z-index: 1;
  width: 400px;
  height: 100%;
  position: absolute;
  left: 0px;
} 
```

跨度必须相对定位：

```
span {
  z-index: 2;
  position: relative;
} 
```

这是更新的示例（现在带有悬停效果！）：http: [//jsfiddle.net/bJJLF/7/](http://jsfiddle.net/bJJLF/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:42:02.147

您可以通过向您的跨度添加一些 id 来更接近您想要的行为，以便我们可以识别它们：

```
<div>
    <span id="span1">This is a multiline<br/>
    chunk of text.</span>  <span id="span2">And this is a <br/>
    second one.</span>
</div> 
```

然后更改事件处理程序以侦听点击`<div>`，然后检查事件对象，该对象将包含点击冒泡的目标元素：

```
$('div').click(function(e) { 
    alert($(this).text() + ' from ' + e.target.id); 
}); 
```

一个[更新的小提琴](http://jsfiddle.net/bJJLF/2/)。

如果点击不是来自 a ，您可能希望忽略它`<span>`：

```
$('div').click(function(e) {
    if (e.target.tagName.toUpperCase() === 'SPAN') {
        alert($(this).text() + ' from ' + e.target.id); 
    }
}); 
```

另一个[小提琴](http://jsfiddle.net/bJJLF/4/)。

如果您只想从单击的跨度中提醒文本：

```
$('div').click(function(e) {
    if (e.target.tagName.toUpperCase() === 'SPAN') {
        alert($(e.target).text() + ' from ' + e.target.id); 
    }
}); 
```

最后[一把小提琴](http://jsfiddle.net/bJJLF/5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:59:22.867

将处理程序添加到外部 div，并将处理程序添加到跨度。当你处理跨度时，停止传播，这样 div 的处理程序就不会被调用。[http://jsfiddle.net/mgzke/](http://jsfiddle.net/mgzke/)

```
<div class="wrap">
    <span class="firstspan">This is a multiline<br/>
    chunk of text.</span>  <span>And this is a <br/>
    second one.</span>
</div>

// Using jQuery for simplicity only
$('.wrap').click(function(){
   console.log('Click in div');
});

$('.wrap .firstspan').click(function(e){
    e.stopPropagation();
   console.log('Click in spans');
}); 
```

# entity-framework - Breeze JS 向元数据添加静态查找字典

> ID：15889440
> 
> 赞同：0
> 
> 时间：2013-04-08T21:35:45.327
> 
> 标签：entity-framework, breeze

我的一个域模型有一个枚举属性，我喜欢为其创建一个下拉框，但是 EFContextProvide 元数据函数不会自动导入枚举实体类型供我访问它，所以我创建了一个我喜欢的静态字典添加到元数据映射，充当查找表。如何添加 Enum 实体类型，以便调用：

```
breeze.EntityManager.createEntity(myEnum,...) 
```

现在，我收到以下错误：

```
Error: Unable to locate an 'Type' by the name: myEnum 
```

有什么建议吗？

更新：（我刚刚添加了函数调用的`enumType`信息）`Metadata`

```
"enumType":{"name":"Plugins","isFlags":"false","underlyingType":"Int32","member":["name":"Custom","value":"0"},{"name":"PluginOfTypeA","value":"1"},{"name":"PluginOfTypeB","value":"2"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:39:29.537

感谢@Jay 的回复，我的方向是正确的。以下是我可以说的关于处理 Enum 的内容：

我在服务器上创建了一个可以单独调用的查找列表，以填充下拉列表。我有一个常规数组，我根据结果的成功承诺进行初始化，列出它`data.results[0].myEnumLookup`，然后在 Viewmodel 上，我访问该属性并设置为，`ko.observableArray()`以便我可以在我的视图中引用它。确保`value:`将标签的属性设置`select`为 item 的值。

但这样做的问题是，在保存时间，它没有读取 Enum 值，而是将其视为文本，所以它失败了，所以

更强大的解决方案：

在我们的应用程序中，我们碰巧真正受益于 Enum 及其预编译值，因为我们在其他 POCO 项目中使用这些 Enum Domain 模型，所以我结束了创建一个 EF`DbSet`和适当的表，该表将填充我的所有Enum值，我可以将它们保存到数据库中，所以现在我们有了数据库中的项目列表，并且我为枚举创建了单级继承，所以在我的控制器中，我得到了一个`IQueryable`可以获取所有这些枚举的方法，并且在微风应用程序中，在我的配置文件中，我定义了枚举的类型，然后我将根据我的配置中的不同类型填充项目列表，因此我可以在我的视图中引用它并将其绑定到`ko.observableArray()`. 同样在我原来的课程中，我不再提到枚举，我将创建`MyEnumId`以及`virtual MyEnum`将在我的 EF5 设置中自动执行映射的属性。

吸取的教训，虽然 .NET4.5 和 EF5 中的 Enum 可以存储和回读，但在 SPA 前端技术方面不太实用，所以我更喜欢整数值，只管理枚举在它之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:20:58.653

不完全确定我理解这个问题。“枚举实体类型”是指只有固定数量的可能实例的“EntityType”吗？如果是这样，您可以简单地将这些实体/实例的整个集合查询到客户端并将它们直接添加到您的静态字典中。由于集合在概念上是不可变的，因此您可以在会话开始时对其进行查询。此外，您永远不需要创建任何这些“实体枚举”的实例，因为您始终可以从字典中提取它们。

但也许我不明白你的问题。

# php - 多维数组中的 foreach

> ID：15889442
> 
> 赞同：2
> 
> 时间：2013-04-08T21:35:47.087
> 
> 标签：php, arrays, codeigniter, multidimensional-array, foreach

我正在尝试在 PHP中练习/学习*foreach循环。*我了解基本的foreach。但我在多维度上挣扎。

我有一个数组来测试它：

```
$data = array(
        array('New York', 'New York City'),
        array('hotel', 'lodging','motel'),
        array('cheap')
    ); 
```

我想做的是循环遍历每一个可能的组合并将其分配给它自己的数组（稍后将显示为列）。

```
First column ('New York', 'New York City')
second column ('New York hotel', 'New York lodging', 'New York motel')
third column ('New York City hotel', 'New York City lodging', 'New York City motel')
fourth column ('New York hotel cheap', 'New York lodging cheap', 'New York motel cheap')
fifth column ('New York City hotel cheap', 'New York City lodging cheap', 'New York City motel cheap') 
```

我将如何做到这一点？我已经尝试了几件事，但还没有接近。

**更新** 我的最终目标是让个人能够获取项目列表，并尝试找到所有可能的关键字。然后，这将有助于识别他们可以考虑使用的不同 SEO 关键字。所以有时 Data 数组可能有 2 个子数组，有时它可能有 3 或 4 个。所以它需要有点动态。

**第一次解决方案尝试**

```
public function recurseful($start, $args)
{
    if (is_array($args))
        {
            foreach ($args[0] as $value)
            {
                $this->output[] = trim("{$start} {$value}");
                if (count($args) > 1)
                {
                    $this->recurseful($value, array_slice($args, 1));
                }

            }
        }
    return;
} 
```

但是，这会在一个数组中返回我的所有单词。这不符合我正在寻找的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:07:12.773

您需要做的是创建一个函数，它会递归地为您执行此操作，例如......

```
// function for building recursive tree arrays
function recursive($array) {
    foreach($array as $key => $value) {
        if(is_array($value)) {
            // if it is an array, it will run again
            recursive($value);
        } else {
            // do something with values here
        }
    }
    // return your result set here
}

$data = array(
        array('key', 'key2'),
        array('word', 'word2','word3'),
        array(array('more','levels','than','you','need'), 'then','some','more')
    );

$result = recursive($data); 
```

这很粗糙，但取决于您在做什么，您只需添加您的流程即可得出最终的总结果。

基本上，不管你的数组有多少深度，或者数组结构的顺序，它都会继续运行。您需要做的就是确保您发送（返回）函数每次扫描的结果，这取决于您对每个级别所做的事情。

不过，它应该能让你顺利上路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:04:27.837

好的，这是一个非递归解决方案，我相信只要您的`$data`数组保持二维，它就会遵循所需的模式。我不会承认这实际上花了我多少次尝试......

```
$cols = array(array_shift($data));
while($row = array_shift($data))
  array_walk(count($cols)<=1 ? $cols : array_slice($cols, 1), 
  function($col) use($row, &$cols){
    foreach($col as $i => $prev)
      foreach($row as $j => $word)
          $tmp[count($cols)===1?$i:$j][] = "$prev $word";
    foreach($tmp as $t) $cols[] = $t;
  }); 
```

[运行代码](http://ideone.com/NxWcNj) ^(* *PHP 5.4 +*)

* * *

稍微偏离主题但值得一提 - 我不知道您将这些“关键字”放入什么上下文中，但像这样向它们发送垃圾邮件可能会构成糟糕的 SEO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:49:27.440

好的。经过几个小时和大量的工作合作：这里是：

```
function permutate($data, $limit){
    $this->limit = $limit;
    $this->data = $data;
    $this->numLevels = count($this->data);

    $this->possiblePermutations = 1;
    foreach ($this->data as $array){
        $this->possiblePermutations *= count($array);
    }
    for ($i = 0; $i < $this->numLevels - 0; $i++){
        $this->permutations[$i] = array();
    }

    $this->recurse(0, 0, '');

    return $this->permutations;
}

private function recurse($currentLevel, $level, $string){
    if ($this->numPerms == $this->limit) 
        return;

    foreach ($this->data[$level] as $val){
        if ($this->numPerms == $this->limit) 
            return;

        $newString = "$string $val";
        if ($level == $currentLevel){
            $this->permutations[$level][] = trim($newString);
            $this->numPerms++;
        }

        if ($level < $this->numLevels - 1 AND $level <= $currentLevel){
            $this->recurse($currentLevel, $level + 1, $newString);
        }
    }

    if (! $level AND $currentLevel < $this->numLevels){
        $this->recurse($currentLevel + 1, 0, '');
    }
} 
```

我更改了一些变量名称等。但这非常有效！

# html - 输入提交应在父窗口中打开

> ID：15889444
> 
> 赞同：3
> 
> 时间：2013-04-08T21:35:58.400
> 
> 标签：html, input, window, submit, parent

我有一点`<form>`HTML，（用于登录某些东西），但是表单中的页面`<iframe>`...</p>

当您单击提交按钮 ( `<input type="submit" value="submit">`) 时，它应该会在父页面中打开您登录的页面……我该怎么做？

如果可能的话，也许可以通过使用而不是`<input>`just`<a>`来实现？

# c++ - -1073741811(0xc000000d) 错误 opencv

> ID：15889455
> 
> 赞同：0
> 
> 时间：2013-04-08T21:36:44.843
> 
> 标签：c++, visual-studio-2010, opencv, error-handling, runtime-error

我使用 Visual Sudio 10 作为 IDE（在 windows 7 64 位上）安装了 OpenCV 版本 2.4.3。问题是，一旦我安装了它并且正在运行一个简单的应用程序，比如加载图像，它就会给我一个错误

`The program '[8120] pms1.exe: Native' has exited with code -1073741811 (0xc000000d)`

对于我尝试运行的任何代码，我都会遇到相同的错误。我没有收到任何构建错误。构建成功，但是当我运行它时，它会抛出这个。

注意：给我错误的示例代码

```
#include <opencv\cv.h>
#include <opencv\highgui.h>
using namespace cv;

int main()
{
  Mat image;

  VideoCapture cap;
  cap.open(0);

  namedWindow(“window”, 1);

  while(1) {
    cap>>image;

    imshow(“window”, image);
    waitKey(33);
  }

  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:50:05.283

确保您的可执行文件和它调用的 opencv dll 文件都是 32 位或 64 位的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:19:08.430

很可能是捕获接口无法打开设备`0`，因此`cap>>image;`可能是导致错误的原因。你只是不知道它，因为你忘记检查成功`open()`：

```
VideoCapture cap;
cap.open(0);
if (!cap.isOpened())
{
     // print error message and 
     // quit the application
} 
```

尝试为 传递其他值`open()`，例如 -1 或 2。

# html - 页面链接中的 HTML

> ID：15889456
> 
> 赞同：0
> 
> 时间：2013-04-08T21:36:48.613
> 
> 标签：html, css

我知道您可以使用 html 锚链接到某个页面的某些部分。但是，我无法让它适用于我目前拥有的 css 模板。所提供格式的导航有效，但在页面的一个小节内，#name 链接停止工作。我尝试将 id 放在标题、标签和面板 id 中，但都不起作用。这里是源

查看源代码：http: [//matthewpiatetsky.com/cs103/](http://matthewpiatetsky.com/cs103/)

特别是#p1的链接不起作用

# sql - 在 SQL 中设置数值限制

> ID：15889459
> 
> 赞同：0
> 
> 时间：2013-04-08T21:36:57.540
> 
> 标签：sql

我是 SQL 新手，我有一个带有 group_cap 列的表组。如何在SQL中指定group_cap列的值不能大于4。例如A组不能超过4人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:42:04.250

在表上创建一个约束。

```
ALTER TABLE [group] ADD CONSTRAINT
    CK_group_cap CHECK (group_cap <= 4) 
```

对于一系列值，使用`between`

```
ALTER TABLE [group] ADD CONSTRAINT
    CK_group_cap CHECK (group_cap between 1 and 4) 
```

# mono - 我在哪里可以下载 REAL MonoDevelop Windows 二进制文件？

> ID：15889462
> 
> 赞同：24
> 
> 时间：2013-04-08T21:37:03.950
> 
> 标签：mono, monodevelop, xamarin, xamarin-studio

monodevelop.com 网站只是将我带到这个“Xamarin Studio”的东西，它对免费版本的使用有严格的限制，而且定价几乎与付费版本的 Visual Studio 一样糟糕！MonoDevelop for Windows 死了吗？我想做的就是在不安装 Linux 的情况下开发一个 GTK# 应用程序！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T21:55:57.603

[SourceForge 上](http://sourceforge.net/projects/monodevelop.mirror/files/MonoDevelop%203.0.6/)仍有 3.0.6 版的 .msi 可供下载，如果您真的需要 4 版，则必须[自己构建](http://monodevelop.com/Developers/Building_MonoDevelop)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T22:04:44.453

您无需付费即可使用 Xamarin Studio 开发 GTK# 应用程序。使用 Xamarin Studio 桌面版可以创建的内容没有任何限制（您的想象力除外！）。

如果您想为 Android 开发应用程序，您只需要付费（甚至对于 Android 应用程序，也有免费的 Starter 版本）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-31T00:39:24.847

老实说，从源代码构建 MonoDevelop 甚至在某些平台上安装是一件非常痛苦的事情。

我做了很多研究并工作了几个小时，但仍然无法构建 MonoDevelop，最终决定使用 SharpDevelop 4.3 ( [http://www.icsharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/) ) 而我必须告诉大家 SharpDevelop**易于**安装。还有其他替代品，例如 Webbo、QuickSharp 和 Xamarin Studio，但我还没有尝试过所有这些。

如果构建 MonoDevelop 这么容易，他们会自己构建并放置一个 exe 或 msi 文件，甚至是一个包含所有二进制文件和依赖项的 zip 文件以供下载。

他们有一个类似的问题，在 Ububtu 或 PC BSD 上安装最新版本的 MonoDevelop 时非常烦人。

首先，我认为它的 Git 存在问题，但每次我从其 Git 存储库下载 MonoDevelop 源时，zip 文件都小于实际大小并且总是损坏。

无论如何，我尝试了几次并设法下载了源代码。然后我下载并安装了所有先决条件。

我什至无法在 Microsoft Visual C# 2010 x86 (express) 中打开解决方案文件。

[然后我决定按照http://monodevelop.com/Developers/Building_MonoDevelop](http://monodevelop.com/Developers/Building_MonoDevelop)中的建议使用 MonoDevelop 3.0.6 进行构建

当我尝试安装 MonoDevelop 3.0.6 时，它一直说我需要安装 GTK# 2.12.9 或更新版本，即使我已经安装了 GTK# 2.12.22（最新版本）。

最后我真的很沮丧，决定使用 SharpDevelop 4.3 作为 M$ Visual Studio 和 MoNo-Develop 的替代品。

# android - 如何覆盖 2 个指定位置的图像视图

> ID：15889470
> 
> 赞同：1
> 
> 时间：2013-04-08T21:37:50.680
> 
> 标签：android, android-imageview

我想放置 2 个 ImageView，一个在另一个之上。这是一个正方形和圆形的示例。

![在此处输入图像描述](https://i.stack.imgur.com/IBlTy.png)

我怎样才能做到这一点？我只在运行时知道要使用哪些图像，所以我无法在 xml 文件中指定它们。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T23:41:47.117

您可以使用[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)将视图相互堆叠。

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:src="@drawable/img_green" />
    <ImageView 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:src="@drawable/img_red"/>
</FrameLayout> 
```

然后您可以设置`android:layout_margin=""`正确定位`ImageView`s。

请注意，最后一个孩子`FrameLayout`是最顶部的可见视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:56:20.467

您应该以编程方式指定它们在布局中的位置，这并不完全是您所要求的，但您将了解您必须做什么：

[如何使用两个按钮一个在另一个之上以编程方式创建一个 RelativeLayout？](https://stackoverflow.com/questions/4979212/programmatically-creating-a-relativelayout-in-android)

由于不推荐使用绝对布局，因此您可能必须使用边距。

# javascript - 下拉菜单 onclick 返回网页顶部

> ID：15889471
> 
> 赞同：1
> 
> 时间：2013-04-08T21:37:56.810
> 
> 标签：javascript, css

我有这个简单的 html 代码

```
<html>
<body>
<select name="country" id="country">
<option value="1">Falkland Islands (Malvinas)</option>
<option value="2">canada</option>
<option value="3">Finland</option>
<option value="4">France</option>
<option value="5">United Kingdom</option>
<option selected="selected" value="12">United States</option>
</select>
</body>
</html> 
```

如果此下拉菜单位于网页底部，并且每当用户选择菜单上的选项之一时，用户会自动转到网页顶部而无需重新加载，我知道这很简单但我做不到，希望你们帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:44:59.797

这应该会为您处理...将其添加到您的`<head>`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
        $("select#country").change(function() {
          $("html, body").animate({ scrollTop: 0 }, "slow");
          return false;
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:07:34.620

在`head`您的文件中，放置这个小片段：

```
<script type="text/javascript">
    window.onload = function(){
        document.getElementById("country").onchange = function(){
            window.scrollTo(0, 0);
        };
    };
</script> 
```

对于这样的简单操作，无需加载 jQuery；为 Vanilla JavaScript 可以轻松处理的东西包含这么大的文件是没有意义的。

# c# - 此 LINQ JOIN 是否存在某种语法错误？

> ID：15889477
> 
> 赞同：13
> 
> 时间：2013-04-08T21:38:14.203
> 
> 标签：c#, linq, entity-framework, join

我查看了 SO 和[其他站点上的](http://www.dotnetperls.com/join)[各种问题](https://stackoverflow.com/questions/3217669/how-to-do-a-join-in-linq-to-sql-with-method-syntax)，这*似乎*是在 LINQ 中执行 a 的正确语法，但它只是不起作用：*`JOIN`*

 *```
var stages = (from stage in entityManager.TPM_TASKSTAGE select stage);
var results = (from task in pv.TPM_TASK
               join st in stages on st.STAGEID equals task.STAGEID
               where task.TASKTYPE == "Solution"
               select new SolutionTask()); 
```

暂时忽略这样一个事实，即我实际上并没有*选择*任何感兴趣的东西，但我希望能够`st.NAME`访问`TPM_TASK`. 这两个表由 链接`STAGEID`。我得到编译器错误：

> 名称“st”不在“equals”左侧的范围内。考虑交换 'equals' 两边的表达式。

在 LINQ 连接表达式中，两者`st`都有`task`红色波浪线。请告诉我我正在做一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T21:39:26.267

外部序列中的键选择器应该先行。在您的情况下，外部序​​列是`pv.TPM_TASK`. 所以，你应该加入`task.STAGEID equals st.STAGEID`

```
var stages = (from stage in entityManager.TPM_TASKSTAGE select stage);
var results = (from task in pv.TPM_TASK
               join st in stages on task.STAGEID equals st.STAGEID // here
               where task.TASKTYPE == "Solution"
               select new SolutionTask()); 
```*

# html - 如果没有表单，恶意用户可以提交数据吗？

> ID：15889478
> 
> 赞同：0
> 
> 时间：2013-04-08T21:38:14.690
> 
> 标签：html, forms

在我的网站中，用户每天只能修改一次个人信息。脚本方面，我确定它们是否被允许（即检查数据库是否自上次修改以来已经过了 24 小时）以及是否显示表单。

我的问题是，如果没有表格，恶意用户能否设法提交信息？换句话说，如果没有[`FORM element`](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)用户的浏览器应该提交任何数据，对吧？

我害怕的是，如果有人设法发送数据，脚本仍然会处理它并**在不应该的时候**更改个人信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:40:26.610

当然——这将是一种重放攻击。只要您的资源端点将处理恶意 POST 请求，而不管前面的 GET 的内容如何，​​那么您就很容易受到攻击。

记住：**永远不要相信客户**。如果您在处理 POST 请求之前进行身份验证**和**授权检查，那么您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:42:17.577

是的，如果恶意用户知道接受数据的页面的 url 及其期望的相应属性，即使没有表单，他仍然可以发送数据。然后，他可以轻松地使用该信息创建一个表单并提交数据。

所以你基本上需要在服务器端验证数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:43:23.830

## 是的

例如有人可以使用 curl。

```
 curl -d profile=value http://www.yoursite.com/profile 
```

您可以使用随表单一起发送的 CSRF 令牌来防止此类攻击。有关更多背景信息，请参阅这篇文章[http://shiflett.org/articles/cross-site-request-forgeries](http://shiflett.org/articles/cross-site-request-forgeries)。

# xcode - 在 UIDatePicker 中禁用特定日期

> ID：15889479
> 
> 赞同：0
> 
> 时间：2013-04-08T21:38:19.463
> 
> 标签：xcode, uidatepicker

我试图设置一个 uidatepicker 来预订日历中的一些活动。我需要在我的 UIDatePicker 中禁用（隐藏）某些特定日期，例如我出城或度假的日子。

你能帮我解决这个问题吗？提前感谢很多。这是一些代码：

```
 - (void)viewDidLoad
 {

     NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"IT"];
     [self.datePicker setLocale:locale];

     NSString *min = @"20132015";
     NSString *max = @"22132015";

     NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
     [dateFormat setDateFormat:@"ddMMyyyy HH:mm"];
     NSDate *datemin = [dateFormat dateFromString:min];
     NSDate *datemax = [dateFormat dateFromString:max];
[self.view addSubview:datePicker];
datePicker.minuteInterval = 15;
datePicker.maximumDate = datemax;
datePicker.minimumDate = [NSDate date];

     [datePicker addTarget:self action:@selector(disableDate)      forControlEvents:UIControlEventValueChanged];

[datePicker addTarget:self
                action:@selector(LabelChange:)
      forControlEvents:UIControlEventValueChanged];

[super viewDidLoad];
// Do any additional setup after loading the view.
 }

 -(void)disableDate{

NSDate *pickedDate = datePicker.date;  // Get current Date
NSDate *disabledDate = [?????;
if([pickedDate compare:disabledDate] == NSOrderedSame)
{
    [datePicker setDate:disabledDate animated:YES];

}
 }
      -(void)getDisableDate
 {
?????
 }

 - (void)LabelChange:(id)sender{

     NSDateFormatter *df = [[NSDateFormatter alloc] init];
     [df setDateFormat:@"dd.MM.yyyy HH:mm"];
     NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"IT"];
     [self.datePicker setLocale:locale];

     labelDate.text = [NSString stringWithFormat:@"%@",
                    [df stringFromDate:datePicker.date]];

     NSLog(@"date:%@", datePicker.date);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:10:20.143

最好的解决方案是使用 UIPickerView 创建自定义 UIDatePicker，这太容易了，将来您可以轻松地进行更改。

检查[链接](https://stackoverflow.com/questions/10844675/custom-ios-uidatepicker-using-uiappearance)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:55:29.430

UIDatePicker 不支持日期范围。相反，我会做的是在选择错误日期时更改日期，方法是使用`setDate:animated:`最近的可选日期。此外，在某处显示一条消息，解释所选日期更改的原因。

要么，要么使用 UIPickerView 编写您自己的自定义 UIDatePicker。不难，我以前做过。最糟糕的部分是处理包装值（例如：31 -> 1）。不过，确实涉及更多工作。

# android - IabResult：设备上的计费服务不可用。（回复：3：Billing Unavailable）

> ID：15889480
> 
> 赞同：28
> 
> 时间：2013-04-08T21:38:22.493
> 
> 标签：android, google-play, in-app-billing

我正在尝试使用应用内计费：

```
mIabHelper = new IabHelper(this, BILLING_KEY);
        mIabHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            @Override
            public void onIabSetupFinished(IabResult result) {
                if (!result.isSuccess()) {
                    Log.d(TAG, "Problem setting up In-app Billing: " + result);
                }
            }
        }); 
```

并得到错误：

```
Problem setting up In-app Billing: IabResult: Billing service unavailable on device. (response: 3:Billing Unavailable) 
```

为什么？试图清除 Play 商店的缓存，对我不起作用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-11T11:22:19.780

好吧，如果没有太多信息，我们无法为您提供帮助。因此，如果您遗漏了什么，我会尝试为您做一个清单：

1.  你是在模拟器上测试吗？计费服务应该在设备上测试，但是如果你真的要在模拟器上测试，确保模拟器安装并设置了谷歌播放。这非常重要！

2.  您是否在清单中设置了正确的权限？(com.android.vending.BILLING)

3.  如果您仍在测试应用程序，您是否从 playstore 获得了测试应用程序许可证，在您的 SDK 中导入了关卡，设置了您的许可证验证库？（您可以在此处跟随：[设置](http://developer.android.com/google/play/licensing/setting-up.html)

4.  在您的活动 onActivityResult 您是否正确处理了活动结果？从谷歌的示例中可以看出，您应该这样做：

* * *

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
  Log.i(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);

  // Pass on the activity result to the helper for handling
  if (!inappBillingHelper.handleActivityResult(requestCode, resultCode, data)) {
    super.onActivityResult(requestCode, resultCode, data);
  }
  else {
    Log.i(TAG, "onActivityResult handled by IABUtil.");
  }
} 
```

还有更多信息可能会很有用，比如如果您正在模拟器或设备上进行测试，设备名称、android 版本等......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T11:42:21.307

此错误表示您正在连接设备上的应用内结算服务，但该服务不支持 IAB 版本 3。可能是您设备的 Google Play 版本仅支持 IAB 版本 2。您的设备上运行的是哪个版本的 Google Play？

您的 Google Play 版本是否可以正常运行（例如，您可以打开 Google Play 商店）吗？有时，如果您设备上的日期已关闭，或者存在其他问题，Google Play 本身可能会出现问题。

最后，你的 logcat 输出中有什么？如果您提供更多详细信息，将更容易提供帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-21T13:10:22.410

在注册所有内容并设置 Google Play 商店之前安装应用程序时出现该错误。一旦我设置了 Google Play 商店帐户，错误就消失了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T14:44:53.670

擦拭帮了我。奇怪的错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-20T18:21:37.493

尽管我使用的是 3.0 版的账单，但 2.0 版账单的文档实际上比 3.0 版更有帮助。

**以下是 2.0 如何描述它的响应代码 3：**

> 表示 In-app Billing 不可用，因为您指定的 API_VERSION 未被 Google Play 应用程序识别***或用户不具备应用内结算资格***（例如，用户居住在禁止应用内购买的国家/地区） .

对我来说，在测试之前，我必须先在手机上设置一个测试 Google 帐户。我忘记了那一步。一旦我这样做了，它就为我解决了......

**在此处查找服务器响应代码：**

[http://developer.android.com/google/play/billing/v2/billing_reference.html](http://developer.android.com/google/play/billing/v2/billing_reference.html)

[http://developer.android.com/google/play/billing/billing_reference.html](http://developer.android.com/google/play/billing/billing_reference.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-28T01:01:38.713

我发现了一个需要解决的问题，使用 LuckyPatcher 尝试 root，打开 config Toggles -> Disable billing。

![在此处输入图像描述](https://i.stack.imgur.com/ZcY2D.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-26T14:34:31.040

当我从手机中删除所有 Google 帐户时，我确实遇到了这个错误（因此擦除修复，因为擦除后你可能会在手机重启后设置一个帐户）。

添加帐户后，我没有看到此错误。

相关问题[InApp 购买中出现此错误代码 3 的可能性有哪些？](https://stackoverflow.com/questions/21091353/what-are-the-possibilities-to-get-this-error-code-3-in-inapp-purchase).

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-02T10:07:13.660

有同样的问题。

我的设备已使用无法自我更新的旧版 Google Market 植根和 ROM。您可以通过在 AppManager 中查看来验证您的 Market/Play 版本。

我实际上决定使用另一台设备，但我想否则我将不得不找到一种方法来升级 Market/Play 版本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-09T15:02:43.777

我从擦除 Google Play 缓存中得到了这个错误。您必须重新打开 Google Play 应用并接受条款，然后它才能再次适用于 IAB。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-22T14:16:21.480

这是因为当前登录设备的帐户未在 Google Developer Console 中注册。要解决此问题， 1\. 转到您的 Google Developer Console 2\. 在“帐户详细信息”选项卡中，在“具有测试访问权限的 Gmail 帐户”中输入电子邮件地址（位于设备中），然后按顶部的保存按钮。

就是这样。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-29T17:21:28.937

就我而言，我为 serviceIntent.setPackage("com.android.vending"); 设置了不同的值。来自 IabHelper。确保将其保留为该值

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-07T01:02:23.417

我有同样的错误，然后注意到我的手机处于飞行模式！一旦连接恢复，我就可以走了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-08T10:59:20.997

**IabHelper.java**

```
Intent serviceIntent = new Intent("com.android.vending.billing.InAppBillingService.BIND");
serviceIntent.setPackage("com.android.vending"); 
```

如果无法正确指定 action 和 packageName 为`IInAppBillingService.aidl`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-05-22T14:10:37.160

已经想出了解决办法。

请尝试以下 3 个步骤：

1.  清除 GooglePlay 应用和 Google Play 服务应用的缓存。
2.  删除 IInAppBillingService.aidl 文件。
3.  再次从 sdk 文件夹中复制上述文件并将其粘贴到我的应用程序中的aidl 文件夹中。

当我们将aidl文件从一个项目复制到另一个项目时，通常会出现这个问题。

# rad - Websphere 应用程序服务器未启动

> ID：15889482
> 
> 赞同：0
> 
> 时间：2013-04-08T21:38:26.027
> 
> 标签：rad, websphere-8

大家好，我要疯了，试图解决这个问题。我的 WAS 运行良好，我的应用程序运行良好。今天我不得不更新我的应用程序，由于某种原因，我遇到了一个错误，我的应用服务器停止了工作。所以我创建了一个新的配置文件，但现在每次尝试启动服务器时都会出现以下错误。我四处搜索，听起来像是端口问题或现有实例，有人可以帮我解决这个问题。请帮忙！

![在此处输入图像描述](https://i.stack.imgur.com/v5z9A.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:36:53.803

我下载了 TCPview 以检查关闭连接后哪个端口仍然处于活动状态，这很好！

# linux - 这些内核恐慌错误是什么意思？

> ID：15889483
> 
> 赞同：10
> 
> 时间：2013-04-08T21:38:29.820
> 
> 标签：linux, module, linux-kernel, arm

我`insmod`是 ARM 平台上的一个内核模块，我得到一个内核恐慌，导致这三个错误被打印到屏幕上

1.  `Unhandled fault: external abort on non-linefetch (0x008)`
2.  `Unhandled fault: imprecise external abort (0xc06)`
3.  `Kernel panic - not syncing: Fatal exception in interrupt`

    *   括号中的值是什么？
    *   是什么`3`意思这听起来像是原子调度但内核模块中没有这样的事情。？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T22:42:12.853

括号中的值是`ifsr`（[指令故障状态](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0344b/Bgbiaghh.html)）寄存器。流产的原因有很多，这些给出了一个具体的原因。内核中有一些表可以处理特定的故障原因，而另一些表则有一个处理程序来执行`printk`和中止任务，或者`panic()`内核可以。参见：[arm/mm/fault.c](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/mm/fault.c)。除非您正在开发故障处理程序，否则该值可能没有价值。虽然它可以让您了解故障的原因，但最好只是获取`PC`并查看该地址的代码（我认为它已经打印了？）。

这些故障可能发生在任何地方；在用户任务、内核任务或`interrupt`处理程序等中。由于您的`interrupt`处理程序已经崩溃，Linux 决定停止一切而不打扰继续。否则，您可能会损坏磁盘（甚至更多）等。

注意：每个[*故障状态寄存器*](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0198e/I1039321.html)都有一个*abort.S*文件，该文件对于特定的 ARM CPU 是不同的。例如参见[abort-ev7.S](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/mm/abort-ev7.S) `v7_early_abort`。这被放入在启动时匹配的[处理器表中。](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/mm/proc-v7.S)

1.  *未处理的错误*- 试图读取未映射的内存（通过 MMU）。
2.  *内核恐慌*-在被视为不可恢复的代码中发生*未处理的错误。*

# php - 带有定义字段的 MySQL INSERT INTO (SELECT)

> ID：15889484
> 
> 赞同：0
> 
> 时间：2013-04-08T21:38:31.453
> 
> 标签：php, mysql

我正在尝试复制重复数据并将数据插入到这样的表中......

```
ID, Value
1,1
1,2
1,3 
```

现在我要做的是一个插入语句，它将获取 ID '1' 的所有行并再次将其插入，但 ID 为 2。ID 不是唯一的。

有没有一种方法可以做到这一点，而无需遍历所有行并使用常规的 Select, then insert 语句逐个插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:41:23.520

尝试这个：

```
insert into TABLENAME (id,value) select 2, Value from TABLENAME where id = 1 
```

# forms - 输入类型=重置和淘汰赛

> ID：15889491
> 
> 赞同：9
> 
> 时间：2013-04-08T21:38:58.060
> 
> 标签：forms, knockout.js

单击表单重置按钮时，Knockout 不会更新 observables。

[http://jsfiddle.net/nQXeM/](http://jsfiddle.net/nQXeM/)

HTML：

```
<form>
    <input type="text" data-bind="value: test" />
    <input type="reset" value="reset" />
</form>
<p data-bind="text: test"></p> 
```

JS：

```
function ViewModel() {
    this.test = ko.observable("");
}

ko.applyBindings(new ViewModel()); 
```

显然输入框的更改事件没有被触发，正如这个 jQuery 测试所见：http: [//jsfiddle.net/LK8sM/4/](http://jsfiddle.net/LK8sM/4/)

如果重置按钮没有触发更改事件，我们将如何强制所有绑定到表单输入的可观察对象进行更新，而无需手动指定它们？

使用 jQuery 来查找表单内的所有输入并触发更改事件很容易，但假设我们有一个仅淘汰赛控制的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T16:24:25.537

我复制并修改了[默认的 Knockout 提交绑定](https://github.com/knockout/knockout/blob/master/src/binding/defaultBindings/submit.js)，以便为表单重置事件创建类似的绑定：

```
ko.bindingHandlers['reset'] = {
    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        if (typeof valueAccessor() !== 'function')
            throw new Error('The value for a reset binding must be a function');

        ko.utils.registerEventHandler(element, 'reset', function (event) {
            var handlerReturnValue;
            var value = valueAccessor();

            try {
                handlerReturnValue = value.call(bindingContext['$data'], element);
            } finally {
                if (handlerReturnValue !== true) {
                    if (event.preventDefault)
                        event.preventDefault();
                    else
                        event.returnValue = false;
                }
            }
        });
    }
}; 
```

你会这样绑定：

```
<form data-bind="reset: onFormReset"> 
```

并将`onFormReset`在您的视图模型上：

```
function ViewModel() {
    this.onFormReset = function () {
        //Your custom logic to notify or reset your specific fields.

        return true;
    }
} 
```

在您的重置处理程序中，如果您返回 true，那么 JavaScript 将继续在表单上调用其重置函数。但是，如果您正在设置绑定到 value 的 observable，则实际上不需要让 JavaScript 继续重置表单。因此，从技术上讲，您可以不返回任何内容，或者在这种情况下返回 false。

其他人可以进一步扩展它以自动通知表单中所有绑定的 observables，但这符合我的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:08:50.597

正如您所提到的，`change`重置表单时不会触发该事件。如果您只使用 KnockOut，我认为您真的没有可能的选择，除非您创建可以注册`reset`事件并检测更改的自定义绑定 - 这仍然涉及手动 JS，但至少它将是集中式的。

一种更通用的方法，虽然它*确实*需要 jQuery，但它是创建一个函数来处理表单的`reset`事件，并检测当时表单输入的变化。

这是一个可能有效的事件处理程序示例。请注意，这不是生产就绪代码。在使用之前，我会用一个好的 jQuery 眼光看它:)

```
$('form').on('reset', function (evt) {
    evt.preventDefault();
    $(this).find('input, select, textarea').each(function () {
        if ($(this).is('input[type="radio"], input[type="checkbox"]')) {
            if ($(this).is(':checked') !== $(this)[0].defaultChecked) {
                $(this).val($(this)[0].defaultChecked);
                $(this).trigger('click');
                $(this).trigger('change');
            }
        } else {
            if ($(this).val() !== $(this)[0].defaultValue) {
                $(this).val($(this)[0].defaultValue);
                $(this).change();
            }
        }
    });
}); 
```

这是一个演示这个想法的小提琴：http: [//jsfiddle.net/Fm8rM/2/](http://jsfiddle.net/Fm8rM/2/)

# excel - Excel VBA 大数据运行时问题

> ID：15889511
> 
> 赞同：0
> 
> 时间：2013-04-08T21:40:39.753
> 
> 标签：excel, vba, runtime

我有大规模数据（700K 行），我正在尝试计算行中单词出现的次数，并且多次这样做（50K 迭代）。我想知道 Excel 是否是合适的平台，使用 VBA 或 COUNTIFS，还是应该使用不同的平台？如果是这样，是否有与 Excel 和 VBA 有相似点的平台？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:33:48.333

使用 A 列中的小句子和 Sheet1 的 A 列中的 700k 行，此公式将计算出现次数。它是一个数组公式，必须使用 Ctrl+Shift+Enter 输入。

```
=SUM(--NOT(ISERR(FIND(A2,Sheet1!$A$1:$A$700000)))) 
```

在我的机器上计算 200 个小句子大约需要 20 秒。如果这是一个迹象，计算 50k 个小句子大约需要 1.5 小时。您可能应该找到一个更好的工具，或者至少在您离开吃午饭之前点击计算。绝对要在较小的数字上进行测试，以确保它可以为您提供所需的答案。如果您不必经常这样做，也许 1.5 小时是可口的。

# gradle - Netbeans Gradle 配置

> ID：15889512
> 
> 赞同：2
> 
> 时间：2013-04-08T21:40:42.193
> 
> 标签：gradle, netbeans-7

我开始使用netbeans，并且正在建立一个gradle项目。当我使用 netbeans 的“运行”命令时，我想控制使用什么任务。默认运行“gradle run”，但我想传入“run”以外的东西。我找不到在哪里做，有地方编辑“gradle run”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:30:32.093

您可以在项目属性中调整所有内置命令：“管理内置任务”。有关详细信息，请参阅有关[项目属性](https://github.com/kelemen/netbeans-gradle-project/wiki/Project-Properties)和[内置任务](https://github.com/kelemen/netbeans-gradle-project/wiki/Build-Commands)的 wiki 。如果您愿意，您可以添加几个“配置文件”，每个配置文件都有不同的构建命令。

# php - textarea 默认文本重复

> ID：15889515
> 
> 赞同：0
> 
> 时间：2013-04-08T21:40:50.067
> 
> 标签：php, contact-form

我创建了一个联系表单，其中包含“输入您的消息”作为评论区域的默认设置。我的代码有效，但它存在问题。

我的问题是，如果用户收到一条错误消息，告诉他们他们没有登录，则会生成两次“输入您的消息”文本。[您可以通过访问http://themeforward.com/demo2/features/contact-form/](http://themeforward.com/demo2/features/contact-form/)看到这一点，而不是填写您的信息，然后点击“给我发电子邮件”。我不确定我必须做些什么才能使默认文本仅在何时生成一次

我的文本区域 HTML：

```
<textarea name="comments" id="commentsText" rows="20" cols="30" class="requiredField" onfocus="if(this.value==this.defaultValue)this.value=''" onblur="if(this.value=='')this.value=this.defaultValue">
Enter your message
<?php if(isset($_POST['comments'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['comments']); } else { echo $_POST['comments']; } } ?> 
```

PHP：[http ://snippi.com/s/t9c1nq7](http://snippi.com/s/t9c1nq7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:46:10.147

这应该可以解决问题：

```
<textarea name="comments" id="commentsText" rows="20" cols="30" class="requiredField" onfocus="if(this.value==this.defaultValue)this.value=''" onblur="if(this.value=='')this.value=this.defaultValue">
<?php
    if(isset($_POST['comments'])) {
        if(function_exists('stripslashes')) {
            echo stripslashes($_POST['comments']);
        }
        else {
            echo $_POST['comments'];
        }
    }
    else {
        echo 'Enter your message';
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:04:17.203

引用 textareas 时，您应该在 Javascript 中使用`innerHTML`而不是。`value`

# wolfram-mathematica - 数学问题

> ID：15889516
> 
> 赞同：0
> 
> 时间：2013-04-08T21:40:55.907
> 
> 标签：wolfram-mathematica

熟悉mathematica的人能告诉我为什么我的绘图不会生成吗？

```
plot1 = ContourPlot3D[{x^2 + (y + 0.25)^2 + (z - 0.45)^2 = 0.25, 
   x^2 + y^2 + (z + 0.5)^2 = 0.25, 
   x^2 + (y + 0.5)^2 + (z - 1.4)^2 = 0.25, 
   x^2 + (y + 0.25)^2 + (z - 2.35)^2 = 0.25, 
   x^2 + y^2 + (z - 3.3)^2 = 0.25, 
   x^2 + (y + 0.25)^2 + (z - 4.25)^2 = 0.25, 
   x^2 + (y + 0.5)^2 + (z - 5.2)^2 = 0.25, 
   x^2 + (y + 0.25)^2 + (z - 6.15)^2 = 0.25, 
   x^2 + y^2 + (z - 7.1)^2 = 0.25}, {x, -3, 3}, {y, -3, 3}, {z, -3, 3}]

plot2 = ContourPlot3D[{x^2 + (y - 0.5)^2 + (z - 0.25)^2 = 0.25, 
   x^2 + (y - 0.75)^2 + (z - 1.15)^2 = 0.25, 
   x^2 + (y - 1)^2 + (z - 2.05)^2 = 0.25, 
   x^2 + (y - 1.25)^2 + (z - 2.95)^2 = 0.25, 
   x^2 + (y - 1.5)^2 + (z - 3.85)^2 = 0.25, 
   x^2 + (y - 1.75)^2 + (z - 4.75)^2 = 0.25}, {x, -3, 3}, {y, -3, 
   3}, {z, -3, 3}]

plot3 = ContourPlot3D[{x^2 + (y + 0.5)^2 + z^2 = 0.25, 
   x^2 + (y + 1)^2 + (z - 0.75)^2 = 0.25, 
   x^2 + (y + 1.5)^2 + (z - 1.5)^2 = 0.25, 
   x^2 + (y + 2)^2 + (z - 2.25)^2 = 0.25}, {x, -3, 3}, {y, -3, 
   3}, {z, -3, 3}] 
```

对于每个图，此错误出现三次：

```
Set::write: Tag Plus in 7.56014\[VeryThinSpace]+8.99743\[VeryThinSpace]+11.8995
 is Protected. >>

Set::write: Tag Plus in 6.24786\[VeryThinSpace]+8.99743\[VeryThinSpace]+8.99743
 is Protected. >>

Set::write: Tag Plus in 6.24786\[VeryThinSpace]+8.99743\[VeryThinSpace]+19.3562
 is Protected. >>

General::stop: Further output of Set::write will be suppressed during this calculation. >> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:01:45.723

这是一个小的语法错误 = 符号用于 Set（赋值和定义） 该`==`符号用于 Equal（相等检查）所以，在每个 ContourPlot 的主体中，用 == 替换 = 就完成了

你的代码应该是

```
plot1 = ContourPlot3D[{x^2 + (y + 0.25)^2 + (z - 0.45)^2 == 0.25, 
   x^2 + y^2 + (z + 0.5)^2 == 0.25, 
   x^2 + (y + 0.5)^2 + (z - 1.4)^2 == 0.25, 
   x^2 + (y + 0.25)^2 + (z - 2.35)^2 == 0.25, 
   x^2 + y^2 + (z - 3.3)^2 == 0.25, 
   x^2 + (y + 0.25)^2 + (z - 4.25)^2 == 0.25, 
   x^2 + (y + 0.5)^2 + (z - 5.2)^2 == 0.25, 
   x^2 + (y + 0.25)^2 + (z - 6.15)^2 == 0.25, 
   x^2 + y^2 + (z - 7.1)^2 == 0.25}, {x, -3, 3}, {y, -3, 3}, {z, -3, 
   3}] 
```

等等

耶胡达

# performance - 两个 Toeplitz 矩阵的乘积？

> ID：15889521
> 
> 赞同：6
> 
> 时间：2013-04-08T21:41:22.083
> 
> 标签：performance, algorithm, matrix, fft, matrix-multiplication

Toeplitz 矩阵和正确长度向量的`O(n log n)`乘积算法是众所周知的：将其放入循环矩阵中，乘以向量（以及随后的零），然后返回`n`乘积的顶部元素。

我很难找到将两个相同大小的 Toeplitz 矩阵相乘的最佳（时间）算法。

谁能给我一个算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T02:52:39.600

这是一个 O(n^2) 时间的算法。

为了计算乘积矩阵的对角线之一，我们需要在长度为 (2n-1) 的列表中以锁步滑动的长度为 n 的窗口上计算点积。两个连续条目之间的差异可以在 O(1) 时间内计算出来。

例如，考虑乘积

```
e f g h i    o p q r s
d e f g h    m o p q r
c d e f g    l m o p q
b c d e f    k l m o p
a b c d e    j k l m o 
```

1,1 条目是`eo + fm + gl + hk + ij`. 2,2 项是`dp + eo + fm + gl + hk`，或 1,1 项减去`ij`plus `dp`。3,3 项是`cq + dp + eo + fm + gl`，或 2,2 项减去`hk`plus `cq`。4,4 条目是`br + cq + dp + eo + fm`等。

如果您在浮点中实现这一点，请注意[灾难性取消](http://en.wikipedia.org/wiki/Loss_of_significance)。

# c# - Request.Params 到 String 提供不完整的数据

> ID：15889523
> 
> 赞同：0
> 
> 时间：2013-04-08T21:41:24.147
> 
> 标签：c#, asp.net, character-encoding

不知道是不是字符编码问题

我向 asp.net 页面发出了 POST 请求，我发送了一个 XML，以便将值放入我制作的变量中

```
String selectionXml = HttpUtility.UrlDecode(Request.Params["SELECTION"]); 
```

这是我的xml的一个例子

```
<?xml version="1.0" encoding="UTF-8"?>
<FeatureSet>
<Layer id="0adcf012">
<Class id="MyTable">
<ID>AAAAAAAmvEA=</ID>
<ID>AAAAAAC+5EA=</ID>
</Class>
</Layer>
</FeatureSet> 
```

问题是，当我执行上述句子时，我得到了这个 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<FeatureSet>
<Layer id="0adcf012">
<Class id="MyTable">
<ID>AAAAAAAmvEA=</ID>
<ID>AAAAAAC 5EA=</ID>
</Class>
</Layer>
</FeatureSet> 
```

即第二个 ID 标签 (AAAAAAC 5EA=) 出现时没有加号 (+) 与原始 xml (AAAAAAC+5EA=) 不同

我该如何解决这个问题？

编辑：我添加了更多代码，这是我的 asp.net 页面（使用 mapguide 库）

```
<%@ Page Language="C#" Debug="true" validateRequest="false"%>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Collections.Specialized" %>
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="OSGeo.MapGuide" %>

<!-- #Include File="common.aspx" -->
<%

    Response.Charset = "utf-8";
    String sessionId;
    String mapName;
    String locale;
    int target=0;
    int popup=0;
    String selectedLayer;
    MgSelection selection = null;
    sessionId = Request.Params["SESSION"];
    mapName = Request.Params["MAPNAME"];
    locale = Request.Params["LOCALE"];
    target = int.Parse(Request.Params["TGT"]);
    popup = int.Parse(Request.Params["POPUP"]);
    selectedLayer = Request.Params["LAYERTARGET"];

    bool todos = false;
    try
    {

      // Initialize the Web Extensions and connect to the Server using
      // the Web Extensions session identifier stored in PHP session state.

      //MapGuideApi.MgInitializeWebTier (Constants.WebConfigPath);
      InitializeWebTier();
      MgUserInformation userInfo = new MgUserInformation(sessionId);
      MgSiteConnection siteConnection = new MgSiteConnection();
      siteConnection.Open(userInfo);

      MgMap map = new MgMap(siteConnection);
      map.Open(mapName);

      // ----------------------------------------------------------
      // Use the following code for AJAX or DWF Viewers
      // This requires passing selection data via HTTP POST

      MgReadOnlyLayerCollection layers = null;
      **String selectionXml = HttpUtility.UrlDecode(Request.Params["SELECTION"]);**
      if (selectionXml!= null)
      {
        selection = new MgSelection(map, selectionXml);
        layers = selection.GetLayers();
      }

      .......... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:51:50.633

> 我该如何解决这个问题？

你为什么用`HttpUtility.UrlDecode`？它是 XML，而不是 URL！只要您正在使用`POST request`，您就不需要`HttpUtility.UrlDecode`.

# vim - Vim - 我如何使用键映射命令，如 ?

> ID：15889529
> 
> 赞同：2
> 
> 时间：2013-04-08T21:41:50.477
> 
> 标签：vim, keymapping

我几乎可以肯定其他人也有这个问题，这可能是重复的，但我不确定如何称呼命令`<C-L>`，所以我没有找到现有问题的运气。如果这是重复的，请重定向我。

问题来自 vimrc 部分，内容如下：

```
" Map <C-L> (redraw screen) to also turn off search highlighting until the
" next search
nnoremap <C-L> :nohl<CR><C-L> 
```

那么我应该按什么组合键（在哪种模式下）来输入`<C-L>`映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T21:46:02.027

在这一行：

```
nnoremap <C-L> :nohl<CR><C-L> 
```

`nnoremap`这意味着`normal no-recursive map <C-L>...`，如果您`ctrl + l`在`NORMAL`模式下按下，将应用映射的击键。

`<C-L>` 方法`ctrl + l`

如果你输入

```
:h control 
```

你可以看到键码：

```
<C-...>     control-key         *control* *ctrl* *<C-* 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T21:47:49.177

大写的“C”字符`<C-L>`表示控制键，而大写的“L”字符表示“L”字符。因此，在正常模式下按 Ctrl+L 应该会调用映射。

# javascript - JSON 字段未定义 (Javascript)

> ID：15889531
> 
> 赞同：1
> 
> 时间：2013-04-08T21:42:00.693
> 
> 标签：javascript, json

我从 servlet 获取 JSON，并使用 JSON.parse() 将 responseText 转换为 JSON 对象。Chrome 开发人员工具将 JSON 对象显示为具有我想要的数据，但是当我实际尝试访问它时，我只会得到一堆“未定义”。

我没有正确解释数据吗？

Chrome 开发者工具截图： ![JSON 对象的调试输出](https://i.stack.imgur.com/O3dpe.png)

简而言之，我输出数据的代码：

```
 for (var i = 0, len = jsonObj.length; i < len; ++i) {
            // Setup the result...
            var resultRow = document.createElement("tr");
            resultsTable.appendChild(resultRow);            
            var result = jsonObj[i];

            // Name
            var coverCell = resultRow.insertCell(0);
            coverCell.innerHTML = result.name;
        } 
```

屏幕截图中看到的 jsonData 作为 jsonObj 传递到输出函数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:39.503

您尝试访问的密钥似乎`@`在前面有字符。由于该`@`字符不是有效标识符，因此您不能使用点表示法，您可以使用括号表示法检索该值：

```
coverCell.innerHTML = result['@name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:04:29.083

如果您从服务器获取 json，那么为什么要使用 json.parse()？您应该直接将数据用作 json。

JSON.parse() 用于将字符串解析为 JSON。我知道来自服务器的响应已经是一个 JSON，可以直接使用而无需进一步解析。

作为一种故障排除方式，您可以使用 console.log 打印对象。

# javascript - 在鼠标悬停时展开/折叠浮动的 div 而不会落到下一行

> ID：15889535
> 
> 赞同：0
> 
> 时间：2013-04-08T21:42:05.710
> 
> 标签：javascript, jquery, css

我正在寻找一些关于如何解决鼠标悬停时扩展 div 时遇到的小问题的想法。

我有一系列宽度百分比的 div 全部向左浮动。当我将光标移到一个 div 上时，它的大小会增长 3 倍，然后将所有 div 向右移动。现在，只有 4 个 div 适合单个行，问题是当将鼠标移到每行的最后两个元素上时，它们将落入下一行，因为它们不再适合当前行。

这是我迄今为止一直在工作的一个例子：

CSS：

```
 #mosaicWrapper{ width:70%; background:#ccc}
   .mosaic{ width:20%; background:#06C; height:150px; float:left; margin:20px 20px 0 0; color:white; text-align:center; font-size:74px; position:relative; cursor:pointer} 
```

代码：

```
var wrapper = $('#mosaicWrapper');
var mosaic = $('.mosaic');
var mosaicWidth = mosaic.outerWidth(true);
var elesPerRow= Math.floor(wrapper.width()/mosaicWidth);
var expandedWidth = (mosaicWidth*(elesPerRow-1))-mosaic.margin('right');
var lastItems = [];
var intialWidth = mosaic.width();

for (var i = elesPerRow; i < mosaic.length; i = i + elesPerRow){
    var lItem = i - 1;
    lastItems.push(lItem);
}

mosaic.each(function(index, element) {
    thisItem = $(this);
    thisItem.mouseover(function(e) {                
        $(this).stop(false, false).animate({'width':expandedWidth},500);
        if($.inArray(index, lastItems) > -1){
            var last = index - 1;                   
        };
    });

    thisItem.mouseleave(function(e) {
        $(this).stop(false, false).animate({'width':intialWidth},500);
    });
}); 
```

在这里工作的例子：http: [//jsfiddle.net/xjm3h/3/](http://jsfiddle.net/xjm3h/3/)

我有一个想法，将前两个 div 剪切并粘贴到当前 div 之后，没有任何运气，因为光标丢失了 div，因为这个也移动了。

有没有人知道如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:26:27.873

你可以做这样的事情......获取悬停元素的索引，然后为前一个元素的宽度设置动画

```
mosaic.each(function(index, element) {
    thisItem = $(this);
    thisItem.mouseover(function(e) {
        mosaic.eq($(this).index()-1).stop().animate({'width':0},500);
        $(this).stop().animate({'width':expandedWidth},500);

        if($.inArray(index, lastItems) > -1){
            var last = index - 1;
        }
    });

    thisItem.mouseleave(function(e) {
        mosaic.eq($(this).index()-1).stop().animate({'width':intialWidth},500);
        $(this).stop(false, false).animate({'width':intialWidth},500);
    });
}); 
```

# vb.net - 在 VB.NET 中读取 txt 文件的一部分

> ID：15889538
> 
> 赞同：0
> 
> 时间：2013-04-08T21:42:11.373
> 
> 标签：vb.net, text, filestream

我需要逐部分阅读一个txt文件...例如，在一个txt文件中：(age,5char_name)

```
17susan23wilma25fredy 
```

我需要先阅读`17susan`。换句话说，前七个字符和之后`23wilma`，`25fredy`但**我没有读取整个文件并将文件记录子串化。**有没有办法通过流式阅读器做到这一点？

记录总是 7 个字节……2 个字节表示年龄，5 个字节表示姓名和一行中的所有记录。没有跳转到下一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:25:26.013

我认为有解决方案：

```
Dim filestream As New FileStream("\records.txt", FileMode.Open)
Dim streamreader As New StreamReader(fs)
Dim buffer(7) As Char
bw.ReadBlock(buffer, 0, 7)
Console.WriteLine(buffer) 
```

这是首先阅读的 7.. 你可以通过循环或 for.. 阅读其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:50:42.160

假设每条记录的字符数是静态的（在您的描述中为七个），您可以改用[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)阅读器，并使用该[`Read`](http://msdn.microsoft.com/en-us/library/system.io.filestream.read.aspx)方法一次检索七个字符。

例如：

```
Const  chunkSize As Integer = 7
Using inputFile = File.OpenRead("namefile.txt")
    Dim bytesRead As Integer
    Dim buffer = New Byte(chunkSize - 1) {}

    bytesRead = inputFile.Read(buffer, 0, buffer.Length)
    while bytesRead = 7
            'Process the buffer here
            bytesRead = inputFile.Read(buffer, 0, buffer.Length)
    End While
End Using 
```

（代码未经测试，但应该接近）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:20:14.893

如果您总是想使用前 7 个字符，您可以简单地使用 Visual Basic 代码行，例如：

```
Dim Result as String = Microsoft.VisualBasic.Left(string, no) 
```

String 是您只想从中读取前七个字符的 StreamReader 行。

No 是任何整数值，它等于您要读取的字符数，在本例中为 7。

同样，您可以使用 Right 和 Mid 从右侧或中间某处选择字符串。

# ruby-on-rails - Rails：在开发环境中测试 Cron 作业

> ID：15889539
> 
> 赞同：5
> 
> 时间：2013-04-08T21:42:13.680
> 
> 标签：ruby-on-rails, ruby, cron, whenever

我有一个名为“报告”的自定义环境，它设置为访问从数据库。我正在尝试使用[Each](https://github.com/javan/whenever) gem 配置一些 cron 作业，并希望在部署之前在开发中测试它们。有没有办法在开发中测试 cron 作业？无论如何我可以在本地安排它们，然后启动我的报告服务器并查看它们是否运行？谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:55:10.603

我将首先回顾 gem 本身（**无论何时 gem**）是如何进行测试的。[这是他们的一项功能测试](https://github.com/javan/whenever/blob/master/test/functional/output_at_test.rb)的摘录：

```
context "weekday at a (single) given time" do
    setup do
      @output = Whenever.cron \
      <<-file
        set :job_template, nil
        every "weekday", :at => '5:02am' do
          command "blahblah"
        end
      file
    end

    should "output the command using that time" do
      assert_match '2 5 * * 1-5 blahblah', @output
    end
  end 
```

# php - 使用 PHP 阻止多个 MySQL 访问但未锁定 MySQL

> ID：15889548
> 
> 赞同：0
> 
> 时间：2013-04-08T21:43:02.713
> 
> 标签：php, mysqli

我有一个上传位置，因此用户可以使用上传的文件更新我的数据库的一部分。这些文件通常高达 9gb，因此插入 150,000,000 行可能需要几分钟时间。

单击网站上的按钮更新数据库后，PHP（使用mysqli）基本上会进入mysql lock down。如果我打开其他选项卡，在大更新完成之前它们什么也得不到。但是，我知道它实际上并没有锁定数据库/表，因为从 CLI 我仍然可以“SELECT count(*) FROM table”并且它马上给了我一个结果。

插入 150,000,000 条记录同时仍让其他 php 页面访问数据库（只读）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:01:01.660

您可以使用“插入延迟”。INSERT 语句的 DELAYED 选项是标准 SQL 的 MySQL 扩展，如果您的客户端无法或不需要等待 INSERT 完成，则该选项非常有用。当您使用 MySQL 进行日志记录并且您还定期运行需要很长时间才能完成的 SELECT 和 UPDATE 语句时，这是一种常见的情况。

[您可以在此处](https://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)的官方文档中阅读有关此资源的信息。

;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:56:07.097

问题在于会话。

由于上传验证了会话中的登录，并且在开始数据库写入之前我未能 session_write_close() 写入会话文件在整个 9gb 读取/写入数据库时​​保持锁定。

这解释了为什么我仍然可以使用 CLI mysql 和基本 php（我用来测试的基本 php 中没有会话）。

# wpf - 在加载 url 图像时显示默认本地图像

> ID：15889549
> 
> 赞同：0
> 
> 时间：2013-04-08T21:43:06.510
> 
> 标签：wpf

我是wpf新手。在我的 wpf 应用程序中，我有从网络加载的图像。为避免 gui 阻塞，我按照 [如何在 ImageSource 引用无法访问的 Url 时如何防止 WPF 图像阻塞？](https://stackoverflow.com/questions/2463852/how-can-i-keep-a-wpf-image-from-blocking-if-the-imagesource-references-an-unreac)

效果很好。问题是，在图像加载之前，gui 不支持在 Image 节点中设置的尺寸属性。最终结果是一种“调整大小”的影响——最初，gui（元素）是一种大小，一旦加载图像，就会“重新调整”。

我希望使负载“顺利”。我希望能够指定“初始默认”图像。类似于[WPF 图像控件中的初始图像](https://stackoverflow.com/questions/6973629/initial-image-in-wpf-image-control)

但是我无法让它工作。在 ImageAsyncHelper 中可能类似于下面的内容（这显然是错误的）：

```
 public static readonly DependencyProperty SourceUriProperty = DependencyProperty.RegisterAttached("SourceUri", typeof(Uri), typeof(ImageAsyncHelper), new PropertyMetadata
    {
        PropertyChangedCallback = (obj,e) =>
        {
            ((Image)obj).SetBinding(Image.SourceProperty,
                new Binding("DefaultUri")
                {
                    Source = new Uri("pack://application:,,,/blah/Images/Default.gif", UriKind.RelativeOrAbsolute)
                });

        }

        PropertyChangedCallback += (obj, e) =>
        {
            ((Image)obj).SetBinding(Image.SourceProperty,
              new Binding("VerifiedUri")
              {
                  Source = new ImageAsyncHelper { GivenUri = (Uri)e.NewValue },
                  IsAsync = true,
              });
        }
    }); 
```

我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:45:10.830

尝试将 Image 元素 MinWidth 和 MaxWidth 设置为所需的大小。

# ruby-on-rails - 嵌套属性：尽管有 reject_if ，但不需要验证：All_blank

> ID：15889550
> 
> 赞同：6
> 
> 时间：2013-04-08T21:43:07.190
> 
> 标签：ruby-on-rails, validation, nested-attributes

我是 Rails 新手，因此非常感谢任何建议。

我有一个带有嵌套属性地址的类条目，

/app/models/entry.rb

```
class Entry < ActiveRecord::Base
  has_many :addresses, :dependent => :destroy
  accepts_nested_attributes_for :addresses,
                                :allow_destroy => true,
                                :reject_if => :all_blank
end 
```

像这样的类地址

/app/models/address.rb

```
class Address < ActiveRecord::Base
  belongs_to :entry
  validates :zip, :presence => true
end 
```

在嵌套形式中，我有

/app/view/entries/_form.html.slim

```
= simple_form_for(@entry) do |f|
  = f.error_notification
  - @entry.addresses.build
  .form-inputs
    = f.simple_fields_for :addresses do |address|
      = render 'address_form', :f => address 
```

这个想法是，当呈现表单时，“构建”将在数据库中列出的当前地址之外创建一个空的“地址”。保存更改后，如果创建的新地址仍然为空，则会被拒绝并且不会保存到数据库中。

但是 address.rb 中的验证是在保存之前进行验证，因此用户无法继续进行保存操作。有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-14T00:23:25.153

您可能想尝试明确命名地址模型中的属性，这些属性在创建新的空属性之前会被检查。像这样的东西：

```
# in app/models/entry.rb

accepts_nested_attributes_for :addresses, reject_if: lambda {|attributes| nested_address_is_empty?(attributes) }

private

def self.nested_address_is_empty?(attrs)
  attrs['line_1'].blank? && attrs['line_2'].blank? && attrs['zip'].blank?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T03:48:12.187

尝试`false`作为参数传递`save`以跳过验证。

# php - 强制下载 PDF 文件，文件损坏

> ID：15889557
> 
> 赞同：7
> 
> 时间：2013-04-08T21:43:54.313
> 
> 标签：php, file, corrupt, force-download

我有一个在 SO 上多次出现的问题，但我似乎找不到我的解决方案！我试图在没有在浏览器中打开的情况下将 pdf 文件传递​​给客户端，文件会下载，但是当我打开它时它已损坏，并且原始文件中缺少很多字节。我已经尝试了几种这样的方法来下载文件，但我只会向您展示我使用过的最新方法，并希望能得到一些反馈。

我还在文本编辑器中打开了下载的 PDF，我可以看到顶部没有 php 错误！

我也知道 readfile() 要快得多，但出于测试目的，我迫切希望得到任何工作，所以我使用了 while(!feof()) 方法！

无论如何，足够漫无边际，代码如下（取自[为什么我下载的文件总是损坏或损坏？](https://stackoverflow.com/questions/10145067/why-my-downloaded-file-is-alwayes-damaged-or-corrupted)）：

```
$file     = __DIR__ . '/reports/somepdf.pdf';
$basename = basename($file);
$length   = sprintf("%u", filesize($file));

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="' . $basename . '"');
header('Content-Transfer-Encoding: binary');
header('Connection: Keep-Alive');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . $length);

ob_clean();
set_time_limit(0);
readfile($file); 
```

还要注意的是文件大小的差异：

```
Original: 351,873 bytes
Downloaded: 329,163 bytes 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T21:46:24.350

确保您没有运行任何压缩输出缓冲处理程序，例如 ob_gzhandler。我有一个类似的情况，我必须禁用输出缓冲才能正常工作

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T22:09:58.303

您正在使用[`ob_gzhandler`](http://php.net/ob_gzhandler)输出缓冲区上的 。

它通过 gzencoding 输出块来工作。然后输出是编码块的流。

每个块都需要获取一些字节来进行编码，因此输出会稍微缓冲，直到有足够的字节可用。

但是，在脚本结束时，您丢弃剩余的缓冲区而不是刷新它。

使用[`ob_end_flush()`](http://php.net/ob_end_flush)代替`ob_clean()`并且文件完全通过并且没有损坏。

`ob_gzhandler`当您在输出缓冲区完成工作之前不破坏输出缓冲区时，您将使用文件上传的传输编码没有任何问题。

如果启用了任何其他分块工作的输出缓冲，这也是相同的。

示例代码：

```
$file     = __DIR__ . '/somepdf.pdf';
$basename = basename($file);
$length   = sprintf("%u", filesize($file));

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="' . $basename . '"');
header('Content-Transfer-Encoding: binary');
header('Connection: Keep-Alive');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . $length);

ob_end_flush();   // <--- instead of ob_clean()

set_time_limit(0);
readfile($file);

return; 
```

（仅供参考：实际上即使`ob_end_flush();`没有必要，重要的部分不是在输出缓冲区完成工作之前就踢掉它）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-25T21:35:48.693

在找到解决问题的方法之前，我使用 content-disposition 推送 PDF 下载两天。我的 PDF 文件也更小并且损坏了 - 但是，我可以在 Windows Preview 中打开它们 - 只是不能在 Adob​​e 中打开。经过多次故障排除后，我发现 Adob​​e 需要在文件的前 1024 个字节中包含 %PDF。在创建标题之前，我在我的 php 代码中进行了所有文件类型检查。我在标题之前取出了大部分代码，我的 PDF 文件被修复了。

你可能没有像我一样设置它，但它可能是同样的问题：

[http://helpx.adobe.com/acrobat/kb/pdf-error-1015-11001-update.html](http://helpx.adobe.com/acrobat/kb/pdf-error-1015-11001-update.html)

# mvvm - 向 ViewModel 公开不可绑定的属性

> ID：15889564
> 
> 赞同：0
> 
> 时间：2013-04-08T21:44:23.627
> 
> 标签：mvvm, windows-phone-8

我有一个带有[LongListMultiSelector](https://phone.codeplex.com/)的视图。我的 ViewModel 需要访问不能用于绑定的 SelectedItems 属性。如果不将我的视图暴露给我的 ViewModel，我该如何暴露它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:24:10.667

另一个试图完成同样事情的人提出的另一个问题有解决方案[。](https://stackoverflow.com/questions/15232725/wp8-longlistselector-selecteditem-not-bindable/15239833#15239833)

# java - 如何在 Java 中为 Json 响应添加反斜杠？

> ID：15889566
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:44:30.310
> 
> 标签：java, json, string, escaping, backslash

我想使用它，但我从服务器获取的字符串以 Json 常规形式出现。我的意思是没有\

```
 JSONParser parser=new JSONParser();

  System.out.println("=======decode=======");

  String s="[0,{\"1\":{\"2\":{\"3\":{\"4\":[5,{\"6\":7}]}}}}]";
  Object obj=parser.parse(s);
  JSONArray array=(JSONArray)obj;
  System.out.println("======the 2nd element of array======");
  System.out.println(array.get(1));
  System.out.println();

  JSONObject obj2=(JSONObject)array.get(1);
  System.out.println("======field \"1\"==========");
  System.out.println(obj2.get("1"));    

  s="{}";
  obj=parser.parse(s);
  System.out.println(obj);

  s="[5,]";
  obj=parser.parse(s);
  System.out.println(obj);

  s="[5,,2]";
  obj=parser.parse(s);
  System.out.println(obj); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:49:36.023

为了在 Java 中发送斜杠，您需要对它们进行转义。

因此，假设您想要接收`{\"key\": \"value"\}`，除了转义引号之外，您还需要转义每个斜杠：`String s = "{\\\"key\\\": \\\"value\\\"}";`三个一组中的前两个斜杠用于转义并产生一个斜杠。下一个斜线用于转义引号，这是因为 Java 如何将字符串括在引号中。

现在，这就是如何做到这一点，但我认为如果你真的需要这样做，值得考虑吗？任何 JSON 解析器都应该能够处理非斜线响应。

# javascript - 如何批量更改整个存储库中所有 JS 文件的选项卡宽度？

> ID：15889567
> 
> 赞同：1
> 
> 时间：2013-04-08T21:44:36.087
> 
> 标签：javascript, repository, whitespace

我们正在对我参与的一个已经变得相当大的项目进行一些代码清理。我们已经决定站点范围内的所有选项卡（四个空格的软选项卡）应该是两个空格的标准（有很多混合）。有没有简单的方法来实现这一点？我们在这里谈论数百个 JS 文件。我只想将四个空格的任何实例更改为两个空格。是否有我不知道的工具或某些 Sublime Text 或 VIM 方式来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:49:16.500

您可以在 vim 中执行此操作。像这样的东西：

```
:set expandtab    // Changes all tabs to spaces (soft-tab)
:set tabstop=2    // Tabs should be two spaces
:retab            // Changes existing tabs in document to this new format 
```

为了对数百个文件执行此操作，您可以编写一个 bash 脚本，循环遍历文件并从命令脚本执行此 vim 命令；也许`vim -c "retab|wq" <file>`或类似的东西。或者，您可以一次将所有文件加载到 vim 中并使用`:bufdo`

另见[http://vim.wikia.com/wiki/Converting_tabs_to_spaces](http://vim.wikia.com/wiki/Converting_tabs_to_spaces)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:49:44.417

为什么不这样：

```
find . -name "*.java" -exec sed -i '' 's/    /\  /g' {} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T22:02:32.443

在 sublime text 2 中打开您的项目，在 Mac 上单击 cmd + shift + f 或在 Windows 上单击 ctrl + shift + f。在第一个输入中输入要查找的值，在第三个输入中输入要将原始值更改为的值。

它将打开每个文件并更改所需的文本。只需保存并度过美好的一天。

# if-statement - 中频函数；挣扎于 3 倍大的部分的格式

> ID：15889569
> 
> 赞同：0
> 
> 时间：2013-04-08T21:44:42.883
> 
> 标签：if-statement

Excel 2002：为单元格 J8 编写一个 IF 函数，如果单元格 L9 中的值是单元格 M6 中的值的三倍，则分配文本“OK”；否则，让 IF 函数将文本“Not OK”分配给单元格 J8。会是：=if(L9*3>m6, "OK", "Not OK")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:15:55.687

那将是
=IF(L9>=M6*3,"OK", "Not OK")

进一步的例子：

```
A   B   C           Formula
-------------------------------------------------
1   2   No OK       IF(B2 >= A2*3,"OK", "Not OK")
2   6   OK          IF(B3 >= A3*3,"OK", "Not OK")
3   8   No OK       IF(B4 >= A4*3,"OK", "Not OK") 
```

# linux - git没有在`.git`文件夹中的新目录上保留setgid位？

> ID：15889573
> 
> 赞同：2
> 
> 时间：2013-04-08T21:44:54.243
> 
> 标签：linux, git, bash, filesystems, file-permissions

我为用户设置了一个裸 git 存储库`fred`：

```
/home/fred/foo.git 
```

我已将每个文件的组设置`foo.git`为`bar`：

```
$ chown -R fred:bar /home/fred/foo.git 
```

（注意`fred`不是 group 的成员`bar`）

我已经`setgid`为每个目录设置了位`foo.git`：

```
$ find foo.git -type d -print0 | xargs -0 chmod g+s 
```

但是，当`fred`提交到 git 存储库时，该组不会保留在某些文件中。

特别是在`objects`我看到的目录中：

```
foo.git/objects:
drwxrws--- 46 fred bar 4096 Apr  7 23:43 .
drwxrws---  7 fred bar 4096 Apr  6 17:12 ..
drwxrws---  2 fred bar 4096 Apr  6 17:11 07
drwxrws---  2 fred bar 4096 Apr  6 17:11 10
drwxrwx---  2 fred bar 4096 Apr  7 22:14 14  <--- HERE
drwxrws---  2 fred bar 4096 Apr  6 17:11 17

      ^--- HERE 
```

请注意，未设置`objects/14`该位。`setgid`因此，当一个新对象添加到该目录时：

```
foo.git/objects/14:
drwxrwx---  2 fred bar 4096 Apr  7 22:14 .
drwxrws--- 46 fred bar 4096 Apr  7 23:43 ..
-r--r-----  1 fred fred    2595 Apr  7 22:14 95482f8..9d6bfe21 
```

所以现在`95482..`文件没有 group `bar`，它有 group `fred`。

我怀疑在提交时`fred`，git按需创建了一个新目录，调用`objects/14`它来保存一个新对象，当它出于某种未知原因这样做时`setgid`，新目录上的位`14`没有设置，即使它的父目录设置`objects`了`setgid`位。

如果我尝试手动重现：

```
$ su fred                          # as user fred
$ mkdir test1                      # create test1 dir
$ sudo chgrp bar test1             # set group to bar
$ sudo chmod g+s test1             # set setgid bit
$ ls -l
drwxrwsr-x 2 fred bar 4096 Apr  8 21:33 test1

$ mkdir test1/test2                # create dir test1/test2
$ ls -l
drwxrwsr-x 2 fred bar 4096 Apr  8 21:35 test2

      ^--- HERE 
```

注意`setgid`new 中的位`test1/test2` **被**保留了，所以当我...

```
$ touch test1/test2/test3 
```

新文件仍按`bar`预期分组：

```
$ ls -l test1/test2
-rw-rw-r-- 1 fred bar 0 Apr  8 21:36 test3 
```

为什么在目录中创建新目录时`git`似乎没有保留该位？`setgid``.git`

我可以做一些 git 设置来解决这个问题吗？或者你能解释一下是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:07:18.373

事实证明，当您指定`core.sharedrepository`配置时，git 会对`chmod()`它创建的文件执行 s。这样，尽管文件系统类型和挂载选项，结果都是正确的，*除非*在您的一种情况下，存储库所有者不是与其共享的组的成员。

之所以会出现这种糟糕的结果，是因为 git`chmod()`似乎成功了——您可以在 strace 中看到它——但忽略了发布用户无权要求的任何内容。

所以为了避免这种奇怪，要做的是

```
git config --unset core.sharedrepository 
```

（或者在初始化时根本不指定 --shared ）所以 git 根本不会触及文件系统的默认权限。有趣的是，这使一切正常：

```
~/sandbox/75276/s$ find ../s.git -ls
12193569    4 drwxrws---   4 jthill   mail         4096 Apr  9 13:52 ../s.git
12193571    4 -rw-rw----   1 jthill   mail           73 Apr  8 20:40 ../s.git/description
12193572    4 -rw-rw----   1 jthill   mail           23 Apr  8 20:40 ../s.git/HEAD
12721086    4 drwxrws---   2 jthill   mail         4096 Apr  9 13:52 ../s.git/objects
12193570    4 drwxrws---   2 jthill   mail         4096 Apr  9 13:52 ../s.git/refs
12193578    4 -rw-rw----   1 jthill   mail          104 Apr  9 13:37 ../s.git/config
~/sandbox/75276/s$ cat ../s.git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = true
[receive]
        denyNonFastforwards = true
~/sandbox/75276/s$ git push origin master
Counting objects: 3, done.
Writing objects: 100% (3/3), 198 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To /home/jthill/sandbox/75276/s.git
 * [new branch]      master -> master
~/sandbox/75276/s$ find ../s.git -ls
12193569    4 drwxrws---   4 jthill   mail         4096 Apr  9 13:52 ../s.git
12193571    4 -rw-rw----   1 jthill   mail           73 Apr  8 20:40 ../s.git/description
12193572    4 -rw-rw----   1 jthill   mail           23 Apr  8 20:40 ../s.git/HEAD
12721086    4 drwxrws---   5 jthill   mail         4096 Apr  9 13:53 ../s.git/objects
16777964    4 drwxrwsr-x   2 jthill   mail         4096 Apr  9 13:53 ../s.git/objects/58
16777965    4 -r--r--r--   1 jthill   mail           17 Apr  9 13:53 ../s.git/objects/58/7be6b4c3f93f93c489c0111bba5596147a26cb
16777962    4 drwxrwsr-x   2 jthill   mail         4096 Apr  9 13:53 ../s.git/objects/ab
16777963    4 -r--r--r--   1 jthill   mail           46 Apr  9 13:53 ../s.git/objects/ab/69b4abf3bb84d4e268bd42d84e4a9a5e242bd3
16777960    4 drwxrwsr-x   2 jthill   mail         4096 Apr  9 13:53 ../s.git/objects/81
16777961    4 -r--r--r--   1 jthill   mail          120 Apr  9 13:53 ../s.git/objects/81/210f2df9629e5df5f6dfa0923a2cf72369314d
12193570    4 drwxrws---   3 jthill   mail         4096 Apr  9 13:53 ../s.git/refs
12193573    4 drwxrwsr-x   2 jthill   mail         4096 Apr  9 13:53 ../s.git/refs/heads
12193574    4 -rw-rw-r--   1 jthill   mail           41 Apr  9 13:53 ../s.git/refs/heads/master
12193578    4 -rw-rw----   1 jthill   mail          104 Apr  9 13:37 ../s.git/config
~/sandbox/75276/s$ 
```

# c++ - 如何在给定宽度和高度的情况下调整对象的二维向量的大小？

> ID：15889578
> 
> 赞同：18
> 
> 时间：2013-04-08T21:45:11.347
> 
> 标签：c++, c++11, vector, resize, multidimensional-array

我的类`GameBoard`有一个成员变量，它是类对象的二维向量`Tile`。构造`GameBoard`函数将宽度和高度作为参数。

如何`Tile`根据传递给构造函数的宽度和高度来调整对象的二维向量？我怎样才能用`Tile`对象填充它，以便我可以做这样的事情？

```
myVector[i][j].getDisplayChar(); 
```

**片段**

```
m_vvTiles.resize(iHeight);

for(auto it = m_vvTiles.begin(); it != m_vvTiles.end(); it++ ){

    (*it).resize(iWidth,Tile(' '));
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2017-05-30T20:03:20.527

您不需要创建外部循环来调整二维向量（矩阵）的大小。您可以简单地执行以下一行`resize()`调用：

```
//vector<vector<int>> M;
//int m = number of rows, n = number of columns;
M.resize(m, vector<int>(n)); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-08T21:52:28.937

您必须分别调整外部和内部向量的大小。

```
myVector.resize(n);
for (int i = 0; i < n; ++i)
    myVector[i].resize(m); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-09-23T23:52:47.950

我们也可以使用单行代码：

```
matrix.resize( row_count , vector<int>( column_count , initialization_value ) ); 
```

如果代码反复改变尺寸并且矩阵有时也在缩小，那么在重新调整大小之前清除矩阵的旧状态（二维向量）

```
matrix.clear();
matrix.resize( row_count , vector<int>( column_count , initialization_value ) );

// we can create a 2D integer vector with 3 rows and 5 columns having "-1" as initial value by:
matrix.clear();
matrix.resize(3, vector<int> (5,-1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-22T11:33:03.417

最佳做法是使用

```
vector<vector<int>> matrix;  //creating 2d vector
int r,c;                     
cin>>r>>c;                    //taking input from user 
matrix.resize(r, vector<int>(c));   //resizing 2d vector according to required space only 
```

# forms - 召回表单值不适用于 textareas

> ID：15889579
> 
> 赞同：0
> 
> 时间：2013-04-08T21:45:13.003
> 
> 标签：forms, cookies

我试图修改这个脚本

[http://www.dynamicdrive.com/dynamicindex16/formremember2.htm](http://www.dynamicdrive.com/dynamicindex16/formremember2.htm)

为文本区域工作，而不仅仅是输入文本框。继承人我猜是脚本的相关部分，我自己想不通

```
rememberForm.prototype.savevalues=function(){ //get form values and store in cookie
for (var i=0; i<this.fields.length; i++){
if (this.fields[i].type=="text")
this.cookiestr+=this.fields[i].fname+":"+escape(this.fields[i].value)+"#"
}
if (typeof this.togglebox!="undefined"){ //if "remember values checkbox" is defined
this.persistdays=(this.togglebox.checked)? this.persistdays : -1 //decide whether to       save form values
this.cookiestr=(this.togglebox.checked)? this.cookiestr+"toggleboxid:on;" :   this.cookiestr
}
else //if checkbox isn't defined, just remove final "#" from cookie string
this.cookiestr=this.cookiestr.substr(0, this.cookiestr.length-1)+";"
setCookie(this.cookiename, this.cookiestr, this.persistdays)
}

rememberForm.prototype.recallvalues=function(){ //populate form with saved values
var cookievalue=getCookie(this.cookiename)
if (cookievalue!=""){ //parse cookie, where cookie looks like:  field1:value1#field2:value2...
var cookievaluepair=cookievalue.split("#")
for (var i=0; i<cookievaluepair.length; i++){
if (cookievaluepair[i].split(":")[0]!="toggleboxid" && this.getfield(cookievaluepair[i].split(":")[0]).type=="text")
this.getfield(cookievaluepair[i].split(":")         [0]).value=unescape(cookievaluepair[i].split(":")[1])
else //else if name in name/value pair is "toggleboxid"
this.togglebox.checked=true
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:06:30.010

该方法`persistfields(id, ...)`设置您想要保留在 cookie 中的字段。这些字段是通过查找的，`id`所以我想添加一个`textarea`带有`id`属性的就足够了。

例如：

```
<form id="myFormId">
    <input type="text" id="someInputId" />
    <textarea id="textareaId"></textarea>
</form>

<script>
    var f = new rememberForm('myFormId');
    f.persistfields('someInputId', 'textareaId');
</script> 
```

这会将输入和文本区域添加到`rememberForm`实例`fields`属性。

* * *

**更新**

问题出在这种方法上`rememberForm`。我对代码进行了格式化以提高可读性，因为原始源的格式很糟糕。

```
rememberForm.prototype.savevalues = function() {

    for (var i = 0; i < this.fields.length; i++) {

        // PROBLEM: only allows type="text"
        if (this.fields[i].type == "text") {
            this.cookiestr += this.fields[i].fname + " : " + escape(this.fields[i].value) + "#"
        }
        if (typeof this.togglebox != "undefined") {
            this.persistdays = (this.togglebox.checked) ? this.persistdays : -1;
            this.cookiestr = (this.togglebox.checked) ? this.cookiestr + "toggleboxid:on;" : this.cookiestr
        } else {
            this.cookiestr = this.cookiestr.substr(0, this.cookiestr.length - 1) + ";"
            setCookie(this.cookiename, this.cookiestr, this.persistdays)
        }
    }
} 
```

正如我在评论中提到的，它将测试输入元素的类型为“文本”。如果您想在 cookie 中添加 textareas，您可以将该行更改为：

```
if (this.fields[i].type == "text" || this.fields[i].type == 'textarea') { 
```

那应该行得通。

# jquery - 在表单中居中按钮

> ID：15889581
> 
> 赞同：1
> 
> 时间：2013-04-08T21:45:20.233
> 
> 标签：jquery, css, forms, center

我想在一个表单中居中两个按钮。我在它们周围有一个包装器 div 并尝试了 margin: 0 auto 和 float: left，但它不起作用。

```
.button_container {
width: auto;
min-width: 834px;
margin: 0 auto;
float: left;
} 
```

![纽扣](https://i.imgur.com/IEjxQMh.png)

[小提琴](http://jsfiddle.net/sqeq/LerVW/)

如果按钮将在文本区域下方居中，那将是完美的。这可能吗？

**更新：**

谢谢大家，我使用了 Sachins Fiddle，因为它最适合我的情况。

[工作小提琴](http://jsfiddle.net/LerVW/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:55:26.357

[**小提琴**](http://jsfiddle.net/LerVW/9/)

这项工作很好

![在此处输入图像描述](https://i.stack.imgur.com/knnUC.jpg)

```
.button_container {
    width: 100%;
    margin: 0 auto;
    text-align:center;
} 
```

另一种风格： **[小提琴](http://jsfiddle.net/LerVW/10)**

![在此处输入图像描述](https://i.stack.imgur.com/8soEz.jpg)

```
 .box_wrapper {
    margin: 0 auto;
    height: auto;
    width: 325px;
    padding: 15px;
    background: #ccc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:47:51.990

添加`text-align:center;`到`.button_container`制作它：

```
.button_container {
width: auto;
min-width: 834px;
margin: 0 auto;
float: left;
text-align:center;
} 
```

这将使按钮容器内的所有内容居中，使您的按钮按需要居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:48:49.343

好吧，我不能说我赞成使用`<table>`，但是现在要进行更改将需要大量工作，因此您不妨使用它。只需添加另一行包含按钮。

```
<tr>
    <td>&nbsp;</td>
    <td>
        <button name="submit" class="submit_btn" type="submit">Absenden</button>&nbsp;
        <button name="reset" class="submit_btn" type="reset">Zur&uuml;cksetzen</button>
    </td>
</tr> 
```

这对我来说看起来不错，但您也可以将填充留给第二个`<td>`。

[http://jsfiddle.net/ExplosionPIlls/LerVW/2/](http://jsfiddle.net/ExplosionPIlls/LerVW/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T21:50:13.407

如果您希望按钮在下方居中，您可以做的一件事`textarea`是将您移动`button_container`到桌子上的新行...

演示：http: [//jsfiddle.net/darkajax/WFh9S/](http://jsfiddle.net/darkajax/WFh9S/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T21:50:15.077

你需要做一些事情，比如 Remove `float:left`， add `text-align:center`，最重要的是 remove `min-wdith`，因为它迫使容器的宽度使它不居中对齐。

```
.button_container {
    width: 100%;
/*  min-width: 834px;*/
    margin: 0 auto;
    text-align:center;
} 
```

[JS 小提琴示例](http://jsfiddle.net/LerVW/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T21:48:36.663

试试这个：

```
.button_container {
    width: auto;
    min-width: 834px;
    margin: 0 auto;
    border:1px solid red;
    text-align:center;
} 
```

只是添加了边框来说明 DIV 大小。

[http://jsfiddle.net/LerVW/3/](http://jsfiddle.net/LerVW/3/)

# azure - Azure - 需要关于边缘案例的进一步解释

> ID：15889585
> 
> 赞同：2
> 
> 时间：2013-04-08T21:45:33.527
> 
> 标签：azure

我认为我的帐单出了点问题……虽然 MS 没有回答，但我想在这里发布我假设的问题。

我的问题是“我在 1:10 向我的角色添加了一个实例，并在 1:20 将其删除。我将按 1 小时计费。如果我在 1:30 启动另一个实例并在 1:40 停止它，我将被计费还有一个小时？”

您可能认为这不会对账单产生太大影响，但由于自动缩放配置错误，我认为上述情况可能在过去 30 天内发生了大约 50 次......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:28:03.840

我相信这正是你会看到的。对于每个实例，您至少需要支付一个时钟小时的费用。注意：我相信有一个 5 分钟的“宽限期”窗口，但看起来你已经超出了这个范围。

话虽如此：如果它发生了大约 50 次，那么您最多会看到超出预期的 50 个计算小时，对吧？如果是这样的话，至少你早早发现了它，那时它只花了你大约 5.00 美元（假设具有单核的小型实例）。

# ios - 使用大数据源使 CPPickerView 滚动更快

> ID：15889592
> 
> 赞同：3
> 
> 时间：2013-04-08T21:45:45.310
> 
> 标签：ios, objective-c, uiscrollview, uipickerview

我在我的应用程序中使用[CPPickerView](https://github.com/cbpowell/CPPickerView)来完成水平 UIPickerView，它工作得很好，但是对于大型数据源（数十个项目），它滚动非常缓慢，这使得导航之前（特别是考虑到普通的 UIPickerView 可以非常快速地通过它们） .

顺便说一下，我的意思不是性能方面的，我的意思是视图减速非常快，使得遍历变得困难。

它只是 UIScrollView 的子类，`pagingEnabled`设置为`YES`. 我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T00:06:07.747

CPPickerView 的创建者在这里 - 我最近更新了 CPPickerView 以添加一个`allowSlowDeceleration`属性，它应该可以满足您的需求。查看 Github 上的最新代码，或 Cocoapods 版本 1.2.0。

出于文档的目的，以下是解决方案的工作原理。就像您提到的 CPPickerView 只是一个`pagingEnabled`设置为的滚动视图`YES`，所以我找到的解决方案是在用户以足够的速度滚动时禁用分页。

`UIScrollViewDelegate`有一个可选方法`scrollViewWillEndDragging:withVelocity:targetContentOffset:`，当用户在滚动视图上滑动/滚动后抬起手指时调用该方法，即使启用了分页，它仍然会调用。根据该值，您可以判断用户是试图快速滚动浏览项目，还是只是移动一两个项目。

我在演示项目中使用了 CPPickerViews，发现大约的速度`2.9f`似乎大约是正常的“快速滑动”阈值。因此，如果速度大于此阈值（我`kCPPickerDecelerationThreshold`在 中定义`CPPickerView.m`）并`allowSlowDeceleration`设置为`YES`，CPPickerView 现在会在减速开始之前设置`pagingEnabled`为。`NO`这允许选择器像普通滚动视图一样“滑行”和减速。

`scrollViewDidEndDecelerating:`然后它通过调用委托方法来捕捉减速的结束，或者用户触摸停止滚动。当前项目被确定（基于滚动视图的偏移量），然后如果滚动视图的`pagingEnabled`属性设置为`NO`调用私有方法`scrollToIndex:animated:`，动画设置为`YES`. 这会将 CPPickerView 滚动到当前项目，这是必要的，因为滑行滚动不太可能在页面边界上结束。

最后，当动画滚动完成时，`scrollViewDidEndScrollingAnimation:`调用委托方法，此时`pagingEnabled`将设置回`YES`.

如果您发现无法让它识别“快速”滑动，请尝试使用该`kCPPickerDecelerationThreshold`值。事后看来，这可能应该是一个可定制的属性，所以也许我会把它放到下一次更新中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T00:19:52.353

Don't fill CPPickerView with all data. For example fill with first 20 items and if it reaches to the end add another 20.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T00:13:02.853

我查看了源代码，似乎 CPPickerView 正在使用滚动视图。滚动视图有一个`decelerationRate`属性。玩这个，看看哪个值可以获得最佳结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:33:36.907

如上所述，您可以使用该`decelerationRate`属性，将其设置为`UIScrollViewDecelerationRateNormal`可能会有所帮助。

```
scrollView.decelerationRate = UIScrollViewDecelerationRateNormal; 
```

如果那仍然不能解决您的问题，您还可以将输入缓冲到滚动中。看到这个： [高级滚动视图技术](https://developer.apple.com/videos/wwdc/2011/#advanced-scrollview-techniques)

# javascript - 骨干网 - 同步未检测到我的收藏网址

> ID：15889593
> 
> 赞同：0
> 
> 时间：2013-04-08T21:45:54.833
> 
> 标签：javascript, jquery, backbone.js, backbone-relational

我有专辑和歌曲的关系。在新专辑视图中，我同时要求歌曲，我试图先保存专辑模型，然后保存歌曲集合并将其附加到专辑中。

我的歌曲集定义：

```
define(function(require){
   var Song = require('models/songModel');

   Songs = Backbone.Collection.extend({
     url: 'songs/',         
     model: Song,           
   });

   return Songs;
}); 
```

我像这样创建我的歌曲集：

```
this.songCollection = new Songs();
//In some other view that saves the songs files and returns a hash
that.songCollection.add({title:file.name,song_file:response['file_hash']}); 
```

然后我保存我的专辑模型并成功尝试保存歌曲集合，将新专辑 pk 添加到歌曲集合中的所有模型中：

```
that = this;
this.model.save(null,{                                 
    success: function(model,response){
       that.songCollection.each(function(song){                                                                                                     
          song.set('album',model.get('id'));
       });
       that.songCollection.sync('create');                                    
    },               
    error: function(response){                         
       console.log(response);                         
    }
 }); 
```

但是它返回 a `A 'url' property or function must be specified`，但我确实指定了它，如您之前所见。我还尝试在同步调用之前记录它并正确返回 url。我在这个过程中遗漏了什么？或者我不能像这样一次在我的服务器中创建所有这些新歌曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:53:59.767

您需要单独保存每首歌曲。`sync`并不意味着直接调用，只有方法'read'用于处理集合。`sync('read')`期间调用`collection.fetch()`。

```
that = this;
this.model.save(null,{                                 
    success: function(model,response){
       that.songCollection.each(function(song){                                                                                                     
          song.save({album: model.get('id')});
       });                                   
    },               
    error: function(response){                         
       console.log(response);                         
    }
 }); 
```

# xml - 如果属性值不等于某些值，如何获取它们？

> ID：15889596
> 
> 赞同：4
> 
> 时间：2013-04-08T21:46:04.413
> 
> 标签：xml, xpath, xslt-1.0

我有一个像这样的xml：

```
<movies>
    <movie name="aaa">
        ...
    </movie>
    <movie name="bbb">
        ...
    </movie>
    <movie name="ccc">
        ...
    </movie>
    <movie name="ddd">
        ...
    </movie>
    <movie name="eee">
        ...
    </movie>
</movies> 
```

如果不是“aaa”、“bbb”或“ddd”，我想获取电影的名称。所以我希望我的输出是：

```
ccc
eee 
```

因为我有几个限制，我认为不适合使用'xsl:if'..我写了我的 xslt（我使用的是 xslt 1.0）：

```
<xsl:value-of select="movies/movie/@name[not(self::aaa) and not(self::bbb) and not(self:ddd)]"/> 
```

但是编译器抱怨这句话有语法错误..我不知道为什么..

那么有人可以帮我解决这个问题吗？非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:51:56.193

试试这个 XPath 表达式：

```
movies/movie[@name!='aaa' and @name!='bbb' and @name!='ddd']/@name 
```

或者这个：

```
movies/movie/@name[.!='aaa' and .!='bbb' and .!='ddd'] 
```

后者更短，但前者可以轻松扩展以检查其他返回，不仅返回名称，而且返回整个`<movie>`元素 - 只需`/@name`在最后删除。或者，如果您想要第二个，只需`/..`在最后添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T03:56:42.440

**考虑使用这样的表达式，以防比较的值太多：**

```
/*/movie[not(contains('|aaa|bbb|ddd|', concat('|', @name, '|)))]/@name 
```

这将选择作为 XSLT 文档顶部元素的子元素`name`的任何元素的任何属性，并且其（属性的）值不是以竖线分隔的字符串值列表中的字符串之一。`movie``name``"|aaa|bbb|ddd|"`

# facebook - 向 Facebook 图表提交 POST 请求后可以停止重定向吗？

> ID：15889599
> 
> 赞同：0
> 
> 时间：2013-04-08T21:46:22.960
> 
> 标签：facebook, post, facebook-opengraph

快速背景：我创建了一个基本的 Facebook 应用程序，因此用户可以“喜欢”来自 Facebook 以外网站的帖子。用户进行身份验证，被`access_token`一些 JS 收集的用户重定向，并通过隐藏字段插入表单并传递给`POST`请求。（不一定相关，但我也使用一些 JS 在用户从 Facebook 重定向到该网站后自动提交“喜欢”。）

在 HTTP 请求发送（并且成功）之后，用户被重定向到响应页面，只呈现“true”打印在屏幕上。有没有办法阻止这种重定向？一旦提交表单，我已经设置了一些 JS 来交换一些`div`内容，但我似乎无法阻止它们被引导走。

提前感谢您的任何想法。

**HTML 摘录**

```
 <!-- *Authentication Section* -->
    <div id="submit_like">
      <form>
       <a id="facebook-authentication" href="https://graph.facebook.com/oauth/authorize?type=user_agent&client_id=[MY_APP_ID]&redirect_uri=[MY_POST-AUTHORIZATION_REDIRECT_URL]&scope=offline_access,publish_stream">
       <div id="facebook-authentication-button">
       START THE VOTE!
       </div>
       </a>
      </form>
    </div>

<!-- After Authentication, this form is submitted -->
<form id="likeform" method="POST" action="https://graph.facebook.com/[FACEBOOK_ID]/likes"  >
  <input id="AuthCode" name="access_token" type="hidden" value="123">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:22:49.573

您可以使用 jQuery[`.post()`](http://api.jquery.com/jQuery.post/)方法提交表单而无需任何页面重定向。在你的情况下：

```
$.post("https://graph.facebook.com/[FACEBOOK_ID]/likes", $("#likeform").serialize()).done(function(data){

    // redirect to new page or do nothing to stay put.
    alert(data); //Show the returned value

}); 
```

辅助函数接受表单输入并以[`.serialize()`](http://api.jquery.com/serialize/)URL 编码表示法创建一个字符串。此字符串作为参数发送，其中将包含 access_token 隐藏表单输入。

提醒一下，一定要包含 jQuery。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script> 
```

# python - 我如何在一个类中调用不同的类？

> ID：15889603
> 
> 赞同：-2
> 
> 时间：2013-04-08T21:46:40.070
> 
> 标签：python, file, class, function, turtle-graphics

所以我做了两个类，一个做一个矩形，一个做一个星形，两个都是 Rectangle() 和 Star()，因为那里的类接受特定数量的参数。我的问题是我有另一个名为 Flag() 的类，它接收一个包含每个类的特定参数的文本文件，矩形有 5 个特定参数，而星形有 4 个。我需要标志类来通读文本文件并通读文件的每一行，了解每一行要么是矩形要么是星形，然后绘制它。

```
class Flag(object):
    def __init__(self, f_obj):
        self.f_obj = f_obj
        for line in self.f_obj:
            line.strip()
            if 5 == len(line):
                R = Rectangle(line)
                print(R)
            elif 4 == len(line):
                S = Star(line)
                print(S)

    def draw(self,turtle):
        R.draw(turtle)
        S.draw(turtle) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:56:31.473

您是在询问文件读取吗？尝试这个：

```
parts = line.strip().split()
if len(parts) == 4:
    # Star
if len(parts) == 5:
    # Rectangle 
```

# javascript - 为什么当我使用 touchstart 滚动后没有触发事件？

> ID：15889604
> 
> 赞同：0
> 
> 时间：2013-04-08T21:46:50.017
> 
> 标签：javascript, html, events, mobile, fixed

我已将 touchstart 事件附加到网络应用程序中的固定位置页脚

所以结构是这样的：

```
<div id="content">i am a looong content.</div>
<div id="footer">i am tappable!</div> 
```

和这样的代码：

```
$("#footer").on('touchstart', function(e) { alert("tapped"); }); 
```

问题是当我向下滚动页面以阅读（长）内容时，`touchstart`我的页脚事件停止工作！它不再被调用。

有谁知道为什么会发生这种情况？提前致谢。

更新

这是我的确切情况：

[http://contoso2.azurewebsites.net/quiz/testing](http://contoso2.azurewebsites.net/quiz/testing)

使用 iPad，如果向下滚动，页脚中的按钮不会被触发。

# java - 在 Eclipse 中访问图像路径

> ID：15889608
> 
> 赞同：2
> 
> 时间：2013-04-08T21:47:25.150
> 
> 标签：java, eclipse, embedded-resource, imageicon

我正在尝试访问我的 Java 代码中的一些图像。调用图像的代码如下。

```
public final ImageIcon whitePiece = new ImageIcon(getClass().getResource("Images/whitecircle.PNG"));
public final ImageIcon blackPiece = new ImageIcon(getClass().getResource("Images/blackcircle.png"));
public final ImageIcon tiePiece = new ImageIcon(getClass().getResource("Images/tiecircle.PNG"));
public final ImageIcon boardPic = new ImageIcon(getClass().getResource("Images/gameboard.PNG")); 
```

但是，这会返回以下错误：

```
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at jared.othello.GameInterface.<init>(GameInterface.java:26)
    at jared.othello.Main.main(Main.java:22) 
```

第 26 行是上述代码的第一行。我几乎可以肯定我的文件目录命名有问题，但我不知道出了什么问题或如何解决它。我在我的项目中创建了一个名为“Images”的源文件，并将图像放在文件夹中，如下所示：

![项目配置](https://i.stack.imgur.com/3i9yY.png)

我做错了什么，正确的文件名语法是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T21:53:10.460

您应该有一个资源文件夹，其中包含该文件夹`Images`，然后它应该可以工作。

例子：

![在此处输入图像描述](https://i.stack.imgur.com/BdvZJ.png)

我如何访问这些图标：

```
public BufferedImage icon32 = loadBufferedImage("/icon/icon32.png");
public BufferedImage icon64 = loadBufferedImage("/icon/icon64.png");

private BufferedImage loadBufferedImage(String string)
{
    try
    {
        BufferedImage bi = ImageIO.read(this.getClass().getResource(string));
        return bi;
    } catch (IOException e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T23:07:22.920

尝试将图像导入到您的“.java”源文件所在的路径。在 Eclipse 中尝试以下操作：右键单击“.java”文件，选择 Import->File System->From Directory（提供图像所在的路径）->选择图像并单击 Finish。

您可以看到图像在“.java”源所在的路径中列出。您可以直接在代码中使用图像文件名。谢谢，P

# backbone.js - 骨干路由 404 错误

> ID：15889613
> 
> 赞同：0
> 
> 时间：2013-04-08T21:47:51.903
> 
> 标签：backbone.js, routing, http-status-code-404, slim

我有一个backbone.js + slim php + jquery 移动应用程序。

我搜索大学模块，选择一个，然后点击链接以生成与该模块相关的讲师列表。这行得通！

现在我希望能够点击讲师列表项来生成讲师详细信息页面，但我得到了一个我无法弄清楚的 404。

我认为我在路由到讲师详细信息的方式上有问题

我的 API 方法是：

```
$app->get('/modules', 'getModules');

$app->get('/modules/:id', 'getModule');

$app->get('/modules/search/:query', 'getModulesByName');

$app->get('/modules/:id/lecturers', 'getLecturers');

$app->get('/modules/:id/lecturers/:staffNumber', 'getLecturer'); 
```

在这里，我定义了 getLecturers - 拉取与模块关联的讲师列表：

```
function getLecturers($id) {
    $sql = "select l.staffNumber, l.firstName, l.lastName, l.moduleNo1, l.moduleNo2, l.email, m.moduleNo
            from lecturertable l, moduletable m
            where m.moduleNo=:id AND (l.moduleNo1=:id OR l.moduleNo2=:id)";

    try {
        $db = getConnection();
        $stmt = $db->prepare($sql);
        $stmt->bindParam("id", $id);
        $stmt->execute();
        $lecturer = $stmt->fetchAll(PDO::FETCH_OBJ);
        $db = null;

        if (!isset($_GET['callback'])) {
            echo json_encode($lecturer);
        } else {
            echo $_GET['callback'] . '(' . json_encode($lecturer) . ');';
        }

    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
} 
```

在这里，我试图通过传入“staffNumber”来获得一位单独的讲师：

```
function getLecturer($staffNumber) {
    $sql = "select l.staffNumber, l.firstName, l.lastName, l.moduleNo1, l.moduleNo2, l.email
            from lecturertable l
            where l.staffNumber=:staffNumber";

    try {
        $db = getConnection();
        $stmt = $db->prepare($sql);
        $stmt->bindParam("staffNumber", $staffNumber);
        $stmt->execute();
        $lecturer = $stmt->fetchObject();
        $db = null;

        if (!isset($_GET['callback'])) {
            echo json_encode($lecturer);
        } else {
            echo $_GET['callback'] . '(' . json_encode($lecturer) . ');';
        }

    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
} 
```

到目前为止一切顺利 - 我认为！

我现在尝试在 main.js 中设置路由：

```
"":"list",
"list":"list",
"modules/:id":"moduleDetails",
"modules/:id/lecturers":"moduleLecturers",
"modules/:id/lecturers/:staffNumber":"lecturerDetails" 
```

并为最后两条路线提供了几个匹配功能：

```
 moduleLecturers:function (id) {
        var module = new Module({id:id});
        module.lecturers.fetch();
        this.changePage(new ModuleLecturersPage({model:module.lecturers}));
    },

    lecturerDetails:function (staffNumber) {
        var lecturer = new Lecturer({staffNumber:staffNumber});
        var self = this;
        lecturer.fetch({
            success:function (data) {
                self.changePage(new LecturerView({model:data}));
            }
        });
    }, 
```

但是，lecturerDetails 似乎有问题 - 控制台在 Lecturer.fetch 代码中指示错误：GET localhost/api/lecturers/lecturer 404（未找到）。谁能指出我正确的方向？

我的讲师模型是：

```
window.Lecturer = Backbone.Model.extend({

    urlRoot:"../api/lecturers/lecturer",

    initialize:function () {
        this.lecturer = new lecturerCollection();
        this.lecturer.url = '../api/modules/lecturers/' + this.staffNumber + '/lecturer';

    }

});

window.lecturerCollection = Backbone.Collection.extend({

    model:Lecturer,

    url:"../api/lecturers/lecturer",

}); 
```

观点如下：

```
window.LecturerView = Backbone.View.extend({

    initialize:function () {
        this.template = _.template(tpl.get('lecturer-details'));
    },

    render:function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }

}); 
```

我从带有链接的讲师列表项链接到讲师详细信息模板：href='#modules/<%= moduleNo %>/lecturers/<%= staffNumber %>'

任何人都可以告诉我是否有任何明显的遗漏 - 我正在尝试很多方法来解决这个问题，但没有取得太大的成功！

谢谢！

# c# - 将泛型类型作为 T 传递

> ID：15889614
> 
> 赞同：3
> 
> 时间：2013-04-08T21:47:52.263
> 
> 标签：c#, .net, generic-type-argument

我有一个用 T 和 K 类型编写的方法

```
public K Process<T,K> (IEnumerable<T> set)
{
    //do stuff to set
} 
```

我使用 LINQ 对我的数据进行一些投影，我需要将其发送以进行处理

```
var dataSlice=records.Select(r => new { name = r.GetName(), id = r.GetId() });
string result =  Process <?, string>(dataSlice); 
```

我应该指定什么？（如果可以的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:50:58.683

您不能直接因为`dataSlice`现在是匿名类型的集合，您可以尝试将类型信息排除在外：

```
string result = Process(dataSlice); 
```

有时编译器可以为您推断出正确的类型，它可以节省输入并且很有用！

如果这不起作用，那么您最好不要使用匿名类型并创建适当的类型来保存数据，或者使用类似`Tuple`.

匿名类型很棒，但它们主要用于在 linq 查询之间穿梭数据，而不使用自定义类型。

尽管即使您可以通过编译器，您的 Process 方法也不会知道它得到了什么，因此无法从中提取元素`dataSlice`，因此最好按照自定义类型路由或使用`Tuple`前面所述的.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:55:05.677

我喜欢这个简单的工具：

```
public static class Klass
{
    public static Klass<T> Of<T>(){ return Klass<T>.instance; }
}

public class Klass<T>
{
    public static Klass<T> instance = null;
} 
```

现在您可以：

```
public K Process<T,K>(Klass<T> t, IEnumerable<K> items)
{
    ....
}

var aKey = Process(Klass.Of<string>(), mySetOfItems);
// aKey will be autotyped to a string 
```

但请注意，这需要在 Process 方法中添加一个未使用的参数。此参数仅用于解决缺少的类型。这就是“实例”始终为空的原因。该值并不重要，重要的是这个 null 是 Klass 类型。

但是，请注意，这 100% 可以避免使用像 in 这样的显式类型参数，`Process<string, ....>`因为您不需要显式传递`<string>`类型参数。因此，所有类型参数都绑定到参数，这允许编译器自动解析匿名类型，包括 IEnumerable 的项目。

编辑：我刚刚还记得一件事，尽管更复杂和棘手。匿名类型是完全鸭式的。这意味着具有“string Key, int Value”的一个匿名类型与在其他地方创建的第二个匿名类型绝对属于同一类，后者也是“string Key, int Value”。这使您可以创建此处描述的小型辅助方法[CastByExample](http://blogs.msdn.com/b/alexj/archive/2007/11/22/t-castbyexample-t-object-o-t-example.aspx)。

通常，您不能“指定”匿名类型，因为它是未命名的，并且您不能写出它的名称。但是，多亏了鸭子类型，这篇珍贵的文章展示了如何提供一个从不执行的 lambda，它返回一个“样本”匿名对象，只是为了拦截它定义的匿名类型，以便可以将类型传递给表达式链。非常特殊，但有趣的事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:51:35.603

简短的回答是，你不能不重新设计你的方法。C# 您必须指定所有类型参数或不指定。

一种选择是将您的`Process`方法包装在单独的 API 中。

```
public class Processor<T>
{
    public K Process<K>() { ... }
}

...

public Processor<T> CreateProcessor<T> (IEnumerable<T> set)
{
    return new Processor<T>(set)
}

...

string result =  CreateProcessor(dataSlice).Process<string>(); 
```

这是一个替代方案，虽然它不太直观，IMO：

```
public static class Process<K>
{
    public static K From<T>(Ienumerable<T> set) { ... }
}

...

string result = Process<string>.From(dataSlice); 
```

# resize - KineticJS：调整图像大小时的过渡缓动

> ID：15889616
> 
> 赞同：0
> 
> 时间：2013-04-08T21:48:06.357
> 
> 标签：resize, kineticjs, transition

请参阅下面的代码。使用以下示例：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-transition-easing-functions-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-transition-easing-functions-with-kineticjs/)

我试图首先在第一层上引入一个看起来超大的图像。这是故意的。使用过渡，我想将图像缩小到适当的大小，以便它在页面加载时适合画布。这是我的第一步。我的下一步将是添加第二层并为一些文本设置动画。但是，对此的问题可以等待。我只想先集中精力解决这个问题。

到目前为止，当我在 Firefox 中运行此代码时，Firebug 调试器告诉我在显示为*crosshairs.transitionTo的行上没有***transitionTo**函数。好吧，那里有些奇怪，因为我们知道这个函数确实存在！我看不出哪里出错了。也许有人可以看到问题所在？另外，我不确定 scale 属性的 X 和 Y 值以及它们应该是什么。我在猜测，只是想暂时将图像的大小缩小一半？请指教。

 *艾伦

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #container {
        overflow: hidden;
        width: 312px;
        height: 121px;
        margin: 0px auto;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
      <div id="container"></div>
      <script src="kinetic-v4.4.0.min.js"></script>
      <script defer="defer">

      var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 200
      });
      var crosshairLayer = new Kinetic.Layer();
      var textLayer = new Kinetic.Layer();
      var imageObj1 = new Image();
      imageObj1.src = 'images/crosshairs.png';

      function runAnim(crosshairs)
      {        
        crosshairs.transitionTo({
           scale: {
              x: .5,
              y: .5
            },
          duration: 3,
          easing: 'ease-in'
        });        
      }

    var XHair = new Kinetic.Image({
          image: imageObj1,
          x: stage.getWidth() / 2 - 650 / 2,
          y: stage.getHeight() / 2 - 327 / 2,
          width: 250,
          height: 250,
          draggable: false
        });

    crosshairLayer.add(XHair);
    stage.add(crosshairLayer);

    imageObj1.onload = function() {
        runAnim(this);
      };

    </script>

  </body>
</html> 
```

我已经附上了图像本身。希望你能看到。

![在此处输入图像描述](https://i.stack.imgur.com/aArUS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:55:07.677

实际上你是在请求`.transitionTo`一个**html 图像对象**（当然没有这样的方法）

我把你的代码的几部分放在一起来说明。下面代码中的“this”指的是您的 html 图像对象，而不是 kineticJS 对象。

```
 var imageObj1 = new Image();
  imageObj1.onload = function() {
    runAnim(this);
  };
  imageObj1.src = 'yourImage'; 
```*

# python-sphinx - Sphinx：如何排除自动模块中的导入？

> ID：15889621
> 
> 赞同：28
> 
> 时间：2013-04-08T21:48:23.123
> 
> 标签：python-sphinx, importerror, gpio, autodoc

我有一个使用 RPi.GPIO 模块的 Python 编写的 Raspberry Pi 项目。代码上的所有工作都是在不会安装 RPi.GPIO 的 Windows 机器上完成的，每次我尝试运行 autodoc 时它都会崩溃，说它无法导入 RPi.GPIO。

```
D:\cube\docs\ledcube.rst:4: WARNING: autodoc: failed to import module u'ledcube'
; the following exception was raised:
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\sphinx-1.2b1-py2.7.egg\sphinx\ext\autodoc.
py", line 326, in import_object
    __import__(self.modname)
  File "D:\cube\ledcube.py", line 2, in <module>
    import RPi.GPIO as GPIO
ImportError: No module named RPi.GPIO 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-09T21:04:07.453

没有办法告诉 Sphinx 排除某些导入。使用 autodoc 时，所有文档化的模块都必须是完全可导入的。

[你也许可以通过做一些mocking](https://pypi.python.org/pypi/mock/1.0.1)来解决这个问题。这是一篇描述与您的问题非常相似的问题的解决方案的文章：http: [//blog.rtwilson.com/how-to-make-your-sphinx-documentation-compile-with-readthedocs-when-youre-using -numpy 和 scipy/](http://blog.rtwilson.com/how-to-make-your-sphinx-documentation-compile-with-readthedocs-when-youre-using-numpy-and-scipy/)。这是一个小代码示例（旨在添加到 conf.py）：

```
import mock

MOCK_MODULES = ['numpy', 'matplotlib', 'matplotlib.pyplot']
for mod_name in MOCK_MODULES:
    sys.modules[mod_name] = mock.Mock() 
```

您可能需要安装 python-mock 才能使上述工作：`sudo apt-get install python-mock`

### 更新

从 Sphinx 1.3 开始，设置模拟变得更加容易。只需将要模拟的模块添加到[`autodoc_mock_imports`](http://www.sphinx-doc.org/en/master/ext/autodoc.html#confval-autodoc_mock_imports)配置值即可。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-07T02:04:17.510

有一个模拟的解决方案：

[http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#confval-autodoc_mock_imports](http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#confval-autodoc_mock_imports)

只需将以下行添加到 conf.py （RPi 和串行是示例）：

```
autodoc_mock_imports = ["RPi", 'serial'] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-09T17:06:58.143

除了模拟模块之外，我还必须模拟仅在我的嵌入式系统中有意义的调用（例如，模拟从通过 SPI 从 FPGA 读取寄存器`read_reg()`的模块中对函数的调用）。`examplemod`

```
import mox as mox 
import examplemod
m = mox.Mox()
m.StubOutWithMock(examplemod, 'read_reg') 
```

请注意，您需要 python-mox：`sudo apt-get install python-mox`

参考：[如何为在嵌入式系统中运行的 python 代码生成 sphinx 文档](https://developer.ridgerun.com/wiki/index.php/How_to_generate_sphinx_documentation_for_python_code_running_in_an_embedded_system)

# ruby - Heroku 上的非 Rails 应用程序在 config.ru 中有什么内容？

> ID：15889622
> 
> 赞同：3
> 
> 时间：2013-04-08T21:48:26.390
> 
> 标签：ruby, heroku, rack, resque

我有一个使用 resque 的简单 ruby​​（非 Rails）应用程序，并且在 heroku 上没有 config.ru 就无法启动。当我添加 config.ru 文件时，在`rackup`本地运行时出现以下错误：

```
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:133:in `to_app': missing run or map statement (RuntimeError)
from /Users/nickkarrasch/Dropbox/Coding/Ruby/smsnotifyv2/config.ru:in `<main>'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:49:in `eval'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:49:in `new_from_string'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:40:in `parse_file'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:277:in `build_app_and_options_from_config'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:199:in `app'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:314:in `wrapped_app'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:250:in `start'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:141:in `start'
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.5.2/bin/rackup:4:in `<top (required)>'
from /usr/local/Cellar/ruby/1.9.3-p194/bin/rackup:23:in `load'
from /usr/local/Cellar/ruby/1.9.3-p194/bin/rackup:23:in `<main>' 
```

我需要在 config.ru 中添加什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:01:59.607

The content of that file (**config.ru**), will depend on what you're actually trying to do and the framework you're using since is just used for configuring Rack applications, it tells the `Rack::Builder` what middleware should be used and in which order. These are some of the examples offered in the Heroku documentation [for deploying rack applications.](https://devcenter.heroku.com/articles/rack):

**Sinatra**:

```
require './hello'
run Sinatra::Application 
```

**Ramaze**:

```
require ::File.expand_path('./../hello', __FILE__)
Ramaze.start(:file => __FILE__, :started => true)
run Ramaze 
```

**Camping**

```
require './hello'
run Rack::Adapter::Camping.new(Hello) 
```

# php - Jcrop 对大尺寸图像有问题

> ID：15889625
> 
> 赞同：5
> 
> 时间：2013-04-08T21:48:36.453
> 
> 标签：php, jquery, image, crop, jcrop

由谷歌翻译

我正在运行以在 php 和 jquery 中实现上传表单，并说现在一切都很好，除了我认为是无稽之谈但仍然无法弄清楚的一件事。让我解释一下：在实践中，当我运行图像上传时，我立即打印到屏幕上是一个临时预览，我会去那里剪切到我喜欢的图像然后保存缩略图。然而，这个预览，如果我插入 jpg 高分辨率，我会看到真人大小，对于页面来说太大了。代码如下：

索引.PHP

```
<?php
function uploadImageFile() { // Note: GD library is required for this function
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $iWidth = $iHeight = 100; // desired image result dimensions
    $iJpgQuality = 90;

    if ($_FILES) {

        // if no errors and size less than 250kb
        if (! $_FILES['image_file']['error'] && $_FILES['image_file']['size'] < 55555250 * 1024) {
            if (is_uploaded_file($_FILES['image_file']['tmp_name'])) {

                // new unique filename
                $sTempFileName = 'cache/' . md5(time().rand());

                // move uploaded file into cache folder
                move_uploaded_file($_FILES['image_file']['tmp_name'], $sTempFileName);

                // change file permission to 644
                @chmod($sTempFileName, 0644);

                if (file_exists($sTempFileName) && filesize($sTempFileName) > 0) {
                    $aSize = getimagesize($sTempFileName); // try to obtain image info
                    if (!$aSize) {
                        @unlink($sTempFileName);
                        return;
                    }

                    // check for image type
                    switch($aSize[2]) {
                        case IMAGETYPE_JPEG:
                            $sExt = '.jpg';

                            // create a new image from file 
                            $vImg = @imagecreatefromjpeg($sTempFileName);
                            break;
                        /*case IMAGETYPE_GIF:
                            $sExt = '.gif';

                            // create a new image from file 
                            $vImg = @imagecreatefromgif($sTempFileName);
                            break;*/
                        case IMAGETYPE_PNG:
                            $sExt = '.png';

                            // create a new image from file 
                            $vImg = @imagecreatefrompng($sTempFileName);
                            break;
                        default:
                            @unlink($sTempFileName);
                            return;
                    }

                    // create a new true color image
                    $vDstImg = @imagecreatetruecolor( $iWidth, $iHeight );

                    // copy and resize part of an image with resampling
                    imagecopyresampled($vDstImg, $vImg, 0, 0, (int)$_POST['x1'], (int)$_POST['y1'], $iWidth, $iHeight, (int)$_POST['w'], (int)$_POST['h']);

                    // define a result image filename
                    $sResultFileName = $sTempFileName . $sExt;

                    // output image to file
                    imagejpeg($vDstImg, $sResultFileName, $iJpgQuality);
                    @unlink($sTempFileName);

                    return $sResultFileName;

                }
            }
        }
    }
}
}

$sImage = uploadImageFile();
echo '<div align=center><img src="'.$sImage.'" /></div>';
echo $sImage;
?>
  <!-- add styles -->
    <link href="css/main.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.Jcrop.min.css" rel="stylesheet" type="text/css" />

    <!-- add scripts -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <script src="js/script.js"></script>
</head>
<body>

    <div class="demo">
        <div class="bbody">

            <!-- upload form -->
            <form id="upload_form" enctype="multipart/form-data" method="post" onsubmit="return checkForm()">
                <!-- hidden crop params -->
                <input type="hidden" id="x1" name="x1" />
                <input type="hidden" id="y1" name="y1" />
                <input type="hidden" id="x2" name="x2" />
                <input type="hidden" id="y2" name="y2" />

                <h2>Step1: Please select image file</h2>
                <div><input type="file" name="image_file" id="image_file" onchange="fileSelectHandler()" /></div>

                <div class="error"></div>

                <div class="step2">
                    <h2>Step2: Please select a crop region</h2>
                    <img id="preview"/> <!-- QUESTA È LA PREVIEW -->

                    <div class="info">
                        <label>File size</label> <input type="text" id="filesize" name="filesize" />
                        <label>Type</label> <input type="text" id="filetype" name="filetype" />
                        <label>Image dimension</label> <input type="text" id="filedim" name="filedim" />
                        <label>W</label> <input type="text" id="w" name="w" />
                        <label>H</label> <input type="text" id="h" name="h" />
                    </div>

                    <input type="submit" value="Upload" />
                </div>
            </form>
        </div>
    </div>
</body>
</html> 
```

脚本.JS

```
function bytesToSize(bytes) {
var sizes = ['Bytes', 'KB', 'MB'];
if (bytes == 0) return 'n/a';
var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + sizes[i];
};

// check for selected crop region
function checkForm() {
  if (parseInt($('#w').val())) return true;
  $('.error').html('Please select a crop region and then press Upload').show();
  return false;
};

// update info by cropping (onChange and onSelect events handler)
function updateInfo(e) {
$('#x1').val(e.x);
$('#y1').val(e.y);
$('#x2').val(e.x2);
$('#y2').val(e.y2);
$('#w').val(e.w);
$('#h').val(e.h);
};

// clear info by cropping (onRelease event handler)
function clearInfo() {
$('.info #w').val('');
$('.info #h').val('');
};

function fileSelectHandler() {

// get selected file
var oFile = $('#image_file')[0].files[0];

// hide all errors
$('.error').hide();

// check for image type (jpg and png are allowed)
var rFilter = /^(image\/jpeg|image\/png)$/i;
if (! rFilter.test(oFile.type)) {
    $('.error').html('Please select a valid image file (jpg and png are allowed)').show();
    return;
}

// check for file size
if (oFile.size > 55555250 * 1024) {
    $('.error').html('You have selected too big file, please select a one smaller image file').show();
    return;
}

// preview element
var oImage = document.getElementById('preview');

// prepare HTML5 FileReader
var oReader = new FileReader();
    oReader.onload = function(e) {

    // e.target.result contains the DataURL which we can use as a source of the image
    oImage.src = e.target.result;
    oImage.onload = function () { // onload event handler

        // display step 2
        $('.step2').fadeIn(500);

        // display some basic image info
        var sResultFileSize = bytesToSize(oFile.size);
        $('#filesize').val(sResultFileSize);
        $('#filetype').val(oFile.type);
        $('#filedim').val(oImage.naturalWidth + ' x ' + oImage.naturalHeight);

        // Create variables (in this scope) to hold the Jcrop API and image size
        var jcrop_api, boundx, boundy;

        // destroy Jcrop if it is existed
        if (typeof jcrop_api != 'undefined') 
            jcrop_api.destroy();

        // initialize Jcrop
        $('#preview').Jcrop({
            minSize: [32, 32], // min crop size
            aspectRatio : 1, // keep aspect ratio 1:1
            bgFade: true, // use fade effect
            bgOpacity: .3, // fade opacity
            onChange: updateInfo,
            onSelect: updateInfo,
            onRelease: clearInfo
        }, function(){

            // use the Jcrop API to get the real image size
            var bounds = this.getBounds();
            boundx = bounds[0];
            boundy = bounds[1];

            // Store the Jcrop API in the jcrop_api variable
            jcrop_api = this;
        });
    };
};

// read selected file as DataURL
oReader.readAsDataURL(oFile);
} 
```

jquey.Jcrop.min.css

```
/* jquery.Jcrop.min.css v0.9.10 (build:20120429) */
.jcrop-holder{direction:ltr;text-align:left;}
.jcrop-vline,.jcrop-hline{background:#FFF url(Jcrop.gif) top left repeat;font-size:0;position:absolute;}
.jcrop-vline{height:100%;width:1px!important;}
.jcrop-hline{height:1px!important;width:100%;}
.jcrop-vline.right{right:0;}
.jcrop-hline.bottom{bottom:0;}
.jcrop-handle{background-color:#333;border:1px #eee solid;font-size:1px;}
.jcrop-tracker{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;height:100%;width:100%;}
.jcrop-handle.ord-n{left:50%;margin-left:-4px;margin-top:-4px;top:0;}
.jcrop-handle.ord-s{bottom:0;left:50%;margin-bottom:-4px;margin-left:-4px;}
.jcrop-handle.ord-e{margin-right:-4px;margin-top:-4px;right:0;top:50%;}
.jcrop-handle.ord-w{left:0;margin-left:-4px;margin-top:-4px;top:50%;}
.jcrop-handle.ord-nw{left:0;margin-left:-4px;margin-top:-4px;top:0;}
.jcrop-handle.ord-ne{margin-right:-4px;margin-top:-4px;right:0;top:0;}
.jcrop-handle.ord-se{bottom:0;margin-bottom:-4px;margin-right:-4px;right:0;}
.jcrop-handle.ord-sw{bottom:0;left:0;margin-bottom:-4px;margin-left:-4px;}
.jcrop-dragbar.ord-n,.jcrop-dragbar.ord-s{height:7px;width:100%;}
.jcrop-dragbar.ord-e,.jcrop-dragbar.ord-w{height:100%;width:7px;}
.jcrop-dragbar.ord-n{margin-top:-4px;}
.jcrop-dragbar.ord-s{bottom:0;margin-bottom:-4px;}
.jcrop-dragbar.ord-e{margin-right:-4px;right:0;}
.jcrop-dragbar.ord-w{margin-left:-4px;}
.jcrop-light .jcrop-vline,.jcrop-light .jcrop-hline{background:#FFF;filter:Alpha(opacity=70)!important;opacity:.70!important;}
.jcrop-light .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#000;border-color:#FFF;border-radius:3px;}
.jcrop-dark .jcrop-vline,.jcrop-dark .jcrop-hline{background:#000;filter:Alpha(opacity=70)!important;opacity:.7!important;}
.jcrop-dark .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#FFF;border-color:#000;border-radius:3px;}
.jcrop-holder img,img.jcrop-preview{max-width:none;} 
```

如果不明白，您可以下载完整的脚本。（对不起我的英语，我是意大利人）下载：[http ://dfiles.eu/files/6yazp1des](http://dfiles.eu/files/6yazp1des)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-16T21:51:39.203

回复晚了，但希望将来必须帮助其他人处理 JCrop 中的较大图像。您不必做任何更大的事情，只需像这样提供 JCrop 的参数

```
 $('#cropbox').Jcrop({
      aspectRatio: 1,  //If you want to keep aspectRatio
      boxWidth: 650,   //Maximum width you want for your bigger images
      boxHeight: 400,  //Maximum Height for your bigger images
      onSelect: updateCoords 
 },function()
 {
      alert('Now you see smaller preview of your bigger one.');
 }); 
```

好消息是，当您裁剪图像并获取尺寸时，您将获得真实的图像尺寸意味着大图像的尺寸，因此您可以通过服务器裁剪图像而无需再次计算任何东西，只需发送尺寸并裁剪即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T00:51:52.617

试图仔细挑选我的话，以便他们为你翻译得更好。

缩小图像以适应 jcrop 窗口是一项复杂的任务。我用 ColdFusion 做的，所以我没有 php 中的示例。相反，我会给你一个做什么的清单。

1.  上传图片
2.  读取图像尺寸
3.  以适合您窗口的固定比例显示图像
4.  确定您的缩小图像与全尺寸图像的比例
5.  取 jCrop 为您的作物 X、Y、宽度和高度提供的值，并将它们乘以您的比例
6.  将您的裁剪应用到原始图像，但使用您从第 5 步获得的值

一个常见的问题是获取非整数的裁剪值，您通常希望将任何值向下舍入到最接近的整数，以避免裁剪值可能大于图像。

# ruby - 守卫/守卫 sass 不编译更改

> ID：15889634
> 
> 赞同：0
> 
> 时间：2013-04-08T21:49:01.103
> 
> 标签：ruby, sass, osx-mountain-lion, guard

我在编译更新到我的 .sass 文件时遇到`guard`问题`guard-sass`。我已经安装了它们，将guard-sass配置指向了我的输入和输出目录，但是每当我保存我的更改时，.css 文件都没有得到更新。

最初我认为这可能是权限问题，但奇怪的是我已经设置`:all_on_start => true`了哪些单词，所以我怀疑它可能是这样的。

这是我的 GuardFile：

```
guard 'sass',
  :input => 'assets/sass',
  :output => 'static/css',
  :all_on_start => true 
```

我也尝试过（以防万一避免长符号有所作为）：

```
guard 'sass',
  :all_on_start => true,
  :output => 'static/css' do
    watch %r{^assets/sass/(.+\.s[ac]ss)$}
  end 
```

这是我用调试启动Guard的时候（`guard start -d`- 只是调试显示我缺少的东西）：

```
tavocado:data tavocado$ guard start -d
22:39:49 - DEBUG - Command execution: emacsclient --eval '1' 2> /dev/null || echo 'N/A'
22:39:49 - INFO - Guard uses TerminalTitle to send notifications.
22:39:49 - DEBUG - Command execution: hash stty
22:39:49 - DEBUG - Guard starts all plugins
22:39:49 - DEBUG - Hook :start_begin executed for Guard::Sass
22:39:49 - INFO - Sass [0.02s] base.sass -> base.css

22:39:49 - DEBUG - Hook :start_end executed for Guard::Sass
22:39:49 - INFO - Guard is now watching at '/data'
22:39:50 - DEBUG - Command execution: stty -g 2>/dev/null
22:39:50 - DEBUG - Start interactor 
```

我正在使用默认 ruby​​ 安装（ruby 1.8.7，gem 1.3.6）在 OS X 10.8.3 上安装它。

我已经做了几个小时了，我完全被难住了，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:21:49.750

取自 Guard wiki：

> 如果您在 Mac OS X 上并且遇到 Guard 对文件更改没有反应或 Pry 行为异常的问题，那么您可能会在使用 libedit 而不是 readline 的 Ruby 构建下受到影响。

要解决您的问题，您需要[安装适当的 Readline 支持](https://github.com/guard/guard/wiki/Add-proper-Readline-support-to-Ruby-on-Mac-OS-X)。由于 Ruby 1.8.7 将于 6 月结束生命周期并且不会收到安全更新，因此我建议升级到 Ruby 2.0.0。

# c# - 如何在具有透明度和文本的图像上绘制矩形

> ID：15889637
> 
> 赞同：23
> 
> 时间：2013-04-08T21:49:10.983
> 
> 标签：c#, gdi+

这是我的第一个基于图形的项目，首先我需要能够在具有透明度和文本的位图上绘制一个矩形。

我不知道从哪里开始。我做了一些研究，但似乎找不到可以让我在图像中添加半透明矩形的文章。

我将拥有一个我需要能够操作的图像流。

有人可以为我指出正确的方向吗？

一个有源代码的站点会很棒，因为我以前从未做过任何 GDI 工作。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-08T22:01:57.960

你可以尝试这样的事情：

```
// Load the image (probably from your stream)
Image image = Image.FromFile( imagePath );

using (Graphics g = Graphics.FromImage(image))
{
   // Modify the image using g here... 
   // Create a brush with an alpha value and use the g.FillRectangle function
}

image.Save( imageNewPath ); 
```

编辑：创建半透明灰色画笔的代码

```
Color customColor = Color.FromArgb(50, Color.Gray);
SolidBrush shadowBrush = new SolidBrush(customColor);
g.FillRectangles(shadowBrush, new RectangleF[]{rectFToFill}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T22:04:10.933

要开始使用，您需要从要修改的图像创建一个 Graphics 上下文。[看这里。](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage.aspx)

```
// Create image.
Image imageFile = Image.FromFile("SampImag.bmp");

// Create graphics object for alteration.
Graphics newGraphics = Graphics.FromImage(imageFile); 
```

一旦你有了 Graphics 对象，你就可以使用它的许多方法在图像上绘图。在您的示例中，您将使用具有 ARGB 颜色的[DrawRectangle](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawrectangle.aspx)方法在图像上创建一个半透明的矩形。

然后，您可以将图像显示到屏幕控制或将其保存到磁盘。

# android - ActionBar 显示所有操作或不显示，将所有操作放入溢出菜单

> ID：15889643
> 
> 赞同：2
> 
> 时间：2013-04-08T21:49:38.717
> 
> 标签：android, android-actionbar, actionbarsherlock, android-menu

我的应用程序针对 SDK 17，我正在使用 Android 4.x 模拟器进行测试（使用支持库和 ActionBarSherlock，以便 ActionBar 可用于 Android 2.x）。

我的一项活动有 6 个菜单项。有 3 个至关重要，需要一直展示。剩余的 3 个可以在溢出菜单中，但如果有空间放置第 4 个或第 5 个图标，我希望尽可能多地显示。

我的问题是 ActionBar 似乎只显示 ALL 或 NONE。我设置`android:showAsAction="always"`了前 3 个，然后设置`android:showAsAction="ifRoom"`了后 3 个。但是，我在 ActionBar 中没有显示它们，但它添加了溢出菜单动作（三个垂直点），然后在溢出菜单中显示所有 6 个动作。

我一直在迭代和测试，试图弄清楚它决定如何表现。如果 6 个选项中的任何一个都有，`ifRoom`那么它们都将被放入溢出菜单，这似乎很愚蠢。

难道我做错了什么？我怎样才能得到一些显示的动作并让溢出菜单......保持**溢出**？

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <group android:id="@+id/group" >
        <item
            android:id="@+id/add"
            android:icon="@drawable/ic_menu_btn_add"
            android:showAsAction="always"
            android:title="Add"/>
        <item
            android:id="@+id/calculateNPV"
            android:icon="@drawable/menu_icon_npv"
            android:showAsAction="always"
            android:title="NPV"/>
        <item
            android:id="@+id/calculateIRR"
            android:icon="@drawable/menu_icon_irr"
            android:showAsAction="always"
            android:title="IRR/YR"/>
        <item
            android:id="@+id/send"
            android:icon="@drawable/content_email"
            android:showAsAction="always"
            android:title="@string/share"/>
        <item
            android:id="@+id/graph"
            android:icon="@drawable/ic_menu_gallery"
            android:showAsAction="always"
            android:title="Graph"/>
        <item
            android:id="@+id/deleteReorder"
            android:icon="@drawable/ic_menu_clear_playlist"
            android:showAsAction="always"
            android:title="Delete/Reorder Cashflows"/>
        </group>

</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:58:39.260

尝试摆脱`<group>`. 极有可能`<group>`导致溢出行为作用于整个组而不是单个项目。

# c++ - 在主机应用程序中使用 Qt 用户界面

> ID：15889646
> 
> 赞同：0
> 
> 时间：2013-04-08T21:49:47.567
> 
> 标签：c++, windows, qt

我正在扩展一个在 Windows 上运行的商业应用程序。它可以通过插件进行扩展，对于这个应用程序来说，插件是普通的 DLL。从插件 DLL 导出的自由函数可以挂接到主机应用程序 UI，形成命令，并且这些命令可以基于用户与主机应用程序 UI 的交互来使用。此外，看起来插件与宿主应用程序在同一个线程中运行，或者至少所有插件都在同一个线程中运行。

也可以为这些插件编写用户界面。由于宿主应用程序是从另一个平台移植的，用户界面使用窗口作为主窗口和对话框面板的主要容器，但窗口内容及其控件是所有者绘制的。

应用程序附带的示例插件使用编写 Windows 用户界面的老式方式 - 它们具有标准资源文件、标准窗口过程、标准对话框过程、使用 GetMessage()、TranslateMessage()、DispatchMessage 的标准事件循环()。

这些示例插件中的 Windows 是在插件 DLL 函数之一中创建的。事件循环也在那里运行。

在这些示例中，可以创建模态和非模态窗口，并且集成似乎工作正常。只是视觉风格“有点”混合。

甚至有可能，或者更好的是，由于简单的示例设计，不允许多次调用该命令，这会打开多个相同类型的窗口，但看起来一切正常。

我想将 Qt 用于我的插件的 UI。但是，当我这样做时，主机用户界面就会停止反应。它甚至没有重新粉刷。

最初我使用 QApplication.exec()，它阻止了一切，但很快我就学会了不调用它。相反，我保留示例应用程序中的原始消息循环，并在其中调用 QApplication.processEvent()。但它仍然不起作用。

我想知道，当 Qt 应用程序的行为如此不同时，那里发生了什么？Qt 是否阻止了某些消息或发生了什么？

我也尝试过集成QWinWidget，但效果类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:52:27.897

我想到的一种解决方案是使用 QtConcurrent::run() 在单独的线程中调用插件。它返回 QFuture 对象，该对象可用于使用 QFuture::waitForFinished() 等待线程，从而使用 Qt 应用程序的事件循环。QFuture 的模板参数可用于从函数返回结果。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:27:55.987

我将与 a 中的标准事件循环元素和消息`QThread`进行交互，然后使用信号和插槽与 Qt GUI 进行交互。Qt 的事件循环系统可能类似于其他操作系统的事件循环，但它也为内存管理和其他各种自身独有的事情做了很多事情。

事件系统的文档可能会更清楚地说明为什么它会阻止您正在使用的插件/dll 的循环：

[http://qt-project.org/doc/qt-4.8/eventsandfilters.html](http://qt-project.org/doc/qt-4.8/eventsandfilters.html)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:45:57.363

您不需要自己的消息泵（GetMessage()、TranslateMessage()、DispatchMessage() 循环），因为主机应用程序已经在运行它自己的。

如果您真的想将 Qt 添加到该组合中，它似乎是 QWinWidget 适合您的方式。

你也可以试试我的 htmlayout 或 sciter 引擎，这样你的 UI 将被定义为 HTML/CSS。

# c++ - 如何从链接器错误转到源代码中的代码行？

> ID：15889650
> 
> 赞同：3
> 
> 时间：2013-04-08T21:49:59.563
> 
> 标签：c++, linux, gcc, linker, g++

链接器产生这种输出

```
/var/tmp/ccITB4j2.o: In function `main':
/var/tmp/ccITB4j2.o(.text+0x4): undefined reference to `myFunction(void)' 
```

如何在 .text+0x4 处找到实际调用该函数的指令对应的源代码行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:32:21.563

首先，您的问题的另一个答案是错误的：在 Linux 上，您*确实*从链接器获取文件和行号：

```
$ cat foo.cc
extern int myFunction(void);

int main()
{
  return myFunction();
}
$ g++ -g foo.cc
/tmp/cc3twlhL.o: In function `main':
/tmp/foo.cc:5: undefined reference to `myFunction()'
collect2: ld returned 1 exit status 
```

上面的输出来自`gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3`和 linker `GNU ld (GNU Binutils for Ubuntu) 2.22`，但对于更旧版本的 GCC 和 ld 也是如此。

你没有得到文件/行的原因一定是

*   你没有使用`-g`标志，或者
*   你*真的*老了`ld`，或者
*   您已经配置了`ld`不支持调试（我不确定这是否可能）。

但是，即使您`ld`拒绝告诉您文件和行，也不会丢失所有内容。您可以将源代码编译为对象，然后用于`objdump -rdS foo.o`获取相同的信息：

```
g++ -g -c foo.cc
objdump -rdS foo.o

Disassembly of section .text:

0000000000000000 <main>:
extern int myFunction(void);

int main()
{
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
  return myFunction();
   4:   e8 00 00 00 00          callq  9 <main+0x9>
            5: R_X86_64_PC32    _Z10myFunctionv-0x4
}
   9:   5d                      pop    %rbp
   a:   c3                      retq 
```

在上面的输出中，您可以清楚地看到哪个源代码行导致在目标文件中发出引用`_Z10myFunctionv`（这是 的`C++`损坏名称）。`myFunction(void)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:59:00.670

理解链接器错误的关键是了解声明和定义之间的区别。

这是一个声明：

```
int myFunction(); 
```

这是一个定义：

```
int myFunction() {
  // do something
  return val;
} 
```

当您声明某些内容时，编译器会将其视为您的承诺，您最终也会定义它（可能稍后在同一个翻译单元中，或者可能在不同的翻译单元中）。这些承诺实际上是由链接器在链接时检查的。

因此，链接器错误（例如这个）实际上是在抱怨您违反了定义某些内容的承诺。由于这是在编译之后发生的，并且由于它处理的是“不存在”的东西，所以询问“不存在的行号”是没有意义的。

希望这有助于解释为什么您不会将行号附加到来自链接器的“未解析符号”错误消息上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T01:39:34.983

我有 3 个答案（到目前为止），以及关于我需要知道如何执行此操作的特定案例的分析

* * *

`addr2line`可以做到，前提是编译器生成的调试信息与工具兼容。

```
~ cat asdf.txt
/var/tmp/ccITB4j2.o: In function `main':
/var/tmp/ccITB4j2.o(.text+0x4): undefined reference to `myFunction(void)'
~ cat asdf.txt | addr2line -e /var/tmp/ccITB4j2.o
... it should print src:line info here 
```

* * *

然后是`objdump`：

```
objdump --dwarf=decodedline test.o
test.o:     file format elf64-x86-64

Decoded dump of debug contents of section .debug_line:

CU: test.cc:
File name                           Line number     Starting address
test.cc                                       2                 0x23
test.cc                                       3                 0x84 
```

* * *

为了回答“调试器如何做到这一点”这个问题，这里有一篇关于该主题的好文章：[调试器如何工作：第 3 部分 - 调试信息](http://eli.thegreenplace.net/2011/02/07/how-debuggers-work-part-3-debugging-information)，这是`objdump`选项的来源。

如果链接断开，我会提前为后代道歉。

* * *

我在 Linux 中使用 Solaris Studio 12.3 时遇到了这些问题。它看起来好像它生成的信息（无论是在`.debug_line`还是其他部分）调试信息与 不兼容`addr2line`，但仅在使用优化构建时。以下代码将引发类似的链接错误：

```
~ cat test.cc
struct Test {int x; Test(); };
inline void test() { Test *t = new Test(); }
void blah() { test(); }
~ CC -g -Kpic test.cc -shared -o libtest.so -Wl,--unresolved-symbols=ignore-in-shared-libs
(...)
test.cc:2: undefined reference to `void operator delete(void*)'
(...)
~ CC -g -Kpic test.cc -shared -o libtest.so -Wl,--unresolved-symbols=ignore-in-shared-libs -O0
(...)
test.cc:(.text+0x45): undefined reference to `void operator delete(void*)'
(...)
~ CC -g -Kpic test.cc     -c
~ addr2line -e test.o +0x45
test.cc:2
~ CC -g -Kpic test.cc -O0 -c
~ addr2line -e test.o +0x45
??:? 
```

解决这种情况下的链接错误需要针对编译器库进行链接`libCrun`。作为反对者评论的一个反例，即知道行号是无用的：它确实让我摸不着头脑，不知道在哪里`delete`引用。事实证明，编译器正在插入额外的代码来分配和删除它。如果它正确地打印了行号（函数的右括号），那么编译器正在做一些不寻常的事情会更加明显。

# open-source - 发布具有第三方依赖项的开源项目的最佳实践

> ID：15889653
> 
> 赞同：2
> 
> 时间：2013-04-08T21:50:11.097
> 
> 标签：open-source

我即将向 codeplex 发布一个项目。我的问题是我的项目所依赖的 2 个第三方库的最佳方法是什么。一个是 System.Data.Sqlite，另一个是 Dapper。我应该将我构建的特定二进制文件放入存储库中，这将允许用户获取代码并在没有其他依赖项的情况下运行，还是应该在文档中将它们作为要求提及？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:01:14.497

我不知道 CodePlex 社区通常如何处理这个问题。我只能笼统地说。

通常，您不会在开源代码存储库中发布二进制文件。通常，Windows 二进制文件作为发行版的一部分发布，大多数时候作为安装程序包发布。在这个包中，您将包含您的可执行文件所依赖的所有二进制文件。

请注意，如果您已经发布了二进制文件（您自己的软件），那么提供依赖项会更有意义。想想最坏的情况，用户使用他从第三方来源构建的略微但不完全兼容的二进制文件尝试您的二进制文件，并获得不稳定的行为。

但是，您必须注意的一件事是，如果您发布第三方软件，您还必须遵守他们的**许可**。在 GPL 的示例中，这意味着您需要提供一些相关文档，并根据要求提供用于构建这些二进制文件的源文件。因此，在某些情况下，不发货会容易得多。

# c - 最佳阵列推送

> ID：15889655
> 
> 赞同：3
> 
> 时间：2013-04-08T21:50:14.300
> 
> 标签：c, arrays

我想创建一些带有两个参数的函数：int 元素和输入数组。我希望这个函数将元素参数放在数组的第一位，将数组放大单个索引，最后将输入数组放在推入的元素之后。

为了说明这一点，假设我的输入数组是 {1, 2, 3}，作为参数传递的元素是 5。输出应该是 {5, 1, 2, 3}。

我怎样才能以最佳方式做到这一点？

我提出了这个功能：

```
void push(int el, int **arr)
{
    int *arr_temp = *arr;

    *arr = NULL;
    *arr = (int*) malloc(sizeof(int)*(n - 1));

    (*arr)[0] = el;
    for(int i = 0; i < (int)n - 1; i++)
    {
        (*arr)[i + 1] = arr_temp[i];
    }
} 
```

它可以工作，但是它不是我写的最快的函数，而且它会减慢整个程序的速度。有一个更好的方法吗？

我的猜测是在做类似的事情`(*arr)[1] = arr_temp`，但它没有用，我不确定 C 中是否有可能做这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:25:27.403

而不是使用原始数组，最好将数组包装在 a 中`struct`：

```
typedef struct
{
    size_t elementsAllocated;
    size_t elementsUsed;
    int* buffer;
} vector; 
```

然后你的推送功能可能看起来像：

```
vector* push_front(vector* v, int item)
{
    if (elementsUsed == elementsAllocated)
    {
        // Time to grow the buffer.
        int elementsAllocated = v->elementsAllocated * 2;
        if (elementsAllocated <= v->elementsAllocated)
        {
            abort(); // Overflow occurred.
        }

        int* buffer = realloc(v->buffer, elementsAllocated * sizeof *buffer);
        if (buffer == NULL)
        {
            abort();
        }

        // Shift the existing data over.
        memmove(buffer + elementsAllocated - v->elementsUsed,
                buffer + v->elementsAllocated - v->elementsUsed,
                v->elementsUsed * sizeof *buffer);
        v->buffer = buffer;
        v->elementsAllocated = elementsAllocated;
    }

    // Prepend the new item.
    int* p = v->buffer + v->elementsAllocated - v->elementsUsed - 1;
    *p = item;
    v->elementsUsed++;
    return p;
} 
```

如果您可以将项目附加到数组的末尾而不是添加到开头，这将变得更加简单。请注意，上面的代码完全未经测试，可能包含一个错误，但核心思想是：

*   内存分配很昂贵。分配比您需要的更多的内存，然后写入已分配但未使用的空间。这减少了您需要重新分配缓冲区和复制数据以将其转移的次数。
*   通过以更大的步长增加缓冲区，最大限度地减少增加缓冲区的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:06:49.250

正如评论中所建议的，您可能只想追加到数组，然后使用一些结构和函数来让您访问所需的元素，就像数组被追加到一样。您似乎已经缩小了尺寸，所以我只建议一些用于反转的示例代码。这是未经测试的，因为我现在没有一个 unix 盒子来方便测试 - 请注意我的 C 有点生锈。

```
typedef struct{
    int* array;
    int size;
} prependArray;

void accessElement(int element, prependArray myArray) {
    return myArray.array[size-element-1];
} 
```

这样，您还可以分配比您需要的稍大的数组。在“prependArray”中保留一个 int，列出您上次重新分配到的大小。当有人尝试添加项目时，请检查您是否已达到该限制；如果有，请在添加新值之前调整列表大小。如果您要添加大量数字，这可以节省分配时间。

您可能想查找“向量”数据结构以了解更多关于这种想法的信息。

# php - 如何强制使用 SSL 的 Wordpress 管理/登录页面？

> ID：15889656
> 
> 赞同：4
> 
> 时间：2013-04-08T21:50:14.937
> 
> 标签：php, wordpress, ssl, url-rewriting

我在 blog.my-site.com 之类的子域中有 WordPress，并且不能对子域使用 SSL (https://blog.my-site.com)

有没有办法强制 WordPress 管理员/登录页面仅使用 SSL URL https://www.my-site.com/blog_dir/wp-admin/（文件夹名称与子域不同）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T22:41:13.997

要[强制通过 SSL 进行管理和登录](http://codex.wordpress.org/Administration_Over_SSL)，正确的方法是将`FORCE_SSL_ADMIN`常量设置为`wp-config.php`.

```
define( 'FORCE_SSL_ADMIN', true ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-30T15:43:46.637

如果 WordPress 托管在提供 SSL 的反向代理之后，也会发生这种情况。

将以下内容粘贴到主题的 functions.php 中：

```
define('FORCE_SSL_ADMIN', true);
// a comma-separated list e.g. http,https
if (strpos($_SERVER['HTTP_X_FORWARDED_PROTO'], 'https') !== false)
       $_SERVER['HTTPS']='on'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T23:12:20.740

谢谢大家的信息

这是用于子域 WordPress 的共享 SSL 插件：WordPress HTTPS (SSL) [http://wordpress.org/extend/plugins/wordpress-https/](http://wordpress.org/extend/plugins/wordpress-https/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T21:57:08.020

我以前用过这个

```
if($_SERVER["HTTPS"] != "on")
{
    header("Location: https://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
    exit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T21:57:32.787

添加到插件或页面中包含的其他位置，如果协议是 https，并且用户尚未登录，并且页面还不是登录页面，则将重定向到登录屏幕：

```
add_filter( 'parse_query', 'query_parser' );

function query_parser() {
  if(!is_user_logged_in() && $pagenow != 'wp-login.php' && $_SERVER['HTTPS'] == "on") {
      wp_redirect( home_url() . '/wp-login.php', 302 );
      exit;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-20T10:20:24.750

我遇到了同样的问题

问题出在我的前端登录功能中

```
wp_signon( $login_data, false); 
```

$secure_cookie 默认为无。

我将其设置为 true，并且效果很好。

```
wp_signon( $login_data, true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-07T07:16:37.123

```
if ( force_ssl_admin() && ! is_ssl() ) {
    if ( 0 === strpos( $_SERVER['REQUEST_URI'], 'http' ) ) {
        wp_safe_redirect( set_url_scheme( $_SERVER['REQUEST_URI'], 'https' ) );
        exit();
    } else {
        wp_safe_redirect( 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] );
        exit();
    }
} 
```

# asp.net - 自动化 .Net 1.1 Web 应用程序部署

> ID：15889660
> 
> 赞同：0
> 
> 时间：2013-04-08T21:50:30.500
> 
> 标签：asp.net, .net, build-automation, asp.net-1.1

我一直在研究如何自动化 VS2003 Web 应用程序项目。通过命令行的“DevEnv.com”解决方案确实需要 IIS 和适当的映射，这是 tfs2012 团队构建框的显示停止器，可能我们必须从不同的分支构建相同的项目（不同的物理路径到相同的虚拟文件夹映射问题）。
到目前为止，唯一的选择是迁移到新的项目系统。
我想知道是否有人能够在不大幅更改代码（项目系统或 .net 目标版本）的情况下使用 web 应用程序项目进行团队构建。

PS：我知道 MSBee 和 Nant，但他们并没有提供太多的解决方案。

# playframework-2.0 - 如何在播放2中以生产模式设置响应的标头

> ID：15889666
> 
> 赞同：1
> 
> 时间：2013-04-08T21:51:01.870
> 
> 标签：playframework-2.0

我创建了一个网站，让用户上传图片并返回。为了降低负载，我尝试像这样使用客户端缓存：

```
byte[] data = Files.readAllBytes(path);
response().setHeader(CACHE_CONTROL, "max-age=3600");
response().setHeader(ETAG, image);
return ok(data); 
```

这在开发模式（播放运行）下工作正常，但是当我在生产模式下运行站点时，标题消失了，没有任何缓存。

谢谢

# c++ - windows上的OpenGL顶点缓冲对象——如何运行呢？qt窗口

> ID：15889675
> 
> 赞同：0
> 
> 时间：2013-04-08T21:51:47.593
> 
> 标签：c++, windows, qt, opengl, vbo

我正在尝试使用 VBO 从高度图创建地形，但我不知道我应该在我的项目中包含什么或使用什么标题。我正在使用 Qt，我的操作系统是 Windows 7。当我想使用 glGenBuffers(1, &VboId); 它抛出一个错误：“glGenBuffers 没有在这个范围内声明”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:10:31.803

在特定版本之前，VBO 不是 OpenGL 核心的一部分，依此类推。这会使访问它变得很麻烦。大多数开发人员使用 GLEW 之类的库来解决 VBO 等扩展的查找问题。

另一种可能性是使用 Qt 功能，如下所述：http: [//entropologygames.wordpress.com/2009/10/31/howto-use-vertex-buffer-objectsvbo-with-opengl-qt/](http://entropologygames.wordpress.com/2009/10/31/howto-use-vertex-buffer-objectsvbo-with-opengl-qt/)

**但是，在您的情况下，我建议您使用 QGLBuffer**（Qt 4.7 及更高版本），它很好地封装了 VBO 功能。 [http://qt-project.org/doc/qt-4.8/qglbuffer.html](http://qt-project.org/doc/qt-4.8/qglbuffer.html)

# forms - Symfony 如何扩展集合表单域

> ID：15889681
> 
> 赞同：0
> 
> 时间：2013-04-08T21:52:11.847
> 
> 标签：forms, symfony, collections, custom-post-type

我正在尝试扩展集合表单以使用自己的模板呈现它...

```
class ContactFieldType extends AbstractType
{
  public function setDefaultOptions(OptionsResolverInterface $resolver)
  {
    $resolver->setDefaults(array(
      'collection' => array('type' => new ContactType())
    ));
  }

  public function getParent()
  {
    return 'collection';
  }

  public function getName()
  {
    return 'contactField';
  }
} 
```

我以这种方式使用这种类型：

```
$builder->add('contacts',new ContactFieldType(), array(
  'label_attr' => array('class' => 'contacts')
)); 
```

我收到以下错误：

> 表单的视图数据应为标量、数组或\ArrayAccess 的实例类型，但它是MyApp\MainBundle\Entity\Contact 类的实例。您可以通过将“data_class”选项设置为“MyApp\MainBundle\Entity\Contact”或添加将 MyApp\MainBundle\Entity\Contact 类的实例转换为标量、数组或 \ 的实例的视图转换器来避免此错误数组访问。

如果我使用这个：

```
$builder->add('contacts','collection', array(
  'type' => new ContactType(),
  'label_attr' => array('class' => 'contacts')
)); 
```

它工作正常。

我不想按照建议实现这个 data_class ...我想扩展集合小部件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T16:28:20.737

您的表单定义似乎很好，不需要更多的修补。你的问题在于实例化。

从我所见，我相信您或多或少地以这种方式实例化您的形式：

```
$model = new ParentClass();
$model->setContacts(new Contact());

$form = $this->createForm(new ParentFormType(), $model)); 
```

但是，*集合*表单类型不使用*Contact()*实例，而是使用此类实例的数组。

使用 Contact() 实例而不是此类对象的数组来提供您的实例化后，您的代码将失败。你需要做的是：

```
$model = new ParentClass();
$model->setContacts(array(new Contact()));

$form = $this->createForm(new ParentFormType(), $model)); 
```

尽管这是我相信您所做的，但您尚未提交实例化代码，因此很难判断我是否正确。如果您的问题仍然存在，我建议您提供它。

# php - 合并不同长度的子数组PHP

> ID：15889682
> 
> 赞同：0
> 
> 时间：2013-04-08T21:52:14.617
> 
> 标签：php, arrays

我有一个动态构建的数组，如下所示：

```
array(2) {
  [0]=>
  array(2) {
    [0]=>
    array(1) {
      ["rhID"]=>
      string(6) "169135"
    }
    [1]=>
    array(1) {
      ["rhID"]=>
      string(6) "168917"
    }
  }
  [1]=>
  array(2) {
    [0]=>
    array(1) {
      ["rhID"]=>
      string(6) "172168"
    }
    [1]=>
    array(123) {
      ["rhID"]=>
      string(6) "171169"
  } [3]=>
    array(123) {
      ["rhID"]=>
      string(6) "171129"
  }
  [3]=>
  array(1) {
    [0]=>
    array(1) {
      ["rhID"]=>
      string(6) "172768"
    }
} 
```

但是想像这样组合所有子数组：

```
array(1) {
  [0]=>
  array(4) {
    [0]=>
    array(1) {
      ["rhID"]=>
      string(6) "169135"
    }
    [1]=>
    array(1) {
      ["rhID"]=>
      string(6) "168917"
    }
    [2]=>
    array(1) {
      ["rhID"]=>
      string(6) "172168"
    }
    [3]=>
    array(123) {
      ["rhID"]=>
      string(6) "171169"
     }
    [4]=>
    array(1) {
      ["rhID"]=>
      string(6) "172768"
    }
  }    
} 
```

请注意，我永远不知道我将拥有多少个子数组。可能是 1 或 2 或 7。对不起，如果我忘了带括号，或者我正在记事本中快速编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:54:30.040

```
foreach ($array as $subarray) {
    foreach ($subarray as $entry) {
        $newArray[] = $entry;
    }
} 
```

就这么简单。

# javascript - 回调 .hover 功能不起作用

> ID：15889684
> 
> 赞同：0
> 
> 时间：2013-04-08T21:52:17.823
> 
> 标签：javascript, jquery, callback

我有这个js函数：

```
$('#linkNext').on({
    mouseenter: function () {
        if ($('#conteudo .boxes').hasClass('ativo')) {
            $('#conteudo .boxes').removeClass('ativo');
            $('.boxAberto').animate({width: '0'}, 600, function () {
                // callback
                $('#linkNext').hover(function () {
                    this.iid = setInterval(function () {
                        if (cont > -565) {
                            cont -= 5;
                            $('#conteudo').attr('style', 'left:' + cont + 'px');
                            console.log(cont)
                        }
                        if (cont <= -565) {
                            $('#linkNext').hide();
                        }
                    }, 0);
                });
                $('#linkNext').mouseleave(function () {
                    this.iid && clearInterval(this.iid);
                });
                // callback ends
            });
        } else {
            this.iid = setInterval(function () {
                if (cont > -565) {
                    cont -= 5;
                    $('#conteudo').attr('style', 'left:' + cont + 'px');
                    console.log(cont)
                }
                if (cont <= -565) {
                    $('#linkNext').hide();
                }
            }, 0);
        }
    },
    mouseleave: function () {
        this.iid && clearInterval(this.iid);
    }
}); 
```

在鼠标悬停时，它会检查元素是否具有 class `.ativo`。如果有，它将删除该类并为元素设置动画并请求回调。回调不起作用，我认为我使用`.hover`错误的方式。

`else`它将开始一个`setInterval`运行良好的功能，功能也是如此`mouseleave`。我遇到的问题只是回调，我不知道我做错了什么

****编辑*****

现在我更改了代码，只使用`.hover`with 回调而不是使用`.on`with `mouseenter mouseleave`。但我仍然有同样的问题。线上方的回调`// callback`不起作用..

```
$('#linkNext').hover(function () {
    if ($('#conteudo .boxes').hasClass('ativo')) {
        $('#conteudo .boxes').removeClass('ativo');
        $('.boxAberto').animate({width: '0'}, 600, function () {
            // callback
            if ($('#conteudo .boxes:not(.ativo)')) {
                $('#linkNext').hover(function () {
                    this.iid = setInterval(function () {
                        if (cont > -565) {
                            cont -= 5;
                            $('#conteudo').attr('style', 'left:' + cont + 'px');
                            console.log(cont)
                        }
                        if (cont <= -565) {
                            $('#linkNext').hide();
                        }
                    }, 0);
                }, function () {
                    this.iid && clearInterval(this.iid);
                });
            }
        });
    } else {
        this.iid = setInterval(function () {
            if (cont > -565) {
                cont -= 5;
                $('#conteudo').attr('style', 'left:' + cont + 'px');
                console.log(cont)
            }
            if (cont <= -565) {
                $('#linkNext').hide();
            }
        }, 0);
    }
}, function () {
    this.iid && clearInterval(this.iid);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:54:24.793

替换您的以下代码：

```
if ($('#conteudo .boxes:not(.ativo)')) {
            $('#linkNext').hover(function () {
                this.iid = setInterval(function () { 
```

对于这个：

```
if ($('#conteudo .boxes:not(.ativo)').length) {
            var dees = this;
            $('#linkNext').hover(function () {
                dees.iid = setInterval(function () {
                ...
                ...
            , function () {
                dees.iid && clearInterval(dees.iid);
            }); 
```

因为在执行此操作时，`this.iid`您正在为回调的函数原型分配一个`iid`属性，看起来您实际上想要将其添加到您的`.boxes`jquery 元素中，因为您的代码暗示了这一点。

所以你必须`this`在输入回调之前捕获一个变量，我这样做`var dees = this;`

此外，当您要检查 jquery 元素的存在时，请使用该`.length`属性。

# opengl - Macbook Air 中的 glGenBuffers 和许多 OpenGL 函数 EXC_BAD_ACCESS

> ID：15889687
> 
> 赞同：0
> 
> 时间：2013-04-08T21:52:30.673
> 
> 标签：opengl, exc-bad-access

我有一个奇怪的问题，很多 OpenGL 函数在我的 MacBook Air 中因 EXC_BAD_ACCESS 而失败。一个非常简单的函数，如 glGenBuffers 或 glGetString(GL_VENDOR) 会得到这个结果。我在 Xcode 中运行它。我得到分段错误：11 如果我在终端中运行。

像这样的示例代码失败：

```
#include<GLUT/glut.h>
#include<OpenGL/gl.h>
#include<OpenGL/glu.h>
#include<OpenGL/glext.h>

int main(){
    unsigned int test[3];
    glGenBuffers(3, test);
    return 0;
} 
```

我不确定这是否是我的系统的问题。我正在使用 2012 版 MacBook Air 和 OSX 10.8.2 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:53:04.237

您的 OpenGL 上下文创建代码在哪里？您需要一个有效的、活动的 OpenGL 上下文，以便您可以访问 OpenGL。此外，通过将`glext.h`您声明`glGenBuffers`为必须通过扩展加载机制初始化的函数指针。如果不初始化指向正确 OpenGL 函数的指针，取消引用它（= 调用它）将导致段错误。

在 MacOS X 中，您通常不需要`glext.h`，因为可用版本的 MacOS X 实际支持的所有 OpenGL 功能都已经存在于 OS X 框架中。

如果您想支持广泛的 MacOS X 版本，使用扩展机制是有意义的。

# ruby-on-rails - 成分有许多子成分建模

> ID：15889690
> 
> 赞同：1
> 
> 时间：2013-04-08T21:52:44.300
> 
> 标签：ruby-on-rails, database-design

我有一个`Recipe`模型，一个`Ingredient`模型。现在是食谱 `has_and_belongs_to_many :ingredients`和成分`has_and_belongs_to_many :recipes`。

因为可以想象一种成分可以由其他成分组成，所以我正在尝试在该模型上进行自联接，如下所示：

```
has_many :components, class_name: 'Ingredient', foreign_key: 'parent_id'
belongs_to :parent,   class_name: 'Ingredient' 
```

现在，这行得通，但是每个成分只能有一个父级，例如，蛋黄酱在食谱的“蟹饼”成分中，但它不能是某些“辣蛋黄酱”成分中的成分其他配方同时进行。

我想要得到的是这样的界面：

```
r = Recipe.create(name: "Jumbo Lump Crab Cakes")
r.ingredients << Ingredient.create(name: "Crab Cakes")
r.ingredients[0].ingredients # => []
r.ingredients[0].ingredients.create(name: "Mayonnaise")
r.ingredients[0].ingredients # => [#<Ingredient id: 2, name: "Mayonnaise">]
r.ingredients[0].ingredients[0].ingredients.create(name: "Eggs")
r.ingredients[0].ingredients[0].ingredients # => [#<Ingredient id: 3, name: "Eggs">]

Ingredient.last               # => #<Ingredient id: 3, name: "Eggs">
Ingredient.last.parent        # => #<Ingredient id: 2, name: "Mayonnaise">
Ingredient.last.parent.parent # => #<Ingredient id: 1, name: "Crab Cakes">

# Bonus points if a child ingredient can "walk up" its heritage tree to the recipe:
Ingredient.last.recipe        # => #<Recipe id: 1> 
```

显然，我需要一个关联表来存储成分/子成分的关系，但据我所知，这差不多。我尝试了各种壮举`source`和`through`魔法，但没有运气。

我还搞砸了一个多态关联，其中所有东西都有一个父对象，它要么是成分类型，要么是配方类型，但无法通过我想要的界面来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:06:01.917

想我明白了。最终使用了[这篇文章](http://blog.hasmanythrough.com/2007/10/30/self-referential-has-many-through)的修改版本。

```
create_table :ingredients do |t| # :hunts
  t.references :parent # :predator
  t.references :child  # :prey
end

add_index :ingredients, :parent_id # :hunts, :predator_id
add_index :ingredients, :child_id  # :hunts, :prey_id

create_table :components do |t| # :animals
  t.string :name
end

class Component < ActiveRecord::Base # Animal
  has_many :parentage, foreign_key: 'parent_id',
                       class_name: 'Ingredient',
                       dependent: :destroy

  has_many :children, through: :parentage

  has_many :progeny, foreign_key: 'child_id',
                     class_name: 'Ingredient',
                     dependent: :destroy

  has_many :parents, through: :progeny
end

class Ingredient < ActiveRecord::Base # Hunt
  belongs_to :parent, class_name: 'Component'
  belongs_to :child,  class_name: 'Component'
end 
```

对父母/后代命名相当满意。

# vb.net - DataAdapter 更新方法进度状态

> ID：15889694
> 
> 赞同：1
> 
> 时间：2013-04-08T21:52:51.723
> 
> 标签：vb.net, ms-access, dataset, freeze, insert-update

VB2010 使用 Access2007 作为后端。我正在创建一个 DataSet 并向其中添加几个 DataTables 并填充它们。大多数表都有少量记录，但一个表最多可以有一百万条记录。当我发出我的 .Update 命令时，有什么方法可以获取它的状态，以便我可以让用户知道它的 x% 已完成更新？

它工作得很好，但应用程序在更新时挂断了。

```
RowsUpdated = daNewParts.Update(dsInventory, "NewParts") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:57:05.560

OleDbDataAdapter 有两个称为[RowUpdated](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.rowupdated.aspx)和[RowUpdating](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.rowupdating.aspx)的事件，您可以使用它们在行已更新时或在更新事件之前接收通知。

```
AddHandler daNewParts.RowUpdated, New OleDbRowUpdatedEventHandler(AddressOf OnRowUpdated)

Sub OnRowUpdated(ByVal sender As Object, ByVal args As OleDbRowUpdatedEventArgs)
   .....
End Sub 
```

这只是问题的第一部分，现在您需要知道开始操作时将更新多少行。这可以通过在您正在更新的 DataTable 上调用 GetChanges 来获得

```
Dim count As Integer
Dim changedData = dsInventory.Tables("NewParts").GetChanges()
if changedData IsNot Nothing Then
   count = changedData.Rows.Count
End If 
```

现在你可以建立你的进度条了

# php - 在 Google Fusion 表中插入一行，使用表单

> ID：15889697
> 
> 赞同：3
> 
> 时间：2013-04-08T21:53:17.263
> 
> 标签：php, google-fusion-tables, forms, http-post

我正在尝试设置一个页面，允许访问者输入信息，然后将这些信息直接发布到 Google Fusion 表（而不是 mysql 数据库）。

我听说 Google 正在摆脱旧的 Fusion Tables SQL API，所以我需要符合 Fusion Tables API v.1 的东西。我知道它应该以 POST 请求的形式出现，格式如下： `INSERT INTO <tableid> (column name) VALUES (user-input response)`，但在尝试之后多次迭代，我没有任何成功。

最后，我求助于将基本表单输入的示例代码复制到融合表，将值更改为我自己的示例表。这仍然行不通。这是我的代码 - 我希望在这方面有一些经验的人能够评估。我真的不知道我在做什么，我猜。

```
<!DOCTYPE html>
<html>
  <head>

<style type="text/css">
  body { font-family: Arial; } 
</style>
<script src="https://apis.google.com/js/client.js?onload=initialize"></script>
<script type="text/javascript">
  // The clientId and apiKey are available at
  // https://code.google.com/apis/console. For more information, see
  // http://code.google.com/p/google-api-javascript-client/wiki/Authentication.

  var clientId = '424838770953.apps.googleusercontent.com';
  var apiKey = 'AIzaSyBGFOBBGu5x2LuCNmDIvfe-FEPtq--tRPI';

  var scopes = 'https://www.googleapis.com/auth/fusiontables';
  var tableId = '1c9tCQTEOog66RXBCQxNjmHDERbIJxuAm5SgBhSs';

  // Initialize the client, set onclick listeners.
  function initialize() {
    gapi.client.setApiKey(apiKey);
    document.getElementById('insert-data').onclick = insertData;
    window.setTimeout(function() { auth(true); }, 1);
  }

  // Run OAuth 2.0 authorization.
  function auth(immediate) {
    gapi.auth.authorize({
      client_id: clientId,
      scope: scopes,
      immediate: immediate
    }, handleAuthResult);
  }

  // Handle the results of the OAuth 2.0 flow.
  function handleAuthResult(authResult) {
    var authorizeButton = document.getElementById('authorize-button');
    var createTableButton = document.getElementById('create-table');
    if (authResult) {
      authorizeButton.disabled = true;
      createTableButton.disabled = false;
    } else {
      authorizeButton.disabled = true;
      authorizeButton.onclick = function() { auth(false); return false; };
    }
  }

  // Run a request to INSERT data.
 runClientRequest({
      path: '/fusiontables/v1/tables',

      method: 'POST'
    },  function insertData() {
    var name = document.getElementById('name').value;
    var age = document.getElementById('age').value;
    var insert = [];
    insert.push('INSERT INTO ');
    insert.push('1c9tCQTEOog66RXBCQxNjmHDERbIJxuAm5SgBhSs');
    insert.push(' (Name, Age) VALUES (');
    insert.push("'" + name + "', ");
    insert.push(age);
    insert.push(')');

    body: 'insert'
  }

  // Execute the client request.
  function runClientRequest(request, callback) {
    var restRequest = gapi.client.request(request);
    restRequest.execute(callback);
  }
</script>
</head>
<body>
<h1>
Fusion Tables JavaScript Example
</h1>
<h2>
(3) Insert data
</h2>
<p>
  Insert data into the newly created table.
</p>
<pre>INSERT INTO <span id="table-id-1">[table_id]</span> (Name, Age) VALUES ([name], 
[age])</pre>
<label>Name:</label>
<input type="text" id="name"><br>
<label>Age:</label>
<input type="age" id="age"><br>
<input type="button" id="insert-data" value="Insert data">
<p id="insert-data-output"><i>insert response goes here...</i></p><br> 
```

# ruby-on-rails - 每个函数有多个数据库用户

> ID：15889698
> 
> 赞同：0
> 
> 时间：2013-04-08T21:53:31.757
> 
> 标签：ruby-on-rails, security, database-connection, sql-injection, validation

我们正在探索如何通过仅允许关键函数在我们的 Rails 应用程序中执行任务来限制 SQL 注入风险。我是保安人员，不是全职铁路人员。

在我看来，只有在创建帐户（注册）或修改帐户（用户配置文件更新）时才会写入数据库。为简化起见，我们假设用户在应用程序中没有发生其他更新。

如果有人没有阻止对只读请求的 SQL 注入攻击，我们将通过两个单独的调用得到更好的保护。

rails 可以支持以下配置吗？-

*   所有“读取”请求的一个数据库连接
*   所有“写入”请求的一个数据库连接（完全相同的数据库）

如果是这样，在数据库文件和代码请求中会如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:16:38.857

我想我不妨把这个贴出来。

```
class User < ActiveRecord::Base
  self.abstract_class = true

  ...

end 
```

CUR = 创建更新读取

R = 只读

```
class UserCUR < User
   establish_connection "user_cur_database_#{Rails.env}"
end

class UserR < User
   establish_connection "user_r_database_#{Rails.env}"
end 
```

数据库.yml

```
user_cur_database_production:
  adapter: w.e.sql
  host: yourhost
  username: user_cur
  password: ********
  database: yourdb

user_r_database_production:
  adapter: w.e.sql
  host: yourhost
  username: user_r
  password: ********
  database: yourdb 
```

用户将具有不同访问权限的位置

你可以做同样的事情，但在实际的 rails 应用程序而不是数据库中，我知道这不是你正在寻找的东西，但可以提供更多帮助。

[有没有一种简单的方法可以使 Rails ActiveRecord 模型只读？](https://stackoverflow.com/questions/5641410/is-there-an-easy-way-to-make-a-rails-activerecord-model-read-only)

# visual-studio-2010 - 在 VS2010 编辑器 (c++) 中右键单击只是闪烁 - 没有上下文菜单

> ID：15889702
> 
> 赞同：0
> 
> 时间：2013-04-08T21:53:54.203
> 
> 标签：visual-studio-2010, visual-c++

我可以很好地构建我的项目，但是如果我右键单击，比如说，跳转到一个定义或者只是拉出一个菜单，我什么也得不到。如果我突出显示一个变量或方法，然后右键单击，则 ide 标题栏会闪烁几次，但我从未看到菜单。我也从来没有见过一个错误消息，这使得诊断变得如此困难。

C# 项目表现得很好。它似乎只影响 C++ 项目。这在 VS2008 或 2005 中也不是问题。

[编辑：在安全模式下运行可以得到我需要的东西。]

# jquery - 在选择值变化时发出警报

> ID：15889709
> 
> 赞同：2
> 
> 时间：2013-04-08T21:54:08.790
> 
> 标签：jquery, html-select

I'm trying to alert the user when the value of a select changes to a specific one, but I have multiple select in my page (one for each user).

这是我尝试过的：http: [//jsfiddle.net/mEFQq/](http://jsfiddle.net/mEFQq/)

```
$(document).ready(function() {
    $("select").change(function(){
        if($(this).text() == "Chef")
            {
                alert();
            }
        });
}); 
```

我希望在选择更改为“Chef”值时发出警报。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:00:31.677

可能是这样的：http: [//jsfiddle.net/mEFQq/1/](http://jsfiddle.net/mEFQq/1/)

在使用选择时，您需要使用 .val() 函数，而不是 .text() 函数。

您还需要与 value 属性（在这种情况下为 1）而不是实际的文本值进行比较。

代码如下所示：

```
$(document).ready(function() {
    $("select").change(function(){
        if($(this).val() == "1")
            {
                alert('value 1 (wich refers to Chef) got selected');
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:57:16.983

您的问题是，使用该`.text()`方法将返回`select`元素上的所有文本，而不仅仅是“选定”的文本，如果您尝试使用`.val()`，您将使用选定元素的`value`属性（如果它们没有 set `value`，您可以使用`.val()`） .

我建议您将您的更改`if`为: `if($(this).children(':selected').text() == "Chef")`，如下所示：

```
$("select").change(function(){
    if($(this).children(':selected').text() == "Chef")
        {
    alert();
        }
    });
}); 
```

演示：http: [//jsfiddle.net/darkajax/YCznv/](http://jsfiddle.net/darkajax/YCznv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:18:28.823

[**小提琴**](http://jsfiddle.net/mEFQq/3/)

你可以这样做：

```
if($(this).find('option:selected').text() == "Chef") 
```

# c# - 将 LINQ 扩展方法转换为使用 L2E

> ID：15889712
> 
> 赞同：1
> 
> 时间：2013-04-08T21:54:38.117
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我正在一个搜索页面上工作，用户可以`*`在其搜索条件中使用通配符。通配符可以放在字符串的开头或结尾。由于我需要将其应用于多个领域，因此我认为扩展方法将是最好的方法。我想出的代码目前有效，但不适用于`IQueryable`.

```
public static class Helper
{
    public static IEnumerable<string> MyExtMethod(this IEnumerable<string> items, string searchString)
    {
        var searchType = -1;    
        if(searchString.IndexOf("*") == -1) //No wildcard
        {
            searchType = 0;
        }
        else if(searchString.IndexOf("*") == 0 && searchString.LastIndexOf("*") == searchString.Length - 1)//start and end
        {
            searchType = 1;
        }
        else if(searchString.IndexOf("*") == 0)//ends with
        {
            searchType = 2;
        }
        else if(searchString.LastIndexOf("*") == searchString.Length - 1) //starts with
        {
            searchType = 3;
        }

        var search = searchString.Replace("*", "");

        foreach(var i in items)
        {
            switch(searchType)
            {
                case 0: yield return i;
                break;
                case 1: if(i.Contains(search))
                            yield return i;
                break;
                case 2: if(i.EndsWith(search))
                            yield return i;
                break;
                case 3: if(i.StartsWith(search))
                            yield return i;
                break;
            }
        }
    }
} 
```

`Contains`我只使用 L2E 、`StartsWith`、已经支持的字符串操作和扩展方法`EndsWith`。这可以转换为与实体一起使用吗？如果是这样，需要做什么？谢谢。

编辑：如果可能的话，我希望能够这样使用它：

```
db.SomeTable.Where(s => s.SomeField.MyExtMethod(somestring)); 
```

参考来源的奖励积分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:12:16.280

EF 使用`IQueryable<T>`- 不`IEnumerable<T>`

所以这样的事情应该做：

```
public static class Helper
{
  public static IQueryable<Table> SearchText(
    this IQueryable<Table> q,
    string searchString
  )
  {
    var searchType = -1;    
    if(searchString.IndexOf("*") == -1)
    {
        searchType = 0; // No wildcard
    }
    else if(searchString.IndexOf("*") == 0 &&
      searchString.LastIndexOf("*") == searchString.Length - 1)
    {
        searchType = 1; // start and end
    }
    else if(searchString.IndexOf("*") == 0)
    {
        searchType = 2; // ends with
    }
    else if(searchString.LastIndexOf("*") == searchString.Length - 1)
    {
        searchType = 3; // starts with
    }

    var search = searchString.Replace("*", "");

    switch(searchType)
    {
      default:
      case 0: return q.Where( o => o == search );
      case 1: return q.Where( o => o.Text.Contains( search ) );
      case 2: return q.Where( o => o.Text.EndsWith( search ) );
      case 3: return q.Where( o => o.Text.StartsWith( search ) );
    }
  }
} 
```

`Table.Text`您要搜索的房产在哪里。

然后你可以像这样使用它：

```
IQueryable<Table> q = dbContext.Table;

var matches = q.SearchText( searchString ).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:21:33.640

我在[互联网](http://trentacular.com/2010/08/linq-to-entities-wild-card-like-extension-method/)上找到了一些基本代码，并对其进行了一些修改，以便根据需要进行工作。

*   abc ：完全匹配“abc”
*   *abc : 如果字符串以 "abc" 结尾则匹配
*   abc* : 如果字符串以 "abc" 开头则匹配
*   *abc* : 如果字符串包含 "abc" 则匹配

```
public static class LinqExtensions
{
public static IQueryable<TSource> WhereLike<TSource>(
    this IQueryable<TSource> source,
    Expression<Func<TSource, string>> valueSelector,
    string value,
    char wildcard)
{
    return source.Where(BuildLikeExpression(valueSelector, value, wildcard));
}

        public static Expression<Func<TElement, bool>> BuildLikeExpression<TElement>(
            Expression<Func<TElement, string>> valueSelector,
            string value,
            char wildcard)
        {
            if (valueSelector == null)
                throw new ArgumentNullException("valueSelector");

            var method = GetLikeMethod(value, wildcard);

            value = value.Trim(wildcard);
            var body = Expression.Call(valueSelector.Body, method, Expression.Constant(value));

            var parameter = valueSelector.Parameters.Single();
            return Expression.Lambda<Func<TElement, bool>>(body, parameter);
        }

        private static MethodInfo GetLikeMethod(string value, char wildcard)
        {
            var methodName = "Equals";

            var textLength = value.Length;
            value = value.TrimEnd(wildcard);
            if (textLength > value.Length)
            {
                methodName = "StartsWith";
                textLength = value.Length;
            }
            value = value.TrimStart(wildcard);
            if (textLength > value.Length)
            {
                methodName = (methodName == "StartsWith") ? "Contains" : "EndsWith";
                textLength = value.Length;
            }

            var stringType = typeof(string);
            return stringType.GetMethod(methodName, new Type[] { stringType });
        }
    } 
```

# sql - 两个表的结果即使对应的行在其他表中不存在

> ID：15889714
> 
> 赞同：-1
> 
> 时间：2013-04-08T21:54:47.037
> 
> 标签：sql, oracle, join

我想从两个表中获取结果，即使对应的行不存在于其他表中。我应该使用哪个连接来获得如下结果。我试过FULL，但没有运气。

表格1：

```
CA  CB  CC
=== === ===
AA  11  X1
BB  22  X2
CC  33  X3
EE  44  X4 
```

表 2：

```
CA  CB  CD
=== === ===
AA  11  Y1
BB  22  Y2
FF  55  Y5
GG  66  Y6 
```

期望结果如下：

```
CA  CB  CC      CD
=== === ===     ===
AA  11  X1      Y1
BB  22  X2      Y2
CC  33  X3      (null)
EE  44  X4      (null)
FF  55  (null)  Y5
GG  66  (null)  Y6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:10:11.997

```
SELECT
   COALESCE (t1.CA, t2.CA) CA
  ,COALESCE (t1.CB, t2.CB) CB
  ,CC
  ,CD
FROM Table1 t1
FULL JOIN Table2 t2 ON t1.CA = t2.CA AND t1.CB = t2.CB
ORDER BY 
   COALESCE (t1.CA, t2.CA) 
  ,COALESCE (t1.CB, t2.CB) 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/5ece1/4)

# jquery-mobile - 在另一个移动网站/移动网页中获取外部网页

> ID：15889715
> 
> 赞同：1
> 
> 时间：2013-04-08T21:54:52.053
> 
> 标签：jquery-mobile, mobile-website

我正在尝试创建一个网页，其中底部和顶部区域的固定下载按钮调用另一个具有链接的页面，当我单击链接时，它将转到外部网页。我用 div 或对象调用它。尝试使用 iframe，但外部页面中的链接无法点击。

请有人帮助我。

```
<div id="siteloader"></div>

    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script>
    $("#siteloader")
        .html('<object data="h2.htm" style="width:100%; height:100%;"/>');
    </script>
      <div id="downloadButton"> 
        <input id="dbutton" type="submit" src="download.png" value="" alt="Submit" />
      </div> 
```

# android - Android在真实设备与模拟器上的不同按钮大小

> ID：15889716
> 
> 赞同：0
> 
> 时间：2013-04-08T21:54:53.287
> 
> 标签：android, layout, android-emulator, screen

我的 Android 应用在真实设备（Samsung Galaxy Mini [http://www.gsmarena.com/samsung_galaxy_mini_s5570-3725.php](http://www.gsmarena.com/samsung_galaxy_mini_s5570-3725.php)）上看起来与在模拟器上不同。

我有最新的 SDK，为 240x320 LDPI (120ppi) 设置的 AVD

我的布局：我有一个包含 4 个项目的垂直 linerlayout：4x 水平 linerlayout

```
 <LinearLayout
            android:id="@+id/LinearLayoutMainLines"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/LinearLayoutMainLine1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:orientation="horizontal" >
            </LinearLayout>

            ....

            <LinearLayout
                android:id="@+id/LinearLayoutMainLine4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:orientation="horizontal" >
            </LinearLayout>
        </LinearLayout> 
```

然后从代码中，我向所有 4 个“LinearLayoutMainLine”添加了 10 个按钮，所以最后我在屏幕上有 4x10 个按钮。

```
 Button button = new Button(_context);
 button.setTypeface( Typeface.MONOSPACE, Typeface.BOLD);
 button.setOnClickListener(this);
 button.setTextColor(0xFFFFFFFF);
 button.setText(letter);    
 button.setBackgroundResource(id);
....later....
 forall (buttons_line1)
    layout1.addView(button);
....
 forall (buttons_line4)
    layout4.addView(button); 
```

请注意，按钮的背景图像和文本会不时地从代码中更改，它们与创建时使用的不同。但是，所有使用的图像都是相同大小的（仔细检查），并且按钮的文本始终是 1 个字母。

**问题**：

在模拟器上：我有 4x10 大小为 19x36 的按钮

在迷你设备上：我有 3x10 大小为 19x38 的按钮，第 4 行是 19x32。最后一行按钮较短，因此它们的文本被切成两半。

使用的图像： res\ldpi\button.9.png 都是 18x26 大小。

什么可能导致这种差异？

我附上了一个合并的屏幕截图，左边是设备，右边是模拟器。

![在此处输入图像描述](https://i.stack.imgur.com/y0GSB.png)

按照规格，Mini 的 ppi 约为 127，也许这就是问题所在？但是我不能为模拟器设置这个，因为它有固定的密度列表，而 120 是最接近的。但是，正如我提到的那样，这很好。

任何提示表示赞赏。谢谢

# ios - 保存 EKCalendar

> ID：15889717
> 
> 赞同：1
> 
> 时间：2013-04-08T21:54:53.740
> 
> 标签：ios, objective-c, xcode, software-design, eventkit

创建 EKCalendar 后，通常会说您应该保留 calendarIdentifier 以便稍后检索该日历。但是，文档指出，如果/当执行完整的日历同步时，标识符将会改变，并且“你应该有一个计划”来处理它。

处理这个问题的首选或“标准”方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:28:20.553

从文档

> 与日历完全同步将丢失此标识符。你应该有一个计划来处理一个日历，它的标识符不再可以通过缓存它的其他属性来获取。

不确定是否有任何“标准”的处理方式。但是保留它的标识符`source`是处理它的一种方法。日历一旦创建就不会更改，`sourceIdentifier`并且日历不能移动到不同的源。

# mysql - MySQL左连接过滤器

> ID：15889727
> 
> 赞同：1
> 
> 时间：2013-04-08T21:55:28.693
> 
> 标签：mysql

我有两个相关的表，如下所示，我需要加入以获取所有新的和更新的记录。这些是具有简化表结构的代表性示例。

第一个表是项目表，例如“注释”，它包含所有现有注释以及“新”注释和对现有注释的更新。

第二个表包含对笔记的未决更改/更新的详细信息。例如，如果一个便笺已被修改，则该行将被克隆并包含修改内容，并将一行添加到 pendingUpdates 表中，其中包含原始便笺的 id、具有更新的行的 id 以及进行更新的用户。如果添加了新注释，则工作流程类似，但原始 id 和修改后的 id 指的是同一行。

```
Notes:
+----+---------------------+----------------------------+
| id | title               | text                       | 
+----+---------------------+----------------------------+
|  1 | this is a test note | blah blah blah             | 
|  2 | note 2              | sdfsadfasdf                | 
|  3 | note 3              | jklhjklhjklhjk             |
|  4 | note 3              | This is an update to note3 |
|  5 | note 3              | another update             | 
|  6 | note 4              | new note                   | 
+----+---------------------+----------------------------+

pendingUpdates:
+----+------------+---------+------+
| id | originalId | cloneId | user |
+----+------------+---------+------+
|  1 |          3 |       4 |    1 |
|  2 |          3 |       5 |    1 |
|  3 |          6 |       6 |    2 |
+----+------------+---------+------+ 
```

我想做的是运行一个 SELECT 来获取所有注释，并包括该注释是否有更改（带有更新列表）和任何新注释。

因此，对于上面将返回第 1、2、3 和 6 行的示例。第 3 行也将 4,5 列为更新。

期望结果示例：

```
+----+------------+-------------+------+--------+---------------------+
| id | hasChanges | isNewRecord | p_id | clones | title               |
+----+------------+-------------+------+--------+---------------------+
|  1 | no         | no          | NULL |  NULL  | this is a test note |
|  2 | no         | no          | NULL |  NULL  | note 2              |
|  3 | yes        | no          |    1 |  4,5   | note 3              |
|  6 | yes        | yes         |    3 |  6     | note 4              |
+----+------------+-------------+------+--------+---------------------+ 
```

我尝试了许多不同的查询组合，但还没有得到我所需要的。这是我得到的非常接近的结果，但是在结果集中包含了我不想要的第 4 行和第 5 行。

```
SELECT 
    o.id,
    if(o.id = p.originalId, 'yes', 'no') AS hasChanges,
    if(p.cloneId = p.originalId,
        'yes',
        'no') AS isNewRecord,
    p.id AS p_id,
    group_concat(p.cloneId
        separator ',') AS clones,
    o.title
FROM
    `notes` AS o
        LEFT JOIN
    `pendingUpdates` AS p ON (o.id = p.originalId)
group by id; 
```

这返回：

```
 +----+------------+-------------+------+--------+---------------------+
   | id | hasChanges | isNewRecord | p_id | clones | title               |
   +----+------------+-------------+------+--------+---------------------+
   |  1 | no         | no          | NULL |  NULL  | this is a test note |
   |  2 | no         | no          | NULL |  NULL  | note 2              |
   |  3 | yes        | no          |    1 |  4,5   | note 3              |
 ->|  4 | no         | no          | NULL |  NULL  | note 3              |
 ->|  5 | no         | no          | NULL |  NULL  | note 3              |
   |  6 | yes        | yes         |    3 |  6     | note 4              |
   +----+------------+-------------+------+--------+---------------------+ 
```

* * *

## 解决方案：

这是我最终使用的最终解决方案，它与 fthiella 最相似。

再次感谢所有为此提供帮助的人。

```
SELECT 
    m.id,
    if(m.max_pending IS NOT NULL, 'yes', 'no') hasChanges,
    if(m.id = pendingUpdates.cloneId, 'yes', 'no') isNew,
    m.clones,
    m.pendingIds,
    m.title
FROM (SELECT 
           Notes.id,
           MAX(pendingUpdates.id) max_pending,
          GROUP_CONCAT(pendingUpdates.id) pendingIds,
          GROUP_CONCAT(pendingUpdates.cloneId) clones,
          MAX(title) title
      FROM  Notes
      LEFT JOIN pendingUpdates ON Notes.id = pendingUpdates.originalId
      GROUP BY Notes.id
      ) m
          LEFT JOIN pendingUpdates ON m.max_pending = pendingUpdates.id
WHERE
    m.id NOT IN (SELECT 
                     cloneId
                 FROM pendingUpdates
                 WHERE cloneId NOT IN (SELECT 
                                          originalId
                                         FROM pendingUpdates)
                )
order by id; 
```

[http://sqlfiddle.com/#!2/8566e/1/0](http://sqlfiddle.com/#!2/8566e/1/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:20:31.990

你可以找这个

```
 SELECT 
o.id,
if(o.id = p.originalId , 'yes', 'no') AS hasChanges,
if(p.cloneId = p.originalId,
    'yes',
    'no') AS isNewRecord,
p.id AS p_id,
group_concat(p.cloneId
    separator ',') AS clones,
o.title
FROM
`notes` AS o
    LEFT JOIN
`pendingUpdates` AS p ON (o.id = p.originalId)
where o.id in (select originalId from pendingUpdates)
or o.id in (select id from pendingUpdates)
group by id; 
```

[**在这里演示**](http://sqlfiddle.com/#!2/ef98c/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:30:00.090

我已经以这种方式重写了您的查询（您的原始查询使用了一些非聚合列，并且在某些情况下这些列的值可能不确定）：

```
SELECT
  m.id,
  CASE WHEN m.max_pending IS NOT NULL
       THEN 'yes' ELSE 'no' END hasChanges,
  CASE WHEN m.id=pendingUpdates.cloneId
       THEN 'yes' ELSE 'no' END isNew,
  m.min_pending pid,
  m.clones,
  m.title
FROM (
  SELECT
    Notes.id,
    MAX(pendingUpdates.id) max_pending,
    MIN(pendingUpdates.id) min_pending,
    GROUP_CONCAT(pendingUpdates.cloneId) clones,
    MAX(title) title
  FROM
    Notes LEFT JOIN pendingUpdates
    ON Notes.id = pendingUpdates.originalId
  GROUP BY
    Notes.id) m LEFT JOIN pendingUpdates
  ON m.max_pending = pendingUpdates.id
WHERE
  m.id NOT IN (SELECT cloneId FROM pendingUpdates
               WHERE cloneId NOT IN (SELECT originalId FROM pendingUpdates)) 
```

请[在此处](http://sqlfiddle.com/#!2/c5496/1)查看小提琴。

# sql-server-ce - 使用实体框架对 SQL Server Compact Edition 数据库进行逆向工程

> ID：15889730
> 
> 赞同：0
> 
> 时间：2013-04-08T21:55:34.683
> 
> 标签：sql-server-ce, entity-framework-5

我们可以使用实体框架对 SQLCE（SQL Server Compact Edition）数据库进行“逆向工程”吗？

我已经按照 MSDN 开发中心教程*[Code First to an Existing Database](http://msdn.microsoft.com/en-us/data/jj200620)*关于使用实体框架对数据库进行“逆向工程”，以便我们可以使用代码优先。根据我的教程：

1.  安装了 *[实体框架电动工具](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)*。
2.  在 Visual Studio 2012 中生成了一个应用程序（空 MVC4）。
3.  添加了一个数据库（我需要使用 SQLCE）。
4.  右键单击根项目文件夹并选择`Entity Framework > Reverse Engineer Code First`.
5.  当连接属性窗口弹出时，我将数据源类型更改为“Microsoft SQL Server Compact 4.0.
6.  浏览到 Project App_Data 文件夹并选择 SQLCE 数据库。
7.  测试连接（成功）并单击确定。

然后抛出以下错误：

```
System.ArgumentException: 
The modelEntityContainerName parameter '...\App_Data\cesdfContext' contains characters that are not valid. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T04:27:00.513

通过***[点击评论中提供的链接](https://entityframework.codeplex.com/workitem/366)***（感谢并感谢（ErikEJ））对我的原始帖子进行确认，此问题将在 Entity Framework 6 版本中修复。

# rdf - 如何将 OWL Import 与相对路径一起使用？

> ID：15889733
> 
> 赞同：4
> 
> 时间：2013-04-08T21:55:44.900
> 
> 标签：rdf, owl

在我的 OWL 文件中，我导入了许多其他文件，例如：

```
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/Anatidae.rdf"/>
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/Animal.rdf"/>
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/Bird.rdf"/>
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/Chordate.rdf"/>
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/kingdom.rdf"/>
<owl:imports rdf:resource="file:/home/noor/Downloads/bbc/Mammal.rdf"/> 
```

但我无法管理相对路径；所有这些都失败了：

```
<owl:imports rdf:resource="file:Anatidae.rdf"/>
<owl:imports rdf:resource="file:./Anatidae.rdf"/> 
```

我怎样才能用相对路径做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:53:31.453

导入应该指向 URI 而不是本地文件，因此一些工具还不支持从本地资产导入。为了处理本地文件，您有以下解决方案：

*   一个快速的解决方法是通过本地 Web 服务器公开您的 RDF 并像这样访问它们（例如`<owl:imports rdf:resource="http://localhost/Chordate.rdf"/>`）。

*   如果您使用 Protege 打开您的 OWL 文件，您可以在`Active Ontology`-->`Import ontology`选项卡中配置实际文件和导入 IRI 之间的映射。

*   最后一个解决方案，如果您使用[Brain](http://loopasam.github.io/Brain/)，您可以轻松地一个一个地加载文件，而无需处理`owl:imports`，例如：

    `Brain brain = new Brain();`

    `brain.learn("/home/noor/Downloads/bbc/Bird.rdf");`

# node.js - 块事件永远不会在 https 请求中触发

> ID：15889742
> 
> 赞同：0
> 
> 时间：2013-04-08T21:56:22.623
> 
> 标签：node.js

我正在测试对 API (Splunk) 的一些调用。当我在 curl 中调用时，它按预期工作。

```
curl -k -v -u admin:password -d 'search=search error | head 10' -d "output_mode=json"     https://192.168.50.16:8089/servicesNS/admin/search/search/jobs/export 
```

这可以正常工作并返回一个包含 json 结果数组的正文。

但是当我尝试从我的节点应用程序发出相同的请求时，我没有得到任何信息。在下面的代码中，on chunk 事件永远不会触发。没有错误；请求似乎正确关闭，我确实得到了 200 回复，标题为“content-type”：“application/json; charset=utf-8”。那么为什么没有身体/块呢？request 方法在这里做的事情是否与 curl 做的不同？据我所知，这些应该是完全相同的请求。

在进行故障排除时，我制作了一个快速的 PHP 脚本，它只是回显了 POST 变量。当我将这段代码指向那个脚本时，它工作得很好——我的 PHP 输出得到了大块。所以我要弄清楚为什么 API 可能正确响应来自 curl 的请求，而不是来自 node.js 的请求。有什么想法吗？

```
 var https = require('https');
    var querystring = require('querystring');
    var data = { output_mode:'json', search: 'search error | head 10' };
    var datastring = querystring.stringify(data);

    var headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Content-Length': datastring.length
    };

    var options = {
        hostname: '192.168.50.16',
        port: 8089,
        path: '/servicesNS/admin/search/search/jobs/export',
        method: 'POST',
        auth: 'admin:password',
        headers: headers
    };

    var theRequest = https.request(options, function(api_response) {
        var responsedata = '';
        api_response.on('data', function(chunk) {
            console.log('got a chunk');
            responsedata += chunk;
        });

        api_response.on('end', function () {
            callback(true, responsedata);
        });
    });

    theRequest.write(datastring);

    theRequest.end();
    theRequest.on('error', function(e) {
        console.error(e);
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:12:49.757

尝试使用[请求](https://github.com/mikeal/request)模块。它使在 node.js 中使用 http(s) 变得更加容易。查看下面的示例，看看您是否从服务器收到任何响应

```
var request = require('request')
var postData = { output_mode:'json', search: 'search error | head 10' };

var options = {
    url: 'https://192.168.50.16:8089/servicesNS/admin/search/search/jobs/export',
    method: 'POST',
    auth: {
      user: 'admin',
      pass: 'password',
    },
    form: postData
};
var r = request(options, function(err, res, body) {
   if (err) {
      console.dir(err)
      return
   }
   console.dir('status code', res.statusCode)
   console.dir(body)
}) 
```

您还可以通过管道发送请求并监听数据事件

```
var options = ... // look above
var r = request(options)
r.on('data', function(data) {
   console.log('request data received')
}) 
```

# c# - 除非重新启动应用程序，否则 DataGridView 不会更新

> ID：15889748
> 
> 赞同：1
> 
> 时间：2013-04-08T21:56:34.953
> 
> 标签：c#, database, datagridview

在 Visual Studio 2012 for C# 中工作；我正在尝试实现一个dataGridView。我正在使用程序的另一部分将记录添加到 Access 数据库，dataGridView 使用该数据库来填充其信息。

我使用了集成设置，因此就建立连接而言，它可以省去很多工作。一切正常，但 dataGridView 不会显示数据库的最新更改，除非我关闭应用程序并重新启动它。重新启动应用程序后，一切正常并且列表正确填充。我已经尝试刷新数据库以及将数据源更改为 null 然后返回实际源，但到目前为止都没有工作。

想法？

可以根据需要提供代码。

编辑：要求的代码：

```
 public void frmViewBook_Load(object sender, EventArgs e)

    {
        dataGridView1.DataSource = null;
        dataGridView1.DataSource = this.accDB.BOOK;

        this.bOOKTableAdapter.Fill(this.accDB.BOOK);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:00:51.013

如果您手动进行更新而不使用 GridView 的内置功能，那么您将需要调用`DataBind()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T19:47:24.683

我遇到了这个问题，我做了一个新方法“加载”来清除我的datagridview的行值并再次创建datagridview。所以我每次添加/编辑datagridview时都将方法“加载”。

# ruby-on-rails - 在 Rails 中编辑文件（使用文本区域）

> ID：15889750
> 
> 赞同：2
> 
> 时间：2013-04-08T21:56:40.293
> 
> 标签：ruby-on-rails, ruby, file, text, web

我想用 Rails 以这种方式编辑存储在 HDD 上的文件： 1\. 打开文件并将内容加载到“text_area”（或我可以编辑的任何其他字段） 2\. 编辑该“text_area”中的内容 3\. 将更改保存到那个文件

我这里有一些代码：

1) [控制器]

> ```
>  def show
>     @myfile = File.read("/home/pi/www/web-svn/repositories/Repo2/hooks/post-commit.tmpl")
>  end 
> ```

2) [查看]

> ```
> <%= text_area_tag(:message, @myfile, :size => "100x60") %> 
> ```

3）？？？

这是问题，如何将编辑后的文本再次传递给控制器​​并保存更改。如果您对整个过程有更好的想法，您可以传递所有有用的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:25:52.220

在控制器的 edit() 方法中，根据 URL 确定文件名，并将指定文件中的文件内容读取到实例变量 (@myfile) 中。渲染视图，该视图传递给浏览器，由用户编辑，编辑后的文本作为 POST 数据传回服务器。Rails 将 POST 数据放入 params 散列并调用控制器的 update() 方法。在 update() 中，文件名由 URL 确定，其修改后的内容从 params 哈希中检索并写入文件。起泡，冲洗，重复。

添加：

这是我的想法并且未经测试，因此将其视为伪代码，但它应该让您朝着正确的方向前进。我相信设计可以改进。

您`form_tag`应该如下所示。它指定了将请求返回给服务器的控制器、操作和方法。出现`:file`是因为 RESTful 路由应指定要更新的资源（见下文）。

```
form_tag({:controller => :hooks, :action => :update, :file => @myfilename}, {:method => :put}) do
[...]
end 
```

那么，如何将文件名传递给浏览器，以便它可以返回更新请求？在一种 RESTful 设计中，您的 URL 可能看起来像`/hooks/:action/:file`. 的值`:file`将指定文件资源，如果您设置路由以使用此表单，`params[:file]`则将在您的控制器中可用。让你的控制器做

```
def edit
    @myfilename = params[:file]
    @myfile     = File.read(@myfilename)
end 
```

然后上面的 form_tag 应该可以工作。我将保留文件名的编码并为您设置路线。

# css - 您将如何使用 CMS 管理此布局

> ID：15889752
> 
> 赞同：0
> 
> 时间：2013-04-08T21:56:45.127
> 
> 标签：css, content-management-system

这类布局——水平对齐的文本和图像列表，往往在网站的功能页面上很受欢迎，我设计了一个并对其进行了编码，但我想到的是，当项目移交给非技术人员时，可以轻松地编辑文本，但这将关闭文本/图像对齐。

为了解决这个问题，他们还需要编辑 css，但这不适合大多数人。

有没有更好的方法来管理这个？

这是使用 ive 的 html/css 即时通讯，如果有人想要玩的话，我还制作了一个[jsfidlle](http://jsfiddle.net/pudle/Qkkb4/)

```
<div class="feature">
    <p class="left">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sequi tempora eaque magni obcaecati quis at corrupti perferendis eum magnam ipsum maiores quod fugit dolorum odio temporibus voluptate asperiores atque esse.</p>

    <img src="http://pictures-of-cats.org/wp-content/uploads/images/bengal-cat-RAVI-w.jpg" width="200" height="200"/>
</div>

<div class="feature">
    <p class="right">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sequi tempora eaque magni obcaecati quis at corrupti perferendis eum magnam.</p>

    <img src="http://pictures-of-cats.org/wp-content/uploads/images/bengal-cat-RAVI-w.jpg" width="200" height="200"/>
</div> 
```

CSS

```
#wrapper {width:500px;}

p {width:280px;}
p.left {float:left; padding:30px 0 0 0;}
p.right {float:right; padding:45px 0 0 0;}

img {float:left;} 
```

![在此处输入图像描述](https://i.stack.imgur.com/kK6r4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:11:43.027

只需使用“非技术”用户会理解的 CSS 选择器管理您的父媒体标记。就像是

```
<markup class=image-left'><markup><img/></markup></markup> 
```

然后向客户展示使用“.image-left”和/或“.image-right”

或者更好的是，从一开始就管理您的整个布局，确保您的“图像”会向左或向右浮动，具体取决于您正在铺设的行。

CSS

```
.markup:nth-child(even) {style it to float image left}
.markup:nth-child(even) img {float:left;margin:0 10px 10px 0}
.markup:nth-child(odd) {style it to float image right}
.markup:nth-child(odd) img {float:right;margin:0 0 10px 10px} 
```

# ruby-on-rails - Rolify 技能返回错误

> ID：15889754
> 
> 赞同：0
> 
> 时间：2013-04-08T21:57:02.410
> 
> 标签：ruby-on-rails, rolify

我在使用带有 Rails 的[Rolify](https://github.com/EppO/rolify/wiki/Tutorial)（点击查看我正在关注的教程）时遇到了一个奇怪的问题：该`can`方法似乎不起作用，因此使用户权限无法使用。下面是我的`ability.rb`文件和控制台输出，其中演示了问题。

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||= User.new # guest user (not logged in)

    if user.has_role? :admin
      can :manage, :all
    else
      can :read, :all
    end

  end
end 
```

控制台测试 ( `$ rails console`)

```
user = User.find(2)
user.add_role "admin"
user.has_role? :admin
=> **true**

ability = Ability.new(user)
ability.can? :manage, :all
=> **false**
ability.can? :read, :all
=> **false** 
```

我还检查了数据库，所有关系都设置正确。我正在运行rails 3.2.13。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:03:27.493

`canard`问题是与or的 gem 冲突`declarative_authorization`。禁用两者并重新启动 rails 服务器解决了这个问题。也许这会帮助那些在尝试这些不同的宝石时走同样道路的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:04:00.483

CanCan 依赖于`current_user`返回当前登录用户的方法的存在。如果您正在使用例如设计进行身份验证，则可以使用此方法。如果您使用的是其他东西，那么您必须确保`current_user`方法存在。

# javascript - jCanvas - 拉伸图像以适应高度，并让它在宽度上流动

> ID：15889755
> 
> 赞同：0
> 
> 时间：2013-04-08T21:57:03.453
> 
> 标签：javascript, jquery, canvas, jcanvas

我一直在试图弄清楚如何缩放图像/图案以填充画布的高度，但使用 jCanvas 去剪辑宽度。

我一直在尝试自己计算，但我糟糕的数学技能一直没有用。我也试过用谷歌搜索我的方式，但这也没有成功。

我想模仿“背景大小：自动 100%；”

代码：

```
// this is the path
  function draw(patt) {
    that.$canvas.drawLine({
      layer: true,
      fillStyle: patt,
      name: 'myPath',
      x1: 0, y1: 0,
      x2: that.topPoint, y2: 0,
      x3: that.bottomPoint, y3: that.height,
      x4: 0, y4: that.height,
      closed: true
    });
  }

  // this is the image itself
  var patt = that.$canvas.createPattern({
    width: that.width,
    height: that.height,
    source: function(context) {
      $(this).drawImage({
        source: that.$laImg.attr('src'),
        x: 0, y: 0,
        fromCenter: false,
        width: that.width,
        height: that.height
      });
    },

    repeat: "repeat",
    load: draw
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:49:45.427

我通过这个解决了我的问题：

```
<img src="image.jpg" style="width: auto; height: 100%;" alt="" /> 
```

并使用它来获得适当的尺寸。

# c++ - 在 Microsoft 中有效的 Borland 错误：找不到匹配 'ifstream::open'

> ID：15889762
> 
> 赞同：3
> 
> 时间：2013-04-08T21:57:18.547
> 
> 标签：c++, compiler-errors, c++builder, ifstream

我想读入一个名为：abc.txt 的文本文件

文本文件只包含一个简单的 a、b 和 c，每一个都在自己的行中。

当我使用 Microsoft 编译器编译它时，它编译完全没有问题，并且我得到了我期望的输出（见下文）：

```
a
b
c
(blank line here) 
```

这是我正在使用的 Borland 编译行：

bcc32 -w -ebor.exe main.cpp

这是我正在使用的 main.cpp 文件：

**主文件**

```
#include <iostream>
#include <fstream>
#include <string>
void printout(const std::string &file);

int main(void)
{
  printout("abc.txt");
  return 0;
}

void printout(const std::string &file)
{
  std::ifstream words;
  std::string   str;

  words.open(file);

  while(!words.eof())
  {
    std::getline(words, str);
    std::cout << str << "\n";
  }

  words.close();
} 
```

我在 Borland 遇到的确切错误如下：

**错误 E2285 main.cpp 17：在函数 printout(const std::string &) 中找不到“ifstream::open(const std::string)”的匹配项**

我也收到了警告，但似乎发生这种情况的唯一原因是由于错误阻止了“文件”的使用：

警告 W8057 main.cpp 26：函数 printout(const std::string &) 中从未使用参数“file”

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:58:20.867

在 C++11 之前，[`std::ifstream::open`](http://en.cppreference.com/w/cpp/io/basic_ifstream/open)需要一个`const char *`. 用这个。

```
words.open( file.c_str() ); 
```

# python - 使用python中两个文件的信息计算前几行

> ID：15889763
> 
> 赞同：0
> 
> 时间：2013-04-08T21:57:28.990
> 
> 标签：python, list, python-2.7, count, bioinformatics

我将深入解释我的编程问题：我有两个文件；文件 #1 是基因注释文件，文件 #2 是按碱基位置文件计数的文件（只是试图为问题提供一些上下文）。

我想在第 6 列中有“+”的行中提取“start_codon”位置，然后转到文件#2 中的那个位置。例如，我想从文件 #1 中的第 3 列中提取 954，然后转到文件 #2 中的第 954 行。然后，我想计算文件 #2 中第 954 行上方产生 70 或更大计数值的行数。

```
File#1

    Chromosome  exon    337 774 0.0 -   .   gene_id "A";    
    Chromosome  start_codon 954 956 0.0 +   0   gene_id "B"; 
    Chromosome  stop_codon  2502    2504    0.0 +   0   gene_id "B"; 

 File#2
 .      .
 .      . 
 942    71
 943    63
 944    88
 945    80
 946    80
 947    85
 948    86
 949    97
 950    97
 951    97
 952    104
 953    105
 954    104
 955    108 
```

我的最终输出文件将是gene_id 的制表符分隔文件，后跟产生70 或更大计数值的行数。对于我给出的示例文件，输出如下：

```
 Gene_id  Count_before_start_codon
 B     10 
```

我想遍历大文件以生成一个长输出文件。

谢谢，我希望这很清楚。我很感激任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:01:19.577

如果您想保持简单并假设文件 2 不是很大，您可以将文件 2 加载到一个 numpy 数组中，这样您就可以非常快速地访问任何位置。例如，如果您将其加载到数组 ar 中并希望在位置 p 之前搜索，您可以这样做：

```
numpy.sum(ar[:p]>=70) 
```

这会给你你正在寻找的号码

然后，您可以通过文件 #1 并即时进行计算。这样你只需要读取每个文件一次，它应该很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:08:06.820

这应该可以工作... 第一部分获取文件 1 中的基因信息并填充字典 第二部分打开文件 2，检查字典并生成输出。

```
D={}
with open("file1.txt","rU") as f1:
    for line in f1:
        line=line.rstrip().rsplit("\t")
        if line[6]=="+" and line[2]=="start_codon":
            D[line[3]] = line[8].rstrip('"')[9]
            keys = D.keys()

count=[]
results=[]
number = 12
with open("file2.txt","rU") as f2:
    for line in f2:
        line=line.rstrip().rsplit("\t")
        if int(line[1]) >= 70:
            count.append(line[1])
            if line[0] in D:
                results.append(D[line[0]])
                if len(count) > number:
                    results.append(str(number))
                else:
                    results.append(str(len(count)-1))
                print "\t".join(results)
                count=[]

        else:
            count=[] 
```

附言。我复制粘贴了你的例子。我将文件编辑为制表符分隔。所以你可能需要玩“切片”

# javascript - 如何在 node.js 中记录每个方法调用而不在任何地方添加调试行？

> ID：15889766
> 
> 赞同：11
> 
> 时间：2013-04-08T21:57:45.427
> 
> 标签：javascript, node.js, logging, coffeescript

我想记录发出请求的人的 user_id 以及为 javascript 类调用的每个方法的方法名称。例如：

```
35 - log_in
35 - list_of_other_users
78 - log_in
35 - send_message_to_user
35 - connect_to_redis
78 - list_of_other_users 
```

由于一切都是异步的，用户 35 和 78 可能同时在做一些事情。所以我想确保每个日志行都以他们的 user_id 开头，这样我就可以 grep 并且一次只能看到一个用户的活动。

有没有一种超级聪明的方法来做到这一点，而无需在每个方法中添加记录器语句？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-24T23:57:09.410

答案基本上是正确的，但这里是如何避免无限递归

**Javascript**

```
(function () {
  var oldCall = Function.prototype.call;
  var newCall = function(self) {
    Function.prototype.call = oldCall;
    console.log('Function called:', this.name);
    var args = Array.prototype.slice.call(arguments, 1);
    var res = this.apply(self, args);
    Function.prototype.call = newCall;
    return res
  }
  Function.prototype.call = newCall;
})(); 
```

**咖啡脚本**

```
do ->
  oldCall = Function::call
  newCall = (self) ->
    Function::call = oldCall
    console.log "Function called: #{this.name}"
    args = Array.prototype.slice.call arguments, 1
    res = this.apply self, args
    Function::call = newCall
    res
  Function::call = newCall 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T04:15:27.967

这是一种选择，虽然不完全确定它有多可靠，但感觉有点不对：

```
(function () {
  var oldCall = Function.prototype.call;
  var newCall = function(self) {
    Function.prototype.call = oldCall;
    console.log('Function called:', this.name);
    var args = Array.prototype.slice.call(arguments, 1);
    Function.prototype.call = newCall;
    this.apply(self, args);
  }
  Function.prototype.call = newCall;
})(); 
```

如您所见，它覆盖了`call`函数 - 当您尝试调用时这会产生一个小问题，`console.log()`因此您需要将函数交换回来。但它似乎工作！

**编辑**

由于这被标记为 CoffeeScript：

```
do ->
  oldCall = Function::call
  newCall = (self) ->
    Function::call = oldCall
    console.log "Function called: #{this.name}"
    args = Array.prototype.slice.call arguments, 1
    Function::call = newCall
    this.apply self, args
  Function::call = newCall 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T22:09:16.143

我猜这是一个网络应用程序，在这种情况下，如果您使用连接，您可以使用记录用户和 URL 路径的记录器中间件，这可能就足够了。否则，您将不得不按照将每个函数包装在包装函数中的方式进行一些元编程以进行日志记录。

```
function logCall(realFunc, instance) {
    return function() {
      log.debug('User: ' + instance.user_id + ' method ' + realFunc.name);
      return realFunc.apply(instance, arguments);
    };
} 
```

为此，您的类方法必须命名为函数，而不是匿名的。

```
function sendMessage() {
    //code to send message
    //can use `this` to access instance properties
}
function MyClass(userId) {
    this.userId = userId; //or whatever
    this.sendMessage = logCall(sendMessage, this);
    //repeat above line for each instance method you want instrumented for logging
} 
```

# c++ - Eclipse 中的 libpng 警告

> ID：15889770
> 
> 赞同：0
> 
> 时间：2013-04-08T21:58:15.910
> 
> 标签：c++, eclipse, ubuntu, png, libpng

我在 Ubuntu 12.04 LTS 上使用 Eclipse 3.7.2 尝试使用 MathGL。我简单的 C++ 看起来像：

```
#include <iostream>
#include <mgl2/mgl.h>

using namespace std;

int main() {

 mglGraph gr;
 gr.FPlot("sin(pi*x)");
 gr.WritePNG("test.png");

return 0;
} 
```

当我运行它时，我收到以下警告：

```
libpng warning: Application built with libpng-1.2.46 but running with 1.5.13 
```

并且 test.png 无法显示。

关于如何解决它的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:49:25.460

您必须重新构建您的应用程序才能使用 libpng-1.5.13。目前它是用 1.2.46 构建的。或者您可以阅读 2 个版本的发行说明并确定 1.2.46 中支持的内容并保持在这些范围内。您必须尝试使用​​不在 1.2.46 中的 lidpng 中的功能

# google-sheets - 谷歌电子表格 importXML 功能

> ID：15889773
> 
> 赞同：0
> 
> 时间：2013-04-08T21:58:22.670
> 
> 标签：google-sheets, google-docs

```
<xml>
    <category date="5/21/2012">
        <item>14</item>
    </category>
</xml> 
```

在单元格 A1 中，我具有以下功能：

```
=ImportXML("http://www.site.com/file.xml", "//@date") 
```

它成功加载了名称“日期”的所有属性值。

现在在 B1 中，我想加载在 A1 中具有日期的“项目”。我知道以下内容是错误的，但我知道我要去哪里：

```
=ImportXML("http://www.site.com/file.xml", "//@date["&A&ROW()&"]/item") 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:22:42.110

解决方案：

```
=ImportXML("http://www.site.com/file.xml", "//category[@date='"&INDIRECT("A"&ROW())&"']/item") 
```

# ios - iOS MKLocalSearch 只返回 10 个结果

> ID：15889774
> 
> 赞同：4
> 
> 时间：2013-04-08T21:58:25.550
> 
> 标签：ios, ios6, mkmapview, mapkit

我开始使用 MapKit 的 MKLocalSearch API。

它可以工作并返回数据，但无论区域大小或搜索词是什么，它似乎总是只返回 10 个结果。似乎没有任何其他配置选项或参数可以更改有关此的任何选项。

有谁知道是否可以从本地搜索请求一次获得 10 多个结果？

# php - mysql具有重复键引用的多个唯一键

> ID：15889775
> 
> 赞同：0
> 
> 时间：2013-04-08T21:58:33.240
> 
> 标签：php, mysql, mysqli

我有这样的表结构

```
id,f1,f2,f3,f4 
```

id 是主键，f1 和 f3 是唯一键

我的问题是当我使用`ON DUPLICATE KEY UPDATE`

估值考虑哪个关键

考虑查询

```
INSERT INTO t1 (f1,f2,f4) VALUES (.....) ON DUPLICATE KEY UPDATE f4=...." 
```

如上所示，它会认为 key 是 f1 吗？或 f3 或 id

如果我有这样的查询

```
INSERT INTO t1 (f1,f2,f3,f4) VALUES (.....) ON DUPLICATE KEY UPDATE f4=...." 
```

那么它会考虑什么关键？

多谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:06:54.203

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)中，强调我的：

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致**UNIQUE 索引或 PRIMARY KEY 中**出现重复值，则会执行旧行的 UPDATE。

将导致表上任何唯一约束重复的插入尝试将导致触发替代操作。请注意，建议（通常）不要对包含多个唯一索引的表使用 ON DUPLICATE KEY 语法：

> 通常，您应该尽量避免对具有多个唯一索引的表使用 ON DUPLICATE KEY UPDATE 子句。

# c# - 在 TabPageControl 中访问动态创建的控件

> ID：15889777
> 
> 赞同：0
> 
> 时间：2013-04-08T21:58:41.187
> 
> 标签：c#, .net, user-controls, tabpanel, tabpage

我在 TabControl 的一个选项卡中创建了一堆用户控件。我遇到的问题是我需要从控件中访问一个值。我不知道该怎么做。

```
string q;
foreach (TabPage tp in tabControler.TabPages)
{
    Filter f = tp.Controls.Find("Filter",true); //not working at all.
    q += f.querry;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:03:14.990

创建控件时，为其添加名称：

```
Filter Filter1 = new Filter();
Filter1.Name = "Filter1"; 
```

如果这是 WinForms 并且`Filter1`是 Filter 控件的名称，那么它将是：

```
if (tp.Controls.ContainsKey("Filter1"))
{
  Filter selectedFilter = (Filter)tp.Controls["Filter1"];
} 
Debug.Write(selectedFilter.Value); 
```

# celery - django-celery 中的延迟子任务

> ID：15889782
> 
> 赞同：1
> 
> 时间：2013-04-08T21:59:05.560
> 
> 标签：celery, django-celery

这是我的代码：

```
add.apply_async((1, 2), countdown=5, link=delete.subtask()) 
```

如何在**删除子任务**上添加自定义延迟，将添加任务的结果作为参数传递？

这种语法/格式有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:42:40.013

好的，我找到了解决方案

> add.apply_async((1, 2), countdown=2, link=delete.subtask((), countdown=10))

# c++ - 为什么 towlower() 函数不能将 Я 转换为小写 я？

> ID：15889784
> 
> 赞同：9
> 
> 时间：2013-04-08T21:59:12.273
> 
> 标签：c++, unicode, locale, lowercase, wchar-t

该功能`towlower()`在 Visual Studio 2012 中似乎不起作用。这是一个示例：

```
#include <string>
#include <iostream>
#include <io.h>
#include <fcntl.h>
#include <wctype.h>

using namespace std;

int main()
{
    _setmode(_fileno(stdout), _O_U8TEXT);
    wcout << (wchar_t)towlower(L'Я') << endl;
    system("pause");
    return 0;
} 
```

字符保持大写。以前在这里问过类似的问题，但我找不到任何解决方案。

我可以使用另一种方法更改为小写吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:15:23.320

使用支持语言环境的版本`tolower`，但不要忘记同时设置 C 语言环境。

例如：

```
#include <clocale>
#include <locale>
#include <iostream>

int main()
{
    std::setlocale(LC_CTYPE, "");
    std::wcout << L"The letter is: " << L'Я' << L" => "
               << std::tolower(L'Я', std::locale("")) << std::endl;
} 
```

这打印：

```
The letter is: Я => я 
```

在 iostreams 中使用 locales 是一件棘手的事情，而这背后隐藏着一个完整的潘多拉魔盒。例如，您可以为流*注入*语言环境，并且可以一次管理多个语言环境，特别是每个线程可以有一个（这对于有状态的字符串编码转换可能是必需的）......有人应该写一本关于它的书（或者改用 Boost.Locale）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T22:13:38.310

我看到了两种可能性。第一个是语言环境设置不正确。来自[MSDN](http://msdn.microsoft.com/en-us/library/8h19t214%28v=vs.110%29.aspx)：

> 的大小写转换`towlower`是特定于语言环境的。仅更改与当前语言环境相关的字符以防万一。没有`_l`后缀的函数使用当前设置的语言环境。

第二个是源文件编码。`L'Я'`根据您的源文件的编码方式，可能意味着不同的事情。例如，如果您将它放在`UTF-8`. 确保你有它`UTF-16`。或者为了消除任何可能的混淆，像这样`'\u042F'`

**更新：**在第二个想法这整个`L`业务是棘手的。如果编译器正确理解编码，例如通过 BOM，它可能适用于`UTF-8`或任何其他编码。重要的是它应该知道编码是什么。它必须是非常具体的实现。

**另一个更新：**要解决此问题，请尝试通过以下方式设置语言环境：

```
_wsetlocale(LC_ALL, L"ru-RU"); 
```

或使用将语言环境作为参数的版本 ( `_towlower_l`)。

此外，还有一个[编译指示](http://msdn.microsoft.com/en-us/library/3e22ty2t.aspx)告诉编译器如何处理文件中的非 ASCII 字符串文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:08:51.020

它造成的伤害是否低于更高的伤害？j/k。我不熟悉反转的 R，但我知道如果字符没有等效的小写字母，to(w)lower 将返回原始字符。[http://en.cppreference.com/w/c/string/wide/towlower](http://en.cppreference.com/w/c/string/wide/towlower)

# javascript - HighCharts - 条形图中的 Y 轴填充

> ID：15889786
> 
> 赞同：11
> 
> 时间：2013-04-08T21:59:19.167
> 
> 标签：javascript, highcharts

我使用一种 y 轴标签样式，其中每个数字左对齐放置在其各自的水平网格线的顶部，如下图所示。

在 HighCharts 中唯一的复杂情况是轴标签有时会与柱形图中的第一列重叠。

**更新的演示：**例如，请参阅此图表：http: [//jsfiddle.net/NWsgz/1/](http://jsfiddle.net/NWsgz/1/)

![highcharts中的y轴问题](https://i.stack.imgur.com/lUWrY.png)

我曾尝试使用 来实现这一点[`xAxis.minpadding`](http://api.highcharts.com/highcharts#xAxis.minPadding)，但该属性似乎对柱形图没有影响。Highcharts 有没有办法达到我想要的效果？从理论上讲，我可以通过使条形非常窄来获得效果，但我正在寻找另一种解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T16:44:54.153

我想出了一个解决方法，但它并不完美。

1.  使用从图表中分离 yAxis`yAxis.offset`
2.  使用超长刻度线模拟向左延伸的网格线

像这样：

```
yAxis: {
  offset: 30,
  tickLength: 30, // Same value as offset
  tickPosition: "inside",
  tickWidth: 1,
  tickColor: "black", // The same as your gridLine color
  labels: { 
    align: 'left',
    x: 0,
    y: -8 // Position labels above their gridLine/tickMark
  }
} 
```

有关演示，请参阅[http://jsfiddle.net/supertrue/NWsgz/2/](http://jsfiddle.net/supertrue/NWsgz/2/)

### 为什么不理想

我希望我的 gridLines 使用破折号样式（例如`dashStyle: 'longdash'`），但似乎没有办法将破折号样式应用于刻度线。

我很想知道是否有办法做到这一点，或者更好的解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T10:37:09.827

它不适用于分类轴 - 在该类型中，轴被分为相等的类别，因此不允许最小/最大填充。

可能的解决方案是使用标准轴，但使用`formatter`轴，请参阅：http: [//jsfiddle.net/NWsgz/4/](http://jsfiddle.net/NWsgz/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:59:50.983

您可以为 yAxis [http://api.highcharts.com/highcharts#yAxis.offset使用偏移参数](http://api.highcharts.com/highcharts#yAxis.offset)

# assembly - Asm ascii 到二进制转换

> ID：15889789
> 
> 赞同：0
> 
> 时间：2013-04-08T21:59:36.410
> 
> 标签：assembly, binary, x86, ascii, intel

我试图将 ascii 输入转换为变量中的二进制代码。程序运行良好，而输入的字符数是偶数。不知道为什么当它奇怪时我得到了错误的结果。如果输入的数量是奇数，我正在尝试将其转换为 8 位二进制，就像我得到 1 一样 00000001 并把它放在第一位，然后只需将 2 个 ascii 字符用于低 4 位和高 4 位。你能帮我吗 ？

```
SYSEXIT         = 1
SYSREAD         = 3
SYSWRITE        = 4
STDOUT          = 1
STDIN           = 0
EXIT_SUCCESS    = 0
SIZE            = 500

.align 32

.bss
.lcomm bufor, SIZE
.lcomm bufor2, SIZE

.text
.global _start ;

_start:
mov $SYSREAD, %eax
mov $STDIN, %ebx
mov $bufor, %ecx
mov $SIZE, %edx

int $0x80

sub $1, %eax #od liczby znaków odejmujemy znak entera
mov %eax, %edi  #przeniesienie liczby wczytanych znaków z eax
mov $0,%dx  # reszta z dzielenia
mov $2,%cx  #dzielnik
div %cx     # ax:=dx:ax / cx
mov $0, %esi
mov $0, %ecx
mov $0, %ebp

petla:
mov bufor(,%ecx,1),%al
inc %esi
cmp $'a',%al
jge male
cmp $'A',%al
jge duze
cmp $'0',%al
jge liczby
next:
cmp $1, %dx
je niep
mov %al,%bl
shl $4, %ebx
inc %ecx
cmp %edi,%ecx
je koniec
jmp petla
next2:
or %al,%bl
mov %bl, bufor2(,%ebp,1)
inc %ebp
inc %ecx
cmp %edi,%ecx
je koniec
mov $0,%esi
jmp petla

male:
sub $'a', %al
add $10, %al
cmp $1,%esi;
je next
jmp next2

duze:
sub $'A', %al
add $10, %al
cmp $1,%esi;
je next
jmp next2

liczby:
sub $'0', %al
cmp $1,%esi;
je next
jmp next2

niep:
mov %al, bufor2(,%ebp,1)
inc %ebp
cmp %edi,%ecx
je koniec
inc %ecx
mov $0,%esi
mov $0,%dx
jmp petla

koniec:

movl $SYSEXIT, %eax;            #wyjscie z programu
movl $EXIT_SUCCESS, %ebx
int $0x80 
```

# magento - Magento 按类别获取购物车中的商品数量

> ID：15889791
> 
> 赞同：-1
> 
> 时间：2013-04-08T22:00:02.617
> 
> 标签：magento

我正在尝试按每个类别获取用户购物车中的商品数量。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:28:12.567

看一下[@Magento：每个订单限制类别中的 3 个产品](https://stackoverflow.com/questions/15345619/magento-limit-3-products-from-category-per-order)

```
.....
$quote = Mage::getSingleton('checkout/session')->getQuote();
foreach($quote->getAllVisibleItems() as $item){
      $product = Mage::getModel('catalog/product')->load($item->getId());
      $product_category_ids = explode(",", $product->getCategoryIds());
      //$product_category_ids = $product->getCategoryIds();

      foreach($product_category_ids as $category_id){
           $category_ids[$category_id]['category_id'] = $category_id;
           $category_ids[$category_id]['product_count'] = ($category_ids[$category_id]['product_count']) ? $category_ids[$category_id]['product_count'] + $item->getQty() : $item->getQty();
      }
} 
```

# asp.net-mvc - MVC 4 中的 SQL Server Express 数据库文件自动创建错误 - 但我不想使用 SQL Server Express

> ID：15889792
> 
> 赞同：5
> 
> 时间：2013-04-08T22:00:08.640
> 
> 标签：asp.net-mvc, ef-code-first

我刚刚在 ASP.Net MVC 4 中部署了一个新应用程序。我使用的是 SQL Server 2008 R2（不是 SQL Express）。

前 10 分钟运行良好，然后我对代码进行了一些更改并重新部署它。

现在，每当我尝试访问使用 SimpleMembership 的页面时，都会收到此错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> SQLExpress 数据库文件自动创建错误：
> 连接字符串使用应用程序 App_Data 目录中的数据库位置指定本地 Sql Server Express 实例。提供者试图自动创建应用程序服务数据库，因为提供者确定该数据库不存在。成功检查应用程序服务数据库是否存在并自动创建应用程序服务数据库需要以下配置要求：

但是，我*不*使用 SQL Server Express。在我的`web.config`我已经设置了所有的连接字符串如下：

```
<add name="ApplicationServices" 
     connectionString="Server=myServer;Database=myDB;User Id=myUserID;Password=myPWD;" 
     providerName="System.Data.SqlClient" />

<add name="ApplicationServices" 
     connectionString="Server=myServer;Database=myDB;User Id=myUserID;Password=myPWD;" 
     providerName="System.Data.SqlClient" /> 
```

为什么它一直尝试创建 SQL Server **EXPRESS**数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T06:13:41.173

当我遇到这个错误时，结果很简单。我终于发现在我的 _Layout.cshtml 中我引用`User.IsInRole("role")`了但在`Request.isAuthenticated`. 我的代码看起来像`@if (Request.isAuthenticated && User.IsInRole("role"))`. 所以基本上如果我没有在主页上签名，因为它不会遍历`IsInRole()`调用（这需要初始化简单的成员资格，否则我会得到你在这里提到的错误。所以基本上我需要确保每个并且每个使用扩展 _Layout 文件的视图并且可能具有未经身份验证的用户的控制器都需要具有`[InitializeSimpleMembership]`. 或初始化简单成员资格的各种方法之一。

所以像

```
namespace ProjectName.Controllers
{
    [InitializeSimpleMembership]
    public class HomeController : Controller {
... 
```

另外，我经常 Ctrl + F5 启动应用程序，然后使用“重建解决方案”。当我刷新一个不是根主页的页面时，我会收到错误，直到我调用根主页。到那时，一切都会重新开始。

希望这会对您或某人有所帮助。我撞了头至少一两个小时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-17T14:26:01.250

你还有这个问题吗？另外，为什么 ApplicationServices 列出了两次？

不久前我遇到了同样的事情。我在 web.config 中缺少成员资格和角色的配置。

```
<membership defaultProvider="AspNetSqlMembershipProvider">
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider"
         type="System.Web.Security.SqlMembershipProvider"
         connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false"
         enablePasswordReset="true"
         requiresQuestionAndAnswer="false"
         requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5"
         minRequiredPasswordLength="6"
         minRequiredNonalphanumericCharacters="0"
         passwordAttemptWindow="10"
         applicationName="Test" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="SqlRoleManager">
  <providers>
    <add name="SqlRoleManager"
         type="System.Web.Security.SqlRoleProvider"
         connectionStringName="ApplicationServices"
         applicationName="Test" />
  </providers>
</roleManager> 
```

# visual-studio-2010 - 为剃须刀禁用 VS 2010 格式，但不是 c#

> ID：15889793
> 
> 赞同：3
> 
> 时间：2013-04-08T22:00:09.413
> 
> 标签：visual-studio-2010, resharper

我想在 VS 2010 中对我的所有剃须刀使用 resharper 格式。（因为 VS 缩进不正确）所以我想在粘贴剃须刀时禁用 VS 格式，但是我仍然希望在 c# 文件中粘贴 ON 格式。

这可能吗？（这可能在 VS2012 中）

注意：我可以通过设置 为 c#**和**`Tools > Options > Text Editor > C# > Formatting > [uncheck] Automatically format on paste`razor 禁用它： 但我不能只为 razor 禁用它，也许有扩展名？或某种方式让resharper控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:47:36.377

尝试去`Tools | Options -> Text Editor | HTML | Miscellaneous`并关闭`Format HTML on paste`。我自己还没有尝试过，但它可能会起作用。

# python - 创建一个 Django 表单来保存两个模型

> ID：15889794
> 
> 赞同：16
> 
> 时间：2013-04-08T22:00:21.777
> 
> 标签：python, django, django-models, django-forms

我有常规的 Django`User`模型和一个`UserDetails`模型（`OneToOneField`with `User`），它用作`User`模型的扩展。（我尝试了 Django 1.5 的功能，但奇怪的可怕文档让我头疼，所以我坚持使用该`OneToOneField`选项）

因此，在我寻求构建一个自定义注册页面的过程中，该页面将包含一个由`User`字段和`UserDetails`字段组成的注册表单，我想知道是否有一种方法可以从这两个相关模型中自动生成表单（及其所有验证） . 我知道这适用于由一个模型制成的表格：

```
class Meta:
    model = MyModel 
```

但是，对于由两个相关模型组成的表单，是否有类似的功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T03:08:39.307

```
from django.forms.models import model_to_dict, fields_for_model

class UserDetailsForm(ModelForm):
    def __init__(self, instance=None, *args, **kwargs):
        _fields = ('first_name', 'last_name', 'email',)
        _initial = model_to_dict(instance.user, _fields) if instance is not None else {}
        super(UserDetailsForm, self).__init__(initial=_initial, instance=instance, *args, **kwargs)
        self.fields.update(fields_for_model(User, _fields))

    class Meta:
        model = UserDetails
        exclude = ('user',)

    def save(self, *args, **kwargs):
        u = self.instance.user
        u.first_name = self.cleaned_data['first_name']
        u.last_name = self.cleaned_data['last_name']
        u.email = self.cleaned_data['email']
        u.save()
        profile = super(UserDetailsForm, self).save(*args,**kwargs)
        return profile 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T02:14:33.977

如果您想将 User 和 UserDetails 的 ModelForm 分开，您可以实现此目的的一种方法是将两个表单返回到前端，并确保它们都在同一个 html 表单元素中（即所有字段都将返回发布数据时）。

如果 User 和 UserDetails 没有任何具有相同名称的字段，则此方法有效。要在每个 ModelForm 实例中输入数据，请使用常用方法：

```
 form_user = UserForm(request.POST, instance=request.user)
    form_user_details = UserDetailsForm(request.POST, instance=request.user.userdetails) 
```

# apache - 查询字符串的mod重写

> ID：15889795
> 
> 赞同：0
> 
> 时间：2013-04-08T22:00:28.127
> 
> 标签：apache, .htaccess, mod-rewrite

说我想`http://domain.com/product/?id=123`成为`http://domain.com/product/foo`，我该怎么做`.htaccess`呢？我尝试了这样的事情，但没有奏效：

```
RewriteCond %{QUERY_STRING} ^id=123$    [NC]
RewriteRule ^/product$  /product/foo    [NC,L,R=301] 
```

建议？

注意：我不需要捕获`id`参数的值，因为我不会在新 URL 中使用它。

**更新 1：**

```
RewriteEngine On
RewriteBase /fisher

RewriteCond %{QUERY_STRING} ^id=123 [NC]
RewriteRule ^product/$  /product/foo    [NC,L,R=301] 
```

1.  显示 RewriteEngine 和 RewriteBase
2.  `$`在 RewriteCond 中删除
3.  `/`在 RewriteRule 中删除

当我去 时`http://localhost/fisher/product/?id=123`，什么也没有发生。URL 保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:03:18.647

Clear your browser cache and restart the browser then try this:

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /fisher

RewriteCond %{QUERY_STRING} ^id=123 [NC]
RewriteRule ^product/?$ product/foo? [NC,L,R=302] 
```

Once you verify it is working fine then change `R=302` to `R=301`

# css - 在循环中混合两个 SASS 变量

> ID：15889796
> 
> 赞同：1
> 
> 时间：2013-04-08T22:00:28.837
> 
> 标签：css, sass, compass-sass

我有几个 scss 变量，看起来像：

```
$box-bg1: #7a8360;
$box-bg2: #918261;
$box-bg3: #6a8177;
$box-bg4: #686f5e; 
```

我想在 for 中使用这些变量，例如：

```
@for $i from 1 through 4 {
  .locationBox:nth-child(#{$i}) { background: $box-bg#{$i}; }
} 
```

编译代码后，我收到此错误：语法错误：未定义变量：“$box-bg”，看起来该`#{$i}`变量对我的代码没有任何意义。有没有办法在这样的循环中使用变量？

注意：我也使用指南针

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T23:51:23.860

Sass 不支持可变变量。要以编程方式创建选择器，您必须使用列表来完成：

```
$box-bg: #7a8360, #918261, #6a8177, #686f5e;

@for $i from 1 through length($box-bg) {
  .locationBox:nth-child(#{$i}) { background: nth($box-bg, $i); }
} 
```

输出：

```
.locationBox:nth-child(1) {
  background: #7a8360;
}

.locationBox:nth-child(2) {
  background: #918261;
}

.locationBox:nth-child(3) {
  background: #6a8177;
}

.locationBox:nth-child(4) {
  background: #686f5e;
} 
```

# c++ - VS2010: 致命错误 LNK1120: 1 unresolved externals 。使用模板

> ID：15889798
> 
> 赞同：0
> 
> 时间：2013-04-08T22:00:42.860
> 
> 标签：c++, class, templates, unresolved-external

有一个简单的类和类模板的分配，在这里搜索过，似乎没有解决方案可以解决这个问题。当我尝试编译时，出现了：

```
1>MSVCRTD.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup 1>c:\users\leanne\documents\visual studio 2010\Projects\PartC\Debug\PartC.exe : fatal error LNK1120: 1 unresolved externals 
```

有一个使用空项目的控制台项目。谁能帮我找到问题？这是我的代码：

```
#include <iostream>
using namespace std;
template<typename ItemType>
class Vec3
{
    ItemType x, y ,z;
public:
    Vec3<ItemType>(){x=0;y=0;z=0;}
    Vec3<ItemType>(const Vec3<ItemType>& other);
    Vec3<ItemType> operator+(Vec3<ItemType>);
    Vec3<ItemType> operator-(Vec3<ItemType>);
    bool operator==(Vec3<ItemType> other);
    Vec3<ItemType> operator=(Vec3<ItemType>);
    ~Vec3<ItemType>(){;}
};
template<typename ItemType>
Vec3<ItemType> Vec3<ItemType>::operator+(Vec3<ItemType> other)
{
    Vec3 temp;
    temp.x = x + other.x;
    temp.y = y + other.y;
    temp.z = z + other.z;
    return temp;
}
template<typename ItemType>
bool Vec3<ItemType>::operator==(Vec3<ItemType> other)
{
    if(x != other.x)
        return false;
    if(y != other.y)
        return false;
    if(z != other.z)
        return false;
    return true;
}
template<typename ItemType>
Vec3<ItemType> Vec3<ItemType>::operator-(Vec3<ItemType> other)
{
    Vec3 temp;
    temp.x = x - other.x;
    temp.y = y - other.y;
    temp.z = z - other.z;
    return temp;
}  
template<typename ItemType>
Vec3<ItemType> Vec3<ItemType>::operator=(Vec3<ItemType> other)
{
    x = other.x;
    y = other.y;
    z = other.z;
    return *this;
}
template<typename ItemType>
Vec3<ItemType>::Vec3(const Vec3<ItemType>& other)
{
    x = other.x;
    y = other.y;
    z= other.z;
}
template<typename ItemType>
int main()
{
    Vec3<int> v1;
    Vec3<int> v2(v1);
    Vec3<double> v3 = v2;
    v3 = v1+v2;
    v3 = v1-v2;
    if(v1==v2)
    {
        return 0;
    }
    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:04:49.187

您收到错误是因为您制作`main`了模板：

```
template<typename ItemType>
int main() 
```

请删除`template<typename ItemType>`. `main`不允许作为模板。

一旦你删除它，你会得到错误，`Vec3<double> v3 = v2;`因为`v2`is a`Vec3<int>`并且不能转换为 a `Vec3<double>`。

# c# - Azure UpdateDomain 可配置性

> ID：15889799
> 
> 赞同：0
> 
> 时间：2013-04-08T22:00:44.780
> 
> 标签：c#, powershell, azure

基本上我的问题是：我对 Azure 更新域有什么控制权？

*   我可以**发现**我的角色有多少个更新域吗？
*   我可以**定义**我的角色有多少个更新域吗？
*   我可以**定义**给定实例的更新域吗？（假设有超过 1 个实例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:40:08.713

[MSDN 说](http://msdn.microsoft.com/en-us/library/windowsazure/hh472157.aspx)您可以通过在服务定义文件中设置来设置更新域的数量`upgradeDomainCount`，默认值为 5，如果您不指定计数，则使用该值。

`RoleEnvironment.CurrentRoleInstance.UpdateDomain`还返回当前角色的更新域索引。管理门户还显示每个实例的更新域号。最后，您可以使用[`GetDeployments`管理 API 调用](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)，该调用将返回实例列表和每个实例的升级域号。

您不能将实例显式分配给域 - 分配是从实例 0 及以上开始[以循环方式完成的。](http://msdn.microsoft.com/en-us/magazine/hh781019.aspx)

# php - 自定义 empty() 函数

> ID：15889802
> 
> 赞同：-1
> 
> 时间：2013-04-08T22:00:55.577
> 
> 标签：php, function, isset

今天我创建了一个名为`is_empty()`. 该功能类似于现有`empty()`功能 - 它添加了我的脚本所需的更多检查。

但是，现在当我运行脚本并且未设置某些值时，我得到：`Notice: Undefined index`通知。默认`empty()`函数显示此通知并假定值为空，有没有办法配置我的函数来做同样的事情？而不是`isset()`一起使用`is_empty()`？

非常感谢你！

编辑：我的功能在这里：

```
function is_empty($value, $integer = FALSE){
    if($integer){
        return empty($value) && !is_numeric($value);
    }
    return empty($value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:04:45.657

该通知并非来自您在函数内部执行的某些检查。该通知来自将一些参数传递给您的函数，即在函数体实际执行之前。因此，您无法通过以不同方式实现该功能来改变这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:07:24.650

我会做这样的事情：

```
 function is_empty($value, $integer = FALSE){
    if (!empty($value)){
    if($integer !== FALSE){
        $return = preg_replace("/[^0-9]+/", "", $value);
        return empty($value) && !is_numeric($value);
    }
    return empty($value);
    }
    return FALSE;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T15:50:28.477

这是我的 is_empty 函数版本

```
function is_empty(&$var)
{
    return is_string($var) ? trim( $var ) == '' : empty($var);
} 
```

解决方案是通过引用传递变量。

这是另一个这样的示例：

[使用 isset() 的自定义函数在使用时返回未定义的变量](https://stackoverflow.com/questions/23344821/custom-function-that-uses-isset-returning-undefined-variables-when-used)

希望这会有所帮助。

# c# - C#没有运行派生类函数

> ID：15889803
> 
> 赞同：1
> 
> 时间：2013-04-08T22:01:01.040
> 
> 标签：c#, function, inheritance

我正在制作的游戏有问题。基本上我有很多字段，一个基本类型和其他类型。从逻辑上讲，我制作了基本字段的衍生产品，以根据需要添加额外的功能。

但是，似乎当我调用基类中存在的函数时，该函数将从基类而不是派生类中运行。

这是一些精简的代码，因此您可以了解我的意思。

```
public class Field
{
    public Field(Field exitN, Field exitE, Field exitS, Field exitW, bool barricadeAllowed, int returnTo, int xPos, int yPos)
    {
        //Actual logic is in the constructor, but unrelated to the below function
    }

    public void Function()
    {
        if (this is StartField)
        {
            Debug.WriteLine("StartField running base function!");
        }
        //Actual logic here. 
    }

} 
```

.

```
class StartField : Field
{
    public StartField(Field exitN, Field exitE, Field exitS, Field exitW, string color, int xPos, int yPos)
        : base(exitN, exitE, exitS, exitW, false, 0, xPos, yPos)
    {
        //Again, constructor emptied due to unrelatedness. 
    }

    public new void Function()
    {
        Debug.WriteLine("StartField function");
        //Different logic then the base function
    } 
```

在 startfield 对象上调用此函数会导致“startfield running base function！” 出现在我的调试栏中，但不是“startfield 函数” 这告诉我只有基函数被调用，即使对象知道它是 StartField 类型。

如果有任何不同，所有字段都通过与其他字段的链接保存。变量要求字段类型，但所有变量都允许在变量中（因为继承）这是否会以任何方式导致调用转到“字段”代码而不是“开始字段”代码（或任何其他非标准的代码字段，因为这似乎是所有字段的情况）

我能想到两种解决方法我能想到的第一种解决方法是在运行函数之前检查类型并将字段转换为它的实际类型。但是我们不允许在作业中使用 (class is Field)。另外，它需要比简单函数调用更多的代码。

第二种解决方法还使用（类为字段）功能，即将所有字段类型功能编程到基类中。它不仅使用（类是字段）而且感觉完全错误（孩子应该有自己的功能，如果基础拥有一切就没有意义。还不如使用单个类并将类型作为变量而不是继承成员）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:06:13.167

基本上，听起来您需要`Function`成为一个虚拟方法，该方法在以下位置*被覆盖*`StartField`：

```
// In Field
public virtual void Function()
{
    if (this is StartField)
    {
        Debug.WriteLine("StartField running base function!");
    }
    //Actual logic here. 
}

// In StartField
public override void Function()
{
    Debug.WriteLine("StartField function");
    //Different logic then the base function
} 
```

您当前的代码*没有*使用多态性 -`Field.Function`如果您正在调用的表达式的编译时类型`Function`是 just ，它将始终调用`Field`，因为它不是虚拟的。然后`StartField`你明确地说，“我不是要覆盖基本方法 - 我正在提供一个新方法。”

有关更多详细信息，请参阅修饰符的[MSDN](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx)[页面和`new`](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)修饰符[上](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)[的`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx)页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T22:06:16.347

如果`Function`是*虚拟*的呢？

```
public virtual void Function()
{
    if (this is StartField)
    {
        Debug.WriteLine("StartField running base function!");
    }
    //Actual logic here. 
} 
```

然后在 中覆盖`StartField`，如下所示：

```
public override void Function()
{
    Debug.WriteLine("StartField function");
    //Different logic then the base function
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T22:07:42.760

绝对不要试图解决这个问题——这是基本的 OOP。

您需要将基类方法标记为虚拟（或抽象，如果它没有自己的逻辑），以便可以覆盖它。然后将子类方法标记为覆盖。例如，检查[http://msdn.microsoft.com/en-us/library/ebca9ah3(v=vs.110).aspx 。](http://msdn.microsoft.com/en-us/library/ebca9ah3(v=vs.110).aspx)

# hadoop - 有没有比在 Pig 中分组更好的方法来处理静态列？

> ID：15889809
> 
> 赞同：0
> 
> 时间：2013-04-08T22:01:19.380
> 
> 标签：hadoop, apache-pig

我有很多非规范化数据，我需要对其进行一些计算。大约有 28 列，其中 1 列是 ID 列，其中 5 列我需要求和，其余的我只需要报告。因此，对于单个 ID，其中 22 个列始终相同。目前，我正在对 23 列进行分组，然后将 5 列相加。在我看来，这可能有过多的开销。有没有更好的处理方法？

这是初始加载后的脚本：

```
grouped = GROUP inputData BY
(SITE_ID_COL,
 META_ID_COL,
 ITEM_ID_COL,
 SELLER_ID_COL,
 CATEGORY1_COL,
 CATEGORY2_COL,
 TOTAL_WATCH_COL,
 ITEM_TITLE_COL,
 AUCT_TYPE_COL,
 CURRENCY_COL,
 ITEM_PRICE_COL,
 SHIPPING_TYPE_COL,
 SHIPPING_FEE_COL,
 START_DATE_COL,
 TOTAL_QTY_COL,
 QTY_AVAIL_COL,
 STATUS_ID_COL,
 AUCT_DURATION_COL,
 END_DATE_COL,
 LOGIN_ATOL_COL,
 LOGIN_LATEST_COL);

filtered = FOREACH grouped GENERATE
  flatten(group),
  SUM(inputData.IMPRESSION_COL),
  SUM(inputData.CLICK_COL),
  SUM(inputData.BIDCOUNT_COL),
  SUM(inputData.QTY_SOLD_COL),
  SUM(inputData.CK_TRANS_COL),
  SUM(inputData.GMV_COL);

STORE filtered INTO 'output/'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:16:15.637

解决此问题的另一种方法是，从文件中获取组变量，以便您的代码看起来干净，如果您想更改组变量，您可以轻松更改。

> 第1步。

在文件 groupparams.txt 中声明如下变量

```
groupvariables = col1,col2,col3,col4 .....etc 
```

> 第2步

在 pig 脚本文件中使用上述变量，如下所示（比如 pigscript.pig）

```
B = group a by $groupvariable 
```

> 第 3 步

运行如下脚本

```
pig -paramfile=groupparams.txt pigscript.pig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:50:11.413

因此，这是否更快取决于您的数据集和集群，但您可以尝试仅使用 id 和 5 个求和列重新生成数据，然后再加入 22 个“报告”列。就像是：

```
smallerData = FOREACH inputData GENERATE ITEM_ID_COL, IMPRESSION_COL, ...;

reportingData = FOREACH inputData GENERATE ITEM_ID_COL, [OTHER 22 REPORTING COLS];
reportingData1 = DISTINCT reportingData;

grouped = GROUP smallerData BY ITEM_ID_COL;

filtered = FOREACH grouped GENERATE
  flatten(group) AS id,
  SUM(inputData.IMPRESSION_COL),
  SUM(inputData.CLICK_COL),
  SUM(inputData.BIDCOUNT_COL),
  SUM(inputData.QTY_SOLD_COL),
  SUM(inputData.CK_TRANS_COL),
  SUM(inputData.GMV_COL);

joined = JOIN filtered BY id, reportingData1 BY ITEM_ID_COL;

STORE joined INTO 'output/'; 
```

如果您的分组集的行数比您的输入集少，这可能会使事情变得更快。它还将大大有助于防止您遇到 java 堆空间问题，当您以非常宽的行结束时（即在组之后），众所周知 pig 会遇到这种问题。

如果不是这种情况，您的原始方式可能会更快，因为除非您必须，否则您绝对不想在 Pig 中使用连接。

# sql - 如何在 grails 的 Hibernate 查询中应用 if 条件

> ID：15889810
> 
> 赞同：0
> 
> 时间：2013-04-08T22:01:22.757
> 
> 标签：sql, grails, hql

我正在使用 SpringSourceTool 进行 grails 项目开发。我有这个要求执行带有一些 if 条件的查询，首先我在 sql 查询浏览器中尝试了查询，它工作正常，但是当我尝试在 grails 中访问它时，结果集为空。

我对 DummyData 的 sql 查询，

```
select week , month , emp_name , sum(emp_salary),sum(if(emp_age=19,emp_bonus,0)) from dummy_data order by week; 
```

这个查询工作得很好

现在，当我在 grails 域类中尝试相同的执行查询时

```
def myList = DummyData.executeQuery("select week,month,empName,sum(empSalary),sum(if(empAge=19,empBonus,0)) from DummyData group by week") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:54:50.097

通常，您不希望对休眠数据库执行原始 SQL 查询，因为 ORM 以比您可能存储数据的方式更复杂的方式将事物存储在表中（因此它可以正确映射到 java 对象）。您不是从数据库中选择特定字段，而是选择对象。所以你需要以一种可以被hibernate检索的方式存储数据。

我建议您使用 grails 中的工具对休眠数据库执行查询 - 特别是查看[Criteria Builder](http://grails.org/doc/2.2.x/ref/Domain%20Classes/createCriteria.html)

# jquery - PhoneGap/Cordova：在模拟器中很好，突然无法在设备上工作：找不到 jQuery

> ID：15889815
> 
> 赞同：2
> 
> 时间：2013-04-08T22:01:39.693
> 
> 标签：jquery, ios, cordova, jquery-mobile, cordova-2.0.0

这只是突然发生的事情：我的老板在一次短途出差时拿走了她的手机和应用程序的开发副本，并在出差几天后报告了这个错误。我以为我已经对从服务器返回的 json 进行了一些更改并且破坏了它，但是现在我将它恢复了，它似乎与我在服务器上的工作完全无关。

这是我在控制台中收到的错误消息：

```
Error in success callback: Geolocation3 = ReferenceError: Can't find variable: jQuery 
```

或者

```
Error in success callback: Geolocation3 = ReferenceError: Can't find variable: $ 
```

很明显，它就是找不到 jQuery。它执行'deviceReady'就好了。但它在模拟器中运行良好。我对 jQM 和 jQ 都使用 jQuery CDN，并且可以通过浏览器访问两者。

那么给了什么？为什么它会突然无法找到 jQuery - 并且只能在设备上找到？

我在网上看到很多类似的问题，但没有一个有明确的答案。有些是“干净和重建”，有些是简单的错别字……但没有什么。这不是位置权限问题。这不是连接问题。这不是网址白名单问题。

一如既往地感谢您的帮助。谢谢！

* * *

我将在下面提供尽可能多的代码：

```
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <title>XXXXXX</title> 
    <link rel="stylesheet" href="css/jquery.mobile.css" />
    <link rel="stylesheet" href="css/themes/app-2012-11-30.css" />
    <link rel="stylesheet" type="text/css" href="spec/lib/photoswipe/photoswipe.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <!-- cordova -->
    <script src="cordova-2.1.0.js" type="text/javascript"></script>
    <!-- jquery -->
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <!-- Google -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <!-- Add ons -->
    <script src="spec/lib/photoswipe/lib/klass.min.js"></script>
    <script src="spec/lib/photoswipe/code.photoswipe.jquery-3.0.5.js"></script>
    <!-- Objects -->
    <script src="js/map.js" type="text/javascript"></script>
    <script src="js/prefs.js" type="text/javascript"></script>
    <script src="js/search.js" type="text/javascript"></script>
    <script src="js/storage.js" type="text/javascript"></script> 
    <script src="js/helpers.js" type="text/javascript"></script>
    <script src="js/player.js" type="text/javascript"></script> 
    <script src="js/record.js" type="text/javascript"></script>  
    <script src="js/connection.js" type="text/javascript"></script> 
    <script src="js/location.js" type="text/javascript"></script>  
    <script src="js/header-footer.js" type="text/javascript"></script>
    <script src="js/featured.js" type="text/javascript"></script>
    <script src="js/list.js" type="text/javascript"></script>
    <script src="js/index.js" type="text/javascript"></script>
    <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady(){
            console.log('device ready');
            storageSetUp();
            checkConnection();
            getLocation();
            showFeatured();
            getSetUp();
            clUpdate();
            $(document).bind( 'mobileinit', function(){
                $.mobile.defaultPageTransition = "none";
                $.mobile.loader.prototype.options.textVisible=false;
                $.mobile.loader.prototype.options.html = '<div class="loading"></div>';
                $.mobile.pushStateEnabled = false;
            });
            $(document).bind('pagebeforeshow',function(){
                setHeaderFooterInfo();
            });         
        }
    </script> 
```

getLocation 位于 .js 文件中。您在那里看到函数 getStreetAddress，它包含一个 ajax 调用（$.ajax 或 jQuery.ajax），这就是它给出错误的地方。

```
function getLocation()
{
    gLAttempt++;
    navigator.geolocation.getCurrentPosition(onLocationSuccess, onLocationError);
} 

// onSuccess Geolocation
function onLocationSuccess(position)
{
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    Storage.location.lat = parseFloat(lat.toFixed(6));
    Storage.location.lng = parseFloat(lng.toFixed(6));
    Storage.location.coords = lat.toFixed(6) + ',' + lng.toFixed(6);
    if(ajax_rg == null){
        getStreetAddress(Storage.location.coords);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:38:44.590

我能想到的2种可能的情况：

1.  iOS 设备对文件/文件夹名称区分大小写。确保对所有添加的文件和文件夹使用相同的大小写。请记住，iOS 模拟器不区分大小写。所以不区分大小写的文件引用将在模拟器上工作，但在设备上不起作用。

2.  从 CDN 中移除 jQuery 引用并将其添加到本地。当您打包并部署应用程序时，使用 CDN 并没有什么意义。可能会触发您的 onDeviceReady 事件，但未从 CDN 下载 jQuery 文件...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T16:10:45.390

我最近遇到了他同样的问题。我花了几个小时试图找出问题所在，当我将新文件与旧文件进行比较时，我意识到一个 html 文件名`sidebar.html`在代码中被称为`sideBar.html`.

区分大小写是唯一的问题。

# java - 如何创建一个仅用两个替换两个或多个连续相同字符的正则表达式？

> ID：15889816
> 
> 赞同：2
> 
> 时间：2013-04-08T22:01:41.907
> 
> 标签：java, regex

假设您有一条类似于以下内容的 Twitter 消息：

```
"Hoot, this is soooooo coooool!!!" 
```

我想提出一个 Java 正则表达式，以便 String.replaceAll 产生以下结果：

```
"Hoot, this is so cool!" 
```

我开始并尝试排列以下内容但没有成功：

```
original.replaceAll("(.)\\1+", "$1"); 
```

有人知道如何想出一个正则表达式来贪婪地将几个连续的字符减少到两个字符吗？解决方案不能将两个重复字符减少为一个（例如，单词 hoot 不应减少为 hot）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:07:54.013

如果您需要用两个正好替换 2+ 个字符，您可以稍微修改您的表达式，如下所示：

```
original.replaceAll("(.)\\1+", "$1$1"); 
```

但是，正则表达式中没有足够的信息来创建例外`"soooooo"`并将其修剪为`"so"`，而不是`"soo"`.

这是[关于 ideone 的演示](http://ideone.com/Yrd2Ma)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:29:48.000

使用纯正则表达式，你会得到最好的结果是 dasblinkenlight 显示的，但你的问题不仅仅是用这 2 个字符替换 2+ 个字符。考虑到单词的上下文，您*真正*想要的是去除额外的重复以正确拼写单词。

例子：

*   “这太酷了”被简化为“so”，而不是“soo”——将 1+ 剥离为 1
*   “这太酷了”被简化为“酷”——从 2+ 到 2
*   "this is hooooot" 简化为 "hot" - 将 1+ 剥离为 1，因为意图是单词 "hot" 而不是 "hoot"
*   将“hooooooot”简化为“hoot” - 将 2+ 剥离为 2，因为在这种情况下，意图是“hoot”而不是“hot”

对此没有纯正则表达式解决方案。正则表达式不能进行拼写和语法检查。

# python - How do I add a menu to a toolbar? gtk3

> ID：15889817
> 
> 赞同：2
> 
> 时间：2013-04-08T22:01:43.823
> 
> 标签：python, menu, toolbar, gtk3

**OK I figured out a way. If you have another way you can still give your answer. You may have an easier way. I'll be trying to format a reply for my answer in the meantime. The method I discovered is a little messy so I have to take my time. For now I will leave my answer unaccepted to see if someone else has a better way.**

I'm using python with gtk3.

For gtk3 there is a menutoolbutton, but the description of it's usage in the documentation is not clear enough for me.

Besides that I would also like a plain button without the drop arrow for the toolbutton used for this.

If there is a way to do this with the gtk uimanager I would prefer that.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:24:51.053

这是我的答案。

这有点花很长的路要走，但它确实有效。

主要问题之一是我认为我可以在网格中使用最近的按钮，但 gtk 似乎只有工具栏和菜单的最近操作。因此，如果我还想要另一个带有弹出窗口的工具栏按钮，那将变得复杂，因为工具栏按钮不容易定制为没有下拉箭头。

长话短说。我用常规的弹出按钮走了很长一段路，并制作了一个网格来包含它和工具栏。

```
#the popup you see here will get used for the menu button
TOOLBAR_UI = """
<ui>
    <toolbar name="ToolBar">
        <toolitem action="FileOpen" />
        <toolitem action="FileSave"  />
        <toolitem action="FileSaveAs" />
        <toolitem action="Undo" />
        <toolitem action="Redo" />
    </toolbar>
    <popup name="Menu">
        <menuitem action="Bla" />
    </popup>
</ui>
"""
class GroupView(Gtk.Grid):

    def __init__(self):
        Gtk.Grid.__init__(self, orientation=Gtk.Orientation.HORIZONTAL)
        #the toolbar grid is placed in another grid to be
        #placed in a gtk.window
        group_toolbar = Toolbar()
        self.add(group_toolbar)

class Toolbar(Gtk.Grid):
    def __init__(self):
        Gtk.Grid.__init__(self, orientation=Gtk.Orientation.HORIZONTAL)
        toolbar = Tools()
        #toolbar is actually a grid with an actual toolbar
        #and the menu button is in the grid
        self.add(toolbar.display())
        self.add(toolbar.extra_menu)

class Tools(Gtk.UIManager):
    text_view = None
    def __init__(self):
        Gtk.UIManager.__init__(self)
        self.add_ui_from_string(TOOLBAR_UI)
        action_group = Gtk.ActionGroup("actions")
        self.add_toolbar_actions(action_group)

    def set_text_view(self, textview):
        self.textview = textview

    def add_toolbar_actions(self, action_group):
        self.insert_action_group(action_group)
        #
        #..normal toolbar construction here
        #

        #its a menu button so only the menu actions
        #need to be taken care of
        action_bla = Gtk.Action("Bla", 'bla', None, None)
        action_bla.connect("activate", self.action_bla_clicked)
        action_group.add_action(action_bla)
        #..the menu button is created here
        self.extra_menu = ExtraMenu()
        self.extra_menu.set_popup(self.get_widget("/Menu"))

        #start action callbacks
        #...placeholder for callbacks
        #end action callbacks
    #get ready to export the toolbar
    def display(self):
        toolbar = self.get_widget("/ToolBar")
        toolbar.set_hexpand(True)
        return toolbar

class ExtraMenu(Gtk.MenuButton):
    def __init__(self):
        Gtk.MenuButton.__init__(self)
        arrow = self.get_children()[0]
        #the arrow is destroyed and a custom image is placed in the button
        arrow.destroy()
        self.add(Gtk.Image.new_from_stock(Gtk.STOCK_EXECUTE, Gtk.IconSize.BUTTON)) 
```

如果您尝试上面的代码，请不要忘记添加一个窗口和一些操作回调。如果你不能告诉我我喜欢继承 gtk 很多。:)

# c# - decoupled WMI Provider for Windows Service

> ID：15889820
> 
> 赞同：1
> 
> 时间：2013-04-08T22:01:51.943
> 
> 标签：c#, powershell, service, wmi

I had a WMI provider and because of design constraints, I would like to add it as a decoupled provider to a Windows Service (WS). I am following simple steps like:

1.  In Windows Service Solution in VS, I have added WMI Provider as a project.
2.  Set Hosting Model as HostingModel = ManagementHostingModel.Decoupled
3.  Change Setup project for WS such that output dll of the provider are copied to c:\Prog...\xyz folder during installation

I want the decoupled provider to work as before (All class instances are same as before - no behavior change). Both provider and WS are written in C#. I have not done registration of the provider in WS - do I need to do (If yes, how?)?

However, when I try to enumerate a class through PowerShell I get the following error: FullyQualifiedErrorId : HRESULT 0x80041016,Microsoft.Management.Infrastructure.CimCmdlets.GetCimInstanceCommand

Also, when viewing through Process Explorer, I can see that provider dll is shown in the process for WS.

Why am I getting this error?

# c# - 在 Sitecore 中获取项目创建日期

> ID：15889821
> 
> 赞同：9
> 
> 时间：2013-04-08T22:01:52.427
> 
> 标签：c#, .net, content-management-system, sitecore

无论如何，我们可以在“统计”部分以编程方式获取项目的创建日期吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T22:04:02.667

是的。 `Sitecore.Context.Item.Statistics.Created`. 这会将项目的创建日期作为`DateTime`对象返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T15:53:18.327

我试图获取媒体项目的创建日期，它的唯一工作方式是：

```
DateTime.ParseExact(item.InnerItem.Fields["__Created"].Value.Substring(0,8), "yyyyMMdd", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T22:14:20.557

有一个重要的细节还没有提到：

*   `item.Created`（返回第一次创建项目的日期时间）
*   `item.Statistics.Created`（返回创建最新*版本*的 DateTime ）

# javascript - 在 Web 应用程序中创建动画的基础知识是什么？

> ID：15889825
> 
> 赞同：1
> 
> 时间：2013-04-08T22:02:04.590
> 
> 标签：javascript, html, animation, canvas, jquery-animate

我正在研究如何在 HTML5 应用程序中创建简单的动画。我想从一个离页画布开始（*顶部*设置为窗口高度的 100%），然后将其动画到屏幕中间，在我的其他画布上方。

我试过谷歌，但搜索结果是画布内的动画 div 和动画的混合，我尝试过的任何东西似乎都不起作用。例如，[这里讨论的](http://api.jquery.com/animate/)*jQuery animate()*函数。

我也尝试过动态创建画布并在屏幕上对其进行动画处理，但这不起作用。我目前的代码如下：

**HTML**

```
<div id="view-addUser" >
    <canvas id="view-canvas"></canvas>
</div> 
```

**CSS**

```
#view-addUser
{
    left: 25%;
    top: 100%;
    width: 75%;
    height: 75%;
} 
```

**javaScript**（按下按钮时调用）

```
$("#view-addUser").animate({
    top: 100
}, 3000, function() {
    alert("animation complete");
}); 
```

我怎样才能正确地让它动画？最终结果应该类似于[此 MoonBase 动画](http://moonbase.com/PhDBrown/1)的向上方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:52:15.043

您需要将您的位置设置`div`为`absolute`（[小提琴](http://jsfiddle.net/net_uk_sweet/xYj9P/1/)）：

```
#view-addUser
{
    position: absolute;
    left: 25%;
    top: 100%;
    width: 75%;
    height: 75%;
    border: 1px solid red;
} 
```

元素的默认位置是`static`（请参阅[此处](http://quirksmode.org/css/css2/position.html)），这在您尝试为方向属性设置动画时并不好。从[jQuery.animate 的文档中](http://api.jquery.com/animate/)：

> 方向属性（上、右、下、左）如果元素的位置样式属性是静态的（默认情况下是静态的），则对元素没有明显的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:57:58.650

**我会推荐一个像[Tween.js](https://github.com/sole/tween.js/)这样的库。**

您在问题中所指的动画类型是“线性”类型，即您以恒定速率将对象从 A 移动到 B。

像[Tween.js](https://github.com/sole/tween.js/)这样的库以及各种类型的缓动（您在示例中显示的减速/加速效果）和“弹性”算法都可以做到这一点。

他们网站上的一个简单[示例](http://sole.github.io/tween.js/examples/04_simplest.html)。

# javascript - 尝试使用 Optimist API help() 打印 usage()

> ID：15889826
> 
> 赞同：4
> 
> 时间：2013-04-08T22:02:09.123
> 
> 标签：javascript, node.js, parsing

我是[乐观主义者](https://github.com/substack/node-optimist)的新手，我已经做了一些谷歌搜索和尝试，但我仍然找不到添加`--help`选项的优雅方法。

我在文档上看到了一个[help()](https://github.com/substack/node-optimist#help)选项。有了这个，我希望以下工作：

```
var argv = require('optimist')
  .usage('Some usage')
  .alias('l', 'local')
  .describe('l', 'uses local repo')
  .help()
  .argv 
```

所以在 shell 上，如果我输入`./myScript --help`它会显示用法。我知道我可以检查`argv`a `-h`or`--help`选项并`console(argv.usage)`打印使用情况，但我试图使用 API 而不是破解它。

这是一个有效的问题吗？谢谢您的帮助。

比托尤

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-09T17:53:41.030

当您希望能够显示用法时，您希望保留一个指向从 require() 返回的对象的指针。这是因为从 .argv 返回的对象只是一个普通对象，因此无法访问 help() 或 showHelp() 函数。下面是一个人为的例子，我认为它会为你试图做的事情指明正确的方向。

```
var optimist = require('optimist')
    .usage('$0: This is an example on how to use optimist')
    .describe('h', 'Display the usage')
    .describe('l', 'uses local repo')
    .alias('h', 'help')
    .alias('l', 'local');

var argv = optimist.argv;

if (argv.help) {
    optimist.showHelp();
    process.exit(0);
}

if (argv.local) {
    // Do stuff based on local repo
    console.info('Got the -l/--local flag!');
} 
```

然后，当您运行代码并传入 -h 或 --help 时，您将获得以下输出：

```
node ./ex-optimist.js: This is an example on how to use optimist

Options:
  -h, --help   Display the usage
  -l, --local  uses local repo 
```

另请注意，使用 .help 函数会将用法作为字符串返回，然后尝试使用 .argv 会使您的 argv 变量“未定义”。

# node.js - 在回调中保存会话变量

> ID：15889834
> 
> 赞同：0
> 
> 时间：2013-04-08T22:02:37.687
> 
> 标签：node.js, session, callback, express, socket.io

我正在使用 express.io ...

在我的一个路由事件中，我从数据库加载存储的“投票”，然后尝试针对请求的会话进行设置：

```
app.io.route('ready', function(req){
    if(req.session.username || req.session.twitter_user){
        if(!req.session.username){ //makes the username to store in the session.
            req.session.username = 't_' + req.session.twitter_user.screen_name;
        }
        winston.debug(req.session.username + ' connected'); //redders6600 connected.
        db.getVote(req.session.username, function(err, vote){ //gets votes for the user.
            if(!err){
                req.session.vote = vote[0].vote;
                req.io.emit('user data', {username: req.session.username, vote: req.session.vote});
                //on the client, I receive this event, and it correctly contains username and vote
            }
        });
    }
}); 
```

这一切正常，*但是*当我尝试从另一个路由事件访问会话数据时，`req.session.vote`是未定义的。`req.session.username`设置正确。

我知道这`vote[0].vote`绝对不是未定义的，并且当客户端代码从“用户数据”事件中打印出投票数据时，它已得到验证，所以我对发生的事情感到非常困惑。最初我认为这一定与回调函数的上下文有关，但`req.io.emit`按预期工作的事实让我对此表示怀疑。

不知道还有什么可以尝试的！非常感谢任何帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:12:22.540

我发现这是 express.io 框架的一个问题——我没有足够的资格深入研究代码以找出确切的原因。

相反，我使用了类似于此处概述的会话共享策略：http: [//howtonode.org/socket-io-auth](http://howtonode.org/socket-io-auth)

效果很好，而且不是很多麻烦。因此，我目前不建议使用 express.io。

# javascript - Proper way to pause animations when not in view

> ID：15889836
> 
> 赞同：0
> 
> 时间：2013-04-08T22:02:58.563
> 
> 标签：javascript, html, animation, requestanimationframe

I'm wondering whether there is a proper way to pause requestAnimationFrame animations when the user has scrolled and the animation is not in the view anymore?

requestAnimationFrame does this automatically when the browser displays another tab, but is it possible to do it when the user scrolls?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T19:28:49.583

唯一的方法是将你的代码分成小函数块。

当您向下滚动时，请跟踪正在完成多少滚动。

您可以提供自己的自定义条件，并在函数已执行且未获得焦点后使用**window.cancelAnimationFrame() 。**

*   [如何停止 requestAnimationFrame 递归/循环？](https://stackoverflow.com/questions/10735922/how-to-stop-a-requestanimationframe-recursion-loop)
*   [https://developer.mozilla.org/en-US/docs/Web/API/window.cancelAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window.cancelAnimationFrame)

# javascript - document.createElement on table,tr,td tags fails IE8

> ID：15889840
> 
> 赞同：4
> 
> 时间：2013-04-08T22:03:09.263
> 
> 标签：javascript, createelement

As the title says, I'm having an issue with IE8 (works in FF and IE9). The following code doesn't produce any errors, and if I substitute div,ul,and li; it works. I did some searching and didn't find anything on (table,tr,td) tags not being supported using `document.createElement` with IE8\. Where am I going wrong?

Here is the code:

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>My Page Title</title>
  <script>
    function init() {
      var ele = document.getElementById('content');
      var table = document.createElement('table');
      var tr = document.createElement('tr');
      var td = document.createElement('td');
      var txt = document.createTextNode('IE8');

      td.appendChild(txt);
      tr.appendChild(td);
      table.appendChild(tr);
      ele.appendChild(table);
    }
   </script>
  </head>
  <body onload="init();">
    <div id="content"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:07:33.017

您不能仅使用`createElement()`函数来创建`table,` `tr`、`td`创建整个表格元素。

相反，您必须使用表对象的`insertRow()`功能`insertCell()`

供参考检查：

[http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/](http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/)

**编辑：**

即使我对 IE 问题也有同样的想法，购买我发现实际上要`createElement()`在 IE7 中工作，您必须创建`tbody`对象并将其附加到`table`对象和`tr`该`tbody`对象

```
tb = document.createElement("tbody")  
var tbody  = document.createElement('tbody'); 
table.appendChild(tbody);
var table_row  = document.createElement('tr'); 
tbody.appendChild(table_row)// 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T13:15:34.720

尝试这个：

```
 var ele = document.getElementById('content');
  var table = document.createElement('table');
  ele.appendChild(table);
  var tr = document.createElement('tr');
  table.appendChild(tr);
  var td = document.createElement('td');
  tr.appendChild(td);
  var txt = document.createTextNode('IE8');
  td.appendChild(txt); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T22:24:51.943

只需添加`<!DOCTYPE html>`标记。在 IE7 及更高版本中，没有 DOCTYPE 的默认呈现是 Quirks 模式 (IE5)。

# ios - Strange issue with In App-purchase system IOS, sandbox and live App Store environments

> ID：15889844
> 
> 赞同：0
> 
> 时间：2013-04-08T22:03:18.560
> 
> 标签：ios, in-app-purchase, storekit, receipt

I have recently developed a In App-purchase system to my IOS app. I have tested it in the apple sandbox-environment and everything works great. So far I have made a simple solution with saving the receipt locally in the app after it being purchased.

But once live at the App Store a strange bug occurred. If a user purchased the app and then shuts it down (the app) and then restarts it again the receipt gets lost, for some reason?. Since I am not able to recreate the bug in the sandbox-environment I can not debug the code and I do not know where to start.

I find the scenario very odd and confusing, if someone ever experienced something similar or have built many In-App purchase systems within IOS, please share your knowledge or ideas.

# jquery - Align two elements

> ID：15889848
> 
> 赞同：0
> 
> 时间：2013-04-08T22:03:39.027
> 
> 标签：jquery

I have the following on a plugin:

```
$(this).mouseenter(function (e) {
  var this = $(this);
  var text = "<div class="Text">" + options.Text + "</div>"
  $("body").append(text);
}) 
```

How to align "text" to "this" before adding it to body on the following positions: TopCenter, BottomCenter, RightMiddle or LeftMiddle.

Thank You!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:11:31.467

```
$(this).on('mouseenter', function() {
    var $this = $(this),
        text  = $('<div />', {'class': 'text',
                              text   : options.Text,
                              style  : 'position   : relative;  
                                        margin     : 0 auto; 
                                        text-align : center;'
                             }
                 );
    $("body").append(text);
}): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:22:26.830

1.  您不应该使用“this”作为本地参数，因为那是一个保留的 javascript 字。
2.  您可以在 div 中添加样式以对齐文本。

    ```
    var $this = $(this); 
    $this.mouseenter(function (e) {
       var text = "<div class='Text' style='text-align:left'>" + options.Text + "</div>"
       $("body").append(text);
    }); 
    ```

# jquery - Move jQuery dialog popup anywhere outside of the parent window

> ID：15889850
> 
> 赞同：1
> 
> 时间：2013-04-08T22:03:57.147
> 
> 标签：jquery, jquery-ui-dialog

I have a jQuery UI Dialog popup done, and the only issue I have now is that I am unable to move it outside of the containing window. I want to be able to move this dialog popup much like a window that you create using javascript's window.open method (which can be moved anywhere in the screen)

Any suggestions, or ideas? I have tried the containment property buy still not going outside of the parent screen.

* * *

### Code:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />  
    <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script> 
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js" type="text/javascript"></script>  
    <script type="text/javascript">
         $(document).ready(function (){
                $('#dialog').dialog({ draggable: true, resizeable: true, dialogClass: 'main-dialog-class', 
                title: 'Definition', width: 800, height: 600, autoOpen: false, show: { effect: "clip", duration: 1000 },
                    hide: { effect: "explode", duration: 1000}
                })

                $(".opener").click(function () {   $('#dialog').dialog("open"); return false; });

                if (!$.ui.dialog.prototype._makeDraggableBase) {
                    $.ui.dialog.prototype._makeDraggableBase = $.ui.dialog.prototype._makeDraggable;
                    $.ui.dialog.prototype._makeDraggable = function () {
                        this._makeDraggableBase();
                        this.uiDialog.draggable("option", "containment", false);
                    };
                }
            });
    </script>
</head>
<body>
 <div id="dialog" title="Report Definition" style="width:800px; height:800px; overflow:scroll;">  
 <p>This is an animated dialog which is useful for displaying information </p>
 </div> 
<a href="#" class="opener" > click </a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:38:32.480

您不能使用 jQuery 对话框执行此操作，句号。jQuery 对话框只是一个 HTML 标记，它是页面的一部分。

据我所知，唯一的选择是使用`window.open`. 您可以使用任何您想要的 HTML，`window.open`并且您几乎可以完全控制窗口（在某种程度上）。

# java - How to remove leading zeros from numeric text?

> ID：15889853
> 
> 赞同：5
> 
> 时间：2013-04-08T22:04:06.140
> 
> 标签：java

I am using this to remove leading zeros from my input string.

```
return a.replaceAll("^0+",""); 
```

But the above string even removes from any string which is alphanumeric as well. I do not want to do that. My requirement is:

Only the leading zeros of numeric numbers should be removed e.g.

```
00002827393 -> 2827393 
```

If you have a alpha numeric number the leading zeros must not be removed e.g.

```
000ZZ12340 -> 000ZZ12340 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T22:12:03.187

您可以先检查您的字符串是否仅由数字组成：

```
Pattern p = Pattern.compile("^\\d+$");
Matcher m = p.matcher(a);

if(m.matches()){
  return a.replaceAll("^0+", "");
} else {
  return a;
} 
```

还 ：

*   考虑让你的模式静态，这样它只会被创建一次
*   您可能希望在较小的函数中使用匹配器隔离部分，例如“isOnlyDigit”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T22:19:26.543

你也可以试试这个：

```
a.replaceAll("^0+(?=\\d+$)", "") 
```

请注意，正向先行`(?=\\d+$)`检查字符串的其余部分（在起始`0`s 之后，由 匹配`^0+`）在匹配/替换任何内容之前仅由数字组成。

* * *

```
System.out.println("00002827393".replaceAll("^0+(?=\\d+$)", ""));
System.out.println("000ZZ12340".replaceAll("^0+(?=\\d+$)", "")); 
```

```
2827393
000ZZ12340

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T22:11:23.797

测试传入的字符串是否与数字模式“\d+”匹配。"\d" 是[数字的字符类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。如果是数字，则返回调用结果`replaceAll`，否则只返回原始字符串。

```
if (str.matches("\\d+"))
    return str.replaceAll("^0+", "");
return str; 
```

测试：

```
public static void main (String[] args) throws java.lang.Exception
{
   System.out.println(replaceNumZeroes("0002827393"));
   System.out.println(replaceNumZeroes("000ZZ1234566"));
} 
```

产生输出

```
2827393
000ZZ1234566 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T22:57:59.320

逻辑：它将字符串转换为 char 数组并从 i=0 开始；一旦它击中第一个数字值，它就会从 for 循环中中断，并且一旦它击中第一个字符（除了 1 到 9），它就会返回相同的字符串。在第一个 for 循环之后，我们需要考虑以下情况：

```
case 1\. 00000000000
case 2\. 00000011111
case 3\. 11111111111 
```

如果它是 1 或 3（即第一个 for 循环中的 i 值将是 0 或字符串的长度），那么只需返回字符串。否则，对于第二种情况，从 char 数组复制到一个新的 char 数组，该数组以 i 的值开始（我们将从第一个 for 循环中获得 i 的值，它保存第一个数值位置。）。希望它清除。 ![在此处输入图像描述](https://i.stack.imgur.com/sacsC.png)

```
 public String trimLeadingZeros(String str)
    {
    if (str == null)
    {
        return null; //if null return null
    }
    char[] c = str.toCharArray();
    int i = 0;

    for(; i<c.length; i++)
    {
        if(c[i]=='0')
        {
           continue; 
        }
        else if(c[i]>='1' && c[i]<='9')
        {
            break;
        }
        else
        {
            return str;
        }
    }
    if(i==0 || i==c.length)
    {
        return str;
    }
    else
    {
        char[] temp = new char[c.length-i];
        int index = 0;
        for(int j=i; j<c.length; j++)
        {
            temp[index++] = c[j];
        }
        return new String(temp);
    }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T07:01:15.610

只是我做了以下

```
String string = string.trim();
while(string.charAt(0) == '0'){
    string = string.substring(1);
} 
```

# isabelle - 如何让 typedef 类型从其母类型继承运算符以用于类型类

> ID：15889860
> 
> 赞同：4
> 
> 时间：2013-04-08T22:04:33.860
> 
> 标签：isabelle

**发布答案跟进问题**

Brian 提供了一个答案，建议的解决方案是使用提升和转移。但是，我找不到足够的关于提升和转移的教程信息来了解如何调整他的答案以完成我需要做的事情。

在这里，我在黑暗中工作，并使用作为即插即用模板给出的答案来提出这个后续问题。

我初始代码中的命令为我`typedef trivAlg = "{x::sT. x = emS}"`提供了一个新类型，它是母类型的子集`sT`。

我有我的会员操作员`consts inP :: "sT => sT => bool"`，所以在我对提升和转移的天真看法中，因为我的`monoid_add`0 已被定义为常量`emS::sT`，我可以做出这样的声明，`(emS::sT) inP emS`我想做这样的事情：

```
theorem "~((0::trivAlg) inP 0)" 
```

所以，我尝试使用提升让我的操作员使用这样`inP`的类型`trivAlg`：

```
lift_definition inP_trivAlg :: "trivAlg => trivAlg => bool"
  is "% x y. (x inP y)" 
  by simp

theorem "~((0::trivAlg) inP 0)"

theorem "(emS::trivAlg) = emS" 
```

`theorem`但是，由于我使用的类型`sT`与我的使用`trivAlg`不兼容，因此我遇到了类型冲突。

如果可以添加答案以向我展示如何让我`inP`使用类型，`trivAlg`我将不胜感激。或者，也许我离题了。

**（原始）问题的预备知识**

我有我的 type `sT`，它代表“一切都是一个集合”。到目前为止，我所有的常量和操作符都是用单一类型定义的`sT`。例如，我的空集、成员运算符和联合运算符定义如下：

```
consts emS :: "sT"
consts inP :: "sT => sT => bool"
consts geU :: "sT => sT" 
```

我现在正在做一些早期调查，以了解我是否可以将 my与[Groups.thy](http://isabelle.in.tum.de/website-Isabelle2013/dist/library/HOL/Groups.html)`sT`中的广义组联系起来。

从[HOL 文档](http://isabelle.in.tum.de/website-Isabelle2013/dist/library/HOL/document.pdf)中，我试图从 Groups 的 4.2、4.3 和 4.4 节以及 Nat 的 15.2 和 15.3 节中获取示例。

在这里，我几乎要回答我的问题，但我不知道我是否在问一个聪明的问题。我想我知道的是，解决方案可能只使用语言环境、子语言环境和解释，而不是类型类。

我一直在看[locales.pdf](http://isabelle.in.tum.de/website-Isabelle2013/dist/Isabelle2013/doc/locales.pdf)和[classes.pdf](http://isabelle.in.tum.de/website-Isabelle2013/dist/Isabelle2013/doc/classes.pdf)，所以我知道语言环境和类是交织在一起的。我也一直在查看[IsarMathLib](http://slawekk.wordpress.com/2013/02/25/isarmathlib-1-8-0-released/)以了解在那里如何使用语言环境、子语言环境和解释。

**问题**

我的问题是，在下面我的微不足道的代数结构中`trivAlg`，这是一个用 定义的新类型`typedef`，我如何使用类型类进行设置，以便我可以将我的常量（例如`emS`，上面列出的）`inP`与`geU`type 的元素一起使用`trivAlg`？

在我列出下面的代码之后，我会问一些关于[Groups.thy](http://isabelle.in.tum.de/website-Isabelle2013/dist/library/HOL/Groups.html)中特定代码行的问题。

**编码**

```
typedef trivAlg = "{x::sT. x = emS}"
  by auto

instantiation trivAlg :: zero
begin
definition trivAlg_zero:
  "0 = Abs_trivAlg emS"
instance ..
end

instantiation trivAlg :: monoid_add
begin
definition plus_trivAlg:
  "m + n = (Abs_trivAlg emS)" 
instance proof
  fix n m q :: trivAlg
  show "(n + m) + q = n + (m + q)"
    by(metis plus_trivAlg)
  show "0 + n = n"
    apply(induct n) apply(auto)
    by(metis plus_trivAlg)
  show "n + 0  = n"
    apply(induct n) apply(auto)
    by(metis plus_trivAlg)
qed
end

theorem
  "((n::trivAlg) + m) + q = n + (m + q)"
  by(metis plus_trivAlg)

theorem
  "((0::trivAlg) + 0) = 0"
  by(metis monoid_add_class.add.left_neutral) 
```

**关于 Groups.thy 的后续问题**

在 Groups.thy 的第 151 到 155 行，有以下代码：

```
class semigroup_add = plus +
  assumes add_assoc [algebra_simps, field_simps]: "(a + b) + c = a + (b + c)"

sublocale semigroup_add < add!: semigroup plus proof
qed (fact add_assoc) 
```

没有一个文档可以教我如何使用类、语言环境、子语言环境和解释，所以我不知道它到底告诉了我什么。

如果我想使用`semigroup_add`Groups.thy 中的那个，我可以选择将它用作类型类还是区域设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:51:55.030

要获得对 type 的相应操作`trivAlg`，可能最简单的方法是使用 Isabelle 的 Lifting 包；然后，您可以使用 Transfer 包来证明类实例。这是一个例子：

```
typedef trivAlg = "{x::sT. x = emS}"
  by auto

setup_lifting type_definition_trivAlg

instantiation trivAlg :: zero
begin
lift_definition zero_trivAlg :: "trivAlg" is "emS" .
instance ..
end

instantiation trivAlg :: monoid_add
begin
lift_definition plus_trivAlg :: "trivAlg => trivAlg => trivAlg"
  is "% x y. emS"
by simp

instance proof
  fix n m q :: trivAlg
  show "(n + m) + q = n + (m + q)"
    by transfer simp
  show "0 + n = n"
    by transfer simp
  show "n + 0  = n"
    by transfer simp
qed
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:54:31.627

如果我不知道语法的含义，那么简单的事情会害死我，并且学习 Isabelle/HOL 的大部分内容是“长时间盯着多个示例”，这并不是说 Isabelle 相对于其他证明助理。

在这里，我完成了关于如何实际使用 Brian 给我的东西的问题。

My`inP`实际上是 function 的二进制表示法`in_P :: sT => sT => bool`，这就是我想要提升到 type的内容`trivAlg`，尽管我不确定我刚刚正确使用了“lift”这个术语。

从[Isabelle 用户列表中](https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2013-January/msg00134.html)，我找到了一个显示 HOL`union`运算符提升的示例。同样，我`in_P`这样举起我的：

```
lift_definition in_P_trivAlg :: "trivAlg => trivAlg => bool"
  is "in_P :: sT => sT => bool" 
  by simp 
```

在我之前的尝试和错误尝试中，我一直在使用 my `inP`，它只是一个符号，它并没有陷入`lift_definition`引入一个全新的功能。那些事情终于发生在我身上，而不是“试错”，我通过`in_P_trivAlg`智能使用这个功能得到了“试错”：

```
theorem "~(in_P_trivAlg 0 0)"
  by(metis 
    Ax_em 
    in_P_trivAlg.rep_eq 
    zero_trivAlg.rep_eq) 
```

这表示空集不包含自身。这很好，并告诉我我走在正确的轨道上，考虑到 0 已被定义为`emS`，它被定义为公理`Ax_em`，不包含任何元素 。

我现在需要弄清楚如何重载我的成员运算符符号`\<in>\<^isub>\iota>`。直到现在，重载符号并不重要，因为我需要*不*重载大多数标准符号，例如`\<in>`.

看起来我需要重命名定理，例如`in_P_trivAlg.rep_eq`，而我刚刚从[“我可以为一个定理定义多个名称吗？”中得到答案。](https://stackoverflow.com/questions/15823938/can-i-define-multiple-names-for-a-theorem).

从[RealVector.thy](http://isabelle.in.tum.de/website-Isabelle2013/dist/library/HOL/RealVector.html)，我现在看到使用`lemmas`命令进行了很多重命名，例如

```
text {* Recover original theorem names *}

lemmas scaleR_left_commute = real_vector.scale_left_commute
lemmas scaleR_zero_left = real_vector.scale_zero_left
... 
```

如果不是我刚刚提供了一个链接的 Stackoveflow 答案，那么该代码的目的对我来说毫无意义。

# c++ - 使用编译器定义的宏连接

> ID：15889867
> 
> 赞同：4
> 
> 时间：2013-04-08T22:05:01.227
> 
> 标签：c++, c, c-preprocessor

这应该很简单，但我正在努力弄清楚。我有`PROJECT_NAME`一个编译器 ( `g++`)`-D`定义，我想将它与其他一些文本连接起来以形成命名空间名称。我目前的做法是这样的：

```
#define VERSION_NAMESPACE PROJECT_NAME ## Versioning 
```

对于我目前的项目，我希望`VERSION_NAMESPACE`是`Syren_DLLVersioning`. 相反，我得到一个编译器错误：

```
error: 'PROJECT_NAMEVersioning' has not been declared 
```

但根据`g++`电话，`PROJECT_NAME`正在正确定义：

```
ccache g++ ... -DPROJECT_NAME=Syren_DLL ... 
```

为什么`PROJECT_NAME`在连接发生之前不被替换？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T22:08:46.743

宏名称出现在运算符旁边时不会展开`##`，因此您需要更多的间接层：

```
#define P_VERSION2(foo)   foo ## Versioning
#define P_VERSION(foo)    P_VERSION2(foo)
#define VERSION_NAMESPACE P_VERSION(PROJECT_NAME) 
```

所以它`PROJECT_NAME`被扩展为 的参数，`P_VERSION`然后连接在`P_VERSION2`.

在第 16.3.3 节 [cpp.concat] 第 3 段中，指定了

> 对于类对象和类函数宏调用，在重新检查替换列表以替换更多宏名称之前，`##`替换列表（不是来自参数）中的预处理标记的每个实例都被删除，并且前面的预处理标记被连接使用以下预处理令牌。

在替换列表上进行宏替换*之前*，与预处理标记相邻的`##`预处理标记被连接起来。因此，必须通过另一个（类似函数的）宏才能将其替换并与.*`PROJECT_NAME``Versioning`*

 *但在 16.3.1 [cpp.subst] 第 1 段中，标准规定（强调由我添加）

> 在确定了调用类函数宏的参数后，将进行参数替换。替换列表中的参数，**除非前面有一个`#`或`##`预处理标记或后面有一个`##`预处理标记**（见下文），在其中包含的所有宏都已展开后，将被相应的参数替换。在被替换之前，每个参数的预处理标记都被完全宏替换，就好像它们形成了预处理文件的其余部分一样；没有其他可用的预处理令牌。

`##`如果与预处理令牌相邻，则宏参数不会受到进一步的宏扩展。因此，作为参数接收的类函数宏`PROJECT_NAME`不能直接将其参数与 连接`Versioning`，而是要扩展`PROJECT_NAME`它必须调用另一个最终进行连接的类函数宏。

所以在上面，调用`ccache g++ ... -DPROJECT_NAME=Syren_DLL ...`,`PROJECT_NAME`被替换为`Syren_DLL`when`P_VERSION(PROJECT_NAME)`被扩展，导致`P_VERSION2(Syren_DLL)`then 导致`Syren_DLL`and的连接`Versioning`。*

# c# - How to test a selected item of a ComboBox is equal to my string?

> ID：15889869
> 
> 赞同：0
> 
> 时间：2013-04-08T22:05:31.663
> 
> 标签：c#

I just started learning c# a week ago. I have a little experience with objective c. So give me a hard time for asking such a beginner question.

Well, I would like the user to be able to select from the combo box. I created the combobox visually in xaml. The contents of the combo box are strings. However, when the user selects their string of choice, I would like store a value to an int so I can do calculations. The errors I have been can't convert object to string and many other conversation errors.

```
int x;
string selValue = (string)comboBox1.SelectedValue;
if ((selValue=="green")||(selValue=="blue"))
{ 
    x= 5; 
} 
```

Would it be best to create a function that accepts an object and returns an int, if so please tell ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:54:58.090

`SelectedValue`属性将返回`ComboBoxItem`as`object`并将作为索引`SelectedIndex`返回。`ComboBoxItem``integer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:08:51.367

您应该将字符串绿色作为选定文本，并将值 int 5 作为选定值，这样您就可以删除所有代码并执行 int x = (int)comboBox1.SelectedValue，这将为您提供 5。您需要谷歌 winform 组合框数据绑定，您会看到可以将不同的属性绑定到文本和值。

# c# - System.IO.PathTooLongException On A URL

> ID：15889870
> 
> 赞同：1
> 
> 时间：2013-04-08T22:05:36.370
> 
> 标签：c#, asp.net, iis, iis-7, pathtoolongexception

I am running into an issue that a long URL will throw a System.IO.PathTooLongException. This is somewhat strange because a System.IO.PathTooLongException is actually for physical files, it is not related to URL's.

As an example, I have a URL that looks like the following :

```
products-for-sale.mvc/searchterm1-something/price-1000-1500/searchterm3-etcetc/ 
```

Basically with the search terms bloating out the URL. We also allow a keyword search which can get kinda big if the user is looking for something specific. As a side note, the .mvc on the URL is a hangover of the application from when it ran on IIS6 and extensionless URL's were not supported, but it shouldn't really be an issue here.

What I believe the issue is, is that it looks for a physical file using the URL. I could be wrong, but I think that is the issue. Almost every article about PathTooLongException's revolve around actual files, not URL's being too long.

I had an inkling that within the IIS handler mappings, I could switch off to check if a physical file exists (I think this was a setting in IIS6?), but in IIS7 under request restrictions of a handler mapping, it only has "Invoke handler only if request is mapped to" and then file/folder/file or folder. This is NOT ticked for .mvc in IIS, and there is no where else that I have found to try and say "please don't look for a physical file if using this extension".

I could be way off base with my guesses on how to fix the issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:18:46.013

在 .Net 4.0 中，您需要将[HttpRuntimeSection.MaxUrlLength](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.maxurllength.aspx)设置为大于 260。

```
<httpRuntime maxUrlLength="260" /> 
```

使用[`maxRequestPathLength`](https://stackoverflow.com/questions/3884659/maxrequestpathlength-not-in-asp-net-4-documentation-and-doesnt-work)适用于以前的 .Net 版本。

# c++ - Can remote connections to MySQL be secured?

> ID：15889871
> 
> 赞同：0
> 
> 时间：2013-04-08T22:05:44.227
> 
> 标签：c++, mysql

I've written a program in C++ which stores data to a local MySQL database every 5 seconds. Now I need to store the data on webhosted MySQL database which is remote (the webhosting provides remote access). I think it will be easy to rewrite the program to connect to remote server, but I have a different problem.

Can I make the connection secure (encrypted)? I'm afraid that the password can be sniffed. Must the server support anything special to make it possible?

I thought of allowing remote connections to the database from only one specific IP address (my public static IP), which will prevent anybody else from connecting to the database (unless they hack into my WiFi and sniff my password). So I wouldn't have to worry if someone sniffed my password?

What solution would you recommend to me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:16:33.940

解决此类问题的一种方法是使用 ssh 隧道连接到远程主机。我没有具体的公式，但是可以设置像 putty 这样的 SSH 客户端来侦听本地端口并连接到连接另一端本地的远程端口。

您将使用 ssh 登录到远程主机，然后打开与本地端口的 mysql 连接，这将产生在 ssh 连接的另一端打开本地连接的效果。

# php - how to make the calender pop out when entering data

> ID：15889872
> 
> 赞同：0
> 
> 时间：2013-04-08T22:05:49.233
> 
> 标签：php, javascript

i'm trying to make a web interface where the admin enters the customer information and stores it in the database but i want the calendar to pop out when i click on the date field

this is how my insert code is

```
<?php
 function valid( $start_date, $end_date, $error)
 {
 ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html>
 <head>
 <title>Insert Records</title>
 </head>
 <body>
 <?php

 if ($error != '')
 {
 echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
 }
 ?>

 <form action="" method="post">
 <table border="1">
     <tr>
       <td colspan="2"><b><font color='Red'>Insert Records </font></b></td>
       </tr>
    <tr>
      <td width="179"><b><font color='#663300'>Start Date<em>*</em></font></b></td>
      <td><label>
       <input type="text" name="start_date" value="<?php echo $start_date; ?>" />
      </label></td>
    </tr>
    <tr>
        <td width="179"><b><font color='#663300'>End Date<em>*</em></font></b></td>
        <td><label>
         <input type="text" name="end_date" value="<?php echo $end_date; ?>" />
        </label></td>
    </tr>
    <tr align="Right">
        <td colspan="2"><label>
           <input type="submit" name="submit" value="Insert Records">
        </label></td>
        </tr>
</table>
 </form>
 </body>
 </html>
 <?php
 }
 include'includes/connect.php';
 if (isset($_POST['submit']))
 {
  $start = mysql_real_escape_string(htmlspecialchars($_POST['start_date']));
 $end = mysql_real_escape_string(htmlspecialchars($_POST['end_date']));
 if ($start== '' || $end == '' )
 {
 $error = 'Please enter the details!';
 valid($start_date, $end_date, $error);
 }
 else
 {
 mysql_query("INSERT aggrement SET  start_date='$start', end_date='$end'")
 or die(mysql_error());

 header("Location: viewaggrement.php");
 }
 }
 else
 {
 valid('','','');
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:24:31.323

您需要为每个日期输入字段添加一个 id，例如`id="start-date"`，`id="end-date"`然后使用 jQuery UI 将日期选择器绑定到输入字段。下面的例子...

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<script type="text/javascript">
    $(function() {
       $( "#start-date" ).datepicker();
       $( "#end-date" ).datepicker();
    });
</script> 
```

datepicker api 中有更多可用选项，但请参阅[文档](http://api.jqueryui.com/datepicker/)

# aop - 我们什么时候用过aop compile和classloader weaving？

> ID：15889873
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:00.120
> 
> 标签：aop, aspectj, spring-aop

有什么更好的用途，或者当我们使用：编织作为编译时间、类加载时间或运行时，这是默认的 spring 策略？有人可以给我一个使用编织作为编译时间或类加载时间的实际例子吗？谢谢你的帮助 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:31:05.900

什么更好取决于您的情况，例如：

*   对于生产方面，在编译时编织它们通常是有意义的，因为这样它们就在您的类文件中，您没有加载时编织的开销，并且在运行时您需要的只是类路径中的 aspectjrt.jar。
*   对于可能意味着生产中开销的开发或调试方面（支持生产中的错误跟踪所需的特定类型的细粒度日志记录、跟踪、监视），可以通过加载时编织更灵活地按需应用。
*   如果您想编织（第三方）您没有源代码的类文件，您可以使用编译后（二进制）编织并创建新的编织类或 JAR 替换原始类并部署它们，或者您也可以使用LTW。在您的情况下做任何更有意义的事情，并且还取决于这些方面是用于生产还是调试/监控。

这个列表是不完整的，有更多的因素和情况可以导致一个决定。LTW 可以用于生产方面，CTW 可以用于调试方面。有时您的技术环境会限制您的选择。

# javascript - Node.js 集群子进程路径

> ID：15889874
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:01.947
> 
> 标签：javascript, node.js

开始探索node.js，遇到以下问题

假设我有 3 个文件：start.js、core/core.js 和 core/child.js

1.  start.js 在代码中需要 core.js
2.  core.js 使用具有这些设置的集群创建一个子进程 (core/child.js)

    ```
    cluster.setupMaster({
        exec: './core/child.js'
    }); 
    ```

core.js 和 child.js 在同一个文件夹中，但如果我使用，我会收到错误（未找到）

```
exec: './child.js' 
```

但是，在文档中没有找到类似的东西

```
require('./child.js') 
```

完美运行。如果路径更长一点我没有问题，只是想了解为什么我不能使用 core.js 的本地路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:06:25.020

`require()`相对于当前代码文件的位置起作用，但 Node.js 中的大多数其他操作（包括启动其他进程）都是相对于当前工作目录的`process.cwd()`。

如果您需要生成相对于当前文件的路径，您可以`__dirname`在运行时使用每个模块中可用的变量。

```
var childPath = require('path').join(__dirname, 'child.js'); 
```

# ios - Objective C 中的 2-legged OAuth 1.0a - ios 应用程序开发

> ID：15889876
> 
> 赞同：1
> 
> 时间：2013-04-08T22:06:10.637
> 
> 标签：ios, objective-c, oauth, 2-legged

我正在用 Objective-C 开发一个 iphone 应用程序，而且里面很新。我只有请求 URL、消费者密钥和秘密。我该如何进行 2 腿身份验证，请您提供一些代码。我已经检查了 AFNetworking 项目和其他示例，但我认为它们对于像我这样的菜鸟来说太复杂了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:29:04.337

不幸的是，使用 OAuth 并不简单，即使是像 gtm-oauth ( [http://code.google.com/p/gtm-oauth/](http://code.google.com/p/gtm-oauth/) ) 这样的库，它有不错的文档和示例，也不会让它变得太容易。

我会尝试查看服务提供商是否在 github 上拥有自己的库，这有望解决复杂性。否则 gtm-oauth 是一个不错的起点。

# scala - 分配给方法的无用隐式关键字？/播放框架2

> ID：15889878
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:14.823
> 
> 标签：scala, playframework-2.0

正如[Play 框架的官方文档所](http://www.playframework.com/documentation/2.1.1/ScalaSessionFlash)建议的那样，我们可以使用隐式`request`来改进对与请求关联的某些对象的访问。

样本：

```
def index = Action { implicit request =>
  session.get("connected").map { user =>
    Ok("Hello " + user)
  }.getOrElse {
    Unauthorized("Oops, you are not connected")
  }
} 
```

这是由于添加了`implicit`属于该`Controller`特征的以下方法：

```
/**
   * Retrieves the session implicitly from the request.
   *
   * For example:
   * {{{
   * def index(name:String) = Action { implicit request =>
   *   val username = session("username")
   *   Ok("Hello " + username)
   * }
   * }}}
   */
  implicit def session(implicit request: RequestHeader) = request.session 
```

问题：为什么这个方法被声明为`implicit`？`request`仅将参数声明为还不够`implicit`吗？

我希望看到的是：

`def session(implicit request: RequestHeader) = request.session`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:31:58.653

第一个`implicit`关键字确实根本不需要让您的示例编译。因此，要么是 Play! 中的错误，要么是附加`implicit`关键字旨在发挥其他作用。

特别是使用这个附加`implicit`关键字，您可以调用一个需要类型隐式值的方法，`Session`即使您`RequestHeader`在范围内只有一个类型的隐式值（`session`也定义了一个类型的隐式值`RequestHeader`，前提是您有一个类型的隐式值`RequestHeader`in范围）。

# grails - 使用 Spring Security 的 Grails 中的多个安全提供程序

> ID：15889881
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:23.973
> 
> 标签：grails, spring-security, shibboleth

在带有 Spring Security 的 Grails 中，如何为不同的域运行不同的 Spring Security 插件？

对于控制器上的一些方法，我希望它们使用存储在我的数据库中的普通用户名/密码来保护它们。不过，对于不同的域名，我想使用另一种方法，在我的例子中是 shibboleth。

例如：如果您要访问 example.com/abc，您将被重定向到用户/通行证页面。如果您要访问与 sub.example.com/abc 相同的 web 应用程序，您将被引导通过 shibboleth 登录流程。

这个想法是支持创建帐户的用户以及使用现有第 3 方帐户进行身份验证的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:08:23.507

一开始，您可以使用 filterChain.chainMap 为不同的 url 更改不同的过滤器，这将允许在提供程序之间切换，但我不确定是否处理子域。[chainMap](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/16%20Filters.html)的文档。

# c# - 如何将 Windows 商店应用程序转换为 Windows Phone 8.0 应用程序？

> ID：15889884
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:34.167
> 
> 标签：c#, xaml, windows-8, windows-phone-8, windows-store-apps

我需要一个指南来将我的工作 Windows 商店应用程序转换为 Windows Phone 8 应用程序！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T23:11:15.203

您不能自动执行此操作。尽管可能有相当数量的代码可以重用，但由于 WinRT/WinPRT 的相似性，您仍然需要使用一些特定于平台的功能（例如存储）。

我的同事 Rick Barraza 编写了一份关于将 Windows Phone 应用程序迁移到 Windows 8[的精彩指南。](http://channel9.msdn.com/Blogs/C9Team/Migrating-the-Khan-Academy-Windows-Phone-app-to-Windows-8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T06:59:26.120

您可以使用可移植类库在 Windows Phone 应用程序和 Windows 8 应用程序之间共享代码。重用您编写的代码可能会有所帮助，这些代码将适用于您在创建 PCL 时使用的平台。

# php - 如何使用 Symfony 2 达到连接的领域？

> ID：15889892
> 
> 赞同：0
> 
> 时间：2013-04-08T22:06:58.170
> 
> 标签：php, symfony, doctrine-orm

我有一个联合查询：

```
$query = $this
    ->getEm()
    ->getRepository("MovementHeader")
    ->createQueryBuilder('d')
    ->leftJoin('MovementDetail', 'stockmovementdetail', 'WITH', 'stockmovementdetail.movementId = d.id') 
```

现在如何达到“运动细节”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T23:42:28.053

由于您的问题非常模糊，我将笼统地回答。如果您需要更具体的信息，请提供更具体的信息。

假设运动标题有一个链接到运动细节实体的字段（我们称之为运动细节）。您可以执行以下操作：

```
$query = $this
    ->getEm()
    ->getRepository("MovementHeader")
    ->createQueryBuilder('mh')
    ->select('mh','md')
    ->innerJoin('mh.movementDetail','md')
    ->where(/* Now in the where cause, 
               you can select what ever 
               you want from mh or md*/)
    ->setParameters(array(/* ... */)) 
```

以下是您可以使用的一些示例：

```
->where('mh.id = :id') //Could used when you want to retrieve a specific header
->where('md.field IN (:list)') // Where you want to retrive all the mh 
                               // (and their md) that contains the fields 
```

你也可以像这样做多个条件

```
->where('mh.field = :value AND md.otherField = :value2') 
```

然后，您必须相应地设置参数。

获得结果后，您可以使用普通的 getter 和 setter 访问字段。

# php - 更新日期字段时为空 - MySQL PHP

> ID：15889893
> 
> 赞同：1
> 
> 时间：2013-04-08T22:06:59.163
> 
> 标签：php, mysql

我正在尝试更新我的数据库中的日期字段。像这样查询：

```
$q = "update news set data = STR_TO_DATE('2011-03-05','%Y-%m-%d'), title = '".$title."', content='".$content."',...."; 
```

效果很好，但是：

```
$q = "update news set data = STR_TO_DATE('".$data."','%Y-%m-%d'), title = '".$title."', content='"..."; 
```

它不工作:(

我得到了日期：

```
$data = $_POST["data"]; 
```

它的值为“2013-04-13”。我修剪了日期并在弹出窗口中显示并且值是正确的；请帮助:)

**更新** 这对我来说很奇怪，但如果我使用的是：

```
$q = "insert into news set data = CAST('".$data."' AS DATE), title = '".$title."', content='".$content."'..."; 
```

它工作得很好。只在插入不更新

表格脚本：

```
CREATE TABLE IF NOT EXISTS `news` (`id` int(11) NOT NULL AUTO_INCREMENT, `data` date NOT NULL, `title` text NOT NULL, `content` text NOT NULL, `img` text NOT NULL, `n_img` text NOT NULL, PRIMARY KEY (`id`), KEY `id` (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=36 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:13:34.227

你为什么用`STR_TO_DATE`？看起来您的日期格式已经正确。尝试删除它并按原样插入？

可能想先逃脱它。

```
$data = mysql_real_escape_string($_POST["data"]); 
```

# sql - Set Based SQL Server sp_send_dbmail Stored Procedure call for a ResultSet of multiple rows

> ID：15889895
> 
> 赞同：0
> 
> 时间：2013-04-08T22:07:11.750
> 
> 标签：sql, sql-server, set

你好 Stackoverflow 社区！

我有一个查询，我发现很难在表格中找到答案。

我有一个简单的存储过程：

```
CREATE PROCEDURE [dbo].[spSendEmail] 
@To NVARCHAR(100),   
@Subject NVARCHAR(200),
@Body NVARCHAR(MAX),
@FileAttachments NVARCHAR(MAX) = null

AS
BEGIN

EXEC  [msdb].[dbo].sp_send_dbmail
@profile_name= 'Test Mail',
@recipients=@To,    
@subject=@Subject,
@body=@Body,
@body_format = 'HTML',
@file_attachments= @FileAttachments

END 
```

我想从一个查询中调用这个结果集来传递所需参数的每一行，即@To

我的结果集查询的简化版本，返回 4 列：

```
 SET ROWCOUNT 0
SELECT s.EMAIL_ADDRESS, s.Date,s.Code,s.Description
INTO #tempMyDetails
    FROM ContactInfo s 
```

从此表中正在执行以下操作：

```
 DECLARE @Subject NVARCHAR(200)
SET @Subject = 'My Email'

DECLARE @sql As NVarchar(MAX);  
SET     @sql = N'';
SELECT  @sql = @sql + ' EXEC spSendEmail ''' 
    + t.EMAIL_ADDRESS + '''' + ',' + '''' + @Subject + ': ' + t.Code + '''' + ','
    dbo.fnDetailsBody(t.Code,t.Date,t.Description)
FROM #tempDetails t

EXEC (@sql);

DROP TABLE #tempDetails; 
```

注意我的函数 fnDetailsBody() 根据电子邮件的参数返回一个 NVARCHAR 字符串的 HTML。

但是，我确实有这个工作，向我的结果表中的每个电子邮件返回发送电子邮件。

这是最好/唯一的方法来解决这个问题而不使用一段时间/光标向每一行发送电子邮件吗？

多谢。

# android - 在 AsyncTask 中动态显示图像按钮

> ID：15889905
> 
> 赞同：0
> 
> 时间：2013-04-08T22:07:57.010
> 
> 标签：android, dynamic, android-asynctask, android-view

所以我从 Parse 中检索图像并在 ScrollView LinearLayout 中动态显示它们，但我似乎无法添加 clickListener 或将它们添加到视图中。这是我所拥有的：

```
MyTaskParams params = new MyTaskParams(drinkList.get(j).getString("Name"), data, lPos, drinkList.get(j).getObjectId(), j);
                        MyTask myTask = new MyTask();
                        myTask.execute(params); 
```

然后在我传递所有数据并尝试将 ImageButton 添加到视图中。

```
private static class MyTaskParams {
        String name;
        byte[] data;
        int lPos;
        String id;
        int j;

        public MyTaskParams(String name, byte[] data, int lPos, String id, int j) {
            this.data = data;
            this.name = name;
            this.lPos = lPos;
            this.id = id;
            this.j = j;
        }
    }

    private class MyTask extends AsyncTask<MyTaskParams, Void, MyTaskParams> {
        @Override
        protected MyTaskParams doInBackground(MyTaskParams... params) {
            String name = params[0].name;
            byte[] data = params[0].data;
            int lPos = params[0].lPos;
            String id = params[0].id;
            int j = params[0].j;

            Log.d("DOINBACKGROUND", data.toString());

            bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
            btn = new ImageButton(getActivity());
            btn.setId(j);
            btn.setTag(name);
            btn.setImageBitmap(bmp);
            btn.setBackgroundDrawable(null);
            btn.setMaxHeight(100);
            btn.setMaxWidth(100);
            btn.setOnClickListener(new DrinkButtonListener(getActivity(), lPos, id));
            lLayout[lPos].addView(btn);

            return null;

        }
    } 
```

为什么我不能创建 ClickListener 或将按钮添加到视图中？我得到错误：

“只有创建视图层次结构的原始线程才能触及它的视图”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:12:24.880

您无法触及 Main 的其他方面的视图。

如果要操作视图，可以将可运行的内容发布到类似的视图中

```
myView.post(new Runnable(...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:16:31.940

一旦你在 doInBackground() 中，你就不再在 UI 线程中了。在史前时代，您可以尝试从后台更新 UI，但这不是一件好事。

如果您尝试，他们会更改 Android 以引发错误，这是一件不好的事情。

您可以使用特定方法解决它。看

[工作线程](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)了解更多信息。

我倾向于认为有更强大的方法来做你正在做的事情，但它们更复杂。不过，你已经有了基本的想法。[您应该花很长时间参加Sending Operations to Multiple Threads](http://developer.android.com/training/multiple-threads/index.html)培训班 ，这可能会给您更多的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:36:05.213

[您可以通过在AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中实现 onProgressUpdate 或 onPostExecute 方法来更新 UI 。

在您的情况下，您可能希望使用 onPostExecute。

```
private class MyTask extends AsyncTask<MyTaskParams, Void, Bitmap> {
    @Override
    protected MyTaskParams doInBackground(MyTaskParams... params) {
        String name = params[0].name;
        byte[] data = params[0].data;
        int lPos = params[0].lPos;
        String id = params[0].id;
        int j = params[0].j;

        Log.d("DOINBACKGROUND", data.toString());

        return BitmapFactory.decodeByteArray(data, 0, data.length);
    }

    @Override
    protected void onPostExecute(Bitmap bmp) {
        btn = new ImageButton(getActivity());
        btn.setId(j);
        btn.setTag(name);
        btn.setImageBitmap(bmp);
        btn.setBackgroundDrawable(null);
        btn.setMaxHeight(100);
        btn.setMaxWidth(100);
        btn.setOnClickListener(new DrinkButtonListener(getActivity(), lPos, id));
        lLayout[lPos].addView(btn);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T10:05:07.913

**您可以对Log.e**使用以下代码并在按钮上设置值。

这是代码。

```
yourclassname.this.runOnUiThread (new Runnable(){

            public void run() {

                NameUser.setText(name);
                Id.setText(email);
                cimg.setImageBitmap(btmp);
                add1.setText(address1);
                add2.setText(address2);
                City.setText(city);
                State.setText(state);
                Pincode.setText(pincode);
                Country.setText(country);
                Mobile.setText(mobile);
                Skills.setText(skills);

            }
        }); 
```

# http - 每次点击/访问/按下 url 时是否都会发送新的服务器请求？

> ID：15889906
> 
> 赞同：-1
> 
> 时间：2013-04-08T22:08:01.313
> 
> 标签：http, webserver

例如，在地址栏中，如果我按 Enter 键加载 url，然后在开始加载时关闭选项卡？在这种情况下是否仍然发送请求？

如果是的话，我也会对有关发送什么和不发送什么或发回什么的更多细节感兴趣？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:15:04.307

**是**的，每次都会发送请求。当您单击链接或访问页面时，请求被发送，然后浏览器等待，直到响应从服务器返回。

有关更多详细信息，请参阅本文[http://devhub.fm/http-requestresponse-basics](http://devhub.fm/http-requestresponse-basics)。

# android - 没有 BluetoothManagerCallback 调用 getBluetoothService

> ID：15889908
> 
> 赞同：48
> 
> 时间：2013-04-08T22:08:11.057
> 
> 标签：android, bluetooth

我`getBluetoothService() called with no BluetoothManagerCallback`在我的 Android 应用程序中经常遇到错误。

我不知道是什么导致了这个或任何关于蓝牙管理器回调的事情。谁能给我一个关于可能导致此问题的原因或从哪里开始寻找的好主意。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-06-15T12:30:54.143

通过阅读 Android 源代码，这似乎是一个您无能为力的警告。源代码显示，如果你调用

```
BluetoothSocket#connect(); 
```

然后它会调用

```
BluetoothAdapter.getDefaultAdapter().getBluetoothService(null); 
```

这里的关键是它在上面的行中传递的空参数。因此，不会有回调，然后 BluetoothSocket 类会抛出警告。

由于这只是一个警告，我认为您无需对此做任何事情。

[https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/bluetooth/BluetoothSocket.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/bluetooth/BluetoothSocket.java "蓝牙套接字.java")第306行 [https://android.googlesource.com/platform/frameworks/base/+ /master/core/java/android/bluetooth/BluetoothAdapter.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/bluetooth/BluetoothAdapter.java "蓝牙适配器.java")第 1610 行

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T23:22:36.100

当同时打开多个蓝牙套接字时，这似乎会被调用。我通过确保一次只打开 1 个插槽来解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-26T13:48:26.910

即使我的应用程序已关闭并且我无法以任何可能的方式摆脱它，我也会收到此错误。在这种情况开始发生后，我需要硬重启我的手机，因为我什至无法打开蓝牙。

现在（使用相同的代码）它只发生在我的一部手机上。也许这是驱动程序的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-23T11:39:58.820

我在收到 BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED 状态为 BluetoothHeadset.STATE_CONNECTED 后直接尝试 BluetoothSocket.connect() 后收到此消息。BluetoothSocket.connect() 也失败了。在尝试 BluetoothSocket.connect() 之前添加 500 毫秒的超时后，这解决了我实际连接的问题。消息“在没有 BluetoothManagerCallback 的情况下调用 getBluetoothService()”仍然存在，但一切正常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-12T11:02:05.203

如果 BluetoothServerSocket 当前不接受具有您尝试连接的相同 UUID 的 [bluetoothServerSocket.accept()]，也会出现这种情况。

如果您确定您接受服务器套接字，请仔细检查您是否没有提供太短的超时（我之前已将其设置为 200 以检查某些内容，哎呀）。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-06-03T04:58:24.840

没有 BluetoothManagerCallback 调用 getBluetoothService()

我也面临同样的问题。但我解决了。在我的情况下，已经有一个套接字处于打开状态，我正在尝试打开另一个套接字。因此，我们尝试作为客户端一次打开多个套接字。我觉得这就是原因

# java - 关于 mongodb 上限集合的困惑

> ID：15889917
> 
> 赞同：0
> 
> 时间：2013-04-08T22:09:04.547
> 
> 标签：java, mongodb, collections, statistics

我是 mongodb 的新手。这是一个代码片段：

```
MongoClient mongo = new MongoClient("localhost", 27017);
DB db = mongo.getDB("testdb");
DBCollection collection = db.getCollection("user"); 
```

对于`db.getCollection("user")`，如果存在名为“user”的现有集合，它将返回此集合。如果“用户”没有退出，`getCollection("user")`将创建一个新集合。现在我想知道创建了什么类型的集合`getCollection`。是否`getCollection`返回上限集合？

我已阅读 mongodb 手册：

> `createCollection()`您必须使用该方法显式创建上限集合。

这是否意味着由创建的集合`getCollection`不是上限集合？

我也想知道：

1.  32 位系统上 DBcollection 的最大默认大小是多少？
2.  数据库中的最大集合数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:20:28.407

MongoDB 不会创建上限集合，除非通过您描述的技术（它可以通过 API 或外壳创建）。

*集合的最大默认大小？*在 32 位系统上大约 2GB。但是，10gen 不建议将 32 位构建用于生产系统（请参阅此处）。

*集合的最大数量*有点复杂，最好由[文档](http://docs.mongodb.org/manual/core/data-modeling/#large-number-of-collections)解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:54:42.107

Mongodb capped collection 有很多限制，请参阅链接[http://docs.mongodb.org/manual/core/capped-collections/](http://docs.mongodb.org/manual/core/capped-collections/)。我会推荐 TTL 而不是它有助于实现相同的目标。你可以在这里找到更多关于 TTL 的信息[http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)。

# .htaccess - 虚拟文件夹

> ID：15889922
> 
> 赞同：0
> 
> 时间：2013-04-08T22:09:29.807
> 
> 标签：.htaccess, mod-rewrite

我正在尝试利用 mod_rewrite 允许我使用 domain.com/d4k1d 来提供与 domain.com/link.php?link=d4k1d 相同的效果

目前我的 .htaccess 中有这个，虽然这似乎给了我 404 错误。

```
RewriteEngine on
RewriteRule /(abcdefghijklmnopqrstuvwxyz[0-9]+)/ link.php?link=$1 
```

我对 mod_rewrite 等不太熟悉，所以我不知道该去哪里：S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:13:04.843

您需要在字符类中包含所有字母（也可以简化）。您当前的规则只允许一个字母后跟一个或多个数字：

```
RewriteEngine on
RewriteRule /([a-z0-9]+)/ link.php?link=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:28:39.993

您需要删除前导斜杠，因为它在用于 htaccess 文件中的规则之前已被 apache 从 URI 中剥离。

```
RewriteEngine on
RewriteRule ^([a-z0-9]+)/?$ /link.php?link=$1 [L] 
```

# python - 在 Python 中覆盖字段的方法

> ID：15889928
> 
> 赞同：1
> 
> 时间：2013-04-08T22:10:13.007
> 
> 标签：python, oop, overwrite

我有一个自定义类，我在第二个类中实例化了两次：

[编辑：旧代码并没有真正捕捉到我的问题，我正在重写以使其更清晰。Foo 将通过使用回调函数来处理网络事件（我需要多个连接，因此 Bar 将有多个 Foo 字段并且不能只继承）。在 Bar 类中，我想覆盖回调来做一些不同的事情。在 Foo 中重写 callb 将不起作用，因为在其他情况下我确实从它继承]

```
class Foo(object):
    def __init__(self, x):
        self._x = x
        #When an event happens, call callb()
        self.on_certain_event(callback=callb)

    def callb(self):
        print self._x

    def run(self):
        waitForEventsInfinitely() #

class Bar(object):
    def __init__(self):
        self._foo = Foo(5)
        #OVERWRITE THE EXISTING CALLBACK METHOD IN THE Foo CLASS!
        self._foo.callb = self.callb

    def callb(self):
        print self._x * 10

    def run(self):
        waitForEventsInfinitely() # Not going to actually write t

f = Foo(2)
f.run()
b = Bar()
b.run() 
```

[在 Foo 中调用 run() 时，它可以正常工作。但是，我无法从 Bar 覆盖 Foo 的 callb 方法 - Foo 应该引用的 self._x 正试图从 Bar 调用]

但是，在运行代码时，我收到错误“Bar has no attribute '_x'”而不是我的预期值 50。显然，Bar 测试中的 self 仍然指的是 Bar，而不是实际调用该方法的 Foo . 我本来希望它是 Bar 中的内部 Foo self._foo 字段。

我怀疑我的问题与名称修改有关，但是当我的 self 字段被覆盖时，我无法找到描述性来源。大多数示例似乎是当我从不同的类继承时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:15:49.640

似乎在 Bar.test 你想要：

```
print self._foo._x * 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:49:11.160

关于 Python 中的类如何工作的简短课程：存储在类对象（“方法”）上的任何函数都由将方法绑定到您使用的类或实例的[描述符](https://stackoverflow.com/questions/972/adding-a-method-to-an-existing-object)（描述如何从对象中获取属性）自动获取为拿到它，为实现它。

例如：

```
Foo.test 
```

是**类 Foo 的未绑定方法**：这是由描述符创建的对象`Foo`，知道它是从类对象中获取的

```
Foo().test 
```

是**类 Foo 实例的绑定方法**：此方法存储`Foo`用于获取函数的实例。当您调用结果对象时，此实例会自动作为第一个参数传递，这就是您`self`在定义方法时将其写为第一个参数的原因。

所以，你想要做的是：

1.  从类中获取*原始*函数（而不是通过描述符）`test``Bar`
2.  将此函数绑定到`Foo`
3.  将此函数存储在 foo 实例上

所以，这就是你的做法：

```
import types 

class Bar(object):
    def __init__(self):
        self._foo = Foo(5)

        raw_function = Bar.test_Bar.__func__                        # 1)
        bound_to_foo = types.MethodType(raw_function, self._foo)    # 2)    
        self._foo.test = bound_to_foo                               # 3)

    def test(self):
        print self._x * 10 
```

有关描述符的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/972/adding-a-method-to-an-existing-object)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:20:44.050

如果您查看您的代码，当您调用 b.test 时，您是在直接在 Bar 的实例上调用该方法；根本没有提到 Foo 的实例。b 没有名为 _x 的成员，因此出现错误。要获得您期望的行为，您必须调用 b._foo.test。这将为您提供 50 的预期结果。

如果希望能够直接调用 b.test，请将 self._x 更改为 self._foo._x。这样您就不必更改 _foo 的任何方法。我不太确定当您可以使用继承时为什么要为对象分配不同的方法。

# wolfram-mathematica - 数学：PadRight[] 和 \[PlusMinus]

> ID：15889931
> 
> 赞同：1
> 
> 时间：2013-04-08T22:10:31.040
> 
> 标签：wolfram-mathematica, pad

有什么办法可以

```
PadRight[a \[PlusMinus] b,2,""] 
```

退货

```
{a \[PlusMinus] b,""} 
```

代替

```
 a \[PlusMinus] b \[PlusMinus] "" 
```

?

我相信我需要以某种方式停用 [PlusMinus] 的运算符属性。

**为什么我需要这个？**

我正在创建一个程序来显示带有物理量的表格。对我来说，这意味着表中的条目如（a 的值）[PlusMinus]（a 的不确定性）

当我有几个不同高度的列时，我用“”填充较短的列，所以我可以使用 `Transpose`表格的数字部分。

如果该列有多个条目，则没有问题：

```
PadRight[{a \[PlusMinus] b,c \[PlusMinus] d},4,""] 
```

给了我想要的：

```
{a \[PlusMinus] b,c \[PlusMinus] d,"",""} 
```

当该列只有一个条目时，我的问题出现了。

这是构造用“”填充的主体的代码：

```
If[tested[Sbody],1, 
 body = PadRight[body, {Length[a], Max[Map[Length, body]] 
```

和

```
tested[a__] := 
  If[Length[DeleteDuplicates[Map[Dimensions, {a}]]] != 1, False, 
   True]; 
```

, 一个函数，它发现参数是否具有相同的维度

和

```
a={Quantity1,Quantity2,...} 
```

数量是我想要在我的桌子上的数量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:38:22.530

首先，您需要注意 Mathematica 中的任何表达式都是 Head[Body] 形式，其中 body 可能为空，单个表达式或由逗号分隔的表达式序列 Length 对表达式进行操作，不一定要列出 Length[PlusMinus [a,b]] 返回 2，因为表达式的主体包含 a 和 b 的表达式（在本例中为原子）

阅读 PadRight 上的文档。第二个参数定义表达式的最终长度，因此 PadRight[{a,b},4,c] 结果为长度为 4 的列表，最后两个元素等于 PadRight[{a,b},2,c] 结果使用原始列表，因为它的长度已经是 2 因此 PadRight[PlusMinus[a,b],2,anything] 只是返回相同的 PlusMinus[a,b] 不变，因为它的长度已经是 2 所以，你的第一个例子是错误的. 当您尝试填充带有头部 PlusMinus 的表达式时，您无法使用 PadRight 获得带有头部列表的结果

执行 PadRight[PlusMinus[a,b],3,""] 没有问题，但结果看起来很有趣（充其量）并且在逻辑上毫无意义，但如果这是你一开始想要的，你就会得到它，然后我上面的解释你可以弄清楚为什么

高温高压

最好的

耶胡达

# python - Dropbox 身份验证不适用于 Python

> ID：15889934
> 
> 赞同：0
> 
> 时间：2013-04-08T22:10:44.420
> 
> 标签：python, oauth, flask, dropbox

我正在尝试使用 Python ( Flask ) 和 DropBox API 构建一个应用程序。我正在尝试授权用户，所以我跟进了 python 教程。

```
from flask import Flask, render_template, url_for
from dropbox import client, rest, session

# Dropbox Settings
APP_KEY     = 'gb83a6gpdo4kba6'
APP_SECRET  = 'w5q0yhj9ikiw39g'
ACCESS_TYPE = 'app_folder'

# Flask Config
DEBUG = True

app = Flask(__name__)
app.config.from_object(__name__)

@app.route("/")
def home():

    dropboxAccount = dropboxAccessToken = dropboxClient = None

    # Dropbox Auth
    dropboxSession = session.DropboxSession(app.config['APP_KEY'], app.config['APP_SECRET'], app.config['ACCESS_TYPE'])
    requestToken   = dropboxSession.obtain_request_token()

    try:
        dropboxAccessToken = dropboxSession.obtain_access_token(requestToken)

        dropboxClient      = dropboxClient.DropboxClient(dropboxSession)
        dropboxAccount     = dropboxClient.account_info()
    except Exception, e:
        print e
        dropboxAuthUrl = dropboxSession.build_authorize_url(requestToken, oauth_callback = "http://localhost:5000/")

    context = {
        'dropboxAuthUrl' : dropboxAuthUrl,
        'dropboxAccount' : dropboxAccount
    }

    return render_template('layout.html', context = context)

if __name__ == "__main__":
    app.run() 
```

但是，授权不起作用。从我的本地主机尝试，用户单击此行生成的链接：

```
dropboxSession.build_authorize_url(requestToken, oauth_callback = "http://localhost:5000/") 
```

并且，进入 DropBox 授权页面，显示应用信息和允许或拒绝选项。当我单击“允许”按钮时，它会将我重定向回来，当我检查我的帐户应用程序时，新应用程序未在此处列出。回调 url 如下所示：

```
http://localhost:5000/dropbox/?uid={some_uid}&oauth_token={some_token} 
```

有谁知道发生了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:20:42.647

刚解决。我没有注意到我在每个请求上都重置了 request_token 。

# ios - AvFoundation - 如何连接 AVCaptureSession 和 AVAssetWriter？

> ID：15889936
> 
> 赞同：9
> 
> 时间：2013-04-08T22:11:11.763
> 
> 标签：ios, avfoundation, avcapturesession, avassetwriter

我正在尝试使用 AVCaptureSession 从相机捕获视频，然后我想使用 AVAssetWriter 将结果写入文件（具体来说，使用多个 AVAssetWriters 将捕获写入块视频，但我们不需要复杂化这个问题与那个）。但是，我无法确定数据实际需要传递到 AVAssetWriter 的位置。在 Apple Developer 文档中，我只看到 AVCaptureSession 数据被传递给 AVCaptureFileOutput。也许我只是错过了一些东西。AVAssetWriter 可以仅用作捕获会话的输出吗？将不胜感激相关示例或代码位（虽然不是必需的）。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:33:29.910

看看[http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html](http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html)。这显示了如何将捕获输出与资产写入器连接，然后从资产写入器中提取数据以进行流式传输。

G

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T03:24:36.623

你的目标到底是什么？因为您要求（使用 AVAssetWriter 作为 AVCaptureSession 的输出）是不可能的。

基本上，一个`AVCaptureSession`对象具有输入（例如：相机，由某个`AVCaptureInput`子类表示）和输出（以`AVCaptureOutput`'s 的形式）。而且 an`AVAssetWriter`不是`AVCaptureOutput`子类，因此无法直接从 AVCaptureSession 中使用它。

如果要使用 AVAssetWriter，则必须使用`AVCaptureFileOutput`实例将数据写出，然后使用 . 读回，以`AVAssetReader`某种方式修改数据，*然后*通过`AVAssetWriter`.

最后要记住的事情：[`AVAssetReader`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetReader_Class/Reference/Reference.html)记录在案以不保证实时操作。

# cocoa - 将 NSTextField 指针传递给 IOUSBInterfaceInterface182 回调

> ID：15889937
> 
> 赞同：0
> 
> 时间：2013-04-08T22:11:18.980
> 
> 标签：cocoa, callback, usb

我正在从 USB 打印机进行异步读取。读取工作正常。我的麻烦是从回调中更新 NSTextField 。

```
-(IBAction)printTest:(id)sender
{
    // Setup... then:

    NSLog(@"starting async read: %@", _printerOutput);
    NSLog(@"_printerOutput pointer = %p", _printerOutput);

    result = (*interface)->ReadPipeAsyncTO(interface,
                                           1,
                                           readBuffer,
                                           numBytesRead,
                                           500,
                                           1000,
                                           USBDeviceReadCompletionCallback,
                                           &(_printerOutput)
                                           ); 
```

回调定义为：

```
void USBDeviceReadCompletionCallback(void *refCon, IOReturn result, void *messageArg)
{
    NSTextField *printerOutput = (__bridge NSTextField *) messageArg;
    NSLog(@"_printerOutput pointer = %p", printerOutput);
} 
```

指针在回调内部时会丢失其值。

```
starting async read: <NSTextField: 0x10221dc60>
_printerOutput pointer = 0x10221dc60
_printerOutput pointer = 0x0 
```

我在很多地方都试图模仿不同的方式来传递指针。只有一种正确的方法。:)

主题的另一个变体：(__bridge void *)(_printerOutput)。这也行不通。

我知道回调是 IOAsyncCallback1 类型的。

其他值得注意的 URL： [http](http://www.google.com/search?client=safari&rls=en&q=another+usb+notification+example&ie=UTF-8&oe=UTF-8) ://www.google.com/search?client=safari&rls=en&q=another+usb+notification+example&ie=UTF-8&oe=UTF-8并 [从线程中的 C 函数更新 UI](https://stackoverflow.com/questions/8010382/updating-ui-from-a-c-function-in-a-thread)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:50:24.890

我想`_printerOutput`是一个`NSTextField*`？

首先，您是否有特殊原因将 an 传递`NSTextField**`给回调？（请注意您传递给的最后一个参数中的与号`ReadPipeAsyncTO`。）

其次，作为预防措施，我会避免使用敏感代码的 ARC。

第三，据[我所见](https://developer.apple.com/library/mac/#documentation/IOKit/Reference/IOUSBInterfaceInterface182_reference/translated_content/IOUSBInterfaceInterface182.html)，最后一个参数`ReadPipeAsyncTO`称为`refcon`。回调的第一个参数被调用是巧合`refCon`吗？请注意，您正在尝试从`messageArg`而不是获取文本字段`refCon`。

* * *

继续我的第三点……</p>

1.  `ReadPipeAsyncTO`有一个名为`refcon`. 这是**最后一个论点**。
2.  请通过`_printerOutput`那里。Not a pointer to `_printerOutput`(do not pass `&(_printerOutput)`) --`_printerOutput`已经是一个指针。
3.  **现在终于。**查看回调的第一个参数。它被称为`refcon`。事实上——让我们看看[Apple 文档](http://developer.apple.com/library/mac/#documentation/IOKit/Reference/IOKitLib_header_reference/Reference/reference.html)对这个回调是怎么说的：

> *参考*
> 
> refcon 传入原始 I/O 请求

我的结论是你的代码应该是：

```
void USBDeviceReadCompletionCallback(void *refCon, IOReturn result, void *messageArg)
{
    NSTextField *printerOutput = (__bridge NSTextField *) refCon; // <=== the change is here
    NSLog(@"_printerOutput pointer = %p", printerOutput);
} 
```

请问你可以试试这个吗？我感觉你没试过这个。

小但可能很重要的题外话：如果它是其他对象，如果您不使用 ARC，我建议在将`_printerOutput`变量传递给时保留变量`ReadPipeAsyncTO`，并在回调中释放它。

但是，由于文本字段应该具有应用程序的生命周期，因此可能没有必要这样做。

一旦将指针传递到 C 代码中，ARC 可能会忘记指针背后的对象是否需要存在，但这并不重要，因为指针仍存储在`printerOutput`属性中。此外，一旦指针在 C 代码中，没有什么可以“跟随它”和“重置它”。

理解和解释概念时的困惑正是我说“避免使用敏感代码的 ARC”的原因。:-)

# ios - UIFont 自定义字体未显示在设备上

> ID：15889942
> 
> 赞同：3
> 
> 时间：2013-04-08T22:11:44.703
> 
> 标签：ios, objective-c, uifont

我有自定义字体的问题。即是Tw Cen MT.ttf

与此处的问题相同： [自定义字体未显示在设备上，但在模拟器上显示](https://stackoverflow.com/questions/10050613/custom-font-not-showing-on-device-but-does-on-simulator)

除了给定的解决方案对我不起作用。

我已经做了你应该做的事情：

1.  将字体添加到 Info.plist
2.  在构建阶段中为复制捆绑资源部分添加了字体。
3.  通过名称而不是文件名以编程方式使用字体。

它仍然不起作用。更有趣的是 - 当我列出可用字体时：

```
NSLog(@"%@", [UIFont familyNames]); 
```

它在模拟器上显示我的字体，但没有在设备上显示。我在带有 iOS 6 的新 iPad 和 iPhone 4 上都对其进行了测试。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:28:39.200

确保不要将家族名称与字体名称混淆。这是我用来检查字体真实名称的代码。-

```
NSArray *familyNames = [UIFont familyNames];
for (NSString *aFamilyName in familyNames) {
     NSArray *fontNames = [UIFont fontNamesForFamilyName:aFamilyName];
     for (NSString *aFontName in fontNames) {
        NSLog(@"%@", aFontName);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:17:28.093

确保你得到正确的字体名称。模拟器不区分大小写，而手机是。

# ios - 什么是未记录的方法和私有 API？

> ID：15889943
> 
> 赞同：1
> 
> 时间：2013-04-08T22:11:46.483
> 
> 标签：ios, appstore-approval, iphone-privateapi

最近我收到了 Apple 的拒绝，因为我使用了私有 API。我不确切知道什么是私有 API 或未记录的方法。有人可以解释一下什么是未记录的方法和私有 API 吗？我真的对此感到困惑......

**跟进：**

*   究竟什么是“官方文档”？我可以使用一些由第三方制作的框架和类，比如亚马逊的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T22:16:00.420

私有 API 或未记录的方法是不属于官方文档的任何对象或方法。在 Objective C 和其他一些语言中，查找对象支持的方法（消息）列表以及框架下的对象相对容易。（例如，只需进入调试器并查看视图层次结构。您可能会看到文档中不存在的几个视图对象。）有时您甚至会在 Web 上看到有关如何使用这些方法和对象的说明.

一个让我想到的例子是`-UIWindow _autolayoutTrace`，我在调试自动布局时一直使用它，但它没有记录在案，并且前导下划线暗示你不应该使用它。这对于调试来说很好，但如果我发布了使用该方法的代码，它肯定会被拒绝。

但 Apple 在 App Store 审查过程中专门扫描这些未记录的方法，并拒绝使用它们的应用程序。这是因为 Apple 可能会随时更改这些未记录的方法的工作方式。如果您的应用程序依赖于这些隐藏的类或方法之一，那么当 Apple 发布更改此行为的新版本 SDK 时，您的应用程序可能会中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:15:41.350

Apple 内部使用了一组功能，但不向开发人员公开。

对此类 API 的任何使用都将导致 Apple 拒绝该应用程序。

# c# - 本地化字符串的单元测试代码覆盖率不是 100%

> ID：15889951
> 
> 赞同：1
> 
> 时间：2013-04-08T22:12:51.240
> 
> 标签：c#, asp.net-mvc, unit-testing

我们正在努力使我们的单元测试代码覆盖率尽可能接近 100%。我们做得相当好，但是由于本地化字符串（旨在优雅地失败），结果看起来比实际情况要糟糕得多。

这是我的模型中未涵盖的代码示例：

```
 #region strings
    public string AllStr { get { return Localizer.GetString("Resources.Order.Status", "all", "all"); } }
    public string ArchivedStr { get { return Localizer.GetString("Resources.Order.Status", "archived", "archived"); } }
    public string Closed30Str { get { return Localizer.GetString("Resources.Order.Status", "closed30", "closed30"); } }
    public string Closed90Str { get { return Localizer.GetString("Resources.Order.Status", "closed90", "closed90"); } }
    public string GoStr { get { return Localizer.GetString("Resources.Global", "go", "go"); } }
    public string OpenStr { get { return Localizer.GetString("Resources.Order.Status", "open", "open"); } }
    public string OrderStatusStr { get { return Localizer.GetString("Resources.Order.Status", "orderStatus", "orderStatus"); } }
    public string SelectedCustStr { get { return Localizer.GetString("Resources.Order.Status", "selectedCust", "selectedCust"); } }
    public string StartTypingStr { get { return Localizer.GetString("Resources.Order.Status", "startTyping", "startTyping"); } }
    public string TitleStr { get { return Localizer.GetString("Resources.Order.Status", "title", "title"); } }
    #endregion 
```

我真的不想将应用程序中的数百个字符串添加到单元测试中，但我也不希望它们影响覆盖结果。

如何从代码覆盖率分析中排除这些字符串，以便更准确地了解重要的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:23:50.533

您正在寻找[ExcludeFromCodeCoverage 属性](http://msdn.microsoft.com/en-us/library/dd984116%28v=VS.100%29.aspx)。将此应用于您的代码会将其从您的代码覆盖率结果中排除。

```
[ExcludeFromCodeCoverage]
public string AllStr { get { return Localizer.GetString("Resources.Order.Status", "all", "all"); } } 
```

问题真的是……为什么要添加这些来实现 100% 的代码覆盖率？100% 的代码覆盖率并不能告诉开发人员有关项目的任何信息。对于你的经理来说，这是一个吹牛的要点。

# segmentation-fault - 为什么 Lazarus 会给出“SigSegV”错误？(HydraDM, HydraDM64)

> ID：15889954
> 
> 赞同：0
> 
> 时间：2013-04-08T22:13:00.667
> 
> 标签：segmentation-fault, lazarus

我创建了一个空的 Lazarus 项目并尝试编译它以测试我的 Windows 7 PC 上的编译器设置。尽管这是一个没有任何特定设置的全新安装，但当我在 Lazarus 环境中关闭二进制文件时，调试器给了我一个“外部错误：SigSegV”。在那之后，我被扔进了装配屏幕。

此错误仅在使用 Lazarus 时发生。在 Windows 下启动应用程序不会产生任何错误或延迟应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:13:00.667

在互联网上进行一些研究后，我发现进程 'HydraDM.exe' 和 'HydraDM64.exe' 是造成此错误的原因。杀死两个进程后，程序在 Lazarus 中运行良好。

# ruby - 在应用程序布局中有条件地渲染部分

> ID：15889956
> 
> 赞同：0
> 
> 时间：2013-04-08T22:13:01.440
> 
> 标签：ruby, ruby-on-rails-3, renderpartial

在 Rails 3 应用程序布局中，我包含部分用于 Flash 消息。虽然这在大多数情况下都可以，但有一个视图我需要在另一个地方显示 Flash 消息；layouts/application.html.erb 中有没有办法说类似

```
<%= render 'layout/messages' unless somecondition %> 
```

在某些情况下能够检测到我在“myview/index”中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:15:07.543

当然，~~使用`params[:controller]`并且`params[:action]`~~实际上您应该使用`controller_name`并且`action_name` [根据 Rails 文档](http://guides.rubyonrails.org/action_controller_overview.html#routing-parameters)

```
<%= render 'layout/messages' 
  if controller_name == 'myview' && action_name == 'index' %> 
```

# php - mysql，回显内容时显示文本格式？

> ID：15889959
> 
> 赞同：0
> 
> 时间：2013-04-08T22:13:12.440
> 
> 标签：php, mysql, css, format

我试图回显存储在我的 mysql 表中的文本，“内容”列中的文本已格式化，即有中断。

出于某种原因，当我回显文本时，文本显示为一个连续的结果，并且我想在回显时保留文本格式/中断，有没有办法可以做到这一点？

桌子：

```
id  |  user  |      content  
1        5          Hello,
                    Hows you today?

2        4          tEXT 
```

php

```
<?php
$message_set = read_message();
while ($message = mysql_fetch_array($message_set)) { 

<div class="message_content">
<? echo "{$message['content']}"; ?>
</div> 
```

css

```
.message_content{
    margin-left:90px;
    padding-top:9px;
    padding-right:15px;
    padding-bottom:20px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:19:53.783

文本显示为一个连续的结果，因为这是默认情况下在 HTML 中处理换行符的方式 PHP 默认将输出作为 HTML 发送到浏览器。你必须要么

*   将换行符转换为 HTML`<br>`标记（例如使用[`nl2br()`](http://www.php.net/manual/en/function.nl2br.php)），或
*   使用 CSS 设置样式，`<div>`使 HTML 中的换行符在浏览器中显示为换行符（使用`white-space: pre`规则），或者
*   将查询结果包装在`<pre>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:16:37.083

从 css3 开始，您可以换行字符：

CSS：

```
white-space:pre-line 
```

[https://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

# c# - 使服务器-客户端无限工作

> ID：15889966
> 
> 赞同：0
> 
> 时间：2013-04-08T22:13:48.523
> 
> 标签：c#, client-server

如何使服务器和客户端无限运行并能够交换数据（意思是，直到应用程序关闭），而不是只运行一次信息交换。尝试过`while(true)`但可能没有把它放在正确的位置，然后我无法真正达到关闭和停止套接字和侦听器的方法。这是服务器的一些代码：

```
public static void StartServer()
        {
            try
            {
                IPAddress ip = IPAddress.Parse("192.168.1.11");
                TcpListener myListener = new TcpListener(ip, 8000);

                myListener.Start();

                Socket s = myListener.AcceptSocket();

                byte[] b = new byte[100];
                int k = s.Receive(b);

... some other actions ...

                s.Close();
                myListener.Stop();
            } 
```

然后`Main()`我在哪里调用它。与客户是同样的故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:22:42.687

您可以创建一个无限循环，其中包含处理数据的 Receive 函数，然后返回接收。这样，服务器总是排除来自客户端的数据，直到服务器或客户端终止。

```
while(true)
{
       byte[] buffer = new byte[100];
       s.Receive(buffer);
       //Do something with data...
} 
```

请注意，因为在您当前的设计中仅支持一个客户端。如果您想支持多个客户端，请考虑使用线程。

# knockout.js - SignalR & Knockout 父子回调问题

> ID：15889969
> 
> 赞同：0
> 
> 时间：2013-04-08T22:14:02.757
> 
> 标签：knockout.js, signalr, signalr-hub

我有以下 javascript 视图模型（需要重构，但我希望首先让一切正常运行），并且设置是一个 MessagesViewModel ，它包含一个 MessageViewModels 的集合，**而**MessageViewModel**包含**一个**FeedbackViewModels**的集合。发布新消息时，一切正常，集线器回调并更新 UI。问题是当我向评论添加反馈时，反馈会保留在数据库中，但不会调用回调 - 请参阅代码：

```
public bool AddMessageFeedback(string txtFeedbackComments, string hdnMessageId, int userId)
    {
        bool result = false;
        try
        {
            var message = new Message
                {
                    SDUID = userId,
                    MessageText = txtFeedbackComments,
                    MessageDate = DateTime.Now.Date,
                    MessageTime = Convert.ToDateTime(DateTime.Now.TimeOfDay.ToString()),
                    Poster = UserManager.GetItem(userId),
                    MessageDateAsString = DateTime.Now.Date.ToString(),
                    MessageTimeAsString = DateTime.Now.TimeOfDay.ToString(),
                    MessageDay = DateTime.Now.DayOfWeek.ToString()
                };

            MessageManager.AddMessageFeedback(message, Convert.ToInt64(hdnMessageId));

            Clients.All.messageFeedbackAdded(message);
            result = true;
        }
        catch (Exception)
        {
            Clients.Caller.raiseError("Unable to add feedback.");
        }

        return result;
    } 
```

视图模型

```
$(function () {

    $(function () {

        function messageFeedbackViewModel(feedbackText, poster, messageDay, messageDate, messageTime, owner) {
            this.poster = poster;
            this.feedbackText = feedbackText;
            this.datePosted = messageDay.substr(0, 3) + ', ' + messageDate.substr(0, 10) + ' ' + messageTime.substr(0, 5);

            var self = this;
        }

        function messageViewModel(MessageID, messageText, SDUID, SportID, poster, sport, feedback, messageDate, messageDay, messageTime, owner) {
            this.hub = $.connection.messagesHub;

            //message variables, initialised from params
            this.MessageID = MessageID;
            this.SDUID = SDUID;
            this.SportID = SportID;
            this.poster = poster;
            this.messageText = messageText;
            this.sport = sport;

            this.datePosted = messageDay.substr(0, 3) + ', ' + messageDate.substr(0, 10) + ' ' + messageTime.substr(0, 5);

            //message feedback collection
            this.messageFeedback = ko.observableArray([]);

            //html variables
            this.newMessageFeedback = ko.observable();

            //reference to message feedback collection
            var messageFeedback = this.messageFeedback;

            var self = this;
            var notify = true;

            //callback from server side hub
            this.hub.client.messageFeedbackAdded = function (newMessageFeedback) {
                self.messageFeedback.push(new messageFeedbackViewModel(newMessageFeedback.MessageFeedbackText, newMessageFeedback.Poster, newMessageFeedback.MessageFeedbackDay, newMessageFeedback.MessageFeedbackDateAsString, newMessageFeedback.MessageFeedbackTimeAsString, self));
            };

            //build message feedback VM's
            if (feedback){
                if (feedback.length > 0) {
                    var mappedFeedbackMessages = $.map(feedback, function (feed) {
                        return new messageFeedbackViewModel(feed.MessageFeedbackText, feed.Poster, feed.MessageFeedbackDay, feed.MessageFeedbackDateAsString, feed.MessageFeedbackTimeAsString, self);
                    });
                    messageFeedback(mappedFeedbackMessages);
                }
            }

            //client side post
            this.createMessageFeedback = function () {
                var innerMessageFeedback = this.newMessageFeedback();
                var userId = $('#userID').val();
                var messageId = this.MessageID;
                this.hub.server.addMessageFeedback(innerMessageFeedback, messageId, userId).done(function () {
                    console.log('message saved!');
                }).fail(function (error) {
                    console.warn(error);
                });
                this.newMessageFeedback('');
            };
        }

        function messagesViewModel() {
            this.hub = $.connection.messagesHub;

            //messages collection
            this.messages = ko.observableArray([]);

            //html variables
            this.newMessageMessageID = ko.observable();
            this.newMessageSDUID = ko.observable();
            this.newMessageSportID = ko.observable();
            this.newMessagePoster = ko.observable();
            this.newMessageMessageText = ko.observable();

            //reference to messages collection
            var messages = this.messages;

            var self = this;
            var notify = true;
            var userId = $('#userID').val();

            //load messages, calling server side hub method
            this.init = function () {
                this.hub.server.getAll(userId);
            };

            //callback from server side hub sending messages to client
            this.hub.client.allMessagesRetrieved = function (allMessages) {
                var mappedMessages = $.map(allMessages, function (message) {
                    return new messageViewModel(message.MessageID, message.MessageText, message.SDUID, message.SportID, message.Poster, message.Sport, message.Feedback, message.MessageDateAsString, message.MessageDay, message.MessageTimeAsString, self);
                });

                messages(mappedMessages);
            };

            //callback from server side hub sending error messages to client
            this.hub.client.raiseError = function (error) {
                $("#error").text(error);
            };

            //call back from server side hub sending new message and pushing to collection
            this.hub.client.messageCreated = function (newMessage) {
                messages.splice(0, 0, new messageViewModel(newMessage.MessageID, newMessage.MessageText, newMessage.SDUID, newMessage.SportID, newMessage.Poster, newMessage.Sport, newMessage.Feedback, newMessage.MessageDateAsString, newMessage.MessageDay, newMessage.MessageTimeAsString, self));
            };

            //client side method from form post
            this.createMessage = function () {
                var selectedSport = $('#ddlSport option:selected').text();

                var message = { messageText: this.newMessageMessageText(), SDUID: userId, SportID: this.newMessageSportID(), Sport: selectedSport };

                this.hub.server.add(message).done(function () {
                    console.log('message saved!');
                }).fail(function (error) {
                    console.warn(error);
                });

                this.newMessageMessageText('');
                this.newMessageSDUID('');
                this.newMessageSportID('');
                this.newMessagePoster('');
            };
        }

        //set up the viewmodel
        var viewModel = new messagesViewModel();
        ko.applyBindings(viewModel);

        //call to initialise
        $.connection.hub.start(function () {
            viewModel.init();
        });
    });
}); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:42:11.857

问题是您`hub.client.messageFeedbackAdded`在启动集线器连接后添加回调。

`hub.client.messageFeedbackAdded`当您创建一个新的回调时会添加回调，该回调`messageViewModel`会在`allMessagesRetrieved`或`messageCreated`触发时发生。这两个事件都在您的集线器连接开始后发生。

如果您*真的*想在开始连接后添加客户端集线器方法，您可以使用[`hubProxy.on( eventName, handler(args...))`](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs-%28No-Proxy%29#hubproxyon-eventname-handlerargs-).

```
$.connection.messagesHub.on("messageFeedbackAdded", function (newMessageFeedback) { /*...*/ }); 
```

然而，这不是你应该做的。在与,和一起调用之前，您应该`hub.client.messageFeedbackAdded`只定义一次。`$.connection.hub.start``allMessagesRetreived``raiseError``messageCreated`

您需要将父消息 ID（可能`hdnMessageId`在服务器上）传递给客户端，`messageFeedbackAdded`以便客户端知道要将反馈添加到哪条消息，但无论如何消息 ID 都是必需的。

如果您使用`hubProxy.on`inside of为每条消息`messageViewModel`添加一个新的处理程序，那么无论反馈实际留给哪`messageFeedbackAdded`条消息，每次后续调用都会调用您的处理程序。`Clients.All.messageFeedbackAdded(message);`这意味着您的客户会显示每条新添加的反馈，每条消息显然不是您想要的。

# java - 为什么这不是工作？字符串值不会改变。递归

> ID：15889970
> 
> 赞同：-6
> 
> 时间：2013-04-08T22:14:08.017
> 
> 标签：java, recursion

```
public class ggg
{
static int y=0;
static int x;

static String h;
public static void main(String [] args)
{

    String s = "hadoyef";
    x = s.length();
    System.out.println(s);
    reverse(s);
    System.out.println(s);
}

public static String reverse(String s){

    if (s.length() == 1){
        //System.out.print(s);
        h = h + s.substring(0,1);
        s=h;
        System.out.println(s);
        return s;
    }
    else{
        h = h + s.substring(s.length()-1,s.length());
        return reverse (s.substring(0, s.length()-1));  

        //System.out.print(s.substring(0,1));

    }
}
} 
```

请帮助我，我不明白为什么 s=h; 部分不工作。从这里忽略它让我发布更多细节并且不知道该说什么，所以我只是漫无目的，直到它起作用，感谢任何帮助的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:15:53.200

当您调用`reverse(s);`时`main`，您不会将结果分配给任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T22:22:38.977

您需要对代码进行 2 处更改。

1.  将静态字符串 h 初始化为：

    ```
    static String h = ""; 
    ```

2.  将 main 方法中的返回值用作：

    ```
    s = reverse(s); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T22:16:56.193

因为您没有使用方法 reverse(s) 的结果；为什么不使用时要返回字符串？

# c# - 调用时异步方法失败

> ID：15889971
> 
> 赞同：-1
> 
> 时间：2013-04-08T22:14:11.887
> 
> 标签：c#, async-await, c#-5.0

我有这个方法

```
public class WebSearcher : IWebSearcher
{
    private static readonly string _rootUri;
    private static readonly BingSearchContainer _bingContainer;
    private static readonly string _accountKey;

    static WebSearcher()
    {
        _rootUri = ConfigurationSettings.Settings.RootUri;
        _bingContainer = new BingSearchContainer(new Uri(_rootUri));
        _accountKey = ConfigurationSettings.Settings.AccountKey;
        _bingContainer.Credentials = new NetworkCredential(_accountKey, _accountKey);
    }

    public Task<IEnumerable<WebResult>> SearchAsynch(string query)
    {
        if (query == null)
        {
            throw new ArgumentNullException("query cannot be null");
        }

        DataServiceQuery<WebResult> webQuery =
            _bingContainer.Web(query, null, null, null, null, null, null, null);

        return Task.Factory.FromAsync(webQuery.BeginExecute(null, null),
            asyncResult => webQuery.EndExecute(asyncResult));
    }
} 
```

我这样称呼它

```
public class Client
{
    public static void Main()
    {
        Search();
    }

    private static async Task Search()
    {
        var tasks = new Task<IEnumerable<WebResult>>[100];
        IWebSearcher webSearcher = new WebSearcher();
        for (var i = 0; i < 100; i++)
        {
            tasks[i] = webSearcher.SearchAsynch(i.ToString());
        }

        await Task.WhenAll(tasks);

        for (var i = 0; i < 100; i++)
        {
            Console.WriteLine(tasks[i].Result.First().Title);
        }
    }
} 
```

代码在WhenAll 行停止执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T23:13:18.447

您需要将 Search 从 async void 更改为 async Task 然后 Wait() 结果在 Main - 否则，它会在任务开始后退出，但没有任何东西在等待它完成。

# c++ - 在命令提示符中忽略以“#”开头的行

> ID：15889973
> 
> 赞同：-1
> 
> 时间：2013-04-08T22:14:31.737
> 
> 标签：c++

我正在编写一个代码，它要求我忽略注释行（即，以# 符号开头的行）直到行尾。我正在使用 linux 用 c++ 编写代码。例如：如果添加两个数字。

```
xxx@ubuntu:~ $ ./add
Enter the two numbers to be added
1 #this is the first number
2 #this is the second number
result: 3 
```

所以注释行可以在任何地方。它只需要忽略整行并将下一个值作为输入。

```
#include <iostream>
using namespace std;
int main()
{
int a,b;

cout<< "Enter the two numbers to be added:\n";
while(cin >>a >>b)
{
if (a == '#'|| b == '#')
continue;
cout << "Result: "<<a+b;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:18:51.973

从您所展示的内容来看，我认为这可能是您想要的。

```
int main()
{
    string comment;
    int nr1,nr2;
    // Read the first number. It should be the first one always. No comment before number!
    cin >> nr1;            

    // See if we can read the second number Successfully. Which means it is an integer.
    if(cin >> nr2) {
    } 
    // Otherwise clear cin and read the rest of the comment line                        
    else {
        cin.clear();           
        getline(cin,comment);
        // Now read the second number from the second line
        cin >> nr2;           
    }
    // Read the rest of second the line.
    getline(cin,comment);   

    cout << "result: " << nr1 + nr2 << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:03:47.110

Will any number of numbers based on the value you give `reqd`. Will also work if the first character in a line itself is `#` - will ask again for that line. Will also read another line if there is no number before the `#.

```
#include <iostream>
#include <sstream>
#include <ctype.h>

using namespace std;

int main ()
{
    const int reqd = 2;
    string sno[reqd];
    int no[reqd];
    int got = 0;
    size_t pos;
    istringstream is;

    cout<< "Enter "<<reqd<<" numbers to be added:\n";
    while(got < reqd)
    {
        getline(cin, sno[got]);
        if((pos = sno[got].find('#')) && isdigit(sno[got][0]))
        {
            is.str(sno[got]);
            is>>no[got];
            ++got;
        }
    }

    int sum = 0;
    for(int i = 0; i < reqd; ++i)
        sum+=no[i];

    cout<<"Result : "<<sum;
    return 0;
} 
```

# android - 具有动态内容的android布局？

> ID：15889978
> 
> 赞同：0
> 
> 时间：2013-04-08T22:14:55.683
> 
> 标签：android

嗨对不起，我搜索但没有找到我可以使用的最佳答案:(这里是描述：我有一个 android 项目，其中有 55 个活动和 55 个布局。（每个活动都有一个布局）。其中许多活动具有相同的风格，我的意思是只有它们的内容发生了变化（例如，其中一个有鱼的图片，另一个有狮子的图片等等）

**编辑：**我已经包含了图片，以便更准确地了解我想要做什么：

[http://i45.tinypic.com/biqmv8.png](http://i45.tinypic.com/biqmv8.png)

所以这是一个问题：

如何使用更少的 xml 布局创建此应用程序？有没有办法拥有动态内容？如果是这样，您能否帮助我或向我展示实现此目的所需的教程？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:25:32.353

您可以通过接收图像 URL 或参数中的 resourceId 的通用 Activity 动态填充通用布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:28:58.263

例子：

```
protected void onCreate(Bundle savedInstanceState) {
    FrameLayout fr = new FrameLayout(this);
    ImageView iv = new ImageView(this);
    iv.setBackgroundResource(R.drawable.yourdrawable);
    fr.addView(iv);
    setContentView(fr);
} 
```

# shell - 从 shell 脚本中的变量运行 shell 命令

> ID：15889979
> 
> 赞同：0
> 
> 时间：2013-04-08T22:14:56.043
> 
> 标签：shell

我正在使用 Linux 编写游戏。

我有shell脚本：

```
//run.sh    
A="string1"
B="string2"
C="string3"

COMMAND_LINE="python ../file.py \"$A\" \"$B\" --flag1 ../file.txt --flag2 $C"
echo "$COMMAND_LINE"
$COMMAND_LINE 
```

//注意'\"'是故意的

我希望 shell 在 COMMAND_LINE 中运行命令。由于某种原因，该命令不起作用，但是如果我将创建并存储在 COMMAND_LINE 中的字符串（回显的字符串）并通过 shell 运行它，则程序可以正常工作。

有什么建议么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:12:43.497

您几乎必须使用以下之一：

```
eval $COMMAND_LINE
sh -c "$COMMAND_LINE" 
```

但总的来说，这是一个令人担忧和危险的过程。如果您负责 in 中的完整字符串`$COMMAND_LINE`（没有用户输入），并且使用显示的值，那么它就足够安全了。如果用户可以将他们自己的 shell 脚本符号引入任何变量（例如`$A`，`$B`或`$C`），那么您将陷入痛苦的世界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:47:48.187

中嵌入的引号`COMMAND_LINE`被视为文字字符；他们没有引用扩展`$A`时的值。`$COMMAND_LINE`确实没有一种好的、安全的方法可以在 POSIX shell 中将变量的值作为命令执行。

如果您正在使用`bash`或其他支持数组的 shell，您可以尝试

```
options=( ../file.py "$A" "$B" --flag1 ../file.txt --flag2 $C )
echo "python ${options[@]}"
python "${options[@]}" 
```

# windows - VBA：将多个 Word 文件合并为一个后，Microsoft Word 进程不退出

> ID：15889980
> 
> 赞同：1
> 
> 时间：2013-04-08T22:15:00.553
> 
> 标签：windows, vba, excel, ms-word

我正在尝试将许多 Word 文件合并为一个。我在 MS Excel 的 VBA 例程中执行此操作。Word 文件都在一个名为“files”的文件夹中，我想在上一层的文件夹中创建一个新文件“combinedfile.docx”。我面临的问题是关于合并文件后 Word 进程的行为方式（在执行 VBA 函数后是否退出）。在某些机器上，此过程工作正常（除了它的第 2 页和最后一页为空白），而在其他一些机器上，合并的文档包含一个空白页，并且进程管理器显示由 VBA 函数启动的 Word 进程仍然跑步。

1.  我不习惯 VBA 编程，正如您在下面的代码中看到的那样，我不知道关闭打开的文档和退出打开的 Word 进程的正确方法。如果有人可以查看我所做的并提出解决此问题的方法，那将非常有帮助。

2.  我也很想知道这是否是合并多个 Word 文件的正确方法。如果有更好的方法，请告诉我。

```
 'the flow:
    '  start a word process to create a blank file "combinedfile.docx"
    '  loop over all documents in "files" folder and do the following:
    '    open the file, insert it at the end of combinedfile.docx, then insert pagebreak
    '  close the file and exit the word process

    filesdir = ActiveWorkbook.Path + "\" + "files\"
    thisdir = ActiveWorkbook.Path + "\"
    singlefile = thisdir + "combinedfile.docx"

    'if it already exists, delete
    If FileExists(singlefile) Then
      SetAttr singlefile, vbNormal
      Kill singlefile
    End If

    Dim wordapp As Word.Application
    Dim singledoc As Word.Document
    Set wordapp = New Word.Application
    Set singledoc = wordapp.Documents.Add
    wordapp.Visible = True
    singledoc.SaveAs Filename:=singlefile
    singledoc.Close    'i do both this and the line below (is it necessary?)
    Set singledoc = Nothing
    wordapp.Quit
    Set wordapp = Nothing

    JoinFiles filesdir + "*.docx", singlefile

    Sub JoinFiles(alldocs As String, singledoc As String)
      Dim wordapp As Word.Application
      Dim doc As Word.Document
      Set wordapp = New Word.Application
      Set doc = wordapp.Documents.Open(Filename:=singledoc)
      Dim filesdir As String
      filesdir = ActiveWorkbook.Path + "\" + "files\"

      docpath = Dir(alldocs, vbNormal)

      While docpath  ""
        doc.Bookmarks("\EndOfDoc").Range.InsertFile (filesdir + docpath)
        doc.Bookmarks("\EndOfDoc").Range.InsertBreak Type:=wdPageBreak
        docpath = Dir
      Wend
      doc.Save
      doc.Close
      Set doc = Nothing
      wordapp.Quit
      Set wordapp = Nothing  
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:50:47.503

我建议通过以下方式优化您的代码：

*   只打开一次 WordApp 并将文件移动到其中而不关闭/重新打开
*   无需预先杀死combineddoc，它将被新文件简单地覆盖
*   不需要 Word.Document 对象，一切都可以在 Word.Application 对象中完成

所以代码变得简单多了：

```
Sub Merge()
Dim WordApp As Word.Application
Dim FilesDir As String, ThisDir As String, SingleFile As String, DocPath As String
Dim FNArray() As String, Idx As Long, Jdx As Long ' NEW 11-Apr-2013

    FilesDir = ActiveWorkbook.Path + "\" + "files\"
    ThisDir = ActiveWorkbook.Path + "\"
    SingleFile = ThisDir + "combinedfile.docx"
    Set WordApp = New Word.Application

' NEW 11-Apr-2013 START
    ' read in into array
    Idx = 0
    ReDim FNArray(Idx)
    FNArray(Idx) = Dir(FilesDir & "*.docx")
    Do While FNArray(Idx) <> ""
        Idx = Idx + 1
        ReDim Preserve FNArray(Idx)
        FNArray(Idx) = Dir()
    Loop
    ReDim Preserve FNArray(Idx - 1) ' to get rid of last blank element
    BubbleSort FNArray
' NEW 11-Apr-2013 END

    With WordApp
        .Documents.Add
        .Visible = True

' REMOVED 11-Apr-2013 DocPath = Dir(FilesDir & "*.docx")
' REMOVED 11-Apr-2013 Do While DocPath <> ""
' REMOVED 11-Apr-2013     .Selection.InsertFile FilesDir & DocPath
' REMOVED 11-Apr-2013     .Selection.TypeBackspace
' REMOVED 11-Apr-2013     .Selection.InsertBreak wdPageBreak
' REMOVED 11-Apr-2013     DocPath = Dir
' REMOVED 11-Apr-2013 Loop

' NEW 11-Apr-2013 START
        For Jdx = 0 To Idx - 1
            .Selection.InsertFile FilesDir & FNArray(Jdx)
            .Selection.TypeBackspace
            .Selection.InsertBreak wdPageBreak
        Next Jdx
' NEW 11-Apr-2013 END

        .Selection.TypeBackspace
        .Selection.TypeBackspace
        .Selection.Document.SaveAs SingleFile
        .Quit
    End With
    Set WordApp = Nothing
End Sub

' NEW 11-Apr-2013 START
Sub BubbleSort(Arr)
Dim strTemp As String
Dim Idx As Long, Jdx As Long
Dim VMin As Long, VMax As Long

    VMin = LBound(Arr)
    VMax = UBound(Arr)

    For Idx = VMin To VMax - 1
        For Jdx = Idx + 1 To VMax
            If Arr(Idx) > Arr(Jdx) Then
                strTemp = Arr(Idx)
                Arr(Idx) = Arr(Jdx)
                Arr(Jdx) = strTemp
            End If
        Next Jdx
    Next Idx
End Sub
' NEW 11-Apr-2013 END 
```

**编辑 2013 年 4 月 11 日** 删除了代码添加数组和冒泡排序逻辑中的原始注释，以保证按字母顺序检索文件

# java - Netbeans/JavaFX 应用程序子类丢失

> ID：15889981
> 
> 赞同：0
> 
> 时间：2013-04-08T22:15:01.247
> 
> 标签：java, netbeans, javafx, ria, netbeans-7.3

当我在 Netbeans 7.3 中创建一个新的 JavaFX 应用程序（并选择“创建应用程序类”）时，没有创建这样的类。甚至没有它的包——只是一个空的默认包。

我假设我可以通过扩展“应用程序”类来手动创建它，但也许这种行为是某些设置异常的症状。

知道为什么会这样吗？顺便说一句，我对 Netbeans 7.1 也有同样的问题。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:33:04.840

我无法复制您的问题。

这对我有用。在 NetBeans 7.3 中：

1.  创建一个新的 JavaFX 项目：

    `File | New Project | JavaFX | JavaFX Application`（点击`Next`）

2.  输入项目名称，例如`TestProject`（点击`Finish）：

    屏幕上有一个选中的复选框`Create application class`。默认应用程序类名称将是`testproject.TestProject` 您可以编辑默认应用程序类名称以更改它以及它所在的包（如果您愿意）。

3.  创建一个骨架应用程序类：

    该类`TestProject`扩展`Application`并驻留在`testproject`包中。

* * *

在同一个项目中创建更多应用程序：

1.  右键单击项目，选择：

    新 | 其他 | JavaFX | JavaFX 主类（单击`Next`）。

2.  输入类名，例如`NewFXMain`

3.  例如，从包下拉列表中选择一个项目包`testproject`（单击`Finish`）。

4.  另一个骨架应用程序类被创建：

    该类`NewFXMain`扩展`Application`并驻留在`testproject`包中。

![新的javafx类](https://i.stack.imgur.com/FP9x1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:38:32.087

问题已解决。显然，当我安装 7.3 并导入我以前的 7.1 项目时，一定有什么东西弄乱了环境，因为许多有用的库也丢失了。我重新安装了 7.3，而无需从以前的版本中导入任何东西，现在一切都像魅力一样工作。

# c++ - 二维整数坐标是否在集合中？

> ID：15889984
> 
> 赞同：1
> 
> 时间：2013-04-08T22:15:10.383
> 
> 标签：c++, set, comparator

我有一个二维整数坐标列表（坐标对）。我想阅读这些内容，然后确定是否已阅读某个点。

整数数据可能落在整数数据类型提供的范围内的任何位置，但实际数据点的数量会很少。因此，使用二维数组来跟踪已读取的点是不切实际的。A`set`似乎是这样做的好方法。

我目前完成此操作的代码如下：

```
#include <set>
#include <iostream>
using namespace std;

class grid_cell{
  public:
    int x,y;
    grid_cell(int x, int y) : x(x), y(y) {}
    grid_cell(){}
    bool operator< (const grid_cell& a) const { return y<a.y || x<a.x; }
};

int main(){
    set<grid_cell> bob;

    bob.insert(grid_cell(1,1));
    bob.insert(grid_cell(-1,1));
    bob.insert(grid_cell(1,-1));
    bob.insert(grid_cell(-1,-1));
    cout<<bob.count(grid_cell(1,1))<<endl;
    cout<<bob.count(grid_cell(-1,1))<<endl;
    cout<<bob.count(grid_cell(1,-1))<<endl;
    cout<<bob.count(grid_cell(-1,-1))<<endl;
} 
```

但是知道出了点问题，因为我插入了一组后来告诉我它不知道的单元格。上面的输出应该都是真的，但是，相反，如下所示。

```
1
1
0 <-?????
1 
```

我怀疑比较器有问题，但不知道如何解决。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:18:14.253

比较确实是错误的。它不满足所需的语义。尝试这样的事情：

```
bool operator< (const grid_cell& a) const { return x<a.x || (x==a.x && y<a.y); } 
```

这是一篇关于这个主题的好文章：

[http://www.drdobbs.com/cpp/a-strategy-for-defining-order-relations/240147625](http://www.drdobbs.com/cpp/a-strategy-for-defining-order-relations/240147625)

# c# - 何时指定约束 `T : IEquatable `即使不是严格要求？

> ID：15889987
> 
> 赞同：5
> 
> 时间：2013-04-08T22:15:30.607
> 
> 标签：c#, generics, type-parameter, type-constraints, iequatable

简而言之，我正在寻找关于以下两种方法中的哪一种应该优先（以及为什么）的指导：

```
static IEnumerable<T> DistinctA<T>(this IEnumerable<T> xs)
{
    return new HashSet<T>(xs);
}

static IEnumerable<T> DistinctB<T>(this IEnumerable<T> xs) where T : IEquatable<T>
{
    return new HashSet<T>(xs);
} 
```

*   赞成的论点`DistinctA`：显然，约束 on`T`不是必需的，因为`HashSet<T>`不需要它，并且因为 any 的实例`T`保证可转换为，它提供与（即两个方法和）`System.Object`相同的功能。（虽然非泛型方法会导致值类型的装箱，但这不是我在这里关心的。）`IEquatable<T>``Equals``GetHashCode`

*   支持 的论点`DistinctB`：通用参数约束虽然不是绝对必要的，但使调用者可以看到该方法将比较 的实例`T`，因此是一个信号，`Equals`并且`GetHashCode`应该正确地工作于`T`。（毕竟，在没有显式实现的情况下定义新类型`Equals`并且`GetHashCode`很容易发生，因此约束可能有助于及早发现一些错误。）

**问题：**是否有既定并记录在案的最佳实践建议何时指定此特定约束 ( `T : IEquatable<T>`)，何时不指定？如果没有，上述论点之一是否有任何缺陷？（在这种情况下，我更喜欢经过深思熟虑的论点，而不仅仅是个人意见。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:47:59.637

虽然我对 Pieter 回答的评论完全正确，但我已经重新考虑了您所指的 Distinct 的确切情况。

这是一个 LINQ 方法契约，而不仅仅是一个方法。

LINQ 旨在成为由各种提供者实现的通用门面。Linq2Objects 可能需要 IEquatable，Linq2Sql 也可能需要 IEquatable，但 Linq2Sql 可能不需要甚至根本不使用，并且完全忽略 IEquatableness，因为比较是由 DB SQL 引擎进行的。

因此，在 LINQ 方法定义层，指定 IEquatable 的要求是没有意义的。它将限制和约束未来的 LINQ 提供者在他们的特定域中确实不需要关心的一些事情，并注意 LINQ 实际上通常都是关于域特定性的，因为很多时候 LINQ 表达式和参数实际上从来没有作为代码运行，但它们会被分析并重新转换为 SQL 或 XPaths 等其他结构。在这种情况下省略约束是合理的，因为您无法真正知道您的未来和未知域提供者将真正需要从呼叫者，召集者。Linq-to-Mushrooms 可能需要使用 IToxinEquality 而不是 IEquatable！

但是，当您设计将明确用作可运行代码的接口/合同时（不仅仅是仅用作配置或声明的表达式树），那么我认为不提供约束没有任何意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:27:21.177

首先考虑何时使用这两种机制中的哪一种可能很重要；我只能想到两个：

1.  当代码被翻译成另一种语言时（无论是 C# 的后续版本，还是 Java 等相关语言，或者 Haskell 等完全不同的语言）。在这种情况下，通过为自动或手动翻译器提供更多信息，第二个定义显然更好。
2.  当不熟悉代码的用户阅读它以了解如何调用该方法时。同样，我相信第二个显然更好，因为它可以轻松地向这样的用户提供更多信息。

我想不出在什么情况下会首选第一个定义，并且它实际上比个人偏好更重要。

别人的想法？

# parsing - ANTLR 不会为简单的计算器语法解析这个简单的输入

> ID：15889991
> 
> 赞同：1
> 
> 时间：2013-04-08T22:15:49.717
> 
> 标签：parsing, grammar, calculator, antlr3

```
grammar TestCSharpParser;

options {
  language=CSharp3;
}

@parser::namespace { Demo.Antlr }
@lexer::namespace { Demo.Antlr }

parse returns [double value]
  :  exp EOF {$value = $exp.value;}
  ;

exp returns [double value]
  :  addExp {$value = $addExp.value;}
  ;

addExp returns [double value]
  :  a=mulExp       {$value = $a.value;}
     ( '+' b=mulExp {$value += $b.value;}
     | '-' b=mulExp {$value -= $b.value;}
     )*
  ;

mulExp returns [double value]
  :  a=unaryExp       {$value = $a.value;}
     ( '*' b=unaryExp {$value *= $b.value;}
     | '/' b=unaryExp {$value /= $b.value;}
     )*
  ;

unaryExp returns [double value]
  :  '-' atom {$value = -1.0 * $atom.value;}
  |  atom     {$value = $atom.value;}
  ;

atom returns [double value]
  :  Number      {$value = Double.Parse($Number.Text, CultureInfo.InvariantCulture);}
  |  '(' exp ')' {$value = $exp.value;}
  ;

Number
  :  ('0'..'9')+ ('.' ('0'..'9')+)?
  ;

Space 
  :  (' ' | '\t' | '\r' | '\n'){$channel = HIDDEN;}
  ; 
```

* * *

语法不会解析简单语句`4/5`或`(4/5)`使用 ANTLRWorks 尝试过。

有谁知道为什么会这样？在我看来，这应该可以正常工作。

它一直给我`NoViableAltException`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:12:11.757

我看到几个与使用 CSharp3 目标相关的问题。

*   CSharp2 和 CSharp3 目标定义常量`Hidden`而不是`HIDDEN`
*   ANTLRWorks 不能用于为针对 CSharp2 或 CSharp3 目标的语法生成解析器。解析器必须由 MSBuild（首选）或使用 Antlr3.exe 生成。这些记录在[ANTLR 3 C# Releases](http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases) wiki 页面上。
*   ANTLRWorks 不能用于测试为 CSharp2 或 CSharp3 目标生成的解析器。解释器或调试器报告的任何结果都不可信。

# python - Pandas 强制矩阵乘法

> ID：15889998
> 
> 赞同：2
> 
> 时间：2013-04-08T22:16:21.330
> 
> 标签：python, pandas, matrix-multiplication, dot-product, dataframe

我想在 DataFrames 与 DataFrames、Dataframes 与 Series 和 Series 与 Series 之间使用 Python Pandas 强制矩阵乘法“方向”。

例如，我尝试了以下代码：

```
t = pandas.Series([1, 2])
print(t.T.dot(t)) 
```

输出：5

但我希望这样：

```
[1 2
 2 4] 
```

Pandas 很棒，但是无法按照我想要的方式进行矩阵乘法是最令人沮丧的，因此我们将不胜感激。

PS：我知道 Pandas 试图隐式使用索引来找到计算矩阵乘积的正确方法，但似乎这种行为无法关闭！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:21:48.867

这里：

```
In [1]: import pandas

In [2]: t = pandas.Series([1, 2])

In [3]: np.outer(t, t)
Out[3]:
array([[1, 2],
       [2, 4]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-09T16:39:22.300

任何人现在可能想要考虑：[pandas.Series.to_frame()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.to_frame.html)。这有点笨拙。

这是原始问题的示例：

```
import pandas as pd

t = pd.Series([1, 2])

t.to_frame() @ t.to_frame().T
# or equivalently:
t.to_frame().dot(t.to_frame().T) 
```

产生：

```
In [3]: t.to_frame().dot(t.to_frame().T)                                        
Out[3]: 
   0  1
0  1  2
1  2  4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T01:43:38.583

yp 找到的解决方案：

[https://github.com/pydata/pandas/issues/3344#issuecomment-16533461](https://github.com/pydata/pandas/issues/3344#issuecomment-16533461)

```
from pandas.util.testing import makeCustomDataframe as mkdf
a=mkdf(3,5,data_gen_f=lambda r,c: randint(1,100))
b=mkdf(5,3,data_gen_f=lambda r,c: randint(1,100))
c=DataFrame(a.values.dot(b.values),index=a.index,columns=b.columns)
print a
print b
print c
assert  (a.iloc[0,:].values*b.iloc[:,0].values.T).sum() == c.iloc[0,0]

C0       C_l0_g0  C_l0_g1  C_l0_g2  C_l0_g3  C_l0_g4
R0                                                  
R_l0_g0       39       87       88        2       65
R_l0_g1       59       14       76       10       65
R_l0_g2       93       69        4       29       58
C0       C_l0_g0  C_l0_g1  C_l0_g2
R0                                
R_l0_g0       76       88       11
R_l0_g1       66       73       47
R_l0_g2       78       69       15
R_l0_g3       47        3       40
R_l0_g4       54       31       31
C0       C_l0_g0  C_l0_g1  C_l0_g2
R0                                
R_l0_g0    19174    17876     7933
R_l0_g1    15316    13503     4862
R_l0_g2    16429    15382     7284 
```

这里的断言是没用的，它只是检查它确实是一个正确的矩阵乘法。

这里的关键似乎是第 4 行：

```
c=DataFrame(a.values.dot(b.values),index=a.index,columns=b.columns) 
```

它的作用是计算 a 和 b 的点积，但强制生成的 DataFrame c 具有 a 的索引和 b 的列，确实将点积转换为矩阵乘法，并且采用 pandas 的风格，因为您保留了索引和列（你丢失了 a 的列和 b 的索引，但这在语义上是正确的，因为在矩阵乘法中你是对这些行求和，所以保留它们是没有意义的）。

这有点尴尬，但如果它与 API 的其余部分一致，这似乎很简单（我仍然需要测试 Series x Dataframe 和 Series x Series 的结果，我将在这里发布我的发现）。

# php - PHP - 搜索字符串的数组

> ID：15889999
> 
> 赞同：1
> 
> 时间：2013-04-08T22:16:22.933
> 
> 标签：php, mysql, arrays, search, for-loop

我有一个带有表单的页面，我将所有复选框发布到数据库中的一个数组中。我的数据库中的值如下所示：“0,12,0,15,58,0,16”。现在我列出了这些数字，一切正常，但我不希望在我的页面上列出零值，我如何能够搜索数组而不列出零值？

我正在分解数组并使用 for each 循环来显示此刻的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:19:32.347

正确的做法是在数据库查询中插入 WHERE 语句：

```
SELECT * FROM table WHERE value != 0 
```

但是，如果您仅限于 PHP，只需使用以下代码 :)

```
 foreach($values AS $key => $value) {
      //Skip the value if it is 0
      if($value == 0) {
        continue;
      }

      //do something with the other values
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:20:53.297

为了清理元素数组，您可以使用该[`array_filter`](http://php.net/manual/function.array-filter.php)方法。

为了清除零，您应该执行以下操作：

```
function is_non_zero($value)
{
    return $value != 0;
}

$filtered_data = array_filter($data, 'is_non_zero'); 
```

这样，如果您需要多次迭代数组，零已经从它们中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:20:51.983

您可以为此使用[array_filter](http://www.php.net/manual/en/function.array-filter.php)。如果要删除自定义条件下的项目，还可以在此函数中指定回调函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T22:21:55.387

也许尝试：

```
$out = array_filter(explode(',', $string), function ($v) { return ($v != 0); }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T22:20:21.563

```
$String = '0,12,0,15,58,0,16';
$String = str_replace('0', '',$String); // Remove 0 values
$Array = explode(',', $String);
foreach ($Array AS $Values) { 
     echo $Values."<br>";
    } 
```

解释：

你有你的复选框，可以说这些值已转换为字符串。使用 str_replace 我们从您的字符串中删除了所有 0 值。然后，我们使用explode 和foreach 循环创建了一个数组。我们正在回显数组的所有值 minux 0 值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T22:47:49.553

单线：

```
$string = '0,12,0,15,58,0,16';
echo preg_replace(array('/^0,|,0,|,0$/', '/^,|,$/'), array(',', ''), $string); // output 12,15,58,16 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T22:33:16.550

有很多方法可以做到这一点，从上面的答案中可以明显看出。

虽然这不是最好的方法，但它的逻辑对于 phpnewbies 来说可能比上面的一些方法更容易理解。如果您需要保留原始值以供以后使用，也可以使用此方法。

```
$nums = '0,12,0,15,58,0,16';
$list = explode(',',$nums);
$newList = array();
foreach ($list as $key => $value) {
    //
    // if value does not equal zero
    //
    if ( $value != '0' ) {
        //
        // add to newList array
        //
        $newList[] = $value;
    }
}
echo '<pre>';
print_r( $newList );
echo '</pre>'; 
```

但是，我对最佳答案的投票投给了上面的@Lumbendil。