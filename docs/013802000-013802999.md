# StackOverflow 问答 13802000-13802999

# javascript - 打开一个新窗口并单击提交表单

> ID：13802006
> 
> 赞同：1
> 
> 时间：2012-12-10T13:33:38.170
> 
> 标签：javascript, jquery

当我点击提交按钮时：

*   首先：打开一个新窗口显示进程（通过ajax调用）*   第二：提交当前表单（处理耗时的工作）

    点击提交以下 JQuery 函数被调用：

    ```
    function submitForm(){
        window.open('displayGetStatus.action?id=' + p_id ); 
        $("#frmStartSomeTask").attr("action","executeDatabaseOperation.action").submit();
    } 
    ```

    **结果**：第二个窗口打开并等待进程启动，但第一个窗口上的表单未提交，因此进程未启动。

    请帮助我怎样才能得到这个？

    提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:41:56.267

将`window.open`调用添加到`onsubmit`表单。在纯 JS...

```
document.getElementById(frmStartSomeTask).onsubmit = function () {
    window.open('displayGetStatus.action?id=' + p_id ); 
} 
```

如果您愿意，可以为 jQuery 修改它：

```
$("#frmStartSomeTask").submit(function () {
    window.open('displayGetStatus.action?id=' + p_id ); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:44:25.503

所以你想打开一个窗口然后提交一个表单？

如果是这样，您的提交功能看起来不正确。使用纯 Javascript 提交表单实际上非常简单...

```
function submitForm() {
    window.open('displayGetStatus.action?id=' + p_id );  
    document.getElementById("frmStartSomeTask").submit();
} 
```

# c# - 锯齿状数组，从列表中填充它们

> ID：13802007
> 
> 赞同：1
> 
> 时间：2012-12-10T13:33:39.873
> 
> 标签：c#, list, c#-4.0, jagged-arrays

用户在文本框中输入一系列值：

```
Textbox 1: 10,9,8,7

Textbox 2: 1,2,3,4 
```

然后我想对这两个字符串进行排序并填充一个`List<string>`. 一旦排序（已经想出如何做那部分），我喜欢创建一个输入的锯齿状数组，如下所示：

```
string[][] Arr = new string[2][];

Arr[0] = new string[] { "10", "9", "8", "7" };
Arr[1] = ..... 
```

但不是手动输入值，id 喜欢使用`List<string>`上面提到的。

这可能吗（到目前为止，我的尝试都失败了）？如果没有，有人可以提出一种可能的替代方法吗？

谢谢你的时间！

编辑：根据答案，我得到了它的工作。再次抱歉，我没有说清楚我所说的排序是什么意思。

```
List<string> tempString = new List<string>();
tempString.Add("10,9,8,7");
tempString.Add("1,2,3");

string[][] Arr = new string[2][];

for (int x = 0; x < 2; x++)
{
    string[] values = tempString[x].Split(',').ToArray();

    Arr[x] = values;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:36:17.100

从字符串创建列表：

```
List<string> list1 = new List<string>(textbox1.Text.Split(','));
List<string> list2 = new List<string>(textbox2.Text.Split(',')); 
```

对列表进行排序：

```
list1.Sort();
list2.Sort(); 
```

现在您可以轻松地从列表中创建数组：

```
string[][] Arr = new string[2][];
Arr[0] = list1.ToArray();
Arr[1] = list2.ToArray(); 
```

* * *

如果您想按其他顺序进行操作，即先排序然后拆分，它将是：

```
List<string> list = new List<string>();
list.Add(textbox1.Text);
list.Add(textbox2.Text);
list.Sort();
string[][] Arr = new string[2][];
Arr[0] = list[0].split(',');
Arr[1] = list[1].split(','); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:36:29.563

```
Arr[0] = textBox1.Text.Split(',');
Arr[1] = textBox2.Text.Split(','); 
```

*编辑*如果您需要对列表进行预处理，您可以这样做：

```
var array1 = textbox1.Text.Split(',').OrderBy(x => x).ToArray();
var array2 = textbox2.Text.Split(',').OrderBy(x => x).ToArray();
// extra processing here
string[][] Arr = new string[2][];
Arr[0] = array1;
Arr[1] = array2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T13:37:29.697

```
string[][] Arr = new string[]{textBox1.Text, textBox2.Text} //<--or "tempString"
                    .Select(s => s.Split(','))
                    .ToArray(); 
```

# xcode - XCode 的自动完成代码会误导程序员吗？

> ID：13802012
> 
> 赞同：2
> 
> 时间：2012-12-10T13:34:08.230
> 
> 标签：xcode, autocomplete, grand-central-dispatch

当我在 XCode 中键入“dispatch_after”时，它会自动完成 GCD 代码，如下所示：

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    <#code to be executed on the main queue after delay#>
}); 
```

让我们看看这个声明：

```
int64_t delayInSeconds = 2.0; 
```

int64_t 是“long long”的同义词，但是这里我们给这种变量delayInSeconds赋值一个double值“2.0”。所以值的小数部分将被丢弃。如果赋值为“0.3”，变量的值将是 0。我认为这个代码模板会误导程序员，正确的代码应该`float delayInSeconds = 2.0;`是我对吗？提前致谢。

# iphone - 工作流 iOS 应用程序/自定义导航 + 标签栏控制器

> ID：13802013
> 
> 赞同：2
> 
> 时间：2012-12-10T13:34:12.083
> 
> 标签：iphone, objective-c, ios, ios5

这是我在这个了不起的社区上的第一篇文章。现在已经浏览了很长一段时间，我完全爱上了它。

我已经学习 iOS 几个星期了，但仍在努力寻找为我正在构建的应用程序实现健壮和稳固结构的最佳方法。我发现“ **UITabBarController** ”是实现我的目标的最佳方式，但我仍然希望标签栏消失并制作我自己的“极端”自定义导航。自定义导航将是一个带有视图 的**UIViewController**`UIButtons` ，并且该视图包含.

所以这出现在我的**AppDelegate.m**中：

```
// ASSIGN CUSTOM NAV & TAB BAR CONTROLLER 
[self.window setRootViewController:tabBarController];
[tabBarController.view addSubview:customNavController.view]; 
```

我的**AppDelegate.h**中有这个：

```
@property (strong, nonatomic) CustomNavigationViewController* customNavController;
@property (strong, nonatomic) UITabBarController* tabBarController; 
```

这是正确的方法吗？所以我总是可以去我的`AppDelegate` ，让我`customNavController`可以发送消息到.. 还有我的，例如`tabBarController`设置属性。`selectedIndex`

所以主要问题仍然存在：我有一个`UITabBarController`（保存应用程序的所有部分）和一个`UIViewController`（自定义导航），我希望他们能够**互相交谈**。

更新：这是我如何看待脑海中流程的方案截图： [https ://www.dropbox.com/s/5k49pe2idn6zxcd/ios_customnavigation_scheme.png](https://www.dropbox.com/s/5k49pe2idn6zxcd/ios_customnavigation_scheme.png)

欢迎任何技巧/提示！好奇你们想出什么办法。在此先感谢，Y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:05:35.693

我不太确定您打算如何在您的应用程序中使用这些控制器，或者为什么需要它们相互通信，但您可以将 UINavigationControllers 嵌入到 UITabBarController 的每个“选项卡”中。如有必要，您还可以在您的客户视图中隐藏标签栏（如果您搜索该网站，则会有很多问题/答案）。然后，这些内置控制器将处理视图更改，而无需您处理细节，当然比滚动您自己的控制器要容易得多。

如果您还没有，我会查看有关 MVC 的 Apple 文档，因为它可能会帮助您做出一些设计决策。

祝你好运。

# jquery-ui - 在表格单元格中存储和访问 div 的数据

> ID：13802019
> 
> 赞同：3
> 
> 时间：2012-12-10T13:34:40.977
> 
> 标签：jquery-ui, jquery, html

[http://fiddle.jshell.net/kBFU7/2/](http://fiddle.jshell.net/kBFU7/2/) 在代码中，我通过jQuery创建了一个动态表。我还为每个表格单元格设置了一个 div。我希望存储和访问这个 div 的数据，例如，每个 div 的行和列。

因此，我想就如何存储这些数据提出一些建议。[我已尝试按照此链接http://time2hack.blogspot.sg/2012/11/jquery-store-access-relative-info-within-HTML-element](http://time2hack.blogspot.sg/2012/11/jquery-store-access-relative-info-within-HTML-element.html#axzz2Ee3iLxCt)的建议为每个 div 创建一个跨度以在其中存储信息。 [html#axzz2Ee3iLxCt](http://time2hack.blogspot.sg/2012/11/jquery-store-access-relative-info-within-HTML-element.html#axzz2Ee3iLxCt)但它似乎不合适，我无法访问回信息。

如果有人能给我一些我可以尝试的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:47:12.213

所以基本上你想创建一个动态表并访问每个 TD 及其数据。为了做到这一点，您不需要任何 div 或 span 放置在这些 TD 中以访问它们的内容（如果这就是您想要的）。最简单的方法是根据它们的行和列位置为这些 TD 中的每一个分配一个 id。这样，您可以循环访问它们中的每一个，或者直接访问它们，或者不访问它们。

下面我写了一个超级简单的方法来实现它。当然，您可以根据需要对其进行自定义或增强。但是你应该明白吗？

（我正在使用你的代码来做到这一点）

```
$(document).ready(function() {
createTable($("#tb1"));
    function createTable(tbody){
      if (tbody == null || tbody.length < 1) return;
      for(var r=0;r<5;r++){
        var trow=$("<tr>");
        for(var c=0; c<5;c++){
            var tcol=$("<td>")
            tcol.attr("id","row"+r+"col"+c); /// assign id to each td

            var cellText = "row " +r + " col " +c 
            $("<div>")
                .text(cellText)
                .appendTo(tcol)

            tcol
                .appendTo(trow)
        }
        trow.appendTo(tbody);
      }
    }    
}); 
```

所以基本上你这样做了：

```
<td id="row1col1"></td>
   <td id="row1col2" ></td> 
```

现在，每当您想访问任何单元格时，请执行此操作

```
$('#row1col1').text();
or
$('#row1col1').html(); 
```

您可以像这样循环访问单元格

```
for(var r=0;r<5;r++){
    for(var c=0;c<5;c++){

       var cellValue=   $('#row'+r+"col"+c).text() // or .html()

         makeAjaxRequest(cellValue); /// send to server or whatever
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:51:10.700

创建 div 时添加唯一 ID：

```
.attr("id","cell-" + r+ "-" + c) 
```

在带有输入的按钮上尝试此代码：

```
$("#btn").bind("click", function(){
  var r = $('#row').val();
  var c = $('#column').val();
  var data = $('#data').val();
  $('#cell-' + r + '-' + c).text(data);        
}); 
```

在我的小提琴上试试：http: [//jsfiddle.net/kBFU7/4/](http://jsfiddle.net/kBFU7/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:40:51.267

您必须将此值作为数组传递，并且必须在后端接收它，请访问此链接 [http://www.aspdotnet-suresh.com/2012/07/aspnet-save-dynamically-created-control.html](http://www.aspdotnet-suresh.com/2012/07/aspnet-save-dynamically-created-control.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T01:54:30.087

访问元素中的数据属性；可以有两种方法。jQuery 通过

> $('#table_cell_div').data('info');

但是这个函数只有在之前创建了 DOM 时才有效

> $(文档).ready();

即 JS 创建的文档元素在`data()`jQuery 的功能中是不可访问的

但是要在 DOM 准备好之后访问这些元素和属性；您可以通过以下代码访问该数据

> $('#table_cell_div').attr('data-info');

# javascript - 正则表达式Javascript所有出现

> ID：13802024
> 
> 赞同：0
> 
> 时间：2012-12-10T13:34:51.647
> 
> 标签：javascript, regex

我想要一个匹配某个模式的字符串中所有出现的正则表达式：

```
\d+ 
```

我的字符串是一个 CSS 规则，所以我知道它以属性开头，应该以分号结尾。我想得到中间的东西。

例如，在字符串中：

```
margin: 0px 3px 2px; 
```

我希望得到：

```
0px 3px 2px 
```

我正在尝试类似的东西：

```
margin:\s*?(\d+)px 
```

但它只匹配第一个。那我不知道怎么说了，数字后面，可以是两个字符（em|px），也可以是一个（%）或者什么都没有。

任何正则表达式大师可以帮助我？

我更喜欢打开一个新问题，但这篇文章与我之前的文章有关：[CSS 正则表达式](https://stackoverflow.com/questions/13799460/css-regular-expression)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:44:36.530

怎么样：

```
// returns array: ["0px", "3px", "2px"]
"margin: 0px 3px 2px;".match(/\d+(?:px|em)?/g) 
```

使用`g`（全局）标志来匹配整个字符串，而不是在第一次匹配时停止。

```
// other example - returns array: ["3em", "2px", "39"]
"margin: 3em 2px 39;".match(/\d+(?:px|em)?/g) 
```

为了进一步阐明这是如何工作的：

*   `\d+`匹配数字（一个或多个相互跟随）
*   `(?:px|em)?`跳过捕获（但仍然匹配！）该组 - 查找 px 或 em 字符串。末尾的问号表示可能找不到整个组（当有没有单位的数字时）。

编辑：从下面的评论中回答 OP 问题。

这样做：由于两个原因`new RegExp(/\d+(?:px|em)?/g).exex(mystring)` **不起作用。**首先 - 从另一个创建新的 RegExp 时，您不能提供标志 ( `g`)（这里就是这种情况 -`/\d+(?:px|em)?/g`等效于 RegExp 对象，就像`[]`等效于一样。使用构造`new Array()`创建 RegExp 对象的正确方法是传递两个字符串参数。首先`new RegExp`是模式，第二个是标志。所以上面会变成：`new RegExp('\d+(?:px|em)?', 'g')`。第二件事是该`.exec()`方法总是返回第一个匹配项（不是全部），因此它不适用于您所追求的。

因此，要在脚本中的几个位置重用该正则表达式，您必须将其分配给变量，然后传递给`.match()`函数。它可能看起来像这样：

```
var reg = new RegExp('\d+(?:px|em)?', 'g');
// somewhere down the road...
mystring.match(reg);
// and on some other string...
myotherstring.match(reg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:44:30.330

我认为`margin:\s*?(\d+)px`你应该尝试`margin:.*?;`

有回参考之类的

`margin:(.*?);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:46:31.323

也许你需要这个：

```
var re = /^\w+:(.+);$/;
var st = "margin: 0px 3px 3px;";
re.exec(st); 
```

[或在Regex Tester](http://www.myregextester.com/index.php)中摆弄它。将网站保存在您的收藏夹中以备将来使用

# javascript - JavaScript - 对所有“点击”事件进行一些检查

> ID：13802025
> 
> 赞同：2
> 
> 时间：2012-12-10T13:35:00.097
> 
> 标签：javascript

所以我有一个常规的 onclick 事件附加到几个按钮上，每个处理 onclick 事件的函数都做不同的事情（所以我不能为这两个事件重用相同的函数）。

```
element1.onclick = function() {
    if(this.classList.contains('disabled') {
        return false;
    }
    // For example make an AJAX call
};

element2.onclick = function() {
    if(this.classList.contains('disabled') {
        return false;
    }
    // For example hide a div
}; 
```

我正在为此“禁用”类检查编写重复的代码，我想通过挂钩一些常见的 onclick 检查来消除这种情况，然后在检查通过时触发常规的 onclick 事件。

我知道以下内容不起作用，但我认为它将说明我正在尝试做的事情：

```
document.addEventListener('click', function() {
    // 1\. Do the disabled check here
    // 2\. If the check passes delegate the event to the proper element it was invoked on
    // 3\. Otherwise kill the event here
}); 
```

我没有使用任何 JavaScript 库，也不打算使用，以防有人提出“只需使用 jQuery”类型的答案。

编辑：必须将布尔第三个参数作为 true 传递给 addEventListener，一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:47:34.723

Use [event capturing](http://catcode.com/domcontent/events/capture.html), like so:

```
document.addEventListener('click', function(event) {
    if (/* your disabled check here */) {
      // Kill the event
      event.preventDefault();
      event.stopPropagation();
    }

    // Doing nothing in this method lets the event proceed as normal
  },
  true  // Enable event capturing!
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:41:19.650

您可以创建一个接收回调的通用函数：

```
//check everything here
function handleOnclick(callback) { 
    if(this.classList.contains("disabled")) {
       return false;
    } else {
     callback(); //callback here
    }
}

//and now on every onclick, just pass the custom behavior

element1.onclick = function() {
   handleOnClick(function() { 
        console.log('element1 onclick fire'); // For example hide a div
    });
};

element2.onclick = function() {
   handleOnClick(function() { 
        console.log('element2 onclick fire'); // For example ajax request
    });
}; 
```

**Edit** Based on your latest comment, let me know if this rewrite works for you... only one biding this time.

```
element1.customFunction = function() {
   handleOnClick(function() { 
        console.log('element1 onclick fire'); // For example hide a div
    });
};

element2.customFunction = function() {
   handleOnClick(function() { 
        console.log('element2 onclick fire'); // For example ajax request
    });
};

document.addEventListener('click', function() {
   //1\. grab the element
   //2\. check if it has the customFunction defined
   //3\. if it does, call it, the check will be done inside
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:44:31.617

Sounds like you need to set the `capture` flag to true and then use `.stopPropagation()` on the event if a certain condition is met at the target, f.ex:

```
document.addEventListener('click', function(e) {
    if ( condition ) {
        e.stopPropagation();
        // do soemthing else, the default onclick will never happen
    }
}, true);​​​​​​​​​​​​​​​​​​​​​​ 
```

Here is a demo: [http://jsfiddle.net/v9TEj/](http://jsfiddle.net/v9TEj/)

# sql - 根据表达式限制查询结果

> ID：13802026
> 
> 赞同：1
> 
> 时间：2012-12-10T13:35:03.893
> 
> 标签：sql, ms-access

我在将查询结果限制为相关表值时遇到问题。

```
SELECT Roster.UserID, Roster.[WM DOH], Round((Date()-[WM DOH])/365,2) AS YearsOfService,     tblAccrual.WeeksAccrual
FROM Roster, tblAccrual
WHERE (([tblAccrual]![Years]<[YearsOfService]))
GROUP BY Roster.UserID, Roster.[WM DOH], Round((Date()-[WM DOH])/365,2), tblAccrual.WeeksAccrual; 
```

我的查询应该返回基于服务年限的累积周数。当我运行查询时，它会在 YearsOfService 的输入框中询问。我正在寻找的是根据他们的服务年限为用户提供适当的应计价值回报。当我删除“Where”部分时，它会返回不同年份的服务价值的所有组合。我只想要与他们服务年限相对应的那个。在excel中我有一个公式，比如......

```
Today - Date of Hire / 365 = Years of service
if(years of service <2,0, if(years of service <7,2, if Years of service <15,3, 4))) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:37:41.330

您不能`YearsOfService`在 Where 语句中引用别名，请使用以下内容：

```
WHERE (([tblAccrual]![Years]<Round((Date()-[WM DOH])/365,2))) 
```

从括号的数量来看，您似乎正在使用查询设计窗口进行构建，它可以帮助在别名列下放置一个标准以查看 MS Access 的建议。

# php - ebay-api：GetOrders 缺少一些交易

> ID：13802028
> 
> 赞同：1
> 
> 时间：2012-12-10T13:35:10.487
> 
> 标签：php, ebay-api

我有订单丢失的问题。当我调用 GetSellerTransactions 时，我会收到所有订单。当我用相同的请求调用 GetOrders 时（只有根节点的名称不同），一些（有效的！）订单丢失了。我知道[这一点](https://ebay.custhelp.com/app/answers/detail/a_id/1468/~/getorders-does-not-return-all-transactions)。我的版本是 801。我尝试了各种版本 > 705。

```
<?xml version="1.0" encoding="utf-8"?>
<GetOrdersRequest xmlns="urn:ebay:apis:eBLBaseComponents">
    <RequesterCredentials>
        <eBayAuthToken>[...]</eBayAuthToken>
    </RequesterCredentials>
    <ErrorLanguage>de_DE</ErrorLanguage>
    <DetailLevel>ReturnAll</DetailLevel>
    <WarningLevel>High</WarningLevel>
    <ModTimeFrom>2012-12-06T09:00:00+01:00</ModTimeFrom>
    <ModTimeTo>2012-12-06T12:00:00+01:00</ModTimeTo>
    <Pagination>
        <EntriesPerPage>50</EntriesPerPage>
        <PageNumber>1</PageNumber>
    </Pagination>
</GetOrdersRequest> 
```

是否有一些咒语可以通过 GetOrders 获得所有订单（交易）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:14:11.967

您是否也知道，**GetOrders****在一次调用中**也只返回100 个订单，并且您必须正确使用**分页属性**，如下所述：[Ebay GetOrders API 调用不会根据请求返回订单](https://stackoverflow.com/questions/10800096/ebay-getorders-api-call-does-not-return-orders-as-per-the-request/11156684)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:23:00.660

我`OrderStatus`在您的 xml 中看不到任何字段，您应该传递此值`Active`并`Completed`检索已付款订单（已完成）以及未付款（活动）订单。

您可以在此处查看 ebay 文档：

[http://developer.ebay.com/DevZone/xml/docs/Reference/ebay/GetOrders.html](http://developer.ebay.com/DevZone/xml/docs/Reference/ebay/GetOrders.html)

我还将添加到`OrderRole`设置为卖方的请求字段（因此您可以从已售商品中过滤购买）

根据我的经验，我觉得使用`NumberOfDays`而不是`ModTime`过滤器更舒服，这根本不会让我处理日期/时间格式。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T23:02:05.933

自从我问这个问题以来已经有一段时间了，所以我提供了一些更新。

如今，电话按“预期”工作。可能是我的版本有问题或其他什么，但与 2012 年完全相同的代码现在可以工作（从版本控制系统中检查并再次测试） - 具有相同的版本号，但顺序不同。

我随机将另一个答案标记为“正确”。

# php - 使用 PHP 删除数据库值，不起作用

> ID：13802034
> 
> 赞同：1
> 
> 时间：2012-12-10T13:35:27.740
> 
> 标签：php, mysql, checkbox, sql-delete

我正在尝试从我的表单中删除多个值（它是一个汽车租赁系统，我想让员工能够从记录中删除汽车）。我是 PHP 新手，但这就是我现在所拥有的。

```
<?php
$link = mysql_connect ("xxxx", "xxxx", "xxxx");
mysql_select_db ("xxxx");

    $query = "SELECT * from car";
    $result = mysql_query ($query);
    echo ("<form action=\"deleting2.php\" method=\"GET\">");
    echo "<table id = 'table-3'>";
    echo "<thead>";
    echo "<th>Car ID</th>
    <th>Car Name</th>
    <th>Fuel Type</th>
    <th>Transmission</th>
    <th>Engine Size</th>
    <th>Doors</th>
    <th>Total</th>
    <th>Available</th>
    <th>Date Added</th>
    <th>Delete</th> ";
    echo "</thead>";
    for ($i = 0; $i < mysql_num_rows ($result); $i ++)
      {        
       $row = mysql_fetch_object ($result);
       echo "<tbody>";
       echo "<tr>";
       echo "<td>$row->ID</td>";
       echo "<td>$row->CARNAME</td>";
       echo "<td>$row->FUELTYPE</td>";
       echo "<td>$row->TRANSMISSION</td>";
       echo "<td>$row->ENGINE_SIZE</td>";
       echo "<td>$row->DOORS</td>";
       echo "<td>$row->TOTAL</td>";
       echo "<td>$row->AVAILABLE</td>";
       echo "<td>$row->DATEADDED</td>";
       echo "<td><input type='checkbox' name='delete[]' value='$row->ID' /></td>";
       echo "</tr>";
       echo "</tbody>";
      }
      echo ("<tr><td colspan='6' align='center'><input type=\"submit\" value=\"Delete  \"></td> </tr></table></form>");
      echo  "</table>";
      mysql_close ($link);
      ?> 
```

现在，当我按下删除按钮时，它会转到表单操作中提到的名为“deleting2.php”的 php 页面，该页面具有以下代码：

```
<?php
$link = mysql_connect ("xxxx", "xxxx", "xxxx");
mysql_select_db ("xxxx");

$ID='$_GET[ID]';

// DELETE ANY RECORDS IN DATABASE
for ($i = 0; $i < @mysql_num_rows ($result); $i ++)
{
if(isset($_GET['delete[]']) && $_GET['delete[]']=='$row->ID');
{
   $query=("DELETE FROM car WHERE ID='$_POST[ID]'");
    $result1 = mysql_query($query);
}
}
mysql_close ($link);

?> 
```

问题是，它没有从我的数据库中删除任何内容。处理deleting2.php时地址栏中的URL为：

> [http://www.computing.northampton.ac.uk/~11430900/a1/webpages/deleting2.php?delete[]=6](http://www.computing.northampton.ac.uk/~11430900/a1/webpages/deleting2.php?delete[]=6)

据我所知，选择票的价值。在这里，我选中了对应的 ID 值为 6 的复选框。因此，复选框确实有效，它只是不对数据库做任何事情，不会删除该值。我尝试了很多教程，但我无法使用复选框将其删除。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:55:00.873

如您的问题中所述，您不需要通过以下循环进行迭代

```
for ($i = 0; $i < @mysql_num_rows ($result); $i ++)
{
if(isset($_GET['delete[]']) && $_GET['delete[]']=='$row->ID');
{
   $query=("DELETE FROM car WHERE ID='$_POST[ID]'");
    $result1 = mysql_query($query);
}
}
mysql_close ($link); 
```

只是到以下。

将表单方法更改为 POST。

使用以下代码。内爆是必要的，因为 $_POST['delete'] 将是一个数组

```
if(isset($_POST['delete']) && count($_POST['delete']) > 0) {
    $query=("DELETE FROM car WHERE ID in ('".implode(',',$_POST['delete'])."')");
    $result1 = mysql_query($query);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:41:05.483

您的数据需要清理，但如果您希望 ID 是数字，这应该没问题：

```
$id = (int)$_GET['ID'];    
$query=("DELETE FROM car WHERE ID=$id"); 
```

您确实需要查看其余代码以进行[SQL 注入](https://www.google.co.uk/search?q=sql%20injection%20php&oq=sql%20injection%20php&aqs=chrome.0.57j5j0l2j62l2.4066&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:47:47.863

首先，在实现数据库条目删除时要非常小心，因为您最终可能会得到空数据库。

其次，始终清理您的输入以防止`SQL Injection`.

第三，学习[`PDO`](http://php.net/PDO)或至少使用[`mysqli_*`](http://php.net/PDO)函数，而不是`mysql_`像现在不推荐使用的那样，并且可以在任何下一个 PHP 版本中删除。

现在，对于您的问题，您将 ID 值设置为`delete[]`数组值，这意味着您应该这样做：

```
// DELETE THE DESIRED RECORDS IN DATABASE
foreach($_GET['delete'] as $id) {
    $result = mysql_query("DELETE FROM car WHERE ID = '" . mysql_real_escape_string($id) . "'");
    // do something with the $result here ...
} 
```

其他选择可能是只期望整数：

```
// DELETE THE DESIRED RECORDS IN DATABASE
foreach($_GET['delete'] as $id) {
    $result = mysql_query("DELETE FROM car WHERE ID = '" . (int)$id . "'");
    // do something with the $result here ...
} 
```

# solr - 运行 solr index 时出错

> ID：13802036
> 
> 赞同：1
> 
> 时间：2012-12-10T13:35:36.557
> 
> 标签：solr, hadoop, nutch

我正在使用以下命令对 nutch 抓取的数据运行 solrindex：

```
bin/nutch solrindex <prep><code>http://127.0.0.1:8983/solr/ /app/hadoop/tmp/crawled_pages/crawldb -linkdb /app/hadoop/tmp/crawled_pages/linkdb /app/hadoop/tmp/crawled_pages/segments/* 
```

我收到以下错误，我无法找到此问题的根本原因。

```
org.apache.solr.common.SolrException: ERROR: [doc=http://www.bbc.co.uk/portugueseafrica/arquivo/index.shtml] unknown field 'cache'

ERROR: [doc=http://www.bbc.co.uk/portugueseafrica/arquivo/index.shtml] unknown field 'cache'

request: <prep><code>http://127.0.0.1:8983/solr/update?wt=javabin&version=2
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
        at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
        at org.apache.nutch.indexer.solr.SolrWriter.write(SolrWriter.java:124)
        at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:55)
        at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:44)
        at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.write(ReduceTask.java:457)
        at org.apache.hadoop.mapred.ReduceTask$3.collect(ReduceTask.java:497)
        at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:195)
        at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:51)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2012-12-10 10:05:49,198 ERROR solr.SolrIndexer - java.io.IOException: Job failed! 
```

有没有人遇到过类似的问题？

我不明白以下错误的根本原因是什么。

```
org.apache.solr.common.SolrException: ERROR: [doc=http://www.bbc.co.uk/portugueseafrica/arquivo/index.shtml] unknown field 'cache' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T12:03:25.693

在 solr_xx_xx/example/solr/conf/schema.xml 中添加了以下行

```
<field name="cache" type="string" stored="true" indexed="false"/> 
```

它工作得很好。

# c# - 发送响应时的事件

> ID：13802037
> 
> 赞同：1
> 
> 时间：2012-12-10T13:35:39.797
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我有一个控制器类，它继承`ApiController`并处理来自客户端的 HTTP 请求。

其中一个操作在服务器上生成一个文件，然后将其发送给客户端。

我试图弄清楚一旦响应完成后如何清理本地文件。

理想情况下，这将通过在向客户端发送响应后触发的事件来完成。

有这样的活动吗？或者我想要实现的目标是否有标准模式？

```
[HttpGet]
public HttpResponseMessage GetArchive(Guid id, string outputTypes)
{
    //
    // Generate the local file
    //
    var zipPath = GenerateArchive( id, outputTypes );

    //
    // Send the file to the client using the response
    //
    var response = new HttpResponseMessage(HttpStatusCode.OK);
    var stream = new FileStream(zipPath, FileMode.Open);
    response.Content = new StreamContent(stream);
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/zip");
    response.Content.Headers.ContentLength = new FileInfo(zipPath).Length;
    response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
    {
        FileName = Path.GetFileName(zipPath)
    };

    return response;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:16:06.433

查看[OnResultExecuted](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuted%28v=vs.98%29.aspx)事件 - 您可以向方法添加自定义过滤器并在那里处理事件。

```
public class CustomActionFilterAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
         ///filterContext should contain the id you will need to clear up the file.
    }
} 
```

Global.asax 中的[EndRequest](https://stackoverflow.com/questions/764298/asp-net-mvc-doesnt-call-global-asax-endrequest)事件也可能是一个选项。

```
public override void Init() {
    base.Init();

    EndRequest += MyEventHandler;
} 
```

# quaternions - 我在哪里可以找到有关使用航位推算的对象状态预测的详细资源？

> ID：13802039
> 
> 赞同：0
> 
> 时间：2012-12-10T13:36:01.473
> 
> 标签：quaternions

我有一个服务器和一个客户端。我有 40 个 opengl 立方体。状态由位置的 3d 向量和 3x3 旋转矩阵（或四元数）描述。

如何发送中间数据包并在这些数据包之间预测客户端上的对象状态（外推）？

对于物体位置，我可以使用速度的线性预测器。如何预测四元数状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:04:24.043

与您对线速度所做的平行的最简单的事情是使用角速度的线性预测器。

如果您有两个四元数**q_0**和**q_t**，表示相隔**t**秒的全局方向，您可以计算两个四元数之间的有限差并使用它来找到可用于外推的角速度。

1.  确保**q_0**和**q_t**之间的内积是非负的。如果它是负数，则否定其中一个四元数的所有分量。这确保了我们不会试图走很长的路。如果您的身体相对于您的采样旋转得非常快，这是一个问题，您将需要一个更复杂的模型来解释先前的角速度并假设最大可能的加速度。我们假设情况并非如此。
2.  然后我们计算相对差异四元数。**dq** = **q_t** * **q_0'**（其中**q_0'**是四元数旋转逆/共轭）。如果你有固定大小的步数，你可以在这里停下来预测未来**t**秒的下一个方向：**q_2t = dq*d_t**。
3.  如果我们可以'向前一步**t的整数倍，我们从****dq**计算旋转角度。四元数和角速度都是方向变化的“轴角”表示的变体。如果围绕单位长度轴**[x,y,z]旋转****Θ**，则其四元数表示为**q** = **[cos(Θ/2), sin(Θ/2)x, sin(Θ/2)y , sin(Θ/2)z]**（使用*w*分量在前的四元数约定）。如果绕轴**[x,y,z]旋转****Θ/t**，则角速度为**v** = **[Θx,Θy,Θz]/t**。所以**v** =*******************Θ[qx,qy,qz]/(t||[qx,qy,qz]||)**。我们可以通过两种方式计算角度：**Θ** = **2acos(qw)** = **2asin(||[qx,qy,qz]||)**。由于第 1 步，这些总是相同的。由于我们需要找到**m** = **||[qx,qy,qz]||，因此数字使使用***正弦变得更好。*无论如何，下一步。*****************
********   如果**m**足够大，那么我们只需找到角速度：

    **v** = **2asin(m)[dq.x,dq.y,dq.z]/(m*t)**

    但是，如果**m**不够大，我们将面临试图除以接近零的数字问题。因此，程序员将使用 sinc() 函数在零附近的泰勒展开，这在这种情况下恰好非常准确。请记住**m** = **sin(Θ/2)**。使用**m<1e-4**，我们可以准确计算**asin(m)/m = 6/(6-m*m)**。然后，您只需将结果乘以**2*[dq.x,dq.y,dq.z]/t 即可**获得角速度。 *呸*。

    *   然后，外推就是将您的角速度乘以经过的时间。然后你往回走，将角度变化转换为四元数并将其乘以**q_t**。******* 

 *****似乎必须有一个更简单的方法......*****

# javascript - 使用 Javascript 检测浏览器类型？

> ID：13802046
> 
> 赞同：0
> 
> 时间：2012-12-10T13:36:25.153
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [使用 javascript 检测浏览器类型](https://stackoverflow.com/questions/2490452/using-javascript-to-detect-browser-type)
> [检测浏览器版本](https://stackoverflow.com/questions/5916900/detect-version-of-browser)

如何检测用户使用的浏览器类型和版本？

我尝试了以下代码，但它不起作用。

```
var browserType = navigator.appName;
Alert(browserType); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:37:21.750

使用小写字母`a`代替`A`.`alert`

```
var browserType = navigator.appName;
alert('the browser type is: ' + browserType); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T13:40:26.157

代替

```
Alert(browserType); 
```

和

```
alert(browserType); 
```

javascript 区分大小写。

但 ：

*   尝试检测浏览器的类型几乎总是错误的。[更喜欢特征检测](http://jibbering.com/faq/notes/detect-browser/)
*   当我们必须时，我们通常探索（使用正则表达式）`navigator.appVersion`或`navigator.userAgent`代替`navigator.appName`.

例如 ：

```
 var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Mini/i.test(navigator.userAgent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:46:54.523

您可以使用以下代码获取浏览器的名称：

```
window.navigator.appCodeName 
```

# vector - 包括 std::vector 到 cython 的问题

> ID：13802050
> 
> 赞同：12
> 
> 时间：2012-12-10T13:36:32.140
> 
> 标签：vector, import, cython

我在使用将矢量类导入 cython 时遇到问题

```
from libcpp.vector cimport vector 
```

当我添加这个并尝试编译我得到的 pyx 文件时

```
python setup.py build_ext --inplace
running build_ext
skipping 'kmc_cy.c' Cython extension (up-to-date)
building 'kmc_cy' extension
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -fPIC -I/usr/include/python2.7 -c kmc_cy.c -o build/temp.linux-x86_64-2.7/kmc_cy.o
kmc_cy.c:254:18: fatal error: vector: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

这是我的 setup.py

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import sys
sys.path.append("/usr/lib64/python2.7/site-packages/Cython/Includes/libcpp")

ext_modules = [Extension("kmc_cy", ["kmc_cy.pyx"])]

setup(
  name = 'kmc_cy',
  cmdclass = {'build_ext': build_ext},
  ext_modules = ext_modules,
) 
```

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T14:02:08.257

与`std::vector`C++ 代码一样，您需要设置正确的语言：

```
 ext_modules = [Extension("kmc_cy", ["kmc_cy.pyx"],language='c++')] 
```

然后`g++`应该使用而不是`gcc`并且文件名应该以`.cpp`or结尾`.cc`。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/2105508/wrap-c-lib-with-cython)。

# c# - 从 GridView asp.net c# 中选择一个单元格值

> ID：13802054
> 
> 赞同：1
> 
> 时间：2012-12-10T13:36:44.760
> 
> 标签：c#, asp.net, gridview

我有一个带有用户的 GridView，我希望能够选择一行的第一列 - 这是带有用户名的。我知道如何处理该`autogenerateselectbutton`属性，但它在我的设计中看起来不太好。所以相反，我想在没有选择按钮的情况下制作它。这是我到目前为止所拥有的：

```
<asp:GridView ID="GridView5" AllowPaging="true" GridLines="None" CssClass="mGrid" PagerStyle-CssClass="pgr" AlternatingRowStyle="alt" runat="server" AllowSorting="True"
                            AutoGenerateColumns="False"
                            Width="750px"
                            CausesValidation="False" OnPageIndexChanging="gridView5_PageIndexChanging"  OnSelectedIndexChanged="gridView5_SelectedIndexChanged" autogenerateselectbutton="True" >
                            <Columns>
                                <asp:BoundField DataField="username" HeaderText="Username" ReadOnly="True" />
                                <asp:BoundField DataField="name" HeaderText="Name" />
                                <asp:BoundField DataField="lastname" HeaderText="Last name" />
                            </Columns>
                            <selectedrowstyle backcolor="LightCyan"
     forecolor="DarkBlue"
     font-bold="true"/>  </asp:GridView> 
```

如果我删除`autogenerateselectbutton`，然后单击一行什么也不做。

这是我的 c# 代码，它从该单元格中获取值并将其存储到一个字符串中，然后我`setUser()`以单元格值作为参数调用该函数。

```
protected void gridView5_SelectedIndexChanged(Object sender, EventArgs e)
{
    GridViewRow row = GridView5.SelectedRow;
    string user = row.Cells[1].Text.ToString();
    setSelectedUser(user);
} 
```

我认为问题出`aspx`在我创建我的文件中`GridView`，但不知道如何在没有`autogenerateselectbutton`设置为 true 的情况下使行可选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:44:38.157

您想使用 RowCommand 方法可以创建一个 asp:ButtonField 列并设置命令名称

```
 protected void GridView1_RowCommand(object sender, System.Web.UI.WebControls.GridViewCommandEventArgs e)
   {
        if (e.CommandName=="MyCommand")
        {    
             int row = int.Parse(e.CommandArgument.ToString());
             var cellText= gvOwner.Rows[row].Cells[1].Text.Trim();
        }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:49:59.643

如果您想获取用户在其中执行任何操作的特定行的选定索引值。那么您必须获取 rowindex 值如果您想从标签控件中获取值然后“

```
Label l=(Label)Gridviewname.rows[e.rowindex].Findcontrol("label name of which you want to get the data")
String s=l.Text;
setselecteduser(l); 
```

如果你想从 TextFiled 中获取值

```
TextField t=(TextField)GridviewName.rows[e.rowindex].FindControl("Textbox Id of which you    want to get the data")
String s=t.Text;
SetSelecteduser(t); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:46:44.897

似乎还可以，但是您的页面在 select 后回发了吗？您是否使用 if(!ispostback) 检查回发控制，因为当页面回发时，gridview 也会，这意味着 grv 将为空。您如何从空 grv 中获取数据，您使用回发控制数据源和数据绑定行的位置...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:47:52.087

放置一个带有选择文本的链接按钮，命令名称为“选择”，并将“用户名”作为命令参数传递。

```
<asp:LinkButton runat="server" ID="lnkStatus" CommandName="Select" 
                             CommandArgument='<%# Eval("username") %>' Text='Select' /> 
```

现在触发 RowCommand 事件：- 从参数中获取用户名，无需从网格中获取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-05T10:10:44.543

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="GridviewDemo.aspx.cs" Inherits="DemoWebApp.GridviewDemo" %>  
<!DOCTYPE html>  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head runat="server">  
    <title></title>  
</head>  
<body>  
    <form id="form1" runat="server">  
        <div>  
            <asp:GridView ID="gvEmployee" runat="server" EmptyDataText="No Records Found" AutoGenerateColumns="false" >  
                <Columns>  
                    <asp:BoundField HeaderText="SNo" DataField="EmpID" />  
                    <asp:BoundField HeaderText="Employee Name" DataField="EmpName" />  
                    <asp:BoundField HeaderText="Age" DataField="EmpAge"  />  
                </Columns>  
            </asp:GridView>  
        </div>  
    </form>  
</body>  
</html> 

protected void gvEmployee_RowDataBound(object sender, GridViewRowEventArgs e)  
{  
    if (e.Row.RowType == DataControlRowType.DataRow)  
    {  
        int age = Convert.ToInt32(e.Row.Cells[2].Text.ToString());  
        if (age >= 25 && age < 30)  
        {  
            e.Row.BackColor = Color.GreenYellow;  
        }  
        if (age == 30)  
        {  
            e.Row.BackColor = Color.LightBlue;  
        }  
    }  
} 
```

# ios - iOS中的图像信息

> ID：13802062
> 
> 赞同：0
> 
> 时间：2012-12-10T13:37:23.823
> 
> 标签：ios, image, matrix, uiimageview, rgb

我想将图像（*UIimageView*）保存为 iOS 中的 RGB 值矩阵。解决此问题的最佳方法是什么？

为了清楚起见，我希望图像中的每个像素对应于从 (0,0) 到 x 和 y 的最大值的矩阵。

有没有人可以提供有关从 iOS 中的图像获取 RGB 值的信息？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:52:59.337

?

0,0,0, 0,0,1, 0,1,0 ... 只需将 3 个整数增加到每个 255

所以例如

```
int r = 0, g = 0, b = 0;
while(YES) {
   if(r<255) r++;
   else if(g<255) g++;
   else if(b < 255) b++;
   else break;

   //get uicolor for rgb and insert pixel into image
} 
```

# mvvm - kendo 将 HTML 元素绑定到网格选定的行/dataItem

> ID：13802068
> 
> 赞同：3
> 
> 时间：2012-12-10T13:37:37.427
> 
> 标签：mvvm, kendo-ui

我有以下情况（使用 KendoUI）：

我有一个绑定到数据源的网格。当我在网格中选择一行时，我调用它的“更改”事件来获取选定的 dataItem e 通过其他 HTML 元素显示其值。

类似于以下内容：

```
$("grid-element").kendoGrid({
    change: setElements
});

function setElements() {
    var grid = $("#grid-element").data("kendoGrid");
    var selectedItem = grid.dataItem(grid.select());

    $("#span-field1").text(selectedItem.field1);
    $("#span-field2").text(selectedItem.field2);
    $("#span-field3").text(selectedItem.field3);
} 
```

我的问题是：是否可以通过 MVVM 或更好的 KendoUI 模型绑定解决方案来实现相同的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:37:09.877

到目前为止，我找到了以下解决方案：

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    gridSelectedItem: null,

    _field1: function() { 
        return this.get("gridSelectedItem.field1"); 
    },
    _field2: function() { 
        return this.get("gridSelectedItem.field2"); 
    }
});

$("#grid-element").kendoGrid({
    change: function(e) {
        var selectedItem = this.dataItem(this.select());
        vm.set("gridSelectedItem", selectedItem);
    }
});

=== HTML ===
<span data-bind="text: _field1"></span>
<span data-bind="text: _field2"></span> 
```

有没有更好的办法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:00:13.173

确实，你在正确的轨道上，

以下是我可以建议您尝试的方法：

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    gridSelectedItem: null    
});

$("#grid-element").kendoGrid({
    change: function(e) {
        var selectedItem = this.dataItem(this.select());
        vm.set("gridSelectedItem", selectedItem);
    }
});

=== HTML ===
<span data-bind="text: gridSelectedItem.field1"></span>
<span data-bind="text: gridSelectedItem.field2"></span> 
```

它应该稍微紧凑一些。

# java - 如何防止消费者中的微小竞争条件

> ID：13802076
> 
> 赞同：0
> 
> 时间：2012-12-10T13:38:05.340
> 
> 标签：java, concurrency, race-condition

在我的应用程序中，发生了两件事：

*   各种线程产生工作。
*   有一个函数（但不是 1 个持续运行的线程）消耗这些作业。此功能由生产者启动，但被锁定，因此它只运行一次。

例如，生成了一个作业：

```
addJobToDatabase(...);
triggerPass(); 
```

这就是消费者功能的启动方式：

```
public void triggerPass() {

    // prevent running more than once
    if (onceLock.tryLock()) { // onceLock is a ReentrantLock
        try {

            while (haveJobs()) {
                doJobs();
            }

        } finally {
            onceLock.unlock();
        }
    } else {
        log.info("Pass triggered, but already running");
    }

} 
```

现在，这里可能存在一个很小的竞争条件。如果

*   线程 A 已离开`while`但尚未完成`onceLock.unlock()`
*   线程 B 会`onceLock.tryLock()`返回 false

...线程 B 的作业直到稍后调用 triggerPass(); 才会执行；

虽然我怀疑它会在实践中给我带来麻烦，但这个小差距可以为了正确性而缩小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:19:32.737

不幸的是，在这种设计中，竞争条件是不可避免的。想要它是正确的吗？你为什么不创建像迭代器或队列之类的东西，其中读-修改-写操作是单个原子操作？

```
public void triggerPass() {
    Job job = null; 
    while ((job = jobIterator.next()) != null) {
        doJob(job);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:48:06.410

我想我已经通过替换来解决`tryLock()`它`tryLock(1, TimeUnit.SECONDS)`。但这并不好，如果 和 之间的延迟超过 1 秒（谁知道数据库中发生了什么），这甚至不是万无一失`there are no more jobs`的`unlock()`。

# php - 解析使用 POST 导航到下一页的页面

> ID：13802090
> 
> 赞同：1
> 
> 时间：2012-12-10T13:38:44.160
> 
> 标签：php, html, parsing, post, webpage

我一直在寻找这个问题的答案，因为我还没有找到答案，所以我在这里提出这个问题。

有很多网页使用 GET 在页面之间导航，例如你可以得到类似 www.google.com?q=cars&p=2 的东西。当网页使用此信息时，很容易解析所有搜索结果，您只需通过将 p 设置为不同的值来遍历所有页面。

我想知道的是，有人知道如何用 POST 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:46:33.927

Pphoenix，您可以通过 CURL 发出一个帖子请求，并通过正则表达式解析答案以捕获下一个帖子参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:13:01.420

正如我所看到的，无论您是通过 POST 还是 GET 请求页面，它对 PHP 并没有太大的影响。这与您从 FE 提交请求（和响应）的方式有关。如果您有常规链接标签要导航，则必须添加 Javascript 事件来拦截对这些链接的调用，然后通过 ajax 和 POST 提交相同的内容。或者，可以用包含隐藏 INPUT 元素和方法设置为 POST 中所有需要的 VAR 的 FORM 替换链接。

PHPwise 你只需要捕获 $_POST 而不是 $_GET 只要正确包含 VAR。

# c# - 应用程序之间的剪贴板传输

> ID：13802095
> 
> 赞同：2
> 
> 时间：2012-12-10T13:39:13.317
> 
> 标签：c#, .net, clipboard

神秘的剪贴板问题：

我有一个正在开发的应用程序，它启动一个外部应用程序（作为 System.Diagnostics.Process 对象），该应用程序预计会将一些数据（文本）复制到剪贴板。当外部应用程序关闭时，客户端应用程序从剪贴板中检索文本。

问题是，尽管一旦外部应用程序将文本复制到剪贴板，我就可以将其粘贴到记事本中，但客户端应用程序会从剪贴板获取空字符串。

外部应用代码：

```
 private void btn1_Click(object sender, EventArgs e)
    {
        //copy text pane to clipboard
        DataObject obj = new DataObject();
        obj.SetData(tbText.Text);
        System.Windows.Forms.Clipboard.SetDataObject(obj);
    } 
```

客户端应用代码：

```
 string returnedValues = string.Empty;

        System.Windows.Forms.IDataObject data = System.Windows.Forms.Clipboard.GetDataObject();
        if (data != null && data.GetDataPresent(System.Windows.Forms.DataFormats.Text) == true)
        {
            returnedValues = (string) data.GetData(System.Windows.Forms.DataFormats.Text, true));
        } 
```

数据对象始终为空，即使剪贴板中有文本并且我可以将其粘贴到其他应用程序中。

任何人都可以指出客户端应用程序代码中的缺陷吗？为什么即使剪贴板上有数据，“数据”总是为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:45:47.440

当剪贴板中的所有内容都是复制为文本的字符串时，您必须将其检索为

```
Clipboard.GetText() 
```

并检索其他类型的对象，您可以使用 GetData()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:58:57.337

对于文本，你真的应该使用`SetText()`and `GetText()`。并确保覆盖剪贴板的当前内容是用户在您的场景中所期望的。如果不是，您应该改用进程间通信，参见例如[What is the simple method of inter-process communication between 2 C# processes?](https://stackoverflow.com/questions/528652/what-is-the-simplest-method-of-inter-process-communication-between-2-c-sharp-pro)

# php - 如何在php中每隔n次更改一次字符串

> ID：13802100
> 
> 赞同：1
> 
> 时间：2012-12-10T13:39:30.457
> 
> 标签：php, wordpress, foreach

JetPack by Automatic 是一款适用于 WordPress 用户的免费图像编辑 SaaS 工具。它的众多功能之一是您可以更改返回的图像 url 的子域，以增强多个 src 的并行加载。三个域选项是：“i0”、“i1”和“i2”。

如果每张照片都出现在 foreach 语句中，我如何在三个子域之间旋转，以便 img1 和 img4 使用“io”，img2 和 img5 使用“i1”，img3 使用“i2”？

```
foreach ($images as $attachment) {

    // If using Photon select full-size photos
    if ( $use_photon == 'one' )
        print $before_img . '<img src="http://i1.wp.com/'. str_replace('http://', '', $$fullsizeurl ) . $resize_img_to .'">' . $after_img;

    // Else select 'medium' thumbnail
    else
        print $before_img . wp_get_attachment_image( $attachment->ID, 'medium' ) . $after_img;

} // foreach 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:45:18.140

在图像的索引上使用“%”运算符。这是最好的方法。

```
foreach ($images as $i => $attachment) {

    $host = 'i' + ($i % 3);
    // If using Photon select full-size photos
    if ( $use_photon == 'one' )
        print $before_img . '<img src="http://'. $host .'.wp.com/'. str_replace('http://', '', $$fullsizeurl ) . $resize_img_to .'">' . $after_img;

    // Else select 'medium' thumbnail
    else
        print $before_img . wp_get_attachment_image( $attachment->ID, 'medium' ) . $after_img;

} // foreach 
```

# sharepoint - 将电子表格上传到 sharepoint 并仅使少数字段可编辑

> ID：13802104
> 
> 赞同：0
> 
> 时间：2012-12-10T13:39:49.210
> 
> 标签：sharepoint

我有 sharepoint 2007，并且在上传到 sharepoint 后一直试图使一些字段不可编辑。我在 sharepoint 中进行了很多搜索，但没有找到合适的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:43:43.750

You are describing a requirement for Excel, not SharePoint. Try locking the cells before uploading the file to SharePoint. What you are asking for does not exist in SharePoint.

[http://office.microsoft.com/en-gb/excel-help/freeze-or-lock-rows-and-columns-HP001217048.aspx](http://office.microsoft.com/en-gb/excel-help/freeze-or-lock-rows-and-columns-HP001217048.aspx) [http://spreadsheets.about.com/od/excel2007tips/qt/080428_lockcell.htm](http://spreadsheets.about.com/od/excel2007tips/qt/080428_lockcell.htm)

Best Regards,

Ashley

# r - 日期处理和拆分

> ID：13802105
> 
> 赞同：-3
> 
> 时间：2012-12-10T13:39:52.550
> 
> 标签：r

我有一组数据（csv 格式），看起来像：

```
Date Auto_Index Realty_Index
29-Dec-02 1742.2 1000
2-Jan-03 1748.85 1009.67
3-Jan-03 1758.66 1041.45
4-Jan-03 1802.9 1062.11
5-Jan-03 1797.45 1047.56
...
...
...
26-Nov-12 1665.5 248.75
27-Nov-12 1676.3 257.6
29-Nov-12 1696.7 266.9
30-Nov-12 1682.8 266.55
3-Dec-12 1702.6 270.4 
```

我想在不同时期分析这些数据`R`。有没有办法可以将这些数据分成不同的时期，比如说`2002-2005`，`2006-2009`和`2009-2012`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:08:24.853

正如@user1317221_G 建议的那样，您应该使用 function `cut.POSIXt`。就是这样：

```
d
        Date Auto_Index Realty_Index
1  29-Dec-02    1742.20      1000.00
2   2-Jan-03    1748.85      1009.67
3   3-Jan-03    1758.66      1041.45
4   4-Jan-03    1802.90      1062.11
5   5-Jan-03    1797.45      1047.56
6  26-Nov-12    1665.50       248.75
7  27-Nov-12    1676.30       257.60
8  29-Nov-12    1696.70       266.90
9  30-Nov-12    1682.80       266.55
10  3-Dec-12    1702.60       270.40

# First step, convert your date column in POSIXct using strptime
d$Date <- strptime(d$Date, format("%d-%b-%y"))

# Then define your break points for your periods:
breaks <- as.POSIXct(c("2002-01-01","2006-01-01","2010-01-01","2013-01-01"))

# Then cut
d$Period <- cut(d$Date, breaks=breaks, 
                        labels=c("2002-2005","2006-2009","2010-2012"))
d
         Date Auto_Index Realty_Index    Period
1  2002-12-29    1742.20      1000.00 2002-2005
2  2003-01-02    1748.85      1009.67 2002-2005
3  2003-01-03    1758.66      1041.45 2002-2005
4  2003-01-04    1802.90      1062.11 2002-2005
5  2003-01-05    1797.45      1047.56 2002-2005
6  2012-11-26    1665.50       248.75 2010-2012
7  2012-11-27    1676.30       257.60 2010-2012
8  2012-11-29    1696.70       266.90 2010-2012
9  2012-11-30    1682.80       266.55 2010-2012
10 2012-12-03    1702.60       270.40 2010-2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:33:18.413

如果您想将句点作为数字（而不是文本）进行操作，那么这可能会有所帮助：

```
br <- c("2002","2005","2010","2013")
df$Int <-findInterval(format(as.Date(df$Date,format='%d-%b-%y'),"%Y"),br) 
```

# wordpress - 带有博客文章的 Wordpress 静态首页

> ID：13802109
> 
> 赞同：1
> 
> 时间：2012-12-10T13:40:15.310
> 
> 标签：wordpress, blogs

我创建了我的第一个 wp 主题，现在我的第一页是动态的，只显示帖子。我想改变它，以便我可以首先显示静态文本，然后我希望能够显示我博客中的一篇文章。我有一个完美的例子，去 www.mediaanalys.se 他们有一个静态文本，下面有博客文章。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:53:31.297

我认为这不是静态文本。我建议将其作为自定义分类/类别的**描述**。如果您单击 Sökmotoroptimering（或这四个框中的任何其他分类），您将再次看到该文本。

关于滑块。它认为它是仪表板中可能拥有的插件`settings-panel`。（只是谷歌“免费的 wordpress 滑块”）

PS如果您想自己编写类似的代码，请查看 wp codex [https://codex.wordpress.org/Function_Reference/category_description](https://codex.wordpress.org/Function_Reference/category_description)

您可以尝试先获取所有类别，然后遍历并显示类别名称及其描述...

# jquery - jQuery 1.8.x IE7 .append() .prepend() 问题

> ID：13802117
> 
> 赞同：1
> 
> 时间：2012-12-10T13:40:41.867
> 
> 标签：jquery, internet-explorer-7

我已经看到在整个 SO 中都使用了相同的单词组合，但**没有一个能够**解决*jQuery*和*IE7*无法相处的根本问题。我的应用程序在所有主流浏览器和大于 8 的 IE 版本上都可以正常运行。但是，我的许多公司用户仍然为被称为 IE7 的浏览器感到乏力而苦恼。在最近的测试中，我遇到了这个奇怪的错误......

![IE7 抱怨 jQuery 的 append 和 prepend](../Images/108b84b65c34ef2b1109ea581cd1a040.png)

这显然是对 jQuery 本身的抱怨，而且我认为它已经被 jQuery v1.3.x 根除？所以，我的问题是：

**有解决方法吗？我是否应该在我的应用程序中找到每次出现的`.append()`and`.prepend()`并用不那么优雅的东西替换它们？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:52:59.510

这篇文章的未来读者应该见证，使用 IE8 或更低版本时 jQuery 中的**SCRIPT65535**错误表明正在访问通常超出 jQuery 领域范围的 DOM 节点。就我而言，我试图`<title>`使用`.text()`.

这是 jQuery 和 IE 的一个众所周知且未解决的错误，如下所示：http: [//bugs.jquery.com/ticket/7825](http://bugs.jquery.com/ticket/7825)

请务必检查您的代码中对通常存在于标记之外的节点的引用，例如 、`<HTML>`或`<FRAME>`，您很可能会发现问题。`<HEAD>``<TITLE>``<IFRAME>`

# eclipse - 在 Eclipse 插件中：如何以编程方式突出显示 Java 编辑器中的代码行？

> ID：13802131
> 
> 赞同：2
> 
> 时间：2012-12-10T13:41:48.433
> 
> 标签：eclipse, eclipse-plugin, editor

我正在尝试开发一个 Eclipse 插件，它对 Java 代码进行一些文档检查，并在编辑器中突出显示一些代码行。

为了实现我的目标，我不想在 eclipse 中创建一个新的编辑器，我只是想扩展默认的 java 编辑器以在不满足某些预定要求的方法下画一条线（或突出显示）。

我需要创建一个 PresentationReconciler 吗？如果是，我如何让 JDT 或工作台使用我的协调器。

我从未做过插件开发，这是我的第一次尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:20:35.830

给你几个起点：

*   [**注释**](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/editors_annotations.htm?cp=2_0_13_3)是**JFace 文本编辑器**的 UI 功能，允许您在打开的编辑器中直观地标记某些位置。

*   [**标记**](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/concepts/concepts-11.htm?cp=0_2_6)是**Workbench**的一项功能，更高级。它们是通用的“可能与 Workbench 资源相关联的对象”，它们可以显示在多个位置：例如，在文本编辑器中（作为注释）或问题视图中。

根据您想要做的事情，您可以将插件插入到与其中任何一个相关的扩展点中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:47:47.780

Eclipse Java 编辑器位于`org.eclipse.jdt.internal.ui.javaeditor.JavaEditor`包中。

包名称中的“内部”意味着 Eclipse 开发团队可以更改 Java 编辑器对新版本的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T07:17:01.280

试试这个帮助页面：[Juno Help on syntax highlighting](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/editors_highlighting.htm?cp=2_0_13_6)

在页面的最后，它描述了如何动态添加一个 PresentationReconciler，它用于语法高亮。看看这是否适合您要解决的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:45:13.943

我假设你已经有一个插件项目。

在您的 plugin.xml 中，打开 tab `Extensions`，单击`Add...`，搜索`org.eclipse.ui.editors`，然后您应该会看到一个名为 的模板`Editor`，它将生成一个简单的 xml 编辑器来进行试验和使用。此外，您将能够看到定义自定义编辑器所需的结构。

希望这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T21:28:33.147

我不知道你是否仍然需要这个，但你会想要使用 Annotations 来跟踪你需要突出显示的编辑器的哪些部分。

对于实际进行突出显示的图形效果，您可以通过 PresentationReconciler 进行语法突出显示，但我没有这方面的经验。

我们使用了从[http://editbox.sourceforge.net/](http://editbox.sourceforge.net/)借来的技术，替换了编辑器 Shell 的背景图像。它是开源的，所以检查一下。（我们的代码也可能有所帮助——位于[https://github.com/IDE4edu/EclipseEditorOverlay](https://github.com/IDE4edu/EclipseEditorOverlay)）

# c# - 将项目从 DataTable 传递到 SQL Where 子句 c#

> ID：13802134
> 
> 赞同：-2
> 
> 时间：2012-12-10T13:41:56.483
> 
> 标签：c#

我有一个单列数据表，我想使用 sqlparametercollection 在 SQL where 子句中传递这个数据表。请帮忙。下面是我的代码：

```
public DataTable getCatsByDepts(DataTable _Depts)
    {

        SqlConnection conn = new SqlConnection("Server=ax12d;Database=DemoDataAx;Trusted_Connection=True;");
        SqlCommand cmd = new SqlCommand("Select Level2 as Category from Mtq_RetailHierarchy Where Level1 IN (@Depts)", conn);
        foreach (DataRow row in _Depts.Rows)
        {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("Department", row.Field<string>("Department"));
            //cmd.ExecuteNonQuery();
        }

        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable SelectedCatsData = new DataTable();
        da.Fill(SelectedCatsData);
        return SelectedCatsData;

    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:42:16.813

如果您使用的是 SQL Server 2008 或更高版本，则可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163%28v=VS.110%29.aspx)。

```
SqlConnection conn = new SqlConnection("Server=ax12d;Database=DemoDataAx;Trusted_Connection=True;");

SqlCommand cmd = new SqlCommand(@"Select Level2 as Category 
                                  from Mtq_RetailHierarchy 
                                  Where Level1 IN (SELECT Department 
                                                   From @Depts)", conn);

cmd.Parameters.Clear();
SqlParameter param cmd.Parameters.AddWithValue("@Depts", _Depts);
param.SqlDbType = SqlDbType.Structured;
param.TypeName = "dbo.Departments"; //This can either be a table or a User Defined Type

SqlDataAdapter da = new SqlDataAdapter(cmd);
DataTable SelectedCatsData = new DataTable();
da.Fill(SelectedCatsData);
return SelectedCatsData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:46:25.520

假设您有`DataTable`一列，并且您想在 db-table 中插入所有行。一个简单的方法（也假设 Sql-Server 为 rdbms）：

```
using(var con= new SqlConnection(connectionString))
using(var insertCommand = new SqlCommand("INSERT INTO dbo.Table VALUES(@Colname)", con))
{
    con.Open();
    foreach(DataRow row in table.Rows)
    {
        insertCommand.Parameters.Clear();
        insertCommand.Parameters.AddWithValue("Colname", row.Field<string>("Colname"));
        insertCommand.ExecuteNonQuery();
    }
} 
```

# lotus-domino - 无法从数据库中获取 600,000 个删除存根 ro purge

> ID：13802135
> 
> 赞同：1
> 
> 时间：2012-12-10T13:41:57.793
> 
> 标签：lotus-domino

更新：我已发布：show database mycleandb.nsf，我可以看到仍有 835,000 个删除存根。我似乎无法删除它们。

简介： 我们有一个大型数据库，现在准备开始将其缩减到更易于管理的大小。我删除了文档，但留下了一个似乎无法复制或复制的数据库，收到错误：无法扩展 ID 表 - 内存不足。

详细信息：当前实时数据库中大约有 1,400,000 个文档，我们可以立即将其减少到 650,000 个。通过一些进一步的设计\架构工作，我们可以将其减少到 300,000。此 Web 应用程序集群在 5 台服务器上，其中 1 台是应用程序“中心”，3 台 HTTP\SSO 服务器位于反向代理后面，第 5 台服务器是外部服务的接入点。HUB 每 30 分钟启动一次 PUSH\PULL 复制（无文档限制），日志显示没有复制错误。事务日志设置为服务器上的运行时性能，备份在另一个不在集群中的后端服务器上执行。我们每天进行归档，每天归档大约 1,500 个文档。

到目前为止，将近 2 年过去了，应用程序运行良好......除了一些噩梦 :-)。但是，我们终于可以精简数据库了。

在任何工作之前，我的操作系统都会备份实时数据库，并将其复制到测试服务器。在测试服务器上，我做了一个： CL 复制 mylivedb.nsf mycleandb.nsf 在 mycleandb.nsf 然后我删除了文档以将数据库减少到 650,000 个文档。

我所追求的只是一个新副本，而不是副本，请参阅下面的副本问题，所以我发出了另一个命令……给我一个没有删除存根的新副本，我的理解是 COPY 不会复制 del 存根。 : CL copy mycleandb.nsf mycleandbNEW.nsf ...这也确保了如果网络上有任何流氓副本，我们不会把所有的文档都找回来（不是我们所有的服务器都是 8.5.3，所以我们可以' t 使用数据库属性设置删除存根的截止日期）

但我得到了一个：无法扩展 ID 表 - 内存不足。试过这个： CL copy mycleandb.nsf mycleandbNEW.nsf REPLICA ...同样的事情。

在这里找到我的 mycleandb.nsf 的尝试步骤： [http](http://www-01.ibm.com/support/docview.wss?uid=swg21220384) ://www-01.ibm.com/support/docview.wss?uid=swg21220384 ...同样的事情。

将清除间隔更改为 0 天，如此处所述，还将清除日期设置为未来： [http](http://www-01.ibm.com/support/docview.wss?uid=swg21095683) ://www-01.ibm.com/support/docview.wss?uid=swg21095683 ...同样的事情。

然后运行 ​​a: load compact mycleandb.nsf -B ...同样的事情。

我在这里看到了这个线程，这是一个类似的情况，除了，我们在集群\复制方面没有任何问题......但是！ [http://www-10.lotus.com/ldd/nd85forum.nsf/DateAllFlatWeb/74d3e0f5467f843885257aaf0081abe5?OpenDocument](http://www-10.lotus.com/ldd/nd85forum.nsf/DateAllFlatWeb/74d3e0f5467f843885257aaf0081abe5?OpenDocument)

所以，我有一个数据库，我从中删除了文档，我可以打开它，它似乎可以运行，但我无法复制它。

复制\集群问题：我以前见过这个错误：无法扩展 ID 表 - 内存不足......我所做的是删除我们的主服务器之一，操作系统将数据库复制到有问题的服务器，重新启动。

我一直使用 Admin Client\ Dom 控制台创建新副本，但在这种情况下，每当我这样做时，它都会用文档淹没数据库，但所有服务器上的清除间隔都是正确的。新副本是从 HUB 服务器创建的，它每 30 分钟与所有集群伙伴启动 PUSH\PULL 复制，所以如果这是一个删除存根问题，它会一直表现出来吗？

明天我会 NotesPeek 看看是否还有删除存根，但我不确定如何继续。

如有任何意见或建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:47:34.133

根据我的经验，当修改的文档 + 存根的总数太高时，Domino 中实际清除删除存根的代码无法工作。我认为这可能是 Notes API 内部的一个非常深的限制，再加上必须使用的算法——即查看在清除间隔日期之前修改的所有笔记——一个可能非常大的数字。

您最好的选择可能是制作本地非副本副本并重新部署。

我不久前研究过这个。我发现一些 LotusScript 代码使用 Notes C API 调用来清除发布在各种博客上的删除存根。（我认为原始代码可能来自 Rod Whitely，但我不确定。）我的版本代码如下。

当在 docs + stubs 总数介于 2 到 300 万之间的数据库上运行时，它会得到“无法扩展 ID 表 - 内存不足”。我从未就此联系过 IBM 支持，因为这对我来说实际上只是一个副项目。我最终只是制作了生产数据库的非副本副本，然后将清除间隔设置得足够低，这样存根的数量就再也不会太高了。

```
Declare Private Sub IDDestroyTable Lib wAPIModule Alias "IDDestroyTable" _
( ByVal hT As Long)
Declare Private Function IDScan Lib wAPIModule Alias "IDScan" _
( ByVal hT As Long, ByVal F As Integer, ID As Long) As Integer
Declare Private Function NSFDbOpen Lib wAPIModule Alias "NSFDbOpen" _
( ByVal P As String, hDB As Long) As Integer
Declare Private Function NSFDbClose Lib wAPIModule Alias "NSFDbClose" _
( ByVal hDB As Long) As Integer
Declare Private Function NSFDbGetModifiedNoteTable Lib wAPIModule Alias "NSFDbGetModifiedNoteTable" _
( ByVal hDB As Long, ByVal C As Integer, ByVal S As Currency, U As Currency, hT As Long) As Integer
Declare Private Function NSFNoteDelete Lib wAPIModule Alias "NSFNoteDelete" _
( ByVal hDB As Long, ByVal N As Long, ByVal F As Integer) As Integer
Declare Private Function OSPathNetConstruct Lib wAPIModule Alias "OSPathNetConstruct" _
( ByVal NullPort As Long, ByVal Server As String, ByVal FIle As String, ByVal PathNet As String) As Integer
Declare Private Sub TimeConstant Lib wAPIModule Alias "TimeConstant" _
( ByVal C As Integer, T As Currency)

Function countAndDeleteStubsByOpenDatabase(db As NotesDatabase, deleteFlag As boolean) As Long

        If db Is Nothing GoTo bail

        Dim forever As Currency
        Dim last As Currency
        Dim hT As Long
        Dim RRV As Long
        Dim hDB As Long
        Dim path As String
        Dim nStubs As Long
        Dim ret As integer

        On Error GoTo bail  

        path = Space(1024)
        Call OSPathNetConstruct(0, db.Server, db.FilePath, path)
        Call NSFDbOpen(path, hDB)

        Call TimeConstant(2, forever)
        Call NSFDbGetModifiedNoteTable(hDB, &H7FFF, forever, last, hT)

        nStubs = 0

        ret = IDScan(hT, True, RRV)

        While Not (ret = 0)
            If RRV < 0 Then
                If (deleteFlag = true) Then 
                    NSFNoteDelete hDB, RRV And &H7FFFFFFF, &H0201 
                End If
                nStubs = nStubs + 1
            End If
            ret = IDScan(hT, False, RRV)
        Wend

        IDDestroyTable hT
        NSFDbClose hDB

        If deleteFlag = True Then
            Print "Deleted " + CStr(nStubs) + " stubs for " + db.Filepath  + " on " + db.Server
        Else
            Print "Counted " + CStr(nStubs) + " stubs for " + db.Filepath  + " on " + db.Server 
        End If

        countAndDeleteStubsByOpenDatabase = nStubs

        On Error GoTo 0

        Exit Function

        bail:
            Print "Unexpected error in countAndDeleteStubsByOpenDatabase. Line " + CStr(Erl) + " " + CStr(Err()) + " " + Error(Err())
            countAndDeleteStubsByOpenDatabase = 0

    End Function 
```

我从未尝试过，但我也想到可以修改此代码以仅搜索最近一天的存根，删除它们，然后再返回一天并获取最新的存根，删除那些等等。但是，在 LotusScript 中做起来可能不是那么容易，因为您必须将 C TIMEDATE 结构作为货币字段来处理。您可能必须在 C 中执行此操作。当然，首先删除最新的存根与您在实践中想要执行的操作完全相反，但这种策略可能会解决 idtables 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T12:41:58.490

[http://www.ytria.com/](http://www.ytria.com/)有一个工具 ScanEZ，它具有轻松删除删除存根的功能。我不确定如果您按照 Richard 的建议达到内部 Notes 限制是否会有所帮助，但它可能值得一试。

# facebook-graph-api - Facebook 为我/feed 返回了空数据

> ID：13802138
> 
> 赞同：2
> 
> 时间：2012-12-10T13:42:12.317
> 
> 标签：facebook-graph-api

我对 Facebook 图形 API 有疑问。第一次尝试使用 URL [https://graph.facebook.com/XXXXXXX/home/??access_token=accesstoken&until=1354639369&limit=40](https://graph.facebook.com/XXXXXXX/home/??access_token=accesstoken&until=1354639369&limit=40)获取主页时，一切都很好，我有一个数据。但是，当我在某个时刻通过更改“直到”值（加载旧消息）深入了解提要时，Facebook 为我返回了空结果：

{ “数据”： [

] }

我找不到这个问题的原因。可能是Facebook限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:22:45.607

facebook 提供最近 15 个帖子或一个月的数据，其中一个是最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T09:32:57.247

Facebook（如另一个答案中所述）确实返回了最多一个月的数据。如果您的直到时间戳在过去 > 30 天，它将返回一个空结果。一个解决方案是使用批量请求并一次获得 30 天。

您可以在此处的 Facebook Graph API 文档中阅读有关批量请求的更多信息：[https ://developers.facebook.com/docs/graph-api/making-multiple-requests](https://developers.facebook.com/docs/graph-api/making-multiple-requests)

# java - 有时 showDialog 不起作用

> ID：13802139
> 
> 赞同：1
> 
> 时间：2012-12-10T13:42:14.313
> 
> 标签：java, android, dialog

我有一个**fragmentActivity**，它使用**startActivityForResult(intent, getCode)**来调用一个通过 ftp 发送一些文件的活动。

在**onActivityResult(int requestCode, int resultCode, Intent data)方法中，使用****对话框**显示操作的结果（失败、成功、没有互联网等）。

对话框是这样调用的：

```
Bundle bundle = new Bundle();
bundle.putString(LLAVE_TITULO, alertTitulo);
bundle.putString(LLAVE_MENSAJE, alertMensaje);
showDialog(DIALOG_RESPUESTA, bundle); 
```

并且**onCreateDialog**方法是基本的

```
@Override
protected Dialog onCreateDialog(int id, Bundle bundle)
{
    Builder mAlertDialog = new AlertDialog.Builder(this);
    mAlertDialog.setTitle(bundle.getString(LLAVE_TITULO));
    mAlertDialog.setMessage(bundle.getString(LLAVE_MENSAJE));
    mAlertDialog.setPositiveButton("Aceptar",null);
    return mAlertDialog.create();
} 
```

一切正常，但我注意到当我非常快地显示和关闭对话框时（我可以更快，每秒一次或两次），在某些时候对话框不再显示，直到我关闭活动并重新启动它.. .

这里发生了什么？我怎样才能真正确定对话框会显示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:57:40.093

活动为每个对话框调用一次 onCreateDialog() .. 所以.. 我认为您应该使用 DialogInterface.OnShowListener 进行对话框视图小部件验证

# ruby-on-rails - 将表单结果保存到 CSV - Rails

> ID：13802143
> 
> 赞同：0
> 
> 时间：2012-12-10T13:42:26.263
> 
> 标签：ruby-on-rails, forms, csv

我正在尝试将调查结果保存到 csv 文件，因此每次调查完成时都会在文件中添加一个新行。我有将数据库行导出到 csv 并让您下载它的代码，但我不知道如何开始保存调查，或者这是否可能？我有一个设置了正确标题的 csv 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:03:34.780

当您的`create`函数被调用时（表单提交被定向到的控制器中的操作；在 REST 控制器上创建），您只需在其中添加一些自定义逻辑即可将数据从表单转换为您想要的 csv 结构。

Ruby 内置了[CSV](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)模块，可用于读取和写入 CSV 文件。

所以你想要像下面这样的东西

```
require "csv"

CSV.open "output.csv", "a+" do |csv|
    # example logic from another script how to populate the file
    times.each do |key, value|
        csv << [ key, value ]
    end
end 
```

你只需要定义你想要的行结构，这个例子每行抛出两列。

编辑： a+ 使文件从末尾（新行）写入，而不是截断文件的原始 w+ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:53:52.703

一个可能的解决方案是使用记录器。在您的应用程序控制器中：

```
def surveys
  @@surveys_log ||= Logger.new("#{Rails.root}/log/surveys.log")
end 
```

您想记录调查的任何地方：

```
surveys.info @survey.to_csv # you'll need to implement "to_csv" yourself 
```

这将导致在`surveys.log`您的`log/`文件夹中。

# php - PHP/MySQL：对数据库中的重复事件进行建模，但查询日期范围

> ID：13802146
> 
> 赞同：5
> 
> 时间：2012-12-10T13:42:31.557
> 
> 标签：php, mysql, database

我正在开发一个（我打算成为的）简单的 PHP/MySQL 应用程序。作为其中的一部分，我希望能够对重复事件进行建模，但是我需要能够查询两个日期之间发生的所有事件（包括重复事件）。这些事件只有一个日期，一天中的时间无关紧要。

我一直在研究这一点，并研究了各种方法，包括 [Calendar Recurring/Repeating Events - Best Storage Method](https://stackoverflow.com/questions/5183630/calendar-recurring-repeating-events-best-storage-method) and [Repeating calendar events 和一些最终数学](https://stackoverflow.com/questions/10545869/repeating-calendar-events-and-some-final-maths)。

但是，我在网上找到的任何支持这一点的数据库模式示例似乎只支持查询某一天发生的事件。不支持在一系列日期之间发生的事件。

作为一个抽象的例子

事件表（具有某种重复表示）：

```
Event   | Start Date   |   Repeats
-------------------------------------
Meeting | 10/Dec/2012  |   Every 7 days
Lunch   | 10/Dec/2012  |   Every 1 days 
```

**抽象查询的**目标结果**`SELECT Events BETWEEN 09/Dec/2012 AND 20/Dec/2012`**

 **```
Event   |  Date        |   Repeats
-------------------------------------
Meeting | 10/Dec/2012  |   Every 7 days
Meeting | 17/Dec/2012  |   Every 7 days
Lunch   | 10/Dec/2012  |   Every 1 days
Lunch   | 11/Dec/2012  |   Every 1 days
Lunch   | 12/Dec/2012  |   Every 1 days
Lunch   | 13/Dec/2012  |   Every 1 days
etc...
Lunch   | 20/Dec/2012  |   Every 1 days 
```

是否有支持此类查询的数据库模式？对于两天之间发生的任何事件（包括重复事件），我将如何围绕该模式进行查询？

或者可能是用于重复事件的设计模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:21:36.667

我将创建一个只调用一个 col 的计数表，`id`并用从 0 到 500 的数字填充该表。现在我们可以轻松地使用它来进行选择，而不是使用 while 循环。

```
Id
-------------------------------------
0
1
2
etc... 
```

然后我将事件存储在一个表中`Name as varchar`，`startdate as datetime`并且`repeats as int`

```
Name    | StartDate            |   Repeats
-------------------------------------
Meeting | 2012-12-10 00:00:00  |   7
Lunch   | 2012-12-10 00:00:00  |   1 
```

现在我们可以使用计数表来选择两个日期之间的所有日期：

```
SELECT DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY) as showdate
FROM `tally`
WHERE (DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY)<='2012-12-20 00:00:00')
ORDER BY Id ASC 
```

```
ShowDate
-------------------------------------
2012-12-09 00:00:00
2012-12-10 00:00:00
2012-12-11 00:00:00
2012-12-12 00:00:00
2012-12-13 00:00:00
2012-12-14 00:00:00
2012-12-15 00:00:00
2012-12-16 00:00:00
2012-12-17 00:00:00
2012-12-18 00:00:00
2012-12-19 00:00:00
2012-12-20 00:00:00 
```

然后我们在事件表上加入它来计算开始日期和显示日期之间的差异。我们将结果除以`repeats`列，如果余数为`0`，则匹配。

所有组合变成：

```
SELECT E.Id, E.Name, E.StartDate, E.Repeats, A.ShowDate, DATEDIFF(E.StartDate, A.ShowDate) AS diff
FROM events AS E, (
    SELECT DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY) as showdate
    FROM `tally`
    WHERE (DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY)<='2012-12-20 00:00:00')
    ORDER BY Id ASC
) a
WHERE MOD(DATEDIFF(E.StartDate, A.ShowDate), E.Repeats)=0
AND A.ShowDate>=E.StartDate 
```

这导致

```
Id  | Name       |StartDate             | Repeats   | ShowDate              | diff
---------------------------------------------------------------------------------
1   | Meeting    | 2012-12-10 00:00:00  | 7         | 2012-12-10 00:00:00   | 0
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-10 00:00:00   | 0
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-11 00:00:00   | -1
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-12 00:00:00   | -2
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-13 00:00:00   | -3
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-14 00:00:00   | -4
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-15 00:00:00   | -5
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-16 00:00:00   | -6
1   | Meeting    | 2012-12-10 00:00:00  | 7         | 2012-12-17 00:00:00   | -7
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-17 00:00:00   | -7
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-18 00:00:00   | -8
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-19 00:00:00   | -9
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-20 00:00:00   | -10 
```

现在你可以（而且应该！）加快速度。例如，通过直接将日期存储在表中，您可以直接选择所有日期，而不是使用带有 dateadd 的计数表。您可以缓存并且不必再次计算的每一件事都是好的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-10T14:08:06.247

我不太明白你的目标......也许你正在寻找 SQL 中的 UNIQUE 函数？**

# dreamweaver - 使用正则表达式重新格式化 Dreamweaver 中的所有链接？

> ID：13802147
> 
> 赞同：0
> 
> 时间：2012-12-10T13:42:37.077
> 
> 标签：dreamweaver

我有一个很长的文档，其中包含通常格式的链接，即：

```
<a href="http://www.somelink.com/tosomewhere">Link Text</a> 
```

我需要用以下内容替换所有这样的链接：

```
[Link Text](http://www.somelink.com/tosomewhere) 
```

或者，理想情况下：

```
[Link Text](http://www.somelink.com/tosomewhere "Link Text") 
```

Dreamweaver 正则表达式有可能以某种方式实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:08:00.637

刚刚想通了。

转到查找和替换。输入以下内容：

搜索：

```
<a href="(.*)">(.*)</a> 
```

代替：

```
[$2]($1) 
```

选中“使用正则表达式框”。

点击“全部替换”。

# jquery - 在每个 UL（子菜单）周围添加一个 DIV - 下拉菜单

> ID：13802148
> 
> 赞同：0
> 
> 时间：2012-12-10T13:42:47.840
> 
> 标签：jquery, menu

这对你们中的一些人来说可能很简单，所以，就这样吧。我需要在每个 ul-submenu 周围包装一个 div：

```
<div class="this-is-a-div-arround"></div> 
```

这将是结果：

```
<ul>
   <li><a>1st level </a>
       <ul><li><a>2nd level</a></li></ul> ** -- add div here
   </li>
</ul> 
```

并更改 javascript 以保持菜单正常工作。链接：http: [//j.mp/XJjPfB](http://j.mp/XJjPfB)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:44:30.650

只需使用以下代码：

```
$("ul ul").wrap("<div class='this-is-a-div-arround'/>"); 
```

`$("ul ul")`find all 嵌套`ul`并`wrap`在这些 found 周围添加元素`ul`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:22:51.070

```
$('ul').find('ul').wrap('<div class="this-is-a-div-arround"></div>');​​ 
```

# sql-server - 如果子查询返回太多数据，我应该担心吗？

> ID：13802150
> 
> 赞同：2
> 
> 时间：2012-12-10T13:42:57.917
> 
> 标签：sql-server, memory, subquery, derived

这是示例：

```
 SELECT <columns>   
 FROM (..........<subquery>..........) AS xxx  
 INNER JOIN(s) with xxx.............  
 LEFT OUTER JOIN(s) with xxx........  
 WHERE <filter conditions> 
```

如果我错了，请纠正我：

1.  那`<subquery>`是派生表吗？
2.  如果它返回关于服务器内存的太多数据（比如数百万行）是否有问题，因为我知道 WHERE 子句应用于最终结果集并且即使最终结果有 10 个子查询也让服务器处理太多子查询行？
3.  如果没有内连接（以减少数据）并且只有左外连接怎么办，这是否会使事情变得更糟/更慢，因为它必须与子查询中的所有行进行连接？
4.  如果（2）是一个问题，那么我想到的一种解决方案是通过在其中添加其他联接来限制子查询返回的数据，这会使事情变慢（我已经尝试过了）。对此还有其他想法吗？
5.  如果由于 where 子句依赖于子查询之后的连接，我无法限制子查询的结果怎么办？
6.  为了澄清事情，子查询返回太多数据的原因是因为我正在尝试使用 UNION ALL 组合来自多个表的数据（没有过滤条件），然后，对于子查询返回的每一行，加入以获取我的信息需要在 WHERE 子句中使用它。另一种方法是对子查询内部的每个 UNION ALL 执行您在子查询外部看到的所有连接，是的，这确实限制了结果集，但会产生更多连接，正如我所说，这会减慢速度。换句话说，我必须在执行此操作的子查询之间进行选择：

```
 (
 SELECT * FROM A UNION ALL
 SELECT * FROM B UNION ALL
 SELECT * FROM C...
 ) AS xxx
 left outer join T with xxx 
```

和

```
 SELECT * FROM A
 LEFT OUTER JOIN T ...
 WHERE....
 UNION ALL
 SELECT * FROM B
 LEFT OUTER JOIN T ...
 WHERE....
 UNION ALL
 SELECT * FROM C
 LEFT OUTER JOIN T ...
 WHERE.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:02:24.413

1.  是的。
2.  不，查询优化器将整个查询视为一个块。它不运行派生表，然后对结果运行外部语句。它通过派生表“优化”。
3.  再次，不。拥有派生表并不意味着性能不佳。您始终必须将查询视为一个整体。
4.  这算不上问题。
5.  然后就好了。信任查询优化器。你见过写它的人吗？他们是*可怕*的聪明人。

在每种情况下，都值得查看您的查询执行计划并找出痛点。在可以进行搜索时寻找正在扫描的事物，这通常会给您带来显着的提升。在以下情况下，事物会扫描而不是寻找：

*   没有可搜索的索引
*   您正在寻找的东西是函数的结果（例如`WHERE function(field) = value`）
*   优化器决定扫描实际上更快。

但问题的底线答案是 - 不，如果您单独选择派生表，您不应该担心派生表会包含大量数据。

# python-2.7 - 如何从字典项中删除 'u'(unicode)

> ID：13802151
> 
> 赞同：0
> 
> 时间：2012-12-10T13:43:02.937
> 
> 标签：python-2.7

我正在尝试将字典项转换为列表，但字典项包含要删除的“u”。例如：dictionary={u'test1': u'test1value', u'test2': u'test2value'} 我用过

```
f = dictionary
output_list = f.items()
return output_list 
```

并且 output_list 包含 (u'test1', u'test1value') ,(u'test2',u'test2value')

-> 但是，我期望 out_list 为 ('test1', 'test1value') ,('test2','test2value) 以便我可以将这些值与其他项目进行比较。请提供有关此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:17:19.260

我不确定你的意思。您仍然可以将这些特定的 unicode 字符串与 ASCII 字符串进行比较：

```
>>> u_foo = u'foo'
>>> foo = 'foo'
>>> u_foo == foo
True 
```

如果您不能，请先尝试将字符串编码为不同的字符集。

# c# - 实体框架处理并发

> ID：13802152
> 
> 赞同：2
> 
> 时间：2012-12-10T13:43:10.120
> 
> 标签：c#, entity-framework, entity-framework-4, concurrency

设想：

我有多个帐户。每个帐户都有剩余信用。每个帐户对应多个用户。

我希望 RemainingCredit 字段正确反映剩余信用（我正在使用 EF 抽象出数据库）。

**EG**在初始信用为**X**且 2 个用户登录的情况下，一个花费**A**，一个花费**B**，我希望最终总和为**XAB**（读取/修改/保存的顺序应该无关紧要）。

阅读后，我认为乐观并发处理是我正在寻找的，因为它可以很好地扩展，这对我的场景非常重要。最终过程将类似于：

```
ComputeRemainingCredit(Double amountToBeDeducted) {
    Account acc = context.Accounts.Where(condition)
    ComputeRemainingCreditInternal(acc, amountToBeDeducted);
}

ComputeRemainingCreditInternal(Account acc, Double amountToBeDeducted) {
try {
    acc.RemainingCredit = acc.RemainingCredit - amountToBeDeducted;
    context.SaveChanges();
}
catch (OptimisticConcurrencyException  ex) {
    context.Refresh(RefreshMode.StoreWinds, acc);
    //now I need to rerun the operation
    ComputeRemainingCreditInternal(acc, amountToBeDeducted);
}
} 
```

1.  这是 EF 中乐观并发的正确解释/实现吗？
2.  我的最终目标是更新 RemainingCredit 字段。有没有比 OptimisticConcurrencyException 更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:50:14.837

您需要在表中充当时间戳或版本号的字段，并将其用于乐观并发检查。

假设你有一个`Version`字段。将该字段的`ConcurrencyMode`属性设置为`Fixed`，然后 EF 将为您进行乐观并发检查并`OptimisticConcurrencyException`在必要时抛出一个。

另一种方法是自己完成这项工作——获取当前记录，根据您正在更新的记录中的字段值验证字段值，相应地允许或禁止更新。

**编辑**另见[http://blogs.msdn.com/b/alexj/archive/2009/05/20/tip-19-how-to-use-optimistic-concurrency-in-the-entity-framework.aspx](http://blogs.msdn.com/b/alexj/archive/2009/05/20/tip-19-how-to-use-optimistic-concurrency-in-the-entity-framework.aspx)

**在伪代码中或多或少地**编辑：****

 **```
bool mustRetry = true;
while (mustRetry)
{
    try
    {
        SpendTheMoney(context, parameters);
        mustRetry = false;
    } catch (OptimisticConcurrencyException exc)
    {
        // Do logging if you need, then just swallow the exception
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:11:57.237

作为替代方案，您可以向用户显示一条错误消息，说明操作失败，因为数据已被修改，然后向他显示数据的当前状态。如果这是他/她的意图，那么用户将决定重试该操作。

你可以在这里找到一篇关于实体框架中并发的好文章：

[在 ASP.NET MVC 应用程序中使用实体框架处理并发](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)**

# android - Android：如果应用程序在后台，则在一定时间间隔后退出应用程序

> ID：13802162
> 
> 赞同：0
> 
> 时间：2012-12-10T13:43:35.847
> 
> 标签：android

我想在后台运行一段时间后关闭我的应用程序。我发现了许多在后台关闭应用程序以及如何知道应用程序是否在后台运行的示例，但我没有找到与此相关的任何内容。

我想实现像会话这样的自动注销功能，如果没有与应用程序的交互，那么在特定时间间隔之后应该关闭。

任何想法和建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:27:51.567

这是关于应用程序空闲的，请[在此处查看](https://stackoverflow.com/a/4075857/1039411)。在那里你应该找到一些有用的东西。

# jquery - 我正在尝试在鼠标上显示特定元素上的元素

> ID：13802164
> 
> 赞同：3
> 
> 时间：2012-12-10T13:43:38.147
> 
> 标签：jquery, html

这是 jQuery 函数，当我使用此函数时，它将所有 div 与类`.check`一起应用，我只想应用悬停 div 而不是全部。

```
<script type='text/javascript'>
    $(document).ready(function(){
        $('.pop').hover(function(){
            $('.check').animate({opacity: 'show'});
        }),
        $('.pop').mouseout(function(){
            $('.check').animate({opacity: 'hide'});
        })
    });
</script> 
```

这是函数#pop的html代码是父级，它是子级.check

```
<div class="pop">
    <div class="check">
    </div>
</div>

<div class="pop">
    <div class="check">
    </div>
</div> 
```

这是css代码

```
.pop {
    clear:both;
    float:left;
    margin-bottom:20px;
    width:100px;
    height:100px;
    border:solid 1px green;
    position:relative;
}

.check {
    background:red;
    position:absolute;
    width:100px;
    height:100px;
    display:none;
    top:0;
    left:0;
} 
```

当我使用此代码时，jQuery 函数将全部应用。检查 div，我只想应用一个 div。仅在悬停时检查

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:45:31.667

您的目标是所有这些 - 您只需要当前悬停的容器中的一个：

```
$(document).ready(function() {
    $('.pop').mouseenter(function() {

        // I've thrown in stop() - see http://api.jquery.com/stop/
        $(this).find(".check").stop().animate({
            opacity: 'show'
        });
    });
    $('.pop').mouseleave(function() {
        $(this).find(".check").stop().animate({
            opacity: 'hide'
        });
    });
});​ 
```

[**演示。**](http://jsfiddle.net/WPhqG/3/)

ps，我更喜欢这种更简洁的方法：

```
$(document).ready(function() {
    $('.pop').hover(function() {
        $(this).find(".check").fadeToggle()
    });
});​ 
```

[**演示。**](http://jsfiddle.net/WPhqG/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:46:00.573

尝试将上下文应用于检查类的查询

```
<script type='text/javascript'>
    $(document).ready(function(){
        $('.pop').hover(function(){
            $('.check', this).animate({opacity: 'show'});
        }),
        $('.pop').mouseout(function(){
            $('.check', this).animate({opacity: 'hide'});
        })
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:29:50.297

提这个：

```
$(".pop").hover(
function() {
    $(this).find(".check").animate({
        opacity: 'show'
    });
}, function() {
    $(this).find(".check").animate({
        opacity: 'hide'
    });
});​ 
```

# c++ - c++ solaris中多个文件的编译

> ID：13802167
> 
> 赞同：0
> 
> 时间：2012-12-10T13:43:45.033
> 
> 标签：c++, compiler-construction, compilation, solaris

我有三个简单的文件：

一个类的头文件

```
> cat myhh.hh
#include<iostream>

class helloworld
{
string str;
public:
void start(string &);
void stop(string &);
}; 
```

其对应的cc文件

```
> cat myhh.cc
#include<iostream>
#include "myhh.hh"
using namespace std;

void helloworld::start(string &str1)
{
  cout<< ""function started"<<endl;
}
void helloworld::stop(string &str2)
{
cout<< ""function stopped"<<endl;
} 
```

现在主要功能：

```
> cat mymain.cc 
#include<iostream>

#include "myhh.hh" 

int main()
{

helloworld obj;
obj.start(std::string("XXXX"));
obj.stop(std::string("XXXX"));

}
> 
```

我的主要意图是用这 3 个文件生成 a.out，当我执行它时它应该打印：

```
function started
function stopped 
```

我试图编译，但我得到以下错误。

```
> CC mymain.cc
Undefined                       first referenced
 symbol                             in file
void helloworld::stop(std::basic_string<char,std::char_traits<char>,std::allocator<char> >&) mymain.o
void helloworld::start(std::basic_string<char,std::char_traits<char>,std::allocator<char> >&) mymain.o
ld: fatal: Symbol referencing errors. No output written to a.out
> 
```

我确信我没有掌握正确的基础知识。但这只是我试图学习编译过程的东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:55:56.267

您还需要编译 myhh.cc 并链接生成的对象

```
$CC -c myhh.cc -o myhh.o
$CC -o mymain mymain.cc myhh.o 
```

# ios - 将 FacebookSDK.framework 添加到我自己的静态库中

> ID：13802168
> 
> 赞同：2
> 
> 时间：2012-12-10T13:43:53.933
> 
> 标签：ios, facebook, frameworks, static-libraries

我正在创建一个静态库，我将用于我正在开发的多个项目。我会将静态库构建为 .framework 文件，并将拖放以在其他项目中使用。它工作正常。现在我正在向框架添加更多功能。我将 FacebookSDK.framework 添加到静态库以进行登录，但是当我将框架拖到另一个项目并构建它时，它会引发错误。

```
"FacebookSDK/FacebookSDK.h" file not found. 
```

请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T14:11:09.883

您应该将导入语句更改为

```
#import "FacebookSDK.h" 
```

并将 FacebookSDK.framework 添加到使用您的静态库的项目中。

如果您想将 FacebookSDK.framework 构建到您自己的静态库中。您应该打开 FacebookSDK.framework 并找到所有 .h 和一个名为 FacebookSDK 的文件，并将这些文件添加到您的静态库项目中。

# c++ - CDaoDatabase 断言错误

> ID：13802172
> 
> 赞同：0
> 
> 时间：2012-12-10T13:44:07.163
> 
> 标签：c++, ms-access, mfc

```
CString m_strRemorcaNmb; // value for this string is set before 
CString path = "DB\\dataBase";
CDaoDatabase db;
try
{
    db.Open(path, 0, 0, "");
    CDaoRecordset rs(&db);
    rs.Open(AFX_DAO_USE_DEFAULT_TYPE, _T("SELECT Numar_inmatriculare FROM Masini;"), 0);

    COleVariant searched(m_strRemorcaNmb); 
    BOOL bFound = rs.Seek("=",&searched);
} 
```

在这里，我尝试验证我的数据库 (.mdb) 中是否包含 CString 值。当它到达`BOOL bFound = rs.Seek("=",&searched);`一个`debug assertion failed`错误被抛出。在对话框中点击重试，应用程序会`daocore.cpp`在此行触发断点`ASSERT(m_nOpenType == dbOpenTable);`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:39:10.830

要使用`Seek`你必须有一个表类型的记录集。（请参阅 MSDN： http: [//msdn.microsoft.com/en-US/library/k3tkt1zd%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-US/library/k3tkt1zd%28v=vs.80%29.aspx)）要获得此信息，您必须在打开记录集时指定类型。

例子：

```
rs.Open(CDaoRecordSet::dbOpenTable,"table1"); 
```

如果存在特定记录，这种检查方式非常慢。你通过网络吸取所有记录，然后检查它们。最好在打开之前修改记录集的过滤器，然后检查是否返回了任何记录。

方法一：

```
sql = "SELECT count(*) AS xyz FROM table WHERE Field='value'";
rs.Open(CDaoRecordset::dbOpenSnapshot,sql);
COleVariant count = rs.GetFieldValue(0); 
```

生成记录集的方法 B：

```
rs.m_strFilter.Format("Field = '%s'", value);
rs.Open(CDaoRecordset::dbOpenSnapshot,"table");

if(rs.IsEOF()) // no records returned
{
} 
```

# wordpress - 如何将未分类的类别设置为wordpress中自定义帖子类型的默认类别？

> ID：13802174
> 
> 赞同：3
> 
> 时间：2012-12-10T13:44:14.357
> 
> 标签：wordpress, wordpress-theming

如何将未分类的类别设置为wordpress中自定义帖子类型的默认类别？我的意思是每当添加新的自定义帖子时，未分类的类别应该自动分配给它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:24:51.213

您在那里至少有部分答案：[http](http://wordpress.org/support/topic/default-category-for-a-custom-post-type) ://wordpress.org/support/topic/default-category-for-a-custom-post-type 。如果你遵循这个逻辑：

```
wp_set_object_terms( $post->ID, $idOfAllTheCategoriesInAnArray,'category'); 
```

并使用适当的钩子（`save_post`例如），然后你甚至可以自动化它。如果您发现更好，请在此处发布！

# magento - Magento：不显示有运费的免费产品的付款方式

> ID：13802183
> 
> 赞同：3
> 
> 时间：2012-12-10T13:44:33.903
> 
> 标签：magento, payment, shipping

我们正在创建一个包含许多教育产品的 Magento 商店。许多产品是免费的小册子，但订单有运费。

如果我创建一个仅包含免费产品的订单并通过结帐，则不会显示任何付款方式，并且我无法完成订单。

如何让付款方式显示？

欢迎任何和所有帮助！

谢谢，亚历山大。

一些附加信息： - 如果我将付费产品添加到我的购物车，将显示付款方式。- 有些产品是完全免费的（也没有运费）。我们给他们的权重为零。如果您只订购这些，它确实可以正常工作。（无需付款。） - 只有一种运输方式可用：Table Rates

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:52:27.623

我自己已经解决了这个问题。就是这样：

首先，将文件 app/code/core/Mage/Payment/Block/Form/Container.php 复制到本地（将文件复制到：app/code/ **local** /Mage/Payment/Block/Form/Container.php ）

然后转到第 119 行并更改：

```
$total = $quote->getBaseSubtotal(); 
```

到

```
$total = $quote->getBaseGrandTotal(); 
```

我通过下订单免费产品并在后端完成订单来测试更改。这一切似乎工作正常。

# c - 覆盖 C 中的标准输入和输出

> ID：13802184
> 
> 赞同：-1
> 
> 时间：2012-12-10T13:44:36.487
> 
> 标签：c, unix, stdio, cat

我编写了这段代码来覆盖`cat`Ubuntu 中的命令。以下三种`cat`指令格式可以正常工作，但其余的不能正常工作。

工作人员：

*   ./catf > 文件.txt
*   ./catf < 文件.txt

不工作：

*   ./catf 文件 1.txt > 文件.txt
*   ./catf 文件.txt

我正在将终端参数发送到上面列出的程序。另一个问题是每个文件还包含`Enter your String:`它不应该包含的内容。这是代码：

```
int main(int argc, char *argv[])
{
    int readbytes,fp;
    char buf[1024];
    if(argc==1)
    {
        printf("Enter your String :\n\n");
        readbytes=read(STDIN_FILENO,buf,1024);
        write(STDOUT_FILENO,buf,readbytes);
    }
    else if(argc==2)
    {
        fp=open(argv[1],O_RDONLY);
        dup2(0,fp);
        close(fp);
        readbytes=read(STDIN_FILENO,buf,1024);
        write(STDOUT_FILENO,buf,readbytes);
    }
    else if(argc==3)
    {
        if(argv[1][0]=='<')
        {
            fp=open(argv[2],O_WRONLY|O_CREAT,S_IRWXU);
            dup2(1,fp);
            close(fp);
            readbytes=read(STDIN_FILENO,buf,1024);
            write(STDOUT_FILENO,buf,readbytes);
        }
        else if(argv[1][0]=='>')
        {
            fp=open(argv[2],O_RDONLY);
            dup2(1,fp);
            close(fp);
            readbytes=read(STDIN_FILENO,buf,1024);
            write(STDOUT_FILENO,buf,readbytes);
        }
    }
    else if(argc==4)
    {
        printf("inside");
        fp=open(argv[1],O_RDONLY);
        dup2(0,fp);
        close(fp);
        fp=open(argv[3],O_WRONLY|O_CREAT,S_IRWXU);
        dup2(1,fp);
        close(fp);
        readbytes=read(STDIN_FILENO,buf,1024);
        printf("%c",buf);
        write(STDOUT_FILENO,buf,readbytes);
    }
    return 0;
} 
```

**更新：**

我在代码中进行了威廉建议的更改，其余代码工作正常，但这`./catf File.txt ">" File2.txt`仍然不起作用。这是为什么？

```
if(argc==4)
    {
        printf("inside4");
        fp=open(argv[1],O_RDONLY);

        dup2(fp,0);

        close(fp);

        fp=open(argv[3],O_WRONLY|O_CREAT|O_TRUNC,S_IRWXU);

        dup2(fp,1);

        close(fp);

        readbytes=read(STDIN_FILENO,buf,1024);

        //printf("%c",buf);

        write(STDOUT_FILENO,buf,readbytes);
    } 
```

出现上述问题的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:48:39.713

当你调用*时*`cat > file1.txt`，`*argv[1]`不是。相反，是 1 并且 stdout 在调用时已经与文件相关联。如果你想通过 shell 作为参数传递，你需要引用它： *`<``argc``main``<`*

 *```
$ cat '<' filename 
```

此外，您调用`dup2`的参数颠倒了； `STDOUT_FILENO`应该是第二个参数，而不是第一个。您在`argc==2`子句中使用它的方式是将其关闭`fp`并重新打开到原始标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:04:47.520

正如@William Pursell 所说，重定向由shell 处理，而不是由程序处理。所以程序永远不会看到`argv[]`.

但是，您可以通过 testing 判断您是否已被重定向`isatty(fd)`。不幸的是，您无法以任何标准方式告诉您被重定向到哪个文件，例如，您可能会被重定向到/来自管道。

Linux 上可能存在 hack，您可以阅读`/proc/$$/fd`（`$$`您当前的 PID 在哪里）并查看 fds 0、1、2 的符号链接。但是，并非所有 UNIX 都支持此功能。*

# c++ - 如何将字符串转换为任意长度的整数

> ID：13802187
> 
> 赞同：2
> 
> 时间：2012-12-10T13:44:41.193
> 
> 标签：c++, c, binary, numerical-methods

我正在开发一个在 C++ 中实现多精度算术的项目。我在第一个障碍中倒下了。我正在尝试将 c 字符串转换为整数的二进制表示，该整数可能包含比 int 可以容纳的更多位（理论上这可能是任意数量的位）。我本质上想创建一个长数组，它将保存字符串中包含的数字的二进制表示，索引 0 是数字的最不重要的“肢体”。我假设这个数字以十为底。

我已经研究过使用 GMP 中的代码，但它对于我的需求来说是不必要的复杂，并且有大量平台相关的代码。

任何帮助都会很棒！如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:30:42.013

就像@SteveJessop 说的

```
class Number {
public:
    Number();
    void FromString( const char * );
    void operator *= ( int );
    void operator += ( int );
    void operator = ( int );
}

Number::FromString( const char * string )
{
    *this = 0;
    while( *string != '\0' ) {
        *this *= 10;
        *this += *string - '0';
        string++;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:03:43.437

您要做的第一件事是拥有一个工作的测试引擎。这是一个脑残、易于理解、任意精度的算术引擎。

这个引擎的目的有几个。首先，它将字符串转换为任意精度的整数非常容易。其次，它是一种测试您后来改进的引擎的方法。即使它真的很慢，您也会更加确信它是正确的（并且拥有两个独立的实现意味着一个极端案例错误可能会被另一个捕获，即使您对任何一个都没有信心）。

假设`short`至少为 16 位且`char`至少为 8 位（`int_8`如果您的编译器支持，请使用实际的样式类型）

```
short Add(unsigned char left, unsigned char right, unsigned char extra=0) { return unsigned short(left)+unsigned short(right)+unsigned short(extra); }
unsigned short Multiply(unsigned char left, unsigned char right) { return unsigned short(left)*unsigned short(right); }
std::pair<unsigned char,unsigned char> CarryCalc(unsigned short input) {
  std::pair<unsigned char,unsigned char> retval;
  retval.first = input & (1<<8-1);
  retval.second = input>>8;
  return retval;
}
struct BigNum {
  std::vector<char> base256;
  BigNum& operator+=( BigNum const& right ) {
    if (right.base256.size() > base256.size())
      base256.resize(right.base256.size());
    auto lhs = base256.begin();
    auto rhs = right.base256.begin();
    char carry = 0;
    for(; rhs != right.base256.end(); ++rhs, ++lhs) {
      auto result = CarryCalc( Add( *lhs, *rhs, carry ) );
      *lhs = result.first;
      carry = result.second;
    }
    while( carry && lhs != base256.end() ) {
      auto result = CarryCalc( Add( *lhs, 0, carry ) );
      *lhs = result.first;
      carry = result.second;
    }
    if (carry)
      base256.push_back(carry);
    return *this;
  }
  BigNum& scaleByChar( unsigned char right ) {
    char carry = 0;
    for(auto lhs = base256.begin(); lhs != base256.end(); ++lhs) {
      unsigned short product = Multiply( *lhs, right );
      product += carry;
      auto result = CarryCalc( product );
      *lhs = result.first;
      carry = result.second;
    }
    if (carry)
      base256.push_back(carry);        
    return *this;
  }
  BigNum& shiftRightBy8BitsTimes( unsigned int x ) {
    if (x > base256.size()) {
      base256.clear();
      return *this;
    }
    base256.erase( base256.begin(), base256.begin()+x) )
    return *this;
  }
  // very slow, O(x * n) -- should be O(n) at worst
  BigNum& shiftLeftBy8BitsTimes( unsigned int x ) {
    while( x != 0 ) {
      base256.insert( base256.begin(), 0 );
      --x;
    }
    return *this;
  }
  // very slow, like O(n^3) or worse (should be O(n^2) at worst, fix shiftLeft)
  BigNum& operator*=( BigNum const& right ) {
    unsigned int digit = 0;
    BigNum retval;
    while (digit < right.base256.size()) {
      BigNum tmp = *this;
      tmp.shiftLeftBy8BitsTimes( digit );
      tmp.scaleByChar( right.base256[digit] );
      retval += tmp;
      ++digit;
    }
    *this = retval;
    return *this;
  }
}; 
```

这是一种快速而肮脏的任意精度整数类型（甚至还没有编译），性能很差。测试类似上面的东西，说服自己它是可靠的，然后从那里建立起来。

您的大部分代码都可以将有问题的实际 BigNum 类作为模板参数，因此您可以使用两种不同的实现来执行相同的算法，并比较结果以进行测试。

哦，还有一条建议——编写一个模板类，通过 CRTP “改进”一个简单的任意精度库。目标是只需要编写`*=`, `+=`, `unary -`, and maybe `/=`and some `shift_helper`and`compare_helper`函数，并让模板自动为您编写其余方法。通过将样板放在一个位置，可以更轻松地维护多个版本的`BigNum`类：并且拥有多个版本对于测试目的非常重要。

# php - 返回php中关联数组中最大值的索引

> ID：13802192
> 
> 赞同：1
> 
> 时间：2012-12-10T13:44:54.817
> 
> 标签：php

> **可能重复：**
> [返回数组中最大值的索引](https://stackoverflow.com/questions/1461348/return-index-of-highest-value-in-an-array)

我怎样才能返回最大值的所有索引..例如一个包含学生成绩的数组

```
$grade = array(                       
        "anna"  => "5",
        "lala"=>"7",
        "eni"=>"7", 
```

我想返回在这种情况下成绩最高的学生的姓名应该打印：lala eni

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:51:36.267

您可以使用 max() 来找到最大值，然后对其执行 array_keys() 。

[http://php.net/manual/en/function.max.php](http://php.net/manual/en/function.max.php) http://php.net/manual/en/function.array-keys.php 例如

```
$grade = array(                       
    "anna"  => "5",
    "lala"=>"7",
    "eni"=>"7",

$max = max($grade); // $max == 7
array_keys($grade, $max); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:55:35.087

它看起来像一个学校练习......好吧，你可以写这样的东西：

```
$maxInd = -1;
foreach($grade as $name => $ind) {
    if($ind > $maxInd) {
        $maxInd = $ind;
        $maxRes = array();
    }
    if($ind == $maxInd) {
        $maxRes[] = $name;
    }
}
return "The highest names are " . implode(', ',$maxRes); 
```

请让我知道它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:50:49.550

你可以做某事。像这样：

```
$inversed = Array();        
$highGrade = 0;
foreach ($grade AS $student=>$grade){
  if (isset($inversed[$grade]))
    $inversed[$grade][] = $student;
  else
    $inversed[$grade] = Array($student);

  if ($grade > $highGrade) $highGrade = $grade;
}

print_r($inversed[$highGrade]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:58:49.643

```
<?php
$grade = array(  
    "atest" => 6,                     
        "banna"  => "5",
        "lala"=>"7",
        "eni"=>"7");
asort($grade);
$reverse = array_reverse($grade);
$prev_val='';
$counter = 0;
foreach($reverse as $key=>$value)
{
if((($counter==1)&&($value==$prev_val))||($counter==0))
{
echo $key."->".$value."<br/>";
$prev_val = $value;
$counter++;
}
}

?> 
```

我在数组中添加了一个元素以消除您的疑问。

# perl - 珀尔。从远程服务器获取文件，仅核心模块

> ID：13802195
> 
> 赞同：0
> 
> 时间：2012-12-10T13:45:25.910
> 
> 标签：perl, file, fetch

我需要帮助：有没有办法只使用 perl 5.8.8 的核心模块从远程服务器获取文件？File::Fetch 仅从 5.9 开始成为核心模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:36:52.623

这一直出现。看看经典[是的，即使您可以使用 CPAN](http://perlmonks.org/?node_id=693828)。如果您有能力创建和运行 Perl 脚本，那么您也有能力将模块放在本地目录中并使用它。仅使用核心模块的要求完全是人为的。

在您的情况下，[`LWP::Simple`](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/Simple.pm)'`getstore()`函数将执行您想要的操作。虽然它在技术上不是核心，但`LWP::Simple`默认情况下包含在许多 Perl 发行版中。你很可能已经拥有它。

**更新：**那么，您想在 1000 台服务器上执行此操作吗？无需在每台服务器上手动安装模块。 [以编程](http://perldoc.perl.org/5.8.8/CPAN.html#Programmer%27s-interface)方式使用 CPAN 下载和安装您需要的模块（需要进行一些调整才能让 CPAN 将其安装在本地而不是根模块库中）。Leon Timmermans 建议对模块进行胖包装也是另一种选择。

如果你真的不想这样做，那么基本上答案是否定的：没有简单的方法可以通过 HTTP 获取远程文件，既不使用适当的模块，也不使用系统命令*（我没有考虑编写你的自己的 HTTP 客户端是一个简单的方法，但如果它适合你，那很好）*。

我看到的唯一其他潜在解决方案是解决您的问题的不同方法，例如：

*   在单个位置使用脚本获取文件，然后通过 FTP 将其分发到所有 1000 台服务器。
*   或者，将文件放在 FTP 服务器上，然后在每个服务器上使用简单的 Perl 脚本通过 FTP 获取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:19:51.170

正如丹已经说过的，*是的，即使您也可以使用 CPAN*。他的链接没有提到的一种方法是将其编写为使用普通 CPAN 的发行版，然后对其进行[fatpack](https://metacpan.org/module/fatpack)。Fatpacker 将脚本与其所有（纯 perl）依赖项结合起来，创建一个易于分发的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:57:15.587

你可以使用：

```
my $wgetoutput = `wget "$myFileToGet"`; 
```

反引号 (`) 中的内容将提供给默认 shell，因此您可以在那里调用任何您想要（并且被允许）的东西。警告：$myFileToGet 中可能包含“&& rm -rf *”之类的内容，所以不要忘记清理！

# zooming - 缩放 QGraphicsItem 的一部分及其子项

> ID：13802196
> 
> 赞同：1
> 
> 时间：2012-12-10T13:45:27.937
> 
> 标签：zooming

我是 Qt 的新手，遇到了一个问题。我有一个 QGraphicsPixmap 项目，其中有几个子项目（矩形和椭圆），随后有一些子项目。现在我想显示 Graphicspixmap 项目的一部分，所有子项目在鼠标悬停事件中放大 QLabel。所以我所做的如下；

```
GraphicsPixmapItem::GraphicsPixmapItem(QPixmap pixmap):QGraphicsPixmapItem(pixmap)
{
setAcceptsHoverEvents(true);
}

void GraphicsPixmapItem::hoverMoveEvent(QGraphicsSceneHoverEvent *event)
{
QPointF p = event->pos();
QRect rect(p.x(), p.y(), 100, 100);
lb->setPixmap(pixmap().copy(rect).scaled(lb->width(),lb->height()));
lb->repaint();
QApplication::processEvents();
}

void GraphicsPixmapItem::hoverEnterEvent(QGraphicsSceneHoverEvent *event)
{
lb=new QLabel();
lb->resize(400,400);
lb->show();
}

void GraphicsPixmapItem::hoverLeaveEvent(QGraphicsSceneHoverEvent *event)
{
lb->close();
} 
```

这是完美地缩放 Graphicspixmap 但不是子项。我的问题是如何在 QLabel 中显示 Graphicspixmap 及其子项，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:08:43.790

我自己找到了我的解决方案，并想分享它，这样任何面临同样问题的人都可以在这个问题上节省时间。我已经通过两种方式做到了。首先，我在之前工作的同一行上使用 mousehover 事件解决了它，如下所示：

```
void GraphicsPixmapItem::hoverEnterEvent(QGraphicsSceneHoverEvent *event)
{
imageviewLabel=new QLabel();
imageviewLabel->setAlignment(Qt::AlignCenter);
imageviewLabel->setGeometry(QApplication::desktop()->width()/2, 50, 600, 600);
imageviewLabel->show();
}

void GraphicsPixmapItem::hoverMoveEvent(QGraphicsSceneHoverEvent *event)
{
QRect viewrect(event->pos().x(), event->pos().y(), 100, 100);
imageviewLabel->setPixmap(QPixmap::grabWidget(QApplication::mainWidget(),viewrect).scaled(imageviewLabel->width(),imageviewLabel->height()));
imageviewLabel->repaint();
QApplication::processEvents();
}

void GraphicsPixmapItem::hoverLeaveEvent(QGraphicsSceneHoverEvent *event)
{
imageviewLabel->close();
} 
```

要使此代码为您工作，只需使您的主窗口成为我使用标志设置的主窗口小部件： QApplication::setMainWidget(this); //在主窗口构造函数中

然后我找到了一个更好的解决我的问题的方法，它显着减少了代码行和复杂性。这是通过实现 wheelMove 事件：

```
void GraphicsPixmapItem::wheelEvent(QGraphicsSceneWheelEvent *event)
{
prepareGeometryChange();
setScale(scale()*exp(-event->delta() / 600.0));
} 
```

我希望这至少对你们中的一些人有所帮助。享受！

# html - 不带 .htaccess 的 MIME 类型信息

> ID：13802198
> 
> 赞同：1
> 
> 时间：2012-12-10T13:45:34.317
> 
> 标签：html, .htaccess, mime-types

目前我正在尝试托管一些嵌入 html5 视频标签的视频。这样做的重点是提供它（尽可能）独立于浏览器、flash 和操作系统。我嵌入了 webM、mp4 和 ogg 版本，以提供最大的浏览器覆盖率。它适用于具有多种浏览器的 iOS、Mac 和 Windows。

然而，只有 Linux（尝试过 Firefox 和 Conqueror）拒绝播放视频。显示的错误消息是不支持 MIME 类型。

到目前为止我找到的解决方案是通过 .htacces 文件添加这些 MIME 类型。不幸的是，目前无法在服务器上使用 .htaccess 并且没有调用 Flash-fallback，因为 Firefox 实际上支持视频标签。

我的问题是，是否有任何其他方式提供这些信息，允许 Linux 上的浏览​​器播放视频？

# javascript - 使用 RaphaelJS 在任意位置的一组形状周围绘制边框

> ID：13802203
> 
> 赞同：2
> 
> 时间：2012-12-10T13:45:59.873
> 
> 标签：javascript, graphics, raphael

我正在使用 RaphaelJS 在纸上的随机位置绘制一组形状，使用以下代码：

[http://jsbin.com/ixiqiy/2/edit](http://jsbin.com/ixiqiy/2/edit)

我现在要做的是找到最外面的一组位置，这样我就可以在整个组周围画一个边框。例如：

![在此处输入图像描述](../Images/0907f99f302b9cb05063da79ca53150b.png)

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:27:15.913

好的，所以使用[Jarvis March](http://en.wikipedia.org/wiki/Jarvis_march)算法和[这个](http://tixxit.net/2009/12/jarvis-march/)python 实现，我设法将我自己的 JS/RaphaelJS 解决方案放在一起，可以在这里找到：http: [//jsbin.com/ixiqiy/12/edit](http://jsbin.com/ixiqiy/12/edit)。

以防万一消失，这里是代码：

```
(function() {

    function cmp(x, y) {  
        if (x > y) {
            return 1;
        } else if (x < y) {
            return -1;
        } else {
            return 0;
        }
    } 
    function turn(p, q, r) {
        return cmp((q[0] - p[0]) * (r[1] - p[1]) - (r[0] - p[0]) * (q[1] - p[1]), 0);
    }
    function dist(p, q) {
        var dx = q[0] - p[0];
        var dy = q[1] - p[1];
        return dx * dx + dy * dy;
    }
    function next_hull_pt(points, p) {
        var q = p,
            r,
            t;
        for (var i = 0; i < points.length; i++) {
            r = points[i];
            t = turn(p, q, r);
            if (t == -1 || t == 0 && dist(p, r) > dist(p, q)) {
                q = r;
            }
        }
        return q;
    }
    function convex_hull(points) {
        var left,
            point;
        for (var i = 0; i < points.length; i++) {
            point = points[i];
            if (!left || point[0] < left[0]) {
                left = point;
            }
        }
        var hull = [left],
            p,
            q;
        for (var i = 0; i < hull.length; i++) {
            p = hull[i];
            q = next_hull_pt(points, p);
            if (q[0] != hull[0][0] || q[1] != hull[0][1]) {
                hull.push(q);
            }
        }
        hull.push(left);
        return hull;
    }

    var paper   = Raphael(0, 0, 800, 800),
        set     = paper.set(),
        points  = [],
        point;

    for (var i = 0; i < 20; i++) {
        points[i] = [
            Math.round(Math.random() * 500) + 100,
            Math.round(Math.random() * 500) + 100
        ];
    }

    for (var i = 0; i < points.length; i++) {
        point = points[i];
        set.push(paper.circle(point[0], point[1], 5));
    }

    set.attr('fill', '#ff0000');
    set.attr('stroke', '#ffffff'); 

    var outline     = convex_hull(points),
        previous    = [0, 0],
        path        = 'M';
    for (var i = 0; i < outline.length; i++) {
        point = outline[i];
        path = path + (i == 0 ? 'M' : 'L') + point[0] + ',' + point[1] + ' ';
    }

    var path = paper.path(path);
    path.attr('stroke', '#0000ff'); 

})(); 
```

# sql - SQL Server BETWEEN 和 OR 语句用法

> ID：13802205
> 
> 赞同：0
> 
> 时间：2012-12-10T13:46:01.510
> 
> 标签：sql, sql-server, select, between

我正在尝试在 SQL Server 的同一 SQL 语句中使用 Between 和 OR 子句，每次我得到空结果时，有人知道吗？我原来的 SQL 是这样形成的：

```
SELECT * 
FROM opportunity AS oppt
WHERE oppt.Location='O/S' 
   OR oppt.Location='Overseas' 
  AND oppt.OPEN_DATE BETWEEN '2014-01-01 00:00:00.000' 
                         AND '2010-01-01 00:00:00.000' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:49:58.053

BETWEEN 谓词要求*较低*的值在前，*较高*的值在后，否则您将一无所获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:59:15.390

要添加到@RBarryYoung 的答案，我还建议在您的条件周围加上括号。这使得它明确，你打算成为结果/条件应该如何应用。

IE

```
WHERE (oppt.Location='O/S' 
   OR oppt.Location='Overseas')
  AND oppt.OPEN_DATE BETWEEN '2014-01-01 00:00:00.000' 
                         AND '2010-01-01 00:00:00.000' 
```

不同于：

```
WHERE oppt.Location='O/S' 
   OR (oppt.Location='Overseas'
  AND oppt.OPEN_DATE BETWEEN '2014-01-01 00:00:00.000' 
                         AND '2010-01-01 00:00:00.000') 
```

这是您目前拥有的上述第二个，而您可能是指第一个。

阅读[运算符优先级](http://msdn.microsoft.com/en-us/library/ms190276.aspx)- 这会告诉您执行各种运算符的顺序。在这种情况下`AND`，应用在之前`OR`。但是，适当地使用括号对您的条件进行分组有助于消除具有意外后果的风险运算符优先级。

我怀疑在您的情况下，您想要上面的第一个示例，实际上您可以将其合理化为：

```
WHERE oppt.Location IN ('O/S', 'Overseas')
      AND oppt.OPEN_DATE BETWEEN '2010-01-01 00:00:00.000' 
                             AND '2014-01-01 00:00:00.000') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:51:22.823

尝试在语句之间使用 () 进行查询和更正日期（先低后高），

在您的情况下，它将是：

```
SELECT * 
FROM opportunity AS oppt
WHERE (oppt.Location='O/S' OR oppt.Location='Overseas')
    AND oppt.OPEN_DATE BETWEEN '2010-01-01' AND '2014-01-01' 
```

# javascript - 如果元素是 X 左然后动画另一个元素

> ID：13802210
> 
> 赞同：0
> 
> 时间：2012-12-10T13:46:22.307
> 
> 标签：javascript, jquery

我试图在我的网站上为一个元素设置动画，但只有当该元素进入查看时。

要做到这一点，我会检查我的包装 div 何时离开 X，然后触发该函数。我唯一的问题是什么都没有发生，也没有出现在我的控制台上。

我尝试向我的函数添加警报以查看它是否触发，但我没有看到警报。谁能看到我做错了什么？

```
var width = 200;

setInterval(function(){
    if ($('.wrapper').css('left')<width){
         $('.left-liftdoor').animate({
            left: -50
             }, 2000, function() {
         });
    }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:52:54.757

问题可能是，`$('.wrapper').css('left')`在您的情况下返回带有单位的字符串（例如“100px”左右）并且您的条件不满足。使用 parseInt解析输出`.css('left')`或将其转换为数字，以正确检查 value 是否小于给定*width*。

# java - 在对话框中对齐复选框

> ID：13802213
> 
> 赞同：1
> 
> 时间：2012-12-10T13:46:31.650
> 
> 标签：java, swing, alignment, layout-manager, jcheckbox

我想根据其他相应的字段对齐复选框（红色突出显示区域）。

![在此处输入图像描述](../Images/5bb7c3c27f93e4b4dbd34d530f953b78.png)

这是我用来生成这个的主要方法

```
public class DialogTesting extends JFrame{

public static void main(String args[])
{

    JFrame frame = new JFrame();
    frame.setSize(320,250);
    frame.setLocation(400,400);

    JTextField txtUserName,txtHostName,txtPortNo,txtSID;
    JPasswordField txtPassword;
    JPanel mainPanel;
    JCheckBox chkBoxSaveConnection;

    mainPanel = new JPanel();
    mainPanel.setBorder(BorderFactory.createEmptyBorder());
    mainPanel.setPreferredSize(new Dimension(300, 210));
    mainPanel.setLayout(new FlowLayout());

    JLabel l_label = null;
    txtUserName = new JTextField("K_USERNAME", 15);
    txtUserName.putClientProperty("maxlength", 200);
    l_label = new JLabel("User Name");
    l_label.setPreferredSize(new Dimension(100, 30));
    mainPanel.add(l_label);
    mainPanel.add(txtUserName);

    txtPassword = new JPasswordField("K_PASSWORD", 15);
    txtUserName.putClientProperty("maxlength", 200);
    l_label = new JLabel("Password");
    l_label.setPreferredSize(new Dimension(100, 30));
    mainPanel.add(l_label);
    mainPanel.add(txtPassword);

    txtHostName = new JTextField("K_HOSTNAME", 15);
    txtHostName.putClientProperty("maxlength", 200);
    l_label = new JLabel("Host Name");
    l_label.setPreferredSize(new Dimension(100, 30));
    mainPanel.add(l_label);
    mainPanel.add(txtHostName);

    txtPortNo = new JTextField("K_PORTNO", 15);

    l_label = new JLabel("Port Number");
    l_label.setPreferredSize(new Dimension(100, 30));
    txtPortNo.putClientProperty("maxlength", 200);
    mainPanel.add(l_label);
    mainPanel.add(txtPortNo);

    txtSID = new JTextField("K_SID", 15);
    l_label = new JLabel("SID number");
    l_label.setPreferredSize(new Dimension(100, 30));
    txtPortNo.putClientProperty("maxlength", 200);
    mainPanel.add(l_label);
    mainPanel.add(txtSID);

    chkBoxSaveConnection = new JCheckBox();
    l_label = new JLabel("chkBoxSaveConnection");
    l_label.setPreferredSize(new Dimension(150, 30));
    mainPanel.add(l_label);
    mainPanel.add(chkBoxSaveConnection);

    mainPanel.setVisible(true);

    frame.add(mainPanel);
    frame.setVisible(true);

}
} 
```

在这里我想让复选框（红色突出显示的区域）根据其他字段对齐

我尝试了此解决方案以使其正确对齐

```
mainPanel.setLayout(new GridLayout()); 
GridBagConstraints l_bag_constraints = new GridBagConstraints();
l_bag_constraints.fill = GridBagConstraints.HORIZONTAL;
mainPanel.add(jlabel,FieldMapperHelper.getGridBagCompPosition(l_bag_constraints,0,0,10,1,0,10)
            );
    mainPanel.add(txtUserName
            ,FieldMapperHelper.getGridBagCompPosition(l_bag_constraints,0,1,10,1,0,10)
            ); 
```

但在这种情况下，它向我展示了非常小的文本框。

如果您想要除此之外的任何其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:11:18.180

好的，所以您的问题是您没有使用适当的 LayoutManager 并且您还被迫设置首选尺寸（您根本不应该这样做）。

这是您的代码的更新版本，它使用`GridBagLayout`并且应该可以很好地工作：

![结果图片](../Images/9e831f28cdba341d498e37dad85ddb7f.png)

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class DialogTesting {

    protected void initUI() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextField txtUserName, txtHostName, txtPortNo, txtSID;
        JPasswordField txtPassword;
        JPanel mainPanel;
        JCheckBox chkBoxSaveConnection;

        GridBagConstraints firstCol = new GridBagConstraints();
        firstCol.weightx = 1.0;
        firstCol.anchor = GridBagConstraints.WEST;
        firstCol.insets = new Insets(5, 20, 5, 5);

        GridBagConstraints lastCol = new GridBagConstraints();
        lastCol.gridwidth = GridBagConstraints.REMAINDER;
        lastCol.weightx = 1.0;
        lastCol.fill = GridBagConstraints.HORIZONTAL;
        lastCol.insets = new Insets(5, 5, 5, 20);

        mainPanel = new JPanel(new GridBagLayout());

        JLabel l_label = null;
        txtUserName = new JTextField("K_USERNAME", 15);
        txtUserName.putClientProperty("maxlength", 200);
        l_label = new JLabel("User Name");
        mainPanel.add(l_label, firstCol);
        mainPanel.add(txtUserName, lastCol);

        txtPassword = new JPasswordField("K_PASSWORD", 15);
        txtUserName.putClientProperty("maxlength", 200);
        l_label = new JLabel("Password");
        mainPanel.add(l_label, firstCol);
        mainPanel.add(txtPassword, lastCol);

        txtHostName = new JTextField("K_HOSTNAME", 15);
        txtHostName.putClientProperty("maxlength", 200);
        l_label = new JLabel("Host Name");
        mainPanel.add(l_label, firstCol);
        mainPanel.add(txtHostName, lastCol);

        txtPortNo = new JTextField("K_PORTNO", 15);

        l_label = new JLabel("Port Number");
        txtPortNo.putClientProperty("maxlength", 200);
        mainPanel.add(l_label, firstCol);
        mainPanel.add(txtPortNo, lastCol);

        txtSID = new JTextField("K_SID", 15);
        l_label = new JLabel("SID number");
        txtPortNo.putClientProperty("maxlength", 200);
        mainPanel.add(l_label, firstCol);
        mainPanel.add(txtSID, lastCol);

        chkBoxSaveConnection = new JCheckBox();
        l_label = new JLabel("chkBoxSaveConnection");
        mainPanel.add(l_label, firstCol);
        mainPanel.add(chkBoxSaveConnection, lastCol);

        frame.add(mainPanel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DialogTesting().initUI();
            }
        });
    }
} 
```

# ios - 是否可以对 iOS 上 iTunes 商店中的视频应用实时过滤器？

> ID：13802215
> 
> 赞同：0
> 
> 时间：2012-12-10T13:46:31.890
> 
> 标签：ios, ipad, video-processing, itunes-store

所以，作为背景，我正在考虑创建一个对有懒惰眼的孩子有用的应用程序。当患者一次只能从一只眼睛看东西时，这将用于治疗点，但需要练习协调两者的运动（对 3D 视觉等有用）。

这个想法是孩子戴着彩色 3d（立体）眼镜，您可以通过对内容进行颜色过滤来控制一只眼睛或另一只眼睛看到的内容。作为治疗，一个孩子每天可能会观看 20 分钟的过滤视频，这是一种相当简单的方法，可以让他们的大脑相信他们需要双眼同时工作。我有一个在台式机上运行的版本，每只眼睛可以看到一半的视频，中间有一个小的条带，两者都可以看到，以便更容易同步它们。

我正在考虑将其移植到iOS。对我来说最大的问题是如何将内容放到设备上并进行过滤。

如果用户可以从 iTunes 商店购买他们喜欢的视频，然后只需选择要在应用程序中播放的视频，并为浮雕眼镜过滤播放，那将是理想的选择。是否可以对 iOS 上 iTunes 商店中的视频应用实时过滤器？我能找到的最接近我的问题是[如何在 iphone 应用程序中播放 iTunes Store 购买的 DRM 视频？](https://stackoverflow.com/questions/12463618/)，没有答案。

我并不担心性能，因为我担心能够从商店访问视频（我总是可以对选定的视频进行离线过滤）。看起来苹果可能不允许这样做，因为这将是剥离 DRM 的一种简单方法。但是，由于这是一个相当小众的应用程序，我可以与验光师合作并设置硬件，但它会起作用。虽然这很好，但我不需要*通过*应用商店分发应用，因此使用越狱的 iPad 或私有 API 也是一种选择。

我的问题是，是否有任何方法让用户从 iTunes 商店购买视频（通常是电视节目），然后在应用程序中以编程方式访问帧以进行基本过滤，使用官方 API、私有 API 或越狱的 iPad，如果必要的。

# javascript - 如何准确缩放已经翻译好的d3地图

> ID：13802218
> 
> 赞同：3
> 
> 时间：2012-12-10T13:46:36.783
> 
> 标签：javascript, canvas, d3.js, translate

我有一张地图，它已经过翻译，可以正确地放在画布上。

我正在尝试实现一种缩放它的方法并且它确实有效，但是当您放大时它会远离中心，而不是以鼠标甚至画布为中心。

这是我的代码：

```
function map(data, total_views) {
  var xy = d3.geo.mercator().scale(4350),
      path = d3.geo.path().projection(xy),
      transX = -320,
      transY = 648,
      init = true;

  var quantize = d3.scale.quantize()
    .domain([0, total_views*2/Object.keys(data).length])
    .range(d3.range(15).map(function(i) { return "map-colour-" + i; }));

  var map = d3.select("#map")
        .append("svg:g")
        .attr("id", "gb-regions")
        .attr("transform","translate("+transX+","+transY+")")
        .call(d3.behavior.zoom().on("zoom", redraw));

  d3.json(url_prefix + "map/regions.json", function(json) {
    d3.select("#regions")
        .selectAll("path")
            .data(json.features)
        .enter().append("svg:path")
            .attr("d", path)
            .attr("class", function(d) { return quantize(data[d.properties.fips]); });
  });

  function redraw() {
    var trans = d3.event.translate;
    var scale = d3.event.scale;

    if (init) {
      trans[0] += transX;
      trans[1] += transY;
      init = false;
    }
    console.log(trans);

    map.attr("transform", "translate(" + trans + ")" + " scale(" + scale + ")");
  }
} 
```

我发现将初始翻译添加到新翻译（`trans`）适用于第一次缩放，但对于所有后续缩放，它会使情况变得更糟。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T03:30:38.483

这是一个全面的起点：[d3 中力有向图的语义缩放](https://stackoverflow.com/questions/21344340/sematic-zooming-of-force-directed-graph-in-d3)

这个例子特别帮助了我（只是撕掉所有小地图的东西以使其更简单）：[http ://codepen.io/billdwhite/pen/lCAdi?editors=001](http://codepen.io/billdwhite/pen/lCAdi?editors=001)

```
 var zoomHandler = function(newScale) {
        if (!zoomEnabled) { return; }
        if (d3.event) {
            scale = d3.event.scale;
        } else {
            scale = newScale;
        }
        if (dragEnabled) {
            var tbound = -height * scale,
                bbound = height  * scale,
                lbound = -width  * scale,
                rbound = width   * scale;
            // limit translation to thresholds
            translation = d3.event ? d3.event.translate : [0, 0];
            translation = [
                Math.max(Math.min(translation[0], rbound), lbound),
                Math.max(Math.min(translation[1], bbound), tbound)
            ];
        }

        d3.select(".panCanvas, .panCanvas .bg")
            .attr("transform", "translate(" + translation + ")" + " scale(" + scale + ")");

        minimap.scale(scale).render();
    }; // startoff zoomed in a bit to show pan/zoom rectangle 
```

尽管我不得不稍微调整该功能以使其适用于我的情况，但想法就在那里。这是我的一部分。(`E.range(min,max,value)`只是限制`value`在`min`/之内`max`。这些变化主要是因为在这种情况下我将 0,0 作为屏幕的中心。

```
// limit translation to thresholds
            var offw = width/2*scale;
            var offh = height/2*scale;
            var sw = width*scale/2 - zoomPadding;
            var sh = height*scale/2- zoomPadding;

            translate = d3.event ? d3.event.translate : [0, 0];
            translate = [
                E.range(-sw,(width+sw), translate[0]+offw),
                E.range(-sh,(height+sh), translate[1]+offh)
            ];
        }

        var ts = [translate[0], translate[1]];
        var msvg  = [scale, 0, 0, scale, ts[0], ts[1]]; 
```

# javascript - Coffeescript/Javascript 方法调用的执行顺序

> ID：13802222
> 
> 赞同：1
> 
> 时间：2012-12-10T13:46:51.123
> 
> 标签：javascript, coffeescript

关于如何让下面的程序结构以我想要的方式工作，我有一个小问题。

我希望它执行，以便控制台以正确的顺序打印出数字。当前运行时，它将运行这些方法以导致控制台注销 1 3 2 而不是 1 2 3。

我猜这只是对 javascript 如何处理函数调用的误解。

咖啡：

```
class exports.Class
    constructor: (@options) ->
    onEdit: =>
        @secondFunction()
        console.log "3"

    secondFunction: =>
        console.log "1"
        @externalClass.getData( (callback) =>
            console.log "2"
        ) 
```

JS：

```
var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

exports.Class = (function() {

  function Class(options) {
    this.options = options;
    this.secondFunction = __bind(this.secondFunction, this);

    this.onEdit = __bind(this.onEdit, this);

  }

  Class.prototype.onEdit = function() {
    this.secondFunction();
    return console.log("3");
  };

  Class.prototype.secondFunction = function() {
    var _this = this;
    console.log("1");
    return this.externalClass.getData(function(callback) {
      return console.log("2");
    });
  };

  return Class;

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:58:47.507

发生的情况是，当您调用 onEdit() 时，它会立即（并且同步）调用 secondFunction()。给定的被同步调用的 secondFunction 将立即打印“1”并进行调用以获取数据。直到稍后时间才会调用您的回调。您可以想象它已被放入队列等待执行。同时，secondFunction 将结束，返回执行到 onEdit，最后一行将输出“3”。

您无法控制何时显示“2”。它可以是一毫秒后或 30 秒后。

有像[https://github.com/caolan/async](https://github.com/caolan/async)这样的库可以帮助您在异步环境中编排工作流。您还应该看看 Async JavaScript [http://www.amazon.com/Async-JavaScript-ebook/dp/B007N81FE2](https://rads.stackoverflow.com/amzn/click/com/B007N81FE2)一书，以了解如何在这种环境中工作。

您可以像这样重写您的代码并获得所需的效果，但这在您的真实代码上可能并不容易，但这是一个想法：

```
class exports.Class
    constructor: (@options) ->
    onEdit: =>
        @secondFunction()

    secondFunction: =>
        console.log "1"
        @externalClass.getData( (callback) =>
            console.log "2"
            @lastStep()
        ) 

    lastStep: =>
        console.log "3" 
```

# ruby-on-rails-3 - 复选框符号错误的参数数量

> ID：13802224
> 
> 赞同：1
> 
> 时间：2012-12-10T13:46:56.583
> 
> 标签：ruby-on-rails-3, checkbox, symbols

我在使用 codelearn 的教程时遇到问题， [请参见此处](http://www.codelearn.org/ruby-on-rails-tutorial/3/Introducing-forms,-migrations-&-ajax-in-Rails/2/Rails-migration,-form_for-&-checkboxes)

我有一个表格

```
<%= form_for :complete, :url => "/todos/complete", :method => :post do |f| %>
  <% @todo_items.each do |t| %>
    <%= f.check_box :todo_ids[], t.id %>
    <%= t.todo_item %>
  <% end %>
  <%= f.submit "Complete todos", :class => "btn btn-success" %>
<% end %>` 
```

我遇到了符号 todo_ids[] 的问题。我在写入的行收到错误“参数数量错误（1..2 为 0）”。我用 form_tag 尝试了另一种方法，但这并没有改变任何事情，我仍然得到错误。

我不明白的是，他们在教程中没有这个问题。请问你有什么想法吗？

非常感谢

# c - 从头文件自动生成 C 代码

> ID：13802228
> 
> 赞同：8
> 
> 时间：2012-12-10T13:47:16.533
> 
> 标签：c, code-generation

我想生成头文件中定义的过程的空实现。理想情况下，它们应该为指针返回 NULL，为整数返回 0 等，并且在理想情况下，还打印到 stderr 调用了哪个函数。

这样做的动机是需要实现一个包装器，它将复杂的现有 API（头文件）的子集适应另一个库。API中只有少数过程需要委托，但不清楚哪些。所以我希望使用一种迭代的方法，在这个自动生成的包装器上运行，看看调用了什么，用委托实现它，然后重复。

我已经看到[Automatically generate C++ file from header?](https://stackoverflow.com/questions/1404614/automatically-generate-c-file-from-header) 但答案似乎是 C++ 特定的。

那么，对于需要简单说明问题的人，如何在给定头文件的情况下自动生成这样的实现？我更喜欢现有的工具——我目前对简单解决方案的最佳猜测是使用 pycparser。

**更新**谢谢大家。两个很好的答案。还发布了我当前的 hack。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:12:14.283

因此，我将 ea 建议标记为“答案”，因为我认为这可能是总体上最好的主意。尽管我认为 cmock 建议在库开发由测试失败驱动的 tdd 方法中非常有效，但我最终可能会尝试这样做。但是现在，我需要一种以交互方式工作的更快+更脏的方法（有问题的库是另一个交互式程序的动态加载插件，我正在尝试对 api 调用的序列进行逆向工程......）

所以我最终做的是编写一个调用pycparse的python脚本。我会将它包括在这里以防它对其他人有所帮助，但它根本不是通用的（例如，假设所有函数都返回 int，并且有一个技巧可以避免在 typedefs 中使用 func defs）。

```
from pycparser import parse_file
from pycparser.c_ast import NodeVisitor

class AncestorVisitor(NodeVisitor):

    def __init__(self):
        self.current = None
        self.ancestors = []

    def visit(self, node):
        if self.current:
            self.ancestors.append(self.current)
        self.current = node
        try:
            return super(AncestorVisitor, self).visit(node)
        finally:
            if self.ancestors:
                self.ancestors.pop(-1)

class FunctionVisitor(AncestorVisitor):

    def visit_FuncDecl(self, node):
        if len(self.ancestors) < 3: # avoid typedefs
            print node.type.type.names[0], node.type.declname, '(',
            first = True
            for param in node.args.params:
                if first: first = False
                else: print ',',
                print param.type.type.names[0], param.type.declname,
            print ')'
            print '{fprintf(stderr, "%s\\n"); return 0;}' % node.type.declname

print '#include "myheader.h"'
print '#include <stdio.h>'
ast = parse_file('myheader.h', use_cpp=True)
FunctionVisitor().visit(ast) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:22:26.037

*警告：这是一个未经研究的答案，因为我自己没有任何经验。*

我认为您可能会对为单元测试而设计的模拟框架感到幸运。这种框架的一个例子是：[cmock](http://sourceforge.net/projects/cmock/)

项目页面建议它将从标头生成代码。然后，您可以获取代码并对其进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:42:14.700

UML 建模工具能够以所选语言生成默认实现。通常还支持导入源代码（包括 C 头文件）。您可以尝试导入您的标头并从中生成源代码。我个人有使用[Enterprise Architect](http://www.sparxsystems.com/)的经验，它支持这两种操作。

# c# - RestSharp 如何反序列化这个 Xml？

> ID：13802229
> 
> 赞同：0
> 
> 时间：2012-12-10T13:47:16.113
> 
> 标签：c#, .net, xml, deserialization, restsharp

是否可以让 RestSharp 将此 Xml 片段反序列化为单个类，而不是两个类？

```
<shippingInfo>
    <shippingServiceCost currencyId="AUD">58.02</shippingServiceCost>
    <shippingType>Flat</shippingType>
    <shipToLocations>Worldwide</shipToLocations>
</shippingInfo> 
```

注意第一个元素`shippingServiceCost`？它在那里有一个属性。通常，我只会创建一个名为的子类`ShippingServiceCost`并在其中添加两个属性：`CurrentId`和`Value`.

但是有可能在主类的属性中包含 CurrencyId 值`ShippingInfo`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:05:18.303

我会这样做的方式可能是：

1.  制作一个小型 XSLT 文件，用于将原始 xml 转换为新结构
2.  扩展默认 RestSharp XmlSerializer 以在正常序列化输出后应用 XSLT 转换
3.  将新的 XmlSerializer 注册到 restsharp 客户端

# android - 如何在使用robotium进行测试时重新启动被杀死的android应用程序

> ID：13802233
> 
> 赞同：1
> 
> 时间：2012-12-10T13:47:22.570
> 
> 标签：android, robotium

我正在使用机器人测试一个apk。在这个应用程序中，我有一个按钮可以终止应用程序进程并重新启动它。我想使用机器人测试这个场景。当我通过机器人单击按钮时，应用程序按预期被终止，但我看不到它 - 它重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:56:37.580

你不能通过robotium来做到这一点，仪器测试与你的应用程序存在于同一个进程中（如果你查看logcat，你可以看到这一点）这意味着当你杀死你的应用程序进程时，测试也会随之消失。

# javascript - javascript生成器功能不起作用

> ID：13802234
> 
> 赞同：1
> 
> 时间：2012-12-10T13:47:28.217
> 
> 标签：javascript, jquery

**问题：**

我有以下脚本，基本上，我从 ajax 调用中获取数据，将数据传递给函数，将数据中的 id 存储在全局变量中，因此全局变量可以用于从 jQuery 检索的不同脚本中`$.getScript()`：

**脚本（script1.js）：**

该位只是通过 ajax（未显示）获取了一些数据，但它已经存在`widget_data.d`，它应该`getWidgetContent()`根据 in 中的数据长度运行函数`widget_data.d`，在本例中为 3 次迭代：

```
window.global_widget_id = "";

for ( j = 0; j <= widget_data.d.length - 1; j++ ) {

    getWidgetContent( widget_data.d[j] );

} 
```

这是上面循环运行的函数：

```
function getWidgetContent( widget ) {

    if(widget.script!=null){

        window.global_widget_id = widget.widget_id;

        $.getScript( "js/script2.js", function() {

            alert( "direct title variable in script1.js: " + widget.title );
            alert( "global variable in script1.js: " + window.global_widget_id );
            alert( "direct variable in script1.js: " + widget.widget_id );

            $( ".widget_header_title_" + widget.widget_id ).append( widget.title );

        });

    }

} 
```

**脚本（script2.js）：**

这是上面函数也传递全局变量的脚本，然后它应该根据全局存储的 id 通过 ajax 获取数据。

```
var my_widget_id = window.global_widget_id;

alert( "global variable in script2.js " + window.global_widget_id );
alert( "direct variable in script2.js: " + my_widget_id );

// then do some more ajax stuff with global_widget_id before repeating the loop again. 
```

**实际结果：**

```
global variable in script2.js: 66
direct variable in script2.js: 66
direct title variable in script1.js: title for 57 goes here
global variable in script1.js 66
direct variable in script1.js 57

global variable in script2.js: 66
direct variable in script2.js: 66
direct title variable in script1.js: title for 65 goes here
global variable in script1.js 66
direct variable in script1.js 65

global variable in script2.js: 66
direct variable in script2.js: 66
direct title variable in script1.js: title for 66 goes here
global variable in script1.js 66
direct variable in script1.js: 66 
```

**预期成绩：**

```
global variable in script2.js: 57
direct variable in script2.js: 57
direct title variable in script1.js: title for 57 goes here
global variable in script1.js 57
direct variable in script1.js 57

global variable in script2.js: 65
direct variable in script2.js: 65
direct title variable in script1.js: title for 65 goes here
global variable in script1.js 65
direct variable in script1.js 65

global variable in script2.js: 66
direct variable in script2.js: 66
direct title variable in script1.js: title for 66 goes here
global variable in script1.js 66
direct variable in script1.js: 66 
```

* * *

**我试过的：**

基于[这个网站](http://blog.jbrantly.com/2010/04/creating-javascript-function-inside.html)，我*可以*创建一个`generator function`. 这是一个模板：

```
(function(variable) {
  return function() {
    // do something with variable 
  }
})(value); 
```

我试过使用它，但没有任何反应，没有错误，没有警报，没有，即：

```
for ( j = 0; j <= widget_data.d.length - 1; j++ ) {

    var the_data = widget_data.d[j];

    (function(the_data ) {
      return function() {
        getWidgetContent( the_data  );
      }
    })(the_data);

} 
```

* * *

**问题：**

为什么生成器功能不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:17:14.677

您正在做的是返回一个调用您的`getWidgetContent`.

```
(function(the_data ) {
  return function() { // you will return a function, it will not get called.
    getWidgetContent( the_data  );
  }
})(the_data); // the (the_data) means you call the first function with the_data as parameter. 
```

如果你想调用`getWidgetContent`，你需要直接调用它。

```
(function(the_data ) {
  return getWidgetContent( the_data  );
})(the_data); 
// this will call your anonymous function with the_data as parameter, giving closure. 
```

但据我所知，这不是你唯一关心的问题。打印 script1.js 输出的成功函数在 script2.js 运行后调用，并且可能在加载循环之后调用。

**编辑：** 在加载 script2.js 时，您已将全局变量设置为 3 次，分别为 57、65、66，但由于您覆盖它，script2.js 只能看到最后一个值 66。您的循环比脚本下载，这是异步的。

我认为你应该做的是将你的 script2 代码放在一个函数中，并从 script1 成功回调中调用它，并将小部件作为参数。

```
function getWidgetContent( widget ) {

  if(widget.script!=null){

    window.global_widget_id = widget.widget_id;

    $.getScript( "js/script2.js", function(inner_widget) {
        return function() {
          // this is the function that will get called as the callback.
          alert( "direct title variable in script1.js: " + inner_widget.title );
          alert( "global variable in script1.js: " + window.global_widget_id );
          alert( "direct variable in script1.js: " + inner_widget.widget_id );
          // inner_widget is the parameter, so it is in a closure
          $( ".widget_header_title_" + inner_widget.widget_id ).append( inner_widget.title );
          //make your call to script2.js if you want.
          script2.run(inner_widget);
        }
    }(widget));
    //we call the generator function with the widget to get closure.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:38:19.180

不只是：

```
for ( j = 0; j <= widget_data.d.length - 1; j++ ) {

  var the_data = widget_data.d[j];

  (function(the_data) {
    getWidgetContent( the_data );
  })(the_data);

} 
```

?

否则我看不到返回的函数在哪里被调用

# ruby-on-rails - 原型 1.7.1 在 IE8 中观察（和 ruby on rails）

> ID：13802236
> 
> 赞同：0
> 
> 时间：2012-12-10T13:47:34.680
> 
> 标签：ruby-on-rails, ruby, prototype, handler

这里红宝石代码：

```
template.javascript_include_once "phonejs"
...
template.javascript_tag "document.on('dom:loaded', function() { $('#{options[:id]}').observe('click', respondToClick, false);  });" 
```

“phonejs”文件中的 respondToClick，但在 IE8 的“respondToClick”中 - 缺少操作数

它在任何其他 brousers（firefox、opera、chrome）中都可以正常工作。我认为IE找不到功能，但我无法解决这个问题。

请帮助 :) 对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T06:53:53.430

在 function(){ respondToClick();} 上更改 respondToClick

# datatables - DataTables：更改可编辑单元格的外观

> ID：13802239
> 
> 赞同：1
> 
> 时间：2012-12-10T13:47:44.337
> 
> 标签：datatables

有人可以帮我让可编辑的单元格“可见”，这样可以清楚地看到它可以被编辑吗？现在它看起来像一个简单的文本，没有任何视觉暗示，它可以被编辑......我想让它看起来像一个标准的文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:00:27.270

这应该有效：

```
 var oTable = $('#example').dataTable( {
    "bServerSide": true,
    "sAjaxSource": "/url/",
    "fnDrawCallback": function () {
        $('#example tbody td').editable( 'url', { // simple editable initialization
          "height": "14px",
        }); 

        $('#example tbody tr').each(function() {  
            $.each(this.cells, function(){
                $(this).click()  //by default all td's have bind for click function, so we simulate clicks for every td
            });
        });

        $('#example tbody td input').live('click', function(){
            $(this).select() // to select input
        })
     }
 });
  $.editable.types.defaults.reset = function (){   //this function disables reset input editing after submiting

  } 
```

更新：

我在这里做了一个测试样本[http://jsfiddle.net/94BZV/31/](http://jsfiddle.net/94BZV/31/)

Don't forget to put correct url in init of editable to get correct answer passed back to edit field.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:06:14.513

> 你想要这个在 ASP.net 还是什么？如果是，那么，如果您的文本在 GridView 中，那么您必须将 EDITINDEX 值设置为列表的行索引值，就好像 EDITINDEX 值是 -1 那么它是静态模式，那么所有内容都将显示在标签中，所以您应该更改它的值大于 >-1 然后控件将显示在 TextBoxes 中因此您可以编辑控件中的值“

# ios - 使用属性字符串在 UITextView 中设置自定义字体

> ID：13802241
> 
> 赞同：1
> 
> 时间：2012-12-10T13:47:49.140
> 
> 标签：ios

我有一个`UITextView`包含通过情节提要配置的属性字符串。现在我想要应用自定义字体。我正在通过代码做到这一点

```
textView.font = [UIFont fontWithName:kCustomFont size:textView.font.pointSize]; 
```

问题是字体会丢失所有属性。我如何解决它？

（适用于 iOS 5 及更高版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:52:35.350

你应该通过 NSMutableAttributedString 的属性来改变它。

即使用类似的东西：

```
NSMutableAttributedString *mutableString = [[NSMutableAttributedString alloc] initWithAttributedString:textView.text];
NSDictionary *attrs = [NSDictionary dictionaryWithObjectsAndKeys:font, NSFontAttributeName, nil];
[mutableSrting addAttributes:attrs range:NSMakeRange(0, [mutableString length])];
textView.attributedText = mutableString;
[mutableString release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:53:13.883

你的 kCustomFont 里有什么？如果 FontName 错误，即使是单个字符，也会使用标准的 SystemFont。

# .net - Firefox 不显示图像，在 IE 上工作正常

> ID：13802244
> 
> 赞同：1
> 
> 时间：2012-12-10T13:47:54.180
> 
> 标签：.net, html, image, firefox, path

我在 Firefox 上的图像有一些问题，希望你能帮助我。

我有一个页面（.aspx - VB.NET），它是图像的查看器，我构建了一个树视图来导航文件夹，并构建了一个按钮来传递图像。我的问题是它在 IE 中运行良好，但图像在 Firefox 中不显示。

我使用的是绝对路径，因为图像与应用程序不在同一台服务器上，所以我通过代码隐藏获取路径，并更改我的 asp.net 控件图像的属性。像这样：

```
Image.ImageUrl = "\\spoad1\Mkt\FOTOS GERAL DA FAMILIA OPTION\2005 - CONFRATERNIZAÇÃO\apng.PNG" 
```

在 IE 上，工作正常；它更改了添加 file:// 部分的路径并将反斜杠（“\”）更改为“/”

```
file://spoad1/Mkt/FOTOS%20GERAL%20DA%20FAMILIA%20OPTION/2005%20-%20CONFRATERNIZAÇÃO/apng.PNG 
```

请注意，//spoad1 是我的图像本地化的服务器。

但是在火狐上就不行了，图片的网址变化很大。使用控制台错误，我得到这个：

```
http://localhost/main/FamiliaOption/%5C%5Cspoad1%5CMkt%5CFOTOS%20GERAL%20DA%20FAMILIA%20OPTION%5C2005%20-%20CONFRATERNIZA%C3%87%C3%83O%5Capng.PNG 
```

似乎 Firefox 正在添加我的应用程序的当前位置 (http://localhost/main/FamiliaOption/) 并在此之后添加 URL。如何让 Firefox 正确显示 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:56:11.650

“尝试给出完整路径，我的意思是从图像的链接开始，从“http:\....”开始检查它”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:55:10.857

在[此博客](http://rubenlaguna.com/wp/2007/04/20/firefox-and-file-windows-unc-paths/index.html)中，firefox 认为 UNC 链接是一种安全威胁。

stackoverflow 上有一个[类似的问题](https://stackoverflow.com/questions/192080/firefox-links-to-local-or-network-pages-do-not-work)。检查该问题的答案。

# c# - WPF 中的依赖属性

> ID：13802245
> 
> 赞同：0
> 
> 时间：2012-12-10T13:47:56.407
> 
> 标签：c#, wpf, dependencies

我正在`DependencyProperty`为我的 Avalon 坞站控制器开发一个。这是我目前正在处理的一些示例代码。

要求是：在一个类中创建所有依赖属性，并在 View 中访问该属性。像这样的东西。

```
<Button isPaneVisible="true"> or <Button isPaneVisible="{Staticresource path=name, Mode=twoway"> 
```

你能帮我解决这个问题吗？

```
namespace Avatar.UI.ViewModel
{
    internal class DependencyPropertyClass : DependencyObject
    {
        public static readonly DependencyProperty IsPaneVisibleProperty =
            DependencyProperty.RegisterAttached("IsPaneVisible", typeof(bool), typeof(DependencyPropertyClass),
                new FrameworkPropertyMetadata(true, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, IsPaneVisible_PropertyChanged));

        private static void IsPaneVisible_PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
        }

        /// <summary>
        /// Sets the IsPaneVisible for an element.
        /// </summary>
        public bool IsPaneVisible
        {
            get { return (bool)GetValue(IsPaneVisibleProperty); }
            set
            {
                SetValue(IsPaneVisibleProperty, value);
            }
        }

    }
}

<UserControl x:Class="Avatar.UI.View.ContentView"             
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"    
             mc:Ignorable="d" 
             xmlns:avalonDock="http://avalondock.codeplex.com"     
             xmlns:local="clr-namespace:Avatar.UI.ViewModel"             
             d:DesignHeight="300" d:DesignWidth="300">

<Button IsPaneVisible="true"></Button 

</UserControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:46:01.340

定义附加的依赖属性还需要定义静态 get 和 set 访问器方法。有关详细信息，请参阅[自定义附加属性](http://msdn.microsoft.com/en-us/library/ms749011%28v=vs.110%29.aspx#custom)。另请注意，您的类不一定需要从 DependencyObject 派生，只要它只定义附加属性即可。但是在*公共*类中定义这些属性总是一个好主意。

```
public class DependencyPropertyClass
{
    public static readonly DependencyProperty IsPaneVisibleProperty =
        DependencyProperty.RegisterAttached("IsPaneVisible", typeof(bool), typeof(DependencyPropertyClass),
            new FrameworkPropertyMetadata(true, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, IsPaneVisible_PropertyChanged));

    private static void IsPaneVisible_PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
    }

    public static bool GetIsPaneVisible(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsPaneVisibleProperty);
    }

    public static void SetIsPaneVisible(DependencyObject obj, bool value)
    {
        obj.SetValue(IsPaneVisibleProperty, value);
    }
} 
```

* * *

正如 Cyborgx37 所指出的，您将在 XAML 中使用附加属性，如下所示：

```
<Button local:DependencyPropertyClass.IsPaneVisible="True" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:56:25.777

我可能是错的，但我认为你正在寻找这个：

```
<Button local:DependencyPropertyClass.IsPaneVisible="true"></Button> 
```

您必须指定命名空间，因为 IsPaneVisible 不是“http://schemas.microsoft.com/winfx/2006/xaml/presentation”命名空间的一部分。

请参阅：[附加属性概述](http://msdn.microsoft.com/en-us/library/ms749011.aspx)

**编辑**
自从我这样做以来已经有一段时间了，所以当我扫描你的代码时，事情正在慢慢地回到我身边。对于附加属性，您不能使用实例属性来获取/设置属性。您必须创建静态`Get<PropertyName>`和`Set<PropertyName>`函数：

```
public static void SetIsPaneVisible(DependenyObject target, Boolean value)
{
    target.SetValue(IsPaneVisibleProperty, value);
}
public static bool GetIsPaneVisible(DependenyObject target)
{
    return (bool)target.GetValue(IsPaneVisibleProperty);
} 
```

*说真的……请阅读链接的文章。这一切都在那里解释。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:15:58.293

依赖属性应该派生您要为其创建依赖属性的基类。例如，如果您要为按钮创建依赖属性，则将基类按钮派生到您的类。

这就是我解决问题的方式。

# image - ALAsset Library 减小图像的大小，同时将其保存在照片库中

> ID：13802246
> 
> 赞同：1
> 
> 时间：2012-12-10T13:48:02.947
> 
> 标签：image, alassetslibrary

我正在创建一个应用程序，它允许用户使用 UIImagePickerController 从照片库中选择图像，然后使用 ALAssets 库保存图像。但是我的应用程序保存的图像的质量和大小之间存在差异。与从照片库中挑选的原始图像相比。

我添加了日志记录以检查被拾取的图像的大小以及使用 ALAsset 库保存在照片库中的图像。

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   UIImage *image = [info
                     objectForKey:UIImagePickerControllerOriginalImage];
   NSLog(@"Size of the image picked in bytes: %i",[UIImageJPEGRepresentation(image,1.0f) length]);
}

-(void)methodToSaveImage:(UIImage*)image metadata:(NSMutableDictionary*)info
{
    @autoreleasepool {
        NSLog(@"Size of image passed to be saved: %i",[UIImageJPEGRepresentation(image,1.0f) length]);
        [self writeImageToSavedPhotosAlbum:image.CGImage metadata:info
                           completionBlock:^(NSURL* assetURL, NSError* error) {

                               //error handling
                               if (error!=nil) {
                                   return;
                               }
                               ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
                               {
                                   NSLog(@"Size of image after being saved in photo library : %i",[myasset defaultRepresentation].size);
                               };

                               //
                               ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
                               {
                                   NSLog(@"cant get image - %@",[myerror localizedDescription]);
                               };

                               [self assetForURL:assetURL
                                    resultBlock:resultblock
                                    failureBlock:failureblock];

        }];
    }
} 
```

选择并传递以保存时，图像的大小（以字节为单位）是相等的，大约为 4 MB。但保存在照片库中的图像大小只有 2 MB 多一点。请告诉我为什么图像有差异？我能做些什么来保存与原始图像精确大小的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:03:48.963

同样的答案我也在搜索。但是，如果您要生成两个图像的校验和（写入之前和写入之后）。然后使用：

```
NSData* data =  UIImageJPEGRepresentation(copyOfOriginalImage, 1);
NSLog(@"The Read Image MD5: %@",[data MD5]); 
```

校验和将保持不变。但仍然存在大小差异。

# magento - 无论 Magento 中的页面如何，都先按图像对产品进行排序

> ID：13802252
> 
> 赞同：1
> 
> 时间：2012-12-10T13:48:10.667
> 
> 标签：magento, php

我正在尝试在我的类别中列出产品以首先显示带有图像的产品，然后按用户选择的方法进行排序。我已经能够按页面执行此操作，但我希望它适用于整个类别，而不仅仅是当前页面。有任何想法吗？

```
<?php
    $_productCollection=$this->getLoadedProductCollection();
    $_helper = $this->helper('catalog/output');
?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">
    <?php echo $this->getToolbarHtml() ?>
    <?php // List mode ?>
      <?php $imgprd=array(); ?>
    <?php if($this->getMode()!='grid'): ?>
    <?php $_iterator = 0; ?>
    <ol class="products-list" id="products-list">

    <?php foreach ($_productCollection as $_product): ?>
    <?php 
    //you can create test in any part sting of you link image
    if (strpos($this->helper('catalog/image')->init($_product, 'small_image') , "placeholder")==false): ?>

        <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
            <?php // Product Image ?>
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
            <?php // Product description ?>
            <div class="product-shop">
                <div class="f-fix">
                    <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product) ?>
                    <?php endif; ?>
                    <?php echo $this->getPriceHtml($_product, true) ?>
                    <?php if($_product->isSaleable()): ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <div class="desc std">
                        <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                    </div>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </div>
        </li>
        <?php else: ?>
        <?php $imgprd[]=$_product ?>    
        <?php endif; ?>
    <?php endforeach; ?>
            <?php foreach ($imgprd as $_product): ?>
        <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
            <?php // Product Image ?>
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
            <?php // Product description ?>
            <div class="product-shop">
                <div class="f-fix">
                    <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product) ?>
                    <?php endif; ?>
                    <?php echo $this->getPriceHtml($_product, true) ?>
                    <?php if($_product->isSaleable()): ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <div class="desc std">
                        <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                    </div>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </div>
        </li>

    <?php endforeach; ?>
    </ol>
    <script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

    <?php else: ?>

    <?php // Grid Mode ?>

    <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); $i=0; ?>
    <?php  foreach ($_productCollection as $_product): ?>
        <?php if (strpos($this->helper('catalog/image')->init($_product, 'small_image') , "placeholder")==false): ?>
        <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
        <?php endif ?>
            <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
                 <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <div class="actions">
                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </li>
        <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
        <?php endif ?>
        <?php else: ?>
        <?php $imgprd[]=$_product ?>    
        <?php endif; ?>
        <?php endforeach ?>
         <?php foreach ($imgprd as $_product): ?>

        <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
        <?php endif ?>
            <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <div class="actions">
                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </li>
        <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
        <?php endif ?>
        <?php endforeach ?>
        <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
    <?php endif; ?>

    <div class="toolbar-bottom">
        <?php echo $this->getToolbarHtml() ?>
    </div>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T10:24:13.287

更短的方法，但它仅适用于一个页面列表或网格。我没有找到适用于所有产品的方法。

```
 <?php // List mode ?>
<!-- BEGIN -->
        <?php $_productCollectionWithImg=array(); ?>
        <?php $_productCollectionWithoutImg=array(); ?>
        <?php foreach ($_productCollection as $_product): ?>
            <?php if (strpos($this->helper('catalog/image')->init($_product, 'small_image') , "placeholder")==false): ?>
                <?php $_productCollectionWithImg[]=$_product; ?>
            <?php else: ?>
                <?php $_productCollectionWithoutImg[]=$_product; ?>
            <?php endif; ?>
        <?php endforeach; ?>
        <?php $_productCollection = array_merge($_productCollectionWithImg,$_productCollectionWithoutImg) ?>
<!-- BEGIN -->
        <?php if($this->getMode()!='grid'): ?> 
```

# c# - 线性渐变画笔动画

> ID：13802253
> 
> 赞同：0
> 
> 时间：2012-12-10T13:48:13.443
> 
> 标签：c#, .net, wpf, xaml

我正在尝试转换“擦除”动画 [http://learnwpf.com/post/2006/10/03/How-can-I-create-a-e2809cwipee2809d-effect-to-transition-between-two-images-in -WPF.aspx](http://learnwpf.com/post/2006/10/03/How-can-I-create-a-e2809cwipee2809d-effect-to-transition-between-two-images-in-WPF.aspx)示例以在 C# 中使用它。

所以我确实喜欢：

```
 <Grid>
        <Image Source="C:\Temp\WMS\Others\megan_fox_17-normal.jpg" />
        <Image Source="C:\Temp\WMS\Others\Hudgens.jpg">
            <Image.OpacityMask>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Offset="0" Color="Black" x:Name="BlackStop"/>
                    <GradientStop Offset="0" Color="Transparent" x:Name="TransparentStop"/>
                </LinearGradientBrush>
            </Image.OpacityMask>
        </Image>
        <Button Content="Button" HorizontalAlignment="Left" Margin="72,288,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>
    </Grid> 
```

和

```
private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            var _doubleAnimationFrontPlayer = new DoubleAnimation();
            _doubleAnimationFrontPlayer.By = 1;
            _doubleAnimationFrontPlayer.Duration = new Duration(TimeSpan.FromSeconds(2));

            sb.Children.Add(_doubleAnimationFrontPlayer);
            Storyboard.SetTargetProperty(_doubleAnimationFrontPlayer, new PropertyPath(GradientStop.OffsetProperty));
            Storyboard.SetTargetName(TransparentStop, "TransparentStop");
            Storyboard.SetTarget(_doubleAnimationFrontPlayer, TransparentStop);

            var _doubleAnimationFrontPlayer2 = new DoubleAnimation();
            _doubleAnimationFrontPlayer2.By = 1;
            _doubleAnimationFrontPlayer2.Duration = new Duration(TimeSpan.FromSeconds(2));
            _doubleAnimationFrontPlayer2.BeginTime =  TimeSpan.FromMilliseconds(1000) ;

            sb.Children.Add(_doubleAnimationFrontPlayer2);
            Storyboard.SetTargetProperty(_doubleAnimationFrontPlayer2, new PropertyPath(GradientStop.OffsetProperty));
           Storyboard.SetTargetName(BlackStop, "BlackStop");
            Storyboard.SetTarget(_doubleAnimationFrontPlayer2, BlackStop);

            sb.Completed += sb_Completed;
            sb.Begin();            
        }

        void sb_Completed(object sender, EventArgs e)
        {
            Debug.WriteLine("DONE");
        } 
```

但是什么也没发生... :(

任何线索缺少什么？

谢谢你！

PS我在这里发现同样的问题为时已晚[WPF Translating an XAML Animation to C# Code](https://stackoverflow.com/questions/7841660/wpf-translating-an-xaml-animation-to-c-sharp-code)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:30:18.753

所以我在这里找到了正确的代码[WPF Translating an XAML Animation to C# Code](https://stackoverflow.com/questions/7841660/wpf-translating-an-xaml-animation-to-c-sharp-code)

我刚刚编辑了它，因为我在那里发现了 3 个错误：

```
public void WipeAnimation(FrameworkElement ObjectToAnimate)
{
    LinearGradientBrush OpacityBrush = new LinearGradientBrush();
    OpacityBrush.StartPoint = new Point(1, 0);
    OpacityBrush.EndPoint = new Point(0, 0);
    GradientStop BlackStop = new GradientStop(Colors.Black, 0);
    GradientStop TransparentStop = new GradientStop(Colors.Transparent, 0);
    OpacityBrush.GradientStops.Add(BlackStop);
    OpacityBrush.GradientStops.Add(TransparentStop);
    ObjectToAnimate.OpacityMask = OpacityBrush;

    this.RegisterName("TransparentStop", TransparentStop);
    this.RegisterName("BlackStop", BlackStop);

    Duration d = TimeSpan.FromSeconds(4);
    Storyboard sb = new Storyboard() { Duration = d };
    DoubleAnimation DA = new DoubleAnimation() { By = 1, Duration = d };
    DoubleAnimation DA2 = new DoubleAnimation() { By = 1, Duration = d };
    sb.Children.Add(DA); sb.Children.Add(DA2);
    Storyboard.SetTargetName(DA, "TransparentStop");
    Storyboard.SetTargetName(DA2, "BlackStop");
    Storyboard.SetTargetProperty(DA, new PropertyPath("Offset"));
    Storyboard.SetTargetProperty(DA2, new PropertyPath("Offset"));
    sb.Begin(this);
} 
```

作者也获得了+1！:)

# plugins - 詹金斯插件基于控制台输出失败构建

> ID：13802256
> 
> 赞同：12
> 
> 时间：2012-12-10T13:48:18.980
> 
> 标签：plugins, build, jenkins

如果控制台输出上出现模式，是否有插件使构建失败？

例如：

```
Build Action - success
Build Action - success
Build Action - error_pattern
Build Action - success 
```

让我们假设 Jenkins 构建过程不会在 error_pattern 上构建失败，我需要有某种外部失败触发器。

## 编辑

寻找在构建过程中失败的解决方案，而不是构建后任务。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T15:04:17.490

您应该尝试[Post Build Task](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)插件。您可以搜索模式，然后启动脚本。

编辑：还有[文本查找器插件](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)，看起来更适合您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-12T09:18:23.443

我已[将此答案](https://stackoverflow.com/a/45373956/2927684)用作管道脚本的基础。在“构建”阶段，我有两个并行的子阶段 - 其中一个正在执行实际构建并输出到日志，而另一个子阶段正在获取相同的日志。我已经否定了退出代码 ( `! grep`)，以便在找到“错误：”字符串时它会出错。由于`failFast`设置，一旦找到字符串，这将导致整个“构建”阶段失败。`grep`在第一个子阶段的末尾有一个额外的，以防在最后产生错误。

我正在使用变量 ( `BUILD_COMPLETE`) 跟踪构建状态。

```
pipeline {
    agent {
        label 'master'
    }
    environment {
        BUILD_COMPLETE = false
    }
    stages {
        stage('Build') {
            failFast true
            parallel {
                stage('Building') {
                    steps {
                        sh 'echo foo | tee output.log'
                        sleep 5
                        sh 'echo bar | tee -a output.log'
                        sleep 5
                        sh 'echo ERROR: baz | tee -a output.log'
                        sleep 5
                        sh 'echo qux | tee -a output.log'
                        sleep 5

                        sh '! grep "^ERROR:" output.log'

                        script {
                            BUILD_COMPLETE = true
                        }
                    }
                }
                stage('Monitoring the logs') {
                    steps {
                        script {
                            while (BUILD_COMPLETE != true) {
                                sh '! grep "^ERROR:" output.log'
                                sleep 1
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-28T12:47:14.287

As an ugly workaround I do the following: in the build script redirect all the output to some resulting .log file, then you can grep through this file in the background the way you like (personally I do the freezing check additionally - calculate the checksum and compare with previous, if the same - start counting for timeout until threshold), etc...

Disadvantage is the output goes to some file instead of Jenkins console, but I guess you can do both using `tee` (I don't care, because my goal is to archive the log anyways and send it via email, - so I just `gzip` my resulting .log file and attach it as an artifact to the build record + to the email).

Advantage is you have full control on what happens in the build output and can interrupt the build using your own return code / message.

# c# - c# Visual Studio 2010 BackgroundWorker 和 Progressbar 问题

> ID：13802258
> 
> 赞同：1
> 
> 时间：2012-12-10T13:48:24.150
> 
> 标签：c#, visual-studio-2010, loops, progress-bar, backgroundworker

我试图让我的头脑围绕背景工作人员和进度条，到目前为止我已经让它工作了，但不完全是我想要的工作方式。基本上我正在对文件夹进行排序/重命名并将它们复制到不同的位置，这有效并且代码是不言自明的，生成的输出文件夹与预期的一样。但是，对于我打算搜索的每个文件夹，我必须右键单击它以获取文件数，然后在代码中我必须将 progressBar1.Maximum 设置为该值，以便它显示进度条的 coreect 进度. 怎么可能让它自动设置文件的数量，因为它无论如何都要经过每个文件夹？一些文件夹有数千个文件，而另一些文件夹有数百万个文件。

```
namespace Data_Sorter
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnSelect_Click(object sender, EventArgs e)
    {
        folderBrowserDialog1.ShowDialog();
        tbFilePath.Text = folderBrowserDialog1.SelectedPath.ToString();
    }

    private void btnSort_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int totalFiles = 0;
        foreach (var file in Directory.GetFiles(tbFilePath.Text, "*.txt", SearchOption.AllDirectories))
        {
            backgroundWorker1.ReportProgress(totalFiles);

            string fullFilename = file.ToString();

            string[] pathParts = fullFilename.Split('\\');
            string date = pathParts[6];

            string fileName = pathParts[7];

            string[] partName = fileName.Split('_');

            string point = partName[3];

            Directory.CreateDirectory("Data Sorted Logs\\" + point + "\\" + date + "\\");

            if (Directory.Exists(("Data Sorted Logs\\" + point + "\\" + date + "\\")))
                {
                    string destPath = (point + "\\" + date + "\\");
                    File.Copy(fullFilename, "C:\\Documents and Settings\\PC\\Desktop\\Sorter\\Data Sorter\\bin\\Debug\\Data Sorted Logs\\" + destPath + fileName);                    }
            else
                {
                    MessageBox.Show("destination folder not found " + date + point);
                }

            totalFiles++;
        }
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("Done");
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Maximum = 6777; // set this value at the maximum number of files you want to sort //
        progressBar1.Value = e.ProgressPercentage;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:54:00.160

您只需读取 GetFiles 长度即可找出文件编号。

您可以使用表达式传递相对百分比：`(i * 100) / totalFiles`，这样就不需要为进度设置最大值。

您还可以将文件名报告给进度条，在 progressChanged 事件中将其作为 UserState 传递。

试试下面的代码：

```
 namespace Data_Sorter
    {
    public partial class Form1 : Form
    {

public Form1()
    {
        InitializeComponent();
    }

    private void btnSelect_Click(object sender, EventArgs e)
    {
        folderBrowserDialog1.ShowDialog();
        tbFilePath.Text = folderBrowserDialog1.SelectedPath.ToString();
    }

    private void btnSort_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int totalFiles = 0;
        string[] files = Directory.GetFiles(tbFilePath.Text, "*.txt", SearchOption.AllDirectories);
        totalFiles = files.Length;
        int i = 0;
        foreach (var file in files)
        {

            backgroundWorker1.ReportProgress((i * 100) / totalFiles, file);
            i++
            string fullFilename = file.ToString();

            string[] pathParts = fullFilename.Split('\\');
            string date = pathParts[6];

            string fileName = pathParts[7];

            string[] partName = fileName.Split('_');

            string point = partName[3];

            Directory.CreateDirectory("Data Sorted Logs\\" + point + "\\" + date + "\\");

            if (Directory.Exists(("Data Sorted Logs\\" + point + "\\" + date + "\\")))
                {
                    string destPath = (point + "\\" + date + "\\");
                    File.Copy(fullFilename, "C:\\Documents and Settings\\PC\\Desktop\\Sorter\\Data Sorter\\bin\\Debug\\Data Sorted Logs\\" + destPath + fileName);                    }
            else
                {
                    MessageBox.Show("destination folder not found " + date + point);
                }

            totalFiles++;
        }
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("Done");
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        progressBar1.Text = e.UserState.ToString();//or yourNewLabel.Text = e.UserState.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:51:48.170

向上移动对 GetFiles 的调用，以便获得它返回的数组的长度：

```
string[] files = Directory.GetFiles(tbFilePath.Text, "*.txt",
                                    SearchOption.AllDirectories));

// Note - you won't be able to set this UI property from DoWork 
// because of cross-thread issues:
// progressbar1.Maximum = files.Length; 

int fileCount = files.Length;   

foreach (var file in files ... 
```

# vb.net - vb.net 在 mousemove 上返回实际图表 x 和 y 值

> ID：13802259
> 
> 赞同：0
> 
> 时间：2012-12-10T13:48:29.953
> 
> 标签：vb.net, charts

在显示特定系列的简单 vb.net 图表中，我想获得图表中实际值的运行值。我已经可以获得 xy 坐标，这很容易（ex 和 ey） - 但想知道是否有可用的方法将坐标转换为与图表本身相关的值。

我需要使用 mousemove 事件而不是 mousedown。

我希望将这些实际值传输到表单上的文本框。

谢谢 - 试图自己解决这个问题时筋疲力尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:58:55.453

这很容易，除非图表控件没有为您提供一些关键信息，在这种情况下很难:)

您的图表控件可能显示几个元素：图表本身（以 X 和 Y 轴为界）、图表标题、轴标题、可能是图例等。您需要知道的是您的 .Left 和 .Width 值X 轴。假设您可以获得这些，您想要的公式是

```
actualX = (mouseX - axis.Left) / axis.Width * (axis.Max - axis.Min) + axis.Min 
```

在不知道您在哪个平台上使用的图表控件的情况下，很难告诉您如何找到所有这些部分，但公式就是您要寻找的。

# vba - 如何将动态数组传递给 VBA 对象。编译错误：属性使用无效

> ID：13802262
> 
> 赞同：2
> 
> 时间：2012-12-10T13:48:43.583
> 
> 标签：vba, compiler-errors, dynamic-arrays

我正在尝试将数组传递给自定义类以进行存储并在该对象中进一步使用。类对象具有以下定义：

```
' Class Name: MBRMCurves
Implements ICurves

Private m_lInterpDates() As Long

Public Property Get InterpDates() As Long()

    InterpDates = m_lInterpDates

End Property

Public Property Let InterpDates(lInterpDates() As Long)

    m_lInterpDates = lInterpDates

End Property 
```

调用此代码的模块如下所示：

```
Dim objResult     As New MBRMCurves

    'Store the forward prices
    Dim fx_fwd()      As Double

    'Store the interpolation dates
    Dim int_dates()   As Long

    'initially there are no people
    Dim NumberTenors  As Integer
    NumberTenors = 0

    Dim cell          As range

    ' Create ranges of Dates
    Dim range     As range
    Dim range_topcell As range

    ' TODO Pri1 Create the Curves Obj
    With Worksheets("test")

        ' Populate the dates of the FWD rates.
        Set range_topcell = .range("B5")
Debug.Print range_topcell.Value
        Set range = .range(range_topcell, range_topcell.End(xlDown))
Debug.Print range.Count

        ' Add more columns to the FWD array
        ReDim fx_fwd(0 To range.Count - 1, 0 To 3)
        ReDim int_dates(0 To range.Count - 1)

        ' Set the counter
        NumberTenors = 0

        ' Populate the dates of the FWD rates into the first column of the dates array.
        For Each cell In range
            NumberTenors = NumberTenors + 1
            int_dates(NumberTenors - 1) = cell.Value
        Next cell

        ' Add interpolation dates to Curves object
        objResult.InterpDates int_dates 
```

上面代码的最后一行给了我编译错误：Invalid use of property。

我相信我 Let 函数的语法是正确的，但我可能会错过一个更微妙的疏忽。

谁能看到我做错了什么？我在 Windows XP 上使用 Excel 2003 和 VBA 6.5。

任何建议将不胜感激。

谢谢，

克里斯托斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:26:53.440

属性不是方法调用，您需要将其设置为等于您的数组：

```
objResult.InterpDates = int_dates 
```

您传入的数组可能仍然存在问题，但这是第一步。

# google-chrome - JSON 数据未显示在 localhost Chrome 浏览器中

> ID：13802264
> 
> 赞同：0
> 
> 时间：2012-12-10T13:48:51.217
> 
> 标签：google-chrome, extjs, sencha-touch

Kitchensink 示例在我的 Chrome 浏览器 [http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html#demo/jsonp中运行良好](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html#demo/jsonp)

但是当我下载它的代码并在本地服务器上运行时，它仍然处于数据加载状态。![在此处输入图像描述](../Images/6f2432b94e2967e6235c81b4218c5562.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:04:09.937

这是因为您在javascript中遇到的跨域错误...

```
Go to your chrome shortcut -> right click -> properties -> shortcut 
```

更改目标字段：

```
"C:\Users\boris.d\AppData\Local\Google\Chrome\Application\chrome.exe" 
```

到

```
"C:\Users\boris.d\AppData\Local\Google\Chrome\Application\chrome.exe --allow-file-access-from-files" 
```

它会为你工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-28T12:22:51.250

在您的 chrome 浏览器中添加 JSONView 作为扩展名并刷新您的页面。它将起作用。

使用以下链接添加： [https ://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc/related?hl=en](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc/related?hl=en)

# php - 从 URL 中删除控制器名称

> ID：13802265
> 
> 赞同：1
> 
> 时间：2012-12-10T13:48:57.233
> 
> 标签：php, routing, yii

我正在使用 PHP **Yii**框架并偶然发现了一个问题：

我的网址目前如下所示：`host.com/candidate/default/viewProfile/id/50`

我希望 URL 看起来像这样：`host.com/candidate/viewProfile/id/50`

该模块称为`candidate`.

此外，以下规则不起作用：`'/candidate/viewprofile/<id:\w+>' => 'candidate/default/viewprofile',`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:06:21.983

首先可以`/`在开头（删除它）。第二个原因可能是在此规则之前，您可以拥有另一个与您的 url 匹配的规则 - 在这种情况下，只需重新排序规则并将其放在更高的位置（我的意思是更接近规则数组的开头；））。

# c# - 如何在代码隐藏中将基于键的字典值绑定到 TextBlock？

> ID：13802266
> 
> 赞同：2
> 
> 时间：2012-12-10T13:48:58.923
> 
> 标签：c#, wpf, binding, dictionary, code-behind

我正在使用带有动态字段生成器的 MVVM 模型，其中字段是从数据库中提取的，这样做是因为不同类型的表单需要不同的字段（TextBox/TextBlock、ComboBox 等）。问题是我正在尝试从字典中检索一个值，以在表单的 TextBlock 中显示，但我不确定如何绑定检索到的 Key 以便我可以显示该值。

目前，我正在执行以下操作：

```
 TextBlock textBlock = new TextBlock();
 textBlock.SetBinding(TextBlock.TextProperty, createFieldBinding(myPropertyName); 
```

使用以下绑定方法：

```
 private Binding createFieldBinding(string fieldName) {
      Binding binding = new Binding(fieldName);
      binding.Source = this.DataContext;
      binding.UpdateSourceTrigger = UpdateSourceTrigger.LostFocus;
      return binding;
 } 
```

我在哪里传递类似的东西`Score`，它映射到`Score`ViewModel 中的一个属性，但是我如何绑定到字典键来检索它的值？

如果可能的话，我希望能够绑定到类似的东西`myDictionaryProperty[myDictionaryKey]`。

示例：下面生成`PlayerScore`ID 为 1 的 for Player。其中`PlayerScore`a`Dictionary<int, int>`和`PlayerID`是`int`。

```
 <TextBlock Name="textBlockA" Text="{Binding PlayerScore[1]} /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:19:31.150

使用@Clemens 提供的[这个解决方案](https://stackoverflow.com/a/13800383/1466627)，我能够根据我的 Dictionary 的数据类型构建我自己的 DictionaryItemConverter，并创建一个将`Key`and the绑定`Dictionary`在一起的多绑定方法。

转换器：

```
 public class DictionaryItemConverter : IMultiValueConverter {
      public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
           if(values != null && values.Length >= 2) {
                var myDict = values[0] as IDictionary;
                if(values[1] is string) {
                     var myKey = values[1] as string;
                     if(myDict != null && myKey != null) {
                          //the automatic conversion from Uri to string doesn't work
                          //return myDict[myKey];
                          return myDict[myKey].ToString();
                     }
                }
                else {
                     long? myKey = values[1] as long?;
                     if(myDict != null && myKey != null) {
                          //the automatic conversion from Uri to string doesn't work
                          //return myDict[myKey];
                          return myDict[myKey].ToString();
                     }
                }
           }

           return Binding.DoNothing;
      }

      public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture) {
           throw new NotSupportedException();
      }
 } 
```

多重绑定方法：

```
 private MultiBinding createFieldMultiBinding(string fieldName) {
      // Create the multi-binding
      MultiBinding mbBinding = new MultiBinding();
      // Create the dictionary binding
      Binding bDictionary = new Binding(fieldName + "List");
      bDictionary.Source = this.DataContext;
      // Create the key binding
      Binding bKey = new Binding(fieldName);
      bKey.Source = this.DataContext;
      // Set the multi-binding converter
      mbBinding.Converter = new DictionaryItemConverter();
      // Add the bindings to the multi-binding
      mbBinding.Bindings.Add(bDictionary);
      mbBinding.Bindings.Add(bKey);

      return mbBinding;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:47:02.473

可以绑定到索引属性，并且使用与 C# 相同的表示法，就像您写的那样：

```
<TextBlock Name="textBlockA" Text="{Binding PlayerScore[1]}" /> 
```

您传递给“createFieldBinding”的字符串是属性路径。如果将源设置为字典，则只需要传递索引器部分，如“[ [1](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx) ]”，就好像你在 xaml 中做过这样的事情：

```
<TextBlock Name="textBlockA" Text="{Binding [1]}" /> 
```

[看到这个](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)

# google-drive-api - 连接被拒绝：连接

> ID：13802273
> 
> 赞同：1
> 
> 时间：2012-12-10T13:49:34.663
> 
> 标签：google-drive-api, google-api-java-client

我的目标是每天自动将报告文件从服务器上传到 Google Drive。我是 Google Drive API 程序的新手。当我尝试执行 Quickstart: Run a Drive App in Java 中给出的示例程序时，我在输入授权码后收到以下错误消息。请求您帮助解决此问题。提前致谢。

> 线程“主”java.net.ConnectException 中的异常：连接被拒绝：在 java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351) 在 java.net.PlainSocketImpl 的 java.net.PlainSocketImpl.socketConnect(Native Method) 处连接。 connectToAddress(PlainSocketImpl.java:213) 在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200) 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) 在 java.net.Socket.connect(Socket.java :529) 在 com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:564) 在 sun.net.NetworkClient.doConnect(NetworkClient.java:158) 在 sun.net.www.http。 HttpClient.openServer(HttpClient.java:395) 在 sun.net.www.http.HttpClient.openServer(HttpClient.java:530) 在 sun.net.www.protocol.https.HttpsClient.(HttpsClient.java:272) 在sun.net.www.protocol.https。sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172) 上的 HttpsClient.New(HttpsClient.java:329) sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java: 911) sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158) sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1014) sun.net.www .protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230) 在 com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:79) 在 com.google.api.client.http.HttpRequest .execute(HttpRequest.java:895) 在 com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:299) 在 com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest.execute(GoogleAuthorizationCodeTokenRequest.java:147) 在 DriveCommandLine.main(DriveCommandLine.java:43)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:57:47.113

这听起来像是基于该错误的防火墙问题。您可以尝试从运行 Java 脚本的机器登录 drive.google.com 吗？那台机器可以ping www.googleapis.com 吗？它有哪些互联网限制？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:08:07.773

对此采取不同的方法，您为什么不直接安装和使用适用于 Windows 或 Mac 的 Google 云端硬盘应用程序呢？

[https://tools.google.com/dlpage/drive?pli=1](https://tools.google.com/dlpage/drive?pli=1)

它使用 OAuth2 进行身份验证，并且可以将范围缩小到仅同步某些文件夹。

# android - 如何通过 Roboguice 中的构造函数注入参数？[安卓]

> ID：13802275
> 
> 赞同：3
> 
> 时间：2012-12-10T13:49:35.940
> 
> 标签：android, factory-pattern, roboguice, constructor-injection

这个问题可能是这个 [Pass parameter to constructor with Guice的完全重复](https://stackoverflow.com/questions/9237996/pass-parameter-to-constructor-with-guice)

不同之处在于我将 roboguice 用于 android，而不仅仅是 Guice，所以那里的答案对我不起作用。

问题是 - 如何将初始化参数传递给创建的对象？即我已经注入了应该使用roboguice 不知道的一些参数来初始化的接口。

我在我提供的链接中看到的，我应该创建工厂接口并像这样注册它

```
 void configure(Binder binder) {
   binder.install(new FactoryModuleBuilder()
         .implement(FooInterface.class, Foo.class)
         .build(FooFactory.class));
  } 
```

但我找不到**FactoryModuleBuilder**类。我使用 Intellij IDEA，它可以显示我可以在当前位置访问的每个类，并且我可以 100% 确定没有以*“工厂”*字样开头的类。

如何使用 roboguice 创建我的工厂？

**更新**

我忘了下载[guice-assistedinject](http://search.maven.org/#artifactdetails%7Ccom.google.inject.extensions%7Cguice-assistedinject%7C3.0%7Cjar)。但是我仍然不知道我应该在哪里注册这家工厂。

**更新 2**

为什么我需要那个？因为应该存在某些抽象具有依赖关系的情况，而 Roboguice 无法解决。这种依赖可以是任何类型，甚至是简单的字符串或数字。

就我而言，我在 UI 上有 NumberPicker 控件，我想在*MyNumberPickerWrapper*类中移动所有 UI 特定任务。当我创建这个包装器时，我通过构造函数注入它的依赖项（这个控件）。

如果我对这种方法的看法是正确的，这不是重点，但可能还有很多其他更适用的示例，其中需要构造函数注入并且 Roboguice 无法创建注入的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T11:50:09.380

[我按照使用 Guice 将参数传递给构造函数中](https://stackoverflow.com/questions/9237996/pass-parameter-to-constructor-with-guice)给出的答案的步骤进行了一些修改以在 roboguice 下运行它。对我来说完全没问题。

1.  将**guice-** asstinject 库添加到 gradle 脚本

    ```
    dependencies { compile 'com.google.inject.extensions:guice-assistedinject:4.+' } 
    ```

2.  创建工厂接口，使用 create 方法接受对象构造函数所需的参数并返回对象的接口

    ```
    public interface ICustomObjectFactory {
        ICustomObject create(String queueName);
    } 
    ```

3.  为对象的构造函数添加**@Inject**注解，为来自工厂的每个参数添加**@Assisted注解。**

    ```
    public class CustomObject implements ICustomObject {
        protected String name;

        @Inject
        public CustomObject(@Assisted String name){
           this.name = name;
        }
    } 
    ```

4.  将绑定添加到您正在使用的模块中

    ```
    public class SomeModule extends AbstractModule {

        @Override
        protected void configure() {
             install(new FactoryModuleBuilder()
                .implement(ICustomObject.class, CustomObject.class)
                .build(ICustomObjectFactory.class));
        }
    } 
    ```

5.  注入工厂并创建对象的实例

    ```
    public class SomeClass {

        @Inject ICustomObjectFactory factory;

        public SomeClass () {
            ICustomObject first = this.factory.create("first");
            ICustomObject second = this.factory.create("second");
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T13:42:54.233

我遇到了同样的问题，感谢[Pavel 的回答](https://stackoverflow.com/a/35291333/3581012)，我成功了。我只需要与一些错误作斗争，我不知道这是否是由于使用的库的版本，但对我来说，如果不修改构造函数的注释，替换`@Inject`为`@AssistedInject`. 这样，实现接口的类的代码如下所示。

```
public class CustomObject implements ICustomObject {
    protected String name;

    @AssistedInject
    public CustomObject(@Assisted String name){
       this.name = name;
    }
} 
```

# html - 如何将表单中的数据存储在服务器的文本文件中？

> ID：13802285
> 
> 赞同：1
> 
> 时间：2012-12-10T13:50:08.400
> 
> 标签：html, forms, http, webserver

我正在使用运行 raspbian、debian 发行版的 Raspberry Pi，并使用 lighttpd 作为 http 服务器，如何将表单上输入的数据存储在 Raspberry Pi（服务器）的文本文件中？我是否必须将 lighttpd 作为 sudo 运行？如果有怎么办？任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:38:50.227

您需要的是允许您为该数据编写自定义处理逻辑的东西，例如 Python 或其他轻量级框架。

安装 CGI 支持你可以有 Python：[https ://raspberrypi.stackexchange.com/questions/1346/how-to-get-python-to-work-with-lighttpd](https://raspberrypi.stackexchange.com/questions/1346/how-to-get-python-to-work-with-lighttpd)

干杯。

# java - 如何从 WEB-INF 文件夹之外的文件夹中读取文件？

> ID：13802286
> 
> 赞同：1
> 
> 时间：2012-12-10T13:50:12.270
> 
> 标签：java

我在 java 中有一个 Web 应用程序项目。如果我部署该项目，则该项目在文件夹级别的 Tomcat 服务器上具有如下结构：

-conf
-image
-META-INF
-profiles
-WEB-INF

我想从文件夹“profiles”和“config”中读取一些文件。我尝试使用

```
Properties prop = new Properties();
try{
    prop.load(new FileInputStream("../webapps/WebApplicatioProject/profiles/file_001.properties"));
} catch (Exception e){
   logger.error(e.getClass().getName());
} 
```

那没起效。然后我尝试了

```
Properties prop = new Properties();
try{
    prop.load(getClass().getResourceAsStream("../../../../profiles/fille_001.properties"));
} catch (Exception e){
    logger.error(e.getClass().getName());
} 
```

它也不起作用。

如何从 WEB-INF 文件夹之外的文件夹“profiles”和“conf”中读取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-04T11:01:56.627

如果文件在 WebContext 文件夹下，我们通过调用 ServletContext 对象引用获得。

```
Properties props=new Properties();
    props.load(this.getServletContext().getResourceAsStream("/mesdata/"+fileName+".properties")); 
```

如果文件在类路径下，我们可以使用类加载器获取文件位置

```
Properties props=new Properties();
    props.load(this.getClass().getClassLoader.getResourceAsStream("/com/raj/pkg/"+fileName+".properties")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:09:30.910

您可以使用`ServletContext.getResource`(或`getResourceAsStream`) 使用相对于 Web 应用程序的路径访问资源（包括但不限于 下的那些`WEB-INF`）。

```
InputStream in = ctx.getResourceAsStream("/profiles/fille_001.properties");
if(in != null) {
  try {
    prop.load(in);
  } finally {
    in.close();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:00:03.360

正如 Stefan 所说，不要把它们放到 WEB-INF/... 所以把它们放到 WEB-INF/ 中，然后这样读取它们：

```
ResourceBundle resources = ResourceBundle.getBundle("fille_001"); 
```

现在您可以访问 fille_001.properties 中的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T01:12:23.650

You should use `ServletContext.getResource`. `getResourceAsStream` works locally for me but fails in Jenkins.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:54:02.823

如果你真的必须，你可以对位置进行逆向工程。在捕获通用异常并记录 File.getPath() 之前捕获 FileNotFoundException，这会输出绝对文件名，您应该能够看到相对路径来自哪个目录。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-21T11:22:20.700

您可以使用

```
this.getClass().getClassLoader().getResourceAsStream("../../profiles/fille_001.properties") 
```

基本上 Classloader 开始将资源查找到`Web-Inf/classes`文件夹中。因此，通过提供相对路径，我们可以访问`web-inf`文件夹之外的位置。

# java - 带有 GUI 的服务器-客户端架构

> ID：13802296
> 
> 赞同：1
> 
> 时间：2012-12-10T13:50:52.357
> 
> 标签：java, user-interface, client-server

我正在编写一个白板应用程序。

只有客户端需要 GUI 来绘制和更新来自其他客户端的绘图。

实现客户端的最佳方式是什么：首先，是否最好将网络和 GUI 组件拆分为两个文件，因为使用内部类会太重？

现在，谁创建谁：-Client Network 创建客户端 GUI，以便它知道 GUI 并可以直接更新？- 客户端 GUI 从另一个文件创建客户端网络，并可能实现自定义侦听器侦听服务器请求并更新 GUI ？

最后，当我的服务器向所有人广播任何客户端发送的形状时。如果客户端绘制形状必须等待服务器回复，才能在 GUI 上绘制它，这是否有问题？因为直接在客户端GUI中绘制会很复杂，所以在广播时发送形状并从客户端的arraylist中删除发送者。

# android - 查看“剪切”同一 LinearLayout 中的 TextView

> ID：13802297
> 
> 赞同：0
> 
> 时间：2012-12-10T13:50:54.090
> 
> 标签：android, textview, android-custom-view

![剪切的文本视图](../Images/841f6ec0c37dab6b67cc7fe837f9aa8e.png)

你好！我使用 ListView 来显示存储在 SQL 数据库中的信息，这个 ListView 有两个 TextView。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:padding="5dp" >

    <LinearLayout android:orientation="vertical" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:paddingRight="5dp">
    <TextView android:id="@+id/productlist_adapter_producto" 
    style="@style/normalText" 
    android:paddingBottom="5dp"
    android:textStyle="bold" />
    <TextView android:id="@+id/productlist_adapter_info" 
     android:textSize="14sp" 
     android:textColor="@color/Gris"
     android:textStyle="italic"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
    </LinearLayout>
    <View style="@style/espacio"/>
</LinearLayout>

<style name="espacio">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">1</item>
</style> 
```

为什么视图“espacio”削减了劣质文本视图？

# iphone - 'NSInvalidArgumentException' testViewController tableView:numberOfRowsInSection

> ID：13802300
> 
> 赞同：0
> 
> 时间：2012-12-10T13:51:09.203
> 
> 标签：iphone, objective-c, ios4

我尝试使用下面的代码将 Json 解析数据与表视图绑定并获取异常。我也在使用 ASIHttpRequest 和 Json。

```
**Error details:**
webservice[2864:f803] 
*** 
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[testViewController tableView:numberOfRowsInSection:]: 
unrecognized selector sent to instance 0x6ecc4e0' 
*** 
```

* * *

```
NSString *responseString = [request responseString];

SBJsonParser *parser=[[SBJsonParser alloc]init];
NSDictionary *obj=[[NSDictionary alloc]init];
obj=[parser objectWithString:responseString error:nil];

return obj.count; 
```

* * *

```
NSString *responseString = [request responseString];
SBJsonParser *parser=[[SBJsonParser alloc]init];
NSDictionary *obj=[[NSDictionary alloc]init];
obj=[parser objectWithString:responseString error:nil];

NSMutableArray *statuses = [[NSMutableArray alloc]init];

for (NSDictionary *status in obj)
{

    [statuses addObject:status];

}
self.listdata=statuses;

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: @"myCell"];    
if (cell == nil) {
    cell =  [[ UITableViewCell alloc ] initWithFrame:CGRectZero];
}

NSUInteger row = [indexPath row];
cell.textLabel.text = [listdata objectAtIndex:row];

return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:23:50.177

看起来您的表视图数据源没有实现该方法`tableView:numberOfRowsInSection:`

# stack - 在 HDFS 之上是否有像 Apache ActiveMQ 这样的解决方案？

> ID：13802303
> 
> 赞同：1
> 
> 时间：2012-12-10T13:51:19.117
> 
> 标签：stack, storage, distributed, hdfs, web-crawler

我想存储网络爬虫获取的网页。我没有任何随机访问权限。所以每当我想读取存储的数据时，我都会从头到尾读取。

我们已经尝试过 HBase 之类的解决方案，但 HBase 的最大优点之一是随机访问我们根本不需要的记录。经过 1.5 年的测试，HBase 对我们来说并不稳定。

我只想要 HDFS 之上的堆栈或队列，因为网页的数量约为 10 亿。我什至不想要 ActiveMQ 的队列行为，我只想能够存储网页，以便在发生故障时可以全部读取。

我不想使用文件，因为我不想处理文件轮换、文件一致性和...

值得一提的是，我们需要 HDFS，因此当我们想要将所有存储的数据发送到 solr 集群并通过 HDFS 获得冗余和可用性等好处时，我们可以在数据上运行 MapReduce 作业。

HDFS 上是否有仅存储 JMS 记录的服务，没有任何随机访问功能，也没有透明的记录视图？

# javascript - 尝试在旋转时将粒子对准相机并在三个 js 中相交时发出警告消息？

> ID：13802305
> 
> 赞同：4
> 
> 时间：2012-12-10T13:51:22.893
> 
> 标签：javascript, three.js, html5-canvas, webgl

我正在尝试在粒子上创建事件处理程序，并在球体上显示警报消息，始终瞄准相机。类似于[此演示](http://www.google.com/culturalinstitute/worldwonders/)的内容（并使其可以在 IE 9+ 上运行）

这是我的代码.. [http://jsfiddle.net/praveenv29/cVnKV/11/](http://jsfiddle.net/praveenv29/cVnKV/11/)

```
var renderer, projector;
var mouseX, mouseY, stats, container;
var objects = [];
var INTERSECTED;

var camera, scene, renderer, material, mesh, cont;

var w1 = 960;
var h1 = 700;

var halfWidth = w1 / 2;
var halfHeigth = h1 / 2;

function init() {
    cont = document.createElement('div');
    cont.id = "cont";
    document.body.appendChild(cont);

    camera = new THREE.PerspectiveCamera(75, w1 / h1, 1, 10000);
    camera.position.set(90, 90, -200);

    scene = new THREE.Scene();
    scene.add(camera);

    controls = new THREE.OrbitControls(camera);

    controls = new THREE.TrackballControls(camera, cont);
    controls.rotateSpeed = 0.8;
    controls.zoomSpeed = 1.2;
    controls.panSpeed = 2.5;
    controls.noZoom = true;
    controls.noPan = true;
    controls.staticMoving = false;

    controls.target.set(0, 0, 0);
    controls.keys = [95, 90, 84];

    renderer = new THREE.CanvasRenderer();

    material = new THREE.MeshBasicMaterial({
        color: 0x000000,
        wireframe: true
    });
    renderer.setSize(w1, h1);
    cont.appendChild(renderer.domElement);
    generateGeometry();

    var light = new THREE.PointLight(0xffffff);
    light.position.set(10, 0, 0);
    scene.add(light);

}

function animate() {
    requestAnimationFrame(animate);
    render();
}

function render() {
    controls.update();
    renderer.render(scene, camera);
}

function generateGeometry() {

    var axis = new THREE.AxisHelper();
    scene.add(axis);

    for (var i = 0; i < 20; i++) {

        var gloom = new THREE.ImageUtils.loadTexture('map_pin.png');
        materialr = new THREE.MeshBasicMaterial({
            map: gloom,
            overdraw: true,
            side: THREE.DoubleSide
        });
        var geometry = new THREE.PlaneGeometry(15, 15, 2, 2);

        var cube = new THREE.Mesh(geometry, materialr);
        cube.position.x = Math.random() * 2 - 1;
        cube.position.y = Math.random() * 2 - 1;
        cube.position.z = Math.random() * 2 - 1;
        cube.position.normalize();
        cube.position.multiplyScalar(125);

        cube.rotation.x = cube.position.x / Math.PI; //57.38

        cube.rotation.y = 360 / Math.PI * 2;

        objects.push(cube);
        scene.add(cube);

    }

    //earth
    var texture = THREE.ImageUtils.loadTexture('world.jpg');
    var materials = new THREE.MeshBasicMaterial({
        map: texture,
        overdraw: true
    });

    var cone = new THREE.SphereGeometry(120, 35, 35);

    var coneMesh = new THREE.Mesh(cone, material);

    coneMesh.position.y = 0;
    coneMesh.rotation.set(0, 0, 0);

    scene.add(coneMesh);

}

init();
animate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T18:45:03.780

目前还不清楚您在寻找什么；您的演示链接似乎无关...

您是否试图使立方体看起来正常（始终面向相机）？如果是这样，您将需要逻辑来重新定位它们以在用户移动相机视图时重新面向相机，因为我看到您还在设置 TrackballControls，它实际上移动了相机，而不是场景。这意味着用户可以更改场景的相机视图，并且您希望面向相机的项目需要重新定向。该重新定向逻辑需要放置在您的 render() 函数中。

顺便说一句，要让对象始终面向相机：

*   定义它，使其在不旋转时朝向您想要的方向；
*   通过您想要的任何方法将对象放置到您的场景中，包括您想要使用的任何分层旋转或平移，以将它们定位到您想要的位置；（注意，此时他们可能没有面向您想要的位置，但在这一步没问题）；
*   从 three.js 请求它为您的场景计算本地到世界空间的转换。之后，每个对象的世界变换矩阵包含连接的旋转，以及将每个对象从局部空间变换到世界空间的平移。
*   进入每个对象的局部到世界变换矩阵，并用恒等变换 { [1 0 0] [0 1 0] [0 0 1] } 替换旋转 3x3 矩阵分量。这有效地消除了世界空间中的旋转，使您执行此操作的所有对象始终面向相机。

# image - 从 5x5 窗口创建四 个 3x3 子窗口

> ID：13802322
> 
> 赞同：1
> 
> 时间：2012-12-10T13:52:21.490
> 
> 标签：image, matlab, filter, pixels

我知道循环不应该嵌套，但我做了同样的事情来进一步将 5x5 窗口细分为四个 3x3 子窗口。请帮我解决这个问题，如何将 5x5 窗口细分为四个 3x3 子窗口而无需嵌套循环。

代码：

> 对于 i=1:m

对于 j=1:n

```
 if(i<=(m-4) && j<=(n-4))

      % Reading 5 x 5 window in an image

v=1; 
for p=i:i+4
    u=1;
    for q=j:j+4
        P(v,u)=L(p,q);
        u=u+1;
    end
    v=v+1;
end

    % Sub dividing the 5 x 5 window into four 3x3 sub windows 

k=1;
for r=1:3
    l=1;
    for s=1:3
        v2(k,l)=P(r,s);
        v1(k,l)=P(r,s+2);   
        v3(k,l)=P(r+2,s);
        v4(k,l)=P(r+2,s+2);
        l=l+1;    
    end
    k=k+1;
end 
```

我需要这四个向量 v1、v2、v3 和 v4 进行进一步处理。我之前关于保留角像素的问题的链接：

[https://stackoverflow.com/questions/13793103/retain-corner-pixels-in-an-image](https://stackoverflow.com/questions/13793103/retain-corner-pixels-in-an-image)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:37:58.180

不确定这是否是您需要的，但这个解决方案怎么样：

```
% Some random matrices that are each one third the length and width of the total
LU3 = rand(10);
LM3 = rand(10);
LD3 = rand(10);
MU3 = rand(10);
MM3 = rand(10);
MD3 = rand(10);
RU3 = rand(10);
RM3 = rand(10);
RD3 = rand(10);

% Putting them together
I = [LU3 MU3 RU3;LM3 MM3 RM3;LD3 MD3 RD3];

% Splitting it up in four parts
LU2 = I(1:15,1:15)
RU2 = I(16:30,1:15)
LD2 = I(1:15,16:)
RD2 = I(16:30,16:30) 
```

它不是很笼统，但应该不难适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:57:30.503

让我说的不仅仅是回答您关于细分窗口的问题。

1.  您从这样的图像中读取 5x5 窗口：

    `P=L(i:(i+4),j:(j+4));`

    所以这`(i,j)`是原始图像上窗口的左上角。

2.  这个“细分”在我看来就像从 5x5 窗口的 TL、TR、BL 和 BR(*) 角开始取一个 3x3。这可以像这样简单地完成：

    `tl = P(1:3, 1:3); % this is v2 in your question`
    `tr = P(1:3, 3:5); % this is v1 (didn't you mix up v2 and v1 by any chance?)`
    `bl = P(3:5, 1:3); % this is v3`
    `br = P(3:5, 3:5); % this is v4`

    我建议宁愿使用它`tl, tr, bl, br`而不是`v1, v2, v3, v4`因为它更具表现力。

(*)(T=上, B=下, L=左, R=右)

* * *

更新：（如何更改循环？）
你想覆盖 L 上的所有窗口，所以第一个窗口是`P=L(1:5, 1:5)`，最后一个窗口是`P=L((m-4):m,(n-4):n)`。所有其他人将介于两者之间。所以 i 的第一个值是 i=1，最后一个是 i=m-4，第一个 j 是 j=1，最后一个是 j=n-4。

您也可以手动验证这一点，在 matlab 的命令提示符下键入 demo L，如下所示：

```
L=reshape([1:42], 6, 7); % a 6x6 test array
m=6; n=7;

i=1; j=1;
P_first=L(i:(i+4),j:(j+4)); % should contain 1

i=m-4; j=n-4;
P_last=L(i:(i+4),j:(j+4)); % should contain 42 
```

# wpf - 如何通过字符串作为 Propertyname 绑定属性

> ID：13802323
> 
> 赞同：0
> 
> 时间：2012-12-10T13:52:29.660
> 
> 标签：wpf, xaml, binding, properties, imultivalueconverter

嗨，我想绑定到 Xaml 中的“未知”（我只得到一个字符串）属性

起初我写了一个 IValueConverter 但你不能绑定到 ConverterParameter 所以我将它重写为 IMultiValueConverter 但现在我无法弄清楚如何使用`<Binding />`没有 Path 或者我错了？

如果你写`<TextBlock Text="{Binding}" />`你会得到对象 Person 并且`{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListView}}, Path=View.Columns[0].Header}}`我可以访问第一行的标题文本

现在我只需要将两者结合起来就可以获得财产吗？

我的测试 Xaml 代码：

```
<UserControl x:Class="Frameworktest.View.auswahl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:Frameworktest">
    <UserControl.Resources>
        <local:toPropertyConverter x:Key="PropertyConverter"/>
    </UserControl.Resources>
    <StackPanel>
        <!--...-->
        <Border BorderThickness="5" HorizontalAlignment="Left" VerticalAlignment="Top" 
                BorderBrush="Green" CornerRadius="5">
            <ListView  Name="listView1"  IsSynchronizedWithCurrentItem="False" 
                       ItemsSource="{Binding Items, UpdateSourceTrigger=PropertyChanged}" <!--ObservableCollection<Person>-->
                       SelectedItem="{Binding selectedItem, UpdateSourceTrigger=PropertyChanged}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Name">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Margin="1">
                                        <TextBlock.Text>
                                            <MultiBinding Converter="{StaticResource PropertyConverter}">
                                                <Binding /><!-- How do i {Binding} here?-->
                                                <Binding Source="{Binding RelativeSource={Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListView}}, Path=View.Columns[0].Header}}" />
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Firstname" >
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Margin="1" Text="{Binding Path=Name}" Width="100"/><!--works-->
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>

                        </GridViewColumn>
                        <GridViewColumn Header="Age">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Margin="1" Text="{Binding Age}" Width="50"/><!--works-->
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                   </GridView>
                </ListView.View>
            </ListView>
        </Border>
    </StackPanel>
</UserControl> 
```

转换器：

```
public class toPropertyConverter : IMultiValueConverter 
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values[0].GetType().GetProperty((string)values[1]);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

该模型

```
public class Person : MBase, IContains
{
private string _name;

public string  Name
{
    get { return _name; }
    set { _name = value;
    RaisePropertyChanged(() => Reg(() => Name));
    }
}

private string _firstname;
public string  Firstname
{
    get { return _firstname; }
    set
    {
        _firstname = value;
        RaisePropertyChanged(() => Reg(() => Firstname));
    }
}

private int _age;

public int Age
{
    get { return _age; }
    set
    {
        _age = value;
        RaisePropertyChanged(() => Reg(() => Age));
    }
}

public bool Contains(string text)
{
    string pers = string.Format("{0} {1}", Firstname, Name);

    return pers.Contains(text);

} 
```

}

## **更新我当前的 Multibindung**

```
<MultiBinding Converter="{StaticResource PropertyConverter}">
       <Binding Path="."/>
       <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type ListView}}" Path="View.Columns[0].Header}}" /> <!-- doesn't contain the word "Name" like i suspected -->
</MultiBinding> 
```

## **最后更新**

**在我的情况下**，这是一个死胡同，您无法从 GridViewColumn.CellTemplate 绑定到特定的列标题值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:55:43.807

{Binding} 隐含的意思是：{Binding Path=.}。所以你可以使用

```
<Binding Path="."/> 
```

# javascript - JS正则表达式查找几个a标签的href

> ID：13802334
> 
> 赞同：18
> 
> 时间：2012-12-10T13:53:15.510
> 
> 标签：javascript, regex

我需要一个正则表达式来从这些 a 标签中查找 href 的内容：

```
<p class="bc_shirt_delete">
   <a href="/CustomContentProcess.aspx?CCID=13524&amp;OID=3936923&amp;A=Delete" onclick="javascript:return confirm('Are You sure you want to delete this item?')">delete</a>
</p> 
```

只是网址，而不是 href/ 标签。

我在这里解析一个纯文本 ajax 请求，所以我需要一个正则表达式。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T14:02:12.037

你可以试试这个正则表达式：

```
/href="([^\'\"]+)/g 
```

示例：[http ://regexr.com?333d1](http://regexr.com?333d1)

**更新：**或更容易通过非贪婪方法：

```
/href="(.*?)"/g 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T14:24:45.737

这会做得很好。[http://jsfiddle.net/grantk/cvBae/216/](http://jsfiddle.net/grantk/cvBae/216/)

正则表达式示例：[https ://regex101.com/r/nLXheV/1](https://regex101.com/r/nLXheV/1)

```
var str = '<p href="missme" class="test"><a href="/CustomContentProcess.aspx?CCID=13524&amp;OID=3936923&amp;A=Delete" onclick="">delete</a></p>'

var patt = /<a[^>]*href=["']([^"']*)["']/g;
while(match=patt.exec(str)){
  alert(match[1]);
}
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-30T11:19:37.380

这是一个强大的解决方案：

```
let href_regex = /<a([^>]*?)href\s*=\s*(['"])([^\2]*?)\2\1*>/i,
    link_text = '<a href="/another-article/">another article link</a>',
    href = link_text.replace ( href_regex , '$3' ); 
```

[![来自 http://www.regexr.com 的彩色 href 正则表达式](../Images/eeab29e749534ddea640869ce5388fbb.png)](https://i.stack.imgur.com/zGd7E.png)

### 它能做什么：

*   检测到标签
*   懒惰跳过其他 HTML 属性和组 (1) 所以你 DRY
*   匹配`href`属性
*   考虑到周围可能的空白`=`
*   做一组（2），`'`所以`"`你干
*   匹配除组 (1) 和组 (3) 之外的任何内容
*   匹配组 (2)`'`和`"`
*   匹配组 (1)（其他属性）
*   匹配任何其他内容，直到关闭标签
*   设置正确的标志`i`忽略大小写

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T13:59:12.033

您可能不需要 Regex 来执行此操作。

```
o = document.getElementsByTagName('a');
urls = Array();
for (i =0; i < o.length; i++){
   urls[i] = o[i].href;
} 
```

如果是纯文本，你可以将它插入到显示的非DOM元素中，即`display: none`，然后按照我描述的方式定期处理它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T13:57:50.390

使用 jQuery 可能更容易

```
 var html = '<li><h2 class="saved_shirt_name">new shirt 1</h2><button class="edit_shirt">Edit Shirt</button><button class="delete_shirt" data-eq="0" data-href="/CustomContentProcess.aspx?CCID=13524&amp;OID=3936923&amp;A=Delete">Delete Shirt</button></li><li><h2 class="saved_shirt_name">new shirt 2</h2><button class="edit_shirt">Edit Shirt</button><button class="delete_shirt" data-eq="0" data-href="/CustomContentProcess.aspx?CCID=13524&amp;OID=3936924&amp;A=Delete">Delete Shirt</button></li><li><h2 class="saved_shirt_name">new shirt 3</h2><button class="edit_shirt">Edit Shirt</button><button class="delete_shirt" data-eq="0" data-href="/CustomContentProcess.aspx?CCID=13524&amp;OID=3936925&amp;A=Delete">Delete Shirt</button></li>';
$(html).find('[data-href]'); 
```

并迭代每个节点

**更新**（因为帖子已更新）

让 html 成为您的原始响应

```
var matches = $(html).find('[href]');
var hrefs = [];
$.each(matches, function(i, el){ hrefs.push($(el).attr('href'));});
//hrefs is an array of matches 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-13T23:39:41.370

我结合了一些解决方案并提出了这个（在.NET中测试）：

```
(?<=href=[\'\"])([^\'\"]+) 
```

解释：

(?<=) ：往后看，这样它就不会包含这些字符

[\'\"] : 匹配单引号和双引号

[^] : 匹配除 '^' 之后的所有字符

+ ：最后一个字符出现一次或多次。

这很好用并且对报价不贪心，因为它会在找到报价的那一刻停止匹配

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T14:02:01.807

```
var str = "";

str += "<p class=\"bc_shirt_delete\">";
str += "<a href=\"/CustomContentProcess.aspx?CCID=13524&amp;OID=3936923&amp;A=Delete\" onclick=\"javascript:return confirm('Are You sure you want to delete this item?')\">delete</a>";
str += "</p>"; 
```

* * *

```
var matches = [];

str.replace(/href=("|')(.*?)("|')/g, function(a, b, match) {
  matches.push(match);
});

console.log(matches); 
```

或者如果你不关心href：

```
var matches = str.match(/href=("|')(.*?)("|')/);

console.log(matches); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-20T11:46:16.030

= 周围的空格怎么样？此代码将修复它：

```
var matches = str.match(/href( *)=( *)("|'*)(.*?)("|'*)( |>)/);
console.log(matches); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-03T10:42:43.807

不贪心很重要。并迎合——匹配——`'` *或* `"`

```
test = "<a href="#" class="foo bar"> banana 
        <a href='http://google.de/foo?yes=1&no=2' data-href='foobar'/>"

test.replace(/href=(?:\'.*?\'|\".*?\")/gi,''); 
```

**免责声明**：它没有捕获的一件事是 html5 属性 data-href ......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-25T10:37:25.067

在这种特定情况下，这可能是最快的预赛：

```
/f="([^"]*)/ 
```

*   获取所有符号/字符（字母、数字、换行符等）形式*f="*到最近的下一个 "，不包括它，例如*/is*的标志是不必要的，如果为空则返回 null

但如果源包含许多其他链接，则有必要确定这正是您正在寻找的链接，在这里我们可以这样做，只需在您的预匹配中包含更多源代码，例如（当然它取决于源站点代码...）

```
/bc_shirt_delete">\s*<a href="([^"]*) 
```

# ios - “我希望用户仅通过应用内购买访问我屏幕中的某些视图。”

> ID：13802335
> 
> 赞同：-8
> 
> 时间：2012-12-10T13:53:20.077
> 
> 标签：ios

我正在使用 In-App Purchase，我在 iTune 添加了 StoreKit 框架和产品标识符设置为 In-App-Purchase。如果 iTunes 的应用内购买允许，我想下载我的应用的某些屏幕。我已经完成了所有需要的代码。

我的问题是：“我希望用户仅通过应用内购买访问我屏幕中的某些视图。”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:57:27.410

如果我对您的理解正确，您需要做的就是这样：

```
if (user_has_purchased_content) {
     [self presentModalViewController:myController animated:YES];
} else {
     // Don't..
} 
```

# android - 使用 Phone Gap 加载图像问题的 Android 应用程序

> ID：13802341
> 
> 赞同：0
> 
> 时间：2012-12-10T13:53:55.847
> 
> 标签：android, cordova, android-progressbar

我在 Android 项目的 Main Activity.java 文件中提供了我的 Web 应用程序 URL，以便使用 Phone Gap 框架转换为 Android 应用程序。我的应用程序需要时间加载到 Android 设备中，因此我想在加载时提供加载图像。

我给出了这样的代码：

```
 super.setIntegerProperty("loadUrlTimeoutValue", 100000);     
       super.loadUrl("http://abc company/application"); 

       ProgressDialog progressDialog = new ProgressDialog(this);
       progressDialog.setMessage("Loading...");
       progressDialog.setCancelable(true);
       progressDialog.setIndeterminate(true);          
       progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
       progressDialog.setProgress(0); // set percentage completed to 0%      
       progressDialog.show();          
      //  progressDialog.dismiss(); 
```

但是加载我的应用程序后会显示进度对话框，但我想在加载后将其关闭。这里是否需要 if 条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:59:31.800

您必须在 UI 线程上创建对话框并显示它，然后在其他线程中触发应用程序的负载，当线程工作完成时应该关闭对话框。

这里有一个例子：

[Android 教程：如何制作进度对话框](http://p-xr.com/android-tutorial-how-to-make-a-progress-dialog/)

代码示例：

```
private void runDialog(final int seconds)
{
        progressDialog = ProgressDialog.show(this, "Please wait....", "Here your message");

        new Thread(new Runnable(){
            public void run(){
                try {
                                  //Do your application load here

                    progressDialog.dismiss();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }).start();
} 
```

# c# - 如何用连续的 uint 填充 IEnumerable

> ID：13802342
> 
> 赞同：3
> 
> 时间：2012-12-10T13:53:57.460
> 
> 标签：c#

**这是生成连续列表的干净正确方法`uints`吗？**

演员表看起来有点难看，但我是初学者……可能有一种方法不用四处转换？

```
public class Test
{
    static readonly IEnumerable<uint> AvailableChannels 
         = (IEnumerable<uint>)Enumerable.Range(1,1000);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T13:56:22.793

```
static readonly IEnumerable<uint> AvailableChannels 
     = Enumerable.Range(1,1000)
       .Select(i => (uint)i)
       .ToList(); 
```

虽然它仍然是一个演员...

**编辑**
是这样 ，`.ToList()`每次循环遍历它时都不需要重新创建完整列表。（好吧，1000 个 uint 并不多，但它的原理是——如果它们是类，你每次都会创建新的类并得到意想不到的结果，比如丢失的更改）

**EDIT2**
在`Cast<uint>()`运行时不起作用（“指定的演员表无效”）。更改为 a`.Select`以执行演员表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T13:57:45.553

您可以编写自己的可枚举方法：

```
public static IEnumerable<uint> Foo(
    uint startValue =0, 
    uint maxValue = uint.MaxValue
    )
{
    uint index = startValue;
    while(index < maxValue) {
        yield return index++;
    }
}

public static void Main()
{
    var myUints = Foo().Take(100);
    var myUints2 = Foo(startValue:0, maxValue:1000);
    var myUints3 = Foo(0, 1000);
    foreach(uint x in myUints) {
        Console.WriteLine(x);
    }
} 
```

附注：如果性能是您的应用程序中的一个关键点，您可能会阅读这个问题：[为什么 Enumerable.Range 比直接 yield 循环快？](https://stackoverflow.com/a/408494/588868)（尤其是标记为答案的答案）

# android - FrameLayout里面的FrameLayout和定位FrameLayout右边的父FrameLayout？

> ID：13802348
> 
> 赞同：3
> 
> 时间：2012-12-10T13:54:12.910
> 
> 标签：android, android-layout, android-framelayout

我正在尝试创建一个包含子 Framelayout 的 Framelayout，我无法将子 Framelayout 定位到父 Framelayout 的右侧！

我试过`android:foregroundGravity="right"`和 `android:layout_weight="1"`

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:layout_weight="1">    

<com.example.ListViewActivity
        android:id="@+id/list_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
</com.example.ListViewActivity>

    <FrameLayout
        android:id="@+id/indexRight"
        android:layout_width="36dp"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:background="@color/white"      
        android:orientation="vertical" >

    </FrameLayout>

</FrameLayout> 
```

截屏：![在此处输入图像描述](../Images/ab1c5ead584ed122bba6230645c84fee.png)

如上图所述，我想将白色 FrameLayout 移到右侧。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:12:46.070

来自[Android](http://developer.android.com/reference/android/widget/FrameLayout.html)文档`FrameLayout`

> FrameLayout 被设计为在屏幕上屏蔽一个区域以显示单个项目

您应该使用 a`LinearLayout`或 a`RelativeLayout`作为根，除非您想在任何给定时间只显示一个孩子。我假设这`com.example.ListViewActivity`是您已经实现的自定义视图，而不是实际的`Activity`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">    

    <com.example.ListViewActivity
        android:id="@+id/list_view"
        android:layout_width="0dp"
        android:layout_height="fill_parent" 
        android:layout_weight="1">
    </com.example.ListViewActivity>

    <!-- This FrameLayout will be located on the right side, with the ListView on its left side -->
    <FrameLayout
        android:id="@+id/indexRight"
        android:layout_width="36dp"
        android:layout_height="fill_parent"
        android:background="@color/white">
        <!-- SINGLE child here -->
    </FrameLayout>
</LinearLayout> 
```

# c# - 处理时报告查看器冻结

> ID：13802349
> 
> 赞同：0
> 
> 时间：2012-12-10T13:54:18.557
> 
> 标签：c#, reporting-services, ssrs-2008, reportviewer, report-viewer2010

我目前正在开展一个项目，远程用户将拥有自己的应用程序实例（*在 Visual Studio 2010 中开发*）和与服务器上的中央数据库同步的数据库副本；办公室内的人员也可以访问托管在服务器上的此应用程序。

在每个远程用户的笔记本电脑和服务器上，都有在 Microsoft Reporting Services 中生成的报告，在应用程序中，我使用报告查看器（*在 Visual Studio 2010 的工具箱中提供*）来查看这些报告。

在远程用户的一台计算机上，我能够在没有任何问题的情况下查看所有报告，但是当尝试在服务器上查看它们时，选择取决于另一个参数的参数时，所有参数字段都会被禁用，当您单击视图报告时按钮没有任何反应（如下图所示）。

![在此处输入图像描述](../Images/7a72b0ed7322076f5007775cdd2df7c7.png) *根据区域参数中选择的值填充练习参数*

如果我要通过转到 localhost/Reports_SQLEXPRESS 直接查看这些报告，则这些报告可以正常工作并且没有问题。

我在服务器上运行了以下[exe](http://www.microsoft.com/en-us/download/details.aspx?id=6442)，但无济于事。

**有关机器的信息**

***服务器机器*** 操作系统：Windows Server 2008 R2 Enterprise (Service Pack 1)

数据库：SQL 2008 R2

已安装 Visual Studio：否（从未安装）

已安装 IIS：7.5.7600.16385

***远程用户机器*** 操作系统：Windows 7 Professional (Service Pack 1)

数据库：具有高级服务的 SQL Express 2008 R2

已安装 Visual Studio：是（Visual Studio 2008 和 2010）

已安装 IIS：7.5.7600.16385

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:16:25.070

我注意到我的错误是由服务器副本而不是远程用户计算机上发生的 JavaScript 错误引起的。

我得到的错误如下：

> Microsoft JScript 运行时错误：Sys.ArgumentNullException：值不能为空。参数名称：panelsCreated[2]

我在[Codeplex](http://ajaxcontroltoolkit.codeplex.com/workitem/26725)网站上找到了解决方案，使用 .Net4 和 ReportViewer2010 时似乎是一个错误。正如上面链接中提到的，我将属性 ScriptMode 添加到我的 AjaxToolkitScriptManager 并将属性设置为 Release Mode，它现在可以工作了。

* * *

我还遇到了另一个问题，即 ReportViewer 冻结并在 IE11 中不显示数据。

在事件查看器中抛出以下错误

> 缺少 URL 参数：IterationId

我可以按照以下帖子中的说明解决此问题

[SSRS 报表查看器 - 报表图表无法在 IE11 中显示](https://stackoverflow.com/questions/28049691/ssrs-report-viewer-report-chart-fails-to-display-in-ie11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:51:41.583

我会确保您遵循此处发布的步骤：[根据参数选择更新报告参数？(SSRS)](https://stackoverflow.com/questions/1053396/updating-report-parameters-based-on-perameter-selection-ssrs)

引用的工作方式可能有问题。

# javascript - 逻辑或代替三进制

> ID：13802352
> 
> 赞同：3
> 
> 时间：2012-12-10T13:54:26.770
> 
> 标签：javascript, ternary-operator, logical-operators

我有一个遗留脚本。这是其中的一部分：

```
var e = e ? e : event; 
```

所以，这里没有错。但我主要将三元用于工具。可以这样安全地重写吗

```
var e = e || event; 
```

不使用这个有什么隐藏的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:17:18.933

在您的示例`e`中，如果它不是一个*虚假*值，则将使用它，例如`false, 0, "", null, undefined`. 否则`event`将被使用。在你的情况下，这应该被保存。

但是使用更复杂的逻辑表达式而不是 if-then-else（或三元）存在一些危险。这是一个例子：

```
result = value > 10 && getA() || getB() 
```

如果*守卫* `value > 10`评估为`true`AND`getA()`返回一个*假*值，`getB()`则将返回。这与 if-then-else 行为不同，后者*会*返回`getA()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T14:05:41.013

必须小心第二个选项，你基本上期望如果'e'不是假的，它会将它分配给你本地的'e'，否则，你将使用'event'，但是如果，例如, 'e' 是“0”，你希望你的本地 'e' 有什么？“0”还是“事件”？因为在您的情况下，您的本地“e”无论如何都会以“事件”结尾。

# ant - 使用 ant 修改包含另一个文件中的值的文件

> ID：13802355
> 
> 赞同：2
> 
> 时间：2012-12-10T13:54:51.920
> 
> 标签：ant

如果该行与电子邮件地址列表中的任何一个匹配，我目前正在使用 ant 从文件中删除行，并输出一个没有这些电子邮件地址的新文件，如下所示：

```
<copy file="src/emaillist.tmp2" tofile="src/emaillist.txt">
   <filterchain>
       <linecontains negate="true"><contains value="paultaylor@hotmail.com"/>     
       </linecontains>
       <linecontains negate="true"><contains value="paultaylor2@hotmail.com"/>           
       </linecontains>
            ........

            ........
   </filterchain>
</copy> 
```

但是我已经有一个包含我要删除的无效电子邮件地址列表 (invalidemail.txt) 的文件，因此我希望我的 ant 文件从该文件中读取无效电子邮件地址列表，而不必为每个文件添加一个元素我不想要的电子邮件。无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:29:04.233

Ant 有一些有用的资源列表处理任务。这是一个“原型”解决方案。

将输入和排除列表加载到两个资源集合中，默认情况下在换行符处进行[标记。](http://ant.apache.org/manual/Types/resources.html#tokens)

```
<tokens id="input.list">
    <file file="src/emaillist.tmp2"/>
</tokens>
<tokens id="invalid.list">
    <file file="invalidemail.txt"/>
</tokens> 
```

做一些[设置算法](http://ant.apache.org/manual/Types/resources.html#intersect)来生成干净电子邮件的资源列表：

```
<intersect id="to_be_removed.list">
    <resources refid="input.list"/>
    <resources refid="invalid.list"/>
</intersect>

<difference id="clean.list">
    <resources refid="input.list"/>
    <resources refid="to_be_removed.list"/>
</difference> 
```

以下是一些可能有用的诊断：

```
<echo message="The input list is: ${ant.refid:input.list}" />
<echo message="Emails to be removed: ${ant.refid:to_be_removed.list}" />
<echo message="The clean list is: ${ant.refid:clean.list}" /> 
```

使用该[`pathconvert`任务](http://ant.apache.org/manual/Tasks/pathconvert.html)将清理列表重新格式化为每行一个条目：

```
<pathconvert property="clean.prop" refid="clean.list"
             pathsep="${line.separator}" /> 
```

最后，输出到一个文件：

```
<echo file="src/emaillist.txt">${clean.prop}
</echo> 
```

# ruby-on-rails - 如何在 Rspec (Selenium) 中设置浏览器窗口大小

> ID：13802363
> 
> 赞同：17
> 
> 时间：2012-12-10T13:55:40.643
> 
> 标签：ruby-on-rails, selenium, capybara, integration-testing

我正在使用**capybara, Selenium**进行 Ruby On Rails 集成测试。

如何设置测试浏览器窗口的高度和宽度？

我搜索了，但没有什么对我有用。

我尝试了以下代码。

```
page.execute_script('$(window).width(1200)') 
```

任何一个都可以。请。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-10T17:28:49.390

您可以使用`resize_to(width, height)`selenium webdriver 中的方法。

例如，以下内容将使浏览器宽 100 像素，高 200 像素：

```
page.driver.browser.manage.window.resize_to(100,200) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-26T12:29:18.827

它对我有帮助：

```
Capybara.register_driver :chrome do |app|
  Capybara::Selenium::Driver.new(app, 
    browser: :chrome,
    desired_capabilities: {
      "chromeOptions" => {
        "args" => %w{ window-size=1024,768 }
      }
    }
  )
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-18T04:49:24.930

建立在 Justin Ko 的有用答案之上：

将模块导入`responsive_helper`您的规范文件怎么样？例如，

```
module ResponsiveHelpers

  def resize_window_to_mobile
    resize_window_by([640, 480])
  end

  def resize_window_to_tablet
    resize_window_by([960, 640])
  end

  def resize_window_default
    resize_window_by([1024, 768])
  end

private

  def resize_window_by(size)
    Capybara.current_session.driver.browser.manage.window.resize_to(size[0], size[1]) if Capybara.current_session.driver.browser.respond_to? 'manage'
  end
end 
```

[看看这个！](http://railsware.com/blog/2015/02/11/responsive-layout-tests-with-capybara-and-rspec/)

# java - 使用什么方法使 Servlet 线程安全？

> ID：13802367
> 
> 赞同：1
> 
> 时间：2012-12-10T13:55:50.250
> 
> 标签：java, servlets, thread-safety

我正在尝试使用会话使 servlet 线程安全。我已经阅读了不同的技术，例如同步块、AtomicReference 或 ConcurrentHashMap。如果有的话，每种技术的权衡是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:01:05.767

servlet 的第一个目标是通过无共享状态来实现线程安全。任何共享状态都不会是 servlet 部署到负载平衡集群时的状态。因此，如果您的共享状态不是*缓存*风格，这意味着它总是可以从持久存储中重建，那么您一开始就不应该拥有它。

但是，除了这些问题之外，如果不提供有关您尝试使用共享状态解决的问题的任何详细信息，您就无法获得一刀切的答案。您提到的所有技术都有优点，这就是为什么在使用 Java 15 年之后它们仍然存在于我们身边的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:51:42.583

servlet 不应该有状态，即受其请求处理方法影响的实例或静态变量（此外，它的请求处理方法不应影响任何共享对象的状态）。每个 servlet 容器只有一个 servlet 实例，每个请求都使用一个新的线程来处理，该线程运行适当的 Servlet 方法（更常见的是 doGet() 或 doPost()）。

但是，servlet API 提供了以开箱即用的线程安全方式存储与特定用户会话相关的数据所需的所有功能。例如，您可以通过 HttpServletRequest#getSession() 获取会话，并使用其 setAttribute() 方法将对象存储在特定会话中，并使用 getAttribute() 在同一会话的另一个请求中获取它们。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:32:52.137

首先，servlet 应该是无状态的，这有利于应用程序的可扩展性。实际上，基于 Servlet API 的 Session Object 具有很强的可扩展性，您可以编写自己的 HttpSession 实现，使 Session 访问线程安全。恕我直言，您应该提供更多场景的详细信息，因为在您上面提到的那些数据结构中，最后两个似乎与 Session 的线程安全访问无关。

# google-maps - Fusion Tables / KML 保留或合并属性以允许查询

> ID：13802371
> 
> 赞同：1
> 
> 时间：2012-12-10T13:56:02.113
> 
> 标签：google-maps, gis, kml, google-fusion-tables, qgis

我从 shapefile 创建了一个 .kml 多边形文件。然后我创建一个上传 .kml 的融合表。我希望能够查询 shapefile 的属性，但所有属性都加载到 html 对象“描述”中。我不仅希望能够查询属性表，而且希望将多边形要素保留为地图中的图层。

我认为至少有两种方法可以解决这个问题：a) 将[KML 融合表](https://www.google.com/fusiontables/DataSource?docid=14oiEr6Iz8gbsrnB4CRTIZ1NU0HYZcCJXrHAI1og)与包含所有属性（即导出为 .csv）的[相同融合](https://www.google.com/fusiontables/DataSource?docid=1B347cIq5Eq19e5IynDMmUHPmWUZ0TVxAA-4l5pU)表层合并 - 我通过将位置属性数据与几何列，它不保留多边形特征。

如果我可以使用几何/位置以外的列成功合并 2 个表（保留多边形特征和属性） - 如何在 Google Fusion Tables 中生成一组对每个表都一致的唯一 ID？

b) 从 html 对象“描述”中提取属性作为新列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:17:49.950

我从[pvanb 的有用博客中找到了答案](http://pvanb.wordpress.com/2012/07/31/exporting-vector-layer-as-kml-in-qgis/)

引用他的话：-

"*在 QGIS 中，您使用 QGIS 中的“另存为”选项。您可以使用上下文菜单（在图层上单击鼠标右键）或菜单“图层|另存为..”来获取此选项。在打开的菜单中，有标题“OGR 创建选项”下的两个字段；“数据源”和“图层”。在“数据源”字段中，您可以定义要用于填充 kml 文件中的名称和描述字段的列。您通过定义 NameField 和 DescriptionField 来做到这一点。例如， NameField=PNVname 和 DescriptionField=PNVcode*。

还有更多选项，但基本上我发现的是，通过仅列出 Namefield=（唯一 ID 表）并完全忽略 DescriptionField，shapefile 中的所有数据列都被保留，因此甚至不需要合并另一个表，你得到多边形！

极好的

# jquery - jQuery FormatCurrency 插件：如何更改选项的默认值？

> ID：13802374
> 
> 赞同：0
> 
> 时间：2012-12-10T13:56:15.807
> 
> 标签：jquery, jquery-plugins

我正在尝试使用[jquery-formatcurrency](http://code.google.com/p/jquery-formatcurrency/wiki/Usage)插件。

我需要将`roundToDecimalPlace`选项默认设置为 0。也就是说，我不想在每次调用时都指定`jQueryObject.val().formatCurrency({roundToDecimalPlace: 0});`

相反，我只想说`jQueryObject.val().formatCurrency();`

我尝试像这样设置它： `$.formatCurrency.defaults.roundToDecimalPlace = 0;`但`defaults`未定义。

我也试过`$.formatCurrency.defaults = {roundToDecimalPlace: 0};`，但没有效果。

我发现 $.formatCurrency 只提供了一个调用`region`来配置的对象，但这样做`$.formatCurrency.region.roundToDecimalPlace = 0;`并没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:12:45.373

您不能只为插件发明功能，例如`defaults`. 它必须将功能编程到插件中，准备好使用。

如果您对多次编程感到烦恼，请创建自己的方法，您可以一次又一次地重用，但您只定义了`roundToDecimalPlace`一次。

例如，下面的代码可以将 jQueryObject 传递给它并返回格式化的值：

```
function FormatMyCurrency(jQueryObject)
{
    var formattedCurrency= jQueryObject.val().formatCurrency({roundToDecimalPlace: 0});

    return formattedCurrency;
} 
```

然后可以通过以下方式一次又一次地使用它：

```
var myFormattedCurrency = FormatMyCurrency(jQueryObject); 
```

# java - 如何在 jsoup 中使用 OR 运算？

> ID：13802375
> 
> 赞同：0
> 
> 时间：2012-12-10T13:56:15.847
> 
> 标签：java, jsoup

```
Elements nextLinks = doc.select(a[href*=https] || a[href*=http]); 
```

我需要连接 HTTP 和 HTTPS 站点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:03:35.157

为此使用`,`逗号分隔符

以下应该做

```
Elements nextLinks = doc.select("a[href*=https] , a[href*=http]"); 
```

看看这个：[选择器语法](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)和这个：[使用选择器语法来查找元素](http://jsoup.org/cookbook/extracting-data/selector-syntax)

# css - 将图像定位在 div 的中心

> ID：13802379
> 
> 赞同：0
> 
> 时间：2012-12-10T13:56:30.957
> 
> 标签：css

我有一个带有 id 的 div，`leftheader`我想在 div 的中心放置一个图像。我正在尝试这个 CSS

```
#leftheader {
    float: left;
    width: 28%;
    height: 140px;
    margin: auto;
}

#leftheader img {
   /*padding-left: 80px;*/
} 
```

当我使用 时`padding-left: 80px;`，我得到图像的中心对齐。但由于我用过`%`的宽度`leftheader`，我不想用`pixel values`。谁能建议我一个更通用的 CSS 布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:59:00.687

如果您使用文本对齐 :center; 你的图像应该在 div 中居中。

```
#leftheader {
    float: left;
    width: 28%;
    height: 140px;
    margin: auto;
    text-align: center;
} 
```

# html - SHDocVw - 创建用于打印的 IE9 com 实例

> ID：13802380
> 
> 赞同：1
> 
> 时间：2012-12-10T13:56:31.363
> 
> 标签：html, printing, com, internet-explorer-9, ole

我有创建 IE9 com 对象实例的 .net 3.5 应用程序。

```
InternetExplorerClass  ie = new InternetExplorerClass(); 
```

对我来说不幸的是，有时创建新对象会失败，并出现一般的 80004005 错误。 [我在这里注意到了一个类似的帖子](https://stackoverflow.com/questions/12423108/shdocvw-internetexplorer-printing-serverside-failing-com-exception/13800650#13800650)，但是没有为 IE9 案例提供解决方案。

你能帮我解决这个问题吗？我应该如何创建 ie9 对象，这样我就不会再出现错误了？谢谢你，瓦伦丁

# c# - 基类中的基构造函数而不是 C# 中的派生类

> ID：13802382
> 
> 赞同：1
> 
> 时间：2012-12-10T13:56:45.083
> 
> 标签：c#, constructor, abstract-class

我正在学习如何在 C# 中正确应用 OO 原则。我遇到了一个小问题，我不知道如何解决它。我遇到以下问题：

目前的情况：

```
public abstract class Foo
{
    protected Foo()
    {
        //does nothing
    }
}

public class Bar : Foo
{
    public BarX ( int a, int b, int c) : base()
    {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public doStuff()
    {
        //does stuff
    }
}

public class BarY : Foo
{
    public Bar( int a, int b, int c) : base()
    {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public doStuff()
    {
        //does stuff
    }
} 
```

关键是我有不同类型的`Foo`. 在这种情况下，它将是圆形和矩形。我希望它们具有相同的构造函数，因为每种类型都具有相同的属性。他们只有不同的`doStuff()`方法。我尝试了很多组合，但每次我尝试将参数移动到基类的构造函数时，它都会告诉我“某些类不包含带 0 个参数的构造函数”（或 3 个参数），具体取决于我在代码中的移动方式。

我的问题是如何将 a、b 和 c 的值分配给抽象类的构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:00:46.837

以下将起作用：

```
public abstract class Foo
{
    protected Foo(int a, int b, int c)
    {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public abstract void doStuff();
}

public class Bar : Foo
{
    public Bar(int a, int b, int c) : base(a, b, c)
    {
    }

    public override void doStuff()
    {
        //does stuff
    }
}

public class BarY : Foo
{
    public BarY(int a, int b, int c) : base(a, b, c)
    {
    }

    public override void doStuff()
    {
        //does stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:01:38.560

那是因为当你只有一个参数化的构造函数时`BarY`，并且`BarX`正在调用一个默认构造函数 ( `base()`)，它在你的基类中不存在。您还需要通过 ( `base(a, b, c)`) 传递参数：

```
public abstract class Foo
{
    protected Foo(int a, int b, int c) 
    {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public abstract void doStuff();
}

public class Bar : Foo
{
    public BarX (int a, int b, int c) : base(a, b, c)
    {

    }

    public override void doStuff()
    {
        //does stuff
    }
}

public class BarY : Foo
{
    public Bar(int a, int b, int c) : base(a, b, c)
    {

    }

    public override void doStuff()
    {
        //does stuff
    }
} 
```

# c++ - 如何使用 clang 和 llvm-link 链接库

> ID：13802383
> 
> 赞同：0
> 
> 时间：2012-12-10T13:56:56.513
> 
> 标签：c++, c, makefile, llvm

我正在像这样编译我的程序，

```
clang++ -O4 -emit-llvm file1.cpp -c -o file1.bc -pthread 
clang++ -O4 -emit-llvm file2.cpp -c -o file2.bc -pthread

llvm-link file1.bc file2.bc -o main.ll -S 
```

如何指定与**-ldl的链接**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:43:34.653

`llvm-link` is a program which "links" together LLVM IR files into a single IR file; you can read more about it [here](http://llvm.org/docs/CommandGuide/llvm-link.html). It does not have any relation to `ld` or to linking object files together.

If you do want to generate object code and/or executables, see these related questions:

*   [How to generate machine code with llvm](https://stackoverflow.com/q/13464259/242762)
*   [llvm-link with external libraries](https://stackoverflow.com/q/12685976/242762)

In short, you should be using native tools for assembling and linking (`as` and `ld`, for instance), though there is currently some experimental support for generating object files and for linking in LLVM.

In any case, Clang itself can invoke a platform linker - that is actually the default, but of course you have overridden by providing `-c`.

# wcf - 如何使用多个 WCF 服务实例强制执行消息队列序列

> ID：13802385
> 
> 赞同：7
> 
> 时间：2012-12-10T13:57:07.177
> 
> 标签：wcf, msmq, failover

我想创建一个使用 MSMQ 绑定的 WCF 服务，因为我有大量的通知要处理。重要的是客户端不会被服务拖住，并且通知按照它们被引发的顺序进行处理，因此是队列实现。

另一个考虑因素是弹性。我知道我可以集群 M​​SMQ 本身以使队列更加健壮，但我希望能够在不同的服务器上运行我的服务实例，因此如果服务器崩溃通知不会在队列中建立但另一台服务器继续处理.

我已经对 MSMQ 绑定进行了试验，发现您可以让多个服务实例在同一个队列上进行侦听，并且它们最终会进行一种循环，负载分布在可用服务中。这很好，但我最终会丢失队列的顺序，因为不同的实例需要不同的时间来处理请求。

我一直在使用一个简单的控制台应用程序进行实验，这是下面的史诗代码转储。当它运行时，我得到如下输出：

```
host1 open
host2 open
S1: 01
S1: 03
S1: 05
S2: 02
S1: 06
S1: 08
S1: 09
S2: 04
S1: 10
host1 closed
S2: 07
host2 closed 
```

我想要发生的是：

```
host1 open
host2 open
S1: 01
<pause while S2 completes>
S2: 02
S1: 03
<pause while S2 completes>
S2: 04
S1: 05
S1: 06
etc. 
```

我会认为由于 S2 尚未完成，它可能仍然会失败并将正在处理的消息返回到队列中。因此，不应允许 S1 从队列中拉出另一条消息。我的队列是事务性的，我尝试设置`TransactionScopeRequired = true`服务但无济于事。

这甚至可能吗？我是不是走错了路？在没有某种中央同步机制的情况下，是否有其他方法可以构建故障转移服务？

```
class WcfMsmqProgram
{
    private const string QueueName = "testq1";

    static void Main()
    {
        // Create a transactional queue
        string qPath = ".\\private$\\" + QueueName;
        if (!MessageQueue.Exists(qPath))
            MessageQueue.Create(qPath, true);
        else
            new MessageQueue(qPath).Purge();

        // S1 processes as fast as it can
        IService s1 = new ServiceImpl("S1");
        // S2 is slow
        IService s2 = new ServiceImpl("S2", 2000);

        // MSMQ binding
        NetMsmqBinding binding = new NetMsmqBinding(NetMsmqSecurityMode.None);

        // Host S1
        ServiceHost host1 = new ServiceHost(s1, new Uri("net.msmq://localhost/private"));
        ConfigureService(host1, binding);
        host1.Open();
        Console.WriteLine("host1 open");

        // Host S2
        ServiceHost host2 = new ServiceHost(s2, new Uri("net.msmq://localhost/private"));
        ConfigureService(host2, binding);
        host2.Open();
        Console.WriteLine("host2 open");

        // Create a client 
        ChannelFactory<IService> factory = new ChannelFactory<IService>(binding, new EndpointAddress("net.msmq://localhost/private/" + QueueName));
        IService client = factory.CreateChannel();

        // Periodically call the service with a new number
        int counter = 1;
        using (Timer t = new Timer(o => client.EchoNumber(counter++), null, 0, 500))
        {
            // Enter to stop
            Console.ReadLine();
        }

        host1.Close();
        Console.WriteLine("host1 closed");
        host2.Close();
        Console.WriteLine("host2 closed");

        // Wait for exit
        Console.ReadLine();
    }

    static void ConfigureService(ServiceHost host, NetMsmqBinding binding)
    {
        var endpoint = host.AddServiceEndpoint(typeof(IService), binding, QueueName);
    }

    [ServiceContract]
    interface IService
    {
        [OperationContract(IsOneWay = true)]
        void EchoNumber(int number);
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    class ServiceImpl : IService
    {
        public ServiceImpl(string name, int sleep = 0)
        {
            this.name = name;
            this.sleep = sleep;
        }

        private string name;
        private int sleep;

        public void EchoNumber(int number)
        {
            Thread.Sleep(this.sleep);
            Console.WriteLine("{0}: {1:00}", this.name, number);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T18:29:59.007

巴特瓦德，

您正在尝试手动创建服务总线。你为什么不尝试使用现有的？

NServiceBus、MassTransit、ServiceStack

其中至少有 2 个与 MSMQ 一起工作。

此外，如果您绝对需要订购它实际上可能是出于另一个原因 - 您希望能够发送消息并且您不希望在第一条消息之前处理相关消息。您正在寻找 Saga 模式。NServiceBus 和 MassTransit 都可以让你轻松管理 Sagas，它们都可以让你简单地触发初始消息，然后根据条件触发剩余的消息。它将允许您快速实现分布式应用程序的填充。

然后，您甚至可以扩展到数千个客户端、队列服务器和消息处理器，而无需编写任何代码或任何问题。

我们试图在这里通过 msmq 实现我们自己的服务总线，但我们放弃了，因为另一个问题不断出现。我们选择了 NServiceBus，但 MassTransit 也是一款出色的产品（它是 100% 开源的，而 NServiceBus 不是）。ServiceStack 在制作 API 和使用消息队列方面非常出色——我相信您可以使用它在几分钟内制作充当队列前端的服务。

哦，我有没有提到 NSB 和 MT 都只需要不到 10 行代码就可以完全实现队列、发送者和处理程序？

- - - 添加 - - -

Udi Dahan（NServiceBus 的主要贡献者之一）在： [Udi Dahan 的“按顺序消息传递神话”](http://www.udidahan.com/2007/12/09/in-order-messaging-a-myth/) [“消息排序：是否具有成本效益？”中谈到了这一点。与乌迪·达汉](http://www.udidahan.com/2008/01/01/podcast-message-ordering-is-it-cost-effective/)

Chris Patterson（Mass Transit 的主要贡献者之一） [“使用 Sagas 确保正确的消息顺序”问题](https://groups.google.com/forum/?fromgroups=#!topic/masstransit-discuss/YGQeCDgHXk4)

StackOverflow 问题/答案： [“在 WCF 应用程序中使用 MSMQ 消息时保留消息顺序”](https://stackoverflow.com/questions/13030443/preserve-message-order-when-consuming-msmq-messages-in-a-wcf-application)

- - - 问题 - - -

我必须说我很困惑为什么你需要保证消息顺序——如果你使用的是 HTTP/SOAP 协议，你会处于同样的位置吗？我的猜测是否定的，那为什么在 MSMQ 中会出现问题？

祝你好运，希望这会有帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:25:57.880

确保消息的有序传递是大容量消息传递的实际棘手问题之一。

在理想情况下，您的消息目的地应该能够处理乱序消息。这可以通过确保您的消息源包含某种排序信息来实现。再次理想情况下，这采用某种形式的 x-of-n 批戳（消息 1 of 10、2 of 10 等）。然后，您的消息目的地需要在数据交付后将数据组装成顺序。

然而，在现实世界中，通常没有改变下游系统来处理乱序到达的消息的余地。在这种情况下，您有两个选择：

1.  完全使用单线程 - 实际上您通常可以找到某种“分组 ID”，这意味着您可以在每个组的意义上使用单线程，这意味着您仍然可以跨不同的消息组进行并发。
2.  在您希望按顺序接收消息的每个消费者系统周围实施一个[重新排序器包装器。](http://www.eaipatterns.com/Resequencer.html)

这两种解决方案都不是很好，但这是我认为您可以进行并发和按顺序消息传递的唯一方法。

# visual-studio - 在 VS 2012 Premium 中删除未使用的使用

> ID：13802387
> 
> 赞同：3
> 
> 时间：2012-12-10T13:57:15.497
> 
> 标签：visual-studio, reference, project

我正在使用 Microsoft Visual Studio Premium 2012。

**[微软方向](http://msdn.microsoft.com/en-us/library/bb514115.aspx)说明：**

*   **主菜单**- 在“**编辑”菜单**上，指向**IntelliSense**，指向“**组织使用**”，然后单击**“删除未使用的使用”**。

但是，“编辑”菜单选项卡上的“智能”菜单中没有名为“组织使用”的选项。我可以使用上下文菜单来完成此操作……但该选项仅出现在单个打开的代码隐藏文件中（当我打开它时）。在大型项目中一次执行一个代码文件对我来说毫无用处。

还...

我在这个站点上查看了 Visual Studio 以前版本的其他问题，他们的答案在 2012 Premium 中不起作用。

**所以我的问题是...**

**如何在 Microsoft Visual Studio Premium 2012 中跨单个项目或解决方案“删除未使用的使用”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T08:32:27.697

您可以使用[此链接](http://vihang-shah.blogspot.fr/2011/08/3-reasons-to-remove-unused-using-in.html)中的宏打开项目的所有文件并删除未使用的使用。否则， [PowerCommands](http://archive.msdn.microsoft.com/PowerCommands)包含一些有用的扩展，包括一个删除所有未使用的使用的扩展（尽管从未测试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T23:07:24.800

您可能必须编写一个 Visual Studio 扩展来执行此操作。

# objective-c - TabBar + iOS 6 + iPad tabBar 消失

> ID：13802388
> 
> 赞同：0
> 
> 时间：2012-12-10T13:57:25.887
> 
> 标签：objective-c, ipad, ios6, tabbarcontroller

我有在 iOS 5 上运行良好的 iPad 应用程序。我的应用程序根视图控制器实现了 UITabBarDelegate 和 UINavigationControllerDelegate。但在 iOS 6 上，我只能看到一次 tabBar - 第一次运行。在第二。第三个等运行 tabBar 消失。那么WFT？%-)

这是我的 AppDelegate 的 applicationDidFinishLaunching:application:

```
- (void)applicationDidFinishLaunching:(UIApplication*)application
{
...
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        CGRect mainViewFrame = _window.frame;
        CGRect statusBarFrame = [UIApplication sharedApplication].statusBarFrame;
        mainViewFrame.origin.y = CGRectGetHeight(statusBarFrame);
        mainViewFrame.size.height -= CGRectGetHeight(statusBarFrame);
        [self padMainController].view.frame = mainViewFrame;

        [_window setRootViewController:[self padMainController]];
    }
...
} 
```

这是 padMainController 标头的片段：

```
@interface LTPadMainController : LTAutorotateController <UINavigationControllerDelegate, UITabBarDelegate> 
```

以及 LTAutorotateController 的片段：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad && UIDeviceOrientationIsLandscape(interfaceOrientation)) || (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && UIDeviceOrientationIsPortrait(interfaceOrientation)));
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

# java - 将 JSON 导入 Netbeans 项目

> ID：13802396
> 
> 赞同：9
> 
> 时间：2012-12-10T13:57:50.390
> 
> 标签：java, json, import, package

我需要将 JSON 库导入 netbeans。

我怎样才能做到这一点？

我在互联网上搜索并找到[了这篇](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)文章。

根据这篇文章，我导入时

```
import org.json.simple.JSONArray;
import org.json.simple.JSONObject 
```

那，它必须是工作。但不幸的是，它没有奏效。我得到一个错误：

```
Package doesnt exist 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:07:52.470

正如文章所说，您需要将 simple-json 库添加到您的项目中：

[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-03T07:50:10.087

为此，我们必须添加[json-20131018.jar 中可用的 Class org.json.JSONObject](http://mvnrepository.com/artifact/org.json/json/20131018)。我们需要下载这个 jar 并将这个 jar 添加到您的构建路径中。

在netbeans中右键单击项目列表中的“库”，然后单击添加jar/文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-13T17:44:29.520

从这里下载 jar：[https](https://code.google.com/archive/p/json-simple/downloads) ://code.google.com/archive/p/json-simple/downloads 然后将其添加到 netbeans 中的“库”中。

添加了这个答案，因为其他答案没有提供上面的链接，这是最容易下载jar的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T15:39:02.013

尝试添加 json-20131018.jar。这解决了我的问题。 [http://mvnrepository.com/artifact/org.json/json/20131018](http://mvnrepository.com/artifact/org.json/json/20131018)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T06:02:33.317

或者，不要依赖使用[旧导入的](https://stackoverflow.com/q/13802396/13911259)[旧版本](https://code.google.com/archive/p/json-simple/downloads)，而是使用带有新导入的[新版本](https://github.com/fangyidong/json-simple)：

```
import com.github.cliftonlabs.json_simple.*; 
```

对于 Netbeans，您可以右键单击项目并进入库以确保将 jar 文件添加到类路径（而不是模块路径）中。按“+”按钮将其添加到该部分下，方法是使用带有构建 jar 和 javadoc jar 的创建库，或者更简单地说，只需将单个 jar 文件 (json-simple-3.1.1.jar) 直接添加到类路径。

After doing this, the jar file should show up in the 'Libraries' folder under the project.

# android - Android：应用启动和退出的逻辑

> ID：13802397
> 
> 赞同：0
> 
> 时间：2012-12-10T13:57:50.810
> 
> 标签：android, android-lifecycle

我希望能够在我的 Android 应用程序启动以及退出时执行一些逻辑。我知道在 Android 中并没有这样的概念，因为每个活动都有自己的生命周期。

假设我有活动 A、B、C 和 D，并且 A 是根活动。

**应用启动：**

*   我可以将逻辑放入`onCreate()`A 中，但是当方向改变时以及（可能，如果内存不足）如果用户`Back`从活动 B、C 或 D 中按下键，也会调用此逻辑。

*   我可以创建一个扩展`Application`并将逻辑放入的类`onCreate()`。我试过这个，但`onCreate()`在我按下`Home`键然后通过单击主菜单中的相关图标重新启动应用程序的情况下没有被调用。

**应用退出：**

*   `onStop()`我可以在所有活动中或为所有活动放入逻辑`onDestroy()`，但我需要再次判断这是否由于转换到我的应用程序中的另一个活动而没有被调用。另外，不能保证内存不足时会调用这些函数吗？

*   我可以在所有活动中覆盖 onLeaveUserHint() - 这样做有什么缺点吗？

**编辑（根据 CommonsWare 的要求）：**

**“应用程序启动”** - 我对应用程序启动的解释是当我的活动中的一个活动在显示时没有显示（例如，用户在主菜单中单击我的应用程序图标）。

**“应用程序退出”** - 我对应用程序“退出”的解释是当我的任何活动都没有显示时，因为用户在显示其中一个活动后故意离开活动（例如，通过按“主页”键或“返回” “ 钥匙）。

（我希望这能提供一些澄清）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:33:06.527

如果您需要将“逻辑”放入 Activity 并在应用程序启动和退出时仅调用一次，您可以执行以下操作：

应用程序启动，您签入共享首选项是第一次启动的应用程序 - 如果是 - > 执行您的逻辑并保存您已完成的共享首选项。

当用户完成应用程序时，您可以覆盖 onBackPressed()，做任何您喜欢的事情并保存您需要的应​​用程序的任何状态，以便您可以在应用程序再次启动时再次调用您的“逻辑”。

这就是你的想法吗？

# asp.net - 重定向 301 可以正常工作吗？

> ID：13802398
> 
> 赞同：0
> 
> 时间：2012-12-10T13:57:58.037
> 
> 标签：asp.net, redirect, global-asax, blogengine.net

我在我的 global.asax 中添加了一个从子目录到根目录的 301 重定向.. www.informarea.it/blogengine 到 www.informarea.it 当我在浏览器中写入站点名称时：例如：

www.informarea.it / BlogEngine，重定向完美发生，www.informarea.it 中的链接发生变化，

当我在浏览器中写一篇旧帖子时，我看不到重定向，我看到了帖子的内容，但存在 blogengine 这个词，

当我进入推荐网站并单击页面中的旧帖子时，同样会出现 www.informarea.it/BlogEngine/prova.aspx 而不是 www.informarea.it/prova.aspx。...奇怪的是我看到了帖子...但这正常吗？

那么我目前有 1400 和 1000 个重复的描述标签重复的标题标签......

一切正常还是有什么错误？？

代码是这个..

```
string thisUrl = app.Request.Url.ToString().ToLower();

if (thisUrl.Contains("http://www.informarea.it/blogengine"))
{

  HttpContext.Current.Response.Status = "301 Moved Permanently";
  HttpContext.Current.Response.StatusCode = 301;
  HttpContext.Current.Response.AddHeader("Location",thisUrl.Replace("http://www.informarea.it/blogengine","http://www.informarea.it"));
} 
```

HttpContext 上下文 = app.Context;

你能帮我吗谢谢

法布里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:21:40.987

您需要使用 HHTP 模块进行重定向而不是全局。

这是有关如何执行此操作的链接：

[http://www.codeproject.com/Articles/110595/Handling-301-Redirects-in-ASP-NET-3-5](http://www.codeproject.com/Articles/110595/Handling-301-Redirects-in-ASP-NET-3-5)

在全局中进行重定向实际上不适用于目录。

在它到达全局文件之前，它在 http 模块中也会被重定向。

# c - 在 C 中生成一个随机数组

> ID：13802399
> 
> 赞同：1
> 
> 时间：2012-12-10T13:57:58.457
> 
> 标签：c, openvms

我正在使用 OpenVMS 在 C 中进行开发，我已经完成了一个代码，该代码放入了 1001 (0-1000) 个元素数组，1000 (0-999) 个介于 0 和 50 之间的随机数。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

main(){
    int vet[1000], fre[50];
    int i;

    srand(time(NULL));

    for(i=0;i<1000;i++){
        vet[i]=(rand()%51);
    }

    for(i=0;i<1000;i++){
        printf("%d\n", vet[i]);
    }

    for(i=0;i<1000;i++){
        fre[vet[i]]=fre[vet[i]]+1;
    }

    for(i=0;i<51;i++){
        printf("The number %d  was generated %d times\n", i, fre[i]);
    }
} 
```

当我显示每个数字产生了多少次时，我看到数字 50 有一个很大的数字，有时比其他数字多一倍，有人可以帮助我吗？

**已解决的有效代码**我现在必须使用 srand()

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

main(){
        int vet[1000], fre[51] = {0};
        int i;

        srand(time(NULL));

        for(i=0;i<1000;i++){
                vet[i]=(rand()%51);
        }

for(i=0;i<1000;i++){
printf("%d\n", vet[i]);
}

        for(i=0;i<1000;i++){
                        fre[vet[i]]=fre[vet[i]]+1;
        }

        for(i=0;i<51;i++){
                printf("The number %d  was generated %d times\n", i, fre[i]);
        }
}
[EOB] 
```

**谢谢你们**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:02:40.877

```
 int vet[1000], fre[50];

    for(i=0;i<51;i++){
            printf("The number %d  was generated %d times\n", i, fre[i]);
    } 
```

问题 1：您声明`fre`有 50 个元素，但您使用了 51 个。

问题2：`fre`未初始化。

```
int vet[1000], fre[51] = {0}; 
```

应该给你合理的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:02:18.887

```
int vet[1000], fre[50]; 
```

您的 vet[] 数组有 1000 个条目，而不是 1001。fre[] 有 50，而不是 51。如果要生成从 0 到 50 的数字，则需要将 fre[] 声明为 fre[51];

在累积结果之前，您也永远不会清除 fre[] 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:09:59.360

1）在使用变量之前初始化它们：

```
int vet[1000] = {0};
int fre[50] = {0}; 
```

2）您正在检查数组大小之外的值：

```
for(i=0;i<51;i++){ 
```

应该：

```
for(i=0;i<50;i++){ 
```

`fre[50]`您的数组`fre[0]`通过`fre[49]`. 因此，您希望您的计数从 0 开始并转到`<50`，即 49。

3）您正在生成超出数组大小的数字：

```
vet[i]=(rand()%51); 
```

应该：

```
vet[i]=(rand()%50); 
```

`rand() % x`将生成一个介于 之间的数字`0-(x-1)`，如果您的数组是大小，`50`那么它的元素是`0`- `49`，这意味着您需要选择`%50`，否则在分配时您将超过数组大小：`fre[vet[i]]=fre[vet[i]]+1;`

4) 请记住，[rand() 函数](http://linux.die.net/man/3/rand)会生成伪随机输出，因此它总是有可能不会像您想要的那样“随机”。

* * *

**编辑**
好的，你的评论：`2) No because I'm checking also 0`让我觉得你不明白数组是如何工作的：

```
int fre[50] = {0}; 
```

给你一个包含 50 个元素的数组。数组的索引从 0 开始并转到 [元素数 - 1]，这样：

```
first element -->fre[0], fre[1], fre[2], ..., fre[48], fre[49] <-- last element 
```

如果要记录从 0 到 50 的值（包括 0 到 50 *）* ，则数组中需要 51 个元素：

```
int fre[51] = {0}; 
```

所以这两个：

```
for(int i=0; i<50; i++)    and    for(int i=0; i<51; i++) 
```

从 0 开始，遍历每个元素，但前者适用于`fre[50]`（从 0 到 49 的 50 个元素），而后者适用于`fre[51]`（51 个元素，从 0 到 50）

# ios6 - 仅当应用程序不可见时如何显示 iOS 应用程序密码锁定屏幕？

> ID：13802402
> 
> 赞同：1
> 
> 时间：2012-12-10T13:58:32.300
> 
> 标签：ios6

我已经实现了一个应用程序特定的密码屏幕，该屏幕运行良好，并在调用我的 AppDelegate 上的 ApplicationWillResignActive 方法覆盖时被激活。

但是，当弹出低电量通知或通知中心消息时，这会导致一些不良影响。在这两种情况下，我的应用程序屏幕都是可见的，它进入非活动状态。

我只想在应用程序在前台不可见时显示密码屏幕。

这可能吗？

谢谢

# objective-c - 使队列线程安全

> ID：13802403
> 
> 赞同：2
> 
> 时间：2012-12-10T13:58:33.463
> 
> 标签：objective-c, ios, thread-safety, locking, nslock

我有一个相机会话，我正在从缓冲区中拍摄图像：

```
 -(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    CVPixelBufferRef pixelBuffer = (CVPixelBufferRef)CMSampleBufferGetImageBuffer(sampleBuffer);

    CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];        
    //rotate image 90°
    ciImage = [ciImage imageByApplyingTransform:CGAffineTransformMakeRotation(-M_PI/2.0)];
} 
```

我在图像上应用过滤器，我希望它在另一个队列上应用过滤器，它不是线程安全的，所以如果我快速拍摄图像，它会将图像混合在一起（从左到右 50/50，我认为），但我试图使其成为线程安全的，并且使用[NSLock](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html)或 NSRecursiveLock 将无法工作，因为它将图像混合在一起。

```
dispatch_async(filterQueue, ^{
            CIImage *scaleImage = [CIFilter filterWithName:@"CILanczosScaleTransform" keysAndValues:kCIInputImageKey, ciImage, @"inputScale", [NSNumber numberWithFloat:0.5], nil].outputImage;

            CGImageRef cgImage = [imageContext createCGImage:scaleImage fromRect:scaleImage.extent];
            [self.pictureArray addObject:[UIImage imageWithCGImage:cgImage]];
            CGImageRelease(cgImage);
        }); 
```

有人能帮我吗？我对如何使代码成为线程安全的知识不多

图像混合如下：http: [//i.stack.imgur.com/wjrIl.png](http://i.stack.imgur.com/wjrIl.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:56:36.530

首先，上述代码中唯一不是线程安全的部分是对`addObject:`. 您可以通过将`addObject:`调用移至主线程或使`pictureArray`访问更加线程安全来使您的代码线程安全。让我们看看两者。

# 移动通话

这几乎肯定是您想要的方式。

```
dispatch_async(filterQueue, ^{
  CIImage *scaleImage = [CIFilter filterWithName:@"CILanczosScaleTransform" keysAndValues:kCIInputImageKey, ciImage, @"inputScale", [NSNumber numberWithFloat:0.5], nil].outputImage;

  CGImageRef cgImage = [imageContext createCGImage:scaleImage fromRect:scaleImage.extent];
  UIImage *image = [UIImage imageWithCGImage:cgImage];
  CGImageRelease(cgImage);
  cgImage = NULL; // Always set to NULL after you release something
  dispatch_async(dispatch_get_main_queue(), ^{
    [self.pictureArray addObject:image];
  });
}); 
```

请注意，我在后台线程上尽我所能。我只是将final`addObject:`移到主线程。

# 线程安全的 addImage：

如果您`addObject:`经常从后台线程调用，最好将其提升到它自己的方法中，如下所示：

```
- (void)addImageOnMainThread:(UIImage *)image {
  dispatch_async(dispatch_get_main_queue(), ^{
    [self.pictureArray addObject:image];
  });
} 
```

# 线程安全的图片数组：

如果突变非常普遍并且锁定是一个性能问题，这会更好。使用屏障会导致访问速度*非常*快，但会以更复杂的代码为代价。

```
- (UIImage *)imageAtIndex:(NSUInteger)index {
  UIImage *result = nil;
  dispatch_sync(self.pictureArrayQueue, 
    ^{ result = self.pictureArray[index]; });
  return result;
}

- (void)addImage:(UIImage *)image {
  dispatch_barrier_async(self.pictureArrayQueue, 
    ^{ [self.pictureArray addObject:image]; });
} 
```

请注意，这里有一个新的调度队列用于访问`pictureArray`. 您可以构建更多的阅读器和编写器（例如`removeImageAtIndex:`等）所有阅读器都使用`dispatch_sync`. 所有作家都使用`dispatch_barrier_async`. `pictureArray`这需要更多代码，除非通过这些方法，否则您绝不能直接访问。优点是如果突变非常普遍，它会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:08:18.603

使用 @synchronized(self) 使代码片段线程安全。

例如：

```
-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)
   //The following code will be thread safe.
   @synchronized(self) {
      CVPixelBufferRef pixelBuffer = (CVPixelBufferRef)CMSampleBufferGetImageBuffer(sampleBuffer);

      CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];        
      //rotate image 90°
       ciImage = [ciImage imageByApplyingTransform:CGAffineTransformMakeRotation(-M_PI/2.0)];
    }
} 
```

@synchronized 语句将锁定这部分代码以立即用于单个线程。您可以将它应用到任何需要单线程代码的地方。

希望有帮助。

# c# - 如何在 ASP.NET 中跨实体请求保存状态而不使用 EntityFramework 保存到数据库？

> ID：13802404
> 
> 赞同：3
> 
> 时间：2012-12-10T13:58:42.907
> 
> 标签：c#, asp.net, entity-framework, webforms

我正在开发一个 CRUD ASP.NET WebForms Web 应用程序，该应用程序由用户填写数据的几个页面组成。我的客户不想将实体存储在页面之间的数据库中，直到用户单击最后一页上的完成（出于各种原因）。有哪些选项可以在页面之间传播填充的数据，哪个最不坏？从我的阅读中我看到可以使用 ViewState 和 Server.Transfer。任何其他选项，最好使用更少的魔术字符串和更多类型安全的数据绑定到实体对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:01:33.030

您可以将客户端应用程序中使用的所有对象存储在 中`Session`，然后当用户单击完成时，您将这些对象发送到服务/方法，您可以将它们转换为实体，然后将它们提交到数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:03:57.100

使用`ViewState`将显着增加您通过网络发送的数据量，因为所有`Viewstate`数据都被序列化为表单中的隐藏输入，因此当您添加对象时，您的 HTTP 请求响应将显着增长。

这真的没有灵丹妙药。如果您的数据不太复杂，我会将值存储在查询字符串中。如果您的对象变得复杂且庞大，并且您想保持类型安全，我会使用`Session`，但请记住自己清理！

另一个选择是使用 MVC 范例并使用隐藏输入以它自己的形式存储值。这意味着如果用户中途出错，您无需担心清理会话，但它也可以保持查询字符串干净。

认为这就是你所有的选项，*查询字符串*，*视图状态（不要这样做）*，*会话*或*隐藏变量*。

好的，所以你必须序列化你的数据，所以你不能持久化上下文。这不是可序列化的，因此以上是您的选择：

他们每个人都有正面和负面的，

*   Viewstate（低效但易于使用）
*   查询字符串（对大型数据集有效但不切实际且可编辑）
*   会话（增加服务器负载并需要清理，但允许您仅在服务器上保留数据）
*   隐藏变量（对用户隐藏但比视图状态更有效，需要为每个属性提供大量隐藏输入）

任你选！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:15:04.073

使用内存缓存。
互联网上有大量的例子。
试试这个：
[使用 Memcached 实现分布式缓存](http://www.codeproject.com/Articles/96698/Implementing-Distributed-Caching-using-Memcached)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-03T18:53:15.273

不知道我做错了什么，但我的 ASP Web API 控制器没有可用的会话状态？我这样做了：(1) 转到定义了该静态类的 WebApiConfig 文件，因为我想要一些在我的控制器被调用之前运行一次的代码块。在那里，我添加了一个公共静态 List 变量 myList。(2) 然后在 Register 方法中，我完成了该列表的定义。(3) 现在在我的控制器中，我有一个持久的（只要我不重新启动应用程序）列表，我也可以读写。

```
public static class WebApiConfig
{
    public static List<Note> myList;
    public static void Register(HttpConfiguration config)
    {
        myList = new List<Note>();
        myList.Add(new Note { Id = "1", Subject = "Wake up", Details = "Set alarm of 7:00 am and get out of bed." });
        myList.Add(new Note { Id = "2", Subject = "Eat breakfast", Details = "Eat a healthy breakfast." });
        myList.Add(new Note { Id = "3", Subject = "Go to work", Details = "Get to work before 9:00 am." });

        // Web API configuration and services

        // Web API routes
        config.MapHttpAttributeRoutes();
         ... more code 
```

然后在控制器中

```
public Note Save(Note newNote)
{
    WebApiConfig.myList.Add(newNote);
    return newNote;
} 
```

# http - Restlet 客户端不允许定义自定义“授权”标头

> ID：13802406
> 
> 赞同：1
> 
> 时间：2012-12-10T13:58:50.330
> 
> 标签：http, https, http-headers, restlet, restlet-2.0

我需要使用 restlet 客户端提出以下休息请求：

```
GET
https://www.xyz.com/resource/blah/
Authorization: Bearer XToken 
```

我可以在单独的调用中获取 XToken，但在提供的调用中，我无法在我的 ClientResource 对象中设置“授权”标头。

有人可以建议我为我拥有的以下代码行添加哪些代码：

```
clientResource.setChallengeResponse(new ChallengeResponse(ChallengeScheme.XXXX, bearerToken) 
```

在 restlet 中创建和添加“授权”标头会给我来自 restlet 客户端库的错误。

提前致谢

阿什·夏尔马

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-13T14:21:47.763

Restlet 客户端库版本。2.0.X 仍然非常反直觉并且缺乏文档。

所以转储它并开始使用[HTTP 组件](http://hc.apache.org/)HttpClient 版本。4.2.2，与restlet客户端库相比轻而易举，比restlet客户端要好得多。

# java - Java中的堆栈溢出

> ID：13802410
> 
> 赞同：1
> 
> 时间：2012-12-10T13:59:04.947
> 
> 标签：java, stack-overflow, treenode

我正在为井字游戏制作游戏树。

我有一个名为的方法`buildGameTree`，它获取一个`TreeNode`（treeNode 有一个由 80 个子元素组成的数组），它计算每一种可能的移动。每个动作当然是1个孩子。

这是我得到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
at Main.buildGameTree(Main.java:169)
at Main.buildGameTree(Main.java:218)
at Main.buildGameTree(Main.java:218)
...
at Main.buildGameTree(Main.java:218) 
```

这是我的代码：

```
private void buildGameTree(TreeNode t1)
        {
            String[][] ar1 = (String[][]) t1.getData(); //ar1 is a game board

            if(!gameOver(t1)) 
            {
                //printTree(t1);
                int[][]ar2 = new int[81][2];
                int line = 0;

                for(int k=0;k<SIZE;k++) //looking for ""
                    for(int j=0;j<SIZE;j++,line++)
                    {
                        if(ar1[k][j].equals(""))
                        {
                            ar2[line][0] = k;
                            ar2[line][1] = j;
                        }
                        else
                        {
                            ar2[line][0] = -1;
                            ar2[line][1] = -1;
                        }

                    }

                String[][][]ar3 = new String[80][9][9]; // array of game boards

                for(int k=0;k<ar3.length;k++)// filling the array.. ar1 is a game board
                {
                    ar3[k] = ar1;
                }
                for(int k=0;k<ar3.length;k++)// making a move
                {
                    int i1 = ar2[k][0];
                    int i2 = ar2[k][1];
                    if(!(i1 == -1 || i2 == -1))
                        if(num%2==0)
                            ar3[k][i1][i2] = "X";
                        else
                            ar3[k][i1][i2] = "O";
                }

                TreeNode<String[][]>[] ar4 = new TreeNode[80]; 

                for(int k=0;k<ar3.length;k++)
                {
                    ar4[k] = new TreeNode<String[][]>(ar3[k]);
                }
                t1.setChildren(ar4);

                for(int k=0;k<ar4.length;k++)
                {
                    buildGameTree(ar4[k]);
                }
            }
        } 
```

很抱歉放了这么多代码行，但这是显示我的问题的唯一方法。

> 第 169 行是： `if(!gameOver(t1))`
> 
> 第 218 行是： `buildGameTree(ar4[k]);`

也许我的树太大而无法保存在记忆中？

顺便说一句，游戏板是一个 9x9 的数组，空块是“”，当然你有“X”和“O”。ar2 是一种索引表，将是游戏中的下一步动作。

**编辑**

```
public boolean gameOver(TreeNode t1)
        {
            String[][] ar1 = (String[][]) t1.getData();
            for(int k=0;k<ar1.length;k++)
            {
                for(int j=0;j<ar1.length;j++)
                    if(ar1[k][j].equals(""))
                        return false;
            }
            return true;
        } 
```

**编辑** 我添加了一些打印行 n 东西来查找导致错误的原因，我发现第一块板很好，然后发生了一些奇怪的事情：在打印功能中，我将“”更改为“^”，以便我们可以看到板

```
^^^^^^^^^
^^^^^^^^^
^^^^^^^^^
^^^^^^^^^
^^^^^^^^^
^^^^^^^^^
^^^^^^^^X
^^^^^^^^^
^^^^^^^^^

OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOX
OOOOOOOOO
OOOOOOOO^

OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOO
OOOOOOOOX
OOOOOOOOO
OOOOOOOO^ 
```

正如你所看到的，它做了很多动作而不是 1，因为几乎整个棋盘都被“O”覆盖，然后它保持不变，这就是我得到溢出异常的原因。我的代码有什么问题？那必须在这里：

```
for(int k=0;k<ar3.length;k++)// making a move
                {
                    int i1 = ar2[k][0];
                    int i2 = ar2[k][1];
                    if(!(i1 == -1 || i2 == -1))
                        if(num%2==0)
                            ar3[k][i1][i2] = "X";
                        else
                            ar3[k][i1][i2] = "O";
                } 
```

正如我所说的 ar3 是一组游戏板或游戏选项.. 对于每个 ar3[k] 我只有在块内容不等于 -1 时才会做出不同的举动（意味着其中有东西 X 或 O）。

**编辑** 因为我得到了为什么它溢出的答案，所以我将关闭这个问题并打开另一个关于我的新问题的问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:13:14.470

你遇到的问题是你的代码是一个无限循环。

`buildGameTree(TreeNode)`您传递给（第 218 行）内部调用的参数不会从`gameOver(TreeNode)`. 因此，您在每个步骤中的代码都会创建树。

# c# - 在 C# 中将数据发布到 Asana API

> ID：13802411
> 
> 赞同：0
> 
> 时间：2012-12-10T13:59:04.947
> 
> 标签：c#, api, asana

我正在尝试使用 Asana API 来更新和添加数据到 Asana。我如何在 C# 中做到这一点？

我得到的数据很好 - 下面的示例代码：

```
string apiKey = "xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxx";
var req = WebRequest.Create("https://app.asana.com/api/1.0/workspaces/xxxxxxxxxxxxxxx/projects");

var authInfo = apiKey + ":";
var encodedAuthInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
req.Headers.Add("Authorization", "Basic " + encodedAuthInfo);
var response = new StreamReader(req.GetResponse().GetResponseStream()).ReadToEnd(); 
```

但我不知道如何发布数据。

他们文档中的所有示例都使用我没有经验的 Python。

我已联系 Asana，但尚未收到回复。这就是我到目前为止所拥有的。我在最后一行收到 400 错误

```
var url = "https://app.asana.com/api/1.0/workspaces/xxxxxxxxxxxxxxxxxxx/tasks";
string json =
    "\"data\": {   " +
    "\"workspace\": nnnnnnnnnnnnnnnn," +
    "\"name\": \"test\"," +
    "\"notes\": \"testing API POST\"" +
    "}";          

byte[] bytes = Encoding.UTF8.GetBytes(json);
var req = WebRequest.Create(url) as HttpWebRequest;

req.Method = "POST";
req.ContentLength = bytes.Length;
req.ContentType = "application/json";

var requestStream = req.GetRequestStream();
requestStream.Write(bytes, 0, bytes.Length);

var response = req.GetResponse();  //error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:04:31.587

这是我专门用来与 Asana API 交互的。编码参数函数采用键值对列表并将它们转换为“key=value&key=value”形式的字符串。

代码的发送数据部分不是我的，但我不记得我从哪里得到的。

我刚开始用 C# 开发一个 API 包装器，所以这是非常简单的测试。它可能没有它应该的那么强大，但我知道它确实工作得很好，可以在 Asana 中创建一个新的工作区。

```
 private string EncodeParameters(ICollection<KeyValuePair<string, string>> parameters)
    {
        string ret = "";
        foreach (KeyValuePair<string, string> pair in parameters)
        {
            ret += string.Format("{0}={1}&", pair.Key, pair.Value);
        }
        ret = ret.TrimEnd('&');

        return ret;
    }

    public string GetResponse(string uri, ICollection<KeyValuePair<string, string>> parameters, RequestMethods method = RequestMethods.POST)
    {
        return GetResponse(uri, EncodeParameters(parameters), method);
    }

    public string GetResponse(string uri, string data = "", RequestMethods method = RequestMethods.GET)
    {
        System.Diagnostics.Trace.WriteLine(uri);

        // create request
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.PreAuthenticate = true;
        request.Method = method.ToString().ToUpper();
        request.ContentType = "application/x-www-form-urlencoded";

        // log in
        string authInfo = API_KEY + ":" + ""; // blank password
        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
        request.Headers["Authorization"] = "Basic " + authInfo;

        // send data
        if (data != "")
        {
            byte[] paramBytes = Encoding.ASCII.GetBytes(data);
            request.ContentLength = paramBytes.Length;
            Stream reqStream = request.GetRequestStream();
            reqStream.Write(paramBytes, 0, paramBytes.Length);
            reqStream.Close();
        }

        // get response
        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            return new StreamReader(response.GetResponseStream()).ReadToEnd();
        }
        catch (WebException ex)
        {
            HttpWebResponse response = ((HttpWebResponse)ex.Response);
            throw new Exception(uri + " caused a " + (int)response.StatusCode + " error.\n" + response.StatusDescription);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:02:40.523

我就是这样做的：

```
public string SendRequest(WebRequestModel requestModel)
{
    var request = WebRequest.Create(uri);
    var encoding = new UTF8Encoding();
    var requestData = encoding.GetBytes(requestModel.POSTData);

    request.ContentType = requestModel.ContentType;

    request.Method = WebRequestMethods.Http.Post;
    request.Timeout = (300 * 1000); 
    request.ContentLength = requestData.Length;
    // add your header value here
    //request.Headers["myheader"] = "";

    using (var stream = request.GetRequestStream())
    {
          stream.Write(requestData, 0, requestData.Length);
    }
    response = request.GetResponse();

    using (var reader = new StreamReader(response.GetResponseStream(), Encoding.ASCII))
    {
        result = reader.ReadToEnd();
    }
    return result;
} 
```

我的 WebRequestModel 看起来像这样：

```
public class WebRequestModel
{
  public string Url { get; set; }
  public string POSTData { get; set; }
  public string ContentType { get; set; }
} 
```

# c# - 使用 Session 跨多个 Postback 传递动态控制状态

> ID：13802414
> 
> 赞同：0
> 
> 时间：2012-12-10T13:59:10.397
> 
> 标签：c#

我是编程新手，遇到了问题。我在 aspx 页面上有两个按钮。两个按钮都有`runat="server"`属性并且在`<form runat="server" >`标签内

**aspx 代码**

```
<form id="form1" runat="server">
<asp:Button ID="btnGetData"  runat="server" onclick="btnGetData_Click" />
<asp:Button ID="btnShow" Text="Send" runat="server" onclick="btnShow_Click" />
</form> 
```

**btnGetData**

```
 protected void btnGetData_Click(object sender, EventArgs e)
 {
            headlines = masg.Split('*');
            //Response.Write(headlines.Length);
            cb = new CheckBox[headlines.Length];

            for (int i = 0; i < headlines.Length; i++)
            {
                cb[i] = new CheckBox();

                cb[i].Text = headlines[i];
                Literal br = new Literal();
                br.Text = "<br/>";
                Form.Controls.Add(cb[i]);
                Form.Controls.Add(br);
            }

 } 
```

单击“获取数据”按钮时，会生成多个带有相关文本的复选框。

我单击一些复选框，然后单击显示按钮，**如果工作正确**，该按钮应将选定的复选框文本组合成单个字符串并显示它。

**显示**

```
protected void btnShow_Click(object sender, EventArgs e)
{

            for (int i = 0; i < headlines.Length; i++)
            {
                if (cb[i].Checked)
                    newmsg += cb[i].Text + '*';
            }
            Response.Write("<BR><BR><BR>" + newmsg);

} 
```

但是，一旦我单击 GetData 按钮，复选框就会丢失，因为它们不会持续存在，因为 HTTP 是无状态的。我阅读了有关 Viewstate 的信息，但是当涉及大量数据时不建议这样做，因为会导致显着的处理延迟。

另一种方法是使用**Session**。这里有没有使用`IsPostBack`页面属性？

请指导如何实现 Session 以将选定的复选框从一个按钮（GetData）单击传递到其他即显示按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:28:19.750

您遇到的是一个相当普遍的问题，所以我建议您使用中继器。例子：

```
<asp:Repeater id="rptCheckboxes" runat="server">
<ItemTemplate>
  <asp:CheckBox ID="cbxMessage" runat="server" Text="<%# Container.DataItem %>" />
  <br />
</ItemTemplate>

</asp:Repeater> 
```

在代码中：

```
protected void btnGetData_Click(object sender, EventArgs e)
{
   headlines = masg.Split('*');
   rptCheckboxes.DataSource = headlines;
   rptCheckboxes.DataBind();
}     

protected void btnShow_Click(object sender, EventArgs e)
{
   string newmsg = new string();
   foreach(RepeaterItem currentControl in rptCheckboxes.Items)
   {
       CheckBox currentCheckBox = currentControl.FindControl("cbxMessage");

       if(currentCheckBox != null && currentCheckBox.Checked)
       {
             newmsg += cb[i].Text + '*';
       }
   }

   //This is a bad idea here, but we'll keep it for now
   Response.Write("<BR><BR><BR>" + newmsg);
} 
```

请注意，这是概念验证，尚未经过测试可正常运行。这里的基础是，在回发期间，您的所有控件都会根据 aspx 页面和您为该帖子编写的任何逻辑进行重置。您永远不应该在回发中动态添加控件，并且应该只使用占位符来真正这样做，以最大程度地减少 ViewState 损坏/无效的风险。

# javascript - 动态选择列表项 javascript 或 jquery

> ID：13802417
> 
> 赞同：0
> 
> 时间：2012-12-10T13:59:16.233
> 
> 标签：javascript, json, dynamic

是否可以从动态创建的选项下拉列表中动态传递信息。所有选项都是从 JSON 调用创建的。最终目标是将 ID 传递给另一个 JSON 调用以检索数据。我目前正在使用基于每个 id# 的开关...这是唯一的方法吗？

HTML：

```
<option id="-1">DEVELOPER GROUP</option> 
```

目前人数增加到 5 个，但我们每天都在增加更多组

JS：

```
$("#fDistList").change(function () {
var id = $(this).find("option:selected").attr("id");

switch (id) {
    case "-1":
        console.log("Developer Group has been selected");
        break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:03:15.367

您可以将`value`选项设置为要传递给另一个调用的值。

```
<option value="yourvalue">DEVELOPER GROUP</option> 
```

那么你所要做的就是

```
$("#fDistList").change(function () {
    var id = $(this).val(); 
```

假设`#fDistList`是你选择。

# php - 简单的mysql选择

> ID：13802422
> 
> 赞同：3
> 
> 时间：2012-12-10T13:59:35.493
> 
> 标签：php, mysql

我试图做的是检查表中是否存在值。如果它不存在，则应显示一条抱歉消息。即使该值存在，代码也会发布在下面，它总是返回抱歉

```
if ($mysqli->query("SELECT 1 FROM `users` WHERE `k1`='$string1' AND 'k2'='$string2'"))
    {

    if($mysqli->affected_rows==0)
    {
    printf("Sorry");
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:01:01.533

您需要检查行数而不是受影响的行数：

```
if ($result->num_rows == 0)
{
    echo 'sorry';
} 
```

受影响的行用于插入、更新和删除语句，您想知道该语句影响了多少行。

num_rows 返回 select 语句返回的行数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:03:47.940

您将需要使用

```
 $result = $mysqli->query("SELECT 1 FROM `users` WHERE `k1`='$string1' AND 'k2'='$$string2'");
    if ($result = $mysqli->query("SELECT 1 FROM `users` WHERE `k1`='$string1' AND 'k2'='$$string2'"))
        {

        if($result->num_rows==0)
        {
        printf("Sorry");
        }
        } 
```

当您将查询作为 SELECT 语句进行时。

# ruby-on-rails - Carrierwave 文件上传在 ActiveRecord Create 上验证失败

> ID：13802430
> 
> 赞同：4
> 
> 时间：2012-12-10T13:59:54.340
> 
> 标签：ruby-on-rails, ruby, carrierwave

所以我有一个非常直接的 Carrierwave 实现用于图像上传。我已将上传器安装在 ActiveRecord 模型上：

```
class MenuItem < ActiveRecord::Base
    attr_accessible :description, :menu_id, :name, :active, :photo

    mount_uploader :photo, PhotoUploader

    belongs_to :menu

    before_save :default_values

    validates :name, presence: true
    validates :menu_id, presence: true
    validates :description, length: { maximum: 250 }

    private
       def default_values
         if (self.active.nil?)
           self.active = true
         end
       end  
end 
```

我使用的表单结合了编辑/创建上述 MenuItem 以及附加文件：

```
 <%= form_for(@menuitem) do |f| %>
        <%= render 'shared/error_messages', object: @menuitem %>

        <%= f.file_field :photo, :id => "photo" %>

        <%= f.label :name %>
        <%= f.text_field :name %>

        <%= f.label :description %>
        <%= f.text_area :description %>

        <%= f.label :active %>
        <%= f.check_box :active, :value => @menuitem.active %>

        <%= f.submit "Save Menu Item", class: "btn btn-large btn-primary" %>
        <%= f.submit "Cancel", class: "btn btn-large btn-secondary" %>
    <% end %> 
```

在编辑/更新的情况下一切正常。

但是，在新建/创建时，我在 :photo 属性上收到了一个验证错误，它只是说“照片无效”。Uploader 的定义是普通的：

```
class PhotoUploader < CarrierWave::Uploader::Base
  include CarrierWaveDirect::Uploader

  after :store, :make_thumbnail

  storage :fog

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def make_thumbnail(file)
    a = filename.split('/')
    key = store_dir + "/" + a[0] + "/" + model.id.to_s + "_thumb.jpg"

    job = Blitline::Job.new(url)
    job.application_id = ENV['BLITLINE_APPLICATION_ID']

    sf = job.add_function("resize_to_fill", {:height => 100, :width => 100})
    sf.add_save("thumbnail", key, ENV['S3_BUCKET'])

    bs = Blitline.new
    bs.jobs << job   
    res = bs.post_jobs
  end
end 
```

控制器方法也很简单

```
class MenuItemsController < ApplicationController
  def new
    @menuitem = MenuItem.new
    @menuitem.menu_id = params[:menuid]
    @menuitem.active = true
  end

  def create
    @menuitem = MenuItem.new(params[:menu_item])

    if @menuitem.save
        flash[:success] = "Menu Item created!"
        redirect_to menu_path(@menuitem.menu)
    else
        render 'new'
    end    
end 
```

我认为问题可能与上传者方法中的引用有关，`model.id`并且`store_dir`由于尚未创建记录，因此 ID 不可用 - 但删除它并没有解决问题。

同样，使用相同表单并简单调用的编辑/更新路径`menuitem.update_attributes(params[:menu_item])`工作正常。

我敢肯定我缺少一些明显的东西。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T12:36:36.443

您可以通过将 carrierwave.rb 初始化文件中的 ur_net_format 验证设置为 false 来修复错误。

**像这样：**

```
ruby
    config.validate_unique_filename = true
    config.validate_filename_format = true
    config.validate_remote_net_url_format = true 
```

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:36:15.137

我有一个建议：

白名单格式（在您的上传器中）：

```
 def extension_white_list
   %w(jpg jpeg gif png)
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T13:43:11.210

您需要在 Carrierwave.rb 文件中设置以下内容

```
 config.validate_unique_filename = false
  config.validate_filename_format = false
  config.validate_remote_net_url_format = false # this is important 
```

这对我有用。就个人而言，我现在使用carrierwave-aws，因为它比Fog 更精简。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T15:44:44.923

来得很晚，但我也遇到了同样的问题。

对我来说错的是 MiniMagick

我不得不剥离我的代码并调用`photo.save!` 这给了我错误`Avatar Failed to manipulate with MiniMagick`

我从我的上传文件中删除了 Minimagick，它起作用了。所以我需要修复我的 MiniMagick 安装而不是我的代码。希望这可以帮助某人。

# algorithm - 空间不变向量量化

> ID：13802434
> 
> 赞同：4
> 
> 时间：2012-12-10T14:00:08.630
> 
> 标签：algorithm, matlab, vector, quantization, background-foreground

我正在尝试实现 Jason Hipp 等人的[算法](http://www.jpathinformatics.org/article.asp?issn=2153-3539;year=2011;volume=2;issue=1;spage=13;epage=13;aulast=Hipp "原纸")。还有一个[演示文稿](http://www.pathinformatics.pitt.edu/sites/default/files/pathinfo/content/PI2011-Quant%20Histo-%20Jasonhipp-vfinal.pdf)，更短更全面。

简要说明他们的方法：

他们使用**矢量量化**作为区分任何给定图像中前景和背景的工具。但是，它们不是使用正方形区域作为特征向量来生成代码字，而是使用圆形。这应该降低计算复杂度。使用圆作为谓词向量，匹配问题被简化为线性模式匹配任务，并允许空间不变匹配。因此该方法称为**空间不变矢量量化**。

所以基本上，一个谓词向量是交互选择的，然后在图像空间中详尽地查询这个谓词向量与当前位置的相关性。

我的问题是：

*   他们在整个算法中的哪个位置生成密码本？如何？

*   我看不到如何为要生成的 Codebook 选择参数。如果他们首先对图像中所有可能位置的所有可能圆进行采样，则计算量非常大。他们如何确定要生成的簇/码字的数量？

*   为什么我要摆动子环？

现在我的实现基本上包括一个具有一个半径的圆作为谓词向量。它穿过原生图像空间，并将谓词向量与所有可能的旋转中当前像素周围的圆圈相关联。这是一个非常缓慢的过程，我看不到他们算法的好处。我没有实现任何接近矢量量化的东西，因为我看不到它是如何工作的。

任何提示或想法表示赞赏。不幸的是，该方法的作者没有回答我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:10:23.417

你的前两个问题不是这个算法特有的，而是任何矢量量化算法。这是一个以相对易于理解的术语描述如何进行矢量量化的网页，包括代码本的生成：[http](http://www.data-compression.com/vq.html) ://www.data-compression.com/vq.html 。

关于摆动：在该算法中，关键观察是通过矢量化为环，表面不会被镶嵌（完全覆盖）。例如，如果您使用正方形，它们会镶嵌表面（完全覆盖它）。重叠的环不一定会完全覆盖图像。因此，“介于”环之间的像素可能会丢失并导致匹配失败。为了弥补这一点，作者来回“摆动”环，最终覆盖所有像素。

# c# - 计算执行时间

> ID：13802435
> 
> 赞同：1
> 
> 时间：2012-12-10T14:00:22.593
> 
> 标签：c#, .net, winforms

我需要计算执行某个进程的时间。例如，我想从文件中读取所有行，但如果它超过 5 秒，则显示消息框。我应该如何以及创建什么计时器来处理这个“5 秒”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:10:45.450

```
long time=0;

bool b = Task.Factory
            .StartNew(() => time = ExecutionTime(LongRunningTask))
            .Wait(5000);

if (b == false)
{
    MessageBox.Show("Execution took more than 5 seconds.");
}

//time contains the execution time in msec. 
```

* * *

```
public long ExecutionTime(Action action)
{
    var sw = Stopwatch.StartNew();
    action();
    return sw.ElapsedMilliseconds;
}

public void LongRunningTask()
{
    Thread.Sleep(10000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:03:01.033

使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类：（System.Diagnostics 命名空间的一部分）

```
Stopwatch watch = new Stopwatch();
watch.Start();
while (someCond) {
    if (watch.Elapsed.TotalSeconds >= 5) {
        MessageBox.Show("Process taking too much time, aborting");
        break;
    }
    //keep looping
}
watch.Stop();
string msg = "Process took " + watch.Elapsed.TotalSeconds + " seconds to complete" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:06:00.360

```
long time1;
Stopwatch sw = new Stopwatch();

sw.Start();
...
time = sw.ElapsedTicks; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:14:00.547

```
using System.Diagnostic
using System.Window.Forms

//your code
Stopwatch watch = new Stopwatch();
watch.Start();

// start reading lines of a file using file system object

watch.Stop();

if(watch.Elapsed.ElapsedMilliseconds>5000)
{
   MessageBox.Show("The process takes more than 5 seconds !!!");
}
else
{
   // your business logic
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:10:17.560

考虑以下方法：

```
var cts = new CancellationTokenSource();
var task = new Task(YourLongRunningOperation, cts.Token);
task.Start();

var delayTask = Task.Delay(5000);

try
{
    await Task.WhenAny(task, delayTask);
    if(!task.IsCompleted)
    {
        cts.Cancel();
        // You can display a message here.
        await task;
    }
}
catch(OperationCanceledException cex)
{
    // TODO Handle cancelation.
}
catch (AggregateException aex)
{
    // TODO Handle exceptions.
}

if(task.IsCanceled && delayTask.IsCompleted)
{
    // TODO Display a long running error message.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-26T22:00:51.767

```
class Program
{
    static void Main()
    {
        bool result = Task.Factory.StartNew(SomePossibleFailingTask).Wait(1000);

        if (result == false)
        {
            Console.WriteLine("Something has gone wrong!");
        }

        Console.ReadKey();
    }

    public static void SomePossibleFailingTask()
    {
        Thread.Sleep(15000);
    }
} 
```

# jquery - 获取一个 div 的高度并将其应用于单独的一个

> ID：13802440
> 
> 赞同：0
> 
> 时间：2012-12-10T14:00:30.793
> 
> 标签：jquery, css, html, height

我的页面上有一个 div，它会根据放入其中的内容量来缩放高度。

我在该 div 后面有另一个 div 分层，它将容纳我所有的背景 div。我需要使背景 div 与可缩放 div 的高度匹配，以便根据内容正确定位背景 div。

这两个 div 无论如何都没有连接，例如嵌套或相对于彼此。它们是完全分开的，但我需要背景 div 来匹配内容 div。就像是：

```
**CSS**
#background_container {
height:"=height of 'content_container'";
}

#content_container {
height:auto;
}

**HTML**
<div id="background_container>
  <div id="background_item></div>
  <div id="background_item2></div>
</div>

<div id="content_container>
  <div id="content_item></div>
  <div id="content_item></div>
  <div id="content_item></div>
</div> 
```

我不太确定这是否可以通过 CSS 实现，但如果不能，我很乐意使用 jQuery。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:03:36.160

使用 jQuery：

```
$('#background_container').height($('#content_container').height()); 
```

[http://api.jquery.com/height/](http://api.jquery.com/height/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:03:33.483

```
$(document).ready(function(){
    var height = $("#content_container").height();
    $("#background_conatiner").height(height);
}); 
```

未经测试，但很确定应该这样做。

# java - 如何将 .wav 文件转换为字节数组？

> ID：13802441
> 
> 赞同：4
> 
> 时间：2012-12-10T14:00:32.507
> 
> 标签：java, file

我的磁盘驱动器中有一个`.wav`文件。我需要将该`.wav`文件转换为`byte array`使用java。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:02:30.277

您可以使用[`Files.readAllBytes`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllBytes%28java.nio.file.Path%29)来实现这一点。

> 从文件中读取所有字节。该方法确保在读取所有字节或抛出 I/O 错误或其他运行时异常时关闭文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:03:40.357

对于 JRE < 1.7，无论扩展名如何

```
File file = new File(filePath);
InputStream fis = new FileInputStream(file);
byte[] buffer = new byte[(int)file.length()];
fis.read(buffer, 0, buffer.length);
fis.close(); 
```

# php - 奇怪的主机问题

> ID：13802446
> 
> 赞同：2
> 
> 时间：2012-12-10T14:00:56.603
> 
> 标签：php, mysql, phpmyadmin

我花了几个小时试图弄清楚这些东西，但没有运气。我用谷歌搜索了这个，并在stackoverflow上通过关键字搜索。

所以，我在这里问问题。作为一个面板，有 DirectAdmin。

当我进入 DirectAdmin 并创建 MySQL 数据库时，它告诉“数据库已成功创建”。

并且还告诉：“将此数据用于您的脚本”

```
Host     : localhost (yes, localhost! )
user     : db_user
password : db_password
databse  : db_name 
```

好的。当我将此数据输入到 phpMyAdmin 时，它可以工作 - 用户和密码。我可以通过 phpMyAdmin 使用 SQL 来操作数据。没关系。

但

当我将此数据输入到某个脚本时

```
<?php

$host     = 'localhost';
$password     = 'db_password';
$db           = 'db_name';
$user     = 'db_user';

// I'm aware of PDO and I use this one but PDO isn't installed on my hosting provider
// This is just test to see if connection can be established

if ( ! mysql_connect($host, $user, $password) ){

    die( mysql_error() );
} 
```

所以它告诉“使用密码（是）拒绝 db_user@localhost 的访问”！有什么问题？！我输入了正确的数据！

然后我尝试使用我的网站地址而不是“本地主机”。然后`mysql_error()`告诉类似这样的内容：“此主机不允许来自 mysite.com 的连接”。

再次 - 从 phpMyAdmin 我可以看到：用户 - `db_user@localhost`（这样用户名和主机都没有错）

问题是：为什么它允许从 phpMyAdmin 连接而不允许从自定义脚本连接？

**更新 1**。我试图改变`port`（如@Bondye 建议`localhost`的那样）`127.0.0.1`以及。但得到同样的错误 -`Access denied for user 'db_user'@'localhost' (using password: YES)`

这是 PHP.INI 中的 MySQL 部分

```
Active Persistent Links  0  
Active Links  0  
Client API version  5.1.53  
MYSQL_MODULE_TYPE  external  
MYSQL_SOCKET  /tmp/mysql.sock  
MYSQL_INCLUDE  -I/usr/local/include/mysql  
MYSQL_LIBS  -L/usr/local/lib/mysql -lmysqlclient  

Param:              Local Value: Master Value: 

mysql.allow_persistent  Off      Off 
mysql.connect_timeout   60       60 
mysql.default_host      no value no value 
mysql.default_password  no value no value 
mysql.default_port      no value no value 
mysql.default_socket    no value no value 
mysql.default_user      no value no value 
mysql.max_links         5        5 
mysql.max_persistent    0        0 
mysql.trace_mode        Off      Off 

System : FreeBSD 
```

我知道 PDO 和 MySQLi，但我不能使用它们。`mysql_*`我必须对我正在处理的当前脚本使用旧函数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:27:11.543

[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

> 笔记：
> 
> 每当您指定“localhost”或“localhost:port”作为服务器时，MySQL 客户端库将覆盖它并尝试连接到本地套接字（Windows 上的命名管道）。如果要使用 TCP/IP，请使用“127.0.0.1”而不是“localhost”。如果 MySQL 客户端库尝试连接到错误的本地套接字，您应该在 PHP 配置中设置正确的路径，并将服务器字段留空。

您可以考虑改用 mysqli（以 i 结尾以表示改进）

```
Use of this extension is discouraged. Instead, the MySQLi or PDO_MySQL extension should be used. See also MySQL: choosing an API guide and related FAQ for more information. Alternatives to this function include:

    mysqli_connect()
    PDO::__construct() 
```

# java - 日历或日期到 Cron 表达式

> ID：13802450
> 
> 赞同：1
> 
> 时间：2012-12-10T14:01:05.080
> 
> 标签：java, date, calendar, cron, cronexpression

> **可能重复：**
> [是否有使用日期构造 cron 表达式的 java 类？](https://stackoverflow.com/questions/3520705/is-there-a-java-class-for-constructing-a-cron-expression-using-a-date)

有没有比使用字符串连接更好的方法将日历或日期转换为 cron 表达式？喜欢;

```
Calendar now = Calendar.getInstance();    
String cronExpression = now.get(Calendar.SECOND) + " " + now.get(Calendar.MINUTE) + " " + now.get(Calendar.HOUR_OF_DAY) + " " + now.get(Calendar.DAY_OF_MONTH) + " " + now.get(Calendar.MONTH) + " ? " + now.get(Calendar.YEAR); 
```

# jquery - Rails 中的 jquery 和数据方法

> ID：13802452
> 
> 赞同：0
> 
> 时间：2012-12-10T14:01:08.030
> 
> 标签：jquery, ruby-on-rails

我有两个简单的链接：

```
<a rel="nofollow" data-remote="true" data-method="post" href="/entry_votes?id=129">LINK+</a> 
<a rel="nofollow" data-remote="true" data-method="delete" href="/entry_votes/129">LINK-</a> 
```

第一个开始#create 动作，第二个开始#destroy。

使用 jquery 我更改了第一个链接，所以`data-method = "delete"`，`href="/entry_votes/129"`我点击了这个新链接，仍然进入`"Started POST /entry_votes/129"`服务器日志。你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-30T10:17:11.393

起初我认为这是评论中问题的重复，但结果`rails.js`只是发送`GET`和`POST`请求。

[https://github.com/rails/jquery-ujs/wiki/Unobtrusive-scripting-support-for-jQuery#data-method-links-that-result-in-post-put-or-delete-requests](https://github.com/rails/jquery-ujs/wiki/Unobtrusive-scripting-support-for-jQuery#data-method-links-that-result-in-post-put-or-delete-requests)

> 非 Rails 后端的注意事项：因为使用 GET 和 POST 以外的 HTTP 方法提交表单在浏览器中并没有得到广泛支持，所有其他 HTTP 方法实际上都是通过 POST 发送的，使用“_method”参数中指示的预期方法。Rails 框架会自动检测并对此进行补偿。

# jakarta-ee - 与“static Criterion isNull(String propertyName)”类似的函数用于设置不用于字符串？

> ID：13802454
> 
> 赞同：1
> 
> 时间：2012-12-10T14:01:18.350
> 
> 标签：jakarta-ee

我遇到一个问题。两个表之间的关系是一对多的，但不幸的是，我们只关心“MANY”为空的“ONE”。

**任务是：** 现在我需要查询 Set 应该为 null 的老鼠。如果hibernate可以支持“static Criterion isNull(Set s)”，那就没问题了。

其他方法也可以。

有两个类：

**第一类：**

```
public class Mouse {
@OneToMany(mappedBy="mouse")
@Cascade(org.hibernate.annotations.CascadeType.LOCK)
@Where(clause="incage = 0")
private Set<Residency> cageHistory = new HashSet<Residency>();

@OneToMany(mappedBy="mouse")
@Cascade(org.hibernate.annotations.CascadeType.LOCK)
@Where(clause="incage = 1")
private Set<Residency> currentResidencies = new HashSet<Residency>();

...
... 
```

}

**第 2 类：**

```
@Entity
@Table(name="smcagemouse")
public class Residency extends TimestampedEntity implements Serializable {
@Column(nullable=false)
/*0 -- not active*/
/*1 -- active*/ 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:04:00.053

这可以通过 isNotEmpty() 来解决。

Restrictions.isNotEmpty(propertyName);

我已经意识到了解决方案。

# python - MacOS终端上的Python命令不起作用

> ID：13802455
> 
> 赞同：1
> 
> 时间：2012-12-10T14:01:20.097
> 
> 标签：python, macos, python-2.7, terminal

我正在使用 MacOS 10.8。我卸载了 python 3.2.3 并安装了 2.7。但是当我`python`在终端中输入时，它显示：

```
-bash: python3: command not found. 
```

如果我使用`/usr/bin/python`然后 python 2.7 运行。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:04:06.963

检查 /usr/bin/ 是否在您的 PATH 变量中。

```
echo $PATH 
```

在命令行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:48:29.793

这是一个常见的错误。首先将您的 python 文件保存在一个文件夹中，并确保最后有一个 .py。然后转到终端，输入地址而不添加用户。例如，我的 .py 文件保存在我桌面上名为 Python 的文件夹中。我的 python 文件称为读取。它会工作:)

python ~/桌面/Python/read.py

然后在终端中单击输入，您的文件应该会执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T14:48:51.790

您可能将 python3 符号链接到 python。如果是这种情况，那么只需确保 /usr/bin/ 中包含 python3 的所有文件名都已删除。

# c# - 列出参考问题 c#

> ID：13802461
> 
> 赞同：2
> 
> 时间：2012-12-10T14:01:41.267
> 
> 标签：c#, asp.net, linq

我有一个清单说`listOriginal`并将其存储在 Viewstate 中。

```
ViewState["Origion"] = listPatientEncounter; 
```

现在，我需要在列表项中进行一些格式化并将其保存在另一个 Viewstate 中以供进一步使用..

```
 List<....> listCopy = new List<....>();
 listCopy= (from n in listOriginal select n).ToList();

 //This method formattes a few listCopy items
   ViewState["copylist"] = ConverttoUTCTime(listCopy); 
```

但是，问题是在第二个列表中所做的更改也显示在第一个列表上的操作，因此我遇到了我想使用的问题，`ViewState["Origion"]`其中有处于原始状态的项目..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:05:51.203

如果列表项是对象，则您更改了源对象的属性。.ToList() 正在创建新的列表对象，它没有克隆项目。

换句话说，它将是具有相同项目的“另一个”列表。

要解决此问题，您应该克隆列表项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:06:42.850

对象将通过 ref 传递，您需要将列表内的数据复制到第二个列表，您不能使用 .ToList()。

您需要克隆原始列表中的项目，并将它们添加到第二个列表中，您可以手动复制值或使用 Clone()（如果可用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:04:57.350

这是因为（很可能）至少根据您得到的结果，您的列表**内容**是`reference type`.

将引用类型填充到列表的一个实例中并移到另一个实例中不会使其成为*另一个*实例。它继续是（是的不同的指针，但是..）指向相同的内存位置。所以不同的列表元素指向同一个位置，所以一个人所做的更改对另一个人是可见的。

要解决此问题，一种可能的解决方案是创建对象的克隆，或者至少只创建那些您将要更改的对象，前提是该更改**在原始集合中不受**软件架构的影响。这只是一个想法，您应该选择适合您需求的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:09:01.740

因为您使用的是进程内会话状态，所以 2 个列表实际上引用了该列表的同一个实例。您需要克隆您的列表才能真正拥有 2 个不同的列表。

现在，如果您使用 SQL 会话管理，这实际上最终会为您执行克隆，并且它们将是不同的，因为它将对象序列化/反序列化到数据库。

# android - Android：我如何知道服务是否在由 AlarmManager 启动时正在运行

> ID：13802463
> 
> 赞同：0
> 
> 时间：2012-12-10T14:01:53.283
> 
> 标签：android, alarmmanager

我需要在后台运行服务，而它一直被 Android 杀死，我需要一次又一次地启动它。由于某些编程目的，我需要知道服务是否正在运行。那是因为我将同时启动第二个服务，并且它会保持两次启动方法。

到目前为止，我已经尝试过：

```
private boolean isServiceRunning() {
    ActivityManager manager = (ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if (NotificationService.class.getName().equals(
                service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

但是正如我所读到的那样，只有在我的服务启动时才有可能

```
startService(Intent); 
```

而且因为我每 2 分钟使用 AlarmManager 启动我的服务，所以我不知道如何检查服务是否正在运行。也许如果您知道如何避免两次或多次使用服务启动方法，我会很满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:43:35.163

In services `onCreate()` method is called when the service is created for the first time. you can do all declarations in it.

```
onStartCommand() 
```

is called again and again when you try to call it though alarm manager.

If you want that you service does not get killed then you can run the service on a different process.For this you would need Inter Process Communication(IPC).

For doing this you declare the service in the manifest file as follows:

```
<service
    android:name="myservice"
    android:process=":my_process">
<service> 
```

the colon(:)my_process in the android:process line tell android system that the name of the process is my_process and the :tells that it is private to the application declaring it.

Reference:[complete tutorial on services](http://www.vogella.com/articles/AndroidServices/article.html)

# java - 在 Java 中使用 DatagramPacket

> ID：13802464
> 
> 赞同：1
> 
> 时间：2012-12-10T14:01:59.620
> 
> 标签：java, datagram

要通过 DatagramPacket 发送字符串，我们使用：

```
 String msg = "example";
 byte[]data = msg.getBytes();
 DatagramPacket pktOut = new DatagramPacket(data, 0, data.length, dest, port) 
```

如何通过 DatagramPacket 发送数组？

```
 int num[] = {50,20,45,82,25,63};
 //I need to send this over two packets, but I don't know how to deal
//with arrays when sending them 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:13:44.610

[您可以使用ByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)类将整数数组转换为字节缓冲区。

```
int num[] = { 50 , 20 , 45 , 82 , 25 , 63 };
ByteBuffer bb = ByteBuffer.allocate( num.length * 4 );
for ( int i : num ) {
    bb.putInt( i );
}
byte[] data = bb.array(); 
```

# asp.net - 如何仅请求文件的内容长度

> ID：13802466
> 
> 赞同：0
> 
> 时间：2012-12-10T14:02:05.713
> 
> 标签：asp.net, .net

我有一个带有文件的 CDN，我想创建一个小工具，根据预定义的文件列表检查文件是否存在。

我尝试使用 WebRequest，但似乎下载文件。我只想获取内容长度而不下载它。（类似于 curl -I ）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:11:19.057

您也许可以发出 HEAD 请求以获取该信息。

来自[w3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)的引述：

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。响应 HEAD 请求的 HTTP 标头中包含的元信息应该与响应 GET 请求发送的信息相同。此方法可用于获取有关请求所隐含的实体的元信息，而无需传输实体主体本身。这种方法通常用于测试超文本链接的有效性、可访问性和最近的修改。
> 
> 对 HEAD 请求的响应可能是可缓存的，因为响应中包含的信息可能用于从该资源更新先前缓存的实体。如果新字段值表明缓存的实体与当前实体不同（如 Content-Length、Content-MD5、ETag 或 Last-Modified 的变化所表明的那样），则缓存必须将缓存条目视为陈旧的。

根据我在其他地方读到的内容，内容长度应该出现在 HEAD 响应中。但“应该”并不一定意味着它总是如此（参见：[Content-Length header with HEAD requests?](https://stackoverflow.com/questions/3854842/content-length-header-with-head-requests)）

# ios - 我可以为所有用户假设同一 iOS 设备的相同应用程序速度吗

> ID：13802469
> 
> 赞同：2
> 
> 时间：2012-12-10T14:02:15.157
> 
> 标签：ios, xcode, testing, memory, cpu

我找不到答案，所以我希望答案是一个样本。

我可以做一个简单的假设，如果我在带有 iOS 6.0 的 iPhone 5 上测试我的应用程序，所有使用带有 iOS 6.0 的 iPhone5 的用户都将具有相同的性能——假设所有应用程序都在孤岛中工作并分配了特定的内存空间和处于前台时的 CPU 利用率。

公平假设？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:19:06.570

虽然他们被分配了自己的内存空间，但这并不意味着他们可以访问所有可用的内存。[Apple 的文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)很好地描述了这个问题：

> 可用内存量与应用程序的相对性能之间存在直接关联。更少的可用内存意味着系统更有可能无法满足未来的内存请求。如果发生这种情况，系统总是可以从内存中删除挂起的应用程序、代码页或其他非易失性资源。但是，从内存中删除这些应用程序和资源可能只是临时修复，尤其是在短时间内再次需要它们时。相反，首先要尽量减少你的内存使用，并及时清理你使用的内存。

此外，磁盘访问和 CPU 访问等内容取决于后台发生的情况。一个用户可能有多个邮件帐户同步和通知触发和网络信号搜索以及一大堆其他东西，所有这些都可能影响性能。如果您遇到运行到性能极限的情况，最好看看您可以在哪里调整您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:16:41.400

在大多数情况下是真的。c 可能有例外情况，例如：

*   如果用户打开的应用程序太多以至于几乎达到设备的内存限制。
*   网络问题：您正在使用良好的 wi-fi 进行测试，但用户在 wi-fi 时信号较差或使用 3G-2G。
*   用户有一部越狱的手机，并且有自定义的操作系统设置：超频和其他什么不是......一些应用程序限制了其他应用程序 cpu-memory-network 的使用等等。

# objective-c - UIColor 不适用于它自己的属性

> ID：13802471
> 
> 赞同：2
> 
> 时间：2012-12-10T14:02:19.473
> 
> 标签：objective-c, colors

如果我直接使用颜色，它会起作用。但是如果我想将颜色值保存在 rgb 和 alpha 中，它就行不通了。它不画任何东西。

```
UIColor *aaa = [UIColor grayColor];
float r,g,b,a;

[aaa getRed:&r green:&g blue:&b alpha:&a];
aaa = [UIColor colorWithRed:r green:g blue:b alpha:a];

CGColorRef col = aaa.CGColor; 
```

如何保存我的 rgb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:27:37.990

我相信你的问题是没有用与该方法`grayColor`兼容的色彩空间定义。`getRed:green:blue:alpha:`您可以通过将值初始化`rgba`为颜色不可能的值来验证这一点，并注意调用不会更改它们，这与记录的返回行为相匹配。或者，替换`grayColor`为明确包含颜色的内容，例如`cyanColor`该`getRed:green:blue:alpha:`方法有效。

这里有一些代码来演示：

```
float r = 5.0,g = 6.0,b = 7.0,a = 8.0, w = 3.0, a2 = 4.0;
UIColor *aaa = [UIColor grayColor];
[aaa getRed:&r green:&g blue:&b alpha:&a];
[aaa getWhite:&w alpha:&a2]; 
```

（在 OS X 上，有在颜色空间之间转换的方法，但我没有看到 iOS 等效项。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T14:21:19.780

您必须初始化浮点数，否则引用 &f、&g、&b 和 &a 没有引用：

```
UIColor *aaa = [UIColor grayColor];
float r = 0.0f, g = 0.0f, b = 0.0f, a = 0.0f;

[aaa getRed:&r green:&g blue:&b alpha:&a];
aaa = [UIColor colorWithRed:r green:g blue:b alpha:a];

CGColorRef col = aaa.CGColor; 
```

# c++ - C++ 动态二维数组

> ID：13802480
> 
> 赞同：1
> 
> 时间：2012-12-10T14:02:54.093
> 
> 标签：c++

我正在使用以下代码创建动态二维数组。

```
uint32_t** arrays = new uint32_t*[10]; 
uint32_t number = take input from console ;
arrays[0] = new uint32_t[number];
number = take input from console ;
arrays[1] = new uint32_t[number];
delete arrays[0] ;
number = take input from console ;
arrays[0] = new uint32_t[number] ; 
```

任何人都可以帮助我如何在不知道输入值的情况下知道第二维的大小吗？意味着如何在数组[0]、数组[1]等上找到数组大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:04:44.073

`new`如果不存储大小值，就无法确定分配的内存块的大小。

编辑：另外，为什么不只使用 a `vector< vector< uint32_t > > arrays;`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:41:42.887

`std::vector<std::valarray<uint32_t> >`也可能是另一种选择。假设您的控制台程序将进行某种计算，那么相当未知的`std::valarray`将是一个很好的伴侣。

请注意风险，用户提供的大小值可能会导致`std::bad_alloc`异常，因此您至少可以将分配放入 try/catch 块中。

另一种解决方案是在一个容器中收集所有用户提供的大小值，然后为数据实例化另一个单一容器：

```
//Disclaimer: below code has never been tested and is rather about how to do such stuff in general,
//regardless of the few bytes gained for sacrificing CPU cycles.

#include <vector>
#include <valarray>
#include <numeric>
#include <cassert>
#include <exception>

void app(void)
{
    std::vector<size_t> sizes;
    std::valarray<uint32_t> data;

    try
    {
        //collect N user defined sub-vector size values in 'sizes'
        //.
        //.
        //.
        size_t totalNumberOfValues = std::accumulate(sizes.begin(),sizes.end(),0u);
        data.resize(totalNumberOfValues);
    }
    catch(std::bad_alloc& e)
    {
        //handle error
    }

    //accessing the minor/sub-vectors using the size values requires accumulation of adjacent size values of preceding sub-vectors.    
    //of course, these offsets could also be pre-computed.

    size_t subVectorIndex /*...*/; //needs to be checked!
    assert(subVectorIndex < sizes.size());

    size_t subVectorSize = sizes[subVectorIndex];
    size_t subVectorOffset = std::accumulate(sizes.begin(),sizes.begin()+subVectorIndex,0u);

    //do NOT reallocate 'data' while twiddling around with pointers!
    uint32_t* subVectorData = &data[subVectorOffset];

    //well, using neat stuff like std::slice, std::gslice etc. is up to you now ;-)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:06:08.083

没有办法做到这一点。为了内存效率，分配的内存块的大小不能保证存储在任何地方。考虑对二维使用向量而不是普通数组。

# wordpress - 将 3 年前的 Wordpress 网站移至新服务器

> ID：13802484
> 
> 赞同：0
> 
> 时间：2012-12-10T14:03:16.287
> 
> 标签：wordpress

我受命将 2010 年制作的 Wordpress 网站移动到新服务器。我无法访问旧网站的管理面板，但已获得源文件和数据库的导出版本。该网站安装了许多插件，我认为通过全新安装传输所有旧文件等会更加困难，因此我想让旧网站正常工作。

我已将所有文件复制到我的测试服务器中，并对 wp_config.php 文件进行了更改以找到新的数据库位置。问题是所有链接似乎都来自旧网站。从逻辑上讲，我假设我需要更改绝对路径，然后更改各个帖子的链接。

我在哪里更改这些值，是否需要更改任何其他文件/值以确保网站完美运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:20:18.213

您会看到很多不同的方法（迁移脚本/插件、导出/导入等）。我在这里假设您的问题源于更改站点正在运行的域，这与更改服务器不同？

对我来说，转移 Wordpress 网站的最佳方式是使用我在此处给出的以下答案 - Interconnectit 脚本可以节省大量时间和麻烦。

[如何将 wordpress 从 mamp 推送到 hostgator](https://stackoverflow.com/questions/12069548/how-to-push-wordpress-from-mamp-into-hostgator/12070827#12070827)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:41:48.763

通常这会在你的 wp-config.php 中完成：

```
define('WP_SITEURL', 'http://new-path.com');
define('WP_HOME', 'http://new-path.com'); 
```

如果这还不够，请添加一个名为“搜索和替换”的插件，然后搜索旧 URL，然后用新 URL 替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T10:02:20.627

以下方法对我有用。主题也正确迁移。

如何将 Wordpress 安装程序从一台服务器移动到另一台服务器（使用不同的域名）

```
1.Export Files & DB from the source server.
2.Import Files & DB into the target server (As it is)
3.Delete *_options table from the target server DB.
4.Export only the *_options table from the source server DB.
5.Find & Replace the old domain name with the new domain name in the above .sql file
6.Import the above modified *_options table into target server DB.
7.Open wp-config.php file in target server and update the new DB connection info.
8.Open .htaccess file in target server and put the default entry for WordPress.
9.Login into the target server WP Admin Panel
10.Install and activate a plugin called “Velvet Blues Update URLs”.
11.Go to Tools -> Update URLs
12.Replace all the following possible URLs with the new domain name

http://www.example.com
https://www.example.com
http://example.com
https://example.com

13.Test the target server site 
```

# c# - 委托 - 委托返回类型是否也必须与它委托的方法相匹配？

> ID：13802486
> 
> 赞同：6
> 
> 时间：2012-12-10T14:03:28.470
> 
> 标签：c#, delegates

我希望这听起来像是一个显而易见的问题，但是委托返回类型是否也必须与它所委托的方法的返回类型相匹配？

例如，像这样：

```
public static void Save()
    {
        TS ts = new TS(SaveToDatabase);
    }

    public delegate void TS();

    private static void SaveToDatabase()
    { } 
```

这永远行不通

```
public static void Save()
    {
        TS ts = new TS(SaveToDatabase);
    }

    public delegate string TS();

    private static void SaveToDatabase()
    { } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:05:08.940

是的，它必须返回相同的类型并具有相同的参数。换句话说，函数和委托声明必须具有相同的签名。

例子：

```
 //Declare delegate (return double with double param)
    public delegate double Squared(double x);

    public class Circle
    {
        private double _radius;

        public static double ValueTimesValue(double Value)
        {
            return Value * Value;
        }

        public double Area(Squared sqd)
        {
            return sqd(_radius) * Math.PI;
        }

        public void CircleCharacteristics()
        {
            Squared Sq = new Squared(ValueTimesValue);
        }
    } 
```

**编辑：** `If you see the sample code, Squared Delegate and ValueTimesValue function have the same return type and parameters.`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T14:08:49.837

来自[msdn](http://msdn.microsoft.com/en-us/library/900fyy8e%28v=vs.71%29.aspx)：

> 委托允许您将函数作为参数传递。委托的类型安全要求您作为委托传递的函数具有与委托声明相同的签名。

[还有来自C# 规范](http://msdn.microsoft.com/en-us/library/aa664603%28v=vs.71%29.aspx)的另一个引用：

如果以下两个都为真，则方法和委托类型是兼容的：

*   它们具有相同的编号或参数、相同的类型、相同的顺序、相同的参数修饰符。
*   **它们的返回类型是相同的。**

我认为它很好地描述了兼容性条件。如您所见，您的代码违反了第二个条件，这会产生编译器错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:10:30.530

简单来说，委托是方法的模板（希望我不会因为过于简单而受到抨击）。如果你想要一个可视化，把它想象成一把锁，而物理实现就像一把钥匙。一把钥匙适合某把锁，但在另一把锁中失效。就像钥匙不适合错误的锁一样，应用不同模板（签名）的方法也会失败。

所以，是的，您需要为您希望“委派工作”的方法提供正确的签名。如果您想更多地从软件方面考虑，委托是它所代表的物理实现的契约，就像接口是它所代表的实际方法的契约一样。它们是非常相似的概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T14:20:39.963

其实不一定。参数的类型和结果只能匹配。所以你可以这样做：

```
class Argument : BaseArgument    {    }

class BaseArgument    {    }

class BaseResult    {    }

class Result : BaseResult    {    }

delegate BaseResult MyDelegate(Argument argument);

class Test
{
    public Test()
    {
     var d1 = new MyDelegate(Method1);

    }

    Result Method1(BaseArgument a)
    {
        return null;
    }
} 
```

通过匹配，我的意思是返回类型的协方差，因此方法可以返回更专业的（派生）类型，然后委托声明 - 委托需要 BaseResult 所以结果是好的。并且参数的逆变，因此委托说将提供 Argument，因此方法可以将 BaseArgument 声明为参数，因为 Argument 是 BaseArgument。

# c# - 在 UserControls 之间交换数据，主窗口的所有选项卡子项

> ID：13802492
> 
> 赞同：0
> 
> 时间：2012-12-10T14:03:34.553
> 
> 标签：c#, wpf, c#-4.0

我是 WPF/C# 的新手，所以这对你们中的许多人来说可能是基本的。请原谅我的无知。如果是这种情况，我只需要一个指向您认为可以提供帮助的简单代码示例的指针。我搜索了这个..但找不到任何对我有帮助的现有解决方案，所以我想这可能不是做事的方式......我在 C++ 下使用指针做了类似的事情，这不是我曾经做过的事情能够在 C#.WPF 中重现

无论如何，这就是我想要做的事情：我有一个带有选项卡子项的主窗口，所有类型均为 UserControl，在 XAML 中定义

```
<Window x:Class="HighPerformanceScenarios.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:igEditors="http://infragistics.com/Editors"
        xmlns:local="clr-namespace:HighPerformanceScenarios"
        Title="MainWindow" Height="600" Width="800" xmlns:ig="http://schemas.infragistics.com/xaml">
    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Background="LightBlue">
            <TextBlock Text="Infragistics High-Performance XamDataGrid and XamDataChart" FontSize="20" Margin="0 10 0 10"/>
        </StackPanel>
        <TabControl Grid.Row="1">
            <TabItem Header="XamDataChart (Real-Time Data)" >
                <local:XamDataChartRealTimeData />
            </TabItem>
            <TabItem Header="RealTimeDisplay">
                <local:RealTimeDisplay />
            </TabItem>
            <TabItem Header="XamDataGrid High Performance">
                <local:XamDataGridHighPerformance />
            </TabItem>
            <TabItem Header="Serial Port">
                <local:SerialPortClass />
            </TabItem>            
        </TabControl>
    </Grid>
</Window> 
```

这来自 Infragistics 的高性能图表样本，

在其中一个选项卡式控件项中，UserControl 是一个管理串行端口连接并处理传入数据（二进制形式的双精度数据包的 100Hz 流）的类。这个 UserControl（称为 SerialPort）将读取串行端口、处理二进制流并将它们记录到文件的任务委托给一个单独的线程 (RunWorkerAsync...)。每次新数据包准备好保存在“SerialPort 控件本地可用”dataRecord 变量 (double[18]) 中时，这个永远运行的线程都会异步向 SerialPort 控件报告。

其他 UserControls 是显示控件。一个是一组仪表，另一个是实时图表等等。所有这些都有自己的数据源（图表的数据集合或仪表的单个值）。这些图表控件通过数据绑定机制绑定到它们的数据源。现在，我需要一种方法将传入的串行数据提供给其他 UserControl 的数据源，以便它们实时显示传入的数据。

似乎没有一种本机机制来交换甚至说将数据从一个用户控件分发到其他用户控件，至少我不知道；-/

我确实有当前“示例”应用程序的代码，但是它很长。所以为了简单起见，我决定把它排除在外。我不希望这里的任何人提供代码响应，而是指向文档的指针，该文档解决了将数据从一个 UserControl 分发给其他人的问题，如果有这样的话，这样我就可以自己解决问题. 或者也许只是一个建议如何做到这一点。

我试图访问主窗口句柄以便能够访问其子窗口，但未能获得由 XAML 生成的对象的任何实例。

我希望有人有一个建议..如果你需要我会很高兴发布相关的代码片段谢谢你和保罗的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:14:48.437

读取数据的线程应该封装在自己的类中。比创建此类的一个实例并将该实例传递给需要访问数据的所有用户控件。
自然地，线程读取的数据应该写入新类拥有的数据结构中，而不是当前的 SerialPort 控件。

# ruby-on-rails - 是否可以在“顺序”方法子句中使用问号？

> ID：13802495
> 
> 赞同：1
> 
> 时间：2012-12-10T14:03:40.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2，我想知道是否有办法进行以下操作：

```
@categories.order('user_id = ? DESC', params[:id])
@categories.order('user_id = ? DESC', @user.id)

# Note: It is almost the same as `@categories.where('user_id = ?', params[:id])`
# but for the `order` clause. 
```

上面的语句会产生这个错误：

```
ActiveRecord::StatementInvalid (Mysql2::Error: You have an error in your SQL 
syntax; check the manual that corresponds to your MySQL server version for the 
right syntax to use near '? DESC, ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:12:15.750

如果您尝试根据 更改顺序`user_id`，首先返回匹配的，您应该使用`CASE`语句。

在原始 SQL 中，它看起来像这样：

```
SELECT * FROM Categories ORDER BY CASE user_id WHEN 34 THEN 1 ELSE 2 END 
```

这会将 user_id 为 34 的所有行带到顶部，其余的将保留为默认排序。

现在，就像其他人提到的那样，`order`没有任何机制来清理 SQL，因此您必须在`ActiveRecord::Base`.

它可能看起来像这样：

```
order_sql = Category.send :sanitize_sql_array, ["CASE user_id WHEN ? THEN 1 ELSE 2 END", some_user_id]

@categories.order(order_sql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:44:05.430

你不能做一个`ORDER BY user_id = <some_integer>`. 您只能按 ASC 或 DESC 列排序。有一些使用 CASE 关键字的高级案例。请阅读[mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:05:13.783

[http://apidock.com/rails/ActiveRecord/QueryMethods/order](http://apidock.com/rails/ActiveRecord/QueryMethods/order)

如果您查看源代码，与 where 子句源代码相比，它看起来对问号没有任何作用。[http://apidock.com/rails/ActiveRecord/QueryMethods/where](http://apidock.com/rails/ActiveRecord/QueryMethods/where)

也看github上order方法，和问号无关： [https ://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/query_methods.rb#L234](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/query_methods.rb#L234)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T14:11:35.000

您可以像这样封装 where 和 order 方法：

```
Model.where("user_id = ?", params[:id]).order("field_name DESC") 
```

我认为这应该为你做。我希望我理解正确。

# error-handling - Apache Camel - 如何在默认处理程序之前处理异常？

> ID：13802498
> 
> 赞同：0
> 
> 时间：2012-12-10T14:03:50.190
> 
> 标签：error-handling, apache-camel

我有一个简单的骆驼设置：

```
 final MyErrorProcessor myErrorProcessor = new MyErrorProcessor(10);

            onException(FooException.class)
                    .bean(myErrorProcessor, "process")
                    .redeliveryDelay(TimeUnit.SECONDS.toMillis(5))
                    .maximumRedeliveries(10);

            from(MIDDLE_QUEUE)
                    .bean(ProcessorBean.class, "process")
                    .to(resultEndpoint)
                    .end(); 
```

其中 myErrorProcessor 只是我想在遇到异常后立即调用的 bean。

问题是我只有在所有重试失败时才执行 myErrorProcessor.process() ，但我只想计算异常，即使它们已成功重试。

我知道有 .onRedelivery() 但它有类似的问题：它仅在 redeliveryDelay 之后调用我的 bean，而不是在抛出异常的那一刻。

所以，我的问题是：有没有办法在 Camel 捕获异常时通知我的自定义 bean，而不删除重试策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:30:40.233

您可以从 FooException 中删除重新传递，然后让您的自定义 bean 运行其处理并在处理后重新抛出异常吗？那么单独的异常句柄可以做重投吗？

谢谢，约格什

# jasper-reports - 如何使用动态碧玉报告设置行的背景颜色？

> ID：13802501
> 
> 赞同：3
> 
> 时间：2012-12-10T14:03:58.833
> 
> 标签：jasper-reports, dynamic-jasper

我是 jasper 的新手，我知道这是一个基本问题。我花了很多时间来解决这个问题，但到目前为止还没有解决这个问题。

我正在使用一个模块，我必须使用 jasper 生成报告。我为 pdf 生成实现了代码。我们正在使用 dynamic-jasper api 生成此报告。我使用“import ar.com.fdvs.dj.domain.Style”类为报告创建样式。我为这种样式设置背景值如下

**style.setBackgroundColor(Color.RED);**

但这并没有反映出来，我仍然将背景设为白色。

如果我错过了什么，请告诉我

亲切的问候阿吉尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:29:50.960

我得到了这个问题的解决方案。我将透明属性设置为样式实例的假。这解决了我的问题。

# php - 如何删除 JSON 中的对象？

> ID：13802506
> 
> 赞同：6
> 
> 时间：2012-12-10T14:04:07.003
> 
> 标签：php, json

我有一个 JSON 档案，我想找到并删除一个对象。如何在 JSON 档案中查找和删除对象？

**例子：**

```
{
         "themes":[

                  {"name":"pepito",
                   "thumbnail":"http://nakome.16mb.com/samples/html/admin/",
                   "description":"Simple"},

                  // Delete this in php ---------
                  {"name":"juanito",  
                   "thumbnail":"http://nakome.16mb.com/samples/html/admin/",
                   "description":"Simple" }
                  // ----------------------------

                 ]
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T14:07:30.120

无需编写自己的解析器（并且给定它是 php）使用[`json_decode`](http://php.net/manual/en/function.json-decode.php)并将其转换为您想要使用的对象，然后使用[`unset`](http://php.net/unset)然后重新[`json_encode`](http://php.net/manual/en/function.json-encode.php)生成结果。

这将是无需执行字符串解析/搜索的最简单方法。

# c# - 更改 GridView 中的按钮文本 - （呈现为 DataBoundLiteralControl 的 GridView ItemTemplate 按钮）

> ID：13802510
> 
> 赞同：2
> 
> 时间：2012-12-10T14:04:26.163
> 
> 标签：c#, gridview, eval, htmlcontrols

我的 GridView 控件的一列中有 2 个按钮。

```
<asp:TemplateField ItemStyle-CssClass="minPadding">
    <ItemTemplate>
        <input  id="btnDateRange" type="button" value="Date Range" class="JQDatePicker SmallText FloatRight WrapButtonText" onclick="javascript:document.getElementById('hdnImpressionTagID').value = '<%# Eval("ImpressionTagID") %>'"/>
        <asp:Button ID="btnShowImpressions" CommandArgument='<%# Eval("ImpressionTagID") %>' CommandName="ShowImpressions" Text="Total Impressions" runat="server" UseSubmitBehavior="false" CssClass="SmallText FloatLeft WrapButtonText" Width="80px" />
    </ItemTemplate>
</asp:TemplateField> 
```

第一个按钮是 HTML 控件的原因是因为当我尝试使用 asp:button 时 - onclick 事件不起作用（请注意 javascript 调用中的 #Eval 语句）使用服务器控件会给我错误：'服务器标签格式不正确'

我想从后面的代码中更改这些按钮的文本。（我正在使用 C#）

我找到了正确的行索引，我知道它们在单元格 5 中。

我可以像这样设置 asp:Button 控件的文本...

`Button btn = ((Button)gridImpressionTags.Rows[i].Cells[5].FindControl("btnDateRange")); btn.Text = "This Text has changed!";`

问题是：当从后面的代码中引用时，Web 控件`btnDateRange`显示为一个`DataBoundLiteralControl`，我无法将其转换为按钮。

我也无法将其转换为文字。`Unable to cast object of type 'System.Web.UI.DataBoundLiteralControl' to type 'System.Web.UI.WebControls.Literal'.`

并将其转换为 DataBoundLiteralControl 有效，但不允许我更改文本： `System.Web.UI.DataBoundLiteralControl.Text' cannot be assigned to -- it is read only`

有谁知道为什么我的 HTML 按钮被呈现为 DataBoundLiteralControl ？有没有人有任何想法让我为我尝试？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:08:41.753

1) 您可以将按钮带回 asp:button 并使用 OnClientClick 而不是 OnClick。在这种情况下，OnClick 用于服务器事件处理而不是 javascript。要使用 javascript，请使用 OnClientClick

2) 将 runat="server" 添加到您的 html 按钮

**更新：**我专注于从代码隐藏访问控件。试试这个 javascript

```
<input type="button" onclick='<%# String.Format("javascript:document.getElementById('hdnImpressionTagID').value = '{0}'", Eval("ImpressionTagID")) %>' /> 
```

**更新**

我同意你的观点，这并不容易。您可以将分配 onclick 移动到代码隐藏并处理不匹配的引号

1)`<asp:Button runat="server ID="btnDateRange" Text="Date Range" />`

2）在rowdatabound中分配onclick

```
protected void GridView_OnRowDataBound(object sender, GridViewRowEventArgs e)
{
      Button btnDateRange = e.Row.FindControl("btnDateRange") As Button; //if you used Asp:Button
      btnDateRange.Attributes["onclick"] = "javascript:document.getElementById('hdnImpressionTagID').value = '"+e.Row.DataItem("ImpressionTagID")+"'";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:50:39.350

首先 - 如果没有 codingBiz 的帮助，我无法回答这个问题，所以谢谢老兄！

诀窍是`<input type="button">`放弃类型按钮并使用服务器控件，它在 RowDataBound 上添加 onclick 事件。

我第一次不能这样做的原因是因为我需要向 onclick 事件添加一些 javascript，虽然这适用于标准 HTML 按钮控件，但它不适用于 asp:button。CodingBiz 指出我要在 RowDataBound 处添加 onclick 事件。通过一些代码更改以能够访问正确的行和数据键数据，我得到了它的工作......

**ASPX 页面：**

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button runat="server" ID="btnDateRange" Text="asp Date Range" CssClass="JQDatePicker SmallText FloatRight WrapButtonText" />
        <asp:Button ID="btnShowImpressions" CommandArgument='<%# Eval("ImpressionTagID") %>' CommandName="ShowImpressions" Text="Total Impressions" runat="server" UseSubmitBehavior="false" CssClass="SmallText FloatLeft WrapButtonText" Width="80px" />
    </ItemTemplate>
</asp:TemplateField> 
```

**后面的代码：**

```
 protected void gridImpressionTags_OnRowDataBound(object sender, GridViewRowEventArgs e)
    {
        Button btnDateRange = e.Row.FindControl("btnDateRange") as Button;

         if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Button btn = e.Row.Cells[5].Controls[1] as Button;
            string datakey = gridImpressionTags.DataKeys[e.Row.RowIndex].Value.ToString();

             btn.Attributes["onclick"] = "javascript:document.getElementById('hdnImpressionTagID').value = '" + datakey + "'";
         }
    } 
```

# html - xcode中的html警报事件

> ID：13802517
> 
> 赞同：0
> 
> 时间：2012-12-10T14:04:56.040
> 
> 标签：html, objective-c, ios, xcode, events

我有一个 HTML 文件，它用我的 xcode 项目计算各种电缆尺寸（其余的都在目标 c 中），如果电缆超出范围，它会在此触发警报`alert ("No suitable cables");`，我想触发一个动作。我可以告诉我的应用程序在 HTML 中发生了该事件吗？我听说过listners，并认为我可能需要在这种情况下使用？不知道我会如何实现它的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:00:31.810

您可以通过在 webview 中触发一个 URL 来完成此操作，该 URL 将加载自定义前缀，`shouldStartLoadWithRequest`如果需要发送电缆警报，您可以在 javascript 中的 webview 方法中查找该前缀。

`ex. sendCableAlert://scenario1.com`

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSString *alertPrefix = @"sendCableAlert://";

    if ([[[request URL] absoluteString] hasPrefix:alertPrefix]) {
        //You've hit an alert do something..
        NSLog(@"CABLE ALERT!");

        return NO;
    }
    else {
        return YES;
    }
} 
```

# jquery - Jquery：添加具有功能的新 div

> ID：13802521
> 
> 赞同：2
> 
> 时间：2012-12-10T14:05:16.603
> 
> 标签：jquery, html

这是我的第一篇文章，所以要温柔。:)

我的页面上有一个链接。

单击链接时，我想创建一个新的 div。

新 div 应包含用于创建此 div 的相同链接，以便我可以继续创建包含相同链接的新 div。

这是我的代码：

```
<script type="text/javascript">

    $(document).ready(searchCriteria);
    $(document).ready(loadSearchCriteria);

    function searchCriteria() {
        $(".test").load("searchCriteria.html");
    }

    function loadSearchCriteria() {
        $(".test1234").click(function () {
            $(".test1234").load("searchCriteria.html");
            function loadNewClick() {
                var $newClick = $('<div class="test1234"></div>');
                    $(".content").append($newClick);
            }
        });
    };

</script> 
```

我正在使用 jquery-1.4.2.min.js

我是 jquery 的新手，所以任何提示都会被欣赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:25:40.090

那么您希望这些新添加的 .test1234 元素中的每一个都具有相同的点击事件吗？您可以使用[`.on()`](http://api.jquery.com/on/)将单击事件*委托*给该类。这有效地将它绑定到任何获得该类的东西，无论是新的还是旧的（在最新版本的 jQuery 中`.on()`替换）。`.live()`

* * *

但是委托事件有（适度的）开销，对于像这样简单的事情来说这可能是过度的。创建新元素时，可以将创建它的函数绑定到它。像这样将事件绑定到新创建的元素是一个方便的[“鲜为人知”的 jQuery 技巧](http://ejohn.org/apps/workshop/adv-talk/)。

这是**重要的一点**：将创建新 div 的函数绑定到新创建的 div，如下所示（单击新行以提高可读性）：

```
 function somefunction() {
   var $newClick = $('<div class="test1234"></div>')
     .click( somefunction );
   $(".content").append($newClick);
 } 
```

（你也可以使用`.click(function() { some code })`，或者写成`$('<div/>').addClass('test1234').click( somefunction );`，或者其他，它非常灵活）

这次我测试了它:)，这是一个演示**完整代码的**[jsfiddle](http://jsfiddle.net/jP69z/)（使用而不是.**`.text()``.load()`**

 **我认为您在评论中提到的问题与您的代码结构方式不同 - 查看 jsfiddle 代码中的更改和评论，并考虑何时发生了什么。

改变东西，打破它并重新加载它，直到它有意义:)。

* * *

* * *

从一个 javascript 编码设计师到另一个的友好提示 - 学习真正的编程最难的事情是让你的头脑了解*时间*和移动部分（每件事在每一点是什么）。请记住，在 jQuery 中，诸如`.click()` *绑定*事件之类的东西（`click()`只是 的快捷方式`bind('click')`）。当我学习使用`.bind('click)`而不是`.click()`（`bind('mouseover')`等等）时，我发现它很有帮助，因此当我回读代码时，总是可以直观地看到究竟发生了什么以及何时发生了什么。

另外，`console.log()`大量使用。记录所有内容并观察结果是什么。并且，将您的文本编辑器/jsfiddle/firebug 等视为一个无限大的速写本，它会*告诉您*什么时候无法工作：这是一件很棒的事情，尝试一切，并犯很多错误！这是最好的学习方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:15:12.457

尝试这个：

```
$(function() {
    //document ready
    $(".test").load("searchCriteria.html");
    var $newClick = $('<div class="test1234">Sample div</div>');
    $(".content").append($newClick);
    $($newClick).live("click", function() {
        $(this).load("searchCriteria.html");
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:07:20.800

`$(".test").load("searchCriteria.html");`完成后，您需要调用 loadNewClick

```
$(".test").load("searchCriteria.html", function(){
    alert('completed');
    //EDIT:: this is your load new click function
    var $newClick = $('<div class="test1234"></div>');
    $(".content").append($newClick);
}); 
```**

# javafx-2 - 无法使用 JRE7 运行 JavaFx Jar

> ID：13802528
> 
> 赞同：1
> 
> 时间：2012-12-10T14:05:47.833
> 
> 标签：javafx-2, java

我正在尝试参考 JRE 运行 JavaFx Jar，但它显示错误消息并抛出此 IOException -

```
C:\Users\JavaUser4\Desktop\New folder (2)>"C:\Program Files\Java\jre7\bin\java.e
xe" -jar ABCTemp.jar
java.io.IOException: The filename, directory name, or volume label syntax is inc
orrect
        at java.io.WinNTFileSystem.canonicalize0(Native Method)
        at java.io.Win32FileSystem.canonicalize(Unknown Source)
        at java.io.File.getCanonicalPath(Unknown Source)
        at java.io.File.getCanonicalFile(Unknown Source)
        at com.javafx.main.Main.fileToURL(Main.java:97)
        at com.javafx.main.Main.findLaunchMethod(Main.java:152)
        at com.javafx.main.Main.findLaunchMethodInJar(Main.java:210)
        at com.javafx.main.Main.findLaunchMethod(Main.java:712)
        at com.javafx.main.Main.main(Main.java:803)
java.io.IOException: The filename, directory name, or volume label syntax is inc
orrect
        at java.io.WinNTFileSystem.canonicalize0(Native Method)
        at java.io.Win32FileSystem.canonicalize(Unknown Source)
        at java.io.File.getCanonicalPath(Unknown Source)
        at java.io.File.getCanonicalFile(Unknown Source)
        at com.javafx.main.Main.fileToURL(Main.java:97)
        at com.javafx.main.Main.findLaunchMethod(Main.java:152)
        at com.javafx.main.Main.findLaunchMethodInJar(Main.java:210)
        at com.javafx.main.Main.findLaunchMethod(Main.java:726)
        at com.javafx.main.Main.main(Main.java:803) 
```

错误信息 -

![在此处输入图像描述](../Images/657c324ca4e78091d6e7e008a4e31b2e.png)

# javascript - 如何在Phonegap上锁定屏幕

> ID：13802533
> 
> 赞同：0
> 
> 时间：2012-12-10T14:05:59.280
> 
> 标签：javascript, android, jquery, jquery-ui, touch

作为警报（“〜”）；调用时，用户必须先触摸屏幕，然后才能在屏幕上进行更多操作。
但是我使用 jQueryUI 来创建我自定义的 jQueryUI 对话框，并且它不会锁定屏幕......我可以做些什么来实现这个功能。
更新：
HTML：

```
<script type="text/javascript">
$(function() {
    $("#story_pages").dialog({
        autoOpen: false,
        height: 300,
        width: 600          

    });
});
</script> 
```

一些事件触发器：

```
$( '#story_pages').dialog("open"); 
```

我仍然单击应用程序上的其他按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:57:18.953

我仍然不是 100% 清楚，但从您的评论和描述中，我认为“锁定”是指在显示对话框时，您不希望用户能够与页面上的任何其他内容进行交互（直到对话框被关闭）。这称为“模态对话框”。

在您的参数数组中，您需要设置`modal`为`true`：

```
$("#story_pages").dialog({
    autoOpen: false,
    height: 300,
    width: 600,        
    modal: true
}); 
```

有关此功能的示例以及代码的外观，请参阅[文档。](http://jqueryui.com/dialog/#modal)

# search - 在solr中索引文本字段时如何过滤数值

> ID：13802542
> 
> 赞同：1
> 
> 时间：2012-12-10T14:06:25.450
> 
> 标签：search, solr, indexing

我的问题是：如何删除文本字段中的数值？

例如。“ABC 公司套房 39 165 MICHIGAN AVE LANSING MI 48909”

为了获得以下术语：“ABC | COMPANY | SUITE | MICHIGAN | AVE | LANSING | MI”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:14:39.197

使用[PatternReplaceFilterFactory](http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/pattern/PatternReplaceFilterFactory.html)。

```
<filter class="solr.PatternReplaceFilterFactory" pattern="([0-9])" replacement="" replace="all" /> 
```

# ios - 点击 Tab bar 调用 iOS 中的 Tap Gesture

> ID：13802546
> 
> 赞同：1
> 
> 时间：2012-12-10T14:06:51.267
> 
> 标签：ios, uiwebview, uiscrollview, tabs

我是 iOS 开发的新手，遇到了一个奇怪的问题。

我正在开发一个选项卡式 iOS 应用程序。在其中一个选项卡中，它加载一个`UIWebView`. 我已经添加了一个点击手势`UIImageView`并将其添加到`UIScrollView`. 这`UIScrollView`是`UIWebView`. 点击手势打开一个键盘。

问题是，当我来到此选项卡并尝试导航到另一个选项卡时，它会在选项卡单击时打开键盘，而不是移动到单击的选项卡。意味着点击手势也在调用标签点击。当我将 web 视图滚动到顶部以使其在选项卡之前不再保留时，它可以正常工作。

我正在通过`UIImageView`以下方式添加点击手势。

```
-(void)setOnTypeGesture{
    UITapGestureRecognizer *uiViewTextViewGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tappedInUIView:)];
    uiView.userInteractionEnabled = YES;
    [uiView addGestureRecognizer:uiViewTextViewGesture];
    [uiViewTextViewGesture release];

} 
```

有什么建议么 ？

# java - 如何在eclipse rcp中编辑workbench.xml特定节点的值

> ID：13802550
> 
> 赞同：1
> 
> 时间：2012-12-10T14:06:56.460
> 
> 标签：java, eclipse-rcp

我正在使用 Eclipse RCP 3.8 IDE。我想访问 workbench.xml 并在调用 saveState() 或 dispose() 时编辑某个节点中特定属性的值，以便在下次使用指定的值加载产品时初始化产品。

到目前为止，我已经尝试使用在 saveState() 中获得的纪念品，但是似乎我得到了一个空的纪念品（它的所有字段都是空的）。

任何人都可以请提出一种方法来解决这个问题..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:00:26.790

我不完全确定这是否真的是您正在寻找的，但也许您可以看看[工作台侦听](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/resInt_filesystem.htm)器：`postShutdown(IWorkbench)`在关闭所有窗口后，在工作台关闭期间调用该方法。

# html - 调整浏览器窗口大小时的问题

> ID：13802551
> 
> 赞同：1
> 
> 时间：2012-12-10T14:07:08.977
> 
> 标签：html, css

我在我的一个网站上遇到了一个让我发疯的奇怪问题。

当您将浏览器窗口的大小调整到获得滚动条的位置时，会创建一个白色空白。它似乎来自身体标签，但我似乎可以弄清楚原因。

更新：网站地址是[http://www.computerrepairssolihull.co.uk/](http://www.computerrepairssolihull.co.uk/)

![白色虚空](../Images/006f2aa649a2e1477805a9423697ad35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:12:15.993

问题似乎在于您所有的“内容垫”类都没有页面的宽度。

只要我给它一个宽度，它就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:17:52.897

尝试更改布局以使用[响应式设计](/questions/tagged/responsive-design "显示标记为“响应式设计”的问题")框架，例如 Foundation 或 Gumby。

# windows-phone-7 - Windows Phone 7.5/8 - 支持多个品牌的最佳方式

> ID：13802555
> 
> 赞同：6
> 
> 时间：2012-12-10T14:07:37.040
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我正在创建一个需要支持多个品牌的应用程序。每个客户的大部分基础代码都是相同的。差异仅与品牌有关。以下组件是客户特定的：

1.  图像、标志、配色方案
2.  口号、条件条款、隐私政策
3.  应用程序图标

有谁知道在 Windows Phone 7 和 8 中完成此任务的最佳方法？特别是考虑到 Windows Phone 框架使用 xaml 和绑定的事实。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:13:20.300

假设您没有大量不同的品牌需要支持，我建议您只创建多个项目，然后在它们之间链接文件。类似于[使用相同代码库支持 Windows Phone 7.5 和 8 的方式](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html)。

1) 使用品牌 A 图标、徽标创建您的基础项目。2) 将您的品牌特定文本放入资源文件 3) 将您的配色方案放入资源字典

当您准备好创建下一个项目时，您可以：

a) 只需复制并更新图像、文本和颜色或 b) 创建另一个项目并将新图像添加到其中，添加新资源文件并创建单独的资源字典，但链接所有代码和 xaml 文件从第一个项目开始。

如果您使用方法 b 这将意味着您只需更改一次代码和视图，它将跨项目更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:55:38.927

如果这应该是分别提交的不同应用程序，您可以打开生成的 .xap 文件（它实际上只是一个 zip 文件）并替换内容文件（即图像、文本文件等）。您甚至可以在构建后的命令行脚本中自动执行此操作，

# android - 我可以只在某些版本的 Android 中要求权限吗？

> ID：13802564
> 
> 赞同：6
> 
> 时间：2012-12-10T14:08:14.523
> 
> 标签：android, security, android-manifest, android-permissions

GCM 在 JellyBean 及更高版本上不需要 android.permission.GET_ACCOUNTS。但是，我的应用程序适用于 API 级别 11 及更高级别，因此我需要在这些设备上声明它。

由于我不需要使用 GCM 以外的帐户，我只能在 API 级别 16 以下的 android 版本上注册此权限吗？我的应用程序非常注重安全性，因此避免此权限将是一个巨大的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:15:18.557

没有价值执行此操作的标记。但是，您可以发布两个版本，一个用于 11-13 API，另一个用于 14+

但老实说，我不会为 11-13 的范围而烦恼。正如[android 统计数据](http://developer.android.com/about/dashboards/index.html)所示，只有约 1.6% 的用户正在使用其中一个版本。仅限于 11 岁以上的用户，潜在用户的损失仅为 4.4%，而且可能会随着时间的推移而下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T00:44:43.960

添加 SDK 23 (Marshmallow) 后，您可以使用下面的新权限声明来表明应用程序只需要 API 23 或更高版本设备上的权限。

```
<uses-permission-sdk23> 
```

来源：http: [//developer.android.com/guide/topics/manifest/uses-permission-sdk23-element.html](http://developer.android.com/guide/topics/manifest/uses-permission-sdk23-element.html)

# python - 在python中沿列表复制元素

> ID：13802572
> 
> 赞同：2
> 
> 时间：2012-12-10T14:08:41.253
> 
> 标签：python, list, class

`hab`我有一个称为二维数组的列表列表。在这个列表列表中，我存储了一个名为的类的元素，`loc`这就是为什么我不使用 numpy 数组（它不存储数字）。

我想通过循环遍历每个元素来用随机选择的“loc”填充每个元素。但是，似乎每当我到达一行的末尾时，程序都会获取最后一行元素并将其放入该行中的所有其他元素中。这意味着我最终得到的列表列表如下所示：

```
3 3 3 3 3  
1 1 1 1 1  
2 2 2 2 2  
2 2 2 2 2  
4 4 4 4 4 
```

实际上我希望所有这些数字都是随机的（这是打印出每个数字的特定特征，`loc`这就是为什么它是数字）。

这是相关的代码：

```
allspec=[] # a list of species
for i in range(0,initialspec):
    allspec.append(species(i)) # make a new species with new index
    print 'index is',allspec[i].ind, 'pref is', allspec[i].pref
hab=[[0]*xaxis]*yaxis
respect = randint(0,len(allspec)-1)
for j in range(0,yaxis):
    for k in range (0,xaxis):
        respect=randint(0,len(allspec)-1)
        print 'new species added at ',k,j,' is ', allspec[respect].ind
        hab[k][j]=loc(k,j,random.random(),allspec[respect])
        print 'to confirm, this is ', hab[k][j].spec.ind

    for k in range (0,xaxis):
        print hab[k][j].spec.ind

printgrid(hab,xaxis,yaxis)
print 'element at 1,1', hab[1][1].spec.ind 
```

在循环中，我确认我创建的元素是我希望它与线一起使用的元素，此时`print 'to confirm, this is ', hab[k][j].spec.ind`它很好。只有当该循环退出时，它才会以某种方式用相同的东西填充行上的每个元素。我不明白！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T14:10:15.093

问题在这里：

```
hab=[[0]*xaxis]*yaxis 
```

作为上述声明的结果，`hab`包含对*同一列表*`yaxis`的引用：

 *```
In [6]: map(id, hab)
Out[6]: [18662824, 18662824, 18662824] 
```

当你修改 时`hab[k][j]`，所有其他的`hab[][j]`也会改变：

```
In [10]: hab
Out[10]: [[0, 0], [0, 0], [0, 0]]

In [11]: hab[0][0] = 42

In [12]: hab
Out[12]: [[42, 0], [42, 0], [42, 0]] 
```

要修复，请使用

```
hab=[[0]*xaxis for _ in range(yaxis)] 
```

现在每个条目都`hab`指向一个单独的列表：

```
In [8]: map(id, hab)
Out[8]: [18883528, 18882888, 18883448]

In [14]: hab
Out[14]: [[0, 0], [0, 0], [0, 0]]

In [15]: hab[0][0] = 42

In [16]: hab
Out[16]: [[42, 0], [0, 0], [0, 0]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:33:02.273

另一个答案解释了问题所在，但我想使用您可能不知道的 Python 功能提供更清晰的实现。

```
import random
from pprint import pprint

class species(object):
    def __init__(self, ind):
        self.ind = ind
        self.perf = ind

def makespecies(n):
    # using list comprehensions, we don't need a for-loop
    # we could also have said `map(species, range(n))`
    return [species(i) for i in range(n)]

def makegrid(w, h, species):
    # rather than initialize empty lists, we create a new list
    # for each row as we go. This avoids the bug in your code
    # while also being much easier to read.
    return [[random.choice(species) for i in range(w)] for j in range(h)]

def printgrid(grid, attr):
    pprint([[getattr(e, attr, None)  for e in row] for row in grid])

speclist = makespecies(10)
grid = makegrid(5,5,speclist)
printgrid(grid, 'ind') 
```

这将打印如下内容：

```
[[5, 8, 6, 8, 9],
 [9, 3, 3, 1, 3],
 [3, 8, 1, 5, 5],
 [7, 4, 7, 1, 7],
 [4, 3, 3, 1, 9]] 
```

另请注意，如果您正在处理大型数组或对它们进行面向矩阵的操作，则应考虑使用 numpy. 您可以创建一个“主”嵌套数组（如这个），其中将您的物种对象作为原始数据，然后[`vectorize`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)将其用于数值运算的 numpy 数组。*

# android - Android 项目 - R 无法解析或不是字段

> ID：13802577
> 
> 赞同：0
> 
> 时间：2012-12-10T14:08:54.250
> 
> 标签：android, r.java-file

我一直在做一个 android 项目，但是一个非常烦人的错误让我很生气：“R 无法解析或不是一个字段”。好吧，有很多问题得到了答案，但我现在尝试的一切都不起作用：清理项目，销毁 R.java & 清理项目，导入 xyzR；并销毁任何 import android.R;... 但它仍然存在。你能帮助我吗？

这是发生错误的代码（ListArretsActivity.java）：

```
package com.example.onetantan;

import java.util.ArrayList;

import com.example.onetantan.rest.Arret;
import com.example.onetantan.rest.ArretRestMethod;
import com.example.onetantan.rest.ListArret;
import com.example.onetantan.R;

import android.app.ListActivity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class ListArretsActivity extends ListActivity {
    ... // Code that doesn't seemed revelant, for me, for the error given
        class MyAsyncTask extends AsyncTask<Void, Void, Void> {
            @Override
            protected Void doInBackground(Void... paramArrayOfParams) {
                ArretRestMethod arm = new ArretRestMethod(ListArretsActivity.this.R);
                return null;
            }
        }
    ... // Code that doesn't seemed revelant, for me, for the error given
} 
```

这是一个没有问题的代码......（ArretAdapter.java）：

```
package com.example.onetantan;

import java.util.List;

import com.example.onetantan.rest.Arret;
import com.example.onetantan.R;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class ArretAdapter extends BaseAdapter {
    private static String LOG_TAG="ArretAdapter";
    private Context mContext;
    private List<Arret> mListArret;
    private LayoutInflater inflater;

    public ArretAdapter(Context p_oContext, List<Arret> p_oListArret){
        super();
        mContext = p_oContext;
        mListArret = p_oListArret;
        this.inflater = LayoutInflater.from(mContext);
    }
    ... // Code that doesn't seemed revelant, for me, for the error given
    @Override
    public View getView(int p_iPosition, View p_oConvertView, ViewGroup p_oParentView) {
        if (p_oConvertView == null) {
            p_oConvertView = inflater.inflate(R.layout.arret_item, null);
        }
        ((TextView)(p_oConvertView.findViewById(R.id.name))).setText("Heure");
        ((TextView)(p_oConvertView.findViewById(R.id.dist))).setText("Heure");
        return p_oConvertView;
    }
    ... // Code that doesn't seemed revelant, for me, for the error given
} 
```

最后，我的 src 和 gen 文件夹的包资源管理器的图片。想发布图片，但由于我是新用户而没有足够的声誉，所以这里有一个链接：http: [//img217.imageshack.us/img217/5511/tosend.png](http://img217.imageshack.us/img217/5511/tosend.png)

我已经一个星期没有做任何事情了……也许是我看不到的太明显的事情，或者是一个严重的问题，但我真的需要你的帮助。

提前感谢您可以给我的任何答案（即使它是我尝试过 3 次的其他问题的答案，如果需要我会再试一次）。

编辑：您的答案之一是检查我的 xml 文件是否有任何错误。但是 Eclipse 没有发回任何错误，我也没有看到任何错误（我根本没有尝试过......：/）。在我的 res>layout 文件夹中：arret_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/dist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

在我的 res>layout 文件夹中：arret_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ListArretsActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

这些是我的 res.layout 中唯一可以编辑的两个 .xml 文件。

编辑 2：运行 Android Lint，它只返回警告：

不针对最新版本的 Android；兼容性模式适用。不建议使用 .gif 格式的位图（64 项） 在 densityless 文件夹中找到可绘制的位图 res/drawable/l_1.gif（68 项） ressource R.drawable.l_1 似乎未使用（70 项）

我立即纠正了第一个问题，因为我正在使用 API 17（Android 4.2），而我的清单是 16。但它并没有纠正我的错误。

对于其他 3 个警告，这是正常的，因为我暂时不使用它们，因为我得到了这些项目。

好吧，这是我的 AndroidManifest.xml，因为我编辑了它：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.onetantan"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.onetantan.ListArretsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

答：对不起大家，有一个代码我没有给出，它是ArretRestMethod.java。如果我给你这个，你可能会明白：

```
package com.example.onetantan.rest;

import ...

public class ArretRestMethod {
        private static String LOG_TAG="ArretRestMethod";
        Context mContext=null;

        public ArretRestMethod(Context context) {
            mContext = context.getApplicationContext();
        }
        ...
} 
```

我的一位朋友指出我在 ListArretsActivity.java 中的行

```
ArretRestMethod arm = new ArretRestMethod(ListArretsActivity.this.R); 
```

必须这样写：

```
ArretRestMethod arm = new ArretRestMethod(ListArretsActivity.this); 
```

任何想要惩罚我的人都会得到免费的鞭子......：x（我很惭愧我没有看到这个......对不起大家。但我在那里问至少学到了一些东西。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:21:55.770

*   检查您最近编辑的 xml 文件是否有错误。Eclipse 有时会遗漏 xml 文件中的错误，因此您可能必须打开最近编辑的文件。
*   检查 res 文件夹中的任何资源文件名中是否包含非法字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:19:00.027

我们清理你的项目....

```
in eclipse goto -->projects --> select clean --> select your project ( shows in popup ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:42:36.987

Check that `<?xml version="1.0" encoding="utf-8"?>` is at top of arret_item.xml. It's missing from the code you posted, but my be just a copy-paste omission. That's necessary if it isn't there and may break your R references.

Also, try running `Android Lint` in Eclipse. It will help point to warnings that may actually be errors that aren't reported.

Lint details: [http://tools.android.com/tips/lint#TOC-Eclipse-Usage](http://tools.android.com/tips/lint#TOC-Eclipse-Usage)

![enter image description here](../Images/82fe8a6c5a08f566cc0503823af732c1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:04:16.707

```
ArretRestMethod arm = new ArretRestMethod(ListArretsActivity.this.R); 
```

为什么在上面的行中需要 R？我相信它需要一个上下文实例。

如果是这样， 请在 onCreate 中
创建一个字段- 使用上下文作为 -`Context context;`
`context= this;`
`ArretRestMethod arm = new ArretRestMethod(context);`

如果需要其他一些参数，请改为传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T10:37:18.877

我有同样的问题。在与 Clean、Restarts 和其他第一手尝试进行了多次斗争之后，我删除了：

导入android.R；

并将其替换为我的包裹名称

导入 com.josh.microqr

看起来很愚蠢，但经过多次清洁后，像这样的小错误会持续下去。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-07T06:10:14.947

如果您确定您的 xml 和其他设置没有问题，那么首先备份您的项目并删除“gen”文件夹中的 R 文件现在再次构建项目，这将重新生成您的 R 文件（这仅在您的项目不除了“R 无法解析或不是字段”之外，没有错误）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-17T07:59:05.557

IF ALL ELSE FAILS...**创建一个新项目并手动复制所有文件。**

我最近正在对 15 个月内未触及的代码进行更新，并且无法通过此操作。我可能错过了一个配置设置或其他一些琐碎的设置，但我希望我在 3 小时前刚刚完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-04T06:36:51.890

我认为以下任何一项都可以帮助您解决此问题：

*   检查您的 xml 文件是否有错误。
*   检查您的 res 文件夹中是否包含文件名中包含无效字符的文件
*   做项目->清理项目。它将重新生成 R.java 文件。

RK
[http://ctrlaltsolve.blogspot.in](http://ctrlaltsolve.blogspot.in)

# google-apps-script - 如何检查列是否刚刚添加到谷歌电子表格

> ID：13802578
> 
> 赞同：0
> 
> 时间：2012-12-10T14:08:55.327
> 
> 标签：google-apps-script, google-sheets

如果用户刚刚向当前的谷歌电子表格添加了一个新列（我想将格式复制到新列），我有一些我想运行的代码。

我想我需要使用 onEdit(e) 触发器，但我不确定在运行该代码之前如何判断是否添加了 a 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:09:02.697

这个想法是记住工作表的“状态”，并检查每次编辑是否已添加列。这个简单的代码可以做到这一点，您应该将该功能分配给可`OnEdit` 安装的触发器（转到资源>当前脚本触发器>添加新触发器）

```
function CheckColumns() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var sh = ss.getActiveSheet()
    var numcol = sh.getMaxColumns()  
    var formertest = ScriptProperties.getProperty('lastTest')
      if(formertest!=numcol){
Logger.log('change has occured ...')   

// ... do what you want to do

  ScriptProperties.setProperties({'lastTest': numcol}, true);   
}
} 
```

要查看它是否有效，只需查看记录器。请注意，它将要求授权访问脚本属性。

# wix - 条件不能正常工作 Wix

> ID：13802583
> 
> 赞同：0
> 
> 时间：2012-12-10T14:09:18.087
> 
> 标签：wix

我有这样定义的快捷方式，我将发布两个，但我还有更多：

```
 <!--Shortcuts to be added if variant is not OPC or LOGGER-->
  <Component Id="AlarmShortcut" Guid="1FB13893-5021-4C83-9136-00C89221100B" Directory="ProgramMenuDir">
    <Condition><![CDATA[(VARIANT <> "OPC") OR (VARIANT <> "LOGGER")]]></Condition>
    <Shortcut Id="AlarmShortcut" Directory="ProgramMenuDir" Name="Alarm Monitor" Icon="almon_nt.exe" IconIndex="0" Target="[BIN]almon_nt.exe">
      <Icon Id="almon_nt.exe" SourceFile="$(var.Bin)\almon_nt.exe"/>
      <ShortcutProperty Key="System.AppUserModel.ExcludeFromShowInNewInstall" Value="1"/>
    </Shortcut>
    <RegistryValue Root='HKCU' Key='Software\ShortcutProperty\[PRODUCTNAME]' Type='string' Value='1' KeyPath='yes' Name='AlarmShortcut'/>
  </Component>

  <Component Id="UserAShortcut" Guid="328BB0A4-18CA-4E2A-9F6B-CEC81EF45B26" Directory="ProgramMenuDir">
    <Condition><![CDATA[(VARIANT <> "OPC") OR (VARIANT <> "LOGGER")]]></Condition>
    <Shortcut Id="UserAShortcut" Directory="ProgramMenuDir" Name="User Analogs" Icon="usera_cf.exe" IconIndex="0" Target="[BIN]usera_cf.exe">
      <Icon Id="usera_cf.exe" SourceFile="$(var.Bin)\usera_cf.exe"/>
      <ShortcutProperty Key="System.AppUserModel.ExcludeFromShowInNewInstall" Value="1"/>
    </Shortcut>
    <RegistryValue Root='HKCU' Key='Software\ShortcutProperty\[PRODUCTNAME]' Type='string' Value='1' KeyPath='yes' Name='UserAShortcut'/>
  </Component> 
```

`VARIANT = LOGGER`但是，即使在我不知道问题出在哪里时，条件也总是正确的。

该属性声明如下：`<Property Id="VARIANT" Secure="yes"/>` 任何人都知道为什么这不起作用？我查看了详细日志，并且 VARIANT 属性在任何地方都没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:16:45.953

如果我明白你的目标是什么，那么你应该改变

```
(VARIANT <> "OPC") OR (VARIANT <> "LOGGER") 
```

成为

```
(VARIANT <> "OPC") AND (VARIANT <> "LOGGER") 
```

目前，如果 VARIANT 是 LOGGER，则左侧`OR`返回 true，右侧返回 false，因此该`OR`语句返回 true，而听起来您只希望它在 VARIANT 既不是 OPC 也不是 LOGGER 时返回 true。

# javascript - 如何将 HH:mm:ss 字符串转换为 JavaScript Date 对象？

> ID：13802587
> 
> 赞同：7
> 
> 时间：2012-12-10T14:09:26.887
> 
> 标签：javascript, jquery

我有`HH:mm:ss`格式的动态字符串（例如`18:19:02`）。如何将字符串转换为 JavaScript Date 对象（在[Internet Explorer 8](https://en.wikipedia.org/wiki/Internet_Explorer_8)、Chrome 和 Firefox 中）？

我尝试了以下方法：

```
 var d = Date.parse("18:19:02");
   document.write(d.getMinutes() + ":" + d.getSeconds()); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T14:17:56.220

您不能直接从`HH:mm:ss`.

但是 - 假设您想要当前日期（日期对象的日期部分是今天）或者对您的情况无关紧要 - 您可以执行以下操作：

```
let d = new Date(); // Creates a Date Object using the clients current time

let [hours, minutes, seconds] = "18:19:02".split(':');

d.setHours(+hours); // Set the hours, using implicit type coercion
d.setMinutes(minutes); // can pass Number or String - doesn't really matter
d.setSeconds(seconds);

// If needed, you could also adjust date and time zone

console.log(d.toString()); //Outputs desired time (+current day/timezone)
```

现在您有一个 Date 对象，其中包含您指定的时间以及客户的当前日期和时区。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T14:15:48.240

试试这个（没有 jQuery 和日期对象（它只是一个时间））：

```
var
    pieces = "8:19:02".split(':')
    hour, minute, second;

if(pieces.length === 3) {
    hour = parseInt(pieces[0], 10);
    minute = parseInt(pieces[1], 10);
    second = parseInt(pieces[2], 10);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T14:14:05.150

由于缺少日期部分，Date 对象永远不会正确设置。这应该有效：

```
var d = new Date("1970-01-01 18:19:02");
document.write(d.getMinutes() + ":" + d.getSeconds()); 
```

# c# - 如何结束一个线程 c# 跨线程错误

> ID：13802591
> 
> 赞同：0
> 
> 时间：2012-12-10T14:09:40.270
> 
> 标签：c#, winforms, multithreading

我有一个简单的程序，可以将文件并行复制到多个位置。我有一个作为进度条弹出的表单：

```
public partial class PleaseWait : Form
{
    private static PleaseWait mInstance;
    public static void Create()
    {
        var t = new System.Threading.Thread(() =>
        {
            mInstance = new PleaseWait();
            mInstance.FormClosed += (s, e) => mInstance = null;
            Application.Run(mInstance);
        });
        t.SetApartmentState(System.Threading.ApartmentState.STA);
        t.IsBackground = true;
        t.Start();
    }

    public static void Destroy()
    {
        if (mInstance != null) mInstance.Invoke(new Action(() => mInstance.Close()));
    }

    public PleaseWait()
    {
        InitializeComponent();
    }

    public int t = 0;
    private void timer1_Tick(object sender, EventArgs e)
    {
        if (t == 100)
        {
            t = 0;
        }
        else
        {
            t = t + 10;
            progressBar1.Value = t;
        }
    }
} 
```

我`Create`为每个复制线程调用，然后在每个完成 9 次（10 次）后销毁，它将全部关闭，但有时我仍然打开一个，所以我尝试使用此代码

```
private void closewait()
{
    foreach (Form f in Application.OpenForms)
    {
        if (f is file_copy.PleaseWait)
        {
            f.Dispose();
        }
    }
} 
```

但我得到一个跨线程错误。我如何确保副本完成后我没有任何`PleaseWait`打开的表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:21:57.140

这可能是由于引用了来自多个线程的一个 mInstance 字段。

如果您只想显示一份“请稍候”，您应该在创建表单上创建引用计数器 mRef++（当 mRef > 0 显示/创建表单时），mRef-- 在关闭表单上（当 mRef == 0 时，隐藏/关闭表格）。

如果您需要多个“请稍候”，则应创建线程实例数组。

在这两种情况下，您都不应该使用线程共享静态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:17:01.763

使用调用`Dispose`正确的线程`Control.Invoke`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:18:05.410

您应该调用 PleaseWait 表单的方法来自行关闭和处理。

并且 PleaseWait 表单应该使用一个标志来判断是否结束计时器。

# javascript - jquery-easyui 将节点追加到树视图

> ID：13802598
> 
> 赞同：0
> 
> 时间：2012-12-10T14:10:09.100
> 
> 标签：javascript, jquery, tree, jquery-easyui

我正在使用 jquery-easyui Treeview。

我有以下代码。

```
// append some nodes to the selected node
        var node = $('.JQTreeview').tree('find', 1234);

        $('.JQTreeview').tree('append', {
            parent: node.target,
             data:[{
                 id: 1235,
                 text:'new1'

         },{
                 text:'new2',
                 state:'closed',
                 children:[{
                         text:'subnew1'
                 },{
                         text:'subnew2'
                 }]
         }]
    }); 
```

代码运行良好，但我看不到新添加的节点。

非常感谢任何帮助

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T13:15:26.367

将easyui版本升级到1.3.4可以解决这个问题。

[http://www.jeasyui.com/download/v134.php](http://www.jeasyui.com/download/v134.php)

# c# - C# 交叉检查具有大型 CSV 的慢速数据库

> ID：13802604
> 
> 赞同：0
> 
> 时间：2012-12-10T14:10:23.513
> 
> 标签：c#, database, csv, streamreader

我有一个数据库，速度不是很快，而且我有一个大约 65000 行的大 CSV。我需要交叉检查这些是否存在，并在需要时更新数据库。

*   在 CSV 中，有一列包含数据库 ID。它始终是 1:1 的关系。
*   CSV 可能会保存数据库的新输入，因此可能会出现没有数据库条目的情况。
*   我无法遍历 CSV 并检查每一行，因为它太慢了。
*   首先从数据库中获取所有结果并将它们存储在每次循环中都是行不通的，因为这会占用大量 RAM。

我该如何执行以下操作：

*   检查 CSV 中的一行是否有数据库条目。如果是这样，请将其写入另一个 CSV 文件。
*   如果该行没有数据库条目，则将其写入不同的文件。
*   将时间跨度保持在 5 分钟以内，最好更短。

CSV 有很多列（例如 70），但我只需要第 5 列来交叉检查 ID。我曾尝试先遍历 CSV 文件，然后用数据库检查它，但这太慢了。可能需要 10 多分钟。我还尝试从数据库中获取所有条目，并循环遍历这些条目。使用循环，运行 CSV（使用 a `BufferedStream`）并检查它。这确实显着减少了时间（最多 5 分钟），但将无法记录数据库中不存在的条目。

有什么办法可以在保持速度的同时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:25:41.460

没有足够的信息来给你一个正确的分析，最终得出一个铁定的解决方案。我可以给一些建议。作为记录，包含 65,000 条记录的 CSV 并没有那么大。我也不同意遍历文件太慢，因为我个人曾使用流式阅读器来比较千兆字节大小的文件，这很可能要大一个数量级。

首先，您可以考虑扭转问题。与其在运行 CSV 时拉动数据库，不如考虑将整个集合拉入内存（如果您有一个庞大的数据库，这不是一个好主意，但如果它是可管理的，则可以选择）。如果稍微大一点，您甚至可以将数据库（假设这是单个表或视图（或可能是视图的查询））写入不同的 CSV。这里的核心焦点是让慢速数据库脱离循环。注意：如果这是一个高度事务性的系统，并且您需要“最多一分钟（或 5 分钟）的准确快照”，这可能还不够。我发现这是一个不切实际的期望（即现在的数据仍然代表 5 分钟前，尽管进行了多次编辑）。

接下来，可以考虑减少集合。您的问题中已经提到的一种简单方法是将工作 CSV 从 70 列减少到您需要的 5 列。如果您从数据库中提取相同的数据进行比较，情况也是如此。这只有在加载时间是瓶颈时才有效。根据您的描述，我严重怀疑是这种情况。

您还可以考虑将这两位数据放入内存并在那里计算。非常快。如果由于大小而无法将这两个项目比较到内存中，这将不起作用，这就是为什么过滤到您需要的列是一个有用的练习的原因。

既然您提到了数据库 ID，听起来 CSV 会检查多个数据库。考虑首先按数据库 ID 排序 CSV。如前所述，有些排序算法非常快，应该能够在几秒钟内对 65,000 条记录进行排序。排序的瓶颈通常是内存量和 I/O 速度（主要是磁盘速度）。然后，您可以攻击每个数据库。

正如我在开头所说，我只有足够的信息来提供提示，而不是实际的解决方案，但希望这能激发一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:12:18.073

迟到的答案，但我已经这样解决了：我将需要的 CSV 列拉到`DataTable`. 然后我获取我需要检查的所有行（它有一个我可以过滤的特定数字），并遍历这些数据库行。每行都会检查相应的 ID`DataTable`并将数据放入新的 CSV 中。之后，DataTable 中的行将被删除。最后，我有一个包含确实存在的行并将被导入系统的 CSV，以及一个将导出到包含需要添加的行的 CSV 的 DataTable。

感谢 Gregory 帮助我走上正轨。

# google-app-engine - HttpOnly / 使用 Play Framework 和 Google App Engine 的安全 cookie

> ID：13802607
> 
> 赞同：3
> 
> 时间：2012-12-10T14:10:34.270
> 
> 标签：google-app-engine, playframework, session-cookies, playframework-1.x, httponly

我们正在使用 Play 开发应用程序！1.2.5 并部署到 Google App Engine。在 application.conf 中，我将会话 cookie 设置为 httpOnly 且安全：

```
application.session.httpOnly=true
application.session.secure=true 
```

当我在本地触发请求时，我可以看到标头设置正确：

```
Set-Cookie: PLAY_SESSION=something;Expires=Mon, 10-Dec-2012 14:51:56 GMT;Path=/;Secure;HTTPOnly 
```

当我部署到 Google App Engine 时，我在设置的 cookie 上看不到任何 Secure 或 HTTPOnly 标志。怎么来的？

我在网上找不到类似的问题。我读到的最接近的东西是 GAE 不支持 response.setHttpOnly （或类似的东西），但来自 Play！源代码我可以看到一个简单的 Cookie 正在创建，其中 httpOnly 值设置为布尔值并写入响应。不知道为什么 GAE 不接受这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:48:14.147

你可以做的事情来调试：

*   对不同的 cookie 执行 response.setHttpOnly（或将 httpOnly 参数设置为 true 的 response.setCookie），而不是会话之一，以查看问题是否适用于所有 cookie。
*   在您的控制器中，检查 request.cookies，一个包含所有接收到的 cookie 的映射，以查看接收到的 cookie 的 httpOnly 值。
*   根据上述两个，也许检查您在 request.cookies 和 response.cookies 中的内容是否与 httpOnly 一致
*   根据上述情况，可能编辑响应 cookie 以将 httpOnly 设置为 true
*   如果上述方法均无效，则可以手动生成“Set-cookie”标头。从 cookie 映射中获取值，从映射中删除该 cookie 以使其不重复，然后使用手动创建的响应执行 setHeader

所有这些可能不会为您提供解决方案，但可能会帮助您了解正在发生的事情以及是否可能。

# linux - Windows 上的 HTML5 地理位置比 Linux（Firefox、Chrome、[Chromium]）更准确

> ID：13802608
> 
> 赞同：4
> 
> 时间：2012-12-10T14:10:37.573
> 
> 标签：linux, windows, html, geolocation

我一直在玩 HTML5 地理定位，并注意到我在 Windows 系统上获得的结果始终比在 Linux 系统上更好。

我双启动，所以硬件是相同的。Wifi 在这两种情况下都打开，并且没有内置 GPS 适配器。

更准确地说，我的意思是在 Windows 上显示的位置通常在我实际位置的 50-100m 范围内，而在 Linux 上，位置偏离了约 6 公里（它永远不会改变，它总是显示完全相同的位置，基本上是市中心）。

在 Windows 上的 Chrome 和 Firefox 以及 Linux 上的 Chrome、Chromium 和 Firefox 上进行了测试。

更新：刚刚在 Safari/Mac OSX 上测试过。与 Windows 中的精度相同。所以Linux是唯一一个结果不好的系统:(

任何人都可以重现这个吗？Linux 上的 Firefox 和 Chrome 是否不使用 WiFi 作为位置信息的额外来源？我在这里还缺少什么？

感谢您的宝贵意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:49:40.837

根据这篇文章：[HTML5 地理位置准确性](http://www.andygup.net/?p=600)

> 并非所有的地理定位服务都是相同的，而且它们当然也不都使用相同的算法和完全相同的数据库。因此，结果通常会因使用不同地理位置服务的浏览器而异。

它还解释了 Windows 上的 Firefox 使用 Google 位置服务。Linux 上的 Firefox 使用 GPSD，GPS 守护程序是 Linux 上的地理定位服务。

这可能是准确性差异的原因。

# qt - 如何使用 QSqlQuery 在事务中获取先前插入的行的 ID

> ID：13802614
> 
> 赞同：7
> 
> 时间：2012-12-10T14:11:04.523
> 
> 标签：qt, transactions, qtsql

我试图在事务范围内获取插入行的主键，因为我不想让数据库处于逻辑上不一致的状态。

我的问题是我找不到一种方法来检索以前执行的查询的 ID 值，我想将其用于下一个插入查询。在事务生效时查询 PostgreSQL 数据库在非外键表中显示没有结果（该行尚未提交？）。我相信这是由于事务的隔离级别。

下面是我试图用生产代码做的事情，尽管为了清楚起见，稍微编辑并缩小到一个功能。`const int lastInsertId`始终为 0，在这种情况下应该意味着没有找到任何值（从技术上讲，该`toInt()`函数失败了）。我尝试手动插入一个有效的非外键行，然后调用`LASTVAL()`它产生了预期的结果——插入行的 ID。

那么，我做错了什么？我在这里遗漏或误解了什么？

```
void createEntityWithoutForiegnKeyConstraint(const QString &nameOfEntity)
{
  db_.transaction();

  QSqlQuery insertQuery(db_);
  insertQuery.prepare("INSERT INTO \"EntityWithoutForeignKey\" (\"name\") VALUES (:name);");

  insertQuery.bindValue(":name", nameOfEntity);
  execQuery(__LINE__, insertQuery);
  QSqlQuery lastIdQuery("SELECT LASTVAL();", db_); // auto executes
  const int lastInsertId = lastIdQuery.value(0).toInt();

  if (lastInsertId <= 0) // 0 is not a valid ID
    throw exception("Oh noes.");

  createEntityWithForeignKeyConstraint(lastInsertId, someData);

  if (!db_.commit())
    db_.rollback();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-01-14T20:37:12.837

我意识到这是一个老问题，但在 Qt 5.10（可能更早）中有一个`QSqlQuery::lastInsertId()`可以在`QSqlQuery::exec()`.

如果您使用的数据库（例如 SQLite）不支持语句中的`RETURNING`子句，这将非常有用`INSERT`。

[QSqlQuery::lastInsertId() 文档。](http://doc.qt.io/qt-5/qsqlquery.html#lastInsertId)

用法大致如下：

```
QSqlQuery q;
q.prepare("INSERT INTO table_name VALUES(:some_column_name)");
q.bindValue(":some_column_name", "FooBar");
q.exec();

qDebug() << "Last ID was:" << q.lastInsertId(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-15T09:44:38.530

@Kasheen 完全正确，但我想将重点放在您应该牢记的一个重要方面：**不要忘记将所有内容封装在一个事务**中。

为什么？如果使用生成的主键（你得到了`q.lastInsertId()`）的第二次插入失败，它可以节省时间并避免数据库损坏。

所以你的插入应该是这样的（这基本上是@Kasheen 的答案，有一些补充）：

```
db_.transaction(); // Starts a transaction

QSqlQuery q;

// first insert
q.prepare("INSERT INTO table_name VALUES(:some_column_name)");
q.bindValue(":some_column_name", "FooBar");
q.exec();

auto pk == q.lastInsertId().toInt;

// second insert
q.prepare("INSERT INTO other_table VALUES(:other_column_name, :fk)");
q.bindValue(":other_column_name", "OtherText");
q.bindValue(":fk", pk);
q.exec();

db_.commit(); // Commits transaction 
```

@average joe 正确地进行了事务处理，但如果您只查看解决方案，您可能会忘记它。

# xaml - 混合 WinJS 和 XAML

> ID：13802619
> 
> 赞同：0
> 
> 时间：2012-12-10T14:11:29.033
> 
> 标签：xaml, winrt-xaml, winjs

我们有一个 WinJS 应用程序，它的性能不如使用 XAML/C# 编写的那样好。是否可以通过在 WinJS 中托管 XAML 或在 XAML 中托管 WinJS 将应用程序逐个移动到 XAML 中？还是需要完全重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:39:54.220

改写。在 WinJS 应用程序中托管 XAML 是不可能的，并且在 XAML Web 视图中托管 WinJS 将非常困难 - 两个技术堆栈之间的通信将非常困难，以至于您不会节省任何时间或精力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-07T23:19:43.757

更好的问题是：为什么您的应用没有按预期运行？

通常，WinJS 应用程序的性能应该与（或在某些情况下，优于）C#/XAML 应用程序相同。什么对你来说表现不佳？渲染？布局？非 UI 代码？（如果它对性能敏感而 JS 执行或内存管理阻碍了您，您可以将其移至 C# 或 C++ WinRT 组件 - 但这些情况很少见）。

那么，您进行了哪些性能分析，让您相信问题实际上是 WinJS？（或 HTML/JS 运行时？）

# php - Javascript/AJAX 在除 IE 之外的所有应用中都能正常工作

> ID：13802623
> 
> 赞同：0
> 
> 时间：2012-12-10T14:12:05.613
> 
> 标签：php, javascript, ajax, internet-explorer-9

我有一个简单的程序，它在 Firefox 和 Chrome 中可以 100% 运行，但在 Internet Explorer（第 9 版）中无法运行。

从列出当天所有预定约会的页面调用弹出窗口。这是该弹出窗口的代码：

```
<?php

$name = $_GET['name'];
#$type = $_GET['type'];
$type = "Regular";
$id   = $_GET['id'];

?>

<!doctype html>
<html>
    <head>
        <title><?php echo $name; ?></title>
        <style type="text/css">
            body {
                font-family: Georgia;
            }
            .col1 {
                float: left;
                padding-right: .75em;
            }
            .col1 div { height: 1.5em; }
            .col2 div { height: 1.5em; }
            .col2 {
                float: left;
                padding-right: .5em;
            }
            .notes {
                clear: both;
            }
        </style>
        <script type="text/javascript">
            function saveClose() {
                var xmlhttp;
                var getstring  = "";
                var d          = document;

                var start_hour = d.getElementsByName('start_hour')[0].value;
                var start_min  = d.getElementsByName('start_min')[0].value;
                var start_am   = d.getElementsByName('start_am')[0].value;

                var end_hour   = d.getElementsByName('end_hour')[0].value;
                var end_min    = d.getElementsByName('end_min')[0].value;
                var end_am     = d.getElementsByName('end_am')[0].value;

                var no_show    = d.getElementsByName('no_show')[0].checked;

                var notes      = d.getElementsByName('notes')[0].value;

                getstring += "?type=<?php echo $type ?>";
                getstring += "&id=<?php echo $id ?>";
                getstring += "&s_hour="+start_hour;
                getstring += "&s_min=" +start_min;
                getstring += "&s_am="  +start_am;
                getstring += "&e_hour="+end_hour;
                getstring += "&e_min=" +end_min;
                getstring += "&e_am="  +end_am;
                getstring += "&ns="    +no_show;
                getstring += "&notes=" +notes;

                if (window.XMLHttpRequest)
                {
                    // code for IE7+, Firefox, Chrome, Opera, Safari;
                    xmlhttp = new XMLHttpRequest();
                } else {
                    // code for IE6, IE5;
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }

                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                    {
                        var reply = xmlhttp.responseText;
                        if (reply == "Successful!") {
                            setTimeout('self.close()', 1000);
                        } else {
                            document.getElementById('resultsContent').innerHTML = xmlhttp.responseText;
                        }
                    } else {
                        document.getElementById('resultsContent').innerHTML = "Saving...";
                    }
                }

                xmlhttp.open("GET", "saveClose.php"+getstring, true);
                xmlhttp.send();
            }
        </script>
    </head>
    <body>
        <div><h2><?php echo $name; ?>'s Consult</h2></div>
        <div class="col1">
            <div>Consult Start Time:</div>
            <div>Consult End Time:</div>
            <div>No Show? :</div>
        </div>
        <div class="col2">
            <div>
                <select name="start_hour">
                    <option></option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                </select>
                :
                <select name="start_min">
                    <option></option>
                    <option>00</option>
                    <option>05</option>
                    <option>10</option>
                    <option>15</option>
                    <option>20</option>
                    <option>25</option>
                    <option>30</option>
                    <option>35</option>
                    <option>40</option>
                    <option>45</option>
                    <option>50</option>
                    <option>55</option>
                </select>
                -
                <select name="start_am">
                    <option></option>
                    <option>AM</option>
                    <option>PM</option>
                </select>
            </div>
            <div>
                <select name="end_hour">
                    <option></option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                </select>
                :
                <select name="end_min">
                    <option></option>
                    <option>00</option>
                    <option>05</option>
                    <option>10</option>
                    <option>15</option>
                    <option>20</option>
                    <option>25</option>
                    <option>30</option>
                    <option>35</option>
                    <option>40</option>
                    <option>45</option>
                    <option>50</option>
                    <option>55</option>
                </select>
                -
                <select name="end_am">
                    <option></option>
                    <option>AM</option>
                    <option>PM</option>
                </select>
            </div>
            <div><input type="checkbox" name="no_show" /></div>
        </div>
        <div class="notes">Notes:</div>
        <div class="notes"><textarea name="notes" rows="5" cols="53"></textarea></div>
        <div class="notes"><button type="button" onClick="saveClose();">Save & Close</button><span id="resultsContent" style="padding-left:1em"></span></div>
    </body>
</html> 
```

AJAX 调用运行这个 PHP 脚本：

```
<?php

$type   = $_GET['type'];
$id     = $_GET['id'];
$s_hour = $_GET['s_hour'];
$s_min  = $_GET['s_min'];
$s_am   = $_GET['s_am'];
$e_hour = $_GET['e_hour'];
$e_min  = $_GET['e_min'];
$e_am   = $_GET['e_am'];
$ns     = $_GET['ns'];
$ns     = (($ns == "true") ? "1" : "0");
$notes  = $_GET['notes'];

switch (true) {
    case empty($type):
        echo "\$type is broken!";
        break;
    case empty($s_hour):
        echo "\$s_hour is broken!";
        break;
    case empty($s_min):
        echo "\$s_min is broken!";
        break;
    case empty($s_am):
        echo "\$s_am is broken!";
        break;
    case empty($e_hour):
        echo "\$e_hour is broken!";
        break;
    case empty($e_min):
        echo "\$e_min is broken!";
        break;
    case empty($e_am):
        echo "\$e_am is broken!";
        break;
    case (!isset($ns)):
        echo "\$ns is broken!";
        break;
    case (!isset($notes)):
        echo "\$notes is broken!";
        break;

    default:
        // SALES APPTS.
        # ...
        # ...
        # ...

        // OTHER APPTS.
        # ...
        # ...
        # ...

        echo "Successful!";
        break;
}

?> 
```

正如预期的那样，Firefox 和 Chrome 会在每个 case 语句中停止，直到选择了开始时间和结束时间。完美运行。

`case empty($s_hour):`但是，无论如何，IE每次都会停止。我什至无法通过第一个案例陈述来查看其余部分是否也被破坏。我不明白。

任何帮助将不胜感激，因为此应用程序必须与 IE9 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:07:22.203

如果您的值来自下拉菜单，则不应直接`.value`在`<select>`元素上使用来访问所选选项（该属性不会在所有浏览器上更新）。改用这个：

```
function getDropdownValue(el)
{
    return el.selectedIndex >= 0 ? el.options[el.selectedIndex].value : '';
}

start_hour = getDropdownValue(d.getElementsByName('start_hour')[0]);
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:09:33.100

您正在尝试读取选择框的值的值，但 'value' 属性可能不会像您期望的那样填充，因为它试图从所选选项中获取 value 属性，而不是该选项的文本。

您应该`<option>`像这样向元素添加显式值属性：

```
<option value='12'>12</option> 
```

或显式获取所选选项的文本，如下所示：

```
var objStHr = document.getElementsByName('start_hour')[0];
var start_hour = objStHr.options[objStHr.value]; 
```

（为了简洁起见，我使用了一个临时变量来保存对象，因为我们必须引用它两次）

希望有帮助。

# asp.net - 获取 EF 4 数据库第一个对象属性注释

> ID：13802626
> 
> 赞同：0
> 
> 时间：2012-12-10T14:12:16.270
> 
> 标签：asp.net, entity-framework, annotations, database-first

我们使用 EF4 数据库优先方法来创建在上下文类中找到的所有实体。我现在尝试将显示名称属性添加到对象的属性之一，如下所示：

```
[MetadataType(typeof(OpportunityMetaData))]
public partial class Opportunity : EntityObject
{

}

public class OpportunityMetaData
{
    [Display(Name = "Worked By")]
    public int WorkedById { get; set; }
} 
```

然后在一个测试页面上，使用反射，我试图得到一个输出，上面写着“Worked By”，如下所示：

```
var attrType = typeof(DisplayNameAttribute);
var property = typeof(Opportunity).GetProperty("WorkedById");
Response.Write(((DisplayNameAttribute)property.GetCustomAttributes(attrType, false).FirstOrDefault()).DisplayName); 
```

但这只是给`Object Reference not set to an instance of an object`. 或者，如果我只是`Response.Write`属性，它会写出“WorkedById”而不是“Worked By”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:19:56.623

它的`DisplayAttribute`，不是`DisplayNameAttribute`。 `Name`只是它的一个属性。

# java - 何时使用 MessageDigest.reset()

> ID：13802627
> 
> 赞同：5
> 
> 时间：2012-12-10T14:12:18.057
> 
> 标签：java, hash, owasp, message-digest

我盲目地遵循了 OWASP 关于在 java 中生成哈希的建议（[见这里](https://www.owasp.org/index.php/Hashing_Java#Hardening_against_the_attacker.27s_attack)），我不确定我是否正确地完成了它。具体来说，我不确定 的目的和效果`MessageDigest.reset()`，因此不确定何时以及如何使用它。

1.  我正在“加载”我的盐和有效负载，`update()`方法是多次使用不同的值对摘要进行处理，这些值完全需要签名。我应该`reset()`事先摘要吗？还是之后？
2.  为什么摘要`reset()`在循环中（参见示例）？

这是我的代码：

```
MessageDigest md = MessageDigest.getInstance("SHA-256");
md.update(salt);
md.update(payload1);  // part 1 of payload
md.update(payload2);  // part 2 of payload
md.update(serialNumber);  // part 3 of payload
md.reset();
byte[] sig = md.digest();
for (int i=0; i<1000; i++) {
  md.reset();
  sig = md.digest(sig);
} 
```

我观察到的是，即使在更改时签名也保持不变`serialNumber`。如果我省略了“reset（）”调用，sig 确实会改变......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T14:18:04.350

如果您`reset`已经使用了`MessageDigest`. `reset`在这里调用以清除所有以前的设置。

`MessageDigest.getInstance`是一种[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)而不是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)，因此附加了大量开销。

从[MessageDigest.getInstance](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html#getInstance%28java.lang.String%29)：

> 返回一个**新**的 MessageDigest 对象，该对象封装来自支持指定算法的第一个 Provider 的 MessageDigestSpi 实现。

所以最好重复使用并避免`MessageDigest.getInstance`再次调用的开销。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T15:22:50.090

代码在我看来……也许我在这里读错了，但是[文档](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html#digest%28%29)说`digest()`隐式地重置了实例。因此，`reset()`如果您有 1) 以前调用过`update()`并且 2) 需要重新使用该实例，但不需要调用的结果，您就会`update()`调用。

就您而言，我还认为您需要省略对`reset()`. 否则，您将放弃从盐和有效负载中获得的任何好处。循环内部的调用`reset()`是不必要的，但不应更改计算结果。

希望有帮助。

# version-control - 在 TFS 源代码管理中更新二进制文件

> ID：13802630
> 
> 赞同：7
> 
> 时间：2012-12-10T14:12:23.497
> 
> 标签：version-control, tfs, binaryfiles

因此，我决定将我引用的第 3 方 dll 添加到名为 lib 的单独文件夹中的源代码控制中，然后从所述目录中引用它们。

这工作得很好，但是当我想更新文件时，TFS 似乎完全没有注意到文件实际上已经改变的事实。即使我复制旧文件，似乎也无法签入新文件。如果我从源代码管理资源管理器中选择签入挂起更改，我会收到一个信息框，说明没有更改。但是，如果我在最新版本和工作区版本之间比较单个 DLL，TFS 确实告诉我文件确实不同。

那么从源代码管理中删除文件然后将它们重新添加为较新版本的唯一解决方案是，还是我可以以某种方式更新它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T14:25:36.193

Team Foundation Server（到 2010 年，以及 2012 年的“服务器工作区”）使用“[签出/编辑/签](http://www.ericsink.com/scm/scm_checkins.html)入”模型进行版本控制，这与许多其他类型的版本控制系统（例如，“编辑/合并/提交”系统）不同.

为了更新您的二进制文件，您需要显式[检出它们并更新内容](http://msdn.microsoft.com/en-us/library/ms181395.aspx)。然后您可以签入它们。这种类型的系统针对处理大型存储库和大型文件（如二进制文件）进行了调整，因为它不需要扫描您的磁盘来确定文件是否已更改。

如果您更喜欢使用 Edit/Merge/Commit 类型的系统，它将扫描您的磁盘以查找更改并且您不需要显式检出文件，这在 TFS 2012 中可用（作为“本地工作区”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:21:29.143

您是否尝试在替换之前检查文件以进行编辑？它在这里工作......

# sql - 获取多个 id 值的描述 - SQL Server

> ID：13802631
> 
> 赞同：1
> 
> 时间：2012-12-10T14:12:23.087
> 
> 标签：sql, sql-server, tsql, unpivot

我有两个表 x 和 y

表 x 有 24 列，每列都有不同的 Id 值

表 Y 有一个 Id 值列和一个描述

我需要编写一个过程、查询或视图，以尽可能最佳的性能方式返回表 x 中包含的 24 个 Id 值中的每一个的描述。

我编写了一个调用函数 24 次的视图。该函数根据提供的 Id 返回描述。虽然这行得通，但它的表现并不是特别好。

在需要从单个表中获得这么多描述的情况下，我应该使用一种技术吗？

这是表 x 的定义（为清楚起见，删除了不相关的列）

```
 [DefinitiveHLATypeId] [int] IDENTITY(1,1) NOT NULL,
[PersonId] [int] NOT NULL,
[A_X] [int] NULL,
[A_Y] [int] NULL,
[B_X] [int] NULL,
[B_Y] [int] NULL,
[Bw_X] [int] NULL,
[Bw_Y] [int] NULL,
[C_X] [int] NULL,
[DRB1_X] [int] NULL,
[DRB1_Y] [int] NULL,
[DRB3_X] [int] NULL,
[DRB3_Y] [int] NULL,
[DRB4_X] [int] NULL,
[DRB4_Y] [int] NULL,
[DRB5_X] [int] NULL,
[DRB5_Y] [int] NULL,
[DQA_X] [int] NULL,
[DQA_Y] [int] NULL,
[DQB_X] [int] NULL,
[DQB_Y] [int] NULL,
[DPA1_X] [int] NULL,
[DPA1_Y] [int] NULL,
[DPB1_X] [int] NULL,
[DPB1_Y] [int] NULL 
```

这是表 y 的定义（为清楚起见，删除了不相关的列）

```
 [AntigenId] [int] IDENTITY(1,1) NOT NULL,
[AntigenDescription] [varchar](2000) NOT NULL 
```

两个表之间的关系是表x中的_X & _Y列和表Y中的AntigenId列之间的关系

我需要为表 x 中的每个 _X 和 _Y 列返回抗原描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:20:45.053

加入

```
select tbl.col1ID, desc1.desc, tbl.col2ID, desc2.desc
from tbl 
join desc as desc1 
  on desc1.ID = col1ID 
join desc as desc2 
  on desc2.ID = col1ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:29:53.980

在您的表中没有看到任何示例数据，如果您有一个包含 24 列数据的表，您需要与另一个表进行比较，那么有几种方法可以做到这一点。

首先，您可以对表中的每一列执行多个连接，如下所示：

```
select *
from tablex x
left join tabley y1
  on x.col1 = y1.id
left join tabley y2
  on x.col2 = y2.id --- add more joins 
```

我不知道加入表 24 次是否是最有效的，因此`UNPIVOT`在具有 24 列的表上执行并加入该结果可能会更容易：

```
select x.value,
  y.description
from 
(
  select value, col
  from tablex
  unpivot
  (
    value
    for col in (col1, col2, col3, col4, col5)
  ) unpiv
) x
left join tabley y
  on x.value = y.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c0bb8/7)

这`UNPIVOT`与使用`UNION ALL`on`tablex`将数据从多列转换为数据行相同，这将更容易加入：

```
select *
from
(
  select col1 value, 'col1' col
  from tablex
  union all
  select col2 value, 'col2' col
  from tablex
  union all
  select col3 value, 'col3' col
  from tablex
  union all
  select col4 value, 'col4' col
  from tablex
  union all
  select col5 value, 'col5' col
  from tablex
) x
left join tabley y
  on x.value = y.id 
```

根据您的编辑，您的查询将与此类似：

```
select x.value,
  y.AntigenDescription
from 
(
  select DefinitiveHLATypeId, PersonId, value, col
  from tablex
  unpivot
  (
    value
    for col in (A_X, A_Y, B_X, B_Y, Bw_X, Bw_Y,
                    C_X, DRB1_X, DRB1_Y, DRB3_X, DRB3_Y,
                    DRB4_X, DRB4_Y, DRB5_X, DRB5_Y, DQA_X, DQA_Y,
                    DQB_X, DQB_Y, DPA1_X, DPA1_Y,
                    DPB1_X, DPB1_Y
  ) unpiv
) x
left join tabley y
  on x.value = y.AntigenId 
```

*注意：从长远来看，我的建议是重新设计表，`tablex`因为以这种方式构建的表会使访问数据变得困难。*

# c++ - 将文本文件读取为字符串的最短方法

> ID：13802632
> 
> 赞同：7
> 
> 时间：2012-12-10T14:12:29.733
> 
> 标签：c++, string, file, text, c++11

> **可能重复：**
> [在 C++ 中将文件啜饮到 std::string 中的最佳方法是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c)

我以为已经有这样的问题了，但我找不到。所以这是我的问题。

将整个文本文件读入字符串的最短方法是什么？我只想使用最新的 C++ 标准和标准库的特性。

我认为必须有一个班轮来完成这项共同的任务！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T14:15:14.200

大概是这样的：

```
std::ifstream fin("filename");
std::ostringstream oss;
oss << fin.rdbuf();
std::string file_contents = oss.str(); 
```

还有这个：

```
std::istreambuf_iterator<char> begin(fin), end;
std::string file_contents(begin, end); 
```

有些人可能会建议这样做，但我更喜欢`istreambuf_iterator<char>`只输入一次。

```
std::string file_contents(std::istreambuf_iterator<char>{fin}, std::istreambuf_iterator<char>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:40:19.987

要将文件读入`std::string`using one 语句（它是否适合一行取决于行的长度......）看起来像这样：

```
std::string value{
    std::istreambuf_iterator<char>(
        std::ifstream("file.txt").rdbuf()),
    std::istreambuf_iterator<char>()}; 
```

不幸的是，这种方法通常不如使用额外的方法快`std::ostringstream`（尽管它确实应该更快......）。

# html - Ajax Call 使用 jsonp 从其他域调用 rest webservice

> ID：13802633
> 
> 赞同：0
> 
> 时间：2012-12-10T14:12:33.283
> 
> 标签：html

当从不同的域调用rest webservice时我如何使用jsonp。因为我的简单json不适用于rest webservice。我如何为ajax调用调用rest webservice。我同时使用jsonp和javascript。服务器响应我只看到firebug 中的浏览器，但如何在我的应用程序中显示它

我的 JS 代码。

function callService() { $.ajax({ type: varType, //GET or POST or PUT or DELETE verb url: varUrl, // 服务数据的位置: varData, //发送到服务器的数据 crossDomain: true, cache: false, async: false, contentType: varContentType, // 发送到服务器的内容类型 dataType: varDataType, // 来自服务器的预期数据格式 processdata: varProcessData, //True or False success: function (msg) {//On Successl service call alert("服务器响应成功！.."); }, error: function (msg) { alert('error' + msg.d); } });} 函数 countryProvinceWCFJSONMulti() {

```
 var head = document.getElementsByTagName('head')[0];
        script = document.createElement('script');
        script.type = 'JSON';
        script.src = "http://192.168.15.213/myservice/Service.svc/GetEvents";
        script.type = "text/javascript";
        head.appendChild(script);
        varType = "GET";           
        varData = '{"username": "' + "Suhasusername" + '","password": "' + "suhaspassword" + '"}';
        varContentType = "application/JSONP; charset=utf-8";
        varDataType = "JSONP";
        varProcessData = true;
        callService();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:32:21.800

如果同源策略不是问题，您的代码应如下所示：

```
$.ajax({ url: url,
         dataType: 'jsonp',
         contentType: 'application/json',
         success: function (data) {
               alert("Server Response Successful!..");
        }
    }); 
```

[这是一个](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)关于规避同源策略的问题

# java - 标有原型范围的 Bean 在 Spring 中不起作用

> ID：13802636
> 
> 赞同：6
> 
> 时间：2012-12-10T14:12:40.180
> 
> 标签：java, spring, scope, prototype-scope

我有两个豆子，父母和孩子。我已将子 bean 声明为原型范围。
我希望新的子对象用于调用父类中的任何子方法。例如。在下面的示例中，我希望语句 1 在不同的子对象上调用方法**sayHi**，而语句 2 在不同的子对象上调用**sayHi1**。

一种方法是在调用任何子方法之前实现**ApplicationContextAware**并使用获取新的子对象。`context.getBean("")`但我不想那样做。

还有其他选择吗？

```
@Component
public class Parent{

    @Autowired
    Child child;

    public void sayHello(){     
        child.sayHi();           -------------- (1)
    }

    public void sayHello1(){    
        child.sayHi1();          --------------- (2)
    }
}

@Component
@Scope(value=BeanDefinition.SCOPE_PROTOTYPE)
public class Child{

    public void sayHi(){
        System.out.println("Hi Spring 3.0");

    }

    public void sayHi1(){
        System.out.println("Hi1 Spring 3.0 ");      
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T15:52:04.847

修复只是将原型 bean 标记为范围代理，这意味着当您将较小范围的 bean 注入较大范围时（例如在您将原型注入单例的情况下）然后是代理bean 的一部分将被注入到更大的作用域中，当通过代理调用 bean 的方法时，代理会理解作用域并做出适当的响应。

```
@Component
@Scope(value=BeanDefinition.SCOPE_PROTOTYPE, proxyMode=ScopedProxyMode.TARGET_CLASS)
public class Child{ 
```

这是一个[参考](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other-injection)

另一种选择可能是使用[此处描述的称为查找方法注入的东西](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:22:44.120

我认为您必须`new Child`每次都自己制作，或者确实使用春天的环境来获得新鲜的豆子。

Spring 只会在需要注入某些东西时（在原型的情况下）创建一个新实例。当你在课堂上时，你实际上已经超出了 spring 的范围。

这是一个类似的帖子：[@Scope("prototype") bean scope not Creating new bean](https://stackoverflow.com/questions/7621920/scopeprototype-bean-scope-not-creating-new-bean)

[http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype) 4.4.2 和 4.4.3 部分是相关的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:03:39.860

原型作用域意味着`Child`每次你请求一个新对象时，Spring 都会给你一个新对象（通过注入或从应用程序上下文中显式检索 bean）。在你的`Parent`课上，你只要求`Child`一次，所以你只有一个。如果你想要两个不同`Child`的对象`Parent`，那么自动装配两个：

```
@Component
public class Parent{

    @Autowired
    Child child;

    @Autowired
    Child child1;

    public void sayHello(){     
        child.sayHi();
    }

    public void sayHello1(){    
        child1.sayHi1();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-14T17:06:26.857

## 其他人已经给出了答案，我将包括一个可能有帮助的理论

要将组件转换为原型，我们这样做 -*你可能已经知道了*:)

```
@Scope(value=BeanDefinition.SCOPE_PROTOTYPE)
Class B{ .....} 
```

这仅在 B 类被称为`.getBean(B.class)` **或**自动装配类也是原型时才有帮助。

* * *

现在，假设我们这样做

```
 @Component
    Class A{

          @Autowired
          Class B;
     } 
```

**A 类是单例的，它也假定 B 类的每个实例都是单例**：|

* * *

*现在，如何告诉 A 类 B 是原型？*

**很简单**，只需要包含`proxyMode=ScopedProxyMode.TARGET_CLASS`，A 类就知道 B 类是 Prototype 了！

它看起来像下面这样：

```
@Component
@Scope(value=BeanDefinition.SCOPE_PROTOTYPE, proxyMode=ScopedProxyMode.TARGET_CLASS)
public class B{.....} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T14:40:42.203

你不能这样做。ApplicationContext 启动后，只会将一个 bean 注入到 child。将为每个父母创建一个新的孩子。

事情是父母只有一个孩子，所以你的2个方法只会调用那个孩子的方法。

你到底想达到什么目的？我确信有一个适当的解决方案。

# javascript - 根据用户代理加载 javascript 文件和 css 文件

> ID：13802639
> 
> 赞同：6
> 
> 时间：2012-12-10T14:12:46.630
> 
> 标签：javascript, html, user-agent

就像在标题中一样。

我有两个文件：一个是 javascript 文件，一个是 css 文件。如果**user-agent 是 iPad**，我想加载这些文件 - 但仅当 user-agent 是**iPad**时。因此，仅当用户代理是 iPad 时才加载以下两行。我怎样才能做到这一点

```
<link rel="stylesheet" href="/c/dropkick.css" type="text/css"/>
<script src="/s/jquery.dropkick-1.0.0.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T14:17:08.313

```
if (navigator.userAgent.match(/iPad/i) != null){ // may need changing?
  var js = document.createElement('script');
  js.type = "text/javascript";
  js.src = "/s/jquery.dropkick-1.0.0.js";

  var css = document.createElement('link');
  css.type = "text/css";
  css.rel = "stylesheet";
  css.href = "/c/dropkick.css";

  var h = document.getElementsByTagName('head')[0];
  h.appendChild(js);
  h.appendChild(css);
} 
```

或者`User-Agent`iPad 标题中的任何内容。

参考：

*   [`window.navigator.userAgent`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.userAgent)
*   [`document.createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)
*   [`node.appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:16:25.427

您可以使用`document.createElement`来创建`link`和`script`元素，然后将它们附加到文档中（例如，将它们附加到`document.getElementsByTagName('head')[0]`或类似的位置）。

[SO上的这个答案](https://stackoverflow.com/questions/2153877/what-is-the-ipad-user-agent)表明您可以通过`"ipad"`在该`navigator.userAgent`字段中查找字符串来检测iPad。当然，用户代理字段可以被欺骗。

例如：

```
<script>
(function() {
    var elm, head;

    if (navigator.userAgent.indexOf("ipad") !== -1) {
        head = document.getElementsByTagName('head')[0] || document.body || document.documentElement;

        elm = document.createElement('link');
        elm.rel = "stylesheet";
        elm.href = "/c/dropkick.css";
        head.appendChild(elm);

        elm = document.createElement('script');
        elm.src = "/s/jquery.dropkick-1.0.0.js";
        head.appendChild(elm);
    }
})();
</script> 
```

...但这是即兴的，未经测试的。

（请注意，没有理由将类型放在`link`或上`script`；在 的情况下`link`，类型来自响应的内容类型。在 的情况下`script`，默认值为 JavaScript。）

# php - facebook php sdk从数组显示img src

> ID：13802642
> 
> 赞同：0
> 
> 时间：2012-12-10T14:12:50.553
> 
> 标签：php, facebook, facebook-php-sdk

我正在尝试从 Facebook 页面流的数组中获取图像 src。我使用 facebook php sdk 和以下 FQL 多查询查询表：

```
$query=array(

"query1"=>"SELECT actor_id, attachment.media, app_data, description, message, permalink, likes.count, created_time, comments.count, action_links, attachment, type FROM stream WHERE source_id = 294546637313646 AND type > 0  limit 50",
"query2"=>"SELECT name, page_id FROM page WHERE page_id IN (SELECT actor_id FROM #query1)");

$response=$facebook->api(array(
'method' => 'fql.multiquery',
'queries' => $query
));

$posts = $response[0]['fql_result_set'];
$author = $response[1]['fql_result_set']; 
```

这给了我一个包含这个的数组：

```
[4] => Array
                    (
                        [actor_id] => 294546637313646
                        [attachment] => Array
                            (
                                [media] => Array
                                    (
                                        [0] => Array
                                            (
                                                [href] => http://www.facebook.com/photo.php?fbid=306133272821649&set=a.306133049488338.53827.294546637313646&type=1&relevant_count=1
                                                [alt] => Test Amp Picture
                                                [type] => photo
                                                [src] => http://photos-a.ak.fbcdn.net/hphotos-ak-prn1/69480_306133272821649_877073836_s.jpg
                                                [photo] => Array
                                                    (
                                                        [aid] => 294546637313646_53827
                                                        [pid] => 294546637313646_561094
                                                        [fbid] => 306133272821649
                                                        [owner] => 294546637313646
                                                        [index] => 1 
```

我正在尝试回显图像 src，但不知道该怎么做。

我试过有： `$pics = $posts[0]['fql_result_set'];` 然后 `echo "<img src={$pics['src']} />";` 但这不起作用。

请提供任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:25:56.607

未经测试的php代码：

```
$query = "SELECT actor_id, attachment.media, app_data, description, message, permalink, likes.count, created_time, comments.count, action_links, attachment, type FROM stream WHERE source_id = 294546637313646 AND type > 0  limit 50";
$response = $facebook->api('/fql?q='.$query);
$posts = $response["data"];

foreach($posts as $post){
   //do stuff

   //check to see if theres an image
     if(isset($post["attachment"]["media"]) and is_array($post["attachment"]["media"])){
          //lets get the first image only!
         $first_pic = $post["attachment"]["media"][0];
         //here's the src of the first picture!
         $src = $first_pic["src"];
         echo "<img src='$src' />";
    }else{
         echo "There is no attached picture!";
    }
} 
```

# android - 地图视图 - 安卓

> ID：13802644
> 
> 赞同：4
> 
> 时间：2012-12-10T14:13:01.637
> 
> 标签：android, google-maps, nullpointerexception, google-play-services, google-maps-android-api-2

您好我正在尝试将**MapView**添加到**LinearLayout**这是我的代码：

```
GoogleMap mMap = mMapView.getMap();
if (mMap != null) {
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(new LatLng(-33.87365, 151.20689), 10);
    if (cameraUpdate != null)
        mMap.moveCamera(cameraUpdate);
    setUpMap(mMap);
} 
```

[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory)说；等待 a`GoogleMap`从 a`MapFragment`或`MapView`您添加到应用程序中的可用。`GoogleMap`您可以通过调用该`getMap()`方法并检查返回的对象是否不为空 来验证 是否可用。

但我仍然得到

> java.lang.NullPointerException：CameraUpdateFactory 未初始化。

有什么方法可以检查 cameraUpdateFactory 是否准备就绪？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T13:15:05.253

您可以使用以下代码强制初始化

```
 try {
        MapsInitializer.initialize(context);
    } catch (GooglePlayServicesNotAvailableException impossible) {
        /* Impossible */
    } 
```

将此代码段放在您的`onCreate`方法中的顶部，它应该可以工作。

# z3 - 自定义简化器

> ID：13802651
> 
> 赞同：2
> 
> 时间：2012-12-10T14:13:41.240
> 
> 标签：z3

回到过去（即去年），我们曾经能够使用理论插件作为实现自定义简化器的黑客手段。Z3 文档甚至包含[“程序附件”的示例](http://research.microsoft.com/en-us/um/people/leonardo/z3_doc/group__theory__plugin__ex.html)。

我的问题很简单；有什么方法可以用 Z3 4.x 实现相同的目标？

特别是，我对一种为 Z3 提供外部计算的基本术语评估的方法感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:42:43.513

理论插件目前在 Z3 4.x 中被标记为已弃用。因此，尽管它们仍可用于实现自定义简化器，但用户将被迫使用已弃用的 API。

在 Z3 4.x 中，自定义简化器应作为战术实现。新的构建系统使扩展可用策略集变得相当容易。我将尝试写一篇关于如何在 Z3 代码库中编写战术的教程。当然，在这种方法中，我们必须编写 C++ 代码。主要优点是该策略将适用于所有前端（C、C++、.Net、Java、Python、OCaml、SMT2）。此外，外部开发人员可以将他们的策略贡献给 Z3 代码库，并且它们将可供所有 Z3 用户使用。

我们还计划支持一个 API，用于根据用户提供的回调创建简化策略。这个 API 将允许用户用他们最喜欢的编程语言编写“自定义简化器”。这个新的 API 在概念上很简单，但需要进行大量“黑客攻击”才能使其在每个前端（C++、.Net、Java、Python、OCaml）中可用。如果某些外部开发人员有兴趣实现和维护此功能，那就太好了。我相信这将使许多用户受益。

# ios - 从 NSMutableArray 中删除空 NSStrings 的最快方法是什么？

> ID：13802654
> 
> 赞同：1
> 
> 时间：2012-12-10T14:13:51.270
> 
> 标签：ios, nsstring, nsmutablearray

我有一个`NSMutableArray`与`NSStrings`项目。有些是空白的。什么是查找和删除空白的最快方法，而不必求助于循环，与@“”等进行比较？

谢谢，
道格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:20:44.873

```
NSMutableArray *test = [[NSMutableArray alloc]initWithObjects:@"",@"",@"test",@"test1", nil];
[test removeObject:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:18:07.847

```
[a filterUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    [evaluatedObject length] != 0;
}]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:19:58.890

您可以使用[NSPredicate](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)来执行此操作。

```
NSArray *myFilteredArray = [yourArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"length > 0"]]; 
```

# c# - 使用实体空间示例的简单 C#（ASP.Net 网站）

> ID：13802655
> 
> 赞同：-2
> 
> 时间：2012-12-10T14:13:55.930
> 
> 标签：c#, asp.net, sql-server-2005, entityspaces

这里有没有人曾经在 ASP.Net 网站（c# 语言）中使用实体空间生成数据库？我需要一个简单的示例来使用实体空间组件将数据库（sql server 引擎）连接到网站表单。请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:33:43.220

[EntitySpaces 网站](http://www.entityspaces.net)有文档、[论坛](http://www.entityspaces.net/www.entityspaces.net/Portal/Support/Forums.aspx.html)、演练视频，甚至还有一个入门 pdf。这些似乎是最容易找到样本和示例的地方。

[希望您在网站永久关闭](http://www.entityspaces.net/www.entityspaces.net/blog/2012/09/21/EntitySpaces%20To%20Shutdown%20Move%20To%20Open%20Source.aspx.html)之前得到您需要的东西。

# html - 响应式设计单元

> ID：13802658
> 
> 赞同：0
> 
> 时间：2012-12-10T14:14:01.667
> 
> 标签：html, css, web-applications, responsive-design

我正在使用 Foundation 3.0 UI 框架创建大型 Web 应用程序，它具有基于 px 的布局和字体大小。

在设计中有基于“em”的字体大小/行高和填充/边距。我想知道为智能手机的响应式布局选择基于“em”的字体大小和填充是否是个好选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:30:14.133

我认为`em`响应式设计的主要优势在于您可以轻松更改不同屏幕尺寸的字体大小。

例如，如果您对大屏幕和小屏幕（例如，手机和电视）使用媒体查询，您将需要更改它们的字体大小。

如果您的所有尺寸都在`em`'s 中，您可以简单地更改`font-size`身体上的尺寸，如下所示：

```
 /* For TV's (or other large screens */
    @media screen and (min-width: 1800px) {
        body { font-size: 1.4em; }
    }

    /* For mobiles */
    @media screen and (max-width: 400px) {
        body { font-size: 0.9em; }
    } 
```

就好像你有所有的尺寸一样，`px`你必须做更多的工作来调整字体的大小。

**编辑：**据我所知，使用`em`边距+填充对于响应式布局也可能是一个好主意，如果您调整正文字体大小（如上所示），您还将调整边距+填充（使它们更小或更大），这也可能对响应式设计非常有益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:21:28.160

是的，对于响应式设计网站/应用程序来说，使用 em 和`%`over`px`肯定更好，因为与`px`绝对值不同，它`em`可以根据查看的分辨率进行缩放，如果你想定位智能手机、平板电脑等，这至关重要。

# mysql - MySQL - 查询 Order By 无法按预期工作的地方

> ID：13802662
> 
> 赞同：1
> 
> 时间：2012-12-10T14:14:21.273
> 
> 标签：mysql, sql-order-by

我期望生成的“user_id”是与 DESCending 顺序中 Location 表中的第一条记录对应的那个。但是我在 ASCending 订单/或 ID 订单中获得了第一条记录的“user_id”。

```
SELECT Device.name, Location.user_id
  FROM    locations Location
       LEFT JOIN devices Device
            ON Device.id = Location.device_id
 WHERE Device.id IN (491)
GROUP BY Location.device_id
ORDER BY Location.location_datetime DESC 
```

有谁知道为什么？如何改进它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:29:38.753

你可以使用这样的东西：

```
SELECT
  devices.name,
  (select locations.user_id
   from locations
   where locations.device_id = devices.id
   order by locations.location_datetime desc
   limit 1)
FROM
  devices
WHERE
  device.id = 491 
```

您不能使用非`group by`聚合列来获取第一条或最后一条记录：不能保证它始终有效。

**编辑：**如果您需要从位置中选择多个字段，您可以使用：

```
SELECT l1.*, devices.name
FROM
  locations l1 inner join
  (select device_id, max(location_datetime) as maxdt
   from locations
   group by device_id) l2
  on l1.device_id = l2.device_id and l1.location_datetime=l2.maxdt
  left join devices
  on devices.id = l1.device_id 
```

此查询将为每个 device_id 选择最后一个位置。如果有多个位置具有相同的最大日期时间，则此查询将返回每个位置。如果您只需要一个，并且不介意选择哪一个，您还可以`GROUP BY l1.device_id`在末尾添加一个子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:20:29.810

尝试这个

```
 SELECT Device.name, Location.user_id ,Location.location_datetime
      FROM    locations Location
      LEFT JOIN devices Device
        ON Device.id = Location.device_id
     WHERE Device.id IN (491)

    ORDER BY Location.user_id DESC
    GROUP BY Location.device_id 
```

# magento - 购物车（报价）更改时整页缓存失效

> ID：13802663
> 
> 赞同：4
> 
> 时间：2012-12-10T14:14:22.110
> 
> 标签：magento

我正在尝试向迷你购物车块添加一个块（按钮）：`name="cart_sidebar"`或者最好`name="topCart.extra_actions"`是因为它自动呈现它的子块是`core/text_list`类型

一切都很好，除了由于 FPC 生效而在产品页面上没有调用该块。我正在尝试从`Enterprise_PageCache_Model_Container_Advanced_Quote`类扩展我的容器（也尝试`Enterprise_PageCache_Model_Container_Abstract`过），但是`_renderBlock`没有调用方法。

我的 cache.xml 似乎是正确且有效的：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <placeholders>
        <internationalcheckout_international>
            <block>internationalcheckout/international</block>
            <name>internationalcheckout_international</name>
            <placeholder>INT_CHECKOUT</placeholder>
            <container>GSX_InternationalCheckout_Model_Container_Button</container>
            <cache_lifetime>84600</cache_lifetime>
        </internationalcheckout_international>
    </placeholders>
</config> 
```

任何帮助或提示表示赞赏

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T08:07:18.907

# 嵌套动态块

您正在尝试做的是嵌套动态块，即动态迷你购物车块应该包含一个嵌套的动态块`type=internationalcheckout/international`。

由于 FPC 处理器实现动态块（打孔）的方式，这不起作用。

```
protected function _processContainers(&$content)
{
    $placeholders = array();
    preg_match_all(
        Enterprise_PageCache_Model_Container_Placeholder::HTML_NAME_PATTERN,
        $content, $placeholders, PREG_PATTERN_ORDER
    );

    // ...
    // ... if applyWithoutApp() on each placeholder then update content
    // ... else prepare data for applyWithApp()
    // ...

    } 
```

## FPC加工流程

让我们一步一步来看看会发生什么。

**首先**，在`_processContainers()`调用该方法时，`$content`包含缓存的页面，包括所有占位符标记。这也包括您定义的嵌套块。

**其次**，该方法匹配所有占位符标签。之后`$placeholders`包括迷你购物车占位符，然后还有嵌套的占位符定义。

**第三**，将找到的占位符按顺序处理。这意味着将在处理嵌套占位符之前处理迷你购物车占位符，因为这就是`preg_match_all()`收集匹配项的方式。

**第四**，mini-cart 容器被实例化。它反过来实例化`checkout/cart_sidebar`块，初始化渲染器并调用`toHtml()`它。

**第五**，呈现*checkout/cart/cartheader.phtml*模板。当 Magento 接听电话时

```
<?php echo $this->getChildHtml('extra_actions') ?> 
```

它不会为它呈现任何内容，因为在处理过程中`applyWithoutApp()`不`applyWithApp()` **存在子块**。

**第六**，FPC 处理器将迷你购物车占位符标记所标记的**完整内容区域替换为迷你购物车容器返回的渲染内容。**现在`$content`包含更新的迷你购物车 html。

**第七**，FPC 容器尝试处理嵌套块的占位符。但`$content`不再包含它的占位符标签。通过用新生成的内容替换包装迷你购物车占位符，它们已被删除！

## 概括

当 FPC 处理内容时，不会加载布局 XML，也不会实例化常规块层次结构。
对于动态（“打孔”）块，将删除子块的所有输出，除非块实例本身或容器负责在不加载布局 XML 的情况下实例化它们。
在 FPC 处理页面内容时加载布局 XML 并生成所有块是一个坏主意。

这归结为`topCart.extra_actions`容器块看起来是个好主意，但它与 FPC 不兼容 :(

您不能在动态块中使用子块。

要实施解决方法，您必须将块移出`cart_sidebar`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T20:18:29.693

对于正在寻找 extra_actions PayPal 按钮解决方案的任何人，有一个 Magento 补丁修复它（SUPEE-87_1.12.0.0_v1.patch）。

由于它是一个 Magento 补丁，您可以简单地打开文件“app/code/core/Enterprise/PageCache/Model/Container/Sidebar/Cart.php”并将这两个函数添加到 _renderBlock 函数之后，这正是补丁所做的：

```
 /**
 * Get Place Holder Block
 *
 * @return Mage_Core_Block_Abstract
 */
protected function _getPlaceHolderBlock()
{
    $block = parent::_getPlaceHolderBlock();
    $block->setChild('extra_actions', $this->_getExtraActionsChildBlock());
    return $block;
}

/**
 * Get child Block
 *
 * @return Mage_Core_Block_Abstract
 */
protected function _getExtraActionsChildBlock()
{
     $paypalShortcutBlock = Mage::app()->getLayout()->createBlock('paypal/express_shortcut');
     $paypalShortcutBlock->setTemplate('paypal/express/shortcut.phtml');
     $paypalShortcutBlock->setLayout(Mage::app()->getLayout());

     return $paypalShortcutBlock;
} 
```

了解其工作原理有助于解决其他类似问题。

顺便感谢Vinai，非常有用的答案。

# android - 如何移动 ArrayList Android中从孩子到家长的活动

> ID：13802665
> 
> 赞同：1
> 
> 时间：2012-12-10T14:14:27.493
> 
> 标签：android, android-intent, arraylist

我有一个返回`ArrayList`父活动的子活动

**儿童活动**

```
ArrayList<Users> selectedMembers = new ArrayList<Users>();

//And then

Intent returnIntent = new Intent();

returnIntent.putExtra("ArrayOfUsers",selectedMembers);

setResult(RESULT_OK,returnIntent);        

finish(); 
```

**家长活动**

现在如何`ArrayList<Users>`在父 Activity 上获得这个

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data){
        if (resultCode == RESULT_OK) {

            //how to get ArrayList<Users> here
        }
    } 
```

我做了这样的事情，但我给出了错误

```
selectedMembers.addAll((data.getParcelableArrayListExtra("ArrayOfUsers")); 
```

**错误：**

`The method addAll(Collection<? extends Users>) in the type ArrayList<Users> is not applicable for the arguments (ArrayList<Parcelable>)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:25:36.880

你的`Users`类是否实现了`Parcelable`接口？如果没有，这就是您收到消息的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:48:43.213

您正在使用不同的方法进行序列化和反序列化。当您`returnIntent.putExtra`实际上调用类中的[这个](http://goo.gl/FCK1H)重载方法时`Intent`。因此，您的用户列表实际上被视为单个`Serializable`对象。在这种情况下`putExtra`，子端应与`getSerializableExtra`父端的 getter 一起使用。

如果你想在父端使用getter 方法，你应该在子端`getParcelableArrayListExtra`结合使用它，你的类应该是.`putParcelableArrayListExtra``Users``Parcelable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:09:38.203

该类`ArrayList`实现`Serializable`，这就是将数组列表添加到意图时的方式。

为了检索数组列表，您必须检索可序列化对象并以`ArrayList`下列方式将其转换回：

```
// Check that the result is successful and that the intent is valid (not null)
if ( resultCode == RESULT_OK && data != null ) {

    ArrayList<Users> selectedMembers = (ArrayList<Users>) data.getSerializableExtra ( "ArrayOfUsers" );

    // Your logic goes here ...
} 
```

此转换过程将在 Eclipse IDE 中触发警告： **Type safety: Unchecked cast from Serializable to ArrayList < Users >**

不用担心，您可以忽略警告或在方法之前添加以下语句：

```
 @SuppressWarnings("unchecked") 
```

* * *

**更新 ：**

您存储在数组列表中的对象也必须是可序列化的，这意味着您的类应该实现可序列化，在您的情况下，用户类应该采用以下方式：

```
class Users implements Serializable {

    // ... 

} 
```

# javascript - 运行和学习 JavaScript 的独立应用程序？

> ID：13802669
> 
> 赞同：1
> 
> 时间：2012-12-10T14:14:44.987
> 
> 标签：javascript

由于它被推荐为该主题的最佳书籍之一，因此我开始阅读 David Flanagan 的“ [JavaScript：权威指南，第 6 版](http://shop.oreilly.com/product/9780596805531.do)”。

除了书中提到的基于浏览器的解决方案（通过 Wrench > Tools 看到的 Chrome 的控制台）或 Firefox 的 Firebug 插件之外，是否有可以运行、调试和分析 JS 代码的独立应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:17:20.470

你可以试试[`nodejs`](http://nodejs.org/)。它也有一个命令行界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:19:22.857

例如，您可以`debugger;`输入您的 js 代码，当浏览器到达这一行时，您可以在 Visual Studio 中调试您的 js。

您还可以通过在 IE 上单击 F12 来使用[F12 开发人员工具](http://msdn.microsoft.com/en-us/library/ie/gg589512%28v=vs.85%29.aspx)来调试您的 js 应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:27:53.120

如果在线 JavaScript 控制台是合格的，那么你可以看看

[http://jsconsole.com/](http://jsconsole.com/)。 [http://jsfiddle.net](http://jsfiddle.net)

# android - Android：我可以在我的包中找到类

> ID：13802670
> 
> 赞同：0
> 
> 时间：2012-12-10T14:14:47.087
> 
> 标签：android, eclipse, class, package

我正在关注这个线程：[为什么使用 KML 数据检索适用于 Android 的 Google 路线不再起作用？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

但我陷入了一个难以理解的错误。当我尝试引用我的类 RouteOverlay 时出现问题：我可以引用我之前创建的类（`RouteOverlay.java`）。这里的情况：

![在此处输入图像描述](../Images/794194860982c208a76ab953e2b1aaf9.png)

如果我尝试插入代码行：

```
 import maps.RouteOverlay 
```

我收到以下错误：

```
 The type maps.RouteOverlay is not visible 
```

我也尝试过，重新启动 Eclipse 或清理项目。我不知道我能做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:20:38.667

您正在复制的示例有错字。该`RouteOverlay`课程不公开。

```
class RouteOverlay extends Overlay {} 
```

将其更改为：

```
public class RouteOverlay extends Overlay {} 
```

# vb6 - VB6 可捕获错误路径/文件访问错误（错误 75）的其他原因？

> ID：13802673
> 
> 赞同：4
> 
> 时间：2012-12-10T14:14:50.197
> 
> 标签：vb6

除了微软[在这里](http://msdn.microsoft.com/en-us/library/aa264531%28v=vs.60%29.aspx)列出的那些。

```
10   DBEngine.CompactDatabase Dbpath, DbTempPath, "", dbEncrypt
20   Kill Dbpath
30   Name DbTempPath As DbPath 
```

上面的代码在许多安装中日复一日地运行，但很少有第 30 行失败，我接到一个电话说数据库丢失了。

今天我第一次看到它自己发生并且抛出的错误：

路径/文件访问错误（错误 75）

但是，我认为列出的任何原因都不适用于这种情况。

当这发生在今天的安装中，我重命名了临时文件并再次运行代码，错误再次发生。

（我认为这可能与硬件问题有关，因为制作文件的副本需要很长时间。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:58:53.103

这里没有足够的信息可以说，但我的猜测是问题在于您的语句在语句运行`KILL`之前没有完成。`NAME`我一直不清楚，但似乎 Windows NT 文件系统可以选择异步实现一些文件操作（特别是对于大文件），因此`KILL`NTFS 可能无法完成，即使 VB6 认为它是并且已转到`NAME`声明。

可能最好的办法是`KILL`在开始重命名之前在`NAME`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:19:36.733

我不确定为什么会出现问题，但您可以使用 DoEvents 调用添加解决方法或编写一个小程序等待一到三秒（或更长），以便有时间让磁盘完成删除或访问释放文件。

更高级的解决方法是在调用重命名之前编写一个函数来检查文件是否可用。

# xslt - 如何在合并之前重构 XSL 文件？

> ID：13802676
> 
> 赞同：1
> 
> 时间：2012-12-10T14:15:04.580
> 
> 标签：xslt, refactoring

我有一个相当大的 XSL 文件，其中包含很多模板。现在我需要将来自另一个 XSL 文件的模板附加到它。不幸的是，那里使用的一些模板名称与第一个文件中的模板名称相同。因此，如果我只是复制并粘贴它们，整个 XSL 就会损坏。

在追加之前重构第二个 XSL 文件的最简单方法是什么？我可以将其模板放入不同的命名空间或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:21:04.937

如果您正在编写新代码，您可以将模板名称放在命名空间中。

如果代码已经存在，您可以编写一个新的转换来处理 XSLT 转换并替换任何

```
/*/xsl:template/@name 
```

其值与 连接`'_', $SomeSuffix`，其中`$SomeSuffix`是全局/外部参数。

您可以使用相同的过程将模板的名称替换为名称空间中的名称，该名称作为参数给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:23:50.903

如果您已命名模板（即`template name="foo"`），那么可以，使用名称空间来区分它们，即`<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:l1="http://example.com/l1" version="1.0"><xsl:template name="l1:foo">...</xsl:template></xsl:stylesheet>`。

# php - PHP - 长时间运行的后台任务

> ID：13802681
> 
> 赞同：9
> 
> 时间：2012-12-10T14:15:22.523
> 
> 标签：php, background

我目前正在尝试从我可用的内容中生成关于 demenad 的 epub。不幸的是，当 epub 的内容很多时，http 请求需要一段时间（在某些情况下需要 10 分钟）才能完成 - 这并不理想

我想遵循类似于 Safari 的方法 - 生成 epub 并在文档可用时向用户发送电子邮件

我的问题是 - 在 PHP 中运行可能需要很长时间才能完成的后台任务/线程的最佳方式是什么

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T14:29:17.677

您需要小心长时间运行的 PHP 进程，因为其中一个 PHP 的内存效率不是很高（例如，PHP 中只有 100 个整数的数组可能会消耗多达 15KB 的内存）。这通常适用于 99% 的用例，因为大多数人只是在网站上使用 PHP，并且这些进程运行时间只有几分之一秒，因此为了速度而牺牲了内存。但是，对于长时间运行的流程（尤其是如果您有很多流程），这可能不是您的最佳解决方案。

您还需要非常小心地在 PHP 中调用类似 exec/shell_exec 的函数，因为它们在内部实现为流（即它们可能导致父进程阻塞，因为它通常必须等待流返回数据）。

后台任务的一种选择是使用[fork](http://php.net/manual/en/function.pcntl-fork.php)。但是，我强烈建议使用适当的作业管理器，如[gearman](http://gearman.org/)（另请参阅[php 扩展](http://php.net/gearman)）或队列，如[amqp](http://php.net/amqp)或[zmq](http://php.net/zmq)，以更干净地处理这些任务。哪一个更适合你的用例，我让你决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:18:27.503

你可以运行命令

```
$command = 'nohup >/dev/null 2>&1 /your/background/script.php &' 
```

# jquery-mobile - 我的列表视图中的额外 li 项目在弹出窗口中动态创建

> ID：13802682
> 
> 赞同：0
> 
> 时间：2012-12-10T14:15:27.273
> 
> 标签：jquery-mobile

当我动态创建一个带有列表视图的弹出窗口时，我在列表视图中获得了额外的（静态）项目。这是[jsBin](http://jsbin.com/ovogiq/1/)上显示问题的代码。

为什么`li`列表中有两个额外的？

只是在这里也有代码：

```
$_coursemenu = function( params ) {
  if ( window === this )
    return new $_coursemenu( params );
  var self = this;
  this.params = params;
  this.init();
};

$_coursemenu.prototype = {
  init: function() {
    this.page = $('<div id="' + this.params.id + '" data-theme="a" data-role="popup" data-history="false"  data-position-to="window"></div>').appendTo( this.params.parent );
    this.ul = $('<ul data-role="listview" data-inset="true" data-theme="b" data-autodividers="false"></ul>').appendTo( this.page );
    this.lid = $('<li data-role="divider" data-theme="a">Popup API</li>').appendTo( this.ul );
    this.li1 = $('<li><a>delete</a><li>').appendTo( this.ul );
    this.li2 = $('<li><a>aha</a><li>').appendTo( this.ul );

    this.page.popup();
    this.params.parent.page('destroy').page();

  },
  relocate: function(parent) {
    parent.append( $('#' + this.params.id + '-popup') );
    parent.append( $('#' + this.params.id + '-screen') );
  }

}; 
```

html:

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  </head>
  <body>
    <div id='page' data-role='page'>
      <div data-role='content'>
        <a href='#mypopup' data-role='button' data-rel='popup'>popup</a>
      </div>
    </div>
    <script>
      $(document).ready( function(){
        var cm = $_coursemenu({parent:$('#page'),id:'mypopup'})
            console.log('done.');
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:55:02.057

你的问题是你没有关闭你的`li`标签，

```
$_coursemenu.prototype = {
  init: function() {
    this.page = $('<div id="' + this.params.id + '" data-theme="a" data-role="popup" data-history="false"  data-position-to="window"></div>').appendTo( this.params.parent );
    this.ul = $('<ul data-role="listview" data-inset="true" data-theme="b" data-autodividers="false"></ul>').appendTo( this.page );
    this.lid = $('<li data-role="divider" data-theme="a">Popup API</li>').appendTo( this.ul );
    this.li1 = $('<li><a>delete</a></li>').appendTo( this.ul );
    this.li2 = $('<li><a>aha</a></li>').appendTo( this.ul );
    this.page.popup();
    this.params.parent.page('destroy').page();

}, 
```

这是您的[jsbin的更新](http://jsbin.com/ovogiq/3/)

# android - 如何遍历具有多个结果的连接表？

> ID：13802683
> 
> 赞同：2
> 
> 时间：2012-12-10T14:15:31.717
> 
> 标签：android, sql, database, sqlite, join

我有 3 个表，，`USER`（`ENTRY`用于输入的产品，不需要创建 PRODUCT 表），和`USER_COLLECTION`，这是一个介于`USER`和之间的表`ENTRY`，因为一个条目可以有多个用户。

基本上：

用户 =`USERID | USER_NAME`

条目 =`ENTRYID | ENTRY_NAME | ENTRYPRICE | ENTRY_DATE`

收藏 =`COLLECTIONID | ENTRYID | USERID`

我有一张表，其中包含在整个项目中持续存在的用户。他们可以创建条目（通常是某种带有价格的产品），并且可以将多个用户链接到某个条目（可以从列表中选择，因此用户在整个项目中保持不变）。

例如，我的表格如下所示：

```
User
--------------------------
user_id   |   user_name
--------------------------
   1      |    'FOO'
   2      |    'BAR'
   3      |    'FOOBAR'

ENTRY
-----------------------------------------------------------------------
entryid  |   entry_name     |  entry_price |      entry_date     
-----------------------------------------------------------------------
   0     |    'Banana'      | 2.50         |  12/12/2012

COLLECTION
---------------------------------------
collectionid |   entryid    |  userid     
----------------------------------------
   0         |    1         | 1
   1         |    1         | 2
   2         |    1         | 3 
```

我有一个香蕉，价格为 2.50，有 3 个用户链接到它，Foo、Bar 和 Foobar。

现在，我想在我的应用程序中使用它并获取数据；除了我不知道从哪里开始。我尝试选择条目数据，使用该 ID 循环遍历集合数据，但这意味着我打开了两个游标并且它不起作用。尝试创建一个连接，但我不能真正做出一个好的连接，主要是因为：

```
JOIN
---------------------------------------
collectionid |   entryname |  username
----------------------------------------
   0         |    Banana   | FOO
   1         |    Banana   | BAR
   2         |    Banana   | FOOBAR 
```

我无法遍历这个，因为我会在我的 Android 代码中创建多个相同的条目对象......

希望我对此很清楚。

```
if (cursor2.moveToFirst()) {
    do {
        Item i = new Item(<GET STUFF FROM CURSOR>);
        i.addUser(new Person(<GET STUFF FROM CURSOR>)));
        Log.d("TAG", i.getUsersPaying().size() + "");
    } while (cursor2.moveToNext());
} 
```

如果我使用它，我会创建 Item i 的多个实例。它们都是香蕉，而我应该只有 1 件香蕉，并添加了多个用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:16:49.110

首先，您可能需要考虑在联接查询中返回表中的 ID。`entryid`如果您返回该列，事情会容易一些。

只需创建一个`Map<Integer, Item>`来存储您已经在循环中看到的项目。当您检查每个光标时，请检查地图以查看您是否已经有一个实例。如果你不这样做，只需制作一个新的并插入它。

假设您的查询结果是：

```
JOIN
----------------------------------------------------
collectionid |   entryname |   entryname |  username
----------------------------------------------------
   0         |    1        |    Banana   | FOO
   1         |    1        |    Banana   | BAR
   2         |    1        |    Banana   | FOOBAR
   2         |    2        |    Apple    | FOOBAR 
```

您可以按如下方式修改您的代码：

```
Map<Integer, Item> items = new HashMap<Integer, Item>();
if (cursor2.moveToFirst()) {
    do {
        int itemId = cursor2.getInt(1);
        Item i;
        if (items.containsKey(itemId))
            i = items.get(itemId);
        else
        {
            i = new Item(<GET STUFF FROM CURSOR>);
            items.put(itemId, i);
        }
        i.addUser(new Person(<GET STUFF FROM CURSOR>)));
        Log.d("TAG", i.getUsersPaying().size() + "");
    } while (cursor2.moveToNext());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:11:53.810

您需要维护已加载到内存中的实体的字典。例如在将被保留的背景片段中。

基本上你会这样做：

```
Item i = cacheFragment.createOrGetEntry( cursor.getLong( ENTRY_ID_COLUMN_INDEX ) );
Person p = cacheFragment.createOrGetPerson( cursor.getLong( PERSON_ID_COLUMN_INDEX ) ); 
```

当然，您的查询还必须返回您需要的所有行的 ID（entryId 和 personId）。但是连接查询是一种有效的方法，所以保留你所做的，只需添加两个缺失的 ID 列。

createOrGetPerson 方法如下所示：

```
public Person createOrGetPerson(long id) {
    Entry<Long, Person> p = personDictionnary.get( id ); // can be a HashMap or even better, a SparseArray
    if (p==null) {
      p = new Person(id);
      personDictionnary.put(p); // Remember it for next time
    }
    return p;
} 
```

您还应该查看用于处理此类问题的数据持久性框架或 ORM 框架（例如 Hibernate，即使我不知道这是否适用于 Android）。

# java - 自定义列表视图和夏洛克列表片段

> ID：13802684
> 
> 赞同：2
> 
> 时间：2012-12-10T14:15:40.293
> 
> 标签：java, android, actionbarsherlock

在我的应用程序中，我试图通过下拉导航菜单在页面之间进行导航，但是当我运行应用程序时，我的列表中没有项目

主要活动

```
public class Main extends SherlockFragmentActivity implements OnNavigationListener{
//----------------------------------New Variables
private static final String KEY_MODELS="models";
private static final String KEY_POSITION="position";
private static final String[] labels= { "All", "Downloads","Completed","Later" };
private CharSequence[] models=new CharSequence[4];
private DownloadList frag=null;
private int lastPosition=-1;  
//----------------------------------
ActionBar act;
ViewPager myviewpager;
int mSelectedPageIndex=1;
DownloadService downloadservice;
Intent serviceIntent ;

@Override
public void onCreate(Bundle state) {
    super.onCreate(state);

    frag=(DownloadList)getSupportFragmentManager().findFragmentById(android.R.id.content);
    if (frag==null) {
        frag=new DownloadList();
        getSupportFragmentManager().beginTransaction()
 .add(android.R.id.content, frag).commit();
      }

    if (state != null) {
        models=state.getCharSequenceArray(KEY_MODELS);
      }

    if (downloadservice==null)
        downloadservice= new DownloadService();
    ArrayAdapter<String> nav=null;
    act=getSupportActionBar();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    {
      nav= new ArrayAdapter<String>(act.getThemedContext(),
     android.R.layout.simple_spinner_item,labels);
    }
    else 
    {
      nav=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,labels);
    }

    nav.setDropDownViewResource(android.R.layout.simple_list_item_1);
    act.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    act.setDisplayShowTitleEnabled(false);
    act.setHomeButtonEnabled(false);

    act.setListNavigationCallbacks(nav, this);
    if (state != null) {
        act.setSelectedNavigationItem(state.getInt(KEY_POSITION));
      }

    serviceIntent= new Intent(Main.this,downloadservice.getClass());
    if (startService(serviceIntent)==null)
        startService(serviceIntent);

    act.setTitle("");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater infalter = getSupportMenuInflater();
    infalter.inflate(R.menu.mymenu, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId()==R.id.sub1)
    {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Downlaod New File");
        alert.setMessage("Enter URL");
        final EditText input = new EditText(this);
        alert.setView(input);
        input.setText(  "http://205.196.123.184/ddpha7c5b8lg/616c36j0d1xbztf
 /Lecture+ppt+Ch2.ppt");
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                String value = input.getText().toString();
                downloadservice.addandstart(value);
                Log.d("value",value);
            }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
            }
        });

        alert.show();
    }   

    return super.onOptionsItemSelected(item);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    lastPosition=itemPosition;

                                                                                             frag=(DownloadList)getSupportFragmentManager().findFragmentById(android.R.id.content);

    return false;
} 
```

自定义适配器和 SherlockFragmentList

```
public  class DownloadList extends SherlockListFragment {
int index=0;
Button downloadButton;
Button pauseButton;
Button resumeButton;
TextView textLink;
TextView progressbar;
DownloadService downloadservice= new DownloadService();
MyAdapter listadapter;
Intent serviceIntent ;
String state;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getActivity().setContentView(R.layout.downloadlist);
    setListAdapter(new MyAdapter(getSherlockActivity(), downloadservice.downloads));
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle
 savedInstanceState) {
    View rootView = inflater.inflate(R.layout.downloadlist, container, false);

    setListAdapter(new MyAdapter(getSherlockActivity(), downloadservice.downloads));
    return rootView;
}
int getIndex()
{
    return index;
}
public class MyAdapter extends ArrayAdapter<NewDownload>
{
     private final List<NewDownload> list;
      //private final Activity context;
      Thread t;

    public MyAdapter(Context context,List<NewDownload> list) {
        super(context, R.layout.list_item,  list);
    //    this.context = (Activity) context;
        this.list = list;
    }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) 
getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.list_item, null);

            pauseButton = (Button) row.findViewById(R.id.btn1);
            resumeButton = (Button) row.findViewById(R.id.btn2);
            textLink = (TextView) row.findViewById(R.id.tv1);
            progressbar = (TextView) row.findViewById(R.id.progressBar1);

textLink.setText(downloadservice.downloads.get(position).getName());

progressbar.setBottom(downloadservice.downloads.get(position).getDownloadedSize());

progressbar.setTop(downloadservice.downloads.get(position).getTotalSize());

            final int p = position;
            final NewDownload r = list.get(p);
            if (r.state=="downloading")
                {
                    progressbar.setText("DownLoading...");
                    pauseButton.setEnabled(true);
                    resumeButton.setEnabled(false);
                }
            else if (r.state=="pause")
                {
                pauseButton.setEnabled(false);
                resumeButton.setEnabled(true);
                progressbar.setText(r.state);
                }
            pauseButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                downloadservice.pause(p);
                setListAdapter(listadapter );

                }
            });

            resumeButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

if     (getActivity().startService(serviceIntent)==null)

getActivity().startService(serviceIntent);
                        downloadservice.resume(p);
                        setListAdapter(listadapter );
                }
            });

            return row;
        }
} 
```

任何人都可以告诉我如何正确实施我的清单，我的错误在哪里？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:23:51.867

不要从你的片段中设置布局大不不！

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // getActivity().setContentView(R.layout.downloadlist); // Never do this!
    // Also this will do nothing remove this! This should be in your `onActivityCreated()`
    // setListAdapter(new MyAdapter(getSherlockActivity(), downloadservice.downloads));
} 
```

不要`onCreateView`在您的 Fragment 中覆盖，`SherlockListFragment`为您创建 ListView 布局。

如果要设置适配器，请移除`onCreateView`并设置适配器`onActivityCreated()`

```
@Override
public void onActivityCreated(Bundle saveState){
    setListAdapter(new MyAdapter(getSherlockActivity(), downloadservice.downloads));
} 
```

`setListAdapter(listadapter );`在您的适配器中设置您的`getView`也是错误的。如果您更新`List<?>`数据，请确保`notifyDataSetChanged()`在更新列表后从 mainThread 调用。

**否则**，请确保您的布局有一个`ListView`with`android:id="@android:id/list"`定义，否则 SherlockListView 也没有设置适配器的视图。

# android - Android webview 很奇怪的行为

> ID：13802686
> 
> 赞同：1
> 
> 时间：2012-12-10T14:15:43.393
> 
> 标签：android, css, android-layout, webview

在横向模式下，我得到了一个水平布局，左边有一个按钮，右边有一个 webview，如下所示：

![在此处输入图像描述](../Images/2ac8920761147119d2d7376d4520ebe1.png)

在添加绝对或固定元素之前，一切都在 WebView 中运行良好。

例如这个元素

```
<div style="position:fixed; top:0; left:0; width:100%; height:30px; background:#ff0000"></div> 
```

这是它的外观：

![在此处输入图像描述](../Images/b584b98f143a2323474ca4076c7bd8e6.png)

如您所见，右侧有一个间隙，与左侧布局的大小完全相同。实际上 div 宽度是完整的 webview 宽度减去按钮布局宽度。

如果按钮布局宽度增加，它会变成这样：

![在此处输入图像描述](../Images/201a89ced6d2d1d0cd24a7c928017834.png)

这会破坏很多东西，例如 iscroll。

我试过但无法解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:09:39.200

我在三星 ICS 平板电脑上遇到了这个问题，不得不禁用硬件加速。由于这个原因，位置、溢出和 translate3d CSS 都失败了。

在清单中将其关闭

```
<application android:hardwareAccelerated="false" 
```

或以编程方式禁用它

```
if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    myWebview.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

# node.js - 通过 socket.io POST 数据到 app.js

> ID：13802695
> 
> 赞同：7
> 
> 时间：2012-12-10T14:16:23.023
> 
> 标签：node.js, mongodb, express, socket.io

我想：

*   检索从输入表单输入的数据。
*   通过 socket.io 发送数据并发送控制台日志说完成
*   在 express app.js 上接收数据
*   使用 mongoose 将数据插入到 mongodb 数据库中。

我了解发出消息，但不确定如何发布数据。先感谢您

我的 app.js 是这样设置的：

```
//app.js config ...

var socket = io.listen(server);

socket.on('connection', function(socket) {
   console.log('socket.io connected');
});

app.post('/go', function(req, res) {

  socket.on('data', function(data) {
    new Order({
      routeFrom : data.routeFrom,
      routeTo : data.routeTo,
      leaving: data.leaving
    }).save(function(err, docs) {
      if(err) { console.log("error"); }
      res.json(data);
    });
    socket.emit('callback', {done: 'Done'});
  });

}); 
```

我的 index.ejs 文件：

```
 <script src="/socket.io/socket.io.js"></script> 
```

```
 var socket = io.connect('http://localhost:3000');

$('#send').on('click', function() {
    $.post('/go', {
       socket.emit('data', {
        routeFrom: $('#rf').val(),
        routeTo: $('#rt').val(),
        leaving: $('#l').val()
       });

    });

  socket.on('callback', function(data) {
   console.log(data);
  });

}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T15:39:28.570

你根本不需要`POST`。

我会在客户端做：

```
var socket = io.connect('http://localhost:3000');

$('#send').on('click', function(event) {
  event.preventDefault();
  socket.emit('data', {
    routeFrom: $('#rf').val(),
    routeTo: $('#rt').val(),
    leaving: $('#l').val()
  });
});

socket.on('callback', function(data) {
  console.log(data.done);
  // Print the data.data somewhere...
}); 
```

在服务器端：

```
//app.js config ...
var socket = io.listen(server);

socket.on('connection', function(socket) {
  console.log('socket.io connected');
});

socket.on('data', function(data) {
  new Order({
    routeFrom : data.routeFrom,
    routeTo : data.routeTo,
    leaving: data.leaving
  }).save(function(err, docs) {
    if(err) { return console.log("error"); }
    socket.emit('callback', {done: 'Done', data: data});
  });
}); 
```

# javascript - 对多维数组 jquery/javascript 进行排序

> ID：13802697
> 
> 赞同：1
> 
> 时间：2012-12-10T14:16:25.570
> 
> 标签：javascript, jquery, sorting, multidimensional-array

```
var klas4 = [];

klas4[2] = [];
klas4[2]["hour"] = 1;
klas4[2]["teacher"] = "JAG";
klas4[2]["group"] = "V4A";
klas4[2]["subject"] = "IN";
klas4[2]["classroom"] = "B111";

klas4[0] = [];
klas4[0]["hour"] = 6;
klas4[0]["teacher"] = "JAG";
klas4[0]["group"] = "V4B";
klas4[0]["subject"] = "IN";
klas4[0]["classroom"] = "B111";

klas4[1] = [];
klas4[1]["hour"] = 4;
klas4[1]["teacher"] = "NAG";
klas4[1]["group"] = "V4A";
klas4[1]["subject"] = "NA";
klas4[1]["classroom"] = "B309"; 
```

这个多维数组需要按小时排序，升序。问题是，我不知道如何对多维数组进行排序。第一个维度（0、1 和 2）需要根据小时更改，但维度 2 的所有其他详细信息（教师、小组等）也需要从索引更改，否则数据会混合。你不知道有多少索引。在这个例子中，正确的顺序应该是：klas4[2][...], klas4[1][...], klas[0][...]

在 PHP 中有一个特定的函数*multisort*，但我在 jQuery 或 JavaScript 中找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:19:22.740

```
klas4.sort( function(a,b){ return a.hour - b.hour } ); 
```

应该这样做。

将 klas4 视为一个对象数组而不是多数组会有所帮助。然后使用排序函数对该数组中的对象进行排序。

sort 函数需要 2 个对象，您必须返回先出现的对象。

您应该阅读有关 Array 的 sort() 的内容，谷歌一下。

此外，正如其他人所评论的那样；klas4 的条目实际上是对象，您应该使用

```
klas4[2] = {}; 
```

甚至更好

```
klas4[2] = { hour:1 , teacher:"JAG" , group:"V4A" , subject: "IN" }; 
```

最后，我假设您和我一样是母语为荷兰语或德语的人。我强烈建议用英文命名所有变量`class4`，而不是`klas4`. 这是正确的、专业的做法。

# javascript - THREE.OBJLoader 不工作（TypeError）

> ID：13802699
> 
> 赞同：4
> 
> 时间：2012-12-10T14:16:35.820
> 
> 标签：javascript, node.js, webgl

我正在尝试制作一个以 Wavefront .OBJ 格式显示任意 3d 模型的 HTML/Javascript 应用程序。现在我有一个可以显示球体和平面等的工作应用程序。我尝试将 THREE.OBJLoader 模块合并到我的代码中，但它破坏了一些东西。我已经弄清楚如何用我的页面加载它并测试它是否实际加载（我在我的 THREE.OBJLoader 副本的末尾放置了一个警报，它显示正确）。

我用来加载模型的代码在这里：

```
var loader = new THREE.OBJLoader();
loader.load('3d/models/torus.obj', function ( object ) {
scene.add( object );
}); 
```

（它是从这里复制的：[使用 THREE.OBJLoader 渲染 OBJ 文件](https://stackoverflow.com/questions/10888479/render-obj-file-using-three-objloader)。是的，我也阅读并尝试了来自 MrDoob 的链接源代码（“Male02.obj”等）。）

当我使用该代码片段加载我的页面时，我看到的是一个空白屏幕（而不是我拥有的带有球体的小场景）。Chrome 开发者工具在“var loader = new THREE.OBJLoader();”行之后显示错误。错误如下：“Uncaught TypeError: undefined is not a function”。

关于如何正确显示 3d 模型的任何想法？提前致谢。我会根据需要发布更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:12:12.337

确保将 OBJLoader 包含在单独的 <script> 标记中——它通常不是 build/three.js（或 three.min.js）的艺术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:06:21.693

好的，我明白了！问题是我在 HTML 中为我的文件指定的加载顺序。在我的程序知道 THREE.OBJLoader 是什么之前，我试图创建一个新的加载器。所以我在 HTML 中交换了以下几行：

```
<script src="../lib/objloader.js"></script>  <!-- when this was loaded last, code didn't work -->
<script src="../3d/3d.js"></script> 
```

# sql - T-SQL：如何加入@variable 表（再试一次）

> ID：13802703
> 
> 赞同：2
> 
> 时间：2012-12-10T14:16:41.940
> 
> 标签：sql, tsql, sql-server-2008-express

我知道，这是[这个问题的重复问题](https://stackoverflow.com/questions/6293211/t-sql-how-to-join-variable-tables)。但我遇到了同样的问题，也许我可以提供更多可用的信息。

如果我尝试以下示例查询：

```
DECLARE @_Files TABLE (ID INT, Filename VARCHAR(MAX));
DECLARE @_Errors TABLE (ID INT, Label VARCHAR(MAX), Value VARCHAR(MAX));

insert into @_Files
    select 73, 'abc'

insert into @_Errors
    select 73, 'Some label name', 'Just a value'

select
    *
from
    @_Errors 
    inner join @_Files
    on @_Errors.ID = @_Files.ID 
```

我收到错误消息：

```
The @_Errors-scalar variable must be declared.
The @_Files-scalar variable must be declared. 
```

我正在使用 SQL-Server 2008 R2 Express，它以兼容级别 100 运行。所以有什么想法为什么会出现此错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T14:18:02.197

要么给他们一个别名，然后在 中引用，`JOIN`要么使用方括号。下面混合了这两种可能性。

```
SELECT *
FROM   @_Errors Errors
       INNER JOIN @_Files 
         ON Errors.ID  = [@_Files].ID 
```

[有一个连接项目在这里讨论这个问题](http://connect.microsoft.com/SQLServer/feedback/details/329692/table-variable-inconsistent-brackets-required-or-not)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:30:39.553

这是因为 INNER JOIN 期望参数是变量。这应该有效：

```
DECLARE @_FileIDs TABLE (ID INT, Filename VARCHAR(MAX));
DECLARE @_Errors TABLE (ID INT, Label VARCHAR(MAX), Value VARCHAR(MAX));

insert into @_FileIDs
    select 73, 'abc'

insert into @_Errors
    select 73, 'Some label name', 'Just a value'

select
    *
from
    @_Errors AS tblErrors
    inner join @_FileIDs AS tblFileID
    on tblErrors.ID = tblFileID.ID 
```

# c# - 母版页上的搜索按钮返回到单独搜索页上的现有 GridView

> ID：13802708
> 
> 赞同：0
> 
> 时间：2012-12-10T14:17:02.430
> 
> 标签：c#, search, master

我希望使母版页搜索将结果返回到另一个页面上的 GridView，该页面也有一个搜索按钮。对于如何执行此操作的任何指示，我将不胜感激......来自搜索页面 .cs 文件。以下是搜索页面上的代码及其 .cs 页面、搜索页面按钮代码和母版页搜索按钮代码：

从搜索页面 .cs 文件：

```
if (IsPostBack)
{
    OdbcConnection MyConnection = new OdbcConnection("DRIVER={MySQL ODBC 3.51 Driver}; SERVER=localhost; DATABASE=petsdat; UID=root; PASSWORD=; OPTION=3");
    MyConnection.Open();

    OdbcCommand MyCommand = MyConnection.CreateCommand();
    MyCommand.CommandText = "SELECT * FROM pets WHERE species like '%" + txtSearch.Text + "%'";

    OdbcDataReader MyDataReader = MyCommand.ExecuteReader();

    grdSearch.DataSource = MyDataReader;

    grdSearch.DataBind();

    MyConnection.Close();
} 
```

从搜索页面：

```
<form id="form2" >
    <div>
        <h1>Search for Pets</h1>
        <hr />
        <asp:Label runat="server" ID="lblSearch" Text="Search"></asp:Label>
        <asp:TextBox runat="server" ID="txtSearch"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtSearch" ErrorMessage="Try Again"></asp:RequiredFieldValidator>

        <asp:Button runat="server" ID="btnSubmit" PostBackUrl="~/Search.aspx" Text="Submit" />
        <br />
          <br />
           <br />
        <asp:GridView runat="server" ID="grdSearch" BorderColor="#CC6600" 
            BorderStyle="Solid" BorderWidth="1px" Font-Names="Arial" Font-Size="Medium" 
            GridLines="Both" HorizontalAlign="Left"   Width="600px"></asp:GridView>
        <br />

        <br />
        <br />
        <br />
        <br />
        <br />
    </div>
    </form>
</asp:Content> 
```

母版页搜索提交按钮代码：

```
<asp:TextBox ID="Search1" runat="server" ></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Submit" PostBackUrl="~/Search.aspx" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:36:50.020

在 Button1 Click 事件中，您可以在 QueryString 中设置 Search1 (TextBox) 的值并重定向到您的搜索页面。

例如。：

```
protected void Button1_Click(object sender, EventArgs e)
{
   Response.Redirect("~/Search.aspx?SearchText=" + Search1.Text);        
} 
```

此外，您必须修改搜索页面代码：

```
string searchText = "";
if(Request.QueryString["SearchText"] != null)
  searchText = Request.QueryString["SearchText"];
MyCommand.CommandText = 
          "SELECT * FROM pets WHERE species like '%" + searchText  + "%'"; 
```

# php - PHP rand(10000000000000,9999999999999) 返回“-114888782”

> ID：13802709
> 
> 赞同：5
> 
> 时间：2012-12-10T14:17:06.127
> 
> 标签：php

所以，我有一个 PHP 脚本：

```
<?
rand(1000000000000,9999999999999); 
```

预期结果是一个 13 位数字。

但它返回了一些奇怪的数字，如：

```
987419207
1032717476
-455563764 
```

有谁知道发生了什么？

* * *

PHP: 5.2.17

操作系统：在 Debian Squeeze 和 Windows 7 上测试，均为 64 位

* * *

# 解决方案（解决方法）

```
<?
echo rand(10000,99999).rand(10000000,99999999); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:21:41.487

使用 getrandmax() 查看可以从 rand() 获得的最大值，这显然是一个溢出问题。

您可以使用 2 个这个 int 并制作一个更长的整数，调用 rand 获得 6 位数字，再次调用 7 位数字，这只是一个想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T14:21:17.647

我认为 10000000000000 它不是一个有效的整数！

输出

```
getrandmax(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:35:12.657

使用像[BCMath](http://php.net/manual/en/ref.bc.php#84734)或[GMP](http://php.net/manual/en/function.gmp-random.php)这样的 bignum 库。GMP 更新，似乎有更好的 API，但这只是我的看法

# java - 拒绝覆盖扩展接口的字段

> ID：13802711
> 
> 赞同：0
> 
> 时间：2012-12-10T14:17:09.793
> 
> 标签：java

例如我有下一个界面：

```
public Interface A {
    String CONST = "someText";
} 
```

我想做一些可以组装像 A 这样的接口的事情。但我不希望我的 assembler-interface 可以覆盖其父接口的成员，例如：

```
public Interface Assembler {
    String CONST = "someText"; // there isn't any error
} 
```

你能提出任何解决方案吗？

谢谢！

编辑：如何拒绝从父界面重叠字段？（当我在子界面中使用同名字段时，编译器会向我显示一些错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:19:13.037

您永远不能覆盖字段，无论是`static`（如您的情况）还是实例字段。您所能做的就是*隐藏*它们，但这只是一个命名空间问题；所有字段都将可用，只是可能通过类型名称的显式限定。

无论何时需要覆盖，都需要实例方法。在您的情况下，引入一个返回正确字符串值的方法。但是，您将无法在接口中实现它。

# c# - 与创建委托相比，关键字委托如何工作

> ID：13802716
> 
> 赞同：7
> 
> 时间：2012-12-10T14:17:24.703
> 
> 标签：c#, delegates

我正在慢慢了解委托，因为委托的签名也必须与它委托的方法的签名相匹配。

但是，请查看以下代码。

```
public static void Save()
{
    ThreadStart threadStart = delegate
    {
        SaveToDatabase();
    };
    new Thread(threadStart).Start();
}

private static void SaveToDatabase() { } 
```

我现在被难住了，因为代表返回`void`（就是这样`SaveToDatabase()`）但是，它显然返回了一个`ThreadStart`......或者是吗？

如果我要编写自己的委托，我将不知道如何实现这一点，因为委托必须是 void 才能匹配`SaveToDatabase()`. 但它不可能；它会是类型`ThreadStart`！

我的问题是，我是否完全误解了，或者这是否通过一些 .NET 诡计而成为可能？如果我想编写此方法但要创建自己的委托，我会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:40:38.770

“代表”这个词有点滥用。使用类和对象更容易。“类”就像一个对象的蓝图。“对象”是内存中的实际实例，它遵循类的蓝图。

对于代表，我们使用相同的词，因此我怀疑您的困惑。考虑以下代码：

```
class Main
{
    public delegate int DelegateType(string x);
    public int SomeFunction(string y) { return int.Parse(y)*2; }
    public void Main()
    {
        DelegateType delegateInstance = null;
        delegateInstance = SomeFunction;
        int z = delegateInstance("21");
        Console.WriteLine(z);
    }
} 
```

此代码输出“42”。

`DelegateType`是委托的类型。就像类是对象的蓝图一样，委托是**函数**的蓝图。

所以稍后我们创建一个名为的变量`delegateInstance`，它的类型为`DelegateType`。对于该变量，我们可以分配**任何**接受单个字符串参数并返回整数的函数。请注意，我们分配**了函数本身**，而不是该函数的结果。就像`delegateInstance`变量现在是该函数的同义词。确实，正如后面一行演示的那样，我们现在可以使用`delegateInstance`来调用该函数！就好像`delegateInstance`一个函数本身一样。但是，由于它是可变的，我们也可以做我们通常对变量做的所有相同的事情——比如将它们作为参数传递给其他函数，甚至从其他函数返回（一个返回函数的函数！绕着你的脑袋！）

好的，让我们看看让你感到困惑的代码。

```
public static void Save()
{
    ThreadStart threadStart = delegate
    {
        SaveToDatabase();
    };
    new Thread(threadStart).Start();
}

private static void SaveToDatabase() { } 
```

首先要注意的是您使用了`anonymous delegate`. 该术语的另一个误用。编译后，结果如下：

```
public static void Save()
{
    ThreadStart threadStart;
    threadStart = __ASDASDASD6546549871;
    var tmp = new Thread(threadStart);
    tmp.Start();
}

private static void SaveToDatabase() { }

private void __ASDASDASD6546549871()
{
    SaveToDatabase();
} 
```

请注意，您的匿名函数实际上已转换为具有随机名称的完全常规函数，然后将该函数分配给`threadStart`变量。

所以现在这就像上面的例子一样。只需替换`DelegateType`为`ThreadStart`、`delegateInstance`和。`threadStart`_`SomeFunction``__ASDASDASD6546549871`

现在有意义吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T14:30:54.580

> 我现在被难住了，因为委托返回 void （这就是 SaveToDatabase() 是什么）但是，它显然返回了一个 ThreadStart ......或者是吗？
> 
> 如果我要纠正自己的委托，我将不知道如何实现这一点，因为委托必须为 void 才能匹配 SaveToDatabase() 的返回类型，但不能因为它是 ThreadStart 类型！

[ThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx)被定义为委托。事实上，它被定义为

```
public delegate void ThreadStart(); 
```

因此，您的代码不会返回委托或`ThreadStart`. 它只是定义一个与`ThreadStart`委托定义匹配的函数。构造`Thread`函数需要一个`ThreadStart`委托，您已将其定义为变量`threadStart`，它指向`SaveToDatabase`函数。

我倾向于将委托视为旧的 C++ 术语“函数指针”。委托允许我们指定应该将哪种函数（参数和返回类型）作为参数传递给另一个函数。

> 我的问题是，我是否完全误解了，或者这是否通过一些 .NET 诡计而成为可能？如果我想编写此方法但要创建自己的委托，我会怎么做？

我想你可能误会了。但要具体回答这个问题，您将编写的方法只需要匹配委托类型指定的定义，在本例中为 ThreadStart。该方法定义必须返回`void`并且不接受任何参数。您的`SaveToDatabase`方法与此委托类型匹配，因此是要创建的正确委托方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:25:39.017

当您要运行受管理的子流程时，将要执行的方法由 or 表示，`ThreadStart`但是`ParameterizedThreadStart`它将使用签名而不是类型来执行。`SaveToDatabase``void``void``ThreadStart`

来自 MSDN 的示例：

```
class Test
{
    static void Main() 
    {
        // To start a thread using a static thread procedure, use the
        // class name and method name when you create the ThreadStart
        // delegate. Beginning in version 2.0 of the .NET Framework,
        // it is not necessary to create a delegate explicityly. 
        // Specify the name of the method in the Thread constructor, 
        // and the compiler selects the correct delegate. For example:
        //
        // Thread newThread = new Thread(Work.DoWork);
        //
        ThreadStart threadDelegate = new ThreadStart(Work.DoWork);
        Thread newThread = new Thread(threadDelegate);
        newThread.Start();

        // To start a thread using an instance method for the thread 
        // procedure, use the instance variable and method name when 
        // you create the ThreadStart delegate. Beginning in version
        // 2.0 of the .NET Framework, the explicit delegate is not
        // required.
        //
        Work w = new Work();
        w.Data = 42;
        threadDelegate = new ThreadStart(w.DoMoreWork);
        newThread = new Thread(threadDelegate);
        newThread.Start();
    }
}

class Work 
{
    public static void DoWork() 
    {
        Console.WriteLine("Static thread procedure."); 
    }
    public int Data;
    public void DoMoreWork() 
    {
        Console.WriteLine("Instance thread procedure. Data={0}", Data); 
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T14:31:08.480

来自 MSDN

> 委托是一种引用方法的类型。一旦为委托分配了一个方法，它的行为就与该方法完全相同。委托方法可以像任何其他方法一样使用，带有参数和返回值，如下例所示：

```
public delegate int PerformCalculation(int x, int y); 
```

所以委托的返回类型将匹配它所委托的方法的返回类型。

> 任何与委托签名匹配的方法（包括返回类型和参数）都可以分配给委托。这使得以编程方式更改方法调用以及将新代码插入现有类成为可能。只要知道委托的签名，就可以分配自己的委托方法。

# postgresql - 如何使用 Joda Time、JPA、EclipseLink 和 Postgres 使用指定时区保存和检索这些时间戳

> ID：13802723
> 
> 赞同：5
> 
> 时间：2012-12-10T14:17:53.940
> 
> 标签：postgresql, jpa, timezone, eclipselink, jodatime

这似乎是一个常见问题，所以也许我遗漏了一些明显的东西。使用 Joda Time 我想保留带有时区的日期。如果我不使用 JPA，我会想做这样的事情来保存和检索时间戳：

```
create table test_dates
(
  zone varchar(50),
  ts_with_time_zone timestamp with time zone
);

insert into test_dates values ('UTC', '2012-08-12 12:34:56 UTC');
insert into test_dates values ('MST', '2012-08-12 05:34:56 MST');

select 'UTC in MST', ts_with_time_zone at time zone 'MST' 
    from test_dates where zone = 'UTC'; 
```

那么如何使用 Joda Time、JPA、EclipseLink 和 Postgres 以指定时区保存和检索这些时间戳？

我已经看到使用[转换器](http://jcodehelp.blogspot.com.br/2011/12/persist-joda-datetime-with-eclipselink.html)的答案，但我不确定您将如何指定或使用时区。当然，我可以获取 UTC 时间并自己进行转换，但这违背了拥有“带时区”列的目的。这可能吗？

理想的解决方案是 EclipseLink 处理 JodaTime 类似于[hibernate](http://joda-time.sourceforge.net/contrib/hibernate/userguide.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:33:49.837

您可以自定义 PostgreSQLPlatform 以添加对通过 JDBC 存储时区的支持。您的 JDBC 驱动程序必须支持时区（很可能通过自定义类型或日历 API）。

EclipseLink 确实支持 Oracle 上的时区，因此如果数据库和 JDBC 驱动程序支持它，它应该可以扩展 PostgreSQLPlatform 的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:28:45.777

您不保存时区。您只需使用输入字符串中指定的时区保存时间戳。不会保存时区。

```
select '2012-08-12 12:34:56 UTC'::timestamp with time zone;
      timestamptz       
------------------------
 2012-08-12 09:34:56-03

select '2012-08-12 05:34:56 MST'::timestamp with time zone;
      timestamptz       
------------------------
 2012-08-12 09:34:56-03 
```

时区将是数据库时区。

```
select now()::timestamp with time zone;
              now              
-------------------------------
 2012-12-10 12:26:16.318484-02 
```

# android - 带有切换按钮的 Radiogroup 无法正常工作

> ID：13802725
> 
> 赞同：1
> 
> 时间：2012-12-10T14:17:55.820
> 
> 标签：android, radio-button, listener, togglebutton, oncheckedchanged

我试图用四个切换按钮实现一个无线电组。期望的行为是典型的单选组行为：一个按钮被预选，如果用户点击另一个按钮，前一个按钮被取消选择，而新的按钮被选中。如果用户再次单击选定的按钮，则不会发生任何事情，因为不允许选择任何按钮。这就是我遇到问题的地方。我遵循了这个问题的解决方案：[Android: How to get a radiogroup with togglebuttons?](https://stackoverflow.com/questions/2379527/android-how-to-get-a-radiogroup-with-togglebuttons)

不幸的是，用户仍然能够取消选择活动按钮。我怎样才能防止这种情况？

这是我的代码：

ToggleButtons 的 onClick 侦听器：

```
/**
 * Handler for onClick Events.
 */
    @Override
public void onClick(View v) {
    if (viewListener == null) {
        return;
    }
    if (v == tb_one|| v == tb_two|| v == tb_three|| v == tb_four) {
        ((RadioGroup) v.getParent()).check(v.getId());
    }
    else {
        super.onClick(v);
    }

} 
```

我的自定义 OnCheckedChangeListener：

```
/**
 * The listener for a checked change event of the toggle buttons.
 */
static final RadioGroup.OnCheckedChangeListener ToggleListener = new RadioGroup.OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(final RadioGroup radioGroup, final int i) {
        //if one button is checked, uncheck all others
        for (int j = 0; j < radioGroup.getChildCount(); j++) {
            final ToggleButton view = (ToggleButton) radioGroup.getChildAt(j);
            view.setChecked(view.getId() == i);
        }
    }
}; 
```

这里是我添加监听器的地方：（它在 onFinishInflate 方法中）

```
 ((RadioGroup) findViewById(R.id.instant_toggleGroup_mode))
            .setOnCheckedChangeListener(ToggleListener);
    tb_one = (ToggleButton) findViewById(R.id.instant_tb_one);
    tb_one.setOnClickListener(this);
    tb_two = (ToggleButton) findViewById(R.id.instant_tb_two);
    tb_two.setOnClickListener(this);
    tb_three = (ToggleButton) findViewById(R.id.instant_tb_three);
    tb_three.setOnClickListener(this);
    tb_four = (ToggleButton) findViewById(R.id.instant_tb_four);
    tb_four.setOnClickListener(this); 
```

如果有人可以向我指出解决方案，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:21:28.923

最后我想出了如何去做。感谢 Ole，您的帮助使我找到了这个解决方案。

所以这是工作代码：

初始化按钮和按钮组：

```
tb_one = (ToggleButton) findViewById(R.id.instant_tb_one);
tb_one.setOnClickListener(this);
tb_two = (ToggleButton) findViewById(R.id.instant_tb_two);
tb_two.setOnClickListener(this);
tb_three = (ToggleButton) findViewById(R.id.instant_tb_three);
tb_three.setOnClickListener(this);
tb_four = (ToggleButton) findViewById(R.id.instant_tb_four);
tb_four.setOnClickListener(this);
rg_modes = (RadioGroup) findViewById(R.id.instant_toggleGroup_mode);
rg_modes.setOnCheckedChangeListener(ToggleListener);
rg_modes.clearCheck();
rg_modes.check(tb_one.getId()); 
```

onClick 处理程序：

```
if (v == tb_one|| v == tb_two|| v == tb_three|| v == tb_four) {
  rg_modes.clearCheck();
  rg_modes.check(v.getId());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:33:28.083

您检查 ToggleButton 是否已被选中。如果是，你什么也不做。

```
if (v == tb_one|| v == tb_two|| v == tb_three|| v == tb_four) {
    if(!((ToggleButton) v).isChecked())
        ((RadioGroup) v.getParent()).check(v.getId());
} 
```

**编辑**

```
if (v == tb_one|| v == tb_two|| v == tb_three|| v == tb_four) {
    ((RadioGroup) v.getParent()).check(v.getId());

    if(!((ToggleButton) v).isChecked())
        ((ToggleButton) v).setChecked(true);
} 
```

# java - Java 获取特定时间的所有时区

> ID：13802726
> 
> 赞同：1
> 
> 时间：2012-12-10T14:17:56.673
> 
> 标签：java, calendar, timezone, dst

我希望能够在任何给定时间获取和使用在特定小时内的所有时区列表。因此，例如，如果我传递一个时间为上午 7 点的日历对象，则该方法应返回世界上当前为上午 7 点的所有区域。

现在，我通过遍历所有可用时区来执行此操作，根据日历对象检查每个时区，如果该时区在一小时内，则将其附加到数组中。

```
private List<String> getAllTimeZones(Calendar date) {
    List<String> ret = new ArrayList<String>();
    String[] timezones = TimeZone.getAvailableIDs();
    for(String timezone : timezones) {
        Calendar currentTime = Calendar.getInstance(TimeZone.getTimeZone(timezone));
        Integer zoneHour = currentTime.get(Calendar.HOUR_OF_DAY);
        Integer dateHour = date.get(Calendar.HOUR_OF_DAY);
        if(zoneHour.equals(dateHour)) {
            ret.add(timezone);
        }
    }
    return ret;
} 
```

我可以像这样使用这种方法（在这个例子中，我在早上 7 点经过一个小时）。现在是东部标准时间上午 9 点，因此结果应该是当前为上午 7 点的所有时区。

```
Calendar date = Calendar.getInstance();
date.set(Calendar.HOUR_OF_DAY, 7);
List<String> zones = getAllTimeZones(date);
for(String zone : zones) {
    System.out.println(zone);
} 
```

这当前返回此列表（当然，如果它是不同的时间，它将是一个不同的列表）：

```
America/Boise
   America/Cambridge_Bay
   America/Chihuahua
   America/Dawson_Creek
   America/Denver
   America/Edmonton
   America/Hermosillo
   America/Inuvik
   America/Mazatlan
   America/Ojinaga
   America/Phoenix
   America/Shiprock
   America/Yellowknife
   Canada/Mountain
   Etc/GMT+7
   MST
   MST7MDT
   Mexico/BajaSur
   Navajo
   PNT
   SystemV/MST7
   SystemV/MST7MDT
   US/Arizona
   US/Mountain 
```

这是获取当前特定时间（在本例中为上午 7 点）的所有时区的可靠方法吗？因为我正在与当前时间进行比较，这是否考虑了夏令时？最后但并非最不重要的一点是，有没有更有效的方法来做到这一点？

更新：正如有人在下面的答案中指出的那样（但拒绝澄清）是否有必要计算偏移量，因为我所做的基本上是将时区设置为日历对象并实时获取对象？从这些方法中提取的数据会立即使用，不需要保存，因此如果 DST 在几个月后发生变化，这无关紧要，只要在我检查它的那一刻给我正确的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:47:42.020

是的。它应该工作。我在其他平台上使用过同样的方法。只要您在时区询问当前时间，您就不必担心夏令时等。

话虽如此，当您必须记住您在呼叫的瞬间而不是在用户阅读屏幕时的几秒钟后获得小时时，小时的顶部和闰秒有一个微秒窗口。但我不认为这应该是一个问题。

# c - 什么是零宽度位域

> ID：13802728
> 
> 赞同：18
> 
> 时间：2012-12-10T14:17:59.393
> 
> 标签：c, struct, bit-manipulation, signed

> **可能的重复：**
> [零长度位域的实际使用](https://stackoverflow.com/questions/4297095/practical-use-of-zero-length-bitfields)

为什么某些结构具有零宽度位字段，为什么需要它？

```
struct foo {
  int    a:3;
  int    b:2;
  int     :0; // Force alignment to next boundary.
  int    c:4;
  int    d:3;
};

int main()
{
        int i = 0xFFFF;
        struct foo *f = (struct foo *)&i;
        printf("a=%d\nb=%d\nc=%d\nd=%d\n", f->a, f->b, f->c, f->d);
        return 0;
} 
```

上述程序的输出是

```
manav@os-team:~/programs/test$ ./a.out
a=-1
b=-1
c=-8
d=0 
```

请解释为什么这些值为负数，以及这些变量在结构内部的内存布局？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T14:26:14.363

从[谷歌搜索的第一次点击开始](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc03defbitf.htm)：

*长度为 0 的位域必须是未命名的。无法引用或初始化未命名的位域。零宽度位字段可以导致下一个字段在下一个容器边界上对齐，其中容器的大小与位字段的基础类型相同。*

至于问题的第二部分，您将结构中的*一些*位字段设置为全 1，并且由于这些字段已签名，因此这会导致这些字段的值为负。如果将整个结构设置为 1 并查看有符号和无符号表示中的值，您可以更有效地看到这一点，例如

```
int main()
{
    struct foo f;
    memset(&f, 0xff, sizeof(f));
    printf("a=%d\nb=%d\nc=%d\nd=%d\n", f.a, f.b, f.c, f.d); // print fields as signed
    printf("a=%u\nb=%u\nc=%u\nd=%u\n", f.a, f.b, f.c, f.d); // print fields as unsigned
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:26:40.377

内存布局是“取决于”的，您不能指望来自任何特定编译器的任何特定布局。事实上，通过更改其设置，您可能会看到与任何给定编译器不同的布局。不要试图猜测、直觉或依赖布局。

负数 - 你所有的元素都是`int`有符号的，所以它们是负数，因为你已经将每一位初始化为 1，所以你已经设置了符号位。至于 d - 打败了我。错字？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T14:31:12.957

[如此处](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=/com.ibm.vacpp6m.doc/language/ref/clrc03defbitf.htm)所述，零长度位域增加了位域之间的对齐。如果我们连续有多个位域，它们的布局是紧凑的，但是如果我们想将其中一个对齐到字节/字/双字边界，我们需要在这个和前一个之间放置一个长度为零的位域。

来自上面链接的示例：

```
struct on_off {
                  unsigned light : 1;
                  unsigned toaster : 1;
                  int count;            /* 4 bytes */
                  unsigned ac : 4;     // this and
                  unsigned : 4;        // this and
                  unsigned clock : 1;  // this bitfields are next to each other
                  unsigned : 0;
                  unsigned flag : 1;   // this bitfield is at a 4 bytes boundary.
                 } kitchen ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T14:27:14.357

数字是负数，因为位域是有符号的，也就是说，如果你有一个`signed char`变量，它的大小是 8 位，可以容纳 256 个不同的值。一半的值为正，其余为负和 0。最高有效位表示符号（1 表示负，0 表示正）。关于零长度位域，请参见此处：零长度位域[的实际使用](https://stackoverflow.com/questions/4297095/practical-use-of-zero-length-bitfields)

# c++ - 右下角的 MFC 扩展坞

> ID：13802736
> 
> 赞同：1
> 
> 时间：2012-12-10T14:18:19.170
> 
> 标签：c++, mfc, dock

我在 C++ MFC 应用程序中有一个窗格，我想将其停靠在右下角，如图中橙色所示。目前它正穿过底部（红色）。见[http://screencast.com/t/kSpPhvZkgBGj](http://screencast.com/t/kSpPhvZkgBGj)

这就是用户在 VS2008 中可以做到的方式。 [http://screencast.com/t/kSpPhvZkgBGj](http://screencast.com/t/kSpPhvZkgBGj)

这叫什么职位？我怎样才能获得相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T04:20:46.703

这取决于创建窗格的顺序。我开发了一个软件，它甚至有两个界面版本，布局完全不同。

展望布局： ![展望布局](../Images/17c00cad4847b40ec8bb7a079f29ef7b.png)

功能区布局 ![在此处输入图像描述](../Images/aa03639751e863d16d2fa18ddd47b3a8.png)

正如您在 Outlook 布局中看到的那样，顶部的 3 个窗格位于功能区布局的左侧；并且信息栏从顶部移到底部。

这有一些烦人的工作要做。我使用了 CDockablePane 实体。你在使用它们吗？

# java - java - 如何使用 Saxon 库处理大型 XML 文件

> ID：13802737
> 
> 赞同：1
> 
> 时间：2012-12-10T14:18:21.710
> 
> 标签：java, xpath, xquery, saxon

在我正在开发的应用程序中，我必须处理非常大的 XML 文件（文件大小高达 2GB）...我想使用 Saxon java 库对这些文件运行一些 XQuery 命令。

我该如何做到这一点，以这样一种方式，一次只有文件中的一小部分记录保存在内存中，并且文件以如此小的数据集（而不是一次整个文件）进行处理 - 和同时，XQuery 命令的输出应该是正确的吗？我宁愿使用只有 0.5GB RAM 的机器来运行 XQuery 命令--> 所以不可能一次将整个 XML 加载到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:14:57.290

Saxon's support for streamed processing is actually stronger in XSLT than in XQuery, largely because the XSLT working group has been addressing this issue in designing XSLT 3.0\. You can find information on the streaming capabilities of the product at

[http://www.saxonica.com/documentation9.4-demo/index.html#!sourcedocs/streaming](http://www.saxonica.com/documentation9.4-demo/index.html#!sourcedocs/streaming)

Note these are available only in the commercial edition, Saxon-EE.

For simple "burst mode" streaming you can do things like:

for $e in saxon:stream(doc('big.xml')/*/record[@field='234']) return $e/name

By "burst mode" I essentially mean a query that operates over a large number of small disjoint subtrees of the source document.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:32:35.883

实现此类功能的最佳方式（但很复杂）是限制可能的 XQuery 命令（即枚举所有可能的用例）。之后，对于每个文件处理一次，它使用 SAX 或 StAX 方式为整个 XML 文件创建内部“索引”，将搜索键映射到 XML 文件中的偏移量（开始和结束）。这些偏移量应该指向 XML 文件的一些小但格式良好的部分，可以独立加载和分析以检查它是否与指定的 XQuery 匹配。

另一种方法是将 XML 文件解析（再次使用 SAX 或 StAX）到一些基于磁盘的临时数据库（如 Apache Derby）并创建您自己的 XQuery => SQL 翻译器或解释器来访问此文件数据。你不会得到 OutOfMemoryException，但这种方法的性能......对于曾经使用过的文件可能不是最好的。

# javascript - Safari上的javascript按钮+ css过渡闪烁

> ID：13802755
> 
> 赞同：1
> 
> 时间：2012-12-10T14:19:23.147
> 
> 标签：javascript, jquery

我有一个这样的按钮集，由 javascript 控制并触发 css 转换，我试图将问题复制到一些更简化的情况，但闪烁不会发生，但只会发生在这个按钮集上，问题可能不是即使在这段代码中，也可能是。

输出是，当鼠标悬停在按钮上时，它在 webkit 浏览器上闪烁 0.5 秒，如果放在`border:2px solid red`按钮上，背景大小将不再是 100%，看起来有问题我试过放：

```
-webkit-backface-visibility: hidden;
-webkit-transform      : translateZ(0); 
-webkit-transform      : translate3d(0,0,0);    
-webkit-perspective:1000; 
```

都无奈..我做错了什么吗？

```
 var btns = {
         'bg_o' : ['images/services/btn1.png','images/services/btn2.png','images/services/btn3.png','images/services/btn4.png'],
         'bg_h' : ['images/services/btn1_hover.png','images/services/btn2_hover.png','images/services/btn3_hover.png','images/services/btn4_hover.png'],
         '$all_btn' : $('.all_btn'),
         '$folders':[$('#folder1'),$('#folder2'),$('#folder3'),$('#folder4')],
         'folders_status':['inactive','inactive','inactive','inactive'],
         'timer':null
         ,jquery_func : function(){
            btns.$all_btn.each(function(){

                $(this).click(function(){
                    if($(this).attr('id')=='service_btn1'){
                        ajax1();
                    }

                    if($(this).attr('id')=='service_btn3'){
                        ajax3();
                    }
                    var imageurl_o = new Array();

                    for(i=0;i<4;i++){
                        imageurl_o[i] = {'background':'url('+btns.bg_o[i]+')','background-size':'100% 100%'};       
                        btns.$folders[i].css(imageurl_o[i]);    
                        btns.folders_status[i]='inactive';
                    }

                    for(i=0;i<4;i++){           
                        var myparent = btns.$folders[i].parent();                       
                        if($(this).attr('class') == myparent.attr('class')){
                            var imageurl_h = {'background':'url('+btns.bg_h[i]+')','background-size':'100% 100%'};
                            btns.$folders[i].css(imageurl_h);   
                            btns.folders_status[i]='active';
                        }   
                    }
                });

                $(this).on('mouseenter',function(){
                    console.log('out')
                    var imageurl_o = new Array();

                    for(i=0;i<4;i++){
                        imageurl_o[i] = {'background':'url('+btns.bg_o[i]+')','background-size':'100% 100%'};
                    }
                    for(i=0;i<4;i++){
                        if(btns.folders_status[i]=='inactive'){
                            btns.$folders[i].css(imageurl_o[i]);
                        }
                    }

                    clearTimeout(btns.timer);
                    var imageurl_h = null;
                    var go = null;
                    for(i=0;i<4;i++){           
                        var myparent = btns.$folders[i].parent();                       
                        if($(this).is(':visible')&&$(this).attr('class') == myparent.attr('class')){
                            $(this).stop(true);
                                imageurl_h = {'background':'url('+btns.bg_h[i]+')','background-size':'100% 100%'};
                                go=imageurl_h;
                                if(imageurl_h!=null && go!=null){
                                    btns.$folders[i].css(go);   
                                    btns.$folders[i].css(go);   
                                    btns.$folders[i].css(go);   

                                }
                        }   
                    }

                    btns.timer = setTimeout(function(){
                        var imageurl_o = new Array();
                        for(i=0;i<4;i++){
                            imageurl_o[i] = {'background':'url('+btns.bg_o[i]+')','background-size':'100% 100%'};
                        }
                        for(i=0;i<4;i++){

                            if(btns.folders_status[i]=='inactive')
                            btns.$folders[i].css(imageurl_o[i]);
                        }
                    },1000);

                });

            }); 
         }
     }
     btns.jquery_func(); 
```

# rest - 带有运行时数据源的 JasperReports 服务器 REST 调用

> ID：13802760
> 
> 赞同：2
> 
> 时间：2012-12-10T14:19:58.157
> 
> 标签：rest, runtime, datasource, jasperserver

我想对报表进行 REST 调用，并在运行时将数据源作为参数提供，例如：

[http://somereporthost.com:8080/jasperserver/rest_v2/reports/reports/Recently_Created](http://somereporthost.com:8080/jasperserver/rest_v2/reports/reports/Recently_Created)？**数据源=ds_test** &user=doej&begin_date=2012-12-04

鉴于此示例，在我想到的用例中，ds_test 与其他（ds_test2、ds_test3）一样已经存在，因此可以在运行时指定任何数据源。

是否可以在运行时指定数据源？

我见过一个线程，其中包括更改与特定报告关联的数据源，但除非我误解了解决方案，否则我会看到潜在的竞争条件问题。

我看到另一个使用所需的数据源动态创建报告的副本，但我认为这会在报告更新时产生对一些内务管理的需求，并且似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-20T15:29:31.067

我目前正在使用 JasperReports Server 6.2 版。我认为这应该工作的方式是通过引用用户属性，并定义尽可能多的执行用户作为您需要的数据源。

请看一下这个答案：

[https://stackoverflow.com/a/37926230/5731158](https://stackoverflow.com/a/37926230/5731158)

# android - 如何在多次单击按钮时多次更改 TextView？

> ID：13802761
> 
> 赞同：1
> 
> 时间：2012-12-10T14:19:56.940
> 
> 标签：android, button, click, textview

在 Android 应用程序开发方面，我是个新手，目前我正在开发一个应用程序。每次用户单击 Button(NEXT) 并且单击另一个 Button (PREVIOUS) 时，我都试图更改我的 TextView，我希望它更改回原始的 TextView。所以基本上我想设置一定数量的 TextView 并能够使用我提到的两个按钮浏览它们。

到目前为止，我只知道如何在单击 Button(NEXT) 时使 TextView 更改一次。我正在使用这段代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.activity_main);

    ImageButton Next = (ImageButton) findViewById(R.id.Next);
    Next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            TextView Text1= (TextView) findViewById(R.id.Text1);
            Text1.setText("New Text");  
        }
    }); 
```

注意：尚未包含“上一个”按钮，因为我还不知道如何处理它。

我感觉只有当您希望 TextView 更改一次并且您需要一种完全不同的方法来使其多次更改时才使用此代码。

我希望我为您提供了足够的信息，并且您愿意在这里帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:01:09.703

```
public class MyActivity extends Activity implements View.OnClickListener {

int stringIdList[] = {R.string.text1, R.string.text2, R.string.text3, R.string.text4}
int stringListCounter = 0;
TextView text1;

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   ImageButton next = (ImageButton) findViewById(R.id.Next);
   ImageButton previous = (ImageButton) findViewById(R.id.Previous);
   text1 = (TextView) findViewById(R.id.Text1);
   Next.setOnClickListener(this);
   previous.setOnClickListener(this);
}

@Override
public void onClick(View v) {
  int id = v.getId();

  if(id == R.id.Next && stringListCounter < stringIdList.length - 1) {
    stringListCounter++;
  } else if (id == R.id.Previous && counter > 0) {
    stringListCounter--;
  }

  Text1.setText(stringIdList[stringListCounter]);
} 
```

这样做是将您的 Activity 分配给 an`OnClickListener`以处理单击事件。如果`Next`按下并且计数器在数组列表的范围内，它将增加计数器。对于`previous`. 在点击结束时，它会将文本设置为任何 ID。这假设您的字符串位于`strings.xml`Android 规范中推荐的文件中并且是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:45:54.597

我认为您可以将历史记录存储为 List 并在每个时刻拥有 textview 的所有状态。您唯一需要做的就是在按下上一个按钮后从此历史堆栈中获取上一个值。

# sql - 使用 COUNT() 和 JOIN 合计条目时使用 WHERE 子句

> ID：13802766
> 
> 赞同：1
> 
> 时间：2012-12-10T14:20:21.567
> 
> 标签：sql, sql-server, join, count, where-clause

我对这个 MSSQL 查询有点卡住了，真的很感激这方面的一些帮助！我试图简单地将员工在特定时期内的假期数加起来。

```
SELECT e.EMPLOYEE_ID, COUNT(y.EMPLOYEE_ID) AS TOTAL_HOLIDAYS FROM EMPLOYEE e 
LEFT OUTER JOIN
HOLIDAY y
ON e.EMPLOYEE_ID = y.EMPLOYEE_ID
WHERE e.IS_ACTIVE = 'true'
-- AND y.[DATE] BETWEEN '20121201' AND '20121210'
GROUP BY e.EMPLOYEE_ID 
```

这种查询给了我我需要的东西，但我想为假期添加一个过滤器......我必须以错误的方式解决这个问题。我需要在数据集中列出所有员工 - 例如，即使 HOLIDAY 表中没有任何内容，我也想要结果。

```
ID TOTAL_HOLIDAYS
1    0
2    0
etc. 
```

当我尝试添加注释行（我知道这两个日期之间没有假期）时，不会返回任何行。如何重写此查询以始终列出所有活动的 EMPLOYEE_ID 并计算两个日期之间的假期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:21:29.923

将条件移动到连接中：

```
SELECT e.EMPLOYEE_ID, COUNT(y.EMPLOYEE_ID) AS TOTAL_HOLIDAYS
FROM EMPLOYEE e 
LEFT OUTER JOIN HOLIDAY y
ON e.EMPLOYEE_ID = y.EMPLOYEE_ID
AND y.[DATE] BETWEEN '20121201' AND '20121210'
WHERE e.IS_ACTIVE = 'true'
GROUP BY e.EMPLOYEE_ID 
```

# jquery - 如何在 Raphael JS 中调整动态打印文本的大小

> ID：13802780
> 
> 赞同：0
> 
> 时间：2012-12-10T14:21:10.263
> 
> 标签：jquery, resize, raphael

我已经找到了如何使用 Raphael JS 拖动对象。

但是现在，我想知道是否可以调整动态打印文本的大小并使用 Raphael JS 获取此“对象”的新宽度/高度。

这是我想要完成的第一个视图：

```
$(function() {
var R = Raphael("holder", 400, 400);
$("#typetext").keyup(function() {
    var textValue = $(this).val();
    R.clear();
    var c = R.print(100, 100, textValue, R.getFont("Arial"), 60).attr({
        fill: "#ff0000",
        cursor: "move"
    });
    var start = function() {
        this.odx = 0;
        this.ody = 0;
        this.animate({
            "fill-opacity": 0.2
        }, 500);
    },
        move = function(dx, dy) {
            this.translate(dx - this.odx, dy - this.ody);
            this.odx = dx;
            this.ody = dy;
        },
        up = function() {
            this.animate({
                "fill-opacity": 1
            }, 500);
        };
    c.drag(move, start, up);
}); 
});​ 
```

演示：http: [//jsfiddle.net/ZuYcG/](http://jsfiddle.net/ZuYcG/)

任何建议将不胜感激！

编辑：[这个小提琴](http://jsfiddle.net/tmkfs/)给出了我需要做什么的想法，但带有印刷文本。

EDIT2：打印文本由SVG结构中的路径定义，似乎无法获得路径的宽度和高度......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:27:58.687

不可能“重新打印”，因为将不同的像素高度提供给使用的路径生成例程`print`。但是，如果您有兴趣将文本缩放在某些合理的范围内，则可以获取路径的边界框，然后对其进行缩放以确保它在画布的宽度和高度范围内。

```
var bbox = c.getBBox();
if ( bbox.x + bbox.width > $(R.canvas).width() )
{
    var scale = ( $(R.canvas).width() - bbox.x) / bbox.width;
    c.scale( scale, scale, bbox.x, bbox.y  );
} 
```

[这里](http://jsfiddle.net/kevindivdbyzero/p8BcB/)展示的功能。

# c# - 将泛型参数转换为子类

> ID：13802794
> 
> 赞同：0
> 
> 时间：2012-12-10T14:21:53.567
> 
> 标签：c#, generics, covariance

请看下面的代码：

```
public class BaseClass
{
}

public class SubClass : BaseClass
{
}

public class QueryClass
{
    public TBaseClass[] QueryBase<TBaseClass>() where TBaseClass : BaseClass
    {
        throw new NotImplementedException();
    }

    public TSubClass[] QuerySub<TSubClass>() where TSubClass : SubClass
    {
        throw new NotImplementedException();
    }

    public TClass[] Query<TClass>() where TClass : BaseClass
    {
        if (typeof(TClass).IsSubclassOf(typeof(SubClass)))
        {
            return QuerySub<TClass>(); // there is error The type 'TClass' must be convertible to SubClass
        }

        return QueryBase<TClass>();
    }
} 
```

问题是如何实现查询方法。如果有可能..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:36:02.900

你想要做的是做这样的事情：

```
public class Animal { }
public class Dog : Animal { }

public void HandleAnimal<T>() where T : Animal
{

}
public void HandleDog<T>() where T : Dog
{

} 
```

在这种情况下，当您参考时`Animal`，无法知道它是什么`typeof`动物。即使该方法返回 true，在您的代码上下文中，它仍然始终是 an ，并且当您只知道类型是 an 时`Animal`，您无法处理 a 。如果你在方法中处理对象的实例，你可能会开始强制转换或实例化，如果你知道它是一个子类，然后通过它。`dog``animal``subclass`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:54:19.677

以反思结束。

```
 if (typeof(TClass).IsSubclassOf(typeof(SubClass)))
        {
            var method = typeof(QueryClass).GetMethod("QuerySub").MakeGenericMethod(typeof (TClass));

            return (TClass[]) method.Invoke(this, new object[0]);
        } 
```

# css - 为元素提供填充会增加总宽度

> ID：13802798
> 
> 赞同：0
> 
> 时间：2012-12-10T14:22:06.573
> 
> 标签：css

我有一个 div，我想缩进我的文字，`40px`从左边说。为此，我写

```
#rightheader{
    float: right;
    width: 70%;   
    height: 120px;
    background-color: #336699;
    padding-top: 20px; 
} 
```

现在，令人困惑的是，每当我添加`padding-left: 40px;`到上面时，div 的总宽度也会增加。不是吗`padding euivalent to internal indentation.`

顺便说一句，如何缩进我的文本而不需要修改我的 div 宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:24:16.717

你想看看**[`box-sizing: border-box`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)**。

这将使`padding:`计算框的宽度内。

另请阅读**[CSS Box Model](http://css-tricks.com/the-css-box-model/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:23:52.613

```
#rightheader{
    float: right;
    width: 70%;   
    height: 120px;
    background-color: #336699;
    padding-top: 20px;
    text-indent: 40px;
} 
```

# mysql - 从不在另一个有条件的表中的表中选择

> ID：13802799
> 
> 赞同：0
> 
> 时间：2012-12-10T14:22:09.057
> 
> 标签：mysql

有两个表节点：

```
nid INT(10)
type (VARCHAR(32))

node_hit_count

nid INT(10)
totalcount (bigint(20)) 
```

我需要`nid`从`node`表中选择所有不在`node_hit_count`表中且`WHERE` `node`类型等于`feature`或`home`或的 s`competition`

我尝试过的，它错了，我的想法会爆炸：/

```
select * from node left join node_hit_counter on node.nid=node_hit_counter.nid 

where hit.nid is null and node.type IN ('feature', 'home', 'competition') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:25:06.843

子句`hit.nid`中的内容是什么。`WHERE`您必须`WHERE node.nid IS NULL`像这样使用：

```
select node.*
from node 
left join node_hit_counter on node.nid = node_hit_counter.nid 
where node.nid is null 
  and node.type IN ('feature', 'home', 'competition'); 
```

**或者：**

```
SELECT *
FROM node
WHERE nid NOT IN(SELECT nid FROM node_hit_counter WHERE nid IS NOT NULL)
  AND type IN ('feature', 'home', 'competition'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:26:42.710

试试这个，你可以在 where 子句中使用你的 hit.nid :o)

```
select n.* 
from node n
left join node_hit_counter hit on n.nid=hit.nid 
where hit.nid is null 
and n.type IN ('feature', 'home', 'competition') 
```

# database - 无法在数据列表视图中显示图像

> ID：13802800
> 
> 赞同：0
> 
> 时间：2012-12-10T14:22:09.483
> 
> 标签：database, visual-studio-2010

我尝试使用 Visual Studio 中的数据列表在数据库中显示我的图像。

```
 <ItemTemplate>
        <td runat="server" style="width:300px">
             <asp:ImageButton ID="ImageButton1" runat="server"  Height="184px" Width="120px" ImageUrl='<%# Eval("image", "images\\{0}") %>' PostBackUrl='<%# Eval("productID", "ProductDetails.aspx?productID={0}") %>' /><br />
             <p><b><asp:Label ID="productIDLabel" runat="server" Text='<%# Eval("title") %>' /></b></p>
           <p>Price &nbsp;  <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price","{0:C}") %>' /></p>
        </td>
    </ItemTemplate> 
```

我有一个列名“图像”。但是，浏览器上没有显示任何图像。有人可以帮我解决吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:27:37.320

修改 ImageButton 以引用如下`~/Images/`文件夹：

```
<asp:ImageButton ID="ImageButton1" runat="server"  ImageUrl='~/Images/<%# Eval("image") %>' ... /> 
```

# html - 在服务器端自动删除多余的 CSS 样式

> ID：13802808
> 
> 赞同：1
> 
> 时间：2012-12-10T14:22:43.207
> 
> 标签：html, css, request, sass, server-side

我正在与 30 多名开发人员和网页设计师一起开展一个大型项目，他们都在网站上添加自己的 css 样式......这变得无法维护。我们正在使用 Git、Php zendframework、memcache、capistrano、compass 和 sass。

我正在寻找这样的解决方案：

例子

```
Compass Sass => CSS created ( .class1 #idname1 .class2 #idname2 .class3 #idname3...)
PHP =>  uniquepagename.html required ( .class1 #idname1 ) 
```

结果：所有的 css 和 html 都被发送到客户端。但...

如果与页面一起发送的 css 可能只包含 page.html 实际需要的 css 怎么办？

有这样的系统吗？

PS：是的，我们正在使用压缩并在服务器端缩小我们的 CSS 和 JS（仅提供 1 个 css 文件（32kb 和不断增长）1 个 js 文件（119kb 和增长）等）对于我们的 11 个专用 css 文件仍然很重服务器（我们为欧洲 12 个国家/地区提供服务）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:56:18.207

我很确定没有，实时分析整个站点以仅发回所需的 CSS 可能需要比仅发送 CSS 并让客户端完成工作需要更长的时间。此外，每个请求都可能需要一些不同的 CSS，而不仅仅是使用缓存中的完整 CSS。

最好的方法似乎总是缩小并合并 CSS（像 CSS Merge 一样合并）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:02:43.737

对 Web 性能的建议是组合和压缩您的 CSS（甚至是不需要的 CSS），以最大限度地减少对服务器的请求数量，并利用缓存等客户端/服务器技术。

因此，尽管您尝试实现的目标可能是有意义的，但实际上建议将所有 CSS 填充到尽可能少的文件中，这些文件的请求频率较低，并根据其预期寿命进行缓存。

高温高压

** 编辑：** 更新的答案包括@Christoph 的评论

# c# - 访问列表视图中的复选框？

> ID：13802809
> 
> 赞同：0
> 
> 时间：2012-12-10T14:22:43.430
> 
> 标签：c#, asp.net, listview, checkbox

我有一组列表视图，每个列表视图中都有一个复选框：

```
<telerik:RadListView Skin="Vista" ID="RadListView3" DataSourceID="SqlDataSource_subentry"
                                    runat="server"  ItemPlaceholderID="EmployeesContainer" DataKeyNames="ID">
                                    <LayoutTemplate>
                                        <fieldset id="FieldSet1">
                                            <legend>Issues</legend>
                                            <asp:PlaceHolder ID="EmployeesContainer" runat="server" ></asp:PlaceHolder>

                                            <br />
                                            <br />                                                
                                        </fieldset>
                                    </LayoutTemplate>
                                    <ItemTemplate>
                                        <div style="width:200px; height:165px; -webkit-border-radius: 20px;-moz-border-radius: 20px; border-radius: 20px;
                                            border:2px solid black; background-color:#00FFFF; text-align:center; margin-top:20px; margin-bottom:10px;  
                                             margin-left:20px; ">
                                             <br />
                                             <div style=" width:190px; height:auto; font-size:small;color:#000099; text-align:left; margin-left:12px;"><%#Eval("Worked_Project")%>      
                                               &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;   
                                               <label id="Label1" runat="server"><%# Eval( "ID" ) %></label>
                                                 <asp:CheckBox ID="MyCheckBox" runat="server"  Text=<%# Eval( "ID" ) %>/></div>
                                             <div style="width:190px; height:auto; font-size:small;color:black;text-align:center; padding-left:2px; margin-left:5px;" ><%# DataBinder.Eval(Container.DataItem, "Week_Ending", "{0:d/M/yyyy }")%></div>
                                             <div style=" width:190px; height:75px; font-size:large; color:#000099; text-align:center; "><%#Eval("Activity")%> </div>
                                             <div style=" width:190px; height:auto; font-size:small;color:black; text-align:left;  margin-left:12px; margin-bottom:5px; "><%#Eval("UserId")%> </div>

                                         </div>

                                    </ItemTemplate> 
```

在按钮上单击我想选择与特定复选框关联的 id：

```
 protected void Button1_Click(object sender, EventArgs e)
{

    foreach (Control   ctl in RadListView3.Controls)
    {

        CheckBox chk = (CheckBox)ctl.FindControl("MyCheckBox");

       if (chk.Checked== true)
            {

                string value = chk.Text.ToString();
                Session["id"] = value.ToString();
                Label2.Text = Session["id"].ToString();
            }

     }

} 
```

但它在代码行上给出错误：

```
 if (chk.Checked== true) 
```

错误是

```
Object reference not set to an instance of an object. 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T08:01:14.580

尝试这个：

```
protected void RadListView1_ItemCommand(object sender,Telerik.Web.UI.RadListViewCommandEventArgs e)
{
    CheckBox button = (CheckBox)e.ListViewItem.FindControl("CheckBox1");

    if (e.CommandName == "Approve")
    {
        if (button.Checked == true)

        {
           //your code
        }

        else

        {
           //your code
        }

    }

} 
```

或者，如果您只需要在 Button click （循环）上选择 id，请按照以下链接进行操作。

[http://www.telerik.com/community/forums/aspnet-ajax/listview/get-selected-value-of-radlistview.aspx](http://www.telerik.com/community/forums/aspnet-ajax/listview/get-selected-value-of-radlistview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:18:24.143

您必须先检查此控件的类型

```
CheckBox chk = ctl as CheckBox ;
if (chk !=null)
{
 //do something 
} 
```

更多信息。关于[作为](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx) 关键字

# ruby-on-rails - 确定你不是在寻找 /faye？

> ID：13802816
> 
> 赞同：4
> 
> 时间：2012-12-10T14:23:01.827
> 
> 标签：ruby-on-rails, rack, faye

我正在按照本教程进行操作：

[http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/](http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/)

我已经安装了 thin, faye 并在 faye.ru 文件中写了以下内容：

```
require 'faye'
bayeux = Faye::RackAdapter.new(:mount => '/faye', :timeout => 25)
bayeux.listen(9292) 
```

但是当我启动机架服务器时：

```
rackup faye.ru -E production -s thin 
```

服务器确实正确启动：

```
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop 
```

但是当我访问任何网页时，例如“http://localhost:9292/”，我会收到以下消息：

```
Sure you're not looking for /faye ? 
```

本教程和 Ryan Bates rails cast #260 都没有解释为什么会发生这种情况。有人有想法吗？

我必须说我的项目使用的是 ruby​​ 版本 1.8.7（我无法升级到 1.9，因为我使用的一些 gem 还不支持 1.9）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:39:23.580

好的，实际上一切正常，我只是不明白 Faye 应该做什么。

Faye 服务器并没有取代 Rails 服务器，而是对其进行了补充。我期待在 localhost:3000 和 localhost:9292 上看到同样的东西。

万一其他人像我一样感到困惑，您必须同时运行两个服务器：

导轨服务器：

```
 rails server [with your options if any] 
```

Faye 服务器处理 JS 频道：

```
 rackup faye.ru -s thin -E production 
```

并且用户仅与 rails 服务器交互（在端口 3000 上）并让 Faye 服务器在后台运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:29:14.030

您仍然应该使用端口 3000（除非您更改了默认端口或其他内容）。9292 只是用于 Faye 而已。

尝试去“http://localhost:3000”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T13:12:43.597

输出对我来说看起来不错。

尝试寻找

```
http://localhost:9292/faye.js 
```

代替

```
http://localhost:9292/ 
```

# grails - 没有这样的属性：在 grails 中安装 jasypt 时的 GormEncryptedStringType

> ID：13802818
> 
> 赞同：1
> 
> 时间：2012-12-10T14:23:07.927
> 
> 标签：grails, plugins, encryption, jasypt

我正在尝试`Jasypt plugin`在我的`grails project`. 我遵循了[wiki](https://bitbucket.org/tednaleid/grails-jasypt/wiki/Home)上描述的设置，但出现以下异常：

```
ERROR context.GrailsContextLoader  - Error executing bootstraps: Error evaluating ORM mappings block for domain [domain.Branch]:  No such property: GormEncryptedStringType for class: org.codehaus.groovy.grails.orm.hibernate.cfg.HibernateMappingBuilder
Message: Error evaluating ORM mappings block for domain [domain.Branch]:  No such property: GormEncryptedStringType for class: org.codehaus.groovy.grails.orm.hibernate.cfg.HibernateMappingBuilder 
```

有没有人知道如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:57:36.540

它可能就像缺少导入行一样简单：

```
import com.bloomhealthco.jasypt.GormEncryptedStringType 
```

# php - 如何删除php中的重复数据？

> ID：13802819
> 
> 赞同：1
> 
> 时间：2012-12-10T14:23:10.957
> 
> 标签：php, mysql

我有一个php问题，我喜欢使结果如下：

123*托马斯*蒂芙尼*凯瑟琳*恩恩*加布里埃尔*伊丽莎白*阿高*

但结果如下：

123*123*123*123*123*thomas*thomas*thomas*thomas*Tiffany*Tiffany*Tiffany*Tiffany*Catherine*Catherine*Catherine*Catherine*Catherine*EnEn*EnEn*EnEn*EnEn*Gabriel*Gabriel*Gabriel*Gabriel*加布里埃尔*伊丽莎白*伊丽莎白*伊丽莎白*伊丽莎白*阿哥*阿哥*阿哥*阿哥*阿哥*

任何人都可以告诉我如何解决这个问题？谢谢。

这是代码：

```
$name = $_POST['Username'];

$data = mysql_query("SELECT * FROM User");                 
$data1 = mysql_query("SELECT Friends.responseRequest FROM User INNER JOIN Friends ON 
            User.username = Friends.sentRequest WHERE User.username = '$name' AND     Friends.status = 'approved'")or die(mysql_error());; 

$data2=mysql_query("SELECT Friends.sentRequest FROM User INNER JOIN Friends ON User.username = Friends.responseRequest WHERE User.username = '$name'
                 AND Friends.status = 'approved'");   

    $user = array();
    while($info1 = mysql_fetch_array($data)){
    array_push($user, $info1[username]);
    }

$friend =array();
     $getFriend1 = mysql_query("SELECT * FROM Friends WHERE sentRequest='$name' AND status='approved'");
     $getFriend2 = mysql_query("SELECT * FROM Friends WHERE responseRequest='$name' AND status='approved'"); 

     while($info2 = mysql_fetch_array($getFriend1)){
    array_push($friend , $info2[responseRequest]);
    }

     while($info3 = mysql_fetch_array($getFriend2)){
    array_push($friend , $info3[sentRequest]);
    }

    $newFriend = array_unique($friend);
    $newUser=array();
    for($i=0;$i<count($user);$i++){
        for($j=0;$j<count($newFriend);$j++){
            if($newFriend[$j]!=$user[$i]&&$user[$i]!=$name){
                echo $user[$i]."*";
            }
        }

    }

    mysql_close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:25:42.990

一种简单的方法（不一定是最好的）是将结果拆分为一个数组，消除重复项，然后再次连接部分。

```
<?php
$str = '123*123*123*123*123*thomas*thomas*thomas*thomas*Tiffany*Tiffany*Tiffany*Tiffany*Catherine*Catherine*Catherine*Catherine*Catherine*EnEn*EnEn*EnEn*EnEn*Gabriel*Gabriel*Gabriel*Gabriel*Elizabeth*Elizabeth*Elizabeth*Elizabeth*Ah Goh*Ah Goh*Ah Goh*Ah Goh*Ah Goh*';
$aux = array_unique(explode('*', $str));
$str = implode('*', $aux); 
```

# c# - 窗口电话 7 错误

> ID：13802820
> 
> 赞同：0
> 
> 时间：2012-12-10T14:23:15.377
> 
> 标签：c#, windows-phone-7, compiler-errors, runtime-error

我有一个工作正常的项目，但今天我收到了这个错误......即使我创建新项目时，我也会收到相同的消息......我不明白是什么问题......

```
Error   1   The "CompileXaml" task failed unexpectedly.
System.IO.FileLoadException: Could not load file or assembly 'System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. Strong name validation failed. (Exception from HRESULT: 0x8013141A)
File name: 'System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' ---> System.Security.SecurityException: Strong name validation failed. (Exception from HRESULT: 0x8013141A)

The Zone of the assembly that failed was:
MyComputer
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark)
   at System.Reflection.Assembly.LoadFrom(String assemblyFile)
   at Microsoft.Silverlight.Build.Tasks.CompileXaml.LoadSilverlightAssemblies(String[] frameworkPaths)
   at Microsoft.Silverlight.Build.Tasks.CompileXaml.GenerateCode(ITaskItem item, Boolean isApplication)
   at Microsoft.Silverlight.Build.Tasks.CompileXaml.Execute()
   at Microsoft.Build.Framework.ITask.Execute()
   at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:50:53.803

Carl Saldanha 的最佳答案（阅读评论）

需要重新安装...

# jquery - jQuery 动画宽度同时变大和变小

> ID：13802821
> 
> 赞同：0
> 
> 时间：2012-12-10T14:23:18.410
> 
> 标签：jquery, jquery-animate, slide

我想将鼠标悬停在一个 div 上并使悬停的一个更大而另一个更小。它们是 50% 和 50%。悬停时发生的情况是屏幕小了一秒钟，您会看到下面的内容闪烁。我现在所做的是在悬停时将小 div 设置为 29.5%。不幸的是，这对我来说不是一个好的解决方案。如果可能的话，我想使用 70% 和 30%。

html

```
<div id="slider">
    <div id="slideLeft">
        <p>Left</p>
    </div>
    <div id="slideRight">
        <p>Right</p>
    </div>
</div> 
```

css

```
#slider{width:100%;min-height:450px;background-color:#999;}
#slideLeft{width:50%;float:left;background-color:#333;height:450px;}
#slideRight{width:50%;float:left;height:450px;background-color:#666;} 
```

js

```
$('#slideLeft').mouseenter(function(){
        $("#slideRight").animate({
           width: '30%'
        }, { duration: 200, queue: false });
        $("#slideLeft").animate({
           width: '70%'
        }, { duration: 200, queue: false });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:38:37.107

今天早上在不同的电脑和不同的浏览器上查看后，我发现了问题。问题是父母是 100%；它需要有一个 SET PIXEL 宽度。请看下面的例子：

[](http://jsfiddle.net/SpYk3/byJsP/)

# *[***jsFiddle***](http://jsfiddle.net/SpYk3/byJsP/)*

> ***脚本***

 *```
/*  This is simply the same as the document.onLoad func  */
$(function() {
    /*  Grab each element to be animated by a class name  */
    $(".sliders").mouseenter(function() {
        /*  Using .stop helps ensure a smoother animation (no lag backs)  */
        $(this).siblings(".sliders").stop().animate({ width: "30%" }, { duration: 200, queue: false });
        $(this).stop().animate({ width: "70%" }, { duration: 200, queue: false });
    });

    /* with the animation ready (tho you could start your ready func with this,
       set parent slider width on load to be pixals instead of 100 percent  */
    $("#Slider").width($("#Slider").width());
    /*  jQuery reutrns .width as pixels and sets integers as pixels,
        thus the simpl design here will take was initialized by 100% and turn into pixels  */

    /*  And just incase you need to maintain the size on browser window resizing:  */
    $(window).on("resize", function(e) {
        $("#Slider").width("100%");  /* The following line ensures you're set back to pixels
                                        and should elliminate all "flashes"  */
        setTimeout(function() { $("#Slider").width($("#Slider").width()); }, 100);
    });
}); 
```*

# php - 如何在后台运行自定义 Symfony2 命令

> ID：13802822
> 
> 赞同：8
> 
> 时间：2012-12-10T14:23:17.020
> 
> 标签：php, symfony

Symfony2 使开发人员能够创建自己的命令行命令。它们可以从命令行执行，也可以从控制器执行。根据官方 Symfony2 文档，可以这样做：

```
protected function execute(InputInterface $input, OutputInterface $output)
{
    $command = $this->getApplication()->find('demo:greet');

    $arguments = array(
        ...
    );

    $input = new ArrayInput($arguments);
    $returnCode = $command->run($input, $output);

} 
```

但在这种情况下，我们等待命令完成执行并返回返回码。

我怎样才能**从控制器**执行命令将其分叉到后台而不等待它完成执行？

换句话说，什么相当于

```
$ nohup php app/console demo:greet & 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-20T09:33:58.880

如果要创建后台进程，最好从文档中使用 start() 而不是 run()。如果您使用 run() 创建 process_max_time 可能会杀死您的进程

*“而不是使用 run() 来执行一个进程，你可以 start() 它：run() 正在阻塞并等待进程完成， start() 创建一个后台进程。”*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T15:37:16.607

根据文档，我认为没有这样的选项：[http ://api.symfony.com/2.1/Symfony/Component/Console/Application.html](http://api.symfony.com/2.1/Symfony/Component/Console/Application.html)

但是关于您要实现的目标，我认为您应该改用流程组件：

```
use Symfony\Component\Process\Process;

$process = new Process('ls -lsa');
$process->run(function ($type, $buffer) {
    if ('err' === $type) {
        echo 'ERR > '.$buffer;
    } else {
        echo 'OUT > '.$buffer;
    }
}); 
```

正如文档中提到的“如果您希望能够实时获得一些反馈，只需将匿名函数传递给 run() 方法”。

[http://symfony.com/doc/master/components/process.html](http://symfony.com/doc/master/components/process.html)

# mercurial - 如何在 mercurial 中清除分支？

> ID：13802823
> 
> 赞同：0
> 
> 时间：2012-12-10T14:23:29.417
> 
> 标签：mercurial

我是处理 mercurial 的新手。我在分支上做了一些乱七八糟的尝试，现在我想在一个“默认”中“扁平化”所有分支

```
josir@josir-desktop:~/bitbucket/campus$ hg branches
default                       27:f28e8d8773c6
15                            20:6b434f251b7e 
```

分支已经被推送到远程仓库。

我想清除所有其他分支，丢弃所有更改。阅读那些[教程](http://mercurial.selenic.com/wiki/PruningDeadBranches)，我无法确定修复它的最佳选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:47:18.847

最简单的方法是“关闭”不需要的分支并让它们安静下来：

```
hg update -r "branch('15')"
...
hg commit --close-branch 
```

如果您只有对远程仓库的推送/拉取访问权限，则在推送更改集后无法删除它们。所以关闭分支并继续前进，或者丢弃 bitbucket 存储库，清理本地存储库，然后重新开始。

为了清理你的本地仓库，如果你有一个很大的混乱，最简单的方法是选择一个好的修订版（例如，默认的提示，但你可以选择一个更早的版本）并克隆它及其所有祖先：

```
hg clone -r <goodrev> messy-repo new-repo 
```

[文档](http://mercurial.selenic.com/wiki/PruningDeadBranches)（您已经引用过）对此和其他几个分支修剪选项有很好的解释，但是在您推送到您无法控制的存储库后，它们都不合适*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:47:13.263

对于已经推送的分支，你没有任何自由：只有`--close-branch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:37:00.907

当我发出**hg branches**时，我得到了一个像上面这样的两列报告：

```
josir@josir-desktop:~/bitbucket/spo$ hg branches
dev                          232:31cf2690dd47 (inativo) 
```

我对此有何理解？

有 2 家分店 :(

那是我的大错。**只有一个分支：dev**

第二列“232:31cf ...”只是“dev”分支的最后一次提交！！！

# c# - Windows 服务忽略存储在注册表中的连接字符串中的 UID 和 PWD

> ID：13802824
> 
> 赞同：0
> 
> 时间：2012-12-10T14:23:31.660
> 
> 标签：c#, sql-server, registry, connection-string

我开发了一个 Windows 服务，它在注册表中存储和检索其 MSSQL 连接字符串。但是，我遇到的情况是，当我的服务尝试连接从注册表中检索到的字符串时，它公然忽略了指定的 UID 和 PWD。

然后我将应用程序编译并作为控制台应用程序运行，并且很自然地工作，因为控制台应用程序是使用我自己的用户帐户的权限运行的，而服务是使用本地系统帐户运行的。当我指定该服务应以我自己的用户帐户运行时，该服务成功连接到数据库。

我的结论是，当从注册表中检索应用程序时，出于某种原因，它会执行以下一项或两项操作：

*   忽略指定的 UID 和 PWD。
*   自动假定连接应在受信任模式下进行 (Trusted_Connection=true)

值得一提的是，我确实在注册表中存储的连接字符串中指定了 Trusted_Connection=false。

这是我的连接字符串：

```
SERVER=.\SQLEXPRESS;DATABASE=mydb;UID=myid;PWD=mypwd 
```

有没有人能够阐明这个问题？我非常希望能够利用存储在我的连接字符串中的用户 ID 和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:33:47.363

检查是否为标准安全配置了 SQL，因为指定用户名和密码将使用未集成的标准安全。因此，您不能使用 Windows 帐户以这种方式访问​​数据库。

另一种通常首选的方法是将您的服务作为 Windows 帐户运行并使用集成安全性进行访问。

[http://msdn.microsoft.com/en-us/library/aa266913(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa266913(v=vs.60).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:33:59.287

我认为您打开了 SQL Server 身份验证？

使用集成身份验证（推荐），您需要将服务运行方式帐户更改为具有 SQL Server 登录名的帐户。

IE

*   打开 Trusted_connection。只是......不要关闭它。
*   创建用户 DOMAIN\USR_MYSERVICE。
*   向该帐户授予适当的计算机和数据库权限。
*   将服务设置为以该帐户运行。

# javascript - 使用相机和 GPS 的 Android WebView

> ID：13802826
> 
> 赞同：1
> 
> 时间：2012-12-10T14:23:44.033
> 
> 标签：javascript, android, android-webview

我正在Android浏览器中使用WebView，但想知道是否有人将浏览器与html5一起使用来使用本地设备的相机和gps？或者我是否需要为此与 Java 源代码建立 Javascript 连接？

这也适用于IOS吗？

这是，不使用PhoneGap。

最好的，亨里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:58:31.527

可能有点晚了，但以防万一我会给你一个例子来做到这一点。（相机）

1////将此添加到您的 webChromeClient

```
myWebView.setWebChromeClient(new WebChromeClient() 
{
    public void openFileChooser( ValueCallback<Uri> uploadMsg, String acceptType ) 
    { 
        mUploadMessage = uploadMsg;
        Intent cameraIntent = new Intent("android.media.action.IMAGE_CAPTURE");
        Calendar cal = Calendar.getInstance();
        cal.getTime();
        SimpleDateFormat sdf = new SimpleDateFormat("HHmmss");
        File photo = new File(Environment.getExternalStorageDirectory(), sdf.format(cal.getTime()) +".jpg");
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
        picUri = Uri.fromFile(photo);
        startActivityForResult(cameraIntent, TAKE_PICTURE);                 
    }
}); 
```

2///添加这个函数

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch(requestCode)
    {
        case TAKE_PICTURE:
            if(resultCode == Activity.RESULT_OK)
            {
                Uri mypic = picUri;
                mUploadMessage.onReceiveValue(mypic);
                mUploadMessage = null;
            }
            else
            {
                mUploadMessage.onReceiveValue(null);
                mUploadMessage = null;
                return;
            }

        default:
        {
            return;
        }   
    }
} 
```

3// HTML 看起来像这样

```
<input type="file" id="files" name="files"  accept="image/*" capture="camera" > 
```

上面的代码将打开本机相机应用程序。

PS 这是来自不同来源的代码的混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T07:40:27.477

值得指出这里显示的代码应该放在哪里，因为它对于新手来说并不明显 - 它在您的 Activity 类中，即

```
public class MyActivity extends Activity {

    @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        ...
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {

        ...

        myWebView.setWebChromeClient(new WebChromeClient()
        {
            public void openFileChooser(ValueCallback<Uri> uploadMsg) {  
                ...
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T08:48:42.690

就我而言，我已经覆盖了该`makeWebViewEngine`方法，以便能够将`CordovaWebViewEngine`转换为 a`SystemWebViewEngine`如下（基于[此答案](https://stackoverflow.com/questions/14574248/custom-user-agent-string-or-header-without-modifying-cordova-libs)）：

```
public class MainActivity extends CordovaActivity {

    private static final int FILECHOOSER_RESULTCODE = 12345;

    private ValueCallback<Uri> mUploadMessage;

    private Uri mPicUri;

    private ValueCallback<Uri[]> mFilePathCallback;

    private String mCameraPhotoPath;

    @Override
    protected CordovaWebViewEngine makeWebViewEngine() {
        SystemWebViewEngine systemWebViewEngine = (SystemWebViewEngine) super.makeWebViewEngine();

        SystemWebView systemWebView = (SystemWebView) systemWebViewEngine.getView();

        systemWebView.setWebChromeClient(new SystemWebChromeClient(systemWebViewEngine) {
            // For Android 4.1
            public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) {
                mUploadMessage = uploadMsg;
                Intent cameraIntent = new Intent("android.media.action.IMAGE_CAPTURE");
                Calendar cal = Calendar.getInstance();
                cal.getTime();
                SimpleDateFormat sdf = new SimpleDateFormat("HHmmss");
                File photo = new File(Environment.getExternalStorageDirectory(), sdf.format(cal.getTime()) + ".jpg");
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                mPicUri = Uri.fromFile(photo);

                startActivityForResult(cameraIntent, FILECHOOSER_RESULTCODE);
            }

            // For Android 5.0+
            public boolean onShowFileChooser(
                    WebView webView, ValueCallback<Uri[]> filePathCallback,
                    WebChromeClient.FileChooserParams fileChooserParams) {

                // Double check that we don't have any existing callbacks
                if (mFilePathCallback != null) {
                    mFilePathCallback.onReceiveValue(null);
                }
                mFilePathCallback = filePathCallback;

                // Set up the take picture intent
                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                if (takePictureIntent.resolveActivity(MainActivity.this.getPackageManager()) != null) {
                    // Create the File where the photo should go
                    File photoFile = null;
                    try {
                        photoFile = createImageFile();
                        takePictureIntent.putExtra("PhotoPath", mCameraPhotoPath);
                    } catch (IOException ex) {
                        // Error occurred while creating the File
                        Log.e(TAG, "Unable to create Image File", ex);
                    }

                    // Continue only if the File was successfully created
                    if (photoFile != null) {
                        mCameraPhotoPath = "file:" + photoFile.getAbsolutePath();
                        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                                Uri.fromFile(photoFile));
                    } else {
                        takePictureIntent = null;
                    }
                }

                // Set up the intent to get an existing image
                Intent contentSelectionIntent = new Intent(Intent.ACTION_GET_CONTENT);
                contentSelectionIntent.addCategory(Intent.CATEGORY_OPENABLE);
                contentSelectionIntent.setType("image/*");

                // Set up the intents for the Intent chooser
                Intent[] intentArray;
                if (takePictureIntent != null) {
                    intentArray = new Intent[]{takePictureIntent};
                } else {
                    intentArray = new Intent[0];
                }

                Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);
                chooserIntent.putExtra(Intent.EXTRA_INTENT, contentSelectionIntent);
                chooserIntent.putExtra(Intent.EXTRA_TITLE, "Image Chooser");
                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);

                startActivityForResult(chooserIntent, MainActivity.FILECHOOSER_RESULTCODE);

                return true;
            }
        });

        return systemWebViewEngine;
    }

    // …

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Set by <content src="index.html" /> in config.xml
        loadUrl(launchUrl);
    }
} 
```

此外，基于[this other answer](https://stackoverflow.com/questions/28209785/android-exclude-some-camera-intent)，我必须`openFileChooser`为Android 4.1指定方法，对于Android 5.0+，我必须指定`onShowFileChooser`方法。

顺便说一句，我已将`onActivityResult`方法修改如下：

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (Build.VERSION.SDK_INT >= 21) {

            if (requestCode != FILECHOOSER_RESULTCODE || mFilePathCallback == null) {
                super.onActivityResult(requestCode, resultCode, intent);
                return;
            }

            Uri[] results = null;

            // Check that the response is a good one
            if (resultCode == Activity.RESULT_OK) {

                String dataString = intent.getDataString();
                if (dataString != null) {
                    results = new Uri[]{Uri.parse(dataString)};
                } else {
                    // If there is not data, then we may have taken a photo
                    if (mCameraPhotoPath != null) {
                        results = new Uri[]{Uri.parse(mCameraPhotoPath)};
                    }
                }
            }

            mFilePathCallback.onReceiveValue(results);
            mFilePathCallback = null;
        } else {
            if (requestCode == FILECHOOSER_RESULTCODE) {
                if (null == this.mUploadMessage) {
                    return;
                }

                Uri result;
                if (resultCode != RESULT_OK) {
                    result = null;
                } else {
                    result = intent == null ? this.mPicUri : intent.getData(); // retrieve from the private variable if the intent is null
                }

                this.mUploadMessage.onReceiveValue(result);
                this.mUploadMessage = null;
            }
        }
    } 
```

感谢@Will 和@Christian 在这个答案中指出好的方向顺便说一句:)

# android - 使用 facebook graph api 时发布的图像大小正在变化

> ID：13802827
> 
> 赞同：-1
> 
> 时间：2012-12-10T14:23:44.520
> 
> 标签：android

我使用图形 api 将消息和图像发布到 facebook 墙上。这是我使用的代码

```
if(i==1){   

        String res=  UrltoValue.getValuefromUrl("https://graph.facebook.com/"+Login.facebookid+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+strFullMessage.replaceAll(" ", "%20")+"&source="+imageUrl);
            Log.e("post response",res);
            if(res.contains("id")){
                Toast.makeText(getApplicationContext(), "successfully posted", Toast.LENGTH_SHORT).show();

            } 
```

消息和图片都发布成功，但是图片大小是缩略图。我使用了“source”和“picture”参数，但结果是一样的。

我从我的本地数据库中获取这些图像。我检查了该网址的图像大小，它是 240*320 大小，但它在我的 facebook 中以小尺寸显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:48:05.177

使用图形 api 发布到墙上将始终导致 facebook 选择的图像大小。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

这是为了保持饲料的均匀性。您可以根据需要发布任意大的图像，但它会在显示在提要中时调整大小。用户点击后可以查看更大的版本。

可以在从 facebook 查询时设置图像大小。看：

[https://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/)

# vim - 使用 gqG 时如何阻止 Vim 加入行？

> ID：13802834
> 
> 赞同：6
> 
> 时间：2012-12-10T14:23:55.283
> 
> 标签：vim, code-formatting

我有编写代码行太长的坏习惯，所以我终于开始在我的 .vimrc 中设置“colorcolumn=101”和 textwidth=100。

我希望能够追溯地将这些线宽限制应用于我已经编写的文件，并且我发现从文件顶部开始并按 gqG 可以解决问题。它将正确拆分太长的行，但如果它们适合 100 个字符，它也会将它们连接在一起。

所以如果一开始我有：

```
import java.io.File;
import java.io.IOException;
import java.util.Map; 
```

它会变成：

```
import java.io.File; import java.io.IOException; import java.util.Map; 
```

不过，我真的不想要加入线路的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:50:11.283

要打破长行，您可以使用`gqq`. 仅在长于 100 ( `:help /\%v`) 的行上将其与条件执行结合起来`:global`，如下所示：

```
:%global/\%>100v/normal! gqq 
```

`// ...`请注意，这可能仍会引入语法错误，例如在评论前导后换行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:12:32.050

或者，您可以使用外部程序来格式化您的代码。我建议结合 vim 插件**vim-autoformat** (https://github.com/Chiel92/vim-autoformat)使用**astyle (http://astyle.sourceforge.net/ 以及 ubuntu repo)。**

 **后者将第一个集成到 vim 中，这样当你按下 astyle 就会格式化你的代码`gqG`。**

# mysql - 无法在mysql中进行求和和除法

> ID：13802835
> 
> 赞同：1
> 
> 时间：2012-12-10T14:24:00.697
> 
> 标签：mysql, select

这是我的mysql查询

```
 SELECT IntervalStartTime,IFNULL(SUM(AbandonedCalls),0) AS AbandonedCallSum,SUM(QueueTime) AS QTS,SUM(RingTime) AS RTS,
IFNULL(SUM(AnsweredCalls),0) AS AnsweredCallSum
FROM intervalqueuestatistics
WHERE CallCenterId=17 AND DATE_FORMAT(IntervalStartTime,'%m')=10 AND DATE_FORMAT(IntervalStartTime,'%Y')=2012
GROUP BY DATE_FORMAT(IntervalStartTime,'%d'); 
```

现在我想计算一个值`(SUM(QueueTime)+SUM(RingTime))/SUM(AnsweredCalls)`

所以我相应地修改了我的查询，如下所示

```
 SELECT IntervalStartTime,IFNULL(SUM(AbandonedCalls),0) AS AbandonedCallSum,SUM(QueueTime) AS QTS,SUM(RingTime) AS RTS,
IFNULL(SUM(AnsweredCalls),0) AS AnsweredCallSum,IFNULL(SUM(QueueTime),0) + IFNULL(SUM(RingTime),0)/IFNULL(SUM(AnsweredCalls),0)
FROM intervalqueuestatistics
WHERE CallCenterId=17 AND DATE_FORMAT(IntervalStartTime,'%m')=10 AND DATE_FORMAT(IntervalStartTime,'%Y')=2012
GROUP BY DATE_FORMAT(IntervalStartTime,'%d'); 
```

但是当执行它并没有给我正确的答案。

例如此查询返回的行之一

```
 QTS    RTS   AnsweredCallSum CalculatedField 
188000  41645        9          192627.222 
```

但是CalculatedField是错误的，根据上面的计算应该是25516.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:27:19.663

如果 SUM(AnsweredCalls) 为 0，则您除以 0，它不应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:32:06.260

这将是我的猜测：

1.  使用，因此如果存在空列`IFNULL(..., 1)`，您永远不会除以。`0`
2.  显式使用括号，这样操作顺序就不会失败。（`sum1 + (sum2 / sum3)`当我*认为*你想要的时候，你目前正在表演`(sum1 + sum2) / sum3`）。记住乘法和除法在加法和减法之前没有括号。

```
( IFNULL(SUM(QueueTime), 0) + IFNULL(SUM(RingTime), 0) )
        / IFNULL(SUM(AnsweredCalls), 1) 
```

# html - HTML表格行（tr）：如何设置高度固定，等于最大高度元素

> ID：13802836
> 
> 赞同：0
> 
> 时间：2012-12-10T14:24:00.820
> 
> 标签：html, css, html-table

我的 html 页面中有一个表格。在里面，我有 trs 和 tds。

我的目标是以某种方式将每个 tr 的高度设置为与最大 tr 的高度相同。

例如：

我有 3 个 trs：在每个 tr 中我可以有一个图像。在第一个中，没有图像，在第二个中，图像是 20px 高度，第三个是 30px 高度。我的目标是将 3 trs 设置为 30px 高度 = 与最大图像的高度对齐。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:48:22.807

如果您`<tr>`事先知道最大高度，`tr`请在您的 CSS 文件中将所有 s 的高度设置为它：

```
tr {
   height: <INSERT-HEIGHT-HERE>px;
} 
```

# sql-server - SQL Server - 欧洲语言需要 NVARCHAR？

> ID：13802841
> 
> 赞同：0
> 
> 时间：2012-12-10T14:24:27.000
> 
> 标签：sql-server, internationalization, nvarchar

我们正在德国安装基于 Web 的应用程序（针对 SQL Server 2008 的 .NET）。我们正在使应用程序和数据库国际化。我意识到某些语言（例如在印度或中国）需要扩展字符集。这些扩展字符集需要 SQL Server 中的 NVARCHAR（而不是 VARCHAR）数据类型。

由于时间表已经很紧迫，我想在以后的版本中从 VARCHAR 过渡到 NVARCHAR。我已经研究过，但找不到这个问题的明确答案：

SQL Server 的 VARCHAR 数据类型会完全支持德语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:24:32.990

CHAR 的默认编码是`iso_1`，实际上是`ISO 8859-1`。该标准的[Wikipedia 页面](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)声明德语已被完全覆盖——但其他欧洲语言则没有。

所以如果你现在只关心德语，你可能会没事的。但实际上，您应该尽快迁移到 NVARCHAR！

# c# - protobuf-net 进入 .proto 会产生枚举冲突？

> ID：13802844
> 
> 赞同：7
> 
> 时间：2012-12-10T14:24:40.027
> 
> 标签：c#, c++, .net, protocol-buffers, protobuf-net

在 C# 中，我们从 protobuf-net 获得的 .proto 中有命名空间，但没有任何命名空间。所以问题是如何使 protobuf-net 生成（并在内部使用）带有命名空间/包的 .proto 文件。

例如，当我们解析所有项目以制作 .proto 文件以将 C++ 应用程序连接到我们的 C# 应用程序时，我们得到了大量的

```
enum AnimationCode {
   None = 0;
   Idle = 1;
   //...
} 
```

和

```
enum SessionCode {
   None = 0;
   //...
} 
```

因此，当我们将统一项目 .proto 文件提供给 protogen 编译器时，我们得到了大量

> 枚举类型“SessionStateCode”没有名为“None”的值。

和

> 请注意，枚举值使用 C++ 范围规则，这意味着枚举值是其类型的兄弟，而不是其子类型。

并且没有 C++ 代码。

重点是使编码的 C# 消息至少可以从 C++ 读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:56:54.430

protobuf-net 中目前没有任何代码来执行自动名称冲突修复，尽管我很想知道您是否有任何建议。另一种选择是：

```
 enum AnimationCode {
        [ProtoEnum(Name="AnimationCode_None")]
        None = 0,
        Idle = 1
    } 
```

这里，.proto 将`AnimationCode_None`在生成 scema 时使用；事实上，它将是：

```
enum AnimationCode {
   AnimationCode_None = 0;
   Idle = 1;
} 
```

我已经检查了`MetaType`/ API，[目前](https://stackoverflow.com/questions/13783894/mimic-protoenumattribute-with-protobuf-meta-interface)`ValueMember`看起来很难`.Name`在运行时设置，但如果您更愿意将它们设置[为](https://stackoverflow.com/questions/13783894/mimic-protoenumattribute-with-protobuf-meta-interface)运行时而不是用属性装饰。[`MetaType`](https://stackoverflow.com/questions/13783894/mimic-protoenumattribute-with-protobuf-meta-interface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:32:25.403

你试过这个吗？

```
package MyNamespace{
    enum AnimationCode {
       None = 0;
       Idle = 1;
       //...
    }
} 
```

# sql-server - 什么是适合数据库复制的数据类型？

> ID：13802845
> 
> 赞同：1
> 
> 时间：2012-12-10T14:24:38.673
> 
> 标签：sql-server

我正在使用 SQL Server 2008 创建数据库。

该数据库将在两个国家/地区使用，并且在某个时间（每天）它们将同步，我将使用复制服务来完成该操作。

大多数表都使用带有标识增量的 Int 列。但是部署时这些表将是空的，因此两个国家/地区将有一行标识为 1、2 和儿子。我以前从未使用过复制，所以我想知道表同步时是否会出现错误？

我应该改用 GUID 数据类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:28:42.373

[复制身份列](http://msdn.microsoft.com/en-us/library/ms152543.aspx)(MSDN)：

> 复制提供了三种身份范围管理选项：
> 
> *   自动的。用于合并复制和事务复制以及订阅服务器上的更新...
>     
>     
> *   手动的。用于快照和事务复制，而订阅服务器上没有更新...
>     
>     
> *   没有任何。仅出于向后兼容性建议使用此选项...

所以，是的，您可以继续使用`IDENTITY`，前提是您通读了有关复制的信息并选择了一个对您有意义的选项。

在自动下，它所做的是每个服务器获取一系列可用的身份值并根据需要分发各个值。如果同步发生得足够频繁，以至于范围没有完全耗尽，您将永远不会注意到这个细节。

这允许您稍后根据需要进行扩展 - 与例如`MOD`一个服务器分发奇数值而另一个服务器分发偶数值的方案相反 - 您不能轻易地将第三个服务器添加到这样的方案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:51:25.220

根据您的描述，听起来您想要实现所谓的合并复制。在 SQL Server 中，您不需要将标识更改为 GUID，但是，如果您不这样做，SQL Server 将自动为每个表添加另一个名为 rowguid 的列，您最终可能会得到原始标识列的重复项。为了避免这种情况，您可以让服务器分配 mod 2 ID。

在我看来，对 ID 完全使用 GUID 是最有意义的。不要忘记在您的身份列上设置 ROWGUIDCOL 属性。祝你好运。

相关 MSDN： [http ://technet.microsoft.com/en-us/library/ms152746.aspx](http://technet.microsoft.com/en-us/library/ms152746.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:30:29.643

考虑将 deviceID 字段添加到用户可以更新的所有表中。由于每个设备都使用自己的 ID 作为 PK 的一部分进行更改，因此设备之间不会发生冲突。

# utf-8 - Cakephp 2.0 变形器 slug 文本编码 utf 8 返回意外字符串

> ID：13802848
> 
> 赞同：0
> 
> 时间：2012-12-10T14:24:51.387
> 
> 标签：utf-8, cakephp-2.1, slug

`Inflector::slug();`我的实时服务器上的功能有问题。本地一切正常。

我使用以下代码：

```
Inflector::slug($data['menu_items']['page_url'], '_'); 
```

类似`'this is an url'`输出的 URL `'t_u_l'`。

它可能与文本编码有关，但我将所有内容都更改为 UTF-8。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:28:08.320

PHP 必须使用“--enable-unicode-properties”而不是 utf-8 编译

或/和

听起来您的 PCRE 库已损坏（当 pcre 库无法正确处理 unicode 模式时会发生这种情况）

# c# - 从本地组中删除域用户

> ID：13802849
> 
> 赞同：1
> 
> 时间：2012-12-10T14:24:54.507
> 
> 标签：c#, active-directory

帮助我试图从本地组中删除域用户，每次我尝试为域用户获取本地组时，集合都是空的。如何从我机器上的任何本地组中删除域用户。下面是我正在使用的代码，它适用于本地用户，但如上所述域用户它说他们没有本地组。我知道域用户位于本地计算机上的用户和 IIS_USRS 组中。

```
using (PrincipalContext localContext = new PrincipalContext(ContextType.Machine))
            {
                try
                {
                    foreach (GroupPrincipal principal in user.GetGroups(localContext))
                    {
                        principal.Members.Remove(user);
                        principal.Save(localContext);
                        principal.Dispose();
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:44:55.343

为了让它发挥作用，我最终不得不这样做。

```
using (PrincipalContext localContext = new PrincipalContext(ContextType.Machine))
            {
                try
                {
                    foreach (string g in groups)
                    {
                        using (GroupPrincipal localGroup = GroupPrincipal.FindByIdentity(localContext, IdentityType.Name, g))
                        {
                            foreach (Principal groupUser in localGroup.GetMembers().Where(groupUser => user.Name.Equals(groupUser.Name)))
                            {
                                localGroup.Members.Remove(groupUser);
                                localGroup.Save();
                            }
                        }
                    }
                } 
```

# iphone - 将 NSString 转换为 Int

> ID：13802850
> 
> 赞同：2
> 
> 时间：2012-12-10T14:25:01.307
> 
> 标签：iphone, objective-c

我尝试转换`NSString`为`int`，结果 dpPoint:0，我想要 dpPoint:2

```
dpPointStr = [NSString stringWithFormat:@"%@",[verifyRow valueForKey:@"default_point"]];
NSLog(@"dpPointStr:%@",dpPointStr); //Result dpPointStr:2

int dpPoint = [dpPointStr intValue];
NSLog(@"dpPoint:%i",dpPoint); //Result dpPoint:0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:43:02.097

In your case, if value is in the beginning/end of the string you can try this:

```
int val = [[dpPointStr stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]] intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:36:25.123

```
int str_len = [yourStr length]; char tmp[str_len];

[NSString getCString:tmp maxLength:str_len encoding:UTF8Encoding];

int dpPoint = atoi(tmp); 
```

不要忘记包括这个：#include

我认为这应该工作得很好。

另外，我认为您可以通过以下方式获取 intValue 来解决此问题：

```
[verifyRow valueForKey:@"default_point"]; 
```

为了与 Apple 保持一致，请改用 NSInteger，或者为 valueForKey 语句使用更好的 NSNumber，然后使用 NSInteger。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-16T12:08:09.337

将 NSString 转换为整数

```
NSString *sampleText = @"5";

int numValue = [sampleText intValue];

NSLog(@"Integer Value: %d", numValue); 
```

# javascript - 如何更改此旋转横幅的控件外观

> ID：13802863
> 
> 赞同：1
> 
> 时间：2012-12-10T14:25:50.227
> 
> 标签：javascript, css

我想更改此旋转横幅的控件外观。它们目前只是灰色的（当前/选定的一个是黑色的）。我希望这些点是白色的，带有灰色的轮廓（所选/当前的点是橙色的，带有灰色的轮廓）。

这是css（我相信选择器是：.rslides_tabs a）：

```
.rslides_container
{
    position: relative;
}

.rslides
{
    position: relative;
    list-style: none;
    overflow: hidden;
    width: 100%;
    padding: 0;
    margin: 0;
}

    .rslides li
    {
        position: absolute;
        display: none;
        width: 100%;
        left: 0;
        top: 0;
    }

    .rslides li:first-child
    {
        position: relative;
        display: block;
        float: left;
    }

        .rslides img
        {
            display: block;
            height: auto;
            float: left;
            width: 100%;
            max-width:  100%;
            border: 0;
        }

    .rslides_tabs
    {
        margin-top: 10px;
        text-align: center;
    }

        .rslides_tabs li
        {
            display: inline;
            float: none;
            _float: left;
            *float: left;
            margin-right: 5px;
        }

            .rslides_tabs a
            {
                text-indent: -9999px;
                overflow: hidden;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                -webkit-background-clip: padding-box;
                background: #ccc;
                display: inline-block;
                _display: block;
                *display: block;
                -webkit-box-shadow: inset 0 0 2px 0 rgba(0,0,0,.3);
                -moz-box-shadow: inset 0 0 2px 0 rgba(0,0,0,.3);
                box-shadow: inset 0 0 2px 0 rgba(0,0,0,.3);
                width: 9px;
                height: 9px;
            }

            .rslides_tabs .rslides_here a
            {
                background: #222;
            }

    .rslides_nav
    {
        position: absolute;
        -webkit-tap-highlight-color: #000;
        top: 50%;
        left: 0;
        -webkit-opacity: 0.7;
        -moz-opacity: 0.7;
        -o-opacity: 0.7;
        filter: alpha(opacity=70);
        opacity: 0.7;
        text-indent: -9999px;
        overflow: hidden;
        text-decoration: none;
        height: 61px;
        width: 38px;
        background: transparent url( '../images/responsiveslides.gif' ) no-repeat left top;
        margin-top: -45px;
    }

    .rslides_nav:active,
    .rslides_nav:hover
    {
        -webkit-opacity: 1;
        -moz-opacity: 1;
        -o-opacity: 1;
        filter: alpha(opacity=100);
        opacity: 1;
    }

    .rslides_nav.next
    {
        left: auto;
        background-position: right top;
        right: 0;
    } 
```

如果您需要更多代码来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:30:24.687

```
.rslides_tabs .rslides_here a 
```

是你目前所在的那个

```
.rslides_tabs a 
```

具有未选中的点的值。

将背景属性更改为您想要的颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:32:54.870

```
.rslides_tabs a {
  background-color:red;
  border: 1px solid grey;
//here goes your style
}

.rslides_tabs .rslides_here a {
  //here goes your style for the selected one
} 
```

# c++ - curl_multi_add_handle 和 curl_multi_perform 之间的标头内容类型更改

> ID：13802866
> 
> 赞同：0
> 
> 时间：2012-12-10T14:25:53.270
> 
> 标签：c++, curl, libcurl

我在 c++ 应用程序中创建了一个带有标题的 cURL 帖子：

```
CURL *curl = curl_easy_init();
curl_easy_setopt(curl, CURLOPT_URL, url.c_str());               
curl_easy_setopt(curl, CURLOPT_WRITEDATA, &bufferdata);     
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writerResponse);

struct curl_slist *headers=NULL;
char outputmessage[]="";            

headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Content-Type: application/json");
curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers );
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, cJSONstring.c_str());
curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, cJSONstring.length());
curl_easy_setopt(curl, CURLOPT_VERBOSE,1);
curl_easy_setopt(curl, CURLOPT_HEADER,1);
curl_easy_setopt(curl, CURLOPT_DEBUGFUNCTION, my_trace);

curl_multi_add_handle(m_telemetryCurlm, curl); 
```

我创建了一个线程来调用多执行：

```
void ContentManager::processTelemetry()
{
    m_telemetryThreadRunning = true;
    while(m_telemetryThreadRunning)
    {
        static_cast<ADCAnalytics*>(m_adcAnalytics)->performTelemerty();
        usleep(5000); 
    }   
}

void ADCAnalytics::performTelemerty()
{   
    // number of active downloads
    int counter = 0;

    // preform downloading
    curl_multi_perform(m_telemetryCurlm, &counter);     

    // handle CURL actions (connection errors, download finish, etc.)
    checkCURLMessages();    
} 
```

但是当我检查 curl 消息时，我得到：

12-10 13:23:00.845: I/ADC(17248): 缓冲区 = HTTP/1.1 400 错误请求

12-10 13:23:00.845: I/ADC(17248): X-TraceUrl: /appstats/details?time=1355145806563&type=json

12-10 13:23:00.845：I/ADC(17248)：内容类型：文本/纯文本

12-10 13:23:00.845：I/ADC(17248)：变化：接受编码

12-10 13:23:00.845：I/ADC(17248)：日期：2012 年 12 月 10 日星期一 13:23:26 GMT

12-10 13:23:00.845：I/ADC(17248)：服务器：谷歌前端

12-10 13:23:00.845：I/ADC（17248）：缓存控制：私有

12-10 13:23:00.845：I/ADC(17248)：传输编码：分块

似乎 curl_multi_add_handle 和 curl_multi_perform 之间的内容类型发生了变化。有人知道这里有什么问题吗？我该怎么做才能避免内容类型发生变化？

添加以下代码时

```
 do {
        while(curl_multi_perform(m_telemetryCurlm, &still_running) ==CURLM_CALL_MULTI_PERFORM);                                 
    } while (still_running); 
```

设置 cURL 对象后立即。请求被发送到服务器，我得到

12-10 13:11:48.105: I/ADC(16845): 缓冲区 = HTTP/1.1 200 OK

12-10 13:11:48.105: I/ADC(16845): X-TraceUrl: /appstats/details?time=1355145133776&type=json

12-10 13:11:48.105：I/ADC(16845)：内容类型：应用程序/json

12-10 13:11:48.105：I/ADC(16845)：变化：接受编码

12-10 13:11:48.105：I/ADC(16845)：日期：2012 年 12 月 10 日星期一 13:12:13 GMT

12-10 13:11:48.105：I/ADC(16845)：服务器：谷歌前端

12-10 13:11:48.105：I/ADC（16845）：缓存控制：私有

12-10 13:11:48.105: I/ADC(16845): Transfer-Encoding: chunked
所以，我不相信服务器端有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:35:04.143

Aren't you comparing the Content-Type you SEND with the one you RECEIVE?

# android - 如何修改 AOSP 以允许特定应用获得 root 访问权限？

> ID：13802869
> 
> 赞同：15
> 
> 时间：2012-12-10T14:25:59.743
> 
> 标签：android, c, linux-kernel, root, android-source

我正在研究**AOSP**。我已成功将我的 apk 添加到构建中。现在我想授予对我的应用程序的 root 访问权限。我不想提供对其他应用程序的 root 访问权限或在我的构建中安装超级用户应用程序。我只想添加我的应用程序以获取 root 访问权限。我怎样才能做到这一点？

我浏览了路径**system/extras/su中的****su.c**文件，但我无法理解整个代码。

 **当我浏览代码时，我认为如果我可以`modify` **su.c**`compile it and add the binary`为我的应用程序和构建提供 root 访问权限，我的目标就可以实现。我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T12:12:42.977

你正朝着正确的方向前进。您需要检查源代码`su.c`您可能面临的唯一问题是如何以 root 身份运行您的程序。为此，您需要为应用程序的可执行文件设置 SUID 粘性位。为此，您需要修改`system/core/include/private/android_filesystem_config.h`文件（结构`android_files[]`），例如对于 su 程序，您可以看到该位是如何设置的：

```
{ 06755, AID_ROOT,      AID_ROOT,      "system/xbin/su" }, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:43:09.683

ChainFire 编写了[一份关于 su](http://su.chainfire.eu/#how)以及如何将其用于普通应用程序的指南。如果您打算使用自己的手机以外的任何东西，我建议这是您遵循的方法。**

# php - 将一些 PHP 代码转换为 javascript（foreach 等价物）

> ID：13802870
> 
> 赞同：-1
> 
> 时间：2012-12-10T14:25:59.600
> 
> 标签：php, javascript, foreach

> **可能重复：**
> [对于数组中的每个。如何在javascript中做到这一点？](https://stackoverflow.com/questions/9329446/for-each-in-a-array-how-to-do-that-in-javascript)

嘿，我需要一些帮助来为从 PHP 到 javascript 的每个等价物找到一个好的。我试过使用 jQuery.each() 但我不确定我是否正确地完成了它。

这是我一直需要转换的代码。我需要将每个 foreach 修复为 javascript。

```
if(calculate){
    // got complete, calculate possible solution
    // use decimals?  Does this work in the form?
foreach(values as valName1 => val1){
    foreach(operands as op1){
        foreach(values as valName2 => val2){
            if(valName2 == valName1)
                continue;
            foreach(operands as op2){
                foreach(values as valName3 => val3){
                    if(valName3 == valName1 ||
                       valName3 == valName2)
                        continue;
                    foreach(operands as op3){
                        foreach(values as valName4 => val4){
                            if(valName4 == valName1 ||
                               valName4 == valName2 ||
                               valName4 == valName3)
                                continue;
                            foreach(operands as op4){
                                foreach(values as valName5 => val5){
                                    if(valName5 == valName1 ||
                                       valName5 == valName2 ||
                                       valName5 == valName3 ||
                                       valName5 == valName4)
                                        continue;
                                    parentheses = -1;
                                    if(solve(val5, op4, val4, op3, val3, op2,
                                             val2, op1, val1, solution, parentheses)){
                                        count++;
                                            // Note that since solve() just returns the first result, we won't
                                            // display all possible parentheses ordering when there are multiple
                                            // solutions
                                        if(find_all){
                                            document.write(Solution(val5, op4, val4, op3, val3, op2,
                                                          val2, op1, val1, solution, parentheses, find_all);
                                        }
                                        else{
                                            document.write(Solution(val5, op4, val4, op3, val3, op2,
                                                          val2, op1, val1, solution, parentheses, find_all);
                                            break;
                                        }
                                    }
                                    parentheses = -1;
                                }
                                parentheses = -1;
                                if(!find_all && count) break;
                            }
                            if(!find_all && count) break;
                        }
                        if(!find_all && count) break;
                    }
                    if(!find_all && count) break;
                }
                if(!find_all && count) break;
            }
            if(!find_all && count) break;
        }
        if(!find_all && count) break;
    }
    if(!find_all && count) break;
}

if(!count || find_all){
    document.write( "Found " . count . " solutions.";
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:32:37.380

如果您正在寻找`foreach`处理数据集的函数（例如），这[`underscore.js`](http://underscorejs.org/)是一个不错的选择。

# c# - datagridview 插入图片动态 #2

> ID：13802871
> 
> 赞同：0
> 
> 时间：2012-12-10T14:26:03.720
> 
> 标签：c#, winforms

> **可能重复：**
> [带有图像的datagridview动态](https://stackoverflow.com/questions/13803090/datagridview-dynamic-with-image)

他喜欢帮我动态创建一个datagridview。C# Windows 窗体

目标是 ping IP 或主机名的成功列表，以及是否插入网格（主机、日期和图像红色或绿色），具体取决于响应。

我有这个写网格的函数，但是如果一个 ping 不成功，他把所有其他的都放在`Redball`.

```
private void TabelaDinamimca(bool sucesso,string host, string data)
{
    GridView1.ColumnCount = 3;

    GridView1.Columns[1].Name = "host";
    GridView1.Columns[2].Name = "data";
    DataGridViewImageColumn img = new DataGridViewImageColumn();
    string path = (sucesso == true 
                  ? @"C:\TestFolder\greenBall.png" 
                  : @"C:\TestFolder\redBall.png");
    Image image = Image.FromFile(path);
    img.Image = image;
    GridView1.Columns.Add(img);
    string[] row = new string[] { host, data };
    GridView1.Rows.Add(row);
    GridView1.Show();
} 
```

注意：在调试模式下，bool sucesso case`Erro`为 false

解决方案

```
private void TabelaDinamimcaSucess(bool sucesso, int index, string host, string data, string tempo,string status)
    {

       string[] row = new string[] { index.ToString(), host, data, tempo,status };
       dataGridView1.Rows.Add(row);

        int number_of_rows = dataGridView1.RowCount -1;

        Bitmap b = new Bitmap((sucesso == true ? Properties.Resources.greenBall : Properties.Resources.redBall));
        Icon icon = Icon.FromHandle(b.GetHicon());

        dataGridView1.Rows[number_of_rows].Cells["img"].Value = icon;

        dataGridView1.Show();
    } 
```

# android - Android SDK 或 JDK

> ID：13802872
> 
> 赞同：0
> 
> 时间：2012-12-10T14:26:03.503
> 
> 标签：android, eclipse, gwt, cordova, mgwt

我有一个 Eclipse 项目，其中有 2 个入口点：一个 GWT Web 应用程序和一个 mGWT+phonegap(+Android) 移动应用程序。有在同一个项目下，因为它们是基于相同的Java代码。调试让我怀疑在 Web 应用程序中，使用的是 Android 实现，而不是 JDK 实现。为什么，因为在调试过程中，我必须选择正确的 java 文件（例如 Float.java）。如何确保 Web 应用程序不使用 Android 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:56:34.920

GWT 项目中不需要您的 Android-SDK。不要将它包含在您的 Web 项目中。

拆分两个项目并将源文件与链接文件夹链接。

1.  具有两个入口点的 GWT 应用程序

2.  安卓原生应用

在您的 Android 项目中，您可以从 GWT 应用程序链接该文件夹：http: [//deviltechie.wordpress.com/2010/12/06/linking-an-external-folder-to-eclipse-flex-builder-project/](http://deviltechie.wordpress.com/2010/12/06/linking-an-external-folder-to-eclipse-flex-builder-project/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:49:55.860

我不相信可以做到。

将项目拆分为最佳实践

```
main project
 subproject 1 ( common code )
 subproject 2 ( entrypoint gwt webapp)
 subproject 3 ( entrypoint android) 
```

这将确保确保顶级模块化、可测试性和任何像您这样的不利调试/部署场景。不良的库管理很可能会导致生产问题。

您可以选择 maven（gwt 得到很好的支持）或 ivy 或任何其他工具来简化您的构建。

# sql - 插入 if 条件以防万一

> ID：13802877
> 
> 赞同：1
> 
> 时间：2012-12-10T14:26:24.947
> 
> 标签：sql, sql-server, tsql, syntax

在我的 sql 脚本中，我有这个：

```
insert into @res
    select
    case
            when x = 'tblDoll' then (...)
            when x = 'tblCar' then (...)
            when x = 'tblRocket' then
                if rel_table_id = @old_id
                    (select x.price from tableInDb x where x.id = rel_table.toy_id)
    end
        from rel_table
        where my_toy_id = @toy_id 
```

@old_id 是一个输入参数。

但是 if 中的某些内容返回语法错误。rel_table_id 是 rel_table 的 id。如何在那里放置if条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:32:01.940

`JOIN`这两个表，具有更多的嵌套`CASE`表达式，如下所示：

```
INSERT INTO @res
SELECT 
  CASE
    WHEN x = 'tblDoll'               THEN  (...)
    WHEN x = 'tblCar'                THEN  (...)
    WHEN x = 'tblRocket'             THEN  
      CASE WHEN rel_table_id = @old_id THEN  x.price END
  END
FROM rel_table t1
INNER JOIN tableInDb x ON x.id = rel_table.toy_id 
```

# iphone - 错误：使用 FBConnect 在 facebook 上发布图像

> ID：13802878
> 
> 赞同：1
> 
> 时间：2012-12-10T14:26:28.497
> 
> 标签：iphone, ios, facebook, fbconnect

我正在使用 FBConnect 在 facebook 上发布图片。我的代码如下：

```
- (void) postOnPage
{
    [self saveAccessTokenKeyInfo];

    //post image on wall

    UIImage *img = [UIImage imageNamed:@"image1.png"];
    NSData *data = UIImagePNGRepresentation(img);

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"My hat image", @"message", data, @"source", nil];

    [facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self];

} 
```

和

```
-(void)request:(FBRequest *)request didFailWithError:(NSError *)error{
    NSLog(@"%@", [error localizedDescription]);
    NSLog(@"Err details: %@", [error description]);

    // Stop the activity just in case there is a failure and the activity view is animating.

} 
```

我的控制台打印以下错误日志

```
The operation couldn’t be completed. (facebookErrDomain error 10000.)
2012-12-10 19:53:56.153 HatApplication[5724:c07] Err details: Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x7fc4da0 {error=<CFBasicHash 0x7fc1120 [0x1b57b48]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0x7fc0930 [0x1b57b48]>{contents = "type"} = <CFString 0x7fc30f0 [0x1b57b48]>{contents = "OAuthException"}
    3 : <CFString 0x7fc0d10 [0x1b57b48]>{contents = "message"} = <CFString 0x7fc0cf0 [0x1b57b48]>{contents = "An active access token must be used to query information about the current user."}
    6 : <CFString 0x7f76390 [0x1b57b48]>{contents = "code"} = 2500
}
} 
```

我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:04:55.613

在您的方法中尝试这些行：

```
[self saveAccessTokenKeyInfo];
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"image1" ofType:@"png"];
NSData *videoData = [NSData dataWithContentsOfFile:filePath];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"My hat image", @"message", data, @"source", nil];

[facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

# javascript - 这个正则表达式可能吗？

> ID：13802879
> 
> 赞同：2
> 
> 时间：2012-12-10T14:26:31.293
> 
> 标签：javascript, regex

我对正则表达式还是很陌生。我想要的东西可以正常做吗，还是我必须做一些诡计？

我想在每组大括号之间获取不在一组大括号之间的所有内容。这就是我的意思。

```
{ This is {a} test }  { this {is a{ also a } } } test } 
```

我想要一个正则表达式返回

```
['This is {a} test', 'this {is a{ also a } } } test' ] 
```

这可能吗？

**编辑：**

我正在用 Javascript 做这个。我需要这个的原因是我得到一个看起来像这样的字符串：

```
{ user entered value 1} {user entered value 2 }..... 
```

我需要获取所有用户值。我只需要注意用户输入“}”并得到这样的字符串的情况

{这是{a}问题} {这{{会}}}}也是}

**编辑 2**

我决定重新设计我做事的方式。我不再需要这个正则表达式，但感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:28:29.183

使用标准正则表达式是不可能的。

为此，您必须计算大括号的嵌套级别，但使用正则表达式无法计算任意嵌套。如果您愿意限制最多*n 个*嵌套级别，那么可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:44:27.650

You can do it but checking for balanced round brackets is tricky but **not** impossible

You can try this

```
{[^}]*({[^}{]*})?[^{]*}
      -----------
           |
           |->starting from the center.. 
```

* * *

Using `regex` for such problems is not a good choice..

You are better off with your own `parser`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:08:34.387

如果你仍然想这样做，你可以将正则表达式与`split`函数结合起来返回一个值数组，例如：

```
str = '{ This is {a} test }  { this {is a{ also a } } } test }{ this }  test }'; 
```

这会从字符串中删除第一个和最后一个大括号（使用`replace`），然后根据`} {`（右大括号后跟零个或多个空格，然后是左大括号）拆分它

```
arr = str.replace(/^\s*\{|\}\s*$/g,'').split(/\}\s*\{/); 
```

返回一个数组：

```
arr = [" This is {a} test ", " this {is a{ also a } } } test ", " this }  test "] 
```

# c++ - 如何将 STL 映射保存到文件 C++

> ID：13802889
> 
> 赞同：4
> 
> 时间：2012-12-10T14:27:13.660
> 
> 标签：c++, map, fstream

我正在尝试使用地图将数据安全地归档，但我不知道如何。我想将学生的姓名和年龄保存到文件中，然后当我查找学生的姓名时，它应该显示他们的年龄。

```
#include <iostream>
#include <map>
#include <fstream>
#include <string>

using namespace std;

class student {
private:
    map<int, string> map;
public:
    void students(string name, int age);
};

void students(string name, int age) {
    if (age < 1) {
        cout << "You must enter a positive number." << endl;
        return;
    }
}

void main() {
    ofstream filemap;
    filemap.open("map.txt");
    int age;
    string name;
    cout << "Please enter the name : " << endl;
    cin >> name;
    cout << "Please enter the age : " << endl;
    cin >> age;

// code to save map to file 

    filemap.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:29:35.400

首先确定数据将如何以字节级别存储在文件中。例如，它可能是：

1.  每个学生在文件中只占一行。

2.  行由单个换行符分隔。

3.  每行包含一个引号、学生姓名、引号、逗号和学生年龄。

然后，您需要编写代码以该格式输出并从该格式读取。请注意，如果名称包含引号，这将中断。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T14:34:25.693

你需要改进你的代码。将 getter 和 setter 添加到您的学生班级，因为现在无法写入班级内的地图。例如，添加一个方法，让您将学生信息推送到私人地图成员中。

然后我建议学习提升序列化：http: [//www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)

如果您想要更简单的方法，请了解 std::fstream 库。

# jquery - Flexslider 停止在 Safari 中显示

> ID：13802892
> 
> 赞同：1
> 
> 时间：2012-12-10T14:27:22.540
> 
> 标签：jquery, safari, carousel, flexslider

我目前正在使用 Flexslider 2.1，而 Safari 5.1.7 使用 Flexslider 作为带有缩略图和幻灯片的轮播。

我的幻灯片中有 58 张图片，它在除 Safari 之外的所有浏览器中都能正常工作。幻灯片显示到图像#38，然后只显示图像的一半（另一半在那里，但不可见）。之后，其余图像根本不显示。它们在那里，我可以右键单击空白区域并将图像保存到桌面。它不会显示。

我正在使用`OnLoad`.

无论我是在本地主机还是在线服务器上，它都会这样做。

图像文件夹的总大小为 4 MB。

Safari 是否有某种限制？

我在论坛里找了高低，我确实发现了大约一半的图像显示，并恢复到2.0，但这并没有。

更新：

幻灯片和缩略图设置为动画：“幻灯片”

将幻灯片的动画类型更改为“淡化”所有图像应显示的内容，将幻灯片的动画类型更改回“幻灯片”，问题再次出现。

我还尝试将图像压缩得更小，没有任何区别，并重新排列图像的顺序，没有任何区别，第 38 张图像仍然被切成两半，从那里开始没有任何显示。

# java - 无线推送 android 电子邮件设置

> ID：13802893
> 
> 赞同：0
> 
> 时间：2012-12-10T14:27:22.667
> 
> 标签：java, android, email, push

我有一个移动设备管理器服务，我希望我能够通过无线方式将电子邮件设置推送到安卓设备。

是否可以通过无线方式发送 imap 和 pop 的帐户设置？类似于您可以在 iOS 移动设备管理器 API 中执行的操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:40:31.470

Android是一个操作系统。操作系统没有电子邮件帐户设置的概念。相反，电子邮件应用程序具有电子邮件帐户设置。

欢迎您汇总所有可用于 Android 的电子邮件应用程序列表——可能有一百个左右，来自 Google 的、来自设备制造商的以及来自第三方的。然后，您可以遍历该列表，联系每个开发人员，看看他们是否为您提供了一些“无线发送帐户设置”的方法。我怀疑您通常会发现答案是否定的，但问也无妨。

# api - REST API 中日期的首选字符串格式是什么

> ID：13802902
> 
> 赞同：3
> 
> 时间：2012-12-10T14:27:55.193
> 
> 标签：api, http, rest, date

对于 REST API，请求和响应数据的首选日期字符串格式是什么？

我正在考虑 ISO 8601 或 RFC 1123：

```
 ISO 8601: 2008-02-01T09:00:22+05:00
 RFC 1123: Mon, 10 Dec 2012 14:25:01 GMT 
```

每个人的优点和缺点是什么？还有其他选择吗？其他流行的 REST API 使用什么格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:29:11.970

ISO8601 看起来更有用。从此[文档](http://www.hackcraft.net/web/datetime/#issue)（包含许多记录格式、用法和优点/缺点）：

1.  大多数开发人员都熟悉它
2.  这是明确的
3.  当排序为字符串或八位字节串时，它们将被排序，就好像它们已被排序为日期时间一样。

# ios - 停止 NSString 本地化StringWithFormat 放置逗号

> ID：13802903
> 
> 赞同：1
> 
> 时间：2012-12-10T14:28:00.680
> 
> 标签：ios

NSString 本地化StringWithFormat 用逗号分隔数千。你如何阻止它这样做。例如返回 5000.25 而不是 5,000.25（只有小数分隔符）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:39:22.360

`localizedStringWithFormat`使用系统的语言环境来格式化数字。您想要的是覆盖默认语言环境 - 使用`initWithFormat:locale:`它。基本上，它是相同的功能，但您还提供了设置文本格式的语言环境。

另外，请记住，`initWithFormat:locale:`它还保留了字符串（而不是`localizedStringWithFormat`.

在这里检查它们[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:59:45.897

通过使用 NSNumberFormatter 并将其 groupingSize 属性设置为 0，设法获得所需的行为。然后使用 stringFromNumber 方法。

# python - python中只有原始数据类型的最接近的十个整数对

> ID：13802906
> 
> 赞同：1
> 
> 时间：2012-12-10T14:28:17.410
> 
> 标签：python, closest-points

我真的需要代码方面的帮助。用户需要输入 10 个整数，程序必须显示最接近的对。我可以使用 itertools 来完成，但我的教授不会接受 .sort()、min()、enumerate() 等......我需要手动完成。这是我能够使用 itertools 制作的代码：

```
import itertools

a = [0,1,2,3,4,5,6,7,8,9]

a[0]=input()
a[1]=input()
a[2]=input()
a[3]=input()
a[4]=input()
a[5]=input()
a[6]=input()
a[7]=input()
a[8]=input()
a[9]=input()

a.sort()

for item in enumerate(a):             
c = min(itertools.combinations(b, 2),
                   key=lambda item: abs(item[0]-item[1]))

print 'The closest pair/One of the closest pair is: ', c 
```

对于手动最近配对程序，这是我到目前为止的代码：

```
a=[0,1,2,3,4,5,6,7,8,9]
a[0]=input()
a[1]=input()
a[2]=input()
a[3]=input()
a[4]=input()
a[5]=input()
a[6]=input()
a[7]=input()
a[8]=input()
a[9]=input()

#Sorting the Array
b = True             #para sa swapping
while b==True:
b= False
for i in range(0,len(a)-1):
    if (a[i]>a[i+1]):
        c=a[i]
        a[i]=a[i+1]
        a[i+1]=c
        b=True

#Generate all the posible combinations of 
```

无论我多么努力和研究，我都无法完成它。我将不胜感激任何帮助......

谢谢，艾琳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:45:57.337

我认为您的教授拒绝使用`itertools.combinations()`不必要的低效答案并非不合理。您不需要查看所有组合，如果您对数组进行排序，那么您需要做的就是找到相邻项目之间的最小差异，并且这些项目是最接近的对。

所以问题归结为您是否被允许使用`.sort()`（如果不是，您将不得不实现自己的排序算法）以及您是否知道如何编写一个循环来找到相邻值之间的最小差异。我会把这两个作为练习留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:20:59.853

检查这个，我认为它对你有好处。

```
# fill the array with input
a = [int(num) for num in raw_input().split(" ")]

# REVERSE sorting the array
for j in range(len(a) - 1, -1, -1):
    for i in range(0, j):
        if (a[i] < a[i+1]):
            c = a[i]
            a[i] = a[i+1]
            a[i+1] = c

min = a[0] + a[1]

for i in range(0, len(a) - 1):    
    if min > a[i] - a[i + 1]:
        min = a[i] - a[i + 1]

print min 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:43:08.407

您可以通过查看每个数字，然后查看可以与之配对的每个（其他）数字来非常低效地做到这一点。在迭代每个可能的对后，您可以只返回最近的对。

```
numbers = [7,15,0,4,3,12,76]

def pair_distance(pair):
    return abs(pair[0] - pair[1])

closest_pair = None

for i, number1 in enumerate(numbers):
    for j, number2 in enumerate(numbers):
        if i != j: #Otherwise we'd always have numbers[0], numbers[0] as pair!
            pair = number1, number2
            if closest_pair is None or pair_distance(pair) < pair_distance(closest_pair):
                closest_pair = pair

print "The closest pair is", closest_pair 
```

* * *

我的错，我错过了不允许枚举：

```
i = -1
j = -1
for number1 in numbers:
    i += 1
    for number2 in numbers:
        j += 1
        if i != j: #Otherwise we'd always have numbers[0], numbers[0] as pair!
            pair = number1, number2
            if closest_pair is None or pair_distance(pair) < pair_distance(closest_pair):
                closest_pair = pair 
```

* * *

由于这是家庭作业，因此我建议您在上交之前尝试了解为什么这样做会起作用以及为什么效率低下！

正如评论中所建议的，首先对列表进行排序可以为您提供更有效的解决方案。

* * *

但是，我认为您可能不应该使用 Python 来完成这项任务。在高级语言中使用低级结构没有太大的学习价值。

# coldfusion - 在 CFC 噩梦中使用 CFFILE

> ID：13802909
> 
> 赞同：1
> 
> 时间：2012-12-10T14:28:21.077
> 
> 标签：coldfusion, cffile

我知道有人问过这个问题，但我似乎找不到有效的解决方案。

我有一个 CFM 页面，它使用以下内容将数据传递给 CFC

```
<cfinvoke 
component="common.cfcs.geotrails"
method="UpdateGeoTrail">
<cfinvokeargument name="title" value="#form.title#"/>
<cfinvokeargument name="Description_short" value="#form.Description_short#"/>
<cfinvokeargument name="Description" value="#form.description#"/>
<cfinvokeargument name="GTID" value="#form.gtid#"/>
<cfinvokeargument name="CatID" value="#form.catid#"/>
<cfif structKeyExists(form,"fileUpload") and len(form.fileUpload)>
<cfinvokeargument name="fileUpload" value="#form.fileUpload#"/>
</cfif>
</cfinvoke> 
```

在接收数据的 CFC 中，我按照[Adob​​e Cookbook中的指示进行操作](http://cookbooks.adobe.com/post_How_do_I_use__cffile_action__upload___inside_a_CFC-18044.html)

```
<cffunction name="UpdateGeoTrail" access="public" returntype="void">
<cfargument name="title" type="string" required="yes">
<cfargument name="Description_short" type="string" required="yes">
<cfargument name="Description" type="string" required="yes">
<cfargument name="GTID" type="numeric" required="yes">
<cfargument name="CatID" type="numeric" required="yes">
<cfargument name="fileUpload" type="string" required="no">

<!--- IF THE IMAGE HAS BEEN UPLOADED --->
<!--- set the full path to the images folder --->
<cfif isdefined("arguments.fileUpload") AND len(arguments.fileUpload)>
<cfset tempmediapath = "#expandPath('/')#media/gtimages/temp/">
<cfset mediapath = "#expandPath('/')#media/gtimages/">

<cfset var cffile = "">
<cffile action="upload"
filefield="#ARGUMENTS.fileUpload#"
destination="#TempMediaPath#"
nameconflict="makeunique">
... 
```

但我仍然收到可怕的错误信息......

“表单字段 /data/disk01/opt/coldfusion9/runtime/servers/coldfusion/SERVER-INF/temp/wwwroot-tmp/neotmp5003883285207133802.tmp 不包含文件。”

如果我按照 StackExchange 的说明进行操作（[CFFILE - 使用组件上传文件](https://stackoverflow.com/questions/7852252/cffile-uploading-a-file-using-a-component)）

```
<cffile action="upload"
filefield="fileUpload"
destination="#TempMediaPath#"
nameconflict="makeunique"> 
```

它通过没有错误，但`<CFDUMP>`显示：[空字符串]。

我错过了什么。

谢谢。

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:20:33.760

By removing the cffile scope, I was able to get it to work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:18:03.700

我知道它不是您的 cfc 的一部分，但您是否确保该表单设置了 enctype？

```
<cfform action="/upload.cfm" enctype="multipart/form-data"> 
```

# javascript - JSF 属性标签内的值

> ID：13802912
> 
> 赞同：3
> 
> 时间：2012-12-10T14:28:29.053
> 
> 标签：javascript, jsf

如何将 JS 值传递给组件内的属性嵌套标签？

我有这个代码：

```
<p:remoteCommand .....>
    <f:attribute name="galaxie" value="jstest()" />
</p:remoteCommand> 
```

还有我的简单 JS`jstest`函数：

```
function jstest(){
    return "foo";
} 
```

当我在 backing bean 中测试 galaxie 的属性值时，我`jstest()`没有`foo`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:38:59.243

这`<f:attribute>`是一个 JSF 标记，它在生成 HTML 代码期间在网络服务器中运行。JavaScript 是一种客户端语言，它不在网络服务器中运行，而是在检索到所有 JSF 生成的 HTML 代码后在网络浏览器中运行。然而，您似乎期望它们“同步”运行。因此这是不正确的。

为了实现您的想法，您基本上需要提供`<h:inputHidden>`绑定到 bean 属性的哪个，并让 JS 在触发远程命令请求之前填充它。

例如

```
<h:form id="form">
    <h:inputHidden id="galaxie" value="#{bean.galaxie}" />
    <p:remoteCommand ... onstart="$('#form\\:galaxie').val(jstest())" process="@form" ... />
</h:form> 
```

或者，更简单的方法是将其作为远程命令函数参数传递，该参数接受表示请求参数映射的 JS 对象。给定一个

```
<h:form>
    <p:remoteCommand name="foo" ... />
</h:form> 
```

你可以这样做：

```
foo({ galaxie: jstest() }); 
```

`@ManagedProperty`您可以通过或来收集它`ExternalContext#getRequestParameterMap()`。

* * *

**更新**：自 PrimeFaces 3.3 起，`<p:remoteCommand>`函数中参数的语法发生了变化。如果您至少使用 PrimeFaces 3.3，则函数调用应如下所示：

```
foo([{ name: 'galaxie', value: jstest() }]); 
```

另请参阅[从 JavaScript 向 p:remoteCommand 传递参数](https://stackoverflow.com/questions/7221495/pass-parameter-to-premotecommand-from-javascript/18510102#18510102)。

# android - android listview在滚动时停止一秒钟以获取背景图像

> ID：13802914
> 
> 赞同：0
> 
> 时间：2012-12-10T14:28:37.470
> 
> 标签：android, android-listview

我正在使用自定义列表视图（具有一个图像和文本框作为布局），所有数据都是从类对象和图像表单 web 中检索的，所有的东西都运行得非常好，唯一的事情是在模拟器中的列表 -视图没有显示任何异常行为，但是当我在设备上部署它时，列表视图没有按预期滚动。它只敲了一下，整个列表视图的背景图像消失，然后在滚动结束时出现。什么我应该在这里做的是调用和填充列表视图数据的代码。

```
public void item_display(){
    String[] separated = eventIDForList.split(",");
    final List_class ObjListClass[] = new List_class[separated.length];
    for(int i=0;i<separated.length;i++){
        String temp=separated[i];
        eventIdVal=Integer.parseInt(temp);
        Log.d("events id for displaying id",eventIdVal+"");
        ObjListClass[i]=new List_class();
        ObjListClass[i]=new List_class(FBEvents.getInstance().object_info.get(eventIdVal).fbEventId,FBEvents.getInstance().object_info.get(eventIdVal).fbPic,"Title:  "+FBEvents.getInstance().object_info.get(eventIdVal).fbName,"desc :"+FBEvents.getInstance().object_info.get(eventIdVal).fbDescription,"location :"+FBEvents.getInstance().object_info.get(eventIdVal).fbLocation,FBEvents.getInstance().object_info.get(eventIdVal).fbAttending_count);

   }
    List_class_adapter adapter = new List_class_adapter(this,
            R.layout.listview_item_row, ObjListClass);
    listView1 = (ListView)findViewById(R.id.listView2);

    listView1.setAdapter(adapter);

   // View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
   // listView1.addHeaderView(header);
   // listView1.setAdapter(adapter);
    listView1.setOnItemClickListener(new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
            {

            Log.d("position val",position+"");
            eventIdForDetails=ObjListClass[position].eventId;
            Log.d("String val",eventIdForDetails);
            eventdetails(view);

            }
    }); 
```

这是列表的适配器

```
public class List_class_adapter extends ArrayAdapter<List_class>{

Context context;
int layoutResourceId;   
List_class data[] = null;

public List_class_adapter(Context context, int layoutResourceId, List_class[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ListHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ListHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
        holder.txtTitle2 = (TextView)row.findViewById(R.id.txtTitle2);
        holder.txtTitle3 = (TextView)row.findViewById(R.id.txtTitle3);
        holder.txtTitle4 = (TextView)row.findViewById(R.id.txtTitle4);

        row.setTag(holder);

    }
    else
    {
        holder = (ListHolder)row.getTag();
    }

    List_class list_class = data[position];
    String url = list_class.pic;           
    Drawable image =ImageOperations(this,url);
    holder.txtTitle.setText(list_class.title);
    holder.imgIcon.setImageDrawable(image);
    holder.txtTitle2.setText(list_class.description);
    holder.txtTitle3.setText(list_class.startdate);
    holder.txtTitle4.setText(list_class.attending_count);

    return row;
}

static class ListHolder
{
    ImageView imgIcon;
    TextView txtTitle;
    TextView txtTitle2;
    TextView txtTitle3;
    TextView txtTitle4;

}

public Object fetch(String address) throws MalformedURLException,
IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
}  

private Drawable ImageOperations(List_class_adapter list_class_adapter, String url) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        return null;
    } catch (IOException e) {
        return null;
    }
} 
```

}

如果你知道我错在哪里，请指导我

感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:37:48.490

我认为你应该使用`Thread`or `AsyncTask`。这将避免滞后并在另一个中运行后台进程`Thread`

# c# - 如何仅通过过滤 WPF ListView 中的属性来显示数据？

> ID：13802916
> 
> 赞同：0
> 
> 时间：2012-12-10T14:28:47.930
> 
> 标签：c#, wpf, listview

我正在使用我创建的 WPF 控件，并且我试图仅通过属性值显示列表中的某些行。下面是一个示例，我有一个包含 Active 属性的 User 类。我如何告诉 .xaml 列表应该只显示活跃的人？

现在我基本上使用 linq 生成一个新列表并根据我想要的将它交给 listview。但是，我宁愿只将 ListView 交给我的整个列表，让它为我完成工作。

这是我的 ListView 代码。

```
<ListView ItemsSource="{Binding}" DataContext="{Binding }" >
     <ListView.View>
          <GridView>
               <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                         <DataTemplate>
                              <StackPanel>
                                   <TextBlock Text="{Binding Index}"/>
                                   <TextBlock Text=". " />
                                   <TextBlock Text="{Binding FirstName}" />
                                   <TextBlock Text="{Binding LastName}" />
                              </StackPanel>
                         </DataTemplate>
                    </GridViewColumn.CellTemplate>
               </GridViewColumn>
          </GridView>
     </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:41:17.290

您需要一些代码来添加过滤器：

请参阅：[WPF 过滤](http://svetoslavsavov.blogspot.com/2009/09/sorting-and-filtering-databound.html)

```
ICollectionView view = CollectionViewSource.GetDefaultView(lstMovies.ItemsSource);  
view.Filter = null;  
view.Filter = new Predicate<object>(FilterMovieItem);  

private bool FilterMovieItem(object obj)  
{  
    MovieItem item = obj as MovieItem;  
    if (item == null) return false;  

    string textFilter = txtFilter.Text;  

    if (textFilter.Trim().Length == 0) return true; // the filter is empty - pass all items  

    // apply the filter  
    if (item.MovieName.ToLower().Contains(textFilter.ToLower())) return true;  
    return false;  
} 
```

# eclipse - Eclipse 语法分析范围排除模式不起作用

> ID：13802917
> 
> 赞同：2
> 
> 时间：2012-12-10T14:28:48.567
> 
> 标签：eclipse, code-analysis, static-analysis, eclipse-cdt

我在我的 CDT 项目中使用了 Eclipse 的语法分析工具，并且遇到了一些我不想看到的错误（与已知的[Eclipse 错误有关）。](https://developer.mozilla.org/en-US/docs/Eclipse_CDT#Headers_are_only_parsed_once)为此，我正在尝试使用工具[自定义](http://wiki.eclipse.org/CDT/designs/StaticAnalysis#Customize)排除模式，但无法让它们工作。

这是我的环境：

*   面向 C/C++ 开发人员的 Eclipse IDE，**版本**：Juno Service Release 1，内部版本号：**20120920-0800**
*   Ubuntu Linux 10.10

在我项目的属性-> C/C++ 常规-> 代码分析->（使用项目设置）[我的错误类型] 自定义选择-> 范围-> 排除模式（添加...）我已经使用了我能想到的所有模式排除文件。

例如，作为 src/SomeFolder/SomeFile.cpp 下的文件，我尝试了：

*   `**/SomeFile.cpp`
*   `**/SomeFile*`
*   `src/SomeFolder/SomeFile.cpp`
*   `SomeFolder/SomeFile.cpp`

但似乎没有一个工作。关于如何排除特定文件中的特定错误的任何线索？（注意我想在那些不提供虚假错误报告的文件中保留错误检查）。

# ios - 使用图形 API 将图像发布到 Facebook 时总是得到“(#324) 需要上传文件”

> ID：13802918
> 
> 赞同：2
> 
> 时间：2012-12-10T14:28:57.750
> 
> 标签：ios, facebook, image

当我将图像发布到 Facebook 时，我总是得到“（#324）需要上传文件”，有很多人问同样的错误，他们中的大多数人都使用 php sdk，似乎他们通过将 fileUpload 设置为 true 解决了问题($facebook->setFileUploadSupport(true);)，例如：[http](http://endorkins.com/2010/12/28/facebook-graph-api-upload-photos-requires-upload-file/) ://endorkins.com/2010/12/28/facebook-graph-api-upload-photos-requires-upload-file/ ，[上传照片时出现异常使用 Facebook 图形 API](https://stackoverflow.com/questions/3211968/exception-when-uploading-photo-with-facebook-graph-api)

但是我在iOS中直接使用graph api，我找不到在哪里设置这个标志，我试图在创建相册和上传图片时设置它，但它不起作用。

Facebook 图形 API 参考（[http://developers.facebook.com/docs/reference/api/album/](http://developers.facebook.com/docs/reference/api/album/)）说 can_upload 对于相册必须为真才能允许将照片上传到相册，我检查了我尝试上传的相册图像，这是真的。

我还拥有 user_photos、friends_photos、publish_stream、publish_actions 的权限。

下面是我发布图像的代码，我花了很多时间但无法修复它，请帮助我！任何帮助表示赞赏。

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/"];

AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:url];

NSMutableDictionary *params = [NSMutableDictionary dictionary];

[params setObject:token forKey:@"access_token"];

[params setObject:@"the message" forKey:@"message"];

NSData *imgData = UIImageJPEGRepresentation(self.img, 1.0);

[params setObject:imgData forKey:@"source"];

NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:[NSString stringWithFormat:@"%@/photos", albumId] parameters:params];

[request setValue:@"multipart/form-data" forHTTPHeaderField:@"Content-Type"];

//        [request setValue:[NSString stringWithFormat:@"%d", imgData.length]   forHTTPHeaderField:@"Content-Length"];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        NSLog(@"%@", error);

        NSLog(@"%@", operation.responseString);

}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:32:10.103

好的，最后我通过使用 facebook SDK 发布图像解决了这个问题。

# c# - 列表 继承行为奇怪

> ID：13802924
> 
> 赞同：0
> 
> 时间：2012-12-10T14:29:19.790
> 
> 标签：c#, list, generics, inheritance

> **可能重复：**
> [C# 差异问题：将 List<Derived> 分配为 List<Base>](https://stackoverflow.com/questions/2033912/c-sharp-variance-problem-assigning-listderived-as-listbase)

我对列表继承有疑问。看起来具有更多指定成员的通用列表无法转换为具有其基本成员的列表。看这个：

```
class A
{
    public int aValue {get; set;}
}

class B : A
{
    public int anotherValue {get; set;}
} 
```

您现在可能认为 a`List<B>`也是 a `List<A>`，但事实并非如此。 `List<A> myList = new List<B>()`不可能。`List<A> myList = (List<A>)new List<B>()`在面向对象编程 3 年后，我是否在这里遗漏了一些基本概念？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:33:03.480

是的！

假设你可以做

```
List<A> myList = new List<B>(); 
```

然后假设你有一堂课

```
class C : A { public int aDifferentValue { get; set; } } 
```

A`C`是 a `A`，因此您希望能够调用`myList.Add(new C())`as`myList`认为它​​是 a `List<A>`。

但是 a`C`不是 a`B`所以 a `myList`- 这*真的*是 a `List<B>`- 不能持有 a `C`。

* * *

相反，假设你可以做

```
List<B> myList = new List<A>(); 
```

您可以愉快地调用`myList.Add(new B())`，因为 a`B`是`A`.

`C`但是假设你的列表中有其他东西 a （就像`C`a一样`A`）。

然后`myList[0]`可能会返回一个`C`- 这不是一个`B`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-10T14:32:22.720

不允许简单的转换 现在使用

```
List<B> lb = new List<B> { ... };
List<A> la = lb.Cast<A>().ToList(); 
```

# android - 如何在Android中实现EAP认证？

> ID：13802929
> 
> 赞同：0
> 
> 时间：2012-12-10T14:29:31.497
> 
> 标签：android, android-wifi, wifi

> **可能重复：**
> [Android：如何以编程方式创建 EAP wifi 配置？](https://stackoverflow.com/questions/4249911/android-how-to-create-eap-wifi-configuration-programmatically)

是否有任何 API 用于在 Android 中实现 EAP 身份验证？

# jquery - 使用jQuery切换时如何防止额外的点击

> ID：13802938
> 
> 赞同：1
> 
> 时间：2012-12-10T14:30:05.930
> 
> 标签：jquery

我正在使用切换效果来显示幻灯片，该幻灯片用作选择啤酒制造商的快速视觉选择器。这方面的一个例子可以在这里找到：

[http://srperrott.silverjerk.com/products/domestic/millercoors](http://srperrott.silverjerk.com/products/domestic/millercoors)

问题是，我必须有效地单击所选触发器两次才能使切换生效。这是我的代码：

```
$(document).ready(function(){
    $(".quick-brew-header").toggle(function(){
        $(".zone-preface-wrapper").animate({height:40},40);
    },function(){
        $(".zone-preface-wrapper").animate({height:165},40);
    });
}); 
```

在我的 CSS 中，我声明 .zone-preface-wrapper 的起始高度为 40px。

似乎应该有一个简单的解决方法。我绝对会感谢任何帮助找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:34:08.300

如果元素从 40 开始，则您的第一个参数动画为 40 - 所以您看不到任何变化。

通过切换两个切换处理程序，您应该会在第一次单击时看到更改为 165。

```
$(".quick-brew-header").toggle(
    function() {
        $(".zone-preface-wrapper").animate({height:165},40);
    },
    function() {
        $(".zone-preface-wrapper").animate({height:40},40);
    }
); 
```

# tomcat - 来自外部网络浏览器的 404 错误

> ID：13802939
> 
> 赞同：0
> 
> 时间：2012-12-10T14:30:09.877
> 
> 标签：tomcat

我有一个 Web 服务部署到在 Windows Server 2008 中运行的 Tomcat 服务器。当我从 Web 服务器上的内部浏览器调用 Web 服务时，它运行良好。

但是，当我尝试使用相同的 URL 从另一台计算机访问 Web 服务时，我收到“404 - 找不到文件或目录”错误。

知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:00:19.573

事实证明这是防火墙的问题。我真的不明白为什么它给了我 404 错误。

# java - SAXSource 和 org.w3c.dom.Document

> ID：13802941
> 
> 赞同：3
> 
> 时间：2012-12-10T14:30:15.670
> 
> 标签：java, xml, dom, sax

我有一个`javax.xml.transform.sax.SAXSource`，我想得到一个`org.w3c.dom.Document`对象。我已经用谷歌搜索了几个小时，但我很沮丧。

此外，`InputSource`返回的`SAXSource#getInputSource()`为 null，因此我不能使用它来构建`org.w3c.dom.Document`.

顺便说一句，我想要实现的是从 SAXSource 中包含的 xml 中删除一些 xml 元素。

感谢您的帮助！

只是关于我的环境的一些信息：SAXSource 通过`invoke`以下 javax.xml.ws 调度程序的方法返回给我：

```
Service service = Service.create(serviceName);         
//...
javax.xml.ws.Dispatch<Source> dispatcher = 
        service.createDispatch(portName, Source.class, Service.Mode.MESSAGE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:17:18.447

您通常会将此类型与[Transformer](http://docs.oracle.com/javase/7/docs/api/javax/xml/transform/Transformer.html)一起使用：

```
//Source source = your SAXSource
DOMResult result = new DOMResult();
TransformerFactory.newInstance()
    .newTransformer()
    .transform(source, result);
Document doc = (Document) result.getNode(); 
```

# join - 使用三路关联查询/has_many :through/join

> ID：13802942
> 
> 赞同：3
> 
> 时间：2012-12-10T14:30:16.227
> 
> 标签：join, ruby-on-rails-3.2, has-many-through

我正在使用可用的指南/api/书籍自学 Rails，但我无法理解与三路/嵌套 has_many 的连接：通过关联。

我有**用户**与**组**连接：通过**会员资格**。

我也有一个多对多**组的****帖子**。同一个帖子可以发布到多个群组 + 群组可以有多个帖子。

 **我希望能够为**用户的**主页显示**用户**所属**组**的所有**不同帖子**。

 ****例如。current_user.groups.posts # 我希望它这么简单！！

这是我的代码。

```
Models:

class User < ActiveRecord::Base
  has_many :memberships
  has_many :groups, :through => :memberships
  has_many :posts  # as author of post
end

class Group < ActiveRecord::Base
  has_many :memberships
  has_many :users, :through => :memberships
  has_and_belongs_to_many :posts
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_and_belongs_to_many :groups
end 
```

路线.rb

```
Myapp::Application.routes.draw do
  get "admin/index"
  devise_for :users

  resources :users do
    member do
      get :groups
    end
  end

  resources :groups do
    member do
      get :members
      post :join
      post :leave
    end
  end

  resources :posts 
```

home_controller.rb#index

```
class HomeController < ApplicationController
  before_filter :authenticate_user!

  def index
    @user = current_user
    @groups = Group.all
    @user_groups = @user.groups
    @home_page_posts = Post.joins(:groups, :user)
  end
end 
```

这显然只是给了我所有组中所有帖子的不明确列表。

如果有人能指出我正确的方向。我已经尝试过[http://guides.rubyonrails.org/active_record_querying.html#joining-tables](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)但据我所见，没有一个示例适用。

**如果您需要我提供更多信息，请告诉我。**:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:38:37.177

我相信这就是你想要的：

```
Post.includes(:groups => :users).where('users.id' => current_user.id) 
```

这将生成这样的 SQL（for `current_user.id = 1`）：

```
SELECT "posts"."id" AS t0_r0, "posts"."user_id" AS t0_r1,
  "posts"."created_at" AS t0_r2, "posts"."updated_at" AS t0_r3,
  "groups"."id" AS t1_r0, "groups"."created_at" AS t1_r1,
  "groups"."updated_at" AS t1_r2, "users"."id" AS t2_r0,
  "users"."name" AS t2_r1, "users"."created_at" AS t2_r2,
  "users"."updated_at" AS t2_r3
  FROM "posts"
  LEFT OUTER JOIN "groups_posts" ON "groups_posts"."post_id" = "posts"."id"
  LEFT OUTER JOIN "groups" ON "groups"."id" = "groups_posts"."group_id"
  LEFT OUTER JOIN "memberships" ON "memberships"."group_id" = "groups"."id"
  LEFT OUTER JOIN "users" ON "users"."id" = "memberships"."user_id"
  WHERE "users"."id" = 1 
```

参见：[Filter model with multiple has many through](https://stackoverflow.com/questions/13514073/filter-model-with-multiple-has-many-through)（不完全相同，但相似）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:56:58.643

感谢@shioyama，我最终使用他的答案为 Post 创建了一个模型方法：

```
def self.posts_for_users_groups(current_user)
  includes(:groups => :users).where('users.id' => current_user.id)
end 
```

我从我的家庭控制器调用：

```
def index
  @user_visible_posts = Post.posts_for_users_groups(current_user)
end 
```

再次感谢@shioyama :D******

# android - 如何根据设备时区显示日期格式

> ID：13802944
> 
> 赞同：0
> 
> 时间：2012-12-10T14:30:22.463
> 
> 标签：android, datetime

我想根据时区显示日期......如果它的美国比月份日期年份，如果它的欧洲比日期月份年份..它检查设备的当前日期设置并根据时区转换当前日期和时间。我的代码是

```
 Time today = new Time(Time.getCurrentTimezone());
        today.setToNow();

         String currentDateandTime = today.monthDay+"/"+today.month+"/"+today.year+"  "+today.hour+":"+today.minute; 
```

任何人都可以建议我根据时区进行一些修改以进行日期组织提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:39:13.657

您可以使用[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)类。

```
 DateFormat df = DateFormat.getDateInstance(DateFormat.LONG,Locale.FRANCE); 
```

要获取用户当前的[区域设置](http://developer.android.com/reference/java/util/Locale.html)，您可以这样做

```
Locale.getDefault(); 
```

~~请注意，尽管它可能不是用户想要的。~~

# sql-server-2008 - 分布式交易失败时如何检索错误代码和消息？(MS 故障诊断码)

> ID：13802947
> 
> 赞同：0
> 
> 时间：2012-12-10T14:30:28.727
> 
> 标签：sql-server-2008, try-catch, msdtc, distributed-transactions, xact-abort

我们有一个存储过程，它通过具有不同 MS SQL 2008 数据库的链接服务器启动分布式事务。

我们用

```
 SET XACT_ABORT ON; 
```

并且

```
 BEGIN TRY / CATCH blocks 
```

围绕事务捕获任何错误并将错误代码和消息返回给调用客户端。

但是，当分布式事务中的命令失败时，似乎 MS DTC 正在接管控制，而我们的 catch 块不能“优雅地”回滚并返回错误消息等。相反，会引发错误：Microsoft Distributed Transaction Coordinator (MS DTC) 已取消分布式事务。（错误 1206）。

有什么方法可以让 catch 块捕获这样的分布式 tx 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:29:01.483

## - -更新 - -

看起来这是一个已知问题，微软不会修复它： [http ://connect.microsoft.com/SQLServer/feedback/details/414969/uncatchable-error-when-distributed-transaction-is-aborted](http://connect.microsoft.com/SQLServer/feedback/details/414969/uncatchable-error-when-distributed-transaction-is-aborted)

有一种解决方法，但使用 SSIS 调用 SP： [http ://social.msdn.microsoft.com/Forums/en/sqlnetfx/thread/02e43cad-ac11-45fa-9281-6b4959929be7](http://social.msdn.microsoft.com/Forums/en/sqlnetfx/thread/02e43cad-ac11-45fa-9281-6b4959929be7)

* * *

您应该能够使用 XACT_STATE() 回滚事务，并使用 RAISERROR 加上 @@ERROR 为您提供更多详细信息

> ```
>  SET NOCOUNT ON
>   SET XACT_ABORT ON
>           BEGIN TRY
>       BEGIN TRANSACTION 
> ```

..代码在这里

> ```
>  COMMIT TRANSACTION; 
> ```
> 
> 结束尝试
> 开始捕捉
> 
> ```
>  DECLARE @errormsg VARCHAR(MAX)
>   SET @errormsg = @@ERROR
> 
>   -- Test XACT_STATE:
>       -- If 1, the transaction is committable.
>       -- If -1, the transaction is uncommittable and should 
>       --     be rolled back.
>       -- XACT_STATE = 0 means that there is no transaction and
>       --     a commit or rollback operation would generate an error.
> 
>   -- Test whether the transaction is uncommittable.
>   IF (XACT_STATE()) = -1
>   BEGIN
>       ROLLBACK TRANSACTION;
>   END;
> 
>   -- Test whether the transaction is committable.
>   IF (XACT_STATE()) = 1
>   BEGIN
>       COMMIT TRANSACTION;   
>   END;
> 
>   RAISERROR(@errormsg, 16, 1) 
> ```
> 
> 结束捕获

# visual-c++ - DirectX 11.1 尝试创建设备以不触发超时检测恢复

> ID：13802951
> 
> 赞同：2
> 
> 时间：2012-12-10T14:31:03.640
> 
> 标签：visual-c++, directx, directx-11, c++-amp

我正在尝试使用 C++ AMP 在 GPU 上执行长时间运行的内核。这需要使用 DirectX 创建一个不会超时的设备。我正在设置标志，但它仍在触发超时检测恢复。我的盒子里有一个专用的 Radeon HD 7970，没有插入显示器。我还需要做些什么来防止 Windows 8 在内核完成之前取消它吗？

```
#include <amp.h>
#include <amp_math.h>
#include <amp_graphics.h>
#include <d3d11.h>
#include <dxgi.h>

#include <vector>
#include <iostream>
#include <iomanip>
#include "amp_tinymt_rng.h"
#include "timer.h"
#include <assert.h>

#pragma comment(lib, "d3d11")
#pragma comment(lib, "dxgi")

//Inside Main()
    unsigned int createDeviceFlags = D3D11_CREATE_DEVICE_DISABLE_GPU_TIMEOUT;
    ID3D11Device * pDevice = nullptr;
    ID3D11DeviceContext * pContext = nullptr;
    D3D_FEATURE_LEVEL targetFeatureLevels = D3D_FEATURE_LEVEL_11_1;
    D3D_FEATURE_LEVEL featureLevel;
    auto hr = D3D11CreateDevice(pAdapter, 
                            D3D_DRIVER_TYPE_UNKNOWN, 
                            nullptr, 
                            createDeviceFlags, 
                            &targetFeatureLevels, 
                            1, 
                            D3D11_SDK_VERSION, 
                            &pDevice, 
                            &featureLevel, 
                            &pContext);

    if (FAILED( hr) || 
        ( featureLevel != D3D_FEATURE_LEVEL_11_1))
    { 
        std:: wcerr << "Failed to create Direct3D 11 device" << std:: endl; 
        return 10; 
    }

accelerator_view noTimeoutAcclView = concurrency::direct3d::create_accelerator_view(pDevice);
wcout << noTimeoutAcclView.accelerator.description;

//Setup kernal here
concurrency::parallel_for_each(noTimeoutAcclView, e_size, [=] (index<1> idx) restrict(amp) {
   //Execute kernel here
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:20:25.543

您的代码段看起来不错，问题必须出在其他地方。这里有几个想法：

*   请仔细检查所有parallel_for_each 调用，并确保它们都使用您使用此代码段创建的设备的Accelerator_view（显式将Accelerator_view 作为第一个参数传递给parallel_for_each）。

*   If possible reduce the problem size and see if your code runs without TDR, perhaps something else is causing a TDR (e.g. driver bugs are common cause of TDRs). Once you will know that your algorithm runs correctly for smaller problem you can go back to searching why is TDR triggered for larger problem size.

*   Disable TDR completely ([see MSDN article on TDR registry keys](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569918%28v=VS.85%29.aspx)) and see if your large problem set ever completes, if so go back to first point. This will indicate that your code runs on accelerator_view that has TDR enabled.

Good luck!

# javascript - 原型到 JQuery 的转换 - 坚持使用 class.create

> ID：13802953
> 
> 赞同：0
> 
> 时间：2012-12-10T14:31:11.207
> 
> 标签：javascript, jquery, class, prototypejs

我是一个试图将代码从原型转换为 JQuery 的新手。我正在了解基础知识，但我坚持使用下面的代码。我尝试过使用 jquery 范围，但无法解决。这是代码，我非常感谢一些帮助。

```
var SaveForm = Class.create();
SaveForm.prototype = {
    formId: null,
    responseText: null,

    initialize: function(formId)
    {
            this.formId = formId;
    }, 
    sendRequest: function(idform)
    {
            var referenceThis = this;
            $(idform).request(
            {
                      onSuccess: function(transport)
                      {
                              referenceThis.responseText = transport.responseText;
                              referenceThis.onSuccess();
                      },
                      onFailure: function(transport)
                      {
                              referenceThis.responseText = transport.responseText;
                              referenceThis.onFailure();
                      }
            });
    },
    onSuccess: function()
    {
    },
    onFailure: function()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:15:12.660

翻译看起来像这样： - 您不需要使用 'Class.create()' - 在创建新的 SaveForm 实例时必须使用新的 'new' - 将 'referenceThis' 更改为 _this。

为什么要传递 2 倍的 formId？初始化中只有一次就足够了

```
var SaveForm = function(){
    this.formId;
    this.responseText;
};

SaveForm.prototype.initialize = function(formId){
    this.formId = formId;
}

SaveForm.prototype.sendRequest = function(idform){
    var _this = this;
    $(idform).request({
        onSuccess: function(transport){
            _this.responseText = transport.responseText;
            _this.onSuccess();
        },
        onFailure: function(transport){
            _this.responseText = transport.responseText;
            _this.onFailure();
        }
    });
};

SaveForm.prototype.onSuccess = function(){};
SaveForm.prototype.onFailure = function(){};

var form = new SaveForm(); // 'new' is very important!!
form.initialize('myId'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:25:41.090

jQuery 用于 DOM、事件处理、Ajax 和动画。创建“类”不在其范围内。

但是，您可以轻松地将其转换为简单的纯 JavaScript 构造函数和原型方法：

```
function SaveForm(formId) {
    this.formId = formId;
    this.responseText = null;
}
SaveForm.prototype.sendRequest = function(idform){
    var _this = this;
    $(idform).request({
        onSuccess: function(transport){
            _this.responseText = transport.responseText;
            _this.onSuccess();
        },
        onFailure: function(transport){
            _this.responseText = transport.responseText;
            _this.onFailure();
        }
    });
};
SaveForm.prototype.onSuccess = function(){};
SaveForm.prototype.onFailure = function(){}; 
```

但是，我不确定您实际上需要哪种方法。jQuery 没有`request`方法，做 Ajax 请求只需要使用强大的[`$.ajax`](http://api.jquery.com/jQuery.ajax/)功能和 Defereds 功能。听起来你只需要

```
 function submitForm(id) {
     var $form = $('#'+id);
     return $.ajax({
         url: $form.attr("target"),
         method: $form.attr("method"),
         data: $form.serialize(),
         dataType: "html"
     });
 }
 // Usage:
 submitForm("myForm")
   .done(function onSuccess(responseText) {…})
   .fail(function onFailure(error) {…}); 
```

# excel - VBA中过滤器的操作

> ID：13802954
> 
> 赞同：0
> 
> 时间：2012-12-10T14:31:12.747
> 
> 标签：excel, vba

我最近开始用 VBA 写作，多年来用各种其他语言写作。我目前在 Excel VBA 中使用过滤器时遇到了一些奇怪的问题，我想知道是否有人可以对我遇到的行为有所了解。

我想按数据集按多个不同的列进行过滤，一次一个，我通过将我的数据集复制到新工作表并在那里对数据进行排序来做到这一点。对于我使用的第一个过滤器：

```
Sheets("Temp Data").Range("A:T").ClearContents
Sheets("Main Sheet").Range("A1", "T" & CountLV_Rows).Copy Sheets("Temp Data").Range("A1", "T" & CountLV_Rows)
Sheets("Temp Data").Range("A1", "T" & CountLV_Rows).Sort Key1:=Range("R1"), Order1:=xlAscending, Header:=xlGuess, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal 
```

这成功了。我现在想按 Col C INSTEAD 中的值进行过滤，我重复上面的代码（包括`clearcontents`我认为可以提高成功机会的命令......然后将`Key1`值交换为`C1`

对于第二个（希望是新过滤器），我使用了：

```
 `Sheets("Temp Data").Range("A:T").ClearContents
Sheets("Main Sheet").Range("A1", "T" & CountLV_Rows).Copy Sheets("Temp Data").Range("A1", "T" & CountLV_Rows)

'Sort the data so ascending site numbers in column C
Sheets("Temp Data").Range("A1", "T" & CountLV_Rows).Sort Key1:=Range("C1"), Order1:=xlAscending, Header:=xlGuess, _
    OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal` 
```

但是，我的数据首先按列 R 排序后按列 C 排序...

如何擦除以前应用的任何类型？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:52:15.083

我认为这可能与您没有限定工作表和范围这一事实有关，即明确指定它们所在的工作簿或工作表。这是您一直想做的事情。

我已经在下面完成了，它在 Excel 2010 中对我有用：

```
Sub test()
Dim CountLV_Rows As Long
Dim wbActive As Excel.Workbook

Set wbActive = ActiveWorkbook
With wbActive
    .Sheets("Temp Data").Range("A:T").ClearContents
    CountLV_Rows = .Sheets("Main Sheet").Range("A" & Rows.Count).End(xlUp).Row
    .Sheets("Main Sheet").Range("A1", "T" & CountLV_Rows).Copy _
            Destination:=.Sheets("Temp Data").Range("A1", "T" & CountLV_Rows)
    With .Sheets("Temp Data")
        .Range("A1", "T" & CountLV_Rows).Sort Key1:=.Range("R1"), Order1:=xlAscending, Header:=xlGuess, _
                                              OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
                                              DataOption1:=xlSortNormal
    .Activate
    MsgBox "Sorted by R"
        .Range("A1", "T" & CountLV_Rows).Sort Key1:=.Range("C1"), Order1:=xlAscending, Header:=xlGuess, _
                                              OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
                                              DataOption1:=xlSortNormal
    End With
End With
End Sub 
```

# android - 如何防止在应用启动时检测 CALL_STATE_IDLE？

> ID：13802957
> 
> 赞同：1
> 
> 时间：2012-12-10T14:31:30.723
> 
> 标签：android, telephonymanager

该应用程序会监听来电，然后停止播放音乐。然后，我希望音乐在通话结束后重新开始。但是我遇到了一个问题，`CALL_STATE_IDLE`因为它**在应用程序启动时被检测到，**所以它的方法内的任何调用都会在应用程序启动时被调用。

我的代码如下所示：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   ...
    listenForIncomingCall();
   ...
   }
    private void listenForIncomingCall() {
    PhoneStateListener phoneStateListener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                //Incoming call: Pause music
                //stop playing music
            } else if (state == TelephonyManager.CALL_STATE_IDLE) {
                //Not in call: Play music

            //a code placed here activates on app starts

            } else if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
                //A call is dialing, active or on hold
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };
    TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
    if (mgr != null)

    {
        mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

我怎样才能防止这种情况？如果不在，我该如何注册一些听众`onCreate`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:00:46.727

我找到了一个替代解决方案。随意使用它。如果有人有更好的，请随时与社区分享。

```
private void listenForIncomingCall() {
    PhoneStateListener phoneStateListener = new PhoneStateListener() {
        boolean toTrack = false; //to prevent triggering in onCreate

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                //Incoming call: Pause music
                doSomething();
            } else if (state == TelephonyManager.CALL_STATE_IDLE) {
                //Not in call: Play music
                if (toTrack) {
                    doSomething();
                }
                toTrack = true;
            } else if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
                //A call is dialing, active or on hold
                if (toTrack) {
                    doSomething();
                }
                toTrack = true;
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };
    TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
    if (mgr != null)

    {
        mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

# c# - MonoMac - 游戏中心

> ID：13802958
> 
> 赞同：5
> 
> 时间：2012-12-10T14:31:33.970
> 
> 标签：c#, .net, mono, game-center, monomac

游戏中心 API 是否在 MonoMac 中实现？

如果没有，是否有为它们创建 C# 绑定的推荐路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:09:23.067

开源 MonoMac 不包含 GameKit（或 Lion 或 Mountain Lion 中包含的更新框架）的绑定。

`bmac`，就像 MonoMac 等价于 MonoTouch`btouch`一样，是我们 (Xamarin) 用来创建绑定的相同工具 - 使用它们一切皆有可能。

**更新：**新的[Xamarin.Mac](http://xamarin.com/mac)是 MonoMac 的超集，包括 GameKit（以及以前仅在 MonoTouch 中可用的其他框架）的绑定。

# c# - 奇怪的编译错误

> ID：13802959
> 
> 赞同：0
> 
> 时间：2012-12-10T14:31:34.760
> 
> 标签：c#, asp.net, visual-studio-2005

我的应用程序遇到了一些奇怪的编译问题。有时当我编译我的应用程序时，会出现编译错误。其他时候，应用程序将构建并运行，然后当我尝试在站点中导航时，我在运行时遇到编译错误。

> 编译器错误消息：CS0117：“Workers”不包含“BuildADataTableOfWorkersActiveInAPeriod”的定义

但我可以向你保证确实如此。此错误并非一直发生，只是偶尔发生，但足以令人讨厌。

`Workers`是一个公共类，`BuildADataTableOfWorkersActiveInAPeriod`是一个返回数据表的方法。

在 XP Pro 机器上使用 VS2005、C#、.Net 2.5、ASP.Net 都是最新的。

# junit - JUnit 附件插件不适用于 Hudson

> ID：13802961
> 
> 赞同：1
> 
> 时间：2012-12-10T14:31:56.507
> 
> 标签：junit, hudson, automated-tests, integration-testing

我正在使用 TestNG 和 Hudson 组合运行集成测试。我能够为 Hudson 生成我自己定制的 JUnit XML 文件以用于报告目的。Hudson 将我的定制报告显示得很出色。现在我想将 .txt 文件的测试结果附加到我的测试类/测试方法中。我已经使用了 JUnit Attachments Plugin 并将其安装在 Hudson 上。根据以下链接中提到的示例，我将 .txt 文件生成到了surefire-reports//*-output.txt 目录中：[http](http://wiki.hudson-ci.org/display/HUDSON/JUnit+Attachments+Plugin) ://wiki.hudson-ci.org/display/HUDSON/JUnit+Attachments+Plugin .

但是 JUnit Attachments Plugin 不适用于 Hudson。我无法在 Hudson 中看到附件。

有什么建议可以让它发挥作用吗？

# java - Android - 在启动时使用 LoaderManager 加载应用程序级别的数据

> ID：13802963
> 
> 赞同：2
> 
> 时间：2012-12-10T14:32:01.087
> 
> 标签：java, android

我想加载应用程序级数据 - 单例 - 以供所有活动和服务使用。

我扩展了 Application 对象以从 DB 中获取模型并将其加载到内存中，以便每个应用程序组件都可以访问它。

```
public class MyApplication extends Application implements LoaderCallbacks<Cursor> {

@Override
public void onCreate() {
    super.onCreate();
    getSupportLoaderManager().initLoader(0, null, this);
} 
```

**我要的是：**

1- 如何从应用程序上下文中调用***getSupportLoaderManager() ？***

2- 有没有办法在创建应用程序对象时显示特定片段-启动画面-？

提前致谢。

# python - 内存映射文件时出错：数组无法进行内存映射：dtype 中的 Python 对象

> ID：13802967
> 
> 赞同：1
> 
> 时间：2012-12-10T14:32:10.800
> 
> 标签：python, matrix, numpy, scipy, sparse-matrix

我的应用程序需要存储和访问一个非常大的矩阵。我虽然会为此使用 dok_matrix ，但我似乎无法对文件进行内存映射。我收到错误：*数组无法进行内存映射：dtype 中的 Python 对象。*

这是代码：

```
def __init__(self, ratings_file):

    try:
        self.ratings = np.load(ratings_file, mmap_mode='r+')
        self.n_users = self.ratings.shape[0]
        self.n_items = self.ratings.shape[1]
    except IOError:
        self.ratings = None
        self.n_users = 0
        self.n_items = 0

def add_ratings(self, ratings):
    # update the number of users and items
    self.n_users = max(self.n_users, max([r[0] for r in ratings]) + 1)
    self.n_items = max(self.n_items, max([r[1] for r in ratings]) + 1)

    # reshape (or create) the matrix
    if not self.ratings:
        self.ratings = dok_matrix((self.n_users, self.n_items), dtype=np.dtype(np.float32))
    else:
        self.ratings.resize((self.n_users, self.n_items))

    print 'Num. users: ', self.n_users
    print 'Num. items: ', self.n_items

def update_model(self):
    raise NotImplementedError()

def save(self):
    np.save(self._ratings_file, self.ratings) 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:47:56.173

在这一行中 self.ratings = dok_matrix((self.n_users, self.n_items), dtype=np.dtype(np.float32)) 为什么`type`等于这个复合事物而不是 just `np.float32`？你不是只是想说你想要一个浮点矩阵吗？

# javascript - 正在使用什么引擎？

> ID：13802970
> 
> 赞同：2
> 
> 时间：2012-12-10T14:32:22.040
> 
> 标签：javascript

我如何了解在执行 JavaScript 时正在使用什么引擎？

例如，v8 或 spidermonkey 或 nashhorn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T12:59:40.840

JavaScript 引擎（及其版本）与浏览器（版本）密切相关。

所以只需使用浏览器检测，并通过表格将其映射到 JS 引擎。许多浏览器甚至在其 UA 字符串中包含引擎构建。

或者更好：不要这样做，出于同样的原因。除了浏览器测试套件（您可以在其中询问用户）之外，几乎没有需要了解 JS 引擎的用例。对于其他任何事情，您都应该使用特征检测。不同的引擎以不同的方式与 ES 规范不同，您可以测试这些细微之处。

# objective-c - 使用特定关键字修剪字符串

> ID：13802972
> 
> 赞同：0
> 
> 时间：2012-12-10T14:32:28.150
> 
> 标签：objective-c, ios, nsstring, trim

我有一个如下所示的字符串。

```
<br><br><br><br><br>  SomeHtmlString  <br><br><br><br><br> 
```

我想删除 br 标签，例如在 SomeHtmlString 中保留中间 br 标签的修剪函数。有什么功能可以很快做到这一点吗？

例如

```
<br><br><br>test1<br><br>test2<br><br><br><br> 
```

到

```
test1<br><br>test2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:13:50.857

这是使用正则表达式的方法。它一次只匹配一个
，并在字符串结尾的开头替换它。

```
NSMutableString *replaceMe = [[NSMutableString alloc ]
             initWithString:@"<br><br > <br >  test<br>test2<br><br>"];
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression 
           regularExpressionWithPattern:@"^ *<br *> *"
           options:NSRegularExpressionCaseInsensitive
           error:&error];
do {
    ;
} while ([regex replaceMatchesInString:replaceMe options:NSMatchingCompleted range:NSMakeRange(0, replaceMe.length) withTemplate:@""] != 0);

regex = [NSRegularExpression 
           regularExpressionWithPattern:@" *<br *> *$"
           options:NSRegularExpressionCaseInsensitive
           error:&error];
do {
    ;
} while ([regex replaceMatchesInString:replaceMe options:NSMatchingCompleted range:NSMakeRange(0, replaceMe.length) withTemplate:@""] != 0);

NSLog(@"string=%@", replaceMe); 
```

and that does strip `"<br><br > <br > test<br>test2<br><br>"` down to `test<br>test2`. It's probably not the neatest solution but it is very easy to modify to match different expressions, with different whitespace, for example.

It's also possible to use the regular expressions to match several `<br>`s in one go:

```
NSRegularExpression *regex = [NSRegularExpression 
    regularExpressionWithPattern:@"^ *(<br *> *)+"
    options:NSRegularExpressionCaseInsensitive
    error:&error];
[regex replaceMatchesInString:replaceMe options:NSMatchingCompleted range:NSMakeRange(0, replaceMe.length) withTemplate:@""];
NSRegularExpression *regex = [NSRegularExpression 
    regularExpressionWithPattern:@" *(<br *> *)+$"
    options:NSRegularExpressionCaseInsensitive
    error:&error];
[regex replaceMatchesInString:replaceMe options:NSMatchingCompleted range:NSMakeRange(0, replaceMe.length) withTemplate:@""]; 
```

which avoids the looping but is a little harder to modify.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:47:58.887

你可以这样做：

```
NSString* htmlString= @"<br><br><br><br><br>  SomeHtmlString  <br><br><br><br><br>";
NSString* pureString= [htmlString stringByReplacingOccurrencesOfString: @"<br>" withString: @""]; 
```

所以你会在 pureString 中有 @" SomeHtmlString "。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:57:16.587

您可以使用它来去除不需要的位：

```
[yourString stringByReplacingOccurrencesOfString:@"<br>" withString:@""]; 
```

然后你会使用这样的东西来按照你想要的方式重新制作你的字符串：

```
NSString *newString = [NSString stringWithFormat:@"<br>%@<br>", yourString]; 
```

您可能还想查看 stringByTrimmingCharactersInSet：

你可以用 NSString 做很多事情。查看类参考：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

编辑：

substringToIndex: 可能是你的朋友。您可以这样做来确定字符串的前 4 个字符是否包含要删除的字符：

```
NSString *subString = [yourString substringToIndex:4];
if ([subString isEqualToString:@"<br>"]) {
    yourString = [yourString substringFromIndex:4];
} 
```

然后，您将创建一个没有这 4 个字符的新字符串。您一直这样做，直到前 4 个字符不等于您要删除的字符。

您可以使用 substringFromIndex 在字符串末尾执行类似的操作。您将需要知道原始字符串的长度，以确保您的子字符串都不会超出范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T15:36:55.853

Alternative regular expression rendition:

```
NSString *input = @"<br><br><br><br><br><br>test<br>test2<br><br><br><br><br><br><br><br><br><br>";
__block NSString *output;

NSError *error;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^(<br>)*(.*?)(<br>)*$"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

[regex enumerateMatchesInString:input
                        options:0
                          range:NSMakeRange(0, [input length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

                         NSRange matchRange = [result rangeAtIndex:2];

                         output = [input substringWithRange:matchRange];
                     }];

if (output)
    NSLog(@"Found: %@", output); 
```

# spring - 在 Web 服务器启动后不久，Spring 似乎没有注入一些 bean

> ID：13802982
> 
> 赞同：1
> 
> 时间：2012-12-10T14:32:44.623
> 
> 标签：spring, dependency-injection, nullpointerexception

我正在努力弄清楚为什么（无害）空指针异常发生在我们在生产中运行的服务器上，因为一些 bean 尚未设置。这是场景：

1.  一些用户正在使用 Web 应用程序
2.  Web 应用程序停止
3.  Web 应用程序开始
4.  几乎立即，Kerberos 身份验证发生在可能仍在运行活动脚本的客户端浏览器中
5.  NPE 发生在 Kerberos 服务身份验证提供程序上，试图调用 UserService（UserDetailsS​​ervice 的实现）——进行了更多的安全检查，导致 NPE 由于预期的 bean 为 NULL

堆栈跟踪片段可以在问题的末尾找到。

我无法在开发环境中重现这一点，所以我希望看到关于为什么会发生这种情况的想法。

注：`ZzzzSecurityContextService`有`lazy-init="true"`；春季版是`2.5.1`.

```
Dec 10, 2012 10:14:11 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
        ...
Dec 10, 2012 10:14:13 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 33849 ms
Dec 10, 2012 10:14:15 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet ZzzzGwtClient threw exception
org.zzzz.system.security.SecurityDataAccessException: Error reading user 'Zzzzzz' info from the database.; nested exception is java.lang.NullPointerException
    at org.zzzz.system.security.UserService.loadUserByUsername(UserService.java:181)
    at org.zzzz.system.security.DelegatingUserDetailsService.loadUserByUsername(DelegatingUserDetailsService.java:21)
    at org.springframework.security.extensions.kerberos.KerberosServiceAuthenticationProvider.authenticate(KerberosServiceAuthenticationProvider.java:89)
    at org.springframework.security.providers.ProviderManager.doAuthentication(ProviderManager.java:195)
    at org.springframework.security.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:46)
    at org.zzzz.session.WebAuthenticationFilter.attemptAuthentication(WebAuthenticationFilter.java:117)
    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:252)
        ...
Caused by: java.lang.NullPointerException
    at zzzz.services.ZzzzSecurityContextService.getStructureService(ZzzzSecurityContextService.java:241)
    at zzzz.services.ZzzzSecurityContextService.readSecurityContext(ZzzzSecurityContextService.java:50)
    at org.zzzz.system.security.SecurityContextService.getSecurityContext(SecurityContextService.java:41)
    at org.zzzz.system.security.UserService.loadUserByUsername(UserService.java:173)
    ... 29 more 
```

# node.js - 如何使用实时统计数据自动更新 div？

> ID：13802985
> 
> 赞同：1
> 
> 时间：2012-12-10T14:32:50.877
> 
> 标签：node.js, socket.io

我是名单上的新手，我需要你的帮助来解决这个问题。

Ojectif：使用实时统计信息自动更新 div

我们有一个在线广告网站，该网站向您显示实时连接的数量、广告浏览量等......直到今天我做了一个 setInterval，它启动了一个 jquery 函数来更新 div。这一切都很好，唯一的问题是消耗不必要的连接。来了 nodejs，很棒的工具 .. 除了它会杀死服务器。（可能是因为我用错了）

这是我的做法：

客户端：

```
<script type="text/javascript" src="http://10.0.0.10:1337/socket.io.js"></script>
<script type="text/javascript">
(function ($)
{
    if (typeof (io) != "undefined")
    {
        var socket = io.connect("http://10.0.0.10:1337/socket.io.js");
        setInterval(function ()
        {
            socket.emit("cron_showcompteur",
            {
                ssid: "*SSID_ID*",
                id_website: 1
            });
        }, 5 * 1000);

        socket.on("showinfo", function (obj)
        {
            $("#" + obj.divdest).html(obj.result);
        });
    }
})(jQuery); 
```

客户端每 5 秒使用其 SSID 向 cron_showcompteur 发起一次套接字。

服务器端：

```
var initConf = require('./conf');
var http = require('http');
var util = require('util');
var os = require('os');
var Memcached = require('memcached');
var memcached = new Memcached(util.format('%s:%s', initConf.objConf.memcache_ip,         initConf.objConf.memcache_port));
....

io.sockets.on('connection', function (socket)
{
    socket.on('cron_showcompteur', function (obj)
    {
        var loadAvg = os.loadavg();
    if (typeof (obj.ssid) == 'undefined') return;

    socket.join(obj.ssid)
    if (loadAvg[0] < 3)
    {
        memcached.get(["nombre_visite_journee", util.format('annonces_ajoutees_journee_%d', obj.id_website)],
        function (err, result)
        {
            if (err) return;
            if (typeof (result) == 'boolean') return;

            for (var i in result)
            {
                io.sockets. in (obj.ssid).emit('showinfo',
                {
                    divdest: i,
                    result: addCommas(result[i])
                });
            }
        });
    }
}); 
```

});

总之：

该人连接到该站点，并使用他的 ID 网站发送其 SSID 一旦初始化 nodejs 套接字使用其 SSID 创建了一个房间，客户端每 5 秒询问一次统计信息，并且 nodejs 使用“showinfo”在 div 中发送结果

当服务器（专用于nodejs的服务器）CPU上升到100％时，当您以600/700连接到高达1000的cons时，这非常有用，因为站点工作的任何结果都不再能够初始化nodejs套接字服务器和站点工厂。

我测试了几个变种：

*   把 setInterval 放在服务器端，那就更糟了。
*   一旦客户连接或打开向其他收费等的广告，从连接器到触发......

Memeched 统计信息在 PHP 上更新

我对我们需要创建一个用户房间的缺点表示怀疑，这似乎很大......因为数据不是私人的。

我想避免long-pooling，我喜欢socket的想法。

在连接到 nodejs 的 932 之后，服务器处于 100% CPU

```
calou3 root @: ~ # netstat-tanpu | grep node | awk {'print $ 5'} | cut-f 1-d "" | uniq-c | sort-nnetstat-tanpu && | grep node | wc-l 
```

932

当前服务器为 412（重启节点后）CPU 为 3%，平均为 0

您能否告诉我一种自动更新所有不会使服务器崩溃的无线客户端上的 DIV 的方法？

非常感谢您的帮助（对不起我的英语）

# javascript - 使用 Jquery 计算对象文字中的对象数量

> ID：13802987
> 
> 赞同：9
> 
> 时间：2012-12-10T14:32:53.920
> 
> 标签：javascript, jquery, jquery-ui, object, object-literal

代码：

```
var animals = {
                    "elephant": {
                                    "name" : "Bingo",
                                    "age" : "4"
                                },
                    "Lion":     {
                                    "name" : "Tango",
                                    "age" : "8"
                                },
                    "Tiger":    {
                                    "name" : "Zango",
                                    "age" : "7"
                                }
                } 
```

我想在这个对象文字中使用 Jquery 来计算对象的数量。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T14:33:34.730

你可以使用`Object.keys(animals).length`

或者

```
var count = 0;
for (var animal in animals) {
    if (animals.hasOwnProperty(animal)) {
        count++;
    }
}
// `count` now holds the number of object literals in the `animals` variable 
```

或者可能是或可能不是最有效的许多 jQuery 解决方案之一：

```
var count = $.map(animals, function(n, i) { return i; }).length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:35:55.770

如果你想要跨浏览器的东西，也可以在 IE8 上运行，你不能以一种非常干净的方式来做（参见[keys 属性的兼容性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)）。

我建议这样做：

```
var n = 0;
for (var _ in animals) n++; 
```

（因为它是一个对象字面量，不需要 hasOwnProperty）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T14:41:03.013

不能用数组吗？

无论如何，在一个对象中，你可以这样做：

```
Object.prototype.length = function() {
    var count = 0, k=null;
    for (k in this) {
        if (this.hasOwnProperty(k)) count++;
    }
    return count;
}
console.log( animals.length() ); 
```

# css - 不适用 SCSS 的媒体查询

> ID：13802988
> 
> 赞同：0
> 
> 时间：2012-12-10T14:32:57.007
> 
> 标签：css, media-queries, sass

我正在尝试在 Chrome 和 Firefox 中测试以下代码，但都没有接受它。我已将它添加到样式表的末尾，无论如何它都可以正常工作。

```
@media all and (max-width : 850px) {
  h1#site-name {
    width: 100%;
    a {
      margin: auto;  
    }
  }

  nav#main-menu {
    float: left;
  }
} 
```

我正在重新调整浏览器窗口的大小，并且更改显然不会在任何宽度上生效。该代码位于 .scss 文件中以供参考。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:40:46.523

您也可以在 scss 中使用 mixins 进行媒体查询。

```
@mixin mq($mq) {
    @if $mq == medium {
        @media (max-width: 850px) { @content; }
    }
}

#main-menu {
    // default styles

    // media query 850px max-width
    @include mq(medium) {
        float: left;
    }
} 
```

查看这篇文章了解更多信息。[http://css-tricks.com/media-queries-sass-3-2-and-codekit/](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)

# javascript - 包括 elFinder 和 JQuery UI 的问题

> ID：13802990
> 
> 赞同：1
> 
> 时间：2012-12-10T14:33:02.390
> 
> 标签：javascript, jquery-ui

我正在尝试在我的网站上设置一个 elFinder 窗口。所以我从 GitHub 下载了最新版本并按照[它的说明](https://github.com/Studio-42/elFinder/wiki/Install)进行操作。

我包括了他们要求的每个文件：

```
<!-- elFinder -->
<script type="text/javascript" src="../includes/elfinder/js/elfinder.min.js"></script>
<script type="text/javascript" src="../includes/elfinder/js/i18n/elfinder.nl.js"></script>

<!-- JQuery UI -->
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.datepicker.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.timepicker.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.draggable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.droppable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.selectable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.resizable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.slider.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.dialog.js"></script> 
```

我也将其包含在我的`head`-section 中：

```
<script type="text/javascript">
    $().ready(function() {
        var elf = $('#elfinder').elfinder({
            lang: 'nl',             // language (OPTIONAL)
            url : '../includes/elfinder/php/connector.php'  // connector URL (REQUIRED)
        }).elfinder('instance');            
    });
</script> 
```

但由于某种原因，我得到的只是这张图片：
![在此处输入图像描述](../Images/68d179c80e68d05925381461fd54740d.png)

但显然，这些文件包括在内......所以我想知道我做错了什么，因为我无法解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:51:07.373

为什么不将 jQuery UI 文件合并为一个？

**是**的，包含的顺序很重要。

这是一个**[工作演示](http://jsfiddle.net/K8ALN/)**。

这是代码

## HTML

```
<head>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://elfinder.org/demo/css/elfinder.min.css" />
</head>

<div id="elfinder"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<script src="http://elfinder.org/demo/js/elfinder.min.js" ></script>​ 
```

## Javascript

```
$().ready(function() {
   var f = $('#elfinder').elfinder({
       url : '/connector'
   }).elfinder('instance');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:36:26.917

您是否尝试过更改包含顺序？

```
<!-- elFinder -->
<script type="text/javascript" src="../includes/elfinder/js/elfinder.min.js"></script>
<script type="text/javascript" src="../includes/elfinder/js/i18n/elfinder.nl.js"></script>

<!-- JQuery UI -->
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.timepicker.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.draggable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.droppable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.selectable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.resizable.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.datepicker.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.slider.js"></script>
<script type="text/javascript" src="../includes/js/jquery-ui/development-bundle/ui/jquery.ui.dialog.js"></script> 
```

让我知道 ;）

# c# - 使用带有 Webmatrix 的 QueryValue 获取 commandText 值不能为空或为空

> ID：13802997
> 
> 赞同：0
> 
> 时间：2012-12-10T14:33:23.873
> 
> 标签：c#, sql, sql-server-ce, webmatrix

**在将另一个页面上的条目插入数据库之后，查询它的值时出现错误。错误如下：**

```
Value cannot be null or an empty string.
Parameter name: commandText 
```

**堆栈跟踪看起来像这样（不确定这是否有帮助）：**

```
[ArgumentException: Value cannot be null or an empty string.
Parameter name: commandText]
   WebMatrix.Data.Database.QueryValue(String commandText, Object[] args) +20791
   ASP._Page_EntryViewer_cshtml.Execute() in c:\Users\administrator.OKMCITY\Documents\My Web Sites\Persons Of Interest\EntryViewer.cshtml:101
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
   System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors) +69
   System.Web.WebPages.WebPage.ExecutePageHierarchy() +151
   System.Web.WebPages.StartPage.RunPage() +17
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +62
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
   System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext) +114 
```

**发生错误的行（第 101 行）：**

```
Line 99:     var db = Database.Open("PersonsOfInterest");
Line 100:
Line 101:    var activeID = db.QueryValue((string)Session["activeEntrySelectQueryString"], (string)Session["gPOIName"], (string)Session["gDateLastModified"], (string)Session["gGender"], (string)Session["gRace"], (string)Session["gHeight"], (string)Session["gWeight"], (string)Session["gHairColor"], (string)Session["gEyeColor"], (string)Session["gDOB"], (string)Session["gAge"], (string)Session["gSS"], (string)Session["gDL"], (string)Session["gDOC"], (string)Session["gVehicleTag"], (string)Session["gFBI"], (string)Session["gOfficer"], (string)Session["gAdditionalDescriptors"], (string)Session["gHomePhone"], (string)Session["gAliases"], (string)Session["gSourceOfInformation"], (string)Session["gAddress"], (string)Session["gAddressInformation"], (string)Session["gKnownAssociates"], (string)Session["gVehicleDescription"], (string)Session["gCellPhone"], (string)Session["gCellPhone2"], (string)Session["gCellPhone3"], (string)Session["gPOICautions"], (string)Session["gComments"], (string)Session["gWorkPhone"], (string)Session["gSummarizedIncidents"], (string)Session["gPOILastName"]);
Line 102:    Session["gEntryID"] = activeID;
Line 103: 
```

我似乎找不到这个错误的原因，因为它发生在用户“保存”他/她进入数据库之后，但偶尔发生并且看似随机。该页面尝试查询该条目的唯一主键的值。您在上面看到的会话变量中存储的值是从以前刚刚用于将新条目插入数据库的值中存储的（我必须这样做，因为主键“是身份”并且值会自动递增每个条目添加）。

可能有更好（更简单）的方法来做我想做的事情，但我认为这样做比仅在主键上使用 MAX（聚合函数）更一致。

关于这个问题，我可能可以提供更多信息，但我真的不想用不必要的信息填充这个页面（如果我还没有的话）。只要让我知道是否还有其他我可以提供的。

**还有一些注意事项：**

'Session["gDateLastModified"]' 是从使用 JavaScript 自动绘制的表单上的字段中获取的，因此该值（精确到秒）应该（与此查询中的所有其他变量一样）与值匹配输入到数据库中（是的，我确信用户已打开 JavaScript 并正常运行）。

此外，这可能很明显，但是第 101 行的 QueryValue 命令将第一个参数作为选择查询字符串，当然使用参数化查询，其余参数是检索数据库中的行所必须匹配的。

请记住，此错误仅偶尔发生。

如果我添加了太多信息（或遗漏了一些信息），我真的很抱歉，但我不知道从哪里开始假设这个问题可能是什么，所以不确定所有可能会帮助任何试图帮助我的人。只要让我知道是否还有其他我可以提供的。

**更新**

我现在所知道的是，只要它是“IsPost”，就会故意填充一个字符串，然后该字符串用于直接填充有问题的 Session 变量。我知道会话变量实际上是 cookie，但可以肯定没有人手动清除它们（他们必须在点击提交按钮后和加载下一页之前，在这个过程的中间某个地方这样做），还有什么可能导致该值被清除？我假设 commandText 是一个变量，它在 db.QueryValue 期间传递了我的查询字符串的值，这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:42:56.160

在使用它们之前，我会检查会话是否确实具有这些值：

```
var activeEntrySelectQuery = (string) Session["activeEntrySelectQueryString"];
if (string.IsNullOrEmpty(activeEntrySelectQuery)) {
    throw new ArgumentException("The active entry select query has gone missing.");
} 
```

您可以添加适当的附加信息（并创建您自己的异常类型）来帮助您找到问题。但我怀疑这是问题所在 - 会话不包含您期望的值。