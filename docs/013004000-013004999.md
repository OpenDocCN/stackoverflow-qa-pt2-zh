# StackOverflow 问答 13004000-13004999

# pdf - pandoc 从 .md 转换的投影仪幻灯片中的图非常大

> ID：13004001
> 
> 赞同：10
> 
> 时间：2012-10-22T01:38:29.013
> 
> 标签：pdf, knitr, pandoc, r-markdown

当转换为 html 幻灯片或 pdf 时，R 在 R markdown 文件中生成的正常图`chunks`完全存在。但是，当它们通过 转换为投影仪幻灯片时`pandoc -t beamer ex.md -V theme:Warsaw -o beamer.pdf` ，绘图会变得非常大，特别是对于由 生成的那些`par(mfrow=c(n,m))`，在这种情况下仅显示一小部分绘图。

我试图通过设置块选项来修复`dev='pdf'`，但它没有成功。

html中的情节是 ![在此处输入图像描述](../Images/f757c7089b263a5c0ce392915910f93c.png)

投影仪中的情节是 ![在此处输入图像描述](../Images/5c31738958320e8c75ab4f767402d1d2.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T22:04:12.697

pandoc 的开发版本在 beamer 模板中包含一些代码，这些代码应该将图像缩放到幻灯片的宽度。这可能对您的情况有所帮助。

您无需安装开发 pandoc 即可使用它，因为更改只是对模板的更改。只需使用 . 生成默认投影仪模板的副本即可`pandoc -D beamer > my.beamer`。`my.beamer`在该行之后插入以下行`\usepackage{graphicx}`：

```
\makeatletter
\def\ScaleIfNeeded{%
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother
\setkeys{Gin}{width=\ScaleIfNeeded} 
```

然后将 pandoc 与选项一起使用`--template=my.beamer`。

# javascript - WebView 选择导致软键盘暂时隐藏然后回来

> ID：13004003
> 
> 赞同：11
> 
> 时间：2012-10-22T01:38:46.600
> 
> 标签：javascript, android, html, android-webview

我有一个包含 WebView 的应用程序。里面是一个contenteditable=true的div。

假设我在 div 中已经有一些文本。当我第一次单击文本时，光标会弹出，软键盘也会弹出。问题是，如果我再次单击，软键盘会消失然后重新出现。

从技术上讲，这不是问题，因为我仍然可以编写和做我需要的一切，但是每次我想点击某些东西时让键盘弹出和备份是很烦人的。

我认为问题出在 WebView 每次单击它时都会获得焦点事件，但我不确定是否是这种情况。

有人可以启发我了解正在发生的事情，或者至少指出一些可以帮助我的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T07:33:10.210

我自己试过了，但有你描述的问题。我认为您必须做了一些事情来覆盖点击功能，以便它回溯键盘并再次发现焦点在可编辑内容上，因此它再次给键盘，这是我能想到的最好的

希望这可以帮助

# colors - gnu source-highlight 的配色方案与深色背景

> ID：13004004
> 
> 赞同：4
> 
> 时间：2012-10-22T01:39:00.733
> 
> 标签：colors, gnu, color-scheme, source-highlighting

我主要使用较少的 gnu source-highlight（所以它使用 ANSII 终端代码来制作颜色）。但是，由于背景颜色较深，突出显示的部分暗淡且难以阅读。

有没有一种简单的方法来告诉 source-highlight 使用更适合深色背景的配色方案（例如，可以使用[`vim`](http://vim.wikia.com/wiki/Better_colors_for_syntax_highlighting)）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T09:11:09.397

我不知道如何使用 source-highlight 来做到这一点，所以我完全跳过它并[使用 pygmentize](https://unix.stackexchange.com/questions/19439/how-can-i-display-syntax-highlighting-on-a-file/19440#19440)来达到同样的目的。为此，当我想要代码突出显示时，我制作了一个我使用的函数，而不是 less

```
pygless()
{
  LESSOPEN="| pygmentize -f terminal256 -O style=native -g %s" less -R "$@";
} 
```

# matlab - 在Matlab中将文本文件读取到矩阵，行长未知

> ID：13004011
> 
> 赞同：3
> 
> 时间：2012-10-22T01:39:22.480
> 
> 标签：matlab, matlab-figure

我有一个文本文件，它的格式有点像这样：

```
1 2 3 4 5 6
7 8 9
0 11 2 32 45 6 6
1 2 
```

我想读取每一行并为每一行绘制一条线。x 轴是 [1:row.length]，y 轴是每一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:10:37.420

```
fid = fopen('dat.txt');

line = fgetl(fid);

% if you want everything on the same axis, set it up here
axis([0,20,-10,10])
hold all    

while ischar(line)
  yy = str2num(line);
  xx = 1:length(yy);
  plot(xx,yy)
  line = fgetl(fid);
end
hold off

fclose(fid); 
```

请注意，feof() 与 fgetl() 不太好，请参见[此处](http://www.mathworks.com/help/matlab/import_export/import-text-data-files-with-low-level-io.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T01:54:38.533

最简单的方法是测试特定字符。检查换行符以确定您是否位于当前行的末尾和文件末尾函数以查看您是否位于文件的末尾。

看看： http: [//www.mathworks.com/help/matlab/ref/feof.html](http://www.mathworks.com/help/matlab/ref/feof.html)

# c++ - 动态控制 c++ 数据结构中的成员数

> ID：13004015
> 
> 赞同：2
> 
> 时间：2012-10-22T01:40:34.353
> 
> 标签：c++, optimization, data-structures, c++11, containers

我目前正在编写一个处理数据库的程序。

我可以要求不同的选项并获得可变数量的列。

问题是数据将是千兆字节的信息，我无法创建一个包含所有可能选项的结构。我需要能够动态地创建一个结构，其中只有我需要的成员，没有别的。

我还想要比为每个可能的情况创建一个结构更好的东西！

以下是表格示例：

```
smallint(6) - varchar(255) - double - int(11)
smallint(6) - varchar(255) - double - double - double - int(11)
smallint(6) - smallint(6) - varchar(255) - varchar(255) - double - int(11) 
```

有什么方法可以在 C++ 中创建具有动态成员数量的结构，这些结构与普通结构一样有效？

[编辑]

这是使用@Industrial-antidepressant 想法的解决方案。它可以工作，但唯一的问题是它似乎比普通结构慢 4 倍。

```
#include <windows.h>

class Column
{
public:
    Column(uint64 nOffset, const type_info* pType)
    {
        m_nOffset = nOffset;
        m_pType = pType;
    }

    uint64 m_nOffset;
    const type_info* m_pType;
};

struct UWElement
{
public:
    template<class T>
    void Set(uint64 nColumn, T value)
    {
        if ((*m_pColumnList)[nColumn].m_pType == &typeid(T))
        {
            uint64 nOffset = (*m_pColumnList)[nColumn].m_nOffset;
            *(reinterpret_cast<T*>(m_pData + nOffset)) = value;
        }
        else
        {
            assert(0);
        }
    }

    template<class T>
    T& Get(uint64 nColumn)
    {
        // No type check here to test speed
        uint64 nOffset = (*m_pColumnList)[nColumn].m_nOffset;
        return *reinterpret_cast<T*>(m_pData + nOffset);
    }

protected:
    unsigned char* m_pData;
    std::vector<Column>* m_pColumnList;

    friend class UWElementList;
};

class UWElementList
{
public:
    UWElementList()
    {
        m_nEndOffset = 0;
    }

    template<class T>
    void AddType()
    {
        Column column(m_nEndOffset, &typeid(T));
        m_columnlist.push_back(column);
        m_nEndOffset += sizeof(T);
    }

    void CreateElement()
    {
        UWElement element;
        element.m_pData = new unsigned char[m_nEndOffset];
        element.m_pColumnList = &m_columnlist;
        m_elementList.push_back(element);
    }

    UWElement& operator[](int64 nPos)
    {
        return m_elementList[nPos];
    }

private:
    std::vector<Column> m_columnlist;
    uint64 m_nEndOffset;

    std::vector<UWElement> m_elementList;
};

int main()
{
    struct SimilarStruct
    {
        double a;
        int b;
        int c;
    };

    SimilarStruct similar;
    vector<SimilarStruct> similarList;
    similarList.push_back(similar);

    UWElementList list;
    list.AddType<double>();
    list.AddType<int>();
    list.AddType<int>();
    list.CreateElement();

    // Test writing speed
    uint64 nTick = GetTickCount64();
    for(int i=0; i<100*1000*1000; i++)
    {
        //list[0].Set<double>(0,(double)1.1);       //Speed 140ms
        list[0].Get<double>(0) = (double)1.1;   //Speed 109ms
        //similarList[0].a = (double)1.1;           //Speed 31ms
    }
    cout << GetTickCount64() - nTick << endl;

    double d=0;

    // Test reading speed
    nTick = GetTickCount64();
    for(int i=0; i<100*1000*1000; i++)
    {
        d += list[0].Get<double>(0);                //Speed 94ms
        //d += similarList[0].a;                        //Speed 93ms
    }
    cout << GetTickCount64() - nTick;

    return d;
} 
```

任何可以帮助加快速度的优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:23:05.510

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:47:29.157

如何使用链接列表。您可以使用 new 运算符为每个节点动态分配内存。

如果使用预定义的结构，性能可能不等于您将获得的性能，但它提供了更多控制。

如果您仍只想创建动态结构，则可以在结构内使用联合。

更多信息：[C++ 中的动态结构](https://stackoverflow.com/questions/6102789/dynamic-structures-in-c)

# c++ - 括号中的一对数字

> ID：13004019
> 
> 赞同：4
> 
> 时间：2012-10-22T01:40:59.660
> 
> 标签：c++

这是一个代码块。谁能解释将一对数字括在括号内意味着什么。（这是在 C++ 中。）

```
 int a = 2, b = 2, c = 3, d = 1;
    if((a,b)<(c,d))
        cout<<"case1"<<endl;
    else
        cout<<"case2"; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T01:42:59.027

那是*逗号运算符*；它评估左边的东西，抛出结果，然后返回右边的结果。由于评估`int`变量没有副作用，这`if`在语义上等价于

```
if(b < d) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-22T02:45:39.337

或者，如果值正在更改或被用户作为输入，您可以使用`&&`(and), `||`(or) 逻辑运算符来整理您的代码

`if ((a<c) && (b<d))`

或者

`if ((a<c) || (b<d))`

这样您就可以按照自己喜欢的方式制作案例。在此处查看运营商[http://www.cplusplus.com/doc/tutorial/operators/](http://www.cplusplus.com/doc/tutorial/operators/)

# android - ActionBarSherlock Fragments Tabs 在非 ICS 版本的 Android 中看起来不同

> ID：13004020
> 
> 赞同：3
> 
> 时间：2012-10-22T01:41:03.353
> 
> 标签：android, tabs, actionbarsherlock

我一直在浏览 ABS Fragments 演示，并注意到标签在旧版本的 Android 中看起来完全不同 - 这是正常的吗？我截取了比较两者的屏幕截图，特别是选项卡看起来不同：

[![比较](../Images/21c86168c6c635d17b37584630a3f750.png)](https://i.stack.imgur.com/qn28l.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:57:54.480

那是一个 TabWidget，而不是操作栏选项卡。查看向后移植选项卡的“演示”示例中的“选项卡导航”示例。

# perl - 在perl中将变量传递给sqlplus查询

> ID：13004023
> 
> 赞同：0
> 
> 时间：2012-10-22T01:41:24.647
> 
> 标签：perl, oracle

我这里有问题。我正在尝试将变量传递给 sqlplus 查询，但它似乎不起作用。

```
 my $connect = DBI->connect('DBI:Oracle:',$dbuser,$dbpasswd);
  my $query = "select sum(transaction_amnt) from comm_to_cand natural join cmte_id_to_geo where cycle='?'", $cycle;
  my $query_handle = $connect->prepare($query);
  $query_handle->execute();
  $cmte_money = $query_handle->fetchrow_array();

  print 'Money: ';
  print $cmte_money;

  if($cmte_money > 0)
  {
    print 'HI';
  }
  else
  {
    print 'NOOOO';
  } 
```

当我将“cycles”变量从变量更改为常量时，我​​可以让查询工作，并且 if 语句检查将打印 hi，所以数据库工作我很肯定。

我搜索了互联网，我似乎无法找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:51:23.257

首先，您的意思是使用占位符，但您没有。

```
where cycle='?'     -- This is a string 
```

应该

```
where cycle=?       -- This is a placeholder 
```

还有一个问题是你实际上并没有为占位符传递一个值。

```
$query_handle->execute(); 
```

应该

```
$query_handle->execute($cycle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:43:43.713

占位符的替换被传递执行，所以：

```
my $query = "select sum(transaction_amnt) from comm_to_cand natural join cmte_id_to_geo where cycle=?";
my $query_handle = $connect->prepare($query);
$query_handle->execute($cycle); 
```

如果您启用它们，您拥有的代码会触发警告；确保你这样做，并且你弄清楚如何回应你得到的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:39:48.487

这是一个例子：

```
use strict;

    use DBI;

    my $connect = DBI->connect('DBI:Oracle:', $dbuser, $dbpasswd); 
    my $query = "select sum(transaction_amnt) from comm_to_cand natural join cmte_id_to_geo where cycle = `$cycle`"; 
    my $query_handle = $connect->prepare($query); 
    $query_handle->execute(); 
    @cmte_money = $query_handle->fetchrow_array(); 

    print 'Money: '; 
    print @cmte_money; 

    if($#cmte_money >= 0) 
    { 
      print 'HI'; 
    } 
    else 
    { 
      print 'NOOOO'; 
    } 
```

我定义了一个常量变量`$cycle`，我是这样想的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T00:33:07.157

```
 my $connect = DBI->connect('DBI:Oracle:',$dbuser,$dbpasswd);
  # Tell the DBI that the query uses bind variable with ? (question mark)
  my $query = "select sum(transaction_amnt) from comm_to_cand natural join cmte_id_to_geo where cycle=?";
  my $query_handle = $connect->prepare($query);
  # Pass the value 
  $query_handle->execute($cycle); # assuming the variable is defined (otherwise it will pass as NULL into the query)
  $cmte_money = $query_handle->fetchrow_array();

  print 'Money: ';
  print $cmte_money;

  if($cmte_money > 0)
  {
    print 'HI';
  }
  else
  {
    print 'NOOOO';
  } 
```

# blackberry - 在 Java-ME 中转换整数向量

> ID：13004024
> 
> 赞同：1
> 
> 时间：2012-10-22T01:41:25.143
> 
> 标签：blackberry, java-me

我在转换整数向量时遇到问题，如下所示。转换字符串没问题，但我遇到了整数问题。

```
private Vector a = new Vector();
Record record = new Record();

record.setName((String) listName.elementAt(i));
record.setPrice((int) listPrice.elementAt(index));
a.addElement(record); 
```

下面是上课**记录**

```
package goldenicon;

public class Record {
    String name;  
    int price;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }
    public void setPrice(int price) {
        this.price = price;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:47:36.630

```
record.setPrice((int) listPrice.elementAt(index)); 
```

您不能将原始类型放入 Arraylist 或 Vectors 中。对于此类操作，您必须使用包装类，例如`Integer`而不是`int`，或`Double`而不是`double`。

同样，在从 Vector 中检索值时，您将获得 Integer 对象，而不是 int。

所以你必须编写这样的代码

```
record.setPrice(((Integer) listPrice.elementAt(index)).intValue()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T01:45:52.527

Java 不能将对象转换为原始类型。您必须调用对象的方法来执行此任务。如果你*知道*你的元素继承自`Number`，你可以这样做

```
record.setPrice(((Number) listPrice.elementAt(index)).intValue()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:46:07.377

您不能将对象强制转换为基元。

您可以改为执行以下操作：

```
 int z = (Integer) listPrice.elementAt(0); 
```

而 java 自动装箱会为你处理剩下的事情。

# jquery-ui - 如何使用 JqueryUI 创建具有自定义内容的新选项卡

> ID：13004030
> 
> 赞同：0
> 
> 时间：2012-10-22T01:42:57.733
> 
> 标签：jquery-ui, tabs

我使用 Jquery UI 创建选项卡。我想创建内容 tab1 = content tab2 的新标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:33:55.267

您可以使用一些 jQuery 来完成此操作。假设您的 jQuery UI 标记代码如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Tab 1</a></li>
        <li><a href="#tabs-2">Tab 2</a></li>
    </ul>
    <div id="tabs-1"></div>
    <div id="tabs-2">Test content</div>
</div> 
```

您可以使用类似于以下内容的内容将内容复制到第一个选项卡中。

```
var content = $('#tabs-2').html();
$('#tabs-1').html(content); 
```

此代码获取 tabs-2 div 中的 HTML 字符串并将其存储在变量中。然后它将 tabs-1 div 中的内容设置为变量。

# android - 处理带有指定数字输入的edittext的空白输入

> ID：13004033
> 
> 赞同：0
> 
> 时间：2012-10-22T01:43:44.393
> 
> 标签：android, null, android-edittext

当编辑文本字段（数字输入）留空时，我在处理错误时遇到了一些麻烦。所以我想要的是将edittext的值存储到一个字符串中，然后如果该值不是“”，我将转换为整数并执行一些操作。但是，该应用程序甚至在转换为整数行之前就停止了。有什么建议么？这是我的代码：

```
 bConfirm.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //number input edit field
            etInputValue = etInput.getText().toString();

            if (etInputValue.equals("")){
                AlertDialog.Builder inpte = new AlertDialog.Builder(ManualInputActivity.this);
                inpte.setTitle("Error");
                inpte
                    .setMessage("Please Fill in all Fields")
                    .setCancelable(false)
                    .setNegativeButton("Ok", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int id1) {
                            // TODO Auto-generated method stub
                            dialog.cancel();
                            Intent i4 = new Intent(getApplicationContext(), MainActivity.class);
                            startActivity(i4);
                        }
                    });
                AlertDialog inptDia = inpte.create();
                inptDia.show();
            }
else{//Do some calculations} 
```

日志猫：

```
 10-21 21:18:00.725: E/AndroidRuntime(1025): FATAL EXCEPTION: main
10-21 21:18:00.725: E/AndroidRuntime(1025): java.lang.NumberFormatException: Invalid int: ""
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.Integer.invalidInt(Integer.java:138)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.Integer.parseInt(Integer.java:359)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.Integer.parseInt(Integer.java:332)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.Integer.valueOf(Integer.java:490)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at com.diatrack.app.ManualInputActivity$2.onClick(ManualInputActivity.java:97)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.view.View.performClick(View.java:4084)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.view.View$PerformClick.run(View.java:16966)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.os.Handler.handleCallback(Handler.java:615)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.os.Looper.loop(Looper.java:137)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at java.lang.reflect.Method.invoke(Method.java:511)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-21 21:18:00.725: E/AndroidRuntime(1025):     at dalvik.system.NativeStart.main(Native Method) 
```

# python - python3.2的pycompile

> ID：13004034
> 
> 赞同：3
> 
> 时间：2012-10-22T01:43:48.433
> 
> 标签：python, python-3.x, bytecode, pyc

我正在运行 mint 13 并使用`apt-get`包管理系统安装了 python 3.2。我还安装了 python 2.7 和 3.2 pycompile 似乎是打包 python 2.7 代码并为 python 3.2 代码抛出异常的那个。

我环顾四周并尝试安装一些软件包，但找不到适用于 python 3.2 的 pycompile。如何获得 python 3.2 的 pycompile 工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T03:17:11.520

[`py_compile`](http://docs.python.org/release/3.2.3/library/py_compile.html)是一个标准库模块，可以在给定 Python 源代码的情况下生成字节码。*很少需要它。*

要编译 Python 3 源代码，您必须使用它附带的 py_compile 版本，而不是 Python 2.7 中的版本（如果您从命令行使用它）：

```
$ python3 -mpy_compile your_script.py 
```

要更改存储 pyc 文件的默认位置，您可以使用[函数](http://docs.python.org/release/3.2.3/library/py_compile.html#py_compile.compile)`cfile`的参数。[`py_compile.compile()`](http://docs.python.org/release/3.2.3/library/py_compile.html#py_compile.compile)

> 字节码是否使脚本运行得更快？

它可能（微不足道）。Python 编译器做的不多，所以它很快。

这是一个示例，字节码在人类可读形式中的外观：

```
>>> def f(o):
...     with o:
...         pass
...
>>> import dis   
>>> dis.dis(f)
  2           0 LOAD_FAST                0 (o)
              3 SETUP_WITH               5 (to 11)
              6 POP_TOP             

  3           7 POP_BLOCK           
              8 LOAD_CONST               0 (None)
        >>   11 WITH_CLEANUP        
             12 END_FINALLY         
             13 LOAD_CONST               0 (None)
             16 RETURN_VALUE 
```

所有繁重的工作都留给了在运行时解释字节码的 python 解释器。

> 还是仅用于分发？

文档提供了一个用例：一个带有 Python 模块的共享目录，只有窗帘用户可以编写。您可以禁用缓存字节码到磁盘，这样就可以使用存储在只读位置的 py 文件而没有相应的 pyc 文件。

> 为什么很少使用？

通常 pyc 文件是通过构建/安装过程创建的。如果没有 pyc 文件，则可以在导入模块时即时创建它们：

```
$ python -c 'import some_module' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:55:56.233

这就是我发现的：[http ://effbot.org/librarybook/py-compile.htm](http://effbot.org/librarybook/py-compile.htm)

我可以按照上面链接中的说明启动 python 3.2 shell。结果是一个奇怪目录中的 .pyc 文件。pyc 比 .py 文本文件大（这应该发生吗？）这不像 pycompile 那样令人满意 - 直到我发现我可能不得不忍受这个:-(

# batch-file - 根据记事本中的目录列表下载多个文件

> ID：13004036
> 
> 赞同：0
> 
> 时间：2012-10-22T01:43:54.920
> 
> 标签：batch-file

如何使用批处理脚本在 ftp 中下载多个文件。我在记事本中有一个包含确切目录的文件列表，我想迭代它们以下载每个文件。此外，应在下载时创建文件夹和子文件夹。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:55:51.107

Use the scripting function of FTP.exe.

Put the following batch file in your downloads directory, along with the list of files to be downloaded. Change `UserName` to the username you will use, `PassWord` to the password you will use, `ftp.site.com` to the name of the ftp site you'll be downloading from, and `filelist.txt` with the name and path of the file that the list of files to be downloaded is being kept in.

`makescript.bat`

```
:: Set needed Variables
set ftpUserName=UserName
set ftpPassword=PassWord
set ftpSite=ftp.site.com
set filelist=filelist.txt
set script=script.txt

if exist script.txt del script.txt

:: Create Script
echo connect %ftpSite%>> %script%
echo %ftpUserName%>> %script%
echo %ftpPassWord%>> %script%

for /f "tokens=0" %%x in (%filelist%) do (
  echo cd %%~px>> %script%
  if "%%~xx"=="txt" (
    echo ascii>> %script%
  ) else (
    echo binary>> %script%
  )
  echo get %%~nxx>> %script%
)

echo quit>> %script% 
```

The above assumes that there are no spaces in the paths or filenames, and that the file with the names and paths of the files to be downloaded is in this form:

```
\path\to\file\file.exe 
```

Run `makescript.bat`, then type, or add the following line to a batch file:

```
ftp -s:script.txt 
```

FTP will log on to the ftp site, send the username and password, change directories, then download a file, change directories, then download another file. This will repeat until all the files have been downloaded.

# tabs - AutoHotKey: "{Enter" 热字串

> ID：13004037
> 
> 赞同：0
> 
> 时间：2012-10-22T01:43:57.693
> 
> 标签：tabs, autohotkey, braces

当我开始每天使用 AutoHotKey 时，我认为在我的编码中实现它是一个好主意。

我希望它创建一个这样的结构：

```
{
    (Tab)
} 
```

`{`后跟 an时`Enter`输入。

到目前为止，我有：

```
:*{Enter::
    SendInput, {{}
    SendInput, {Enter}
    SendInput, {Enter}
    SendInput, {}}
    SendInput, {Up}
    SendInput, {Tab}
return 
```

但我不断收到错误和奇怪的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:07:52.240

为了让您的代码正常工作，必须包含 2 件事：1\. 必须使用反引号将大括号放在热字符串中 2\. 必须使用选项 'o' 以防止在之后发送返回发送命令中的大括号。

尝试以下操作：

```
:o:`{::{{}`n`n{}}{up}{tab} 
```

[热字符串选项](http://www.autohotkey.com/docs/Hotstrings.htm)

Note: You may need to modify ending characters for this to fire only on Enter. This will affect hotstrings globally.

```
#Hotstring EndChars `n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:28:56.780

试试这个。

```
Send, {{}{Enter}{tab}{Enter}{}}{up}{End} 
```

这对我有用，但是我的 AutoHotKey_L 不接受你的热键“* {Enter”，所以我使用了另一个临时热键“^q”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:03:53.280

This hotstring worked for me.

```
:*:`{`n:: 
```

That should catch it without need for settning the EndChars.

# python - 如果 Google App Engine cron 作业有 10 分钟的限制，那么为什么在正常 30 秒后我会收到 DeadlineExceededError 呢？

> ID：13004038
> 
> 赞同：3
> 
> 时间：2012-10-22T01:43:59.323
> 
> 标签：python, google-app-engine, cron, timeout

根据[https://developers.google.com/appengine/docs/python/config/cron](https://developers.google.com/appengine/docs/python/config/cron) cron 作业可以运行 10 分钟。但是，当我以管理员身份登录时通过转到 cron 作业的 url 来尝试对其进行测试时，它会超时并出现 DeadlineExceededError。最好我能说这发生在大约 30 秒内，这是请求的非 cron 限制。我是否需要做一些特别的事情来使用 cron 规则与正常限制进行测试？

这就是我正在做的事情：

*   转到 cron 作业的 url
*   这会调用我的处理程序，它会在我的 py 脚本中调用单个函数
*   此函数对谷歌的云 sql 进行数据库调用并循环遍历结果行，在使用 ebay 的 api 的每一行上调用一个函数以获取一些数据
*   来自 ebay api 调用的数据存储在一个数组中，在所有调用完成后全部写回数据库。
*   循环完成后，它将数据写入数据库并返回给处理程序
*   处理程序打印完成消息

在循环 ebay api 调用期间它总是有问题。这就像必须在循环中进行的 500 次 API 调用。

知道为什么我没有得到完整的 10 分钟吗？

编辑：如果您认为有帮助，我可以发布实际代码，但我假设这是一个我做错的过程，而不是代码中的错误，因为如果我将查询限制为大约 60 api，它就可以正常工作来电。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T02:12:37.120

GAE 执行 cron 作业的方式允许它运行 10 分钟。这可能是通过检查用户代理、IP 地址或其他方法来完成的（我只是在这里猜测）。仅仅因为您设置了一个 cron 作业来访问应用程序中的 URL，并不意味着来自浏览器的标准 HTTP 请求将允许它运行 10 分钟。

测试作业是否有效的方法是在没有限制的本地开发服务器上进行。或者等到您的 cron 作业执行并检查日志是否有任何错误。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:37:54.727

以下是如何澄清异常并判断它是否是 urlfetch 问题。如果异常是：

```
* google.appengine.runtime.DeadlineExceededError: raised if the overall request times out, typically after 60 seconds, or 10 minutes for task queue requests;
* google.appengine.runtime.apiproxy_errors.DeadlineExceededError: raised if an RPC exceeded its deadline. This is typically 5 seconds, but it is settable for some APIs using the 'deadline' option;
* google.appengine.api.urlfetch_errors.DeadlineExceededError: raised if the URLFetch times out. 
```

然后查看[https://developers.google.com/appengine/articles/deadlineexceedederrors](https://developers.google.com/appengine/articles/deadlineexceedederrors)，因为这是一个 urlfetch 问题。

如果是 urlfetch 超时，请尝试设置更长的持续时间（例如 60 秒）：

```
 result = urlfetch.fetch(url, deadline=60) 
```

# java - Android单选按钮在点击时什么也不做

> ID：13004039
> 
> 赞同：1
> 
> 时间：2012-10-22T01:44:07.110
> 
> 标签：java, android, radio-button

有没有办法让单选按钮在被点击时什么也不做？我正在尝试制作记分板，并且需要一种方法来显示周期/半/季度等。程序将选择单选按钮以显示期间/半/季度等。这是一个好方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:46:49.200

查看s的`clickable`属性`View`

> 定义此视图是否响应点击事件。
> 
> 必须是布尔值，“真”或“假”。

[http://developer.android.com/reference/android/view/View.html#attr_android:clickable](http://developer.android.com/reference/android/view/View.html#attr_android:clickable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:52:59.560

如果用户不需要单击单选按钮（即，如果它始终由程序控制），为什么不直接使用图像而不是单选按钮。

使用图像的好处是......

*   图片默认不可点击
*   它看起来会更好（你可以让图像看起来像一个真正的记分牌）
*   它不依赖于默认的 Android 外观（每部手机都不同）

# php - 在 PHP 中显示数组内容后跟一个字符串

> ID：13004041
> 
> 赞同：0
> 
> 时间：2012-10-22T01:44:29.953
> 
> 标签：php

这是我的代码结构的简明。我需要做的是打印复选框的值（仅当用户选中这些值时）以及作为消息附加的字符串。本质上，消息应该类似于“删除以下内容？10,20,30'

通过我的编码，我得到了类似的东西`Delete following?Array ( [0] => 15 [1] => 35 )`

有人可以帮我解决这个问题。非常感谢。（注意：并非所有正确的代码都应该被提及`<html></html>`并呈现与理解相关的内容（我认为足够了）

```
<?php
if(isset($_POST['submit']))
{
echo "Remove following?";
print_r ($_POST['del']);
}
?>

<html>
<form>
// inside html in a dynamically created table I have the following
<?php
echo "<td class='tbldecor1'><input type='checkbox' name='del[]' value='$cxVal'></td>";
echo "<td class='tbldecor2' style='text-align:center'>".trim($rec["firstrow"])."</td>";
<?
<div><input type="submit" name="deleterec" id="deleterec" value="Delete"></div>
</form>
</html> 
```

**编辑**：另外我在想，如果我要使用循环打印如何用用户选择的复选框值替换 1、2、3、4、5 值？我想的循环如下；

```
 <?php 
 $a = array(1, 2, 3, 4, 5); 
 foreach ($a as $b) 
 { 
 print $b . " "; 
 } 
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:49:07.523

[你可以在implode](http://php.net/implode)的帮助下做到这一点：

```
$vals = $_POST['del'];
echo "Remove following? " . implode( ", ", $vals ); 
```

**更新**（在@Waleed Khan 关于 HTML 注入的警告之后）：

```
// Make sure everything is a number (non-numeric will be replaced with boolean falses)
$vals = filter_var_array( $_POST['del'], FILTER_VALIDATE_INT ); 
// Remove all boolean falses
$vals = array_filter( $vals );
// String output
$valString = implode( ", ", $vals );
echo "Remove following? {$valString}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:50:53.153

而不是`print_r`打印出有关变量的可读信息的 ，请使用以下`implode`命令：

```
echo "Delete following? " . implode(", ",$_POST['del']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:50:59.743

你可能想调查一下[`implode()`](http://php.net/manual/en/function.implode.php)。

您的整个 for 循环可以替换为：

```
echo implode(" ", $a); 
```

# android - 使用 AtomicBoolean 监控 android 中正在运行的线程或方法

> ID：13004044
> 
> 赞同：0
> 
> 时间：2012-10-22T01:45:13.337
> 
> 标签：android, monitoring, atomic, lifecycle

我的服务类中有一个用于 android 应用程序的 AtomicBoolean。我想监视该变量，如果值为 false，它会关闭媒体播放器，如果值为 true，则让它继续运行。我应该在哪个生命周期方法中进行此测试 while 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:56:36.580

如果要监视，则需要在类的`onStartCommand()`方法中设置一个循环计时器`Service`。请记住，这会让您有责任在工作完成后停止服务。

# c# - C# - Reading files from a mapped network location

> ID：13004047
> 
> 赞同：1
> 
> 时间：2012-10-22T01:45:44.423
> 
> 标签：c#, networking, file-io

I have a simple C# app (it is WPF), and I am polling a network location for any new *.pdf. The app runs elevated.

The network location has been mapped to the local PC as P:\ so it is quite simple to just monitor P:\ by just doing a Directory.GetFiles("p:\", "*.pdf"). This technique works great.

However, the other day I ran into an exception: "Could not find part of the path 'P:\'" (DirectoryNotFoundException).

I noticed the drive was mapped to the PC, but when the IT guy clicked on the drive in windows explorer, it required a login and password. We were then able to view the P:\ in explorer, but my app still could not access the p:.

I had the IT guy remove the login/password and then it worked (but it could have been due to a restart too, I am not sure).

What is confusing me is that I am not aware of any moment where they 'enabled' password protection for the mapped location, so I am not sure when, why, or how it stopped working. I didn't even know it was password protected.

That leads to my very simple yes/no question: If a mapped drive is password protected in windows explorer, and a user types in the login/password so that they can get to it in explorer, is that enough such that my app does not need to login with user/pass information?

If the answer is no, then I will google the proper technique for accessing p:\ using a user/pass. But any explanation about my problem is surely appreciated.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:52:32.073

The reason it ask for password as the current used logon into windows do not have access to that network path, so did the program run with your logon.

What you need to do is get IT guys give the account which run your App the permission to access directly so that the password protection will be transparent for you

# iphone - CFImageSource 认为我的视网膜图像是实际大小的 2 倍

> ID：13004048
> 
> 赞同：0
> 
> 时间：2012-10-22T01:45:46.140
> 
> 标签：iphone, objective-c, ios, uiimage, cgimagesource

当我在将图像放入 UIImage 后对图像的大小进行 NSLog 时，它会以预期的大小出现。但是，当我使用 CGImageSource 尝试此操作时，我得到的图像大小是预期的两倍。这是我为此使用的代码：

```
NSString *fullPath = [self fullPathForThumbnail];

    NSURL *imageFileURL = [NSURL fileURLWithPath:fullPath];
    CGImageSourceRef imageSource = CGImageSourceCreateWithURL((__bridge CFURLRef)imageFileURL, NULL);

    if (imageSource == NULL) {
        // Error loading image
        return NO;
    }

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache,
                             nil];
    CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (__bridge CFDictionaryRef)options);

    CGSize originalSize;

    if (imageProperties) {
        NSNumber *width = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelWidth);
        NSNumber *height = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelHeight);

        originalSize = CGSizeMake(width.floatValue, height.floatValue);

        CFRelease(imageProperties);
    } 
```

这只发生在视网膜图像上；非视网膜图像似乎是正确的尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:03:51.040

扩展 bnoble 所说的话：

这里有两个不同的概念：图像的*大小*和图像中的*像素*数。这两个概念与图像的*分辨率*有关。

图像的大小以英寸、厘米或*打印机点*等单位给出。打印机的磅数其实有不同的定义，但IT界常用的是Adobe推出的那个，即：72磅=1英寸。

在 Cocoa 和之前的 NeXTStep 中，`size`图像的大小始终是物理尺寸，像素数是单独的度量。在独立于设备的图形系统中，您可以拥有 1 cm x 1 cm 的图像，即 72 dpi、150 dpi、300 dpi 或 2400 dpi。这些图像中的每一个中的像素数将不同，但大小始终相同。

iOS 上的`UIImage`类过去常常将两者等同起来，假设（和许多人一样）像素大小 = 物理大小，或者换句话说，分辨率是 72 dpi。

但是，这随着视网膜显示而改变，该`UIImage size`属性的文档现在有以下内容：

> 在 iOS 4.0 及更高版本中，该值反映了图像的逻辑大小，以磅为单位。在 iOS 3.x 及更早版本中，此值始终反映以像素为单位测量的图像尺寸。

所以 的`size`属性`UIImage`是给你物理尺寸。`kCGImagePropertyPixelWidth`另一方面，该属性为您提供像素数，对于 2x 视网膜图像，预计像素数是大小点数的两倍。

# jquery - ASP.Net WebAPI 删除动词不起作用

> ID：13004052
> 
> 赞同：1
> 
> 时间：2012-10-22T01:46:39.227
> 
> 标签：jquery, cross-domain, asp.net-web-api, cors

我正在使用带有 asp.net webapi 的 IIS 7.5 来删除记录 ID。我可以让它在 Safari 中工作，但不能在 Firefox 中工作。这是 jQuery Ajax 提交的请求/响应的图像：

[http://screencast.com/t/Ckls9nO8D](http://screencast.com/t/Ckls9nO8D)

这是我的 jQuery Delete 提交的代码片段：

```
 var deleteGame = function(gameId)
    {       
        var d = $.Deferred();
        var url = Enum.RootUrl + Enum.DeleteGameUrl + gameId;
        jQuery.support.cors = true;
        $.ajax(
        {
            url: url,
            type: 'Delete',
            cache: false,
            crossDomain: true,
            processData: true,
            success: function () 
            {
                d.resolve();
            },
            error: function(XMLHttpRequest, textStatus, errorThrown)
            {
                //alert("error happened AGAIN:\n" + JSON.stringify(XMLHttpRequest) );
            }
        });

        return d.promise();
    }; 
```

这是生成的 jquery 提交 URL： [http ://local.guessalist.com/api/game/46](http://local.guessalist.com/api/game/46)

我不确定为什么它适用于 Safari 而不是 Firefox。请帮忙。

请求标头中似乎缺少 Access-Control-Request-Headers。我不确定这是否是问题的原因。

在 Safari 和 Chrome 中玩过这个之后，我得到“拒绝设置不安全的标头”Access-Control-Request-Headers”选项[http://local.guessalist.com/api/game/64](http://local.guessalist.com/api/game/64) 405（不允许的方法)" 通过浏览器的控制台在每个浏览器中出现错误，但允许继续删除操作。不知道我在这里做什么。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:56:43.750

经过几个小时的研究、故障排除、诅咒和关闭我的代码，我终于在这种方法的帮助下让它工作了：

[http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)

我最初只尝试了 WebAPI 方法，但没有成功。然后我删除了我正在尝试的所有内容，并按照上面链接中描述的 IIS 方法进行操作，一切正常。我不确定为什么。我只将这行代码添加到 Web.Config 中，没有其他内容：

```
 <modules runAllManagedModulesForAllRequests="true">
        <add name="CorsHttpModule" type="Thinktecture.IdentityModel.Http.Cors.IIS.CorsHttpModule"/>
    </modules> 
```

这是我做的唯一配置，我可以进行跨域删除。我假设其他动词也可以，我只用 Delete 测试过。所以，我很感激我可以让我的代码工作，但我想知道为什么它可以工作，因为我只做了上面链接中引用的部分配置。如果有人偶然发现这一点并可以解释，我将不胜感激。谢谢。

# github - 如何使用命令行在 Github 中添加协作者？

> ID：13004061
> 
> 赞同：3
> 
> 时间：2012-10-22T01:47:40.903
> 
> 标签：github, terminal, github-api

我想知道如何使用命令行将协作者添加到 GitHub 中的私人仓库。我在 Mac (10.6.8) 或 Ubuntu 11.04 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T07:02:45.477

github [gem](https://github.com/defunkt/github-gem)和 [hub](https://github.com/defunkt/hub)（这是 github 的两个流行的命令行界面）都没有提供将协作者添加到 repo 的功能。这意味着从命令行添加协作者的唯一方法是使用 curl 并直接访问 github api（[github api](http://developer.github.com/v3/repos/collaborators/#add-collaborator)允许添加/删除/列出协作者）。

例如，我在自己的存储库中添加了一个合作者，以及我这样做时 github 的响应（响应不是很有帮助 - 但这是你成功的结果）：

```
> curl -i -u "my_user_name:my_password" -X PUT -d '' 'https://api.github.com/repos/my_gh_userid/my_repo/collaborators/my_collaborator_id'

HTTP/1.1 204 No Content
Server: nginx
Date: Sun, 25 Nov 2012 06:45:10 GMT
Connection: keep-alive
Status: 204 No Content
X-RateLimit-Limit: 5000
X-GitHub-Media-Type: github.beta
X-RateLimit-Remaining: 4999
X-Content-Type-Options: nosniff
Cache-Control: 
```

相关的 add collaborator API 页面在[这里](http://developer.github.com/v3/repos/collaborators/#add-collaborator) ，[这个](https://gist.github.com/2288960)页面解释了如何使用 curl 从命令行使用 github API。希望这可以帮助。

仅供参考，当我想要完全按照您的要求进行操作时，我找到了您的答案 - 并且找不到令人满意的答案（除了使用 curl ...）。我打算请教“集线器”的维护者，看看他为什么没有将这个功能添加到他的工具中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T01:51:09.570

您可以为他们创建一个令牌 - 看看[https://help.github.com/articles/creating-an-oauth-token-for-command-line-use](https://help.github.com/articles/creating-an-oauth-token-for-command-line-use)。

不过，通过 Web 界面执行此操作通常要容易得多。

# java - 使用 SnakeYaml 向节点添加注释

> ID：13004066
> 
> 赞同：7
> 
> 时间：2012-10-22T01:48:32.707
> 
> 标签：java, comments, yaml, nodes, snakeyaml

作为我正在进行的一个大型项目的一部分，我正在内存中构建一个 YAML 文件，然后将其转储到一个文件中，在整个过程中使用 SnakeYaml。我的 YAML 文件长约 500 行，旨在供没有任何编程经验的人使用，因此必须对大多数节点进行注释。我过去三个小时一直在盯着[SnakeYaml 文档](http://code.google.com/p/snakeyaml/wiki/Documentation)，并在谷歌上搜索了一下，但没有任何结果。我可以总结以下三件事之一：

1.  我可能完全错过了它。
2.  它不存在（不太可能，如果它*确实*存在）。
3.  这是不可能的。

我倾向于第三个，但在我编写自己的 YAML 转储程序之前，我想问问 StackOverflow 社区这是否可能？那么，是吗？其中的一些东西`yamlfile.setComment("a.random.node", "Its a random node!");`会是幸福，但如果它不是那么简单的话，对我来说并不重要。

如果不是，有人可以给我一些关于我应该做些什么来完成这个任务的指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:35:32.923

由于注释不是表示树的一部分，因此 SnakeYAML 会忽略它们。由于 YAML 文档只是文本文档，因此可以使用任何模板处理器。

# wcf - 部署使用 netTcpBinding（非 IIS 托管）的 WCF 服务

> ID：13004071
> 
> 赞同：3
> 
> 时间：2012-10-22T01:49:46.063
> 
> 标签：wcf, wcf-binding, wcf-endpoint

我正在通过 netTcpBinding 使用 WCF 开发客户端-服务器应用程序。

我的解决方案有 2 个项目，客户端一个和服务器一个。

到目前为止，我了解到为了让 WCF 服务正常工作，我必须对 app.config 文件进行一些配置。我做到了，一切正常。

但是现在当我将服务部署到服务器以使客户端连接时，我很难找到该怎么做。我的问题是，当我将服务部署到“localhost”以外的位置时，我不知道我必须在 app.config（或任何其他位置）中修改什么。

这是我的服务器应用程序的 app.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MMServidor3.ServidorCliente">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="MMServidor3.iServicioMM">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:4005/MMServidor3/" />
            <add baseAddress="net.tcp://localhost:4006/MMServidor3/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata />
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

“mex”端点和http协议基地址是为了让客户端获取元数据（否则我无法获取）。

因此，由于我事先不知道要部署服务器的 IP 地址是什么，我希望从配置或 ini 文件中读取端点（我宁愿不必为每个端点进行编译） .

另外，我必须在客户端修改什么？这是客户端 app.config 的相关部分：

```
<system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_iServicioMM" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                    maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Transport">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:4006/MMServidor3/" binding="netTcpBinding"
                bindingConfiguration="NetTcpBinding_iServicioMM" contract="MMServicioServidor.iServicioMM"
                name="NetTcpBinding_iServicioMM">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:39:55.870

配置文件特定于环境。通常，您会（如果需要）将`localhost`服务地址中的位更改为 IP 地址或名称。

对于客户来说是一样的。应在其生产环境中配置生产客户端以使用生产服务的 URL。当然，在您知道服务将位于何处之前，您无法配置客户端*。

不幸的是，您必须单独指定每个客户端端点的 URL，有关更多信息，请查看[此相关问题](https://stackoverflow.com/questions/2016285/wcf-client-configuration-base-address)。您可以制定的另一种选择是为客户端“BaseAddress”实现您自己的设置，并使用它以编程方式[指定端点地址](http://msdn.microsoft.com/en-us/library/ms733749.aspx)。

* * *

* 如果您希望在定位服务和客户端方面获得更大的灵活性，您可以研究[WCF 发现机制](http://msdn.microsoft.com/en-us/library/dd456782.aspx)。

* * *

** 作为另一个说明，如果您希望为不同的环境自动创建配置文件，我可以推荐使用（例如）[SlowCheetah](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)。

# android - 用于地理定位的 android 通知

> ID：13004075
> 
> 赞同：2
> 
> 时间：2012-10-22T01:50:29.063
> 
> 标签：android, google-maps

我在 Google 地图（引脚）上制作了一个具有多个地理位置的 android 应用程序，我想在用户靠近这些位置之一时发送通知。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:18:19.473

这实际上相当容易。首先，设置一个监控您的位置的应用程序。 [这篇](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)文章将向您展示更多。

一旦你知道你的位置，你就可以简单地确定你是否在它的某个范围内。要计算两点之间的距离，请尝试以下`Location`课程：

```
Location.distanceBetween(startLatitude, startLongitude, endLatitude, endLongitude, results); 
```

`results`是 a `float[]`，所以要返回距离，只需使用`float distance = results[0];`.

因此，简而言之，编译一个您想要识别的航点列表。然后，在您的 GPS 监控代码中，定期检查您与点列表之间的距离。如果你在一个阈值之内，比如 100m，然后以`Toast`消息或其他方式发送通知。

祝你好运！

# html - 如何在 flex 中创建类似于结构的 HTML 表格

> ID：13004076
> 
> 赞同：0
> 
> 时间：2012-10-22T01:50:50.527
> 
> 标签：html, apache-flex

html 表编码结构看起来像下面显示的代码
`<table>`
`<tr>`
`<td>Text</td>`
`<td>input text field</td>`
`</tr>`
`<tr>`
`<td></td>`
`<td></td>`
`</tr>`
`<tr>`
`<td>submit butto</td>`
`</tr>`
`</table>`
如何在 flex 中创建这样的表结构，该表结构在 flex 应用程序中具有上述给定的行和列格式，并且还可以选择 colspann 和 rowspan 交替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:10:46.987

有很多方法。我可能会从查看[Form layout container](http://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e973827a8e912ac2b325a4-8000.html)开始。这对于两列布局非常有用，尽管它使您几乎无法控制主要用于的第一列

理论上，您也可以通过使用嵌入式容器来创建类似的东西，但我认为我不会推荐这种方法，因为我怀疑您最终会得到很多不必要的容器。

您也可以编写自己的布局类。更多关于[布局的信息在这里](http://www.adobe.com/devnet/flex/articles/spark_layouts.html)。这是最强大/最灵活的方法，但也可能是最耗时的。

# c# - 向 EF 添加新表

> ID：13004081
> 
> 赞同：1
> 
> 时间：2012-10-22T01:51:12.467
> 
> 标签：c#, entity-framework

我们正在将位于 SQL Server 2005 数据库上的旧 VB6 应用程序升级到实体框架解决方案。数据库保持不变，除了 - 我们正在添加一个新表。当实体框架安装在客户端 PC 上时，它是否可以维护现有结构 - 并且只需添加一个新表？

这就是 Code First 的工作方式吗？我可以 100% 确定不会修改其他表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:00:09.067

您有两个选择，使用数据库编辑器（例如 SQL 管理工作室）创建表，然后您可以将其映射到 ef 实体，或者使用迁移 ef 让您通过 ef 更新数据库。

看看这里的迁移教程：http: [//msdn.microsoft.com/en-gb/data/jj591621](http://msdn.microsoft.com/en-gb/data/jj591621)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:48:06.597

我不认为，如果您有一个现有的数据库并且只想添加一个表，那么切换到代码优先的努力是值得的。

可以将代码优先类映射到现有数据库（逆向工程代码优先）。实际上，我对那个工作流程不是很有经验，但我知道你可以。您必须处理大量手动映射（使用 DataAnnotations 或 Fluent API），因此在您的情况下，我建议使用 Entity Framework Database First 工作流程，因为添加单个表可以为您节省大量工作。

这个链接有一些有用的信息：[亚瑟维克斯博客 - 不要错误地首先使用代码](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T11:55:32.517

我使用的是**数据库优先**方法，因为数据库开发团队正在为我在 SQL 服务器上的数据库中进行我需要的更改。

因此，每当数据库中的模式发生变化时，我都必须更新 EDMX。

**注意：**直接更改一个表对我不起作用，因为 VS 并不总是能正确检测到更改（对于这个问题，如果您有兴趣，[这里有一些详细信息）。](https://stackoverflow.com/q/13054212/1016343)

因此，我正在使用以下解决方法（重新生成所有表）：

1.  在**VS 2012中，****双击**打开 EDMX 文件。显示了表格的图形表示。

2.  **左键单击**EDMX 设计器，然后按**CTRL+A**选择所有表。然后，按**DEL**删除它们。

3.  **右键单击**EDMX 设计器并在上下文菜单中选择**“Update Model from Database ...” 。**

4.  **更新向导**打开。在**“添加”选项卡**中，选中**“表”**，并根据需要选中**“生成的对象名称的复数或单数化”**、**“在模型中包含外键列”**以及可选的“将选定的存储过程和函数导入实体模型” ”。通常，我使用“复数...”和“包括外键列...”选项。

5.  单击**完成**。现在按**Ctrl+S**保存。

该解决方法对我来说很好，并且只需要一分钟即可可靠地更新模型。

# javascript - 如何使用jquery隐藏两个字段

> ID：13004089
> 
> 赞同：-5
> 
> 时间：2012-10-22T01:52:41.073
> 
> 标签：javascript

这就是我所拥有的：

```
<script type="text/javascript">
function toggle(value){
  if(value=='show') { document.getElementById('busblock').style.display='block'; }
               else { document.getElementById('busblock').style.display='none'; }
}
</script>

<script type="text/javascript">
 function toggle(value){
  if(value=='show') { document.getElementById('guyblock').style.display='block'; }
           else { document.getElementById('guyblock').style.display='none'; }
  }
</script>
</head>
<body>

<form action="http://qa.onlinelabtests.com/guestlist.php" method="post">
First Name: <input type="text" name="fname" /> <br />
Last Name: <input type="text" name="lname" /> <br />
E-mail: <input type="email" name="email" /> <br />
Gender: <br />
<input type="radio" name="gender" value="male" onclick="toggle('show');">&nbsp;&nbsp;Male <br />
<input type="radio" name="gender" value="female" onclick="toggle('hide');">&nbsp;&nbsp;Female <br />

<div id="guyblock" style="display:none">
Referred By
<select name="tke">
<option value="915">Cameron</option>
<option value="930">Edgar</option>
<option value="950">JD</option>
<option value="1010">Estaban</option>
</select>
</div>

<div>
Bus Transportation <br />
<input name="bus" type="radio" value="yes" onclick="toggle('show');"> &nbsp;&nbsp;Yes<br />
<input name="bus" type="radio" value="no" onclick="toggle('hide');">&nbsp;&nbsp;No<br />
</div>

<div id="busblock" style="display:none">
Bus Time
<select name="departtime">
<option value="915">9:15PM</option>
<option value="930">9:30PM</option>
<option value="950">9:50PM</option>
<option value="1010">10:10PM</option>
</select>
</div>

<input type="submit" value="Register" />
</form> 
```

但一次只有一个有效（如果同时选择了女性和是巴士，它会隐藏第一个）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:56:52.167

您的两个函数都有名称*toggle()*。您将需要重命名它们或重新编码它们以允许它们动态处理变量：

重命名将是：

```
 function toggleMale(value){
 ...
 function toggleFemale(value){ 
```

更好的解决方案是使函数动态化，例如：

```
function toggle(block, value) {
   if(value=='show') { 
      document.getElementById(block).style.display='block';
   }
   else {
      document.getElementById(block).style.display='none';
   }
} 
```

这将被调用：

```
onclick="toggle('busblock', 'show');" 
```

或者类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:57:35.697

You need two different function names, as declaring the second one will overwrite the first. Change the name to something more declarative (say, `toggleGender`) See my change [here.](http://jsfiddle.net/somekittens/6HT2x/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:55:13.817

1.  您正在定义两个具有相同名称的 JS 函数，因此只有最后一个可以工作。
2.  我看不到你在那里编写任何 jQuery，你只是在使用 Javascript

# c# - 使用 ASP.NET Web API 并排基本和表单身份验证

> ID：13004091
> 
> 赞同：13
> 
> 时间：2012-10-22T01:52:53.130
> 
> 标签：c#, asp.net-mvc, .net-4.0, azure, asp.net-web-api

免责声明：首先让我说我是 MVC4 + Web Api + 一般 Web 服务 + JQuery 的新手。我可能从错误的角度攻击这个。

我正在尝试在 C# 中为 .NET 4 构建一个 Web MVC App + Web API 以在 Azure 中部署。Web api 将被移动客户端（iOS，使用 RestKit）使用。

Web MVC App 会比较简单。我们想对其使用 Forms Authentication 和 SimpleMembership - 我们已经实现并且工作正常。

我们将使用来自 JQuery (Knockout) 脚本的 Web API 方法来填充网页片段。因此，我们希望 JQuery 使用通过 Forms Authentication 认证的相同身份。

但是，这个想法是移动客户端可以直接调用 Web Api。这些没有表单身份验证。

我们一直在研究 Thinktecture 身份模型（[http://nuget.org/packages/Thinktecture.IdentityModel](http://nuget.org/packages/Thinktecture.IdentityModel) [https://github.com/thinktecture/Thinktecture.IdentityModel.40](https://github.com/thinktecture/Thinktecture.IdentityModel.40)）。我们将 BasicAuth 和 AcessKey 处理程序添加到配置中并且它可以工作（参见下面的代码）。

当您尝试在未经身份验证的情况下访问 webapi 时，浏览器会显示基本身份验证对话框并按预期工作。

“问题”是当您已经通过表单身份验证登录并尝试调用 Web Api 方法时，您仍然会看到基本身份验证对话框。换句话说，Thinktecture IdentityModel 似乎完全忽略了表单身份验证。

我的问题是：

1.  我的预期正确吗？一旦我完成了表单身份验证，我不应该做任何其他事情来让 JQuery 脚本等从同一个浏览器用户会话访问 Web API。
2.  我如何解决它？
3.  如果我的预期不正确；这应该如何工作？即：如何使 JQuery 脚本进行身份验证？

我知道在 Stackoverflow 中有很多类似的问题，老实说，我查了很多资料，看过视频等，但要么我遗漏了一些明显的东西，要么没有明确的文档可供技术新手使用。

我很感激帮助。谢谢。

```
public static AuthenticationConfiguration CreateConfiguration()
{
var config = new AuthenticationConfiguration
        {
            DefaultAuthenticationScheme = "Basic",
            EnableSessionToken = true,
            SetNoRedirectMarker = true
        };            

config.AddBasicAuthentication((userName, password) => userName == password, retainPassword: false);
config.AddAccessKey(token =>
        {
            if (ObfuscatingComparer.IsEqual(token, "accesskey123"))
            {
                return Principal.Create("Custom",
                    new Claim("customerid", "123"),
                    new Claim("email", "foo@customer.com"));
            }

            return null;
        }, AuthenticationOptions.ForQueryString("key")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:00:55.617

这是我之前提出的这个问题的解决方案。

> **注意：**此解决方案不涉及 Thinktecture 身份模型。

我有一个抽象的[BasicAuthenticationHandler](https://github.com/WebAPIDoodle/WebAPIDoodle/blob/dev/src/WebApiDoodle.Web/MessageHandlers/BasicAuthenticationHandler.cs)类，它是一个委托处理程序。您可以通过安装最新的稳定[WebAPIDoodle NuGet 包](http://nuget.org/packages/WebAPIDoodle)来获取此处理程序。

如果请求已经过身份验证（例如：通过表单身份验证），您可以向此基本身份验证处理程序提供提示以抑制身份验证过程。您需要注册的自定义处理程序如下所示：

```
public class MyApplicationAuthHandler : BasicAuthenticationHandler {

    public MyApplicationAuthHandler() 
        : base(suppressIfAlreadyAuthenticated: true) { }

    protected override IPrincipal AuthenticateUser(
        HttpRequestMessage request, 
        string username, 
        string password, 
        CancellationToken cancellationToken) { 

        //this method will be called only if the request
        //is not authanticated.

        //If you are using forms auth, this won't be called
        //as you will be authed by the forms auth bofore you hit here
        //and Thread.CurrentPrincipal would be populated.

        //If you aren't authed:
        //Do you auth here and send back an IPrincipal 
        //instance as I do below.

        var membershipService = (IMembershipService)request
            .GetDependencyScope()
            .GetService(typeof(IMembershipService));

        var validUserCtx = membershipService
            .ValidateUser(username, password);

        return validUserCtx.Principal;
    }

    protected override void HandleUnauthenticatedRequest(UnauthenticatedRequestContext context) {

        // Do nothing here. The Autharization 
        // will be handled by the AuthorizeAttribute.
    }
} 
```

作为最后一步，您需要将`System.Web.Http.AuthorizeAttribute`（不是`System.Web.Mvc.AuthorizeAttribute`）应用到您的控制器和操作方法，以授予特定角色和用户的授权。

我希望这有助于解决您的问题。

# java - 为什么调用 Thread.sleep 时我的 android 应用程序会跳帧？

> ID：13004096
> 
> 赞同：3
> 
> 时间：2012-10-22T01:54:18.983
> 
> 标签：java, android, sleep

我正在编写一个 android 应用程序，它需要在千分之几秒内显示一些文本，然后再次将其空白。我现在拥有的是显示文本，然后使用 Thread.sleep，然后将文本设置回 null。相反，当我按下按钮时，应用程序会挂起一段时间，文本永远不会出现，并且 logcat 会显示“跳过了 xxx 帧！应用程序可能在其主线程上做的工作过多。” 发生了什么事，有没有更好的做事方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:03:28.967

尝试使用可运行的。

```
private Handler mHandler = new Handler();

//code to make text appear...

    mHandler.postDelayed(makeTextDisapear , 3000); // Replace 3000 with the number of milliseconds you want the text to display.

    private Runnable makeTextDisapear = new Runnable() {
            public void run() {
                // code to make text dissapear

                }
            }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-01T08:23:20.547

虽然其他答案有助于解决您的问题，但您的问题也是为什么会发生这种情况：

调用任一静`Thread.sleep()`态方法会使调用该方法的线程进入暂停状态（大致）您指定的时间量（不能保证与指定时间完全匹配）。

在 Android 中，必须在“主”ui 线程上执行 Ui 操作，因为 Ui 框架并非设计为线程安全的。也就是说，当您设置 a 的文本时，您必须在主线程上 `TextView`调用。将向主要发布一条消息以重新布局并使 TextView（和父母）无效。在不久的将来，这些消息将被处理并更新视图层次结构。`textView.setText(...)``setText``Looper`

`setText`不直接做这个工作，因为这个工作量很大，直接做不会让框架批量处理这样的请求。

如果您随后调用`Thread.sleep(...)`，则您将主 ui 线程置于暂停状态，但是，该线程通常会执行 TextView 和父级的重新布局和失效。

Android 希望能够在 16 毫秒内渲染一个新帧（如果有任何变化）以保持大于 60 fps。如果您的主线程正在做一些密集的事情，或者被暂停（通过睡眠）任何会威胁到 16 毫秒的重要时间，那么您看到的错误消息将发布到 logcat。

虽然在 Lollipop 中实际渲染是在它自己的渲染线程上执行的，但它仍然需要从主线程及时更新。

至于如何解决这个问题，请参阅 Jason 的回答，或者使用

```
textView.setText("show me!");    
textView.postDelayed(new Runnable() { 
     public void run() { 
         textView.setText(""); 
     }
}, 30); 
```

如果这种情况经常发生，请`Runnable`通过将其保留为字段来避免分配每次。

请注意，在任何一种情况下，创建匿名内部类 (the `Runnable`) 都有可能导致 Activity 内存泄漏，但这是另一回事。

# php - 有没有办法在一行中调用类实例的方法？

> ID：13004097
> 
> 赞同：0
> 
> 时间：2012-10-22T01:54:23.187
> 
> 标签：php, instance

我使用一个小型框架，它的主要对象可通过它的子级（控制器、模型、视图）使用

```
mainobject::instance() 
```

框架的 Wiki 建议添加所需的控制器方法

```
$mainobject = mainobject::instance() 
```

因此，它通过单变量可用于模型。我怀疑这是否真的很方便，在每个模型的方法中定义该变量以获取例如全局配置变量。

```
class MyAnotherModel extends FrameworksModel 
{
    …
    my_method() {
        global $mainobject;
        …
        if ($mainobject->config['something_here'];
        $mainobject->controller->othermodel->othermodelsarray['somestring']; 
    }
} 
```

无论如何，这是一个巨大的字符串，我宁愿让它更大一点，调用一个实例，然后每次写两个字符串。我的意思是，写

```
mainobject::instance->config['goods']
mainobject::instance->controller->othermodel->othermodelsmethodgiveme('power'); 
```

但我不知道是否可以实现，因为控制器类不提供调用实例作为变量。我想可能通过 getter 方法……如果有这样的方法。那么不重写原来的 mainobject 类我能做什么呢？

inb4 长字符串不方便输入 - 没有问题，因为我可以在 emacs 中使用缩写词并缩短输入短语。

# data-warehouse - 作为事实表的可编辑数据

> ID：13004103
> 
> 赞同：0
> 
> 时间：2012-10-22T01:55:34.460
> 
> 标签：data-warehouse, dimension, fact

我正在为销售报告系统设计一个数据仓库，但对可更新的销售计划数据有疑问。数据以时间、产品、销售商为代理键，数量为指标。通常使用这种数据，我会创建一个事实表并对此感到满意。

我的问题是销售计划不是固定不变的，可以在销售期间进行编辑，并且必须跟踪这些变化。这是一张大表，所以如果我将其视为具有缓慢变化的维度的维度表，它会变得如此巨大。另一方面，数量必须是精确的数字，用于计算，因此 Raph Kimball 建议的小尺寸不起作用。

请给我有关此用例的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:50:05.590

我相信您必须像使用维度一样使用销售计划，但您必须为历史定义一个字段。这不是销售计划的 ID：

```
 Id     Sale-plan
 1      "Type one" 
```

相反，您有：

```
 Id-sale-plan-history     Sale-Plan     Date
    1                        "Type One"    Id_Date 
```

然后在您的事实表中，您放置 Id-sale-plan-history。

# mongodb - 在 MongoDB 中中止 reIndex() 命令后解锁集合？

> ID：13004104
> 
> 赞同：2
> 
> 时间：2012-10-22T01:55:37.563
> 
> 标签：mongodb, mongohq

我试图减小 mongo 集合上的索引大小并运行`db.collection.reIndex()`.

大约 90 分钟后，我开始认为它以某种方式被锁定并试图取消。现在（取消后大约 2 小时）该集合似乎已锁定所有写入命令。我所有的其他收藏都允许写入。有什么方法可以解锁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:16:43.553

执行此操作所需的时间取决于几件事，即：

1.  集合的大小。
2.  该集合中的索引数。

这是一个阻塞操作。

简而言之，一个小型数据库（小于 500MB）应该只需要几分钟来重新索引，而一个较大的数据库（5-10GB 或更多）可能需要更长的时间……随着数据库大小的增加，长度也会增加。

虽然最好让该过程完成，但如果您绝对需要停止它，那么重新启动该过程将是执行此操作的方法。此外，将支持票发送至：support@mongohq.com（包括数据库名称），团队可以在那里提供更多帮助。

# ios5 - 在第二个 UIViewController 中设置 UIImageView

> ID：13004105
> 
> 赞同：0
> 
> 时间：2012-10-22T01:55:56.517
> 
> 标签：ios5, memory-management, uiviewcontroller, uiimage

我`UIViewControllers`在故事板中有两个（带有`NavigationController`）。

我正在访问相机并在 ViewController1 中拍照。我想切换到 ViewController2 并在`UIImageView`.

**ViewController2 H 文件**

```
@interface ViewController2 : UIViewController

{

-IBOutlet UIImageView *matchImage;

}

-(IBAction)restart:(id)sender;

@property (retain, nonatomic) UIImageView *matchImage;

@end 
```

**ViewController1 M 文件**

在我的代码拍照后，我尝试使用以下语法切换视图

```
ViewController2 *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController2"];

[self.navigationController pushViewController:vc animated:YES];

[vc.matchImage setImage:tempImage]; 
```

我第一次拍照时效果很好，我在 ViewController2 中看到了图像。

但是我在 ViewController2 上有一个后退按钮，语法如下

**ViewController2 M**文件

```
-(IBAction)restart:(id)sender

{

    ViewController1 *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController1"];

    [self.navigationController pushViewController:vc animated:YES];

} 
```

这成功返回 ViewController1，我可以再次拍照并重复该过程。但是在重复该过程大约 3-4 次后，我收到了 Received Memory Warning 并且应用程序崩溃了。在 Xcode 中运行分析器不会产生任何问题。

如果我注释掉以下行

```
[vc.matchImage setImage:tempImage]; 
```

然后我可以执行无休止的捕获（超过 50 个没有问题），但当然 ViewController2 不显示图像（它是空白的）。所以这让我相信我需要释放 matchImage （特别是因为它是一个具有保留属性的属性）。但这似乎没有帮助。任何帮助将不胜感激。我还在学习内存管理。

**更新**

这是更多信息，在视图之间来回切换 3 次迭代后，这是调试器输出。我在两个 ViewController viewDidUnload 和 didReceiveMemoryWarning 方法中放入了 NSLog 语句。因此，当发生 Received memory 警告时，似乎正在卸载 2 个视图控制器的 3 个“实例”。因此，对于视图控制器之间的每次切换迭代，我似乎都得到了一个新副本。这是你所期望的吗？

2012-10-22 08:23:32.008 TestApp [787:707] 收到内存警告。

2012-10-22 08:23:32.015 TestApp [787:707] viewDidUnload ViewController1: 0xfd52250

2012-10-22 08:23:32.017 TestApp [787:707] didReceiveMemoryWarning ViewController1: 0xfd52250

2012-10-22 08:23:32.023 TestApp [787:707] viewDidUnload ViewController2

2012-10-22 08:23:32.025 TestApp[787:707] didReceiveMemoryWarning ViewController2

2012-10-22 08:23:32.028 TestApp [787:707] viewDidUnload ViewController1: 0x16dc30

2012-10-22 08:23:32.030 TestApp [787:707] didReceiveMemoryWarning ViewController1: 0x16dc30

2012-10-22 08:23:32.033 TestApp [787:707] viewDidUnload ViewController2

2012-10-22 08:23:32.037 TestApp [787:707] didReceiveMemoryWarning ViewController2

2012-10-22 08:23:32.040 TestApp [787:707] viewDidUnload ViewController1: 0x171de0

2012-10-22 08:23:32.042 TestApp [787:707] didReceiveMemoryWarning ViewController1: 0x171de0

2012-10-22 08:23:32.044 TestApp[787:707] didReceiveMemoryWarning ViewController2

2012-10-22 08:23:32.046 TestApp [787:707] didReceiveMemoryWarning ViewController1: 0xfd87580

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:46:15.513

您在`restart`方法中所做的不是回到以前的控制器，而是将第一个控制器类型的另一个副本添加到导航堆栈。尝试告诉导航控制器`popViewControllerAnimated:`。

# regex - 使用 emacs 正则表达式样式的查找命令的字符类

> ID：13004106
> 
> 赞同：0
> 
> 时间：2012-10-22T01:56:16.487
> 
> 标签：regex, shell, emacs, find

例如，我想找到一个以`numbers`+结尾的文件`.bed`，如果使用它，它可以工作：

```
find . -regex ".*/[0-9]+\.bed" 
```

据我所知，**find**默认使用`emacs regex style`，所以我找到了这个页面：[http](http://www.gnu.org/software/emacs/manual/html_node/elisp/Char-Classes.html#Char-Classes) ://www.gnu.org/software/emacs/manual/html_node/elisp/Char-Classes.html#Char-Classes 然后尝试`[[:digit:]]`使用replace `[0-9]`，但这些命令都不适合我。

```
find . -regex ".*/[:digit:]\.bed" 
```

或者

```
find . -regex ".*/[[:digit:]]\.bed" 
```

有人对我在命令中的错误有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:32:20.807

您需要使用不同的正则表达式类型。例如，尝试：

```
find . -regextype posix-extended -regex ".*/[[:digit:]]+\.bed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:52:59.043

我怀疑`find`文档已经过时：Emacs 接受的正则表达式语法多年来发生了变化，但`find`'s 显然没有相应改变。

# java - 使用 -Xlint 重新编译

> ID：13004111
> 
> 赞同：1
> 
> 时间：2012-10-22T01:56:52.117
> 
> 标签：java

在编写了一个很长的 GUI 程序并在 Eclipse 中获得了正确的结果之后，最可怕的错误是在终端中运行 seam 程序并看到这个错误而吓坏了：

```
Note: ./au/edu/uow/UserInterface/UserInterface.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

我之前一直在寻找解决这个问题。解决方案是用另一个版本的编译器重新编译它。

```
javac -source 1.4 File.java 
```

或者

```
 javac   Xlint File.java 
```

为什么会出现此警告？如果是因为使用了不推荐使用的功能，那么无论如何要找到问题所在。以免再次发生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-27T13:16:12.180

这解决了我的问题...

```
allprojects {
repositories {
    google()
    jcenter()

    gradle.projectsEvaluated {
        tasks.withType(JavaCompile) {
            options.compilerArgs << "-Xlint:deprecation"
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T05:14:57.867

您可以在课程的开头使用它：@SuppressWarnings("unchecked") 忽略警告并查看问题所在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T02:19:01.980

我第一次编译我的代码

```
 javac   Xlint File.java 
```

此警告不再发生。

# vb.net - 如何杀死特定进程

> ID：13004113
> 
> 赞同：0
> 
> 时间：2012-10-22T01:57:05.580
> 
> 标签：vb.net, file, exception, kill

我有一个在后台与 Excel 应用程序交互的进程，但有时该进程出现错误并且 Excel 应用程序无法正确完成。

始终，当此过程开始时，请尝试从硬盘驱动器中删除 Excel 文件。

但是，当进程出现问题并且我重新尝试再次运行进程时，当我尝试删除 Excel 文件时会显示以下消息：

“该进程无法访问文件 [Excel 文件路径]，因为它正被另一个进程使用。”

我无法杀死 Excel 的所有进程。然后，我的问题是：有没有办法知道管理这个 Excel 的过程是什么？或者，有什么方法可以使用 Try ... Catch 结构来了解该过程吗？

# pecl - 当我使用 EG(active_symbol_table) 时出现错误

> ID：13004114
> 
> 赞同：0
> 
> 时间：2012-10-22T01:57:05.827
> 
> 标签：pecl

我写了一个名为 sample_isset 的 pecl 函数，它的代码是：

```
 PHP_FUNCTION(sample_isset) {
     zval **fooval;
     if(EG(active_symbol_table) == NULL) {
             php_printf("the active symbol table is NULL");

     }else if(zend_hash_find(EG(active_symbol_table),"foo",4,
                     (void **) &fooval) == SUCCESS){
             php_printf("Got the value of $foo!");
     } else {
            php_printf("$foo is not defined!");
    }
 } 
```

我想用这个函数来查看当前符号表是否有 $foo 变量。当我在全局范围内使用它时，它运行良好。但是当我在另一个函数中使用它时，例如你好，我出错了，什么也没看到。hello 函数可能是这样的。

```
function hello(){
   sample_isset();
} 
```

我不知道为什么我得到一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:52:47.540

似乎php函数使用了延迟加载，active_symbol_table并不总是存在，所以你应该在EG(active_symbol_table)之前使用zend_rebuild_symbol_table。

# python - Django 模型设计。希望用户拥有其他模型实例的“集合”

> ID：13004116
> 
> 赞同：0
> 
> 时间：2012-10-22T01:57:12.510
> 
> 标签：python, django, database-design, data-structures, django-models

我在尝试使用 django 模型来表示这个数据结构时遇到了一些麻烦。在我正在开发的应用程序中，用户可以上传曲目。我为此使用了 Track 模型。我们希望用户拥有与其帐户相关联的曲目集合（例如，他们收藏的曲目）。该集合只是对轨道模型 id 的引用。有人对如何设计这样的数据结构有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:58:48.490

给每首曲目一个

```
owner = ForeignKey(User) 
```

或者可能

```
class User:
    ...
    tracks = ManyToManyField(Track) 
```

如果您可以让多个用户拥有相同的曲目...

# ruby-on-rails-3.2 - Collection_select form_for 说它是空白的，当它不是

> ID：13004117
> 
> 赞同：0
> 
> 时间：2012-10-22T01:57:28.450
> 
> 标签：ruby-on-rails-3.2, form-for, html-select

我有一个公司模型和一个用户模型。A User belongs_to a Company 一个公司有很多用户。创建了一家公司，然后人们可以单独注册，这将创建协会。我试图有一个选择框，因此当用户注册时，他们从选择框中选择他们的公司，该选择框使用公司模型的 pluck 方法填充。

当用户注册时，它说选择框是空的……即使它看起来不是。我究竟做错了什么？

公司模式

```
class Company < ActiveRecord::Base
attr_accessible :company_admin, :company_name, :employee_number, :street_address, :city, :state_abbreviation, :zip_code
has_many :users

validates :company_admin, presence: true
validates :company_name, presence: true, uniqueness: { case_sensitive: false }
validates :employee_number, presence: true
validates :street_address, presence: true
validates :city, presence: true
validates :state_abbreviation, presence: true
validates :zip_code, presence: true

end 
```

用户模型

```
class User < ActiveRecord::Base
attr_accessible :company, :name, :email, :password, :password_confirmation, :image,   :team_id
belongs_to :company
end 
```

公司控制人

```
class CompaniesController < ApplicationController
   before_filter :signed_in_user, only: [:show, :edit, :update, :destroy]

  def show
    @company = Company.find(params[:id])
  end

  def new
    @company = Company.new
  end

  def create
    @company = Company.new(params[:company])
    if @company.save  
      redirect_to signup_path
    else
      render 'new'
    end
 end

 def update
   if @company.update_attributes(params[:company])
     flash[:success] = "Company Information Updated"
    sign_in @company
    redirect_to @company
  else
  render 'edit'
  end
end

end 
```

新用户视图

```
<%= form_for(@user) do |f| %>
   <%= f.label :company, :class => 'col-left' %>
   <%= collection_select(:company_id, :company_id, Company.all, :id, :company_name,  {:include_blank => true}) %>
   <%= f.label :email, :class => 'col-left' %>
   <%= f.text_field :email, :class => 'col-right' %>
   <%= f.label :name, :class => 'col-left' %>
   <%= f.text_field :name %>
   <%= f.label :password, :class => 'col-left' %>
   <%= f.password_field :password %>
   <%= f.label :password_confirmation, "Confirm Password", :class => 'col-left' %>
   <%= f.password_field :password_confirmation %>
   <%= image_submit_tag "/assets/create-account.png" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:33:05.717

我不得不添加 f。到集合选择所以它是

```
f.collection_select(:company_id, Company.all, :id, :company_name, {:include_blank => true}) 
```

# php - mysql_real_escape_string 反转？

> ID：13004126
> 
> 赞同：1
> 
> 时间：2012-10-22T01:58:40.987
> 
> 标签：php, mysql, mysqli

> **可能重复：**
> [PHP mysql_real_escape_string() -> stripslashes() 留下多个斜杠](https://stackoverflow.com/questions/1522313/php-mysql-real-escape-string-stripslashes-leaving-multiple-slashes)

我有一个系统接受用户对调查的输入并将答案保存到 MySQL 数据库。
在将其放入此数据库之前，它会运行它`mysql_real_escape_string()`以验证它不是对注入不满意。

不幸的是，当我在文本框中将此内容输出给我的客户时（就像输入一样）引号单引号`/` `\`......所有都被转义了 - 我知道我知道我要求它，但我不能像这样给出产品 - 怎么办我颠倒了这些，而不会丢失人们输入的“2\3, 1\2”......类似的东西。

有没有更好的消毒方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:05:55.553

有一种更好的方法可以确保您的输入得到净化。根本不要逃避，而是使用PDO 的[准备](http://php.net/manual/en/book.pdo.php)[好的查询](http://php.net/manual/en/pdo.prepared-statements.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:50:59.083

如果你的 MySQL 字符串有类似的东西`myfield="Stafford\'s webhost sucks"`，MySQL 知道反斜杠是作为转义字符而不是反斜杠，除非它是双转义的。

如果您在数据库中看到应该是转义字符的反斜杠，则意味着您的字符串被转义了多次。这可能在您的代码中，或者在您的情况下，打开了已弃用的魔术引号功能。魔术引号可以通过 php.ini 关闭：[https ://stackoverflow.com/a/1201003/281469](https://stackoverflow.com/a/1201003/281469)

# java - 为什么我的方法看不到传递给它们的参数？

> ID：13004130
> 
> 赞同：1
> 
> 时间：2012-10-22T01:59:01.840
> 
> 标签：java

我一直在做Java作业。这是我的指示：

> 接口编程作业
> 
> 创建一个名为 ISum 的接口。该接口应定义 2 个方法。第一种方法应该将两个整数作为参数并返回它们的总和。第二种方法应该将 2 个字符串作为参数并返回它们的连接。第二种方法应该是第一种方法的重载版本。
> 
> 定义另一个名为 IVerage 的接口。该接口应定义一种方法，该方法采用 2 个整数参数并返回平均值。
> 
> 创建一个名为 Calculator 的类，它实现了上面定义的两个接口。你的类必须实现异常处理。创建一个驱动程序类，允许用户调用类中的每个方法。

到目前为止我的工作：

`Main`班级：

```
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Calculator calculatorObject = new Calculator();
        Scanner scannerObject = new Scanner(System.in);

        System.out.println("Enter 1 for integer or 2 for string");
        int test1 = scannerObject.nextInt();

        switch (test1){
            case 1: 
                System.out.println("Enter 1st number");
                int int1 = scannerObject.nextInt();

                System.out.println("Enter 2nd number");
                int int2 = scannerObject.nextInt();   

                System.out.println("Enter 1 for sum or 2 for average");
                int test2 = scannerObject.nextInt(); 

                switch (test2){
                    case 1: 
                        int sum = calculatorObject.intSum(int1,int2);
                        System.out.println("The sum is " + sum);
                        break;

                    case 2:
                        int avg = calculatorObject.intAvg(int1,int2);
                        System.out.println("The avg is " + avg);
                        break;

                    default:
                        System.out.println("You entered an invalid option");    
                        break;    
                }

                break; 

            case 2: 
                System.out.println("Enter 1st string");
                String string1 = scannerObject.nextLine();

                System.out.println("Enter 2nd number");
                String string2 = scannerObject.nextLine();   

                String stringConcat = calculatorObject.stringSum(string1,string2);
                System.out.println("The sum is " + stringConcat);
                break; 

            default:
                System.out.println("You entered an invalid option");    
                break;
        }
    }
} 
```

`ISum`界面：

```
public interface ISum {

    public void intSum();
    public void intAvg();

} 
```

`IAverage`界面：

```
public interface IAverage {

    public void intAvg();

} 
```

`Calculate`班级：

```
abstract class Calculator implements IAverage, ISum { 

    public int intSum (int1,int2){
        int int1;
        int int2;
        int sum = int1 + int2;
        return sum;
    }

    public String stringSum (string1,string2){
        String string1;
        String string2;
        String stringConcat = string1.concat(string2);
        return stringConcat;
    }

    public int intAvg(int1,int2){
        int int1;
        int int2;
        int avg = (int1 + int2)/2;
        return avg;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:04:13.223

乍一看，您的方法似乎看不到参数，因为其中的方法`ISum` *没有*参数。

试试这个，你应该在路上：

```
public interface ISum {

    public int intSum(int first, int second);
    public int intAvg(String first, String second);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:05:50.760

您的说明声明创建了 2 个重载的方法。

```
public interface ISum {

 public void sum(int a,int b);
 <br>public void sum(String s1,String s2);

} 
```

方法名称必须相同。
返回类型可以更改为 int 和 String。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T02:04:39.947

您在使用它们之前重新声明并重新初始化参数变量，因此在您触摸它们时它们是空白的。

例如：

```
public int intSum (int1,int2){

    int int1;
    int int2;

    int sum = int1 + int2;

    return sum;

} 
```

在第一行中，public int intSum (int1,int2){，即您将 int1 和 int2 声明为方法局部变量。你不需要再做 int int1; 或int int2;。通过包含这些行，您将一无所有地覆盖它们。对于上述方法，您只需要：

```
public int intSum (int1,int2){

    int sum = int1 + int2;

    return sum;

} 
```

编辑：derp，阅读失败。你还应该给参数一个类型，所以

```
public int intSum (int int1, int int2){

    int sum = int1 + int2;

    return sum;

} 
```

# ruby - 为什么在使用 Ruby gem 'fusion_tables' 创建 Fusion Table 时出现 403 错误？

> ID：13004134
> 
> 赞同：1
> 
> 时间：2012-10-22T01:59:51.523
> 
> 标签：ruby, google-fusion-tables

这是我的代码，根据['fusion_tables' gem 文档](https://github.com/tokumine/fusion_tables/blob/master/README.md)。显然，我不会在此代码中发布我的用户名和密码。

```
require 'fusion_tables'

@ft = GData::Client::FusionTables.new      
@ft.clientlogin(my_google_account_name, my_google_account_password)

# Creating a new table
columns = [
    {
        :name=>"column_1",
        :type=>'string'
    }, 
    {
        :name=>"column_2",
        :type=>'number'
    }
]

new_table = @ft.create_table "Ruby table",columns

# Inserting rows
data = [
    {
    "column_1"=>"This is a string",
    "column_2"=>100
    }
]

new_table.insert data 
```

当我运行它时，我得到这个错误：

```
<HEAD>
<TITLE>User does not have permission to view the underlying data</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>User does not have permission to view the underlying data</H1>
<H2>Error 403</H2>
</BODY>
</HTML> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:35:39.550

看起来`create_table method`在 gem 中有点过时了。

我尝试了上面的示例，以及[gem repo](https://github.com/tokumine/fusion_tables/blob/master/examples/boris_bikes.rb)[中提供的 boris_bikes 示例`fusion_tables`](https://github.com/tokumine/fusion_tables/blob/master/examples/boris_bikes.rb)。两者都在调用方法的行上抛出`Error 403` `User does not have permission to view the underlying data`错误消息。`create_table`

在上面的示例中，引发此错误的行是：

```
new_table = @ft.create_table "Ruby table",columns 
```

虽然创建了“Ruby_table”融合表。（**注意**：`fusion_table`gem[会清理表名](https://github.com/tokumine/fusion_tables/blob/master/lib/fusion_tables/ext/fusion_tables.rb#L49)，即它用下划线替换给定名称中的空格。）

最近，Google Fusion table API 很可能在这个 gem 上发生了一些变化。我[在 repo 上开了一个新问题](https://github.com/tokumine/fusion_tables/issues/19)；希望开发商能尽快做出回应。（或者如果时间允许，我会深入研究，找出原因，然后提交补丁）

现在，我建议忽略错误并在创建表后继续前进。

运行该`new_table = @ft.create_table "Ruby table",columns`行后，继续执行以下步骤：

```
tables = @ft.show_tables
new_table  = tables.select{|t| t.name == "Ruby_table" }.first

# Inserting rows
data = [ 
 { 
    "column_1"=>"This is a string",
    "column_2"=>100
  }
]

new_table.insert data 
```

这样，您应该会在 Fusion Table 中看到该行。

在我的一个生产应用程序上，我们手动创建了所需的 Fusion Tables - 将其与现有数据表（目前尚不支持 API）合并，然后使用`truncate`&`insert`方法更新 Fusion 表数据。因此，无法以编程方式创建 Fusion Table 对我们来说并不是一个大问题。

# google-chrome-extension - 在 Chrome 扩展的 popup.html 中包含多个 JavaScript 文件

> ID：13004139
> 
> 赞同：2
> 
> 时间：2012-10-22T02:00:31.227
> 
> 标签：google-chrome-extension

更新：

> 该问题是由包含旧版本的 jQuery(1.4.2) 引起的。在我改用 1.8.2 之后，问题就消失了。但我仍然不知道为什么。

我最近做了一个 Chrome 扩展。感谢[浏览器操作上的 post chrome 扩展插入内容脚本，](https://stackoverflow.com/questions/11545743/chrome-extension-insert-content-script-on-browser-action)我意识到我必须包含一个 js 文件，例如：

```
<script src="popup.js"></script> 
```

但后来我发现您似乎不能包含多个文件：

```
<html>
  <head>
    <script src="jquery.js"></script> <!-- NOT LOADED -->
    <script src="popup.js"></script> <!-- LOADED -->
  </head>
  <body>
  </body>
</html> 
```

对我来说更糟糕的是我无法访问 JS 文件中弹出 HTML 的 DOM。喜欢：

# popup.html

```
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
    <a id="intro" href="#"  target="_blank">Intro</a>
  </body>
</html> 
```

# popup.js

```
/*
  ... jQuery Codes here ... 
  jquery.js cannot be included via src="jquery.js" 
  but by copy and paste its source code here it works
*/
$("#intro").click(function(){
  alert("clicked"); // Not fireing at all
}); 
```

我想知道我能做些什么来解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:22:38.850

这是一个基本示例，说明您可以使用它来使其正常工作。我最好的猜测是，由于您`popup.js`的设置方式（它试图`click`在元素加载之前附加功能），它似乎没有加载 jQuery。我不是 JS 专家，所以我相信其他人会对如何等待`DOM`加载有更好的想法，但这只是一个基本测试（**注意：**这使用了最新版本 jQuery (1.8.x) 的本地版本。 2 当前），因为清单 2 中的新内容策略不允许内嵌脚本）：

**清单.json**

```
{
  "name": "Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Testing",

  "browser_action": {
    "default_icon":   "my_icon.png",
    "default_title":  "My Text Extension",
    "default_popup":  "popup.html"
  },

  "permissions": [
    "tabs", "http://*/", "https://*/"
  ]
} 
```

**弹出窗口.html**

```
<html>
  <head>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="popup.js"></script>
  </head>
  <body>
    <a id="intro" href="#"  target="_blank">Intro</a>
  </body>
</html> 
```

**Popup.js**

```
/*
   Here we wait for the body of the popup to load before
   attaching our functionality
*/
window.onload = function() {
  $("#intro").click(function(){
    alert("clicked"); // Should fire now
  });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T20:29:38.543

发生这种情况的原因是因为页面正在按顺序加载，并且脚本在 DOM 加载之前触发。这意味着脚本在 DOM 存在之前就被调用了，所以它根本看不到 DOM；它在脚本之后加载。

使用事件等待 DOM 是解决此问题的一种方法，但您也可以在最后加载*的 body 标记的末尾或之后*添加脚本，以便首先加载 DOM。当然有很多人会认为这是*不好的做法*，反之亦然。原因是您可能在 DOM 加载时加载了脚本，或者因为有许多大型脚本导致加载延迟，这些都是*讨论 jQuery 操作网站*时的有效点。

在使用**Chrome 扩展程序**时，*相反的做法可能是有益*的。一个原因是始终提供一些代表性响应，即使是最密集的扩展，也不必担心在代码中等待 DOM。实际上，这取决于您的需求，但了解所有选项总是有益的。您可以在[Sample Chrome Extensions](https://developer.chrome.com/extensions/samples)中看到这两种做法。

 **使用**jQuery**，您可能希望使用[Ready](https://api.jquery.com/ready/)方法，因为[onload](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload)会等待页面上的所有内容（*图像、视频、链接、脚本等*）加载完毕。与 onload 不同，ready 方法在 DOM 本身完成加载时调用，而与实际加载的页面无关。你可以这样做：

```
$(document).ready(function() { 
  // jQuery code to execute after
}); 
```

您还可以使用[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded)事件在**JavaScript**中等待 DOM ：

```
document.addEventListener('DOMContentLoaded', function() {
  // JavaScript code here
}); 
```**

# java - 如果列表为空，则休眠限制会导致错误

> ID：13004142
> 
> 赞同：19
> 
> 时间：2012-10-22T02:00:54.723
> 
> 标签：java, hibernate

如果我的列表为空，我会收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' 
```

下面是我的hibernate相关方法：

```
 @Override
    public List<SomeThing> findByIds(List<Integer> someIds) {
        return sessionFactory.getCurrentSession().createCriteria(SomeClass.class)
                .add(Restrictions.in("id", someIds))
                .list();
    } 
```

我应该怎么做才能防止这个错误？

我知道我可以将呼叫短路并返回一个空列表，例如：

```
if(someIds == null || someIds.size() == 0) {
  return new List<SomeThing>();
} 
```

但是有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T06:21:55.700

我会说 Hibernate 需要解决这个问题，并给出有意义的信息。

我认为提供者/休眠检查空/空列表的责任。

原因可想而知，它试图构造 where 子句，例如 id in ()，org.hibernate.loader.criteria.CriteriaQueryTranslator 或类似的某个地方。但是因为这里的 List 是空的，所以会抛出异常。但是他们已经使用 ( 创建了查询，并且由于异常/空列表而无法完成。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-22T03:24:00.667

**不。**如果您使用空参数 for`in`子句执行查询，它将失败（您可以通过运行普通 SQL 来验证这一点）。如果输入参数为空/空，最好不要执行查询。

我唯一能建议的是使用`isEmpty()`函数和语句，并`!= null`进行`if`少量重组：

```
@Override
public List<SomeThing> findByIds(List<Integer> someIds) {
   List<Something> result = null; //you may initialize with empty list
   if(someIds != null || !someIds.isEmpty() {
       result = sessionFactory.getCurrentSession().createCriteria(SomeClass.class)
            .add(Restrictions.in("id", someIds))
            .list();
   } 
   return result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T04:29:55.723

（这主要基于@Yogendra Singh 的回复，稍加改动以使其更适用于多个可选参数的常见情况）

Criteria API 旨在让您以编程方式编写查询。这种动态特性预计将在您的代码中处理。

通常我们通过以下方式制定可选标准：

```
@Override
public List<SomeThing> findBySearchParams(SearchParam searchParam) {
   // create criteria with mandatory search criteria
   Criteria criteria = sessionFactory.getCurrentSession()
                           .createCriteria(SomeClass.class);
                           .add(Restriction("someField", searchParam.getSomeField()));

   // add "id" only if "someId" contains value
   if(searchParam.getSomeIds() != null && !searchParam.getSomeIds().empty()) {
       criteria.add(Restrictions.in("id", searchParam.getSomeIds()));
   } 

   // add "anotherField" only if "anOptionalField" is not null
   if(searchParam.getAnOptionalField() != null) {
       criteria.add(Restrictions.in("anotherField", searchParam.getAnOptionalField()));
   } 

   return criteria.list();
} 
```

* * *

编辑：

尽管 Hibernate （还）没有为此提供更优雅的方式，但您可以自己编写一些东西来让它看起来更优雅：

```
class SmartCriteriaBuilder {
  private Criteria criteria;
  SmartCriteriaBuilder (Criteria criteria) { this.criteria = criteria;}

  SmartCriteriaBuilder in(String field, Collection values) {
    if (!empty(values)) {
      this.criteria.add(Restrictions.in(field,values));
    }
  }
  // all other kind of restrictions ....

  Criteria toCriteria() {
    return this.criteria;
  }
} 
```

然后你可以做一些看起来更聪明的事情：

```
SmartCriteriaBuilder criteriaBuilder = 
    new SmartCriteriaBuilder(sessionFactory.getCurrentSession().createCriteria());

criteriaBuilder .in("someField", listPossiblyNullOrEmpty);

return criteriaBuilder .toCriteria().list(); 
```

# mysql - MySQL 使用 DATETIME 字段中的 DATE 返回今天的记录

> ID：13004145
> 
> 赞同：6
> 
> 时间：2012-10-22T02:01:29.870
> 
> 标签：mysql, sql, date, datetime, where

我有一个名为“动作”的表，其中有一`DATETIME`列名为“发生”。我正在尝试通过执行以下操作来返回今天的记录

```
SELECT * FROM `actions` WHERE `occurred` = DATE(NOW()); 
```

但我得到一个空的结果集。如果我把`WHERE`子句去掉，我可以看到表中的所有 295 行，并且从今天开始至少有 30 行。稍后我将编写另一个查询来返回今天日期和过去 X 天之间的所有记录，但在我到达那里之前，我需要知道为什么这个查询返回一个空的结果集。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T02:14:22.647

```
SELECT * FROM actions WHERE DATE(ocurred) = CURDATE(); 
```

`DATE(ocurred)`忽略时间部分。

这是使用数据的 SQL Fiddle：[http ://www.sqlfiddle.com/#!2/81708/2](http://www.sqlfiddle.com/#!2/81708/2)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T02:04:57.957

如果没有将来的日期`occurred`，您可以使用以下内容：

```
SELECT * FROM `actions` WHERE `occurred` > DATE_SUB(CURDATE(), INTERVAL 1 DAY); 
```

# java - 发现 APK 的重复文件：部署到我的手机时的许可证

> ID：13004146
> 
> 赞同：2
> 
> 时间：2012-10-22T02:01:59.280
> 
> 标签：java, android, dependency-injection, guice

我在我的 android 应用程序中使用 Guice 2.0 进行依赖注入。我将它的所有 jar 包都包含在我的 libs 文件夹中。问题是当我运行它时，我得到以下信息：

```
[2012-10-21 08:12:40 - PPSAndroid] Error generating final archive: Found duplicate file for APK: LICENSE
Origin 1: C:\Users\zero-tolance\workspace\PPSAndroid\libs\guice-servlet-2.0.jar
Origin 2: C:\Users\zero-tolance\workspace\PPSAndroid\libs\guice-2.0.jar 
```

我查看了其他线程，它们非常神秘。我也进行了一些搜索，但找不到太多关于此的信息。我想知道是什么导致了这个问题以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T22:20:54.657

那是因为 apk 聚合了库中的资源，并且两个 jar 都嵌入了一个`/LICENSE`文件。只需将其从`libs/guice-2.0.jar`和中删除即可`libs/guice-servlet-2.0.jar`。

# linux - 如何使用 du 从标准输入中获取路径并计算总大小？

> ID：13004148
> 
> 赞同：4
> 
> 时间：2012-10-22T02:02:13.053
> 
> 标签：linux, shell, unix

> **可能重复：**
> [使用 find & du 获取文件夹的总大小](https://stackoverflow.com/questions/9794791/get-total-size-of-folders-with-find-du)

我可以像这样使用 du 来获取每个文件的文件大小`stdin`

```
find . -name "*.java" -exec du -h {} \; 
```

但我无法得到总大小..有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T02:14:33.347

在这里回答：

[如何使用 find 和 du 获取文件夹的总大小？](https://stackoverflow.com/questions/9794791/get-total-size-of-folders-with-find-du)

> 使用 xargs(1) 代替 -exec：
> 
> `find . -name bak -type d | xargs du -ch`
> 
> 为找到的每个文件执行命令（查看 find(1) 文档）。通过管道连接到 xargs，您可以聚合这些文件名并且只运行 du 一次。

在您的情况下，它将是：

```
find . -name "*.java" | xargs du -ch 
```

选项：

```
 -c, --total
          produce a grand total 
```

# php - 检查资产是否安装在 symfony2 中

> ID：13004149
> 
> 赞同：0
> 
> 时间：2012-10-22T02:02:21.007
> 
> 标签：php, symfony

我正在尝试运行一个单元测试来检查资产是否正确安装。我只是向现有文件发出请求并检查是否没有错误：

```
$client = static::createClient();
$client->request('GET', '/bundles/mybundle/css/bg.css');
$this->assertFalse($client->getResponse()->isNotFound(), "Assets seem to not be installed"); 
```

不幸的是，在检查了 Response 实例之后，它总是试图通过路由到达某种控制器：

找不到“GET /bundles/mybundle/css/bg.css”的路由

有没有办法在不通过路由系统的情况下在这里发出纯请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:25:13.987

您需要使用实际的 HTTP 客户端（您用于功能测试的客户端实现实际上并不发出 HTTP 请求）来发出该请求，但您似乎以错误的方式处理此问题。安装资产应该是你的部署后脚本的一部分——因此测试总是会失败（或者有时取决于你的开发箱的配置，但关键是它是一个部署/登台细节）无论如何都会失败。只需在您的部署过程中使用您希望确保资产正确安装的任何语言进行简单测试。

简化示例

```
<?php
system('git clone myrepo');
echo 'Pulled codebase';
system('composer install'); // install dependencies
echo 'Dependencies installed';
system('php app/console assets:install web --symlink'); // install assets
echo 'Assets installed -- testing for presence';
if( !file_exists('blah.gif') ) { 
   echo 'assets not installed! error!';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:35:03.580

测试客户端实际上并没有访问您的 Web 服务器，它直接通过您的应用程序模拟请求。

因此，它永远不能用于检查文件结构中是否存在资产。它可以用于动态加载的资产，但这里不是这种情况，通常也不是这种情况。

正如@Lusitanian 建议的那样，您可以使用 PHP 必须提供的标准文件函数来检查它是否存在。

如果您需要帮助定位这些资产的路径，请查看以下`Kernel::locateResource()`方法：

```
$this->container->get('kernel')->locateResource('@AcmeDemoBundle/Resources/public/css/main.css'); 
```

如果找不到资源，这将引发异常。

# android - Android——如何从 Eclipse LogCat 过滤控制台垃圾邮件？

> ID：13004150
> 
> 赞同：3
> 
> 时间：2012-10-22T02:02:21.650
> 
> 标签：android, eclipse, logcat

默认的 Eclipse LogCat 窗口包含大量来自 VM 的控制台垃圾邮件等。如何删除这些消息？似乎现在唯一的过滤器是过滤*表达式*，而不是*过滤掉*垃圾邮件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:33:39.210

此外，如果您想过滤您不感兴趣的日志消息，则可以使用 logcat 的“filter_spec”的静默选项 (S)。

例如，如果您想过滤 Dalvik VM 的日志消息，例如

> D/dalvikvm(28039): GC_CONCURRENT freed 473K, 7% free 9503K/10180K, paused 2ms+3ms,总共22ms

那么你可以使用

```
adb logcat dalvikvm:S 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T02:25:40.403

这是`LogCat`根据定义，来自[开发人员页面 - LogCat](http://developer.android.com/tools/help/logcat.html)：

```
logcat

The Android logging system provides a mechanism for collecting and viewing system debug 
output. Logs from various applications and portions of the system are collected in a 
series of circular buffers, which then can be viewed and filtered by the logcat command. 
You can use logcat from an ADB shell to view the log messages. 
```

好吧，您可以通过按标签、进程 ID、字符串或表达式进行过滤来获取所需的内容。无论如何，如果您不是很熟悉`Logcat`，请先尝试本指南 -[学习如何控制 Logcat 输出](http://developer.android.com/tools/debugging/debugging-log.html#outputFormat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T02:02:21.650

一种选择是改用命令行。

```
appname=YOUR_APP_NAME_OR_LOG_TAG
adb logcat | awk '/'$appname'/{gsub(/'$appname'/, "\x1b[95m'$appname'\x1b[0m"); print; next}; /(dalvikvm|com.google.android.apps|PhoneStatusBar|DeviceConfig)/{next}; {print}' 
```

这将突出显示您的应用程序的名称，删除通常包含垃圾邮件的消息，并打印它不知道的任何内容。

# c - 用 C 编写打印方法

> ID：13004153
> 
> 赞同：2
> 
> 时间：2012-10-22T02:03:04.023
> 
> 标签：c, pointers, scheme, interpreter

我是 C 的新手，正在为 Scheme 做解释器。我正在尝试获得一个合适的 printList 方法来遍历该结构。

该程序接受如下输入：

> (a (bc))

并在内部将其表示为：

```
[""][ ][ ]-->  [""][ ][/]
     |              |              
   ["A"][/][/]     [""][ ][ ]-->  [""][ ][/]     
                        |              |                 
                      ["B"][/][/]    ["C"][/][/] 
```

现在，我只想让程序接受输入，在内部制作适当的单元格结构并打印出单元格结构，从而得到

> (a (bc))

在末尾。

这是我的结构：

```
typedef struct conscell *List;

struct conscell {
char symbol;
struct conscell *first;
struct conscell *rest;

};

void printList(char token[20]){
    List current = S_Expression(token, 0);

     printf("(");

printf("First Value? %c \n", current->first->symbol);
printf("Second value? %c \n", current->rest->first->first->symbol);
printf("Third value? %c \n", current->rest->first->rest->first->symbol);

printf(")");

} 
```

在 main 方法中，我得到第一个令牌并调用：

> 打印列表（令牌）；

**我再次测试了子列表的值，我认为它正在工作。但是，我需要一种方法来遍历整个结构。请再次查看我的 printList 代码。打印调用是我必须输入的，以手动获取 (a (bc)) 列表值。所以我得到这个输出：**

> 第一价值？一种
> 
> 第一价值？b
> 
> 第一价值？C

这是我想要的，但我想要一种使用循环的方法，无论结构多么复杂，还要在适当的地方添加括号，所以最后，我应该得到：

> (a (bc))

这与输入相同。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:35:17.623

原程序的数据类型有点奇怪；您希望能够描述一组不相交的数据，在这种情况下，**联合**可能就是您想要的。目前，您只有一个用于 cons 单元格的数据类型，因此很难区分：

```
(a b c) 
```

和

```
(a (b c)) 
```

您现在使用的技巧是将符号数据视为单元格的左右指针均为 NULL 的数据，但这使得它无法表示：

```
(()) 
```

这正是当您有一个内容均为 NULL 的 cons 单元格时会发生的情况。

表示不相交数据集的一种方法是使用标记的不相交联合，如下所示：

```
enum SexpType {SYMBOL, CONS, NIL};

struct Sexp {
  enum SexpType type;
  union {
    char symbol;
    struct Cons *cons;
  };
};

struct Cons {
  struct Sexp *first;
  struct Sexp *rest;
}; 
```

Sexp 可以是 a `SYMBOL`、 a`CONS`或`NIL`。根据其类型，我们将区别对待结构的联合部分。

我们可能会包含一些帮助程序，以使构建这些结构更容易：

```
struct Sexp* newCons(struct Sexp* first, struct Sexp* rest) {
  struct Sexp* pair = malloc(sizeof(struct Sexp));
  pair->type = CONS;
  pair->cons = malloc(sizeof(struct Cons));
  pair->cons->first = first;
  pair->cons->rest = rest;
  return pair;
}

struct Sexp* newSymbol(char c) {
  struct Sexp* ch = malloc(sizeof(struct Sexp));
  ch->type = SYMBOL;
  ch->symbol = c;
  return ch;
} 
```

一旦我们有了正确的数据表示，那么`printList`将是一个基于类型标签调度的递归函数：

```
void printSexp(struct Sexp* sexp) {
  switch (sexp->type) {
  case SYMBOL: 
    /* FIXME */
    break;
  case CONS:
    /* FIXME */
    break;
  case NIL:
    /* FIXME */
    break;
  }
} 
```

每个案例都相当简单。为了让`CONS`案例做点什么，我们可能会尝试这样的事情：

```
printf("(");
printSexp(sexp->cons->first);
printf(" . ");
printSexp(sexp->cons->rest);
printf(")"); 
```

我们在该对的组件上递归调用打印机。但是，这可能不是我们想要的，因为它将所有内容都视为不正确的结构，并且您可能希望对常规列表做一些更好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:58:36.480

List 的类型是 struct conscell 的指针，因此 createList 函数中的 malloc() 应该是 sizeof(struct conscell)：

```
List node = malloc(sizeof(struct conscell)); 
```

指向结构的指针只有 8 字节，而结构本身的大小是 17（默认填充实际上是 24 字节）：

[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

# jquery - Angular: ng:include 用于当前模板和范围？

> ID：13004158
> 
> 赞同：2
> 
> 时间：2012-10-22T02:03:47.397
> 
> 标签：jquery, angularjs

我是 Angular 的新手，但我已经用谷歌搜索了几个小时，似乎无法弄清楚我做错了什么......我要解决的问题是能够在部分完成后执行一些 jQuery已经加载。我发现了这篇文章：[http](http://blog.ruedaminute.com/2012/02/angular-js-applying-jquery-to-a-loaded-partial/) ://blog.ruedaminute.com/2012/02/angular-js-applying-jquery-to-a-loaded-partial/ ，它解释了如何使用 ng:include 而不是 ng:view，但它不起作用 - 没有包含模板，更不用说正在执行的 onload 了。

索引.html：

```
<!DOCTYPE html>
<html ng-app="shorelinerealtors">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="/lib/angular.js"></script>
    <script src="/lib/angular-resource.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/controllers.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <title>Shoreline Realtors</title>
</head>
<body>
<!--It works fine using ng:view, but of course no onload option-->
<!-- <ng:view></ng:view> -->
<!--This apparently does nothing... no hello world, no alert -->
<ng:include src="$service('$route').current.template" scope="$service('$route').current.scope" onload="init()"></ng:include>
</body>
</html> 
```

住宅.html

```
<h2>{{hello}}</h2> 
```

控制器.js

```
function ResidentialListCtrl($scope) {
    $scope.hello = "Hello World!";
    this.init = function() {
        alert("hello");
    };

} 
```

应用程序.js

```
angular.module('shorelinerealtors', ['listingsServices']).
    config(['$routeProvider', function($routeProvider) {
        $routeProvider.
            when('/listings/residential', {templateUrl: '/partials/residential.html', controller: ResidentialListCtrl}).
            otherwise({redirectTo: '/listings/residential'});
    }]); 
```

更新：我为此创建了一个 jsfiddle：http: [//jsfiddle.net/xSyZX/7/](http://jsfiddle.net/xSyZX/7/)。它适用于 ngView，但不适用于 ngInclude。我需要做些什么来在全局范围内定义 $service 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:13:45.930

如果您想在加载/处理页面时使用 JQuery 来影响页面上的元素，那么执行此操作的“角度方式”将是创建一个自定义指令，让 jQuery 为您工作。控制器不应该进行 DOM 操作，并且 onload 功能实际上是为该包含设置的“业务”逻辑。

这是一个指令示例，该指令在处理后立即将一些 JQuery 应用于某个元素：

```
app.directive('moveRightOnClick', function() {
    return {
       restrict: 'A',
       link: function(scope, elem, attr, ctrl) {
           //elem is a jquery object if JQuery is present.
           elem.click(function() {
              $(this).animate({ 'left': '+=20' }, 500);
           });
       }
    };
}); 
```

这就是你如何使用它。

```
<div move-right-on-click>Click Me</div> 
```

如果那在您的包含的 html 中，则 jquery 的内容将由指令自动连接。

# java - Java PRNG 从头开始

> ID：13004167
> 
> 赞同：3
> 
> 时间：2012-10-22T02:05:04.627
> 
> 标签：java, algorithm

我必须使用这些参数创建一个 PRNG “程序应该使用以下算法生成 1000 个数字的序列：种子 = (1664525 * 种子 + 1013904223) % 4294967296 对于每个新种子，打印出种子 / 4294967296 的十进制值。请记住，在进行除法之前，您必须将长整数转换为双精度数才能得到十进制数！” 如果你愿意，你可以笑，但这是我到目前为止所总结的，

```
 import java.util.Scanner;  
  public class Random 
  {     
     public static void main( String args[] ) 
     {      
         Scanner input = new Scanner( System.in );
     long seed ;            
         double seeded ;            

         do             
         {  
             System.out.printf("Enter a Number between -2147483648 and 2147483647") ;        long num = input.nextLong() ;                  
             seed = num ;               

             while ( seed >= -2147483648 && seed <= 2147483647) ;   
     {                  
                    for ( long seed = 0 ; seed < 1000 ; seed ++ ) ; 
            {                   
                          seed = (1664525 * seed + 1013904223) % 4294967296) ;
              seeded = seed ;
                    }
                        System.out.printf(" %f", seeded ) ; 
                                }           }   }     } 
```

这是我在 Java 项目中的第一年。我不是要求任何人做我的工作，这对我没有帮助，但轻推会。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:06:35.770

我能看到的第一个问题是紧跟在`while`和之后的分号`for`。这些几乎肯定不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:41:20.327

您的程序有编译时错误，首先要纠正它们。

1.  重复的局部变量种子
2.  int 类型的文字 4294967296 超出范围。所以改变 4294967296.0 (double)
3.  删除 while 和 for 末尾的分号 (:)
4.  do while 语句的语法不正确。

我认为你的 do while 语句的目的是接受 number`between -2147483648 and 2147483647.` 如果是这样，你的 do while 条件应该是`seed <= -2147483648 && seed >= 2147483647`。

我修复你的程序。现在可以运行了。检查它是否符合您的要求。

```
import java.util.Scanner;

public class Test1 {
    public static void main( String args[] ) 
    {      
        Scanner input = new Scanner( System.in );
        long seed ;            
        double seeded= 0.0 ;   
        do             
        {  
            System.out.printf("Enter a Number between -2147483648 and 2147483647") ;        
            long num = input.nextLong() ;
            seed = num ;
        }while ( seed <= -2147483648 && seed >= 2147483647);

        for (seed = 0; seed < 1000; seed ++)
        {                   
            seeded = (long) ((1664525 * seed + 1013904223) % 4294967296.0) ;
            System.out.printf(seed + ": %f", seeded ) ;
            System.out.println();
        }
    }
} 
```

# php - 使用带有 PHP 包的 MP3 ID3 解码器

> ID：13004169
> 
> 赞同：1
> 
> 时间：2012-10-22T02:05:32.807
> 
> 标签：php, mp3, id3

因此，我现在正在开发一个站点，该站点可以动态构建服务器目录中所有 .mp3 文件的播放列表。效果很好，但我意识到在获取歌曲标题时存在错误。出于某种原因，它在拉取标签时只允许 30 个字符的限制。因此，如果我有一首名为“Really Long Song That Have More 30 Characters”的歌曲，它只会返回“Really Long Song That Have More”。

我正在使用这个[http://pear.php.net/package/MP3_Id/redirected](http://pear.php.net/package/MP3_Id/redirected)包来读取标签并查看源 .php 文件，但无法破译需要更新的内容以提取超过 30 个字符。

我希望有人对这个包或 PHP ID3 标签有更多的经验，并且可以帮助我修改我现在使用的包的源代码，或者建议一个更新的包来完成同样的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:18:44.460

查看MP3_Id，似乎只支持IDv1，而你的MP3文件可能是IDv2。

看看[getID3()](http://getid3.sourceforge.net/)，它支持各种类型的 MP3 文件和其他一些不错的功能。

# c# - Linq ObservableCollection 没有返回结果

> ID：13004170
> 
> 赞同：0
> 
> 时间：2012-10-22T02:05:38.793
> 
> 标签：c#, linq

我正在使用 linq 在 ObservableCollection 中搜索产品，但它没有返回任何结果，例如我有一个产品名称“stack”，但是当我搜索“s”时，它没有返回任何结果：

```
private ObservableCollection<Product> _ProductList = new ObservableCollection<Product>();

public ObservableCollection<Product> ProductList 
 { get { return _ProductList; } set { _ProductList = value; } } 
```

我有一个文本框，当用户输入时，linq 将在 ObservableCollection 中搜索产品名称：

```
private void productSearch_KeyUp(object sender, KeyEventArgs e)
{
      // Search text
      string productSearchText = productSearch.Text.Trim(); 

      // Search product, return no result
      var search = ProductList.Where(s => s.Name.StartsWith(ProductSearchText));

      search.ToList().ForEach(ProductList.Add);
} 
```

* * *

编辑：

我注意到这是因为字母大小写问题。我需要大写，如果产品名称是大写的，我该如何搜索字母大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:16:49.963

如果问题在于大小写敏感性，您可以尝试使用它

```
s.Name.ToUppper().StartsWith(ProductSearchText)); 
```

或者你也可以试试这个

```
s.Name.ToUppper().StartsWith(ProductSearchText, StringComparison.OrdinalIgnoreCase)); 
```

你可能想像这样使用 search foreach

```
foreach(var item in search)
{

    // get a search item and do what you want with it 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:17:22.473

要执行不区分大小写的搜索，请使用此方法的另一个重载：

```
var search = ProductList.Where(s => s.Name.StartsWith   
          (ProductSearchText,StringComparison.CurrentCultureIgnoreCase)); 
```

# matlab - matlab 两个不同的相机会给我不同的结果吗？

> ID：13004176
> 
> 赞同：0
> 
> 时间：2012-10-22T02:06:18.820
> 
> 标签：matlab, camera, area

下一个代码获取我拍摄的葡萄的图像（称为：'full_img'）并计算葡萄的面积：

```
RGB = imread(full_img);
GRAY = rgb2gray(RGB);

threshold = graythresh(GRAY);
originalImage = im2bw(GRAY, threshold);

originalImage = bwareaopen(originalImage,250);
SE = strel('disk',10);
IM2 = imclose(originalImage,SE);
originalImage = IM2;

labeledImage = bwlabel(originalImage, 8);     % Label each blob so we can make measurements of it

blobMeasurements = regionprops(labeledImage, originalImage, 'all');   
numberOfBlobs = length(blobMeasurements);

pixperinch=get(0,'ScreenPixelsPerInch');   %# find resolution of your display
dpix=blobMeasurements(numberOfBlobs).Area; %# calculate distance in pixels 
dinch=dpix/pixperinch;                     %# convert to inches from pixels
dcm=dinch*2.54;                            %# convert to cm from inches
blobArea = dcm;                            % Get area. 
```

如果我用不同的相机在相同的条件下拍摄相同的葡萄（从相同的距离和相同的闪电拍摄），我会得到相同的结果吗？（如果我有一个 5 兆像素和 12 兆像素的相机呢？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:23:09.307

不，不会的。您可以使用 dpix/pixperinch 从图像坐标转到世界坐标。一般来说这是错误的。如果您知道 pixperinch，它仅适用于特定图像（并且仅适用于该图像）。为了得到图像中物体的几何特征（如长度、面积等），必须使用相机矩阵和反投影变换将图像像素点反投影到笛卡尔空间中，才能得到笛卡尔坐标（更不用说校准相机的镜头失真，这是一个非线性问题）。然后，您可以执行计算。即使对于同一台相机，您的代码也不起作用。有关更多信息，请参阅[此](http://en.wikipedia.org/wiki/Camera_matrix)。

# codeigniter - 如何确定输入已被 CodeIgniter xss 保护过滤

> ID：13004181
> 
> 赞同：0
> 
> 时间：2012-10-22T02:07:23.613
> 
> 标签：codeigniter

全局 xss 保护现在设置为 TRUE。但是毒输入会按字面意思显示为 [removed]，所以我需要知道输入是否是毒，如果是毒我会放弃它。

我可以简单地使用函数 strstr 来执行此操作，如果字符串中有 [removed] 则它是有毒的。

但是如果 CodeIgniter 已经提供了会不会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:21:33.970

试试这个：

```
word_censor(); 
```

文本助手

```
$disallowed = array('darn', 'shucks', 'golly', 'phooey');

$string = word_censor($string, $disallowed, 'Beep!'); 
```

使您能够审查文本字符串中的单词。第一个参数将包含原始字符串。第二个将包含您不允许的单词数组。第三个（可选）参数可以包含单词的替换值。如果未指定，它们将替换为井号：####。例子：

# powershell - 使用 Powershell V3 安装 PowerGUI 后无法使用 out-gridview

> ID：13004184
> 
> 赞同：0
> 
> 时间：2012-10-22T02:08:31.897
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-ise

只是想知道是否有人看到这个并且知道解决方法。

我正在运行 Windows 7 64 位，刚刚升级到 Powershell V3。从那以后，我不能使用 out-gridview 命令。我收到以下错误。

要使用 Out-GridView cmdlet，请从服务器管理器安装 Windows PowerShell 集成脚本环境功能。（无法加载文件或程序集 'Microsoft.PowerShell.GraphicalHost, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件。）

我已经打开了本机 MS ISE，并且可以运行 out-gridview 而不会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:54:03.207

PowerGUI 脚本编辑器使用 PowerShell v.2 启动，即使您安装了 PowerShell v.3。使用“-version 3.0”选项启动脚本编辑器为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:42:17.430

我通过将 -Version 2.0 更改为 -Version 3.0 来修复它
右键单击​​ Exchange Management shell 并选择属性。在上面的目标中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T22:50:59.187

您可以检查两件事：

1.  安装 PowerShell V3 时，是否还确保安装了`PowerShell Integrated Scripting Environment (ISE)`.
2.  确保您也已`Microsoft .NET Framework v3.5 with Service Pack 1`安装。

[答案来源](http://connect.microsoft.com/PowerShell/feedback/details/640499/out-gridview-cmdlet-dependency-on-powershell-ise-is-not-documented)

# php - ImageMagick - 从 SVG 文件渲染 PNG，内容脱离“页面”

> ID：13004187
> 
> 赞同：0
> 
> 时间：2012-10-22T02:09:37.577
> 
> 标签：php, imagemagick, imagemagick-convert

我已经编写了一个将 SVG 转换为 PNG 的脚本，该脚本运行良好，直到 SVG 中的内容“脱离页面”。

例如：

![SVG 内容为“页外”](../Images/846884a250f06a1011a350c1c287f3b5.png "SVG 内容为“页外”")

黑线将被很好地转换，但绿框被完全忽略。一些 SVG 文件的内容完全脱离页面并呈现一个空的 PNG 文件。

我当前的命令：

```
convert -background none "$file" -trim -geometry $size "$target" 
```

我有 2k + SVG 文件，我正在转换至少大约 500 个或更多的文件，因此手动将图像移动到页面上并不是一个选项。

**编辑** 这里是一个[示例文件](http://i.minus.com/1350987597/TekiEBopHNqEd5UOKz5cFg/doP6HfWFa3MEI/tribal-0003.svg)的链接。实际绘图与左侧页面底部一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:41:40.023

*当然*，“离页”的内容将在 PNG 中被忽略。与 SVG 不同，PNG 文件格式不知道“离页”概念。

这类似于在一张纸上打印：打印机也无法显示“离页”内容。

有两个选项供您探索。两者的效果是您会将实际页面大小更改为更大的页面：

1.  您*可以*通过将 SVG 渲染到更大的 PNG 画布，*然后*自动修剪多余的边缘来获取 PNG 中的“页外”内容。（由于缺少示例文件，我自己无法尝试。）

2.  您可以尝试通过 2 步或 3 步过程达到预期的结果：

    *   通过增加其画布来修改 SVG，使其包含“页面上”的所有对象；
    *   将修改后的 SVG 转换为 PNG；
    *   （可选：修剪 PNG 的边缘）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:41:12.813

所以我终于得到了这个工作。似乎无法直接使用 ImageMagick 进行操作，因此最终操作了实际的 SVG 数据。

首先是找到对象的边界。使用 PHP 和 simpleXml 我将 SVG 数据转换为数组以便于操作/遍历。

似乎所有坐标都采用 xy 的形式，因此这会将坐标分解为数字，并在 x / y 记录之间切换（如果其高于/低于先前的值）。

```
/** $line is a <g> object */
protected function _position($line, &$position) {
        if(empty($line['@d'])) {
            if(is_array($line)) {
                foreach($line as $l) {
                    self::_position($l, $position);
                }
                return;
            }
        }

        if(empty($position)) {
            $position = array(
                'min' => array(
                    'x' => null,
                    'y' => null
                ),
                'max' => array(
                    'x' => null,
                    'y' => null
                )
            );
        }

        foreach(array_filter(preg_split('/([a-z])/i', $line['@d'])) as $cord) {
            $coordinate = 'x';
            foreach(explode(' ', $cord) as $value) {
                if(empty($value)) {
                    continue;
                }

                if($position['min'][$coordinate] == null || $position['min'][$coordinate] > $value - 1) {
                    $position['min'][$coordinate] = $value;
                }

                if($position['max'][$coordinate] == null || $position['max'][$coordinate] < $value + 1) {
                    $position['max'][$coordinate] = $value;
                }

                $coordinate = ($coordinate != 'x') ? 'x' : 'y';
            }
        }
    } 
```

一旦你得到了最小/最大界限，我就找到了一个属性`transform`，`translate`它通过指定的 x,y 移动对象。所以只要拿走`0 - $min`它就会被移动到`0`它可能的位置`0 - -10`或`0 - 10`

我所有的文件都没有属性，所以我只是简单地替换`<g>`了`<g transform="translate($widthOffset, $heightOffset)">`

还要设置视图框大小：

```
$xml['svg']['@viewbox'] = sprintf('%s %s %s %s',
    $position['min']['x'],
    $position['min']['y'],
    ($position['max']['x'] - $position['min']['x']),
    ($position['max']['y'] - $position['min']['y'])
); 
```

最后要做的就是将数组转换回 XML 并将新数据保存回文件中。

# java - 为什么在转换为 BigDecimal 时带前导符号（加号或减号）的数字在 Java 中被视为有效数字？

> ID：13004193
> 
> 赞同：5
> 
> 时间：2012-10-22T02:10:45.097
> 
> 标签：java, bigdecimal

显而易见，以下表达式在 Java 中是有效的

```
int a = -0;
int b = +0; 
```

以下是。

```
Integer c = new Integer(-0);
int d = Integer.parseInt("-0");
BigDecimal e = new BigDecimal("-0"); 
```

* * *

然而，以下陈述是无效的。

```
Integer f = new Integer("+0");   //Leading + sign.
int g=Integer.parseInt("+0");    //Leading + sign. 
```

他们俩都扔了`NumberFormatException`。

然而，下面的语句`BigDecimal`编译并运行，不会引发异常。

```
BigDecimal bigDecimal = new BigDecimal("+0");  //Leading + sign. 
```

为什么前导`+`符号在`BigDecimal`此处有效，而在 Java 中可用的其他数据类型似乎并非如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:23:59.170

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)，负号需要减号。但如果它是一个正整数，则不需要加号。

`public static int parseInt(String s)`

> 字符串中的字符必须都是十进制数字，**除了第一个字符可以是 ASCII 减号 '-' ('\u002D') 来表示负值**。返回结果整数值，就像参数和基数 10 作为参数提供给 parseInt(java.lang.String, int) 方法一样。

然后对于构造函数：

`public Integer(String s)`

> 字符串转换为 int 值**的方式与 parseInt 方法**用于基数 10 的方式完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T02:56:21.990

真正的答案很*可能*是两者之间的不一致行为`new Integer("+0")`是`new BigDecimal("+0")`其中一个或另一个设计错误的结果。不幸的是，当相关类公开发布时，这个错误被“烤熟”了，Sun / Oracle 不愿意修复它，因为：

1.  各自的实现确实符合各自的规范，
2.  通过简单的解决方法，不一致是一个相对较小的问题，并且
3.  修复它可能会破坏向前和向后的兼容性。

（这个解释得到了@rlay3 发现的[Java Bug #4296955](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4296955)的评估部分的支持！！）

* * *

请注意，我已将您的 Java 表达式示例排除在考虑范围之外。这是因为 Java 表达式语法和转换文本字符串的上下文完全不同，以至于 (IMO) 您不应该*期望*它们的行为相同。`\`（同样，你不应该期望字符串阅读器对它遇到的任何字符做一些特殊的事情......）

* * *

**更新**

@ADTC 观察到他们实际上确实在 Java 7 中改变了这一点，并且`Integer.parseInt`现在*确实*接受了一个领先的`+`标志。

此增强功能的相应 Java 错误是[#5017980](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=5017980)。（如果您查看链接的错误，第一个错误*似乎*暗示该更改已被反向移植到 OpenJDK6。）

但是，Oracle*没有*在 Java 7 兼容性/升级文档中提到这一变化……这很奇怪，因为 Sun 之前*因为兼容性问题而拒绝了这一变化！*

这一切都相当奇特......

# c - C - 将变量 INT 作为 strcat 的 Char *

> ID：13004195
> 
> 赞同：1
> 
> 时间：2012-10-22T02:10:49.310
> 
> 标签：c, pointers, char, strcat

我正在尝试使用表示整数的 char 来制作 char *。所以到目前为止我有这个

```
int x;
for(x=0;x<12;x++){
    cp->name=strcat(tp->name, (char *)x);
} 
```

name is char* 问题是 x 部分。我得到分段错误，我假设这是因为它无法访问地址 x 的内容并将其转换为 char *

对此有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:17:29.497

通过转换`x`为 a `char *`，您是在告诉编译器，“我知道我在做什么。将`x`其视为地址并将其传递给`strcat`”

因为`x`包含一个介于 0 和 12 之间的整数，`strcat`所以正试图访问该数字地址处的 char 数组。因为内存中的那个地址很可能不属于您，所以您遇到了段错误。

您将需要`sprintf`或`snprintf`获取整数的字符串表示形式。

例如：

```
int x;
for(x=0;x<12;x++){
    char buffer[16];
    snprintf(buffer, sizeof(buffer), "%d", x);
    cp->name=strcat(tp->name, buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:17:06.233

您需要将数字显式转换`x`为字符串（=array of `chars`）。您不能仅通过类型转换来做到这一点。

使用`sprintf()`可能是最简单的方法：

```
int x;
for (x = 0; x < 12; x++)
    sprintf(tp->name + strlen(tp->name), "%d", x); 
```

不用说，`tp->name`其中必须有足够的空间，并且必须`'\0'`在执行上述操作之前将其终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T02:17:10.590

在 C 中，您可以使用`sprintf(str,"%d",x)`; 或在 C++ stringstream`std::ostringstream oss; oss << tp->name << x;`中。如果你对使用非标准函数没有疑虑，你也可以使用非标准的[itoa()](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)函数。

# c# - 如何在 CustomMessageBox Dismissed 事件处理程序中使用 NavigationService.Navigate？

> ID：13004196
> 
> 赞同：2
> 
> 时间：2012-10-22T02:10:56.223
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

我正在使用`CustomMessageBox`Silverlight Toolkit for Windows Phone 中的控件。[当按照教程中的建议](http://shawnoster.com/2012/10/welcome-custommessagebox-to-the-windows-phone-toolkit/)传递匿名回调（MS 中的“代表”？）时，我引用了代码隐藏文件中定义的页面部分类的成员。当我在运行时到达逻辑时，它会构建和部署但崩溃。

我从 VS 调试器中注意到，回调内的范围仅包含来自页面部分类的 XAML 端的成员，而不包含来自代码隐藏文件的成员。这意味着我所指的成员不在范围内（即使 Intellisense 可以使用它）。此外，我不能`NavigationService.Navigate`在回调中使用。

如何从回调中调用包含类中的代码？

这是代码，

```
 // This is a member of the partial class which inherits from 
        // PhoneApplicationPage
        private void cancelBtn_Tap(object sender, System.Windows.Input.GestureEventArgs e)
        {

            if ((this.nameTextBox.Text != String.Empty) || (bool)this.protectCheckBox.IsChecked)
            {
                CustomMessageBox messageBox = new CustomMessageBox()
                {
                    Caption = "Confirm leave page",
                    Message = "You have entered some profile data which will be lost if you leave this page. Are you sure you want to leave this page?",
                    LeftButtonContent = "no",
                    RightButtonContent = "yes"
                };

                messageBox.Dismissed += (s1, e1) =>
                {
                    if (e1.Result == CustomMessageBoxResult.RightButton)
                    {
                        // Both of these raise an exception ...
                        GoToProfilePage();
                        //NavigationService.Navigate(new Uri("/View/MainPage.xaml", UriKind.Relative));

                        // Inspecting the debugger here shows only half the expected 
                        // number of methods in the 'this' object - specifically only
                        // those defined in XAML

                    }
                };
                messageBox.Show();
            }
            else
            {
                // This works fine
                GoToProfilePage();
            }

        } 
```

`GoToProfilePage()`代码隐藏文件中的方法在哪里。

这是例外，

```
 System.NullReferenceException was unhandled
  Message=NullReferenceException
  StackTrace:
       at Microsoft.Phone.Controls.CustomMessageBox.ClosePopup(Boolean restoreOriginalValues)
       at Microsoft.Phone.Controls.CustomMessageBox.c__DisplayClass4.b__1(Object s, EventArgs e)
       at Microsoft.Phone.Controls.Transition.OnCompleted(Object sender, EventArgs e)
       at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

**更新**

看起来代码已执行，只有当委托完成时才会引发空引用异常，因此范围可能不是问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:01:22.803

一个快速的技巧是在工具包源代码中注释 CustomMessageBox.cs 文件的第 657 行并再次编译。然后在您的应用程序中引用这个新的 dll。

```
...
private void ClosePopup(bool restoreOriginalValues)
        {
            // Remove the popup.

            _popup.IsOpen = false;
            //_popup = null; <-- THIS IS LINE 657
... 
```

[http://phone.codeplex.com/workitem/10575](http://phone.codeplex.com/workitem/10575)中发布了一个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:43:00.110

好的，想通了。Windows Toolkit .dll（包括`CustomMessageBox`）的最新版本需要在我的解决方案中引用。

显然有一个旧版本的 Windows 工具包包含在某处的默认引用中，因为 ContextMenu 和 CustomMessageBox 至少部分事先工作，这非常令人困惑......

为了添加更新的引用，我在一个单独的项目中从源代码构建了 .dll 并将其复制到我的项目中。我从VS中的Reference右键菜单中添加了一个引用，并浏览到了`debug\bin`目录中的文件。

# java - 使用 EJB Timer Service 执行外部服务

> ID：13004197
> 
> 赞同：0
> 
> 时间：2012-10-22T02:11:09.593
> 
> 标签：java, ejb-3.0, svnkit

我有一个关于使用 EJB 定时器服务的场景要问。

用例如下：系统应该能够安排一个任务，该任务将使用某些特定的时间戳轮询/询问我们的 subversion 存储库以进行文件更改。

这个想法是，每当计划任务即将运行时，它将针对特定的 svn 存储库执行命令。出于这个特殊目的，我不会调用任何外部进程，而是使用“纯”java 方式来使用 SVNKit java 库[http://svnkit.com/](http://svnkit.com/)

我唯一关心的是：使用 EJB 计时器服务来执行将调用外部进程的任务是个好主意吗？我的方式将使用“纯”java方式，但在其他情况下，例如直接将批处理文件/命令行/外部可执行文件调用到计时器服务逻辑中。

我担心服务器内存使用/性能等的影响。

这是一个好主意吗？

我正在考虑的另一个想法是使用基于客户端的技术（例如 SWT/Swing）在服务器中创建一个“桌面”应用程序，该技术将进行轮询，然后在那里编写逻辑代码，但这意味着我需要管理两个应用程序. 将轮询的“桌面”应用程序和我将在 Glassfish 中创建的“网络”用户界面。

我倾向于在我选择的应用服务器上做所有事情，即 glassfish。

我以前使用过 EJB Timer，但它只调用数据库而不调用任何外部服务，只是出现了这种情况，所以我在这里提出了一个问题，以收集更多有经验的人的想法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:43:16.537

理论上，EJB 不应该依赖于外部 I/O，因为它会干扰容器/服务器对 bean 实例、线程等的管理。

在实践中，如果您采取预防措施，这应该会起作用。例如：

*   将函数隔离到它自己的 EJB（即，仅处理这些计时器的无状态会话 bean）以避免实例池问题
*   在等待命令时使用超时以避免挂起的进程挂起所有服务器线程
*   确保您不安排计时器，以便同时运行多个操作系统命令

请记住，EJB 3.0 计时器是持久的（与 EJB 3.1 计时器相比，后者可以选择非持久），这意味着：

1.  它们可以在集群中的任何服务器上运行。如果集群中有多台机器，则需要确保它们都能够运行该命令。
2.  他们在服务器重新启动后幸存下来。如果您安排一个计时器运行但服务器在它之前崩溃了，它将在服务器重新启动时运行。如果您不仔细管理现有时间（您可以轻松创建冗余计时器），这可能会导致间隔计时器出现特殊问题（所有错过的计时器将重复触发）。

# php - 设置一个复选框，如果 db 值为 1，则选中，如果 db 值为 0，则取消选中

> ID：13004199
> 
> 赞同：0
> 
> 时间：2012-10-22T02:11:30.757
> 
> 标签：php, yii

在我的代码中添加哪些参数？

```
$form->checkBox($model,'ATTRIBNAME',array("id"=>"mybox"));?> 
```

如果来自 db 的值为 1，我想将复选框显示为选中，如果从 db 获得的值为 0，则未选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:14:47.483

如果`$model->ATTRIBNAME=1` then`$form->checkBox(...)`方法的值自动选中复选框，0 表示取消选中

```
$model->ATTRIBNAME = 1;  // 0 for uncheck

//Now it displays checked box
$form->checkBox($model,'ATTRIBNAME',array("id"=>"mybox")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:53:05.433

添加选中属性

```
if ($value==1) {$attrs=array("id"=>"mybox","checked"=>"checked");}
if ($value==0) {$attrs=array("id"=>"mybox");}
$form->checkBox($model,'ATTRIBNAME',$attrs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:51:23.257

小代码

```
$form->checkBox($model,'ATTRIBNAME',array("id"=>"mybox","checked"=>($value==1)?"checked":"")); 
```

# ios - 在 iOS 中终止应用程序时恢复屏幕亮度

> ID：13004200
> 
> 赞同：2
> 
> 时间：2012-10-22T02:11:38.060
> 
> 标签：ios

我已经看到了关于无法确保您可以将屏幕亮度恢复到用户在您的应用程序中调整它之前的值的先前帖子（即在您的应用程序加载之前捕获屏幕的亮度级别并重置为该屏幕亮度在您的应用程序终止或进入后台之前）。看来这可能是 Apple 故意做的事情，以免在应用程序终止时做出用户不知道的巨大变化。但苹果似乎通过 Passbook 应用程序以某种方式实现了这一目标。请注意，当您启动 Passbook 应用程序时，屏幕亮度会增加，以便扫描仪更好地读取条形码，但当您按下主页按钮并退出 Passbook 应用程序时，屏幕亮度会恢复到之前的状态。如果苹果能做到这一点，为什么不能？我们？有人知道 Passbook 应用程序是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:23:39.353

这是一个非常简单的机制，在 iBooks 1.5+ 的某个时候引入，最终在 iOS 5 中添加了 API 后可供所有人使用`+[UIScreen brightness]`。因为它接受 0.0-1.0 的简单浮点数，所以存储它很容易，和恢复它可以在任何 UIApplication 委托方法中轻松完成。事实上，我编写了一个示例应用程序（OOH，[Shiny](http://dl.dropbox.com/u/54072935/Shiny.zip)），它在启动时恢复屏幕亮度，并在退出时保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T20:28:57.777

```
static CGFloat s_brightness = 0.5f;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    s_brightness = [[UIScreen mainScreen] brightness];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    [[UIScreen mainScreen] setBrightness:s_brightness];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T14:39:00.113

在斯威夫特

```
static var defaultBrightNess:CGFloat = 0.5;
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -> Bool 
{
        AppDelegate.defaultBrightNess = UIScreen.main.brightness;
        UIScreen.main.brightness = 1.0;
        return true
}

func applicationWillEnterForeground(_ application: UIApplication) {
        UIScreen.main.brightness = 1.0
}

func applicationWillResignActive(_ application: UIApplication) {
        UIScreen.main.brightness = CGFloat(AppDelegate.defaultBrightNess)
} 
```

# c# - LINQ XML 子查询 - 需要帮助

> ID：13004201
> 
> 赞同：2
> 
> 时间：2012-10-22T02:11:38.423
> 
> 标签：c#, xml, linq

我当前的 LINQ 查询和示例 XML 如下。我想做的是从 以及其他属性（如修剪、身体、品牌、型号等）中选择主要图像 url。

做这个的最好方式是什么？

```
<response>
<objects>
    <object>
        <trim>LT</trim>
        <body>4dr Car</body>
        <warranty_miles />
        <color>WHITE</color>
        <selling_price>0.00</selling_price>
        <vin>1g1jc5sh3c4198042</vin>
        <has_service_contract >False</has_service_contract>
        <year>2012</year>
        <alt_id></alt_id>
        <stock_num>1205362</stock_num>
        <has_warranty>False</has_warranty>
        <warranty_month />
        <make>CHEVROLET</make>
        <date_manufactured />
        <interior_color>Dark Pewter/Dark Titanium</interior_color>
        <date_updated>2012-10-17</date_updated>
        <date_dealer_created>2012-06-06</date_dealer_created>
        <certification_warranty />
        <status/>
        <vevo></vevo>
        <image_urls>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/1764e186eabe4ae892f6230107b862cf.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/3eeb7050770849e8937191d09453d936.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/7f6c1f172f7b4944ac2d165c0dfbcb09.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/82d242ba07bb4bb9a7c8514ea1aadae7.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/93e3cac89d0f4872b86acd9c2d94695a.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/edec4ffe9b2349ffabea9dcb25a78d1e.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/f2c1dbb15fec4cf6a62b7842db22763a.jpg</url>
                <resource_uri></resource_uri>
            </object>
            <object>
                <url>http://content.homenetiol.com/1593/69025/640x480/fa7341e250654533a9de2a756d4274eb.jpg</url>
                <resource_uri></resource_uri>
            </object>
          </image_urls>
       </object>
   </objects>
 </response> 
```

这是我到目前为止所拥有的

```
 var users = from m in main2.Elements("object")
                    select new Inventory 
                    {
                        Make = (string)m.Element("make"),
                        Year = (string)m.Element("year"),
                        Model = (string)m.Element("model"),
                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:02:37.710

您希望将`image_urls`节点下的对象集合投影到列表中。

这会将其投影到字符串列表中。

```
select new Inventory
{
    Make = (string)m.Element("make"),
    Year = (string)m.Element("year"),
    Model = (string)m.Element("model"),
    Urls = m.Element("image_urls").Elements().Select(e => (string)e.Element("url"))
}; 
```

# python - PyContract 检查导入模块中的函数

> ID：13004202
> 
> 赞同：1
> 
> 时间：2012-10-22T02:11:40.163
> 
> 标签：python, design-by-contract

我正在使用[PyContract](http://pypi.python.org/pypi/contract/1.4)（不是[PyContracts](http://pypi.python.org/pypi/PyContracts/1.4.0)）为我的遗传算法框架实现按合同设计。

主模块是，它从（我们称之为）`GA.py`调用一个函数。我已经为.`crossover.py``foocross``foocross`

现在，我希望在运行`main`GA.py时检查这些条件。我引入了一个错误的前提条件`foocross`只是为了测试是否正在检查合同，但似乎没有。我如何确保正在检查合同？

这是我的代码的最小部分：

```
# GA.py
def main():
    # some code
    crossover.foocross(params)
    # some more code

if __name__ == "__main__":
    main()

#crossover.py
def injectionco(p1, p2, chrom):
    """
        pre:
            isinstance(p1, int) # this should raise an error. p1 is never an int
            isinstance(p2, list)
            isinstance(chrom, int)
            forall(p1, lambda elem: any(isinstance(elem, i.__class__) for i in p2))
            forall(p2, lambda elem: any(isinstance(elem, i.__class__) for i in p1))
            len(p1) == len(p2)

        post:
            p1 is __old__.p1
            p2 is __old__.p2
            p1 == __old__.p1
            p2 == __old__.p2
            isinstance(__return__, p1.__class__)    # returns an individual
            len(__return__) == len(p1)
            id(__return__) not in [id(p1), id(p2)]
            forall(__return__, lambda elem: __return__.count(elem) == 1)
        """

    #code
    return #something 
```

PS：这对我来说是一个很难写的问题，因为我不得不删除很多代码（因为框架非常复杂）而且我是按合同设计的新手。因此，如果我错过了一些有助于回答这个问题的信息，请询问，我很乐意提供更多信息:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:30:51.270

查看[示例](http://www.wayforward.net/pycontract/examples/sort.py)，您似乎需要做的就是：

```
# this needs to be there unconditionally.
import contract
contract.checkmod(__name__)

if __name__ == '__main__':
   import doctest, GA
   doctest.testmod(GA) 
```

但是，下面的这**将不起作用**（因为 inside `import GA`，`contract.checkmod()`不会发生）：

```
if __name__ == '__main__':
   import contract
   contract.checkmod(__name__)
   import doctest, GA
   doctest.testmod(GA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:02:38.377

还有另一种解决方案。对于大型代码库，编辑多个文件以启用/禁用每个模块的合同检查会很乏味。我能够从我的主模块调用所有合同检查，如下所示：

```
#GA.py

import crossover # and all other required modules
import contract

for mod in [crossover]: # put all other imported modules in that list
    contract.checkmod(mod) 
```

# c# - 改变数字上下的高度

> ID：13004203
> 
> 赞同：5
> 
> 时间：2012-10-22T02:11:59.280
> 
> 标签：c#, winforms

我在我的应用程序中使用数字上下，我想更改数字上下的高度我不能从属性窗口中做到这一点，我尝试使用代码更改它但高度仍然没有改变，有什么方法可以改变通过属性窗口或动态代码的数字 updown 的高度。使用默认高度很难使用触摸笔更改数字（正在使用的显示器是触摸面板）我使用的是 winforms（.net 4.0）

```
 dynamicUpDown.Width = 200;
    dynamicUpDown.Height = 25; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T04:35:24.273

除非您将其设为 OwnerDraw（我认为），否则您无法更改控件的高度。更改此控件和其他控件的字体会使其高度变大。

[此](http://www.scribd.com/doc/77858380/250/How-do-I-implement-an-owner-drawn-combobox)链接具有更改 OwnerDrawn 高度的代码`ComboBox`。如果您愿意，您可以使用从中学到的知识并将其应用于`NumericUpDown`控件

# java - Destroy middle activity in android

> ID：13004208
> 
> 赞同：1
> 
> 时间：2012-10-22T02:12:58.153
> 
> 标签：java, android

I just saw a piece of code:

```
public class MyApplication extends Application {

        private List<Activity> activityList = new LinkedList<Activity>();
        private static MyApplication instance;

        private MyApplication() {
        }

        public static MyApplication getInstance() {
                if (null == instance) {
                        instance = new MyApplication();
                }
                return instance;

        }

        public void addActivity(Activity activity) {
                activityList.add(activity);
        }

        public void exit() {

                for (Activity activity : activityList) {
                        activity.finish();
                }

                System.exit(0);

        }

} 
```

I never thought that we can take control of other activity beside the current one. I usually call finish() inside its own activity, now I saw this code, I realize that we can finish() other activity as well.

Android stack is back stack architecture, so if I destroy any activity in the middle, what will happen? For example, I have 5 activity in the back stack, let say I finish() the third one, will the second and fourth be linked together now?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:59:47.100

Android maintains a stack of the Activities being started, so the application which was started first goes to the bottom of the stack, the second one above it and henceforth.

So, if you remove the third Activity, the fourth one would come on top of the second Activity and thus **they would get linked**, as you have rightly understood from the code.

# javascript - 将变量传递给 javascript 的样式 css

> ID：13004209
> 
> 赞同：0
> 
> 时间：2012-10-22T02:13:00.900
> 
> 标签：javascript, css

我正在尝试使用 JavaScript 中的变量设置左边距。这可能吗？如何才能做到这一点？

左边距需要是文本的clientWidth：

```
var hoverBubble = document.getElementById(id);
var linkWidth = link.clientWidth + 1;
hoverBubble.style.margin-left = linkWidth + 'px'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:14:37.687

有可能，你只需要驼峰式风格的属性。

```
hoverBubble.style.marginLeft = linkWidth + 'px'; 
```

* * *

您不能像问题中那样使用连字符（减号）。

否则解释器会“认为”你在赋值的左边有一个减法运算，这会导致语法错误。

您可以在适当的调试工具上看到该错误，例如[Chrome 开发工具](https://developers.google.com/chrome-developer-tools/docs/overview)（Chrome 中的 F12 并选择控制台）或[Firebug](https://getfirebug.com/)（安装 Firebug 并在 Firefox 上按 F12）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:15:10.790

尝试这个

```
hoverBubble.style.marginLeft = linkWidth + 'px'; 
```

# google-drive-api - 谷歌网站中的 javascript 示例有问题

> ID：13004217
> 
> 赞同：1
> 
> 时间：2012-10-22T02:14:37.327
> 
> 标签：google-drive-api

将 CLIENT_ID 更改为我的 google api 访问中的 ID 后，我尝试在我的 google 站点中使用 HTML Box 的页面中测试 javascript 示例；当我尝试保存 HTML 框时，无法加载外部 url client.js?onload=handleClientLoad 消息。如何使用谷歌网站使 javascript 示例工作？

```
<script type="text/javascript">
   var CLIENT_ID = 'MY_CLIENT_ID';
   var SCOPES = 'https://www.googleapis.com/auth/drive';

   /**
    * Called when the client library is loaded to start the auth flow.
    */
   function handleClientLoad() {
     window.setTimeout(checkAuth, 1);
   }

   /**
    * Check if the current user has authorized the application.
    */
   function checkAuth() {
     alert('checkAuth()');
     gapi.auth.authorize(
         {'client_id': CLIENT_ID, 'scope': SCOPES, 'immediate': true},
         handleAuthResult);
   }

   /**
    * Called when authorization server replies.
    *
    * @param {Object} authResult Authorization result.
    */
   function handleAuthResult(authResult) {
     alert('handleAuthResult()');
     if (authResult && !authResult.error) {
       // Access token has been successfully retrieved, requests can be sent to the API.
       var filePicker = document.getElementById('filePicker');
       filePicker.style.visibility = '';
       filePicker.onchange = uploadFile;
     } else {
       // No access token could be retrieved, force the authorization flow.
       gapi.auth.authorize(
           {'client_id': CLIENT_ID, 'scope': SCOPES, 'immediate': false},
           handleAuthResult);
     }
   }

   /**
    * Start the file upload.
    *
    * @param {Object} evt Arguments from the file selector.
    */
   function uploadFile(evt) {
     gapi.client.load('drive', 'v2', function() {
       var file = evt.target.files[0];
       insertFile(file);
     });
   }

   /**
    * Insert new file.
    *
    * @param {File} fileData File object to read data from.
    * @param {Function} callback Function to call when the request is complete.
    */
   function insertFile(fileData, callback) {
     const boundary = '-------314159265358979323846';
     const delimiter = "\r\n--" + boundary + "\r\n";
     const close_delim = "\r\n--" + boundary + "--";

     var reader = new FileReader();
     reader.readAsBinaryString(fileData);
     reader.onload = function(e) {
       var contentType = fileData.type || 'application/octet-stream';
       var metadata = {
         'title': fileData.name,
         'mimeType': contentType
       };

       var base64Data = btoa(reader.result);
       var multipartRequestBody =
           delimiter +
           'Content-Type: application/json\r\n\r\n' +
           JSON.stringify(metadata) +
           delimiter +
           'Content-Type: ' + contentType + '\r\n' +
           'Content-Transfer-Encoding: base64\r\n' +
           '\r\n' +
           base64Data +
           close_delim;

       var request = gapi.client.request({
           'path': '/upload/drive/v2/files',
           'method': 'POST',
           'params': {'uploadType': 'multipart'},
           'headers': {
             'Content-Type': 'multipart/mixed; boundary="' + boundary + '"'
           },
           'body': multipartRequestBody});
       if (!callback) {
         callback = function(file) {
           console.log(file)
         };
       }
       request.execute(callback);
     }
   }
 </script>
 <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
<div>
 <!--Add a file picker for the user to start the upload process -->
 <input type="file" id="filePicker" style="visibility: hidden" />
</div> 
```

# c - 在C中复制两个文件时出现垃圾？

> ID：13004218
> 
> 赞同：1
> 
> 时间：2012-10-22T02:14:46.950
> 
> 标签：c, file, copy, garbage

我有这个从infile到outfile的复制代码，问题是在outfile的末尾添加了很多垃圾

```
ssize_t nread;
int bufsize=512;
char buffer[bufsize];

while ( (nread=read(infile, buffer, bufsize)>0))
{
    if( write(outfile, buffer, bufsize)<nread ) 
    {
        close(outfile); close(infile); printf("error in write loop !\n\n");
        return (-4);
    }
}
if( nread == -1) {
  printf ("error on last read\n"); return (-5);
}//error on last read / 
```

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T02:19:13.103

```
while ( (nread=read(infile, buffer, bufsize)>0)) 
```

应该：

```
while ( (nread=read(infile, buffer, bufsize)) >0 ) 
```

as`>` 与 相比具有更高的优先级`=`。

还

```
write(outfile, buffer, bufsize) 
```

你总是在写`bufsize`字节数。但是在读取操作中不需要读取那么多字节。这可能发生在复制的最后一次迭代中。要解决此问题，您应该写入`nread`字节数。

# c# - 一个实体可以与多个实体关联吗？

> ID：13004219
> 
> 赞同：3
> 
> 时间：2012-10-22T02:15:08.920
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

因此，假设我有以下实体及其上下文配置设置如下。为了简洁起见，我省略了很多属性：

```
public class Company {
    public int Id { get; set; }
    public Location Location { get; set; }
}

public class Customer {
    public int Id { get; set; }
    public Location Location { get; set; }
}

public class Location {
    public int Id { get; set; }
}

public sealed class EntityDefaultContext : DbContext {
    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<Company>().HasKey(m => m.Id).ToTable("Company");
        modelBuilder.Entity<Company>().Property(m => m.Id).HasColumnName("Id");
        modelBuilder.Entity<Company>().HasRequired(m => m.Location).WithRequiredDependent().Map(m => m.MapKey("LocationId"));

        modelBuilder.Entity<Customer>().HasKey(m => m.Id).ToTable("Customer");
        modelBuilder.Entity<Customer>().Property(m => m.Id).HasColumnName("Id");
        modelBuilder.Entity<Customer>().HasRequired(m => m.Location).WithRequiredDependent().Map(m => m.MapKey("LocationId"));

        modelBuilder.Entity<Location>().HasKey(m => m.Id).ToTable("Location");
        modelBuilder.Entity<Location>().Property(m => m.Id).HasColumnName("Id");
    }
} 
```

如您所见，Company 和 Customer 实体都持有对 Location 实体的引用。我相信通常会发生的事情。

如您所见，我为此设置了数据库上下文。但是 EF 生成的 SQL 效率非常低：

```
SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[LocationId] AS [LocationId], 
    [Extent3].[Id] AS [Id1]
FROM
    [dbo].[Customer] AS [Extent1]
LEFT OUTER JOIN [dbo].[Company] AS [Extent2] ON [Extent1].[LocationId] = [Extent2].[LocationId]
LEFT OUTER JOIN [dbo].[Company] AS [Extent3] ON [Extent1].[LocationId] = [Extent3].[LocationId]
LEFT OUTER JOIN [dbo].[Company] AS [Extent4] ON [Extent1].[LocationId] = [Extent4].[LocationId] 
```

这是在我执行以下操作时生成的：

```
var q = from c in defaultContext.Set<Customer>().Include(m => m.Location)
        select c; 
```

我这样做是出于与问题无关的原因。奇怪的是，如果我只将 Location 实体配置为仅与 Customer 实体关联，那么这里是 SQL：

```
SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[LocationId] AS [LocationId]
FROM
    [dbo].[Customer] AS [Extent1]
INNER JOIN [dbo].[Location] AS [Extent2] ON [Extent1].[LocationId] = [Extent2].[Id] 
```

这是我所期望的。这让我思考。EF 不支持这种情况吗？怎么可能没有？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:18:56.353

您的原始映射使用一对一的关系。这总是会导致一些特殊的行为。此外，它还有一些其他要求才能正常工作。`Customer`您可能想要的是and`Location`和`Company`and之间的一对多关系`Location`。更改`WithRequiredDependent`为`WithMany`它应该可以工作。

# c - 再次执行进程时，使用 signal.h 终止在后台运行的进程

> ID：13004221
> 
> 赞同：0
> 
> 时间：2012-10-22T02:15:12.537
> 
> 标签：c, linux, signals

假设这个程序在后台运行。

假设包含标头，例如 signal.h ...

```
void SignalHandler(int sig);
int fd;
int main(int argc, char *argv[]){

signal(SIGINT,SignalHandler);
signal(SIGHUP,SignalHandler);
signal(SIGTERM,SignalHandler);

setsid();
close(0);
close(1);
close(2);

fd = open("/myPIPE", O_RDWR);
if(fd<0){
perror("open() error");
exit(1);
}

while (1) {
        err = read(fd, strbuf, 256);
        if(err)
            syslog(LOG_INFO,"%s",strbuf);   

        }
close(fd);

}

void SignalHandler(int sig){

if(fd!=-1)
close(fd);
exit(0);

} 
```

假设此代码已经在运行。并具有测试信号的程序名称。当我在终端 ./testsignal 中再次运行它时，进程只会继续加起来。当前正在运行的进程应该退出，新进程应该替换旧进程。所以只有进程应该运行。我需要这方面的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:12:54.417

此代码是您的简化代码，因为它不使用`syslog()`. 它也不会关闭标准输入、标准输出和标准错误，所以守护进程仍然有办法将信息记录到标准输出（特别是）。这让我更容易测试。

该`flprintf()`函数用于确保所有输出到标准输出的输出都被刷新；它减少了程序中无聊的 4 行代码块的数量。该程序还记录了更多的活动，这也使得查看正在发生的事情变得更容易。（部分原因是我设法忽略了注释掉的`close()`系统调用。）我将所有在源文件之外不需要可见的东西都设为静态；这意味着 only`main()`不是静态的。此代码还确保读取的字符串以空值结尾，因此长字符串后跟短字符串不会产生短字符串加上较长字符串剩余部分的混搭的消息。

```
#include <unistd.h>
#include <stdio.h>
#include <signal.h>
#include <string.h>
#include <stdlib.h>
#include <fcntl.h>
#include <stdarg.h>

static void flprintf(const char *fmt, ...);
static void SignalHandler(int sig);
static int fd = -1;

int main(int argc, char **argv)
{
    int nbytes;
    char strbuf[257];

    if (argc > 1)
    {
        int pid = atoi(argv[1]);
        if (kill(pid, SIGINT) != 0)
            flprintf("Failed to deliver SIGINT to PID %d\n", pid);
        else
            flprintf("SIGINT successfully delivered to PID %d\n", pid);
    }

    flprintf("Starting - %d\n", (int)getpid());

    signal(SIGINT, SignalHandler);
    signal(SIGHUP, SignalHandler);
    signal(SIGTERM, SignalHandler);

    setsid();
    //close(0);
    //close(1);
    //close(2);

    fd = open("./myPIPE", O_RDWR);
    if (fd < 0)
    {
        perror("open() error");
        exit(1);
    }

    flprintf("Starting read loop\n");

    while ((nbytes = read(fd, strbuf, sizeof(strbuf)-1)) > 0)
    {
        strbuf[nbytes] = '\0';
        flprintf("<<%s>>\n", strbuf);
    }

    flprintf("Read EOF - %d exiting\n", (int)getpid());

    close(fd);
    return(0);
}

void SignalHandler(int sig)
{
    flprintf("Received signal %d - %d exiting\n", sig, (int)getpid());
    if (fd != -1)
        close(fd);
    exit(0);
}

static void flprintf(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vprintf(fmt, args);
    va_end(args);
    fflush(stdout);
} 
```

我在 Mac OS X 10.7.5（GCC 4.7.1，在这种情况下并不重要）上进行了测试。一旦它工作，我发现唯一令人惊讶的行为是，当向 FIFO 写入消息的进程关闭时，程序没有得到 EOF。但是，我认为这可以通过`O_RDWR`通话`open()`来解释；仍然有一个进程（这个）打开了 FIFO。重新编译`O_RDONLY`并在第一次写入管道......健全规则后退出进程。作为一种实现从不报告 EOF 的 FIFO 的方式，您所做的一切都很好。（这也解释了为什么进程在打开时没有阻塞，等待进程打开 FIFO。）

样本输出：

```
$ ./sig >> sig.out &
[1] 47598
$ cat sig.out
Starting - 47598
Starting read loop
$ echo "Testing, 1, 2, 3" > myPIPE
$ cat sig.out
Starting - 47598
Starting read loop
<<Testing, 1, 2, 3
>>
$ echo "Another test - 1, 2, 3" > myPIPE
$ echo "Mini test - 1, 2" > myPIPE
$ cat sig.out
Starting - 47598
Starting read loop
<<Testing, 1, 2, 3
>>
<<Another test - 1, 2, 3
>>
<<Mini test - 1, 2
>>
$ ./sig 47598 >> sig.out &
[2] 47610
$ cat sig.out
Starting - 47598
Starting read loop
<<Testing, 1, 2, 3
>>
<<Another test - 1, 2, 3
>>
<<Mini test - 1, 2
>>
Received signal 2 - 47598 exiting
SIGINT successfully delivered to PID 47598
Starting - 47610
Starting read loop
[1]-  Done                    ./sig >> sig.out
$ echo "Testing, 1, 2, 3" > myPIPE
$ cat sig.out
Starting - 47598
Starting read loop
<<Testing, 1, 2, 3
>>
<<Another test - 1, 2, 3
>>
<<Mini test - 1, 2
>>
Received signal 2 - 47598 exiting
SIGINT successfully delivered to PID 47598
Starting - 47610
Starting read loop
<<Testing, 1, 2, 3
>>
$ kill 47610
$ cat sig.out
Starting - 47598
Starting read loop
<<Testing, 1, 2, 3
>>
<<Another test - 1, 2, 3
>>
<<Mini test - 1, 2
>>
Received signal 2 - 47598 exiting
SIGINT successfully delivered to PID 47598
Starting - 47610
Starting read loop
<<Testing, 1, 2, 3
>>
Received signal 15 - 47610 exiting
[2]+  Done                    ./sig 47598 >> sig.out
$ 
```

# clojure - Clojurescript 中如何实现（相同？ab）？

> ID：13004222
> 
> 赞同：3
> 
> 时间：2012-10-22T02:15:41.193
> 
> 标签：clojure, clojurescript

我只是好奇，环顾四周，似乎Javascript没有`equals()`像Java这样的方法。此外，两者都不能`==`或`===`不能用于检查两个运算符是否是同一个项目。那么 Clojurescript 是如何拥有 a`==`和 a`identical?`运算符的呢？

另外，我应该期望`identical?`比`==`Clojurescript 快得多吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:48:54.017

看起来它只是`===` [https://github.com/clojure/clojurescript/blob/master/src/clj/cljs/core.clj#L208的宏](https://github.com/clojure/clojurescript/blob/master/src/clj/cljs/core.clj#L208)

*根据@dnolen 的评论更新*

它也是一个函数，它只是调用`===`： [https ://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs#L43](https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs#L43)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T05:05:28.637

[这是Himera ClojureScript REPL](http://himera.herokuapp.com/index.html)的快速结果：

```
 cljs.user> =
    #<function (a, b) {
    return cljs.core._equiv.call(null, a, b)
    }>

    cljs.user> ==
    #<function (a, d, e) {
    switch(arguments.length) {
    case 1:
    return!0;
    case 2:
    return cljs.core._equiv.call(null, a, d);
    default:
    return b.apply(this, arguments)
    }
    throw"Invalid arity: " + arguments.length;
    }>

    cljs.user> identical?
    #<function (a, b) {
    return a === b
    }> 
```

根据[Mozilla 关于比较运算符的 JavaScript 参考，运算](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)符`===`确实*比较*了两个操作数是否是同一个对象实例，并且由于`identical?`在 clojurescript 中直接映射到`===`JavaScript 中，因此它会这样做。

`identical?`直接映射到的事实`a === b`也表明它会比`=`或`==`因为它们都转换为对`cljs.core._equiv`. 但是，如果一个好的 JavaScript JIT 引擎将所有三个都减少为非常相似的数字机器代码，我不会感到惊讶，因为数字的`-equiv`实现只是映射到`identical?`：

```
(extend-type number
  IEquiv
  (-equiv [x o] (identical? x o)) 
```

# ios - Google Translation API 中的注音字符

> ID：13004224
> 
> 赞同：1
> 
> 时间：2012-10-22T02:16:06.780
> 
> 标签：ios, objective-c, xcode, google-translate, google-translation-api

我正在使用 Google Translation API，这是一个将“Hello”从英语转换为简体中文的示例请求：

[谷歌翻译 API - 'Hello' 从英文到中文](https://www.googleapis.com/language/translate/v2?key=MY_KEY&q=hello&source=en&target=zh-CN&format=text&prettyprint=true)

正如你所看到的，这几乎是它返回的所有数据：

> 你好

这对可能想要说它的用户来说不是很有帮助，谷歌翻译 API 也会返回任何拼音或拼音输入，因此它可能会返回如下：

> 你好

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:31:19.320

这对于当前的 API 是不可能的。看：

[从 Google Translate API 获取中文罗马拼音](https://stackoverflow.com/questions/2750093/get-chinese-romanization-from-google-translate-api)

显然，谷歌尚未在 API 中实施仍然是一个悬而未决的问题。

# javascript - 如何从地图外部与传单标记层进行交互？

> ID：13004226
> 
> 赞同：30
> 
> 时间：2012-10-22T02:16:17.500
> 
> 标签：javascript, jquery, leaflet, geojson

[我有一张传单地图，显示了从GeoJSON](http://geojson.org/)呈现的公共艺术作品的点。在地图旁边，我从相同的[GeoJSON](http://geojson.org/)数据创建了一个片段列表，并希望能够单击地图外部列表中的一个项目，并在地图上显示相关标记的弹出窗口。

如何通过点击事件将项目列表链接到它们各自的标记？

我的 map.js 文件如下所示：

```
var map;
var pointsLayer;

$(document).ready(function () {
    map = new L.Map('mapContainer');
    var url = 'http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-streets/{z}/{x}/{y}.png';
    var copyright = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade';
    var tileLayer = new L.TileLayer(url, {
        attribution: copyright
    });
    var startPosition = new L.LatLng(41.883333, - 87.633333);
    map.on('load', function (e) {
        requestUpdatedPoints(e.target.getBounds())
    });
    map.setView(startPosition, 13).addLayer(tileLayer);
    map.on('moveend', function (e) {
        requestUpdatedPoints(e.target.getBounds())
    })
});

function requestUpdatedPoints(bounds) {
    $.ajax({
        type: 'GET',
        url: '/SeeAll',
        dataType: 'json',
        data: JSON.stringify(bounds),
        contentType: 'application/json; charset=utf-8',
        success: function (result) {
            parseNewPoints(result);
            addToList(result)
        },
        error: function (req, status, error) {
            alert('what happen? did you lose conn. to server ?')
        }
    })
}

function addToList(data) {
    for (var i = 0; i < data.features.length; i++) {
        var art = data.features[i];
        $('div#infoContainer').append('<a href="#" class="list-link" title="' + art.properties.descfin + '"><div class="info-list-item">' + '<div class="info-list-txt">' + '<div class="title">' + art.properties.wrknm + '</div>' + '<br />' + art.properties.location + '</div>' + '<div class="info-list-img">' + art.properties.img_src + '</div>' + '<br />' + '</div></a>')
    }
    $('a.list-link').click(function (e) {
        alert('now you see what happens when you click a list item!');
        e.preventDefault()
    })
}

function parseNewPoints(data) {
    if (pointsLayer != undefined) {
        map.removeLayer(pointsLayer)
    }
    pointsLayer = new L.GeoJSON();
    var geojsonMarkerOptions = {
        radius: 8,
        fillColor: "#FF6788",
        color: "YELLOW",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.5
    };
    L.geoJson(data, {
        pointToLayer: function (feature, latlng) {
            return L.circleMarker(latlng, geojsonMarkerOptions)
        },
        onEachFeature: function (feature, pointsLayer) {
            pointsLayer.bindPopup(feature.properties.img_src + "<br />" + feature.properties.wrknm + "<br />" + feature.properties.artist + "<br />" + feature.properties.location + '<div class="description">' + feature.properties.descfin + '</div>')
        }
    }).addTo(map)
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-22T13:42:12.357

Felix Kling 是对的，但我会稍微扩展他的评论......

由于 L.LayerGroup 和 L.FeatureGroup（从 L.GeoJSON 扩展而来）没有检索单个图层的方法，您需要从 L.GeoJSON 扩展并添加这样的方法，或者保留您自己的从唯一 ID 到的单独映射来自 GeoJSON 的 CircleMarker。

GeoJSON 不需要唯一 ID，但我假设您的提要中的标记具有称为“id”的唯一 ID 属性。您需要将此唯一 ID 添加到用户可以单击的链接中，以便链接可以选择地图上的正确标记。然后，您需要将 ID 映射存储到标记，以便检索标记以在地图上选择它。

```
markerMap = {}; // a global variable unless you extend L.GeoJSON

// Add the marker id as a data item (called "data-artId") to the "a" element
function addToList(data) {
    for (var i = 0; i < data.features.length; i++) {
        var art = data.features[i];
        $('div#infoContainer').append('<a href="#" class="list-link" data-artId=\"'+art.id+'\" title="' + art.properties.descfin + '"><div class="info-list-item">' + '<div class="info-list-txt">' + '<div class="title">' + art.properties.wrknm + '</div>' + '<br />' + art.properties.location + '</div>' + '<div class="info-list-img">' + art.properties.img_src + '</div>' + '<br />' + '</div></a>')
    }
    $('a.list-link').click(function (e) {
        alert('now you see what happens when you click a list item!');

        //Get the id of the element clicked
        var artId = $(this).data( 'artId' );
        var marker = markerMap[artId];

        //since you're using CircleMarkers the OpenPopup method requires
        //a latlng so I'll just use the center of the circle
        marker.openPopup(marker.getLatLng());
        e.preventDefault()
    })
} 
```

当您从服务器获取数据时，您需要构建markerMap。您的 pointToLayer 方法可以修改为：

```
L.geoJson(data, {
    pointToLayer: function (feature, latlng) {
      var marker = new L.CircleMarker( latlng, geojsonMarkerOptions );
      markerMap[feature.id] = marker;
      return marker;
    },... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-07T13:55:27.127

我知道这是一个较老的问题，但 Leaflet 正在提供内置解决方案，现在有一种（有点）内置的方式来实现它[......](https://github.com/Leaflet/Leaflet/issues/1805)

该方法将使用`layerGroup`接口。它提供了一种方法，`getLayer`听起来就像使用 ID 获取我们的标记一样完美。但是，目前 Leaflet*没有提供**任何**方式来指定自定义 ID 或 name*。

Github 上的这个[问题](https://github.com/Leaflet/Leaflet/issues/1805)讨论了如何做到这一点。`iLayer`话虽如此，您可以像这样获取并保存任何标记（或就此而言） 的自动生成的 ID ：

```
let people = [...],
    group = L.layerGroup()

people.forEach(person => {
    let marker = // ... create marker

    group.addLayer( marker );
    person.marker_id = group.getLayerId(marker)
}) 
```

现在我们已经将每个标记的 ID 与数据数组中的每个支持对象一起保存，我们可以稍后轻松地获取标记，如下所示：

```
group.getLayer(person.marker_id) 
```

有关完整示例，请参阅[此笔](http://codepen.io/gvenech/pen/QEjEGg)，有关更多选项，请参阅此[问题...](https://stackoverflow.com/questions/25683871/assign-id-to-marker-in-leaflet)

# vb.net - 在 WinRT XAML 应用程序中以编程方式访问 mp3 文件时出现 UnauthorizedAccessException

> ID：13004238
> 
> 赞同：1
> 
> 时间：2012-10-22T02:17:23.740
> 
> 标签：vb.net, xaml, exception, windows-runtime

在 WinRT 应用程序中访问 mp3 文件时出现问题。

当应用程序尝试在与 FileOpenPicker 返回的文件相同的文件夹中按名称打开 mp3 文件时，会发生“System.UnauthorizedAccessException”。换句话说，用户在 Documents 中选择一个与 mp3 文件同名的信息文件。应用程序打开信息文件很好，但无法打开 mp3 文件。

例如：我有一对文件（file1.info）和（file1.mp3）。文件选择器允许选择 (*.info) 文件。

用户选择（file1.info）。然后应用程序同时打开 (file1.info) 和 (file1.mp3)。这两个文件都位于 DocumentsLibrary 文件夹中，但不在 MusicLibrary 中。问题是当我尝试打开（file1.mp3）时，我得到了“UnauthorizedAccessException”。

准备问题：

文件：将 mp3 文件复制到 Documents。创建一个与 mp3 文件具有相同基本名称的文本文件，并将其扩展名更改为 .info。

在 Package.appxmanifest > Declarations 添加一个“文件类型关联”声明。检查“打开是安全的”。添加

支持的文件类型“.mp3”和“.info”。将“内容类型”留空。

代码：

```
Dim file as StorageFile
Dim fileopenpicker As FileOpenPicker
Dim infofile As StorageFile
Dim mp3file As StorageFile 
Dim filename As String
fileopenpicker = New FileOpenPicker()
fileopenpicker.FileTypeFilter.Add(".info")
fileopenpicker.FileTypeFilter.Add(".mp3")
fileopenpicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary
file = Await fileopenpicker.PickSingleFileAsync()
If file.Path.EndsWith(".info") Then
    infofile = file
    filename = file.Path.Substring(0, file.Path.Length - 4) & "mp3"
    ' This command fails with 'System.UnauthorizedAccessException'
    mp3file = Await StorageFile.GetFileFromPathAsync(filename)
Else 'file is an mp3 file
    mp3file = file
    filename = file.Path.Substring(0, file.Path.Length - 3) & "info"
    ' This command succeeds!
    infofile = Await StorageFile.GetFileFromPathAsync(filename)
End If 
```

因此，当 fileopenpicker 未实际选择文件时，打开 mp3 文件似乎存在一些特定问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:05:35.180

我使用具有文档库功能和声明的文件类型 .mp3 和 .info 的应用程序检查了这个问题。我发现这似乎是一个非常奇怪的错误。如果在打开 FileOpenPicker 后使用大写驱动器号将路径传递到文档库文件夹，则会收到 UnauthorizedAccessException。使用带有小写驱动器号的路径有效。奇怪的是，您可以在打开 FileOpenPicker 之前使用大写驱动器号。

所以解决方法是将路径小写。

这是我使用的代码（C#）：

```
// Trying to get some files from the documents library
// Note: F:\Program Data is my primary documents library folder
string mp3FilePath = @"F:\Program Data\2Mann1Maus.mp3";

// This works even if the drive letter is uppercase
StorageFile file1 = await StorageFile.GetFileFromPathAsync(mp3FilePath);

// It also works with a lowercase drive letter
string infoFilePath = @"f:\Program Data\2Mann1Maus.info";
StorageFile file2 = await StorageFile.GetFileFromPathAsync(infoFilePath);

FileOpenPicker fileopenpicker = new FileOpenPicker();
fileopenpicker.FileTypeFilter.Add(".info");
fileopenpicker.FileTypeFilter.Add(".mp3");
fileopenpicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
StorageFile file = await fileopenpicker.PickSingleFileAsync();
if (file.Path.EndsWith(".info"))
{
   string filename = file.Path.Substring(0, file.Path.Length - 4) + "mp3";   

   // This works
   string testFileName1 = filename.Substring(0, 1).ToLower() + 
      filename.Substring(1,  filename.Length - 1);
   StorageFile mp3file1 = await StorageFile.GetFileFromPathAsync(testFileName1);

   // This works as well
   string testFileName2 = filename.ToLower();
   StorageFile mp3file2 = await StorageFile.GetFileFromPathAsync(testFileName2); 

   // This does cause an UnauthorizedAccessException
   StorageFile mp3file3 = await StorageFile.GetFileFromPathAsync(filename);
}
else
{
   StorageFile mp3file = file;
   String filename = file.Path.Substring(0, file.Path.Length - 3) + "info"; 

   // This works
   string testFileName1 = filename.Substring(0, 1).ToLower() + 
      filename.Substring(1, filename.Length - 1);
   StorageFile infoFile1 = await StorageFile.GetFileFromPathAsync(testFileName1); 

   // This works as well
   string testFileName2 = filename.ToLower();
   StorageFile infoFile2 = await StorageFile.GetFileFromPathAsync(testFileName2); 

   // This does cause an UnauthorizedAccessException
   StorageFile infoFile3 = await StorageFile.GetFileFromPathAsync(filename);
} 
```

# oracle - 使用 IMPDP 加载 XMLTYPE 数据

> ID：13004239
> 
> 赞同：1
> 
> 时间：2012-10-22T02:17:28.280
> 
> 标签：oracle, oracle11gr2, datapump

我正在尝试从现有数据库中获取模式并将其放置在新数据库中。

我已经为数据创建了依赖表空间，除了任何带有 XMLTYPE 列错误并且失败并显示以下错误消息的表之外，一切似乎都正常。XMLTYPE 是未经验证的 CLOB

```
KUP-11007: conversion error loading table "SCHEMA"."TABLE_NAME"
ORA-01400: cannot insert NULL into (XML_COLUMN)
KUP-11009: data for row: XML_COLUMN : 0X'' 
```

一些调查似乎表明使用 TABLES=TABLE_NAME 而不是 SCHEMA=SCHEMA 会有所帮助，但我没有这样的运气。

请注意，此列没有任何限制，并且某些数据确实可能为空（尽管在导入后我得到了数百万条记录中的 0 条）

我用来启动数据泵的命令是：

```
impdp TABLES=SCHEMA.TABLE_NAME DIRECTORY=DATA_PUMP_DIR DUMPFILE=oracledpexport.dmp LOGFILE=LOGFILE.LOG TABLE_EXISTS_ACTION=REPLACE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:53:50.297

我们在 ORACLE 导入过程中遇到了一些问题。

IMPDP 进程无法导入包含 XML 数据类型的表。其原因是由于 ORACLE 11g R1 版本中的一个错误。

解决此问题的方法是使用 EXP 进程而不是 EXPDP 创建转储。对于永久修复，我们必须将 XML 类型列显式保存为 CLOB

此外，Oracle 已确认此问题已在 ORACLE 11gR2 版本中得到修复。

# apache - Apache http 服务器重写或重定向

> ID：13004242
> 
> 赞同：0
> 
> 时间：2012-10-22T02:17:32.507
> 
> 标签：apache, http, tomcat, redirect, rewrite

我有一个运行环境，其中有一个 apache http 服务器（负载平衡器），后端有一个 tomcat 服务器集群。不过，我被一个问题难住了，我无法将请求 url 重定向或重写为我需要的。例如，

```
request url - http://www.yyy.com 
```

我想将其重定向或重写为

```
http://www.yyy.com/mycontext 
```

我尝试重定向和重写但没有运气。

```
RewriteRule    ^/$  http://www.yyy.com/mycontext/  [L] - Error (can't fine the url) 
```

然后我尝试了这个，

```
Redirect / http://www.yyy.com/mycontext/ - this results in the following, 

http://www.yyy.com/mycontext/mycontext/mycontext/mycontext/mycontext/........... repeats. 
```

我无法找出正确的条件语句。我尝试使用服务器变量来编写 rewritecond，但我做错了，它被忽略了。

任何帮助表示赞赏。我在这方面没有太多经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:55:24.070

> 这**`ProxyPass / http://www.yyy.com/mycontext/`**在**www.yyy.com**的配置中？

> 是的，在虚拟主机中

不确定您的负载均衡器如何工作。您正在将请求代理回给自己，并且由于每个代理请求都在其自己的线程上运行，它会立即耗尽线程。

1.  请求`/`到达您的虚拟主机
2.  `ProxyPass`反向代理它`http://www.yyy.com/mycontext/`，它本身
3.  请求`/mycontext/`到达您的虚拟主机
4.  `ProxyPass`反向代理它`http://www.yyy.com/mycontext/mycontext/`
5.  请求`/mycontext/mycontest/`到达您的虚拟主机
6.  `ProxyPass`反向代理它`http://www.yyy.com/mycontext/mycontext/mycontext/`

等等

我认为您可能正在寻找的是：

```
RewriteCond %{REQUEST_URI} !^/mycontext/
RewriteRule ^(.*)$ /mycontext/$1 [L] 
```

但这与您的负载均衡器或您的 Tomcat 服务器无关。

# php - Android Php登录错误，命名值对发送空白数据

> ID：13004243
> 
> 赞同：1
> 
> 时间：2012-10-22T02:17:42.487
> 
> 标签：php, android

我想在 android 中创建一个连接到我的 sql 数据库的登录页面

安卓代码——

```
public class Hetro01Activity extends Activity implements OnClickListener {

    EditText uname;
    EditText password;
    Button ok;
    ArrayList<NameValuePair> nameValuePairs;
    @Override
    public void onCreate(Bundle savedInstanceState) {         
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ok=(Button)findViewById(R.id.submit);

        ok.setOnClickListener(this);

    }

    public void onClick(View vu)

    {
        switch(vu.getId())
        {
        case R.id.submit:

             uname=(EditText)findViewById(R.id.uname);
             password=(EditText)findViewById(R.id.password);

            nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("uname",uname.getText().toString().trim()));
            nameValuePairs.add(new BasicNameValuePair("password",password.getText().toString().trim()));

        String result=null;
        InputStream is=null; 
        try
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.hetroservers.orgfree.com/login1/checklogin.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response=httpclient.execute(httppost);

            HttpEntity entity=response.getEntity();

            is=entity.getContent();
            Log.e("response",is.toString());    
            try
            {
                BufferedReader br=new BufferedReader(new InputStreamReader(is),8);
                StringBuilder sb=new StringBuilder();
                String line=null;

                while((line=br.readLine())!=null)
                {
                    sb.append(line+"\n");

                }
                is.close();

                result=sb.toString();
                result= result.replaceAll("\\s+",""); 
                Toast.makeText(getApplicationContext(), sb, Toast.LENGTH_LONG).show();  
                //validate(result);
                      }
            catch(Exception e)
            {
                  Log.e("log_tag2", "Error");
            }

        }
        catch(Exception e)
        {
            Log.e("log_tag", "Error:  "+e.toString());
        }

        }   
        }

    public void validate(String res)
    {
        if(res.equals("Session Created"))
        {

            Intent myInt=new Intent(this,Main1.class);
            startActivity(myInt);

        }
        else
        {

        }

    }
    } 
```

而php代码是

```
mysql_connect("$host", "$user", "$pass")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$myusername=$_REQUEST['uname']; 
$mypassword=$_REQUEST['password']; 

$insert="INSERT INTO hetrologin(username,password) VALUES ('$myusername','$mypassword')";
$init=mysql_query($insert);

$sql="SELECT username FROM hetrologin WHERE username= '$myusername' AND password= '$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count == 1){
echo "1";
}
else{
echo "Wrong Username or Password";
}

?> 
```

我想检查错误出现在哪里，所以使用插入语句来检查我的数据库，我注意到无论我给数据库的输入是什么，都只存储用户名和密码的空白值，当我通过 get 请求尝试相同时从我的浏览器服务器数据正在正确存储。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:22:16.650

```
UrlEncodedFormEntity takes an arument of type List. 
```

尝试改变

```
ArrayList<NameValuePair> nameValuePairs; 
```

到

```
List<NameValuePair> nameValuePairs; 
```

让这一行保持不变

```
nameValuePairs = new ArrayList<NameValuePair>(2); 
```

# string - 选择适当的数据结构（哈希表与后缀树）来索引大量相似的字符串

> ID：13004248
> 
> 赞同：4
> 
> 时间：2012-10-22T02:19:31.960
> 
> 标签：string, hash, prefix-tree

我有一大组字符串，大约 10^12 左右，我需要选择一个合适的数据结构，这样，提供一个字符串，我可以检索和关联整数值，比如 O(log(n))或 O(m) 时间，其中“n”是字符串列表的长度，“m”是每个字符串的长度。

我们可以预期，我们的字符串集，每个长度为“m”并编码在一些大小为“q”的字母表上，几乎涵盖了该长度的所有可能字符串。例如，假设我们有 10^12 个长度为 m = 39 的全唯一二进制字符串。这意味着我们已经覆盖了该长度的所有可能二进制字符串集合的约 54%。

因此，我担心为避免冲突的字符串找到合适的散列函数。有什么好的我可以用吗？索引我的一组 n 个字符串需要多长时间？

还是我应该使用后缀树？我们知道 Ukkonen 的算法允许线性时间构造，我的猜测是考虑到大量相似的字符串，这将节省空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:18:06.643

### 鉴于您的字符串数量非常多，您的选择必须关注以下几点：

```
1\. Are your indexing structures going to fit in memory? 
```

对于**哈希表**，答案显然不是。因此访问时间将比 O(1) 慢得多。您仍然只需要一次磁盘访问（整个插入过程将是 O(N)）。

对于**[b-tree](http://en.wikipedia.org/wiki/B-tree)**，我做了一些理论计算，假设[b+tree](http://en.wikipedia.org/wiki/B+_tree)（以节省内部节点的更多空间）并且内部节点被完全占用。通过这种分析，它不适合内存：

*   通常的磁盘页面大小为 4096 字节。那是一个 b-tree 节点的大小。
*   字符串的平均大小为 70 字节（越少越好）。
*   子节点地址有 4 个字节。
*   一个内部节点拥有 d 个键并有 d+1 个子地址：
    **4096B = 4*(d+1)+70*d <=> d = 4096/75 => d = 54 **

*** #internal nodes in memory -> #leaves nodes in disk -> #strings mapped***

0 个内部节点 -> 1 个叶子节点 -> 53 个字符串映射
1 个内部节点 -> 54 个叶子节点使用（每个有 53 个叶子） -> 53² 个字符串映射
1+54 个内部节点 -> 54² 个叶子节点使用 -> 53³ 个字符串映射
。 ..
...+54⁵ 内部节点 -> 54⁶ 离开节点 = 53⁷ 字符串映射

```
53⁷ > 10^12 , but 54⁵*4096 bytes > 1TB of memory 
```

如果您的字符串不是均匀分布的，您可以探索常见的前缀。通过这种方式，内部节点可能能够寻址更多子节点，从而节省内存。[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)有这个选项。

* * *

```
2\. What kind of access are you going to employ? Large or small number of reads?
If you have large number of reads, are they random or sequential? 
```

*   如果您的访问是顺序的，您仍然可能受益于 btree，因为您将大量使用缓存节点（不需要磁盘访问）并且叶子是顺序链接的（b+tree）。这对于范围查询也很有用（我认为情况并非如此）。如果您的访问是完全随机的，那么哈希表会更快，因为它总是只需要一次磁盘访问，而 btree 需要对存储在磁盘中的每个级别进行磁盘访问。

*   如果您要进行少量访问，则最好使用 hashtable，因为插入总是更快。

*   由于您知道字符串的总数，因此您可以将其指示给哈希表，并且您不会在桶规模操作中浪费时间（这意味着要重新散列所有元素）。

**注意：**我发现了一些关于你的[ukkonens](https://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english)后缀树的信息。插入是线性的，访问也是顺序的。但是我只发现它与一些 GB 一起使用。以下是关于后缀树算法的一些参考资料：[[ref1]](http://www.google.com/url?sa=t&rct=j&q=suffix%20tree%20memory&source=web&cd=4&cad=rja&ved=0CDEQFjAD&url=http://pub.uni-bielefeld.de/download/1970475/2319767&ei=JkGHUOqfAYKm0QX2nYCgBA&usg=AFQjCNGH-S4PtqgGlyPY4VKRaaxpzVD6sA)、[[ref2]](http://www.google.com/url?sa=t&rct=j&q=suffix%20tree%20memory&source=web&cd=5&cad=rja&ved=0CDkQFjAE&url=http://webhome.cs.uvic.ca/~mgbarsky/JournalVersion.pdf&ei=JkGHUOqfAYKm0QX2nYCgBA&usg=AFQjCNHcx65gqcF19SVnDvODPNUi-5RhDg)和[[ref3]](http://www.google.com/url?sa=t&rct=j&q=suffix%20tree%20memory&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http://www.cs.rutgers.edu/~muthu/suffix.pdf&ei=JkGHUOqfAYKm0QX2nYCgBA&usg=AFQjCNHT-5lt8qGuzOH4PceS5TuebdsHFQ)。

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T02:18:07.700

哈希表在key稀疏的时候很有用，但是key密集的时候就不需要哈希了；您可以使用键（字符串）本身进行索引。为了支持简单的成员资格查询，您可以使用位向量。如果您的数据是 39 位二进制字符串，您将有一个长度为 2^39 的位向量。1 表示字符串存在，0 表示不存在。位向量不会太大，因为它只有 2^39 位 = 2^31 字节 = 2 GB。

要从 q 字母表中的字符串变为整数，您可以将其视为以 q 为底的数字。例如，如果 q=4 且字符串为 3011，则求整数为 3*4^3 + 0*4^2 + 1*4^1 + 1*4^0，等于 197。

关联的整数值会占用大量空间。您可以将它们存储在由字符串索引的数组中；所以在你的例子中，你会有一个 2^39 整数的数组，其中一些插槽是空的。但是，这不太可能适合内存，因为即使每个整数只有一个字节，它也会消耗 TB。在这种情况下，您可以将它们按顺序存储在磁盘文件中。

您可能会发现查找有关位向量/位数组的信息很有帮助：[http ://en.wikipedia.org/wiki/Bit_array](http://en.wikipedia.org/wiki/Bit_array)

维基百科链接讨论了可能适用的压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:43:37.657

...

嗨，鲍勃，

长答案短：经典的 HASH+BTREE 方法强大且超快。

在上述结构中存储 1000 万或 100 亿个字符串都没有关系——你总是有一个非常低的 MAX 搜索阈值。

好吧，你需要 10^12 = 1,000,000,000,000 - 但这是 1 万亿，这让我感到惊讶 - 甚至我的重字符串语料库也在 10 亿的范围内。

只需检查我在 C 中的实现：http: [//www.sanmayce.com/#Section13Level](http://www.sanmayce.com/#Section13Level)

> 因此，我担心为避免冲突的字符串找到合适的散列函数。有什么好的我可以用吗？

C中最快的哈希表查找函数在这里：

[http://www.sanmayce.com/Fastest_Hash/index.html#KT_torture3](http://www.sanmayce.com/Fastest_Hash/index.html#KT_torture3)

它比强大的 CRC32 8slice 变体（Castagnoli 和 Koopman 的）快 300-500%，同时具有类似的碰撞。

# java - 为什么 gson 不序列化本教程代码？

> ID：13004251
> 
> 赞同：3
> 
> 时间：2012-10-22T02:20:28.700
> 
> 标签：java, json, gson

以下代码为我返回“null”。

```
package test;

import com.google.gson.Gson;

class test {

    public static void main(String[] args) {

        class BagOfPrimitives {
              private int value1 = 1;
              private String value2 = "abc";
              private transient int value3 = 3;
              BagOfPrimitives() {
                // no-args constructor
              }
            }

        BagOfPrimitives obj = new BagOfPrimitives();
        System.out.println(obj.value1 + obj.value2 + obj.value3);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:40:59.120

Gson 在幕后使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来确定对象结构。该类`BagOfPrimitives`在此特定示例中是无法通过反射访问的**本地**类，因此 Gson 无法确定其结构。

而是让它成为一个独立的或嵌套的类。以下带有嵌套类的示例适用于我：

```
public class Test {

    public static void main(String[] args) {
        BagOfPrimitives obj = new BagOfPrimitives();
        System.out.println(obj.value1 + obj.value2 + obj.value3);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }

    static class BagOfPrimitives {
        private int value1 = 1;
        private String value2 = "abc";
        private transient int value3 = 3;
        BagOfPrimitives() {
            // no-args constructor
        }
    }

} 
```

# objective-c - 在后台运行昂贵的网格计算 - Objective-C

> ID：13004253
> 
> 赞同：0
> 
> 时间：2012-10-22T02:20:32.490
> 
> 标签：objective-c, multithreading, background-thread

我有一个`NSMutableArray`主要由我的 iOS 游戏中的主线程访问的。每 2-3 秒我需要在这个网格上执行一次昂贵的操作。我不需要修改网格。我只需要做一些计算并返回一个结果。**如何在后台线程中高效安全地使用网格？**

到目前为止，我只考虑复制网格并将其作为对象传递给`performSelectorInBackground`. 然而，这似乎是潜在的浪费。我还考虑过从后台线程访问网格的引用，并确保在后台线程完成处理之前主线程不会写入网格。然而，这感觉很冒险，我不确定这是否是一种常见的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:34:10.487

这完全取决于如果游戏无法写入网格，是否必须停止/减速。如果是这样，那么它就违背了在后台运行它的目的。如果游戏可以在不写入网格的情况下继续正常运行，那么这是最好的选择。只要您确保在后台处理完成之前它不会写入，这并不危险。

如果游戏要慢下来，那么我会走复制路线。

这两件事都可以直接在网格类中处理（如果这是您正在处理的地方）。您可以有一种方法来“锁定”网格，并且可以让网格对象排队更改，直到处理完成。处理完成后，您可以遍历所有操作并应用它们。这样，即使网格被锁定，一切都可以正常进行。

# hadoop - Hadoop中的JvmManager和Task是否驻留在同一台机器上

> ID：13004259
> 
> 赞同：0
> 
> 时间：2012-10-22T02:21:24.107
> 
> 标签：hadoop, mapreduce

hadoop 0.20 中的 JvmManager 处理任务，它运行它们并在必要时杀死它们。

我的问题是，这个 JvmManager 是否与这个任务驻留在同一台机器上，原因是，我想使用任务的 pid 从这个 JvmManager 运行系统命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:20:42.157

```
My question is, does this JvmManager reside on the same machine as this task, the reason is, I want to run a system command from this JvmManager using the pid of the task. 
```

是的

# java - Java - 移除按钮所在的面板

> ID：13004261
> 
> 赞同：1
> 
> 时间：2012-10-22T02:22:00.913
> 
> 标签：java, swing, jpanel, jbutton, removechild

是否有可能当我单击某个面板中的按钮时，该面板将被删除？

像

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==removebutton)
        System.out.println("ok");
    removebutton.getRootPane().remove(cartpanel);

} 
```

我正在尝试制作一个购物车，其中当客户查看购物车时，他将看到位于面板中的项目，该面板具有删除按钮。然后，当他单击该按钮时，面板将被移除。

我上面的代码没有做预期的输出，但是有什么方法可以用来做这个吗？

[面板 http://dl.dropbox.com/u/62021435/Untitled.png](http://dl.dropbox.com/u/62021435/Untitled.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:30:26.077

您可以使用`Component#getParent`来获取对父容器的引用。然后，您需要获取`Container`的父级并从中删除按钮的容器...

```
Container myParent = removebutton.getParent();
Container parent = myParent.getParent();
parent.remove(myParent); 
```

# ado.net - 表未显示在 ADO 对象中

> ID：13004263
> 
> 赞同：0
> 
> 时间：2012-10-22T02:22:16.000
> 
> 标签：ado.net, visual-studio-2012, sql-server-2012

我使用 SQL Server Management Studio 使用 SQL 语句创建了 3 个表。

然后我尝试在 Visual Studio 中创建一个 ADO 对象。ADO 向导看到了我的数据库，但没有看到我创建的表。

这是因为我需要以某种方式提交我在 Management Studio 中所做的更改吗？或者我是否需要在表名中添加某种前缀，例如：

```
CREATE TABLE mydb.Table1 ... ? 
```

或者这可能是一个权限问题？

还是我没有等待足够的时间（1 分钟左右）让 ADO 向导从数据库中获取表名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:37:13.470

啊，我猜当您编写表格创建脚本（或您要添加的任何其他内容）时，您需要添加以下内容：

```
USE [Interview_MicahHoover]
GO 
```

如此依赖 ETL 人员进行设置；）

我通过使用 GUI 创建表来解决这个问题，然后右键单击左侧菜单中的新表并说“CREATE TO ...剪贴板”，粘贴到记事本中，然后查看 SQL Server Management Studio 是如何做到的.

# vb.net - 在 Datagridviewcomboboxcell 中看不到下拉项

> ID：13004273
> 
> 赞同：0
> 
> 时间：2012-10-22T02:23:23.910
> 
> 标签：vb.net, drop-down-menu, combobox, datagridviewcombobox, datagridviewcomboboxcell

我创建了 Datagridviewcomboboxcells，如下所示，每个单元格有 2-3 个项目。我可以在组合框单元内看到具有适当值的 Datagridview 组合框单元，但是当我单击组合框单元时，我看不到下拉列表。

我应该编写一个单独的事件处理程序来显示下拉列表吗？它默认不下拉吗？

```
 Dim Dgv2cb_ColdStart As New DataGridViewComboBoxCell
        Dgv2cb_ColdStart.Items.Add("C:\pd_DelAll.pl")
        Dgv2cb_ColdStart.Items.Add("No Cold Start")

        dgv2.Rows.Add("ColdStart")
        dgv2.Rows(rowIndex).Cells(1) = Dgv2cb_ColdStart
        If temp_profile.ColdStart = "" Then
            dgv2.Rows(rowIndex).Cells(1).Value = Dgv2cb_ColdStart.Items(1)
        Else
            dgv2.Rows(rowIndex).Cells(1).Value = Dgv2cb_ColdStart.Items(0)
        End If 
```

令人惊讶的是，该项目的另一个备份上的代码相同，但这是我现在无法使用的旧版本。关于导致下拉菜单不发生的原因，我无法重现该错误。

# android - Android如何通过意图将变量从选项卡传递给活动

> ID：13004275
> 
> 赞同：0
> 
> 时间：2012-10-22T02:23:31.853
> 
> 标签：android, android-intent, android-tabhost

抱歉，我是 android 新手并为此自学.. 我有一个标签列表，用于循环输出.. 所有标签都链接到同一个活动，但只需要为数据传递一些不同的 url。 . 我尝试了很多方法

```
TabSpec page = tabHost.newTabSpec(title);
                Intent pageIntent = new Intent(this, mainpage.class);
                pageIntent.putExtra("url", url);
                page.setIndicator(title);
                page.setContent(pageIntent); 
```

并通过

```
String text = getIntent().getStringExtra("url"); 
```

但它不能很好地工作，并且 logcat 显示了很多错误..

这是我的标签代码..

```
for(int i = 0; i < category.length(); i++){
                JSONObject c = category.getJSONObject(i);   

                String title = c.getString(TAG_TITLE);
                String url = "http://www.abcde.com.my/list3.php?json&"+c.getString(TAG_URL);

                TabSpec page = tabHost.newTabSpec(title);
                Intent pageIntent = new Intent(this, mainpage.class);
                pageIntent.putExtra("url", url);
                page.setIndicator(title);
                page.setContent(pageIntent);

                tabHost.addTab(page); 
            } 
```

这里是活动的代码......

```
String text = getIntent().getStringExtra("url");
    private String url = text; 
```

来自 logcat 的错误代码

```
10-22 02:14:24.313: E/AndroidRuntime(1660): FATAL EXCEPTION: main
10-22 02:14:24.313: E/AndroidRuntime(1660): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.kwongwahtab}: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.mainpage}: java.lang.NullPointerException
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.os.Looper.loop(Looper.java:123)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at java.lang.reflect.Method.invoke(Method.java:507)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at dalvik.system.NativeStart.main(Native Method)
10-22 02:14:24.313: E/AndroidRuntime(1660): Caused by: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.mainpage}: java.lang.NullPointerException
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.widget.TabHost.setCurrentTab(TabHost.java:326)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.widget.TabHost.addTab(TabHost.java:216)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at com.androidhive.jsonparsing.kwongwahtab.onCreate(kwongwahtab.java:55)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-22 02:14:24.313: E/AndroidRuntime(1660):     ... 11 more
10-22 02:14:24.313: E/AndroidRuntime(1660): Caused by: java.lang.NullPointerException
10-22 02:14:24.313: E/AndroidRuntime(1660):     at com.androidhive.jsonparsing.mainpage.<init>(mainpage.java:25)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at java.lang.Class.newInstanceImpl(Native Method)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at java.lang.Class.newInstance(Class.java:1409)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-22 02:14:24.313: E/AndroidRuntime(1660):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-22 02:14:24.313: E/AndroidRuntime(1660):     ... 20 more 
```

任何人都可以帮助我吗？这是我的标签活动

```
package com.androidhive.jsonparsing;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

@SuppressWarnings("deprecation")
public class kwongwahtab extends TabActivity {
    /** Called when the activity is first created. */
    private static String url = "http://www.kwongwah.com.my/channels2.plist";
    private static final String TAG_CATEGORY = "categorylist";
    private static final String TAG_TITLE = "title";
    private static final String TAG_URL = "url";
    public static String url2;
    JSONArray category = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            category = json.getJSONArray(TAG_CATEGORY);

            // looping through All Contacts
            for(int i = 0; i < category.length(); i++){
                JSONObject c = category.getJSONObject(i);

                // Storing each json item in variable

                String title = c.getString(TAG_TITLE);
                String url = "http://www.kwongwah.com.my/plist3.php?json&"+c.getString(TAG_URL);

                TabSpec page = tabHost.newTabSpec(title);
                Intent pageIntent = new Intent(this, mainpage.class);
                pageIntent.putExtra("url", url);
                page.setIndicator(title);
                page.setContent(pageIntent);

                tabHost.addTab(page); 
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }
} 
```

mainpage.java 包 com.androidhive.jsonparsing；

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class mainpage extends ListActivity {

    // url to make request
    String text = getIntent().getStringExtra("url");
    private String url = text;

    // JSON Node names
    private static final String TAG_CONTACTS = "new_list";

    private static final String TAG_SUBJECT = "subject";
    private static final String TAG_HTML = "html";
    private static final String TAG_ADDED = "added";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable

                String subject = c.getString(TAG_SUBJECT);
                //String html = "<img src='http://www.kwongwah.com.my/news/2012/10/18/32_1.jpg'>";
                String html = c.getString(TAG_HTML);
                String added = c.getString(TAG_ADDED);

                // Phone number is agin JSON Object

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value

                map.put(TAG_SUBJECT, subject);
                map.put(TAG_HTML, html);
                map.put(TAG_ADDED, added);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_SUBJECT, TAG_HTML, TAG_ADDED }, new int[] {
                        R.id.subject, R.id.html, R.id.added});

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String subject = ((TextView) view.findViewById(R.id.subject)).getText().toString();
                String html = ((TextView) view.findViewById(R.id.html)).getText().toString();
                String added = ((TextView) view.findViewById(R.id.added)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_SUBJECT, subject);
                in.putExtra(TAG_HTML, html);
                in.putExtra(TAG_ADDED, added);

                startActivity(in);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:25:08.653

这就是问题。您不能`getIntent()`在声明成员变量时引用该方法。它将在类的构造函数中被隐式调用。构造函数将在活动每次绑定到上下文或给定意图之前发生。

```
public class mainpage extends ListActivity {

    // url to make request ... -- This will only be valid from onCreate() to onDestroy()
    String text = getIntent().getStringExtra("url"); 
```

将这种类型的代码移动到生命周期方法中，例如`onCreate()`：

```
public class mainpage extends ListActivity {

    // url to make request
    String text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      // At this point the Context is bound and the Intent is set on it.
      text = getIntent().getStringExtra("url");
      setContentView(R.layout.layout);

      // Hashmap for ListView
      ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

      // Creating JSON Parser instance
      JSONParser jParser = new JSONParser(); 
```

# mips - MIPS 和 RISC 有什么区别？

> ID：13004276
> 
> 赞同：11
> 
> 时间：2012-10-22T02:23:37.060
> 
> 标签：mips

它说MIPS是一种RISC。历史是什么？都是格式/指令模型/编程模型，如何区分 MIPS 和 RISC？RISC 是一个更广泛的概念吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T02:32:21.270

是的。RISC 是一个更广泛的概念。MIPS 是 RISC（精简指令集芯片）架构。精简 (RISC) 架构往往更简单并且操作数量较少。像 x86 这样的复杂（CISC）架构有更多的指令，其中一些取代了一系列 RISC 指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:08:58.423

从[mips](/questions/tagged/mips "显示标记为“mips”的问题") [标签信息页面](https://stackoverflow.com/tags/mips/info)：

> MIPS 是一种常见的 RISC（精简指令集计算机）ISA（指令集架构），是同类中的第一个。目前，MIPS 既可以指 ISA 的硬件实现，也可以指汇编语言本身。

# for-loop - 嵌套 for 循环的运行时

> ID：13004278
> 
> 赞同：1
> 
> 时间：2012-10-22T02:23:57.207
> 
> 标签：for-loop, runtime

```
for(i = 1; i < n*n; i++){
    for(j = 1; j < i*i; j++){
        if(j % i == 0){
            for(k=0; k < j; k++){
                count++;
            }
        }
    }
} 
```

我的解决方案尝试：

j 迭代到 i*i = n^4。对于“k”循环，我们有从 1 到 n^4 的 k 之和，即 n^4(n^4-1)/2。所以运行时间是 O(n^8)。这让我觉得太高了，但我没有看到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:49:17.057

外循环执行 n ²次。下一个循环总共执行 ∑<sub>i=1 ^(n ²) i ²，即 O(n ⁶ )。

最里面的循环仅在`j`是 的倍数时运行，对于 的每个值都会`i`发生几次。最里面的循环对: 、、等的每个这样的值执行次数，直到。因此，最内层循环对每个 执行 ∑<sub>j=1 ^i ij 次，即 O(i ³ ) 。`i``i``j``j``i``2i``3i``i*i`^(^(`i`))

因此，总运行时间为 ∑<sub>i=1 ^(n ²) O(i ³ ) + O(n ⁶ )，即 O(n ⁸ )，因为 ∑<sub>i=1 ^(n ²) O(i ³ ) = O(n ⁸ )。

（请注意，我假设第二个循环递增`j++`，而不是`i++`。如果是 ，答案就大不相同了`i++`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:41:11.847

所以：

```
i goes from 1 to n*n.
j goes from 1 to i*i 
```

但是最里面的循环只在 i 除以 j 时运行。在 1 和 i*i 之间恰好有 i 个数，它们可以被 i 整除。因此，最内层的循环将为从 1 到 n*n 的每个 i 运行 i 次。

到目前为止，这是 n^4。

但是现在 j 最多可以是 i*i，所以最多 n^4。

所以是的，复杂度是 O(n^8)。

# paging - 需要分页说明

> ID：13004285
> 
> 赞同：3
> 
> 时间：2012-10-22T02:25:11.180
> 
> 标签：paging

我正在尝试理解分页并且遇到了一些问题。我发现了一个我无法理解的示例问题，并希望有人可以让我朝着正确的方向前进：

有问题的理论系统有 64K (2^16) 字节的内存。页大小为 4K 字节 (2^12)，页表有 15 个整体。对于理论进程 X 的页表中的每个条目，都有页号、存在/不存在位和页框号。

我知道物理地址的查找使用页面大小作为偏移量，而地址空间的其余部分作为页帧号；但是，如果没有地址空间编号，我很困惑如何计算在理论系统上表示物理地址需要多少位。

更复杂的是，如果给定最大地址空间（比如 32K 字节），我不确定如何表示虚拟地址。鉴于页表的结构，我觉得它只是地址空间的大小。不过，这对我来说也不太合适。

任何有助于澄清这些东西是如何工作的都将不胜感激。我在研究中注意到，您可以通过地址空间大小除以页面大小来计算表条目的数量。我认为这将回答我的问题：要使用多少位来表示物理地址，但随后注意到该假设存在缺陷。

感谢大家。

MN7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:11:44.347

我将尝试回答这个问题。大概，您想知道如何从给定的地址空间编号推导出：

1.  为在页表中查找页码而留出的位和
2.  用于计算已识别页面内的偏移量的位。

这是操作系统的设计决策，您的问题的答案实际上是在您决定页码和偏移的位数之前预先确定的。

希望这可以帮助。我愿意接受更好的答案。

# javascript - .get XML 数据在 Internet Explorer 7 或 8 中不起作用

> ID：13004287
> 
> 赞同：0
> 
> 时间：2012-10-22T02:25:15.527
> 
> 标签：javascript, jquery, xml, internet-explorer

我获取 XML 数据的 jQuery 代码在 IE 7 或 IE 8 中不起作用，它在 IE9 和其他所有东西中都起作用。我不确定为什么会发生这种情况。任何帮助是极大的赞赏！我在 Drupal 工作，所以我使用 jQuery 而不是 $ 符号。我对编程也很陌生，所以任何建议都很棒。

```
jQuery(document).ready(function() {
   jQuery.get('/xml/designs.xml',function(data){

             jQuery(data).find('slide').each(function(){

                    var slide = jQuery(this);
                    var caption = slide.find('caption').text();
                    var source = slide.find('source').text()
                    var html = '<li class="mySlides"><a href="' + caption + '_Letterpress_Wedding_Invitation"><img src="/sites/aerialist.localhost/files/images/selectThumbs/' + source + '.jpg"/><p>' + caption + '</p><a>';     
                     var htmlPad = '<li class="mySlides"><a href="' + caption + '_Letterpress_Wedding_Invitation"><img src="/sites/aerialist.localhost/files/images/selectThumbs/' + source + '600.jpg"/><p>' + caption + '</p><a>';    

                    if (window.devicePixelRatio > 1) {

                     jQuery('#list').append(htmlPad);
                       jQuery('#list').hide();
                    jQuery('#list').fadeIn(800);

    } else {

        jQuery('#list').append(html);
                       jQuery('#list').hide();
                    jQuery('#list').fadeIn(800);
}

        });
        return false;
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:47:51.960

正如 charlietfl 所说，问题是无效的 HTML，但问题不是未关闭`<li>`的（它是有效的 HTML，-`<li>`元素不需要关闭），问题是`<a>`'`html`和`htmlPad`，它们必须是`</a>`

# java - 如何从清漆缓存中获取正确的 .xls 文件？

> ID：13004288
> 
> 赞同：0
> 
> 时间：2012-10-22T02:25:38.447
> 
> 标签：java, caching, varnish

我使用清漆缓存一些文件，如 *.doc *.png *.xls。

当我从缓存中获取文件但 *.xls 时，它运行良好。

我的 URI 就像`/attachment/show?fileId=ewer232ewe2121eeddsd`. 当我从缓存中请求一个 .xls 文件时，它将返回一个名为`show`whitout 扩展名的文件。

我的服务器代码是：

```
if (StringUtil.null2Trim(attachment.getExtension()).equals("doc")
                    || StringUtil.null2Trim(attachment.getExtension()).equals("docx")
                    || StringUtil.null2Trim(attachment.getExtension()).equals("xlsx")
                    || StringUtil.null2Trim(attachment.getExtension()).equals("xls")) {
                response.setHeader("Content-Disposition", "attachment; filename=\""
                        + StringUtil.gbk2Iso(attachment.getName()) + "\"");
                if (StringUtil.null2Trim(attachment.getExtension()).indexOf("doc") != -1) {
                    response.setContentType("application/msword");
                }
                if (StringUtil.null2Trim(attachment.getExtension()).indexOf("xls") != -1) {
                    response.setContentType("application/vnd.ms-excel");
                }

            } else {
                if (StringUtil.null2Trim(attachment.getExtension()).equals("jpg")) {
                    response.setContentType("image/jpeg");
                } else if (StringUtil.null2Trim(attachment.getExtension()).equals("png")) {
                    response.setContentType("image/x-png");
                } else {
                    response.setContentType("image/" + attachment.getExtension());
                }
            } 
```

我的问题是：为什么我不能得到正确的文件全名`attachment.getName()+".xls"`，以及如何解决它。

PS：有没有办法在 varnish(vcl) 中设置 ContentType？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:22:54.393

让我回答最后一个问题；您可以覆盖 Varnish 中的任何 HTTP 响应标头。

使用以下 VCL 片段：

```
sub vcl_fetch {
    if (req.url ~ ".xls$") {
        set beresp.http.content-type = "application/vnd.ms-excel";
    }
} 
```

一般来说，您可以通过“set beresp.http.XXX = YYY;”随意添加和删除标题。或“取消设置 beresp.http.XXX;” 在 vcl_fetch 中。

For your main question, I'd explore if adding a MIME envelope (header [example here](https://stackoverflow.com/questions/386845/http-headers-for-file-downloads)) helps.

# url - 301 使用 ModX Evo 重定向特定页面

> ID：13004292
> 
> 赞同：0
> 
> 时间：2012-10-22T02:26:14.627
> 
> 标签：url, redirect, http-status-code-301, modx, modx-evolution

我的 .htaccess 文件中有这个：

```
# For Friendly URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

我想将 url /sale 重定向到新的 /gift-sales 所以我在上面添加了这个：

```
RewriteCond %(THE-REQUEST)^sale$
RewriteRule ^(.*)$ /gift-sales [R=30,L] 
```

在 ModX 后端，我当然将别名更改为 gift-sales，但我似乎无法让重定向工作。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:37:16.613

try this:

```
 RewriteRule ^/sale  http://www.mydomain.com/gift-sales [R=301,L] 
```

# postgresql - 使用 PostgreSQL 上的现有用户登录失败

> ID：13004297
> 
> 赞同：18
> 
> 时间：2012-10-22T02:27:56.553
> 
> 标签：postgresql, login

我刚开始玩 PostgreSQL。我的目标是在 postgres 之外创建一个具有所有相同权限的新用户，并为我的 ror 应用程序创建一个数据库。我可以在 postgres 下登录。我确实创建了一个名为 的用户`Jason`，这很好，但是当我这样做时，`sudo -u username psql`我收到以下错误...

```
sudo: unknown user: Jason
sudo: unable to initialize policy plugin 
```

我可以通过在我的 postgres 控制台中检查 \dg 来确定用户名是否存在。

```
 List of roles
Role name |                   Attributes                   | Member of 
-----------+------------------------------------------------+-----------
Jason     | Superuser, Create role, Create DB, Replication | {}
postgres  | Superuser, Create role, Create DB, Replication | {} 
```

是什么导致了这个问题？另外，我检查了我的本地`pg_hba.conf`并拥有我认为正确的设置。

```
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            md5
#host    replication     postgres        ::1/128                 md5 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-22T02:46:05.697

您将*system user*与*database user*混淆了。错误消息来自`sudo`PostgreSQL，与 PostgreSQL 完全无关。

以数据库用户 Jason 身份登录：

```
psql -U Jason 
```

当然，只要未设置无密码访问，您就需要提供密码。 *对等身份验证*仅适用于同名系统用户（“Jason”）。[更多关于这里](https://www.postgresql.org/docs/current/client-authentication.html)
的优秀手册和关于`psql` [这里](https://www.postgresql.org/docs/current/app-psql.html)的身份验证方法。

# linux - perf 记录 -c 选项和溢出事件之间的关系是什么？

> ID：13004300
> 
> 赞同：1
> 
> 时间：2012-10-22T02:28:32.520
> 
> 标签：linux, performance, cpu, performancecounter, perf

我正在尝试使用性能记录来记录 15 个硬件和跟踪点事件。

我想了解以下内容：

1.  基于事件的采样：从我理解的文档中，每当与该事件对应的 64 位计数器溢出时，性能记录就会采样。是对的吗？计数器会在 ~ 2^64 次此类事件后溢出吗？

2.  当我要测量的事件多于 PMU/计数器的数量时，我是否必须通过任何特定的开关才能使用多路复用。在存在多路复用的情况下溢出事件如何表现。

3.  开关“-c”的目的/用途是什么？我可以使用此开关使计数器溢出每个 n 事件吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:10:09.107

***计数器会在 ~ 2^64 次此类事件后溢出吗？***

那是[正确](https://perf.wiki.kernel.org/index.php/Tutorial#Event-based_sampling_overview)的。

***我是否必须通过任何特定的开关才能使用多路复用。***

不。（使用该`-C`选项将有效地禁止它）。

[关于多路复用](https://perf.wiki.kernel.org/index.php/Tutorial#multiplexing_and_scaling_events)：

> 如果事件多于计数器，内核使用时间复用（开关频率 = HZ，一般为 100 或 1000）给每个事件一个访问监控硬件的机会。

***开关“-c”的目的是什么？***

是的你是对的。该开关`-c`允许您指定采样周期。这意味着如果您将采样周期指定为 2，则在每 2 次事件中，计数器将溢出。然后将事件发生时的所有信息（如架构状态等）记录到缓冲区中。

# c# - C# 传递可变数量的引用参数

> ID：13004301
> 
> 赞同：7
> 
> 时间：2012-10-22T02:28:38.527
> 
> 标签：c#, parameters

在 C#.NET 中，有没有办法将可变数量的对象作为引用对象传递？例如：

```
MyMethod (ref param1, ref param2, ref param3) 
```

...具有任意数量的各种类型的参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T02:46:34.703

如果您愿意在 C# 中使用未记录的`__arglist`和`__refvalue`关键字，则可以。

> **警告：**未记录的功能可能会在 C# 的未来版本中发生变化。仅在必要时使用这些关键字，要了解如果 Microsoft 在下一版本中更改其行为，您的代码可能会停止工作。

例如，下面的程序通过`int`引用`GetRandomValues`方法传递三个变量。它输出 2、1 和 4，表明变量已成功修改。

```
static void Main()
{
    int x = 0, y = 0, z = 0;
    GetRandomValues(__arglist(ref x, ref y, ref z));
    Console.WriteLine(x);
    Console.WriteLine(y);
    Console.WriteLine(z);
}

static void GetRandomValues(__arglist)
{
    Random random = new Random(1);
    ArgIterator iterator = new ArgIterator(__arglist);
    while (iterator.GetRemainingCount() > 0)
    {
        TypedReference r = iterator.GetNextArg();
        __refvalue(r, int) = random.Next(0, 10);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T02:30:30.123

不，这是不可能的：可变数量的参数被实现为传递数组之上的“语法糖”；无法创建按引用传递参数的数组，因为“按引用传递”不是类型的属性。

# vim - vim 有没有像“mysql -e”这样的参数？

> ID：13004303
> 
> 赞同：1
> 
> 时间：2012-10-22T02:29:15.137
> 
> 标签：vim, command-line-interface

vim 有像“mysql -e”这样的参数吗？这样我就可以在 VIM CLI 中编辑文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:02:37.957

是的。vim -e 以 ex 模式启动。`:help starting`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:43:30.883

Vim 及其灵感 vi 都部分代表“视觉”（如在 CLI 中，而不是 CLI）。然而，它们的前辈正好相反（例如ed、sed、ex）。在这三个中，sed 可能是最常用的。您可以在 ex 模式下启动 vim，或者在编辑器中使用 Q 输入一次。

# multidimensional-array - 如何在 preg_match_all 之后索引数组

> ID：13004304
> 
> 赞同：0
> 
> 时间：2012-10-22T02:29:37.903
> 
> 标签：multidimensional-array, preg-match-all

执行以下操作后： `preg_match_all($pattern,$str,$anchor);` 如果我的下一个代码行是： `echo count($anchor[2]);` 它给我输出：50 但是如果我的下一个代码行是 `echo count($anchor[2]); $title = $anchor[2];` 它向我显示错误“注意：未定义的偏移量：2”两行。添加一行如何在上一行中给出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:44:12.863

我可以建议使用 print_r($anchor); 要找出数组中的内容，它将显示所有索引中的所有内容，并且您可以快速确定所需的索引。

# iphone - 用多个条件修剪 NSString

> ID：13004307
> 
> 赞同：0
> 
> 时间：2012-10-22T02:29:48.630
> 
> 标签：iphone, nsstring

我很难从 NSString 中修剪一些字符。给定一个包含文本的现有文本视图，要求是：

1.  修剪前导空格和换行符（基本上忽略任何前导空格和换行符）
2.  最多将 48 个字符复制到新字符串中，或​​者直到遇到换行符。

我发现我可以使用代码在这里完成另一个 SO 问题的第一个要求：

```
NSRange range = [textView.text rangeOfString:@"^\\s*" options:NSRegularExpressionSearch];
NSString *result = [textView.text stringByReplacingCharactersInRange:range withString:@""]; 
```

但是，我在执行第二个要求时遇到了麻烦。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:42:53.600

这将做你想做的事。它也是修剪前导空格和换行符的更简单方法。

```
NSString *text = textView.text;

//remove any leading or trailing whitespace or line breaks
text = [text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

//find the the range of the first occuring line break, if any.
NSRange range = [text rangeOfString:@"\n"];

//if there is a line break, get a substring up to that line break
if(range.location != NSNotFound)
    text = [text substringToIndex:range.location];
//else if the string is larger than 48 characters, trim it
else if(text.length > 48)
    text = [text substringToIndex:48]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:44:03.860

这应该有效。基本上它的作用是遍历 textview 文本中的字符并检查它当前所在的字符是否是换行符。它还检查它是否已达到 48 个字符。如果该字符不是换行符且尚未达到 48 个字符，则将该字符添加到结果字符串中：

```
NSString *resultString = [NSString string];
NSString *inputString = textView.text;

for(int currentCharacterIndex = 0; currentCharacterIndex < inputString.length; currentCharacterIndex++) {

    unichar currentCharacter = [inputString characterAtIndex:currentCharacterIndex];
    BOOL isLessThan48 = resultString.length < 48;
    BOOL isNewLine = (currentCharacter == '\n');

    //If the character isn't a new line and the the result string is less then 48 chars
    if(!isNewLine && isLessThan48) {

        //Adds the current character to the result string
        resultString = [resultString stringByAppendingFormat:[NSString stringWithFormat:@"%C", currentCharacter]];
    } 

    //If we've hit a new line or the string is 48 chars long, break out of the loop
    else {
        break;
    }
} 
```

# django - 生产服务器上的 ManyToManyField 错误，在开发服务器上正常

> ID：13004308
> 
> 赞同：1
> 
> 时间：2012-10-22T02:29:49.223
> 
> 标签：django, manytomanyfield, dajaxice

我的 Django 应用程序在使用生产服务版本（通过 Apache 和静态 Nginx）时引发了一个令人费解的错误，这对于本地主机上的开发服务器版本并不明显。

我有模型：

```
class AdaptationLibrary(models.Model):
    description = models.CharField( u'Description of adaptation',max_length=400,blank=True,null=True)
    name = models.CharField(u'Adaptation Name',max_length=60)
    applies_to = models.ManyToManyField(Archetype,related_name =u'archetype_adaptations',null=True,blank=True)
    adaptations = jsonfield.JSONField(u'adaptation library items', null=True, blank=True)
    def __unicode__(self):
        return self.name 
```

和 ..

```
class Archetype(models.Model):
    archetype = models.CharField(max_length=20, choices=ARCHETYPE_CHOICES,unique=True)
    archetype_family = models.CharField(max_length=60,choices=ARCHETYPE_FAMILY_CHOICES,null=True)
    replacement_cost_default = models.FloatField("Default complete asset replacement cost - ($)",null=True, blank=True)
    lifespan_default = models.FloatField("Default asset life (yrs)", null=True, blank=True)
    age_default = models.FloatField("Default age - (yrs)", null=True, blank=True)
    storage_time_default = models.FloatField("Default storage/retention time (hrs)", null=True, blank=True)
    def __unicode__(self):
        return self.archetype 
```

当我尝试通过以下方式检索相关的 Archetype 对象时：

```
library_archetypes = library_item.applies_to.all() 
```

我收到以下错误：

```
FieldError: Cannot resolve keyword u'archetype_adaptations' into field.
Choices are: age_default, archetype, archetype_family, asset, cemlo2, id,
lifespan_default, new_dependency, replacement_cost_default, storage_time_default 
```

开发版本和本地版本使用相同的数据库，除了调用 AdaptationLibrary ManyToManyField 之外，应用程序的其余部分功能正常。

任何人都可以对这个问题有所了解吗？

干杯

编辑：根据 Rohan 的建议，这是一个迁移问题 - 我已经完成了重置和重新转换到南方的整个盒子和骰子。开发服务器仍然很高兴 - Apache 服务的版本会引发相同的错误。两个版本都使用相同的数据库。

（完整的回溯错误）：

```
ERROR Traceback (most recent call last):

  File "C:\Python27\Lib\site-packages\dajaxice\core\DajaxiceRequest.py", line 181, in process
response = '%s' % thefunction(self.request, **argv)

  File "C:/Python27/sites/Adaptwater\proto4\ajax.py", line 2636, in populate_adaptation_library
initial_data = dict_to_library_form(library_item_id = library_to_load)

  File "C:/Python27/sites/Adaptwater\proto4\ajax.py", line 2556, in dict_to_library_form
library_archetypes = library_item.applies_to.all()

 File "C:\Python27\Lib\site-packages\django\db\models\manager.py", line 116, in all
return self.get_query_set()

  File "C:\Python27\Lib\site-packages\django\db\models\fields\related.py", line 543, in get_query_set
return super(ManyRelatedManager, self).get_query_set().using(db)._next_is_sticky().filter(**self.core_filters)

  File "C:\Python27\Lib\site-packages\django\db\models\query.py", line 621, in filter
return self._filter_or_exclude(False, *args, **kwargs)

  File "C:\Python27\Lib\site-packages\django\db\models\query.py", line 639, in _filter_or_exclude
clone.query.add_q(Q(*args, **kwargs))

  File "C:\Python27\Lib\site-packages\django\db\models\sql\query.py", line 1250, in add_q
can_reuse=used_aliases, force_having=force_having)

  File "C:\Python27\Lib\site-packages\django\db\models\sql\query.py", line 1122, in add_filter
process_extras=process_extras)

  File "C:\Python27\Lib\site-packages\django\db\models\sql\query.py", line 1316, in setup_joins
"Choices are: %s" % (name, ", ".join(names)))

FieldError: Cannot resolve keyword u'archetype_adaptations' into field. Choices are: age_default, archetype, archetype_family, asset, cemlo2, id, lifespan_default, new_dependency, replacement_cost_default, storage_time_default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:38:23.190

好的 - 很抱歉自我回答，但我解决了这个问题，即使我仍然对导致它的原因一无所知。在进行了一些额外的严肃谷歌搜索后，我发现了关于导入顺序和模型定义方面的问题的讨论。例如 ：

[http://chase-seibert.github.com/blog/2010/04/30/django-manytomany-error-cannot-resolve-keyword-xxx-into-a-field.html](http://chase-seibert.github.com/blog/2010/04/30/django-manytomany-error-cannot-resolve-keyword-xxx-into-a-field.html)

在将 AdaptationLibrary 模型放在 models.py 中的 Archetype 之前（并为 m2m 设置引用“Archetype”）后，它似乎很高兴。除非我遗漏了一些非常明显的东西，否则这感觉就像是一种巫术修复。到目前为止，我一直在小心翼翼地将被推荐的模型放在他们的推荐伙伴面前。但这仍然是一个修复 - 所以现在重新开始工作。

干杯&谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:21:04.050

尝试使用 String 而不是 unicode ...有时，我遇到了 Apache 无法理解 UTF-8 的问题。

# ruby-on-rails - 一个模型上的多个 habtm 关系

> ID：13004309
> 
> 赞同：0
> 
> 时间：2012-10-22T02:29:53.993
> 
> 标签：ruby-on-rails, join, mapping, has-and-belongs-to-many

我正在尝试找出解决问题的最佳方法。我有一个 pages 表和一个 user_types 表。我正在尝试在页面上指定多种用户类型。他们将充当权限组。但是，我需要这样做两次。一次用于读取权限，一次用于编辑权限。这是一个例子：

主页有 3 种可以阅读的用户类型 - 管理员、超级管理员、公共 它有 2 种可以编辑的用户类型 - 管理员、超级管理员

我有一个 user_types 表：admin super admin public etc

我创建了两个映射表（一个用于读取，一个用于编辑）： pages_user_read_types pages_user_edit_types

他们都有 page_id 和 user_type_id

有没有更好的方法来实现这一点？如果这是最好的方法，我需要帮助找出模型的关系。我有一个关系

```
 has_and_belongs_to_many :user_types, :join_table => :pages_user_read_types 
```

如何为单独的字段指定两个关系？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:35:41.237

至少，您可能想要添加一个`Permission`模型。如果它变得比您描述的更复杂，我也建议使用[CanCan](https://github.com/ryanb/cancan)。

```
class Permission < ActiveRecord::Base
  #table is id, page_id, user_type_id, and permission_type (string).
  belongs_to :page
  belongs_to :user_type
end 
```

在您的控制器中，您可以构建一个过滤器链，如下所示：

```
class PagesController < ApplicationController
  before_filter :load_page
  before_filter :authorize_view!, only: [ :show ]
  before_filter :authorize_edit!, only: [ :edit ]

  def show
  end

  def edit
  end

  private
    def load_page
      @page = Page.find(params[:id])
    end

    def authorize_view!
      if !@page.permissions.where(user_type_id: current_user.user_type_id, permission_type: "view").exists?
        flash[:notice] = "You do not have permission to view that page."
        redirect to root_path
      end
    end

    def authorize_edit!
      if !@page.permissions.where(user_type_id: current_user.user_type_id, permission_type: "edit").exists?
        flash[:notice] = "You do not have permission to edit that page."
        redirect to root_path
      end
    end

end 
```

（这假设您`current_user`的应用程序中有一个方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:38:23.513

在过去的几年里，Rails 中的 HABTM 关系似乎不再受到 Rails 开发人员的青睐`has_many :through`。唯一应该使用 HABTM 的时候是当您不需要有关两个模型之间关系的任何其他信息时。在您的情况下，您试图通过创建两个 HABTM 关系来模拟这一点，而您可以通过拥有一个具有*可编辑*属性的连接模型来有效地实现这一点。

在代码中，它看起来像这样：

```
class Page < ActiveRecord::Base
  has_many :page_permissions
  has_many :user_types, :through => page_permissions

  def editable_user_types
    page_permissions.includes(:user_types).where(:editable => true).map(&:user_type)
  end

  def read_only_user_types
    page_permissions.includes(:user_types).where(:editable => false).map(&:user_type)
  end      
end

class PagePermission < ActiveRecord::Base
  belongs_to :page
  belongs_to :user_type
  # When you create this model, you should have a boolean attribute for editable
end

class UserType < ActiveRecord::Base
  has_many :page_permissions
  has_many :pages, :through => :page_permissions
end 
```

*我认为遵循这种方法将允许您合并到一个连接表，如果您需要为Page*和*UserType之间的关系（* *PagePermission*）添加其他属性，将来会更好。

# php - Android Google Cloud Messaging - 推送到设备，但设备不显示推送通知

> ID：13004319
> 
> 赞同：2
> 
> 时间：2012-10-22T02:31:30.580
> 
> 标签：php, android, curl, google-cloud-messaging

我有一些服务器端代码，我正在尝试创建推送通知。结果如下所示：

```
{"multicast_id":8714083978034301091,"success":1,"failure":0,"canonical_ids":0,"r‌​esults":[{"message_id":"0:1350807053347963%9aab4bd8f9fd7ecd"}]} 
```

这是我用来发送推送通知的 PHP 代码。顺便说一下，推动没有发生，所以我试图找出原因：

```
$url = 'https://android.googleapis.com/gcm/send';

$device_ids = array( $device_id );

$t_data = array();
$t_data['message'] = 'Someone commented on your business.';

$t_json = array( 'registration_ids' => $device_ids , 'data' => $t_data );

// Open connection
$ch = curl_init();

curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Authorization: key=my_key', 'Content-Type: application/json' ) );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $t_json ) );

curl_setopt($ch, CURLOPT_URL, $url);

// Execute post
$result = curl_exec($ch);    

if ($result === FALSE)
{   
   die('Curl failed: ' . curl_error($ch));
}

// Close connection
curl_close($ch); 
```

以下是清单中处理 Google 云消息传递的部分：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.problemio"
    android:versionCode="82"
    android:versionName="2.2.82" >

    <supports-screens  android:largeScreens="true"   android:normalScreens="true"  android:smallScreens="true"/> 

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>
    <!-- <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="xx"/>  -->

    <uses-permission android:name="android.permission.INTERNET" />

    <!-- Required permission to use in-app billing. -->
    <uses-permission android:name="com.android.vending.BILLING" />

    <permission android:name="com.problemio.permission.C2D_MESSAGE" 
        android:protectionLevel="signature" />
    <uses-permission android:name="com.problemio.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/CustomTheme" 
        android:name="MyApplication"
        android:debuggable="true"
                >

        <!--  For Google Cloud Messaging -->
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.problemio" />
          </intent-filter>
        </receiver>   

        <service android:name=".GCMIntentService" />
        <!--  End of Google Cloud Messaging --> 
```

编辑：

这是我的整个 GCMIntentService 类：

```
package com.problemio;

import static com.google.android.gcm.GCMConstants.ERROR_SERVICE_NOT_AVAILABLE;
import static com.google.android.gcm.GCMConstants.EXTRA_ERROR;
import static com.google.android.gcm.GCMConstants.EXTRA_REGISTRATION_ID;
import static com.google.android.gcm.GCMConstants.EXTRA_SPECIAL_MESSAGE;
import static com.google.android.gcm.GCMConstants.EXTRA_TOTAL_DELETED;
import static com.google.android.gcm.GCMConstants.EXTRA_UNREGISTERED;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_LIBRARY_RETRY;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_MESSAGE;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_REGISTRATION_CALLBACK;
import static com.google.android.gcm.GCMConstants.VALUE_DELETED_MESSAGES;

import java.util.Random;
import java.util.concurrent.TimeUnit;

import com.google.android.gcm.GCMBaseIntentService;

import android.app.AlarmManager;
import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.SystemClock;
import android.support.v4.app.NotificationCompat;
import android.util.Log;
import android.widget.Toast;

import utils.GCMConstants;

public class GCMIntentService extends GCMBaseIntentService 
{

public GCMIntentService() 
{
        super(ProblemioActivity.SENDER_ID);
}

@Override
  protected void onRegistered(Context ctxt, String regId) {
    Log.d(getClass().getSimpleName(), "onRegistered: " + regId);
    Toast.makeText(this, regId, Toast.LENGTH_LONG).show();
  }

  @Override
  protected void onUnregistered(Context ctxt, String regId) {
    Log.d(getClass().getSimpleName(), "onUnregistered: " + regId);
  }

  @Override
  protected void onMessage(Context ctxt, Intent message) {
    Bundle extras=message.getExtras();

    for (String key : extras.keySet()) {
      Log.d(getClass().getSimpleName(),
            String.format("onMessage: %s=%s", key,
                          extras.getString(key)));
    }
  }

  @Override
  protected void onError(Context ctxt, String errorMsg) {
    Log.d(getClass().getSimpleName(), "onError: " + errorMsg);
  }

  @Override
  protected boolean onRecoverableError(Context ctxt, String errorMsg) {
    Log.d(getClass().getSimpleName(), "onRecoverableError: " + errorMsg);

    return(true);
  } 

  private static void generateNotification(Context context, String message, String title ) 
  {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis(); // can change this to a future time if desired

        NotificationManager notificationManager = 
                (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        Intent notificationIntent = new Intent(context, ProblemioActivity.class);

        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);        
        Uri defaultSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);            

         Notification notification = new NotificationCompat.Builder(context)
         .setContentTitle(title)
         .setContentText(message)
         .setContentIntent(intent)
         .setSmallIcon(icon)
         .setLights(Color.YELLOW, 1, 2)
         .setAutoCancel(true)
         .setSound(defaultSound)
         .build();

        notificationManager.notify(0, notification);
} 
```

}

但无论我尝试什么，推送通知都不会出现在物理设备上。有什么想法为什么不以及如何让它出现在设备上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:23:56.540

您只需要将对通知函数的调用添加到 onMessage() 中，如下所示：

```
@Override
protected void onMessage(Context ctxt, Intent message) {
    Bundle extras=message.getExtras();

    for (String key : extras.keySet()) {
      Log.d(getClass().getSimpleName(),
            String.format("onMessage: %s=%s", key,
                      extras.getString(key)));
    }
    generateNotification(ctxt, extras.getString("message"), "test title"); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:54:19.830

您实际上需要在方法中手动生成通知`onMessage()`。onMessage() 只是一个方法，当您的应用程序从服务器接收到痒痒时将调用该方法。您可能并不总是希望向用户生成可见的状态栏通知。因此，Google 提供了仅在需要时才发布通知的灵活性。无论如何，这里的代码将帮助您生成此通知。显然，您可以根据自己的需要进行调整。

```
private void generateNotification(Context context, String message)
{
    // put an icon for your notification in your res/drawable folder
    // and then get the icon as an int
    int icon = R.drawable.notif_icon_name;
    long when = System.currentTimeMillis(); // can change this to a future time if desired
    NotificationManager notificationManager = (NotificationManager) context
         .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, BaseActivity.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
        | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notificationManager.notify(0, notification);
} 
```

# regex - 将所有内容替换为“hello”，但双引号之间的字符串除外

> ID：13004321
> 
> 赞同：1
> 
> 时间：2012-10-22T02:32:12.050
> 
> 标签：regex, shell, sed

```
$ cat file1
"rome" newyork
"rome"
rome 
```

空白处我需要填什么？

```
$ sed ____________________ file1 
```

我想要像这样的输出

```
"rome" newyork
"rome"
hello 
```

如果我的输入是这样的

```
$ cat file1
/temp/hello/ram  
hello   
/hello/temp/ram 
```

如果我想更改没有斜杠的 hello 该怎么办？（把你好改成快乐）

```
temp/hello/ram 
happy  
/hello/temp/ram 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:43:18.697

为什么`rome`改为`hello`但`newyork`不是？如果我正确阅读了这个问题，那么您正在尝试将所有不在双引号中的内容替换为`hello`?

根据您想要的确切用例（输入字符串会发生什么`""`？），您可能想要这样的东西：

```
sed 's/\".*\"/hello/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:51:59.090

除了包含在“”中的那些之外，我没有看到直接替换所有其他的方法

但是，使用递归 sed，一种蛮力方法，您可以实现它。

`cat file1 | sed "s/\"rome\"/\"italy\"/g" | sed "s/rome/hello/g" | sed "s/\"italy\"/\"rome\"/g"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:45:12.227

```
sed 's/[^\"]rome[^\"]/hello/g' your_file 
```

测试如下：

```
> cat temp
    "rome" newyork
    "rome"
    rome 

> sed 's/[^\"]rome[^\"]/hello/g' temp
    "rome" newyork
    "rome"
   hello

> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:00:47.787

第二个问题可以用一个简单的 perl one-liner 来解决（假设每行只有一个 hello）：

```
perl -pe 'next if /\//; s/hello/happy/;' 
```

第一个问题需要一些内部簿记来跟踪您是否在字符串中。这也可以用 perl 解决：

```
#!/usr/bin/perl -w
use strict;
use warnings;

my $state_outside_string = 0;
my $state_inside_string  = 1;

my $state = $state_outside_string;

while (my $line = <>) {
    my @chars = split(//,$line);
    my $not_yet_printed = "";
    foreach my $char (@chars) {
        if ($char eq '"') {
            if ($state == $state_outside_string) {
                $state = $state_inside_string;
                $not_yet_printed =~ s/rome/hello/;
                print $not_yet_printed;
                $not_yet_printed = "";
            } else {
                $state = $state_outside_string;
            }
            print $char;
            next;
        }
        if ($state == $state_inside_string) {
            print $char;
        } else {
            $not_yet_printed .= $char;
        }
    }
    $not_yet_printed =~ s/rome/hello/;
    print $not_yet_printed;
} 
```

# android - android中主屏幕小部件TextView的自定义字体

> ID：13004325
> 
> 赞同：2
> 
> 时间：2012-10-22T02:32:27.990
> 
> 标签：android, fonts, widget, textview, typeface

我面临的问题似乎没有解决方案，而且完全不可能纠正，但我想在这里问一下，以防我遗漏了什么。

我需要使用资产文件夹中的非系统、非标准字体在 android 小部件中显示一些文本。

不幸的是，android 不允许在主屏幕小部件中扩展视图定义。我也不能从小部件中调用相应的 API 方法 (setTypeface)。

有谁知道是否有其他替代方法可以实现这一目标？（不仅可以在应用程序中自定义文本视图外观，而且在小部件中也可以自定义文本视图外观，这似乎很自然，但事实证明这是不可能的）。

我很感激这方面的任何帮助。

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:39:35.687

你见过这个链接吗？

> 所需要的是将字体渲染到画布上，然后将其传递给位图并将其分配给图像视图。

[如何在小部件中使用自定义字体？](https://stackoverflow.com/questions/4318572/how-to-use-a-custom-typeface-in-a-widget)

顺便说一句，您已经提出了 18 个问题，但没有接受一个答案。我建议你开始接受一些，否则人们会不太愿意帮助你。

# sql - 如何正确输出 PL/SQL

> ID：13004327
> 
> 赞同：0
> 
> 时间：2012-10-22T02:32:58.240
> 
> 标签：sql, oracle, plsql

我在 .sql 文件中有两个代码块。一个块是函数，另一个块是过程。在第一个块中，我正在运行一个查询并将其打印到屏幕上（我正在使用 DBMS_OUTPUT.PUT_LINE() ）为它自己的行中的每一行。然后该过程有另一个查询需要打印在同一行（我正在使用 DBMS_OUTPUT.PUT() ）。当我对第二个块使用 DBMS_OUTPUT.PUT() 时，由于某种原因它搞砸了第一个块，而第一个块永远不会打印。

这是代码的链接：http: [//pastebin.com/z29emmBJ](http://pastebin.com/z29emmBJ) （代码的相关部分围绕行：97-103）

当我在过程中使用 DBMS_OUTPUT.PUT_LINE() 时，一切都正确显示，但是当我在过程中使用 DBMS_OUTPUT.PUT() 时，看起来该函数永远不会被调用。

以下是使用 PUT_LINE() 的输出：http: [//i.imgur.com/AnCv9.png](http://i.imgur.com/AnCv9.png) 以下是仅使用 PUT() 的输出：http: [//i.imgur.com/Jv3SV.png](http://i.imgur.com/Jv3SV.png)

我认为这与缓冲区大小有关，但我不确定是什么/为什么。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:58:53.033

为什么不根据需要将结果附加到 VARCHAR2 变量，然后在行完成时 put_line 该字符串？这样您就可以控制格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:50:41.133

您的第二个存储过程的代码片段：

```
FOR player IN rows LOOP
   currentCount := maxCount;
   DBMS_OUTPUT.PUT(player.FIRSTNAME || ' ' || player.LASTNAME || ':' || player.points || ' ');
   --DBMS_OUTPUT.NEW_LINE();
END LOOP; 
```

如果您希望结果输出显示为单行，您应该移到 `DBMS_OUTPUT.NEW_LINE()`循环之外（循环之后）。所以你的代码看起来像：

```
FOR player IN rows LOOP
  currentCount := maxCount;
  DBMS_OUTPUT.PUT(player.FIRSTNAME || ' ' || player.LASTNAME || ':' || player.points || ' ');         
END LOOP;
DBMS_OUTPUT.NEW_LINE(); 
```

在您模拟过程之后保持`DBMS_OUTPUT.NEW_LINE();`在循环内。`DBMS_OUTPUT.PUT``DBMS_OUTPUT.PUT_LINE`

```
SQL> create or replace procedure output1
  2  is
  3    l_str varchar2(100);
  4    l_status number;
  5  begin
  6    for i in 1..7
  7    loop
  8      dbms_output.put('Text_' || To_char(i));
  9      dbms_output.new_line;
 10    end loop;
 11  end;
 12  /

Procedure created

SQL> 
SQL> create or replace procedure output2
  2  is
  3    l_str varchar2(100);
  4    l_status number;
  5  begin
  6    for i in 1..7
  7    loop
  8      dbms_output.put('Text_' || To_char(i));
  9     end loop;
 10     dbms_output.new_line;
 11  end;
 12  /

Procedure created

SQL> exec output1;

Text_1
Text_2
Text_3
Text_4
Text_5
Text_6
Text_7

PL/SQL procedure successfully completed

SQL> exec output2;

Text_1Text_2Text_3Text_4Text_5Text_6Text_7

PL/SQL procedure successfully completed 
```

* * *

在您的代码中：

```
SET serveroutput ON size 32000;

REM Change output file name TO proj3-NetID.OUT!
SPOOL proj3-hgeorge3.OUT;
exec DBMS_OUTPUT.enable('100000000'); 
```

如果`serveroutput`使用选项（设置为 ON），则不需要调用 `DBMS_OUTPUT.enable`过程。如果它碰巧被调用，`DBMS_OUTPUT.enable`那么数值数据类型的值应该作为参数而不是字符串传递。是的，会有数据类型的隐式转换，但最好避免它。缓冲区的最大大小为 100 万。

# php - 我可以简单地“重新指向”apache 以使用不同版本的 PHP 吗？

> ID：13004328
> 
> 赞同：1
> 
> 时间：2012-10-22T02:33:04.840
> 
> 标签：php, apache2

我在不同的目录中安装了 2 个版本的 php。我可以从命令行使用两者。但是，我无法弄清楚如何让 apache 使用不同的（换句话说，它使用一个，但我想尝试与另一个一起运行）。

我可以更改simlinks或其他东西吗？我将使用什么过程来“重新指向”apache 以使用我的其他 php 安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-24T19:38:38.857

假设您安装了 php7.2 和 7.4。
当您调用 phpinfo() 时，php 7.2 正在响应（并显示）并且您希望 7.4 运行。
以后如何进行：

```
须藤a2dismod php7.2
须藤a2enmod php7.4
systemctl 重启 apache2

```

在 Kubuntu 18.04 上为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:44:20.497

在您的 apache httpd.conf 文件中有一个明确的包含 php 模块。无论这指向的是要使用的 php 版本。

寻找这样的一行：

```
 LoadModule php5_module  libexec/apache2/libphp5.so 
```

然后改成指向新版php的库。

如果这不在您的 httpd.conf 文件中，它可能在 /etc/httpd/conf.d/ 中找到的另一个 conf 文件中

对这些文件的任何更改都需要重新加载或重新启动 apache。

# javascript - 尝试查找 clientWidth 时，绝对位置会搞砸一切

> ID：13004333
> 
> 赞同：1
> 
> 时间：2012-10-22T02:33:53.283
> 
> 标签：javascript, css

行。因此，要获得 clientWidth 您必须添加代码

```
#menuSystem a{
position: absolute;
height: auto;
width: auto;
font-size: 15px;
} 
```

您需要这样做才能使其甚至有资格确定客户端宽度。我想要做的是将与链接相关的描述气泡的左边距设置为链接的 clientWidth 的长度。但是，当我将“绝对”css 属性添加到链接时，它们就会变得一团糟。链接应该如何，而不是气泡： ![链接应该如何，但不是气泡](../Images/aeb0c1674b3301aa3d09368335d676cc.png) 气泡应该如何，而不是链接 ![气泡应该是怎样的，而不是链接](../Images/1d70e6ed7a7590e3d51d0121dac17b2b.png)，所以这是我的 JavaScript 函数

```
function hover(x){
var id = x;
var hoverBubble = document.getElementById(id);
var concat = ["menuLink", id];
var menuId = concat.join("");
var link = document.getElementById(menuId);
var linkWidth = link.clientWidth + 1;
hoverBubble.style.display = "inline";
hoverBubble.style.marginLeft = linkWidth + 'px';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:05:24.583

还有其他方法可以“启用” `clientWidth`，例如`float:left`或`display:inline-block`。
那有帮助吗？

# android - 有没有办法创建维护单个 .repo 文件夹的两个分支的代码

> ID：13004337
> 
> 赞同：0
> 
> 时间：2012-10-22T02:34:40.097
> 
> 标签：android, repository

我已经为分支 A 完成了 repo 同步。在这样做的同时，我也看到 repo 获取其他分支的标签。所以，我认为 .repo 将拥有所有分支的所有代码版本。这是对的吗？如果是这样，我想知道是否有可能拥有分支 B 的代码，而不必为分支 B 复制 .​​repo 文件夹。换句话说，一旦我有了 .repo 文件夹，我就可以切换清单，切换到另一个分支没有再次联系服务器，是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:15:44.437

这是正确的。除非您使用了 repo sync -c，它只获取当前分支，否则所有远程分支都在那里。

用于`repo init -b <branchname>`切换清单的分支。

# memory - 当jvm内存达到阈值时通过电子邮件发送警报的工具？

> ID：13004341
> 
> 赞同：1
> 
> 时间：2012-10-22T02:35:37.613
> 
> 标签：memory, profiling, tomcat6, permgen

当jvm内存达到阈值时，我正在寻找一个很好的开源工具来发送警报。

我的应用程序位于 Tomcat6.0 上，偶尔使用的 PermGen 空间会意外增加。我希望在发生这种情况时收到警报。使用 VisualVM，我可以看到大多数情况下使用率是水平的，所以如果它超过某个阈值，我就知道出了点问题。

当 jvm 内存达到可配置阈值时，是否有一个好的开源工具可以通过电子邮件发送警报？

# javascript - 在 javascript 中调用和应用

> ID：13004342
> 
> 赞同：3
> 
> 时间：2012-10-22T02:35:41.443
> 
> 标签：javascript

> **可能重复：**
> [chain call 和 apply 在一起是什么意思？](https://stackoverflow.com/questions/11674115/whats-the-meaning-to-chain-call-and-apply-together)

我发现了一些这样的代码：

```
function fun() {
    return Function.prototype.call.apply(Array.prototype.slice, arguments);
} 
```

我知道 js 中的`call`and `apply`，但是当他们走到一起时我很困惑。

然后我想知道如果

```
Function.prototype.call.apply(Array.prototype.slice, arguments) 
```

是相同的 ：

```
Array.prototype.slice.apply(arguments); 
```

如果没有，第一行是做什么的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T03:01:36.417

好吧，让我们通过替换来解决这个问题。我们从：

```
Function.prototype.call.apply(Array.prototype.slice, arguments); 
```

我们所知道的：

1.  `Function.prototype.call`是一个函数。
2.  指向的`this`指针。`call``Function.prototype`
3.  我们`apply`用来改变 to的`this`指针。`call``Array.prototype.slice`
4.  `arguments`**应用于**（不作为参数传递）到`call`.

因此上面的语句等价于：

```
Array.prototype.slice.call(arguments[0], arguments[1], ...); 
```

由此我们看到：

1.  `Array.prototype.slice`是一个函数。
2.  指向的`this`指针。`slice``Array.prototype`
3.  我们`call`用来改变 to的`this`指针。`slice``arguments[0]`
4.  `arguments[1], ...`作为参数传递给`slice`.

这与以下内容相同：

```
arguments[0].slice(arguments[1], ...); 
```

这样做的好处是我们在一行中创建了一个[快速的未绑定包装器](https://stackoverflow.com/q/7459769/783743 "在 JavaScript 中使用 Function.call.apply 的目的是什么？ - 堆栈溢出")。`slice`

**编辑：**创建快速未绑定包装器的更好方法如下（请注意，它可能在某些较旧的浏览器中不起作用，但您现在不必担心 - 您可能总是对不支持的浏览器使用[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility "绑定 - JavaScript |  MDN")支持`bind`）：

```
var slice = Function.prototype.call.bind(Array.prototype.slice); 
```

这与以下内容相同：

```
function slice() {
    return Function.prototype.call.apply(Array.prototype.slice, arguments);
} 
```

这个怎么运作：

1.  `Function.prototype.call`是一个函数。
2.  指向的`this`指针。`call``Function.prototype`
3.  我们`bind`用来改变 to的`this`指针。`call``Array.prototype.slice`
4.  `bind`返回一个**应用于**的`arguments`函数。**`call`**

 ****奖励：**如果您的编程风格像我的那样功能强大，那么您会发现这段代码非常有用：

```
var funct = Function.prototype;
var obj = Object.prototype;
var arr = Array.prototype;

var bind = funct.bind;

var unbind = bind.bind(bind);
var call = unbind(funct.call);
var apply = unbind(funct.apply);

var classOf = call(obj.toString);
var ownPropertyOf = call(obj.hasOwnProperty);
var concatenate = call(arr.concat);
var arrayFrom = call(arr.slice); 
```

1.  使用它，您可以使用`call`或轻松创建未绑定的包装器`apply`。
2.  您可以使用`classOf`来获取`[[Class]]`值的内部。
3.  您可以使用`ownPropertyOf`inside for in 循环。
4.  您可以使用`concatenate`加入阵列。
5.  您可以`arrayFrom`用来创建数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:45:09.320

使用以下行，`.apply`调用`.call`方法，调用上下文`.call`是`.slice`方法，并且`arguments`集合作为单独的参数传递。

```
Function.prototype.call.apply(Array.prototype.slice, arguments); 
```

这有效地给了我们这个：

```
Array.prototype.slice.call(arguments[0], arguments[1], arguments[2] /*, etc */); 
```

这意味着`.slice()`将使用`arguments`对象中的第一项作为调用上下文来调用，其余参数作为普通参数。

因此，如果 的内容`arguments`是这样的：

```
myarray, 0, 5 
```

你实际上是这样结束的：

```
myarray.slice(0, 5) 
```

* * *

这基本上是一种不必这样做的方法：

```
var arr = arguments[0];
var rest = Array.prototype.slice(arguments, 1);

var result = arr.slice.apply(arr, rest); 
```**

# svn - Jenkins notifyCommit 触发器不起作用？

> ID：13004343
> 
> 赞同：5
> 
> 时间：2012-10-22T02:35:47.817
> 
> 标签：svn, jenkins

我已经处理这个问题几个小时了，似乎我做错了什么。

首先，svn 的 post-commit 钩子已经在工作，因为我已经能够看到一个日志，这里是 post-commit 的代码：

```
#!/bin/sh

REPOS="$1"
REV="$2"
UUID=`svnlook uuid $REPOS`

/bin/echo "$REPOS $REV $UUID" >> /var/subversion/svn-post-commit.out 
```

请注意，要使其正常工作，您需要执行 chmod 777 来提交并执行 chown www-data:www-data 到 svn 存储库。

没有工作的是 jenkins notifyCommit，它将在 jenkins 中自动构建项目：

```
/usr/bin/wget \
  --header "Content-Type:text/plain;charset=UTF-8" \
  --post-data "'svnlook changed --revision $REV $REPOS'" \
  --output-document "-" \
  --timeout=2 \
  http://localhost:8080/subversion/${UUID}/notifyCommit?rev=$REV 
```

我也尝试通过 curl 调用

```
curl --data "rev=4" http://localhost:8080/subversion/c8bb87ec-9a19-4975-ab9d-8b15741e6d7e/notifyCommit 
```

没有错误，但詹金斯没有建立。

有任何想法吗？

卷曲的回复：

```
* About to connect() to 10.1.1.133 port 8080 (#0)
*   Trying 10.1.1.133... connected
> POST /subversion/c8bb87ec-9a19-4975-ab9d-8b15741e6d7e/notifyCommit HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: 10.1.1.133:8080
> Accept: */*
> Content-Length: 5
> Content-Type: application/x-www-form-urlencoded
> 
* upload completely sent off: 5out of 5 bytes
< HTTP/1.1 200 OK
< Server: Winstone Servlet Engine v0.9.10
< Connection: Close
< Content-Type: text/html;charset=UTF-8
< Date: Mon, 22 Oct 2012 05:48:49 GMT
< X-Powered-By: Servlet/2.5 (Winstone/0.9.10)
< 
* Closing connection #0 
```

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:26:56.527

我已经成功使用了两种在 Jenkins 中远程启动构建的方法。（示例是针对 shell 脚本的）

一种是使用 URL 并开始一项特定的工作：

**方法一：**

```
WGET="/usr/bin/wget"
JENKINS_JOB="Your-Job-Name"
$WGET http://ip:port/job/$JENKINS_JOB/build?token=sampletocken 
```

如果您尝试启动一个参数化的作业，您可以通过这种方式指定参数（否则该作业将无法启动）：

```
$WGET http://ip:port/job/$JENKINS_JOB/buildWithParameters?param-name=param-value&token=sampletocken 
```

带有 token=sampletoken 的部分不是必需的，但增加了一点安全性。您可以在“远程触发构建”下的作业配置中配置令牌。

另一种方法是使用 Jenkins 颠覆 API：

**方法二：**

```
# REPOS is the local path of the repository.
# REV is the revision that we want to build.
# SERVER is the full URL of Jenkins.
# UUID of the repository (it will be used to identify it to Jenkins)

REPOS="$1"
REV="$2"
SERVER="http://ip:port"
UUID=`svnlook uuid $REPOS`

$WGET \
  --header "Content-Type:text/plain;charset=UTF-8" \
  --post-data "`svnlook changed --revision $REV $REPOS`" \
  --output-document "-" \
  --timeout=2 \
  $SERVER/subversion/${UUID}/notifyCommit?rev=$REV 
```

为了使这一切正常工作，您必须为 Jenkins 中的匿名用户授予适当的权限。但是，这可能是您不想做的事情，因为它会引起安全问题。

**验证**

为了使其更安全，您可以创建一个单独的用户，该用户将在脚本中用于向 Jenkins 进行身份验证。将此用户配置为拥有一些您将在脚本中使用的“API 令牌”。（不要忘记删除匿名用户的所有权限）

然后您需要将以下内容添加到您的 wget 命令中：

```
wget --auth-no-challenge --http-user=user --http-password=apiToken 
```

“--auth-no-challenge”用于避免“403 禁止”错误。您还可以将其他令牌添加到 URL，如前面的示例中所示。

最后一部分对我来说是有问题的，所以可能需要一些试验和错误......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:20:10.313

当您想远程触发 Jenkins 构建时，您必须在作业的*构建触发器*部分中选择*远程触发构建（例如，从脚本） 。*当你这样做时，你给它一个必须传递给 Jenkins 项目的令牌。

 *例如，如果您的构建令牌是`BUILD`，您将通过

```
http://<JenkinsURL>/job/<jobName>/build?token=BUILD 
```

我在 CVS 上做了很多这样的事情，因为 CVS 会花费太长时间，并且需要太多资源让 Jenkins 来查看是否有提交。CVS 必须检查项目中的每个文件以查看是否有更新。我通常不使用 Subversion 执行此操作，因为 Subversion 可以立即查看存储库中是否发生了更改，并且该检查占用的资源很少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:52:52.797

我找到了解决方法，但它并不优雅。我使用 jenkins cli 手动调用构建。我已经记录了我在这里所做的事情：

[http://czetsuya-tech.blogspot.com/2012/10/an-alternative-way-of-invoking-jenkins.html](http://czetsuya-tech.blogspot.com/2012/10/an-alternative-way-of-invoking-jenkins.html)。*

# ruby-on-rails - Ruby on Rails 地图 API

> ID：13004345
> 
> 赞同：2
> 
> 时间：2012-10-22T02:36:11.820
> 
> 标签：ruby-on-rails, gem, maps

我希望在我正在构建的 RoR 3 应用程序中包含一个地图小部件，该小部件允许用户放置标记并命名它们。与这些标记相关的位置（纬度和经度）和名称需要保存到数据库中。

您可以为此推荐任何 gem 或 API（我检查了一点 Google Maps 和 MapBox）吗？此外，对于如何在 RoR 中进行设置的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:08:40.343

Ruby-toolbox 是寻找宝石的好资源

[这里](https://www.ruby-toolbox.com/categories/geocoding___maps)有一些额外的宝石

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:03:55.950

给你：[https](https://github.com/apneadiving/Google-Maps-for-Rails) ://github.com/apneadiving/Google-Maps-for-Rails 。如果您需要地理编码，那么[http://www.rubygeocoder.com/](http://www.rubygeocoder.com/)。

# google-apps-script - 如何知道谁在使用使用 Google Apps 脚本构建的 Webapp？

> ID：13004349
> 
> 赞同：0
> 
> 时间：2012-10-22T02:36:54.900
> 
> 标签：google-apps-script

我想发布一个使用 Google Apps 脚本构建的免费网络应用程序，但我想知道谁在使用这个网络应用程序（至少是用户电子邮件地址）。该应用程序将作为访问该应用程序的用户运行并且可供任何人使用。

我知道一种使用 ScriptDb 并保存 Session.getUser().getEmail() 的方法，但我宁愿不将此方法用于此应用程序。

有没有其他方法可以做到这一点？

谢谢，福斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:31:43.350

您可以将用户的电子邮件保存在任何地方，在您更方便的地方进行。如果你不喜欢`ScriptDb`做一个`Spreadsheet`例子。

```
SpreadsheetApp.openById('your-spreadsheet-key').getSheetByName('Sheet1').
  appendRow([new Date(), Session.getActiveUser().getEmail()]); 
```

显然，必须将此电子表格共享给“知道链接的任何人”。或者，您可以设置 Google 表单并使用它发送信息。它不是公共 API，但使用起来相当简单`UrlFetch`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:38:29.597

您可以创建另一个 web 应用程序，当前的 web 应用程序将使用 urlfetch 静默地将活动用户邮件发布到电子表格等。

配套应用。将其发布为 web 应用程序，以在您的凭据下运行并具有匿名访问权限。确保获取此 webapp 的 URL。这将在主 webapp 中使用。

```
function doGet(e) {
  var user = e.parameter.user;
  SpreadsheetApp.openById('id of ss where user emailwill be saved').getSheets()[0].getRange('A1').setValue(user);
} 
```

在您的主要 webapp 使用中，以下代码行

```
 var user = Session.getActiveUser();
    UrlFetchApp.fetch('https://script.google.com/macros/s/xxxxxxxxxxx/exec?user='+user); //URL is the supporting webapp url with parameter 
```

# python - 向函数返回的类添加方法

> ID：13004353
> 
> 赞同：3
> 
> 时间：2012-10-22T02:37:38.200
> 
> 标签：python, class, python-3.x, mysql-python

**免责声明：**这个问题与家庭作业有关。我并不期待一个解决方案，但我希望更好地理解所要求的内容以及这个家庭作业练习的（可能的）效用。

这个问题是在关于使用 Python 的 MySQLdb 模块以及如何更好地表示结果集（可能还有它的行）而不是元组的元组（MySQLdb 的默认设置）的课程之后提出的。

**问题是：**修改classFactory.py源码，让build_row函数返回的DataRow类多了一个方法：

```
retrieve(self, curs, condition=None) 
```

self 是（像往常一样）正在调用其方法的实例，curs 是现有数据库连接上的数据库游标，条件（如果存在）是条件字符串，所有接收的行都必须为真。检索方法应该是一个生成器，产生结果集的连续行，直到它完全耗尽。每行都应该是 DataRow 类型的新对象。

```
def build_row(table, cols):
    """Build a class that creates instances of specific rows"""
    class DataRow:
        """Generic data row class, specialized by surrounding function"""
        def __init__(self, data):
            """Uses data and column names to inject attributes"""
            assert len(data)==len(self.cols)
            for colname, dat in zip(self.cols, data):
                setattr(self, colname, dat)
        def __repr__(self):
            return "{0}_record({1})".format(self.table, ", ".join(["{0!r}".format(getattr(self, c)) for c in self.cols]))
    DataRow.table = table
    DataRow.cols = cols.split()
    return DataRow 
```

1.  在函数定义中创建类的目的是什么？这通常由专业开发人员完成吗？如果是这样，有什么好处？
2.  为什么数据库游标是`retrieve`方法的（显式）参数？数据库游标不应该在这个脚本的范围之外被引用（当建立数据库连接时）？
3.  是否正确地说（当前）该`build_row`函数将接受两个参数 -`table`和`cols`- 并返回一个可能看起来像（例如）“exampleTable_record（fieldA，fieldB，fieldC）”的字符串？
4.  成功添加`retrieve`方法后，我`build_row`现在应该返回什么？

正如我之前提到的，如果我知道为什么要求我添加该`retrieve`方法，那么我可能会更好地了解如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:42:24.773

1.  这被称为工厂设计模式......虽然在这种情况下它只是为了使类的实例化被强制到包含该类的方法......这会迫使您在时间设置表和列名属性实例化...如果在您尝试调用检索时未正确实例化，可能会导致错误...
2.  我为了查询数据库需要一个游标对象
3.  是的，但它返回并且 DataRow 类不是字符串......这有一个字符串表示
4.  具有数据的数据行...

这是一个讨论工厂设计模式的链接 [为什么我们需要抽象工厂设计模式？](https://stackoverflow.com/questions/2280170/why-do-we-need-abstract-factory-design-pattern)

一个示例检索函数

```
@classmethod #if this is a classmethod
def retrieve(self, curs, condition=None):
        if condition:
           curs.execute("SELECT * FROM {0} WHERE {1}".format(self.table,condition)
        else:
           curs.execute("SELECT * FROM {0}".format(self.table)
        for row in curs.fetchall():
            yield DataRow(row) 
```

那么你会做类似的事情

```
my_users = build_row("users",["username","password","avatar"])
my_users = my_users()  #if you need to operate on an instance.... but class method would be better
#users is the name of a table already in our database, whose columns are username,password, and avatar
db=sqlite3.connect("some_database.sql")
for user in my_users.retrieve(db.cursor(),"username='bob'"):
    print user #something like users_record({'username':'bob','password':'123%gw','avatar':None)
    print user.username #bob
    print user.avatar #None
    print user.password #whatever
    print user.blah #Error!!!! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:35:06.363

> 2) 为什么数据库游标是检索方法的（显式）参数？数据库游标不应该在这个脚本的范围之外被引用（当建立数据库连接时）？

封装。依赖全局魔法变量会产生应尽可能避免的依赖关系。考虑您的应用程序可能同时有多个处于活动状态的游标，或者甚至可能通过单独的连接与两个数据库通信。

传入参数也使你的代码更容易测试：你可以传递一个模拟类或类似的类，而不必修改全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T06:01:04.143

你所拥有的是一个可以专业使用的例子。该函数`build_row`是一个类工厂，它返回一个适合处理特定表和列的数据的类。

尽管我个人不会在这种特定情况下使用工厂模式，但它确实有效。

因此，为了解释这段代码在做什么，它基本上创建了一个类，该类使用函数调用中的 table 和 cols。如果您在代码中注意到`self.cols`并且`self.table`正在存在，但它们实际上并不是`DataRow`.

该`build_row`函数实际返回的是一个类！这个类应该用于从数据库中获取数据......这是您必须为您的作业构建的部分。您将需要`table`在您的选择语句中使用（表名），您还需要`cols`... 本质上您的函数（我不会为您编写）应该执行以下操作：

```
SELECT <PUT THE `cols` HERE> FROM `table`; 
```

并返回结果。这应该足以让你继续前进。

# python - Linux 上是否有类似 Qt Designer for web 的东西？

> ID：13004355
> 
> 赞同：3
> 
> 时间：2012-10-22T02:38:04.203
> 
> 标签：python, web-applications, qt-designer, cheetah, pyjamas

我非常习惯于使用 Qt Designer 来设计 GUI，并且我希望能够在我正在处理的 Python 项目中使用类似的东西，我想为其创建一个 Web 界面，但我发现一个类似的工具似乎无处可寻。

是否有类似的东西可以生成模板（例如 Cheetah 模板）或视觉上类似于 Qt Designer 的 PyJS 界面，并将其连接到代码（事件处理），尤其是对于 Linux？

# iphone - 无法使用 SKStoreProductViewController 安装应用程序

> ID：13004357
> 
> 赞同：11
> 
> 时间：2012-10-22T02:38:18.867
> 
> 标签：iphone, objective-c, ios6, storekit

使用下面的代码 SKStoreProductViewController 可以呈现应用程序的描述。

当我触摸“免费”按钮时，它会显示“安装应用程序”。然后我触摸“安装应用程序”，应用程序图标内会显示一个进度条。但是，进度条会在 2-3 秒后消失，并且应用程序仍处于卸载状态。

这是我的演示应用程序。有谁知道原因？

```
SKStoreProductViewController *skvc = [[SKStoreProductViewController new] autorelease];
skvc.delegate = self;
NSDictionary *dict = [NSDictionary dictionaryWithObject:@"425349261" forKey:SKStoreProductParameterITunesItemIdentifier];
[skvc loadProductWithParameters:dict completionBlock:nil];
[self presentViewController:skvc animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T12:45:17.200

问题在于您并没有真正连接到 Itunes 商店，而是特殊的沙盒商店环境。我遇到了同样的问题，您需要有一个测试帐户并使用该帐户而不是您的普通 iTunes 帐户进行购买。

这一切都在这里描述：

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T13:57:57.460

当您尝试从沙盒安装应用程序时，请确保您已从当前帐户中注销。

# php - 如何为搜索目的构建查询字符串参数？

> ID：13004358
> 
> 赞同：0
> 
> 时间：2012-10-22T02:38:28.023
> 
> 标签：php, search, query-string, searchbar

好的，我不确定这会被称为什么，我确定它有一个词，但基本的是我希望 php 脚本在我的主页上创建一个搜索栏，但问题是我已经有一个搜索栏。

所以我真正想要的只是让 php 栏根据他们输入的内容将用户引导到不同的 url，因此很明显空格将成为`+`标志。

格式为：

`www.Mysite.com/videos/search_result.php?query=FIRSTWORD+SECONDWORD&type=videos&submit=Search`

因此，要分解它，它将输入：

`www.Mysite.com/videos/search_result.php?query=`

然后是第一个单词，然后是空格，然后是第二个单词，然后继续这个模式，不管有多少单词，然后：

`&type=videos&submit=Search`

我确定有更好的方法来解释这一点，但我对 PHP 基本上一无所知，我希望你能帮助谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:45:25.497

在 php 代码中，您可以通过以下方式获得它：

```
$query = $_POST['query']; //if your search bar form is post of course, otherwise $_GET

header("Location: /search_result.php?query=$query&type=videos&submit=Search"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:58:43.453

要使用表单在 HTML 中执行此操作：

```
<form action="/search_result.php" method="GET">
    <input type="text" name="query" />
    <input type="hidden" name="type" value="videos" />
    <input type="hidden" name="submit" value="Search" />
    <input type="submit" value="Search" />
</form> 
```

如果您需要使用 PHP 对“搜索查询”进行 URL 编码，请参阅[`urlencode`](http://au.php.net/urlencode).

# python - 流上的正则表达式而不是字符串？

> ID：13004359
> 
> 赞同：6
> 
> 时间：2012-10-22T02:38:53.220
> 
> 标签：python, regex

假设你想在管道上进行正则表达式搜索和提取，但模式可能跨越多行，怎么做？也许正则表达式库适用于流？

我希望使用 Python 库来完成这项工作？但是任何解决方案都可以，当然是库而不是命令行工具。

顺便说一句，我知道如何解决我当前的问题，只是寻求一个通用的解决方案。

如果不存在这样的库，为什么常规库不能与流一起使用，因为常规数学算法永远不需要向后扫描。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T03:18:59.697

如果您寻求通用解决方案，您的算法将需要类似于：

1.  将流的一部分读入缓冲区。
2.  在缓冲区中搜索正则表达式
3.  如果模式匹配，对匹配做任何你想做的事情，丢弃缓冲区的开头`match.end()`并转到步骤 2。
4.  如果模式不匹配，则使用流中的更多数据扩展缓冲区

如果没有找到匹配项，这最终可能会使用大量内存，但在一般情况下很难做得更好（考虑在唯一是最后一个字符`.*x`的大文件中尝试匹配为多行正则表达式）。`x`

如果您对正则表达式有更多了解，您可能会遇到其他可以丢弃部分缓冲区的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-11T11:36:32.533

我解决了使用经典模式匹配搜索流的类似问题。[您可能希望将我的解决方案streamsearch-py](https://github.com/gitagon/streamsearch-py)的 Matcher 类子类化并在缓冲区中执行正则表达式匹配。查看下面包含的 kmp_example.py 以获取模板。如果事实证明经典的 Knuth-Morris-Pratt 匹配就是您所需要的，那么您的问题现在就可以通过这个小型开源库解决了 :-)

```
#!/usr/bin/env python

# Copyright 2014-2015 @gitagon. For alternative licenses contact the author.
# 
# This file is part of streamsearch-py.
# streamsearch-py is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# 
# streamsearch-py is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
# You should have received a copy of the GNU Affero General Public License
# along with streamsearch-py.  If not, see <http://www.gnu.org/licenses/>.

from streamsearch.matcher_kmp import MatcherKMP
from streamsearch.buffer_reader import BufferReader

class StringReader():
    """for providing an example read() from string required by BufferReader"""
    def __init__(self, string):
        self.s = string
        self.i = 0

    def read(self, buf, cnt):
        if self.i >= len(self.s): return -1
        r = self.s[self.i]
        buf[0] = r
        result = 1
        print "read @%s" % self.i, chr(r), "->", result
        self.i+=1
        return result

def main():

    w = bytearray("abbab")
    print "pattern of length %i:" % len(w), w
    s = bytearray("aabbaabbabababbbc")
    print "text:", s
    m = MatcherKMP(w)
    r = StringReader(s)
    b = BufferReader(r.read, 200)
    m.find(b)
    print "found:%s, pos=%s " % (m.found(), m.get_index())

if __name__ == '__main__':
    main() 
```

输出是

```
pattern of length 5: abbab
text: aabbaabbabababbbc
read @0 a -> 1
read @1 a -> 1
read @2 b -> 1
read @3 b -> 1
read @4 a -> 1
read @5 a -> 1
read @6 b -> 1
read @7 b -> 1
read @8 a -> 1
read @9 b -> 1
found:True, pos=5 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T03:21:41.707

我不相信可以在流上使用正则表达式，因为没有整条数据，您无法进行正匹配。这意味着你只会有一个可能的匹配。

但是，正如@James Henstridge 所说，您可以使用缓冲区来克服这个问题。

# android - intent.setClass(getActivity, .class) 与 Intent(this, .class)

> ID：13004361
> 
> 赞同：0
> 
> 时间：2012-10-22T02:39:15.883
> 
> 标签：android, android-intent

我有这个问题

[启动一个新的活动 - android](https://stackoverflow.com/questions/13003898/launching-a-new-activity-android)

并且不明白为什么原始代码是错误的。此外，稍后在活动中更令人困惑的是，我有以下使用 getActivity() 工作的代码有什么区别为什么它在一种情况下工作而不是另一种情况？

```
public static class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        EditText dobText = (EditText)getActivity().findViewById(R.id.editText1);
        String dobStr = dobText.getText().toString();
        int day = Integer.valueOf(dobStr.replaceAll("([0-9]*)/[0-9]+/[0-9]+","$1"));
        int month = Integer.valueOf(dobStr.replaceAll("[0-9]+/([0-9]+)/[0-9]+", "$1"))-1;
        int year = Integer.valueOf(dobStr.replaceAll("[0-9]+/[0-9]+/([0-9]+)", "$1"));
        return new DatePickerDialog(getActivity(),this, year,month,day);
    }

} 
```

以及我在上一个问题中的情况与这个问题有何不同

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

（搜索“intent.setClass(getActivity(), DetailsActivity.class);”找到我所指的例子）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:11:33.387

在此示例中，您正在扩展 DialogFragment，这不是从**Activity**而是从**Fragment**扩展的。

在这里，您正在调用 Fragment 的 getActivity() 方法，该方法返回 Fragment 的附加 Activity 对象。

在上一个问题中，该类正在扩展 Activity，因此“ **this** ”是对 Activity 的引用。

出现复杂情况是因为在上一个问题中，您从匿名内部类访问“ **this** ”，该内部类不从 Activity 扩展，因此要访问封闭对象，您必须指定封闭类的名称，即**MainActivity.this**。

这是关于内部类的 Oracle 教程，起初语法可能会令人困惑。

[http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

# javascript - 单击时将单元格表更改为文本框

> ID：13004362
> 
> 赞同：1
> 
> 时间：2012-10-22T02:39:27.730
> 
> 标签：javascript, html-table, onclick

我的代码有问题。当用户单击单元格表时，应出现文本区域。单击时会出现文本区域，但它始终出现在第一个单元格上。我希望文本区域恰好出现在单元格出现的位置。（表中的值是从数据库中检索的）..

```
<?php
session_start();

if(!isset($_SESSION['key']))
{
    header("location:index.php");   
}

    include"connect.php";?>
   <html>
    <head>
       <title>All Records</title>   
       <style>
        table{ text-align:justified;}
        a {text-decoration:none;
           color:black;
        }
        .replace {display:none;}
   </style>
   <script type="text/javascript">
       function exchange(el){
        var ie=document.all&&!document.getElementById? document.all : 0;
        var toObjId=/b$/.test(el.id)? el.id.replace(/b$/,'') : el.id+'b';
        var toObj=ie? ie[toObjId] : document.getElementById(toObjId);

        if(/b$/.test(el.id))  
        toObj.innerHTML=el.value;
        else{
        toObj.style.width=el.offsetWidth+7+'px';
        toObj.value=el.innerHTML;
        }
        el.style.display='none';
        toObj.style.display='inline';
        }
      </script>
</head>
   <body>

   <?php 
     echo "<table border=1 id='records' >";
     echo "<tr><th class='data' rowspan='2' ><strong>EMPLOYEE</strong></th>";
     echo "<th class='data' rowspan='2'>DATE</th>
                <th colspan='2'>AM</th>
                <th colspan='2'>PM</th>
                <th colspan='2'>OVERTIME</th></tr>";
     echo "<tr>
        <th>Arrival</th>
        <th>Departure</th>  
        <th>Arrival</th>
        <th>Departure</th>
        <th>In</th>
        <th>Out</th>
       </tr>";

   $query="SELECT 
   employee_detail.employee_code,
   employee_detail.lname,
   employee_detail.fname,
   employee_detail.mname,
   employee_record.date,
   employee_record.am_in,
   employee_record.am_out,
   employee_record.pm_in,
   employee_record.pm_out,
   employee_record.over_in,
   employee_record.over_out
   FROM employee_detail INNER JOIN employee_record ON
   employee_record.employee_code=employee_detail.employee_code ORDER BY id DESC ";

   $result=mysql_query($query);
   $affected=mysql_affected_rows();

   while($affected>=1&&$row=mysql_fetch_array($result))
   {
     echo '<tr><td><a href="edit.php?id2='.$row['employee_code'].'" name="edit">';
     echo $row['lname'].",&nbsp";
     echo $row['fname']."&nbsp";
     echo $row['mname']."</a></td>"; 
     echo '<td>'.$row['date'].'</td>';
     echo '<td><span id="itm1" onclick="exchange(this);">'.$row['am_in'].'</span>                  
     <textarea ondblclick="exchange(this);" id="itm1b" class="replace" type="text" 
     value='.$row['am_in'].'></textarea></td>';
     echo '<td>'.$row['am_out'].'</td>';
     echo '<td>'.$row['pm_in'].'</td>';
     echo '<td>'.$row['pm_out'].'</td>';
     echo '<td>'.$row['over_in'].'</td>';
     echo '<td>'.$row['over_out'].'</td>';
     $affected--;
   }     
     echo "</tr></table>";
   ?>

   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:58:45.180

第一个`<textarea>`总是出现的事实使您的代码听起来好像运行正常，但是由于您正在生成具有相同`id`属性的多个元素，它的目标是第一个匹配的元素，而不是您单击的最近的元素。

通过附加结果的 'employee_code' 值（可能是数据库中的主键）使每个`id`唯一（这实际上是有效性的要求）：

```
 echo '<td>';

    echo   '<span id="itm"' . $row['employee_code'] . '" ';
    echo   'onclick="exchange(this);">';
    echo   $row['am_in'];
    echo   '</span>';

    echo   '<textarea ondblclick="exchange(this);" id="itm';
    echo   $row['employee_code'] . 'b" class="replace" type="text" ';
    echo   'value=' . $row['am_in'] . '>';
    echo   '</textarea>'

    echo '</td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:40:18.243

我可以使用 php 值作为跨度和文本区域的 id 吗？

```
 echo '<td>';
  echo   '<span id='.$row['employee_code'] . ' onclick="exchange(this);">'.$row['am_in'].'</span>';
  echo '<textarea ondblclick="exchange(this);" id='.$row['employee_code']. ' class="replace" type="text" value=' . $row['am_in'] .' >'. $row['am_in'] . '</textarea>';
  echo '</td> 
```

# ajax - ajax请求后的Symfony2登录重定向

> ID：13004368
> 
> 赞同：2
> 
> 时间：2012-10-22T02:40:03.503
> 
> 标签：ajax, redirect, symfony, fosuserbundle

我正在使用 Symfony2 使用用户帐户构建一个站点，并且我有一个部分，用户有一个项目列表，单击时可以编辑所有项目。

目前当用户点击一个item进行编辑时，会有一个ajax请求拉取该item相关的所有信息，并构建一个表单，然后该表单将被放置在当前页面中。

现在这是我的问题，假设用户在他们的项目页面上，并且他们清除了浏览器缓存（并已注销），当他们单击要编辑的项目时，我已经进行了设置，所以什么都不会发生，但是如果他们之后立即尝试登录（使用标准 website.com/login 页面），他们将被重定向到他们之前尝试加载的表单。（此页面仅包含一个表单，仅此而已，因此可能会使用户感到困惑）。

我已经将 Symfony2 设置为在登录后重定向到用户个人资料页面，但它仍然会在登录后从 ajax 请求重定向到表单。

我只希望用户在任何情况下登录后都被重定向到他们的个人资料页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:58:51.610

您可以强制您的安全始终重定向到目标路径，而不是检查引用者：

```
firewalls:
    secured_area:
        form_login:
            always_use_default_target_path: true
            default_target_path: /userProfilePage 
```

PS你应该更好地阅读[文档](http://symfony.com/doc/current/reference/configuration/security.html#redirecting-after-login)

# ruby-on-rails - 在 Mountain Lion 上安装 Rails

> ID：13004369
> 
> 赞同：2
> 
> 时间：2012-10-22T02:40:30.563
> 
> 标签：ruby-on-rails, installation, osx-mountain-lion

我想知道您是否可以帮我找出为什么我不能在我的 MBP 上使用 OS X Mountain Lion 安装 Ruby on Rails。这是一个奇怪的问题，我会尽可能多地给你信息。

我已经安装了 ruby​​，它在 1.9.3 版上运行

我已经安装了 ruby​​ gems，它适用于我尝试安装的所有其他 gem。
它的版本是 1.8.24

当我运行`$ sudo gem install rails`它时回复消息：`Successfully installed rails-3.2.8 1 gem installed`

虽然当我问它时`rails -v`它返回：

```
`Rails is not currently installed on this system. To get the latest version, simply type:

    $ sudo gem install rails

You can then rerun your "rails" command.` 
```

我应该怎么办？

rails bash 文件 ( `/usr/bin/rails`) 包含：

```
#!/usr/bin/ruby
# Stub rails command to load rails from Gems or print an error if not installed.
require 'rubygems'

version = ">= 0"
if ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then
version = $1
    ARGV.shift
end

begin
    gem 'railties', version or raise
rescue Exception
    puts 'Rails is not currently installed on this system. To get the latest version, simply type:'
    puts
    puts '    $ sudo gem install rails'
    puts
    puts 'You can then rerun your "rails" command.'
    exit 0
end

load Gem.bin_path('railties', 'rails', version) 
```

那一定意味着 gem 文件不存在或者是旧的或损坏的
我该如何检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:46:06.290

从全新安装的 Mountain Lion 开始...

我尝试使用，

```
sudo gem install rails 
```

...直接开箱即用。这给出了总结的错误，

```
ERROR: Failed to build gem native extension. 
```

但是，在我通过以下方式安装 Xcode 命令行工具后，同样的命令成功了，

```
Xcode 4.5.2 -> Preferences -> Download -> Components 
```

除了安装命令行工具之外，我没有进行其他更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:58:47.980

我建议你使用这个[资源来安装 rails](http://railsinstaller.org)和你需要的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:08:25.587

前几天我在我的 Macbook 上安装了 Mountain Lion。我使用[Homebrew](http://mxcl.github.com/homebrew/)安装 RVM（并遵循安装后的说明！），然后使用 RVM 安装最新版本的 Ruby（1.9.3）。从那里我将 1.9.3 设置为默认值，然后运行`gem install rails`​​. 到目前为止，它已经顺利运行了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:28:46.533

Railsinstaller 发布了 OSX 的安装程序，尝试从 git 存储库[https://github.com/railsinstaller](https://github.com/railsinstaller)下载他们的安装程序（似乎有人破坏了他们的官方网页）。

# php - PHP 5.4 和 SMTP

> ID：13004370
> 
> 赞同：5
> 
> 时间：2012-10-22T02:40:45.330
> 
> 标签：php, email, smtp

我正在尝试将 PEAR SMTP 库与 PHP 5.4 一起使用，但在使用它时遇到以下问题：

```
> Strict Standards: Non-static method Mail::factory() should not be called statically in C:\xampp\htdocs\forgot.php on line 75

Strict Standards: Non-static method PEAR::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Mail\smtp.php on line 365

Strict Standards: Non-static method PEAR::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Net\SMTP.php on line 450

Strict Standards: Non-static method PEAR::raiseError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Net\SMTP.php on line 451

Strict Standards: Non-static method PEAR::raiseError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Mail\smtp.php on line 369

Strict Standards: Non-static method PEAR::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Mail\smtp.php on line 249 
```

据我所知，在 PEAR 或 PEAR 脚本的创建者修复它们之前，无法解决此问题。我想知道人们使用哪些替代 SMTP 库，或者我可以做些什么来通过 SMTP 将电子邮件从我的脚本传递到 gmail。我正在使用windows，如果这有帮助的话。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:54:39.720

请使用 php 邮件程序库。这将帮助您解决 PHP 中的任何电子邮件相关问题。

以下是phpmail库 [http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list的下载链接](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)

该库以 zip 格式提供。

解压后请搜索测试文件夹。这将向您展示如何使用该库。

您还可以参考使用 gmail 进行电子邮件通信的[链接](http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/)

谢谢！

# java - 无法摆脱比较器的 NullPointerException

> ID：13004373
> 
> 赞同：0
> 
> 时间：2012-10-22T02:41:00.787
> 
> 标签：java, nullpointerexception

我一直在努力摆脱调用代码行时发生的 NullPointerException：

```
 if (priorityComparator.compare(temp.next.value, newNode.value) >= 0 ) 
```

完整的代码是：

```
 public class HeaderLinkedPriorityQueue<E> extends 
       AbstractPriorityQueue<E> implements PriorityQueue<E> {

  //Some other methods, constructors etc.

 public boolean add (E e) {

  ListNode<E> temp = highest;

  ListNode<E> newNode = new ListNode<E>(e, null);

  if (temp.next == null){
      //first node in a list.
      temp.next = newNode;
      objectCount++;
      return true;
  }

  //if the value of the first element following the header node is greater than the newNode add to back.
  if (priorityComparator.compare(temp.next.value, newNode.value) >= 0 ) {
      temp.next.next = newNode;
      objectCount++;
  }
  else {
      //add before the first node in the list. have temp.next point to newNode and have newNode point to the old temp.next.
      newNode.next = temp.next;
      temp.next = newNode;
      objectCount++; 
  }
  return true;
 }

 //class variables.
 private ListNode<E>           highest     = new ListNode(null, null); 
 private int                   objectCount = 0;
 private Comparator<? super E> priorityComparator; 
```

我看不出参数有什么问题，所以我真的很难过。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T02:48:25.513

似乎您没有初始化 PriorityComparator。

```
private Comparator<? super E> priorityComparator; 
```

应该是这样的

```
private Comparator<? super E> priorityComparator = new PriorityComparator(); 
```

# javascript - 从 Web Worker 内部运行 window.crypto.getRandomValues()

> ID：13004375
> 
> 赞同：6
> 
> 时间：2012-10-22T02:41:14.010
> 
> 标签：javascript, web-worker

我在这里束手无策。有没有办法做到这一点，知道网络工作者无法访问该`window`对象？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-01-10T09:02:28.093

我知道这是一个老问题，但我偶然发现，事情发生了变化。大多数浏览器现在确实支持网络工作者中的加密。

在 webworkers 中，您可以访问`self`不包含所有“窗口”属性（尤其是与 dom 无关），但包含 API 方法（如加密函数）。

因此，您可以简单地`self.crypto.getRandomValues()`从 webworker 中访问。

我以小提琴为例：http: [//jsfiddle.net/jbrosi/yj17gomk/](http://jsfiddle.net/jbrosi/yj17gomk/)

但是请注意，对 webworker 和 back 的调用也会对性能产生很小的影响和最昂贵的加密功能（比如`crypto.subtle.encrypt`异步，因此*根本不*应该阻塞你的主线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T03:10:05.480

没有办法做到这一点，因为 Crypto 类和方法是“本机代码”，这意味着它们在浏览器中的较低级别实现，因此我们无法提取代码并将其移动到其他地方。我尝试使用[Chrome 的 Transferrable Objects](http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast)对象从当前上下文中删除并传递给工作人员，但这会引发错误。我不认为加密 api 需要与 DOM 耦合（WebWorkers 不会触及 DOM，因为它不是线程安全的），但我以前从未实现过加密。在 Node 中，我们有一个异步 API，所以至少在我看来，它应该是线程安全的。

[http://cl.ly/image/0r0P3m3D2h07](http://cl.ly/image/0r0P3m3D2h07) <- 检查`window.crypto`

[http://cl.ly/image/0G1G0F1Y0d3Z](http://cl.ly/image/0G1G0F1Y0d3Z) <- 将加密传递给 WebWorker throws 的示例代码。

我创建了一个 WebWorker 脚本来验证，也许，只是*也许*，Chrome 和 Firefox 只是有不同的实现，不幸的是，我弄错了。

我已经向[W3C Web Crypto API Proposal](http://www.w3.org/2012/webcrypto/WebCryptoAPI/#Crypto-method-createEncrypter)的作者发送了一封电子邮件，您也应该这样做。在这一点上，草案似乎有一些未解决的问题，所以它似乎可以改变。拥有异步 API 或`crypto`在 Web Worker 中提供 API 对我来说似乎是完全合理的。阻塞主事件循环似乎是一件坏事。

# javascript - .wrapAll() 基于相邻兄弟姐妹的类和

> ID：13004376
> 
> 赞同：1
> 
> 时间：2012-10-22T02:41:32.897
> 
> 标签：javascript, jquery, wrapall

我有一系列分配`.big`或`.small`基于大小的 DIV。它们需要以两个或三个为一组进行包装。实际上，只有两个`.big`s 可以放入分配的空间中。

如果两个`.big`DIV 相邻存在，则应将它们以两个一组的形式包装。否则，DIV 应该以三个为一组进行包装。

请让我知道我做错了什么以及如何使它工作。下面是一个示例，其中包含关于应在何处断开换行的注释。下面是我在 jQuery 中尝试过的内容，以及[jsFiddle 的链接](http://jsfiddle.net/natejones/UvsZE/)。

```
<div class="big post">big</div>
<div class="big post">big</div>
    <!-- should be wrap break -->
<div class="big post">big</div>
<div class="big post">big</div>
    <!-- should be wrap break -->
<div class="big post">big</div>
<div class="small post">small</div>
<div class="big post">big</div>
    <!-- should be wrap break -->
<div class="small post">small</div>
<div class="small post">small</div>
<div class="big post">big</div>
    <!-- should be wrap break -->
<div class="big post">big</div>
<div class="small post">small</div>
    <!-- should be wrap break --> 
```

我认为`if`下面的 ，效果很好，但是`else`打破了所有的东西。

```
$('.post').each(function() {    
    if ( $(this).hasClass('big') && $(this).next('.post').hasClass('big') ) {    
        var allElements = $(this).next().andSelf(),
            WRAP_BY = 2;
        for (var i = 0; i < allElements.length; i += WRAP_BY) {
            allElements.slice(i, i + WRAP_BY).andSelf().wrapAll('<div class="flowed" />');
        }//for                            
    }//if
else {
    // the else breaks all the things
        var allElements = $(this).next().andSelf(),
            WRAP_BY = 3;
        for (var i = 0; i < allElements.length; i += WRAP_BY) {
            allElements.slice(i, i + WRAP_BY).andSelf().wrapAll('<div class="flowed" />');
        }//for                                        
}//else
});//each 
```

[http://jsfiddle.net/natejones/UvsZE/](http://jsfiddle.net/natejones/UvsZE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:21:20.470

首先 - 你需要从函数返回，如果元素，已经包装，

其次，我不明白你为什么需要`for`循环`else`（你可以`$.nextAll()`用来获取所有兄弟姐妹）

[这里](http://jsfiddle.net/oceog/UvsZE/14/)的代码

```
$('.post').each(function() {
    //return if already wrapped!
    if ($(this).parent().hasClass('flowed')) {
        return;
    }
    var WRAP_BY = 3;
    if ($(this).hasClass('big') && $(this).next('.post').hasClass('big')) {
        WRAP_BY = 2;
    }
    var allElements = $(this).nextAll().andSelf();
    allElements.slice(0, WRAP_BY).wrapAll('<div class="flowed" />');
}); //each​ 
```

# mysql - MYSQL游标重复错误数据

> ID：13004379
> 
> 赞同：0
> 
> 时间：2012-10-22T02:42:13.207
> 
> 标签：mysql, stored-procedures, cursor

我第一次尝试创建一个存储过程和一个游标，但它的行为并不像预期的那样。一切都执行得很好，但输出数据不正确。如果我手动迭代，我会得到我所期望的，但不是通过存储过程。

如果您查看下面的输出表，前三个记录是正确的，并且所有后续条目的 GID 都是正确的，但是 PTS 汇总不正确并重复相同的值。

程序：

```
DELIMITER //

CREATE PROCEDURE creategamesummary()

BEGIN

DECLARE curdone TINYINT DEFAULT 0;
DECLARE curgid INT;
DECLARE curwk INT;

DECLARE gamescursor CURSOR

FOR

SELECT g1.GID FROM games g1 WHERE g1.SEAS = 2008 AND g1.WK > 4 AND (g1.V = 'BAL' OR g1.H = 'BAL') ORDER BY GID;

DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET curdone=1;

OPEN gamescursor;

REPEAT
    FETCH gamescursor into curgid;

    SET curwk = (SELECT WK FROM games WHERE GID = curgid);

    REPLACE INTO gamesummary
    SELECT
    curgid as GID,
    SUM(t1.PTS) as PTS
FROM
    team t1
WHERE
    t1.GID IN (
    SELECT
    g2.GID
FROM
    games g2
WHERE
    (g2.V = 'BAL' OR
    g2.H = 'BAL') AND
    g2.SEAS = 2008 AND
    g2.WK <= curwk
) AND t1.TNAME = 'BAL';

UNTIL curdone END REPEAT;

    CLOSE gamescursor;

END//

DELIMITER ; 
```

输出表：

```
GID,PTS
2182,75
2196,78
2212,105
2223,127
2240,127
2259,127
2268,127
2288,127
2306,127
2327,127
2330,127
2346,127
2371,127
2379,127
2381,127
2385,127 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:45:34.823

回答我自己的问题，但我设法将查询重构为下面的代码。由于这是我第一次尝试使用游标和存储过程，我仍然希望能得到有关第一个版本中出现问题的反馈。

```
DELIMITER //

CREATE PROCEDURE creategamesummary2()

BEGIN

DECLARE curdone TINYINT DEFAULT 0;
DECLARE curteam varchar(3);

DECLARE teamcursor CURSOR

FOR

SELECT TNAME FROM team WHERE GID in (SELECT GID from games WHERE SEAS = 2008) GROUP BY TNAME;

DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET curdone=1;

OPEN teamcursor;

WHILE NOT curdone DO
    FETCH teamcursor into curteam;

    REPLACE INTO gamesummary2
SELECT
    g1.GID,
    g1.WK,
    curteam AS TNAME,
    (
    SELECT SUM(t1.PTS)
    FROM team t1
    WHERE t1.GID IN (
        SELECT g2.GID
        FROM games g2
        WHERE g2.WK <= g1.WK AND (g2.V = curteam OR g2.H = curteam) AND g2.SEAS = 2008) AND
    t1.TNAME = curteam) AS SUM_PTS
FROM
    games g1
WHERE
    g1.SEAS = 2008 AND
    g1.WK > 4 AND
    (g1.V = curteam OR g1.H = curteam)
GROUP BY GID, WK, curteam;

END WHILE;

    CLOSE teamcursor;

END//

DELIMITER ; 
```

# fortran - Compaq Visual Fortran 和 GNU Fortran 有什么区别？

> ID：13004380
> 
> 赞同：2
> 
> 时间：2012-10-22T02:42:14.990
> 
> 标签：fortran, gfortran, fortran77, intel-fortran

在 Linux 下，我使用 gfortran 编译了一些 Fortran 77 代码，这些代码是在 Windows 下的 Compaq Visual Fortran 6.5 (CVF) 上开发的。一些错误与不同的关键字更改有关，例如`TYPE`在 CVF 和`PRINT`gfortran 中。

CVF 和 gfortran 之间有详细比较吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:49:45.797

如果您寻找与 CVF 兼容的编译器，请使用 Intel Fortran。是它的直系后代。这个网站可以帮助你

[http://software.intel.com/en-us/articles/migrating-from-compaq-visual-fortran](http://software.intel.com/en-us/articles/migrating-from-compaq-visual-fortran)

但我强烈建议摆脱非标准扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T05:24:25.077

从记忆中，CVF 的文档清楚地说明了编译器接受的语法是对标准的扩展。如果您的程序使用这样的扩展，那么不同的编译器很有可能会拒绝它们。

TYPE 语句就是这样的扩展——它不在 Fortran 77 中。

# html - 播放存储为 blob 的 MP3 文件

> ID：13004381
> 
> 赞同：15
> 
> 时间：2012-10-22T02:42:17.543
> 
> 标签：html, flash, firefox, mp3, blob

简而言之，我想在 Firefox 中播放一个 blob MP3 文件。

我可以访问 blob 本身：（`blob`使用 mime type 切片`audio/mpeg3`）和它的 URL `blobURL = window.URL.createObjectURL(blob)`：。

我尝试过：

1.  HTML5 音频播放器：

    ```
    <audio controls="controls">
        <source src="[blobURL]" type="audio/mp3">
    </audio> 
    ```

    但我在 Firebug 中收到警告，告诉我 Firefox 无法读取类型为 的文件`audio/mpeg3`。

2.  多个音频播放器库（[SoundManager](http://www.schillmania.com/projects/soundmanager2/)、[JPlayer](http://www.jplayer.org/)等），但似乎没有一个允许 blob URL 作为输入。

我做错了吗？或者有人知道可以从 blob 播放 MP3 文件的解决方法或库吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-25T11:27:12.823

这对我来说似乎很好，虽然我使用`audio/mpeg`的是 MIME 类型：

```
$scope.player = new window.Audio();

var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        $scope.player.src = window.URL.createObjectURL(this.response);
        $scope.player.play();
    }
};
xhr.open('GET', url);
xhr.responseType = 'blob';
xhr.send(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-15T20:04:56.910

我意识到这个问题已经得到解答，并且我的发现是针对不同的浏览器（Chrome），但我想我会把它留在这里，以防将来有人遇到我遇到的同样问题。我在通过音频播放器播放 blob 文件时遇到问题，但发现删除源标签可以解决问题。所以这行不通：

```
<audio controls="controls">
    <source src="[blobURL]" type="audio/mp3">
</audio> 
```

但这很好用：

```
<audio controls="controls" src="[blobURL]" type="audio/mp3" /> 
```

我不确定为什么一个会起作用而另一个不会，但它确实存在。希望这对其他人有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-06T22:02:52.570

尝试在 React 中播放上传的 mp3 时遇到了类似的挑战。能够根据之前在此处提供的 XHR 解决方案使其工作，但随后对其进行了调整以与 React refs 一起使用：

```
import {useState, useRef, useEffect} from 'react'

function FileUploadPage(){
  const [selectedFile, setSelectedFile] = useState();
  const [isFilePicked, setIsFilePicked] = useState(false);
  const myRef = useRef(null)

  const changeHandler = (event) => {
    setSelectedFile(event.target.files[0]);
    setIsFilePicked(true);
  };

  const playAudio = () => {
    myRef.current.src = window.URL.createObjectURL(selectedFile)
    myRef.current.play()
  }

  return(
    <div>
      <input type="file" name="file" onChange={changeHandler} />
        {isFilePicked ? (
          <div>
                <p>Filename: {selectedFile.name}</p>
                <p>Filetype: {selectedFile.type}</p>
                <p>Size in bytes: {selectedFile.size}</p>
                <p>
                    lastModifiedDate:{' '}
                    {selectedFile.lastModifiedDate.toLocaleDateString()}
                </p>
                <div>
                <button onClick={playAudio}>
                    <span>Play Audio</span>
                </button>
                <audio ref={myRef} id="audio-element" src="" type="audio/mp3" />
            </div>
            </div>
        ) : (
            <p>Select a file to show details</p>
        )}
    </div>
) 
```

}

# php - php PDO prepare() 处理非对象错误

> ID：13004384
> 
> 赞同：1
> 
> 时间：2012-10-22T02:43:11.007
> 
> 标签：php, mysql, pdo

我不断收到“致命错误：在第 30 行的 /var/www/html/portal_core/build_portal.php 中的非对象上调用成员函数 prepare()”。我是 PDO 的新手，我真的用它作为测试来了解它。你们能帮我理解我做错了什么吗？

```
 <?php

class build_portal 
{
protected $dbh; 

function __construct($dbname,$theme)
{
    try
    {
    $dbh = new PDO('mysql:dbname='.$dbname.';host=localhost',"username","password");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $this->log_error("Construct 1st Try statement 3rd Line");
    }
    catch (PDOException $e)
    {
        echo "Page Could Not Be Loaded";
        return -1;
    }

}

function log_error($cause)
{
    try
    {
    $sth = $this->dbh->prepare("SELECT * from portal_errors");
    $sth->setFetchMode(PDO::FETCH_ASSOC);
    $sth->execute();
    }
    catch (PDOException $e)
    {
        print_r($e->errorInfo);
    }
} 
```

} ?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:45:33.127

这似乎是一个范围问题。你应该在构造函数中`dbh`赋值`$this->dbh`。当您稍后在 中访问它时`log_error()`，您期望它是一个类属性，但它最初在构造函数中被定义为局部变量。

```
$this->dbh = new PDO('mysql:dbname='.$dbname.';host=localhost',"username","password");
$this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

# java - JAVA编写灰度JPEG图像（依赖JDK版本？）

> ID：13004388
> 
> 赞同：1
> 
> 时间：2012-10-22T02:44:11.743
> 
> 标签：java, image-processing, jpeg, raster

我是 JAVA 语言的初学者，我需要使用代码（编写灰度 JPEG 图像）。我搜索了很长时间，但我无法弄清楚现在是什么问题。

```
public static boolean writeImage(String inputFileName, String outputFileName, int[][][] imageData)
{
    BufferedImage inputImage = MyImageReader.readImageIntoBufferedImage( inputFileName );
    if ( inputImage == null )
    {
        System.out.println(" Could not open input image.");
        return false;
    }

    BufferedImage outputImage = new BufferedImage( inputImage.getWidth(), inputImage.getHeight(),
                                                   inputImage.getType() );
    WritableRaster outputRaster, inputRaster;
    inputRaster = inputImage.getRaster();
    outputRaster = inputRaster.createCompatibleWritableRaster();

     int band = 0;
    int numbands = outputRaster.getNumBands();

    int height, width;
    height = outputRaster.getHeight();
    width = outputRaster.getWidth();
    int[] pixelData = new int[ 1 ];

    for ( int y = 0; y < height; y++ )
        for ( int x = 0; x < width; x++ )
        {
            for ( band = 0; band < 1; band++ )
            {
                pixelData[ 0 ] = imageData[0][y][x];
            }
            outputRaster.setPixel(x, y, pixelData );
        }

    outputImage.setData( outputRaster );

    File outputFile = new File( outputFileName );
    try
    {
        if ( !ImageIO.write( outputImage, "jpg", outputFile ))
        {
            System.out.println("Could not find image format for output image.");
            return false;
        }
    }
    catch ( Exception e )
    {
        System.out.println("Could not write output file.");
        return false;
    }

    return true;
} 
```

我正在使用上面的代码。该代码似乎通过从输入 jpeg 文件复制属性来创建 WritableRaste，因此输出 jpeg 文件将具有相同的大小。

我正在做的是对灰度栅格值进行一些图像处理并将其保存为 jpeg 文件。

当我用简单的 4x4 案例对其进行测试时，结果如下。

要保存在（高度，宽度）坐标中的输入数组

1 2 3 4

5 6 7 8

15 16 17 18

25 26 27 28

当我加载保存的文件时，它显示在（高度，宽度）坐标中

2 3 4 5

3 4 5 6

15 15 16 17

25 26 27 28

这怎么可能？我无法弄清楚出了什么问题。图像阅读器被证明是安全的。我在 Oracle 的 JDK 1.7 上运行，但原始代码可能是过去编写的。但我希望这不会是问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:30:54.123

如果您能够使用 3rd 方库并决定利用[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)（Apache 2，开源和微型 - 一类），您可以在实现过程中删除所有复杂代码，它看起来像这样：

```
import org.imgscalr.Scalr.*;

public static boolean writeImage(String inputFileName, String outputFileName)
{
    BufferedImage inputImage = MyImageReader.readImageIntoBufferedImage( inputFileName );
    if ( inputImage == null )
    {
        System.out.println(" Could not open input image.");
        return false;
    }

    // This replaces everything in the middle of your original impl.
    BufferedImage outputImage = apply(inputImage, Scalr.OP_GRAYSCALE);

    File outputFile = new File( outputFileName );
    try
    {
        if ( !ImageIO.write( outputImage, "jpg", outputFile ))
        {
            System.out.println("Could not find image format for output image.");
            return false;
        }
    }
    catch ( Exception e )
    {
        System.out.println("Could not write output file.");
        return false;
    }

    return true;
} 
```

关键是[应用](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#apply%28java.awt.image.BufferedImage,%20java.awt.image.BufferedImageOp...%29)方法调用（将预定义的[GRAYSCALE](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#OP_GRAYSCALE)操作应用于图像）。

# php - 通过 Graph API 获取 facebook 用户的国家名称

> ID：13004398
> 
> 赞同：2
> 
> 时间：2012-10-22T02:45:36.667
> 
> 标签：php, facebook, facebook-graph-api

是否可以通过 Graph API 获取 facebook 用户的国家名称。? 我已经获得许可并获取其他相关信息。

此处的帖子[如何使用 facebook api connect 获取用户国家名称？](https://stackoverflow.com/questions/6409201/how-do-i-get-user-country-name-using-facebook-api-connect)谈论 FPL 。

我可以通过 Graph 来做到这一点，还是有任何其他可能的操作方式来推断用户所在的国家/地区。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:39:07.010

好的，我能做到！在这里为其他人发帖。

```
 $facebook_location = $facebook_profile['location'];
                $facebook_city_country = $facebook_location['name'];
                $city_country=explode(',',$facebook_city_country);
                $city=$city_country[0];
                $country=$city_country[1]; 
```

您可以参考[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)以获取有关如何使用位置 api 的详细文档。

# jquery - 排序或分页 ASP.net MVC Webgrid 时显示 Ajax 加载指示器

> ID：13004401
> 
> 赞同：5
> 
> 时间：2012-10-22T02:46:10.993
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc, webgrid

我可以使用默认设置轻松连接 webgrid 并添加 ajax。但是我一直在努力弄清楚的一件事是如何在网格通过 ajax 排序或分页时添加加载指示器。

有一个内置的回调函数可以很好地关闭 ajax 加载指示器，但我怎样才能轻松地打开它呢？

以下是我目前为我的 webgrid 提供的代码。

```
@{
    var grid = new WebGrid(rowsPerPage: Model.CountPerPage, ajaxUpdateContainerId: "GridArea");
    grid.Bind(Model.Users,
              autoSortAndPage: false,
              rowCount: Model.TotalCount
            );
    grid.Pager(WebGridPagerModes.All);
}
<div id="GridArea">
    @grid.GetHtml(htmlAttributes: new {id ="UserGrid"},
        columns: new [] {
        grid.Column("ID", canSort: false),
        grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("Email"),
        grid.Column("FullName", canSort: false)
        }
    )
</div> 
```

我试过使用以下方法，但这些都没有奏效。

```
<script>
    $(function () {
        $("#UserGrid").live("ajaxStart", function () {
            alert("start");
        });
    });
</script> 
```

这个第一次工作，但在网格进行第一次 ajax 刷新后将无法工作。

```
<script>
    $(function () {
        $('#UserGrid').ajaxStart(function () {
            alert("start");
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T03:09:07.010

这应该有效。

```
$(document).ajaxStart(function(){
     //Show your progressbar here
}).ajaxStop(function(){
     //Hide your progressbar here
}); 
```

您的第二种方法不起作用，因为在第一个 ajax 响应之后，DOM 被重新创建并且 .ajaxStart 事件绑定丢失。将它与全局文档对象绑定，它会一直存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:26:49.343

是的，上面的答案应该对您有所帮助。基本上有一个 Jquery API 可以处理从客户端到服务器的任何 ajax 请求。因此，当您执行任何 ajax 操作时，它将调用触发该函数。您可以将您的自定义 css/图像或一些您可以调用的函数作为 ajax 操作的指示器。

# objective-c - 获取编译器错误预期标识符/预期方法主体

> ID：13004406
> 
> 赞同：0
> 
> 时间：2012-10-22T02:47:13.267
> 
> 标签：objective-c, ios

我目前正在开发一个应用程序，我在情节提要中有两个主要视图；视图控制器和主视图控制器。

我在我的 MainViewController.m 中提出了`Expected Identifier`和错误。`Expected method body`

这是文件：

```
//
//  MainView.m
//  Ski Finder Intro
//
//  Created by Hunter Bryant on 10/20/12.
//  Copyright (c) 2012 Hunter Bryant. All rights reserved.
//

#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

- (id)initWithNibName:@"MainViewController" bundle:Nil  //Here are both of the errors.
{
    self = [super initWithNibName:@"MainViewController'" bundle:Nil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:06:58.597

您似乎混淆了方法声明（在这种情况下是覆盖），并且实际上在 Objective-C 中发送了一条消息。您的方法**主体**应如下所示：

```
- (id)initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle*)nibBundleOrNil //No more errors. 
```

要在消息中使用该方法，请调用`[[MyClass alloc]initWithNibName:@"MainViewController" bundle:nil];`

作为旁注：`-init...`类本身几乎从不调用风味消息，因为它没有什么意义，并且如果“正确”实现会创建一些有趣的保留周期。

# android - Android 上的 iText PDF 阅读器

> ID：13004410
> 
> 赞同：1
> 
> 时间：2012-10-22T02:47:58.757
> 
> 标签：android, pdf, itext

有没有在android中使用iText阅读PDF文档的简单示例？它将在android中显示pdf文档的内容。也许是一个可以在 PDF 中读取“Hello World”并将其显示在 android 中的示例。

我知道我要求太多，但我想向那些使用 iText 的人学习。我已经尝试了在 android [Example](http://technotransit.wordpress.com/2011/06/17/using-itext-in-android/)中使用 itext 的第一个现有示例，但我无法使其工作，可能是因为我使用的是 itext 5.3.3 最新版本。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T05:24:10.387

您可以使用 iText 创建图像，然后将其显示在滚动视图中。
请查看此链接，它将帮助您使用 iText 库从 PDF 创建图像。
[在 android 中使用 iText 读取或打开 PDF 文件](https://stackoverflow.com/questions/9291734/read-or-open-a-pdf-file-using-itext-in-android/19151358#19151358)

我希望这有帮助。

# makefile - 在make中分配一个变量

> ID：13004412
> 
> 赞同：0
> 
> 时间：2012-10-22T02:48:11.847
> 
> 标签：makefile, variable-assignment, gnu-make

我在makefile中有以下内容

```
ifneq ($(GIT_INFO),)
$(info $(GIT_INFO))
GIT_INFO:=Changed
$(info $(GIT_INFO))
endif 
```

在哪里，我的愿望是，如果`GIT_INFO`在命令行上设置为某些内容，则其值将填充为所需的字符串（具体不重要）。我添加了这些`$(info..)`行来验证这部分是否正在执行，并且确实如此，但是 的值`GIT_INFO`没有改变，事实并非如此。为什么不？我通过`GIT_INFO=true`命令行，两个地方都 print `true`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:26:12.573

从[手册](http://www.gnu.org/software/make/manual/make.html#Override-Directive)中，

> 如果已使用命令参数设置变量...，则忽略 makefile 中的普通赋值。如果您想在 makefile 中设置变量，即使它是使用命令参数设置的，您可以使用覆盖指令...

只需添加`override`：

```
ifneq ($(GIT_INFO),)
$(info $(GIT_INFO))
override GIT_INFO:=Changed
$(info $(GIT_INFO))
endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:26:22.013

你必须使用`override`：

```
ifneq ($(GIT_INFO),)
$(info $(GIT_INFO))
override GIT_INFO:=Changed
$(info $(GIT_INFO))
endif 
```

# node.js - 如何启用 Mongojs 安全选项？

> ID：13004413
> 
> 赞同：1
> 
> 时间：2012-10-22T02:48:13.037
> 
> 标签：node.js, mongodb, mongojs

考虑以下 nodejs 代码：

```
db = require('mongojs')('database', ['users, sessions']);
db.users.insert(
{
  'email': email,
  'password': password,
  'firstname': firstname,
  'lastname': lastname
}, 
function(err) {
  // will there ever be output?     
}); 
```

这种情况下，mongodb是否开启了安全模式输出错误？如果没有，我该如何启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:00:11.147

如果您指定回调，它会在 Mongojs 中自动启用。

[https://github.com/gett/mongojs/blob/master/index.js#L168](https://github.com/gett/mongojs/blob/master/index.js#L168)

# erlang - Mnesia：查询ordered_set 表时，是否以保证的顺序返回记录？

> ID：13004414
> 
> 赞同：3
> 
> 时间：2012-10-22T02:48:13.097
> 
> 标签：erlang, mnesia

当表是*ordered_set* 时，选择和读取（连同它们的dirty_ 表亲）会以主键的排序顺序返回记录吗？换句话说，如果我的选择匹配多个记录，是否可以保证返回记录的顺序？类似地，如果使用 index_read 并拉回多个记录，它们是否以任何特定方式相对于主键进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:31:21.273

简短的回答：是的。如果您使用ordered_set 并匹配多个对象，则它们将在返回时排序。

mnesia 主要围绕 ets 构建，文档将引导您查看 ERTS 用户指南和 ets 用户指南以了解实现细节。

来自[ets 用户](http://www.erlang.org/doc/man/ets.html#select-2)`select`指南：

> 在ordered_set 类型的表上，对象的访问顺序与第一次/下一次遍历的顺序相同。这意味着匹配规范将针对具有第一个/下一个顺序的键的对象执行，并且相应的结果列表将按照该执行的顺序。

# php - 卷曲功能不起作用

> ID：13004417
> 
> 赞同：1
> 
> 时间：2012-10-22T02:48:46.387
> 
> 标签：php, api, curl

我正在尝试从网站发送批量短信..所以我使用 api..我已经`$sendString`为使用 api..的确切 url 创建了变量。但由于某种原因，cURL 函数不适用于这个特定的 URL ...

我尝试使用这个 api 的另一个函数来检查我的信用余额并且它有效......我什至尝试将`$sendString`变量手动粘贴到链接框中并且它有效！所以我知道 cURL 和 api 都在工作，但不是为了从网站发送我的文本......有什么想法吗？

```
//Create a new cURL resource
$ch = curl_init();

//Set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "$sendString");
curl_setopt($ch, CURLOPT_HEADER, 0);

//Grab URL and pass it to the browser
curl_exec($ch);

//Close cURL resource, and free up system resources
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:17:06.410

使用[curl_setopt_array()](http://www.php.net/manual/en/function.curl-setopt-array.php)解析所有 url 字符串
像这样：

```
$curl_handle = curl_init();
$options = array
(
    CURLOPT_URL=>$url,
    CURLOPT_HEADER=>true,
    CURLOPT_RETURNTRANSFER=>true,
    CURLOPT_FOLLOWLOCATION=>true,
    CURLOPT_USERAGENT=>$browser_id
);
curl_setopt_array($curl_handle,$options);
$server_output = curl_exec($curl_handle);
curl_close($curl_handle);

var_dump($server_output) 
```

# php - 按 CURDATE() 过滤查询

> ID：13004421
> 
> 赞同：3
> 
> 时间：2012-10-22T02:49:15.490
> 
> 标签：php, mysql, sql

```
SELECT *
FROM `summary`
WHERE submit_date = curdate()
AND submit_date > '06:00'
AND submit_date < '21:00'
LIMIT 0 , 30 
```

这是取消包括今天在内的所有日期？submit_date 是一个显示有 DATETIME 的列，它没有像应有的那样过滤掉它们。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:51:13.923

您的 2 个限制条件应与列返回的值进行比较`TIME()`，`DATETIME`第一个条件应仅限于该`DATE()`部分。

```
SELECT *
FROM `summary`
WHERE
  /* Truncate to the date only to compare against CURDATE() */
  DATE(submit_date) = curdate()
  /* And truncate to the TIME() to compare against these time literals. */
  /* note also that the time literals may need seconds as well */
  AND TIME(submit_date) > '06:00:00'
  AND TIME(submit_date) < '21:00:00'
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:52:50.333

您应该只比较 submit_date 的日期部分与当前日期的日期部分，然后是小时部分，如下所示：

```
SELECT *
FROM `summary`
WHERE 
    DATE(submit_date) = curdate()
AND HOUR(submit_date( BETWEEN 6 AND 21
LIMIT 0 , 30 
```

# date - 如何使用awk从文本文件文件中的给定日期提取一个人的年龄并进行比较

> ID：13004423
> 
> 赞同：0
> 
> 时间：2012-10-22T02:49:17.290
> 
> 标签：date, awk, extract

我有一个文本文件，其中包含以下格式的多个字段。姓名：电话：地址：出生日期：工资 出生日期的格式为 mm/dd/yy。我不知道如何通过从当年减去他们的出生年份来计算特定人的年龄。我需要提取年龄，然后将其与某个年龄组进行比较，比如 50 岁。我尝试了一些东西，但它给了我奇怪的数字，比如 awk -F: '{print $4-d}' "d=$(date)" filename

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:56:32.370

您可能想尝试：

```
awk -F: -v year=$(date +"%Y") '{ split($4, dob, "/"); print $1, "is", year-dob[3], "years old" }' file.txt 
```

***编辑1：***

要简单地打印 60 岁以下的人的列表，请尝试：

```
awk -F: -v year=$(date +"%Y") '{ split($4, dob, "/"); if (year-dob[3] <= 60) print $1 }' file.txt 
```

解释：

我假设对`awk`. 该`-v`选项允许`awk`从 shell 中读取变量。在这种情况下，`date +"Y"`只需返回当前年份。`awk`具有`split`允许您拆分字段的功能。在这种情况下，包含我们日期的第四个字段`/`将月/日/年分开。`split`将事物拆分为数组。在本例中，我将数组命名为`dob`（出生日期）。第三个字段（索引 1）包含出生年份。然后在有条件的情况下进行一些快速数学运算，以检查该人的年龄是否为 60 岁以上。如果他在第一个字段中打印出他的名字。

***编辑2：***

再考虑一下您的问题后，很明显上述方法实际上并不能完美地计算事物。这是一项艰巨的快速工作（对不起，好吧......）。因此，这是一个更新版本，它将更加准确。像这样运行：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
BEGIN {
    FS=":"
    "date +\"%s\"" | getline cdate
}

{
    rdate = gensub(/([0-9]+)\/([0-9]+)\/([0-9]+)/, "\\3-\\1-\\2", "g", $4)
    cmd = "date -d " rdate " +\"%s\""

    while (( cmd | getline result ) > 0 ) {

        if ((cdate - result) / 31556926 <= 60) {
            print $1
        }
    }
} 
```

***编辑3：***

或者没有外部命令和 getline：

```
BEGIN {
    FS=":"
    cdate = systime()
}

{
    rdate = gensub(/([0-9]+)\/([0-9]+)\/([0-9]+)/, "\\3 \\1 \\2 0 0 0", "g", $4)
    result = mktime(rdate)

    if ((cdate - result) / 31556926 <= 60) {
       print $1
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:25:44.283

使用 GNU awk（应该可以工作但未经测试，因为您没有提供任何示例输入和预期输出）：

```
BEGIN{
   FS = ":"
   nowSecs  = systime()
   nowYear  = strftime("%Y",nowSecs)
   nowDay   = strftime("%j",nowSecs)
}

{
   # input date format is MM/DD/YY
   dobSpec = gensub(/([0-9]+)\/([0-9]+)\/([0-9]+)/, "\\3 \\1 \\2 0 0 0", "", $4)
   dobSecs = mktime("20" dobSpec)

   if ( (dobSecs > nowSecs) || (dobSecs < 0) ) {
      # guessed the wrong century so try again
      dobSecs = mktime("19" dobSpec)
   }

   dobYear = strftime("%Y",dobSecs)
   dobDay  = strftime("%j",dobSecs)

   diffYears = nowYear - dobYear
   diffDays  = nowDay  - dobDay

   age = diffYears + (diffDays >= 0 ? 1 : 0)

   if ( age < 60 ) {
      print
   }

} 
```

作为替代方案，这是@steve 的解决方案在不使用外部调用 shell 日期和后续 getline 的情况下的样子：

```
BEGIN {
    FS=":"
    cdate = systime()
}

{
    rdate = gensub(/([0-9]+)\/([0-9]+)\/([0-9]+)/, "\\3 \\1 \\2 0 0 0", "g", $4)
    result = mktime(rdate)

    if ((cdate - result) / 31556926 <= 60) {
       print $1
    }
} 
```

I didn't go that route as I didn't want to use the seconds-per-year approximation since I think there are edge cases where that wouldn't work. Like @steve's original, the second solution above will need to be modified to provide the missing century in the input year just like I did in my first solution above.

# java - 这个错误信息是什么意思？- sqlite3_exec - 无法设置同步模式 = 1（正常）

> ID：13004424
> 
> 赞同：3
> 
> 时间：2012-10-22T02:49:25.333
> 
> 标签：java, android, sqlite

我正在尝试在`"Service"`失败中打开一个 SQLiteDatabase，但出现以下异常：

```
10-21 19:33:23.547: E/SqliteDatabaseCpp(31208): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
10-21 19:33:23.547: E/SQLiteDatabase(31208): Failed to open the database. closing it.
10-21 19:33:23.547: E/SQLiteDatabase(31208): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1135)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1086)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1173)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:858)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
10-21 19:33:23.547: E/SQLiteDatabase(31208):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157) 
```

有人可以解释一下这是什么意思吗？以及如何解决？数据库在`MainActivity`和中打开`Service`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:32:24.387

我认为这是当数据库被一个线程（活动？）使用（锁定）时发生的访问冲突，另一个线程（服务？）试图使用（锁定）它但失败了。

您可以将自己的 SQLiteOpenHelper 做成一个单例类，然后在活动和服务之间共享，然后该类会为您妥善处理冲突。请参阅[此线程中的讨论](https://stackoverflow.com/questions/10371233/where-to-close-the-sqliteopenhelper-if-i-am-using-a-singelton-one)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:41:38.723

再次尝试打开数据库时，检查数据库是否被其他线程打开但未关闭。如果是，请在使用后尝试关闭它。

# javascript - eval(string) 和 eval(function) 的区别

> ID：13004425
> 
> 赞同：5
> 
> 时间：2012-10-22T02:49:34.077
> 
> 标签：javascript, eval

我有 Web 应用程序，它使用将`jsonp`javascript 代码返回给客户端。

这是我返回的代码（使其不可读）：

```
com.xx.load('xx','var name="hguser";function data(x){console.info(x); }') 
```

在`load`函数中，我们`eval`编写代码。

但是，我们发现它不可读，但不可调试。

所以我想知道我们是否可以使用这个：

```
com.xx.load('xx',function(){
  var name='hguser';
  function data(x){
    console.info(x); 
  }
}); 
```

然后，在代码字符串的`load`函数中`eval`，我们现在将`eval`创建一个函数对象。

这可能吗？

他们的意思是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:01:34.067

你当然可以。这就像在 JavaScript 中[模拟动态范围。](https://stackoverflow.com/q/10060857/783743 "是否可以在不使用 eval 的情况下在 JavaScript 中实现动态范围？ - 堆栈溢出")需要注意的几点：

1.  你不能只是直接`eval`一个函数。您需要将其转换为字符串。使用`eval(String(f))`.
2.  为函数`f`命名。你不能这样做`var g = eval(String(f))`。使用函数名。
3.  当心。该函数`f`将有权访问您的所有局部变量。

例如：

```
eval(String(getAdder()));

alert(add(2, 3));

function getAdder() {
    return function add(a, b) {
        return a + b;
    };
} 
```

你可以在这里看到演示：http: [//jsfiddle.net/5LXUf/](http://jsfiddle.net/5LXUf/)

只是一个想法 - 为什么不直接调用函数对象而不是评估函数对象呢？这将为您提供堆栈跟踪，并且更加简单和安全（该函数将无法访问您的局部变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:00:48.080

检查以下简化[代码](http://jsfiddle.net/oceog/XnLCb/)：正如我在评论中所说，第二种方法不起作用，因为它返回函数结果，

```
var my_load=function(arg1,for_eval) {
     eval(for_eval);    
     data(1);
}

my_load('xx','var name="hguser";function data(x){console.info(x); }');

my_load('xx',function(){
  var name='hguser';
  function data(x){
    console.info(x); 
  }
});​ 
```

# android - 限制请求图上的结果

> ID：13004429
> 
> 赞同：3
> 
> 时间：2012-10-22T02:50:22.273
> 
> 标签：android, facebook, facebook-graph-api

我正在使用适用于 Android 3.0 的 Facebook SDK，我想做的是获取 10 张朋友的照片。如何将限制参数添加到请求中？

```
for (GraphUser user : users) {
  Request request = Request.newGraphPathRequest(
    session,user.getId()+"/photos",new Request.Callback(){...});

  //requests is a collection of requests
  requests.add(request);
}
Request.executeBatchAsync(requests); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:22:28.953

要为朋友只获取 10 张照片，请执行以下操作：

```
 Bundle params = new Bundle();
    params.putString("limit", "10");
    request.setParameters(params);

    requests.add(request);
} 
```

# html - 在 flex 中创建一个类似表的结构

> ID：13004430
> 
> 赞同：0
> 
> 时间：2012-10-22T02:50:23.167
> 
> 标签：html, apache-flex

我想像在 html 中那样在表格中创建一个表格。以下是我需要的基本结构！[在此处输入图像描述][1]

[1]： http: [//i.stack.imgur.com/H6b3f.png](http://i.stack.imgur.com/H6b3f.png)
如何编码这样的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:54:50.827

使用**[Spark Form](http://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e973827a8e912ac2b325a4-8000.html)**组件。

示例（从帮助页面上的示例无耻地修改）：

```
<s:Form id="myForm" width="450" height="125">
    <s:FormHeading label="My Form Title" />
    <s:FormItem label="Name:">
        <s:TextInput id="name" />
        <s:helpContent>
            <s:Label text="Enter your first and last names" />
        </s:helpContent>
    </s:FormItem>
</s:Form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:12:18.760

> ```
>  <div id="header_block">
>       ...... Header_block Contents
>     </div>
>    <div id="wrapper">
>       ...... Entire Page
>     </div> 
> ```

css

> ```
>  #header_block
>      {
>            position:fixed;
>            width:100%;
>            float:left;
>       } 
> ```

# terminal - 无法使用 AppleScript 解压缩文件

> ID：13004432
> 
> 赞同：0
> 
> 时间：2012-10-22T02:50:53.797
> 
> 标签：terminal, applescript, directory, unzip, minecraft

我正在尝试制作一个使用变量将文件下载到下载文件夹的 AppleScript

```
set downboadFolder to (path to downloads folder) & "Technic-Launcher-OSX.zip" as text
set downloadFolder to downboadFolder as alias
#I downloaded Technic-Launcher-OSX.zip earlier in the code and that works 
```

然后我使用这段代码

```
tell application "Finder"
    try
        move downloadFolder to targetFolder
    end try
end tell 
```

将文件移动到目标文件夹

```
try
  set targetFolder to (choose folder)
end try 
```

我用这个完成了代码。

```
set targetFoldera to targetFolder & "Technic-Launcher-OSX.zip" as text
set targetFolderb to targetFoldera as alias
do shell script "/usr/bin/unzip -d /" & (targetFolder) & " " & targetFolderb 
```

这应该将 foldera 设置为 /thefoldertheychoose/TechnicLaunchesOSX.zip 然后将 folderb 设置为 foldera 作为别名然后将文件解压缩到他们选择的文件夹当我运行它时，我得到了这个

```
unzip:  cannot find or open HD:Users:username:Documents:,     HD:Users:myusername:Documents:.zip or HD:Users:usnername:Documents:.ZIP." number 9
#I chose Documents as the folder 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:11:02.847

尝试 ：

```
set downboadFolder to (path to downloads folder as text) & "Technic-Launcher-OSX.zip"
set targetFolder to (choose folder)
tell application "Finder" to set targetFile to move downboadFolder to targetFolder
set {targetFile, targetFolder} to {(targetFile as alias)'s POSIX path, targetFolder's POSIX path}
do shell script "cd " & quoted form of targetFolder & " ; /usr/bin/unzip " & quoted form of targetFile 
```

# java - 在 ActionListener 中添加 GridBagLayout 时遇到问题

> ID：13004436
> 
> 赞同：10
> 
> 时间：2012-10-22T02:51:16.347
> 
> 标签：java, swing, jframe, actionlistener, gridbaglayout

我有一个`JMenuItem`带有一个的`ActionListener`，在这个`ActionListener`我想添加一个`GridBagLayout`到我的`frame`（可能有也可能没有一个内容窗格尚未添加 - 出于测试目的它没有），然后添加`components`到那个`frame`。on it 的设计是`frame works`自己的，但我想`trigger`从`ActionListener`on a`JMenuItem`开始，这就是我遇到问题的地方。它不会从`ActionListener`. 我已经尝试从 AL 类中的不同方法运行相同的代码，但这也不起作用。

`ActionListener`当我完全注释掉时，`JLabel`我想测试的将添加到`GBL`正确的位置，以及系统`prints`我的`debug`行**here**和**here2**。没有语法错误被`compiler`. 这会产生所需的结果，并打印标签。（请参阅下面的图片，了解当我完全注释掉 AL 时会发生什么。）有问题的代码片段（在哪个框架中是 my `JFrame`）如下：

![在此处输入图像描述](../Images/6bb9421b30ea9aa00c303d6b9d5e0523.png)

```
// (frame created, menus added, etc.) ...
JMenuItem vPoke1Item = new JMenuItem("Pokemon 1");
vPoke1Item.setActionCommand("poke1");
viewMenu.add(vPoke1Item);

//Setup GBL to view stats for Pokemon 1
  vPoke1Item.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e)
      {
//        debug output
          System.out.println("here");

//        Set up the content pane
          frame.getContentPane().removeAll();
          GridBagLayout gbl = new GridBagLayout();
          GridBagConstraints gbc = new GridBagConstraints();
          Container pane = frame.getContentPane();
          pane.setLayout(gbl);

//        Make a StatCalcObject (all my labels/fields are already initialized)
          StatCalc1 sc1 = new StatCalc1();

//        Add it to pane
          gbc.gridx = 0;gbc.gridy = 0;gbl.setConstraints(sc1.speciesL, gbc);
          pane.add(sc1.speciesL);
          frame.revalidate();
          frame.repaint();

//        debug output
          System.out.println("here2");
      }
  });
// (etc.) 
```

现在，当我运行此代码时，我仍然可以打印“here”和“here2”的调试行，因此它告诉我 ActionListener 运行良好。但是标签没有出现。编译器仍然没有发现语法错误。所以我在这里挠头。我究竟做错了什么？我希望这段代码片段足以理解问题，但如果你想要完整的代码，我可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:46:12.533

如果您使用的是固定大小的窗口，如果您更换一切都会正常工作

```
frame.revalidate();
frame.repaint(); 
```

和

```
pane.invalidate();
pane.validate(); 
```

或者

```
pack(); 
```

如果您没有固定大小的框架。请注意，JFrame 或 Container 不支持重新验证。更换也比较好

```
gbl.setConstraints(sc1.speciesL, gbc);
pane.add(sc1.speciesL); 
```

和

```
pane.add(sc1, gbc); 
```

以获得更好的代码风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:28:58.660

查看调用方法 pane.add(sc1.speciesL); 时发生了什么

Container.add(sc1.speciesL, null, -1) 接下来调用

然后 Container.addImpl( Component comp, Object constraints, int index )

然后是 gbl.setConstraints(sc1.speciesL, gbc); 被null取代。

```
 if (layoutMgr instanceof LayoutManager2) {
    ((LayoutManager2)layoutMgr).addLayoutComponent(comp, constraints);
  } 
```

然后面板没有显示您新添加的组件，因为 GridBagConstraints 现在为空

而且你实际上不需要强迫

```
 frame.revalidate();
  frame.repaint();
  frame.pack(); 
```

您只需使用正确的方法将新组件正确添加到容器中：

```
pane.add(sc1.speciesL, gbc); 
```

并删除无用的

```
gbl.setConstraints(sc1.speciesL, gbc); 
```

# python - python中的C双重限制

> ID：13004437
> 
> 赞同：3
> 
> 时间：2012-10-22T02:51:19.570
> 
> 标签：python, c, integer, double, long-integer

我知道 python 能够处理任意大整数，那么为什么在使用科学记数法时它不给我一个呢？为什么 1e23 与 10**23 有什么不同？

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> for x in range(30):
...   x1 = eval('long(1e{})'.format(x))
...   x2 = eval('long(1{})'.format('0' * x))
...   print x1, 'OK' if x1 == x2 else 'YUCK!'
... 
1 OK
10 OK
100 OK
1000 OK
10000 OK
100000 OK
1000000 OK
10000000 OK
100000000 OK
1000000000 OK
10000000000 OK
100000000000 OK
1000000000000 OK
10000000000000 OK
100000000000000 OK
1000000000000000 OK
10000000000000000 OK
100000000000000000 OK
1000000000000000000 OK
10000000000000000000 OK
100000000000000000000 OK
1000000000000000000000 OK
10000000000000000000000 OK
99999999999999991611392 YUCK!
999999999999999983222784 YUCK!
10000000000000000905969664 YUCK!
100000000000000004764729344 YUCK!
1000000000000000013287555072 YUCK!
9999999999999999583119736832 YUCK!
99999999999999991433150857216 YUCK! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T02:52:17.353

`1e23`被解释为浮点数，而`10**23`整数是整数幂（即整数）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T03:00:06.697

Python 浮点类型使用系统架构原生的数字进行计算 - 通常是此处定义的 64 位浮点： [http](http://www.ee.unb.ca/tervo/ee6373/IEEE64.htm) : //www.ee.unb.ca/tervo/ee6373/IEEE64.htm 我不确定它是否可以构建默认情况下使用其他浮点数据类型 - 但我知道如果运行 Python 的体系结构在 F>p> 数字处理方面具有特殊性，那么这些将出现在 Python 中 - 因此，在 x86 硬件中运行的 Python 程序可能会有所不同在 PPC、ARM 或其他 CPU 中运行的那些。

但是，如果您想在 Python 中使用任意精度的十进制数，则可以使用 Decimal 模块。截至最近发布的 Python 3.3，十进制数的速度与本机浮点数的速度相当（在 Python 程序中 - 能够使用诸如 SIMD 指令之类的 FP 加速的本机代码会快得多）

# asp.net - 如何使用 $.ajax() 将字符串传递给 C#/ASP.NET？

> ID：13004440
> 
> 赞同：3
> 
> 时间：2012-10-22T02:51:24.967
> 
> 标签：asp.net, ajax, string, parameter-passing, webmethod

这有效

```
[System.Web.Services.WebMethod]
public static string Save_HH()
{
    return "abc";
} 
```

这不起作用

```
[System.Web.Services.WebMethod]
public static string Save_HH(string myString) // (int i, string s) (object o) etc
{
    return "abc";
} 
```

这是ajax调用

```
$.ajax({
    type: "POST",
    url: "Default.aspx/Save_HH",
    data: {}, // data: JSON.stringify({abc:123}),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (response) {
        btn.css("visibility", "visible");
        $("#ta_response").text(response.d);
    },
    fail: function () {
        alert("fail");
    },
}); 
```

此错误消息是 POST localhost(cant post link on my new account)/Default.aspx/Save_HH 500 (Internal Server Error)

* * *

在这一点上，这个问题似乎相当清晰和简洁，但我只是被阻止按原样发布它。我不想多说什么，因为我认为这是一个结构良好的问题，说其他任何事情都会让读者感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:59:23.080

如果你替换这个：

```
data: {}, // data: JSON.stringify({abc:123}), 
```

有了这个：

```
data: { myString : "test" } 
```

它应该开箱即用。

请记住，您通过`$.ajax`调用传递的参数的名称和类型必须与您在`WebMethod`. 否则将不会发生绑定，并且您的`myString`参数将`null`（在字符串类型的情况下）在 WebMethod 内`Save_HH`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:57:04.580

```
jQuery.ajax( url [, settings] ) 
```

`url`包含请求发送到的 URL 的字符串。
`settings`一组配置 Ajax 请求的键/值对。所有设置都是可选的。可以使用 $.ajaxSetup() 为任何选项设置默认值。

# maven - maven如何对版本号进行排序？

> ID：13004443
> 
> 赞同：31
> 
> 时间：2012-10-22T02:51:36.123
> 
> 标签：maven, maven-3

Maven 似乎有能力指示一系列版本，例如`<version>[1.2.3,)</version>`当没有所有开源软件包都遵循的一致版本控制方案时，maven 如何确定什么是新版本或旧版本。例如

*   朱尼特`4.10`
*   slf4j`1.7.2`
*   休眠`4.1.7.Final`
*   春天`3.1.2.RELEASE`

maven 如何计算 maven 中旧版本和新版本的包？如果包使用字母作为版本号，如 A、B、C 或 A2、A2、A4 等。

是否应该有标准的官方方式来在 Maven 中版本包？常见的开源软件包，如 spring 和 hibernate 是否忽略了这个版本控制约定？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-07-17T18:32:17.717

从 3.0 版开始，Maven 使用一致的系统来比较各个版本和版本范围的版本号。一旦您了解了一些陷阱，该系统现在就很有意义了。

现在所有比较都由[ComparableVersion](https://maven.apache.org/ref/3.3.3/maven-artifact/apidocs/org/apache/maven/artifact/versioning/ComparableVersion.html)完成，它说：

> *   ' `-`'（破折号）和' `.`'（点）分隔符的混合，
> *   字符和数字之间的转换也构成了分隔符：`1.0alpha1`=>`[1, 0, alpha, 1]`
> *   无限数量的版本组件，
> *   文本中的版本组件可以是数字或字符串，
> *   检查字符串是否有众所周知的限定符，并且限定符排序用于版本排序。众所周知的限定符（不区分大小写）是：
>     *   `alpha`或者`a`
>     *   `beta`或者`b`
>     *   `milestone`或者`m`
>     *   `rc`或者`cr`
>     *   `snapshot`
>     *   （空字符串）或`ga`或`final`
>     *   `sp`
> *   在已知限定符之后考虑未知限定符，具有词法顺序（始终不区分大小写），
> *   破折号通常在限定符之前，并且总是不如以点开头的东西重要。

这意味着版本按以下顺序出现，我认为这很有意义，除了中间的 1.0-SNAPSHOT：

*   `1.0-beta1-SNAPSHOT`
*   `1.0-beta1`
*   `1.0-beta2-SNAPSHOT`
*   `1.0-rc1-SNAPSHOT`
*   `1.0-rc1`
*   `1.0-SNAPSHOT`
*   `1.0`
*   `1.0-sp`
*   `1.0-whatever`
*   `1.0.1`

我在这一切中发现的主要问题是`snapshot`or之后*，* 所以你不能有一个开发版本，然后发布or并且让 Maven 明白那些是后来的。`beta``rc``1.0-SNAPSHOT``1.0-beta1``1.0-rc1`

另请注意，`1.0-beta-1`与 完全相同`1.0beta1`，并且与or`1.0`完全相同。`1``1.0.0`

版本范围现在（几乎）也可以按照您期望的方式工作。例如，`[1.0-alpha-SNAPSHOT,1.0]`将找到`1.0-beta1-SNAPSHOT`、`1.0-beta1`、`1.0-rc1-SNAPSHOT`、或`1.0-rc1`，更喜欢后面的项目而不是前面的项目。M2Eclipse 等完全支持这一点。`1.0-SNAPSHOT``1.0``mvn versions:resolve`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-02T00:52:53.210

这是一个直接针对Maven的[ComparableVersion类编写的测试。](https://github.com/apache/maven/blob/master/maven-artifact/src/main/java/org/apache/maven/artifact/versioning/ComparableVersion.java)

```
package org.codehaus.mojo.buildhelper.versioning;

import org.apache.maven.artifact.versioning.ComparableVersion;
import org.junit.Assert;
import org.junit.Test;

public class TempTest {
    @Test
    public void testVersions() {
        Assert.assertTrue(new ComparableVersion("1.0-beta1-SNAPSHOT").compareTo(
                new ComparableVersion("1.0-beta1")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-beta1").compareTo(
                new ComparableVersion("1.0-beta2-SNAPSHOT")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-beta2-SNAPSHOT").compareTo(
                new ComparableVersion("1.0-rc1-SNAPSHOT")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-rc1-SNAPSHOT").compareTo(
                new ComparableVersion("1.0-rc1")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-rc1").compareTo(
                new ComparableVersion("1.0-SNAPSHOT")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-SNAPSHOT").compareTo(
                new ComparableVersion("1.0")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0").compareTo(
                new ComparableVersion("1")) == 0);
        Assert.assertTrue(new ComparableVersion("1.0").compareTo(
                new ComparableVersion("1.0-sp")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-sp").compareTo(
                new ComparableVersion("1.0-whatever")) < 0);
        Assert.assertTrue(new ComparableVersion("1.0-whatever").compareTo(
                new ComparableVersion("1.0.1")) < 0);
    }
} 
```

该测试断言以下版本被 Maven 认为是从最低到最高的：

*   1.0-beta1-快照
*   1.0-beta1
*   1.0-beta2-快照
*   1.0-rc1-快照
*   1.0-rc1
*   1.0-快照
*   1.0 和 1（它们是相等的）
*   1.0-sp
*   1.0-随便
*   1.0.1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-18T11:08:39.143

您关于使用主要/次要/增量/等的假设是完全错误的。比较在包含实现的[ComparableVersion中完成。](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.maven/maven-artifact/3.0/org/apache/maven/artifact/versioning/ComparableVersion.java)ctor 将调用`parseVersion(...)`which uses which uses `ComparableVersion`which is stored as instance in `DefaultArtifactVersion`and it's used during the`compareTo(..)`

有诸如`getMajor..`等之类的部分，但这些部分无法正常工作。这就是为什么会[被标记为 deprecated](https://issues.apache.org/jira/browse/MNG-6096)的原因。

Stehpen Collony 提供的信息适用于 Maven 2，但不再适用于 Maven 3。

# php - 为什么“where”属性的顺序不重要？

> ID：13004454
> 
> 赞同：1
> 
> 时间：2012-10-22T02:54:33.113
> 
> 标签：php, codeigniter

最近我开始构建一个过滤器，在 sphinx 中对我的数据进行排序，但问题是 - 我遇到了一个有趣的 CI 错误（？）。我传递属性的顺序无关紧要，`WHERE`因为 CI 只会自行对结果进行排序。

为什么这两个查询都返回相同的旧结果，有没有办法解决这个问题？

```
$a = $this->db->from('table')
              ->where('id', 1)
              ->or_where('id', 2)
              ->get()->result();

$b = $this->db->from('table')
              ->where('id', 2)
              ->or_where('id', 1)
              ->get()->result();

if ($a == $b) echo 'Equal'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:04:52.420

生成的 sql 查询产生相同的结果集，这就是对象集相同的原因。这与 CI 无关。大多数 sql dbs 将优化 where 参数以最有效地执行，而不是按您指定它们的顺序（除非括号或操作规则的顺序）。

如果要从 sql db 更改结果集的顺序，则需要使用 order by。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:07:34.063

自行订购结果。就像是：

```
order_by("id=1", "desc"); 
```

我不熟悉它是否在 CI 中以这种方式工作（我不熟悉它），但在纯 MySQL 中`order by id=1 DESC`会起作用。

# php - PHP ajax bug 加载更多

> ID：13004457
> 
> 赞同：1
> 
> 时间：2012-10-22T02:55:12.543
> 
> 标签：php, javascript, jquery, html

嗨，我有一个应用程序，如果用户单击加载更多按钮，它将显示来自数据库的数据，但问题是一旦获取了所有数据，该按钮仍会显示，如果用户再次单击该按钮，则会重复相同的数据。这是代码，但我不确定问题出在哪里。

从json获取数据并加载到，按钮点击触发json获取数据事件

```
<ul class="module-list">                            

</ul>
<a class="btn-btn blue-blue more-wishlists" href="#" onclick="javascript:getRecentActivity(event)">
<span data-component-bound="true" class="loading-msg">See more recent activity</span>
</a> 
```

Javascript

```
$(document).ready(function(){
getRecentActivity(null);
});

function getRecentActivity(event)
{
     if (event != null){
            disabledEventPreventDefault(event);
        }
    $.ajax({
        url:"<?=$this->baseUrl('activity/activityfeed')?>",
        data:{'total':totalRecordsView},
        dataType:"json",
        type:"POST",
        success:function(data){
            totalRecordsView = data['total_view'];

            data = data['result'];

            var activityHtml =  ''

            for(var i=0; i<data.length; i++){   
            activityHtml += '<li class="clearfix media-block review-block module-li" >'+
                '<div class="user-info-activity">'+
                    '<div class="photo-box pb-60s">'+
                        '<a href="#">';

            if(data[i]['img_url']){
                    activityHtml +='<img class="photo-img" alt="" height="60" src="'+data[i]['img_url'][0]['u_img']+'" width="60">';
                } else {
                    activityHtml +='<img class="photo-img" alt="" height="60" src="'+data[i]['review'][0]['u_img']+'" width="60">';
                }

            activityHtml +='</a></div></div>'+
                '<div class="media-story">'+
                    '<div class="feed-content">'+
                        '<div class="item-title clearfix">'+
                            '<div class="title-text">';

            if(data[i]['img_url']){
            activityHtml += '<a class="user-name"'+
                'href="user/'+data[i]['img_url'][0]['user_unique_name']+'" data-hovercard-id="">'+
                    ''+data[i]['img_url'][0]['name']+'</a> '+
                        ' added 1 photo for <a class="user-name" href="business/'+data[i]['img_url'][0]['business_name_url']+'">'+data[i]['img_url'][0]['business_name']+'</a></div>'+
                                '<div class="timestamp fine-print"><abbr class="timeago" '+
                    'title="'+getTime(data[i]['date_added'])+'">'+getTime(data[i]['date_added'])+'</abbr></div>'+
                    '</div></div>'+ 
                        '<div class="item-description">'+                           
                            '<ul class="photo-list large clearfix"><li>'+
                                '<div class="photo-info-box">'+
                    '<img src="../public/assest/business/biz_'+data[i]['img_url'][0]['photo_url']+'" alt="Photo of Community Lending Network" width="120" height="120">'+
                        '</div></li></ul>';

                } else {
                    if(data[i]['review'][0]['u_img_rating'] == 50){
                        var title = '5.0 star rating';
                    } else {
                        title = 'x star rating';
                        }
                            activityHtml += '<a class="user-name"'+
                                'href="user/'+data[i]['review'][0]['user_unique_name']+'" data-hovercard'+
                                    '-id="EObvJWZ_R5SFg7L1ePTpKA">'+data[i]['review'][0]['name']+'</a> '+
                                        ' reviewed '+
                    '<a class="biz-name" href="business/'+data[i]['review'][0]['business_name_url']+'" data-hovercard-id="t61v_1fZbpPa4cyST4Dy8g">'+
                            data[i]['review'][0]['business_name']+
                                '</a></div>'+

            '<div class="timestamp fine-print"><abbr class="timeago" '+
                'title="'+getTime(data[i]['date_added'])+'">'+getTime(data[i]['date_added'])+'</abbr></div></div></div>'+

                '<div class="item-description">'+
                    '<div class="rating">'+
                            '<i class="star-img stars_4" title="'+title+'">'+
                                '<img alt="'+title+'" class="" height="15"'+
                    'src="../public/images/star/stars_'+data[i]['review'][0]['u_img_rating']+'.gif"'+
                    'width="75"></i></div>'+

                '<p class="review-expandable" data-component-bound="true">'+
                '<span>'+data[i]['review'][0]['review_desc']+'</span></p>' +

'<div class="rateReview clearfix" id="'+data[i]['review_id']+'" data-component-bound="true">'+
                '<p class="review-intro review-message saving-msg" data-component-bound="true">Was this review ...?</p>'+
                '<ul data-component-bound="true" class="voteset'+data[i]['review_id']+'">'+
                    '<li class="useful ufc-btn" id="1">'+
                        '<a href=javascript:vote('+data[i]['review_id']+',"useful") rel="useful"><span>Useful</span></a>';

        if(data[i]['vote'][0]['useful'] == null){
            activityHtml +='<span></span>';
                } else {
                    activityHtml +='<span>('+data[i]['vote'][0]['useful']+')</span>';
                }

                    activityHtml +='</li>'+
                    '<li class="funny ufc-btn" id="2">'+
                        '<a href=javascript:vote('+data[i]['review_id']+',"funny") rel="funny"><span>Funny</span></a>';

        if(data[i]['vote'][0]['funny'] == null){
            activityHtml +='<span></span>';
                } else {
                        activityHtml +='<span>('+data[i]['vote'][0]['funny']+')</span>';
                    }

                    activityHtml +='</li>'+
                    '<li class="lame ufc-btn" id="3">'+
                        '<a href=javascript:vote('+data[i]['review_id']+',"lame") rel="lame"><span>Lame</span></a>';
                        if(data[i]['vote'][0]['lame'] == null){
                        activityHtml +='<span></span>';
                    } else {
                        activityHtml +='<span>('+data[i]['vote'][0]['lame']+')</span>';
                    }

                    activityHtml +='</li>'+
                '<span class="vote'+data[i]['review_id']+'"></span></ul>'+
                    '</div></div></div></div></li>';

                                        }

            }

            $('.module-list').append(activityHtml);

            if(totalRecords <= totalRecordsView){

                $('.btn-btn').text('Nothing beyond here ...');
                $('.btn-btn').removeAttr('onclick href');
            }
    }

    });

} 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:20:30.067

尝试通过检查子元素的数量来包装您的 getRecentActivity 函数：

```
 if ($('.module-list').children().length === 0) {

    //existing getRecentActivity() code here

} 
```

这应该可以工作，因为您的 AJAX 调用正在附加到`.module-list` `ul`元素，并且在调用成功完成一次后它不应再为空。

这里有更详细的解释：[我如何计算孩子的数量？](https://stackoverflow.com/questions/3546659/how-can-i-count-the-number-of-children)

* * *

另外，几点建议：

1) 在 jQuery 中，您可以通过在 $(document).ready() 块内设置事件处理程序来避免使用内联“onclick”属性，如下所示：

```
 $(document).ready(function () 

    $('.more-wishlists').click(function (event) {  

        //put the contents of your "getRecentActivity" function here
        //and it will be called when an element with the class
        //"more-wishlists" is clicked

    });

});
```

2）考虑使用一个`<button>`元素而不是`<a>`你现在使用的：

```
 <button class="btn-btn blue-blue more-wishlists" type="button">
    See more recent activity
  </button> 
```

从语义上讲，它可能更有意义，并且可能还会减少标记的数量。

# apache-flex - List labelField 中的两个字段

> ID：13004458
> 
> 赞同：0
> 
> 时间：2012-10-22T02:55:28.930
> 
> 标签：apache-flex, flash-builder

我与 Flex 一起工作，我制作了一个列表，并且我有一个带有 xml 文件的数据库。我给列表一个labelField。

我不知道如何将 2 个字段写入列表。我只能将一个字段写入列表。

如何在我的代码中列出两个标签字段：

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayList;
        import mx.events.FlexEvent;

        import spark.components.ViewMenu;
        import spark.components.supportClasses.TextBase;
        import spark.components.supportClasses.ViewNavigatorAction;
        import spark.events.IndexChangeEvent;

        protected function view1_creationCompleteHandler(event:FlexEvent):void
        {
            for (var i:int = 0; i < arr.length; i++)
            {
                if (String(arr.getItemAt(i).RestaurantsKuwaiti) == "undefined" || String(arr.getItemAt(i).RestaurantsKuwaiti) == "[object Object]")
                {
                    arr.removeItemAt(i).RestaurantsKuwaiti;
                    i--;
                }
            }
            lst.labelField = "ID"
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <fx:Model id="my"
              source="kaka/nndata.xml" />
    <s:ArrayCollection id="arr"
                       source="{my.alldata}" />
</fx:Declarations>

<s:List id="lst"
        left="10"
        right="10"
        top="99"
        bottom="10"
        dataProvider="{arr}"
        fontSize="30"
        fontWeight="bold"
        textAlign="right" /> 
```

我需要帮助才能知道如何将 2 个字段放在一个列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:58:43.180

使用[标签函数](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_2.html)

`list.labelFunction = lblFunct;`

```
private function lblFunct(value:Object):String
{
   return value.Prop1 + " " + value.Prop2;
} 
```

# sql - 找出 QA 和生产环境中的表之间的差异（Oracle）

> ID：13004459
> 
> 赞同：0
> 
> 时间：2012-10-22T02:55:30.903
> 
> 标签：sql, oracle

我试图找出 QA 和生产环境 (Oracle) 中的表之间的区别，为此我创建了一个数据库链接并使用此查询。

```
Select column1, column2, column3 from table1--This is QA table
minus
(Select column1, column2, column3 from table1@prod)--This is Production table 
```

column1、column2、column3 创建一个唯一的记录，该表还具有列“创建日期”和“创建者”（对于生产和 QA 中的给定记录可能不同），我想显示其中的记录质量检查，但不在生产中。这可以在不使用 Join 的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:15:52.850

你试过`not exists`条款吗？

```
select * 
from table1 q 
where not exists (
                     select 1
                     from table1@prod p
                     where p.column1 = q.column1
                     and p.column2 = q.column2
                     and p.column3 = q.column3
                 ) 
```

# shell - AWK 中管道语法的混淆

> ID：13004460
> 
> 赞同：0
> 
> 时间：2012-10-22T02:55:34.487
> 
> 标签：shell, awk, pipe

示例代码是这样的，它对第一列出现的次数进行统计并对结果进行排序。

```
 { dist[$1]+=1; }
END { for (i in dist) {
        print i,dist[i] | "sort"
      }
    } 
```

在我看来，这个过程是这样的：

**（工作流程 A）**

1) 打印 中的所有元素`dist`，将它们全部保存到缓冲区

2）获取缓冲区中的所有元素，并将它们通过管道传递给`sort`函数

但在上面的示例中，过程如下所示：

**（工作流程 B）**

1) 在 中打印一个元素`dist`，然后通过管道将其传递给`sort`函数

2) 处理 中的下一个元素`dist`，直到没有新元素`dist`

我想知道为什么我不应该这样放置`sort`：

```
 { dist[$1]+=1; }
END { for (i in dist) {
        print i,dist[i] 
      } 
      | "sort"
    } 
```

有人知道原因吗？`pipe`如果我想做这样的工作，我该怎么写`WORKFLOW B`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:06:22.697

第二种方式不能这样做的原因是因为`| "command"`它是 awk`print`命令语法的一部分，它不能与任意语句或语句组一起使用。同样的事情也适用`> filename`。

它的工作方式是，当它第一次遇到到文件或管道的重定向时，它会打开该文件/管道，并保持该描述符打开。然后每次重定向到同一个文件/管道时，它都会将输出发送到相应的描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:39:27.240

请参阅@barmar 对“为什么不”的回答，以及如何获得该功能（在循环结束时调用排序）来解决问题的第二部分：

```
 { dist[$1]+=1; }
END { for (i in dist) {
        out = out i OFS dist[i] ORS 
      } 
      printf "%s",out | "sort"
    } 
```

# python - 为什么我会收到全局名称错误

> ID：13004463
> 
> 赞同：0
> 
> 时间：2012-10-22T02:55:57.120
> 
> 标签：python, oop, class

我目前遇到以下错误：

```
NameError: global name 'player1_unam' is not defined 
```

如果有人可以请查看下面的代码并给我一个问题的灵魂，我们将不胜感激。

我提前道歉，因为我知道这是非常混乱和低效的代码，但我只是 python 的初学者。

```
import os 
import random
from random import randint
game_won = False
p1_playing = True
p2_playing = True
class start_game(object):
    def __init__(self):
        suspect = ["Miss Scarlet","Colonel Mustard","Mrs. White","Reverend Green","Mrs. Peacock","Professor Plum"] 
        weapon = ["Candlestick","Dagger","Lead Pipe","Revolver","Rope","Spanner"]
        room = ["Kitchen","Ballroom","Conservatory","Billiard Room","Library","Study","Hall","Lounge","Dining Room","Cellar"]
        rndsuspect = random.randrange(0, 5 ,1)
        rndweapon = random.randrange(0,5,1)
        rndroom = random.randrange(0,9,1)
        answers = []
        answers.append(suspect[rndsuspect])
        answers.append(weapon[rndweapon])
        answers.append(room [rndroom])      
        print answers[0]
        print answers[1]
        print answers[2]

class game_type:
    def __init__(self):
        select_game = raw_input("Do you want to start the game? ")
        lstchar = ["Miss Scarlet","Colonel Mustard","Mrs. White","Reverend Green","Mrs. Peacock","Professor Plum"]
        if select_game.lower() == "yes":
            player1_unam = raw_input("What is Player 1's Name? ").lower().title()
            player1_cindex = int(input('Choose A Character: Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6] '))
            player1_char = lstchar[player1_cindex - 1]
            print ("%s has chosen to play as %s") %(player1_unam,player1_char)
            player2_unam = raw_input("What is Player 2's Name? ").lower().title()
            if player2_unam == player1_unam:
                while player2_unam == self.player1_unam:
                    player2_unam = player2_unam = raw_input("You can't use the same Name as Player 1, please choose again: ")
            player2_cindex = input('Choose A Character: Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6] ')
            player2_char = lstchar[player2_cindex - 1]
            if player2_cindex == player1_cindex:
                while player2_cindex == player1_cindex:
                    print "Choose A Character Other Than: %s" %  lstchar[player1_cindex - 1]
                    player2_cindex = int(input('Choose A Character: Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6] '))
                    player2_char = lstchar[player2_cindex - 1]
                    print ("%s has chosen to play as %s") %(player2_unam,player2_char)

class dice_roll(game_type):
    def __init__(self, game_type):
        final_suggestion = False
        suggested_suspect = ["Miss Scarlet","Colonel Mustard","Mrs. White","Reverend Green","Mrs. Peacock","Professor Plum"] 
        suggested_weapon = ["Candlestick","Dagger","Lead Pipe","Revolver","Rope","Spanner"]
        rolled_room = ["Kitchen","Ballroom","Conservatory","Billiard Room","Library","Study","Hall","Lounge","Dining Room","Cellar", "Corridor"]
        current_player = [player1_unam,player2_unam]
        chosen_room = []
        player1_room = []
        player2_room = []
        suggestion = []
        correct_elements = []
        introom = random.randrange(0,10,1)
        super(dice_roll,self). __init__(self)
        current_turn = 0
        while game_won == False and p1_playing == True and p2_playing == True: 
            if raw_input("Type 'Roll' to start your turn  %s" %current_player[current_turn]).lower() == "roll":
                dice = random.randrange(1,6,1)
                pass
                print "You have rolled a %d" % dice
                if dice == 1:
                    print "%s is now in the Corridor" % current_player[current_turn]
                    if current_turn == 0:
                        player1_room = rolled_room[introom]
                    else:
                        player2_room = rolled_room[introom]
                elif dice == 2:
                    introom = random.randrange(0,10,1)
                    print "You are now in the %s"  % rolled_room[introom]                   
                    if current_turn == 0:
                        player1_room = rolled_room[introom]
                    else:
                        player2_room = rolled_room[introom]                  
                elif dice == 3:
                    print "%s is now in the Corridor" % current_player[current_turn]
                    if current_turn == 0:
                        player1_room = rolled_room[10]
                    else:
                        player2_room = rolled_room[10]
                elif dice == 4:
                    introom = random.randrange(0,10,1)
                    print "You can move to the %s [%d] "  % (rolled_room[introom], introom + 1)
                    introom = random.randrange(0,10,1)
                    print "You can move to the %s [%d]" % (rolled_room[introom], introom + 1)
                    if current_turn == 0:
                        introom = int(input("Which Room Do You Choose? "))
                        player1_room = rolled_room[introom]
                    else:
                        player2_room = int(input("Which Room Do You Choose? "))
                        player2_room = rolled_room[introom]
                elif dice == 5:
                    print "%s is now in the Corridor" % current_player[current_turn]
                    if current_turn == 0:
                        player1_room = rolled_room[10]
                    else:
                        player2_room = rolled_room[10]
                elif dice == 6:
                    introom = random.randrange(0,10,1)
                    print "You can move to the %s [%d] "  % (rolled_room[introom], introom + 1)
                    introom = random.randrange(0,10,1)
                    print "You can move to the %s [%d]" % (rolled_room[introom], introom + 1)
                    introom = random.randrange(0,10,1)
                    print "You can move to the %s [%d]" % (rolled_room[introom], introom + 1)
                    if current_turn == 0:
                        player1_room = int(input("Which Room Do You Choose? "))
                        player1_room = rolled_room[introom]
                    else:
                        player2_room = int(input("Which Room Do You Choose? "))
                        player2_room = rolled_room[introom]                   
                if player1_room == "Cellar" or player2_room == "Cellar":
                        if raw_input("Do you want to make a final suggestion? ").lower == "yes":
                            final_suggestion = True
                elif player1_room != "Corridor" and player1_room != "Cellar" or player2_room != "Corridor" and player2_room != "Cellar":
                    suggestion_index = int(input("Who do you think committed the crime? Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6]"))
                    suggestion.append(suggested_suspect[suggestion_index - 1])
                    suggestion_index = int(input("What do you think was used to commit the crime? Candlestick [1], Dagger [2], Lead Pipe[3], Revolver[4], Rope[5], Spanner[6] "))
                    suggestion.append(suggested_weapon[suggestion_index - 1])
                    if current_turn == 0:
                        suggestion.append(player1_room)
                    else:
                        suggestion.append(player2_room)
                        if suggestion [0] == start_game.answers [0]:
                            correct_elements.append(suggestion[0])
                        elif suggestion [1] == start_game.answers [1]:
                            correct_elements.append(suggestion[1])
                        elif suggestion [2] == start_game.answers [2]:
                            correct_elements.append(suggestion[2])
                        intcorrect = len(correct_elements)            
                    if final_suggestion == True:
                            suggestion_index = int(input("Who do you think committed the crime? Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6]"))
                            suggestion.append(suggested_suspect[suggestion_index - 1])
                            suggestion_index = int(input("What do you think was used to commit the crime? Candlestick [1], Dagger [2], Lead Pipe[3], Revolver[4], Rope[5], Spanner[6] "))
                            suggestion.append(suggested_weapon[suggestion_index - 1])
                            suggestion_index = int(input("Where do you think the crime was committed? Kitchen [1],Ballroom [2],Conservatory [3], Billiard Room [4], Library [5], Study [6], Hall [7], Lounge [8], Dining Room [9], Cellar [10]"))
                            suggestion.append(rolled_room[suggestion_index - 1])
                            if suggestion[0] == start_game.answers[0] and suggestion [1] == start_game.answers [1] and suggestion [2] == start_game.answers [2]:
                                game_won = True
                                print "%s Has won the game :D" %current_player[current_turn]
                                print "%s committed the murder with the %s in the %s" %(start_game.answers[0],start_game.answers[1],start_game.answers[2])
                                print "Thankyou for playing CLUEDO"
                                if raw_input("Would you like to play again? ").lower == "yes":
                                    run_game = game_type(__init__)          
                elif player1_room != "Corridor" and player1_room != "Cellar" or player2_room != "Corridor" and player2_room != "Cellar":
                        suggestion_index = int(input("Who do you think committed the crime? Miss Scarlet[1], Colonel Mustard [2], Mrs. White [3], Reverand Green [4], Mrs. Peacock [5], Professor Plum [6]"))
                        suggestion.append(suggested_suspect[suggestion_index - 1])
                        suggestion_index = int(input("What do you think was used to commit the crime? Candlestick [1], Dagger [2], Lead Pipe[3], Revolver[4], Rope[5], Spanner[6] "))
                        suggestion.append(suggested_weapon[suggestion_index - 1])
                        if current_turn == 0:
                            suggestion.append(player1_room)
                        else:
                            suggestion.append(player2_room)
                        if suggestion [0] == start_game.answers [0]:
                           correct_elements.append(suggestion[0])
                        elif suggestion [1] == start_game.answers [1]:
                            correct_elements.append(suggestion[1])
                        elif suggestion [2] == start_game.answers [2]:
                            correct_elements.append(suggestion[2])
                        intcorrect = len(correct_elements)
                if intcorrect == 0:
                    print "None of those facts are correct"
                    del correct_elements[0:len(correct_elements)]
                    del suggestion[0:len(suggestion)]
                    else:
                        shown_card = random.choice(correct_elements)
                        print "You got %s correct" %shown_card
                        del correct_elements[0:len(correct_elements)]
                        del suggestion[0:len(suggestion)]
            current_turn += 1                
            if current_turn == 2:
                current_turn = 0

run_game = game_type()
suspectinfo = start_game()           
roll = dice_roll(game_type)

run_game()#.__init__()
suspectinfo()#.__init__()
roll() 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:57:03.920

你需要使用

```
self.player1_unam 
```

代替

```
player1_unam 
```

否则，当您进行初始分配时，会创建一个局部变量，当您尝试取消引用（访问）它时，Python 首先查找一个局部变量，然后查找一个全局变量，并且两次都失败它会给您该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:01:25.140

您需要使用`self.player1_unam`，因为 python 正在查找`global`名称空间而不是本地名称空间（在定义它的类内部）。

例如，以下可能是全局命名空间中的值，而`self.player1_unam`在类中定义：

```
def player1_unam():
    print "I am in the global namespace!" 
```

或变量：

```
player1_unam="I am in the global namespace!" 
```

或班级：

```
class player1_unam(object):
    pass 
```

值得注意的是，您必须更改对 to的***每次***使用才能解决此问题。`player1_unam``self.player1_unam`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T18:20:42.933

为什么不从一开始就让玩家一个名字成为一个变量呢？我觉得这样会更好。

```
 class game_type:
    def __init__(self):
        global  player1_unam
        ...
        player1_unam = raw_input("What is Player 1's Name? ").lower().title() 
```

# javascript - Javascript函数无法获取“this”变量

> ID：13004469
> 
> 赞同：-1
> 
> 时间：2012-10-22T02:58:16.480
> 
> 标签：javascript, html, variables

我从一个小型 HTML5 游戏开始，这是我正在做的第一个游戏。目前，我正在创建一个保存变量的函数，我真的不知道它叫什么，我只记得如何从教程中做到这一点。无论如何，我正在尝试使用“this”设置一些变量，但它似乎没有得到值。这是我认为导致问题的代码：

```
function ship() {
    this.width = 100;
    this.height = 75;
    this.drawX = gameWidth/2 - this.width/2;
    this.drawY = gameHeight + this.height;
} 
```

this.drawX 和 Y 然而，似乎没有得到一个值。另外，我确信 gameHeight 和 gameWidth 有一个值。

编辑：这是绘图功能和其余代码：

```
var player = new ship();

var gameWidth  = canvasShip.width;
var gameHeight = canvasShip.height;

var sprites = new Image();
sprites.src = 'images/spriteSheet.png';

var canvasPlayer = document.getElementById('canvasShip');
var ctxPlayer = canvasPlayer.getContext('2d');

//Clear any canvas
function clearCtx(canvas) { 
    canvas.clearRect(0,0,gameWidth,gameHeight);
}

//Ship object, the player
function ship() {
    this.width = 100;
    this.height = 75;
    console.log(gameWidth,gameHeight);
    this.drawX = gameWidth/2 - this.width/2;
    this.drawY = gameHeight + this.height;
}

ship.prototype.draw = function() {
    clearCtx(ctxPlayer);
    ctxPlayer.drawImage(sprites,0,0,this.width,this.height,this.drawX,this.drawY, this.width, this.height);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:30:11.300

您代码中的这一部分看起来很可疑：

```
var player = new ship();

var gameWidth  = canvasShip.width;
var gameHeight = canvasShip.height; 
```

在 的构造函数中，和`ship()`的值是。`gameWidth``gameHeight``undefined`

反转语句应该按预期工作：

```
var gameWidth  = canvasShip.width,
gameHeight = canvasShip.height,
player = new ship(); 
```

* * *

这是 JavaScript 查看您的代码的方式：

```
var gameWidth, gameHeight, player, ship;

ship = function() { ... }

player = new ship();
gameWidth = 123;
gameHeight = 456; 
```

get 的声明`ship()`在有时被称为“[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)”的过程中向上移动，这使得它的行为方式变得更加明显。

# php - 变量在 IF 语句中变为 NULL

> ID：13004470
> 
> 赞同：0
> 
> 时间：2012-10-22T02:58:21.673
> 
> 标签：php

```
while ($row = mysql_fetch_array($results)) {
    $results_array[$row['post_id']] = $row;   

    $arr = array($row[2] => $row[3]); 

    $location = trim($arr[cp_check_where_to_show_video]);
    $video    = trim($arr[cp_embed_video]);

    echo $video;

    if($location=='Video of the Day')
    { 
        echo $location."\n";
        echo "---";
        echo $video; 
        echo "---";  
    } 
}

Output:
    Video Text
    Video of the Day
    -------
    NULL 
```

事情就是这样。假设我有上面的代码，“视频”来自数据库。到目前为止，在我添加 if 语句之前，我的查询没有问题。

第一个回显输出预期的结果，但在 if 语句中“video”变为 NULL。我可以进入 if 语句并输出除 $video 之外的任何内容。

有人可以告诉上面的陈述出了什么问题或可能有问题吗？奇怪的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T03:03:02.330

通常，人们忘记并使用`=`而不是`==`在比较中。它将条件设置为`true`，如果`$video`处于条件中，您可能会不小心将 设置`$video`为`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:43:31.990

我不知道，但它可能是这样的。

它第一次回显 $video 但不进入`if`. 第二次它是 NULL 所以不回显任何东西，而是进入 if `var_dumps`NULL

**编辑**

例如，放在`echo '----';`您的上方`echo $video;`以检查输出是否类似于

```
----
video text
----
Video of the Day
NULL 
```

如果你有类似的东西

```
----
video text
Video of the Day
NULL 
```

那么这对我来说完全是个谜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T04:56:05.550

（真的是评论，但添加代码所以放在这里）

调试方案一：增加报错；在此之前，添加

```
error_reporting(E_ALL);
ini_set('display_errors', 'on'); 
```

看看那会给你什么。

调试解决方案2：

可能是“编辑器插入了我看不到的奇怪字符”的情况。建议完全删除 if 语句中的行（选择整行，点击删除），以及引用 $video 的行，然后手动重新键入它们（不复制/粘贴）。隐藏的角色确实会发生——这是我能想到的唯一解决方案。

# jquery - jQuery 显示隐藏功能无法正常工作

> ID：13004471
> 
> 赞同：0
> 
> 时间：2012-10-22T02:58:22.300
> 
> 标签：jquery

好的，所以我有这个代码

```
//<!--

  $(document).ready (function() {
 $('.topicsShow').hide();
 var i = 1;
 $('.clickFunc').each(function(){
     $(this).click(function(){ 
         $('.topicsShow:eq('+$(this).data('idf')+')').toggle('slow');
     });
     $(this).data('idf',i);
     i++;
});
  });

// --> 
```

由于 var i = 0; 起初它不能正常工作 所以我改成了1。工作得更好一点。为什么是这样？有人可以解释吗？它不能完全正确工作的原因是，当我单击我的 .clickFunc 时，它会打开一个 td 元素。我隐藏了整个 tr，并且您假设单击其上方的 tr 元素（这是类别标题），它应该打开该类别中的所有主题。这段代码使得当我点击它时，它只会在 tr 中打开一个 td 元素。

有人可以帮我一点吗？

```
<tr class="clickFunc">
  <td></td>
 <td></td>
</tr>
<tr class="topicsShow">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="topicsShow">
<td></td>
 <td></td>
<td></td>
<td></td>
</tr>
<tr class="clickFunc">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="topicsShow">
<td></td>
<td></td>
<td></td>
<td></td>
</tr> 
```

这是生成的基本模型。如果我添加更多类别/主题，将会有更多的主题显示和更多的 clickFunc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:04:44.033

有时它不起作用，因为如果您将这些 div 的可见性样式硬编码为“隐藏”并且 jquery 的“显示”方法无法恢复它。奇怪的是，与“显示”方法相反，“隐藏”可以毫无问题地恢复硬编码的“可见”样式。因此，要按预期隐藏/显示元素，您要么必须使用没有可见性样式硬编码的隐藏/显示方法组合，要么使用 jquery 的 css 方法并根据需要设置可见性样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:10:09.740

试试这个：

```
$(document).ready(function () {
    'use strict';
    $('.topicsShow').hide();
    $('.clickFunc').each(function (i, elem) {
        //i and elem are parameters passed to .each;
        //i naturally increments.
        var self = elem; //cache object so that jQuery doesn't do several lookups
        self.data('idf', i).click(function (e) {
            $('.topicsShow:eq(' + self.data('idf') + ')').toggle('slow');
            e.preventDefault(); //cancel bubbling
            return false;
        });
    });
}); 
```

我的猜测是您需要`$(this).data('idf',i);`在处理程序之前分配`click`。

如果这没有帮助，请在您的帖子中添加一些示例标记。

**更新：**

这适用于您的标记：

```
$(document).ready(function () {
    $('.topicsShow').hide(); //hide topics
    $('.clickFunc').each(function (i, elem) {
        var self = $(elem) //cache object
        self.click(function (e) {
            //.nextUntil('.clickFunc') === get all siblings until .clickFunc
            //.filter('.topicsShow') === select only elements that have the .topicsShow class
            self.nextUntil('.clickFunc').filter('.topicsShow').toggle('slow');
            e.preventDefault(); //cancel bubbling
            return false;
        });
    });
}); 
```

我的原始代码没有做任何事情的原因是我忘记放入`elem`一个 jQuery 包装器（即`$(elem)`）。

`e.preventDefault();`不会阻止点击事件。相反，它防止点击事件冒泡到更高阶的元素（更远的祖先树）。我包括它是因为我假设您不希望在`tr`切换元素后发生任何其他事情。出于同样的原因，我也包括在内`return false;`（它可能是多余的，但我不确定是否是，所以无论如何我都包括在内）。

该[函数](http://api.jquery.com/data/)（您在问题中使用的函数：））的目的是将任意值（如变量值，或者在本例中为 的值[）`.data`](http://api.jquery.com/data/)`i`存储到选择器中匹配的 DOM 元素中。

您问题中的代码执行以下操作：

```
$(document).ready(function () {
    $('.topicsShow').hide(); //hide topics
    var i = 1;  //declare a var for incrementing
    $('.clickFunc').each(function () {
        $(this).click(function () {
            //:eq(0) or :eq(1) as this only loops twice, see notes in markup below
            //when you intialized `i` to 1, this became :eq(1) or :eq(2)
            $('.topicsShow:eq(' + $(this).data('idf') + ')').toggle('slow');
        });
        $(this).data('idf', i); //store the value of `i` (0 || 1) || (1 || 2) in the matched element
        i++; //increment `i`
    });
}); 
```

使用此标记：

```
<tr class="clickFunc"><!-- with var i = 0; click handler toggles .topicsShow:eq(0)-->
    <td>clickFunc</td><!-- with var i = 1; click handler toggles .topicsShow:eq(1)-->
    <td>clickFunc</td>
</tr>
<tr class="topicsShow"><!-- .topicsShow:eq(0) -->
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
</tr>
<tr class="topicsShow"><!-- .topicsShow:eq(1) -->
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
</tr>
<tr class="clickFunc"><!-- click handler toggles :eq(2)-->
    <td>clickFunc</td><!-- with var i = 0; click handler toggles .topicsShow:eq(1)-->
    <td>clickFunc</td><!-- with var i = 1; click handler toggles .topicsShow:eq(2)-->
    <td>clickFunc</td>
    <td>clickFunc</td>
</tr>
<tr class="topicsShow"><!-- .topicsShow:eq(2) -->
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
    <td>topicsShow</td>
</tr> 
```

希望这能解释一切。:)

# arrays - R .C 接口：传递多维数组

> ID：13004475
> 
> 赞同：7
> 
> 时间：2012-10-22T02:59:06.120
> 
> 标签：arrays, r, interface, multidimensional-array

我用 C 语言编写了一个函数“foo”，我想从 R 程序中调用它。该函数将矩阵作为输入并对其进行一些操作（例如，将每个元素加 1）。虽然很容易将单个向量作为

```
.C("foo", n=as.integer(5), x=as.double(rnorm(5))) 
```

用 foo 实现为

```
void foo(int *nin, double *x)
{
int n = nin[0];

int i;

for (i=0; i<n; i++)
    x[i] = x[i] * x[i];
} 
```

如何传入二维数组？如果我将“double *x”更改为“double **x”，则会出现分段错误。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T03:01:14.577

放弃`.C()`并切换到`.Call()`哪个可以让您将整个 R 对象作为所谓的`SEXP`对象传递。

您可以通过 R 的 C API 或通过具有（我们认为的）很好的高级抽象的 Rcpp 来解析这些内容。

```
R> library(inline)  # use version 0.3.10 for rcpp() wrapper
R> 
R> addMat <- rcpp(signature(ms="numeric"), body='
+    Rcpp::NumericMatrix M(ms);
+    Rcpp::NumericMatrix N = Rcpp::clone(M);
+    for (int i=0; i<M.nrow(); i++)
+       for (int j=0; j<M.ncol(); j++) 
+          N(i,j) = M(i,j) + 1;
+    return(N);
+ ')
R> addMat(matrix(1:9,3,3))
     [,1] [,2] [,3]
[1,]    2    5    8
[2,]    3    6    9
[3,]    4    7   10
R> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T03:14:05.900

无需放弃`.C`像这样的直接操作。请记住，R 中的矩阵是向量 + 维度。同样在 C 中，传递矩阵及其维度，并将矩阵的元素作为适当的偏移量访问到向量中。就像是

```
void cplus1(double *x, int *dim)
{
    for (int j = 0; j < dim[1]; ++j)
        for (int i = 0; i < dim[0]; ++i)
            x[j * dim[0] + i] += 1;
} 
```

所以`inline`用作一个不错的派对技巧

```
library(inline)
sig <- signature(x="numeric", dim="integer")
body <- "
    for (int j = 0; j < dim[1]; ++j)
        for (int i = 0; i < dim[0]; ++i)
            x[j * dim[0] + i] += 1;
"

cfun <- cfunction(sig, body=body, language="C", convention=".C")

plus1 <- function(m) {
    m[] = cfun(as.numeric(m), dim(m))$x
    m
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T10:01:48.103

使用`.C`，您必须通过@Martin Morgan 的答案中的附加参数传递矩阵维度。

和`.Call`

```
SEXP foo(SEXP mat){
  SEXP dims = getAttttrib(mat, R_DimSymbol);
  int nrow = INTEGER(dims)[0];
  int ncol = INTEGER(dims)[1];
  //...
} 
```

# php - 将mysql数据拆分为3列错误

> ID：13004477
> 
> 赞同：0
> 
> 时间：2012-10-22T02:59:42.830
> 
> 标签：php, html, mysql

早晨，

我们有一个脚本，用于将我们从 mysql 数据库（基于此答案：[https](https://stackoverflow.com/a/8660624/1067100) ://stackoverflow.com/a/8660624/1067100 ）中获得的数据拆分为具有三列的表，在当前示例的情况下，我们有一个数据库，返回8个值但出现9个（后面完全为空）。

当前的图像如果变得非常清晰，可以澄清问题，并且还可以链接到我们认为错误的代码。我们已经审查过，但我们无法找出问题所在.. :/

代码：[https ://gist.github.com/99df1288cd1d998c8172](https://gist.github.com/99df1288cd1d998c8172)

![在此处输入图像描述](../Images/b9e5f6ba288e22ea164ebfc627170192.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:09:52.707

最快的解决方法是在内循环中需要一个“ [break ”。](http://php.net/manual/en/control-structures.break.php)

```
for ($i=0; $i < count($data)/3; $i++){
    for ($j=0; $j<3; $j++){
         if (($i * 3) + $j >= count($data)) {
             break;
         } 
```

请注意，您应该通过将 count($data) 存储在变量中来节省一小部分计算能力 - 除非您希望计数发生变化。

```
$countOfData = count($data);
for ($i=0; $i < $countOfData/3; $i++){
    for ($j=0; $j<3; $j++){
         if (($i * 3) + $j >= $countOfData) {
             break;
         } 
```

# javascript - 当顶部有另一个标签时，如何将css悬停分配给标签？

> ID：13004480
> 
> 赞同：0
> 
> 时间：2012-10-22T03:00:04.360
> 
> 标签：javascript, jquery, html

我有一个表格，我想为它的所有单元格分配一个 CSS 悬停。但同时我有一个带有 bg 图像的 div 标签，它与表格具有相同的宽度和高度，并且它以相对位置定位在表格的正上方。我怎样才能仍然将css悬停分配给表格的单元格，因为当我尝试它时，它不起作用，我认为这是因为当我检测到div标签时......

有谁知道这个问题的解决方案？

注意：它必须与 IE9 一起使用（也不能使用 css3）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T03:05:08.903

检查[这篇文章](https://stackoverflow.com/questions/3538489/html-css-make-a-div-invisible-to-clicks/3538639#3538639)

它可以在 Firefox >= 3.6 和 Safari >= 4.0 中使用 CSS 指针事件来完成。可能还有一些 Chrome 版本。不幸的是，我不知道跨浏览器的解决方法。

```
#overlay {
  pointer-events: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:01:00.623

有两种解决方案：
1-使用以下代码：

```
<td  onmouseover="className='tdon'" onmouseout="className='tdoff'"></td> 
```

然后在 css 中编写 tdon 和 tdoff 类。

2- 使用 jQuery $("td").hover(function() {});

# django - 使用 gunicorn 和 nginx 部署 Django

> ID：13004484
> 
> 赞同：82
> 
> 时间：2012-10-22T03:00:23.043
> 
> 标签：django, deployment, nginx, setup-deployment, gunicorn

这是一个广泛的问题，但我想得到一个规范的答案。我一直在尝试在*Django中使用**gunicorn*和*nginx*部署一个站点。在阅读了大量教程之后，我已经成功了，但我不能确定我所遵循的步骤是否足以运行一个没有问题的网站，或者也许有更好的方法来做到这一点。这种不确定性很烦人。

 *这就是为什么我正在为新手寻找一个非常详细且解释清楚的答案。我不想解释太多我知道的和我不知道的，因为这可能会稍微歪曲答案，其他人可能会在较小程度上从你的答案中受益。但是，我希望看到的一些事情是：

*   您认为哪种“设置”效果最好？我使用了*virtualenv*并将我的*Django*项目移到了这个环境中，但是我看到了另一个设置，其中有一个用于虚拟环境的文件夹和其他用于项目的文件夹。

*   如何以允许在单个服务器中托管多个站点的方式进行设置？

*   为什么有些人建议使用`gunicorn_django -b 0.0.0.0:8000`而其他人建议使用`gunicorn_django -b 127.0.0.1:8000`？我在 Amazon EC2 实例中测试了后者，但它没有工作，而前者工作没有问题。

*   nginx的配置文件背后的逻辑是什么？有很多教程使用了截然不同的配置文件，我不知道哪个更好。例如，有些人使用，有些人`alias /path/to/static/folder`使用`root /path/to/static/folder`. 也许你可以分享你喜欢的配置文件。

*   为什么我们要在`site-available`和`sites-enabled`之间创建符号链接`/etc/nginx`？

*   一些最佳实践一如既往地受到欢迎:-)

谢谢

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-10-22T04:25:46.783

> 您认为哪种“设置”效果最好？我使用了 virtualenv 并将我的 django 项目移到了这个环境中，但是我看到了另一个设置，其中有一个用于虚拟环境的文件夹和另一个用于项目的文件夹。

virtualenv 是一种隔离 Python 环境的方法；*因此，它在部署*时没有很大的作用- 但是在*开发*和*测试*期间，如果不强烈推荐，它是必需的。

您从 virtualenv 获得的价值是它允许您确保为应用程序安装了正确版本的库。因此，将虚拟环境本身粘贴在哪里并不重要。只要确保您没有将其作为源代码版本控制系统的一部分包含在内。

文件系统布局并不重要。你会看到很多文章赞美目录布局的优点，甚至是你可以克隆作为起点的骨架项目。我觉得这更多的是个人喜好，而不是硬性要求。当然很高兴拥有；但除非您*知道原因*，否则它不会为您的部署过程增加任何价值 - 所以不要这样做，因为一些博客推荐它，除非它对您的场景有意义。例如 -`setup.py`如果您没有作为部署工作流程一部分的私有 PyPi 服务器，则无需创建文件。

> 如何以允许在单个服务器中托管多个站点的方式进行设置？

多站点设置需要做两件事：

1.  如果您有 SSL，则服务器正在侦听端口 80 和/或端口 443 上的公共 IP。
2.  一堆运行实际 django 源代码的“进程”。

人们将 nginx 用于#1，因为它是一个非常快速的代理，而且它没有像 Apache 这样的综合服务器的开销。如果您对 Apache 感到满意，您可以自由使用它。没有“多站点，使用nginx”的要求；您只需要一个正在侦听该端口的服务，知道如何重定向（代理）到您运行实际 django 代码的进程。

对于#2，有几种方法可以启动这些过程。gevent/uwsgi 是最受欢迎的。这里唯一要记住的是*不要在生产中使用 runserver*。

这些是绝对的最低要求。通常人们会添加某种进程管理器来控制所有运行的“django 服务器”（#2）。在这里你会看到[`upstart`](http://upstart.ubuntu.com/)并[`supervisor`](http://supervisord.org)提到。我更喜欢主管，因为它不需要接管整个系统（不像暴发户）。然而，再一次 - 这不是一个*硬性要求*。您可以完美地运行一堆[`screen`](http://www.gnu.org/software/screen/)会话并将它们分离。不利的一面是，如果您的服务器重新启动，您将不得不重新启动屏幕会话。

我个人会推荐：

1.  #1 的 Nginx
2.  在 uwsgi 和 gunicorn 之间进行选择 - 我使用 uwsgi。
3.  [管理后端进程的主管](http://supervisord.org)。
4.  您托管的每个应用程序的单独系统帐户（用户）。

我推荐#4的原因是隔离权限；再次，不是要求。

> 为什么有些人建议使用 gunicorn_django -b 0.0.0.0:8000 而其他人建议使用 gunicorn_django -b 127.0.0.1:8000？我在 Amazon EC2 实例中测试了后者，但它没有工作，而前者工作没有问题。

`0.0.0.0`表示“所有 IP 地址”——它是一个元地址（即占位符地址）。`127.0.0.1`是一个始终指向本地机器的保留地址。这就是为什么它被称为“本地主机”。它只能访问在同一系统上运行的进程。

通常你有前端服务器（上面列表中的#1）监听公共 IP 地址。您*应该明确地将服务器绑定到**一个**IP 地址*。

但是，如果由于某种原因您使用 DHCP 或者您不知道 IP 地址是什么（例如，它是一个新配置的系统），您可以告诉 nginx/apache/任何其他进程绑定到`0.0.0.0`. *这应该是一个**临时的权宜之计***。

对于生产服务器，您将拥有一个静态 IP。如果您有动态 IP (DHCP)，那么您可以留在`0.0.0.0`. 但是，您的生产机器很少有 DHCP。

*不建议*在生产中绑定 gunicorn/uwsgi 到这个地址。如果您将后端进程（gunicorn/uwsgi）绑定到`0.0.0.0`，它可能会“直接”访问，绕过您的前端代理（nginx/apache/etc）；有人可以直接请求`http://your.public.ip.address:9000/`和访问您的应用程序，***特别是如果您的前端服务器 (nginx) 和后端进程 (django/uwsgi/gevent) 在同一台机器上运行***。

如果您不想麻烦运行前端代理服务器，您可以自由选择。

> nginx的配置文件背后的逻辑是什么？有很多教程使用了截然不同的配置文件，我不知道哪个更好。例如，有些人使用“alias /path/to/static/folder”而其他人使用“root /path/to/static/folder”。也许你可以分享你喜欢的配置文件。

关于 nginx，您应该了解的第一件事是它**不是**像 Apache 或 IIS 这样的网络服务器。它是一个代理。因此，您会看到不同的术语，例如“上游”/“下游”和多个“服务器”被定义。花点时间先阅读一下 nginx 手册。

有很多不同的方式来设置 nginx；`alias`但这是您对vs.的问题的一个答案`root`。`root`是绑定 nginx 的文档根目录（“主目录”）的显式指令。这是当您发出没有路径的请求时它将查看的目录`http://www.example.com/`

`alias`表示“将名称映射到目录”。别名目录*可能不是*文档根目录的子目录。

> 为什么我们要在 /etc/nginx 中的站点可用和站点启用之间创建符号链接？

这是 debian（以及 ubuntu 等类似 debian 的系统）所独有的。 `sites-available`列出系统上所有虚拟主机/站点的配置文件。从`sites-enabled`到`sites-available`“激活”该站点或虚拟主机的符号链接。这是一种分离配置文件并轻松启用/禁用主机的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T03:53:31.997

我不是部署专家，但会分享一些使用 gevent 部署 Django 的实践（不过应该类似于 gunicorn）。

`virtualenv`很棒，因为我不会进入。然而，我发现`virtualenv-wrapper`（[文档](http://virtualenvwrapper.readthedocs.org/en/latest/)）非常有用，尤其是在您处理许多项目时，因为它允许在不同的 virtualenvs 之间轻松切换。这并不真正适用于部署环境，但是当我确实需要使用 SSH 在服务器上进行故障排除时，我发现这非常有用。使用它的另一个优点是它管理 virtualenv 目录，因此您的手动工作更少。Virtualenvs 是一次性的，因此如果您有版本问题或任何其他安装问题，您可以转储 env 并创建一个新的。因此，最好不要在 virtualenv 中包含任何项目代码。它应该分开存放。

至于设置多个站点，`virtualenv`几乎是答案。每个项目都应该有一个单独的virutalenv。仅此一项就可以解决很多问题。然后，当您部署时，不同的 Python 进程将运行不同的站点，从而避免部署之间任何可能的冲突。我发现在同一台服务器上管理多个站点时特别有用的一个工具是`supervisor`（[docs](http://supervisord.org/)）。它为启动、停止和重新启动不同的 Django 实例提供了一个简单的界面。它还能够在进程失败或计算机启动时自动重启进程。因此，例如，如果引发了一些异常并且没有捕获它，则整个网站可能会崩溃。Supervisor 将捕捉到这一点并自动重新启动 Django 实例。以下是示例主管程序（单个进程）配置：

```
[program:foo]
command=/path/toviertualenv/bin/python deploy.py
directory=/path/where/deploy.py/is/located/
autostart=true
autorestart=true
redirect_stderr=True
user=www 
```

对于 Nginx，我知道一开始它可能会让人不知所措。我发现 Nginx的[书](https://rads.stackoverflow.com/amzn/click/com/1849510865)非常有用。它解释了所有主要的 nginx 指令。

在我的 nginx 安装中，我发现最好的做法是只在`nginx.conf`文件中设置核心配置，然后我有一个单独的文件夹`sites`，用于保存我托管的每个站点的 nginx 配置。然后，我只是将该文件夹中的所有文件包含在核心配置文件中。我使用指令`include sites/+*.conf;`。这样它只包括文件夹中以`+`符号开头的`sites`文件。这样，只需通过文件名，我就可以控制要加载哪些配置文件。所以如果我想禁用某个站点，我只需要重命名配置文件并重新启动 nginx。不太确定您的问题中“站点可用和 /etc/nginx 中启用站点之间的符号链接”是什么意思，因为这些是 Apache 命名文件夹，但它们完成与`include`指令类似的任务。

至于`root`和`alias`指令，除了计算根的位置外，它们几乎相同。in `alias`, in 中的任何东西都被`location`丢弃，而 in 它的根中没有。您具有以下 nginx 配置的图像：

```
location /static {
    alias /some/path/;
}
location /static2 {
    root /some/other/path/;
} 
```

如果用户访问这些 URL，那么 nginx 将尝试在系统的以下位置查找文件：

```
/static/hello/world.pdf => /some/path/hello/world.pdf
/static2/hello/world.pdf => /some/other/path/static2/hello/world.pdf 
```

这是 nginx 站点的简单配置：

```
server {
    server_name .foodomain.com;
    listen 80;

    access_log logs/foodomain.log;

    gzip                on;
    gzip_http_version   1.0;
    gzip_comp_level     2;
    gzip_proxied        any;
    gzip_min_length     1100;
    gzip_buffers        16 8k;
    gzip_types          text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    # Some version of IE 6 don't handle compression well on some mime-types, so just disable for them
    gzip_disable "MSIE [1-6].(?!.*SV1)";

    # Set a vary header so downstream proxies don't send cached gzipped content to IE6
    gzip_vary on;

    location / {
        proxy_read_timeout      30s;
        proxy_pass              http://localhost:8000;
        proxy_set_header        Host                 $host;
        proxy_set_header        User-Agent           $http_user_agent;
        proxy_set_header        X-Real-IP            $remote_addr;
    }

    location /media {
        alias   /path/to/media/;
        expires 1y;
    }

    location /static {
        autoindex on;
        expires   1y;
        alias     /path/to/static/;
    }

     location /favicon.ico {
        alias /path/to/favicon.ico;
    }
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:21:04.477

好吧，就您在问题中提出的最佳实践而言，我忍不住要分享一个为我创造奇迹的工具，从字面上看！我自己曾经对几个站点的 gunicorn、nginx、supervisorD 的几个配置文件感到困惑！但我渴望以某种方式自动化整个过程，以便我可以对我的应用程序/站点进行更改并立即部署它。它的名字是 django-fagungis。您可以在[此处找到我对 Django 部署自动化](http://alirazabhayani.blogspot.com/2013/02/easy-django-deployment-tools-tutorial-fabric-gunicorn-nginx-supervisor.html)的体验的详细信息。我刚刚配置了一个 fabfile.py ONCE（django-fagungis 使用结构来自动化整个过程并在您的远程服务器中创建一个**非常方便的 virtualenv**管理托管在单个服务器上的多个站点的依赖关系。它使用 nginx、gunicorn 和 supervisorD 来处理 Django 项目/站点部署）和 django-fagungis 从 bitbucket 克隆我的最新项目（我用于颠覆）并将其部署在我的远程服务器上，我只需要在 shell 上输入三个命令我的本地机器和它！对我来说，这已被证明是 Django 部署的最佳且无忧的做法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-16T20:47:03.857

检查这个以获取 Django 项目所需的最小 gunicorn 和 nginx 配置。 [http://agiliq.com/blog/2013/08/minimal-nginx-and-gunicorn-configuration-for-djang/](http://agiliq.com/blog/2013/08/minimal-nginx-and-gunicorn-configuration-for-djang/)*

# git - 如何将我的本地 GIT 完全重置为以前的提交？

> ID：13004485
> 
> 赞同：0
> 
> 时间：2012-10-22T03:00:33.967
> 
> 标签：git

我想对我的本地副本执行以下操作：

1.  放弃我所做的所有更改。
2.  删除所有已添加的新文件。
3.  将我的本地副本重置为以前的提交 ID，以便只有在提交时存在的文件存在于我的本地副本中。

我应该运行以下内容吗？

```
git checkout ID .
git clean -fd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T03:04:08.290

像这样：

```
git reset --hard [sha] 
```

请注意，它不会删除未跟踪的文件，因为 Git 对它们一无所知。运行此命令时，所有暂存和未暂存的更改都将丢失，因此请注意这一点。

如果你不小心运行了这个并想回到旧的提交，那么`git reflog`会显示如下输出：

```
86b46fd HEAD@{0}: 86b46fd: updating HEAD
a2b03fa HEAD@{1}: commit: [commit message] 
```

这里的`HEAD@{1}`提交是旧的 sha。使用以下命令重置回它：

```
git reset --hard HEAD@{1} 
```

# virtualization - 是否可以在没有快照的情况下恢复从 VirtualBox 中删除的 HD？

> ID：13004488
> 
> 赞同：0
> 
> 时间：2012-10-22T03:00:44.713
> 
> 标签：virtualization, virtualbox

我错误地从我的虚拟机（Virtual Box 4.0.6）中删除了单个硬盘驱动器（HD）！:S 我再次添加了 HD，但现在它使用基本配置加载（忽略 HD 移除之前的状态和任何快照）。

我仍然可以看到快照树，它们都在那里，但是我没有在 HD 移除之前做快照。

问题：是否有可能让最后一个状态重新启动并运行？

我以这种方式删除了磁盘（PT 语言不重要）：http: [//4.bp.blogspot.com/-4iCxcHhqe0M/UISuqMenjII/AAAAAAAAAT8/j726P30_QRA/s1600/1.png](http://4.bp.blogspot.com/-4iCxcHhqe0M/UISuqMenjII/AAAAAAAAAT8/j726P30_QRA/s1600/1.png)

我很惊讶 Virtual Box 甚至没有给我任何关于丢失数据的警告！再次添加磁盘后，它的行为如上所述。现在（我尝试直接从快照系统文件夹加载磁盘）它显示了一些类似这样的信息：http: [//4.bp.blogspot.com/-BPLxUQxSlx0/UISuswjYd6I/AAAAAAAAAUE/bJ1yfKljUr8/s1600/2.png](http://4.bp.blogspot.com/-BPLxUQxSlx0/UISuswjYd6I/AAAAAAAAAUE/bJ1yfKljUr8/s1600/2.png)

[编辑] - 已解决：我刚刚通过删除当前 HD 并从快照文件夹中添加一个新 HD 解决了这个问题（最近的一个，在我的例子中，一个文件名为：fb85e8db-d5f4-46a9-b67b- f8fb39a99a1a.vdi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:23:34.200

在 VM HDD 位置创建了一个 .prev 文件。

样本

```
<HardDisks>
        <HardDisk uuid="{21940e73-1596-45a5-b37e-44cca5d5f1e6}" location="Windows 9.vmdk" format="VMDK" type="Normal">
          <HardDisk uuid="{df9d8522-cc5d-499c-b974-037d3f8f89fb}" location="Snapshots/{df9d8522-cc5d-499c-b974-037d3f8f89fb}.vmdk" format="VMDK"/>
          <HardDisk uuid="{b707fe0a-f50c-4bc6-b03a-d5a4fe6972fd}" location="Snapshots/{b707fe0a-f50c-4bc6-b03a-d5a4fe6972fd}.vmdk" format="VMDK"> 
```

您可以将自定义快照添加到其中。它们呈树状，最后一个将被加载。如果它们像树一样时尚，你也必须记住结构。每个快照都是增量的，因此请确保父母和孩子的顺序正确。

# data-structures - 从二叉树的前序遍历序列中找到中序遍历

> ID：13004489
> 
> 赞同：1
> 
> 时间：2012-10-22T03:00:53.390
> 
> 标签：data-structures, binary-tree, sequence, traversal

我只给出了一个二叉树的前序遍历序列（例如{a, b, d, c, e}），任务是从中找出有序序列。如果这是一个重复的问题，请原谅我....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:41:43.227

我认为您无法仅根据二叉树的前序遍历来找出中序遍历。正如您对二叉搜索树所说，排序将为您提供中序遍历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T19:03:26.277

我在 Python 中准备了一个函数来从后序遍历中获取前序遍历。也许这会帮助你希望。

例如，

如果像这样 **输入后序输入后序遍历：ACEDBHIGF**

预购将是 **预购遍历是 GAECFTJOLP**

中序将是 **中序遍历是 ABCDEFGHI**

```
def from_post_order(post_order_items, order_type="pre"):
    bst = BinarySearchTree()
    values = [item for item in post_order_items]
    root = values[-1]  # the last item in the post_order item is ROOT
    bst.insert(root)  # insert ROOT
    values.pop(-1)  # and remove it from post_order_items

    left_child = []  # the left child of ROOT for Post-order
    right_child = []  # the right child of ROOT for Post-order
    for v in values:
        if v > root:
            right_child.append(v)
        else:
            left_child.append(v)

    for i in range(len(left_child + right_child)):
        if len(left_child) != 0:
            bst.insert(left_child[-1])  # insert left child
            left_child.pop(-1)  # remove the inserted left child from the list

        if len(right_child) != 0:
            bst.insert(right_child[-1])  # insert right child
            right_child.pop(-1)  # remove the inserted right child from the list

    if order_type == "pre":
        print("The pre-order traversal is ")
        bst.preorder(print)
    elif order_type == "in":
        print("The in-order traversal is ")
        bst.inorder(print)
    else:
        print("The post-order traversal is ")
        bst.postorder(print) 
```

# java - 模拟 GPS 不工作

> ID：13004495
> 
> 赞同：1
> 
> 时间：2012-10-22T03:01:48.710
> 
> 标签：java, android

我创建了一个户外导航应用程序。但为了证明我使用了模拟 GPS。但它现在不起作用。在我的应用程序中，这个类有 2 个按钮。当用户选择暂停按钮时，它会自动显示为开始。然后再次用户选择开始按钮，然后它将产生异常。这是我尝试开发的代码：

```
public class PathRecorderPauseActivity extends Activity implements
    TextToSpeech.OnInitListener, OnLongClickListener, OnClickListener,
    OnUtteranceCompletedListener {

private Button btnPause;
private TextView text;
private LocationManager manager;
private Button btnStop;
private boolean stop = true;
private LocationListener listener;
private boolean triger = true;
private boolean isIn = false;
private SQLiteOpenHelper dbHelper;
@SuppressWarnings("unused")
private Button btnShowDetails;
private MockGpsProvider mMockGpsProviderTask = null;
private Integer mMockGpsProviderIndex = 0;

private static final int MY_DATA_CHECK_CODE = 1234;
public static final String LOG_TAG = "MockGpsProviderActivity";
private static final String MOCK_GPS_PROVIDER_INDEX = "GpsMockProviderIndex";

// vibrator
//private Vibrator myVib;

private String speechText = "";
private TextToSpeech tts;
private ShakeListener mShaker;

private static final int REQUEST_CODE = 1234;
private static final String TAG = "VoiceRecognition";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pathrecorderpause);

    Display display = getWindowManager().getDefaultDisplay();
    int height = display.getHeight();
    int width = display.getWidth();

    if (savedInstanceState instanceof Bundle) {
        mMockGpsProviderIndex = savedInstanceState.getInt(
                MOCK_GPS_PROVIDER_INDEX, 0);
    }

    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

    dbHelper = new DbConnect(this);
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    /*
     * db.execSQL("DROP TABLE tblPathInfo");
     * db.execSQL("DROP TABLE tblPath");
     */

    db.execSQL("CREATE TABLE IF NOT EXISTS "
            + "tblPath(pathId INTEGER PRIMARY KEY," + "source VARCHAR, "
            + "destination VARCHAR, " + "startTime VARCHAR, "
            + "endTime VARCHAR, " + "distance DOUBLE);");

    db.execSQL("CREATE TABLE IF NOT EXISTS "
            + "tblPathInfo(infoId INTEGER PRIMARY KEY,"
            + "pathId INTERGER, " + "lat DOUBLE, " + "lon DOUBLE, "
            + "curLocation VARCHAR);");

    SimpleDateFormat sdf = new SimpleDateFormat(
            "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
    String curentDateandTime = sdf.format(new Date());

    Log.d("Time", curentDateandTime);

    db.execSQL("INSERT INTO tblPath (pathId,distance,startTime) VALUES ((SELECT max(pathId) FROM tblPath) + 1 ,0,'"
            + curentDateandTime + "')");

    db.close();

    btnPause = (Button) findViewById(R.id.btnPause);
    btnPause.setOnLongClickListener(this);
    btnPause.setOnClickListener(this);
    // btnPause.setOnTouchListener(this);

    btnStop = (Button) findViewById(R.id.btnStop);
    btnStop.setOnLongClickListener(this);
    btnStop.setOnClickListener(this);
    // btnStop.setOnTouchListener(this);

    // vibration
    /*myVib = (Vibrator) this.getSystemService(VIBRATOR_SERVICE);

    int dot = 200;
    int long_gap = 100;
    long[] pattern = { 0, // Start immediately
            dot, long_gap, dot, long_gap, dot, long_gap, dot, long_gap

    };*/

    // Only perform this pattern one time (-1 means "do not repeat")
    //myVib.vibrate(pattern, -1);
    // vibration closed

    mShaker = new ShakeListener(this);
    mShaker.setOnShakeListener(new ShakeListener.OnShakeListener() {
        public void onShake() {
            if (tts.isSpeaking()) {
                tts.stop();
            }
        }
    });

    final TextView tv = (TextView) findViewById(R.id.textView7);
    tv.setText(String.valueOf(height) + "X" + String.valueOf(width));
    View vw = (View) findViewById(R.id.view1); // middle one
    vw.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View view, MotionEvent event) {
            if (event.getAction() == android.view.MotionEvent.ACTION_MOVE) {
                Log.d("TouchTest", "ACTION_MOVE");
                tv.setText(String.valueOf(event.getX()) + " X "
                        + String.valueOf(event.getY()));

                if ((event.getX() >= 15 && event.getX() <= 305)
                        && (event.getY() >= 60 && event.getY() <= 224)) {
                    if (isIn == false) {
                        PathRecorderActivity.tts.speak("Stop",
                                TextToSpeech.QUEUE_FLUSH, null);
                        isIn = true;
                    }

                }

                else if ((event.getX() >= 15 && event.getX() <= 310)
                        && (event.getY() >= 245 && event.getY() <= 403)) {
                    if (isIn == false) {
                        PathRecorderActivity.tts.speak("Pause",
                                TextToSpeech.QUEUE_FLUSH, null);
                        isIn = true;
                    }

                }

                else {
                    isIn = false;
                }

            }
            return true;
        }

    });

    if (AppConstants.VoiceOrTouch.vot == 1) {
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);

        if (activities.size() != 0) {
            // startVoiceRecognitionActivity();
        }
    }

    manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    listener = new LocationListener() {

        private JSONObject currentLocJSON;
        private String currentLocationInfo;
        private String locationName;

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }

        public void onLocationChanged(Location location) {

            Log.i("currentLocationInfo -- ", location.getLatitude() + " : "
                    + location.getLongitude());
            /*
             * text = (TextView) findViewById(R.id.textView7);
             * 
             * text.setText("Latitude : " + location.getLatitude() +
             * "X Longitude : " + location.getLongitude());
             */
            currentLocationInfo = MapConstants.GetConstantLocationInfo(
                    location.getLatitude(), location.getLongitude());
            //if (currentLocationInfo == null) {
            //  currentLocJSON = getLocationInfoAsJSON(
            //          location.getLatitude(), location.getLongitude());
            //  currentLocationInfo = getLocationInfo(currentLocJSON);
            //}

            Log.i("currentLocationInfo -- ", currentLocationInfo);

            Toast.makeText(getApplicationContext(), currentLocationInfo,
                    Toast.LENGTH_SHORT).show();
            insertLocationDatailsToDB(location, currentLocationInfo);

        }

        private void insertLocationDatailsToDB(Location location,
                String currentLocationInfo) {
            double latOld = 0;
            double lonOld = 0;
            double newDistance;

            text.setText("Current Location = " + currentLocationInfo
                    + " | Latitude = " + location.getLatitude()
                    + " | Longitude = " + location.getLongitude());
            // Log.i("insertLocationDatailsToDB", "4");

            SQLiteDatabase db = dbHelper.getWritableDatabase();

            // Log.i("insertLocationDatailsToDB", "5");

            // check if there a source name inserted pathTbl
            if (triger == true) {
                // Log.i("insertLocationDatailsToDB", "6");
                db.execSQL("UPDATE tblPath SET source = '"
                        + currentLocationInfo
                        + "'  WHERE pathId = (SELECT max(pathId) FROM tblPath);");
                db.execSQL("INSERT INTO tblPathInfo (infoId,pathId,lat,lon,curLocation) VALUES ((SELECT max(infoId) FROM tblPathInfo) + 1 ,"
                        + "(SELECT max(pathId) FROM tblPath),"
                        + location.getLatitude()
                        + ", "
                        + location.getLongitude()
                        + ",'"
                        + currentLocationInfo + "'  )");
                triger = false;
            } else {
                // Log.i("insertLocationDatailsToDB", "7");
                db.execSQL("INSERT INTO tblPathInfo (infoId,pathId,lat,lon,curLocation) VALUES ((SELECT max(infoId) FROM tblPathInfo) + 1 ,"
                        + "(SELECT max(pathId) FROM tblPath),"
                        + location.getLatitude()
                        + ", "
                        + location.getLongitude()
                        + ",'"
                        + currentLocationInfo + "'  )");

                Cursor cur = db
                        .rawQuery(
                                "SELECT lat,lon,pathId FROM tblPathInfo WHERE pathId = (SELECT max(pathId) FROM tblPath) AND "
                                        + "infoId=((SELECT max(infoId) FROM tblPathInfo) - 1);",
                                null);
                if (cur.moveToNext()) {
                    latOld = cur.getDouble(0);
                    lonOld = cur.getDouble(1);
                    AppConstants.DataConstants.SELECTED_PATH_ID = cur
                            .getString(2);
                }
                Location oldLoc = new Location("oldLocation");
                oldLoc.setLatitude(latOld);
                oldLoc.setLongitude(lonOld);

                newDistance = location.distanceTo(oldLoc);
                db.execSQL("UPDATE tblPath SET  distance = distance + "
                        + newDistance
                        + "  WHERE pathId = (SELECT max(pathId) FROM tblPath);");
            }
            db.close();

        }

        /**
         * 
         * @param currentLocJSON
         *            this is JSON object which contains the location
         *            details according to the passed Latitude & Longitude
         *            value..
         * @return String result which should be the location name which we
         *         requested and returned as JSON from google api's We split
         *         the most suitable result from the JSON request
         */
        private String getLocationInfo(JSONObject currentLocJSON) {
            JSONArray jArray = null;
            try {

                jArray = currentLocJSON.getJSONArray("results");

                // Check is there any details available by checking the JSON
                // request
                if (jArray.length() != 0) {

                    for (int i = 0; i < jArray.length(); i++) {
                        locationName = jArray.getJSONObject(0)
                                .getJSONArray("address_components")
                                .getJSONObject(i).getString("long_name");

                        if (locationName != null) {
                            Toast.makeText(getApplicationContext(),
                                    locationName, Toast.LENGTH_SHORT)
                                    .show();
                            break;
                        }

                    }
                }
            } catch (JSONException e) {
                text.setText("JSONException");
                e.printStackTrace();
            }
            return locationName;
        }

        /**
         * 
         * @param latitude
         * @param longitude
         * @return JSON Object This function get latitude & longitude and
         *         pass them in to the maps.googleapis.com server and get
         *         location details as JSON result
         */
        private JSONObject getLocationInfoAsJSON(double latitude,
                double longitude) {

            StringBuilder stringBuilder = new StringBuilder();
            try {

                HttpPost httppost = new HttpPost(
                        "http://maps.googleapis.com/maps/api/geocode/json?latlng="
                                + latitude + "," + longitude
                                + "&sensor=true");

                HttpClient client = new DefaultHttpClient();
                HttpResponse response;
                stringBuilder = new StringBuilder();
                response = client.execute(httppost);
                HttpEntity entity = response.getEntity();
                InputStream stream = entity.getContent();
                int b;
                while ((b = stream.read()) != -1) {
                    stringBuilder.append((char) b);
                }
            } catch (ClientProtocolException e) {
                text.setText("ClientProtocolException");
            } catch (IOException e) {
                text.setText("IOException");
            } catch (Exception e) {
                text.setText("Exception");
            }

            JSONObject jsonObject = new JSONObject();
            try {
                jsonObject = new JSONObject(stringBuilder.toString());
            } catch (JSONException e) {
                text.setText("JSONException");
                e.printStackTrace();
            }
            return jsonObject;
        }
    };

    if (manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                listener);
    } else if (!manager
            .isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        manager.addTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER, false,
                false, false, false, true, false, false, 0, 5);
        manager.setTestProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER,
                true);
    }

    if (manager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        manager.requestLocationUpdates(MockGpsProvider.GPS_MOCK_PROVIDER,
                0, 0, listener);

        try {
            List<String> data = new ArrayList<String>();
            Log.d("LeeInuka", "1");
            InputStream is = getAssets().open("mock_gps_data.csv");
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is));
            Log.d("LeeInuka", "2");
            String line = null;
            while ((line = reader.readLine()) != null) {
                data.add(line);
                // Log.d("Lee", line);
                Log.d("LeeInuka", "3");
            }

            Log.d("LeeInuka", "4");
            String[] coordinates = new String[data.size()];
            data.toArray(coordinates);

            mMockGpsProviderTask = new MockGpsProvider();
            mMockGpsProviderTask.execute(coordinates);
        } catch (Exception e) {
            Log.d("MOKE", "........");
        }
    }

    // manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 10,
    // listener);

    /***
     * Pause/Start Recording Button
     */
    btnPause = (Button) findViewById(R.id.btnPause);
    /***
     * Stop Recording Button
     */
    btnStop = (Button) findViewById(R.id.btnStop);
    btnShowDetails = (Button) findViewById(R.id.button1);

}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    // store where we are before closing the app, so we can skip to the
    // location right away when restarting
    savedInstanceState.putInt(MOCK_GPS_PROVIDER_INDEX,
            mMockGpsProviderIndex);
    super.onSaveInstanceState(savedInstanceState);
}

// Tharika changed vibration

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.btnPause:
        tts.speak("Pause", TextToSpeech.QUEUE_FLUSH, null);
        // myVib.vibrate(100);
        break;

    case R.id.btnStop:
        tts.speak("Stop", TextToSpeech.QUEUE_FLUSH, null);
        // myVib.vibrate(100);
        break;

    default:
        break;

    }
}

public boolean onLongClick(View v) {
    switch (v.getId()) {
    case R.id.btnPause:

        if (stop) {
            stop = false;
            // Log.d("btn_stop", "Path Recording has been Paused");
            btnPause.setBackgroundResource(R.drawable.btn_start);
            tts.speak("Path Recording has been Paused",
                    TextToSpeech.QUEUE_FLUSH, null);
            Toast.makeText(getApplicationContext(),
                    "Path Recording has been Paused", Toast.LENGTH_LONG)
                    .show();
            manager.removeUpdates(listener);

        }

        else {
            manager.requestLocationUpdates(
                    MockGpsProvider.GPS_MOCK_PROVIDER, 0, 0, listener);
            btnPause.setBackgroundResource(R.drawable.btn_pause);
            tts.speak("Path Recording has been started",
                    TextToSpeech.QUEUE_FLUSH, null);
            stop = true;
        }
        break;

    case R.id.btnStop:

        Toast.makeText(getApplicationContext(),
                "Path Recording has been Stoped", Toast.LENGTH_LONG).show();
        tts.speak("Path Recording has been Stoped",
                TextToSpeech.QUEUE_FLUSH, null);

        try {
            mMockGpsProviderTask.cancel(true);
            mMockGpsProviderTask = null;
        } catch (Exception e) {
        }

        try {
            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager
                    .removeTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER);
        } catch (Exception e) {
        }

        manager.removeUpdates(listener);

        SQLiteDatabase db = dbHelper.getWritableDatabase();

        SimpleDateFormat sdf_1 = new SimpleDateFormat(
                "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");

        String curentEndDateandTime = sdf_1.format(new Date());

        db.execSQL("UPDATE tblPath SET destination = (SELECT curLocation FROM tblPathInfo WHERE infoId = (SELECT max(infoId) FROM tblPathInfo) ) , endTime = '"
                + curentEndDateandTime
                + "' WHERE pathId = (SELECT max(pathId) FROM tblPath);");

        db.close();

        db = dbHelper.getReadableDatabase();

        Cursor cu2 = db.rawQuery("SELECT max(pathId) FROM tblPath;", null);

        if (cu2.moveToNext()) {

            AppConstants.DataConstants.SELECTED_PATH_ID = cu2.getString(0);
        }

        db.close();

        startActivity(new Intent(PathRecorderPauseActivity.this,
                ShortCutPathActivity.class));
        Toast.makeText(getApplicationContext(),
                "Path has been recorded successfully", Toast.LENGTH_LONG);
        finish();
        break;

    case R.id.button1:

        String testData = "";
        String testData1 = "";

        db = dbHelper.getReadableDatabase();

        Cursor cu = db
                .rawQuery(
                        "SELECT * FROM tblPathInfo WHERE pathId = (SELECT max(pathId) FROM tblPath);",
                        null);

        while (cu.moveToNext()) {

            testData = testData + " ********** currentLoc : "
                    + cu.getString(4) + " & lat : " + cu.getString(2)
                    + " & lon : " + cu.getString(3);
        }

        Toast.makeText(getApplicationContext(), testData,
                Toast.LENGTH_SHORT).show();

        Cursor cu1 = db
                .rawQuery(
                        "SELECT * FROM tblPath WHERE pathId = (SELECT max(pathId) FROM tblPath);",
                        null);

        if (cu1.moveToNext()) {
            testData1 = cu1.getString(0) + " | " + cu1.getString(1) + " | "
                    + " | " + cu1.getString(2) + " | " + cu1.getString(3)
                    + " | " + cu1.getString(4) + " | " + cu1.getString(5);
        }

        Toast.makeText(getApplicationContext(), testData1,
                Toast.LENGTH_LONG).show();

        db.close();

    default:
        break;
    }
    return true;
}

public void onInit(int status) {
    if (AppConstants.VoiceOrTouch.vot == 0) {
        tts.speak(
                "Service is runing.Panel 3.It has two buttons.First button is Stop"
                        + "It is top on the screen.Second button is Pause.It is bottom on the screen."
                        + "If you choose stop it will stop the recording."
                        + "And if you choose Pause it will temporally stop the recording."
                        + "Please touch or give single tap to identify the buttons."
                        + "Please long press the button that you want to navigate.",
                TextToSpeech.QUEUE_FLUSH, null);
    }

    else if (AppConstants.VoiceOrTouch.vot == 1) {
        speechText = "Panel 3.It has two options as stop and paues."
                + "Please say stop to stop the recording path."
                + "Please say pause to pause the recording path.";

        HashMap<String, String> hm = new HashMap<String, String>();
        hm.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "ourVoice");
        tts.setOnUtteranceCompletedListener(this);
        tts.speak(speechText, TextToSpeech.QUEUE_FLUSH, hm);
    }

    if (status == TextToSpeech.SUCCESS) {
        if (tts.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
            tts.setLanguage(Locale.US);
    } else if (status == TextToSpeech.ERROR) {
        Toast.makeText(this, "Sorry! Text To Speech failed...",
                Toast.LENGTH_LONG).show();
    }

}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == MY_DATA_CHECK_CODE) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            // success, create the TTS instance
            tts = new TextToSpeech(this, this);
        }
    }

    else if (requestCode == REQUEST_CODE && resultCode == RESULT_OK
            && AppConstants.VoiceOrTouch.vot == 1) {
        // Log.d("Here", "Here");

        ArrayList<String> matches = data
                .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

        for (String bestMatch : matches) {
            if (bestMatch.contains("stop") || bestMatch.contains("sup")
                    || bestMatch.contains("pop")
                    || bestMatch.contains("map")) {
                Intent my = new Intent(getApplicationContext(),
                        RecordingDetailsActivity.class);
                startActivityForResult(my, 0);
                break;
            }

            else if (bestMatch.contains("Pause")
                    || bestMatch.contains("false")
                    || bestMatch.contains("fox")
                    || bestMatch.contains("post")
                    || bestMatch.contains("font")) {

                // Intent my = new Intent(getApplicationContext(),
                // PathRecorderPause.class);
                // startActivityForResult(my, 0);
                break;
            }

            else {
                // Log.i(TAG, "COMMAND_NOT_MATCHING");
            }

        }
    }

    else if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_MISSING_DATA) {
        // missing data, install it
        Intent installIntent = new Intent();
        installIntent
                .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
        startActivity(installIntent);
    }

    super.onActivityResult(requestCode, resultCode, data);
}

public void onDestroy() {
    super.onDestroy();

    if (tts != null) {
        tts.stop();
        tts.shutdown();
    }

    try {
        mMockGpsProviderTask.cancel(true);
        mMockGpsProviderTask = null;
    } catch (Exception e) {
        Log.d("mMockGpsProviderTask", e.getMessage());
    }

    try {
        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager
                .removeTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER);
    } catch (Exception e) {
        Log.d("LocationManager", e.getMessage());
    }

}

@Override
public void onResume() {
    mShaker.resume();
    if (tts != null) {
        tts.stop();
        tts.shutdown();
    }
    super.onResume();
}

@Override
public void onPause() {
    mShaker.pause();
    if (tts != null) {
        tts.stop();
        tts.shutdown();
    }
    super.onPause();

    try {
        mMockGpsProviderTask.cancel(true);
        mMockGpsProviderTask = null;
    } catch (Exception e) {

    }

    try {
        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager
                .removeTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER);
    } catch (Exception e) {
    }

}

private class MockGpsProvider extends AsyncTask<String, Integer, Void> {
    public static final String LOG_TAG = "GpsMockProvider";
    public static final String GPS_MOCK_PROVIDER = "GpsMockProvider";

    /** Keeps track of the currently processed coordinate. */
    public Integer index = 0;

    @Override
    protected Void doInBackground(String... data) {
        for (String str : data) {
            if (index < mMockGpsProviderIndex) {
                index++;
                continue;
            }

            publishProgress(index);

            Double latitude = null;
            Double longitude = null;
            Double altitude = null;
            try {
                String[] parts = str.split(",");
                latitude = Double.valueOf(parts[0]);
                longitude = Double.valueOf(parts[1]);
                altitude = Double.valueOf(parts[2]);
            } catch (NullPointerException e) {
                break;
            } catch (Exception e) {
                continue;
            }

            Location location = new Location(GPS_MOCK_PROVIDER);
            location.setLatitude(latitude);
            location.setLongitude(longitude);
            location.setAltitude(altitude);
            location.setTime(System.currentTimeMillis());

            Log.d(LOG_TAG + "-Inuka", location.toString());

            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.setTestProviderLocation(GPS_MOCK_PROVIDER,
                    location);

            try {
                Log.d(LOG_TAG + "_Traed", "22222");
                Thread.sleep(5000);
                Log.d(LOG_TAG + "_Traed", "22222w");

                if (Thread.currentThread().isInterrupted())
                    throw new InterruptedException("");
            } catch (InterruptedException e) {
                Log.d(LOG_TAG + "_Traed", "Exception  " + e.getMessage());
                break;
            }

            index++;
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        Log.d(LOG_TAG + "-2Inuka", "onProgressUpdate(): " + values[0]);
        mMockGpsProviderIndex = values[0];
    }
}

public void onUtteranceCompleted(String utteranceId) {
    Log.d("TTS", "On Finish()");
    startVoiceRecognitionActivity();
    tts.shutdown();
    tts = null;
}

private void startVoiceRecognitionActivity() {

    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "");
    startActivityForResult(intent, REQUEST_CODE);

}
} 
```

# c++ - 学习c++，结构输出变量

> ID：13004500
> 
> 赞同：1
> 
> 时间：2012-10-22T03:03:09.163
> 
> 标签：c++

说我有一个结构如下

```
struct stock{
    string ticker;
    double price;
    double volume;
    double eps;
}; 
```

如果我想在被要求时输出其中一个变量，例如价格，我是否必须做一个大的 if/else 或 switch 语句来匹配用户输入与成员，或者是否有更优雅的方式来做到这一点，因为我知道`stock.userInput`不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:08:40.910

```
struct stock s1;
cout<<" price is:"<< s1.price; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:27:52.873

没有特殊的关键字来找到你的变量（对不起打破你的泡沫），你必须使用一个逻辑语句。它会继续：

```
cout << "What would you like to see? (1)Price (2)etc...etc...";
cin >> input;
switch(input)
{
    case 1:
        cout << Obj.Price;
    break;
    case 2:
        cout << //....
    break;
} 
```

我个人喜欢使用键和 switch 语句，它往往更干净，更容易在程序中稍后返回和修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:55:27.427

如果你想摆脱大的`switch`/`if`语句，你可以使用`map`with`string`和一个指向成员的指针。假设您的`stock`结构，您可以使用：

定义地图（这里是双打）并初始化它：

```
std::map<std::string,double stock::*> double_members;
double_members["price"]=&stock::price;
double_members["volume"]=&stock::volume;
double_members["eps"]=&stock::eps; 
```

并用它来查找一些值：

```
stock stock1;
std::string input;
std::cin >> input;
if (double_members.find(input)!=double_members.end()) 
    std::cerr << "Value for " << input << " is: " << stock1.*double_members[input] << std::endl;
else
    std::cerr << "There's no field called " << input << std::endl; 
```

它仅限于单一类型，但您不能在运行时使用类似`std::cerr << A;`and`A`类型的语句来解析。如果您只关心`string`（或任何其他，但始终相同）值的表示，那么您可以将`map`s 包装在一个类中以搜索所有类型并将转换为 a `string`（或其他东西）的值输出。

但是`if`声明可能更容易，除非`struct`它真的很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:09:45.687

如果您认为它不适用于 g++ 4.7.1 及更早版本（但适用于 Visual C++ 11.0 及更高版本），那么就像...

```
#include <sstream>      // std::ostringstream
#include <string>       // std::string
using namespace std;

struct Stock
{
    string ticker;
    double price;
    double volume;
    double eps;

    string toString() const
    {
        ostringstream stream;
        stream
            << "Stock("
            << "ticker='" << ticker << "', "
            << "price=" << price << ", "
            << "volume=" << volume << ", "
            << "eps=" << eps
            << ")";
        return stream.str();
    }

    Stock(): ticker(), price(), volume(), eps() {}
};

#include <iostream>
#include <regex>
#include <stdexcept>
#include <stdlib.h>

bool err( string const& s )
{
    cerr << "!" << s << endl;
    exit( EXIT_FAILURE );
}

string lineFromUser( string const& prompt )
{
    string line;
    cout << prompt;
    getline( cin, line )
        || err( "oh my, failed to read line of input" );
    return line;
}

void cppMain()
{
    Stock stock;
    stock.price = 1.23;

    string const s = stock.toString();
    cout << s << endl;
    string const fieldname = lineFromUser( "Which field u want? " );
    regex const valuespec( fieldname + "\\s*\\=\\s*([^,\\)]*)" );  // 
    smatch what;
    if( regex_search( s, what, valuespec ) )
    {
        cout << "As we all know already, " << what.str() << "." << endl;
    }
    else
    {
        cout
            << "!Sorry, there's no field named '"
            << fieldname << "'"
            << endl;
    }
}

int main()
{
    try
    {
        cppMain();
        return EXIT_SUCCESS;
    }
    catch( exception const& x )
    {
        cerr << "!" << x.what() << endl;
    }
    return EXIT_FAILURE;
} 
```

示例用法：

```
[d:\开发\测试]
> 富
股票（股票代码=''，价格=1.23，交易量=0，每股收益=0）
你想要哪个领域？*每股收益*
众所周知，eps=0。

[d:\开发\测试]
> _

```

# c# - 在 C# 中调用类/方法的函数，如 php

> ID：13004503
> 
> 赞同：4
> 
> 时间：2012-10-22T03:03:45.327
> 
> 标签：c#, asp.net

我正在 c# 和 asp.net 中迈出第一步，我非常享受它。现在，我有一个问题...... C# 中是否有一个函数可以像在 php 中一样调用类/方法？
例如：

```
$class = array(
    "foo", // class name
    "bar" // method name
);
$params = array(
    "one",
    "two"
);
call_user_func_array($class, $params); //execute Foo->bar("one","two"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T03:07:17.243

不，没有任何内置功能可以做到这一点。您可以构建一个使用反射执行类似操作的方法，但这似乎是寻找问题的解决方案。

```
void Main()
{
    CallUserFuncArray("UserQuery+Foo", "Bar", "One", "Two");
}

// Define other methods and classes here
public class Foo
{
    public static void Bar(string a, string b){}
}

public void CallUserFuncArray(string className, string methodName, params object[] args)
{
    Type.GetType(className).GetMethod(methodName).Invoke(null, args);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:10:33.863

正如其他人所指出的，有多种方法可以模拟这一点，但 C# 中没有“烘焙”功能。最灵活的方法是使用反射，但如果您事先知道将要调用的方法列表，则可以采用更简单（也更容易处理）的方式。

```
class Foo
{
    public static string FooA(int p1, int p2) 
    { 
        return "FooA:" + p1 + p2; 
    }
    public static string FooB(int p1, int p2) { return "FooB:" + p1 + p2; }
    public static string FooC(int p1, int p2) { return "FooC:" + p1 + p2; }
}    
class Bar
{
    //You can use Func<int, int, object> instead of a delegate type,
    //but this way is a little easier to read.
    public delegate string Del(int p1, int p2);

    public static string DoStuff()
    {        
        var classes = new Dictionary<string, Dictionary<string, Del>>();
        classes.Add("Foo", new Dictionary<string, Del>());
        classes["Foo"].Add("FooA", Foo.FooA);
        classes["Foo"].Add("FooB", Foo.FooB);
        classes["Foo"].Add("FooC", Foo.FooC);

        //...snip...

        return classes["Foo"]["FooA"](5, 7);
    }
} 
```

[顺便说一句，这确实有效。](http://rextester.com/SUD66091)

如果您*不*知道要以这种方式提供哪些方法，我建议您重新考虑您尝试执行的操作。我能想到的使用字符串来选择执行路径的唯一原因是，如果您打算从用户那里获取这些字符串。像这样暴露应用程序的内部细节不仅是一个巨大的禁忌，而且它非常接近`eval`-type 功能。C# 没有`eval`方法是有原因的，并不是因为设计者忘记把它放进去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T04:03:34.953

正如@StriplingWarrior 所说，没有内置的等价物`call_user_func_array`，但您可以使用反射做类似的事情。

问题是反射代码很快就会变得非常复杂，如果你不是很小心，它会变得脆弱和容易出错。

例如，以下功能可以满足您的要求：

```
public static void CallUserFuncArray(string[] func, params string[] args)
{
    var type = Type.GetType(func[0]);
    if (type == null)
    {
        throw new ArgumentException("The specified Class could not be found");
    }

    var method = type.GetMethod(func[1], BindingFlags.Static | BindingFlags.Public);
    if (method== null)
    {
        throw new ArgumentException("The specified Method could not be found");
    }

    method.Invoke(null, args);
} 
```

你这样称呼它：

```
var func = new [] { "Foo", "Bar" };
var args = new [] { "one", "two" };

CallUserFuncArray(func, args); 
```

问题虽然很多。

*   该代码仅在`Bar`是公共静态方法时才有效。
*   如果您需要在对象上调用实例方法，则会出现全新的复杂层。
*   `args`如果数组中的参数不适合目标方法，代码将会爆炸。
*   这里不支持调用除了字符串参数之外的任何方法。可以在调用“Invoke”之前查询该方法预期的参数类型并转换类型，但您会变得更加混乱。
*   如果您需要满足这些情况，还有更多的边缘情况会进一步破坏此代码的复杂性。

套用卡尔富兰克林（dotNetRocks 成名）：

> 我有一个需要解决的问题，所以我使用了反射。现在我有两个问题。

如果您发现自己需要做这种事情，那么您可能需要重新考虑您的整体设计。

# c# - 这样的 Linq 查询有什么问题

> ID：13004506
> 
> 赞同：1
> 
> 时间：2012-10-22T03:03:57.070
> 
> 标签：c#, linq

我有两张桌子：

```
Team: teamId, teamName
Player: playerId, teamId, playerName 
```

我想通过 playerName 获取 teamName。我写了两个查询，其中一个不起作用。

```
var query = from t in dc.Teams 
            where t.teamId == ((from p in dc.Players 
                                where p.playerName == "kobe" 
                                select p.teamId).SingleOrDefault()) 
            select t.teamName;  //Doesn't work

var query = from t in dc.Teams 
            join p in dc.Players 
                on t.teamId equals p.teamId 
            where p.playerName == "kobe" 
            select t.teamName;  //Works 
```

谁能告诉我为什么第一个查询不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:34:38.570

如果有一个或零个名为“kobe”的玩家，则两个查询都应该产生相同的结果。如果有多个名为“kobe”的球员，第一个查询将不会返回任何内容，因为它的子查询使用`SingleOrDefault`，如果集合不包含恰好一个值，则返回默认值，而第二个查询将返回 teamName每个球员都叫“科比”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:49:03.000

Risky Martin 已经提到了原因，但除此之外，您还可以`FirstOrDefault`使用`SingleOrDefault`. 通过使用`FirstOrDefault`，您的查询可以返回任意数量的结果，但您声明您只想要第一个结果。

```
var query = from t in dc.Teams 
            where t.teamId == ((from p in dc.Players 
                                where p.playerName == "kobe" 
                                select p.teamId).FirstOrDefault()) 
            select t.teamName;  //Now it works 
```

# linux - 解析文件中的数据

> ID：13004508
> 
> 赞同：0
> 
> 时间：2012-10-22T03:04:02.860
> 
> 标签：linux, ubuntu, awk, grep

我有一个文本文件，其中包含以下类型的数据：

```
Example:
10212012115655_113L_-247R_247LRdiff_0;
10212012115657_114L_-246R_246LRdiff_0;
10212012115659_115L_-245R_245LRdiff_0;
10212012113951_319L_-41R_41LRdiff_2;
10212012115701_116L_-244R_244LRdiff_0;
10212012115703_117L_-243R_243LRdiff_0;
10212012115705_118L_-242R_242LRdiff_0;
10212012113947_317L_-43R_43LRdiff_0;
10212012114707_178L_-182R_182LRdiff_3;
10212012115027_278L_-82R_82LRdiff_1; 
```

我想复制所有具有

```
1) _2 _3 _1 at the end of it into another file along with
2) stripping out the semicolon at the end of it. 
```

所以最后文件中的数据将是

```
Example:  
10212012113951_319L_-41R_41LRdiff_2
10212012114707_178L_-182R_182LRdiff_3
10212012115027_278L_-82R_82LRdiff_1 
```

我该怎么做呢？我正在使用 linux ubuntu 10.04 64bit

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:10:19.653

这是一种使用方法`sed`：

```
sed -n 's/\(.*_[123]\);$/\1/p' file.txt > newfile.txt 
```

这是一种使用方法`grep`：

```
grep -oP '.*_(1|2|3)(?=;$)' file.txt > newfile.txt 
```

内容`newfile.txt`：

```
10212012113951_319L_-41R_41LRdiff_2
10212012114707_178L_-182R_182LRdiff_3
10212012115027_278L_-82R_82LRdiff_1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:08:58.853

如果格式始终相同，并且每行的末尾只有一个分号，您可以使用它`grep`来查找行，然后`sed`替换`;`：

```
grep -P "_(1|2|3);$" your_file | sed 's/\(.*\);$/\1/' > your_new_file 
```

`-P`命令中的告诉`grep`它使用 Perl-regex 解释器进行解析。或者，您可以使用`egrep`（如果可用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:29:54.917

如果您有兴趣，这里是 awk 解决方案：

```
awk '/_[321];$/{gsub(/;/,"");print}' your_file 
```

测试如下：

```
> awk '/_[321];$/{gsub(/;/,"");print}' temp
10212012113951_319L_-41R_41LRdiff_2
10212012114707_178L_-182R_182LRdiff_3
10212012115027_278L_-82R_82LRdiff_1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T03:21:45.373

```
tr -c ";" "\n" > newfile
grep '*_[123]$' newfile > newfile 
```

这应该有效。首先，您将全部翻译并保存到目标文件`;`。`\n`然后使用 grep 匹配仅包含`*_[123]`在末尾的行并将匹配结果再次保存到该文件中，该文件将替换所有以前的数据。最后我用`$`.

一些使用[tr](http://www.cyberciti.biz/faq/how-to-use-linux-unix-tr-command/)和[grep](http://www.cyberciti.biz/faq/howto-use-grep-command-in-linux-unix/)的例子，以防你不熟悉它。

# hadoop - 在 MapReduce 中错误地读取 gzwirte (zlib) 写入的 .gz 文件

> ID：13004512
> 
> 赞同：0
> 
> 时间：2012-10-22T03:04:45.527
> 
> 标签：hadoop, mapreduce, zlib

.gz 文件由名为 gzputs & gzwrite 的 C 程序编写。

我按 列出压缩文件内容`gzip -l`，发现`uncompressed`值不正确。该值似乎等于最新`gzputs`或`gzwrite`写入 .gz 文件的字节数。这使得`ratio`nagitive 价值。

当这些 .gz 文件用作 Map/Reduce 的输入时发生错误。在地图阶段似乎只能读取 .gz 文件的一部分。（零件的大小似乎等于上述`uncompressed`值）。

有人可以教我在 C 程序或 Map/Reduce 中应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:15:41.497

问题解决了。Map/Reduce 中的读取错误似乎是[GZIPInputStream 的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4691425)。

我从 Internet 上找到了一个可以正确读取 gz 文件的类 GZIPInputStream 类。然后我在hadoop中扩展和定制了TextInputFormat和LineRecordReader。现在可以了。

# c# - 使用正则表达式解析代码 - 如何使用额外的 {...} 捕获方法的主体？

> ID：13004518
> 
> 赞同：-1
> 
> 时间：2012-10-22T03:05:39.363
> 
> 标签：c#, .net, regex, cil

> **可能重复：**
> [使用正则表达式解析 CIL 代码](https://stackoverflow.com/questions/12999422/parse-cil-code-with-regex)

这个问题来自[Parse CIL code with Regex](https://stackoverflow.com/questions/12999422/parse-cil-code-with-regex) To capture methods' body I added brackets `()`，它变成

`var regex3 = @"(\.method\s[^{]+({(?!\s*}).*?}))";`

它工作得很好。例如，`capture.Groups[2]`给我

```
{
    .entrypoint
    // 
    .maxstack  8
    IL_0000:  nop
    IL_0001:  call       void TestAssemblyConsole.Test::Method1()
    IL_0006:  nop
    IL_0007:  call       int32 TestAssemblyConsole.Test::Method2()
    IL_000c:  pop
    IL_000d:  call       string [mscorlib]System.Console::ReadLine()
    IL_0012:  pop
    IL_0013:  ret
  } 
```

这就是我要找的。但是，如果我有

```
.method public hidebysig static void  Method1() cil managed
  {
    // 
    .maxstack 3
    .locals init (class [mscorlib]System.Exception V_0)
    IL_0000:  nop
    .try
    {
      .try
      {
        IL_0001:  nop
        IL_0002:  ldstr      "gfhgfhgfhg"
        IL_0007:  call       void [mscorlib]System.Console::WriteLine(string)
        IL_000c:  nop
        IL_000d:  nop
        IL_000e:  leave.s    IL_0020

      }  // end .try
      catch [mscorlib]System.Exception 
      {
        IL_0010:  stloc.0
        IL_0011:  nop
        IL_0012:  ldstr      "exception"
        IL_0017:  call       void [mscorlib]System.Console::WriteLine(string)
        IL_001c:  nop
        IL_001d:  nop
        IL_001e:  leave.s    IL_0020

      }  // end handler
      IL_0020:  nop
      IL_0021:  leave.s    IL_0031

    }  // end .try
    finally
    {
      IL_0023:  nop
      IL_0024:  ldstr      "finally"
      IL_002f:  nop
      IL_0030:  endfinally
    }  // end handler
    IL_0031:  nop
    IL_0032:  ret
  } 
```

那么它就不能很好地工作。由于在方法内，我只是捕获了方法主体的**一部分**`} .. }`

```
{
    // 
    .maxstack  1
    .locals init (class [mscorlib]System.Exception V_0)
    IL_0000:  nop
    .try
    {
      .try
      {
        IL_0001:  nop
        IL_0002:  ldstr      "gfhgfhgfhg"
        IL_0007:  call       void [mscorlib]System.Console::WriteLine(string)
        IL_000c:  nop
        IL_000d:  nop
        IL_000e:  leave.s    IL_0020

      } 
```

如何更改正则表达式以捕获所有方法的主体，即使它包含许多 { .. } ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:22:23.743

基本上，正则表达式不是匹配嵌套结构的正确工具，但是在您的情况下，您可以使用 {.*} 之类的东西来匹配最后一个 } 之前的所有内容（显然这不适用于多种方法。）

自己编写一个 CF 语法解析器或使用 Antlr 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:06:09.407

### 不推荐使用正则表达式解析结构代码，这是不好的做法

如果您的输入结构如您的问题所示，请尝试使用正则表达式模式

```
(\.method\s[^{]+?([\n\r]+\s*){(?!\s*}).*?\2}) 
```

**[在这里](http://regexpal.com/?flags=gs&regex=%28%5C.method%5Cs%5B%5E%7B%5D%2b?%28%5B%5Cn%5Cr%5D%2b%5Cs*%29%7B%28?!%5Cs*%7D%29.*?%5C2%7D%29&input=.class%20private%20auto%20ansi%20beforefieldinit%20MyApp.Program%0A%20%20%20%20%20%20%20extends%20%5Bmscorlib%5DSystem.Object%0A%7B%0A%0A%20%20.method%20private%20hidebysig%20static%20void%20%20Main%28string%5B%5D%20args%29%20cil%20managed%0A%20%20%7B%0A//%20there%20are%20two%20leading%20space%20before%20staring%20curly%20bracket%0A%20%20%20%20%20code%20here%0A%20%20%20%20%20%7B%20%20%20%7D%0A%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%7B%7D%0A%20%20%20%20%20%7D%0A%20%20%7D%20%20%0A//%20there%20are%20also%20two%20leading%20space%20before%20ending%20curly%20bracket%0A%0A%0A%20%20.method%20public%20hidebysig%20specialname%20rtspecialname%20%0A%20%20%20%20%20%20%20%20%20%20instance%20void%20%20.ctor%28%29%20cil%20managed%0A%20%20%20%20%7B%0A//%20there%20are%20four%20leading%20space%20before%20staring%20curly%20bracket%0A%20%20%20%20%20%20code%20here%0A%20%20%20%20%7D%20%20%0A//%20there%20are%20also%20four%20leading%20space%20before%20ending%20curly%20bracket%0A%0A%20%20%20.method%20public%20hidebysig%20newslot%20virtual%20%0A%20%20%20%20%20%20%20%20%20%20instance%20string%20%20Invoke%28string%20a%29%20runtime%20managed%0A%20%20%7B%0A%20%20%7D%0A%0A%7D)**测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:23:11.580

这不是您可以使用正则表达式完成的事情。要处理这样的嵌套结构，您需要使用上下文无关的语法分析器。

在您的情况下，您可能可以使用一个简单的扫描仪来计算您看到 a 的次数和您看到 a`{`的次数`}`，然后只要这些计数相等，就提取方法体。但是我是，如果您要找到需要担心的其他分隔符（或者您将不得不处理注释），那么这将很快变得复杂，而解析器生成器将是您想要的.

# python - PyScripter 输入消息框

> ID：13004519
> 
> 赞同：0
> 
> 时间：2012-10-22T03:05:52.163
> 
> 标签：python, messagebox, pyscripter

我使用 PyScripter 进行 Python 编程，我发现 raw_input/input 使用 MessageBox 进行输入非常烦人。他们有什么方法可以切换到通过在控制台中写入而不弹出消息框来获取输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T06:01:34.793

许多人在 pyscripter 的 google 代码主页中抱怨它。看到[这个](https://code.google.com/p/pyscripter/issues/detail?id=311)。

该问题于 2009 年提出，至今仍未解决。这是迄今为止我发现的关于 pyscripter 的唯一烦恼。

# ruby-on-rails-3 - 在测试环境中设置 default_url_options 似乎不起作用

> ID：13004522
> 
> 赞同：13
> 
> 时间：2012-10-22T03:06:30.907
> 
> 标签：ruby-on-rails-3, testing, rspec

我已将以下代码放入我的`config/environments/test.rb`文件中：

```
config.action_mailer.default_url_options = { :host => "localhost:3000" } 
```

但是，当我运行测试时，所有路由都使用`http://test.host`. 我正在尝试使用不接受`http://test.host`作为有效回调 URI 的 API，因此我需要更改它以正确接收 API 响应。知道为什么这不起作用吗？（我在我的测试套件中使用 RSpec、Guard 和 Spork）。

**编辑**：可能相关 - 这是在控制器规范内完成的。

**EDIT2**：似乎在通过`get`,`post`等发出请求后它会发生变化。在测试中运行以下代码：

```
Rails.logger.debug users_url
get 'http://google.com'
Rails.logger.debug users_url 
```

将产生以下输出：

```
http://localhost:3000/users
...get request related response here
http://google.com/users 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-04T17:43:53.857

现在你可以`test.rb`像这样设置它们：

```
Rails.application.routes.default_url_options[:host]= 'localhost:3000' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-01-16T03:24:47.870

`Rails.application.routes.default_url_options[:host]= 'localhost:3000'`

在developemnt.rb/test.rb中，可以更简洁如下：

```
Rails.application.configure do
  # ... other config ...

  routes.default_url_options[:host] = 'localhost:3000'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:09:57.743

你是如何运行你的测试的？也许附加`RAILS_ENV=test`可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T04:15:23.480

根据我的经验，`url_options`如果没有一点黑客攻击，就不会通过测试。

参见例如

*   [如何为功能测试设置语言环境 default_url_options (Rails)](https://stackoverflow.com/questions/1987354/how-to-set-locale-default-url-options-for-functional-tests-rails)
*   [http://www.ruby-forum.com/topic/3448797](http://www.ruby-forum.com/topic/3448797)

在尝试在测试中设置语言环境时，我经常遇到这个问题。不过，我从未使用过动作邮件程序，因此可能有更简单的方法来做到这一点。

我找到的用于设置默认语言环境的解决方案`url_options`只是[修补 actiondispatch](https://stackoverflow.com/questions/12414400/basic-devise-spec-with-i18n)并强制它使用我想要的任何语言环境。你可以这样适应你的情况：

```
class ActionDispatch::Routing::RouteSet
  def url_for_with_default_url_options(options)
    url_for_without_default_url_options(options.merge(:host => "localhost:3000" ))
  end

  alias_method_chain :url_for, :default_url_options
end 
```

我将该代码放在 spec/support 中的一个文件中，以便在 rspec 测试中使用它，并且我还从我的 env.rb 文件中需要它，因此我也可以在黄瓜测试中使用它。

请记住，这将在*任何地方*修补它，无论是在测试代码中还是在测试下运行的实际代码中，它都会覆盖`:host`您尝试传入的密钥的任何其他设置（因为补丁合并了选项顶部的修复传入`url_for`)。在你的情况下，我认为这不应该是一个问题。

不过，猴子补丁并不是一个非常优雅的解决方案，我在其他一切都失败后使用了它。您可能会找到特定于操作邮件程序的更简单的解决方案。

# functional-programming - LISP 全局 alist 变量

> ID：13004534
> 
> 赞同：3
> 
> 时间：2012-10-22T03:08:43.607
> 
> 标签：functional-programming, lisp, common-lisp

我是 LISP 的新手，这是我对它的全局变量的疑问。

我想做的是创建一个“alist”，可以将键值对存储在结构中。这是我的示例代码：

```
(setq *x* '())

(acons 'apple 'fruit *x*)

*x*

(first *x*) 
```

我希望我的输出看起来像，在我添加这`(apple.fruit)`对之后，`x`应该是`((apple.fruit))`，但这是我得到*的（在加载上述代码时）*：

```
CL-USER> 
NIL
((APPLE . FRUIT))
NIL  <--- this is still nil?
NIL 
```

任何人都可以帮我解决这个问题，因为我不确定为什么我不能为变量添加值`x`。

另外，我还有一个关于 alist 的问题：
有没有办法通过键查找列表中的元素？
例如，对于上面的列表，如何使用 key`apple`找到其对应的 value `fruit`？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T03:12:27.430

该函数[`acons`](http://www.lispworks.com/documentation/HyperSpec/Body/f_acons.htm)没有副作用，即不修改`*x*`.

你必须`setq`得到结果才能得到`acons`坚持的结果`*x*`：

```
(setq *x* (acons 'apple 'fruit *x*)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:37:11.603

如果你想做*函数式编程*，那么可变全局变量绝对不是一条路。

*函数式编程*主要关注通过调用带参数的函数来进行计算。

解决方案通常是递归的。

比方说，我们有一份水果及其价格的清单，我们想要为每个水果类别提供一个价格总和。让我们尝试使用递归解决方案`ACONS`。

```
(defun note-category-price (type price sums)
  (let ((pair (assoc type sums)))
    (if pair
        (progn (incf (cdr pair) price) sums)
      (acons type price sums)))) 
```

在上面的函数中，您可以看到该函数直接返回调用的结果`ACONS`。它不被存储。

```
(defun compute-price-sums (data sums)
  (if (null data)
      sums
    (compute-price-sums (rest (rest data))
                        (note-category-price (first data)
                                             (second data)
                                             sums)))) 
```

在上述函数中，扩展数据结构将用于递归调用。

例子：

```
CL-USER 22 > (compute-price-sums
              '(apple 10 orange 20 banana 10 apple 20
                grape 5 orange 75 apple 30 peach 30
                orange 90 apple 20)
              nil)

((PEACH . 30) (GRAPE . 5) (BANANA . 10) (ORANGE . 185) (APPLE . 80)) 
```

# facebook - 实现 facebook Like 按钮时访问被拒绝错误

> ID：13004536
> 
> 赞同：0
> 
> 时间：2012-10-22T03:08:51.560
> 
> 标签：facebook, plugins, facebook-like, facebook-javascript-sdk

我正在尝试在我的网站上实现 facebook Like 按钮，它没有显示在我的屏幕上，但在其他人的屏幕上查看时效果很好。[http://goo.gl/nj5UU](http://goo.gl/nj5UU)。我在 Google Chrome Inspect Element 功能中也遇到了这个错误`Failed to load resource: the server responded with a status of 403 (Access Denied) http://connect.facebook.net/en_US/all.js`

请问如何使插件显示在我的屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:41:18.513

它似乎工作正常。你可以检查一下 using`https://connect.facebook.net/en_US/all.js`代替`http://connect.facebook.net/en_US/all.js`吗？

# sql - 为什么 CREATE TABLE 中的一个标识符是双引号，而不是其他标识符？

> ID：13004537
> 
> 赞同：0
> 
> 时间：2012-10-22T03:08:54.013
> 
> 标签：sql, postgresql, identifier, ddl

我摆桌子

```
CREATE TABLE author (
  id serial NOT NULL,
  name character varying(255) NOT NULL,
  orcid character varying(128) NOT NULL,
  "position" integer NOT NULL,
  CONSTRAINT author_pkey PRIMARY KEY (id )
); 
```

为什么`"position"`名称中包含`""`?
我怎样才能从中`""`删除`position`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:18:01.887

[根据手册](https://www.postgresql.org/docs/current/sql-keywords-appendix.html)，`position`是

> 非保留（不能是函数或类型）

它是标准 SQL 中的保留字。您看到的可能是`pgAdmin`在用作标识符时双引号 SQL 标准中的所有保留字的输出或某些其他客户端的输出。

这个语句在语法上是正确的：

```
SELECT position FROM author LIMIT 1; 
```

您总是*可以用*双引号括起标识符（从而保留混合大小写的拼写）。这也有效：

```
SELECT "position" FROM author LIMIT 1; 
```

但是这里需要双引号：

```
SELECT "where" FROM author LIMIT 1;
SELECT "CaMeL" FROM author LIMIT 1;
SELECT "a-b-c" FROM author LIMIT 1; 
```

# css - 文本换行时帖子标题的边距/填充

> ID：13004542
> 
> 赞同：-1
> 
> 时间：2012-10-22T03:09:33.390
> 
> 标签：css, title, word-wrap

[http://www.gmnc.org/](http://www.gmnc.org/)

右侧边栏中的帖子 - 当 h4 标题换行时，CSS 似乎不知道有 2 行 - 底部的边距/填充从第一行开始设置。我可以弄乱 CSS，但似乎无法让它正确地分隔空间。有任何想法吗？

这就是我的意思：[https ://img.skitch.com/20121015-cqwmjpt6ct353bxrjde4hmgysu.jpg](https://img.skitch.com/20121015-cqwmjpt6ct353bxrjde4hmgysu.jpg)

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:20:02.290

您在 screen.css 的第 29 行为 h4s 设置了 1.25em 的高度。

如果你删除它，下一个元素的位置应该基于文本结束的位置，而不是 h4 的高度告诉它结束的位置。

# ios - MPMediaPickerController 在 iPad 上缺少搜索功能

> ID：13004549
> 
> 赞同：7
> 
> 时间：2012-10-22T03:10:59.133
> 
> 标签：ios, ipad, search, mpmediapickercontroller

当`MPMediaPickerController`使用相同的代码设置搜索功能时，搜索功能在 iPhone 上有效，但在 iPad 上无效。iPhone 上的选择器中有一个搜索框，但 iPad 上没有。

有没有办法在 iPad 上启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T20:56:12.047

我在 8 月份提交了一份关于此问题的错误报告（ID：12157125），目前还没有任何消息，所以没有办法启用此功能。[但是，您可以使用UITableView](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html)和一些[MPMediaQueries](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html)的组合从头开始重新制作选择器，让您可以自由添加自己的搜索功能。

# google-app-engine - 为什么 Logger 会使我的 Google Apps JSP 崩溃？

> ID：13004550
> 
> 赞同：1
> 
> 时间：2012-10-22T03:11:23.660
> 
> 标签：google-app-engine, jsp

我正在通过 Eclipse 在本地运行 Google Apps。我连接到`http://localhost:8888/`，有时 Eclipse 会从 AccessControlContext.class 中的第 374 行抛出异常：

```
 throw new AccessControlException("access denied "+perm, perm); 
```

这是堆栈跟踪：

```
Thread [299085@qtp-12256262-2] (Suspended (exception AccessControlException))   

AccessControlContext.checkPermission(Permission) line: 374  
AccessController.checkPermission(Permission) line: 546  
DevAppServerFactory$CustomSecurityManager(SecurityManager).checkPermission(Permission) line: 532    
DevAppServerFactory$CustomSecurityManager.checkPermission(Permission) line: 289 
DevAppServerFactory$CustomSecurityManager(SecurityManager).checkPackageAccess(String) line: 1512    
Launcher$AppClassLoader.loadClass(String, boolean) line: 298    
Launcher$AppClassLoader(ClassLoader).loadClass(String) line: 247    
ResourceBundle$RBClassLoader.loadClass(String) line: 435    
ResourceBundle$Control.newBundle(String, Locale, String, ClassLoader, boolean) line: 2289   
ResourceBundle.loadBundle(CacheKey, List<String>, Control, boolean) line: 1364  
ResourceBundle.findBundle(CacheKey, List<Locale>, List<String>, int, Control, ResourceBundle) line: 1328    
ResourceBundle.findBundle(CacheKey, List<Locale>, List<String>, int, Control, ResourceBundle) line: 1282    
ResourceBundle.findBundle(CacheKey, List<Locale>, List<String>, int, Control, ResourceBundle) line: 1282    
ResourceBundle.getBundleImpl(String, Locale, ClassLoader, ResourceBundle$Control) line: 1224    
ResourceBundle.getBundle(String) line: 705  
Level.getLocalizedName() line: 223  
SimpleFormatter.format(LogRecord) line: 64  
ConsoleHandler(StreamHandler).publish(LogRecord) line: 179  
ConsoleHandler.publish(LogRecord) line: 88  
Logger.log(LogRecord) line: 478 
Logger.doLog(LogRecord) line: 500   
Logger.log(Level, String) line: 523 
Logger.warning(String) line: 1026 
```

我只是这样称呼：

```
 log.warning("string"); 
```

并且日志被初始化如下：

```
 private static final Logger log = Logger.getLogger(MyServletName.class.getName()); 
```

什么是破？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:31:50.500

尝试改用这条线。在编写 GAE 代码时，我通常使用类似于以下行的内容：

```
private static final Logger log = Logger.getLogger(MyServletName.class.getSimpleName()); 
```

因此，使用`getSimpleName()`而不是`getName()`. 阅读[getName()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getName())和[getSimpleName()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getSimpleName())上的 java.lang.Class javadoc 。前者可能会在类类型名称的末尾附加一个“L”字符，而后者不具备这种（在您的情况下是不受欢迎的）行为。

另外，考虑对类的 Logger 对象使用**Guice 注入**。

# php - 如何在 Zend Framework 2 中添加 Ajax 请求

> ID：13004558
> 
> 赞同：3
> 
> 时间：2012-10-22T03:12:41.657
> 
> 标签：php, zend-framework2

如何在 zend 框架 2 中执行 ajax 请求？我是 zend 框架 2 的初学者。所以我不确定如何禁用布局...对于我的 json 响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:14:39.873

听起来你想在 zf2 中执行 ajax 请求。

 `````
 $viewModel = new ViewModel();

 $viewModel->setTerminal(true);
 return $viewModel; 
````  `* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T03:30:36.967

你的ajax url必须是这样的`baseurl+'/yourcontroller/ajax'`

在你的 ajax 动作中

```
public function ajaxAction()
{
      $this->_helper->layout->disableLayout();
      $this->_helper->viewRenderer->setNoRender(); //ajax dont wants a view

     //you can access your params like this

     echo $this->_helper->getParam('paramname');exit;

} 
`````

# c# - 检查DataReader是否为空

> ID：13004559
> 
> 赞同：4
> 
> 时间：2012-10-22T03:13:00.593
> 
> 标签：c#, visual-studio-2010, datareader

`DataReader`当为空时，我的代码不会运行。下面是我的代码。

我的工作是关于日期安排。我的问题是关于假期限制。当用户输入日期（开始日期和结束日期）时，程序将检查输入的日期之间是否有假期。如果`DataReader`没有任何数据，则应保存输入的日期，或者如果`DataReader`有数据，则不保存输入的日期并且程序会给出错误消息。

```
try
{
    econ = new SqlConnection();
    econ.ConnectionString = emp_con;
    econ.Open();
    ecmd = new SqlCommand("SELECT CD_Date FROM CONS_DATES where CD_Date between '" + Convert.ToDateTime(dtpStart.Text) + "' and '" + Convert.ToDateTime(dtpEnd.Text) + "'", econ);
    ecmd.CommandType = CommandType.Text;
    ecmd.Connection = econ;
    dr = ecmd.ExecuteReader();
    while (dr.Read())
    {
        DateTime cdname = (DateTime)dr["CD_Date"];

        //This code is working
        if (Convert.ToDateTime(cdname) >= Convert.ToDateTime(dtpStart.Text) || Convert.ToDateTime(cdname) <= Convert.ToDateTime(dtpEnd.Text))
        {
            MessageBox.Show("Holiday Constraint. Creating Record Denied.");
        } //if

        //This code is not working. When the program fetch with no record, it should be continue to add the record but it's not working
        else
        if (dr == null || !dr.HasRows)
        {
            //In this area is my code for inserting the entered data.
            MessageBox.Show("Add na|!!!. Creating Record Denied.");
        }//if else
    }//while
}//try
catch (Exception x)
{
    MessageBox.Show(x.GetBaseException().ToString(), "Connection Status", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T03:40:38.067

您的问题是，`while`循环仅在`dr`有一条或多条记录时运行。但是，如果`dr`是，`null`那么`while`循环将永远不会运行。

更好的解决方案是拥有一个`System.Data.SqlClient.SqlDataReader`.

并检查，

```
if (!dr.HasRows)
{
    // Your code to save the records, if no holidays found
}
else
{
    // Your code to show the error message, if there is one or more holidays
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:18:10.557

`while(dr.Read())`表示 dr 至少有 1 行。

所以 else 永远不会执行

你能在while之前做其他条件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:07:01.660

我尝试了我的想法，它回答了我的问题。我所做的是在 datagridview 中显示获取的数据，然后我创建了一个条件，如果 datagridview 有记录，那么我的记录将不会被保存，如果 datagridview 没有任何记录，那么记录将被保存。

谢谢大家！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T01:13:42.383

试试这个：

```
while (sqlreader.Read())
{
    tbSubscriptionInfo.Text = sqlreader["nr_ore"].ToString();
}

if (!sqlreader.HasRows)
{
    tbSubscriptionInfo.Text = "";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-02T11:36:34.277

```
if (dr == null || !dr.HasRows)
{
    // Your code to show the error message, if there is one or more holidays       
}
else
{
    // Your code to save the records, if no holidays found
} 
```

# mysql - 循环运行时从串行端口连续读取数据

> ID：13004560
> 
> 赞同：2
> 
> 时间：2012-10-22T03:13:45.243
> 
> 标签：mysql, c, while-loop

首先，请参考这段代码：

```
while(1) {
    lt = time(NULL);
    ptr = localtime(&lt);

    int n = read (fd, buf, sizeof(buf));
    strftime(str, 100, "%c", ptr);

    int temp = sprintf(tempCommand, "UPDATE roomtemp SET Temperature='%s' WHERE Date='Today'", buf);
    temp = sprintf(dateCommand, "UPDATE roomtemp SET Date='%s' WHERE Type='DisplayTemp'", str);

    printf("%s", buf);
    mysql_query(conn, tempCommand);
    mysql_query(conn, dateCommand);
} 
```

读取功能实际上是读取从串行端口进来的数据。它工作得很好，但我遇到的问题（我认为）是循环执行所需的时间。我每秒都有数据发送到串行端口。假设数据是每秒“22”。这个循环的作用是读入“2222”或有时读入“222222”。我认为正在发生的是循环需要太长时间来迭代，这会导致数据在串行缓冲区中累积。read 语句读取缓冲区中的所有内容，因此给了我重复的值。

有没有办法解决这个问题？也许在循环结束时，我可以刷新缓冲区。但我不确定我知道如何做到这一点。或者也许有一些方法可以减少循环内的代码，以便首先减少每次迭代的总时间。我的猜测是 MySQL 查询是最耗时的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:30:14.717

首先，您应该检查来自 的错误`read`，并正确终止接收到的“字符串”。

要继续解决您的问题，有几种方法可以解决此问题。一种是将串行端口的读取或数据库更新放在单独的线程中。然后你可以在线程之间传递“消息”。但是要小心，因为您的数据库似乎很慢并且消息队列可能会建立。这种消息堆积可以通过使用大小为 1 的消息队列来避免，该队列始终包含最新的温度读数。然后你只需要温度读取线程设置的一个标志，数据库更新线程检查然后清除。

另一种解决方案是修改用于通信的协议，因此它包含一个数字来表示消息的大小。

# eclipse - Eclipse中使用m2e的自描述项目

> ID：13004563
> 
> 赞同：2
> 
> 时间：2012-10-22T03:14:15.133
> 
> 标签：eclipse, maven, m2e

我正在使用 Eclipse 和 m2e 将 Maven 项目导入 Eclipse。

eclipse 文档说明了有关 .project 文件的以下内容：

```
The purpose of this file is to make the project self-describing, 
so that a project that is zipped up or released to a server can be 
correctly recreated in another workspace. 
```

但是，.project 文件不包含有关导入的 Java 文件和 pom.xml 的信息。它只包含一些构建命令和性质。因此，我不明白它是如何使项目自我描述的。

好像每个第一次下载repository的开发者都需要在Eclipse里面重新导入Maven项目。我想要一个至少包含 pom.xml 路径的元文件，以便开发人员在下载存储库内容后可以拥有一个现成的环境，并且不需要将 Maven 项目导入 Eclipse。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:25:40.780

从技术上讲，Eclipse 对 Maven 一无所知。.project 文件是 Eclipse 将有关项目的元数据存储在项目中包含的文件中的一种方式（尽管现在一些元数据已移动到 manifest.MF 文件中）。.project 文件仍然包含有关性质（工具使用这些信息来确定工具对哪些项目感兴趣）和构建器（描述在项目中的资源发生更改时要调用哪些工具）的信息。通过这种方式，.project 使项目自我描述。

Maven 是 Eclipse 世界的一个相对较新的人（尽管它是一个稳定且成熟的人）。正如您所指出的，maven 将其所有项目信息存储在 pom.xml 文件中。Maven 通过提供两个操作“更新项目配置”和“更新项目依赖项”来适应 Eclipse 世界，它们获取 pom.xml 文件中的信息并更新 .project 和 .classpath 文件的内容。

因此，无需按照您的建议手动编辑 .project 和 .classpath 文件，开发人员只需在从存储库中提取 Eclipse 项目后调用这两个函数。

# iphone - 将常规 xcode 应用程序项目转换为 iOSOpenDev

> ID：13004564
> 
> 赞同：4
> 
> 时间：2012-10-22T03:14:36.707
> 
> 标签：iphone, ios, xcode, jailbreak

我是越狱开发的新手。我有一个常规的 xcode 应用程序项目。现在我需要对其进行转换，或者使用 iOSOpenDev 为越狱开发创建一个新的应用程序项目。我发现了同样的问题：

[xcode 项目转换为 iOSOpenDev](https://stackoverflow.com/questions/9358317/xcode-project-conversion-to-iosopendev)

但我不知道第一步该怎么做。我是否需要添加一些设置或更改现有设置的一些值？请提供更多细节。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T05:33:35.683

关于第一步，我做了一些尝试，结果成功了。下面的步骤和kokoabim说的一样：

1.将安装路径改为`/Applications`；将iOSOpenDev的include,lib,framework文件夹路径添加到`Framework Search Paths`,delete `iphonesimulator`from `Supported Platforms`in `Build Settings`,, `Header Search Paths`（`Library Search Paths`不确定是否需要）；

1.  将运行脚本构建阶段（必须是最后一个）添加到执行的现有目标`/opt/iOSOpenDev/bin/iosod --xcbp`。

3.在现有目标的文件夹下创建 Debian 包控制文件为`(target's directory)/Package/DEBIAN/control`.

4\. 执行构建分析 (Cmd-Shift-I)。

# c - 如何确定在特定构建中使用了哪个版本的内核头文件

> ID：13004566
> 
> 赞同：-1
> 
> 时间：2012-10-22T03:14:40.653
> 
> 标签：c, linux, build, linux-kernel, header-files

我正在尝试了解 Linux 内核，所以我正在阅读 Linux 内核源代码。那么如何确定头文件的位置，因为有许多头文件具有相同的名称但位于不同的目录中？

示例：它们在 fs/open.c 中包含 fcntl.h

我可以在 17 个不同的目录中找到 fcntl.h

```
arch/alpha/include/asm/fcntl.h
arch/arm/include/asm/fcntl.h
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:28:05.340

通常，这将取决于[包含](http://msdn.microsoft.com/en-us/library/36k2cdd4%28v=vs.80%29.aspx)文件的方式。如果包含这样的引号：

```
#include "QuotedHeader.h" 
```

它*应该*在同一目录中。（它也可以在“include”目录中。）
如果包含在尖括号中，如下所示：

```
#include <BracketedHeader.h> 
```

它位于“包含”目录中。这些是编译器在编译时被告知搜索头文件的目录。这些可以作为参数传递，也可以在环境变量中设置。

对于提供的示例，目录清楚地说明了为什么存在重复：通常，不同的体系结构特定文件由为不同[体系结构](http://en.wikipedia.org/wiki/List_of_CPU_architectures)命名的文件夹分隔。
在提供的示例中，您正在查看[Alpha](http://en.wikipedia.org/wiki/DEC_Alpha)和[ARM](http://en.wikipedia.org/wiki/ARM_architecture)架构的不同 fcntl.h 文件。编译器将使用的文件取决于正在编译的 CPU，并且编译器将被告知在编译期间使用哪个文件。

在我个人看来，如果你还不知道这一点，那么你可能从错误的地方开始理解 linux 内核。尝试先研究 C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:27:08.650

您可以添加 [预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)来`CFLAGS`管理内核模块的编译。特别是，`-H`选项（传递给`gcc`）显示每个`#include`-d 标头的路径，并且`-I`选项增加了搜索到的包含目录的列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T03:23:36.143

在手册页中查找头文件的名称......或谷歌它。

# html - CakePHP & Twitter Bootstrap CSS 按钮图标

> ID：13004567
> 
> 赞同：1
> 
> 时间：2012-10-22T03:14:56.773
> 
> 标签：html, css, cakephp

我有这个代码；

```
<?php echo $this->Form->postLink(__('Delete'), 
            array('action' => 'delete', $homepage['Homepage']['ContentID']),
            array('class'=>'btn icon-plus'),
            __('Are you sure you want to delete # %s?', $homepage['Homepage']['ContentID'])); ?> 
```

它在哪里显示文本“删除”我想从 twitter bootstrap css 包中放置垃圾桶图标。但是，当我这样做时；

```
<?php echo $this->Form->postLink(__('<i class="icon-trash"></i>').... 
```

它只显示 html 而不是抓取图标。

谁能解释它为什么这样做以及我如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T03:52:10.250

将`'escape' => false`选项添加到第三个参数。

```
<?php echo $this->Form->postLink(__('Delete'), 
            array('action' => 'delete', $homepage['Homepage']['ContentID']),
            array('class'=>'btn icon-plus', 'escape' => false),
            __('Are you sure you want to delete # %s?', $homepage['Homepage']['ContentID'])); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:52:17.223

检查以确保“glyphicons-halflings.png”文件的路径正确。默认情况下，此图像应位于名为“img”的目录中，该目录与包含 bootstrap.css 文件（默认下载中名为“css”）的文件夹处于同一级别。

```
css/bootstrap.css
img/glyphicons-halflings.png 
```

检查您的错误控制台以查看是否未找到任何请求的文件。

# c# - Silverlight 自定义效果，获取父级

> ID：13004568
> 
> 赞同：0
> 
> 时间：2012-10-22T03:15:39.893
> 
> 标签：c#, silverlight, shader, effect, visualtreehelper

我正在尝试通过从[Effect](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.effect%28v=vs.95%29.aspx)继承来创建自定义效果。

```
<Ellipse Width="75" Height="75" Stroke="LightGray">
    <Ellipse.Effect>
        <local:GlowEffect GlowRadius="10"/>
    </Ellipse.Effect>
</Ellipse> 
```

问题出在我的效果代码中。我无法获得效果属性的父级，在这种情况下，就是那个椭圆。您不能使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getparent%28v=vs.95%29.aspx)，因为在构造 GlowEffect 时（在其构造函数中），椭圆不会加载到可视树中。我还没有找到解决这个问题的方法，或者我只是以错误的方式解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:00:47.567

所有“魔术”都在着色器文件（.fx 扩展名）中实现，但不在 C# 效果类中。您可以访问着色器中的所有像素及其颜色，并且可以根据需要组合相邻像素的颜色。

```
sampler2D input : register(S0);
float4 main(float2 uv : TEXCOORD) : COLOR
{
   // access to current pixel
   float4 color1 = tex2D(input, uv);

   // access to neighbour pixel
   float2 offset = (some value);
   float4 color2 = tex2D(input, uv + offset);

   return (any formula based on color1 and color2);
} 
```

如果您打算创建自定义效果，我建议您阅读[本书。](http://www.scribd.com/doc/99565575/HLSL-and-Pixel-Shaders-for-XAML-Developers)

**你的问题的答案是 - 你不需要访问 Parent 元素。**

# jquery - 引用 jquery 中的文件

> ID：13004569
> 
> 赞同：0
> 
> 时间：2012-10-22T03:15:44.123
> 
> 标签：jquery, path

好吧，我有一个 jquery 函数，结果我像参数一样传递了文件路径，所以当我运行代码时，似乎找不到文件。你知道发生了什么吗？不过，如果我删除“..\”这部分，并更改我的文件的位置，它工作得很好。我需要该文件位于根站点中，因为它是为各个页面共享的。

```
$.get("..\jobs.xml",{},function(xml){ 
    code inside funcition....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:18:42.013

我认为文件系统不适`..\`用于 url，因此您可以使用`/jobs.xml`来引用站点根目录中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:20:54.950

“..\”路径用于文件系统，而不是 URL。

在 URL 上下文中引用变量文件的最佳方法是：

```
../jobs.xml 
```

假设您在*http://yourdomain.com/test/example.html*，在您的示例中，您将查询指向以下内容：

```
http://yourdomain.com/test/..jobs.xml 
```

当我上面提到的例子将指向：

```
http://yourdomain.com/jobs.xml 
```

我相信这是你的意图。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:22:07.510

[请参阅文档](http://api.jquery.com/jQuery.get/)中的这些示例：

```
$.get('ajax/test.html', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
});

$.get("test.php", { name: "John", time: "2pm" } ); 
```

如果您使用相对路径，您可能会在生产中遇到问题。无论如何，你为什么需要它们？你用的是什么框架？

# javascript - 为什么我的 AJAX 请求会根据文件扩展名给出错误？

> ID：13004573
> 
> 赞同：1
> 
> 时间：2012-10-22T03:17:34.620
> 
> 标签：javascript, jquery, ajax, apache, file-extension

我有一些使用 jQuery 的 JavaScript，它使用快速*$.get(url, function(response){ /* ... */});加载数据* 数据是一个直接的文本文件，然后由该响应函数中的 JavaScript 处理。

这对我来说效果很好，但我刚刚在我的机器上遇到了这个问题：使用相同的代码，我现在收到一条错误消息：

> XML 解析错误：格式不正确 位置：moz-nullprincipal:{74091275-3d54-4959-9613-5005459421ce} 第 1 行，第 16 列：image:tiles.png; ---------------^

如果我从另一台服务器加载它，它会完美运行。只有当我将它托管在我自己的 PC 上时，我才会收到此错误（请注意，它以前也可以在我自己的 PC 上完美运行，它正在运行 Ubuntu 并使用 Apache 为页面提供服务）。经过大量的头撞后，我发现如果我更改正在加载的文件名的扩展名，它就可以正常工作。该文件以前被命名为“test.sprite”，这就是我收到错误的时候。如果我将它重命名为“test.txt”，它加载得很好。

这个错误〜似乎〜与我系统最近的升级相吻合。我将 Ubuntu 10.something 升级到 12.04。我假设 Apache 配置中有某种更新，我没有注意到这导致它根据文件的扩展名发送不同的标头（这里命名的两个是相同的 - .txt 实际上只是一个.sprite 的符号链接）。

所以我有一个解决我眼前问题的方法，但我宁愿不屈服于系统的特性。知道如何在不重命名文件的情况下解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:26:23.563

请注意，我不是 apache 专家，但我会为您指出正确的方向。

如果未定义，jQuery AJAX 函数将假定内容类型是 Apache 发回的任何标头。您可以通过在 Chrome 中运行代码、打开开发人员工具 (Ctrl + Shift + J) 并选择“网络”来非常简单地查看响应。单击相关请求后，您将看到返回的标题，包括内容类型。

在您的 Apache 配置中，可能未定义精灵的内容类型。您可以使用以下行添加它：

```
AddType 'text/plain; charset=UTF-8' .sprite 
```

这应该在 Apache 解析的配置文件中 - 根据您的版本，这可能是 apache.conf、httpd.conf 或其他文件。

我希望这有助于或至少为您指明正确的方向。请记住在重新启动 Apache 之前进行配置测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:29:55.150

检查响应头的内容类型，确保您从服务器和本地机器收到的头具有相同的内容类型，即相同的文件类型，相同的编码，如下所示：“content-type:text/ html; 字符集=UTF-8"。

# iphone - 将卫星视图添加到具有 3D 功能的 MKMapKit IOS 6

> ID：13004574
> 
> 赞同：1
> 
> 时间：2012-10-22T03:17:48.920
> 
> 标签：iphone, ios, ipad, ios6, mkmapview

有谁知道如何授予应用程序的 mapView 访问卫星视图的权限（例如在 Apple Maps 应用程序中）？我目前有一个适用于 ios6 的 MKMapView，并希望允许用户在卫星地图和法线地图之间切换。任何帮助都会很棒，谢谢！

编辑：

抱歉，我忘记指定具有 3D 功能的卫星视图，例如在 Apple 地图中。这需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:21:20.080

将[`mapType`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/mapType)地图视图的属性设置为[`MKMapTypeSatellite`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/c_ref/MKMapTypeSatellite)

# c# - 如何调试通过 Assembly.Load(byte[]) 加载的程序集？

> ID：13004580
> 
> 赞同：6
> 
> 时间：2012-10-22T03:18:44.713
> 
> 标签：c#, .net, visual-studio, visual-studio-2008

我正在为使用加载插件 DLL 的产品创建插件`Assembly.Load(byte[])`。这一切都非常好，但这意味着我没有加载调试符号的常规方法来逐步执行我的代码。

疯狂的是，几个月前我遇到了完全相同的问题并解决了它——我为自己感到骄傲！所以我知道它可以做到，我只是忘记了怎么做！

我对我可能尝试过的事情有一些模糊的记忆，但我无法从脑海中梳理出细节：

*   .NET 反射器
    *   可能是错误的，因为我清楚地记得单步执行原始 .cs 文件
*   使用 IIS Express 而不是 Cassini
    *   但这让我觉得这是一个奇怪的解决方案——程序集是从字节数组加载的，因此框架对 DLL 的来源或适当的 PDB 可能会是什么样子一无所知。这个问题应该存在于任何环境中。
*   通过“模块”窗口手动加载符号
    *   试过这个；我得到“符号文件 xxxxx.pdb 与模块不匹配”——因为，当然，我们是从字节数组加载的，而不是 DLL 本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:09:09.393

如果您的程序集是强命名的，您可以将程序集放在 GAC 中。强命名程序集**始终**从 GAC 加载，即使它是通过`Assembly.Load(byte[])`. 然后只需将您的 in 符号放入`C:\Windows\symbols\dll`或任何方便的地方。我一直这样做是为了调试我们自己产品的插件 DLL，这些 DLL 由另一个应用程序以类似的方式加载。

您可以使用`gacutil`它在 GAC 中安装它。请记住在完成调试后将其删除，否则您可能最终会针对 GAC 忘记的旧版本运行测试。

# python - List of procedures

> ID：13004583
> 
> 赞同：0
> 
> 时间：2012-10-22T03:19:59.707
> 
> 标签：python, list, python-2.7, tkinter

I want to create a list of procedures, but when I use this

```
Characters=[Percy(),Annabeth(),Leo(),Chuck(),Sarah()] 
```

each of these procedures brings up a tkinter window with a quote from that character, but if I run the code, instead of treating it like a list, python executes each procedure in order, am I doing this completely wrong? Or is there just no way to create a list of procedures. Note: It needs to be in a list because I need to be able to access a random position in it

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T03:20:58.037

you probably want:

```
Characters = [Percy, Annabeth, Leo, Chuck, Sarah] 
```

Now to call `Percy`, you do:

```
percy_result = Characters[0]() 
```

As you have it, you're storing a list of *results* of those procedures instead of storing the procedures themselves.

# ruby-on-rails - Rails3 has_many 通过在本地工作但在 heroku 上失败

> ID：13004588
> 
> 赞同：1
> 
> 时间：2012-10-22T03:20:42.143
> 
> 标签：ruby-on-rails

我在本地使用 sqlit3，在 heroku 使用 Postgre。

一切正常，直到我将文件上传到heroku。这是我的模型。

```
class User < ActiveRecord::Base
  belongs_to :unit

  has_friends
end

class Unit < ActiveRecord::Base
  attr_accessible :unit, :floor
  has_many :users
  belongs_to :block
end

class Block < ActiveRecord::Base
  attr_accessible :block, :units_attributes
  has_many :units, :dependent => :destroy
  accepts_nested_attributes_for :units, allow_destroy: true
  belongs_to :postalcode
end

class Postalcode < ActiveRecord::Base
  attr_accessible :postalcode, :blocks_attributes
  has_many :blocks, :dependent => :destroy
  accepts_nested_attributes_for :blocks, allow_destroy: true
  belongs_to :neighbourhood
end

class Neighbourhood < ActiveRecord::Base
  attr_accessible :name, :streetname, :postalcodes_attributes
  has_many :postalcodes, :dependent => :destroy
  has_many :blocks, :through => :postalcodes
  has_many :units, :through => :blocks
  has_many :users, :through => :units
  accepts_nested_attributes_for :postalcodes, allow_destroy: true
  validates :name, :presence => true
  validates :streetname, :presence => true
end 
```

我进行了故障排除，发现问题出在控制器中的这种方法上。

```
@neighbours = current_user.unit.block.postalcode.neighbourhood.users 
```

虽然@neighbours = current_user.unit.block.postalcode.neighbourhood 工作得很好。

请帮忙，我很绝望，我已经尝试了一整天的谷歌搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:35:21.417

查看[类似问题的此答案](https://stackoverflow.com/a/8795572/429758)

很可能出现错误`WHERE "postalcodes"."neighbourhood_id" = 1`，表明`neighbourhood_id`在邮政编码表中创建为字符串，而不是整数。

相应地按照答案中提到的步骤，并将其更改为整数。

# excel - 使用苹果脚本在 Excel 中创建图表后如何更改系列名称。

> ID：13004596
> 
> 赞同：0
> 
> 时间：2012-10-22T03:21:47.943
> 
> 标签：excel, applescript

我的下一个问题是如何以这种方式更改系列名称。

1)

```
 tell application "Microsoft Excel"
         tell worksheet "Sheet1" of active workbook
            set obj to make new chart object at end with properties {name:"chart1",left position:20,   top:88,width:33, height:90}
            set ochart to chart of obj
            tell ochart
                set chart type to column clustered
                set newSeries to make new series at end with properties {series values:"=Sheet1!$B$7:$B$10", xvalues:"=Sheet1!$B$7:$B$10",name:"tempSeriesName"}
           end tell
         end tell
      end tell 
```

2)

```
tell the chart of sheet "chart1"     
             tell series1       
                 set name to "chartseries1"                       
            end tell                 
     end tell 
```

在此脚本中，第一个脚本成功运行，但第二个脚本未更改第一个系列的名称。请回复我正在等待您的重播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:18:09.580

尝试：

```
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        set name of first series of chart of chart object 1 to "chartseries1"
    end tell
end tell 
```

# objective-c - ARC 的线程和对象生命周期

> ID：13004605
> 
> 赞同：1
> 
> 时间：2012-10-22T03:23:05.603
> 
> 标签：objective-c, multithreading, macos, cocoa, nsthread

据我了解 ARC，如果没有对对象的强引用，收集它是公平的游戏（因为它的引用计数为 0）。

如果，在 A 类的方法中，我这样做：

```
ClassB* b = [[ClassB alloc] init];
[b doStuff]; 
```

在 doStuff 中，我这样做：

```
NSThread* t = [[NSThread alloc] initWithTarget:self selector:@selector(theThread) object:nil];
[t start]; 
```

的引用计数`b`似乎为 0，因为在 A 类中的方法完成后它超出了范围。但是，一个线程当前正在 ClassB 中“运行”，并且需要本地资源。

这里的行为是什么？或者，这里的行为应该是什么，以确保它`b`一直存在，直到线程全部完成？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T03:33:03.283

的[文档`initWithTarget:selector:object:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/20000311-SW11)说线程拥有（保持强烈引用）其目标的所有权。当线程对象被销毁时，目标将被释放。

请注意，如果目标还拥有`NSThread`.

# python - 在 django python 中覆盖删除函数的最佳方法是什么

> ID：13004606
> 
> 赞同：2
> 
> 时间：2012-10-22T03:23:09.677
> 
> 标签：python, django

我有与 3 个差异模型有关系的模型。

现在我知道如果我使用 `object.delete()`，那么子对象也将被删除。

现在的问题是，在我的整个模型类中，我有一个名为的数据库列`DELETED`，每当有人删除某个对象时，我想将其设置为 1。

我可以覆盖调用类中的删除函数`BaseModel`并将更新字段的自定义删除方法覆盖为1。但问题是

如果我这样做，那么我必须手动遍历所有级联关系并手动调用 delete ob 每个对象。

有什么方法可以通过调用 object.delete() 来实现。它也会自动遍历子对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:10:11.303

请看[D​​jango: How can I find which my models refer to a model](https://stackoverflow.com/questions/7539278/django-how-can-i-find-which-of-my-models-refer-to-a-model)。

您可以使用 a`Collector`获取对所有必要项目的所有引用`collect()`。这是 Django 用来模拟`CASCADE`行为的代码。收集完所有参考资料后，您可以针对其中的每一项更新该`DELETED`列。

[代码中的更多信息。](https://github.com/django/django/blob/master/django/db/models/deletion.py)

祝你好运。

# r - 在 [R] 中出现错误 - 需要 TRUE/FALSE 的缺失值

> ID：13004609
> 
> 赞同：1
> 
> 时间：2012-10-22T03:23:33.287
> 
> 标签：r, na

我试图通过一个向量来查找使用 IQR 计算范围的异常值。当我运行此脚本以查找 IQR 右侧的值时，我得到了结果，当我向左运行时，我得到错误：缺少 TRUE/FALSE 需要的值。如何清除数据集中的真假？这是我的脚本：

```
data = c(100, 120, 121, 123, 125, 124, 123, 123, 123, 124, 125, 167, 180, 123, 156)
Q3 <- quantile(data, 0.75) ##gets the third quantile from the list of vectors
Q1 <- quantile(data, 0.25) ## gets the first quantile from the list of vectors
outliers_left <-(Q1-1.5*IQR(data)) 
outliers_right <-(Q3+1.5*IQR(data))
IQR <- IQR(data)
paste("the innner quantile range is", IQR)
Q1 # quantil at 0.25
Q3 # quantile at 0.75
# show the range of numbers we have
paste("your range is", outliers_left, "through", outliers_right, "to determine outliers")
# count ho many vectors there are and then we will pass this value into a loop to look for 
# anything above and below the Q1-Q3 values
vectorCount <- sum(!is.na(data))
i <- 1
while( i < vectorCount ){
i <- i + 1
x <- data[i]
# if(x < outliers_left) {print(x)} # uncomment this to run and test for the left
if(x > outliers_right) {print(x)}
} 
```

我得到的错误是

```
[1] 167
[1] 180
[1] 156
Error in if (x > outliers_right) { : 
missing value where TRUE/FALSE needed 
```

如您所见，如果您运行此脚本，它会在右侧找到我的 3 个异常值并且还会引发错误，但是当我在 IQR 左侧再次运行此脚本时，向量中确实有 100 个异常值，我只是得到错误而没有显示其他结果。如何修复此脚本？非常感谢任何帮助。几天来，我一直在网上和我的书上搜索如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T03:35:33.230

如评论中所述，错误是由于您构建`while`循环的方式造成的。在最后一次迭代中，`i == 16`虽然只有 15 个元素需要处理。从 更改`i <= vectorCount`为`i < vectorCount`解决问题：

```
i <- 1
while( i < vectorCount ){
  i <- i + 1
  x <- data[i]
  # if(x < outliers_left) {print(x)} # uncomment this to run and test for the left
  if(x > outliers_right) {print(x)}
}
#-----
[1] 167
[1] 180
[1] 156 
```

但是，这实际上不是 R 的工作方式，您很快就会对代码运行任何可观大小的数据需要多长时间感到沮丧。R 是“矢量化”的，这意味着您可以`data`一次对所有 15 个元素进行操作。要打印您的异常值，我会这样做：

```
data[data > outliers_right]
#-----
[1] 167 180 156 
```

或者使用 OR 运算符一次获取所有这些：

```
data[data< outliers_left | data > outliers_right]
#-----
[1] 100 167 180 156 
```

对于一点上下文，上述逻辑比较为 的每个元素创建一个布尔值，`data`并且 R 只返回那些为 TRUE 的元素。您可以通过键入以下内容自行检查：

```
data > outliers_right
#----
 [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE 
```

该`[`位实际上是一个提取运算符，用于检索数据对象的子集。有关一些好的背景信息，请参阅帮助页面`?"["`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:34:48.833

出现错误消息是因为您让`i <= vectorCount`so `i`can equal `vectorCount`，因此`i = i+1`从数据索引将给出`NA`，并且该`if`语句将失败。

如果要根据 IQR 查找异常值，可以使用`findInterval`

```
outliers <- data[findInterval(data, c(Q1,Q3)) != 1] 
```

我也将停止使用`paste`来创建字符消息`printed`，`message`而是使用。

# opengl-es - 如何有效地将深度缓冲区复制到 OpenGL ES 上的纹理

> ID：13004616
> 
> 赞同：4
> 
> 时间：2012-10-22T03:24:01.220
> 
> 标签：opengl-es, opengl-es-2.0, depth-buffer

我试图通过从标准 GL移植[一些代码，在 iOS 上的 OpenGL ES 2.0 中获得一些阴影效果。](http://www.codesampler.com/usersrc/usersrc_8.htm)部分示例涉及将深度缓冲区复制到纹理：

```
glBindTexture(GL_TEXTURE_2D, g_uiDepthBuffer);
glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, 0, 0, 800, 600, 0); 
```

但是，似乎 ES 不支持 glCopyTexImage2D。阅读[相关线程](https://stackoverflow.com/questions/2596682/opengl-es-2-0-read-depth-buffer)，看来我可以使用帧缓冲区和片段着色器来提取深度数据。所以我试图将深度分量写入颜色缓冲区，然后复制它：

```
// clear everything
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); 

// turn on depth rendering
glUseProgram(m_BaseShader.uiId);

// this is a switch to cause the fragment shader to just dump out the depth component
glUniform1i(uiBaseShaderRenderDepth, true);

// and for this, the color buffer needs to be on
glColorMask(GL_TRUE,GL_TRUE,GL_TRUE,GL_TRUE);

// and clear it to 1.0, like how the depth buffer starts
glClearColor(1.0f, 1.0f, 1.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT);

// draw the scene
DrawScene();

// bind our texture 
glBindTexture(GL_TEXTURE_2D, g_uiDepthBuffer);
glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 0, 0, width, height, 0); 
```

这是片段着色器：

```
uniform sampler2D sTexture;
uniform bool bRenderDepth;

varying lowp    float LightIntensity;
varying mediump vec2  TexCoord;

void main()
{    
    if(bRenderDepth) {
        gl_FragColor = vec4(vec3(gl_FragCoord.z), 1.0);
    } else {
        gl_FragColor = vec4(texture2D(sTexture, TexCoord).rgb * LightIntensity, 1.0);
    }
} 
```

我已经尝试过没有'bRenderDepth'分支，它并没有显着加快它。

现在几乎只是以 14fps 的速度执行此步骤，这显然是不可接受的。如果我以高于 30fps 的速度拉出副本。我从 Xcode OpenGLES 分析器中得到了关于复制命令的两个建议：

1.  file://localhost/Users/xxxx/Documents/Development/xxxx.mm: error: Validation Error: glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 0, 0, 960, 640, 0) : Height<640> is not a power两个

2.  file://localhost/Users/xxxx/Documents/Development/xxxx.mm：警告：GPU 等待纹理：您的应用更新了当前用于渲染的纹理。这导致 CPU 等待 GPU 完成渲染。

我将努力解决以上两个问题（也许它们是症结所在）。与此同时，任何人都可以提出一种更有效的方法来将深度数据提取到纹理中吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T05:08:03.820

iOS 设备通常支持[OES_depth_texture](http://www.khronos.org/registry/gles/extensions/OES/OES_depth_texture.txt)，因此在存在扩展的设备上，您可以设置一个带有深度纹理的帧缓冲区对象作为其唯一附件：

```
GLuint g_uiDepthBuffer;
glGenTextures(1, &g_uiDepthBuffer);
glBindTexture(GL_TEXTURE_2D, g_uiDepthBuffer);
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, width, height, 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, NULL);
// glTexParameteri calls omitted for brevity

GLuint g_uiDepthFramebuffer;
glGenFramebuffers(1, &g_uiDepthFramebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, g_uiDepthFramebuffer);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, g_uiDepthBuffer, 0); 
```

然后，当您绘制场景时，您的纹理会接收所有写入深度缓冲区的值（您可以为此使用简单的片段着色器），并且您可以直接从中进行纹理处理，而无需调用`glCopyTexImage2D`.

# linq-to-xml - 如何在不知道属性和值的情况下在 XDocument 中添加名称空间？

> ID：13004618
> 
> 赞同：1
> 
> 时间：2012-10-22T03:24:22.577
> 
> 标签：linq-to-xml

例如

```
 XmlNamespaceManager nsmgr = new XmlNamespaceManager(myxmldocument.NameTable);
           nsmgr.AddNamespace("xdp", "http://ns.adobe.com/xdp/");
           nsmgr.AddNamespace("config", "http://www.xfa.org/schema/xci/1.0/"); 
```

同样，我们如何在 XDocument 中添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T04:31:29.167

```
string s = myXDocument.ToString();//my XDocument  corresponds to our existing XDocument
XPathDocument xpath = new XPathDocument(new StringReader(s));
        XPathNavigator pathnavigator= xpath .CreateNavigator();
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(pathnavigator.NameTable); 
```

# jquery-mobile - 链接不适用于 jquery Mobile

> ID：13004620
> 
> 赞同：0
> 
> 时间：2012-10-22T03:24:47.180
> 
> 标签：jquery-mobile

我正在使用 jQuery Mobile 和 CodeIgniter。在我的索引页面中，

```
http://localhost:8888/hwezemail2/index.php/welcome/student/index 
```

我有另一个页面的链接。

```
http://localhost:8888/hwezemail2/index.php/welcome/student/myhomework/56 
```

但是当我点击链接时，它会转到下面并且不显示。

```
http://localhost:8888/hwezemail2/index.php/welcome/student/index#/hwezemail2/
index.php/welcome/student/myhomework/56 
```

然后，一旦 url 变为

```
http://localhost:8888/hwezemail2/index.php/welcome/student/myhomework/56 
```

但它不显示内容。所以我再次刷新它然后它显示内容。

一旦它显示，那么我没有任何问题。这只是第一次。

我的PHP代码如下。

```
echo '<a href="'. base_url().'index.php/welcome/student/myhomework/'
.$userid.'" data-role="button" data-inline="true" data-transition="pop" 
data-icon="star" data-mini="true" data-theme="c">Missed Homework</a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:38:36.170

我在链接中添加了 data-ajax="false" ，问题就解决了。

# syntax - Bison yyparse 每次加载错误文件时总是报告“语法错误”错误

> ID：13004623
> 
> 赞同：1
> 
> 时间：2012-10-22T03:25:16.937
> 
> 标签：syntax, bison

如果加载正确的文件，yyparse 运行正常；但是，在加载一个错误表单文件后，它总是会在另一个文件正常时报告错误。什么事？错误文件是否没有初始化生成全局变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:14:12.050

您的问题没有提供足够的上下文来了解发生了什么，但是错误不在解析器中而是在扫描仪中的可能性很高。您应该首先在 bison 中启用 %error-verbose 以了解有关您遇到的错误的更多信息，并且还可能在 Flex 和 Bison 中启用调试跟踪。

但我敢打赌，您没有正确重新启动扫描仪。阅读：[http](http://www.gnu.org/software/bison/manual/html_node/How-Can-I-Reset-the-Parser.html) ://www.gnu.org/software/bison/manual/html_node/How-Can-I-Reset-the-Parser.html 。

# java - 当软键盘处于活动状态时，设置文本不起作用

> ID：13004627
> 
> 赞同：1
> 
> 时间：2012-10-22T03:27:18.727
> 
> 标签：java, android, keyboard, sleep

我正在编写一个 android 应用程序，它在几分之一秒内显示一串数字。然后，用户将在文本字段中输入这些数字，以查看他们能够在该闪存中读取多少个数字。但是，当键盘打开时，按下触发按钮时不会出现数字串。为什么会这样，我能做些什么来解决它？

这是java代码：

```
package com.example.test;

import java.util.*;
import android.os.Bundle;
import android.os.Handler;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.app.Activity;
import android.view.*;
import android.widget.*;

public class MainActivity extends Activity {

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void ButtonOnClick(View v){
        Random rand = new Random();

        final Handler mHandler = new Handler();

        String number = new String();
        for(int i=0; i < 9; i++){
            int num = rand.nextInt(9);
            number = number + Integer.toString(num);
        }

        final TextView mTextView = (TextView) findViewById(R.id.textview1);
        mTextView.setText(number);

        final Runnable makeTextDisapear = new Runnable() {
            public void run() {
                mTextView.setText(null);

                }
            };

            mHandler.postDelayed(makeTextDisapear , 1);

    }

} 
```

编辑：我通过在应用程序本身中制作屏幕键盘来解决这个问题，但我更喜欢使用系统键盘，所以我仍然对答案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:07:01.870

首先：请注意，使用您的代码时，[您只会得到 0-8 的数字（而不是 9） 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29)

我已经为您构建了一些示例代码并对其进行了测试。这运行并执行您所描述的操作。它会在适当的时候隐藏键盘，仅在单击时才显示它`EditText`。它不会分散查看数字的注意力。我希望这可以帮助你。请尝试代码。

`MainActivity.java`：

```
package com.example.exampleshowdigits;

import java.util.Random;

import android.os.Bundle;
import android.os.Handler;
import android.os.SystemClock;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.app.Activity;
import android.content.Context;

public class MainActivity extends Activity implements OnClickListener {

    private Button mButton;
    private TextView mTextView1;
    private TextView mTextView2;
    private EditText mEditText;
    private boolean numbersShown;
    private int[] numbers;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mButton = (Button)findViewById(R.id.button1);
        mTextView1 = (TextView)findViewById(R.id.textview1);
        mTextView2 = (TextView)findViewById(R.id.textview2);
        mEditText = (EditText)findViewById(R.id.edittext1);
        mButton.setOnClickListener(this);
        InputMethodManager inputManager = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        inputManager.showSoftInput(mEditText, 0);
        numbersShown = false;
        numbers = new int[9];
    }

    @Override
    public void onClick(View v) {
        if(!numbersShown) {
            Random rand = new Random();
            String number = "";
            for(int i = 0; i < 9; i ++) {
                int num = rand.nextInt(10); //assuming you want 0-9
                numbers[i] = num;
                number += Integer.toString(num); //same as number = number + Integer.toString(num);
            }
            mTextView1.setText(number);
            SystemClock.sleep(500);
            final Runnable makeTextDisapear = new Runnable() {
                public void run() {
                    mTextView1.setText("");
                    mButton.setText(getString(R.string.checkresult));
                    mTextView2.setText(getString(R.string.whatdidyousee));
                    mEditText.setText("");
                    numbersShown = true;
                }
            };
            Handler mHandler = new Handler();
            mHandler.postDelayed(makeTextDisapear, 1000);
        }
        else {
            mButton.setText(getString(R.string.shownumbers));
            numbersShown = false;
            int correct = 0;
            String numbersEntered = mEditText.getText().toString();
            for(int i = 0; i < numbersEntered.length(); i++) {
                int num = Character.getNumericValue(numbersEntered.charAt(i));
                if(num == numbers[i]) {
                    correct++;
                }
            }
            mTextView2.setText(correct + " " + getString(R.string.correct));
        }
    }
} 
```

`activity_main.xml`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/shownumbers"
        android:layout_marginTop="15dp"
        android:layout_marginBottom="15dp" />
    <TextView
        android:id="@+id/textview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_marginTop="15dp"
        android:layout_marginBottom="15dp"
        android:layout_below="@id/button1" />
    <TextView
        android:id="@+id/textview2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginTop="15dp"
        android:layout_below="@id/textview1" />
    <EditText
        android:id="@+id/edittext1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="numberDecimal"
        android:maxLength="9"
        android:singleLine="true"
        android:layout_marginTop="15dp"
        android:layout_marginBottom="15dp"
        android:layout_below="@id/textview2" />
</RelativeLayout> 
```

`strings.xml`：

```
<string name="shownumbers">Show numbers</string>
<string name="checkresult">Check result</string>
<string name="whatdidyousee">What did you see? Enter here:</string>
<string name="correct">out of 9 correct!</string> 
```

# java - 当 char 没有值时，如何避免 StringIndexOutOfBoundsException？

> ID：13004631
> 
> 赞同：7
> 
> 时间：2012-10-22T03:27:53.883
> 
> 标签：java, null, char

对不起，如果标题没有意义，但我不知道如何措辞。

问题：

我正在制作一个从用户那里获得 a、b、c 或 d 的多项选择测验游戏。如果他们按照他们的指示去做，这没有问题，但是如果他们不输入任何内容而只是按 Enter 键，我会得到一个 StringIndexOutOfBoundsException。我理解为什么会发生这种情况，但我是 Java 新手，想不出办法来解决它。

到目前为止我所拥有的：

```
 System.out.println("Enter the Answer.");

    response = input.nextLine().charAt(0);

    if(response == 'a')
    {
            System.out.println("Correct");
    }

    else if(response == 'b' || response == 'c' || response == 'd')
    {
        System.out.println("Wrong");
    }
    else
    {
        System.out.println("Invalid");
    } 
```

当然，如果用户不输入任何内容，程序将永远不会超过第二行代码，因为您不能获取空字符串的 charAt(0) 值。我正在寻找的东西会检查响应是否为空，如果是这样，请返回并再次向用户提问。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T03:31:31.173

您可以使用 do-while 循环。只需更换

```
response = input.nextLine().charAt(0); 
```

和

```
String line;

do {
  line = input.nextLine();
} while (line.length() < 1);

response = line.charAt(0); 
```

当用户输入一个空行时，这将继续调用`input.nextLine()`多次，但是一旦他们输入一个非空行，它将继续并设置`response`为该非空行的第一个字符。如果您想重新提示用户回答，则可以将提示添加到循环内部。如果您想检查用户是否输入了字母 a-d，您还可以将该逻辑添加到循环条件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T03:30:15.463

要么处理异常（`StringIndexOutOfBoundsException`）要么打破这个语句

```
 response = input.nextLine().charAt(0); 
```

作为

```
 String line = input.nextLine();
    if(line.length()>0){
        response = line.charAt(0);
    } 
```

异常处理：

```
 try{
        response = input.nextLine().charAt(0);
    }catch(StringIndexOutOfBoundsException siobe){
        System.out.println("invalid input");
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T03:29:24.387

简单的：

*   最初以字符串形式获取输入，并将其放入临时字符串变量中。
*   然后检查字符串的长度。
*   然后如果 > 0 提取第一个字符并使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T03:31:34.587

除了@HovercraftFullOfEels'（完全有效）的答案，我想指出你可以“捕捉”这些异常。例如：

```
try {
    response = input.nextLine().charAt(0);
} catch (StringIndexOutOfBoundsException e) {
    System.out.println("You didn't enter a valid input!");
    // or do anything else to hander invalid input
} 
```

即如果在执行-block`StringIndexOutOfBoundsException`时遇到a，将执行`try`-block 中的代码`catch`。[您可以在此处](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)阅读有关捕获和处理异常的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T09:17:03.040

StringIndexOutofBoundException 在以下情况下也会发生。

1.  搜索不可用的字符串
2.  匹配不可用的字符串

    例如：

    列表 ans=new ArrayList();
    临时=“和”；
    字符串 arr[]={"android","jellybean","kitkat","ax"};
    for(int index=0;index < arr.length;index++)
    if(temp.length()<=arr[index].length())
    if(temp.equlsIgnoreCase((String)arr[``index].subSequence (0,temp.length())));
    ans.add(arr[index]);

需要以下代码以避免 indexoutofboundexception

if(temp.length()<=arr[index].length())

因为这里我们正在检查 src 字符串的长度是否等于或大于 temp 。如果 src 字符串长度小于它将通过“arrayindexoutof boundexception”

# ant - 循环中的Java编译问题

> ID：13004634
> 
> 赞同：0
> 
> 时间：2012-10-22T03:28:51.623
> 
> 标签：ant

我试图使用 ant 1.8.1 执行 java 编译。由于要求，我必须在循环中编译多个 java 源文件夹（包含 java 文件）。这些文件夹名称将来自属性文件中提到的 java 项目。从循环本身我需要执行java编译。所以我使用了一个宏定义，我在其中传递了 java 源编译所需的所有参数。本质上，我有一个主要的 build.xml 文件，我从中调用 build_Compile.xml（其职责是确定要构建哪些 Java 项目及其相应的源文件夹，并为每个项目执行循环编译）。为了实现这一点，我使用了一个包含宏定义数量的帮助文件 (Helper.xml) 文件中定义的宏定义。

但是，当我执行任务时，我收到一个错误，这意味着没有正确找到 java src 路径（作为参数传递）。我注意到的是构建文件的路径（我所有的 build*.xml 文件所在的位置）被附加在 java src 目录路径之前（作为宏定义中的参数传递）。我打印了传递给看起来符合预期的宏定义的参数。这是我用于 java 源代码编译的片段 -

…………

```
 <javac  srcdir="@{srcpath}" 
            destdir="./Temp/build/classes/" 
            includeAntRuntime="false" 
            classpath="${classpath}" 
            includes="${replacedartefacts}">
    </javac> 
```

对不起，故事很长。欣赏任何指针/指南。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:05:36.367

我*对循环的*想法有点困惑。我可以考虑两种方式：

*   您有一个项目，但根据项目编译不同的源目录。
*   您有一个主*build.xml*，它正在调用一堆包含要编译的源文件夹的子项目。

在第一个示例中，每个`<javac>`调用都依赖于已编译的类文件。在第二种情况下，您正在编译的每组 Java 源代码都独立于其余的

你没有给出你得到的错误或它的价值`@{srcdir}`会有所帮助。

我注意到你有一个`includes`参数。这是要包含的 java 文件的列表。我还注意到这是一个属性。这意味着一旦设置就无法更改。为什么你有一个*包含*参数？**为所有**项目指定要编译的特定文件集将如何影响您想要做的事情。这是某种价值`*.java`吗？对于您正在编译的每组源目录，这是否相同？

这可能是`${basedir}`物业的问题吗？当您使用`<ant>`or`<import>`时，您`${basedir}`的设置为调用程序的`${basedir}`而不是`${basedir}`被调用程序中的。

使用参数运行 Ant `-d`。这将产生数百行输出，但会准确显示每次调用`<javac>`. 如果您还发布了确切的错误消息，我们可以为您提供更多帮助，并且可能会提供有关项目设置方式的更多信息。

谈到循环，看看[Ant-Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)任务，尤其是[for](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)任务。还要查看 Ant [subant](http://ant.apache.org/manual/Tasks/subant.html)任务。该`<for>`任务为您提供了一种轻松遍历一堆目录参数的方法。该`<subant>`任务是为构建子项目的主构建。

# analytics - 构建简单的 Web 分析工具

> ID：13004635
> 
> 赞同：2
> 
> 时间：2012-10-22T03:29:16.150
> 
> 标签：analytics, web-analytics, web-analytics-tools

作为我正在做的项目的一部分，我想创建一个简单的 Web 分析工具，供少数运行不同网站的人使用。我不使用 Google Analytics 或任何其他免费分析工具的原因是因为我想学习如何自己构建一个。该工具仅使用条形图、饼图和图表来显示页面浏览量、点击量、引用站点、流量等。

我一直在四处打听，人们将我指向 Javascript、Python 和 MongoDB，前两个我知道一点。谁能建议我开始的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T22:55:47.970

如果您需要一个地方来存储分析事件数据并想要构建自己的报告界面，我肯定会考虑 Keen.io。他们拥有强大的基础架构和查询工具，可以在自定义报告界面中快速调用您的数据。

您还可以使用 Segment.io 的集合库。通过 segment.io，您仍然可以将数据发送到 Keen.io 以供您自己自定义使用，并将相同的数据路由到 Google Analytics 或 Mixpanel 之类的东西，这样您就可以在需要时将其保存在预构建的系统中。

# python - python中的嵌套for循环不起作用

> ID：13004636
> 
> 赞同：1
> 
> 时间：2012-10-22T03:29:18.723
> 
> 标签：python

我们基本上有一个很大的 xcel 文件，我想做的是创建一个列表，其中包含每列的最大值和最小值。有 13 列，这就是为什么 while 循环在达到 14 时应该停止的原因。问题是一旦计数器增加，它似乎就不会遍历 for 循环一次。或者更明确地说，while 循环只经过一次 for 循环，但它似乎确实在循环，因为它将计数器增加 1 并在 14 处停止。应该注意，输入文件中的行是数字字符串，即为什么我将它们转换为元组，然后检查给定位置的值是大于 column_max 还是小于 column_min。如果是这样，我重新分配 column_max 或 column_min。一旦完成，column_max 和 column_min 将附加到列表（l）和计数器（位置），增加以重复下一列。任何帮助将不胜感激。

```
input_file = open('names.csv','r')
l= []  
column_max = 0
column_min = 0
counter = 0
while counter<14:
    for row in input_file:
        row = row.strip()
        row = row.split(',')
        row = tuple(row)
        if (float(row[counter]))>column_max:
            column_max = float(row[counter])  
        elif (float(row[counter]))<column_min:
            column_min = float(row[counter])    
        else:
            column_min=column_min
            column_max = column_max
    l.append((column_max,column_min))
    counter = counter + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T03:31:55.383

我认为您想切换`for`and`while`循环的顺序。

请注意，有一种*更好*的方法可以做到这一点：

```
with open('yourfile') as infile:
    #read first row.  Set column min and max to values in first row
    data = [float(x) for x in infile.readline().split(',')]
    column_maxs = data[:]
    column_mins = data[:]
    #read subsequent rows getting new min/max
    for line in infile:
        data = [float(x) for x in line.split(',')]
        for i,d in enumerate(data):
            column_maxs[i] = max(d,column_maxs[i])
            column_mins[i] = min(d,column_mins[i]) 
```

如果您有足够的内存一次将文件保存在内存中，这将变得更加容易：

```
with open('yourfile') as infile:
    data = [map(float,line.split(',')) for line in infile]
    data_transpose = zip(*data)
    col_mins = [min(x) for x in data_transpose]
    col_maxs = [max(x) for x in data_transpose] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:51:33.403

一旦你消费了文件，它就被消费了。因此再次迭代它不会产生任何东西。

```
>>> for row in input_file:
...     print row
1,2,3,...
4,5,6,...
etc.
>>> for row in input_file:
...     print row
>>> # Nothing gets printed, the file is consumed 
```

这就是您的代码无法正常工作的原因。

然后，您有三种主要方法：

1.  每次读取文件（I/O操作效率低下）；
2.  将其加载到列表中（对于大文件效率低下，因为它将整个文件存储在内存中）；
3.  重新编写逻辑以逐行操作（非常可行和高效，尽管在代码中不如将其全部加载到二维结构中并转置并使用`min`and`max`可能）。

这是我对第三种方法的技术：

```
maxima = [float('-inf')] * 13
minima = [float('inf')] * 13
with open('names.csv') as input_file:
    for row in input_file:
        for col, value in row.split(','):
            value = float(value)
            maxima[col] = max(maxima[col], value)
            minima[col] = min(minima[col], value)

# This gets the value you called ``l``
combined_max_and_min = zip(maxima, minima) 
```

# mysql - 过去四个月的总和（计数（））？

> ID：13004638
> 
> 赞同：0
> 
> 时间：2012-10-22T03:29:25.700
> 
> 标签：mysql, sql

我必须分别找出过去 4 个月的 tot(count) 值，我该如何做到这一点

表结构是

```
CREATE TABLE `lime_survey_16579` ( 
`id` int(11) NOT NULL auto_increment, 
`submitdate` datetime default NULL, 
`lastpage` int(11) default NULL, 
`startlanguage` varchar(20) collate utf8_unicode_ci NOT NULL, 
`token` varchar(36) collate utf8_unicode_ci default NULL, 
`16579X10X31` varchar(5) collate utf8_unicode_ci default NULLPRIMARY KEY (`id`) 
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=480 ; 
```

这里 $survey =lime_survey_16579 和 $temp= 16579X10X31 这里 16579X10X31 的值类似于 A1 A2 A3 ..

我怎样才能做到这一点以提供输出

```
tot month 

2 july 
4 aug 
6 sep 
9 oct 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:37:03.280

请尝试以下所有数据：

```
SELECT count(id) as tot, MONTHNAME(submitdate) as `month`
FROM lime_survey_16579
GROUP BY month(submitdate) 
ORDER BY month(submitdate) 
```

要将数据限制为过去 4 个月，请尝试以下操作：

```
SELECT count(id) as tot, MONTHNAME(submitdate) as `month`
FROM lime_survey_16579
GROUP BY month(submitdate) 
ORDER BY month(submitdate) DESC
LIMIT 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:36:09.990

如果您有上一年的数据，Sel 的解决方案将不起作用。大概，您只想要最近的“七月”记录，而不是所有记录的总和。

为此，您可以执行以下操作：

```
SELECT count(id) as tot, MONTHNAME(submitdate) as `month`
FROM lime_survey_16579
GROUP BY monthname(submitdate), year(submitdate)
ORDER BY min(submitdate) DESC
LIMIT 4 
```

您也可以选择将年份放在 SELECT 行上。

我用其他表达式替换`month(submitdate)`了`group by`and子句。`order by`这避免了使用称为*hidden column*的 MySQL (mis) 功能，其中子句中未提及`group by`且未聚合的列在子句中被允许`select`。其他 SQL 引擎（以及标准）不允许这样做。

# android - Android - 读取文本文件中的字符

> ID：13004640
> 
> 赞同：0
> 
> 时间：2012-10-22T03:29:51.133
> 
> 标签：android

我想读取文本文件中的每个字符。例如，我有一个包含以下文本“John 26 Canada”的文本文件，我想读取每个字符，以便可以将每个字符串放入其特定的文本视图中。这将是输出。

姓名：约翰年龄：26 国家：加拿大

我有这段代码将数据保存到文本文件中。

```
private void performSaveFile(String f) {
    // this does the actual file saving.
    // set the filename in the interface:

    EditText name = (EditText) findViewById(R.id.etName);
    EditText age = (EditText) findViewById(R.id.etAge);
    EditText country = (EditText) findViewById(R.id.etCountry);
    String strFileContent = name.getText().toString()
            + age.getText().toString() + country.getText().toString();

    // ... and save the file:
    try {
        FileOutputStream oStream = openFileOutput(f, Context.MODE_PRIVATE);
        oStream.write(strFileContent.getBytes());
        oStream.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:39:22.823

FileOutputStream oStream = openFileOutput(f, Context.MODE_PRIVATE); oStream.write(strFileContent.getBytes()); oStream.close();

以上是您的代码，现在您已将 f 作为字符串，它应该是文件名。代码如下所示...

```
private void saveFromFile(String data) throws FileNotFoundException {

String FILENAME= "file.txt";

        FileOutputStream fos = openFileOutput(FILENAME, this.MODE_PRIVATE);
         try {
              fos.write(data.getBytes());
              fos.close();
         } catch (IOException e) {
              Log.e("Controller", e.getMessage() + e.getLocalizedMessage() + e.getCause());
        }
  } 
```

# html - 在 FancyBox 中调用 SpringMvc Jsp 表单

> ID：13004641
> 
> 赞同：1
> 
> 时间：2012-10-22T03:29:54.000
> 
> 标签：html, jsp, spring-mvc, fancybox

我正在尝试将 jsp 表单放入fancybox 我的站点功能正常，所以我知道我的大多数配置都是正确的。我还对图像进行了样本测试，效果很好，但是我遇到了问题。下面是代码：

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

    <script type="text/javascript">
            <%@ include file="../js/lightbox/jquery.fancybox.pack.js"%>

    </script>

    <style>
            <%@ include file="../js/lightbox/jquery.fancybox.css" %>

    </style>    

  <script type="text/javascript">
        $(document).ready(function() {

            $(".fancybox").fancybox();
        });
    </script>

  <title><fmt:message key="title"/></title>

  </head>
  <body>
    <h1><fmt:message key="heading"/></h1>
    <p><fmt:message key="greeting"/></p>

    <a href="<c:url value="login.htm"/>">Login</a></br>

    <a href="<c:url value="officer_registration.htm"/>">Register</a></br>

    <a class="fancybox" href="officer_registration.htm">Light Box Registration</a></br>
    <a class="fancybox" href="http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg" >dog</a>

   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:38:42.750

将 data-fancybox-type="iframe" 添加到链接中，这将在 fancybox 中放置一个 iframe，显示您通过的 href。

# vb.net - SyncLock 和很多线程 VB .Net

> ID：13004643
> 
> 赞同：2
> 
> 时间：2012-10-22T03:30:00.657
> 
> 标签：vb.net, multithreading, synclock

我的情况是我有以下方法，它使用 SyncLock 来确保一次一个线程写入文件。

```
Private Shared lockThis As New Object 

Public Sub Process()
  SyncLock lockThis
    File.AppendAllText("c:\jamo\foo.txt","foo")
  End SyncLock 
End Sub 
```

我正在使用同时运行的许多线程：

```
Public Sub CreateThreads()
  Dim trd as Thread
  Dim X as Integer = 10
  For i as integer = 1 to X
    trd = New Thread(AddressOf Process)
    trd.Start()
  Next Sub
End Sub 
```

我的问题是当 X 很大时（比如 500），一个或多个线程同时写入文件。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:56:26.870

我没有证据，但它可能是在说真话。如果任何其他进程打开文件而不共享它，并且有 500 个或更多线程试图打开它，那么文件很可能会被其中一个锁定......

# php - 实时聊天：我有哪些选择？

> ID：13004649
> 
> 赞同：2
> 
> 时间：2012-10-22T03:30:32.000
> 
> 标签：php, xmpp, chat, real-time, long-polling

我正在尝试为使用 PHP 从头开始​​构建的现有利基网站构建实时聊天组件。

我们开始使用 APE 服务器，但遇到了与 SSL 支持相关的问题，而且那里的社区似乎反应迟钝。所以我开始评估替代解决方案。

我正在寻找一个尽可能少依赖他人的长期解决方案。就协议而言，XMPP 似乎是最好的方法，尽管我对此的经验为零。我不介意学习，尽管我很想听听社区对它和/或替代方案的看法。

这将用于用户<>用户聊天、群聊和站点范围的聊天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:52:39.787

> 我正在寻找一个尽可能少依赖他人的长期解决方案

XMPP 是一个基于标准的开放协议，您可以轻松部署自己的 XMPP 服务器。因此，您绝对不必依赖任何单一供应商。

我最近使用 XMPP为[Plone CMS 编写了一个](http://plone.org)[IM Web 客户端](http://github.com/collective/collective.xmpp.chat)，我对结果非常满意。

> 这将用于用户<>用户聊天、群聊和站点范围的聊天。

我编写的实现有单用户和群聊（但不是站点范围的）。

[你可以在我的博客上](http://opkode.com/media/blog/instant-messaging-for-plone-with-javascript-and-xmpp)看到它的截屏视频

**涉及的主要技术：**

*   [Ejabberd](http://www.ejabberd.im/) XMPP 服务器
*   [Strophe.js](http://github.com/metajack/strophejs)（用于与 xmpp 服务器连接/通信的 javascript 库）
*   [Backbone.js](http://backbonejs.org/)（启用结构化 JS）
*   [匡威.js](http://github.com/jcbrand/converse.js)

Converse.js 是实际生成 IM 客户端的代码。该代码与 Plone CMS 松散耦合，应该可以将其完全解耦并使其可移植到任何系统甚至静态 HTML 站点。

目前在 converse.js Github 存储库中没有什么可看的，对此我深表歉意。在接下来的几周内，我将添加文档、示例站点并花时间完全解耦 converse.js。

# android - 如果键盘被本机触摸关闭，我如何获得 iPhoneKeyboard.done？

> ID：13004654
> 
> 赞同：3
> 
> 时间：2012-10-22T03:31:04.330
> 
> 标签：android, ios, keyboard, unity3d

首先，我发现不同的安卓设备（甚至是iOS设备）在原生键盘开启的情况下都会有自己的句柄：

*   在 Galaxy Nexus 中，键盘将通过在键盘外点击而关闭
*   在索尼爱立信 Acro HD 中，所有后面的响应都会被阻止，直到点击键盘上的 OK 按钮。

我按 键打开键盘`iPhoneKeyboard.Open()`。`iPhoneKeyboard.done`如果点击本机键盘中的 OK 按钮，则可以正常工作。但是，`iPhoneKeyboard.done`如果 Nexus 中的操作系统将其解散，则不会触发该问题。

如果它被操作系统解雇， 我怎么能`iPhoneKeyboard.done`进去？`true`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:29:41.740

将我的 Unity 从 3.5.2 升级到 3.5.6。Nexus 中的问题已解决。我认为 Unity Team 已经解决了这个问题。作为参考，我在 3.5.6 修复中发现了这一点： Android：确保 OnScreenKeyboard 由于失去焦点而关闭后可以再次打开。

# javascript - 什么样的构造会在 Javascript 中使用注释分隔符 */？

> ID：13004655
> 
> 赞同：6
> 
> 时间：2012-10-22T03:31:04.917
> 
> 标签：javascript, comments

来自[“Javascript：好的部分”：好的部分](http://bluebones.net/2011/04/javascript-the-good-parts-the-good-parts/)：

> 避免`/* … */`评论，`*/`出现在 javascript 中的有用结构中。使用`//`.

我很好奇这些“有用的构造”可能是什么，因为我想不出任何 OTOH（除了可能的正则表达式`/.*/`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:32:39.680

是的，正则表达式很可能是他所指的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:10:14.883

这位博主试图缩写 Crockford 在 JavaScript: The Good Parts, Chapter number 2 ( Grammar ) 上写的内容。这个主题出现在第一部分的最后一段（空白）。它说，

> /* */ 形式的块注释来自一种叫做 PL/I 的语言。PL/我选择那些奇怪的对作为注释符号，因为它们不太可能出现在该语言的程序中，除非可能出现在字符串文字中。在 JavaScript 中，这些对也可以出现在正则表达式文字中，因此块注释对于注释掉代码块是不安全的。例如：
> 
> ```
>  /* 
>      var rm_a = /a*/.match(s); 
>  */ 
> ```
> 
> 导致语法错误。因此，建议避免使用 /* */ 注释，而改用 // 注释。在本书中，// 将被专门使用。

# ruby - 中断中的调用者

> ID：13004656
> 
> 赞同：1
> 
> 时间：2012-10-22T03:31:17.077
> 
> 标签：ruby, interrupt

`caller`从中断中调用内容的规则是什么？当我运行以下代码时：

```
File: test

1| def a; b end
2| def b; c end
3| def c; loop{sleep(1)} end
4| def d; e end
5| def e; f end
6| def f; puts caller; exit end
7| Signal.trap("INT"){d}
8| a 
```

并`Ctrl+c`在执行期间键入，我得到以下输出：

```
test:5:in `e'
test:4:in `d'
test:7:in `block in <main>'
test:3:in `call'
test:3:in `sleep'
test:3:in `block in c'
test:3:in `loop'
test:3:in `c'
test:2:in `b'
test:1:in `a'
test:8:in `<main>' 
```

构成此调用堆栈的规则是什么？我看到两个`<main>`. 它们以某种方式结合在一起。我不完全确定如何。另外，当有多个线程运行时会发生什么？如何确定在从中断调用的调用堆栈中合并或忽略哪些线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:54:41.177

我不确定你在寻找什么“规则”。信号由 ruby​​ 运行时异步接收并排队；在每个原始执行步骤（1.8 中的 AST 节点，YARV 中的字节码指令）之间，运行时检查是否有未决信号并为它们调用绑定的处理程序。调用处理程序不会修改先前存在的调用堆栈。如果您的处理程序要返回，程序执行将重新从中断处重新开始。

这是您的示例展示的执行流程：在 main 中，您调用`Signal.trap`将它交给`{d}`main 中定义的块。然后你调用`a`，它调用`b`，它调用`c`，它永远循环调用在 c`{sleep(1)}`中定义的块调用`sleep`。

您发送 SIGINT 并且运行时接收信号并调用您注册为 INT 处理程序 ( `test:7:in 'block in <main>'`) 的块，该处理程序调用`d`，调用`e`，调用`f`，打印您看到的调用堆栈并退出。

由于大部分时间都花在睡眠中，因此最有可能调用 INT 处理程序的执行点。但是，如果 INT 信号恰到好处，您可能会看到相同的调用堆栈，但省略了以下一行或两行：

```
test:3:in `sleep'
test:3:in `block in c' 
```

# macos - 图标作曲家填充小图像

> ID：13004657
> 
> 赞同：0
> 
> 时间：2012-10-22T03:31:25.180
> 
> 标签：macos, cocoa, icons, icon-composer

出于某种原因，Icon Composer 不喜欢我的 32x 和 64x 图标。

![图标不起作用](../Images/21dc06e250953491fcc5a9e37bb63429.png)

它们看起来像 PNG，但当放入 Icon Composer 并转换为 .ICNS 文件时，小图像看起来会被拉伸（I 通常位于中心）。

![图标罚款为PNG](../Images/d63be336ab2833eabe0346661c68b0bb.png)

有谁知道我能做什么？

# google-app-engine - 构建 Google App Engine 以实现强一致性

> ID：13004660
> 
> 赞同：1
> 
> 时间：2012-10-22T03:31:45.930
> 
> 标签：google-app-engine

我想完成这个计划，以实现与我的 GAE 结构的高度一致性。目前，这就是我所拥有的（这真的很简单，我保证）：

你有一个类（类意味着课堂不是编程“类”）模型和一个分配模型以及一个用户模型。现在，一个类有一个名为 memberIds 的整数列表属性，它是一个用户 ID 的索引列表。一个类也有一个分配 id 的字符串列表。

每当创建新的作业时，其各自的类实体也会更新，并将新的作业 ID 添加到其列表中。

我想做的是为用户获取新的作业。我所做的是**查询**所有 Classes where `memberId = currentUserId`. 我返回的每个班级都有一个作业 ID 列表。我使用这些 id 按键来获取它们各自的分配。在使用这个数据模型几个月后，我才意识到我可能无法获得与这个数据模型的强一致性（对于类查询部分）。

如果用户 A 发布了一个作业（从而更新了 ClassA），那么在几分之一秒后签入新作业的用户 B 可能还没有看到 ClassA 的更新更改（对吗？）。

这是不希望的。一种解决方案是用户祖先查询，但在我的情况下这是不可能的，并且实体组被限制为每秒 1 次写入，我不确定这是否足以满足我的情况。

所以这就是我的想法：每当发布新作业时，我们都会这样做：

*   获取相应的 Class 实体
*   将作业 ID 添加到班级
*   获取该类所有成员的 id
*   通过键获取所有成员用户
*   用户实体具有用户所属的类列表。（一个 LocalStructuredProperty，有点像字典：{"classId" : "242", "hasNewAssignment" : "Yes"} ）。我们将该类标记为`hasNewAssignment = YES`
*   现在，当用户想要获得新分配时，我不是**查询**具有新分配并且我是其中成员的组，而是检查类的用户对象列表并检查哪些类具有新分配。
*   我按键检索这些类（到目前为止非常一致，对吗？）
*   我检查了班级的作业列表，并按键检索所有作业。

所以在整个过程中，我从来没有问过。所有结果都应该是高度一致的，对吧？这是一个好的解决方案吗？我是不是把事情复杂化了？我的读/写成本是否因此而飙升？你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:56:09.480

查询不是强一致的。获取是强一致的。

我认为你做了正确的事：

1.  您的访问是高度一致的。
2.  您的读取会更便宜：一次获取比返回一个实体的查询便宜一半。
3.  您写入的成本会更高：您还需要更新所有用户实体。

因此，成本取决于您的使用模式：您有多少作业读取与新作业创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T10:09:24.520

我认为使用祖先查询是一个更好的解决方案。

*   将分配实体的祖先设置为分配分配的类
*   将学生实体的祖先设置为学生所属的类。

这样，特定班级中的所有作业和学生都属于同一个实体组。因此，对于一个只需要处理一个类的查询，可以保证强一致性。

注意，我假设不会有太多人不会同时将作业发布到课程中。（但任何数量的人都可以将作业发布到不同的班级，因为他们属于不同的实体组）

# android - Kindle Fire HD：电影比jpg更亮

> ID：13004663
> 
> 赞同：2
> 
> 时间：2012-10-22T03:31:59.910
> 
> 标签：android, media-player, android-mediaplayer, kindle-fire, brightness

我一直在开发一个用户触摸屏幕开始电影的应用程序。屏幕图像是电影的第一帧。一旦触摸发生，电影就会播放。我通过将第一帧的 jpg 放在电影前面，然后在我认为电影正在播放时删除 jpg 来做到这一点。（弄清楚何时发生这种情况是不可能的，但这是另一个问题。在旧设备上，如果你过早删除图像，你会变黑。）

在大概六种不同的设备上进行了测试。今天第七个：Kindle Fire HD。在此设备上，电影都比相应的 jpg 更亮。在所有其他设备上，它们完美匹配。有什么想法可能导致此问题或如何解决？

（HD 的另一个问题是电影需要很长时间才能开始播放。但这是另一个问题。）

编辑：这是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <ImageView
        android:id="@+id/iv"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
    <VideoView
        android:id="@+id/vv" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</FrameLayout> 
```

这是代码：

```
public class VideoTestActivity extends Activity implements SurfaceHolder.Callback, OnPreparedListener, OnCompletionListener {
private VideoView vv;
private ImageView iv;
private Bitmap b;
private MediaPlayer mp = new MediaPlayer();
private static final String TAG = VideoTestActivity.class.getSimpleName();
private volatile boolean prepared = false;
private volatile boolean readytoplay = false;
private volatile boolean playing = false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);
    iv = (ImageView)findViewById(R.id.iv);
    iv.bringToFront();
    vv = (VideoView)findViewById(R.id.vv);
    b = BitmapFactory.decodeResource(getResources(), R.drawable.babyblack);
    iv.setBackgroundColor( 0xFFDFA679 );
    vv.getHolder().addCallback(this);
    mp.setOnPreparedListener( this );
    mp.setOnCompletionListener( this );
    try {
        mp.setDataSource( this, Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.ape) );
    } catch (IllegalArgumentException e) {
        Log.d(TAG,"illegal argument exception on set data source");
        e.printStackTrace();
    } catch (SecurityException e) {
        Log.d(TAG,"security exception on set data source");
        e.printStackTrace();
    } catch (IllegalStateException e) {
        Log.d(TAG,"illegal state exception on set data source");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG,"IO exception on set data source");
        e.printStackTrace();
    }

}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float dx, dy;
    Log.d(TAG,"touch event");
    if ( !playing && event.getAction() == MotionEvent.ACTION_UP ) {
        Log.d(TAG,"action up");
        if ( prepared ) {
            playing = true;
            Log.d(TAG,"hardware accelerated: iv="+iv.isHardwareAccelerated()+", vv="+vv.isHardwareAccelerated());
            mp.start();
            Log.d(TAG, "playing video in onTouch callback");
            Log.d(TAG,"hardware accelerated: iv="+iv.isHardwareAccelerated()+", vv="+vv.isHardwareAccelerated());
        } else
            readytoplay = true;
    }
    return true;
}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    Log.d(TAG,"surface is created");
    mp.setDisplay( vv.getHolder() );
    try {
        mp.prepareAsync();
    } catch (IllegalArgumentException e) {
        Log.d(TAG,"illegal argument exception on prepare");
        e.printStackTrace();
    } catch (SecurityException e) {
        Log.d(TAG,"security exception on prepare");
        e.printStackTrace();
    } catch (IllegalStateException e) {
        Log.d(TAG,"illegal state exception on prepare");
        e.printStackTrace();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
}

@Override
public void onPrepared(MediaPlayer mp) {
    Log.d(TAG,"video is prepared");
    prepared = true;
    if ( readytoplay ) {
        playing = true;
        mp.start();
        iv.setVisibility( View.GONE );
        Log.d(TAG,"playing video from prepared callback");
    }
}

@Override
public void onCompletion(MediaPlayer arg0) {
    Log.d(TAG,"video is done");
    playing = false;
    iv.setVisibility( View.VISIBLE );
}} 
```

我将 ImageView 更改为没有图像，而只有纯色背景。您需要的唯一数据文件是 mp4 电影。当您触摸屏幕时，电影就会播放，隐藏在 ImageView 后面。当我触摸它时屏幕立即变亮（mp.start() 发生），然后电影开始播放，逐渐变暗，然后再次变亮，最后在电影完成时稳定下来。

我试过硬件加速，没有硬件加速；没有不同。我尝试将 Kindle Fire HD 插入，而不是插入；没有不同。

我会发布我正在使用但不知道如何发布的 2 秒 mp4 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:13:24.457

看起来它是设计使然，根据这个论坛帖子 - [https://forums.developer.amazon.com/forums/thread.jspa?threadID=450#1780](https://forums.developer.amazon.com/forums/thread.jspa?threadID=450#1780)

# ruby-on-rails-3.2 - 为什么 Rails 在大批量插入时放弃 Postgres 连接？

> ID：13004664
> 
> 赞同：1
> 
> 时间：2012-10-22T03:32:17.193
> 
> 标签：ruby-on-rails-3.2, postgresql-9.1, rails-postgresql

我是 linux 和服务器管理领域的新手，我被困住了。

我有一个 Rails 应用程序，它偶尔需要执行大数据插入，通常大约 20,000 行。该代码似乎在开发（osx）中运行良好，但在生产服务器（ubunto，linode vps）上，它每次都失败，通常在大约 1,700 次插入之后。确切的数字各不相同（1655、1697、1756），但始终如一。

我在 production.log 文件中没有看到太多有用的信息。只是：

```
Connecting to database specified by database.yml 
```

失败后一秒钟左右。

在 postgresql 主日志中：

```
2012-10-21 23:01:28 EDT LOG:  could not receive data from client: Connection reset by peer
2012-10-21 23:01:28 EDT LOG:  unexpected EOF on client connection 
```

我正在运行 Rails 3.2.8、ruby 1.9.3-p194、psql 1.9.4、nginx、独角兽

真正遵循以下部署步骤： [http ://railscasts.com/episodes/335-deploying-to-a-vps](http://railscasts.com/episodes/335-deploying-to-a-vps)

其他注意事项：

a) 我已经尝试在事务中包装而不是包装 ActiveRecord 插入。没有区别。

b) Ruby 在插入数据库之前做了大量工作来收集和组织数据。这包括对第三方 Web 服务的多次调用。但是我已经确认这些通信是成功的，并且数据看起来很好。

有任何想法吗？或者至少有什么关于我可以在哪里继续调查的建议？非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:19:21.670

这个故事的寓意是：“当有疑问时，责怪独角兽。”

（独角兽设置为在 30 秒后超时工作进程。）

# php - 如何从mysql中找到时间总和

> ID：13004673
> 
> 赞同：1
> 
> 时间：2012-10-22T03:35:01.893
> 
> 标签：php

您好，我要从我的 sql 打印时间总和，但我无法帮助我。

```
$SQL = "SELECT duration FROM core_network ";
$result = mysql_query($SQL);

$c_count='0';
$n="0";
$duration=array();
while ($db_field = mysql_fetch_array($result)) {
$duration[$n]= $db_field['duration'];
 echo $duration[$n];
$n++;
$c_count++;
 }

the result is 18:00:0000:39:0008:00:00

than i found the code from internet

function sum_the_time($Duration) {
 $times = array('18:00:00','00:39:00','08:00:00');
 $seconds = 0;
 foreach ($times as $time)
 {
   list($hour,$minute,$second) = explode(':', $time);
   $seconds += $hour*3600;
   $seconds += $minute*60;
   $seconds += $second;
 }
 $hours = floor($seconds/3600);
 $seconds -= $hours*3600;
 $minutes  = floor($seconds/60);
 $seconds -= $minutes*60;
  // return "{$hours}:{$minutes}:{$seconds}";
 return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds);
  }
 echo sum_the_time($duration); 
```

如何输入 $duration[$n] 到 $times = array('18:00:00','00:39:00','08:00:00'); 而是多次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:42:50.953

只需将 $duration 作为参数传递给函数：

```
function sum_the_time($times) {
 $seconds = 0;
 foreach ($times as $time)
 {
   list($hour,$minute,$second) = explode(':', $time);
   $seconds += $hour*3600;
   $seconds += $minute*60;
   $seconds += $second;
 }
 $hours = floor($seconds/3600);
 $seconds -= $hours*3600;
 $minutes  = floor($seconds/60);
 $seconds -= $minutes*60;
  // return "{$hours}:{$minutes}:{$seconds}";
 return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds);
  }
 echo sum_the_time($duration); 
```

# android - 服务器套接字未打开端口 Android

> ID：13004674
> 
> 赞同：0
> 
> 时间：2012-10-22T03:35:10.593
> 
> 标签：android, sockets, port, serversocket

我想连接到我在 Android 中构建的服务器，但我不能，我不知道如何连接它。我认为我的代码很好。我使用许可 INTERNET 更改了清单。

```
package com.android.server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    private static String TAG = "ServerSocketTest";
    EditText edittext1;
    private ServerSocket server;

    Runnable conn = new Runnable() {
        public void run() {

            try {
                edittext1.setText("Esperando0");
                server = new ServerSocket(9999);
                edittext1.setText("Esperando1");
                while (true) {
                    edittext1.setText("Esperando2");
                    Socket socket = server.accept();
                    if(socket.isConnected() == true){
                        edittext1.setText("socket is connected: " + socket.getRemoteSocketAddress().toString());
                    }
                    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    String str = in.readLine();
                    Toast.makeText(getApplicationContext(), "BufferedReader ready", Toast.LENGTH_SHORT).show();
                    Toast.makeText(getApplicationContext(), str, Toast.LENGTH_SHORT).show();
                    Log.i("received response from server", str);
                    edittext1.setText("Conectado");
                    PrintWriter salida = new PrintWriter(new OutputStreamWriter( socket.getOutputStream() ),true );
                    salida.println("Conexion establecida");
                    in.close();
                    socket.close();
                }
            } catch (IOException e) {
                Log.e(TAG, e.getMessage());
            } catch (Exception e) {             
                Log.e(TAG, e.getMessage());
            }
        }
    };

    @SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        edittext1 = (EditText)findViewById(R.id.editText1);
        Button boton1 = (Button)findViewById(R.id.button1);
        boton1.setOnClickListener(this);
        new Thread(conn).start();
    }

    @Override
    protected void onPause() {      
        super.onPause();
        if (server != null) {
            try {
                server.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public void onClick(View v) {

    }   
} 
```

我的客户，它工作得很好。：

```
package com.clientesocketandroid;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class ClienteSocketAndroid extends Activity implements OnClickListener{
    String IP,mensaje, MensajeEntrada;
    int Port;
    Socket socket;
    ServerSocket SSocket;
    PrintWriter out;
    Button boton1, boton2,boton3;
    EditText edittext1,edittext2,edittext3,edittext4;
    TextView textview5;
    String mClientMsg = "";
    Thread myCommsThread = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cliente_socket_android);

        boton1 = (Button)findViewById(R.id.button1);
        boton1.setOnClickListener(this);
        boton2 = (Button)findViewById(R.id.button2);
        boton2.setOnClickListener(this);
        boton3 = (Button)findViewById(R.id.button3);
        boton3.setOnClickListener(this);
        edittext1 = (EditText)findViewById(R.id.editText1);
        edittext2 = (EditText)findViewById(R.id.editText2);
        edittext3 = (EditText)findViewById(R.id.editText3);
        edittext4 = (EditText)findViewById(R.id.editText4);

        Port = Integer.parseInt(edittext3.getText().toString());
        try {
            SSocket = new ServerSocket(Port);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            try {
                socket = SSocket.accept();
                Toast.makeText(getApplicationContext(), "Listo", Toast.LENGTH_SHORT).show();
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                MensajeEntrada = in.readLine();
                edittext4.setText(MensajeEntrada);
            } catch (Exception e) {
                e.printStackTrace();
            }
    }

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    public void onClick(View arg0) {
        if(arg0.getId() == R.id.button1){
             try {
                 IP = edittext2.getText().toString();
                 Port = Integer.parseInt(edittext3.getText().toString());
                 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                 StrictMode.setThreadPolicy(policy);
                 socket = new Socket(IP, Port);    //Abre un socket con el número de IP y de puerto.
                 if(socket.isConnected() == true){
                     Toast.makeText(getApplicationContext(), "Conectado", Toast.LENGTH_SHORT).show();
                 }
             } catch (UnknownHostException e) {
                 e.printStackTrace();
                 edittext1.setText(e.getMessage() + ": " + e.getCause());
             } catch (IOException e) {
                 e.printStackTrace();
                 edittext1.setText(e.getMessage() + ": " + e.getCause());
             }  
            }
        if(arg0.getId() == R.id.button3){
            try {
                mensaje = edittext1.getText().toString();
                PrintWriter salida = new PrintWriter(new OutputStreamWriter( socket.getOutputStream() ),true );
                salida.println(mensaje); 
                edittext1.setText("");
                //hace falta concatenacion
                edittext4.setText("" + "\n" + mensaje + "");
            } catch (IOException e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), "Mensaje NO enviado", Toast.LENGTH_SHORT).show();
            }     
        }
        if(arg0.getId() == R.id.button2){
            try {
                PrintWriter salida = new PrintWriter(new OutputStreamWriter( socket.getOutputStream() ),true );
                salida.println("bye"); 
                Toast.makeText(getApplicationContext(), "Conexión cerrada", Toast.LENGTH_SHORT).show();
                socket.close();
            } catch (IOException e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), "Error al cerrar sesion", Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

我感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:15:03.150

该算法表明，无论您的套接字是否连接，您总是会创建一个缓冲的 i/O 流并发送数据

以下是我建议的服务器伪代码

```
try(socket successfully connected) {
    try( server is synchronized with the client)  socket.accept();
 // create the Object I/O  stream

 } show error 
```

为客户

```
//Create a new socket with IP address and port number
try 
client connect to server with aforementioned parameters with timeout

  create a Object I/O stream
   catch (IOException) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:17:36.677

我在您的代码中看到的一个问题是，您无法从非 Ui 线程更新 Ui 元素，这就是它引发异常的原因，但您已经捕获了所有异常。

所以从 runnable 中删除所有 setText 调用。

```
edittext1.setText("Conectado"); 
```

使用 runonUithread 或任何其他方法来更新 UI 元素，不要像以前那样捕获所有异常。调试起来相当困难。

# struts2 - 自由标记异常

> ID：13004675
> 
> 赞同：0
> 
> 时间：2012-10-22T03:35:15.783
> 
> 标签：struts2, freemarker

我正在使用 struts2.1.8 和 freemarker2.3.15。程序上线后，抛出IOException。堆栈跟踪仅显示了很多过滤器，我无法从堆栈跟踪中判断出什么问题，希望有人见过这种错误并提供帮助。

```
java.io.IOException: There was an error loading the template on an earlier attempt; it is attached as a cause
    freemarker.cache.TemplateCache.throwLoadFailedException(TemplateCache.java:400)
    freemarker.cache.TemplateCache.getTemplate(TemplateCache.java:278)
    freemarker.cache.TemplateCache.getTemplate(TemplateCache.java:235)
    freemarker.template.Configuration.getTemplate(Configuration.java:487)
    freemarker.template.Configuration.getTemplate(Configuration.java:459)
    org.apache.struts2.views.freemarker.FreemarkerResult.doExecute(FreemarkerResult.java:168)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:362)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:266)
    org.apache.struts2.interceptor.MessageStoreInterceptor.intercept(MessageStoreInterceptor.java:204)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)

java.lang.NullPointerException
    com.creditease.core.exception.ExceptionInterceptor.intercept(ExceptionInterceptor.java:42)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    org.apache.struts2.interceptor.MessageStoreInterceptor.intercept(MessageStoreInterceptor.java:204)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    com.creditease.p2p.interceptor.AccessInterceptor.intercept(AccessInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:00:05.083

这可能是因为您的生产应用程序服务器是从它无法访问的某个路径启动的。尝试从它可以访问的路径并使用 root 凭据启动您的服务器。

# jquery - 淘汰赛无法让过渡工作

> ID：13004677
> 
> 赞同：2
> 
> 时间：2012-10-22T03:35:28.787
> 
> 标签：jquery, json, knockout.js

我已经与 Knockout 合作了几天。事情进展得相对顺利，但我遇到了一个问题。我似乎无法在这里运行动画过渡。理想情况下，我希望能够在破坏事件中淡出奇异元素。我还希望能够在页面转换时为整个表格设置动画。我无法让任何工作，因为该元素始终是“未定义的”。

这是我的 foreach 绑定：

```
<tbody data-bind='foreach: { data : $root.displayResults(startValue(), endValue()), beforeRemove: hideElement }'> 
```

但是当调用该函数时，我得到一个未定义的 jQuery 错误

```
self.hideElement = function(elem) {
    $(elem).hide(300)
} 
```

看看[这个小提琴](http://jsfiddle.net/7q6Ma/4/)，让我知道你们的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:35:49.253

您应该知道 KO 将`beforeRemove`根据您的模板多次调用回调：在您的情况下，它将是一个文本节点、tr 和另一个文本节点。

因此，您需要过滤掉文本节点，并且仅`elem.nodeType == 1`在节点类型为元素时才进行隐藏：

```
self.hideElement = function(elem) {
    if (elem.nodeType === 1) 
       $(elem).hide(300)
} 
```

这是一个[`JSFiddle`](http://jsfiddle.net/nemesv/7q6Ma/5/)具有有效删除功能的功能，我还添加了一些日志记录以查看`beforeRemove`调用了多少次。

[动画过渡示例](http://knockoutjs.com/documentation/foreach-binding.html)的`hidePlanetElement`方法也是如此。

# c# - 为文本框和 AJAX 更新面板控件创建事件

> ID：13004683
> 
> 赞同：0
> 
> 时间：2012-10-22T03:36:05.603
> 
> 标签：c#, asp.net, .net, events

我想为 C# 中的文本框创建一个“单击”事件（因为没有）。

所以，这样

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request["__EVENTARGUMENT"] != null && Request["__EVENTARGUMENT"] == "txt1OnClick")
    {
        txt1_Click();
    }

    txt1.Attributes.Add("onclick", this.Page.ClientScript.GetPostBackEventReference(txt1, "txt1OnClick"));
}

private void txt1_Click()
{
    ImageMap1.ImageUrl = "guide/1.jpg";
} 
```

然后我想加载图像而不重新加载页面。

所以我使用了AJAX UpdatePanel Control，这很好用

```
protected void Button1_Click(object sender, EventArgs e)
{
    ImageMap1.ImageUrl = "guide/1.jpg";
} 
```

但不是我创建的事件，因为编译器不会将我的新事件识别为真实事件或我无法弄清楚的事情。

[我根据“使用外部按钮刷新 UpdatePanel 控件](http://msdn.microsoft.com/en-us/library/bb399001.aspx)”的第 8 步添加了 button1_click 事件。

此选项中不显示文本框的点击事件：

![文本框](../Images/eaf76d706c25eabdb595fa2c8f82a2be.png)

所以我的问题是有没有办法在`System.Web.UI.WebControls.TextBox`类中添加这个事件，或者让这个事件在上述选项中可见？

这样我就可以在更新面板的触发器中包含文本框的单击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:12:17.667

如果您尝试为 a 创建 Click 事件`TextBox`，则每次用户单击您的文本框时，您都会触发对服务器的回发（甚至评估您是否需要在处理事件时执行某些操作）。这是非常低效的 - 您应该使用 JavaScript 处理浏览器中的点击，然后使用客户端逻辑触发 UpdatePanel。

这使您可以在需要时触发对服务器的调用，但在不需要时避免调用。如果您有服务器端事件处理程序，您的代码将在用户每次单击`TextBox`.

您可以阅读有关`__doPostBack()`在客户端使用来触发`UpdatePanel`执行回发的此链接（和其他链接）。

[http://encosia.com/easily-refresh-an-updatepanel-using-javascript/](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)

# xml - 使用 Pentaho 作为 XML ETL 工具

> ID：13004689
> 
> 赞同：1
> 
> 时间：2012-10-22T03:38:13.530
> 
> 标签：xml, etl, pentaho

我对 Pentaho 一无所知，我只想知道它是否能完成我的工作，然后再投入大量时间来学习它。

Pentaho 可以用作 XML ETL 工具吗？能否实现任意变换？一个典型的转换是将 XML 元素“Company”及其子元素“Employee”折叠到同一个“Employee”表中，但这只是最简单的转换，还有无限的其他可能性。例如，要将以下 XML 导入我们的数据库：

```
 <Root>
       <OrdersByCustomer>
        <CustomerInfo>
          <Customer>
            <CustomerID>1234</CustomerID>
            ...
          </Customer>
          <Address>...</Address>
        </CustomerInfo>
        <Orders>
          <Order>...</Order>
          <Order>...</Order>
          <Order>...</Order>
        </Orders>
      </ OrdersByCustomer>
    </Root> 
```

我需要获取 CustomerID 并将其与 XML 元素“Order”中的数据一起插入。

潘塔霍能做到如此无限的任意变换吗？还是我必须削减自己的代码？

如果上述问题的答案是肯定的，那么，还有两个问题：

1.  Pentaho 是对称的和双向的吗？我们不仅需要将 XML 导入数据库，还需要从数据库中的数据生成 XML。Pentaho 能做到吗？

2.  如果答案再次是肯定的，我知道 Pentaho 是一个框架，并且有关于它的书籍。我需要学习整个框架，还是我可以直接安装它，花半天时间只学习 XML ETL 部分，然后开始使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:07:34.523

1.  是的，Kettle/PDI 可以像导入 XML 一样轻松导出 XML。
2.  不，您可以只使用 Kettle 的 XML 部分，它本身只是堆栈的一部分。需要明确的是——Pentaho 本身并不是一个框架，它是一个包含多个子产品的产品堆栈——你只需要查看 ETL 部分——PDI/Kettle。

水壶很容易上手，所以只需加载它，阅读许多示例中的一些，然后开始吧！

# c# - 如何让我的 Linq 选择根据我的方法的参数返回不同的东西？

> ID：13004693
> 
> 赞同：1
> 
> 时间：2012-10-22T03:38:50.850
> 
> 标签：c#

我有以下内容：

```
var options = xxx
    .Select(x => new SelectListItem
    {
        Value = ((int) Enum.ToObject(t, x)).ToString(),
        Text = Regex.Replace(x.ToString(), "([A-Z])", " $1").Trim()
    }); 
```

这是这样调用的方法的一部分：

```
GetSpacedOptions(bool zeroPad = false) 
```

如果 zeroPad 设置为 true，那么我该如何做到这一点，而不是返回 1、2、3、4、5 等，而是返回“01”、“02”等作为选择中的值？如果 zeroPad 设置为 default 或 false 那么它需要返回 1,2 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:55:52.853

我不确定我的问题是否正确，但这是一种方法。

```
string numberFormat = zeroPad ? "D2" : "g";
...
Value = ((int) Enum.ToObject(t, x)).ToString(numberFormat), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:54:42.367

那这个呢：

```
var options = xxx 
.Select(x => new SelectListItem 
{ 
    Value = zeroPad ? ((int) Enum.ToObject(t, x)).ToString().PadLeft(2, '0')
        : ((int) Enum.ToObject(t, x)).ToString(), 
    Text = Regex.Replace(x.ToString(), "([A-Z])", " $1").Trim() 
}); 
```

诀窍就是`PadLeft`方法。请注意，第一个参数是字符串的总长度，因此如果`(int)Enum.ToObject(t, x)`返回双（或更多）数字的值，您可能需要根据这些较大值的显示方式将总长度调整为更合适的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:52:37.347

怎么样

```
private void GetSpacedOptions(bool zeroPad = false)
{
    string str = "";
    if(zeropad)
    {
        str = //
    }
    else
    {
        str = //
    }

    //Then use str in code
    var options = //
} 
```

# c - 在 C 中实现 Unix 'dc' 实用程序

> ID：13004694
> 
> 赞同：0
> 
> 时间：2012-10-22T03:39:20.423
> 
> 标签：c, dc

我只是希望得到一些关于如何开始我的作业的提示。内容如下：

“实现一个行为类似于 'dc' 实用程序的程序，它以后缀表示法计算表达式，并且还支持使用变量和宏字符串的额外计算。随意尝试现有实用程序并查阅其手册页。作业将仅支持完整实用程序的一个子集： -- 所有数值都是整数，仅使用基数 10

-- 可以假定数字在 32 位有符号数字的范围内

-- 所有寄存器名称都是字母数字的（这些 dc 允许的子集）

-- 不需要命令行选项或参数

-- 只需要以下命令（与手册顺序相同） pnf + - * / % ^ cdrsl SL x > !> < !< = != q #

分配和现有实用程序之间的一些关键区别： -- 所有输入将仅通过标准输入（但不一定是键盘）

-- 寄存器栈最初不是空的，而是充满了无限的零

-- q 命令将退出程序，无论宏调用嵌套级别如何

-- 为了便于阅读，输入标记之间可能会出现额外的空格（空格不是命令、值或寄存器名称）"

老实说，我不知道从哪里开始......非常感谢任何帮助，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:47:18.940

由于这是一项任务，您不知道从哪里开始，这里有一些提示：

*   从读取标准输入开始并将其拆分为标记
*   实现堆栈以存储操作数和结果
*   实现一些操作，如 +,-,*,/
*   让一切正常
*   然后将缺少的功能一一实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:41:12.907

@Serge 已经给出了如何开始的一个很好的大纲，但是你似乎有点不知所措`dc`，所以这里有一些建议。

*   作业说你应该试验真正的`dc`程序。这样做，如果你还没有这样做，你应该学到很多东西。（如果你还没有这样做，为什么不呢？）
*   查看[Wikipedia 页面`dc`](http://en.wikipedia.org/wiki/Dc_%28computer_program%2)的基本操作部分。
*   阅读`dc`手册页。第一次你会发现它令人困惑，但再读一遍，用实际的程序试试你在那儿看到的东西。
*   *如果您对后缀符号*的整个概念感到困惑，请参阅 Wikipedia page on [Reverse Polish Notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)，这是同一事物的另一个名称。

这应该让您了解以下非常简单的示例，并预测它们的作用：

*   `3 p`
*   `3 4 * p`
*   `3 4 5 + * p`
*   `3 4 + 5 * p`

你的任务远远超出了，但如果你得到了这么多的实施，你就完成了一半以上。

# matlab - 让 Matlab 像从键盘一样输入字符串

> ID：13004695
> 
> 赞同：0
> 
> 时间：2012-10-22T03:39:19.867
> 
> 标签：matlab, keyboard, automation, user-input

我想知道是否有人知道是否可以让 MATLAB 为您键入一个字符串，就像用户在键盘上键入它一样。我相信它可以使用 shell 脚本或 applescript 来完成，但我想知道 Matlab 是否有本机实现。

我试过四处寻找它，但没有任何运气。这不是超级必要的，但我只是超级懒惰，想写一个脚本，在 MATLAB 计算完之后自动将信息输入到应用程序中。

如果您知道另一种简单的方法，也请告诉我。非常感谢！

**编辑：** 添加一些我用来响应下面答案的代码，使用Java机器人类

```
function robotType(text)
    import java.awt.Robot; 
    import java.awt.event.*; 
    SimKey=Robot;
    for i = 1:length(text)
        if strcmp(text(i),upper(text(i))) == 0 || all(ismember(text(i),'0123456789')) == 1
            eval(['SimKey.keyPress(KeyEvent.VK_',upper(text(i)),')'])
            eval(['SimKey.keyRelease(KeyEvent.VK_',upper(text(i)),')'])
        else
            SimKey.keyPress(KeyEvent.VK_SHIFT);
            eval(['SimKey.keyPress(KeyEvent.VK_',upper(text(i)),')'])
            eval(['SimKey.keyRelease(KeyEvent.VK_',upper(text(i)),')'])
            SimKey.keyRelease(KeyEvent.VK_SHIFT);
        end
    end
end 
```

警告，代码可能不是最好的，但它是在 5 分钟内编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:44:33.997

我最终写了一个applescript来做我需要Matlab做的所有事情。不幸的是，这对 Windows 人没有帮助，但我和其他使用该脚本的人都是 mac 用户，所以它对我们有用。

但是，我已经编辑了上面的问题，以包含我最初在 Matlab 中用于自动输入内容的代码。只需运行命令 as `robotType('SomeString')`，它将键入该字符串。

我不相信它会很好地处理空格或随机字符，或者根本不会，但它对于 abc123 来说已经足够了。抱歉，对此没有最终解决方案。

# d3.js - d3：排序和升序的区别

> ID：13004700
> 
> 赞同：12
> 
> 时间：2012-10-22T03:41:03.120
> 
> 标签：d3.js

我想知道d3中排序函数和升序函数的区别。我正在寻找一种方法来按所选列的升序重新排列表中的数据。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T05:10:59.230

`Array.sort()`将按字母升序对值进行排序。 `Array.sort(d3.ascending)`将自然地按升序对值进行排序。当您对数字列表进行排序时，可以看到差异。

```
var a = [3,26,1,7];

console.log(a.sort());
// prints [1,26,3,7]

console.log(a.sort(d3.ascending));
// prints [1,3,7,26] 
```

有关如何`sort`工作的更多信息，请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。

# c++ - 如何使用 C++ 中的类创建和填充链表？

> ID：13004703
> 
> 赞同：1
> 
> 时间：2012-10-22T03:41:29.193
> 
> 标签：c++, class, linked-list

我正在尝试创建一个使用类来创建链表数据结构的程序。是否有必要创建一个包含完整列表的链表类：具有信息的节点和列表？还是我为列表创建一个类并为列表中的节点创建一个类？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:38:21.833

不要创建自己的列表 - 使用[std::list](http://www.cplusplus.com/reference/stl/list/)

# c++ - boost::iostreams 压缩的字符串长度

> ID：13004706
> 
> 赞同：2
> 
> 时间：2012-10-22T03:41:50.340
> 
> 标签：c++, boost-iostreams

我有一个字符串（一些固定长度），我需要对其进行压缩，然后比较压缩后的长度（作为数据冗余的代理或作为 Kolmogorov 复杂度的粗略近似值）。目前，我正在使用 boost::iostreams 进行压缩，这似乎运作良好。但是，我不知道如何获取压缩数据的大小。有人可以帮忙吗？

代码片段是

```
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filter/gzip.hpp>
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/filesystem.hpp>
#include <string>
#include <sstream>

namespace io = boost::iostreams;

int main() {

  std::string memblock;

  std::cout << "Input the string to be compressed:";
  std::cin >> memblock;

  std::cout << memblock << std::endl;

  io::filtering_ostream out;
  out.push(io::gzip_compressor());
  out.push(io::file_descriptor_sink("test.gz"));
  out.write (memblock.c_str(), memblock.size());

  std::cout << out.size() << std::endl;

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T05:13:42.163

您可以尝试`boost::iostreams::counter`在压缩器和接收器之间添加链，然后调用它的`characters()`成员以获取通过它的字节数。

这对我有用：

```
#include <boost/iostreams/filter/counter.hpp> 
```

...

```
io::filtering_ostream out;
out.push(io::counter());
out.push(io::gzip_compressor());
out.push(io::counter());
out.push(io::file_descriptor_sink("test.gz"));
out.write (memblock.c_str(), memblock.size());
io::close(out); // Needed for flushing the data from compressor

std::cout << "Wrote " << out.component<io::counter>(0)->characters() << " bytes to compressor, "
    << "got " << out.component<io::counter>(2)->characters() << " bytes out of it." << std::endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T09:32:10.063

我想出了另一种（稍微更巧妙）的方法来实现字符串的压缩长度。我想在这里分享它，但基本上它只是将未压缩的字符串传递给过滤的缓冲区并将输出复制回字符串：

```
template<typename T>
inline std::string compressIt(std::vector<T> s){

    std::stringstream uncompressed, compressed;
    for (typename std::vector<T>::iterator it = s.begin();
         it != s.end(); it++)
        uncompressed << *it;

    io::filtering_streambuf<io::input> o;
    o.push(io::gzip_compressor());
    o.push(uncompressed);
    io::copy(o, compressed);

    return compressed.str();
} 
```

稍后可以轻松获得压缩字符串的大小为

```
compressIt(uncompressedString).size() 
```

我觉得这更好，因为它不需要我像以前那样创建输出文件。

干杯，尼基尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T21:07:12.563

另一种方式是

```
stream<array_source> input_stream(input_data,input_data_ize);
stream<array_sink> compressed_stream(compressed_data,alloc_compressed_size);  
filtering_istreambuf out;
out.push(gzip_compressor());
out.push(input_stream);
int compressed_size = copy(out,compressed_stream);
cout << "size of compressed_stream" << compressed_size << endl; 
```

# c - 16位机器上的32位整数可能吗？

> ID：13004709
> 
> 赞同：-3
> 
> 时间：2012-10-22T03:42:38.347
> 
> 标签：c, compiler-construction, embedded

只是想知道是否可能。如果是，除了编译器仿真层还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T03:45:20.890

它取决于处理器。一些处理器有特殊的指令来操作寄存器对（例如，8 位 AVR 指令集有 16 位寄存器对的指令）。在没有这种本机支持的处理器上，编译器通常会发出一次处理成对寄存器的指令（例如，这通常是为了在 32 位处理器上支持 64 位数字而做的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T03:45:25.490

对的，这是可能的。将 70 年代的[Z80](http://en.wikipedia.org/wiki/Z80)视为可以操作 16 位值的 8 位处理器的示例。

确保您知道“16 位处理器”是什么意思，因为我发现很多人对它有误解。这是否意味着操作码大小，因为某些处理器具有可变宽度操作？这是否意味着寻址大小？这是否意味着它可以本地操作的最小/最大值？

就编译时而言，当然。查看[任意大量库](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)（又名“big nums”）。

# jquery - 减少 JQuery 中的杂乱数字

> ID：13004718
> 
> 赞同：1
> 
> 时间：2012-10-22T03:44:14.667
> 
> 标签：jquery

> **可能重复：**
> [在 javascript 中格式化数字](https://stackoverflow.com/questions/1068284/format-numbers-in-javascript)

我有号码 2.3455555555555555 我想通过使用 jQuery 只得到 2.34。我不知道如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T03:45:10.477

```
(2.3455555555555555).toFixed(2); 
```

# javascript - 如何在jquery中使用on转换悬停功能

> ID：13004722
> 
> 赞同：1
> 
> 时间：2012-10-22T03:44:54.477
> 
> 标签：javascript, jquery

我有这个代码

```
$("td").hover(function(){
                $(this).find('a.btn').show();
                }, function(){
                $(this).find('a.btn').hide();
            }) 
```

如何将此函数转换为新的 dom 元素`on`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T03:46:53.027

```
$("#mytable").on('hover', 'td', function(){
    $(this).find('a.btn').show();
    }, function(){
    $(this).find('a.btn').hide();
}); 
```

但是不推荐使用`'hover'`伪事件代替传递`'mouseenter mouseleave'`，所以你应该直接使用`mouseenter`和`mouseleave`。

```
$("#mytable").on('mouseenter', 'td', function(){
    $(this).find('a.btn').show();
})
.on('mouseleave', 'td', function(){
    $(this).find('a.btn').hide();
}); 
```

或者像这样：

```
$("#mytable").on({'mouseenter': function(){
    $(this).find('a.btn').show();
}, 'mouseleave': function(){
    $(this).find('a.btn').hide();
}}, 'td'); 
```

或者像这样更短：

```
$("#mytable").on('mouseenter mouseleave', 'td', function(e){
    $(this).find('a.btn').toggle(e.type === 'mouseenter');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T03:48:17.053

我会这样做：

```
$('td').on({
  mouseenter: function() { $(this).find('a.btn').show() }
  mouseleave: function() { $(this).find('a.btn').hide() }
}) 
```

**编辑：**如果您在这种情况下需要委托，您的问题不清楚，请查看其他答案。

# command-line - 我们如何在系统中找到除了可移动磁盘之外的固定硬盘（如果有的话）

> ID：13004727
> 
> 赞同：0
> 
> 时间：2012-10-22T03:45:23.900
> 
> 标签：command-line, command-prompt

我们如何在系统中找到除了可移动磁盘以外的固定硬盘（如果有的话）。我使用了 Msinfo32 和 diskpart，发现两者都有问题。Diskpart 将可移动磁盘检测为固定磁盘，而 Msinfo32 在 windows xp 上执行时间过长。下面是我在 MSinfo32 和 diskpart 中使用的两个命令。 **diskpart 列表磁盘“%CommonProgramFiles%\Microsoft Shared\MSInfo\MSINFO32.EXE”/report disks_output.txt /categories +component**

这方面的任何帮助都会对我们非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:54:30.650

通过使用 WMI 的 Powershell：

```
Get-WmiObject -Query "Select * From Win32_LogicalDisk" | ? { $_.driveType -eq 3 } 
```

如果您只需要固定磁盘的数量：

```
 @(Get-WmiObject -Query "Select * From Win32_LogicalDisk" | ? { $_.driveType -eq 3 }).count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:11:54.800

DriveType 属性（数字）对应于逻辑磁盘所代表的磁盘驱动器类型。值 3 表示本地磁盘。使用 Filter 参数仅获取本地磁盘。添加 ComputerName 参数以从远程计算机获取结果

```
Get-WmiObject -Class Win32_LogicalDisk -Filter "DriveType=3" 
```

添加 ComputerName 参数以从远程计算机获取结果

```
Get-WmiObject -Class Win32_LogicalDisk -Filter "DriveType=3" -ComputerName pc1,pc2 
```

# image - 从 ipad 的照片库中多选图像的图像动画

> ID：13004729
> 
> 赞同：1
> 
> 时间：2012-10-22T03:45:27.863
> 
> 标签：image, animation, slider, uiimagepickercontroller, photolibrary

此应用程序有两个组件。

1) 从照片库中多选图片：

参考 - [http://www.youtube.com/watch?v=HyU7zNzwcrI&feature=BFa&list=HL1350876847，http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-](http://www.youtube.com/watch?v=HyU7zNzwcrI&feature=BFa&list=HL1350876847) _ [_](http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-)框架/

2）图像动画：

```
reference -
http://www.garrahan.org/src/SonicSpeed.zip 
```

* * *

我想将这两个组件合并到一个应用程序中，即在使用此应用程序时，我可以从 ipad 的照片库中选择多张图像，然后以用户定义的速度生成图像动画。

我怀疑用户选择的照片库图像来自第一个组件的“NSDictionary * dict”（（1）从照片库中多选图像。）

有人可以帮忙吗？非常感谢！

# ruby-on-rails - CanCan 2.0 + 回形针 expiring_url

> ID：13004731
> 
> 赞同：0
> 
> 时间：2012-10-22T03:45:43.867
> 
> 标签：ruby-on-rails, paperclip, cancan

我使用 Paperclip 设置了一些文件`expiring_url`。那些工作正常。

我尝试使用 CanCan 2.0`expiring_url`仅允许使用以下代码签名的成员

```
# /app/models/ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new  # guest user
    can :read, :movies
    cannot :read, :movies, :expiring_url

    if user.persisted?
      can :read, :movies, :expiring_url
    end

  end
end 
```

我`MoviesController.rb`的`load_and_authorize_resource`所有用户仍然可以下载电影。

`expiring_url`不是的属性，`Movie`我可以看到这就是为什么不工作的原因。我不确定如何指定与此关联的回形针 expiring_url 对象以使其工作。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:48:06.283

根据[此](https://github.com/ryanb/cancan/wiki/defining-abilities)页面上的声明，Cancan 显然要求条件是实际的数据库列：

> 仅对这些条件使用数据库列很重要

这不是回形针的限制，它是 cancan（我非常喜欢它，不要误会我的意思）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T02:03:48.030

我使用 CanCan 1.6.x，但在2.0[文档中](https://github.com/ryanb/cancan/tree/2.0)**定义能力**下，Ryan 说

> current_user 传入允许您根据用户属性定义权限。

所以如果你有一个 current_user 不会像下面这样为你工作吗？

```
if user
  can :read, :movies, :expiring_url
else
  can :read, :movies
end 
```

* * *

你能提供更多关于“expiring_url”是什么的信息吗？我刚刚意识到上面的内容可能对你也不起作用，因为**expiring_url**听起来不像一个模型。

# c - 如何访问C中的目录文件？

> ID：13004733
> 
> 赞同：0
> 
> 时间：2012-10-22T03:47:02.073
> 
> 标签：c, file-io, directory

我正在尝试将当前目录中的所有文件添加到我实现的存档中。我可以使用哪些功能来访问所有这些文件？在网上和手册页做了一些研究之后，我发现的只是简单的 I/O，比如读、写、关闭等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:10:48.713

你可以试试这个。

```
main() {
   DIR *d;
   struct dirent *e;

   e=malloc(sizeof(struct dirent));
   d=opendir("<your_directory_name>");

   while ((e = readdir(d)) != NULL) {
      printf("%d %s\n", e->d_type, e->d_name);
   }

   closedir(d);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:59:12.337

这个网页似乎有你想要的。

[http://www.gnu.org/software/libc/manual/html_mono/libc.html#Opening-a-Directory](http://www.gnu.org/software/libc/manual/html_mono/libc.html#Opening-a-Directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T03:49:50.047

在 Unix 中，[readdir](http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir.html)；在 Windows 中，请参阅[此处](https://stackoverflow.com/questions/2314542/listing-directory-contents-using-c-and-windows)了解 FindFirstFile()。然后在一个循环中逐个文件地执行您想要的操作。

# javascript - 如何使用 JavaScript 禁用 li 标签

> ID：13004734
> 
> 赞同：9
> 
> 时间：2012-10-22T03:47:07.800
> 
> 标签：javascript, html

我在我的页面上使用以下 HTML：

```
<ul id="tabnav">

        <li id="tab_a" class="tab1"><a href="tab1.htm">Tab a</a></li>
        <li id="tab_b" class="tab2"><a href="tab2.htm">Tab b</a></li>
        <li id="tab_c" class="tab3"><a href="tab3.htm">Tab c</a></li>
    </ul> 
```

我想要做的是让您无法使用javascript单击第三个选项卡，然后我希望稍后能够单击第三个选项卡。

所以我尝试在 JavaScript 函数中使用以下 JavaScript：

```
document.getElementById("tab_c").style.enabled = false; 
```

但是它似乎没有用。

我希望它会禁用它，所以你不能点击它。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-09-10T22:56:42.463

```
//css
.disabled{
    pointer-events:none;
    opacity:0.4;
}
// jqvery
$("li a").addClass('disabled');
// remove .disabled when you are done 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T03:51:56.037

您可以将 onclick 处理程序添加到返回 false 的链接。

```
document.getElementById("tab_c").childNodes[0].onclick = function() {return false;};​ 
```

*只是选择第`childNodes[0]`一个孩子，在这种情况下是`<a>`*

例如[http://jsfiddle.net/zYSeF/](http://jsfiddle.net/zYSeF/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T03:59:30.993

使用 jQuery 库，你可以做这样的事情。

```
$('a').on('click', function() {
    return !$(this).attr('disabled');
}); 
```

要切换被禁用，您可以简单地执行此操作。

```
$('#tab_c a').attr('disabled', true); //add
$('#tab_c a').removeAttr('disabled'); //remove 
```

**[jQuery](http://www.jquery.com)**

# c# - 下划线单元格内容，包括 iTextSharp 中的前导空格

> ID：13004742
> 
> 赞同：0
> 
> 时间：2012-10-22T03:48:10.267
> 
> 标签：c#, asp.net, itextsharp

目前我正在使用 ASP.Net 中的 iTextSharp 生成 PDF。

可变长度字段之一需要下划线。实际上，在输出文件中，特定字段用线条显示（如在规则笔记本中）。

例如，该字段已分配 10 行，以便用户可以根据自己的要求填写或留空。但是，现在自动化之后，数据将由用户提供，稍后将生成为 PDF 文件，并且这个特定字段的长度是可变的。

有没有办法我可以在字段的前导空格下划线，比如 1500 个字符宽度中只有 500 个被填充，其余 1000 个字符可以加下划线。有什么办法可以用 iTextSharp 实现它。

我尝试通过将下划线附加到实际数据（同时从数据库中检索它）并通过将下划线属性分配给块类来为文本数据添加下划线，但没有帮助。

感谢您的任何指示/建议/建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:12:41.183

下载[http://www.manning.com/lowagie2/samplechapter2.pdf](http://www.manning.com/lowagie2/samplechapter2.pdf)并查看第 2.2.6 节中的数字。这或多或少是你要找的吗？在这种情况下，您需要使用`LineSeparator`该部分中描述的 a 。

# jquery - 带有链接的元素组上的循环类

> ID：13004746
> 
> 赞同：0
> 
> 时间：2012-10-22T03:48:48.563
> 
> 标签：jquery

如何在单击链接时在一组元素上循环一个类。这是 HTML 的样子：

```
<section class="container">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
</section>
<a href="#">Iterate Class on Items</a> 
```

JS：

```
$('a').click(function() {
     $('.container .item').each(function() {
          //cycle .active class on click
     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:56:39.237

```
 $('a').click(function() {
     // Activate next
     $('.container .item.active').removeClass('active').next().addClass('active'); 
     // If none are active, activate first
     if ($('.container .item.active').length == 0) 
         $('.container .item').slice(0,1).addClass('active'); 
    }); 
```

小提琴：http: [//jsfiddle.net/TMene/](http://jsfiddle.net/TMEne/)

# c# - 从

> ID：13004753
> 
> 赞同：1
> 
> 时间：2012-10-22T03:49:54.493
> 
> 标签：c#, sockets, gzip, compression

我做了一个简单的代理服务器。工作正常，但不是 gzip 解压缩：

1.  幻数不正确。确定 。
2.  没有错误，但 gzipstream 不会解压缩。

它的工作原理如下：

```
private void HandleTraffic()
{
    while ((bytesRead = realServer.Receive(buffer, 0, BODYBUFFERSIZE, SocketFlags.None)) > 0)
    {
        decompressedBuffer = new byte[BODYBUFFERSIZE];
        if (t == "gzip")
        {

            MemoryStream outputStream = new MemoryStream(), inputStream = new MemoryStream();
            inputStream.Write(buffer, 0, bytesRead);
            inputStream.Position = 0;
            inputStream.Flush();
            using (GZipStream gz = new GZipStream(inputStream, CompressionMode.Decompress))
            {
                gz.CopyTo(outputStream);
            }

            decompressedBuffer = outputStream.ToArray();

            MessageBox.Show(ASCIIEncoding.ASCII.GetString(decompressedBuffer));
        }
    }
} 
```

InputStream 已填充，但 outputStream 未解压缩或给我错误“幻数不正确”。

在这项工作中，需要使用套接字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:07:52.637

您不需要以任何方式处理代理服务器中的数据，无论是解压缩、放气等等。只需复制字节。您甚至需要查看的唯一数据是来自客户端的第一行，即 HTTP CONNECT 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:32:17.047

我自己的解决方案是关闭 Fiddler。

# java - Java坦克游戏，创建火法

> ID：13004757
> 
> 赞同：0
> 
> 时间：2012-10-22T03:50:57.653
> 
> 标签：java, class, methods

我正在编写一个程序，让两个坦克相互对抗。除了会结束游戏的火之外，我已经编写了所有方法。至今

```
public class Tank {
    Tank() {
        int xPos, yPos;
        char direction;
        boolean loaded = 0;
    }

    public void move(Tank currentPlayer) {
        if (yPos<=4 && yPos>=0) {
            if (xPos<=4 && xPos>=0) {
                if (currentPlayer.direction == 'u') {
                    currentPlayer.yPos--;
                }
                if (currentPlayer.direction == 'd') {
                    currentPlayer.yPos++;
                }
                if (currentPlayer.direction == 'l') {
                    currentPlayer.xPos--;
                }
                if (currentPlayer.direction == 'r') {
                    currentPlayer.xPos++;
                }
            }
        }
    }

    public void turn(boolean bool, Tank currentPlayer) {
        if (currentPlayer.direction == 'u') {
            currentPlayer.direction ='r';
        }
        if (currentPlayer.direction == 'd') {
            currentPlayer.direction = 'l';
        }
        if (currentPlayer.direction == 'l') {
            currentPlayer.direction ='u';
        }
        if (currentPlayer.direction == 'r') {
            currentPlayer.direction ='d';
        }
    }

    public void load(Tank currentPlayer) {
        currentPlayer.loaded=true;
    }

    public int fire(Tank currentPlayer, Tank jim) {
        // ???
    }    
} 
```

我该如何完成我的程序？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:02:38.683

您需要一个用于 x 位置、y 位置和水箱当前方向的吸气剂。例如：

```
public int getX();
public int getY();
public char getOrientation(); 
```

通过调用这些方法，你应该得到坦克的 x 位置、y 位置和方向。然后检查命中。你知道你面对的是什么方向。因此，如果您面朝上，请查看其他坦克是否与您在同一个 x 上，并且他们的 y 是否在您的上方。

```
int otherX = jim.getX();
int otherY = jim.getY();

switch (currentPlayer.getOrientation())
{
    case 'u':
        //Check if you're in same x
        //Check if above player
        break;
    case ... etc.
} 
```

然后在命中的情况下，换句话说，如果条件满足。游戏应该以 currentPlayer 胜利结束。

# linux - linux命令行的顺序FIFO队列

> ID：13004762
> 
> 赞同：1
> 
> 时间：2012-10-22T03:52:02.903
> 
> 标签：linux, queue, sequential

我正在尝试寻找或实现一个简单的解决方案，该解决方案可以按顺序排列 Linux shell 命令，以便一次执行一个。以下是标准：

1.  队列必须一次执行一个命令，即不能同时运行两个命令。
2.  我没有提前的命令列表。它们将来自我的网络服务器收到的网络请求。这意味着队列可能长时间为空，并且可以同时进入 10 个请求。
3.  我的 web 服务器只能对 shell 进行系统调用，所以这个程序/解决方案需要可以从命令行调用。
4.  我只有一台机器，所以它不能也不需要将工作外包给多台机器。

本来我以为`at`命令可以做我想做的事，但唯一的问题是它没有按顺序执行命令。

我正在考虑用这些部分在 python 中实现我自己的解决方案：

1.  有一个带有锁定文件的专用目录
2.  排队的命令存储为单个文件，文件名包含递增的序列 ID 或时间戳或类似的东西，我将其称为“命令文件”
3.  使用锁定文件上的模块编写 python 脚本`fcntl`，以确保仅运行 1 个脚本实例
4.  该脚本将监视目录中的任何文件并按照文件名的顺序执行文件中的 shell 命令
5.  当目录没有更多“命令文件”时，脚本将解锁锁定文件并退出
6.  当我的网络服务器想要排队作业时，它会添加一个新的“命令文件”并调用我的 python 脚本
7.  python 脚本将检查其自身的另一个实例是否正在运行。如果是，则退出，这将让另一个实例处理新排队的“命令文件”。如果否，则锁定锁定文件并开始按顺序执行“命令文件”

这听起来会奏效吗？我不知道如何处理的唯一竞争条件是脚本的第一个实例检查目录并看到它是空的，并且在它解锁锁定文件之前，一个新命令排队并调用了脚本的新实例. 当新脚本看到文件被锁定时，它将退出。然后原始脚本将解锁文件并退出。

有没有什么东西已经这样做了，所以我不必自己实现这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T04:28:23.007

使用命名管道，又名 FIFO：

```
mkfifo /tmp/shellpipe 
```

启动一个 shell 进程，其输入来自管道：

```
/bin/sh < /tmp/shellpipe 
```

当 Web 服务器想要执行命令时，它会将其写入管道。

```
sprintf(cmdbuf, "echo '%s' > /tmp/shellpipe", command);
system(cmdbuf); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:14:43.280

一个[posix 消息队列](http://www.kernel.org/doc/man-pages/online/pages/man7/mq_overview.7.html)似乎是为此量身定做的，而且比处理带时间戳的文件等更简单（也更快）。脚本可以在请求进入时将请求排入队列；另一个脚本将请求出列并执行它们。有一些适用于队列的大小限制，但听起来你不会接近他们。

# android - 如何在 Android 中构建一个透明的 ImageButton？

> ID：13004765
> 
> 赞同：1
> 
> 时间：2012-10-22T03:52:19.703
> 
> 标签：android

我想构建一个透明的 ImageButton，我将这些按钮放在 SurfaceView 中。但是当我将代码放入 XML 中时，Eclipse 会返回一个错误。我不知道如何解决，任何帮助将不胜感激。

```
<ImageButton android:id="@+id/previous"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/media_skip_backward"
android:background="@drawable/transparent">
</ImageButton> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:13:40.143

你可以用这个

```
 <ImageButton
    android:id="@+id/previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:src="@drawable/media_skip_backward" >
</ImageButton> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:38:57.993

你可以试试这个：

```
 android:background="@android:color/transparent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:50:32.690

您只需在 xml 文件中尝试这种类型的代码

```
 <ImageButton
android:id="@+id/previous"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@android:color/transparent"
android:src="@drawable/media_skip_backward" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T04:12:40.263

尝试使用

```
android:background="@null" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T04:13:11.947

我的建议是在 res/values 创建 colors.xml 文件并在其中添加透明颜色代码。就像是

```
<resources>
    <color name="transparent">#00000000</color>
    <color name="Black">#000000</color>
    <color name="Trans_Black">#80000000</color>
    <color name="Trans_Black_Darker">#BB000000</color>    
</resources> 
```

现在改变你的路径`android:background="@color/transparent"`

# php - 我可以使用 2 组 concat 组合吗？还是我应该使用子查询

> ID：13004769
> 
> 赞同：1
> 
> 时间：2012-10-22T03:53:10.300
> 
> 标签：php, mysql, sql, group-concat

我有一个个人项目，我正在制作我的家庭唱片。我试图弄清楚如何进行查询。我有**5**张桌子：

## 专辑

```
albumid   name 
------------------
1         name1
2         name2    
3         name3    
4         name4    
5         name5    
6         name6     
7         name7 
```

## 光盘格式

```
formatid    format
-----------------------
1           CD
2           DVD
3           CASSETTE 
```

## 标签

```
labelid    label
------------------------
1           SONY
2           EMI
3           COLUMBIA
4           PHANTOM
5           UNIVERSAL 
```

## 专辑光盘

（一张专辑包含多张光盘，一张光盘只属于一个专辑。一张光盘只有一种格式）

```
discid  albumid    formatid
---------------------------
1        1         1
2        1         2
3        7         3
4        5         1 
```

## 专辑标签

（一个专辑有多个唱片标签，一个唱片标签可能在很多专辑中）

```
albumid   labelid
-----------------
1         1
1         4
5         5
4         1 
```

假设选择专辑 1，我想看看结果有：

```
albumid  name     format     label
-------------------------------------------
1        name1    CD, DVD    SONY, PHANTOM 
```

我试过使用组连接，但它只适用于“格式”。一旦我为标签添加了另一个组 concat，它就不起作用了。我读过也许解决方案是使用子查询，但我已经尝试了每一种组合，而且因为我是新手，所以我没有取得很大的成功。我可以使用 2 种组合`group_concat`吗？如果没有，我该怎么办？

谢谢，
马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:03:11.747

您需要连接所有表。使用`GROUP_CONCAT`( *with`DISTINCT`仅选择唯一值*)，并按专辑 ID 分组

```
SELECT  a.albumID, a.Name,
        GROUP_CONCAT(DISTINCT c.format) formats,
        GROUP_CONCAT(DISTINCT e.`label`) labels
FROM    album a
        INNER JOIN album_disc b
            ON a.albumID =  b.albumid
        INNER JOIN discformat c
            ON b.formatid = c.formatID
        INNER JOIN album_label d
            ON a.albumid = d.albumID
        INNER JOIN label e
            ON e.labelid = d.labelid
WHERE a.albumID = 1         // remove this line if you want to select all records
GROUP BY a.albumID, a.Name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/471c1/6)

# jquery - jQuery keyup 事件

> ID：13004770
> 
> 赞同：0
> 
> 时间：2012-10-22T03:53:12.000
> 
> 标签：jquery, keyup

我正在使用 1.7.1 jquery 版本并尝试在表单字段上绑定 keyup 事件，因此它可能会进行现代样式验证。但是在 chrome 和 firefox 中可以正常工作，但不能在 Internet Explorer 中正常工作。关于这个问题的任何建议或修复？

我的代码：

```
$("#profile_email").keyup(function(){
   //Tried for alert like this alert("asdasd"); and no response

   //My ajax job starts here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:08:19.237

发现问题，console.log 无法在 IE 中处理，这会抛出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:55:38.193

您应该显示您的代码以识别问题。如果您使用的是这样的代码，那么可能是以下问题！

```
$('document').keypress(function(e){
 switch (e.which) {
    case 40:
        alert('down');
        break;
    case 38:
        alert('up');
        break;
    case 37:
        alert('left');
        break;
    case 39:
        alert('right');
        break;
    default:
        alert('???');  
        }      
}); 
```

e.which 在 IE 中不起作用尝试 e.keyCode，如果您以 IE 为目标，您可能还想使用 keydown() 而不是 keypress()。

有关详细信息，请参阅[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)。

# optimization - OpenCL 内存优化 - 最近邻

> ID：13004774
> 
> 赞同：0
> 
> 时间：2012-10-22T03:54:04.607
> 
> 标签：optimization, opencl, shared-memory, gpgpu, nearest-neighbor

我正在 OpenCL 中编写一个程序，它接收两个点数组，并计算每个点的最近邻。

我有两个程序。其中之一将计算 4 个维度的距离，一个用于 6 个维度。它们如下：

4 个维度：

```
kernel void BruteForce(
    global  read_only float4* m,
    global  float4* y,
    global write_only ushort* i,
    read_only uint mx)
{
    int index = get_global_id(0);
    float4 curY = y[index];

    float minDist = MAXFLOAT;
    ushort minIdx = -1;
    int x = 0;
    int mmx = mx;
    for(x = 0; x < mmx; x++)
    {
        float dist = fast_distance(curY, m[x]);
        if (dist < minDist)
        {
            minDist = dist;
            minIdx = x;
        }
    }
    i[index] = minIdx;
    y[index] = minDist;
} 
```

6 个维度：

```
kernel void BruteForce(
    global  read_only float8* m,
    global  float8* y,
    global write_only ushort* i,
    read_only uint mx)
{
    int index = get_global_id(0);
    float8 curY = y[index];

    float minDist = MAXFLOAT;
    ushort minIdx = -1;
    int x = 0;
    int mmx = mx;
    for(x = 0; x < mmx; x++)
    {
        float8 mx = m[x];
        float d0 = mx.s0 - curY.s0;
        float d1 = mx.s1 - curY.s1;
        float d2 = mx.s2 - curY.s2;
        float d3 = mx.s3 - curY.s3;
        float d4 = mx.s4 - curY.s4;
        float d5 = mx.s5 - curY.s5;

        float dist = sqrt(d0 * d0 + d1 * d1 + d2 * d2 + d3 * d3 + d4 * d4 + d5 * d5);
        if (dist < minDist)
        {
            minDist = dist;
            minIdx = index;
        }
    }
    i[index] = minIdx;
    y[index] = minDist;
} 
```

我正在寻找针对 GPGPU 优化该程序的方法。我已经阅读了一些关于使用本地内存优化 GPGPU 的文章（包括[http://www.macresearch.org/opencl_episode6](http://www.macresearch.org/opencl_episode6)，它带有源代码）。我试过应用它并想出了这个代码：

```
kernel void BruteForce(
    global  read_only float4* m,
    global  float4* y,
    global write_only ushort* i,
    __local float4 * shared)
{
    int index = get_global_id(0);
    int lsize = get_local_size(0);
    int lid = get_local_id(0);

    float4 curY = y[index];

    float minDist = MAXFLOAT;
    ushort minIdx = 64000;
    int x = 0;
    for(x = 0; x < {0}; x += lsize)
    {
        if((x+lsize) > {0}) 
            lsize = {0} - x;
        if ( (x + lid) < {0})
        {
            shared[lid] = m[x + lid];
        }
        barrier(CLK_LOCAL_MEM_FENCE);

        for (int x1 = 0; x1 < lsize; x1++)
        {
            float dist = distance(curY, shared[x1]);

            if (dist < minDist)
            {
                minDist = dist;
                minIdx = x + x1;
            }
        }
        barrier(CLK_LOCAL_MEM_FENCE);
    }
    i[index] = minIdx;
    y[index] = minDist;
} 
```

我的“i”输出得到了垃圾结果（例如许多相同的值）。谁能指出我正确的方向？我将不胜感激任何有助于我改进此代码的答案，或者可能找到上面优化版本的问题。

非常感谢 Cauê

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:54:55.390

在这里获得很大速度的一种方法是使用本地数据结构并一次计算整个数据块。您还应该只需要一个读/写全局向量 (float4)。相同的想法可以应用于使用更小的块的 6d 版本。每个工作组都能够通过它正在处理的数据块自由地工作。我将把确切的实现留给你，因为你会知道你的应用程序的细节。

一些伪代码（4d）：

```
computeBlockSize is the size of the blocks to read from global and crunch.
this value should be a multiple of your work group size. I like 64 as a WG
size; it tends to perform well on most platforms. will be 
allocating 2 * float4 * computeBlockSize + uint * computeBlockSize of shared memory.
(max value for ocl 1.0 ~448, ocl 1.1 ~896)
#define computeBlockSize = 256 

__local float4[computeBlockSize] blockA;
__local float4[computeBlockSize] blockB;
__local uint[computeBlockSize] blockAnearestIndex;

now blockA gets computed against all blockB combinations. this is the job of a single work group.
*important*: only blockA ever gets written to. blockB is stored in local memory, but never changed or copied back to global

steps:
load blockA into local memory with async_work_group_copy
blockA is located at get_group_id(0) * computeBlockSize in the global vector
optional: set all blockA 'w' values to MAXFLOAT
optional: load blockAnearestIndex into local memory with async_work_group_copy if needed

need to compute blockA against itself first, then go into the blockB's
be careful to only write to blockA[j], NOT blockA[k]. j is exclusive to this work item
for(j=get_local_id(0); j<computeBlockSize;j++)
  for(k=0;k<computeBlockSize; k++)
    if(j==k) continue; //no self-comparison
    calculate distance of blockA[j] vs blockA[k]
    store min distance in blockA[j].w
    store global index (= i*computeBlockSize +k) of nearest in blockAnearestIndex[j]
barrier(local_mem_fence)

for (i=0;i<get_num_groups(0);i++)
  if (i==get_group_id(0)) continue;
  load blockB into local memory: async_work_group_copy(...)
  for(j=get_local_id(0); j<computeBlockSize;j++)
    for(k=0;k<computeBlockSize; k++)
      calculate distance of blockA[j] vs blockB[k]
      store min distance in blockA[j].w
      store global index (= i*computeBlockSize +k) of nearest in blockAnearestIndex[j]
  barrier(local_mem_fence)

write blockA and blockAnearestIndex to global memory using two async_work_group_copy 
```

在另一个工作组写入相同的块（作为它自己的块A）时读取块B应该没有问题，因为可能只有W值发生了变化。如果碰巧遇到问题 - 或者如果您确实需要两个不同的点向量，您可以像上面那样使用两个全局向量，一个带有 A（可写），另一个带有 B（只读）。

当您的全局数据大小是 computeBlockSize 的倍数时，此算法效果最佳。为了处理边缘，我想到了两种解决方案。我建议以与上述类似的方式为非方形边缘块编写第二个内核。新内核可以在第一次之后执行，您可以保存第二次 pci-e 传输。或者，您可以使用距离 -1 来表示在比较两个元素时跳过（即如果 blockA[j].w == -1 或 blockB[k].w == -1，则继续）。不过，第二种解决方案会导致内核中出现更多分支，这就是我建议编写新内核的原因。一小部分数据点实际上会落在边缘块中。

# ios - 简单的 iOS 粒子发射器

> ID：13004775
> 
> 赞同：-1
> 
> 时间：2012-10-22T03:54:34.993
> 
> 标签：ios, animation, sdk, core-animation, particles

有没有一种简单的方法来使用核心动画制作一堆 2d 粒子图像，比如 Draw Something 中的星形粒子动画？

[Draw Something 中的粒子动画](http://i.stack.imgur.com/MXd2o.png)

我找到了这个链接，它让我走上了 90% 的路。它展示了如何使用 UIImage 发射粒子，这正是我所需要的。我只需要一些帮助来调整粒子，使它们像 Draw Something 按钮一样喷出，而不像他们的火示例，我想随机化粒子的颜色并使它们发光。

[http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial](http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:07:52.517

好的，刚刚发现这让我得到了我想要的其余控件。我在发射器上寻找的变量是 yAcceleration。将其设置为正数以使其下降。

[http://developer.apple.com/library/mac/#samplecode/Fireworks/Listings/AppController_m.html](http://developer.apple.com/library/mac/#samplecode/Fireworks/Listings/AppController_m.html)

希望这对其他人有帮助！

# qt4 - 从 QTableWidget 中删除多个项目的正确方法是什么？

> ID：13004776
> 
> 赞同：0
> 
> 时间：2012-10-22T03:54:35.957
> 
> 标签：qt4

QTableWidget 是无模型的，我遇到了[与这个问题类似的情况，](https://stackoverflow.com/questions/12969509/whats-the-right-way-to-remove-multiple-indices-for-a-qstandarditemmodel)没有同时擦除多行的函数，只有一个：

`void QTableWidget::removeRow ( int row )`

而且我认为没有持久索引，现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:05:23.270

您应该得到一个选定项目的列表，然后遍历它们中的每一个并删除指向每个项目的指针。例如：

```
foreach(QTableWidgetItem * item, tableWidget.selectedItems())
{
    delete item;
} 
```

直接删除指针是安全的，因为我使用这种方法从 QTreeWidgets 和 QListWidgets 中删除了类似的项目。

希望这可以帮助。

# recurrence - 概括复发

> ID：13004778
> 
> 赞同：1
> 
> 时间：2012-10-22T03:55:00.480
> 
> 标签：recurrence

我不确定如何为以下重复编写代码：

`[a, b] --> [a, a*2/3, a*1/3+b*2/3, b];`

`[a, b, c] --> [a, a*2/3, a*1/3+b*2/3, b, b*2/3+ c/3, b/3+c*2/3, c]`

就是这样，获取一个列表，并像示例中那样扩展它。我不确定如何为此编写代码。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:32:12.030

很简单：将一个列表作为输入，并生成一个列表作为输出。

```
public static <T extends Number> List<Double> expandThirds(List<T> input) {
    List<Double> output = new ArrayList<Double>();

    if(input.size() == 0)
        return output;

    output.add(input.get(0).doubleValue());

    for(int i=0; i<input.size()-1; i++) {
        double a = input.get(i).doubleValue();
        double b = input.get(i+1).doubleValue();
        output.add(a*2/3 + b/3);
        output.add(a*3 + b*2/3);
        output.add(b);
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:12:33.257

我想你可以这样写：

```
double[] inputArray = new double[]{0.56,2.4,3.6};//pass you input array of size>1
List<Double> outList = new ArrayList<Double>();
//assuming minimum length of array = 2
for (int i=0; i<inputArray.length-1;i++){
    permute(inputArray[i], inputArray[i+1], outList);
}
System.out.println(outList); 
```

私有自定义方法在哪里`generateRecurrance`，如下所示：

```
private void generateRecurrance(double a, double b, List<Double> outList) {
    outList.add(a);
    outList.add(a*1/3+b*2/3);
    outList.add(a*2/3+b*1/3);
    outList.add(b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:06:51.540

编写一个函数来处理第一种情况，然后调用它`mySequenceHelper`。我不会在这里写，但它应该处理这种情况：

```
[a, b] --> [a*2/3+b/3, a*1/3+b*2/3, b]; 
```

现在编写一个名为 的函数`mySequence`，并将每对数字传递给`mySequenceHelper`，将每组结果附加到主列表中。这是java中的一个简单的：

```
public List<Float> mySequence(List<Float> inputs) {
    List<Float> toReturn = new LinkedList<Float>();

    // Add the first term manually:
    toReturn.add(inputs.get(0));

    // For each pair of values in inputs, add the appropriate 3 terms
    for (int i = 0; i < inputs.size() - 1; i++) {
        toReturn.addAll(mySequenceHelper(inputs.get(i), inputs.get(i+1)));
    }

    return toReturn;
} 
```

# shopify - 将订单项属性传播到结帐页面

> ID：13004779
> 
> 赞同：0
> 
> 时间：2012-10-22T03:55:02.340
> 
> 标签：shopify

订单项属性 (http://wiki.shopify.com/Line_Item_Properties) 为商家收集订单项的额外信息提供了一种很好的方式。可以编辑购物车模板和电子邮件模板，以便订单项属性显示在 /cart 和订单确认电子邮件中。

我的问题是 - 有没有办法访问这些属性并将它们显示在结帐页面上？结帐页面模板不可编辑。该页面让客户感到困惑，因为他们在产品上选择的属性不再显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:56:42.023

我不认为这是可能的。原因是您几乎可以收集订单项属性和购物车属性中的任何内容。由于商家无法控制结帐的第 1 页和第 2 页，因此他们无法控制那里的任何脚本。因此，由 Shopify 来呈现这些。这意味着一些商店可能在结帐时呈现不佳，因为代码必须是通用的。

多年来，我一直向我的客户、商家解释说，由于这些属性在结账前就已经在购物车中明确了，而且因为它们包含在电子邮件中……这没什么大不了的，但你显然会有不同的感觉。 ..也许有一天结帐会渲染一些商家添加的脚本，用于显示订单项......这会膨胀。

# php - 如何将数据库单元格数据插入 javascript 警报

> ID：13004782
> 
> 赞同：1
> 
> 时间：2012-10-22T03:55:14.663
> 
> 标签：php, javascript, database

我有一个简单的表单，当用户提交表单时，成功验证后，他们会收到警报

```
if (valid) {
    alert("Your Request Has Been Submitted")
} 
return valid;` 
```

我的目标是在 javascript 警报中显示一个自动增量票号，我意识到这只能在数据发布到数据库后发生，并且这可以通过将用户发送到另一个页面来轻松完成，但我希望刷新页面，并弹出一个警报弹出窗口，给他们一个票号，然后他们可以关闭警报框并再次提交。任何帮助表示赞赏。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:57:05.477

我建议你开始阅读[AJAX](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:03:37.997

您可以执行以下操作：

```
<script>
    var valid = <?php echo $query_result; ?>;
    if (valid) { alert("Your Request Has Been Submitted") }return valid;
</script> 
```

确保您的 PHP 代码回显了`valid`变量值的有效 javascript

# java - 使用 qt 通过套接字发送图像并使用 java 读取

> ID：13004785
> 
> 赞同：4
> 
> 时间：2012-10-22T03:55:41.600
> 
> 标签：java, qt, sockets, image-processing

我正在尝试通过套接字在 Qt 服务器中发送图像上传，并在使用 Java 创建的客户端中将其可视化。到目前为止，我只传输字符串进行双方通信，并尝试了不同的示例来发送图像但没有结果。

我用来在qt中传输图像的代码是：

```
QImage image;
image.load("../punton.png");
qDebug()<<"Image loaded";
QByteArray ban; // Construct a QByteArray object
QBuffer buffer(&ban);   // Construct a QBuffer object using the QbyteArray
image.save(&buffer, "PNG"); // Save the QImage data into the QBuffer
socket->write(ban); 
```

在另一端，用 Java 读取的代码是：

```
BufferedInputStream in = new BufferedInputStream(socket.getInputStream(),1);
File f = new File("C:\\Users\\CLOUDMOTO\\Desktop\\JAVA\\image.png");
System.out.println("Receiving...");
FileOutputStream fout = new FileOutputStream(f);
byte[] by = new byte[1];
for(int len; (len = in.read(by)) > 0;){
fout.write(by, 0, len);
System.out.println("Done!");
} 
```

Java 中的进程一直卡住，直到我关闭 Qt 服务器，然后生成的文件已损坏。

我会很感激任何帮助，因为这样做对我来说是必要的，而且我是使用两种语言编程的新手。

此外，我使用了以下命令，接收过程现在结束并显示一条消息，但文件已损坏。

```
socket->write(ban+"-1"); 
socket->close(); in qt. 
```

在java中：

```
System.out.println(by); 
String received = new String(by, 0, by.length, "ISO8859_1");
System.out.println(received);
System.out.println("Done!"); 
```

![在此处输入图像描述](../Images/bb7c6c0e44af6d5615a92cb78a640cdf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:47:11.580

您不能以这种简单的方式通过套接字传输文件。您没有给接收者任何线索，即将到来的字节数。仔细阅读[InputStream.read()的 javadoc。](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html#read%28%29)您的接收器处于无限循环中，因为它正在等待下一个字节，直到流关闭。`socket->close()`因此，您通过在发送方调用已部分解决了该问题。理想情况下，您需要`ban`在缓冲区之前将长度写入套接字，在接收方读取该长度，然后仅接收该字节数。在尝试读取接收到的文件之前，还有接收器`flush`流。`close`

我完全不知道你想用`socket->write(ban+"-1")`. 您记录的输出以`%PNG`正确的开头。我可以`"-1"`在最后看到，这意味着您将字符添加到图像二进制文件中，因此您损坏了它。为什么这样？

不，1x1 PNG 的大小不是 1 字节。它甚至没有 4 个字节（红色、绿色、蓝色、alpha）。PNG需要一些东西，比如标题和控制校验和。查看文件系统上文件的大小。这是您需要的`by`尺寸。

# python - 如何连接包含“$”或“@”等字符的密码？

> ID：13004789
> 
> 赞同：2
> 
> 时间：2012-10-22T03:56:08.573
> 
> 标签：python, mysql, passwords

如果我的密码特别包含标点符号`$`或`@`. 我试图通过加倍`$$`等来逃避角色，但没有快乐。

我试过`pymysql`图书馆和`_mssql`图书馆。

代码... self.dbConn = _mysql.connect(host=self.dbDetails['site'], port=self.dbDetails['port'], user=self.dbDetails['user'], passwd=self. dbDetails['passwd'], db=self.dbDetails['db'])

其中 self.dbDetails['passwd'] = "$abcdef"。

我已经尝试过'$$abcdef'、re.escape(self.dbDetails['passwd']) 和'\$abcdef'，但在我更改用户密码以删除“$”之前没有任何效果。然后连接就好了。我得到的唯一错误是连接失败。我想我将不得不弄清楚如何打印实际的异常消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:22:46.230

试试 MySQLdb 包，你可以在密码中标点符号通过这个包连接数据库。

# android - android从onSensorChanged事件写入文件

> ID：13004790
> 
> 赞同：0
> 
> 时间：2012-10-22T03:56:17.350
> 
> 标签：android

我承认我对这个有点难过。我刚刚开始使用 Android 编程并且到目前为止我很喜欢这种体验，但是我遇到了一个神秘的问题，我写入文件但它们仍然无限期地为空（不，我很确定我不会意外地覆盖它们） .

场景是我想在按下按钮时将几秒钟的传感器数据记录到 SD 卡上的日志文件中。我也在屏幕上显示相同的内容。然而，尽管屏幕上显示的内容是正确的，但日志文件被创建但为空。

我只能假设这与我从 onSensorChanged(Event) 方法调用 write 的事实有关，因为相同的代码在其他地方使用时执行得很好。

```
public MyClass(....){
    ....
    sensorManager.registerListener(this, accelerometer, sensorManager.SENSOR_DELAY_NORMAL);
    Thread.sleep(time * 1000);
    sensorManager.unregisterListener(this);
    try {
        logWriter.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void onSensorChanged(SensorEvent event){
    String msg = msgFor(event);
    try {
        logWriter.write("SOME_TEXT" + msg + "\n"); // FileWriter logWriter is a field, but the file is empty in the end
    } catch (IOException e){
        e.printStackTrace();
    }
    resultBox.append("\n" + msg); // TextView resultBox is a field, and writes to screen correctly
    Log.d("SENSOR-CHANGE", msg);
}

private String msgFor(SensorEvent event){
    return event.timestamp+", "+event.sensor.getName()+", "+Arrays.toString(event.values);
} 
```

任何建议将不胜感激！我知道那里有一些类似的线程，但我没有找到我需要的确切内容。

# java - 如何动态构建 JAR 文件

> ID：13004791
> 
> 赞同：2
> 
> 时间：2012-10-22T03:56:25.133
> 
> 标签：java, persistence

我正在制作一个需要能够让客户更改设置的程序，并使用我所谓的“生成器”创建一个.jar，用它们的设置替换类中的一些常量。

换句话说，我有一个带有几个文本字段的 GUI，因此当他们按下标有 Build 的 JButton 时，它会在常量类中创建一个新的可运行 Jar，其设置会随着文本字段中的内容而更改。

这可能吗？我听说过 ANT Scripts，但我不确定这是否是我在这里寻找的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T04:08:21.747

您是否考虑过使用 .properties 文件或类似的文件？您可以对所描述的内容使用 ant 脚本（查看[http://ant.apache.org/manual/Tasks/replaceregexp.html](http://ant.apache.org/manual/Tasks/replaceregexp.html)，您可以在 build.xml 中使用此任务来动态更改 .java 文件，但它看起来有点笨拙）但它可能不是最好的解决方案。

检查此页面：[http](http://www.mkyong.com/java/java-properties-file-examples/) ://www.mkyong.com/java/java-properties-file-examples/其中包含有关保存到属性文件/从属性文件加载的一些详细信息。您可以设置常量类以从该文件加载它的状态变量，并设置 Build JButton 以创建该属性文件。

我正在尝试考虑一个用例，您希望修改类源本身而不是使用属性文件，但老实说我做不到。所以我想你可能有一些特殊的情况，这对你来说不是一个站得住脚的解决方案，但 99% 的时间我会建议你这样做。

# c++ - xCode 初始化静态 std::string

> ID：13004794
> 
> 赞同：0
> 
> 时间：2012-10-22T03:56:46.500
> 
> 标签：c++, ios, xcode, stl, stdstring

请检查这张图片： ![在此处输入图像描述](../Images/27fcf0b64674d26183480cab9af7ae72.png) 为什么在世界上 base64_chars 在调试器窗口中显示为空而它实际上是空的，因为 char_array4 被填充`\xff`而不是正确的索引。有人可以告诉我这里有什么问题吗？谢谢

# iphone - 试图将代码抽象到库中，但我的代码不起作用，我不知道为什么

> ID：13004799
> 
> 赞同：0
> 
> 时间：2012-10-22T03:57:38.263
> 
> 标签：iphone, objective-c, ios

我想创建一个可以反复重用的库，以加快我的开发速度，如果我愿意，可以添加到新项目中。基本上我想建立一个抽象层。有人可以告诉我如何做到这一点以及为什么这部分代码：

```
 if ([self.delegate respondsToSelector:@selector(enableCamera)]) {
        BOOL enabled;
        enabled = [self.delegate enableCamera];
        if (enabled == YES) {
            [self enableCameraMethod];

        } 
```

不叫？

下面是我的代码：

图书馆.h：

```
@protocol usesCamera <NSObject>
@optional
-(BOOL)enableCamera;
@end

@interface Library : NSObject

@property (nonatomic, weak) id <usesCamera> delegate;
-(void)enableCameraMethod;
@end 
```

图书馆.m

```
#import "Library.h"

@implementation Library

- (id) init
{
if (self = [super init]) {        
    if ([self.delegate respondsToSelector:@selector(enableCamera)]) {
        BOOL enabled;
        enabled = [self.delegate enableCamera];
        if (enabled == YES) {
            [self enableCameraMethod];

        }
    }
    return (self);

}
}

-(void)enableCameraMethod {
NSLog(@"Implement my camera method here");
}
@end 
```

UIViewController.h

```
#import <UIKit/UIKit.h>
#import "Library.h"

@interface ViewController : UIViewController <usesCamera>

@end 
```

UIViewController.m

```
#import "ViewController.h"
#import "Library.h"

@interface ViewController ()

@property (nonatomic, strong) UIViewController *myVC;

@end

@implementation ViewController

-(BOOL)enableCamera {
return YES;
}

- (void)viewDidLoad
{
[super viewDidLoad];

Library *myLibrary = [[Library alloc] init];

// Do any additional setup after loading the view, typically from a nib.
 }

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:26:22.370

您是否在 ViewController 类中为 myLibrary 实例设置了委托。你必须做这样的事情：

> ```
> Library *myLibrary = [[Library alloc] init];
> myLibrary.delegate = self; 
> ```

由于在设置委托之前调用了 init，因此它可能不起作用，而不是在 init 函数中定义逻辑，而是创建另一个方法并在设置委托后调用此方法。

# haskell - 为什么在终端中执行 getChar 与在 GHCi 中执行不同？

> ID：13004801
> 
> 赞同：8
> 
> 时间：2012-10-22T03:57:49.550
> 
> 标签：haskell

```
import Data.Char

main = do 
    c <- getChar
    if not $ isUpper c
        then do putChar $ toUpper c
                main
        else putChar '\n' 
```

在 GHCi 中加载和执行：

```
λ> :l foo.hs
Ok, modules loaded: Main.
λ> main
ñÑsSjJ44aAtTR
λ> 
```

这一次消耗一个字符。

但是在终端中：

```
[~ %]> runhaskell foo.hs
utar,hkñm-Rjaer 
UTAR,HKÑM-
[~ %]> 
```

它一次消耗一行。

为什么它的行为不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T04:03:06.693

当您在终端中运行程序时，它`LineBuffering`默认使用它，但`ghci`它设置为`NoBuffering`. 你可以在[这里](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/ghci-faq.html)阅读。您将不得不从中删除缓冲`stdin`并`stdout`获得类似的行为。

```
import Data.Char
import System.IO

main = do
    hSetBuffering stdin NoBuffering
    hSetBuffering stdout NoBuffering
    foo
foo = do
    c <- getChar
    if not $ isUpper c
        then do putChar $ toUpper c
                foo
        else putChar '\n' 
```

# php - php中的file_get_contents或curl？

> ID：13004805
> 
> 赞同：11
> 
> 时间：2012-10-22T03:58:35.053
> 
> 标签：php, curl, file-get-contents

PHP 中应该使用哪个`file_get_contents`或`curl`应该使用哪个来发出 HTTP 请求？

如果`file_get_contents`会做这项工作，有没有必要使用`curl`？使用`curl`似乎需要更多的行。

例如：

**卷曲：**

```
$ch = curl_init('http://www.website.com/myfile.php'); 
curl_setopt($ch, CURLOPT_POST, true); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $content); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$output = curl_exec ($ch); 
curl_close ($ch); 
```

**文件获取内容：**

```
$output = file_get_contents('http://www.website.com/myfile.php'.$content); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-25T11:05:33.580

First of all **cURL** has a lot of options to set. You can really set any option you need to - many supported protocols, file-uploads, cookies, proxies and more.

`file_get_contents()` really just GETs or POSTs the file and has the result.

However: I tried some APIs and did some "benchmarking":

cURL was **a lot faster** than `file_get_contents`
Just try it with your terminal: `time php curl.php`

curl.php:

```
<?php 
$ch = curl_init();
$options = [
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL            => 'http://api.local/all'
];

curl_setopt_array($ch, $options);
$data = json_decode(curl_exec($ch));
curl_close($ch); 
```

fgc.php

```
<?php 
$data = json_decode(file_get_contents('http://api.local/all')); 
```

Averaged cURL was 3-10 times faster than `file_get_contents` in my case. The *api.local* responeded with a cached JSON file - about 600kb.

I don't think it was coincidence - But that you can't measure this accurately, because the network and the response times differ a lot, based on their current load / network speed / response times etc. (local networks won't change the effect - there will be load & traffic too)

But for certain use cases, it could also be that `file_get_contents` is actually quicker.

So I built a simple function: [https://git.io/J6s9e](https://git.io/J6s9e)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-08T08:09:02.823

`Curl`然后更快`File_get_contents`。我只是对此做了一些快速的基准测试。

**使用file_get_contents**获取 google.com耗时（以秒为单位）：

```
2.31319094 
2.30374217
2.21512604
3.30553889
2.30124092 
```

**卷曲**采取：

```
0.68719101
0.64675593
0.64326 
0.81983113
0.63956594 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:27:50.177

供您参考，curl 可以让您拥有更多选项并使用 GET/POST 方法和发送参数。

并且`file_get_contents`将为您提供较少的 GET/POST 参数选项。

希望这可以帮助...

# c# - 如何设置视图引擎应该在 ASP .NET MVC3 中找到视图的位置，或者如何从另一个 MVC 应用程序呈现视图？

> ID：13004808
> 
> 赞同：0
> 
> 时间：2012-10-22T03:59:07.873
> 
> 标签：c#, asp.net-mvc

例如，我有两个类似的简单 MVC 应用程序。

`Application1`: `HomeController`->`Index`返回`AnotherHome`视图**的操作**

`Application2`: `AnotherHomeController`->`AnotherIndex`也返回`AnotherHome`视图的操作

**Application1 索引操作：**

```
public ActionResult Index()
{
    return View("AnotherHome");
} 
```

我需要运行`Application1`和渲染`AnotherHome`。当我运行应用程序时，很明显我收到以下错误：

```
The view 'AnotherHome' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/Home/AnotherHome.aspx
~/Views/Home/AnotherHome.ascx
~/Views/Shared/AnotherHome.aspx
~/Views/Shared/AnotherHome.ascx
~/Views/Home/AnotherHome.cshtml
~/Views/Home/AnotherHome.vbhtml
~/Views/Shared/AnotherHome.cshtml
~/Views/Shared/AnotherHome.vbhtml 
```

如何强制视图引擎搜索视图，例如`Application2/Views/AnotherHome/AnotherIndex.cshtml`???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:49:53.963

简短的回答是您无法呈现位于不同应用程序的应用程序目录中的视图。这是 IIS 中的一个安全问题，它不允许您访问其应用程序路径之外的文件。

更长的答案是您可以将 IIS 中的虚拟目录映射到某处的应用程序目录中。但这需要特定的 IIS 配置来管理它，如果其他人正在维护它，它很容易被破坏。

无论如何，保留视图的单独副本可能会更好。如果您为一个应用程序修改它，然后它破坏另一个应用程序会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:05:10.097

您将不得不覆盖 ASP.NET 默认视图引擎并覆盖视图路径，但是您必须在某处配置第二个应用程序的位置，除非您想对其进行硬编码。请参阅有关如何更改视图引擎搜索路径的问题，[如何更改 ASP.NET MVC 中的默认视图位置方案？](https://stackoverflow.com/questions/909794/how-to-change-default-view-location-scheme-in-asp-net-mvc).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T18:01:19.480

要在应用程序之间共享视图，请将视图编译成 dll（Google for razor generator）并共享 dll

# json - 将 JSON 数据下载到 R 中

> ID：13004813
> 
> 赞同：6
> 
> 时间：2012-10-22T03:59:55.583
> 
> 标签：json, r, web-scraping

我需要：

1.  下载[http://api.crunchbase.com/v/1/companies.js提供的所有公司名称的解析文件](http://api.crunchbase.com/v/1/companies.js)

2.  使用每个公司名称运行查询以下载每个公司信息的解析文件（例如，Federation_year、资助者公司名称），使用语法“ *http://api.crunchbase.com/v/1/company/permalink.js* ”

我想将这些数据解析为电子表格或其他格式，然后我可以将其导入 R 进行分析。

将此数据导入 R 的最佳格式是什么？如何下载数据并将其组织成类似表格的结构？（例如，行 = 公司，列 = 个人资料信息，如 funded_year）（最终目标是在 R 中分析它）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T04:10:08.493

```
library(RJSONIO)
library(RCurl)

# grab the data
raw_data <- getURL("http://api.crunchbase.com/v/1/companies.js")
# Then covert from JSON into a list in R
data <- fromJSON(raw_data)
length(data)
[1] 101782
# We can coerce this to a data.frame
 final_data <- do.call(rbind, data)
 # Then write it to a flat csv file
 write.csv(final_data, "final_data.csv")

> head(final_data)
     name                permalink     category_code
[1,] "Wetpaint"          "wetpaint"    "web"        
[2,] "AdventNet"         "adventnet"   "enterprise" 
[3,] "Zoho"              "zoho"        "software"   
[4,] "Digg"              "digg"        "web"        
[5,] "Facebook"          "facebook"    "web"        
[6,] "Photobucket, Inc." "photobucket" "web" 
```

# postgresql - 尽管角色名称存在，但删除角色未删除

> ID：13004815
> 
> 赞同：3
> 
> 时间：2012-10-22T04:00:22.913
> 
> 标签：postgresql

我有两个用户`Jason`和`postgres`. 因为我刚开始学习这个，我不知道为什么这段代码不起作用。我想做的就是放弃一个用户，但我也做不到。我的代码有什么问题？

```
postgres=# DROP OWNED BY Jason;
ERROR:  role "jason" does not exist
postgres=# \du
                             List of roles
 Role name |                   Attributes                   | Member of 
-----------+------------------------------------------------+-----------
 Jason     | Superuser, Create role, Create DB, Replication | {}
 postgres  | Superuser, Create role, Create DB, Replication | {} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T04:04:13.337

区分大小写。

```
DROP OWNED BY "Jason"; 
```

PostgreSQL*区分*大小写，它只是小写不带引号的标识符。为了保留大小写，“双引号”标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:09:58.143

删除用户时您应该遵循几件事

首先，应该检查并删除`owned`用户所拥有的数据库

```
 DROP OWNED By "Jason" ;    // remove database objects owned by a database role 
```

接下来可以通过以下方式删除用户的角色

```
 DROP ROLE "Jason"; 
```

# php - 简化在 php 中声明变量值

> ID：13004817
> 
> 赞同：-1
> 
> 时间：2012-10-22T04:00:37.710
> 
> 标签：php

```
$jan5 = 0;
$feb5 = 0;
$mar5 = 0;
$apr5 = 0;
$may5 = 0;
$jun5 = 0;
$jul5 = 0;
$aug5 = 0;
$sep5 = 0;
$oct5 = 0;
$nov5 = 0;
$dec5 = 0;
$jan4 = 0;
$feb4 = 0;
$mar4 = 0;
$apr4 = 0;
$may4 = 0;
$jun4 = 0;
$jul4 = 0;
$aug4 = 0;
$sep4 = 0;
$oct4 = 0;
$nov4 = 0;
$dec4 = 0;
$jan3 = 0;
$feb3 = 0;
$mar3 = 0;
$apr3 = 0;
$may3 = 0;
$jun3 = 0;
$jul3 = 0;
$aug3 = 0;
$sep3 = 0;
$oct3 = 0;
$nov3 = 0;
$dec3 = 0; 
```

这是我尝试制作时最耗时的代码，例如我希望默认值`$jan5`等于零。有人可以教我如何缩短这个代码吗？非常感谢您的阅读

```
$date = 'smi_initialdate';
$level = 'smi_level';
$year = '2012';

$result1 = mysql_query("SELECT *, DATE_FORMAT( $date, '%m' ) As monthz FROM eis_mngt_sales_iti WHERE year($date) = '$year' ORDER BY $date");
while($row=mysql_fetch_array($result1))
{
$count++;

    if($row['smi_level']=='5star')
    {
        if($row['monthz']==1)
        {
        $jan++;
        }elseif($row['monthz']==2)
        {
        $feb++;
        }elseif($row['monthz']==3)
        {
        $mar++;
        }elseif($row['monthz']==4)
        {
        $apr++;
        }elseif($row['monthz']==5)
        {
        $may++;
        }elseif($row['monthz']==6)
        {
        $jun++;
        }elseif($row['monthz']==7)
        {
        $jul++;
        }elseif($row['monthz']==8)
        {
        $aug++;
        }elseif($row['monthz']==9)
        {
        $sep++;
        }elseif($row['monthz']==10)
        {
        $oct++;
        }elseif($row['monthz']==11)
        {
        $nov++;
        }elseif($row['monthz']==12)
        {
        $dec++;
        }
    }   
} 
```

我决定这样 `$jan5 = 0;$feb5 = 0;$mar5 = 0;$apr5 = 0;$may5 = 0;$jun5 = 0;$jul5 = 0;`做，以便如果数据没有传递到这个条件`if($row['smi_level']=='5star')`，它们的返回值为零（0）。

这样我的输出就可以适应这段代码

```
[<?php  echo$jan5.",".$feb5.",".$mar5.",".$apr5.",".$may5.",".$jun5.",".$jul5.",".$aug5.",".$sep5.",".$oct5.",".$nov5.",".$dec5;
?] 
```

如果不使用上面的代码，`$jan5 = 0;$feb5 = 0;$mar5 = 0;$apr5 = 0;$may5 = 0;$jun5 = 0;$jul5 = 0;................`当我回显或打印它时，我看起来像这样 1,2,5,11,12 但使用它（上面的第一个示例代码）输出将是 1,0,0， 0,0,0,0,1,2,5,11,12。

谢谢，对不起，如果这变得混乱，对不起我的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:17:36.157

这与您的问题略有不同，但建议的代码改进/修订：

```
 switch($row['monthz']){
      case 1:
        $jan++;
        break;

      case 2:
        $feb++;
        break;

      case 3:
        $mar++;
        break;

      case 4:
        $apr++;
        break;

      case 5:
        $may++;
        break;

      case 6:
[ ... ] 
```

它看起来更干净，代码更少。[PHP 手册](http://php.net/manual/en/control-structures.switch.php)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:56:34.280

这可能会奏效......

```
$month = array('jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec');
$day = array(3,4,5);

foreach($day as $d)
{
    foreach($month as $m)
    {
        ${$m.$d} = 0;
    }
} 
```

但我建议您使用**Array**。

# php - 如何将文件传递给函数

> ID：13004819
> 
> 赞同：0
> 
> 时间：2012-10-22T04:00:52.417
> 
> 标签：php, forms

我有一个 HTML 表单，其中包含一堆文本输入和一个文件输入。我的文本输入很好地传递到我的函数中，但是文件的工作方式不同。这是我想要通过的：

```
$submit = submit_server($_POST['name'], $_POST['ip'], $_FILES['banner'], $_POST['description'], $_POST['slots'], $_POST['tags']); 
```

以下是该函数的内容：

```
submit_server($name, $ip, $banner, $description, $slots, $tags) 
```

这是我的表格：

```
<form action="submit.php" method="POST">
    ...some text inputs...
    <input type="file" name="banner" />
</form> 
```

有什么我需要改变才能完成这项工作吗？在我的函数中，我检查文件`if(!$banner){ return false; }`并返回 false。

我只需要将整个文件对象传递给我的函数。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:19:07.520

用于提交文件的所有表单必须具有

**enctype="多部分/表单数据"**

在表单标签中，请参阅手册部分：[处理文件上传](http://php.net/manual/en/features.file-upload.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:35:59.980

你必须使用：

```
<form action="submit.php" method="POST" enctype="multipart/form-data"> 
```

并给你一个小建议。

你为什么要像这样传递所有变量？

创建数组并将其传递给函数。

```
<?php
      $data = array(
                     'name'=> $_POST['name'],
                      'ip'=> $_POST['ip'], 
                    );
       submit_server($data);   //i think, this is a good practise 
```

# sql-server - SQL Server 2008 R2 除零错误

> ID：13004820
> 
> 赞同：1
> 
> 时间：2012-10-22T04:01:00.123
> 
> 标签：sql-server, sql-server-2008-r2

请告诉我我是否遗漏了什么，如果我失去理智

以下查询产生零误差

```
DECLARE @Test TABLE(
        ID INT,
        Val FLOAT
)

INSERT INTO @Test SELECT 1, 0

;WITH   Grouped AS (
        SELECT  ID,
                Val,
                SUM(Val) OVER (PARTITION BY ID) TotalVal
        FROM    @Test
)
, Filtered AS (
        SELECT  *
        FROM    Grouped
        WHERE   TotalVal != 0
)
SELECT  *
FROM    Filtered
WHERE   Val / TotalVal > 0.05 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5444)

如下所示不会产生相同的错误

```
DECLARE @Test TABLE(
        ID INT,
        Val FLOAT
)

INSERT INTO @Test SELECT 1, 0

;WITH   Grouped AS (
        SELECT  ID,
                Val,
                SUM(Val) OVER (PARTITION BY ID) TotalVal
        FROM    @Test
)
, Filtered AS (
        SELECT  *
        FROM    Grouped
        WHERE   TotalVal != 0
)
SELECT  *,
        Val / TotalVal Test
FROM    Filtered 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5445)

通过查看估计的查询计划，第一个查询尝试将 where 子句优化为

```
[Val]/[Expr1004]>(5.000000000000000e-002) AND [Expr1004]<>(0.000000000000000e+000) 
```

我可以看到，`TotalVal != 0`在实际之后`devide by TotalVal`。

这是一个已知的问题？有没有办法（除了使用另一个临时表）绕过这个。我知道我可以使用

```
CASE WHEN TotalVal = 0 THEN 0 ELSE Val / TotalVal END 
```

但这会破坏第二个 CTE 声明的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:07:05.507

转到此[连接项目](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)并投票。

*就我个人而言，我对 SQL Server 的工作方式感到满意，因为它允许某种程度的优化来预先计算（简化）表达式，而不是将组件向前推进以供以后计算（即使它在逻辑上*是有意义的）。

至于您的查询，是的，Filtered CTE 是一个非事件，应该滚动到最终查询中。以这种方式编写它表明您相信 CTE 以某种方式处理并*缓存在内存中*。那不是真的-请参阅[this answer](https://stackoverflow.com/a/12891685/573261) to another SO question。有关 SQL Server 的 CTE 实现的扩展阅读，请访问[本文](http://explainextended.com/2009/11/18/sql-server-are-the-recursive-ctes-really-set-based/)。

# c# - 获取 regex.matches 中匹配项的索引（匹配号）

> ID：13004823
> 
> 赞同：0
> 
> 时间：2012-10-22T04:02:14.757
> 
> 标签：c#, regex, match

如何获取使用 regex.matches 中的每个迭代的匹配索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:12:26.087

集合中的每个`Match`对象都有一个`Index`属性。请参阅[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:15:50.293

尝试如下

```
 string strInput = "YourString";

 Regex regex = new Regex("Your Regex to match");
 var m = regex.Match(strInput);
 if (m.Success)
      {
          foreach (var matches in regex.Matches(strInput))
           {
              if (m.Success)
                 {
                     Console.WriteLine(m.Index);
                 }

                 m = m.NextMatch();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:17:06.523

Match.Index 将返回匹配项的第一个字符在原始字符串上的位置。

MatchCollection 只实现`ICollection`接口而不实现`IList`，所以我认为不可能直接从 matchcollection 中检索项目的索引。

但是您可以使用 a`Collection.CopyTo`将其移动到数组中。

[http://msdn.microsoft.com/en-us/library/gg695671.aspx](http://msdn.microsoft.com/en-us/library/gg695671.aspx)

Array 确实有一个[IndexOf](http://msdn.microsoft.com/en-us/library/7eddebat.aspx)，您可以使用它来检索索引。

# sql - 当我知道sql中每个集群中的点时计算集群数

> ID：13004825
> 
> 赞同：2
> 
> 时间：2012-10-22T04:02:35.873
> 
> 标签：sql, sql-server, sql-server-2008, closures

当我知道每个集群的所有成员时，我正在尝试计算集群的数量。

我需要SqlServer2008中的一个函数来解决这个问题。

我的表有超过 1400 万条不同的记录，如下所示：

```
CREATE TABLE Test
(
   F1 varchar(5),
   F2 varchar(5)
)
INSERT INTO TEST ( F1, F2) VALUES ( 'A', 'B')
INSERT INTO TEST (  F1, F2 ) VALUES ( 'A', 'K')
INSERT INTO TEST ( F1, F2) VALUES ( 'C', 'H')
INSERT INTO TEST (  F1, F2 ) VALUES ( 'D', 'B')
INSERT INTO TEST (  F1, F2 ) VALUES ( 'F', 'I')
INSERT INTO TEST (  F1, F2 ) VALUES ( 'F', 'B')
INSERT INTO TEST (  F1, F2 ) VALUES ( 'D', 'H' )
INSERT INTO TEST (  F1, F2 ) VALUES ( 'E', 'G' )
INSERT INTO TEST (  F1, F2 ) VALUES ( 'G', 'L' ) 
```

注意：

```
If A=B AND A=K THEN B=K 
IF E=G AND G=L THEN E=L 
```

现在函数的输出应该如下：

```
ClusterNumber--- point
1---A
1---B
1---k
1---D
1---F
1---I
1---H
1---C
2---E
2---G
2---L 
```

我想解决方案将是一个递归函数，但不知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:14:30.527

我在 C# 中使用*EntityFrameWork*和*LINQ*在*递归函数*中解决它！

- 请注意，我为集群标签添加了一个新列*Clus*。

所以把这个循环放在你的主代码中：

```
 foreach (var item1 in db.Test.ToList())
    {
        FirstFunc(item1, item1.F1);
    } 
```

并使用这些功能：

```
private void FirstFunc(Test item1,string cc)
{
    if (item1.Clus == null)
    {
        item1.Clus = cc;
        db.SaveChanges();

        RecFunc(item1, cc);
    }
}

private void RecFunc(Test item1,string cc)
{
        var t1 = db.Test.Where(x => (x.F1 == item1.F1 | x.F2 == item1.F1 | x.F1 == item1.F2| x.F2 == item1.F2) & x.Clus == null).ToList();
        foreach (var item2 in t1)
        {
            item2.Clus = cc;
            db.SaveChanges();
            RecFunc(item2,cc);
        }
} 
```

结果是： ![在此处输入图像描述](../Images/65ca13ab5444f13a30485d7880fa3bfb.png)

接着：

```
 var ClusterCount = db.Test.Select(x => x.Clus).Distinct().Count(); 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:52:26.667

传递闭包不能在普通 SQL 中计算。它们是使用 PL/SQL 和类似语言的关键示例。您可能想研究相关问题，例如：

[mySQL 传递闭包表](https://stackoverflow.com/questions/4242416/mysql-transitive-closure-table)

无论如何，您需要的搜索词是关闭。你有一个关系，但你想关闭这个关系。

# ruby-on-rails-3 - 使用连接表搜索，ruby on rails

> ID：13004830
> 
> 赞同：0
> 
> 时间：2012-10-22T04:02:56.723
> 
> 标签：ruby-on-rails-3, search

我有一个关于搜索代码表报销并在表用户中通过用户名输入的问题。这是表单搜索：

```
<%= form_tag reimburses_searchreimburse_path, method: :get do %>
                    <%= text_field_tag :reimburse, params[:reimburse] %>
                    <%= submit_tag "Search", name: nil%>
                    <% end %> 
```

这是控制器

```
 def searchreimburse
 @users = User.where("username LIKE ? ", "%#{params[:reimburse]}%")  
 @reimburses = Reimburse.all  
 @project = Project.all
end 
```

我想要这样的输出：

```
<tr>                      
                    <th >#</th>
                    <th >Date</th> 
                    <th >Project name</th>
                    <th >Title</th>
                    <th >User name</th>   #*this from table user*
                    <th >Status</th>
                    <th >Action</th>
                </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:09:34.120

除非您发布模型，否则很难判断，但假设用户有一个指向报销的关联，您可以这样做：

```
@reimburses = @users.map(&:reimburses).flatten 
```

# javascript - 在单元格外单击后如何退出文本框

> ID：13004833
> 
> 赞同：5
> 
> 时间：2012-10-22T04:03:11.823
> 
> 标签：javascript, textbox, exit-code

我不小心在网上找到了这段代码，它解决了我的大部分问题，但是我想在这段代码中添加一件事，但我不知道我的问题是什么，如何在用户之后退出文本框双击它还是在用户完成编辑后？

```
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
    <title></title>
    <script type="text/javascript">
    /*<![CDATA[*/
    function INPUT(id){
    var obj=document.getElementById(id),tds=obj.getElementsByTagName('TD'),z0=0,ip,html;
    for (;z0<tds.length;z0++){
    tds[z0].onmouseup=function(){ AddInput(this); }
    }
    }

    function AddInput(td){
    var ip=zxcAddField('INPUT','text','');
    ip.value=td.innerHTML;
    td.innerHTML='';
    td.appendChild(ip);
    td.onmouseup=null;
    }

    function zxcAddField(nn,type,nme){
    var obj;
    try {
    obj=document.createElement('<'+nn+' name="'+(nme||'')+'" '+(type?'type="'+type+'" ':'')+' >');
    }
    catch(error){
    obj=document.createElement(nn);
    if (type){
    obj.type=type;
    }
    obj.name=nme||'';
    }
    return obj;
    }

    /*]]>*/
    </script>
    <script type="text/javascript">
    /*<![CDATA[*/

    function Init(){
    INPUT('tst');
    }

    if (window.addEventListener){
    window.addEventListener('load',Init, false);
    }
    else if (window.attachEvent){
    window.attachEvent('onload',Init);
    }

    /*]]>*/
    </script>
    </head>

    <body>
    <table id="tst" border="1">
    <tr width="200">
    <td>some html</td>
    </tr>
    </table>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:48:39.190

首先，修改`AddInput`以设置*blur*事件的侦听器，该事件将在相关元素以外的其他内容收到点击时触发：

```
function AddInput(td){
    var ip=zxcAddField('INPUT','text','');
    ip.value=td.innerHTML;
    ip.onblur = function () { removeInput(ip); };
    td.innerHTML='';
    td.appendChild(ip);
    td.onmouseup=null;
} 
```

然后，您可以添加一个新函数，该函数将在触发其*blur*事件时`removeInput`替换`<td>`'s 的内容：`<input>`

 *```
function removeInput(input) {
    var val = input.value;
    var td = input.parentNode;
    td.removeChild(td.lastChild);
    td.innerHTML = val;
    td.onmouseup = function () { AddInput(td); };
} 
```

此函数还重新分配*mouseup*事件侦听器，因为它`null`在`AddInput`函数中设置为。

请记住，虽然这在 Chrome 22 中对我有用，但可能需要一些额外的努力来测试和修复内联事件和属性分配可能存在的任何跨浏览器问题。

如果它是我的代码，我可能会使用`addEventListener`和`getAttribute()`/重写“标准”版本`setAttribute()`，然后使用其等效项创建一个仅适用于 IE 的补救路径。或者，只需使用 jQuery，让它为您完成所有跨浏览器的工作。*

# c# - 如何创建只读复选框 MVC？

> ID：13004839
> 
> 赞同：2
> 
> 时间：2012-10-22T04:04:35.630
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC。在视图中有复选框，所以我想让它只读或用户不能更改它..

这是我的看法

```
 <tr id="pnHireSet">
                <td class="adminTitle">
                    @Html.LabelFor(model => model.IsHireSet):
                </td>
                <td class="adminData">
                    @Html.EditorFor(model => model.IsHireSet)

//This is check box. I want set is read only....
                    @Html.ValidationMessageFor(model => model.IsHireSet)
                </td>
            </tr> 
```

我该怎么做？？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T04:06:57.977

只需使用`DisplayFor`而不是`EditorFor`.

如果您需要将值包含在表单提交中，您也可以添加一个`HiddenFor`。

```
<td class="adminData">
    @Html.DisplayFor(model => model.IsHireSet)
    @Html.HiddenFor(model => model.IsHireSet)
</td> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-04T08:31:16.527

如果您想可视化复选框但打开复选框的控件，那么您可以尝试

```
@Html.CheckBoxFor(model => model.IsActive, new { onclick = "return false" }) 
```

我不喜欢使用`disable=false`，因为如果您需要服务器的复选框值，则禁用始终发送 false 或者它认为已检查状态，这就是问题和区别。

# java - Jtable 中不显示列名

> ID：13004841
> 
> 赞同：0
> 
> 时间：2012-10-22T04:05:31.637
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

> **可能重复：**
> [JTable 不会显示列标题](https://stackoverflow.com/questions/2320812/jtable-wont-show-column-headers)
> [如何在 JTable 中查看列标签？](https://stackoverflow.com/questions/12953627/how-to-see-column-labels-in-jtable)

我正在使用 swing 创建用户注册表单。某些标签未正确显示，列名也未显示。

下面是我的代码：

```
import java.awt.EventQueue;

import javax.swing.JFrame;
import java.awt.FlowLayout;
import javax.swing.JLabel;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import javax.swing.JTextField;
import java.awt.Insets;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JCheckBox;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.LayoutStyle.ComponentPlacement;
import java.awt.Font;
import javax.swing.JButton;
import java.awt.Window.Type;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JScrollBar;
import java.awt.Scrollbar;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Vector;

import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.ListSelectionModel;

public class UserRegistration {

    private JFrame frmUserRegistrationForm;
    private JTextField textField;
    private JTextField textField_1;
    private JTextField textField_2;
    private JTextField textField_3;
    private JCheckBox chckbxNewCheckBox;
    private JCheckBox chckbxUpdate;
    private JCheckBox chckbxDelete;
    private JComboBox UserTypecomboBox;
    private JLabel lblUserType;
    private JLabel lblIsactive;
     private JPanel panel;
     private JTable table;
     private JComboBox isActive; 
     static Vector<Vector<String>> data=null;
    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    UserRegistration window = new UserRegistration();
                    window.frmUserRegistrationForm.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public UserRegistration() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frmUserRegistrationForm = new JFrame();
        frmUserRegistrationForm.setTitle("User Registration Form");
        frmUserRegistrationForm.setBounds(100, 100, 700, 700);
        frmUserRegistrationForm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frmUserRegistrationForm.getContentPane().setLayout(null);

        JLabel lblUserRegistrationForm = new JLabel("User Registration Form");
        lblUserRegistrationForm.setBounds(211, 6, 198, 24);
        lblUserRegistrationForm.setFont(new Font("Times New Roman", Font.BOLD, 20));
        frmUserRegistrationForm.getContentPane().add(lblUserRegistrationForm);

        JLabel lblUserName = new JLabel("User Name* :");
        lblUserName.setBounds(197, 35, 130, 16);
        frmUserRegistrationForm.getContentPane().add(lblUserName);

        textField = new JTextField();
        textField.setBounds(350, 29, 122, 28);
        textField.setColumns(10);
        frmUserRegistrationForm.getContentPane().add(textField);

        JLabel lblPassword = new JLabel("Password* :");
        lblPassword.setBounds(197, 68, 130, 16);
        frmUserRegistrationForm.getContentPane().add(lblPassword);

        textField_1 = new JTextField();
        textField_1.setBounds(350, 62, 122, 28);
        textField_1.setColumns(10);
        frmUserRegistrationForm.getContentPane().add(textField_1);

        JLabel lblVerifyPassword = new JLabel("Verify Password* :");
        lblVerifyPassword.setBounds(197, 96, 150, 16);
        frmUserRegistrationForm.getContentPane().add(lblVerifyPassword);

        textField_2 = new JTextField();
        textField_2.setBounds(350, 90, 122, 28);
        textField_2.setColumns(10);
        frmUserRegistrationForm.getContentPane().add(textField_2);

        JLabel lblEmail = new JLabel("Email :");
        lblEmail.setBounds(197, 124, 60, 16);
        frmUserRegistrationForm.getContentPane().add(lblEmail);

        textField_3 = new JTextField();
        textField_3.setBounds(350, 118, 122, 28);
        textField_3.setColumns(10);
        frmUserRegistrationForm.getContentPane().add(textField_3);

        lblUserType = new JLabel("User Type* :");
        lblUserType.setBounds(197, 152, 80, 16);
        frmUserRegistrationForm.getContentPane().add(lblUserType);

        UserTypecomboBox = new JComboBox();
        UserTypecomboBox.setBounds(350, 147, 122, 26);
        UserTypecomboBox.setModel(new DefaultComboBoxModel(new String[] {"Admin", "User"}));
        frmUserRegistrationForm.getContentPane().add(UserTypecomboBox);

        JLabel lblCreate = new JLabel("Previlages* :");
        lblCreate.setBounds(196, 193, 100, 16);
        frmUserRegistrationForm.getContentPane().add(lblCreate);

        chckbxNewCheckBox = new JCheckBox("Create");
        chckbxNewCheckBox.setBounds(350, 192, 59, 18);
        frmUserRegistrationForm.getContentPane().add(chckbxNewCheckBox);

        chckbxUpdate = new JCheckBox("Update");
        chckbxUpdate.setBounds(440, 192, 62, 18);
        frmUserRegistrationForm.getContentPane().add(chckbxUpdate);

        chckbxDelete = new JCheckBox("Delete");
        chckbxDelete.setBounds(538, 192, 58, 18);
        frmUserRegistrationForm.getContentPane().add(chckbxDelete);

        JButton btnRegisterUser = new JButton("Add User");
        btnRegisterUser.setBounds(355, 250, 105, 28);

        btnRegisterUser.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                boolean validate = Validate();
                if(validate){
                    System.out.println("date to database");
                    try {
                        insertData();
                        addJtable();
                    } catch (SQLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        });
        frmUserRegistrationForm.getContentPane().add(btnRegisterUser);
        Vector<String> headers=new Vector<String>();
           headers.add("User Name");
           headers.add("Email");
           headers.add("Previllage_create");
           headers.add("Previllage_update");
           headers.add("Previllage_delete");
           headers.add("User Type");
           headers.add("is_active");
        table = new JTable();
        table.setSurrendersFocusOnKeystroke(true);
        table.setShowVerticalLines(true);
        table.setCellSelectionEnabled(true);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        try {
            getData();
        } catch (ClassNotFoundException | SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        table.setModel(new DefaultTableModel(data,headers) {
            Class[] columnTypes = new Class[] {
                String.class, String.class, String.class, String.class, String.class, String.class, String.class, String.class
            };
            public Class getColumnClass(int columnIndex) {
                return columnTypes[columnIndex];
            }
        });
        table.getColumnModel().getColumn(2).setPreferredWidth(106);
        table.getColumnModel().getColumn(5).setPreferredWidth(113);
        table.setShowHorizontalLines(true);
        table.setBounds(33, 290, 619, 345);
        frmUserRegistrationForm.getContentPane().add(table);

        JScrollBar scrollBar = new JScrollBar();
        scrollBar.setBounds(637, 290, 15, 345);
        frmUserRegistrationForm.getContentPane().add(scrollBar);

        JLabel lblNewLabel = new JLabel("Is Active* :");
        lblNewLabel.setBounds(197, 221, 80, 16);
        frmUserRegistrationForm.getContentPane().add(lblNewLabel);

        isActive = new JComboBox();
        isActive.setModel(new DefaultComboBoxModel(new String[] {"Yes", "No"}));
        isActive.setBounds(350, 212, 60, 26);
        frmUserRegistrationForm.getContentPane().add(isActive);
    }
    public boolean Validate(){
         String userName = textField.getText();
         String passowrd = textField_1.getText();
         String verifyPassword = textField_2.getText();
         boolean validates = true;
         String message="";
         System.out.println("test" + userName);
        if((null== userName || userName.equals("")) && (null== passowrd || passowrd.equals("")) && (null== verifyPassword || verifyPassword.equals(""))&& !chckbxUpdate.isSelected() && !chckbxNewCheckBox.isSelected() && !chckbxDelete.isSelected()){

            JOptionPane.showMessageDialog(null,"Enter all mandatory fields");
            validates = false;

        }else{
        if(null== userName || userName.equals(""))
        {
            message= "User Name, ";
        }
        if(null== passowrd || passowrd.equals(""))
        {
            message=message+ "Passowrd, ";
        }
        if(null== verifyPassword || verifyPassword.equals(""))
        {
            message=message+ "verifyPassword, ";
        }
        if(!chckbxUpdate.isSelected() && !chckbxNewCheckBox.isSelected() && !chckbxDelete.isSelected()){
            message=message+ "Previlages";
        }
        if(!message.equals("")){
            JOptionPane.showMessageDialog(null,"Enter data for " +message+" fields");   
            validates=false;
        }
        }
        return validates;

    }

    public void insertData() throws SQLException{
         String userName = textField.getText();
         String passowrd = textField_1.getText();
         String verifyPassword = textField_2.getText();
         boolean prev_create= chckbxNewCheckBox.isSelected();
         boolean prev_update= chckbxUpdate.isSelected();
         boolean prev_delete= chckbxDelete.isSelected();
         String emial = textField_3.getText();
         String userType = (String)UserTypecomboBox.getSelectedItem();
         String isactive = (String) isActive.getSelectedItem();
         Connection con = null;
         try {
            Class.forName("com.mysql.jdbc.Driver");

         con = DriverManager
                         .getConnection("jdbc:mysql://127.0.0.1:3306/fingerprint",
                                         "root", "root");

         PreparedStatement ps = con
                         .prepareStatement("Insert into users(user_name,password,verify_pwd,email,previllage_create,previllage_update,previllage_delete,user_type,is_active) values(?,?,?,?,?,?,?,?,?)");
         ps.setString(1, userName);
         ps.setString(2, passowrd);
         ps.setString(3, verifyPassword);
         ps.setString(4, emial);
         if(prev_create)
         ps.setString(5, "Y");
         else
         ps.setString(5, "N");   
         if(prev_update)
         ps.setString(6, "Y");
         else
         ps.setString(6, "N");
         if(prev_delete)
         ps.setString(7, "Y");
         else
         ps.setString(7, "N");
         ps.setString(8, userType);
         ps.setString(9, isactive);
         ps.executeUpdate();
         con.close();

         } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
         finally{
             con.close();
         }
    }
     private static void getData() throws ClassNotFoundException, SQLException
     {
      // Enter Your MySQL Database Table name in below Select Query.
         data=new Vector<Vector<String>>();
      String str="select user_name,password,verify_pwd,email,previllage_create,previllage_update,previllage_delete,user_type,is_active from users";
      Connection con = null;
      ResultSet rs = null;
      Statement st = null;

      try {
       // Change the database name, hosty name, 
       // port and password as per MySQL installed in your PC.
          Class.forName("com.mysql.jdbc.Driver");

             con = DriverManager
                             .getConnection("jdbc:mysql://127.0.0.1:3306/fingerprint",
                                             "root", "root");

       st=con.createStatement();

       rs=st.executeQuery(str);

       while(rs.next())
       {
        Vector <String> d=new Vector<String>();

        d.add(rs.getString("user_name"));
        d.add(rs.getString("email"));
        d.add(rs.getString("previllage_create"));
        d.add(rs.getString("previllage_update"));
        d.add(rs.getString("previllage_delete"));
        d.add(rs.getString("user_type"));
        d.add(rs.getString("is_active"));
        d.add("\n\n\n\n\n\n\n");
        data.add(d);
       }

      } catch (SQLException e) {

       e.printStackTrace();
      }
      finally{
          st.close();
          rs.close();
          con.close();
      }
     }

     public void addJtable(){
            Vector<String> headers=new Vector<String>();
               headers.add("User Name");
               headers.add("Email");
               headers.add("Previllage_create");
               headers.add("Previllage_update");
               headers.add("Previllage_delete");
               headers.add("User Type");
               headers.add("is_active");
            table = new JTable();
            table.setSurrendersFocusOnKeystroke(true);
            table.setShowVerticalLines(true);
            table.setCellSelectionEnabled(true);
            table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            try {
                getData();
            } catch (ClassNotFoundException | SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            table.setModel(new DefaultTableModel(data,headers) {
                Class[] columnTypes = new Class[] {
                    String.class, String.class, String.class, String.class, String.class, String.class, String.class, String.class
                };
                public Class getColumnClass(int columnIndex) {
                    return columnTypes[columnIndex];
                }
            });
            //table.getColumnModel().getColumn(2).setPreferredWidth(50);
            //table.getColumnModel().getColumn(5).setPreferredWidth(50);
            table.setShowHorizontalLines(true);
            table.setBounds(33, 290, 619, 345);
            //table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
            TableColumn column = table.getColumnModel().getColumn(0);
            column.setPreferredWidth(10);

            column = table.getColumnModel().getColumn(1);
            column.setPreferredWidth(350);

            frmUserRegistrationForm.getContentPane().add(table);

            JScrollBar scrollBar = new JScrollBar();
            scrollBar.setBounds(637, 290, 15, 345);
            frmUserRegistrationForm.getContentPane().add(scrollBar);
     }

} 
```

以下是该应用程序的屏幕截图：

![在此处输入图像描述](../Images/b1578cbe75c00f898c7baf165574987a.png)

在屏幕截图中，创建、更新和删除等标签正确显示，但未显示表格列。

编辑。

下面是添加后的截图`frmUserRegistrationForm.getContentPane().add(new JScrollPane(table));`

![在此处输入图像描述](../Images/d3b1f55de07b99c3120b0a4936a44257.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T04:11:59.017

您创建表并将其直接添加到内容窗格...表希望添加到`JScrollPane`.

尝试类似...

```
frmUserRegistrationForm.getContentPane().add(new JScrollPane(table)); 
```

此外，我强烈建议您利用适当的布局管理器。给我 3 秒钟，我会毁掉你计算绝对布局的所有辛勤工作……而且我可能不需要更改关于你的代码或我的系统的任何事情。

我建议你阅读

*   [如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)
*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# xcode - Xcode git 添加文件

> ID：13004845
> 
> 赞同：1
> 
> 时间：2012-10-22T04:06:34.243
> 
> 标签：xcode, git

有没有人遇到过这个问题如下......？

当您将文件添加到您的项目时，Xcode git 将指示“？” 作为徽章。所以，据我所知，徽章的含义是因为GIT找不到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:14:37.130

```
Right click > Source Control > Add 
```

# google-apps-script - 从单元格中的超链接运行脚本

> ID：13004853
> 
> 赞同：2
> 
> 时间：2012-10-22T04:07:43.383
> 
> 标签：google-apps-script, google-sheets

通过单击谷歌电子表格单元格中带有超链接的值，我未能找到运行脚本的文档。可能吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-15T23:18:54.867

我已成功实施的解决方案是将 onEdit 与目标单元格的数据验证结合使用。不完全单击超链接，但它可以解决问题：

数据验证将在该单元格中插入一个下拉列表，用户可以从中选择要运行的适当脚本，或者可以通过 onEdit 获取选定的单元格值并作为参数传递。

例如，如果我有一个名为“sheetToWatch”的工作表，其中有一列“columnWithDataValidations”，并且该列在每一行中都有一个数据验证，因此它要么是空白要么是“RUN SCRIPT”，你可以控制运行脚本：

```
function onEdit(e) {
  var aSheet = SpreadsheetApp.getActiveSheet();
  var aCell = aSheet.getActiveCell();
  var aColumn = aCell.getColumn();
  var aRow = aCell.getRow();

  if (aSheet == "sheetToWatch" && aColumn == "columnWithDataValidations" && aCell.getValue() == 'RUN SCRIPT') {
    runTheScript()
  } else {
    //do nothing
  }

  return
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-26T23:16:32.680

如果您想要的只是运行脚本的工作表上的装饰物，但您不想每次都绘制一个按钮，或者您希望装饰物可以跨多行复制，则可以使用复选框。然后您可以处理`onEdit`并将单元格的值设置回false。或者在脚本运行时将其设置为 true，然后再设置为 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-17T15:53:53.357

如果这是您的想法，您不能直接通过 URL 运行 Google Apps 脚本功能。

*   您可以使用修改电子表格的 doPost() 方法将脚本实现为 webapp。超链接需要包含一个参数，指示您在电子表格中的位置，因为 web 应用程序没有来自电子表格的上下文信息。

*   您可以插入一个按钮的图片，并将您的脚本链接到它。如果此脚本是容器绑定到电子表格的，它将能够访问上下文信息，例如`.activeCell()`确定用户的位置。

*   您可以添加调用嵌入式脚本的自定义菜单功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-05T18:03:09.003

我知道这是一个旧线程，但我有同样的问题并想出了一个解决方法，所以我认为它可能对其他人有所帮助。

正如 Mogsdad 提到的，您可以插入一个按钮并将您的脚本链接到它。如果您想要单击单元格中的超链接的错觉，您可以使按钮与您的单元格或文本大小相同，并使填充颜色和线条颜色都透明。它有助于有一些颜色，将按钮放在适当的位置，然后对其进行编辑以删除颜色。

对用户来说，当他们单击文本时，该函数似乎运行，但实际上它是一个不可见的按钮。它不是超链接，但我相信它达到了点击“文本”启动脚本的目的。

# java - 有没有办法在 OSX Lion 上使用 Java 6 重新启用 javaws？

> ID：13004854
> 
> 赞同：8
> 
> 时间：2012-10-22T04:07:54.620
> 
> 标签：java, macos, java-web-start

随着 Apple 在 Lion 上的 Java 6 的最新更新，它不仅禁用了 Web 浏览器支持，还禁用了 Java Web Start。我将 javaws 与需要 Java 6 和 32 位的应用程序一起使用。我的系统上仍然存在 Java 6，但 javaws 不起作用：

```
James-Babkas-iMac:~ jimbabka$ java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode)

James-Babkas-iMac:~ jimbabka$ javaws http://foo.bar.org/bgameui/bgameui.jnlp
No Java runtime present, requesting install.
Unable to locate a Java Runtime to invoke. 
```

当我运行 javaws 命令时，我收到一条弹出消息，将我定向到一个 Oracle 网页，我可以在该网页上下载 64 位 Java 7，这对我没有用处。有没有办法让 javaws 再次使用 32 位 Java 6？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T13:43:50.040

我解决了同样的问题。昨天更新到最新的 1.6.0_37 后，我的 javaws 不再启动（与您的消息相同）。

因此，让我们首先检查您的 javaws 是从哪里获取的：
`which javaws` 它要么什么都不回答（然后根本没有设置），要么它可能指向一个符号链接（就像在我的 PC 上一样；），它启动了一个错误的 javaws。例如从文件夹`/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands`

尝试从您找到 javaws 的所有文件夹中启动您的 javaws： `/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands` `/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/` `/System/Library/Java/Support/Deploy.bundle/Contents/MacOS`

（使用 sudo 进行测试，例如`sudo /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javaws` ）

对我来说，它从第二个文件夹开始工作......

然后你可以将一个javaws（例如/usr/bin/javaws）可执行文件指向那个javaws（`sudo link /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/javaws /usr/bin/javaws`）

PS 在其他论坛上，我发现您可能必须为您的 JAVA 文件夹提供额外的读取（可能是写入）权限，以防 javaws 在没有 sudo 的情况下无法启动。

PS2：您可能想使用 EasyFind 之类的工具来查找“隐藏”内容（您在 Finder 中看不到）

# css - 延迟加载和同位素 - 在 Firefox 中工作，但不是 IE

> ID：13004856
> 
> 赞同：0
> 
> 时间：2012-10-22T04:08:05.270
> 
> 标签：css, lazy-loading, jquery-isotope

我曾尝试在我的网站上实施惰性加载程序。在此处查看沙箱：

[http://www.brencecoghill.com/projects/north-vietnam/](http://www.brencecoghill.com/projects/north-vietnam/)

以下文本被添加到我的同位素中以使这项工作（连同必要的 html 并从标题链接到库）：

```
$("img").lazyload({
    event : 'scroll',
    effect : 'fadeIn',
    appear: function(){
    }
}); 
```

这在 Firefox 中似乎可以正常工作，但在 IE 中完全失败（我使用版本 8 进行了测试） - 仅显示灰色框。

1.  如何解决此问题以在 IE 中工作？（至少版本 8 或更高版本）

2.  有没有办法设置lazyloader，让它很好地降级？

仅供参考，我使用这些链接来弄清楚如何实现这一点：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

[结合 jQuery Isotope 和延迟加载](https://stackoverflow.com/questions/11337291/combining-jquery-isotope-and-lazy-load)

[http://jsbin.com/ajoded](http://jsbin.com/ajoded)

[http://jsfiddle.net/wN6tC/73/](http://jsfiddle.net/wN6tC/73/)

**编辑：我删除了试图写入上面控制台的行。关于修复我收到的其他脚本错误的任何其他建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:09:36.473

现在你在 IE 中工作正常，`console`但你仍然有一个 js 错误。我不确定为什么会发生该错误，也许是`jQuery.noConflict();`

IE：

```
SCRIPT5002: Function expected 
animate-bg.js, line 8 character 1 
```

铬合金：

```
Uncaught TypeError: object is not a function animate-bg.js:71 (anonymous function)
animate-bg.js:71 
```

回答第二个问题。。

> > 有没有办法设置lazyloader，让它很好地降级？

您可以按照“[非 JavaScript 浏览器的后备](http://www.appelsiini.net/projects/lazyload)”说明进行操作。这基本上是为这样的图像设置代码：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg"  width="640" heigh="480">
<noscript><img src="img/example.jpg" width="640" heigh="480"></noscript> 
```

然后添加一些CSS来隐藏

```
 .lazy { display: none; } 
```

当页面的 jquery 加载立即调用类似这样的东西再次显示图像。

```
$("img.lazy").show().lazyload(); 
```

# plsql - 在 pl/sql 中打印变量

> ID：13004860
> 
> 赞同：19
> 
> 时间：2012-10-22T04:08:35.447
> 
> 标签：plsql, oracle10g

我有以下代码：

```
DECLARE
   v_hire_date DATE:='30-Oct-2000';
   v_six_years BOOLEAN;  
BEGIN
IF MONTHS_BETWEEN(SYSDATE,v_fecha_contrato)/12 > 6 THEN
      v_six_years:=TRUE;
ELSE
      v_six_years:=FALSE;
END IF;
DBMS_OUTPUT.PUT_LINE('flag '||v_six_years);
END; 
```

我想打印变量的值`v_six_years`，但出现错误：

```
ORA-06550: line 10, column 24:
PLS-00306: wrong number or types of arguments in call to '||'
ORA-06550: line 10, column 3 
```

如何打印变量的值`v_six_years`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T04:21:22.823

看来你不能 concat`varchar`和`boolean`.

定义这个函数：

```
FUNCTION BOOLEAN_TO_CHAR(FLAG IN BOOLEAN)
RETURN VARCHAR2 IS
BEGIN
  RETURN
   CASE FLAG
     WHEN TRUE THEN 'TRUE'
     WHEN FALSE THEN 'FALSE'
     ELSE 'NULL'
   END;
END; 
```

并像这样使用它：

```
DBMS_OUTPUT.PUT_LINE('flag '|| BOOLEAN_TO_CHAR(v_six_years)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-22T19:17:11.537

您可以使用下面在 PLSQL 中打印布尔值

```
dbms_output.put_line('v_six_years '||  sys.diutil.bool_to_int(v_six_years)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-05T10:30:00.417

`dbms_output.put_line`不会重载以接受布尔参数。简单的一行答案是

> dbms_output.put_line（当 v_six_years = true 然后 'true' 否则 'false' end 时的情况）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T04:20:49.500

PL/SQL 没有文字来表示布尔值。您必须将 v_six_years 布尔值转换为字符串，或者如果您希望打印该值，则不使用布尔值。PL/SQL 布尔值非常适合逻辑，但如果您希望显示值则无用。

```
DECLARE
   v_hire_date DATE:='30-Oct-2000';
   v_six_years VARCHAR2(1);  
BEGIN
IF MONTHS_BETWEEN(SYSDATE,v_fecha_contrato)/12 > 6 THEN
      v_six_years:='1';
ELSE
      v_six_years:='0';
END IF;
DBMS_OUTPUT.PUT_LINE('flag '||v_six_years);
END; 
```

或者

```
DECLARE
   v_hire_date DATE:='30-Oct-2000';
   v_six_years BOOLEAN;  
   v_six_years_display VARCHAR2(5);
BEGIN
IF MONTHS_BETWEEN(SYSDATE,v_fecha_contrato)/12 > 6 THEN
      v_six_years:=TRUE;
      v_six_years_display := 'true';
ELSE
      v_six_years:=FALSE;
      v_six_years_display := 'false';
END IF;
DBMS_OUTPUT.PUT_LINE('flag '||v_six_years_display);
END; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-16T18:09:01.230

`\echo`您可以使用元命令打印变量的内容。来自`man psql`：

> 要检索变量的内容，请在名称前加上冒号，例如：
> 
> ```
> testdb=> \echo :foo
> bar 
> ```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2015-11-11T00:47:30.557

```
declare
     v_line varchar2(40); --declare
begin
     v_line := 'Happy new year'; --assigns
     dbms_output.put_line (v_line); --display 
end; 
```

新年快乐

# validation - jQuery插件函数返回一个值

> ID：13004865
> 
> 赞同：1
> 
> 时间：2012-10-22T04:09:59.857
> 
> 标签：validation, jquery-plugins, return-value

我正在编写一个 jquery 表单验证插件，它工作正常。我正在传递一个带有输入类型的表单 ID，如下所示：

`$('#contactForm :input').validateForm();`

在我的插件中，我有以下代码：

```
jQuery(function($) {
    $.fn.validateForm = function() {
        var values = new Array();
        this.each(function() {
            $(this).removeClass('error');
            if($(this).hasClass('required'))
            {
                if($(this).hasClass('number'))
                {
                    number = $(this).val();
                    if(number == '' || number.length < 9 || number.length > 13 || isNaN(number))
                    {
                        $(this).addClass('error');
                    }

                }else{

                    return true;

                }
            }
        });
    }
}); 
```

现在我的问题是我希望我的插件返回一个值为真或假的值。如果表单被验证，那么它应该返回 true，否则返回 false。

我想实现这样的目标

```
val = $('#contactForm :input').validateForm();
if(val){
   //DO AJAX
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:49:02.630

```
jQuery(function($) {
    $.fn.validateForm = function() {
        var values = new Array();
        var isOK = true; /* Form is OK unless we detect an error */
        this.each(function() {
            $(this).removeClass('error');
            if($(this).hasClass('required'))
            {
                if($(this).hasClass('number'))
                {
                    number = $(this).val();
                    if(number == '' || number.length < 9 || number.length > 13 || isNaN(number))
                    {
                        $(this).addClass('error');
                        isOK = false; /* Remember that error was detected */
                    }

                }
            }
        });
        return isOK; /* let caller know if error was detected */
    }
}); 
```

# python - 奇怪的字典分配问题

> ID：13004869
> 
> 赞同：0
> 
> 时间：2012-10-22T04:10:27.177
> 
> 标签：python, dictionary

我有 2 个模型，相册和图片以及一个`album_reorder`接收图片 ID 列表并相应地更改权重的函数。这很好用，但是我正在尝试为该函数编写测试，例如：

```
Class ReposTests(unittest.TestCase):
    def test_album_reorder__fail__not_owned(self):

        # Create a test user, album and pictures.
        user = self.create_test_user()
        # create_default_album() generates an Album along with 6 default Picture records.    
        create_default_album(user)
        album = get_first_album(user.profile)
        pictures = Picture.objects.filter(album=album)

        # Get all picture IDs into a list and record each pictures existing weight.
        picture_ids = []
        picture_weights = {}
        for picture in pictures:
            picture_ids.append(picture.id)
            print "%s:%s:%s" % (album.id, picture.id, picture.weight)
            picture_weights[picture.id] = picture.weight

        # Create another test user, album and pictures.
        user2 = self.create_test_user()
        create_default_album(user2)
        album2 = get_first_album(user2.profile)
        pictures2 = Picture.objects.filter(album=album2)

        # Add a Picture ID from a different user to test the restriction that an album cannot be re-ordered if any pictures do not belong to the specified user.
        picture_ids.append(pictures2[0].id)
        print "%s:%s:%s" % (album2.id, pictures2[0].id, pictures2[0].weight)
        picture_weights[pictures[2].id] = pictures2[0].weight

        # Shuffle all picture IDs
        random = Random()
        while pictures[0].id == picture_ids[0]:
            random.shuffle(picture_ids)

        # Reorder picture IDs according to shuffled ID list, however this should fail due to the ownership check.
        album_reorder(user, picture_ids)
        print picture_ids
        print picture_weights

        # Check each
        for picture_id in picture_ids:
            self.assertEqual(picture_weights[picture_id], Picture.objects.get(id=picture_id).weight) 
```

现在问题似乎出在`picture_weights`字典的构造方式上。由于以下两行输出：

```
# Loop output: (album.id, picture.id, picture.weight)
# 1346:5699:0
# 1346:5700:1
# 1346:5701:2
# 1346:5702:3
# 1346:5703:4
# 1346:5704:5
# 1347:5705:0

print picture_ids
# Outputs: [5700L, 5703L, 5702L, 5699L, 5704L, 5705L, 5701L]

print picture_weights
# Outputs: {5699L: 0L, 5700L: 1L, 5701L: 0L, 5702L: 3L, 5703L: 4L, 5704L: 5L} 
```

请注意`picture_ids`，正如预期的那样，它有 7 个元素长，而 as`picture_weights`只有 6 个元素，并且权重与循环输出的权重不匹配。第二张用户图片`5705`丢失，`picture_weights`但是其中一张`picture_weights`被分配了不正确的权重`0L`。

但是，我根本没有使用 dict 的经验，我只是想应用我对 PHP 关联数组的知识，所以我假设我在那里的知识存在差距。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:22:24.743

列表和字典在以下几行有所不同：

```
 # Add a Picture ID from a different user to test the restriction that an album cannot be re-ordered if any pictures do not belong to the specified user.
    picture_ids.append(pictures2[0].id)
    print "%s:%s:%s" % (album2.id, pictures2[0].id, pictures2[0].weight)
    picture_weights[pictures[2].id] = pictures2[0].weight 
```

注意你是如何使用`pictures[2].id`的，这是`5701L`（这就是字典中特定键的权重发生变化的原因）。您可能的意思是：

```
 picture_weights[pictures2[0].id] = pictures2[0].weight 
```

# php - 使用 mysqli 插入多个值

> ID：13004870
> 
> 赞同：0
> 
> 时间：2012-10-22T04:10:38.050
> 
> 标签：php, mysqli

谁能告诉我这行代码有什么问题？我目前是新手，现在尝试使用 mysqli 准备好的语句来连接到数据库后端。到目前为止，我似乎无法让它更新数据库。

```
 $stmt = $mysqli->prepare("INSERT INTO canada VALUES (?,?,?,?,?,?)");
    $stmt->bind_param('sssiss',$_REQUEST["UserID"],$_REQUEST["FirstName"],
                        $_REQUEST["LastName"],$_REQUEST["Age"],$_REQUEST["WhatParty"],
                        $_REQUEST["Electorate"]);

    $stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:13:24.743

问题是有 6`(?,?,?,?,?,?)` 和你 7 参数`bind_param`

尝试

```
 $stmt = $mysqli->prepare("INSERT INTO canada VALUES (?,?,?,?,?,?,?)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:20:33.537

问题是绑定参数的第一个参数，它指定了两个不正确的整数类型字段。

[绑定参数](http://php.net/manual/en/mysqli-stmt.bind-param.php)

如果用户 id 和年龄是 int，其余是字符串类型，那么它应该是 i 表示整数，s 表示字符串

- 更新

```
$db = new mysqli($server_host, $server_user, $server_password, $server_db);

if (mysqli_connect_errno()) {
    printf("DB error: %s", mysqli_connect_error());
    exit();
}

$stmt = $db->prepare("INSERT INTO canada
                      userid,firstname,lastname,age,whatparty,electorate)
                      VALUES (?,?,?,?,?,?))");

$stmt->bind_param("ississ",$_REQUEST["UserID"],$_REQUEST["FirstName"],
                  $_REQUEST["LastName"],$_REQUEST["Age"],
                  $_REQUEST["WhatParty"],$_REQUEST["Electorate"]);

$stmt->execute(); 
```

# javascript - decodeAudioData 上的 Chrome 选项卡崩溃

> ID：13004871
> 
> 赞同：2
> 
> 时间：2012-10-22T04:10:45.620
> 
> 标签：javascript, google-chrome, coffeescript, web-audio-api

尝试使用我为列景观制作的小型引擎构建 webgl 音频可视化器，我认为这对于随着时间的推移的频率分布非常有用。

现在这个是从coffeescript编译的，使选项卡崩溃：

```
(function() {
  var context, loadSound, onError, playSound, soundBuffer, url;

  context = new webkitAudioContext();

  soundBuffer = void 0;

  url = 'MoxxiTest.ogg';

  loadSound = function(url) {
    var request;
    request = new XMLHttpRequest();
    request.open('GET', url, true);
    request.responseType = 'arraybuffer';
    request.onload = function() {
      context.decodeAudioData(request.response, (function(buffer) {
        soundBuffer = buffer;
        return console.log('hmmm');
      }), onError);
      return console.log('hmmm');
    };
    return request.send();
  };

  playSound = function(buffer) {
    var source;
    source = context.createBufferSource();
    source.buffer = buffer;
    source.connect(context.destination);
    return source.noteOn(0);
  };

  onError = function(e) {
    return console.log(e);
  };

  window.onload = function() {
    return loadSound(url);
  };

}).call(this); 
```

从测试来看，这发生在 loadSound 函数中上下文的解码音频数据调用中。

通过使用同一文件的 mp3 和 ogg 进行测试。

按照[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/) 和[http://www.smartjava.org/content/exploring-html5-web-audio-visualizing-sound](http://www.smartjava.org/content/exploring-html5-web-audio-visualizing-sound)上的教程 了解有关网络音频API

我正在使用 XAMPP 来绕过跨源共享策略，如果这有影响的话。

Chrome版本为：22.0.1229.94 感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:19:14.773

我猜这是特定于您正在使用的音频文件的内容。您是否尝试过使用其他音频文件？如果是这样，我建议您在[http://code.google.com/p/chromium/issues/list](http://code.google.com/p/chromium/issues/list)提交一张票。他们通常很擅长回应。

# ios - 加载 xib 时 iPhone 5 迁移大问题

> ID：13004873
> 
> 赞同：1
> 
> 时间：2012-10-22T04:11:17.277
> 
> 标签：ios, iphone-5

在我的项目中，我有 3 个 xib 文件来支持不同的设备。我需要支持所有设备：iPhone 3、iPhone 4、iPhone 5。

有：

*   ViewController_iPhone_480.xib
*   ViewController_iPhone_568.xib
*   ViewController_iPad.xib

所以，主要问题是我需要检测正在使用的 iPhone 并为其加载 xib。

**非常重要：**我需要检查的不仅仅是 iOS 版本。而且我不需要检查屏幕的高度或宽度，因为它很奇怪（例如，如果 Apple 的其他设备将来具有相同的高度或宽度 - 它对我有什么帮助？）

你有办法在代码中检测 iPhone 5 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:22:09.013

```
CGSize result = [[UIScreen mainScreen] bounds].size;
result.height; // height in pixels
result.width; // width in pixels 
```

只需检查结果并据此做出决定。iPhone 4 的高度为 480，iPhone 5 的高度为 568。

编辑：在查看高度和宽度之前，您可以检查当前运行的设备。

```
NSString *deviceType = [UIDevice currentDevice].model; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:36:57.020

您可以使用以下代码获取平台：-

```
[[UIDevice currentDevice] platformType]   
[[UIDevice currentDevice] platformString] 
```

第一个给出与设备类型（UIDevice4SiPhone）连接的平台类型，而第二个给出设备类型字符串（iPHone4S）。

# java - 在 httpget 上将 mysql 参数从 java 发送到 php

> ID：13004886
> 
> 赞同：0
> 
> 时间：2012-10-22T04:13:15.053
> 
> 标签：java, php, android, eclipse

这是android应用程序的一部分...当我指定mysql_query而不使用.$_POST ['varname']时，我的php脚本正在工作。为了使用用户可定义的不同参数向应用程序添加搜索功能，我尝试根据调用 httpget 时从应用程序传递的值在 PHP 脚本中构建查询...... php 脚本的行看起来像这样：

```
$result = mysql_query("SELECT * FROM businessdata WHERE '"
    . $_POST['varQuery2']."' =  '" 
    . $_POST['varQuery1']"'") 
    or die(mysql_error()); 
```

然后方法如下：（为了完整性，这里方法在调用该方法时被赋予字符串值“GET”）

```
 public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params, String value, String value2) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
           params.add(new BasicNameValuePair("varQuery2", value));
           params.add(new BasicNameValuePair("varQuery1", value2)); 
           HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();

            params.add(new BasicNameValuePair("varQuery2", value));
            params.add(new BasicNameValuePair("varQuery1", value2)); 
            String paramString = URLEncodedUtils.format(params, "UTF-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:54:17.783

```
$result = mysql_query("SELECT * FROM businessdata WHERE '"
    . mysql_real_escape_string($_REQUEST['varQuery2'])."' =  '" 
    . mysql_real_escape_string($_REQUEST['varQuery1'])."'") 
    or die(mysql_error()); 
```

使用 *_real_escape_string 处理 sql 注入。

# unix - Grep 模式重复

> ID：13004890
> 
> 赞同：3
> 
> 时间：2012-10-22T04:13:40.153
> 
> 标签：unix, grep

我有一个 csv（逗号分隔文件）。我想知道如何仅使用 grep 搜索第 7 和第 8 字段相同的模式（不使用`cut`）。我尝试过这样的事情：

```
grep -E '[^,]*,{6,6}' input.csv | grep '\(.*\)\(,\)\(\1$\)' | less 
```

不幸的是，这不会打印任何东西。我怎样才能得到我需要的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:23:55.430

假设没有什么像带有逗号的字段那样尴尬（因为如果前 8 个字段中有这样的字段，那么没有完整的 CSV 识别工具就无法处理文件），并且有第 9 个字段（所以第 7 个字段）和第 8 个字段后跟逗号）然后：

```
grep '^\([^,]*,\)\{6\}\([^,]*,\)\2' file.csv 
```

第一位表示 6 个零个或多个非逗号序列，每个序列后跟一个逗号。然后是第 7 个（可能是空的）字段，后面有逗号；接下来是同样的事情（the `\2`）。

```
$ cat file.csv
a,b,c,d,e,f,g,g,i
a,b,c,d,e,f,g,h,i
a,b,c,d,e,f,hhh,hhh,i
,b,c,d,e,f,hhh,hhh,i
,,c,d,e,f,hhh,hhh,i
,,,d,e,f,hhh,hhh,i
,,,,e,f,hhh,hhh,i
,,,,,f,hhh,hhh,i
,,,,,,hhh,hhh,i
,,,,,,hhh,hhh,
$ grep '^\([^,]*,\)\{6\}\([^,]*,\)\2' file.csv
a,b,c,d,e,f,g,g,i
a,b,c,d,e,f,hhh,hhh,i
,b,c,d,e,f,hhh,hhh,i
,,c,d,e,f,hhh,hhh,i
,,,d,e,f,hhh,hhh,i
,,,,e,f,hhh,hhh,i
,,,,,f,hhh,hhh,i
,,,,,,hhh,hhh,i
,,,,,,hhh,hhh,
$ 
```

请注意，该`g,h,i`行没有出现在输出中（也不应该出现）；其余的应该而且确实会出现。

所有这些都是使用 POSIX[基本正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)或 BRE 完成的。如果您使用`egrep`or `grep -E`，您可以使用扩展正则表达式或 ERE，您可以放弃除`\2`;之外的所有反斜杠。您还可以处理包含 8 个字段的某些行和包含 9 个或更多字段的其他行的文件，但这不是常规的 CSV 文件。BRE 版本也可以修改为使用恰好有 8 列的 CSV 文件：

```
grep '^\([^,]*,\)\{6\}\([^,]*\),\2$' file.csv 
```

使用正则表达式的部分技巧是对实现给定结果的不同方法有灵活的思维方式；通常有不止一种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:35:07.833

如果您对 awk 感兴趣，那会更简单：

```
awk -F, '$7==$8' your_file 
```

或在 perl 中：

```
perl -F, -ane 'if($F[6]==$F[7]){print}' your_file 
```

# actionscript-3 - 为什么此 ActionScript 3 代码不画线？

> ID：13004891
> 
> 赞同：1
> 
> 时间：2012-10-22T04:13:55.813
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, flex4.5

我正在尝试在一个新的 Flex 项目（使用 Flash Builder 4.6）中画一条线的最小程序：

但是，当它在网络浏览器（Chrome 或 Firefox）中运行时，`myButton`单击按钮时，不会画线——有谁知道如何使它工作，以及如何使它无需绘制就可以绘制点击按钮？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here --> 
    </fx:Declarations>

    <fx:Script>

        <![CDATA[

            public function drawLine():void 
            {
                var canvas:Shape = new Shape();
                canvas.graphics.lineStyle(3, 0xff);
                canvas.graphics.moveTo (0,0);
                canvas.graphics.lineTo(300,300);
                this.addChild(canvas);
            }

        ]]>

    </fx:Script>

    <s:Button label="myButton" click="drawLine()" />

</s:Application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:03:26.317

在 Flex 应用程序中绘制简单线（或者更复杂的线，如果您愿意）的更简单的方法是使用 FXG 图形。当应用程序启动时，这个小片段应该立即绘制与您的示例中相同的线：

```
<s:Path data="M 0 0 L 300 300 Z">
    <s:stroke>
        <s:SolidColorStroke color="0xff" weight="3" />
    </s:stroke>
</s:Path> 
```

完毕！

现在，如果您绝对希望坚持使用`Shape`示例中的类（我不建议在 Flex 应用程序中这样做），您将需要一种方法将其添加到 Spark Flex 4 应用程序的 displayList 中。`Shape`不是`IVisualElement`，这是该`addElement()`方法接受的唯一接口。
您可以使用[SpriteVisualElement](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/core/SpriteVisualElement.html)类，它正是用于此目的。请注意，在 mx (Flex 3) 应用程序中，您不需要这个，因为您可以简单地使用该`addChild()`方法。（我知道这可能会让新手感到困惑：这是向后兼容的问题。）

```
private function drawLine():void {
    var shape:Shape = new Shape();
    shape.graphics.lineStyle(3, 0xff);
    shape.graphics.moveTo (0,0);
    shape.graphics.lineTo(300,300);

    var sve:SpriteVisualElement = new SpriteVisualElement();
    sve.addChild(shape);

    addElement(sve);
} 
```

现在，为了避免单击按钮，只需`drawLine()`在应用程序的 creationComplete 事件触发时调用：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600"
           creationComplete="drawLine()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:59:08.363

Spark 应用程序标签扩展了 SkinnableComponent，它在使用 AddChild() 方法时会引发运行时错误。确保您已安装 Flash Player 的调试版本，以便您可以看到错误。它会帮助你调试很多东西。

这是一些有效的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here --> 
    </fx:Declarations>

    <fx:Script>

        <![CDATA[

            public function drawLine():void 
            {
                drawingArea.graphics.lineStyle(3, 0x000000);
                drawingArea.graphics.moveTo (0,0);
                drawingArea.graphics.lineTo(300,300);
            }

        ]]>

    </fx:Script>

    <s:Button label="myButton" click="drawLine()" />

    <s:Group width="100%" height="100%" id="drawingArea">

    </s:Group>

</s:WindowedApplication> 
```

我在 MXML 中为应用程序提供了自己的绘图区域，并在该区域进行绘制。这是一个 AIR 应用程序；但相同的代码应该在基于 Web 的应用程序中工作。

这是另一个示例，它没有在 MXML 中创建绘图区域；但动作脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here --> 
    </fx:Declarations>

    <fx:Script>

        <![CDATA[
            import mx.core.UIComponent;

            public function drawLine():void 
            {
                var canvas :UIComponent = new UIComponent;
                canvas.graphics.lineStyle(3, 0xff);
                canvas.graphics.moveTo (0,0);
                canvas.graphics.lineTo(300,300);
                this.addElement(canvas);

            }

        ]]>

    </fx:Script>

    <s:Button label="myButton" click="drawLine()" />

</s:WindowedApplication> 
```

笔记; 我在这里使用 UIComponent 作为绘图元素。我相信 UIComponent 是层次链上的“最高”组件，它实现了 IVisualElement 并且可以传递给 addElement 方法。

# php - 如何使用 php 将数据库 mysql 中的 Ã©,Ãª,... 转换为普通字符串 é,â,...？

> ID：13004892
> 
> 赞同：0
> 
> 时间：2012-10-22T04:14:05.197
> 
> 标签：php, mysql, latin1

mysql中的数据有问题。

一些带有字符串的数据存储，如**(1):**`"hello &amp; hello &#039; hello &egrave; ..."`。还有一些数据存储与**(2):**`"hello Ã hello Ã© hello Ãª ..."`之类的字符串。

我可以将字符串**（1）**解为普通字符串，但不知道如何将字符串**（2）**转换为普通字符串？

**注意**：我们不能更改现有数据库中的数据：/两个样本都存储在同一个表中，表的字符集是 latin1！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:17:58.300

`hello Ã hello Ã© hello Ãª`可能将 UTF-8 解释为 ISO-8859-1。

您可以更改解释，例如在浏览器中设置字符集，或使用`utf8_decode()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:18:10.467

**编辑**-

在不改变数据库结构的情况下试试这个——

```
ini_set('default_charset', 'YOUR_CHARACTER_SET') 
```

**或者**试试这个——

```
header('Content-Type: text/html; charset=iso-8859-1'); 
```

检查此设置，它的所有表排序规则

![在此处输入图像描述](../Images/e66ed4684dc103b2e81cafd7ff503dfd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:32:08.927

`CONVERT`用作`CONVERT ("hello Ã hello Ã© hello Ãª ...", ascii)`.... _

# android - 自定义秒表应用程序android

> ID：13004893
> 
> 赞同：4
> 
> 时间：2012-10-22T04:14:07.800
> 
> 标签：android, android-layout, timer

我正在尝试在 android 中开发自定义秒表应用程序，但它引发以下异常：

> android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。

我也尝试过使用计时器，但是当我们使用它的停止方法时，它会从之前的值开始。

以下是我的活动文件

```
public class MainActivity extends Activity implements OnClickListener
{

TextView sec,milisec,min;
Button start,stop,pause,resume;
int count=0;
Chronometer chrono;
Timer timer;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    chrono=(Chronometer)findViewById(R.id.chronometer);
    milisec=(TextView)findViewById(R.id.milisec);
    sec=(TextView)findViewById(R.id.sec);
    min=(TextView)findViewById(R.id.min);
    start=(Button)findViewById(R.id.start);
    stop=(Button)findViewById(R.id.stop);
    pause=(Button)findViewById(R.id.pause);
    resume=(Button)findViewById(R.id.resume);

    System.out.println("-------1-------");

    start.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            //chrono.start();

        //count=Integer.parseInt(count_view.getText().toString());*/
        timer = new Timer();
        timer.schedule(new TimerTask()
        {
           public void run()
           {
               System.out.println("-------2-------");
               View v = new View(getApplicationContext());
               count_increment(v);
            }
          },1000,10000);

    }   

    });

    stop.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            //chrono.clearComposingText();
            //chrono.setText("00");
            timer.cancel();

        }
    });
}

public void count_increment(View v)
{
    count++;
    System.out.println("count="+count);
    //count_str=String.valueOf(count);
    milisec.setText(""+count);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

以下是xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="30dp"
    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/min"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="00" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=":" />

    <TextView
        android:id="@+id/sec"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="00" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=":" />

    <TextView
        android:id="@+id/milisec"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="00" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="60dp"
    android:gravity="center_horizontal" >

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/start"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:text="Start" />

            <Button
                android:id="@+id/stop"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:text="Stop" />

            <Button
                android:id="@+id/pause"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:text="Pause" />

            <Button
                android:id="@+id/resume"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:text="Resume" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Chronometer
                android:id="@+id/chronometer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Chronometer" />

        </TableRow>
    </TableLayout>
</LinearLayout>

</RelativeLayout> 
```

出了什么问题？
有没有其他方法可以开发秒表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:18:27.237

错误信息非常不言自明：您不应在新线程中直接触摸 UI 元素。一种可能的解决方法是您将可运行的内容发布到 UI 线程以通过[Activity.runOnUiThread()更新 UI](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

我的意思是这样的（伪代码未经测试）：

```
public void count_increment(View v)
{
    count++;
    System.out.println("count="+count);
    //count_str=String.valueOf(count);
    // milisec.setText(""+count);
    final String str = ""+count;
    runOnUiThread(new Runnable() {
        public void run() {
            milisec.setText(str);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:20:39.357

您不能从子线程修改视图/setText。只能从 UI 线程/主线程中访问视图。

从子线程内部试试这个

```
 runOnUiThread(new Runnable() {          
    @Override         
    public void run() {             
       count_increment(v);  
    }     
}); 
```

# mysql - 搜索带有重音字符的字段

> ID：13004894
> 
> 赞同：0
> 
> 时间：2012-10-22T04:14:15.413
> 
> 标签：mysql

我有一个存储特殊字符的字段，例如“Niterói”、“Eunápolis”等。

如何进行 mysql 搜索：

搜索词 : Niteroi
比赛 : Niterói

搜索词：Eunapolis
比赛：Eunápolis

目前，搜索“Niteroi”没有返回任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:26:04.130

排序规则`utf8_unicode_ci`应该将它们视为相同：

```
WHERE ... = "Niterói" COLLATE utf8_unicode_ci 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:27:09.760

```
 SELECT * FROM TABLE TABLEA TA
 WHERE CONVERT (TA.SEARCH_COLUMN USING ascii) = 'SEARCH_TERM'; 
```

# c# - 在选择复选框时对 gridview 列的值求和

> ID：13004908
> 
> 赞同：0
> 
> 时间：2012-10-22T04:17:09.717
> 
> 标签：c#, asp.net, gridview

我有一个价格列，显示选中行的总价格。最初我尝试使用选择按钮执行此操作，但没有成功，因此，我在 gridview 中添加了一个复选框。现在我需要当我检查一些行时，这些行的总和出现在标签上我厌倦了这段代码，但我得到了一个错误：

```
 double sum = 0;

    foreach (GridViewRow gvr in GridView1.Rows)
    {  
        CheckBox cb = (CheckBox)gvr.FindControl("Checkbox1"); 
        if (cb.Checked)
        {
            double amount = Convert.ToDouble(gvr.Cells[2].Text);
            sum += amount;
        }

        Label1.Text = sum.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:13:13.297

我假设您在网格之外进行所有这些工作，我的意思是您在页面上的某个位置通过单击运行此代码的某个按钮。正确的？？？如果是，那么您必须在代码中再包含一件事，那就是检查数据行...

双倍总和 = 0;

```
foreach (GridViewRow gvr in GridView1.Rows)
{  
 if(gvr.RowType == DataControlRowType.DataRow)
 {
    CheckBox cb = (CheckBox)gvr.FindControl("Checkbox1"); 
    if (cb.Checked)
    {
        //check wether the cell value is empty or not, if empty take a 0 instead...
        double amount = gvr.Cells[2].Text.Trim() != null && gvr.Cells[2].Text.Length>0 ? Convert.ToDouble(gvr.Cells[2].Text.Trim()) : 0;
        sum += amount;
    }

    Label1.Text = sum.ToString();
  }

} 
```

如果不是这种情况，那么您必须在每个复选框的 Change 事件中执行此操作。如果解决了问题，请告诉我问题，我很乐意为您提供帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:37:24.520

双倍总和 = 0;

```
foreach (GridViewRow gvr in GridView1.Rows)
{  
    CheckBox cb = (CheckBox)gvr.FindControl("Checkbox1"); 
    if (cb.Checked)
    {
        double amount = Convert.ToDouble(gvr.Cells[2].Text.replace("&nbsp",""));
        sum += amount;
    }

    Label1.Text = sum.ToString();

} 
```

# actionscript - 如何在 actionscript 的单行算法内计算 *= 运算符？

> ID：13004909
> 
> 赞同：0
> 
> 时间：2012-10-22T04:17:26.397
> 
> 标签：actionscript, operators

我正在尝试将一些算法转换为另一种语言，并且被困在几行代码中。我要转换的语言是 actionscript 并将其转换为 lua。

我遇到了这条线

```
return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b 
```

这是一样的吗

```
s = s*1.525
return c/2*(t*t*((s+1)*t - s)) + b 
```

还是一样

```
newS = s*1.525
return c/2*(t*t*((newS+1)*t - s)) + b 
```

所以一旦 *= 被调用， s 会在整个函数中发生变化，所以 s 的每个实例都是新值，还是只计算一次并且 s 保留它之前的值？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:02:32.770

赋值运算符在同一嵌套级别上从右到左进行评估。由于您的原始语句已`s*=1.25`包含在括号中，因此在加法、乘法等`*=`之前执行了赋值，因此，您的第一个变体是正确的变体。`1``t`

# input - 如何专门检测 Windows 8 上的触摸屏显示器？

> ID：13004911
> 
> 赞同：1
> 
> 时间：2012-10-22T04:17:39.207
> 
> 标签：input, windows-8, microsoft-metro, hid

我正在开发一个需要检测是否存在触摸屏的应用程序。我正在使用以下代码，它在大多数情况下都有效：

```
TouchCapabilities^ tc = ref new TouchCapabilities();

return tc->TouchPresent; 
```

问题是我有一台笔记本电脑，触摸板返回 true，没有触摸屏。我试图用以下代码检测是否存在触摸屏，但它永远不会在触摸屏部分内中断。我承认我对自己对 HID 的理解不是很有信心。

```
Windows::Foundation::Collections::IVectorView<PointerDevice^>^ devices = Windows::Devices::Input::PointerDevice::GetPointerDevices();

for (int i = 0; i < devices->Size; ++i)
{
    PointerDevice^ pd = devices->GetAt(i);

    PointerDeviceType pdt = pd->PointerDeviceType;
    unsigned int contacts = pd->MaxContacts;
    bool integrated = pd->IsIntegrated;

    for (int j = 0; j < pd->SupportedUsages->Size; ++j)
    {
        PointerDeviceUsage pdu = pd->SupportedUsages->GetAt(j);

        unsigned int usagePage = pdu.UsagePage;

        if (usagePage == 0x0D) // 0x0D is the Digitizer HID Usage Page
        {
            unsigned int usage = pdu.Usage;

            if (pdu.Usage == 0x04) // 0x04 is the Touch Screen HID Usage ID
            {
                 // Should be touch screen but never goes in here
            }
        }
    }
} 
```

有没有办法专门检测触摸屏？如果是这样，是否可以看到一些示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:47:46.377

[TouchCapabilities.TouchPresent](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.touchcapabilities.touchpresent.aspx)应该可以解决问题；但是，请注意，如果加载了 Visual Studio 模拟器，即使您在本地运行应用程序（即不在模拟器中），您的应用程序也会报告有触摸功能。

# cocos2d-iphone - 当 UIButton 在 cocos2d CCLayer 中时，如何确定 UIButton 拖动完成？

> ID：13004912
> 
> 赞同：1
> 
> 时间：2012-10-22T04:17:45.510
> 
> 标签：cocos2d-iphone, uikit, cclayer

我有一个 cocos2d CCLayer 类，它既有 CCSprites 又有 UIButtons。我希望玩家能够在屏幕上触摸和拖动 UIButtons，当手指松开时，我想执行一些操作。

这是我创建 UIButton 并添加到图层的代码片段 -

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(240, 200, 50, 50)];

[[[[CCDirector sharedDirector] openGLView] window] addSubview:button]; 

[button addTarget:self action:@selector(buttonMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside]; 
```

我可以在 cocos2d 层内移动 UIButton。我的问题是，我怎样才能知道手指何时从 UIButton 释放？

PS/我阅读了 Ray Wenderlich 在 cocos2d 中关于 UIView 的教程以及 Steffen Itterheim 的 Learn Cocos2d 游戏开发，但它们都没有涵盖如何管理对 CCLayer 内的 UIKit 元素的触摸，或者我认为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:08:35.943

您是否尝试过使用`UIControlEventTouchUpInside`/`UIControlEventTouchUpOutside`控制事件？

# symfony - 在（容器的）启动过程中在 Symfony 2 中加载额外的服务

> ID：13004916
> 
> 赞同：0
> 
> 时间：2012-10-22T04:18:01.840
> 
> 标签：symfony

我收到此错误消息：

```
[22-Oct-2012 06:03:24] PHP Catchable fatal error:  Argument 1 passed to Symfony\Component\DependencyInjection\Loader\FileLoader::__construct() must be an instance of Symfony\Component\DependencyInjection\ContainerBuilder, instance of pluginsProdProjectContainer given, called in .... 
```

在特定的行上，它如下所示：

```
$loader = new XMLFileLoader($container, new FileLocator($config_path)); 
```

这似乎是 SF2 自动生成并加载缓存文件的结果：pluginsProdProjectContainer.php 似乎扩展了容器：

```
class pluginsProdProjectContainer extends Container 
```

因此，当我将容器传递到 XMLFileLoader 时，传递的是 Container 的实例而不是 ContainerBuilder。我不太确定如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:40:19.390

您的问题可能是您正在尝试使用`Container`object 但您`XMLFileLoader`期望`ContainerBuilder`object 作为第一个参数

# php - Printf() 不如 PHP 中的 echo 可靠？

> ID：13004918
> 
> 赞同：2
> 
> 时间：2012-10-22T04:18:24.920
> 
> 标签：php, printf, echo

出于某种原因，我采用了 using `printf($var)`over using `echo $var`。我真的不知道为什么。

但是，如果我从变量输出字符串时遇到问题 - 如果我更改`printf($var)`为`echo $var`- 90% 的时间可以解决问题。

这种情况发生在我身上不止一次，有不同的错误，从**太少的参数**到只是回显一个空/空白字符串。

任何人都可以阐明为什么`printf()`似乎工作不如 可靠`echo`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T04:27:17.333

简短的回答，`printf($var)`除非您特别需要，否则请勿使用。

原因是`$var`作为第一个参数传递的被视为**格式字符串**，并且诸如`%s`和`%d`等具有**特殊含义**。在 C / C++ 中，这可能会导致分段错误，而在 PHP 中，相比之下，您会受到打击。

等价于`echo`or`print`是`printf('%s', $var)`; 它转换`$var`为一个字符串，然后输出它。

顺便说一句，`printf()`是一个函数，而`echo`和`print`是语言结构；因此，您可能会获得更好的性能`echo`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T04:20:09.203

printf — 输出一个格式化的字符串，print 返回一个值。它总是返回 1。以及 echo 的作用——输出一个或多个字符串

总是返回 1 似乎没有用。并且可以使用字符串连接或多次调用来模拟逗号分隔的参数列表

通过返回一个值，print 函数比 echo 函数稍微动态一些，并且 echo 函数稍微（非常稍微）快一些。该`printf`函数使用特殊分隔符将动态变量/任何内容插入到您想要的任何位置，例如`%s`, 或`%d`. 例如，`printf('There is a difference between %s and %s', 'good', 'evil')`将返回`'There is a difference between good and evil'`.

检查这个[**PHP：基准测试 echo vs. print vs. printf**](http://www.nutt.net/2004/12/09/php-benchmarking-echo-vs-print-vs-printf/)

和结果

看来 echo 和 print 在速度方面非常非常接近。每个命令的差异仅为 2/1,000,000 秒。它只是归结为个人喜好。我使用 echo 因为这是我首先使用的。当您分配一个变量时，打印速度似乎会下降，此时命令速度下降 1/100,000 秒，这仍然是相当小的。

表格上面的链接

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T04:24:25.663

`printf`与 using 非常不同`echo`，首先`printf`是一个返回值的函数，而`echo`通常称为“*语言构造*”。

的第一个参数`printf`应该是一个*格式字符串*，正如其名称所暗示的那样，用于格式化输出的字符串。

`echo`将按原样输出传递给它的“*参数*`printf`”（在变量插值之后），同时将根据第一个*format-string*运行，如前所述。

例如，尝试以下代码段并注意一些主要差异。

```
echo   "I like %s! hello ", "world", " /stackoverflow" ;
echo   "\n"
printf ("I like %s! hello ", "world", " /stackoverflow"); 
```

^(输出)

```
I like %s! hello world /stackoverflow
I like world! hello 
```

^(*使用我的BlackBerry*编写和编辑，对于任何格式错误，我们深表歉意..)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T04:25:23.383

echo - 输出一个或多个字符串

echo 实际上不是一个函数（它是一种语言结构），因此您不需要使用括号。echo（与其他一些语言结构不同）的行为不像函数，因此它不能总是在函数的上下文中使用。此外，如果您想向 echo 传递多个参数，则这些参数不能用括号括起来。

printf — 输出格式化字符串

返回输出字符串的长度

# ruby-on-rails-3 - 如果失败则恢复 Mongoid

> ID：13004924
> 
> 赞同：2
> 
> 时间：2012-10-22T04:19:41.283
> 
> 标签：ruby-on-rails-3, validation, error-handling, mongoid

我在 mongoid 中有一个验证，如果它在保存错误消息时失败，我想恢复它。

例子

```
if @thing.update_attributes(params[:thing])
  format.html { redirect_to @thing, notice: 'Thing was successfully updated.' }
  format.json { head :no_content }
else
  #revert the fields that have changed and keep @thing.errors
  format.html { render action: "edit" }
  format.json { render json: @thing.errors, status: :unprocessable_entity }   
end 
```

当我保存文档并重新插入时，似乎不想分配`@thing.errors = errors`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:31:27.317

您可以使用 Active Model Dirty 模块，请参见此处[http://api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

# url-rewriting - 在 IIS 7.5 上的 Mediawiki URL 中显示冒号

> ID：13004926
> 
> 赞同：4
> 
> 时间：2012-10-22T04:20:01.093
> 
> 标签：url-rewriting, hyperlink, iis-7.5, mediawiki, urlencode

在试图让我的本地 IIS 服务器不编码 MediaWiki 链接中的冒号（`http://localhost/wiki/Category:People`变成`http://localhost/wiki/Category$3APeople`）后，我开始认为这样的壮举是不可能的。特别有趣的是，两个链接在输入时都有效，只是整个 wiki 中的所有链接都显示为编码版本。由于两者都有效，这纯粹是一种视觉上的烦恼，但如果可能的话，我想解决一个。

作为替代方案，我想知道是否可以仅更改链接的显示。如果 MediaWiki/IIS 如此坚持在 URL 中编码冒号，那很好，但是无论实际链接是什么，是否可以向用户显示冒号？

我知道 Windows 服务器上的 url 中不允许使用冒号，因为它们会打开对数据文件流的访问，但由于这是在我的本地计算机上运行的私有 wiki，如果可能，我不会反对禁用此安全预防措施。

我最初在 6 月份在 MediaWiki 用户论坛上发布了这个问题，但在解决问题方面没有得到任何帮助。该线程可以在[http://www.mwusers.com/forums/showthread.php?18722-IIS-7.5-Percent-encoding-all-colons-in-URLs](http://www.mwusers.com/forums/showthread.php?18722-IIS-7.5-Percent-encoding-all-colons-in-URLs)找到。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:21:36.770

MediaWiki 在 IIS 7 上对冒号进行转义是针对[IIS 7.5 中的一个错误的](http://forums.iis.net/p/1165517/1936321.aspx)[特意解决方法](https://bugzilla.wikimedia.org/show_bug.cgi?id=22709)，该错误会导致包含未转义冒号和非 ASCII 字符组合的 URL 在某些情况下被破坏。

eduncan911 描述的客户端 jQuery 解决方法应该没问题，但正确的解决方案（据我所知，鉴于该错误似乎从未在 IIS 7.5 中修复过）可能是升级到 Windows Server 2012 和IIS 8.0（或其他一些没有出现该错误的 HTTP 服务器）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T04:47:27.387

编辑：我原来的答案还在下面，但我在“假设”方面错了。Ilmari 的回答中描述了这个问题。这是因为 IIS 7.0/7.5 在将带有冒号的 url 分类为格式错误/黑客尝试时存在 Microsoft 确认的错误（事实并非如此）。他建议升级到 IIS 8.0 (Windows Server 2012) 来解决它，尽管这还没有得到证实。

我正在将我的机器移到 Windows Server 2012 上，一旦我确认它可以正常工作，我会回来更新这个答案。

下面的原始答案。

--

据我所知，它是在 Windows 上运行的 PHP 5.4，具有相同的设置和配置文件，我的 RedHat 机器没有这样做，而 IIS 有。FastCGI 也可能是一种解决方法。

我最初尝试创建一个出站规则，但不得不创建很多条件来绕过 MediaWiki 的特殊 url 要求。

因此，我只是暂时将这个 jquery 片段放入其中。

```
$('a').each( function() {
  this.href = this.href.replace(/%3A/g, ":");
}); 
```

当我开始使用站点地图（这是一个新安装）时，我会确保它们也被解析出来。

另请注意，我在使用冒号时也遇到了一些安全违规错误，因为 .NET ass-u-mes 认为冒号是一个坏字符。要解决这个问题，请将其添加到在该目录中运行的 web.config 文件中：

```
<system.web>
    <httpRuntime requestValidationMode="2.0" 
        requestPathInvalidCharacters="&lt;,>,*,%,&amp;,\" />
</system.web> 
```

# xpages - XPages - 多次点击创建多个文档

> ID：13004932
> 
> 赞同：0
> 
> 时间：2012-10-22T04:20:34.940
> 
> 标签：xpages

我的表单有两个提交按钮——一个用于提交，一个用于更新文档。有一个在 PostSaveDocument 事件上运行的代理。在这个代理中，有一堆代码发送一些警报，并设置一些文档值，这取决于它是新文档还是文档更新。

当用户多次单击按钮时，例如双击或只是进入skitzo 并单击10 次，则生成该数量的文档。在代码中，它创建了一个参考编号，该编号与单击按钮的次数是连续的 - 因此它正在排队单击它的次数。

我尝试了两种选择：

*   单击按钮时运行以下代码，但它不会停止多次单击。

    ```
    var buttonComp = getComponent("button4");
    buttonComp.setDisabled(true); 
    ```

*   检查了这篇文章[http://dontpanic82.blogspot.com.au/2010/06/xpages-avoid-saving-duplicate-documents.html](http://dontpanic82.blogspot.com.au/2010/06/xpages-avoid-saving-duplicate-documents.html)

但是，两者都不适合我。我认为这是因为它不处理标准的提交表单，但不确定。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:26:10.867

我完全同意 Stephan 将代理转换为 SSJS 的观点。

但是，如果您无法更改该代码，请尝试使用[忙按钮](http://dojotoolkit.org/reference-guide/1.8/dojox/form/BusyButton.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:40:01.737

首先：如果可以避免，请不要使用代理。启动代理运行时然后再次将其关闭是非常缓慢的。您最好用 SSJS 编写代码。其次，您必须在 onClick 事件中编写禁用代码（或更好的可见 = false）（查找客户端代码选项卡）。另一种选择是显示一个带有“处理”的灯箱，该灯箱覆盖按钮而不禁用它。

# objective-c - 如何替换Objective-C中方法的代码？

> ID：13004936
> 
> 赞同：1
> 
> 时间：2012-10-22T04:20:58.770
> 
> 标签：objective-c

我有一个库，需要更改方法的代码。但我无法更改库的代码。如何替换库代码之外的方法代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:25:08.443

如果我正确理解你的问题，你会想要做 Method Swizzling。

由于 Objective-C 使用消息传递，方法调配是修改方法名称（选择器）与其实现之间的映射的过程。

[此页面包含有关如何执行 Method Swizzling 的信息](http://cocoadev.com/wiki/MethodSwizzling)。

# c# - 另一个...由于其保护级别而无法访问...问题

> ID：13004937
> 
> 赞同：4
> 
> 时间：2012-10-22T04:21:00.357
> 
> 标签：c#, inheritance

如果在其他有关此错误的问题中确实存在此问题，我深表歉意，但我已经查看了 TONS 并且仍然被抛出。所以我老了“......由于它的保护级别而无法访问”错误。当这个错误出现时，另一个错误也会出现，我认为这是问题的真正症结所在。我得到“SS.Spreadsheet”没有定义构造函数，这意味着我可能没有正确实现从抽象类继承的构造函数。或类似的规定。

```
public abstract class AbstractSpreadsheet
{
    public Func<string, bool> IsValid { get; protected set; }

    public Func<string, string> Normalize { get; protected set; }

    public string Version { get; protected set; }

    public AbstractSpreadsheet(Func<string, bool> isValid, Func<string, string> normalize, string version)
    {
        this.IsValid = isValid;
        this.Normalize = normalize;
        this.Version = version;
    }
  ...
} 
```

我的课：

```
class Spreadsheet : AbstractSpreadsheet
{

    public Spreadsheet()
        : base(v => true, s => s, "default")
    {
    }
    ...
} 
```

我也尝试过一些类似的东西：

```
 public Spreadsheet()
        : base(v => true, s => s, "default")
    {
        IsValid = v => true;
        Normalize = s => s;
        Version = "default";
    } 
```

根据我在这里看到的答案。但仍然没有（并且考虑到我的理解，这无论如何都行不通）。

抽象类是给我的，不能更改。

我是否需要在我的电子表格类中实现 IsValid、Normalize 和 Version 覆盖样式方法？或者类似的东西....如果是这样，怎么做？

我对编程世界还是很陌生，对 C# 也很陌生，所以如果有人能在正确的方向上推动我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:26:10.713

由于您的示例中的所有内容都是公开的，因此该错误可能适用于类本身。尝试将电子表格类公开，看看它是否修复了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:25:29.763

尝试`Spreadsheet`公开：

```
public class Spreadsheet : AbstractSpreadsheet 
{
    ...
} 
```

您不需要设置`IsValid`,`Normalise`或`Version`在您的构造函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T04:29:54.100

```
public class Spreadsheet : AbstractSpreadsheet
   {

       public Spreadsheet()
           : base(v => true, s => s, "default")
       {
       }

   } 
```

`Spreadsheet`上课_`public`

# csv - 获取行索引而不是csv文件中的列

> ID：13004943
> 
> 赞同：4
> 
> 时间：2012-10-22T04:21:42.800
> 
> 标签：csv, python-3.x, tuples

首先，我只想说我对 Python 或任何类型的编程都*非常陌生。*另外，我不知道该放什么作为标题，对不起。所以我打开了这个 csv 文件，然后我剥离并拆分了逗号，然后只是为了检查，我把它打印出来，它给了我这样的结果（只是一些示例数字）：

```
['1','2','3','4']
['5','6','7','8']
['9','10','11','12'] 
```

我想知道是否有一种方法可以索引行而不是列，例如如果我尝试打印 my_list[0] 它会给我 1 5 9

而不是 ['1','2','3','4']。我的实际问题是我需要将 csv 数据转换为一行元组，其中元素转换为整数，并且能够选择任何行进行进一步处理。

我不熟悉我在这个网站上看到的很多模块。如果可能的话，我想要一个非常基本的编码帮助。（虽然有时效率低下）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:03:20.697

您可以使用一个相当简单的列表推导将您的列表转换为您想要的格式（在从 csv 获取列表之后），`zip(*my_list)`用于转置它：

```
>>> my_list = [['1','2','3','4'],
...            ['5','6','7','8'],
...            ['9','10','11','12']]
>>> [[int(x) for x in row] for row in zip(*my_list)]
[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:25:55.370

此答案遵循您对 stranac 提供的答案的评论，并尝试根据需要`my_list`创建

```
my_list = []
with open('Test.csv', 'r') as csvfile:
    for lines in csvfile:
        temp_lines = lines.strip().split(',')
        my_list.append(temp_lines)

print(my_list) 
```

但是，我建议您使用 python 中已经可用的 csv 模块。[你可以在这里](http://docs.python.org/py3k/library/csv.html)看到一个基本的例子

你可以这样做：

```
import csv
my_list = []
with open('Test.csv') as csvfile:
    spamreader = csv.reader(csvfile)
    for row in spamreader:
        my_list.append(row)
print(my_list) 
```

# javascript - javascript浮动数据

> ID：13004944
> 
> 赞同：2
> 
> 时间：2012-10-22T04:21:52.567
> 
> 标签：javascript, json, flot

鉴于 myData 是 JSON var，如下所示：

```
({0:{qID:"3", id:"1", shortText:"Leisure", OpiCount:"0"}, 
  1:{qID:"3", id:"2", shortText:"Business", OpiCount:"3"}, 
  2:{qID:"3", id:"3", shortText:"University visit", OpiCount:"1"}, length:3}) 
```

转换为浮点数据数组：

```
var data = [];
myData.each(function(i,v) {  
    data[i] = { label: v.shortText, data: v.OpiCount } ; 
}) 
```

上面的代码因为**`v.shortText`**. 我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:58:09.700

感谢#Jan 和#diEcho，我想通了。

我的问题是 float 需要数字数据。只需添加 parseFloat(v.OpiCount)

```
var data = [];
myData.each(function(i,v) {  
    data[i] = { label: v.shortText, data: parseFloat(v.OpiCount) } ; 
}) 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:02:36.280

首先，这不是有效的 JSON。属性名称应该有引号，例如“qID”：“3”。也不应该有任何括号。JSONP 中使用圆括号。

那么接下来的问题是 JSON 是如何存储的呢？通常 json 作为字符串传输，因此它在发送之前被序列化，然后在另一端解包。所以你需要弄清楚它的来源。您提供的“json”看起来像是硬编码的，但作为 json 对象，您可以在此处看到运行：

[http://jsfiddle.net/VYGY5/](http://jsfiddle.net/VYGY5/)

因此，您需要弄清楚它的来源和格式，并确保 JSON 有效。如果它是一个字符串，您可以使用 jQuery.parseJSON 之类的东西将 JSON 字符串转换为 javascript 对象，然后转换为浮点数组。否则，只需使用该对象。

接下来一个浮点数组是一个数组数组。所以它应该是这样的：

```
[ [0,0], [0,2] ]. 
```

所以你的代码应该是：

```
data[i] = [pointX, pointY]; 
```

确保您阅读了与浮点格式相关的文档页面：

[https://github.com/flot/flot/blob/master/API.md](https://github.com/flot/flot/blob/master/API.md)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:28:39.980

我在翻译文本以进行图像处理时遇到了这个问题...我所做的是在服务器端进行 base_64 编码并在客户端进行 javascript [Base64](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript#246813 "Base64 类")解码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T04:39:36.050

[`.each`](http://api.jquery.com/jQuery.each/)方法在**jQuery**中并且它的工作完美，试试

```
var myData = ({0:{qID:"3", id:"1", shortText:"Leisure", OpiCount:"0"}, 
  1:{qID:"3", id:"2", shortText:"Business", OpiCount:"3"}, 
  2:{qID:"3", id:"3", shortText:"University visit", OpiCount:"1"}, length:3});
var data = [];
$.each(myData, function(i,v) {
    console.log(v);
    data[i] = { label: v.shortText, data: v.OpiCount } ; 

})
    console.log(data);
}) 
```

# android - 我应该选择什么 AWS 开发工具包？

> ID：13004952
> 
> 赞同：2
> 
> 时间：2012-10-22T04:23:40.000
> 
> 标签：android, ios, amazon-ec2, amazon-web-services

我是亚马逊网络服务的新手。我有一个任务是设置然后构建一个为 Mac OS、iOS、Android 客户端提供 API 的 Web 服务。有一些 API 和数据库需要保持安全。我看到 AWS 支持多种平台，例如 Java、.Net、PHP，... 它还支持许多数据库管理系统。还没有，有 2 个适用于 Android 和 iOS 应用程序的特殊 SDK。

那么，我应该选择什么（Java、.Net、PHP、...）来执行我的任务？AWS 是否支持所有网络服务协议？它是否支持安全的网络服务？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:38:35.627

AWS 不提供安全的 Web 服务 - 它提供了您可以在其上运行安全 Web 服务的平台。您应该选择您最有经验的平台/语言/工具来使用您的 Web 服务和数据库构建您的应用程序。您应该检查您是否可以在 AWS 上运行您需要的所有部分（这很可能）。AWS 可以通过防火墙和 ELB 存储的证书来帮助提高安全性。

对于如此广泛的访问（ios、android 等），我可以推荐基于 REST 的 Web 服务，因为它们很容易被各种客户端访问（但这确实取决于你试图让你的客户端做什么）。确保您从知名提供商处购买 SSL 证书（否则您的客户可能无法连接到您的安全服务）。

祝你好运。

# asp.net - 使用 linq to sql 获取每个用户的最新记录日期

> ID：13004956
> 
> 赞同：0
> 
> 时间：2012-10-22T04:24:05.380
> 
> 标签：asp.net, linq-to-sql

我在这里遇到了与 OP 类似的情况：[如何查询 sql 以获取每个用户的最新记录日期](https://stackoverflow.com/questions/2411559/how-do-i-query-sql-for-a-latest-record-date-for-each-user)

接受的答案对我有用，但现在我需要在 ASP.NET 中的 Linq to SQL 中实现相同的东西。这是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:38:44.233

您可以按如下方式使用它

```
from t in Users
join tm in Users
on t.UserName equals tm.UserName
where t.Date == (Users.Where(a=>a.UserName == t.UserName).Select(b=>b.Date)).Max()
group t by new
   {
       t.UserName,
       t.Date,
       t.Value
    } into g   
select new 
    {
      g.Key.UserName,
      g.Key.Date,
      g.Key.Value
     } 
```

# java - 如何使用 maven 构建可运行的 JavaFX 应用程序？

> ID：13004958
> 
> 赞同：4
> 
> 时间：2012-10-22T04:24:23.133
> 
> 标签：java, maven, javafx

我是 JavaFX 的新手。我使用 maven 创建了一个 Hello World 项目。当我在 Eclipse 中运行它时它工作正常。

```
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) throws Exception {
    primaryStage.setTitle("Hello World!");
    Button btn = new Button();
    btn.setText("Say 'Hello World'");
    btn.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {
            System.out.println("Hello World!");
        }
    });
    StackPane root = new StackPane();
    root.getChildren().add(btn);
    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
} 
```

![你好世界](../Images/f39f64b43a9ea3e32014eb416b4eb63c.png)

我找到了[部署教程](http://docs.oracle.com/javafx/2/get_started/basic_deployment.htm)，但是当我的程序带有 maven 时，我不知道如何构建它。

当我尝试使用 build.fxbuild 构建应用程序时，出现此错误。

```
构建文件：C:\test\project\workspace\javafx-helloworld\build\build.xml

设置暂存区：
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\externalLibs
        [复制] 将 1 个文件复制到 C:\test\project\workspace\javafx-helloworld\build\externalLibs
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\project
        [复制] 将 1 个文件复制到 C:\test\project\workspace\javafx-helloworld\build\project
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\projectRefs

编译：
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\build\src
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\build\libs
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\build\classes
        [复制] 将 1 个文件复制到 C:\test\project\workspace\javafx-helloworld\build\build\libs
        [复制] 将 1 个文件复制到 C:\test\project\workspace\javafx-helloworld\build\build\src
       [javac] 将 1 个源文件编译到 C:\test\project\workspace\javafx-helloworld\build\build\classes

初始化外汇任务：
     [taskdef] 无法从资源 com/sun/javafx/tools/ant/antlib.xml 加载定义。找不到。

部署：
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\dist
       [mkdir] 创建目录：C:\test\project\workspace\javafx-helloworld\build\dist\libs
        [复制] 将 1 个文件复制到 C:\test\project\workspace\javafx-helloworld\build\dist\libs

**构建失败
C:\test\project\workspace\javafx-helloworld\build\build.xml:93：问题：无法创建任务或键入 javafx:com.sun.javafx.tools.ant:resources
原因：名称未定义。
行动：检查拼写。
行动：检查是否已声明任何自定义任务/类型。
行动：检查任何/声明已经发生。
此命名空间中尚未定义任何类型或任务**

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T22:55:44.300

现在有一个用于 JavaFX 的 maven 插件：

[https://github.com/zonski/javafx-maven-plugin](https://github.com/zonski/javafx-maven-plugin)

```
<plugin>
    <groupId>com.zenjava</groupId>
    <artifactId>javafx-maven-plugin</artifactId>
    <version>1.1</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>package</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <mainClass>[put your application main class here]</mainClass>
        <bundleType>ALL</bundleType>
    </configuration>
</plugin> 
```

# iphone - 如何创建 Jetpack Joyride 大奖杠杆动画

> ID：13004963
> 
> 赞同：2
> 
> 时间：2012-10-22T04:24:58.877
> 
> 标签：iphone, ios, uianimation

只是想知道是否有人知道如何重新创建触摸杆动作？

[http://www.wired.com/geekdad/wp-content/uploads/2011/08/JJ-jackpot.jpg](http://www.wired.com/geekdad/wp-content/uploads/2011/08/JJ-jackpot.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:01:55.923

不知道确切的动画是什么，但如果您必须拉下控制杆来激活而不只是单击控制杆，那么您需要获取初始触摸位置并将其与最终触摸位置进行比较。当前触摸在 2 个开始和结束位置之间的百分比决定了正在使用的动画帧。

因此，假设您的杠杆动画中有 10 帧：

```
function lengthOf(a, b)
    local width, height = b.x-a.x, b.y-a.y
    return (width*width + height*height)^0.5
end

local startBox, endBox
local beingPulled = false
if isOver(touchPos, startBox) and touch.phase == "began" then
   beingPulled = true
end
if touch.phase == "moved" then
   if beingPulled then
      local lengthA = lengthOf(touch, startBox)
      local lengthB = lengthOf(touch, endBox)
      local totalLength = lengthA+lengthB
      local percentage = totalLength/lengthA

      lever:setFrame( math.ceil(percentage*10) )
   end
end
if touch.phase == "ended" then
   lever:resetPosition()
   beingPulled = false
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:19:41.970

您将需要 3d 对象，它可以稍微旋转 - 以制作该动画，或者您可以在动画对象时预先渲染所有动画帧（例如 - 您有一个“杠杆”对象）。

我做过类似的事情——我有一个旋转立方体的预渲染图像。我将所有这些图像设置为动画帧，如下例所示： http: [//appsamuck.com/day2.html](http://appsamuck.com/day2.html)

我在此上方放置了不可见的滚动视图`UIImageView`。然后，什么时候`scrollViewDidScroll`被调用 - 我只是改变了当前的`UIImageView`动画帧。

所以在这种情况下 - 它可能是一个`UIScrollView`，它在 - 例如：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate 
```

将 setContentOffset`CGPoint(0,0)`指向。（带动画）。

那是我的提议。祝你好运！

# ruby - 使用 before(:all) 时跨示例缓存的 let() 值？

> ID：13004965
> 
> 赞同：5
> 
> 时间：2012-10-22T04:25:09.373
> 
> 标签：ruby, testing, rspec

我有一个规格文件，如下所示：

```
# foo_spec.rb
class Foo
end

describe Foo do
  let(:foo) { 'foo' }
  subject { bar }

  # before(:all) { foo } # The seond example fails if uncomment this line.

  describe 'test one' do
    let(:bar) { 'one' }
    it        { should == 'one' }
  end

  describe 'test two' do
    let(:bar) { 'two' }
    it        { should == 'two' }
  end
end 
```

这两个示例都按预期通过。但是，如果我取消注释 before(:all)，第二个示例将失败：

```
1) Foo test two
     Failure/Error: it        { should == 'two' }
       expected: "two"
            got: "one" (using ==) 
```

AFAIK，let() 的值将在同一示例中的多个调用中缓存，但不会跨示例缓存。所以不太确定为什么在使用 before(:all) 时它会失败第二个示例。

我正在使用 ruby​​ 1.9.2p180 和 rspec 2.6.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:58:41.257

这是rspec的[一个已知问题：](https://github.com/rspec/rspec-core/issues/500)

> `let`s 不是为与`before(:all)`块一起使用而设计的

（从关于该问题的[另一张票中](https://github.com/rspec/rspec-core/issues/656)[引用](https://github.com/rspec/rspec-core/issues/656#issuecomment-7380798)rspec 贡献者 myronmarston （这似乎与您在此处描述的行为非常相似））。

# php - 从父子关系构建关联数组

> ID：13004966
> 
> 赞同：1
> 
> 时间：2012-10-22T04:25:10.110
> 
> 标签：php, mysql, recursion

我一直在玩一个我从**[HERE](https://stackoverflow.com/questions/3776798/php-array-recursion)**获得的几乎对我有用的函数，但它添加了一个我不想要的额外数组。信息存储在我的数据库中，如下所示：

![在此处输入图像描述](../Images/b1b63c364cbfccb39f13912a3bf714df.png)

**方法**

```
private function buildCategories($array,$parent)
{
    $result = array();
    foreach($array as $row)
    {
        if($row['parent'] == $parent)
        {
            $result[$row['category_name']] = $this->buildCategories($array,$row['category_id']);
        }
    }
    return $result;
}
$json = json_encode($this->buildCategories($array,NULL));
return $json; 
```

我要这个：

```
{"reloading":{"components","presses and dies","tumblers & scales","tools & accessories","shotshell reloading"} 
```

但我得到的是：

```
{"reloading":{"components":[],"presses and dies":[],"tumblers & scales":[],"tools & accessories":[],"shotshell reloading":[]} 
```

**注意：**我问了一个类似的问题，但它不是建立一个关联数组。由于这不像我最初问的那样，我认为需要另一个线程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T04:34:21.523

你可以得到这个：

```
{"reloading":["components","presses and dies","tumblers & scales","tools & accessories","shotshell reloading"]} 
```

代码：

```
private function buildCategories($array,$parent) 
{
    $result = array();
    foreach($array as $row) {
        if($row['parent'] == $parent) {
            if ($row['parent'] == NULL) {
                $result[$row['category_name']] = $this->buildCategories($array,$row['category_id']);
            } else {
                $result[] = $row['category_name'];
            }
        }
    }
    return $result; 
} 
```

# xcode - 为什么我在项目中看不到extern函数？

> ID：13004969
> 
> 赞同：1
> 
> 时间：2012-10-22T04:25:31.730
> 
> 标签：xcode, static, symbols

在我的静态库项目（目标：sdk.a）中，我使用了这样的外部函数：

```
// in the PlatformUnity.h file
extern "C"{
    extern UIView * UnityGetGLView();  
    extern UIViewController * UnityGetGLViewController();

}

// in the PlatformUnity.mm file (*.mm NOT the *.m)

UIView * funcA(){
    return UnityGetGLView();
}

UIViewController * funcB(){
    return UnityGetGLViewController();
} 
```

在另一个名为 Unity-iPhone.xcodeproj 的项目中，我使用了 SDK.a。并且有一个名为 AppController.mm 的文件包含以下代码：

```
static UIViewController* sGLViewController = nil;
UIViewController* UnityGetGLViewController()
{
   return sGLViewController;
}
static UIView* sGLView = nil;
UIView* UnityGetGLView()
{
    return sGLView;
} 
```

当我构建 Unity-iPhone.xcodeproj 时，它告诉我它找不到函数 UnityGetGLView()。下面的链接错误：

```
Undefined symbols for architecture armv7:
  "_UnityGetGLViewController", referenced from:_funcB in SDK.a(PlatformUnity.o)
  "_UnityGetGLView", referenced from:_funcA in SDK.a(PlatformUnity.o) 
```

这两个函数确实是在 AppController.mm 中定义的，但是为什么链接的时候找不到呢？Unity-iPhone.xcodeproj 的另一个链接器标志如下：

```
-all_load -weak_framework CoreMotion -weak-lSystem 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:00:35.600

我能够解决这个问题。原因是我没有将 extern "C" 添加到 "UnityGetGLViewController" 方法中。编译器将其编译为 C++ 函数，但实际上它必须编译为 C 函数。

即使用以下代码片段

```
extern "C"
{
    extern UIViewController* UnityGetGLViewController();
} 
```

# air - 使用管理员启动 Adob e air 应用程序 (HTML)

> ID：13004970
> 
> 赞同：0
> 
> 时间：2012-10-22T04:25:32.150
> 
> 标签：air

在 Windows 上，如果我将 air 应用程序安装在**C:\**磁盘中，当我运行该应用程序时，它无法创建 sqlite 数据库并给出**错误 #3125**：</p>

```
 SQLError: 'Error #3125: Unable to open the database file.', 
     details:'Connection closed.', operation:'open', detailID:'1001' 
```

如果我以管理员身份运行应用程序或将其安装在**D:\**磁盘中，则不会出现此类错误。

那么，有没有办法让空中应用程序随时以管理员运行？并且显示 UAC 对话框就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:25:36.520

可能如果你想在 AIR 中创建 sqlite 数据库文件。在 applicationStorageDirectory 中创建数据库文件而不是 c:\ 或 d:\ 也不要创建 applicationDirectory （安装目录，因为会引发安全/权限错误）。这样你就可以避免所有错误.

# c# - 找不到 POP3 服务器

> ID：13004971
> 
> 赞同：1
> 
> 时间：2012-10-22T04:25:36.003
> 
> 标签：c#, pop3

这里的任何人都可以帮我解决异常错误“找不到服务器”。我相信我设置的所有参数都是正确的，但我想知道为什么仍然会出现异常。Tq

这是我的代码的一部分：

```
private void button_extract_Click(object sender, RoutedEventArgs e)
{
  HeadersFromAndSubject("pop@gmail.com",995,true, textbox_email_retriever.Text, 
    passwordBox_Receiver.SecurePassword.ToString(), 10);
}

public static void HeadersFromAndSubject(string hostname, int port, bool useSsl, 
  string username, string password, int messageNumber)
{
  using (Pop3Client client = new Pop3Client())
  {
    client.Connect(hostname, port, useSsl); //error in this line
    client.Authenticate(username, password);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:32:49.140

应该使用下面的服务器名称，我不认为它不是gmail帐户将其作为邮件ID格式，仅用于身份验证我们应该使用邮件ID，试试这个

```
 pop.gmail.com" 
```

而不是这个

```
 pop@gmail.com 
```

如果错了请纠正我

# android - 如何在renderscript和android框架之间交换数据？

> ID：13004972
> 
> 赞同：5
> 
> 时间：2012-10-22T04:25:43.147
> 
> 标签：android, renderscript

我是渲染脚本的新手。我正在尝试使用渲染脚本添加两个数组元素。

我可以通过`invoke_add`从我建议使用的渲染脚本返回到 Android 框架的方法 将值从 Android 传递给渲染脚本`rsSendToclient()`。

我如何使用`rsSendToClient`或任何其他方式回到 android 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:27:54.683

您必须`rsSendToClient(1, &data, sizeof(data));`在脚本中使用并解码 Java 中的数据，如下所示：

```
RSMessageHandler l_resHandler = new RSMessageHandler()
{
    @Override
    public void run()
    {
        switch (mID)
        {
            case 1:
            {
                // Handle mData 

            }
            break;
            default: super.run();
                break;
        }
    }

 };
 mRS.setMessageHandler(l_resHandler); 
```

[但正如我在这里](https://stackoverflow.com/questions/13827307/decoding-data-in-java)问的那样，我还不能解码这个值

# c# - C#中的字母数字排序

> ID：13004981
> 
> 赞同：4
> 
> 时间：2012-10-22T04:27:01.540
> 
> 标签：c#, algorithm, sorting, alphanumeric

我有这样的CSV数据：

编号；版本
1；AA.1
1；A01.1
1；A01.2
1；Z.7

在这里，我需要对 Version 列进行降序排序，如下所示：

编号；版本
1；AA.1
1；Z.7
1；A01.2
1；A01.1

因此，如果您看到，Z.7 条目应该在 AA.1 之后。基本上降序排序应该像这样：

排序版本：

BB
AA
Z
C
B
A

我已经尝试过 http://www.DaveKoelle.com 上讨论的 Alphanum 算法[以及 http://www.codeproject.com/Articles/22517/Natural-Sort-Comparer](http://www.DaveKoelle.com)[上](http://www.codeproject.com/Articles/22517/Natural-Sort-Comparer)的自然排序比较器 。除了上面提到的排序之外，它做了我想要的一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:29:12.720

因此，看起来您需要按照 CSV 文件中的一些自定义逻辑进行排序。要执行此操作，您必须`IComparer<string>`在一个类上实现并[`Compare`](http://msdn.microsoft.com/en-us/library/xh5ks3b3.aspx)根据您的要求实现该方法。看起来在您的情况下，您需要首先将字符串分成两部分，字母部分和数字部分（使用正则表达式），然后首先比较字符串，如果两者相同，则比较数字部分并相应地返回值。

然后，您可以使用此类`Comparer`对它们进行排序。

**更新**

代码示例

```
public class CustomStringComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        int? result;
        if (AnyParamIsNull(x, y, out result))
        {
            return result.Value;
        }

        string x1, y1;
        double x2, y2;
        SplitInput(x, out x1, out x2);
        SplitInput(y, out y1, out y2);
        if (x1.Length == y1.Length)
        {
            result = string.Compare(x1, y1);
            if (result.Value == 0)
            {

                if (x2 < y2)
                {
                    return -1;
                }
                else if (x2 > y2)
                {
                    return 1;
                }
                else
                {
                    return 0;
                }

            }
            else
            {
                return result.Value;
            }
        }
        else
        {
            //To make AA before Z when desending
            return x1.Length - y1.Length;
        }

    }

    private bool SplitInput(string input, out string alphabets, out double number)
    {
        Regex regex = new Regex(@"\d*[.]?\d+");
        Match match = regex.Match(input);
        if (match.Success)
        {
            number = double.Parse(match.Value, CultureInfo.InvariantCulture);
            alphabets = input.Replace(match.Value, "");
            return true;
        }
        else
        {
            throw new ArgumentException("Input string is not of correct format", input);
        }
    }

    private bool AnyParamIsNull(string x, string y, out int? result)
    {
        result = null;
        if (x == null)
        {
            if (y == null)
            {
                // If x is null and y is null, they're 
                // equal.  
                result = 0;
                return true;
            }
            else
            {
                // If x is null and y is not null, y 
                // is greater.  
                result = -1;
                return true;
            }
        }
        else
        {
            // If x is not null... 
            // 
            if (y == null)
            // ...and y is null, x is greater.
            {
                result = 1;
                return true;
            }
        }
        return false;
    }
} 
```

使用此比较器

```
 List<string> input = new List<string>()
        {
            "AA.1",
            "A01.1",
            "A01.2",
            "Z.7"
        };

        input.Sort(new CustomStringComparer());
        //To sort decending
        input.Reverse(); 
```

**注意：我已经证明上面的代码是正确的，否则是不正确的。可能存在一些边缘情况，它可能无法按预期工作**

# ajax - 模型绑定来自 KendoUI Grid 的排序字段

> ID：13004986
> 
> 赞同：5
> 
> 时间：2012-10-22T04:28:25.477
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, model-binding, kendo-ui

我正在使用 KendoUI Grid 来显示数据。我的服务器分页工作就像一个魅力。kendo 网格中的每个页面更改都是对服务器的新 ajax 请求，服务器返回正确的数据页面。我现在正在尝试进行服务器端排序，但我无法让模型绑定绑定到排序值。

这是来自 Kendo Grid 的请求的样子：

![](../Images/5e0c524be0cea7c492ded87d40600c76.png)

我的操作方法如下所示：

```
public JsonResult GetReports(int pageSize, int skip, List<KendoSort> sort)
{
    // sort is not being populated with the right data.
} 
```

KendoSort 是一个自定义类：

```
public class KendoSort
{
    public string Field { get; set; }
    public string Dir { get; set; }
} 
```

我知道我做的不对。我的操作方法应该如何正确捕获为排序提供的数据？屏幕截图仅显示排序集合中的单个项目，但网格可以传递更多。例如，它还可能包含一个额外的排序：

```
sort[1][field]: reportName
sort[1][dir]: asc 
```

基本上它会说“按id升序排序，然后按reportName升序排序”。我怎样才能将这些数据放入我的操作方法中，而不必四处寻找`Request`并手动解析参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T08:33:57.587

ASP.NET MVC 模型绑定器不理解像`sort[0][field]`. 它只知道`sort[0].field`哪个是不幸的，因为`jQuery.ajax`以前一种格式提交嵌套对象。

有两种方法可以解决问题：

1.  为 ASP.NET MVC 使用 Kendo UI Complete。它带有用于网格请求的内置模型。更多信息可以在[这里](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)找到。
2.  创建一个[parameterMap](http://docs.kendoui.com/api/framework/datasource#transportparametermap-function)并翻译排序表达式：

    ```
    parameterMap: function(options) {
         var result = {
           pageSize: options.pageSize,
           skip: options.skip
         };

         if (options.sort) {
             for (var i = 0; i < options.sort.length; i++) {
                result["sort[" + i + "].field"] = options.sort[i].field;
                result["sort[" + i + "].dir"] = options.sort[i].dir;
             }
         }

         return result;
    } 
    ```

* * *

### 来自问题作者的更新：

我确实最终使用了参数映射，但我没有重新构造排序字段，而是简单地对选项进行字符串化并在 CRUD 传输上指定 contentType。只要指定了 contentType，模型绑定器就知道要绑定到字符串化的 JSON。

```
transport: {
    read: {
        url: '...',
        type: 'POST',
        contentType: 'application/json'
    },
    update: {
        url: '...',
        type: 'POST',
        contentType: 'application/json'
    },
    destroy: {
        url: '...',
        type: 'POST',
        contentType: 'application/json'
    },
    create: {
        url: '...',
        type: 'POST',
        contentType: 'application/json'
    },
    parameterMap: function (options, type) {
        return JSON.stringify(options);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T19:20:25.437

我从另一个线程使用 找到了答案`IDictionary<string, string>[] sort`，这似乎是在服务器端捕获排序标准的最优雅和最干净的方式。如示例代码所示，我没有使用自定义模型绑定器。我只是使用 IDictionary 数组捕获排序标准，然后将该标准应用于我自己的数据源。这是该讨论线程的链接：[使用 IDictionary 数组捕获 Kendo UI 排序标准](https://stackoverflow.com/questions/9557818/bind-a-querystring-that-has-arrays-with-mvc)

# pentaho - 嵌入蒙德里安分析以报告设计器 3.9.x

> ID：13004987
> 
> 赞同：0
> 
> 时间：2012-10-22T04:28:39.327
> 
> 标签：pentaho

我已经使用 mdx 查询构建了 mondrian 分析。

现在，我想将此分析嵌入到报表设计器 3.9.x。我可以这样做吗？怎么做？

我会很感激任何回应...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:05:32.310

很基础的问题！只需在报表设计器中右键单击数据源，然后添加“Pentaho Analysis”数据源。告诉它您的 mondrian 模式 xml 在哪里，然后将 MDX 粘贴进去。就是这样。

# android - 蒂芙尼安卓框架

> ID：13004989
> 
> 赞同：10
> 
> 时间：2012-10-22T04:28:48.500
> 
> 标签：android

有谁知道 Tiffany 框架在 Android 中制作页面卷曲效果？
这是 我需要知道如何在 Android 中实现它的[youtube 视频？](http://www.youtube.com/watch?v=Yg04wfnDpiQ)

编辑：请不要向我建议这些链接

1.  [安卓页面卷曲](https://code.google.com/p/android-page-curl/)

2.  [神秘树游戏](https://github.com/MysticTreeGames/android-page-curl)

3.  [harism 卷页](https://github.com/harism/android_page_curl)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:44:17.317

根据 Morrison Chang 提供的链接，我遇到了[nemustech](http://nemustech.com/homepage/)。这些人开发了他们自己的安卓用户[体验框架](http://nemustech.com/wordpress/blog/category/solution/tiffany-solution/)。我试图给这些人发邮件，但似乎没有得到他们的回复。

它似乎是他们自己的东西，我们不能使用它:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T09:26:37.920

我建议使用[harism 的 Curl Pages](https://github.com/harism/android_page_curl)，因为它提供了几乎相同的效果，但适用于图像，所以只需膨胀您想要查看的布局，`drawing cache`使用 buildDrawingCache 方法获取它并设置位图

您可以从 on touch 事件中动态设置它

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T10:07:41.063

我没有尝试过 Tiffany 框架，但你可能想看看[这个](https://github.com/MysticTreeGames/android-page-curl)。

*由于您编辑了您的问题，这是[**另一个**](http://anettosoftware.co.uk/npc.php)问题。虽然它不是开源的。*

另外我想指出，虽然页面卷曲效果一开始看起来很不错，但它只是一个新奇的功能。在最近的趋势中，应用程序正在从拟物设计转向平面设计（感谢微软积极宣传它的现代 UI），这正在以更自然的方式做事。

你可能认为书里有什么比卷页更自然的东西，但你误解了读者（用户）已经在阅读电子书而不是真正的书，滚动和翻页比卷页更自然。请参阅[此](https://ux.stackexchange.com/questions/35576/what-explains-the-current-shift-from-glossy-uis-to-matte-uis)stackexchange 问题我想要了解的内容。这不仅适用于您查看应用程序的方式，还适用于您的交互方式。此外，这些效果往往会占用比必要更多的资源（我认为它可能不仅仅是渲染整个电子书）。

对于实际体验，请尝试在 Adob​​e reader 和[pokat reader](http://www.pokat.com/)中阅读 pdf ，感受在显示器上更自然的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T11:38:25.603

我真的不知道它现在是否真的适合您，但是您可以查看使用 WebView（正如您指出的视频所解释的那样）并应用以下 jQuery Pagination 插件之一：[8 jQuery Book Plugins](http://www.jquery4u.com/plugins/8-jquery-book-plugins/)（我猜，更可取的是#3、#5、#7 和#8) 与您需要的内容。我猜你会用一块石头杀死两只鸟:) ---> (1)实现你的概念的简单方法；(2)更高效的代码。

或者，如果您发现另一个有趣的解决方案，请更新您的帖子。

# java - Google Places API：错误 400：（错误请求）

> ID：13004993
> 
> 赞同：1
> 
> 时间：2012-10-22T04:30:39.017
> 
> 标签：java, android, google-places-api

我正在尝试创建一个利用 Google Places API 的 android 应用程序，但我希望它列出当前不支持的地点类型。我知道我可以通过应用程序添加地点，但这样做有问题。我不断收到以下错误：

错误 400：（错误请求）您的客户端发出了格式错误或非法的请求。

我已经搜索了所有关于向places api提交添加请求的工作示例，但我似乎找不到任何可以告诉我我做错了什么的东西。下面是我尝试过的代码，大部分情况下我在各个网站上找到了它，但似乎仍然无法让它工作：

```
private static final String PLACE_ADD_URL = "https://maps.googleapis.com/maps/api/place/add/json?";

public PlacesList addPlace() throws Exception {

try {
        Log.v(LOG_KEY,"Adding Place...");
        GenericUrl reqUrl = new GenericUrl(PLACE_ADD_URL);
        reqUrl.put("key", API_KEY);
        Log.v(LOG_KEY, "Adding Place...");

        reqUrl.put("Host: maps.googleapis.com","{\"location\":{\"lat\":39.977112,\"lng\":-74.182799},\"accuracy\":50.0,\"name\":\"Artisan's Brewery & Italian Grill\",\"types\":[\"other\"],\"language\":\"en\":HTTP/1.1}");
        Log.v(LOG_KEY, "Requested URL= " + reqUrl);

        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory.buildGetRequest(reqUrl);

        Log.v(LOG_KEY, request.execute().parseAsString());
        PlacesList place = request.execute().parseAs(PlacesList.class);

        Log.v(LOG_KEY, "STATUS = " + place.status);
        Log.v(LOG_KEY, "Place Added is = " + place);    

            return place;

    } catch (HttpResponseException e) {
        Log.v(LOG_KEY, e.getMessage());
        throw e;
    }

    catch (IOException e) {
        // TODO: handle exception
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T01:31:04.663

这就是最终为我工作的东西......

```
public JSONObject addPlace() throws Exception {

try {
       Log.v(LOG_KEY,"Adding Place...");
        String nameAdd = "NAME";  // Enter Place Name
        String typeAdd = "TYPE"; //Enter Place Type
        double lat = 00.0000; //Enter Place Latitude
        double lng = -00.00000; //Enter Place Longitude

       HttpPost post = new HttpPost(PLACE_ADD_URL);
       String postBody = 
               "{"+
                       "\"location\": {" +
                        "\"lat\": " + lat + "," +
                        "\"lng\": " + lng +
                       "}," + 
                       "\"accuracy\":50.0," +
                       "\"name\": \"" + nameAdd + "\"," +
                       "\"types\": [\"" + typeAdd + "\"]," +
                       "\"language\": \"en\" " +

                  "}";
       StringEntity se = new StringEntity(postBody, HTTP.UTF_8);
       post.setEntity(se);
       ResponseHandler<String> responseHandler=new BasicResponseHandler();
       String responseBody = new DefaultHttpClient().execute(post, responseHandler);
       JSONObject response = new JSONObject (responseBody);
       Log.v(LOG_KEY, "Request URL= " + PLACE_ADD_URL);

       return response;

    } catch (HttpResponseException e) {
        Log.v(LOG_KEY, e.getMessage());
        throw e;
    }

    catch (IOException e) {
        // TODO: handle exception
        throw e;
    }
} 
```

# ruby-on-rails - 基于哈希键返回值时遇到问题

> ID：13004999
> 
> 赞同：0
> 
> 时间：2012-10-22T04:31:47.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, koala

我很难从 Koala`GraphCollection`对象
（表示为 Ruby 哈希）访问特定值。我成功地从 Facebook 测试用户返回以下数据（这是与用户连接的页面对象）：

```
[{"name"=>"Product Name", "access_token"=>"--Access Token Goes Here--", 
"category"=>"Baby goods/kids goods", "id"=>"244624772329824", "perms"=>["ADMINISTER", 
"EDIT_PROFILE", "CREATE_CONTENT", "MODERATE_CONTENT", "CREATE_ADS", "BASIC_ADMIN"]}] 
```

我想做的是在我的 Rails 视图中显示 ID 值，以便从视图访问类方法。模型中的方法如下所示：

```
accounts = facebook.get_connection("me", "accounts")
accounts.each { |f| f['id'] } 
```

视图中的代码只是简单地调用了该方法：

```
<%= current_user.my_page_id %> 
```

这种尝试的结果只是返回了上面概述的完整数据集合。我尝试了其他几种 Ruby 哈希技术，但大多数结果都是“无法将字符串转换为整数”。

我正在使用 Rails 3.2、Ruby 1.9.3p125。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:46:42.537

如果您只期望该方法有一个 id，请将其更改为

```
def my_page_id
  facebook.get_connection("me","accounts").first["id"]
end 
```