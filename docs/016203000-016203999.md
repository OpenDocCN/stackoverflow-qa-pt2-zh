# StackOverflow 问答 16203000-16203999

# javascript - 自定义 JS 验证无法正常工作

> ID：16203001
> 
> 赞同：1
> 
> 时间：2013-04-24T22:02:46.023
> 
> 标签：javascript, html, validation

以下验证正确验证代码并发出警报。但是一旦您关闭警报并想要继续，您就不能因为它会自行刷新，我不希望页面刷新只是显示警报并让用户编辑他们的信息：

[http://jsfiddle.net/PKLQn/114/](http://jsfiddle.net/PKLQn/114/)

HTML：

```
<form name="fff1" onsubmit="return newfuncion();">
    <input type="text" id="email" />
    <input type="text" id="title" />
    <input type="text" id="url" /><br><br>
    <input type="file" id="flUpload" /><br/><br>
    <input type="submit" value="CONTINUE" />
</form> 
```

JAVASCRIPT：

```
function Checkfiles() {
    var fup = document.getElementById('flUpload');
    var fileName = fup.value;
    var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
    var chkext = ext.toLowerCase();
    if(chkext=="gif" || chkext=="jpg" || chkext=="jpeg" || chkext=="png") {
        return true;
    }
    else { return false; }
} // Checfiles

function Checksize() { 
    var iSize = ($("#flUpload")[0].files[0].size / 1024);
    alert(iSize);
        if(Checkfiles()==true) {
            alert("Checkfiles function works properly!");
            if (iSize < 2097152.00) { 
                alert("It's smaller than 2 megabytes, proceed..");
                return true;
            }
            else{
                alert("It's bigger than 2mb, submit an smaller file!");
                return false;
            }
        } else { alert("Upload GIF, PNG, JPG Images only"); return false; }
} //Checksize

function Checkfields() {
    var error="";
    // Validate Email
    var email = $("#email").val();
    if (/(.+)@(.+){2,}\.(.+){2,}/.test(email)) { } else { error += "- Please enter a valid email address.\n"; }
    // Validate Title
    var title = $("#title").val();
    if (title=="" || title==null) { error += "- Please enter a valid title for your advertisement.\n"; }    
    // Validate URL
    var url = $("#url").val();
    if (/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(url)) { } else { error += "- Please enter a valid URL."; }

    if(error!=""){alert(error); return false;} else {return true;}
}// Checkfields

function newfuncion() {
        var fields = Checkfields();
        var size = Checksize();
        var files = Checkfiles();
        if(fields==true && size==true && files==true) {
            alert("Code works, now proceed to .php page!");
            return true;
        } else {
            alert("Something's wrong, check your code!");
            return false;
        }
} // Use all functions 
```

有什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:08:32.977

您的 Javascript 中存在错误：

```
var iSize = ($("#flUpload")[0].files[0].size / 1024); 
```

如果没有文件，访问 size 属性时会出错。

您需要先进行检查：

```
var iSize;
if ($("#flUpload")[0].files[0]){
    iSize = ($("#flUpload")[0].files[0].size / 1024);
} 
```

# html - 您如何以编程方式（或使用工具）将 .MHT mhtml 文件转换为常规 HTML 和 CSS 文件？

> ID：16203002
> 
> 赞同：23
> 
> 时间：2013-04-24T22:02:51.583
> 
> 标签：html, converter, mhtml

许多工具都有导出 .MHT 文件的方法。我想要一种将单个文件转换为文件集合、HTML 文件、相关图像和 CSS 文件的方法，然后我可以将其上传到网络主机并可供所有浏览器使用。有没有人知道任何工具或库或算法来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-09T18:13:17.643

好吧，您可以在 IE 中打开 .MHT 文件，然后将其另存为网页。我用这个页面对此进行了测试，尽管它在 IE 中看起来很奇怪（毕竟它是 IE），但它保存并在 Chrome 中正常打开（就像它看起来应该的那样）。

除了这种方法，查看文件本身，文本块按原样保存在文件中，所有其他内容都保存在 Base64 中。每项内容前面都有：

```
[Boundary]
Content-Type: [Mime Type]
Content-Transfer-Encoding: [Encoding Type]
Content-Location: [Full path of content] 
```

其中**[Mime Type]**、**[Encoding Type]**和**[Full path of content]**是可变的。**[编码类型]**似乎是*base64*或*quoted-printable*。**[边界]**在 .MHT 文件的开头定义，如下所示：

```
From: <Saved by WebKit>
Subject: converter - How can you programmatically (or with a tool) convert .MHT mhtml        files to regular HTML and CSS files? - Stack Overflow
Date: Fri, 9 May 2013 13:53:36 -0400
MIME-Version: 1.0
Content-Type: multipart/related;
    type="text/html";
    boundary="----=_NextPart_000_0C08_58653ABB.B67612B7" 
```

使用它，您可以根据需要制作自己的文件解析器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-28T16:48:14.943

除了 IE 和 MS Word，还有一个名为“mht2html”的开源跨平台程序，首次编写于[2007 年](http://pgm.bpalanka.com/mht2htm/changelog.html)，最后一次更新于[2016 年](https://sourceforge.net/p/mht2htm/activity/)。它同时具有 GUI 和终端界面。

*   [官方网站](http://pgm.bpalanka.com/mht2htm.html)
*   [Sourceforge 项目](https://sourceforge.net/projects/mht2htm/)

我还没有测试它，但它似乎收到了很好的评价。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-14T05:33:46.530

MHT 文件本质上是 MIME。因此，可以使用 Chilkat.Mime 或完全免费的 System.Net.Mime 组件来访问其内部结构。例如，如果 MHT 包含图像，则可以在输出 HTML 中将它们替换为 base64 字符串。

```
Imports HtmlAgilityPack
Imports Fizzler.Systems.HtmlAgilityPack
Imports Chilkat
Public Function ConvertMhtToHtml(ByVal mhtFile As String) As String
    Dim chilkatWholeMime As New Chilkat.Mime
    'Load mime'
    chilkatWholeMime.LoadMimeFile(mhtFile)
    'Get html string, which is 1-st part of mime'
    Dim html As String = chilkatWholeMime.GetPart(0).GetBodyDecoded
    'Create collection for storing url of images and theirs base64 representations'
    Dim allImages As New Specialized.NameValueCollection
    'Iterate through mime parts'
    For i = 1 To chilkatWholeMime.NumParts - 1
        Dim m As Chilkat.Mime = chilkatWholeMime.GetPart(i)
        'See if it is image'
        If m.IsImage AndAlso m.Encoding = "base64" Then
            allImages.Add(m.GetHeaderField("Content-Location"), "data:" + m.ContentType + ";base64," + m.GetBodyEncoded)
        End If : m.Dispose()
    Next : chilkatWholeMime.Dispose()
    'Now it is time to replace the source attribute of all images in HTML with dataURI'
    Dim htmlDoc As New HtmlDocument : htmlDoc.LoadHtml(html) : Dim docNode As HtmlNode = htmlDoc.DocumentNode
    For i = 0 To allImages.Count - 1
        'Select all images, whose src attribute is equal to saved URL'
        Dim keyURL As String = allImages.GetKey(i) 'Saved url from MHT'
        Dim elementsWithPics() As HtmlNode = docNode.QuerySelectorAll("img[src='" + keyURL + "']").ToArray
        Dim imgsrc As String = allImages.GetValues(i)(0) 'dataURI as base64 string'
        For j = 0 To elementsWithPics.Length - 1
            elementsWithPics(j).SetAttributeValue("src", imgsrc)
        Next
        'Select all elements, whose style attribute contains saved URL'
        elementsWithPics = docNode.QuerySelectorAll("[style~='" + keyURL + "']").ToArray
        For j = 0 To elementsWithPics.Length - 1
            'Get and modify style'
            Dim modStyle As String = Strings.Replace(elementsWithPics(j).GetAttributeValue("style", String.Empty), keyURL, imgsrc, 1, 1, 1)
            elementsWithPics(j).SetAttributeValue("style", modStyle)
        Next : Erase elementsWithPics
    Next
    'Get final html'
    Dim tw As New StringWriter()
    htmlDoc.Save(tw) : html = tw.ToString : tw.Close() : tw.Dispose()
    Return html
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T18:10:21.953

我认为@XGundam05 是正确的。这是我为使其工作所做的工作。

我从 Visual Studio 中的一个 Windows 窗体项目开始。将 WebBrowser 添加到表单中，然后添加两个按钮。然后这段代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        webBrowser1.ShowSaveAsDialog();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        webBrowser1.Url = new Uri("localfile.mht");
    } 
```

您应该能够获取此代码并添加文件列表并使用`foreach`. `webBrowser`包含一个名为`ShowSaveAsDialog()`;的方法 这将允许一个人保存为 .mht 或只是 html 或整个页面。

编辑：此时您可以使用 webBrowser 的文档并抓取信息。通过在此处根据 MS 添加richTextBox 和公共变量：http: [//msdn.microsoft.com/en-us/library/ms171713.aspx](http://msdn.microsoft.com/en-us/library/ms171713.aspx)

```
 public string Code
    {
        get
        {
            if (richTextBox1.Text != null)
            {
                return (richTextBox1.Text);
            }
            else
            {
                return ("");
            }
        }
        set
        {
            richTextBox1.Text = value;
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        webBrowser1.Url = new Uri("localfile.mht");
        HtmlElement elem;

        if (webBrowser1.Document != null)
        {

            HtmlElementCollection elems = webBrowser1.Document.GetElementsByTagName("HTML");
            if (elems.Count == 1)
            {
                elem = elems[0];
                Code = elem.OuterHtml;
                foreach (HtmlElement elem1 in elems)
                {
                    //look for pictures to save
                }

            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T06:28:25.580

所以自动化 IE 是困难的，而且端到端不可用，所以我认为构建某种代码来完成它将是要走的路。在 github 我发现这个 python 可能很好

[https://github.com/Modified/MHTifier](https://github.com/Modified/MHTifier) [http://decodecode.net/elitist/2013/01/mhtifier/](http://decodecode.net/elitist/2013/01/mhtifier/)

如果我有时间，我会尝试在 PowerShell 中做类似的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-25T07:44:51.410

**Firefox**有嵌入式工具。转到菜单（如果隐藏，请按 Alt）`File->Convert saved pages`。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-04-08T11:53:47.500

第 1 步：在浏览器中打开 .MHT / .MHTML 文件。

第二步：右键选择查看源代码。

第 3 步：复制源代码并将其粘贴到新的 .TXT 文件中，然后将文件扩展名更改为 .HTML。

# android - 更新到新的 Android Google Maps API v2 后出现奇怪的 NullPointerException 崩溃

> ID：16203003
> 
> 赞同：0
> 
> 时间：2013-04-24T22:02:57.907
> 
> 标签：android, google-maps-android-api-2

我最近被催促更新我的应用程序以使用谷歌地图 API v2。（谷歌最终停止为 v1 授予 API 密钥。）我已经实现了新的 api，使其与我的应用程序之前的工作方式相同，令我满意。除了，我注意到发生了一个奇怪的错误。

当我转到我使用 SupportMapFragment 的活动时，按返回返回上一个活动，然后再次前进到 SupportMapFragment 活动，它会随机崩溃......有时很快，有时需要一分钟。唯一改变的是我正在使用新的 API，因此重构了代码以使用新的 API。

```
04-25 08:00:24.415: W/dalvikvm(12746): threadid=28: thread exiting with uncaught exception (group=0x40b9f930)
04-25 08:00:24.445: E/AndroidRuntime(12746): FATAL EXCEPTION: Thread-1711
04-25 08:00:24.445: E/AndroidRuntime(12746): java.lang.NullPointerException
04-25 08:00:24.445: E/AndroidRuntime(12746):    at libcore.net.http.RequestHeaders.addCookies(RequestHeaders.java:285)
04-25 08:00:24.445: E/AndroidRuntime(12746):    at libcore.net.http.HttpEngine.prepareRawRequestHeaders(HttpEngine.java:724)
04-25 08:00:24.445: E/AndroidRuntime(12746):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:217)
04-25 08:00:24.445: E/AndroidRuntime(12746):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
04-25 08:00:24.445: E/AndroidRuntime(12746):    at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
04-25 08:00:24.445: E/AndroidRuntime(12746):    at maps.z.bk.run(Unknown Source)
04-25 08:00:24.475: W/ActivityManager(517):   Force finishing activity com.___.___/com.___.___.activities.ActivityWithMap
04-25 08:00:24.625: D/overlay(158): Unset pipe=VG0 dpy=0; Unset pipe=VG1 dpy=0; Unset pipe=RGB1 dpy=0; 
04-25 08:00:37.398: I/Process(12746): Sending signal. PID: 12746 SIG: 9
04-25 08:00:37.418: I/ActivityManager(517): Process com.___.___ (pid 12746) has died.
04-25 08:00:37.418: W/ActivityManager(517): Force removing ActivityRecord{4178d2a8 u0 com.___.___/com.___.___.activities.PreviousActivity}: app died, no saved state
04-25 08:00:37.428: W/InputDispatcher(517): channel '41e3b688 com.___.___/com.___.___.activities.PreviousActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
04-25 08:00:37.428: E/InputDispatcher(517): channel '41e3b688 com.___.___/com.___.___.activities.PreviousActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
04-25 08:00:37.428: W/InputDispatcher(517): Attempted to unregister already unregistered input channel '41e3b688 com.___.___/com.___.___.activities.PreviousActivity (server)'
04-25 08:00:37.428: I/WindowState(517): WIN DEATH: Window{41a48790 u0 com.___.___/com.___.___.activities.ActivityOther}
04-25 08:00:37.428: I/WindowState(517): WIN DEATH: Window{41e3b688 u0 com.___.___/com.___.___.activities.PreviousActivity} 
```

如果它有帮助，如果我在返回 MapFragment 活动后打开和关闭屏幕，它似乎会更快地崩溃......

我知道这与两次启动活动有关，但我在任何地方都看不到任何会导致这种奇怪崩溃的东西，另外，它并没有在 v1 上发生...... bleh。

已经多次尝试谷歌试图找出它......

此外，如果这有帮助，异常似乎发生在 bk.run() 的单独线程中，如堆栈跟踪中所述，但我的应用程序继续在我的设备上运行，而它在 eclipse 中暂停，直到我让该线程去然后应用程序实际上崩溃了。

我还确认，当我使用地图片段两次进入活动时会发生崩溃，即使我从未对地图做任何事情，甚至在 SupportMapFragment 上调用 getMap()，所以它肯定是某种问题地图片段或加载谷歌地图。旋转时也会崩溃（因为重新创建了活动。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:44:00.917

事实证明，问题是由我的应用程序启动时执行以下行引起的：

```
CookieHandler.setDefault(new CustomCookieManager()); 
```

然后，如果该行之前已执行，则地图将在第二次进入活动后崩溃。

这就解释了为什么堆栈跟踪显示在 addCookies 处发生的崩溃。无论如何，该应用程序甚至不再使用 Cookie 管理器，所以我所要做的就是去掉那条线。

我知道这一定是我的应用程序所做的与示例不同，最后我弄明白了。

不知道这是否仍然是地图 api v2 中与 cookie 相关的错误？可能不是？我的应用程序可能以某种方式错误地处理了 cookie。（除了将其设置为默认值外，可能不与经理做任何事情）......无论如何，现在至少我可以毫无问题地使用它们！

# c++ - 为什么线程随机这么慢，-（或者我的代码哪里错了！）

> ID：16203005
> 
> 赞同：2
> 
> 时间：2013-04-24T22:03:06.770
> 
> 标签：c++, optimization, random, thread-safety, openmp

我一直无法让线程化 C++ 随机数生成器在单核上优于标准 rand()。（我也看到多个线程调用 rand() 的问题）

我知道某处存在并发问题，但我看不到。我已经到了下面，我知道 openmp 正在拆分 8 个可用内核。当我注释掉 omp 行时，我会得到更快的结果。请帮忙！这真让我抓狂！

时代

```
Single thread
time ./a.out 
real    0m3.497s
user    0m3.492s
sys 0m0.000s

OpemMP 8 cores
g++ -fopenmp randtests.cpp 
time ./a.out 
real    0m14.723s
user    1m52.275s
sys 0m0.712s 
```

编码：

```
#include <omp.h>        
#include "boost/random.hpp"
#include "boost/generator_iterator.hpp"
#include <iostream>
#include <fstream>
#include <sstream>
#include "boost/random.hpp"

using namespace std;

class RNG
{
public:
    typedef boost::random::mt19937 Engine;
    typedef boost::random::uniform_smallint<int> Distribution;

    Engine engine;
    Distribution distributer;

    RNG() : engine(), distributer() {
        engine.seed();     }

    int operator()() {
        return distributer(engine);
    }
};

int main(void) {

#pragma omp parallel
    {
        int i = omp_get_thread_num();
        unsigned int myseed = i;
        RNG  r;
        int y;
#pragma omp for ordered schedule(dynamic) nowait
        for (unsigned int x = 0; x < 100000000; x++) {
            y = r();
        }
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:31:47.993

您的代码执行如此缓慢有两个原因。

首先，你有`schedule(dynamic)`条款。这使得您的循环的调度是动态的，即每次迭代都以先到先得的方式调度到一个单独的线程。这是非常低效的。改为`schedule(static)`让每个线程执行预先计算的迭代范围。均匀分布在恒定时间内生成，因此每次迭代将花费相同的时间，因此无需使用动态调度。

其次，您已指示编译器创建一个有序的并行循环。由于涉及同步，排序会产生非常高的额外开销。在您的情况下，开销更大，因为调度是动态的。

我真的不明白为什么在这种情况下你有动态的时间表和排序。只需将 OpenMP 编译指示替换为：

```
#pragma omp for schedule(static) 
```

（该`nowait`条款在这种情况下也只有表面的影响）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:14:07.090

我相当确信线程正在竞争共享资源，即`state`随机数生成器中的共享资源。对于您获取的每个数字，`state`都会更新（下次提供另一个数字）。由于所有随机数只有一种状态，并且需要在不受其他线程干扰的情况下进行更新，因此它将强制线程按顺序运行（并且因为当您有 8 个线程调用相同的函数时，锁会严重竞争，从而迫使另一个线程等待，这可能意味着需要更多时间调用操作系统）。

另一个因素很可能是缓存共享——它`state`被所有线程修改，因此每次`r()`调用时都必须使保存状态的缓存行失效。

. 您可以通过将您的电话替换为`distributer(engine)`类似的来证明这一点`static int x; return x++;`。如果在多进程环境中性能更差（比每个线程数线性好），那么缓存共享就是问题的一部分。

# kendo-ui - 过滤儿童剑道菜单asp mvc

> ID：16203007
> 
> 赞同：1
> 
> 时间：2013-04-24T22:03:12.317
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我有一个小问题，我不知道如何解决，我想过滤我的菜单的子菜单或只返回子菜单的一个值，我的控制器中有这个：

```
 public ActionResult ModelBinding()
    {
        NorthwindDataContext northwind = new NorthwindDataContext();
        var data = (from m in northwind.Categories
                    join a in northwind.Products on m.CategoryID equals a.CategoryID
                    where m.CategoryID == 1 && a.ProductID == 1 
                    select m).ToList();
        return View(data);
    } 
```

这是我的观点

```
 @model IEnumerable<Kendo.Mvc.Examples.Models.Category>
 @(Html.Kendo().Menu()
      .Name("Menu")
      .BindTo(Model, mappings => 
      {
            mappings.For<Kendo.Mvc.Examples.Models.Category>(binding => binding
                    .ItemDataBound((item, category) =>
                    {
                        item.Text = category.CategoryName;
                    })
                    .Children(category => category.Products));
            mappings.For<Kendo.Mvc.Examples.Models.Product>(binding => binding
                    .ItemDataBound((item, product) =>
                    {
                        item.Text = product.ProductName;
                    }));
      })
) 
```

在我的控制器中，我将过滤器发送到 ProductID == 1 但是当菜单运行这个时，该类别返回我该类别的所有产品，有时像这样

*   啤酒

*   柴
*   常
*   瓜拉纳幻想曲
*   萨斯夸克啤酒

我希望只给我一个产品，所以我该怎么做或者我可以在哪里放置过滤器，有人举个例子我真的很感激帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T13:37:46.623

您可能会看看我对[Kendo Combobox 中的多个过滤器的](https://stackoverflow.com/questions/29240277/multiple-filters-in-kendo-combobox/29251880#29251880)回答。在那个页面中，我展示了 Kendo Combobox 上的过滤。希望这可以帮助...

# java - Android SharedPreferences 问题 - 从另一个类获取数据

> ID：16203013
> 
> 赞同：0
> 
> 时间：2013-04-24T22:03:39.633
> 
> 标签：java, android, android-preferences

我试图在不使用 Intents 的情况下传递数据，以便某些类可以访问数据。所以我决定做的是使用 SharedPreferences。当我运行代码时，我在 End() 方法中有一个 Toast，显示我在 Start() 方法中设置的 url。toast 显示我的默认消息，但不显示我存储在 SharedPreferences 中的 url。

下面是 Start() 方法的代码：

```
import java.net.URI;
import java.net.URISyntaxException;

import android.content.Intent;
import android.content.SharedPreferences;
import android.app.Activity;
import android.widget.Toast;
import android.net.Uri;
import android.os.Bundle;

public class Start extends Activity { 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    String uriStr = "http://www.google.com";
    URI uri = null;

    try {
        uri = new URI(uriStr);
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String trackUri = uri.toString();
    SharedPreferences sharedPref = getSharedPreferences("FileName", MODE_PRIVATE); 
    SharedPreferences.Editor prefEditor = sharedPref.edit(); 
    prefEditor.putString("track_uri", trackUri);
    prefEditor.commit();
    Intent intent = new Intent(getBaseContext(), End.class);
    startActivity(intent);
} 
```

}

下面是 End() 方法的代码：

```
import java.net.URI;
import java.net.URISyntaxException;

import android.content.Context;
import android.content.SharedPreferences;
import android.app.Activity;
import android.widget.Toast;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;

public class End extends Activity { 
private Context mContext;

public End() { 
}

public End (Context context) { 
    mContext = context;
}

public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    mContext = getApplicationContext();
    String trackUri = "Test";
    //SharedPreferences sharedPref = getSharedPreferences("FileName", MODE_PRIVATE); 
    SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(mContext);
    sharedPref.getString("track_uri", trackUri);
    Toast.makeText(getApplicationContext(), trackUri, Toast.LENGTH_LONG).show();
}
} 
```

基本上我想做的就是从另一个类获取数据，而不必跟踪它，并在我可以使用另一个类时使用 Intents 传递它。

我究竟做错了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:13:20.853

在`Start`替换

```
SharedPreferences sharedPref = getSharedPreferences("FileName", MODE_PRIVATE); 
```

和

```
SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(this); 
```

**编辑：**

才意识到！您没有设置 trackUri 变量。

```
sharedPref.getString("track_uri", trackUri); 
```

应该

```
trackUri = sharedPref.getString("track_uri", trackUri); 
```

* * *

注意：如果你只是想传递字符串，你可以将它添加到 Start 中的 Intent extras 中。例如

```
intent.putExtra("track_uri", trackUri); 
```

然后在 End 中检索：

```
String uriString = getIntent().getStringExtra("track_uri"); 
```

# c# - 将现有登录名用于另一个子域

> ID：16203019
> 
> 赞同：0
> 
> 时间：2013-04-24T22:03:57.893
> 
> 标签：c#, asp.net, vb.net, security

我有一个网站，我使用 asp.net 安全登录与会员提供商。我还在我的网站中添加了一个预先构建的 asp.net 论坛作为单独的 Web 应用程序，但它有自己的登录系统和 sql 表结构。我不希望用户必须创建 2 个不同的登录名才能访问论坛。无论如何我可以使用原版登录论坛吗？我知道这是一个模糊的问题，但请告诉我你需要知道什么才能回答这个问题。谢谢。我正在使用 Jibit ASPNETForum

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:34:25.707

[Jibit 网站上的文档](http://www.jitbit.com/docs/asp-net-forum/!!!asp-net-forum-software-readme.htm#sso)指出，它们可以与 asp.net 表单身份验证和成员资格提供程序集成。请参阅“ASP.NET 表单/Windows 身份验证”部分。根据文档，您可以在配置文件中手动设置凭据，或者如果启用了“IntegratedMembership”标志，论坛将尝试自动识别它。

# c - 对包含零件列表的文件进行 fseek 和 fread

> ID：16203020
> 
> 赞同：0
> 
> 时间：2013-04-24T22:03:59.487
> 
> 标签：c, file, pointers, fread, fseek

我有一个包含零件和零件编号列表的文件。我需要做的是在文件指针和整数给出的位置显示零件的名称。类似于`sizeof(part) * n`然后在该位置显示零件的信息。

我正在尝试 fseek 和 fread，但它似乎无法正常工作。

```
FILE * ofp;
ofp = fopen("file.bak", "r");

char p[sizeof(part)];

fseek(ofp,sizeof(part) * 4,SEEK_SET);
fread(p, sizeof(part), 1, ofp);
printf("%s", p); 
```

它打印列表中的第一部分，而它应该打印第四部分。

该部分是一个包含 3 个字段的结构。它们的形式为：

```
1 item1 2
4 item2 80 
```

其中第一个数字是商品编号，第二个是库存编号，因此它们的长度不同。然而，它们被转换为二进制文件，即 ofp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:54:21.493

这是我想让你尝试的方法：

```
FILE * ofp;
ofp = fopen("file.bak", "r");
part seek_part;

memset( &seek_part, 0, sizeof(part) );
fseek(ofp,sizeof(part) * 4,SEEK_SET);
fread(&seek_part, sizeof(part), 1, ofp);
printf("%s", seek_part.name); 
```

这仍然无法编译，但你应该明白了。我们需要查看 typedef 部分才能真正显示正确的 printf()。

# c# - 将 Crystal Report 导出到 Word 时出现 reportDocument.ExportToDisk 错误

> ID：16203024
> 
> 赞同：0
> 
> 时间：2013-04-24T22:04:14.097
> 
> 标签：c#, visual-studio, crystal-reports

当我尝试使用`reportDocument.ExportToDisk`.

它在这条线上崩溃：

```
reportDocument.ExportToDisk(ExportFormatType.WordForWindows, WordPath); 
```

完整的错误信息是这样的：

> 登录失败。详细信息：IM002:[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified File C:\Users\disaia\AppData\Local\Temp\DisplayLabel {47AE6D67-D16D-4FB9-BE38-7F7B300D83C0} 中的错误.rpt：无法连接：登录参数不正确。

WordPath =`"C:\\Inetpub\\wwwroot\\ShoeReport\\admin\\DOC\\1_DisplayStickers.doc"`我的本地机器。

这段代码在我们的生产服务器上运行得很好，但它在我们的开发服务器或我的本地开发机器上崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:59:26.357

您在开发服务器和开发机器上的连接设置不正确。如果您使用的是 ODBC，请检查 DSN

# facebook-graph-api - 使用附加参数（“to”和“status_type”）从应用程序在墙上创建帖子

> ID：16203025
> 
> 赞同：0
> 
> 时间：2013-04-24T22:04:15.917
> 
> 标签：facebook-graph-api, facebook-opengraph, facebook-wall

使用图形资源管理器探索墙贴我已经提到有些帖子有**“to”**字段，并且它们的**status_type**是**app_created_story**。据我了解，这是在朋友墙上发帖的一种方式。这种类型的帖子是如何完成的？我尝试设置这些字段并使用应用程序和用户令牌，但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:14:09.180

查看 GraphAPI 的发布部分。看看这是否可以解决您的问题。

[GraphAPI - 发布](http://developers.facebook.com/docs/reference/api/publishing/)

快速浏览该文档后，您似乎可以通过使用 /feed 连接来正确地使用您以前使用过 /posts 的位置。我相信它还有更多内容，但只是想我会分享这个，看看它是否可以为你指明一个有用的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:16:56.280

可悲的是，这个问题的答案是应用程序不能再发布在朋友墙上。官方博客文章[可以在这里看到](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)。您需要向下滚动一点到标
有“弃用导致低质量用户体验的功能”的部分。

> 通过 API 发布到朋友墙会产生大量负面用户反馈，包括“隐藏”和“标记为垃圾邮件”，因此我们将其从 API 中删除。如果您想允许人们从您的朋友的时间线发布信息应用程序，您可以调用提要对话框。通过用户提及标记或动作标记包含朋友的故事将显示在朋友的时间轴上（假设朋友批准标签）。

# java - 关于 Java HashMap 源

> ID：16203026
> 
> 赞同：1
> 
> 时间：2013-04-24T22:04:33.840
> 
> 标签：java, hashmap

所以，我们有一个 HashMap，里面有一个临时的 Entry[] 表。在许多方法中，例如在 clear() 中，我们复制表：

```
public void clear() {
    modCount++;
    Entry[] tab = table;
    for (int i = 0; i < tab.length; i++)
        tab[i] = null;
    size = 0;
} 
```

但是为什么我们做Entry[] tab = table？下一个代码有什么问题？

```
public void clear() {
    modCount++;
    for (int i = 0; i < table.length; i++)
        table[i] = null;
    size = 0;
} 
```

据我所知， tab 只是对 table 的引用，乍一看，只是浪费空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:07:32.063

```
 for (int i = 0; i < table.length; i++)
        tab[i] = null; 
```

你是对的，`tab`两者`table`都指向同一个对象。我看到的问题是在 for-conditional 中使用 table 和 for-body 中的选项卡。您应该使用其中一种，但不能同时使用。

`tab`是不必要的，但有时人们出于可读性原因这样做。在这里没有意义，因为表格更具可读性。如果我正在对其进行代码审查，我会非常喜欢第二个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:07:02.487

它只是一个本地范围的对象引用。那里没有太多空间。

# android - 如何使用html标签 在字符串文本视图中

> ID：16203028
> 
> 赞同：0
> 
> 时间：2013-04-24T22:04:36.557
> 
> 标签：android, html, string, textview

我的活动由长文本视图组成，必须由分隔符分隔为多个段落，我使用此代码：

```
TextView tv=(TextView)findViewById(R.id.text); 
        tv.setText(Html.fromHtml(getString(R.string.planet))); 
```

从字符串中获取文本并使用 html 标签将其作为：

```
<string name="planet">
  <![CDATA[ 
    // my text written here//
   ]]> 
 </string> 
```

我尝试通过添加 html 分隔符标记在每个段落之间添加分隔符或分隔符，但它不起作用，我尝试了这个但不起作用：

```
 <div class="aligncenter" style="width:400px;height:0;border-top:4px outset 
        #008000;font-size:0;">-</div> 
```

也试过这个也不起作用：

```
<div align="aligncenter" style="width:400px;height:0;border-top:4px outset 
        #008000;font-size:0;""></div> 
```

所以请任何建议使用 htlm 标签应用该分隔符

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:14:26.350

`Html.fromHtml()`不处理所有标签`HTML`。`<i> <b> <br/>`仅处理诸如 etc之类的基本标签。`HTML`对于包含类似标签的更复杂的标签，`<span>`或者`<div>`使用 a `WebView`or you 如果它只是您想要的换行符，请尝试 a`<br/>`或 a `\n`。

[来源](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/text/Html.java)- Html.fromHtml。`handleStartTag`在源页面上搜索以查看更多信息。

# c# - Form.DesktopBounds.Width 似乎偏离了 10 个像素。如何确定正确的表格宽度？

> ID：16203030
> 
> 赞同：2
> 
> 时间：2013-04-24T22:04:42.760
> 
> 标签：c#, winforms

访问 Form.DesktopBounds.Width 属性时，它似乎偏离了 10 个像素。似乎窗口边框每边都是 5 个像素。如何确定正确的表单宽度，包括表单周围的边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:14:06.873

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bounds.aspx)，如果您想获取控件的大小和位置，*包括*其非客户端元素，您只需使用`Form.Bounds`. 在宽度的情况下，那将是`Form.Bounds.Width`。

我相信我的评论建议`Form.Width`也会起作用，因为`Top`, `Left`, `Width`, 和`Height`都来自`Bounds`他们自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T20:41:13.720

我刚刚遇到了这个问题。

`Form.Height`我从和得到“减 10”的数字`Form.Bounds.Height`。高度值在 Windows XP 上是正确的，但在 Windows 7 上是 10。（`Width`值也是关闭的。）

如果`FormBorderStyle`是，`Sizable`那么值是正确的。但是当它是`FixedToolWindow`我得到了 10 的值。

# ruby - Heroku 中的 Mongoid 错误：数据库应该是 Mongo::DB，而不是 nil 类

> ID：16203035
> 
> 赞同：1
> 
> 时间：2013-04-24T22:05:11.570
> 
> 标签：ruby, heroku, sinatra, mongoid

我在 heroku 上有一个 Sinatra 应用程序，由于此错误，它不断崩溃：

`app/vendor/bundle/ruby/1.9.1/gems/mongoid-1.2.14/lib/mongoid/config.rb:52 in 'master': Database should be a Mongo::DB, not a nil class`

我根据 heroku 说明设置了 Mongoid 3.x，并且该应用程序在我的本地计算机上运行，​​所以我不确定是什么导致了这个问题。我的 gemfile 看起来像这样：

```
source "https://rubygems.org"
ruby "1.9.3"

gem 'sinatra'
gem 'mongo'
gem 'mongoid'
gem 'bson_ext'
gem 'json'
gem 'nokogiri'
gem 'aws-s3', '0.6.2', :require => 'aws/s3'
gem 'sinatra-reloader'
gem 'debugger'
gem 'thin' 
```

这是我的`mongoid.yml`：

```
development:
  sessions:
    default:
      database: db
      hosts:
        - localhost:27017
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: true 
```

这是我的应用程序文件：

```
require 'bundler/setup'
require 'sinatra'
require 'json'
require 'mongo'
require 'mongoid'

Mongoid.load!('mongoid.yml', :production)
def get_connection
  return @db_connection if @db_connection
  db = URI.parse(ENV['MONGOHQ_URL'])
  db_name = db.path.gsub(/^\//, '')
  @db_connection = Mongo::Connection.new(db.host, db.port).db(db_name)
  @db_connection.authenticate(db.user, db.password) unless (db.user.nil? || db.user.nil?)
  @db_connection
end

db = get_connection

class Model1
  include Mongoid::Document

  field :name, :type => String

end 
```

我不应该指定数据库名称，因为我使用的是 uri 字段，所以我不确定为什么如果数据库为零？

# javascript - jQuery src 替换悬停时的淡入淡出

> ID：16203036
> 
> 赞同：0
> 
> 时间：2013-04-24T22:05:17.117
> 
> 标签：javascript, jquery, fade, src

我的 Joomla 网站上有几张图片，每张都有黑白版和彩色版。当悬停在一个漂亮的淡入淡出上时，我想改变 src 的一部分（'bw' 到 'color'）。我对 jQuery 很陌生，所以我唯一的代码就是这个，这可能是完全错误的。

```
$(".grey img").mouseover(function() {
$(this).attr('src', function(i, src) {
    return src.replace( 'bw', 'color' ).fadeIn(800);
});
$(".grey img").mouseout(function() {
    $(this).attr('src', function(i, src) {
        return src.replace( 'color', 'bw' ).fadeOut();
}); 
```

我已经寻找了几个小时的解决方案，此时我不确定它是否真的很明显，我完全错过了它。所以，很抱歉，如果是这样，或者如果某处有解决方案而我看的不够多。

我想解决这个问题，而不必在 html 中链接两个图像，但如果没有其他解决方案，我将感谢有关如何实现此目标的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:09:36.237

您必须先获取源，然后才能更改它。我也会清理一下：

```
$('.grey').on({
    mouseenter:function(){
        var $this = $(this),
            src = $this.attr('src').replace('bw','color');

        $this.fadeOut(function(){
            $this
                .attr('src',src)
                .on('load',function(){
                    $this.fadeIn();
                });
        });
    },
    mouseleave:function(){
        var $this = $(this),
            src = $this.attr('src').replace('color','bw');

        $this.fadeOut(function(){
            $this
                .attr('src',src)
                .on('load',function(){
                    $this.fadeIn();
                });
        });
    }
},'img'); 
```

如您所见，您走在了正确的轨道上，但您只需要捕获源代码，然后就可以对其进行操作。我所做的其他更改是：

*   使用`.on()`which 允许单个绑定事件
*   使用`mouseenter`and`mouseleave`代替`mouseover`and`mouseout`
*   将任务委派`.on()`给所有`img`包含在`.grey`

我还使用了一个变量来保持阅读的清洁度，但您也可以轻松地将 放在`$(this).attr('src').replace('bw','color')`赋值中并完全放弃该变量。

**编辑**- 更新以在图像更改时显示淡入/淡出。

# algorithm - 处理非法字符串的遗传算法

> ID：16203038
> 
> 赞同：0
> 
> 时间：2013-04-24T22:05:40.587
> 
> 标签：algorithm, genetic-algorithm

我正在尝试实现遗传算法来最大化`n`变量函数，使每个变量都在范围内`[-n, n]`。

为了使交叉变得不那么复杂，在生成初始种群时，我只生成从`0`to 的数字`2n`，然后在评估适应度时，我从每个数字中减去 n。由于`n`可能很小，我决定使用位字符串而不是整数数组来表示染色体。

`2n`现在的问题是在交叉和变异期间生成非法值（大于）。一种方法是在交叉和变异期间用合法值替换非法值。但这会有点复杂，也可能会影响性能。

所以我想知道我是否可以在交叉和变异时离开检查和替换，而是在两者都完成后进行。所以我有了新一代之后，我将遍历每个个体的染色体并替换非法字符串并计算适应度。另外，是否有可能在不替换非法位串的情况下逃脱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:57:41.227

有两种选择，我能想到：

1.  如您所述，如果生成的值超出范围，请重试。当然，算法可能会循环堆叠，在这种情况下，即使经过数百万代，人口也可能不会进化。

2.  由于您正在最大化，因此您应该在目标函数中为 n 的非法值添加负惩罚。这样，您将偏向您的算法以远离非法数字。我需要查看您的实施情况才能发表具体评论。但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:57:49.480

您不需要为中间种群替换非法位串 - 您只需要为最终种群执行此操作。一种解决方案是为位串保存最后几个（2 或 3 个）合法值，以便在替换最终总体中的非法位串时可以随机迭代这些值（而不是必须完全组成合法值） .

顺便说一句，我一直更喜欢[进化计算](http://www.aip.de/~ast/EvolCompFAQ/Q1_2.htm)而不是遗传算法，因为我经常发现交叉只会把我带入死胡同。

# android - Android lsmod 输出

> ID：16203040
> 
> 赞同：0
> 
> 时间：2013-04-24T22:05:55.290
> 
> 标签：android

我很难弄清楚 Android 4.0.3 的 lsmod 输出。所有这些“实时地址”条目是什么意思？

```
option 14926 0 - Live 0xbf12b000
usb_wwan 9419 1 option, Live 0xbf124000
cdc_acm 15150 0 - Live 0xbf11b000
g_crypto 11918 0 - Live 0xbf0cc000
g_wmt_cmoscam 1421 0 - Live 0xbf0c8000
g_wmt_v4l2_cmos 68606 1 g_wmt_cmoscam, Live 0xbf0b1000
g_wmt_v4l2 5135 1 g_wmt_v4l2_cmos, Live 0xbf0ab000
g_wmt_ve_h264 11644 0 - Live 0xbf0a5000
g_wmt_ve_com 9021 1 g_wmt_ve_h264, Live 0xbf09e000
g_wmt_vd_vpx 65936 0 - Live 0xbf088000
g_wmt_vd_rv 735 0 - Live 0xbf084000
g_wmt_vd_vc1 713 0 - Live 0xbf080000
g_wmt_vd_h264 715 0 - Live 0xbf07c000
g_wmt_vd_h263 715 0 - Live 0xbf078000
g_wmt_vd_divx 715 0 - Live 0xbf074000
g_wmt_vd_mpeg4 717 0 - Live 0xbf070000
g_wmt_vd_mpeg2 717 0 - Live 0xbf06c000
g_wmt_vd_jdec 18829 0 - Live 0xbf063000
g_wmt_lock 2881 5 - Live 0xbf05f000
g_wmt_vd_com 158558 12 g_wmt_vd_vpx,g_wmt_vd_rv,g_wmt_vd_vc1,g_wmt_vd_h264,g_wmt_vd_h263,g_wmt_vd_divx,g_wmt_vd_mpeg4,g_wmt_vd_mpeg2,g_wmt_vd_jdec, Live 0xbf032000
mali 102375 6 - Live 0xbf00d000
ump 27968 11 mali, Live 0xbf000000 
```

我问这个是因为我使用完全相同的内核来启动 Ubuntu，这是 lsmod 在 Ubuntu 上的输出

```
option                 14926  0 
g_wmt_lock              2881  0 
g_wmt_vd_jdec          18829  0 
g_wmt_vd_mpeg2           717  0 
g_wmt_vd_mpeg4           717  0 
g_wmt_vd_divx            715  0 
g_wmt_vd_h263            715  0 
g_wmt_vd_h264            715  0 
g_wmt_vd_vc1             713  0 
g_wmt_vd_rv              735  0 
g_wmt_vd_vpx           65936  0 
g_wmt_ve_h264          11644  0 
g_wmt_ve_com            9021  1 g_wmt_ve_h264
g_wmt_cmoscam           1421  0 
g_wmt_v4l2_cmos        68606  1 g_wmt_cmoscam
g_wmt_v4l2              5135  1 g_wmt_v4l2_cmos
g_wmt_vd_com          158558  9 g_wmt_vd_jdec,g_wmt_vd_mpeg2,g_wmt_vd_mpeg4,g_wmt_vd_divx,g_wmt_vd_h263,g_wmt_vd_h264,g_wmt_vd_vc1,g_wmt_vd_rv,g_wmt_vd_vpx
g_crypto               11918  0 
mali                  102375  0 
ump                    27968  1 mali
cdc_acm                15150  0 
usb_wwan                9419  1 option
rt3070sta_rtl8188     442205  0 
```

HDMI、Camera 等无法在 Ubuntu 上运行，尽管在两个操​​作系统上都加载了相同的模块。这就是我询问 Live 和 ADDR 列的原因。我想知道这是否与 Ubuntu 缺乏功能有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:12:38.757

`lsmod`只是从文件中读取`/proc/modules`（它实际上调用 cat `/proc/modules`）

这对于许多类似 UNIX 的操作系统来说都是一样的：

```
The first column contains the name of the module.

The second column refers to the memory size of the module, in bytes.

The third column lists how many instances of the module are currently loaded. A value of zero represents an unloaded module.

The fourth column states if the module depends upon another module to be present in order to function, and lists those other modules.

The fifth column lists what load state the module is in: Live, Loading, or Unloading are the only possible values.

The sixth column lists the current kernel memory offset for the loaded module. This information can be useful for debugging purposes, or for profiling tools such as oprofile. 
```

[资源](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Deployment_Guide/s2-proc-modules.html)

# android - 使用 jfeinstein10 Dex Loader 的滑动菜单

> ID：16203045
> 
> 赞同：0
> 
> 时间：2013-04-24T22:06:10.823
> 
> 标签：android

这是我的错误：

```
[2013-04-24 16:56:55 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-04-24 16:56:55 - ExampleListActivity] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl; 
```

我正在尝试启动 examplelistactivity。在android属性中，我定义了库，但没有在构建路径中...没有重复的库名称...我仍然找不到解决方案。

我在不同的项目中有 3 个 android-support-v4.jar，所以我将它们全部重命名......我应该采取什么其他选择？

编辑：我从两个库中删除了文件并且它有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:23:33.447

编辑：我从两个库中删除了文件并且它有效！

# c# - 从 Javascript 调用 MVC 控制器时的空值

> ID：16203048
> 
> 赞同：1
> 
> 时间：2013-04-24T22:06:22.710
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-4

在我的 MVC 视图模型中，我有一个表格，里面有一个表格。

从我的 javascript 中，我正在调用我的控制器，如下所示：

```
$.ajax(
    {
        type: "POST",
        url: "@Url.Action("ReorderClues", "Clues", Model)",
        data: JSON.stringify(positions),
        contentType:'application/json'
    }); 
```

我的控制器签名如下：

```
public ActionResult ReorderClues(TreasureHuntDetails treasureHuntDetails, int[] ids) 
```

我发现当 javascript 以这种方式调用控制器时，数据模型（TreasureHuntDetails 对象）仅填充了 TreasureHuntId，其他所有内容均为空。第二个参数，ids 数组填充成功 - 这是我在 ajax 函数中使用 JSON.stringify() 的参数。

我无法弄清楚为什么除了 TreasureHuntId 之外的其他所有内容都是空的。在表单中，对象的每个属性都有一个 HiddenFor 行，如下所示：

```
 @Html.HiddenFor(m => m.CompletionMessage)
        @Html.HiddenFor(m => m.Description)
        @Html.HiddenFor(m => m.Clues)
        @Html.HiddenFor(m => m.Leaderboard)
        @Html.HiddenFor(m => m.TreasureHuntId)
        etc. 
```

我看不出 TreasureHuntId 变量有什么特别之处，因为它是唯一一个其值是到达控制器的对象上唯一填充的变量。有任何想法吗？我可能做错了什么？

当我仅使用数据模型（TreasureHuntDetails）以正常方式调用控制器时，所有内容都会正确填充，因此它仅在我还在 Ids 数组上添加的 javascript 中（javascript 代码片段中的 'positions' 变量是一个整数数组）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:30:37.177

你实际上并没有把你的模型传回去。ID 存在的原因可能是因为它已经在 HttpGet 请求的 url 中。

首先，将您的网址更改为没有模型：

```
url: "@Url.Action("ReorderClues", "Clues")", 
```

然后更改您的 ajax 方法以将模型也传回：

```
data: { treasureHuntDetails: $("form").serialize(), ids: JSON.stringify(positions) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:17:43.870

这对我有用，我在下面留下了原始帖子：

```
$.ajax({
  type: 'POST',
  contentType: 'application/json',
  url: '@Url.Action("Contact", "Home")',
  data: JSON.stringify({
    completionMessage: $("#CompletionMessage").val(),
    description: $("#Description").val(),
    clues: $("#Clues").val(),
    leaderboard: $("#Leaderboard").val(),
    treasureHuntId: $("#TreasureHuntId").val(),
    ids: positions
  })
}); 
```

您需要从 Url.Action() 中删除“模型”，当然还需要将我的示例中的值更改为您正在使用的操作和控制器名称。为了清楚起见，我包含了“位置”变量，您的值将来自此闭包之外。

--- 原始答案 ---

您需要在为 AJAX 调用传递的数据中包含所有隐藏值。您所写的内容与您所写的一样有效，但不会包含您页面中的其他表单值。如果我不得不猜测，如果 TreasureHuntId 是一个整数，那么它会填充数组中来自位置变量的第一个值。您可能想要做的是将 Fiddler 放入并查看发布的内容。

在浏览器中查看您的 URL 的来源。与您的预期相比，这可能会让您感到惊讶。您是否依赖于默认路由？检查您是否在控制器中为此操作制定了任何特殊路线。

我认为最好的方法是手动创建对象：AJAX 上的 jQuery 文档指定数据设置是序列化查询字符串或对象。如果您使用对象，那么您可能希望将 dataType 更改为“json”，您不需要 contentType。

```
data: {
  CompletionMessage: $('#CompletionMessage').val(),
  Description:  $('#Description').val(),
  // other fields here...
  ids: JSON.stringify(positions)
} 
```

请注意，如果无法识别方法，您可能需要/想要更改控制器上的签名以接受单个参数与 TreasureHuntDetails 类。

或者，查看 jQuery 中的 serialize() 函数 - [$.post()](http://api.jquery.com/jQuery.post/)上的文档将帮助您找到解决方案。请记住，如果您走这条路线，那么您需要远程 contentType，因为它默认为正确的表单 MIME 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:53:45.843

I had the situation earlier this year where it was because my jQuery variable name was not the same as my actionresult parameter name. Don't ask why, but that was the problem for me.

# javascript - HTML5；在Javascript中检测物理键盘的存在

> ID：16203050
> 
> 赞同：9
> 
> 时间：2013-04-24T22:06:30.420
> 
> 标签：javascript, html, web-applications, mobile, webkit

检测用户是否有物理键盘的最可靠方法是什么？

一个想法是，由于没有物理键盘`window.onkeydown`可以`undefined`（而不是`null`）。但是由于虚拟键盘，我认为情况并非如此。虽然我没有测试。

如果用户没有键盘，我的目标是让在线计时器替换为轮式`input[type='number']`选择器[。](http://www.timer-tab.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T22:31:14.323

对于带有键盘、鼠标和触摸屏的 Microsoft Surface 等设备，这变得非常棘手。您可以在任何给定时间混合所有 3 种输入模式，或添加另一种输入法，如手写笔。

微软正在采取将输入事件抽象为“指针事件”的方法。此模型[已提交给 W3C](http://www.w3.org/Submission/2012/SUBM-pointer-events-20120907/)。这应该让您了解管理输入的趋势。

尽管如此，我发现查看触摸是否可用并在假设用户将至少在某些时候使用触摸输入的情况下操作是很方便的。这可能会导致设计决策以消除对触摸完全不友好的事物，即使这可能意味着损害鼠标/键盘功能。

在您的特定情况下，我会仔细研究您是否甚至需要`input[type=number]`用自定义控件替换。大多数触摸设备都相当现代，并且许多具有标准 HTML 输入的自定义、触摸友好版本。

还要记住本机控件可能“开箱即用”很好地支持的可访问性场景。

如果您决定实现自定义控件，那么我建议您检测触摸功能并显示您的自定义控件，无论是否存在其他输入机制。这意味着确保自定义控件（至少）是触摸/键盘/鼠标友好的。

这是我当前的触摸测试（声明明天可能会中断，当然还没有在每台设备上测试过）：

```
var supportsTouch = ("ontouchstart" in window) || window.navigator.msMaxTouchPoints > 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T22:06:30.420

我看到两种方法。

第一种方法是监听每个鼠标和键盘事件。拥有鼠标的用户很可能也拥有键盘。访问网站的用户可能会移动鼠标。

第二种方法是检查用户代理以读取正在运行的操作系统，并假设 Android 和 iOS 设备没有任何键盘。对于 Windows 8，我看不出用户代理有什么帮助，因为 Windows 8 可以在平板电脑和台式机/笔记本电脑上运行。

不过，我宁愿有一个更优雅的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:28:03.650

检测触摸屏并显示特殊小部件更可靠；只需确保键盘仍然可以与您的精美小部件一起使用，以方便访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-28T23:28:57.533

您可以通过检查操作系统甚至屏幕尺寸来确定键盘类型。Android、iOS 和所有小屏幕设备往往没有物理键盘。

# netflix - Netflix 观看历史

> ID：16203053
> 
> 赞同：1
> 
> 时间：2013-04-24T22:06:36.530
> 
> 标签：netflix

我正在寻找通过一些有用的过滤（按日期、按类别、LastWatched 等）列出已定义用户的所有查看历史记录的能力。

有没有足够熟悉 API 的人告诉我这是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:18:31.090

Netflix 似乎[已从其 API 中删除了此功能](http://blog.programmableweb.com/2012/08/31/netflix-removing-rental-history-from-public-api/)。猜测认为，这与[有关用户隐私的集体诉讼有关](http://arstechnica.com/tech-policy/2012/07/class-action-lawsuit-settlement-forces-netflix-privacy-changes/)。他们没有说是否会恢复功能。

# ruby-on-rails - Ruby解析数组（特例）

> ID：16203057
> 
> 赞同：2
> 
> 时间：2013-04-24T22:07:28.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parsing, mysql2

我正在执行查询并从数组中的数据库中获取以下数据（MySql2 类型对象）：

```
 +-----------+---------------+---------------+------+------+---------------+
 | build     | platform_type | category_name | pass | fail | indeterminate |
 +-----------+---------------+---------------+------+------+---------------+
 | 10.0.1.50 | 8k            | UMTS          |   10 |    2 |             5 |   
 | 10.0.1.50 | 8k            | UMTS          |   10 |    2 |             5 | 
 | 10.0.1.50 | 8k            | IP            |   10 |    2 |             5 | 
 | 10.0.1.50 | 8k            | IP            |   14 |    1 |             3 | 
 | 10.0.1.50 | 9k            | IP            |   14 |    1 |             3 | 
 | 10.0.1.50 | 9k            | IP            |   12 |    1 |             1 | 
 | 10.0.1.50 | 9k            | UMTS          |   12 |    1 |             1 | 
 | 10.0.1.50 | 9k            | UMTS          |   12 |    1 |             1 | 
 | 10.0.1.50 | 9k            | UMTS          |   12 |    1 |             1 | 
 | 10.0.1.50 | 9k            | Stability     |    9 |    4 |             0 | 
 | 10.0.1.50 | 9k            | Stability     |   15 |    1 |             0 | 
```

我想在表格中的 UI 上显示它，如下所示：

```
 +-----------+---------------+---------------+------+------+---------------+
 | build     | platform_type | category_name | pass | fail | indeterminate |
 +-----------+---------------+---------------+------+------+---------------+
 |           |               | UMTS          |   20 |    4 |            10 |
 |           | 8k            |---------------------------------------------|
 |           |               | IP            |   24 |    3 |             8 |
 |           |---------------|---------------------------------------------|
 | 10.0.1.50 |               | IP            |   26 |    2 |             4 |
 |           |               |---------------------------------------------|
 |           | 9k            | UMTS          |   36 |    3 |             3 |
 |           |               |---------------------------------------------|
 |           |               | Stability     |   24 |    5 |             0 |
 --------------------------------------------------------------------------- 
```

我确实尝试使用哈希来查找构建的唯一平台类型。但是由于我对 ruby​​ 很陌生，所以我无法正确使用哈希。如果有人可以帮助我解析数据，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:55:13.220

假设您有一个数组数组：

```
@data = sql_results.group_by(&:first).map do |b, bl|   
  [b, bl.group_by(&:second).map{|p, pl| [p, pl.map{|r| r[2..-1]}] }.sort_by(&:first)]
end.sort_by(&:first) 
```

以下是如何分解逻辑。

*   按第一列对行进行分组。这将返回一个散列，其中键作为第一列名称，值作为行数组。
*   按第二列（平台类型）对每个构建列表进行分组。每个组应包含从 3 到最后一个 col 的 col 值数组。
*   按平台类型对平台列表进行排序
*   按构建名称对构建列表进行排序

生成的结构如下所示：

```
[
  [
    "10.0.1.50", [
      [
        "8k", [
          ["UMTS", 20, 4, 10],
          ["IP", 24, 3, 8]
        ]
      ], 
      [
        "9k", [
          ["IP", 26, 2, 4],
          ["UMTS", 36, 3, 3],
          ["UMTS", 24, 5, 0]
        ]
      ]
    ]
  ]
] 
```

您可以在视图布局示例中使用它：

```
%table
  %tr
    - %w(build platform_type category_name pass fail indeterminate).each do |name|
      %th=name
  - @data.each do |build, build_list|
    %tr
      %td=build
      %td{:colspan=4}
        %table
          - build_list.each do |build, platform_list|
            %tr
              %td=build
              %td{:colspan=3}
                %table
                  - platform_list.each do |row|
                    %tr
                      - row.each do |attr|
                        %td=attr 
```

如果您使用 AR 模型，请执行以下操作：

```
class  Build < ActiveRecord::Base

  def self.builds_by_platform
    reply = Hash.new{|h, k| h[k] = Hash.new{|h, k| h[k] = []}}
    Build.order("build ASC, platform_type ASC").find_each do |row|
      reply[row.build][row.platform_type] << row
    end
    reply.map{|b, bh| [b, bh.sort_by(&:first)}.sort_by(&:first)
  end

end 
```

在您的控制器中，您可以通过以下方式访问规范化变量：

```
@report _list = Build.builds_by_platform 
```

您可以使用该`@report _list`变量来呈现表格。

# php - 如何在 php 中按名称设置类成员？

> ID：16203063
> 
> 赞同：-4
> 
> 时间：2013-04-24T22:07:33.900
> 
> 标签：php

我想从几种不同的格式中反序列化一个字符串。第一种格式是json。

```
$myObj = new myObject();
$unserialized = json_decode($input, true);
foreach ($unserialized as $member_name => $value){
    $myObj[$member_name] = $value; // <= How do I do what this is trying to do?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:11:19.460

就这么简单：

```
$myObj->$member_name = $value; 
```

# ios - IOS-从 App Store 安装超过顶级 ad hoc

> ID：16203070
> 
> 赞同：0
> 
> 时间：2013-04-24T22:08:27.770
> 
> 标签：ios, xcode, app-store, installation, adhoc

我最近遇到了以下情况的问题：

1）。
通过 XCode 2)在另一台设备上安装了我的应用程序。修复了一些问题并提交到 App Store
3)。使用第 1 步中的设备的用户从商店下载了应用程序

我们注意到他们仍然遇到了在第 2 步中修复的一些问题。

我们让他们删除应用程序并再次从商店下载，问题不存在。我们在 2 个不同的设备上执行了这些步骤，结果相同。

这可能是我做过的事情，但有没有其他人经历过这个或者可以解释这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:43:11.990

我过去曾对这种情况感到困惑。

我建议当您进行临时构建时，您应该在提交到应用商店之前增加版本号。如果 adhoc 在设备上并且构建被推送到商店，那么用户将不会收到有关它的通知并且会感到困惑。如果您提供给用户的 ad hoc 版本是 1.9，但商店版本是 2.0，您的场景可能已经解决。

# python - 在 python 奇怪的行为中发送电子邮件

> ID：16203071
> 
> 赞同：1
> 
> 时间：2013-04-24T22:08:31.513
> 
> 标签：python, smtp, gmail, sendmail

我正在编写一段代码，它定期从 4 个不同的帐户发送电子邮件，其中 2 个是 gmail 帐户，另外 2 个是 yahoo 帐户。当我开始编写代码时，我能够使用以下代码从两个 gmail 帐户发送所有电子邮件：

```
 def sendGmail(self, fromaddr, toaddr, username, password, 
        email_body, email_subject
    ):          
    # Build the email
    msg = MIMEText(email_body)
    msg['Subject'] = email_subject
    msg['From'] = fromaddr
    msg['To'] = toaddr

    try:
        # The actual mail send
        server = smtplib.SMTP('smtp.gmail.com:587')
        server.starttls()  
        server.login(username,password)  
        server.sendmail(fromaddr, toaddr, msg.as_string())  
        server.quit()
        print "email sent: %s" % fromaddr
    except Exception as e:
        print "Something went wrong when sending the email %s" % fromaddr
        print e 
```

正如我所说，这段代码运行良好，现在我添加了 sendYahoomail()，这是一种不同的方法，我总是得到 (530, 'Access denied') 作为使用 sendGmail() 的异常。我很确定这与我的 Yahoo 方法无关，我可以使用 gmail 凭据正确地从浏览器登录。

可能有什么问题，或者只是 Gmail 不希望我通过代码发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T08:36:38.500

我用我的 Gmail 帐户尝试了上面的代码（实际上它是一个 Google Apps 帐户，但应该是相同的），它对我来说很好用。我什至尝试了不正确的“发件人”标头，并且还在 SMTP 级别使用了不正确的源地址——Gmail 两次都允许我发送电子邮件，但似乎悄悄地修复了出口的标头。不过，您可能希望仔细检查您的发件人地址是否与您的用户名匹配。如果您当前仅使用 @ 之前的部分，也请尝试使用完整的电子邮件地址作为用户名。

我还尝试了错误的密码并收到错误 535，这与您看到的不同。由于我启用了 2 因素身份验证，因此我还尝试了我的真实密码而不是特定于应用程序的密码，但仍然出现 535 错误（但显示“需要应用程序特定密码”的消息）。

您的 ISP 是否有可能设置了拦截与 Gmail 的 SMTP 连接的东西？似乎不太可能，尽管我的 ISP 曾经在端口 587 上阻止了对 Gmail 的访问，尽管端口 465 仍然有效。也许您可以尝试`smtplib.SMTP_SSL`在端口 465 上使用以防万一，看看这是否会给您带来更多乐趣。

您也可以尝试发送到不同提供商的地址，以防 Gmail 出于该原因拒绝发送（例如，如果其他提供商已被列入垃圾邮件黑名单）。此外，如果您的电子邮件可能看起来像垃圾邮件，请尝试使用接近真实电子邮件的邮件主题和正文进行编码，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T18:33:33.503

您可能会发现这很有帮助： https: [//support.google.com/mail/answer/14257](https://support.google.com/mail/answer/14257)

基本上，谷歌检测到有人试图从它认为不熟悉的服务器登录，并阻止了它。上面的链接可让您尝试取消阻止它。

有时它对我有用，有时却没有。

# php - php相当于python中的“if example in data”

> ID：16203072
> 
> 赞同：0
> 
> 时间：2013-04-24T22:08:32.090
> 
> 标签：php, python

我是 python 的 php 新手。在 php 中，我想在 python 中执行类似“if example in data”之类的操作，我可以简单地做我想做的事情

```
string = "this is an example"
if "example" in string:
    return True
else:
    return False` 
```

有没有一种简单的方法可以在 php 中执行此操作？我查看了 foreach 语句以及 php 中的 if 语句，但我找不到任何示例。任何简单或“干净”的方式都会很好。其次，如果有办法从 print_r 数组中获得特定结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:12:00.853

要检查字符串中是否存在值，请使用`strpos`：

```
if (strpos($string, 'mystring') !== false) 
```

要检查数组中是否存在键，请使用`array_key_exists`：

```
if (array_key_exists('key', $array)) 
```

# actionscript-3 - 上传loader.loaderInfo.byte

> ID：16203077
> 
> 赞同：1
> 
> 时间：2013-04-24T22:08:55.773
> 
> 标签：actionscript-3, flash, apache-flex, image-uploading

我正在尝试使用 ByteArray 从移动应用程序上传图像。

需要使用 Loader 类（loadFilePromise）加载源图像数据。当我尝试使用 URLRequestWrapper 上传 loader.loaderInfo.byte 时，它​​无法在服务器端生成正确的图像。

当我检查数据时，我注意到数据大小与设备上实际生成的图像文件不同。

**loader.loaderInfo.byte**

> bytesAvailable 19008 [0x4a40]
> endian "bigEndian"
> 长度 19008 [0x4a40]
> objectEncoding 3
> 位置 0

**通过 URLLoader 加载的二进制图像数据**

> bytesAvailable 18946 [0x4a02]
> endian "bigEndian"
> 长度 18946 [0x4a02]
> objectEncoding 3
> 位置 0

是否可以通过 loader.loaderInfo.byte 上传图片数据？如果是这样，怎么做？

非常感谢您提前。

# c# - 将自定义事件添加到集合编辑器

> ID：16203078
> 
> 赞同：1
> 
> 时间：2013-04-24T22:08:57.260
> 
> 标签：c#, winforms, user-controls, design-time

我希望有人能指出我正确的方向吗？

这是一个 C# .Net Winforms 问题，我使用的是 VS2010 Express。

我创建了一个嵌入在用户控件中的**List<>**集合。我可以使用 Designer's **Collection Editor 编辑**列表的属性。我现在还想在集合编辑器中包含一个**自定义事件** *（例如 ItemSelected） 。*这就是我卡住的地方，因为我已经在谷歌上搜索了几个小时，但找不到答案。*（可能是我没有使用正确的搜索短语或其他什么？）*

有没有人能够做到这一点，或者集合编辑器仅适用于属性？

这是我尝试过的，但它只是没有出现......

```
public delegate void ItemSelectedHandler(object sender);

        [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]        
        public event ItemSelectedHandler ItemSelected; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:42:37.417

您不需要集合编辑器来编辑事件，这仅适用于事物列表。您可以`ItemSelected`在属性窗口中找到您的事件，方法是单击闪电以显示选中您的用户控件的事件。

# ember.js - 我在哪里可以找到有关 Ember 的 {{control}} 的文档？

> ID：16203082
> 
> 赞同：0
> 
> 时间：2013-04-24T22:09:24.637
> 
> 标签：ember.js

我在 Ember API 中没有看到列表。在哪里可以找到此模板方法的哪些参数？鉴于它是一个未完成的功能，我可以使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:15:47.867

使用它并不是一个好主意，`{{control}}`因为它仍在开发中，很可能会改变行为。基本上它就像一个`{{render}}`不会继承任何上下文的沙盒。在 emberjs 指南的[这个页面](http://emberjs.com/guides/templates/rendering-with-helpers/)上提到：

> {{control}} 像渲染一样工作，除了它为每次调用使用一个新的控制器实例，而不是重用单例控制器。
> 
> 这个助手目前正在大力开发中，并且可能很快就会改变。

# c# - 防御 T-SQL 注入

> ID：16203087
> 
> 赞同：1
> 
> 时间：2013-04-24T22:09:44.877
> 
> 标签：c#, sql, sql-server, tsql, code-injection

抱歉，如果这似乎是一个愚蠢的问题，但是使用参数如何防止 SQL 注入以及与 T-SQL 相关的最佳实践是什么：

例如：这是最佳实践吗？

```
SqlCommand SqlCmd = new SqlCommand("SQL Command @X ....... @Y");
SqlCmd.CommandType = CommandType.Text;
SqlCmd.Parameters.AddWithValue("@X", SqlDbType.VarChar).Value = X;
SqlCmd.Parameters.AddWithValue("@Y", SqlDbType.date).Value = Y;
SqlCmd.Connection = ConnectionString; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:12:00.537

是的，这段代码不会受到 SQL 注入的影响。

原因是在使用参数时，您将项目作为值传递给您的服务器，它们将被解释为这样。

如果您要构造一个字符串，SQL 无法知道值是什么以及查询是什么，并且必须完全依赖语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:28:44.653

最佳实践是使用 SQL 参数。使用 SqlParameterCollection （如您的示例：）`SqlCmd.Parameters`自动为您提供：

1.  类型检查
2.  长度验证
3.  输入被视为文字值而不是可执行代码
4.  处理通常涉及 SQL 注入攻击的特殊字符

[还有一些额外的最佳实践](http://msdn.microsoft.com/en-us/library/ff648339.aspx)，包括：

*   约束和清理输入数据
*   使用在数据库中具有受限权限的帐户
*   避免泄露数据库错误信息

您将在此[OWASP SQL 注入预防备忘单](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)中找到进一步描述的最佳实践。

# bash - 具有多个条件的 Bash if 语句会引发错误

> ID：16203088
> 
> 赞同：186
> 
> 时间：2013-04-24T22:09:46.933
> 
> 标签：bash, if-statement, flags

我正在尝试编写一个脚本来检查两个错误标志，如果一个标志（或两个）被更改，它会回显——发生错误。我的脚本：

```
my_error_flag=0
my_error_flag_o=0
do something.....
if [[ "$my_error_flag"=="1" || "$my_error_flag_o"=="2" ] || [ "$my_error_flag"="1" &&     "$my_error_flag_o"="2" ]]; then
    echo "$my_error_flag"
else
    echo "no flag"
fi 
```

基本上，它应该是：

```
if ((a=1 or b=2) or (a=1 and b=2))
  then
     display error
else
     no error
fi 
```

我得到的错误是：

```
 line 26: conditional binary operator expected
 line 26: syntax error near `]'
 line 26: `if [[ "$my_error_flag"=="1" || "$my_error_flag_o"=="2" ] || [ "$my_error_flag"="1" && "$my_error_flag_o"="2" ]]; then' 
```

我的括号乱了吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2013-04-24T22:12:40.520

使用`-a`(for and) 和`-o`(for or) 操作。

[tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)

更新

实际上你仍然可以使用和`&&`操作。所以你的脚本会是这样的：`||``-eq`

```
my_error_flag=1
my_error_flag_o=1
if [ $my_error_flag -eq 1 ] ||  [ $my_error_flag_o -eq 2 ] || ([ $my_error_flag -eq 1 ] && [ $my_error_flag_o -eq 2 ]); then
      echo "$my_error_flag"
else
    echo "no flag"
fi 
```

尽管在您的情况下，您可以丢弃最后两个表达式，而只使用一个或这样的操作：

```
my_error_flag=1
my_error_flag_o=1
if [ $my_error_flag -eq 1 ] ||  [ $my_error_flag_o -eq 2 ]; then
      echo "$my_error_flag"
else
    echo "no flag"
fi 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-11-28T10:08:11.713

您可以使用其中一个`[[`或`((`关键字。使用`[[`关键字时，必须使用字符串运算符，例如`-eq`, `-lt`。我认为 ,`((`最适合算术，因为您可以直接使用`==`,`<`和等运算符`>`。

使用`[[`运算符

```
a=$1
b=$2
if [[ a -eq 1 || b -eq 2 ]] || [[ a -eq 3 && b -eq 4 ]]
then
     echo "Error"
else
     echo "No Error"
fi 
```

使用`((`运算符

```
a=$1
b=$2
if (( a == 1 || b == 2 )) || (( a == 3 && b == 4 ))
then
     echo "Error"
else
     echo "No Error"
fi 
```

不要使用`-a`or`-o`运算符，因为它不是便携式的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-11T06:06:59.780

请尝试以下

```
if ([ $dateR -ge 234 ] && [ $dateR -lt 238 ]) || ([ $dateR -ge 834 ] && [ $dateR -lt 838 ]) || ([ $dateR -ge 1434 ] && [ $dateR -lt 1438 ]) || ([ $dateR -ge 2034 ] && [ $dateR -lt 2038 ]) ;
then
    echo "WORKING"
else
    echo "Out of range!" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-01T11:04:38.720

`entrypoint.sh` [您可以通过阅读由 MySQL 的贡献者编写的脚本](https://github.com/docker-library/mysql/blob/087cca9a04a1c4e078656eb9f082342b8ecb9b92/5.5/docker-entrypoint.sh#L14-L18)来获得一些灵感，该脚本检查是否设置了指定的变量。

如脚本所示，您可以使用 管道它们`-a`，例如：

```
if [ -z "$MYSQL_ROOT_PASSWORD" -a -z "$MYSQL_ALLOW_EMPTY_PASSWORD" -a -z "$MYSQL_RANDOM_ROOT_PASSWORD" ]; then
    ...
fi 
```

# pointers - 如何将指针分配给矩阵的对角线？

> ID：16203092
> 
> 赞同：1
> 
> 时间：2013-04-24T22:10:06.680
> 
> 标签：pointers, matrix, fortran, fortran95

我有一个矩阵说`REAL*8 MATRIX(100,100)`，我想从主对角线或上三角形创建一个指针。怎么做？

目的是以干净的“命名”方式轻松访问这些元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T00:37:56.737

对于主对角线，请小心，您可以执行以下操作：

```
PROGRAM diagonal
  IMPLICIT NONE
  REAL, TARGET :: array(4,4)
  REAL, POINTER :: ptr(:)
  INTEGER :: i
  array = RESHAPE([(i,i=1,SIZE(array))], SHAPE(array))
  CALL get_diagonal_pointer(array, SIZE(array, 1), ptr)
  PRINT "(*(G0,:,','))", ptr
CONTAINS
  SUBROUTINE get_diagonal_pointer(arr, n, ptr)
    REAL, INTENT(IN), TARGET :: arr(*)
    INTEGER, INTENT(IN) :: n
    REAL, INTENT(OUT), POINTER :: ptr(:)
    !****
    ptr => arr(1:n*n:n+1)
  END SUBROUTINE get_diagonal_pointer
END PROGRAM diagonal 
```

但请注意，`array`在主程序中*只是连续的*并且具有 TARGET 属性。如果`array`不是简单地连续，那么事情会变得……复杂。

您可以使用中间等级一指针和指针边界重新映射来完成相同的操作。适用与假定规模方法相同的要求。

```
REAL, POINTER :: tmp(:)
tmp(1:SIZE(array)) => array
ptr => tmp(::SIZE(array,1)+1) 
```

矩阵的上三角形不是“规则的”（您要指向的元素之间的间距会有所不同），因此无法指向它。

# php - 使用 PHP 如何在不同服务器上的脚本之间安全地传递变量

> ID：16203098
> 
> 赞同：1
> 
> 时间：2013-04-24T22:10:23.197
> 
> 标签：php, login

我在服务器 A 上的一个服务器上有一个登录表单。托管在另一台服务器服务器 B 上，我有一个脚本来检查数据并返回结果。服务器 B 将结果发送到服务器 A，但我不想通过各种重定向将结果返回到 URL 或标头中，因为人们可以欺骗“真/假”来更改登录结果。

例如

![](https://i.stack.imgur.com/RzpZX.png)

我不能使用 HTTPS/SSL，因为我的网络主机不免费支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:19:46.813

您可以在服务器之间建立一个 ssh 隧道，让 B 上的 Web 服务器仅在 localhost:Bs_tunnel_port 上侦听，而 A 连接到其 localhost:As_tunnel_port。

或者让 SSL 事情继续下去...... ;)

# jquery-ui - JQuery自动完成不显示结果

> ID：16203100
> 
> 赞同：0
> 
> 时间：2013-04-24T22:10:38.557
> 
> 标签：jquery-ui

我正在尝试在我的表单上实现自动完成 jQuery

我有一个 CIE 输入字段，这是我的 js 代码：

```
<script type="text/javascript">
    $(function () {
        $("#cie").autocomplete({
            minLength: 3,
            source: "autocomplete"
        })
    });
</script> 
```

源是“自动完成”，它是一个返回 JSON 字符串的 url，例如：

```
{"results":[{"id":1,"label":"Result 1","value":"Result 1"}]} 
```

但是当我尝试使用我的字段时，只显示一个没有结果的空字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:22:46.620

自动完成无法识别密钥`results`，因此您必须尝试以下操作：

```
$( "#cie" ).autocomplete({
  minLength: 3,
  source: function( request, response ) {
    $.getJSON( "autocomplete", request, function( data, status, xhr ) {
      response( data.results );
    });
  }
}); 
```

# ios - ScrollView - 发送触摸到下面的视图

> ID：16203101
> 
> 赞同：0
> 
> 时间：2013-04-24T22:10:42.673
> 
> 标签：ios, scrollview, gestures, touches

我的设置 - 我无法更改 - 现在是：

根视图
- UIView
- ScrollView2
- ScrollView1（这是视图层次结构的顶部）

第一个滚动视图用于在下面的 UIView 上应用一些转换。第二个scrollviews contentoffset（在scrollViewDidScroll中捕获：）用于应用其他动画。

**问题：**如何将所有触摸从 ScrollView1 转移/委托到 ScrollView2？请注意，ScrollView1 位于所有内容之上，而其他视图位于其**下方**- 而不是子视图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:59:34.873

您可以将滚动视图中的平移手势识别器添加到您想要的任何其他视图，这将有效地将目标视图中的触摸委托给滚动视图。如果要控制缩放，还可以添加捏合手势识别器。

# c++ - 释放赋值运算符 C++ 分配的内存

> ID：16203103
> 
> 赞同：0
> 
> 时间：2013-04-24T22:10:54.687
> 
> 标签：c++

我正在阅读这篇文章[为什么我们需要在 C++ 赋值运算符中删除分配的内存？](https://stackoverflow.com/questions/6722643/why-do-we-need-to-delete-allocated-memory-in-c-assignment-operator)我对赋值运算符中的新操作分配的内存有疑问。在我们分配给一个 MyString 对象 testObject 之后，它是如何被释放的呢？testObject 的析构函数是否会在超出范围时被调用，或者我必须显式调用 delete 来释放该内存？

```
const MyString& operator=(const MyString& rhs)
{ 
    if (this != &rhs) {
        delete[] this->str; // Why is this required?
        this->str = new char[strlen(rhs.str) + 1]; // allocate new memory
        strcpy(this->str, rhs.str); // copy characters
        this->length = rhs.length; // copy length
    }
    return *this; // return self-reference so cascaded assignment works
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:17:17.467

当你有这个时会发生什么？

```
{
  MyString s = "Something";
} 
```

这将首先构造 a `MyString`，它可能会动态分配一个 s 数组`char`来存储字符串数据。然后`s`变量超出范围，`MyString`对象被销毁。它的析构函数应该清理任何动态分配的内存`delete[] str`。

假设您像这样使用它：

```
{
  MyString s = "Something";
  s = some_other_string;
} 
```

现在`MyString`对象以相同的方式构造，为字符串数据分配内存。然后第二行将调用赋值运算符。如果按照您所描述的那样实现，则现有分配的`char`数组将是`delete`d 并且将分配一个新的数组，其中包含与`some_other_string`. 然后*这个*新分配的数组将在`s`超出范围时被析构函数销毁。

析构函数只是`delete[]`成员`str`指向的任何内容。在调用了赋值运算符之后，它正在`delete[]`处理新分配的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:21:47.283

当您`str`分配字符串数组来保存`rhs`. 如果您`str`在覆盖之前没有删除它，您将永远无法从堆中删除它曾经指向的内容。它曾经指向的那个内存块仍将保留在堆中，并且不可再使用。如果您的程序执行此操作的次数足够多，那么您将耗尽堆中的空间并且您的程序将会死掉。这称为内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:02:21.387

首先，您不必在赋值运算符中删除。如果您覆盖指向以前动态分配的内存的指针，您只需删除。更好的实现方式`MyString`是跟踪容量，并且仅在需要更多容量时才重新分配（和删除）。

此外，在您的实现中，您在分配*之前*删除。如果分配失败，这将导致未定义的行为；你必须在删除*之前*做所有可能失败的事情。在这种情况下，您不需要自我分配测试；自赋值测试的必要性通常表明您的赋值运算符已损坏。

把这两件事放在一起，我们会得到类似的东西：

```
MyString const&
MyString::operator( MyString const& other )
{
    if ( capacity < other.length ) {
        char* tmp = new char[ other.length ];
        delete str;
        str = tmp;
        capacity = other.length;
    }
    memcpy( str, other.str, other.length );
    length = other.length;
    return *this;
} 
```

删除是有条件的，删除是*在*分配之后，我们总是用`length`成员来表示长度，而不是混合`strlen`和长度成员。

# jquery - 在跟踪父/子关系时迭代嵌套列表

> ID：16203105
> 
> 赞同：1
> 
> 时间：2013-04-24T22:10:56.643
> 
> 标签：jquery, html

感谢您花时间考虑我的问题。我正在创建一个界面，允许用户基本上使用 UL 和 LI 标签制作类别列表。然后我通过 PHP 将这些信息存储在 MySQL 数据库中，这样就可以对其进行检索并维护格式。我已经解决了 PHP 方面的问题，并从数据库中提取了树并对其进行了格式化。我遇到问题的部分是通过表单提交保存列表，并以可以循环遍历所有数据并知道父/子关系的方式将其传递给 PHP。

列表的示例可能如下所示：

```
<ul>
<li>FAQ
    <ul>
        <li>Installing SynergiesMOD</li>
        <li>Updating SynergiesMOD</li>
        <li>Mod Not Working</li>
    </ul>
</li>
<li>Characters
    <ul>
        <li>Necromancer
            <ul>
                <li>Moves</li>
                <li>Guides</li>
            </ul>
        </li>
        <li>Warlock
            <ul>
                <li>Moves</li>
                <li>Guides</li>
            </ul>
        </li>
    </ul>
</li>
</ul> 
```

此列表是完全可编辑的，因此任何特定内容都可以在提交到 PHP 代码进行解析和存储在数据库中之前进行移动、删除或添加新类别。我绞尽脑汁，想不出一种在将数据传递给 PHP 时在保持家庭关系的同时遍历类别的方法。如果你们中的任何人有任何想法或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:24:53.873

您还没有完全描述您将如何编辑列表中的每个项目。我想我会通过在每个项目上包含每个项目的 ID 的超链接来做到这一点，并用下划线连接，例如

```
1  FAQ
2  Characters

1_1 InstallingSynergiesMOD
1_2 UpdatingSynergiesMOD
1_3 Mod Not Working
2_1 Necromancer
2_2 Warlock

2_1_1 Moves
2_1_2 Guides

2_2_1 Moves
2_2_2 Guides 
```

我假设层次结构中的每个项目都有一个关联的 id。

当您单击超链接时，您可以显示相同的层次结构，但列表项被替换为 NAME="x_y" 的 INPUT 字段。如果按下 Ok 按钮（或其他），这将导致 FORM 与字段的数据一起提交。您传递字段的名称以获取 ID，然后使用新值更新您的数据库。最后打印出新列表。

当然，您可以使用 JSON/XML XMLHttpRequest 而不是使用 FORM 来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:15:08.987

每个都`li`应该有一个`nodeId`（可能是`id`的`li`），然后您需要`parentNodeId`在 javascript 中计算 a，引用其父级，以保持层次关系

# ruby - Mongoid：如何实现嵌入文档之间的关系？

> ID：16203108
> 
> 赞同：7
> 
> 时间：2013-04-24T22:11:05.283
> 
> 标签：ruby, mongoid

我有一种情况，我有一个父文档，并且我想要两种不同类型的嵌入文档：一种作为父文档，另一种作为具有可选父文档的子文档。例如：

```
class ParentDoc
  include Mongoid::Document
  embeds_many :special_docs
  embeds_many :special_doc_groupings
end

class SpecialDoc
  include Mongoid::Document
  embedded_in :parent_doc
  belongs_to :special_doc_groupings
end

class SpecialDocGrouping
  include Mongoid::Document
  embedded_in :parent_doc
  has_many :special_docs
end 
```

在此示例中，SpecialDocs 和 SpecialDocGroupings 可以不存在关系，也可以有父子关系。

然而，这是一个无效的 Mongoid 关联，因为我们得到了这个错误：

> Mongoid::Errors::MixedRelations:
> 
> 问题：由于嵌入了 SpecialDoc，因此不允许通过关系关联从 SpecialDocGrouping 文档中引用 (n) SpecialDoc 文档。
> 
> 摘要：为了从 SpecialDocGrouping 正确访问一个（n）SpecialDoc，引用需要通过 SpecialDoc 的根文档。在一个简单的情况下，这将需要 Mongoid 为根存储一个额外的外键，在更复杂的情况下，SpecialDoc 是多个级别的深度，则需要为层次结构中的每个父级存储一个键。
> 
> 解决方案：考虑不嵌入 SpecialDoc，或者在应用程序代码中以自定义方式进行密钥存储和访问。

除了 Mongoid 不支持它之外，我认为我尝试创建的关联类型没有任何问题。

我如何自己实现这种类型的关联？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-26T13:49:21.867

该关联无效，因为当您引用嵌入式模型时，Mongoid 不会将父键存储为外键。这意味着如果您有：

```
Class Parent        
   embeds_many :children
end 

Class Child
   embedded_in :parent
end 
```

您不能引用仅存储其外键的子文档，但**您需要存储所有父键，直到您到达 root**。在这种情况下，根由第一个父级表示，您需要存储 2 个密钥。

您可以手动完成此操作，并毫无问题地创建这种类型的关联。

您的情况有点不同（并且更容易），因为您想创建嵌入在同一父项中的两个模型之间的关联。这意味着理论上您不需要存储父键，因为模型共享相同的根。Mongoid 不处理这种情况，因此您需要手动创建关联规则和方法。

```
Class Bar
  embeds_many :beers
  embeds_many :glasses
end

Class Beer
  embedded_in :bar
  # Manual has_many :glasses association
  def parent
     self.bar
  end

  def glasses
     parent.glasses.where(:beer_id => self.id)
  end

end

Class Glass
   embedded_in :bar
   # Manual belongs_to :beer association
   field :beer_id, type: Moped::BSON::ObjectId
   def parent
      self.bar
   end

   def beer
      parent.beers.find(self.beer_id)
   end
end 
```

（代码未经测试）

# ajax - 如何在 JSF2 中正确使用 f:selectItem？

> ID：16203110
> 
> 赞同：1
> 
> 时间：2013-04-24T22:11:24.393
> 
> 标签：ajax, jsf-2

伙计们，当用户选择combo_pedido_tipoplm selectOneMenu的一个选项时，我需要更新另一个selectOneMenu。如果用户选择“选择一个”选项，则需要清除第二个选项。

我已经尝试了所有方法，但在我从 h:selectOneMenu 中选择了选项“选择一个”(Selecione) 后，我无法调用我的 actionListener。

XHTML

```
<h:selectOneMenu id="combo_pedido_tipoplm" value="#mBeanManterPedido.tipoPlacaMaeFiltro}" required="true" disabled="#{!mBeanManterPedido.pedidoValido or mBeanManterPedido.clonado}">
    <f:selectItem itemLabel="#{msgTemplate.lblSelecione}" />
    <f:selectItems value="#{mBeanManterPedido.selectItemsTipoPlacaMae}" />
    <p:ajax event="change" listener="#{mBeanManterPedido.tipoPlacaMaeChange}"   process="@this"/>
</h:selectOneMenu> 
```

MBean

```
private TipoPlacaMae tipoPlacaMaeFiltro;

public void popularTipoPlacaMae() {
        this.selectItemsTipoPlacaMae = new ArrayList<SelectItem>();
        for (TipoPlacaMae tipoplaca : TipoPlacaMae.values()) {
            this.selectItemsTipoPlacaMae.add(new SelectItem(tipoplaca, tipoplaca.getNome()));
        }
        UtilsCommon.orderByLabel(selectItemsTipoPlacaMae);
    }

public void tipoPlacaMaeChange(AjaxBehaviorEvent e) {
        // deseleciona a PlacaMae atualmente selecionada.
        pedido.setPlacaMae(null);
        limparDadosPedido();
        popularPlacaMae();
    } 
```

如果我选择“选择一个”选项，我会收到一个验证错误，因为这个 selectOneMenu 被重新查询，并且我的 tipoPlacaMaeFiltro 设置器没有被调用。

```
<?xml version='1.0' encoding='UTF-8'?> 
```

{“验证失败”：真}

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:03:08.437

对于那些有同样疑问的人。

您需要将 immediate="true" 放入您的 ajax 请求中。

```
<h:selectOneMenu id="id"
                    value="#{mbean.value}" required="#{mbean.required}"
                    converter="#{mbean.converter}">
                    <f:selectItem itemLabel="Chose one" />
                    <f:selectItems value="#{mbean.selectItems}" />
                    <f:ajax event="valueChange"  listener="#{mbean.onchange}"
                        render="second_combo"
                        immediate="true">
                    </f:ajax>
                </h:selectOneMenu> 
```

之后，在 ManagedBean 中，您需要实现但以不同方式处理侦听器

```
public void onchange(AjaxBehaviorEvent e) {
    YourClass o = getSelectedValue(e);
}

private YourClass getSelectedValue(AjaxBehaviorEvent e)
{
    if (e != null)
    {   
        UISelectOne select = (UISelectOne) e.getSource();
        if (select.getSubmittedValue() == null ||
                select.getSubmittedValue().toString().isEmpty()) {
            return null;
        }
        else {          
            String id = select
                    .getSubmittedValue().toString();
                return ObjectThatImplementsConverterInterface.getAsObject(FacesContext.getCurrentInstance(), select, id);
        }
    }
    return null;
} 
```

不幸的是，您必须以这种方式处理，因为如果您不这样做，用户可以选择“选择一个”并且 mbean.value 将是 OK (null)，之后在同一 SelectOneMenu 中的第二个选择将触发先前选择的值 (null ）。我不知道这是发生在每个人身上还是只是我。

再见。

# css - onestepcheckout login popup css change from the checkout page in magento

> ID：16203111
> 
> 赞同：0
> 
> 时间：2013-04-24T22:11:32.503
> 
> 标签：css, magento, checkout

我在使用 onestepcheckout 登录弹出窗口时遇到问题，它在计算机的普通浏览器中工作正常，但是在尝试使用 iPhone 登录时，登录弹出窗口被隐藏并且看不到它。我试图更改 css，但我发现它有一个内联 css，而我尝试放入的任何内容都被内联 css 覆盖，我似乎无法找到内联 css 是如何被放入该块中的。见是：

```
login_popup.phtml

<div id="onestepcheckout-login-popup" style="display: none;"> 
```

但是当我通过萤火虫在火狐浏览器中看到它时，它给了我

```
 <div id="onestepcheckout-login-popup" style="margin: 0px; position: absolute; z-index: 9999; top: 264px; left: 555px;"> 
```

我需要更改 css 以便它在 iPhone 上也可见，但我遇到了困难，因为我找不到内联 css 是如何放置在那里的，任何遇到 onestepcheckout 问题的人或任何人，任何建议或解决方案将不胜感激和感谢。

谢谢

# php - onload中过多的ajax jquery有什么影响？

> ID：16203113
> 
> 赞同：1
> 
> 时间：2013-04-24T22:11:50.897
> 
> 标签：php, jquery, html

如果我有很多 ajax 请求会发生什么，比如说 `$(window).load(function ())`网站打开时有 10 个 jquery ajax 请求？

我打算做很多 ajax 请求我只是想知道会发生什么，它会让我的网站滞后吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:14:03.730

不，由于请求是异步执行的，它不会使您的页面呈现（！）滞后。

但是，如果您的页面在显示任何内容之前依赖于来自服务的数据，那么它可能会感觉滞后。

请记住，如果您执行大量请求，浏览器将开始对它们进行排队。

# xml - 使用自定义模式将 XML 数据与 RDF/OWL 本体相关联

> ID：16203115
> 
> 赞同：0
> 
> 时间：2013-04-24T22:11:58.833
> 
> 标签：xml, xsd, rdf, owl, rdfa

我有一个模式，旨在允许描述某些类型的电子设备。符合架构的 XML 文件描述了设备的接口。模式允许描述接口功能的方式。作为其中的一部分，数据类型被定义然后使用。我想做的是允许 XML 文件的作者将他们定义的数据类型链接到作为单独的 RDF/OWL 文档提供的语义。

据我了解，这意味着一个类型应该与一个 OWL 类相关。例如，对 XHTML 执行此操作的方式似乎是使用 RDFa（我认为是“typeof”属性？）。对我自己的模式执行此操作的最合适方法是什么？我应该使用（RDFa 的一个子集）吗？我如何着手将其合并到我自己的模式中以使其验证？我对这一切都错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:39:50.887

*对我自己的模式执行此操作的最合适方法是什么？*

您似乎正在尝试获取电子设备的一些规范。在这种情况下，您可以使用普通的 OWL，这是它的用例之一。如前所述，您只需将类型表示为 OWL 类。

*我应该使用（RDFa 的一个子集）吗？*

RDFa 旨在用于 HTML 文档中供搜索引擎处理，因此我认为它不适合您的情况。但无论如何：RDFa 只是一个注释内容的框架，因此如果您想要一个简单的解决方案，您可以使用您的 XML 类型完美地注释 HTML 内容。

*我如何着手将其合并到我自己的模式中以使其验证？*

OWL 本体验证是通过推理器完成的，如果您使用像[Protege](http://protege.stanford.edu/)这样的工具，您将拥有一个平台来编辑和创建您的 OWL 本体以及使用推理器。

如果您包含一些 XML 片段和您想要实现的伪代码，我可以提供更详细的答案。

# java - 如何在 Lucene 中实现 tf-idf 和余弦相似度？

> ID：16203118
> 
> 赞同：4
> 
> 时间：2013-04-24T22:12:07.570
> 
> 标签：java, lucene, tf-idf, cosine-similarity

如何在 Lucene 中实现 tf-idf 和余弦相似度？我正在使用 Lucene 4.2。我创建的程序不使用 tf-idf 和余弦相似度，它只使用 TopScoreDocCollector。

```
import com.mysql.jdbc.Statement;
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStreamReader;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.util.Version;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.IndexWriter;

import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import org.apache.lucene.analysis.id.IndonesianAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.*;
import org.apache.lucene.queryparser.classic.ParseException;
import org.apache.lucene.queryparser.classic.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.RAMDirectory;

public class IndexMysqlDBStemming {

  public static void main(String[] args) throws Exception {

    // 1\. Create Index From Database
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/db_haiquran", "root", "");

    IndonesianAnalyzer analyzer = new IndonesianAnalyzer(Version.LUCENE_42);
    //StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_42);
    QueryParser parser = new QueryParser(Version.LUCENE_42, "result", analyzer);

    Directory INDEX_DIR = new RAMDirectory();

    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_42, analyzer);
    IndexWriter writer = new IndexWriter(INDEX_DIR, config);

    String query = "SELECT * FROM ayat";
    java.sql.Statement statement = connection.createStatement();
    ResultSet result = statement.executeQuery(query);

    while (result.next()) {
        Document document = new Document();
        document.add(new Field("NO_INDEX_AYAT", result.getString("NO_INDEX_AYAT"), Field.Store.YES, Field.Index.NOT_ANALYZED));
        document.add(new Field("NO_SURAT", result.getString("NO_SURAT"), Field.Store.YES, Field.Index.NOT_ANALYZED));
        document.add(new Field("NO_AYAT", result.getString("NO_AYAT"), Field.Store.YES, Field.Index.NOT_ANALYZED));
        document.add(new Field("TEXT_INDO", result.getString("TEXT_INDO"), Field.Store.YES, Field.Index.ANALYZED));
        document.add(new Field("TEXT_ARAB", result.getString("TEXT_ARAB"), Field.Store.YES, Field.Index.NOT_ANALYZED));
        writer.updateDocument(new Term("NO_INDEX_AYAT", result.getString("NO_INDEX_AYAT")), document);

    }

    writer.close();

    // 2\. Query
    System.out.println("Enter your search keyword in here : ");
    BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
    String s = bufferRead.readLine();
    String querystr = args.length > 0 ? args[0] :s;

    try {
        System.out.println(parser.parse(querystr)+"\n"); //amenit
        System.out.println();

    } catch (ParseException ex) {
        // Exception
    }

    Query q = new QueryParser(Version.LUCENE_42, "TEXT_INDO", analyzer).parse(querystr);

    // 3\. Search

    int hitsPerPage = 10;
    IndexReader reader = DirectoryReader.open(INDEX_DIR);
    IndexSearcher searcher = new IndexSearcher(reader);
    TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
    searcher.search(q, collector);
    ScoreDoc[] hits = collector.topDocs().scoreDocs;

    // 4\. Display results

    System.out.println("Found : " + hits.length + " hits.");

    System.out.println("No" + " ID " + "\t" + " Surat " + "\t" + " No Ayat " + "\t" + " Terjemahan Ayat " + "\t" + " Teks Arab ");

    for (int i=0; i<hits.length; i++) {
       int docID = hits[i].doc;
       Document d = searcher.doc(docID);

       System.out.println((i+1) + ". " + d.get("NO_INDEX_AYAT") + "\t" + d.get("NO_SURAT") + "\t" + d.get("NO_AYAT")+ 
               "\t" + d.get("TEXT_INDO") + "\t" + d.get("TEXT_ARAB"));

    }

    reader.close();        
  }
} 
```

如何使用 tf-idf 和余弦相似度显示计算结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:09:24.917

除非我遗漏了什么，否则你已经完成了。做得好！

默认情况下使用的相似性算法是[DefaultSimilarity](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/DefaultSimilarity.html)，但您可以在它的基类[TFIDFSimilarity](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html)中找到大部分文档（和逻辑） 。

并且 TFIDFSimilarity 确实是 TF-IDF 和余弦相似度评分模型的实现。

# java - LHS 上的 Java 泛型而不是 RHS 的赋值

> ID：16203119
> 
> 赞同：2
> 
> 时间：2013-04-24T22:12:12.910
> 
> 标签：java, generics

我遇到了以下代码，想知道这是否是一种好习惯：

```
LinkedList<String> ll = new LinkedList(); 
```

我会写

```
List<String> l = new LinkedList<String> (); 
```

所以这里有两个问题：

1.  我一直认为使用类型`List`而不是`ArrayList`/是一种很好的做法`LinkedList`。
2.  如果省略赋值运算符的 RHS 上的菱形，究竟会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T22:15:18.437

1.  [始终对接口进行编程](https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean)，这样您的代码就可以保持实现独立。
2.  您正在创建原始类型，这会给您一个警告，但它会编译。“LinkedList 是一种原始类型。对泛型类型 LinkedList 的引用应该被参数化”。由于擦除，这实际上并不重要。

# php - PHP Composer 包从何而来？

> ID：16203122
> 
> 赞同：16
> 
> 时间：2013-04-24T22:12:24.740
> 
> 标签：php, composer-php

当我跑

```
$ composer.phar install 
```

安装的软件包来自哪里？

我知道[Packagist](https://packagist.org)是 PHP 包的默认存储库，并且缺少不同的包`composer.json`，这是 composer 将查找包的地方。

但是，我不清楚 Composer 和 Packagist 是如何交互的。

*   Composer 是否直接从`packagist.org`

*   或者 Composer 是否从存储库中获取 git/svn/hg 存储库链接`packagist`并直接从存储库下载文件？

*   或者是其他东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T00:44:22.793

这取决于`composer.json`文件的内容。

例如，如果您`composer.json`只包含

```
{
    "require": {
        "phpunit/phpunit": "3.8.*@dev"
    }
} 
```

然后composer搜索packagist，在这里找到phpunit：

[https://packagist.org/packages/phpunit/phpunit](https://packagist.org/packages/phpunit/phpunit)

它告诉作曲家从这里加载 phpunit：

[https://github.com/sebastianbergmann/phpunit.git](https://github.com/sebastianbergmann/phpunit.git)

相反，如果你`composer.json`包含

```
{
    "repositories": [
        {
            "type": "vcs",
            "url": "http://github.com/sebastianbergmann/phpunit"
        }
    ],
    "require": {
        "phpunit/phpunit": "3.8.*@dev"
    }
} 
```

那么composer就不会去找packagist，而是直接去github下载repo。

在 Packagist 上注册的包*通常*是包的“权威”版本（不是 fork），但我发现有几个情况*并非*如此，所以你应该检查它以确保你正在拉取你期望的包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:06:02.200

Packagist.org 为用户提供了在那里注册他们的软件的方法，方法是让 Packagist 阅读他们在网络上某个地方发布的 composer.json 文件。

通常的情况是一些常见的开源主机，比如 github，这使得它变得非常容易，因为 composer 可以立即处理这样的 git repo。但是，您可以托管自己的 git 或 svn 或 hg 存储库，甚至只为每个软件版本发布现成的 ZIP 或 TGZ 文件。

Composer 直接从源下载，例如 Packagist 只知道这些源并告诉您的 composer 实例去哪里。它通过从 Packagist.org 下载一堆包含所有信息的 json 文件来做到这一点。这比找出您想要的库的托管位置并将此信息作为存储库条目添加到本地 composer.json 文件中要容易得多。:)

# php - php数组在样式后变为垂直而不是水平

> ID：16203123
> 
> 赞同：0
> 
> 时间：2013-04-24T22:12:28.707
> 
> 标签：php, css

我有一个字母数组。添加样式后，数组从水平变为垂直。

这是代码：

```
$alphabetical_array = range('a','z');
function AddLinks($letter)
{
$title = strtoupper($letter);
$a = "<a href='alpha_search.php?letter=".$letter."' class='alphabtn'><font color='#FFFFFF'>".$title."</font></a>";
return($a);
}

$format_array = array_map("AddLinks", $alphabetical_array);
echo implode($format_array); 
```

这是CSS：

```
.alphabtn {
    max-width:10px;
    text-decoration: none;
    position: relative;
    padding: 5px ;
    text-align:left;
    clear: both; 
    text-indent:0;
    display: block;
    font: bold 12px/14px Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    color: #fff;
    border-radius: 4px;
    border: 1px solid #391b61;
    text-shadow: 1px 1px 1px #ccc;
    background: -moz-linear-gradient(top, #864fd3 0%, #553285 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#864fd3), color-stop(100%,#553285));
    background: -webkit-linear-gradient(top, #864fd3 0%,#553285 100%);
    background: -o-linear-gradient(top, #864fd3 0%,#553285 100%);
    background: -ms-linear-gradient(top, #864fd3 0%,#553285 100%);
    background: linear-gradient(to bottom, #864fd3 0%,#553285 100%);
    -pie-background: linear-gradient(#864fd3, #553285);
    -webkit-box-shadow: inset 0px 1px 1px 1px #a55aff;
    box-shadow: inset 0px 1px 1px 1px #a55aff;
    behavior: url(../login/_ui/js/PIE.htc);
}.alphabtn:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #553285), color-stop(1, #864fd3) );
    background:-moz-linear-gradient( center top, #553285 5%, #864fd3 100% );
    background: -moz-linear-gradient(top, #553285 0%, #864fd3 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#553285', endColorstr='#864fd3');
    background-color:#553285;
}.alphabtn:active {
    position:relative;
    top:1px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:15:37.397

你有

```
clear: both; 
```

设置在您的标签上。很确定这会导致

`<a>`

被视为块并换行。

尝试删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:17:28.470

你`display: block;`在css中有。这将导致每个元素显示在自己的行上。删除它，其他一切都应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:19:05.740

改变

```
.alphabtn {
    max-width:10px;
    text-decoration: none;
    position: relative;
    padding: 5px ;
    text-align:left;
    clear: both; 
    text-indent:0;
    display: block; 
```

至

```
.alphabtn {
    max-width:10px; //Why this line?
    text-decoration: none;
    position: relative;
    padding: 5px ;
    text-align:left;
    text-indent:0;
    display: inline-block; (or delete the row) 
```

# actionscript-3 - ArgumentError：游戏“重置”后出现错误 #2025，可能是范围错误

> ID：16203129
> 
> 赞同：0
> 
> 时间：2013-04-24T22:12:54.680
> 
> 标签：actionscript-3, flash

我的极短小游戏在舞台上有 4 个对象，游戏完成后，我希望将它们全部从舞台上移除并重新启动游戏。

我已经这样设置了（大部分位被取出）

```
function mainGame():void {
            var theCoin:coin = new coin();
            var cupOne:cup = new cup();
            var cupTwo:cup = new cup();
            var cupThree:cup = new cup();
            stage.addChild(theCoin);
            trace(theCoin.parent);
            stage.addChild(cupOne);
            trace(cupOne.parent);
            stage.addChild(cupTwo);
            trace(cupTwo.parent);
            stage.addChild(cupThree);
            trace(cupThree.parent);

            function prepReset():void 
            {
                cupOne.removeEventListener(MouseEvent.CLICK, liftCup1);
                cupTwo.removeEventListener(MouseEvent.CLICK, liftCup2);
                cupThree.removeEventListener(MouseEvent.CLICK, liftCup3);
                stage.addChild(resetBtn);
                resetBtn.addEventListener(MouseEvent.CLICK, resetGame);

            }

            function resetGame(event:MouseEvent):void 
            {  
                stage.removeChild(cupOne);
                stage.removeChild(cupTwo);
                                    stage.removeChild(cupThree);
                letsgoagain();
            }

        } // end mainGame

        function letsgoagain():void
        {
            stage.removeChild(resetBtn);
            mainGame();
            trace("RESET")

        } 
```

这一切都在第一次正常工作。一旦它第二次重置，我得到

```
Game Started
[object Stage]
[object Stage]
[object Stage]
[object Stage]
RESET
[object Stage]
[object Stage]
[object Stage]
[object Stage]
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
    at Function/coinGame/$construct/mainGame/resetGame()[*\coinGame.as:147]
Cannot display source code at this location. 
```

父级仍然是舞台，但 stage.removeChild 不是正确的语法？我不明白。Stackoverflow，请您指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:32:03.143

这是您如何设置此类的示例：

```
public class coinGame extends MovieClip
{

    public var theCoin:coin;
    public var cupOne:cup;
    public var cupTwo:cup;
    public var cupThree:cup;

    public function coinGame():void 
    {
        initGame();
    }

    public function initGame():void
    {
        theCoin = new coin();
        cupOne = new cup();
        cupTwo = new cup();
        cupThree = new cup();

        addChild(theCoin);
        addChild(cupOne);
        addChild(cupTwo);
        addChild(cupThree);

    }

    public function prepReset():void 
    {
        cupOne.removeEventListener(MouseEvent.CLICK, liftCup1);
        cupTwo.removeEventListener(MouseEvent.CLICK, liftCup2);
        cupThree.removeEventListener(MouseEvent.CLICK, liftCup3);
        addChild(resetBtn);
        resetBtn.addEventListener(MouseEvent.CLICK, resetGame);

    }

    public function resetGame(event:MouseEvent):void 
    {  
        removeChild(cupOne);
        removeChild(cupTwo);
        removeChild(cupThree);
        letsgoagain();
    }

    function letsgoagain():void
    {
        removeChild(resetBtn);
        initGame();
    }
} 
```

我没有声明您的 resetBtn 或添加事件侦听器等，但这是基本结构。

将对象的创建和添加到一个`initGame()`方法中，使您可以轻松地重新启动游戏。构造函数只执行一次，因此最好不要将您可能想要多次执行的事情放在构造函数中。

此外，除非您想在每次游戏重置时创建杯子，否则您可以这样做：

```
 public function coinGame():void 
    {
        theCoin = new coin();
        cupOne = new cup();
        cupTwo = new cup();
        cupThree = new cup();
        initGame();
    }

    public function initGame():void
    {

        addChild(theCoin);
        addChild(cupOne);
        addChild(cupTwo);
        addChild(cupThree);

    } 
```

这样，您就不会每次都创建这些对象的新实例，而只是根据需要从显示列表中添加/删除它们。这可能是你想要的。

# python - 让异常自行引发

> ID：16203131
> 
> 赞同：1
> 
> 时间：2013-04-24T22:13:06.820
> 
> 标签：python, exception, python-3.x

是否可以让异常在其自己的类实例中自行引发？像这样的东西：

```
class Error(Exception):
    def __init__(self):
        if some stuff:
            pass
        elif some other stuff:
            # re-raise myself

raise Error() 
```

我尝试使用`raise self`但它返回错误；另外，我没有看到似乎与此相关的异常类的任何属性。

**编辑**

如果我想这样做，那是因为我在我的`Exception`类中附加了一些特殊方法，这些方法根据传递给异常的参数来格式化要打印的错误消息。我本可以在一个单独的对象中完成格式化工作，但由于它只被异常使用，在我看来，将它附加到异常类本身是很自然的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T22:22:42.670

您*可以*在`__init__`异常类型中引发异常，就像您可以在任何类型中一样`__init__`。然而，这将阻止对象被创建——而是抛出异常。

所以你的原始`raise Error()`文件根本不会被调用，你想在那里创建的异常对象永远不会被创建。相反，您只会得到一个异常，因为您创建的对象 ( `Error`) 无法创建。

`raise`所以你丢失了关于你想要执行的实际的所有信息。

因此，不，不要那样做。

无论如何，这似乎也是一种非常奇怪的方式来处理异常类型。异常对象*本身*不应该依赖于任何外部因素，并且`some stuff`在这里看起来确实很神奇。您实际上想在这里解决什么？

可能有助于理解的方法是这样写`raise Error()`：

```
e = Error()
raise e 
```

因此，您首先创建一个异常对象，然后才真正引发它。所以在`__init__`那个类型的里面，你不能*再加注*它，因为它还没有被加注过。但是无论如何都没有必要重新加注，因为你之后仍然在加注。再说一遍：你想做什么？您是否希望异常对象本身能够在某些条件下*防止*引发（因此`pass`在您的代码中）？

## 更新

> 这是因为我在我的 Exception 类中附加了一些特殊方法，这些方法根据传递给异常的参数来格式化要打印的错误消息。

`__init__`这根本不能证明在类型*中*引发异常是合理的。您可以轻松地格式化您想要的所有异常消息，而无需在类本身中引发异常。例如：

```
>>> class Error (Exception):
        def __init__ (self, msg, rightAligned = False, spacedOut = False):
            if spacedOut:
                msg = ' '.join(msg)
            if rightAligned:
                msg = msg.rjust(72)
            Exception.__init__(self, msg)

>>> raise Error('Random message')
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    raise Error('Random message')
Error: Random message
>>> raise Error('Random message', True)
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    raise Error('Random message', True)
Error:                                                           Random message
>>> raise Error('Random message', False, True)
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    raise Error('Random message', False, True)
Error: R a n d o m   m e s s a g e 
```

如您所见，我可以以任何我想要的方式更改异常消息，而无需在类中引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:27:41.163

**编辑：**这个答案不应该被接受。[poke 的答案](https://stackoverflow.com/a/16203252/9990)解决了问题的核心并提出了正确的解决方案。

自养课程对我来说似乎很有效：

```
>>> class Err(Exception):
...   def __init__(self):
...     Exception.__init__(self, 'gulp!')
...     raise self
... 
>>> raise Err()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in __init__
__main__.Err: gulp! 
```

我不是 Python 语言输出，所以这可能是一些奇怪的半中止的类，它本身的行为不太好。买者自负。

迫切的问题：你为什么要这样做？是否有某些原因您不想使用标准 Python 习惯用法，即在构造异常后显式引发异常？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:22:45.143

这可能会解决您的直接错误：

```
raise self.__class__ 
```

但是，您有无限递归的潜力。如果“其他一些东西”总是正确的呢？

# windows - Windows 上可以静默部署的 rsync 风格的解决方案？

> ID：16203137
> 
> 赞同：2
> 
> 时间：2013-04-24T22:13:34.733
> 
> 标签：windows, scheduled-tasks, rsync

我正在为我们的一些用户构建一个（目前非常少的）网络同步系统，在一端涉及一个 samba 服务器和一个 rsync cron 作业，该作业通过运行一个简单的 bash 脚本链接到 OSX 或 Linux 客户端“安装”我们的内联网。

我需要为 Windows 客户端做同样的事情。我知道在 Windows 上有几个 rsync 实现（我很久以前就使用过 cwRsync），但是有没有（在你的脑海中）我可以在安装过程中默默地传递一个配置？事实上，我想我将不得不编写一个糟糕的旧批处理文件来与 Windows 任务计划程序接口，但我至少希望安装它的客户端不必输入任何其他内容，而不必输入他们的用户名和密码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:15:49.083

我已经成功了

*   [富复制](http://social.technet.microsoft.com/Forums/en-US/w7itproperf/thread/33971726-eeb7-4452-bebf-02ed6518743e/)
*   [机器复制](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)
*   [赛格温`rsync.exe`](http://cygwin.com/)

全部使用计划任务。

RichCopy（也可能是 robocopy）具有从 GUI 保存配置文件的选项。批处理文件对我来说一切都很好。

这三个都有可重新启动/增量模式。大多数人都高度了解特定的功能认为

*   NTFS 加密
*   NTFS 压缩
*   权限（ACL）
*   备用 NTFS 流
*   连接点/重解析点
*   硬链接/符号链接

等等

# c# - 从 .sql 文件恢复数据库失败

> ID：16203140
> 
> 赞同：0
> 
> 时间：2013-04-24T22:13:51.803
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

我正在尝试使用 C# 从我拥有的 sql 文件中恢复空白数据库的表。

这是代码：

```
namespace KezberProjectManager
{
    public partial class VisitClear : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string sqlConnectionString = "Data Source=JOSH-PC\\SQLEXPRESS;Initial Catalog=KezBlu;Integrated Security=True;MultipleActiveResultSets=True";
            FileInfo file = new FileInfo(Path.Combine(
    HostingEnvironment.ApplicationPhysicalPath, 
    @"App_Data\kb.sql"));

            string script = file.OpenText().ReadToEnd();

            SqlConnection conn = new SqlConnection(sqlConnectionString);

            Server server = new Server(new ServerConnection(conn));

            server.ConnectionContext.ExecuteNonQuery(script);

        }
    }
} 
```

这是脚本：

```
USE [KezBlu]
GO
/****** Object:  ForeignKey [Customer_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Customer_Case]
GO
/****** Object:  ForeignKey [Schedule_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Schedule_Case]
GO
/****** Object:  ForeignKey [Status_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Status_Case]
GO
/****** Object:  ForeignKey [Group_Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee] DROP CONSTRAINT [Group_Employee]
GO
/****** Object:  ForeignKey [Employee_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Employee_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Group_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Group_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Employee_LockedDate]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates] DROP CONSTRAINT [Employee_LockedDate]
GO
/****** Object:  ForeignKey [Schedule_Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project] DROP CONSTRAINT [Schedule_Project]
GO
/****** Object:  ForeignKey [Employee_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Employee_Schedule]
GO
/****** Object:  ForeignKey [Recurring_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Recurring_Schedule]
GO
/****** Object:  ForeignKey [Project_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Project_Task]
GO
/****** Object:  ForeignKey [Schedule_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task]
GO
/****** Object:  ForeignKey [Schedule_Task1]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task1]
GO
/****** Object:  Table [dbo].[Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Project_Task]
GO
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task]
GO
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task1]
GO
DROP TABLE [dbo].[Task]
GO
/****** Object:  Table [dbo].[Cases]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Customer_Case]
GO
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Schedule_Case]
GO
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Status_Case]
GO
DROP TABLE [dbo].[Cases]
GO
/****** Object:  Table [dbo].[Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project] DROP CONSTRAINT [Schedule_Project]
GO
DROP TABLE [dbo].[Project]
GO
/****** Object:  Table [dbo].[EmployeGroupFilters]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Employee_EmployeGroupFilter]
GO
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Group_EmployeGroupFilter]
GO
DROP TABLE [dbo].[EmployeGroupFilters]
GO
/****** Object:  Table [dbo].[LockedDates]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates] DROP CONSTRAINT [Employee_LockedDate]
GO
DROP TABLE [dbo].[LockedDates]
GO
/****** Object:  Table [dbo].[Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Employee_Schedule]
GO
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Recurring_Schedule]
GO
DROP TABLE [dbo].[Schedule]
GO
/****** Object:  Table [dbo].[Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee] DROP CONSTRAINT [Group_Employee]
GO
DROP TABLE [dbo].[Employee]
GO
/****** Object:  Table [dbo].[Colors]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Colors]
GO
/****** Object:  Table [dbo].[Customers]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Customers]
GO
/****** Object:  Table [dbo].[Group]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Group]
GO
/****** Object:  Table [dbo].[Recurring]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Recurring]
GO
/****** Object:  Table [dbo].[Settings]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Settings]
GO
/****** Object:  Table [dbo].[Statuses]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Statuses]
GO
/****** Object:  Table [dbo].[Statuses]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Statuses](
    [StatusID] [int] IDENTITY(1,1) NOT NULL,
    [StatusDescription] [varchar](50) NULL,
 CONSTRAINT [PK_dbo.Statuses] PRIMARY KEY CLUSTERED 
(
    [StatusID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Settings]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Settings](
    [SettingID] [int] IDENTITY(1,1) NOT NULL,
    [SettingKey] [varchar](50) NOT NULL,
    [SettingValue] [text] NOT NULL,
 CONSTRAINT [PK_dbo.Settings] PRIMARY KEY CLUSTERED 
(
    [SettingID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Recurring]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Recurring](
    [RecurringID] [int] IDENTITY(1,1) NOT NULL,
    [Period] [int] NULL,
    [DateStart] [datetime] NULL,
    [DateLast] [datetime] NULL,
    [Advance] [int] NULL,
 CONSTRAINT [PK_dbo.Recurring] PRIMARY KEY CLUSTERED 
(
    [RecurringID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Group]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Group](
    [GroupID] [int] IDENTITY(1,1) NOT NULL,
    [GroupDescription] [varchar](max) NOT NULL,
    [IsReadOnly] [bit] NULL,
 CONSTRAINT [PK_dbo.[Group]]] PRIMARY KEY CLUSTERED 
(
    [GroupID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Customers]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Customers](
    [CustomerID] [int] IDENTITY(1,1) NOT NULL,
    [CustomerDescription] [varchar](max) NULL,
 CONSTRAINT [PK_dbo.Customers] PRIMARY KEY CLUSTERED 
(
    [CustomerID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Colors]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Colors](
    [ColorID] [int] IDENTITY(1,1) NOT NULL,
    [ColorValue] [int] NOT NULL,
 CONSTRAINT [PK_dbo.Colors] PRIMARY KEY CLUSTERED 
(
    [ColorID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Employee]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Employee](
    [EmployeID] [int] IDENTITY(1,1) NOT NULL,
    [EmployeName] [varchar](50) NOT NULL,
    [EmployeEmail] [varchar](50) NOT NULL,
    [EmployePassword] [char](44) NOT NULL,
    [DefaultNumWeek] [smallint] NULL,
    [GroupID] [int] NULL,
 CONSTRAINT [PK_dbo.Employee] PRIMARY KEY CLUSTERED 
(
    [EmployeID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Schedule]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Schedule](
    [ScheduleID] [int] IDENTITY(1,1) NOT NULL,
    [DateFrom] [datetime] NULL,
    [Hours] [decimal](10, 2) NULL,
    [EmployeID] [int] NULL,
    [RecurringID] [int] NULL,
    [Priority] [int] NULL,
    [DateTo] [datetime] NULL,
    [IsLocked] [bit] NOT NULL,
    [BumpPriority] [int] NULL,
 CONSTRAINT [PK_dbo.Schedule] PRIMARY KEY CLUSTERED 
(
    [ScheduleID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LockedDates]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LockedDates](
    [LockedDateID] [int] IDENTITY(1,1) NOT NULL,
    [Date] [datetime] NOT NULL,
    [IsYearly] [bit] NOT NULL,
    [EmployeeID] [int] NULL,
 CONSTRAINT [PK_dbo.LockedDates] PRIMARY KEY CLUSTERED 
(
    [LockedDateID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EmployeGroupFilters]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[EmployeGroupFilters](
    [EmployeGroupFilterID] [int] IDENTITY(1,1) NOT NULL,
    [EmployeID] [int] NOT NULL,
    [GroupID] [int] NOT NULL,
 CONSTRAINT [PK_dbo.EmployeGroupFilters] PRIMARY KEY CLUSTERED 
(
    [EmployeGroupFilterID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Project]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Project](
    [ProjectID] [int] IDENTITY(1,1) NOT NULL,
    [ProjectTitle] [varchar](max) NOT NULL,
    [ProjectDescription] [varchar](max) NOT NULL,
    [ScheduleID] [int] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [IsRetired] [bit] NULL,
    [Color] [int] NULL,
    [PaymoID] [int] NULL,
 CONSTRAINT [PK_dbo.Project] PRIMARY KEY CLUSTERED 
(
    [ProjectID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Cases]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Cases](
    [CaseID] [int] IDENTITY(1,1) NOT NULL,
    [CaseTitle] [varchar](max) NOT NULL,
    [CaseDescription] [varchar](max) NOT NULL,
    [CustomerID] [int] NOT NULL,
    [ScheduleID] [int] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [StatusID] [int] NULL,
    [Color] [int] NULL,
    [CRMID] [varchar](50) NULL,
 CONSTRAINT [PK_dbo.Cases] PRIMARY KEY CLUSTERED 
(
    [CaseID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Task]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Task](
    [TaskID] [int] IDENTITY(1,1) NOT NULL,
    [TaskTitle] [varchar](max) NOT NULL,
    [TaskDescription] [varchar](max) NOT NULL,
    [ProjectID] [int] NULL,
    [ScheduleID] [int] NULL,
    [PaymoID] [int] NULL,
    [ParentScheduleID] [int] NULL,
    [IsUnscheduelable] [bit] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [PaymoUser] [varchar](max) NULL,
    [PaymoOrder] [int] NULL,
    [PaymoEstimateHours] [decimal](10, 2) NULL,
 CONSTRAINT [PK_dbo.Task] PRIMARY KEY CLUSTERED 
(
    [TaskID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  ForeignKey [Customer_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Customer_Case] FOREIGN KEY([CustomerID])
REFERENCES [dbo].[Customers] ([CustomerID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Customer_Case]
GO
/****** Object:  ForeignKey [Schedule_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Schedule_Case] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Schedule_Case]
GO
/****** Object:  ForeignKey [Status_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Status_Case] FOREIGN KEY([StatusID])
REFERENCES [dbo].[Statuses] ([StatusID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Status_Case]
GO
/****** Object:  ForeignKey [Group_Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee]  WITH CHECK ADD  CONSTRAINT [Group_Employee] FOREIGN KEY([GroupID])
REFERENCES [dbo].[Group] ([GroupID])
GO
ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [Group_Employee]
GO
/****** Object:  ForeignKey [Employee_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters]  WITH CHECK ADD  CONSTRAINT [Employee_EmployeGroupFilter] FOREIGN KEY([EmployeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[EmployeGroupFilters] CHECK CONSTRAINT [Employee_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Group_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters]  WITH CHECK ADD  CONSTRAINT [Group_EmployeGroupFilter] FOREIGN KEY([GroupID])
REFERENCES [dbo].[Group] ([GroupID])
GO
ALTER TABLE [dbo].[EmployeGroupFilters] CHECK CONSTRAINT [Group_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Employee_LockedDate]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates]  WITH CHECK ADD  CONSTRAINT [Employee_LockedDate] FOREIGN KEY([EmployeeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[LockedDates] CHECK CONSTRAINT [Employee_LockedDate]
GO
/****** Object:  ForeignKey [Schedule_Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project]  WITH CHECK ADD  CONSTRAINT [Schedule_Project] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Project] CHECK CONSTRAINT [Schedule_Project]
GO
/****** Object:  ForeignKey [Employee_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule]  WITH CHECK ADD  CONSTRAINT [Employee_Schedule] FOREIGN KEY([EmployeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[Schedule] CHECK CONSTRAINT [Employee_Schedule]
GO
/****** Object:  ForeignKey [Recurring_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule]  WITH CHECK ADD  CONSTRAINT [Recurring_Schedule] FOREIGN KEY([RecurringID])
REFERENCES [dbo].[Recurring] ([RecurringID])
GO
ALTER TABLE [dbo].[Schedule] CHECK CONSTRAINT [Recurring_Schedule]
GO
/****** Object:  ForeignKey [Project_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Project_Task] FOREIGN KEY([ProjectID])
REFERENCES [dbo].[Project] ([ProjectID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Project_Task]
GO
/****** Object:  ForeignKey [Schedule_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Schedule_Task] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Schedule_Task]
GO
/****** Object:  ForeignKey [Schedule_Task1]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Schedule_Task1] FOREIGN KEY([ParentScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Schedule_Task1]
GO 
```

我在那里放了一些东西，因为数据库可能已经设置好了，在这种情况下我想要一个新的副本。

我得到：

```
An exception occurred while executing a Transact-SQL statement or batch. 
```

我在做什么有什么问题吗？我从使用 SQL Server 生成脚本获得了脚本。

我只是想让它：

```
 1\. Clear any tables, just empty the db.

2\. Create the tables and foreign keys. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:18:22.950

它失败是因为当您将完整脚本作为简单字符串传递给 ExecuteNonQuery 时，无法识别 GO 字。但是，接受 StringCollection 对象[的 ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/ms199328.aspx)的重载表示接受由 GO 分隔的脚本

我会这样尝试：（未测试）

```
StringCollection col = new StringCollection();
col.Add(script);
server.ConnectionContext.ExecuteNonQuery(col); 
```

如果这不起作用，那么想到的唯一解决方法是

```
string goSplitter = new string[] { "\r\nGO\r\n" };
string[] cmdParts = script.Split(goSplitter, StringSplitOptions.RemoveEmptyEntries);
StringCollection col = new StringCollection();
col.AddRange(cmdParts);
server.ConnectionContext.ExecuteNonQuery(col); 
```

**更新** 我已经使用您提供的代码对我的数据库测试了您脚本的一小部分，这与我对[使用单个字符串的 ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/ms199350%28v=sql.100%29.aspx)文档的理解相反，它按预期工作。因此，整个脚本中可能存在一些语法错误或其他问题。我建议在 Sql Management Studio 控制台中对其进行测试

**更新 2**
现在我真的很好奇，所以我启动了 Reflector 来调查 ExecuteNonQuery 的代码，现在这个谜团已经解决了。这些是获取单个字符串的方法的第一个反编译行。

```
public int ExecuteNonQuery(string sqlCommand, ExecutionTypes executionType)
{
    int num6;
    this.CheckDisconnected();
    int statementsToReverse = 0;
    int num2 = 0;
    StringCollection strings = this.GetStatements(sqlCommand, executionType, ref statementsToReverse);
    ........ 
```

因此，单个字符串被传递给一个名为 GetStatements 的内部方法，该方法返回一个 StringCollection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:22:13.667

Phil Haack 有一篇文章描述了他创建的一个库，该库允许您运行包含`GO`语句的 SQL 注释。

[http://haacked.com/archive/2007/11/04/a-library-for-executing-sql-scripts-with-go-separators-and.aspx](http://haacked.com/archive/2007/11/04/a-library-for-executing-sql-scripts-with-go-separators-and.aspx)

您需要使用这样的库来运行您拥有的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:24:52.293

然而，其他人已经声明 GO 是 SSMS 的一部分；是 sql 的一部分，所以如果你用 ; 结束每条语句的最后一行 而不是 go，它应该从您的代码内部执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T00:04:49.180

您的 SQL 中有错误。我复制并粘贴了它，运行了两次（以创建表结构），我收到错误消息，例如

无法删除对象“dbo.Employee”，因为它被 FOREIGN KEY 约束引用。

您必须以正确的顺序删除表格。从具有引用的表开始...例如先删除 [EmployeGroupFilters] 然后 Employee 等。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T22:19:22.380

该脚本不是纯 SQL。GO 语句不是 SQL 语言的一部分，而是编辑器预处理器的一部分，用于分隔 SQL 批处理语句。您不能使用 SqlCommand 和 ExecuteNonQuery 方法执行此类脚本。

你需要的是 sqlcmd.exe [http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# java - 有一个 servlet 来设置 WebApplication

> ID：16203148
> 
> 赞同：0
> 
> 时间：2013-04-24T22:14:24.167
> 
> 标签：java, servlets

在我的 Web 应用程序中，我有两个充当控制器的 servlet。一个 servlet 用于处理 Web 请求，另一个 servlet 用于处理 AJAX 请求。

```
//This servlet manages web requests, and forwards to JSP to display data
WebController extends HttpServlet: 

// This servlet manages AJAX requests. And returns JSON to user
AJAXController extends HttpServlet: This servlet manages 
```

在我`web.xml`的我定义了以下映射：

```
<servlet>
  <servlet-name>WebController</servlet-name>
  <servlet-class>com.frontend.WebController</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>WebController</servlet-name>
  <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet>

  <servlet-name>AJAXController</servlet-name>
  <servlet-class>com.AJAXController</servlet-class>
  <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>AJAXController</servlet-name>
  <url-pattern>*.xhr</url-pattern>
</servlet-mapping> 
```

所以你可以看到我之前加载`WebController`过`AJAXController`。
在`init()`方法中`webController`，我完成了所有的初始化任务。

```
loading the database driver
initializing the configuration
and other stuff that I need for my web application 
```

启动时加载确保在任何 AJAX 请求到达服务器之前，Web 应用程序已初始化，并且我可以确保进行数据库访问。

但是，我不喜欢在一个 servlet 中初始化 Web 应用程序的想法。我正在考虑调用一个单独的 servlet并将`InitServlet`代码从`WebController`init 方法移动到方法`InitServlet``init()`

## 问题

1.  这是个好主意吗？还有其他方法可以解决这个问题吗？
2.  我的 servlet 映射应该是什么样子，因为 init servlet 的唯一目的是初始化 Web 应用程序，因此它不应该映射到任何 URL

我将发送`HttpServletResponse.SC_FORBIDDEN`他们的`doPost()`方法`doGet()`。但如果可能的话，我希望 servlet 不被映射到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:25:23.703

将初始化代码移动到[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)是一个更好的主意。

当您的应用程序启动时，它将执行`contextInitialized(ServletContextEvent sce)`，您将有机会初始化所有内容。

这[就是](http://www.javabeat.net/2009/02/servletcontextlistener-example/)你如何将它连接到你的 web.xml

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T22:29:31.900

我认为这不一定是一个坏主意。只需在 web.xml 中定义要首先加载的初始化服务器。就入口而言，它需要定义 servlet 类，当然还有启动时的加载顺序。

将您的初始化代码放入已实现的 init 方法中。将 doGet doPost 方法留空，因此如果它们被调用，则不会发生任何事情。init 方法只会在加载 servlet 时被调用一次。

我看到的唯一问题是，如果这是在一组集群应用程序服务器的上下文中运行的，并且您拥有真正单例的资源（如连接池），但在这种情况下，您可以通过应用程序中的应用程序配置来初始化这些资源服务器。它们将在应用程序启动时和加载 servlet 之前被初始化。

# sql - 在关系代数中合并单字段表

> ID：16203151
> 
> 赞同：2
> 
> 时间：2013-04-24T22:14:42.467
> 
> 标签：sql, database, relational-database, relational-algebra

我有 3 个不同的表，每个表只有一个字段。

```
|fname1 |    |fname2 |    |fname3 |
|*******|    |*******|    |*******|
|Adam   |    |Andy   |    |Alan   |
|Bob    |    |Bryan  |    |David  |
|Charles|    |Chuck  |    |Shawn  | 
```

我想将这些表合并到一个只有“fname”字段的大表中，如下所示：

```
|fname  |
|*******|
|Adam   |
|Bob    |
|Charles|
|Andy   |
|Bryan  |
|Chuck  |
|Alan   |
|David  |
|Shawn  | 
```

这在 SQL 中非常简单，但我一生都无法弄清楚如何在关系代数中编写它。我不关心顺序，只关心所有数据都在一个字段下的一张大表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:58:33.853

理论上，关系代数处理集合。一个集合永远不会有重复。

在实践中，关系 dbms 不实现基于集合的关系代数。原因之一是性能。每个查询都必须删除重复项（这是一项昂贵的操作），因此在实践中，DBMS 处理多集：允许重复元组。

这带来了一个挑战：SQL 并没有很好的方法来处理重复的元组。例如，假设您有一个具有一个属性的表和两个相同的元组。现在删除第一个元组并留下第二个。如果没有某种黑客，你就无法做到这一点。

回到你的问题：你的问题的答案是 UNION。

R1 U R2 U R3

关系代数中是否有重复并不重要，因为理论上，集合中不能有重复。

--dmg

# ruby - 内容类型 case 语句中的语法错误

> ID：16203152
> 
> 赞同：0
> 
> 时间：2013-04-24T22:14:47.033
> 
> 标签：ruby, syntax-error, padrino

这是我在我的 Padrino 应用程序中的代码，我不知道它是什么行或错误。错误消息是“语法错误，意外的关键字_end 期望 $end”

```
get :index, :provides => [:html, :json] do
    @title = "Restaurants"
    @restaurants = Restaurant.all

    case content_type
      when :json
        render @restaurants
      else
        render 'restaurants/index'
      end
    end
  end 
```

您能否指出我的错误并建议我将来如何调试它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:23:13.210

有`end`太多了。

对代码缩进更加小心，这永远不会成为问题。关于它在 Vim 下的外观的示例。我刚刚使用`=G`它，它为我对齐。另外，它只会突出正确使用`end`. 您选择的最喜欢的编辑器也*应该*具有此功能。如果没有，请切换。

![在此处输入图像描述](https://i.stack.imgur.com/GHlNV.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:17:08.533

您有一个备用`end`关键字。你应该删除一个。

您的代码中的缩进有点混乱。保持正确的缩进有助于避免此类错误。我建议像这样缩进你的代码：

```
get :index, :provides => [:html, :json] do
  @title = "Restaurants"
  @restaurants = Restaurant.all

  case content_type
  when :json
    render @restaurants
  else
    render 'restaurants/index'
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:19:55.110

尝试这个：

```
get :index, :provides => [:html, :json] do
    @title = "Restaurants"
    @restaurants = Restaurant.all

    case content_type
      when :json
        render @restaurants
      else
        render 'restaurants/index'
      end

  end 
```

# nosql - Amazon DynamoDB 表设计和查询

> ID：16203154
> 
> 赞同：3
> 
> 时间：2013-04-24T22:15:11.003
> 
> 标签：nosql, amazon-dynamodb

我们正在考虑将 DynamoDB 用于预期的大型数据集。我来自强大的 SQL 背景，所以 No-SQL 的思维方式对我来说是新的。

我有一个问题和设计，但遇到了似乎是死胡同。
文档说要确保您的哈希键被广泛分布以帮助提高性能，这是有道理的。

我将为用户记录各种数据点/操作。对我来说，哈希键应该是用户 ID，而我的范围键可以是执行的操作。

现在，如果我想要用户 #1 执行的所有操作，我可以轻松查询。
但是，如果我想要所有执行操作 X 的用户，那么如果没有表扫描，我就无法做到这一点。从[查询文档](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html)：

> Query 操作使用表主键直接访问表中的项目，或使用索引键从索引中访问项目。**您必须提供特定的哈希键值**。

因此，我似乎仅限于从特定用户获取数据，除非我愿意进行[表扫描](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Scan.html)，这会更慢并且消耗许多容量单位。

我认为，我的问题最终是一个设计问题。也许我在 No-SQL 方面遗漏了一些东西？我的哈希键应该是别的吗？或者仅仅是我的要求不适合 No-SQL（更具体地说，DynamoDB）？

就好像散列键是 DynamoDB 的一种分组。我考虑将哈希键更改为我们打算实施的操作，但后来我并没有广泛分发我的密钥......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:38:00.453

满足您允许两种类型查询要求的 DynamoDb 方法是将数据存储在两张表中，一张带有哈希键 user-id 和范围键 action-id，一张带有哈希键 action-id 和范围键 user-id .

您应该考虑是否需要两个表中的所有数据，或者一个可以是汇总表。例如，假设您的可能操作数量有限。与其将每个操作的完整记录放在用户键控表中，您可能需要一个表，每个用户只有一行：用户 ID 的哈希键，以及第二列，它是多值的并且是一个列表用户至少执行一次的任何操作 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T01:00:24.100

我猜[全局二级索引](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html)选项更好，因为你得到一个表。

在对任何一张表执行任何 CUD（创建、更新、删除）操作时，创建两个表将产生冗余和额外的工作以保持一致性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T17:49:52.617

您必须创建一个[全局二级索引](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html)(GSI)。它的作用是创建第二对与原始键不同的散列键和范围键。然后，您还可以通过在参数中包含索引名称来查询同一个表。

JS 中的示例：

```
var table = tablename;
var index = actionId-username-gsi;
var action = actionId;
var params = {
    TableName : table,
    IndexName : index,
    KeyConditionExpression : 'actionId = :v_actionId',
    ExpressionAttributeValues : {
        ':v_actionId': { N : action }
    },
    ProjectionExpression : 'actionId, username'
};
ddb.query(params, err) {
    if(err) {
        // Oh well
    } else {
        // Do something
    }
}; 
```

这将查询*actionId-username-gsi*索引并查找具有提供值的任何 actionId 哈希。使用[ProjectionExpression](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.AccessingItemAttributes.html)将仅返回每个项目的指定属性值，如果这成为问题，则会降低吞吐量。我希望这有助于回答你的问题。

[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题") [aws](/questions/tagged/aws "显示标记为“aws”的问题") [amazon-dynamodb](/questions/tagged/amazon-dynamodb "显示标记为“amazon-dynamodb”的问题") [nosql](/questions/tagged/nosql "显示标记为“nosql”的问题")

# c++ - clEnqueueWriteImage 返回 -5

> ID：16203157
> 
> 赞同：0
> 
> 时间：2013-04-24T22:15:33.100
> 
> 标签：c++, opencl

如果我尝试将数据上传到图像缓冲区，则函数`clEnqueueWriteImage`返回`-5`. OpenCL 规范中未指定该错误。问题是什么？命令队列、内存对象和数据看起来很棒。阻止设置为`true`。

我的 C++ 代码如下所示：

```
m_NativeImage = clCreateImage2D(_rContext, _MemoryFlag, &m_NativeImageFormat, m_Width, m_Height, 0, NULL, &Error);

size_t Origin[] = {0,0,0};        
size_t Region[] = {m_Width, m_Height, 1}; // Size of object to be transferred

Error = clEnqueueWriteImage(m_NativeCommandQueue, m_NativeImage, _Blocking, Origin, Region, 0, 0, _pData, 0, 0, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:13:56.460

好的。这是我声明的图像格式的问题。我用过`CL_UNORM_INT8`，但必须是`CL_UNORM_SHORT_565`。谢谢你的帮助！

观看：[http ://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/cl_image_format.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/cl_image_format.html)

# ruby-on-rails - 更新 gemspec 文件列表的最佳实践是什么？

> ID：16203163
> 
> 赞同：4
> 
> 时间：2013-04-24T22:15:48.040
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, gemspecs

关于 gemspecs 的文件列表。

我注意到珠宝商使用项目中的文件列表手动更新此列表。例如

```
Gem::Specification.new do |s|
  # stuff

  s.files = [
    "lib/somegem.rb",
    "README.md"
  ]
  # ... more stuff

end 
```

是否有任何证据表明在项目（尤其是 Rails 项目）中使用 gem 时，使用`git ls-files`或`Dir.glob('**/*')`动态生成 gemspec 的文件列表会导致性能问题？例如？

```
Gem::Specification.new do |s|
  # stuff

  s.files = `git ls-files`.split("\n")
  # ... more stuff

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T17:40:48.513

动态生成文件列表非常好。事实上，[Gemspec 规范文档](http://guides.rubygems.org/specification-reference/#files)展示了几种方法来做到这一点。

来自 Rubygems 文档：

```
require 'rake'
spec.files = FileList['lib     .rb',
                      'bin/*',
                      '[A-Z]*',
                      'test/   *'].to_a

# or without Rake...
spec.files = Dir['lib/   *.rb'] + Dir['bin/*']
spec.files += Dir['[A-Z]*'] + Dir['test/**/*']
spec.files.reject! { |fn| fn.include? "CVS" } 
```

我会坚持上面的方法而不是 use `git ls-files`，因为我不会假设每个使用 gem 的系统都会安装 git 。

# jquery - jquery 循环遍历每个表行并使用每个行输入字段执行数学运算

> ID：16203166
> 
> 赞同：1
> 
> 时间：2013-04-24T22:15:53.283
> 
> 标签：jquery

我有下表

```
<table class="authors-list" border=0 id="ordertable">
    <tr>
        <td>Cubic Meters</td><td>Cubes per Bundle</td><td>Total Bundles</td>
    <tr>
       <td><input type="text" name="cubicmeters1" id="cubicmeters1" value="1.38"></td>
       <td><input type="text" name="cubesperbundle1" id="cubesperbundle1" value="1.485"></td>
       <td><input type="text" name="bundles1" id="bundles1"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters2" id="cubicmeters2" value="1.38"></td>
       <td><input type="text" name="cubesperbundle2" id="cubesperbundle2" value="1.485"></td>
       <td><input type="text" name="bundles2" id="bundles2"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters3" id="cubicmeters3" value="1.38"></td>
       <td><input type="text" name="cubesperbundle3" id="cubesperbundle3" value="1.485"></td>
       <td><input type="text" name="bundles3" id="bundles3"></td>
   </tr>
</table> 
```

我想要做的是遍历每个表行并对两个输入执行数学函数，并将结果填充到第三个输入中。

小提琴在这里：http: [//jsfiddle.net/ttZtX/1/](http://jsfiddle.net/ttZtX/1/)

所以这是我对 jquery 的尝试：

```
$("table.authors-list").find('input[name^="cubicmeters1"]').each(function () {
    cubes += +$(this).closest('tr').find('input[name^="cubicmeters"]').val();
    cubesperbundle += +$(this).closest('tr').find('input[name^="cubesperbundle"]').val();
    +$(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));
}); 
```

这根本不会产生任何结果或错误，并且不会填充输入。

总而言之，我的要求是让 jquery 遍历每一行，乘以`cubicmeters`并`cubesperbundle`填充`bundles`结果。

很简单，但我就是做不好。

任何帮助，将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:26:52.803

这是你想要的？[http://jsfiddle.net/WrvmW/](http://jsfiddle.net/WrvmW/)

```
$("table.authors-list tr").each(function () {
   var cubes = parseFloat($('input[name^="cubicmeters"]',this).val(), 10);
    var cubesperbundle = parseFloat($('input[name^="cubesperbundle"]',this).val(), 10);
    $('input[name^="bundles"]',this).val((cubes*cubesperbundle).toFixed(2))

}); 
```

你有一些错误，`javascript`你需要`parseFloat`它来执行操作。另一件事是您不必通过`each`输入并找到`closest`. 可以直接遍历`tr`s。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T22:27:37.550

您`No wrap - in <head>`在小提琴中进行了选择，因此尚未创建您尝试选择的元素，请尝试将其更改为`onDomready`
Also remove the `1`in`$("table.authors-list").find('input[name^="cubicmeters1"]')`以选择所有输入而不是仅一个并`var`在变量之前添加，这样它们就不会泄漏到全局范围

```
$("table.authors-list").find('input[name^="cubicmeters"]').each(function () {
    var cubes = +$(this).closest('tr').find('input[name^="cubicmeters"]').val();
    var cubesperbundle = +$(this).closest('tr').find('input[name^="cubesperbundle"]').val();
    $(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));
}); 
```

[http://jsfiddle.net/ttZtX/19/](http://jsfiddle.net/ttZtX/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:27:36.700

您的 javascript 中有错误：

```
$("table.authors-list").find('input[name^="cubicmeters1"]').each(function () {
    // you haven't declared cubes
    // you have a + in front of $
    // you're not parsing the string (use parseFloat)
    cubes += +$(this).closest('tr').find('input[name^="cubicmeters"]').val();
    cubesperbundle += +$(this).closest('tr').find('input[name^="cubesperbundle"]').val();
    +$(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));
}); 
```

以下应该有效：

```
$(function(){       
        $("table.authors-list").find('input[name^="cubicmeters1"]').each(function () {
            var cubes;
            var cubesperbundle;
            cubes = parseFloat($(this).closest('tr').find('input[name^="cubicmeters"]').val());
            cubesperbundle = parseFloat($(this).closest('tr').find('input[name^="cubesperbundle"]').val());
            $(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));
        });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T22:35:52.683

当然，如果您出于某种原因（例如更复杂的计算）更改表结构，那么总会有另一种方法，例如解决 id 选择器的问题。您可以在以下位置看到它：

[http://jsfiddle.net/ttZtX/24/](http://jsfiddle.net/ttZtX/24/)

或在这里

```
$('input[name^="bundles"]').each(function () {
  var id = $(this).attr('id').replace("bundles", "");

  var cubes = +$("#cubicmeters" + id).val();

  var cubesperbundle = +$("#cubesperbundle" + id).val();

  $(this).val((cubes*cubesperbundle).toFixed(2));
}); 
```

每个捆绑包已经带有其 ID 号，因此您可以找到相关数量的项目并将它们添加到您的计算逻辑中。

# sql - SELECT REGEXP_REPLACE('EASTERN','(EAST)([^ERN])','\1 ') FROM dualRegexp_Replace only part of word in Oracle

> ID：16203169
> 
> 赞同：1
> 
> 时间：2013-04-24T22:16:08.663
> 
> 标签：sql, database, oracle, plsql

我正在尝试，但我没有达到我的结果。它看起来很简单，不知道我错过了什么。我需要分开单词

```
EASTHEMISPHERE ==> EAST HEMISPHERE
WESTHALF ==> WEST HALF
EASTERN ==> EASTERN
WESTERN ==> WESTERN

SELECT REGEXP_REPLACE('EASTERN','(EAST)[(^ERN)]','\1 ') FROM dual
==> EAST RN   ..this is wrong.I am missing something
BUT
SELECT REGEXP_REPLACE('EASTSIDE','(EAST)[(^ERN)]','\1 ') FROM dual
==> EAST IDE  Why is the S  missing 
```

或者有没有更好的写法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:38:08.290

```
[(^ERN)] 
```

不做你打算做的事情（[见这里](http://www.regular-expressions.info/charclass.html)）。要排除匹配这样的字符序列，您需要一个前瞻，如， Oracle 使用的正则表达式`(?!ERN)`的风格不支持这些。`POSIX ERE`

但是，您应该能够使用：

```
SELECT REGEXP_REPLACE('EASTERN','(EAST(ERN)?)(.*)','\1 \3') FROM dual 
```

# bash - 在 Bash 脚本中，遍历文件中的行并修改它们？

> ID：16203172
> 
> 赞同：0
> 
> 时间：2013-04-24T22:16:43.693
> 
> 标签：bash, loops, sed

我只是在学习 Bash 脚本，在这里我找不到适合我的答案，所以这就是我想要做的......

我有文件 list.txt 包含这样的内容..

```
group: 43  [message]
group: 312  [message]
group: 501210  [message] 
```

在 bash 脚本中，我试图遍历整个文件并修复格式（删除冒号，在 'group' 和数字之间只留下一个空格，然后最终删除数字之后的所有内容）：

```
group 43
group 312
group 501210 
```

然后应该将其保存到同一个文件 list.txt 中，覆盖以前的内容。但是，我什至无法弄清楚如何删除'：'..

这是我的代码...

```
for line in $(< list.txt);do
sed 's/:/""/';
done 
```

它似乎加载了第一行，然后在无限循环中丢失。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:21:44.157

你不需要 for 循环。sed 一个班轮可以完成这项工作：

```
sed -ir 's/(group):( [0-9]+).*/\1\2/' list.txt 
```

或 awk 单线：

```
awk -F': | ' '{print $1,$2}' list.txt > /tmp/t.tmp && mv /tmp/t.tmp /path/to/list.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:26:08.627

由于这是关于学习 bash 脚本，您可以这样做：

```
while read group nr rest
do
  printf "%s %d\n" "${group%:}" "$nr"
done < file > newfile && mv newfile file 
```

或者如果“组”在输入文件中没有变化：

```
while read group nr rest
do
  printf "group %d\n" "$nr"
done < file > newfile && mv newfile file 
```

但这通常比使用`sed`,`awk`等要慢。

# ios - NSString ：从逗号分隔的 NSString 中提取字符串

> ID：16203178
> 
> 赞同：0
> 
> 时间：2013-04-24T22:17:03.137
> 
> 标签：ios, objective-c, nsstring

下面是我作为结果返回的两个用逗号分隔的字符串示例：

```
NSString *placeResult = @"111 Main Street, Cupertino, CA" 
```

或者有时结果包含一个地点的名称：

```
NSString *placeResult = @"Starbucks, 222 Main Street, Cupertino, CA" 
```

检查上面的字符串以查看它是否以名称或街道地址开头的最佳方法是什么？

如果它确实以名称开头（即上面第二个示例中的星巴克“），我想提取名称并将其存储到另一个变量中。因此提取后的字符串将是：

```
NSLog (@"%s", placeResult); 
```

日志将打印：

```
"222 Main Street, Cupertino, CA" 
```

另一个字符串现在将在其中存储@"Starbucks"：

```
NSLog (@"%s", placeName); 
```

日志将打印：

```
"Starbucks" 
```

重要提示：提取后我不能丢失逗号分隔。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T22:40:06.653

使用`NSDataDetector`和`NSTextCheckingResult`：

```
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeAddress error:nil];
NSString *str = @"Starbucks, 222 Main Street, Cupertino, CA";
NSArray *matches = [detector matchesInString:str options:0 range:NSMakeRange(0, str.length)];
for (NSTextCheckingResult *match in matches) {
    if (match.resultType == NSTextCheckingTypeAddress) {
        NSDictionary *data = [match addressComponents];
        NSLog(@"address = %@, range: %@", data, NSStringFromRange(match.range));

        NSString *name = data[NSTextCheckingNameKey];
        if (!name && match.range.location > 0) {
            name = [str substringToIndex:match.range.location - 1];
            // "name" may now include a trailing comma and space - strip these as needed
        }
    }
} 
```

这输出：

> 地址={
> 城市=库比蒂诺；
> 状态 = CA；
> 街道 = "222 大街";
> }，范围：{11, 30}

奇怪的是，结果字典不包含对“星巴克”部分的引用。您可以做的是检查是否`addressComponents`包含`NSTextCheckingNameKey`. 如果不是，请检查匹配范围。如果匹配的范围不是字符串的开头，那么您可以使用该值从字符串的开头提取名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T22:34:46.660

要获取逗号之间的事物数组，您可以使用：

```
NSArray *components = [placeResult componentsSeparatedByString:@","]; 
```

可能会跟进：

```
NSMutableArray *trimmedComponents =
           [NSMutableArray arrayWithCapacity:[components count]];

NSCharacterSet *whitespaceCharacterSet = [NSCharacterSet whitespaceCharacterSet];

for(NSString *component in components)
    [trimmedComponents addObject:
             [component stringByTrimmingCharactersInSet:whitespaceCharacterSet]]; 
```

从每个单独的组件中删除任何前导或尾随空格。您将使用例如反转转换

```
NSString *fullAddress = [trimmedComponents componentsJoinedByString:@", "]; 
```

那么问题是，给定`NSString *firstComponent = [trimmedComponents objectAtIndex:0];`，您如何猜测它是名称还是街道地址？如果它像检查前面是否有一个不为零的数字那么简单，那么你可以这样做：

```
if([firstComponent integerValue])
{
    /* ... started with a non-zero number ... */

    NSString *trimmedAddress = [[trimmedComponents subArrayWithRange:
      NSMakeRange(1, [trimmedComponents count]-1)] componentsJoinedByString:", "];

    NSLog(@"trimmed address is: %@");
} 
```

尽管该条件测试也适用于`placeResult`，但您可能需要添加有效性检查以确保在开始假设您可以从第二个开始创建数组之前至少有两个组件。

# python - 在 Python 中分配（或重新重载）赋值运算符时遇到问题

> ID：16203185
> 
> 赞同：5
> 
> 时间：2013-04-24T22:17:19.953
> 
> 标签：python

我在分配赋值运算符时遇到问题。

我已经成功重载`__setattr__`。但是在对象初始化之后，我想做`__setattr__`点别的，所以我尝试将它分配给另一个函数，`__setattr2__`.

代码：

```
class C(object):

    def __init__(self):
        self.x = 0
        self.__setattr__ = self.__setattr2__

    def __setattr__(self, name, value):
        print "first, setting", name
        object.__setattr__(self, name, value)

    def __setattr2__(self, name, value):
        print "second, setting", name
        object.__setattr__(self, name, value)

c = C()
c.x = 1 
```

我得到什么：

```
first, setting x
first, setting __setattr__
first, setting x 
```

我想要/期望的：

```
first, setting x
first, setting __setattr__
second, setting x 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T22:23:16.957

[从文档](http://docs.python.org/2/reference/datamodel.html#new-style-special-lookup)：

> ## 新型类的特殊方法查找
> 
> 对于新式类，特殊方法的隐式调用只有在对象类型上定义时才能保证正常工作，而不是在对象的实例字典中。这种行为是以下代码引发异常的原因（与旧式类的等效示例不同）：
> 
> ```
> >>> class C(object):
> ...     pass
> ...
> >>> c = C()
> >>> c.__len__ = lambda: 5
> >>> len(c)
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> TypeError: object of type 'C' has no len() 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T22:21:07.420

为什么不使用标志来指示`__init__`仍在进行中？

```
class C(object):
    def __init__(self):
        # Use the superclass's __setattr__ because we've overridden our own.
        super(C, self).__setattr__('initialising', True)
        self.x = 0
        # the very last thing we do in __init__ is indicate that it's finished
        super(C, self).__setattr__('initialising', False)

    def __setattr__(self, name, value):
        if self.initialising:
            print "during __init__, setting", name
            # I happen to like super() rather than explicitly naming the superclass
            super(C, self).__setattr__(name, value)
        else:
            print "after __init__, setting", name
            super(C, self).__setattr__(name, value) 
```

# html - 为什么禁用 CSS 的 HTML 很重要？

> ID：16203189
> 
> 赞同：0
> 
> 时间：2013-04-24T22:17:31.787
> 
> 标签：html, css

创建网站时，为什么要关心没有样式的 HTML？

是否有任何设备只能呈现 HTML（没有 CSS 或 JavaScript）？

**您通常关心您的网站在没有 CSS 的情况下如何显示？**

**它为什么如此重要？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T22:21:48.980

有几种情况可以在没有样式的情况下使用网站。正如评论中提到的，屏幕阅读器（例如视障人士使用的屏幕阅读器）只能阅读内容，而不是样式。

也许更重要的是，许多搜索引擎蜘蛛（想想：谷歌）在没有样式的情况下阅读您的网站。当您在没有 CSS 的情况下查看您的网站时，您将更好地了解搜索引擎如何查看您的内容。

如果您很幸运，或者您的内容特别令人讨厌，您可能会遇到偶尔通过[Lynx](http://lynx.browser.org/)浏览您的网站的大师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T11:23:21.130

这里似乎有一些误解。首先也是最重要的，屏幕阅读器**确实**考虑了 CSS 和 JavaScript。为什么？仅仅是因为与过去不同，它们不是独立运行，而是作为现有浏览器的插件工作，或者将渲染引擎内嵌在自己的系统中。

这是否意味着您根本不需要担心屏幕阅读器？可悲的是，情况也并非如此。例如，如果你添加`display:table`到一个元素只是因为你想垂直对齐某些屏幕阅读器实际上会将它视为一个真正的表格（这没有实际意义）。好的部分是虽然页面是从上到下阅读的，但首先是标题和菜单（如果找到），并且`display:none`通过 javascript 添加到元素也会从屏幕阅读器中隐藏元素。现在，下面的内容听起来会很刺耳，但除非你正在制作一个*真正的*高调的网站 我不建议您过多关注这一点。一方面，屏幕阅读器变得越来越好（例如，如果您有最新版本的 android，请尝试包含在您的 android 设备上的那个），另一方面，盲人习惯于网站“有点”混乱。现在，这并不意味着您应该开始使用 Flash 或其他疯狂的东西，但这确实意味着如果您只是编写一个合适的网站，将您的菜单设为列表，将您的部门设为 div 而不是表格等，您通常应该是美好的。如果您*正在*制作一个高知名度的网站，那么您应该查看[WAI-ARIA](http://en.wikipedia.org/wiki/WAI-ARIA)。

现在，进入搜索引擎部分，至少对于大型搜索引擎来说，这不是真的。谷歌*确实*考虑了样式。并非所有对 Google 来说都不重要的样式，但它实际上会意识到隐藏了哪些内容并分析 javascript 是否会显示隐藏的内容（作为反 SEO 工作的一部分），它会在你的 javascript 中搜索链接，可能还有很多更多我不知道。Bing 也在很大程度上做到了这一点，尽管例如 dadduckgo 并没有做太多/根本没有做这件事。无论哪种方式，Google 会像 lynx 一样看到您的网站的想法在过去是正确的，但现在是无效的。

如果您检查您的服务器日志，您会发现*没有人*通过 lynx 访问您的站点。这就是当今生活的现实。过去（再次）人们偶尔会使用 lynx，如果他们只能访问控制台，但现在从运行完整网络浏览器的口袋中取出手机要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T23:10:52.143

答案的第一部分：“基于文本的浏览器”

[基于文本的浏览器列表](http://en.wikipedia.org/wiki/List_of_web_browsers)

```
Alynx
ELinks (active version of Links)
Emacs/W3
Line Mode Browser
Links
Lynx
Net-Tamer
w3m
WebbIE 
```

第二部分：“搜索引擎”

[语义搜索引擎列表](http://en.wikipedia.org/wiki/List_of_semantic_search_engines)

[搜索引擎列表](http://en.wikipedia.org/wiki/List_of_search_engines)

第三部分：“[网络可访问性](http://www.w3.org/WAI/intro/accessibility.php)”，其中软件帮助[残障人士访问网络。](http://www.w3.org/WAI/intro/people-use-web/Overview.html)

> 需要注意的是，对于第三部分，可访问性，它有时是法律要求。例如，在英国，拥有一个盲人无法访问的网站是违法的。美国政府服务也有类似的要求。–[睡衣人](https://stackoverflow.com/users/167735/slebetman)

这也是[加拿大的适用法律](http://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=23601&section=text)

有关Web 可访问性评估工具的完整列表，请参阅[w3 的此工具列表](http://www.w3.org/WAI/RC/tools/complete)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:30:20.207

CSS不是一个开/关的东西。尽管 CSS*可能*被完全禁用，但更常见的是您的*某些*CSS 设置被忽略或覆盖。这是一个不完整的案例列表（有关更多详细信息，请参阅我的[CSS 警告）：](http://www.cs.tut.fi/~jkorpela/css-caveats.html)

*   基于语音的浏览器通常会忽略大部分 CSS，主要是因为大部分 CSS 都是针对视觉呈现的。
*   “纯文本浏览器”也是如此（更准确地说，字符单元浏览器，它仅使用等宽字体以纯文本呈现，但可能能够使用颜色和粗体）。
*   搜索引擎通常根本不关心 CSS。
*   CSS 支持各不相同。您使用的 CSS 功能越高级，就越有可能许多浏览器没有实现它们。
*   用户可以完全或部分禁用 CSS 支持。
*   用户样式表可能会干扰您的 CSS 代码，甚至会覆盖它们。
*   浏览器设置，例如最小字体大小可能会使你们中的一些 CSS 设置无效。
*   浏览器有错误。您使用的 CSS 技术越复杂，您在某些浏览器中触发错误的可能性就越大。
*   外部 CSS 文件（使用 CSS 的推荐方式）可能会丢失，例如，浏览器可能需要等待（可能是徒劳的）服务器，或者归档系统可能归档 HTML 文件但无法归档 CSS 文件。
*   样式可能会在传输过程中丢失，例如在将内容从网页复制到 MS Word 或 Excel 或记事本或电子邮件时。

# python - Python SQlite ORDER BY 命令不起作用

> ID：16203191
> 
> 赞同：1
> 
> 时间：2013-04-24T22:17:49.093
> 
> 标签：python, sql, sqlite, sql-order-by

我刚开始编程，并使用 sqlite3 在 pyscripter 中编写了几行代码。

表“gather”是预先创建的。然后我从“收集”中选择某些行以将它们放入另一个表中。我尝试按特定列“日期”对该表进行排序。但这似乎不起作用。它不会给我错误消息或类似的东西。它只是没有排序。如果我在 sqlitemanager 中尝试相同的命令（SELECT * FROM 匹配 ORDER BY 日期），它在完全相同的表上工作正常！这里有什么问题？我用谷歌搜索了一段时间，但我没有找到解决方案。这可能是我想念的愚蠢的东西..

正如我所说，我是一个完全的新手。我猜你们看到代码都会流泪。因此，如果您有任何提示我可以如何缩短代码或使其更快或其他什么，非常欢迎您:) （但除了上述部分之外，一切都很好。）

```
import sqlite3
connection = sqlite3.connect("gather.sqlite")
cursor1 = connection.cursor()
cursor1.execute('Drop table IF EXISTS matches')
cursor1.execute('CREATE TABLE matches(date TEXT, team1 TEXT, team2 TEXT)')
cursor1.execute('INSERT INTO matches (date, team1, team2) SELECT * FROM gather WHERE team1=? or team2=?, (a,a,))

cursor1.execute("SELECT * FROM matches ORDER BY date")

connection.commit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:22:11.140

尝试`commit`在. `SELECT *`_ `res = cursor1.fetchall()`_ `execute`_ `SELECT`如果您想像在 sqlitemanager 中一样显示它们，请添加

```
for hit in res:
    print '|'.join(hit) 
```

在底部。

**编辑**：要解决将排序顺序存储到表中的问题：

我认为您正在寻找的是诸如聚集索引之类的东西。（这实际上并没有对表中的值进行排序，但很接近；请参见[此处](https://stackoverflow.com/questions/12213721/how-are-the-table-data-stored-when-it-has-a-clustered-index)）。

SQLIte 没有这样的索引，但是您可以通过实际排序表来模拟它们。在插入数据时，您只能执行一次。您将需要如下 SQL 命令：

```
INSERT INTO matches (date, team1, team2) 
    SELECT * FROM gather 
    WHERE team1=? or team2=? 
    ORDER BY date; 
```

而不是您当前使用的那个。

[请参阅此处](http://www.sqlite.org/cvstrac/wiki?p=PerformanceTuningWindows)的第 4 点，这就是我的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:28:04.350

好的，我想我明白你的问题了。首先：我不确定该提交调用是否有必要。但是，如果是，您肯定希望它出现在您的 select 语句之前。'connection.commit()' 本质上是说，提交我刚刚对数据库所做的更改。

您的第二个问题是您正在执行选择查询，但实际上从未对查询结果执行任何操作。

尝试这个：

```
import sqlite3
connection = sqlite3.connect("gather.sqlite")
cursor1 = connection.cursor()
cursor1.execute('Drop table IF EXISTS matches')
cursor1.execute('CREATE TABLE matches(date TEXT, team1 TEXT, team2 TEXT)')
cursor1.execute('INSERT INTO matches (date, team1, team2) SELECT * FROM gather WHERE team1=? or team2=?, (a,a,))

connection.commit()

# directly iterate over the results of the query:
for row in cursor1.execute("SELECT * FROM matches ORDER BY date"):
    print row 
```

您正在执行查询，但从未真正检索结果。使用 sqlite3 有两种方法：一种方法是我在上面向您展示的方法，您可以直接将 execute 语句用作可迭代对象。

另一种方式如下：

```
import sqlite3
connection = sqlite3.connect("gather.sqlite")
cursor1 = connection.cursor()
cursor1.execute('Drop table IF EXISTS matches')
cursor1.execute('CREATE TABLE matches(date TEXT, team1 TEXT, team2 TEXT)')
cursor1.execute('INSERT INTO matches (date, team1, team2) SELECT * FROM gather WHERE team1=? or team2=?, (a,a,))

connection.commit()

cursor1.execute("SELECT * FROM matches ORDER BY date")

# fetch all means fetch all rows from the last query.  here you put the rows
# into their own result object instead of directly iterating over them.
db_result = cursor1.fetchall() 
for row in db_result:
    print row 
```

# actionscript-3 - 设置 Flash AS3 Slider 组件的宽度和高度

> ID：16203193
> 
> 赞同：0
> 
> 时间：2013-04-24T22:18:04.603
> 
> 标签：actionscript-3, flash

我正在尝试使用 Flash CS4 中的内置 AS3 滑块组件设置自定义皮肤。我有以下代码，但设置`myslider.width`并`myslider.height`似乎没有任何效果。滑块仍以默认宽度和高度显示，并且我的自定义 sliderTrackSkin 正在按比例缩小。

```
import fl.controls.Slider;
import fl.controls.SliderDirection;
import fl.events.SliderEvent;

var myslider:Slider = new Slider();
myslider.direction = SliderDirection.VERTICAL;
myslider.width = 43;
myslider.height = 110;
myslider.minimum = 1;
myslider.maximum = 90;
myslider.value = 30;
myslider.snapInterval = 1;
myslider.liveDragging = true;
myslider.addEventListener(SliderEvent.CHANGE, slider_change);
myslider.move(640, 60);
myslider.setStyle("thumbUpSkin", thumb1);
myslider.setStyle("thumbDownSkin", thumb1);
myslider.setStyle("thumbOverSkin", thumb1);
myslider.setStyle("sliderTrackSkin", slidertrack1);
addChild(myslider); 
```

我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:41:45.257

事实证明`myslider.width`和`myslider.height`正在对父级生效，但滑块组件的拇指和轨道没有被调整大小。我不得不像这样手动调整拇指和轨道的大小：

```
var mysliderthumb = Sprite(myslider.getChildAt(1));
mysliderthumb.height = 34;
mysliderthumb.width = 15;

var myslidertrack = Sprite(myslider.getChildAt(0));
myslidertrack.height = 15;
myslidertrack.width = 100; 
```

此外，因为我有`myslider.direction = SliderDirection.VERTICAL`，拇指和轨道被旋转了 90 度，所以我不得不相应地翻转宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:24:46.767

在设置所有属性并应用皮肤后尝试调用`myslider.validateNow()`方法。

# linux - 在 linux 中，使用 pipe() 从分叉进程调用 system()

> ID：16203196
> 
> 赞同：0
> 
> 时间：2013-04-24T22:18:15.260
> 
> 标签：linux, fork, pipe

我有一个使用 fork() 和 pipe() 的标准程序，目的是在子进程中对第三方程序进行 system() 调用并将输出重定向到父进程。我发现如果我这样做，父进程永远无法检测到子进程已关闭管道，因此它永远无法从调用 read() 的 while 循环中退出。

当我用一些其他通用系统调用（如 system("ls -l")）替换对第三方程序的 system() 调用时，问题就消失了。使用影响该程序的 system() 调用第三方程序可能存在哪些潜在问题？

```
#include <iostream> 
#include <fstream>
#include <stdlib.h>//system
#include <sys/wait.h>

int main(int argc, char **argv){

  //setup pipe
  int pipeid_L1[2];
  pipe(pipeid_L1);

  pid_t pid_L1;
  pid_L1 = fork(); 
  if( pid_L1==-1 ){
    throw std::logic_error("Fork L1 failed");
  }
  else if(pid_L1 ==0){//L1 child process
    dup2(pipeid_L1[1],STDOUT_FILENO);//redirect standard out to pipe
    close(pipeid_L1[0]); //child doesn't read
    system( ... some program ... ); //making the system call to a third party program
    close(pipeid_L1[1]); 
    exit(0);
  }
  else{ 

    //setup pipe  
    close(pipeid_L1[1]);      

    int buf_size=64;
    char L1_buf[buf_size];

    while( read(pipeid_L1[0],L1_buf,buf_size)){ //this while loop never exits if I make the system call to the third party program
      ... do stuff here ...
    }

  }
  exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:14:22.993

问题是当所有其他进程关闭管道的写入端时，父级只会看到 EOF。有三个相关的进程——你派生的孩子，系统派生和执行的外壳，以及你运行的实际程序。前两个在程序实际退出之前不会关闭管道的末端，因此在发生这种情况并且所有进程都退出之前，父级不会看到 EOF。

如果您希望父程序在程序关闭其标准输出后立即看到 EOF，而不是等到它退出，您需要通过使用`exec`而不是`system`.

或者，您可以使用`popen`which 为您完成所有需要的 fork/pipe/exec。

# ruby-on-rails - 如何在 ruby on rails 中获取女性用户发送邮件

> ID：16203199
> 
> 赞同：0
> 
> 时间：2013-04-24T22:18:32.550
> 
> 标签：ruby-on-rails, boolean

我正在设计一个简单的约会应用程序，我的用户模型有男性和女性的两个布尔字段，我想要一个用户注册为男性的情况，应该向他展示女性用户添加为朋友，如果它是女性同样，应该显示男性用户。我的用户模型如下

```
 t.string :email,              :null => false, :default => ""
  t.string :bio,              :null => false, :default => "update whatsup with yourself and click here to edit it"
  t.string :username,              :null => false, :default => ""
  t.string :encrypted_password, :null => false, :default => ""
  t.boolean :admin
  t.boolean :author
  t.boolean :male
  t.boolean :female 
```

我已经实现了友谊模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:41:22.020

在某处的控制器操作中，添加此位。

```
 @opposite_sex_users = nil
 if current_user.male && !current_user.female
   @opposite_sex_users = User.where(:male => false, :femail => true)
 elsif !current_user.male && current_user.female
   @opposite_sex_users = User.where(:male => true, :femail => false)
 end 
```

* * *

不幸的是，您没有真正给我足够的信息来解决您的问题。例如，假设您想`home`在页面控制器中使用它，您可以执行类似的操作。

```
class PagesController < ApplicationController
  def home
    @opposite_sex_users = nil
    number_of_users_to_show = 5 # change this to the number of users you want to show
    if current_user.male && !current_user.female
      @opposite_sex_users = User.where(:male => false, :femail => true).sample(number_of_users_to_show)
    elsif !current_user.male && current_user.female
      @opposite_sex_users = User.where(:male => true, :femail => false).sample(number_of_users_to_show)
    end
  end
end 
```

在你的路线中，

```
root :to => "pages#home" 
```

在您的意见/页面/home.html.erb

```
<%- @opposite_sex_users.each do |user| %>
  <!-- displays user email %>
  <%= user.username %>
<% end %> 
```

# winapi - 使用 Xbox 控制器重置 xInput 中的按钮输入

> ID：16203200
> 
> 赞同：0
> 
> 时间：2013-04-24T22:18:39.933
> 
> 标签：winapi, xbox, xinput

我正在为一个项目使用 XInput，但我在使用 xbox 控制器时遇到了问题。当我使用 B 按钮返回到以前的状态时，它注册按钮按下的速度如此之快，以至于它继续推回使用 B 按钮退出的多个状态。

```
if( ( player1.GetState().Gamepad.wButtons & XINPUT_GAMEPAD_B ) || ( player2.GetState().Gamepad.wButtons & XINPUT_GAMEPAD_B ) ) {
    return ESC_BUTTON;
} 
```

我尝试通过添加一个`& 1`但输入从不注册来重置缓冲区。有没有简单的方法来解决这个问题？

更新：

```
current = (DWORD)( ( start - GetTickCount() ) / 1000.f );

if( current > 0.005f )
{
    if( ( player1.GetState().Gamepad.wButtons & XINPUT_GAMEPAD_B ) || ( player2.GetState().Gamepad.wButtons & XINPUT_GAMEPAD_B ) ) 
    {
        start = GetTickCount();

        return ESC_BUTTON;
    }
} 
```

仍然有重置的问题。有时它有效，有时它不...想法？

# html - 与样式化的元素内联的部分？

> ID：16203202
> 
> 赞同：0
> 
> 时间：2013-04-24T22:18:58.643
> 
> 标签：html, css, alignment

我正在尝试将`section`元素与样式`aside`元素对齐。我已经尝试了 , , 的所有组合，`inline`但我似乎无法发生任何事情。我不明白为什么它没有按应有的方式对齐。小提琴：http: [//jsfiddle.net/bmgkB/](http://jsfiddle.net/bmgkB/)`block``inline-block`

从视觉上看，这是结果：

![](https://i.stack.imgur.com/crjai.png)

...我想（大约）在这里得到：

![](https://i.stack.imgur.com/5wz2j.png)

HTML 摘录：

```
<aside class="icon"><p>§</p></aside> 
    <section role="region" class="aside">
        Welcome to the Pyroneous Lair. There is a variety of features here. 
    </section> 
```

CSS 摘录：

```
@charset UTF-8;

body
{
  background:#000;
  color:#FFF;
  width:90%;
  font:11px tahoma, sans-serif, serif;
  margin:auto
}

article,aside,figure,footer,header,hgroup,menu,nav,section
{
  display:block
}

header
{
  text-align:center
}

hr
{
  border:none;
  border-top:medium double #333;
  color:#FFF;
  text-align:center;
  padding:0
}

hr:after
{
  content:"§";
  display:inline-block;
  position:relative;
  top:-.85em;
  font-size:1.5em;
  background:#000;
  z-index:2;
  padding:0 .25em
}

.icon
{
  font:45px serif, "Times New Roman", sans-serif;
  color:#000;
  border-radius:100px;
  text-align:center;
  width:70px;
  height:70px;
  background:#A60000
}

.aside
{
  margin-left:5%;
  display:inline
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:30:25.127

使 the`.aside`和`.icon`be都成为`display:inline-block`（并*从内部**删除 the ，因为它什么都不提供..`p``icon`*）

演示在[http://jsfiddle.net/gaby/bmgkB/2/](http://jsfiddle.net/gaby/bmgkB/2/)

# jquery - 绑定和 ko.toJSON 无法按预期工作

> ID：16203206
> 
> 赞同：1
> 
> 时间：2013-04-24T22:19:19.140
> 
> 标签：jquery, knockout.js

我正在学习 KO 并尝试创建一个简单的列表项添加/删除。但我有以下问题。

Q1：如果您点击添加而不输入名称，您刚刚添加的项目将具有`result`名称。为什么以及如何在允许空作为有效输入的同时防止它？

Q2：我想使用`<pre>`标签显示当前视图模型的 JSON，但它没有显示任何内容。但是按钮显示了一些东西。**我想出了这个。我需要使用`ko.toJSON($data, null, 4)`**.

Q3：和Q2有关，按钮显示了一些东西，但是显示的东西看起来很奇怪。输入几个项目后，然后单击`debug`按钮。您将看到视图模型中的所有项目都被您更改的最后一项替换。

这是[小提琴](http://jsfiddle.net/TgD6a/)。

CSS：

```
input[type=text], select {
    width:100px;
} 
```

JS：

```
function foodie() {
    this.name;
    this.food;
}

function foodieApp() {
    var self = this;
    self.foodies = ko.observableArray();
    self.foodieToAdd = ko.observable(new foodie());

    self.addFoodie = function () {
        this.foodies.push(this.foodieToAdd());
    };

    self.delFoodie = function (foodieToDel) {
        self.foodies.remove(foodieToDel);
    };

    self.debug = function () {
        alert(ko.toJSON(self, null, 4));
    };
}

var app = new foodieApp();
ko.applyBindings(app); 
```

HTML：

```
<table>
    <thead>
        <tr>
            <td>Foodie's Name
                <br/>
                <input type=text data-bind='value: foodieToAdd().name' />
            </td>
            <td>Foodie's Food
                <br/>
                <select data-bind='value: foodieToAdd().food'>
                    <option value=apple>Apple</option>
                    <option value=banana>Banana</option>
                    <option value=cherry>Cherry</option>
                </select>
            </td>
            <td>
                <input type=button value=Add data-bind='click: addFoodie' />
            </td>
        </tr>
    </thead>
    <tbody data-bind='foreach: foodies'>
        <tr>
            <td>
                <input type=text data-bind='value: name' />
            </td>
            <td>
                <select data-bind='value: food'>
                    <option value=apple data-bind>Apple</option>
                    <option value=banana>Banana</option>
                    <option value=cherry>Cherry</option>
                </select>
            </td>
            <td>
                <input type=button value=del data-bind='click: $parent.delFoodie' />
            </td>
        </tr>
    </tbody>
</table>
<input type=button value=debug data-bind='click: debug' />
<!-- why the following <pre> tag is empty? -->
<pre data-bind='text: ko.toJSON(app, null, 4)'></pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:02:25.153

这是一个更新的小提琴：http: [//jsfiddle.net/jearles/TgD6a/3/](http://jsfiddle.net/jearles/TgD6a/3/)

--

*   Q1：你没有初始化你的`foodie`对象
*   Q2：`app`不是您的 ViewModel 的一部分 - 它是 ViewModel。用于`$root`访问顶级 ViewModel
*   Q3：这与你定义的方式有关`foodieToAdd`。基本上，您只创建一个实例，因此 Knockout 会一遍又一遍地添加相同的对象。因为您没有可观察的属性，所以敲除没有更新 UI。

在我的小提琴中，我改变了`foodieToAdd`定义方式。它现在只是一个标准对象，具有两个可观察的属性。当您单击`add`它时，它会克隆`foodieToAdd`以在 observableArray 中创建一个新条目。

编辑：请参阅下面的评论，了解为什么淘汰赛正在兴起`result`。

--

```
function foodie(foodie) {
    this.name = ko.observable(foodie ? foodie.name() : '');
    this.food = ko.observable(foodie ? foodie.food() : '');
}

function foodieApp() {
    var self = this;
    self.foodies = ko.observableArray();
    self.foodieToAdd = new foodie();

    self.addFoodie = function () {
        this.foodies.push(new foodie(this.foodieToAdd));
    };

    self.delFoodie = function (foodieToDel) {
        self.foodies.remove(foodieToDel);
    };

    self.debug = function () {
        alert(ko.toJSON(self, null, 4));
    };
}

var app = new foodieApp();
ko.applyBindings(app); 
```

# css - Ember.js 模板和全高（包括 JS bin 示例）

> ID：16203209
> 
> 赞同：0
> 
> 时间：2013-04-24T22:19:24.023
> 
> 标签：css, templates, view, ember.js, height

现场演示：http: [//jsbin.com/ozigoh/1/](http://jsbin.com/ozigoh/1/) | 来源：http: [//jsbin.com/ozigoh/1/edit](http://jsbin.com/ozigoh/1/edit)

## 问题很简单。

在 Ember 将生成的 div 包裹在模板内之后，模板内的全高 div 不会获得全高。

我想要的是：

* * *

|||| 我的 div 应该是 100% 高度并且是 100% 全高

||||

||||

||||

* * *

在 Ember 将视图 div 包裹在我的全高 div 之后，我得到了什么：

* * *

|||| 我的 div 应该是 100%，但不是 100%，因为 ember 视图 div 没有设置为 100% 高度

|

|

|

* * *

我应该怎么办？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:54:33.260

You can add a class to the application view's `div` added by Ember:

```
App.ApplicationView = Em.View.extend({
  classNames: ['full-height']
}); 
```

Updated Jsbin:

[http://jsbin.com/ozigoh/5/edit](http://jsbin.com/ozigoh/5/edit)

[http://jsbin.com/ozigoh/5](http://jsbin.com/ozigoh/5)

# c# - 如何将 int[] 转换为 int[,] - C#

> ID：16203210
> 
> 赞同：6
> 
> 时间：2013-04-24T22:19:27.217
> 
> 标签：c#, arrays, multidimensional-array, matrix

我有一维的 int 数组：

```
var intArray=new[] { 1, 2, 3, 4, 5, 6 }; 
```

我想将其转换为二维，例如：

```
var intArray2D=new[,] { {1, 2}, {3, 4}, {5, 6} }; 
```

如何使用 C# 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:26:22.843

也许有一个循环：

```
for (int i = 0; i < oldArr.Length; i=i+2)
{
    newArr[i/2, 0] = oldArr[i];
    newArr[i/2, 1] = oldArr[i + 1];
} 
```

未经测试，但应该让你指出正确的方向......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:20:56.830

如果一维数组包含原始数据的[行主要顺序](http://en.wikipedia.org/wiki/Row-major_order)，并且二维数组的总容量等于一维数组的长度，则可以使用它。

```
int[] source = new int[6];
int[,] target = new int[3, 2];
Buffer.BlockCopy(source, 0, target, 0, source.Length * sizeof(int)); 
```

请注意，与`Array.Copy`其他数组/列表方法不同，`Buffer.BlockCopy`它对多个*字节*的数据进行操作，即使数组的每个元素都大于 1 个字节。它也只对原始数据类型的数组进行操作。

附加参考：

*   多维数组以行优先顺序存储（[ECMA-335 Partition I, §8.9.1](http://www.ecma-international.org/publications/standards/Ecma-335.htm)）
*   [`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)

编辑：这是一个完整的单元测试。

```
[TestMethod]
public void SOTest16203210()
{
    int[] source = new int[6] { 1, 2, 3, 4, 5, 6 };
    int[,] destination = new int[3, 2];
    Buffer.BlockCopy(source, 0, destination, 0, source.Length * sizeof(int));
    Assert.AreEqual(destination[0, 0], 1);
    Assert.AreEqual(destination[0, 1], 2);
    Assert.AreEqual(destination[1, 0], 3);
    Assert.AreEqual(destination[1, 1], 4);
    Assert.AreEqual(destination[2, 0], 5);
    Assert.AreEqual(destination[2, 1], 6);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:30:38.067

我相信您想将一个整数数组拆分为一个由两个整数组成的数组：

```
int[] list = new int[] { 1, 2, 3, 4, 5, 6};
int[][] newlist = new int[list.Length / 2][];
for (int i = 0, n = 0; i < list.Length; i += 2, n++)
{
    newlist[n] = new[] { list[i], list[i + 1] };
} 
```

要将其`Points`特别分配给您，您可以尝试：

```
List<Point> plist = new List<Point>();
for (int i = 0; i < list.Length; i += 2)
{
    plist.Add(new Point(list[i], list[i + 1]));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T22:31:43.790

您可以使用此代码。在这里你可以发送任何你喜欢的长度。您可以将 arry[] 转换为 arry[,] 任何 lenth.2 或 3 或任何您喜欢的！只要 size % a.length ==0 !!!!

代码

```
 static int[,] convert(int[] a, int size)
    {
        int[,] value = new int[a.Length / size, size];
        int counter = 0;
        //
        for (int b = 0; b < value.GetLength(0); b++)
            for (int c = 0; c < value.GetLength(1); c++)
            {
                 value[b, c] = a[counter];
                  counter++;
           }
        return value;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T22:30:31.620

你可以试试这个：

```
int [] a = {1,2,3,4,5,6};
int [,] b = new int[a.Length/2,2];

for(int i = 0;i<a.Length;i++)
{
    b[i/2,i%2] = a[i];
} 
```

请注意，i/2 是整数除法，因此 4/2 和 5/2 都会给出 2，这是原始数组中元组 5 和 6 在 2Darray 中的正确索引。第二个索引是使用提醒除以 2 时确定的，如果索引为偶数，则为 0，如果原始数组中的项目的索引为奇数，则为 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T00:43:19.780

我会考虑这个数组的任何维度：

```
public class TestClass {
    public static void TestMethod2D() {
        var intLinear=new[] { 1, 2, 3, 4, 5, 6 };
        var indexer2D=new ArrayIndexer<int>(3, 2);

        for(var i=intLinear.Length; i-->0; indexer2D[i]=intLinear[i])
            ;

        var int2D=(int[,])indexer2D.ToArray();
    }

    public static void TestMethod4D() {
        var intLinear=new[] { 1, 2, 3, 4, 5, 6 };
        var indexer4D=new ArrayIndexer<int>(2, 2, 2, 2);

        for(var i=intLinear.Length; i-->0; indexer4D[i]=intLinear[i])
            ;

        var int4D=(int[, , ,])indexer4D.ToArray();
    }
}

public partial class ArrayIndexer<T> {
    public Array ToArray() {
        return m_Array;
    }

    public ArrayIndexer(params int[] lengths) {
        m_Array=Array.CreateInstance(typeof(T), lengths);
    }

    public T this[params int[] indices] {
        set {
            m_Array.SetValue(value, indices.Transform(m_Array));
        }

        get {
            return (T)m_Array.GetValue(indices.Transform(m_Array));
        }
    }

    Array m_Array;
}

public static partial class ArrayExtensions {
    public static int[] Transform(
        this int[] indices, Array array, bool isRowMajor=true) {
        if(indices.Length>array.Rank)
            return indices;
        else {
            var list=indices.ToList();

            if(isRowMajor)
                list.Reverse();

            for(int r, q=0, i=0, count=array.Rank; count-->0; ++i) {
                var index=isRowMajor?count-i:i;

                if(indices.Length>i) {
                    q=Math.DivRem(indices[i]+q, array.GetLength(index), out r);
                    list[i]=r;
                }
                else {
                    if(index<0) {
                        list.Add(q);
                        q=0;
                    }
                    else {
                        q=Math.DivRem(q, array.GetLength(index), out r);
                        list.Add(r);
                    }
                }
            }

            if(isRowMajor)
                list.Reverse();

            return list.ToArray();
        }
    }
} 
```

`ArrayExtensions.Transform`是一个索引转换器，它使用给定数组的几何形状执行线性转换。`isRowMajor`控制布局，例如您认为的`int[,]`in`x, y`或 in `y, x`order。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T22:26:26.263

如果维度的乘积相同，最快的方法可能是使用固定语句固定矩阵，然后使用 Marshalling 类将连续块从数组复制到 IntPtr 从您获得的 void* 创建固定的。

您必须将其包装在 unsafe 语句中，并在程序集的构建配置中启用 unsafe。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-24T22:41:42.157

我已将其从 vb 转换为 c#

```
int Size = OldArray.Length;
int[,] NewPoints = null;

if (Size % 2 != 0) {
  //Error - Array has odd number of elements!
} else {
  for (i = 0; i <= Size - 1; i += 2) {
    Array.Resize(ref AllPoints, (i / 2) + 1, 2);
    NewPoints[i / 2, 0] = OldArray(i);
    NewPoints[i / 2, 1] = OldArray(i + 1);
  }
} 
```

# amazon-web-services - 在 EC2 中运行 ec2-describe-instances

> ID：16203215
> 
> 赞同：0
> 
> 时间：2013-04-24T22:19:50.790
> 
> 标签：amazon-web-services, amazon-ec2

我正在尝试从 EC2 中的一个节点运行 ec2-describe-instances 以查看我所有正在运行的实例。

我 ssh 进入实例并执行以下操作：

> ec2-描述-实例

并得到：

缺少必需的选项“-O，--aws-access-key KEY”（使用 -h）

我不确定这意味着什么。我认为它可能是我用来 ssh 的 pem 文件，所以我将它 scp'd 并将其与 -O 选项一起使用，但没有骰子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:56:31.310

ec2 api 需要与您用于登录实例的 ssh 密钥不同的安全密钥。

您应该可以在此处获取密钥：[https ://console.aws.amazon.com/iam/home?#security_credential](https://console.aws.amazon.com/iam/home?#security_credential)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:01:28.210

Greg，您需要将安全密钥和访问密钥作为该命令的参数传递，否则您也可以将它们设置为环境变量，您将通过访问上述答案中@datasage 提供的链接从您的帐户中获取这些安全密钥和访问密钥.

# orm - 如何使用 Propel ORM 更新具有不同值的多行？

> ID：16203217
> 
> 赞同：0
> 
> 时间：2013-04-24T22:19:56.970
> 
> 标签：orm, symfony-1.4, propel

如果我有一个主键数组，然后是另一个键值对标题：

```
$article = array(
  array('Id' => 1, 'Title' => 'New Title'),
  array('Id' => 2, 'Title' => 'New Title2'),
  array('Id' => 3, 'Title' => 'New Title3'),
  array('Id' => 4, 'Title' => 'New Title4')
); 
```

我正在寻找一种在 1 Propel 呼叫中更新我的文章表的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:07:09.410

我不认为你可以。如果您考虑如何在 MySQL 中执行此类操作，则不会在单个查询中进行。它们必须是单独的语句，例如

```
UPDATE `article` SET title = "New Title" WHERE id = 1;
UPDATE `article` SET title = "New Title2" WHERE id = 2; 
```

您可能已经可以进行符合指定条件的批量更新，如下所示：

```
// set the select condition criteria
$c = new Criteria();
$c->add(ArticlePeer::ID, 1);

// set the update criteria
$update = new Criteria();
$update->add(ArticlePeer::TITLE, 'New Title');

// we need the connection for update, so get default connection
$con = Propel::getConnection();

// finally, do the update
BasePeer::doUpdate($c, $update, $con); 
```

但这对您的实例没有多大帮助，因为选择标准条件在您的每个更新实例中都会发生变化。也许你可以将上面的代码包含在一个循环遍历你的数组的 for 循环中。

**更新：**

您可以尝试如下的 Propel hack（未经测试）：

```
$article = array(
  array('Id' => 1, 'Title' => 'New Title'),
  array('Id' => 2, 'Title' => 'New Title2'),
  array('Id' => 3, 'Title' => 'New Title3'),
  array('Id' => 4, 'Title' => 'New Title4')
);

$ids = array();
$when = 'CASE id';
foreach ($article as $a) {
    $ids[] = $a['Id'];
    $when .= ' WHEN ' . $a['Id'] . ' THEN ' . $a['Title'];
}
$when .= ' END';

$c = new Criteria();
$c->add(ArticlePeer::ID, $ids, Criteria::IN);

$update = new Criteria();
$update->add(ArticlePeer::TITLE, $when);

$con = Propel::getConnection();

BasePeer::doUpdate($c, $update, $con); 
```

# function - 验证 Char 函数

> ID：16203220
> 
> 赞同：1
> 
> 时间：2013-04-24T22:20:05.167
> 
> 标签：function, char, cin

所以我必须能够验证用户输入并确保它是 y 或 n 出于某种原因它没有给我它并且它正在向 while 循环的主体发送垃圾邮件。请帮助。谢谢

```
char getCharChoice(string message, char y, char n)
{
char choice;

// Print the message and get the input
cout<<message<< " ";
cin>>choice;
// Check for valid input
while (choice != y || choice != n)
{

    cin.clear(); // reset the input stream
    cin.ignore(5000, '\n'); // take any remaining input off the stream

    // Ask for a choice and read user input
cout << "Not a valid input please: Choose y or n:  ";
    cin >> choice;
}

return choice;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:21:59.167

你想要“虽然（选择！= y && 选择！= x）”，|| 使它成为一个合乎逻辑的重言式。

# php - PHP在会话中保存多维数组

> ID：16203222
> 
> 赞同：1
> 
> 时间：2013-04-24T22:20:31.563
> 
> 标签：php, session

```
<?php
session_start();

$_SESSION[] = array('itemName'=> "'".$_POST["name"]."'",
                    'itemPrice'=> "'".$_POST["price"]."'"
                    );
print_r($_SESSION);
?> 
```

我通过 jQuery 发布数据，虽然`print_r`显示正确的数据，但上面的 PHP 没有保存在会话中，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:27:00.640

您必须使用`$_SESSION['name']`存储到会话，而不仅仅是`$_SESSION[]`

```
<?php
session_start();

$_SESSION['name'] = array('itemName'=> "'".$_POST["name"]."'",
                    'itemPrice'=> "'".$_POST["price"]."'"
                    );
print_r($_SESSION);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T22:27:04.067

您必须为会话变量提供某种索引/键（名称），以便 PHP 知道如何引用它。

以下是**$_SESSION['test']**的分配方式：

```
$_SESSION['test'] = array('itemName'=> "'".$_POST["name"]."'",
                        'itemPrice'=> "'".$_POST["price"]."'"
                        ); 
```

# multithreading - 在当前线程中找不到 OpenGL 上下文

> ID：16203224
> 
> 赞同：9
> 
> 时间：2013-04-24T22:20:37.200
> 
> 标签：multithreading, opengl-es, opengl-es-2.0, libgdx

我正在使用 LibGDX 制作游戏。我想根据需要同时加载/卸载资产。但是，等待资产在主线程中加载会导致延迟。为了解决这个问题，我创建了一个**后台线程**来监控需要加载哪些资产（纹理、声音等）并适当地加载/卸载它们。

`AssetManager.update()`不幸的是，从该线程调用时出现以下错误。

```
com.badlogic.gdx.utils.GdxRuntimeException: java.lang.RuntimeException: No OpenGL context found in the current thread. 
```

我一`run`开始就尝试在主线程中设置后台线程，只处理前几个屏幕，一切正常。我还可以将算法更改为在同一个线程中从一开始就将所有内容加载到内存中，这也可以。但是，两者都不能在后台线程中工作。

当我在 Android 上使用 OpenGL ES 2.0（以奇怪的方式灵活）而不是在 Windows 上运行它时，一切运行良好，我什至可以获得图像的像素尺寸 -**但纹理呈现黑色**。

我的搜索告诉我，这是**OpenGL 上下文**绑定到单个线程的问题，但仅此而已。这就解释了为什么当我把它推到主线程时一切正常，而不是当我把它放在另一个线程中时。如何解决此上下文问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T23:02:52.720

**首先，您不应该在渲染线程之外访问 OpenGL 上下文。**

我假设您已经看过这些，但只是为了确保阅读[AssetManager wiki 文章](https://code.google.com/p/libgdx/wiki/AssetManager)，该文章谈到了如何使用 AssetManager 进行资产的异步管理。除了 wiki 文章，查看[AssetManagerTest](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/AssetManagerTest.java)以更好地了解如何使用它。资产管理器测试可能是您了解如何动态加载资产的最佳选择。

如果您要加载大量内容，您可能需要考虑创建一个加载栏来预先加载任何大型内容。从另一个线程检查资产等可能会起作用（并设置一个标志来调用更新），但最终您需要在渲染线程上调用[update() 。](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/assets/AssetManager.html#update%28%29)

请记住，您必须从不同的线程调用 update() 它，我不明白为什么您希望另一个线程检查条件并设置标志。使用另一个线程和同步 update() 调用可能比仅在渲染线程上完成所有开销更多。此外，update() 方法在增量加载文件时每次只暂停几毫秒。通常，您只需为您的资产调用[load()](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/assets/AssetManager.html#load%28java.lang.String,%20java.lang.Class%29)，然后在您的资产上检查[isLoaded()](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/assets/AssetManager.html#isLoaded%28java.lang.String,%20java.lang.Class%29)。如果未加载，您将每帧调用一次 update()，直到 isLoaded() 返回 true。一旦它返回 true，您就可以调用[get()](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/assets/AssetManager.html#get%28java.lang.String,%20java.lang.Class%29)并获取您正在加载的任何资产。这一切都可以通过主渲染线程完成，而不会在加载时出现应用程序延迟。

如果您真的希望您的其他线程调用 update()，则需要创建一个[Runnable](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)对象并调用[postRunnable()](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/Application.html#postRunnable%28java.lang.Runnable%29)，例如他们在关于 libGDX 多线程的[wiki 文章中如何描述它。](https://code.google.com/p/libgdx/wiki/ApplicationThreading)但是，这违背了使用其他线程的全部意义，因为您使用 postRunnable 的任何内容都会在渲染线程上同步运行。

# javascript - 如何根据加载模板的视图在 Ember TextField 中动态分配 valueBinding

> ID：16203225
> 
> 赞同：1
> 
> 时间：2013-04-24T22:20:40.117
> 
> 标签：javascript, ember.js, models, ember-data

我有几个视图，它们都共享相同的模板。在正在加载的视图的模板属性中，它被用作各种元素的 id、name 等。

在这些元素中有一个输入字段，我试图将值绑定到 ember-data 模型。但是，我需要将每个输入字段的值绑定到模型中的不同属性。我不确定如何使用相同模板的许多视图的这种方法来做到这一点。

这是一个 jsFiddle ( [http://jsfiddle.net/VkKX2/148/](http://jsfiddle.net/VkKX2/148/) )，它显示了一个简单的例子。

这是视图共享的模板：

```
<script type="text/x-handlebars" data-template-name="views">
   {{#each value in controller}}
      {{view Ember.TextField valueBinding="value.name"}}
   {{/each}}
</script> 
```

我希望当每个视图加载这个模板时， valueBinding 属性应该以某种方式分配给模型中的特定值。不确定如何执行此操作或是否可能。

# python - 在 python 中使用自定义命令创建数据库

> ID：16203229
> 
> 赞同：3
> 
> 时间：2013-04-24T22:20:52.263
> 
> 标签：python, database, class

我正在尝试使用 Python 创建一个简单的本地数据库，我可以在其中设置值、获取值等，但我不断收到此错误：

```
#Simple Database
#Functions include      Set[name][value]
#                       Get[name]
#                       Unset[name]
#                       Numequalto[value]
#                       End
#                       Begin, Rollback, Commit

varlist = []
ops = []
class item:
        def __init__(self,name,value):
                self.name = name
                self.value = value
class db:
    def __init__(self):
            self.varlist = []
            self.ops = []
    def Set(self,nm,val):
            changed = False                 #Bool for keeping track of update
            for item in varlist:    #run through current list
                    if item.name == nm:     #If the name is found
                            item.value = val #update the value
                            changed = True  #found it
                            break                   #exit if found
            if not changed:
                    newitem = item() #Create a new one and append it
                    newitem.name = nm
                    newitem.value = val
                    varlist.append(newitem)
    def Get(key):
            for item in varlist:
                    if item.name == key:
                            return item.value
                            break

    def Unset(key):
            for item in varlist:
                    if item.name == key:
                            item.value = -1
                            break

    def Numequalto(key):
            count = 0
            for item in varlist:
                    if item.value == key:
                            count+=1
            return count

def main():
    newdb = db()
    varlist=[]
    comm = "" #prime it
    while comm.lower() != "end":
        comm = input("Command: ")
        if comm.lower() == "begin":
            print("----SESSION START---")
            while comm.lower() != "end":
                    comm = input("Command: ")
                    part = []
                    for word in comm.split():
                            part.append(word.lower())
                    print(part)
                    if part[0].lower()=="set":
                            newdb.Set(part[1],part[2])
                            print(varlist)
                    elif part[0].lower()=="get":
                            gotten = Get(part[1])
                            print(gotten)
                    elif part[0].lower()=="unset":
                            Unset(part[1])
                    elif part[0].lower()=="numequalto":
                            numequal = Numequalto(part[1])
                            print(numequal)
            print("Finished")
        else:
            print("--ERROR: Must BEGIN--")

if __name__ == "__main__":
    main() 
```

当我运行它时，并尝试使用命令在我的列表中创建一个新项目

```
set a 25 
```

我收到此错误：

```
Traceback (most recent call last):
File "/Volumes/CON/LIFE/SimpleDatabase.py", line 81, in <module>
    main()
File "/Volumes/CON/LIFE/SimpleDatabase.py", line 65, in main
    newdb.Set(part[1],part[2])
File "/Volumes/CON/LIFE/SimpleDatabase.py", line 27, in Set
    newitem = item() #Create a new one and append it
UnboundLocalError: local variable 'item' referenced before assignment 
```

任何帮助将非常感激。我对 Python 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:11:43.513

不试图暗示，只是建设性的。我担心虽然有评论质疑实施您自己的字典的意图，但没有答案有力地说明了这一点。我这么说只是因为 Python 的一部分（除了语义、语言等）是文化。我们说事物是“Pythonic”是有原因的——这种语言的部分价值在于文化。这里有两个方面需要注意——第一，“包含电池”，第二，“不要重新发明轮子”。您正在重新实现 Python 中最基本的复合数据类型（我知道，矛盾修饰法）。

```
>>> a = {}
>>> a['bob'] = 1
>>> a['frank'] = 2
>>> a
{'frank': 2, 'bob': 1}
>>> del a['frank']
>>> a
{'bob': 1}
>>> del a['bob']
>>> a
{}
>>> a['george'] = 2
>>> b = len([x for x in a.values() if x == 2])
>>> b
1 
```

有了它——处理你所追求的功能的pythonic方式。

如果您尝试添加除此之外的功能或限制，最好从 dict 类开始并扩展而不是自己滚动。由于 Python 是“鸭式”的，因此使用现有结构作为基础有很大的好处，因为它们都属于相同的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:29:28.317

您的代码有一些问题：

1.  `item`您正在使用同名的局部变量来隐藏该类。
2.  您正在使用`varlist`而不是`self.varlist`.
3.  您的某些类方法没有收到`self`第一个参数。
4.  在 python 中也有一个强大的约定，即用第一个大写字母命名类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:28:36.293

线

```
for item in varlist: 
```

`item`用局部变量隐藏类。因此，当您使用它时，`item()`它会认为您正在尝试调用局部变量而不是类。你可以说你的类`item`永远不会被构造，因为它会失败，因为你没有向`__init__`

你也应该给你的班级打电话`Item`。一旦我这样做了，我就得到了预期的构造函数错误。

# android - Square 区域的 Android GPS

> ID：16203234
> 
> 赞同：1
> 
> 时间：2013-04-24T22:21:10.293
> 
> 标签：android, geolocation, gps

我想使用 Androids Gps 作为我的应用程序的接入点。意思是如果用户不在广场上。如何让 Android 接受（例如：经度和纬度）50.000 - 65.010（以 50.00、50.00 作为我的中心点或塔）。现在因为我想覆盖 4 块半径，所以我如何让 android 只接受两个 gps 值的 C 到 G 之间的值。我想我想阻止用户在城市、州、邻里......广场区域之外使用应用程序。到目前为止，我成功地使用 Gps 作为登录名，但我被困在硬编码位置：

`if(username.getText().toString().length() > 0 && password.getText().toString().length() > 0 ) { //------------------------------------Username below -------------------------------------Password below ---// if(username.getText().toString().contains("XX.408") && password.getText().toString().contains("-XX.") ) {`

任何关于我如何覆盖 Square 的输入都将非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:33:51.707

使用rectange.inside(Point)。
将矩形的原点设置为 SW 角（x=经度，y =纬度）
将宽度设置为经度差。
将高度设置为纬度差。

# javascript - 如何清理 chrome.storage.local？

> ID：16203235
> 
> 赞同：0
> 
> 时间：2013-04-24T22:21:12.460
> 
> 标签：javascript, google-chrome-extension

我想根据我在存储它们时使用的键删除 chrome.storage.local 中存储的所有数据，但在控制台上运行它不起作用：

```
var storage= chrome.storage.local;
storage.remove('filters'); 
```

# jquery - 缓解不适用于 toggleClass() 或 addClass()

> ID：16203237
> 
> 赞同：1
> 
> 时间：2013-04-24T22:21:19.107
> 
> 标签：jquery, easing

我有一个在页面上显示和隐藏实用工具栏的功能。我想为它制作动画。它不是动画。“标志”类为空。"min" 类只是更改背景图像以及实用工具栏的高度和绝对位置。

我究竟做错了什么？

```
$(document).ready(function() {
    var ubar = $("#ccUtilityBarWrapper,#ccUtilityBarWrapperInner,#clickBar");
    ubar.delay(10000).queue(function(nxt) {
        if ($(this).hasClass("flag")) {
        }
        else {
            $(this).addClass("min",1500,"easeInOutQuad");
            nxt();
        }
    });
    $("#clickBar").click(function(e){
        ubar.addClass("flag");
        ubar.toggleClass("min",1500,"easeInOutQuad");
    });
});

#ccUtilityBarWrapper {
    position:       fixed;
    z-index:        3;
    bottom:         0;
    left:           0;
    width:          100%;
    height:         48px;
    background:     #1775b5;
    -webkit-box-shadow:0px 0px 3px rgba(0, 0, 0, 0.75);
    -moz-box-shadow:0px 0px 3px rgba(0, 0, 0, 0.75);
    box-shadow:0px 0px 3px rgba(0, 0, 0, 0.75);
}
#ccUtilityBarWrapper.min {
    bottom:         -48px;
}
/* used to place utility nav in absolute position */
#ccUtilityBarWrapperInner {
    background:     none;
    position:       fixed;
    z-index:        4;
    bottom:         0;
    width:          100%;
    height:         81px;
}
#ccUtilityBarWrapperInner.min {
    background:     none;
    height:         40px;
}
#clickBar {
    background:     url("http://teamsite-prod.rccl.com:8030/animated_bar/minimize.png") no-repeat scroll center top transparent;
    height:         34px;
}
#clickBar.min {
    background:     url("http://teamsite-prod.rccl.com:8030/animated_bar/expand.png") no-repeat scroll center top transparent;
    height:         40px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:44:43.510

看起来您正在混合 css3 过渡和 jQuery 动画。

您不能为类名设置动画，这将不起作用：

```
$(this).addClass("min",1500,"easeInOutQuad"); 
```

相反，在您的 css3 中，添加一个转换：

```
#ccUtilityBarWrapperInner.min {
    background:     none;
    height:         40px;
    -webkit-transition: height 1.5s ease-in-out;
    -moz-transition: height 1.5s ease-in-out;
    -o-transition: height 1.5s ease-in-out;
    transition: height 1.5s ease-in-out;
} 
```

要包含自定义缓动功能，请查看[此站点](http://matthewlein.com/ceaser/)。

或者，如果您需要支持旧版浏览器，请使用 jQuery 的[animate()](http://api.jquery.com/animate/)函数

```
$(this).animate({ height: '40px'}, 1500, "easeInOutQuad"); 
```

* * *

编辑：实际上，jQuery UI 将为类名设置动画，但您需要使用[`switchClass()`函数](http://jqueryui.com/switchClass/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T05:17:04.033

***如果***条形图已经从延迟函数中生成动画，则以下工作。但是，如果我先单击，它不会动画，只需切换类即可。

```
var ubar = $("#ccUtilityBarWrapper,#ccUtilityBarWrapperInner,#clickBar");
ubar.delay(10000).queue(function(nxt) {
    if ($(this).hasClass("flag")) {
    }
    else {
        ubar.animate({bottom: '-48px'}, 300);
        ubar.addClass("min");
        nxt();
    }
});
ubar.click(function(){
    ubar.addClass("flag");
});
$("#clickBar").click(function(){
    if (ubar.hasClass("min")) {
        ubar.animate({bottom: '0'}, 300);
        ubar.removeClass("min");
    }
    else {
        ubar.animate({bottom: '-48px'}, 300);
        ubar.addClass("min");
    }
}); 
```

# php - 检查 DATETIME 是否为 14 天前

> ID：16203238
> 
> 赞同：2
> 
> 时间：2013-04-24T22:21:20.087
> 
> 标签：php, mysql, sql, datetime, phpmyadmin

我想要做的是查询数据库中的一个表，以便我可以在他们激活帐户后 14 天发送一封欢迎电子邮件......

成功发送电子邮件后，我将设置标志 = 0，以便将来不再发送电子邮件。

我不知道如何将`activation_date`DATETIME 与 14 天的时间段进行比较...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:25:16.540

你可以使用 datediff：

如果激活的 datediff = 14，请选择以下行：

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

```
WHERE 14 = DATEDIFF(activation_date, $today) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:48:05.840

```
SELECT * FROM my_table WHERE DATEDIFF( NOW() , activation_date ) = 14 AND active = 1 AND msg_welcome = 0 
```

这是我需要的查询！非常感谢你们......只需要稍微修改你的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:28:56.250

您可以在 where 子句中使用 date_sub 函数

```
where activation_date > date_sub(now() ,interval 14 day) and flag <> 0 
```

示例代码[在这里](http://sqlfiddle.com/#!2/40e92/2/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T22:26:20.113

您可以在查询中将您的 activation_date 与 DATE_SUB(NOW(), INTERVAL 14 day) 进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T22:28:06.920

使用 datediff() 函数，这里有一个例子来看看它是如何工作的：[http ://sqlfiddle.com/#!2/a2581/7851](http://sqlfiddle.com/#!2/a2581/7851)

```
Select '2013-04-10', 

case 
when datediff( now() , '2013-04-10' ) = 14 
then 'Send eMail' 
else 'Don''t send eMail' 
end 

as SendeMail

UNION ALL 

Select '2013-04-11', 

case 
when datediff( now() , '2013-04-11' ) = 14 
then 'Send eMail' 
else 'Don''t send eMail' 
end 

as SendeMail

UNION ALL

Select '2013-04-15' , 

case 
when datediff( now() , '2013-04-15' ) = 14 
then 'Send eMail' 
else 'Don''t send eMail' 
end 

as SendeMail 
```

当然，您可以在 WHERE 语句中使用它...

```
WHERE datediff( now() , '2013-04-11' ) = 14 
```

使用`now()`函数获取当前日期。我的示例日期 (2013-04-11) 应替换为您的`activation_date`列。

# html - 我想在 CSS 中应用鼠标移出延迟

> ID：16203240
> 
> 赞同：13
> 
> 时间：2013-04-24T22:21:43.330
> 
> 标签：html, css, css-transitions

我正在尝试在鼠标移出事件开始 CSS 转换之前应用延迟。我的 CSS 代码如下，请让我知道如何在鼠标移出的 CSS 过渡开始之前应用时间延迟。

我想在用户将鼠标指针移出菜单后使菜单保持稳定一段时间（例如 3 秒）。

```
.timnav li .dropdown {
    width: auto;
    min-width: 0px;
    max-width: 230px;
    height: 0;
    position: absolute;
    overflow: hidden;
    z-index: 999;
    background:rgba(255, 255, 255, 0.8);
    }

.timnav li:hover .dropdown {
    min-height: 60px;
    max-height: 500px;
    height: auto;
    width: 100%;
    padding: 0;
            -webkit-transition: delay .5s ease-in-out;
        -moz-transition: delay .5s ease-in-out;
        -o-transition: delay .5s ease-in-out;
}

.timnav li .dropdown ul {
    margin: 0;
    margin-top:7px;

}

.timnav li .dropdown ul > li {
    display: block;
    width: 100%;
    float: left;
    text-align: left;
    height: auto;
    border-radius: none;
    padding-bottom:2px;
}

    .timnav li .dropdown  .dropdown2{
    display: none;
    width: 100%;
    float: left;
    text-align: left;
    height: auto;
    border-radius: none; 
}

    .timnav li .dropdown ul > li:hover .dropdown2{
    display: block;
    width: 100%;
    float: left;
    text-align: left;
    height: auto;
    border-radius: none;

}

    .timnav li .dropdown .dropdown2:hover {
    display: block;
    width: 100%;
    float: left;
    text-align: left;
    height: auto;
    border-radius: none;

}

    .timnav li .dropdown .dropdown2 li a {
    display: block;
    padding-left:7px !important;
    height:6 !important;
    padding-top:8px;
    background: url(../images/nav-bg.jpg) repeat; color:#fff;

}

.timnav li .dropdown ul > li a {
    display: block;
    line-height: 26px;
    height: 22px;
    padding: 10px;
    background: url(../images/nav-crrent.jpg) repeat; color:#FFFFFF;

}

.timnav ul .dropdown ul li:first-child a {
    border-radius: 0;
}

.timnav li .dropdown li a:hover {
    background: url(../images/nav-bg.jpg) repeat; color:#000;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T22:26:40.327

你可以给一个transition添加一个延迟，语法如下：

```
transition: all 0.5s ease-in-out 3s; 
```

所以

```
transition: <property> <duration> <timing-function> <delay>; 
```

所有前缀版本的语法也相同。

我为此创建了一个演示，因为您需要做一些棘手的事情才能使该项目没有延迟地出现，但在它消失之前有延迟。

[http://jsfiddle.net/pgqM2/](http://jsfiddle.net/pgqM2/)

诀窍是重新定义过渡以在没有悬停时添加 3s 延迟，但在有悬停时具有 0s 延迟：

```
li ul {
    opacity: 0;
    transition: all 0.5s ease 3s;
}

li:hover ul {
    opacity: 1;
    transition: all 0.5s ease 0s;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T22:24:45.043

CSS中有一个`transition-delay`属性。只需将其添加到您的代码中，您将获得所需的效果。

```
transition-delay:3s; 
```

出于简写过渡属性的目的，这里有一张总结的图

![过渡：<属性> ||  <持续时间> ||  <定时功能> ||  <延迟> [, ...];](https://i.stack.imgur.com/LneAx.jpg)

所以在你的情况下，它看起来像这样

```
div:hover {
  -webkit-transition: .5s ease-in-out 3s;
  -moz-transition: .5s ease-in-out 3s;
  -o-transition: .5s ease-in-out 3s;
  transition: .5s ease-in-out 3s;
  color: red;
  cursor: pointer;
}
```

```
<div>Hover me. There is a delay!</div>
```

这是一个[演示](http://jsfiddle.net/43nGr/1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-23T14:31:23.957

使用 display none 时不能使用 css 过渡，只有 display none 的解决方案是 js。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T22:26:40.980

您可以使用 css3 属性[transition-delay](http://www.w3schools.com/cssref/css3_pr_transition-delay.asp)来延迟执行 css。单击“自己尝试”以查看示例。

# r - 运行测试中的错误：“需要 TRUE/FALSE 的地方缺少值”

> ID：16203246
> 
> 赞同：2
> 
> 时间：2013-04-24T22:21:15.383
> 
> 标签：r

我对 R 相当陌生，我正在尝试模拟一些数据，将其拟合到模型中，并对残差进行运行测试。但是，在执行运行测试时，我得到了一个奇怪的类型错误。这是我的代码：

```
library(TSA)
d = arima.sim(list(ma=c(0.5)), n=5000)
model = arima(d, order=c(0, 0, 1), include.mean=FALSE)
runs(model$residuals) 
```

错误是：

```
Error in if (pvalue > 0.5) pvalue <- 1 - pvalue : 
  missing value where TRUE/FALSE needed 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:03:28.827

我对这个包不熟悉，但我可以说你的数据是一个特殊情况，或者这个包（至少运行函数）需要重新审查。

```
pdf <- pdf/sum(pdf)                  # pdf contains Inf, so becomes NaN
mu <- 1 + 2 * n1 * n2/(n1 + n2)
if (r1 <= mu)                        # This is verified
    pvalue <- sum(pdf[(1:l2) <= r1]) # pvalue is not calculated, pdf is all NaN
if (r1 > mu)                         # there should be some R versions without else...
    pvalue <- sum(pdf[(1:l2) >= r1])
if (pvalue > 0.5)                    # This gives you the error! pvalue is all NaN
    pvalue <- 1 - pvalue 
```

pdf 上面的几行获取 Inf 值：

```
 for (i in seq(4, l2, 2)) {         # when i is 166 pdf gets its first Inf value
    r <- (i - 2)/2
    f[r + 1] <- (n1 - r) * (n2 - r)/r/r * f[r]
    pdf[i] <- f[r + 1]
  } 
```

我不能再进一步了，因为我既不知道这些数据应该是什么样子，也不知道你应该从这样的函数中得到什么结果。试着自己看看这个函数，我受够了:-) 上面代码中缺少的 else 并不是唯一奇怪的地方。希望有帮助

# c# - 在运行 RestSharp 时调试我的目标应用程序？

> ID：16203249
> 
> 赞同：0
> 
> 时间：2013-04-24T22:22:23.597
> 
> 标签：c#, debugging, asp.net-web-api, restsharp

我正在使用 RestSharp 运行一些针对同一解决方案中的应用程序的测试。当我使用 RestSharp 客户端访问 API 方法时，我希望能够逐步执行这些方法，但看起来我只能在我的测试类的上下文中进行调试，而不能在我的 api 方法中进行调试。

换句话说 - 我想用 RestSharp 客户端点击 GET /api/object/id 并逐步执行我的 objectController 的 GET 方法。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:15:14.693

我认为您可以分两个阶段进行：

1.  调试控制器响应（使用例如提琴手来构造请求）。这是为了确保系统的这一部分按预期工作。

2.  如果您对响应格式感到满意，那么通过测试调试您从 RestSharp 获得的内容 - 在这个阶段，您会假设基础响应是正确的，并且您得到的任何狡猾的响应都必须是 RestSharp 问题。在这种情况下，您将检查请求格式与您在 #1 中使用的原始格式进行比较，以确保它们相同，检查序列化等。

另一种方法是针对已部署的应用程序版本运行测试 - 然后您可以附加到进程并运行测试。我认为在这种情况下，您应该能够在控制器中打断点。

您有什么具体案例吗？

# java - 如何为 TableView 中的特定行设置背景颜色

> ID：16203250
> 
> 赞同：0
> 
> 时间：2013-04-24T22:22:37.783
> 
> 标签：java, android, listview, android-listview

我想在我的 TableView 中设置一行的颜色，但遇到了一些困难。我试过了

ListView.getChildAt(0).setBackgroudColor()

但它说我没有孩子。我确实有 5 个项目，但不知道怎么说，“将此项目的背景颜色设置为红色”我想在我的代码中的任何方法中以编程方式执行此操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:04:26.377

这可能比您想做的要多，但您可以制作自己的自定义适配器并在适配器中为该行设置背景。

这是一个很好的[教程](http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/)：

基本上在您的适配器中，您可以覆盖 getView

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      View view = super.getView(position, convertView, parent);
      if (position == 0) {
          view.setBackgroundColor(yourColor);
      }
      return view;
    } 
```

这样做的一个好处...您可以对该行进行进一步的自定义以使其脱颖而出。

# java - 使用java在访问表中搜索值

> ID：16203256
> 
> 赞同：1
> 
> 时间：2013-04-24T22:22:47.433
> 
> 标签：java, sql, jdbc

我的数据库上有一个表，我称之为发件人表，当我想打印字段的内容时，它给了我这个错误

```
java-sql-sqlexception [microsoft][odbc-driver-manager] invalid cursor state 
```

无论如何这是我的代码

```
 str = "SELECT * FROM Sender WHERE sender_PID= " + sender_PID + "";            
        try {
            rs = stmt.executeQuery (str);  
            System.out.println (rs.getInt ("sender_PID"));    

        } catch (Exception ex) {ex.printStackTrace ( );} 
```

我真的很抱歉我的英语不好

```
database ( )
{
    try {

        Class.forName ("sun.jdbc.odbc.JdbcOdbcDriver");
        conn = DriverManager.getConnection ("jdbc:odbc:DB");
        stmt = conn.createStatement (ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);

    } catch (Exception ex) {ex.printStackTrace();}
}

String checkSender (int sender_PID)
    {
        str = "SELECT sender_PID FROM Sender WHERE sender_PID= " + sender_PID + "";   

        try {           
            rs = stmt.executeQuery (str);                      
            while(rs.next())  
            {
                System.out.println (rs.getInt ("sender_PID"));
            }  

        } catch (Exception ex) {ex.printStackTrace ( );}     

        return "1";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:24:12.557

您需要先将光标移动到第一条记录`rs.next()`

注意：您应该`PreparedStatement`用于此目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:27:18.097

您的 rs 可能是一个迭代器（一个数据集），因此您可能需要测试以下代码：

```
while(rs.next())  {
    System.out.println (rs.getInt ("sender_PID"));    
} 
```

# batch-file - 批处理文件以保留所需文件并删除其余文件

> ID：16203260
> 
> 赞同：1
> 
> 时间：2013-04-24T22:23:18.700
> 
> 标签：batch-file

我的要求是保留 type 的文件`*.c`，`*.cpp`并删除文件夹中的所有其他文件。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:13:40.750

```
@echo off
setlocal EnableDelayedExpansion
set preserve=.c.cpp.
for %%a in (*.*) do (
   if "!preserve:%%~Xa=!" equ "%preserve%" (
      del "%%a"
   )
) 
```

此批处理文件不使用管道或外部命令（如 find.exe 或 findstr.exe），因此运行速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:34:29.163

尝试这个。

```
@echo off
for /f %%F in ('dir /b /a-d ^| findstr /vile ".c .cpp"') do del "%%F" 
```

# c++ - 模板函数特化的单独声明和定义：成员函数和非成员函数的不同行为

> ID：16203261
> 
> 赞同：3
> 
> 时间：2013-04-24T22:23:22.930
> 
> 标签：c++, templates, visual-c++, template-specialization, function-templates

我想声明函数模板的特化，但稍后在源文件中定义它。考虑下一个例子：

`.hpp`

```
// approach #1
template <typename T> const char *GetTypeName();
template <> const char *GetTypeName<int>();

// approach #2
template <typename T> class TypeName {static const char *Get();};
template <> const char *TypeName<int>::Get(); 
```

`.cpp`

```
// approach #1
template <> const char *GetTypeName<int>()
{
    return "int"
}

// approach #2
template <> const char *TypeName<int>::Get()
{
    return "int"
} 
```

在 MSVC 2012（**未**安装 CTP）中，两种变体都可以正常编译，但非成员变体（**#1**）会引发链接器错误（未解决的外部问题，等等）。这是正常行为吗？MSVC 特定的？编译器错误？固定在 CTP 中？

**编辑**
我只使用专门的版本。它们在标头中声明并在源中定义。此方法适用于成员，但不适用于独立功能。

**编辑 2**
嗯...我正在尝试在家中构建相同的快照（相同的 MSVC 安装，没有 CTP），并且链接没有问题。似乎是本地错误或损坏的安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:35:38.153

函数模板不是函数。一个完全专业化的函数模板*是*一个函数。

由于必须定义所有（odr 使用的）函数，因此您必须有一种方法来为任意模板实例化生成定义。因此主函数模板的定义必须在头文件中。

**标头.h：**

```
template <typename T>            //  this
const char * GetTypeName()       //  is
{                                //  not
    return "foo";                //  a
}                                //  function

template <>
const char * GetTypeName<int>(); 
```

**实现.cpp：**

```
#include "header.h"

template <>
const char * GetTypeName<int>()
{
    return "int";
} 
```

# video - ffmpeg 循环未找到错误

> ID：16203264
> 
> 赞同：1
> 
> 时间：2013-04-24T22:23:33.023
> 
> 标签：video, encoding, ffmpeg

我正在尝试在 audio.mp3 的整个持续时间内使用 image.gif 作为静止图像，并从中制作视频。这是我正在使用的当前命令

`ffmpeg -i audio.mp3 -loop 1 -i image.gif -acodec copy video.avi`

这可行，但持续了很长时间，不断增加音频文件，这让我相信它正在循环播放 mp3 文件或其他东西。

我尝试改变音频/图像，但它不起作用并说：

`Option loop not found.`

我也试过`-shortest`了，我认为它的长度与音频相匹配，但它使文件的大小是 MP3 大小的两倍 + 图像文件的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:47:12.777

nvm，这只是使文件变大的视频。使用 1 FPS 排序

`ffmpeg -loop 1 -i image.gif -i audio.mp3 -acodec copy -shortest -r 1 video.avi`

我相信循环只是顺序错误，这是对输出的解释

-loop（循环图像）

-i（输入图像，然后是音频文件）

-acodec 复制（复制 mp3 文件，不要重新编码）

-最短（使视频尽可能短）

-r 1（强制 1 FPS）

video.avi（输出文件）

# c# - 用内部连接重新填充具有 dataSet 的 dataGridView

> ID：16203266
> 
> 赞同：0
> 
> 时间：2013-04-24T22:23:40.723
> 
> 标签：c#, linq-to-sql, binding, datagridview

我有dataGridView，它有dataSet、绑定源和tableAdapter。在由 tableAdapter 绑定到 dataGridView 的数据集中，我使用了内部连接。

表 Cars：Car_ID、Client_ID、Model、LastOilChange、property....

表模型：ID_Model、NameOfModel、ID_Producent

表生产者：ID_Producent、NameOfProducent

DataGridView 标头：NameOfProducent、NameOfModel、LastOilChange、属性...

...所以内部连接用于将 Cars.Model 与 Model.ID_Model 连接，并将 Model.ID_producent 与 Producents.ID_Producent 连接起来。

当表在初始化表单上加载时 - 一切都很好，每个值都在它们应该在的列中。

我不知道如何使用过滤器？我只想为某些 Client_ID 选择 Cars，当我这样做时 - Model 和 Producent 为空：/

我这样做：

```
List<Car> ClientsCar = (from u in DB.Cars
                        where u.Client_ID == sometextbox.text
                        select u).ToList();
DataGridView.BindingSource = ClientsCar; 
```

请给我指路:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T23:28:15.537

答案很简单（一如既往）。

我创建了一个作为参数 a 的过程`ClientID`，并为此客户端返回 select （带有内部连接和其他东西）。之后，我从该过程创建了一个`DataSource`for ，并使用该方法填充它。`DataGridView``TableAdapter``GetData`

```
dataGridViewSamochodyPowiazaneKlienta.DataSource = this.wyszukajSamochodyKlientaTableAdapter.GetData(ID_klienta.ToString()).ToArray();
dataGridViewSamochodyPowiazaneKlienta.Refresh(); 
```

这解决了我的问题。

# sql - 使用Oracle sql创建一个可以返回列表项的函数

> ID：16203274
> 
> 赞同：0
> 
> 时间：2013-04-24T22:24:53.340
> 
> 标签：sql, oracle, function

我希望在 Oracle 中创建一个函数，我可以在其中将值作为字符串传递并返回一个列表。例如，我想要一个函数，我给它一个书名，它返回一个拥有该书的用户列表。

我创建了下面的函数，其中包含我不确定如何修复以及它是否是正确的方法的警告。

```
CREATE OR REPLACE Function UsersForBooks
    ( name_in IN varchar(250) )
    RETURN varchar(250)
IS
    listToReturn varchar(250);
    cursor c1 is
            SELECT username
              FROM (GC_User NATURAL JOIN GC_Books) 
      NATURAL JOIN GC_BookOwnership
             WHERE GC_Books.title = name_in
    ;
BEGIN
   open c1;
   fetch c1 into listToReturn;
   close c1;
   RETURN listToReturn;
END;
/ 
```

我以以下方式调用我的函数，但不确定它是否正确。

```
SELECT * FROM UsersForBooks('The Da Vinci Code'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:54:42.887

你想做这样的事情：

```
CREATE OR REPLACE FUNCTION UsersForBooks (name_in IN varchar2)
  RETURN SYS_REFCURSOR
IS

  c SYS_REFCURSOR;

BEGIN

  OPEN c FOR
  SELECT...;

  RETURN  c;

END;
/ 
```

在 Oracle 中，始终使用 VARCHAR2 而不是 VARCHAR。

您无需在参数列表中指定变量的大小，仅在实际变量声明中指定。

# excel - 打开文件时未启用 Excel ActiveX 列表框

> ID：16203277
> 
> 赞同：12
> 
> 时间：2013-04-24T22:25:08.200
> 
> 标签：excel, activex, excel-2010, activexobject, vba

我试图找出一个奇怪的情况。

我有一个包含许多工作表的工作簿。在一张纸上，我有一个 ActiveX 列表框 (CTOverview.Listbox1)。在第二张纸上，我共有三个列表框（CTSelected.Listbox1 到 Listbox3）。我正在使用查询在两个工作表上使用相同的数据填充 Listbox1。代码如下：

```
strSQL = "Select Distinct [Region] From [UniqueCTList$] Order by [Region]"
closeRS
OpenDB

' initialize listboxes
CTSelect.ListBox1.Clear
CTSelect.ListBox2.Clear
CTSelect.ListBox3.Clear
CTOverview.ListBox1.Clear

' initialize with entire division value
CTSelect.ListBox1.AddItem "Entire Division"
CTOverview.ListBox1.AddItem "Entire Division"

' initialize selected Tech
CTData.Range("CT_Selected") = ""

' populate listboxes using recordset
rs.Open strSQL, cnn, adOpenKeyset, adLockOptimistic

If rs.RecordCount > 0 Then
    Do While Not rs.EOF
        CTOverview.ListBox1.AddItem rs.Fields(0)
        CTSelect.ListBox1.AddItem rs.Fields(0)
        rs.MoveNext
    Loop
Else
    MsgBox "I was not able to find any unique Regions.", vbCritical + vbOKOnly
    Exit Sub
End If 
```

这段代码运行良好（不是我的代码——我是从 intertubes 得到的）。两张纸上的两个 LIstbox1 都加载了不同区域的列表。但是，在从 CTSelected.Listbox1 中选择某些内容之前，我无法让 CTOverview.Listbox1 响应任何输入。一旦我这样做了，两个 Listbox1 都可以正常工作并且不会以其他方式连接，至少据我所知。

在填充了两个 Listbox1（无效）后，我尝试关闭记录集。我尝试在 CTOverview.Listbox1 中选择一个默认项目（无效）。

以防万一，这是我打开/关闭记录集的代码：

```
Public Sub OpenDB()
    If cnn.State = adStateOpen Then cnn.Close

    cnn.ConnectionString = "Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)}; _
        DBQ=" & ActiveWorkbook.Path & Application.PathSeparator & ActiveWorkbook.Name

    cnn.Open
End Sub

Public Sub closeRS()
    If rs.State = adStateOpen Then rs.Close
    rs.CursorLocation = adUseClient
End Sub 
```

据我所知，我必须将注意力从 CTOverview 表上移开。如果我单击任何其他工作表，然后单击返回 CTOverview，Listbox1 似乎可以工作。这是一个问题，因为 CTOverview 应该是我的启动表。

知道为什么会发生这种情况吗？我正在拔头发试图弄清楚这一点。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-03T23:04:31.157

[Siddharth Rout 在评论中提供了答案](https://stackoverflow.com/questions/16203277/excel-activex-listbox-not-enabled-on-file-open#comment23169851_16203277)。填充列表框后，在最后（就在 end sub 之前）激活 sheet2 并在下一行激活启动表。用于`Application.Screenupdating =false`确保没有屏幕闪烁。

# java - AlarmManager 被立即触发，因为时间发生在过去

> ID：16203278
> 
> 赞同：1
> 
> 时间：2013-04-24T22:25:10.617
> 
> 标签：java, android

启动我的应用程序时，会立即触发 AlarmManager，因为时间已经过去了。

我的想法是检查时间表一的实际时间：

```
if(calendar.before(Calendar.getInstance())); //where calendar is my scheduled calendar 
```

如果上述条件为真，那么：

```
calendar.add(Calendar.DAY_OF_YEAR, 1); 
```

我认为这会奏效。

然而，混乱发生在第 365 天：

如果预定时间早于实际时间，则按此行加1天：`calendar.add(Calendar.DAY_OF_YEAR, 1);` 变为**1**

这不是让它永远成为过去吗？因为没有366？因此，AlarmManager 总是会在过去考虑到它立即触发它？

编辑：

您是否建议我改为：

```
calendar.add(Calendar.HOUR_OF_DAY, 24); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:20:42.430

CommonsWare 的评论是正确的；add() 将添加该时间量并适当地调整所有字段。

如果您使用 roll() 而不是 add()，则会发生您担心的行为。但是使用 add() 应该是安全的。

如果您想进一步挖掘，这里是[文档。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#add%28int,%20int%29)

# c# - c# 使用不在表单中的代码来减少重复代码？

> ID：16203286
> 
> 赞同：2
> 
> 时间：2013-04-24T22:25:33.843
> 
> 标签：c#, visual-studio-2010, class, dll

刚刚完成我的一个项目，即将开始另一个项目。这在我的大学里从来没有教过，所以我什至不知道它是否存在。比方说，例如你有代码......

```
MessageBox.Show("Hi"); 
```

现在我知道我可以在 Form1 中调用它。我也知道我可以用另一种形式调用它，前提是它在公共类/无效或什么的？

我的问题是，是否有一个图书馆系统，我可以在其中添加 30-40 个代码片段来完成自己的工作。因此，当我想更新 sql 或运行计算时，我只需从库中调用代码文件？

对不起，如果我错过了一些明显的谷歌让我发疯的东西，我知道我想问什么，只是不知道如何问它！希望你能理解我的问题.. 谢谢，问候..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T22:44:16.370

当然。在 Visual Studio 中的解决方案中，您可以添加一个类库项目并用您想要的所有可重用代码填充它。然后解决方案中的任何项目都可以通过向该项目添加项目引用来引用它。

请注意，在这样的事情上很容易过火。举个例子，你的例子：

```
MessageBox.Show("Hi"); 
```

该类`MessageBox`与用户界面紧密耦合。所以它*属于*用户界面对象。（本例中的表单。）这是因为如果您尝试在类库中使用它，那么您需要将用户界面库添加到该类库，使其与特定用户界面实现更紧密地耦合。这使得类库的可移植性和可重用性大大降低，因为它*只能*由具有相同用户界面技术的项目使用。（例如，不能被 Web 项目使用。）

因此，您需要考虑将每个通用实用程序封装到其自己的可重用代码中。它是否属于 UI、业务对象、数据访问等？如果它与特定的外围技术（用户界面技术、数据访问技术等）紧密耦合，那么它可能属于那里。

一种方法是拥有多个“通用实用程序”库。使用人为的命名方案，一个更大的企业域解决方案可能有这样的项目：

*   Domain.BusinessLogic（类库，一切都引用）
*   Application.Forms.AdminPanel（表单应用程序）
*   Application.Forms.OperationsPanel（表单应用程序）
*   Application.Forms.Common（类库，其他 Forms 应用程序引用）
*   Application.Web.PublicWebsite（网络应用程序）
*   Application.Web.Common（类库，其他 Web 应用程序引用）
*   Infrastructure.DataAccess.SQLServer（类库，依赖注入到域中）
*   Infrastructure.Vendor.SomeService（类库，依赖注入到域中）
*   等等

因此，您有一个核心业务逻辑项目，其中包含对您正在工作的整个业务领域通用的任何内容。它应该*没有*依赖关系。（不依赖于用户界面、数据库、框架等）然后你有各种技术的应用程序，其中包含具有应用程序耦合的通用功能的混合类库。最后，您拥有域的另一个外围，即后端依赖项。这些可能是您的数据访问层、与第三方系统和服务的集成等。

由于任何给定的功能都被抽象为通用实用程序以减少重复并增加重用，因此请注意保持代码耦合较低，以免“通用实用程序”与“不常见的依赖项”紧密绑定。在行业中，与代码重用的紧密耦合经常会增加。（请参阅[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。）因此，请运用良好的判断力来避免这种情况。

如果它服务于多个职责并且这些职责不应该混合，那么多次编写相同的代码（仅通过击键就“相同”，不一定是概念目的）并没有本质上的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T22:29:47.373

听起来您想使用静态方法。按您的例程进行分组，并将它们放在静态类中，例如

```
internal static class Utility
{
    public static void Method1(int whatever)
    {
        // do stuff
    }

    public static void Method2(string another)
    {
        // do other stuff
    }

} 
```

然后你可以这样称呼他们：

```
Utility.Method1(7);
Utility.Method2("thingy"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:47:38.287

简单的解决方案是创建一个新项目并选择“类库”选项。这将创建一个编译成 DLL（动态链接库）的类。你想在任何地方使用你添加的这个公共代码都可以添加对程序集的引用，然后在你使用它的特定文件中，你必须为它添加一个 using 语句。

如果您需要上交多个项目，您可以将所有项目放在一个解决方案下。如果您右键单击解决方案并选择下拉菜单的属性选项，它将在左侧导航栏中打开一个带有“配置属性”选项的新窗口。选择它，然后您可以指定构建依赖项。因此，如果您的项目 A 和 B 使用项目 C（类库）中的方法，那么您可以将其设置为构建依赖项，这意味着每当您构建项目 A、B 或整个解决方案时，它将首先构建项目 C。

这通常是企业软件的结构方式；一些 dll 或 exe 是应用程序级代码，然后是许多其他项目，它们构建了通常由多个项目共享的通用代码。所有这些通常都放在一个解决方案的保护伞下。

如果你走这条路，我可以更新更多细节（比如调试时默认运行哪个 exe）。在大学里你可能不会学到任何东西，但你很可能会在你开始第一份工作时就看到。

# django - Django - 在管理员之外使用多对多水平界面

> ID：16203287
> 
> 赞同：5
> 
> 时间：2013-04-24T22:25:40.577
> 
> 标签：django, django-forms, many-to-many

我正在使用带有 m2m 字段的表单。我希望这个字段看起来像 django 管理站点的水平界面...... ¿我该怎么做？

谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T01:14:22.937

您需要使用`FilteredSelectMultiple`小部件

```
from django.contrib.admin.widgets import FilteredSelectMultiple
from django import forms
from .models import Person

class PersonForm(forms.ModelForm):
    some_field = forms.ModelMultipleChoiceField(Person.objects.all(), widget=FilteredSelectMultiple("Person", False, attrs={'rows':'2'}))
    class Meta:
        model = Person 
```

您还需要包含管理员中使用的 Javascript 和 CSS。这是一个[例子](http://jayapal-d.blogspot.com/2009/08/reuse-django-admin-filteredselectmultip.html)

# objective-c - 扩展与实现中的实例变量

> ID：16203288
> 
> 赞同：3
> 
> 时间：2013-04-24T22:25:42.207
> 
> 标签：objective-c, instance-variables

在 Objective-C 中，例如不想放在头文件中的变量，可以将它们放在类扩展中：

```
@interface MyClass () {
  NSString *myInstanceVariable;
}
// ...
@end 
```

或在类实现中：

```
@implementation MyClass {
  NSString *myInstanceVariable;
}
// ...
@end 
```

它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:45:56.327

在您发布的第一个示例中，myInstanceVariable 在接口中声明但未显式声明为私有，因此它是受保护的，而不是私有的。受保护是默认设置。

在您发布的第二个示例中，myInstanceVariable 是在实现而不是接口中声明的，因此它是私有的。

我的偏好是在界面中将其列为@private。

# c# - 如何将 Panel 的内容复制到 RichTextBox？

> ID：16203291
> 
> 赞同：2
> 
> 时间：2013-04-24T22:26:08.220
> 
> 标签：c#, winforms, visual-studio, richtextbox, panel

我有一个面板，它是应用程序的用户。该面板允许用户以数字方式输入他们的签名。我想从面板中取出绘图并将其复制到richTextBox 的最末端。

我当前的面板代码如下：

```
public partial class Signature : Form
{
    SolidBrush color;
    float width;
    List<List<Point>> _lines;
    Boolean _mouseDown;

    public Signature()
    {
        InitializeComponent();
        _lines = new List<List<Point>>();
        color = new SolidBrush(Color.Black);
        _mouseDown = false;
    }

    private void clear_Click(object sender, EventArgs e)
    {
        _lines.Clear();
        sign.Invalidate();
    }

    private void panel1_MouseDown(object sender, MouseEventArgs e)
    {
        _mouseDown = true;
        _lines.Add(new List<Point>());
    }

    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        if (_mouseDown)
        {
            _lines.Last().Add(e.Location);
            sign.Invalidate();

        }
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        foreach (var lineSet in _lines)
        {
            if (lineSet.Count > 1)
            {
                e.Graphics.DrawLines(new Pen(Color.Black, 4.0F), lineSet.ToArray());
            }
        }
    }
    private void panel1_MouseUp(object sender, MouseEventArgs e)
    {
        _mouseDown = false;
    }

    private void use_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Signature successfully imported!", "Success!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectedText = "";
        this.Close();
    }
} 
```

}

如何从 Panel 中获取绘图并将其插入到 RichTextBox 的末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:40:48.177

您可以先将签名绘制到`Bitmap`，然后将该位图复制`Clipboard`到`RichTextBox`. 你可以试试这个，但我必须说它没有经过测试：

```
Bitmap bmp = new Bitmap(panel1.Width, panel1.Height);
Rectangle rect = new Rectangle(0, 0, panel1.Width, panel1.Height);
panel1.DrawToBitmap(bmp, rect);
Clipboard.SetImage(bmp);
richTextBox1.Paste(); 
```

或者，您可以绘制`Lines`到`Bitmap`

# asp.net - 没有在 div 的背景图像上打印

> ID：16203292
> 
> 赞同：1
> 
> 时间：2013-04-24T22:26:10.607
> 
> 标签：asp.net, html, css

我有一个带有背景图像的 DIV。我希望图像显示在屏幕上（已经有效），但我不希望在打印页面时打印该图像。CSS中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:29:25.790

您可以添加一个打印样式表来删除图像以进行打印...

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

在打印样式表中，您只需使用普通 CSS，它只会在打印时应用，例如...

```
.myStyle {
    background-image:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:30:02.290

您可以使用媒体查询

```
@media print {
   #yourDiv { background-image:none; }
} 
```

或加载覆盖背景的打印特定样式表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T22:30:22.957

我认为媒体查询会对您有所帮助

```
@media print
  {
     div.test {background:none;}
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:58:57.213

如果您需要以 IE 8 或更早版本为目标，请使用打印样式表方法，因为这些浏览器不支持媒体查询。

# c++-cli - 将字符串格式化为十六进制并验证

> ID：16203293
> 
> 赞同：0
> 
> 时间：2013-04-24T22:26:13.030
> 
> 标签：c++-cli

我有一个应用程序接受来自 C++/CLI 的十六进制值`richtextbox`。
该字符串来自用户输入。

样本输入和预期输出。

```
01 02 03 04 05 06 07 08 09 0A  //good input

0102030405060708090A           //bad input but can automatically be converted to good by adding spaces.

XX ZZ DD AA OO PP II UU HH SS  //bad input this is not hex

01 000 00 00 00 00 00 01 001 0 //bad input hex is only 2 chars 
```

如何编写函数：
1\. 检测输入是好还是坏输入。
2\. 如果输入错误，请检查哪种错误输入：没有空格，不是十六进制，必须是 2 个字符拆分。
3.如果没有空格输入错误，则自动添加空格。

到目前为止，我通过搜索以下空间来制作空间检查器：

```
for ( int i = 2; i < input.size(); i++ ) 
{
    if(inputpkt[i] == ' ')
    {
        cout << "good input" << endl;
        i = i+2;
    }
    else
    {
        cout << "bad input. I will format for you" << endl;
    }
} 
```

但它并没有真正按预期工作，因为它返回：

```
01 000 //bad input
01 000 00 00 00 00 00 01 001 00 //good input 
```

* * *

*更新*

1 检查输入是否实际上是十六进制：

```
bool ishex(std::string const& s)
{
    return s.find_first_not_of("0123456789abcdefABCDEF ", 0) == std::string::npos;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:23:48.133

您是在 C++/CLI 中操作，还是在纯 C++ 中操作？您已将其标记为 C++/CLI，但您使用的是 std::string，而不是 .Net [System::String](http://msdn.microsoft.com/en-us/library/system.string.aspx)。

我建议将其作为一般计划：首先，根据任何空格将大字符串拆分为较小的字符串。对于每个单独的字符串，确保它只包含 [0-9a-fA-F]，并且是两个字符的倍数。

实现可能是这样的：

```
array<Byte>^ ConvertString(String^ input)
{
    List<System::Byte>^ output = gcnew List<System::Byte>();

    // Splitting on a null string array makes it split on all whitespace.
    array<String^>^ words = input->Split(
        (array<String^>)nullptr, 
        StringSplitOptions::RemoveEmptyEntries);

    for each(String^ word in words)
    {
        if(word->Length % 2 == 1) throw gcnew Exception("Invalid input string");

        for(int i = 0; i < word->Length; i += 2)
        {
            output->Add((Byte)(GetHexValue(word[i]) << 4 + GetHexValue(word[i+1])));
        }
    }

    return output->ToArray();
}

int GetHexValue(Char c) // Note: Upper case 'C' makes it System::Char
{
    // If not [0-9a-fA-F], throw gcnew Exception("Invalid input string");
    // If is [0-9a-fA-F], return integer between 0 and 15.
} 
```

# facebook - API 错误代码：100 错误消息：此消息中的某些内容已被 Facebook 用户报告为滥用

> ID：16203294
> 
> 赞同：0
> 
> 时间：2013-04-24T22:26:14.923
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-apps, facebook-oauth

今天，不知从何而来，我的应用程序已经停止工作。

我收到此消息，当我单击时`ok`，他重定向并收到服务器错误。

```
API Error Code: 100
API Error Description: Invalid parameter
Error Message: Some content in this message has been reported as abusive by Facebook users. 
```

我使用 Facebook php sdk。

如何解决这个问题？

# qt - 'class QMutex' 没有名为 'EnterCriticalSection' 的成员

> ID：16203298
> 
> 赞同：1
> 
> 时间：2013-04-24T22:26:28.440
> 
> 标签：qt, qmutex

我正在使用 QT 4.8，每当我对 QMutex 进行简单使用时，都会出现以下编译错误：'class QMutex' has no member named 'EnterCriticalSection'

样本：

```
void classA::write (int x)
{
   mutex->lock()
   ... do something
   mutex->unlock()
} 
```

mutex 被定义为类中的成员并在标头中初始化。

# javascript - 钛 webview 的 string.replace

> ID：16203309
> 
> 赞同：0
> 
> 时间：2013-04-24T22:27:14.287
> 
> 标签：javascript, titanium, titanium-mobile, ampersand

我尝试了以下无济于事

```
var clean = link.replace(/\&nbsp\; /gi,' '); 
```

我也尝试过不转义 & 和 ; 并且只逃脱一个，但它不起作用。我可以只替换普通的 nbsp。有什么办法可以用''代替吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:06:56.267

我一直在与 Appcelerator Q&A 上的一些人一起研究这个问题，我能想到的最好的答案是最好的解决方法。

```
var clean = link.replace(/nbsp/g," ").replace(/\&/g,"").replace(/amp\;/g,"").replace(/\;/g,""); 
```

由于显而易见的原因，这对每个人都不起作用，因为它会清除所有分号和＆符号，但它对我有用。我很困惑为什么我不能把整个人都`&nbsp;`换掉，但现在我很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T06:14:20.933

如果要替换为完全`&nbsp;`包含空格的空字符串`' '`，只需使用：

```
var clean = link.replace(/&nbsp;/g,' '); 
```

# hadoop - Hive 如何为作业选择减速器的数量？

> ID：16203314
> 
> 赞同：17
> 
> 时间：2013-04-24T22:27:33.867
> 
> 标签：hadoop, hive

有几个地方说 Hadoop 作业中的默认减速器数量是 1。您可以使用 mapred.reduce.tasks 符号手动设置减速器的数量。

当我运行 Hive 作业（在 Amazon EMR、AMI 2.3.3 上）时，它的减速器数量大于一个。查看作业设置，我认为是 Hive 设置了 mapred.reduce.tasks。它是如何选择这个数字的？

注意：以下是运行 Hive 作业时的一些消息，应该是一个线索：

```
...
Number of reduce tasks not specified. Estimated from input data size: 500
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=<number>
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=<number>
In order to set a constant number of reducers:
  set mapred.reduce.tasks=<number>
... 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T08:14:30.783

默认值 1 可能用于 vanilla Hadoop 安装。Hive 覆盖它。

在开源配置单元中（可能还有 EMR）

```
# reducers = (# bytes of input to mappers)
             / (hive.exec.reducers.bytes.per.reducer) 
```

[这篇文章](http://karmasphere.com/how-does-analyst-determine-the-number-of-reducer-tasks-per-query)说默认 hive.exec.reducers.bytes.per.reducer 是 1G。

您可以使用 限制此启发式生成的减速器数量`hive.exec.reducers.max`。

如果您确切知道所需的减速器数量，则可以设置`mapred.reduce.tasks`，这将覆盖所有启发式方法。（默认设置为 -1，表示 Hive 应使用其启发式算法。）

在某些情况下 - 比如说 'select count(1) from T' - Hive 会将 reducer 的数量设置为 1 ，而不管输入数据的大小。这些被称为“完整聚合”——如果查询所做的唯一事情是完整聚合——那么编译器知道来自映射器的数据将减少到微不足道的数量，并且运行多个减速器没有意义。

# php - 复杂的星图？

> ID：16203327
> 
> 赞同：1
> 
> 时间：2013-04-24T22:28:23.543
> 
> 标签：php, web-applications, for-loop

好的，所以我在尝试编写 5x3 星形图案时遇到了一个独特的问题。我可以执行 for 循环来获得 5x3，这很容易。但是我需要不同于正方形的东西。

我们最多可以有 15 颗星。所以打印出一个完整的块看起来像这样：

```
* * *
* * *
* * *
* * *
* * * 
```

但是我们可以传入一个参数来表示我们想要的星数。所以让我们传入 11 而不是 15。我们应该得到：

```
* * *
* * *
* * *
* * 
```

但是，以 11 作为我的参数，输出是这样的：

```
* 
* *
* *
* 
```

它用不正确的星数打印出正确的行数。我知道这是为什么，这是因为我的代码中的模数。我还尝试了一种不同的方法，它打印出的行比需要的少。我被困住了，不知道从这里去哪里。

**这是我的代码：**

```
<?php
    $num = 11;
    $rows = ceil($num/3);
    $count - 0;
    for($j = 0; $j < $rows; $j++){
        echo '<div class="row-fluid"><ul class="thumbnails">';
        for($i = $num%3; $i < 3; $i++){
            echo '*';
            $count++;
        }
        $num-=$count;
        echo '</ul></div>';
     }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:52:59.603

我不明白为什么你必须使用两个 for 循环。

我会做这样的事情：（我注意到您的代码中没有任何`<li>`'s）当然，您必须将 class="thumbnails" 设置为包含 list-style-type:none;

```
<?php
    $num = 11;
    $cols = 3;

    echo '<div class="row-fluid"><ul class="thumbnails">';
    $count = 0;
    for($j = 0; $j < $num; $j++){
        $count++;

        echo '<li style="float:left;">*</li>';
        if ($count>=$cols) {
            $count = 0;
            echo '<li style="clear:both;"></li>';
        }

     }
     echo '</ul></div>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:47:42.053

哦，一个难题！

我不知道 using`for`是否是您作业的要求，我更喜欢`while`.

```
 $num_of_stars = 15;
 $stars_per_row = 3;
 while($num_of_stars > 0){
    echo "*";
    if($stars_per_row == 1){
        $stars_per_row = 3;
        echo "<br />";
    }else{
        $stars_per_row --;
    }
    $num_of_stars --;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:35:03.143

使用一些简单的 PHP-Fu：

```
$stars = 11;
$row_length = 3;

$array = array_fill(0, $stars, '*');
$array = array_chunk($array, $row_length);

$table = '<table border="0">';
foreach($array as $row){
    $table .= '<tr><td>'. implode('</td><td>', $row) .'</td></tr>';
}
$table .= '</table>';

echo $table; 
```

[在线演示](http://codepad.viper-7.com/hFX4En)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T22:36:19.523

为此，这就是您所需要的。

```
$num = 11;
$cols = 3;
$rows = ceil($num/$cols);

for($j=0;$j<$rows;$j++)
    echo "<div class='row'>";
    for($i=0;$i<$cols;$i++){
        echo "*";
    }
    echo "</div>";
} 
```

显示你在代码中出错的地方。首先，您对 $count 的定义应该是`=`not `-`。接下来，您的内部`for`循环很奇怪。

第一次循环，`$num`等于`11`。在您的内部循环中，您设置`$i = $num%3`which is `$i = 2`。所以内部循环运行一次 while `$i++ < 3`， echo 的一颗星并递增 count 一次。`$count`内循环退出，您从`$num`制作中减去`$num=10`并且行完成，下一个外循环迭代。

下一次内部循环运行时，`$num`是 10 所以`$i = $num%3`变成`$i=1`。内部循环运行 2 次 while `$i++ < 3`，回显 2 颗星并增加 $count 两次使其现在 3\. 在内循环之后，您从`$num`7 和行结束中再减去 3，外循环继续。

下一个内部循环，`$num`是 7 所以`$i = $num%3`变成`$i=1`。内循环运行 2 次 while `$i++ < 3`，再回显 2 颗星并增加 $count 两次使其现在为 5。在内循环之后，您从`$num`现在为 2 中减去 5，行结束，外循环继续。

外循环的最后一次迭代（行限制命中）`$num`是 2 所以`$i = $num%3`变成`$i=1`. 内循环运行一次，回声的一颗星和内循环计数一次，现在是 8。内循环结束，你从`$num`现在 -6 中减去 8，行结束，外循环结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T22:39:58.070

这个想法应该很简单：继续绘制直到达到目标数字。

所以你可以这样做：

```
$num = 11;
for( $i=0; $i<$num; $i+=3) {
    echo "<div class=\"row-fluid\"><ul class=\"thumbnails\">";
    for( $j=0; $j<3 && $i+$j<$num; $j++) {
        echo "*";
    }
    for( ; $j<3; $j++) { // finish the current row (optional, remove if not needed)
        echo " ";
    }
    echo "</ul></div>";
} 
```

# java - Java 代码用于将变量发布到 php 脚本，但它不起作用，出现 403 错误

> ID：16203335
> 
> 赞同：0
> 
> 时间：2013-04-24T22:29:14.533
> 
> 标签：java, php, html, post

我有一个有趣的挑战。我必须将密码“flubergump”发送到网络上的一个页面（php 脚本）。

我写了这个通用代码：

```
try {

    URL url = new URL(A);
    URLConnection con = url.openConnection();
    con.setDoOutput(true);

    OutputStreamWriter writer = new OutputStreamWriter(con.getOutputStream());
    F = URLEncoder.encode(F, "UTF-8");
    writer.write(F);
    System.out.println(F);
    String line;

    DataInputStream in = new DataInputStream (con.getInputStream ());

    while ((line = in.readLine()) != null) {
        G=G + line;
    }
    textarea.setText(G);
    writer.close();
    in.close(); 
```

并尝试发送每个版本的密码=flubergump！

发送此 HTML 将起作用：

```
<form method="post" action="http://www.hackthis.co.uk/levels/i2.php">
<input type="hidden" name="password" value="flubergump">
</form> 
```

但我想做一个“post variables”工具，只是以实践的名义。你能告诉我为什么我没有成功吗？我尝试编写自己的 PHP 脚本，但仍然没有运气。我已经研究了这个主题，人们会觉得这段代码应该可以工作。

# linux - 简单的 awk 命令问题（FS、OFS 相关）

> ID：16203336
> 
> 赞同：22
> 
> 时间：2013-04-24T22:29:22.983
> 
> 标签：linux, awk

我试图重新组织包含以下内容的文件的格式：

```
>Humanl|chr16:86430087-86430726 | element 1 | positive
>Humanl|chr16:85620095-85621736 | element 2 | negative
>Humanl|chr16:80423343-80424652 | element 3 | negative
>Humanl|chr16:80372593-80373755 | element 4 | positive
>Humanl|chr16:79969907-79971297 | element 5 | negative
>Humanl|chr16:79949950-79951518 | element 6 | negative
>Humanl|chr16:79026563-79028162 | element 7 | negative
>Humanl|chr16:78933253-78934686 | element 9 | negative
>Humanl|chr16:78832182-78833595 | element 10 | negative 
```

我的命令是：

```
awk '{FS="|";OFS="\t"} {print $1,$2,$3,$4,$5}' 
```

这是输出：

```
>Human|chr16:86430087-86430726  |      element 1      |
>Human  chr16:85620095-85621736         element 2      negative
>Human  chr16:80423343-80424652         element 3      negative
>Human  chr16:80372593-80373755         element 4      positive
>Human  chr16:79969907-79971297         element 5      negative
>Human  chr16:79949950-79951518         element 6      negative
>Human  chr16:79026563-79028162         element 7      negative
>Human  chr16:78933253-78934686         element 9      negative
>Human  chr16:78832182-78833595         element 10     negative 
```

除第一行外，每一行都可以正常工作。我不明白为什么会这样。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-24T22:45:13.980

### 简短的回答

`FS`并且`OFS`设置得太晚而无法影响第一行，请改用以下内容：

```
awk '{print $1,$2,$3,$4,$5}' FS='|' OFS='\t' 
```

您也可以使用这个较短的版本：

```
awk -v FS='|' -v OFS='\t' '$1=$1' 
```

### 长一点的答案

它不起作用，因为 awk 在设置`FS`和时已经执行了记录/字段拆分`OFS`。`$0`您可以通过设置来强制重新拆分`$0`，例如：

```
awk '{FS="|";OFS="\t";$0=$0} {print $1,$2,$3,$4,$5}' 
```

执行此操作的常规方法是 1.在子句中设置`FS`和其他，2\. 通过符号设置它们，或 3\. 在脚本之后将它们附加为. 我喜欢的风格是最后一种选择：`BEGIN``-v VAR=VALUE``VAR=VALUE`

```
awk '{print $1,$2,$3,$4,$5}' FS='|' OFS='\t' 
```

`-v`请注意，设置脚本变量的时间和后脚本变量之间存在显着差异。`-v`将在子句之前设置变量，`BEGIN`而在子句之后设置变量的脚本设置`BEGIN`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-24T22:30:50.553

尝试：

```
awk 'BEGIN{FS="|";OFS="\t"} {print $1,$2,$3,$4,$5}' 
```

# java - Android Programming Not Showing up in Emulator，阅读其他问题，仍然没有解决方案

> ID：16203341
> 
> 赞同：0
> 
> 时间：2013-04-24T22:29:37.610
> 
> 标签：java, android, android-emulator

对于我的 Android 应用程序，我在 AndroidManifest.xml 文件中声明了多个活动。

AndroidManifest.xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.btdt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/quizicon"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true">

        <activity android:name="QuizActivity"

            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

        <activity android:name="QuizSplashActivity"> </activity>
        <activity android:name="QuizGameActivity"> </activity>
        <activity android:name="QuizHelpActivity"> </activity>
        <activity android:name="QuizMenuActivity"> </activity>
        <activity android:name="QuizScoresActivity"> </activity>
        <activity android:name="QuizSettingsActivity"> </activity>

    </application>

</manifest> 
```

出于某种原因，我的应用程序从未出现在模拟器上。我已经阅读了其他人提出相同问题的答案，但我的应用程序仍然没有显示。我没有收到任何编译或运行错误。

如果有任何帮助，我的 QuizActivity.java 文件是

```
package com.example.btdt;

import android.os.Bundle;
import android.app.Activity;
import android.content.SharedPreferences;
import android.view.Menu;
import android.widget.TextView;

public class QuizActivity extends Activity {
    TextView countDisplay;

    public static final String GAME_PREFERENCES = "GamePrefs";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_quiz_splash);

        SharedPreferences settings =
                getSharedPreferences(GAME_PREFERENCES, MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = settings.edit();
        prefEditor.putString("UserName", "Ryan D'souza");
        prefEditor.putInt("UserAge", 16);
        prefEditor.commit();

        countDisplay = new TextView(this);
        this.setContentView(countDisplay);

        if(settings.contains("UserName") == true)
        {
            String user = settings.getString("UserName", "Default");
            countDisplay.setText(user);

        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.quiz_splash, menu);
        return true;
    }

} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:19:28.337

尝试像这样声明您的其他活动：

```
 <activity
        android:name=".YourClass"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.your.package.name" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

如果模拟器没有显示它，请重新启动 Eclipse 并打开它。在运行应用程序之前，打开模拟器并等待它加载。

# matlab - Matlab 对 64 位机器上矩阵大小的限制

> ID：16203343
> 
> 赞同：-1
> 
> 时间：2013-04-24T22:29:48.323
> 
> 标签：matlab

我的 32 位机器上的代码出现内存不足错误：

```
ones(10800,10800); 
```

我无法访问 64 位机器，如果你们测试可以在您的机器上创建的最大 2D 矩阵并在此处报告，那将会很有趣。

谢谢，期待一个很棒的线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:33:28.837

这记录在 Mathworks 网站上：http: [//www.mathworks.co.uk/support/solutions/en/data/1-IHYHFZ/index.html](http://www.mathworks.co.uk/support/solutions/en/data/1-IHYHFZ/index.html)

# maven - 确保 Maven 使用干净的 repo 从头开始 运行

> ID：16203347
> 
> 赞同：0
> 
> 时间：2013-04-24T22:30:04.050
> 
> 标签：maven, maven-3

我对 Maven 很陌生，现在真的不想完全学习它，只是想安装我的 java 项目。我收到了一些错误（它来自 Hadoop Crunch 项目），但这些错误感觉就像是指我的旧代码正在执行除法并且可能是 div 被零。

所以无论如何：目前我是东`mvn clean install`，但看起来它的缓存还有什么东西？有没有更强大的方法来做到这一点，以便我确保没有任何东西来自它的缓存等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:44:41.627

`C:\Users\youruser\.m2`在或中查找您的存储库`~/.m2`，您可以随时删除它，但下次您执行某项操作时会导致“下载 Internet”。这显然不是日常使用的解决方案，它`mvn clean install`确实会从头开始编译并将项目的二进制文件放入本地存储库中，但是如果您对单独的项目有 SNAPSHOT 依赖项（我不是在谈论子模块，我指的是其他一些项目中的项目）目录），那么您需要先访问这些项目并先在`mvn clean install`那里进行操作，以便您的本地存储库拥有最新的二进制文件。

# python - Django - 我们可以连接到不同的远程数据库吗

> ID：16203348
> 
> 赞同：3
> 
> 时间：2013-04-24T22:30:09.800
> 
> 标签：python, django, python-2.7, mysql-python, remote-server

我正在编写一个 Django 应用程序，我已经在我的 settings.py 中配置了 1 个 mysql 后端数据库。

我知道我们可以根据需要添加任意数量的数据库配置，但那是`hard coding`我不想要的......我不可能这样做，因为我必须临时连接说，大约 70-80 台不同的远程机器和查询和获取结果。

我计划通过他们的`IP address`.

我对 比较陌生`Django`，所以我想知道我们是否可以`function`通过以下配置来查询机器：

```
DATABASES = {
 'default': {
    'ENGINE': 'django.db.backends.mysql', 
    'NAME': 'dbName',
    'USER': 'root',                     
    'PASSWORD': 'root',                  
    'HOST': '',                      
    'PORT': '3306'
  }
} 
```

因此`DATABASES and default`，我可以配置我的函数来更改配置，而不是通过一个`Ajax call`或其他东西！

幸运的是，我必须连接的每台机器都使用`mysql`，所以没有问题。我查看了[这个 mysql -python 连接器](http://dev.mysql.com/doc/connector-python/en/connector-python-install.html)，但不确定是否应该使用它，因为我已经`MySQLDb`安装了它。我也必须做一些`raw queries`：|

谁能指导我解决这种情况的最佳方法是什么？

PS：我也看过[这篇文章](https://stackoverflow.com/questions/11945128/connect-django-to-remote-mysql-server-on-a-local-network)，它讨论了从本地连接到远程 mysql 机器。但这对我没有帮助:( :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:53:44.753

我相信你可以走很多路，其中3条是：

1.  添加你所有的连接`DATABASES`使用[`using`](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database-for-a-queryset)- 你说你不想这样做，因为你有这么多的连接

2.  您可以使用 python 的 mysql 库进行连接。如果你这样做，我认为你不会使用 djangos nice ORM

3.  看看 django 如何包装连接以允许您使用他们的 ORM。我做了一些关于使用 django ORM 手动建立连接的快速搜索，但没有找到任何东西。所有答案都在[源代码](https://github.com/django/django/blob/master/django/db/utils.py)中。我相信您可以只实例化您自己的连接并使用 ORM 与您的远程数据库进行交互。我现在没有时间看它，但一切都在他们的源头

# javascript - 让浮动 div 在到达另一个 div 时停止

> ID：16203352
> 
> 赞同：0
> 
> 时间：2013-04-24T22:10:46.953
> 
> 标签：javascript, jquery, css

我`div`在侧边栏上有一个浮动，随页面滚动。有没有办法添加代码使其在到达页脚时停止？

查看实际代码：http: [//openbayou.staging.wpengine.com](http://openbayou.staging.wpengine.com)

用于浮动的 jQuery 代码`div`：

```
$j=jQuery.noConflict();

$j(document).ready(function($) {

//this is the floating content
var $floatingbox = $('#one');

if($('#primary').length > 0){

    var bodyY = parseInt($('#primary').offset().top) - 20;
    var originalX = $floatingbox.css('margin-left');

    $(window).scroll(function () { 

        var scrollY = $(window).scrollTop();
        var isfixed = $floatingbox.css('position') == 'fixed';

        if($floatingbox.length > 0){

            $floatingbox.html();

            if ( scrollY > 1561 && !isfixed ) {
                $floatingbox.stop().css({
                    position: 'fixed',
                    top: 10,
                });
            } else if ( scrollY < 1561 && isfixed ) {
                $floatingbox.css({
                    position: 'relative',
                    top: 0,
                });
            }

        }

    });
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:23:30.013

好吧，在看了你最新的 jsfiddle 之后。我已经修改了该代码以与您的代码一起使用。[http://jsfiddle.net/Tgm6Y/4430/](http://jsfiddle.net/Tgm6Y/4430/)这不会有动画滞后，应该适合你。

```
$('#one').followTo('#two','#pointFive'); 
```

只需将#two 替换为#footer 并将#pointFive 替换为“#sidebar .sidebar-tag-cloud”，这应该可以在您的代码中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:42:28.007

为什么不将侧边栏的 z-index 设置在页脚的 z-index 后面呢？

**编辑：**我不喜欢这个结果，所以我按照你想要的方式在 jquery 中进行了这项工作......

试试这个你的滚动功能：

```
$(window).scroll(function () { 
floatingbox = $("#one");
            if(floatingbox.length > 0){
                //get our current scroll position
                var scrollY = $(window).scrollTop();
                //get the position of the tag cloud relative to the document
                var contentY = ($("#sidebar .sidebar-tag-cloud").offset().top + $("#sidebar .sidebar-tag-cloud").outerHeight(false));
                //calculate the largest possible top margin size before it starts to overlap the footer
                var lastY = $("#footer").offset().top - $("#one").outerHeight(false);
                //check if our scroll location is past the bottom of the tag cloud
                if ( scrollY > contentY )
                {
                    //check if the current top position is less than the maximum position
                    if(floatingbox.offset().top<lastY)
                    {
                        //keep scrolling
                        floatingbox.stop().animate({"marginTop":scrollY-contentY});
                    }else
                    {
                        //check if we have scrolled back up and have a space at the top
                        if(scrollY<floatingbox.offset().top)
                        {
                            floatingbox.stop().animate({"marginTop":scrollY-contentY});
                        }else
                        {
                            // hard set to the maximum position
                            floatingbox.stop().css({"marginTop":lastY-contentY});
                        }
                    }
                }               
            }
        }); 
```

我还通过获取标签云底部的位置并使用它而不是您的硬编码数字来使其更具动态性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T01:11:32.303

**更新：**找到了我的问题的解决方案。

```
$(function () {
    var msie6 = $.browser == 'msie' && $.browser.version < 7;
    if (!msie6) {
        var top = $('#one').offset().top;
        $(window).scroll(function (event) {
            var y = $(this).scrollTop() + 20;
            if (y >= top) {
                $('#one').addClass('fixed');
            }
            else {
                $('#one').removeClass('fixed');
            }

            // don't overlap the footer - pull sidebar up using a negative margin
            footertotop = ($('#footer').position().top);
            scrolltop = $(document).scrollTop() + 760;
            difference = scrolltop - footertotop;
            if (scrolltop > footertotop) {
                $('#one').css('margin-top', 0 - difference);
            }

            else {
                $('#one').css('margin-top', 0);
            }
        });
    }
}); 
```

这样做是它在页脚之前停止，我可以配置停止点。

我感谢解决我的问题的所有帮助！

# android - 如何获取为特定意图注册的所有 BroadcastReceiver 的列表？

> ID：16203357
> 
> 赞同：7
> 
> 时间：2013-04-24T22:30:44.723
> 
> 标签：android, broadcastreceiver

我正在开发操作系统级别的 android 服务。（不是来自 SDK，它来自 android 源代码。它将成为我自定义 ROM 的一部分。我可以以 root 身份调整自己）

我将为应用程序提供一个界面，以使用我的自定义意图执行某些操作。最后我想知道谁在听这个意图。

有没有办法获取为特定意图注册的所有 BroadcastReceiver 的列表？

感谢帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T22:41:59.980

从一个程序中，您可以使用[`PackageManager`和`queryBroadcastReceivers()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29)。

在“adb shell”中，尝试命令：dumpsys activity

Activity Resolver Table 列出了广播接收器正在寻找的所有内容。

# sql - 进行 SQL 查询以计数

> ID：16203359
> 
> 赞同：-2
> 
> 时间：2013-04-24T22:30:56.190
> 
> 标签：sql

我做了一个sql数据库，需要查询才能计数。

我需要： 计算（不列出）每位教授给出的成绩（“A”-“F”）

该数据来自两个表。

表一：（DW_Course_facts）：有periodKey、courseKey、studentKey、profKey、grade。

表二：（DW_Professor）：有profKey、profID、name、title、deptID、deptName。

这个查询会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:36:26.670

像这样：

```
SELECT 
    (SELECT p.Name FROM tableTwo p WHERE p.profKey=g.profKey) As ProfName,
    g.grade,
    COUNT(g.grade) As gradeCount
FROM  tableOne g
GROUP BY profKey, grade
ORDER BY profKey, grade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:39:47.553

我拼凑了一个快速的小提琴，展示了你如何做到这一点。

SQLFiddle： [http ://sqlfiddle.com/#!2/c4a55/4](http://sqlfiddle.com/#!2/c4a55/4)

# java - 溜槽和梯子确定单元格是否为空

> ID：16203362
> 
> 赞同：0
> 
> 时间：2013-04-24T22:31:15.147
> 
> 标签：java, methods

我正在制作一个 Chutes Ladder 程序，需要另一种方法来确定单元格是否是我正在使用的 3 个空间旁边的空白空间。如果单元格有 3 个空格，是否还有其他方法可以确定单元格旁边是否为空。

细胞.java：

```
public class Cell {
    String text;
    int number;

    public Cell() {}

    public Cell( String r ) {
        text = r;
    }

    public Cell( int m, String r ) {
        text = r;
        number = m;
    }

    public String getText() {
        return text;
    }

    public void setText( String x ) {
        text = x;
    }

    public int getNumber() {
        return number;
    }

    public void setText( int x ) {
        number = x;
    }

    public boolean isLadder() {
        return (text.equals( "L" ));
    }

    public boolean isChute() {
        return (text.equals( "C" ));
    }

    public boolean isEmpty() {
        return text.equals( "   " );
    }

    public String toString() {
        String s = "";
        if ( isChute() )
            s = s + text + Math.abs( number );
        else if ( isLadder() )
            s = s + text + number;
        else if ( isEmpty() )
            s = s + "   ";
        return s;
    }
} 
```

ChutesAndLadders.java

```
public class ChutesAndLadders {

    Cell[] board;
    Random ran = new Random();

    public ChutesAndLadders() {}

    public ChutesAndLadders( int numChutes, int numLadders ) {
        board = new Cell[100];
        for ( int i = 0; i < board.length; i++ ) {
            board[i] = new Cell( "   " );
        }
        chutes( numChutes );
        ladders( numLadders );
    }

    public void setBoard( Cell[] board ) {
        this.board = board;
    }

    public Cell[] getBoard() {
        return board;
    }

    public void makeChutes( int x ) {
        for ( int i = 0; i < x; i++ ) {
            int temp = ran.nextInt( board.length );
            if ( board[temp].isEmpty() )
                board[temp] = new Cell( -10, "C" );
            else
                i--;
        }
    }

    public void makeLadders( int y ) {
        for ( int i = 0; i < y; i++ ) {
            int temp = ran.nextInt( board.length );
            if ( temp < 10 )
                temp = ran.nextInt( board.length );
            if ( board[temp].isEmpty() )
                board[temp] = new Cell( 10, "L" );
            else
                i--;
        }
    }

    public void chutes( int x ) {
        for ( int i = 0; i < x; i++ ) {
            int temp = ran.nextInt( board.length );
            if ( board[temp].isEmpty() )
                board[temp] = new Cell( -10, "C" );
            else
                i--;
        }
    }

    public void ladders( int y ) {
        for ( int i = 0; i < y; i++ ) {
            int temp = ran.nextInt( board.length );
            if ( temp < 10 )
                temp = ran.nextInt( board.length );
            if ( board[temp].isEmpty() )
                board[temp] = new Cell( 10, "L" );
            else
                i--;
        }
    }

    public int addToMove( String a ) {
        if ( a.equals( "C10" ) ) {
            int n = Integer.parseInt( a.substring( 1 ) );
            return n;
        }
        if ( a.equals( "L10" ) ) {
            int n = Integer.parseInt( a.substring( 1 ) );
            return n * -1;
        }
        else
            return 0;
    }

    public void printBoard() {
        int counter = 0;
        for ( int i = 0; i < board.length; i++ ) {
            counter++;
            System.out.print( "|" + board[i] );
            if ( counter == 10 ) {
                System.out.print( "|" + "\n" );
                counter = 0;
            }
        }
    }
} 
```

测试.java：

```
public class test {
    public static void main( String[] args ) {
        ChutesAndLadders cl = new ChutesAndLadders( 10, 10 );
        cl.makeChutes( 5 );
        cl.makeLadders( 5 );
        int chutes = 0, ladders = 0;
        for ( Cell cell : cl.getBoard() ) {
            if ( cell.isLadder() )
                ladders++;
            else if ( cell.isChute() )
                chutes++;
        }
        System.out.println( "Board has " + chutes + " chutes and " + ladders + " ladders" );
        cl.printBoard();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:03:49.447

```
public boolean isEmpty() {
        return !(isLadder() && isChute());
} 
```

# powershell - 如何在PowerShell脚本中转 义密码中的“<”字符

> ID：16203364
> 
> 赞同：0
> 
> 时间：2013-04-24T22:31:18.583
> 
> 标签：powershell

这是我的脚本：

```
@rasdial "My VPN" "user@domain" 'my<password' 
```

我的密码包含`<`字符。这`@`在进入 PowerShell 控制台时不起作用。

我知道```是引用字符，但显然它不适用于`<`. 我的密码包含许多特殊字符，因此必须引用。但是当使用双引号时它不起作用。如何正确转义密码？有没有办法从外部文件导入它？顺便说一句，rasphone.exe 记得我的密码，也许有办法使用它？

* * *

这是我发现有效的解决方案。我使用双引号而不是单引号。第一次没用，因为`%`我的真实密码里面也有，需要加引号`%%`。

因此，在 .cmd 脚本内部：`'my%`<password'`不会工作，但`"my%%<password"`会。

`'...`<...'`任何人都可以确认他在 .cmd 脚本中使用了字符串并且它有效吗？它在不同的 PowerShell 版本中的行为是否不同？我的来自 Windows 8 x64。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-10T11:00:40.390

我有一个类似的问题，我花了一段时间才弄明白。就我而言，我有一个类似的密码

> }K)/]j..|{?*&%($@7}e$%0>;._#

将它放在双引号中允许变量扩展，因此显然这不起作用。把它放在单引号中应该可以工作，但对我没有用。用反勾号转义问题字符对我也不起作用。

对我有用的是先用单引号括起来，然后用双引号括起来

> '"}K)/]j..|{?*&%($@7}e$%0>;._#"'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T00:55:18.157

你有没有尝试过：

```
'my`<password' 
```

` <--- 波浪号键反引号是 Powershell 转义字符。

我也鼓励使用 -AsSecureString

在 PS 控制台中测试：

```
PS C:\Users\Athomsfere> $pw = 'my<password'
PS C:\Users\Athomsfere> write-host $pw
my<password 
```

所以它本身不是角色。

它仍然是这样的：（作为脚本）

```
'@rasdial', "My VPN", "user@domain", 'my<password' |`
    ForEach
    {
        Write-Host $_
    } 
```

# regex - Python 正则表达式匹配除最后一次出现之外的所有内容

> ID：16203365
> 
> 赞同：13
> 
> 时间：2013-04-24T22:31:24.200
> 
> 标签：regex, python-2.7, directory

所以我有诸如“./folder/thisisa.test/file.cxx.h”之类的表达式我如何替换/删除所有“。” 但最后一个点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-24T22:43:27.087

用正则表达式匹配除最后一个点之外的所有点：

```
'\.(?=[^.]*\.)' 
```

使用[前瞻](http://www.regular-expressions.info/lookaround.html)检查在我们找到的那个之后是否还有另一个点（前瞻不是匹配的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-16T13:57:51.520

没有正则表达式，使用[`str.count`](https://docs.python.org/3/library/stdtypes.html#str.count)and [`str.replace`](https://docs.python.org/3/library/stdtypes.html#str.replace)：

```
s = "./folder/thisisa.test/file.cxx.h" 
s.replace('.', '', s.count('.')-1)
# '/folder/thisisatest/filecxx.h' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T07:52:09.607

**具体的一字符解决方案**

在您*当前的情况下*，您可以使用

```
text = re.sub(r'\.(?![^.]*$)', '', text) 
```

在这里，将不紧跟 ( ) 的(with ) 与除(see )之外的任何 0+ 字符`\.(?![^.]*$)`匹配到字符串 ( ) 的末尾。`.``\.``(?!...)``.``[^.]*``$`

请参阅[**正则表达式演示**](https://regex101.com/r/kPt2Qe/1)和[Python 演示](https://ideone.com/rVyCLf)。

**1+ 字符的通用解决方案**

如果您想替换 a`.` **和**更多字符，您可以在字符类周围使用捕获组，其中包含您需要匹配的字符，并添加正向前瞻`.*`和对捕获值的反向引用。

说，您需要删除最后出现的`[`, `]`, `^`, `\`, `/`,`-`或者`.`您可以使用

```
([][^\\./-])(?=.*\1) 
```

请参阅[正则表达式演示](https://regex101.com/r/88gjH3/1)。

**细节**

*   `([][^\\./-])` - 捕获组匹配`]`, `[`, `^`, `\`, `.`, `/`, `-`（注意这些字符的顺序很重要：`-`必须在末尾，`]`必须在开头，`^`不应该在开头并且`\`必须转义）
*   `(?=.*\1)`- 一个积极的前瞻，需要尽可能多的任何 0+ 字符，然后是第 1 组中捕获的值。

[Python 示例代码](https://ideone.com/nmQ9yA)：

```
import re
text = r"./[\folder]/this-is-a.test/fi^le.cxx.LAST[]^\/-.h"
text = re.sub(r'([][^\\./-])(?=.*\1)', '', text, flags=re.S)
print(text) 
```

请注意`r`带有字符串文字的前缀。请注意，这`flags=re.S`将`.`匹配任何换行符序列。

# objective-c - 在目标 c 中通过引用传递

> ID：16203367
> 
> 赞同：0
> 
> 时间：2013-04-24T22:31:36.043
> 
> 标签：objective-c, pass-by-reference

我是来自目标 c 的调用 c++ 方法：

**C++ 方法：**

```
void TestMethod( size_t& outputSize,
                 OutputArray& outputArray ); 
```

**目标 C：**

```
-(void) testMethodObjc : outputSize,
       OutputArrayObjc : outputArray
{

     TestMethod( outputSize, [outputArray getArray ]);
} 
```

我该如何做到这一点？我从其他帖子中听说objective-c 不支持通过引用传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:36:23.403

Objective-C, like C, does not support pass by reference.

Like C, you can take the address of the variable and pass a pointer instead. And to manipulated the original variable in the function you would need to dereference the pointer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:37:34.430

您应该能够 - Obj-C 是 C 的严格子集。只要确保代码所在的文件是一个`.mm`文件 - 而不仅仅是`.m`

# java - 当我在 Codenameone 中使用 Double 时出错

> ID：16203371
> 
> 赞同：0
> 
> 时间：2013-04-24T22:31:52.323
> 
> 标签：java, double, codenameone

不明白为什么我在声明时收到此错误`Double dblLng`。

```
valueOf(java.lang.String) in java.lang.Double cannot be applied to (double)
    Double dblLng = 0.0d;
Fatal Error: Unable to find method valueOf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:07:59.813

您需要使用以下之一：

```
double dblLng = 0.0; 
```

或者：

```
Double dblLng = new Double(0.0); 
```

你得到这个的原因是由于自动装箱将双精度转换为双精度（如果你不理解谷歌Java自动装箱的区别）。这是当前版本的 Codename One 中的一个错误，其中自动装箱所需的 valueOf 方法从列入白名单的 Java 类中丢失，我将看看修复它。

# jquery - Parallax/Steller.js 和 Jquery Waypoints

> ID：16203375
> 
> 赞同：1
> 
> 时间：2013-04-24T22:32:16.830
> 
> 标签：jquery, parallax, jquery-waypoints

我在玩 Stellar.js 并使用了这里的演示： [http ://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)

我遇到了与演示页面相同的问题，即当页面首次加载时，导航（幻灯片 1）未激活。只有在您开始向下滚动时它才会变为活动状态，然后当您返回幻灯片 1 时，它仍保持活动状态。

这是在 FireFox 和 IE8 中发现的问题（没有要测试的 IE9）。

我确定这是一个航点问题，而不是在页面加载时激活。如何修复它，以便导航中的“幻灯片 1”进入它的活动类状态？

下面是演示中的 JS 代码：

```
jQuery(document).ready(function ($) {

//initialise Stellar.js
$(window).stellar(
    {
    // Set scrolling to be in either one or both directions
    horizontalScrolling: true,
    verticalScrolling: true,    
    // Refreshes parallax content on window load and resize
    responsive: true,   

    }
    );

//Cache some variables
var links = $('.navigation').find('li');
slide = $('.slide');
button = $('.button');
mywindow = $(window);
htmlbody = $('html,body');

//Setup waypoints plugin
slide.waypoint(function (event, direction) {

    //cache the variable of the data-slide attribute associated with each slide
    dataslide = $(this).attr('data-slide');

    //If the user scrolls up change the navigation link that has the same data-slide attribute as the slide to active and 
    //remove the active class from the previous navigation link 
    if (direction === 'down') {
        $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').prev().removeClass('active');
    }
    // else If the user scrolls down change the navigation link that has the same data-slide attribute as the slide to active and 
    //remove the active class from the next navigation link 
    else {
        $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').next().removeClass('active');
    }

});

//waypoints doesnt detect the first slide when user scrolls back up to the top so we add this little bit of code, that removes the class 
//from navigation link slide 2 and adds it to navigation link slide 1\. 
mywindow.scroll(function () {
    if (mywindow.scrollTop() == 0) {
        $('.navigation li[data-slide="1"]').addClass('active');
        $('.navigation li[data-slide="2"]').removeClass('active');
    }
});

//Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
//easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
function goToByScroll(dataslide) {
    htmlbody.animate({
        scrollTop: $('.slide[data-slide="' + dataslide + '"]').offset().top
    }, 2000, 'easeInOutQuint');
}

//When the user clicks on the navigation links, get the data-slide attribute value of the link and pass that variable to the goToByScroll function
links.click(function (e) {
    e.preventDefault();
    dataslide = $(this).attr('data-slide');
    goToByScroll(dataslide);
});

//When the user clicks on the button, get the get the data-slide attribute value of the button and pass that variable to the goToByScroll function
button.click(function (e) {
    e.preventDefault();
    dataslide = $(this).attr('data-slide');
    goToByScroll(dataslide);

}); 
```

});

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:46:39.633

您应该看看[jQuery Waypoints 插件](http://imakewebthings.com/jquery-waypoints/#docs)提供的功能。

首先是尝试稍微设置航点插件的**偏移设置（** [http://imakewebthings.com/jquery-waypoints/#doc-disable](http://imakewebthings.com/jquery-waypoints/#doc-disable)）。这将使航点在页面的不同点触发，这样即使您在屏幕顶部，第一个航点也会触发。

```
//Setup waypoints plugin
slide.waypoint(function (event, direction) {

dataslide = $(this).attr('data-slide');

if (direction === 'down') {
    $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').prev().removeClass('active');
}    
else {
    $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').next().removeClass('active');
}
}, { offset:50 }); // The waypoint is triggered when the element is 50px from the top of the viewport. 
```

或者您可以将“活动”CSS 类添加到第一个元素，然后在滚动时更改该元素。

希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T01:00:59.410

您也可以只在 html 中添加类，因为脚本会在您滚动离开第一个元素时删除该类。

# c# - 初始化字符串的格式不符合从索引 0 开始的规范

> ID：16203376
> 
> 赞同：12
> 
> 时间：2013-04-24T22:32:22.800
> 
> 标签：c#, asp.net, iis-7, enterprise-library

我正在使用 Microsoft Enterprise Lip II 有这种方法在网站中插入资源我得到了这个错误我不认为这是权限问题，我真的不知道如何解决它。顺便说一下我测试 connectionStrings 和它工作正常

```
 <connectionStrings>
    <add name="SiteSqlServer"
      connectionString="Data Source=.;Initial Catalog=databaseName;User ID=sa;Password=***"/>
  </connectionStrings>

 public static int Insert(Resoursce r)
        {
            Database objDB = new SqlDatabase("SiteSqlServer");
            int val = 0;
            using (DbCommand cmd = objDB.GetStoredProcCommand("InsertResoursce"))
            {
                //  OutParameter
                objDB.AddOutParameter(cmd,"@OutResoursceID",DbType.Int32,int.MaxValue);

                //  iNParameter
                objDB.AddInParameter(cmd, "@ModuleId", DbType.Int32, r.ModuleId);
                objDB.AddInParameter(cmd, "@Summary", DbType.StringFixedLength, r.Summary);
                objDB.AddInParameter(cmd, "@PageId", DbType.StringFixedLength, r.PageID);
                objDB.AddInParameter(cmd, "@TypeId", DbType.Int32, r.TypeID);
                objDB.AddInParameter(cmd, "@UserID", DbType.Guid, r.UserID);
                objDB.AddInParameter(cmd, "@Enabled", DbType.Boolean, r.Enabled);
                objDB.AddInParameter(cmd, "@SafetyAlert", DbType.Boolean, r.SafetyAlert);
                objDB.AddInParameter(cmd, "@SaftyAlertText", DbType.StringFixedLength, r.SafetyAlertText);

                try
                {
                     val = objDB.ExecuteNonQuery(cmd);
                     if (val == 1)
                     {
                         return Convert.ToInt32(objDB.GetParameterValue(cmd, "@OutResoursceID"));
                     }
                     else
                     {
                         return -1;
                     }
                }
                catch (Exception ex)
                {

                    throw ex;
                } 

            } 
```

> System.ArgumentException 被捕获 HResult=-2147024809
> Message=初始化字符串的格式不符合从索引 0 开始的规范。 Source=System.Data StackTrace: at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue) 在 System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules)在 System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) 在 System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString,DbConnectionOptions 以前）在 System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key) 在 System.Data.SqlClient.SqlConnection.set_ConnectionString(String value ) 在 Microsoft.Practices.EnterpriseLibrary.Data.Database.GetNewOpenConnection() 在 Microsoft.Practices.EnterpriseLibrary.Data.Database.GetWrappedConnection() 在 Microsoft.Practices.EnterpriseLibrary 的 Microsoft.Practices.EnterpriseLibrary.Data.Database.CreateConnection()。 Microsoft.Practices.EnterpriseLibrary.Data.Database 中的 Data.Database.GetOpenConnection()。在 C:\inetpub\wwwroot\ideaPark\DesktopModules\ResourceModule\App_Code\BOL\ResourceModule.cs:line 54

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T22:36:55.927

这通常意味着您的连接字符串不好。如果您查看堆栈跟踪，您会注意到在尝试解释您的连接字符串时这是失败的。

检查您的连接字符串以确保它是正确的 - 或在此处发布以寻求帮助（但没​​有任何敏感信息，例如密码；））

**更新**

根据[SqlDatabase 文档](http://msdn.microsoft.com/en-us/library/bb747545%28v=pandp.31%29.aspx)，SqlDatabase 类采用连接字符串，而不是连接字符串配置的键。

所以

```
new SqlDatabase("SiteSqlServer"); 
```

应该

```
var connection = ConfigurationManager.ConnectionStrings["SiteSqlServer"];

Database objDB = new SqlDatabase(connection.ConnectionString); 
```

（为简洁起见，我在这里省略了任何防御性代码）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-14T14:36:35.497

SqlConnection con = new SqlConnection(@"Data Source = (LocalDB)\MSSQLLocalDB; AttachDbFilename=C:\Users\KAMRAN RIYAZ\Desktop\Web Tech Lab Practice\ASP.NET\P21SQLoperations\P21SQLoperations\stu.mdf");

上面的连接字符串对我有用。

# logic - 我不明白这个 VHDL 代码有什么问题？

> ID：16203377
> 
> 赞同：0
> 
> 时间：2013-04-24T22:32:28.247
> 
> 标签：logic, std, vhdl

我有以下代码：

```
entity wave_select is
port( address:in std_logic_vector(6 downto 0);
ws1: in std_logic;
ws0: in std_logic;
wave_out: out std_logic_vector(6 downto 0));
end wave_select;

architecture choose_arch of wave_select is
signal internal_sine:std_logic_vector(6 downto 0);
signal internal_tri:std_logic_vector(6 downto 0);
signal internal_sqr:std_logic_vector(6 downto 0); 

begin 
U0: entity sine_tbl port map(addr=>address, sine_val=>internal_sine);
U1: entity triangle_tbl port map(addr=>address, tri_val=>internal_tri);
U2: entity square_tbl port map(addr=>address, square_val=>internal_sqr);

    process (std_logic_vector'(ws1, ws0))
    begin
        case ws_combo is
            when "01" => wave_out<=internal_sine;
            when "10" => wave_out<=internal_tri;
            when "11" => wave_out<=internal_sqr;
            when others =>wave_out<=(others => '-');
        end case;
    end process;

end choose_arch;` 
```

每当我尝试编译它时，都会收到以下错误：

1.  预期标识符/关键字（用于工艺线）
2.  预期的关键字结尾（对于 when “10” 行）
3.  预期设计单元声明（与关键字错误在同一行）

解决了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:55:42.543

你想用`std_logic_vector'`这条线来实现什么？

```
process (std_logic_vector'(ws1, ws0)) 
```

如果您只是将其更改为更传统的

```
process (ws1, ws0) 
```

我想这会有所帮助。

* * *

但我认为`ws_combo`是一个信号

```
ws_combo = ws1&ws0; 
```

所以

```
 process (ws_combo) 
```

会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:04:16.843

就目前而言，这有许多问题，主要是相当基本的语法。

尽管您的意思似乎是 ws0 和 ws1 的组合被视为`ws_combo`，但您没有做任何事情来告诉合成器，因此它被视为`ws_combo`简单的未定义。

至少据我所知，您不能像以前那样在过程敏感度列表中组合信号。敏感度列表是告诉这个过程响应什么外部信号，仅此而已。

您没有定义`wave_out`（除非它也在您的实体声明中）。

您没有`internal_sine`、`internal_tri`或的定义`internal_sqr`。在不知道`wave_out`.

作为一个临时的想法，我已经修复了一些语法错误，添加了一个声明 ws0、ws1 和 wave_out 的实体声明，然后设置`wave_out`为适合我给它的类型的值（在这种情况下，只是采用二进制输入并产生格雷码输出）。

```
entity controller1 is
port (
    ws1 : in std_logic;
    ws0 : in std_logic;
    wave_out : out std_logic_vector(1 downto 0)
);
end;

architecture whatever of controller1 is
begin
impl: process(ws0, ws1)
    begin
        case std_logic_vector'(ws1,ws0) is
            when "01" => wave_out<="01";
            when "10" => wave_out<="11";
            when "11" => wave_out<="10";
            when others =>wave_out<=(others => '-');
        end case;
    end process;
end whatever; 
```

当然，这也需要典型的`library`and`using`来获取 and 的声明`std_logic`，`std_logic_vector`但是添加这些声明后，合成器似乎接受了它。当然，其他一些合成器（我用 Synplify 检查过）可能会发现我错过的问题，但我认为这可能至少涵盖了大多数明显的问题。

# java - 如何将倒数计时器值存储在变量中？

> ID：16203378
> 
> 赞同：0
> 
> 时间：2013-04-24T22:32:36.327
> 
> 标签：java, android

所以，我的活动中有一个倒数计时器。现在，我有一个按钮可以打开另一个活动。单击该按钮时，我需要存储当前的倒计时计时器值，并从该保存的值开始在第二个活动中启动倒计时计时器。我正在考虑使用 Intent 来打发时间，但我不知道要传递什么价值。我怎样才能做到这一点？我的计时器：

```
public String formatTime(long millis) {  
        String output = "00:00";  
        long seconds = millis / 1000;  
        long minutes = seconds / 60;  

        seconds = seconds % 60;  
        minutes = minutes % 60;  

        String sec = String.valueOf(seconds);  
        String min = String.valueOf(minutes);  

        if (seconds < 10)  
            sec = "0" + seconds;  
        if (minutes < 10)  
            min= "0" + minutes;  

        output = min + " : " + sec;  
        return output;
    } 
```

在 onCreate 方法中：

```
// New timer for 40 minutes, starts after initialization
        new MyCount(2400000, 1000) 
        {
            // Updates the text on your "scoreboard" every second
            public void onTick(long millisUntilFinished) 
            {
                vreme.setText("" + formatTime(millisUntilFinished));
            }

            public void onFinish() 
            {

            }
        }.start();
    }

    public class MyCount extends CountDownTimer {
         public MyCount(long millisInFuture, long countDownInterval) {
             super(millisInFuture, countDownInterval);
         }

         public void onFinish() {

         }
         public void onTick(long millisUntilFinished) {
             vreme.setText("" + millisUntilFinished / 1000);
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:05:01.343

您正在寻找的信息似乎无法从 CountDownTimer 获得。如果您不需要非常精确的时间，那么您可以将字符串从 vreme 中拉出。

假设您想要比这更精确，我建议您在计时器启动时保存一个时间戳，然后在您需要知道已经过去了多少时间时获取该时间戳与当前时间之间的差异。根据您的需要查看[uptimeMillis()](http://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis%28%29)或[elapsedRealtime() 。](http://developer.android.com/reference/android/os/SystemClock.html#elapsedRealtime%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:53:29.173

好的，我自己回答。这就是我所做的。在我的第一个活动中，我完成了原始帖子中的所有内容，并且我在 MyCount 方法中添加了这个，就在 vreme.setText .... 下方：

```
currentTime = millisUntilFinished; 
```

之前我在我的活动范围内声明：

```
long currentTime; 
```

之后，在我的 onClickListener 按钮上，我这样做了：

```
Intent i = new Intent(Game1.this, Game2.class);
                i.putExtra("timeCode", currentTime);
                startActivity(i); 
```

之后在我的 Game2 类的 onCreate 方法中（也声明了 long 变量）：

```
Bundle extras = getIntent().getExtras(); 
        if(extras !=null) {
           currentTime = extras.getLong("timeCode");
        } 
```

然后这个（它与 Game1 类中的代码基本相同，只有一个变化，我传递的变量而不是 240000 值）：

```
new MyCount(currentTime, 1000) 
    {
        // Updates the text on your "scoreboard" every second
        public void onTick(long millisUntilFinished) 
        {
            vreme.setText("" + formatTime(millisUntilFinished));
        }

        public void onFinish() 
        {

        }
    }.start();
}

public class MyCount extends CountDownTimer {
     public MyCount(long millisInFuture, long countDownInterval) {
         super(millisInFuture, countDownInterval);
     }

     public void onFinish() {

     }
     public void onTick(long millisUntilFinished) {
         vreme.setText("" + millisUntilFinished / 1000);
     } 
```

它就像一个魅力！

# r - 在R中对不平衡面板数据进行几个横截面回归

> ID：16203379
> 
> 赞同：1
> 
> 时间：2013-04-24T22:32:46.707
> 
> 标签：r, plyr, reshape

我有一个不平衡的面板数据集。以下数据将用于说明：

```
Id <- c(rep(1:4,3),rep(5,2))
Id <- Id[order(Id)]
Year <- c(rep(2000:2002,4),c(2000,2002))

z1 <- rnorm(14)
z2 <- rnorm(14)
z3 <- rnorm(14)
z4 <- rnorm(14)

CORR <- rbind(c(1,0.6,0.5,0.2),c(0.6,1,0.7,0.3),c(0.5,0.7,1,0.4),c(0.2,0.3,0.4,1))
CholCORR <- chol(CORR)
DataTest <- as.data.frame(cbind(z1,z2,z3,z4)%*%CholCORR)
names(DataTest)<-c("y","x1","x2","x3")
DataTest <- cbind(Id, Year, DataTest)
DataTest

   Id Year          y         x1         x2         x3
1   1 2000 -0.7463355 -1.1920928 -1.2358912 -0.2527170
2   1 2001 -0.3475260 -0.1729497 -0.6252036  0.4366446
3   1 2002  0.6815678  0.1775869  0.2860103  0.8479373
4   2 2000  0.7927199  1.2830142  1.7018747  2.4475020
5   2 2001  0.5157535  0.4365100  1.1512340  1.0882581
6   2 2002 -1.2806121  0.3392759  0.5781835  0.2829615
7   3 2000  1.8741119  0.3904028  0.7984584 -1.7015025
8   3 2001 -0.4799960  0.6397883  0.4719150  0.8601328
9   3 2002 -2.2031991  0.3789198 -0.1143526  0.6771387
10  4 2000 -1.0634857 -0.6171644 -0.5732400  0.7718195
11  4 2001  0.3266059 -0.6882776 -0.2013544 -0.7242561
12  4 2002  0.2921222 -0.5149802  0.6180026 -0.4417939
13  5 2000 -2.2447755 -1.3328675 -1.6370130  0.4537451
14  5 2002 -0.9959034 -0.5958327 -0.3408927  0.2162799 
```

我想为每年做一个横截面线性回归（3 个回归）并保存估计的系数，但由于面板不平衡（`Id`5 缺少 2001 年的观察`Year`）这一事实而变得复杂，因为我想估计以下与`lag`和的动态公式`diff`：

```
formula(diff(y) ~ lag(x1) + x2 + x3) 
```

我曾想过使用`plm`、`reshape`或包，但是当我想使用我的不平衡面板`plyr`时，我找不到有效的方法。`lag``diff`

谢谢，

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T14:56:47.607

我找到了一个非常有效的解决方案。它使用`split`and`lapply`如上所述`statquant`，但也使用`plm`包来计算不平衡面板数据集的差异。

```
library(plm)

Id <- c(rep(1:4,3),rep(5,2))
Id <- Id[order(Id)]
Year <- c(rep(2000:2002,4),c(2000,2002))

z1 <- rnorm(14)
z2 <- rnorm(14)
z3 <- rnorm(14)
z4 <- rnorm(14)

CORR <- rbind(c(1,0.6,0.5,0.2),c(0.6,1,0.7,0.3),c(0.5,0.7,1,0.4),c(0.2,0.3,0.4,1))
CholCORR <- chol(CORR)
DataTest <- as.data.frame(cbind(z1,z2,z3,z4)%*%CholCORR)
names(DataTest)<-c("y","x1","x2","x3")
DataTest <- cbind(Id, Year, DataTest)
DataTest

       Id Year          y         x1         x2          x3   
1-2000  1 2000 -0.3837477  0.3065426  1.0646871  0.23757223   
1-2001  1 2001  1.2804333 -0.2015468 -0.2769726 -0.63032551  
1-2002  1 2002 -0.3242049 -1.3518821 -0.4720256  0.08556161 
2-2000  2 2000 -0.3298273 -0.4354473  0.3588493  0.80121465        
2-2001  2 2001 -0.5556866  1.1987959  1.6196555  1.28593473 
2-2002  2 2002  0.2861269  0.2921481  1.1051309  1.66204274  
3-2000  3 2000  0.9224208  0.4255198  0.8947040  1.11784735         
3-2001  3 2001 -1.1052755 -1.7078627 -1.9503432 -2.82343057 
3-2002  3 2002 -2.3020849 -0.8078460 -0.2692165  0.64940791 
4-2000  4 2000  2.5565427  1.7034472  2.2688046  1.71329610         
4-2001  4 2001  0.7015629  0.8518173 -0.2490498  0.70293713 
4-2002  4 2002  0.9454791  0.8830710  0.7355299  0.51836849  
5-2000  5 2000  0.4867604  0.3301825  0.7929939  0.55197991        
5-2002  5 2002 -0.5859263 -0.1164737  0.5831942 -0.03307241 

pDataTest <- pdata.frame(DataTest, index = c('Id','Year'))

pDataTest$yDiff <- diff(pDataTest$y)
pDataTest

       Id Year          y         x1         x2          x3      yDiff
1-2000  1 2000 -0.3837477  0.3065426  1.0646871  0.23757223         NA
1-2001  1 2001  1.2804333 -0.2015468 -0.2769726 -0.63032551  1.6641810
1-2002  1 2002 -0.3242049 -1.3518821 -0.4720256  0.08556161 -1.6046382
2-2000  2 2000 -0.3298273 -0.4354473  0.3588493  0.80121465         NA
2-2001  2 2001 -0.5556866  1.1987959  1.6196555  1.28593473 -0.2258592
2-2002  2 2002  0.2861269  0.2921481  1.1051309  1.66204274  0.8418135
3-2000  3 2000  0.9224208  0.4255198  0.8947040  1.11784735         NA
3-2001  3 2001 -1.1052755 -1.7078627 -1.9503432 -2.82343057 -2.0276963
3-2002  3 2002 -2.3020849 -0.8078460 -0.2692165  0.64940791 -1.1968093
4-2000  4 2000  2.5565427  1.7034472  2.2688046  1.71329610         NA
4-2001  4 2001  0.7015629  0.8518173 -0.2490498  0.70293713 -1.8549798
4-2002  4 2002  0.9454791  0.8830710  0.7355299  0.51836849  0.2439162
5-2000  5 2000  0.4867604  0.3301825  0.7929939  0.55197991         NA
5-2002  5 2002 -0.5859263 -0.1164737  0.5831942 -0.03307241         NA

Temp <-split(pDataTest,'Year')

MyFormula <- formula(yDiff ~ lag(x1) + x2 + x3)
Fit <- lapply(Temp[-1], lm, formula=MyFormula)
Fit

$`2001`

Call:
FUN(formula = ..1, data = X[[1L]])

Coefficients:
(Intercept)      lag(x1)           x2           x3  
      15.27       -52.88        -1.53        39.17  

$`2002`

Call:
FUN(formula = ..1, data = X[[2L]])

Coefficients:
(Intercept)      lag(x1)           x2           x3  
    -0.8738       0.1038       1.2805       0.1626 
```

# android - 将图像上传到android时出错

> ID：16203380
> 
> 赞同：0
> 
> 时间：2013-04-24T22:33:02.317
> 
> 标签：android, json, image, upload, base64

我正在尝试使用 JSON+Base64 将图像从 android 上传到服务器。这在我使用模拟器时有效。但是当我使用手机时，我的图像丢失了..请帮助

我无法发布图片，请在此处查看图片：http: [//i.upanh.com/rtnezb](http://i.upanh.com/rtnezb)和 [http://i.upanh.com/rtneqi](http://i.upanh.com/rtneqi)

这是我的代码：

```
photo = BitmapFactory.decodeResource(getResources(), R.drawable.nocamera);
ByteArrayOutputStream baos = new ByteArrayOutputStream();       
photo.compress(Bitmap.CompressFormat.PNG, 100, baos);   
imageInByte = baos.toByteArray();
ImageBase64=Base64.encodeBytes(imageupdate); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T01:39:11.500

尝试使用 Mutipart 实体上传图像文件。哟必须下载“httpmime-4.2.3.jar”库，这是我的一个项目中完美运行的示例代码。我希望这可以帮助你。

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
    InputStream is = null;
    String json = "";
    JSONObject jObj;

    try {
        HttpPost httpPost = new HttpPost(url);
        MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        File img = new File("local_image_path_here");
        entity.addPart("param_name_here", new FileBody(img));

        httpPost.setEntity(entity);

        HttpResponse httpResponse = httpClient.execute(httpPost);

        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } 
    catch (Exception e) {
        e.printStackTrace();
    } 
```

# java - 对象数组导致 NullPointerException Java

> ID：16203386
> 
> 赞同：0
> 
> 时间：2013-04-24T22:33:40.390
> 
> 标签：java, nullpointerexception

我不知道为什么，但这行代码给出了`NullPointerException`. 我搜索了创建用户 obj 的数组。在Java中，再次但是，我找不到任何问题。

```
private State[] states;
.    
.
.
private void initializeStates( )
        {
            states = new State[ stateNames.length ]; // Throws NullPointerException

        for( int i = 0; i < stateNames.length; i++ )
        {
            states[i] = new State();
            states[i].setName( stateNames[i] );
            states[i].setColor( stateColors.getColor() );
        }
    } // End of initializeStates() 
```

这是课程：

```
public class State
{
    private String stateName;
    private String color;
    private boolean isStartState;
    private boolean isFinalState;

        State()
        {
            stateName = new String(); // Can this line cause nullPtrException?
            color = new String(); // Can this line cause nullPtrException?
            isStartState = false;
            isFinalState = false;
        }

        public void setName( String name ){ stateName = name; }
        public void setColor( String clr ) {   color = clr; }
        public void makeStart( ) {  isStartState = true; }
        public void makeFinal( ) {  isFinalState = true; }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T22:36:22.270

如果此行抛出异常：

```
states = new State[ stateNames.length ]; // Throws NullPointerException 
```

...那么问题`stateNames`是`null`。你没有像其他任何代码一样做到这一点。

您还没有显示`stateNames`声明或初始化的位置，但这是您接下来应该查看的位置。

顺便说一句，这个：

```
stateName = new String(); 
```

...无缘无故地效率低下。只需使用空字符串文字：

```
stateName = ""; 
```

（或者更好的是，将适当的初始值作为构造函数参数。）

# android - android Hierarchy Viewer 如何测量绘制时间？

> ID：16203388
> 
> 赞同：2
> 
> 时间：2013-04-24T22:33:46.940
> 
> 标签：android, android-sdk-tools

问题是关于 android [Hierarchy Viewer](http://developer.android.com/tools/debugging/debugging-ui.html#HierarchyViewer)呈现的结果的来源。不是`Draw`时间意味着什么，而是该工具如何从系统中提取这个时间。我需要了解绝对时间是否有意义，或者仅用于与屏幕上的其他视图进行相对比较是否公平。[一些实验](https://stackoverflow.com/questions/6513716/wrong-draw-time-in-the-hierarchy-viewer)表明这并不简单。

# android - 为什么在 View 上验证不起作用但 postInvalidate 有效

> ID：16203390
> 
> 赞同：1
> 
> 时间：2013-04-24T22:33:55.047
> 
> 标签：android

我有一张卡片游戏，其中人选择卡片并拖动（通过翻译动画完成），然后当放手时它移动到屏幕中心，那里有一个 imageView 占位符。在动画结束时，我将图像视图设置为该卡，并且可以在屏幕上的每个视图上无效。我不明白的是，当我调用无效时，卡片看起来像是留下了一些痕迹（来自翻译动画的阴影）。当我调用 postInvalidate 时，它​​会正确绘制。这是为什么？？

动画结束代码：

```
@Override
public void onAnimationEnd(Animation arg0) {

    if(card == null){
        MyApplication.SWERR(null);
        busy = false;
    }
    card.getCardImage().setVisibility(View.INVISIBLE);
    Drawable drawable = card.getCardSuitNumber().getDrawable(mContext);
    finalDestIV.setBackgroundDrawable(drawable);
    finalDestIV.setVisibility(View.VISIBLE);
    invalidateAll();

    PlayerStatus p = mGameMonitor.getPlayerStatusFromPlayerEnum(GameConstants.PLAYERS.P1);
    p.handleCardChosen(card);
    cardReleased = false;
    p.setPlayerLock(false);
    card = null;

} 
```

InvalidateAll 方法

```
private void invalidateAll(){
    rootLayout.postInvalidate();
    for (int i=0; i<rootLayout.getChildCount();i++){
        View v = rootLayout.getChildAt(i);
        v.postInvalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T09:29:42.613

新手Android开发者的典型问题。请查看[无效](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)方法的描述。根据谷歌文档：

> 使整个视图无效。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。这必须从 UI 线程调用。要从非 UI 线程调用，请调用 postInvalidate()。

所以，我想**onAnimationEnd**是从非 UI 线程（可能是动画线程）调用的。我认为如果您避免 API 政策，它可能会导致意外行为，并且可能在不同的 Android 版本之间有所不同。从非 UI 线程调用 invalidate 可能会中断 Android 系统中的某些 UI 操作（或中断某些逻辑），从而产生一些不当行为。

也看这里：[postInvalidate() 做什么？](https://stackoverflow.com/questions/5521596/what-does-postinvalidate-do)

# python - Python中的参数错误 - 文字冒险游戏

> ID：16203394
> 
> 赞同：-1
> 
> 时间：2013-04-24T22:34:24.017
> 
> 标签：python, class, import, init

尝试在 Python 中使用游戏引擎进行文本冒险。无论如何，我不断收到此错误消息。`TypeError: module.__init__() takes at most 2 arguments (3 given)`

这是我的代码：

```
from engine import game
from engine import event
from engine import place

class TextAdventureGame(game):
    def __init__(self):
        super(TextAdventureGame, self).__init__()
        self.introduction = ('''Welcome to Can You Escape text adventure game.
You wake up in a dark room and you have no idea where you are.''') 
```

为什么会出现这个错误？

`class TextAdventureGame(game): TypeError: module.__init__() takes at most 2 arguments (3 given)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:52:05.383

`game`是一个模块。您应该改用一个类作为基类。

```
>>> import os
>>> class C(os):
...   pass
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: module.__init__() takes at most 2 arguments (3 given) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T01:30:10.453

这个问题以一种很难回答的方式提出，但从它的外观来看，我会说错误就在这里：

```
class TextAdventureGame(game): 
```

它说`module.__init__()`, not `TextAdventureGame.__init__()`，这让我认为这`game`是一个以奇怪方式使用的模块。但是，如果不了解您的代码、代码是什么`game`或查看堆栈跟踪，我们真的无能为力。

# php - 如何使用可选上传文件提交表单数据

> ID：16203396
> 
> 赞同：0
> 
> 时间：2013-04-24T22:34:28.670
> 
> 标签：php, forms, file, upload

如何使用可选的上传文件提交表单数据。我的意思是，我可以将表单数据与上传的文件一起提交吗？但我想让上传文件成为可选的。这是我的代码：

```
 <?php
define ("MAX_SIZE","5000");
 $errors=0;

if(($_SERVER["REQUEST_METHOD"] == "POST") && isset($_FILES["file"]["size"]) && ($_FILES["file"]["size"] > 0))
{

    $image =$_FILES["file"]["name"];
    $uploadedfile = $_FILES['file']['tmp_name'];

    if ($image)
    {

        $filename = stripslashes($_FILES['file']['name']);

        $extension = getExtension($filename);
        $extension = strtolower($extension);

        if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif"))
        {

            $change='<div class="msgdiv">Unknown Image extension </div> ';
            $errors=1;
        }
        else
        {

            $size=filesize($_FILES['file']['tmp_name']);

            if ($size > MAX_SIZE*1024)
            {
                $change='<div class="msgdiv">You have exceeded the size limit!</div> ';
                $errors=1;
            }

            if($extension=="jpg" || $extension=="jpeg" )
            {
                $uploadedfile = $_FILES['file']['tmp_name'];
                $src = imagecreatefromjpeg($uploadedfile);

            }
            else if($extension=="png")
            {
                $uploadedfile = $_FILES['file']['tmp_name'];
                $src = imagecreatefrompng($uploadedfile);

            }
            else
            {
                $src = imagecreatefromgif($uploadedfile);
            }

            echo $scr;

            list($width,$height)=getimagesize($uploadedfile);

            $newwidth=500;
            $newheight=($height/$width)*$newwidth;
            $tmp=imagecreatetruecolor($newwidth,$newheight);

            $newwidth1=300;
            $newheight1=($height/$width)*$newwidth1;
            $tmp1=imagecreatetruecolor($newwidth1,$newheight1);
            imagealphablending($tmp1, false);
            imagesavealpha($tmp1, true);
            imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

            imagecopyresampled($tmp1,$src,0,0,0,0,$newwidth1,$newheight1,$width,$height);

            $image_name=time().'_'.$_FILES['file']['name'];
            $filename = "images/". $image_name;

            $filename1 = "images/small_". $image_name;
            $uid=$_SESSION['uid'];

            imagejpeg($tmp,$filename,100);

            imagejpeg($tmp1,$filename1,100);

            imagedestroy($src);
            imagedestroy($tmp);
            imagedestroy($tmp1);
        }}

}

if(isset($_POST['Submit']) && !$errors )
{
    $category_group= $_POST['category_group'];
    $title=$_POST['title'];
    $details=$_POST['details'];
    $ad_keywords=$_POST['ad_keywords'];
    $category_state=$_POST['category_state'];
    $category_city=$_POST['category_city'];
    $address=$_POST['address'];
    $telephone=$_POST['telephone'];
    $email=$_POST['email'];
    $website=$_POST['website_link'];
    $price=$_POST['price'];
    $filename= ($_FILES["file"]["size"] > 0) ? $filename : '';
    $filename1= ($_FILES["file"]["size"] > 0) ? $filename1 : '';

    $url=time().'-'. createUrl($title);
    if(!$category_group || !category_city || !$title || !$details || !$category_state ){
        echo "enter state and city name";
    }else{

        try{
        $sth = $dbh->prepare("
                           INSERT INTO
                                    advertisement(user_id,ad_image_big,ad_image_small,ad_cat_group,ad_title,ad_details,ad_state,ad_city,ad_address,ad_telephone,ad_email,ad_website,ad_price,ad_slug,ad_keywords)
                           VALUES(:field1,:field2,:field3,:field4,:field5,:field6,:field7,:field8,:field9,:field10,:field11,:field12,:field13,:field14,:field15)
                            ");
        $sth->execute(array(':field1' => $uid, ':field2' => $filename, ':field3' => $filename1, ':field4' => $category_group, ':field5' => $title, ':field6' => $details, ':field7' => $category_state,':field8'=> $category_city, ':field9' => $address, ':field10' => $telephone,':field11'=> $email,':field12'=> $website, ':field13' => $price, ':field14' => $url , ':field15'=> $ad_keywords));
        }catch (PDOException $ex){

            echo "An Error occured while inserting data to database";
            some_logging_function($ex->getMessage());
        }

        header('location:success.php');
    }
}
?> 
```

每当我尝试在没有上传文件的情况下提交表单时，我都会收到此错误：

> “将数据插入数据库时​​发生错误”

这是在捕获部分。如果我上传文件，我会收到一条成功消息，没有任何错误。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T14:42:38.883

来自 PHP 文档 ( [http://php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php) )，示例 #3通过遍历每个文件来**上传文件数组**几乎可以满足您的需要（以防万一你有一个文件数组）然后*if 语句*检查文件是否存在。以下代码来自 PHP 文档：

```
 foreach ($_FILES["pictures"]["error"] as $key => $error) {
        if ($error == UPLOAD_ERR_OK) {
          $tmp_name = $_FILES["pictures"]["tmp_name"][$key];
          $name = $_FILES["pictures"]["name"][$key];
          move_uploaded_file($tmp_name, "data/$name");
        }
    } 
```

如果没有文件，代码只是跳过上传并继续下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:45:27.317

这是我不久前制作的代码......有同样的问题:)

表格本身：

```
 <form action="index.php" method="post" enctype='multipart/form-data'>
            <input class="header_input" type="text" name="header" />
            <br/><span class="input_headers"><p>Content</p></span>
            <textarea class="textarea_input" rows="10" cols="30" name="content">
            </textarea><br />
            Select File: <input type='file' name='filename' size='10' /><br />
            <input type="submit" class="submit" />
            </form> 
```

尽管它不检查，是否在“标题”和“内容”部分输入了某些内容，因此请尝试解决该问题：

```
if (isset($_POST['header']) && isset($_POST['content'])) {

      $header = mysql_real_escape_string(htmlentities($_POST['header']));
      $content = mysql_real_escape_string(nl2br(htmlentities($_POST['content'])));

      $sql = mysqli_query($con,"INSERT INTO posts (Header, Content) VALUES 
        ('{$header}','{$content}')");
} 
```

这会上传图片，如果有的话：

```
if (isset($_FILES['filename']['name'])) {

     $name = htmlentities($_FILES['filename']['name']);

      $allowedExts = array("gif", "jpeg", "jpg", "png");

      $extension = end(explode(".", $_FILES['filename']['name']));

        if ((($_FILES['filename']['type'] == "image/gif")
        || ($_FILES['filename']['type'] == "image/jpeg")
        || ($_FILES['filename']['type'] == "image/jpg")
        || ($_FILES['filename']['type'] == "image/pjpeg")
        || ($_FILES['filename']['type'] == "image/x-png")
        || ($_FILES['filename']['type'] == "image/png"))
        && ($_FILES['filename']['type'] < 20000)
        && in_array($extension, $allowedExts)) {

            $result = mysqli_query($con,"SELECT * FROM posts WHERE PID=(SELECT max(PID) FROM posts)");

            $row = mysqli_fetch_array($result);

            $id = $row['PID'];

            $new_name = $id . "_" . "000" . ".jpg"; 

            if (file_exists("images/" . $new_name)) {

                $new_name_ex = $id . "_" . "001" . ".jpg";

                move_uploaded_file($_FILES['filename']['tmp_name'],"images/" . $new_name_ex);

                 $sql = mysqli_query($con,"UPDATE posts SET Images='{$new_name_ex}' WHERE PID='{$id}'");
            } else {

      move_uploaded_file($_FILES['filename']['tmp_name'],"images/" . $new_name);

      $sql = mysqli_query($con,"UPDATE posts SET Images='{$new_name}' WHERE PID='{$id}'");
    }
}
} 
```

希望有帮助:)我是PHP新手，所以也许有一种方法可以使所有这些代码更简单，尽管我希望它能回答你的问题

# apache - 使用 Joomla 和 Xmap 重写 sitemap.xml 的 URL

> ID：16203403
> 
> 赞同：0
> 
> 时间：2013-04-24T22:35:28.867
> 
> 标签：apache, mod-rewrite, joomla, sitemap

我正在使用 Xmap 为我的 Joomla 网站创建 XML 站点地图。我可以通过 index.php?option=com_xmap&view=xml&tmpl=component&id=1 访问站点地图

我想使用 Apache 的 URL 重写来通过“sitemap.xml”提供它，所以我尝试在 .htaccess 中使用此代码：

```
RewriteEngine On
RewriteRule ^sitemap\.xml$ index.php?option=com_xmap&view=xml&tmpl=component&id=1 [L] 
```

但是，这给了我一条错误消息：

> 错误 500 - 未找到视图 [名称、类型、前缀]：xml、xml、xmapView

我需要做什么才能使它正常工作？

（如果有区别，则该站点是从子目录运行的，而不是域的根目录）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T12:49:37.417

我猜你在 Joomla 全局配置中使用了为 URL 添加后缀。如果是这种情况，请将以下代码添加到`.htaccess`文件中：

```
RewriteCond %{REQUEST_URI} ^/sitemap.xml

RewriteRule .* /index.php?option=com_xmap&id=1&view=xml&format=html [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:39:41.880

您忘记了 QSA 标签：

```
RewriteEngine On
RewriteRule ^sitemap\.xml$ index.php?option=com_xmap&view=xml&tmpl=component&id=1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-01T19:28:42.843

为了记录，不使用 Rewrite 完成相同结果的另一种方法是在站点的根目录中创建一个 sitemap.xml 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<sitemap>
  <loc>http://www.domain.com/index.php?option=com_xmap&amp;view=xml&amp;tmpl=component&amp;id=1</loc>
</sitemap>

</sitemapindex> 
```

行内的具体内容`<loc> </loc>`因站点而异，请从后端 > 组件 > Xmap > XML 站点地图链接获取

祝你好运！

# c# - 如何在 WPF 中创建一个只接受数字和一个只接受字母的文本框？

> ID：16203411
> 
> 赞同：4
> 
> 时间：2013-04-24T22:36:08.603
> 
> 标签：c#, wpf, winforms, xaml, textbox

我只想知道如何创建一个只允许用户输入数字的文本框，一个允许数字和句号的文本框，以及一个只允许用户输入字母的文本框？

我将此代码用于 Windows 窗体：

```
private void YearText_KeyPress(object sender, KeyPressEventArgs e) //Textbox only accepts numbers
{
    char ch = e.KeyChar;
    if (!Char.IsDigit(ch) && ch != 8 && ch != 13)
    {
        e.Handled = true;
    }
}

private void NameText_KeyPress(object sender, KeyPressEventArgs e) //Textbox only accepts letters
{
    if (!char.IsLetter(e.KeyChar) && !char.IsControl(e.KeyChar) && !char.IsWhiteSpace(e.KeyChar))
        e.Handled = true;
}

private void ResellPriceText_KeyPress(object sender, KeyPressEventArgs e) //Textbox that allows only numbers and fullstops
{
    if (!char.IsControl(e.KeyChar)
        && !char.IsDigit(e.KeyChar)
        && e.KeyChar != '.')
    {
        e.Handled = true;
    }

    // only allow one decimal point
    if (e.KeyChar == '.'
        && (sender as TextBox).Text.IndexOf('.') > -1)
    {
        e.Handled = true;
    }
} 
```

但我很快发现这不能用 WPF 完成。我不关心诸如粘贴字母/数字之类的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:43:15.253

这可以在 WPF 中完成，实际上您甚至可以使用非常相似的基于事件处理程序的代码来完成，但是，不要这样 - 这是一种糟糕的用户体验。这将防止用户在意外包含周围空格时进行复制和粘贴，并防止输入科学数字，例如 100e3。

而是使用验证（在修剪后的输入上）并在验证失败时阻止用户继续。

# mysql - Codeigniter mysql加入不起作用

> ID：16203418
> 
> 赞同：0
> 
> 时间：2013-04-24T22:36:39.550
> 
> 标签：mysql, codeigniter

我有一个有 2 个表的数据库和一个搜索关键字，我如何加入这些表，在所有表中进行选择？

```
$this->db->select('*');
$this->db->from('tracks', 'genres');
$this->db->join('genres', 'genres.genreid = tracks.genre_id');

$this->db->or_where('tracks.title', $key);
$this->db->or_where('tracks.author', $key);
$this->db->or_where('genres.genreid', $key);
$this->db->order_by('tracks.rate', 'ASC');
$q = $this->db->get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:52:51.037

你必须有一张表在 from 和其余的在 join

$this->db->from('tracks');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:47:26.283

```
$this->db->select('*');
$this->db->from('tracks');
$this->db->join('genres', 'genres.genreid = tracks.genre_id');
$this->db->where('tracks.title', $key);
$this->db->or_where('tracks.author', $key);
$this->db->or_where('genres.genreid', $key);
$this->db->order_by('tracks.rate', 'ASC');
$q = $this->db->get(); 
```

这是使用它的正确方法。您在 FROM 子句中使用同一个表并 JOIN 这是问题。另一件事是您缺少 WHERE 子句并且仅使用或在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:04:10.083

使用 join 语句来完成 where 子句的工作也是值得的。如果您执行 join 然后 where 它选择表之间的所有连接，然后应用 where，但是在连接中使用 AND，则数据库要做的工作就更少了。

# ruby-on-rails - 我可以为我的业务逻辑创建自己的状态代码吗？

> ID：16203423
> 
> 赞同：1
> 
> 时间：2013-04-24T22:37:58.010
> 
> 标签：ruby-on-rails, passenger

因为有很多不是状态码的数字。我可以创建自己的状态码吗（例如：444）。我听说在部署在 phusion 乘客中的 Rails 应用程序中渲染我们自己的状态代码会给你 500？是不是真的。如果是这样，我们如何为业务逻辑目的创建自己的状态代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:39:31.653

如果您想要一个特定的状态代码，您只需添加到控制器操作中就是

```
render :status => 444 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T14:47:33.377

返回的状态代码应该在 Apache Web Server 接受的状态代码列表中。

# java - 更改按钮大小时更改字体大小

> ID：16203432
> 
> 赞同：0
> 
> 时间：2013-04-24T22:38:51.050
> 
> 标签：java, swing

更改按钮大小时，是否有任何方法可以自定义按钮上文本的字体大小？还是我必须`ComponentListener`为我的按钮类实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:44:11.717

您将需要一个侦听器才能知道何时更改按钮大小（idk 你的意思是什么但仍然如此），并且您可以通过使用更改字体大小，`setFont()`但是您仍然需要计算适当的大小等。改为使用 JTextArea查看[相关示例。](https://stackoverflow.com/questions/5943672/automatic-dynamic-expansion-contraction-of-jtextarea-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:44:25.417

是的，这是处理组件大小调整的标准方法，例如当布局管理器导致组件大小调整时。在`componentResized`你可以做的方法中：

```
float newSize = ...
myButton.setFont(myButton.getFont().deriveFont(newSize)); 
```

# c++ - XCode：如何为单个源文件添加预处理器定义？

> ID：16203441
> 
> 赞同：3
> 
> 时间：2013-04-24T22:40:04.100
> 
> 标签：c++, xcode, xcode4, c-preprocessor

我想为我的项目中的几个文件添加预处理器宏，但不是所有文件。它们是第 3 方来源，所以我不想编辑这些文件，以免出现新版本时出现合并维护的麻烦。它们碰巧会干扰项目中其他文件中使用的#defines。

XCode 4 可以只编译具有不同预处理器设置的某些文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:31:02.950

在目标的**Build Phases选项卡中，您可以在****Compile Sources**下拉列表下为单个文件设置编译器标志。[GCC](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)提供了很长的选项列表，但它们应该同样适用于 LLVM。

要为特定文件定义宏，例如`FOO`，将`-D FOO`标志添加到该文件旁边的“编译器标志”条目中。

要取消定义宏`FOO`，请添加标志`-U FOO`。

# variables - 如何使用 for 循环获取文件名然后使用它们？

> ID：16203445
> 
> 赞同：0
> 
> 时间：2013-04-24T22:40:41.120
> 
> 标签：variables, for-loop, batch-file, text-files

我有一个文件夹，其中包含文件 a.txt、b.txt 和 c.txt。我想使用for循环来获取这些文件的名称，将它们存储在一个变量中，然后将它们添加到另一个文本文件中。文本文件与我的 bat 文件位于同一文件中。是否有可能做到这一点？如果是这样，请告诉我，这些 for 循环让我很困惑......

我现在拥有的

```
 @echo on

  SET name=hey
  echo >text.txt

  for %F in (*.*) do (set name=@fname
  echo name >> text.txt) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:50:25.690

```
@Echo OFF

(For %%# in ("*.txt") do (
    Set "FileName=%%~n#"
    Call Echo %%FILENAME%%
))>"MyFilenames.txt"

Pause&Exit 
```

注意1：文件存储在“Filename” var中，但不是必需的，您可以直接将文件名写入文本文件。

注意 2：如果您想要通过文件进行递归循环，请使用 For 命令的 /R 开关。

注意 3：如果您还想要文件扩展名，请将其更改为：“%%~n#”，否则：“%%~nx#”

```
**UPDATE:** 
```

**替代脚本：**

```
@Echo OFF
For %%# in (*.txt) do (Echo %%~n#>> "MyFiles.txt")
Pause&Exit 
```

# c# - 单元测试失败后如何强制 Visual Studio 构建失败

> ID：16203446
> 
> 赞同：10
> 
> 时间：2013-04-24T22:40:45.633
> 
> 标签：c#, visual-studio-2012

目前，我正在使用 Visual Studio 2012 并在每次构建后自动执行单元测试。但是，如果单个单元测试失败，我要做的是使构建失败。以下步骤是我想要做的

1.  构建解决方案
2.  当 (1) 成功时，自动运行所有单元测试
3.  在第 2 步时，如果单元测试失败，则使构建失败

我可以执行 1 和 2（开箱即用），但不知道如何执行第 3 步。这是用于本地构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-08T02:15:32.260

您可以在项目文件中添加 Nunit 或任何框架执行作为 msbuild 任务。这是一个例子：

[http://sachabarbs.wordpress.com/2013/05/28/msbuild-and-nunit-a-simple-example/](http://sachabarbs.wordpress.com/2013/05/28/msbuild-and-nunit-a-simple-example/)

# c# - 从 c# 运行 powershell 最有效的方式在 Exchange Online 中创建多个邮件联系人

> ID：16203448
> 
> 赞同：0
> 
> 时间：2013-04-24T22:40:56.450
> 
> 标签：c#, powershell

我希望通过从 C# 运行 Powershell 命令在 Microsoft Online 的 GAL 中创建多个邮件联系人（外部联系人）。下面的代码可以运行，但速度很慢，运行 400 个邮件联系人大约需要 15-20 分钟。

```
foreach(EmailAdressVM emailAddressVM in emailList.emailAddresses1)
{
    //Create New MailContact.
    Pipeline pplNewMailContact = runspace.CreatePipeline();

    Command cmdNewMailContact = new Command("New-MailContact");
    cmdNewMailContact.Parameters.Add("Name", emailAddressVM.sExternalEmailAddress);
    cmdNewMailContact.Parameters.Add("Displayname", emailAddressVM.sFullName.Trim());
    cmdNewMailContact.Parameters.Add("Lastname", emailAddressVM.sLastName.Trim());
    cmdNewMailContact.Parameters.Add("Firstname", emailAddressVM.sFirstName.Trim());
    cmdNewMailContact.Parameters.Add("ExternalEmailAddress", emailAddressVM.sExternalEmailAddress.Trim());

    pplNewMailContact.Commands.Add(cmdNewMailContact);
    pplNewMailContact.Invoke();
    pplNewMailContact.Stop();
    pplNewMailContact.Dispose();
} 
```

我猜这很慢，因为我为每个添加的新邮件联系人创建了一个新管道，并且自从运行以来必须有一种更有效的方式来执行此操作......

```
import-csv <filename> | ForEach {
    new-mailcontact -name $_.emailaddress -displayname $_.FullName -lastname $_.lastname -firstname $_.firstname -externalemailaddress $_.emailaddress -alias $_.alias
} 
```

...快得多。

经过数小时的网络搜索后，我发现了一些参考资料，您可以在从 C# 运行 Powershell 命令时执行类似于使用 CSV 的操作，即将值列表（或数组）发送到命令（在本例中为“new-邮件联系人”命令）。但是，我还没有找到任何关于如何向命令发送多个值的好例子，我需要向“ *new-*邮件联系人”命令。

是否可以以与“import-csv”命令（使用常规 powershell 时）类似的方式发送列表（或数组），这会更快，还是有更好的方法？如果我使用 Powershell 3 而不是 1（就像我现在使用的那样），我会获得更好的性能吗？

请提供工作示例代码我 C#！

请注意，我无法将 CSV 文件保存到磁盘并从 CMD 执行 powershell，因为我没有对磁盘的写入权限，并且我认为我不能远程运行整个脚本（因为远程脚本可能在 Exchange Online 上被禁用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:49:56.063

我认为最大的原因是因为对于每个地址，您都在创建一个新的 Powershell 实例，并且您不是多线程的。

您的代码从上面看起来像这样：

```
Foreach email address{
    Declare a new Powershell process
    Add attributes to call later
    Start Powershell and pipe stuff in
    Close Powershell instance
} 
```

我认为您最好创建一次 Powershell 实例/管道，然后将每个对象发送到其中。更多沿线：

```
Create PS Pipe
    Foreach email address{
     PS.SendArguments(Email, Name, DN, etc.);
     } 
```

我现在还没有让某些东西工作或测试的环境，所以希望这至少能给你提供你需要的大部分东西......

# python - python替换大文件中的随机行

> ID：16203452
> 
> 赞同：0
> 
> 时间：2013-04-24T22:41:15.717
> 
> 标签：python

假设我有一个要替换第 n 行的大文件。我知道这个解决方案：

```
w = open('out','w')
for line in open('in','r'):
    w.write(replace_somehow(line))

os.remove('in')
os.rename('out','in') 
```

如果要在文件开头替换的行，我不想用多行重写整个文件。是否有任何适当的可能性直接替换第 n 行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T22:42:50.130

除非保证新行的长度与原始行的长度完全相同，否则无法重写整个文件。

* * *

一些文字处理器通过存储更改日志，或者在每个块的末尾有额外空间的大块列表，或者较小块的数据库，从而可以快速完成自动保存修改（只需附加到日志，或重写单个块，或进行数据库更新），但真正的“保存”按钮将重建整个文件并立即将其全部写入。

如果您自动保存的频率比用户手动保存的频率高得多，并且您的文件非常大，那么这样做是值得的。（请记住，在设计 Microsoft Word 时，100KB 确实很大……）

* * *

这指向了正确的答案。如果您有 5GB 的数据，并且需要更改其中的第 N 条记录，则不应使用定义为没有索引的可变长度记录序列的格式。这就是文本文件。对您的情况有意义的最简单格式是一系列固定大小的记录，但如果您需要插入或删除记录以及就地更改它们，它与文本文件一样糟糕。因此，首先考虑您的要求，然后选择数据结构。

如果您需要处理一些更有限的格式（如文本文件）以与其他程序交换，那很好。在所有更改之后，您将不得不重写整个文件一次以“导出”，但您不必在每次进行任何更改时都这样做。

* * *

如果所有行的长度完全相同，则可以按以下方式执行此操作：

```
with open('myfile.txt', 'rb+') as f:
    f.seek(FIXED_LINE_LENGTH * line_number)
    f.write(new_line) 
```

请注意，重要的*是字节*长度，而不是*字符*长度。您必须以二进制模式打开文件才能以这种方式使用它。

* * *

如果您不知道要替换的行号，则需要以下内容：

```
with open('myfile.txt', 'rb+') as f:
    for line_number, line in enumerate(f):
        if is_the_right_line(line):
            f.seek(FIXED_LINE_LENGTH * line_number)
            f.write(new_line) 
```

* * *

如果您的行不需要都具有相同的长度，但是您可以绝对肯定这一新行与旧行的长度相同，您可以这样做：

```
with open('myfile.txt', 'rb+') as f:
    last_pos = 0
    for line_number, line in enumerate(f):
        if is_the_right_line(line):
            f.seek(last_pos)
            f.write(new_line)
        last_pos = f.tell() 
```

# windows - Delphi DLL 问题 - 收到错误的整数值和访问冲突问题

> ID：16203454
> 
> 赞同：2
> 
> 时间：2013-04-24T22:41:38.043
> 
> 标签：windows, delphi, dll

我在处理 Delphi 7 中的 DLL 时遇到了麻烦。我有两个问题：

1) 该过程采用一个整数参数 - 但 dll 接收的值与我传递的值不同。

2) 调用 dll 的应用程序在函数完成后因访问冲突而崩溃。

这是我的dll代码：

```
library apmDLL;

uses
  Classes, Messages, Windows, Dialogs, sysutils ;

const

  WM_MY_MESSAGE = WM_USER + 1;

procedure sendtoACRPM (functionKey : integer); stdcall;
  begin
    showmessage('You sent -  '+inttostr(functionKey));
    showmessage('Finished Now');
  end;

exports sendtoACRPM;

end. 
```

所以当我用下面的代码调用它时，我得到：

'发送 - 1'

“您发送了 - 1636532”

'现在完成'

然后调用应用程序因访问冲突而崩溃。

调用应用程序如下所示：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, shlobj, shellapi;

const

  WM_MY_MESSAGE = WM_USER + 1;

type
  TForm1 = class(TForm)
    Edit1: TEdit;
    Button2: TButton;
    procedure Button2Click(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  procedure sendtoACRPM (functionKey : integer) ; external 'apmDLL.dll';

implementation

{$R *.dfm}

procedure TForm1.Button2Click(Sender: TObject);
var
  myInt: integer;
begin
  myInt := strtoint(edit1.text);
  showmessage('Sending - ' + inttostr(myInt));
  sendtoACRPM(myInt);
end;

end. 
```

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:45:35.713

您需要`stdcall`在 DLL 和调用代码声明中。您只在 DLL 中拥有它。

调用约定需要双方匹配。:-)

```
procedure sendtoACRPM (functionKey : integer); stdcall; external 'apmDLL.dll'; 
```

您应该使用标准的 Windows[`MessageBox`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)而不是`ShowMessage`，这样 DLL 也可以在非 Delphi 应用程序中使用。

# ruby-on-rails - 对多维数组进行排序，降序

> ID：16203455
> 
> 赞同：1
> 
> 时间：2013-04-24T22:41:39.000
> 
> 标签：ruby-on-rails, ruby, arrays, multidimensional-array

我的红宝石中有一个多维数组，如下所示：

```
arr= [{"10.0.1.50", "4"},
      {"10.0.1.51", "10"},
      {"10.0.1.48", "7"}] 
```

我想对它进行排序，结果应该是：

```
result= [{"10.0.1.51", "10"},
         {"10.0.1.50", "4"},
         {"10.0.1.48", "7"}] 
```

我基本上是在第一列 10.0.1.X 上进行排序。所以它是根据 X 排序的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:48:58.833

语法不是 Ruby，结果有点模棱两可，但我想你想要一些类似的东西

```
arr.sort_by { |(x,_)| x.split(".").map(&:to_i) }.reverse! 
```

# html - 围绕字体居中内容区域？

> ID：16203456
> 
> 赞同：0
> 
> 时间：2013-04-24T22:41:42.083
> 
> 标签：html, css, fonts

我注意到我的字体周围的内容区域没有居中。这会导致问题，因为我想为标题应用背景，但不居中时看起来真的很难看。如果没有在它周围放置另一个 div 包装器，有没有更好的解决方案可以解决这个问题？另外，有谁知道为什么某些字体会出现此问题？

这是我的 CSS 代码。

```
header h1 { 
    font-family: komika_axisregular;
    font-size: 10em;
    color: #f7f7f8;
    margin: 100px 0 50px 0;
    line-height: 0.7em;
    background-color: rgba(46, 52, 54, 0.5);
} 
```

这是问题字体的示例，然后是好字体的示例。两者都使用完全相同的 CSS 代码。
![问题字体](https://i.stack.imgur.com/A01Km.png) ![好字体](https://i.stack.imgur.com/kDsFn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:56:55.043

在字体周围放置一个`<span>`标签并尝试背景颜色，这在不同的浏览器中可能看起来不同，你总是应该构建你的 html 标准，这样事情就不会发生，这是因为字体渲染甚至用于嵌入的字体格式的差异。页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:30:49.420

人们的反应都没有真正对我的情况有所帮助。我这样做遇到这么多麻烦的主要原因是因为我想完全控制半透明背景的宽度和高度。出于美学原因，我不希望背景成为标题的宽度。这是我的最终结果：

**HTML**

```
<body>
    <h1>
        <div id="bg-wrap">
            <div id="name-bg"></div> 
        </div>
        <a href="index.html">BRADLEY TSE</a>
     </h1>
</body> 
```

**CSS**

h1风格

```
header h1 {
    font-family: bebas_neueregular;
    font-size: 16em;
    color: #ffb477;
    margin: 110px 0 40px 0;
} 
```

由于 a 元素紧随其后，我需要更改 z-index 以使其显示在背景之上。这可能不是正确的方法，但我现在不想再搞乱元素的定位了。

```
h1 a {
    position: relative;
    z-index: 1000;
} 
```

这用于将#name-bg 元素正确定位在屏幕中央。

```
#bg-wrap {
    position: absolute; 
    right:50%;
} 
```

在我的名字上覆盖了一个半透明的背景。

```
#name-bg {
    position: relative;
    right: -50%;
    height: 110px;
    width: 620px;
    margin-top: 24px;
    background-color: rgba(46, 52, 54, 0.8);
    z-index: 1;
} 
```

# linq - 使用 EF 5 进行查询，关联 VS Linq 加入

> ID：16203459
> 
> 赞同：1
> 
> 时间：2013-04-24T22:42:09.650
> 
> 标签：linq, entity-framework, join, ef-code-first, associations

我对使用 EF 5 进行查询的“最佳实践”方式很感兴趣。

例如，让我们有 2 个表：Movie 和 Genre，它们具有多对多关系，因此有第三个表 GenreMovie，其中 MovieId 和 GenreId 作为 FK。

这意味着一种类型有几部电影，但一部电影也可以是多种类型的混合。

在客户端有 2 个网格，左侧为流派列表，右侧为电影列表。

对于选定的流派，电影列表不仅会显示该流派的电影，还会显示所有电影，其中将检查属于该流派的电影。

此选择可以通过两种方式完成，具有相同的结果。

int 流派 ID = 1; （选择了 id = 1 的流派）

1.  使用 EF 关联

    ```
    var q = db.Movies
          .Select(m => new
          {
              MovieId = m.MovieId,
              Title = m.Title,
              Selected = m.GenreMovies.Where(gm => gm.GenreId == genreId).Count() > 0,
          }); 
    ```

2.  使用 Linq 连接

    ```
    var q = from m in db.Movies
             join gm in db.GenreMovies.Where(gm => gm.GenreId == genreId) on m.MovieId equals gm.MovieId into gms
             from gm in gms.DefaultIfEmpty()
             select new 
             {
                 MovieId = m.MovieId,
                 Title = m.Title,
                 Selected = gm != null
             }; 
    ```

显然，第一种方式代码更少，看起来更简单。

但这真的是更好的方法和最佳实践吗？

因为我听说 EF 关联并不总是能最好地转换为关于优化的 SQL 查询。

我还查看了 Sql Profiler 以查看两种方式的结果查询。我看到了以下内容：（1.方式似乎用更多行进行查询，但我不确定它是否效率较低）？？？

我试图用数十万条记录进行一些测试，但两种方式都太快了，看不出有什么区别。

1.

```
exec sp_executesql N'SELECT 
[Project2].[MovieId] AS [MovieId], 
[Project2].[Title] AS [Title], 
CASE WHEN ([Project2].[C1] > 0) THEN cast(1 as bit) WHEN ( NOT ([Project2].[C2] > 0)) THEN cast(0 as bit) END AS [C1]
FROM ( SELECT 
[Project1].[MovieId] AS [MovieId], 
[Project1].[Title] AS [Title], 
[Project1].[C1] AS [C1], 
(SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[GenreMovie] AS [Extent3]
    WHERE ([Project1].[MovieId] = [Extent3].[MovieId]) AND ([Extent3].[GenreId] = @p__linq__0)) AS [C2]
FROM ( SELECT TOP (1000) 
    [c].[MovieId] AS [MovieId], 
    [c].[Title] AS [Title], 
    (SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[GenreMovie] AS [Extent2]
        WHERE ([c].[MovieId] = [Extent2].[MovieId]) AND ([Extent2].[GenreId] = @p__linq__0)) AS [C1]
    FROM [dbo].[Movie] AS [c]
)  AS [Project1])     
AS [Project2]',N'@p__linq__0 int',@p__linq__0=1 
```

2.

```
exec sp_executesql N'SELECT 
[Limit1].[MovieId] AS [MovieId], 
[Limit1].[Title] AS [Title], 
CASE WHEN ([Limit1].[GenreMovieId] IS NOT NULL) THEN cast(1 as bit) WHEN ([Limit1].[GenreMovieId] IS NULL) THEN cast(0 as bit) END AS [C1]
FROM ( SELECT TOP (1000) 
[Extent1].[MovieId] AS [MovieId], 
[Extent1].[Title] AS [Title], 
[Extent2].[GenreMovieId] AS [GenreMovieId]
FROM  [dbo].[Movie] AS [Extent1]
LEFT OUTER JOIN [dbo].[GenreMovie] AS [Extent2] ON ([Extent2].[GenreId] = @p__linq__0) AND ([Extent1].[MovieId] = [Extent2].[MovieId]))  
AS [Limit1]',N'@p__linq__0 int',@p__linq__0=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:08:32.190

我会这样写：

```
var q = db.Movies
      .Select(m => new
      {
          MovieId = m.MovieId,
          Title = m.Title,
          Selected = m.GenreMovies.Any(gm => gm.GenreId == genreId),
      }); 
```

仅出于简单的原因。

# c# - 如何检测xna中是否多次按下一个键？

> ID：16203460
> 
> 赞同：0
> 
> 时间：2013-04-24T22:42:17.273
> 
> 标签：c#, xna-4.0

我试图让纹理在按下 F1 键时打开和关闭，我可以让它打开，但除非我使用单独的键这样做，否则它不会再次关闭。

这对我有用：

```
 if(Keystate.IsKeyDown(Keys.F1))
     {
       collisionhelp = true;
     } 
```

然后我做：

```
 if(Keystate.IsKeyDown(Keys.F2))
     {
       collisionhelp = false;
     } 
```

但我想要的是第二次按下 F1，然后将其设置为 false，但目前这导致它根本不显示。

我试过这个：

```
 if(Keystate.IsKeyDown(Keys.F1))
     {
       collisionhelp = true;

        if(collisionhelp == true && Keystate.IsKeyDown(Keys.F1))
         {
           collisionhelp = false;
         }
     } 
```

根本没有骰子，按钮甚至不再做任何事情。

在 XNA 中必须有一种方法可以做到这一点，也许每次按下 F1 时将一个整数加 1 并检测它是否为偶数以使其为假，如果它为奇数以使其为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:43:53.447

此代码将打开和关闭碰撞帮助布尔值，但它会在按住 F1 键的每一帧发生。

```
if(Keystate.IsKeyDown(Keys.F1))
{
    collisionhelp = !collisionhelp;
} 
```

因此，如果您以 60fps 的速度运行并按住 F1 键 1 秒钟，它将打开和关闭碰撞帮助 30 次。

我认为您想要的是第二个布尔值来记录是否在前一帧中按下按钮并且每次按下 F1 时仅切换一次碰撞帮助：

```
if(Keystate.IsKeyDown(Keys.F1))
{
    if(!f1AlreadyDown)
    {
        f1AlreadyDown = true;
        collisionhelp = !collisionhelp;
    }
}
else
{
    f1AlreadyDown = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:58:11.930

也许，这就是你需要的：

```
if(Keystate.IsKeyDown(Keys.F1))
{
   collisionhelp = !collisionhelp;
} 
```

# php - 我需要一些关于百分号运算符的解释

> ID：16203461
> 
> 赞同：1
> 
> 时间：2013-04-24T22:42:18.343
> 
> 标签：php

我从 php.net 获取了这段代码，但我需要解释百分号的作用。我已经改变了几次年份并获得了新的结​​果，但这一切似乎都很随机。

```
<?php
    function getChineseZodiac($year){

        switch ($year % 12) :
            case  0: return 'Monkey';  // Years 0, 12, 1200, 2004...
            case  1: return 'Rooster';
            case  2: return 'Dog';
            case  3: return 'Boar';
            case  4: return 'Rat';
            case  5: return 'Ox';
            case  6: return 'Tiger';
            case  7: return 'Rabit';
            case  8: return 'Dragon';
            case  9: return 'Snake';
            case 10: return 'Horse';
            case 11: return 'Lamb';
        endswitch;
    }

    echo getChineseZodiac(2016);
    ?> 
```

我读过它是一个模数运算符，其余的都是。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T22:44:08.407

mod 运算符返回除法的余数。

例如。`7 % 3`是 1 因为在你之后`divide 7 by 3`剩下的整数是 1

在上面的代码中

```
2004/12 = 167 
```

但是除法的提示是 0，因为 2004 完全可以被 12 整除。

所以

```
2004 % 12 = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T22:48:36.347

这里的目的是在 12 处“环绕”，这样你就得到了一个每 12 年重复一次的序列。

余数（模）运算符通常以这种方式使用。如果从第 11 年开始，`$year % 12`将返回 11 / 12 的余数，当然是 11，因此值不变。但是，从第 12 年开始，该数字将回绕：12/12 的余数为 0，13/12 的余数为 1，依此类推。

结果，`$year % 12`连续几年在数字 0 到 11 中循环，就像岁月在十二生肖中循环一样。

# javascript - 单击链接时如何使用 Javascript 更改部分 HTML？

> ID：16203464
> 
> 赞同：-2
> 
> 时间：2013-04-24T22:42:38.183
> 
> 标签：javascript, jquery, html, css, ajax

假设我有一个名为“videoplayer”的 DIV——这个 DIV 里面是一个图像。

单击链接时，是否有一种简单的方法可以更改此 DIV 中的 HTML 代码？

例如，这是当前的 DIV：

```
 <div class = "big_player" id="player1">
             <img src="whatever.jpg">
    </div> 
```

单击链接时，我希望 HTML 更改为：

```
 <div class = "big_player" id="player1">
             <script>
                playVideo(file, stream, key);
             </script>
    </div> 
```

完成此任务的最简单和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:00:06.733

使用 Javascript：

```
<a id="link" onclick='change()' href="#">Link</a>

<script>
function change()
{
  var script = document.createElement('script');            
  script.innerHTML = 'playVideo(file, stream, key);';
  p = document.getElementById("player1");
  p.innerHTML = "";
  p.appendChild(script);
}
</script> 
```

或者正如 Gaby 指出的那样，直接运行它

```
<script>
  function change()
  {
    playVideo(file, stream, key); 
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:45:56.233

您可以使用该[`.html()`](http://api.jquery.com/html)方法，但如果您只想运行一个脚本，您可以直接执行它。

所以

```
$('linkID').on('click', function(e){
   e.preventDefault();

   $('#player1').html('new html here');

}); 
```

或用于运行您可能更喜欢的脚本（*如果它符合您的需要*）

```
$('linkID').on('click', function(e){
   e.preventDefault();

   playVideo(file, stream, key);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:41:32.667

**编辑**

尝试这个：

```
$("img").on("click", function(e){

var content = "<script>" +
                   "playVideo(file, stream, key);" +
              "</script>";

$(this).parent().html(content);

}); 
```

只需确保**playVideo()**及其所有参数都存在。如果它不起作用，请给我反馈。如果失败，我们可能会使用*eval() 。*

# c# - 如何使用验证保持 ViewModel 和 View 同步

> ID：16203469
> 
> 赞同：1
> 
> 时间：2013-04-24T22:42:59.973
> 
> 标签：c#, wpf, mvvm, viewmodel, dependency-properties

我有一个`TextBox`绑定到我的模型的人（我意识到这应该在 VM 中，但这是目前的方式）。我有`ValidatesOnExcepion=true`，但是当我的属性设置器验证并引发异常时，我的模型和视图不同步（模型保持旧，视图变为新）。我什至尝试在`try...finally`finally 调用的地方包装`OnPropertyChanged`。如何将视图和模型都设置为旧值？

```
public Object MyProperty
{
    get{return _myProperty;}
    set
    {
        ThrowIfNotValid();
        _myProperty = value;
        OnPropertyChanged("MyProperty");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:11:29.653

updatesourcetrigger 可能会工作，

```
 <TextBox Text={Binding YourModel.PropertyName, UpdateSourceTrigger=PropertyChanged}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:30:02.950

[这是一篇博客文章](http://justin-pihony.blogspot.com/2013/05/validation-for-mvvm-properties-that.html)，详细说明了这已经成为一种痛苦，但我最终选择了[这个答案](https://stackoverflow.com/questions/11054510/wpf-text-box-not-updated-from-view-model)的混合体。

我正在使用上述答案，但随后不得不创建一个类似于`INotifyPropertyChanged`通知用户的界面，因为上述答案消除了任何验证错误

# ruby-on-rails - 用于 Rails 开发 iPad 测试的 Google OAuth2 API 重定向 URI

> ID：16203471
> 
> 赞同：0
> 
> 时间：2013-04-24T22:43:09.440
> 
> 标签：ruby-on-rails, mobile, oauth-2.0, localhost

我正在使用 Ruby on Rails 和 Google Apps Login 构建一个应用程序。我的本地开发机器上的登录功能正常。要使用我的 iPad 测试该应用程序，我只是在端口 3000 访问主机（开发）计算机的 IP。但是，对于 Google API 客户端重定向 URI，我使用..

`https://localhost:3000/callbacks/outh2`

由于显而易见的原因，这在连接到网络 IP 的 iPad 上不起作用。我不能用。。

`https://my.net.ip.addr:3000/callbacks/outh2`

要么是因为 Google 不接受它作为 api 客户端的有效重定向 URI。所以我想知道.. 有没有更好的方法来让这个本地开发过程发挥作用？.. 还是我需要将应用程序部署到生产环境中才能在 iPad 上看到它？

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:52:57.630

你试过本地隧道吗？这实质上是在一个随机生成的临时网址下托管您的本地主机地址。

$ gem install localtunnel $ localtunnel 3000

产生类似：http: [//xyz.localtunnel.com](http://xyz.localtunnel.com)

[http://progrium.com/localtunnel/](http://progrium.com/localtunnel/)

# java - 打印哈希表的内容

> ID：16203473
> 
> 赞同：0
> 
> 时间：2013-04-24T22:43:14.583
> 
> 标签：java, hashtable, enumeration

我在打印哈希表的内容时遇到了一些麻烦，它似乎只是在打印参考。

添加到哈希表代码：

```
protected Hashtable items = new Hashtable();

public void addItem(String itemId, String category, String title, String imageurl, double price, int quantity) {
  //boolean test = false;
  String price1 = String.valueOf(price);
  String[] item = {itemId, imageurl, title, category, price1, Integer.toString(quantity)};

if (items.containsKey(itemId)) {

  String[] tmpItem = (String[])items.get(itemId);
  int tmpQuant = Integer.parseInt(tmpItem[5]);
  quantity += tmpQuant;
  tmpItem[5] = Integer.toString(quantity);
}
else {

  items.put(itemId, item);
}
} 
```

查看内容代码：

```
public void getContents()
 {
  Enumeration e = items.elements();

  while (e.hasMoreElements())
  {
      System.out.println(e.nextElement());
  }
 } 
```

结果：

```
[Ljava.lang.String;@3736e10e
[Ljava.lang.String;@73f17a73
[Ljava.lang.String;@729e4f7c 
```

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:45:30.483

您已经打印了数组对象本身，而不是数组的内容。尝试[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)

```
System.out.println(Arrays.toString((String[]) e.nextElement())); 
```

# c# - 在 WPF / PRISM 中重新初始化应用程序

> ID：16203477
> 
> 赞同：0
> 
> 时间：2013-04-24T22:43:33.520
> 
> 标签：c#, wpf, mvvm, prism, mef

我们正在使用 PRISM 和 MEF 构建 WPF 应用程序。在应用程序中，用户将首先浏览包含大量元数据的“项目文件”。

基于项目元数据，将创建一组视图及其依赖的视图模型，用户可以查看/创建/操作项目数据。

然后用户可以打开另一个项目文件，此时应该完全重新初始化应用程序，就像用户重新启动应用程序一样，这是第一个打开的项目文件。原因是不同的项目文件可能会导致创建非常不同的视图。

如何在 WPF / PRISM / MEF 中做到这一点？如果它是一个常规的 WinForms 应用程序，我们可以解构/拆除基本的“应用程序表单”，并通过实例化一个新的应用程序重新开始，使用项目元数据作为上下文。

有没有办法在 WPF/PRISM/MEF 中做类似的事情？不同类型的项目之间的行为和所需的初始化对于“哦，只需更换模型并让视图模型触发属性更改事件以使视图刷新自己”的方法来说太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:59:49.450

您如何在当前的引导程序上实例化一个新的引导程序并在您的应用程序 OnStartUp 中重新运行它？我对其进行了测试，它似乎可以工作，但是在您的情况下就足够了吗？

# c# - 无法在可移植类库中返回异步等待

> ID：16203478
> 
> 赞同：4
> 
> 时间：2013-04-24T22:43:36.090
> 
> 标签：c#, asynchronous, portable-class-library, winrt-async

我有一个可移植的类库，它有一个方法返回`Task<string>`。当我尝试在 Windows Store WinRT 组件中使用它时，我在 WinRT 组件中收到以下错误。

> 错误 77 无法解析引用“程序集（名称=System.Threading.Tasks，版本=1.5.11.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a）”。

请注意，可移植类库可以独立构建。可移植类库针对以下框架：

*   .NET 框架 4.5
*   Silverlight 4 及更高版本
*   视窗电话 8
*   适用于 Windows 应用商店应用的 .NET

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T17:25:56.700

Microsoft BCL 团队将此视为已知问题，并且此问题的解决方法现在记录在：

[http://blogs.msdn.com/b/bclteam/p/asynctargetingpackkb.aspx#issue7](http://blogs.msdn.com/b/bclteam/p/asynctargetingpackkb.aspx#issue7)

更不用说，现在使用这种解决方法可以正常工作:)

# coldfusion - 任何人都知道如何防止特定标签的 CF 插件中的 sublime text 2 标签完成

> ID：16203479
> 
> 赞同：1
> 
> 时间：2013-04-24T22:43:42.460
> 
> 标签：coldfusion, sublimetext2

正如标题所说，我想阻止某些标签添加结束标签。具体来说`cfprocparam`。每次我写

```
<cfprocparam value=""> 
```

崇高的补充

```
</cfprocparam> 
```

我知道我可以改变

`"auto_close_cfml": true,` **至** `"auto_close_cfml": false,`

但我不希望将行为全部删除，因为它在`cfif`例如的情况下非常有帮助。我只是不希望某些标签使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:28:15.813

添加右斜杠可防止自动关闭标签： `<cfprocparam value="" />`

# arrays - 如何读取带有两个分隔符的二维数组

> ID：16203483
> 
> 赞同：0
> 
> 时间：2013-04-24T22:44:11.513
> 
> 标签：arrays, 2d, text-processing

我必须读入一个文件，例如：

0,11,6,0,10x11,0,5,4,7x6,5,0,2,3x0,4,2,0,12x10,7,3,12,0

所以我必须把它读入一个二维数组。

这是我的代码：

```
 //set delimiter to commas
     String r1=",";
     String r2="x";
     input.useDelimiter(r2);
     //print file to check contents
     while(input.hasNext()){

         System.out.print(input.next());
     }

     //transfer file into matrix
     int[][] graph=new int[filelength][filelength];
     for (int row=0; row<graph.length;row++){
         for(int column=0; column<graph[row].length;column++){
             graph[row][column]=input.nextInt();
         }
     }

     }
    //close file
     input.close();
} 
```

}

我遗漏了我的代码的细节。但是我正在使用扫描仪类，并且我正在尝试使用两个定界符，以便在定界符“x”上代码更改为矩阵的另一行，在定界符“”上，代码输入矩阵的条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T19:05:23.607

在 Python 中，如果您可以将数据存储为列表列表以制作二维数组，那么您可以读取文件数据，这里表示为字符串，然后执行以下操作：

```
>>> from pprint import pprint
>>> filedata = '0,11,6,0,10x11,0,5,4,7x6,5,0,2,3x0,4,2,0,12x10,7,3,12,0'
>>> array2d = [row.split(',') for row in filedata.split('x')]
>>> pprint(array2d)
[['0', '11', '6', '0', '10'],
 ['11', '0', '5', '4', '7'],
 ['6', '5', '0', '2', '3'],
 ['0', '4', '2', '0', '12'],
 ['10', '7', '3', '12', '0']]
>>> array2d[0]
['0', '11', '6', '0', '10']
>>> array2d[1]
['11', '0', '5', '4', '7']
>>> array2d[1][2]
'5'
>>> 
```

如果你想要实际的整数，你可以这样做：

```
>>> arrayints = [[int(item) for item in row.split(',')] for row in filedata.split('x')]
>>> pprint(arrayints)
[[0, 11, 6, 0, 10],
 [11, 0, 5, 4, 7],
 [6, 5, 0, 2, 3],
 [0, 4, 2, 0, 12],
 [10, 7, 3, 12, 0]]
>>> arrayints[1][2]
5
>>> 
```

# architecture - 寻求有关重组复杂网络应用程序以简化升级的建议

> ID：16203491
> 
> 赞同：2
> 
> 时间：2013-04-24T22:44:51.350
> 
> 标签：architecture, versioning, multi-tenant

我正在处理一个有着几十年历史的复杂系统。它曾经是一个客户端/服务器调度应用程序，但它变得更加复杂。最初，每个客户都有自己的实例，在自己的服务器上运行。现在，我们有一些客户仍在这种模式下运行，但我们也有一些客户在软件即服务模式下运行——所有应用程序都在我们的服务器上运行。我们还添加了 Web 界面，我们有数百名客户仅通过 Web 访问他们的系统。

就目前而言，系统的每个安装包括：

*   一个数据库：其中几乎每条记录都有一个以“customerid”开头的主键，因此多个客户可以针对同一个数据库运行。
*   安装目录：SAN 上的一个目录，在其子目录中存在可执行文件、日志文件、配置文件、基于磁盘的队列以及系统中涉及的几乎所有非网站的其他内容
*   后台应用程序：一堆应用程序，位于安装目录的子目录下，但可能运行在一个或多个应用程序服务器上，负责与各种异地系统、移动用户等进行通信。它们可以配置作为 Windows 服务运行，或从命令行运行。
*   客户端应用程序：另一组应用程序，位于同一子目录中，但运行在任意数量的用户机器上，管理者和调度员可以与系统交互，将工作分派给各种移动用户，运行完成工作的报告等.
*   Web 应用程序：几个网站/应用程序/服务，允许调度用户执行某些调度功能，并允许移动用户从任何 Web 浏览器完成分配的工作。通常，网站和系统安装之间存在多对一的关系。我们将在多个服务器平台上拥有多个站点，这些站点配置为针对系统的任何特定安装运行，并使用负载平衡器在它们之间分配传入用户。

我们有十几个不同的安装，每个安装从一个到几百个客户。（每个客户从少数到几百个用户。）

较旧的后台应用程序是用非托管 C++ 编写的，而较新的后台应用程序是用 C# 编写的。客户端应用程序是用 VB6 编写的，针对用非托管 C++ 编写的 COM 对象运行。网站和服务是用 C# 编写的 ASP.NET 和 ASP.NET/MVC。

显然，多年来，它变得相当复杂，有很多部分和很多相互关系。它仍然有效，并且运作良好，让我感到惊讶。让我觉得我们做得还不错，20 年前我们第一次设计的时候。但...

在这一点上，我们最大的问题是安装更新和升级所需的工作量。系统的大部分是解耦的，所以我们可以毫不费力地改变一个通信程序，或者修复一个网页等等。但是对数据库模式的任何更改都需要在系统范围内进行更改。这需要大量时间，会影响许多客户，并涉及重大风险。因此，修复的实施会延迟，这使得我们进行升级时的风险更高，从而导致更多的延迟，并且通常会损害我们的响应能力。

因此，我正在寻求有关我们可能进行的架构更改的建议，这将使升级的风险和成本更低。

在我的理想世界中，我们永远不会升级正在运行的安装，我们会并行安装升级，测试它，一旦我们确信它可以正常工作，我们会将客户从旧系统转移到新系统，一次是第一次，然后随着我们越来越有信心，然后批量进行。如果事情不起作用，我们可以将客户回滚到旧系统。但我看到了一些问题：

1.  在用户登录之前，我们不知道用户属于哪个客户。
2.  将用户从一个系统移动到另一个系统涉及复制数十万条数据库记录，并在此过程中应用架构更改。
3.  将自定义从一个系统移动到另一个系统涉及复制谁知道我们基于磁盘的队列中有多少文件，以及其他各种支持文件。
4.  我认为回滚是必要的。但这会更加困难。

我们所拥有的正在工作，但效果不佳。我希望得到一些建议。

确切地说，我不是在寻找答案，但更多的是我在寻找关于在哪里寻找的想法。有人对我在哪里可以找到有关如何处理这种规模的结构化系统的信息有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:35:47.697

您提到子系统是隔离的，所以我想更换/升级组件不是很成问题。主要的痛点似乎是数据库的变化。之所以如此，是因为您在 SAAS 环境中使用了共享数据库模型。对于 SAAS 应用程序，推荐的 DB 模型按照高度灵活到最不灵活的顺序是：

> 为每个客户单独的数据库，共享数据库但不同的架构，共享数据库共享架构。

这个问题是由于第三个模型。它最便宜，但刚性很高。

为了解决这个问题，可以为每个客户提供不同的数据库或模式实例。这可以一次为少数客户完成。例如，对于客户 A，根据选择创建不同的 db/schema。导出该客户 ID 的所有记录并填充到新模式中。开始将新客户路由到新数据库，您仍然可以返回旧数据库。

一般来说，对于 Web 服务，最好是

> 使用路由器调用真正的网络服务。

我想，它可能已经到位。因此，客户实际上调用了路由器服务，该服务将为客户路由到适当的 Web 服务。它就像更改路由器上的配置以回退或路由到不同版本或服务安装一样简单。上述策略可以以某种方式应用于不同的子系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T01:57:58.313

杰夫，我注意到你在明尼阿波利斯，我也是。我会根据你的描述猜测首字母 DR 或 BI，但它只是一个赃物。凭借为财富 50 强公司管理 75 多个应用程序组合的经验，我知道随着需求的不断发展和技术超越最初对被认为可能的理解，事情在 10/20 年内变得多么疯狂。

对于您的多租户 SaaS 架构，我不确定您是否会在这里得到任何灵丹妙药的答案，但根据我在一家初创公司的经验，我们正在构建一个多租户 SaaS Web 应用程序平台（处理 60 % 的需求，剩下 40% 由垂直应用程序解决）这是我的智慧之言：

我知道这会很困难，但尝试将您的应用程序功能数据和租户数据绝对分离到两个不同的模式/数据库或其他任何东西中。当更改与核心应用程序功能相关并且对客户或用户数据没有影响时，这将使您能够显着减少推出时间和测试要求。基本上，您将不得不让您的团队经历极度痛苦来识别和剥离所有严格定义应用程序功能（应用程序元数据）的表。**一旦实现了这一点，那么您将必须改进所有开发和测试流程，以将影响核心应用程序平台功能、垂直应用程序功能和客户数据相关的任务分开。这就是我们所做的，对我们来说，升级核心应用平台只需几个小时，甚至更短。**

分离...

*   核心平台能力数据/元数据
*   垂直应用能力元数据和交易数据
*   最后，租户 + 用户元数据和交易数据

**老实说，如果没有对现有环境进行彻底分析，我无法告诉您如何或是否可以实现这一目标。祝你好运！**

# php - PHP 表单未发送电子邮件或显示任何问题迹象

> ID：16203492
> 
> 赞同：0
> 
> 时间：2013-04-24T22:44:59.377
> 
> 标签：php, html, post, contact-form

我一生都无法获得我的 PHP 表单来发送电子邮件。我已经尝试了一百万种不同的方法来完成这项工作，到目前为止已经遵循了 10 个教程，但仍然没有运气。

这是我的表单和 php 代码（这些都在 index.php 文件中）：

```
<?php

            error_reporting(E_ALL);
            ini_set('display_errors','1');

            if ( isset($_POST['name']) && isset($_POST['email']) && isset($_POST['subject']) && isset($_POST['message']) ) {

                $sender_name = $_POST['name'];
                $email_address = $_POST['email'];
                $subject = $_POST['subject'];
                $message = $_POST['message'];

                if ( !empty($sender_name) && !empty($email_address) && !empty($subject) && !empty($$message) ) {

                    $to = 'myemail@myemail.com';
                    $mailSubject = 'Contact Form Subject:' .$subject;
                    $mailSubject .= ' Sent from:' .$sender_name;
                    $body = $message;
                    $headers = 'From: ' .$email_address;

                    mail($to, $mailSubject, $body, $headers);

                }

            }

        ?>    

<form method="post" action="index.php">
                                    <div class="5grid">
                                        <div class="row">
                                            <div class="6u">
                                                <input type="text" name="name" id="name" placeholder="Name" />
                                            </div>
                                            <div class="6u">
                                                <input type="text" name="email" id="email" placeholder="Email" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="12u">
                                                <input type="text" name="subject" id="subject" placeholder="Subject" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="12u">
                                                <textarea name="message" id="message" placeholder="Message"></textarea>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="12u">
                                                <input type="submit" value="Send" class="button form-button-submit"/>
                                                <a href="#" class="button button-alt form-button-reset">Clear Form</a>
                                            </div>
                                        </div>
                                    </div>
                                </form> 
```

我根本没有收到任何错误，它只是不发送电子邮件。我在这里特别做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:55:03.360

测试消息是否为空时，您有一个双 $ 。这个简单的修复为我解决了这个问题。

```
if ( !empty($sender_name) && !empty($email_address) && !empty($subject) && !empty($$message) ) { 
```

# javascript - 在javascript中正确重置全局变量？

> ID：16203494
> 
> 赞同：2
> 
> 时间：2013-04-24T22:45:05.440
> 
> 标签：javascript, arrays, variables, scope

所以，在***[这篇文章](https://stackoverflow.com/questions/1232040/how-to-empty-an-array-in-javascript)***中，人们正在讨论这样一个事实

```
A = [1,2,3]; 
```

然后做

```
A = []; 
```

不会重置阵列，而是创建一个新阵列。

***我的问题是***，如果我使用全局对象变量

```
myglobals = { A : [] } 
```

我可以安全地重置阵列吗

```
myglobals.A = []; 
```

正确的？因为它引用了相同的对象属性，因此我实际上并没有创建一个新数组，是吗？

**由于以下评论而更新问题**

由于有一个普遍的共识`splice(0)`是要走的路，并且由于一个非常相似的问题有一个解释对浏览器释放内存的影响的答案，我想知道设置任何定义的对象是否通常是安全和适当的（无论是数组或函数或字符串等...）`null`以重置它的*值*，同时保留它的*参考*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T22:50:16.937

您正在创建一个新数组。如果要截断数组，只需将其长度设置为零：

```
var a = [1,2,3];
a.length = 0;
// a is now [] 
```

在您的带有对象属性的示例中，它是一样的。JavaScript 中没有指针，只有引用值。所以 的值`myglobals.A`是对数组的引用。当您为其分配一个新数组时，该值将成为另一个数组的新引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T22:54:21.573

并不真地...

```
// make a global variable
var a = [1,2,3];

// Assign it to something
var someObj = { value: a };
someObj.value; // [1,2,3];

// set a new value for the global
a = [];
a; // []
someObj.value; // [1,2,3]; 
```

这是您提到的初始代码。您可以更改全局变量指向的对象，但不能更改对要替换的对象的其他引用。

你的第二个例子也存在同样的问题：

```
// make a global variable
var globals = { a: [1,2,3] };

// Assign it to something
var someObj = { value: globals.a };
someObj.value; // [1,2,3];

// set a new value for the global
globals.a = [];
globals.a; // []
someObj.value; // [1,2,3]; 
```

`globals`如果要更新引用，则必须引用容器对象。那是其他对象持有对容器的引用，然后您可以更改该容器的内容。

```
// make a global variable
var globals = { a: [1,2,3] };

// assign a reference to the container in another object.
var someObj = { globals: globals };
someObj.globals.a; // [1,2,3];

// set a new value for the global
globals.a = [];
globals.a; // []
someObj.globals.a; // []; 
```

认为这可能会有点笨拙。

* * *

您还可以通过全局更改对象引用，而不是替换它。

```
var a = [1,2,3];
var b = a; // a and b now reference the same object.

a.splice(0); // remove all items from this array, without replace the array object.
a; // [];
b; // [];
// a and b now still point to the same array, which is now empty. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T22:50:14.650

不，这仍然会创建一个新数组。重要的因素是赋值，而不是“A”变量所附加的范围。只要你做一些看起来像`something = []`的事情，JavaScript 引擎就会制造一个新的 Array 对象（`[]`部件），然后将它的引用分配给`something`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T02:23:40.763

```
var handle={};
handle.A=[1,2,3,4,5,{x:2,y:3}];
console.log(handle); 
```

![现在给出了什么](https://i.stack.imgur.com/8BUua.png)

```
delete handle.A;
console.log(handle); //A is gone! 
```

![从句柄中删除 A 后](https://i.stack.imgur.com/jQPS2.png)

为什么有时删除更好？它真的很致命`A`，如果您希望告诉您真相`handle`，以下可能会使您在处理更大的物体时感到困惑。`.length`

```
handle.A=[null];
handle.B=undefined;
handle.C=null;
handle.A.length=10;
console.log(handle, handle.length, handle.A.length); 
```

不是很节省编码，因为我设置了它`=10`，你的脚本可能会假设错误，有一些东西要循环通过 10 个元素。所以`handle.A=null`会有所帮助，但不会真正改变对象的结构。但它也不能破坏你的脚本，因为你有类似的东西`var A`，你可以防止循环通过不存在的元素。同样适用于 set to `undefined`, se 下面..

![所以要小心](https://i.stack.imgur.com/8kSrG.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T23:29:32.500

```
var A=[1,2,3];
A=undefined;
console.log(A); //undefined 
```

# validation - 在 ActiveRecord 关联中重新排序唯一排序的模型

> ID：16203503
> 
> 赞同：2
> 
> 时间：2013-04-24T22:45:29.533
> 
> 标签：validation, activerecord, model-associations

我有很多项目的列表模型。这些项目`priority`在列表范围内具有唯一性。

```
class List < ActiveRecord::Base
  has_many :items
  accepts_nested_attributes_for :items
end

class Item < ActiveRecord::Base
  validates :priority, uniqueness: { :scope => :list_id }
end 
```

因此，如果我从 API 调用返回给定列表，它看起来像这样：

```
{
  items: [
    { "id": 1, "priority": 1 },
    { "id": 2, "priority": 2 },
    { "id": 3, "priority": 3 }
  ]
} 
```

用户在前端重新排列项目`PUT`并向服务器发出请求

```
{
  items_attributes: [
    { "id": 1, "priority": 3 },
    { "id": 2, "priority": 1 },
    { "id": 3, "priority": 2 }
  ]
} 
```

但这会失败。当其中一个尝试保存时，它将检查是否存在具有相同列表 ID 和优先级的另一个项目。由于数据库中的其他项目尚未更新，因此此验证将失败。

如何实现此更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:34:14.710

允许在 list_id 列中使用 nil，以便您可以重置值。

```
validates :priority, uniqueness: { :scope => :list_id }, unless: Proc.new { |l| l.list_id.blank? } 
```

在您的控制器中，重置列：

```
ItemController.update_all("priority = null"); 
```

然后像现在一样使用传递的参数设置它们。`valid?`只需确保在保存 ( )之前测试模型的有效性。

# jquery - Jquery Plugin 响应 Selector 中的事件

> ID：16203509
> 
> 赞同：0
> 
> 时间：2013-04-24T22:45:42.090
> 
> 标签：jquery, plugins

我正在编写一个插件来对表格进行排序。当有人点击 TH 时，它会对该列进行排序。

所以我的 Jquery 会像“

```
$("#TableID").AddSorting(); 
```

我不确定如何在插件中引用排序功能。没有插件，我正在执行以下操作。

```
 <th data-sort="LastName, FirstName">
   <a onclick="SortTheGrid("FirstName, LastName");">First Name</a>
 </th> 
```

也许在插件中我可以这样做：

```
 $this.find("th[data-sort] a").click(function(){...}); 
```

谢谢查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:54:50.557

只需使用 jQuery 的[点击功能](http://api.jquery.com/click/)。

例如，

```
function doSort () {
    //your sort code here
}

$(document).ready(function () {
    $("#YourButtonName").click(function () { doSort(); });
}); 
```

您仍然需要将参数传递给您的点击处理程序，因此它知道要按哪些列进行排序。[在这个答案](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)中有关于如何将参数传递给 jQuery click 事件处理程序的详细信息。

# android - 如何将现有的 XML 定义添加到 R.anim

> ID：16203510
> 
> 赞同：2
> 
> 时间：2013-04-24T22:45:42.627
> 
> 标签：android, android-animation, android-xml

基本上，我正在尝试使用

android.R.anim.slide_in_right & android.R.anim.slide_out_left

然而，只有

android.R.anim.slide_in_left & android.R.anim.slide_out_right

似乎是现成的选择。我可以在 android.jar 的 res.anim 中看到存在 slide_in_right.xml 和 slide_out_left.xml，以及许多其他似乎不容易定义以供使用的定义。我的问题是如何将这些定义添加到 android.R.anim 以便我能够在 java 中引用它们？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:30:23.867

您可以在 res/anim 中复制此 xml

**slide_in_right.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="50%p" android:toXDelta="0"
            android:duration="@android:integer/config_mediumAnimTime"/>
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0"
            android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

**slide_out_left.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="-50%p"
            android:duration="@android:integer/config_mediumAnimTime"/>
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0"
            android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

您现在可以使用 R.anim.slide_in_right 或 R.anim.slide_out.left 访问动画

# unity3d - 使用 Farseer 移除关节

> ID：16203513
> 
> 赞同：1
> 
> 时间：2013-04-24T22:46:00.163
> 
> 标签：unity3d, box2d, farseer

我在 Unity 中使用[Farseer](http://farseerphysics.codeplex.com/)，我很难弄清楚如何使用脚本删除关节。我想删除场景中的所有关节。我一直在尝试使用类似的东西：world.JointList 和 world.RemoveJoint 但由于在 Unity 中关节是组件（即 FSPulleyJointComponent），我不明白如何访问关节本身。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:22:37.713

我从来没有使用过`Farseer`，但是如果关节被实现为`Components`可以使用[Object.Destroy](http://docs.unity3d.com/Documentation/ScriptReference/Object.Destroy.html)删除它们。

如果`Destroy`在 a`Component`的引用上使用，那么它将从`GameObject`它所附加的引用中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T21:51:49.410

我的坏... world.JointList 和 world.RemoveJoint 都可以正常工作。我没有得到正确的世界。

# android - 带上标的 Android 应用程序名称

> ID：16203514
> 
> 赞同：4
> 
> 时间：2013-04-24T22:46:05.437
> 
> 标签：android, superscript

如何将应用程序名称设为上标，我尝试过这种方式：

```
<string name="app_name">SomeApp <sup><small><b>beta</b></small></sup></string> 
```

它适用于 TextView，但不适用于应用程序名称。

像这样的事情是我想要完成的：

![在此处输入图像描述](https://i.stack.imgur.com/53U7J.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T22:56:09.413

您需要使用 ISO-8859-1 / UTF-8 字符来完成插入（在您的情况下）上标 3。

[HTML ISO-8859-1 参考](http://www.w3schools.com/tags/ref_entities.asp)实体列表 。

例如在你的`AndroidManifest.xml`

```
<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="Myapp³" <!--or reference it from @string --> 
```

或者在字符串中的某处使用 HTML 实体`&#xb3;`（十六进制）`&#179;`（十进制），例如：

```
<string name="app_name">Myapp&#179;</string> 
```

## Unicode 参考表的小汇编

[Unicode 6.2 字符代码表](http://www.unicode.org/charts/)

*   [C1 控件和 Latin-1 补充](http://www.unicode.org/charts/PDF/U0080.pdf)（上标所在的范围 0080-00FF）
*   [一般标点](http://www.unicode.org/charts/PDF/U2000.pdf)
*   [CJK 符号和标点符号](http://www.unicode.org/charts/PDF/U3000.pdf)
*   [中日韩兼容性表格](http://www.unicode.org/charts/PDF/UFE30.pdf)
*   [小型变体](http://www.unicode.org/charts/PDF/UFE50.pdf)
*   [半角和全角形式](http://www.unicode.org/charts/PDF/UFF00.pdf)

（来自维基百科）

# php - 如何根据两位数的起始年份计算当前学年？

> ID：16203520
> 
> 赞同：2
> 
> 时间：2013-04-24T22:46:35.333
> 
> 标签：php, 2-digit-year

我正在开展一个学校网络项目，我需要从他/她的唯一注册号中知道特定学生所在的年份。

注册号是这样`UXXEEXXXX`的，其中`XX`前两位代表用户入校年份的后两位，`EEX`代表部门，后三位`XXX`代表学生的编号，根据他的时间挂号的。

例如，in `U08EE1117`，`U`代表本科，`08`表示用户2008年入校，`EE1`表示系，`1`也表示用户从第一年开始，`117`表示用户是系第117位注册学生。

我想用 PHP 来获取用户的当前级别，表示为第一年的 100 级，第二年的 200 级，最后一年的学生最高 500 级。

我所做的是这样的：

```
$yr = ((integer)substr($_SESSION["username"], 1,2));    
$cur = substr(date("Y"), 2, 3);
$level = $cur - $yr; 
```

`$_SESSION["username"]`注册号在哪里。

但我注意到这在很多年里都行不通。我想知道解决这个问题的最简单方法。（注册号仅在 100 年内有效。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:53:07.100

我会说你有一个好的开始。您需要做的就是解决环绕问题，如果差值是负数，则加 100：

```
$yr = substr($_SESSION["username"], 1, 2);    
$cur = date("y");  // two-digit year
$diff = $cur - $yr;
if ($diff < 0) $diff += 100; 
```

这给出了自学生开始学习以来的日历年数，如果当前学年已经开始，您可能需要添加一个。然后只需乘以 100 即可获得您指定的级别。

# python - CSV 文件到数组中

> ID：16203521
> 
> 赞同：0
> 
> 时间：2013-04-24T22:47:08.837
> 
> 标签：python, csv

我有这个扫描 csv 文件的脚本，如果第一个值，`column == 200`它将该行保存到一个数组中。

问题是，我需要将该行和接下来的 10 行保存在同一个数组中。我可以在脚本中添加什么以便它做到这一点？我试图这样做，`for row in len(10):`但我得到一个错误。

```
p = csv.reader(open('file.csv'), delimiter=';')
a=[0]*2881
a = numpy.array(a, dtype=dict)
for row in p:
       if row[0]=="200":
          a=row
          break
print a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:09:41.123

很难确切地弄清楚你想要什么，但我会尝试猜测。

也许您想`a`成为`list`CSV 中从第一列开始的 11 行中的一行`200`：

```
p = csv.reader(open('file.csv'), delimiter=';')
for row in p:
    if row[0]=="200":
        a = [row] + list(itertools.islice(p, 10))
        break 
```

英文：`a`是找到的行的列表，加上接下来的 10 行的列表。

如果您希望将其存储在`numpy`数组中而不是 a`list`中，则在此循环之后从列表构造数组比提前构造数组并尝试动态添加要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:10:52.097

也许是这样的？

```
#!/usr/local/pypy-1.9/bin/pypy

import csv

def gen():
    with open('file.csv', 'rb') as file_:
        reader = csv.reader(file_, delimiter=';')
        state = 'no feed'
        for row in reader:
            if row[0]=="200":
                yield row
                state = 'feed'
                count = 1
            elif state == 'feed':
                if count < 10:
                    yield row
                    count += 1
                if count >= 10:
                    state = 'no feed'
                    count = 0

print list(gen()) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T23:11:04.633

试一试：

```
p = csv.reader(open('file.csv'), delimiter=';')

# walk through p, and look for '200' 
for i, row in enumerate(p):
    if row[0] == '200':
        my_array = numpy.array([x for x in p[i:i+11]) 
```

应该返回一个数组，其中包含您感兴趣的行，再加上接下来的 10

希望这可以帮助！

# vim - Vim 的“（插入）视觉”模式？

> ID：16203524
> 
> 赞同：6
> 
> 时间：2013-04-24T22:47:15.423
> 
> 标签：vim, insert

" `(insert) VISUAL`" 模式可以通过`CTRL`+进入`O`，`v`从插入模式开始。这将进入可视模式，但`(insert) VISUAL`在 vim 中显示为“”，`Esc`从该模式按下会带您回到插入模式，而不是正常模式。“ `(insert) VISUAL`”模式也可以通过从插入模式移动的箭头键进入。

两个相关问题：

1.  似乎没有太多关于这种特殊模式的文档。有没有一种简单的方法来搜索有关它的信息？（编辑：我知道`CTRL`+`O`通常会做什么。与视觉模式的交互似乎很特别。第一段是首先提到这种模式的最简单方法，因为我不知道可搜索的名称。）

2.  你怎么写`vmap`可靠地编写映射？即，是否有一致的方法可以离开视觉模式并最终进入正常模式？还是始终以插入模式结束？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T05:30:22.720

在*插入*模式下，`<C-o>`允许您在不离开*插入模式的情况下执行**普通*模式命令。Vim 尝试用 来指示新状态。由于你现在暂时处于*正常*模式，点击会让你进入*可视*模式，Vim 再次尝试用. *Vim 处于这种状态只是因为您*执行了一系列命令，并且正如其他人所指出的那样，该行为已记录在案。此时，将您重新置于*插入*模式是正常且预期的，因为那是您的原始模式。*`(insert)`*`v`*`(insert) VISUAL`*`<Esc>`****

 ***比我更深入了解 Vim 的人可能会告诉你是否有可靠的方法`normal`从`insert`-> `(normal)`->结束，`visual`但我想说整个想法对我来说听起来很可疑。

正确的用法是：

1.  *在正常*模式下做事
2.  进入*插入*模式以“插入”一些东西
3.  退出*插入*模式以返回*正常*模式
4.  *在正常*模式下做更多的事情
5.  进入*视觉*模式
6.  *在视觉*模式下做事
7.  退出*视觉*模式以返回*正常*模式
8.  等等

基本上，你不应该`<Esc>`离*正常*模式更远。

我无法想象使用`v`after`<C-o>`有任何意义的场景。

使用 Vim 的最佳和首选方式是尽可能远离*插入*模式。使用`<C-o>`以避免离开*插入*模式是一个非常糟糕的策略。我不知道你是否这样做，但如果你这样做了，你应该尽快重新考虑这种方法。

但我怀疑你正在尝试做一些你不知何故认为我们不需要知道的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T04:12:39.787

关于第二个问题：您可以从任何其他使用`<C-\><C-n>`. 没有以这种方式可靠地切换到视觉或插入模式的命令，但如果您只需要在视觉后始终切换到正常模式就足够了。请注意，大多数可视模式映射都在`i<C-o>v`特殊模式下工作而无需修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T03:59:53.580

它记录`:h Operator-pending`在`:h mode-switching`. 视觉模式的映射也适用于（插入）视觉模式。有关模式映射的评论，请参阅`:h map-modes`。`vmap`将为视觉模式和选择模式`xmap`进行映射，仅针对视觉模式而非选择模式进行映射，并且仅针对选择模式而非视觉模式进行`smap`映射。通常，您应该使用`noremap`这些映射命令的版本来避免意外行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T00:33:01.347

对于第一个问题。

`CTRL`+`O`在插入模式下执行一个命令，然后退出回到插入模式。见[`:h i_CTRL-O`](http://vimdoc.sourceforge.net/htmldoc/insert.html#i_CTRL-O)。

对于第二个问题。

我认为您没有一种可靠的方法可以退出一种或另一种模式。我认为最可靠的方法是以您想要结束的模式开始。***

# python - django 不打印我的字典值

> ID：16203525
> 
> 赞同：1
> 
> 时间：2013-04-24T22:47:30.913
> 
> 标签：python, django, django-templates

```
Category
Required: {u'Category': 4, u'Second Category': 12, u'Third Category': 3, u'Fourth': 11, u'Fifth': 0, u'Sixth': 8, u'Seventh': 5} 
```

那是的输出

```
{{ category }}<br>
   Required: {{ required_per_category }} </td> 
```

但是当我这样做时

```
 {{ category }}<br>
       Required: {{ required_per_category.category }} </td> 
```

输出为`Required:`（空）。任何想法？

# ruby - Ruby ExtensionTask：如何使其依赖于另一个 rake 任务？

> ID：16203526
> 
> 赞同：1
> 
> 时间：2013-04-24T22:47:37.130
> 
> 标签：ruby, rake

我在写一个本地人`C`正在`Ruby 2.0`用`Rake::ExtensionTask.new('NAME')`. 我需要使它依赖于我定义的另一个任务

```
task :myTask do |t|
....
end 
```

我的问题是，如何进行此设置，以便在运行`rake compile`时扩展编译/创建取决于我定义的任务（即 myTask）的完成？

我也尝试了以下方法，但现在我在运行时看不到“编译”选项`rake -T`：

```
task :myTask

task :extension_compile => [:myTask]
  Rake::ExtensionTask.new("NAME")
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:10:19.210

要将依赖项添加到现有任务，您应该像以前一样使用哈希表示法：

```
task :compile => [:myTask] 
```

`:compile`运行时看不到任务，`rake -T`因为`rake`仅显示具有描述的任务：

```
desc "This is a compilation task"
task :compile 
```

现在运行`rake -T`将产生：

```
rake compile  # This is a compilation task 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:09:58.753

您的第二个片段看起来正确，只需添加描述即可在 rake 列表中看到它

```
desc "Here's your description"
task :extension_compile => [:myTask]
  Rake::ExtensionTask.new("NAME")
end 
```

# ms-access - MSACCESS 查询：不是聚合函数的一部分

> ID：16203529
> 
> 赞同：0
> 
> 时间：2013-04-24T22:47:44.127
> 
> 标签：ms-access, expression, aggregate

MSACCESS 查询：

我有一个追加查询，它从 2 个表（右连接）中提取字段。我想添加一个表达式，将一个字段中的值乘以表单上的值。查询工作正常，直到我添加计算表达式，但错误是另一个（不相关）字段不是聚合函数的一部分。如果我删除该字段，它将抱怨另一个 - 并且不断地抱怨，除非我删除计算的表达式。

作品：

```
INSERT INTO quote_items ( quote_unique, quote_group_a, quote_group_b, unique_product_id, DESCRIPTION, nat_price, markup, sell_price )
SELECT [Forms]![frmQUOTE].[txtQUOTE_NO] AS quote_unique, [Forms]![frmQUOTE].[cmbGROUP_A] AS quote_group_a, [Forms]![frmQUOTE].[txtGROUP_B] AS quote_group_b, ASSY_CHILDREN.UPI, ASSY_CHILDREN.DESCRIPTION, [A - MASTER PRODUCT LIST].[NAT PRICE], [Forms]![frmQUOTE]![txtMU] AS markup, ([NAT PRICE]*[markup])+[NAT PRICE] AS sell_price
FROM [A - MASTER PRODUCT LIST] RIGHT JOIN ASSY_CHILDREN ON [A - MASTER PRODUCT LIST].[UNIQUE PART NO] = ASSY_CHILDREN.PARENT_UPI
WHERE ((([A - MASTER PRODUCT LIST].[UNIQUE PART NO])=[Forms]![frmQUOTE].[cmbPART_TO_ADD])); 
```

不起作用：

```
INSERT INTO quote_items ( quote_unique, quote_group_a, quote_group_b, unique_product_id, DESCRIPTION, QTY, nat_price, markup, sell_price )
SELECT [Forms]![frmQUOTE].[txtQUOTE_NO] AS quote_unique, [Forms]![frmQUOTE].[cmbGROUP_A] AS quote_group_a, [Forms]![frmQUOTE].[txtGROUP_B] AS quote_group_b, ASSY_CHILDREN.UPI, ASSY_CHILDREN.DESCRIPTION, Sum([QTY]*[Forms]![frmQUOTE]![txtQTYTOADD]) AS expr1, [A - MASTER PRODUCT LIST].[NAT PRICE], [Forms]![frmQUOTE]![txtMU] AS markup, ([NAT PRICE]*[markup])+[NAT PRICE] AS sell_price
FROM [A - MASTER PRODUCT LIST] RIGHT JOIN ASSY_CHILDREN ON [A - MASTER PRODUCT LIST].[UNIQUE PART NO] = ASSY_CHILDREN.PARENT_UPI
WHERE ((([A - MASTER PRODUCT LIST].[UNIQUE PART NO])=[Forms]![frmQUOTE].[cmbPART_TO_ADD])); 
```

表达式添加：

```
expr1: Sum([QTY]*[Forms]![frmQUOTE]![txtQTYTOADD]) 
```

奇怪的是它抱怨 UPI 不是聚合的一部分，但是如果删除了这个计算的表达式（这与 UPI 无关），则返回 UPI 就好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:38:57.570

我的建议：首先摆脱`Sum()`并使用...

```
expr1: [QTY]*[Forms]![frmQUOTE]![txtQTYTOADD] 
```

...或者也许只是...

```
expr1: [Forms]![frmQUOTE]![txtQTYTOADD] 
```

测试你的代码，看看它是否能给你想要的结果。如果没有，请[编辑](https://stackoverflow.com/posts/16203529/edit)您的问题，向我们展示一些具有代表性的示例数据和您想要实现的目标的示例。

# r - 合并/绑定 .xts 对象会产生未对齐的 NA

> ID：16203538
> 
> 赞同：0
> 
> 时间：2013-04-24T22:48:17.263
> 
> 标签：r, merge, time-series, xts, cbind

看来这个问题还没有解决，不是吗？

可重现的代码：

```
install.packages('quantmod')
install.packages('rugarch')
require(quantmod)
getSymbols('GLD', from = '1950-01-01')
dx <- na.omit(ClCl(to.weekly(GLD)))
require(rugarch)
spec <- ugarchspec(variance.model = list(model = 'sGARCH', garchOrder = c(1,1)),
                   mean.model = list(armaOrder = c(1,0), include.mean = TRUE),
                   distribution.model = 'norm')
Residuals <- residuals(ugarchfit(spec = spec, data = dx))
tail(cbind(Residuals, dx)) 
```

最后一个命令返回以下内容：

```
2013-04-11 -0.06094691                                    NA
2013-04-11          NA                           -0.05798050
2013-04-18 -0.06408317                                    NA
2013-04-18          NA                           -0.05890934
2013-04-22  0.00519109                                    NA
2013-04-22          NA                            0.01040821 
```

[在这个](https://stackoverflow.com/questions/12307156/merged-xts-object-are-not-aligned)和[这个](https://stackoverflow.com/questions/7678090/xts-merge-odd-behaviour)SO 问题中没有找到解决方案，对不起。

我的`sessionInfo()`：

```
> sessionInfo()
R version 3.0.0 (2013-04-03)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Italian_Italy.1252  LC_CTYPE=Italian_Italy.1252    LC_MONETARY=Italian_Italy.1252
[4] LC_NUMERIC=C                   LC_TIME=Italian_Italy.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.4-0          TTR_0.22-0              xts_0.9-3               zoo_1.7-9              
[5] Defaults_1.1-1          rugarch_1.2-2           RcppArmadillo_0.3.810.0 Rcpp_0.10.3            

loaded via a namespace (and not attached):
 [1] grid_3.0.0         KernSmooth_2.23-10 ks_1.8.12          lattice_0.20-15    nloptr_0.8.9      
 [6] numDeriv_2012.9-1  parallel_3.0.0     Rsolnp_1.14        spd_1.9            tools_3.0.0       
[11] truncnorm_1.0-6 
```

# highcharts - 使用 highcharts.js 启用滚动条

> ID：16203540
> 
> 赞同：1
> 
> 时间：2013-04-24T22:48:51.647
> 
> 标签：highcharts, highstock

有没有办法使用**highcharts.js**启用滚动条？所有的答案都倾向于包括**highstocks.js**，但这对我们不起作用，我们也没有 highstocks 许可证。

HighStocks 不支持我需要的图表。如果 HighCharts 目前不支持此功能，是否有未来添加它的计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:55:00.790

滚动条仅在 highstock.js 中可用，但如果您使用此库，您可以使用 highcharts。看一个简单的例子：

[http://jsfiddle.net/44aft/1/](http://jsfiddle.net/44aft/1/)

```
$('#container').highcharts({

    chart: {

    },
    navigator:{
        enabled:false
    },
    scrollbar: {
        enabled:true
    },

    rangeSelector: {
        enabled: false
    },

    series: [{
        name: 'USD to EUR',
        data: [1,2,3,3,5,2]
    }]
}); 
```

# git - 了解 git log 图形输出

> ID：16203545
> 
> 赞同：4
> 
> 时间：2013-04-24T22:49:21.943
> 
> 标签：git, logging, graph, output

我对不断看到的以下模式感到困惑：

```
*   1c49c26      Merge branch 'master' of https://<revoked>.git
|\
| * 5e072f2      Updating todo
* | 13e8f22      Adding maven
|/
* da94a41        Updating pom 
```

所以有人分支，做了一点点工作，然后合并了远程主分支。但是星号与管道相比是什么意思？请注意，它在“添加 maven”和“更新 todo”之间发生了变化——一个有星号，一个有管道

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T00:15:56.073

星号显示提交属于哪个分支。

这里`13e8f22`被提交给“左”分支和`5e072f2`“右”分支。管道显示在其他分支上。

# objective-c - Xcode 在调试器中暂停时有错误的调试值

> ID：16203546
> 
> 赞同：4
> 
> 时间：2013-04-24T22:49:25.037
> 
> 标签：objective-c, xcode, debugging, xcode4.6

我在 Xcode 中遇到了一个奇怪的问题。在我对这个 NSMutableArray 对象使用 insertObject:withIndex: 之后，调试窗口会显示数组的错误值，即使其他局部变量显示了正确的值，并且这个断言距离传递还有一步之遥。

我注意到这发生在我正在开发的应用程序中，因为该对象上的方法似乎无法正常工作。我编写了单元测试来证明我遇到的问题，并期望它失败，但它通过了。这是我使用的单元测试：

```
NSMUtableArray *targetArray = [[NSMutableArray alloc] initWithObject:@"Initial 0 object", nil];
NSString *new0object = @"new 0 object";
[targetArray insertObject:new0object atIndex:0];
NSString *current0object = [targetArray objectAtIndex:0];
STAssertTrue([current0object isEqualToString:new0object], nil); 
```

看到这个：

![XCode 问题的屏幕截图](https://i.stack.imgur.com/YKYVX.png)

我需要做什么才能让调试器正确显示，你认为它配置错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T05:56:01.630

我可以确认这个错误，看起来调试器 UI 没有更新，但实际数据很好（尝试从上下文菜单打印该数组的值）。建议你提交bug到radar://13755626

# c# - 用于执行 sql 脚本的 Server 类的替代方案

> ID：16203548
> 
> 赞同：1
> 
> 时间：2013-04-24T22:49:35.270
> 
> 标签：c#, asp.net, sql, sql-server

我目前正在使用：

命名空间 KezberProjectManager {

```
 public partial class VisitClear : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string sqlConnectionString = "Data Source=JOSH-PC\\SQLEXPRESS;Initial Catalog=KezBlu;Integrated Security=True;MultipleActiveResultSets=True";
            FileInfo file = new FileInfo(Path.Combine(
    HostingEnvironment.ApplicationPhysicalPath, 
    @"App_Data\kb.sql"));

            string script = file.OpenText().ReadToEnd();

            SqlConnection conn = new SqlConnection(sqlConnectionString);

            Server server = new Server(new ServerConnection(conn));

            server.ConnectionContext.ExecuteNonQuery(script);

        }
    }
} 
```

执行脚本。

在本地这运行得很好，因为我引用了 smo dll 等。这些不在我使用的 Goaddy 服务器上，因此此代码不会在服务器上运行。

有没有办法只使用 .Net 4 程序集引用来执行 sql 文件？

我不知道 GoDaddy 还希望我如何创建表格.....

谢谢

```
USE [KezBlu]
GO
/****** Object:  ForeignKey [Customer_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Customer_Case]
GO
/****** Object:  ForeignKey [Schedule_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Schedule_Case]
GO
/****** Object:  ForeignKey [Status_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Status_Case]
GO
/****** Object:  ForeignKey [Group_Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee] DROP CONSTRAINT [Group_Employee]
GO
/****** Object:  ForeignKey [Employee_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Employee_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Group_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Group_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Employee_LockedDate]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates] DROP CONSTRAINT [Employee_LockedDate]
GO
/****** Object:  ForeignKey [Schedule_Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project] DROP CONSTRAINT [Schedule_Project]
GO
/****** Object:  ForeignKey [Employee_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Employee_Schedule]
GO
/****** Object:  ForeignKey [Recurring_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Recurring_Schedule]
GO
/****** Object:  ForeignKey [Project_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Project_Task]
GO
/****** Object:  ForeignKey [Schedule_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task]
GO
/****** Object:  ForeignKey [Schedule_Task1]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task1]
GO
/****** Object:  Table [dbo].[Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Project_Task]
GO
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task]
GO
ALTER TABLE [dbo].[Task] DROP CONSTRAINT [Schedule_Task1]
GO
DROP TABLE [dbo].[Task]
GO
/****** Object:  Table [dbo].[Cases]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Customer_Case]
GO
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Schedule_Case]
GO
ALTER TABLE [dbo].[Cases] DROP CONSTRAINT [Status_Case]
GO
DROP TABLE [dbo].[Cases]
GO
/****** Object:  Table [dbo].[Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project] DROP CONSTRAINT [Schedule_Project]
GO
DROP TABLE [dbo].[Project]
GO
/****** Object:  Table [dbo].[EmployeGroupFilters]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Employee_EmployeGroupFilter]
GO
ALTER TABLE [dbo].[EmployeGroupFilters] DROP CONSTRAINT [Group_EmployeGroupFilter]
GO
DROP TABLE [dbo].[EmployeGroupFilters]
GO
/****** Object:  Table [dbo].[LockedDates]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates] DROP CONSTRAINT [Employee_LockedDate]
GO
DROP TABLE [dbo].[LockedDates]
GO
/****** Object:  Table [dbo].[Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Employee_Schedule]
GO
ALTER TABLE [dbo].[Schedule] DROP CONSTRAINT [Recurring_Schedule]
GO
DROP TABLE [dbo].[Schedule]
GO
/****** Object:  Table [dbo].[Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee] DROP CONSTRAINT [Group_Employee]
GO
DROP TABLE [dbo].[Employee]
GO
/****** Object:  Table [dbo].[Colors]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Colors]
GO
/****** Object:  Table [dbo].[Customers]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Customers]
GO
/****** Object:  Table [dbo].[Group]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Group]
GO
/****** Object:  Table [dbo].[Recurring]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Recurring]
GO
/****** Object:  Table [dbo].[Settings]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Settings]
GO
/****** Object:  Table [dbo].[Statuses]    Script Date: 04/24/2013 21:35:08 ******/
DROP TABLE [dbo].[Statuses]
GO
/****** Object:  Table [dbo].[Statuses]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Statuses](
    [StatusID] [int] IDENTITY(1,1) NOT NULL,
    [StatusDescription] [varchar](50) NULL,
 CONSTRAINT [PK_dbo.Statuses] PRIMARY KEY CLUSTERED 
(
    [StatusID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Settings]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Settings](
    [SettingID] [int] IDENTITY(1,1) NOT NULL,
    [SettingKey] [varchar](50) NOT NULL,
    [SettingValue] [text] NOT NULL,
 CONSTRAINT [PK_dbo.Settings] PRIMARY KEY CLUSTERED 
(
    [SettingID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Recurring]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Recurring](
    [RecurringID] [int] IDENTITY(1,1) NOT NULL,
    [Period] [int] NULL,
    [DateStart] [datetime] NULL,
    [DateLast] [datetime] NULL,
    [Advance] [int] NULL,
 CONSTRAINT [PK_dbo.Recurring] PRIMARY KEY CLUSTERED 
(
    [RecurringID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Group]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Group](
    [GroupID] [int] IDENTITY(1,1) NOT NULL,
    [GroupDescription] [varchar](max) NOT NULL,
    [IsReadOnly] [bit] NULL,
 CONSTRAINT [PK_dbo.[Group]]] PRIMARY KEY CLUSTERED 
(
    [GroupID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Customers]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Customers](
    [CustomerID] [int] IDENTITY(1,1) NOT NULL,
    [CustomerDescription] [varchar](max) NULL,
 CONSTRAINT [PK_dbo.Customers] PRIMARY KEY CLUSTERED 
(
    [CustomerID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Colors]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Colors](
    [ColorID] [int] IDENTITY(1,1) NOT NULL,
    [ColorValue] [int] NOT NULL,
 CONSTRAINT [PK_dbo.Colors] PRIMARY KEY CLUSTERED 
(
    [ColorID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Employee]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Employee](
    [EmployeID] [int] IDENTITY(1,1) NOT NULL,
    [EmployeName] [varchar](50) NOT NULL,
    [EmployeEmail] [varchar](50) NOT NULL,
    [EmployePassword] [char](44) NOT NULL,
    [DefaultNumWeek] [smallint] NULL,
    [GroupID] [int] NULL,
 CONSTRAINT [PK_dbo.Employee] PRIMARY KEY CLUSTERED 
(
    [EmployeID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Schedule]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Schedule](
    [ScheduleID] [int] IDENTITY(1,1) NOT NULL,
    [DateFrom] [datetime] NULL,
    [Hours] [decimal](10, 2) NULL,
    [EmployeID] [int] NULL,
    [RecurringID] [int] NULL,
    [Priority] [int] NULL,
    [DateTo] [datetime] NULL,
    [IsLocked] [bit] NOT NULL,
    [BumpPriority] [int] NULL,
 CONSTRAINT [PK_dbo.Schedule] PRIMARY KEY CLUSTERED 
(
    [ScheduleID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LockedDates]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LockedDates](
    [LockedDateID] [int] IDENTITY(1,1) NOT NULL,
    [Date] [datetime] NOT NULL,
    [IsYearly] [bit] NOT NULL,
    [EmployeeID] [int] NULL,
 CONSTRAINT [PK_dbo.LockedDates] PRIMARY KEY CLUSTERED 
(
    [LockedDateID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[EmployeGroupFilters]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[EmployeGroupFilters](
    [EmployeGroupFilterID] [int] IDENTITY(1,1) NOT NULL,
    [EmployeID] [int] NOT NULL,
    [GroupID] [int] NOT NULL,
 CONSTRAINT [PK_dbo.EmployeGroupFilters] PRIMARY KEY CLUSTERED 
(
    [EmployeGroupFilterID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Project]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Project](
    [ProjectID] [int] IDENTITY(1,1) NOT NULL,
    [ProjectTitle] [varchar](max) NOT NULL,
    [ProjectDescription] [varchar](max) NOT NULL,
    [ScheduleID] [int] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [IsRetired] [bit] NULL,
    [Color] [int] NULL,
    [PaymoID] [int] NULL,
 CONSTRAINT [PK_dbo.Project] PRIMARY KEY CLUSTERED 
(
    [ProjectID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Cases]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Cases](
    [CaseID] [int] IDENTITY(1,1) NOT NULL,
    [CaseTitle] [varchar](max) NOT NULL,
    [CaseDescription] [varchar](max) NOT NULL,
    [CustomerID] [int] NOT NULL,
    [ScheduleID] [int] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [StatusID] [int] NULL,
    [Color] [int] NULL,
    [CRMID] [varchar](50) NULL,
 CONSTRAINT [PK_dbo.Cases] PRIMARY KEY CLUSTERED 
(
    [CaseID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Task]    Script Date: 04/24/2013 21:35:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Task](
    [TaskID] [int] IDENTITY(1,1) NOT NULL,
    [TaskTitle] [varchar](max) NOT NULL,
    [TaskDescription] [varchar](max) NOT NULL,
    [ProjectID] [int] NULL,
    [ScheduleID] [int] NULL,
    [PaymoID] [int] NULL,
    [ParentScheduleID] [int] NULL,
    [IsUnscheduelable] [bit] NULL,
    [EstimatedHours] [decimal](10, 2) NULL,
    [PaymoUser] [varchar](max) NULL,
    [PaymoOrder] [int] NULL,
    [PaymoEstimateHours] [decimal](10, 2) NULL,
 CONSTRAINT [PK_dbo.Task] PRIMARY KEY CLUSTERED 
(
    [TaskID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  ForeignKey [Customer_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Customer_Case] FOREIGN KEY([CustomerID])
REFERENCES [dbo].[Customers] ([CustomerID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Customer_Case]
GO
/****** Object:  ForeignKey [Schedule_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Schedule_Case] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Schedule_Case]
GO
/****** Object:  ForeignKey [Status_Case]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Cases]  WITH CHECK ADD  CONSTRAINT [Status_Case] FOREIGN KEY([StatusID])
REFERENCES [dbo].[Statuses] ([StatusID])
GO
ALTER TABLE [dbo].[Cases] CHECK CONSTRAINT [Status_Case]
GO
/****** Object:  ForeignKey [Group_Employee]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Employee]  WITH CHECK ADD  CONSTRAINT [Group_Employee] FOREIGN KEY([GroupID])
REFERENCES [dbo].[Group] ([GroupID])
GO
ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [Group_Employee]
GO
/****** Object:  ForeignKey [Employee_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters]  WITH CHECK ADD  CONSTRAINT [Employee_EmployeGroupFilter] FOREIGN KEY([EmployeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[EmployeGroupFilters] CHECK CONSTRAINT [Employee_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Group_EmployeGroupFilter]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[EmployeGroupFilters]  WITH CHECK ADD  CONSTRAINT [Group_EmployeGroupFilter] FOREIGN KEY([GroupID])
REFERENCES [dbo].[Group] ([GroupID])
GO
ALTER TABLE [dbo].[EmployeGroupFilters] CHECK CONSTRAINT [Group_EmployeGroupFilter]
GO
/****** Object:  ForeignKey [Employee_LockedDate]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[LockedDates]  WITH CHECK ADD  CONSTRAINT [Employee_LockedDate] FOREIGN KEY([EmployeeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[LockedDates] CHECK CONSTRAINT [Employee_LockedDate]
GO
/****** Object:  ForeignKey [Schedule_Project]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Project]  WITH CHECK ADD  CONSTRAINT [Schedule_Project] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Project] CHECK CONSTRAINT [Schedule_Project]
GO
/****** Object:  ForeignKey [Employee_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule]  WITH CHECK ADD  CONSTRAINT [Employee_Schedule] FOREIGN KEY([EmployeID])
REFERENCES [dbo].[Employee] ([EmployeID])
GO
ALTER TABLE [dbo].[Schedule] CHECK CONSTRAINT [Employee_Schedule]
GO
/****** Object:  ForeignKey [Recurring_Schedule]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Schedule]  WITH CHECK ADD  CONSTRAINT [Recurring_Schedule] FOREIGN KEY([RecurringID])
REFERENCES [dbo].[Recurring] ([RecurringID])
GO
ALTER TABLE [dbo].[Schedule] CHECK CONSTRAINT [Recurring_Schedule]
GO
/****** Object:  ForeignKey [Project_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Project_Task] FOREIGN KEY([ProjectID])
REFERENCES [dbo].[Project] ([ProjectID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Project_Task]
GO
/****** Object:  ForeignKey [Schedule_Task]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Schedule_Task] FOREIGN KEY([ScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Schedule_Task]
GO
/****** Object:  ForeignKey [Schedule_Task1]    Script Date: 04/24/2013 21:35:08 ******/
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [Schedule_Task1] FOREIGN KEY([ParentScheduleID])
REFERENCES [dbo].[Schedule] ([ScheduleID])
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [Schedule_Task1]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:07:40.117

不幸的是，托管商没有提供更好的数据库管理工具，但也许你可以尝试使用`SqlCommand`可以执行`DDL`语句的类。不幸的是，您必须按`GO`分隔符拆分语句。在我的示例中，我使用正则表达式来执行此操作，但它可能会失败，具体取决于脚本中“GO”一词的使用位置：

```
using (SqlConnection cnn = new SqlConnection(@"Server=[server];Database=[database];Integrated Security=True"))
using(SqlCommand cmd = cnn.CreateCommand())
{
    cnn.Open();
    MatchCollection coll = Regex.Matches(script, @"(?<cmd>.+)\s*GO\s*", RegexOptions.IgnoreCase);
    foreach (Match m in coll)
    {
        cmd.CommandText = m.Groups["cmd"].Value;
        cmd.ExecuteNonQuery();
    }
} 
```

# terminal - 提示中的变量名而不是路径

> ID：16203555
> 
> 赞同：1
> 
> 时间：2013-04-24T22:50:03.453
> 
> 标签：terminal, command-line-interface, zsh, zshrc

如何防止我的 zsh 提示显示分配路径的变量名称而不是路径本身？

```
foo="/some/path"
cd "$foo" 
```

而是显示`$ ~foo/`在我的提示中`$ /some/path/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T01:33:44.793

从评论：

您正在看到[命名目录](http://zsh.sourceforge.net/Guide/zshguide02.html#l20)。检查是否`AUTO_NAME_DIRS`已设置 ( `setopt | grep AUTO_NAME_DIRS`) - 要禁用此功能，请将其关闭。

# visual-studio-2010 - 如何在 Visual Studio 2010 中删除断点附近的绿线？

> ID：16203560
> 
> 赞同：8
> 
> 时间：2013-04-24T22:50:25.400
> 
> 标签：visual-studio-2010

我不知道这条线是什么意思，它是如何到达那里的，或者如何删除它。![该死的绿线](https://i.stack.imgur.com/Nq7cD.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T22:56:52.910

Visual Studio 文本编辑器侧面的彩色线条显示自打开以来已更改且未保存（黄色）或已保存（绿色）的线条。

这是一种快速了解您对文件所做的更改的便捷方式。但是，如果您想关闭它，您可以通过转到`Tools`-> `Options`->`Text Editor`并取消选中来切换它`Track Changes`。

![关闭](https://i.stack.imgur.com/bhSpA.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:58:30.273

该标记保存自上次打开 Visual Studio 以来对工作目录所做的更改。我发现此功能非常有用，尤其是在与团队合作时。如果你真的讨厌它们，你可以从偏好中关闭它们，但我建议使用它们，因为从长远来看它们会节省你的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-17T06:09:11.230

如果您已升级到 VS2022，这些线条的颜色会变得更暗，这会让您误以为它们是一个新功能（我当然是！）。

您可以在设置中重新设置颜色`Fonts and Colors`。VS2019 颜色在这里列出：

*   保存前跟踪更改 -`RGB 108,226,108`
*   保存后跟踪更改 -`RGB 255,238,98`

[![字体和颜色设置](https://i.stack.imgur.com/Z6RMF.png)](https://i.stack.imgur.com/Z6RMF.png)

# git - 以编程方式交换最后两次提交

> ID：16203562
> 
> 赞同：28
> 
> 时间：2013-04-24T22:50:36.140
> 
> 标签：git

我知道如何以`git rebase`交互方式（在 Vim 中使用`git rebase -i HEAD~2`, `ddjp:x`）交换最后两个提交，但我想使用包装脚本以编程方式完成它，因为这是我相对经常做的事情。

更具体地说，我想重写历史

```
A---B---C---D HEAD 
```

至

```
A---B---D---C HEAD 
```

以完全脚本化的方式。理想情况下，如果交换失败，它应该允许我以交互方式修复它，或者只是放弃并告诉我手动进行。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-24T23:08:11.537

这应该这样做：

```
git tag old
git reset --hard HEAD~2
git cherry-pick old
git cherry-pick old~1
git tag -d old 
```

首先，您将您所在的位置标记为`old`，然后返回两次提交，`git cherry-pick`以另一个顺序提交，并删除该`old`标记。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T02:09:16.220

由于您想经常这样做，我假设您希望减少到单步过程。不过，我会让这有点教育意义，并将其分解。

# 重要的

不要对已经与其他开发人员共享或推送到远程的任何提交执行此类操作。重写共享历史是灾难的根源。

除了那个公共服务公告...

## 步骤1

```
A---B---C---D (master, HEAD, ORIG_HEAD)

git rebase --quiet --onto HEAD~2 HEAD~1 HEAD 
```

这会获取 HEAD 中不在 HEAD~1 中的任何内容，并将其应用于 HEAD~2。运行此 rebase 后，您将拥有此历史记录。请记住，这`git-rebase --onto`会使您陷入无头状态。（我已经`--quiet`进去了，所以最后的命令不会在你的屏幕上吐出一堵墙）。

```
A---B---C---D (master, ORIG_HEAD)
     \
      D'  (HEAD) 
```

现在我们需要得到`C`应用后`D'`，为此我们可以使用`git-cherry-pick`. 当 a`git-rebase --onto`像上面那样执行时，将保存 rebase 之前的原始提交历史记录，`ORIG_HEAD`因为 git 在您执行其他一些活动之前不会更改它。如果你搞砸了一个变基，这很有用，但我们将在这里使用它来挑选。

## 第2步

```
git cherry-pick ORIG_HEAD~1

A---B---C---D (master, ORIG_HEAD)
     \
      D'---C'  (HEAD) 
```

HEAD 的状态现在完全符合您的要求，只需两个命令。我假设这通常发生在一个分支内，并且您会希望使用新的提交顺序更新该分支。如果我错了，那么就是这样，你就完成了。如果您确实想要更新您所在的分支，有几种方法可以做到这一点。

最简单的手动操作是执行以下操作...

```
git log -1    ###copy the the SHA1
git checkout master
git reset --hard <SHA1> 
```

然而，重点是自动化，并且有一些方法不太明显，但需要的命令更少。

## 第 3 步

```
git update-ref refs/heads/master $(git rev-parse HEAD) 
```

通过使用`git-rev-parse`，我只得到 HEAD 的提交，没有别的。将其应用于`git-update-ref，我可以“重置”主分支，而无需先检查它。现在 master 已正确设置，我可以继续检查 master（更新引用的目的是减少最终别名/bash 脚本所涉及的步骤数）。

## 第4步

```
git checkout --quiet master 
```

同样，我通过`--quiet`以减少每个命令后在屏幕上转储的文本量。

## Bash 脚本

如果您想将其作为 bash 脚本执行，您可以进一步自动化整个过程，并使其在您想要的任何分支上动态工作，而不仅仅是 master。

```
#!/bin/bash
branch=$(git name-rev --name-only HEAD)
git rebase --onto HEAD~2 HEAD~1 HEAD
git cherry-pick ORIG_HEAD~1
git update-ref refs/heads/$branch $(git rev-parse HEAD)
git checkout --quiet $branch 
```

## Git 别名

也就是说，这很容易转储到 git 别名中，而无需实际为 bash 脚本创建文件。创建文件和设置别名无论如何都不难，但这是另一回事，很多人不理解。这是一个简单的 git 别名，运行此命令一次..

```
git config --global alias.flip-last "!branch=$(git name-rev --name-only HEAD); git rebase --quiet --onto HEAD~2 HEAD~1 HEAD; git cherry-pick ORIG_HEAD~1; git update-ref refs/heads/$branch $(git rev-parse HEAD); git checkout --quiet $branch" 
```

现在，只要您想翻转最后两个提交，只需使用...

```
git flip-last 
```

## GitHub 要点

这是一个有趣的小脚本，我把它扔到了[github gist](https://gist.github.com/eddiemoya/5456992)上。随意分叉，进行更改，加注星标，等等。

[https://gist.github.com/eddiemoya/5456992](https://gist.github.com/eddiemoya/5456992)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T01:44:36.470

作为参考，这是我最终使用的脚本：

```
. "$(git --exec-path)/git-sh-setup"
require_clean_work_tree swap2

if [ -e $GIT_DIR/sequencer ]; then
    die "Cherry-pick already in progress; swap aborted"
fi

HEAD=`git rev-list --max-count=1 HEAD`
git reset --hard HEAD~2
if git cherry-pick $HEAD $HEAD^; then
    echo "Successfully swapped top two commits."
else
    git cherry-pick --abort
    git reset --hard $HEAD
    die "Failed to swap top two commits."
fi 
```

# c# - 如何从表达式中设置属性值？

> ID：16203563
> 
> 赞同：1
> 
> 时间：2013-04-24T22:50:58.513
> 
> 标签：c#, dynamic, reflection, expression

我需要对这种情况进行定位。例如我有这个类：

```
public class Schema
{
   public string Value {get; set;}
} 
```

在前端，用户将有机会输入该属性的值：

**Schema.Value = [此处的表达式]**

现在用户可以调用一个返回字符串的函数，或者他可以连接来自不同模式的值以将值分配给该特定模式值属性。

最好的方法是什么？我觉得这很难解释，但是如何保存该表达式（机制）然后在运行时计算它？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:38:01.257

您可以使用[`CodeDomProvider`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.aspx)该类在运行时评估表达式，或使用[CS-Script](http://www.csscript.net/)等脚本引擎。这是一个评估`DateTime`表达式的简单测试：

```
[TestMethod]
public void ExecuteTest()
{
    CodeDomProvider provider = provider = CodeDomProvider.CreateProvider("CSharp");
    CompilerParameters cp = new CompilerParameters();
    cp.GenerateExecutable = false;
    cp.GenerateInMemory = true;
    cp.TreatWarningsAsErrors = false;
    string source = @"using System; namespace N { public class C { public static DateTime Execute() { return DateTime.Now.AddDays(10); } } }";
    CompilerResults cr = provider.CompileAssemblyFromSource(cp, source);
    if(cr.Errors.Count > 0)
    {
        foreach(CompilerError ce in cr.Errors)
        {
            Console.Out.WriteLine("  {0}", ce.ToString());
        }
        Assert.Fail("Compilation error(s).");
    }
    else
    {
        object obj = cr.CompiledAssembly.CreateInstance("N.C");
        MethodInfo mi = obj.GetType().GetMethod("Execute", BindingFlags.Public | BindingFlags.Static);
        var actual = (DateTime)mi.Invoke(obj, null);
        Assert.IsNotNull(actual);
        var expected = DateTime.Now.AddDays(10).Date;
        Assert.AreEqual(expected, actual.Date);
    }
} 
```

此代码需要反射来发现`C`类和`Execute`方法。您将需要导入`System.Reflection`和`System.CodeDom.Compiler`命名空间。

您必须小心在表达式中公开了哪些类/方法，因为这可能是一个很大的安全问题。您可以添加自己的类、添加来自外部程序集的引用等，并且您无法控制正在执行的内容。

# php - 创建一个类以将新表中的列名映射到旧表

> ID：16203564
> 
> 赞同：0
> 
> 时间：2013-04-24T22:51:10.513
> 
> 标签：php, arrays, oop, database-design

我们最近更新了所有数据库表以使用统一的命名约定（我们的旧表一团糟）。在某些情况下，我们仍然需要在旧表和新表之间进行通信。我的任务是编写一个类，将旧表名和列名转换为新的，反之亦然。

理想情况下，我将有一个双向数组来执行此操作，但我认为 PHP 中不存在。所以我个人可以想到以下两种方式来做到这一点：

1.  只需写出两个大数组，一个将旧名称映射到新名称，一个将新名称映射到旧名称。

2.  从单个列表创建对象时动态创建两个数组

有没有其他方法可以做到这一点，每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:44:58.140

我想我会向一个函数发送一个参数，该函数告诉将要使用什么数据库，并分配用于新数据库的值，并在要使用旧数据库时分配其他值。

```
<?php
function dosql($newDb = true) {
   if ($newDb === true) {
       //Fields used when using new db
       $fieldArray = array('id', 'another field');   
       $tableName = 'newTable';
   }
   else {
       //Fields used when using old db
       $fieldArray = array('old_id', 'another old field');
       $tableName = 'oldTable';
   }

   //example - would be select id, another field from newTable where id=5 if $newDb = true
   $sql = "select " . implode(',', $fieldArray) . " from " . $tableName . " where " . $fieldArray[0] . " =5"; 

  //And of course do the actual db-operations...

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T22:39:16.963

我最终做的是创建一个带有一个名为 newToOldArray 的变量的类，并在代码中列出以新名称作为键、旧名称作为值的数组。所以我不必再次反向写出整个数组来创建oldToNewArray，我在构造函数中使用了php函数array_flip()（我刚刚找到）来创建另一个变量。

如果我更改了一个值而不更改另一个值，这种方法使我不必担心两个数组会不同步。它还节省了文件大小和再次输入的时间。我还可以在需要时查看该表作为参考。

# c# - ASP.Net：查找父控件实现接口T

> ID：16203565
> 
> 赞同：1
> 
> 时间：2013-04-24T22:51:14.600
> 
> 标签：c#, generics, interface, asp.net-4.0

我有这个方法，它将给我第一个父控件，它是通用类型 T，其中 T 是 Control 的子类型。

```
// Given a Control, find parent Control of T
public static T FindParent<T>(this Control ctrl) where T : Control
{
    var curParent = ctrl.Parent;
    while (curParent != null && !(curParent is T))
    {
        curParent = curParent.Parent;
    }
    return (T)curParent;
} 
```

但是，现在我想找到一个实现接口 T 的父控件。当我`where T : Control`从方法中删除子句时，该`return (T)curParent`行给出了编译错误`Cannot convert type 'System.Web.UI.Control' to T`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:08:09.913

在这种情况下，由于`curParent`被键入为 a `Control`(from `ctrl.Parent`)，不，*编译器*不知道如何将 a 转换/转换`Control`为任意泛型类型`T`。但是，由于您在*运行时*知道该类型是兼容的，因此您可以通过首先转换为来轻松绕过它`object`：

```
public static T FindParent<T>(this Control ctrl)
{
    var curParent = ctrl.Parent;
    while (curParent != null && !(curParent is T))
    {
        curParent = curParent.Parent;
    }
    return (T)(object)curParent;
} 
```

在这种情况下，编译器不能抱怨，它只需要相信你知道你在运行时在做什么，我们在这种情况下这样做是因为`curParent is T`检查。

# bash - 在 Linux 上使用 bash 更改大文件中的几个字节而不将所有内容加载到内存中

> ID：16203567
> 
> 赞同：1
> 
> 时间：2013-04-24T22:51:30.583
> 
> 标签：bash

在 Linux 上的 bash 中，有没有办法更改大文件中的几个字节/字符？例如，寻找 x 的位置，然后选择性地删除一些字符，然后插入一些字符。我更喜欢在 bash 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T00:45:58.707

通常，不可能对更改编辑点之后字符位置的文件进行“编辑”......除非通过读取和重写编辑点之后的所有字符。

其原因是文件表示方式和文件系统 API 工作方式的基础。而这些又源自物理存储设备的工作方式。

因此，需要实现一个通用的解决方案（伪代码）：

```
# Replace N bytes starting at position P with bytes B1, B2,...

open file in "random access, no truncation" mode 
seek to N + P
read remainder of file into a buffer.
seek to N
write bytes B1, B2, ...
write bytes from the buffer
close 
```

（您可以避免将整个“文件的剩余部分”放入缓冲区，但逻辑更复杂。并且与我试图解释的内容相切......）

无论如何，我不知道现有的实用程序可以执行上述操作，但是如果您愿意，您可以编写一个临时程序来执行此操作。

* * *

如果您要替换的字节数与替换字节数完全相同，您*可以*通过就地更新来做到这一点。根据[如何用 dd 覆盖二进制文件的某些字节？](https://stackoverflow.com/questions/7290816/how-to-overwrite-some-bytes-of-a-binary-file-with-dd)您可以使用“dd”命令执行此操作。（答案演示了一个 1 字节的就地更新。）

# perl - 在 perl 中将新行写入文件

> ID：16203569
> 
> 赞同：1
> 
> 时间：2013-04-24T22:51:52.137
> 
> 标签：perl

我正在学习 perl 并编写一个脚本来将脚本目录树中的所有内容输出到一个文件中。问题出在文本文件中，即使我包含“\n”，整个输出也在一行上。我将保存代码打印到控制台，并在那里得到所需的结果，即每行一个条目。

```
#!/usr/bin/perl -w

use Cwd;
use File::Find;
use strict;

my $file = "temp.txt";
my $dir  = getcwd;

unless ( open FILE, '>>' . $file ) {
    die "\nUnable to create $file\n";
}

find( \&print_type, $dir );

sub print_type {
    if (-f) {
        print FILE "File: " . "$_\n";
        print "File: " . "$_\n";
    }
    if (-d) {
        print FILE "Directory: " . $_ . "\n";
        print "Directory: " . $_ . "\n";
    }
}
close FILE; 
```

我还尝试在“目录：”之前放置一个 \n，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:22:41.717

结果代码工作得很好，但我使用 Windows 记事本读取我的输出文件，它不识别“\n”，我只需要在几乎任何其他文本编辑器中打开它就可以看到（记事本++，写字板，emacs）。

如果我不使用 Cygwin，记事本可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T10:41:08.587

以 APPEND 模式或 WRITE 模式打开文件，并使用打开的文件描述符将数据写入和附加到文件中，使用 perl 中的 PRINT stantment。在 Linux 中，只考虑了“\n”，不适用于 WINDOW 用户，因此 Linux 用户在每一行末尾附加一个额外的字符，称为 NEWLINE“\n”；

# orchardcms - 在 Orchard CMS 中，如何在前端将某个 ContentType 的所有内容显示为项目符号列表？

> ID：16203575
> 
> 赞同：0
> 
> 时间：2013-04-24T22:52:14.860
> 
> 标签：orchardcms

例子：

1.  创建一个具有名称 ContentField 的新产品 ContentType。
2.  创建十个作为 Product ContentType 实例的新 ContentItem。
3.  在项目符号列表中显示这些新 ProductContentItem 的名称。

这似乎应该是微不足道的，但对我来说并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:54:34.233

创建一个查找所有 Product 类型的内容项的投影。使用列表类型创建自定义显示，并将项目显示类型指定为 BulletList。然后添加到您的主题放置文件中，例如：

```
<Match ContentType="Product">
    <Match DisplayType="BulletList">
        <!-- Hide all parts and fields except Name field -->
        <Place Parts_Title="-" /> <!-- etc. -->
        <Place Fields_Input="Content:1" /> <!-- Don't hide your name field -->
    </Match>
</Match> 
```

根据需要添加样式等

# ruby-on-rails - Rails 关联：如何通过多个自引用条件限制/限定 has_many :through？

> ID：16203576
> 
> 赞同：1
> 
> 时间：2013-04-24T22:52:27.317
> 
> 标签：ruby-on-rails, associations, conditional-statements, has-many-through

最好的方法是什么？我正在尝试这样的事情，但感觉......错了。（注意：这都是关于 has_many 关联中的 :conditions ......）

```
class Submission < ActiveRecord::Base
  belongs_to :checklist
  has_many :jobs, :through => :checklist, :source => :job, :conditions => ["jobs.archived = false OR jobs.archived_at > #{self.created_at} OR jobs.created_at < #{self.created_at}"]
end 
```

导轨 3.2.11，红宝石 1.9.3

**我正在尝试做的事情**

我需要在 has_many :through 关联上传递多个条件，*并*参考“自我”模型在这些条件下进行比较。

我找到了具有多种条件的示例。我找到了自我引用比较的例子。但是我找不到这两个元素的任何东西。这让我觉得我做错了。

**背景和定义**

提交记录了检查表及其相关作业在某个时间点的快照。因此，我希望能够说“submission.jobs”并查看在创建提交本身时与提交清单相关联的工作。*

*它实际上稍微复杂一些：我想要创建提交时存在且当时尚未存档的作业。

清单是动态的并且会随着时间而改变，但我总是通过一个本土的归档系统保持历史记录的完整性，因此当为该清单创建提交时，清单上的作业将是 Job.created_at 之前的清单的作业Submission.created_at（尚未归档）。

因此，尽管一个提交属于_一个清单，并且清单有_许多作业，但对于特定提交来说唯一重要的作业是在创建提交时存在（并且尚未归档）的作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:49:05.363

您可以使用范围，也可以使用`Job`添加到的方法`Submission`：

```
class Job < ActiveRecord::Base
  scope :unfinished_since, lambda { |timestamp| 
    where("archived = ? OR archived_at > ? OR created_at < ?", false, timestamp, timestamp)        
  }
end

class Submission < ActiveRecord::Base
  belongs_to :checklist
  has_many :jobs, :through => :checklist, :source => :job

  def unfinished_jobs
    jobs.unfinished_since(self.created_at)
  end
end 
```

# mysql - 我需要检索 invoice-due_date 和 invoice_total。

> ID：16203578
> 
> 赞同：0
> 
> 时间：2013-04-24T22:52:45.020
> 
> 标签：mysql

我需要检索 invoice-due_date 和 invoice_total。

然后在查询中写下 invoice_total 值的 10% 的条件和其他结果，加上 UP 到 invoice_total 值的 10%。都在同一个声明中。

发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:57:58.603

```
select invoice-due_date, invoice_total, invoice_total+invoice_total*.1+(UP)*.1 as newprice

from table 
```

# jsf - 无法在列表中设置输入值 使用 a4j 时：重复

> ID：16203581
> 
> 赞同：1
> 
> 时间：2013-04-24T22:52:55.660
> 
> 标签：jsf, jsf-1.2, repeat, ajax4jsf

我正在`List<String>`使用可编辑文本框内的 UI显示信息`<a4j:repeat>`。用户可以单击 UI 上的按钮来添加更多文本框并向其中添加值（使用 ajax 调用）。我的问题是我无法将用户输入的值设置回`List<String>`

下面是视图

```
<a4j:repeat value="#{implMemoMBean.objA.objB.objC.listBillNumber}" var="item">                      
    <h:inputText class="list-bill"  value="#{item}" />                                          
</a4j:repeat> 
```

当用户单击“添加”按钮时要添加的 bean 中的代码如下

```
objA.objB().objC().getListBillNumber().add(""); 
```

这增加了`String`一个`List<String>`重新呈现 UI，然后会显示一个额外的文本框。在此文本框中输入的值未在回发时设置。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:01:54.050

该类`String`是不可变的，并且没有值的设置器。没有什么类似的`String#set(newString)`。getter 基本上就是`Object#toString()`方法。

您需要直接在`List`按循环索引上获取/设置值。您可以使用该`rowKeyVar`属性来定义当前循环索引的 EL 变量名称。

```
<a4j:repeat value="#{implMemoMBean.objA.objB.objC.listBillNumber}" rowKeyVar="i">                       
    <h:inputText class="list-bill" value="#{implMemoMBean.objA.objB.objC.listBillNumber[i]}" />                                           
</a4j:repeat> 
```

请注意，您不需要用于`listBillNumber`. EL 将通过 获取项目`List#get(index)`并设置项目`List#add(index,item)`。

# c# - Crystal Reports 首次运行时崩溃。之后工作正常

> ID：16203583
> 
> 赞同：1
> 
> 时间：2013-04-24T22:52:59.693
> 
> 标签：c#, visual-studio-2010, crystal-reports

在开发机器上一切正常（win8 x64）

当部署到 32 位 windows xp 机器时，程序运行良好，直到我尝试打印报告。它得到这个未处理的异常：

```
CrystalDecisions.Shared.CrystalReportsException: Load report failed. ---> System.Runtime.InteropServices.COMException: Unsupported Operation. A document processed by the JRC engine cannot be opened in the C++ stack. 
```

[http://pastebin.com/b0SbcZJM](http://pastebin.com/b0SbcZJM)（异常的完整细节）

退出应用程序并再次打开后。报告按应有的方式工作。

有什么帮助吗？这几天我一直把头撞在墙上。

# java - Android java使用菜单按钮切换页面

> ID：16203592
> 
> 赞同：0
> 
> 时间：2013-04-24T22:53:53.043
> 
> 标签：java, android, toggle

我希望在我的应用程序中创建一个单独的页面（布局和子活动），您可以通过单击菜单按钮访问该页面。我希望它以当您再次单击菜单按钮时返回 MainActivity 和 activity_mail.xml 布局的方式切换。

我用这段代码取得了一定程度的成功：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    setContentView(R.layout.settings);

    return true;
} 
```

这成功切换到 settings.xml 布局。但是，当再次按下菜单按钮时，如何返回到 activity_main.xml 布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:18:46.330

然而，这不是`optionsMenu`创建的目的。有很多可能的方法可以做到这一点。一种可能的方法是创建一个布尔字段变量。

```
private boolean isInMailLayout = true;
[...]
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    if(isInMainLayout){
        setContentView(R.layout.settings);
        isInMailLayout = false;
    }
    else {
        setContentView(activity_mail.xml);
        isInMailLayout = true;

    }

    return true;
} 
```

### 的目的`optionsMenu`：

optionsMenu 应该在[溢出下拉列表](http://clickortap.files.wordpress.com/2011/11/overflow.png)（如果您使用 ActionBar）或[手机底部的网格](http://www.authsmtp.com/images/android-2-2-4.jpg)（如果您不使用 ActionBar）中显示菜单。

另一方面，您不想显示菜单，而是更改布局。您可能想为此启动一个新活动。

# doxygen - doxygen 配置文件中的 HTML_EXTRA_STYLESHEET 设置

> ID：16203593
> 
> 赞同：2
> 
> 时间：2013-04-24T22:53:59.030
> 
> 标签：doxygen

我正在使用 doxygen 1.7.6.1（这似乎是 Ubuntu 可用的 deb 包中可用的最新版本），它似乎不支持配置文件设置 HTML_EXTRA_STYLESHEET 以及我想使用的其他几个。

所以我从二进制发行版（1.8.3.1）安装了一个新版本。这是我为快速测试所做的：

1.  编辑我的 Doxyfile 添加行 HTML_EXTRA_STYLESHEET = custom.css
2.  将 custom.css 文件放在与 Doxyfile 相同的目录中
3.  运行 doxygen 并生成输出

在结果输出中，没有对 custom.css 文件的引用，在输出目录中也没有它的副本。

所以......我做错了什么？

# java - 如何让用户在 Java 中命名数组？

> ID：16203595
> 
> 赞同：-2
> 
> 时间：2013-04-24T22:54:19.153
> 
> 标签：java, arrays, naming

我知道在用 Java 编写程序时如何命名数组，但是我如何将它写入询问用户数组名称的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:57:18.737

通常，在定义变量之后，您无法更改变量的名称（无论是数组还是任何其他数据类型），它已在程序的源代码中一成不变。也许你的意思是别的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:18:20.250

您可以通过使用 将字符串映射到数组来实现所需的效果`Map<String,Array>`。有关更多详细信息，请参阅此答案：[Assigning variables with dynamic names in Java](https://stackoverflow.com/questions/6729605/dynamic-variable-names-in-java)

# android - Android SearchView 建议出现在小部件上方

> ID：16203601
> 
> 赞同：0
> 
> 时间：2013-04-24T22:54:46.370
> 
> 标签：android, searchview

我在远离操作栏的地方使用 SearchView，作为活动主布局中的视图。问题是建议出现在这样的小部件上方

![在此处输入图像描述](https://i.stack.imgur.com/vI6hi.png)

如何在小部件下方显示它？我错过了一些配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:04:21.897

> 如何在小部件下方显示它？我错过了一些配置吗？

这是 的正常行为`AutoCompleteTextView`，如果它下面没有可用空间。所以除非你不把它移到布局的顶部，否则你不能。建议框永远不会与键盘重叠。

# javascript - 如何使用 Angular.js 进行重定向？

> ID：16203602
> 
> 赞同：2
> 
> 时间：2013-04-24T22:54:47.327
> 
> 标签：javascript, angularjs

我想重定向到另一条路线，并且必须刷新页面并在服务器端进行处理，所以`$location.path(url)`无法帮助我。我试过了`window.location(url)`，但我有这个错误：`window.location is not a function`

我的 app.js：

```
 'use strict';
var app = angular.module('myApp', []).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.when('/', {
        templateUrl: 'partials/index'});
    $routeProvider.when('/logout', {
        controller: 'logoutCtrl'});
    $routeProvider.otherwise({
        redirectTo: '/'});
    $locationProvider.html5Mode(true);
  }]); 
```

我的注销Ctrl：

```
function logoutCtrl($scope, $location){
    $apply(function() { 
        $location.path("/users/logout"); 
    });
} 
```

部分/索引包含此链接：

```
a(href='/logout') Logout 
```

现在我将展示如何使用 Express.js 管理我的路由服务器端：

```
app.get('/', ctrl.index);
app.get('/partials/:name', ctrl.partials);
app.get('/users/logout', ctrl.logout);

exports.logout = function(req, res)
{
  console.log('logout');
  req.session.destroy(function(err){ // I destroy my session
   res.redirect('/'); // redirection to '/'
  });
} 
```

现在，当我单击“注销”时，什么也没有发生，我只是`localhost:3000/logout`在我的栏中看到这条路线，但是如果我键入`localhost:3000/users/logout`我会得到预期的结果（会话被破坏并重定向到 '/' ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:01:08.460

> 使用无效代码的示例将很容易回答这个问题，但是有了这个 > 信息，我认为最好的方法是您在 > angularjs 摘要之外调用 $location.path。
> 
> 尝试对指令执行此操作`scope.$apply(function() {$location.path("/route");});`“
> 
> -[雷南·托马尔·费尔南德斯](https://stackoverflow.com/a/11908282/2872121)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T04:39:03.567

只需：

```
window.location.assign(url); 
```

或者：

```
window.location.replace(url); 
```

它不会将当前页面保存在浏览器会话历史记录中。

# javascript - JS if...else 和 && 与被测变量的值不匹配

> ID：16203605
> 
> 赞同：-2
> 
> 时间：2013-04-24T22:55:00.833
> 
> 标签：javascript

我正在尝试编写一些验证js来选择最具体的值（过滤器3中的值比过滤器2更具体，等等）

以下仍然返回“null”，我不知道为什么？

```
var filter1 = ["ELEC"];
var filter2 = new Array();
var filter3 = new Array();

function getParentCode(filter1, filter2, filter3)
{
    if (filter1 === null && filter2 === null && filter3 === null)
    {
        return null;
    }
    else if (filter1 !== null && filter2 === null && filter3 === null)
    {
        return filter1;
    }
    else if (filter1 !== null && filter2 !== null && filter3 === null)
    {
        return filter2;
    }
    else if (filter1 !== null && filter2 !== null && filter3 !== null)
    {
        return filter3;
    }
    else
    {
        return "Error";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:05:11.543

从我可以收集到的你发送给函数的参数中，正确的代码可能是这样的：

```
function getParentCode(filter1, filter2, filter3){
  if(filter3.length>0) return filter3;
  if(filter2.length>0) return filter2;
  if(filter1.length>0) return filter1;
  return null;
} 
```

如果您确实是指 null，那么请遵循 Software Monkey 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:59:16.247

为什么不简单：

```
function getParentCode(filter1, filter2, filter3) {
    if      (filter3!==null) { return filter3; }
    else if (filter2!==null) { return filter2; }
    else if (filter1!==null) { return filter1; }
    else                     { return null;    }
    } 
```

# objective-c - 如何在 ODRefeshControl 底部添加标签

> ID：16203613
> 
> 赞同：0
> 
> 时间：2013-04-24T22:55:33.683
> 
> 标签：objective-c, xcode, pull-to-refresh

在我使用 Apples UIRefreshControl 之前，我可以在刷新控件的底部显示一个标签，如下所示：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(addReceipt:)
             forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;

    NSString *s = @"Swipe Down to Add Receipt";
    NSMutableAttributedString *a = [[NSMutableAttributedString alloc] initWithString:s];
    [a addAttribute:NSForegroundColorAttributeName value:[UIColor darkGrayColor] range:NSRangeFromString(s)];
    refreshControl.attributedTitle = a; 
```

现在我切换到自定义活动指示器的 ODRefreshControl，但我无法找到解决方案！我的 ODRefreshControl 代码（只是为了它工作）：

```
ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:self.tableView];
    [refreshControl addTarget:self action:@selector(dropViewDidBeginRefreshing:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:11:48.803

使用此控件似乎无法开箱即用地支持这种类型的东西。看一下代码，它似乎不支持`attributedTitle`或类似的东西。另外，我假设您正在使用此控件：

[https://github.com/Sephiroth87/ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)

如果是这种情况，您可能有几个选择：

1.  您必须自己在 ODRefreshControl 源中编写一些代码来添加标签，很可能是在`initWithScrollView`方法中，但这可能并不完全准确。
2.  要求开发人员在未来的版本中添加它（看起来你已经这样做了）。
3.  返回使用 Apple Refresh 控件。`ODRefreshControl`如果你想要一个标题标签，你为什么更喜欢？

# javascript - Wordpress 中的 Google Maps API Javascript

> ID：16203618
> 
> 赞同：4
> 
> 时间：2013-04-24T22:56:18.863
> 
> 标签：javascript, wordpress

希望大家能回答这个问题！我认为它应该相对容易，但我似乎无法掌握它。

您如何在 Wordpress 帖子/页面中加载 Google Maps API Javascript？

Wordpress Codex 似乎建议在您的主题标题中引用您的 javascript 文件，然后您需要调用帖子中的函数。

我在标题中引用了 Google Javascript 文件，如下所示：

```
<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBuU_0_uLMnFM-2oWod_fzC0atPZj7dHlU&sensor=false"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript"> 
```

然后到我的 javascript 文件，其中包含标头中的所有 API 代码：

```
<script type="text/javascript" src="http://runforlifeuk.com/rhedeg/wp-content/javascript/trefilmap.js"></script> 
```

然后我在帖子中使用了以下代码：

```
<script type="text/javascript" src="http://runforlifeuk.com/rhedeg/wp-content/javascript/trefilmap.js">
</script>
<script type="text/javascript">
</script>
<div id="map-canvas">
</div> 
```

但这只会创建一个空框。我尝试在帖子中调用预定义的 Google JS 函数，但这似乎也不起作用。

有没有人在 Wordpress 上实施谷歌地图已经这样做了？我可以将所有代码直接粘贴到帖子中，但谷歌地图出现了很多错误。

任何想法将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-09T14:40:47.033

使用 WordPress，您永远不应该将 js 硬编码到页眉或页脚中。而是`wp_enqueue_script`在函数内部使用与functions.php 中的动作挂钩的`wp_enqueue_scripts`函数。例如：

```
function add_scripts() {
  wp_enqueue_script('google-maps', 'https://maps.googleapis.com/maps/api/js?key=AIzaSyBuU_0_uLMnFM-2oWod_fzC0atPZj7dHlU&sensor=false');
  wp_enqueue_script('google-jsapi','https://www.google.com/jsapi');     
}
add_action('wp_enqueue_scripts', 'add_scripts') 
```

您可能希望在函数名称前加上一个唯一的 slug。您可以添加依赖项版本号或将其移动到带有其他变量的页脚，请参阅 codex 以获取更多信息。在您的情况下，您可能想要包装`wp_enqueue_script`一个条件，以便它只加载到您需要它的帖子或页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:11:38.780

我刚刚看了你的`http://runforlifeuk.com/rhedeg/wp-content/javascript/trefilmap.js`文件

你不应该有`<script>`标签！

```
<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBuU_0_uLMnFM-2oWod_fzC0atPZj7dHlU&sensor=false"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript"> 
```

我建议您查看 javascript 控制台以了解错误并学习使用[`wp_enqueue_script()`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)将 javascript 添加到您的页面。

# java - 在 Python 中解密由 Java 以 3DES 加密的数据

> ID：16203619
> 
> 赞同：2
> 
> 时间：2013-04-24T22:56:39.353
> 
> 标签：java, python, encryption, pycrypto, 3des

我正在尝试使用 PyCrypto 解密数据。数据使用 javax.crypto 包在 Java 中编码。加密是三重 DES（在 Java中称为“ [DESede ”）。](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Cipher)据我所知，默认设置用于所有内容。但是，当我在 Python 中解密数据时，数据总是存在问题。

这是执行加密/解密的 Java 代码：

```
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;
import java.security.spec.KeySpec;

public final class Encrypter
{
    public static final String DESEDE_ENCRYPTION = "DESede";

    private KeySpec keySpec;
    private SecretKeyFactory keyFactory;
    private Cipher cipher;

    private static final String UNICODE_FORMAT = "UTF8";

    public Encrypter(String encryptionKey)
        throws Exception
    {
        byte[] keyAsBytes = encryptionKey.getBytes(UNICODE_FORMAT);
        keySpec = new DESedeKeySpec(keyAsBytes);
        keyFactory = SecretKeyFactory.getInstance(DESEDE_ENCRYPTION);
        cipher = Cipher.getInstance(DESEDE_ENCRYPTION);
    }

    public String encryptString(String unencryptedString)
    {
        SecretKey key = keyFactory.generateSecret(keySpec);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] cleartext = unencryptedString.getBytes(UNICODE_FORMAT);
        byte[] ciphertext = cipher.doFinal(cleartext);

        BASE64Encoder base64encoder = new BASE64Encoder();
        return base64encoder.encode(ciphertext);
    }

    public String decryptString(String encryptedString)
    {
        SecretKey key = keyFactory.generateSecret(keySpec);
        cipher.init(Cipher.DECRYPT_MODE, key);
        BASE64Decoder base64decoder = new BASE64Decoder();
        byte[] ciphertext = base64decoder.decodeBuffer(encryptedString);
        byte[] cleartext = cipher.doFinal(ciphertext);

        return bytesToString(cleartext);
    }

    private static String bytesToString(byte[] bytes)
    {
        StringBuilder sb = new StringBuilder();
        for (byte aByte : bytes)
        {
            sb.append((char) aByte);
        }
        return sb.toString();
    }
} 
```

但是，当我采用此代码生成的 base64 编码字符串之一时，我无法对其进行解码。这是我尝试过的一些python代码的示例：

```
from Crypto.Cipher import DES3
import array

key = <value of the key, as a hex string>
encryptedvalue = <the value that's encrypted, as a string>
keyarray = array.array('B', key.decode("hex"))
des = DES3.new(keyarray)
value = des.decrypt(encryptedvalue.decode('base64'))

value.decode('utf-8') # Gives me an error 
```

我得到的错误看起来像

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xa7 in position 6: invalid start byte 
```

这意味着在此过程中的某个地方，我没有正确设置某些东西。我已经为此工作了几个小时，甚至试图查看[实现 DESede的](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunJCEProvider)[SunJCE 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/crypto/provider/SunJCE.java)，以查看它们使用的默认值，但无济于事。我将把它用作自动运行的脚本的一部分，所以我真的宁愿不必使用 Java 来进行解密。有谁知道我需要做什么才能正确解密我的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:12:57.957

我所要做的就是改变这条线

```
keyarray = array.array('B', key.decode("hex")) 
```

对此：

```
keyarray = array.array('B', key.encode("utf-8")) 
```

这与 java 对密钥进行编码的方式相匹配，允许我拥有正确的加密密钥。

* * *

如果您来到这里希望从这个问题中学到一些东西，这里有一些一般性建议：

1.  仔细检查你的假设：关键字符串是一个十六进制字符串，所以我认为它是这样使用的。
2.  确保你知道你的假设是什么：我没有有意识地考虑我是如何对密钥的使用方式做出假设的。这往往是编程和一般生活中非常常见的问题。
3.  检查*所有*的值（*特别是*当你有一个[Oracle](http://en.wikipedia.org/wiki/Oracle_%28software_testing%29)时）：查看字节数组中的值是让我意识到我的问题的原因。

# javascript - Ember - 处理视图之外的点击

> ID：16203620
> 
> 赞同：7
> 
> 时间：2013-04-24T22:56:39.620
> 
> 标签：javascript, jquery, ember.js

想知道是否有人在使用 Ember 时想出了更好的方法来处理 div 外部的点击？我知道带有全局单击处理程序的 jQuery 方式，您必须指定对某些实例要执行的每个操作，但我希望有人想出了一种在 Ember 视图中声明它的方法。同样，我尝试了 ol' 为 div 提供选项卡索引并使用 on blur，但 Ember 操作似乎不允许这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T16:00:01.170

感谢您的输入。我又回去阅读了关于 jQuerys 的文档`.on`。我不知道您可以为事件命名。所以我接受了这两条评论并将它们与类似的东西结合起来。

```
didInsertElement: function() {
    Ember.run.next(this, 'attachClickHandler');
},

attachClickHandler: function (){
    var temp = this;

    $(window).on("click." + temp.elementId, function (e){
        //...event here
    });
},

detachClickHandler: function (){
    $(window).off("click." + this.elementId);
}, 
```

这允许事件对每个视图实例都是特定的，这正是我想要的。多谢你们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-26T20:03:49.610

你可能会发现[ClickElsewhereMixin](https://gist.github.com/stevekane/6356006)很有用

只需在任何组件上包含 mixin 并实现 onClickElsewhere()

# javascript - 数据输入安全和 html 标签

> ID：16203626
> 
> 赞同：0
> 
> 时间：2013-04-24T22:57:05.997
> 
> 标签：javascript, jquery, asp.net-mvc, security

我正在使用 asp.net mvc，我有一个弹出模式窗口，用户可以在其中输入一些文本并将其保存到数据库中。该文本也显示在屏幕上，从数据库中读取。

对于初学者，我想确保数据库中不会显示有害标签——我需要对输入进行编码/解码吗？目前，输入 alert('hello') 被保存到数据库中，当再次显示时，它显示为文本 - 所以我想我没问题，但想要确认。

一个问题，当用户保存它时，我也会使用这个文本，使用 javascript，将它添加到页面上的 div 并使用上面的文本，这确实会触发弹出警报。我怎样才能防止这种情况？

我正在使用不同的文本拉丁文、西里尔文等，所以不想要任何不寻常的字符！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:28:06.653

您应该应用删除所有非法字符的递归。用户不需要的任何东西都应该是非法的。如果只应使用字母和数字，请去掉所有特殊字符。确保递归地应用它。完成后，您应该对所有输入[进行 HTML 编码](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)，以使其（大部分）无害。

不要仅依靠 HTML 编码来确保您的安全。有很多方法可以击败它，攻击者必须应对的层数越多，对他/她来说就越困难。

这个 SO 问题可能对您使用 HTML 编码有所帮助： [来自 Class Library 的 HtmlEncode](https://stackoverflow.com/questions/1144535/htmlencode-from-class-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:04:35.613

你试过标签吗？MVC 非常适合这种类型的标准验证，并且倾向于将标签折叠到`&lt;script&gt;`其中，除非该字段明确标记为`[AllowHtml]`.

重要的是要区分不`alert('hello')`包含任何危险并且可以很好地进入数据库。

您直接将此文本作为 javascript 中的可执行文件放置*是*一个问题。如果不是`alert('hello')`它是一个 ajax 调用，或者我最喜欢的有趣测试，`document.write()`. 当您说您正在使用 javascript 将文本添加到 div 时，它不应该执行该文本。将其保留为字符串，并确保`.toString()`在您担心它不是字符串的任何地方使用它。

# java - 用户自定义文件读取函数导致 NullPointerException Java

> ID：16203627
> 
> 赞同：1
> 
> 时间：2013-04-24T22:57:07.940
> 
> 标签：java, arrays, string, file-io

我必须从文本文件中读取一些信息到不同的字符串数组。所以，我为这个任务写了一个方法。这是代码：

```
private String[] stateNames;
.
.
.
readHelper(stateNames);
.
.
.
private void readHelper( String[] str ) // str is stateNames
    {
        try
        {
            strLine = bufferReader.readLine();
            String[] tokens = strLine.split(",");
            str = new String[ tokens.length ];
            copyStr2Str(tokens, str);
            insertionSort( str ); // Everything is fine, str contains the data
        }
        catch (IOException ex)
        {
            Logger.getLogger(Generator.class.getName()).log(Level.SEVERE, null, ex);
        }

    } // End of readHelper() 
```

但是在`readHelper()`执行后 stateNames 变为`null`. 我想，我会导致一些指针错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:01:32.410

在 Java 中，参数作为引用的副本传递。

当你这样做时，

```
str = new String[ tokens.length] 
```

您丢弃方法调用传递的引用并创建一个新的引用（它只存在到`try`创建的范围结束时）。original`stateNames`一直指向原始值，即`null`.

修改方法以返回`str`数组并将其分配给`stateNames`.

更新回答评论：

要理解这一点，请尝试此代码。

```
public class MyClass {
    private List<String> originalList1 = new ArrayList<String>();
    private List<String> originalList2 = new ArrayList<String>();

    public void run() {
       this.test(originalList1, originalList2);
    }

    public void test(List<String> list1, List<String> list2) {
       list1 = new ArrayList<String>();
       list1.add(new String("Hello"));
       list2.add(new String("World"));
       System.out.println("list1.size -> " + list1.size());
       System.out.println("originalList1.size -> " + originalList1.size());
       System.out.println("list2.size -> " + list2.size());
       System.out.println("originalList2.size -> " + originalList2.size());
    }
  } 
```

由于您为 list1 分配了一个新对象，因此原始引用丢失，因此原始对象不受影响（但对于 list2，您仍在使用原始对象）。由于您在代码中创建了一个新的`String[]`，因此您不再使用原始代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:02:09.793

您应该将数组作为方法的返回值返回。

```
private String[] readHelper()
    {
        String[] str = null;
        try
        {
            strLine = bufferReader.readLine();
            String[] tokens = strLine.split(",");
            str = new String[ tokens.length ];
            copyStr2Str(tokens, str);
            insertionSort( str ); // Everything is fine, str contains the data
        }
        catch (IOException ex)
        {
            Logger.getLogger(Generator.class.getName()).log(Level.SEVERE, null, ex);
        }
        return str;
    } // End of readHelper() 
```

# batch-file - 将命令输出分配给批处理文件中的变量

> ID：16203629
> 
> 赞同：48
> 
> 时间：2013-04-24T22:57:13.023
> 
> 标签：batch-file, variables, flash, cmd, registry

我正在尝试将命令的输出分配给一个变量——例如，我正在尝试将当前的闪存版本设置为一个变量。我知道这是错误的，但这是我尝试过的：

```
set var=reg query hklm\SOFTWARE\Macromedia\FlashPlayer\CurrentVersion> 
```

或者

```
reg query hklm\SOFTWARE\Macromedia\FlashPlayer\CurrentVersion >> set var 
```

是的，正如你所看到的，我有点迷路了。任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-04-24T23:23:10.343

已经设计了一种方法，但是这样您就不需要临时文件。

```
for /f "delims=" %%i in ('command') do set output=%%i 
```

但是，我确信这有其自身的例外和限制。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-24T23:03:33.503

[这篇文章](https://stackoverflow.com/questions/2768608/batch-equivalent-of-bash-backticks)有一种方法可以实现这一点

> from (zvrba) 你可以通过首先将输出重定向到一个文件来做到这一点。例如：

```
echo zz > bla.txt
set /p VV=<bla.txt
echo %VV% 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T23:40:39.087

您不能将进程输出直接分配给 var，您需要使用 For /F 循环解析输出：

```
@Echo OFF

FOR /F "Tokens=2,*" %%A IN (
    'Reg Query "HKEY_CURRENT_USER\Software\Macromedia\FlashPlayer" /v "CurrentVersion"'
) DO (
    REM Set "Version=%%B"
    Echo Version: %%B
)

Pause&Exit 
```

[http://ss64.com/nt/for_f.html](http://ss64.com/nt/for_f.html)

PS：如果需要，更改使用的 reg 密钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-11T17:05:42.217

好的，这里有一些更复杂的示例供**For /F使用**

```
:: Main
@prompt -$G
    call :REGQUERY  "Software\Classes\CLSID\{3E6AE265-3382-A429-56D1-BB2B4D1D}"

@goto :EOF

:REGQUERY
:: Checks HKEY_LOCAL_MACHINE\ and HKEY_CURRENT_USER\ 
:: for the key and lists its content

    @call :EXEC "REG QUERY  HKCU\%~1"
    @call :EXEC "REG QUERY "HKLM\%~1""

@goto :EOF    

:EXEC
    @set output=

    @for /F "delims=" %%i in ('%~1 2^>nul') do @(
        set output=%%i
    )

    @if not "%output%"=="" (
        echo %1 -^> %output%
    )

@goto :EOF 
```

我将它打包到子函数**:EXEC**中，因此它所有令人讨厌的实现细节都不会乱扔主脚本。所以它有一些批量教程。注释'关于代码：

1.  通过**call :EXEC*命令***执行的命令的输出存储在**%output%**中。*批处理 cmd 不关心范围，因此 %output% 也将在主脚本中可用。*
2.  **@**开头只是装饰，用于抑制回显命令行。您可以将它们全部删除，然后在第一行**关闭一些@echo**，这真的很不喜欢。然而，像这样我发现调试更好。第二个装饰是**提示符 -$G**。它可以使命令提示符看起来像这样**->**
3.  我使用**::**而不是**rem**
4.  **%~1**中的波浪号（~）是从第一个参数中删除引号
5.  **2^>nul**用于抑制/丢弃*stderr*错误输出。通常你会通过**2>nul**来做。那么**^**批处理转义字符避免了早期解析重定向器（>）。稍后在脚本中有一些类似的使用：`echo %1 -^>...`所以 ^ 使得通过 echo 输出 '>' 成为可能，这是不可能的。
6.  即使比较`@if not "%output%"==""`看起来像大多数常见的编程语言 - 它可能与您预期的不同（如果您不习惯 MS-batch）。好吧，删除开头的“@”。研究输出。将其更改为`not %output%==""`-rerun 并考虑为什么这不起作用。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-26T02:20:36.503

这对我来说是工作

```
@FOR /f "delims=" %i in ('reg query hklm\SOFTWARE\Macromedia\FlashPlayer\CurrentVersion') DO set var=%i
echo %var% 
```

# sql - 存储 sql 查询输出并将其通过电子邮件发送到 DL 或特定电子邮件 ID

> ID：16203630
> 
> 赞同：0
> 
> 时间：2013-04-24T22:57:17.713
> 
> 标签：sql, sql-server, batch-file

我想从 .bat 文件运行 sql 查询。我了解如何创建 .bat 文件和 .sql 文件，然后从 .bat 文件中调用 .sql 文件。我的问题是如何将其输出存储在任何位置，然后将其发送到电子邮件。

我当前的 .bat 看起来像

```
osql -S <ServerName> -U <User Name> -P <Password> < mysqlfile.sql 
```

...我的 .sql 文件运行以下查询

```
select * from sysssislog where event='onerror' order by starttime desc 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T00:14:24.973

您可以设置 SQL Server 2008 数据库邮件，如下[所示](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)

然后，您可以通过电子邮件发送查询结果，如下[所示](https://stackoverflow.com/questions/658780/passing-stored-procedure-to-sp-send-dbmail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:24:31.243

我会使用[Blat](http://www.blat.net/)或 VBscript 来做到这一点。

```
osql -S <ServerName> -U <User Name> -P <Password> -o Out.txt < mysqlfile.sql
Blat out.txt -to <recipient> -s <subject> -server <ip or hostname of SMTP server:<port> 
```

这是一个创建 VBScript 来执行此操作的批处理文件。

```
@echo off
setlocal

if exist "out.txt" del "out.txt"
osql -S Server -U user -P password -o Out.txt < mysqlfile.sql
set vbs_=Email.vbs
set skip=
findstr "'%skip%VBS" "%~f0" > "%vbs_%"
cscript //nologo "%vbs_%"
ping -n 3 localhost>nul
if exist "%vbs_%" del "%vbs_%"
goto :eof

 Const ForReading = 1, ForWriting = 2                      'VBS
 sFile="Out.txt"                                           'VBS
 Set oFso = CreateObject("Scripting.FileSystemObject")     'VBS
 Set oFile = oFso.OpenTextFile(sFile, ForReading)          'VBS
 Set oMail=CreateObject("CDO.Message")                     'VBS
 sSchema="http://schemas.microsoft.com/cdo/configuration/" 'VBS
     with oMail.Configuration.Fields                       'VBS
     .Item(sSchema & "sendusing")= 2                   'VBS  
     .Item(sSchema & "smtpserver")= "YourServer"       'VBS
     .Item(sSchema & "smtpserverport") = 25              'VBS 
     .Update                                           'VBS                                              
     end with                                              'VBS 
 oMail.Subject="SQL Log"                                   'VBS
 oMail.From="email@domain.com"                             'VBS
 oMail.To="Sendto@someother.com"                           'VBS
 oMail.TextBody = oFile.ReadAll                            'VBS 
 oMail.Send                                                'VBS
 oFile.Close                                               'VBS 
 set oMail=nothing                                         'VBS
 set oFile = Nothing                                       'VBS 
```

# c - C 外部和指针

> ID：16203632
> 
> 赞同：1
> 
> 时间：2013-04-24T22:57:30.827
> 
> 标签：c, scope, extern

我是 C 的新手，我必须说你我发现这个指针和引用的东西有点难以理解。我来自 Java，所以这一切都不存在，尽管一旦你习惯了它，有时你会有点迷茫，就像我现在一样。

我有我的头文件：

```
globals.h
    typedef struct {
    float *array;
    size_t used;
    size_t size;
} points;
extern points readedPoints; 
```

而且我的 .c 类具有我想在另一个文件中使用的功能。

```
 graph.c

    #include "globals"

    points readedPoints;

    void readFile( char* filename)
    {

        ...
            ...
    // I read floats from a file and store it in my
    // readedPoints. When i print, they are all there

            for(i=0; i < readedPoints.used;++i){                
                //fprintf(stderr, "%d", graphIndices[i]);
                fprintf(stderr, " %f\n", readedPoints.array[i]);
            }
    } 
```

然后在我使用该功能的 .c 中：

```
 init.c

#include "globals.h"

void Init(...){

   readFile("graph1.txt");

// here i do that same for-loop to check if 'readedPoints' can be accessed here, but it cant.

for(i=0; i < readedPoints.used;++i){                
            //fprintf(stderr, "%d", graphIndices[i]);
            fprintf(stderr, " %f\n", readedPoints.array[i]);
        }
} 
```

我不明白为什么。我将它声明为 extern，它已经在 readFile 函数内的“graph.c”中初始化，但我不能在其他 .c 文件中使用它。请有人解释我为什么以及我做错了什么。非常感谢

编辑。我收到错误：在最后一个 for 循环中访问冲突读取位置

![在此处输入图像描述](https://i.stack.imgur.com/MHHW1.png)

编辑：整个读取功能：

```
void readFile( char* filename)
{

    int i;
    int j;
    float n;
    int nn;
    int tags_x;

    int nrLines;
    int nrColumns;
    FILE* fp = fopen( filename, "r" );

    if ( fp == NULL )
    {
        fprintf( stderr, "ERRO na leitura do ficheiro %s\n", filename );
        exit( EXIT_FAILURE );
    }

    /* Read the number of lines */
    fscanf( fp, "%d", &nn );
    nrLines = nn;

    initFPoints(&readedPoints, nrLines*10);

    for(i = 0; i < nrLines-2;i++)
    {  
    for(j = 0; j < nrColumns;j++)
    {  
            //printf ("%f ", i);
            fscanf (fp, "%f", &n);
            //fprintf(stderr, " %f\n", n);
            insertFPoints(&readedPoints, n);
    }}
    fclose( fp );

// here it prints exactly what i want
//      for(i=0; i < readedPoints.used;++i){                
//          //fprintf(stderr, "%d", graphIndices[i]);
//          fprintf(stderr, " %f\n", readedPoints.array[i]);
//      }

}

void initFPoints(points *a, size_t initialSize) {
    a->array = (float *)malloc(initialSize * sizeof(float));
    a->used = 0;
    a->size = initialSize;
}

void insertFPoints(points *a, float element) {
    if (a->used == a->size) {
        a->size *= 2;
        a->array = (float *)realloc(a->array, a->size * sizeof(float));
    }
    a->array[a->used++] = element;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:10:11.453

在`readFile`您使用未初始化的值`nrColumns`并且很可能要求分配一个太大的缓冲区时，这意味着它`realloc()`失败并且您正在分配一个不确定的值`array`作为结果。

您需要确保已初始化，并且需要通过or`nrColumns`测试读取失败（文件比预期短）和内存分配失败，并优雅地处理错误情况。这很可能是您的错误所在。`malloc``realloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:27:18.200

调试器说指针的值为`0x00000003`，也就是三。三不是`float`内存中a的地址。指针变量具有这样的值的唯一方法是它未初始化。在使用之前，`array`您必须执行一行，例如

```
readedPoints.array = calloc( num_points, sizeof (float) ); 
```

这将与初始化其他字段一起完成

```
readedPoints.size = num_points;
readedPoints.used = 0; 
```

实际上Java*确实*有很多指针。它只是没有任何替代方案（因此无需提及`*`），它主要为您管理它们。但即使是 Java 也需要您指定动态数组的大小。你在这里所做的基本上是数组溢出。

# reporting-services - 具有多个日期（在 X 轴上）和每个状态一行的图表

> ID：16203633
> 
> 赞同：0
> 
> 时间：2013-04-24T22:57:53.353
> 
> 标签：reporting-services, charts, timeserieschart

使用 SSMS 2008 R2，我有一个包含销售订单列表的表格。每行有：

*   ID
*   日期
*   地位

我只对 ID 和状态感兴趣：

```
ODate   OStatus
------  -------
4-01    1
4-01    1
4-01    4
4-01    4
4-01    1
4-02    1
4-02    2
4-02    2
4-02    1
4-03    1
4-03    1
4-03    1
4-03    1
4-03    1
4-03    3
4-03    4
4-03    1
4-03    3
4-03    1
4-03    1
4-03    1 
```

我想要一个折线图：

*   每个状态一行；
*   X 轴显示日期；
*   Y 轴测量每天*在各自类别中*的总数：每天有多少 1、2、3 和 4。

我在 SQL 中尝试了许多无效的组合`GROUP BY`和选项。`COUNT`我知道我需要多个系列，但我得到一个错误或只是相同的总和导致水平线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:35:28.583

您可以根据上面的原始数据在报告级别进行所有分组：

![在此处输入图像描述](https://i.stack.imgur.com/x5dOR.png)

基于您的数据集的结果：

![在此处输入图像描述](https://i.stack.imgur.com/niW6k.png)

未应用任何格式或任何内容，但结果看起来正确。

# php - Zend MVC，视图/动作调度

> ID：16203634
> 
> 赞同：0
> 
> 时间：2013-04-24T22:57:57.193
> 
> 标签：php, zend-framework, model-view-controller

我正在使用 Zend MVC，我正在寻找一种方法来安排视图和操作，但我不知道从哪里开始。这个想法是获取一个类似于 XML 文件的文件，我可以在其中定义网站的所有视图，从视图定义可能的操作并定义转换。

你知道我在哪里可以找到关于这个主题的一些信息（tuto）吗？

问候，塞德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:06:31.930

schedule 是正确的词还是您的意思是**定义视图和操作之**类的东西，例如在应用程序/网站框架中？

如果是这种情况，您需要项目配置文件“.zfproject.xml”。当您使用 Zend Framework CLI 工具时，该文件会自动更新。阅读它：

1.  [使用 CLI 工具](http://framework.zend.com/manual/1.12/en/zend.tool.framework.clitool.html)；
2.  [在命令行上使用 Zend_Tool](http://framework.zend.com/manual/1.12/en/zend.tool.usage.cli.html)。

# jquery - jquery可拖动到所有apprise功能

> ID：16203639
> 
> 赞同：0
> 
> 时间：2013-04-24T22:58:14.497
> 
> 标签：jquery, draggable

我需要以下帮助：

1.) 我怎样才能把函数 $('div.appriseOuter').draggable(); 对于所有“apprise”功能？我需要把每个 apprise 功能

2.) 当你点击“点击我”时，它应该会弹出对话框“Drag me #1” - 然后当你按下 ENTER 键时，它会进入对话框“Drag me #2”，然后当你再次按下 ENTER 时，对话框“Drag me #3”没有出现。但是当您通常单击而不是 ENTER 时，它会进入对话框“Drag me #3”

```
 My JsFiddle is 
```

[这里](http://jsfiddle.net/jmcausing/sNuUN/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:09:48.633

对于你的问题没有。1，您可以使用 jquery 链接并在您的插件本身中执行此操作。

```
$('.appriseOuter').draggable().append('<div class="appriseInner"></div>'); 
```

对于你的问题没有。2，这是因为你在你的插件中写了这段代码

```
$(document).keydown(function(e) {
    if($('.appriseOverlay').is(':visible')){
        if(e.keyCode == 13) { 
            $('.aButtons > button[value="ok"]').click(); 
        }
        if(e.keyCode == 27) { 
              $('.aButtons > button[value="cancel"]').click(); }
        }
}); 
```

每次调用appraise时它都会绑定keybind事件。将它移到你的插件之外，这样它只被调用一次就可以解决问题。这是您更新的[jsfiddle](http://jsfiddle.net/sNuUN/7/)

# php - Joomla 2.5/3.in Azure 的最佳设置

> ID：16203640
> 
> 赞同：-2
> 
> 时间：2013-04-24T22:58:19.253
> 
> 标签：php, mysql, apache, azure, joomla

我正在研究托管解决方案并比较安装 Joomla 2.5 的最佳环境。如果我们在 Azure 上使用 VM，Apache、MySQL 和 PHP 的推荐版本是什么？什么口味的Linux？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:20:48.043

centos, nginx, mysql 5.6 最新 PHP

# lucene - Lucene 4.2.1 WhiteSpaceAnalyzer

> ID：16203644
> 
> 赞同：0
> 
> 时间：2013-04-24T22:58:42.557
> 
> 标签：lucene, analyzer

我有一个与 Luce 3.6 配合得很好的代码。我刚刚升级到 Lucene 4.2.1，我有一个很难使用 WhiteSpaceAnalyzer（也是 StandardAnalyzer 和 WhiteSpaceTokenizer）的类型。它给了我“WhiteSpaceAnalyzer 无法解析为类型”错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:19:38.640

几个可能的可能性：

*   看到一些可能的过分热心的 CamelCaseIng，虽然很有可能它没有在您的代码中重现，但它是：[`WhitespaceAnalyzer`](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/WhitespaceAnalyzer.html)

*   它从: 移动`org.apache.lucene.analysis.WhitespaceAnalyzer`到`org.apache.lucene.analysis.core.WhitespaceAnalyzer`. 检查你的进口。

*   他们最终删除了已弃用的无参数构造函数。您现在需要将[Version](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/util/Version.html)传递给[构造函数](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/WhitespaceAnalyzer.html#WhitespaceAnalyzer%28org.apache.lucene.util.Version%29)。

# matlab - 使用编辑框输入作为表中的行名

> ID：16203645
> 
> 赞同：0
> 
> 时间：2013-04-24T22:58:42.687
> 
> 标签：matlab

我需要能够使用编辑框的字符串输入作为 MATLAB 中表的行名。例如，字符串的格式为 ABCDEFG 或 123456，不带空格。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:11:39.180

您可以`uitable()`为 char 类型的列向量提供行名。在输入对话框中输入，例如`'abcdef'`：

```
rnames = inputdlg('Supply rownames with no spaces');
rnames = rnames{1}'; 
```

在合适的范围内检查：

```
f      = figure('Position',[200 200 400 150]);
dat    = rand(numel(rnames),3); 
cnames = {'X-Data','Y-Data','Z-Data'};
t = uitable('Parent',f,'Data',dat,'ColumnName',cnames,... 
            'RowName',rnames,'Position',[20 20 360 100]); 
```

# angularjs - 在 $resource 上发送请求正文

> ID：16203646
> 
> 赞同：37
> 
> 时间：2013-04-24T22:58:45.013
> 
> 标签：angularjs, angular-resource

我查看了 $resource 的[Angular API](http://docs.angularjs.org/api/ngResource.$resource)，但没有找到将 a 发送`Request Body`到 RESTful 服务的方法。

我知道使用 $http 方法可以做到这一点，就像[这里](https://stackoverflow.com/questions/12190166/angularjs-any-way-for-http-post-to-send-request-parameters-instead-of-json)一样，那么，是否也可以使用`$resource`？

显然这是`$resource`.

> **action** - {string} - 动作的名称。此名称将成为您的资源对象上的方法的名称。
> 
> **方法**- {string} - HTTP 请求方法。有效方法为：GET、POST、PUT、DELETE 和 JSONP
> 
> **params** – {object=} – 此操作的可选预绑定参数集。
> 
> **isArray** – {boolean=} – 如果为 true，则此操作的返回对象是一个数组，请参阅返回部分。

目前我没有找到任何方法来发送包含 JSON 对象的请求负载。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-07-19T02:55:44.337

基于`@gargc`的答案，您可以将参数和主体传递给资源的方法：

```
myResource.save({ param: myParam }, myObject); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-24T23:07:02.440

只要动作支持正文消息（例如 POST，但不支持 GET），您可以将数据参数传递给资源的 action 方法，该参数将在请求的正文中发送：

```
yourResource.save(yourData) 
```

示例：http: [//jsfiddle.net/N3NXK/1/](http://jsfiddle.net/N3NXK/1/)

# java - 初级Java Q

> ID：16203662
> 
> 赞同：0
> 
> 时间：2013-04-24T23:00:30.990
> 
> 标签：java

刚开始学习Java，我怎样才能改变它以便它实际输出`lamp1.printStates`，`lamp2.printStates?`当我运行它时，它只是返回它构建成功，但没有别的。

```
 package lamps;

    public class Lamps {

    public static void main(String[] args) {
        class Lamp {
            int on = 0;
            int brightness = 0;

            void changeOn(int newValue) {
                on = newValue;
        }

            void changeBrightness(int newValue) {
                brightness = newValue;
        }

            void printStates() {
                System.out.println("On/Off:" + on + 
                        " brightness:" + brightness);

        }
    }

    class CreateLamps {
        public void main(String[] args) {
           Lamp lamp1 = new Lamp();
           Lamp lamp2 = new Lamp();

           lamp1.changeOn(1);
           lamp1.changeBrightness(4);
           lamp1.printStates();

           lamp2.changeOn(1);
           lamp2.changeBrightness(6);
           lamp2.changeBrightness(4);
           lamp2.changeOn(0);
           lamp2.changeBrightness(0);
           lamp2.printStates();
    }

   }
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:05:57.400

您的代码很奇怪，创建一个“创建灯”的类是非常糟糕的做法，但是，让我们看看手头的问题。

当您的程序正在运行时，正在执行的`main`方法，`Lamps`而不是. 您需要自己调用该方法。您可以通过将您的方法放入.`main``CreateLamps``new CreateLamps(args)``main``Lamps`

但是，我仍然强烈建议您反对您的程序结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:16:02.287

我认为您在这里有点困惑的重要概念是类、方法和字段是什么。字段定义数据。方法定义要应用于数据的行为（或引起其他一些影响）。类将数据（字段）与行为（方法）组合在一起。类还执行封装，这使我们能够使特定类的数据和方法私有，仅对该类所属的包可用（这是默认值）或对任何其他类公开可用。

在这种情况下，你真的只需要一个类。您可以让 main 方法完成大部分工作。您还可以保留为设置字段值和打印到 System.out 定义的少数方法。除非您打算允许其他类访问它们，否则您应该将您的方法和字段设为私有。始终尽可能使用最高级别的隐私。它使其他人可以区分您的类的公共 API 和仅供内部使用的方法和字段。

```
public class Lamp {
    private int on = 0;
    private int brightness = 0;

    public static void main(String[] args) {
        Lamp lamp1 = new Lamp();
        Lamp lamp2 = new Lamp();

        lamp1.changeOn(1);
        lamp1.changeBrightness(4);
        lamp1.printStates();

        lamp2.changeOn(1);
        lamp2.changeBrightness(6);
        lamp2.changeBrightness(4);
        lamp2.changeOn(0);
        lamp2.changeBrightness(0);
        lamp2.printStates();
    }

    public void changeOn(int newValue) {
        on = newValue;
    }

    public void changeBrightness(int newValue) {
        brightness = newValue;
    }

// maybe you don't want other classes to be able to print the state so make this method private
    private void printStates() {
         System.out.println("On/Off:" + on + " brightness:" + brightness);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:06:00.310

看起来你对如何最好地构建你的课程有一些基本的误解。

通常，一个类如下所示：

```
public class MyClass {
    public MyClass() {
        // constructor code
    }

    public static void main( String[] args ) {
        MyClass myClass = new MyClass();
        myClass.doStuff();
    }

    public void doStuff() {
        // do stuff
    }
} 
```

你所拥有的是内部类的混杂，使用起来会很痛苦，而且不是你想要开始这次冒险的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:06:09.730

您已经混合了所有类和主要方法。您需要一个类，`Lamp`并且该类中的静态 main 方法可以为您进行测试。可能是这样的（我没有尝试编译它。）

我还冒昧地将“开/关”变量更改为布尔值。

```
package lamps;

public class Lamp {

   private boolean on = 0;
   private int brightness = 0;

   public void changeOn(boolean newValue) {
       on = newValue;
   }

   public void changeBrightness(int newValue) {
       brightness = newValue;
   }

   public void printStates() {
       System.out.println("On:" + on + 
             " brightness:" + brightness);
   }

   public static void main(String[] args) {
       Lamp lamp1 = new Lamp();
       Lamp lamp2 = new Lamp();

       lamp1.changeOn(true);
       lamp1.changeBrightness(4);
       lamp1.printStates();

       lamp2.changeOn(true);
       lamp2.changeBrightness(6);
       lamp2.changeBrightness(4);
       lamp2.changeOn(false);
       lamp2.changeBrightness(0);
       lamp2.printStates();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T19:45:01.057

我知道你的问题是什么。如果要显示变量，则必须使用方法：

```
System.out.printf(""); 
```

所以试试这个：

```
package lamps;

public class Lamps {

public static void main(String[] args) {

        int on = 0;
        int brightness = 0;

        void changeOn(int newValue) {
            on = newValue;
    }

        void changeBrightness(int newValue) {
            brightness = newValue;
    }

        void printStates() {
            System.out.printf("On/Off: %d brightness %d"on,brightness);

    }
}

    public void CreateLamps() {
       Lamp lamp1 = new Lamp();
       Lamp lamp2 = new Lamp();

       lamp1.changeOn(1);
       lamp1.changeBrightness(4);
       lamp1.printStates();

       lamp2.changeOn(1);
       lamp2.changeBrightness(6);
       lamp2.changeBrightness(4);
       lamp2.changeOn(0);
       lamp2.changeBrightness(0);
       lamp2.printStates();
}

    } 
```

那应该这样做。
哦，还有，你不需要 3 节课。只需创建方法而不是 CreateLamps 类。

# jakarta-ee - (AS7) 使用参数中的代理 CDI bean 调用远程 EJB 方法时出错

> ID：16203663
> 
> 赞同：0
> 
> 时间：2013-04-24T23:00:31.347
> 
> 标签：jakarta-ee, jboss7.x, cdi, ejb-3.1, proxy-classes

我可以在参数方法中使用 CDI bean 调用远程 EJB 方法吗？

像这样：

我有一个**LoggedUserProducer.java**，它从数据库中生成一个用户。

```
public class LoggedUserProducer {

    @Produces
    @SessionScoped
    @LoggedUser
    public User produceLoggedUser() throws Exception {
        ... //load user from database with a request token
        return user;
    }
} 
```

我有一个 JSF Bean，它可以进行 EJB 调用：

**汽车控制器.java**

```
@Named
@ViewScoped
public class CarController implements Serializable {

    @Inject //I have a producer to create the EJB proxy
    private RepairRemote repairRemote; //My remote EJB

    @Inject
    @LoggedUser
    private User loggedUser; //my User produced by LoggedUserProducer

    private Car car;

    public void repairCar() throws Exception {
        ... //some actions...

        Repair repair = new Repair(this.car)
        repair.setPerformedBy(loggedUser); //setting my proxified cdi bean into a POJO

        repairRemote.repair(repair); //here throws ClassNotFoundException;
    } 
```

和例外：

```
java.lang.RuntimeException: ClassNotFoundException marshaling EJB parameters

at org.jboss.as.ejb3.remote.LocalEjbReceiver.clone(LocalEjbReceiver.java:229)
at org.jboss.as.ejb3.remote.LocalEjbReceiver.clone(LocalEjbReceiver.java:216)
    ...
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
at org.jboss.weld.proxies.RepairRemote$-248248579$Proxy$_$$_WeldClientProxy.repair(RepairRemote$-248248579$Proxy$_$$_WeldClientProxy.java)
at com.mycompany.services.controller.CarController.repairCar(CarController.java:118)
at com.mycompany.services.controller.CarController$Proxy$_$$_WeldSubclass.repairCar(CarController$Proxy$_$$_WeldSubclass.java)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
...
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:662)

Caused by: java.lang.ClassNotFoundException: com.mycompany.portalcarweb.client.model.User$Proxy$_$$_WeldClientProxy from [Module "deployment.portalcarweb.war:main" from Service Module Loader] 
```

我不知道为什么我的远程 EJB 找不到类**com.mycompany.portalcarweb.client.model.User$Proxy$_$$_WeldClientProxy**

我的**User.java**部署在 JBoss 7 模块中。我的 EJB 客户端和服务器具有`jboss-deployment-structure.xml`in`WEB-INF`文件夹并声明了访问此类的正确模块。

谢谢（对不起我的英语）。

*更新*

我的两个 webapps 打包在 WARs 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:11:12.597

您的 JSF bean 不是由 CDI 管理的（@ViewScoped 仅是 JSF），除非您使用 Seam 3、CODI 之类的东西或编写自己的新 @ViewScoped。

编辑：实际上，它可能不是错误。您必须传递一个副本，任何时候处理远程 EJB 副本都是最好的方法。

# php - 为什么 getProperty 通过 PHP ReflectionClass 返回 null

> ID：16203666
> 
> 赞同：4
> 
> 时间：2013-04-24T23:01:11.007
> 
> 标签：php

我正在制作一个新的`ReflectionClass`，然后将受保护的属性设置`_products`为可访问。它总是返回`null`我在这里做错了吗？我在 5.4.11

```
$project  = new ReflectionClass( $instance_of_object );
$property = $project->getProperty( '_products' );
$property->setAccessible( true );
$products = $property->getValue( $project ); 
```

我正在尝试确保在我的单元测试中正确设置属性...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:06:45.080

我准备了一个工作简单的例子。如果你可以执行它，那么你的代码中的其他地方一定有错误：

```
class The_Class {

    private $_products;

    public function __construct() {
        $this->_products = 'foo';
    }
}

$instance_of_class = new The_Class();
$reflClass = new ReflectionClass($instance_of_class);
$member = $reflClass->getProperty('_products');
$member->setAccessible(true);
// Here is an error in your code:
// Note that I'm using $instance_of_class, rather then
// $reflClass as argument to getValue()
var_dump($member->getValue($instance_of_class)); // string(3) "foo" 
```

# php - 链接到图像不起作用 Sublime 2

> ID：16203672
> 
> 赞同：0
> 
> 时间：2013-04-24T23:01:35.090
> 
> 标签：php, html, css, wordpress, sublimetext2

我正在使用 Wordpress 并尝试开发自定义主题。我正在使用 Sublime2 IDE 进行编码。我正在 Chrome 中进行测试。

我很难让图像出现在浏览器中。我对 HTML 并不陌生，似乎无法弄清楚为什么以下代码不起作用......

```
<img src="images/social/twitter-lg.png" alt="Twitter Icon" title="J2 Design on Twitter"> 
```

该文件位于名称为“images”的文件夹中，该文件夹与尝试加载图像的 header.php 位于同一目录中。

如果有人可以帮助我，我将不胜感激。我正在使用 WAMP 在本地进行测试。

服务器响应

```
Connection:Keep-Alive
Content-Length:254
Content-Type:text/html; charset=iso-8859-1
Date:Wed, 24 Apr 2013 23:04:30 GMT
Keep-Alive:timeout=5, max=99
Server:Apache/2.4.2 (Win64) PHP/5.4.3

HTTP/1.1 404 Not Found
Date: Wed, 24 Apr 2013 23:04:30 GMT
Server: Apache/2.4.2 (Win64) PHP/5.4.3
Content-Length: 254
Keep-Alive: timeout=5, max=99
Connection: Keep-Alive
Content-Type: text/html; charset=iso-8859-1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:43:33.837

您正在使用相对 URL。使其绝对：

```
<img src="/wordpress-testing/images/social/twitter-lg.png" alt="Twitter Icon" title="J2 Design on Twitter"> 
```

相对 URL 是相对于当前 url，所以如果你在`http://localhost/login`并且 request `images/twitter.png`，你会得到`http://localhost/login/images/twitter.png`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T01:15:38.137

听起来问题出在路径上。AS Blender 要求，是的，您可以使用绝对路径，但是一旦您上传主题，这当然必须更改。

**一种更常见且可能是“最佳实践”的方法**是使用 PHP 使您仍然可以使用相对 URL，这些 URL 与您的主题目录相关。

试试这个：

```
<img src="<?php bloginfo('template_directory'); ?>images/social/twitter-lg.png" alt="Twitter Icon" title="J2 Design on Twitter"> 
```

这`<?php bloginfo('template_directory'); ?>`是使您的相对 url 相对于您的模板目录的 PHP 代码。如果您的头文件不在模板目录的根目录中，您可能需要更改路径的 HTML 部分，不确定。

希望这会有所帮助。

# java - Astyanax客户端每个节点的最大连接数？

> ID：16203676
> 
> 赞同：5
> 
> 时间：2013-04-24T23:01:49.800
> 
> 标签：java, cassandra, astyanax

我正在使用 Astyanax 客户端从 Cassandra 数据库中读取数据。

我在 Cassandra 数据库中有大约一百万个唯一行。我有一个带有四个节点的交叉[托管中心](http://en.wikipedia.org/wiki/Colocation_centre)集群。

这些是我的四个节点：

```
 node1:9160
  node2:9160
  node3:9160
  node4:9160 
```

我启用了 KeyCaching 并且也启用了 SizeTieredCompaction 策略。

我有一个多线程的客户端程序，它将使用 Astyanax 客户端从 Cassandra 数据库中读取数据，并且我使用 20 个线程运行该程序。如果我用 20 个线程运行我的客户端程序，那么从 Cassandra 数据库读取数据的性能会降低。

因此，我首先想到的是可能存在与 Cassandra 的连接的争用（他们是否使用池，如果有的话，维护了多少连接）？我正在使用以下代码使用 Astyanax 客户端进行连接。

```
private CassandraAstyanaxConnection() {
    context = new AstyanaxContext.Builder()
    .forCluster(ModelConstants.CLUSTER)
    .forKeyspace(ModelConstants.KEYSPACE)
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()
        .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
    )
    .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
        .setPort(9160)
        .setMaxConnsPerHost(1)
        .setSeeds("nod1:9160,node2:9160,node3:9160,node4:9160")
    )
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()
        .setCqlVersion("3.0.0")
        .setTargetCassandraVersion("1.2"))
    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
    .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    keyspace = context.getEntity();

    emp_cf = ColumnFamily.newColumnFamily(
        ModelConstants.COLUMN_FAMILY,
        StringSerializer.get(),
        StringSerializer.get());
} 
```

我是否需要对上述代码进行任何更改以提高性能？

这个方法有什么作用？

```
 setMaxConnsPerHost(1) 
```

我需要增加它以提高性能吗？我有四个节点，所以我应该将其更改为 4？

setMaxConns(20) 方法会调用吗？我是否还需要添加它以提高性能？因为我将使用多个线程运行我的程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-26T10:01:41.813

有关`maxConnsPerHost`/`maxConns`您可以查看此答案的详细信息：[Astyanax 客户端中的 setMaxConns 和 setMaxConnsPerHost](https://stackoverflow.com/questions/16206515/setmaxconns-and-setmaxconnsperhost-in-astyanax-client/16231923#16231923)

是的，`maxConnsPerHost`应该增加以实现良好的性能。最优值取决于网络拓扑、请求复制因子、存储配置、缓存、读/写比率等。

我认为如果没有实验和模拟，就不可能为重负载集群实现最佳性能。

对于 Cassandra 上负载中等的任务，我通常使用经验法则：

```
maxConnsPerHost ~= <Number of cores per host>/<Replication factor> + 1 
```

也就是说，对于复制因子为 3 的 8 核盒子集群，`maxConnsPerHost`应该在 4 左右。这个值也是在重负载场景下进行实验的一个很好的起点。

动机：每个具有核心的`N`节点集群具有核心总数。要处理具有复制因子的请求，需要（不同节点的）核心。因此，在每个给定时刻，集群都可以处理请求。将并发连接数保持在此数字附近是个好主意。将其除以计算每个主机的连接数。为每个主机添加 1 个备用连接用于网络延迟等。就是这样。`C``N * C``R``R``N * C / R``N`

**更新：**简单的客户端性能调整：

*   从一些`maxConnsPerHost`价值开始
*   模拟负载并观察 CPU 使用率和`org.apache.cassandra.request->***Stage->pendingTasks`JXM 属性
*   增加`maxConnsPerHost`直到`pendingTasks`开始迅速增加。这可能是最佳值。
*   集群节点上的 CPU 负载应该在 50-70% 左右。如果它少得多 - 服务器配置可能有问题。

# java - 放 未正确添加值

> ID：16203677
> 
> 赞同：0
> 
> 时间：2013-04-24T23:02:01.857
> 
> 标签：java, google-app-engine, redis

我正在开发一个类似 Redis 的开源 Memcache API：[http ://bit.ly/XVfpRX](http://bit.ly/XVfpRX)

谁能帮我分析一下为什么这段代码的`String field` and`String value`变量的值是错误的：

```
public Long hset(String key, String field, String value) {
    System.out.println("HSET key="+key+" field=" + field + " value="+value);
    try {
        boolean exist = exists(key);
        if(exist){
            Set<Tuple<String,String>> hash = (Set<Tuple<String,String>>) memget(key);
            Iterator<Tuple<String, String>> it = hash.iterator();
            while (it.hasNext()){
                Tuple<String, String> t = it.next();
                if (t.getFirst().equals(field)){
                    System.out.println("HSET Removing field=" + t.getFirst() + " value="+t.getSecond());
                    hash.remove(t);
                    hash.add(new Tuple<String, String>(field, value));
                }
            }
            memset(key, hash);
            return 0L;
        } else {
            Set<Tuple<String,String>> hash = new HashSet<Tuple<String,String>>();
            System.out.println("Adding new tuple key="+key+" field=" + field + " value="+value);
            hash.add(new Tuple<String, String>(field, value));
            memset(key, hash);  
            return 1L;
        }
    } catch(Exception e) { //  ClassCastException and NPE
        // What to do when CCE is encountered?
        Set<Tuple<String,String>> hash = new HashSet<Tuple<String,String>>();
        hash.add(new Tuple<String, String>(field, value));
        memset(key, hash);              
    } 
    return 1L;
} 
```

以下是测试日志：

```
Start hset tests
HSET key=null field=null value=null
Adding new tuple key=null field=null value=null
MEMSET key=null value=[Tuple [first=null, second=null]]
HSET key=foo field=foo value=bar
Adding new tuple key=foo field=foo value=bar
MEMSET key=foo value=[Tuple [first=foo, second=bar]]
HSET key=foo field=bar value=foobar
MEMSET key=foo value=[Tuple [first=foo, second=bar]]
HSET key=user:1 field=uname value=foo
Adding new tuple key=user:1 field=uname value=foo
MEMSET key=user:1 value=[Tuple [first=uname, second=foo]]
HSET key=user:1 field=fname value=Bar
MEMSET key=user:1 value=[Tuple [first=uname, second=foo]]
HSET key=user:1 field=uname value=bar
HSET Removing field=uname value=foo
MEMSET key=user:1 value=[Tuple [first=uname, second=bar]] 
```

还有实际的 JUnit 测试：

```
@Test
public void testHset() {
    System.out.println("Start hset tests");
    Long ret = lingo.hset(key, null, value);
    assertEquals(1L, ret.longValue());
    ret = lingo.hset("foo", "foo", "bar");
    assertEquals(1L, ret.longValue());
    ret = lingo.hset("foo", "bar", "foobar");
    assertEquals(0L, ret.longValue());

    ret = lingo.hset("user:1", "uname", "foo");
    assertEquals(1L, ret.longValue());
    ret = lingo.hset("user:1", "fname", "Bar");
    assertEquals(0L, ret.longValue());
    ret = lingo.hset("user:1", "uname", "bar");
    assertEquals(0L, ret.longValue());

    String username = lingo.hget("user:1", "uname");
    String firstname = lingo.hget("user:1", "fname");
    assertEquals("bar", username);
    assertEquals("Bar", firstname);
    System.out.println("End hset tests");
} 
```

问题区域是这样的：

```
HSET key=foo field=bar value=foobar
MEMSET key=foo value=[Tuple [first=foo, second=bar]] 
```

还有这个：

```
HSET key=user:1 field=fname value=Bar
MEMSET key=user:1 value=[Tuple [first=uname, second=foo]] 
```

传播到 memset（这是 GAE memcache put 的键值对包装方法）的字段和值是错误的。

[元组代码可以在这里找到](http://grepcode.com/file_/repo1.maven.org/maven2/org.jasig.portal/uportal-war/4.0.9.1/org/jasig/portal/utils/Tuple.java/?v=source)。

**更新（添加 hget 方法）：**

```
public String hget(String key, String field) {
    try {
        boolean exist = exists(key);
        if(exist){
            Set<Tuple<String,String>> hash = (Set<Tuple<String,String>>) memget(key);
            Iterator<Tuple<String, String>> it = hash.iterator();
            while (it.hasNext()){
                Tuple<String, String> t = it.next();
                if (t.getFirst().equals(field)){
                    return t.getSecond();
                }
            }
        } 
    } catch(Exception e) { //  ClassCastException and NPE
        // What to do when CCE is encountered?
    } 
    return "nil";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:08:01.710

你写了那`Tuple`节课吗？

我的第一个想法是您没有正确`equals`覆盖`hashCode`。Joshua Bloch 的[Effective Java](http://www.scribd.com/doc/36454091/Effective-Java-Chapter3)告诉您如何操作。

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：13

> ID：16203680
> 
> 赞同：2
> 
> 时间：2013-04-24T23:02:18.850
> 
> 标签：java

我正在尝试使用数组来处理桥牌，然后按花色对其进行排序。该程序处理所有 13 张卡，但随后出现错误，

```
"Exception in thread "main" 
java.lang.ArrayIndexOutOfBoundsException: 13 
at DeckStuff.main(DeckStuff.java:29)" 
```

任何帮助，将不胜感激。

```
public static void main(String[] args) {

    Card.shuffleDeck();

    Card.dumpCards();

    Card[] bridgeHand = new Card[13];

    for (int i = 0; i < bridgeHand.length; i++) {
        bridgeHand[i] = Card.dealCard();
    }

    for (int i = 0; i < bridgeHand.length; i++) {
        System.out.print(bridgeHand[i]);
    }
    System.out.println();

    Card.sortHand(bridgeHand);

    String[] suit = {"Spades", "Hearts", "Diamonds", "Clubs"};

    int j = 0;
    for(int i = 0; i < 4; i++) {
        String s = suit[i].substring(0,1);
        System.out.print("\n" + s + ": ");

        while (bridgeHand[j].getCardSuitName().equals(suit[i])) {
            System.out.print(bridgeHand[j]);
            j++;
        }
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:06:16.797

你`j`没有被重置，`while`一旦遇到错误的同花牌，循环就会停止，这是不正确的，因为你想检查所有的牌，但只打印正确的同花牌。

尝试：

```
for(int i = 0; i < 4; i++) {
    String s = suit[i].substring(0,1);
    System.out.print("\n" + s + ": ");

    for(int j = 0; j < bridgeHand.length; j++) {
        if (bridgeHand[j].getCardSuitName().equals(suit[i])) {
            System.out.print(bridgeHand[j]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T23:08:10.050

java.lang.ArrayIndexOutOfBoundsException：13

这意味着您正在越界访问数组。您给它的索引值为 13。我什至还没有阅读您的代码，但我猜这是一个错误的错误。

...阅读...

是的。你不断地增加 j。错误消息也会给你一个行号。

在 DeckStuff.main(DeckStuff.java:29)"

这意味着错误位于文件 DeckStuff.java 的第 29 行

# javascript - AngularJS：如何在渲染之前从服务器填充数据？

> ID：16203681
> 
> 赞同：2
> 
> 时间：2013-04-24T23:02:20.607
> 
> 标签：javascript, angularjs

我`HTML`的是

```
<div id="categories" ng-controller="AddTransactionCtrl">
    <tr ng-repeat="category in categories">
        <td><a href="{{category.name}}" target="_blank">{{category.name}}</a></td>
        <td>{{category.description}}</td>
    </tr>
</div> 
```

我想从从服务器获取数据的控制器中填充此列表。我的控制器看起来像

```
function AddTransactionCtrl($scope, $http) {
  $scope.transaction = {};
  $scope.transaction.categories = [];
  $http({
    method: 'GET',
    url: '/categories'
  }).success(function(data, status, headers, config) {
      console.log('/categories succeeded. - ' + data.length);
      $scope.transaction.categories = data;
    }).error(function(data, status, headers, config) {
      console.log('/categories failed.');
    });

  console.log($scope.transaction.categories.length);

  $scope.save = function() {
    console.log('will add transaction');
    console.log('name:' + $scope.transaction.name);
    console.log('date:' + $scope.transaction.date);
    console.log('desc:' + $scope.transaction.desc);
  }
} 
```

当我刷新页面并在 Chrome 控制台上查看时，我看到

```
0
/categories succeeded. - 151 
```

*   这意味着`$scope.transaction.categories`未分配
*   另外，正如我所见，日志`0`是在 http 日志之前打印的，这意味着调用是异步的，并解释了为什么长度是`0`

**问题**
a.) 在打印出与在页面或控制台上呈现相关的任何内容之前，我如何确保这些类别已由 HTTP 填充

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:34:28.793

你是正确的，调用是异步的。填充后需要做的任何事情`categories`都应该在调用的`success`回调函数中进行`$http`。

另外，您的`ng-repeat`指令是错误的。它应该是

```
<tr ng-repeat="category in transaction.categories"> 
```

通过这样的代码设置，`tr`元素现在只会在调用`transaction.categories`填充后显示。`$http`

还有，你说

> 这意味着 $scope.transaction.categories 未分配

这是不正确的。**它只是还**没有被分配。您的最终`$http`调用应如下所示：

```
function AddTransactionCtrl($scope, $http) {
  $scope.transaction = {};
  $scope.transaction.categories = [];
  $http({
    method: 'GET',
    url: '/categories'
  }).success(function(data, status, headers, config) {
      console.log('/categories succeeded. - ' + data.length);
      $scope.transaction.categories = data;

      // this will show you the count that you expect
      console.log($scope.transaction.categories.length);
    }).error(function(data, status, headers, config) {
      console.log('/categories failed.');
    });

  // this will always print 0 to console
  // since categories has not been assigned yet
  console.log($scope.transaction.categories.length);

  // other methods
} 
```

# jquery - 更改网址的一部分

> ID：16203686
> 
> 赞同：0
> 
> 时间：2013-04-24T23:02:50.053
> 
> 标签：jquery

有一个如下的网址

```
<a href="www.mysite.com/foo/content">Link</a> 
```

我如何使用 jquery 删除“/foo”，所以它最终会像这样。

```
<a href="www.mysite.com/content">Link</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:04:53.610

```
$('a').prop('href', function(i,href){
    return href.replace('/foo', '');
}); 
```

# ruby - 如何扫描带有 unicode 字符的 ruby 字符串？

> ID：16203690
> 
> 赞同：1
> 
> 时间：2013-04-24T23:03:08.517
> 
> 标签：ruby, regex, encoding

我说

```
"#gefährlicher #blödsinn".scan(/#(\w+)/).flatten 
```

irb 回应：

```
"#gef��hrlicher #bl��dsinn".scan(/#(\w+)/).flatten 
```

我得到

```
=> ["gef", "bl"] 
```

这显然不是我想要的。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:17:39.340

根据[这个答案](https://stackoverflow.com/a/3976004/1427098)和正则[表达式文档](http://www.ruby-doc.org/core-2.0/Regexp.html)，`\w`仅适用于`[a-zA-Z0-9_]`. 你想要`\p{Word}`。

```
"#gefährlicher #blödsinn".scan(/#(\p{Word}+)/).flatten
# => ["gefährlicher", "blödsinn"] 
```

也就是说，我不知道您所说的“irb 响应...”是什么意思，显然 irb 响应该`=>`部分...

# sql-server - 将存储过程从 sql server 拉到数据库项目

> ID：16203691
> 
> 赞同：3
> 
> 时间：2013-04-24T23:03:11.340
> 
> 标签：sql-server, database, visual-studio, database-project

我有一个 sql server 数据库，其中包含许多存储过程。我想将这些存储过程添加到数据库项目中的 TFS 源代码管理中。

一个一个地复制所有这些将是一项艰巨且耗时的任务。是否有任何自动化方式或工具可以从数据库中提取所有存储过程并添加到 Visual Studio 数据库项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T00:12:11.867

这取决于 SQL Server 和 Visual Studio 的版本，但假设 SQL Server 2012 和 Visual Studio Premium 2012 或更高版本

如果您在 Visual Studio 中有一个数据库项目，您应该能够对数据库进行架构比较，并从数据库中提取所有对象，包括存储过程。

还有一些人问过类似的问题。
例如：[http://forums.asp.net/t/1847000.aspx/1](http://forums.asp.net/t/1847000.aspx/1)链接到[http://msdn.microsoft.com/en-us/data/hh297028](http://msdn.microsoft.com/en-us/data/hh297028)以获得 SSDT 指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:53:18.520

在 SSMS (Management Studio) 中，右键单击资源管理器窗格中的数据库图标，单击“任务...”，然后单击“生成脚本”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T06:36:05.047

我们可以使用 Visual Studio 2012 解决这个问题。按照以下步骤解决这个问题——

1.  在 VS 2012 中添加 SQLServerDatabase 项目。
2.  右键单击 DatabaseProject 并选择 Import。
3.  将相应的数据库导入到 SQL Server 数据库项目中。
4.  每当我们在 SQL Server 数据库中进行更改时，右键单击 VS SQLServerDatabase 项目并选择架构比较。
5.  跟随向导。
6.  如果用户创建/编辑了表或 SP 或视图，则 Schema Copare 将显示更改。
7.  交换源和目标并在模式比较中选择适当的操作。

# html - 在 HTML 中模拟水平 XAML StackPanel 的最佳方法是什么？

> ID：16203693
> 
> 赞同：6
> 
> 时间：2013-04-24T23:03:32.607
> 
> 标签：html, silverlight

这是关于将 silverlight 应用程序转换为 html。将 XAML gui 转换为 HTML 的某些部分是相似的，但我想念 StackPanel 的易用性，其中元素可以轻松水平对齐。在 HTML 中执行此操作的最佳方法是什么？

我看过的各种方式：

*   使用一张桌子。这样做会很笨拙。
*   CCS3 多列：可以工作，但也不像堆栈面板。

我愿意使用现代浏览器功能（不必支持旧的 IE）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T23:06:34.807

您通常可以使用 inline-block 元素获得类似的效果......

```
<ul class="horizontal">
     <li>A</li>
     <li>B</li>
     <li>C</li>
</ul> 
```

使用以下 CSS

```
.horizontal {
    margin: 0;
    padding: 0;
}

.horizontal li {
    display: inline-block;
    width: 100px;
    height: 100px;
    border: 1px solid #000;
} 
```

您可以[在 JSFiddle 上看到它](http://jsfiddle.net/tCnAN/)。

该示例很简单，例如，您可以使用百分比宽度来填充可用空间，这样看起来会更好。这里的要点是，如果您有一组要显示的东西，无序列表会提供合理的语义，而 CSS 会像您的堆栈面板一样对其进行布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:06:48.913

您可以使用父 div 并在其中包含所有元素 have `float: left`，这将有效地将它们全部水平排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-07T14:35:50.503

你可以使用css flexbox。

```
.flex-container {
  display: flex;
  background-color: blue;
  height: 30px;
  flex-direction: row;
}

.flex-item {
  background-color: red;
  width: 50px;
  border: 1px solid black;
}
```

```
<div class="flex-container">
  <div class="flex-item"></div>
  <div class="flex-item"></div>
  <div class="flex-item"></div>
</div>
```

# sql-server - Sql Server 值方法只返回一个值而不是多个值

> ID：16203696
> 
> 赞同：1
> 
> 时间：2013-04-24T23:03:37.737
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, sql-server-2012

我正在尝试将多个元素值返回到行中，并且遇到了以下问题，即它没有返回行中的所有实例，我已将问题隔离为单例问题。我参考了以下链接：

[http://www.jasonstrate.com/2010/11/xquery-for-the-non-expert-value/](http://www.jasonstrate.com/2010/11/xquery-for-the-non-expert-value/)

[http://msdn.microsoft.com/en-us/library/ms175894.aspx](http://msdn.microsoft.com/en-us/library/ms175894.aspx)

我试过这些：

```
,c.value('(Tags/Tag/text())[1]' , 'NVARCHAR(20)') AS Tag 
```

和

```
,c.value('(//Tags/Tag)[1]' , 'NVARCHAR(20)') AS Tag 
```

我用它来测试它是否会返回第一个和第二个实例并且确实如此，但我希望它作为单独的行返回。所以两行而不是两列

```
,c.value('(Tags/Tag)[1]' , 'NVARCHAR(20)') AS Tag
,c.value('(Tags/Tag)[2]' , 'NVARCHAR(20)') AS Tag2 
```

这是xml的快照

```
 <nsp:Tags>
    <nsp:Tag>Books</nsp:Tag>
    <nsp:Tag>Reading</nsp:Tag>
  </nsp:Tags> 
```

编辑我能够得到它

```
C.value('.', 'nvarchar(20)') 
```

但是有没有办法通过将路径留在值选择中来实现同样的事情，或者我是否将其保留在应用中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:02:15.810

如果你想返回多行，你不能`.value()`单独使用——你需要将它与一个调用结合起来， `.nodes()`这将为与你的 XPath 表达式匹配的每个节点提供一行 XML：

```
;WITH XMLNAMESPACES ('.....' as nsp)
DECLARE @Data XML = '<nsp:Tags>
                        <nsp:Tag>Books</nsp:Tag>
                        <nsp:Tag>Reading</nsp:Tag>
                     </nsp:Tags>'

SELECT
   XTags.value('.', 'varchar(50)')
FROM 
   @Data.nodes('/Tags/Tag') XTbl(XTags) 
```

# java - 协助简单的正则表达式模式

> ID：16203699
> 
> 赞同：1
> 
> 时间：2013-04-24T23:03:49.380
> 
> 标签：java, regex

给定以下模式，提取 resultCount 的正确正则表达式是什么（注意我不关心字符串中的其他任何内容）：

```
{
 "resultCount":12,
 "results": [blah blah.. 
```

这是我尝试过的正则表达式..但没有骰子（即不匹配..）..

```
.*resultCount":([\d]+),.* 
```

语言是java；这确实很重要（结果是正则表达式在香草正则表达式中工作正常）。所以我要看看像引号这样的字符是否有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:25:53.373

我想您正在使用`String.matches`Java 中的函数，该函数需要整个字符串与模式匹配（这就是您`.*`在模式之前和之后包含的原因）。正如 Bergi 正确发现的那样，`.`通常不会匹配换行符，因此如果不使用`DOTALL`.

但这确实有点像黑客。您实际上对匹配整个字符串并不感兴趣（这是您为验证所做的事情）。Java 提供了第二种模式匹配方法，它需要更多的代码，但允许您正确地完成工作（查找子字符串匹配 - 如果需要，可以找到多个匹配项）。这是一些具有固定模式的快速示例代码（假设`str`是您的输入字符串）：

```
Pattern pattern = Pattern.compile("resultCount\":\\s*(\\d+)");

Matcher matcher = pattern.matcher(str);

while (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

`Pattern`和都是`Matcher`的一部分`java.util.regex`。基于[本教程页面](http://www.vogella.com/articles/JavaRegularExpressions/article.html#regexjava)的代码。

[工作演示。](http://ideone.com/x0LueV)

当然，`\\s*`模式中包含的内容取决于您，但如果您自己不生成 JSON，这绝对是可能发生的事情，而且它不会造成任何伤害，因为与`\\d`.

# java - 如何将特定对象添加到列表中

> ID：16203700
> 
> 赞同：2
> 
> 时间：2013-04-24T23:03:52.070
> 
> 标签：java

我想将特定元素添加到 ArrayList。我可以通过这样做来实现这一点：

```
List<Employee> list = new ArrayList<Employee>();
List<String> list = new ArrayList<String>(); 
```

但是，我想创建一个包含 Employee 或 String 对象的新 List ，仅此而已：

```
// This is
List<String or Employee> list = new ArrayList<String or Employee>(); 
```

这可能吗？如果是，请向我解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:11:50.413

`String`只有当和`Employee`扩展相同类型时，您才能这样做。例如，假设`String`和`Employee`extends `Type`，那么您可以执行以下操作：

```
List<? extends Type> list = new ArrayList<? extends Type>() 
```

但是...我将假设`String`您指的是`java.lang.String`-如果是这种情况（可能是这样），那么如果没有以下内容就无法做到这一点，我认为这对您来说太笼统了具体用例：

```
List<? extends Object> list = new ArrayList<? extends Object>() 
```

`Employee`您可以尝试创建一个包含 an和 a的容器对象，`String`然后创建该类型的列表，但这最终可能与维护两个并行列表一样痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:26:59.223

您可以通过将列表包装在可以指定可以添加哪些类型的自定义类中来实现这一点。例如：

```
 public class EmployeeList  {

        private List<Object> backingList = new ArrayList<Object>();

        public Object get(int i) {
            return backingList.get(i);
        }

        public boolean add(String s) {
            return backingList.add(s);
        }

        public boolean add(Employee e) {
            return backingList.add(e);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:34:44.683

这是不可能的。可以这样做：

```
List<? extends Object> list = new ArrayList<? extends Object>() 
```

它将容纳一种类型的任何东西。或者

```
List<Object> list = new ArrayList<Object>() 
```

它将容纳一切。你已经编写了自己的代码。

# c++ - 从输入文件中读取

> ID：16203702
> 
> 赞同：5
> 
> 时间：2013-04-24T23:03:56.927
> 
> 标签：c++

我在读取输入文件时遇到问题。输入文件看起来像这样

莱昂内尔·梅西-10 43

费尔南多·托雷斯 9 -29

克里斯蒂亚诺·罗纳尔多 7 31

韦恩鲁尼 10 37

内马尔 17 29

安德烈斯·伊涅斯塔 8 32

罗宾范佩西 19 20

莱昂内尔·梅西 10 43

哈维埃尔南德斯 6 36

梅苏特厄齐尔 10 38

迪迪埃·德罗巴 10 35

费尔南多托雷斯9 29

卡卡 10 17

问题是我不能使用 getline 函数，因为我想将名称存储到单个变量中以存储到数组中，并将第一个数字存储到一个变量中，第二个存储到另一个变量中。我也尝试使用 peek 功能，但我从未学会过，所以我没有成功。如果有人知道如何阅读直到名称的结尾并将其存储到一个变量中，那将不胜感激。

这就是我从输入文件读取时我的代码的样子

```
while(!fin.eof())
    {

     fin >> first >> last >> num >> point;

     if (num > 0 && point > 0)
     {
             list[i].firstname = first;
             list[i].lastname = last;
             list[i].number = num;
             list[i].points = point;
             i++;
     }
     else if (num < 0 || point < 0)
     {
             reject[j].firstname = first;
             reject[j].lastname = last;
             reject[j].number = num;
             reject[j].points = point;
             j++;
     }

    } 
```

如果输入有名字和姓氏，这非常有效。我知道问题出在fin >> first >> last >> num >> point上；

但我不确定如何将第一个和最后一个（可能还有中间）放在一起

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:13:39.640

您可以使用`std::getline`提取行，将行解析`std::vector`为空格分隔的单词。然后你知道`words.size() - 2`单词是名字的一部分。例如：

```
std::fstream in("in.txt");
std::string line;

// Extract each line from the file
while (std::getline(in, line)) {
  std::istringstream line_stream(line);

  // Now parse line_stream into a vector of words
  std::vector<std::string> words(std::istream_iterator<std::string>(line_stream),
                                 (std::istream_iterator<std::string>()));

  int name_word_count = words.size() - 2;
  if (name_word_count > 0) {
    // Concatenate the first name_word_count words into a name string
    // and parse the last two words as integers
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:19:45.663

在我看来，您需要使用`getline`，然后解析该行。解析它的一种解决方案可能是在第一个数字之前拆分行，然后修剪前半部分，并将其用作名称，并使用 an 解析后半部分 `std::istringstream`以读取两个数字。当然，如果某人的名字中有数字，这将失败，但在我看来，这似乎是一个合法的限制。换句话说，对于每一行，你会这样做：

```
std::string::iterator first_digit
        = std::find_if( line.begin(), line.end(), IsDigit() );
if ( first_digit == line.end() ) {
    //  format error...
} else {
    name = trim( std::string( line.begin(), first_digit ) );
    std::istringstream parser( std::string( first_digit, line.end() ) );
    parser >> firstNumber >> secondNumber >> std::ws;
    if ( !parser || parser.get() != EOF ) {
        //  format error...
    } else {
        //  Do what ya gotta do.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T23:21:30.740

像这样的东西应该工作：

```
std::string str;
while(getline(infile, str))
{
  std::string::size_type pos;
  pos = str.find_last_of(' ');
  if (pos == std::string::npos || pos < 1)
  {
      cout << "Something not right with this string: " << str << endl;
      exit(1);
  }
  int last_number = stoi(str.substr(pos));
  str = str.substr(0, pos-1);    // Remove the number and the space.
  pos = str.find_last_of(' ');
  if (pos == std::string::npos || pos < 1)
  {
      cout << "Something not right with this string: " << str << endl;
      exit(1);
  }
  int first_number = stoi(str.substr(pos));
  str = str.substr(0, pos-1); 
  // str now contains the "name" as one string. 

  // ... here you use last_number and first_number and str to do what you need to do. 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:17:42.740

1.) 打开文件

```
std::ifstream myFile("somewhere.txt"); 
```

2.) 检查文件是否打开

```
if(myFile.is_open()) 
```

3.) 读到文件结束

```
while(!myFile.eof()) 
```

4.) 将名字读入名字数组

```
myFile >> firstName[numberOfPeople]; 
```

5.) 将姓氏读入姓氏数组

```
myFile >> lastName[numberOfPeople]; 
```

6.) 将整数读入整数数组

```
myFile >> integer[numberOfPeople]; 
```

7.) 增加人数

```
numberOfPeople++; 
```

8.) 完成后，关闭文件

```
myFile.close(); 
```

9.) 如果文件没有打开，报告错误。

```
else
   std::cout << "\nFile did not open. " << std::endl; 
```

您可以使用 getline 函数，您只需要解析字符串。这可以使用 strtok 来实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T23:57:39.897

我已经为您的问题实施了解决方案（主要是为了我自己的学习）。它按预期工作，但感觉有点冗长。

```
#include<string>
#include<fstream>
#include<sstream>
#include<iostream>
#include<vector>
#include<algorithm>
#include<iterator>

struct PlayerData {
  std::string name;
  int number;
  int points;
};

std::ostream& operator<<(std::ostream& os, const PlayerData& p) {
  os<<"Name: "<<p.name<<", Number: "<<p.number<<", Points: "<<p.points;
  return os;
}

PlayerData parse(const std::string& line) {
  PlayerData data;  
  std::stringstream ss(line);  
  std::vector<std::string> tokens;
  std::copy(std::istream_iterator<std::string>(ss),
            std::istream_iterator<std::string>(),
            std::back_inserter<std::vector<std::string>>(tokens));
  data.points = std::stoi(tokens.at(tokens.size() - 1));
  data.number = std::stoi(tokens.at(tokens.size() - 2));
  for(auto it=tokens.begin(); it!=tokens.end()-2; ++it) {
    data.name.append(" ");
    data.name.append(*it);
  }
  return data;
}

int main(int argc, char* argv[]) {
  std::string line;
  std::vector<PlayerData> players;  

  { // scope for fp                                    
    std::ifstream fp(argv[1], std::ios::in);
    while(!fp.eof()) {
      std::getline(fp, line);
      if(line.size()>0) {
        players.push_back(parse(line));
      }
    }
  } // end of scope for fp

  // print list of players, or do whatever you want with it.
  for(auto p:players) {
    std::cout<<p<<std::endl;    
  }

  return 0;
} 
```

使用支持 C++11 的 g++ 版本（在我的例子中为 gcc 4.7.2）编译。

```
[Prompt] g++ -oparseline parseline.cpp -std=c++11 -O2
[Prompt] ./parseline players.txt
Name:  Fernando Torres, Number: 9, Points: -29
Name:  Cristiano Ronaldo, Number: 7, Points: 31
Name:  Wayne Rooney, Number: 10, Points: 37
Name:  Neymar, Number: 17, Points: 29
Name:  Andres Iniesta, Number: 8, Points: 32
Name:  Robin van Persie, Number: 19, Points: 20
Name:  Lionel Messi, Number: 10, Points: 43
Name:  Xavi Hernandez, Number: 6, Points: 36
Name:  Mesut Özil, Number: 10, Points: 38
Name:  Didier Drogba, Number: 10, Points: 35
Name:  Fernando Torres, Number: 9, Points: 29
Name:  Kaká, Number: 10, Points: 17 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T23:08:32.790

实际上，您可以使用 getline(); 使用两个参数的方法，传递一个流和'\n'作为分隔符。

将整行分配为一个字符串，然后使用空格作为分隔符拆分字符串，并将后两个转换为整数。

# ruby-on-rails - Rails 不能批量分配受保护的属性

> ID：16203712
> 
> 赞同：0
> 
> 时间：2013-04-24T23:04:51.040
> 
> 标签：ruby-on-rails, ruby, authentication, bcrypt-ruby

我正在尝试使用 has_secure_password 的简单身份验证系统，但我收到了标题中列出的错误。我已经多次看到这个问题，但其他人的建议或修复都没有为我工作。我正处于我确定我必须有一个简单的错误但我找不到任何错误的地步。下面发布的是我的相关代码：

宝石文件：

```
gem 'rails', '3.2.13'

gem 'bcrypt-ruby' 
```

用户控制器：

```
class UsersController < ApplicationController
def new
  @user = User.new
end

def create
  @user = User.new(params{:user})
  if @user.save
    session[:user_id] = @user.id
    redirect_to root_url, notice: "User created"
  else
    render "new"
    end
  end
end 
```

用户模型：

```
class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :email, :password, :password_confirmation

  validates :password, presence: true, length: { minimum: 6 }
  validates_confirmation_of :password

  validates :password_confirmation, presence: true
end 
```

用户形式：

```
<div class="field">
  <%= f.label :email %><br />
  <%= f.text_field :email %>
</div>
<div class="field">
  <%= f.label :password %><br />
  <%= f.password_field :password %>
</div>
<div class="field">
  <%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %>
</div>
<div class="actions"><%= f.submit "Sign Up" %></div>
<% end %> 
```

移民：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :email
      t.string :password_digest

      t.timestamps
    end
  end
end 
```

这是我得到的实际错误：

```
Can't mass-assign protected attributes: utf8, authenticity_token, user, commit, action,      controller 
```

预先感谢您对我的困境的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:10:25.170

您正在分配完整的参数哈希，其中提到了所有这些字段。这就是原因

```
@user = User.new(params{:user}) 
```

应该是

```
@user = User.new(params[:user]) 
```

# python - Blobstore 备份策略 Google App Engine Python

> ID：16203720
> 
> 赞同：3
> 
> 时间：2013-04-24T23:05:30.120
> 
> 标签：python, google-app-engine, google-cloud-storage

我正在寻找一种方法来备份 Google App Engine 上的 blobstore 以从意外删除中恢复。我希望能够同时备份数据存储和 blobstore，以便恢复整个系统。

我尝试过的一件事是为我的 blob 使用 Google Cloud Storage，然后制作存储桶的备份副本。但是，如果我在 blobstore 查看器中删除一个文件（这也会在谷歌云存储中删除它），然后使用 gsutil 从存储桶备份中恢复该文件，blobinfo 仍然会丢失。

我相信我必须将所有文件路径（谷歌云存储路径）存储在我的数据存储中，然后在还原期间，使用 create_gs_key() 为所有这些文件重新创建 blob 密钥。blobviewer 中存储的信息（文件名、内容类型、大小等）是否存储在数据存储区中？

无论如何都可以在不重新生成密钥的情况下备份/恢复 blobstore 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T01:12:56.977

您可以尝试使用[datastoreadmin backup and restore](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)。

它将使用完整的 blob 键备份数据存储实体。根据以下内容，您仍然需要像已经在做的那样单独备份 blob。

> 注意：虽然我们会备份 BlobKey 和 Blob 类型的数据存储实体属性，但我们不会备份存储在 Blobstore 或 Google Cloud Storage 中的相关 Blob 本身。我们也不备份与这些 blob 关联的数据存储 BlobInfo 实体。

请注意，您还可以[定期安排这些备份](https://developers.google.com/appengine/articles/scheduled_backups)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T22:32:30.373

看看 Google Cloud Storage 的[对象版本控制](https://developers.google.com/storage/docs/object-versioning)功能。在存储桶上启用版本控制，当您删除对象时，它会被存档。稍后您可以选择恢复或永久删除存档版本：

创建一个对象：

```
>>> PUT /bucket/obj

<<< HTTP/1.1 200 OK
<<< x-goog-generation: 12345 
```

然后存档：

```
>>> DELETE /bucket/obj

<<< HTTP/1.1 200 OK 
```

现在无法访问：

```
>>> GET /bucket/obj

<<< HTTP/1.1 404 NOT FOUND 
```

但是，您仍然可以明确请求存档版本：

```
>>> GET /bucket/obj?generation=12345

<<< HTTP/1.1 200 OK 
```

在您删除存档版本之前：

```
>>> DELETE /bucket/obj?generation=12345

<<< HTTP/1.1 200 OK 
```

当然……这并不能防止您意外删除存档版本。

# javascript - 在 javascript 或 C#/.NET 中转义 unicode (%u2014)？

> ID：16203721
> 
> 赞同：0
> 
> 时间：2013-04-24T23:05:46.747
> 
> 标签：javascript, .net, unicode, escaping

我`%u2014`在互联网的狂野西部找到了（实际上是关于烂番茄的评论）。我记得在javascript中看到过类似的东西。我不记得它是否在字符串中，但我认为它是某种转义或 uri 转义。

我尝试`decodeURIComponent('%u2014')`在控制台中运行并得到`URIError: malformed URI sequence`. 有谁知道如何解码这个字符？出于某种原因`\x`，我想到了，但我不知道为什么。

如何解码这个 unicode 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:31:32.010

该格式`%uNNNN`来自 JavaScript 函数`escape()`- 它看起来有点像 URL 编码，但它不是，它是一种自定义（无意义）JS 特定的编码类型。

如果您从 JavaScript 代码处理它，那么明显的解药是`unescape()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:34:22.530

为此，您可以对这种模式使用 RegExp 并从它的匹配项中进行字符解码。不过，Afaik`%uXXXX`格式不是推荐的做法。

```
var decodeUE = (function () {
    var reg = /%u([\dA-F]{4})|%([\dA-F]{2})/ig,
        helper = function (m, a, b) {
            if (a) return String.fromCharCode(parseInt(a, 16));
            if (b) return String.fromCharCode(parseInt(b, 16));
        };
    return function decodeUE(s) {
        return s.replace(reg, helper);
    };
}());

var enc = '%u2014 %33 %AF %u1A2B';

decodeUE(enc); // "— 3 ¯ ᨫ" 
```

# python - 使用 python 我需要从我的 excel 文件中删除逗号，然后将其转换为 csv

> ID：16203729
> 
> 赞同：0
> 
> 时间：2013-04-24T23:06:21.920
> 
> 标签：python, excel, csv

我有将 excel 文件转换为 csv 的 python 代码，但是 excel 文件中的部分数据有逗号，这会影响转换。

留在python中删除逗号然后转换的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:27:42.430

如果您可以使用不同的分隔符（例如`;`代替逗号）从 excel 转换为 csv，您可以从转换后的文件中删除逗号，然后将 csv 分隔符 ( `;`) 转换回逗号。

# ios - 绘制一个跟随用户手指并连接两个圆圈的箭头

> ID：16203731
> 
> 赞同：0
> 
> 时间：2013-04-24T23:06:40.003
> 
> 标签：ios, cocoa-touch, uiview, core-graphics, uigesturerecognizer

我在背景视图上有很多圆形视图，我希望能够点击一个圆圈，从那里拖动到另一个圆圈，并从第一个圆圈绘制一个箭头到下一个圆圈。

箭头必须是活的，我的意思是它会从最初的圆圈开始，到用户的手指结束，直到用户抬起他或她的手指。然后，如果有一个与箭头接触，箭头将粘在第二个圆圈上，如果没有接触任何圆圈，则箭头会回到最初的圆圈。

可以移动圆圈并创建新的圆圈（这已经完成）并且箭头应该跟随。

我需要箭头是可操作的对象，我需要能够计算它们并获得它们的初始点和结束点等，所以它们不能只是绘制路径，它们需要是某种调整大小和旋转 UIView 子类。

这有点像您在矢量绘图工具或思维导图应用程序中看到的东西。

当箭头调整大小和旋转时，我无法完全让箭头的屁股保持原位，有时当我移动手指时线条会变得更宽，有时会消失。我知道如果视图旋转，我不应该依赖框架，我应该缩放箭头以使其更长吗？你将如何实现这样的箭头？

另外，这样的建筑如何？我现在拥有的是一个 ArrowView、CircleView 和一个 BackgroundView。箭头和圆圈处理它们自己的触摸，背景视图将管理一组箭头和圆圈。

我主要是在寻找高层次的想法，也许是代码示例。

# git - git rebase 是否更新其他本地分支中的提交？

> ID：16203735
> 
> 赞同：1
> 
> 时间：2013-04-24T23:06:52.580
> 
> 标签：git, commit, rebase

我知道我可以通过实验对此进行测试，但是进行讨论会很好。如果我有一个与远程 master 不同的本地负责人（本地分支）master，我倾向于`git pull --rebase`重播我的更改。我相信这可以通过稍微改变我当地分支机构的状态来实现。

但是，如果我已经从一个本地提交分支到一个新的分支实验（远程不存在），那么实验的历史/提交是否会被本地主分支上的变基更新？

一个类似的问题是，当我有两个本地分支 master 和 dev，都跟踪遥控器时。两者都有本地提交，我已经将一些本地提交从 master 合并到 dev 中。现在我 rebase master 以应用于远程之上——这会改变我已经合并到本地 dev 分支中的提交吗？我的本地开发分支现在是否会包含我现在在主分支中看到的（以前仅限远程）提交历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:33:52.960

## 本地主分支上的变基会更新实验的历史/提交吗？

答案是不。在 master 上执行正常`git pull`与执行这两个命令相同...（假设`origin`是远程，而您在`master`分支上）

```
git fetch
git merge origin/master 
```

当您添加`--rebase`标志时，它会更改拉取以执行这两个命令......

```
git fetch
git rebase origin/master 
```

如您所见，执行的变基是一个简单的变基，没有额外的引用。这是一个简写，git 假设当前分支作为第二个参数。当在 on 时以这种方式执行变基时`master`，假定这意味着......

```
git rebase origin/master master 
```

以上可以从任何分支甚至无头状态执行，它仍然会产生与简单 using 相同的结果`git rebase origin/master`，***因为第二个参数是目标引用***。引用[文档](ftp://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)...

```
git rebase master 
git rebase master topic 
```

> 注意：后一种形式只是 git checkout topic 后跟 git rebase master 的简写。当 rebase 退出时，主题将保持签出分支。

显然，由于当前分支被假定为变基的目标，因此不会影响其他分支。

作为一般规则，git 不会对你的所有分支做任何事情。

## 你的第二个问题

不幸的是，我无法按照您的方案进行操作。我要求您将其分解为较小的问题，将其简化为您试图理解的核心。[此外，您可能希望在您的场景中创建一个简单的提交历史文本图，类似于在这个问题](https://stackoverflow.com/questions/15973964/git-what-is-the-correct-merging-or-rebasing-workflow-to-modify-a-maintenance-br)上所做的。

我认为这是需要澄清的关键部分......

**“现在我重新设置主控以应用于远程......”**

我们需要了解您所说的“在上面”是什么意思。尝试向我们展示一系列 git 命令，尤其是最后的变基。

也就是说，我对以下问题的回答......

**“我的本地开发分支现在是否会包含我现在在主分支中看到的（以前仅限远程）提交历史记录？”**

……很可能是的。从任何地方变基到 master 后，您将看到 master 上的提交，这些提交过去只在您变基的地方。

# node.js - 使用 grunt，是否可以编译单个更改的文件并将其输出到不同的目录？

> ID：16203741
> 
> 赞同：0
> 
> 时间：2013-04-24T23:07:22.910
> 
> 标签：node.js, coffeescript, gruntjs

`/assets/src/coffee`etc（`./child/paths`等等）中有许多咖啡源文件，我想将它们输出到`assets/js/`and `assets/js/child/paths`。

看起来我已经接近了，但它不起作用。使用`grunt-contrib-coffee`和`grunt-contrib-watch`。

```
grunt.initConfig
watch:
  coffee:
    files: '<%= coffee.src %>',
    tasks: 'coffee:dev'
    options:
      nospawn: true

coffee:
  src: 'assets/src/coffee/**/*.coffee'
  dev:
    options:
      sourceMap: true
    files: [
      expand: true
      cwd: "assets/"
      src: "/src/coffee/**/*.coffee"
      dest: "../js/"
      ext: ".js"
    ]

grunt.loadNpmTasks "grunt-contrib-coffee"
grunt.loadNpmTasks 'grunt-contrib-watch' 
# Default task.
grunt.registerTask "default", "watch"

grunt.event.on('watch', (action, filepath) ->
(grunt.log.writeln('\n'+ filepath + ' has ' + action))

dest = "#{path.dirname(filepath.replace("src/coffee", "js"))}"

grunt.config(['coffee', 'dev', 'files', 'src'], [filepath])
grunt.config(['coffee', 'dev', 'files', 'dest'], [dest])

(grunt.log.writeln("src: #{grunt.config(['coffee', 'dev', 'files', 'src'])}"))
(grunt.log.writeln("dest: #{grunt.config(['coffee', 'dev', 'files', 'dest'])}")) 
```

)

好的，所以它的输出看起来像：

```
assets/src/coffee/projAlpha/dl.coffee has changed    
src: assets/src/coffee/projAlpha/dl.coffee    
dest: assets/js/projAlpha/dl.coffee 
```

但该文件实际上最终是：`assets/src/coffee/projAlpha/dl.coffee`...而且它是咖啡脚本。它应该在`assets/js/projAlpha/dl.js`.

我已经获得了 grunt coffee 实用程序来一次编译*所有*文件并将它们放在正确的位置。不过，我宁愿他们一次编译一个，因为我现在有几个文件并且一直在添加更多文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:48:25.580

在您的 glob-pattern 文件路径配置中，我注意到 2 个问题：

1.  glob-pattern 选项不在“files”键下，而是直接在 options 键下。
2.  CWD 仅适用于 src 文件。dest 目录不使用 cwd，因此您必须从基本目录（您的 Gruntfile 所在的位置）指定完整路径。

* * *

```
dev:
  options:
    sourceMap: true
  expand: true
  cwd: "assets/src/coffee/"
  src: "**/*.coffee"
  dest: "assets/js/"
  ext: ".js" 
```

例如，这将移动`assets/src/coffee/User/controller.coffee`到`assets/js/User/controller.js`。

# sql-server - 以编程方式识别哪些 SQL Server 存储过程实际使用特定参数

> ID：16203743
> 
> 赞同：0
> 
> 时间：2013-04-24T23:07:39.820
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个带有数千个存储过程的 SQL Server 数据库（它是 2012 年，但可能是 2008 年）。

我想以编程方式知道哪个存储过程正在接收特定参数`companyid`，但并没有真正在他们的查询中使用它。

所以这个项目的两个目标是：

1.  确定哪些存储过程不接收参数`companyid`
2.  识别那些确实需要该参数`companyid`但并未在其代码中真正使用该参数的存储过程

我正在设想编写一些 TSQL 或用 C# 编写一个应用程序以完成任务 - 任何一个建议都会奏效。

所以我希望听到你们的消息，实现这一目标的最佳方法是什么？

提前致谢

==================================================== ========
基于这两个建议，解决方案如下：

```
SELECT  Specific_Name,  
        ((len(ROUTINE_DEFINITION) - len(replace(ROUTINE_DEFINITION, '@companyid', '')))/ 10) as COUNT,  
    ROUTINE_DEFINITION  
FROM    INFORMATION_SCHEMA.ROUTINES  
WHERE   ROUTINE_DEFINITION LIKE '%@companyid%'  
ORDER BY 2, 1 
```

注意：字符串替换除以 10 将为您提供正文中该特定字符串的实例数。1表示它只是参数，2或更多表示它在body中使用。

谢谢你们俩 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:48:45.223

我可以让它听起来很简单。

看`ROUTINE_DEFINITION`领域

```
select * from INFORMATION_SCHEMA.ROUTINES 
```

这基本上给了你 sp、fn、vw 的主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:15:27.203

你的第一个目标可以通过这个来实现

```
SELECT proce.name FROM sys.procedures proce 
INNER JOIN sys.procedures params ON proce .object_id=params.object_id
WHERE params.name='@companyid' 
```

对于第二个目标，你可以试试这个

```
SELECT proce.name from sys.procedures proce 
INNER JOIN sys.sql_modules modules on proce.object_id=modules.object_id
WHERE definition like '%@companyid%' 
```

# javascript - 带有浏览器建议的浏览器检测小部件

> ID：16203746
> 
> 赞同：0
> 
> 时间：2013-04-24T23:07:48.440
> 
> 标签：javascript, cross-browser, widget, browser-detection

如果当前浏览器不符合条件，我正在寻找一个显示推荐浏览器列表的小部件。几个月前我看到它，它显示浏览器图标，非常酷，但我现在找不到它;-(

谷歌只删除带有丑陋文本条的浏览器检测器......：C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T00:08:38.853

我创建了自己的工具栏：[https](https://github.com/inf3rno/browsehappy-toolbar) ://github.com/inf3rno/browsehappy-toolbar ，它不是最好的，它的设计也不是很好，但它正在工作......

# javascript - 关闭开发人员工具时 IE 中的 Javascript 失败

> ID：16203748
> 
> 赞同：2
> 
> 时间：2013-04-24T23:08:01.693
> 
> 标签：javascript, debugging, internet-explorer-8, internet-explorer-9

我正在调试我的网站，当我没有打开控制台时，某些东西无法正常工作并且 javascript 失败。但是当我在打开开发者工具的情况下做同样的事情时，突然没有任何问题......

如果我不能使用开发者工具，如何查看发生了什么样的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:09:39.367

当你关闭开发者工具时，不再有一个`console`附加的，所以`console.log(...)`会失败。

查看您的代码以供使用`console`并将其包装在支票中：

```
if (typeof console !== 'undefined') {
    console.log('Message');
} 
```

您可以将其提取到一个函数中以节省在任何地方输入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:10:40.293

我有一个类似的问题：原来我`console.log`在我的代码中使用了在控制台关闭时失败的代码。

在您的代码中，您可以`console`在使用`console.log`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T23:11:13.107

这是一个非常模糊的解释，但您的 javascript 可能存在某种竞争条件，并且当您打开开发人员工具时，某些事件会以不同的顺序发生。（假设您的代码没有因为未定义控制台而失败）

# php - 更新XML所有子节点值在PHP中按属性搜索

> ID：16203757
> 
> 赞同：0
> 
> 时间：2013-04-24T23:08:27.333
> 
> 标签：php, xml, dom, xpath

我有一个多级节点的 xml。我可以找到节点，但需要知道如何更新节点值。在下面的文件中，我可以通过其属性找到节点通道，但是如何更新通道类型或其他节点的值？

这是我的 XML 文件，其中包含我所做的代码。

```
<?xml version="1.0"?>
<systemConfigs>
<systemConfig cnfId="1">
    <moduleName>Module 1</moduleName>
    <channeles ch="1">
        <chId>1</chId>
        <channelName>Channel 1 of Module 1</channelName>
        <channelType>myFunc 1</channelType>
        <channelFunc>conFig</channelFunc>
        <eu>myFunc 1</eu>
        <custScale>myFunc 1</custScale>
        <rawMin>myFunc 1</rawMin>
        <rawMax>myFunc 1</rawMax>
        <euMin>myFunc 1</euMin>
        <euMax>myFunc 1</euMax>
        <dspFormat>myFunc 1</dspFormat>
        <digOfPrec>myFunc 1</digOfPrec>
    </channeles>
    <channeles ch="2">
        <chId>2</chId>
        <channelName>Channel 2 of Module 1</channelName>
        <channelType>myFunc 2</channelType>
        <channelFunc>conFig</channelFunc>
        <eu>myFunc 2</eu>
        <custScale>myFunc 2</custScale>
        <rawMin>myFunc 2</rawMin>
        <rawMax>myFunc 2</rawMax>
        <euMin>myFunc 2</euMin>
        <euMax>myFunc 2</euMax>
        <dspFormat>myFunc 2</dspFormat>
        <digOfPrec>myFunc 2</digOfPrec>
    </channeles>
</systemConfig>
<systemConfig cnfId="2">
    <moduleName>Module 2</moduleName>
    <channeles ch="3">
        <chId>3</chId>
        <channelName>Channel 1 of Module 2</channelName>
        <channelType>myFunc 1</channelType>
        <channelFunc>conFig</channelFunc>
        <eu>myFunc 1</eu>
        <custScale>myFunc 1</custScale>
        <rawMin>myFunc 1</rawMin>
        <rawMax>myFunc 1</rawMax>
        <euMin>myFunc 1</euMin>
        <euMax>myFunc 1</euMax>
        <dspFormat>myFunc 1</dspFormat>
        <digOfPrec>myFunc 1</digOfPrec>
    </channeles>
    <channeles ch="4">
        <chId>4</chId>
        <channelName>Channel 2 of Module 2</channelName>
        <channelType>myFunc 2</channelType>
        <channelFunc>conFig</channelFunc>
        <eu>myFunc 2</eu>
        <custScale>myFunc 2</custScale>
        <rawMin>myFunc 2</rawMin>
        <rawMax>myFunc 2</rawMax>
        <euMin>myFunc 2</euMin>
        <euMax>myFunc 2</euMax>
        <dspFormat>myFunc 2</dspFormat>
        <digOfPrec>myFunc 2</digOfPrec>
    </channeles>
</systemConfig>
</systemConfigs> 
```

现在我想更新通道 ch=4 的子节点的值

在更新后，只有属性 ch=4 的节点通道将被保存为这样的新值。

```
<channeles ch="4">
        <chId>4</chId>
        <channelName>Channel New Name</channelName>
        <channelType>New Channel Type</channelType>
        <channelFunc>New Func</channelFunc>
        <eu>New Eu</eu>
        <custScale>New Cust Scale</custScale>
        <rawMin>1</rawMin>
        <rawMax>10</rawMax>
        <euMin>1</euMin>
        <euMax>10</euMax>
        <dspFormat>scintific</dspFormat>
        <digOfPrec>10</digOfPrec>
    </channeles> 
```

我可以这样找到节点。

```
$doc = new DOMDocument();
$doc->load(BASEPATH.'data/sysConf.xml');
$selector = new DOMXPath($doc);
$query = '//channeles[@ch="4"]/*';
$list = $selector->query($query);
$node = $list->item(0);

$module = $node->parentNode->getElementsByTagName( "channelName" );
$channelName = $module->item(0)->nodeValue;

$module = $node->parentNode->getElementsByTagName( "channelType" );
$channelType = $module->item(0)->nodeValue; 
```

请帮助我提供代码示例。如何用所有子节点更新我的 XML 节点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T23:52:53.457

这是一个使用[PHP SimpleXMLElement 类](http://www.php.net/manual/en/class.simplexmlelement.php)和一点 XPath 的解决方案：

```
<?php
$xml = <<<XML
<?xml version="1.0"?>
    <systemConfigs>
        <systemConfig cnfId="1">
        <moduleName>Module 1</moduleName>
        <channeles ch="1">
            <chId>1</chId>
            <channelName>Channel 1 of Module 1</channelName>
            <channelType>myFunc 1</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 1</eu>
            <custScale>myFunc 1</custScale>
            <rawMin>myFunc 1</rawMin>
            <rawMax>myFunc 1</rawMax>
            <euMin>myFunc 1</euMin>
            <euMax>myFunc 1</euMax>
            <dspFormat>myFunc 1</dspFormat>
            <digOfPrec>myFunc 1</digOfPrec>
        </channeles>
        <channeles ch="2">
            <chId>2</chId>
            <channelName>Channel 2 of Module 1</channelName>
            <channelType>myFunc 2</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 2</eu>
            <custScale>myFunc 2</custScale>
            <rawMin>myFunc 2</rawMin>
            <rawMax>myFunc 2</rawMax>
            <euMin>myFunc 2</euMin>
            <euMax>myFunc 2</euMax>
            <dspFormat>myFunc 2</dspFormat>
            <digOfPrec>myFunc 2</digOfPrec>
        </channeles>
    </systemConfig>
    <systemConfig cnfId="2">
        <moduleName>Module 2</moduleName>
        <channeles ch="3">
            <chId>3</chId>
            <channelName>Channel 1 of Module 2</channelName>
            <channelType>myFunc 1</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 1</eu>
            <custScale>myFunc 1</custScale>
            <rawMin>myFunc 1</rawMin>
            <rawMax>myFunc 1</rawMax>
            <euMin>myFunc 1</euMin>
            <euMax>myFunc 1</euMax>
            <dspFormat>myFunc 1</dspFormat>
            <digOfPrec>myFunc 1</digOfPrec>
        </channeles>
        <channeles ch="4">
            <chId>4</chId>
            <channelName>Channel 2 of Module 2</channelName>
            <channelType>myFunc 2</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 2</eu>
            <custScale>myFunc 2</custScale>
            <rawMin>myFunc 2</rawMin>
            <rawMax>myFunc 2</rawMax>
            <euMin>myFunc 2</euMin>
            <euMax>myFunc 2</euMax>
            <dspFormat>myFunc 2</dspFormat>
            <digOfPrec>myFunc 2</digOfPrec>
        </channeles>
    </systemConfig>
</systemConfigs>
XML;

// Create the SXE object
// You can read from file using the simplexml_load_file function
$sxe = new SimpleXMLElement($xml); 

// Fetch the right channel using XPath
$channele4 = $sxe->xpath('//channeles[contains(@ch, 4)]');

// Update the values you want
$channele4[0]->channelName = 'Channel New Name';
$channele4[0]->channelType = 'New Channel Type';

// Retrieve the parent (..) node
$systemConfig = $sxe->xpath('//channeles[contains(@ch, 4)]/..');

// Update the moduleName value
$systemConfig[0]->moduleName = 'New module name';

// Store the updated values in the $xml variable
$xml = $sxe->asXML();

// Print the updated XML
echo $xml; 
```

**注意：**如果您从远程源加载 XML，则 SXE 对象的实例化应该像这样完成：

```
$url = "http://domain.com/abc.xml";
$sxe = new SimpleXMLElement($url, NULL, TRUE); 
```

# php - Amazon S3 修改存储桶 ACL

> ID：16203758
> 
> 赞同：0
> 
> 时间：2013-04-24T23:08:30.117
> 
> 标签：php, amazon-ec2

我想使用 API for PHP 2 为日志传递组启用存储桶权限

```
 $result = $client->putBucketAcl(array(
        'Bucket' => $bucket . '-log',
        'AccessControlList' => array(
            'Grant' => array(
                'Grantee' => array(
                    'Type' => 'Group',
                    'URI' => 'http://acs.amazonaws.com/groups/s3/LogDelivery',
                ),
                'Permission' => 'WRITE',
            ),
            'Grant' => array(
                'Grantee' => array(
                    'Type' => 'Group',
                    'URI' => 'http://acs.amazonaws.com/groups/s3/LogDelivery',
                ),
                'Permission' => 'READ_ACP',
            ),
        ),
    )); 
```

下面的代码结构写在[http://docs.aws.amazon.com/AmazonS3/2006-03-01/dev/LoggingHowTo.html](http://docs.aws.amazon.com/AmazonS3/2006-03-01/dev/LoggingHowTo.html)中。

执行此代码失败并出现异常：

```
 **Aws\S3\Exception\MissingSecurityHeaderException**

 Your request was missing a required header 
```

我找不到如何解决此异常并在存储桶上设置 ACL。我错过了什么重要的东西吗？

# algorithm - 如何检查线段是否与矩形相交？

> ID：16203760
> 
> 赞同：41
> 
> 时间：2013-04-24T23:09:00.633
> 
> 标签：algorithm, language-agnostic, geometry, computational-geometry

如果您有 2 个点 (x1, y1) 和 (x2, y2)，它们代表一个矩形的两个对角，还有 2 个其他点，(x3,y3) 和 (x4,y4)，它们代表一个矩形的 2 个端点线段，如何检查线段是否与矩形相交？

（线段只是包含在给定端点之间的线段。它不是由这两个点定义的无限长线。）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-24T23:11:30.273

一个非常简单的选择是使用[标准算法来检查两条线段是否相交](https://stackoverflow.com/questions/4977491/determining-if-two-line-segments-intersect/4977569#4977569)，以检查线段是否与构成框角的四个线段中的任何一个相交。检查两条线段是否相交在计算上非常有效，所以我希望它可以运行得非常快。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T19:27:12.730

得到所有4个顶点（矩形的角）与线段的方向向量的点积。如果所有 4 个值的符号相同，则所有顶点都位于直线的同一侧（不是线段，而是无限线），因此直线不与矩形相交。这种方法仅适用于二维交叉点检测。这可用于快速过滤其中的大多数（仅使用乘法和加法）。您必须对线段而不是线进行进一步检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-03T18:17:45.027

要了解如何导出用于测试线段是否与矩形相交的公式，记住[向量点积](https://en.wikipedia.org/wiki/Dot_product)的属性很重要。

将线段表示为单位向量以及线段起点与原点之间的距离。这是一些 C# 代码，用于从[`PointF`](https://msdn.microsoft.com/en-us/library/system.drawing.pointf%28v=vs.110%29.aspx)变量`a_ptStart`和计算它`a_ptEnd`，使用 a [`Vector`](https://msdn.microsoft.com/en-us/library/system.windows.vector%28v=vs.110%29.aspx)：

```
Vector vecLine = new Vector(a_ptEnd.X - a_ptStart.X, a_ptEnd.Y - a_ptStart.Y);
double dLengthLine = vecLine.Length;
vecLine /= dLengthLine;
double dDistLine = Vector.Multiply(vecLine, new Vector(a_ptStart.X, a_ptStart.Y)); 
```

您还需要计算线段的垂直向量及其到原点的距离。将单位向量旋转 90° 很[容易](http://mathworld.wolfram.com/PerpendicularVector.html)。

```
Vector vecPerpLine = new Vector(-vecLine.Y, vecLine.X);
double dDistPerpLine = Vector.Multiply(vecPerpLine, new Vector(a_ptStart.X, a_ptStart.Y)); 
```

假设矩形的四个角位于名为、、和的`Vector`变量中，计算线段与目标边界矩形的所有四个角之间的[距离：](https://en.wikibooks.org/wiki/Linear_Algebra/Orthogonal_Projection_Onto_a_Line)`vecRect1``vecRect2``vecRect3``vecRect4`

```
double dPerpLineDist1 = Vector.Multiply(vecPerpLine, vecRect1) - dDistPerpLine;
double dPerpLineDist2 = Vector.Multiply(vecPerpLine, vecRect2) - dDistPerpLine;
double dPerpLineDist3 = Vector.Multiply(vecPerpLine, vecRect3) - dDistPerpLine;
double dPerpLineDist4 = Vector.Multiply(vecPerpLine, vecRect4) - dDistPerpLine;
double dMinPerpLineDist = Math.Min(dPerpLineDist1, Math.Min(dPerpLineDist2,
    Math.Min(dPerpLineDist3, dPerpLineDist4)));
double dMaxPerpLineDist = Math.Max(dPerpLineDist1, Math.Max(dPerpLineDist2,
    Math.Max(dPerpLineDist3, dPerpLineDist4))); 
```

如果所有距离都是正数，或者所有距离都是负数，则矩形位于直线的一侧或另一侧，因此没有交集。（零范围矩形被认为不与任何线段相交。）

```
if (dMinPerpLineDist <= 0.0 && dMaxPerpLineDist <= 0.0
        || dMinPerpLineDist >= 0.0 && dMaxPerpLineDist >= 0.0)
    /* no intersection */; 
```

接下来，将目标边界矩形的所有四个角投影到线段上。这为我们提供了线的原点与该线上矩形角的投影之间的距离。

```
double dDistLine1 = Vector.Multiply(vecLine, vecRect1) - dDistLine;
double dDistLine2 = Vector.Multiply(vecLine, vecRect2) - dDistLine;
double dDistLine3 = Vector.Multiply(vecLine, vecRect3) - dDistLine;
double dDistLine4 = Vector.Multiply(vecLine, vecRect4) - dDistLine;
double dMinLineDist = Math.Min(dDistLine1, Math.Min(dDistLine2,
    Math.Min(dDistLine3, dDistLine4)));
double dMaxLineDist = Math.Max(dDistLine1, Math.Max(dDistLine2,
    Math.Max(dDistLine3, dDistLine4))); 
```

如果矩形的点不在线段的范围内，则没有交点。

```
if (dMaxLineDist <= 0.0 || dMinLineDist >= dLengthLine)
    /* no intersection */; 
```

我相信这就足够了。

# git - 在 GIT 中查找具有特定单词/行的最新提交

> ID：16203763
> 
> 赞同：4
> 
> 时间：2013-04-24T23:09:11.417
> 
> 标签：git

如果我有一个带有最新提交的文件，如下所示：

```
class A {
    String name = "Mary";
} 
```

在特定的提交中， `String name = "Mary";`从 `String name = "Bob"`. 问题是，这条线已经修改了几次（一次是`"John"`，另一次是`"Adam"`）所以`git blame`没有用。使用 Git，除了挖掘日志之外，找出最后一次提交的字符串名称 = "Bob" 是什么的最简单方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:54:19.020

这是我 [的命令](http://kernel.org/pub/software/scm/git/docs/git-log.html)

```
git log -p -S <search term> 
```

更多信息

```
-p
生成补丁（参见生成补丁部分）。

```

```
-S <string>
Look for differences that introduce or remove an instance of <string>.
Note that this is different than the string simply appearing in diff 
output; see the pickaxe entry in gitdiffcore(7) for more details. 
```

# git - 将特定文件夹与 git 上的更新隔离开来

> ID：16203765
> 
> 赞同：3
> 
> 时间：2013-04-24T23:09:19.823
> 
> 标签：git, branch, git-branch, bitbucket, tortoisegit

我对版本控制没有那么丰富的经验，这是我第一次使用 Git。我们正在使用 BitBucket 和 TortoiseGit，设置并运行。

现在，我希望能够隔离一个文件夹（我们称其为“资源”），该文件夹将保存一些资源文件，例如图形、脚本、声音，这些对项目的编码人员来说并不重要。编码器不能从该文件夹中提取或同步。

但是，另一个团队应该能够操纵这个“资源”文件夹并对其进行更改，同时也能够接收编码人员所做的更改。

我知道有一个创建 .gitignore 列表的忽略函数。但据我了解，此列表将忽略所有用户的文件/文件夹，因此一旦定义为被忽略，没有人将能够有效地访问“资源”文件夹。

另一种方法是将“起源”分支到“编码器”分支和“资源”分支。然后“编码器”将向/从远程“编码器”推送和拉取，推送到（但从不从）“来源”，也从不推送到“资源”。“资源”总是从“原点”拉/推，但从不拉/推到“编码员”。

我怀疑这个过程确实需要某种“推送到特定分支列表”选项。

不确定我对它的工作原理是否正确，我已经尝试了几个实验，但显然失败了。我看错了吗？对于这种情况，最好的解决方案是什么（最好使用 TortoiseGit）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:27:23.880

确保不要在该文件夹中放置太多（二进制）“资源”：作为 git 存储库，这些资源将被克隆，它们可以显着增加存储库的大小。

我建议将它们隔离在一个单独的 repo 中，并将该 repo 声明为主要开发 repo 的[**子模块**](http://git-scm.com/book/en/Git-Tools-Submodules)。

这样，编码人员可以克隆主存储库，如果不需要，则不必初始化和更新“资源”子模块。
但是如果他们需要，那么 a`TortoiseGit > Submodule update`就足以将该内容加载到他们的工作树中。

# c++ - Eclipse CDT：如何找到修改变量的所有位置

> ID：16203768
> 
> 赞同：0
> 
> 时间：2013-04-24T23:09:40.437
> 
> 标签：c++, c, eclipse, variables, eclipse-cdt

是否可以在 Eclipse CDT 中搜索变量名并仅显示变量被修改或可能修改的结果？例如，变量出现在赋值的左侧。

如果没有，是否有其他实用程序可以解析代码以产生此结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:15:38.507

右键单击变量名称，然后选择“打开调用层次结构”。

它可能很挑剔；您可能需要先左键单击它以使其突出显示，然后再右键单击。

# python - Python 模拟定时器

> ID：16203774
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:00.973
> 
> 标签：python, timer

我正在寻找一种在 Python 中为多个代理设置“计时器”的方法。

我的模拟将有许多车辆在执行操作之前需要等待独立的时间段。但是，我也希望能够对计时器执行“停止”“启动”和“重置”操作。

关于使用什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:39:13.043

我会尝试使用 SimPy ( [https://simpy.readthedocs.org/en/latest/](https://simpy.readthedocs.org/en/latest/) )。目前可能是 2.3.1 版本（尽管完成后 SimPy3 应该是一个有效的选择）。

有很多示例（[https://simpy.readthedocs.org/en/2.3.1/Manuals/Examples.html](https://simpy.readthedocs.org/en/2.3.1/Manuals/Examples.html)），似乎与您的情况相似。我自己使用过 SimPy 进行简单的以生物为主题的基于代理的模拟，并且效果很好。

# javascript - 数组被“链接”到不同的数组？

> ID：16203775
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:04.003
> 
> 标签：javascript, arrays

我正在尝试将数组设置为某个值，然后将第二个数组的值设置为第一个数组的值。但是，当我将第二个数组的变量设置为等于变量第一个数组时，第二个数组似乎只是成为第一个数组的克隆，并且完全模仿它。这不是我想要的——我只想将第二个数组设置为等于第一个数组的当前值。我认为这是一个基本问题，但我不知道解决它的最佳方法。

演示：http: [//jsfiddle.net/7rLvQ/](http://jsfiddle.net/7rLvQ/)

```
a = [-1, -1, -1];
b = [];
while (a[2] < 10) {
    console.log(b + ", " + a);
    a[2]++;

    b = a;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:13:57.250

> 第二个数组似乎只是成为第一个数组的克隆，并完全模仿它

不，关键是不再有第二个数组。你只有两个变量指向同一个数组。

> 我只想将第二个数组设置为等于第一个数组的当前值

为此，您需要创建一个新数组并复制每个项目值。最快的方法是使用[`slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
 b = a.slice(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:14:04.560

那是因为变量是对数组的引用，而不是数组本身。尝试这个。

```
b = a.slice(); 
```

# javascript - 如何让 JQuery 代码在我的浏览器上运行？

> ID：16203778
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:05.793
> 
> 标签：javascript, jquery, html

我是 JQuery 的新手，我想弄清楚如何让我的 .mouseenter() 和 .mouseleave() 方法工作。到目前为止，我已经尝试过使用 IE8 和 FF，但由于某些奇怪的原因，除了保持静态之外，我无法让我的元素做任何事情。这是我到目前为止的代码：

HTML：

```
<!Doctype html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="style.css"/>
        <script type="text/javascript" src="file:///D:/Documents%20and%20Settings/stsc/My%20Documents/_prac/script.js"></script>
        <title>Practice</title>
    </head>
    <body>
        <div id="red"></div>
        <div id="yellow"></div>
        <div id="green"></div>
    </body>
</html> 
```

CSS：

```
div{
    height:100px;
    width: 100px;
    border-radius: 50px;
}

#red{
    background-color: red;
}

#yellow{
    background-color: yellow;
}

#green{
    background-color: green;
} 
```

JS：

```
$(document).ready(function(){
    $('div').mouseenter(function(){
        $(this).animate({
            width: '+=10px'
        });
    });
    $('div').mouseleave(function(){
        $(this).animate({
            width: '-=10px'
        });
    });
    $('div').click(function() {
        $(this).toggle(1000);
    });
}); 
```

这只是一个练习使用 JQuery 的简单示例。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:12:22.463

你似乎没有包括 jQuery：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

另外，D:\ 驱动器是硬盘驱动器还是 CD/DVD 驱动器？这也可能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:12:50.793

您应该在 HTML 中引用 jquery 库：

```
<head>
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="file:///D:/Documents%20and%20Settings/stsc/My%20Documents/_prac/script.js"></script>
    <title>Practice</title>
</head> 
```

# c# - 如何从另一个类设置控件的属性

> ID：16203779
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:08.107
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我在页面上有一个progressBar 控件。通过 this.DefaultViewModel["Items"] = feedAllCinemas.Cinemas 获取的所有数据；其中feeAllCinemas 放在另一个类中。

我需要控制 feedAllCinemas 类中 progressBar 的可见性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:42:38.630

一种（肮脏但简单）的方法是将进度条实例传递给 feedAllCinemas 类。

```
class feedAllCinemas
{
   ProgressBar m_ProgressBar;

   public feedAllCinemas(ProgressBar pbar)
   {
        m_ProgressBar = pbar;
   }

   void someMethod()
   {
         m_ProgressBar.Visibility = Visibility.Collapsed;
   }
} 
```

# java - Java Server：通过广播在讲师和学生之间进行会议

> ID：16203782
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:22.417
> 
> 标签：java, client, broadcast

假设有 2000 个连接到服务器。其中10%是讲师并主持课程，同时进行在线讲座。其余 90% 的用户是观看讲座的学生。

广播这个的最佳方式是什么？作为讲师通过服务器将信息发送到服务器，服务器指的是学生？或者学生应该直接连接到扬声器，让他们在不通过服务器的情况下向学生广播信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:23:49.477

不可能为您的问题提供一个有效的答案，因为有很多方面是未知的。其中一些问题立即浮现在我的脑海中：

*   数据类型（即服务器需要的一些预处理）
*   数据量（即简单聊天与视频流）
*   网络结构（他们都是从同一个网络内连接，还是从任何地方自由连接；多播是一种选择吗？；讲师可以通过移动网络连接；防火墙/NAT？；带宽？）
*   监控/记录/记录交换数据（是否需要记录/记录交换数据/讲座）
*   安全约束（可能禁止直接连接到运行可能不受信任的代码的服务器）
*   扩展需求（2000 连接在不久的将来会变成 10000）

包括视频流的讲座可能是分布式方法的障碍，因为讲师可能无法处理 9 个或更多学生的流。但是，在这种情况下，“简单服务器”也不够用（可能是[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)）。NAT 也可能是一个大问题，尽管有[不同](http://en.wikipedia.org/wiki/NAT_traversal)的遍历技术。

我倾向于以服务器为中心的方法，当客户端环境无法控制时，它似乎引发的问题更少，即使它可能（可能会严重）增加服务器端的要求。

# git - git忽略修改过的文件，所以我可以改变分支

> ID：16203783
> 
> 赞同：0
> 
> 时间：2013-04-24T23:10:25.093
> 
> 标签：git

我创建了一个分支“用户”，在其中我做了很多更改，包括一个 .less 文件。我打开了一个较少的编译器，它会在保存时自动编译。当我更改为 master 分支时，.less 文件已编译，因此我的 .css 文件现在在 master 上有所不同。所以现在我不能合并用户（包括提交）或切换回用户分支。

我收到以下错误：

> ```
> pathspec 'media/less/content/public/template.css' did not match any file(s) known to git. 
> ```

无论如何我可以撤消它或忽略该文件，以便我可以合并“用户”吗？

我试图签出该文件，但它没有工作：

```
git checkout media/less/content/public/template.css 
```

结果是

> pathspec 'media/less/content/public/template.css' 与 git 已知的任何文件都不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:19:51.397

您可以重置一次提交，然后查看更改的文件，清理并再次提交。

```
git reset HEAD~1
git status # you'll see the files that changed

# probably you need to do this
git checkout media/less/content/public/template.css 
git commit -m "..."
git push -f # to update the last commit 
```

# facebook - FQL 应用附加过滤器

> ID：16203795
> 
> 赞同：0
> 
> 时间：2013-04-24T23:11:48.867
> 
> 标签：facebook, facebook-fql, facebook-page

在FQL“页面”表的[文档](http://developers.facebook.com/docs/reference/fql/page)底部，它说

> 注意：可以指定其他列上的其他过滤器，但它们可能会降低查询效率。

我想按页面类型过滤，但如果我尝试查询

```
SELECT name FROM page WHERE type = 'Musician/band'

  "error": {
    "message": "Your statement is not indexable. The WHERE clause must contain an indexable column. Such columns are marked with * in the tables linked from http://developers.facebook.com/docs/reference/fql ", 
    "type": "NoIndexFunctionException", 
    "code": 604
  } 
```

有没有按页面类型过滤？

更新：

我的 Graph Search 测试版刚刚在我的帐户中启动，现在我可以通过我的浏览器和 facebook 帐户使用以下网址执行此操作：

[http://www.facebook.com/search/musician/pages/114952118516947/home-residents/pages-liked/intersect](http://www.facebook.com/search/musician/pages/114952118516947/home-residents/pages-liked/intersect)

有没有办法以 JSON 或 XML 格式获取这些数据？

# java - 包装类类型泛型错误

> ID：16203800
> 
> 赞同：1
> 
> 时间：2013-04-24T23:12:20.303
> 
> 标签：java, generics

我没有理解为什么这段代码会显示这个编译错误。

错误是：

`Type mismatch: cannot convert from TestClass.Wrapper<List<capture#1-of ?>> to TestClass.Wrapper<List<?>>`

代码如下。

```
package test.cls;

import java.util.List;

public class TestClass
{
    static abstract class Wrapper<A>
    {
        public abstract A wrapped();
    }

    public static <A> Wrapper<A> wrap(final A val)
    {
        return new Wrapper<A>()
        {
            public A wrapped()
            {
                return val;
            }
        };
    }

    public static void main(final String[] args)
    {
        final List<?> list = null;
        final Class<?> c = null;
        final Wrapper<List<?>> wrapList = wrap(list); // Error here
        final Wrapper<Class<?>> wrapC = wrap(c); // Error here
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:16:26.960

编译器的泛型类型推断在嵌套的通配符捕获中令人窒息。您需要明确指定类型参数：

```
final Wrapper<List<?>> wrapList = TestClass.<List<?>>wrap(list);
final Wrapper<Class<?>> wrapC = TestClass.<Class<?>>wrap(c); 
```

# php - 如何在不覆盖 PHP 中现有键的情况下合并两个多维数组？

> ID：16203804
> 
> 赞同：0
> 
> 时间：2013-04-24T23:12:48.680
> 
> 标签：php, arrays, multidimensional-array

我正在尝试添加两个多维数组。该函数应该与将数组添加在一起的方式完全相同，如下所示：$new_array = $array1 + $array2，除了它应该适用于多维数组。这意味着 $array2 不应覆盖现有的键值。

示例：假设我有以下 $default_array：

```
array
  'something' => int 0
  'nested' => 
    array (size=3)
      'a' => null
      'b' => null
      'c' => null 
```

以及以下 $user_array：

```
array
  'something' => int 1000
  'nested' => 
    array (size=3)
      'a' => 1
  'new' => int 4 
```

将两者加在一起（如 $user_array + $default_array）应该给我：

```
array (size=4)
      'something' => int 1000
      'nested' => 
        array (size=3)
          'a' => 1
          'b' => null
          'c' => null
      'new' => int 4 
```

目前，如果我添加两个多维数组，覆盖功能似乎只适用于第一个数组维度。这意味着在这种情况下，'nested' 已经存在于 $user_array 中，因此它不会附加其他值。

编辑：我还应该提到，这需要使用无限量的维度。

编辑 2：我只是尝试应用 Rain 的答案，但它没有按预期工作。首先，我收到“未定义索引”通知。其次，输出不是我想要的。考虑以下数组：

```
 $default = array(
            'a' => array(
                'a' => 'a',
                'b' => 'b',
                'c' => 'c',
                ),
            );

        $user = array(
            'b' => 1,
            'a' => array(
                'b' => 'something',
                'c' => 'something else',
                'd' => 'd',
                ),
            'c' => 2); 
```

我用 Rain 的函数得到的输出是这样的：

```
array (size=3)
  'a' => 
    array (size=3)
      'a' => string 'a' (length=1)
      'b' => string 'b' (length=1)
      'c' => string 'c' (length=1)
  'b' => int 1
  'c' => int 2 
```

在此示例中，子数组中的“b”和“c”键应分别为“something”和“something else”。我不太确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:24:51.803

您可以尝试使用**`array_merge_recursive()`**（不仅仅是array_merge（）） [http://www.php.net/manual/en/function.array-merge-recursive.php](http://www.php.net/manual/en/function.array-merge-recursive.php)

```
<?php
$defaultarray = array(
'something' => 0,
  'nested' => 
    array (
      'a' => null,
      'b' => null,
      'c' => null));

$newArray = array(
  'something' => 1000, 
  'nested' => 
    array ('a' => 1,
  'new' => 4));

$mergedArray = array_merge_recursive($defaultarray, $newArray);
echo print_r($mergedArray,true);
?> 
```

**输出：** Array ( [something] => Array ( [0] => 0 [1] => 1000 ) [nested] => Array ( [a] => Array ( [0] => [1] => 1 ) [b] => [c] => [新] => 4))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:33:01.237

递归函数绝对是这里的方法。我刚刚整理了以下内容。注意`&`在函数声明中使用`fill_in_aux`. 这会导致第二个参数（称为`$default`）通过引用而不是值传递。它被包裹起来，`fill_in`这样真正的“默认”数组就不会被修改。

```
function fill_in($user, $default) {
    fill_in_aux($user, $default);
    return $default;
}

function fill_in_aux($user, &$default) {
    foreach ($user as $key => $value) {
        if (is_array($value)) {
            fill_in_aux($user[$key], $default[$key]);
        } else {
            $default[$key] = $value;
        }
    }
} 
```

这假定数组中设置的任何内容都`$default`应该被数组中存在的任何内容覆盖`$user`，即使数组中的键`$user`设置为`null`。要更改此行为，`if`请`else`在`fill_in_aux`.

* * *

## 示例用法

使用您的示例数组，输出

```
print_r(fill_in($user_array, $default_array)); 
```

是

```
Array
(
    [something] => 1000
    [nested] => Array
        (
            [a] => 1
            [b] =>
            [c] =>
        )

    [new] => 4
) 
```

* * *

## 分解

通常，在 PHP 中调用函数时，参数是按*值*传递的：函数获取传入变量的***副本***。这意味着函数可以对参数执行任何操作，但是当函数返回时，传递的原始变量不受影响。

当参数以`&`符号开头时，参数通过***引用***传递，而不是被复制。当函数对参数进行修改时，它实际上是直接对传入的变量进行更改。

有关更多信息，请查看： http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-30T05:19:22.510

令我惊讶的是，`array_replace_recursive()`七年前没有人为您提供本机功能。@bestprogrammerintheworld 是在正确的轨道上，但选择了错误的递归调用。

使用除此功能之外的任何东西都将是不必要的代码膨胀，并且很可能会降低性能。

代码：（[演示](https://3v4l.org/71R1i)）

```
var_export(
    array_replace_recursive($default, $user)
); 
```

输出：

```
array (
  'a' => 
  array (
    'a' => 'a',
    'b' => 'something',
    'c' => 'something else',
    'd' => 'd',
  ),
  'b' => 1,
  'c' => 2,
) 
```

# java - 方法中的数组修改

> ID：16203806
> 
> 赞同：0
> 
> 时间：2013-04-24T23:12:59.660
> 
> 标签：java, arrays, object

这是家庭作业的一部分。

对于任务的一部分，我必须创建几个数组，将它们传递给方法，在那里修改它们，并且通常与它们一起玩。我已经成功完成了大部分工作，但最后一部分有问题。我通过四个 void 方法创建了四个原始类型数组。然后，我将这些数组（和对象数组）传递给另一个 void 方法，该方法使用数组中的值构建对象数组。当我尝试使用 toString 打印这些对象的状态时，它每次都返回数组中最后一个对象的状态（通过测试，我发现在 BuildWine 方法完成后，Wine 数组的值都相当于最后创建的对象的值。但是，当在方法中打印 toString 时，它会正确打印。

我很困惑为什么在以这种方式操作时会正确修改基元数组，但是对象数组会以这种奇怪的方式更改（它应该保持空白，给出错误或其他内容，而不是用最后创建的对象的值）。感谢您的帮助。

```
public class LabSeven {

    public static void main(String[] args) {
        int[] wineAges = new int[5];
        String[] wineNames = new String[5];
        int[] wineQuantity = new int[5];
        double[] winePrice = new double[5];
        Wine[] wineList = new Wine[5]; 

        BuildAges(wineAges);
        BuildNames(wineNames);
        BuildQuantity(wineQuantity);
        BuildPrice(winePrice);
        BuildWine(wineList, wineAges, wineNames, wineQuantity, winePrice);

        for(int i = 0; i < wineList.length; i++){
            System.out.println(wineList[1].toString() + "\n");
        }
    }

    public static void BuildAges(int[] wineAges){
        wineAges[0] = 10;
        wineAges[1] = 23;
        wineAges[2] = 13;
        wineAges[3] = 25;
        wineAges[4] = 50;
    }

    public static void BuildNames(String[] wineNames){
        wineNames[0] = "Chardonay";
        wineNames[1] = "Riesling";
        wineNames[2] = "Merlot";
        wineNames[3] = "Chianti";
        wineNames[4] = "Pinot Noir";
    }

    public static void BuildQuantity(int[] wineQuantity){
        wineQuantity[0] = 10;
        wineQuantity[1] = 14;
        wineQuantity[2] = 4;
        wineQuantity[3] = 7;
        wineQuantity[4] = 1;
    }

    public static void BuildPrice(double[] winePrice){
        winePrice[0] = 100.50;
        winePrice[1] = 75.50;
        winePrice[2] = 45.50;
        winePrice[3] = 200.50;
        winePrice[4] = 1250.50;
    }

    public static void BuildWine(Wine[] wineList, int[]wineAges, String[] wineNames, int[] wineQuantity, double[] winePrice){
        for (int i = 0; i < wineAges.length; i++){
            wineList[i] = new Wine(wineAges[i], wineNames[i], wineQuantity[i], winePrice[i]);
            //System.out.println(wineList[i].toString() +"\n");
        }
    }
}

public class Wine {
    static int age;
    static String type;
    static int quantity;
    static double price;

    public Wine(int wineAge, String wineType, int wineQuantity, double winePrice){
        age = wineAge;
        type = wineType;
        quantity = wineQuantity;
        price = winePrice;
    }

    public String toString(){
        String status = ("Wine's Age: " + age + "\nWine's Type: " + type + "\nWine's Quantity: " + quantity + "\nWine's Price: " + price);

        return status;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:16:25.257

在您的`Wine`班级中，您已将所有属性标记为`static`，即整个班级的一个值，无论您创建多少实例。您的构造函数每次调用时都会覆盖所有值。

从`static`中的所有 4 个属性中删除，以便您创建`Wine`的每个对象都有一个值。`Wine`

# c# - 如何将不透明度添加到控件类c#

> ID：16203807
> 
> 赞同：0
> 
> 时间：2013-04-24T23:13:04.747
> 
> 标签：c#, .net, winforms, controls, opacity

这是我从互联网上获取的以下控制类；

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Text;
using System.Windows.Forms;

public class TranspCtrl : Control
{
   private Color brushColor = Color.Transparent;
   private Color fillColor = Color.Transparent;
   private int opacity = 100;
   private float lineThick = 1.0f;

public TranspCtrl()
{
    SetStyle(ControlStyles.SupportsTransparentBackColor, true);
    SetStyle(ControlStyles.ResizeRedraw, true);

    //Set style for double buffering
    SetStyle(ControlStyles.DoubleBuffer | ControlStyles.AllPaintingInWmPaint | ControlStyles.UserPaint, true);

    //Set the default backcolor
    this.BackColor = Color.Transparent;
}

public Color FillColor
{
    get
    {
        return this.fillColor;
    }
    set
    {
        this.fillColor = value;
        this.Invalidate();
    }
}

public float LineThick
{
    get
    {
        return this.lineThick;
    }
    set
    {
        this.lineThick = value;
        this.Invalidate();
    }
}

protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    Graphics g = e.Graphics;
    g.SmoothingMode = SmoothingMode.HighQuality;

    RectangleF r = new RectangleF(0.0f, 0.0f, (float)this.Width, (float)this.Height);
    float cx = r.Width-1;
    float cy = r.Height-1;
    float offset = 0.4f;

    Pen pen = new Pen(new SolidBrush(this.ForeColor), lineThick);
    pen.Alignment = PenAlignment.Center;
    SolidBrush brush = new SolidBrush(fillColor);
    SolidBrush bckgnd = new SolidBrush(this.BackColor);

    // Creates a path to draw graphics
    GraphicsPath path = new GraphicsPath();

    // Paint the control
    if (this.BackColor == Color.Transparent)
    {          
        // Add the AddEllipse method to the path.
        path.AddEllipse(0.0f, 0.0f, cx, cy);

        // Creates the region area for the control painting
        this.Region = new Region(path);

        //Draw the shape over the region               
        g.FillEllipse(brush, 0.0f, 0.0f, cx, cy);

        //Draw the outline
        g.DrawEllipse(pen, lineThick/2.0f, lineThick/2.0f, cx-lineThick-offset, cy-lineThick-offset);
    }
    else 
    {                   
        //Add a rectangle to the path. This will be the control background.
        path.AddRectangle(r); 

        //Creates a region area for the background painting
        this.Region = new Region(path); 

        //Paint the control background
        g.FillRegion(bckgnd, this.Region);

        //Draw the shape over the control background
        g.FillEllipse(brush, 0.0f, 0.0f, cx, cy);

        // Draw the shape outline
        g.DrawEllipse(pen, lineThick / 2.0f, lineThick / 2.0f, cx - lineThick, cy - lineThick);
    }

    pen.Dispose();
    brush.Dispose();
    bckgnd.Dispose();
    this.Region.Dispose();
    path.Dispose();
}
} 
```

我一共有2个问题。

1.  如何添加不透明度选项。

2.  我如何在仍然使用此“粗线”选项的同时将其绘制为矩形，而不是将其绘制为圆形。

谢谢。

# javascript - 如果未找到子字符串，则在文本中添加前导空格

> ID：16203808
> 
> 赞同：0
> 
> 时间：2013-04-24T23:13:14.420
> 
> 标签：javascript, jquery, css

我正在尝试对齐表格中列的文本。为此，如果文本没有星号，我会尝试在文本中添加前导空格。

这是我想出的（不起作用）：

```
$("table:eq(1) tr").find("td:eq(0)").text().index('*').css({ 'text-indent': '2pt'}); 
```

如果不是请建议，这是一种更好的方法吗？

例如：第一列中的数据现在看起来像

```
*S10054472  Active  50000       
11-506843   Active  95000       
12-59949    Active  12500       
12-5709     Active  12750       
*11-499979  Active  3232 
```

应该看起来像

```
*S10054472  Active  50000       
 11-506843  Active  95000       
 12-59949   Active  12500       
 12-5709    Active  12750       
*11-499979  Active  3232 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:28:41.317

尝试这个

## 脚本

```
$('table tr').find('td:first').filter(function(){
    return !$(this).text().match(/^\*/)
}).css('padding-left', '6px') 
```

## 标记

```
 <table>
     <tr>
        <td>*S10054472</td>
        <td>Active</td>
        <td>50000</td>
     </tr>
     <tr>
        <td>11-506843</td>
        <td>Active</td>
        <td>95000</td>
     </tr>
  </table> 
```

## 更新

一个不太*密集*的过滤功能

```
$('table tr').find('td:first').filter(function(){
    return this.innerHTML[0] != '*'
}).css('padding-left', '6px') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:38:37.730

我认为这应该很简单：

```
$('table td:contains("*")').prepend(document.createTextNode(' ')); 
```

它需要`document.createTextNode`代替带有空格的简单字符串，因为 jQuery`.prepend()`需要 DOM 元素或 jQuery 对象。

# ios - 将 UIImageView 添加到自定义 UIButton 类

> ID：16203809
> 
> 赞同：1
> 
> 时间：2013-04-24T23:13:24.793
> 
> 标签：ios, uibutton, custom-view

我创建了一个自定义 UIButton 类并覆盖了 init 方法：

```
- (id)initWithFrame:(CGRect)frame title:(NSString *)titulo
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        setaDown = [UIImage imageNamed:@"setaDown"];
        separator = [UIImage imageNamed:@"separatorLine"];

        self = [UIButton buttonWithType:UIButtonTypeCustom];
        [self setFrame:frame];
        self.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
        self.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0);
        seta = [[UIImageView alloc]initWithFrame:CGRectMake(frame.size.width-setaDown.size.width*2, frame.size.height/2, setaDown.size.width/1.2, setaDown.size.height/1.2)];
        [seta setImage:setaDown];
        [self addSubview:seta];
        separatorLine = [[UIImageView alloc]initWithFrame:CGRectMake(5, frame.size.height-2, frame.size.width-10, separator.size.height)];
        [separatorLine setImage:separator];
        [self addSubview:separatorLine];
        [self setTitle:titulo forState:UIControlStateNormal];
        [self setTitleColor:[UIColor blackColor] forState:UIControlStateHighlighted];
        [self setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [self setTitleColor:[UIColor blackColor] forState:UIControlStateSelected];
        self.backgroundColor = [UIColor whiteColor];
    }
    return self;
} 
```

问题是，图像没有显示在按钮中，并且我`exc_bad_access`在该行中有一个 , ：

```
seta = [[UIImageView alloc]initWithFrame:CGRectMake(frame.size.width-setaDown.size.width*2, frame.size.height/2, setaDown.size.width/1.2, setaDown.size.height/1.2)]; 
```

不知道为什么我得到这个错误，以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-30T05:49:31.503

您可以创建一个自定义`UIControl`，它具有`touchUp event`并在其上放置任何类型的组件。如果`UIButton`不满足您的需要，那么您可以进行自定义`UIControl`。

前任：

```
class MyButton: UIControl {
   @IBOutlet var myImage: UIImageView!
   @IBOutlet var myTitle: UILabel!
   @IBOutlet var myImage2: UIImageView!

   override var isSelected: Bool {
        didSet {
             // Configure image for `isSelected` status been changed.
             myImage.image = (isSelected ? selImg  : normalImg)
        }
   }       

   override var isEnabled: Bool {
        didSet {
             // Configure for `isEnabled` status been changed.
             myTitle.isEnabled = isEnabled
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:53:50.600

据我所知，您不能向按钮添加 2 张图像。获取一个图像编辑器，将它们合成在一起，然后执行以下操作：

```
[self setBackgroundImage:[UIImage imageNamed:@"mynewimagename"] forState:UIControlStateNormal] 
```

简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:24:00.427

A`UIButton`已经有一个`imageView`. 你可以简单地使用

```
self.imageView.image = setaDown 
```

并根据需要配置其他方面`imageView`（例如，位置和大小，以便`separator`适合您）。

# matlab - Delaunay三角剖分让我失去对称性

> ID：16203815
> 
> 赞同：1
> 
> 时间：2013-04-24T23:14:10.403
> 
> 标签：matlab, triangulation, delaunay

我正在使用 Delaunay 三角剖分将多边形拆分为三角形。我使用大代码处理 FEM，我的“检查点”之一是对称性（如果数据是对称的，则输出也必须是对称的）。但是，由于我无法控制 Delaunay 三角剖分，它使我失去了对称性。

我写了一个小代码来说明我的问题：我们考虑两个不相交的三角形和一个与它们相交的大矩形。我们想用矩形对这些三角形的减法进行三角测量：

```
clear all
close all
warning off % the warning is about duplicate points, not important here

figure
hold on

p =[.3 .3
.4 .3
.3 .4
.7 .6
.6 .7
.7 .7]; % coordinates of the points for the triangles

px = 1/3;
py = 1/3;
lx = 1/3;
ly = 1/3; % size and position of the rectangle

% rearrange the polygon with clockwise-ordered vertices
[x1,y1]=poly2cw([px; px+lx; px+lx; px],[py; py; py+ly; py+ly]); % rectangle

patch(x1,y1, 1, 'EdgeColor', 'k');

for i=1:2

    pc = p(3*i-2:3*i,:); % current triangle
    % rearrange the polygon with clockwise-ordered vertices
    [x0,y0]=poly2cw(pc(:,1),pc(:,2)); % triangle

    [x2,y2] = polybool('intersection',x1,y1,x0,y0); % intersection
    [x3,y3] = polybool('subtraction',x0,y0,x2,y2); % subtraction

    DT = delaunayTriangulation(x3,y3);

    triplot(DT,'Marker','o')

end
XL = xlim; xlim(XL+[-1 +1]*diff(XL)/10);
YL = ylim; ylim(YL+[-1 +1]*diff(YL)/10);
axis equal;
box on; 
```

![delaunay三角剖分](https://i.stack.imgur.com/v4EKu.jpg)

如您所见，Delaunay 三角剖分在两个三角形中的行为不同，因此失去了对称性。

有没有一种简单的方法来恢复对称性？

我使用 Matlab R2013a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:57:49.133

看来这不是一个错误。实际上，您的结果来自您的数据。

我玩了一点你的代码

```
clear all
close all
warning off % the warning is about duplicate points, not important here

figure
hold on

p =[.3 .3
.4 .3
.3 .4
.7 .6
.6 .7
.7 .7]; % coordinates of the points for the triangles

px = 1/3;
py = 1/3;
lx = 1/3;
ly = 1/3; % size and position of the rectangle

% rearrange the polygon with clockwise-ordered vertices
[x1,y1]=poly2cw([px; px+lx; px+lx; px],[py; py; py+ly; py+ly]); % rectangle

patch(x1,y1, 1, 'EdgeColor', 'k');

for i=1:2

    pc = p(3*i-2:3*i,:); % current triangle
    % rearrange the polygon with clockwise-ordered vertices
    [x0,y0]=poly2cw(pc(:,1),pc(:,2)); % triangle

    [x2,y2] = polybool('intersection',x1,y1,x0,y0); % intersection
    [x3,y3] = polybool('subtraction',x0,y0,x2,y2); % subtraction

    % This is for R2013a
    %DT = delaunayTriangulation(x3,y3);
    %triplot(DT,'Marker','o');

    % This is for R2011b
    %DT = DelaunayTri(x3,y3);
    %triplot(DT,'Marker','o');

    % This is plain delaunay version
    DT = delaunay(x3,y3);
    triplot(DT,x3,y3,'Marker','o')

    % we break here to analyze the first triangulation
    break

end
XL = xlim; xlim(XL+[-1 +1]*diff(XL)/10);
YL = ylim; ylim(YL+[-1 +1]*diff(YL)/10);
axis equal;
box on;

% % % % % % % % % % % % % % % % % %
% Checking the triangulation
% % % % % % % % % % % % % % % % % %

% Wrong triangulation for i=2 is hard-coded
DT2     = [
    2 1 6
    6 5 2
    5 3 2
    5 4 3
    2 3 1 ];

figure;
hold all;
triplot(DT2,x3,y3,'Marker','o', 'Color','r', 'LineWidth',1)
axis equal;
axis tight;
box on;
XL = xlim; xlim(XL+[-1 +1]*diff(XL)*0.5);
YL = ylim; ylim(YL+[-1 +1]*diff(YL)*0.5);

% circumcircle: http://www.mathworks.com/matlabcentral/fileexchange/17300
ca = linspace(0,2*pi);
cx = cos(ca);
cy = sin(ca);

hl = [];
for k=1:size(DT2,1)
    tx  = x3(DT(k,:));
    ty  = y3(DT(k,:));
    [r,cn]=circumcircle([tx,ty]',0);
    if ~isempty(hl)
        %delete(hl);
    end
    fprintf('Circle %d: Center at (%.23f,%.23f); R=%.23f\n',k,cn,r);
    text( cn(1),cn(2), sprintf('c%d',k) );
    hl = plot( cx*r+cn(1), r*cy+cn(2), 'm-' );
    drawnow;
    %pause(3); %if you prefere to go slowly 
end 
```

这是我看到的输出：

> 圆圈1：中心在（0.28333333333333333000000,0.35000000000000003000000）；R=0.05270462766947306400000 圆2：中心在（0.34999999999999998000000,0.34999999999999998000000）；R=0.02357022603955168100000 圆3：中心在（0.28333333333333338000000,0.34999999999999992000000）；R=0.05270462766947289800000 圆 4：中心在 (0.35000000000000003000000,0.28333333333333355000000); R=0.05270462766947290500000 圆 5：中心在 (0.35000000000000003000000,0.28333333333333333000000); R=0.05270462766947312000000

和图：

![在此处输入图像描述](https://i.stack.imgur.com/zaF3B.png)

所以圈 1 和 3 以及圈 4 和 5 几乎相同。因此，您和我的结果之间的差异甚至可能来自舍入误差，因为相应的四个点在浮点数学精度内位于同一个圆上。你必须重新设计你的观点以获得不依赖于这些东西的可靠结果。

玩得开心;o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:25:19.830

好像您正在使用 MatLab R2013，因为在我的 R2011b 中没有`delaunayTriangulation`功能。为了能够运行您的代码，我稍微更改了它：

```
clear all
close all
warning off % the warning is about duplicate points, not important here

figure
hold on

p =[.3 .3
    .4 .3
    .3 .4
    .7 .6
    .6 .7
    .7 .7]; % coordinates of the points for the triangles

px = 1/3;
py = 1/3;
lx = 1/3;
ly = 1/3; % size and position of the rectangle

% rearrange the polygon with clockwise-ordered vertices
[x1,y1]=poly2cw([px; px+lx; px+lx; px],[py; py; py+ly; py+ly]); % rectangle

patch(x1,y1, 1, 'EdgeColor', 'k');

for i=1:2

    pc = p(3*i-2:3*i,:); % current triangle
    % rearrange the polygon with clockwise-ordered vertices
    [x0,y0]=poly2cw(pc(:,1),pc(:,2)); % triangle

    [x2,y2] = polybool('intersection',x1,y1,x0,y0); % intersection
    [x3,y3] = polybool('subtraction',x0,y0,x2,y2); % subtraction

    %DT = delaunayTriangulation(x3,y3);
    %triplot(DT)

    % This is triangulation of subtraction
    DT = delaunay(x3,y3);
    triplot(DT,x3,y3, 'Marker','.', 'Color','r')

    % This is triangulation of intersection
    DT = delaunay(x2,y2);
    triplot(DT,x2,y2, 'Marker','o', 'Color','b', 'LineWidth',1)

end
axis equal;
axis tight;
box on;

XL = xlim; xlim(XL+[-1 +1]*diff(XL)/10);
YL = ylim; ylim(YL+[-1 +1]*diff(YL)/10);

text(0.5,0.55,'triangulation of subtraction',  'HorizontalAlignment','center', 'VerticalAlignment','bottom', 'Color','r');
text(0.5,0.45,'triangulation of intersection', 'HorizontalAlignment','center', 'VerticalAlignment','top',    'Color','b'); 
```

这是我看到的结果

![在此处输入图像描述](https://i.stack.imgur.com/3fQXb.png)

和你的一样吗？你能否在你的问题中添加一张图片来描述你得到的结果有什么问题？

# javascript - IE 中的热点不正确

> ID：16203817
> 
> 赞同：0
> 
> 时间：2013-04-24T23:14:31.907
> 
> 标签：javascript, html, css, hyperlink

在起始页的投资组合图像周围绘制的热点在 IE 中错误地呈现，但在其他浏览器中没有。问题也只是这个热点，其他都还可以。

知道为什么吗？网站在这里：http: [//developer-web.com/](http://developed-web.com/)

**编辑：**修复它，检查我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:19:50.083

稍微移动坐标并重新保存。不知道是什么问题，但现在可以了。

# google-maps-api-3 - 是否可以在没有 JavaScript API 的情况下调用 getPanoramaByLocation？

> ID：16203818
> 
> 赞同：1
> 
> 时间：2013-04-24T23:14:47.153
> 
> 标签：google-maps-api-3

在使用 getPanoramaByLocation 向用户显示街景之前，我想对 getPanoramaByLocation 的结果进行一些服务器端查询。

有没有办法以另一种方式调用 getPanoramaByLocation ？（可能通过另一个 API、HTTP 请求或其他方式？）

我需要由它返回的 StreetViewPanoramaData 的内容，而不是实际的图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T23:40:56.410

HTTP 街景 API

[https://developers.google.com/maps/documentation/streetview/](https://developers.google.com/maps/documentation/streetview/)

通过简单的谷歌搜索找到它。

# javascript - 具有向下钻取功能的 Highcharts 堆叠列

> ID：16203825
> 
> 赞同：0
> 
> 时间：2013-04-24T23:15:50.257
> 
> 标签：javascript, highcharts

我有一个带有向下钻取的堆叠图表，但我设置的数据有“data，data2”，我可以改变它并执行类似的操作：http: [//jsfiddle.net/FWHGx/](http://jsfiddle.net/FWHGx/)

```
var data = [[
    {
        name:'Recomendación',
        y:28, 
        color: colors[0],
        drilldown: {
            name:['Recomendación','Area de Oportunidad','Observación'],
            type:'column',
            categories:['Geofísica','Geología','Petrofísica'],
            data:[[
                {name:'Txt 1',y:28, color: colors[0]},
                {name:'Txt 2',y:30, color: colors[0]}
            ]]
        }
    },
    {name:'Recomendación',y:30, color: colors[0]}
],
[
    {name:'Area de Oportunidad',y:3, color: colors[1]},
    {name:'Area de Oportunidad',y:5, color: colors[1]}
],
[
    {name:'Observación',y:1, color: colors[2]},
    {name:'Observación',y:2, color: colors[2]}
]]; 
```

而不是这个：http: [//jsfiddle.net/NULTY/410/](http://jsfiddle.net/NULTY/410/)

```
data = [{ 
    y: 55.11}
    }, {
        y: 21.63
    }],
data2 = [{
        y: 21.63
        }, { 
    y: 55.11
    }
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:18:09.677

打开控制台，并按照错误。如果您一一修复它们，您将获得正常工作的代码。例如，您缺少`chart`变量，或者缺少变量`color`（再次......）。

一些错误已修复，其余由您决定：http: [//jsfiddle.net/FWHGx/2/](http://jsfiddle.net/FWHGx/2/)

# jquery - 防止添加多个事件处理程序

> ID：16203826
> 
> 赞同：3
> 
> 时间：2013-04-24T23:15:53.033
> 
> 标签：jquery

我有一个文件输入

```
<input type=file class=file-input/> 
```

它最初在页面上有一个，可以通过单击页面上的“添加”按钮动态创建，在每次添加期间，我执行以下操作：

```
$(".file-input[type=file]").change(alert("hello")) 
```

假设我单击一次添加，我将在页面上输入两个文件。单击第一个文件输入时我会收到两个警报，而单击第二个文件输入时会收到一个警报，原因是我在第一个文件输入的 onChange 事件中添加了两次警报（“hello”），而在第二个文件输入中添加了一次。

有没有办法让每个文件只输入一次 alert("hello") ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:19:31.287

有几个选项。一种是使用带有 jquery [on](http://api.jquery.com/on/)的事件委托。这样，您在开始时将处理程序附加到一个共同的父级，然后在创建新的父级时不需要重新附加。像这样的东西：

```
$("<some common parent>").on("change", ".file-input[type=file]", function(){
    ...
}); 
```

`document`如果绝对必要的话，这里的共同父母可以是。理想情况下，这应该是所有文件输入通用的选择器。

另一种选择是在创建时简单地将事件附加到单个元素：

```
$("<input>")... stuff  
    .change(...) 
```

这样，您将只附加到那个元素而不是所有现有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:36:43.297

您必须在页面初始化时执行一次。

作为一种解决方法，使用 off() 来分离以前的处理程序：

```
$(".file-input[type=file]").off('change').on('change',function(){
alert("hello");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T23:19:29.033

您可以使用以下方法绑定单个事件以应用于当前或未来的*任何*`$.on()`匹配元素，而不是尝试重新绑定每个新创建的元素：

```
$(document).on("change", ".file-input[type=file]", function(event) {
    alert("hello");
}); 
```

您只需在页面加载时执行此操作一次。

# prolog - 序言中的新手：简单求解

> ID：16203835
> 
> 赞同：-1
> 
> 时间：2013-04-24T23:16:57.603
> 
> 标签：prolog

我是 prolog 的新手，我正在尝试解决这个问题：

它只是返回假！

我曾多次尝试更改代码的几个部分，正如我所说我是序言中的新手，因此我不知道如何准确调试..

```
livesIn(State):-
member(State,[california,georgia,delaware,iowa,kansas]).

sentGift(Gift):-
member(Gift,[rotisserie,salver,toaster,urn,vase]).

isHusband(Husband):-
member(Husband,[bill,doug,nick,tom,zack]).

solve(Z):-
Z=[[amber,Husband1,State1,Gift1],
   [emily,Husband2,State2,Gift2],
   [janet,Husband3,State3,Gift3],
   [maisie,Husband4,State4,Gift4],
   [patsy,Husband5,State5,Gift5]],

isHusband(Husband1), isHusband(Husband2), isHusband(Husband3), isHusband(Husband4), isHusband(Husband5),
Husband1 \== Husband2, Husband1 \== Husband3, Husband1 \== Husband4, Husband1 \== Husband5,
Husband2 \== Husband1, Husband2 \== Husband3, Husband2 \== Husband4, Husband2 \== Husband5,
Husband3 \== Husband1, Husband3 \== Husband2, Husband3 \== Husband4, Husband3 \== Husband5,
Husband4 \== Husband1, Husband4 \== Husband2, Husband4 \== Husband3, Husband4 \== Husband5,
Husband5 \== Husband1, Husband5 \== Husband2, Husband5 \== Husband3, Husband5 \== Husband4,

livesIn(State1), livesIn(State2), livesIn(State3), livesIn(State4), livesIn(State5),
State1 \== State2, State1 \== State3, State1 \== State4, State1 \== State5,
State2 \== State1, State2 \== State3, State2 \== State4, State2 \== State5,
State3 \== State1, State3 \== State2, State3 \== State4, State3 \== State5,
State4 \== State1, State4 \== State2, State4 \== State3, State4 \== State5,
State5 \== State1, State5 \== State2, State5 \== State3, State5 \== State4,

sentGift(Gift1), livesIn(Gift2), livesIn(Gift3), livesIn(Gift4), livesIn(Gift5),
Gift1 \== Gift2, Gift1 \== Gift3, Gift1 \== Gift4, Gift1 \== Gift5,
Gift2 \== Gift1, Gift2 \== Gift3, Gift2 \== Gift4, Gift2 \== Gift5,
Gift3 \== Gift1, Gift3 \== Gift2, Gift3 \== Gift4, Gift3 \== Gift5,
Gift4 \== Gift1, Gift4 \== Gift2, Gift4 \== Gift3, Gift4 \== Gift5,
Gift5 \== Gift1, Gift5 \== Gift2, Gift5 \== Gift3, Gift5 \== Gift4,

%Aunt Maisie's Husband is Uncle Nick
Husband4 = nick,

%Uncle Bill and Aunt Emily and their respective spouses sent the salver and the urn (in order)
Gift2 = salver,
member([_, bill, _, urn], Z),

%Aunt Amber and Uncle Doug live in Georgia
Husband1 = doug,
State1 = georgia,

%Aunt Patsy and her husband sent a toaster
Gift5 = toaster,

%The rotisserie came from the Delaware relatives
member([_, _, delaware, rotisserie], Z),

%Uncle Zack and his wife(don't live in Kansas) sent neither the salver nor the toaster
\+ member([_, zack, kansas, _], Z),
\+ member([_, zack, _, salver], Z),
\+ member([_, zack, _, toaster], Z),

%Aunt Janet and Uncle Bill live in California
Husband3 = bill,
State3 = california. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:59:07.460

## 让它工作

您的代码中有 2 个拼写错误会阻止它返回正确的结果。

**第一个错字**

> 比尔叔叔和艾米丽阿姨以及他们各自的配偶送来了托盘和骨灰盒（按顺序）

所以而不是：

```
Gift2 = salver,
member([_, bill, _, urn], Z), 
```

它应该是：

```
Gift2 = urn,                       % Aunt Emily sent the urn
member([_, bill, _, salver], Z),   % Uncle Bill sent the salver 
```

**第二个错字**

我不知道你怎么能弄出这个错字！为什么`livesIn`要礼物？

```
sentGift(Gift1), livesIn(Gift2), livesIn(Gift3), livesIn(Gift4), livesIn(Gift5),
Gift1 \== Gift2, Gift1 \== Gift3, Gift1 \== Gift4, Gift1 \== Gift5, 
```

应该：

```
sentGift(Gift1), sentGift(Gift2), sentGift(Gift3), sentGift(Gift4), sentGift(Gift5),
Gift1 \== Gift2, Gift1 \== Gift3, Gift1 \== Gift4, Gift1 \== Gift5, 
```

修正上述 2 个错别字后，代码将正常工作，但需要很长时间才能找到解决方案。

## 快一点

1.  通过,和谓词在,和变量的成员统一**之前**用一个原子（例如`Husband3 = bill`, `State1 = georgia`）排序直接统一。**`Gift``Husband``State``sentGift``isHusband``livesIn`**

     **实际上，您可以直接将它们插入`Z`. 与其手动声明所有这些不等式（例如`Gift1 \== Gift2, Gift1 \== Gift3, Gift1 \== Gift4, Gift1 \== Gift5`），不如编写一个谓词更简洁。** 
***   在第 1 部分中的直接统一之后，`member([_, bill, _, urn], Z)`但仍然在和变量的成员统一之前订购成员统一（例如）。`Gift``Husband``State`

    请注意，这不**包括**，`\+ member([_, zack, _, toaster], Z)`它断言成员资格统一**不能**成功。在 和 的成员统一之前`Gift`，`Husband`以及`State`将它们限制为一小组可能值的变量，可能会找到一个满足成员统一的统一，这会导致子句和整个谓词失败。** 

 **上面的 2 个技巧将减少搜索空间，从而减少找到解决方案所需的时间。下面是一些示例骨架代码，供您在阅读完上面的文本后填写。

```
% Aunt Maisie's Husband is Uncle Nick
Husband4 = nick,

%% TODO: Fill in the rest on your own ...

% Uncle Bill and Aunt Emily and their respective spouses sent the salver and the urn (in order)
Gift2 = urn,

member([_, bill, _, salver], Z),

% The rotisserie came from the Delaware relatives
member([_, _, delaware, rotisserie], Z),

sentGift(Gift1), sentGift(Gift2), sentGift(Gift3), sentGift(Gift4), sentGift(Gift5),
Gift1 \== Gift2, Gift1 \== Gift3, Gift1 \== Gift4, Gift1 \== Gift5,
Gift2 \== Gift1, Gift2 \== Gift3, Gift2 \== Gift4, Gift2 \== Gift5,

%% TODO: Fill in the rest on your own

% Uncle Zack and his wife(don't live in Kansas) sent neither the salver nor the toaster
\+ member([_, zack, kansas, _], Z),
\+ member([_, zack, _, salver], Z),
\+ member([_, zack, _, toaster], Z). 
```**

# android - 如何从导致程序崩溃的imageview中清除uri

> ID：16203836
> 
> 赞同：0
> 
> 时间：2013-04-24T23:17:00.243
> 
> 标签：android, arrays, imageview, uri

我如何能够从存储在图像视图中的先前 uri 源将内存从图像视图中刷新？到目前为止，这是我的代码：

```
ImageView a = (ImageView)findViewById(R.id.a);
ImageView b=(ImageView)findViewById(R.id.b);
ImageView c =(ImageView)findViewById(R.id.c);

 Uri topImage = Uri.parse(top);
 Uri bottomImage = Uri.parse(bottom);
 Uri fwImage = Uri.parse(fw);

 a.setImageURI(topImage);
 b.setImageURI(bottomImage);
 c.setImageURI(fwImage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:02:46.947

如果您在使用 imageViews 时遇到内存问题，请确保将正确大小的图像加载到您的 imageView 中。

如果您的 iamgeView 是 200*200 并且您的图像是 2000*2000，则需要对其进行下采样，而不是直接使用其 Uri 加载它。

检查此链接[http://developer.android.com/training/displaying-bitmaps/manage-memory.html](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:26:31.887

尝试回收和设置 null：

```
BitmapDrawable bd = (BitmapDrawable) iv.getDrawable();
bd.getBitmap().recycle();
iv.setImageDrawable(null); 
```

# python - 在pygame中随机放置图像

> ID：16203838
> 
> 赞同：0
> 
> 时间：2013-04-24T23:17:27.810
> 
> 标签：python, pygame

我正在制作一个非常基本的游戏来学习 pygame 并且我正在尝试制作它，以便鸭子（玩家）必须躲避岩石但我不能让岩石随机放置然后滚动到一边

这是我当前的代码：

```
import pygame
import os
import random

img_path = os.path.join('C:\Python27', 'player.png')
img_path2 = os.path.join('C:\Python27', 'rock.png')

class Bird(object):  
    def __init__(self):

        self.image = pygame.image.load(img_path)
        self.x = 0
        self.y = 0

def handle_keys(self):
    """ Handles Keys """
    key = pygame.key.get_pressed()
    dist = 3 
    if key[pygame.K_DOWN]: 
        self.y += dist
    elif key[pygame.K_UP]: 
        self.y -= dist 
    if key[pygame.K_RIGHT]: 
        self.x += dist
    elif key[pygame.K_LEFT]: 
        self.x -= dist 

    def draw(self, surface):

        surface.blit(self.image, (self.x, self.y))

    def background(self, surface):
        bg = os.path.join('C:\Python27', 'bg.png')
        self.image2 = pygame.image.load(bg)
        surface.blit(self.image2, (0,0))

class Rock(object): 
    def __init__(self):
        self.image = pygame.image.load(img_path2)

        self.x = 640
        self.y = 0
    def rock(self):
        dist = 2
        if running == True:
            self.x -=dist

    def rock_draw(self, surface):
        surface.blit(self.image, (self.x, self.y))

pygame.init()
screen = pygame.display.set_mode((640, 400))

bird = Bird() # create an instance
rock = Rock()
clock = pygame.time.Clock()

running = True
while running:

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit() 
            running = False

    bird.handle_keys() 
    rock.rock()

    screen.fill((255,255,255)) 
    bird.background(screen)
    bird.draw(screen)
    rock.rock_draw(screen)
    pygame.display.update() 

    clock.tick(40) 
```

我希望岩石从屏幕右侧开始并滚动，然后一旦第一个消失或一半消失，在不同的 y 位置产生另一个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:26:17.893

首先，您应该更改 Rock 构造函数以允许位置参数，并稍微修复您的 rock 函数：

```
class Rock(object): 
   def __init__(self, x=640, y=0, dist=2):
       self.image = pygame.image.load(img_path2)
       self.x = x
       self.y = y
       self.dist = dist

   def rock(self):
       # you don't need to check if running is true here, you're doing that in your loop
       self.x -= dist 
```

然后为岩石的 y 坐标找到一个随机 int 值，并在那里创建一个岩石：

```
import random

y = random.randint(0, 400)
rock = Rock(640, y) 
```

在你的循环中：

```
if rock.x < 0:
    y = random.randint(0, 400)
    rock = Rock(640, y)

rock.rock() 
```

这会检查石头是否击中了屏幕的左侧，如果有，它会创建一个新的石头。然后，无论哪种方式，它都会调用`rock()`那个 Rock 对象。

# c# - 如何从子窗体设置父窗体 WindowState 属性？

> ID：16203839
> 
> 赞同：2
> 
> 时间：2013-04-24T23:17:31.130
> 
> 标签：c#, winforms

我的 C# 应用程序有两种形式。主窗体将其*ControlBox*设置为 false，然后创建第二个窗体，如下所示：

```
this.ControlBox = false;
new Form2().Show(); 
```

第二种形式能够最小化和最大化。*当窗口最小化*或返回其*正常*状态时，我需要能够从子窗体设置主窗体*WindowState属性。*

 **我遇到的问题是当我尝试最小化子窗口时程序崩溃。

这是我的代码：

```
private void Form2_SizeChanged(object sender, EventArgs e)
{
    if(this.WindowState != FormWindowState.Maximized)
        this.Parent.WindowState = this.WindowState;
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:32:43.770

您的问题是`Form2` `Parent`属性为空，调用`Show()`方法实际上并没有设置`Parent`显示表单的属性（在调试器中检查它）。最简单的解决方法是通过（调用）的构造函数传递（调用）引用，然后`Form1`使用该引用来设置属性。像这样的东西：`Form``Form2``Form``WindowState`

```
public partial class Form2 : Form
{
    Form1 form1;
    public Form2(Form1 frm)
    {
        InitializeComponent();
        form1 = frm;
        this.SizeChanged +=Form2_SizeChanged;
    }

    private void Form2_SizeChanged(object sender, EventArgs e)
    {
        if (this.WindowState != FormWindowState.Maximized)
            form1.WindowState = this.WindowState;
    }
} 
```

而不是在 Form1 的代码中，您可以更改为：

```
this.ControlBox = false;
Form2 frm = new Form2(this);
frm.Show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T23:47:18.827

将表格 1 ( `this`) 传递给表格 2 中的公共财产，并在表格 2 上对其进行修改

```
Form2 f = new Form2();
f.f1 = this;
f.Show();
// or: new Form2 { f1 = this }.Show(); 
```

表格 2：

```
public Form1 f1;
[...]
[Event:]
f1.WindowState = FormWindowState.Minimized; 
```**

# c++ - BST remove() 函数的 Seg-Fault

> ID：16203841
> 
> 赞同：0
> 
> 时间：2013-04-24T23:17:37.370
> 
> 标签：c++, segmentation-fault, binary-search-tree

基本上，该程序由一个 BST 类组成，该类指向二叉树的第一个节点，并且节点也是它们自己的类。

BST 调用这个成员函数：

```
void remove(const T& x)
{
    removeNode(m_root, x);
    return;
} 
```

这是删除节点的递归部分，它一直运行到完成：

```
template <typename T>
void removeNode(TreeNode<T>* &p, const T& x)
{
    if(p == NULL)
        return;

    if(x < p -> m_data)
        removeNode(p -> m_left, x);
    else if(x > p -> m_data)
        removeNode(p -> m_right, x);

    else
    {
        TreeNode<T>* tmp = new TreeNode<T>;

        if(p -> m_left == NULL)
        {
            tmp = p -> m_right;
            delete p;
            p = tmp;
        }
        else if(p -> m_right == NULL)
        {
            tmp = p -> m_left;
            delete p;
            p = tmp;
        }
        else
        {
            tmp = p -> m_right;
            TreeNode<T>* tmp2 = new TreeNode<T>;

            while(tmp -> m_left != NULL)
            {
                tmp2 = tmp;
                tmp = tmp -> m_left;
            }

            p -> m_data = tmp -> m_data;

            if(tmp2 != NULL)
                removeNode(tmp2 -> m_left, tmp -> m_left -> m_data);
            else
                removeNode(p -> m_right, p -> m_right -> m_data);
        }
    }

    return;
} 
```

当 remove() 函数返回时，我出现了段错误，我想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-27T13:23:29.437

用户@WhozCraig 指出了您代码中最重要的错误：您分配了从未使用过的对象（也从未销毁！）：

```
TreeNode<T>* tmp = new TreeNode<T>;

TreeNode<T>* tmp2 = new TreeNode<T>; 
```

后一个赋值导致条件

```
if(tmp2 != NULL) 
```

始终满意，这**会**阻止您执行

```
else
    removeNode(p -> m_right, ...) 
```

分支。

**编辑**

假设您有一个三节点树，键为 2、5 和 7。让我们分别表示节点`node2`和。假设是一个树根。假设您还要删除密钥 5。 然后：`node5``node7``node5`

*   `*p == node5`;
*   前三个`if`不满足，控制权传递给`else`分支；
*   `tmp`被赋值`p->m_right`为`&node7`;
*   `tmp2`被分配了一个新的“空”对象——我们称之为`nodeEmpty`；
*   `node7`没有孩子，所以`tmp->m_left`是`NULL`，`while`循环被跳过，没有迭代；
*   分配指令`p->m_data = tmp->m_data`导致`node5`获得密钥 7；
*   因为`tmp2 == &nodeEmpty`那不是`NULL`，你打电话
    *   `removeNode(tmp2 -> m_left, tmp -> m_left -> m_data)`

这显然是要从(?!)的**不存在**的左子树中删除一些东西，**但是......** 但是在这一点上并且没有孩子，所以. 因此，访问会触发内存访问错误，并且进程在递归调用之前崩溃。`nodeEmpty` **`tmp == &node7``node7``tmp->m_left == NULL``tmp->m_left->m_data``removeNode`**

# c# - Monotouch 在不可为空的对象上崩溃并出现 NullReferenceException

> ID：16203847
> 
> 赞同：2
> 
> 时间：2013-04-24T23:17:52.903
> 
> 标签：c#, xamarin.ios, xamarin

这是崩溃日志（短）：

> 2013-04-24 19:56:24 +0000 Memotion 未处理的托管异常：对象引用未设置为
> Pipedream.UI.UIElement.set_Size（Vector2 值）[0x00000] 中的对象实例（System.NullReferenceException）：0
> 在 Pipedream.UI.StageLayer..ctor (Pipedream.ComponentID id) [0x00000] 在 :0
> 在 Pipedream.UI.Stage.CreateLayer (Pipedream.ComponentID id) [0x00000] 在 :0

实际上构造函数的代码是这样的：

```
internal StageLayer(ComponentID id)
    : base(id, ComponentLayer.System)
{
    base.Size = ApplicationBase.Instance.ScreenSize;
    ApplicationBase.Instance.PropertyChanged += HandlePropertyChanged;
} 
```

该属性如下所示：

```
public virtual Vector2 Size
{
    get
    {
        return _Size;
    }
    set
    {
        Vector2 old = _Size;
        if (SetData(SizeDeclaration, value, ref _Size, Invalidate))
        {
            CompareUpdate(WidthDeclaration, _Size.X, old.X);
            CompareUpdate(HeightDeclaration, _Size.Y, old.Y);
        }
    }
} 
```

好吧，这`Vector2`是一个结构，不能是`null`。此代码也可以在桌面上完美运行。我想不出这段代码应该崩溃的任何原因，但它也不会在 iOS 模拟器上，只在 iOS 设备上（我目前没有设备，所以我无法直接调试它）。

*我在调用此代码之前启动了一些任务，但它们使用自己的数据并且不能与当前数据冲突，即使那样也不应该有任何`NullReferenceException`.*

## 编辑

事实证明，`CompareUpdate`应该调用 -method 时会引发异常。无论如何，我认为非虚拟泛型方法不应该产生任何问题？

```
protected Boolean CompareUpdate<T>(DependencyProperty property, T newValue, T oldValue)
{
    if (!Object.Equals(newValue, oldValue))
    {
        ForceUpdate(property, newValue, oldValue);
        return true;
    }
    return false;
} 
```

## 编辑 2

在更多的测试用例之后，我发现这可能是一个真正的编译器问题。以下测试失败：

```
Log.Info(_Size.X.ToString()); // _Size is still a struct 
```

除了这个例外：

> System.NullReferenceException：对象引用未设置为
> System.Single.ToString () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Single.cs:260
> at Pipedream的对象实例.UI.UIElement.set_Size (Vector2 值) [0x00031] 在 C:\WORK\00_PROJECTS\16 Pipedream\00_FRAMEWORK\trunk\Pipedream\UI\UIElement.cs:332

如果我将原始代码更改为以下也没有错误：

```
Vector2 old = _Size;
if (SetData(SizeDeclaration, value, ref _Size, Invalidate))
{
    CompareUpdate(WidthDeclaration, 0f, 0f);
    CompareUpdate(HeightDeclaration, 0f, 0f);
} 
```

当我删除`SetData`-method 时也会发生此错误，因此这不是错误原因。我检查了 this 引用，所以堆栈似乎没问题，但是如果我尝试访问`_Size`s 变量`X`并尝试将其打印到控制台，则 NullReferenceException 再次发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T21:33:55.623

事实证明，这有一个架构差异错误。行`[StructLayout(LayoutKind.Sequential, Pack = 1)]`导致`Vector2`Vector2 未对齐，这在某些体系结构中是非法的。

暂时删除该行可以解决此问题。

# c++ - Cocos2d-x lua 绑定

> ID：16203849
> 
> 赞同：3
> 
> 时间：2013-04-24T23:17:55.793
> 
> 标签：c++, binding, lua, cocos2d-x

经过一些研究，我发现 Cocos2d-x lua 绑定在 C++ 之上，这对我来说很有意义，因为 Cocos2d-x 是 Cocos2d 的 c++ 版本。但是当我看到这个[Wiki](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Lua_Binding)时，似乎他们有一些关于将 c++ 和 java 绑定到 lua 的信息，但是当我点击链接时，它说是确定的。而这让我有点困惑，为什么Cocos2d-x lua还需要绑定C++呢？

[我在这里](http://www.rasterbar.com/products/luabind.html)查看了 Luabind ，它说“它（Luabind）能够将用 C++ 编写的函数和类暴露给 Lua。它还将提供在 lua 中定义类并让它们从其他 lua 类或C++ 类。” 而且我仍然没有放弃它，什么是有约束力的，它实际上有什么作用？

如果您知道任何好的资源或好的教程来教如何将 C++ 和 java 绑定到 Cocos2d-x lua，我将非常感谢您在这里分享。

提前感谢您的时间和答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:39:26.697

Cocos2d-X 使用 tolua(++) 作为其绑定机制，而不是 Luabind。不过原理还是一样的。这两个框架都为用户提供了指定 Lua 中可用的类/方法以及 Lua 应如何处理这些对象的方法。

这称为“绑定”，通常涉及为方法和类生成包装器代码，如果您要手动执行此操作，则维护起来很麻烦且容易出错。Lua 绑定框架以一些速度和效率换取易用性和正确性。

如果你想学习 tolua，我建议你从[tolua 文档](http://www.codenix.com/~tolua/)开始，以及查看 cocos2d-x 的 Lua 绑定示例。

# android - Android“通过USB验证应用程序”功能

> ID：16203850
> 
> 赞同：2
> 
> 时间：2013-04-24T23:17:58.453
> 
> 标签：android, android-4.2-jelly-bean

Android Jelly Bean 具有名为“通过 USB 验证应用程序”的新开发者功能。谁能告诉我它到底是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:19:57.160

**通过 USB 验证应用程序**- 允许您禁用通过 USB 侧载应用程序的应用程序检查，同时仍检查来自其他来源（如浏览器）的应用程序。这可以加快开发过程，同时保持启用安全功能。

参考：http:
[//developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

这意味着在安装过程中，如果应用程序中存在已知的恶意软件，则会针对 Google 的服务器验证代码。

更多内容请参阅 Computerworld 的博客，[了解 Android 4.2 强大的新安全系统](http://blogs.computerworld.com/android/21259/android-42-security)

# ruby-on-rails - Ruby on Rails 会鼓励违反 YAGNI 吗？

> ID：16203851
> 
> 赞同：2
> 
> 时间：2013-04-24T23:18:06.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails

我正在学习 Ruby 和 Rails，我计划通过 rspec 使用 TDD 编写我的第一个应用程序。但现在我发现我的原则与大多数 Rails 社区的运作方式之间存在一些摩擦。我看到的大多数示例和教程都在告诉我生成我的代码。我什至可以在一个命令中为我的对象生成脚手架以及 rspec 规范。虽然这真的很光滑，但感觉不太对劲。如果我生成了一堆我现在实际上不需要的属性和方法，那就违反了 YAGNI，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:47:38.063

如果你生成了很多你必须删除的东西，也许你只是使用了错误的生成器？

请注意，您应该使用脚手架来创建一个模型，该模型也将在控制器中具有操作。还有其他生成器，例如，如果您的模型根本不应该有相应的控制器，您想要`generate model`，不`generate scaffold`，或者如果表根本不需要您可以使用的模型`generate migration`，或者对于没有模型的控制器，`generate controller`并且很快。

所以假设你在正确的地方使用脚手架，也就是创建一个需要控制器的模型。脚手架实际生成

*   具有输入中属性的迁移 (YGNI)
*   测试文件 (YGNI)
*   crud 操作的控制器条目（可能是 YAGNI；您可以简单地删除文件不需要的方法。无论如何应该比自己键入整个文件更容易）
*   它在控制器中生成的操作的视图（同样，删除您不需要的操作）
*   一个 CSS 文件（如果您打算转移到生产环境，则必须始终删除或编辑该文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:25:42.363

脚手架可以成为快速原型制作的有用工具，但它实际上很少用于生产应用程序。此外，为 CRUD 资源搭建脚手架并不会产生很多“额外的东西”。但归根结底，这只是一种偏好和合适的东西。如果您可以生成一个脚手架并对其进行修改以适合您的应用程序，并且可以节省您的时间，那就去做吧。但是通常，一旦您进一步了解了框架的细微差别，您会发现自己创建文件会更容易。但总的来说，我并不认为脚手架过多地违反了 YAGNI。

# c++ - QSettings - 读取 INI 文件

> ID：16203853
> 
> 赞同：4
> 
> 时间：2013-04-24T23:18:36.080
> 
> 标签：c++, qt, ini, qsettings

我创建了一个 INI 文件，然后尝试读取它。没有编译错误，文件在那里，但我的 QStringList 中没有收到任何数据

```
QFile checkConfig(configPath);
    if(checkConfig.exists())
    {
        QSettings* settings = new QSettings(configPath, QSettings::IniFormat);
        settings->beginGroup("General");
        const QStringList childKeys = settings->childKeys();
        QStringList values;
        foreach (const QString &childKey, childKeys)
            values << settings->value(childKey).toString();
        settings->endGroup();
        QString test = configPath;
        int a;
    } 
```

这是我的 INI 文件

```
[General]
InterviewPath=C:/1234 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T20:41:22.620

问题源于未正确创建 INI。

```
QSettings settings(configPath, QSettings::IniFormat);
    settings.beginGroup("/General");
    settings.setValue("/InterviewPath", interviewPath);
    settings.endGroup(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T02:00:42.447

不要使用 settings->beginGroup("General");

```
 QCoreApplication a(argc, argv);
    QSettings* settings = new QSettings("d:/a.ini", QSettings::IniFormat);
  //  settings->beginGroup("General");
    const QStringList childKeys = settings->childKeys();
    QStringList values;
    foreach (const QString &childKey, childKeys)
        values << settings->value(childKey).toString();
   // settings->endGroup();
    qDebug()<<values; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T07:37:04.573

```
 QSettings* settings = new QSettings(configPath, QSettings::IniFormat);
   settings.sync(); // !!! 
```

如果您的第一次通话将在一些事件处理后运行 - 那么一切都会好起来的。但是，如果您想直接打开 .ini 文件并以相同的方法使用它 - 那么您应该强制同步。阅读 qt 文档以获取有关 sync() 的更多信息。

# php - 每天在多个数据库上自动运行 MySQL 脚本的最佳方法是什么？

> ID：16203859
> 
> 赞同：0
> 
> 时间：2013-04-24T23:19:05.987
> 
> 标签：php, python, mysql, sql, ruby

每晚使用脚本自动查询几十个 MySQL 数据库的最佳方法是什么？该脚本通常不返回任何结果，所以我最好让它通过电子邮件发送或通知我是否有任何返回。

我已经为此研究了 PHP、Ruby 和 Python，但对于如何最好地处理这个问题我有点难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:22:49.123

我相信能回答这个问题的只有你。您提供的所有 3 个示例都可以使用 cron 完成您需要做的事情来自动化工作。但是要使用的最佳脚本语言是您最容易使用的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:25:25.183

虽然实际脚本执行有很多选项，但最终它们都归结`cron`为@squiguy 所说的那样。Cron 是事实上的任务调度程序，允许您随时运行任何自动化任务。

只需将您的查询放在一个文件中，将其另存为 .sql 某处，然后将类似这样的内容添加到您的 cron (run `crontab -e`) 中，以便每晚 3:30 运行它：

```
30 3 * * * /usr/bin/mysql -u<user> -p<pass> <dbname> < /var/scripts/myscript.sql 
```

然后在 cron 中添加一行以通过电子邮件通知您：

```
MAILTO=mymail@address.com 
```

在 crons 中，始终使用所有文件和可执行文件的绝对路径。运行`which mysql`以找出 mysql 可执行文件的绝对路径。

或者，您也可以像这样运行 PHP 脚本，并使用它`ob_start`来捕获所有输出，然后`mail`通过电子邮件或任何其他语言（如 Ruby、C++、Python 或所有关心 LISP 或 COBOL 的人）的类似语言发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:24:13.420

如果可以使用存储过程，请使用事件： [http ://dev.mysql.com/doc/refman/5.5/en/events.html](http://dev.mysql.com/doc/refman/5.5/en/events.html)

否则，您可以使用 cron：http: [//quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)

如果您需要从 CLI 或 CGI 调用不起作用的 PHP 脚本，请使用 cron 调用文本浏览器 lynx 并将脚本的 URL 传递给它：http: [//linux.die.net/man/ 1/猞猁](http://linux.die.net/man/1/lynx)

# javascript - 是否可以将上下文菜单中的项目中继到自写功能？

> ID：16203862
> 
> 赞同：0
> 
> 时间：2013-04-24T23:19:30.830
> 
> 标签：javascript, contextmenu

是否可以在上下文菜单中获取项目的事件？

Chrome中输入框的撤消功能不好，我今天早些时候*[写过。](https://stackoverflow.com/questions/16195644/in-chrome-ctrl-z-does-not-work-properly-for-input-element-if-contents-changed-pr)*相反，我使用了由输入框的 keydown 事件触发的自定义撤消功能，并且我阻止了文档本身的 CTRL+Z keydown 事件（否则它会干扰）。

但是上下文菜单仍然存在旧的 Chrome 撤消。

我正在寻找这样的东西。它存在吗？

```
document.getElementById("input1").addEventListener('contextMenuUndoClicked', function(evt){customUndoFunction(evt, this);}, false);

function customUndoFunction(evt, caller)
{
    evt.preventDefault();    
    < undo stuff >
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:47:22.073

我不是 100% 确定您要做什么，是否只是为了防止浏览器内置上下文菜单并拥有自己的上下文菜单？如果是这样，那么可能是这样的？我认为您无法捕获在内置上下文菜单上单击的项目，除非在某些浏览器的扩展中。这段代码和撤消和重做在 Chromium 中工作，但对我来说在 FireFox 或 Opera 中不起作用。

```
#info {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 230px;
    height: auto;
    border-style: solid;
    border-radius: 5px;
    border-width: 1px;
    box-shadow: 10px 10px 5px #888888;
    padding: 20px;
    background-color: #F3F3F3;
}
.menu {
    position: fixed;
    width: 180px;
    height: auto;
    border-style: solid;
    border-radius: 5px;
    border-width: 1px;
    box-shadow: 10px 10px 5px #888888;
    background-color: #F3F3F3;
    visibility: hidden;
}
.menutitle {
    text-align: center;
    font-weight: bold;
    color: white;
    background-color: black;
}
.menuitem {
    text-indent: 10px;
}
.menuitem:hover {
    cursor: pointer;
    width: 100%;
    height: auto;
    background-color: blue;
}
.fadein, .fadeout {
    overflow: hidden;
    /* This container should not have padding, borders, etc. */
}
.fadein {
    visibility: visible;
    opacity: 1;
    -webkit-transition: opacity 2s linear;
    -moz-transition: opacity 2s linear;
    transition: opacity 2s linear;
}
.fadeout {
    visibility: hidden;
    opacity: 0;
    -webkit-transition: visibility 0s 2s, opacity 2s linear;
    -moz-transition: visibility 0s 2s, opacity 2s linear;
    transition: visibility 0s 2s, opacity 2s linear;
}
.fadein > div, .fadeout > div {
    /* Put any padding, border, min-height, etc. here. */
}
.fadeout > div {
    margin-top: -10000px;
    -webkit-transition: margin-top 0s 2s;
    -moz-transition: margin-top 0s 2s;
    transition: margin-top 0s 2s;
}

<div id="info">
    <div>Hold CTRL for original context menu</div>
</div>
<input id="input1" class="customContext customTextContext" type="text"></input>
<input id="input2" class="customContext customTextContext" type="datetime"></input>
<input id="input3" class="customContext customTextContext" type="number"></input>
<input id="input4" class="customContext customOtherContext" type="color"></input>

/*jslint sub: true, maxerr: 50, indent: 4, browser: true */
/*global */

(function () {
    "use strict";

    var customTextContexts = document.getElementsByClassName("customTextContext"),
        info = document.getElementById("info"),
        inputTextContextMenu,
        inputOtherContextMenu;

    function hideMenus() {
        var menus = document.getElementsByClassName("menu");

        Array.prototype.forEach.call(menus, function (menu) {
            menu.style.visibility = "hidden";
        });
    }

    function toggleMenu(element) {
        var menus = document.getElementsByClassName("menu");

        Array.prototype.forEach.call(menus, function (menu) {
            if (menu.style.visibility === "visible") {
                menu.style.visibility = "hidden";
            } else if (element === menu) {
                menu.style.visibility = "visible";
            }
        });
    }

    function fadeout(element) {
        if (element.className.indexOf("fadein") !== -1) {
            element.className = element.className.replace("fadein", "fadeout");
        } else if (element.className.indexOf("fadeout") === -1) {
            element.className += "  fadeout";
        }
    }

    setTimeout(function () {
        fadeout(info);
    }, 3000);

    function context(evt) {
        var position;

        if (evt.target.className.indexOf("customContext ") !== -1) {
            if (!evt.ctrlKey) {
                evt.preventDefault();
                position = evt.target.getBoundingClientRect();

                if (evt.target.className.indexOf("customTextContext") !== -1) {
                    inputTextContextMenu.style.top = position.bottom + "px";
                    inputTextContextMenu.style.left = position.left + "px";
                    toggleMenu(inputTextContextMenu);
                } else if (evt.target.className.indexOf("customOtherContext") !== -1) {
                    inputOtherContextMenu.style.top = position.bottom + "px";
                    inputOtherContextMenu.style.left = position.left + "px";
                    toggleMenu(inputOtherContextMenu);
                } else {
                    hideMenus();
                }
            } else {
                hideMenus();
            }
        } else {
            hideMenus();
        }
    }

    function undoStuff() {
        hideMenus();
        document.execCommand('undo', false, null);
    }

    function redoStuff() {
        hideMenus();
        document.execCommand('redo', false, null);
    }

    function backStuff() {
        hideMenus();
        window.history.back();
    }

    function forwardStuff() {
        hideMenus();
        window.history.forward();
    } 

    function reloadStuff() {
        window.location.reload();
    }

    function createInputTextContextMenu() {
        var menu = document.createElement("div"),
            rich = document.createElement("div"),
            title = document.createElement("div"),
            undo = document.createElement("div"),
            redo = document.createElement("div"),
            back = document.createElement("div"),
            forward = document.createElement("div"),
            reload = document.createElement("div"),
            line = document.createElement("hr");

        menu.id = "customTextContextMenu";
        menu.className = "menu";
        title.textContent = "Text context menu";
        title.className = "menutitle";
        undo.textContent = "Undo";
        undo.className = "menuitem";
        undo.addEventListener("click", undoStuff, false);
        redo.textContent = "Redo";
        redo.className = "menuitem";
        redo.addEventListener("click", redoStuff, false);
        back.textContent = "Back";
        back.className = "menuitem";
        back.addEventListener("click", backStuff, false);
        forward.textContent = "Forward";
        forward.className = "menuitem";
        forward.addEventListener("click", forwardStuff, false);
        reload.textContent = "Reload";
        reload.className = "menuitem";
        reload.addEventListener("click", reloadStuff, false);

        rich.appendChild(title);
        rich.appendChild(undo);
        rich.appendChild(redo);
        rich.appendChild(line);
        rich.appendChild(back);
        rich.appendChild(forward);
        rich.appendChild(reload);
        menu.appendChild(rich);

        return menu;
    }

    function createInputOtherContextMenu() {
        var menu = document.createElement("div"),
            rich = document.createElement("div"),
            title = document.createElement("div"),
            back = document.createElement("div"),
            forward = document.createElement("div"),
            reload = document.createElement("div");

        menu.id = "customOtherContextMenu";
        menu.className = "menu";
        title.textContent = "Other context menu";
        title.className = "menutitle";
        back.textContent = "Back";
        back.className = "menuitem";
        back.addEventListener("click", backStuff, false);
        forward.textContent = "Forward";
        forward.className = "menuitem";
        forward.addEventListener("click", forwardStuff, false);
        reload.textContent = "Reload";
        reload.className = "menuitem";
        reload.addEventListener("click", reloadStuff, false);

        rich.appendChild(title);
        rich.appendChild(back);
        rich.appendChild(forward);
        rich.appendChild(reload);
        menu.appendChild(rich);

        return menu;
    }

    inputTextContextMenu = createInputTextContextMenu();
    document.body.appendChild(inputTextContextMenu);
    inputOtherContextMenu = createInputOtherContextMenu();
    document.body.appendChild(inputOtherContextMenu);    

    // right clicked context menu
    document.addEventListener("contextmenu", context, false);

    // other click hide context
    document.addEventListener("click", function () {
        hideMenus();
    }, false);
}()); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/TJpLZ/)

# javascript - 显示：无在 jQuery 中不起作用

> ID：16203864
> 
> 赞同：1
> 
> 时间：2013-04-24T23:19:32.693
> 
> 标签：javascript, jquery

我想把屏幕变灰，然后当我点击屏幕上的任意位置时让它逐渐消失。

我在 jQuery 中有这段代码：

```
$('#clickme').on("click", function() 
{
    $('#screen').css(
    {
        'display': 'block',
        'width':$(document).width(),
        'height':$(document).height()
    });

    $('#screen').animate(
    {
        opacity: '0.7',
    }, 1000, function() 
    {
        // Animation complete.
    });
});

$("#screen").on("click", function() 
{
    $(this).animate(
    {
        'display': 'none',
        'opacity': '0'
    }, 1000, function() 
    {
        // Animation complete.
    });
}); 
```

它一次有效，但问题是 screen.on("click") 适用于不透明度，但不适用于显示。我不明白为什么。请帮忙 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:23:17.740

这是因为 display 不是数值，来自[http://api.jquery.com/animate/](http://api.jquery.com/animate/)：

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:24:22.497

从[API 文档](http://api.jquery.com/animate)：

> *“大多数非数字属性不能使用基本的 jQuery 功能进行动画处理”*

由于`display: none`不是数字属性，因此无法设置动画。相反，尝试将其隐藏为动画的回调：

```
 var screen = $(this); // save a variable for the closure in the callback   
 screen.animate({ 'opacity': 0 }, 1000, function() { screen.hide(); }); 
```

另请注意，我将 opacity 的值更改为数字，而不是具有数字值的字符串。这可能无关紧要，但这是一个好习惯 =)

[这是一个演示解决方案的 jsFiddle](http://jsfiddle.net/6TxtJ/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T23:26:25.573

动画仅适用于数字。`display`不带数字，所以你需要做的是

```
$("#screen").on("click", function() 
{
    $(this).animate( {
        'opacity': 0
    }, 1000, function()  {
         $(this).css('display','none');
    });
}); 
```

首先，将其设为 0% 不透明度，*然后*将其移除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T23:23:25.067

```
Animation does not work for display: rules. 
```

因为它没有数值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T23:25:28.587

Display 没有数值，因此不能在 jquery 动画中使用。

在回调函数中添加`$(this).hide();`动画完成时隐藏元素：

```
$("#screen").on("click", function() 
{
    $(this).animate(
    {
        'opacity': '0'
    }, 1000, function() 
    {
        // Animation complete.
        $(this).hide();
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T23:23:31.570

您的问题是 opacity 是一个数值，而 display 不是数字。

你应该看看做你想做的fadeOut：

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# css - 绝对/相对位置尝试强制滚动条到页面顶部

> ID：16203866
> 
> 赞同：0
> 
> 时间：2013-04-24T23:19:41.740
> 
> 标签：css

所以我一直在尝试掌握绝对定位和相对定位。关于这个主题有很多教程和问题，我已尽力理解它们。除了这一点，我大多都很好。我正在创建一个页面，其中有较小的缩略图图像，用户可以选择单击并展开图像。为此，我只使用了一个隐藏层，其中包含仅在用户单击图像时才会出现的较大图像。我已经让这部分工作得很好。我的问题是，如果我在页面上向下滚动并单击图像，滚动条会在显示隐藏的 div 之前跳转到页面顶部。我的印象是，它仅在您使用绝对定位（相对于窗口，而不是 div 锚点）时才这样做。它出现在我想要的位置，但它会跳到屏幕顶部。我环顾四周，找不到解决我确切问题的方法。提前致谢。

HTML/CSS 代码：

```
<a href="#" onclick="enlarge2()">
<img src="http://www.myadverket.com/images/smallemail.png" style="border: 2px solid  
#E0E0E0">
</a>
<div style="position: relative">
<div id="image2" style="position: absolute; top: 0px; right: 200px; width: 100%;  
height: 100%; vertical-align: middle; visibility: hidden">
....Content....
</div>
</div> 
```

Javascript：

```
function enlarge2() {
var image = document.getElementById("image2");
image.style.visibility = "visible";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:43:57.750

看到不同

```
<script>
    function test(){
        //onclick event stuff 
    }
</script>
<div style="height:3000px">a</div>
<a href="#" onclick="test(); return false;"> link1 <!-- will work as expected --> </a> 
<a href="#" onclick="test();">link2 <!--will scrollup --> </a>
<a id="cometome" href="#" onclick="test(); return false;"> link3 <!-- will not scroll --> </a>
<div style="height:3000px">b</div>
<a href="#cometome">scroll to link3!</a>
<a href="#">scroll to top!</a> 
```

# loops - AutoHotKey 击键中断循环

> ID：16203871
> 
> 赞同：7
> 
> 时间：2013-04-24T23:20:00.397
> 
> 标签：loops, autohotkey, break

使用 AutoHotKey，我有一个相当简单的循环脚本，我希望能够通过按键来打破它。我尝试了一些来自网站的不同代码，但似乎不起作用。

这是代码：

```
#g::
Loop 20
{
    MouseClick, left,  142,  542
    Sleep, 1000
    MouseClick, left,  138,  567
    Sleep, 1500
    MouseClick, left,  97,  538 
    Sleep, 1000
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-07T02:23:41.873

使用全局变量 (keepCycling) 并切换它以中断循环。全局变量应该在脚本的开头声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:03:41.770

添加全局变量可能是您的情况最简单的解决方案，因为您的循环需要一段时间才能完成。

```
global break_g = 0 

#b::
    break_g = 1 
return

#g::
break_g = 0
Loop 20
{
    MouseClick, left,  142,  542
    Sleep, 1000
    MouseClick, left,  138,  567
    Sleep, 1500
    MouseClick, left,  97,  538 
    Sleep, 1000
    if( break_g = 1)
    {
        return
    }
}
return ; also you were missing this return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:33:54.190

```
#g::  
Loop 20  
{  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    MouseClick, left,  142,  542  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    Sleep, 1000  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    MouseClick, left,  138,  567  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    Sleep, 1500  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    MouseClick, left,  97,  538  
    KeyWait,Ctrl,D T0  
        if Errorlevel = 0  
            break  
    Sleep, 1000  
}  

return 
```

使用上述方法可能会有所帮助，因为效果是即时的。通常，当您按住 Ctrl 一段时间时，您的循环会停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T15:19:15.660

切换全局变量是要走的路。您需要在脚本的开头声明它。

全局 keep_working = 1 ; 在脚本的开头将 break 设置为 off

乙::; 在keep_working = 0 返回时设置中断

G：： ; 将工作设置为 on 并启动循环 keep_working = 1
Loop, ; 循环直到 b 被按下（是循环，原始代码中的 20）{ MouseClick, left, 142, 542 Sleep, 1000 MouseClick, left, 138, 567 Sleep, 1500 MouseClick, left, 97, 538 Sleep, 1000 if( keep_working = 0 ） { 返回 ; 需要停止执行 } } return ; 在热键过程结束时需要此分隔符。

# opencv - Opencv，请告诉我如何修复我的代码

> ID：16203873
> 
> 赞同：-1
> 
> 时间：2013-04-24T23:20:07.693
> 
> 标签：opencv

我是初学者，正在学习如何编写过滤器。我一次又一次地尝试它，但还没有让它工作。谁能帮我找出我的代码有什么问题？

```
double alpha;
int beta; 

int main( int argc, char** argv )
{

    Mat image = imread("test.png",1 );
    Mat new_image = Mat::zeros( image.size(), image.type() );

    for( int y = 0; y < image.rows; y++ )
    { 
        for( int x = 0; x < image.cols; x++ )
        {
            for( int ll = -1; ll < 1; ll++ )
            {
                for(int mm=-1; mm<1; mm++)
                {
                    uchar ff1 = image.at<uchar>(x+ll,y+mm);
                    new_image.at<uchar>(x,y) +=ff1;
                }  
            }
        }
    }

    namedWindow("Original Image", 1);
    namedWindow("New Image", 1);

    imshow("Original Image", image);
    imshow("New Image", new_image);

    waitKey();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:13:06.260

您正在阅读图像，就好像它是彩色的（3 个通道）：

```
Mat image = imread("test.png",1 ); 
```

但是您将其视为灰度（1通道）：

```
uchar ff1 = image.at<uchar>(x+ll,y+mm); 
```

您可以使用以下方法将图像加载为灰度：

```
Mat image = imread("test.png",0 ); 
```

对于阅读此答案后您将遇到的所有其他问题，请使用**搜索框**，因为该主题已在此论坛中多次讨论。

# python - 在Python中将0和1的字符串转换为字节

> ID：16203874
> 
> 赞同：5
> 
> 时间：2013-04-24T23:20:10.353
> 
> 标签：python, string, binary, byte, bit

我有一个二进制整数的字符串表示，我需要具有确切位结构的字节来通过套接字发送。

例如，如果我有一个长度为 16 的字符串：`0000111100001010`那么我需要 2 个字节的相同位结构。在这种情况下，第一个字节应该有一个 int 值，`15`第二个字节应该是`10`. 它们是否可以以`ascii`格式打印并不重要。我如何得到它？

我尝试了以下方法，它以`0xf0xa`. 但这是 6 个字节而不是 2 个字节。

```
def getByte(s):
  if(len(s) != 8):
    return
  b = b'0'
  for c in s:
    b = (int(b) | int(c)) & 0x0000ff #This makes b an integer
    b = b << 1
  b = b >> 1 #because of 1 extra shift
  b = hex(b).encode('utf-8') #how else can I get back to byte from int?

  return(b) 
```

此方法采用长度为 8 的字符串，并打算给出相同内部位结构的字节，但失败了。（我需要类似于`strtol`in 的东西`C`。）

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T00:30:18.957

首先，如果您将位字符串作为文字值，只需将其设为 base-2 int 文字，而不是字符串文字：

```
value = 0b0000111100001010 
```

* * *

如果您有非文字位字符串，并且您需要做的就是将它们解析为整数，那么正如 martineau 在评论中所说，内置[`int`](http://docs.python.org/3/library/functions.html#int)构造函数就是您所需要的，正如 martineau 所说，因为它需要 a`base`作为可选的第二个参数：

```
value = int('0000111100001010', 2) 
```

* * *

[`bitarray`](https://pypi.python.org/pypi/bitarray/)如果您需要对位字符串做任何花哨的事情，您可能需要使用像or这样的第三方模块[`bitstring`](https://pypi.python.org/pypi/bitstring/)，它可以让您创建可以被视为 1 和 0 字符串、布尔序列、整数等的对象。 ：

```
value = bitstring.BitArray(bin='0000111100001010') 
```

* * *

一旦你有了一个整数，你可以用 将它打包成 2 个字节[`struct`](http://docs.python.org/3/library/struct.html)，正如 martineau 在评论中解释的那样：

```
my_bytes = struct.pack('!H', value) 
```

意思是“`!`网络端”。如果您想要 little-endian 或 native-endian（或 big-endian，这当然与 network-endian 相同，但可能是描述某些上下文的更有意义的方式），请参阅[Byte Order, Size, and Alignment](http://docs.python.org/3/library/struct.html#byte-order-size-and-alignment)。将`H`其打包为 C的方法`unsigned short`——即两个字节。

* * *

但是，如果您使用的是第三方模块，它可能会更简单一些。例如，如果您有`bitstring.BitArray`上一个示例中的一个：

```
my_bytes = value.tobytes() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T01:05:34.847

转换二进制字符串数据的一种简单方法是使用内置`int()`函数并告诉它该数字是以 2 为底的二进制而不是默认的以 10 为底的十进制格式：

```
int('0000111100001010', 2) 
```

这将返回一个整数值。要将其转换为字节字符串，您可以`pack()`在模式中使用该函数，`struct`并使用以下格式字符串将数据参数告诉它一个`short`（2 字节）无符号整数`'H'`：

```
struct.pack('!H', int('0000111100001010', 2)) 
```

由于您想通过网络套接字发送它，我还添加了一个`'!'`前缀，表示返回的字节应该是“网络”或大端字节序，而不是您计算机的本机格式（可能不同） .

请注意，该示例返回的字符串将为`'\x0f\n'`. 最后`'\n'`是因为字节值`0x0a`恰好是 ASCII 换行符，所以 Python 在显示`repr()`包含一个字符串的字符串时以这种方式表示它们（这是 Python 交互式控制台在每个表达式之后自动执行的操作）。

# asp.net-mvc-3 - 是否有一个方便的实用程序可以快速测试 POCO 以通过 EF 更新 DB 而无需编写 MVC 代码？

> ID：16203879
> 
> 赞同：0
> 
> 时间：2013-04-24T23:20:52.073
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, entity-framework-5

只是想知道是否有一种方便的工具可以使用 POCO 并允许人们通过 EF 将数据输入数据库而无需编写 MVC 代码。一些 EF 设计者有试图做到这一点的网格，但是当涉及到身份 ID 列时，一些设计者就会陷入困境。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:06:04.383

我想你想要的是[Linqpad](http://www.linqpad.net/)。在更高级的用法中，您可以包含来自程序集的命名空间并使用其中定义的 POCO。

# java - 获取 Map 的键数组

> ID：16203880
> 
> 赞同：10
> 
> 时间：2013-04-24T23:20:58.727
> 
> 标签：java, python, arrays, dictionary

我正在尝试以 Python 为基础学习 Java，所以请多多包涵。

我正在实现一种 Eratosthenes 筛法（我在 Python 中有一个；试图将其转换为 Java）：

```
def prevPrimes(n):
    """Generates a list of primes up to 'n'"""
    primes_dict = {i : True for i in range(3, n + 1, 2)}
    for i in primes_dict:
        if primes_dict[i]:
            num = i
        while (num * i <= n):
            primes_dict[num*i] = False
            num += 2
    primes_dict[2] = True
    return [num for num in primes_dict if primes_dict[num]] 
```

这是我将其转换为 Java 的尝试：

```
import java.util.*;
public class Sieve {
    public static void sieve(int n){
        System.out.println(n);
        Map primes = new HashMap();
        for(int x = 0; x < n+1; x++){
            primes.put(x, true);
        }
        Set primeKeys = primes.keySet();
        int[] keys = toArray(primeKeys);  // attempt to convert the set to an array
        System.out.println(primesKeys); // the conversion does not work
        for(int x: keys){
            System.out.println(x);
        }
        // still have more to add
        System.out.println(primes);
    }
} 
```

我得到的错误是它找不到方法`toArray(java.util.Set)`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-24T23:36:53.610

首先，使用泛型：

```
Map<Integer, Boolean> map = new HashMap<Integer, Boolean>();
Set<Integer> keys = map.keySet(); 
```

其次，要将集合转换为数组，您可以使用`toArray(T[] a)`：

```
Integer[] array = keys.toArray(new Integer[keys.size()]); 
```

如果你想要`int`而不是`Integer`，然后迭代每个元素：

```
int[] array = new int[keys.size()];
int index = 0;
for(Integer element : keys) array[index++] = element.intValue(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:25:02.810

使用`primeKeys.toArray()`而不是`toArray(primeKeys)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T23:28:06.387

`toArray()`是`Collection`该类的成员，因此只需放入`Collection.toArray(...)`并导入 java.util.Collection；

注意：`toArray()`返回一个`Object[]`，因此您必须将其转换为 Integer[] 并将其分配给 Integer[] 引用：

```
Integer[] array = (Integer[])Collection.toArray( someCollection ); 
```

由于自动装箱，整数现在大部分时间都像整数一样工作。

编辑：dan04 的解决方案非常酷，希望我能想到……无论如何，您仍然必须强制转换并分配给 Object[] 类型。

# c# - .Netapplication 日志记录

> ID：16203882
> 
> 赞同：0
> 
> 时间：2013-04-24T23:21:06.053
> 
> 标签：c#, logging

有没有办法在基于 .Net 的应用程序中动态设置开/关特定日志语句或特定类型的日志语句？例如，我的代码中有 100 条日志语句，当我的应用程序在正常模式下运行时，我希望它只记录 10 条消息。但是，在诊断模式下运行时，它必须记录所有 100 条消息。

谢谢你的时间！

西策

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:22:43.123

你可以看看 log4net 这是一个相当流行的日志框架： http: [//logging.apache.org/log4net/](http://logging.apache.org/log4net/)

# java - 用java设置字符的宽度

> ID：16203887
> 
> 赞同：-2
> 
> 时间：2013-04-24T23:21:29.233
> 
> 标签：java, width, character

我正在做一些事情，想知道是否有任何方法可以设置字符的宽度。

例如，假设您输入字符“i”。我想将“i”的宽度设置为某个值（如果可行，可以是 1、3、6 等英寸甚至像素）。设置 i 后，将设置其他字母（因此 A 可以是 i 乘以 3 的宽度，C 可以是 i 乘以 2 的宽度，等等）。用户只需要输入i的宽度；所有其他字符将根据 i 的宽度设置自己。

我想要的伪代码：

*   询问用户 i 的宽度
*   用户输入 2 英寸
*   i 的宽度等于 2
*   A 设置为 6 英寸，C 设置为 4 英寸，等等 --- 这将在代码中预设
*   用户输入消息
*   计算消息的宽度
*   程序输出消息的总计算宽度

这可能吗？我一直在尝试实现 charsWidth。我会让用户输入一条消息，消息进入一个数组，charsWidth 将测量数组宽度，然后最终输出宽度。逻辑是有道理的，但我很难以这种方式设置它。也许有一种更简单的方法来实现这一点？这可能是基于 GUI 的，但我不熟悉 GUI 代码，所以如果它是基于文本的，它会更容易。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:24:23.570

使用 a`HashMap`为每个字母分配一个相对于 i 的宽度。然后，当您收到消息时，遍历每个字母，并从`HashMap`.

例子：

```
Map<Character,Double> map = new HashMap<Character,Double>();
map.put('a', 3.0);
map.put('b', 2.1);
// ... and so on

String msg = ... // get the message
Double width = 0.0;

for (Character c : msg.toCharArray())
    width += map.get(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:31:29.880

一个非常简单的方法是使用 switch case 返回字母的倍数的方法。所以

```
public int multiple(char letter)
{
 switch(letter){
 case 'a': 
   return 2;
 case 'b':
   return 3;
...
...

}
} 
```

然后使用扫描仪读入字符串，遍历字符串并添加到运行计数中。

```
Scanner scan = new Scanner(System.in);
String message = scan.nextLine();
int width;
for(int i=0,i<message.length(),i++)
{
int+=multiple(message.charAt(i));
}
return width; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:34:43.820

首先编写一个函数，该函数将获取 i 和一个字母的宽度并返回该字母的宽度。

```
int getWidth(int width_i, char ch){
  //TODO: write the logic and return the width
  return 0
} 
```

在主函数中： 1\. 从用户获取 i 的宽度 2\. 获取每个字符的输入字符串调用 getWidth(..) 并添加到结果中。

```
int totalWidth(int width_i,String input){
  int sum=0;
  for(int i=0;i<input.length();i++){
    sum+=getWidth(width_i,input.charAt(i));
  }
  return sum;
} 
```

# .net - .NET 反射策略异常

> ID：16203890
> 
> 赞同：0
> 
> 时间：2013-04-24T23:21:44.623
> 
> 标签：.net, reflection, policy

我有一个奇怪的问题：我部署了一个使用反射的 .NET 2.0 应用程序，并且在调用 Assembly.LoadFile 后出现了策略异常。错误如下：

```
Could not load file or assembly 'xxx, Version=11.5.23.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. PolicyException thrown. (Exception from HRESULT: 0x80131416)    at System.Reflection.Assembly.nLoadFile(String path, Evidence evidence)   at System.Reflection.Assembly.LoadFile(String path) 
```

要加载的程序集位于调用程序集的子文件夹中。该应用程序在其他环境中运行良好，我从未遇到过这种问题。我想这个问题的发生是因为我从网上下载了包含程序集的 zip 和标记为不受信任的二进制文件，我不得不“取消阻止”每个文件。

目标电脑正在运行 W2008 R2。在同一台电脑上，我正在运行另一个软件，它以相同的方式使用反射并且工作正常。我试图重新安装应用程序，但我遇到了同样的问题。我找不到在 pc 中为 .NET 程序集设置默认信任级别的方法。

任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T18:04:17.583

当我将相同的组策略添加到同一个文件夹时，我遇到了这个问题。我执行以下步骤来解决此问题：

查看组权限列表：

```
CD C:\Windows\Microsoft.NET\Framework\v2.0.50727
Caspol -a -listgroups 
```

查找重复的组权限并通过运行删除重复的组权限：

```
Caspol -rg {Add here the group policy number} 
```

# wcf - 如何在 WCF 服务中指定 wsdl:message 名称

> ID：16203892
> 
> 赞同：1
> 
> 时间：2013-04-24T23:22:04.457
> 
> 标签：wcf

我已经构建了一个如下定义的 wcf 服务。生成的 wsdl 包含似乎基于消息协定类名称的消息名称和操作输入/输出名称，以及基于 web.config 绑定名称 + 定义的端口名称的绑定名称和服务端口名称服务合同。

如果我想要消息名称、操作输入/输出名称以及绑定和端口名称的特定值，我该如何指定？

```
[ServiceBehavior(
    /*Sets the wdl:service name*/ Name = "RCMR_AR000003UV01",
    Namespace = Constants.HL7v3Namespace)]
public class Service1 : IService1
{
    public MCCI_IN000002UV01_ResponseContract GetMessage(RCMR_IN000002UV01_RequestContract query)
    {
        return ...        
    }
}

[ServiceContract(
        /*Set wsdl targetNamespae*/ Namespace ="urn:hl7-org:v3",
        /*Set wsdl portType name*/  Name = "RCMR_AR000003UV01")] 
    public interface IService1
    {
        [OperationContract( 
            /*Set wsdl request action*/  Action = "urn:hl7-org:v3/RCMR_IN000002UV01.LE20090501",
            /*Set wsdl response action*/ ReplyAction = "urn:hl7-org:v3/MCCI_IN000002UV01.LE20090501",
            /*Set wsdl operation name*/ Name = "RCMR_IN000002UV01")]
        MCCI_IN000002UV01_ResponseContract GetMessage(RCMR_IN000002UV01_RequestContract query);
    }

[System.ServiceModel.MessageContract(IsWrapped = false, WrapperNamespace = "urn:hl7-org:v3")]
public class RCMR_IN000002UV01_RequestContract
{
    [MessageBodyMember(Name = "RCMR_IN000002UV01", Namespace = "urn:hl7-org:v3")]
    public RCMR_IN000002UV01 data { get; set; }
}

[System.ServiceModel.MessageContract(IsWrapped = false, WrapperNamespace = "urn:hl7-org:v3")]
public class MCCI_IN000002UV01_ResponseContract
{        
    [MessageBodyMember(Name = "MCCI_IN000002UV01", Namespace = "urn:hl7-org:v3")]
    public MCCI_IN000002UV01 data { get; set; }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/mHhzH.jpg)

# jquery - 响应式导航菜单 CSS 可能会替换 Jquery

> ID：16203894
> 
> 赞同：0
> 
> 时间：2013-04-24T23:22:08.483
> 
> 标签：jquery, html, css, menu, navigation

我正在尝试创建一个响应式导航菜单，该菜单会在窗口大小缩小时缩小。我已经让它在 jquery 和 css 中工作，但它在移动设备上很慢，我读到最好只用 CSS 编写代码，但我还没有找到解决方案。这是我目前拥有的 jquery、html 和 css。任何帮助表示赞赏

jQuery代码：

```
 $(function() {
    var menu        = $('#top_menu');
        menu        = $('nav ul');
        menuHeight  = menu.height();

    $(top_menu).click(function(e) {
        e.preventDefault();
        menu.slideToggle();
    });

    $(window).resize(function(){
        var w = $(window).width();
        if(w > 720 && menu.is(':hidden')) {
            menu.removeAttr('style');
        }
    });
}); 
```

HTML 代码：

```
 <nav>
            <ul>
                <li><a href="<?php bloginfo('url'); ?>/forum">Forums</a></li>
                <li><a href="<?php bloginfo('url'); ?>/aboutus">About Us</a></li>
                <li><a href="<?php bloginfo('url'); ?>/Portfolio">Portfolio</a></li>
            </ul>
            <a href="#" id="top_menu">Menu</a>
        </nav> 
```

CSS 代码：

```
 nav a#top_menu {
    display: block;
    background: url('../images/main_logo.png') no-repeat;
    background-position: 20px 17px;
    text-indent: -9999em;
    position: relative;
    width: 100%;
    border-bottom: 1px solid transparent;   
}

nav a#top_menu:hover {
    border-bottom: 1px solid #305f6d;
}

nav a#top_menu:after {
    content:"";
    background: url('../images/mini.png') no-repeat;
    width: 30px;
    height: 30px;
    display: inline-block;
    position: absolute;
    right: 15px;
    top: 15px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:15:36.380

如果您想使用纯 CSS 来实现这一点，那么您真的应该看看 Navigataur ( [https://coderwall.com/p/sujd_w](https://coderwall.com/p/sujd_w) )，它是一个纯 CSS 解决方案，而不是使用 jQuery。

设置如下：

1.  `<head>`在标签之间引用样式表，如下所示：

> ```
> <html>
> <head><link rel="stylesheet" type="text/css" href="navigataur.css"></head>
> <body>
> </body>
> </html> 
> ```

1.  如果您的 css 文件中已使用以下任何元素名称，请编辑您的 CSS 元素的名称

要开箱即用，您需要对标记进行以下调整（如果您使用不同的东西，可以在样式表中更改类）：

*   `<div>`具有类的外部`header`
*   ID 为的 input[type=checkbox]`toggle`和 label[for=toggle] 的类`toggle`在列表菜单上方。
*   具有类的列表菜单（ul 或 ol）`menu`

改变你的

1.  HTML 代码（可能的最简单示例）：

> ```
> <input type='checkbox' id='toggle'/> <label for='toggle'
> class='toggle'></label>
> <ul class="menu">
>     <li><a href="#">Google</a></li>
>     <li><a href="#">Facebook</a></li>
>     <li><a href="#">Youtube</a></li>
>     <li><a href="#">Twitter</a></li> 
> </ul> 
> ```

就是这样，你完成了！

这是 Navigataur 的演示：http: [//micjamking.github.com/Navigataur/](http://micjamking.github.com/Navigataur/)

# javascript - 粒子系统——烟囱烟气运动方向

> ID：16203897
> 
> 赞同：0
> 
> 时间：2013-04-24T23:22:20.703
> 
> 标签：javascript, css, particle-system

所以我一直在寻找和更改这个粒子系统上的代码一段时间了

[小提琴](http://jsfiddle.net/BMwnf/)

我尝试使用以下方法计算粒子运动：

```
'left' : canvas_width * Math.floor(Math.random() * 101) / 100,
'top' : canvas_height * Math.floor(Math.random() * 101) / 100, 
```

但到目前为止，只能让圆圈上下移动。

我想要做的是让圆圈（将在 CSS 中使用云图像）向上移动 - 向右移动，模拟从烟囱中冒出的烟雾。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:33:47.333

我相信这只是起始位置，你想改变它听起来的速度。它的电流随机上下左右。如果您只想正确，请尝试更多类似的方法：

```
'x-velocity' : getRandomInt(0, max_velocity*100) / 100, 
'y-velocity' : getRandomInt(-max_velocity*100, 0) / 100 } 
```

所以现在 x 速度只会是正的（右）而 y 的速度只会是负的（上）。

[http://jsfiddle.net/BMwnf/1/](http://jsfiddle.net/BMwnf/1/)

# moovweb - 如何重写302位置

> ID：16203899
> 
> 赞同：2
> 
> 时间：2013-04-24T23:22:41.943
> 
> 标签：moovweb

有一个 302 来自在本地代理站点，它会转到类似的东西`http://externalsite.com/foo?redirect=http%3A%2F%2Fwww.myproject.com`，然后执行 302 到`http://www.myproject.com`. 这是因为查询参数，所以我该如何重写呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:16:55.253

**解决方案** 所以看看这个我使用氚测试仪组成的例子：http: [//play.tritium.io/b3f66d045f25e6669c1587e5469f1475d4fec0b8](http://play.tritium.io/b3f66d045f25e6669c1587e5469f1475d4fec0b8)

我认为这会有所帮助。

**解释**

基本上，您可以打开`url()`范围，然后您可以访问函数来调整查询参数，例如`param()`哪个是参数“gettor”，然后`remove_param()`哪个会将其删除。

一旦你得到了你想要的 URL，你可以使用以下`export()`函数将 Location 标头设置为该 URL：

`export("Location", $new_url)`

# angularjs - 由 promise 更改的范围变量不会更新 dom

> ID：16203902
> 
> 赞同：0
> 
> 时间：2013-04-24T23:22:48.927
> 
> 标签：angularjs, q

我对 AngularJS 还很陌生，所以请耐心等待。我正在尝试实现一个画廊滑块类型的应用程序，但我需要在所有图像加载之前加载页面并执行一些操作，因为它们非常大并且可能有很多图像。我试图通过承诺来做到这一点，它可以正常工作并重新调整我的 json 对象，但是当范围变量更改时，我看不到页面上的更新。考虑以下示例：

我的指令：

```
 iconic.directive('slider', function () {
    return {
        restrict: 'E',
        templateUrl: 'Home/_Slider',
        controller: 'SliderController'
    }
}); 
```

...注意我在指令中指定了控制器。这有效并从下面的控制器呈现我的测试变量。

我的控制器：

```
iconic.controller('SliderController', function ($scope, ImageFactory) {

    ImageFactory.getSliderImages()
        .then(function (result) {
            $scope.photos = result;
        });

    $scope.testvalue = 'test'

}); 
```

并且是图像工厂：

```
iconic.factory('ImageFactory',function ($http, $timeout, $q) {
    return {
        getSliderImages: function () {
            var dfd = $q.defer();
            $timeout(function () {
                dfd.resolve([
                    { url: 'http://placehold.it/1920x480', caption: 'Fancy sports picture1' },
                    { url: 'http://placehold.it/1920x480', caption: 'Fancy sports picture2' },
                    { url: 'http://placehold.it/1920x480', caption: 'Fancy sports picture3' },
                    { url: 'http://placehold.it/1920x480', caption: 'Fancy sports picture4' }
                ])
            }, 2000);
            return dfd.promise;
        }
    }
}); 
```

稍后我将通过 $http get 获取数据，但我只是将这些数据放入她的测试中。

和模板：

```
<div id="contentslider">
<!-- CONTENT -->
<ul class="contentSlider_list">
    <li>
        <img src="http://placehold.it/1920x480" width="1920" height="480" alt="" />
    </li>
    <li  data-ng-repeat="photo in photos">
        <img data-ng-src="{{ photo.url }}" width="1920" height="480" alt="" />
    </li>
</ul> 
```

...请注意，添加第一个 li 只是为了查看它是否会呈现。

无论如何，当应用程序触发时，我会到达 $scope.photos = result 行，并且它有数据。但永远不要更新 dom。

# sql - psql org.postgresql.util.PSQLException：致命

> ID：16203903
> 
> 赞同：0
> 
> 时间：2013-04-24T23:22:59.067
> 
> 标签：sql, eclipse, web-applications, psql

我刚开始安装并运行 eclipse 来访问 psql 服务器。并运行 windows 7 32 位

我只是在 Eclipse 中设置了 Web 应用程序表单的基本表单。

在 content.xml 文件中我有..

```
<Context path="" debug="5" override="true" reloadable="true">
<Resource   name="jdbc/connection_pool"
            description="DB Connection Pool"
            driverClassName="org.postgresql.Driver"
            type="javax.sql.DataSource"
            auth="Container"
            url="jdbc:postgresql://localhost/students-database" 
            username="postgres"
            password="1234"
            defaultAutoCommit="false"
            maxActive="10"
            minIdle="0"
            maxIdle="5"
            maxWait="3000"
            removeAbandoned="true"
            removeAbandonedTimeout="60"
            logAbandoned="true"
            validationQuery="SELECT 1" /> 
```

和

在 DbConnectionPool.jave 我有..

```
public class DbConnectionPool {

// Registering Postgresql JDBC driver with the DriverManager
static {
    try {
        Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
}

/**
 * Returns a <code>java.sql.Connection</code> object.
 * 
 * @exception NamingException
 *                if the JDBC resource is not found
 * @exception SQLException
 *                if a connection can not be obtained
 * 
 * @return Connection to use
 */
public static Connection getConnection() throws NamingException,
        SQLException {

    // TODO: To be replaced with real connection pool after we have covered it in class

    return DriverManager.getConnection(
            "jdbc:postgresql://localhost/students-database?" +
            "user=postgres&password=1234");
} 
```

}

我没有在 psql 程序中插入任何数据，

我只是制作简单的jsp文件，当我编译运行jsp文件时

我收到错误

> org.postgresql.util.PSQLException：致命：用户“postgres”的密码验证失败

我不太确定为什么。

当我连接 psql 程序时，我可以看到 4 个 psql，我目前正在尝试使用 8.4 来构建 web-app

![在此处输入图像描述](https://i.stack.imgur.com/P5M9v.png)

我只是想知道为什么会这样。我只是按照指示搜索了错误的原因。

但不起作用。

有谁知道如何修理它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:47:17.060

我猜你在数据库上有一个密码，你需要向它提供其余的参数。另外，请确保该文件`context.xml`不是 content.xml。

# python - 如何在记录器格式化程序中输入变量？

> ID：16203908
> 
> 赞同：11
> 
> 时间：2013-04-24T23:23:30.750
> 
> 标签：python, logging

我目前有：

```
FORMAT = '%(asctime)s - %(levelname)s - %(message)s'
logging.basicConfig(format=FORMAT, datefmt='%d/%m/%Y %H:%M:%S', filename=LOGFILE, level=getattr(logging, options.loglevel.upper())) 
```

...效果很好，但是我正在尝试做：

```
FORMAT = '%(MYVAR)s %(asctime)s - %(levelname)s - %(message)s' 
```

即使`MYVAR`已定义，这也会引发 keyerrors。

有解决方法吗？`MYVAR`是一个常数，所以每次调用记录器时都必须传递它是一种耻辱。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T00:49:39.940

您可以使用[自定义过滤器](http://docs.python.org/2/howto/logging-cookbook.html#using-filters-to-impart-contextual-information)：

```
import logging

MYVAR = 'Jabberwocky'

class ContextFilter(logging.Filter):
    """
    This is a filter which injects contextual information into the log.
    """
    def filter(self, record):
        record.MYVAR = MYVAR
        return True

FORMAT = '%(MYVAR)s %(asctime)s - %(levelname)s - %(message)s'
logging.basicConfig(format=FORMAT, datefmt='%d/%m/%Y %H:%M:%S')

logger = logging.getLogger(__name__)
logger.addFilter(ContextFilter())

logger.warning("'Twas brillig, and the slithy toves") 
```

产量

```
Jabberwocky 24/04/2013 20:57:31 - WARNING - 'Twas brillig, and the slithy toves 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T06:42:18.527

如前所述，您可以使用 custom `Filter`，`unutbu`也可以使用`LoggerAdapter`：

```
import logging

logger = logging.LoggerAdapter(logging.getLogger(__name__), {'MYVAR': 'Jabberwocky'})

FORMAT = '%(MYVAR)s %(asctime)s - %(levelname)s - %(message)s'
logging.basicConfig(format=FORMAT, datefmt='%d/%m/%Y %H:%M:%S')

logger.warning("'Twas brillig, and the slithy toves") 
```

这使

Jabberwocky 25/04/2013 07:39:52 - 警告 - 'Twas brillig, and the slimy toves

或者，只需在每次调用时传递信息：

```
import logging

logger = logging.getLogger(__name__)

FORMAT = '%(MYVAR)s %(asctime)s - %(levelname)s - %(message)s'
logging.basicConfig(format=FORMAT, datefmt='%d/%m/%Y %H:%M:%S')

logger.warning("'Twas brillig, and the slithy toves", extra={'MYVAR': 'Jabberwocky'}) 
```

这给出了相同的结果。

由于 MYVAR 实际上是恒定的，因此该`LoggerAdapter`方法所需的代码比`Filter`您的情况下的方法少。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-30T21:29:25.243

Borrowing from a comment above, I found that the simplest way to do this when the variable is static for all log entries is to simply include it in the formatter itself:

`FORMAT = '{} %(asctime)s - %(levelname)s - %(message)s'.format(MYVAR)`

With this method, no custom class implementation is required, and you don't have to worry about methods which are not defined for the various classes (`LoggerAdapter` and `CustomAdapter`), such as `addHandler()`. Admittedly, this is probably less Pythonic but it worked as a quick solution for me.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:42:04.187

```
locals()
FORMAT = '%(MYVAR)s %(asctime)s - %(levelname)s - %(message)s' 
```

locals() 应该返回本地可用的所有变量的字典，然后返回错误。如果您在那里看不到它，那么它在本地不可用。这将证明它没有正确定义。我们需要更多代码来查看它是否定义不正确。或者，您可以尝试“globals()”来检查全局...。但您可能没有将“global MYVAR”放在输出 FORMAT 的定义中

# scala - Play 2.1 - bindFromRequest 不工作，返回空值

> ID：16203911
> 
> 赞同：0
> 
> 时间：2013-04-24T23:23:42.510
> 
> 标签：scala, jquery-mobile, playframework

当我尝试从请求中绑定表单时，返回的对象设置为初始值。表格会正确显示。

```
def event(id: Int) = Action {
  val event : Event = Event.event(id)
  Ok(views.html.eventForm(eventForm.fill(event)))}

def update() = Action { implicit request =>
  eventForm.bindFromRequest.fold(
    formWithErrors => BadRequest(views.html.eventForm(formWithErrors)),
    updatedEvent => {
      Event.update(updatedEvent)
      Redirect(routes.Events.all())
    }
  )} 
```

当我调试代码时，我发现请求中包含原始数据和列表中每个字段的新数据。但是，返回的内容包含来自调用`updatedEvent`的原始数据。`event`

我正在使用自定义字段构造函数，但我不知道这将如何导致此问题。

我看过很多关于 Git 的例子，但不确定哪里出了问题。

编辑：

这是绑定请求时来自另一个表单的调试数据：

绑定后的表单 = Map(password -> , email -> )

请求 = 地图（密码 -> 列表（，32131），电子邮件 -> 列表（，， some.email@yahoo.com））

所需的数据在请求中，但未正确绑定。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-29T00:52:51.417

问题不在于播放框架或 scala，而在于 jquery mobile。

[https://github.com/jquery/jquery-mobile/issues/5590](https://github.com/jquery/jquery-mobile/issues/5590)

问题已在最新的 jquery 移动版本中得到解决

# php - vbulletin 和 wordpress 之间的标题编码不兼容

> ID：16203913
> 
> 赞同：0
> 
> 时间：2013-04-24T23:24:03.190
> 
> 标签：php, wordpress, vbulletin

我正在创建一个包含 wordpress 的新 vbulletin 页面。

[http://www.turiver.com/noticias/](http://www.turiver.com/noticias/)

vb 字符集：charset=ISO-8859-1" wp 字符集：utf-8

有可能解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:34:55.957

有 php 函数 utf8_encode 和 utf8_decode 在 ISO-8859-1 和 UTF-8 之间进行转换。

# ios - RestKit 将包含 lat & lng 的数组映射到 CoreData

> ID：16203919
> 
> 赞同：0
> 
> 时间：2013-04-24T23:24:23.967
> 
> 标签：ios, core-data, restkit

我有数据从一个 RestAPI 传递过来，它有一个名为 location 的数组字段，其中包含一个 lat & lng。

我想知道将其存储在 CoreData 中的最佳方法是 CLLocation、原始 lat/lng 作为双精度值还是可转换的？除了如何存储它，我如何映射它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:36:11.853

不确定为什么将 lat/long 作为数组传递，这听起来不像是精心设计的 API。如果它是一个数组，那么最简单的做法是将其存储为可转换的，并在对象上提供一个自定义方法以返回一个`CLCoordinate2D`. 这样做的缺点是您将无法编写谓词来根据位置进行搜索。如果您想按位置搜索，您可能希望将原始纬度/经度值存储为双精度值，但听起来映射这可能很困难。

# php - 在第 71 行找不到类“JFactory”/httpdocs/libraries/joomla/session/storage/database.php

> ID：16203920
> 
> 赞同：0
> 
> 时间：2013-04-24T23:24:24.383
> 
> 标签：php, joomla, joomla2.5

将本地服务器迁移到远程后，出现上述错误。我已经用最新的 2.5.10 升级了 joomla，但仍然遇到同样的错误。请问我该如何解决这个问题？以下是第 71 行的代码

```
public function write($id, $data)
{
    // Get the database connection object and verify its connected.
    $db = JFactory::getDbo();//Line 71
    if (!$db->connected())
    {
        return false;
    }

    try
    {
        $query = $db->getQuery(true);
        $query->update($db->quoteName('#__session'))
        ->set($db->quoteName('data') . ' = ' . $db->quote($data))
        ->set($db->quoteName('time') . ' = ' . $db->quote((int) time()))
        ->where($db->quoteName('session_id') . ' = ' . $db->quote($id));

        // Try to update the session data in the database table.
        $db->setQuery($query);
        if (!$db->execute())
        {
            return false;
        }
        /* Since $db->execute did not throw an exception, so the query was successful.
        Either the data changed, or the data was identical.
        In either case we are done.
        */
        return true;
    }
    catch (Exception $e)
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:58:58.607

解决此问题的唯一方法是安装新的 joomla 并重新开始。我尝试升级，甚至下载了新的 2.5.10 升级文件，因为当时我的旧 joomla 是 2.5.9 仍然没有任何反应。

我所做的只是创建一个新数据库并重新安装 joomla。

# python - 在 python 中填充空矩阵时遇到问题

> ID：16203921
> 
> 赞同：0
> 
> 时间：2013-04-24T23:24:28.440
> 
> 标签：python

我有一个从包含 [key, character] 的记录生成的数组

我有一个函数可以创建一个空矩阵，其尺寸由数组的大小和数组的宽度决定。我需要使用第一个数组中的字符填充此列表。现在，当我编译它时，我只得到**None**。有什么方法可以完成这个不同的

```
def createArray(size):
    return [None] * size

def createMatrix(rows,cols):
    m = createArray(rows)
    for i in range(rows):
        m[i] = createArray(cols)
    return m

def fillMatrix(matrix, array):
    rows = len(matrix)
    cols = len(matrix[0])

    arrSpot = 0
    for r in range(0,rows,1):
        for c in range(0, cols, 1):
            matrix[r][c] = array[arrSpot][1]
            arrSpot += 1
    return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:28:12.163

我想你只是忘了给 fillMatrix 一个返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:43:30.827

一个相当简单的方法是在您进入列表时附加行。所以，像这样：

```
def create_matrix(rows, cols):
  matrix = []
  for i in range(rows):
    row = [0]*cols
    matrix.append(row)
  return matrix 
```

我通常会为此使用[numpy](http://www.numpy.org/)。如果你有 numpy，那么你可以这样做

```
import numpy as np
matrix = np.zeros((rows,cols)) 
```

（请注意， np.zeros 的输入是一个元组，而不是两个参数。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T09:20:00.547

```
dimension1 = int(input("Give the dimension of the row: "))
dimension2 = int(input("Give the dimension of the column: "))
matrix = [[0 for i in range(dimension1)] for j in range(dimension2)]
for y in range(dimension2):
    for x in range(dimension1):
        matrix[y][x] = int(input("next value starting from (0,0) to (0,1) to at 
        last(dimension1,dimension2) : ")) 
```

# c# - 流畅的 NHibernate NonUniqueObjectException

> ID：16203923
> 
> 赞同：2
> 
> 时间：2013-04-24T23:24:47.873
> 
> 标签：c#, nhibernate, fluent

我有一个父实体，其中包含一组子实体，几乎每次我访问该父实体时都需要从 Web 服务进行更新。我想我可以对集合执行 Clear()，然后添加从 Web 服务接收到的实体列表。当我收到的实体的 ID 与我刚刚清除的任何实体的 ID 不同时，它似乎工作正常，但如果任何 ID 相同，我会得到 NonUniqueObjectException。既然我正在清除它们，难道不应该在插入新实体之前将它们删除吗？如果 Id 相同，为什么重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:43:02.873

即使您的 ID 相同，但对象本身实际上并不相同。您可以通过执行您的对象来验证这一点。手表中的 GetHashCode()。

NHibernate 认为这是一个新的数据库对象并想要插入它。

您需要保留原始对象并将新值复制到其中。

您可以手动复制这些值，逐个属性 - 但我建议将此值设为动态，这样您就不需要为每种对象类型使用方法。

您可以使用反射编写自己的动态方法或使用第三方映射器...尝试 AutoMapper [https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

复制属性时要小心。如果您的 chil 对象还有其他已映射的子对象，您将再次遇到同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:41:24.693

清除方法后，保存父对象。所以它会从数据库和会话中删除孩子。然后添加孩子并再次保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:18:38.407

在使用 clear() 初始删除子对象后，我必须在重新插入新子对象（可能具有相同的 ID）之前执行 flush()。然后我做了一个保存，一切正常。

# db2 - 在 DB2 中使用其他活动声明游标会导致部署失败

> ID：16203925
> 
> 赞同：1
> 
> 时间：2013-04-24T23:24:57.917
> 
> 标签：db2, zos

在互联网上环顾四周之后，我不得不回到SO :)。

概括：

未注释 3 行时不会部署 DB2 存储过程，否则它工作得很好。任何猜测为什么？仅供参考，我对 DB2 比较陌生。

程序代码：

```
CREATE PROCEDURE TESTDB2.PROC_NAME_GOES_HERE(
    IN  P_ID INT ,
    IN  P_SEQ_NO_2 SMALLINT,
    IN  P_SEQ_NO DECIMAL(3,0))

    RESULT SETS 1
    LANGUAGE SQL
    NOT DETERMINISTIC
    CALLED ON NULL INPUT
    FENCED
    MODIFIES SQL DATA
    COLLID TESTDB2
    WLM ENVIRONMENT TDB2ENV
    ASUTIME LIMIT 5000000
    RUN OPTIONS 'NOTEST(NONE,*,*,*)' 
P1: BEGIN

    DECLARE V_SEQ_NO DECIMAL(3,0);
    DECLARE V_LVL INT;

    DECLARE GLOBAL TEMPORARY TABLE SESSION.SEQ_NO_TABLE
    (LVL INT NOT NULL, SEQ_NO DECIMAL(3,0) NOT NULL);

    SET V_LVL = 0;

    INSERT INTO SESSION.SEQ_NO_TABLE(LVL, SEQ_NO)
    VALUES(V_LVL, P_SEQ_NO);

    --**************************************************--
    --  If I uncomment following 3 lines, deployment fails --

    --DECLARE CUR_FFB CURSOR WITH RETURN FOR
    --SELECT * FROM SESSION.SEQ_NO_TABLE;
    --OPEN CUR_FFB;

END P1 
```

错误：

> 部署 TESTDB2.PROC_NAME_GOES_HERE(INTEGER, SMALLINT, DECIMAL(3, 0))
> 
> 跑步
> 
> TESTDB2.PROC_NAME_GOES_HERE - 开始部署。
> 
> 调用构建实用程序 SYSPROC.DSNTPSMP...
> 
> 转换 SQLPRINT 1 1DB2 SQL 预编译器版本 9 REL。1.0 页 1
> 
> 转换 SQLPRINT 2 0 指定选项：STDSQL(NO) NEWFUN(YES) HOST(SQL) ONEPASS MAR(1,80) CCSID(37)
> 
> 转换 SQLPRINT 3 DSNHDECP 加载自 - (SYS2.DB2T.DSNEXIT(DSNHDECP))
> 
> CONVERT SQLPRINT 4 0 使用的选项 - 指定或默认
> 
> 转换 SQLPRINT 5 APOST
> 
> 转换 SQLPRINT 6 APOSTSQL
> 
> 转换 SQLPRINT 7 附加（TSO）
> 
> 转换 SQLPRINT 8 CCSID(37)
> 
> 转换 SQLPRINT 9 NOPADNTSTR
> 
> 转换 SQLPRINT 10 连接 (2)
> 
> 转换 SQLPRINT 12 月 11 日(15)
> 
> 转换 SQLPRINT 12 标志 (I)
> 
> 转换 SQLPRINT 13 主机（SQL）
> 
> 转换 SQLPRINT 14 LINECOUNT(60)
> 
> 转换 SQLPRINT 15 MARGINS(1,80)
> 
> 转换 SQLPRINT 16 NEWFUN（是）
> 
> 转换 SQLPRINT 17 ONEPASS
> 
> 转换 SQLPRINT 18 选项
> 
> 转换 SQLPRINT 19 期间
> 
> 转换 SQLPRINT 20 NOSOURCE
> 
> 转换 SQLPRINT 21 STDSQL（否）
> 
> 转换 SQLPRINT 22 SQL(DB2)
> 
> 转换 SQLPRINT 23 NOXREF
> 
> 转换 SQLPRINT 24 1DB2 SQL 预编译器消息第 2 页
> 
> CONVERT SQLPRINT 25 0DSNH016I E DSNHPARS LINE 26 COL 10 "GLOBAL" 需要
> 
> 转换 SQLPRINT 26 DSNH104I E DSNHPARS LINE 26 COL 10 非法符号“CUR_FFB”。一些可能是合法的符号是：全球
> 
> 转换 SQLPRINT 27 1DB2 SQL 预编译器统计信息第 3 页
> 
> 转换 SQLPRINT 28 0SOURCE 统计信息
> 
> CONVERT SQLPRINT 29 读取的源行：32
> 
> 转换 SQLPRINT 30 符号数：14
> 
> 转换 SQLPRINT 31 符号表字节，不包括属性：1952
> 
> 转换 SQLPRINT 32 - 该程序有 2 条消息。
> 
> CONVERT SQLPRINT 33 有 0 条消息被标志选项抑制。
> 
> CONVERT SQLPRINT 34 272544 字节的存储已被预编译器使用。
> 
> 转换 SQLPRINT 35 返回代码为 8
> 
> CONVERT SQLTERM 1 DSNH016I E DSNHPARS LINE 26 COL 10 "GLOBAL" 需要
> 
> 转换 SQLTERM 2 DSNH104I E DSNHPARS LINE 26 COL 10 非法符号“CUR_FFB”。一些可能是合法的符号是：全球
> 
> 转换 SQLTERM 3 创建过程 TESTDB2.PROC_NAME_GOES_HERE(IN P_ID INT,IN P_SEQ_NO_2 SMALLINT,IN P_SEQ_NO DECIMAL(3,0))RESULT S
> 
> CONVERT SQLTERM 4 ETS 1 LANGUAGE SQL NOT DETERMINISTIC CALLED ON NULL Input Fenced 修改 SQL 数据冲突 TESTDB2 WLM 环境 TDB2ENV ASUTIME
> 
> CONVERT SQLTERM 5 LIMIT 5000000 RUN OPTIONS'NOTEST(NONE, *,* ,*)'P1 : BEGIN DECLARE V_SEQ_NO DECIMAL(3,0); 声明 V_LVL INT ; 宣布全球临时
> 
> CONVERT SQLTERM 6 Y TABLE SESSION.SEQ_NO_TABLE(LVL INT NOT NULL,SEQ_NO DECIMAL(3,0)NOT NULL); 设置 V_LVL = 0 ; 插入会话.SEQ_NO_TABLE(LVL,S
> 
> 转换 SQLTERM 7 EQ_NO)VALUES(V_LVL,P_SEQ_NO); 声明 CUR_FFB
> 
> 转换 SQLTERM 8
> 
> 转换 SQLTERM 9 源统计信息
> 
> CONVERT SQLTERM 10 SOURCE LINES READ: 32
> 
> 转换 SQLTERM 11 符号数：14
> 
> 转换 SQLTERM 12 符号表字节，不包括属性：1952
> 
> 转换 SQLTERM 13 此程序有 2 条消息。
> 
> 转换 SQLTERM 14 有 0 条消息被标志选项抑制。
> 
> CONVERT SQLTERM 15 272544 字节的存储被预编译器使用。
> 
> 转换 SQLTERM 16 返回代码为 8
> 
> DSNTPSMP CONSOLE 1 *** DB2 V9R1 SQL 过程处理器 DSNTPSMP 1.21 (PM09148 2010-03-23)
> 
> DSNTPSMP CONSOLE 2 语言转换警告和/或错误，rc=8
> 
> DSNTPSMP CONSOLE 3 PSM 预编译不成功，无法继续
> 
> DSNTPSMP 摘要 1 请求：ALTER_REBUILD 例程 TESTDB2.PROC_NAME_GOES_HERE 未完成。
> 
> 请求构建实用程序函数：ALTER_REBUILD
> 
> SYSPROC.DSNTPSMP - 返回 +8
> 
> TESTDB2.PROC_NAME_GOES_HERE - 部署失败。
> 
> TESTDB2.PROC_NAME_GOES_HERE - 回滚成功完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:07:02.700

所以最后它对我进行了轻微的修改，为以后可能遇到这种困惑的任何人添加了一个解决方案。

解决方案 -*在声明表之前声明游标。*

唯一让我感到困惑的是如何在一个甚至还不存在的对象上创建光标。

```
CREATE PROCEDURE TESTDB2.PROC_NAME_GOES_HERE(
IN  P_ID INT ,
IN  P_SEQ_NO_2 SMALLINT,
IN  P_SEQ_NO DECIMAL(3,0))

RESULT SETS 1
LANGUAGE SQL
NOT DETERMINISTIC
CALLED ON NULL INPUT
FENCED
MODIFIES SQL DATA
COLLID TESTDB2
WLM ENVIRONMENT TDB2ENV
ASUTIME LIMIT 5000000
RUN OPTIONS 'NOTEST(NONE,*,*,*)' 
P1: BEGIN

    DECLARE V_SEQ_NO DECIMAL(3,0);
    DECLARE V_LVL INT;

    DECLARE CUR_FFB CURSOR WITH RETURN FOR
    SELECT * FROM SESSION.SEQ_NO_TABLE;

    DECLARE GLOBAL TEMPORARY TABLE SESSION.SEQ_NO_TABLE
    (LVL INT NOT NULL, SEQ_NO DECIMAL(3,0) NOT NULL);

    SET V_LVL = 0;

    INSERT INTO SESSION.SEQ_NO_TABLE(LVL, SEQ_NO)
    VALUES(V_LVL, P_SEQ_NO);

    OPEN CUR_FFB;

END P1 
```

# javascript - 具有嵌套层次结构的 AngularJS ng-include

> ID：16203926
> 
> 赞同：2
> 
> 时间：2013-04-24T23:25:01.383
> 
> 标签：javascript, angularjs

我需要创建一个水平二叉树结构，这与`<ul />`我使用`ng-repeat`指令看到的典型嵌套不同。

如何使用 ng-include 并传递嵌套对象或以某种方式获取我需要的嵌套对象？

这是代码：

```
<div id="tree-container" ng-controller="CommentController">
    <ul class="root-tree" id="current-tree">
        <li class="root node">
            <div class="feed">
                <div class="comment">{{data.comment}}</div>
            </div> 
        </li>
        <li class="root-children">
            <ul class="tree" ng-include="'tree'"></ul>
        </li>
    </ul>
</div>

<script>
    app.controller("CommentController", ["$scope", function ($scope) {
        $scope.data = {
            comments: "blah",
            leftChildren: {
                comments: ["blah", "blah", "blah"],
                leftChildren: { comments: ["blah", "blah", "blah"] },
                rightChildren: { comments: ["blah", "blah", "blah"] }
            },
            rightChildren: { comments: ["blah", "blah", "blah"] }
        };
    )]);
</script>

<script type="text/ng-template" id="tree">
    <li class="node">
        <div class="feed">
            <div class="comment" ng-repeat="comment in data.leftChildren">{{comment.comment}}</div>
        </div>
    </li>
    <li class="node">
        <div class="feed">
            <div class="comment" ng-repeat="comment in data.rightChildren">{{comment.comment}}</div>
        </div> 
    </li>
    <li class="left-children">
        <ul class="tree" ng-include="'tree'"></ul>
    </li>
    <li class="right-children">
        <ul class="tree" ng-include="'tree'"></ul>
    </li>
</script> 
```

您可以在`#tree`模板中看到我有 2 个`ng-include`指令。我希望`$scope`for each 嵌套`ng-include`在 上使用层次结构中的下一个级别`$scope.data`，这将是`leftChildren`and `rightChildren`。

换句话说，我基本上希望`ng-repeat`在`$scope`.

希望这一切都有意义:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T02:31:53.853

这让我在了解情况之前稍微思考了一下。该问题与 ng-include 和范围有关。如何将不同的范围“发送”到每个包括。我无法让它与 onload、ng-init、ng-model 等一起工作......所以我想到了 ng-repeat 它创建了一个新的子范围，这正是我们在这里寻找的。

我在这里创建了一个[Plunker](http://plnkr.co/edit/tEEWfgEfE5yC0ITYoKig?p=preview)演示。我不得不重新设计你的数据构建方式，所以我希望你能应用这些修改。诀窍是为左右孩子创建一个数组，并使用 ng-repeat 创建一个子范围。现在，您甚至可以拥有超过 2 个分支机构。您还可以添加一个类型属性，以便您知道哪个是左或右等。

结果（[图片链接](https://i.imgur.com/REOw5sc.png)）：

![结果](https://i.stack.imgur.com/6wNNP.png)

**JS**（返工数据）

```
$scope.data = {
  text: "blah",
  comments: [
    {
      text: ["blahL11", "blahL12", "blahL13"],
      comments: [
        { 
          text: ["blahL111", "blahL112", "blahL113"] 
        },
        { 
          text: ["blahR111", "blahR112", "blahR113"] 
        }
      ]
    },
    {
      text: ["blahR11", "blahR12", "blahR13"] 
    }
  ]
}; 
```

**HTML**（根）

```
<ul>
  <li>{{data.text}}</li>
  <li ng-repeat="item in data.comments" ng-include="'tree.html'"></li>
</ul> 
```

**模板**（儿童）

```
<div>Child</div>
<ul>
  <li ng-repeat="text in item.text">{{text}}</li>
  <li ng-repeat="item in item.comments" ng-include="'tree.html'"></li>
</ul> 
```

# c# - 如何获取属性网格以允许编辑对象以进行多选

> ID：16203927
> 
> 赞同：5
> 
> 时间：2013-04-24T23:25:01.943
> 
> 标签：c#, .net, winforms

使用属性网格时，我怎样才能让它允许我一次为多个对象设置一个属性（当有第二级时）。如果两个属性具有相同的值，一切似乎都可以正常工作，但如果属性不相等，则 propertygrid 不会加载子属性（从箭头向右），因此无法设置它们。我创建了以下示例，对于代码的长度感到抱歉。

```
 public partial class Form1 : Form
{
    public Form1()
    {
        this.Size = new Size(275, 568);
        PropertyGrid grid = new PropertyGrid();
        grid.Dock = DockStyle.Fill;
        this.Controls.Add(grid);

        Control c1 = new Control();
        c1.Border.Bottom.Color = Color.Red;
        Control c2 = new Control();
        c2.Border.Bottom.Color = Color.Red;
        Control c3 = new Control();
        c3.Border.Bottom.Color = Color.Purple;

        //This works as expected
        //grid.SelectedObject = c1;

        //This works as expected
        //grid.SelectedObjects = new object[] { c1, c2 };

        //This does not work
        grid.SelectedObjects = new object[] { c1, c3 };

    }
}

class Control
{
    public Control()
    {
        Border = new Border();
        Text = "Text";
    }

    public string Text { get; set; }
    [TypeConverter(typeof(BorderConverter))]
    public Border Border { get; set; }
}

class Border
{
    public Border()
    {
        Top = new Line();
        Bottom = new Line();
        Right = new Line();
        Left = new Line();
    }
    [TypeConverter(typeof(LineConverter))]
    public Line Top { get; set; }
    [TypeConverter(typeof(LineConverter))]
    public Line Left { get; set; }
    [TypeConverter(typeof(LineConverter))]
    public Line Bottom { get; set; }
    [TypeConverter(typeof(LineConverter))]
    public Line Right { get; set; }

    public override bool Equals(object obj)
    {
        if ((obj as Border) == null)
            return false;
        Border b = (Border)obj;
        return b.Left.Equals(Left) &&
            b.Right.Equals(Right) && b.Top.Equals(Top)
            && b.Bottom.Equals(Bottom);
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
}

public class BorderConverter
: TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return base.CanConvertFrom(context, sourceType);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return ((destinationType == typeof(InstanceDescriptor)) || base.CanConvertTo(context, destinationType));
    }

    public override PropertyDescriptorCollection GetProperties(ITypeDescriptorContext context, object value, Attribute[] attributes)
    {
        return attributes == null ? TypeDescriptor.GetProperties(value) : TypeDescriptor.GetProperties(value, attributes);
    }

    public override bool GetPropertiesSupported(ITypeDescriptorContext context)
    {

        return true;
    }
}

class Line
{
    public Line()
    {
        Color = Color.Black;
        Wieght = 0;
    }
    public Color Color { get; set; }
    public int Wieght { get; set; }

    public override bool Equals(object obj)
    {
        if ((obj as Line) == null)
            return false;
        Line l = (Line)obj;
        return l.Color == Color && l.Wieght == Wieght;
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
}

public class LineConverter
: TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return base.CanConvertFrom(context, sourceType);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return ((destinationType == typeof(InstanceDescriptor)) || base.CanConvertTo(context, destinationType));
    }

    public override object CreateInstance(ITypeDescriptorContext context, IDictionary propertyValues)
    {
        if (propertyValues == null) throw new ArgumentNullException("propertyValues");
        try
        {
            Line bs = new Line();
            bs.Color = (Color)propertyValues["Color"];
            bs.Wieght = (int)propertyValues["Wieght"];
            return bs;
        }
        catch (Exception ex) { throw new Exception("Invalid Property value.", ex); }
    }

    public override bool GetCreateInstanceSupported(ITypeDescriptorContext context)
    {
        return true;
    }

    public override PropertyDescriptorCollection GetProperties(ITypeDescriptorContext context, object value, Attribute[] attributes)
    {
        return attributes == null ? TypeDescriptor.GetProperties(value) : TypeDescriptor.GetProperties(value, attributes);
    }

    public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
    {
        return base.GetStandardValuesSupported(context);
    }

    public override bool GetPropertiesSupported(ITypeDescriptorContext context)
    {

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T20:10:19.113

我设法通过从 中删除`GetCreateInstanceSupported`方法来使其工作`LineConverter`，但我不确切知道您的问题的主要原因是什么，因为我没有广泛的知识如何`PropertyGrid`使用`TypeDescriptor`基础设施。

# regex - 如何在 Require 指令中使用 LocationMatch 通配符？

> ID：16203941
> 
> 赞同：0
> 
> 时间：2013-04-24T23:26:30.340
> 
> 标签：regex, apache, authentication

我正在通过 HTTP 提供 Git，并希望使用 Active Directory 组锁定对每个存储库的访问。当前相关配置如下：

这是 Apache 配置中的顶级指令：

```
<LocationMatch "^/git/.*$">
    Order allow,deny
    Allow from all

    AuthLDAPBindDN "someaccount@domain.local"
    AuthLDAPBindPassword "somepassword"
    AuthType Basic
    AuthBasicProvider ldap
    AuthLDAPURL "ldap://dc.domain.local:3268/DC=domain,DC=local?sAMAccountName?sub?(objectClass=*)" NONE
    Require ldap-group cn=Domain Users,cn=Users,dc=domain,dc=local
</LocationMatch> 
```

然后我对每个存储库分别有这样的东西：

```
<Location /git/somerepo.git>
  <Limit GET PUT POST DELETE PROPPATCH MKCOL COPY MOVE LOCK UNLOCK>
    Require ldap-filter memberof:1.2.840.113556.1.4.1941:=CN=somerepo,OU=Git,DC=domain,DC=local
  </Limit>
</Location> 
```

这可行，但每当添加/删除存储库时都需要更改配置。有没有办法提取与 in 匹配的值`.*`，`LocationMatch`以便我们可以将其插入`require ldap-filter`指令中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:50:47.340

看起来这是不可能的，因为`LocationMatch`不支持反向引用。

来源：[https ://serverfault.com/a/423913/28470](https://serverfault.com/a/423913/28470)

# c - 理解指向结构的指针

> ID：16203944
> 
> 赞同：1
> 
> 时间：2013-04-24T23:26:46.593
> 
> 标签：c

我正在制作指向结构的指针结构。我一直像疯子一样在谷歌上搜索，我不明白为什么下面的 printf 语句给出了不同的内存地址。有人可以向我解释一下吗？

```
struct board_piece {
   board_piece* next;
   board_piece* prev;
} board_piece;

main (int argc, char *argv []) {

  board_piece *newPiece = malloc (sizeof (board_piece));
  board_piece *newPiece2 = malloc (sizeof (board_piece));
  newPiece->next = newPiece2;
  printf("%x, %x",  newPiece->next, newPiece2); //Why aren't these the same address?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:29:38.467

尝试使用`%p`作为您的格式说明符。您可能处于指针和整数大小不同的平台上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T23:39:59.873

首先，由于一些错误，您的代码无法编译。您需要先声明您的类型，然后才能在结构中使用它；并且您声明了一个全局变量 ，`board_piece`而不是类型，因为您没有使用`typedef`. 您确定您正在运行的代码实际上是您认为的代码吗？

其次，正如 Ben Jackson 指出的那样，您应该使用`%p`指针，因为指针可以比整数更宽。如果你使用`%x`which 表示一个整数，并传入一个指针，`printf()`可能会在错误的位置查找值。

以下对我有用，为两个指针打印出相同的值：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct board_piece board_piece;

struct board_piece {
   board_piece* next;
   board_piece* prev;
};

int main () {

  board_piece *newPiece = malloc (sizeof (board_piece));
  board_piece *newPiece2 = malloc (sizeof (board_piece));
  newPiece->next = newPiece2;
  printf("%p, %p",  newPiece->next, newPiece2); //Why aren't these the same address?

  return 0;
} 
```

我建议编译时启用警告，并将其视为错误。如果你使用的是 GCC 或 Clang，我一般推荐`-Wall -Wextra -Werror`; MSVC 可能有一组等效的选项。请注意，这样做时，您需要修复更多警告，例如未声明返回类型`main`和未使用的参数。我已经在上面修复了这些问题，所以它编译时没有警告。

# javascript - Bootstrap 可编辑显示可编辑加载

> ID：16203948
> 
> 赞同：1
> 
> 时间：2013-04-24T23:27:08.760
> 
> 标签：javascript, jquery, twitter-bootstrap

当我尝试加载我的可编辑字段时，我得到了这个奇怪的 div。

我无法在不更改可编辑源代码的情况下找到如何禁用它的地方。

有谁知道我为什么会这样？

这就是它的样子。

![在此处输入图像描述](https://i.stack.imgur.com/aNZWF.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T14:13:28.597

问题是您使用的是旧版本的 Bootstrap Editable。现在它被称为 X-Editable，你可以在这里找到它[http://vitalets.github.io/x-editable/](http://vitalets.github.io/x-editable/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:27:04.013

如果以后有人遇到这个问题，我查看了源代码，我只需要添加：

loading : '' 在 {} 标签之间

# c# - C#继承和数组

> ID：16203950
> 
> 赞同：-2
> 
> 时间：2013-04-24T23:27:10.350
> 
> 标签：c#

我真的希望你们能够帮助我我正在尝试制作一个关于继承和数组的程序 Amma 正好是我尝试过的问题，但我无法正确显示......

使用实例变量（packageId、weight、costperounce、senderName、senderaddress、city、recipientName、recipient city、recipient parish）创建一个名为 package 的基类。这就是我应该做的

使用继承层次结构创建一个显示收件人和发件人地址信息的应用程序。并计算几个包裹的运输成本（重量*每盎司成本）。应用程序应包含一个类 TwoDayPackage 和隔夜包的包对象数组。TwoDayPackage 的运输费包括在基本计算中增加的 500.00 美元的统一费率，而 OverNightPackage 包括在每盎司成本乘以包裹重量的基础上增加的 1500.00 美元的统一费率。循环遍历数组以多态地处理包。

对于每个包裹，使用属性来获取发件人和收件人的地址信息，然后打印这两个地址，因为他们也会在邮寄标签上备用。所有每个包裹的成本方法并打印结果。跟踪数组中所有包裹的总运输成本，并在循环终止时显示总成本

请帮助我，我已经用了将近一个星期了，我们将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T00:16:19.833

也许这会有所帮助，我今天感到很慷慨。

您的作业可能试图迫使您学习的一些事情以及将通过其中一些主题的一些链接

1.  [覆盖与新](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.110%29.aspx)
2.  [多态性](http://msdn.microsoft.com/en-us/library/ms173152.aspx)
3.  [遗产](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.110%29.aspx)
4.  [数组与列表](https://stackoverflow.com/questions/434761/array-versus-listt-when-to-use-which)
5.  [数组调整大小](http://msdn.microsoft.com/en-us/library/bb348051.aspx)

    ```
     class Program
    {
        static void Main(string[] args)
        {
            //the array method
            var test = new Order();
            test.AddPackage(new OvernightPackage() { WeightInOunces = 10, Sender = new Person() { Name = "Sender"}, Recipient = new Person() {Name = "Recipient"}});
            test.AddPackage(new TwoDayPackage() { WeightInOunces = 16, Sender = new Person() { Name = "Sender" }, Recipient = new Person() { Name = "Recipient" } });
            test.AddPackage(new TwoDayPackage() { WeightInOunces = 10, Sender = new Person() { Name = "Sender" }, Recipient = new Person() { Name = "Recipient" } });
            test.PrintManifestsWithArray();

            //the list way
            test.Packages = new List<Package>(test.PackagesArray);
            test.PrintManifests();

            Console.ReadLine();
        }
    }

    public class Person
    {
        public string Name { get; set; }
        public Address Address { get; set; }
    }

    public class Address
    {
        public string StreetAddress { get; set; }
        public string City { get; set; }
        public string State { get; set; }
        public string ZipCode { get; set; }
    }

    public abstract class Package
    {
        protected Package()
        {
            CostPerOunce = .08;
            WeightInOunces = 0;
        }
        public string Id { get; set; }
        public int WeightInOunces { get; set; }
        public double DeliveryCost { get { return CalculateCost(); } }
        public Person Sender { get; set; }
        public Person Recipient { get; set; }
        public double CostPerOunce { get; set; }
        protected virtual double CalculateCost ()
        {
            return WeightInOunces*CostPerOunce;
        }
    }

    public class OvernightPackage : Package
    {
        public OvernightPackage()
        {
            CostPerOunce = .12;
        }
        protected override double CalculateCost()
        {
            var cost = base.CalculateCost();
            cost += 1500.00;
            return cost;
        }
    }

    public class TwoDayPackage : Package
    {
        protected override double CalculateCost()
        {
            var cost = base.CalculateCost();
            cost += 500.00;
            return cost;
        }
    }

    public class Order
    {
        public List<Package> Packages { get; set; }
        public Package[] PackagesArray
        {
            get { return _thePackages; }
        }

        private Package[] _thePackages = new Package[0];
        public void AddPackage(Package pkg)
        {
            Array.Resize(ref _thePackages, _thePackages.Length + 1);
            _thePackages[_thePackages.Length -1] = pkg;
        }

        public void PrintManifestsWithArray()
        {
            foreach (var package in PackagesArray)
            {
                Console.WriteLine( package.GetType() + ": " + package.DeliveryCost);
            }
        }

        public double TotalCost
        {
            get
            {
                return Packages.Sum(package => (double) package.DeliveryCost);
            }
        }

        public void PrintManifests()
        {
            foreach (var package in Packages)
            {
                Console.WriteLine(package.Sender.Name);
                Console.WriteLine(package.Recipient.Name);
                Console.WriteLine(package.DeliveryCost);
                ///so on and so forth
            }
        }
    } 
    ```

# ruby - Perl/Ruby 单行数组操作

> ID：16203953
> 
> 赞同：0
> 
> 时间：2013-04-24T23:27:29.140
> 
> 标签：ruby, perl

您好，我正在尝试在 perl( 或 ruby​​ ) 中创建一个单行程序，它将文件中的数据读取到数组中，并在第 10 个元素之后用换行符将其打印在列中。

文件是这样的

```
Name
Course1
Mark1
Course2
Mark2
Course3
Mark3
Course4
Mark4 
```

并且应该像这样显示

```
Name   Course1  Mark1   Course2   Mark2   Course3   Mark3   Course4   Mark4 
```

这是我尝试过的

```
perl -ne '@a=split"\n",$_;print join("\t"=>splice@a,0,10)' Data.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:38:03.647

这不起作用，因为当您一次读取一行时，您会在换行符上进行拆分。你需要`-0777`让它工作。

您也只打印前 10 个元素，因此您需要引入一个循环。

```
perl -0777nE'@F = split /\n/; say join "\t", splice @F,0,10 while @F' Data.txt 
```

那乞求利用`-a`！

```
perl -F'\n' -0777naE'say join "\t", splice @F,0,10 while @F' Data.txt 
```

* * *

或者我们可以采取完全不同的方法。简短而甜蜜：

```
perl -pe's/\n/\t/ if $. % 10' Data.txt 
```

如果不是 10 列的倍数，则将以尾随制表符而不是换行符结尾。好吧，不太好。那么怎么样

```
perl -0777pe's/\n(?!\z)/ ++$i % 10 ? "\t" : "\n" /eg' Data.txt 
```

* * *

**更新**您已经更改了您的问题以请求固定宽度的字段。

如果您事先知道宽度（例如字段之间的 10 + 2 个字符 = 12）：

```
perl -F'\n' -0777naE'say pack "(A12)9 A*", splice @F,0,10 while @F' Data.txt 
```

如果您不这样做：

```
perl -MList::Util=max -F'\n' -0777naE'
   $w = 2 + max map length, @F;
   say pack "(A$w)9 A*", splice @F,0,10 while @F;
' Data.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:47:31.067

```
ruby -e 'ARGF.map{|l|l.strip}.each_slice(10) {|a| puts a.join "\t"}' Data.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:44:04.507

ikegami打败了我。但无论如何我都会发布我的。

```
perl -pe 'tr/\n/\t/ if $. % 9 != 0' 
```

编辑：啊，更好。谢谢ikegami（对于`$.`，我忘了那个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T02:47:18.437

数据样本只有 9 行，因此无法方便地放入 10 行存储桶中。我添加了一个占位符，所以我的文本文件如下所示：

```
姓名
课程1
标记1
课程2
标记2
课程3
标记3
课程4
马克4
-----
姓名
课程1
标记1
课程2
标记2
课程3
标记3
课程4
马克4
-----

```

我会在 Ruby 中按照以下方式进行操作：

```
puts ARGF.lines.map(&:chomp).each_slice(10).map{ |a| a.join(' ') } 
```

这给了我这样的输出：

```
名称 Course1 Mark1 Course2 Mark2 Course3 Mark3 Course4 Mark4 -----
名称 Course1 Mark1 Course2 Mark2 Course3 Mark3 Course4 Mark4 -----

```

使用制表符代替空格是微不足道的：替换`' '`为`"\t"`，但如何留给读者练习。

`map(&:chomp)`去除尾随的行尾，以便在打印时字段可以存在于一行中。`each_slice(10)`一次抓取十个数组元素，这会产生一个数组数组，每个子数组包含十个字符串。最后`map{ |a| a.join(' ') }`用空格或制表符连接子数组（如果更改为`"\t"`. 或者，可以使用`a * ' '`or`a * "\t"`代替`join`，但`join`更常用。

# python - 如何对python中的元组列表进行排序？

> ID：16203957
> 
> 赞同：-1
> 
> 时间：2013-04-24T23:28:03.080
> 
> 标签：python, list, sorting, python-2.7

你如何在python中对元组列表列表进行排序

例如：注意元组的最后一个元素是相同的

```
a  = [

[(1, 5, 6), (2, 2, 6), (3, 6, 6)],
[(6, 1, 3), (5, 7, 3), (4, 1, 3)],
[(5, 7, 2), (7, 5, 2), (6, 3, 2)],
[(9, 1, 7), (1, 5, 7), (2, 6, 7)]

] 
```

我想使用元组的最后一个元素作为键进行排序。所以预期的结果是

```
[

[(5, 7, 2), (7, 5, 2), (6, 3, 2)],
[(6, 1, 3), (5, 7, 3), (4, 1, 3)],
[(1, 5, 6), (2, 2, 6), (3, 6, 6)],
[(9, 1, 7), (1, 5, 7), (2, 6, 7)]

] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:31:32.650

使用`key`参数进行排序和`lambda`函数

```
a.sort(key=lambda x: x[-1][-1]). # sorts in-place
sorted(a, key=lambda x: x[-1][-1]). # new sorted list 
```

**编辑**：根据您要查看比较的元组更改第一个索引。即，用于`x[0][-1]`基于第一个元组进行比较

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T23:30:47.263

```
In [27]: a  = [
   ....:
   ....: [(1, 5, 6), (2, 2, 6), (3, 6, 6)],
   ....: [(6, 1, 3), (5, 7, 3), (4, 1, 3)],
   ....: [(5, 7, 2), (7, 5, 2), (6, 3, 2)],
   ....: [(9, 1, 7), (1, 5, 7), (2, 6, 7)]
   ....:
   ....: ]
                               # any tuple (first will do), last element
In [28]: a.sort(key=lambda l: l[0][-1])

In [29]: a
Out[29]:
[[(5, 7, 2), (7, 5, 2), (6, 3, 2)],
 [(6, 1, 3), (5, 7, 3), (4, 1, 3)],
 [(1, 5, 6), (2, 2, 6), (3, 6, 6)],
 [(9, 1, 7), (1, 5, 7), (2, 6, 7)]] 
```

# php - 滑块的动态数量

> ID：16203960
> 
> 赞同：0
> 
> 时间：2013-04-24T23:28:14.950
> 
> 标签：php, jquery, symfony1, slider, symfony-1.4

我需要创建一个页面，上面有“n”个滑块。

它涉及从数据库中检索的足球运动员资料。我正在使用“carouFredSel”来制作滑块，但我无法让它与未定义数量的滑块一起工作（我希望我足够清楚）。

这是一个例子......

```
foreach($sports as $sport):
  <div class='sportContainer'>
  foreach($players as $player):
   <div class='playerInfo'>
   </div>
  endforeach
  </div>
endforeach 
```

这是我用于显示其他类型播放器的脚本（每页只有一个滑块）：

```
$(document).ready(function() {
        /* PLAYER SCROLL */
        $('.sport-carousel').carouFredSel({
            items: 4,
            prev: '.title-prev#playersNav',
            next: '.title-next#playersNav',
            auto: false,
            scroll: 1,
            swipe: {
                ontouch : true,
                onMouse: true
            }
        })
    }); 
```

我需要每个 $sport 都有自己的滑块，带有自己的控件和列表按钮。换句话说，我需要动态获取标识符。

这是[carouFredSel](http://caroufredsel.dev7studios.com/)页面了解更多信息。

我在项目中使用 Symfony 1.4，如果这在某种程度上有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:24:50.143

只需使用一些 jQuery 来计算项目数。

```
$(document).ready(function() {
        /* PLAYER SCROLL */
        $('.sport-carousel').carouFredSel({
            items: $('.playerInfo').length,
            prev: '.title-prev#playersNav',
            next: '.title-next#playersNav',
            auto: false,
            scroll: 1,
            swipe: {
                ontouch : true,
                onMouse: true
            }
        })
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:43:58.433

好的，我已经完成了，为每项运动创建一个脚本就可以了。

```
foreach($sports as $sport):
  <div class='sport-carousel_$sport->getId()'>
  foreach($players as $player):
   <div class='playerInfo'>
   </div>
  endforeach
  </div>
$(document).ready(function() {
        /* PLAYER SCROLL */
        $('.sport-carousel_$sport->getId()').carouFredSel({
            items: 4,
            prev: '.title-prev#playersNav_$sport->getId()',
            next: '.title-next#playersNav_$sport->getId()',
            auto: false,
            scroll: 1,
            swipe: {
                ontouch : true,
                onMouse: true
            }
        })
    });
endforeach 
```

感谢您的帮助，希望它适用于动态创建滑块

# ruby-on-rails - 路由中的全部内容时重定向并引发闪烁消息

> ID：16203961
> 
> 赞同：3
> 
> 时间：2013-04-24T23:28:22.563
> 
> 标签：ruby-on-rails, routes

我可以[在路由文件末尾使用此行](https://stackoverflow.com/questions/4132039/rails-redirect-all-unknown-routes-to-root-url)[重定向](http://guides.rubyonrails.org/routing.html#redirection)所有（无效）url ：

```
match '*a' => redirect('/') 
```

我想做重定向并在`routes.rb`.
类似的东西（这里的语法是错误的）：

```
match '*a' => redirect('/'), :alert => "aaargh, you don't want to go to #{params[:a]}" 
```

是否有可能做到这一点？

*如果我在视图/控制器中执行此操作，我可以`redirect_to`在重定向页面上使用并传递一条 flash 消息（请参阅[文档中的重定向](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)示例）。创建一个新的控制器方法并在那里重定向会起作用，但它似乎不优雅......这是推荐的方式吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:41:45.037

[对Jun 的回答](https://stackoverflow.com/a/16207809/1240268)稍作调整，我就可以做到这一点：

```
match '*a' => redirect { |p, req| req.flash[:error] = "aaargh, you don't want to go to #{p[:a]}"; '/' } 
```

*它将无效页面`'/'`与所需的（动态）消息一起重定向到。*

如果你去`www.your_website/a_bad_place`这个传递消息`'/'`：

> 啊，你不想去`a_bad_place`

.

您可以使用以下方法获取整个违规（无效）网址：

```
#{req.env["HTTP_HOST"]}#{req.env["REQUEST_PATH"]} 
```

并用这个显示它：

```
match '*a' => redirect { |p, req| req.flash[:error] = "aaargh, you don't want to go to #{req.env["HTTP_HOST"]}#{req.env["REQUEST_PATH"]}"; '/' } 
```

你会看到：

> 啊，你不想去`www.yourwebsite/a_bad_place`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:25:29.970

我能做的最好的是：

```
match 'PATH' => redirect { |p, req| req.flash[:alert] = "MESSAGE"; '/' } 
```

# rest - Kohana 3.3 RESTful API 路由错误

> ID：16203963
> 
> 赞同：0
> 
> 时间：2013-04-24T23:28:34.423
> 
> 标签：rest, kohana, kohana-3.3

我在使用 Kohana 3.3 设置 RESTful API 时遇到问题。我已将以下模块（分支 3.3/release/v2.0）[https://github.com/michal-m/kohana-modules-restful](https://github.com/michal-m/kohana-modules-restful)添加到我的引导程序中。

```
Kohana::modules(array(
    'restful' => MODPATH.'restful'
)); 
```

我创建了一个新控制器，`Controller_Api`它扩展`RESTful_Controller`并具有`get`、`update`、`create`、`delete`动作。在我的路线文件中，我有：

```
Route::set('api', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'index'
)); 
```

但我遇到的问题是当我去：[http ://example.com/api/user/1](http://example.com/api/user/1)

我收到以下错误，表明我的路线错误，但我无法解决：

`Kohana_HTTP_Exception [ 404 ]: Unable to find a route to match the URI: api/user/1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:33:53.863

首先，获取最新`3.3/release/2.0`版本。它还不是最终版本，但我刚刚推送了 2 个重要的修补程序。

其次，您必须添加一个路由过滤器来将请求方法（GET、POST 等）转换为适当的操作。您可以使用随模块提供的一个，如下所示：

```
Route::set('api', '(<controller>(/<action>(/<id>)))')
    ->filter('RESTful::route_filter')
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'index'
)); 
```

或者自己创建一个简单的，例如：

```
Route::set('api', '(<controller>(/<action>(/<id>)))')
    ->filter(function($route, $params, $request){
        $params['action'] = strtolower($request->method());
        return $params;
    })
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'index'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:51:43.750

1.  `restful`模块添加成功了吗？例如，您可以尝试`Kohana::autoload('RESTful_Controller')`（返回布尔值）。
2.  查看您的路线列表。常见的错误是在默认的包罗万象的路线**之后**添加您的自定义路线。呼叫`Route::all()`，您将按添加顺序查看所有路线。
3.  您的路线看起来正确，但您可以对其进行测试：

```
 $route = Route::get('api');
      $request = Request::factory('api/user/1');
      // since 3.3 Route::matches requires Request object
      $params = $route->matches($request); 
```

`$params`应包含`Request`参数名称（控制器、操作等）。如果您的路线不正确，`$params`则为 FALSE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T23:33:24.217

我正在使用路由过滤器。3.3 版本中添加了路由过滤器。例子：

引导程序.php

```
Route::set('users', '(<controller>(/<id>))')
->filter(function ($route, $params, $request) {
    $params['action'] = strtolower($request->method()) . '_' . $params['action'];
    return $params;
})
->defaults(array('controller' => 'Users', 'action' => 'user')); 
```

bootstrap.php（如果需要检查身份验证）

```
Route::set('users', '(<controller>(/<id>))')
->filter(function ($route, $params, $request) {
    if (Auth::instance()->logged_in())
    {
        $params['action'] = strtolower($request->method()) . '_' . $params['action'];
    }
    else
    {
        $params['action'] = 'noauth';
    }

    return $params;
})
->defaults(array('controller' => 'Users', 'action' => 'user')); 
```

并从我的控制器中剪切代码。

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Users extends Controller {

    public function action_get_user ()
    {
       // GET method
    }

    public function action_post_user ()
    {
       // POST method
    }

    public function action_put_user ()
    {
       // PUT method
    }

    public function action_delete_user ()
    {
       // DELETE method
    }

    public function action_noauth ()
    {
       // No authentication response
    }
} 
```

# mysql - 我应该如何优化这个查询？

> ID：16203966
> 
> 赞同：0
> 
> 时间：2013-04-24T23:28:50.657
> 
> 标签：mysql, indexing

我正在从数据库中选择产品列表并将其显示给用户。我已经为 where 子句中使用的列创建了索引，然后返回和加载结果也需要很多时间。

```
SELECT 
    prod_disp.pdid, prod_disp.cat_id, prod_disp.title, prod_disp.image_url, 
    prod_disp.price, prod_stat.eyeing_ids, prod_stat.eyeing_num, 
    prod_stat.listing_num, prod_stat.reviews_num, prod_stat.reviews_score
FROM 
    products.prod_disp 
    INNER JOIN products.prod_stat ON prod_disp.pdid = prod_stat.pdid
WHERE 
    prod_disp.active='1' AND prod_disp.cat_id='7' 
ORDER BY 
    RAND()
LIMIT 0, 21; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:41:04.440

计算结果。

通过 rand() 删除订单。

生成一个介于 0 和 Count-21 之间的随机数，我们称之为 _rand

替换 LIMIT 0、21；限制_rand，_rand+21；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:38:29.990

我不确定，但我认为 ORDER BY rand() 会导致 MySQL 在内部将所有数据放入一个临时表（甚至可以写入磁盘上），然后随机重新排序。如果您可以接受，您可以根据索引字段将其替换为随机位置。

您还需要这些索引：

*   prod_disp（pdid，prod_disp.cat_id，活动）
*   FK：产品（prod_stat）

# python - 如何在 python 中使用正则表达式来解析所有 IP 地址的网页？

> ID：16203967
> 
> 赞同：-4
> 
> 时间：2013-04-24T23:29:03.333
> 
> 标签：python, regex, proxy, urllib2, urllib

这是我管理的最多的：

```
import urllib.request

page = urllib.request.urlopen("http://www.samair.ru/proxy/ip-address-01.htm")

page('\d+\.\d+\.\d+\.\d+') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:36:14.960

```
In [1]: import urllib2
In [2]: import re
In [3]: page = urllib2.urlopen("http://www.samair.ru/proxy/ip-address-01.htm").read()
In [4]: re.findall('\d+\.\d+\.\d+\.\d+', page)
Out[4]:
['101.226.74.168',
 '101.255.60.162',
 '101.50.17.123',
 '103.247.16.2',
 '103.247.16.97',
 '103.28.227.78',
 '103.7.248.161',
 '106.120.98.166',
 '107.16.66.225',
 '108.166.87.24',
 '109.123.111.99',
 '109.127.37.117',
 '109.175.8.45',
 '109.175.8.53',
 '109.207.61.160',
 '109.207.61.172',
 '109.207.61.173',
 '109.207.61.194',
 '109.207.61.210',
 '109.230.66.7'] 
```

# python - pygame相机类错误：无法设置捕获分辨率

> ID：16203973
> 
> 赞同：3
> 
> 时间：2013-04-24T23:30:40.483
> 
> 标签：python, windows-8, pygame, webcam

我正在尝试将相机的屏幕截图保存到文件中。我在 Windows 8 上使用 Python 2.7 32 位和 pygame 1.9 32 位。我花了一段时间谷歌搜索这个问题，但在网上找不到太多。

这是我的代码：

```
import pygame
import pygame.camera
import sys

pygame.camera.init()
pygame.display.set_mode((800, 600))
cameraCount = len(pygame.camera.list_cameras())
if cameraCount < 1:
    print "No cameras found!"
    raw_input()
    sys.exit(0)

x = 0

if cameraCount > 1:
    print "Multiple cameras found, choose a number 0 through ", cameraCount
    x = -1
    while int(x) > cameraCount or int(x) < 0:
        x = raw_input()

cam = pygame.camera.Camera(x)
cam.start()
snapshot = cam.get_image()
pygame.image.save(snapshot, "testing.png")
print "done!"
raw_input() 
```

这是我收到的错误：

```
Traceback (most recent call last):
  File "C:\Users\Cody\Desktop\Python\cameraa.py", line 21, in <module>
    cam = pygame.camera.Camera(x)
  File "C:\Python27\lib\site-packages\pygame\_camera_vidcapture.py", line 52, in
 __init__
    self.dev.setresolution(width, height)
vidcap.Error: Cannot set capture resolution. 
```

我找到了我的网络摄像头支持的分辨率列表，并尝试了每一个，但都没有奏效。

任何帮助表示赞赏，谢谢。

# java - 如何在 bash 中设置 JAVA_HOME？

> ID：16203977
> 
> 赞同：1
> 
> 时间：2013-04-24T23:31:04.463
> 
> 标签：java, linux, bash, cygwin

我的主机系统是windows 7

我正试图让它在**CYGWIN**中工作。

我需要将一个名为**JAVA_HOME**的环境变量设置为`c/program files (x86)/java/jre7`

这是我尝试过的：

```
$myjava=cat c/program\ files\ \(x86\)/java/jre7
export JAVA_HOME=myjava 
```

但我得到：

> 第 9 行：c/program files (x86)/java/jre7: No such file or directory 错误：未设置 JAVA_HOME。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:37:21.740

```
export JAVA_HOME=c:/program\ files\ \(x86\)/java/jre7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T23:48:50.440

两个错误：首先，您尝试`c/program files (x86)/java/jre7`使用奇怪的一次性变量执行“”，其次，看起来您正在使用 bourne-shell 语义：首先您必须设置变量，然后您可以导出它。

这行`$myjava=cat c/program\ files\ (x86)/java/jre7`说*取名为“myjava”的变量，提取值（等等，那个 var 不存在？好吧，值将是空字符串......），使用该值作为变量的名称，然后设置*该*变量的值为“cat”。实际上不要在 shell 环境中设置它，我们将运行 "c/program\ files\ (x86)/java/jre7" 并将其设置为该命令环境中的额外变量*。这就是为什么你得到“c/program files (x86)/java/jre7: No such file or directory”的原因。

该行`export JAVA_HOME=myjava`，在 bash 中我会说这意味着*创建/设置一个名为 的变量`JAVA_HOME`，将其设置为字符串“myjava”，并将其标记为导出的变量*。错误消息“错误：未设置 JAVA_HOME。” 要么意味着你需要分解它（不使用 bash？），`JAVA_HOME=$myjava; export JAVA_HOME`要么意味着 JAVA_HOME 没有设置*为任何有意义的东西，*如果你修复第一行，一切都会变得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T00:18:01.640

@BMargulies Answer 提供了一个解决方案。但我认为理解你做错的原因是相关的......这样下次你可以（至少）更好地尝试让它正确。

查看您的第一个命令行...

```
$myjava=cat c/program\ files\ \(x86\)/java/jre7 
```

这有很多问题。首先，设置 shell 变量的语法是：

```
<name>=<word> 
```

所以你在第一行实际上要做的事情如下：

1.  它正在为字符串“cat”设置一个变量名未知的变量：

    *   变量名称未知，因为它取决于“myjava”变量的*先前*值。（话语“$myjava”表示“在此处插入 'myjava' 变量的值”。）
    *   将变量设置为“cat”的原因是“cat”是“=”之后的第一个单词。
2.  然后，它尝试将行的其余部分（即“c/program\ files\ (x86)/java/jre7”）作为命令运行。但它不是一个命令：它是一个目录。这是您看到的“未找到”错误消息的最可能来源。

最重要的是，您似乎正在*尝试*使用“cat”命令来做某事。“cat”命令（以这种形式）读取文件的内容并将其写入标准输出。

1.  你没有文件。您正在查看一个目录。
2.  您不关心目录的内容。（这不是您访问它的方式......）
3.  你不是在看标准输出。

简而言之，这里完全不需要“猫”。您只需要目录的*路径名*。所以第一行的正确形式是：

```
 myjava=c/program\ files\ \(x86\)/java/jre7 
```

或使用引号：

```
 myjava="c/program files (x86)/java/jre7" 
```

或者

```
 myjava='c/program files (x86)/java/jre7' 
```

这三种引用都具有相同的效果。它们导致“=”之后的内容被解析为单个`<word>`. （这 3 种引用风格之间的行为有所不同，但在这里它们并不重要。）

第二行实际上接近它需要的。你写了：

```
 export JAVA_HOME=myjava 
```

表示将 JAVA_HOME 设置为文字字符串 "myjava" ... 并将其导出。但是您想使用名为“myjava”的 shell 变量的值。那是：

```
 export JAVA_HOME=$myjava 
```

“$myjava”表示“插入变量 'myjava' 的值”......见上文。

* * *

@BMargulies 答案将这两行合并为 on，并取消了（不必要的）局部变量“myjava”。我也是这样做的。

# vba - 如何从excel中的单元格中提取逗号格式的数字并将其复制到不同的列

> ID：16203985
> 
> 赞同：0
> 
> 时间：2013-04-24T23:32:10.893
> 
> 标签：vba

我有一列的数据是这样的： 2, 3 我想提取数字 2 并将其放在一列下，然后提取 3 并将其放在另一列中。

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:38:35.117

使用“数据”选项卡上的“文本到列”功能。在菜单中，您将选择 Delimited，然后在下一个屏幕上选择 Comma 作为分隔符。

如果你绝对需要使用 VBA，你可以使用 Split 功能。

```
Split("42, 12, 19", ", ") 
```

将返回以下数组：

```
{"42", "12", "19"} 
```

然后，您可以将这些值粘贴到列中。

# css - 方向改变上的图像

> ID：16203986
> 
> 赞同：1
> 
> 时间：2013-04-24T23:32:22.577
> 
> 标签：css

我试图制作应用程序。

我有两个画廊，一个用于定向纵向，另一个用于横向。

当我从横向更改为纵向时，如何删除图像？

我的问题是当我更改为纵向时，横向的图像被隐藏但仍在顶部。因为纵向显示的图像从顶部有一个空间。

我使用代码检查器查看问题所在，并从横向向我显示隐藏的图像。

谢谢任何帮助

# html - Kendo Mobile - Windows Phone 8 视口在 Lumia 920 上损坏

> ID：16203990
> 
> 赞同：0
> 
> 时间：2013-04-24T23:32:40.283
> 
> 标签：html, windows-phone-8, kendo-ui

Lumia 920 设备上的 Windows Phone 8 视口出现问题。它似乎不尊重剑道注入的标准视口标签：

```
<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"> 
```

有谁知道任何优雅的解决方法来让它工作？

我正在使用带有 JQuery v1.9.1 的 Kendo v2013.1.319，以及 Lumia 920 上的所有最新更新/固件升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:11:34.490

WP8 中不支持视口元标记，您必须使用 CSS [@-ms-viewport](http://msdn.microsoft.com/en-us/library/ie/hh869615%28v=vs.85%29.aspx)。但是你不需要，因为 Kendo UI Mobile 已经定义了它。

如果您的主要问题是小的界面元素，这是由于 WP8 IE10 中缺少自动缩放（没有 window.devicePicelRatio），并且已经在最新的内部版本中修复。

# php - 如何将多个变量设置为各自的值？

> ID：16203995
> 
> 赞同：-1
> 
> 时间：2013-04-24T23:33:32.570
> 
> 标签：php, mysql, arrays, variables

我的 sql 语句返回一个由 2 个关联键组成的数组，向上和向下。

```
query = 'SELECT `up`,`down` FROM `records` WHERE `id`=id' 
```

有没有一种方法可以在一行中设置两个变量，例如：

```
$up, $down = 'SELECT `up`,`down` FROM `records` WHERE `id`=id' 
```

这样上下会取各自的值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:44:16.397

from 的返回值`mysqli::query()`不是立即关联数组，而是“结果集”。如果查询失败，你甚至不会得到，但是`FALSE`. 所以虽然你可以做

```
list($up, $down) = $db->query ("SELECT up, down FROM records WHERE id='id';")->fetch_all(); 
```

这不会让您检查查询是否确实有效，因此您最好将其拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:41:58.837

如果在进行 SQL 调用后，您会得到一个如下所示的关联数组：

```
array(
  'up' => 'foo',
  'down' => 'bar'
); 
```

然后您可以使用[`extract()`](http://php.net/manual/en/function.extract.php)来获取变量`$up`和`$down`.

所以你可以这样做：

```
// no need to initialize $up and $down

extract(exec_query()); // asusming exec_query() returns the assoc array defined above
echo $up;  // will print 'foo'
echo PHP_EOL;
echo $down;  // will print 'bar' 
```

*PS - 虽然可以这样做，但从可读性的角度来看确实很糟糕，我强烈建议不要这样做。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T23:41:16.613

`list()`允许您从一个函数调用中分配多个值，但是，在您的情况下，您还需要执行查询并从数据库服务器获取数据。

例如：

```
list($up, $down) = mysqli_fetch_array($queryResult, MYSQLI_ASSOC); 
```

# razor - 如何使用 WebImage 在 Umbraco 中创建缩略图？（带剃须刀）

> ID：16203998
> 
> 赞同：2
> 
> 时间：2013-04-24T23:33:57.527
> 
> 标签：razor, umbraco, webimage

我正在使用 Umbraco 6。

我尝试为使用 Mediapicker 上传的每张照片创建 2 个缩略图。我的意思是 - 每张上传的照片都应该有**140x100**版本和**350 x 200**版本。

我不想使用 ImageGen。

所以我找到了这篇关于 WebImage 助手的文章 - 使用以下代码：

```
@{  
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";
    var imageThumbPath  = "";

    if(IsPost){
        photo = WebImage.GetImageFromRequest();
        if(photo != null){
             newFileName = Guid.NewGuid().ToString() + "_" +
                 Path.GetFileName(photo.FileName);
             imagePath = @"images\" + newFileName;
             photo.Save(@"~\" + imagePath);

            imageThumbPath = @"images\thumbs\" + newFileName;
            photo.Resize(width: 60, height: 60, preserveAspectRatio: true,
               preventEnlarge: true);
            photo.Save(@"~\" + imageThumbPath);        
        }
    }
} 
```

所以实际上我刚刚创建了一个新的 Razor 脚本（在开发人员部分下） - 它只是不起作用......

我该怎么做？我需要做的只是为我使用媒体选择器上传的每张照片创建一个缩略图 - 然后在我的页面中使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:33:47.293

Umbraco 会自动为保存到媒体中的每个图像创建一个缩略图（用于在媒体区域中显示）。要使用它，只需在获得媒体项目的 umbracofile 后在图像名称及其扩展名之间添加 _thumb。

这应该得到所有媒体库图像及其拇指（显然文件夹等需要以不同方式处理）：

```
var rootMedia = new umbraco.cms.businesslogic.Media(-1);
var allMediaImages = rootMedia.GetChildMedia();

foreach(var mediaImage in allMediaImages)
{
  var fullPath = mediaImage.GetPropertyAsString("umbracoFile");
  var thumbPath = mediaImage.GetPropertyAsString("umbracoFile").Replace(".","_thumb.");
} 
```