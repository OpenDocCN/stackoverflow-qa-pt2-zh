# StackOverflow 问答 12858000-12858999

# asp.net - 关闭浏览器窗口时需要一条警告消息（单击浏览器的 X 按钮时）

> ID：12858003
> 
> 赞同：-1
> 
> 时间：2012-10-12T11:24:06.080
> 
> 标签：asp.net, vb.net, c#-4.0

当我关闭浏览器`close(X)`按钮时，我需要一条警报消息。

我用谷歌搜索了这个问题，但答案是`onbeforeunload()`在表单的正文标记中使用方法。

但是当我使用母版页包含的表单时，没有正文标记来调用此方法。在这种情况下我应该怎么做？没有在表单中使用 body 标签。

当我`onbeforeunload()`在正文标记中使用它时，但是当我单击页面的刷新按钮时，此警报消息会触发。单击浏览器上的刷新按钮时不会触发此警报消息。这在 chrome 浏览器中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:52:01.163

```
window.onbeforeunload = function ()
 {

     alert("WINDOW IS CLOSED");

}; 
```

# android - 动态添加视图到右下角

> ID：12858014
> 
> 赞同：0
> 
> 时间：2012-10-12T11:24:51.307
> 
> 标签：android, dynamic, view

我在 xml 中定义了一个相对布局，我用 ImageView 动态填充。我将新的 ImageView 放在最后一个的右侧。但是，当添加了太多的 ImageView 时，屏幕的宽度太小而无法全部显示出来。所以，如果线路上没有剩余空间，我正在寻找一种在下面添加这些 ImageView 的方法......

如果我不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:32:39.130

您是否尝试使用[gridview](http://developer.android.com/reference/android/widget/GridView.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:39:32.797

您可以使用设置图像的 scaleType 来使它们缩放或使用其他布局、网格或根据视觉要求还画廊（http://developer.android.com/reference/android/widget/Gallery.html）。

# javascript - 自定义 Underscore.js 的 range()

> ID：12858027
> 
> 赞同：4
> 
> 时间：2012-10-12T11:25:45.910
> 
> 标签：javascript, jquery, underscore.js

在下划线中使用[`range()`](http://underscorejs.org/#range)我可以做这样的事情：

```
_.range(10);
>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

我可以以某种方式修改/使用它来创建这样的结果：

```
solution();
>> {0: true, 1: true, 2: true, 3: true} 
```

该解决方案还可能包括 jQuery。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T11:31:19.463

是的。

```
var range = _.range(10);
_.map(range, function() { return true; }); 
```

[js小提琴](http://jsfiddle.net/v4wvE/)。

如果您必须有一个对象（前者返回一个数组），请在结果上运行它...

```
_.extend({}, range); 
```

[js小提琴](http://jsfiddle.net/QaTTb/)。

值得一提的是，如果你没有 Underscore 或者想使用 jQuery，还有等价物`$.map()`和`$.extend()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T18:10:32.967

接受的答案对于给定的问题很好，但应该注意的是，正如给定的那样，它只适用于从零开始的递增整数范围，因为它实际上使用的是索引，而不是元素的值。

这是许多可能的解决方案中的另一个。当我需要将数组转换为“查找哈希”时，我会这样做：

```
var range = _.range(10);
var hash = _.object(range, range.map(_.const(true))); 
```

这将考虑到源数组中的实际值，它可以是任何顺序的数字或字符串。

我不特别推荐这个，但如果可以确定您的源范围不包含零，您可以进一步简化它，因为所有值都是真实的：

```
var hash = _.object(range, range); 
```

# ios - 使用 animationImages 检测 UIImageView 中单击了哪个图像

> ID：12858028
> 
> 赞同：0
> 
> 时间：2012-10-12T11:25:49.240
> 
> 标签：ios

我们可以为 a 指定 images 数组`UIImageview`，它会很好地为图像设置动画。我已经对这个类进行了子`UIImageView`类化。

现在，当用户单击图像时，我捕获了点击手势，但问题是我如何知道单击了动画图像中的哪个图像？

```
- (void)setup
{
    self.animationImages = self.bannerImagesArray;
    self.animationDuration = 3.0f;
    self.animationRepeatCount = 0;
    [self startAnimating];

    self.userInteractionEnabled = YES;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageClicked)];
    [self addGestureRecognizer:tapGesture];
}

- (void)imageClicked
{
    NSLog(@"Image clicked");
    // How do i detect which image was clicked here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:57:24.793

我使用了以下解决方法......我没有使用 的内置功能，而是使用`animationImages`自定义动画图像`NSTimer`

```
- (void)setBannerImagesArray:(NSArray *)bannerImagesArray
{
    _bannerImagesArray = bannerImagesArray;
    [self.timer invalidate];
    self.currentImageIndex = 0;
    self.image = [self.bannerImagesArray objectAtIndex:self.currentImageIndex];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:1
                                                  target:self
                                                selector:@selector(displayNextImage)
                                                userInfo:nil
                                                 repeats:YES];

}

- (void)setup
{
    self.userInteractionEnabled = YES;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageClicked)];
    [self addGestureRecognizer:tapGesture];

    self.bannerImagesArray = nil;
}

- (void)imageClicked
{
    NSLog(@"Image clicked index: %d", self.currentImageIndex);    
}

- (void)displayNextImage
{
    self.currentImageIndex = (self.currentImageIndex + 1) % self.bannerImagesArray.count;
    NSLog(@"Current Image Index %d", self.currentImageIndex);
    self.image = [self.bannerImagesArray objectAtIndex:self.currentImageIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:31:31.197

你试过self.image吗？它应该具有当前图像。

我希望您需要设计自己的自定义动画视图来处理。您可以将图像视图添加到视图并定期更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:52:45.250

您想要做的事情很困难但并非不可能，并且会使用调试器对您进行一些调查。您需要找到在动画期间在您的每张图像上调用的某种方法。您可能会发现创建一个小型演示项目确实对此有所帮助 - 一个仅包含一些动画图像的单一视图项目。

我不知道的是动画运行后，是所有内容都缓存了，还是在显示之前发送了单个图像。可能会可靠地调用某些方法。

所以你需要创建一个断点并让它记录一些东西，或者编写一个 UIImage 的子类。您正在寻找的是一种在每个图像上调用的方法。例如，“drawInRect”或“CGImage”。一旦你发现这样的方法在整个动画中被调用，你的问题就解决了。

然后，您将子类化 UIImage，并为每个图像提供一个标记属性和一个委托（使用您编写的新协议），并且当每个图像获得该绘制调用（或 CGImage 调用）时，它将通知委托它将很快就会呈现。

当您点击时，图像将是最后一个注册它提供其 CGImage 的图像，或者它已准备好绘制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:59:16.107

我想您可以使用 [gesture locationInView:self] 捕获手势的位置。如果您还可以捕获动画的经过时间，您可以准确计算点击时屏幕上的哪些图像以及点击落在哪个可见图像上。

# css - 你能用nth-child选择最后3个项目并选择奇数或偶数吗？

> ID：12858029
> 
> 赞同：1
> 
> 时间：2012-10-12T11:25:49.490
> 
> 标签：css, css-selectors

**设想**

比如说我有以下内容：

```
1 | 2 | 3
4 | 5 | 6
7 | 8 | 9

<ul>
    <li>1</li><li>2</li><li>3</li>
    <li>4</li><li>5</li><li>6</li>
    <li>7</li><li>8</li><li>9</li>
</ul> 
```

我有奇数和偶数的默认背景：

```
li:nth-child(even) {
    background: #ff0000;
} 

li:nth-child(odd) {
    background: #00ff00;
} 
```

**问题**

但我想为最后 3 个结果应用不同的背景，也取决于它们是偶数还是奇数：

```
li:nth-last-child(-n + 3)(even) {
    background: #0000ff;
}

li:nth-last-child(-n + 3)(odd) {
    background: #ffff00;
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:34:15.173

您还需要重复该`:nth-child`部分：

```
li:nth-last-child(-n + 3):nth-child(even) {
    background: #0000ff;
}

li:nth-last-child(-n + 3):nth-child(odd) {
    background: #ffff00;
} 
```

此外，根据您有多少元素，`:nth-child(odd)`并且`:nth-last-child(odd)`（以及它们的`even`对应物）可能会选择不同的元素。

# c# - HttpWebRequest 回调被 UI 阻止

> ID：12858031
> 
> 赞同：5
> 
> 时间：2012-10-12T11:26:04.793
> 
> 标签：c#, windows-phone-7

已编辑：在 Windows Phone 上，我正在调用`HttpWebRequest.BeginGetResponse`我开始的单独线程。然后我调用 MessageBox.Show()。问题是在我关闭 MessageBox 之前不会调用回调。

```
void GetResponseCallback(IAsyncResult asynchronousResult) {
    //Not getting called until I dismiss MessageBox
}

void getWeb() {
    Thread.Sleep(1000);
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(url));
    request.Method = "GET";
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

new Thread(getWeb).Start(); //Start a new thread
MessageBox.Show(); 
```

MessageBox 是否应该阻止后台线程上的回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:06:09.967

if you want to use `MessageBox.Show();`

then place a this inside dispacher

```
void GetResponseCallback(IAsyncResult asynchronousResult) 
{
    Dispatcher.BeginInvoke(() =>
    {
        MessageBox.Show("Done");
    });

}

void getWeb() {
    Thread.Sleep(1000);
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(url));
    request.Method = "GET";
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

new Thread(getWeb).Start(); //Start a new thread 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:43:54.230

“消息框。显示（）；” 将阻止您的 ui 线程。

但我认为这不是 GetResponseCallback 不运行的原因。

您可以对其进行测试，评论该代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:44:25.410

需要添加引用`Microsoft.Phone.Reactive`

尝试这个：

```
private void PushMe_Click(object sender, RoutedEventArgs e)
        {
            var scheduler = Scheduler.NewThread;
            scheduler.Schedule(action => GetWeb());         
            MessageBox.Show("This is a test.", "Test caption.", MessageBoxButton.OK);
        }

        private void GetWeb()
        {
            Thread.Sleep(3000);
            var httpWebRequest = (HttpWebRequest) WebRequest.Create("http://www.stackoverflow.com");
            httpWebRequest.Method = "GET";

            httpWebRequest.BeginGetResponse(BeginGetResponseCallback, httpWebRequest);
        }

        private void BeginGetResponseCallback(IAsyncResult ar)
        {

        } 
```

# sql-server-2008-r2 - 是否有任何现成的工具可用于为 Microsoft Sync 的数据库提供程序生成设置脚本

> ID：12858034
> 
> 赞同：0
> 
> 时间：2012-10-12T11:26:13.943
> 
> 标签：sql-server-2008-r2, microsoft-sync-framework, sql-server-ce-4

我正在使用 Microsoft Sync Framework 2.1、MS SQL Server 2008 * MS SQL CE 4.0 ...

是否有任何现成的工具可用于为 Microsoft Sync 的数据库提供程序生成设置脚本

请访问以下链接，以便您知道我想要什么

请展开“仅离线场景的自定义更改跟踪”部分

目前我必须为每个表编写这个 SQL 脚本，但我的应用程序中有 100 多个表。

[http://msdn.microsoft.com/en-us/library/bb726041.aspx](http://msdn.microsoft.com/en-us/library/bb726041.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:06:47.097

假设您有在 SQL CE 上运行的“离线”客户端，需要将表与中央 SQL Server 2008 数据库同步，我建议您使用 Sync Framework Toolkit（以前称为 Microsoft Sync Framework 4.0）

该工具包主要旨在支持非 Microsoft 客户端和 SQL Server 之间的双向同步。

该工具包已经实现了 SqlCeOfflineSyncProvider，并且您获得了源代码，因此您可以根据您的要求对其进行修改。

它带有一个控制台 (SyncSvcUtil.exe) 和一个 GUI (SyncSvcUtilUI.exe) 实用程序，用于为您希望同步的表在 SQL Server DB 中生成所有更改跟踪存储过程和跟踪表。从代码中执行此同步表配置也很容易。

[在这里](http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e)下载。

此外，编译的帮助 CHM 文档也相当不错。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:27:20.843

供应 API 应该能够为您做到这一点。请参阅：[教程：同步 SQL Server 和 SQL Server Compact](http://social.microsoft.com/en-us/library/ff928494.aspx)

Sync Framework 默认情况下不能与 SQL CE 4 一起使用，但您可以使其工作，请参阅：[Sync Framework 和 SQL Compact 4（是的，您可以！）](http://jtabadero.wordpress.com/2012/04/20/sync-framework-and-sql-compact-4-yes-you-can/)

您还可以使用 SQL Server Compact Tool 生成预配和同步代码，请参阅：[SQL Server Compact Toolbox 同步框架支持](http://jtabadero.wordpress.com/2012/05/02/sql-server-compact-toolbox-sync-framework-support/)

Sync Toolkit 主要是为非 MS 客户端平台或那些无法拥有完整 Sync Framework SDK（Silverlight、Windows Phone、iOS 等）的平台设计的，您拥有完整的 MS 堆栈，因此您可以坚持使用 Sync Framework 本身.

# php - 使用 Capifony 部署 Symfony2 应用程序 - APC 加载程序仍使用以前的版本

> ID：12858037
> 
> 赞同：4
> 
> 时间：2012-10-12T11:26:20.377
> 
> 标签：php, symfony, apc, capifony

我最近将我的 Symfony2 应用程序升级到 2.1 并将其迁移到新服务器，所以我想我应该配置[Capifony](http://capifony.org/)以简化部署。一切都很好，除了它现在不使用 APCLoader，所以我不得不暂时注释掉它，直到它被排序。

以下是来自的相关代码`app.php`：

```
$loader = require_once __DIR__.'/../app/bootstrap.php.cache';

// Use APC for autoloading to improve performance.
// Change 'sf2' to a unique prefix in order to prevent cache key conflicts
// with other applications also using APC.

$loader = new ApcClassLoader('my_prefix', $loader);
$loader->register(true); 
```

问题是`'my_prefix'`每个版本都不是唯一的，因此它最终会尝试查找属于以前版本的缓存文件，这些文件可能存在也可能不存在。这显然是一个非常大的问题！

什么是最好的解决方案？我是否应该以某种方式编写一个 capifony 将在部署之前运行的任务，将前缀更改为独特的东西，例如`#{latest_release}`变量？还是我应该在每次部署后以某种方式重置 APC 缓存的全部内容？

我不太确定做这些事情的最佳方法，所以如果你推荐其中一个，你能指出我正确的方向来实现它吗？或者有没有我没有想到的替代解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T12:56:15.883

您可以使用[ApcBundle](https://github.com/ornicar/ApcBundle)，它提供了一个命令，该命令将在目录中创建新文件，`web/`通过 HTTP 执行它，然后将其删除。然后，您可以`run "/path/to/app/console apc:clear"`在部署脚本中使用您的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:39:56.507

您可以尝试清除 APC 缓存。

最简单的方法是重新启动 Apache。

您还可以编写一个 PHP 脚本来执行此操作：

```
<?php
apc_clear_cache(); 
```

看：

[优雅的 Apache 重启会清除 APC 吗？](https://stackoverflow.com/questions/2785533/does-a-graceful-apache-restart-clear-apc)

[http://php.net/manual/en/function.apc-clear-cache.php](http://php.net/manual/en/function.apc-clear-cache.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-27T06:29:05.563

另一个可能更简单的解决方案是在发布过程中简单地构建一个类映射文件，而不是使用 APC 作为类映射。我一直无法追查原因（无论如何），但我发现即使在部署新版本后清除 apc 用户缓存，旧版本仍然会污染缓存。（我不确定如何，因为我使用了theunraveler建议的方法来清除，并且我在将符号链接更新到新版本之后这样做，因此不应再访问旧文件，但它仍然会发生。编辑：弄清楚为什么会发生这种情况。见[https://stackoverflow.com/a/22680064/160565](https://stackoverflow.com/a/22680064/160565)）

无论如何，我最终只是切换到使用 Composer 转储自动加载器文件，如“使用 Composer 的类映射功能”部分所述：http: [//symfony.com/doc/current/book/performance.html](http://symfony.com/doc/current/book/performance.html)

基本上你需要从 app.php 中删除 ApcClassLoader 的东西，然后将这一行添加到你的部署中：

```
php composer.phar dump-autoload --optimize 
```

我不确定使用类映射文件与使用 APC 直接缓存类位置的效率如何，但它似乎对性能没有明显影响。与手动扫描文件系统进行每次查找相比，任何一个显然都是一个显着的提升。

编辑：另外，如果您在部署新版本后确实采取了清除 APC 缓存的方法，请确保您还清除了 php 的 realpath 缓存（或禁用它），[如此处所述](https://stackoverflow.com/a/23419954/160565)。否则 php 将在缓存被清除后继续访问旧版本中的文件，这将导致使用错误的路径重新填充它。

事实上，在发布时清除 php 的 realpath 缓存（或禁用它）是个好主意，因为否则项目中的任何非 php 文件都将与 php 文件不同步，直到缓存过期。

# php - 在日期和时间之间添加文本 - PHP

> ID：12858038
> 
> 赞同：22
> 
> 时间：2012-10-12T11:26:23.007
> 
> 标签：php, datetime

是否可以在 PHP 中的日期和时间之间添加文本？

```
<?php
echo date();
?> 
```

这将创建 (07-06-2014 00:00)
但我想要 (07-06-2014 在 00:00 小时)。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-12T11:29:13.423

源自您提供的有点晚的示例

```
echo date('d-m-Y \a\t H:i:s') . ' hours'; 
```

一定要使用给定的确切语法！使用双引号`"`而不是单引号`'`将导致您获得一个选项卡`\t`，您不需要使用`\\a\\t`正确的语法，如下例所示：

```
echo date("d-m-Y \\a\\t H:i:s") . ' hours'; 
```

这是由于 php 引用的工作方式与日期格式无关，其中的内容`'`不会被转义`"`，所以如果您使用，请`"`务必使用双反斜杠`\\`。

如果它是一个日期时间对象

```
echo $datetime->format('d-m-Y \a\t H:i:s') . ' hours'; 
```

如果您已经将它作为字符串

```
echo str_replace(' ', ' at ', $datetime) . ' hours'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-12T11:30:20.150

是的你可以。

```
$date=date("m-d-Y");
$time=date("H:i:s");
$display=$date.'at'.$time; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-16T21:44:07.100

\a\t 对我不起作用，但`\\a\\t`效果很好

`date("d-m-Y \\a\\t H:i");`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-10T23:10:57.300

奇怪的是我想把

`date("l the jS F Y");`

阅读例如 2017 年 1 月 9 日星期一，但我得到了“2017 年 1 月 9 日星期一 3106UTC”。我从 xception 中阅读了上面的答案并将其更改为`date("l \t\h\e jS F Y")`，这给了我“2017 年 1 月 9 日星期一”，所以我阅读了 rybo111 的评论并将其更改为`date("l \t\\h\\e jS F Y")`，它仍然无法正常工作，因为我现在得到了“1 月 9 日星期一” 2017”。

经过一番摸索后，我发现如果单词中的字母也构成 date() 函数的一部分，例如 t = 给定月份中的天数，则需要对它们进行双重转义，否则一次转义就足够了. 因此，为什么需要对“at”进行编码`\a\\t`，而将“the”编码为`\\t\\h\\e`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T11:31:43.577

首先请将给定的日期以 ISO 格式输入以便`strtotime()`读取，然后使用`date()`函数相应地格式化日期。

```
date('/*DATE FORMAT YOU WANTED*/', strtotime('/*ISO FORMATTED DATE*/')); 
```

# javascript - jQuery - 字符串上的文本替换

> ID：12858040
> 
> 赞同：0
> 
> 时间：2012-10-12T11:26:28.637
> 
> 标签：javascript, jquery

我有检查所有复选框并添加或删除检查状态的代码（这部分正在工作）。单击此功能从“全选”到“取消全选”时，我需要更改文本。全选按钮：

```
<a class="zute_strane_izmena_selektuj_sve">Select All</a> 
```

jQuery代码：

```
var selektuj_sve = $('.zute_strane_izmena_selektuj_sve'),
slike = $('.zuta_strana_trenutne_slike'),
box = slike.find(':checkbox');

selektuj_sve.on('click', function(){
    box.attr('checked', !box.is(':checked'));
}); 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:31:21.613

这应该有效。

```
selektuj_sve.on('click', function() {
    $(this).text(box.is(':checked') ? 'Deselect All' : 'Select All');
    box.attr('checked', !box.is(':checked'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:30:22.930

trt这个：

```
selektuj_sve.on('click', function(){
    box.attr('checked', !box.is(':checked'));
    $(this).html('De-select All'); // u can use text() instead of html().. this changes the  text inside to  deselectAll...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:29:51.957

```
selektuj_sve.on('click', function(){
    box.attr('checked', !box.is(':checked'));
    $(this).text('De-select All');
}); 
```

# java - int 0801 "超出范围"

> ID：12858043
> 
> 赞同：1
> 
> 时间：2012-10-12T11:26:53.177
> 
> 标签：java, eclipse, int

好的，所以我有一个包含如下信息的枚举类：

```
...
_08_01(811, "08_01"),
.... 
```

我想将 int 811 更改为 0801 以匹配枚举，但​​是当我这样做时，eclipse 会抛出一个错误说：

```
The literal 0801 of type int is out of range 
```

我无法弄清楚它超出了范围，因为它绝对不是 int 范围。谁能帮我理解为什么会抛出这个？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:28:57.310

以 0 开头的数字是八进制数，不能在其中使用数字“8”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:28:29.990

文字 0801 是八进制（前面的 0 表示）。这意味着那里不允许有 8 个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:28:38.743

以 0 开头的整数被视为八进制（不是十进制）

# c - 如何将系统符号传递给 char*

> ID：12858044
> 
> 赞同：-4
> 
> 时间：2012-10-12T11:26:53.220
> 
> 标签：c

我有以下代码：

```
char* id = someFunction();
if (id == "0x01") {
    id = ....
} 
```

所以，我基本上需要的是检查，如果在`id`变量中我有字符串值“0x01”，如果是，那么传递`{0x01, 0x00}`系统符号而不是它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:28:14.653

使用[`strcmp()`](http://en.cppreference.com/w/cpp/string/byte/strcmp).

此功能可用于`string.h`

```
Example:

printf( "Enter your name: " );
scanf( "%s", name );
if( strcmp( name, "Mary" ) == 0 )
  printf( "Hello, Dr. Mary!\n" ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:28:41.143

如果这是 C++，请使用`std::string`. 否则，用于`strcmp`比较。

**C/C++ 不是一种语言**。除非确实有必要，否则请停止使用这两个标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T11:28:45.230

开始使用`std::string`，您将不会遇到这样的事情：

```
std::string id = someFunction();
if (id == "0x01") {
    id = "0x00";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T11:28:31.737

你需要使用`strcmp`. 或者它更安全的对应物`strncmp`。

像这样的东西：

```
if (!strncmp(id, "0x01", 10)) {
    // they're equal!
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T11:28:40.803

您**不能**将字符串与`==`.

根据您的操作系统等，您可以使用`std::string`C`strcmp()`函数

DavidRF 评论说您**可以**将字符串与 进行比较`==`，他是 100% 正确的。

```
printf("%s\n", ((char *)"hello" == (char *)"hello") ? "yes" : "no") 
```

使用`==`是比较指针。如果指针相等，则您知道字符串相等。您可以使用它来短路整个字符串比较（尽管它试图比编译器更聪明 - 一个好的`strcmp`已经有这个检查了）。如果指针不相等，那么您对它们指向的字符串一无所知（它们仍然可能相等）。

上面的具体`printf`示例真的很糟糕：我最近没有阅读 C 标准，但如果内存服务正确，将文字放入表中是编译器特定的行为。更糟糕的是，我敢打赌这取决于编译器选项（优化级别等）。该行可能在调试模式下工作，然后在发布模式下给出不同的结果 - 这永远不会好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T11:28:47.170

您需要使用该`strcmp()`函数来比较字符串：

```
if (strcmp(id,"0x01") ==0) {
   // match found. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T11:29:26.230

如果这是 C 你想要[strcmp](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)函数：

```
if (!strcmp(id, "0x01")) {
    // Do the id == "0x01" code
}
else {
    // Do the id != "0x01" code
} 
```

`strcmp()`返回一个整数值，指示字符串之间的关系：

1.  零值表示两个字符串相等。
2.  大于零的值表示第一个不匹配的字符在 str1 (id) 中的值大于在 str2 ("0x01") 中的值
3.  小于零的值表示相反。

# html - 如何在 Cordova 应用程序中添加页面

> ID：12858050
> 
> 赞同：6
> 
> 时间：2012-10-12T11:27:14.560
> 
> 标签：html, cordova

这可能是我问过的最菜鸟问题，我需要为我的公司创建一个移动应用程序，我开始使用 Cordova 1.9，并在 windows phone 的 Visual Studio Express Edition 中进行开发。对于那些不知道这仅使用 html5、CSS、javascript 和一些 jquerymobile 的外观和感觉的人。我已经用谷歌搜索了我的头发，但没有答案，所以也许在这里我可以得到它！

如何将 html 页面添加到 cordova 应用程序？在我按下一个按钮后，它应该转到一个新页面，然后从那里开始。如果有另一种方法来启动一个新页面，请帮助，即使它带有指向另一个站点的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:41:18.477

你不能简单地通过 JQM 按钮来做到这一点吗？例如`<a href="page.html" data-role="button">Button</a>` 或与 `$.mobile.changePage( "page.html", { transition: "slideup"} );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:34:54.173

您可以通过添加页面来指定您的意思吗？

jQuery Mobile 的工作方式是拦截您的 HTML 链接并通过 AJAX 导航到这些页面。您也应该能够以这种方式加载外部页面 - 您唯一需要设置的是[`$.support.cors`](http://jquerymobile.com/test/docs/pages/phonegap.html)，因此您可以对这些页面进行跨域请求。

# mysql - 驯服一个怪物 MySQL 查询

> ID：12858051
> 
> 赞同：3
> 
> 时间：2012-10-12T11:27:17.133
> 
> 标签：mysql, cakephp

因此，在善良的 SO 用户的一点帮助下，我最终得到了一个逻辑上正确的 MySQL 查询，用于我正在处理的一项任务：为用户允许的新闻项目检索一个按时间顺序排列的 id 列表，使用某些类型的分组项目过滤到该组的单个代表。（呸！）

剩下的明显问题是这个查询非常笨拙和缓慢 - 根据 CakePHP 的数据库调用调试打印输出，调整到 145000 毫秒，哎呀。

有没有一种明智的方法来驯服像这样的野兽，或者我应该承认我在这里咬得比我能咀嚼的更多，并寻找一种不那么笨重的方法来获得或多或少相似的结果？所有建议表示赞赏。

```
 SELECT DISTINCT Uid.id, Uid.type
    FROM (SELECT uids.id id, uids_uids.parent_id parent_id, uids.created date,
                 uids.type type
          FROM uids 
          JOIN uids_uids ON uids_uids.uid_id = uids.id
          JOIN aros_uids ON uids.id = aros_uids.uid_id
          JOIN uids_uids ParentUids ON uids_uids.parent_id = ParentUids.uid_id
          WHERE uids.type IN ('Document','Photo','Release','PreRelease',
                              'ArtworkResource','Event') 
            AND (uids.start_date IS NULL OR uids.start_date <= NOW())
            AND (uids.end_date IS NULL OR uids.end_date <= NOW())
            AND aros_uids.aro_id IN (3,2,86,1448)
          ) Uid
    JOIN (SELECT uids_uids.parent_id parent_id, MAX(uids.created) maxdate
          FROM uids JOIN uids_uids
          ON uids_uids.uid_id = uids.id
          GROUP BY uids_uids.parent_id, uids.type) T2
    ON Uid.parent_id = T2.parent_id AND Uid.date = T2.maxdate
    ORDER BY Uid.date DESC
    LIMIT 100 
```

**预计到达时间：**

好的，作为第一遍，我将这些子选择转换为视图，所以现在查询看起来更易于管理

```
 SELECT DISTINCT Uid.id, Uid.type
    FROM UidView Uid
    JOIN UidView2 T2
    ON Uid.parent_id = T2.parent_id AND Uid.date = T2.maxdate
    WHERE Uid.aro_id IN (3,2,86,1448)
    ORDER BY Uid.date DESC
    LIMIT 100 
```

这肯定有帮助，将 Cake 的估计查询时间（毫秒）从六位数减少到 2500 左右。绝对是一个好的开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:07:34.727

这是我会尝试的：

获取每个派生查询并`EXPLAIN`分别针对每个查询运行。正如评论所建议的，检查任何缺少索引的行并在需要时添加。发布您的`EXPLAIN`结果以获得任何帮助。所以

```
EXPLAIN SELECT uids.id id, uids_uids.parent_id parent_id, uids.created date, ....
EXPLAIN SELECT uids_uids.parent_id parent_id, MAX(uids.created) maxdate .... 
```

如果添加索引没有帮助或帮助很大，那么首先将每个子查询放入临时表并对其应用索引：

```
CREATE TABLE temp_uid
SELECT uids.id id, uids_uids.parent_id parent_id, uids.created date,
             uids.type type
      FROM uids 
      JOIN uids_uids ON uids_uids.uid_id = uids.id
      JOIN aros_uids ON uids.id = aros_uids.uid_id
      JOIN uids_uids ParentUids ON uids_uids.parent_id = ParentUids.uid_id
      WHERE uids.type IN ('Document','Photo','Release','PreRelease',
                          'ArtworkResource','Event') 
        AND (uids.start_date IS NULL OR uids.start_date <= NOW())
        AND (uids.end_date IS NULL OR uids.end_date <= NOW())
        AND aros_uids.aro_id IN (3,2,86,1448);

CREATE TABLE temp_t2
SELECT uids_uids.parent_id parent_id, MAX(uids.created) maxdate
      FROM uids JOIN uids_uids
      ON uids_uids.uid_id = uids.id
      GROUP BY uids_uids.parent_id, uids.type; 
```

在`JOIN`那些桌子上：

```
SELECT DISTINCT Uid.id, Uid.type
FROM temp_uid AS Uid
JOIN temp_t2 AS T2 ON Uid.parent_id = T2.parent_id AND Uid.date = T2.maxdate
ORDER BY Uid.date DESC
LIMIT 100; 
```

正如我所提到的，您可能必须添加索引，并且可能需要添加到临时表中的这些列：

```
ALTER TABLE temp_uid ADD INDEX parentDateIdx (parent_id, Uid.date);
ALTER TABLE temp_t2 ADD INDEX parentMaxDateIdx (parent_id, maxdate); 
```

如果您需要刷新临时表，只需截断它们并对它们执行`INSERT INTO temp_uid...SELECT`and `INSERT INTO temp_t2...SELECT`，而不是`CREATE...SELECT`. 存储过程对此非常有用。

顺便说一句，按照我对每个临时表所做的方式执行 a`CREATE TABLE temp_t2...SELECT`可能不会创建最佳表结构，因此最好稍后修改创建或从头开始自己做。

# excel - 将当前工作簿分配给 Excel 中的工作簿对象

> ID：12858052
> 
> 赞同：0
> 
> 时间：2012-10-12T11:27:17.327
> 
> 标签：excel, excel-2010, vba

我试图将当前工作簿分配给工作簿对象：

```
Dim wb As Workbook, ws As Worksheet, rng As Range

wb = ThisWorkbook 
```

在这种情况下，代码正在其中运行并且是当前活动的工作簿。但是我收到以下错误，我哪里出错了：

`91 - Object variable or With block variable not set`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:59:44.730

将对象分配给变量时，您必须使用`Set`

```
Set wb =ThisWorkbook 
```

# css - 将像素转换为大显示器的百分比

> ID：12858058
> 
> 赞同：1
> 
> 时间：2012-10-12T11:27:36.050
> 
> 标签：css, width

我开发了一个宽度为 1000 像素的网页。但它在大显示器中看起来非常小（我们有 2560x1600 显示器）。我的问题是

1.  如何使用百分比而不是像素将（或任何）网站转换为大屏幕？
2.  像素到百分比的任何转换方法？

我试过 width: 100%,.... 但它并不适合所有人（填充，边距，行高，...）

有什么建议么？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:45:08.637

您是否尝试过媒体查询？

查看：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

您可以根据页面中的元素大小检测屏幕大小（或大小间隔）并对其应用不同的 CSS。

# c# - Telerik RadGrid 双击编辑事件在服务器上不起作用但在本地

> ID：12858060
> 
> 赞同：1
> 
> 时间：2012-10-12T11:27:46.680
> 
> 标签：c#, asp.net, telerik, radgrid

我有这个网站，我和一个团队一直在努力，我遇到同样的问题已经有一段时间了。在几页上，我使用的是 Telerik RadGrid，并且行（位于 RadCodeBlock 中）上有一个双击事件函数，当我在我自己的机器上运行它时它可以工作。但是当我从服务器上运行它时它似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:26:08.133

由于您没有提供任何代码，因此很难为您提供帮助。我仍然会通过显示我正在使用的代码来帮助您：

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        RadGrid1.ClientSettings.ClientEvents.OnRowDblClick = "RadGrid_RowDblClick";
    } 
```

.aspx 文件：

```
<telerik:RadScriptBlock ID="scriptBlock" runat="server">
    <script type="text/javascript">
        function RadGrid_RowDblClick(sender, eventArgs) {
            editedRow = eventArgs.get_itemIndexHierarchical();
            $find("<%= RadGrid1.MasterTableView.ClientID %>").editItem(editedRow);
        }
    </script>
</telerik:RadScriptBlock> 
```

我也知道我过去在使用时遇到过问题，`RadCodeBlock`我建议您`RadScriptBlock`改用。[正如这里](http://www.telerik.com/help/aspnet-ajax/ajax-radscriptblock-radcodeblock.html)所讨论的，`RadCodeBlock`可能会干扰您的`RadAjaxManager`.

# c# - 序列化 HttpContext 对象以存储在数据库中

> ID：12858064
> 
> 赞同：1
> 
> 时间：2012-10-12T11:27:56.907
> 
> 标签：c#, asp.net-mvc-3, serialization, httpcontext

我们有一个 C# ASP.Net MVC 网站。我想将`HttpContext.Current.Request`对象中包含的所有内容存储在 SQL Server 的表中以供以后分析。

我尝试将对象序列化为字节数组，然后将其存储在 SQL Server 中的二进制字段中，但是序列化程序不会序列化`HttpContext`对象，因为它没有被标记`Serializable`。

有没有办法将 System.Web 类标记为可序列化？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:37:18.433

对于生产代码，我不相信您可以更改 HttpContext 的序列化方面。如果这是非生产，您可以尝试使用 Reflector 和一些插件之类的工具修改程序集以插入 Serializable 属性（但这也可能需要在子类上完成）。

可能更简单的选择是使用反射来枚举所有公共和私有字段。您可以将简单类型转换为它们的字符串表示形式，并在稍微复杂的类上递归。您甚至可以找到一个工具来执行此操作，这个想法可能会被称为询问对象图查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:34:14.853

我建议不要存储整个请求，会有太多噪音。

而是选择您想要的信号。即专门记录您感兴趣的内容，例如特定变量。

# matlab - 需要帮助设置 matlab 以访问外部 c++ 编译器

> ID：12858067
> 
> 赞同：2
> 
> 时间：2012-10-12T11:28:01.503
> 
> 标签：matlab, visual-c++, mex, sift, winapi

我目前正在关注 SIFTGPU matlab 教程，并被困在这个非常早期的部分：

> SIFTGPU 用 C++ 编码，必须保存为 .mex（matlab 外部）文件，然后才能从 Matlab 调用。为了创建 .mex 文件，您必须确保 Matlab 设置为通过输入来访问外部 C++ 编译器
> 
> 墨西哥 - 设置
> 
> 进入 Matlab 命令窗口并按照屏幕上的说明进行操作。

因为我没有 Visual C++ express 2010 和 Windows SDK，所以我按照[http://www.mathworks.com/support/compilers/R2011a/win64.html上的说明进行操作](http://www.mathworks.com/support/compilers/R2011a/win64.html)

这两个软件的安装都很好，但是，当涉及到 matlab 时：

```
>> mex -setup

Welcome to mex -setup.  This utility will help you set up  
a default compiler.  For a list of supported compilers, see  
http://www.mathworks.com/support/compilers/R2011a/win64.html 

Please choose your compiler for building MEX-files: 

Would you like mex to locate installed compilers [y]/n? y

Select a compiler: 
[1] Microsoft Visual C++ 2010 Express in D:\VS2010 

[0] None 

Compiler: 1

Please verify your choices: 

Compiler: Microsoft Visual C++ 2010 Express  
Location: D:\VS2010 

Are these correct [y]/n? y

***************************************************************************** 
  Error: Microsoft Visual C++ 2010 Express requires the Microsoft Windows 
         Software Development Kit (SDK), but the SDK cannot be found.  
         For more information about the required SDK, see:  
         http://www.mathworks.com/support/compilers/R2011a/win64.html 
***************************************************************************** 

??? Error using ==> mex at 208
Unable to complete successfully. 
```

我不确定下一步该去哪里。有人可以告诉我在安装 VC++ Express 2010 和 Windows SDK 之后我需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:42:24.810

不要安装 Visual Studio Express。安装[Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279) - 它带有一个编译器，并且该设置适用于 MATLAB。Visual Studio 对我也不起作用，因为您需要运行以设置环境的批处理文件存在一些问题。

**编辑**这是安装 SDK 后的 mex 配置屏幕：

> 墨西哥 - 设置
> 
> 欢迎使用 mex -setup。此实用程序将帮助您设置
> 默认编译器。有关支持的编译器列表，请参阅
> [http://www.mathworks.com/support/compilers/R2012a/win64.html](http://www.mathworks.com/support/compilers/R2012a/win64.html)
> 
> 请选择您的编译器来构建 MEX 文件：
> 
> 您希望 mex 找到已安装的编译器 [y]/n 吗？是的
> 
> 选择编译器：
> 
> [1] C:\Program Files (x86)\Microsoft Visual Studio 10.0 中的 Microsoft 软件开发工具包 (SDK) 7.1
> 
> [0] 无
> 
> 编译器：

# javascript - On Key Up 与 On Change with AJAX 查询：哪个更好？

> ID：12858069
> 
> 赞同：2
> 
> 时间：2012-10-12T11:28:08.743
> 
> 标签：javascript, php, jquery, ajax, javascript-events

我将 POST 数据从文本框发送到 PHP 页面进行处理。AJAX 不是用户单击保存按钮，而是用于文本框事件。

我在使用 onChange 或 onKeyUp 之间纠结。

OnKeyUp 需要在服务器上进行更多处理，因为每次按键我的脚本都必须访问数据库并进行更改。服务器性能可能是一个问题。

OnChange 是首选，因为它仅在用户完成该框时才发送更改。但是，存在一个问题，如果用户不取消选择文本框，则不会发生“onChange”事件，因此不会保存更改。

哪个最好？或者有没有办法在用户不取消选择框的情况下强制执行“onChange”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:35:59.820

在什么情况下用户不会模糊文本框，导致 AJAX 不发生？

一种可能的解决方案是为 keyDown 和 keyUp 设置超时，以便在一段时间没有输入之后，AJAX 将触发，类似于这些行。这可能有一个错误，如果您在该文本框运行之前开始输入另一个文本框，它可能不会更新文本框`$.ajax`，但您应该能够理解

```
var key_is_down = false,
    key_timeout;

$(el).on('keyDown', function () {
    key_is_down = true;
}).on('keyUp', function () {
    key_is_down = false;
    key_timeout = setTimeout(function(){ runAjax($(this)); }, 2500);
});

function runAjax ($el) {
    if (key_is_down) {
        key_timeout = setTimeout(function(){ runAjax($el); }, 2500);
    } else {
        // $.ajax...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:39:06.047

你甚至可以使用 KeyUp 按下 ajax 调用，怎么样？只需在 keyUp 事件上添加 delayKeyUp 函数，并且 delayKeyUp 函数具有 setTimeout 方法，这将真正帮助您解决服务器处理问题，

**注意：**这一次只适用于一种方法。

前任。代码：

**更新：**

```
$("selector").live('keyup', function(e) { //if jquery v1.7 or more then you can use .on event instead of .live
    delayKeyUp(function(){ ---Your Server Call Stuff -----}, 350); //delay of 350ms.
    return false;
});

var delayKeyUp = (function(){
     var timer = 0;
     return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
     };
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:51:56.470

```
window.page_loaded = new Date();
$('text_field').bind('keyup', function(){
    var timeout_seconds = 10;

    var last_check = $(this).data('last_checked');
    last_check = last_check ? last_check : window.page_loaded;
    var curr_time = new Date();
    curr_time = new Date(curr_time.getTime() - (timeout_seconds * 1000));
    if(last_check < curr_time){
        //now do the checking
    }
}); 
```

# c# - c# interop.excel 保存时不检查兼容性

> ID：12858072
> 
> 赞同：0
> 
> 时间：2012-10-12T11:28:15.797
> 
> 标签：c#, .net, excel, excel-interop

> **可能重复：**
> [如何在通过 c# 自动化时禁用 excel 中的兼容性检查](https://stackoverflow.com/questions/8879082/how-to-disable-compatibility-check-in-excel-while-automating-through-c-sharp)

我使用 Microsoft.Office.Interop.Excel；我尝试使用以下代码保存兼容 97-2003 的 XLS：

```
 private void CreationFichier(_Worksheet template, int nom)
    {
        _Workbook fichierCree = _excel.Workbooks.Add();
        fichierCree.DoNotPromptForConvert = true;
        fichierCree.CheckCompatibility = false;

        var feuilleActiveClasseurCree = (_Worksheet)fichierCree.Sheets[1];
        string nomFichier = (nom - 4).ToString() + ".xls";
        label3.Text = "Creation du fichier "+nomFichier+" ...";
        progressBar1.Value++;
        template.Copy(feuilleActiveClasseurCree);

        fichierCree.SaveAs(_folderdestination.SelectedPath + "\\" + nomFichier, XlFileFormat.xlExcel8);
        fichierCree.Close();
    } 
```

但这会创建一个用于检查兼容性的弹出窗口 - 我不想要这个弹出窗口。

# objective-c - 在同一行代码上生成两个随机数？

> ID：12858074
> 
> 赞同：0
> 
> 时间：2012-10-12T11:28:16.937
> 
> 标签：objective-c, random, inline, arc4random

在用随机数做一些 iOS 东西时，我偶然发现了一个非常令人惊讶的问题。

比较这些：

一个）

```
int xOffsetSign = randomIntWithUpperLimit(2) ? 1:-1;
int yOffsetSign = randomIntWithUpperLimit(2) ? 1:-1;
int xOffset = randomIntWithUpperLimit(50) * xOffsetSign;
int yOffset = randomIntWithUpperLimit(50) * yOffsetSign; 
```

b)

```
int xOffset = randomIntWithUpperLimit(50) * randomIntWithUpperLimit(2) ? 1:-1;
int yOffset = randomIntWithUpperLimit(50) * randomIntWithUpperLimit(2) ? 1:-1; 
```

这是随机函数：

```
static inline int randomIntWithUpperLimit(unsigned int upperLimit) {
    return arc4random_uniform(upperLimit);
} 
```

在我看来，a) 和 b) 都应该产生 [-49,49] 范围内的随机数。但是，只有 a) 有效。b) 只产生 [-1, 1] 范围内的数字。

似乎每个调用的第二个随机部分首先得到解决，被缓存，然后再用于该行的第一部分，无论上限如何。

有人可以解释并澄清为什么 b) 不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:30:26.043

这是一个优先级问题。

```
int yOffset = randomIntWithUpperLimit(50) * randomIntWithUpperLimit(2) ? 1 : -1; 
```

是相同的

```
int yOffset = (randomIntWithUpperLimit(50) * randomIntWithUpperLimit(2)) ? 1 : -1; 
```

这是一个经常出现的问题，以至于许多编码标准都需要在`?:`结构周围加上括号。用这个：

```
int yOffset = randomIntWithUpperLimit(50) * (randomIntWithUpperLimit(2) ? 1 : -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:31:40.190

这与运算符关联性和优先级有关。发生的事情是您正在评估两个随机数，然后在 -1 和 1 之间进行选择。

你可能想要这样的 B：

```
int xOffset = randomIntWithUpperLimit(50) * (randomIntWithUpperLimit(2) ? 1:-1);
int yOffset = randomIntWithUpperLimit(50) * (randomIntWithUpperLimit(2) ? 1:-1); 
```

这将确保您在 1 和 -1 之间进行选择，然后将其乘以 0 到 49 范围内的随机数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T11:31:56.807

运算符的优先级`?:`低于`*`运算符

像这样使用括号

```
randomIntWithUpperLimit(50) * (randomIntWithUpperLimit(2) ? 1:-1); 
```

# c - '&'标记之前的dev c堆栈语法错误

> ID：12858094
> 
> 赞同：2
> 
> 时间：2012-10-12T11:29:12.330
> 
> 标签：c

我一直在尝试用 c 在 dev c 上实现一个堆栈，这是我的代码

```
#include <stdio.h>
#include <stdlib.h>
#define stackinitsize 100
#define stackincrement 10

typedef struct {

    char *base;
    char *top;
    int stacksize;

}sqstack,*s;

Status initstack(sqstack &s)
{
    s.base=(char *)malloc(stackinitsize*sizeof(char));   
    if(!s.base) exit(OVERFLOW);

    s.top=s.base;  
    s.stacksize=stackinitsize;

    return OK; 
}

void push(sqstack &s,char e)
{
    if ((s.top-s.base)>=s.stacksize){

        s.base=(char *)realloc(s.base,(s.stacksize+stackincrement)*sizeof(char));
        if(!s.base) exit (OVERFLOW);
        s.top=s.base+s.stacksize;
        s.stacksize+=stackincrement;
   }

   *s.top++=e;
}

int main(int argc, char *argv[])
{
    char e;

    system("PAUSE");    
    return 0;
} 
```

但它一直在说

```
error: syntax error before "s"
error: syntax error before '&' token 
```

但是当我把它放在代码块上编译它时，它说

```
error: expected ';', ',' or ')' before '&' token 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:31:11.267

您似乎正在使用按引用传递，这是 C++ 功能，而不是 C。

`&`当你想声明一个指针被传递时，你不能在 C 中使用`*`（`push`函数也是如此）：

```
Status initstack(sqstack * s)
{
    s->base=(char *)malloc(stackinitsize*sizeof(char));   
    if(!s->base) exit(OVERFLOW);
    s->top=s->base;  
    s->stacksize=stackinitsize;
    return OK; 
} 
```

但是请注意，与 C++ 传递引用不同，您不能通过赋值更改传递给函数的参数到函数之外`s`，只能取消引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:42:21.393

通过引用传递在内部更改为如下

```
Status initstack(sqstack &s)
{
    s.base=(char *)malloc(stackinitsize*sizeof(char));   
    if(!s.base) exit(OVERFLOW);

    s.top=s.base;  
    s.stacksize=stackinitsize;

    return OK; 
```

}

到

```
Status initstack(sqstack *s)
{
    (*s).base=(char *)malloc(stackinitsize*sizeof(char));   
    if(!(*s).base) exit(OVERFLOW);

    (*s).top=(*s).base;  
    (*s).stacksize=stackinitsize;

    return OK; 
} 
```

但这是在 C++ 的情况下，在 c 中没有按引用传递的概念，因此使用指针表示法如下。

```
Status initstack(sqstack * s)
{
    s->base=(char *)malloc(stackinitsize*sizeof(char));   
    if(!s->base) exit(OVERFLOW);

    s->top=s->base; 

    s->stacksize=stackinitsize;
    return OK; 
} 
```

# mysql - percona pt-table-checksum - 等待检查副本是否存在差异

> ID：12858096
> 
> 赞同：3
> 
> 时间：2012-10-12T11:29:15.747
> 
> 标签：mysql, backup, percona

我遇到了 Percona 校验和的问题..

数据库包含大约 70 个表，并且校验和总是卡在同一个表上？

如果表被删除，校验和完成就像它应该没有任何问题..试图清空表 - 同样的问题..

该表存在于从站上，所以这不是问题

我究竟做错了什么？

# 桌子

```
CREATE TABLE IF NOT EXISTS `invoice_send_log` (
  `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `group_id` smallint(5) unsigned NOT NULL,
  `time` int(10) unsigned NOT NULL,
  `invoice_id` smallint(5) unsigned NOT NULL,
  `email` varchar(50) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `group_id` (`group_id`),
  KEY `time` (`time`),
  KEY `invoice_id` (`invoice_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

# 句法

```
pt-table-checksum -h localhost -u root -p password --lock-wait-time=50 --nocheck-replication-filters 
```

# 信息

```
Waiting to check replicas for differences: 0% 00:00 remain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-15T13:16:27.043

万一有人遇到这个，但它在所有从属服务器上 SQL 和 IO 线程都在运行：

就我而言，我已将跳过计数器设置为高值。最好将其设置为零，并在需要时使用 slave-skip-errors 暂时跳过错误。

# java - Java 版本控制（测试版）

> ID：12858102
> 
> 赞同：0
> 
> 时间：2012-10-12T11:29:30.880
> 
> 标签：java

当我输入 java -version 这是我得到的输出：

```
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b07)
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b17, mixed mode) 
```

现在我想知道，-b07 是什么意思？我认为它是一个测试版标记（根据其他来源：[http](http://en.wikipedia.org/wiki/Software_versioning) ://en.wikipedia.org/wiki/Software_versioning ），但我找不到这样说的 Sun/Oracle 参考。

有谁知道在哪里可以找到 Java 版本命名的完整参考？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:32:26.650

是版本号。来自[Oracle 的文档](http://www.oracle.com/technetwork/java/javase/6u17-141447.html)：

> 此更新版本的完整内部版本号为 1.6.0_17-b04（其中“b”表示“构建”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:33:09.410

不，这不是“测试版”标记。这是这个版本的内部版本。您（或我）无需担心。

# java - 如何通过互联网获取地理数据？

> ID：12858103
> 
> 赞同：0
> 
> 时间：2012-10-12T11:29:38.333
> 
> 标签：java, android, android-location

在一个 android 应用程序中，我编写了代码来通过 GPS 或网络获取地理数据，其中一个可以通过它获取数据。这是我的代码，

```
public boolean getLocation(Context context, LocationResult result)
{
    boolean gps_enabled=false;
    LocationManager lm;
    boolean network_enabled=false; 
    this.context = context;
    locationResult=result;
    Toast.makeText( context,"getLocation()",Toast.LENGTH_SHORT).show();
    if(lm == null)
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    try
    {
        gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
    }
    catch(Exception ex){}

    try
    {
        network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    }
    catch(Exception ex){}

    if(!gps_enabled && !network_enabled)
    {
        Toast.makeText(context, "GPS & Network disabled", Toast.LENGTH_SHORT).show();
        return false;
    }
} 
```

使用`LocationManager`检查 GPS 和网络是否打开。

如果 GPS 处于开启状态，则在布尔值 gps_enabled 中分配“真”。

但是在网络上，我已经在 HTC 渴望的安卓设备中激活了 2G 上网，并在移动网络中打开了。

`network_enabled`即使网络处于 On 状态，分配给“false”的布尔变量。

我们是否要更改设备中的设置？或我的代码中有任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:39:55.140

这取决于可用性：

```
Location net_loc=null, gps_loc=null;
if(gps_enabled)
gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
if(network_enabled)
net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

**NETWORK_PROVIDER：**网络位置提供商的名称。该提供商根据手机信号塔和 WiFi 接入点的可用性确定位置。通过网络查找检索结果。需要权限 android.permission.ACCESS_COARSE_LOCATION 或 android.permission.ACCESS_FINE_LOCATION。

**GPS_PROVIDER ：** GPS 位置提供者的名称。该提供商使用卫星确定位置。根据条件，此提供程序可能需要一段时间才能返回位置修复。需要权限 android.permission.ACCESS_FINE_LOCATION。

请参阅此链接：http: [//developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29](http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29)

# android - android 应用程序中带有闪屏的启动顺序

> ID：12858105
> 
> 赞同：0
> 
> 时间：2012-10-12T11:29:40.477
> 
> 标签：android

我必须更改现有的应用程序。我需要让应用程序以在完成各种初始化时显示的初始屏幕启动。（这可能需要一段时间，因此启动画面）

但是我看到的是，在调用应用程序的 onCreate 之前调用了内容提供者的 onCreate。此内容提供者必须依赖在初始化应用程序时加载的数据。

谁能告诉我应用程序启动时采取了哪些步骤？此外，谁能告诉我如何克服这种 catch-22 情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:46:04.230

> 我需要让应用程序以在完成各种初始化时显示的初始屏幕启动。（这可能需要一段时间，因此启动画面）

启动画面[被认为是不良形式](http://android.cyrilmottier.com/?p=632)。允许用户进入某些应用程序，即使您必须阻止某些部分等待某些数据从 Internet 加载。

> 谁能告诉我应用程序启动时采取了哪些步骤？

您的`Application`对象和所有`ContentProvider`实现都是在其他任何事情发生之前创建的（例如，创建活动）。从面向开发人员的代码的角度来看，就是这样——框架本身做了更多的事情，但没有什么会触发我们代码的回调。

> 此外，谁能告诉我如何克服这种 catch-22 情况？

摆脱`ContentProvider`，因为您可能不需要它。

或者，从其方法重写`ContentProvider`为不需要“加载的数据” 。`onCreate()`

或者，重新构建您的应用程序以使用缓存、同步等，这样应用程序就可以在开始时不受限制地启动。作为奖励，这个也可以让你摆脱启动画面。

# tomcat - 如何在 tukey-urlrewrite-filter 中添加一些要处理的 java 代码，而不仅仅是在 xml 中定义的规则

> ID：12858107
> 
> 赞同：0
> 
> 时间：2012-10-12T11:29:44.080
> 
> 标签：tomcat, tomcat6, tuckey-urlrewrite-filter

在 tukey-urlrewrite-filter 中。

如何添加一些要处理的java代码，而不仅仅是xml中定义的规则

我需要捕获一条 SOAP 消息并对其进行修改，然后才能进行进一步处理。这就是为什么我需要编写一些 Java 代码。

# asp.net - javascript在使用ajax的asp.net服务调用中没有传输错误

> ID：12858109
> 
> 赞同：1
> 
> 时间：2012-10-12T11:29:52.867
> 
> 标签：asp.net, visual-studio-2010

当我们使用带有预定义 java 脚本版本 jquery 1.4.1.min.js 的 jquery ajax 调用服务时，它工作正常..

但是当我们将 jquery 更改为 1.7.1.min.js 或 1.8.2.min.js 等最新版本时，它在 Internet Explorer 中显示没有传输错误。

谁能帮我这个。我尝试了堆栈溢出中提到的细节，但我没有![在此处输入图像描述](../Images/19e8b73cb159fe6d8f6608f615a81724.png)

# ios - 设备旋转后保持缩放比例

> ID：12858113
> 
> 赞同：1
> 
> 时间：2012-10-12T11:30:15.500
> 
> 标签：ios, size, zooming, scrollview

我正在使用 viewForZoomingInScrollView 来放大和缩小我的视图。但是在我旋转设备后，原始尺寸会弹回来。旋转后如何保持最后一个尺寸？

另外，除了捏合之外，我还想有一个缩放按钮。有没有办法通过动作触发缩放并捕捉到特定比例？假设只有 0.5 和 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:49:37.597

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, width=device-width, user-scalable=no"> 
```

把它放在标题中

# c++ - 类中的 ifstream

> ID：12858114
> 
> 赞同：0
> 
> 时间：2012-10-12T11:30:18.710
> 
> 标签：c++, ifstream

我不明白发生了什么事。我有这样的代码：

```
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char *argv[])
{
    ifstream infile;
    infile.open("test.txt");
    if(!infile) return 1;
    infile.close();

    return 0;
} 
```

它工作正常。名为“text.txt”的文件不存在。应用程序返回 1。但是当我将相同的代码放入类中时，它会以其他方式工作。这是声明：

```
#pragma once

#include <iostream>
#include <fstream>

using namespace std;

class Record
{
public:
    Record(char *filename);
public:
    ~Record(void);

private:
    ifstream infile;
} 
```

和构造函数：

```
Record::Record(char *filename)
{
    infile.open(filename);

    if(!infile.is_open()) return;
} 
```

似乎“is_open”方法不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:32:30.613

它确实有效。你在期待什么？您正在从构造函数返回，因此构造函数将退出，将创建对象（使用无效成员）并继续执行。

相反，您可以抛出异常来指示无效对象：

```
Record::Record(char *filename)
{
    infile.open(filename);

    if(!infile.is_open()) 
        throw std::exception("file not found");
} 
```

# java - 合并两个正则表达式

> ID：12858116
> 
> 赞同：11
> 
> 时间：2012-10-12T11:30:21.500
> 
> 标签：java, regex

我有两个正则表达式，一个从 csv 字符串中提取用户名，另一个提取电子邮件。

字符串格式是这样的：

```
String s = "name lastname (username) <mail@mail.something.dk>; name lastname (username) <mail@mail.something.dk>; name lastname (username) <mail@mail.something.dk>"; 
```

我的正则表达式的代码是这样的。

```
Pattern pattern = Pattern.compile("(?<=\\()[^\\)]+");
Matcher matcher = pattern.matcher(s);
Pattern pattern2 = Pattern.compile("((?<=<)[^>]+)");
Matcher matcher2 = pattern2.matcher(s);

while (matcher.find() && matcher2.find()) {
    System.out.println(matcher.group() + " " + matcher2.group());
} 
```

我发现了几个关于合并正则表达式的问题，但从答案中我无法弄清楚如何合并我的。

我的打印输出显示：

```
"username mail@mail.com" 
```

我可以使用一个正则表达式从**单个 matcher****打印出相同的内容吗？**

 **obs：这是一项学校作业，这意味着我“不需要”合并它们或再做任何事情，但我想知道这是否可能，以及它会有多难。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T11:47:10.860

您可以`Pipe (|)`在 , 之间使用一个`multiple Regex`来匹配所有这些：-

```
 String s = "name lastname (username) <mail@mail.something.dk>; name lastname
            (username) <mail@mail.something.dk>; name lastname 
            (username) <mail@mail.something.dk>;";

    // Matches (?<=\\()[^\\)]+  or  ((?<=<)[^>]+)
    Pattern pattern = Pattern.compile("(?<=\\()[^\\)]+|((?<=<)[^>]+)");
    Matcher matcher = pattern.matcher(s);

    while (matcher.find()) {
        System.out.println(matcher.group());
    } 
```

**输出**： -

```
username
mail@mail.something.dk
username
mail@mail.something.dk
username
mail@mail.something.dk 
```

**更新**： -

如果要打印`username`并且`email`仅当它们都存在时，则需要拆分字符串`;`，然后在每个字符串上应用以下正则表达式。

这是代码： -

```
 String s = "name lastname (username) ; 
                name lastname (username) <mail@mail.something.dk>; 
                name lastname (username) <mail@mail.something.dk>;";

    String [] strArr = s.split(";");

    for (String str: strArr) {

        Pattern pattern = Pattern.compile("\\(([^\\)]+)(?:\\))\\s(?:\\<)((?<=<)[^>]+)");
        Matcher matcher = pattern.matcher(str);

        while (matcher.find()) {
            System.out.print(matcher.group(1) + " " + matcher.group(2));
        }
        System.out.println();
    } 
```

**输出**： -

```
username mail@mail.something.dk
username mail@mail.something.dk // Only the last two have both username and email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:59:13.200

以下代码将提取您的配对。正则表达式很短，但我几乎可以肯定，有一种更优雅的方式（总是有正则表达式！）。;)

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main {

    public static void main(String[] args) {
        String s = "name1 lastname1 (user1); name2 lastname2 (username2) <mail2@mail.something.dk>; name3 lastname3 (username3) <mail3@mail.something.dk>;";

        Pattern pattern = Pattern.compile("\\(([^\\)]+)\\)\\s<([^>]+)>");
        Matcher matcher = pattern.matcher(s);

        while (matcher.find()) {
            System.out.println(matcher.group(1) + " " + matcher.group(2));
        }
    }
} 
```

输出：

> 用户名2 mail2@mail.something.dk
> 用户名3 mail3@mail.something.dk

正则表达式的解释`"\\(([^\\)]+)\\)\\s<([^>]+)>"`：

*   `\\(([^\\)]+)\\)`：由and`)`括起来的一组非字符`(``)`
*   `\\s`: 中间有空格
*   `<([^>]+)>`：由and`>`括起来的一组非字符`<``>`**

# actionscript-3 - Starling 框架 - 仅适用于游戏？

> ID：12858120
> 
> 赞同：0
> 
> 时间：2012-10-12T11:30:34.513
> 
> 标签：actionscript-3, gpu, stage3d, starling-framework

将在 AS3 中构建这些类型的应用程序，针对使用多点触控的信息亭。

[https://vimeo.com/8869517](https://vimeo.com/8869517)

我了解 Starling 的存在理由是在针对 GPU 时提供抽象层。

我的第一个问题是，将 GPU 用于此类应用程序有什么优势吗？

如果是这样，Starling 框架会是一个不错的选择吗？还是真的只对游戏有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:21:37.710

比如来自[O'Reilly 免费书籍的描述：Introducing Starling - Building GPU Accelerated Applications](http://shop.oreilly.com/product/0636920024217.do)描述：

> Starling 是在 Stage3D API 之上开发的 ActionScript 3 2D 框架（在 Flash Player 11 和 Adob​​e AIR 3 的桌面上可用）。Starling 主要用于游戏开发，但也可用于许多其他用例。Starling 使编写快速 GPU 加速应用程序成为可能，而无需接触低级 Stage3D API。
> 
> 大多数 Flash 开发人员希望能够利用 GPU 加速（通过 Stage3D），而无需编写此类更高级别的框架并深入研究低级别的 Stage3D API。Starling 完全按照 Flash Player API 设计，抽象了 Stage3D (Molehill) 的复杂性，并为每个人提供简单直观的编程。
> 
> 显然，Starling 是为 ActionScript 3 开发人员准备的，尤其是那些参与 2D 游戏开发的开发人员；当然，您需要对 ActionScript 3 有基本的了解。通过它的设计（轻量级、灵活和简单），Starling 也可以用于其他用例，例如 UI 编程。也就是说，一切都被设计为尽可能直观，因此任何 Java™ 或 .Net™ 开发人员也将很快掌握它的窍门。

对于每个 GPU，显然任何基于视觉的运行时*都*可以从硬件加速中受益。

这也取决于您的信息亭的硬件规格。

除了 GPU 之外，还有许多[性能考虑因素](https://stackoverflow.com/questions/8380789/what-are-the-major-performance-hitters-in-as3-aside-from-rendering-vectors/8380883)，例如在您的信息亭应用程序中利用舞台视频。您还应该权衡 Flash Pro 中的创作要求。

# xcode4 - 错误：找不到 -lUAirship-1.3.3 的库

> ID：12858122
> 
> 赞同：2
> 
> 时间：2012-10-12T11:30:43.250
> 
> 标签：xcode4, push-notification, urbanairship.com

为了向我的 iphone 应用程序添加推送通知功能，我使用 Urban Airship，但构建失败并出现以下错误：

ld：未找到 -lUAirship-1.3.3 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T15:37:32.577

IUAirship-1.3.3 需要加载到您的项目中。

将 IUAirship-1.3.3 拖到您的项目中。（请务必勾选选项：将项目复制到目标组的文件夹中）。

还要确保通过以下方式将其链接到您的框架：选择目标，单击常规选项卡（在顶部），滚动到链接的框架和库，单击 + 按钮，添加 IUAirship-1.3.3

清理并构建：接下来在项目菜单下，选择清理。现在尝试构建它。应该找到它。

希望这可以帮助。

# drupal - 如何在 drupal 7 .module 文件中显示任何消息或数据

> ID：12858126
> 
> 赞同：0
> 
> 时间：2012-10-12T11:30:54.433
> 
> 标签：drupal, drupal-7, drupal-modules

如何在 drupal 7 的 mymodule.module 文件中显示任何消息或数据

我使用了以下行，但没有显示任何内容

> drupal_set_message(t('测试消息'));

aslo 我想显示任何变量数据，例如 $data = "hello"

那么如何在drupal 7中显示这个变量数据

我是drupal的新手，所以如果有人知道，请告诉我。

我搜索了很多，但没有得到任何东西。

提前致谢。

* * *

我通过在 drupal 7 中创建模块来使用以下代码

```
 <?php

  function form_example_menu() {
  $items = array();

   $items['form_example/form'] = array( 
        'title' => 'Example Form', //page title
        'description' => 'A form to mess around with.',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('form_example_form'),
        'access arguments' => array('access content'), //put the name of the form here
        'access callback' => TRUE
     );

    return $items;
  }

   function form_example_form($form, &$form_state) {

    $form['price'] = array(
         '#type' => 'textfield', 
         '#title' => 'What is Your Price?',
         '#size' => 10,
         '#maxlength' => 10,
         '#required' => TRUE, //make this field required
         );

        $form['submit'] = array(
         '#type' => 'submit',
         '#value' => t('Click Here!'),
       );

    $form['form_example_form']['#submit'][] = 'form_example_form_submit'; 
    return $form;

    }

  function form_example_form_validate(&$form, &$form_state) {

 if (!($form_state['values']['price'] > 0)){
    form_set_error('price', t('Price must be a positive number.'));
  }
 }

  function form_example_form_submit($form, &$form_state) {

       $result = db_insert('test')->fields(array('price' => $form_state['values']['price'],))->execute();
      drupal_set_message(t('Your Price was saved')); 

  } 
```

在上面的代码中，数据被插入到数据库中，但没有显示消息。如果你知道，有什么问题请告诉我，我已经搜索了很多这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:44:56.227

以下是在消息中显示某些数据的正确方法：

```
drupal_set_message(t('test message: !data', array('!data' => $data))); 
```

至于未显示的消息，如果您的站点上确实显示了其他消息，则听起来您的功能没有执行。我需要有关您尝试做什么（包括所涉及的代码）来调试它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T10:37:15.983

Drupal 7 中也提供了函数看门狗

以下是如何使用它的示例：

```
watchdog('MyModule', '<pre>'. print_r($variable, TRUE) .'</pre>', array(), WATCHDOG_INFO, NULL); 
```

如果核心模块“数据库日志记录”已激活，您可以在报告 -> 最近的日志消息 (admin/reports/dblog) 中查看日志。

# php - 插入数据库 MAX(field)+1

> ID：12858127
> 
> 赞同：0
> 
> 时间：2012-10-12T11:30:57.837
> 
> 标签：php, sql

我正在尝试将一些值插入数据库，我需要插入的值之一是；-`MAX(FixedFareID)+1`

如下：

```
public function fixed($fieldDay) {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    $this->sql = "INSERT INTO tblfixedfare VALUES (NULL, MAX(FixedFareID)+1, '1', '$fieldDay')"; 
```

显然，这是行不通的，但我不确定如何将 MAX(FixedFareID)+1 值插入数据库。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:32:43.300

```
INSERT INTO tblfixedfare 
select NULL, MAX(FixedFareID)+1, '1', '$fieldDay' from tblfixedfare 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:32:34.700

最好的方法是使用`auto_increment`列（语法取决于您的 SQL 引擎）或使用序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:32:52.737

使用子查询：

```
$this->sql = 
  "INSERT INTO tblfixedfare 
  VALUES (NULL, (SELECT MAX(FixedFareID)+1 FROM tblfixedfare), '1', '$fieldDay'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:33:05.327

你这样做是不对的。您需要一个子选择`MAX()`：

```
(SELECT MAX(FixedFareID)+1 FROM tblfixedfare) 
```

或者，这可能更好更快，切换您`FixedFareID`使用`auto increment`的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T11:33:07.147

如果您没有自动增量字段，则可以使用以下内容：

```
INSERT INTO tblfixedfare 
SELECT NULL, MAX(FixedFareID)+1, '1', '$fieldDay'
FROM tblfixedfare 
```

所以你的代码是：

```
public function fixed($fieldDay) {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    $this->sql = "INSERT INTO tblfixedfare SELECT NULL, MAX(FixedFareID)+1, '1', '$fieldDay' FROM tblfixedfare"; 
```

# html - 跳过有序列表项编号

> ID：12858130
> 
> 赞同：18
> 
> 时间：2012-10-12T11:31:08.320
> 
> 标签：html, css, list, html-lists

我有一个有序列表，我想跳过特定项目的数字输出。

传统输出：

```
1\. List item
2\. List item
3\. List item
4\. List item
5\. List item 
```

期望的输出：

```
1\. List item
2\. List item
   Skipped list item
3\. List item
4\. List item
5\. List item 
```

这在 CSS 中可以实现吗？我发现了一个我以前不知道的[`<ol>`“开始”属性](http://www.w3schools.com/tags/att_ol_start.asp)，但似乎对我没有帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-12T13:25:24.590

最简单的方法是从要跳过的项目中删除列表标记，并使用[属性设置下一个项目](http://www.w3.org/TR/REC-html40/struct/lists.html#adef-value-LI)[的`value`](http://www.w3.org/TR/REC-html40/struct/lists.html#adef-value-LI)编号（在 HTML5 中不会被弃用/废弃）。例子：

```
<ol>
<li>List item
<li>List item
<li style="list-style-type: none">List item
<li value=3>List item
<li>List item
</ol> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-12T11:38:46.187

另一种选择是使用 CSS3 计数器：**[demo](http://jsfiddle.net/gionaf/gPLwf/)**

HTML

```
<ul>
<li>One</li>
<li>Two</li>
<li class="skip">Skip</li>
<li>Three</li>
<li>Four</li>
</ul>​ 
```

CSS

```
ul {
    counter-reset:yourCounter;
}
ul li:not(.skip) {
    counter-increment:yourCounter;
    list-style:none;
}
ul li:not(.skip):before {
    content:counter(yourCounter) ".";
}
ul li.skip:before {
    content:"\a0\a0\a0"; /* some white-space... optional */
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-21T10:15:46.567

现在很简单。

只需将以下内容添加到类 .skip 中，其中 .skip 用于跳过的列表项：

```
ol li.skip {
    list-style-type:none;
    counter-increment:none;
} 
```

在 HTML 中它将是：

```
<ol>
  <li>first list item</li>
  <li class="skip">2nd list item</li>
  <li>third list item</li>
</ol> 
```

导致：

1.  第一个列表项
    第二个列表项
2.  第三个列表项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-16T15:42:00.337

这是我的解决方案（仅使用 CSS），它允许您从 ol（有序列表）中保持 li（列表项）的正常使用。这意味着所有`li`项目都是一致的，并且没有项目与其邻居代表相同的事物。

代码就在下面：

```
 .term-and-condition li {
    position: relative;
  }
  .term-and-condition ol ol {
    list-style-type: lower-latin;
  }
  .term-and-condition h2 {
    position: absolute;
    top: -2.4em;
    left: -1.5em;
  }
  .term-and-condition h3 {
    position: absolute;
    top: -2.4em;
    left: -1.5em;
  }
  .term-and-condition h2 + *,
  .term-and-condition h3 + * {
    margin-top: 4em;
  }
```

```
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Skip ordered list item numbering</title>
  </head>
  <body>
    <article class="term-and-condition">
      <h1>Participants agree to be bound by these Terms and Conditions</h1>
      <ol>
        <li>
          <h2>The Promoter</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p>
        </li>

        <li><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p></li> 

        <li>
          <h2>Eligibility</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p>
        </li>

        <li>
          <h2>Entry</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p>
        </li>

        <li><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p></li>

        <li><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis dolorum consequuntur, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere, accusantium sed, adipisci aliquam unde! Sit, iure.</p> </li>

        <li>
          <p>Entrants must upload an image and text that:</p>
          <ol>
            <li><p>Lorem ipsum dolor sit amet, qui cupiditate fugit quo ipsa hic, in amet libero magnam consectetur facere</p></li>
            <li><p>consectetur adipisicing elit. Veritatis dolorum consequuntur,</p></li>
            <li><p>in amet libero magnam consectetur facere,</p></li>
            <li><p>accusantium sed, adipisci aliquam unde! Sit, iure.</p></li>
            <li>
              <h3>Additional requirements</h3>
              <p>All entries must be the participant’s own image or have the relevant permission</p>
            </li>
            <li><p>The entrant must be the lorem</p></li>
          </ol>
        </li>
        <li>
        <h2>Winner Selection</h2> 
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Suscipit tenetur minus dolores! Natus harum pariatur voluptas, voluptatibus magnam, animi explicabo eos laudantium delectus nobis repellat dicta eveniet, et blanditiis ducimus!</p>
        </li>
      </ol>
    </article>
  </body>
</html>
```

—[见 Codepen](http://codepen.io/Haeresis/pen/Lkhrf)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-07-09T14:52:30.970

我尝试过的似乎可行的一件事就是添加了一个 font-size: 0。这可以应用于前面提到的“skip”类。

诚然，这个解决方案缺乏一些 HTML 纯度，但非常简单。

# security - 评估的替代方案

> ID：12858136
> 
> 赞同：1
> 
> 时间：2012-10-12T11:31:35.747
> 
> 标签：security, coldfusion, coldfusion-9, evaluate

审计显示我们在使用评估时存在漏洞，因为它允许执行任意代码。有没有人有替代方案？下面的例子。我们正在运行 CF9。

```
<cfquery name="getvalue" datasource="#application.ds#">
   SELECT     #url.column#
   FROM         dbo.tbl#url.table#
   WHERE     (int#url.table#Id = <CFQUERYPARAM Value="#url.Id#">)
</cfquery>

<cfif url.rowtype eq "text">
    <cfoutput>
    <input type="text" id="focus#url.table##url.column##url.Id#" 
        name="#url.table##url.column##url.Id#" 
        value="#evaluate('getvalue.#url.column#')#" 
        class="inputtext"
        onblur="updateeditvalue('#url.rowtype#','#url.table#','#url.column#',#url.Id#
                    ,escape(this.form.#url.table##url.column##url.Id#.value))" 
        style="height:20px;width:500px;">
    </cfoutput>
<cfelseif url.rowtype eq "textarea">
     <cfoutput>
     <textarea id="focus#url.table##url.column##url.Id#" 
        name="#url.table##url.column##url.Id#" 
        class="inputtext" style="height:20px;width:500px;"
        onblur="updateeditvalue('#url.rowtype#','#url.table#','#url.column#',#url.Id#
                     , escape(this.form.#url.table##url.column##url.Id#.value))">
          #evaluate('getvalue.#url.column#')#
    </textarea>
    </cfoutput>
</cfif> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:10:18.460

如果你*真的*必须运行那种动态的 SQL，这就是我要做的。onApplicationStart 您使用 cfdbinfo 查询数据库元数据以获取数据库中的表列表并将它们存储在应用程序范围内。

您可以编写一个接受 URL.table 的函数并检查它是否存在于您的列表中。如果未列出，它可能会引发错误。

同样的方法也适用于列。这将检查您的表/列是否存在，但如果您只想允许访问某些表/列，那么您别无选择，如 AlexP 和 Peter 建议的那样存储某种列表或一组别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:06:12.403

您不应该直接在 URL 中包含列/表/id 列名，这会打开 SQL 进行注入。我看到你已经使用`cfqueryparam`了值，但是查询的其余部分使这个变得多余。

您应该通过 URL 传递别名，然后设置正确的列名。下面是一个非常简单的示例：

```
<cfset idColumn   = ""/>
<cfset columnName = ""/>
<cfset tableName  = ""/>

<cfif structKeyExists(url, "aliasForColumnA")>
  <cfset columnName = "the_real_column_name_a"/>
  <cfset tableName  = "the_real_table_name_a"/>
  <cfset idColumn   = "int" & #tableName# & "Id"/>
<cfelseif structKeyExists(url, "aliasForColumnB")>
  <cfset columnName = "the_real_column_name_b"/>
  <cfset tableName  = "the_real_table_name_b"/>
  <cfset idColumn   = "int" & #tableName# & "Id"/>
</cfif>

<cfquery name="getvalue" datasource="#application.ds#">
  SELECT
    #columnName#
  FROM
    #tableName#
  WHERE
    #idColumn# = <CFQUERYPARAM cfsqltype="CF_SQL_INTEGER" Value="#url.Id#"/>
</cfquery> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:01:00.130

您将需要使用`getvalue[url.column][1]`，因此您正在拉入`getvalue`查询的第 1 行，否则您将收到错误消息。彼得对 SQL 注入问题也是正确的。至少您需要`<cfqueryparam>`用于查询

# svn - svn 脚本在编辑时锁定文件

> ID：12858143
> 
> 赞同：1
> 
> 时间：2012-10-12T11:32:00.940
> 
> 标签：svn, locking

我想锁定我的存储库，以便如果编辑任何文件，它需要自己获取 svnlock 才能这样做。我已经在每个文件上使用 svn-lock 完成了此操作，但是我没有脚本可以将其添加到新文件中并确保下次提交时它仍然在文件中。

我想知道我是否可以在 svnserver 中使用脚本来设置并确保这些脚本始终存在于我的存储库中？

我环顾了stackoverflow并用谷歌搜索了很多页面，但我找不到一个我理解的简单脚本来执行此操作。而且我不想只是复制和粘贴脚本以防万一它是恶意的。

你能在这里推荐脚本或更好地详细说明它们，以便我理解并可以正确实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:58:23.880

你了解`svn:needs-lock`财产吗？详情请查看[SVNBook的](http://svnbook.red-bean.com/)[Lock Communication](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html#svn.advanced.locking.lock-communication)章节。您可以在存储库上递归地设置属性，并且用户将被提示锁定文件，然后才能对其进行修改。

> Subversion 对这个问题的解决方案是提供**一种机制来提醒用户在编辑开始之前应该锁定文件**。该机制是一个特殊的属性：svn:needs-lock。如果该属性附加到一个文件（不管它的值是什么，这无关紧要），Subversion 将尝试使用文件系统级别的权限使该文件成为只读的——当然，除非用户明确地锁定了该文件。当存在锁定令牌时（由于使用 svn lock），文件变为读/写。释放锁后，文件再次变为只读。

# javascript - 覆盖 XMLHTTPRequest 调用

> ID：12858144
> 
> 赞同：0
> 
> 时间：2012-10-12T11:32:07.663
> 
> 标签：javascript, cordova, xmlhttprequest

我正在尝试覆盖 XMLHTTPRequest 行为，以便在本机应用程序的情况下将 Ajax 请求委托给 phonegap 插件（它将处理 https 证书身份验证挑战）。

如果应用程序在本机容器中运行，

*   取消当前的 HTTP 调用
*   调用 phonegap 插件以执行 HTTP 调用
*   接收 HTTP 响应
*   使用 http 响应元素在当前 XMLHttpRequest 实例中触发事件

我的应用程序必须使用相同的源代码在本机和网络环境中运行。开发人员可以无缝地进行 Ajax 调用。

这是我正在尝试做的示例代码：

```
XMLHttpRequest.prototype.send = function() {
    var me = this;
    me.abort();
    cordova.exec(function(httpresult) {             
        // Query success
        // httpresult object contains http response headers and content
        // How can onreadystatechange be triggered ???
        me.onreadystatechange(httpresult);
    }, function(httpresult) {
        // Query failure
    }, "QueryPlugin", "query", [{
        url: me.url,
        method: me.method,
        data: me.data
        // other http query params
    }]);
} 
```

我不知道如何将 http 标头和内容正确传递给当前的 XMLHttpRequest 实例以及如何触发 onreadystatechange 方法。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:29:30.487

Cordova/phonegap 为一些提供附加功能的平台重新定义了开箱即用的 XMLHttpRequest 对象，例如对于 Windows Phone，它通过以下方式执行此操作

[https://github.com/apache/incubator-cordova-js/blob/master/lib/wp7/plugin/wp7/XHRPatch.js](https://github.com/apache/incubator-cordova-js/blob/master/lib/wp7/plugin/wp7/XHRPatch.js)

可能您想以相同的方式做某事或为您的平台扩展现有的实现。

# android - 自定义listview行焦点问题android

> ID：12858159
> 
> 赞同：0
> 
> 时间：2012-10-12T11:32:36.200
> 
> 标签：android

从最近几天开始，我一直在尝试解决这个问题，但没有成功。我已经经历了很多已经可用但不适合我的解决方案。我有客户列表视图和自定义行。我正在使用简单的光标适配器来填充列表视图。在我的自定义行中，我有三个图像视图和一个文本视图。其中一个视图是可单击的，可打开弹出窗口并行导航到下一个片段。我的问题是，在我选择整行之前，可点击的图像不会响应。当我选择行时，它变得可以点击。

排

```
 <ImageView
         android:id="@+id/iv_LvRow_speedmap_PIcon"
         android:layout_width="0dip"
         android:layout_height="50dip"
         android:layout_weight="0.20"
         android:contentDescription="@string/todo"
         android:paddingLeft="10dip"
         android:src="@drawable/arrow4" />

     <TextView
         android:id="@+id/tv_LVRow_SpeedMap_PDesc"
         android:layout_width="0dip"
         android:layout_height="50dip"
         android:layout_weight="0.60"
         android:ellipsize="none"
         android:gravity="center_vertical|center_horizontal"
         android:scrollHorizontally="true"
         android:singleLine="true"
         android:text="@string/textview"
         android:textColor="@color/black"
         android:textSize="14sp" />

      <ImageView
          android:id="@+id/ib_LvRow_SpeedMap_InfoIcon"
          android:layout_width="0dip"
          android:layout_height="50dip"
          android:layout_weight="0.10"
          android:clickable="true"
          android:contentDescription="@string/todo"
          android:duplicateParentState="false"
          android:focusable="false"
          android:focusableInTouchMode="false"
          android:src="@drawable/info_icon" />

     <ImageView
         android:id="@+id/imgView_ArrowImg_speedMap"
         android:layout_width="0dip"
         android:layout_height="50dip"
         android:layout_weight="0.10"
         android:contentDescription="@string/todo"
         android:src="@drawable/arrow4" />
</LinearLayout>

ListView lv = getListView();
    //  lv.setItemsCanFocus(true);
    //  lv.setClickable(true);
    //  lv.setFocusable(true);
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                    long arg3) {

                final String where = "id = " + Long.toString(arg3);
                ImageView iv = (ImageView) v
                        .findViewById(R.id.ib_LvRow_SpeedMap_InfoIcon);
                // iv.setClickable(true);
                // iv.setFocusable(true);
                iv.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        System.out.println("id2");
                        String[] projection = { "name", "description" };
                        String selection = where;
                        Cursor cursor = null;
                        cursor = getActivity().getContentResolver().query(
                                DatabaseContentProvider.CONTENT_URI_CONCERNS,
                                projection, selection, null, null);
                        cursor.moveToFirst();
                        if (cursor.getCount() > 0) {
                            String name = cursor.getString(cursor
                                    .getColumnIndex("name"));

                            System.out.println("name" + name);
                            String description = cursor.getString(cursor
                                    .getColumnIndex("description"));
                            System.out.println("description" + description);
                            info(name, description, v);

                        }

                    }
                });

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:37:30.783

经过长时间的努力终于解决了我的问题。以下链接对我帮助很大。

列表视图中的多点可点击区域。

[http://wiresareobsolete.com/wordpress/tag/clickable/](http://wiresareobsolete.com/wordpress/tag/clickable/)

# python - 提取包含以 / 开头的文件夹的 tar 文件

> ID：12858167
> 
> 赞同：2
> 
> 时间：2012-10-12T11:32:54.263
> 
> 标签：python, archive, tarfile

我正在用python编写一个程序并`tarfile`用来提取tarfile。其中一些 tar 文件包含以 a 开头的文件夹`/`（或者对于 windows `\`），这会导致问题（文件被提取到错误的位置）。我怎样才能解决这个问题并确保提取最终在正确的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:52:55.593

[文档`tarfile`](http://docs.python.org/library/tarfile.html#tarfile.TarFile.extractall)明确警告这种情况。相反，您需要单独遍历 tar 文件和`extract`每个文件的内容：

```
import os
import tarfile

extract_to = "."
tfile = tarfile.open('so.tar')

members = tfile.getmembers()
for m in members:
    if m.name[0] == os.sep:
        m.name = m.name[1:]
    tfile.extract(m, path=extract_to) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:41:29.753

您是否尝试过 extractall() 方法？我记得这个方法参数之一包含应该提取档案的信息。

# javascript - 根据列表项的数量创建边秀/轮播导航

> ID：12858172
> 
> 赞同：0
> 
> 时间：2012-10-12T11:33:15.450
> 
> 标签：javascript, jquery

我正在尝试根据幻灯片的数量创建我的杂耍导航。

```
var navList = $('<li class="cItem"><a href="#"></a></li>');
var carouselItems = el.find('li');

for (var i = 0, len = carouselItems.length; i < len; i++){
  var e = carouselItems[i];
  options.navigation.append(navList);
  console.log(e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:39:21.647

我不确定你想要达到什么目标，但如果你想获得所有元素并对每个元素做一些事情，你可以试试这个。

```
$(document).ready(function(){
   $ el = $("li");
   $el.each(function(){
       $(this).appendTo("div");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:44:52.797

试试这个 JQuery 插件

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# linux - 如何读取 .dat 文件和 grep 特定值

> ID：12858173
> 
> 赞同：-3
> 
> 时间：2012-10-12T11:33:17.887
> 
> 标签：linux, bash, unix, awk

我正在尝试使用 bash 脚本读取 .dat 文件。

该值包含我想要grep值大于0的文件大小，第一列除外。大于零的值可以出现在任何行中。

```
I have awk script to read line by line. 

 1349848860, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349848920, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349848980, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349849040, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349849100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0
1349849160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29378, 0, 0, 0, 0, 0
1349849220, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349849280, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349849340, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349851200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349851260, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
1349851320, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0
1349851380, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29620, 0, 0, 0, 0, 0
1349851440, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
#!/bin/bash
FILENAME=$1

awk '{kount++;print  kount, $0}     END{print "\nTotal " kount " lines read"}' $FILENAME
awk '{print $13}' $FILENAME 
```

所需的输出 -

```
 227.736, 2,  29378 
   227.736, 2,  29620 
```

感谢帮助。纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:46:28.877

如果我了解您的需求：

```
awk -F"," '{for (i=2;i<=NF;i++){if ($i > 1) {print}}}' file.dat 
```

**输出**

```
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939880, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 68552, 0, 0, 0, 0, 0
1349939880, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 68552, 0, 0, 0, 0, 0
1349939880, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 68552, 0, 0, 0, 0, 0
1349939880, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 68552, 0, 0, 0, 0, 0
1349940000, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 73826, 0, 0, 0, 0, 0
1349940000, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 73826, 0, 0, 0, 0, 0
1349940000, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 73826, 0, 0, 0, 0, 0
1349940000, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 73826, 0, 0, 0, 0, 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:42:51.160

如果您想获取此文件中每行（基于您的输入）的每 13 列（即 14353）、第 16 列（即 450.03）和第 19 列（即 69832）的内容，请尝试以下操作：

```
awk < test.dat -F ', ' '{print $13,$16,$19}' 
```

在`test.dat`您的数据文件中的位置。

这将输出：

```
14353 450.03 69832
0 0 0
0 0 0
14353 450.03 68552
0 0 0
14353 450.03 73826 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:39:56.090

据我了解，您希望 grep 包含除 0 或 1 以外的数字的所有行，*不*计算行首的第一个数字。怎么样

```
egrep ',.*([2-9]|[0-9.]{4,})' tmp.txt 
```

这将从您的示例中打印出以下行

```
1349939700, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 2, 0, 69832, 0, 0, 0, 0, 0
1349939880, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 68552, 0, 0, 0, 0, 0
1349940000, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 14353, 1, 0, 450.03, 1, 0, 73826, 0, 0, 0, 0, 0

```

# objective-c - 第一个选择器行选择更改第二个选择器行

> ID：12858176
> 
> 赞同：0
> 
> 时间：2012-10-12T11:33:34.057
> 
> 标签：objective-c, ios, xcode, uipickerview

我从另一个开发人员那里获取了一些我试图纠正的代码。问题之一是：

我有 2 个选择器，它们用选择器中的选定行填充文本框。

如果选择了Picker 1（命名：type），则选择的行。SAYROW 3，在显示Picker的下一个Picker（命名：FlueType）上的该行默认为该行。

如何让第二个选择器不受第一个选择器行选择的影响？

我看过`[picker reloadComponent:0];`我看过堆栈和谷歌，似乎找不到任何适合这个问题的东西。

我还尝试`[picker selectRow:0 inComponent:0 animated:NO]`了 ViewDidLoad 方法，希望它将我所有的选择器设置为第一行值，这都是我想要做的。

为堆积如山的代码道歉，我试图将其分离到上下文中

```
 /////////////////////picker action////////////////////////

      -(void)flueTypeBtnClicked//:(id)sender
       {    

   [flueTypeBtn.titleLabel setTextColor:[UIColor blackColor]];

currentSelectedIndex = flueTypeBtn.tag;
[makeTxt resignFirstResponder];
[modelTxt resignFirstResponder];
[locationTxt resignFirstResponder];
[oprPressureMBarTxt resignFirstResponder];

[picker setHidden:NO];
[picker reloadComponent:0];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
self.ToolsView.frame = CGRectMake(0, 200, 320, 260);

extern GasCertificateAppViewController *viewController;
[viewController.view addSubview:self.ToolsView];

[UIView commitAnimations];
   }

 -(void)typeBtnClicked//:(id)sender
 {  

 [typeBtn.titleLabel setTextColor:[UIColor blackColor]];

currentSelectedIndex = typeBtn.tag;
[makeTxt resignFirstResponder];
[modelTxt resignFirstResponder];
[locationTxt resignFirstResponder];
[oprPressureMBarTxt resignFirstResponder];

[picker setHidden:NO];
[picker reloadComponent:0];

//NSLog(@"In type btn Clicked:");
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
self.ToolsView.frame = CGRectMake(0, 200, 320, 260);
extern GasCertificateAppViewController *viewController;
[viewController.view addSubview:self.ToolsView];

    [UIView commitAnimations];

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////more code here///////////////////////

  - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
 {

if (textField.tag == 1 )
{
    [self typeBtnClicked];
    return NO;
}
else if(textField.tag == 3)
{
    [self flueTypeBtnClicked];
    return NO;
}

CGPoint offset = CGPointMake(0, textField.frame.origin.y - textField.frame.size.height);
[self.screenScrollView setContentOffset: offset animated: YES];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];

self.ToolsView.frame = CGRectMake(0, 200, 320, 260);
extern GasCertificateAppViewController *viewController;
[viewController.view addSubview:self.ToolsView];

[UIView commitAnimations];
    return YES;
   }

      //////////////

   -(void) fillData
  {
extern Survey *survey;
ApplianceTest *test = [survey.applianceTestArray objectAtIndex:testId];

if(test.type != nil)
    [self.typeTxt setText:test.type];
   // [self.typeBtn setTitle:test.type forState:UIControlStateNormal]; 
if(test.make != nil)
    [self.makeTxt setText:test.make];
if(test.model != nil)
    [self.modelTxt setText:test.model];
if(test.location != nil)
    [self.locationTxt setText:test.location];
if(test.flue_type != nil)
    [self.flueTypeTxt setText:test.flue_type];
    //[self.flueTypeBtn setTitle:test.flue_type forState:UIControlStateNormal];    if(test.operating_pressure_mbar_or_heat_input_kwh != nil)
    [self.oprPressureMBarTxt setText:test.operating_pressure_mbar_or_heat_input_kwh];

if([test.safety_device_correct isEqualToString:@"Yes"])
    [self.segtCtrl setSelectedSegmentIndex:0];
else
    if([test.safety_device_correct isEqualToString:@"No"])
        [self.segtCtrl setSelectedSegmentIndex:1];
        else
            [self.segtCtrl setSelectedSegmentIndex:2];

    }
   -(IBAction)bgTouched:(id)sender
     {        

CGPoint offset = CGPointMake(0, 0);
[self.screenScrollView setContentOffset: offset animated: YES];[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];

self.ToolsView.frame = CGRectMake(0, 500, 320,260);
//[self.ToolsView removeFromSuperview];

//self.view.frame = CGRectMake(0, 0, 320,  372 ); 

[makeTxt resignFirstResponder];
[modelTxt resignFirstResponder];
[locationTxt resignFirstResponder];
[oprPressureMBarTxt resignFirstResponder];

[UIView commitAnimations];
 }
 ///////////////////////////////////////////////////////////////////////////////////////////////////////////

   - (void)viewDidLoad {
   [super viewDidLoad];

//segment control selected Index = 2;

segtCtrl.selectedSegmentIndex = 2;

navigationTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(130, 0, 200, 25)];
navigationTitleLabel.textAlignment = UITextAlignmentCenter;
navigationTitleLabel.font= [UIFont fontWithName:@"Futura" size:18];
navigationTitleLabel.backgroundColor = [UIColor clearColor];
navigationTitleLabel.textColor = [UIColor whiteColor];
navigationTitleLabel.text = @"Appliance Test 1/3";

self.navigationItem.titleView = navigationTitleLabel;

self.screenScrollView.frame = CGRectMake(0, 0, 320, 370);
self.screenScrollView.contentSize = CGSizeMake(320, 600 + 200);
self.screenScrollView.clipsToBounds = YES;
self.screenScrollView.showsVerticalScrollIndicator = NO;
[self.view addSubview:self.screenScrollView];   

testId = [testIdStr intValue];
currentSelectedIndex = 0;

typeArray = [[NSMutableArray alloc] init];
[typeArray addObject:@""]; ///change 
[typeArray addObject:@"Boiler"];
[typeArray addObject:@"Cooker"];
[typeArray addObject:@"Fire"];
[typeArray addObject:@"Hob"]; ///change to hob

currentSelectedIndex = 0;
flueTypeArray = [[NSMutableArray alloc] init];
[flueTypeArray addObject:@""]; //change
[flueTypeArray addObject:@"OF"];
[flueTypeArray addObject:@"RS"];
[flueTypeArray addObject:@"FL"];

unitArray = [[NSMutableArray alloc] initWithObjects:@"MBar",@"KW/h",nil];
//self.navigationItem.title = @"Appliance Test 1/3";

//[typeTableView setHidden:YES];
//[flueTypeTableView setHidden:YES];

[segtCtrl setSelectedSegmentIndex:2];

extern Survey *survey;

    [self fillData];
[picker setHidden:YES];
self.ToolsView.frame = CGRectMake(0, 500, 320, 260);

  /////////////////

    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
    {
return 1;
    }

  - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:    (NSInteger)component
   {
if (currentSelectedIndex == 1)
{
    return [typeArray count];
}
else if(currentSelectedIndex == 3)
{
    return [flueTypeArray count];
}
else if(currentSelectedIndex == 7)
{
    return [unitArray count];   
}
else
{
    return 1;
}
   }

  - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row   forComponent:(NSInteger)component
    {
if (currentSelectedIndex == 1)
{
    if ([typeArray count] == 0)
    {
        return [NSString stringWithFormat: @"None"];

    }
    else
    {
    return [typeArray objectAtIndex:row];
    }
}
else if(currentSelectedIndex == 3)
{
    if ([flueTypeArray count] == 0)
    {
        return [NSString stringWithFormat: @"None"];

    }
else {

        return [flueTypeArray objectAtIndex:row];
    }
}
else if(currentSelectedIndex == 7)
{
    if ([unitArray count] == 0)
    {
        return [NSString stringWithFormat: @"None"];

    }
    else
    {
        return [unitArray objectAtIndex:row];
    }
}
 return @"";

 }
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
 {
//      [gasSafeNoBtn setTitle:[NSString stringWithFormat:@"%d",[(NSNumber *) [gasSafeNoArray objectAtIndex:row]intValue]] forState:UIControlStateNormal];
extern Survey *survey;
if (currentSelectedIndex==1) 
{
    //typeTxt.text = [typeArray objectAtIndex:row];
    [typeBtn.titleLabel setTextColor:[UIColor blackColor]];
    [typeBtn setTitle:[typeArray objectAtIndex:row] forState:UIControlStateNormal];
    typeTxt.text  =[typeArray objectAtIndex:row] ;
}
else if(currentSelectedIndex == 3)
{
    //flueTypeTxt.text = [flueTypeArray objectAtIndex:row];
    [flueTypeBtn.titleLabel setTextColor:[UIColor blackColor]];

    [flueTypeBtn setTitle:[flueTypeArray objectAtIndex:row] forState:UIControlStateNormal];
    flueTypeTxt.text= [flueTypeArray objectAtIndex:row];
}
else if(currentSelectedIndex == 7)
{
    unitString = [[NSString alloc] initWithString:[unitArray objectAtIndex:row]];
//  NSLog(@"Unit String : %@", unitString);
    [unitBtn setTitle:[unitArray objectAtIndex:row] forState:UIControlStateNormal];
}
else {

}

 }

 - (void)dealloc {
[unitArray release];
[ToolsView release];
[toolBar release];
[nextBtn release];
[prevBtn release];
[doneBtn release];
[picker release];
    [super dealloc];

   }

   @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:44:11.157

好的排序....添加

`[picker selectRow:0 inComponent:0 animated:NO]`;

到呈现选择器的按钮操作方法

# java - ExpandableListView 中的相对布局不起作用

> ID：12858179
> 
> 赞同：0
> 
> 时间：2012-10-12T11:33:47.170
> 
> 标签：java, android, listview, expandablelistview

我有一个自定义 ExpandableListView 适配器：

```
public class MyExpandableListView extends BaseExpandableListAdapter {

private Context context;
private List<? extends List<? extends Map<String, ?>>> mChildData;
private List<? extends Map<String, ?>> mGroupData;

public MyExpandableListView(Context context,List<? extends Map<String, ?>> GroupData,
        List<? extends List<? extends Map<String, ?>>> ChildData){
    this.context = context;
    this.mChildData=ChildData;
    this.mGroupData=GroupData;
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return mChildData.get(groupPosition).get(childPosition);
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return childPosition;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    if (convertView == null) {
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.child_list_layout, null);
    }

    TextView childtxt = (TextView) convertView.findViewById(R.id.textView1);

    childtxt.setText((CharSequence) mChildData.get(groupPosition).get(childPosition).get("body"));

    return convertView;
}

@Override
public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    return mChildData.get(groupPosition).size();
}

@Override
public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return mGroupData.get(groupPosition);
}

@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return mGroupData.size();
}

@Override
public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return groupPosition;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    if(convertView==null){
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.group_list_layout, null);
    }

    TextView time = (TextView)convertView.findViewById(R.id.item1);
    TextView title = (TextView)convertView.findViewById(R.id.item2);

    time.setText((CharSequence) mGroupData.get(groupPosition).get("time"));
    title.setText((CharSequence) mGroupData.get(groupPosition).get("titel"));
    View view2 = (View)convertView.findViewById(R.id.view2);
    view2.bringToFront();
    return convertView;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
}

} 
```

我的 group_list_layout.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<View
        android:id="@+id/view2"
        android:layout_width="2dp"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:background="#ff000000" />
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="15dp"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/item1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="row_id"
        android:textSize="18sp"
        android:width="100dip" />

    <TextView
        android:id="@+id/item2"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:text="col_1"
        android:textSize="18sp"
        android:width="300dip" />
</LinearLayout>
</RelativeLayout> 
```

我试图在组元素的“时间”前面显示一条垂直线。

但是我的视图（view2）没有显示。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:40:12.177

您`LinearLayout`位于元素的**顶部。**`View`而是在组布局中移动**元素，**`View`以便将其放置在其上方。**`LinearLayout`**

 **```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/item1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="row_id"
            android:textSize="18sp"
            android:width="100dip" />

        <TextView
            android:id="@+id/item2"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:text="col_1"
            android:textSize="18sp"
            android:width="300dip" />
    </LinearLayout>

    <View
        android:id="@+id/view2"
        android:layout_width="2dp"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:background="#ff000000" />

</RelativeLayout> 
```

另外，像这样膨胀你的布局：

```
convertView = infalInflater.inflate(R.layout.group_list_layout, parent, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:42:04.347

因为它是一个相对布局，所以将 android:layout_toLeftOf="@id/view2" 添加到 LinearLayout 应该可以工作。**

# php - 从 jQuery 源数组访问数据？

> ID：12858182
> 
> 赞同：0
> 
> 时间：2012-10-12T11:34:13.010
> 
> 标签：php, javascript, jquery

ui 设计器给了我这段代码，我不知道如何将选定的源数组数据发布到 php 脚本，所以我可以用 MySQL 查询它，对不起，我是 JQuery 的初学者，我想查询数组就像在表单选项中选择样式一样，还是使用关联数组会更好？

```
<div id='content'>
  <script type="text/javascript">
    $(document).ready(function () {
        var source = [
            "Select Your location",
            "North London",
            "South London",
            "West London",
            "East London",
            "City of London",  
        ];

        // Create a jqxDropDownList  
        $("#jqxDropDownList").jqxDropDownList({ 
            source: source,    
            selectedIndex: 0, 
            width:   '250px', 
            height: '35px', 
            theme: 'summer' 
        });
    });
</script>
<div id='jqxDropDownList'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:45:46.160

如果您只需要使用这个精美的下拉菜单作为普通下拉菜单，这里是示例（不需要 ajax）：

```
<html>
<head>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script type="text/javascript" src="jqwidgets/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="jqwidgets/jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="jqwidgets/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="jqwidgets/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="jqwidgets/jqwidgets/jqxdropdownlist.js"></script>

</head>
<body>
<div id='content'>
  <script type="text/javascript">
    $(document).ready(function () {
        var source = [
            "Select Your location",
            "North London",
            "South London",
            "West London",
            "East London",
            "City of London",  
        ];

        // Create a jqxDropDownList  
        $("#jqxDropDownList").jqxDropDownList({ 
            source: source,    
            selectedIndex: 0, 
            width:   '250px', 
            height: '35px', 
            theme: 'summer' 
        });

        $('#jqxDropDownList').bind('select', function (event) { 
            $('#location').val($("#jqxDropDownList").jqxDropDownList('getSelectedItem').label);        
        });

    });

</script>
<div id='jqxDropDownList'></div>

<form>
<input type="text" id="location" name="location" value="not selected" />
<input type="submit" value="selected!">
</form>

<div><?php if (isset($_GET['location'])) print('You selected: '.$_GET['location']); ?></div>

</div>
</body>
</html> 
```

1.  下载并使用 jqwidgets 库。
2.  将一个选择事件绑定到 jqwidgets 下拉列表，该下拉列表将所选值放入普通（隐藏）表单元素。
3.  提交并在 PHP 中作为正常提交值使用

更多信息：[JQWidgets 下拉主页](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxdropdownlist/index.htm#demos/jqxdropdownlist/defaultfunctionality.htm)

# xcode - 如何从一个页面和一种方法一次向两个不同的 api 发出两个 json 请求

> ID：12858188
> 
> 赞同：1
> 
> 时间：2012-10-12T11:34:29.817
> 
> 标签：xcode, json, google-api, nsurlconnection

我正在开发我的新 iPhone 应用程序，因为我需要来自一个 url 和另一个 url 的数据和地址，我需要获取图像。这两个结果是 json 响应数据的形式，但我只得到数据的结果......
这是我的代码

```
 - (void)viewDidLoad

     {
         jsondataimg=[[NSMutableString alloc] initWithString:@""];

#####for this url i'm not getting the result##########
NSString *urlimg = [NSString stringWithFormat:@"https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=%@",name];
         //NSLog(@"%@",urlimg);
         NSURL *url1= [NSURL URLWithString:urlimg];
         NSURLRequest *request1 = [[NSURLRequest alloc] initWithURL: url1];
         NSURLConnection *connection1 = [[NSURLConnection alloc] initWithRequest:request1 delegate:self];

         jsonData = [[NSMutableString alloc] initWithString:@""];

            NSString *urlString = [NSString stringWithFormat: @"https://maps.googleapis.com/maps/api/place/details/json?reference=%@&sensor=false&key=your key",selectedname];
         NSLog(@" the name is%@",selectedname);
         NSLog(@" the reference is%@",selectedrefer);
            NSURL *url = [NSURL URLWithString:urlString];
            NSURLRequest *request = [[NSURLRequest alloc] initWithURL: url];
            NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

         [connection release];
         [request release];
         [connection1 release];
         [request1 release];

     [super viewDidLoad];

    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
    {

        NSString *partialData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSString *partialData1 = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        [jsondataimg appendString:partialData1];

        [jsonData appendString:partialData];

        [partialData release];
        [partialData1 release];

    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
    # pragma mark for fetching the image urls

        NSDictionary *imageurls=[jsondataimg JSONValue];

        NSDictionary*images=[imageurls objectForKey:@"responseData"];
        NSLog(@"%@",images);

        ##########here null value is displaying#######

    #pragma mark for fetching the datassss

            NSDictionary *filesJSON = [jsonData JSONValue];

            NSDictionary *address1 = [filesJSON valueForKey:@"result"];
            NSLog(@"Found %@",address1);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:37:45.573

只需使用它，无需设置委托方法 nsurl 连接..您将获得数据...下一个相同。

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=mumbai"]]];

NSURLResponse *response;
NSError *error;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *strResponse = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
//    NSLog(@"%@",strResponse);

SBJSON *sbJason = [[SBJSON alloc] init];
NSMutableDictionary *getPlaceList = [sbJason objectWithString:strResponse]; 
```

# android - 使用布局作为子布局并在 android 中以编程方式访问它？

> ID：12858192
> 
> 赞同：1
> 
> 时间：2012-10-12T11:34:36.853
> 
> 标签：android, android-layout, android-linearlayout, layout-inflater

我有一个名为 thumb_unit.xml 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="320dp"
    android:layout_height="240dp"
    android:orientation="horizontal"
     >

    <ImageView
        android:id="@+id/thumbImage"
        android:layout_marginLeft="10dp"
        android:layout_width="160dp"
        android:layout_height="220dp"
        android:scaleType="fitXY"
        android:src="@drawable/app_icon" 
            android:layout_marginTop="20dp"/>

    <LinearLayout
        android:layout_width="160dp"
        android:layout_height="match_parent"
        android:layout_marginTop="20dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/issueName"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:text="Summer 2012"
            android:textSize="18dp"
            android:layout_marginLeft="6dp"
             />

        <TextView
            android:id="@+id/description"
            android:layout_width="match_parent"
            android:layout_height="151dp"
            android:layout_marginLeft="6dp"
            android:text="Description"
            android:textSize="14dp"
            android:textStyle="italic" />

        <Button
            android:id="@+id/view_download"
            android:layout_marginTop="5dp"
            android:layout_width="80dp"
            android:layout_marginLeft="5dp"
            android:layout_height="30dp"
            android:text="View"
            android:textSize="14dp" 
            android:textColor="@drawable/push_button_text_color"
            android:background="@drawable/push_button"
            android:layout_marginBottom="40dp"
            />

    </LinearLayout>

</LinearLayout> 
```

和另一个名为 grid_unit.xml 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="170dp"
    android:layout_height="130dp"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/thumbImage"
        android:layout_width="77dp"
        android:layout_height="105dp"
        android:src="@android:drawable/ic_menu_gallery" 
        android:layout_marginTop="10dp"
        />

    <LinearLayout
        android:layout_width="73dp"
        android:layout_height="120dp"
        android:orientation="vertical"
        android:layout_marginTop="10dp"
        android:layout_marginRight="10dp"
         >

        <TextView
            android:id="@+id/issueName"
            android:layout_width="77dp"
            android:layout_marginTop="5dp"
            android:layout_height="30dp"
            android:text="South Louisiana PnK"
            android:layout_marginLeft="3dp"
            android:textSize="11dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/productName"
            android:layout_marginTop="5dp"
            android:layout_width="70dp"
            android:layout_height="30dp"
            android:layout_marginLeft="3dp"
            android:text="South Louisiana PnK"
            android:textSize="9dp" />

        <Button
            android:id="@+id/viewButton"
            android:layout_width="70dp"
            android:layout_height="20dp"
            android:text="View"
            android:textSize="9dp"
            android:textColor="@drawable/push_button_text_color"
            android:background="@drawable/push_button"
            android:layout_marginTop="5dp"
            android:layout_marginLeft="3dp"
             />

    </LinearLayout>

</LinearLayout> 
```

现在最后，我有主要的activity_main.xml，我想将这些组合用作

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="440dp"
    android:orientation="vertical"
    tools:context="com.mirabel.activities.MainActivity" >

    <include layout="@layout/thumb_unit" android:id="@+id/main_thumb"/>
    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <include layout="@layout/grid_unit" android:id="@+id/left_grid"/>
        <include layout="@layout/grid_unit" android:id="@+id/right_grid"/>

    </LinearLayout>

</LinearLayout> 
```

activity_main.xml 中的子布局，并以编程方式为所有这些内容设置图像、文本。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:46:37.793

您可以通过以下方式在 activity_layout.xml 的 Activity 文件中执行此操作：

```
View view = findViewById(R.id.left_grid);
ImageView image = view.findViewById(R.id.thumbImage);
image.setBackgroundResource(R.id.image));    //or whatever you wish to set

TextView text = view.findViewById(R.id.issueName);
text.setText("Whatever text you want to set); 
```

通过这种方式，您可以访问包含的布局中的所有视图。

# iphone - dismissModalViewControllerAnimated 产生黑色背景

> ID：12858198
> 
> 赞同：3
> 
> 时间：2012-10-12T11:35:06.317
> 
> 标签：iphone, objective-c, xcode, mfmailcomposer

我的应用程序是创建 csv 文件并通过邮件发送。但是当我丢弃邮件时，我得到了黑屏。之前的视图没有出现并且被黑屏覆盖。我查看了堆栈溢出中的各种问题和答案。但似乎没有任何效果。

```
- (IBAction)openMail:(id)sender
{
    [self getdata];

    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;
        [mailer setSubject:@"BMNET- Travel Log"];

        NSString *CSVstring=@"Name, StartingDateNTime, EndingDateNTime, TravelType, DistanceTravelled, Amount\n" ;

        NSString *CSVPath,*record;;

        NSString  *temporayCSV= @"" ;

           for (int i=0; i<[getAmount count]; i++) {    

               record = [NSString stringWithFormat:@"%@, %@, %@, %@, %@, %@", [getName objectAtIndex:i],   [getStartDate objectAtIndex:i],   [getEndDate objectAtIndex:i],[getType objectAtIndex:i],[getDistance objectAtIndex:i],[getAmount objectAtIndex:i]];

                      NSLog(@"%d",i);

                      temporayCSV = [NSString stringWithFormat:@"%d  %@  \n ",(i+1),record];

                      CSVstring = [CSVstring stringByAppendingFormat:temporayCSV];       
                      NSLog(@"%@",CSVstring);

          }

        NSArray *paths = NSSearchPathForDirectoriesInDomains(
                                                             NSDocumentDirectory, NSUserDomainMask, YES); 
        NSString *documentsDirectory = [paths objectAtIndex:0]; 

        NSArray *toRecipients = [NSArray arrayWithObjects:@"", nil];
        [mailer setToRecipients:toRecipients];
        CSVPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.csv", @"CSV_FormatedTable"]];
        NSFileManager *fileManager;
        //add our file to the path
        [fileManager createFileAtPath:CSVPath contents:[CSVstring dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];
        NSData *rolesCSVData =[NSData dataWithContentsOfFile:CSVPath];
        NSLog(@"The data is %@",CSVstring);

        //create my data to append
        NSFileHandle *handle;
        handle = [NSFileHandle fileHandleForWritingAtPath: CSVPath ]; 
        //say to handle where's the file fo write
        [handle truncateFileAtOffset:[handle seekToEndOfFile]]; 
        //position handle cursor to the end of file
        [handle writeData:[data dataUsingEncoding:NSUTF8StringEncoding]];   
        //write data to with the right encoding

        [mailer addAttachmentData:rolesCSVData mimeType:@"text/csv" fileName:@"Log"];
        NSString *emailBody = @"Attachment of Log";
        [mailer setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:mailer animated:YES];
        mailer.modalPresentationStyle = UIModalPresentationPageSheet;

    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                        message:@"Your device doesn't support the composer sheet"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    switch (result)
    {

        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");

            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");

            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");

            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");

            break;
        default:
            NSLog(@"Mail not sent.");

            break;
    }
    // Remove the mail view

    [self dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:06:11.487

`presentModalViewController:animated:`并且`dismissModalViewControllerAnimated:`从 iOS6 开始被弃用，就像一个旁注一样！您的目标是哪个 iOS 版本，这是您正在开发的 iPhone 还是 iPad 应用程序？

除此之外，我注意到以下内容：

```
[self presentModalViewController:mailer animated:YES];
mailer.modalPresentationStyle = UIModalPresentationPageSheet; 
```

展示视图控制器后，您正在设置 modalPresentationStyle！将这一行移到`mailer.modalPresentationStyle = UIModalPresentationPageSheet;`presentModalViewController 行之前。也许这就是问题所在！

# git - 如何在 git-subtree 添加后变基？

> ID：12858199
> 
> 赞同：75
> 
> 时间：2012-10-12T11:35:05.867
> 
> 标签：git, git-rebase, git-subtree

我正在尝试学习Git 1.7.11 中添加的新[git-subtree命令。](https://github.com/apenwarr/git-subtree)添加子树后，我似乎失去了变基的能力。我有一个带有 README 文件的主存储库和一个也有一个 README 文件的库存储库。我将它添加到 lib 目录`subtree add`：

```
$ git subtree add -P lib/mylib myliborigin master 
```

这工作正常，但现在历史看起来像这样：

```
*   22c1fe6 (HEAD, master) Merge commit 'b6e698d9f4985825efa06dfdd7bba8d2930cd40e' as 'lib/mylib' - 
|\                                                                                                                
| * b6e698d Squashed 'lib/mylib/' content from commit d7dbd3d
* b99d55b Add readme
* 020e372 Initial 
```

现在，当我想针对我的 repo 进行 rebase`origin/master`并且它失败了，因为 squash 提交直接应用于其不适用的父提交，因为它应用于 repo 的根目录，而不是我在添加时给它的前缀子树。

如果我查看 squash 提交，其原因就很清楚了。没有关于前缀的信息。它只是压缩在一起的原始 mylib 提交。只有下一次合并提交对此一无所知，但 rebase 不会在这里考虑到它。

是否有任何解决方法（除了从不基于子树提交）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-01-17T03:52:47.610

这适用于简单的情况：

```
git rebase --preserve-merges master 
```

感谢评论中的@Techlive Zheng。

* * *

你可能会看到

```
fatal: refusing to merge unrelated histories
Error redoing merge a95986e... 
```

这意味着 git 无法自动应用您的子树。这使您处于@ericpeters 在他的回答中描述的情况。解决方案：

重新添加您的子树（使用您最初使用的相同命令）：

```
git subtree add -P lib lib-origin master 
```

继续变基：

```
git rebase --continue 
```

你都准备好了！

* * *

如果您想知道它是否成功运行，您可以在变基后与原始版本进行比较，以确保您没有更改任何内容：

```
git diff <ref-before-rebase> <ref-after-rebase> -- . 
```

（`-- .`最后指示 git 仅`diff`处理当前目录中的文件）。

* * *

如果所有其他方法都失败并且您不关心保留提交本身，则可以简单地`git cherry-pick`使用原始子树提交。

提交消息看起来像`Add 'lib/' from commit '9767e6...'`——这就是你想要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-09T01:37:29.030

这是一个老问题，但我的 repo 也遇到了同样的问题，我终于找到了一个完整的解决方案，它（希望）保留了所有子树元数据。

假设我们有这个提交树：

```
B   (master) Add README.md
|     
A            Initial commit 
```

我们分叉了一个`feature`分支，其中的子树位于`lib/`：

```
git remote add -f githublib https://github.com/lib/lib.git
git subtree add --prefix lib/ githublib master --squash 
```

它创建了一个具有两个父级的合并提交 D：我们当前的(B)，以及一个与外部 repo 的压缩历史`master`无关的提交。`F`该提交还在其提交消息中包含一些`git subtree`元数据（即`git-subtree-dir`和`git-subtree-split`）。

```
 D     (feature) Merged commit 'F' as 'lib/'
  / \    
 /   F             Squashed 'lib/' content from GGGGGG
B        (master)  Add README.md
|     
A                  Initial commit 
```

稍后，我们分别向两个分支添加一些提交。

```
 E     (feature) Remove .gitignore from lib/
C  |     (master)  Add LICENSE.md
|  D               Merged commit 'F' as 'lib/'
| / \    
|/   F             Squashed 'lib/' content from GGGGGG
B                  Add README.md
|     
A                  Initial commit 
```

现在我们要重新定位`feature`到`master`. 就是这样：

### `feature`1.逐一挑选提交，`feature`在`master`.

```
git branch -f feature C
git checkout feature
git cherry-pick D E

E'       (feature) Remove .gitignore from lib/
|
D'                 Merged commit 'F' as 'lib/'
|
|  E               Remove .gitignore from lib/
C  |     (master)  Add LICENSE.md
|  D               Merged commit 'F' as 'lib/'
| / \    
|/   F             Squashed 'lib/' content from GGGGGG
B                  Add README.md
|     
A                  Initial commit 
```

现在我们有了一个 rebase 的等价物，但是我们丢失了所有关于外部 repo 的信息，对于`git subtree`. 要恢复它：

### 2.[将丢失的父链接添加为嫁接](https://stackoverflow.com/a/4164767/422231)，并重写历史`feature`使其永久化。

```
git checkout feature
git replace --graft D' C F
git filter-branch --tag-name-filter cat -- master.. 
```

现在我们得到了一张与开头完全相同的图片。旧的提交 D 和 E 仍然存在，但它们可以在以后被垃圾收集。

```
E'       (feature) Remove .gitignore from lib/
|
D'                 Merged commit 'F' as 'lib/'
|\
| \                
C  \     (master)  Add LICENSE.md
|   \              
|    \   
|     F            Squashed 'lib/' content from GGGGGG
B                  Add README.md
|     
A                  Initial commit 
```

**警告：**这会改写 的历史`feature`，所以如果有其他人在这个分支上与你合作，请小心发布它。但是，由于您一开始就想进行变基，因此您可能已经意识到了 :-)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-15T21:19:38.843

这不是一个解决方案，但它是我当前使用的解决方法......

使用您的初始示例：

```
*   22c1fe6 (HEAD, master) Merge commit 'b6e698d9f4985825efa06dfdd7bba8d2930cd40e' as 'lib/mylib' - 
|\                                                                                                                
| * b6e698d Squashed 'lib/mylib/' content from commit d7dbd3d
* b99d55b Add readme
* 020e372 Initial 
```

在子树添加之前以交互方式变基到第二次提交：

```
$ git rebase -i 020e372 
```

删除两个子树条目并标记先前提交的编辑：

```
e b99d55b Add readme 
```

保存文件/关闭，然后当它到达“添加自述文件”提交时，运行修改命令：

```
$ git commit --amend 
```

然后重新添加你的新子树：

```
$ git subtree add -P lib/mylib myliborigin master 
```

继续变基：

```
$ git rebase --continue 
```

然后，您的分支应该从 master 重新定位，并且子树将是“正常”的，Squash + Merge 完好无损：

```
*   22c1fe6 (HEAD, master) Merge commit 'b6e698d9f4985825efa06dfdd7bba8d2930cd40e' as 'lib/mylib' - 
|\                                                                                                                
| * b6e698d Squashed 'lib/mylib/' content from commit d7dbd3d 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-05T10:56:43.187

Git 2.24.0（2019-11-04 发布）增加了对`git rebase --rebase-merges --strategy [strategy]`. 因此，现在如果您`git rebase --rebase-merges --strategy subtree [branch]`在当前分支包含子树合并时运行，它将立即工作。

对于我的项目，我决定我可能不使用`git subtree add`，而是使用`git replace --edit`. 我还使用[了 Git book v1 过时的“子树”教程](https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging)，它做同样的事情但很乏味。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-30T06:33:17.877

显然这是预期的行为（对于“预期行为”的一些不正当定义。）请参阅： http: [//git.661346.n2.nabble.com/subtree-merges-lose-prefix-after-rebase-td7332850.html](http://git.661346.n2.nabble.com/subtree-merges-lose-prefix-after-rebase-td7332850.html)。

并不是说这对任何人都有很大帮助。我也很想为此找到解决方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-05T21:01:30.767

我有一个类似的问题：我想在添加子树后重新设置基础，并且使用 --preserve-merges 仍然给我留下了合并冲突（由于`.gitignore`文件和其他冲突）。

就我而言，我并不一定打算使用任何子树功能：我只是引入了一个原本应该是超级项目一部分的存储库。如果它对其他人有帮助，这就是我最终根据我找到的其他[相关](https://stackoverflow.com/a/1425914/185651) [答案所做的事情。](https://stackoverflow.com/a/4042965/185651)

假设我在同一个目录中有两个项目，main_project 和 sub_project。我想将 sub_project 拉到 main_project 中名为 sub_project 的目录中，假设两个 repo 都没有名为 sub_project 的目录：

```
cd main_project
git fetch ../sub_project
git checkout -b sub_project FETCH_HEAD
git filter-branch --prune-empty --tree-filter '
    if [[ ! -e sub_project ]]; then
        mkdir -p sub_project
        git ls-tree --name-only $GIT_COMMIT | xargs -I files mv files sub_project
    fi'
git checkout branch-to-merge-within
git merge sub_project
git branch -d sub_project 
```

如果我发现这种方法有任何问题，我会更新。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-13T01:09:57.720

You need to use

```
git rebase --preserve-merges --preserve-committer --onto new_place start end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-27T15:55:57.500

另一种方法是`git rebase -i master`，然后`merged squashed`用 (break here) 替换提交`b`，因此 git rebase 将在原始子树添加提交时停止。在那一刻再次运行`git subtree add ...`，然后`git rebase --continue`。您将获得相同的历史记录，但会重新定位到最新的 master。

# strongly-typed-dataset - 强类型 DataTable 上的自定义列

> ID：12858203
> 
> 赞同：0
> 
> 时间：2012-10-12T11:35:21.410
> 
> 标签：strongly-typed-dataset

我正在使用类型化数据集来检索和操作数据。为了生成类型化的数据集，我使用内置的数据集设计器和数据源中的拖放表。此外，大多数情况下我需要将自定义列添加到我的数据表中。

问题是，当我对底层数据库架构进行更改时，我只需删除并重新生成数据表并松开我之前添加的所有自定义列。因此，每次我重新生成数据表时，我都必须一次又一次地添加这些自定义列。

所以我的问题是，是否有一种简单的方法来维护或跟踪这些自定义列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:28:09.067

不要删除 DataTable 并重新生成它。而是右键单击，选择配置并调整查询以添加/删除新列。然后单击完成，表格将在数据集中更新，但不会删除您的自定义。

# jqgrid - jqgrid，故障后向数据库添加记录后带有错误的警报

> ID：12858204
> 
> 赞同：0
> 
> 时间：2012-10-12T11:35:32.517
> 
> 标签：jqgrid, alert

这是我的代码：

```
<script type="text/javascript">
var grid = $("#list");
$(function(){ 
var grid = $("#list");
grid.jqGrid({
url:'grid.php',
datatype: 'xml',
mtype: 'GET',
colNames:['ID sprzętu','Kod sprzętu', 'Właściciel','Konfiguracja'],
colModel :[ 
  {name:'SprzetID', index:'SprzetID', width:90}, 
  {name:'Kod', index:'Kod', width:120, editable: true}, 
  {name:'Wlasciciel', index:'Wlasciciel', width:200, align:'left', editable: true}, 
  {name:'Konfiguracja', index:'Konfiguracja', width:400, align:'left', editable: true}, 
],
pager: '#pager',
rowNum:10,
rowList:[10,20,30],
sortname: 'SprzetID',
sortorder: 'asc',
viewrecords: true,
gridview: true,
caption: 'Lista sprzętu'
});
grid.jqGrid('navGrid','#pager',
      {add: true, edit: true, del: true, search: true}, //options
      {width:400, }, // edit options
      {width:400,closeAfterAdd: true, url:'add.php'}, // add options
      {reloadAfterSubmit:false}, // del options
      {width:600} // search options
      );
}); 
```

一切都很好，当正确地将记录添加到数据库时，但是当例如字段“Kod”是重复的（它是唯一的字段）时，记录不能被添加到数据库......而且不是。我想显示带有错误消息的警报，但我在文档中找不到如何做到这一点......我猜，我应该使用“afterSubmit”，但是如何......我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:14:24.157

解决。在添加参数中，我添加了代码：

```
afterSubmit: function(response, postdata) {
              if(response.responseText != ""){
                  return [false, response.responseText];

              }else{
                  return [true,"Ok"];
              }} 
```

# android - 我如何使用手势拖动它？

> ID：12858207
> 
> 赞同：0
> 
> 时间：2012-10-12T11:36:00.450
> 
> 标签：android, gesture, gesture-recognition, gestures, android-gesture

通过使用手势，我可以像这张图片一样拖动吗？我的意思是，必须拖动为刻度线。所以对于这个 onClickListener 必须使用。执行完毕后，应该可以在显示部分最终打开另一个屏幕。

当我用手时，我的意思是如果我打勾，那么它应该能够调用特定的方法。

我想使用 Gestures 编写代码，当我在 Image 下方这样做时，它应该能够执行或拖动。Gestures 中的功能是如何工作的，我应该如何编写代码？

我怎么能这样做？有人可以建议我吗？![看到这个](../Images/d1546d7543e07027f6feaa8af39338f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:45:19.423

我相信您是在要求与[此问题](https://stackoverflow.com/questions/3669239/how-to-drag-an-image-by-touching-in-android "这个问题")类似的东西。这是[prateek-raj](https://stackoverflow.com/users/438864/prateek-raj)提供的源代码。顺便说一句，虽然您提供的示例复选标记图像很可爱，但 Android 并不关心您的图像是球、复选标记还是[拿着火箭筒的松鼠](http://www.freewebs.com/buto-clan/squirrel%20bazooka.bmp)的图像，所以下面的代码仍然适用。

```
package com.examples.Touchmoveimage;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout.LayoutParams;

public class Touchmoveimage extends Activity {

    int windowwidth;
    int windowheight;

    private LayoutParams layoutParams ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    windowwidth = getWindowManager().getDefaultDisplay().getWidth();
    windowheight = getWindowManager().getDefaultDisplay().getHeight();
    final ImageView balls = (ImageView)findViewById(R.id.ball);

    balls.setOnTouchListener(new View.OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        LayoutParams layoutParams = (LayoutParams) balls.getLayoutParams();
                        switch(event.getAction())
                        {
                        case MotionEvent.ACTION_DOWN:   
                                                        break;
                        case MotionEvent.ACTION_MOVE:
                                                        int x_cord = (int)event.getRawX();
                                                        int y_cord = (int)event.getRawY();

                                                        if(x_cord>windowwidth){x_cord=windowwidth;}
                                                        if(y_cord>windowheight){y_cord=windowheight;}

                                                        layoutParams.leftMargin = x_cord -25;
                                                        layoutParams.topMargin = y_cord - 75;

                                                        balls.setLayoutParams(layoutParams);
                                                        break;
                        default:
                                                        break;
                        }
                            return true;
                    }
            });
}
} 
```

这解决了你的*大部分*问题，但不是全部。你还问，

> 在它执行之后，它应该可以最终在显示部分打开另一个屏幕。

答案可能涉及创建一个 Intent 对象（在构造函数中定义新的活动并启动它。这里有一个很好的主题教程[。](http://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/)它的核心（切换活动）将是这样的：

```
Intent k = new Intent("com.example.ActivityYouWantToGoTo");
startActivity(k); 
```

您需要完成与创建新活动相关的所有步骤。（例如，不要忘记更新清单。）要使您的代码*同时*执行(a) 拖动复选框和 (b) 切换到新活动，您需要结合上述概念。您没有告诉我们在什么情况下您希望拖动对象或切换活动（例如，在它被拖动一次之后？当它被拖动到特定位置时？等等），但您将要定义这些条件和然后在遇到新活动时调用新活动。

# android - 如何在 BroadcastReceiver 中保存和访问数据？

> ID：12858208
> 
> 赞同：0
> 
> 时间：2012-10-12T11:36:03.357
> 
> 标签：android, broadcastreceiver

如果我了解 Android 手册，则将`BroadcastReceiver`其视为无状态实体，因此我应该保留一个将用作数据容器的服务（这些是我的结论）。

根据每个数据访问请求，我应该执行`startService`（？）——我可以通过这种方式将数据传递给服务，但是如何取回数据？

我的意思是推荐的方式？我可以考虑传递“输出”数据，完成后的服务会更改它，因此当`startService`返回时我可以检查我发送的数据以检索结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:39:08.823

> 如果我了解 Android 手册，BroadcastReceiver 被视为无状态实体，所以我应该保留一个服务作为数据容器（这是我的结论）。

仅仅为了保留数据而提供服务会让你的用户不喜欢你，并且不能保证数据会一直存在。用户和操作系统可以并且将随时摆脱您的进程。

请使用文件（例如，数据库`SharedPreferences`）来保存需要在进程调用之间保留的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:45:08.020

我不会为此使用服务，[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)对于存储一些键/值对数据非常有用。

# c# - 如何在 C# 中为 .exe 指定输出目录

> ID：12858209
> 
> 赞同：-2
> 
> 时间：2012-10-12T11:36:07.840
> 
> 标签：c#, wpf, openfiledialog, process.start

我正在用 C# 开发 wpf 应用程序。我有一个按钮，通过 Microsoft.Win32.OpenFileDialog 浏览文件系统。有一个提交按钮，我在其上调用 Process.Start() 以在 grib 文件上运行 .exe。exe 成功为我生成了 .csv 文件。首先我浏览文件系统，选择文件，然后单击提交按钮。我的应用程序执行路径是 D:\Projects\ApiRouting\ApiRouting\bin\Debug。我的应用程序中有一个文件夹位于 D:\Projects\ApiRouting\ApiRouting\Files。当我从路径 D:\Projects\ApiRouting\ApiRouting\Files 中选择文件并单击提交按钮时，.csv 文件将在 D:\Projects\ApiRouting\ApiRouting\Files 生成，这是正确的。当我从 D:\Documents 中选择文件并单击提交按钮时，会在 D:\Documents 中生成 .csv 文件。我要运行的代码。

```
 public static void GenerateCsvFile(string fileName)
        {

                System.Diagnostics.Process process = new System.Diagnostics.Process();
                System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
                startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                startInfo.FileName = @"C:\ndfd\degrib\bin\degrib.exe";
                startInfo.Arguments = @"" + fileName + "" +" -C -msg 1 -Csv";
                startInfo.UseShellExecute = true;
                process.StartInfo = startInfo;
                process.Start();
                process.WaitForExit();
                process.Close();

                System.Diagnostics.Process process1 = new System.Diagnostics.Process();
                System.Diagnostics.ProcessStartInfo startInfo1 = new System.Diagnostics.ProcessStartInfo();
                startInfo1.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                startInfo1.FileName = @"C:\ndfd\degrib\bin\degrib.exe";
                startInfo1.Arguments = @"" + fileName + "" + " -C -msg all -nMet -Csv";
                startInfo1.UseShellExecute = true;
                process1.StartInfo = startInfo1;
                process1.Start();
                process1.WaitForExit();
                process1.Close();

        }

private void BrowseButton_Click(object sender, RoutedEventArgs e)
        {
            safeFileName = string.Empty;
            // Create OpenFileDialog
            Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

            // Set filter for file extension and default file extension
            //dlg.DefaultExt = ".txt";
            //dlg.Filter = "Zip Files|*.zip*";
            dlg.Multiselect = false;
            // Display OpenFileDialog by calling ShowDialog method
            Nullable<bool> result = dlg.ShowDialog();

            // Get the selected file name and display in a TextBox
            if (result == true)
            {
                FileNameTextBox.Text = string.Empty;
                // Open document
                string fileName = dlg.FileName;
                safeFileName = dlg.SafeFileName;
                App.ZipFileSafeName = safeFileName;

                FileNameTextBox.Text = fileName;
                App.ZipFileName = fileName;
            }

            //dlg.InitialDirectory = @"D:\Projects\ApiRouting\ApiRouting\bin\Debug";
            //dlg.FileName = @"D:\Projects\ApiRouting\ApiRouting\bin\Debug\Pacificwind.grb";
            //dlg.Reset();
        } 
```

当用户从文件系统的任何位置选择文件时，我将该文件复制到 D:\Projects\ApiRouting\ApiRouting\Files，然后运行 ​​.exe。所以 GenerateCsvFile 方法总是有 fileName 参数值 D:\Projects\ApiRouting\ApiRouting\Files\xyz.grb。那么为什么当我从 D:\Documents 中选择 grib 文件时我的应用程序在 D:\Documents 生成 .csv 文件，以及为什么当我选择.csv 文件来自 D:\Projects\ApiRouting\ApiRouting\Files ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:13:42.527

`degrib.exe`似乎正在将其输出写入任何工作目录。你的选择是

1.  弄清楚是否有一个参数`degrib`允许您指定输出 CSV 文件的结束位置。
2.  将 的 设置为`WorkingDirectory`您`startInfo`希望它们写入的目录。您可以这样做：`startInfo.WorkingDirectory = new FileInfo(fileName).DirectoryName;`这应该确保将文件写入与 GRB 文件相同的目录。

# java - 使用 Spring Security 滑动到期

> ID：12858210
> 
> 赞同：3
> 
> 时间：2012-10-12T11:36:19.070
> 
> 标签：java, spring-security

我正在使用 Spring Security，我注意到，当用户登录时，身份验证 cookie 将在大约一天内有效。它似乎没有“刷新”这个到期日期 - cookie 在一天后到期，即使在那天结束前 5 分钟我已经通过安全 URL 向服务器发出请求。

如何为身份验证 cookie 设置滑动过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:15:13.527

添加自定义过滤器非常容易，它将检查 cookie 并在需要时将其重新设置为以后过期（要查看执行这些操作的正确方法，您可以查看`org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter`and `org.springframework.security.web.authentication.rememberme.AbstractRememberMeServices#setCookie`），尽管我会考虑不扩展 cookie与成功登录相同的过期时间（但只是超出会话过期时间）；另外，我猜没有必要在每个请求上触摸 cookie，但前提是 cookie 过期还有一定的最短时间。

# rest - REST API 如何知道用户是否登录？

> ID：12858213
> 
> 赞同：3
> 
> 时间：2012-10-12T11:36:40.193
> 
> 标签：rest, restful-authentication

我正在通过开发一个单独的 REST API 服务器和一个 Web 应用服务器来创建一个“API 即服务”，该服务器只是提供一个使用 REST API 的网站。Web 应用程序充当 API 的客户端。Web 应用程序是一个简单的仪表板，允许用户登录并查看他们的 API 使用情况并查看他们的 API 密钥和密钥，以便他们可以安全地访问 API。

我计划使用类似 AWS 的共享密钥来使 API 的客户端能够访问受保护的资源。

但我感到困惑的一件事是，当用户登录仪表板网站时，这应该由 REST API 还是由 Web 应用服务器处理。

如果要由 REST API 端点处理，API 服务器如何维护请求之间的会话状态。API 如何知道用户是否登录？是否可以在 API 服务器上存储会话状态，即使它应该是无状态的。其他类似 REST 的 API（如 twitter）如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:34:12.983

ReSTful 安全性在服务器端处理；基本上：

*   当客户端请求未经身份验证的资源时，服务器返回 401 状态码
*   每个客户端调用都必须通过 WWW-Authenticate 标头提供身份验证
*   成功登录后，此标头可以在客户端存储在 cookie 中

你会在这本书中找到很大的帮助：[ReSTful WebServices Cookbook](http://books.google.fr/books/about/RESTful_Web_Services_Cookbook.html?id=LDuzpQlVuG4C&redir_esc=y)。查找有关基本/摘要身份验证的说明。

这是[一个很好的介绍](http://www.httpwatch.com/httpgallery/authentication/)，带有一个实时工作示例。

# ios - MKPointAnnotation 副标题

> ID：12858218
> 
> 赞同：2
> 
> 时间：2012-10-12T11:36:54.670
> 
> 标签：ios, mapkit, mkannotation

我创建了许多图钉，当我按下图钉时，标题必须显示，而副标题必须隐藏，因为它是一段很长的文本，并且出现在 UItextView 中。问题是我没有找到隐藏字幕的方法，所以在标题下，我有一段很长的文字，结尾是：...

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    MKPointAnnotation *myAnnot = (MKPointAnnotation *)view.annotation;
    field.text = myAnnot.subtitle;
} 
```

不幸的是，我不得不使用这种方法，因为我找不到将标签分配给 MKPointAnnotation 的方法。这就是我创建它的方式：

```
MKPointAnnotation *annotationPoint2 = [[MKPointAnnotation alloc] init];
annotationPoint2.coordinate = anyLocation;

annotationPoint2.title = [NSString stringWithFormat:@"%@", obj];
annotationPoint2.subtitle = [NSString stringWithFormat:@"%@", key]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:33:02.033

不要使用内置`MKPointAnnotation`类，而是创建一个自定义注释类，该类实现`MKAnnotation`但具有附加属性（未命名`subtitle`）来保存您不想在标注上显示的数据。

[此答案](https://stackoverflow.com/questions/12804781/mkpinannotationview-loses-pincolor-after-mkmapview-zoom-in/12805161#12805161)包含一个简单的自定义注释类的示例。

在该示例中，`@property (nonatomic, assign) float myValue;`用每个注释替换您想要跟踪的数据（例如。`@property (nonatomic, copy) NSString *keyValue;`）。

然后你会像这样创建你的注释：

```
MyAnnotation *annotationPoint2 = [[MyAnnotation alloc] init];
annotationPoint2.coordinate = anyLocation;

annotationPoint2.title = [NSString stringWithFormat:@"%@", obj];
annotationPoint2.subtitle = @"";  //or set to nil
annotationPoint2.keyValue = [NSString stringWithFormat:@"%@", key]; 
```

然后该`didSelectAnnotationView`方法将如下所示：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    if ([view.annotation isKindOfClass:[MyAnnotation class]])
    {
        MyAnnotation *myAnnot = (MyAnnotation *)view.annotation;
        field.text = myAnnot.keyValue;
    }
    else
    {
        //handle other types of annotations (eg. MKUserLocation)...
    }
} 
```

您可能还必须更新假设注释为 a`MKPointAnnotation`或使用注释的代码的其他部分`subtitle`（该代码应检查`MyAnnotation`并使用`keyValue`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T09:57:14.447

你可以试试这个简单的方法

```
MKPointAnnotation *point= [[MKPointAnnotation alloc] init];
point.coordinate= userLocation.coordinate;
point.title= @"Where am I?";
point.subtitle= @"u&me here!!!";
[myMapView addAnnotation:point]; 
```

# asp.net - 用于多个文件的 FileSystemWatcher 或 ASP.NET 缓存

> ID：12858219
> 
> 赞同：1
> 
> 时间：2012-10-12T11:36:55.910
> 
> 标签：asp.net, caching, filesystemwatcher

我正在开发一个开源，我需要从多个 xml 文件中读取值来填充字典，并且每当任何 xml 文件发生更改时，我都必须更新字典。由于有多个文件我想使用`FileSystemWatcher`. 这是一个好主意吗？或者我必须使用具有文件依赖关系的 ASP.NET 缓存？我不确定 ASP.NET 缓存在多个文件的情况下如何帮助我。

注意：我在更新字典时实现了锁定机制，因此在更新字典的情况下线程不会成为问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:00:51.773

要为多个文件创建依赖项，您可以像这样使用[AggregateCacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.aggregatecachedependency.aspx)：

```
CacheDependency[] depArray = new CacheDependency () 
{
  new CacheDependency(Server.MapPath("foo.txt")),
  new CacheDependency(Server.MapPath("bar.txt"))
};

AggregateCacheDependency aggDep = new AggregateCacheDependency();
aggDep.Add(depArray);

Cache.Insert("key", value, aggDep); 
```

# php - PHP MYSQL 家族树“关于”页面

> ID：12858221
> 
> 赞同：0
> 
> 时间：2012-10-12T11:37:08.853
> 
> 标签：php, mysql, family-tree

我建立了一个家谱。该表如下所示：

> id-----firstname------母亲------父亲-----孩子

这是人员详细信息页面的代码：

> $query = mysql_query(" 选择family.id，family.firstname，mother.firstname AS `mother`，father.firstname AS `father`，kids.firstname AS`kids`
> 
> 来自家庭
> 
> 加入家庭作为母亲 on mother.id = family.mother 加入家庭作为父亲 onfather.id = family.father 加入家庭作为孩子 on kids.id = family.kids
> 
> WHERE family.id=".$_GET['id']
> 
> $row = mysql_fetch_array($query,) 或 die(mysql_error());
> 
> ```
>  echo "First Name: ".$row['firstname']."<BR>";
>           echo "Mother Name: ".$row['mother']."<BR>"; 
>           echo "Father Name:  ".$row['father']."<BR>"; 
>           echo "Kids: ".$row['kids']."<BR>";
>           echo "<BR>"; 
> ```

结果是：
名字：XXXXX
母亲姓名：YYYYYY
孩子：AAAAAAA

问题是当其中一个字段为空时（如果有人没有孩子），脚本会停止。我只得到：

名字：
母亲姓名：
孩子：

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:40:24.157

如果字段不需要具有值，则应使用`LEFT JOIN`而不是，`JOIN`尽管这可能会导致负载非常重，具体取决于您的数据量。

# mysql - 为什么这个查询不运行？

> ID：12858224
> 
> 赞同：0
> 
> 时间：2012-10-12T11:37:19.087
> 
> 标签：mysql, sql, performance

我有这个查询没有完成（我认为服务器内存不足）

```
SELECT fOpen.*, fClose.*
FROM (
    SELECT of.*
    FROM fixtures of
        JOIN (
            SELECT MIN(id) id
            FROM fixtures
            GROUP BY matchId, period, type
        ) ofi ON ofi.id = of.id
) fOpen
JOIN (
    SELECT cf.*
    FROM fixtures cf
        JOIN (
            SELECT MAX(id) id
            FROM fixtures
            GROUP BY matchId, period, type
        ) cfi ON cfi.id = cf.id
) fClose ON fClose.matchId = fOpen.matchId AND fClose.period = fOpen.period AND fClose.type = fOpen.type 
```

这是它的解释：

![](../Images/6b9ced724dadb0f99561b36d15875f19.png)

如果我分别运行它们，这两个子查询“of”和“cf”大约需要 1.5 秒才能运行。

'id' 是一个 PRIMARY INDEX 并且有一个名为 'matchPeriodType' 的 BTREE INDEX 具有按该顺序排列的这 3 列。

更多信息：MySQL 5.5，512MB 的服务器内存，表有大约 40 万条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:48:27.680

不确定 matchid / period / type 的唯一性。如果是唯一的，则将 400k 记录与 400k 记录结合起来，可能会丢失索引。

但是，似乎 2 个主要子选择可能是不必要的。您可以将固定装置与自身连接起来，并将固定装置与子选择连接起来以获得最小值和最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:55:38.750

I tried to rewrite your query, so that it is easier to read and should be able to use your indexes. Hope I got it right, could not test without your data.

```
SELECT fOpen.*, fClose.*
FROM (
  SELECT MIN(id) AS min_id, MAX(id) AS max_id
  FROM fixtures
  GROUP BY matchId, period, type
) ids
JOIN fixtures fOpen  ON ( fOpen.id  = ids.min_id )
JOIN fixtures fClose ON ( fClose.id = ids.max_id ); 
```

This one gets `MIN(id)` and `MAX(id)` per `matchId`, `period`, `type` (should use your index) and joins the corresponding rows afterwards.

Appending `id` to your existing index `matchPeriodType` could also help, since the sub-query could then be executed with this index only.

# java - 将大数据从 DB 导出到 CSV

> ID：12858227
> 
> 赞同：1
> 
> 时间：2012-10-12T11:37:31.557
> 
> 标签：java, hibernate, db2, export

我需要将表格导出到 CSV 文件中，并通过我的 JSF/Icefaces Web 应用程序将其下载。

我怎样才能做到这一点？我有一个包含 20 多个列和 10 多个 MIO 行的表。

目前，我使用 Java 线程，将所有数据加载到内存中。然后我创建一个新文件并将集合写入行逐行迭代到文件中。如果 Thread 完成，用户可以通过 Servlet 下载大文件。

但我不想将这么多 GB 写入 ram。我无法确保安全，以免出现内存问题..

休眠有可能为我做吗？还是有人有其他想法？

我连接到一个 DB2 数据库。我要导出的表连接到休眠 bean，但也可以编写本机 sql。

感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:40:02.113

您需要文件的中间阶段吗？您是否尝试过从数据库加载并写入*每行*的 servlet 输出流？这样，您就只是充当客户端和数据库之间的管道。

只需`content-disposition`适当地设置标题，这将向客户端的浏览器发出信号，将传入的数据视为 CSV 文件本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:41:02.640

我也遇到过类似的问题，我解决问题的方法是我最初在磁盘上写入一个 CSV 文件并从数据库中获取 25K 批处理记录并保存到文件中，然后反复重复该过程直到所有需要的数据由报告不写在文件上。然后将文件 URL 发送给客户端以下载文件。

# javascript - 想要在页面加载时在 div 中加载 php 文件

> ID：12858229
> 
> 赞同：0
> 
> 时间：2012-10-12T11:37:44.050
> 
> 标签：javascript, ajax, jquery

我对 ajax、jquery 和 javascript 很陌生。所以需要帮助。我有一个表格。单击提交按钮时，表单下方的 div 会显示 php 文件的结果。我想要的是，它应该在主页加载后立即将 php 文件显示到该 div 中，并且按下提交按钮时 div 会刷新。

```
<script> 
   $(document).ready(function() { 
   $('#form1').ajaxForm(function() { 
   $('#blogup').val(''); // alert("Thank you for posting!"); 
   $("#display").load("showartposts.php")
   }); 
   }); 
</script> 
```

在这里，display 是在页面加载时显示的 div，当提交表单时，它应该刷新这个 div 以显示来自 showartposts.php 的新帖子。这就像一个 facebook 墙上的帖子。j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:42:14.393

您需要使用 AJAX 提交表单，然后获取 AJAX 响应（假设它的 HTML）并替换 #display DIV 的内容。

使用 jQuery 应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:40:19.370

你需要试试这个：

```
<script> 
   $(document).ready(function() { 
   $("#display").load("showartposts.php"); // call as soon as page load
   $('#form1').ajaxForm(function() { 
     $('#blogup').val(''); // alert("Thank you for posting!"); 
     $("#display").load("showartposts.php")
  }); 
  }); 
</script> 
```

# css - CSS - 在 ul 上传播 li 元素

> ID：12858233
> 
> 赞同：0
> 
> 时间：2012-10-12T11:37:57.170
> 
> 标签：css

有没有办法分散元素（例如：< li> 在< ul> 中）？

我的 < li> 是内联的（不是垂直的），我不想改变它们的大小。

我只想设置 <li> 元素之间的空间以获得 100% 的总和。

例如。：

<ul>由3个<li>组成：第一个是200px，第二个是200px，第三个是400px。

如果屏幕有 1000px，那么 li 之间的间距应该是 200px，所以每个间距是 100px（如果左右两边的 padding 是 0px）。

我想在不使用 javascript 的情况下实现这一点

编辑：

* * *

![带表的解决方案](../Images/5f7ee8aab2421f598b259457c13cec72.png) 图片显示了我想通过列表实现的效果。
每个带有蓝色边框的元素都应该是一个 li（正如您在图片中看到的那样：有些元素包含文本，因此将它们设置为内部 css 不是一个好主意）。
元素之间的空间应该非常大，以至于最后一个元素（红色注销按钮）接触到屏幕的右边缘。

-但是，为了避免使用javascript，我现在用一张表解决了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:00:00.160

我是如何解决的：我没有使用这个[http://jsfiddle.net/Tejzf/](http://jsfiddle.net/Tejzf/) ，而是使用了一个表格而不是 ul 和 il 元素。表格宽度=100%，单元格的宽度（li 之前的位置）为 1px（尽可能小）。在单元格之间，我添加了未定义宽度的新的空单元格。

```
<table width="100%"><tr>
   <td width="1">DATA1 from LI1</td><td></td>
   <td width="1">DATA2 from LI2</td><td></td>
   <td width="1">DATA3 from LI3</td>
</tr></table> 
```

并感谢您的回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:20:58.167

你在寻找这样的东西吗？

[http://jsfiddle.net/jMTjb/1/](http://jsfiddle.net/jMTjb/1/)

或带有空格

[http://jsfiddle.net/jMTjb/2/](http://jsfiddle.net/jMTjb/2/)

# php - mysql + php外键显示数据

> ID：12858234
> 
> 赞同：0
> 
> 时间：2012-10-12T11:37:59.090
> 
> 标签：php, mysql, foreign-keys

我有 5 张桌子。

```
广告公司表
  身份PK
  姓名

安置表
  身份PK
  姓名

广告客户表
  身份PK
  姓名

位置表
  身份PK
  姓名

广告表
  ad_id PK
  尺寸
  价格
  广告公司 ID FG
  位置标识 FG
  广告客户 ID FG
  locationId FG

```

我不知道如何显示外键数据。例如，我可以获得“advertisingcompanyId”或“placementId”，但问题是获取广告公司表中的广告公司名称或展示位置表中的展示位置名称，而不是 id。

我尝试使用该查询：

```
$query = "SELECT ad_id, size, price, ads.advertisingcompanyId, ads.placementId, ads.advertiserId, locationId
            FROM ads
            INNER JOIN advertisingcompany ON ads.advertisingcompanyId = advertisingcompany.id
            WHERE ad_id = '$ad_id'"; 
```

这是我想要的数据的正确 SQL 查询吗？如果是我如何添加到该查询中，我将获得所有外键的名称？然后我怎样才能在 php 中显示该数据？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:42:37.150

1.  > 这是我想要的数据的正确 SQL 查询吗？

    是的。

2.  > 如果是我如何添加到该查询中，我将获得所有外键的名称？

    指定您希望选择的名称列并添加附加`JOIN`子句：

    ```
    SELECT ads.*,
           advertisingcompany.name AS adco,
           placement.name          AS placement
    FROM   ads JOIN advertisingcompany ON ...
               JOIN placement          ON ...
    -- etc. 
    ```

    请注意，如果某些外键可能是，您可能希望使用[外连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)`NULL`。

3.  > 然后我怎样才能在 php 中显示该数据？

    连接到 MySQL，执行查询，然后遍历结果集：

    ```
    $dbh = new PDO("mysql:dbname=$dbname;charset=utf8", $username, $password);
    $qry = $dbh->query($query);
    while($row = $qry->fetch()) print_r($row); 
    ```

    请小心避免 SQL 注入攻击，方法是使用[准备好的语句](https://stackoverflow.com/a/60496/623041)，将用户输入作为参数传递给这些语句，这些参数不会针对 SQL 进行评估！如果您不知道我在说什么，请阅读[Bobby Tables](https://stackoverflow.com/q/332365/623041)的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:42:49.380

```
SELECT ad_id, size, price, 
       c.name as company_name, 
       p.name as placement_name, 
       a.name as advertiser_name, 
       locationId
FROM ads
INNER JOIN advertisingcompany c ON ads.advertisingcompanyId = c.id
INNER JOIN placement p ON ads.placementId = p.id
INNER JOIN advertiser a ON ads.advertiserId = a.id
WHERE ad_id = '$ad_id' 
```

# c# - 如何将调试文本从 C# 类发送到 ASP.NET 页面

> ID：12858238
> 
> 赞同：1
> 
> 时间：2012-10-12T11:38:21.413
> 
> 标签：c#, asp.net, .net, debugging, web

我正在开发一个 C# 类，它是我的 ASP.Net 网站的一部分。

有没有一种简单的方法可以将一些日志/调试文本输出到页面顶部。我的班级不继承自 Page。我想显示变量值等。

该类表示我在某些 aspx 页面中使用的 Exam 对象。我要显示的变量是私有的，因此我的 aspx 页面无法访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:43:14.403

在 http 请求上下文的任何地方，您都可以访问当前执行页面，如下所示。

```
Page page = HttpContext.Current.Handler as Page; 
```

您可以自由转换为您自己的页面类型。因此，您可以将调试信息写入标签、文本框等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:40:55.293

您可以尝试使用`Response.Write`方法

```
var pathOfYourLog = "";
var log = File.ReadAllLines(pathOfYourLog);
YourHttpContext.Response.Write(log); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T11:49:40.927

你可以这样做

```
HttpContext.Current.Response.Write("your message goes here"); 
```

或者写一个辅助方法

```
public static void writeOut(string message) {
    HttpContext.Current.Response.Write(message);
} 
```

# vba - 多个本地化的相同日期格式

> ID：12858242
> 
> 赞同：7
> 
> 时间：2012-10-12T11:38:32.410
> 
> 标签：vba, excel

目前我面临着困扰我很多的问题。我希望有人可以帮助我。我在同时使用 Office 2007（32 位）和 Office 2010（64 位）的大公司工作。编写宏以在整个公司中兼容对我来说是一项艰巨的任务（我以前从未在 VBA 中编程 - 实际上这个论坛对我帮助很大）。我的任务是在共享 Excel 工作表中维护一张大表。有几个宏和几个用户窗体。现在我将简要描述这个问题：工作表包含两列日期格式（开始日期和结束日期）。这两个值都被导入到用户窗体的文本框的列表单中（命令按钮午餐 MsCal - 导出到类 - 用日期填充这些文本框）。我只需要在两列中都将日期格式设置为 mm/dd/yyyy，以便执行过滤和其他操作。当使用与英语不同的本地化的工作人员更新此值时，美国日期输入为 dd.mm.yyyy。这使得基于日期的适当过滤变得不可能。我试图通过以下方式更改格式：

```
UserForm1.TextBox10.Value = Format(Calendar1.Value, "mm/dd/yyyy") 
```

但这段代码不知何故行为不端。在某些机器上它可以工作，在其中一些机器上它不工作。这就是让我头疼的地方。我现在应该如何进行？有没有办法强制 excel 在工作表中使用相同的日期格式并忽略 Windows 中的本地化设置？员工不想将本地化更改为美国英语，因为他们要么习惯了他们的格式，要么需要它用于其他应用程序。有没有办法仅在此工作表打开时临时更改本地化？任何建议将不胜感激。在此先感谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:26:25.207

您能做的最好的事情就是永远不要将日期变量转换为文本。

在 Excel 内部，日期只是一个连续的数字（小数分隔符左边是天，小数分隔符右边是小时）。因此，例如，*2012 年 6 月 10 日*，对于 excel 是**41188**。此日期值与您计算机上设置的日期格式无关。

现在，当涉及到表示日期（供人类可视化）时，Excel 会将此内部值格式化为一个字符串，该字符串具有您计算机中设置的格式。因此，例如，如果您的计算机中有美国日期格式，则日期 41188 将被格式化为 2012 年 6 月 10 日。

日期的最大挑战是以正确的格式输入日期。当您输入日期作为字符串（“6/10/2012”）时，Excel 将根据您计算机上设置的日期格式对其进行解释。如果你有美国格式，那么它将把第一个密码作为月份，第二个作为日，最后一个作为年。如果您有德语格式，它将第一个读作日，下一个读作月，最后一个读作年。因此，美国格式 Excel 的相同输入（“6/10/2012”）将读取 6 月 10 日，而德国格式 Excel 将读取 6 月 6 日。

在您的情况下，您不应该格式化 Textbox10 中的日期。对于美国格式的 Excel 没有问题，但如果您有另一种日期格式，其中第一个密码是日期而不是月份，您将得到错误的值：检查此示例。用户以德语格式 Excel (dd.mm.yyyy) 输入 6 月 10 日

1.  `Calendar1.Value`检索日期值 ( **41188** )
2.  `Format(Calendar1.Value, "mm/dd/yyyy")`将日期值转换为字符串“06/10/2012”
3.  使用格式化日期 (STRING) 时，Excel 必须解释它是什么日期。因为计算机的日期格式是德语，所以它会读取 Day:06, Month:10, Year:2012。您将使用第*41070*天而不是**41188**

如果`Calendar1.Value`检索日期变量并将此日期变量提供给日期格式的列，您将始终在列中获得正确的日期，并且无论在列单元格内设置的日期格式如何，您都将能够正确过滤和排序日期或在用户计算机中设置的格式。

* * *

现在，在您的情况下，最好的办法是直接将 分配给`Calendar1.Value`所需的单元格。就像是：

```
ThisworkBook.WorkSheets("Sheet1").Range("C3").Value= Calendar1.Value 
```

您仍然可以分配`Calendar1.Value`到 TextBox10 以供用户查看他的选择，但禁用 TextBox10 以便唯一的编辑选项是日历控件。并且在处理日期时，不是从 TextBox10 中提取它，而是直接从`Calendar1.Value`.

如果您仍需要将 Calendar1 中的选定值显示到文本框中，则不要格式化文本框中的日期。相反，使用：

```
UserForm1.TextBox10.Value = Cstr(Calendar1.Value) 
```

这样，用户将看到他在他的计算机中设置的并且他习惯的日期格式的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:17:12.670

一种解决方案是不使用日期数字格式，而仅对您指定`"mm/dd/yyyy"`为格式字符串的所有单元格日期使用自定义格式。但是，根据我的经验，如果您的计算机的区域设置被设置为使用，`"mm/dd/yyyy"`那么如果您尝试使用相同的字符串进行自定义单元格格式设置，excel 将保留为链接到计算机设置的日期，因此这对您没有帮助。我解决此问题的方法是更改​​计算机上的日期格式，然后将单元格格式化为自定义“mm/dd/yyyy”并保存（然后将计算机的设置恢复为原来的状态。）现在即使 excel 仍然声称它们是日期单元格，您会看到更改计算机上的设置不会更改单元格中的值。

我想另一种方法是在调用 TEXT 函数的日期单元格旁边始终有一个单元格。因此，如果您在 A1 中有日期，则在另一个单元格中`=TEXT(A1, "mm/dd/yyyy")`，并且只引用这个新单元格。但这可能会使您的电子表格非常混乱。

我想最好的解决方案是让您的 IT 部门将公司日期设置中的每个设置都设置为使用相同的格式。

# sql - 如何使用一个 SQL 脚本文件创建多个 sqlplus 表

> ID：12858251
> 
> 赞同：2
> 
> 时间：2012-10-12T11:38:59.243
> 
> 标签：sql, oracle, sqlplus

我正在 SQL*Plus 中创建一大堆表，并使用 PsPad 编写 SQL 脚本，通过 putty 中的 sqlplus 运行脚本。

目前我必须为每个表创建一个单独的 SQL 脚本文件，但我想在一个 SQL 脚本文件中创建我的所有表。这可能吗？

我试过了

```
CREATE TABLE TESTTABLE4(
ID NUMBER(2),NAME VARCHAR2 (50));
CREATE TABLE TESTTABLE2(
ID_NO NUMBER (2), SIZE NUMBER (4)); 
```

并在表格之间留下一条线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:07:04.233

SIZE 是一个关键字，如果你想创建一个名为 SIZE 的列，你应该把它放在“”之间。

```
CREATE TABLE TESTTABLE2(ID_NO NUMBER (2), "SIZE" NUMBER (4)); 
```

正如您在评论中看到的那样，我应该说您可以这样做，但这并不意味着您应该这样做。感谢各位的澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:43:03.330

看看可以包含多个语句的[匿名 PL/SQL 块。](http://docstore.mik.ua/orelly/oracle/prog2/ch15_03.htm)

# select - 确定使用 winsock (FIONWRITE) 可以发送多少字节？

> ID：12858259
> 
> 赞同：4
> 
> 时间：2012-10-12T11:39:18.460
> 
> 标签：select, winsock, send, recv

使用 select 我可以确定是否可以在不阻塞的情况下接收或发送任何字节。

使用此函数，我可以确定可以接收多少字节：

```
function BytesAvailable(S: TSocket): Integer;
begin
  if ioctlsocket(S, FIONREAD, Result) = SOCKET_ERROR then
    Result := -1;
end; 
```

还有一种方法可以确定可以发送多少字节？

所以我可以确定当我用 N 个字节调用 send 时，它会准确返回 N 个发送的字节（或 SOCKET_ERROR），但不会更少（发送缓冲区已满）。

FIONWRITE 不适用于 Winsock。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:43:05.477

[根据 MVP Alexander Nickolov](http://www.tech-archive.net/Archive/Development/microsoft.public.win32.programmer.networks/2007-11/msg00035.html)的说法，Windows 中没有这样的设施。他还提到“良好的套接字代码”不使用类似 FIONWRITE 的 ioctl，但没有解释原因。

[`FIONBIO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573%28v=vs.85%29.aspx)为了规避这个问题，您可以在您感兴趣的套接字上启用非阻塞 I/O（我猜是`WSASend`使用`WSAGetLastError() == WSAEWOULDBLOCK`已满（如[文档中`WSASend`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms742203%28v=vs.85%29.aspx)所述）：

> **WSAEWOULBLOCK**
> 
> Overlapped sockets：有太多未完成的重叠 I/O 请求。Nonoverlapped sockets：该socket被标记为非阻塞，发送操作不能立即完成。

另请阅读[有关此错误代码的进一步说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEWOULDBLOCK)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:12:11.170

Winsock send() 仅当套接字以阻塞模式运行并且套接字的出站缓冲区填满排队数据时才会阻塞。如果您在同一线程中管理多个套接字，请不要使用阻塞模式。如果一个接收器没有及时读取数据，可能会导致该线程上的所有连接都受到影响。改用非阻塞模式，然后当套接字进入阻塞状态时 send() 会报告，然后你可以使用 select() 来检测套接字何时可以再次接受新数据。更好的选择是改用重叠 I/O 或 I/O 完成端口。向操作系统提交出站数据，让操作系统处理所有等待您的事情，并在数据最终被接受/发送时通知您。在收到通知之前，不要为给定的套接字提交新数据。

# android - 将对话框中的网格视图中的图像设置为主布局中的另一个网格视图

> ID：12858261
> 
> 赞同：1
> 
> 时间：2012-10-12T11:39:24.950
> 
> 标签：android

在我的主要布局中，我有一个网格视图，其中包含资源文件夹中的一些图像。当我单击主网格视图上的图像时，会弹出一个对话框窗口并显示另一个网格视图包含来自 sdcard 的图像。当我在对话框的网格视图上单击图像时，我想将单击的图像设置到在主网格视图上单击的位置。

```
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
image.add(R.drawable.split1);
image.add(R.drawable.spli21);
image.add(R.drawable.split22);
image.add(R.drawable.split31);
image.add(R.drawable.split32);
image.add(R.drawable.split33);
image.add(R.drawable.split34);
image.add(R.drawable.split41);
image.add(R.drawable.split42);
image.add(R.drawable.split43);
gv = (GridView) findViewById(R.id.gridView1);
gv.setAdapter(new AppsAdapter(MainActivity.this,image));
gv.setOnItemClickListener(new OnItemClickListener()  
 {   
public void onItemClick(AdapterView<?> parent, View view, int position,long id) 
{
// TODO Auto-generated method stub

//  Toast.makeText(getBaseContext(),
//        "pic" + (position) + " selected",
//          Toast.LENGTH_SHORT).show();
//Context context = getApplicationContext();
if(position==0)
{
createdialog(position);
}    
}
});
}

public void createdialog(int pos8)
{
pos1 = pos8;    
System.out.println("Position->"+pos1);
dialog = new Dialog(this);
dialog.setContentView(R.layout.content);
dialog.setTitle("Select Contents !!"); 
dirs.clear();
listFilesSDcard = new File(Environment.getExternalStorageDirectory()
                                                           .toString());
System.out.println("listFilesSDCard->"+listFilesSDcard);
getFolderList(listFilesSDcard, dirs);
System.out.println("ArrayList dirs Contains->"+dirs);
sgv = (GridView) dialog.findViewById(R.id.gridView);
sgv.setAdapter(new AppsAdapter1(dirs,pos1));
dialog.show();
}

/*  Apps adapter for dialog gridview        */

public class AppsAdapter1 extends BaseAdapter
 {

ArrayList<File> dirsTemp1 = new ArrayList<File>();
//int pos5;
/*Arraylist dirs contains the sdcard image files*/
public AppsAdapter1(ArrayList<File>dirs,int pos10) 
{
Log.d("In appsadapter2","Hiii");
dirsTemp1 = dirs;
pos2 = pos10;
}   
//---returns the number of images---

public final int getCount()
{    
return dirsTemp1.size();    
}

//---returns the ID of an item---

public final Object getItem(int position)
{
return dirsTemp1.get(position);
}

public final long getItemId(int position) 
{
return position;
}

public View getView(int position, View convertView, ViewGroup parent)
 {
// TODO Auto-generated method stub
//int i=1;

View v = null;
Bitmap mOriginalBitmap = null;
//View view;
//Bitmap map1;
final File f = (File) getItem(position);

if (convertView == null) 
{
LayoutInflater li = getLayoutInflater();
v = li.inflate(R.layout.gridicon, null);
ImageView iv = (ImageView) v.findViewById(R.id.imageView);
TextView tv = (TextView) v.findViewById(R.id.texttag);
tv.setTextColor(Color.BLACK);
String fName = f.getName();
if (f.isFile()) {
if (fName.endsWith(".png") || fName.endsWith(".jpeg")
|| fName.endsWith(".jpg")
|| fName.endsWith(".bmp")) 
{

tv.setText(fName);
mOriginalBitmap =BitmapFactory.decodeFile(f.getAbsolutePath());

}

if (mOriginalBitmap != null)
{
mOriginalBitmap = Bitmap.createScaledBitmap(mOriginalBitmap, 75, 75, true);
iv.setImageBitmap(mOriginalBitmap);
}
}
}
else 
{
v = convertView;
}
v.setOnLongClickListener(new OnLongClickListener() 
{
public boolean onLongClick(View v) 
{
// TODO Auto-generated method stub

//  ***** I stuck here ****/

if (dialog != null)
dialog.dismiss();
String path = f.getAbsolutePath();
Toast.makeText(getBaseContext(),"long clicked",Toast.LENGTH_LONG).show();
Bitmap pass = BitmapFactory.decodeFile(path);

return false;
}
});

return v;
}

} 
```

我只是从 sd 卡中读取图像并将其显示在对话框的网格视图中。我如何用对话框网格视图上的长按图像替换主网格视图上的图像？我被对话框网格视图的onlong click监听器卡住了..请帮助我。提前致谢..

# android - 如何修复 android 中的“android.view.ViewGroup.jumpDrawablesToCurrentState(ViewGroup.java:5035)”错误

> ID：12858264
> 
> 赞同：48
> 
> 时间：2012-10-12T11:39:40.597
> 
> 标签：android, android-viewpager, android-viewgroup

我有带有子元素（不是根）元素 RelativeLayout 的布局，然后我创建 ViewPager 并将其作为我的相对布局的子元素插入，所以就像

+相对布局（根）

|

+-- 相对布局（子）

|

+-- -- ViewPager

现在时刻 - 一切都好。

但是然后我尝试使用自己的布局将一些视图项添加到 ViewPager 然后我得到了错误

```
10-12 15:32:46.777: E/AndroidRuntime(6031): FATAL EXCEPTION: main
10-12 15:32:46.777: E/AndroidRuntime(6031): java.lang.StackOverflowError
10-12 15:32:46.777: E/AndroidRuntime(6031):     at android.view.ViewGroup.jumpDrawablesToCurrentState(ViewGroup.java:5035) 
```

那个 ViewPager 将如何作为具有自己的子视图的 RelativeLayout 的子级？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-10-12T12:03:18.287

问题解决了！

这是因为我打电话`LayoutInflater.inflate([subViewOfViewPager], [ParentOfViewPager])`

它应该是：

`LayoutInflater.inflate([subViewOfViewPager], [ParentOfViewPager], false))`

**更多的话：**

发生这种情况是因为当使用第二个参数调用 inflate 时，视图插入为给定 ViewGroup 的子子项，然后我尝试将此视图添加到 ViewPager。视图只能有一个父 ViewGroup 元素。第三个参数设置`attachToRoot`为 false 以避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-02T10:12:48.430

简化版[答案](https://stackoverflow.com/a/12858650/1591934)

```
@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.cab_listing, container,false);
    return view;
} 
```

# windows - 用于 64 位窗口的 ZODB 3

> ID：12858265
> 
> 赞同：3
> 
> 时间：2012-10-12T11:39:42.843
> 
> 标签：windows, python-2.7, 64-bit, zope, zodb

我尝试使用 pip 为 64 位 Python 2.7 安装 ZODB3。此安装需要本地编译器来编译 BTrees 扩展。因为我没有安装所需的 MS 编译器：

*   Python 2.7 上是否有用于 ZODB 的二进制 64 位 Windows 安装程序？我使用谷歌但没有成功
*   是否真的需要 BTrees 或者我可以在没有 BTrees 的情况下安装 ZODB3 吗？

欢呼，乌维。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:46:59.373

ZODB3 包带有用于 Windows 的预编译鸡蛋，请参阅[ZODB3 的 PyPI 页面](http://pypi.python.org/pypi/ZODB3/3.10.5)。

你需要`pip`明确告诉它需要安装一个egg；它通常不支持从 egg 安装：

```
pip install --egg ZODB3 
```

或者，您可以`easy_install`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T00:23:05.030

在 Windows 上遇到 ZODB3 easy_install/pip/compiler 问题？试试 Christoph Gohlke 的“Unofficial Windows Binaries for Python Extension Packages”下载页面：

*   打包为 .exe 安装程序的 64 位和 32 位 ZODB3 二进制文件可用于 python 2.5/2.6/2.7：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#zodb3](http://www.lfd.uci.edu/~gohlke/pythonlibs/#zodb3)

*   您需要先从同一来源运行适当的 zope.interface 安装程序：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#Zope.interface](http://www.lfd.uci.edu/~gohlke/pythonlibs/#Zope.interface)

# c# - 基于正则表达式的颜色字符

> ID：12858266
> 
> 赞同：-1
> 
> 时间：2012-10-12T11:39:46.890
> 
> 标签：c#, regex, windows, winforms, richtextbox

我是.Net 初学者。我想根据所选的正则表达式为富文本框中的一些字符着色。这个怎么做？

喜欢：

```
if (Regex.IsMatch(richTextBox, @"^[a-m]{1}$"))
{
   ??? //coloring that particular character of richTextBox
} 
```

我应该在里面写什么？可以用标签做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:52:36.243

如果要遍历所有匹配项。不确定 Regex.Matches 是否曾经返回 null，因此我检查了结果。

```
 MatchCollection matches = Regex.Matches(rtb.Text, @"^[a-m]{1}$");
 if (matches != null && matches.Count > 0)
 {
     foreach (Match m in matches)
     {
         rtb.Select(m.Index, m.Length);
         rtb.SelectionColor = Color.Blue;
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:52:37.460

您可以尝试将`Paragraph`s 与`Run`s一起使用

```
Paragraph para = new Paragraph {
    Foreground = Brushes.Red,
};
para.Inlines.Add(new Bold(new Run(matchingString)));
para.Inlines.Add(new Run(regularText));
myRichTextBox.Document.Blocks.Add(para); 
```

ETC

# html - css3以动态内容居中div

> ID：12858267
> 
> 赞同：2
> 
> 时间：2012-10-12T11:39:47.803
> 
> 标签：html, css, alignment

我正在使用 css3 开发一个移动 HTML5 页面，我有如下页面

```
<!DOCTYPE html>
<html>
    <head>
        <title>Starter page</title>
        <style>
            .float-right{float:right}
            .float-left{float:left}
            .clear{clear:both}
        </style>
    </head>

    <body>
    <div class="content" id="home">

            <div class=" ">
            <!--START: Div to be centered to page-->
                <div class="DivToBeCentered">
                    <div class="float-left">
                        <!--START: This paragraph content is dynamic from database, i want to center align the div with the class 
                                    DivToBeCentered with reference to its parent-->
                        <p class="">dynamic para 1 with background image</p>
                        <!--END: This paragraph content is dynamic from database, i want to center align the div with the class 
                                    DivToBeCentered with reference to its parent-->
                    </div>
                    <div class=" float-left">
                        <p class="">static para 2 without background image</p>
                    </div>
                    <div class="clear"></div>
                </div>
            <!--END: Div to be centered to page-->
            </div>

    </div>
    </body>
</html> 
```

我想将 div 与上面代码中的“DivToBeCentered”类水平居中对齐到它的父 div。在那个 div 里面有两个段落标签，因为一个段落标签的内容是动态的，所以它的宽度在加载页面时可能会改变，我如何将该 div 与“DivToBeCentered”类居中对齐到它的父级。如果你解决了这个问题，对我会更有帮助，我今天陷入了这个问题。在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:15:31.687

simple solution will be `display: inline-block;` to the `DivToBeCentered` and `text-align:center;` to the `outer` div

**[DEMO](http://jsbin.com/ekupeb/3/)**

**Css to be changed**

```
.outer {text-align:center;}
.DivToBeCentered {display: inline-block;}

<html>
    <head>
        <title>Starter page</title>
        <style>
            .float-right{float:right}
            .float-left{float:left}
            .clear{clear:both}
          .outer {text-align:center;}
          .DivToBeCentered {display:block-inline}
        </style>
    </head>

    <body>
    <div class="content" id="home">

            <div class="outer">
            <!--START: Div to be centered to page-->
                <div class="DivToBeCentered">
                    <div class="float-left">
                        <!--START: This paragraph content is dynamic from database, i want to center align the div with the class 
                                    DivToBeCentered with reference to its parent-->
                        <p class="">dynamic para 1 with background image</p>
                        <!--END: This paragraph content is dynamic from database, i want to center align the div with the class 
                                    DivToBeCentered with reference to its parent-->
                    </div>
                    <div class=" float-left">
                        <p class="">static para 2 without background image</p>
                    </div>
                    <div class="clear"></div>
                </div>
            <!--END: Div to be centered to page-->
            </div>

    </div>
    </body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:11:53.637

尝试这个：

```
<div class="content" id="home">
        <!--START: Div to be centered to page-->
            <div class="DivToBeCentered">
                <div class="float-left">
                    <!--START: This paragraph content is dynamic from database, i want to center align the div with the class 
                                DivToBeCentered with reference to its parent-->
                    <p class="">dynamic para 1 with background image</p>
                    <!--END: This paragraph content is dynamic from database, i want to center align the div with the class 
                                DivToBeCentered with reference to its parent-->
                </div>
                <div class=" float-left">
                    <p class="">static para 2 without background image</p>
                </div>
                <div class="clear"></div>
            </div>
        <!--END: Div to be centered to page-->
</div> 
```

CSS：

```
.content{
  position: relative;
}

.DivToBeCentered{
  position: absolute;
  left: 0;
  right: 0;
  /*for vertical centering*/
  /*
  top:0;
  bottom:0;
  */
  margin: auto;
} 
```

# iphone - 将 iOS 5 更新到 iOS 6 以运行现有的 Xcode 应用程序时，是否需要更改或配置任何东西？

> ID：12858272
> 
> 赞同：0
> 
> 时间：2012-10-12T11:40:09.027
> 
> 标签：iphone, objective-c, ios6

我已将 iOS 5 更新为 iOS 6 。是否需要更改或配置任何设置才能在 Xcode 上运行现有应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:06:23.287

如果您使用的是静态库，则应检查它们是否具有 armv7s 切片，否则您应仅强制使用 armv7

此外，如果您想支持 iphone5，则必须添加默认图像名称 Default-568h@2x.png

还要检查您的视图是否在 4 英寸屏幕上正确显示，如果没有尝试在直接在代码中处理之前尝试使用自动调整大小的蒙版。当然如果你只想支持 ios6 你可以查看 Auto Layout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:05:38.690

取决于您的应用程序，最适合您的是浏览苹果开发者网站上的[发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)，以便了解您需要更改的所有内容。总的来说，你肯定需要研究在 IOS6 中已贬值的轮换 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:47:15.547

为了在 iOS 6 中运行 iOS 5 应用程序，您应该查看已弃用的方法列表。这是因为较低版本的应用程序不能在较高版本中运行。

在这里检查这个链接，我之前提供了不推荐使用的方法的答案:)。

[有谁知道 IOS 6.0 中不推荐使用哪些方法？](https://stackoverflow.com/questions/12793311/does-anyone-know-which-methods-are-deprecated-in-ios-6-0/12793347#12793347)

# jquery - Jquery map hilight，如何将其更改为onclick？

> ID：12858276
> 
> 赞同：-2
> 
> 时间：2012-10-12T11:40:19.083
> 
> 标签：jquery, map

我试图让地图突出显示在点​​击时工作，但我不知道从哪里开始。这是代码：

```
 <script type="text/javascript">
        $(function () {
            $('.map').maphilight();

        });

    </script>

<style type="text/css">

</style>
</head>

<body>

<div id="map">

<img class="map" src="Iceclimbing_test.jpg" width="944" height="1107" usemap="#Map" border="0" />
<map name="Map" id="Map">
  <area id="helmet" shape="poly" coords="361,415,367,409,373,405,378,400,383,396,387,390,391,383,394,376,398,368,402,362,399,358,394,358,389,356,380,352,371,350,363,349,352,350,345,354,336,360,330,366,324,372,320,379,317,384,313,389,310,396,308,403,308,410,311,415,314,419,312,422,313,429,317,437,323,443,327,449,350,439,353,431,356,424" href="#" alt="Helmet" />
</map>
</div>

</body>

</html> 
```

这是插件代码：

```
(function (F) {
    var B, C, I, L, K, H, E, G, A, J;
    B = document.namespaces;
    has_canvas = !! document.createElement("canvas").getContext;
    if (!(has_canvas || B)) {
        F.fn.maphilight = function () {
            return this
        };
        return
    }
    if (has_canvas) {
        E = function (M) {
            return Math.max(0, Math.min(parseInt(M, 16), 255))
        };
        G = function (M, N) {
            return "rgba(" + E(M.substr(0, 2)) + "," + E(M.substr(2, 2)) + "," + E(M.substr(4, 2)) + "," + N + ")"
        };
        C = function (M) {
            var N = F('<canvas style="width:' + M.width + "px;height:" + M.height + 'px;"></canvas>').get(0);
            N.getContext("2d").clearRect(0, 0, N.width, N.height);
            return N
        };
        I = function (P, M, S, O, N) {
            var R, Q = P.getContext("2d");
            Q.beginPath();
            if (M == "rect") {
                Q.rect(S[0], S[1], S[2] - S[0], S[3] - S[1])
            } else {
                if (M == "poly") {
                    Q.moveTo(S[0], S[1]);
                    for (R = 2; R < S.length; R += 2) {
                        Q.lineTo(S[R], S[R + 1])
                    }
                } else {
                    if (M == "circ") {
                        Q.arc(S[0], S[1], S[2], 0, Math.PI * 2, false)
                    }
                }
            }
            Q.closePath();
            if (O.fill) {
                Q.fillStyle = G(O.fillColor, O.fillOpacity);
                Q.fill()
            }
            if (O.stroke) {
                Q.strokeStyle = G(O.strokeColor, O.strokeOpacity);
                Q.lineWidth = O.strokeWidth;
                Q.stroke()
            }
            if (O.fade) {
                F(P).css("opacity", 0).animate({
                    opacity: 1
                }, 100)
            }
        };
        L = function (M) {
            M.getContext("2d").clearRect(0, 0, M.width, M.height)
        }
    } else {
        C = function (M) {
            return F('<var style="zoom:1;overflow:hidden;display:block;width:' + M.width + "px;height:" + M.height + 'px;"></var>').get(0)
        };
        I = function (N, Q, R, U, M) {
            var S, T, O, P;
            S = '<v:fill color="#' + U.fillColor + '" opacity="' + (U.fill ? U.fillOpacity : 0) + '" />';
            T = (U.stroke ? 'strokeweight="' + U.strokeWidth + '" stroked="t" strokecolor="#' + U.strokeColor + '"' : 'stroked="f"');
            O = '<v:stroke opacity="' + U.strokeOpacity + '"/>';
            if (Q == "rect") {
                P = F('<v:rect name="' + M + '" filled="t" ' + T + ' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:' + R[0] + "px;top:" + R[1] + "px;width:" + (R[2] - R[0]) + "px;height:" + (R[3] - R[1]) + 'px;"></v:rect>')
            } else {
                if (Q == "poly") {
                    P = F('<v:shape name="' + M + '" filled="t" ' + T + ' coordorigin="0,0" coordsize="' + N.width + "," + N.height + '" path="m ' + R[0] + "," + R[1] + " l " + R.join(",") + ' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:' + N.width + "px;height:" + N.height + 'px;"></v:shape>')
                } else {
                    if (Q == "circ") {
                        P = F('<v:oval name="' + M + '" filled="t" ' + T + ' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:' + (R[0] - R[2]) + "px;top:" + (R[1] - R[2]) + "px;width:" + (R[2] * 2) + "px;height:" + (R[2] * 2) + 'px;"></v:oval>')
                    }
                }
            }
            P.get(0).innerHTML = S + O;
            F(N).append(P)
        };
        L = function (M) {
            F(M).find("[name=highlighted]").remove()
        }
    }
    K = function (N) {
        var M, O = N.getAttribute("coords").split(",");
        for (M = 0; M < O.length; M++) {
            O[M] = parseFloat(O[M])
        }
        return [N.getAttribute("shape").toLowerCase().substr(0, 4), O]
    };
    J = function (O, N) {
        var M = F(O);
        return F.extend({}, N, F.metadata ? M.metadata() : false, M.data("maphilight"))
    };
    A = function (M) {
        if (!M.complete) {
            return false
        }
        if (typeof M.naturalWidth != "undefined" && M.naturalWidth == 0) {
            return false
        }
        return true
    };
    H = {
        position: "absolute",
        left: 0,
        top: 0,
        padding: 0,
        border: 0
    };
    var D = false;
    F.fn.maphilight = function (O) {
        O = F.extend({}, F.fn.maphilight.defaults, O);
        if (!has_canvas && F.browser.msie && !D) {
            document.namespaces.add("v", "urn:schemas-microsoft-com:vml");
            var N = document.createStyleSheet();
            var M = ["shape", "rect", "oval", "circ", "fill", "stroke", "imagedata", "group", "textbox"];
            F.each(M, function () {
                N.addRule("v\\:" + this, "behavior: url(#default#VML); antialias:true")
            });
            D = true
        }
        return this.each(function () {
            var U, R, Y, Q, T, V, X, S, W;
            U = F(this);
            if (!A(this)) {
                return window.setTimeout(function () {
                    U.maphilight(O)
                }, 200)
            }
            Y = F.extend({}, O, F.metadata ? U.metadata() : false, U.data("maphilight"));
            W = U.get(0).getAttribute("usemap");
            Q = F('map[name="' + W.substr(1) + '"]');
            if (!(U.is("img") && W && Q.size() > 0)) {
                return
            }
            if (U.hasClass("maphilighted")) {
                var P = U.parent();
                U.insertBefore(P);
                P.remove();
                F(Q).unbind(".maphilight").find("area[coords]").unbind(".maphilight")
            }
            R = F("<div></div>").css({
                display: "block",
                background: 'url("' + this.src + '")',
                position: "relative",
                padding: 0,
                width: this.width,
                height: this.height
            });
            if (Y.wrapClass) {
                if (Y.wrapClass === true) {
                    R.addClass(F(this).attr("class"))
                } else {
                    R.addClass(Y.wrapClass)
                }
            }
            U.before(R).css("opacity", 0).css(H).remove();
            if (F.browser.msie) {
                U.css("filter", "Alpha(opacity=0)")
            }
            R.append(U);
            T = C(this);
            F(T).css(H);
            T.height = this.height;
            T.width = this.width;
            X = function (b) {
                var Z, a;
                a = J(this, Y);
                if (!a.neverOn && !a.alwaysOn) {
                    Z = K(this);
                    I(T, Z[0], Z[1], a, "highlighted");
                    if (a.groupBy && F(this).attr(a.groupBy)) {
                        var c = this;
                        Q.find("area[" + a.groupBy + '="' + F(this).attr(a.groupBy) + '"]').each(function () {
                            if (this != c) {
                                var e = J(this, Y);
                                if (!e.neverOn && !e.alwaysOn) {
                                    var d = K(this);
                                    I(T, d[0], d[1], e, "highlighted")
                                }
                            }
                        })
                    }
                    if (!has_canvas) {
                        F(T).append("<v:rect></v:rect>")
                    }
                }
            };
            F(Q).bind("alwaysOn.maphilight", function () {
                if (V) {
                    L(V)
                }
                if (!has_canvas) {
                    F(T).empty()
                }
                F(Q).find("area[coords]").each(function () {
                    var Z, a;
                    a = J(this, Y);
                    if (a.alwaysOn) {
                        if (!V && has_canvas) {
                            V = C(U.get());
                            F(V).css(H);
                            V.width = U.width();
                            V.height = U.height();
                            U.before(V)
                        }
                        a.fade = a.alwaysOnFade;
                        Z = K(this);
                        if (has_canvas) {
                            I(V, Z[0], Z[1], a, "")
                        } else {
                            I(T, Z[0], Z[1], a, "")
                        }
                    }
                })
            });
            F(Q).trigger("alwaysOn.maphilight").find("area[coords]").bind("mouseenter.maphilight", X).bind("mouseout.maphilight", function (Z) {
                L(T)
            });
            U.before(T);
            U.addClass("maphilighted")
        })
    };
    F.fn.maphilight.defaults = {
        fill: true,
        fillColor: "FFFFFF",
        fillOpacity: 0.3,
        stroke: true,
        strokeColor: "EEEEEE",
        strokeOpacity: 0.8,
        strokeWidth: 1,
        fade: true,
        alwaysOn: false,
        neverOn: false,
        groupBy: false,
        wrapClass: true
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:58:01.660

浏览了在线文档后，没有选项可以在鼠标单击时突出显示区域。也就是说，修改脚本以获得您想要的内容应该非常简单。[在第 318 行](https://github.com/kemayo/maphilight/blob/master/jquery.maphilight.js#L318)看这里：

```
$(map).trigger('alwaysOn.maphilight').find('area[coords]')
      .bind('mouseover.maphilight', mouseover)
      .bind('mouseout.maphilight', function(e) { clear_canvas(canvas); }); 
```

您可以尝试将其更改为：

```
$(map).trigger('alwaysOn.maphilight').find('area[coords]')
      .bind('click.maphilight', mouseover)
      .bind('mouseout.maphilight', function(e) { clear_canvas(canvas); }); 
```

我认为这可以解决问题，但是当您将鼠标移出单击区域时，它仍然会清除画布。

那应该是一个开始。

*免责声明：我不知道这是否会起作用。*

# nosql - 构建cassandra数据库

> ID：12858282
> 
> 赞同：3
> 
> 时间：2012-10-12T11:40:52.500
> 
> 标签：nosql, cassandra

关于 Cassandra，我有一点不明白。比如说，我有一个类似于 Facebook 的网站，人们可以在其中分享、点赞、评论、上传图片等。

现在，假设我想获得我朋友所做的所有事情：

*   Username1 喜欢你的评论
*   用户名 2 更新了他的头像

等等。

因此，经过大量阅读，我想我需要做的是为每一件事创建新的列族，例如：`user_likes` `user_comments`, `user_shares`. 基本上，你能想到的任何事情，即使在我这样做之后，我仍然需要为大多数列创建二级索引，以便我可以搜索数据？即便如此，我怎么知道哪些用户是我的朋友？我是否需要先获取所有朋友的 id，然后为每个用户 id 搜索所有这些 Column Families？

**编辑** 好的，所以我做了更多的阅读，现在我对事情的理解更好了，但我仍然无法真正弄清楚如何构建我的表格，所以我会设置一个赏金，我想得到一个清楚的例子来说明我的如果我想以这种顺序存储和检索数据，表应该看起来像：

*   全部
*   喜欢
*   评论
*   收藏夹
*   下载
*   分享
*   留言

所以假设我想检索我所有朋友或我关注的人的最后十个上传文件，这就是它的样子：

`John uploaded song AC/DC - Back in Black 10 mins ago`

评论和分享之类的每件事都与此类似...

现在最大的挑战可能是一起检索所有类别的最后 10 个东西，所以列表将是所有东西的混合......

现在我不需要一个完整详细的表格的答案，我只需要一些非常清晰的例子来说明我将如何像我一样构建和检索`mysql`数据`joins`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:54:48.830

使用 sql，您可以构建表以规范化数据，并使用索引和连接进行查询。使用 cassandra，您无法做到这一点，因此您需要构建表以服务于您的查询，这需要非规范化。

您想查询您的朋友上传的项目，一种方法是每个用户没有一个表，并且每当该用户的朋友上传某些内容时写入该表。

```
friendUploads { #columm family
    userid { #column 
        timestamp-upload-id : null #key : no value
    }
 } 
```

举个例子，

```
friendUploads {
    userA {
         12313-upload5 : null
         12512-upload6 : null
         13512-upload8 : null
    }
}

friendUploads {
    userB {
         11313-upload3 : null
         12512-upload6 : null
    }
} 
```

请注意，上传 6 被复制到两个不同的列，因为上传 6 的人是用户 A 和用户 B 的朋友。

现在要查询朋友的朋友上传显示，在 userid 列上做一个限制为 10 的 getSlice。这将返回前 10 个项目，按键排序。

要将最新项目放在首位，请使用[反向比较器](http://thelastpickle.com/2011/10/03/Reverse-Comparators/)，将较大的时间戳排序在较小的时间戳之前。

此代码的缺点是当用户 A 上传歌曲时，您必须执行 N 次写入来更新friendUploads 列，其中 N 是用户 A 的朋友的人数。

对于与每个 timestamp-upload-id 键关联的值，您可以存储足够的信息来显示结果（可能在 json blob 中），或者您可以不存储任何内容，并使用 uploadid 获取上传信息。

为避免重复写入，您可以使用如下结构，

```
userUploads { #columm family
    userid { #column 
        timestamp-upload-id : null #key : no value
    }
 } 
```

这存储特定用户的上传。现在当想要显示用户 B 的朋友的上传时，您必须进行 N 次查询，用户 B 的每个朋友一个，并将结果合并到您的应用程序中。查询速度较慢，但​​写入速度较快。

最有可能的是，如果用户可以有数千个朋友，您会使用第一种方案，并进行更多的写入而不是更多的查询，因为您可以在用户上传后在后台进行写入，但查询必须在用户进行时进行在等待。

[作为非规范化的一个例子，看看当单击发生](http://news.ycombinator.com/item?id=2180840)时 twitter rainbird 做了多少次写入。每次写入用于支持单个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:11:21.383

在某些方面，您“可以”将 noSQL 视为关系存储。在其他情况下，您可以进行非规范化以使事情变得更快。例如，PlayOrm 的 @OneToMany 像这样存储了许多

```
user1 -> friend.user23, friend.user25, friend.user56, friend.user87 
```

这是宽行方法，因此当您找到您的用户时，您拥有他朋友的所有外键。每行可以是不同的长度。您可能还存储了反向引用，因此用户可能引用了将他标记为朋友但他没有将其标记回来的人（我们称其为好友），因此您可能有

```
user1 -> friend.user23, friend.user25, buddy.user29, buddy.user37 
```

请注意，如果设计正确，您可能不需要“搜索”数据。也就是说，使用 PlayOrm，您仍然可以执行 Scalable SQL 和连接（您只需要弄清楚如何对表进行分区，以便它可以扩展到数万亿行）。

一行中可以有数百万列，也可能只有 10 列。实际上，本月我们正在更新 PlayOrm 中的大量文档和 noSQL 模式，所以如果您密切关注这一点，您还可以了解更多信息关于那里的一般noSQL。

院长

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T19:12:30.447

将每个数据库查询视为对另一台机器上运行的服务的请求。您的目标是尽量减少这些请求的数量（因为每个请求都需要网络往返）。

这是与 RDBMS 范式的主要区别：在 SQL 中，您通常会使用连接和二级索引。在 cassandra 中，连接是不可能的，因为相关数据将驻留在不同的服务器上。诸如物化视图之类的东西在 cassandra 中用于相同目的（通过单个查询获取所有相关数据）。

我建议阅读这篇文章： http: [//maxgrinev.com/2010/07/12/do-you-really-need-sql-to-do-it-all-in-cassandra/](http://maxgrinev.com/2010/07/12/do-you-really-need-sql-to-do-it-all-in-cassandra/)

并查看 twissandra 示例项目[https://github.com/twissandra/twissandra](https://github.com/twissandra/twissandra) 这是您描述的项目类型的优化技术的不错集合。

# python - 将文件映射到内存

> ID：12858287
> 
> 赞同：4
> 
> 时间：2012-10-12T11:41:06.343
> 
> 标签：python, memory, operating-system, fifo, fastq

我将首先解释我的问题是什么，因为了解我想要什么很重要:-)。

我正在研究一个 python 编写的管道，它使用几个外部工具来执行几个基因组数据分析。其中一个工具适用于非常大的 fastq 文件，这些文件最终不再是纯文本文件。

通常，这个 fastq 文件是 gzip 压缩的，因为它们是纯文本，所以压缩率非常高。大多数数据分析工具都可以处理压缩文件，但我们有一些不能。所以我们正在做的是解压缩文件，使用它们，最后重新压缩。

可以想象，这个过程是：

*   慢点
*   高磁盘消耗
*   占用带宽（如果在 NFS 文件系统中工作）

因此，我试图找出一种“欺骗”这些工具以直接处理 gzip 文件的方法，而无需接触工具的源代码。

我考虑过使用 FIFO 文件，并尝试过，但如果该工具多次读取文件，或者该工具在文件周围寻找，则不起作用。

所以基本上我有问题：

*   有没有办法将文件映射到内存中，以便您可以执行以下操作：

    `./tool mapped_file`（其中 mapped_file 并不是真正的文件，而是对内存映射文件的引用。

*   关于如何实现我的目标，您还有其他建议吗？

非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:11:07.103

从[这个答案](https://serverfault.com/a/43389)中，您可以将整个未压缩文件加载到 ram 中：

```
mkdir /mnt/ram
mount -t ramfs ram /mnt/ram
# uncompress your file to that directory
./tool /mnt/ram/yourdata 
```

然而，这有将所有内容加载到内存的缺点：您需要有足够的空间来保存未压缩的数据！

完成后使用`umount /mnt/ram`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:57:41.390

考虑查看 Pistoia Alliance [Sequence Squeeze](http://www.sequencesqueeze.org)竞赛中的获奖作品，该竞赛对 FASTQ 压缩工具进行了评级。您可能会找到一个工具，它通过随机访问和更快的解压缩性能来减少 IO 开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T11:45:32.193

如果您的脚本可以从标准输入读取，那么一种可能性是使用 zcat 解压缩和流式传输，然后将其通过管道传输到您的脚本。

像这样的东西：

```
zcat large_file.gz | ./tool 
```

如果您还想压缩结果，则可以再次将输出通过管道传输到 gzip：

```
zcat large_file.gz | ./tool | gzip - > output.gz 
```

否则，您可以查看python对内存映射的支持：

[http://docs.python.org/library/mmap.html](http://docs.python.org/library/mmap.html)

最后，您可以将 ASCII fastq 文件转换为 BAM 格式，该格式未压缩（本身），但使用更紧凑的格式可以节省空间。请参阅以下内容：

[http://picard.sourceforge.net/command-line-overview.shtml#FastqToSam](http://picard.sourceforge.net/command-line-overview.shtml#FastqToSam)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:18:10.513

如果您在 linux 上，您可以编写一个 fuse 文件系统驱动程序：http: [//pypi.python.org/pypi/fuse-python](http://pypi.python.org/pypi/fuse-python)

fuse 驱动程序需要对文件进行压缩和解压。也许这样的事情已经存在。

# excel - 如何对格式化为日期的单元格进行 COUNTIFS

> ID：12858292
> 
> 赞同：0
> 
> 时间：2012-10-12T11:41:38.320
> 
> 标签：excel, vba

打扰一下，再次谈谈 COUNTIFS

```
Dim a As String    
a = ct.Range("B4").Text ' B4 is formatted as date
Range("C6").Value = Application.WorksheetFunction.CountIfs(rDat, a, rSec, "1") 
```

rDat 和 rSec 是定义的范围（在另一张纸上）。
rDat 与 ct.B4 具有相同的格式（即日期）
，结果我得到“0”，但它是错误的。
我试图删除日期格式，并将格式设置为文本 - 它有效。
但我需要 rDat 和 B4 中的日期格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:00:27.847

```
Dim a As Date
a = ct.Range("B4") ' do not convert B4 to text
Range("C6").Value = Application.WorksheetFunction.CountIfs(rDat, a, rSec, "1") 
```

# java - 为什么我不能在我的属性文件中读取整数？

> ID：12858299
> 
> 赞同：10
> 
> 时间：2012-10-12T11:42:04.903
> 
> 标签：java, file-io, properties

我正在尝试用 Java 编写一个配置文件，并将我的端口号放入其中，以便我的 HTTP Web 服务器连接到根路径。

配置文件：

```
root= some root
port=8020 
```

我正在尝试访问这样的属性：

```
FileInputStream file = new FileInputStream("config.txt");       
//loading properties from properties file        
config.load(file);

int port = Integer.parseInt(config.getProperty("port"));   
System.out.println("this is port " + port); 
```

如果我在`getProperty`方法中使用单个参数执行此操作，我会收到此错误

```
"java.lang.NumberFormatException: null" 
```

但是，如果我这样访问它

`int port = Integer.parseInt(config.getProperty("port", "80"));`

有用。

另外，它适用于`config.getProperty("root");`所以我不明白......

编辑：

```
import java.net.*;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.*;

public class Server
{

    public static void main(String[] args) throws Exception
    {
        boolean listening = true;
        ServerSocket server = null;     
        Properties config = new Properties();
        int port = 0;
        try
        {              
            //Reading properties file
            FileInputStream file = new FileInputStream("config.txt");       
            //loading properties from properties file        
            config.load(file);

            port = Integer.parseInt(config.getProperty("port"));   
            System.out.println("this is port " + port);

            System.out.println("Server binding to port " + port);
            server = new ServerSocket(port);

        }
        catch(FileNotFoundException e)
        {
            System.out.println("File not found: " + e);
        }
        catch(Exception e)
        {
            System.out.println("Error: " + e);
            System.exit(1);
        }

        System.out.println("Server successfully binded to port " + port);

        while(listening)
        {
            System.out.println("Attempting to connect to client");
            Socket client = server.accept();
            System.out.println("Successfully connected to client");
            new HTTPThread(client, config).start();
        }

        server.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T11:50:16.607

> 你能提供一个独立的例子来重现你的问题吗？
> 
> 对不起，我不明白

当我跑

```
Properties prop = new Properties();
prop.setProperty("root", "some root");
prop.setProperty("port", "8020");
prop.store(new FileWriter("config.txt"), "test");

Properties config = new Properties();
//loading properties from properties file
config.load(new FileReader("config.txt"));

int port = Integer.parseInt(config.getProperty("port"));
System.out.println("this is port " + port); 
```

我明白了

```
this is port 8020 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-13T08:10:44.767

**不同的是**

```
root= some root #STRING

port=8020  #INTEGER 
```

所以要获得根属性，你可以这样做..

```
props.getProperty("root"); //Returns a String 
```

对于整数

```
props.get("port"); //Returns a Object 
```

* * *

**Java Properties 类的工作原理**

```
public String getProperty(String key) {
    Object oval = super.get(key);
    String sval = (oval instanceof String) ? (String)oval : null;
    return ((sval == null) && (defaults != null)) ? defaults.getProperty(key) : sval;
    } 
```

* * *

*//顺便提一句。Peter Lawrey 将端口作为字符串 - 这就是为什么它在他的版本中有效。*

**阅读：** [get 和 getProperty 之间的区别](https://stackoverflow.com/questions/11104395/difference-between-get-vs-getproperty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-06T22:44:51.590

```
properties.get("key) - should work for any object type - convert it later to a specific type
properties.getProperty("key") -- ll always get a string regardless of a value type in the properties. 
```

# dynamics-crm-2011 - 在 CRM 的电子邮件活动中设置发件人和收件人地址

> ID：12858300
> 
> 赞同：0
> 
> 时间：2012-10-12T11:42:06.213
> 
> 标签：dynamics-crm-2011

嗨，如何使用 C# Silverlight 在电子邮件活动中设置收件人地址和发件人地址。

请建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:12:38.563

此示例取自 CRM 2011 SDK。这里的发件人是一个用户，而邮件的接收端是一个联系人。

如您所见，to 和 from（cc 和 bcc 也是如此）是一个 ActivityParty 数组。其中partyid 是实体引用。

```
var fromParty = new ActivityParty
{
    PartyId = new EntityReference(SystemUser.EntityLogicalName, _userId)
};

var toParty = new ActivityParty
{
    PartyId = new EntityReference(Contact.EntityLogicalName, _contactId)
};

var email = new Email
{
    To = new ActivityParty[] { toParty },
    From = new ActivityParty[] { fromParty }
}; 
```

# wcf - 将带有 WebRole 的 WCF 服务部署到非 Azure Hoster

> ID：12858303
> 
> 赞同：0
> 
> 时间：2012-10-12T11:42:15.500
> 
> 标签：wcf, azure

我有一个带有一个 WebRole 和一个 WorkerRole 的 WCF 服务，用于与 Azure 数据库进行通信。此服务部署到 Windows Azure 云中。一切正常。

但是现在，我有一个（或多或少是学术性的）问题：是否可以将此服务部署到另一个托管商，而不是 Azure 云。如果是，则必须更改程序的哪些部分以及在其他托管环境中需要哪些软件（即 IIS）。

这个问题的背景是：我的客户想知道他是否独立于Azure Cloud。

非常感谢你的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:20:41.190

**简单的答案**

当您直接在 Visual Studio 中运行代码（即不在模拟器中）时会发生什么？

**长答案**

在 Azure 中创建角色时，Visual Studio 会向项目中添加一个继承 RoleEntryPoint 的类。此类包含 OnStart、OnStop 和 Run 的函数。

对于 WebRole，这个类不是必需的，事实上，创建的对象与您的 ASP.NET 应用程序位于一个单独的进程中。如果您在这里有任何代码，当您在本地（或其他云）上运行它时，您需要将它放在其他地方。也许是 Windows 服务，也许是 Global.asax？

至于 WorkerRole，它也有一个 RoleEntryPoint，但这是您的应用程序的主要入口点。在这种情况下，您可能可以在 Visual Studio 中创建一个新的 Windows 服务项目，并重新使用相同的逻辑。无论您在“运行”函数中添加了什么代码，您都可以只移动到一个共享 DLL，该 DLL 可以从 WorkerRole 或 Windows 服务访问。

至于其他 Azure 功能（blob、队列、表、SQL 数据库、访问控制服务、服务总线等），这些仍然可以从 Azure 外部使用，或者您可以为每个功能寻找替代方案。出于说明目的，您可以这样做：

队列 -> MSMQ

Blob -> 文件系统

SQL 数据库 -> SQL Server

如果您使用[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)模式，您可以抽象出这些技术的实现，以使您的应用程序不知道正在使用哪种底层技术。这使得切换实现（和云供应商）变得非常容易。

# asp.net - 跨多个平台的最佳同步数据库

> ID：12858304
> 
> 赞同：-1
> 
> 时间：2012-10-12T11:42:19.790
> 
> 标签：asp.net, mysql, sql-server, winforms, postgresql

我正在设计一个应用程序，它将在 windows、wed、driod、iOS 和 windows phone 上运行。我对什么是最好的数据库以及什么是最好的架构方法感到困惑。

**第一个想法** 拥有一个驱动网站和每个客户信息的主数据库，并在客户端机器上拥有更小的轻量级数据库，仅与订阅用户相关的信息子集与主数据库同步。这意味着如果我是用户 101，那么我的 windows 应用程序、driod、iOS 应用程序只会在本地数据库中包含我的数据子集，这将使我能够离线工作，但是当我在线时，我可以与主数据库同步。

**第二个想法** 给每个客户他们在服务器上的数据库，然后让他们独立的操作系统的应用程序与他们自己的数据库同步。我的想法是同步不那么复杂。

我的目标是做到这一点，不会因维护问题而陷入困境，同时保持系统灵活增长。

所有的建议或问题都会很棒。还有什么数据库最好？还有什么同步技术最好？

该网站将在 Asp.net 中。Windows 应用程序也将在 .Net 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:06:25.017

理想情况下，创建一个中央数据库并创建 Web 服务来连接它。这样，您用来连接的设备和软件只需要了解基本的 http 消息传递。NodeJS 有一个非常好的 PostgreSQL 库，您可以将它与一个名为 Express 的 nodejs 模块一起使用，它允许您创建到数据库过程的路由。例如，对[http://myaddress.com/select_all_employees](http://myaddress.com/select_all_employees)的调用将路由到调用存储过程的调用，该存储过程将以 json 字符串或其他标准格式选择并返回所有员工。任何设备及其开发框架都应该能够进行这种简单的网络调用。

# java - 外部硬件信息

> ID：12858307
> 
> 赞同：5
> 
> 时间：2012-10-12T11:42:25.747
> 
> 标签：java, android, android-ndk, usb-otg

是否有可能检查计算机中连接的外部硬件是什么

获取每个硬件的状态是在线还是离线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:00:59.410

如果您有蜂窝或更高版本，请使用 USB 管理器服务

```
 UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
    HashMap<String, UsbDevice> devices = manager.getDeviceList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:50:55.673

您可能需要借助 linux 内核，所以我认为只需执行一个简单的命令即可为您提供连接到设备的设备列表

这里是

```
Process process = Runtime.getRuntime().exec("cat /proc/devices");
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 
```

或者你可以使用[udevinfo](http://www.axllent.org/docs/data_storage/udev_and_external_devices)我不知道它的详细信息，但谷歌在那里为你服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:59:14.547

为此，您需要使用`Runtime.exec()`.

对于 Windows 和 Unix，有很多示例说明如何执行此操作，但对于 Android，我怀疑需要另一个命令。

# c# - 以一般格式读取excel获取日期

> ID：12858310
> 
> 赞同：0
> 
> 时间：2012-10-12T11:42:29.550
> 
> 标签：c#, .net, excel, datetime, oledb

在应用程序中，我们有一个带有多个选项卡的向导。在第一个选项卡上，我们可以使用浏览按钮选择 Excel 工作表路径。选择 excel 的那一刻，excel 文件内容将加载到数据集中（所有内容均采用正确格式，包括 DATE 字段）。然后单击下一步转到下一个向导选项卡。

但是如果文件是打开的，程序会加载 excel，这一次所有的日期字段都是通用格式的。例如：2006 年 6 月 22 日为 38890

我们正在尝试查找 excel 是否已打开或被其他格式使用：

```
 bool IsFilebeingUsed(FileInfo file)
    {
        FileStream stream = null;

        try
        {
            stream = file.Open(FileMode.Open, FileAccess.Read, FileShare.None);
        }
        catch (IOException)
        {
            return true;
        }
        finally
        {
            if (stream != null)
                stream.Close();
        }
        return false;
    } 
```

我们尝试读取excel的方式如下：

```
string sql = string.Format("SELECT * FROM [{0}]", excelSheetName);
internal OleDbCommand command = new OleDbCommand();
command.CommandText = sql;
OleDbDataReader oleRdr = command.ExecuteReader();

DataTable dataTable = new DataTable();
datatable.TableName = excelSheetName;
dataTable.Load(oleRdr); 
```

谁能告诉应用程序或代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:56:02.773

更多更新的问题可以在[这里](https://stackoverflow.com/a/13227991/815600)找到。

所以我以一种不令人满意的方式解决了这个问题。我注意到我的分析和实验并最终得出结论，当 Excel 在 MS-Excel 中打开并且我们尝试使用 OleDbDataReader 在 C# 中读取 excel 时，某些 DataTypes 没有正确读取，不幸的是 DateTime 是其中之一。

作为一种解决方案，目前我们正在强制用户在读取 excel 文件时关闭 excel。我什至注意到，如果 Excel 在 MS-Excel 中以只读模式打开，则读取的数据对于包括 DateTime 在内的所有 DataType 都是正确的。但是在写入模式下打开时，读取的数据不正确。

这些是我的分析结果，我知道/同意结果有点奇怪。如果有人不同意或有其他想法，请告诉我并请纠正我。

# sql - TSQL - 获取当前时间的最后一秒

> ID：12858311
> 
> 赞同：3
> 
> 时间：2012-10-12T11:42:31.710
> 
> 标签：sql, sql-server-2008, tsql, datetime

我需要使用查询来根据表中的字段获取一小时的最后一秒。

我已经处理过这个查询，它似乎有效（SQL Server 2008）

> SELECT DATEADD(S, -1, DATEADD(hh, 1, dateadd(minute, datediff(minute,0,GETDATE()) / 60 * 60, 0)))

这是解决此问题的最佳方法，还是有更清洁（更具可读性）和更快的方法。我正在考虑速度，因为这将在具有大量字符串处理的表上运行，并且正在尝试优化我可以优化的地方。

编辑：我最初将这个问题的文本和主题发布为“当前时间的最后一分钟”，这是为了阅读“最后一秒”。我的头脑显然已经停止了这一天。为我的错误道歉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:49:40.527

这个怎么样：

```
 select convert(char(13),GETDATE(),121)+':59:59.000' 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5168)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:58:26.527

您的查询将为您提供最后**一秒**而不是**一分钟**。
这是另一种方式。

```
select dateadd(second, -1, dateadd(hour, 1+datediff(hour, 0, getdate()), 0)) 
```

要获得最后一分钟，您可以使用

```
select dateadd(minute, -1, dateadd(hour, 1+datediff(hour, 0, getdate()), 0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:03:26.857

实际上，我的想法与 Joe 几乎相同，但我试图找出哪个更快，所以我跑了：

```
SELECT DATEADD(S, -1, DATEADD(hh, 1, dateadd(minute, datediff(minute,0,GETDATE()) / 60 * 60, 0)))
GO 1000 
```

进而：

```
select SUBSTRING( convert(varchar(20), GETDATE(),20),1,14)+'59:59'
GO 1000 
```

第一个查询在 44 秒内运行，第二个在 42 秒内运行，因此差别不大。也许如果您尝试查询，它会产生影响，但据我所知，它几乎是一样的

# java - 如何仅使用 Java 为 Google 翻译进行 HttpRequest？

> ID：12858313
> 
> 赞同：1
> 
> 时间：2012-10-12T11:42:37.400
> 
> 标签：java, httpwebrequest

```
http://translate.google.nl/#en/nl/experiment%20translator
```

我怎样才能请求这个http。并返回翻译的结果？我不能使用任何外部 API。那么我如何联系这个网址并返回它呢？

# java - 基于寄存器的 VM 与基于堆栈的 VM 之间的主要区别是什么？

> ID：12858316
> 
> 赞同：10
> 
> 时间：2012-10-12T11:42:49.180
> 
> 标签：java, android, jvm, dalvik

今天我正在阅读[一些关于 Andoird 基础的幻灯片](http://www.slideshare.net/mdesjardins/android-development-the-basics)，出现了以下短语：

> Dalvik VM 是基于寄存器而不是基于堆栈的。

那么，**基于寄存器的虚拟机与基于堆栈的虚拟机之间的主要区别是什么？**

* * *

第二个链接足够回答我的问题：

[http://markfaction.wordpress.com/2012/07/15/stack-based-vs-register-based-virtual-machine-architecture-and-the-dalvik-vm/](http://markfaction.wordpress.com/2012/07/15/stack-based-vs-register-based-virtual-machine-architecture-and-the-dalvik-vm/)

另一个链接：

[http://androidjayavelu.blogspot.co.at/2011/06/dalvik-virtual-machine-vs-java-virtual.html](http://androidjayavelu.blogspot.co.at/2011/06/dalvik-virtual-machine-vs-java-virtual.html)

# c++ - 让编译器将 const 主要类型假定为类？

> ID：12858319
> 
> 赞同：1
> 
> 时间：2012-10-12T11:42:53.203
> 
> 标签：c++, compiler-construction, types

> 有人可以为此建议一个更好的标题吗？

我有一个问题，但我不知道如何用正确的英语表达。所以我会通过一些例子来问它：

假设我有一个名为 Double 的结构：

```
struct Double
{
    // Declarations/Definitions here
} 
```

它被用作主要类型的替身。几乎完全一样，除了我的班级有一些功能，比如：

```
void Double::event_serialize(Stream& stream);
String Double::event_representate(); 
```

所以我必须为这种类型（和其他类型）创建一个包装器。

现在我有一个这样的功能，例如：

```
template<class T> void print(T value)
{
    std::cout << value.event_representate() << std::endl;
} 
```

现在我可以将它用作一个组合，例如：

```
Double x = 3.14;
print(x); 
```

但是，如果我想将其用作：

```
print(3.14); 
```

编译器将执行以下操作：

```
const double __invis_value_1 = 3.14;

print(__invis_value_1); 
```

正确的？

我如何确保（如果可能）编译器会将其检测为 Double 而不是主要类型 double？

我希望有人可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:53:56.337

`print`您可以提供转换`double`为的重载`Double`：

```
void print(double value) {
    print<Double>(Double(value));
} 
```

您可能考虑的另一种选择是使用用户定义的文字：

```
inline constexpr Double operator"" _D(long double value) {
    return Double(value);
} 
```

然后你可以写：

```
 print(3.14_D); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:49:31.297

您可以创建一个 Double 的构造函数，该构造函数将 build in double 作为参数，然后在您的 3.14 示例中，它将被隐式转换为 double。你甚至可以给它一个默认值。

```
struct Double
{
    // Declarations/Definitions here
    Double(double value = 0.0);
} 
```

# javascript - 将普通的json数据转换成谷歌可视化DataTable能理解的数据？

> ID：12858320
> 
> 赞同：2
> 
> 时间：2012-10-12T11:42:52.813
> 
> 标签：javascript, json, google-visualization

我刚开始使用谷歌图表和它非常酷的东西。唯一的问题是我找不到任何使用从 sql server 视图馈送的数据来实现这一点的好例子。所以我创建了一个示例项目来促进这个功能，但我正在努力让它工作。请在下面找到我的代码：

```
<script type="text/javascript">
        // Load the Visualization API and the piechart package.
        google.load('visualization', '1', { 'packages': ['corechart'] });

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var jsonData = $.ajax({
                url: "api/Google",
                dataType: "json",
                async: false
            }).responseText;

            alert(jsonData);
            // Create our data table out of JSON data loaded from server.
            var data = new google.visualization.DataTable(jsonData);

            data.addColumn('string', 'Employee');
            data.addColumn('number', 'TotalNoOfReports');

            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, { width: 400, height: 240 });
        }

    </script> 
```

我得到了正确的 json 数据字符串，但是当我将 jsonData 传递给 DataTable() 类时，它没有返回图表的数据。我也尝试调用 data.AddRows(jsonData)，但仍然没有运气。我猜 google 不理解普通 json 数据的结构，要求它采用以下格式：

```
{"cols":[{"id":"Col1","label":"","type":"date"}],
  "rows":[
    {"c":[{"v":"a"},{"v":"Date(2010,10,6)"}]},
    {"c":[{"v":"b"},{"v":"Date(2010,10,7)"}]}
  ]
} 
```

有没有办法让我的 jsonData 看起来像上面的结构，可能更通用。唯一的图表示例是静态的，有时您需要读取数据库，请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:56:03.033

我对这个主题的了解非常有限，但是如果您首先将 json 数据转换为可读的内容，然后执行循环以添加行怎么办？就像是：

```
var jsondata = eval ("(" + JSONObject + ")"); 
```

接着

```
for(var key in jsondata) {

    data.addRows (row); 
```

我知道这是一个非常有限且简短的答案，但也许其他人会有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:21:42.030

响应格式略有不同，您只粘贴了 dataTable 部分，但它还包含状态码、请求 Id 和 api 版本：

```
{version:'0.6',reqId:'0',status:'ok',sig:'5982206968295329967',table:{cols:[{id:'Col1',label:'',type:'number'},{id:'Col2',label:'',type:'number'},{id:'Col3',label:'',type:'number'}],rows:[{c:[{v:1.0,f:'1'},{v:2.0,f:'2'},{v:3.0,f:'3'}]},{c:[{v:2.0,f:'2'},{v:3.0,f:'3'},{v:4.0,f:'4'}]},{c:[{v:3.0,f:'3'},{v:4.0,f:'4'},{v:5.0,f:'5'}]},{c:[{v:1.0,f:'1'},{v:2.0,f:'2'},{v:3.0,f:'3'}]}]}}; 
```

你可以在这里读更多关于它的内容 ：

[https://developers.google.com/chart/interactive/docs/dev/implementing_data_source](https://developers.google.com/chart/interactive/docs/dev/implementing_data_source)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T11:46:06.280

添加一条语句来解析您的 json 字符串，例如

```
var obj = $.parseJSON(jsonData); 
```

并将解析的对象传递给 google DataTable

```
var data = new google.visualization.DataTable(obj); 
```

# sql-server - SQL Server 2008 R2 中的 ODBC 连接失败

> ID：12858321
> 
> 赞同：0
> 
> 时间：2012-10-12T11:42:55.700
> 
> 标签：sql-server

当我尝试从我的客户端计算机创建 ODBC 连接时，我收到了屏幕截图中的错误。

我的服务器机器是 64 位的，我的客户端机器是 32 位的。你知道吗![在此处输入图像描述](../Images/2e3e59f6823df207ae76322e03395dc8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:36:27.447

您是否让您的服务器接受远程连接？标准安装后它不接受远程连接，您可以使用“SQL Server 配置管理器”在服务器上更改它

当您打开它时，您必须启用 TCP/IP 客户端和 TCP 协议。之后，您必须重新启动 SQL Server 服务并在防火墙中打开端口 1433。如果是标准安装就可以了。

您还可以查看 sql server 属性（通过 SQL Server Management Server），然后在连接选项卡上启用远程访问。

希望能帮助到你 ：）

# heroku - 如何在 Heroku 上将 rake 任务作为工作进程运行？

> ID：12858324
> 
> 赞同：3
> 
> 时间：2012-10-12T11:43:07.367
> 
> 标签：heroku, rake-task, worker-process

假设我已将 Heroku 应用程序扩展为 1 个工作进程，但是如何指定具有特定名称的 rake 任务应作为工作进程运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:57:58.040

在您的项目中创建一个 Procfile，然后像这样将 rake 任务放入其中

```
worker: bundle exec rake my:cool:rake_task 
```

更多信息在这里：[https ://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

更新（2014 年 4 月）：

如果你想像 cron 作业一样安排你的 rake 任务，你可以使用[Heroku Scheduler](https://addons.heroku.com/marketplace/scheduler)

详细信息在这里：[https ://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)

# java - 运行 gwt 应用程序时出现 BindException

> ID：12858333
> 
> 赞同：2
> 
> 时间：2012-10-12T11:43:38.583
> 
> 标签：java, gwt

运行 gwt 应用程序时出现以下错误。

> java.net.BindException：地址已在使用中：在 sun.nio.ch.ServerSocketChannelImpl.bind（Unknown Source）在 sun.nio.ch.Net.bind（Native Method）在 sun.nio.ch.ServerSocketAdaptor.bind 绑定（未知来源）在 org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:205) 在 org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:304) 在 org.mortbay.component.AbstractLifeCycle .start(AbstractLifeCycle.java:39) 在 org.mortbay.jetty.Server.doStart(Server.java:233) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39) 在 com.google.gwt。 dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672) 在 com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509) 在 com.google.gwt.dev.DevModeBase.startUp(DevModeBase. java:1068) 在 com.google.gwt.dev.DevModeBase。在 com.google.gwt.dev.DevMode.main(DevMode.java:311) 运行（DevModeBase.java:811）

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:04:20.363

You have to stop all the instances running. If you do click in the red button you only stop one instance. You have to choose the Development mode tab, do click in the left down corner (name of your project), and check all instances.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:48:57.757

您尝试使用的*端口*
已被使用： 其中一种可能性：

*当一个旧实例已经在运行时，您启动了另一个服务器实例*

要解决这个问题：

1.  停止所有正在运行的实例
2.  从属性中检查每次服务器启动时使用不同端口的复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:47:16.587

尝试更改服务器的端口号以进行 JVM 绑定。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T11:44:39.410

可能您的应用程序已经在运行，或者其他东西正在使用该端口。默认情况下，DevMode 使用 8888 端口。如果它被其他应用程序使用，您可以更改端口。

在 Eclipse 中，您可以通过更改 Web 应用程序的端口字段来更改端口，在运行配置下（服务器选项卡中的端口）。![在此处输入图像描述](../Images/e04a860cf7b7511b26083602f1d9ce5e.png)或者，如果您使用 gwt 插件（通过使用 url 中的 ?gwt.codesvr）附加到您的应用程序，默认端口是 9997，您可以从相同的运行配置更改 GWT 选项卡中的端口。![在此处输入图像描述](../Images/d0871b7bc3668f492440b27215057fe3.png)

如果您在其他 IDE 或命令行中运行，则可以使用“开发模式选项”部分中的详细信息（请参阅：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging) ://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging ） -port, -bindAddress和 -codeServerPort 选项。

# c# - Umbraco Membership - VS 告诉我我的代码已过时，但新代码在哪里？

> ID：12858337
> 
> 赞同：0
> 
> 时间：2012-10-12T11:43:54.217
> 
> 标签：c#, visual-studio, c#-4.0, umbraco, membership

我已经完成了这个非常有帮助的教程：http: [//www.blogfodder.co.uk/2011/12/31/umbraco-membership-templates](http://www.blogfodder.co.uk/2011/12/31/umbraco-membership-templates)

但是 VS 告诉我我所有的方法都过时了。它告诉我除了设置成员类型之外的所有内容的替换方法。最初这是在 Member.MakeNew 方法中通过传递 MemberType 作为参数来完成的。

我去过 Umbraco 网站并查看了有关会员资格的文档，但有一个很大的说明：“注意：此信息已过时，应更新。” [http://our.umbraco.org/wiki/reference/api-cheatsheet/working-with-members](http://our.umbraco.org/wiki/reference/api-cheatsheet/working-with-members)

有谁知道我在哪里可以找到一些用于创建成员的更新代码？是的，我花了一些时间在谷歌上寻找，但我能找到的只是旧代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:20:38.077

Umbraco 从 4.5 开始使用 .net 成员资格，甚至可能在此之前。

要创建用户，请调用 Membership.CreateUser 方法

*   [http://msdn.microsoft.com/en-us/library/system.web.security.membership.createuser(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membership.createuser(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:23:32.667

我已经成功地更新了我的代码以使用 .net 成员资格，而没有太多麻烦。

Membership.CreateUser(...) 替换 Member.MakeNew(...)

Roles.AddUserToRole(newMember,umbracoGroup) 替换 newMember.AddGroup(umbracoGroup.Id)。

但是根据这里的这篇文章[http://our.umbraco.org/forum/developers/extending-umbraco/14614-Using-membership-provider-to-create-members-from-code](http://our.umbraco.org/forum/developers/extending-umbraco/14614-Using-membership-provider-to-create-members-from-code)，如果你使用.net会员，只能通过在 web.config 中设置来拥有 1 个 MemberType。

所以希望我能够坚持使用 1 个 MemberType，否则我将回滚我的代码以使用 Umbraco Membership 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T13:37:26.900

如果您使用 umbraco 7 和 6 的某些更高版本，您可能想要这样做

```
IMember newMember = ApplicationContext.Current.Services.MemberService.CreateMember(emailAddress, emailAddress, memberName, memberTypeAlias); 
```

或者

```
IMember newMember = ApplicationContext.Current.Services.MemberService.CreateMemberWithIdentity(emailAddress, emailAddress, memberName, memberTypeAlias); 
```

然后

```
ApplicationContext.Current.Services.MemberService.Save(newMember); 
```

保存新成员。在尝试添加到组之前，必须保存成员。要添加到 umbraco 7 中的组，请执行

```
ApplicationContext.Current.Services.MemberService.AssignRole(newMember.Id, "Group Name"); 
```

# ipad - 在 ipad 上滑动查看像声音云应用程序一样

> ID：12858339
> 
> 赞同：2
> 
> 时间：2012-10-12T11:44:04.667
> 
> 标签：ipad, soundcloud

我在视图控制器中创建了侧标签栏，并在标签栏项目的标签上添加了一个表格视图。主要问题是我想在表格单元格上的选项卡之后滑动一个视图，就像弹出窗口在全视图中出现一样。现在我想滑动（你可以说在另一个视图上滑动），就像发生在声音云应用程序中一样。我应该用什么来设计这样的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:40:57.710

这很简单，只需使用可可控件 frlayerednavigationcontroller 您在此处获得示例代码...... [https://github.com/weissi/FRLayeredNavigationController](https://github.com/weissi/FRLayeredNavigationController) 视频中显示的工作原理 [https://www.youtube.com/watch?v= v_tXD_mL05E](https://www.youtube.com/watch?v=v_tXD_mL05E)

# c# - 调用和动态调用之间的区别

> ID：12858340
> 
> 赞同：147
> 
> 时间：2012-10-12T11:44:06.930
> 
> 标签：c#, .net, delegates, invoke, dynamic-invoke

委托中的 Invoke 和 DynamicInvoke 有什么区别？请给我一些代码示例来解释这两种方法之间的区别。

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-10-12T11:49:37.703

当你有一个委托实例时，你可能知道确切的类型，或者你可能只知道它是一个`Delegate`. 如果您知道确切的类型，则可以使用`Invoke`，它**非常快**- 一切都已经预先验证。例如：

```
Func<int,int> twice = x => x * 2;
int i = 3;
int j = twice.Invoke(i);
// or just:
int j = twice(i); 
```

然而！如果您只知道它是`Delegate`，它必须手动解析参数等 - 这可能涉及拆箱等 - 正在进行大量反思。例如：

```
Delegate slowTwice = twice; // this is still the same delegate instance
object[] args = { i };
object result = slowTwice.DynamicInvoke(args); 
```

请注意，我已经写了`args`长手以明确`object[]`涉及 an 。这里有很多额外的费用：

*   数组
*   验证传递的参数是“适合”实际的`MethodInfo`
*   根据需要拆箱等
*   反射调用
*   那么调用者需要做一些事情来处理返回值

基本上，尽可能避免`DynamicInvoke`。`Invoke`总是更可取，除非你只有 a`Delegate`和 a `object[]`。

为了进行性能比较，在调试器（控制台 exe）之外的发布模式下打印以下内容：

```
Invoke: 19ms
DynamicInvoke: 3813ms 
```

代码：

```
Func<int,int> twice = x => x * 2;
const int LOOP = 5000000; // 5M
var watch = Stopwatch.StartNew();
for (int i = 0; i < LOOP; i++)
{
    twice.Invoke(3);
}
watch.Stop();
Console.WriteLine("Invoke: {0}ms", watch.ElapsedMilliseconds);
watch = Stopwatch.StartNew();
for (int i = 0; i < LOOP; i++)
{
    twice.DynamicInvoke(3);
}
watch.Stop();
Console.WriteLine("DynamicInvoke: {0}ms", watch.ElapsedMilliseconds); 
```

# c# - ListBox C#中的跳过行

> ID：12858342
> 
> 赞同：0
> 
> 时间：2012-10-12T11:44:20.740
> 
> 标签：c#, asp.net

我想用轮盘游戏填充 ListBox，但我需要跳过不起作用的行

如果中奖号码不匹配，列表框必须打印如下

抱歉没有中奖号码！

你松了！！！

如果中奖号码与投注号码相符，则应如下所示：

中奖号码#

赌注：R#

投注类型：#

总奖金：R#

注意：#代表选择的数字

我尝试了“/n”和“system.Enviroment.NewLine”两种方式，但似乎没有任何效果

```
protected void btnSpin_Click(object sender, EventArgs e)
{
    Random random = new Random();
    intNumbRolled = random.Next(36);

    if (intNumb == intNumbRolled)
    {
        winning = intBet * type;
    }
    else
    {
        winning = 0;
    }

    if (winning == 0)
    {
        ListBox1.Items.Add
            ("Sorry there was no winning number \nYou loose!!");
    }
    else
    {
        ListBox1.Items.Add ("Winning number is " + intNumbRolled + 
            System.Environment.NewLine + System.Environment.NewLine + "BET: R " +
            intBet + System.Environment.NewLine + "Bet-Type: " + type +
            System.Environment.NewLine + "Total Winnings: R " + winning);
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:50:48.720

建议您使用`repeater control`可以`template column`添加到此模板的列`TextArea`控件

```
<asp:Repeater id="Repeater1" 
     DataSource="<% databindingexpression %>"
     runat=server>
   <ItemTemplate>
      <textarea rows="3" cols="30" id="IdTextArea" runat="server"/>  
   </ItemTemplate>
<asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:46:46.710

列表框项目不能显示多行文本。您可能应该使用不同的控件。`Label`想到了，或`TextBox`与`TextMode="multiline"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:50:00.140

从技术上讲，您可以在 a 中显示空白行，`ListBox`但如果您的其他文本太长，用户将不得不横向滚动，这通常很痛苦。我建议你改用 a `Label`。

在您的 .aspx 页面中：

```
...
<asp:Label id="lblResult" runat="server" />
... 
```

在您的 .aspx.cs 代码隐藏中：

```
if (winning==0)
{
    lblResult.Text = "Sorry there was no winning number<br />You loose!!";
}
else
{
    lblResult.Text =
        "Winning number is " + intNumbRolled + "<br /><br />" +
        "BET: R " + intBet + "<br />" +
        "Bet-Type: " + type + "<br />" +
        "Total Winnings: R " + winning;
} 
```

注意使用`<br />`代替`\n`，因为您的输出是 HTML。使用这种方法，您还可以使用 CSS 来格式化您的输出。

# android - 如何获取过去 24 小时的记录？

> ID：12858344
> 
> 赞同：-2
> 
> 时间：2012-10-12T11:44:25.543
> 
> 标签：android, sql, database, sqlite

我的代码看起来像： -

```
DateFormat df = DateFormat.getDateTimeInstance();

String currentDateTimeString = df.format(new Date());

Date today = df.parse(currentDateTimeString);

Date previous_date = new Date(today.getTime()-(24 * 3600000));

cursor = db.rawQuery(" select * from Table_Name where Date > " + previous_date ,null); 
```

today、previous_date 和 next_date 的值是正确的，但查询无法执行并引发异常。任何形式的帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:56:19.813

在 MySQL 中：

```
 SELECT  * FROM    tblnm
   WHERE   datefield >= SYSDATE() - INTERVAL 1 DAY 
```

在 SQL Server 中：

```
SELECT  * FROM    tblnm
 WHERE   datefield >= DATEADD(day, -1, GETDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:58:00.847

```
String pDate = dateFormat.format(previous_date);
String nDate = dateFormat.format(next_date);

cursor = db.query(true, TABLE_name, new String[] { //there your all columns name// }, "Date BETWEEN ?
              AND ?" , new String[]{pDate,nDate}, null, null, null,null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:02:32.833

这到底是怎么回事？

```
DateFormat df = DateFormat.getDateTimeInstance();
String currentDateTimeString = df.format(new Date());
Date today = df.parse(currentDateTimeString);
Date previous_date = new Date(today.getTime()-(24 * 3600000)); 
```

如果我总结一下，您创建一个格式化程序，然后是现在日期的字符串，然后是基于解析该字符串的日期，然后删除一些毫秒以创建另一个日期？

用这个 ：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DAY, -1);
Date yesterday = cal.getTime(); 
```

那是一个。

其次，你为什么要使用 rawQuery ？`query`是一个更好的方法，主要是因为它为您进行了参数转换。

如果你观察你的查询字符串，你会发现你的日期没有被转义，格式不正确......

使用 Saror Dushamov 的解决方案

# php - 张贴在墙上的照片 - Facebook 开放图 - Php Sdk

> ID：12858345
> 
> 赞同：2
> 
> 时间：2012-10-12T11:44:26.773
> 
> 标签：php, facebook, sdk

如果存在，我想将图片发布到相册“Wall Photos”中，否则如果“Wall Photos”不存在，则发布没有相册的图像（APPNAME PHOTOS）。

```
$album = $facebook->api('/'PAGEID'/albums'); 
foreach($album['data'] as $album){
 if($album['name'] == 'Wall Photos'){ 
  $album_post = $album['id']; 
 }
}
$risultato['pagina'][$pagina['id']] = $facebook->api('/'.$album_post.'/photos', 'POST',           array( 'access_token' => PAGETOKEN, 'source' => '@' . IMAGE, 'message' => TEXT ) );
if(!isset($album_post)){
 $risultato['pagina'][$pagina['id']] = $facebook->api('/'.$pagina['id'].'/photos',   'POST', array(
                'access_token'  => $pagina['token'],
                'source' => '@' . IMAGEPATH,
                'message' => TEXT
        )
    );
    }else{
   $risultato['pagina'][$pagina['id']] = $facebook->api('/'.$album_post.'/photos', 'POST', array(
                'access_token'  => $pagina['token'],
                'source' => '@' . realpath("../img_post/".$post['Immagine']),
                'message' => $post['Testo']
        )
    );
    } 
```

但我收到该错误：第 1237 行的 base_facebook.php 中抛出的专辑 ID 无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:26:20.703

id 字段应该是 $album 对象的一个​​元素。事实上，它是第一个。

[https://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)

顺便说一句，您还应该使用 BREAK 命令，以便在满足条件时退出 foreach 循环。

```
foreach($album['data'] as $album){
 if($album['name'] == 'Wall Photos'){ 

// To debug:

echo "<pre>";
print_r($album);
echo "</pre>";

// End debug

  $album_post = $album['id']; 
  break; 
 }
 } 
```

这应该产生类似的东西：

```
Array
(
[id] => xxxxxxxxxxxxxxx
[from] => Array
    (
        [category] => Community
        [name] => xxxxxxxxxxxxx
        [id] => xxxxxxxxxxxxx
    )

[name] => xxxxxxxxxx
[description] => xxxxxxxxxxxxxxxx
[link] => http://www.facebook.com/album.php?xxxxxxxxxxxxxxxxxxxxxx
[cover_photo] => xxxxxxxxxxxxxx
[privacy] => everyone
[count] => 4
[type] => normal
[created_time] => 2012-12-11T14:56:06+0000
[updated_time] => 2012-12-11T14:56:22+0000
[can_upload] => 1
) 
```

这至少应该给你一个关于发生了什么的线索。

# msbuild - MSBuild项目的调试

> ID：12858348
> 
> 赞同：0
> 
> 时间：2012-10-12T11:44:41.440
> 
> 标签：msbuild, cruisecontrol.net

在我的项目中，我使用 MSBuild 在开发服务器上构建我的 asp.net 项目。我的 msbuild.proj 中有一些目标，但其中一个目标没有执行。

可以逐步运行构建过程（如在调试器中）？我在哪里可以找到操作日志文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:49:19.780

有关更多信息，请参见此处：[如何调试（最好在 IDE 中）MSBuild 脚本？](https://stackoverflow.com/questions/1679857/how-can-i-debug-preferably-in-an-ide-an-msbuild-script)

MsBuild 是声明性的。当然，许多任务都有命令式代码，但如果没有源代码，您将无法轻松调试它们。

我以前所做的是将[详细级别](https://stackoverflow.com/questions/5065406/what-is-output-at-the-different-msbuild-output-verbosity-levels)设置为诊断，以便它显示它认为它在做什么。

一旦您了解了诸如项目、属性和表达式评估规则之类的规则，就很容易了。

最好将 MsBuild 视为数据流而不是控制流。您有一些源数据、项目、表达式、属性，并将其转换为输出数据集。就像在 SQL 中你指定你想要什么而不是如何去做一样 - MsBuild 是一样的。

说了这么多：[我刚刚发现了这个隐藏的调试器:-)](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)

# c# - EF 5 查找分析器

> ID：12858350
> 
> 赞同：2
> 
> 时间：2012-10-12T11:44:45.400
> 
> 标签：c#, sql, ef-code-first, entity-framework-5

我为我的项目使用 EF 5，并使用 EntityProfiler 对其进行分析，我看到当我使用 Find 进行查询时生成的 sql 是：

```
SELECT TOP (2) [Extent1].[ID]                  AS [ID],
               [Extent1].[TargetID]            AS [TargetID],
               [Extent1].[BranchID]            AS [BranchID],
               [Extent1].[ApplicationStatus]   AS [ApplicationStatus],
               [Extent1].[UserID]              AS [UserID],
               [Extent1].[AssignedOfficer]     AS [AssignedOfficer],
               [Extent1].[AssignedOfficerCRM]  AS [AssignedOfficerCRM],
               [Extent1].[RegistrationDate]    AS [RegistrationDate],
               [Extent1].[DecisionReasons]     AS [DecisionReasons],
               [Extent1].[DecisionExceptionID] AS [DecisionExceptionID],
               [Extent1].[RiskComment]         AS [RiskComment],
               [Extent1].[CESInformed]         AS [CESInformed],
               [Extent1].[IsCommited]          AS [IsCommited]
FROM   [dbo].[Applications] AS [Extent1]
WHERE  [Extent1].[ID] = '900100' /* @p0 */ 
```

被调用的代码是：

```
 public T GetByID(object primaryKey)
        {
            return DB.Set<T>().Find(primaryKey);
        } 
```

所以我的问题是为什么在生成的 sql 中是 Select Top (2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:37:02.497

它的执行`Select Top (2)`是因为 DBSet 在内部使用`SingleOrDefault()`（请参阅[此处](http://entityframework.codeplex.com/SourceControl/changeset/view/aebf648fa9de#src/EntityFramework/Internal/Linq/InternalSet%60.cs)的方法`FindInStore`）`Find`来执行查询的方法。

这确保了，如果返回 2 个结果，则会引发异常，因为 SingleOrDefault 定义它只期望一个结果或什么都不期望。

`Select Top (1)`生成为 Sql wenn，您使用 FirstOrDefault()。

# .net - 绑定到 ListBoxItem 的 ActualWidth

> ID：12858360
> 
> 赞同：1
> 
> 时间：2012-10-12T11:45:11.547
> 
> 标签：.net, wpf, data-binding, actualwidth

我有一个`ListBox`，它基本上是一个画布。项目应显示为`Rectangles`。矩形的位置通过`ListBoxItem's` `Canvas.Left`and`Canvas.Right`属性绑定到项目的数据。

这是`ListBox'` `Template`，它生成`Canvas`：

```
<ListBox.Template>
    <ControlTemplate>
        <Canvas IsItemsHost="True"/>
    </ControlTemplate>
</ListBox.Template> 
```

`ListBox'` `ItemContainerStyle`设置项目的位置：

```
<Style TargetType="ListBoxItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <ContentPresenter/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Canvas.Left">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource ...}">
                ...
            </MultiBinding>
        </Setter.Value>
    </Setter>
    <Setter Property="Canvas.Right">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource ...}">
                ...
            </MultiBinding>
        </Setter.Value>
    </Setter>
</Style> 
```

这实际上有效。当我`ContentPresenter`用边框包围时，边框具有正确的位置和大小。

现在，矩形`Width`应该等于`ListBoxItem's`实际宽度。所以`ItemTemplate`看起来像这样：

```
<DataTemplate>
    <Rectangle Height="..." 
       Width="{Binding ActualWidth,
         RelativeSource={RelativeSource FindAncestor, AncestorType=ListBoxItem}}" 
       Fill="..."/>
</DataTemplate> 
```

但是应用此绑定后，矩形永远不会显示。当我设置一个恒定的宽度时，一切都会正确呈现。

有没有办法在 中设置矩形的位置`Canvas`？

## 更新

使用 WPF Tree Visualizer 我意识到这可能是`ContentPresenter's` `ActualWidth`. 以下屏幕截图显示`Canvas.Left`and`Canvas.Right`属性设置正确： ![树可视化器的屏幕截图](../Images/87d5f34cd149b934904c5ca389db98a7.png)

但是，该`ActualWidth`属性设置为 4（`StrokeThickness`包含的`Rectangle`是 4）。如何解决这个布局问题？

此外，我必须修改我的上述陈述。`ContentPresenter`用 a包围`Border`不会产生正确的结果。相反，整个布局似乎已损坏。

## 更新 2

MSDN 说如下：

> 子元素的 Canvas.Right 偏移量不会影响父 Canvas 的大小。
> 
> 如果您指定它们，附加属性 Canvas.Top 或 Canvas.Left 优先于 Canvas.Bottom 或 Canvas.Right 属性

所以看来我必须明确指定宽度，这应该是适当转换器的一个小问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:48:36.773

首先，您可以更轻松地执行此操作，如下所示：

```
<ListBox>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Canvas.Left" Value="..."/>
            <Setter Property="Canvas.Top" Value="..."/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

其次，`Rectangle`不对其主机控制大小。您可能只想将 a`Border`与 a`Background`和/或`BorderThickness`&一起使用`BorderBrush`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:07:39.370

`Canvas.Left`如问题中所述，仅使用和`Canvas.Right`属性无法定义控件的大小。

可以使用如下转换器来实现所需的行为（省略错误处理）：

```
public class CanvasWidthConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var canvasLeft = (double)values[0];
        var canvasRight = (double)values[1];

        return canvasRight - canvasLeft;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

使用（将转换器添加为资源）：

```
<Style TargetType="ListBoxItem">
    <Setter Property="Canvas.Left" Value="{Binding LeftValue}"/>
    <Setter Property="Width">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource CanvasWidthConverter}">
                <Binding Path="LeftValue"/>
                <Binding Path="RightValue"/>
            </MultiBinding>
         </Setter.Value>
     </Setter>
</Style> 
```

# javascript - 在javascript中为下拉列表添加新值时出错

> ID：12858361
> 
> 赞同：0
> 
> 时间：2012-10-12T11:45:28.317
> 
> 标签：javascript

我需要为js代码中的两个下拉菜单添加相同的值如下

```
 var opt1 = new Option("All", 0);
 document.getElementById('ddlfromGroupCountry').optons[0] = opt1;
 document.getElementById('ddlFromCountry').optons[0] = opt1; 
```

我正在使用相同的选项变量，即 opt1 为两个下拉列表添加值

在第二行出现以下错误

```
htmlfile: Invalid argument. 
```

有什么建议么

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:00:30.387

这是在纯 javascript 中工作的代码，但我建议使用像 jQuery 这样的库来为您完成所有繁重的工作：

```
var r = document.createElement('option'), 
    select = document.getElementById('your-element-id');
r.value = 'val';
r.innerHTML = 'Test';
select.insertBefore(r, select.childNodes[0]); 
```

​</p>

# objective-c - UITableView：在混合单元格表视图静态和动态单元格中处理单元格选择

> ID：12858363
> 
> 赞同：3
> 
> 时间：2012-10-12T11:45:32.843
> 
> 标签：objective-c, ios, ios5, uitableview

我正在尝试在分组表视图中混合动态和静态单元格：我想得到**两个部分，**顶部是静态单元格，然后是**一部分动态单元格**（请参阅下面的屏幕截图）。我已将表格视图内容设置为**静态单元格**。

![混合动态和静态表格视图单元格](../Images/b71d4d96e1aeb360d772288f88ae55fe.png)

# 编辑

根据 AppleFreak 的建议，我将代码更改如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell;
    if (indexPath.section <= 1) { // section <= 1 indicates static cells
        cell = [super tableView:tableView cellForRowAtIndexPath:indexPath]; 
    } else { // section > 1 indicates dynamic cells
        CellIdentifier = [NSString stringWithFormat:@"section%idynamic",indexPath.section];
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    }
return cell;

} 
```

但是，我的应用程序崩溃并显示错误消息

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

对于第 0 节和第 0 行。从`cell = [super tableView:tableView cellForRowAtIndexPath:indexPath]`第 0 节和第 0 行返回的单元格是`nil`。

我的代码有什么问题？我的网点有什么问题吗？我没有设置任何出口，因为我是子类`UITableViewController`化并且据说没有设置任何用于设置 tableview 的出口（？）。关于如何更好地做到这一点的任何建议？

![在此处输入图像描述](../Images/b71d4d96e1aeb360d772288f88ae55fe.png)

# 编辑二

我在情节提要中重新创建了我的场景（请参阅上面更新的屏幕截图）并重写了视图控制器，以便从新的基础开始。我还按照 applefreak 的建议阅读了 Apple 论坛中的描述。然而，我遇到了我的第一个问题`numberOfSectionsInTableView:tableView`，其中我将静态部分的数量（两个）增加了一个。

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [super numberOfSectionsInTableView:tableView] + 1 ; } 
```

该应用程序因错误消息而崩溃：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 2 beyond bounds [0 .. 1]”

即使我遵循了 Apple 和 applefreak 的建议，为什么这段代码对我不起作用？在 iOS 6 中 tableView 可能发生了一些变化？

**解决方案**：我现在在他的回答中使用 AppleFreaks 代码示例让这个工作。谢谢你，AppleFreak！

## 编辑 III：单元格选择：

如何在混合（动态和静态单元格）单元格表视图中处理**单元格选择？**我什么时候打电话`super`，什么时候打电话`self tableView`？当我使用

```
[[super tableView] selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone] 
```

并尝试检查选定的索引路径：

```
UITableView *tableView = [super tableView];
if ( [[tableView indexPathForSelectedRow] isEqual:customGrowthIndexPath] ) { .. } 
```

我得到一个返回值`nil`。

由于我找不到错误的来源，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T12:33:06.853

对于静态单元格，您需要调用超级方法。我假设您将扩展 UITableViewController。见下文

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell;

    /* Detect cell is static or dynamic(prototype) based on the index path and your settings */

    if ("Cell is prototype") 
       cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
   else if ("Cell is static")
       cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

  // Modify cell properties if you want

   return cell;
} 
```

有关混合单元格的更多信息，请参阅苹果论坛上的[混合静态和动态表格视图内容](https://devforums.apple.com/message/505098#505098)讨论。

[编辑]

如果您还没有阅读上面的苹果链接，请仔细阅读。对于动态内容，您将首次使用代码本身中的给定标识符构建单元格。下次在病房中，您将出列单元而不是构建它！这是同样的老方法。

此外，请记住静态数据源认为只有 2 个部分（例如）。你不能问它关于第 2 节的问题，因为它认为只有第 0 节和第 1 节。如果你要在表格末尾以外的任何地方插入动态内容，你需要在转发数据时对 super 撒谎源方法。例如，您的 numberOfRowsInSection: 方法应如下所示：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section == 1) {
        return 1;
    }
    else if (section > 1){
        section--; // Basically you are forming sections for dynamic content
    }

    return [super tableView:tableView numberOfRowsInSection:section];
} 
```

关键是对您的动态内容进行调整，以便静态数据源仍然获得它期望的值

[编辑]

这是完整的工作示例并经过测试。只需复制代码中的所有以下方法，它应该可以直接工作。当您有混合单元格时，您必须覆盖所有 tableview 方法。根据您的要求返回“numberOfSectionsInTableView”中静态和动态部分的总数，然后在剩余的每个方法中返回；如果有问题的部分或行是静态的，只需调用 super，如果它是动态的，则像在普通 UITableViewController 子类中那样传回相关细节。在此示例中，我只是返回 nil 或硬编码值。

有关更多信息，请查看苹果论坛上的[此线程。](https://devforums.apple.com/message/502990#502990)

```
- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return nil;
}

- (NSString*)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    return nil;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
}

-(float)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 44.0f;
}

- (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 44.0f;
}

- (float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44.0f;
}

- (UIView*)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    return nil;
}

-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    return nil;
}

-(int)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 5;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(section == 0)
        return 2;
    if(section == 1)
        return 2;

    return 5;
}

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.section <= 1)
        return [super tableView:tableView cellForRowAtIndexPath:indexPath];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.textLabel.text = @"dynamic row";

    return cell;
} 
```

[编辑]

您不会在 didSelectRowAtIndexPath 中调用 super。这是直截了当的。请参见下面的代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     int row = indexPath.row;
     [tableView deselectRowAtIndexPath:indexPath animated:YES];

     UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
     //process the cell
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T05:33:10.750

**将自定义动态单元格与静态单元格一起使用的**最佳且最简单的方法：****

 **1）将容器视图放在动态表视图的标题中 2）将静态表视图分配给此容器并取消勾选“启用滚动”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:51:28.317

如果没有要出列的单元格，则单元格将为 nil，因此您必须分配/初始化一个新单元格。请在尝试出队后检查单元格的值，如果为 nil，则创建一个新单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:35:44.683

```
UITableViewCell *cell = [self dequeueReusableCellWithIdentifier:@"cellIdentify"];
if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cellIdentify"]; 
```

只是你不调用alloc。如果您不想重用，请不要调用 dequeueReusableCellWithIdentifier。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-23T06:18:06.703

谢谢applefreak的全面回答。我将在这里添加我的建议，如果您为静态部分添加虚拟部分，则不需要任何部分计算。您甚至可以在那里添加占位符元素。这样您就不必重新创建`NSIndexPath`s. 一件重要的事情是重写每个使用`NSIndexPath`s 的方法，因为这些方法会由于数组索引不匹配而导致应用程序崩溃。

此外，我完全放弃了使用出队机制并静态创建单元格，因为我拥有的动态内容没有那么多单元格。这使得`tableView:cellForRowAtIndexPath:`非常简单。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0)
    {
        return _locationCells[indexPath.row];
    }
    else
    {
        return [super tableView:tableView cellForRowAtIndexPath:indexPath];
    }
} 
```

只需记住占位符部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-08T13:26:03.553

这可以通过为将具有动态单元格的**部分添加“假”部分来简单地解决。**唯一需要更改的是 cellForRowAt 函数，您可以在其中将“假”部分的动态单元格出列，而不是让它们从情节提要中的内容中使用。对于其余的单元格，你调用

```
super.tableView(tableview, cellforRowAt: indexPath) 
```

无需重写 tableViewController 的所有功能**

# drupal-7 - 如何解析csv文件数据并将其插入drupal 7中的数据库

> ID：12858366
> 
> 赞同：4
> 
> 时间：2012-10-12T11:45:46.477
> 
> 标签：drupal-7

我已经使用代码在数据库中导入 csv 文件，但是如何读取该文件数据并显示它

在 Drupal 7 中

我使用以下代码导入 csv 文件

```
<?php
  function file_upload_permission() {
    return array(
      'administer uploader' => array(
       'title' => t('Administer Uploader'),
       'description' => t('Allow the following roles to upload csv files to the server.'),
           ),
         );
     }

     /**
     * Implements hook_menu()
     */
     function file_upload_menu() {

      $items['file_upload/import'] = array(
      'title' => 'Upload a File',
      'type' => MENU_CALLBACK,
        'description' => 'Import a csv',
        'page callback' => 'drupal_get_form',
    'page arguments' => array('file_upload_import_form'),
         'access arguments' => array('access content'),
     'access callback' => TRUE
       ); 

    return $items;
   }

    /**
     * Builds a form that will allow users to upload csv files
     *   hook_menu()
     */
     function file_upload_import_form($form, $form_state) {

           $form['notes'] = array(
          '#type' => 'markup',
          '#markup' => '<div class="import-notes">A few notes when uploading. <ul><li>Make    
         sure           the file is in a .csv format.</li><li>Columns should be in *this*  
           order</li><li>Be sure to click the "Upload" button when you select a csv.</li>
         </ul></div>',
         '#upload_location' => 'public://tmp/',
          );

        $form['import'] = array(
          '#title' => t('Import'),
          '#type' => 'managed_file',
          '#description' => t('The uploaded csv will be imported and temporarily saved.'),
          '#upload_location' => 'public://tmp/',
          '#upload_validators' => array(
             'file_validate_extensions' => array('csv'),
                                  ),
                );

        $form['submit'] = array (
         '#type' => 'submit',
         '#value' => t('Import'),
         );
          return $form;

    }

      /**
      * Submit handler for file_upload_import_form()
      */
    function file_upload_import_form_submit($form, $form_state) {

    // Check to make sure that the file was uploaded to the server properly
       $uri = db_query("SELECT uri FROM {file_managed} WHERE fid = :fid", array(
                      ':fid' => $form_state['input']['import']['fid'],
                      ))->fetchField();

         if(!empty($uri)) {
         if(file_exists(drupal_realpath($uri))) { 
          // Open the csv
          $handle = fopen(drupal_realpath($uri), "r");
         // Go through each row in the csv and run a function on it. In this case we are 
           parsing by '|' (pipe) characters.

          // If you want commas are any other character, replace the pipe with it.

           while (($data = fgetcsv($handle, 0, ',', '"')) !== FALSE) {

       $result = db_insert('test')->fields(array('price' => $data[1],))->execute();
       $operations[] = array(
          'file_upload_import_batch_processing',  // The function to run on each row
           array($data),  // The row in the csv
          );
      }

      // Once everything is gathered and ready to be processed... well... process it!
      $batch = array(
      'title' => t('Importing CSV...'),
      'operations' => $operations,  // Runs all of the queued processes from the while loop 
       above.
     'finished' => 'file_upload_import_finished', // Function to run when the import is 
              successful
      'error_message' => t('The installation has encountered an error.'),
      'progress_message' => t('Imported @current of @total products.'),
     );
     batch_set($batch);
    fclose($handle);    
  }
}
 else {
  drupal_set_message(t('There was an error uploading your file. Please contact a System 
   administator.'), 'error');
  } 

} 
```

> 此代码适用于将文件上传到特定文件夹和带有表 file_managed 的​​数据库中，但问题是，上传后如何显示该 Csv 文件数据并将该数据插入数据库的新表中？

```
if anyone knows , please let me know,
thanks in advance. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T19:20:36.847

通过一些调整，这应该对你有用（如果我正确理解了你的问题）：

```
/**
 ** View the table td_e_list
  */

function access_td_e_list_view() {

  $results = db_query("SELECT * FROM {td_e_list}");
  $header = array(t('Department'),t('Name'),t('Office'),t('Mobile'),t('Home'),t('Email'),t('Alt. Email'),t('D/R Office'));

  $rows = array();

  foreach($results AS $result) {
    $rows[] = array(
      $result->dept,
      $result->name,
      $result->office,
      $result->mobile,
      $result->home,
      $result->email,
      $result->altemail,
      $result->drphone,
      );
  }
  return theme('table', array('header' => $header, 'rows' => $rows));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:18:54.757

您可以使用允许导入 CSV 文件的[Feeds模块。](http://drupal.org/project/feeds)Feeds 通常会根据导入的数据创建节点，因此您最终会得到一堆节点，每个节点对应于 CSV 文件中的一行。

如果要将数据导入自定义表格，可以将[数据](http://drupal.org/project/data)与 Feed 结合使用。在项目页面上它说：

> 您可以使用 Feed 将 RSS、Atom、CSV 或 OPML 文件导入数据表。

# android - 由于网站移动版本，Android HTML 连接失败

> ID：12858367
> 
> 赞同：0
> 
> 时间：2012-10-12T11:45:48.753
> 
> 标签：android, httpconnection

我做了一个从网站下载图片的小应用程序。但是当我用正确的 url 打开 HttpURLConnection 时，它会打开这个网站的移动版本。请问怎样才能打开正版？感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:50:05.673

您可以`User-Agent`使用以下方式进行更改：

```
//HttpURLConnection connection;
connection.setRequestProperty("User-Agent","YOUR-USER-AGENT"); 
```

# mysql - 如何优化我的 mysql 查询？

> ID：12858370
> 
> 赞同：1
> 
> 时间：2012-10-12T11:45:52.267
> 
> 标签：mysql, sql

```
SELECT a.*, u.avatar, u.name, u.surname, u.username, COUNT(a.user1) AS cnt  
FROM user_actions a,users u,following f   
WHERE a.user1=u.user_id AND
a.user1=f.follower_id AND 
f.user_id=159 
GROUP BY a.user1, a.action, day(a.dt) 
ORDER BY a.id DESC 
LIMIT 7; 
```

查询耗时 4.4909 秒

表 user_actions 的索引：

```
Action  Keyname     Type   Unique Packed Column    Cardinality Collation
Edit    PRIMARY     BTREE  Yes    No     id        516094      A        
Edit    user1       BTREE  No     No     user1     15639       A        
Edit    user2       BTREE  No     No     user2     36863       A        
Edit    action      BTREE  No     No     action    16          A        
Edit    dt          BTREE  No     No     dt        516094      A        
Edit    group_index BTREE  No     No     user1     20643       A        

EXPLAIN SELECT a . * , u.avatar, u.name, u.surname, u.username, COUNT( a.user1 ) AS cnt
FROM user_actions a, users u, following f
WHERE a.user1 = u.user_id
AND a.user1 = f.follower_id
AND f.user_id =159
GROUP BY a.user1, a.action, day( a.dt )
ORDER BY a.id DESC
LIMIT 7 
```

> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE f ref user_id,follower_id,for_actions for_actions 4 const 242 使用索引；使用临时的；使用文件排序 1 SIMPLE a ref user1,group_index group_index 4 pictify_main.f.follower_id 25 1 SIMPLE u eq_ref PRIMARY PRIMARY 4 pictify_main.a.user1 1 使用 where

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:52:12.003

由于格式化无法理解您的索引

但是，以下索引可以提供帮助..

```
user_actions(user1)
following (user_id)
users(user_id) 
```

否则按照建议，请发布解释计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:01:37.243

由于您正在寻找特定的“以下”用户 ID，因此我会对其进行一些反转...然后添加“STRAIGHT_JOIN”子句以告诉 MySQL 按明确列出的顺序执行

确保表索引关注的索引 (User_ID, Follower_ID) 用户 (User_ID) User_Actions (User1,Action,Dt,ID)

```
select STRAIGHT_JOIN
      UA.*,
      U.Avatar,
      U.Name,
      U.SurName,
      U.UserName,
      count(*) as UserActionsCount
   from
      Following F
         JOIN User_Actions UA
            on F.Follower_ID = UA.User1
            Join Users U
               on UA.User1 = U.User_ID
   where
      F.User_ID = 159
   group by
      F.Follower_ID,
      UA.Action,
      Day( UA.Dt )
   order by
      UA.ID DESC
   limit 
      7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:37:57.450

**非确定性 GROUP BY：** SQL 检索既不在聚合函数中也不在 GROUP BY 表达式中的列，因此这些值在结果中将是不确定的。

**SELECT *：** 选择所有带有 * 通配符的列，如果表的架构发生变化，将导致查询的含义和行为发生变化，并可能导致查询检索到过多的数据。

**不带 AS 关键字** 的别名 在列或表别名中显式使用 AS 关键字，例如“tbl AS alias”，比隐式别名（例如“tbl alias”）更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T16:10:19.313

使用连接而不是逗号分隔的`FROM`从句：

```
SELECT a.*, u.avatar, u.name, u.surname, u.username, COUNT(a.user1) AS cnt  
FROM following f
LEFT JOIN user_actions a ON a.user1 = f.follower_id
LEFT JOIN users u ON u.user_id = a.user1
WHERE f.user_id = 159 
GROUP BY a.user1, a.action, day(a.dt) 
ORDER BY a.id DESC 
LIMIT 7; 
```

我选择使用子句中的`following`表`FROM`作为您搜索的关键部分是基于`following.user_id`. 这应该会减少获取的行数，因为您要尽早缩小结果集的范围。

我推荐 a `LEFT JOIN`，因为即使它们与其他两个表中的任何条目都不匹配，这也会返回行`following`，这通常是您在这种查询中想要的结果。如果您只想要在所有 3 个表中都有数据的行，请尝试`INNER JOIN`改用。

# android - 如何将图像视图从一个活动发送到另一个活动

> ID：12858373
> 
> 赞同：5
> 
> 时间：2012-10-12T11:46:01.757
> 
> 标签：android, android-intent, imageview

我在第一个活动的 listview 中有一个 imageview，我想将我的 imageview 发送到 listview 项的 clicl 上的第二个活动。

我试过以下代码 -

将可绘制图像转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray(); 
```

通过 Intent 发送-

```
Intent intent=new Intent(PicturesList.this,PictureDetail.class);
                intent.putExtra("Bitmap", byteArray);
                startActivity(intent); 
```

在第二个活动中——

```
Bundle extras = getIntent().getExtras();
        byteArray = extras.getByteArray("Bitmap"); 
```

和

```
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
                        imageview.setImageBitmap(bmp); 
```

但问题就在这里——

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher); 
```

这需要可绘制的图像，并且我有 imageview，我可以将我的 imageview 转换为可绘制的吗？还是什么？如何发送 imageview 而不是 drawable。以前有人这样做过。

这就是我在 imageview 中设置图像的方式

```
new AsyncTask<Void,Void,Void>() {
            @Override
            protected Void doInBackground(Void... params) {

                try {
                    URL newurl = new URL("http://java.sogeti.nl/JavaBlog/wp-content/uploads/2009/04/android_icon_256.png");
                    bitmap= BitmapFactory.decodeStream(newurl.openConnection().getInputStream());
                    //bitmap = Bitmap.createScaledBitmap(bitmap, 50,50, true);
                }
                catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            //  bitmap=imageLoader.DisplayImage("http://farm3.static.flickr.com/2199/2218403922_062bc3bcf2.jpg", imageview);
                //bitmap = Bitmap.createScaledBitmap(bitmap, imageview.getWidth(), imageview.getHeight(), true);
                return null;
            }
            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                imageview.setImageBitmap(bitmap);
            }
        }.execute(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:51:02.977

您不需要将位图转换为字节数组。位图是可打包的，因此您可以[`putParcelable(String, Parcelable)`](http://developer.android.com/reference/android/os/Bundle.html#putParcelable%28java.lang.String,%20android.os.Parcelable%29)将其添加到 Bundle 中。

**编辑：**

例如：

```
Bundle extras = new Bundle();
extras.putParcelable("Bitmap", bmp);
intent.putExtras(extras);
startActivity(intent); 
```

然后在第二个活动中：

```
Bundle extras = getIntent().getExtras();
Bitmap bmp = (Bitmap) extras.getParcelable("Bitmap"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:54:08.100

我觉得你传递图像 ID 并在下一个活动 Imageview 中设置 ID 例如

```
GEt ID  ((ImageView) v).getId();
SET ID  imageView.setImageResource(imgId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:54:22.223

您可以将您的 ImageView 转换为位图。试试这个

```
Bitmap bitmap = Bitmap.createBitmap(imageView .getMeasuredWidth(),imageView .getMeasuredHeight(), Bitmap.Config.RGB_565);
Canvas canvas = new Canvas(bitmap);
ImageView .draw(canvas); 
```

# php - 如何在图像中编写php代码

> ID：12858374
> 
> 赞同：1
> 
> 时间：2012-10-12T11:46:02.157
> 
> 标签：php

我创建了一个站点。在本站有上传图片的能力。我读了一篇 php 文章，攻击者可以在 GIF 图像中间插入 PHP 代码，然后将这个“邪恶”图像上传到网站上，然后该网站可能会针对安全漏洞开放，有没有朋友可以给出一个想法来抵抗这种类型的攻击 ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:48:36.293

此链接详细解释了如何做到这一点：

[http://php.webtutor.pl/en/2011/05/13/php-code-injection-a-simple-virus-written-in-php-and-carried-in-a-jpeg-image/](http://php.webtutor.pl/en/2011/05/13/php-code-injection-a-simple-virus-written-in-php-and-carried-in-a-jpeg-image/)

在那篇文章中我要说的最重要的一点是不`including`上传`requiring`文件。例如，如果您正在上传图片，您很可能只需在 html 中显示它们而不是将它们包含在脚本中即可获得所需的功能。这将防止它们内部的任何恶意代码被执行。

如果您正在寻找有关保护文件上传的更多信息，这篇文章也很好：[http ://shiflett.org/articles/file-uploads](http://shiflett.org/articles/file-uploads)

作者还有一本关于 PHP 安全性的书也非常有用。

这个关于 SO 的问题也很有用：[https ://stackoverflow.com/a/4167797/1324019](https://stackoverflow.com/a/4167797/1324019)

编辑：很抱歉继续添加链接，但我一直在寻找有用的文章： http: [//nullcandy.com/php-image-upload-security-how-not-to-do-it/](http://nullcandy.com/php-image-upload-security-how-not-to-do-it/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:56:04.230

解决方案非常简单。

验证**所有**上传的数据。在您 100% 确定它没有任何恶意之前，请不要存储任何东西。

一种方法是使用该`getimagesize()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:53:38.677

您必须跟踪文件的全名。

但要小心：

例如，有人可以创建像 foo.jpg.asp 或 php 或 exe 之类的文件。

使用正则表达式正确匹配它。

# jquery - 如何在复杂变体（嵌套 div）中使用 jQuery hasClass？

> ID：12858379
> 
> 赞同：0
> 
> 时间：2012-10-12T11:46:15.370
> 
> 标签：jquery, jquery-selectors

如果我的输入具有有效的类，我想添加一些图像背景。

我阅读了文档，阅读了一些 stackoveflow 问题（像这样 -> [hasClass 在我的 js 代码中不起作用？](https://stackoverflow.com/questions/11669222/hasclass-doesnt-work-in-my-js-code)），但我无法在我的模态中实现它。

这是包含所有 HTML 和 js 的 jsfiddle -> [http://jsfiddle.net/33PGQ/34/](http://jsfiddle.net/33PGQ/34/)

有人可以提出什么问题吗？

PSAlso 也尝试在 hasClass 函数中这样写：div > form > ...（没用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:49:20.703

问题不是`hasClass`方法，你的选择器是*错误*的，你应该使用`.`类选择器，jQuery 选择器像 CSS 选择器一样工作。

```
$('.modal .form_for_login form .field2  input'); 
```

[http://jsfiddle.net/q7jw5/](http://jsfiddle.net/q7jw5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:48:56.723

你的选择器是错误的。jQuery 选择器和 CSS 选择器一样，使用句点来表示类名：

```
<div class="abc">
$('.abc') 
```

所以这将修复你的小提琴

```
if ($('.modal .form_for_login form .field2 input').hasClass('valid')) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:48:56.710

无意间找到答案：

```
 http://jsfiddle.net/33PGQ/35/ 
```

# php - MySQL加入2个表但重命名列，因为它们具有相同的名称

> ID：12858380
> 
> 赞同：5
> 
> 时间：2012-10-12T11:46:22.670
> 
> 标签：php, mysql, join, identity-column

我有2张桌子，

管理员，定价

*   admin 包含列（id、date_created、type、value）
*   定价包含列（id、date_created、relation、value）

我想做一个连接两个表的选择，其中pricing.relation = admin.id

如何重命名值、id 和 date_created 行，以免它们相互覆盖？

这是我正在尝试的事情：

```
$sub_types = $database->query('
    SELECT 
    pricing.*,
    admin.*
        FROM 
        pricing,
        admin
            WHERE pricing.relation = admin.id
'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T11:47:51.000

您可以使用别名：

```
SELECT p.id as pid, 
       p.date_created as pricing_date, 
       p.type, p.value as pricing_value,
       a.id as aid, 
       a.date_created as admin_date,
       a.relation, 
       a.value as admin_value
FROM pricing p
inner join admin a on p.relation = a.id 
```

# symfony - php 致命错误后的 504 网关超时

> ID：12858383
> 
> 赞同：7
> 
> 时间：2012-10-12T11:46:32.203
> 
> 标签：symfony, nginx, php

我正在使用 nginx 和 php-fpm 在 ubuntu 12.10 下开发一个基于 symfony2 的网站（是的，我知道我使用的是 beta 操作系统）。一切正常，直到由于我的代码错误，我调用了一个不存在的函数，并得到以下信息：

```
Fatal error: Call to a member function (....) 
```

这不是问题（这是我的代码中的一个错误，很容易修复），但在此之后，没有其他页面加载。我的浏览器只是不断尝试从网络服务器加载页面，直到 nginx 超时（在 +- 30 秒之后，这应该是一些默认超时）并返回：

```
504 Gateway Time-out 
```

重新启动 php-fpm 即可解决问题。Nginx 日志显示超时消息，即使我将它们设置为调试级别，php-fpm 日志上也不会出现任何内容。我尝试从 fpm 切换到 fastcgi，同样的事情发生了。

我环顾四周，但所有类似的错误都与大请求/文件处理有关，但事实并非如此。即使在开发条件下（无缓存等），我网站上的所有页面也会在几秒钟内加载。

**编辑：**

php 5.4.6

nginx 1.2.1

# c++ - 在堆中创建和使用数组

> ID：12858385
> 
> 赞同：1
> 
> 时间：2012-10-12T11:46:35.213
> 
> 标签：c++, arrays, pointers, heap-memory

作为我研究的一部分，我们正在学习使用“堆”，并负责编写一个简短的数学程序，使用指针来引用和尊重堆。作为一些个人学习，我尝试通过创建一个数组并在其上使用二进制搜索来复制它。但它根本行不通。

这是我的代码：

```
#include <iostream>
#include <Windows.h>
using namespace std;

int main()
{

//creating pointers
int* ii = new int;
int* top = new int;
int* bottom = new int;
int* uArray = new int[12];
int* uChoice = new int;

//assigning values in location of pointer
*ii = 5;
*top = 11;
*bottom = 0;

cout<<"Please input a value between 1 and 12 to find in the array: \t";
cin >> *uChoice;

for (int x = 0; x<12; x++) //adding values into the array
{
    uArray[x] = x;
    cout<<x;
    Sleep(1000);//checking loop works
}

while (uArray[*ii] != *uChoice)
{
    if (uArray[*ii] > *uChoice)
    {
        *bottom = *ii;
        *ii = (*top + *bottom)/2;
    }

    else 
    {
        *top = *ii;
        *ii = (*top + *bottom) /2;
    }

    if (*uChoice == *ii)
    {
        break;
    }

}

//clearing pointers.
delete ii;
delete top;
delete bottom;
delete uArray;
ii = 0;
top = 0;
bottom = 0;
uArray = 0;

cout<<uChoice<<" Found at position: \t"<< *ii;
Sleep(10000);
return 0; 
```

}

提前谢谢了。

[编辑：] 错误发生在 while 循环中。发生了一些事情，这意味着它没有正确搜索数组。对不起，我没有澄清这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:53:22.160

delete 关键字释放指针指向的内存。所以你不应该在那之后再次尝试使用指针。

此外，当指针指向数组时，您必须使用 delete[] uArray 语法，否则内存将无法正确释放。

不确定这是否是“不起作用”的部分，因为您没有更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:18:21.957

while 循环在数组中找不到正确元素的原因与指针的使用无关。我可以直接给你答案，但你自己找到它会更有用（在你看下面的剧透之前）。

我建议您尝试在调试器中运行代码。如果您以前没有使用过调试器，我强烈建议您尝试一下。在 while 循环的开始处设置断点。您可能会发现在一张纸上写下 uArray[] 数组的内容以供参考很有用。然后单步执行 while 循环一行，仔细注意 if 语句——它是否进入 if 子句或 else 子句，以及它是否移动 *top 或 *bottom。鉴于 *uChoice 的值与 uArray[*ii] 相比，看看发生的事情是否有意义。

这是一个微不足道的错误，一旦你发现它就会踢自己。但更有用的一课是如何调试代码。

（如果你没有调试器，你可以通过在while循环中插入几条cout语句来打印出关键变量的值来达到同样的效果。）

这是答案（鼠标悬停查看）：

> 在比较 uArray[*ii] 和 *uChoice 的测试中，大于运算符应该是小于。如果您要搜索的数字小于数组中的值，则您知道它在下半部分，因此您要从*上往下*移动，而不是从下往上移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:52:01.453

从技术上讲，标准没有定义“堆”，但就实现而言，它在**Freestore**而不是堆上`new`创建元素。**在Heap**上创建元素。 **`malloc()`**

 ******好读物：**
[GotW #9：内存管理 - 第一部分](http://www.gotw.ca/gotw/009.htm)

* * *

当你这样做时，你有一个**未定义的行为**：

```
 int* uArray = new int[12];
   delete uArray; 
```

你需要：

```
delete []uArray; 
```****

# html - 垂直居中对齐浮动 DIV

> ID：12858392
> 
> 赞同：-1
> 
> 时间：2012-10-12T11:47:14.697
> 
> 标签：html, css

我一直在做一些事情，并且陷入了一些 CSS 问题。我有这个：

[http://sharepress.atwebpages.com/temp/](http://sharepress.atwebpages.com/temp/)

如您所见，列出了两个项目，旁边有十字。在列出的第二项中，您可以看到它是一个多行段落。我想知道如何为这样的多行段落垂直居中对齐“x”。

谢谢大家的帮助和时间:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:51:55.080

听起来和这个问题很像。取决于您的浏览器支持，但 display: table-cell 对于较新的浏览器来说是一个很好的方法。有关答案的更多详细信息，请点击此处。

[将一个 DIV 与另一个 DIV 内的动态高度垂直对齐](https://stackoverflow.com/questions/4046395/vertical-align-a-div-with-dynamic-height-inside-another-div)

如果 X 是恒定高度（例如此处为 20px），您可以只给容器 div`position:relative`和 x`position:absolute; top: 50%; margin-top: -10px;`

所以在你的例子中

```
.taskItemLi {
  position:relative;
}
.delbtn {
  position: absolute;
  top: 50%;
  margin-top: -10px;
  right: 0;
} 
```

# python - 用python删除文本文件中重复的单词组合

> ID：12858395
> 
> 赞同：0
> 
> 时间：2012-10-12T11:47:16.070
> 
> 标签：python

在 eumiro 的帮助下[删除文本文件中的重复行 - 除了它包含“{”或“}”](https://stackoverflow.com/questions/12815591/delete-duplicate-rows-in-textfile-except-it-contains-a-or) 我可以成功删除大型文本文件中的重复行。这是从 60MB 到 3MB 文本文件的一大步。

但现在我想删除这样的重复单词：

```
 @INBOOK{Miller1992,
  author = {Miller, Rowland S. und Mark R. Leary and Miller, Rowland S. und Mark
    R. Leary and Miller, Rowland S. und Mark R. Leary and Miller, Rowland
    S. und Mark R. Leary and Miller, Rowland S. und Mark R. Leary and
    Miller, Rowland S. und Mark R. Leary and Miller, Rowland S. und Mark
    Miller, Rowland S. und Mark R. Leary},
  year = {1992},
  editor = {Teun A. van Dijk and Teun A. van Dijk and Teun A. van Dijk and Teun
    A. van Dijk and Teun A. van Dijk and Teun A. van Dijk and Teun A.
    van Dijk and Teun A. van Dijk and Teun A. van Dijk and Teun A. van
    Dijk and Teun A. van Dijk and Teun A. van Dijk and Teun A. van Dijk
    and Teun A. van Dijk and Teun A. van Dijk and Teun A. van Dijk and
    Teun A. van Dijk and Teun A. van Dijk and Teun A. van Dijk and Teun
    and Teun A. van Dijk and Teun A. van Dijk and Teun A. van Dijk},
  title = {Handbook of discourse analysis (Bd. 3/4)}, 
```

结果应如下所示：

```
 @INBOOK{Miller1992,
  author = {Miller,  Rowland S. und Mark R. Leary},
  year = {1992},
  editor = {Teun A. van Dijk},
  title = {Handbook of discourse analysis (Bd. 3/4)}, 
```

文本文件有 70000 行，作者姓名可用于多个条目。因此，只应删除大括号之间的重复项（多行）：

```
 author = {Miller, Rowland S. und Mark R. Leary and Miller, Rowland S. und Mark
  R. Leary and Miller, Rowland S. und Mark R. Leary and Miller, Rowland
  S. und Mark R. Leary and Miller, Rowland S. und Mark R. Leary and
  Miller, Rowland S. und Mark R. Leary and Miller, Rowland S. und Mark
  Miller, Rowland S. und Mark R. Leary}, 
```

我试图修改我的 Python-Skript 删除重复行以删除大括号之间的重复单词，但我被卡住了：

```
words_seen = set() # holds words already seen 
outfile = open("literatur_clean.txt", "w") 
for line in open("literatur_dupl.txt", "r"): 
    if ('{' in line or '}' in line
        # some code to check whether the words are duplicate
outfile.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:07:58.073

根据您当前的数据集，看起来这不是重复单词的问题，而是有时作者或编辑被重复 n 次。

您可以尝试拆分字符串“和”。然后你可以看看剩下的项目是否都一样。（例如，将所有字符串放在一个集合中或作为字典中的键。）如果集合的长度等于 1，则您已删除所有重复项。如果不是，可能“和”也是作者或编辑姓名的一部分。您必须再次合并两者。

如果这不起作用（例如，因为您的数据集不像建议的那样整洁），您可以通过查找子集匹配来查找重复匹配：

```
Miller, Rowland S. und Mark R. Leary and Miller, Rowland S. und Mark R. Leary 
^                                        ^
1                                        2 
```

在字符串开头之后增加指向文本字符串的指针。对于每个位置，找到到字符串开头的最长子匹配。保存这些子匹配。

# javascript - 从 jquery/javascript 下载文件

> ID：12858397
> 
> 赞同：3
> 
> 时间：2012-10-12T11:47:18.057
> 
> 标签：javascript, jquery, download

我有一个 java 脚本文件，其中一个变量有一些字符串，如：

```
var xw = 'Some content'; 
```

我想将此字符串下载为文件。如何在 JQuery/javascript 中执行此操作？我不想使用 AJAX 在服务器上发送任何请求。有什么方法可以下载纯 JQuery/javascript 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T11:55:14.757

```
<a href="data:application/octet-stream;charset=utf-8;base64,U29tZSBjb250ZW50">Download "Some content" as a text file</a> 
```

[http://jsfiddle.net/5tJ5p/](http://jsfiddle.net/5tJ5p/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:51:12.810

您正在寻找[Downloadify](https://github.com/dcneiner/Downloadify)。

# c# - 如何捕获文本框并将其转换为 pdf 文件格式？

> ID：12858401
> 
> 赞同：3
> 
> 时间：2012-10-12T11:47:26.667
> 
> 标签：c#

我想捕获我的文本框并将其转换为 PDF 格式。
我尝试了以下代码，但它捕获了整个屏幕。如何仅捕获我的文本框值？

1.  代码：

    ```
    try
    {
        Rectangle bounds = this.Bounds;
        using (var bitmap = new Bitmap(bounds.Width, bounds.Height))
        {
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                g.CopyFromScreen(new Point(bounds.Left, bounds.Top), Point.Empty,
                                 bounds.Size);
            }
            bitmap.Save("C://Rectangle.bmp", ImageFormat.Bmp);
        }
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message.ToString());
    } 
    ```

2.  用于导出 pdf：

    ```
    captureScreen();
    var doc = new PdfDocument();
    var oPage = new PdfPage();
    doc.Pages.Add(oPage);
    oPage.Rotate = 90;
    XGraphics xgr = XGraphics.FromPdfPage(oPage);
    XImage img = XImage.FromFile(@"C://Rectangle.bmp");
    xgr.DrawImage(img, 0, 0);
    doc.Save("C://RectangleDocument.pdf");
    doc.Close(); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:57:08.723

你不应该使用`this.Bounds`but `yourTextBox.Bounds`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:02:59.767

不是确切的解决方案，而是一些指向正确方向的提示。以下代码截取具有指定矩形的给定对话框的屏幕截图。您可以修改它以从客户区的屏幕截图中提取文本框（没有标题栏的对话框，...）

```
[StructLayout(LayoutKind.Sequential)]
public struct WINDOWINFO
{
    public UInt32 cbSize;
    public RECT rcWindow;
    public RECT rcClient;
    public UInt32 dwStyle;
    public UInt32 dwExStyle;
    public UInt32 dwWindowStatus;
    public UInt32 cxWindowBorders;
    public UInt32 cyWindowBorders;
    public UInt16 atomWindowType;
    public UInt16 wCreatorVersion;
} 
```

通过 P/I 的一点原生魔法：

```
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("user32.dll", SetLastError = true)]
public static extern bool GetWindowInfo(IntPtr hwnd, ref WINDOWINFO windowInfo);

[DllImport("gdi32.dll")]
public static extern bool BitBlt(IntPtr hdc, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, TernaryRasterOperations dwRop); 
```

对话框截图方法。使用任何 Windows 窗体的 Handle-property 获取 hwnd。

```
protected Bitmap Capture(IntPtr hwnd, Rectangle rect)
{
    WINDOWINFO winInf = new WINDOWINFO();
    winInf.cbSize = (uint)Marshal.SizeOf(winInf);
    bool succ = PINativeOperator.GetWindowInfo(hwnd, ref winInf);

    if (!succ)
        return null;

    int width = winInf.rcClient.right - winInf.rcClient.left;
    int height = winInf.rcClient.bottom - winInf.rcClient.top;

    if (width == 0 || height == 0)
        return null;

    Graphics g = Graphics.FromHwnd(hwnd);
    IntPtr hdc = g.GetHdc();

    if(rect == Rectangle.Empty) {
        rect = new Rectangle(0, 0, width, height);
    }
    Bitmap bmp = new Bitmap(rect.Width, rect.Height);
    Graphics bmpG = Graphics.FromImage(bmp);
    PINativeOperator.BitBlt(bmpG.GetHdc(), 0, 0, rect.Width, rect.Height, hdc, rect.X, rect.Y, TernaryRasterOperations.SRCCOPY);
    bmpG.ReleaseHdc();

    return bmp;
} 
```

# oracle-coherence - 如何查看一致性节点中的数据

> ID：12858402
> 
> 赞同：4
> 
> 时间：2012-10-12T11:47:31.717
> 
> 标签：oracle-coherence

假设我正在使用名为“国家”的缓存的分布式缓存模式。我有三个节点。我在缓存中放了一些数据。我想知道这个缓存的每个节点上存在的数据。请让我知道是否有工具或我们如何以编程方式知道它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T17:44:50.213

您可能会问几件事：

*   如果您想知道出于可用性目的数据具有冗余副本，您可以在 JMX 中轻松找到它。“ServiceMBean”mbean 有一个“StatusHA”属性，其描述为：

> 此服务的高可用性 (HA) 状态。MACHINE-SAFE 的值意味着在任何给定计算机上运行的所有集群成员都可以停止而不会丢失数据。NODE-SAFE 的值意味着可以停止任何集群成员而不会丢失数据。ENDANGERED 的值表示任何运行该服务的集群成员异常终止都可能导致数据丢失。

*   如果你想知道一个key属于哪个分区，可以获取缓存的服务（CacheService service = cache.getCacheService()）并从中获取KeyPartitioningStrategy（KeyPartitioningStrategy strategy = ((PartitionedService) service).getKeyPartitioningStrategy()），然后询问key去哪里的策略（int partition = strategy.getKeyPartition(key)）。

*   如果您使用键亲和性来控制缓存数据位置，它显然比这更复杂一些；-) .. 有关更多信息，请参阅 JavaDoc 中的 KeyPartitioningStrategy.getKeyPartition。

*   要确定分区属于哪个集群成员，您只需调用 PartitionedService.getKeyOwner(Object oKey)

*   与以上所有内容等效的服务器端是 BackingMapManagerContext.getKeyPartition()，还有一个方便的方法 BackingMapManagerContext.isKeyOwned()。

现在 Coherence 中真正酷的事情是您通常不必担心数据*在哪里*，因为所有操作都保证是一次且仅一次的操作，并且只有在操作完成后结果才可见达到了他们的 HA 要求。

*为了全面披露，我在 Oracle 工作。这篇文章中表达的观点和观点是我自己的，并不一定反映我雇主的观点或观点。*

# ruby-on-rails - Rails - 使用jbuilder时的空白json文件

> ID：12858404
> 
> 赞同：4
> 
> 时间：2012-10-12T11:47:33.597
> 
> 标签：ruby-on-rails, json, routes, jbuilder

我正在尝试使用 jbuilder 从事件列表中创建一个 json 文件。它必须采用特定格式。目前，无论我在 jbuilder 文件中放入什么，当您转到 users/1/events.json 时，该文件都是空白的（只是 {}）。

我已经尝试在控制器中放置一个响应块，但这只是以错误的格式返回事件列表。

我认为路由已经正确完成，因为日志文件显示文件 myevents.json.jbuilder 在请求 url /users/1/myevents.json 时成功呈现。另外，当请求 .html 时，myevents.html 文件显示正常，其中包含所有正确信息。

我真的很难过这个，任何帮助将不胜感激！

我将列出所有相关代码，以防任何人都可以拿起一些东西：

事件控制器：

```
def myevents
    @events = current_user.events
end 
```

myevents.json.jbuilder：

```
Jbuilder.encode do |json|
    json.timeline do
        json.headline current_user.first_name
        json.type "default"
        json.text "A Timeline"
        json.start_date
        json.array!(@events) do |event|
            json.start_date event.start_date
            json.end_date event.end_date
            json.headline event.headline
            json.text event.text
            json.asset do
                json.media event.media
                json.credit event.credit
                json.caption event.caption
            end
        end
    end
end 
```

环境.rb：

```
Jbuilder.key_format :camelize => :lower 
```

路线.rb：

```
match 'users/:id/events' => 'events#myevents' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T07:07:58.707

原因是您需要将以下行放入您的 RSPEC 控制器帮助文件中：

```
config.render_views = true 
```

我有同样的问题：[https ://github.com/rails/jbuilder/issues/32](https://github.com/rails/jbuilder/issues/32)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:40:20.440

据我所知，你可以跳过

> Jbuilder.encode

尝试不使用此块，也许一切都会好起来的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:01:00.927

弄清楚了。出于某种原因，它不喜欢 Jbuilder.encode do |json| 这一行，尽管这是要使用的文档中列出的内容。响应的语法仍然不太正确。

# javascript - “_link”与“_trackEvent”冲突

> ID：12858411
> 
> 赞同：2
> 
> 时间：2012-10-12T11:48:07.043
> 
> 标签：javascript, google-analytics

我正在尝试同时获得一个`_trackEvent`推送命令和一个`_link`到另一个域命令来处理我网站上的单引号按钮，但目前正在提出注意事项。

这是代码：

```
<a href="URL"
target="_blank" 
onclick="
_gaq.push(['_trackEvent', 'Quotes', 'Click', 'QuoteImage']);
_gaq.push(['_link', 'URL']);
return false;
">button</a> 
```

如果我`_link`从代码中删除推送事件，则`_trackEvent`可以工作，但我无法让两者同时工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:49:31.143

您应该阅读此文档： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=1136920](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)

尝试类似：

```
<a href="URL" onClick="recordOutboundLink(this, 'Quotes', 'Click', 'QuoteImage');return false;"> 
```

和

```
function recordOutboundLink(link, category, action, opt_label) {
try {
var myTracker=_gat._getTrackerByName();
_gaq.push(['myTracker._trackEvent', category , action, opt_label ]);
_gaq.push(['_link', link.href]);
}catch(err){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:40:47.037

我试图做你想做的事情，但使用 jquery 通过 href 中的 ID 跟踪事件，同时将 cookie 链接/传递到另一个域。

在此处查看相关线程：

[网站在 Google Analytics（分析）报告中显示为其自己域的引荐来源。为什么？](https://stackoverflow.com/questions/12488523/site-is-showing-up-as-a-referrer-to-its-own-domain-in-google-analytics-reports)

如果您弄清楚了，请发布您的解决方案。

我仍在尝试对 href 链接和表单提交按钮做同样的事情......无法让它工作；我们的域仍然显示为转化的引荐来源而不是原始流量来源 - 因为 3rd 方 ecomm 购物车结帐正在写入新的 cookie...无法链接，原始引荐来源丢失...当然要跟踪点击事件也是如此。

# php - tinymvc 的测试

> ID：12858412
> 
> 赞同：0
> 
> 时间：2012-10-12T11:48:08.847
> 
> 标签：php

考虑一个名为 user 的控制器，其代码如下

```
class User_Controller extends TinyMVC_Controller
{
  function index()
  {

    $oUserEntity = new User_Entity_Model();
    $oUserEntity->guid = 1;
    $oUserEntity->name = 'aaaaaa';
    $oUserEntity->username = 'aaaaaaa';
    $oUserEntity->password = 'newnew';
    $oUserEntity->email = 'aaaaaa@gmail.com';
    $oUserEntity->language = 'en';
    $oUserEntity->code = 'xyz';

    $oUserEntity->save();

  }
}

?> 
```

及其对应的名为 user_entity_model.php 的模型，

```
<?php
class User_Entity_Model extends Entity_Model 
{
/* some code..*/
public function save() {

        // Save generic stuff
    if (!parent::save()) {
        return false;
    }

    // Now save specific stuff
    return $this->create_user_entity($this->get('guid'), $this->get('name'), $this->get('username'),
    $this->get('password'), $this->get('email'), $this->get('language'), $this->get('code'));
}

public function create_user_entity($guid, $name, $username, $password,$email, $language, $code) {
    global $CONFIG;

$guid = (int)$guid;

$query = "INSERT into users_entity
            (guid, name, username, password, sapcode, salt, email, language, code) values ($guid, '$name', '$username', '$password',  '$email', '$language', '$code')";

$result = $this->db->query($query);
return $guid;

}

} 
```

我使用 simpletest 来测试代码。因此，为了测试函数 save()，我创建了测试文件夹和测试文件 userEntityTest.php

```
class userEntityTest extends UnitTestCase
{

    function testSave(){

    $oUserEntity = new User_Entity_Model();
    $oUserEntity->guid = 1;
    $oUserEntity->name = 'aaaa';
    $oUserEntity->username = 'aaaa';
    $oUserEntity->password = 'newnew';
    $oUserEntity->email = 'cool123@gmail.com';
    $oUserEntity->language = 'en';
    $oUserEntity->code = 'xyz';
    $guid = $oUserEntity->save();
    $cp = new UnitTestCase();   
    $cp->AssertNotEqual($guid, 0);
} 
```

}

在浏览器中执行测试时出现以下错误

> （！）致命错误：在第 3 行的 C:\wamp\www\career portal\tinymvc\myapp\models\user_entity_model.php 中找不到类 'Entity_Model'
> 
> userEntityTest.php 失败：-> Bad TestSuite [userEntityTest.php] 错误 [[userEntityTest.php] 中没有可运行的测试用例] 0/0 测试用例完成：0 次通过，1 次失败和 0 次异常。

请帮助我成功运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:20:23.930

我认为命名测试模块`userEntityTest.php`是错误的，因为这个框架可能存在“_model”后缀。在此处查看带有注释的黄色框[http://www.tinymvc.com/documentation/index.php/Documentation:Models#ynote](http://www.tinymvc.com/documentation/index.php/Documentation:Models#ynote)此外，您的问题（我想，测试类中的可见性范围受限，无法创建新的用户实体模型的实例，因为它没有可用的 user_entity_model 的父类（即 entity_model））可能无法解决，因为您的模型类似乎不是从 TinyMVC_Model 派生的，这意味着让您的父类广泛可用完全取决于您. 实际上，我看不到您调用测试的地方，但是如果您尝试模拟模型的行为，请根据所有应有规则使您的类成为 TinyMVC_Model 的派生类。

# php - Mysql Insert into 复制数据

> ID：12858413
> 
> 赞同：1
> 
> 时间：2012-10-12T11:48:14.090
> 
> 标签：php, mysql

我尝试将记录从一个表复制到另一个数据库的另一个表

我尝试什么

```
 $sql13 = " INSERT INTO `archive_accounts`.`bank_info` SELECT * FROM
   `pb_accounts`.`bank_info` WHERE `emp_id` = '$seid' ";
    mysqli_query($dbac,$sql13); 
```

和许多其他查询都运行正常但是

```
 $sql21 = " INSERT INTO `archive_accounts`.`compensation` SELECT * FROM `pb_accounts`.`compensation` WHERE `emp_id` = '$seid' ";
        mysqli_query($dbac,$sql21) or die(mysqli_error($dbac)); 
```

和

```
 $sql17 = " INSERT INTO `archive_accounts`.`c_allowance` SELECT * FROM `pb_accounts`.`c_allowance` WHERE `emp_id` = '$seid' ";
        mysqli_query($dbac,$sql17) or die(mysqli_error($dbac)); 
```

不复制任何行并且不抛出任何错误当我使用 phpmyadmin 运行查询时表结构相同，它运行正常

的表结构`pb_accounts`。`c_allowance`

```
id  int(11)

 emp_id int(11)

allowance decimal(9,2) 
```

日期日期

的表结构`pb_accounts`。`c_allowance`和`archive_accounts`。`c_allowance`

```
id  int(11)

 emp_id int(11)

allowance decimal(9,2) 
```

日期日期

的结构`archive_accounts`。`compensation`和`pb_accounts`。`c_allowance`

```
 id  int(11)

 emp_id int(11)

 amount  int(11)

 approved_by varchar(75)

 detail  varchar(100)

 date   date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:58:51.567

**当 SELECT 和 INSERT 引用同一个表或字段名称时，**“不明确的列引用”可能会产生问题。**尝试使用**别名****

# git - 回滚到上一个提交 - 适用于 MAC 的 Github（恢复已在进行中）

> ID：12858416
> 
> 赞同：24
> 
> 时间：2012-10-12T11:48:23.483
> 
> 标签：git, version-control, github, github-for-mac

我想我在这里搞砸了。

我对上次提交的代码进行了一些更改，添加了新功能，并意识到其他一些代码现在表现得很奇怪。我决定回滚到一个旧的提交（也被推送到远程），以便测试那个功能到那时是否可以工作。

在按下回滚键之前，我提交了当前所做的更改，因为我不想丢失它们。提交后（不推送到远程），我回滚到那个旧提交。（请注意，在我回滚到的提交和我刚刚提交的提交之间有很多提交）。

一切正常，我的代码恢复到那个提交。该功能在该提交中也表现不佳，因此我决定回到我最近的提交。

但是，除了回滚到最新的提交之外，我不知道该怎么做。但它给了我一个错误。

```
error: a cherry-pick or revert is already in progress
hint: try "git cherry-pick (--continue | --quit | --abort)"
fatal: revert failed
(32768) 
```

现在，似乎大多数事情都回来了，但当前版本的代码与我上次提交的代码不同。它介于两者之间。=(

我做错什么了？[我不是无辜的，我知道我做错了;)]

正确的做法是什么？[我想我应该先分支]

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-12T18:39:52.797

我不知道 github for Mac rollback 做了什么，但似乎最好使用命令行来解决手头的问题：

`git cherry-pick --abort`- 停止任何正在进行的樱桃采摘

`git branch -va`- 会告诉你你的指针现在在哪里

确保您的工作目录是干净的： `git status`- 不应显示任何修改或暂存的文件

`git stash`- 如果任何修改仍然存在

`git reset --hard your_local_branch github/remote_branch`- 使本地分支反映远程端的状态。显然，如果您当前的分支将指向与远程相同的提交，则您不需要进行重置。如果你处于分离的 HEAD 状态（git status 会告诉你）然后回到正常状态只需检查你的本地分支。

现在决定你真正想要实现的目标：

I. 摆脱错误的提交？

使用交互式变基并删除错误提交的行，然后强制推送到 github 上的远程仓库（假设错误提交发生在 10 次提交前）

`git rebase -i HEAD~11`

二、恢复错误的提交？- 不建议在其他一些提交之后这样做，除非您绝对确定以下提交没有触及同一段代码。这将有效地创建反向提交（如果行是由错误提交添加的，它将被还原删除，反之亦然）

`git revert {commit-sha1}`

三、修改错误的提交？使用交互式变基，但指示它在错误提交时停止以进行修改。当它停止编辑更改并继续变基时，然后强制推送到远程分支（使用解决方案 I 中的变基命令）

完成后，如果有任何东西被隐藏，可以`git stash pop`用来恢复更改。

希望有帮助！

# windows - Windows 批量将一个 var 分配给另一个 var

> ID：12858421
> 
> 赞同：1
> 
> 时间：2012-10-12T11:48:41.687
> 
> 标签：windows, variables, batch-file

在我的 scipt 中，我从一个文件中获取一个字符串，我希望这个字符串被解释为一个 var：

```
for /f %%G in (..\..\outrep.txt) do SET AUTOIMPORTDIR=%%G 
```

在我的 outrep.txt 文件中，我有：`%USERPROFILE%`

所以我想`AUTOIMPORTDIR`等于，`C:\Documents and Settings\myUser` 实际上等于`%USERPROFILE%`

我该怎么做才能将此字符串解释为变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:55:57.147

在这种情况下，您可以使用另一个实例`FOR /F`来评估字符串 `%USERPROFILE%`，并使用执行`ECHO`命令的选项：

```
FOR /F %%G IN (..\..\outrep.txt) DO
    FOR /F "tokens=*" %%H IN ('ECHO %%G') DO SET AUTOIMPORTDIR=%%H 
```

重要细节：`tokens=*`如果您要获取的值包含空格或制表符，则该选项是必需的。

# c++ - 为什么我的迭代器指向 null，但只是有时？

> ID：12858426
> 
> 赞同：2
> 
> 时间：2012-10-12T11:49:10.487
> 
> 标签：c++

我需要编写一些类来在我的代码中实现上下文无关语法。CFG 具有“左侧 -> 右侧”格式的生成规则。它们的实现如下：

```
class GrammarProduction{

  public:

  Nonterminal mLhs;
  std::vector<GrammarSymbol*> mRhs; 
```

我想将我的生产规则存储在 std::set 中，以确保没有人可以添加重复的规则。为了进行重复检测，我为 GrammarProductions 实现了 operator<，如下所示。

```
bool GrammarProduction::operator<(const GrammarProduction& other) const{
  if (mLhs < other.Lhs()) return true;
  if (mRhs.size() < other.Rhs().size()) return true;
  std::vector<GrammarSymbol*>::const_iterator it1, it2;
  it2 = other.Rhs().begin();
  for(it1 = mRhs.begin(); it1 != mRhs.end(); it1++){
    std::cout << (*it1) << std::endl;
    std::cout << (*it2) << std::endl;
    if(**it1 < **it2) return true;
    it2++;
  }
  return false;    
} 
```

运行此代码让我在线上出现分段错误

```
 if(**it1 < **it2) return true; 
```

因为指针 *it2 为空。但是，如果我将打印 *it2 的行更改为

```
 std::cout << (*it2) << other.Str() << std::endl; 
```

它工作得很好，*it2 不为空。我不知道为什么会这样，任何建议都将不胜感激。如果有必要发布被调用的函数，我会这样做。我没有，因为我希望它对这个问题不重要，而且数量会相当大（至少对于一个帖子来说）。

编辑：我已经缩小了问题范围，归结为这个

```
bool GrammarProduction::operator<(const GrammarProduction& other) const{
  std::vector<GrammarSymbol*>::const_iterator it1, it2;

  it1 = mRhs.begin();
  std::cout << "it1:" << std::endl;
  std::cout << (*(mRhs.begin()))->Str() << std::endl; //output (1,2,2)
  std::cout << (*it1)->Str() << std::endl; //output (1,2,2)

  it2 = other.Rhs().begin();
  std::cout << "it2:" << std::endl;
  std::cout << (*(other.Rhs().begin()))->Str() << std::endl; //output (1,2,2)
  std::cout << (*it2)->Str() << std::endl; //Segmentation Fault

  //do whatever
  return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:12:59.313

您应该`it2 == other.Rhs().end()`在循环中检查。如果将迭代器递增到最后一个元素，则取消引用它是无效的，并且可能会导致分段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:41:16.007

您正在调用未定义的行为。由于您的函数*按 value*`Rhs()`返回向量，因此它在完整表达式的末尾被销毁：

 *```
//          vvvvv -- created here
it2 = other.Rhs().begin();
//          gone here -- ^ 
```

这就产生`it2`了一个*悬空迭代器*，它与悬空指针基本相同。取消引用此迭代器将导致 UB。要修复，请将返回类型设为引用：

```
std::vector<GrammarSymbol*>& Rhs(){ return mRhs; } // depending on your needs
std::vector<GrammarSymbol*> const& Rhs() const{ return mRhs; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:07:38.073

```
if(**it1 < **it2) return true;
it2++; 
```

不是很好，因为在你的 for 循环中你不检查 it2 是否到达列表的末尾。

应该工作的版本将是：

```
bool GrammarProduction::operator<(const GrammarProduction& other) const{
  if (mLhs < other.Lhs()) return true;
  if (mRhs.size() < other.Rhs().size()) return true;
  std::vector<GrammarSymbol*>::const_iterator it1, it2;
  it2 = other.Rhs().begin();
  it2End = other.Rhs().end();
  for(it1 = mRhs.begin(); it1 != mRhs.end(); it1++){
    std::cout << (*it1) << std::endl;
    if (it2 == it2End ) return true;
    std::cout << (*it2) << std::endl;
    if(**it1 < **it2) return true;
    it2++;
  }
  return false; 
```

}*

# css - CSS - 文本装饰不适用于图像

> ID：12858427
> 
> 赞同：0
> 
> 时间：2012-10-12T11:49:11.843
> 
> 标签：css

我的页面中有一个图像，当我将鼠标悬停在该图像`text-decoration:underline;` *css*属性上时不起作用...

```
<div class='imgover'>
   click me<img  src='http://www.google.co.uk/images/srpr/logo3w.png' alt='Img' />
</div> 
```

CSS类如下，

```
.imgover:hover
{    
    text-decoration:underline;
} 
```

参考这个链接[http://jsfiddle.net/smanimani/cwnwK/1/](http://jsfiddle.net/smanimani/cwnwK/1/)

但是文本装饰适用于文本，但不适用于图像......！

我该如何解决这个问题？

提前致谢....！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:51:46.380

利用

```
.imgover:hover 
{     
border-bottom: 1px solid red; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:05:18.273

从改变：

```
.imgover:hover {    
  text-decoration:underline;
} 
```

对此：

```
.imgover:hover {     
  border-bottom: 1px solid #000; 
} 
```

`text-decoration`用于文本，`border-bottom`可用于一切。

唯一适用于图像的与文本相关的 CSS 属性是`text-align`.

# android - 允许安卓应用修改其他应用的文件

> ID：12858431
> 
> 赞同：1
> 
> 时间：2012-10-12T11:49:20.480
> 
> 标签：android

android SDK 禁止一个应用修改另一个应用的文件。但是，像 App Cache Cleaner 这样的应用程序无需 root 访问权限即可。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:12:04.120

通过利用 Android 中的安全漏洞，我已经报告并且迄今为止被 Google 忽略了。

# magento - magento 1.7 - 无法删除折扣

> ID：12858438
> 
> 赞同：0
> 
> 时间：2012-10-12T11:49:41.090
> 
> 标签：magento, e-commerce

我创建了一个目录价格规则，为所有产品提供 3% 的折扣。然后我禁用了规则，但折扣仍然出现。然后我尝试将折扣更改为零，甚至删除规则。折扣仍然没有消失。我等了一天，以为折扣是按天固定的。仍然没有运气。最后的手段是回滚到上周的备份。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:39:48.217

修改规则后务必清除所有缓存并重新索引。

# javascript - 在内部链接上，例如到#id 是否有触发事件，我可以将处理程序附加到？

> ID：12858440
> 
> 赞同：4
> 
> 时间：2012-10-12T11:49:50.143
> 
> 标签：javascript, jquery, html, anchor

我有一个网页，上面有各种“内部”链接，指向具有各种 id 的各种对象。该网页还具有滚动事件的附件，以在滚动一定量时隐藏/显示某些项目。

我想在单击这些链接之一后页面导航到另一个部分时触发滚动事件处理程序。

click 事件在导航之前触发，因此我无法附加到该事件，因为它需要根据新位置做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:12:13.370

hashchange事件呢[？](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)这些天来，它[得到了广泛的支持。](http://caniuse.com/#feat=hashchange)（Modernizr 有一个测试和很多 polyfill，以防万一......）

顺便说一句，如果您想保存位置，请查看[HTML5 History API](http://diveintohtml5.info/history.html)。history.pushState 应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:01:18.920

当您单击单个页面上的哈希链接时，不会触发“onChange”事件。当代（AJAXed）页面监控哈希变化的唯一方法是使用一个间隔，之后调用一个 JavaScript 函数来进行检查。

所以换句话说，唯一的可能性是及时保存最后一个哈希位置（`document.location.hash`），如果不满足某些条件，则导航回旧位置。

# jboss - Java EE6（带JBoss7）：自动回滚事务

> ID：12858452
> 
> 赞同：1
> 
> 时间：2012-10-12T11:50:18.970
> 
> 标签：jboss, java-ee-6, jboss7.x

我想测试事务的自动回滚。因此，我实现了一个简单的 bean[src]，它会引发系统异常，这应该会导致自动回滚 [1]。我还实现了*SessionSynchronization接口，因此我可以使用**afterCompletion*方法影响回滚。但是这种方法的论点是**正确**的，我希望在规范方面是**错误的[2]。**

我是否遗漏了什么或者这是 JBoss 7 中的错误？我已经搜索了错误跟踪器，但没有找到任何东西……也许我用错了词？

如果这不是错误：如果发生系统或应用程序异常，是否有任何关于将*afterCompletion参数设置为 false 的设置？*

* * *

[1]：*“回滚容器管理的事务有两种方式。一是如果抛出系统异常，容器会自动回滚事务。二是通过调用EJBContext接口的setRollbackOnly方法，bean方法指示容器回滚事务。如果 bean 抛出应用程序异常，回滚不是自动的，但可以通过调用 setRollbackOnly 来启动。* [http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html)

[2]：*“afterCompletion 方法通知有状态会话 bean 实例事务提交协议已完成，并告诉实例事务是否已提交或回滚。”* [http://docs.oracle.com/javaee/6/api/javax/ejb/SessionSynchronization.html](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionSynchronization.html)

[源]：

```
@Stateful
@LocalBean
public class RollbackTestBean implements RollbackTest, SessionSynchronization {

  int counter = 0;
  int counterBuffer = 0;
  private final Logger logger = Logger.getLogger(this.getClass().getName());

  @Override
  public int getCounter() {
    return counter;
  }

  @Override
  public void throwSystemException() throws SystemException {
    counter++;
    throw new SystemException();
  }

  @Override
  public void afterBegin() throws EJBException, RemoteException {
    logger.info("[TX]: after begin");
    counterBuffer = counter;
  }

  @Override
  public void afterCompletion(boolean success) throws EJBException, RemoteException {
    logger.info("[TX]: after completion: " + success);
    if (!success)
      counter = counterBuffer;
  }

  @Override
  public void beforeCompletion() throws EJBException, RemoteException {
    logger.info("[TX]: before completion");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:19:04.540

有两个 SystemExceptions

```
org.omg.CORBA.SystemException  subclass of RuntimeException
javax.transaction.SystemException subclass of Exception 
```

我希望你正在使用 org.omg.CORBA.SystemException

EJB3.1 规范说，如果它的 RuntimeException 或 ApplicationException，事务需要回滚。

据我所知，ApplcationException 在 JBoss 7.1.1 中得到了正确处理，但不是 RuntimeException。

对于 RuntimeException，在 Statefull bean 上调用 remove() 时会报告类似的问题，请参阅[此处](https://issues.jboss.org/browse/AS7-5077)。当我尝试抛出 RuntimeException 时，我收到了相同的错误消息。我认为它已在 Verion 7.1.3 中修复。但我没有测试过自己。

如果您正在寻找修复程序，您可以尝试 7.1.3。如果您有异常并希望事务回滚，请使用

```
@ApplicationException(rollback=true) 
```

麦迪

# php - 服务器在一个文件中返回原始 php

> ID：12858453
> 
> 赞同：0
> 
> 时间：2012-10-12T11:50:20.830
> 
> 标签：php, rendering

我有一个包含以下初始代码的文件：

```
<?php 

    $body_tags = 'class="careers"';
    $title = "Ensure Security | Security Guards in Wiltshire";
    $keywords = "Ensure, Security, door guard, supervision, covert, guard, guarding, static, event, retail, commercial, security van, dog unit, melksham, Wiltshire, south West, safety, sia, protection, surveillance, rapid response.";
    $description = "Ensure Security are a Wiltshire based company. We strive to provide our clients with the best service. We offer a personal and professional approach. Ensure Security have been established now for 15 years and hold a respectable client portfolio.";

?>
<?php include 'template/head.php'; ?>

        <div class="maincontent">
            <div class="left"> 
                <ul id="navmenu"> 
```

它作为原始文本发送到浏览器 - php标签和所有。但是，网站中的所有其他页面都在正确处理 - 例如：

```
<?php 

    $body_tags = 'class="services"';
    $title = "Ensure Security | Security Guards in Wiltshire";
    $keywords = "Ensure, Security, door guard, supervision, covert, guard, guarding, static, event, retail, commercial, security van, dog unit, melksham, Wiltshire, south West, safety, sia, protection, surveillance, rapid response.";
    $description = "Ensure Security are a Wiltshire based company. We strive to provide our clients with the best service. We offer a personal and professional approach. Ensure Security have been established now for 15 years and hold a respectable client portfolio.";

?>
<?php include 'template/head.php'; ?>

        <div class="maincontent">
            <div class="left"> 
                <ul id="navmenu"> 
```

正确渲染。

我一直在编辑这两个页面，但不是其中的 php。发生了什么？

编辑：包含的文件可以这样做吗？

# html - 内容框架内的页脚

> ID：12858455
> 
> 赞同：0
> 
> 时间：2012-10-12T11:50:35.613
> 
> 标签：html, css, wordpress

页脚位于网站框架内，而不是位于其下方：

[http://www.lauradawaf.co.uk/contact](http://www.lauradawaf.co.uk/contact)

**HTML**

```
<div id="footer">
    <div id="footer-inner">
    <span>Laura Dawaf &copy; | +44(0)7979 427 527 | <a href="mailto:info@lauradawaf.co.uk">info@lauradawaf.co.uk</a </span>
                    </div>

<a href="#top">Back to top.</a>
                </div> 
```

**CSS**

```
#footer {
    margin:0px;
    font-size: 11px;
    margin:54px 0 0 0;
    color: #9E9D9D;
} 
```

并且页脚在投资组合页面上不可见：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:54:01.787

从 div#primary 和 div#footer 中删除绝对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:07:54.470

现在你的 css 样式有一些变化，就像这样

您的布局编码中只有三个变化比您的设计完美演示如下

```
#project_thumbnails.isotope{
overflow:hidden;  // remove this line in your inline stylesheet
}

#primary.isotope-item{
position:abslute; // remove this line in your inline stylesheet
}

#footer.isotope-item{
position:absolute; // remove this line in your inline stylesheet 
} 
```

![在此处输入图像描述](../Images/990826d77f13c7e5c6bf14cdd229bb20.png)

**如果您现在在 html 页面中找到此 css，而不是像这样在您的主 css 样式表中应用**

```
#project_thumbnails.isotope{
    overflow: auto !important;  // add this css in your main css file
    }

    #primary.isotope-item{
    position:static  !important; //add this css in your main css file
    }

    #footer.isotope-item{
    position:static !important; // add this css in your main css file
    } 
```

# php - PHP memory_limit 越多越好吗？

> ID：12858457
> 
> 赞同：27
> 
> 时间：2012-10-12T11:50:45.280
> 
> 标签：php, performance, memory, memory-limit

在 PHP 中，我经常面临内存限制问题。尤其是像 Drupal 等高度资源集成的系统。

我想在这里知道的是：

*   有非常高的 php 内存限制（如 2GB）是否很好？
*   有什么大缺点吗？

**编辑：**

> 作为一个场景，例如在 Drupal 中，当我们通过 Web 面板（不是通过 Drush 或任何脚本）清除缓存时，它需要大量内存。因此，即使仅在这种情况下，我目前肯定需要大约 512MB 的上限。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-12T11:53:34.667

黄金法则：***只为 PHP 提供 PHP 需要工作的东西，仅此而已。***

这将防止您的系统不必要地阻塞 PHP 进程的情况，并且还将帮助您发现错误（占用 1GB 内存的脚本是不寻常的，并且提供 2GB 的内存限制将隐藏它）。

* * *

对于特殊情况，您知道单个脚本文件的内存非常大，您可以使用[`ini_set()`](http://il.php.net/ini_set)在运行时更改内存限制指令。看到**[这个](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)**和**[这个](http://il.php.net/ini_set)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:55:58.850

No, the more is not the better. It's the amount of memory a *single* script is allowed to consume. If your server contains, say, 4GB of memory, only two scripts simultaneously could eat all that memory.

In general, PHP scripts should use little memory. Normally all memory a script reserves is freed when it terminates, but you can clean up memory before that by explicitly `unset`ting variables that are no longer needed during execution. That way, you can make your script more memory-efficient.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:55:43.717

如果您*知道*脚本需要大量内存，那么将限制设置为高是非常安全的，并且需要。如果系统的可用内存量和其他正在运行的应用程序的限制设置为高，则可能会出现问题。

还要记住，如果内存限制为 64 MB 或类似的东西，可能会以无限循环处理某些数据的错误脚本通常会很快停止。在这种情况下，将内存限制设置为 4 GB 将使您的系统在无限循环中全速运行更长的时间，并可能导致您的整个系统变得无响应。

但是我有大型数据处理应用程序，其内存限制约为 2-4 GB，在具有 4-8 GB 内存的系统上没有任何问题。请注意，正如其他用户所述，这些应用程序是一个实例。如果您有运行多个脚本实例的应用程序（就像大多数 Web 应用程序一样），您会因为在每个实例中使用大量内存而遇到重大问题。您将耗尽内存，并且在释放内存之前，其他客户端将无法使用您的应用程序。

但不要只是增加内存限制来隐藏问题。检查为什么您的应用程序需要这么多内存，看看您是否可以先解决这个问题。

# jquery - jQuery AJAX $get not working

> ID：12858459
> 
> 赞同：0
> 
> 时间：2012-10-12T11:50:53.667
> 
> 标签：jquery, ajax, get

This is my first attempt at AJAX, and so I'm keeping it simple. I've got a text file details.txt in the same folder as the index.html page.

The javascript I've got is as follows:

```
<script language="JavaScript" type="text/javascript">
  function getInfoFromServer() {
    $.get('details.txt', function(data) {
      $('#AJAXtest').html(data);
    });
}
</script> 
```

And I'm calling that from a link as follows:

```
<a href="#" onClick="return false" onmousedown="javascript:getInfoFromServer()">Link</a> 
```

And there's a div sitting nearby:

```
<div id="AJAXtest"></div> 
```

The content of details.txt are:

```
test 
```

I can't get this simple thing to work. Can anyone tell me what I'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:52:15.760

Do you not want:

```
$('a').on('click', function() {
  $.get('details.txt', function(data) {
    $('#AJAXtest').html(data);
  });
  return false;
}); 
```

then

`<a href="#">Link</a>`

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:59:00.890

I had put the text file in the wrong folder. I should have looked at the console. Sorry to bother you guys.

# regex - 使用正则表达式解析 ifconfig 响应

> ID：12858460
> 
> 赞同：0
> 
> 时间：2012-10-12T11:50:53.480
> 
> 标签：regex

我想从以下输出中检索 IP 地址。

```
vmnet1    Link encap:Ethernet 
          inet addr:192.168.185.1  Bcast:192.168.185.255  Mask:255.255.255.0

          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:24 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

我想获取 IP 和掩码，结果将是

```
192.168.185.1

255.255.255.0 
```

谁能告诉我正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:58:50.503

我做了第三次尝试，就是这样。

```
(addr|Mask):([0-1]{1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]|[0-9]{1,2}).([0-1]{1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]|[0-9]{1,2}).([0-1]{1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]|[0-9]{1,2}).([0-1]{1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]|[0-9]{1,2}) 
```

它现在只选择有效的 IP 地址，只要它前面有 addr 或 Mask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:59:05.333

例如像这样：

```
/addr\:([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}).*Mask\:([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:05:31.007

尝试以下`awk`行：

```
awk -F'[ :]' '/inet addr/{print $13 "\n" $19}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:08:04.277

如果您确定您的格式是一致的，那么像这样简单的事情应该可以解决问题：

```
inet addr:([^\sB]*).*Mask:(.*)$ 
```

# c# - 水平 ScrollViewer 中的 XAML 垂直滚动网格

> ID：12858463
> 
> 赞同：0
> 
> 时间：2012-10-12T11:51:03.263
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在尝试在 XAML / C# 中重新创建天气应用程序的布局。我有一个`ListView`完整的 ListViewItems。它是 中的几个对象之一`ScrollViewer`。最终结果应该是用户可以水平滚动对象，但在 ListView 上停止并垂直滚动。

要使效果起作用，`ScrollViewer`必须与页面的高度匹配，并且`ListView`必须与 的高度匹配`ScrollViewer`，而不是拉伸它。

`Window.Current.Bounds`如果不使用代码隐藏来查找并将高度应用于 ，我无法弄清楚如何做到这一点`ScrollViewer`，这似乎是一个肮脏的黑客行为。有没有办法纯粹在 XAML 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:12:19.163

这可能是您正在寻找的，但您可能会发现实现“天气应用”的外观和感觉很有用：

[http://dotnetbyexample.blogspot.co.uk/2012/08/a-winrt-behavior-to-turn-flipview-into.html](http://dotnetbyexample.blogspot.co.uk/2012/08/a-winrt-behavior-to-turn-flipview-into.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:09:17.333

它`ListView`有自己的滚动条，不需要 ScrollViewer。否则，要让事情伸展，它应该很容易——你是如何把东西放在 ScrollViewer 中的？通过一个`Grid`？一个`StackPanel`？

# c# - 需要帮助 从小字节数组创建大数组

> ID：12858465
> 
> 赞同：3
> 
> 时间：2012-10-12T11:51:14.363
> 
> 标签：c#, bytearray

我得到以下代码：

```
 byte[] myBytes = new byte[10 * 10000];
    for (long i = 0; i < 10000; i++)
    {
        byte[] a1 = BitConverter.GetBytes(i);
        byte[] a2 = BitConverter.GetBytes(true);
        byte[] a3 = BitConverter.GetBytes(false);

        byte[] rv = new byte[10];
        System.Buffer.BlockCopy(a1, 0, rv, 0, a1.Length);
        System.Buffer.BlockCopy(a2, 0, rv, a1.Length, a2.Length);
        System.Buffer.BlockCopy(a3, 0, rv, a1.Length + a2.Length, a3.Length);
    } 
```

一切正常。我试图转换此代码，以便将所有内容写入，`myBytes`但后来我意识到，我使用了 long，如果它的值更高，那么`int.MaxValue`转换将失败。怎么能解决这个问题？

另一个问题是，因为我不想在内存中创建一个非常大的字节数组，我怎么能将它直接发送到我的`.WriteBytes(path, myBytes);`函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:09:31.830

如果按照建议，最终目的地是文件：则更直接地写入文件，而不是在内存中缓冲：

```
using (var file = File.Create(path)) // or append file FileStream etc
using (var writer = new BinaryWriter(file))
{
    for (long i = 0; i < 10000; i++)
    {
        writer.Write(i);
        writer.Write(true);
        writer.Write(false);
    }
} 
```

*在您的情况下*，这样做的理想方法可能是在序列化它们时依次将单个`BinaryWriter`实例传递给每个对象（不要打开和关闭每个对象的文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:56:37.197

为什么在处理它们时不直接将字节写入（）而不是转换为大缓冲区，或者至少使用较小的缓冲区？

# database - 休眠事务和物理事务同时启动和关闭？

> ID：12858470
> 
> 赞同：0
> 
> 时间：2012-10-12T11:51:34.947
> 
> 标签：database, hibernate, transactions

当我启动休眠事务时，它会打开与数据库的连接并在那里启动物理连接吗？关闭休眠事务的问题是相同的，所以它会立即关闭物理事务吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:01:39.563

不，它使用连接池，如[文档中所述](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-hibernatejdbc)。所以连接是从池中检索的，当关闭时，它们只是回到池中。

# c - 为什么要定义函数而不是包含文件

> ID：12858471
> 
> 赞同：2
> 
> 时间：2012-10-12T11:51:39.473
> 
> 标签：c, function, include

我正在编写一个代码，里面有 5 个包含文件，我在这个文件中定义函数，然后意识到为什么我不应该将`header files`所有函数分开，然后最后将它们包含在一个文件中。但是，我已经看到通常不会这样做。为什么不？这样做有什么特别的缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:12:25.553

这不是一个真正的答案，因为这个问题有一个错误的假设：

> 但是，我已经看到通常不会这样做。

这不是真的。这是一种常见的做法。一个很好的例子是[ffmpeg.h](http://www.lavrsen.dk/svn/motion/tags/3.2.9/ffmpeg.h)。标头是扩展库的前端。

编译时间长的论点是虚假的。今天的系统非常快。这仅对非常庞大的系统很重要，但我真的不认为您使用它们。我自己从来没有遇到过这样的系统。

编译时间不是执行时间。这是另一个误解。

为方便起见，ffmpeg.h 的整个代码：

```
#ifndef _INCLUDE_FFMPEG_H_
#define _INCLUDE_FFMPEG_H_

#ifdef HAVE_FFMPEG
#include <avformat.h>
#endif

#include <stdio.h>
#include <stdarg.h>

/* Define a codec name/identifier for timelapse videos, so that we can
 * differentiate between normal mpeg1 videos and timelapse videos.
 */
#define TIMELAPSE_CODEC "mpeg1_tl"

struct ffmpeg {
#ifdef HAVE_FFMPEG
    AVFormatContext *oc;
    AVStream *video_st;
    AVCodecContext *c;

    AVFrame *picture;       /* contains default image pointers */
    uint8_t *video_outbuf;
    int video_outbuf_size;

    void *udata;            /* U & V planes for greyscale images */
    int vbr;                /* variable bitrate setting */
    char codec[20];         /* codec name */
#else
    int dummy;
#endif
};

/* Initialize FFmpeg stuff. Needs to be called before ffmpeg_open. */
void ffmpeg_init(void);

/* Open an mpeg file. This is a generic interface for opening either an mpeg1 or
 * an mpeg4 video. If non-standard mpeg1 isn't supported (FFmpeg build > 4680), 
 * calling this function with "mpeg1" as codec results in an error. To create a
 * timelapse video, use TIMELAPSE_CODEC as codec name.
 */
struct ffmpeg *ffmpeg_open(
    char *ffmpeg_video_codec, 
    char *filename, 
    unsigned char *y,    /* YUV420 Y plane */
    unsigned char *u,    /* YUV420 U plane */
    unsigned char *v,    /* YUV420 V plane */
    int width,
    int height, 
    int rate,            /* framerate, fps */
    int bps,             /* bitrate; bits per second */
    int vbr              /* variable bitrate */
    );

/* Puts the image pointed to by the picture member of struct ffmpeg. */
void ffmpeg_put_image(struct ffmpeg *);

/* Puts the image defined by u, y and v (YUV420 format). */
void ffmpeg_put_other_image(
    struct ffmpeg *ffmpeg, 
    unsigned char *y, 
    unsigned char *u, 
    unsigned char *v
    );

/* Closes the mpeg file. */
void ffmpeg_close(struct ffmpeg *);

/*Deinterlace the image. */
void ffmpeg_deinterlace(unsigned char *, int, int);

/*Setup an avcodec log handler. */
void ffmpeg_avcodec_log(void *, int, const char *, va_list);

#endif /* _INCLUDE_FFMPEG_H_ */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:47:14.017

有些人认为将函数放在单独的文件中并通过标头包含它们会增加项目的一些开销并增加编译（而不是执行）时间。尽管严格来说这是正确的，但实际上增加的编译时间可以忽略不计。

我对这个问题的看法更多地基于函数的目的。我反对为每个文件放置一个带有关联标题的函数，因为这很快就会变得一团糟。我不认为将每个人放在一个文件中也不是一个好方法（尽管出于不同的原因，维护起来也是一团糟）。

我的观点是，理想的权衡是查看函数的目的。您应该问问自己这些功能是否可以在其他地方使用。换句话说，这些函数是否可以作为其他程序中一系列常见任务的库？如果是，这些函数应该组合在一个文件中。使用与一般任务一样多的文件。例如，在一个文件中执行数值积分的所有函数，在另一个文件中处理文件 i/o 的所有函数，在第三个文件中处理字符串的所有函数等等。通过这种方式，您的库是一致的。

最后，我会将执行仅对特定程序有意义的任务的函数放入该`main`函数的同一文件中。例如，任何旨在初始化一系列变量的函数。

但最重要的是，你应该把任何建议当作建议。归根结底，您应该采用使您（或您的团队）开发效率最高的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:46:22.593

如果您正在编写某种 API 或库并希望该库的用户可以轻松访问其中的函数，则应该只创建一个“超级包含头”。Windows OS API 是最明显的例子，其中一个#include 让您可以访问成千上万个函数。

但即使在编写此类库时，您也应该警惕“超级头文件”。您应该尽量避免它们的原因与程序设计有关。面向对象的设计要求你应该努力制作独立的、自主的模块，这些模块专注于自己的任务，而不知道或关心程序的其余部分。

该设计规则背后的基本原理是减少称为*紧密[耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)*的现象，其中每个模块都严重依赖于其他模块。计算机科学研究（[例如这项研究](http://www.nap.edu/catalog.php?record_id=11923)）表明，紧密耦合与复杂性相结合会导致更多的软件错误，以及更严重的错误。如果一个紧密耦合的程序在一个模块中出现错误，错误可能会在整个程序中升级并导致灾难。而松耦合的自治模块中的错误只会导致该特定模块失败。

每次包含头文件时，都会在程序和该头文件之间创建依赖关系。因此，尽管创建一个包含所有内容的文件很诱人，但您应该避免这样做，因为它会在项目中的所有模块之间产生紧密耦合。它还将模块暴露给彼此的全局名称空间，可能导致更多名称空间与相同的变量名称等冲突。

除了安全问题之外，紧密耦合在链接/构建程序时也非常烦人。在紧密耦合的情况下，如果某些完全不相关的东西（例如 GUI 库未链接），您的数据库模块突然无法工作。

# excel-2007 - JBEHAVE-JXL：java.lang.ArrayIndexOutOfBoundsException：39181

> ID：12858474
> 
> 赞同：1
> 
> 时间：2012-10-12T11:51:46.787
> 
> 标签：excel-2007, jxl, jbehave, indexoutofboundsexception

JXL 版本 = 2.6.12

JBEHAVE 版本：3.6.8

优秀：MS EXCEL 2007

我正在从下面的类路径中读取我的 Jbehave 步骤类中的 excel 并获取 ArrayIndexOutOfBoundsException。相同的代码在独立的 java 代码中工作

> 工作簿工作簿 = null; InputStream 流 =this.getClass().getClassLoader().getResourceAsStream("test.xls"); 工作簿 = Workbook.getWorkbook(stream); Sheet sheet = workbook.getSheet(0); 单元格 a1 = sheet.getCell(0,0);

但是，如果我使用文件系统路径在 Jbehave 项目中读取 excel，我可以在 excel 中加载和读取工作表中的内容

> 工作簿 = Workbook.getWorkbook(new File("test.xls"));

下面是堆栈跟踪：

> java.lang.ArrayIndexOutOfBoundsException: 39181 在 jxl.read.biff.Record.(Record.java:79) 在 jxl.read.biff.File.next(File.java:181) 在 jxl.read.biff.WorkbookParser.parse (WorkbookParser.java:569) 在 jxl.Workbook.getWorkbook(Workbook.java:271) 在 jxl.Workbook.getWorkbook(Workbook.java:253) 在 org.teststepgiven.steps.Test.test(Test.java:33)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method .invoke(Method.java:597) 在 org.jbehave.core.steps.StepCreator$ParameterisedStep.perform(StepCreator.java:537) 在 org.jbehave.core.embedder。StoryRunner$FineSoFar.run(StoryRunner.java:477) at org.jbehave.core.embedder.StoryRunner.runStepsWhileKeepingState(StoryRunner.java:457) at org.jbehave.core.embedder.StoryRunner.runScenarioSteps(StoryRunner.java:421)在 org.jbehave.core.embedder.StoryRunner.runCancellable(StoryRunner.java:297) 在 org.jbehave.core.embedder.StoryRunner.run(StoryRunner.java:211) 在 org.jbehave.core.embedder.StoryRunner.run (StoryRunner.java:172) 在 org.jbehave.core.embedder.StoryManager$EnqueuedStory.call(StoryManager.java:229) 在 org.jbehave.core.embedder.StoryManager$EnqueuedStory.call(StoryManager.java:201) 在java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 在 java.util.concurrent。ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)

# wpf - 带有uri的control.image中没有设置图片

> ID：12858475
> 
> 赞同：0
> 
> 时间：2012-10-12T11:51:49.543
> 
> 标签：wpf, c#-4.0, uri

我的解决方案资源管理器图像：

![在此处输入图像描述](../Images/0ffd6f2d30a5955e2fedd5666cb8a59e.png)

我在 PopupWinHelper 中的代码：

```
var img = new Image
{
    BitmapEffect = new DropShadowBitmapEffect(),
    Stretch = Stretch.Fill,
    Source = new BitmapImage(new Uri("/WpfApplication1;component/images/PopupImage.png"))
}; 
```

我在主窗口中的代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    cuswin.PopupWinHelper.ShowPopUp(150,300,"asdad", new Thickness(20));
} 
```

为什么会出现这个错误？

然后我使用：

```
var img = new Image
{
    BitmapEffect = new DropShadowBitmapEffect(),
    Stretch = Stretch.Fill,
    Source = new BitmapImage(new Uri("/images/PopupImage.png", UriKind.Relative))
}; 
```

没有错误。但是图片没有显示在图像中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:05:50.920

```
Source = new BitmapImage(new Uri("/WpfApplication1;component/images/PopupImage.png", UriKind.Relative)) 
```

应该工作，假设 PopupImage.png 是一个资源。

问候

# css - 屏幕后的css可滚动div小于1025px

> ID：12858480
> 
> 赞同：1
> 
> 时间：2012-10-12T11:52:00.407
> 
> 标签：css

有没有办法，如果用户将屏幕尺寸更改为小于某个像素，例如 1025 像素，那么 div 将可以滚动？

我进行了搜索，但似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:54:54.900

是的

```
@media only screen and (min-device-width : 1025px) and (max-device-width : 1024px) { 
  /** STYLES FOR SMALLER SCREENS HERE **/
  body { padding:0px; } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:53:38.817

我不确定，但我觉得只要你的 div 没有禁用滚动并且位置没有固定，它就会自动出现。

# java - 当我删除然后添加项目时，我的队列无法显示

> ID：12858483
> 
> 赞同：2
> 
> 时间：2012-10-12T11:52:01.733
> 
> 标签：java, queue

我修改了一个程序，该程序创建一个队列，然后向其中添加或删除项目。

我的代码中的问题是，在我删除一个项目，然后添加一个项目后，它会进入无限循环，我不知道如何防止它发生。

我的目标是仅修改 display() 方法。

这就是我显示队列的方式：

```
 public void display() 
   {
       int i = front;

           do {
               if (maxSize == nItems)
               {
                   if (i == size())
                       i = 0;

                   System.out.print(queArray[i++] + " ");
               }
               else if (maxSize < nItems)
               {
                   System.out.print("Too many queue items!");
                   break;
               }
               else
                   maxSize = nItems;
           }
           while (i != rear + 1 && !isEmpty());
       } 
```

这就是我添加和删除项目的方式：

```
 public void insert(long j)   // put item at rear of queue
      {
      if(rear == maxSize-1)         // deal with wraparound
         rear = -1;
      queArray[++rear] = j;         // increment rear and insert
      nItems++;                     // one more item
      }

   public long remove()         // take item from front of queue
      {
      long temp = queArray[front++]; // get value and incr front
      if(front == maxSize)           // deal with wraparound
         front = 0;
      nItems--;                      // one less item
      return temp;
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:59:28.633

![队列](../Images/2d62a24313d2302cc2c9cb7d9feb958b.png)

这是相同的源代码。

```
import java.util.Arrays;

public class Queue {

    private int enqueueIndex;// Separate index to ensure enqueue happens at the end
    private int dequeueIndex;// Separate index to ensure dequeue happens at the
                            // start
    private int[] items;
    private int count;
    // Lazy to add javadocs please provide
    public Queue(int size) {
        enqueueIndex = 0;
        dequeueIndex = 0;
        items = new int[size];
    }
    // Lazy to add javadocs please provide
    public void enqueue(int newNumber) {
        if (count == items.length)
            throw new IllegalStateException();
        items[enqueueIndex] = newNumber;
        enqueueIndex = ++enqueueIndex == items.length ? 0 : enqueueIndex;
        ++count;
    }
    // Lazy to add javadocs please provide
    public int dequeue() {
        if (count == 0)
            throw new IllegalStateException();
        int item = items[dequeueIndex];
        items[dequeueIndex] = 0;
        dequeueIndex = ++dequeueIndex == items.length ? 0 : dequeueIndex;
        --count;
        return item;
    }

    @Override
    public String toString() {
        return Arrays.toString(items);
    }
} 
```

# joomla - joomla 中的愿望清单集成

> ID：12858486
> 
> 赞同：0
> 
> 时间：2012-10-12T11:52:08.717
> 
> 标签：joomla

我对整个 Joomla/Virtuemart 世界有点陌生。我正在尝试在我的 joomla 1.5.26 中实现**“我的愿望清单”模块。**我也在谷歌搜索过，但它不是免费的。

我的逻辑是这样的：

我有一个产品列表，以及“**添加到愿望清单**”按钮。如果注册用户单击该按钮，则该产品 ID 和类别 ID 已保存在`jos_user`表中，我在其中添加了一个名为“ **wishlist** ”的新字段。

现在到这没关系。现在的问题是在一个页面中获取那些产品（假设页面名称是我的愿望清单），它们只在那个列表中。是否有任何文件可以更改该特定页面的查询（我的愿望清单）。如果是这样，请帮助我。这很紧急。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:14:45.453

如果您的愿望清单是一个模块而不是一个组件，那么找到更改代码所需的文件应该不会太难。我不太确定文件结构，但它很可能在 helper.php 之类的文件中

# asp.net - 如何从 Telerik RadGrid 获取“KeyValue”？

> ID：12858487
> 
> 赞同：11
> 
> 时间：2012-10-12T11:52:09.477
> 
> 标签：asp.net, telerik, grid

```
<telerik:RadGrid ID="radGrid" runat="server" AllowPaging="true" AllowCustomPaging="True"
    GridLines="None" PageSize="20" AllowMultiRowSelection="true" ClientSettings-Selecting-AllowRowSelect="true"
    AutoGenerateColumns="false" onneeddatasource="radGrid_NeedDataSource" OnItemCreated="radGrid_ItemCreated"
    OnItemDataBound="radGrid_ItemDataBound" OnItemCommand="radGrid_ItemCommand"
    DataKeyNames="ClientID">
    <mastertableview datakeynames="ID" gridlines="None" width="100%">
    <PagerTemplate> and so on ... </telerik:RadGrid> 
```

**场景**： -*上面给出的是我正在使用的 Telerik RagGrid 控件的标记。我尝试以通常的方式访问 GridColumn 的 KeyValue，*

```
Int32 key = Convert.ToInt32((e.Item as GridDataItem).GetDataKeyValue("ID")); 
```

**这是行不通的。有替代品吗？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T13:53:03.730

请尝试以下代码片段。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{

    if (e.Item is GridDataItem)
    {
        // NORMAL MODE
        GridDataItem item = e.Item as GridDataItem;
        string strId = item.GetDataKeyValue("ID").ToString();
    }

    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {

        if (e.Item is GridEditFormInsertItem)
        {
            // INSERT MODE
            GridEditableItem editedItem = e.Item as GridEditableItem;

        }
        else
        {
            // EDIT MODE
            GridEditableItem editedItem = e.Item as GridEditableItem;
            string strId = editedItem.GetDataKeyValue("ID").ToString();

        }

    }
}

protected void RadGrid1_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName == "YourCommandName")
    {
        GridDataItem item = e.Item as GridDataItem;
        string strId = item.GetDataKeyValue("ID").ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T13:12:00.300

试试这个

```
string keyValue = radGrid.MasterTableView.DataKeyValues[e.item.ItemIndex].ToString();
int key = Convert.ToInt32(keyValue); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-27T09:10:32.277

在标记中定义您的数据键：

```
< MasterTableView datakeynames="ID" dir="RTL">< /MasterTableView> 
```

并在后面的代码中访问：

```
GridDataItem item = (GridDataItem)e.Item;

var key = item.GetDataKeyValue("ID"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:40:52.203

您正在尝试访问甚至未在 radgrid 标记中指定的数据键：

```
DataKeyNames="ClientID"

Int32 key = Convert.ToInt32(dataItem.GetDataKeyValue("ID")); 
```

它应该是：

```
Int32 key = Convert.ToInt32(dataItem.GetDataKeyValue("ClientID")); 
```

# php - php ldap_bind 在密码包含 & 时失败

> ID：12858493
> 
> 赞同：3
> 
> 时间：2012-10-12T11:52:36.537
> 
> 标签：php, escaping

我在我的活动目录上使用了下面的这个功能进行身份验证，它工作正常，除了一些包含特殊字符的密码，比如这个： `Xefeéà&"+` 它总是返回“无效凭据”

我在互联网上看过几篇文章，但似乎没有一个能正确逃脱这些字符。

我正在使用 PHP 版本 5.3.8-ZS（Zend 服务器）

这是我的类构造函数中的设置：

```
ldap_set_option($this->_link, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($this->_link, LDAP_OPT_REFERRALS, 0); 
```

和登录功能：

```
public function login($userlogin,$userpassword){
$return=array();
$userlogin.="@".$this->_config["domaine"];
$ret=@ldap_bind($this->_link , $userlogin ,utf8_decode($userpassword));
if(!$ret){
    $return[]=array("status"=>"error","message"=>"Erreur d'authentification ! <br/> Veuillez vérifier votre nom et mot de passe SVP","ldap_error"=>ldap_error($this->_link));
}
if($ret)
{
    $return[]=array("status"=>"success","message"=>"Authentification réussie");
}
return json_encode($return);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-06T08:41:53.313

我们发现自己处于类似的情况，我们为我们内部托管的 Web 应用程序之一设置的企业环境 LDAP 身份验证设置似乎运行良好，直到密码中包含特殊字符的用户——比如？& * ' - 想要使用该应用程序，然后很明显有些东西实际上并没有按预期工作。

* * *

我们发现，当受影响用户的密码中存在特殊字符时，我们的身份验证请求失败`ldap_bind()`，并且通常会看到诸如`Invalid credentials`或`NDS error: failed authentication (-669)`（来自 LDAP 的扩展错误日志）之类的错误输出到日志中。事实上，正是该`NDS error: failed authentication (-669)`错误导致发现绑定失败可能是由于密码中存在特殊字符 - 通过此 Novell 支持文章[https://www.novell.com/support/kb/doc.php？ id=3335671](https://www.novell.com/support/kb/doc.php?id=3335671)最值得注意的部分摘录如下：

> 管理员密码包含 LDAP 无法识别的字符，即：“_”和“$”

已经广泛测试了一系列修复程序，包括通过`html_entity_decode()`、`utf8_encode()`等“清除”密码，并确保在 Web 应用程序和各种服务器之间没有发生密码错误编码，但无论做了什么调整或保护输入文本以确保其原始 UTF-8 编码保持不变，`ldap_bind()`当密码中存在一个或多个特殊字符时总是失败（我们没有测试用户名中包含特殊字符的案例，但其他人在用户名包含特殊字符而不是密码或除了密码之外）。

我们还`ldap_bind()`直接使用在命令行上运行的最小 PHP 脚本进行了测试，该脚本使用硬编码的用户名和密码，用于测试 LDAP 帐户的密码中包含特殊字符（包括问号、星号和感叹号），以尝试尽可能多地消除潜在的失败原因，但绑定操作仍然失败。因此很明显，这不是 Web 应用程序和服务器之间的密码错误编码的问题，所有这些都被设计和构建为端到端兼容 UTF-8。相反，它似乎存在一个潜在的问题`ldap_bind()`及其对特殊字符的处理。相同的测试脚本成功地绑定了另一个密码中没有任何特殊字符的帐户，进一步证实了我们的怀疑。

正如大多数 PHP LDAP 身份验证教程所推荐的那样，早期版本的 LDAP 身份验证工作如下：

```
$success = false; // could we authenticate the user?

if(!defined("LDAP_OPT_DIAGNOSTIC_MESSAGE")) {
    define("LDAP_OPT_DIAGNOSTIC_MESSAGE", 0x0032); // needed for more detailed logging
}

if(($ldap = ldap_connect($ldap_server)) !== false && is_resource($ldap)) {
    ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3);
    ldap_set_option($ldap, LDAP_OPT_REFERRALS, 0);

    if(@ldap_bind($ldap, sprintf("cn=%s,ou=Workers,o=Internal", $username), $password)) {
        $success = true; // login succeeded...
    } else {
        error_log(sprintf("* Unable to authenticate user (%s) against LDAP!", $username));
        error_log(sprintf(" * LDAP Error: %s", ldap_error($ldap)));

        if(ldap_get_option($ldap, LDAP_OPT_DIAGNOSTIC_MESSAGE, $extended_error)) {
            error_log(sprintf(" * LDAP Extended Error: %s\n", $extended_error));
            unset($extended_error);
        }
    }
}
@ldap_close($ldap); unset($ldap); 
```

很明显，我们更简单的解决方案只使用`ldap_connect()`并且`ldap_bind()`不允许使用复杂密码的用户进行身份验证，因此我们必须找到替代方案。

我们选择了一种解决方案，该解决方案首先使用系统帐户绑定到我们的 LDAP 服务器（创建时具有搜索用户所需的权限，但有意将其配置为受限的只读帐户）。然后，我们使用提供的用户名搜索用户帐户`ldap_search()`，然后`ldap_compare()`将用户提供的密码与存储在 LDAP 中的密码进行比较。该解决方案已被证明是可靠且有效的，我们现在能够对密码中包含特殊字符的用户和没有密码的用户进行身份验证！

新的 LDAP 进程的工作方式如下：

```
if(!defined("LDAP_OPT_DIAGNOSTIC_MESSAGE")) {
    define("LDAP_OPT_DIAGNOSTIC_MESSAGE", 0x0032); // needed for more detailed logging
}

$success = false; // could we authenticate the user?

if(($ldap = @ldap_connect($ldap_server)) !== false && is_resource($ldap)) {
    ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3);
    ldap_set_option($ldap, LDAP_OPT_REFERRALS, 0);

    // instead of trying to bind the user, we bind to the server...
    if(@ldap_bind($ldap, $ldap_username, $ldap_password)) {
        // then we search for the given user...
        if(($search = ldap_search($ldap, "ou=Workers,o=Internal", sprintf("(&(uid=%s))", $username))) !== false && is_resource($search)) {
            // they should be the first and only user found for the search...
            if((ldap_count_entries($ldap, $search) == 1) && ($entry = ldap_first_entry($ldap, $search)) !== false && is_resource($entry)) {
                // we ensure this is the case by obtaining the user identifier (UID) from the search which must match the provided $username...
                if(($uid = ldap_get_values($ldap, $entry, "uid")) !== false && is_array($uid)) {
                    // ensure that just one entry was returned by ldap_get_values() and ensure the obtained value matches the provided $username (excluding any case-differences)
                    if((isset($uid["count"]) && $uid["count"] == 1) && (isset($uid[0]) && is_string($uid[0]) && (strcmp(mb_strtolower($uid[0], "UTF-8"), mb_strtolower($username, "UTF-8")) === 0))) {
                        // once we have compared the provied $username with the discovered username, we get the DN for the user, which we need to provide to ldap_compare()...
                        if(($dn = ldap_get_dn($ldap, $entry)) !== false && is_string($dn)) {
                            // we then use ldap_compare() to compare the user's password with the provided $password
                            // ldap_compare() will respond with a boolean true/false depending on if the comparison succeeded or not, and -1 on error...
                            if(($comparison = ldap_compare($ldap, $dn, "userPassword", $password)) !== -1 && is_bool($comparison)) {
                                if($comparison === true) {
                                    $success = true; // user successfully authenticated, if we don't get this far, it failed...
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    if(!$success) { // if not successful, either an error occurred or the credentials were actually incorrect
        error_log(sprintf("* Unable to authenticate user (%s) against LDAP!", $username));
        error_log(sprintf(" * LDAP Error: %s", ldap_error($ldap)));
        if(ldap_get_option($ldap, LDAP_OPT_DIAGNOSTIC_MESSAGE, $extended_error)) {
            error_log(sprintf(" * LDAP Extended Error: %s\n", $extended_error));
            unset($extended_error);
        }
    }
}
@ldap_close($ldap);
unset($ldap); 
```

最初的担忧之一是，这种带有所有额外步骤的新方法将花费更长的时间来执行，但事实证明（至少在我们的环境中）运行一个简单的解决方案和使用和运行一个`ldap_bind()`更复杂的解决方案之间的时间差异是实际上微不足道，平均可能长 0.1 秒。`ldap_search()``ldap_compare()`

需要注意的是，我们的 LDAP 身份验证代码的早期和后期版本都应仅在用户输入数据（即用户名和密码输入）经过验证和测试以确保没有提供空的或无效的用户名或密码字符串后运行，并且不存在无效字符（例如空字节）。此外，理想情况下，用户凭据应通过应用程序的安全 HTTPS 请求发送，并且安全 LDAPS 协议可用于在身份验证过程中进一步保护用户凭据。我们发现直接使用 LDAPS，通过连接到服务器`ldaps://...`而不是通过连接`ldap://...`然后切换到 TLS 连接已被证明更可靠。如果您的设置有所不同，则需要相应地调整上面的代码以包含对`ldap_start_tls()`.

最后，可能值得注意的是，LDAP 协议要求根据 RFC（[RFC 4511，p16，第一段](https://www.rfc-editor.org/rfc/rfc4511)）使用 UTF-8 对密码进行编码——因此，如果在某些情况下，请求期间使用的任何系统都是从初始输入一直到身份验证，不将用户的凭据作为 UTF-8 处理，这也可能是一个值得研究的领域。

希望这个解决方案对那些用许多其他报告的解决方案努力解决这个问题，但仍然发现用户无法通过身份验证的情况的其他人有用。代码可能需要针对您自己的 LDAP 环境进行调整，尤其是其中使用的 DN，`ldap_search()`因为这将取决于您的 LDAP 目录的配置方式以及您的应用程序支持哪些用户组。很高兴，它在我们的环境中运行良好，希望该解决方案在其他地方也能发挥作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T09:27:16.090

尝试`html_entity_decode`输入密码而不是 utf8_decode；这是唯一对我有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T06:09:16.737

使用时要非常小心`ldap_compare`！它到处都是写的，不要将它用于二进制值，因为在某些环境中，例如 AD：它总是返回`true`.

[https://www.php.net/manual/en/function.ldap-compare.php](https://www.php.net/manual/en/function.ldap-compare.php)

> **警告** `ldap_compare()`不能用于比较 BINARY 值！

# ios - 是否可以在 Mobile Safari 中获取 iOS 6 广告标识符？

> ID：12858495
> 
> 赞同：10
> 
> 时间：2012-10-12T11:52:37.170
> 
> 标签：ios

[`advertisingIdentifier`](http://developer.apple.com/library/ios/#documentation/AdSupport/Reference/ASIdentifierManager_Ref/ASIdentifierManager.html)是否可以在 Mobile Safari中获取 iOS 6 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:59:48.110

目前无法做到这一点。

来自[http://oleb.net/](http://oleb.net/)：

> iOS 应用程序可以读取此首选项的状态，并且需要尊重它（见下文）。如果 Mobile Safari 也使用此设置来发送适当的 Do Not Track HTTP 标头，我会很高兴，但不幸的是（还没有？）情况并非如此。

这是链接：

[http://oleb.net/blog/2012/09/udid-apis-in-ios-6/](http://oleb.net/blog/2012/09/udid-apis-in-ios-6/)

# iphone - iPhone的远程访问

> ID：12858499
> 
> 赞同：0
> 
> 时间：2012-10-12T11:53:09.940
> 
> 标签：iphone, ios, ipad, remote-access

我是远程访问编程的新手，请不要把这个问题放在这里。经过长时间的搜索，我还没有开始。
我听说 iPhone 可以用作汽车、电子设备的遥控器，甚至可以从另一部 iPhone 访问 iPhone。我应该使用哪个库进行远程访问？有可用的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:06:19.353

看看[`External Accessory Framework`](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html)。该框架允许您与“连接的设备”（通过蓝牙或通过物理连接）进行通信。

如果您想要更复杂的东西，您可能必须将一台设备设置为服务器，另一台设置为客户端，并让两者进行通信。

另一种方法是使用 XMPP（又名 Jabber）中央服务器并将两个设备设置为客户端，它们可以相互推送消息以相互控制。

# java - 尝试和理解大型 Java Swing 代码库的最佳方式是什么。

> ID：12858500
> 
> 赞同：1
> 
> 时间：2012-10-12T11:53:12.293
> 
> 标签：java, swing, user-interface, uml

> **可能重复：**
> [在/调试我继承的一个巨大的 Java Swing 应用程序时获得线索](https://stackoverflow.com/questions/12770485/getting-a-clue-at-debug-a-huge-java-swing-app-ive-inherited)

我加入了一个新项目，必须了解该项目的产品。我更熟悉守护程序/独立类型的应用程序，但这次我必须参与使用 Swing 的 Java GUI 应用程序。

我必须熟悉相当大的代码库。在过去的 3 天里，我一直在尝试这样做，但发现我正在努力获得“大局”。事件驱动模型意味着事情可以从应用程序中的任何地方发生和触发。

目前，我仍在努力弄清楚屏幕是如何构建和组合的。我可以看到代码，但只是难以遵循，因为它不是我习惯的通常模型，您可以在其中遵循引用、调用等。

我能做些什么来简化/加速这个学习过程吗？当我以图表形式（类图、序列图等）查看事物时，我倾向于更好地理解事物。我想看看我是否可以尝试找到一个可以将代码逆向工程为 UML 的工具，以便我可以更好地理解，但由于代码库很大，将生成的 UML 图可能无法使用，因为涉及的类数。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:58:06.467

猜猜你正在处理一个遗留应用程序以及随之而来的所有包袱。

因此，即使您必须生成 UML，我也愿意打赌它不会帮助您，因为您（很可能）会发现它是一团糟。曾经类似于设计模式的东西被搞砸了，代码片段从 a 复制粘贴到 b 到 c 等等......

您最好的选择（根据我的经验）是在执行某些操作时遵循调试器中的程序逻辑。至少那是我发现面对类似情景时最有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:01:31.660

获得好的 IDE。我会推荐 itellij idea 来完成这项任务。它不是免费的，但它在任何情况下都能胜过日食

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:09:24.780

我同意 dngfng，遗留应用程序将附带它的“包袱”。只有“时间”和与现有开发人员的大量讨论才能解决这个问题。

连同这里的其他建议，我只想从用户的角度“使用”产品。执行功能中承诺的所有操作，直到您熟悉使用该软件。之后，当您查看代码库时，它可能会变得更加直观。

# c# - 是否可以等待一个事件而不是另一个异步方法？

> ID：12858501
> 
> 赞同：186
> 
> 时间：2012-10-12T11:53:15.993
> 
> 标签：c#, microsoft-metro, .net-4.5, async-await, windows-store-apps

在我的 C#/XAML Metro 应用程序中，有一个按钮可以启动一个长时间运行的进程。因此，按照建议，我使用 async/await 来确保 UI 线程不会被阻塞：

```
private async void Button_Click_1(object sender, RoutedEventArgs e) 
{
     await GetResults();
}

private async Task GetResults()
{ 
     // Do lot of complex stuff that takes a long time
     // (e.g. contact some web services)
  ...
} 
```

有时，GetResults 中发生的事情需要额外的用户输入才能继续。为简单起见，假设用户只需单击“继续”按钮。

我的问题是：**如何暂停 GetResults 的执行，以等待诸如单击另一个按钮之类的*事件？***

这是实现我正在寻找的一种丑陋的方式：“继续”按钮的事件处理程序设置了一个标志......

```
private bool _continue = false;
private void buttonContinue_Click(object sender, RoutedEventArgs e)
{
    _continue = true;
} 
```

...并且 GetResults 定期对其进行轮询：

```
 buttonContinue.Visibility = Visibility.Visible;
 while (!_continue) await Task.Delay(100);  // poll _continue every 100ms
 buttonContinue.Visibility = Visibility.Collapsed; 
```

轮询显然很糟糕（忙于等待/浪费周期），我正在寻找基于事件的东西。

有任何想法吗？

顺便说一句，在这个简化的例子中，一个解决方案当然是将 GetResults() 分成两部分，从开始按钮调用第一部分，从继续按钮调用第二部分。实际上，GetResults 中发生的事情更复杂，在执行过程中的不同点可能需要不同类型的用户输入。因此，将逻辑分解为多种方法并非易事。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-10-12T12:01:50.103

您可以使用[SemaphoreSlim 类](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)的实例作为信号：

```
private SemaphoreSlim signal = new SemaphoreSlim(0, 1);

// set signal in event
signal.Release();

// wait for signal somewhere else
await signal.WaitAsync(); 
```

* * *

或者，您可以使用[TaskCompletionSource<T> 类](http://msdn.microsoft.com/en-us/library/dd449174.aspx)的实例来创建表示按钮单击结果的[Task<T> ：](http://msdn.microsoft.com/en-us/library/dd321424.aspx)

```
private TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();

// complete task in event
tcs.SetResult(true);

// wait for task somewhere else
await tcs.Task; 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-10-12T14:59:47.707

当你有一件不寻常的事情需要做`await`时，最简单的答案通常是`TaskCompletionSource`（或一些`async`基于 的启用原语`TaskCompletionSource`）。

在这种情况下，您的需求非常简单，因此您可以直接使用`TaskCompletionSource`：

```
private TaskCompletionSource<object> continueClicked;

private async void Button_Click_1(object sender, RoutedEventArgs e) 
{
  // Note: You probably want to disable this button while "in progress" so the
  //  user can't click it twice.
  await GetResults();
  // And re-enable the button here, possibly in a finally block.
}

private async Task GetResults()
{ 
  // Do lot of complex stuff that takes a long time
  // (e.g. contact some web services)

  // Wait for the user to click Continue.
  continueClicked = new TaskCompletionSource<object>();
  buttonContinue.Visibility = Visibility.Visible;
  await continueClicked.Task;
  buttonContinue.Visibility = Visibility.Collapsed;

  // More work...
}

private void buttonContinue_Click(object sender, RoutedEventArgs e)
{
  if (continueClicked != null)
    continueClicked.TrySetResult(null);
} 
```

从逻辑上讲，`TaskCompletionSource`就像一个`async` `ManualResetEvent`，除了你只能“设置”一次事件并且事件可以有一个“结果”（在这种情况下，我们没有使用它，所以我们只是将结果设置为`null`）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-02T09:31:28.393

这是我使用的实用程序类：

```
public class AsyncEventListener
{
    private readonly Func<bool> _predicate;

    public AsyncEventListener() : this(() => true)
    {

    }

    public AsyncEventListener(Func<bool> predicate)
    {
        _predicate = predicate;
        Successfully = new Task(() => { });
    }

    public void Listen(object sender, EventArgs eventArgs)
    {
        if (!Successfully.IsCompleted && _predicate.Invoke())
        {
            Successfully.RunSynchronously();
        }
    }

    public Task Successfully { get; }
} 
```

这是我使用它的方式：

```
var itChanged = new AsyncEventListener();
someObject.PropertyChanged += itChanged.Listen;

// ... make it change ...

await itChanged.Successfully;
someObject.PropertyChanged -= itChanged.Listen; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-12T12:49:27.133

理想情况下，您*不需要*。虽然您当然可以阻止异步线程，但这是一种资源浪费，并不理想。

考虑一个典型的例子，当按钮等待被点击时用户去吃午饭。

如果您在等待用户输入时停止了异步代码，那么在该线程暂停时它只是在浪费资源。

也就是说，最好在异步操作中将需要维护的状态设置为启用按钮并“等待”单击的位置。那时，您的`GetResults`方法将**停止**。

然后，当单击按钮时*，*根据您存储的状态，您启动*另一个异步任务*以继续工作。

因为[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)将在调用的事件处理程序中捕获`GetResults`（编译器将使用`await`正在使用的关键字来执行此操作，并且[SynchronizationContext.Current](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)应该是非空的，假设您在 UI 应用程序中），您可以这样使用[`async`/`await`](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)：

```
private async void Button_Click_1(object sender, RoutedEventArgs e) 
{
     await GetResults();

     // Show dialog/UI element.  This code has been marshaled
     // back to the UI thread because the SynchronizationContext
     // was captured behind the scenes when
     // await was called on the previous line.
     ...

     // Check continue, if true, then continue with another async task.
     if (_continue) await ContinueToGetResultsAsync();
}

private bool _continue = false;
private void buttonContinue_Click(object sender, RoutedEventArgs e)
{
    _continue = true;
}

private async Task GetResults()
{ 
     // Do lot of complex stuff that takes a long time
     // (e.g. contact some web services)
  ...
} 
```

`ContinueToGetResultsAsync`是在按下按钮时继续获取结果的方法。如果您的按钮*没有*被按下，那么您的事件处理程序什么也不做。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-08T15:26:48.553

**简单的助手类：**

```
public class EventAwaiter<TEventArgs>
{
    private readonly TaskCompletionSource<TEventArgs> _eventArrived = new TaskCompletionSource<TEventArgs>();

    private readonly Action<EventHandler<TEventArgs>> _unsubscribe;

    public EventAwaiter(Action<EventHandler<TEventArgs>> subscribe, Action<EventHandler<TEventArgs>> unsubscribe)
    {
        subscribe(Subscription);
        _unsubscribe = unsubscribe;
    }

    public Task<TEventArgs> Task => _eventArrived.Task;

    private EventHandler<TEventArgs> Subscription => (s, e) =>
        {
            _eventArrived.TrySetResult(e);
            _unsubscribe(Subscription);
        };
} 
```

**用法：**

```
var valueChangedEventAwaiter = new EventAwaiter<YourEventArgs>(
                            h => example.YourEvent += h,
                            h => example.YourEvent -= h);
await valueChangedEventAwaiter.Task; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-04T21:26:25.710

Stephen Toub[在他的博客上](https://devblogs.microsoft.com/pfxteam/building-async-coordination-primitives-part-1-asyncmanualresetevent/)`AsyncManualResetEvent`发表了这门课。

```
public class AsyncManualResetEvent 
{ 
    private volatile TaskCompletionSource<bool> m_tcs = new TaskCompletionSource<bool>();

    public Task WaitAsync() { return m_tcs.Task; } 

    public void Set() 
    { 
        var tcs = m_tcs; 
        Task.Factory.StartNew(s => ((TaskCompletionSource<bool>)s).TrySetResult(true), 
            tcs, CancellationToken.None, TaskCreationOptions.PreferFairness, TaskScheduler.Default); 
        tcs.Task.Wait(); 
    }

    public void Reset() 
    { 
        while (true) 
        { 
            var tcs = m_tcs; 
            if (!tcs.Task.IsCompleted || 
                Interlocked.CompareExchange(ref m_tcs, new TaskCompletionSource<bool>(), tcs) == tcs) 
                return; 
        } 
    } 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-19T15:11:35.623

**使用[响应式扩展 (Rx.Net)](http://reactivex.io/)**

```
var eventObservable = Observable
            .FromEventPattern<EventArgs>(
                h => example.YourEvent += h,
                h => example.YourEvent -= h);

var res = await eventObservable.FirstAsync(); 
```

您可以使用 Nuget Package System.Reactive 添加 Rx

**测试样品：**

```
 private static event EventHandler<EventArgs> _testEvent;

    private static async Task Main()
    {
        var eventObservable = Observable
            .FromEventPattern<EventArgs>(
                h => _testEvent += h,
                h => _testEvent -= h);

        Task.Delay(5000).ContinueWith(_ => _testEvent?.Invoke(null, new EventArgs()));

        var res = await eventObservable.FirstAsync();

        Console.WriteLine("Event got fired");
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-26T03:49:46.667

我将自己的 AsyncEvent 类用于等待事件。

```
public delegate Task AsyncEventHandler<T>(object sender, T args) where T : EventArgs;

public class AsyncEvent : AsyncEvent<EventArgs>
{
    public AsyncEvent() : base()
    {
    }
}

public class AsyncEvent<T> where T : EventArgs
{
    private readonly HashSet<AsyncEventHandler<T>> _handlers;

    public AsyncEvent()
    {
        _handlers = new HashSet<AsyncEventHandler<T>>();
    }

    public void Add(AsyncEventHandler<T> handler)
    {
        _handlers.Add(handler);
    }

    public void Remove(AsyncEventHandler<T> handler)
    {
        _handlers.Remove(handler);
    }

    public async Task InvokeAsync(object sender, T args)
    {
        foreach (var handler in _handlers)
        {
            await handler(sender, args);
        }
    }

    public static AsyncEvent<T> operator+(AsyncEvent<T> left, AsyncEventHandler<T> right)
    {
        var result = left ?? new AsyncEvent<T>();
        result.Add(right);
        return result;
    }

    public static AsyncEvent<T> operator-(AsyncEvent<T> left, AsyncEventHandler<T> right)
    {
        left.Remove(right);
        return left;
    }
} 
```

在引发事件的类中声明事件：

```
public AsyncEvent MyNormalEvent;
public AsyncEvent<ProgressEventArgs> MyCustomEvent; 
```

要引发事件：

```
if (MyNormalEvent != null) await MyNormalEvent.InvokeAsync(this, new EventArgs());
if (MyCustomEvent != null) await MyCustomEvent.InvokeAsync(this, new ProgressEventArgs()); 
```

订阅事件：

```
MyControl.Click += async (sender, args) => {
    // await...
}

MyControl.Click += (sender, args) => {
    // synchronous code
    return Task.CompletedTask;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-16T14:18:32.147

这是一个包含六种方法的小工具箱，可用于将事件转换为任务：

```
/// <summary>Converts a .NET event, conforming to the standard .NET event pattern
/// based on <see cref="EventHandler"/>, to a Task.</summary>
public static Task EventToAsync(
    Action<EventHandler> addHandler,
    Action<EventHandler> removeHandler)
{
    var tcs = new TaskCompletionSource<object>();
    addHandler(Handler);
    return tcs.Task;

    void Handler(object sender, EventArgs e)
    {
        removeHandler(Handler);
        tcs.SetResult(null);
    }
}

/// <summary>Converts a .NET event, conforming to the standard .NET event pattern
/// based on <see cref="EventHandler{TEventArgs}"/>, to a Task.</summary>
public static Task<TEventArgs> EventToAsync<TEventArgs>(
    Action<EventHandler<TEventArgs>> addHandler,
    Action<EventHandler<TEventArgs>> removeHandler)
{
    var tcs = new TaskCompletionSource<TEventArgs>();
    addHandler(Handler);
    return tcs.Task;

    void Handler(object sender, TEventArgs e)
    {
        removeHandler(Handler);
        tcs.SetResult(e);
    }
}

/// <summary>Converts a .NET event, conforming to the standard .NET event pattern
/// based on a supplied event delegate type, to a Task.</summary>
public static Task<TEventArgs> EventToAsync<TDelegate, TEventArgs>(
    Action<TDelegate> addHandler, Action<TDelegate> removeHandler)
{
    var tcs = new TaskCompletionSource<TEventArgs>();
    TDelegate handler = default;
    Action<object, TEventArgs> genericHandler = (sender, e) =>
    {
        removeHandler(handler);
        tcs.SetResult(e);
    };
    handler = (TDelegate)(object)genericHandler.GetType().GetMethod("Invoke")
        .CreateDelegate(typeof(TDelegate), genericHandler);
    addHandler(handler);
    return tcs.Task;
}

/// <summary>Converts a named .NET event, conforming to the standard .NET event
/// pattern based on <see cref="EventHandler"/>, to a Task.</summary>
public static Task EventToAsync(object target, string eventName)
{
    var type = target.GetType();
    var eventInfo = type.GetEvent(eventName);
    if (eventInfo == null) throw new InvalidOperationException("Event not found.");
    var tcs = new TaskCompletionSource<object>();
    EventHandler handler = default;
    handler = new EventHandler((sender, e) =>
    {
        eventInfo.RemoveEventHandler(target, handler);
        tcs.SetResult(null);
    });
    eventInfo.AddEventHandler(target, handler);
    return tcs.Task;
}

/// <summary>Converts a named .NET event, conforming to the standard .NET event
/// pattern based on <see cref="EventHandler{TEventArgs}"/>, to a Task.</summary>
public static Task<TEventArgs> EventToAsync<TEventArgs>(
    object target, string eventName)
{
    var type = target.GetType();
    var eventInfo = type.GetEvent(eventName);
    if (eventInfo == null) throw new InvalidOperationException("Event not found.");
    var tcs = new TaskCompletionSource<TEventArgs>();
    EventHandler<TEventArgs> handler = default;
    handler = new EventHandler<TEventArgs>((sender, e) =>
    {
        eventInfo.RemoveEventHandler(target, handler);
        tcs.SetResult(e);
    });
    eventInfo.AddEventHandler(target, handler);
    return tcs.Task;
}

/// <summary>Converts a generic Action-based .NET event to a Task.</summary>
public static Task<TArgument> EventActionToAsync<TArgument>(
    Action<Action<TArgument>> addHandler,
    Action<Action<TArgument>> removeHandler)
{
    var tcs = new TaskCompletionSource<TArgument>();
    addHandler(Handler);
    return tcs.Task;

    void Handler(TArgument arg)
    {
        removeHandler(Handler);
        tcs.SetResult(arg);
    }
} 
```

所有这些方法都在创建一个`Task`将在下一次调用相关事件时完成。此任务永远不会出错或取消，它只能成功完成。

标准事件 ( ) 的使用示例[`Progress<T>.ProgressChanged`](https://docs.microsoft.com/en-us/dotnet/api/system.progress-1.progresschanged)：

```
var p = new Progress<int>();

//...

int result = await EventToAsync<int>(
    h => p.ProgressChanged += h, h => p.ProgressChanged -= h);

// ...or...

int result = await EventToAsync<EventHandler<int>, int>(
    h => p.ProgressChanged += h, h => p.ProgressChanged -= h);

// ...or...

int result = await EventToAsync<int>(p, "ProgressChanged"); 
```

非标准事件的使用示例：

```
public static event Action<int> MyEvent;

//...

int result = await EventActionToAsync<int>(h => MyEvent += h, h => MyEvent -= h); 
```

任务完成后取消订阅该事件。在此之前没有提供退订机制。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-04T22:34:19.123

这是我用来测试的一个类，它支持 CancellationToken。

此 Test 方法向我们展示了等待引发**ClassWithEvent**的**MyEvent**的实例。：

```
 public async Task TestEventAwaiter()
    {
        var cls = new ClassWithEvent();

        Task<bool> isRaisedTask = EventAwaiter<ClassWithEvent>.RunAsync(
            cls, 
            nameof(ClassWithEvent.MyMethodEvent), 
            TimeSpan.FromSeconds(3));

        cls.Raise();
        Assert.IsTrue(await isRaisedTask);
        isRaisedTask = EventAwaiter<ClassWithEvent>.RunAsync(
            cls, 
            nameof(ClassWithEvent.MyMethodEvent), 
            TimeSpan.FromSeconds(1));

        System.Threading.Thread.Sleep(2000);

        Assert.IsFalse(await isRaisedTask);
    } 
```

这是事件等待者类。

```
public class EventAwaiter<TOwner>
{
    private readonly TOwner_owner;
    private readonly string _eventName;
    private readonly TaskCompletionSource<bool> _taskCompletionSource;
    private readonly CancellationTokenSource _elapsedCancellationTokenSource;
    private readonly CancellationTokenSource _linkedCancellationTokenSource;
    private readonly CancellationToken _activeCancellationToken;
    private Delegate _localHookDelegate;
    private EventInfo _eventInfo;

    public static Task<bool> RunAsync(
        TOwner owner,
        string eventName,
        TimeSpan timeout,
        CancellationToken? cancellationToken = null)
    {
        return (new EventAwaiter<TOwner>(owner, eventName, timeout, cancellationToken)).RunAsync(timeout);
    }
    private EventAwaiter(
        TOwner owner,
        string eventName,
        TimeSpan timeout,
        CancellationToken? cancellationToken = null)
    {
        if (owner == null) throw new TypeInitializationException(this.GetType().FullName, new ArgumentNullException(nameof(owner)));
        if (eventName == null) throw new TypeInitializationException(this.GetType().FullName, new ArgumentNullException(nameof(eventName)));

        _owner = owner;
        _eventName = eventName;
        _taskCompletionSource = new TaskCompletionSource<bool>();
        _elapsedCancellationTokenSource = new CancellationTokenSource();
        _linkedCancellationTokenSource =
            cancellationToken == null
                ? null
                : CancellationTokenSource.CreateLinkedTokenSource(_elapsedCancellationTokenSource.Token, cancellationToken.Value);
        _activeCancellationToken = (_linkedCancellationTokenSource ?? _elapsedCancellationTokenSource).Token;

        _eventInfo = typeof(TOwner).GetEvent(_eventName);
        Type eventHandlerType = _eventInfo.EventHandlerType;
        MethodInfo invokeMethodInfo = eventHandlerType.GetMethod("Invoke");
        var parameterTypes = Enumerable.Repeat(this.GetType(),1).Concat(invokeMethodInfo.GetParameters().Select(p => p.ParameterType)).ToArray();
        DynamicMethod eventRedirectorMethod = new DynamicMethod("EventRedirect", typeof(void), parameterTypes);
        ILGenerator generator = eventRedirectorMethod.GetILGenerator();
        generator.Emit(OpCodes.Nop);
        generator.Emit(OpCodes.Ldarg_0);
        generator.EmitCall(OpCodes.Call, this.GetType().GetMethod(nameof(OnEventRaised),BindingFlags.Public | BindingFlags.Instance), null);
        generator.Emit(OpCodes.Ret);
        _localHookDelegate = eventRedirectorMethod.CreateDelegate(eventHandlerType,this);
    }
    private void AddHandler()
    {
        _eventInfo.AddEventHandler(_owner, _localHookDelegate);
    }
    private void RemoveHandler()
    {
        _eventInfo.RemoveEventHandler(_owner, _localHookDelegate);
    }
    private Task<bool> RunAsync(TimeSpan timeout)
    {
        AddHandler();
        Task.Delay(timeout, _activeCancellationToken).
            ContinueWith(TimeOutTaskCompleted);

        return _taskCompletionSource.Task;
    }

    private void TimeOutTaskCompleted(Task tsk)
    {
        RemoveHandler();
        if (_elapsedCancellationTokenSource.IsCancellationRequested) return;

        if (_linkedCancellationTokenSource?.IsCancellationRequested == true)
            SetResult(TaskResult.Cancelled);
        else if (!_taskCompletionSource.Task.IsCompleted)
            SetResult(TaskResult.Failed);

    }

    public void OnEventRaised()
    {
        RemoveHandler();
        if (_taskCompletionSource.Task.IsCompleted)
        {
            if (!_elapsedCancellationTokenSource.IsCancellationRequested)
                _elapsedCancellationTokenSource?.Cancel(false);
        }
        else
        {
            if (!_elapsedCancellationTokenSource.IsCancellationRequested)
                _elapsedCancellationTokenSource?.Cancel(false);
            SetResult(TaskResult.Success);
        }
    }
    enum TaskResult { Failed, Success, Cancelled }
    private void SetResult(TaskResult result)
    {
        if (result == TaskResult.Success)
            _taskCompletionSource.SetResult(true);
        else if (result == TaskResult.Failed)
            _taskCompletionSource.SetResult(false);
        else if (result == TaskResult.Cancelled)
            _taskCompletionSource.SetCanceled();
        Dispose();

    }
    public void Dispose()
    {
        RemoveHandler();
        _elapsedCancellationTokenSource?.Dispose();
        _linkedCancellationTokenSource?.Dispose();
    }
} 
```

它基本上依靠**CancellationTokenSource**来报告结果。它使用一些 IL 注入来创建一个委托来匹配事件的签名。然后使用一些反射将该委托添加为该事件的处理程序。generate 方法的主体只是调用 EventAwaiter 类的另一个函数，然后使用**CancellationTokenSource**报告成功。

**注意**，不要在产品中使用它。这是一个工作示例。

例如，IL 生成是一个昂贵的过程。您应该避免一遍又一遍地重新生成相同的方法，而是缓存它们。

# algorithm - 这个合并和填充操作的函数/算法是什么？

> ID：12858503
> 
> 赞同：0
> 
> 时间：2012-10-12T11:53:26.353
> 
> 标签：algorithm, r

我编写了 R 代码，它根据第一列合并两个数据帧，对于缺失的数据，添加上面的值。这是做什么：

两个输入数据帧：

```
1 a
2 b
3 c
5 d 
```

和

```
1 e
4 f
6 g 
```

我的代码给出了这个输出：

```
 1 a e
   2 b e
   3 c e
   4 c f
   5 d f
   6 d g 
```

然而，我的代码效率低下，因为它没有正确矢量化。有一些我可以使用的 R 函数吗？基本上我正在寻找的一个函数是填充缺失值/NA值并从前一个元素中获取值并将其代替NA。

我翻阅了R的参考书，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:45:37.080

这是一个利用`zoo::na.locf`

```
library(zoo)

a <- data.frame(id=c(1,2,3,5), v=c("a","b","c", "d"))
b <- data.frame(id=c(1,4,6), v=c("e", "f", "g"))

n <- max(c(a$id, b$id))

an <- merge(data.frame(id=1:n), a, all.x=T)
bn <- merge(data.frame(id=1:n), b, all.x=T)

an$v <- na.locf(an$v)
bn$v <- na.locf(bn$v)

data.frame(an$id, an$v, bn$v)
      an.id an.v bn.v
1     1    a    e
2     2    b    e
3     3    c    e
4     4    c    f
5     5    d    f
6     6    d    g 
```

# java - GWT 是否与 app-engine 的多租户支持兼容

> ID：12858506
> 
> 赞同：1
> 
> 时间：2012-10-12T11:53:35.313
> 
> 标签：java, google-app-engine, gwt

只是想确认 GWT RPC 与 app-engine 的基于名称空间的新多租户支持配合得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:59:40.970

这两种技术非常兼容。我已经将它们一起使用了很长时间。事实上，有一些语法糖使它们易于一起使用，例如 RPC 调用。另外，现在您的服务器和客户端代码使用相同的语言。使用 eclipse 和谷歌为 eclipse 和 GWT/AppEngine 开发的设置，我在一个项目中拥有所有代码，包括客户端、服务器和共享代码。客户端和共享代码使用 GWT 编译，服务器和共享代码使用 AppEngine 编译。

我希望这有帮助。 [https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine](https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine)

迈克尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:19:30.513

您可以尝试在 GWT-RPC 中使用多租户，但这不仅仅是配置。您可以使用过滤器使用每用户多租户设置 NameSpace，但不要忘记，如果您从 gwt-rpc 调用启动 AsyncTasks，您将在任务请求中没有有效用户，因此您需要弄清楚如何在任务中选择命名空间.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T20:26:58.783

只要您的服务器端实现正确处理多租户，就可以了。

将多租户与 GWT-RPC 一起使用没有额外的负载，但使用多租户会带来额外的负载，而使用 GWT-RPC 将无法*避免*这种情况。

# jquery - 如何使用 Jquery 限制未来日期

> ID：12858510
> 
> 赞同：1
> 
> 时间：2012-10-12T11:53:37.603
> 
> 标签：jquery

我在我的应用程序中使用日期选择器，它不允许用户选择未来的日期。

我在 jquery 中找不到任何函数。请给一些建议。

我正在使用 html 5 日期输入类型。

```
<input type="date" name="bday"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:12:14.133

尝试这样的事情：

```
<input id="yourOwnId" type="date" name="bday"> 
```

然后使用 jquery 和 UI datepicker 插件，例如，如果您的未来日期是今天：

```
$("#yourOwnId").datepicker({
       dateFormat : 'dd/mm/yy',
       maxDate : '12/10/2012
}); 
```

或者简单地根据[ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)：

```
maxDate: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:56:42.960

假设您使用的是 jQuery UI Datepicker，您正在寻找的是[`maxDate`选项](http://api.jqueryui.com/datepicker/#option-maxDate)。通过将其设置为，`0`您可以禁止未来的任何日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:56:47.500

即使问题非常模糊，请查看[http://api.jqueryui.com/datepicker/#option-maxDate](http://api.jqueryui.com/datepicker/#option-maxDate)。

# c# - 通过 WinForm 或 WCF 调用 WCF 服务器端方法的不同行为

> ID：12858511
> 
> 赞同：0
> 
> 时间：2012-10-12T11:53:40.383
> 
> 标签：c#, wcf, asynchronous, methods, call

我正在编写一个需要“双重”用户界面的程序：第一个是经典的 windows 窗体，第二个是通过 windows phone 设备。我正在使用 WCF（异步，此设备的唯一可能性），但我的行为对我来说似乎很奇怪。好吧，我对 WCF 非常了解，所以也许我做错了什么。我写了一个更简单的 WCF 服务器代码版本，所以这里的问题更清楚：

```
[ServiceContract]
public partial class Form2 : Form
{
    int x = 0;

    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        prova1();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        x++;
    }

    [OperationContract]
    void prova1()
    {
        MessageBox.Show("x = " + x.ToString());
    } 
```

如果我单击按钮 2，然后单击按钮 1，我显然会得到一个带有“x = 1”的弹出框。但是，如果我通过 Windows Phone 应用程序调用 prova1()，我总是会得到“x = 0”。这是一个非常普遍的行为：如果我在 WCF 服务器的代码中实例化一个对象并尝试在 WCF 服务器的通过外部设备调用的方法中使用它，我会得到一个空引用异常。似乎我在 WCF 服务器代码中所做的一切在称为槽 WCF 的方法中是完全不可见的。有办法避免这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:00:12.800

当您`prova1`从类本身调用时，您正在 Windows 窗体中的程序上下文中工作。这将使您可以使用`MessageBox`静态方法，并且您可以获得`Show`显示弹出窗口的方法。

但是，当您从 WP7 进行服务器调用时，您正在从完全其他的应用程序上下文中访问该类，因此即使`MethodBox.Show`它工作了，它也会在服务器上显示消息框，而不是在电话上。但是 WCF 不准备类以在应用程序上下文中运行，并且整个`Show`方法都失败了。

因此，您将涉及 WP7 和托管 WCF 服务的服务器/客户端方案与 Windows 窗体应用程序的单一程序上下文混淆了。

# ios - 任何适用于 iPhone 的 SIP 框架？

> ID：12858522
> 
> 赞同：1
> 
> 时间：2012-10-12T11:54:39.920
> 
> 标签：ios, implementation, sip

我应该为我的应用程序使用 SIP。我浏览了一些有关 SIP 的文档，例如 ietf-sip-documentation 、 siphon 、 linphone for iphone 和 ipod。但是他们在任何地方都没有提到任何可用的框架或任何这样的实现部分。关于 SIP，有很多事情让我感到不安。我很想对此有更清楚的了解。任何帮助，将不胜感激。

**编辑：**我想知道是否有任何适用于 ios 的框架，或者我们是否应该为接口创建自己的类？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:01:20.813

[resiprocate](http://www.resiprocate.org/Main_Page)或[PJSIP](http://www.pjsip.org)怎么样？两者都可以为 iOS 编译。您还需要 RTP 和媒体处理吗？如果是这样，PJSIP 也有内置的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:12:35.793

Doubango 框架[http://doubango.org/](http://doubango.org/) / [https://code.google.com/p/doubango/](https://code.google.com/p/doubango/)在这里也做得很好。基于 C，因此您可能希望自己制作 Objective-C 包装器。

# asp.net-mvc-3 - 当旧系统到位并返回字符串时如何实现 MVC 授权

> ID：12858523
> 
> 赞同：0
> 
> 时间：2012-10-12T11:54:41.220
> 
> 标签：asp.net-mvc-3, authorization

我没有在我的代码中使用任何**asp.net身份验证。**它由外部图书馆处理。我从函数中得到成功或失败。所以所有的工作都为我完成了。s我能得到一些例子来说明我将如何在 MVC3 中实现它。我知道一点，我有2周的经验。

谢谢。

```
 AuthFunction("UserName", "password"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:21:09.587

您需要实现自己的[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)。[ValidateUser](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.validateuser%28v=vs.100%29.aspx)方法将使用`AuthFunction`您库中的方法。

[这个](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)教程应该不错。只需跳过存储库的内容，因为您的库已经实现了这些内容。仔细检查教程底部的配置部分。

# ruby - Ruby：如何做子程序？

> ID：12858527
> 
> 赞同：3
> 
> 时间：2012-10-12T11:55:22.027
> 
> 标签：ruby

我不确定 subroutine 是否是正确的词。但是我想知道您是否可以编写可以来回跳转的代码块？

例如，如果我想要一个包含 3 块代码的程序

```
Block1
Block2
Block3 
```

在 Block1 内它说

```
if something == 1
 go to Block2
end 
```

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:09:02.220

Ruby 没有“goto”。通常的做法是使用方法（子程序）：

```
def block1
  puts "foo"
end

def block2
  puts "bar"
end

if something == 1
  block1
  block2
end

# => foo
# => bar 
```

想要“goto”的一个常见原因是实现状态引擎。在 Ruby 中，使用简单的 case 语句可以轻松创建小型状态引擎：

```
state = :init
loop do
  case state
  when :init
    puts "init"
    state = :working
  when :working
    puts "working"
    state = :done
  when :done
    puts "done"
    break
  end
end

# => init
# => working
# => done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:52:07.757

您*可以*`-DSUPPORT_JOKE`使用（参见[这篇文章](http://patshaughnessy.net/2012/2/29/the-joke-is-on-us-how-ruby-1-9-supports-the-goto-statement)）重新编译 Ruby ，但我不推荐它；-)

另请参阅此问题：[Ruby 中的 goto 命令？](https://stackoverflow.com/questions/1634913/goto-command-in-ruby)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:01:25.043

好吧，在 Ruby 中，子例程只是作为块或方法实现的，它们接近于绑定到对象的块。但是，跳来跳去你说，你可能不是在谈论子例程，而是在谈论协程。这些在 Ruby 中[由 Fibers 表示](http://www.ruby-doc.org/core-1.9.3/Fiber.html)。

# ruby-on-rails-3 - Rails - 通过回形针在嵌套字段上附加图像会导致不需要/不可避免的重定向

> ID：12858528
> 
> 赞同：0
> 
> 时间：2012-10-12T11:55:30.460
> 
> 标签：ruby-on-rails-3, paperclip, fields-for

我的项目中有一个表格，用于一个模型`Artworks`，我将其用于Artworks`fields_for`的资源。`Photo``has_many :photos`

该`Photo`模型使用回形针附加图像。

我所有的表单都是基于 AJAX 的，这意味着永远不应该重新加载页面，并且我不应该`redirect_to`在我的控制器中的任何地方使用（我不是）。

当我`fields_for`在我的表单中包含回形针 file_field 时，如果我在提交表单时创建或更新照片，我会收到以下错误：

```
Template is missing

Missing template artworks/show, application/show with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/david/rails/piml_artwork/app/views" * "/home/david/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views" 
```

销毁图像复选框按预期工作。更新表单上的其余详细信息并按预期提交它，只需返回 AJAX 响应并填写页面。

我的艺术品控制器如下：

```
 class ArtworksController < ApplicationController
    before_filter :load

    authorize_resource

    respond_to :html, :json, :js

    def load
    end

    def show
      @artwork = Artwork.find(params[:id])
    end

    def index
      @artworks = Artwork.all
    end

    def new
      @artwork = Artwork.new
      @artwork.photos.build unless @artwork.photos.count > 0
    end

    def create
      @artwork = Artwork.new(params[:artwork])
      if @artwork.save
        flash[:notice] = "Artwork saved"
        @artworks = Artwork.all
        respond_with @artwork
      end
    end

    def edit
      @artwork = Artwork.find(params[:id])
      @artwork.photos.build unless @artwork.photos.count > 0
    end

    def update
      @artwork = Artwork.find(params[:id])
      if @artwork.update_attributes(params[:artwork])
        flash[:notice] = "Artwork updated"
        @artworks = Artwork.all
        respond_with @artwork
      end
    end

    def destroy
      @artwork = Artwork.find(params[:id])
      @artwork.destroy
      flash[:notice] = "Artwork destroyed"
      @artworks = Artwork.all
    end
  end 
```

引起冲突的形式是这样的：

```
<%= form_for( @artwork, remote: true, mutlipart: true ) do |f| %>
    <%= render 'layouts/error_messages', object: f.object %>
    <div id="artwork-title">TITLE: <%= f.text_field :title %></div>
    <div id="artwork-title-underline"></div>
    <div id="artwork-show-picture"><%= image_tag @artwork.photos.first.photo.url(:medium) unless @artwork.photos.first.new_record? %>
        <div id="artwork-picture-upload">
            <%= f.fields_for :photos, remote: true, multipart: true do |p| %>
                <% if p.object.new_record? %>
                    UPLOAD PHOTO
                    <%= p.file_field :photo, value: 'Upload Image' %>
                <% else %>
                    REPLACE PHOTO
                    <%= p.file_field :photo, value: 'Replace Image' %>
                    <br />
                    <br />
                    <%= p.check_box :_destroy %>
                    <%= p.label :_destroy, 'Delete Image' %>
                <% end %>
            <% end %> 
        </div>
    </div>
    <div id="artwork-public">
        ARTIST<br />
        <%= f.select :artist_id, Artist.select_list, include_blank: "SELECT ARTIST" %><br />
        <br />
        DATE OF WORK <br />
        <%= f.text_field :date_of_work %><br />
        <br />
    <div id="artwork-modify-buttons">
        <%= f.submit %>
    </div>
<% end %> 
```

我要更新的 JS 文件是：

```
 <% if !@artwork.errors.any? %>
      $("#facebox .content").html("<%= escape_javascript(render(partial: "/artworks/show")) %>");
      $("#artworks-col").html(" <%= escape_javascript(render(partial: "/admin/artworks_list" )) %>")
    <% else %>
      $("#facebox .content").html("<%= escape_javascript(render(partial: "/artworks/form")) %>");
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:21:54.153

事实证明，我遇到的问题是，您无法通过 AJAX 上传文件。

经过几天的努力，我发现了一个可以非常容易地修复它的宝石；[遥控器](http://os.alfajango.com/remotipart/)

我必须做的全部是修复它：

*   将 remotipart 添加到我的 gem 文件中`gem 'remotipart'`
*   添加`//= require jquery.remotipart`到我的 app/assets/javascripts/application.js 文件
*   `bundle install`

那解决了它。图像现在使用“看起来像”AJAX 上传，但实际上是使用 iframe 来完成这项工作。

# c++ - 将系统符号传递给 char*

> ID：12858529
> 
> 赞同：1
> 
> 时间：2012-10-12T11:55:32.247
> 
> 标签：c++

根据我对上一个问题的建议，我已经更改了我的代码。现在，我有以下代码：

```
char* id = someFunction();      
if (strcmp(id,"0x01") == 0) {
    unsigned char cbuffer[]={0x01, 0x00};
    id=reinterpret_cast<char*>(cbuffer);
} 
```

`{0x01, 0x00}`我的问题 - 将 id 传递给 char* 类型的 id 是正确的方法吗？第二个问题是 - 之后如何释放 id 指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:39:05.173

您是在尝试将 id 与字符串值“0x01”进行比较，还是在尝试比较 id 值（如果它是 char ASCII 0x01）？

另外，你如何释放它取决于你如何分配`char*`返回的`someFunction()`？这段代码是纯 C 还是 C++？如果`someFunction()`分配 using `new char[2]`，那么您必须使用`delete[]`. 如果你使用 C 风格分配`malloc(sizeof(char)*2)`，那么你必须做一个`free(id)`.

还请考虑，在您这样做之前`strdup`，如上一篇文章中所建议的，您必须释放原始 ID。这当然是假设，如果按照设计，返回的指针`someFunction()`不指向某个不应该被释放的全局常量。

```
char* id = someFunction();      
if (strcmp(id,"0x01") == 0) { // no idea if this line make sense at all. 
    free(id); // or delete[] id; if id is allocated using new char[];
    static char[] cbuffer = {0x01, 0x00};
    id = (char*) malloc(sizeof(char)*2);
    strcpy(id, cbuffer);  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:07:46.070

我怀疑人们是否真的在这里建议过这样的代码。如果他们这样做了，他们就是鲁莽的。**这是糟糕的代码**。

有机会使用`char*`to`std::string`并相应地更改其实现`someFunction`。但是，这仅在一定程度上有所帮助，因为尚不清楚您在这里实际想要做什么：

> 将 {0x01, 0x00} 传递给 char* 类型的 id 是正确的方法吗？

这是没有意义的。你想达到什么目标？这些值表示什么，为什么要将它们重新解释为字符串？如果您只想获取由 char 值 0x01 组成的字符串，则可以使用以下方法：

```
std::string result = "\x01"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:04:52.700

您发布的代码很危险，因为您正在传递一个指向自动范围内的存储的指针。缓冲区在离开作用域（本例中为 if 作用域）时将被丢弃。

而是尝试这样的事情：

```
id = strdup((char*)cbuffer); 
```

甚至更好的是，您可以使用转义序列并避免自己指定 char 值：

```
id = strdup("\x01"); 
```

然后，您可以使用 释放此字符串使用的内存`free`。

# sql - 查找没有附加特定值的记录

> ID：12858532
> 
> 赞同：0
> 
> 时间：2012-10-12T11:55:43.970
> 
> 标签：sql

我对 SQL 相当陌生，我完全陷入了这个查询中。

我已经为一个卫生组织编写了一个查询，该组织获取患者信息、他们的预约/哪个提供者看到了患者、他们在什么位置被看到以及在那次访问期间创建了哪些文件以及签核状态。

当结果返回时，查询的那部分是准确的。（由于在一次约会中生成了许多不同类型的文档，因此 1 位患者有很多行）

然而，我正在寻找的是一份已预约但未创建“X”文件的患者名单。我不想看到创建的其他文档列表；特别是未创建“X”的约会。请帮忙！

这是我首先解释的查询，显示患者/预约信息以及已生成的特定文档。

```
SELECT prs.person_nbr, prs.last_name + ', '+ prs.first_name as Patient, prs.date_of_birth
  , pm.description AS Provider
  , lm.site_id
  , appts.appt_type, appts.appt_date
  , pd.document_desc, pd.signoff_status

FROM person prs 
  , patient_documents pd
  , location_mstr lm
  , provider_mstr pm
  , appointments appts

WHERE prs.person_id = appts.person_id
  and appts.enc_id = pd.enc_id
  and appts.location_id = lm.location_id
  and lm.site_id is not null
  and appts.rendering_provider_id = pm.provider_id
  and ((pd.document_desc IN ('bms_master_im', 'Master_Im', 'BMS_ob_master','BMS_GYN_master', 'BMS_bh_master')
    and pd.signoff_status = 'P') 
    OR (pd.document_desc IN ('bms_master_im', 'Master_Im', 'BMS_ob_master',        'BMS_GYN_master', 'BMS_bh_master')
    AND pd.signoff_status IS NULL ))

ORDER BY lm.site_id, Provider 
```

* * *

附加信息：尝试了所有建议。为了详细说明，这里有一个例子。

患者：JOHN SMITH 预约：20111201 创建的文档：work_letter、lab_req、master_im（master_im 是 IN 子句中列出的结果之一）

患者：JANE WILCOX 预约：20120704 创建的文件：lab_results、test_action、immunization_record。

对于 JOHN SMITH，结果将显示他有一个 master_im。基于已经编写的查询。

对于 JANE WILCOX，结果将排除她，因为她的文件未列在 IN 子句中。但是，我想在结果中看到她，以便我看到她没有创建 master_im 或 IN 子句中列出的任何其他文档。

我最终要寻找的是排除 JOHN SMITH，因为他的任命确实创建了 master_im 文档；并包括 JANE WILCOX，因为她有一个没有 master_im 的约会。（master_im 可以被我的查询的 IN 子句中的任何文档值替换）

***所有预约的患者 a) 没有创建“x”文档，或 b) 确实创建了“x”文档但签核状态 = P 或 NULL。（B很容易弄清楚，只需要a部分的帮助）。我们想忽略所有其他不包含在 x 中的文档。

x='bms_master_im'、'master_im'、'bms_ob_master'、'bms_gyn_master'、'bms_bh_master'、'ob_master'、'gyn_master'、'bh_master'）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:13:47.903

编辑：

您需要在表上使用 JOIN 子句，并在文档表上使用左连接。

例如：

```
FROM person prs,
JOIN appointments appts ON prs.person_id = appts.person_id
JOIN location_mstr lm ON appts.location_id = lm.location_id   
JOIN provider_mstr pm ON ... 
```

然后

```
LEFT JOIN patient_documents pd ON ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:05:38.527

您需要`WHERE`通过在包含您所说的“X”值的字段上添加条件来扩展您的子句。假设此字段位于 中`patient_documents.code`，您的 WHERE 子句变为：

```
WHERE prs.person_id = appts.person_id
and appts.enc_id = pd.enc_id
and appts.location_id = lm.location_id
and lm.site_id is not null
and appts.rendering_provider_id = pm.provider_id

and pd.code not in ('X', '...')

and ((pd.document_desc IN ('bms_master_im', 'Master_Im', 'BMS_ob_master','BMS_GYN_master',  'BMS_bh_master')
and pd.signoff_status = 'P') 
OR (pd.document_desc IN ('bms_master_im', 'Master_Im', 'BMS_ob_master',        'BMS_GYN_master', 'BMS_bh_master')
AND pd.signoff_status IS NULL )) 
```

请注意，我在顶部和底部添加了带有空格的行。当然，如果包含代码的字段名称不同，则应修改字段引用。

# r - 刚刚给定美国邮政编码，我如何在 R 中映射（在地理地图上）数据

> ID：12858533
> 
> 赞同：1
> 
> 时间：2012-10-12T11:55:50.953
> 
> 标签：r, maps, geocoding, zipcode

对于一个学校项目，我必须在 R 中的地理地图上映射一些数据。因此，我有一些包含邮政编码和许多其他信息的数据（只是没有更多关于州、县或其他信息的信息）。我一直试图首先在美国地图上指出我拥有的所有拉链。只是点。之后我想混合和匹配标准，比如我在数据中的拉链数量（例如，经常出现的拉链我想把颜色涂成深色，而不太常见的拉链用浅色，后来我想指出，例如一个州的流失数）。有人可以帮我解决这个问题吗？

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:59:58.467

看一下[R zipcode](http://www.r-bloggers.com/my-first-r-package-zipcode/)包；该网站包含一些示例。该软件包具有所有邮政编码的地理坐标，因此在地图上显示它们将是微不足道的。

这是指向正确方向的另一个指针：安装包“maps”和“zipcode”。将它们都加载到您的环境中：

```
library( zipcode ) ; library( maps ) 
```

现在绘制美国地图：

```
map( "usa" ) 
```

加载邮政编码数据

```
data( "zipcode" ) 
```

假设您有一些邮政编码，例如 90001、46243、32920，并且您想在地图上显示它们。

```
selected <- zipcode[ zipcode$zip %in% c( "90001", "46243", "32920" ), ] 
```

选定的数据框包含有关邮政编码的信息。绘制它们。

```
points( selected$longitude, selected$latitude, pch= 19, cex= 2 )
text( selected$longitude, selected$latitude, selected$zip, pos=3, cex= 2 ) 
```

结果如下：

![在此处输入图像描述](../Images/418ca1ddb730ba6e27ad4f055ddeb294.png)

# php - Yii：用model()->with()动态改变模型关系类型

> ID：12858534
> 
> 赞同：0
> 
> 时间：2012-10-12T11:55:51.890
> 
> 标签：php, model, yii, relationship

我有`GoodsCats`下一个关系的模型：

```
public function relations(){
  return array(
    'GoodsCatsContent' => array(self::HAS_MANY, 'GoodsCatsContent', 'parent_id'),
  );
} 
```

现在我想找到所有`GoodsCats`元素，但只有一个子元素（带有特定的`language_id`）：

```
$cats = GoodsCats::model()->with(
  array(
    'GoodsCatsContent'=>array(
      'on'=>'languages_id = 1'
    )
  )
)->findAll(); 
```

并接收一个数组，其中每个元素就像`GoodsCats.id=>GoodsCatsContent.name`：

```
CHtml::listData(cats, 'id', 'name') 
```

但是现在我遇到了一个错误`GoodsCats.name not defined`。当我将`GoodsCats`关系设置为[self::HAS_ONE 时](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail)一切正常，但我无法为整个项目更改它。是否有可能以某种方式将[model()->with()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#with-detail)设置为使用未定义的关系类型，而是使用特定的关系类型？

**更新**我的模型规则：

`GoodsCatsContent`：

```
public function rules()
{
    return array(
        array('parent_id', 'required'),
        array('active', 'numerical', 'integerOnly'=>true),
        array('parent_id', 'length', 'max'=>10),
        array('name, seo_title, seo_keywords, seo_description', 'length', 'max'=>255),
        array('short_content, content', 'safe'),
        array('id, parent_id, active, name, short_content, content, seo_title, seo_keywords, seo_description', 'safe', 'on'=>'search'),
    );
} 
```

`GoodsCats`：

```
public function rules()
{
    return array(
        array('active, prior', 'numerical', 'integerOnly'=>true),
        array('photo', 'length', 'max'=>255),
        array('id, photo, active, prior', 'safe', 'on'=>'search'),
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:01:45.643

尝试

```
$cats = GoodsCats::model()->with(
  array(
    'GoodsCatsContent'=>array(
      'condition'=>'languages_id = 1'
    )
  )
)->findAll(); 
```

或者

```
$cats = GoodsCats::model()->with('GoodsCatsContent')->findAll('languages_id = 1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:21:47.190

您不能动态更改关系类型。

但是，由于您确定 using`language_id = 1`只为您提供一条相关`GoodsCatsContent`记录，因此您可以这样做而不是 using `listData()`：

```
$myList=array();
foreach ($cats as $acat){
    $myList[$acat->id]=isset($acat->GoodsCatsContent[0]->name)? $acat->GoodsCatsContent[0]->name :''; 
    // you need isset incase some of the GoodsCats don't have a related GoodsCatsContent
}
// you can now use $myList as you would have used the array returned by listData() 
```

因为这是一个 HAS_MANY 关系，每个关系`GoodsCats`都会有 x 条相关的 GoodsCatsContent 记录，因此该关系将返回一个`array`always，即使只有 1 条相关记录，如果没有相关记录，则返回一个空数组。因此，当有 1 条相关记录时，`relationName[0]`将返回该记录。

# android - 在自定义视图中捕获 BackButton

> ID：12858539
> 
> 赞同：0
> 
> 时间：2012-10-12T11:56:16.730
> 
> 标签：android, view, back-button, custom-view

我想在用户按下后退按钮时报告视频位置。视频在作为 SDK 一部分的自定义视图实现中播放。所以我无权访问 Activity 的 backButtonPressed 方法。

我尝试了 dispatchKeyEvent 但它需要关注焦点。这不应该是必要的。

自定义 View 实现 FrameLayout 并添加一个 VideoView 的实例，如果它需要播放视频。

有没有办法在这样的自定义视图中捕捉后退按钮按下？

谢谢大家，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:06:18.667

[`onWindowVisibilityChanged`](http://developer.android.com/reference/android/view/View.html#onWindowVisibilityChanged%28int%29)您可以使用诸如、等窗口事件[`onDetachedFromWindow`](http://developer.android.com/reference/android/view/View.html#onDetachedFromWindow%28%29)来处理暂停和报告视频位置。查看[`setSystemUiVisibility`](http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility%28int%29)文档中的第二个示例。

# java - CXF 忽略 sourceRoot 配置参数

> ID：12858541
> 
> 赞同：4
> 
> 时间：2012-10-12T11:56:24.327
> 
> 标签：java, wsdl, cxf, maven-plugin

我正在使用 CXF maven 插件从 wsdl 生成 Java 类

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${cxf-codegen-plugin.version}</version>
    <executions>
        <execution>
            <id>wsdl2java</id>
            <configuration>
                <sourceRoot>src/main/generated</sourceRoot>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>src/main/resources/wsdl/contentprovidercallback.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-verbose</extraarg>
                            <extraarg>-frontend</extraarg>
                            <extraarg>jaxws21</extraarg>
                            <extraarg>-b</extraarg>
                            <extraarg>src/main/resources/wsdl/jaxws-contentprovidercallback.xml</extraarg>
                            <extraarg>-d</extraarg>
                            <extraarg>src/main/generated</extraarg>
                            <extraarg>-faultSerialVersionUID</extraarg>
                            <extraarg>FQCN</extraarg>
                            <extraarg>-xjc-Xts</extraarg>
                            <extraarg>-xjc-XhashCode</extraarg>
                            <extraarg>-xjc-Xequals</extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.codehaus.woodstox</groupId>
            <artifactId>stax2-api</artifactId>
            <version>${stax2.api.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf.xjcplugins</groupId>
            <artifactId>cxf-xjc-ts</artifactId>
            <version>${cxf.xjc.ts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics</artifactId>
            <version>${jaxb2.basics.version}</version>
        </dependency>
    </dependencies>
</plugin> 
```

当我尝试执行`cxf-codegen:wsdl2java`目标时，生成的类不会在定义的 sourceRoot 目录中生成。

当我`mvn`使用调试选项（-X -e）运行时，我得到：

```
...
[DEBUG] Configuring mojo org.apache.cxf:cxf-codegen-plugin:2.6.1:wsdl2java from plugin realm ClassRealm[plugin>org.apache.cxf:cxf-codegen-plugin:2.6.1, parent: sun.misc.Launcher$AppClassLoader@425224ee]
[DEBUG] Configuring mojo 'org.apache.cxf:cxf-codegen-plugin:2.6.1:wsdl2java' with basic configurator -->
[DEBUG]   (f) classesDirectory = C:\WsdlTest\target\classes
[DEBUG]   (f) disableDependencyScan = false
[DEBUG]   (f) disableDirectoryScan = false
[DEBUG]   (f) encoding = UTF-8
[DEBUG]   (f) fork = false
[DEBUG]   (f) javaExecutable = C:\Program Files\Java\jdk1.6.0_31\jre/bin/java
[DEBUG]   (f) localRepository =        id: local
      url: file:///C:/Users/admi/.m2/repository/
   layout: none

[DEBUG]   (f) markerDirectory = C:\WsdlTest\target\cxf-codegen-plugin-markers
[DEBUG]   (f) mavenSession = org.apache.maven.execution.MavenSession@59cc5d23
[DEBUG]   (f) pluginArtifacts = [org.apache.cxf:cxf-codegen-plugin:maven-plugin:2.6.1:, org.codehaus.woodstox:stax2-api:jar:3.0.2:runtime, javax.xml.stream:stax-api:jar:1.0-2:runtime, org.apache.cxf.xjcplugins:cxf-xjc-ts:jar:2.4.0:runtime, commons-lang:commons-lang:jar:2.6:compile, org.jvnet.jaxb2_commons:jaxb2-basics:jar:0.6.3:runtime, org.jvnet.jaxb2_commons:jaxb2-basics-runtime:jar:0.6.3:runtime, org.jvnet.jaxb2_commons:jaxb2-basics-tools:jar:0.6.3:runtime, commons-beanutils:commons-beanutils:jar:1.7.0:runtime, org.apache.maven.shared:maven-artifact-resolver:jar:1.0:compile, org.codehaus.plexus:plexus-utils:jar:2.0.5:compile, org.codehaus.plexus:plexus-archiver:jar:1.2:compile, org.codehaus.plexus:plexus-io:jar:1.0.1:compile, org.apache.cxf:cxf-api:jar:2.6.1:compile, org.codehaus.woodstox:woodstox-core-asl:jar:4.1.2:runtime, org.apache.ws.xmlschema:xmlschema-core:jar:2.0.2:compile, org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.7.1:compile, wsdl4j:wsdl4j:jar:1.6.2:compile, org.apache.cxf:cxf-tools-common:jar:2.6.1:compile, org.apache.velocity:velocity:jar:1.7:compile, commons-collections:commons-collections:jar:3.2.1:compile, com.sun.xml.bind:jaxb-xjc:jar:2.1.13:compile, com.sun.xml.bind:jaxb-impl:jar:2.1.13:compile, org.apache.cxf:cxf-rt-core:jar:2.6.1:compile, org.apache.cxf:cxf-tools-wsdlto-core:jar:2.6.1:compile, org.apache.cxf:cxf-tools-validator:jar:2.6.1:compile, org.apache.cxf:cxf-rt-bindings-soap:jar:2.6.1:compile, org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.6.1:compile, org.apache.cxf:cxf-tools-wsdlto-databinding-jaxb:jar:2.6.1:compile, org.apache.cxf:cxf-tools-wsdlto-frontend-jaxws:jar:2.6.1:compile, xml-resolver:xml-resolver:jar:1.2:compile, org.apache.cxf:cxf-tools-wsdlto-frontend-javascript:jar:2.6.1:compile, org.apache.cxf:cxf-rt-javascript:jar:2.6.1:compile, org.springframework:spring-core:jar:3.0.7.RELEASE:compile, org.springframework:spring-asm:jar:3.0.7.RELEASE:compile, commons-logging:commons-logging:jar:1.1.1:compile, org.springframework:spring-beans:jar:3.0.7.RELEASE:compile, org.springframework:spring-context:jar:3.0.7.RELEASE:compile, org.springframework:spring-aop:jar:3.0.7.RELEASE:compile, aopalliance:aopalliance:jar:1.0:compile, org.springframework:spring-expression:jar:3.0.7.RELEASE:compile, org.apache.ant:ant:jar:1.8.2:compile, org.apache.ant:ant-launcher:jar:1.8.2:compile, org.apache.ant:ant-nodeps:jar:1.8.1:compile]
[DEBUG]   (f) project = MavenProject: com.tmobile.tmo.pfw:ssa:1.0.0-SNAPSHOT @ C:\WsdlTest\pom.xml
[DEBUG]   (f) repositories = [id = 'releases', id = 'snapshots', id = 'central']
[DEBUG]   (f) sourceRoot = C:\WsdlTest\target\generated-sources\cxf
[DEBUG]   (f) testWsdlRoot = C:\WsdlTest\src\test\resources\wsdl
[DEBUG]   (f) useCompileClasspath = false
[DEBUG]   (f) wsdlRoot = C:\WsdlTest\src\main\resources\wsdl
[DEBUG] -- end configuration --
... 
```

另一方面，在`mvn clean install`生成源期间（在生成的文件夹中）。但我不想在每次构建时生成这些类。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-02T07:55:17.777

这个问题已经很老了，但是我遇到了同样的问题，并想为将来保存解决方案：

不知何故`cxf-codegen-plugin`，需要执行一些 Maven 阶段才能“获取”配置元素而不是使用默认值。我所做的是从默认构建中删除插件并创建一个配置文件，以便能够将它作为 `generate-sources`按需阶段的一部分运行，而不是在每个构建中运行。

我的看起来像这样：

```
<profile>
    <id>generate-ws-stub</id>
    <activation>
        <activeByDefault>false</activeByDefault>
    </activation>
    <properties>
        <version.cxf>2.3.0</version.cxf>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${version.cxf}</version>

                <dependencies>
                    <dependency>
                        <groupId>org.apache.cxf</groupId>
                        <artifactId>cxf-rt-transports-http</artifactId>
                        <version>${version.cxf}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.apache.cxf</groupId>
                        <artifactId>cxf-rt-ws-security</artifactId>
                        <version>${version.cxf}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.apache.cxf</groupId>
                        <artifactId>cxf-rt-core</artifactId>
                        <version>${version.cxf}</version>
                    </dependency>
                </dependencies>    

                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <sourceRoot>${project.build.sourceDirectory}\prb</sourceRoot>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>${project.build.resources[0].directory}/wsdl/NoneOfYourBusinessWS.wsdl</wsdl>
                                    <wsdlLocation>classpath:wsdl/NoneOfYourBusinessWS.wsdl</wsdlLocation>
                                    <extraargs>
                                        <extraarg>-verbose</extraarg>
                                        <extraarg>-impl</extraarg>
                                    </extraargs>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

现在，每当我想“刷新”我的 XML 绑定时，我都会运行`mvn generate-sources -P generate-ws-stub`

# sql - 带有外键约束的 SQL 删除查询

> ID：12858542
> 
> 赞同：4
> 
> 时间：2012-10-12T11:56:26.117
> 
> 标签：sql, oracle, hibernate

我知道这个问题属于数据库理论的非常早期的阶段，但是我已经几个月没有遇到过这样的问题了。如果有人有一个数据库，其中一些表作为“链”与外键关联在一起，并且他们想从具有一些“依赖”表的表中删除记录，会出现什么障碍？特别是，在具有表的数据库中：Person、Profile、Preference、Filter 存在关联作为`Person.id`外键 in`Profile`和`Profile.id`外键 in`Preference`和`Filter.id`外键 in `Preference`，因此所有关联`enter code here`都是`OneToMany`。是否可以通过简单的查询删除一个人：

```
Delete from Person p where p.id= 34; 
```

如果不是，查询应该如何才能成功执行删除？如果应用程序中的数据库是由hibernate管理的，`annotations`我应该对每个实体的关联字段应用什么约束（ ），以便能够用上面的简单查询执行删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:08:39.863

SQL 版本

![在此处输入图像描述](../Images/9894ea3c140cd14a4d9fdef7b354d47a.png)

看截图。您可以使用插入更新规范规则。因为它有删除和更新规则。您可以设置这些值中的任何一个。

可以通过引用主键或唯一键来创建外键约束。外键约束确保关联表中数据的关系完整性。外键值可能为 NULL，表示特定记录没有父记录。但是如果一个值存在，那么它必然在父表中有一个关联的值。在父表上应用更新或删除操作时，对子表中关联值的影响可能会有不同的要求。SQL Server 2005 和 2008 中有四个可用选项，如下所示：

```
No Action
Cascade
SET NULL
SET Default 
```

使用这篇文章作为参考。

[http://www.mssqltips.com/sqlservertip/2365/sql-server-foreign-key-update-and-delete-rules/](http://www.mssqltips.com/sqlservertip/2365/sql-server-foreign-key-update-and-delete-rules/)

甲骨文版

您可以使用以下之一。

alter table sample1 add foreign key (col1) references sample (col2) on delete no action；

在删除限制上更改表 sample1 添加外键 (col1) 引用示例 (col2)；

在删除级联时更改表 sample1 添加外键 (col1) 引用示例 (col2)；

供参考。

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:58:40.637

答案是否定的，如果有外键约束，那么你必须先删除叶节点表数据

`Preference`那是首先从表中删除

然后从`Profile and Filter`表

然后从中删除记录`Person table`

这是您在任何地方都可以应用的通用概念

# javascript - jQuery，查找触发事件元素的选择器

> ID：12858545
> 
> 赞同：2
> 
> 时间：2012-10-12T11:56:29.643
> 
> 标签：javascript, jquery, node.js, jquery-selectors

我正在开发一个相当轻量级的实时应用程序。

我们正在使用 jQuery 的事件系统在我们的应用程序中的模块之间进行通信。因此，在 DOM 中进行更改并影响模块外部的任何内容都必须通过事件进行。

这些事件被客户端 socket.io 实现捕获，该实现要求 nodejs socket.io 服务器将事件广播给所有其他客户端。

我的问题：有没有办法找出触发事件的选择器？所以如果我打电话

```
$("tag.class").trigger("myevent"); 
```

我能以某种方式做到

```
$(document).on("myevent", function() {
    console.log(this.selector)
}); 
```

它会打印“tag.class”

这很有趣，因为知道用户在选择上触发了某个事件，而不是在之后可能看起来非常随机的许多元素上触发了某个事件会很有趣。

我已经阅读[了这个问题](https://stackoverflow.com/questions/3278422/jquery-finding-selector)，但我希望能够在应用程序中触发的所有事件上获得选择器。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:16:47.220

从链接的答案中获取灵感，您可以覆盖 jQuery`trigger`函数。就像是：

```
$.fn.origTrigger = $.fn.trigger;
$.fn.trigger = function (fn) {
  var selector = this.selector;
  this.origTrigger(function (ev) {
    fn(ev, selector);
  });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:06:20.983

最好的办法是随事件发送数据。它也更强大，因为你有更多的控制权。选择器可能不漂亮，但数据很漂亮。

```
$('tag.class').trigger('myevent', ['some', 'param']);

$(document).on('myevent', function(param1, param2) {
    console.log(param1); // "some"
    console.log(param2); // "param"
}); 
```

当然，如果你想发送尽可能多的参数，你可以使用一个“选项”对象并以这样的方式处理它：

```
$('tag.class').trigger('myevent', [{some: 'option', other: 'option'}]);

$(document).on('myevent', function(options) {
    var opts = {
        default: 'option',
        some: 'default',
        other: 'default'
    };
    $.extend(opts, options);

    console.log(opts); // {default: "option", some: "option", other: "option"}
}); 
```

# iphone - CLLocationManager 持有缓存值

> ID：12858548
> 
> 赞同：1
> 
> 时间：2012-10-12T11:56:37.023
> 
> 标签：iphone, ios, xcode, cllocationmanager, cllocation

这部分代码`CLLocationManager`用于计算行进的距离。但即使使用`timeIntervalSinceNow`.

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    if(newLocation != nil && oldLocation != newLocation)
    {
        tempNewLocation = newLocation;
        tempOldLocation = oldLocation;
    }

    NSLog(@"New Location Found");
    NSLog(@"- Latitude: %f", newLocation.coordinate.latitude);
    NSLog(@"- Longitude: %f", newLocation.coordinate.longitude);
    NSLog(@"- Altitude: %f", newLocation.altitude);
    NSLog(@"- Course: %f", newLocation.course);

    NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow];
    NSLog(@"The location age %f",locationAge);
    if (locationAge > 2.0) 
    {
    }
    else
    {
if (tempOldLocation.coordinate.latitude == tempNewLocation.coordinate.latitude   && tempNewLocation.coordinate.longitude == tempOldLocation.coordinate.longitude) 
{
    NSLog(@" Fix location found ");
}
else
{
    if(tempNewLocation.coordinate.latitude == tempOldLocation.coordinate.latitude && tempNewLocation.coordinate.longitude == tempOldLocation.coordinate.longitude)
    {
        NSLog(@"First Time Location Update");
        latitudeLongitude.text = [[ NSString alloc] initWithFormat:@"%g , %g", tempNewLocation.coordinate.latitude, tempNewLocation.coordinate.longitude];

        totalDistance =  0;
        distance.text = @"0 miles";
    }
    else if ([tempNewLocation distanceFromLocation:tempOldLocation] - tempNewLocation.horizontalAccuracy >= 0) 
    {

    totalDistance +=  [tempNewLocation distanceFromLocation:tempOldLocation] - (tempNewLocation.horizontalAccuracy / 2);
}
else{

    totalDistance +=  [tempNewLocation distanceFromLocation:tempOldLocation];
}

 if (totalDistance < 0) {
        distance.text = @"0 miles";

    }
    else
    milesdistance=0.000621371192*totalDistance;

distance.text = [[ NSString alloc] initWithFormat:@"%.1f", milesdistance];

odometerreading.text = [NSString stringWithFormat:@"%09.1f", milesdistance];
mileagerate.text = [[NSUserDefaults standardUserDefaults] valueForKey:@"savedstring"];

float mileagefloat=[self.mileagerate.text floatValue];
amount.text =  [NSString stringWithFormat:@"%.2f",mileagefloat * milesdistance];
amountstatus.text=[NSString stringWithFormat:@"$%.2f",mileagefloat * milesdistance];
newnumber=totalDistance;

} 
```

这段代码对我不起作用，当我开始跟踪时，距离是从我上次停止跟踪的地方计算的。

```
NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow];
        NSLog(@"The location age %f",locationAge);
        if (locationAge > 2.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:10:43.813

我使用一个计数器来计算调用*didUpdateToLocation*的次数。
我只使用至少 3 次通话后收到的位置。

我知道 3 是一个神奇的数字，但我发现前 3 个调用是缓存或非常不准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:50:25.073

看看这个问题的答案，因为它包含来自 Apple 的示例应用程序“LocateMe”的代码，并提供了更多关于你想要做什么的细节：

[https://stackoverflow.com/a/12848776/346098](https://stackoverflow.com/a/12848776/346098)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:20:28.840

您想`timestamp`在委托方法中检查新 CLLocation 对象的属性。听起来它只对不超过 XXX 秒的纬度/经度感兴趣。

```
NSTimeInterval timeInSeconds = [newLocation.timestamp timeIntervalSinceNow];
if (timeInSeconds > YOUR_CUSTOM_TIME_IN_SECONDS)
{
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:16:11.473

我找到了删除缓存的答案。第一次`didUpdateToLocation`调用，`newlocation`获取缓存值，`old location`为空。在第二次调用中，`newlocation`值被交换`oldlocation`并`newlocation`更新。因此，要获得更新的值，必须调用该函数两次。

```
- (void)locationManager:(CLLocationManager *)manager 
        didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

        static CLLocation *locationanalysis1;
    NSLog(@"New Location Found");
    NSLog(@"- Latitude: %f", newLocation.coordinate.latitude);
    NSLog(@"- Longitude: %f", newLocation.coordinate.longitude);
    NSLog(@"- Altitude: %f", newLocation.altitude);
    NSLog(@"- Course: %f", newLocation.course);

    NSDate *eventDate = newLocation.timestamp; 
    NSTimeInterval howRecent = -[eventDate timeIntervalSinceNow];
    if (howRecent > maximumElapsedTimeForCachedLocation)  {             

            locationanalysis1=newLocation;

        return;
}

    if((locationanalysis1.coordinate.latitude-oldLocation.coordinate.latitude)==0){
        NSLog(@"Old Location in location analysis is %@",oldLocation);

      return;
    }

    NSLog(@"New location accuracy %.0fm", newLocation.horizontalAccuracy);
    if ((newLocation.horizontalAccuracy < 0) || (newLocation.horizontalAccuracy > 10)) return;
    if(oldLocation!=NULL && newLocation!=NULL){

                totalDistance +=  [newLocation distanceFromLocation:oldLocation];
    }else return;
} 
```

# multithreading - Delphi (XE2) Indy (10) 多线程 Ping

> ID：12858551
> 
> 赞同：11
> 
> 时间：2012-10-12T11:56:46.260
> 
> 标签：multithreading, delphi, ping, indy, tthread

我有一个有 60 台计算机/设备的房间（40 台计算机和 20 台基于 Windows CE 的示波器），我想知道使用 ping 的每个人都还活着。首先，我编写了一个标准 ping（请参见此处[Delphi Indy Ping Error 10040](https://stackoverflow.com/questions/12723081/delphi-indy-ping-error-10040)），它现在工作正常，但在大多数计算机离线时需要很长时间。

所以我想做的是写一个多线程平，但我很挣扎。我在互联网上只看到很少的例子，没有人符合我的需求，这就是我尝试自己写的原因。

我使用 XE2 和 Indy 10，表单仅由备忘录和按钮组成。

```
unit Main;

interface

uses
  Winapi.Windows, System.SysUtils, System.Classes, Vcl.Forms,
  IdIcmpClient, IdGlobal, Vcl.StdCtrls, Vcl.Controls;

type
  TMainForm = class(TForm)
    Memo1: TMemo;
    ButtonStartPing: TButton;
    procedure ButtonStartPingClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

type
  TMyPingThread = class(TThread)
  private
    fIndex : integer;
    fIdIcmpClient: TIdIcmpClient;
    procedure doOnPingReply;
  protected
    procedure Execute; override;
  public
    constructor Create(index: integer);
  end;

var
  MainForm: TMainForm;
  ThreadCOunt : integer;

implementation

{$R *.dfm}

constructor TMyPingThread.Create(index: integer);
begin
  inherited Create(false);

  fIndex := index;
  fIdIcmpClient := TIdIcmpClient.Create(nil);
  fIdIcmpClient.ReceiveTimeout := 200;
  fIdIcmpClient.PacketSize := 24;
  fIdIcmpClient.Protocol := 1;
  fIdIcmpClient.IPVersion := Id_IPv4;

  //first computer is at adresse 211
  fIdIcmpClient.Host := '128.178.26.'+inttostr(211+index-1);

  self.FreeOnTerminate := true;
end;

procedure TMyPingThread.doOnPingReply;
begin
  MainForm.Memo1.lines.add(inttostr(findex)+' '+fIdIcmpClient.ReplyStatus.Msg);
  dec(ThreadCount);

  if ThreadCount = 0 then
    MainForm.Memo1.lines.add('--- End ---');
end;

procedure TMyPingThread.Execute;
begin
  inherited;

  try
    fIdIcmpClient.Ping('',findex);
  except
  end;

  while not Terminated do
  begin
    if fIdIcmpClient.ReplyStatus.SequenceId = findex then Terminate;
  end;

  Synchronize(doOnPingReply);
  fIdIcmpClient.Free;
end;

procedure TMainForm.ButtonStartPingClick(Sender: TObject);
var
  i: integer;
  myPing : TMyPingThread;
begin
  Memo1.Lines.Clear;

  ThreadCount := 0;
  for i := 1 to 40 do
  begin
    inc(ThreadCount);
    myPing := TMyPingThread.Create(i);
    //sleep(10);
  end;
end;

end. 
```

我的问题是，当我取消注释“sleep(10)”时，它“似乎”可以工作，并且“似乎”没有它就无法工作。这肯定意味着我在我写的线程中遗漏了一点。

换句话说。当 Sleep(10) 在代码中时。每次我单击按钮以检查连接时，结果都是正确的。

没有睡眠（10），它“大部分”时间都在工作，但有时结果是错误的线。

欢迎任何评论或帮助。

**----- 编辑/重要 -----**

作为对这个问题的一般跟进，@Darian Miller 在这里[https://code.google.com/p/delphi-stackoverflow/开始了一个](https://code.google.com/p/delphi-stackoverflow/)[谷歌代码项目，](https://code.google.com/p/delphi-stackoverflow/ "谷歌代码项目") 这是一个工作基础。我将他的答案标记为“已接受的答案”，但用户应该参考这个开源项目（所有功劳归他所有），因为它肯定会在未来得到扩展和更新。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T00:16:57.903

根本问题是 ping 是无连接流量。如果您有多个`TIdIcmpClient`对象同时 ping 网络，则一个`TIdIcmpClient`实例可以收到实际上属于另一个`TIdIcmpClient`实例的回复。您正在尝试通过检查`SequenceId`值在线程循环中考虑这一点，但您没有考虑到`TIdIcmpClient`已经在内部进行了相同的检查。它循环读取网络回复，直到它收到它所期望的回复，或者直到`ReceiveTimeout`发生。如果它收到它不期望的回复，它会简单地丢弃该回复。因此，如果一个`TIdIcmpClient`实例放弃了另一个`TIdIcmpClient`实例所期望的回复，则该回复将不会被您的代码处理，而另一个实例`TIdIcmpClient`可能会收到另一个`TIdIcmpClient`的回复，等等。通过添加`Sleep()`，您正在减少（但不是消除）ping 相互重叠的机会。

对于您尝试做的事情，您将无法按`TIdIcmpClient`原样使用多个 ping 并行运行，抱歉。它根本不是为此而设计的。它无法以您需要的方式区分回复数据。您将不得不序列化您的线程，以便一次只能调用一个线程`TIdIcmpClient.Ping()`。

如果序列化 ping 不适合您，您可以尝试将部分`TIdIcmpClient`源代码复制到您自己的代码中。运行 41 个线程 - 40 个设备线程和 1 个响应线程。创建所有线程共享的单个套接字。让每个设备线程准备并使用该套接字将其单独的 ping 请求发送到网络。然后让响应线程不断地从同一个套接字读取回复并将它们路由回适当的设备线程进行处理。这需要更多的工作，但它会为您提供您正在寻找的多 ping 并行性。

如果您不想遇到所有麻烦，另一种方法是仅使用已经支持同时 ping 多台机器的第三方应用程序，例如[FREEPing](http://www.tools4ever.com/software/additional-software/freeping/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T05:46:30.477

Remy 解释了这些问题......我想在 Indy 中做这件事已经有一段时间了，所以我发布了一个可能的解决方案，我只是将它放在一个新的 Google Code 项目中，而不是在这里发表很长的评论。这是第一次尝试，如果您有一些需要集成的更改，请告诉我： [https ://code.google.com/p/delphi-vault/](https://code.google.com/p/delphi-vault/)

此代码有两种方法来 Ping...多线程客户端，如您的示例，或使用简单的回调过程。为 Indy10 和更高版本的 Delphi 编写。

您的代码最终将使用定义 SynchronizedResponse 方法的 TThreadedPing 后代：

```
 TMyPingThread = class(TThreadedPing)
  protected
    procedure SynchronizedResponse(const ReplyStatus:TReplyStatus); override;
  end; 
```

为了关闭一些客户端线程，代码变成了这样：

```
procedure TfrmThreadedPingSample.butStartPingClick(Sender: TObject);
begin
  TMyPingThread.Create('www.google.com');
  TMyPingThread.Create('127.0.0.1');
  TMyPingThread.Create('www.shouldnotresolvetoanythingatall.com');
  TMyPingThread.Create('127.0.0.1');
  TMyPingThread.Create('www.microsoft.com');
  TMyPingThread.Create('127.0.0.1');
end; 
```

线程响应在同步方法中调用：

```
procedure TMyPingThread.SynchronizedResponse(const ReplyStatus:TReplyStatus);
begin
  frmThreadedPingSample.Memo1.Lines.Add(TPingClient.FormatStandardResponse(ReplyStatus));
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:41:28.910

我没有尝试你的代码，所以这都是假设的，但我认为你弄乱了线程并获得了经典`race condition`。我重申我的建议使用`AsyncCalls`or `OmniThreadLibrary`- 它们更简单，并且可以节省您很少尝试“射击自己的脚”。

1.  制作线程以最小化主线程负载。线程构造函数应该做最少的记住参数的工作。我个人将 idICMP 创建转移到`.Execute`方法中。如果出于任何原因它想要创建其内部同步对象，例如窗口和消息队列或信号或其他任何东西，我希望它已经发生在一个新的衍生线程中。

2.  “继承”没有意义；在.执行。最好去掉。

3.  沉默所有异常是不好的风格。您可能有错误 - 但无法了解它们。您应该将它们传播到主线程并显示它们。OTL 和 AC 可以帮助您，而对于 tThread，您必须手动完成。[如何在不调用 .Sync 的情况下处理 AsyncCalls 函数中引发的异常？](https://stackoverflow.com/questions/12362851)

4.  异常逻辑有缺陷。如果抛出异常 - 如果没有设置成功的 Ping - 那么为什么要等待响应？您循环应该在与发出 ping 相同的 try-except 帧内进行。

5.  您`doOnPingReply`在之后执行`fIdIcmpClient.Free`但访问`fIdIcmpClient`的内部。尝试更改 .Free for FreeAndNil 吗？这是释放死指针后使用死指针的典型错误。正确的做法是：
    5.1。`doOnPingReply`
    在5.2中释放对象。或在调用之前将所有相关数据复制`doOnPingReply`到 TThread 的私有成员变量`Synchronize`和（并且仅在5.3`idICMP.Free`中使用这些变量）。`doOnPingReply`只做`fIdIcmpClient.Free`里面`TMyThread.BeforeDestruction`或`TMyThread.Destroy`。毕竟，如果您选择在构造函数中创建对象 - 那么您应该在匹配的语言构造 - 析构函数中释放它。

6.  由于您不保留对线程对象的引用 - 该`While not Terminated`循环似乎是多余的。只需进行通常的永远循环并调用中断即可。

7.  前面提到的循环很消耗 CPU，就像自旋循环一样。请调用`Sleep(0);`或`Yield();`在循环内给其他线程更好的机会来完成他们的工作。不要在这里对抗 OS 调度程序——你不是在一个速度关键的路径上，没有理由在`spinlock`这里做。

* * *

总的来说，我认为：

*   4 和 5 对您来说是严重的错误
*   1 和 3 作为潜在的陷阱可能会影响，也可能不会。你最好“谨慎行事”，而不是做有风险的事情并调查它们是否有效。
*   2 和 7 - 糟糕的风格，2 与语言有关，7 与平台有关
*   6 要么你有扩展你的应用程序的计划，要么你违反了 YAGNI 原则，不知道。
*   坚持使用复杂的 TThread 而不是 OTL 或 AsyncCalls - 战略错误。不要把车放在跑道上，使用简单的工具。

* * *

有趣的是，这是一个`FreeAndNil`可以暴露并显而易见的错误示例，而 FreeAndNil-haters 则声称它“隐藏”了错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T02:35:38.080

```
// This is my communication unit witch works well, no need to know its work but your
// ask   is in the TPingThread class.

UNIT UComm;

INTERFACE

USES
  Windows, Messages, SysUtils, Classes, Graphics, Controls, ExtCtrls, Forms, Dialogs,
  StdCtrls,IdIcmpClient, ComCtrls, DB, abcwav, SyncObjs, IdStack, IdException, 
  IdTCPServer, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient, IdContext,
  UDM, UCommon;

TYPE
  TNetworkState = (nsNone, nsLAN, nsNoLAN, nsNet, nsNoNet);
  TDialerStatus = (dsNone, dsConnected, dsDisconnected, dsNotSync);

  { TBaseThread }

  TBaseThread = Class(TThread)
  Private
    FEvent : THandle;
    FEventOwned : Boolean;
    Procedure ThreadTerminate(Sender: TObject); Virtual;
  Public
    Constructor Create(AEventName: String);
    Property EventOwned: Boolean Read FEventOwned;
  End;

  .
  .
  .

  { TPingThread }

  TPingThread = Class(TBaseThread)
  Private
    FReply : Boolean;
    FTimeOut : Integer;
    FcmpClient : TIdIcmpClient;
    Procedure ReplyEvent(Sender: TComponent; Const AReplyStatus: TReplyStatus);
  Protected
    Procedure Execute; Override;
    Procedure ThreadTerminate(Sender: TObject); Override;
  Public
    Constructor Create(AHostIP, AEventName: String; ATimeOut: Integer);
    Property Reply: Boolean Read FReply;
  End;

  .
  .
  .

{ =============================================================================== }

IMPLEMENTATION

{$R *.dfm}

USES
  TypInfo, WinSock, IdGlobal, UCounter, UGlobalInstance, URemoteDesktop;
  {IdGlobal: For RawToBytes function 10/07/2013 04:18 }

{ TBaseThread }

//---------------------------------------------------------
Constructor TBaseThread.Create(AEventName: String);
Begin
  SetLastError(NO_ERROR);
  FEvent := CreateEvent(Nil, False, False, PChar(AEventName));
  If GetLastError = ERROR_ALREADY_EXISTS
    Then Begin
           CloseHandle(FEvent);
           FEventOwned := False;
         End
    Else If FEvent <> 0 Then
           Begin
             FEventOwned := True;
             Inherited Create(True);
             FreeOnTerminate := True;
             OnTerminate := ThreadTerminate;
           End;
End;

//---------------------------------------------------------
Procedure TBaseThread.ThreadTerminate(Sender: TObject);
Begin
  CloseHandle(FEvent);
End;

{ TLANThread }
 .
 .
 .

{ TPingThread }

//---------------------------------------------------------
Constructor TPingThread.Create(AHostIP: String; AEventName: String; ATimeOut: Integer);
Begin
  Inherited Create(AEventName);
  If Not EventOwned Then Exit;
  FTimeOut := ATimeOut;
  FcmpClient := TIdIcmpClient.Create(Nil);
  With FcmpClient Do
  Begin
    Host := AHostIP;
    ReceiveTimeOut := ATimeOut;
    OnReply := ReplyEvent;
  End;
End;

//---------------------------------------------------------
Procedure TPingThread.Execute;
Begin
  Try
    FcmpClient.Ping;
    FReply := FReply And (WaitForSingleObject(FEvent, FTimeOut) = WAIT_OBJECT_0);
  Except
    FReply := False;
  End;
End;

//---------------------------------------------------------
Procedure TPingThread.ReplyEvent(Sender: TComponent; Const AReplyStatus: TReplyStatus);
Begin
  With AReplyStatus Do
  FReply := (ReplyStatusType = rsEcho) And (BytesReceived <> 0);
  SetEvent(FEvent);
End;

//---------------------------------------------------------
Procedure TPingThread.ThreadTerminate(Sender: TObject);
Begin
  FreeAndNil(FcmpClient);
  Inherited;
End;

{ TNetThread }
.
.
. 
```

# wiki - octopress 中的 Markdown 引用

> ID：12858554
> 
> 赞同：5
> 
> 时间：2012-10-12T11:56:54.340
> 
> 标签：wiki, markdown, jekyll, octopress, redcarpet

我经常使用降价，并希望有一些模仿 wiki 参考行为的页面。

例如：

```
Blah blah blah <ref>{{Some Reference}}</ref> 
```

我将在几页中添加大量引用，但不确定如何在 markdown 中完成此行为。我发现的所有资源都需要大量工作才能跟踪它们，您必须自己在页面底部和顶部订购它们，而不是可以在底部自动构建列表的 Wiki 标记一个带有简单 {reflist} 的页面。类似于 TOC 的东西。Markdown中没有这样的东西吗？

我如何扩展 RedCarpet 或其他处理器来管理整个页面的参考链接并建立一个列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:02:05.410

我认为没有简单的方法可以开箱即用，但是您可以使用 jekyll 扩展，例如：

[https://github.com/archome/jekyll-citation](https://github.com/archome/jekyll-citation)

[https://github.com/inukshuk/jekyll-scholar](https://github.com/inukshuk/jekyll-scholar)

看起来像：

```
@book{ruby,
  title     = {The Ruby Programming Language},
  author    = {Flanagan, David and Matsumoto, Yukihiro},
  year      = {2008},
  publisher = {O'Reilly Media}
} 
```

不确定用于简单的网络参考（例如您的示例）有多容易，但它会起作用。

# sparql - DBPedia 人物数据集

> ID：12858557
> 
> 赞同：0
> 
> 时间：2012-10-12T11:57:06.603
> 
> 标签：sparql, dbpedia

我需要从 DBPEdia 中提取带有变体的人名。我的 SPARQL 请求：

```
 select distinct ?o where {
    { ?instance <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person>; 
     <http://xmlns.com/foaf/0.1/name> ?o }
     union
       {
         ?instance <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person>; 
         rdfs:label
       }
   FILTER (langMatches(lang(?o),"en"))} 
```

DBPedia 通过 SRARQL 请求仅返回 50 000 个名称。

可能存在所有名称变化的人的数据集？

现有的 people_en.nt 数据集仅包含 foaf:name 但我需要其他名称的变体。有时他们会在 rdfs:label 中列出（例如 Maria Sharapova）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:58:34.933

在另一篇文章中找到了答案。运行以下 SPARQL：

```
SELECT ?o WHERE {  
{
  select distinct ?o 
     where {
             ?instance <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person>; 
             rdfs:label ?o  
            FILTER (langMatches(lang(?o),"en"))
           } 
    ORDER BY ASC(?o)
  }
 } OFFSET 800000 LIMIT 50000 
```

在 Java 程序中：

```
 Query query = QueryFactory.create(queryString);
  QueryExecution qexec = QueryExecutionFactory.sparqlService("http://dbpedia.org/sparql", query); 
```

# android - 设置动态壁纸修复图像（不希望滚动图像 - 像静态动态壁纸）

> ID：12858562
> 
> 赞同：1
> 
> 时间：2012-10-12T11:57:54.357
> 
> 标签：android, live-wallpaper

嗨，我正在创建动态壁纸应用程序，因为背景图像在一段时间后会发生变化，但问题是图像被拉伸和滚动，我希望图像固定在一个屏幕上，但不能滚动，下面是我的代码可以是任何主体帮我怎么设置

```
 public static void setAsWallpaper(Bitmap mBitmap,Context mActivity, int height, int width)
  {
    try{
        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(mActivity);  

        if (mBitmap != null) {  
            try {
                mBitmap=Bitmap.createScaledBitmap(mBitmap, height, width, true);

                myWallpaperManager.setBitmap(mBitmap);

            } catch (IOException e) {  

            }  
        } 
```

通过这个功能，我在这里将图像设置为动态壁纸我应该在**高度和宽度**中传递什么， 这样我才能得到不滚动的图片

例如，如果我的手机屏幕分辨率为 480x320，那么如果我在高度和宽度上传递了它但无法获得正确的图像，则图像仍在滚动

我还使用了一项功能来滚动下面的壁纸

```
 WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
    display = wm.getDefaultDisplay(); 
```

有了这个，我得到了宽度和高度，我已经在上面的函数中传递了这个值，但是静止图像在动态壁纸中滚动！所以我应该在宽度和高度中传递什么，这样图像就不能滚动并固定在一个屏幕上

# sql-server - 如何使用 CTE 在 SQL Server 2005 中使用存储过程从分层数据中获取所有子项及其自身

> ID：12858567
> 
> 赞同：2
> 
> 时间：2012-10-12T11:58:04.747
> 
> 标签：sql-server, stored-procedures, common-table-expression, hierarchical

我有很多类似的结构表是这样的：

```
CREATE TABLE [dbo].[tbl_Hierarchy](
[ID] [int]  NOT NULL,
[ParentID] [int] NOT NULL,
[Text] [nvarchar](100)  NOT NULL,
--other field irrelevant to my question
)

INSERT INTO dbo.tbl_Hierarchy VALUES(1,0,'parent1')
INSERT INTO dbo.tbl_Hierarchy VALUES(2,0,'parent2')
INSERT INTO tbl_Hierarchy VALUES(3,1,'child1')
INSERT INTO tbl_Hierarchy VALUES(4,3,'grandchild1')
INSERT INTO  tbl_Hierarchy VALUES(5,2,'child2') 
```

你能帮我写一个包含两个参数的存储过程，表名和 ID 吗？

例如，当执行

```
EXEC usp_getChildbyID  tbl_Hierarchy, 1 
```

结果集应该是：

```
ID  Text        Level
1   parent1      1
3   child1       2
4   grandchild1  3 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:21:52.303

这个递归 CTE 应该可以解决问题。

```
WITH RecursiveCte AS
(
    SELECT 1 as Level, H1.Id, H1.ParentId, H1.Text FROM tbl_Hierarchy H1
    WHERE id = @Id
    UNION ALL
    SELECT RCTE.level + 1 as Level, H2.Id, H2.ParentId, H2.text FROM tbl_Hierarchy H2
    INNER JOIN RecursiveCte RCTE ON H2.ParentId = RCTE.Id
)
SELECT Id, Text, Level FROM RecursiveCte 
```

如果您真的希望在过程中使用动态表，这可能是一个解决方案

```
CREATE PROCEDURE usp_getChildbyID
    @TableName nvarchar(max),
    @Id int
AS
BEGIN

    DECLARE @SQL AS nvarchar(max)
    SET @SQL = 
    'WITH RecursiveCte AS
    (
        SELECT 1 as Level, H1.Id, H1.ParentId, H1.Text FROM ' + @TableName + ' H1
        WHERE id = ' + CAST(@Id as Nvarchar(max)) + '
        UNION ALL
        SELECT RCTE.level + 1 as Level, H2.Id, H2.ParentId, H2.text FROM ' + @TableName + ' H2
        INNER JOIN RecursiveCte RCTE ON H2.ParentId = RCTE.Id
    )
    select Id, Text, Level from RecursiveCte'

    EXEC sp_executesql @SQL;
END 
```

编辑：

Sql 小提琴示例：[http ://sqlfiddle.com/#!3/d498b/22](http://sqlfiddle.com/#!3/d498b/22)

# windows - Metro App 范围输入，更改工具提示中的文本？

> ID：12858572
> 
> 赞同：0
> 
> 时间：2012-10-12T11:58:23.903
> 
> 标签：windows, microsoft-metro, winjs, windows-store-apps

我想在 Win8/WinJS/Metro/Modern UI (input type="range") 滑块上显示的工具提示中设置文本，但我找不到有关如何执行此操作的任何信息。

我似乎能找到的唯一信息是它可以通过以下方式设置样式：

```
some_selector::-ms-tooltip
{
    display: none;
} 
```

但我无法使用 jQuery 通过 .text(t)/.html(t) 更改文本。

所以问题是，我将如何选择工具提示元素以便我可以设置文本？

# javascript - 如何从回发回自身的模态对话框下载文件？

> ID：12858574
> 
> 赞同：0
> 
> 时间：2012-10-12T11:58:25.807
> 
> 标签：javascript, asp.net, webforms

ASP.Net Webforms 页面被包裹在一个庞大的表单中，这限制了页面上的其他表单，因为嵌套表单不起作用。这是有意的，因为在 webforms 项目中，每个页面只能有一个表单，并且所有服务器/客户端交互都需要它。为了构建自定义表单，我以[这种方式](http://javascript.gakaa.com/window-showmodaldialog-4-0-5-.aspx)组合了一个模态对话框。为了允许来自服务器的正确错误消息，我的模式对话框必须回发给自己。为了做到这一点，我按照[这个技巧](http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/92504e74-05ee-489e-b495-4902d81d8fdc)使用表单目标作为对话框所在窗口的名称。

当我尝试添加一个按钮来下载文件时，问题就来了。当我现在尝试从此对话框下载文件时，没有任何反应。我可以将我的响应重定向到有问题的文件，但我不能将文件写入响应，因为当我单击按钮时对话框就在那里，没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:58:25.807

经过一段时间的研究和构建一个小测试用例，我发现这里有几个有趣的因素。

1.  Response.WriteFile() 在网络表单中工作正常，即使表单设置为当前窗口的目标。
2.  模态对话框可以完美地下载文件，除非表单设置为当前窗口的目标。

通过广泛的测试，这似乎是一个不起眼的错误，甚至可能是一种奇怪的安全尝试。这似乎也特定于 IE 8，尽管我没有测试其他版本的 IE。

在模态对话框中允许下载的技巧是更改表单的目标。

```
function downloader() {
    document.getElementById("form1").target = "_blank";
} 
```

这修复了 IE 错误并且似乎可以在所有其他浏览器中工作（尽管我根本无法让歌剧显示弹出窗口，即使使用“允许所有弹出窗口”也是如此）。

认为我的辛勤工作不应该浪费，也许这会在未来对其他人有所帮助。

# java-me - J2ME 中的 XML Dom 解析

> ID：12858576
> 
> 赞同：0
> 
> 时间：2012-10-12T11:58:31.127
> 
> 标签：java-me, xml-parsing, midp

在我的 J2ME 应用程序中，我可以从服务器获取 xml 数据作为字符串，但我无法通过代码读取标签及其元素。请建议我一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:39:03.030

如果您的目标设备有[`JSR 172`](http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/ws/jsr172/index.html)，您可以使用[`SAX`](http://www.oracle.com/technetwork/articles/java/xmlparser-1354217.html)或`DOM`。
如果没有你可以试试[`kxml2`](http://sourceforge.net/projects/kxml/files/kxml2/)。[在http://www.developer.nokia.com/Community/Wiki/XML_Parser_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/XML_Parser_in_Java_ME)上有一个很好的介绍

# json - JMeter / AMQ - 从 JSON 文件读取字符串时替换子字符串

> ID：12858581
> 
> 赞同：2
> 
> 时间：2012-10-12T11:58:45.650
> 
> 标签：json, scripting, jms, activemq, jmeter

自从周一客户告诉我，为了性能测试的目的，我们需要模拟多达 50,000 个伪并发实体时，我就一直在这方面碰壁。这是设置。我有一个充满 JSON 对象的文本文件，其中包含看起来有点像这样的 JSON 数据：

```
{"customerId"=>"900", "assetId"=>"NN_18_144", "employee"=>"", "visible"=>false,
 "GenerationDate"=>"2012-09-21T09:41:39Z", "index"=>52, "Category"=>2...} 
```

这是一条线的一个对象。我正在使用 JMeter 的 JMS 发布者按顺序读取这些行：

```
${_StringFromFile(${PATH_TO_DATA_FILES}scenario_9.json)} 
```

从每一个都包含不同的场景。

我需要做的是读取文件并将assetId的值替换为从50,000个非顺序的预生成字符串列表中随机选择的值（我不可能为每个assetId创建一个单独的文件，因为这将涉及用 50,000 个文件乱扔负载注入器，并在 JMeter 中为每个文件配置一个线程组）。以编程方式，执行替换是一件微不足道的事情，但在 JMeter 中动态执行它并不是那么简单。

通常，我会将其视为有趣的技术挑战，并花几天时间解决它，但我只有周末，我怀疑我会在办公室过夜。

有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:25:30.823

如果您的 JSON 正文始终相同，或者您的内容几乎没有变化，您应该：

*   使用带有 RAW POST 正文的 HTTP 采样器

*   将 JSON 正文与资产 ID 的变量一起放入其中

*   将资产 ID 放入 CSV 数据集配置中

避免使用 ${_StringFromFile} 因为它有成本。

如果您需要脚本，请使用 JSR223 后处理器和外部文件中的脚本 + 缓存（自 2.8 起可用）以便编译脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:51:05.207

要读取您的资产，请使用[CSV Data SetConfig](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)，我想assetId 将是变量名称。

修改你的表达式：

```
 ${_StringFromFile(${PATH_TO_DATA_FILES}scenario_9.json, lineToSubstitute)} 
```

要进行替换，请添加一个[Beanshell 采样器](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)或[JSR223_Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler) J（使用 groovy）并编写替换代码：

```
 String assetId = vars.get("assetId");
   String lineToSubstitute = vars.get("lineToSubstitute");
   String lineSubstituted = ....;
   vars.put("lineSubstituted", lineSubstituted); 
```

# jquery - jquery嵌套自定义滚动条

> ID：12858584
> 
> 赞同：0
> 
> 时间：2012-10-12T11:58:53.033
> 
> 标签：jquery

是否有任何支持嵌套滚动条的自定义滚动条的 jquery 插件？

我尝试了以下插件，它真的很好，但它不支持嵌套滚动条 [http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:14:14.263

[Jscrollpane](http://jscrollpane.kelvinluck.com/)在我看来是最好的

[此演示](http://jscrollpane.kelvinluck.com/fullpage_scroll.html)显示您可以毫无问题地使用嵌套滚动条。

我以前做过。使用 jscrollpane 有一点学习曲线，但这是值得的。

# mysql - Mysql最后插入的行ID

> ID：12858588
> 
> 赞同：0
> 
> 时间：2012-10-12T11:59:19.507
> 
> 标签：mysql

在 Mysql 中，我在 mysql 表中使用 Insert 命令插入一行，现在我想要插入最后一行的 Id，我正在使用

```
SELECT LAST_INSERT_ID() ; 
```

但它每次都给我 0 作为输出。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:11:39.503

`LAST_INSERT_ID()`仅返回 MySQL 服务器为`AUTO_INCREMENT`列自动生成的值；当您插入特定值时，不会发生自动生成，并且不会返回任何值`LAST_INSERT_ID()`。

您可以为`LAST_INSERT_ID`自己分配一个值：

```
INSERT INTO table (uuid) VALUES (LAST_INSERT_ID(12345)); 
```

[`LAST_INSERT_ID(value)`](http://dev.mysql.com/doc/refman/5.6/en/information-functions.html#id1014367)赋值`value`为由后续调用`LAST_INSERT_ID()`返回，并返回相同的值。不幸的是，这仅适用于整数值，对 UUID 无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:11:50.537

为什么要选择不是由插入自动生成但传递给它的东西？原因是您在插入语句中使用了 UUID()。我建议您首先选择 UUID，然后将其传递给插入

```
SELECT @id := UUID();
INSERT INTO tablename(id, value) VALUES(@id, somevalue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T17:23:02.613

如果要从最后插入的 id 中选择所有列，可以这样：

```
SELECT * FROM table WHERE id = (SELECT MAX(id) FROM table) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:09:57.713

你正在为自动增量分配一个 uuid 这是你做错了什么

自动增量字段将自动插入

除此之外，您将在 LAST_INSERT_ID() 中获得 0 结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:21:33.540

首先，您必须使用一个自动递增的行。

如果您使用的是 php，请使用此方法：

```
 $foo = mysql_insert_id(); 
```

看看[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

在c#中我这样使用：

```
 connection.Open();
                cmd = new MySql.Data.MySqlClient.MySqlCommand();
                cmd.Connection = connection;

                cmd.CommandText = "INSERT INTO o_test(game_id, user_id, date) values(?game_id, ?uid, ?date)";
                cmd.Prepare();

                cmd.Parameters.AddWithValue("?game_id", null);
                cmd.Parameters.AddWithValue("?uid", words[1]);
                cmd.Parameters.AddWithValue("?date", words[2]);
                cmd.ExecuteNonQuery();

                int game_id;
                cmd.Parameters.Add(new MySqlParameter("newId", cmd.LastInsertedId));
                game_id = Convert.ToInt32(cmd.Parameters["@newId"].Value); 
```

# android - 在android中创建一个xml

> ID：12858591
> 
> 赞同：-5
> 
> 时间：2012-10-12T11:59:32.117
> 
> 标签：android, xml

我想在android中创建一个新的xml文件。我的代码如下所示。它不起作用

```
File newxmlfile = new File("C:/Users/yunus.oksuz/Desktop/xmlFile.xml");
try
{
newxmlfile.createNewFile();
Toast msg = Toast.makeText(MainActivity.this, "file was created", Toast.LENGTH_LONG);
msg.show();
}
catch(IOException e)
{
Log.e("IOException", "exception in createNewFile() method");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:19:49.533

以下是创建 xml 文件的方法。

```
File f = new File(Environment.getExternalStorageDirectory() + "/yourxmlfilename.xml");

// If file does not exist, clear log count
if(!f.exists())
    f.createNewFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:15:01.517

First thing to know, you cannot even think about having a file in your PC and trying to refer it to your Android application project. They both are totally different.

let me explain the reason.

Consider you have the app installed in a phone, how do you think you can simply access your PC to which you are no more connected. This is not a regular java project you are working on. Android is totally different.

I will tell how it works. Open a emulator and wait for it to load. now,

Go to `DDMs-> File Explorer`

You will be able to see a folder by name "mnt" or "sdcard". Click on it. And now on the top right corner you will have three icons , one to push a file to sdcard and one to delete from sdcard and also one to pull a file from sdcard.

So click on the push a file icon and select your file and copy it to sdcard.

Now you have your file in sdcard. here you have to learn how to read a file from sdcard.

And I am sure there are so many examples available on internet on how you can read a file from sdcard.

Hope this will help you to get it started.

# assembly - 汇编器 kernel32.dll

> ID：12858596
> 
> 赞同：1
> 
> 时间：2012-10-12T12:00:02.597
> 
> 标签：assembly, kernel32

我想找到 kernel32.dll。（win xp 32bit SP3，x86）。

这是我的 MASM 代码：

```
.586p
.model  flat,stdcall

.code

START:
 assume fs:nothing
 xor ebx, ebx               
 mov ebx, fs:[30h ]       
 mov ebx, [ ebx + 0Ch ]  
 mov ebx, [ ebx + 14h ]    
 mov ebx, [ ebx ]           
 mov ebx, [ ebx ]           
 mov ebx, [ ebx + 10h ]    

end START 
```

这在 Olly 中向我展示： `EBX 7C800000 kernel32.7C800000`

它是真正的 kernel32.dll 地址还是我做错了什么？

# php - 电子邮件验证正则表达式问题

> ID：12858601
> 
> 赞同：2
> 
> 时间：2012-10-12T12:00:25.960
> 
> 标签：php, javascript, regex, email-validation

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

任何人都可以帮助我在 javascript 中进行电子邮件验证吗？

这是脚本：

```
Function validateEmail(email)
{
    var splitted = email.match("^(.+)@(.+)$");
    if (splitted == null) return false;
    if (splitted[1] != null)
    {
        var regexp_user = /^\"?[\w-_\.]*\"?$/;
        if (splitted[1].match(regexp_user) == null) return false;
    }
    if (splitted[2] != null)
    {
        var regexp_domain = /^[\w-\.]*\.[A-Za-z]{2,4}$/;
        if (splitted[2].match(regexp_domain) == null)
        {
            var regexp_ip = /^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;
            if (splitted[2].match(regexp_ip) == null) return false;
        } // if
        return true;
    }
    return false;
} 
```

它运行良好，但是当有人输入“rohit@.com”作为电子邮件时，它也应该显示错误。

谁能帮我解决这个问题？（对不起，我是新手，所以忽略任何错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:03:21.390

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

来源：[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

# iphone - UIActivityViewController 中没有服务名称

> ID：12858605
> 
> 赞同：0
> 
> 时间：2012-10-12T12:00:38.253
> 
> 标签：iphone, ios, uikit

我正在尝试使用 UIActivityViewController 从我的应用程序中共享图像。这是源代码：

```
UIImage *sourceImage = [[UIImage alloc] initWithContentsOfFile:[[self currentMedia] path]];
NSArray *activityItems = @[sourceImage];
UIActivityViewController *avc = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
avc.excludedActivityTypes = [NSArray arrayWithObjects:UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll, nil];
[self presentViewController:avc animated:YES completion:nil];
[avc release];
[sourceImage release]; 
```

一切正常，除了一个问题：我在服务选择器中看不到服务名称（电子邮件、Twitter、Facebook 等）。看下面的截图：

![在此处输入图像描述](../Images/b3b6265784ffee86a743de58cc7d28b6.png)

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:41:59.523

我正在使用ARC并且没有这样的问题。就 UIActivityViewController 几乎不依赖多线程和阻塞而言，它可能会影响某些对象的生命周期。因此，我会尝试按照 Apple 的建议切换到 ARC，或者至少为`UIActivityViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:21:56.987

如果您传递`nil`活动类型*并*指定排除类型，则不会显示任何内容。

但是，如果您只传递`nil`第一个参数，所有可用的内置服务类型都会显示出来。

我仍然很难让这个 API 像我想要的那样运行，但这是我确实发现的一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:46:11.190

您可以为此目的使用[UIActivity类。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)`UIActivityViewController`Activity 对象与负责向用户呈现服务的对象结合使用。

查看类`activityTitle`的方法，`UIActivity`它返回描述服务的字符串。

这是[示例项目](https://github.com/bufferapp/buffer-uiactivity)。

希望它可以帮助你。

# rtp - 如何通过 RTP 发送 SDP

> ID：12858611
> 
> 赞同：1
> 
> 时间：2012-10-12T12:00:54.150
> 
> 标签：rtp, sdp

我开发了一个将 RTP 数据包发送到本地 IP 客户端的应用程序。所以客户端必须监听指定的端口（rtp://:@portnumber，在 VLC 上）才能播放流数据。现在，我将开发创建开始流式传输所需的 SDP 文件所需的代码。

我的疑问是，如何将此文件发送给客户端？在 RTP 流的开头？在这一点上真的很n00b。任何帮助都会很有用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:55:10.207

VLC 专门支持建立会话和通信`RTSP`的协议。当然还有本地文件系统 ( )`HTTP``SAP``file://`

所以基本上你可以像这样调用vlc（我无法测试它，但应该是这样的）：

```
vlc file://path/to/sdp-file 
```

或者

```
vlc rtsp://server-path:port/sdpfile.sdp 
```

等等

除了将 SDP 文件存储在本地系统中之外，如果您在服务器计算机上启动并运行 http 服务器，那么 HTTP 可能是最简单的。

# sql-server - 无法创建与数据源“TfsOlapReportDS”的连接

> ID：12858612
> 
> 赞同：5
> 
> 时间：2012-10-12T12:00:54.133
> 
> 标签：sql-server, reporting-services, portal, dashboard

当我在我的 TFS 项目门户网页上打开我的项目仪表板时，我收到以下错误。

**报告服务错误**

> 无法创建与数据源“TfsOlapReportDS”的连接。(rsErrorOpeningConnection) 无法建立连接。确保服务器正在运行。由于目标机器主动拒绝，无法建立连接
> 
> SQL Server 报告服务

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:26:09.687

我检查了 SQL Server Analysis Services 是否正在运行

> 控制面板 → 管理工具 → 服务

该服务正在运行。解决方案是我需要进入

> 开始 → 程序 → Microsoft SQL Server 2008 R2 → SQL Server 配置管理器 → SQL Server 服务。

该 SQL Server Analysis Services 实例未运行。我启动了它，这阻止了上面的错误消息。

# javascript - Jquery隐藏/显示多个表格单元格的表格单元格

> ID：12858617
> 
> 赞同：0
> 
> 时间：2012-10-12T12:01:04.273
> 
> 标签：javascript, jquery

我有一张表，它有 15 列和大约 2000 多条记录。现在我想隐藏/显示最后 5 列。为此，我使用以下 jQuery 语句。

```
 $("table.border-box td.disp").toggle(); 
```

具有“disp”类的 td 将隐藏/显示表格单元格。

但这会导致浏览器出现以下停止脚本错误。

此页面上的脚本可能正忙，或者它可能已停止响应。您现在可以停止脚本，也可以继续查看脚本是否会完成。

```
Script: http://localhost:8080/XXX/resources/js/jquery/jquery-1.6.4.js:4055 
```

我该如何优化它并解决浏览器错误。（浏览器：Mozilla Firefox：15.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:12:16.823

尝试：

```
$("table.border-box").find(".disp").toggle(); 
```

还要缓存它以供下次使用，如下所示：

```
tds = $("table.border-box").find(".disp");//only do expensive operation once

tds.toggle();
...
...
tds.toggle(); 
```

这样，您将避免使用用于复杂选择器的性能损失，最好嵌套简单的选择器，如“.class”，以便 jquery 在内部使用更高的[性能](http://ejohn.org/blog/learning-from-twitter/)。`querySelectorAll()``getElementsByTagName()`

显然，如果这还不够，你应该重构你的代码，就像其他答案所暗示的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:15:03.717

您共享的代码非常好。

我创建了一个 JS Fiddle 来测试这个：http: [//jsfiddle.net/3z7Ze/](http://jsfiddle.net/3z7Ze/)

在尝试显示/隐藏列之前，请确保您的记录已完全加载。并且当时没有运行其他脚本（可能与显示/隐藏功能冲突）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:07:22.997

正如其他人已经提到的那样，您应该将结果分成多个页面。但是如果你不能这样做，也许另一种但不是很好的方法是手动遍历每一行并异步触发切换事件。

# android - 如何在android中BroadCast接收器的Onreceive中获取全局数据

> ID：12858618
> 
> 赞同：1
> 
> 时间：2012-10-12T12:01:05.353
> 
> 标签：android, sms, broadcastreceiver, global

将全局数据放入广播接收器类时出现问题，

这是我的编码，帮助我进入广播接收器类

```
public class Global extends Application{

String mobileNumber;
public String getMobileNumber() {
    return mobileNumber;
}
public void setMobileNumber(String mobileNumber) {
    this.mobileNumber = mobileNumber;
} 
```

这是我的接收器类，

```
public class TextMessageReceiver extends BroadcastReceiver{

Global global;
Context context;
int count;

String number;
public void onReceive(Context context, Intent intent)
{
      global=(Global)context;
      number = global.getMobileNumber();

    Bundle bundle=intent.getExtras();
    Object[] messages=(Object[])bundle.get("pdus");
    SmsMessage[] sms=new SmsMessage[messages.length];

    for(int n=0;n<messages.length;n++){
        sms[n]=SmsMessage.createFromPdu((byte[]) messages[n]);
    }

    for(SmsMessage msg:sms){
        if(msg.getOriginatingAddress().endsWith(number))
        {
            SMS.updateMessageBox(msg.getOriginatingAddress(),msg.getMessageBody(),context);
        /*SMS.updateMessageBox("\nFrom: "+msg.getOriginatingAddress()+"\n"+
                "Message: "+msg.getMessageBody()+"\n");*/
            /*((SMS) context).delete();*/
        abortBroadcast();
        }
    }
} 
```

}

我需要从 getter setter 获取手机号码，但我不能，如何获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:02:22.553

改变

```
global=(Global)context; 
```

关注：

```
global=(Global)context.getApplication(); 
```

现在访问全局类的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:06:38.820

如果您在整个应用程序中需要该手机号码，您可能需要使用[sharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)并将其存储在那里。

像这样保存手机号码

```
SharedPreferences sharedPreferences = getPreferences(context, MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putString("mobilenumber", value);
editor.commit(); 
```

并在您的接收器中像这样检索它：

```
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
String number = sharedPreferences.getString("mobilenumber", ""); 
```

重要的是要知道共享首选项会被保存，即使您离开应用程序也是如此。

# android - Fragment之间的通信

> ID：12858619
> 
> 赞同：3
> 
> 时间：2012-10-12T12:01:15.163
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

我有默认的 Master-Detail 流，它是在创建新项目时自动创建的。我的问题是。当我向详细信息侧添加按钮时。有没有办法通过按下那个按钮来更新我的列表？换句话说，ItemDetailFragment 和 ItemListFragment 可以通信吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:09:45.570

是的，只需通过活动与听众交流。

您的活动：

```
public class MyActivity extends FragmentActivity implements OnFragmentClickListener {
    @Override
    public void OnFragmentClick(int action, Object object) {
        switch(action) {
        }
    }
} 
```

监听器类：

```
 public interface OnFragmentClickListener {
        public void OnFragmentClick(int action, Object object);
    } 
```

然后，您的片段将在代码中的某处具有以下内容以实现接口：

```
 @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnFragmentClickListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement listeners!");
        }
    } 
```

然后你的片段像这样相互通信：片段A->活动->片段B。您的活动可以直接在片段上调用方法，而无需担心同步问题。

来自片段 a 的调用示例：

```
mListener.OnFragmentClick(GLOBAL_ACTION_KEY someObject); 
```

活动然后处理：

```
public class MyActivity extends FragmentActivity implements OnFragmentClickListener {
    @Override
    public void OnFragmentClick(int action, Object object) {
        switch(action) {
            case GLOBAL_ACTION_KEY:
                // you call fragmentB.someMethod();
                break;
        }
    }
} 
```

# spring - Spring、Infinispan 和 JBoss 7 集成

> ID：12858624
> 
> 赞同：3
> 
> 时间：2012-10-12T12:01:20.897
> 
> 标签：spring, caching, jboss, jboss7.x, infinispan

我正在尝试使用 JBoss 7 Infinispan 缓存作为两个基于 spring 部署的战争应用程序的通信形式（稍后会更多）。我在访问 JBoss 托管缓存管理器时遇到问题。

当我使用

```
DefaultCacheManager cacheManager = new DefaultCacheManager();
cache = cacheManager.getCache(); 
```

在两个应用程序中的每一个上，我都有两个单独的缓存。有什么方法可以访问 JBoss 服务器创建的缓存而不使用 @ManagedBean 注释和 Java EE 标准？

* * *

完成。感谢 Kazaag，我使用了 JNDI。

```
JndiTemplate jndiTemplate = new JndiTemplate();
jndiTemplate.lookup("java:jboss/infinispan/container/cluster"); 
```

我有一个 DefaultEmbeddedCacheManager 类强制转换异常的众所周知的问题。我使用了反射。

```
Map<Object, Object> cache;
JndiTemplate jndiTemplate = new JndiTemplate();
Object cacheManager;
try {
    cacheManager = (Object) jndiTemplate.lookup("java:jboss/infinispan/container/cluster");
    Method method = cacheManager.getClass().getMethod("getCache");
    cache = (Map) method.invoke(cacheManager);
} catch (Exception e) {
    e.printStackTrace();
    return;
} 
```

此外，我必须将容器标记为急切地开始。

```
 <cache-container name="cluster" aliases="ha-partition" default-cache="default">
        <transport lock-timeout="60000"/>
        <replicated-cache name="default" mode="SYNC" start="EAGER" batching="true">
            <locking isolation="REPEATABLE_READ"/>
        </replicated-cache>
    </cache-container> 
```

尽管有不同的类加载器，但缓存会被复制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:16:38.077

如果每个应用程序都使用自己的缓存管理器，它们将被单独缓存。

您可以通过 Spring 的 JNDI 支持检索应用服务器管理的缓存容器（JNDI 名称为`java:jboss/infinispan/my-container-name`）。因此 Spring 将负责确保每个部分都使用相同的容器。

我不是 100% 肯定你会得到相同的缓存，它可能会返回一个特定于应用程序的缓存（这 2 个应用程序数据对象实际上来自不同的类加载器）。

嵌入式缓存可能并不意味着应用程序间的通信。您可能需要使用客户端/服务器范例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:27:55.143

有点晚了，但是可以在[此处找到有关通过 JNDI 访问 infinispance 缓存存储的信息](https://docs.jboss.org/author/display/ISPN/Getting+Started+Guide+-+JBoss+AS+7?_sscc=t)

通过 JNDI 查找，我得到了 CacheContainer

```
<jee:jndi-lookup id="cache1" 
    jndi-name="java:jboss/infinispan/container/jbossas7-quickstart" 
    cache="true" resource-ref="false" lookup-on-startup="true" /> 
```

我通过二传手注入

```
public void setContainer(CacheContainer container) {
    this.container = container;
} 
```

现在我可以访问缓存存储了。注意[这里的建议](https://docs.jboss.org/author/display/ISPN/Getting+Started+Guide+-+JBoss+AS+7?_sscc=t)

```
@Resource(lookup="java:jboss/infinispan/container/my-container-name")
@Resource(lookup="java:jboss/infinispan/cache/my-container-name/my-cache-name") 
```

不要在我的 Spring Bean 中工作

# jsf - 播放视频时如何关闭primefaces灯箱？

> ID：12858625
> 
> 赞同：1
> 
> 时间：2012-10-12T12:01:26.980
> 
> 标签：jsf, primefaces

我正在使用带有 Primefaces 组件的 JSF。primefaces的灯箱播放视频时，右上角没有显示关闭按钮。我不想使用 Escape 按钮或在灯箱外单击。我只想提供一个关闭按钮，或者我只想让用户看到灯箱的关闭按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:39:58.847

**试试这个**

```
<p:lightBox id="myLightBoxId" widgetVar="myLightBoxWidgetVar" >
    <h:outputLink value="#">  
        <h:outputText value="SHOW"/>  
    </h:outputLink> 
    <f:facet name="inline">  
        <p:button value="HIDE" onclick="myLightBoxWidgetVar.hide();return false;" />
    </f:facet>  
</p:lightBox> 
```

# java - Java Memcached 不跨实例复制条目

> ID：12858630
> 
> 赞同：1
> 
> 时间：2012-10-12T12:01:42.207
> 
> 标签：java, memcached, load-balancing

我正在使用 xmemcached-1.3.5 jar 版本的 MemCache 服务器。

现在，我在不同的机器上有这个服务器的两个实例。我正在使用 xmemcached-1.3.5 jar 通过我的 java 应用程序进入 memcache-server。

当两台服务器都启动时，仅在其中一个 MemCache 实例上创建条目。

是否需要进行任何配置才能将条目复制到两个实例上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:24:10.760

Memcached 不提供复制。如果要复制缓存的数据，则需要调查 repcached。

# android - 从该列表中滑动一项时在列表视图中显示按钮

> ID：12858635
> 
> 赞同：0
> 
> 时间：2012-10-12T12:01:59.683
> 
> 标签：android, swipe

我正在开发一个 android 应用程序，我想在用户滑动特定的列表项时显示一个按钮。

这是我的 xaml，其中有一个按钮和一些其他项目。我在我的列表视图中使用这个 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#f1eff0">

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:visibility="visible" android:id="@+id/tb1">

        <TableRow>
            <TextView android:id="@+id/createdBy" android:typeface="normal" 
                android:singleLine="true" android:textSize="14sp" android:textStyle="bold"
                android:layout_width="wrap_content" android:textColor="#000000"
                android:layout_height="wrap_content" />
        </TableRow>
        <TableRow>
            <TextView android:id="@+id/postText" android:typeface="normal"
                android:singleLine="true" android:textSize="14sp" android:textStyle="normal"
                android:layout_width="wrap_content" android:textColor="#000000"
                android:layout_height="wrap_content" />
                <Button android:id="@+id/btnDelete" android:textColor="#ffffff" android:visible="Gone"
                android:background="@color/hover_button" android:text="Delete"
                android:textSize="14sp" android:textStyle="normal" android:typeface="normal"
                android:layout_marginLeft="320dp" />
        </TableRow>
        <TableRow>
            <TextView android:id="@+id/postDate" android:typeface="normal"
                android:singleLine="true" android:textSize="14sp" android:textStyle="normal"
                android:layout_width="wrap_content" android:textColor="#000000"
                android:layout_height="wrap_content" />
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

我已经在 google 上搜索过，但无法理解我是 android 新手的示例，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:16:46.473

以下链接将帮助您在列表视图中实现滑动删除操作。

[在列表视图中滑动删除操作](http://andhradroid.wordpress.com/2012/07/05/how-to-implement-swipe-delete-operation-in-android-like-iphone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T04:38:52.350

我建议您实施 47Degree Swipe List View (Works Ultimate)

在此处获取有关实施滑动列表视图的更多信息，

[在 Android 上滑动 ListView 项目，如 iPhone 邮件应用程序](https://stackoverflow.com/questions/19391919/slide-listview-item-on-android-like-iphone-mail-app/20036754#20036754)

[需要帮助实现47度Android-SwipeListView](https://stackoverflow.com/questions/19848610/need-help-to-implement-47degree-android-swipelistview)

如果您发现它们有用，请接受并投票。

# plsql - 清理作为动态 PL/SQL 命令一部分的用户输入

> ID：12858638
> 
> 赞同：3
> 
> 时间：2012-10-12T12:02:16.747
> 
> 标签：plsql, user-input, dynamic-sql, sanitization, in-operator

我有一个由用户填写的表，它的 VARCHAR2 记录包含可执行 PL/SQL 代码“IN(user_input)”的一部分。我想知道如何清理这些用户输入，或者重新编写它以提高效率。到目前为止，我所有的想法都失败了。例如：

*   在这种情况下不接受绑定变量
*   DBMS_ASSERT.enquote_literal 总是引发异常等。

非常感谢您的帮助。

```
/* A "MY_PARAMETER" column is part of SQL: ...WHERE MY_DATA IN(MY_PARAMETER)... */
CREATE TABLE my_parameter_table (
       "ID" INTEGER NOT NULL ENABLE,
       "MY_PARAMETER" VARCHAR(255) NOT NULL ENABLE   
)

INSERT INTO my_parameter_table ("ID","MY_PARAMETER") VALUES (1,'6,7,8');
INSERT INTO my_parameter_table ("ID","MY_PARAMETER") VALUES (2,'''b'',''g'',''k''');
INSERT INTO my_parameter_table ("ID","MY_PARAMETER") VALUES (3,'SELECT dummy FROM dual'); -- return "X"

/* Tested table with data */
CREATE TABLE my_data_table (
       "ID" INTEGER NOT NULL ENABLE,
       "MY_DATA" VARCHAR(255) NOT NULL ENABLE,
       "MY_RESULT" VARCHAR(255) NOT NULL ENABLE   
);

INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (1,'a','NOT');
INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (2,'b','THIS'); --WILL PASS
INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (3,'c','NOT');
INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (4,'X','IS'); --WILL PASS
INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (5,'Y','NOT');
INSERT INTO my_data_table ("ID","MY_DATA","MY_RESULT") VALUES (6,'Z','CORRECT'); --WILL PASS

/* Result table where results are inserted */
CREATE TABLE my_result_table (
       "MESSAGE" VARCHAR(255) NOT NULL ENABLE   
);

/* ------------------------------------------- */

DECLARE
    where_condition VARCHAR2(1000) := '';
    v_query VARCHAR2(1000) := '';
    insert_or VARCHAR2(5) := '';

    CURSOR test_parameter_cur IS
        (
          SELECT * FROM my_parameter_table            
        );
    test_parameter_rec test_parameter_cur%ROWTYPE;

BEGIN

    /* Read all parameters and build an WHERE condition */
    OPEN test_parameter_cur;
    LOOP 
        FETCH test_parameter_cur INTO test_parameter_rec; 
        EXIT WHEN test_parameter_cur%NOTFOUND;

        /* Condition check can be any type. Varchar, number, date or some subselect */
        IF test_parameter_rec.ID = 1 THEN where_condition := where_condition || insert_or || 'd.ID IN('|| test_parameter_rec.MY_PARAMETER ||')';
        ELSE where_condition := where_condition || insert_or || 'd.MY_DATA IN('|| test_parameter_rec.MY_PARAMETER ||')';
        END IF;
        insert_or := ' OR '; -- after first run the "OR" operator is inserted in front of each where condition 

    END LOOP; 
    CLOSE test_parameter_cur; 

v_query := 'INSERT INTO my_result_table(MESSAGE) 
           (SELECT d.MY_RESULT FROM my_data_table d
           WHERE '|| where_condition ||')';

EXECUTE IMMEDIATE v_query;
COMMIT; 
END;

/* Now the my_result_table contains 3 records: THIS, IS, CORRECT */
SELECT * FROM my_result_table;

DROP TABLE my_parameter_table; 
DROP TABLE my_data_table; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:03:15.960

看看这里：[https ://blogs.oracle.com/aramamoo/entry/how_to_split_comma_separated_string_and_pass_to_in_clause_of_select_statement](https://blogs.oracle.com/aramamoo/entry/how_to_split_comma_separated_string_and_pass_to_in_clause_of_select_statement)

就像'，' - 分隔列表的魅力。我建议 TRIM() 结果从结果中删除尾随和前导空格。

您可以将 select 语句用作 in-clause 中的子选择。

# macos - Mac App Rejection - Safari 的临时例外授权密钥

> ID：12858642
> 
> 赞同：2
> 
> 时间：2012-10-12T12:02:33.573
> 
> 标签：macos, applescript, mac-app-store, appstore-sandbox, entitlements

让我们考虑一个应用程序使用 AppleScript 执行以下步骤，以便自动登录到某个网站：

1-打开“Safari”并导航到网站

2- 使用 JavaScript 填写用户名和密码字段
`do JavaScript " document.getElementById('password_input').value = 'userPassword' "`

3- 使用 JavaScript 提交表单 --- `do JavaScript " document.forms['login_form'].submit() "`

对于沙盒 Mac 应用程序，必须为“Safari”添加**com.apple.security.temporary-exception.apple-events**授权密钥，以便执行上述 AppleScript 程序。

```
<key>com.apple.security.temporary-exception.apple-events</key>
<array>
<string>com.apple.safari</string>
</array> 
```

一切都以这种方式运行良好，没有任何问题。

这是我的问题：

应用程序是否因为 Safari 的这种临时异常使用而被拒绝？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T16:44:26.960

等待了一个多月后，我的应用程序获得了批准。

在 iTunesConnect 的权利部分，我简要解释了为什么我使用此权利密钥，并且我的应用程序毫无问题地获得了批准。

所以我可以说 Safari 的临时异常使用**不是**拒绝的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:06:38.847

看起来像：

[https://github.com/TheRealKerni/QuincyKit/issues/109](https://github.com/TheRealKerni/QuincyKit/issues/109)

特别是看Ishuo的评论

# java - 使用文件修订填充树

> ID：12858646
> 
> 赞同：-3
> 
> 时间：2012-10-12T12:02:59.160
> 
> 标签：java

`要求是必须用文件的修订版填充树。

我有一个命令可以从 MKS（版本控制系统）获取特定文件的所有修订。

在java中使用以下命令

```
Process p = Runtime.getRuntime().exec("cmd /C "+cmd); 
```

我得到了 file.c 的所有版本。现在我想将数据填充到树结构中。我怎么做？

```
try { 
 List<String> lVersions = new ArrayList<String>();
 Process p = Runtime.getRuntime().exec("cmd /C "+cmd); 
 BufferedReader in = new BufferedReader( new InputStreamReader(p.getInputStream()));
 String line = null; 
 while ((line = in.readLine()) != null)
 { 
   lVersions .add(line); 
 }
 }catch (IOException e) 
 { e.printStackTrace(); 
 } 
```

lVersion 包含以下输出。它显示特定文件的所有修订。我需要将此信息填充到树结构中。

```
1.1
1.1.1.1
1.1.1.2
1.1.1.3
1.1.1.4
1.2
1.3 
```

我创建了一个树类

公共类树{

```
private List<Tree> children = new ArrayList<Tree>();
private String label;
private Tree parent;
private String root;

public Tree() {
    super();
    children = new ArrayList<Tree>();
    }

    public Tree(String label) {
    this();
    setData(label);
    }

    public void setRoot(String root){
    this.root= root;
}
public String getRoot(){
    return root;
}
public void addChild(Tree child) {

    child.setParent(this);
    children.add(child);
}

public void removeChild(Tree node) {
    children.remove(node);
    node.setParent(null);
}

public void setParent(Tree parent) {
    this.parent = parent;
}

public Object[] getChildren() {
    return children.toArray();
}

public Object getParent() {
    return parent;
}

public String getLabel() {
    return this.label;
}
public void setData(String label) {
    this.label = label;
    } 
```

}

我必须生成以下树结构并记住每个节点的父节点。我不是要代码，但一些关于如何开始和继续的指示会非常有帮助！！！！

```
 1.1
 1.2    1.1.1.1
 1.3    1.1.1.2
 1.4    1.1.1.3
        1.1.1.4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:18:33.793

您将需要阅读命令的输出。`ProcessBuilder`请参阅用于获取流程输出的 API `InputStream`（流程的输出 == 您的输入，对吗？）

将输出解析为树节点。每个节点都有一个`parent`引用和一个`children`包含子节点的列表。

# symfony - 扩展 FOSUserBundle 以便拥有两种类型的用户（两个单独的表中的两个实体）？

> ID：12858647
> 
> 赞同：1
> 
> 时间：2012-10-12T12:03:03.777
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我正在尝试扩展 FOSUserBundle，以便我可以处理两种（甚至更多）类型的用户，它们将共享公共属性（如用户名和电子邮件，从 FOSUserBundle 继承），并且也有自己的特定差异（这将住在不同的桌子上）。

你能建议一种方法来实现所描述的要求吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:03:19.757

我终于设法处理了这个问题。当然，在 Symfony 社区的帮助下......

我使用了[PUGX](https://github.com/PUGX) / [PUGXMultiUserBundle](https://github.com/PUGX/PUGXMultiUserBundle)，它通过添加处理不同类型用户的功能来扩展 FOSUserBundle。它的魔力是基于教义2 继承，所以它目前只支持ORM db 驱动程序（如bundle 的文档中所述）。

干得好 PUGX，

谢谢！

# .net - 使用 Nancy + TinyIoC 通过 Quartz JobFactory 注入依赖

> ID：12858648
> 
> 赞同：2
> 
> 时间：2012-10-12T12:03:06.250
> 
> 标签：.net, quartz.net, nancy, tinyioc

所以我使用 Nancy + TinyIoC 来运行一个小型网络服务。这行得通。现在我需要创建一个 Quartz 作业，它需要一些相同的依赖项，理想情况下我想使用 Nancy 的 TinyIoC 来注入这些，如[Quartz Tutorial](http://quartznet.sourceforge.net/tutorial/lesson_3.html)中所述。

我发现了一个使用 Windsor 的示例，他们在其中直接访问 IoC 容器，但根据此处提出的类似问题，在 Nancy 看来，这是粗略且不必要的。

那么我的问题必须是，这样做的正确方法是什么？我的 JobFactory 的代码如下所示：

```
public class MyJobFactory : IJobFactory
{
    public IJob NewJob(TriggerFiredBundle bundle, IScheduler scheduler)
    {
        return (IJob) TinyIoCContainer.Current.Resolve(bundle.JobDetail.JobType);
    }
} 
```

但这不会返回具有正确注入实例的作业，而是返回具有依赖项的新实例的作业。（应该是单例，这让我相信 TinyIoCContainer.Current 返回的 TinyIoCContainer 与 Nancy 使用的容器不同）。

**更新**
我正在通过 Nancy Bootstrapper 设置 IoC 容器：

```
public class MyBootStrapper : DefaultNancyBootstrapper
{
    protected override void ConfigureApplicationContainer(TinyIoCContainer container)
    {
        var push = new PushService();
        // object initialization and Event Registration snipped
        container.Register(cp);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:37:32.100

> 让我相信 TinyIoCContainer.Current 返回的 TinyIoCContainer 与 Nancy 使用的容器不同）。

得到它：-) .Current 是一个静态实例，我们可能应该从 tinyioc.cs 文件的 Nancy 版本中删除它 - 它与引导程序使用的实例不同。

如果您绝对*必须*使用服务位置，并且无法只使用构造函数注入，则可以在引导程序中覆盖 GetApplicationContainer 方法并返回 .Current 实例，以便 Nancy 使用它。默认情况下我们不使用它，因为我们不建议这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:15:52.060

# Update

I'm sorry. I thought your Quartz job was in a separate project and that you were using it to schedule calls to your Nancy-based webservice. I know understand the Quartz job is *inside* the Nancy project.

I think you can disregard my original answer :-)

# Original answer

Do you specify you want those dependencies registered as a singleton? You can do it like this:

```
TinyIoCContainer.Current.Register<SomeType>().AsSingleton(); 
```

I you are using the `AutoRegister` functionality and the dependencies you use aren't interfaces or abstract class types and you want *all* your dependencies to be singletons, you will need to the change the `GetDefaultObjectFactory` in TinyIoC.

The default looks like this:

```
private ObjectFactoryBase GetDefaultObjectFactory(Type registerType, Type registerImplementation)
{
    //#if NETFX_CORE
    //if (registerType.GetTypeInfo().IsInterface() || registerType.GetTypeInfo().IsAbstract())
    //#else
    if (registerType.IsInterface() || registerType.IsAbstract())
    //#endif
        return new SingletonFactory(registerType, registerImplementation);

    return new MultiInstanceFactory(registerType, registerImplementation);
} 
```

As you can see it registers interface dependencies and abstract class dependencies to be resolved using a `SingletonFactory`. Everything else is registered using a `MultiInstanceFactory`.

You can then change it to this:

```
private ObjectFactoryBase GetDefaultObjectFactory(Type registerType, Type registerImplementation)
{
    return new SingletonFactory(registerType, registerImplementation);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T18:34:30.967

我认为@Steven 的信息很棒。然后，我得到了另一个解决方案，将 Bootstrap IoC 公开为静态属性。

```
public class Bootstrapper : DefaultNancyBootstrapper
{
    public static TinyIoCContainer Container { get; private set; }

    protected override void ConfigureApplicationContainer(TinyIoCContainer container)
    {
        Container = container;
    }
} 
```

使用时...

```
Bootstrapper.Container.Resolve(...) 
```

# delphi - 以编程方式将列添加到 TdxDBGrid（Devexpress 的 Expressquantumgrid）

> ID：12858654
> 
> 赞同：1
> 
> 时间：2012-10-12T12:03:29.700
> 
> 标签：delphi, delphi-4, quantumgrid

对于一个客户，我一直在为 DevExpress 的这个非常旧的版本（2.1）的 ExpressQuantumGrid 进行开发。在 Delphi 4 中。我找不到任何关于它的文档。

基本上我只需要创建一堆 TdxDBGridMaskColumn 并在运行时将它们“插入”到网格（TdxDBGrid）中。从代码完成弹出窗口中，我无法弄清楚如何。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:23:20.700

我们有一个使用 Delphi 5 和 DevExpress v3 的旧应用程序，代码可能不完全相同，但应该可以帮助您入门。

可以创建任何类型的列的函数（例如 TdxDBDateColumn）：

```
function CreateColumn(const aField: string; aColClass: TdxDBTreeListColumnClass): TdxDBTreeListColumn;
var
begin
  Result := dxGrid.CreateColumn(aColClass);
  Result.Name := dxGrid.Name + aField;
  TdxDBGridColumn(Result).DisableFilter := True;
  TdxDBGridColumn(Result).DisableGrouping := True;
  TdxDBGridColumn(Result).Alignment := taRightJustify;
  TdxDBGridColumn(Result).FieldName := aField;
  TdxDBGridColumn(Result).Caption := aField;
  TdxDBGridColumn(Result).Width := 70;
end; 
```

然后你可以像这样调用这个函数：

```
NewColumn := CreateColumn('Username', TdxDBGridColumn); 
```

# mysql - 如何获取两列之间的日期范围？

> ID：12858655
> 
> 赞同：1
> 
> 时间：2012-10-12T12:03:28.973
> 
> 标签：mysql

如何获取两列之间的日期范围？

```
SELECT
     ccm.`date_from`
    , ccm.`date_to`
    , ccd.`rate`
FROM
    `currency_conversion_master` ccm
    , `currency_conversion_details` ccd

WHERE ccm.conv_m_id=ccd.conv_m_id AND DATE(date_from)>=DATE('2012-10-12')  AND DATE(date_to) <= DATE('2012-10-14') 
```

这样查询在我输入 2012-10-13 时不会过滤记录。

我的意思是

```
DATE(date_from)>=DATE('2012-10-13')  AND DATE(date_to) <= DATE('2012-10-14') 
```

我该怎么做呢？

这是带有数据的数据库结构

```
date_from   date_to
2012-10-12  2012-10-14
2012-10-15  2012-10-19
2012-10-20  2012-10-30 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:05:15.080

利用

```
SELECT
    ccm.`date_from`,
    ccm.`date_to`,
    ccd.`rate`
FROM
    `currency_conversion_master` ccm
INNER JOIN `currency_conversion_details` ccd 
ON ccm.conv_m_id=ccd.conv_m_id
WHERE '2012-10-12' between DATE(date_from) and DATE(date_to) 
```

# regex - 斯卡拉正则表达式。奇怪的正则表达式

> ID：12858656
> 
> 赞同：2
> 
> 时间：2012-10-12T12:03:30.197
> 
> 标签：regex, scala

请查看下面的 REPL 会话。两个正则表达式之间的唯一区别是方括号中的字符顺序。因此，两者都应该产生相同的输出。由于某种原因，第二个正则表达式省略了第一个序列 ( `123`)。这里发生了什么事？:)

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
Type in expressions to have them evaluated.
Type :help for more information.

scala> """[^+-.,><\[\]]+""".r.findAllIn("123]asdf") foreach { println }
123
asdf

scala> """[^+-><\[\].,]+""".r.findAllIn("123]asdf") foreach { println }
asdf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:06:20.490

`-`方括号内也应该转义。例如，它用于指定`[0-9]`匹配所有数字的范围。

# iphone - 打开 UIPopoverController 时应用程序崩溃

> ID：12858657
> 
> 赞同：0
> 
> 时间：2012-10-12T12:03:34.027
> 
> 标签：iphone, objective-c, uitableview

我正在打开一个**.xib 文件**，其中包含`UITableView`我的一个文件，`UIPopViewController`并且我已经给出了 .xib 的数据源和委托方法`UIATableView`。

但是在调用 cellForRowAtIndexPath 方法后，我的应用程序崩溃了。

**我的代码如下：**

```
- (IBAction)btnOilChangePressed:(id)sender {
    OilChangeView *oilVC = [[OilChangeView alloc] initWithNibName:@"OilChangeView" bundle:nil];

       UIPopoverController *popView = [[UIPopoverController alloc] initWithContentViewController:oilVC];

        [popView setPopoverContentSize:CGSizeMake(480, 250)];
        [popView presentPopoverFromRect:btnOilChange.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];

} 
```

以下是 OilChangeView.m 文件上的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrayInfo count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [arrayInfo objectAtIndex:indexPath.row];
    NSLog(@"text:%@",[arrayInfo objectAtIndex:indexPath.row]);
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    // Configure the cell...

    return cell;
} 
```

# ssrs-2008 - SSRS 中的过滤

> ID：12858660
> 
> 赞同：1
> 
> 时间：2012-10-12T12:03:56.077
> 
> 标签：ssrs-2008

我正在尝试在选择多项选择 ListBox 时选择一条记录的条件下过滤我的参数。如果一个人没有选择记录，它默认选择“未选择”选项。问题是：

```
=IIF(
     InStr(Join(Parameters!ProvinceID.Value,”,”),0),
     True,
     IIF(
         InStr(Join(Parameters!ProvinceID.Value,”,”),
               Fields!ProvinceID.Value
         )<>0,
         True,
     False)
 ) 
```

结果不允许使用适当的过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:18:45.177

尝试：

```
=IIf(
         InStr(Join(Parameters!ProvinceID.Value, ", "), "0") > 0
         ,True
         ,IIf(
                InStr(Join(Parameters!ProvinceID.Value, ", "), Fields!ProvinceID.Value) > 0,
                ,True
                ,False
             )
     ) 
```

* * *

`InStr`将返回搜索字符串开始位置的整数值（如果找到）。因此，您的布尔测试（函数的第一个参数`IIf()`）需要确定是否返回了等于或大于 1 的数字。

*   在搜索字符串时，字符串中`0`要搜索的内容必须编码为`"0"`.
*   如果`Fields!ProvinceID.Value`返回一个整数，那么它也必须使用如下`CStr()`函数转换为字符串：

* * *

```
=IIf(
         InStr(Join(Parameters!ProvinceID.Value, ", "), "0") > 0
         ,True
         ,IIf(
                InStr(Join(Parameters!ProvinceID.Value, ", "), CStr(Fields!ProvinceID.Value)) > 0,
                ,True
                ,False
             )
     ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:09:48.117

```
InStr(Join(Parameters!ProvinceID.Value,”,”),0) 
```

0不应该是“0”吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T16:29:44.090

你拿什么来比较？通常 IIF 需要类似 =IIF(Fields!ListBox1.Value = "value", "option1", "option2")

=IIF（字段！Eyes.Value =“绿色”，“绿色”，“其他颜色”）

# testing - 如何记录单击图像时打开的下拉项？

> ID：12858666
> 
> 赞同：0
> 
> 时间：2012-10-12T12:04:08.270
> 
> 标签：testing, automation, sahi

在我的应用程序中，我有注销链接，因为它在 gmail 帐户中。我必须单击下拉图像才能看到注销链接，当我尝试使用 sahi 工具记录时，这不是记录，并且我无法使用 sahi 工具记录浏览和上传事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:52:41.280

您可以通过按住 ctrl 按钮并将鼠标悬停在 sahi 控制器将在 Accessor 文本框中显示元素名称的特定项目上来记录项目。复制该脚本并将其粘贴到您的脚本文件中并尝试运行

# php - 从php中的soapenv信封xml中提取值

> ID：12858667
> 
> 赞同：2
> 
> 时间：2012-10-12T12:04:28.137
> 
> 标签：php, xml, soap

我是 XMl 的新手。我想提取以下 xml 中的状态值。我不知道如何在 php 中执行此操作。这是我从 API 调用中得到的响应。

```
<soapenv:envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:body>
    <savesalesorderresponse xmlns="http://www.smartturn.com/services/OccamService/sales-order">
    <uploadresponse>
    <ns1:externalrefid xmlns:ns1="http://www.smartturn.com/services/occamtypes">007</ns1:externalrefid>
    <ns2:status xmlns:ns2="http://www.smartturn.com/services/occamtypes">SUCCESS</ns2:status>
    <ns6:systemid xmlns:ns6="http://www.smartturn.com/services/occamtypes">SO-059241</ns6:systemid>
    </uploadresponse>
    </savesalesorderresponse>
    </soapenv:body>
    </soapenv:envelope> 
```

解决方案代码将不胜感激提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:45:45.763

您需要做的就是注册命名空间`registerXPathNamespace`

```
$xml = new  SimpleXMLElement($data);
$xml->registerXPathNamespace("ns", "http://www.smartturn.com/services/occamtypes");
$status = $xml->xpath('//ns:status');
$status = (string)  $status[0];
print($status); 
```

输出

```
SUCCESS 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T12:07:18.947

最简单的方法是使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)

# c# - 字符串颜色名称到 C# 中的字符串颜色十六进制值

> ID：12858668
> 
> 赞同：0
> 
> 时间：2012-10-12T12:04:35.903
> 
> 标签：c#, colors

我正在尝试获取作为字符串传递的颜色的十六进制值。例如，

```
private string HexColor(string colorName) // like "Red"
{

 // returns hex value like "12345"
} 
```

我得到了将 Windows.UI.Color 转换为其十六进制值的链接。但不适用于字符串颜色名称来着色十六进制值。在此先感谢您的帮助。

更新：对于地铁应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:06:31.157

[Color.fromName](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromname.aspx)从预定义颜色的指定名称创建一个 Color 结构，然后[`ToArgb`](http://msdn.microsoft.com/en-us/library/system.drawing.color.toargb.aspx)：

```
Color.FromName(colorString).ToArgb().ToString("X8").Substring(2,6); 
```

`ToString("X8")`从整数类型创建十六进制值作为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:09:03.250

```
Color c = Color.Red;
string hex = c.R.ToString("X2") + c.G.ToString("X2") + c.B.ToString("X2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:09:34.953

你可以使用这个功能

```
private string ConvertColorStringToHex(string colorString){
return Color.FromName(colorString).ToArgb().ToString("X8").Substring(2,6);
} 
```

# python - 处理来自 gunicorn 的请求

> ID：12858674
> 
> 赞同：18
> 
> 时间：2012-10-12T12:04:55.720
> 
> 标签：python, linux, centos, wsgi, gunicorn

尝试在 Rackspace.com 上设置服务器。

做了以下几件事：

*   已安装 Centos 6.3
*   安装 Python 2.7
*   使用主页上的“快速启动”安装 gunicorn：[gunicorn.org/](http://gunicorn.org/)

在快速启动中，似乎初始化了一个“hello world”应用程序：

创建文件“ **myapp.py** ”：

```
（教程）$ vi myapp.py
（教程）$ cat myapp.py

```

“ **myapp.py** ”的内容

```
def app(environ, start_response):
   data = "Hello, World!\n"
   start_response("200 OK", [
       ("Content-Type", "text/plain"),
       ("Content-Length", str(len(data)))
   ])
   return iter([data]) 
```

由于我对服务器知之甚少，我不知道下一步该做什么。我尝试在浏览器中输入服务器的 IP 地址，但这似乎会导致超时。

我不确定是否有：

*   其他需要安装的东西。gunicorn 网站上的“[部署](http://gunicorn.org/deploy.html)”下提到了 Nginx 。看起来 Nginx 是一个代理服务器，这让我很困惑，因为我认为 gunicorn 是一个服务器。不知道为什么我需要两台服务器？
*   需要在 gunicorn 中配置的东西
*   需要在服务器本身上配置的东西
*   为了实际服务请求而需要完成的其他事情

什么是下一个步骤？

非常感谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-12T12:44:41.777

因为 gunicorn 是您案例中的 Web 服务器，所以 Nginx 将充当反向代理，将 HTTP 请求从 Nginx 传递到 gunicorn。

因此，我将在这里介绍在同一台机器上运行简单的 Nginx 和 Gunicorn 配置的步骤。

*   **从 nginx 配置开始**

转到您的**/etc/nginx/nginx.conf**并在 http{} 下确保您有： include /etc/nginx/site-enabled/*;

```
http{
    # other configurations (...)
    include /etc/nginx/sites-enabled/*;
} 
```

现在，在 /etc/nginx/sites-enabled/mysite.conf 中包含一个文件，您将在其中将您的请求代理到您的 gunicorn 应用程序。

```
server {
    listen 80 default; # this means nginx will be 
                       # listening requests on port 80 and 
                       # this will be the default nginx server
    server_name localhost;

    # declare proxy params and values to forward to your gunicorn webserver
    proxy_pass_request_headers on;
    proxy_pass_request_body on;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 120s;

    location / {
        # here is where you declare that every request to / 
        # should be proxy to 127.0.0.1:8000 (which is where
        # your gunicorn will be running on)          
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;

        proxy_pass http://127.0.0.1:8000/; # the actual nginx directive to 
                                           # forward the request
    }
} 
```

好的，此时您所拥有的只是一个充当代理的 Nginx，其中所有发往 127.0.0.1:80 的请求将被传递到 127.0.0.1:8000。

*   现在是时候配置你的**Gunicorn 网络服务器**了：

通常我使用配置文件的方式是，Gunicorn 配置文件可以是一个普通的 python 文件。所以现在，在你喜欢的任何位置创建一个文件，我假设这个文件是**/etc/gunicorn/mysite.py**

```
workers = 3              # number of workers Gunicorn will spawn 

bind = '127.0.0.1:8000'  # this is where you declare on which address your 
                         # gunicorn app is running.
                         # Basically where Nginx will forward the request to

pidfile = '/var/run/gunicorn/mysite.pid' # create a simple pid file for gunicorn. 

user = 'user'          # the user gunicorn will run on

daemon = True          # this is only to tell gunicorn to deamonize the server process

errorlog = '/var/log/gunicorn/error-mysite.log'    # error log

accesslog = '/var/log/gunicorn/access-mysite.log'  # access log

proc_name = 'gunicorn-mysite'            # the gunicorn process name 
```

好的，所有设置都在配置中。现在你要做的就是启动服务器。

启动 gunicorn 并告诉它使用哪个应用程序和哪个配置文件。从命令行和**myapp.py**文件所在的文件夹运行：

```
gunicorn -c /etc/gunicorn/mysite.py mysite:app 
```

现在，只启动 nginx。

```
/etc/init.d/nginx start 
```

或者

```
service nginx start 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-12T12:48:20.543

查看快速入门指南，您可能应该运行

```
(tutorial) $ ../bin/gunicorn -w 4 myapp:app 
```

这应该产生了一条看起来有点像的线：

```
Listening at: http://127.0.0.1:8000 
```

其中。看看您是否可以通过该地址访问您的网站。

另请注意，这`127.0.0.1`是环回地址；只能从该主机本身访问。要让 gunicorn 绑定到不同的选项，请传递它`--bind 0.0.0.0:80`，正如 Jan-Philip 建议的那样。

由于您提到机架空间，因此您可能需要调整防火墙设置以允许传入连接到所需端口。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-12T12:31:06.860

到目前为止，您似乎还没有开发 Web 应用程序。所以，我假设你现在的目标是建立一个开发环境。目前，使用大多数框架中包含的开发 Web 服务器来开发您的 Web 应用程序，例如 Flask。

**无论您使用什么框架，让开发 Web 服务器在 0.0.0.0 上进行侦听，以便该服务正在侦听所有已配置的网络接口，并确保该端口对外部开放（检查 Rackspace 设置）。**

当您完成应用程序的开发或正在研究现有的应用程序时，您必须以可靠的方式部署它。那么，nginx 后面的 gunicorn 就是一个选择。

我将大致解决您的问题。看来你必须多读一点:-)

*   *gunicorn 网站上的“部署”下提到了 Nginx。看起来 Nginx 是一个代理服务器，这让我很困惑，因为我认为 gunicorn 是一个服务器。不知道为什么我需要两台服务器？*

Nginx 是一个功能齐全的 Web 服务器。它因其性能和稳定性而受到赞赏。人们使用它来提供静态文件（不让动态 Web 应用程序负担这个任务），在必要时将请求转发到 Web 应用程序，用于 SSL 终止和负载平衡。请注意，这是一张不完整的图片。

gunicorn 是一个服务于 WSGI 应用的服务器。主要是管理实际执行 Web 应用程序的工作进程。

*   *需要在 gunicorn 中配置的东西。需要在服务器本身上配置的东西。为了实际服务请求而需要完成的其他事情。*

实际上，您可以用无穷无尽的方式优化您的 linux 机器（为了性能，例如增加文件描述符限制和安全性）。在 gunicorn 中，您可以配置工作进程的数量等等。如果你有 nginx 作为前端甚至另一个负载均衡器，这个有自己的配置。您会看到，您的设置对于现实世界场景中的实际部署可能会变得非常复杂。这不是微不足道的。

但是，要玩 WSGI 应用程序，只需正确设置您的开发框架，这在大多数情况下非常简单，并确保没有防火墙问题。就这样。

# android - Logcat 说 - 应用程序可能在其主线程上做太多工作，并且错误消息说 - StringtoReal.invalidReal(string.boolean)line:63

> ID：12858680
> 
> 赞同：4
> 
> 时间：2012-10-12T12:05:05.587
> 
> 标签：android, android-emulator, android-logcat

每当我在模拟器中运行我的应用程序时，Logcat 都会说 - 应用程序可能在其主线程上做太多工作，并且错误消息说 - StringtoReal.invalidReal(string.boolean)line:63 在这里，我正在尝试添加 3 个文本视图的值并在另一个文本视图中使用复选框上的勾号显示它们的总数

```
10-12 17:23:21.074: W/ActivityThread(700): 
Application com.suvendu.tutorial.cb is waiting for the debugger on port 8100...
10-12 17:23:21.134: I/System.out(700): Sending WAIT chunk
10-12 17:23:21.143: I/dalvikvm(700): Debugger is active
10-12 17:23:21.334: I/System.out(700): Debugger has connected
10-12 17:23:21.334: I/System.out(700): waiting for debugger to settle...
10-12 17:23:21.545: I/System.out(700): waiting for debugger to settle...
10-12 17:23:21.744: I/System.out(700): waiting for debugger to settle...
10-12 17:23:21.943: I/System.out(700): waiting for debugger to settle...
10-12 17:23:22.155: I/System.out(700): waiting for debugger to settle...
10-12 17:23:22.353: I/System.out(700): waiting for debugger to settle...
10-12 17:23:22.554: I/System.out(700): waiting for debugger to settle...
10-12 17:23:22.754: I/System.out(700): waiting for debugger to settle...
10-12 17:23:22.954: I/System.out(700): waiting for debugger to settle...
10-12 17:23:23.164: I/System.out(700): debugger has settled (1368)
10-12 17:23:25.243: I/Choreographer(700): Skipped 46 frames!  
The application may be  doing too much work on its main thread.
10-12 17:23:25.533: D/gralloc_goldfish(700): Emulator without GPU emulation detected. 
```

活动代码：-

```
OnClickListener checkBoxListener;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    text_regular_code=(TextView)findViewById(R.id.text_regular);
    text_small_code=(TextView)findViewById(R.id.text_small);
    text_large_code=(TextView)findViewById(R.id.text_large);

    text_check_regular_code=(TextView)findViewById(R.id.text_check_regular);
    text_check_small_code=(TextView)findViewById(R.id.text_check_small);
    text_check_large_code=(TextView)findViewById(R.id.text_check_large);

    text_price_regular_code=(TextView)findViewById(R.id.text_price_regular);
    text_price_small_code=(TextView)findViewById(R.id.text_price_small);
    text_price_large_code=(TextView)findViewById(R.id.text_price_large);

    edit_qty_regular_code=(EditText)findViewById(R.id.edit_qty_regular);
    edit_qty_small_code=(EditText)findViewById(R.id.edit_qty_small);
    edit_qty_large_code=(EditText)findViewById(R.id.edit_qty_large);

    chk_regular_code=(CheckBox)findViewById(R.id.chk_regular);
    chk_small_code=(CheckBox)findViewById(R.id.chk_small);
    chk_large_code=(CheckBox)findViewById(R.id.chk_large);

    checkBoxListener =new OnClickListener() {

        public void onClick(View v) {

            if(chk_regular_code.isChecked())
            {
                text_price_regular_code.setText
                (text_regular_code.getText().toString());
                text_check_regular_code.setText
                (chk_regular_code.getText().toString());

            }
            else {
                text_price_regular_code.setText("");
                text_check_regular_code.setText("");
                edit_qty_regular_code.setText("");
            }

            if(chk_small_code.isChecked())
            {
                text_price_small_code.setText
                (text_small_code.getText().toString());
                text_check_small_code.setText
                (chk_small_code.getText().toString());

            }
            else {
                text_price_small_code.setText("");
                text_check_small_code.setText("");
                edit_qty_small_code.setText("");
            }

            if(chk_large_code.isChecked())
            {
                text_price_large_code.setText
                (text_large_code.getText().toString());
                text_check_large_code.setText
                (chk_large_code.getText().toString());

            }
            else {
                text_price_large_code.setText("");
                text_check_large_code.setText("");
                edit_qty_large_code.setText("");
            }
            // whenever i use below code getting error "start"

            x=Double.parseDouble
                    (text_price_regular_code.getText().toString());
            y=Double.parseDouble
                    (text_price_small_code.getText().toString());
            z=Double.parseDouble
                    (text_price_large_code.getText().toString());           
            a=x+y+z;
            text_total_code.setText(Double.toString(a));
            // whenever i use below code getting error "end"
        }
    };

    chk_regular_code.setOnClickListener(checkBoxListener);
    chk_small_code.setOnClickListener(checkBoxListener);
    chk_large_code.setOnClickListener(checkBoxListener);
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T12:31:15.617

我会忽略这一点。您看到的消息在手机上很重要，但在模拟器中不重要。模拟器非常慢。您所做的一切都不是资源密集型的，因此您的应用程序应该名义上在设备上执行。

在设备上，您可以在某些手机上使用开发人员选项来启用可见信号，表明您可能在前台做太多工作。在我的 Galaxy Nexus 上，我可以导航到设置 > 开发人员选项 > 启用严格模式。选中该框将导致红色边框在任何应用程序周围闪烁，当它导致出现您从 logcat 发布的消息时。

消除警告的解决方案是线程，但我觉得你可能正在努力解决一个非问题。唯一知道的方法是设备测试。

# javascript - 删除元素并通过 .click 将它们带回来

> ID：12858681
> 
> 赞同：0
> 
> 时间：2012-10-12T12:05:11.470
> 
> 标签：javascript, jquery, html, css

我正在尝试仅使用一页来构建网站。我创建了 5 个`<section>`我将这些部分用作我的页面。我在右侧有一个固定的导航。使用以下内容：

```
<ul class="navigation">
        <li id="link1">ABOUT</li>
        <li id="link2">WHY HIRE ME</li>
        <li id="link3">JOURNEY</li>
        <li id="link4">INSTAGRAM</li>
        <li id="link5">CONTACT</li>         
    </ul> 
```

我使用以下 CSS 设置了该列表的样式，因此它固定在浏览器窗口的左侧。

```
.navigation{
position:fixed;
z-index:1;
top:20px;
font-size:12px;
font-family: Georgia, serif;} 
```

我已经尝试过一些 jQuery，但我失败了。我最理想的是在网站打开时显示第 1 部分。其余的被隐藏起来。当用户单击链接时，我希望隐藏除链接关联的部分之外的所有部分。

我已经查看并尝试了使用 .click 的 .remove / .appendTo 功能，但我很挣扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:09:41.233

jQuery 没有实际删除或附加元素，而是内置了一个隐藏/显示方法，该方法将它们的可见性设置为 false，并且浏览器呈现相邻元素，就好像丢失的元素真的不存在一样。

你可以使用它：

```
$('#myelement').hide();
$('#myelement').show(); 
```

为了做一个完整的小组，我会为他们提供一个通用的 css 类（即使该类没有附加任何样式）：

```
$('.mylinkgroup1').hide();
$('.mylinkgroup2').show(); 
```

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

[http://api.jquery.com/show/](http://api.jquery.com/show/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:10:08.650

像这样的 HTML 结构

```
<div id="content_1">About content</div>
<div id="content_2">Why Hire Me content</div>
... 
```

而这个 jQuery

```
$('.navigation li').on('click', function ()
{
    var id = $(this).attr('id').substr( $(this).attr('id').indexOf('_') + 1 );

    $('div[id^="content_"]').hide();
    $('#content_' + id).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:12:13.167

**标记：**

```
<ul class="navigation">
  <li name="section1" id="link1">ABOUT</li>
  <li name="section2" id="link2">WHY HIRE ME</li>
  <li name="section3" id="link3">JOURNEY</li>
  <li name="section4" id="link4">INSTAGRAM</li>
  <li name="section5" id="link5">CONTACT</li>         
</ul>

<div class="section" id="section1">section1</div>
<div class="section" id="section2">section2</div>
<div class="section" id="section3">section3</div>
<div class="section" id="section4">section4</div>
<div class="section" id="section5">section5</div> 
```

**CSS：**

```
.navigation{
  position:fixed;
  z-index:1;
  top:20px;
  font-size:12px;
  font-family: Georgia, serif;
}
.section { display: none; } 
```

**JS：**

```
$('.navigation li').on('click', function() {
  $('.section').hide(); //hide all sections
  var whichSection = $(this).attr('name'); //get the section name 
  $('#'+whichSection).toggle(); //toggle it
}); 
```

**JSFiddle**
[http://jsfiddle.net/neuroflux/LwQNR/2/](http://jsfiddle.net/neuroflux/LwQNR/2/)

# android - 如何将可滚动性添加到由内部布局组成的布局中

> ID：12858683
> 
> 赞同：0
> 
> 时间：2012-10-12T12:05:20.963
> 
> 标签：android, xml

我的 XML 文件看起来像这样......你能帮我如何使它可滚动......

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="left"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/smsImageButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="left"
            android:layout_weight="0.32"
            android:background="@drawable/widget_bg_orange"
            android:onClick="smsImageHandler"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_dialog_email" />

        <View
            android:layout_width="5dp"
            android:layout_height="fill_parent"
            android:background="@android:color/black" />

        <ImageView
            android:id="@+id/cameraImageButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="clip_horizontal"
            android:layout_weight="0.40"
            android:background="@drawable/widget_bg_orange"
            android:onClick="cameraImageHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_camera" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/searchButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="left"
            android:layout_weight="0.16"
            android:background="@drawable/widget_bg_blue"
            android:onClick="searchButtonHandler"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_search" />

        <View
            android:layout_width="5dp"
            android:layout_height="fill_parent"
            android:background="@android:color/black" />

        <ImageView
            android:id="@+id/openWebButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="clip_horizontal"
            android:layout_weight="0.09"
            android:background="@drawable/widget_bg_blue"
            android:onClick="openWebButtonHandler"
            android:paddingLeft="20px"
            android:src="@android:drawable/ic_dialog_map" />

        <View
            android:layout_width="5dp"
            android:layout_height="fill_parent"
            android:background="@android:color/black" />

        <ImageView
            android:id="@+id/imageButton5"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="clip_horizontal"
            android:layout_weight="0.09"
            android:background="@drawable/widget_bg_green"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_dialog_info" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/callLogButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.17"
            android:background="@drawable/widget_bg_orange"
            android:onClick="callLogButtonHandler"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_call" />

        <View
            android:layout_width="5dp"
            android:layout_height="fill_parent"
            android:background="@android:color/black" />

        <ImageView
            android:id="@+id/mediaButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_orange"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_media_play" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/sampleButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_green"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_gallery" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/sampleButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_green"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_gallery" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/sampleButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_green"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_gallery" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/sampleButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_green"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_gallery" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="317dp"
        android:layout_height="104dp"
        android:orientation="horizontal"
        android:padding="5px" >

        <ImageView
            android:id="@+id/sampleButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.29"
            android:background="@drawable/widget_bg_green"
            android:onClick="mediaButtonHandler"
            android:paddingLeft="10px"
            android:paddingRight="10px"
            android:src="@android:drawable/ic_menu_gallery" />
    </LinearLayout>

</LinearLayout> 
```

我尝试通过将所有布局包装在主布局中并使用滚动视图来放置滚动功能，但它显示错误..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:09:17.167

试试这个希望它有效

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="left"
    android:orientation="vertical" >

        <ScrollView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="fill_parent" >

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/smsImageButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_gravity="left"
                        android:layout_weight="0.32"
                        android:background="@drawable/widget_bg_orange"
                        android:onClick="smsImageHandler"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_dialog_email" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="fill_parent"
                        android:background="@android:color/black" />

                    <ImageView
                        android:id="@+id/cameraImageButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_gravity="clip_horizontal"
                        android:layout_weight="0.40"
                        android:background="@drawable/widget_bg_orange"
                        android:onClick="cameraImageHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_camera" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/searchButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_gravity="left"
                        android:layout_weight="0.16"
                        android:background="@drawable/widget_bg_blue"
                        android:onClick="searchButtonHandler"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_search" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="fill_parent"
                        android:background="@android:color/black" />

                    <ImageView
                        android:id="@+id/openWebButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_gravity="clip_horizontal"
                        android:layout_weight="0.09"
                        android:background="@drawable/widget_bg_blue"
                        android:onClick="openWebButtonHandler"
                        android:paddingLeft="20px"
                        android:src="@android:drawable/ic_dialog_map" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="fill_parent"
                        android:background="@android:color/black" />

                    <ImageView
                        android:id="@+id/imageButton5"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_gravity="clip_horizontal"
                        android:layout_weight="0.09"
                        android:background="@drawable/widget_bg_green"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_dialog_info" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/callLogButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.17"
                        android:background="@drawable/widget_bg_orange"
                        android:onClick="callLogButtonHandler"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_call" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="fill_parent"
                        android:background="@android:color/black" />

                    <ImageView
                        android:id="@+id/mediaButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_orange"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_media_play" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/sampleButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_green"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_gallery" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/sampleButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_green"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_gallery" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/sampleButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_green"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_gallery" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/sampleButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_green"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_gallery" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="317dp"
                    android:layout_height="104dp"
                    android:orientation="horizontal"
                    android:padding="5px" >

                    <ImageView
                        android:id="@+id/sampleButton"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:layout_weight="0.29"
                        android:background="@drawable/widget_bg_green"
                        android:onClick="mediaButtonHandler"
                        android:paddingLeft="10px"
                        android:paddingRight="10px"
                        android:src="@android:drawable/ic_menu_gallery" />
                </LinearLayout>
            </LinearLayout>
        </ScrollView>

    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:07:56.637

或许像这样，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:gravity="left"
android:orientation="vertical">

<ScrollView  android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/smsImageButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="left"
        android:layout_weight="0.32"
        android:background="@drawable/widget_bg_orange"
        android:onClick="smsImageHandler"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_dialog_email" />

    <View
        android:layout_width="5dp"
        android:layout_height="fill_parent"
        android:background="@android:color/black" />

    <ImageView
        android:id="@+id/cameraImageButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="clip_horizontal"
        android:layout_weight="0.40"
        android:background="@drawable/widget_bg_orange"
        android:onClick="cameraImageHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_camera" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/searchButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="left"
        android:layout_weight="0.16"
        android:background="@drawable/widget_bg_blue"
        android:onClick="searchButtonHandler"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_search" />

    <View
        android:layout_width="5dp"
        android:layout_height="fill_parent"
        android:background="@android:color/black" />

    <ImageView
        android:id="@+id/openWebButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="clip_horizontal"
        android:layout_weight="0.09"
        android:background="@drawable/widget_bg_blue"
        android:onClick="openWebButtonHandler"
        android:paddingLeft="20px"
        android:src="@android:drawable/ic_dialog_map" />

    <View
        android:layout_width="5dp"
        android:layout_height="fill_parent"
        android:background="@android:color/black" />

    <ImageView
        android:id="@+id/imageButton5"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="clip_horizontal"
        android:layout_weight="0.09"
        android:background="@drawable/widget_bg_green"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_dialog_info" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/callLogButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.17"
        android:background="@drawable/widget_bg_orange"
        android:onClick="callLogButtonHandler"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_call" />

    <View
        android:layout_width="5dp"
        android:layout_height="fill_parent"
        android:background="@android:color/black" />

    <ImageView
        android:id="@+id/mediaButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_orange"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_media_play" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/sampleButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_green"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/sampleButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_green"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/sampleButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_green"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/sampleButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_green"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>

<LinearLayout
    android:layout_width="317dp"
    android:layout_height="104dp"
    android:orientation="horizontal"
    android:padding="5px" >

    <ImageView
        android:id="@+id/sampleButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.29"
        android:background="@drawable/widget_bg_green"
        android:onClick="mediaButtonHandler"
        android:paddingLeft="10px"
        android:paddingRight="10px"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>
 </LinearLayout>
</ScrollView>
 </LinearLayout> 
```

# coldfusion - ColdFusion：强制浏览器下载文件并仍然加载页面

> ID：12858687
> 
> 赞同：1
> 
> 时间：2012-10-12T12:05:36.787
> 
> 标签：coldfusion, http-headers, mime-types, attachment

我有一个`test.cfm`动态构建pdf文件并将其输出`<cfheader>`到`<cfcontent>`浏览器的地方，但我仍然希望页面加载并显示“测试html”：

```
<CFFILE action="readbinary" file="#expandpath("./test.cfm")#" variable="testcontent" />
<CFHEADER name="Content-Disposition" value="attachment; filename=""test.txt""; charset=utf-8">
<CFCONTENT type="text/plain" reset="yes" variable="#testcontent#">

<CFCONTENT type="text/html" reset="yes" /><!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Testdoc</title>
</head>
<body>test html</body>
</html> 
```

（输出文件本身仅用于示例）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:09:47.000

您无法触发下载后发生的事情，但您可以反过来执行 - 加载您想要的页面，然后使用 HTML 元重定向重定向到要下载的文件：

```
<meta http-equiv="refresh" content="5; url=http://domain.com/path/to/download" /> 
```

（如有必要，您可以使用[cfhtmlhead](http://cfdocs.cfhtmlhead)将其插入现有 HTML 页面的相关部分。）

5 是等待的秒数 - 设置为 0 将立即重定向。（与其他页面一起使用时，使用即时重定向可能会导致后退按钮出现问题；但对于下载来说应该不是问题。）

# image - 如何在 mvc4 中上传多个文件（图像）（一次超过 100 个文件）？

> ID：12858691
> 
> 赞同：1
> 
> 时间：2012-10-12T12:05:49.263
> 
> 标签：image, image-processing, file-upload, asp.net-mvc-4

大家好，我在 mvc4 上工作，我已经上传了单个图像（文件），但现在我需要一次将 100 多个文件（图像）加载到我的应用程序中，我该怎么做？请帮忙

这是我的代码：这是我的控制器

```
[HttpPost]
            public ActionResult Uploading(ImageModel model)
            {
                if (ModelState.IsValid)
                {     
                    string fileName = Guid.NewGuid().ToString();
                    string serverPath = Server.MapPath("~");
                    string imagesPath = serverPath + "Content\\Images\\";
                    string thumsise = Path.Combine(imagesPath, "Thumb" + fileName);
                    string thumbPath = Path.Combine(imagesPath, "Thu" + fileName);
                    string fullPath = Path.Combine(imagesPath, "Full" + fileName);
                    string Bigpath = Path.Combine(imagesPath, "big" + fileName);
                    string Bigpatha = Path.Combine(imagesPath, "biga" + fileName);
                    string Bigpathb = Path.Combine(imagesPath, "bigb" + fileName);
                    string Bigpathc = Path.Combine(imagesPath, "bigc" + fileName );
                    ImageModel.ResizeAndSave(thumsise, fileName, model.ImageUploaded.InputStream, 80, true);
                    ImageModel.ResizeAndSave(thumbPath, fileName, model.ImageUploaded.InputStream, 100, true);
                    ImageModel.ResizeAndSave(fullPath, fileName, model.ImageUploaded.InputStream, 500, true);
                    ImageModel.ResizeAndSave(Bigpath, fileName, model.ImageUploaded.InputStream, 200, true);
                    ImageModel.ResizeAndSave(Bigpatha, fileName, model.ImageUploaded.InputStream, 250, true);
                    ImageModel.ResizeAndSave(Bigpathb, fileName, model.ImageUploaded.InputStream, 150, true);
                    ImageModel.ResizeAndSave(Bigpathc, fileName, model.ImageUploaded.InputStream, 50, true);
                }
                return View("Upload",model);
            } 
```

这是我的类文件：

```
public class ImageModel
    {

        [Required]

        public HttpPostedFileWrapper ImageUploaded { get; set; }
        public static void ResizeAndSave(string savePath, string fileName, Stream imageBuffer, int maxSideSize, bool makeItSquare)
        {
            int newWidth;
            int newHeight;
            Image image = Image.FromStream(imageBuffer);
            int oldWidth = image.Width;
            int oldHeight = image.Height;
            Bitmap newImage;
            if (makeItSquare)
            {
                int smallerSide = oldWidth >= oldHeight ? oldHeight : oldWidth;
                double coeficient = maxSideSize / (double)smallerSide;
                newWidth = Convert.ToInt32(coeficient * oldWidth);
                newHeight = Convert.ToInt32(coeficient * oldHeight);
                Bitmap tempImage = new Bitmap(image, newWidth, newHeight);
                int cropX = (newWidth - maxSideSize) / 2;
                int cropY = (newHeight - maxSideSize) / 2;
                newImage = new Bitmap(maxSideSize, maxSideSize);
                Graphics tempGraphic = Graphics.FromImage(newImage);
                tempGraphic.SmoothingMode = SmoothingMode.AntiAlias;
                tempGraphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
                tempGraphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
                tempGraphic.DrawImage(tempImage, new Rectangle(0, 0, maxSideSize, maxSideSize), cropX, cropY, maxSideSize, maxSideSize, GraphicsUnit.Pixel);
            }
            else
            {
                int maxSide = oldWidth >= oldHeight ? oldWidth : oldHeight;

                if (maxSide > maxSideSize)
                {
                    double coeficient = maxSideSize / (double)maxSide;
                    newWidth = Convert.ToInt32(coeficient * oldWidth);
                    newHeight = Convert.ToInt32(coeficient * oldHeight);
                }
                else
                {
                    newWidth = oldWidth;
                    newHeight = oldHeight;
                }
                newImage = new Bitmap(image, newWidth, newHeight);
            }
            newImage.Save(savePath + fileName + ".jpg", ImageFormat.Jpeg);
            //newImage.Save(savePath + fileName + ".jpg", ImageFormat.Jpeg);
            image.Dispose();
            newImage.Dispose();
        }  
    }
} 
```

这是我的索引页：

```
@using (Html.BeginForm("Uploading", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
     {
         <input type="file" name="ImageUploaded" id="btnUpload" multiple="multiple" accept="image/*"  />
     <button type="submit"  id="Upload">Upload</button>
         <br />
} 
```

你能帮我一次上传100多个文件吗提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:05:50.933

景色还可以。问题是控制器：不要使用 ImageModel 从表单中获取文件。它限制你只有一个文件。您可以通过 Request.Files 属性获取多个文件：

```
 for (int i = 0; i < Request.Files.Count; i++)
            {
                if (Request.Files[i].ContentLength > 0)
                {
                    HttpPostedFileBase uploadedFile = Request.Files[i];
                    ... here you can use the resize and other logic 
                    ... on uploadedFile.InputStream
                }
            } 
```

检查 HttpPostedFileBase 类。它是您在 ImageModel 模型类中使用的 HttpPostedFileWrapper 的基类。

# python - 如何比较 2 个文件以仅获取不在第二个文件中的行？

> ID：12858692
> 
> 赞同：0
> 
> 时间：2012-10-12T12:05:54.770
> 
> 标签：python

我有 2 个这样的文件：

```
file 1 :                     file 2 :
col1    col2                 col1     col2
john    kerry                john     kerry
adam    lord                 bob      abram  
joe     hitch 
```

我想根据姓氏和名字比较这两个文件，以仅获取一个不包含文件 2 中人员的文件，也就是说：

```
desired output file :

col1     col2
adam     lord
joe      hitch 
```

我试过了，但我没有得到正确的输出

```
import csv

reader1=csv.reader(open('file1.csv', 'r'), delimiter='\t')
reader2=csv.reader(open('file2.csv', 'r'), delimiter='\t')
writer=csv.writer(open('desired_file.csv', 'w'), delimiter=',')

row1 = reader1.next()
row2 = reader2.next()

if (row1[0] == row2[0]) and (row1[1] == row2[1]):
    print 'equal'
else:
    writer.writerow(row1)
    writer.writerow(row2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:14:27.287

我会使用一组差异：

```
with open('file1') as f1, open('file2') as f2:
    data1 = set(f1)
    lines_not_in_f2 = data1.difference(f2) 
```

如果文件的格式可能略有不同，您可能需要将文件对象包装在生成元组的生成器中：

```
def people(my_file):
    for line in myfile:
        yield tuple(x.lower() for x in line.split())

with open('file1') as f1, open('file2') as f2:
    data1 = set(people(f1))
    people_not_in_f2 = data1.difference(people(f2)) 
```

这样做的好处是您不需要将整个 f2 文件读入内存。它的缺点是输出名称是无序的（因为它们存储在一个集合中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:10:16.107

`csv`如果文件格式相同，我认为您不需要该模块。这个解决方案怎么样：

```
exclude_names = frozenset(open('file2')) # make set for performance
with open('output', 'w') as f:
    for name in open('file1'):
        if name not in exclude_names:
             f.write(name) 
```

`csv`读写器的解决方案：

```
import csv

exclude_names = frozenset(csv.reader(open('file2.csv', 'r'), delimiter='\t'))    
with open('desired_file.csv', 'w') as f:
    writer = csv.writer(f, delimiter=',')
    for row in csv.reader(open('file1', 'r'), delimiter='\t'):
         if row not in exclude_names:
              writer.writerow(row) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:14:28.097

```
results=[i for i, j in zip(reader1, reader2) if i != j] 
```

或`set(reader1) - set(reader2)`在顺序不重要时使用。

```
myfile = open(..., 'wb')
wr = csv.writer(myfile, quoting=csv.QUOTE_ALL)
wr.writerow(results) 
```

# android - android中的MouseEnter等效

> ID：12858697
> 
> 赞同：2
> 
> 时间：2012-10-12T12:06:11.610
> 
> 标签：android, .net, drag-and-drop

我想将我的 windows phone 游戏移植到 android。我使用了 MouseEnter 事件，但在 android 中没有找到任何东西。

工作流程是，您触摸 area1 并将其“拖动”到另一个 area2。在这种情况下，拖动是指触摸区域 1，离开区域 1 将其“拖动”到区域 2，区域 2 进入（手指在里面）并释放。我不想使用真正的拖放，因为它没有必要，我想获得更好的性能。

# java - 在java中使用列表的运算符优先级

> ID：12858702
> 
> 赞同：1
> 
> 时间：2012-10-12T12:06:19.400
> 
> 标签：java, list

> **可能重复：**
> [评估以字符串形式给出的数学表达式](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)

我需要一些帮助来完成我们的任务。我试图创建一个将使用运算符优先级进行计算的程序。如果可能的话，我想计算一个数组列表中的表达式。例如。[4+2x2-3] 应该首先计算 2x2，所以结果将是 [4+4-3] 等等......我的程序只计算第一个操作，但不能通过其他操作重复。也..它只计算最高优先级的运算符何时开始。前任。[2^1-2] 变为 [2-2]。但是当 [2-1^2] 它什么也没做。谢谢帮助

```
List<String> subroutine = new CopyOnWriteArrayList<String>(input);
        for(String i : subroutine)
    {
        switch(currentstate)
        {
            case q0:
                if(isDigit(i))
                {
                    currentstate = q1;
                }
            break;

            case q1:
                if(i.equals("^"))
                {
                    maxPriority = i;
                    int index = subroutine.indexOf(maxPriority);
                    int num1 = Integer.parseInt(subroutine.get(index-1));
                    int num2 = Integer.parseInt(subroutine.get(index+1));
                    int total = (int) Math.pow(num1, num2);

                    String stringTotal = Integer.toString(total);
                    String addToExp = subroutine.set(index, stringTotal);
                    int indexAddToExp = subroutine.indexOf(stringTotal);
                    subroutine.remove(indexAddToExp+1);
                    subroutine.remove(indexAddToExp-1);
                    System.out.println(subroutine);
                }
                else if( (i.equals("x") || i.equals("/")) && (!input.contains("^")) )
                {
                    if(i.equals("x"))
                    {
                        maxPriority = i;
                        int index = subroutine.indexOf(maxPriority);
                        int num1 = Integer.parseInt(subroutine.get(index-1));
                        int num2 = Integer.parseInt(subroutine.get(index+1));
                        int total = num1 * num2;

                        String stringTotal = Integer.toString(total);
                        String addToExp = subroutine.set(index, stringTotal);
                        int indexAddToExp = subroutine.indexOf(stringTotal);
                        subroutine.remove(indexAddToExp+1);
                        subroutine.remove(indexAddToExp-1);
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:11:25.997

您应该考虑构建一个比简单地使用字符串集合更复杂的表达式结构。

基本上，您将希望根据给定的[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)将给定的算术表达式解析为[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，大致如下所示：

```
ArithmethicExpression := CompoundExpression | LiteralExpresion
LiteralExpression := {0-9}+ (meaning at least one digit)
CompoundExpression := LiteralExpression FunctionExpression LiteralExpression 
```

这个语法只是你需要的一个粗略的概念，但它肯定会帮助你更容易地实现你需要的东西。

[这里](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)还有一个问题，显然是相关的。特别是[这个](https://stackoverflow.com/a/3422825/1251613)答案对你来说真的很有趣。

# iphone - 点击状态栏时将所有滚动视图滚动到顶部

> ID：12858712
> 
> 赞同：3
> 
> 时间：2012-10-12T12:06:51.923
> 
> 标签：iphone, objective-c, uitableview, uiscrollview

我的视图中有 3 个表视图，我想同时为所有表启用滚动到顶部功能，即，如果用户点击状态栏，所有三个表都应该滚动到顶部位置。

我已经尝试使用我所有 tableViews 的 scrollsToTop 属性以及此属性的 YES/No 的各种组合。例如

```
table1.scrollsToTop = YES;
table2.scrollsToTop = NO;
table3.scrollsToTop = NO; 
```

但无法做到这一点。我们是否有办法获得点击状态栏的事件，以便我可以尝试将所有表格的内容偏移设置为顶部位置或任何其他解决方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:19:13.110

通过覆盖下面的 scrollViewShouldScrollToTop 方法解决了这个问题，-

```
- (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView { 
  [table1 scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
  [table2 scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
  [table3 scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];

  return NO;
} 
```

# html - 舍入包含在 Chrome 中不起作用的小分区中的大图像的两侧

> ID：12858713
> 
> 赞同：2
> 
> 时间：2012-10-12T12:06:53.003
> 
> 标签：html, google-chrome, css, background-image

我正在尝试使用`border-radius`属性舍入背景图像的两侧。

这是我的场景：

我在一个小分区中放置了一个大图像作为背景，并隐藏了溢出。现在我需要对小除法进行四舍五入。我成功地绕过了小师的拐角。但是图像的角不是圆角。

**HTML：**

```
<div class="video_thumb">
    <div style="background-image: url(http://img.youtube.com/vi/mAYX42saxkI/0.jpg); " class="video-thumbnail"></div>
</div>​ 
```

**CSS**

```
.video_thumb {
    height: 250px;
    width: 300px;
    overflow:hidden;
    margin:20px;
    border: 1px solid red;
    z-index:100;
    position:relative;

    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
.video-thumbnail {
    width: 520px;
    height: 100%;
    position: relative;
    background-size: cover;
    -moz-background-size: cover;
    -webkit-background-size: cover;
    background-position: center;
    z-index:10;
    overflow:hidden;

    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

[**这是一个使用 jsfiddle 的演示**](http://jsfiddle.net/libinvbabu/e94q3/)

您可以看到左上角和左下角的边框是圆形的。但是右上角和右下角不是圆角的。我们怎样才能使图像的所有角落都变圆？

我尝试将`z-index`,添加`overflow: hidden`到两个 div 中，但没有运气。

**编辑：**

此问题仅适用于 Google Chrome。在 Firefox 浏览器上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:31:34.973

这似乎是一个 Chrome 错误，您应该考虑将其提升为 @ [http://code.google.com/p/chromium/issues/list](http://code.google.com/p/chromium/issues/list)

`position: relative`现在，您可以通过更改为“解决它”`position: static`

**一个黑客修复**

如[回答here](https://stackoverflow.com/a/10296258/681807)，您可以添加一个`-webkit-mask-image`到父元素来隐藏溢出的内容：

```
.video_thumb {
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:20:48.383

您可以尝试使用这段代码[http://jsfiddle.net/shubhanshumishra/e94q3/10/](http://jsfiddle.net/shubhanshumishra/e94q3/10/)您不需要为包装 div 和带有图像的 div 设置边框半径。

这是代码：

```
.video-thumbnail{

background-image: url(http://img.youtube.com/vi/mAYX42saxkI/0.jpg);;

width: 300px;

height: 250px;

border: 8px solid #666;

 border-radius: 10px;

-moz-border-radius: 10px;

-webkit-border-radius: 10px;

} 
```

​您可以使用该`background-position`属性来剪辑您想要的区域。您也可以使用该`background-size`属性根据需要拉伸背景图像。

这是更新小提琴的链接：http: [//jsfiddle.net/shubhanshumishra/e94q3/14/](http://jsfiddle.net/shubhanshumishra/e94q3/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:32:08.693

刚刚更新了你的小提琴。希望这能解决您的问题。

**演示**

[http://jsfiddle.net/saorabhkr/e94q3/13/](http://jsfiddle.net/saorabhkr/e94q3/13/)

从此类 (.video-thumbnail) 中删除了固定宽度，并将背景大小放在要添加图像/视频的标记中。

# php - Doctrine2 LEFT JOIN 异常

> ID：12858721
> 
> 赞同：1
> 
> 时间：2012-10-12T12:07:29.603
> 
> 标签：php, symfony, doctrine-orm

Symfony/Doctrine2`SQL`对两个实体的声明有问题：

```
$qb = $this->getEntityManager()->createQueryBuilder();
    $qb->select('s')
    ->from('basecomProductionWorkflowBaseBundle:SubprocessData', 's')
    ->leftJoin('basecomProductionWorkflowBaseBundle:ReleaseDay', 'r', Expr\Join::WITH, 'r.id = s.releaseDay')
    ->where(
            $qb->expr()->andX(
                    $qb->expr()->eq('r.date', ':date'),
                    $qb->expr()->isNotNull('r.edition')
            )
    )
    ->setParameter('date', $date); 
```

我收到以下错误消息：

```
[Semantical Error] line 0, col 124 near 'r WITH r.id =': Error: Identification Variable basecomProductionWorkflowBaseBundle:ReleaseDay used in join path expression but was not defined before. 
```

PS：两个表彼此没有关系（这是解决另一个问题的解决方法）。我已经在 phpmyadmin 中测试了相同的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:28:23.883

它应该是：

```
->leftJoin('s.releaseDay', 'r') 
```

您还可以通过这种方式简化条件：

```
->where('r.date = :date')
->andWhere('r.edition IS NOT NULL') 
```

或者：

```
->where('r.date = :date AND r.edition IS NOT NULL') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:55:59.797

¿ 你使用的是什么 Expr 类？几天前我错误地选择了 Expr 类并抛出了同样的异常。

尝试：

```
use Doctrine\ORM\Query\Expr; 
```

# javascript - jQuery 如何为图像应用自定义加载？

> ID：12858723
> 
> 赞同：1
> 
> 时间：2012-10-12T12:07:42.083
> 
> 标签：javascript, jquery, html, slideshow

我有这个 HTML：

```
<div class="page-loading-wrapper">
    <div style="width: 168px" class="slide-content">
        <div class="loading-panel" style="background-color: #dddddd; height: 120px; position: relative">
            <div class="loading-text"><span class="loading-number">0</span>%</div>
            <div class="loading-load">LOADING</div>
        </div>
        <img src="images/shkeer-loading.png" width="168" height="91" alt="" />
    </div>
    <div class="loading-bottom-line"></div>
</div>

<div id="maximage">
    <div>
        <img src="images/bg/bg.jpg" width="1580" height="889" alt="" />
    </div>
    <div>
        <img src="images/bg/bg2.jpg" width="1352" height="748" alt="" />
    </div>
    <div>
        <img src="images/bg/bg3.jpg" width="1285" height="803" alt="" />
    </div>
    <div>
        <img src="images/bg/bg4.jpg" width="1290" height="807" alt="" />
    </div>
    <div>
        <img src="images/bg/bg5.jpg" width="1295" height="921" alt="" />
    </div>
    <div>
        <img src="images/bg/bg6.jpg" width="1280" height="750" alt="" />
    </div>
    <div>
        <img src="images/bg/bg7.jpg" width="1280" height="750" alt="" />
    </div>
</div> 
```

这个Javascript代码：

```
$('#maximage').maximage({
        onImagesLoaded: function() {
                    $(".page-loading-wrapper").slideUp("slow");
                },
        cycleOptions: {
            fx:'scrollHorz',
            autostopCount: 1,
            autostop: 1
        }
    }); 
```

和这个加载代码：

```
function changeLoading() {

        var height = parseInt($(".loading-panel").height()) + 5;
        $(".loading-panel").css("height", height + "px");
        if ( height == 325) {
            clearInterval(t);
            var t2 = setInterval(changeNum, 110);   
        }
    }

function changeNum() {
        var n = parseInt($(".loading-number").html()) + 1;
        $(".loading-number").html(n);

        if ( n == 100) {
            clearInterval(t2);  
        }

    }
var t = setInterval(changeLoading, 10); 
```

我正在使用 MaxCycle（与 jQuery Cycle 插件一起使用的全屏幻灯片），我试图在加载所有图像时显示加载栏，因为它们对于每个图像来说非常大，大约 150kb。

[演示](http://www.shkeer.info/shkeer/)

如您所见，我的加载栏功能不全。它只计数直到加载**MaxCycle**

```
 onImagesLoaded: function() {
                    $(".page-loading-wrapper").slideUp("slow");
                } 
```

那么我怎样才能使这个加载工作 100% 特别是百分比数字，以检查每个图像是否已加载？

非常感谢。

# android - 从 url 解析 JSON，然后将其显示给 TextView

> ID：12858724
> 
> 赞同：0
> 
> 时间：2012-10-12T12:07:43.923
> 
> 标签：android, json

我想问一下JSON解析。如果我从 url = 有这样的网络服务`http://localhost/bus/format/json`：

```
{
  "status":"success",
  "sessionid":"489GHJ8969"
  "schedule":{
     "went":{
        "description":"this is bus schedule",
        "bus":{
           "1":"A30",
           "2":"A40"
        },
        "depart":{
           "1":"8AM",
           "2":"11AM"
        }
      }
    }
} 
```

如何在 Android 中获取和解析这个 JSON，然后将其显示给 textview？我在这里进行了搜索，但我仍然对如何解析 JSON 感到困惑。

这是在我尝试解析 JSON 但仍然不知道如何解析 JSON 之后的更新

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

    }
} 
```

巴士活动

```
public class Bus extends Activity {

String url, s;

  //private static final String TAG_STATUS = "Status";
private static final String TAG_SCHEDULE = "schedule";
private static final String TAG_WENT = "went";
private static final String TAG_DESCRIPTION = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jadwal);      

    TextView tx = (TextView)findViewById(R.id.textView1);

    url = "http://localhost/bus/format/json";

    tx.setText(url);

    JSONParser jParser = new JSONParser();

    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        JSONObject jadwal = json.getJSONObject(TAG_SCHEDULE);
        JSONObject went = jadwal.getJSONObject(TAG_WENT);
        s = went.getString(TAG_DESCRIPTION);

    } catch (JSONException e) {
        e.printStackTrace();
    }
}    
} 
```

然后结果

```
10-13 00:51:15.212: W/System.err(373): Caused by: java.net.ConnectException: /127.0.0.1:80 - Connection refused
10-13 00:51:15.212: W/System.err(373):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:254)
10-13 00:51:15.212: W/System.err(373):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
10-13 00:51:15.212: W/System.err(373):  at java.net.Socket.connect(Socket.java:1055)
10-13 00:51:15.222: W/System.err(373):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
10-13 00:51:15.222: W/System.err(373):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
10-13 00:51:15.222: W/System.err(373):  ... 21 more
10-13 00:51:15.222: E/Buffer Error(373): Error converting result java.lang.NullPointerException
10-13 00:51:15.222: E/JSON Parser(373): Error parsing data org.json.JSONException: End of input at character 0 of 
10-13 00:51:15.222: D/AndroidRuntime(373): Shutting down VM
10-13 00:51:15.222: W/dalvikvm(373): threadid=1: thread exiting with uncaught exception (group=0x4001d800) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:10:34.027

看看[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)
例如：

```
JSONObject object = new JSONObject(yourResponse);
String status = object.getString("status");
JSONObject schedule = object.getJSONObject("schedule");
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:09:26.263

Android 内置了 JSON 解析器：http: [//developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

它很好用，但使用 DOM 模型（因此不适合更大的数据）

[https://github.com/ko5tik/jsonserializer](https://github.com/ko5tik/jsonserializer)

# html - 如果按下取消，提示框 html 不允许执行进一步的代码执行

> ID：12858728
> 
> 赞同：1
> 
> 时间：2012-10-12T12:07:53.343
> 
> 标签：html, prompt

我正在使用提示框，如果我按下取消而不在提示框的文本框中输入数据，那么我在提示框之后的进一步逻辑不会执行；如果我按下确定，则执行该代码。即使我在promtbox中按下取消，如何让我的代码执行，因为它发生在我输入数据并按下ok之后？

```
var textentered=prompt("Enter text/int:","");
if(textentered.length > 0){

    alert(textentered);
}

// this is just example code below the promptbox which is not executed after i press //cancel in prompt box
text=[];
array=[];
document.getElementById('test').innerHTML=''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:30:22.333

如果何时`prompt`取消，问题`textentered`将是`null`.
因此，`if(textentered.length > 0)`意志失败。

`textentered`如果is ，您必须更改代码以采取不同的行动`null`。
就像下面的例子。

```
var textentered = prompt("Enter text/int:", "");
if (textentered) { //pressed ok OR if text is not empty
    alert(textentered);
} else { //pressed cancel
    textentered = ""; //is null. change to empty string
}
//at this point, non-empty text means that user pressed the ok button 
```

# android - Android - 如何使gridview的最后一项不同？

> ID：12858732
> 
> 赞同：0
> 
> 时间：2012-10-12T12:07:57.100
> 
> 标签：android, gridview

我正在使用带有自定义适配器的gridview。Grid 中的每个项目都包含一个图像视图和复选框，但我希望最后一个项目是一个按钮。

这是我的代码：

```
@Override
    public int getCount() {
        return thumbUrls.size()+1;
    } 
```

我在 getcount 中返回 +1 以使 getview 被称为额外时间。

在getview中： -

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ViewHolder holder;
        if(row==null)
        {
            row = layoutInflater.inflate(R.layout.griditem, parent, false);
            holder = new ViewHolder();
            holder.mainImage = (ImageView)row.findViewById(R.id.itemgrid);
            holder.checkBox = (CheckBox)row.findViewById(R.id.itemselected);
            row.setTag(holder);
        }
        else {
            holder = (ViewHolder)row.getTag();
        }
        if (position==(thumbUrls.size()+1)) { //this is just to show what i am trying to do.
        Button button = new Button(context);
        return button;
        }
        else
        {
            setImageSize(holder.mainImage);

            holder.mainImage.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    intent.putExtra("position", position);
                    intent.putStringArrayListExtra("MainUrls", mainUrls);
                    intent.putStringArrayListExtra("Thumbnails", thumbUrls);
                    context.startActivity(intent);
                }
            });

            holder.checkBox.setOnCheckedChangeListener(null);
            holder.checkBox.setTag(position);

            holder.checkBox.setChecked(positions.contains(thumbUrls.get(position)));
            holder.checkBox.setOnCheckedChangeListener(this);

            UrlImageViewHelper.setUrlDrawable(holder.mainImage, thumbUrls.get(position), R.drawable.extras_load);
        }
        return row;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:13:17.770

代替

```
 if (position==(thumbUrls.size()+1)) { //this is just to show what i am trying to do.
    Button button = new Button(context);
    return button;
    } 
```

采用

```
 if (position == thumbUrls.size()) { 
    Button button = new Button(context);
    return button;
    } 
```

中的第一个参数`position`从`getView`0 开始。您还应该`LayoutParameter`为`Button`.

# android - Holo 的半透明对话框主题

> ID：12858733
> 
> 赞同：6
> 
> 时间：2012-10-12T12:07:58.277
> 
> 标签：android, android-layout

有人可以帮我找到`Holo`等效的主题吗

```
 @android:style/Theme.Translucent.NoTitleBar 
```

我尝试使用

```
@android:style/Theme.Holo.DialogWhenLarge.NoActionBar 
```

但它不是半透明的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-17T14:49:02.300

我认为定义自己的主题比使用 Theme.Holo.Dialog 更好，因为它启用了 windowIsFloating。像这样的东西将是一个更好的等价物。

`<style name="CustomActTheme" parent="@android:style/Theme.Holo"> <item name="android:windowIsTranslucent">true</item> <item name="android:windowBackground">@android:color/transparent</item> <item name="android:windowContentOverlay">@null</item> <item name="android:windowNoTitle">true</item> <item name="android:backgroundDimEnabled">true</item> <item name="android:windowFullscreen">true</item> </style>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T13:19:53.703

知道了 ：-）

```
@android:style/Theme.Holo.Dialog 
```

# c++ - Gale-Shapley算法的C++实现

> ID：12858734
> 
> 赞同：1
> 
> 时间：2012-10-12T12:07:58.727
> 
> 标签：c++, algorithm

昨天我在算法课上做功课，Gale-Shapley 算法的一个实现，它是一种解决相同数量的男性和女性之间的匹配问题的算法，他们有自己的匹配优先级。然后在编码之后，我发现它的功能并不好，因为输入不同，但我就是不知道为什么，也许它有什么。与内存溢出有关。如果有人能指出我的错误，那将对我有很大帮助。十分感谢！这是我教科书中的代码和伪代码：

```
#include <iostream>
using namespace std;
bool isOneFree(int n,bool*P)    // test if there's at least one man Free.
{
    for(int i=0;i<n;i++)
    {
        if(*(P+i)==true)    return true;
    }
    return false;
}

int* Matching(int n,int**MP,int**WP) // numbers, priority lists of males and females.
{
    bool isManFree[n],isWomanFree[n],isManProposed[n][n];   // to represent matching states.
    int match[n];   // index-value(man-woman) pair

    for(int i=0;i<n;i++)    // initialize values.
    {
        isManFree[i]=true;
        isWomanFree[i]=true;
        for(int j=0;j<n;j++){   isManProposed[i][j]=false;    }
        match[i]=-1;
    }

    while(isOneFree(n,isManFree))   // all matching completed if it returns false.
    {
        int indexM;
        for(int i=0;i<n;i++)
        {
            if(isManFree[i]==true)  { indexM=i; break; }    // we'll try matching this guy with a girl!
        }

        int indexWo;
        for(int i=0;i<n;i++)
        {
            int w=MP[indexM][i];
            if(isManProposed[indexM][w]==false)  { indexWo=w;   break;}  // current priority
        }
        isManProposed[indexM][indexWo]=true;

        if(isWomanFree[indexWo])
        {
            isManFree[indexM]=false;
            isWomanFree[indexWo]=false;
            match[indexM]=indexWo; // they're engaged!
        }
        else    // she's engaged to someone already.
        {
            int indexRival; // find the competitor's index.
            for(int i=0;i<n;i++)
            {
                if(match[i]==indexWo){ indexRival=i;    break; }
            }

            int pM,pRival;
            for(int i=0;i<n;i++)
            {
                if(WP[indexWo][i]==indexM)  pM=i;
                if(WP[indexWo][i]==indexRival)  pRival=i;
            }
            if(pM<pRival)   // the girl's decision
            {
                isManFree[indexM]=false;
                isManFree[indexRival]=true;
                isWomanFree[indexWo]=false;
                match[indexM]=indexWo;  // change the match
            }
        }
    }
    return match;
}

int main()
{
    int n;
    cin>>n;
    int**MP,**WP;
    MP=new int*[n];
    for(int i=0;i<n;i++)    // a lot of inputs
    {
        MP[i]=new int[n];
        for(int j=0;j<n;j++)
        {
            cin>>MP[i][j];
        }
    }
    WP=new int*[n];
    for(int i=0;i<n;i++)
    {
        WP[i]=new int[n];
        for(int j=0;j<n;j++)
        {
            cin>>WP[i][j];
        }
    }
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<n;j++)
        {
            MP[i][j]--; // inputs are 1~n, get indexes 0~n-1
            WP[i][j]--;
        }
    }

    int*match=Matching(n,MP,WP);
    for(int i=0;i<n;i++)
    {
        cout<<*(match+i)+1<<" ";    // output: matching result
    }
    return 0;
} 
```

伪代码：

```
Initially all m belongs to M and w belongs to W are free
While there is a man m who is free and hasn’t proposed to every woman
    Choose such a man m
    Let w be the highest-ranked woman in m’s preference list to whom m has not yet proposed
    If w is free then
        (m, w) become engaged
    Else w is currently engaged to m’
        If w prefers m’ to m then
            m remains free
        Else w prefers m to m’
            (m,w) become engaged
            m’becomes free
        Endif
    Endif
Endwhile
Return the set S of engaged pairs 
```

这是示例输入和输出：
5
2 1 4 5 3
4 2 1 3 5
2 5 3 4 1
1 4 3 2 5
2 4 1 5 3
5 1 2 4 3
3 2 4 1 5
2 3 4 5 1
1 5 4 3 2
4 2 5 3 1

1 3 2 5 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:45:43.340

快速浏览一下您的代码，我看到的一个问题是函数

```
int* Matching(int n,int**MP,int**WP) 
```

正在返回一个局部变量的地址，这是一个很大的禁忌。

我将代码更改如下：

```
int* Matching(int n,int**MP,int**WP) // numbers, priority lists of males and females.
{
    bool isManFree[n],isWomanFree[n],isManProposed[n][n];   // to represent matching states.
    int *match = new int[n];   // index-value(man-woman) pair 
```

完成后释放它：

```
int*match=Matching(n,MP,WP);
for(int i=0;i<n;i++)
{
    cout<<*(match+i)+1<<" ";    // output: matching result
}
delete [] match;
return 0; 
```

你也应该释放内存

`int **MP`， 和`int **WP`

我相信这是问题所在，它的发生是因为局部变量的内存`int match[n];`仅在分配它的函数内部有效。

如果您有兴趣，对此有更“科学”的解释。

# objective-c - 如何缩放自定义引脚 MKMapKit

> ID：12858740
> 
> 赞同：1
> 
> 时间：2012-10-12T12:08:13.923
> 
> 标签：objective-c, ios, xcode, mapkit

我刚刚将自定义图钉图像添加到地图上的图钉。问题是图钉非常大并且覆盖了很多地图，放大后可以很好地放大，但缩小时会出现问题，因为用户看不到任何地图。

当用户缩小时，如何使图钉缩小？我用谷歌搜索了它，但似乎找不到任何答案。

这是我的[代码](http://pastebin.com/L6ZuJ1UN)

有谁知道如何做到这一点或我在哪里可以找到如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:17:54.077

来自“位置感知编程指南”：

> 无论地图的当前缩放级别如何，每次都以相同的比例绘制所有注释。

您需要跟踪地图的缩放级别并更改注释的图像大小。希望，这会有所帮助：[http ://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:34:55.573

You should review one or two tutorials on using mapkit to see how it's done. A map pin implemented as an MKMapAnnotationView will always scale properly (it will always stay the same size while the map scale changes.

Try looking over [this tutorial by Ray Wenderlich](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial). There is a lot to digest, but the main points to refer to are how to use the MKAnnotation protocol (see the MyLocation class in this tutorial), how pins are actually added as "annotations" (see the `- (void)plotCrimePositions:(NSString *)responseString` method), and, finally, how the MKMapViewDelegate methods are used, particularly `- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation`.

# php - 如何制作雷达图phpexcel

> ID：12858741
> 
> 赞同：1
> 
> 时间：2012-10-12T12:08:25.153
> 
> 标签：php, phpexcel

嗨，我应该使用 php excel 制作雷达图，但我无法找到制作它的方法。我可以看到条形图、饼图等的示例，但看不到雷达/蜘蛛图。周围也没有文档。

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:52:57.697

我刚刚在最新的 github 开发分支 (33chartcreate-radar.php) 中添加了一个雷达图示例，尽管您需要拉动最新的开发分支并修复 X ​​轴标签

# sql-server - 将 sp_linkedserver 参数从 SSRS 传递到 SQL Server 存储过程

> ID：12858744
> 
> 赞同：0
> 
> 时间：2012-10-12T12:08:46.683
> 
> 标签：sql-server, stored-procedures, reporting-services, mdx, linked-server

我正在尝试在 SQL Server Reporting Services 上结合 SQL 和 MDX 数据。

我找到了关于`sp_addlinkedserver`.

```
Exec sp_addlinkserver
   @server = 'localhost'
   @srvproduct = ''
   @provider = 'MSOLAP'
   @datasrc = 'localhost\instancename'
   @catalog = 'Databasename' 
```

上面代码中的问题是`@server, @datasrc`and的值`@catalog`是动态的。有时，根据客户选择的部署方式，SQL Server 数据库和 Olap 多维数据集位于不同的机器和不同的实例名称上。

我想创建一个 SSRS 报告，它可以根据它正在使用的“SSRS 数据源”`@server, @datasrc`传递参数。`@catalog`此参数将在 SQL Server 存储过程上转发，该过程有点类似于下面的代码

```
Exec sp_addlinkserver
  @server = @servername_of_the_olap_database
  @srvproduct = ''
  @provider = 'MSOLAP'
  @datasrc = @datasource_of_the_olap_database
  @catalog = @olap_database 
```

提前致谢。

# wso2 - wso2 自定义碳组件持久性 - jpa 或 wso2 数据服务

> ID：12858745
> 
> 赞同：0
> 
> 时间：2012-10-12T12:08:50.313
> 
> 标签：wso2, soa, wso2carbon, wso2dss

我正在寻找创建一个自定义碳组件，并且有一些持久性选择。主要选项似乎是 JPA 或 WSO2 数据服务。

1.  两种选择的优缺点是什么？
2.  还有其他推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:41:07.063

在 SOA 中访问数据的首选方式是使用服务。基本上，如果您使用 JPA，您的数据访问逻辑将仅限于使用该特定组件。如果您使用像数据服务这样的解决方案，那么这些服务将可以在全球范围内访问，从而实现可重用性和更一致的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:59:47.073

将数据服务暴露在单个服务边界之外的问题在于，您会失去隔离并将服务的内部实现暴露给外部世界。每个服务都应该使用自己的数据库（如果数据来自多个来源，您可以使用数据服务）。

拥有跨服务数据的单一数据库的地方是报告数据库，无论如何它应该与事务数据库不同（我称之为聚合报告的模式）

# windows - 使用 bat 文件查找和删除

> ID：12858746
> 
> 赞同：1
> 
> 时间：2012-10-12T12:08:50.767
> 
> 标签：windows, text, batch-file, replace

我有两个文本文件，比如说**A.txt**和**B.txt**。我使用 Microsoft Windows 作为我的操作系统

我想从 A.txt 文件中检索一个条目，假设一行，该行有一个单词。比方说狗。

现在我想在 B.txt 文件中找到单词 dog 并从 B.txt 文件中删除该条目。

我想使用 bat 文件来实现这一点。

任何帮助，想法，教程链接来完成这个任务？

——问候，兰加纳

PS。我已经使用 bat 文件完成了其他部分，我被困在这部分。感谢你的帮助。

# c# - 发布子类的集合

> ID：12858748
> 
> 赞同：6
> 
> 时间：2012-10-12T12:08:58.517
> 
> 标签：c#, knockout.js, asp.net-web-api, model-binding

我要求用户编辑潜在客户的报价列表，报价可以是不同的类型，例如：

*   报价产品类型A
*   报价产品类型B

所有报价类型共享一个公共基类，例如 QuoteBase。

我的报价在前端显示良好，并且似乎也回发了正确的数据。

但是，在服务器上它显然不知道要使用哪个子类，所以只使用基类。

我想我需要某种用于 WebApi 的自定义模型绑定器来检查隐藏字段，例如 ModelType，其中包含集合中对象的类型，然后模型绑定器创建一个这种类型的新对象并绑定我发布的属性此对象的值。

但是，我被困在这一点上，关于如何做到这一点的文档/博客很少。

我检查了 WebApi 的源代码，看看我是否可以扩展默认模型绑定器，但任何默认值都是密封类。

我只能通过外观实现 IModelBinder，我可以通过查找名为 ModelType 的值来创建正确的模型类型，但是如果有默认值，我不确定如何填充子类中的其余值我继承的模型绑定器我只会调用基类绑定方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T08:15:27.483

如果您的帖子集合来自请求正文，则不会通过模型绑定器。Web API 将使用格式化程序来反序列化内容。

如果你只是想支持 json，这很容易。只需将以下代码添加到您的 Web api 配置中：

```
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Auto; 
```

如果运行时类型与声明类型不同，该设置将让 json.net 将类型名称保存在有效负载中。当您将其回传时，json.net 会将有效负载反序列化为您在有效负载中指定的类型。

示例有效负载如下所示：

```
{"$type":"MvcApplication2.Models.Car, MvcApplication2","SeatCount":10,"WheelCount":4,"Model":0,"Brand":null}] 
```

# javascript - 关联数组值到 json

> ID：12858751
> 
> 赞同：1
> 
> 时间：2012-10-12T12:09:11.577
> 
> 标签：javascript, jquery, ajax, json

我有以下javascript关联数组

```
var list = {};
list['a'] = 'one';
list['b'] = 'two';
list['c'] = 'two'; 
```

通过 jquery ajax，我只想以 json 格式传递列表数组的值。

```
{"list":["one","two","two"]} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:13:22.230

您可以使用[`$.map()`](http://api.jquery.com/jQuery.map/)提取值：

```
$.ajax({
    data: {
        list: $.map(list, function(val) { return val; })
    },
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:13:46.527

```
var list = {};
list['a'] = 'one';
list['b'] = 'two';
list['c'] = 'two';

var newObj = {
    "list": []
};

for (key in list) {
    newObj.list.push(list[key]);
}

alert(JSON.stringify(newObj));​ 
```

[**演示。**](http://jsfiddle.net/karim79/rS7j6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:21:13.407

javascript中没有关联*数组*，只有属性没有顺序的对象。这意味着如果您想构建它们的数组，您需要先对属性进行排序：

```
var list = {a:'one', b:'two', c:'two'};

var result = {list:[]},
    keys = [];
for (var key in list)
    keys.push(key);
keys.sort();
for (var i=0; i<keys.length; i++)
    result.list[i] = list[keys[i]];
return JSON.stringify(result); 
```

或者与一些帮助函数相同的东西，可能并非所有浏览器都原生支持：

```
return {list: Object.keys(list).sort().map(function(key) { return list[key]; })}; 
```

# perl - 如何让 Jenkins 显示来自 perlcritic 的 TAP 输出

> ID：12858759
> 
> 赞同：1
> 
> 时间：2012-10-12T12:09:35.513
> 
> 标签：perl, jenkins, tap

这是捕获的命令和标准输出：

```
$perlcritic --gentle . | nl -nln | sed 's/\(.*source OK\)$/ok \1/' | sed '/source OK$/!s/^.*$/not ok &/' | tee perlcritic_tap.results.1 
```

输出：

```
not ok 1        Bareword file handle opened at line 184, column 17\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 2        Two-argument "open" used at line 184, column 17\.  See page 207 of PBP.  (Severity: 5)
not ok 3        Bareword file handle opened at line 311, column 9\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 4        Two-argument "open" used at line 311, column 9\.  See page 207 of PBP.  (Severity: 5)
not ok 5        Bareword file handle opened at line 371, column 12\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 6        Two-argument "open" used at line 371, column 12\.  See page 207 of PBP.  (Severity: 5)
not ok 7        Bareword file handle opened at line 390, column 13\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 8        Two-argument "open" used at line 390, column 13\.  See page 207 of PBP.  (Severity: 5)
not ok 9        Bareword file handle opened at line 522, column 5\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 10       Two-argument "open" used at line 522, column 5\.  See page 207 of PBP.  (Severity: 5)
not ok 11       Bareword file handle opened at line 615, column 10\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 12       Two-argument "open" used at line 615, column 10\.  See page 207 of PBP.  (Severity: 5) 
```

验证文件内容：

```
more perlcritic_tap.results.1 

not ok 1        Bareword file handle opened at line 184, column 17\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 2        Two-argument "open" used at line 184, column 17\.  See page 207 of PBP.  (Severity: 5)
not ok 3        Bareword file handle opened at line 311, column 9\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 4        Two-argument "open" used at line 311, column 9\.  See page 207 of PBP.  (Severity: 5)
not ok 5        Bareword file handle opened at line 371, column 12\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 6        Two-argument "open" used at line 371, column 12\.  See page 207 of PBP.  (Severity: 5)
not ok 7        Bareword file handle opened at line 390, column 13\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 8        Two-argument "open" used at line 390, column 13\.  See page 207 of PBP.  (Severity: 5)
not ok 9        Bareword file handle opened at line 522, column 5\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 10       Two-argument "open" used at line 522, column 5\.  See page 207 of PBP.  (Severity: 5)
not ok 11       Bareword file handle opened at line 615, column 10\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 12       Two-argument "open" used at line 615, column 10\.  See page 207 of PBP.  (Severity: 5) 
```

现在附加 TAP 格式的顶部：

```
echo 1.. `wc -l < perlcritic_tap.results.1` | cat - perlcritic_tap.results.1  > perlcritic_tap.results 
```

perlcritic_tap.results：

```
1.. 12
not ok 1        Bareword file handle opened at line 184, column 17\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 2        Two-argument "open" used at line 184, column 17\.  See page 207 of PBP.  (Severity: 5)
not ok 3        Bareword file handle opened at line 311, column 9\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 4        Two-argument "open" used at line 311, column 9\.  See page 207 of PBP.  (Severity: 5)
not ok 5        Bareword file handle opened at line 371, column 12\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 6        Two-argument "open" used at line 371, column 12\.  See page 207 of PBP.  (Severity: 5)
not ok 7        Bareword file handle opened at line 390, column 13\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 8        Two-argument "open" used at line 390, column 13\.  See page 207 of PBP.  (Severity: 5)
not ok 9        Bareword file handle opened at line 522, column 5\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 10       Two-argument "open" used at line 522, column 5\.  See page 207 of PBP.  (Severity: 5)
not ok 11       Bareword file handle opened at line 615, column 10\.  See pages 202,204 of PBP.  (Severity: 5)
not ok 12       Two-argument "open" used at line 615, column 10\.  See page 207 of PBP.  (Severity: 5) 
```

但我仍然无法让 Jenkins 识别 TAP 文件格式，并且出现错误：

```
Found matching files but did not find any TAP results. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:21:24.243

这是插件中的一个错误。即使您指定了不同的文件扩展名，它也会查找 *.tap（插件开发人员在编写该代码时可能已经喝醉了）。我已经[为此填写了一个问题](https://issues.jenkins-ci.org/browse/JENKINS-15586)，但是您可以让您的结果在当前版本的 TAP 插件（1.6）中工作，执行以下操作：

1）正如你提到的，删除TAP计划中的空间（即：1..12而不是1..12）。，

2) 不要写 perlcritic_tap.results，而是使用 perlcritic_tap.tap。

我正在为此准备一个补丁，并将在几个小时内发布。在 Jenkins 中同步更新站点需要一段时间，但希望到周一上班时您应该能够毫无问题地使用该插件。

你有任何需要都请告诉我。我在这里很新，并且没有足够的业力来添加更多链接，但是我使用您的 TAP 文件将插件的一些屏幕截图附加到 Jenkins JIRA 中的问题中；-)

一切顺利，-kinow

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:43:56.753

我认为这是您计划中的额外空间。请改用 1..12。（..后面没有空格）

我已经使用了 Jenkins JUnit 插件：

证明 --formatter=TAP::Formatter::JUnit

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:10:07.300

在对Jenkins 进行测试时，我使用[JUnit TAP 工具取得了成功。](https://metacpan.org/module/TAP%3a%3aHarness%3a%3aJUnit)最新版本也允许您通过环境变量将测试分组到包中。

```
export JUNIT_OUTPUT_FILE="$WORKSPACE/junit_app.xml"
export JUNIT_PACKAGE="app"
cd $WORKSPACE/Offer; prove -I ./lib -v --harness=TAP::Harness::JUnit 
```

维护者似乎反应灵敏（包 env-var 是我实现的一个小补丁），所以如果有任何限制，您应该能够纠正它们。

# objective-c - UITableView 的 indexPathForCell：总是返回 0 作为 indexPath.row

> ID：12858762
> 
> 赞同：6
> 
> 时间：2012-10-12T12:09:46.787
> 
> 标签：objective-c, uitableview, nsindexpath

我有一个 UITableView，里面有自定义单元格。此自定义单元格看起来像样式为“Detail Left”的普通单元格。但我的自定义单元格有一个详细标签和一个文本字段，以允许用户编辑文本。我有一个保存按钮，我想保存用户输入的所有数据。我使用本教程制作了自定义单元格：http: [//agilewarrior.wordpress.com/2012/05/19/how-to-add-a-custom-uitableviewcell-to-a-xib-file-objective-c/ #comment-4883](http://agilewarrior.wordpress.com/2012/05/19/how-to-add-a-custom-uitableviewcell-to-a-xib-file-objective-c/#comment-4883)

为了获取用户数据，我将文本字段的委托设置为表视图控制器（self）并实现了 textFieldDidEndEditing: 方法。在这种方法中，我询问文本字段的父视图（= 单元格）并询问此单元格的 indexPath。问题是，无论我编辑什么单元格，indexPath.row 总是得到 0。我究竟做错了什么？

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[CustomCell reuseIdentifier] forIndexPath:indexPath];
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = self.customCell;
    self.customCell = nil;
}

cell.label.text = @"Some label text";
cell.editField.delegate = self;
cell.accessoryType = UITableViewCellAccessoryNone;

return cell;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
CustomCell *cell = (CustomCell *) textField.superview;

NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

NSLog(@"the section is %d and row is %d", indexPath.section, indexPath.row);
...
} 
```

编辑：我刚刚发现，返回的 indexPath 为零。所以如果它是 nil 我得到标准值 0，那没关系。但是现在：为什么我的 indexPath 是 nil？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:58:28.233

我自己找到了解决方案。我在stackoverflow中找到了superview的代码，所以我只是复制了它。但这不起作用。你需要像这样做两个超级视图：

```
CustomCell *cell = (CustomCell *) textField.superview.superview; 
```

现在它工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:15:30.537

您可以在 CustomCell 中添加一个属性并在里面`index`填充它吗`indexPath.row``(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

# java - java程序中可用的变量（单例）

> ID：12858764
> 
> 赞同：2
> 
> 时间：2012-10-12T12:09:48.367
> 
> 标签：java

我需要在运行时设置一个布尔变量，任何其他类都可以访问该变量（无需在类之间传递变量）。这个变量将是一个配置设置，并且取决于用户在运行时设置的一些值。

我怀疑单例是要走的路，但是花了一上午的时间阅读它，我似乎找到了很多关于创建它们的最佳方式的示例（和论据），而没有提及如何实际使用它们。

单例是解决这个问题的方法吗？

如果是这样，任何人都可以提供一个可以设置布尔值的单例示例，可以从任何其他类静态访问吗？

编辑：我真是个白痴（完全使问题复杂化，并且错过了最简单的解决方案）。

`public static volatile boolean yourBoolean;`看起来它会完美地工作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T12:12:30.937

如果您只需要一个布尔值，则无需使用单例。只需声明一个：

```
public static volatile boolean yourBoolean; 
```

（如果您在多线程环境中，使用 volatile 关键字确保所做的所有更改在线程间可见）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:13:52.143

如果变量将包含在运行时**不会更改**的配置设置，我建议您使用`final static`变量。请参见下面的示例：

```
public class Main {
    public final static String CONFIGURATION_SETTING = "some_setting";
} 
```

您可以使用以下参考来访问此常量：

```
Main.CONFIGURATION_SETTING 
```

只要您导入 Main 类，它将在您的整个解决方案中可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:13:04.370

我认为单例不一定是您在这里需要的-正如您的问题本身所述，您所需要的只是一个可以被任何其他类访问的变量。

因为你不想通过任何东西，它必须是`static`- 当然它必须是`public`为了让其他班级看到它。

因此，实现这一目标的最简单方法如下：

```
public class Config {
    public static boolean flag;
} 
```

然后任何类都可以将值读取为`Config.flag`.

如果您的应用程序中有多个线程，则需要考虑线程安全性。对于简单的单个布尔值，您只需将该字段标记为`volatile`. 但是，如果您正在做一些更复杂的事情，或者一次更新多个值，您需要确保这些更新是原子的并且以适当的方式对其他线程可见。

# python - Google Api Auth Http 模块错误

> ID：12858765
> 
> 赞同：5
> 
> 时间：2012-10-12T12:09:48.863
> 
> 标签：python, google-api, google-calendar-api, google-api-python-client

我正在开发我的第一个使用 Google Api for Calendar 的应用程序。我在以下位置阅读了 Google 示例：[https ://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate)

我第一次运行下面的程序是成功的。我允许我的应用程序访问我的 Google 帐户，并且该应用程序在我的应用程序目录中创建了一个包含身份验证信息的 calendar.dat 文件。在我重命名文件后，验证码中的代码停止工作。我已经完全删除了该文件并从头开始重新创建它，但错误仍然存​​在。

我仍然获得 Google 身份验证页面并且仍然可以确认访问，之后我收到一条消息，表明身份验证流程已完成。

这是代码（我用我的应用程序详细信息填写的标准 Google 示例）：

```
import gflags
import httplib2

from apiclient.discovery import build
from oauth2client.file import Storage
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.tools import run

FLAGS = gflags.FLAGS

# Set up a Flow object to be used if we need to authenticate. This
# sample uses OAuth 2.0, and we set up the OAuth2WebServerFlow with
# the information it needs to authenticate. Note that it is called
# the Web Server Flow, but it can also handle the flow for native
# applications
# The client_id and client_secret are copied from the API Access tab on
# the Google APIs Console
FLOW = OAuth2WebServerFlow(
    client_id='YOUR_CLIENT_ID',
    client_secret='YOUR_CLIENT_SECRET',
    scope='https://www.googleapis.com/auth/calendar',
    user_agent='YOUR_APPLICATION_NAME/YOUR_APPLICATION_VERSION')

# To disable the local server feature, uncomment the following line:
# FLAGS.auth_local_webserver = False

# If the Credentials don't exist or are invalid, run through the native client
# flow. The Storage object will ensure that if successful the good
# Credentials will get written back to a file.
storage = Storage('calendar.dat')
credentials = storage.get()
if credentials is None or credentials.invalid == True:
  credentials = run(FLOW, storage)

# Create an httplib2.Http object to handle our HTTP requests and authorize it
# with our good Credentials.
http = httplib2.Http()
http = credentials.authorize(http)

# Build a service object for interacting with the API. Visit
# the Google APIs Console
# to get a developerKey for your own application.
service = build(serviceName='calendar', version='v3', http=http,
       developerKey='YOUR_DEVELOPER_KEY') 
```

这是输出：

```
Your browser has been opened to visit:

    https://accounts.google.com/o/oauth2/auth? (auth url shortened)

If your browser is on a different machine then exit and re-run this
application with the command-line parameter 

  --noauth_local_webserver

Traceback (most recent call last):
  File "C:\Users\Desktop\Google Drive\Code\Python\Rooster\calendar.py", line 2, in <module>
    import httplib2
  File "C:\Python27\lib\site-packages\httplib2-0.7.6-py2.7.egg\httplib2\__init__.py", line 42, in <module>
    import calendar
  File "C:\Users\Desktop\Google Drive\Code\Python\Rooster\calendar.py", line 33, in <module>
    credentials = run(FLOW, storage)
  File "C:\Python27\lib\site-packages\google_api_python_client-1.0-py2.7.egg\oauth2client\util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Python27\lib\site-packages\google_api_python_client-1.0-py2.7.egg\oauth2client\tools.py", line 169, in run
    credential = flow.step2_exchange(code, http=http)
  File "C:\Python27\lib\site-packages\google_api_python_client-1.0-py2.7.egg\oauth2client\util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Python27\lib\site-packages\google_api_python_client-1.0-py2.7.egg\oauth2client\client.py", line 1128, in step2_exchange
    http = httplib2.Http()
AttributeError: 'module' object has no attribute 'Http' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:05:02.990

问题是在您的运行目录中，您有一个名为 calendar.py 的文件。当 Google 的 httplib2 想要导入标准日历模块时，它会获取本地日历模块。在本地它执行它来执行导入。但由于 httplib2 尚未完全导入，因此 calendar.py 代码无法正常工作。只需将 calendar.py 重命名为 myCalendar.py 之类的名称即可。

# emacs - 简单的次要模式来保存简易菜单

> ID：12858766
> 
> 赞同：0
> 
> 时间：2012-10-12T12:09:53.827
> 
> 标签：emacs, menu, mode

我想要一个菜单​​，我会在需要时调用它。我认为次要模式- 是要走的路。所以我写了一个小模式，它只定义了keymap和easy-menu：

```
;; keymap:
(defvar bk-mdanalysis-mode-map
  (let ((map (make-sparse-keymap)))
    map)
  "Keymap for bk-mdanalysis minor mode")

;; menu:
(easy-menu-define mda bk-mdanalysis-mode-map "bk-mdanalysis-mode menu"
  '("BK-MDA"
    ["Test" (lambda () (interactive) (insert "test!")) t]
    ))

(define-minor-mode bk-mdanalysis-mode 
  nil nil nil 
  bk-mdanalysis-mode-map)

(provide 'bk-mdanalysis-mode) 
```

由于某种原因，它不起作用。怎么了？

**编辑**：

等一下——它起作用了！

我现在应该删除它 - 还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:07:01.800

您将 bk-mdanalysis-mode-map 作为第 5 个参数放置到 define-minor-mode 而它应该是第 4 个参数。幸运的是，define-minor-mode 无论如何都会默认使用它，所以它仍然有效，并且这第 5 个参数将被忽略。

# java - 如何将 JAR 添加到我正在开发的 Eclipse 插件中？

> ID：12858771
> 
> 赞同：2
> 
> 时间：2012-10-12T12:10:16.897
> 
> 标签：java, eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件。它具有其他插件/功能依赖项。但是我想向其中添加我自己喜欢的 JAR/库，例如说 logback。我怎样才能做到这一点，以便当我最终将它部署到更新站点时，它会在类路径中有这些 jar？

另外，我目前正在使用 eclipse 来运行插件（它会打开另一个 eclipse 实例）来运行它。这也需要在类路径上有 jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:54:57.063

您可以尝试以下步骤：-

1.  使用 Import>File System 将 jar 文件导入您的插件项目，例如在 /lib 目录中。
2.  使用“添加...”将 jars 添加到 plugin.xml>Runtime 选项卡的类路径部分。
3.  使用“新建...”添加“。” 图书馆回来（当然没有引号）。
4.  确保您的二进制构建在 plugin.xml>Build 选项卡上导出新的 jar 文件。
5.  节省。
6.  在项目上，使用上下文菜单>PDE 工具>更新类路径将 jar 正确添加到 eclipse 项目类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:41:32.963

在插件清单编辑器中选择`Runtime`选项卡并将您的 jar 添加到类路径部分。

# php - PHP 错误 - extension_dir 不存在 /usr/lib/php5/20090626 即使该文件夹存在

> ID：12858772
> 
> 赞同：1
> 
> 时间：2012-10-12T12:10:21.300
> 
> 标签：php, ubuntu, ubuntu-12.04

我使用 apt-get 在我的 Ubuntu 12.04 服务器中安装了 PHP 5.3.x。

现在，当我尝试运行特定的 PHP 脚本时，我收到了这个错误消息——

“extension_dir 不存在 /usr/lib/php5/20090626”

但是当我通过 SSH 登录并转到上述路径时，它确实存在并且还包含一些 PHP 扩展。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:20:03.450

原因是浏览器无法访问php文件。您应该更改文件权限。您可以使用`chown`和更改文件权限，如`777`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:15:04.383

use `chown` command for changing the ownership of the folder to the php user.

**EDIT:**

[Please visit here](https://stackoverflow.com/questions/2509334/finding-out-what-user-apache-is-running-as)

**The user running apache is also running php**

# php - PHP GD 渲染 Unicode Private Use Area (PUA) 字体

> ID：12858773
> 
> 赞同：4
> 
> 时间：2012-10-12T12:10:30.177
> 
> 标签：php, unicode, fonts, php-gd, font-awesome

我正在尝试在一个商业 Web 开发项目中使用 font-awesome 堆栈，我们已经把它带到了一个工作阶段，但是我们遇到了一个问题。

在移动设备（或不支持导入字体堆栈的浏览器）上查看我们的网站时，我们所有的图标都被替换为正方形（因为 font-awesome 使用 Unicode 字符来表示图标）。

这打破了我们网站的很多外观和感觉（尤其是我们编写的自定义管理面板）。

我们想出的解决方案是回退到使用 PHP 来呈现包含我们想要的图标的图像（我们想要指定的颜色作为参数，以及大小等）

这以前从来都不是问题，但现在我在让 PHP 呈现私人使用区域 (PUA) 字符时遇到了巨大的麻烦。

这是我正在尝试使用的一些示例代码：

```
<?php
  $icons = array(
    "icon-glass" => "\f000",
    "icon-music" => "\f001",
    "icon-search" => "\f002",
    // [...]
  );
  $font = "_assets/fonts/font-awesome/fontawesome-webfont.ttf";
  if(isset($_GET['icon'])) {
    $chr = $icons[$_GET['icon']];
    header("Content-type: image/png");
    $img = imagecreatetruecolor($_GET['w'], $_GET['h']);
    imagealphablending($img, true);
    $transparent = imagecolorallocatealpha( $img, 0, 0, 0, 127 );
    imagefill( $img, 0, 0, $transparent );
    $black = imagecolorallocate($img, 255, 0, 0);
    imagettftext($img, 20, 0, 32, 32, $black, $font, $chr);
    imagesavealpha($img, true);
    imagepng($img);
    exit;
  }
?>
<div style="background-color:black; width:64px; height:64px;">
  <img src="dev?icon=icon-dashboard&w=64&h=64">
</div>
<br />
<div style="background-color:blue; width:64px; height:64px;">
  <img src="dev?icon=icon-bolt&w=64&h=64">
</div> 
```

然而，这似乎只是渲染图像内的正方形。我在想这是因为我将 unicode 字符严重输入到 PHP 中，这可能是我错过的一些非常愚蠢的事情。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-10T13:52:55.550

我用来渲染 Font Awesome TTF 字形的 PHP 代码（主要是）：

```
$text = json_decode('"&#xF099;"');
...
imagesavealpha($im, true);
$trans = imagecolorallocatealpha($im, 0, 0, 0, 127);
imagefill($im, 0, 0, $trans);
imagealphablending($im, true);

$fontcolor = imagecolorallocatealpha($im, 0, 0, 0, 0);

// Add the text
imagettftext($im, $x, 0, 0, 0, $fontcolor, $font, $text);
imagesavealpha($im, true);
imagepng($im);
imagedestroy($im); 
```

json-decode() 处理 unicode 字符的复杂性。我使用了 GD 版本 2 或更高版本，因此必须使用点而不是像素。

我的全班考虑了所需的高度，但忽略了宽度。您可以在[https://github.com/sperelson/awesome2png](https://github.com/sperelson/awesome2png)查看它。

# excel - 尝试使excel粘贴无格式文本时出现Applescript错误

> ID：12858774
> 
> 赞同：0
> 
> 时间：2012-10-12T12:10:30.490
> 
> 标签：excel, macos, applescript

我正在遵循以下说明：[http](http://blog.mackerron.com/2009/05/19/paste-unformatted-keyboard-shortcut-office-2008-mac/) : //blog.mackerron.com/2009/05/19/paste-unformatted-keyboard-shortcut-office-2008-mac/ 在 Word 中运行良好。但是当我将下面的代码粘贴到 Applescript 并将其保存到时`/Documents/Microsoft User Data/Excel Script Menu Items`，我收到了这个错误`Syntax Error: Expected end of line, etc. but found “text”.`

```
try
  set theClip to Unicode text of (the clipboard as record)
  tell application "Microsoft Excel" to tell selection to type text text theClip
end try 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:06:01.820

尝试：

```
set theClip to the clipboard as text

tell application "Microsoft Excel"
    activate
    set value of active cell to theClip
end tell 
```

或这个：

```
set theClip to the clipboard as text

tell application "Microsoft Excel" to activate
tell application "System Events" to tell process "Microsoft Excel"
    keystroke theClip
end tell 
```

将脚本拖到此处：

```
tell application "Finder" to open (path to library folder from user domain as text) & "Application Support:Microsoft:Office:Excel Script Menu Items:" 
```

![在此处输入图像描述](../Images/dfe1f56b041718d17383305bca750e52.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:17:50.953

```
to type text text 
```

也许你应该重命名你的变量 text ？

# python - easy_install ：ImportError：找不到入口点（'console_scripts'，'easy_install'）

> ID：12858779
> 
> 赞同：28
> 
> 时间：2012-10-12T12:10:43.560
> 
> 标签：python, macos, easy-install

我使用easy_install 安装pip，使用pip 安装django、virtualenv 和virtualenvwrapper。

几周后我刚刚回到它，django 似乎不再工作了，但更令人担忧的是我无法重新开始该过程，因为 easy_install 返回以下错误：

```
Traceback (most recent call last):
  File "/usr/bin/easy_install-2.7", line 10, in <module>
    load_entry_point('setuptools==0.6c12dev-r88846', 'console_scripts', 'easy_install')()
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 318, in load_entry_point
  File "/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 2220, in load_entry_point
ImportError: Entry point ('console_scripts', 'easy_install') not found 
```

经过一个美好的夜晚狩猎后，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T12:59:53.380

你好像有版本冲突；注意`setuptools-0.6c11-py2.7.egg`路径，但`/usr/bin/easy_install-2.7`脚本想要加载`0.6c12dev-r88846`。

后者是开发版本；它具有嵌入在版本 ( `dev-r88846`) 中的 subversion 存储库的修订号。

我怀疑你有*两个*python 安装；一个是系统版本（in `/System/Library`，另一个是用python安装程序安装到`/Library/`的，其中的stub脚本`/usr/bin/`可能是用系统python安装的。

如果是这样，将有另一个存根副本`/Library/Python/2.7/bin/easy_install-2.7`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T08:48:28.977

我遇到了同样的问题，最终运行 2.7.3 easy_install by /opt/python2.7.3/bin/easy_install 运行良好

# c - c cygwin-abored（核心转储）

> ID：12858784
> 
> 赞同：0
> 
> 时间：2012-10-12T12:11:18.113
> 
> 标签：c, multithreading, cygwin

我已经尝试了很长时间，无法弄清楚这`'core dumped'`是从哪里来的。我正在`c`使用`cygwin`. 注释掉线程可以解决问题，但是注释掉线程中的整个代码什么都不会。这可能与线程的调用有关吗？它似乎正在工作，然后这突然发生了。我已经删除了大部分代码，这就是剩下的 -

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <stdint.h>
#include <pthread.h>
#include <string.h>

typedef enum {true=1, false=0} bool;

void *piThread(void *arg);
int finished;

int main(int argc, char *argv[])
{
    int i;
    int threads;
    bool display = false;
    long double pI = 0.0;
    void *status = malloc(sizeof(int));
    pthread_t thread_id[threads];

    if(argc < 2) {printf("not enough arguments"); exit(1);
    }else threads = atoi(argv[1]);

    if(argc == 3)
        if (strcmp(argv[2], "b") == 0)
            display = true;

    for(i=0; i<threads; i++)
    {
            pthread_create(&thread_id[i], NULL, piThread, NULL);    
            pthread_join(thread_id[i], &status);
            printf("pi: %Lf\n", pI);
    }
    return 0;
}

void *piThread(void *arg)
{
    int number = 0;
    number = 74;
    pthread_exit((void*)number);
} 
```

这导致中止错误。

```
Stack trace:
Frame     Function  Args
0028A6A4  76821184  (000000D0, 0000EA60, 00000000, 0028A7D8)
0028A6B8  76821138  (000000D0, 0000EA60, 000000A4, 0028A7B4)
0028A7D8  610DBE29  (00000000, FFFFFFFE, 77403B23, 77403B4E)
0028A8C8  610D915E  (00000000, 0028A918, 00000001, 00000000)
0028A928  610D962E  (76D709CD, 7427AED9, 00000003, 00000006)
0028A9D8  610D9780  (000011E8, 00000006, 002B002B, 800483D8)
0028A9F8  610D97AC  (00000006, 0028CE80, FFFDE000, 00000000)
0028AA28  610D9A85  (000000D0, 0028ABF0, 0028AA58, 610FA223)
End of stack trace 
```

我不知道出了什么问题！！命令行 is- gcc pi.exe 100 26 以上的任何组合都会导致此故障。感谢您的任何见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:14:59.797

You are allocating thread_id before 'threads' is defined. This should fix that problem at least.

```
if(argc < 2) {printf("not enough arguments"); exit(1);
}else threads = atoi(argv[1]);
pthread_t thread_id[threads]; 
```

# c# - 如何编写带有命名参数的方法？

> ID：12858793
> 
> 赞同：0
> 
> 时间：2012-10-12T12:11:45.903
> 
> 标签：c#, asp.net-mvc

我有一个下面定义的方法。

```
public static MvcHtmlString DisplayReadOnlyGrid(
    this HtmlHelper htmlHelper,
    string containerId, 
    MvcHtmlString innerHtml)
{
    try
    {
        var outerDiv = new TagBuilder("DIV");
        outerDiv.AddCssClass("ML5 MT5 MR5");
        outerDiv.MergeAttribute("id", containerId);
        if (innerHtml != null && !innerHtml.Equals(string.Empty))
        {
            outerDiv.InnerHtml = innerHtml.ToString();
        }
        return MvcHtmlString.Create(outerDiv.ToString());
    }
    catch 
    {                
        throw;
    }
} 
```

当我调用这个方法时，我需要如下格式：

```
DisplayReadOnlyGrid(containerId="mycontainerid", innerHtml="innerhtml") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:13:58.773

尝试这个：

```
html.DisplayReadOnlyGrid(containerId: "mycontainerid", innerHtml: "innerhtml"); 
```

您可以按任意顺序传递参数，并且可以同时传递位置参数和命名参数，但是出于显而易见的原因，命名参数必须跟在位置参数之后。

MSDN：http: [//msdn.microsoft.com/en-us/library/dd264739.aspx](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:13:19.610

由于 C# 4.0 开箱即用，请参见[此处](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。您无需执行任何操作即可启用它。
但是，请注意正确的语法使用冒号，而不是等号：

```
helper.DisplayReadOnlyGrid(containerId: "mycontainerid", innerHtml: "innerhtml"); 
```

如果您使用的是旧版本，则根本无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:14:37.523

Take a look at the MSDN [here](http://msdn.microsoft.com/en-us/library/dd264739.aspx).

The format for using named arguments is as follows:

```
helper.DisplayReadOnlyGrid(containerId: "mycontainerid", innerHtml: "innerhtml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:15:03.947

**Explanation for the method**:

First its an [**extension method**](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx). Which is notable with the key word `this` in the parameters. To be precise its an extension method on `HtmlHelper`

Second the parameters: They are [**Named parameters**](http://msdn.microsoft.com/en-us/library/dd264739.aspx)(feature of C# 4.0) and you can call that method:

```
helper.DisplayReadOnlyGrid(containerId:"mycontainerid", innerHtml:"innerhtml") 
```

Named parameters allow you to specify parameters in any order and are helpful with default parameters as well, which is also a new feature in C# 4.0

# gcc - 使用 python3 安装 matplotlib 时 gcc 出错

> ID：12858804
> 
> 赞同：2
> 
> 时间：2012-10-12T12:12:25.670
> 
> 标签：gcc, python-3.x, matplotlib, ubuntu-12.04

我正在尝试使用 Python3 安装`matplotlib`，如[如何使用 Python3.2 安装 matplotlib 中所述](https://stackoverflow.com/questions/8605847/how-to-install-matplotlib-with-python3-2)。发生错误：**命令“gcc”失败，退出状态为 1**，当我这样做时

```
python3 setup.py build

 basedirlist is: ['/usr/local', '/usr']
 ============================================================================
 BUILDING MATPLOTLIB
        matplotlib: 1.3.x
            python: 3.2.3 (default, Sep 10 2012, 18:14:40)  [GCC 4.6.3]
          platform: linux2

 REQUIRED DEPENDENCIES
             numpy: 1.6.1
         freetype2: found, but unknown version (no pkg-config)
                    * WARNING: Could not find 'freetype2' headers in any
                    * of '/usr/local/include', '/usr/include',
                    * '/usr/local/include', '/usr/include', '.',
                    * '/usr/local/include/freetype2',
                    * '/usr/include/freetype2',
                    * '/usr/local/include/freetype2',
                    * '/usr/include/freetype2', './freetype2'.

OPTIONAL BACKEND DEPENDENCIES
            libpng: found, but unknown version (no pkg-config)
                    * Could not find 'libpng' headers in any of
                    * '/usr/local/include', '/usr/include',
                    * '/usr/local/include', '/usr/include', '.'
           Tkinter: no
                    * Using default library and include directories for
                    * Tcl and Tk because a Tk window failed to open.
                    * You may need to define DISPLAY for Tk to work so
                    * that setup can determine where your libraries are
                    * located. Tkinter present, but header files are not
                    * found. You may need to install development
                    * packages.
              Gtk+: no
                    * Building for Gtk+ requires pygtk; you must be able
                     * to "import gtk" in your build/install environment
    Mac OS X native: no
                Qt: no
               Qt4: no
            PySide: no
             Cairo: no

OPTIONAL DATE/TIMEZONE DEPENDENCIES
          dateutil: matplotlib will provide
              pytz: matplotlib will provide
               six: matplotlib will provide
adding pytz

OPTIONAL USETEX DEPENDENCIES
            dvipng: 1.14
       ghostscript: 9.05
             latex: 3.1415926
           pdftops: 0.18.4

[Edit setup.cfg to suppress the above messages]
============================================================================
pymods ['pylab', 'six']
packages ['matplotlib', 'matplotlib.backends', 'matplotlib.backends.qt4_editor',   'matplotlib.projections', 'matplotlib.testing', 'matplotlib.testing.jpl_units', 'matplotlib.tests', 'mpl_toolkits', 'mpl_toolkits.mplot3d', 'mpl_toolkits.axes_grid', 'mpl_toolkits.axes_grid1', 'mpl_toolkits.axisartist', 'matplotlib.sphinxext', 'matplotlib.tri', 'matplotlib.delaunay', 'pytz', 'dateutil', 'dateutil.zoneinfo']
running install
running build
running build_py
copying lib/matplotlib/mpl-data/matplotlibrc -> build/lib.linux-x86_64- 3.2/matplotlib/mpl-data

running build_ext
building 'matplotlib.ft2font' extension
gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector --param=ssp-buffer- size=4 -Wformat -Wformat-security -Werror=format-security -fPIC -DPY_ARRAY_UNIQUE_SYMBOL=MPL_ARRAY_API -DPYCXX_ISO_CPP_LIB=1 -DPYCXX_PYTHON_2TO3=1 -I/usr/local/include -I/usr/include -I/usr/lib/python3/dist-packages/numpy/core/include -I/usr/local/include -I/usr/include -I. -I/usr/local/include/freetype2 -I/usr/include/freetype2 -I/usr/lib/python3/dist-packages/numpy/core/include/freetype2 -I/usr/local/include/freetype2 -I/usr/include/freetype2 -I./freetype2 - I/usr/include/python3.2mu -c src/ft2font.cpp -o build/temp.linux-x86_64-3.2/src/ft2font.o
In file included from ./CXX/Extensions.hxx:37:0,
             from src/ft2font.h:6,
             from src/ft2font.cpp:3:
./CXX/WrapPython.h:58:20: erreur fatale: Python.h : Aucun fichier ou dossier de ce type
compilation terminée.
error: command 'gcc' failed with exit status 1 
```

我在帖子错误中尝试了答案[：命令'gcc'在安装eventlet时失败，退出状态为1，](https://stackoverflow.com/questions/11094718/error-command-gcc-failed-with-exit-status-1-while-installing-eventlet)但获得了相同的错误。我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:42:38.333

我在安装了许多库后找到了解决方案......我最终构建了所有依赖项：

```
 sudo apt-get build-dep python-matplotlib 
```

之后：

```
sudo python3 setup.py install 
```

感谢您的帮助佩德罗

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:49:43.420

您缺少*Python 3*开发文件（头文件和静态库）。例如在 Ubuntu 中，您可以使用以下命令安装相关软件包：

```
$ sudo apt-get install python3-dev 
```

您还需要`freetype2`开发包：

```
$ sudo apt-get install libfreetype6-dev 
```

# python - 立体太阳图 matplotlib 极坐标图 python

> ID：12858806
> 
> 赞同：5
> 
> 时间：2012-10-12T12:12:29.703
> 
> 标签：python, matplotlib, polar-coordinates

我正在尝试创建一个类似于这些的简单立体太阳路径图： [http ://wiki.naturalfrequency.com/wiki/Sun-Path_Diagram](http://wiki.naturalfrequency.com/wiki/Sun-Path_Diagram)

我可以旋转极坐标图并将比例设置为 90。如何反转 y 轴？当前轴从 0>90 开始，如何将轴反转为 90>0 以表示方位角？

我试过了：

```
ax.invert_yaxis()
ax.yaxis_inverted() 
```

此外，我将如何创建立体投影而不是等距投影？

我的代码：

```
import matplotlib.pylab as plt
testFig = plt.figure(1, figsize=(8,8))
rect = [0.1,0.1,0.8,0.8]
testAx = testFig.add_axes(rect,polar=True)
testAx.invert_yaxis()
testAx.set_theta_zero_location('N')
testAx.set_theta_direction(-1)

Azi = [90,180,270]
Alt= [0,42,0]
testAx.plot(Azi,Alt)
plt.show() 
```

目前我的代码似乎甚至没有正确绘制线条，我是否需要将角度或度数转换为其他东西？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:33:29.020

我终于有时间玩 matplotlib。经过大量搜索，Joe Kington 指出的正确方法是对 Axes 进行子类化。我找到了一种使用出色底图模块的更快方法。

下面是我为stackoverflow改编的一些代码。太阳高度和方位角是使用 Pysolar 计算的，并带有一组在 pandas 中创建的时间序列图章。

```
import matplotlib.pylab as plt
from mpl_toolkits.basemap import Basemap
import numpy as np

winterAzi = datafomPySolarAzi
winterAlt = datafromPySolarAlt

# create instance of basemap, note we want a south polar projection to 90 = E
myMap = Basemap(projection='spstere',boundinglat=0,lon_0=180,resolution='l',round=True,suppress_ticks=True)
# set the grid up
gridX,gridY = 10.0,15.0
parallelGrid = np.arange(-90.0,90.0,gridX)
meridianGrid = np.arange(-180.0,180.0,gridY)

# draw parallel and meridian grid, not labels are off. We have to manually create these.
myMap.drawparallels(parallelGrid,labels=[False,False,False,False])
myMap.drawmeridians(meridianGrid,labels=[False,False,False,False],labelstyle='+/-',fmt='%i')

# we have to send our values through basemap to convert coordinates, note -winterAlt
winterX,winterY = myMap(winterAzi,-winterAlt)

# plot azimuth labels, with a North label.
ax = plt.gca()
ax.text(0.5,1.025,'N',transform=ax.transAxes,horizontalalignment='center',verticalalignment='bottom',size=25)
for para in np.arange(gridY,360,gridY):
    x= (1.1*0.5*np.sin(np.deg2rad(para)))+0.5
    y= (1.1*0.5*np.cos(np.deg2rad(para)))+0.5
    ax.text(x,y,u'%i\N{DEGREE SIGN}'%para,transform=ax.transAxes,horizontalalignment='center',verticalalignment='center')

# plot the winter values
myMap.plot(winterX,winterY ,'bo') 
```

请注意，目前我只绘制点，您必须确保线点在日出/日落时在 alt 0 处有一个点。

![立体图，注意我已经绘制了冬/夏至和秋分](../Images/204d9b8d68b8549bb5a43a592985ab1a.png)

# scala - 如何在 Play Framework 2 Scala 应用程序中列出 public/images 目录中的所有文件？

> ID：12858808
> 
> 赞同：5
> 
> 时间：2012-10-12T12:12:34.327
> 
> 标签：scala, playframework-2.0

我想列出我的 Scala Play Framework 2 应用程序的 public/images 目录中的所有文件名，以便 Play 应用程序只将这些文件名列出到 HTML 页面。如何才能做到这一点？

是否有正确的方法可以访问 public/images 目录以读取文件或列出目录？我不想使用绝对目录路径。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:25:15.087

`getFile(relateivePath: String): File`对象上有方法[`Play`](http://www.playframework.org/documentation/api/2.0.4/scala/play/api/Play$.html)，也[`Application`](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.Application)有返回相对于应用程序根目录的文件的类。在你的情况下：

```
Play.getFile("public/images") 
```

返回[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)对象，代表`public/images/`目录。你可以调用它`list`来`listFiles`获取目录的内容。

# iphone - 更改 NSString 的一部分

> ID：12858810
> 
> 赞同：1
> 
> 时间：2012-10-12T12:12:40.630
> 
> 标签：iphone, objective-c, ios, nsstring

我有一个 urlString 是：`http://www.youtube.com/watch?v=5kdEhVtNFPo`

我希望能够将其更改为：`http://www.youtube.com/v/5kdEhVtNFPo`

我该怎么做呢？我不确定是否应该使用实例方法`substringWithRange:`或`substringFromIndex:`

我试过这个删除第一部分并只留下视频ID（它删除`http://www.youtube.com/watch?v=`）现在我只需要添加`http://www.youtube.com/v/`到字符串的开头。

```
NSString *newUrlString = [urlString substringFromIndex:31]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T12:16:53.063

```
NSString* newUrl = [oldUrl stringByReplacingOccurrencesOfString:@"watch?v=" withString:@"v/"]; 
```

请注意，这仅在 URL 不包含字符串“watch?v=”的更多实例时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:33:18.283

我将提出一种不同的方式，它可能对您提供的输入更加灵活：

```
- (NSString) newURLStringForOldURLString:(NSString *)oldURLString
{
    NSString *newURLString = nil;
    NSURL *url = [[NSURL alloc] initWithString:oldURLString];
    NSString *query = [url query]; /* v=5kdEhVtNFPo */
    NSArray *fieldValuePairs = [query componentsSeparatedByString:@"&"];
    for (NSString *pair in fieldValuePairs) {
        NSArray *components = [pair componentsSeparatedByString:@"="];
        NSString *field = [components objectAtIndex:0];
        NSString *value = [components objectAtIndex:1];
        if ([field isEqualToString:@"v"]) {
            newURLString = [NSString stringWithFormat:@"%@://%@:%@/%@/%@", [url scheme], [url domain], [url port], field, value];
            break;
        }
    }
    [url release];
    return newURLString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:26:01.997

另一种选择：

```
NSString *str3 = @"http://www.youtube.com/watch?v=5kdEhVtNFPo";
NSString *outputString;
NSRange range = [str3 rangeOfString:@"watch?v="];
if(range.location != NSNotFound)
{
    outputString = [str3 stringByReplacingCharactersInRange:range withString:@"v/"];
    NSLog(@"%@",outputString);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:29:44.600

为了足够灵活，您可以使用[`NSRegularExpression`](http://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)：

```
NSString *str = @"http://www.youtube.com/watch?v=5kdEhVtNFPo";
NSString *pattern = @"((?:http:\\/\\/){0,1}www\\.youtube\\.com\\/)watch\\?v=([:alnum:]+)";
NSString *template = @"$1v/$2";
NSRegularExpression *regexp = [NSRegularExpression 
          regularExpressionWithPattern:pattern 
                               options:NSRegularExpressionCaseInsensitive 
                                 error:nil];
NSString *newStr = [regexp stringByReplacingMatchesInString:str 
          options:0 range:NSMakeRange(0, [str length]) withTemplate:template];
NSLog(@"Replaced: %@", newStr); 
```

# actionscript-3 - Coverflow - 索引的顺序不能按预期工作

> ID：12858823
> 
> 赞同：0
> 
> 时间：2012-10-12T12:13:23.197
> 
> 标签：actionscript-3, coverflow

我做了一个 Coverflow 课程，一切正常，但我遇到了一个问题。如果我单击一个项目或使用箭头键浏览图像，我想要这样的图像形成：

**1）我想要什么**

![想要的封面流量项目](../Images/20c94dcc900ac8c46c20c7163372a5b8.png)

我在右侧一切正常，我的对象没有正确放置，它们相互放置：

**2) 怎么了**

![怎么了](../Images/c71e5e319a7edfdbaa1ef7d89097b74e.png)

现在你在右侧看到它有点搞砸了，图像不应该像那样重叠，它们应该像在左侧一样相互放置。

**3）我建立图像的代码**

```
package be.devine.cp3.itemGroup
{

import com.greensock.TweenLite;
import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.events.MouseEvent;

public class Coverflow extends Sprite
{
    public var images:Array;
    private var _currentImageIndex:int;
    private var imageSize:uint;

    public function Coverflow(images:Array)
    {
        this.images = [];

        for each(var image:DisplayObject in images)
        {
            if(image.width > imageSize)
            {
                imageSize = image.width;
            }
            var imageContainer:Sprite = new Sprite();
            image.x = -1 * (image.width >> 1);
            image.y = -1 * (image.height >> 1);

            imageContainer.addChild(image);
            this.images.push(imageContainer);
        }
        this.currentImageIndex = images.length >> 1;

    }

    private function imageClickHandler(event:MouseEvent):void
    {
        var targ:DisplayObject = event.currentTarget as DisplayObject;
        currentImageIndex = getChildIndex(targ);
    }

    public function display():void
    {
        while(this.numChildren > 0)
        {
            removeChildAt(0);
        }

        var depth:Number = 0;

        for(var i:int = 0; i < images.length; i++)
        {
            var image:DisplayObject = images[i];
            var xPos:Number = 0;
            xPos = (i - _currentImageIndex) * imageSize;

            if(i < _currentImageIndex) { //moet er links van komen -> negatieve x
                image.rotationY = -90; //-45
                depth++;
            } else if(i == _currentImageIndex) {//in het midden            {
                image.rotationY = 0;
                depth = 0;

            } else {//moet rechts komen -> positieve x
                image.rotationY = 90; //45
                depth ++;

            }

            addChild(image);

            TweenLite.to(image,.5, {x:xPos});
            var zPos:int =  (i - _currentImageIndex);
            image.addEventListener(MouseEvent.CLICK, imageClickHandler);

        }

    }

    public function get currentImageIndex():int {
        return _currentImageIndex;
    }

    public function set currentImageIndex(value:int):void {

        value = Math.min(images.length -1, Math.max(0, value));

        if(_currentImageIndex != value)
        {
            _currentImageIndex = value;
            display();
        }
    }

}
} 
```

我已经在网上搜索过，但我找不到关于封面流的类似内容......我知道它必须通过设置图像的子索引来做一些事情，但我不知道如何计算它:)。我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:44:55.977

我找到了解决方案 :) 必须在更改子索引并使用 setChildIndex 而不是 addChildAt 之前添加图像：

```
 for(var i:int = 0; i < images.length; i++)
    {
        var image:DisplayObject = images[i];
        var xPos:Number = 0;
        var rY:int = 0;

        xPos = (i - _currentImageIndex) * imageSize;
        addChild(image);

        if(i < _currentImageIndex) { //moet er links van komen -> negatieve x
            rY = -90;
            setChildIndex(image,  numChildren-1);
        } else if(i == _currentImageIndex) {//in het midden            {
            rY = 0;
        } else {//moet rechts komen -> positieve x
            rY = 90;
            setChildIndex(image, 0);
        }
        TweenLite.to(image,.5, {x:xPos, rotationY: rY});
        image.addEventListener(MouseEvent.CLICK, imageClickHandler);

    } 
```

# schemaless - MongoKit：将 use_schemaless 与 use_dot_notation 一起使用时出现意外行为

> ID：12858832
> 
> 赞同：2
> 
> 时间：2012-10-12T12:14:04.000
> 
> 标签：schemaless, mongokit

我正在使用 MongoKit (v0.8.1) 并且对使用`use_schemaless=True`和定义文档时的行为有点困惑`use_dot_notation=True`。保存到数据库时，MongoKit 会忽略任何动态属性（即结构字典中未定义的任何内容）。通过通常的方括号访问文档时按预期工作。显然，我可以通过覆盖来解决这个问题，`__setattr__`但我发现它有点出乎意料。还是这是故意的？谢谢！

# ruby-on-rails - 闪存存储在 Rails 中的位置以及如何为多个请求保留它们

> ID：12858833
> 
> 赞同：0
> 
> 时间：2012-10-12T12:14:06.630
> 
> 标签：ruby-on-rails

在确切存储闪存的轨道中，就像存储在表格或其他东西中一样，我们如何使闪存在任何特定的请求中都可用。？？？

ps：我知道如何使用 flash.keep 但正在寻找其他答案，因为我不想在每个控制器中提及 .keep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:24:51.670

查看[Rails API](http://api.rubyonrails.org/files/actionpack/lib/action_dispatch/middleware/flash_rb.html)，

> flash 提供了一种在动作之间传递临时对象的方法。 **任何你放在闪光灯里的东西都会暴露在下一个动作中，然后被清除掉**。这是进行通知和警报的好方法，例如`flash[:notice] = "Post successfully created"`在重定向到显示操作之前设置的创建操作，然后可以将 Flash 公开到其模板。实际上，该曝光是自动完成的

请注意我在上面用粗体标记的内容 - 所以，是的，正如 Salil 提到的，存储在`session`中将是一种替代方法。也就是说，它可能不是存储这些的*最佳位置。*

# ruby - 删除哈希中不在数组中的键

> ID：12858836
> 
> 赞同：11
> 
> 时间：2012-10-12T12:14:12.997
> 
> 标签：ruby, hash

我找不到从哈希中删除不在给定键名数组中的键的方法。我读到我可以使用`except`or `slice`，但是我怎样才能向他们提供我想要保留的键名列表？例如，如果我有这个哈希：

```
entry = {:title=>"casablanca", :media=>"dvd", :localeLanguage=>"en", :imdb=>"", :freebase=>"", :originalTitle => 'casablanca', :season=> '1', :episode => '3'} 
```

我只想保留，说，`:title`和`:media`，`:localeLanguage`我怎么能只保留那些我指定了键名的值？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-11-12T09:38:51.083

在 Rails 4+ 中，使用[slice](http://apidock.com/rails/Hash/slice)：

```
entry = {:title=>"casablanca", :media=>"dvd", :localeLanguage=>"en", :imdb=>"", :freebase=>"", :originalTitle => 'casablanca', :season=> '1', :episode => '3'}
keepers = [:title, :media, :localeLanguage]

entry.slice(*keepers)
# => {:title=>"casablanca", :media=>"dvd", :localeLanguage=>"en"} 
```

较短的版本（结果相同）：

```
entry.slice(*%i(title media localeLanguage)) 
```

使用[切片！](http://apidock.com/rails/Hash/slice!)就地修改您的哈希。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-12T12:30:11.493

我会使用`keep_if`（需要 1.9.2）。

```
keepers = [:title, :media, :localeLanguage]

entry.keep_if {|k,_| keepers.include? k }

#=> {:title=>"casablanca", :media=>"dvd", :localeLanguage=>"en"} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T12:18:57.337

在 Ruby 1.9.3 中：

```
entry = entry.select do |key, value|
  [:title, :media, :localeLanguage].include?(key)
end
p entry
# => {:title=>"casablanca", :media=>"dvd", :localeLanguage=>"en"} 
```

在 Ruby 1.8.7 中，Hash#select 返回一个数组数组，因此使用 Hash[] 将该数组转换为哈希：

```
entry = Hash[
  entry.select do |key, value|
    [:title, :media, :localeLanguage].include?(key)
  end
]
# => {:media=>"dvd", :localeLanguage=>"en", :title=>"casablanca"} 
```

顺序的不同是因为在 Ruby 1.8.7 中，哈希是无序的。

# c++ - 使用 SFINAE 进行模板类专业化

> ID：12858839
> 
> 赞同：44
> 
> 时间：2012-10-12T12:14:16.303
> 
> 标签：c++, templates, c++11, sfinae

假设我有这些声明

```
template<typename T> class User;
template<typename T> class Data; 
```

并希望实现`User<>`for`T = Data<some_type>` *和任何派生自的类，`Data<some_type>`*但也允许在其他地方定义的其他专业化。

如果我还没有类模板的声明`User<>`，我可以简单地

```
template<typename T,
         typename A= typename std::enable_if<is_Data<T>::value>::type>
class User { /*...*/ }; 
```

在哪里

```
template<template<typename> data>> struct is_Data
{ static const bool value = /* some magic here (not the question) */; }; 
```

但是，这有两个模板参数，因此与之前的声明冲突，其中`User<>`仅使用一个模板参数声明。还有什么我可以做的吗？

（笔记

```
template<typename T,
         typename A= typename std::enable_if<is_Data<T>::value>::type>
class User<T> { /*...*/ }; 
```

不起作用（*默认模板参数可能不能用于部分特化*），也不能

```
template<typename T> class User<Data<T>> { /*...*/ }; 
```

因为它不允许从 派生的类型`Data<>`，所以也不允许

```
template<typename T>
class User<typename std::enable_if<is_Data<T>::value,T>::type>
{ /*...*/ }; 
```

因为*模板参数`T`不用于偏特*化。）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T13:09:09.543

**IF**的原始声明`User<>`可以适应

```
template<typename, typename=std::true_type> class User; 
```

然后我们可以找到一个解决方案（按照 Luc Danton 的评论，而不是使用[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)）

```
template<typename>
struct is_Data : std::false_type {};
template<typename T>
struct is_Data<Data<T>> : std::true_type {};

template<typename T>
class User<T, typename is_Data<T>::type >
{ /* ... */ }; 
```

然而，这*并没有回答原来的问题*，因为它需要改变原来的定义`User`。我还在*等待更好的答案*。这可能最终*证明没有其他解决方案是可能的*。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-22T22:46:26.643

既然你说你还在等待更好的答案，这就是我的看法。它并不完美，但我认为它可以让你尽可能地使用 SFINAE 和部分专业化。（我猜 Concepts 将提供一个完整而优雅的解决方案，但我们将不得不等待更长的时间。）

该解决方案依赖于最近才在 C++14 最终版本之后的标准工作草案中指定的别名模板功能，但已被实现支持一段时间。N4527 [14.5.7p3] 草案中的相关措辞是：

> 但是，如果模板 ID 是依赖的，则后续模板参数替换仍适用于模板 ID。[ 例子：
> 
> ```
> template<typename...> using void_t = void;
> template<typename T> void_t<typename T::foo> f();
> f<int>(); // error, int does not have a nested type foo 
> ```
> 
> —结束示例]

这是实现此想法的完整示例：

```
#include <iostream>
#include <type_traits>
#include <utility>

template<typename> struct User { static void f() { std::cout << "primary\n"; } };

template<typename> struct Data { };
template<typename T, typename U> struct Derived1 : Data<T*> { };
template<typename> struct Derived2 : Data<double> { };
struct DD : Data<int> { };

template<typename T> void take_data(Data<T>&&);

template<typename T, typename = decltype(take_data(std::declval<T>()))> 
using enable_if_data = T;

template<template<typename...> class TT, typename... Ts> 
struct User<enable_if_data<TT<Ts...>>> 
{ 
    static void f() { std::cout << "partial specialization for Data\n"; } 
};

template<typename> struct Other { };
template<typename T> struct User<Other<T>> 
{ 
    static void f() { std::cout << "partial specialization for Other\n"; } 
};

int main()
{
    User<int>::f();
    User<Data<int>>::f();
    User<Derived1<int, long>>::f();
    User<Derived2<char>>::f();
    User<DD>::f();
    User<Other<int>>::f();
} 
```

运行它会打印：

```
primary
partial specialization for Data
partial specialization for Data
partial specialization for Data
primary
partial specialization for Other 
```

正如你所看到的，有一个问题：偏特化没有被选择为`DD`，而且它不能被选择，因为我们声明它的方式。那么，我们为什么不直接说

```
template<typename T> struct User<enable_if_data<T>> 
```

并允许它匹配`DD`？这实际上在 GCC 中有效，但由于 [14.5.5p8.3, 8.4] 被 Clang 和 MSVC 正确拒绝（[p8.3] 将来可能会消失，因为它是多余的 - [CWG 2033](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#2033)）：

> *   特化的参数列表不应与主模板的隐式参数列表相同。
> *   专业化应比主要模板 (14.5.5.2) 更专业化。

`User<enable_if_data<T>>`等价于`User<T>`(模替换到该默认参数，它是单独处理的，如上面第一个引用所解释的)，因此是一种无效形式的部分特化。不幸的是，匹配类似的东西`DD`通常需要表单的部分专业化参数`T`- 它没有其他形式可以具有并且仍然匹配每个案例。所以，恐怕我们可以最终说这部分在给定的约束下是无法解决的。（有[Core issue 1980](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1980)，它暗示了一些关于模板别名使用的未来可能的规则，但我怀疑它们会让我们的案例有效。）

只要派生自的类`Data<T>`本身就是模板特化，使用上面的技术进一步约束它们就可以了，所以希望这对你有一些用处。

* * *

编译器支持（这是我测试的，其他版本也可以）：

*   Clang 3.3 - 3.6.0，带有`-Wall -Wextra -std=c++11 -pedantic`- 如上所述。
*   GCC 4.7.3 - 4.9.2，相同的选项 - 与上述相同。奇怪的是，GCC 5.1.0 - 5.2.0 不再使用正确版本的代码选择部分特化。这看起来像是一种回归。我没有时间整理一份适当的错误报告；如果你愿意，可以随意做。该问题似乎与使用参数包和模板模板参数有关。无论如何，GCC 使用 接受不正确的版本`enable_if_data<T>`，因此可以作为临时解决方案。
*   MSVC：Visual C++ 2015，带有`/W4`，如上所述。旧版本不喜欢`decltype`in default 参数，但该技术本身仍然有效 - 用另一种表达约束的方式替换 default 参数使其适用于 2013 Update 4。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-19T20:14:10.050

由于您只想在单个条件为真时实现它，因此最简单的解决方案是使用静态断言。它不需要 SFINAE，如果使用不正确，会给出明显的编译错误，`User<>`并且不需要修改声明：

```
template<typename T> class User {
  static_assert(is_Data<T>::value, "T is not (a subclass of) Data<>");
  /** Implementation. **/
}; 
```

另请参阅：[何时使用`static_assert`而不是 SFINAE？](https://stackoverflow.com/questions/11984768/when-to-use-static-assert-instead-of-sfinae). 这`static_assert`是一个 c++11 构造，但是对于 c++11 之前的编译器有很多解决方法，例如：

```
#define STATIC_ASSERT(consdition,name) \
  typedef char[(condition)?1:-1] STATIC_ASSERT_ ## name 
```

* * *

如果 的声明`user<>`可以更改，并且您希望根据 的值进行两种实现`is_Data`，那么还有一个不使用 SFINAE 的解决方案：

```
template<typename T, bool D=is_Data<T>::value> class User;

template<typename T> class User<T, true> {
  static_assert(is_Data<T>::value, "T is not (a subclass of) Data<>"); // Optional
  /* Data implementation */
};

template<typename T> class User<T, false> {
  static_assert(!is_Data<T>::value, "T is (a subclass of) Data<>"); // Optional
  /* Non-data implementation */
}; 
```

静态断言只检查用户是否不小心`D`错误地指定了模板参数。如果`D`未明确指定，则可以省略静态断言。

# c++ - 如何在 c++ win32 API 的对话框中设置图像？

> ID：12858841
> 
> 赞同：1
> 
> 时间：2012-10-12T12:14:24.260
> 
> 标签：c++, c, windows, winapi, dialog

我正在开发一个 C++ Api 项目。

我将使用 dialogboxparam 创建一个对话框...

我完成了创建和设置文本框、标签和按钮...它工作正常...

现在我想在对话框顶部添加一个图像...

我确实在 WM_INITDIALOG 中使用了这段代码：

```
HBITMAP hImage= (HBITMAP)LoadImage(NULL,L"C:\\WINDOWS\\system32\\BMA-Images\\login-header",IMAGE_BITMAP,LR_DEFAULTSIZE ,LR_DEFAULTSIZE ,LR_LOADFROMFILE|LR_CREATEDIBSECTION);
            SendMessage(_hwnd,STM_SETIMAGE,IMAGE_BITMAP,(LPARAM)hImage); 
```

但它没有用......任何人都可以帮助解决这个问题......提前感谢Sonu

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:30:34.497

处理`WM_INITDIALOG`消息时使用`HWND hImageCtl = GetDlgItem(_hwnd, <image-control-resource-id>)`获取图像控件的句柄（这假定`_hwnd`是对话框本身的句柄）。

然后使用`hImageCtl`发送`STM_SETIMAGE`消息到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:57:46.163

最简单的方法是覆盖窗口的 WM_PAINT 并在该点绘制位图（在 BeginPaint 和 EndPaint 之间）调用

这里有一个基于 MFC 的示例：

[http://www.programmersheaven.com/mb/mfc_coding/113034/113034/how-do-i-set-a-background-picture-in-a-dialog-box-/](http://www.programmersheaven.com/mb/mfc_coding/113034/113034/how-do-i-set-a-background-picture-in-a-dialog-box-/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:00:52.173

这工作多年，因为我的 Windows 98：

```
//globals
HBRUSH hbr;
PAINTSTRUCT wcd;

LRESULT CALLBACK MainWndProc( HWND hWnd, UINT msg, WPARAM wParam,
   LPARAM lParam )
{

   switch( msg ) {

   case WM_PAINT:
       if (GetUpdateRect(hWnd,r,0)) {   
           BeginPaint(hWnd,&wcd);
           if (wParam == NULL) FillRect(wcd.hdc,&wcd.rcPaint,hbr);
           EndPaint(hWnd,&wcd);         
       } 
        break;

      case WM_COMMAND:
///your code
   }
}

int  WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int Show)
{  
    ghInstance = hInstance;
    //Prepare brush for background
    hbr=CreatePatternBrush(LoadBitmap(hInstance,MAKEINTRESOURCE(IDB_BGROUND)));
///your code
    DialogBox(hInstance,"MAIN", NULL,(DLGPROC)MainWndProc);
///your code
    return(FALSE);
} 
```

IDB_BGROUND - 链接的图像资源的 ID。

# c# - 在 WP7.1 ListBox 中，选定的索引似乎没有按预期工作。如何将所选项目显示在顶部？

> ID：12858844
> 
> 赞同：8
> 
> 时间：2012-10-12T12:14:30.317
> 
> 标签：c#, windows-phone-7, xaml

设想：

*   在 Windows Phone 7 中，我使用的是列表框。
*   假设有 200 个项目。
*   现在我选择列表的第 150 项
*   我希望列表在加载后加载并选择（并显示）列表顶部的第 150 个项目。

问题：

*   我正在使用本页提到的 HookScrollViewer()（[WP7 中的 ListBox 偏移](https://stackoverflow.com/questions/9078579/listbox-offset-in-wp7)）
*   第一次加载该项目时，列表未显示正确的项目（例如显示第 148 个项目）。
*   我离开该页面并再次单击第 150 项
*   现在列表索引是正确的，它正好在顶部显示第 150 个项目。

问题：

*   我使用正确的解决方案吗？
*   我在做什么错了，我试图找出解决方案但失败了！

暗示：

*   如果你有windows phone，请下载app：[http ://tinyurl.com/9298cdx](http://tinyurl.com/9298cdx)
*   打开任何章节并在章节中间添加书签（通过长按）。
*   关闭应用程序，然后再次打开应用程序。
*   单击书签将其打开。
*   第一次它不会去确切的位置。
*   现在不要关闭应用程序，只需按返回按钮并再次单击书签。
*   这次位置正确！
*   问题是，第一次有什么问题？

阅读页面的代码：

*   为了使它更容易，可以下载代码：[https ://docs.google.com/file/d/0B8xOhdKHzbkyaWFLRHN0WjRoajg/edit](https://docs.google.com/file/d/0B8xOhdKHzbkyaWFLRHN0WjRoajg/edit)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:21:39.630

经过努力，我找到了实际问题及其解决方案。

**实际问题：**

*   我正在使用外部字体，而不是默认包含在 WP 中的字体。
*   外部字体需要一些时间才能加载到内存中，然后显示文本。
*   与此同时，列表已经加载，而字体正在加载。
*   最后显示文本，并且（可能是因为扩展），选定的索引位置向下移动。
*   不用关闭app，字体好像还停留在内存中，下次用不了多久，指针id就正确显示了。

**我的解决方案：**

*   我在加载主页时加载了（外部）字体。它花费的时间可以忽略不计，因此不会影响应用程序的效率（就加载时间而言）

我希望任何架构师可以更好地解释发生了什么，或者换句话说，我有兴趣了解“实际问题”的技术背景。

非常感谢所有提出建议的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:44:21.040

我猜您的数据没有更新。您可以尝试使用 INotifyPropertyChanged ，看看示例您将了解如何使用

# c++ - Сopy 构造函数不起作用

> ID：12858845
> 
> 赞同：2
> 
> 时间：2012-10-12T12:14:32.323
> 
> 标签：c++, constructor, copy-constructor

我正在自己编写字符串类。而且我不知道如何编写Сopy 构造函数。我有这样的代码。

```
class S { 
         private:
            char *string;
            int l;
         public:   
            S::S(const S &s){
                 string = new char[l+1];
                 memcpy(string,s.string,l+1);
               }
}; 
```

编译器没有给出任何错误，但 .exe 因未知错误而关闭。我尝试在 main() 函数中使用它。

```
S pop("Q6");
S str(pop); 
```

所以我期待你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T12:18:28.647

在您的复制构造函数中

```
 string = new char[l+1] 
```

`l`尚未初始化为字符串的长度，因此它可以是任何值。`s.l`您应该在使用它之前对其进行初始化（通过从 复制值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:18:32.260

一旦有了复制构造函数，还需要提供赋值运算符和析构函数。这被称为[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

但更好的是使用智能指针，那么你不需要注意这一点，三的[规则变成了零](http://rmartinho.github.com/2012/08/15/rule-of-zero.html)的规则。

你也忘了初始化`l`。更重要的是，`memcpy`在 C++ 代码中没有真正的位置。使用标准库算法而不是 C 函数（在本例中为`std::copy`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:18:59.163

尝试这个

```
public:
    S::S(const S &s) : l(s.l)
    {
        string = new char[l+1];
        memcpy(string,s.string,l+1);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:19:19.423

问题出在`l+1`. `l`未初始化。您需要`l = s.l;`在使用之前分配它。

# javascript - IE不适用的奇怪案例 contents

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-10-12T12:14:35.553212 次This question shows research effort; it is useful and clear2This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I write JavaScript code that is deployed on numerous sites.

Yes, we're an Ad Network. We're the Evil Forces of the Internet.

That said, we usually use the following approach to adding styles to the site:

```
var d = document.createElement('style');
d.type = 'text/css';
d.textContent = 'body {display: none!important; }';
document.getElementsByTagName('head')[0].appendChild(d); 
```

Execute this via js console, and the page should clear.

Except when it doesnt.
We just encountered such a case:
Internet Explorer 9 does NOT apply the style on the following page:

[http://www.brigitte.de/mode/trends/deutscher-fernsehpreis-2012-1142578/](http://www.brigitte.de/mode/trends/deutscher-fernsehpreis-2012-1142578/)

The page is displayed in IE's "IE9 browser mode" as well as "IE9 document mode". Executing the example script w/ activated profiler shows no other scripts being triggered on insertion of the tag.

I need ideas. Anything. Is this a rare IE bug? Any workarounds I could try?

* * *

edit:

solved. We fell victim to IE's [31-stylesheets-bug](http://support.microsoft.com/kb/262161/en-us?fr=1).

In short: Internet Explorer will only interpret up to 31 stylesheets. Any further styles are discarded. [I'm going to get drunk](http://cheezburger.com/4410491392). Have a nice weekend.

[javascript](/tags/javascript "show questions tagged 'javascript'")[css](/tags/css "show questions tagged 'css'")[internet-explorer](/tags/internet-explorer "show questions tagged 'internet-explorer'")[dom](/tags/dom "show questions tagged 'dom'")4

## 2 回答 2

This answer is useful1

解决了。[我们成为 IE 的31-stylesheets-bug](http://support.microsoft.com/kb/262161/en-us?fr=1)的受害者。

简而言之：Internet Explorer 最多只能解释 31 个样式表。任何其他样式都将被丢弃。[我要喝醉了](http://cheezburger.com/4410491392)。周末愉快。

于 2012-10-12T16:17:30.633 回答This answer is useful0

这是您添加样式的方式：http: [//jsfiddle.net/YqhDp/](http://jsfiddle.net/YqhDp/)

于 2012-10-12T13:38:31.990 回答

#### Related

[2](/questions/10304978 "Question score (upvotes - downvotes)")[bash - Bash - 为什么“0”不被识别为数字？](/questions/10304978)[1](/questions/10304983 "Question score (upvotes - downvotes)")[silverlight - Silverlight 触发一个事件，甚至一秒钟后触发另一个事件](/questions/10304983)[1](/questions/10304984 "Question score (upvotes - downvotes)")[java - Google IMAP XOAuth 仅适用于身份验证](/questions/10304984)[1](/questions/10304985 "Question score (upvotes - downvotes)")[oracle10g - 从 OS X 连接到 Vagrant box 上的 Oracle](/questions/10304985)[1](/questions/10304989 "Question score (upvotes - downvotes)")[vba - 打开 Windows 资源管理器并选择一个文件](/questions/10304989)[2](/questions/10304992 "Question score (upvotes - downvotes)")[php - 使用 php 下载 torrent](/questions/10304992)[1](/questions/10304995 "Question score (upvotes - downvotes)")[android - Junit 输出使用-missing-android-xml-junit-test-runner](/questions/10304995)[1](/questions/10304997 "Question score (upvotes - downvotes)")[c# - 在WPF MVVM的最后一行按Enter键时将焦点移出DataGrid？](/questions/10304997)[1](/questions/10304999 "Question score (upvotes - downvotes)")[python - Python模块，引用同一包中的其他模块？](/questions/10304999)[1](/questions/10305007 "Question score (upvotes - downvotes)")[hadoop - JBoss Drools 与 Apache Hadoop 的集成](/questions/10305007)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：12858846
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# javascript - How to test Javascript that triggers 3rdparty cookies being set

> ID：12858848
> 
> 赞同：1
> 
> 时间：2012-10-12T12:14:38.190
> 
> 标签：javascript, unit-testing, testing, cookies, browser-extension

I want to run automated tests that will execute a Javascript file. The JS calls a number of URLs through AJAX calls and image loads, each of which leads to the site being called dropping a cookie.

Since I cannot read those cookies with Javascript, I don't know whether I can actually test this script.

What is the best way of approaching this problem? Browser extensions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:22:26.980

最简单的方法可能是用您自己的本地模拟站点替换 AJAX URL，这些站点除了验证 cookie（或触发消息）是否正确发送之外什么都不做。

# tridion - Tridion 核心服务：如何更新组件/多媒体组件的系统属性

> ID：12858851
> 
> 赞同：1
> 
> 时间：2012-10-12T12:14:47.307
> 
> 标签：tridion, tridion-2011

我有一个要求，我需要更新组件/多媒体组件的系统属性（主要是创建和修改日期）。但是在创建组件时，我只能访问 Title 属性，通过它我可以设置组件的名称，所以有没有办法通过代码更新创建和修改日期。

在 Filenet 等大多数存储库中，系统属性不可直接编辑，但经过一些配置更改后，系统属性也可编辑。

在 SDL Tridion 中也可以在更改配置文件后使其他系统属性可编辑？如果是，那么我到底需要在哪里进行更改？

下面是我用来创建组件的代码：

```
core_service.ServiceReference1.SessionAwareCoreService2010Client client = 
    new SessionAwareCoreService2010Client();

client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName";
client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";

client.Open();

ComponentData component = (ComponentData)client.GetDefaultData(
                                     ItemType.Component, folderUri);
component.Title = targetFileName;
component.ComponentType = ComponentType.Normal; 
```

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:19:23.497

如果您想在发生迁移的系统之间维护日期信息，那么一个好的方法是将“创建”和“修改”日期字段作为元数据添加到正在迁移的项目中。然后，您需要在从源存储库中导出这些字段之前使用适当的值填充这些字段。

我想不出其他受支持的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:45:33.867

正如@Jeremy 所述，这些是只读属性。除了为编辑提供信息之外，这些值很少用于其他用途。

也许如果您可以解释您的业务需求，有人可以提供替代解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T04:54:40.880

您不能通过核心服务或任何接口修改和创建，因为 tridion 维护版本。

您可以设置创建和修订日期，但核心服务不会更改日期。

# url-routing - Angular.js 子目录中的路由

> ID：12858859
> 
> 赞同：20
> 
> 时间：2012-10-12T12:15:03.900
> 
> 标签：url-routing, angularjs

是否可以以从将要部署的 Web 目录路径抽象出来的方式开发 Angular.js 应用程序？

我正在尝试将 Angular.js 应用程序放在 Web 服务器子目录[http://example.com/myproject/](http://example.com/myproject/)中，但路由器将我重定向到 Web 服务器根目录 - [http://example.com](http://example.com)。

下面是我的 Angular.js 应用程序：

```
var myproject = angular.module('myproject', []);

myproject.config(function($routeProvider, $locationProvider) {
  $routeProvider.
    when('/', {templateUrl: 'partials/index.html', controller: IndexCtrl}).
    otherwise({redirectTo: '/'});

  $locationProvider.html5Mode(true);
});

function IndexCtrl($scope, $location) {

} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-12T13:05:42.163

尝试`<base href="/sudirectory"/>`在您的`<head></head>`. 这就是我需要做的让我的工作，IIRC

注意事项：这将与任何具有 href="#" 的锚标记混淆，并充当图像 src 等的根。

# list - Dependency tracking in C++: List of all objects dependent on a single object

> ID：12858861
> 
> 赞同：1
> 
> 时间：2012-10-12T12:15:05.117
> 
> 标签：list, boost, shared-ptr, ownership

I need to develop a library where I need to track list of objects dependent on another object. Boost library provides some features like `shared_ptr` and `intrusive_ptr` which allow us to track dependencies but they don't give us details like list of all the other objects pointing to a dependent object.

Suppose we have

```
Object B is dependent on A
Object C is dependent on A
(Multiple objects dependent on A) 
```

I need some interface like

```
//Adding dependencies
B.dep_obj = A obj
C.dep_obj = A obj 
```

After the above operations A should have refcount of 2 (plus a list containing B and C).

```
//Removing dependencies
B.dep_obj = NULL 
```

One challenge I see if I opt for overloading `operator=` is to get reference of object B/C since the `operator=` will be part of class representing dep_obj object (and Not class representing B or C). Hence I won't be able to fetch object representing A and B using dep_obj (in generic way)

# joomla - Seblod: How to make url redirection happen only if the captcha is verified?

> ID：12858862
> 
> 赞同：0
> 
> 时间：2012-10-12T12:15:06.823
> 
> 标签：joomla

Using Seblod I created a form where users can enter their name, email id and captcha. They can view next page only when they fill this correctly. To go to next page, I gave url redirection feature (site form->configuration).

But now page redirects to next page even if user enters wrong captcha. How to make the redirection happen only when entered captcha is correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:28:51.250

验证码会有一个`if`声明，如果它是正确的，它会继续前进，否则什么也不会发生并且验证码会重置。

提交表单后重定向用户的代码需要放在`if`语句中。

打开 recaptchalib.php 并转到第 184 行，您将在其中看到以下内容：

```
if (trim ($answers [0]) == 'true') {
      $recaptcha_response->is_valid = true;
      //Redirect Code
} 
```

在我添加评论的地方，尝试添加您的重定向代码

# c# - 如何解决这个转换问题？

> ID：12858867
> 
> 赞同：0
> 
> 时间：2012-10-12T12:15:29.927
> 
> 标签：c#, .net, user-interface, dll, numbers

我创建了一个 GUI，它将一个值编号输入另一个程序并将它们存储在`tags`. 我有一个奇怪的转换问题。当我输入 8.5 时，我得到一个字符串 8.500000000000000... 所以我使用`TryParse`and`Double.ToString()`方法来解决这个问题。但奇怪的是，当我尝试使用 6.9 时，字符串变为 6.9000000005367431600000。我使用了 2 个 dll，这可能是导致此问题的原因。我已阅读此[Decimals 解释](http://csharpindepth.com/Articles/General/Decimal.aspx)，但我不明白如何解决我的问题。如何解决这个转换问题？

**我的转换方法**

```
 private bool TryWrite()
            {
// Read() returns a string(which represents int,double, float or string) read from another application
                string Oldcopy = _inTouchWrapper.Read(tagNameBox.Text);
// Write() Write my input number into the application stored in a specific tag
                _inTouchWrapper.Write(tagNameBox.Text, ValueBox.Text);
//OldCopy is to input back the old copy is the Write (new copy) cannot be performed
                string newCopy = _inTouchWrapper.Read(tagNameBox.Text);

                if (ValueBox.Text == Double.Parse(newCopy).ToString())
                {
                    return true;
                }
                else
                {
                    _inTouchWrapper.Write(tagNameBox.Text, Oldcopy);
                    return false;
                }
            } 
```

关于软件/和我的代码的更多解释。该软件有标签，例如：Alarm1、TimeString... 每个标签都有一个类型（int、real(a float)、string）和一个值。该值取决于类型。如果标签类型是 int，我无法输入 5.6。所以我创建了这个方法来验证输入值是否确实可以添加到软件中。*它是如何工作*的：我在软件中输入一个值，将其读回，如果添加的值与读取的值匹配，我确实输入了它。否则，我输入回 oldCopy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:07:38.480

似乎字符串“6.9”没有直接转换为double。If 首先转换为浮点数，然后转换为双精度数。这是一个例子：

```
var f = float.Parse("6.9");
var d = (double)f;
System.Diagnostics.Debug.WriteLine(d.ToString()); //6.90000009536743 
```

*PS：为什么你对'8.5'没有同样的问题是它可以完全以二进制形式表示。*

# jquery - Dragging an event with url always follow the url after the drop

> ID：12858872
> 
> 赞同：1
> 
> 时间：2012-10-12T12:15:47.977
> 
> 标签：jquery, fullcalendar

I'm having some troubles while dragging an event with an url assiociated.

If you try to do that, you'll see that the event correctly moves, but also the click event is fired, so you'll visit the linked url (and that's bad).

I tried playing around with the `eventClick` callback, but with no luck.
Here you can find my code:

```
// calendar setup
eventDragStart : function(event, jsEvent, ui, view){
    event.dragging = true;
},
eventDragStop : function(event, jsEvent, ui, view){
    event.dragging = false;
},
eventClick : function(event, jsEvent, view){
    //even if I try to return always false, the link is still active
    if(event.dragging === true) return false;
}, 
```

Then i tried to manipulate the event link:

```
eventRender : function(event, element, view){
    $('a').click(function(){
    // custom function that checks if the event is being dragged or not
    //return dragCheck(event);
    return false;
    });
}, 
```

but still no luck. I think that while dragging, a new element is created, so every custom value is wiped out...

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:51:46.990

> - 医生，当我打我的肚子时，我感觉很糟糕
> - 所以，不要打它！

我在前面的座右铭之后找到了一个解决方案。
我没有使用原始`url`属性，而是创建了另一个`custom_url`.
这将阻止 fullcalendar 创建`a`元素，因此问题消失了。

在这里你可以找到我的代码。

用于获取事件的服务器端代码：

```
foreach($this->items as $row)
{
    $event = array();
    $event['id']         = $row->id_calendars;
    $event['title']      = $row->cal_title;
    $event['start']      = $row->cal_start;
    $event['end']        = $row->cal_end;
    $event['allDay']     = (bool) $row->cal_all_day;
    $event['custom_url'] = $row->url;

    $events[] = $event;
}

echo json_encode($events); 
```

然后是javascript部分：

```
eventDragStart : function(event, jsEvent, ui, view){
      event.dragging = true;
},
eventDragStop : function(event, jsEvent, ui, view){
      event.dragging = false;
},
eventClick : function(event, jsEvent, view){
      if(event.dragging === true) return false;

      if(event.custom_url){
            window.location = event.custom_url;
      }
}, 
```

你完成了！

# android - 截屏时未捕获整个列表视图项目

> ID：12858874
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:15:52.277
> 
> 标签：android

> **可能重复：**
> [Android 完整布局未捕获](https://stackoverflow.com/questions/12817703/android-full-layout-not-capturing)

在我的 Android 应用程序中，我有列表视图和一组按钮。我想截取包含所有列表视图和按钮的布局的屏幕截图，但我只获得列表视图的可见部分。

如何在android中捕获不可见的listview项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:52:02.043

> 如何在android中捕获不可见的listview项目？

总的来说，没有“不可见的列表视图项目”。

假设您有一个`ListView`可以显示 10 行的空间，并且您的适配器从`getCount()`. Android 不会创建 10000 行`Views`。它创建 10 行`Views`（或者更多行），并在用户滚动时回收它们。因此，在您拍摄“屏幕截图”时，您的大多数行根本不以可视形式存在。

# android - 在Android中禁用自定义键盘上的一键

> ID：12858881
> 
> 赞同：11
> 
> 时间：2012-10-12T12:16:23.950
> 
> 标签：android, keyboard, key

我的 Android 应用程序中有自定义[键盘。](http://developer.android.com/intl/es/reference/android/inputmethodservice/Keyboard.html)xml中描述的布局是这样的

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"">
 <Row>
     <Key android:keyLabel="F1" android:keyOutputText="F1"/>
     <Key android:keyLabel="F2" android:keyOutputText="F2"/>
     <Key android:keyLabel="F3" android:keyOutputText="F3"/>
... 
```

所以，我很想知道如何禁用，例如“f1”键~使它变灰且不可触摸。这里有一些类似的问题，但都是关于默认软知识库的。

我知道我可以遍历这样的键

```
for (Keyboard.Key key : myKeyboard.getKeys()) 
```

但它看起来像[Keyboard.Key](http://developer.android.com/intl/es/reference/android/inputmethodservice/Keyboard.Key.html)类的对象对于键外观的任何变化都是无用的。

**UPD**：我没有找到解决方案。我手动实现了键盘——大的相对布局、常用按钮和自定义按钮，一切都很好。顺便说一句 - 自定义键盘至少更漂亮。只需从 droid 4+ 复制资源 - 您将在每个平台上获得漂亮的现代透明按钮和透明布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T08:55:39.667

我目前正在使用`android:horizontalGap`在应该放置禁用键的位置放置一个黑色间隙（具有键的宽度）（这样，我可以隐藏每个屏幕中不允许的键，因为我的键盘始终具有相同的分布）。不过，这是一个糟糕的解决方法。

主要问题是最右边的键，因为`android:horizontalGap`只能为键的左侧设置。但是`android:keyWidth="0"`在最右边的假键中使用一个属性，然后在那里设置正确的`android:horizontalGap`，就可以了。一个更糟糕的解决方法......

有更好的解决方案吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T18:57:11.997

通常，只有在您编辑某些内容时键盘才可见，因此您可以通过对象捕获编辑。如果它是一个 editText 框，那么您可以添加一个侦听器，然后您可以禁用对编辑文本的任何响应。我不确定这是否对您有用，但至少您可以捕获任何不需要的输入。

```
 // add a keylistener to keep track user input
    editText.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // if keydown and "enter" is pressed
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && (keyCode == KeyEvent.KEYCODE_ENTER)) {

                // do some thing or nothing

                return true;

            }

            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-12T13:01:49.767

如果 Key 是一个 Button，那么它很简单：

```
key.setEnabled(false); 
```

否则，只需使其不可点击：

```
key.setClickable(false); 
```

...并更改其外观（背景颜色、文本颜色等）。最简单的方法是：

```
key.setBackgroundColor("0xFFAAAAAA"); 
```

# android - 将视图设置为默认值

> ID：12858882
> 
> 赞同：0
> 
> 时间：2012-10-12T12:16:34.180
> 
> 标签：android, eclipse

> **可能重复：**
> [在 Eclipse 的透视图中恢复视图的原始布局](https://stackoverflow.com/questions/12848477/restore-original-layout-of-views-within-a-perspective-in-eclipse)

我使用 Eclipse IDE，版本：Helios Service for android development（安装了 ADT）。不知何故，我的看法发生了变化。我想将所有内容（我的视图）设置为默认值。我怎么做。

# ios - iOS：如何在后台线程中处理数据？

> ID：12858887
> 
> 赞同：3
> 
> 时间：2012-10-12T12:16:59.517
> 
> 标签：ios, multithreading

我有这样的方法：

```
- (BOOL)shouldDoSomeWork {
   BOOL result = // here I need do hard work with data in background thread and return result, so main thread should wait until the data is calculated and then return result;
   return result;
} 
```

如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:19:25.117

您是否正在寻找这个：

```
-(void) startWork
{ 
    //Show activity indicator
    [NSThread detachNewThreadSelector:@selector(doSomeWork) toTarget:self withObject:nil];
}

-(void) doSomeWork
{
    NSAutoreleasePool *pool = [NSAutoreleasePool new];
    //Do your work here
    [pool release];
    [self performSelectorOnMainThread:@selector(doneWork) withObject:nil waitUntilDone:NO];
}  

-(void) doneWork
{
   //Hide activity indicator  
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T12:35:13.937

示例如何使用 GCD 进行操作：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Your hard code here
        // ...

        //BOOL result = ...

        dispatch_async(dispatch_get_main_queue(),^{
            [self callbackWithResult:result];  // Call some method and pass the result back to main thread
        });

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:39:11.447

这通常不是你会做的。你需要一些结构更像这样的东西：

```
- (void)doSomeWorkAndThen:(^void)block {
  dispatch_async(dispatch_get_global_queue(0, 0), ^ {
    // do
    // some
    // work
    dispatch_sync(dispatch_get_main_queue(), ^ {
      block();
    });
  }); 
```

也就是说，您将请求和之后的操作保存在一个地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:37:59.393

[常见的](http://eschatologist.net/blog/?p=232) [建议](https://stackoverflow.com/questions/10373331/nsoperation-vs-grand-central-dispatch)是使用可用的最高抽象级别来执行任务。因此，`NSThread`在您可以在后台执行工作的事情列表中应该相对较低。

您调查 API 的顺序应该是这样的：

1.  [NSOperation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591) / [NSOperationQueue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)
2.  [大中央调度](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)(libdispatch)
3.  NSThread
4.  POSIX 线程

使用前两个，您将代码编写为“工作单元”，然后将此工作放在队列中以在某个时候执行。系统会为您创建和销毁线程，并且 API 易于使用。这是一个使用`NSOperationQueue`.

```
NSBlockOperation * blockOperation = [NSBlockOperation blockOperationWithBlock:^{
    //Do work

    //update your UI on the main thread.
    [self performSelectorOnMainThread:@selector(workDone:) withObject:workResults waitUntilDone:NO];
}];

[self.operationQueue addOperation:blockOperation]; 
```

就这么简单。

# orchardcms - 如何在列表中显示文件的下载链接？

> ID：12858890
> 
> 赞同：0
> 
> 时间：2012-10-12T12:17:09.473
> 
> 标签：orchardcms

我正在使用 FileField 模块。我创造了：

1.  包含文件字段的内容部分“文档列表项”
2.  内容类型“文件项”，其中包含“文档列表项”+通用+标题+可包含
3.  包含“文件项”的列表

我还通过添加以下内容来更改放置文件：

```
<Match ContentType="FileItem">
    <Match DisplayType="Summary">
            <Place  Parts_Common_Metadata_Summary="Nowhere"/>
        </Match>
    </Match> 
```

所以现在我看到了标题列表。当我点击标题时，在详细信息页面上有一个下载链接。但是如何在摘要中显示下载链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:27:46.320

这样问题就解决了：

我已将**Fields_Contrib_File**添加到放置文件中：

```
 <Match ContentType="FileItem">
        <Match DisplayType="Summary">
                <Place  Parts_Common_Metadata_Summary="Nowhere" Fields_Contrib_File="Content" Parts_Title_Summary="Nowhere"/>
            </Match>
        </Match> 
```

我已从模板文件中删除了显示名称 ~/Modules/Contrib.FileField/Views/Fields/ **Contrib.File.cshtml**：

```
@using Orchard.Utility.Extensions;

@if (!string.IsNullOrWhiteSpace(Model.ContentField.Path)) 
{
   <p class="file-field">       
      <a href="@Url.Content(Model.ContentField.Path)" target="@Model.Settings.OpenAction">@Model.ContentField.Text</a>
   </p> 
} 
```

# sql-server - 一张表的 SQL 视图

> ID：12858891
> 
> 赞同：1
> 
> 时间：2012-10-12T12:17:11.283
> 
> 标签：sql-server, filter, views

我的同事问我一个关于从 SQL Server 数据库获取数据的问题。

我有一个样本数据集

```
[ID],[TOWN],[PERSON]
[1],[BELFAST],[JAMES]
[2],[NEWRY],[JOHN]
[3],[BELFAST],[SIMON]
[4],[LARNE],[ALAN] 
```

现在，我想返回一个 SQL 数据集，它会根据视图返回一个不同的表。

基本上在代码中我可以在城镇上得到一个独特的然后在城镇上循环 sql 过滤。但是有没有办法在 SQL 中做到这一点？

我会在哪里获得 (3) 意见（2 贝尔法斯特、1 纽里和 1 拉恩）

基本上我会回来

```
[ID],[Town],[Person]
[1],[Belfast],[James]
[3],[Belfast],[Simon] 
```

然后另一个视图将返回给“Larne”，而最后一个视图将返回给 Newry。基本上 SQL 为它找到的每个城镇创建视图，然后返回每个城镇的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:27:30.677

你不会*得到视图*- 你必须自己定义它们。

例如，如果您需要一个视图用于贝尔法斯特，第二个用于纽里，第三个用于拉恩 - 那么您需要**创建**三个视图，只返回与相关城市名称匹配的行

```
 CREATE VIEW BelfastView 
 AS 
    SELECT ID, Town, Person
    FROM dbo.Towns
    WHERE Town = 'Belfast'

 CREATE VIEW LarneView 
 AS 
    SELECT ID, Town, Person
    FROM dbo.Towns
    WHERE Town = 'Larne'

 CREATE VIEW NewryView 
 AS 
    SELECT ID, Town, Person
    FROM dbo.Towns
    WHERE Town = 'Newry' 
```

现在，某些用户可能只被允许从中选择数据`BelfastView`，因此永远不会看到基础表中的任何其他数据行。

但是视图是**数据库对象**，如表或存储过程；您需要创建它们，维护它们，不再需要它们时扔掉它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:21:31.793

**编辑**

根据您更新的问题，您只需为要过滤的每个城镇创建一个视图：

```
CREATE VIEW BelfastView AS

SELECT    ID,
          Town,
          Person
FROM      YourTable
WHERE     Town = 'BELFAST' 
```

尽管您只向我们提供了一小部分数据样本，但您所要求的几乎从来都不是一个好主意。当你的数据库中有 50 个新城镇时会发生什么？您要为每个城镇创建一个视图吗？这不能很好地扩展（或根本没有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:39:07.913

基本上我决定将它作为存储过程运行，以将每个项目作为列表返回给我。所以类似这样的事情：

```
Create Procedure ListTowns
As
declare @towns char(11)

select @towns = (select distinct Town from [Towns])

while @towns is not null <> 0
begin
    select * from [YourTable] where Town = @towns
end 
```

# java - Criteria 类中的多个类

> ID：12858893
> 
> 赞同：1
> 
> 时间：2012-10-12T12:17:12.717
> 
> 标签：java, hibernate, class, criteria

我有两个班级`AcctMast` ，`DealerDtls`它们与他们的`resp.tables` `acctMast`and相关联`dealerDtls`。

我想使用`Criteria`类来找出所有经销商的详细信息，其, `acctNo=XXX`（从我的 API 获取这三个作为输入）。`dealerCode=XXX``CustCode=XXX`

但问题是`custCode`列存在于`AcctMast`并且是`dealerCode`的`acctno`列`DealerDtls`。冲突在于如何使用多个类 using`Criteria`以便我可以获得所有必需的详细信息。

还有一件事，每次我得到`custCode`和`Acctno`作为输入，但`dealercode`取决于用户。它可能作为输入给出，或者它可能并不意味着有时我也得到了`dealerCode`NULL。

# java - 在 Ant 构建脚本中设置 Class-Path

> ID：12858897
> 
> 赞同：0
> 
> 时间：2012-10-12T12:17:31.640
> 
> 标签：java, ant, build, classpath

我正在尝试构建我的控制台应用程序，并且正在使用 Ant 来构建它。我可以在 Eclipse 中运行我的应用程序，但是当我尝试从我得到的 jar 中运行它时 - ClassNotFoundException: 被抛出。在一个罐子里，我用于我的应用程序。这是我创建清单的 build.xml 的一部分：

```
<manifest>
      <attribute name="Main-Class" value="com.package.Reporter" />
      <attribute name="Class-Path" value="lib/commons-httpclient-3.1.jar
        lib/commons-logging-api.jar
        ...lot of jars...
        lib/stax-api-1.0.1.jar" />
</manifest> 
```

所需的类在 commons-httpclient-3.1.jar 中，这是我为编译设置类路径的方式，很好：

```
<path id="libs.dir">
    <fileset dir="lib" includes="**/*.jar"/>
</path> 
```

**UPD**：我应该把带有库的罐子放到我的罐子里吗？现在我将它们放到我的 jar 的“lib”目录中。所以 myjar.jar 包含我的类，META-INF 目录和 lib 目录的包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:24:36.583

尝试像这样更改路径。

```
 <path id="libs.dir">
   <fileset dir="./lib" includes="**/*.jar"/>
 </path> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:46:42.527

您需要 manifestclasspath 任务。

例子：

*   [Ant - 如何在特定文件夹中获取所有文件的名称](https://stackoverflow.com/questions/3796824/ant-how-to-get-all-files-name-in-a-specific-folder/3797767#3797767)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:55:45.320

Max，假设正常使用，您不能将 jar 库插入 jar。要么您不必像 Romski 建议的那样在运行时手动指定它们。调用`java -jar myjar.jar`时，它应该找到所有 jar，前提是它们位于`lib`目录中。`lib`目录必须与jar所在的目录相同。`java`直接调用可执行文件还是通过ant`java`任务调用都没有关系。

请注意，当前目录仅与 jar 和`lib`.

现在过于明确了。如下执行健全性测试：创建一个新`tmp`目录并将文件复制到其中：

```
tmp/myjar.jar
tmp/lib/commons-httpclient-3.1.jar 
```

跑`java -jar tmp/myjar.jar`

编辑：现在我看到我刚刚写了与[Oracle jar 教程](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)中相同的内容。但我自己也用相对目录进行了测试。我还看到几十个在 jar 中搜索*jar*的 stackoverflow 问题，所以请先搜索 SO，然后再提问。

# powershell - Get-ChildItem -过滤器数组

> ID：12858901
> 
> 赞同：5
> 
> 时间：2012-10-12T12:17:58.527
> 
> 标签：powershell, filter

情况：

1.  `Get-ChildItem $Path -Filter *.dll`为我工作

2.  这有效：

    ```
    $Path = "$env:windir\system32\*"
    $GuyArray = @("*.dll", "*.exe")

    Get-ChildItem $Path -Include $GuyArray 
    ```

3.  但我不能让这个工作：

    ```
    $Path = "$env:windir\system32\*"
    $GuyArray = @("*.dll", "*.exe")

    Get-ChildItem $Path -Filter $GuyArray 
    ```

错误信息：

> 无法将“System.Object[]”转换为参数“Filter”所需的类型“System.String”。不支持指定的方法。

问题：

1.  这是否意味着`-Include`支持多个值，但`-Filter`只允许一个值？
2.  如果上述解释是正确的，有没有办法我可以从中发现这一点`Get-Help gci`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:29:08.610

> 这是否意味着`-Include`支持多个值，但`-Filter`只允许一个值？

是的。

> 如果上述解释是正确的，有没有办法我可以从中发现这一点`Get-Help gci`？

是的，但你没有得到太多的信息`Get-Help gci -Parameter Filter`。但是你仍然可以看到它是一个字符串，而不是一个数组。至于细节，`Filter`是提供者特定的过滤器。`Get-Help gci`无法告诉您有关特定提供商的实施的任何信息。理论上，`Get-Help FileSystem`（关于此提供者的帮助）应该已经解释了这一点。

PS 另请注意，此过滤器使用 CMD 通配符规则而不是 PowerShell 通配符规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:23:34.383

使用`Get-Help`：

```
> get-help Get-ChildItem

NAME
    Get-ChildItem

SYNTAX
    Get-ChildItem [[-Path] <string[]>] [[-Filter] <string>] [-Exclude <string[]>] [-Force] [-Include <string[]>] [-Name] [-Recurse] [-UseTransaction] [<CommonParameters>] 
```

SYNTAX 部分包括参数类型，您可以从中看到它`Filter`是一个字符串和`Path`一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:24:18.550

问题一：

是的。`-Filter`仅接受`[string]`作为输入。`-Include`接受`[String[]]`。

问题2：

`Get-help get-childitem -parameter filter`给

```
-Filter <string>
...explanation... 
```

`Get-help get-childitem -parameter include`给

```
-Include <string[]>
...explanation... 
```

# mysql - 如何在 MongoDB 中重复 MySQL 的 WHERE 1 查询？

> ID：12858902
> 
> 赞同：0
> 
> 时间：2012-10-12T12:18:01.353
> 
> 标签：mysql, mongodb, express, mongoose

我可以在 MySQL 中做到这一点：

```
WHERE 1 AND 1 AND 1 
```

我如何在 MongoDB 中重复它？MongoDB 的 WHERE 1 等价物是什么？

**更新：**

所以。我不知道如何选择最佳答案^^和扩展问题。正如@mark-hillick 注意到的那样——我正在寻找构建查询的最佳方式。现在我正在使用这种方式（快递+猫鼬）：

```
//req.query - get/post object in Express

for (var q in req.query) {
  if (req.query[q]) { //simplified example
    query[q] = req.query[q];
  };
}

Collection.find(query) 
```

你的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:11:09.060

[这里](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)有一个 SQL-MongoDB 映射图表，您会发现它很有用。

当您想要执行与 MySQL 中的“WHERE”相同的操作时，它有大量示例说明您在 MongoDB 中所做的事情。例如 -

```
SELECT a,b FROM users WHERE age=33 
```

是

```
db.users.find({age:33}, {a:1,b:1}) 
```

或者

```
SELECT * FROM users WHERE a=1 and b=1 
```

是

```
db.users.find({a:1,b:1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:27:56.863

MongoDB 是面向文档的数据库，MongoDB 中的文档由键值对组成。因此，在 MongoDB 中，您不能像在 MySql 中那样运行单值查询。假设您将数据保存在字段名称 a 中，MongoDB 中的类似查询可能如下：

```
db.test.find({$and : [{a:1},{a:1}, {a:1}]}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:29:44.130

如果'您正在尝试构建查询子句，则 AND 在 Mongo 中是隐含的。因此，如果您有以下情况；

```
db.col.find({name:"dave"}) 
```

您可以添加另一个；

```
db.col.find({name:"dave", age:33}) 
```

等等。

# soap - 使用复杂类型的字符串数组手动发送肥皂请求

> ID：12858903
> 
> 赞同：2
> 
> 时间：2012-10-12T12:18:04.417
> 
> 标签：soap, complextype

我想在 ViaMichelin API 中使用“FindPOI”

这是 SOAP WSDL 的链接：**https ://webservices.viamichelin.com/ws2/services/FindPOI?wsdl**

我正在使用名为“SOAP UI”的肥皂客户端手动发送请求，但在格式化 WSDL 中所需的复杂类型“ArrayOf_xsd_string”时遇到了麻烦。

```
<import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
 <complexType name="ArrayOf_xsd_string">
 <complexContent>
  <restriction base="soapenc:Array">
    <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:string[]"/>
  </restriction>
 </complexContent>
</complexType> 
```

以下是我的猜测，但这不起作用：

```
<datasheetContent xsi:type="ser:ArrayOf_xsd_string" arrayType="xsd:string[4]">
            <item xsi:type="xsd:string">tel</item>
            <item xsi:type="xsd:string">fax</item>
            <item xsi:type="xsd:string">email</item>
            <item xsi:type="xsd:string">iconId</item>
</datasheetContent> 
```

使用：*xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"* 和：*xmlns:ser="http://service.localization.ws2.viamichelin.com"*

服务器响应是：

```
<faultcode>soapenv:Server.userException</faultcode>
<faultstring>org.xml.sax.SAXException: No deserializer for {http://service.localization.ws2.viamichelin.com}ArrayOf_xsd_string</faultstring> 
```

成功使用此 API 方法的任何线索？

# javascript - Ajax 加载淡入

> ID：12858904
> 
> 赞同：4
> 
> 时间：2012-10-12T12:18:05.703
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 ajax 淡入淡出地加载 html。它加载但没有褪色，我不知道我做错了什么，这是我的代码：

```
$("#artworks").click(function(){
// load artworks page
    $("#content").load("artworks.html"); function(){
    $(this).fadeIn("slow");
    });
}); 
```

这是一个错误，我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:20:02.730

```
$("#artworks").click(function(){
    $("#content").load("artworks.html"); function(){
    $(this).fadeIn("slow");
    });
}); 
```

**应该**

```
$("#artworks").click(function(){
    $("#content").load("artworks.html", function(){
      $(this).fadeIn("slow");
    });
}); 
```

**注意更改`;`和`,`移动`)`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:20:28.770

也许你的意思是：

```
$("#artworks").click(function(){
// load artworks page
    $("#content").load("artworks.html", function(){
        $(this).fadeIn("slow");
    });
}); 
```

这仅`#content`在 AJAX 加载之前不可见时才有效。

# gwt - 如何从 url 加载 gwt 小部件中的 svg

> ID：12858907
> 
> 赞同：1
> 
> 时间：2012-10-12T12:18:24.623
> 
> 标签：gwt, svg

我有一个提供 png 和 svg 图像的 servlet。使用 png 我没有问题：

```
Image image = new Image(GWT.getHostPageBaseURL() + token); 
```

但是如何让 svg 工作呢？我已经将“lib-gwt-svg”添加到我的依赖项中。有一个 SVGImage 类：

```
SVGImage svg = new SVGImage(OMSVGParser.parse(???)); 
```

解析需要一个字符串。有没有办法从 URL 加载原始字符串？

或者如何让它工作（有或没有“lib-gwt-svg”）？

**更新：** 感谢 Andrei Volgin：他指出它应该与“Image”一起使用，并且确实如此（我只需要将 mime 类型更正为“image/svg+xml”）。但是 svg-image 中的脚本不能以这种方式工作（看起来图像被渲染为普通的位图图像）。我需要渲染为 svg 的图像（带有脚本）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:38:36.413

如果您使用 URL 加载图像，则根本不需要任何库。而且您不需要 servlet 来交付它们。只需将图像添加到您的 /war/images 文件夹即可。然后，在您的 GWT 代码中：

```
Image image = new Image();
image.setUrl("images/myImage.svg");
myPanel.add(image); 
```

您可能希望为不支持 svg 文件的浏览器添加一些逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:45:10.013

我找到了一个无需任何外部库（如 Andrei 的解决方案）即可工作的解决方案，但也可以保持嵌入式脚本正常工作。我使用了[这里](https://stackoverflow.com/questions/592024/how-to-get-rid-of-double-scrollbars-on-internal-frame-of-gwt-app)的信息- 我使用了 HTMLPanel 并通过“RequestBuilder”加载了图像：

```
 String url = GWT.getHostPageBaseURL() + link.getToken();
    RequestBuilder rB = new RequestBuilder(RequestBuilder.GET, url);
    rB.setCallback(new RequestCallback() {

        @Override
        public void onResponseReceived(Request request, Response response) {
            //create Widget
            chartImage = new HTMLPanel(response.getText());
            //add to layout   
            layout.add(chartImage);

        }

        @Override
        public void onError(Request request, Throwable exception) {
            // TODO Auto-generated method stub

        }
    }); 
```

# css - 内联元素和浮动未按预期运行

> ID：12858914
> 
> 赞同：0
> 
> 时间：2012-10-12T12:18:36.713
> 
> 标签：css, internet-explorer, css-float

我正在尝试彻底了解浏览器的行为，并且目前特别浮动。

使用以下简单代码，我希望 div 浮动到文本的左侧：

```
<span>Some span (inline) text</span>
<div class='a'>Floated div</div>​ 
```

使用以下CSS：

```
div.a {
    background-color: red;
    width:100px;
    float:left;
} 
```

在大多数浏览器上，它符合我的预期，但在 IE7 上，span 文本出现在一行上，浮动 div 出现在下一行 - 请参阅以下 jsfiddle：http: [//jsfiddle.net/FtYYZ/](http://jsfiddle.net/FtYYZ/)

有人可以解释一下浏览器布局方面发生了什么吗？我的理解是“将浮动元素从正常流程中取出并放置在左侧或右侧”。我原以为没有什么会从第一行的末尾采取正常的流程，所以浮动应该保持在那一行，就像大多数浏览器一样。IE 行为背后的逻辑是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:36:46.553

老实说，IE 7 只占浏览器份额的 1%。

为了处理这个问题，我会将以下内容放在你的身体元素中。

```
 <!--[if lt IE 8]>
        <p class="chromeframe">You are using an <strong>outdated</strong> browser. 
 Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a   
href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a>
 to improve your experience.</p>
    <![endif]--> 
```

无需鼓励使用 IE 7。

# sql - 如何更新 SQL Server 数据库的所有 varchar、nvarchar 或 char 字段并设置空字符串代替 NULL？

> ID：12858915
> 
> 赞同：1
> 
> 时间：2012-10-12T12:18:41.820
> 
> 标签：sql, sql-server

在我的数据库中有很多`NULL`值。现在我需要替换所有`NULL`值并将它们设置为空字符串，因为我现有的软件存在`NULL` 值问题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:27:56.537

Hurraaaaaaaaa我找到了答案......

```
declare @query varchar(MAX)
SET @query='';
select @query=@query+' UPDATE '+table_name+' SET '+column_name+' = isnull('+column_name+','''');'
from (
    SELECT table_name=sysobjects.name,
             column_name=syscolumns.name
        FROM sysobjects 
        JOIN syscolumns ON sysobjects.id = syscolumns.id
        JOIN systypes ON syscolumns.xtype=systypes.xtype
       WHERE sysobjects.xtype='U' and (systypes.name='nvarchar' or systypes.name='varchar' or systypes.name='char')
) as a

exec (@query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:19:47.653

试试这个更新：

```
update Table1
set column1 = ' '
where column1 is null 
```

# apache - 是否可以使用通配符将 url 映射到 apache 配置中的 WSGI 脚本？

> ID：12858917
> 
> 赞同：1
> 
> 时间：2012-10-12T12:18:49.630
> 
> 标签：apache, mod-wsgi

我有一些我想从我的网络服务器获得的 trac 项目，是否可以使用通配符自动将 url 映射到相关的 wsgi 文件？

我可以通过添加以下虚拟主机手动完成：

```
<VirtualHost *:80>
  DocumentRoot /var/www/trac.mydomain.com
  ServerName trac.mydomain.com
  WSGIScriptAlias /project1 /var/trac/project1/trac.wsgi
</VirtualHost> 
```

但是，随着我打开更多 trac 项目，WSGIScriptAlias 行的数量会增加。是否可以使用通配符将传入的 url 自动映射到正确的 wsgi 文件？我想它看起来像这样：

```
<VirtualHost *:80>
  DocumentRoot /var/www/trac.mydomain.com
  ServerName trac.mydomain.com
  WSGIScriptAlias /<wildcard> /var/trac/<wildcard>/trac.wsgi
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:41:53.077

典型的！我在发布问题后进行的谷歌搜索带来了相关结果。解决方案是使用 WSGIScriptAliasMatch 和正则表达式。鉴于我上面的示例，配置看起来像这样：

```
<VirtualHost 95.211.154.197>
  DocumentRoot /var/www/trac.mydomain.com
  ServerName trac.mydomain.com
  WSGIScriptAliasMatch ^[^/]+ /var/trac/$1/trac.wsgi
<VirtualHost> 
```

其中 ^/[^/]+ 匹配根 url 之后直到第一个 / 的所有字符。例如[http://trac.mydomain.com/matched/notmatched/notmatchedeither.whatever](http://trac.mydomain.com/matched/notmatched/notmatchedeither.whatever)将映射到 /var/trac/matched/trac.wsgi

# mysql - 在mysql中按字母数字排序

> ID：12858922
> 
> 赞同：2
> 
> 时间：2012-10-12T12:18:59.063
> 
> 标签：mysql

你能帮助我吗？

我的查询是

```
SELECT num FROM sortnum ORDER BY lpad(num, 10, 0) 
```

这个查询的结果不好 这里是结果

```
1 
2 
3 
4 
5 
6 
7 
8 
9 
10 
11 
12 
13 
14 
1a 
2a 
2b 
A1 
A2 
A3 
A4 
B1 
A10 
A11 
B10 
```

对于这种类型的数据，最好的查询是什么，我首先要编号，然后是以 a 开头的数据，然后是 b

我想要这样的结果

```
1 
1a 
2 
2a 
2b 
3 
4 
5 
6 
7 
8 
9 
10 
11 
12 
13 
14 
A1 
A2 
A3 
A4 
A10 
A11 
B1 
B10 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:36:41.450

假设任何字母前缀的长度最多为一个字符，您可以这样做：

```
SELECT   num
FROM     sortnum
ORDER BY
  CAST(num AS UNSIGNED)=0,     -- those starting with numbers before non-numbers
  CAST(num AS UNSIGNED),       -- then by number prefix (if any)
  LEFT(num,1),                 -- then by first character
  CAST(MID(num,2) AS UNSIGNED) -- then by remaining numbers 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/78bfb/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:26:41.620

```
SELECT num,
CONVERT(SUBSTRING_INDEX(num,'-',-1),UNSIGNED INTEGER) AS num
FROM sortnum
ORDER BY num; 
```

# php - 如何检查字符串是否以php中的标点符号结尾？

> ID：12858924
> 
> 赞同：6
> 
> 时间：2012-10-12T12:19:04.603
> 
> 标签：php, regex

我正在逐行解析一些文本，如果给定的行以任何标点符号或数字结尾，我希望布尔返回 true。

正则表达式是最好的方法还是我应该使用一组字符进行迭代以匹配？感觉阵列太大而且成本太高...

如果这确实是一个好方法，有人可以帮助我使用正则表达式吗？

```
function ends_with_punctuation_or_num($string){
   // check if the string ends with punctuation or a number
    if (/* TODO */)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T12:22:25.043

将其放入您的 if-check 中：

```
preg_match("/[0-9.!?,;:]$/", $string) 
```

这将匹配字符串 ( `$`) 末尾之前的一个数字或任何给定的标点符号。将您想要视为匹配的任何其他标点字符添加到字符类（方括号）中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T14:14:17.040

标点符号的 unicode 属性 is`\p{P}`或`\p{Punctuation}`数字 it's `\pN`。

在 php 中，您可以使用：

```
preg_match('/[\p{P}\p{N}]$/u', $string); 
```

如果字符串以标点符号或数字结尾，这将返回 true。

看看[这个网站](http://www.regular-expressions.info/unicode.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:22:27.290

`echo substr("abcdef", -1); // returns "f"`

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:11:02.983

我不确定我会使用正则表达式来做到这一点。这只是个人喜好，但正则表达式似乎不必要且可读性较差（它也较慢，但这在这里可能无关紧要）。我宁愿将我正在寻找的任何字符放入字符串中并进行比较：

```
$chars = '.,;\'"0123456789';
$last = substr($string, -1);

if(strpbrk($last, $chars) !== false) {} 
```

显然，使用`mb_substring()`Unicode 代替。

也可以使用`is_numeric()`而不是将数字放入字符串中。但是我发现这更简单，更易读，并且以后更容易修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:25:43.230

您可以使用**substr 函数**或 utf-8 **mb_substr**

```
$last = substr($string, -1);

if($last == '.' OR is_numeric($last)) {] 
```

但是，如果您使用 UTF8 字符串，我建议您像这样使用它

```
mb_internal_encoding('utf-8');
$last = mb_substr($string, -1);
if($last == '.' OR is_numeric($last)) {} 
```

# powershell - Powershell - 删除（默认）注册表项？

> ID：12858925
> 
> 赞同：6
> 
> 时间：2012-10-12T12:19:08.230
> 
> 标签：powershell, registry

我看到您可以通过运行删除项目：

```
Remove-Item -Path hkcu:\CurrentVersion 
```

但我试过

```
Remove-Item -Path 'Registry::HKEY_CURRENT_USER\Software\Testing\(Default)' 
```

但这没有用。我也试过

```
Remove-Item -Path 'Registry::HKEY_CURRENT_USER\Software\Testing\' -name '(Default)' 
```

这也没有奏效。有什么想法可以通过powershell删除（默认）注册表项吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:31:50.203

您是否尝试从注册表 .msc 控制台中删除它？

我认为不可能删除键的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-22T07:49:28.590

（下一行是删除*（默认）*作为键名的答案），这是通过 PowerShell 从注册表项
中删除默认值：（*默认）的答案。*

从 v1.1 开始，这应该是 PS 中的一个错误。现在截至 2018 年，使用 v5.1，错误仍然存​​在。
实际上`Remove-Item -Path 'Registry::HKEY_CURRENT_USER\Software\Testing\' -name '(Default)'`是错误的，因为 (Default) 不是键，而是属性，
但是假设我们大多数人都尝试过：
`Remove-ItemProperty -Path Registry::HKEY_CURRENT_USER\Software\Testing -Name '(Default)'`
这应该有效。

幸运的是，与许多 PS Cmdlet 一样，*Remove-ItemProperty*的功能可以通过使用方法来替代。在这种情况下 DeleteValue() 在 RegistryKey 对象上调用方法。
有一个小问题，作为一个Key，Get-Item 获得的是Read-only。但是另一种方法 OpenSubKey() 可用于获取对密钥的可写访问权限。

```
function Remove-ItemPropertyDefault {
  [CmdletBinding(SupportsShouldProcess=$true)]
  Param (
    [parameter(ParameterSetName='Path', Mandatory=$true, Position=0)]
    [String]$Path,
    [parameter(ParameterSetName='Key', Mandatory=$true, ValueFromPipeline=$true)]
    [Microsoft.Win32.RegistryKey]$Key
  )
    if ($Path) {$Key = Get-Item -LiteralPath $Path}
    $ParentKey = Get-Item -LiteralPath $Key.PSParentPath
    $KeyName = $Key.PSChildName
    ($ParentKey.OpenSubKey($KeyName, $True)).DeleteValue('')
} 
```

*   SupportsShouldProcess - 允许*-WhatIf*参数
*   Param ... 等 - 允许使用管道，包括 String 和 RegistryKey 输入以及完整性检查
*   $ParentKey - 获取用于以可写模式打开原始密钥的方法的父密钥
*   $KeyName - 没有路径的原始键名的字符串值
*   [OpenSubKey()](https://msdn.microsoft.com/en-us/library/xthy8s8d(v=vs.110).aspx) - 将获得一个 Key 的子 Key，还提供第二个参数来选择写入权限
*   以空字符串作为参数的 DeleteValue()。在 RegistryKey 对象的方法中，（默认）值由空字符串引用。

Use:
`Remove-ItemPropertyDefault Registry::HKEY_CURRENT_USER\Software\Testing`
or
`Get-Item Registry::HKEY_CURRENT_USER\Software\Testing | Remove-ItemPropertyDefault`
or
`$k = Get-Item Registry::HKEY_CURRENT_USER\Software\Testing Remove-ItemPropertyDefault -Key $k`
当然，如果您不需要或不想要一个函数，只需从中取出这三行并在您的代码中使用它。
这是一篇很好的[文章，它给了我这个想法。](http://www.powertheshell.com/removedefaultvalue/)

* * *

OP 可能会询问是否要删除名称为**(Default)的****键**，而不是键中的默认值，因为登陆这里的人主要搜索。在这种情况下，应该使用 -LiteralPath，因为括号被认为是 -Path 参数中的特殊字符，而 -LiteralPath 具有它们的字面意义：

 **```
Remove-Item -LiteralPath 'Registry::HKEY_CURRENT_USER\Software\Testing\(Default)' 
```

或括号需要转义：

```
Remove-Item -Path "Registry::HKEY_CURRENT_USER\Software\Testing\`(Default`)" 
```

(*) 此时不能使用单引号，但必须使用双引号或不使用引号才能使转义字符起作用。

或者最后，如果 Path 不是文字，则可以使用一个函数来转义一个字符串，这在编写代码时是未知的：

```
Remove-Item -Path ([Management.Automation.WildcardPattern]::Escape('Registry::HKEY_CURRENT_USER\Software\Testing\(Default)')) 
```

(*) 这将在 Path 参数中具有特殊含义的字符前面添加 `

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-04T08:41:27.120

迭代@papo 的答案 - 如果 OP 希望清除（无效）`(Default)`注册表值的内容并使用在 PowerShell 中访问注册表的标准方式，oneliner 将是

```
$(Get-Item -Path "HKCU:\Software\Testing").OpenSubKey("", $true).DeleteValue("") 
```

*   `Get-Item -Path`获取*RegistryKey*对象进行读取
*   `OpenSubKey("", $true)`重新打开具有写入权限的相同密钥
*   `DeleteValue("")`清除默认值（在 .NET 中被视为未命名）值**

# css - 在多行文本中定位特定行？

> ID：12858927
> 
> 赞同：1
> 
> 时间：2012-10-12T12:19:13.100
> 
> 标签：css, text, target, multiline

最初的问题是我需要使字体的斜体比斜体字体少，但仍比正常斜体多。只有这两个可供选择，但我需要介于两者之间的东西，据我所知，没有其他方法可以使用 font-style 属性手动设置字体的倾斜。

然后我想到了`CSS3`变换属性。它允许您倾斜任何元素。计划是使用它，对于不支持它的浏览器，我会退回到看起来不太好的普通斜体。唯一的问题是，由于整个元素是倾斜的，文本看起来有点缩进。

看看这张照片，你会明白我的意思：

![图片](../Images/2d13a3eb6358bc3e89e920301cb813de.png)

如您所见，变换使它在每一行上看起来都更加缩进。

解决方案是针对特定行并使用负边距（或文本缩进）来抵消由变换属性引起的缩进效果。

那么，是否可以针对多行文本段中的特定文本行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:04:09.060

不是 CSS，也不是 javascript。
没有字符来标记结束行，因为单词是内联元素。

尽管**我需要查看**有关您如何进行倾斜的代码，但我相信您在整个街区都做到了。因此，也许您可​​以将其分解为文本。

如果您不能将效果应用于内联元素，您可以尝试将文本放入小的浮动块元素中。

### 编辑 ：

[看到这个小提琴](http://jsfiddle.net/qeDeK/)。这是一个极端情况，有更多的偏差。如您所见，`p`倾斜的是整个块 (the)。

正如我所写的，您可以使用 js 函数将其分解为小的浮动块元素。 [我也做了一个工作示例](http://jsfiddle.net/qeDeK/1/)。它可能应该进行优化，因为它可能会在处理上变得繁重。而且您的 CMS 仍然没有任何特殊标记。

# visual-studio-2012 - 通过 nuget 安装 ReactiveUI 的问题

> ID：12858936
> 
> 赞同：0
> 
> 时间：2012-10-12T12:19:42.593
> 
> 标签：visual-studio-2012, nuget, reactiveui

我有一个基本上是空的 VS2012 类库项目，我正在尝试将 ReactiveUI 添加到其中。我已经使用 Nuget 安装了 NLog 和 Reactive Extensions。当我尝试安装 ReactiveUI 3.99 时，我收到以下错误日志。

更新：我能够手动添加 ReactiveUI 引用而不使用 Nuget，它们似乎工作正常。

```
------- Installing...reactiveui 3.99.4-beta -------
Attempting to resolve dependency 'reactiveui-core (= 3.99.4-beta)'.
Attempting to resolve dependency 'Rx-Main (= 2.0.20823)'.
Attempting to resolve dependency 'Rx-Interfaces (≥ 2.0.20823)'.
Attempting to resolve dependency 'Rx-Core (≥ 2.0.20823)'.
Attempting to resolve dependency 'Rx-Linq (≥ 2.0.20823)'.
Attempting to resolve dependency 'Rx-PlatformServices (≥ 2.0.20823)'.
Attempting to resolve dependency 'reactiveui-nlog (= 3.99.4-beta)'.
Attempting to resolve dependency 'NLog (≥ 2.0.0.2000)'.
Attempting to resolve dependency 'reactiveui-xaml (= 3.99.4-beta)'.
Attempting to resolve dependency 'Rx-Xaml (= 2.0.20823)'.
Attempting to resolve dependency 'reactiveui-testing (= 3.99.4-beta)'.
Attempting to resolve dependency 'Rx-Testing (= 2.0.20823)'.
'reactiveui-core 3.99.4-beta' already installed.
'reactiveui-nlog 3.99.4-beta' already installed.
'Rx-Xaml 2.0.20823' already installed.
'reactiveui-xaml 3.99.4-beta' already installed.
'Rx-Testing 2.0.20823' already installed.
'reactiveui-testing 3.99.4-beta' already installed.
'reactiveui 3.99.4-beta' already installed.
Added file 'packages.config'.
Added file 'packages.config'.
Failed to add reference to 'ReactiveUI'.
============================== 
```

这是我的项目文件的参考：

```
 <ItemGroup>
    <Reference Include="NLog">
      <HintPath>..\packages\NLog.2.0.0.2000\lib\net40\NLog.dll</HintPath>
    </Reference>
    <Reference Include="PresentationCore" />
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Reactive.Core">
      <HintPath>..\packages\Rx-Core.2.0.20823\lib\Net45\System.Reactive.Core.dll</HintPath>
    </Reference>
    <Reference Include="System.Reactive.Interfaces">
      <HintPath>..\packages\Rx-Interfaces.2.0.20823\lib\Net45\System.Reactive.Interfaces.dll</HintPath>
    </Reference>
    <Reference Include="System.Reactive.Linq">
      <HintPath>..\packages\Rx-Linq.2.0.20823\lib\Net45\System.Reactive.Linq.dll</HintPath>
    </Reference>
    <Reference Include="System.Reactive.PlatformServices">
      <HintPath>..\packages\Rx-PlatformServices.2.0.20823\lib\Net45\System.Reactive.PlatformServices.dll</HintPath>
    </Reference>
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
    <Reference Include="WindowsBase" />
  </ItemGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:53:14.167

这是目前的一个错误，创建一个 .NET 4.0 项目或 WinRT 项目，它会工作。对于那个很抱歉。

**更新：**现在已修复，请查看 ReactiveUI 4.0 Preview 5

# lucene - elasticsearch IndexShardMissingException

> ID：12858949
> 
> 赞同：5
> 
> 时间：2012-10-12T12:20:19.563
> 
> 标签：lucene, elasticsearch

每当我启动我的节点时，我都会收到此错误。怎么了？

```
[2012-10-12 10:00:38,196][DEBUG][action.admin.indices.status] [Gorgilla] [monitoring][1], node[dbnnA1NOQ1ubysyADvazFg], [P], s[INITIALIZING]: 

Failed to execute [org.elasticsearch.action.admin.indices.status.IndicesStatusRequest@968f9] org.elasticsearch.index.**IndexShardMissingException**:
[monitoring][1] 

missing at org.elasticsearch.index.service.InternalIndexService.shardSafe(InternalIndexService.java:175) at

org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.shardOperation(TransportIndicesStatusAction.java:153) at 

org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.shardOperation(TransportIndicesStatusAction.java:59) at 

org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction.performOperation

(TransportBroadcastOperationAction.java:234) at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction

$AsyncBroadcastAction.performOperation(TransportBroadcastOperationAction.java:211) at 

org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction$1.run(TransportBroadcastOperationAction.java:187) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run

(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:636) 
```

我的 ES 版本 -> 0.19.0

设置：

```
ES_HOME/bin/service/elasticsearch.conf file:
 set.default.ES_HEAP_SIZE=1024
 set.default.ES_MIN_MEM=1048576
 set.default.ES_MAX_MEM=1048576

elasticsearch.yml
 index.cache.field.type: soft
 index.cache.field.max_size: 1000
 bootstrap.mlockall: true

index settings:
"number_of_shards":5
"number_of_replicas":1 
```

# url-rewriting - apache2将应用程序重定向到neo4j webadmin？

> ID：12858951
> 
> 赞同：1
> 
> 时间：2012-10-12T12:20:25.433
> 
> 标签：url-rewriting, apache2, neo4j, proxypass

我在 apache2 中有一个域 neodb.sample.com 虚拟主机。我想重定向到neo4j webadmin (http://localhost:7474/webadmin) 并保留到 neodb.sample.com 的 url。

我不确定如何继续进行 url 重写。但我能够使用 ProxyPass 和 ProxyPassReverse 进行重定向：

```
ProxyPass /neo http://localhost:7474/webadmin
ProxyPassReverse /neo http://localhost:7474/webadmin 
```

但我无法保留 URL。有人可以帮我解决这个问题。-迪帕克

# linq - StreamInsight 2.1 适配器到观察者

> ID：12858958
> 
> 赞同：1
> 
> 时间：2012-10-12T12:20:44.213
> 
> 标签：linq, biztalk, streaminsight

我一直在尝试实现以下适配器以将 StreamInsight 与 BizTalk 连接： [http ://seroter.wordpress.com/2010/07/09/sending-streaminsight-events-to-biztalk-through-new-web-soaprest-适配器/#comment-11635](http://seroter.wordpress.com/2010/07/09/sending-streaminsight-events-to-biztalk-through-new-web-soaprest-adapter/#comment-11635)

最后，他执行以下操作将查询绑定到适配器：

```
var allQuery = callTypeThreshold.ToQuery(
                     myApp,
                     "Threshold Events",
                     string.Empty,
                     typeof(WebOutputFactory),
                     webAdapterBizTalkConfig,
                     EventShape.Point,
                     StreamEventOrder.FullyOrdered); 
```

现在，如果我没记错的话，这在 StreamInsight 2.1 中不再起作用，我不知道如何做到这一点。有人可以帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:20:42.760

您可以将旧适配器模型与较新的 StreamInsight 2.1 API 一起使用。要将输入适配器用作源，您需要使用[Application.DefineStreamable()](http://msdn.microsoft.com/en-us/library/hh995410%28v=sql.111%29.aspx)的重载。

所以你的代码看起来像这样：

```
var sourceStreamable = Application.DefineStreamable<TPayload>(
typeof(WebInputFactory),
webAdapterBizTalkConfig,
EventShape.Point,
AdvanceTimeSettings.IncreasingStartTime); 
```

现在，如果要将输出适配器用作接收器，则需要使用[Application.DefineStreamableSink()](http://msdn.microsoft.com/en-us/library/hh995539%28v=sql.111%29.aspx)的重载之一。

因此该代码将如下所示：

```
var sink = Application.DefineStreamableSink<TPayload>(
typeof(WebOutputFactory),
webAdapterBizTalkConfig,
EventShape.Point,
StreamEventOrder.FullyOrdered); 
```

然后只需使用 Bind() 方法将您的流媒体绑定到接收器，然后使用 Run() 来启动该过程，您就可以开始了。

# c# - 如何锁定系统？

> ID：12858961
> 
> 赞同：1
> 
> 时间：2012-10-12T12:20:49.787
> 
> 标签：c#, .net, system

如何通过像[Bundespolizei-Virus](http://www.wikihow.com/Remove-Bundespolizei-Ukash-Virus-Manually)`C-Sharp`那样的代码 完全锁定系统？我正在尝试使用一个小软件来保护我的计算机，该软件会在 5 分钟内没有任何反应时锁定系统，并且只有在用户输入正确的密码时才会解锁。

编写自己的病毒或类似的东西不是我的目标，知道如何编写会很好。

我不想像 Windows 那样锁定它，因为我想展示我自己的用户界面。

在为公共计算机编写程序时，它也很有用，用户只能使用该程序并且无法以任何方式访问操作系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:23:39.890

**您可以使用来自user32.dll**的 API 使用这段代码来锁定工作站：

```
[DllImport("user32.dll", SetLastError = true)]
static extern bool LockWorkStation(); 
```

**用法：**

```
bool result = LockWorkStation();
if (result == false)
{
    // An error occured
    throw new Win32Exception(Marshal.GetLastWin32Error());
} 
```

参考：

1.  [在窗口应用程序中使用 c# 锁定计算机](http://www.codeproject.com/Questions/337619/Lock-computer-using-csharp-in-window-application)
2.  [使用 C# 锁定、睡眠或休眠 Windows](http://codehill.com/2009/01/lock-sleep-or-hibernate-windows-using-c/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T12:23:35.387

在 Windows 上，只需设置一个 5 分钟超时的屏幕保护程序密码。这是尽可能安全的。

[更新]

啊，你已经更新了问题。所以你不想要标准的 Windows 锁屏？好吧，这取决于您希望它有多安全。正如我在上面的评论中所说，除非您连接到安全子系统，否则您将无法拦截 CTRL+ALT+DEL。您过去可以通过编写自定义 GINA DLL 来做到这一点，但从 Vista 开始，这已被弃用。现在您需要使用自定义“凭据提供程序”来执行此操作；

[http://msdn.microsoft.com/en-us/magazine/cc163489.aspx](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)

如果你不想走这条路，你也可以使用“策略”将机器锁定到一个点，但总有办法绕过用户模式应用程序。如果用户可以调出任务管理器，那么他们通常可以在盒子上运行任何东西。

# html - 溢出隐藏，但仍然可以滚动（仅限 Chrome）

> ID：12858963
> 
> 赞同：8
> 
> 时间：2012-10-12T12:20:58.070
> 
> 标签：html, css, scroll, overflow

我有一个非常奇怪的 CSS“错误”。

我目前正在研究一个滑块（幻灯片上有表单元素）。当我在幻灯片中的标签上单击并拖动（向右滚动以水平滚动）时，滚动和下一张幻灯片在容器上设置`container`属性时可见。`overflow: hidden;`

`label`我发现没有标签时溢出属性工作正常。

有没有人有解决方案？我尝试了很多 CSS 的东西，但没有成功。我在这里重新创建了 JsFiddle 中的错误：[clicky](http://jsfiddle.net/WJc3X/4/)

## 更新

*   单击和拖动错误仅出现在 Chrome 中。（我测试过IE和FF）
*   另外，这与带有的**滚动**条无关，而是关于您可以单击 an并将其向右滚动到下一张幻灯片的事实。`ul list``labels``label``drag`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T12:23:57.287

这是 Chromium 中的一个已知错误（Google chrome 基于此）请参阅：[http ://code.google.com/p/chromium/issues/detail?id=116655](http://code.google.com/p/chromium/issues/detail?id=116655)

因为 Safari 和 Chrome 似乎都显示了这个问题，所以我冒昧地猜测这个错误对于所有基于[webkit](http://www.webkit.org/)的浏览器都是通用的。

不幸的是，Chromium 开发没有回应。我建议您在提供的链接上为这个问题投票，以帮助看到它在未来的修订中得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T22:42:17.867

这是使用 jQuery 的解决方法。

```
$(your_slider).scroll(function(){
    if($(this).scrollTop() != 0 ){
        $(this).scrollTop(0)
    }
}); 
```

如果您是水平滚动，则将 scrollTop 替换为 scrollLeft

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T15:40:53.037

如果您将 HTML 元素的“溢出”更改为“隐藏”，它会阻止它滚动。唯一的问题是“mousemove”事件。如果您在鼠标按下时禁用滚动（溢出=隐藏），它将正常工作。如果您在鼠标移动时执行此操作（例如用于拖动），它将无法正常工作。因此，您应该将禁用滚动从“onmousemove”移至“onmousedown”。

# java - Java 中需要使用的特殊字符（未在键盘中给出）

> ID：12858969
> 
> 赞同：0
> 
> 时间：2012-10-12T12:21:16.350
> 
> 标签：java

想要使用特殊字符 ex :`(£, ¥)`键盘中没有的字符来准备一些字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:26:28.610

如果您知道字符的 unicode 字符代码，则可以使用 \uXXXX 方法将字符放入代码中的字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:26:06.350

在 Windows 上，有一个名为charmap.exe 的不错的实用程序，它列出了每种字体中的所有可用字符。您可以从那里轻松复制和粘贴字符。

当您需要更多晦涩的 unicode 字符时，可以尝试在以下网站之一上找到它们并复制并粘贴它们：

[http://www.isthisthingon.org/unicode/index.php](http://www.isthisthingon.org/unicode/index.php)

[http://www.fileformat.info/info/unicode](http://www.fileformat.info/info/unicode)

[http://www.unicode.org/charts/](http://www.unicode.org/charts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T12:26:36.417

这是一个 alt+numpad 键表，您可以键入以在 Windows 上获取符号

[http://www.irongeek.com/alt-numpad-ascii-key-combos-and-chart.html](http://www.irongeek.com/alt-numpad-ascii-key-combos-and-chart.html)

在您的情况下 ALT+156 是 £ 而 ALT+157 或 190 是 ¥ 取决于您的键盘设置

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:28:23.233

您真的应该在 Java 代码中使用 UNICODE，如下例所示：

```
 //Use a string literal to assign a value to the String
    String address = "I live at 22b Baker Street!";

    //The same string but using Unicode values
    String unicodeAddress = "\u0049\u0020\u006C\u0069\u0076\u0065"
            + "\u0020\u0061\u0074\u0020\u0032\u0032\u0042\u0020"
            + "\u0042\u0061\u006B\u0065\u0072\u0020\u0053\u0074"
            + "\u0072\u0065\u0065\u0074\u0021";

    System.out.println("Here is Sherlock's address: " + address); 
    System.out.println("It even works using Unicode characters: " + unicodeAddress); 
```

示例取自[这里](http://java.about.com/od/understandingdatatypes/ss/Fun-With-Strings-Example-Code.htm)。

我还发现[这个资源](http://www.ssec.wisc.edu/~tomw/java/unicode.html)对于查找 unicode 很有用。

它避免了与特殊字符编码相关的各种问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T20:07:25.167

使用 Notepad++（在 Windows 上）或任何文本编辑器打开包含特殊字符的文件。然后，复制该字符并将其粘贴到此 URL ( [https://unicode-table.com/en/](https://unicode-table.com/en/) )。通过这种方式，您可以获得该字符的四位 unicode。

例如，在此伪代码中，检查字符串中是否存在特殊字符（右箭头）。

```
String s = "[O2] = 8.1 ppb→ 0 ppb";

if(s.indexOf("\u2192") != -1)
{
    System.out.println("Character \u2192 is present in the string");
} 
```

# backbone.js - Backbone 应用程序的结构。型号/系列问题

> ID：12858970
> 
> 赞同：3
> 
> 时间：2012-10-12T12:21:17.603
> 
> 标签：backbone.js

我的应用程序的逻辑非常简单。我有获取 JSONP 的模型（数据包含年、季度和季度包含不同的键：值）。获取数据后，View 会监听 Model 的“change”事件，然后渲染数据。到现在为止还挺好。

但随后我需要监听“change:year”/“change:quarter”并根据更改使用新的 url 获取数据。但是当 "change:year"/"change:quarter" 被触发时，全局 "change" 也会被触发。

当然，如果我将使用 Collection 而不是 Model – 对我来说就是“重置”。但在这种情况下，我不能这么容易地听“change:year”——我必须再创建几个模型（对于年、季度和季度中的每个键）。但我想让应用程序保持简单。

还有其他方法吗？或者创建更多模型是不可避免的？

谢谢。

UPD：仍然需要“更改”事件，因为模型必须在获取新数据后重新渲染。

解决方案：我创建了通用控制器，它包含需要更改的属性。并在 .url() 方法中从 Controller 获取它们以修改 url。我坚持使用 Collection 的 fetch()/"reset" 通知并在“更改”时为 Controller 设置监听器。因此，当我更改“年”/“季度”时，视图会从控制器获取通知，并且当相应的集合获取时 - 它正在使用新的 url 获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:47:10.700

据我了解，您不希望仅接收或更改全局模型`change`事件-但您必须这样做。`year``quarter`

因此，当接收到全局更改事件时，您可以检查它是否只是`year`或`quarter`已[更改](http://documentcloud.github.com/backbone/#Model-changedAttributes)，并跳过正常的事件处理。像这样的东西：

```
this.model.bind("change", this.render, this);
this.model.bind("change:year", this.fetchSomething, this);
this.model.bind("change:quarter", this.fetchSomething, this); 

render : function(){
    var attributesExceptYearAndQuarter = _.without(this.model.attributes, ['year', 'quarter']) 
    if(this.model.changedAttributes(attributesExceptYearAndQuarter).length > 0){
         // do the rendering
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:12:26.640

您可以在模型的更改侦听器中检查更改的属性。

```
var MyModel=Backbone.Model.extend({
    initialize:function(){
      this.bind("change",this.changeModel);
      this.bind("change:year",this.changeYear);

   },
   changeModel:function(model,objs){
      //Checking changed attributes
      if (_.has(objs.changes,"year") || _.has(objs.changes,"quarter")) return this;

     console.log("Processing",objs.changes);
     return this;
  },
   changeYear:function(model,new_val){
    console.log("year changed.",new_val);
    return this;
  }

});

var mymodel=new MyModel();
mymodel.set("year",2012); 
mymodel.set("month",6); 
```

如果您有一个监听模型更改事件的视图，您应该向模型添加一个不同的属性并监听此属性的更改事件，而不是模型的更改事件并在此属性更改时呈现视图。如果您的“年”和“季度”属性未在如下更改的属性中，请在 changeModel 函数中更改此属性的值并触发侦听器。

```
//Edit changeModel as below
changeModel:function(model,objs){
          //Checking changed attributes
          if (_.has(objs.changes,"year") || _.has(objs.changes,"quarter")) return this;

          this.set("rerender",!this.rerender); //Changing for triggering change event
         return this;
      },

//View's constructor function
initialize:function(){
   this.model.bind("change:rerender",this.render);
} 
```

# java - 如何让 Selenium-WebDriver 在 Java 中等待几秒钟？

> ID：12858972
> 
> 赞同：107
> 
> 时间：2012-10-12T12:21:22.717
> 
> 标签：java, selenium, selenium-webdriver, webdriver

我正在研究 Java Selenium-WebDriver。我添加了

```
driver.manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS); 
```

和

```
WebElement textbox = driver.findElement(By.id("textbox")); 
```

因为我的应用程序需要几秒钟来加载用户界面。所以我设置了 2 秒的隐式等待。但我**无法找到元素文本框**

然后我添加`Thread.sleep(2000);`

现在它工作正常。哪个是更好的方法？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-12T13:02:26.330

好吧，有两种类型的等待：显式等待和隐式等待。显式等待的想法是

```
WebDriverWait.until(condition-that-finds-the-element); 
```

隐式等待的概念是

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

您可以在[此处](http://www.bizalgo.com/2012/01/14/timing-races-selenium-2-implicit-waits-explicit-waits/)了解详细信息。

在这种情况下，我更喜欢使用显式等待（`fluentWait`特别是）：

```
public WebElement fluentWait(final By locator) {
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(30, TimeUnit.SECONDS)
            .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class);

    WebElement foo = wait.until(new Function<WebDriver, WebElement>() {
        public WebElement apply(WebDriver driver) {
            return driver.findElement(locator);
        }
    });

    return  foo;
}; 
```

`fluentWait`函数返回您找到的 Web 元素。来自文档`fluentWait`： *Wait 接口的实现，它可以动态配置其超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。* 您可以[在这里获得详细信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

在您的情况下，用法`fluentWait`如下：

```
WebElement textbox = fluentWait(By.id("textbox")); 
```

恕我直言，这种方法更好，因为您不确切知道要等待多少时间，并且在轮询间隔中，您可以设置任意时间值，通过该时间值验证元素的存在。问候。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-08T00:39:05.657

这个线程有点老，但我想我会发布我目前正在做的事情（正在进行中）。

虽然我仍然遇到系统负载过重的情况，当我单击提交按钮（例如 login.jsp）时，所有三个条件（见下文）都会返回`true`，但下一页（例如 home.jsp）没有t 开始加载了。

这是一个接受 ExpectedConditions 列表的通用等待方法。

```
public boolean waitForPageLoad(int waitTimeInSec, ExpectedCondition<Boolean>... conditions) {
    boolean isLoaded = false;
    Wait<WebDriver> wait = new FluentWait<>(driver)
            .withTimeout(waitTimeInSec, TimeUnit.SECONDS)
            .ignoring(StaleElementReferenceException.class)
            .pollingEvery(2, TimeUnit.SECONDS);
    for (ExpectedCondition<Boolean> condition : conditions) {
        isLoaded = wait.until(condition);
        if (isLoaded == false) {
            //Stop checking on first condition returning false.
            break;
        }
    }
    return isLoaded;
} 
```

我已经定义了各种可重用的 ExpectedConditions（下面三个）。在此示例中，三个预期条件包括 document.readyState = 'complete'、不存在“wait_dialog”和不存在“spinners”（指示正在请求异步数据的元素）。

只有第一个可以普遍应用于所有网页。

```
/**
 * Returns 'true' if the value of the 'window.document.readyState' via
 * JavaScript is 'complete'
 */
public static final ExpectedCondition<Boolean> EXPECT_DOC_READY_STATE = new ExpectedCondition<Boolean>() {
    @Override
    public Boolean apply(WebDriver driver) {
        String script = "if (typeof window != 'undefined' && window.document) { return window.document.readyState; } else { return 'notready'; }";
        Boolean result;
        try {
            result = ((JavascriptExecutor) driver).executeScript(script).equals("complete");
        } catch (Exception ex) {
            result = Boolean.FALSE;
        }
        return result;
    }
};
/**
 * Returns 'true' if there is no 'wait_dialog' element present on the page.
 */
public static final ExpectedCondition<Boolean> EXPECT_NOT_WAITING = new ExpectedCondition<Boolean>() {
    @Override
    public Boolean apply(WebDriver driver) {
        Boolean loaded = true;
        try {
            WebElement wait = driver.findElement(By.id("F"));
            if (wait.isDisplayed()) {
                loaded = false;
            }
        } catch (StaleElementReferenceException serex) {
            loaded = false;
        } catch (NoSuchElementException nseex) {
            loaded = true;
        } catch (Exception ex) {
            loaded = false;
            System.out.println("EXPECTED_NOT_WAITING: UNEXPECTED EXCEPTION: " + ex.getMessage());
        }
        return loaded;
    }
};
/**
 * Returns true if there are no elements with the 'spinner' class name.
 */
public static final ExpectedCondition<Boolean> EXPECT_NO_SPINNERS = new ExpectedCondition<Boolean>() {
    @Override
    public Boolean apply(WebDriver driver) {
        Boolean loaded = true;
        try {
        List<WebElement> spinners = driver.findElements(By.className("spinner"));
        for (WebElement spinner : spinners) {
            if (spinner.isDisplayed()) {
                loaded = false;
                break;
            }
        }
        }catch (Exception ex) {
            loaded = false;
        }
        return loaded;
    }
}; 
```

根据页面的不同，我可能会使用其中一个或全部：

```
waitForPageLoad(timeoutInSec,
            EXPECT_DOC_READY_STATE,
            EXPECT_NOT_WAITING,
            EXPECT_NO_SPINNERS
    ); 
```

以下类中还有预定义的 ExpectedConditions： [org.openqa.selenium.support.ui.ExpectedConditions](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-17T19:46:48.973

如果使用 webdriverJs (node.js)，

```
driver.findElement(webdriver.By.name('btnCalculate')).click().then(function() {
    driver.sleep(5000);
}); 
```

上面的代码使浏览器在单击按钮后等待 5 秒。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-12T12:49:49.440

使用`Thread.sleep(2000);`是无条件的等待。如果您的测试加载速度更快，您仍然需要等待。所以原则上使用`implicitlyWait`是更好的解决方案。

但是，我不明白为什么`implicitlyWait`在您的情况下不起作用。您是否测量了`findElement`在引发异常之前是否实际需要两秒钟。如果是这样，您可以尝试使用[此](https://stackoverflow.com/a/4149593/896302)答案中描述的 WebDriver 的条件等待吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-20T11:20:20.203

我喜欢使用自定义条件。这是Python中的一些代码：

```
def conditions(driver):
    flag = True
    ticker = driver.find_elements_by_id("textbox")
    if not ticker:
        flag = False
    return flag

... click something to load ...
self.wait = WebDriverWait(driver, timeout)
self.wait.until(conditions) 
```

每当您需要等待时，您都可以通过检查某个元素的存在来明确地做到这一点（此类元素可能因页面而异）。`find_elements_by_id`返回列表 - 是否为空，您只需检查即可。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-28T02:03:57.830

点击似乎被阻止？- 如果您使用 WebDriverJS，这是另一种等待方式：

```
driver.findElement(webdriver.By.name('mybutton')).click().then(function(){
  driver.getPageSource().then(function(source) {
    console.log(source);
  });
}); 
```

上面的代码在单击按钮后等待下一页加载，然后获取下一页的源。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-19T12:38:45.383

隐式等待和 Thread.sleep 两者都仅用于同步..但不同之处在于我们可以使用隐式等待整个程序，但 Thread.sleep 仅适用于该单个代码..这里我的建议是在程序中使用隐式等待一次当您的网页每次刷新时意味着在那个时候使用 Thread.sleep ..它会更好:)

这是我的代码：

```
package beckyOwnProjects;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;

public class Flip {

    public static void main(String[] args) throws InterruptedException {
        WebDriver driver=new FirefoxDriver();
        driver.manage().window().maximize();
        driver.manage().timeouts().implicitlyWait(2, TimeUnit.MINUTES);
        driver.get("https://www.flipkart.com");
    WebElement ele=driver.findElement(By.cssSelector(".menu-text.fk-inline-block"));
    Actions act=new Actions(driver);
    Thread.sleep(5000);
    act.moveToElement(ele).perform();
    }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-24T07:55:57.400

使用动作 -

> 用于模拟复杂用户手势的面向用户的 API。

请参阅 [Actions#pause](https://selenium.dev/selenium/docs/api/java/org/openqa/selenium/interactions/Actions.html#pause-long-)方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T19:37:39.913

有时隐式等待似乎会被覆盖，等待时间会缩短。[@eugene.polschikov] 有很好的文档说明原因。我在使用 Selenium 2 进行测试和编码时发现，隐式等待很好，但有时您必须显式等待。

最好避免直接调用线程休眠，但有时也没有很好的解决方法。但是，还有其他 Selenium 提供的等待选项可以提供帮助。*waitForPageToLoad*和*waitForFrameToLoad*被证明特别有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-29T19:17:33.643

有时隐式等待会失败，说一个元素存在但实际上不存在。

解决方案是避免使用 driver.findElement 并将其替换为隐式使用显式等待的自定义方法。例如：

```
import org.openqa.selenium.NoSuchElementException;

public WebElement element(By locator){
    Integer timeoutLimitSeconds = 20;
    WebDriverWait wait = new WebDriverWait(driver, timeoutLimitSeconds);
    try {
        wait.until(ExpectedConditions.presenceOfElementLocated(locator));
    }
    catch(TimeoutException e){
        throw new NoSuchElementException(locator.toString());
    }
    WebElement element = driver.findElement(locator);
    return element;
} 
```

除了零星的、偶然的失败之外，还有其他原因可以避免隐式等待（请参阅此[链接](https://stackoverflow.com/questions/10404160/when-to-use-explicit-wait-vs-implicit-wait-in-selenium-webdriver/28067495#28067495)）。

您可以像 driver.findElement 一样使用这个“元素”方法。例如：

```
 driver.get("http://yoursite.html");
    element(By.cssSelector("h1.logo")).click(); 
```

如果您真的想等待几秒钟进行故障排除或其他一些罕见的情况，您可以创建一个类似于 selenium IDE 提供的暂停方法：

```
 public void pause(Integer milliseconds){
    try {
        TimeUnit.MILLISECONDS.sleep(milliseconds);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-05T08:36:22.157

**答**：等待几秒钟，然后使用 Selenium WebDriver 的元素可见性通过以下方法。

**implicitlyWait()**：WebDriver 实例等到整个页面加载。您可以使用 30 到 60 秒来等待整个页面加载。

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

**ExplicitlyWait WebDriverWait()**：WebDriver 实例等到整个页面加载。

```
WebDriverWait wait = new WebDriverWait(driver, 60);

wait.until(ExpectedConditions.visibilityOf(textbox));

driver.findElement(By.id("Year")).sendKeys(allKeys); 
```

**注意**：请使用 ExplicitlyWait WebDriverWait() 来处理任何特定的 WebElement。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-11-26T08:44:13.090

我更喜欢下面的代码等待 2 秒。

```
for(int i=0; i<2 && driver.findElements(By.id("textbox")).size()==0 ; i++){
   Thread.sleep(1000);
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-12-27T07:49:03.920

隐式等待：在隐式等待期间，如果 Web Driver 由于其可用性而无法立即找到它，则 WebDriver 将等待提到的时间，并且在指定的时间段内不会再次尝试查找元素。一旦指定的时间结束，它将在抛出异常之前的最后一次尝试再次搜索元素。默认设置为零。一旦我们设置了一个时间，Web Driver 就会等待 WebDriver 对象实例的时间。

显式等待：可能存在特定元素需要超过一分钟才能加载的情况。在这种情况下，您绝对不喜欢为隐式等待设置很长的时间，因为如果您这样做，您的浏览器将为每个元素等待相同的时间。为避免这种情况，您只需在所需元素上单独设置时间即可。通过遵循这一点，您的浏览器隐式等待时间对于每个元素都会很短，而对于特定元素会很长。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-02-16T17:32:46.130

```
Thread.sleep(1000); 
```

更糟糕的是：作为静态等待，它会使测试脚本变慢。

```
driver.manage().timeouts.implicitlyWait(10,TimeUnit.SECONDS); 
```

这是动态等待

*   它在 webdriver 存在之前有效或在驱动程序生命周期之前具有范围
*   我们也可以隐式等待。

最后，我的建议是

```
WebDriverWait wait = new WebDriverWait(driver,20);
wait.until(ExpectedConditions.<different canned or predefined conditions are there>); 
```

有一些预定义的条件：

```
isAlertPresent();
elementToBeSelected();
visibilityOfElementLocated();
visibilityOfAllElementLocatedBy();
frameToBeAvailableAndSwitchToIt(); 
```

*   也是动态等待
*   在这等待将只在几秒钟内
*   我们必须使用显式等待我们想要使用的特定 Web 元素。

# jquery-mobile - 在 Jquery-Mobile 中的 pageshow 上打开一个弹出窗口

> ID：12858978
> 
> 赞同：5
> 
> 时间：2012-10-12T12:21:43.467
> 
> 标签：jquery-mobile, popup

看来我无法在事件“pageshow”调用的方法中打开弹出窗口。我知道我的代码没有错，因为当我单击按钮时会打开弹出窗口......并且我在 Firebug 中检查了没有错误消息。这是代码：

HTML：

```
<div data-role="popup" id="myPopup">
    ... my elements
</div> 
```

JS：

```
$('#p_guarantee').live('pageshow', function(){
    $('#myPopup').popup('open');
}); 
```

有谁知道有什么特别的事情要做吗？如果您能解决我的问题，我将不胜感激:)

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:27:26.263

按照我们在评论中的讨论，您可以在事件触发`setTimeout()`后使用函数解决此问题。`pageChange`我怀疑这可能是因为页面首先被渲染和改进，只有在此之后，具有特殊含义的元素（如弹出窗口）才会绑定它们的事件。

您还可以尝试`data-role="popup"`从弹出式 DIV 中完全删除，并基本上执行以下操作：

```
<div id="myPopup">
    ... my elements
</div>

$('#p_guarantee').live('pagechange', function(){
    $('#myPopup').popup();
    $('#myPopup').popup('open');
}); 
```

...看看这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:50:21.177

我看你的代码没有问题。您正在为哪个平台开发？

尝试使用此示例中的代码：http: [//jsfiddle.net/hhejq/1/](http://jsfiddle.net/hhejq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T22:18:05.273

如果你想使用 jquery mobile 作为弹出窗口，首先创建一个带有 data-rel popup 和 href 的链接，指向包含 pop 元素的容器的 id。div 应该有 data-role 弹出窗口

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
example
<a href="#pop" data-rel="popup>click me</a>
<div data-role="popup" id="pop">
... pop up elements go here ...
</div>
```

# html - 将输入提交与输入框放在同一行

> ID：12858979
> 
> 赞同：19
> 
> 时间：2012-10-12T12:21:48.430
> 
> 标签：html, css

这可能很简单，但我不知道该怎么做。目前使用此代码，“查找”按钮位于输入“位置”框下方的行中。我如何让它像大多数搜索框一样位于右侧的同一行？

**HTML**

```
<div class="fieldwrapper">
<input id="field_location" class="field r2" placeholder="Town, City or Postcode" id="Postcode" name="Postcode" type="text" value=""><input type="submit" id="findbutton" value="Find" />
</div> 
```

**CSS**

```
field { font-family:arial, sans-serif; border-color: #d9d9d9; border-top:solid 1px #c0c0c0; }
input.field{width:100%} 
```

**链接** [http://jsfiddle.net/VL3Dj/](http://jsfiddle.net/VL3Dj/)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-12T12:25:37.023

如果你想要你的文本框`100% width`和一个按钮，你可以这样做：[**我的小提琴**](http://jsfiddle.net/CQEAd/)

```
<input type="submit"value="Find" style="float: right" />
<div style="overflow: hidden; padding-right: .5em;">
   <input type="text" style="width: 100%;" />
</div>​ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T12:26:43.993

......***[演示](http://jsfiddle.net/rohitazad/e94q3/12/)***

嗨，现在添加这个 CSS

```
.fieldwrapper{
white-space: nowrap;
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/e94q3/12/)***

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T11:37:18.640

您只需要知道按钮的宽度即可。然后你基本上给输入一个完整的宽度和绝对位置的按钮到右边。填充是所以按钮后面没有文本：

```
 <form method="post" action="">
      <input type="text" name="search-str" id="search-str" value=""/>
      <button type="submit">Submit</button>
    </form> 
```

至于CSS：

```
form {
  position: relative;
}

input {
  width: 100%;
  padding-right: 40px;
}

button {
  width: 40px;
  position: absolute;
  top: 0;
  right: 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:25:10.190

这是因为您的输入字段设置为 100% 宽，旁边的按钮没有空间。

这是一个固定版本：http: [//jsfiddle.net/ThfES/1/](http://jsfiddle.net/ThfES/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:27:11.043

您需要`float`阻止元素，以便它们并排显示，可以这么说。`inline`元素喜欢`<a>`并`<span>`默认执行此操作。了解有关 CSS 框模型的更多信息。

您的解决方案：http: [//jsfiddle.net/HBJtT/](http://jsfiddle.net/HBJtT/)

编辑：保持`input`领域一样`100%`宽。

潜在的解决方案：http: [//jsfiddle.net/3TZL8/](http://jsfiddle.net/3TZL8/)

虽然我不支持这种解决方案，但如果您保持输入文本字段`100%`宽的动机是使按钮和字段看起来“无缝在一起”，您应该使用网格或 UI 框架。我喜欢 Foundation 框架，可以在这里看到一个可能的解决方案：http: [//foundation.zurb.com/docs/forms.php](http://foundation.zurb.com/docs/forms.php)（向下滚动到“使用后缀操作输入”示例）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T12:28:18.377

尝试跟随，宽度：50%

```
input.field{width:50%}​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-30T08:24:52.950

你可以做这样的事情（在我的情况下工作）：

```
<div style="width:150px"><p>Start: <input  type="text" id="your_id"></p> 
  </div>

<div style="width:130px;margin-left: 160px;margin-top: -52px">
<a href="#" data-role="button" data-mini="true">Button</a>
</div> 
```

这是一个演示：http: [//jsfiddle.net/gn3qx6w6/1/](http://jsfiddle.net/gn3qx6w6/1/)

# c# - 将数据从一种形式传递到另一种形式

> ID：12858980
> 
> 赞同：0
> 
> 时间：2012-10-12T12:21:51.123
> 
> 标签：c#, .net, forms

今天记一个问题，在c#winform程序中。

如果有*表格 A*和*表格 B*；表格 B 有一个文本框（需要只读）

Form A 代码如下：

```
B b = new B("FormB");
b.Show(); 
```

FormB 代码如下：

**情况1：**

```
public B(string str)
{
   this.textbox1.text = str;

   this.textbox1.Enable = false;
} 
```

我将该程序部署到客户服务器，但是`textbox1.text = ""`, 没有任何价值，但它可以在我的本地计算机上运行。

我试试这个：

**情况2：**

```
public B(string str)
{
    this.textbox1.text = str;

    this.textbox1.ReadOnly = true;        
} 
```

然后`texbox1.text = "FormB";`它可以在我的本地计算机和客户服务器上运行。

关键和重要的问题是，为什么情况1可以在我的本地计算机上运行，​​而不能在客户服务器上运行？

谁能告诉这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:35:38.453

让我看看我对你的理解是否正确，你问为什么`TextBox`当你使用`ReadOnly = true`而**不是** `Enabled = false`更新时，上面的文字会更新？

* * *

如果是这样，我想这是设计使然。

来自 MSDN：[TextBoxBase.ReadOnly 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.readonly.aspx)

> 当此属性设置为 true 时，用户无法在运行时更改控件的内容。**将此属性设置为 true 后，您仍然可以在代码中设置 Text 属性的值。**您可以使用此功能**而不是禁用具有 Enabled 属性的控件，**以允许复制内容并显示工具提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:35:43.857

已经提出并回答了类似的问题......这是我提供的一些示例

[One Sample](https://stackoverflow.com/questions/4887820/how-do-you-pass-an-object-from-form1-to-form2-and-back-to-form1/4887906#4887906)
[Another using properties and methods to expose / exchange data -- almost step by step sample](https://stackoverflow.com/questions/7969582/how-to-update-textbox-in-form1-from-form2/7969676#7969676)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:27:40.530

您需要`InitializeComponent()`在您的构造函数中拥有 - 与空白构造函数相同。

[http://www.dotnetperls.com/initializecomponent](http://www.dotnetperls.com/initializecomponent)

# c# - DataContext 更新和回滚

> ID：12858981
> 
> 赞同：0
> 
> 时间：2012-10-12T12:22:02.590
> 
> 标签：c#, datacontext, rollback, submitchanges

我的 DataContext 有问题。在下面的代码片段中，我首先删除数据上下文中的现有对象，然后在相同的代码中再次添加新对象。问题是，由于我正在使用 .DeleteOnSubmit() 它在我的 Datacontext 中仍然包含 2 个实体，因此它正确存储在我的数据库中。

这里的代码：

```
public void ConnectedApartment(Apartment newApartment, Apartment existing)
{
    ConApart ConApartTemp = new ConApart();
    ConApartTemp.Apartment1 = newApartment;
    ConApartTemp.Apartment = existing;
    DatabaseConnection.ConAparts.InsertOnSubmit(ConApartTemp);
}

public void opdaterConApart(ArrayList connected, Apartment Apartmenten)
{
    foreach (ConApart sam in Apartmenten.ConAparts)
    {
      DatabaseConnection.ConAparts.DeleteOnSubmit(sam);
    }
    foreach (ConApart sam2 in Apartmenten.ConAparts1)
    {
      DatabaseConnection.ConAparts.DeleteOnSubmit(sam2);
    }

    foreach (Apartment apa in connected)
    {
      ConnectedApartment(apa, Apartmenten);
    }
    DatabaseConnection.SubmitChanges();
} 
```

如果我之前没有 SubmitChanges() 的删除

```
 foreach (Apartment apa in connected)
    {
      ConnectedApartment(apa, Apartmenten);
    } 
```

然后我的 Datacontext 将包含 2 个实体，我的 gui 将在每次更改时显示重复项。

如果我使用以下内容：

```
public void ConnectedApartment(Apartment newApartment, Apartment existing)
{
    ConApart ConApartTemp = new ConApart();
    ConApartTemp.Apartment1 = newApartment;
    ConApartTemp.Apartment = existing;
    DatabaseConnection.ConAparts.InsertOnSubmit(ConApartTemp);
}

public void opdaterConApart(ArrayList connected, Apartment Apartmenten)
{
    foreach (ConApart sam in Apartmenten.ConAparts)
    {
      DatabaseConnection.ConAparts.DeleteOnSubmit(sam);
    }
    foreach (ConApart sam2 in Apartmenten.ConAparts1)
    {
      DatabaseConnection.ConAparts.DeleteOnSubmit(sam2);
    }

    DatabaseConnection.SubmitChanges();

    foreach (Apartment apa in connected)
    {
      ConnectedApartment(apa, Apartmenten);
    }
    DatabaseConnection.SubmitChanges();
} 
```

然后它可以工作，但是对于回滚功能，该解决方案很弱，因为它会： 1\. 删除现有对象 2\. submitChanges 3\. 添加新对象 4\. submitChanges

但是，如果在第 2 点和第 3 点之间出现故障，被删除的对象就会丢失。有什么建议么？我怎样才能维护我的上下文，所以它不会挂在双实体上，并且如果出现问题仍然可以处理回滚功能？？？

# algorithm - 截线点和随机物体

> ID：12858982
> 
> 赞同：-1
> 
> 时间：2012-10-12T12:22:05.513
> 
> 标签：algorithm, game-engine, libgdx

在我的游戏中，我实现了两条线的交点和带圆的线。如何实现与某个对象（如天空中的云）的相交线？我需要交点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:26:22.823

当您的对象由线段组成时，您可以与这些线段相交。对于与线段相交，您可以将代码用于线相交，但必须另外确保相交点位于端点之间。

# html - 在上一个跨度之后无法使内联块跨度流动

> ID：12858987
> 
> 赞同：2
> 
> 时间：2012-10-12T12:22:31.403
> 
> 标签：html, css

我正在尝试获取一个跨度，该跨度指示一个字段是否必须始终在其文本跨度之后流动。

我受到我正在使用的框架的限制，因为 td 和标签具有相同的固定宽度，因此这些额外的内容必须位于标签标签内。为了更好地衡量，在文本项之前有一个可选内容（问题/帮助图标）的占位符。

一些标签文本对于受限制的大小来说太长了，所以会换行，这一切都让这一切感到困惑。

这就是我所在的位置，星号永远不应该在文本下方流动。（现在是这样）

就像是：

![在此处输入图像描述](../Images/e4e28982460f9e199bdec6be4dedf12b.png)

[这是小提琴](http://jsfiddle.net/bPGWY/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:31:36.517

您可以使用`:after`CSS 伪选择器来实现这一点。

这里的工作解决方案：http: [//jsfiddle.net/mFrCT/](http://jsfiddle.net/mFrCT/)

编辑：如评论中所述，如果跨浏览器兼容性是一个问题，解决方法可能是[http://jsfiddle.net/6BJVt/](http://jsfiddle.net/6BJVt/)使用`position: absolute`所需的星号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T12:31:56.410

如果真的没有办法摆脱那些糟糕的表格，我建议使用以下 CSS：

```
td {
    position:relative;   
}
.field-mandatory {
    position:absolute;
    top:2px;
    right: 3px;   
} 
```

[http://jsfiddle.net/bPGWY/11/](http://jsfiddle.net/bPGWY/11/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T12:34:06.767

破解它：http: [//jsfiddle.net/bPGWY/12/](http://jsfiddle.net/bPGWY/12/)

# java - 如何使用 Apache HTTPClient 的 post 方法将 List 发送到服务器

> ID：12858990
> 
> 赞同：0
> 
> 时间：2012-10-12T12:22:43.713
> 
> 标签：java, http, apache-commons-httpclient

我希望`List<Beans>`在 HTTP Post 请求中附加一个。

在使用 Apache`HTTPClient`时，我无法这样做。

这就是我想做的：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);

nameValuePairs.add(new BasicNameValuePair("dailySalesList",beanList));

post.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

但是，BasicNameValuePair 似乎只接受 2 个字符串作为参数。我希望利用它，以便可以使用字符串（用于标识和对象）来传递列表。基本上是类似于使用地图的功能。

关于如何使用 Apache 完成的任何指示`HTTPClient`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:27:25.583

此上下文中的 NameValuePair 旨在将简单的文本参数作为 URL 中的查询发送（您有时会看到 ?foo=1&bar=2 参数）。发送更复杂的内容（如列表）的最佳方式是以XML 或 JSON 等交换格式*序列化它，然后将其作为请求正文发送。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:59:40.323

感谢 Kiyura 为我指明了正确的方向，即使用 JSON。

我利用[GS​​ON](http://code.google.com/p/google-gson/) java 库从 List 转换为 JSON 表示。

如果您想在不手动转换通用类型的情况下使用 JSON，它是一个漂亮的库。

gson[文档](https://sites.google.com/site/gson/gson-user-guide)也是一个很好的参考。

# javascript - 如何检查特定字符串中是否存在任何特殊字符

> ID：12858992
> 
> 赞同：1
> 
> 时间：2012-10-12T12:22:54.763
> 
> 标签：javascript

我想从字符串中删除 '<' '>' 所以我使用了脚本

```
<html>
<body>

 <script>
  var f = ((/(<script>)/i).exec("hello<") != null);
  alert("ok"+f);

  document.write("<br>Value:" +f);

 </script>
</body>
</html> 
```

但我将变体 f 值设为 null ..

你能帮我吗？如果代码有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:48:50.357

您可以使用`.test`方法：

```
​var originalString = '<script>',
    r = originalString.test(/<|>/g, ''); // returns true or false

if (r === true) {
  //whatever you wanna do if you have special characters in 
  // your string
} else {
  // no special chars - all clean!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:31:10.357

我希望这个能帮上忙

```
if("hello<".indexOf('<') != -1){
     var f = "hello<".replace('<','');
     alert("ok "+f);   
}​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:35:16.743

您可以通过 JavaScript 正则表达式来实现这一点。

```
"<script>".replace(/<|>/ig, "");
outputs: "script" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:38:13.820

```
 var f = ('<script>'.replace(/<|>/g, ''));
  alert("ok"+f);

  document.write("<br>Value:" +f); 
```

# active-directory - WMI如何远程执行命令？

> ID：12858993
> 
> 赞同：2
> 
> 时间：2012-10-12T12:23:01.107
> 
> 标签：active-directory, wmi

我想在服务器上完成组策略后立即远程执行 gpupdate，有没有办法在远程 pc 上批量运行命令“gpupdate /force”？我已经使用powershell来完成，但是应该在远程PC上运行“Enable-PSRemoting”并选择所有项目来创建监听器。所以我想找到有什么方法可以远程运行命令吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:32:07.763

您可以使用 WMI 或 psexec 运行命令，但请记住，用户部分将为执行命令的用户运行，而不是为登录用户运行。如果你需要它，它会变得复杂。在这里，您可以编写一个模拟登录用户的程序，并通过 psexec 使用 -s swith 启动该程序，它以系统身份执行命令。系统默认具有模拟权限。

# filter - 如何过滤掉具有给定列（非空）的行？

> ID：12858995
> 
> 赞同：6
> 
> 时间：2012-10-12T12:23:02.097
> 
> 标签：filter, null, hbase, out

我想使用过滤器进行 hbase 扫描。例如，我的表有 A、B、C 列族，A ​​有 X 列。有些行有 X 列，有些没有。如何实现过滤器以过滤掉所有具有 X 列的行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T18:39:40.987

我猜你正在 HBase 中寻找`SingleColumnValueFilter`。如[API中所述](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.html#setFilterIfMissing%28boolean%29)

> 如果在行上找不到列，要防止发出整行，请`setFilterIfMissing(boolean)`在 Filter 对象上使用。否则，如果找到该列，则仅当值通过时才会发出整行。如果该值失败，则该行将被过滤掉。

但是`SingleColumnValueFilter`希望一个值具有 Column X "CompareOp" 的东西，说如果 ColumnX == "X" 则带上这一行，或者如果 ColumnX != "A sentinel value that ColumnX can never take" 并且`setFilterIfMissing(true)`如果 ColumnX 有一些值，它被返回。

我希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:00:40.370

您可以将[SkipFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SkipFilter.html)与[ColumnPrefixFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.html)一起使用。ColumnPrefixFilter 获取列存在的键（HBase 行只有在有值时才会有列） Skip 过滤器会在第一个过滤器上为您提供“Not”，因此将省略该行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T15:38:15.193

Ankit Arnon 用户1573269

我可以让它工作的唯一方法，如下所示

所以 - 我有一个包含 rule1、rule2、rule3 等列的表格。行只能有 rule1 列，或者 rule1 和 rule2，或者 rule1 和 rule2 和 rule3 等等。说 - 我想提取其中只有 rule1 的行。现在这意味着，我将不得不跳过其中包含 rule2 的行。

```
Scan getRules = new Scan();
    ColumnPrefixFilter rule1Filter = new ColumnPrefixFilter(Bytes.toBytes("rule1"));
    SingleColumnValueFilter skipRule2Value = new      SingleColumnValueFilter(Bytes.toBytes("rules"),Bytes.toBytes("rule2"),
    CompareOp.EQUAL,Bytes.toBytes("0"));
    SkipFilter skipRule2 = new SkipFilter(skipRule2Value);
    getRules.setFilter(rule1Filter);
    getRules.setFilter(skipRule2);
    ResultScanner scanner = htable.getScanner(getRules); 
```

虽然这行得通，但我对解决方案不是很满意。hbase 需要时间来弄清楚。我原以为应该有一种更简单直接的方法，不必检查值。Arnon，您的方法不起作用，因为 SkipFilter 将跳过那些不满足条件的方法。因此，从 ColumnPrefixFilter 构造它无法满足要求。

# mysql - 对多行求和

> ID：12858996
> 
> 赞同：6
> 
> 时间：2012-10-12T12:23:18.097
> 
> 标签：mysql, sql

所以我有一张这样的桌子：

```
id    mod    n1    n2    n3
1     1      1     1
1     2            2
1     3                  3
2     1      1
2     2            2
3     1      1 
```

我想将特定 id 的所有行的每个值总结为列调用总数，但我不想将 id 组合在一起，因为它们具有不同的 mod 编号。我想要这样的结果：

```
id    mod   total
1     1     7
1     2     7
1     3     7
2     1     3
2     2     3
3     1     1 
```

我不能使用 group by，因为它会给我每个单独行的总数。如何达到我想要的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:26:55.787

你可以这样做：

```
SELECT `table`.`id`, `mod`, mySum
FROM `table` 
JOIN (SELECT `id`, SUM(n1) + SUM(n2) + SUM(n3) AS mySum
        FROM `table` GROUP BY `id`) as grpTable
ON `table`.`id` = `grpTable`.`id` 
```

虽然不确定这个的性能......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:27:53.913

尝试：

```
select t.id, t1.mod, t.total
from tab t1
join (select id, sum( IFNULL(n1,0)+ IFNULL(n2,0)+ IFNULL(n3,0)) as total
      from tab 
      group by id) t on t.id=t1.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:55:32.797

第二个答案是正确的，只需要正确调用`ifnull`

```
select t.id, t1.mod, t.total
from test.source t1
join (select id, sum( IFNULL(n1,0)+ IFNULL(n2,0)+ IFNULL(n3,0)) as total
      from test.source 
      group by id) t on t.id=t1.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T12:32:25.480

```
SELECT `id`, `mod`, (SUM(n1) + SUM(n2) + SUM(n3)) AS total
FROM `table` 
 GROUP BY `id`,`mod` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:48:38.437

这应该适合你。在甲骨文工作。检查mysql中是否需要更改关键字。

```
SELECT x.id, x.mod, y.sum
  FROM table x,
       (SELECT id, sum(nvl(n1, 0) + nvl(n2, 0) + nvl(n3, 0)) sum
          FROM table
         GROUP BY id) y
 WHERE x.id = y.id; 
```