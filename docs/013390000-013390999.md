# StackOverflow 问答 13390000-13390999

# file-upload - Joomla：允许用户上传图片

> ID：13390005
> 
> 赞同：2
> 
> 时间：2012-11-15T00:55:31.020
> 
> 标签：file-upload, joomla2.5

好的，所以我了解到要在页面上有一个上传按钮，你所做的基本上就是调用一个 php 文件（调用是 upload.php），它将一个文件上传到服务器。我不知道应该将 php 文件放在服务器中的哪个位置，以便调用它。

我觉得很愚蠢，因为我在网上找不到任何答案。我变得非常沮丧和困惑，因为我被告知我需要创建一个数据库，但我不知道如何在 Joomla 中编辑一个数据库。我参加了 SQL 课程，所以我不必学习。我只是不知道它在哪里。我还被告知我需要制作一个组件。但这很令人困惑，因为我想做的只是有一个上传按钮，可以将图像上传到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:56:51.443

我理解你的沮丧。我对你正在尝试做的事情有了基本的了解。这里有几个选项：

1.  您可能想看看[Joomla！扩展目录™</a>。您可能会发现已经为您执行此操作的组件或模块。](http://extensions.joomla.org/)

[](http://extensions.joomla.org/)
3.  [如果您想自己做，则需要在 Joomla 中创建一个小模块或组件！请参考](http://extensions.joomla.org/)[Joomla! 有关此主题的文档](http://docs.joomla.org)或教程。请注意，您不会立即使用它，因为您首先需要了解 Joomla！作品。所以你的upload.php 文件将进入你的模块/组件文件。我认为您不需要执行任何 SQL。

4.  现在“允许用户”的部分有点令人困惑......您想“允许”任何用户将内容上传到您的服务器，或者只是说注册用户？一般来说，从安全的角度来看，上传脚本需要非常强大。如果是这种情况，您需要搜索[Joomla！访问控制列表](http://magazine.joomla.org/issues/issue-feb-2012/item/639-Joomla-ACL-Access-Levels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:23:08.597

您可以简单地创建一个表单并添加“媒体”字段类型。

[http://docs.joomla.org/Standard_form_field_types](http://docs.joomla.org/Standard_form_field_types)

您还可以选择“文件”字段类型以允许不同类型的字段。

这两个字段都可以使用 Joomla 组件创建器添加：[http ://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

您可能还想看看[K2](http://getk2.org/)，它具有出色的图像上传功能，可以将图像缩放为三种不同的尺寸。

# java - 排除字符串部分时的正则表达式反向引用

> ID：13390006
> 
> 赞同：2
> 
> 时间：2012-11-15T00:56:00.263
> 
> 标签：java, regex

我有一个正则表达式，我试图用它来重写传入的 REST url，当 URL 的一部分被排除时，我陷入了一个用例。

这是我目前正在使用的正则表达式：

```
^(/[^/]+/(?:books))/([^/]+?)(?:/(?:(?!page).+?))?(?:/page/(\\d+))?$ 
```

例如，我使用**“$1 - $2 - $3”**作为编写新 URL 的部分。

以下是正常工作的示例...

```
"/mySite/books/topic1/page/2" results in "/mySite/books - topic1 - 2"
"/mySite/books/topic1/subtopic1/page/2" results in "/mySite/books - topic1 - 2" 
```

以上所有工作都按预期进行。问题是当 URL 排除 URL 的“topic1”部分时，结果不是我需要的。例子：

```
"/mySite/books/page/2" results in "/mySite/books - page - " 
```

我需要的是 $2 为空白，因为没有主题，并且页码仍然为 $3。我**需要**什么作为输出...

```
"/mySite/books/page/2" results in "/mySite/books -  - 2" 
```

我可以在我的正则表达式中进行哪些更改以满足该场景，而不会破坏现有的正常工作？这是在 Java 中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:50:23.677

您可以尝试使用正则表达式模式

```
^(/[^/]+/books)/(?:(?!page/)([^/]+)/)?page/(\\d+)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:59:02.953

让你的第二组不贪婪就足够了。然后引擎将首先尝试在不使用它的情况下找到匹配项（仅尝试`/page/\\d+`）。如果失败，它会尝试包含第二组：

```
^(/[^/]+/(?:books))/([^/]+?)(?:/(?:(?!page).+?))??(?:/page/(\\d+))?$ 
```

前置任何类型的量词（, 和`+`with `*`）使其变得不贪婪。`?``{..}``?`

# c++ - 面试测试中使用的 LinkedList

> ID：13390007
> 
> 赞同：6
> 
> 时间：2012-11-15T00:56:16.327
> 
> 标签：c++, linked-list

[**编辑**]修复了我的代码。是 while(temp != NULL)，而不是 while(temp->next != NULL)。抱歉插入错误的代码。

今天我参加了一个在线编程测试。面试官使用 Codility 来评估我的代码和其他受访者。在某个时刻，有人提出了有关链接列表的问题。它即将计算一个链表有多少项。我做了唯一可能的方法来做到这一点，AFAIK：

```
//This is struct declaration
struct SomeStruct
{
    int value;
    SomeStruct* next;
}

int elementCount(SomeStruct* list)
{
    int count = 0;
    if(list != NULL)
    {
        SomeStruct* temp = list;
        while(temp != NULL)
        {
            count++;
            temp = temp->next;
        }
    }
    return count;
} 
```

我记得当我发送这个代码作为这个问题的答案时，Codility 指出这个解决方案是错误的，因为它消耗了太多时间来执行任务。在我的脑海中，在[这个关于 SO 的线程](https://stackoverflow.com/questions/6368813/how-to-count-the-number-of-nodes-in-a-linked-list-without-traversing-it)中，没有其他方法可以在不遍历链表的情况下获取链表的大小，而不是以简单的方式。

当 Codility 说此解决方案错误时，是否存在问题？还是有其他方法？

PS：允许使用STL的测试

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T01:04:52.997

您的解决方案不正确，因为它返回的值比实际计数少 1。只需尝试将其应用于具有 1 个元素的列表即可。

你为什么想出这种奇怪的两层结构，其中一个`if`和一个循环检查`temp->next`？为什么不只是

```
unsigned elementCount(const SomeStruct *list)
{
  unsigned count = 0;
  for (const SomeStruct *temp = list; temp != NULL; temp = temp->next)
    ++count;
  return count;
} 
```

我怀疑您决定将 指向的元素`list`视为未使用和保留的“标题”元素。事实上，有时以这种方式实现列表可能是有意义的。但我在你的帖子中没有看到任何类似的内容。他们有没有告诉你专门这样对待它？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T01:01:13.910

好吧，您不必为每次迭代评估间接`temp->next` *两次*。

你可以简单地做

```
int count( SomeStruct const* pNode )
{
    int result = 0;
    while( pNode != 0 )
    {
        ++result;
        pNode = pNode->next;
    }
    return result;
} 
```

此外，正如[WhozCraig 所指出](https://stackoverflow.com/questions/13390007/linkedlist-used-in-an-interviews-test/13390046#comment18289242_13390007)的，您的代码在逻辑上是错误的（产生一个结果），而不仅仅是潜在的低效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T01:02:17.533

Codility 可能正在使用循环链表进行检查，在这种情况下，您的代码将永远不会结束。

不过，使用 STL 可以解决这个问题，因为它有一个带有 size 方法的 List<>。

# python - 在字符串格式化后应用格式化

> ID：13390009
> 
> 赞同：1
> 
> 时间：2012-11-15T00:56:38.983
> 
> 标签：python

我不知道普通字符串格式或高级字符串格式是否可能，所以想问...

我有这个简化的片段：

```
>>> s = 'some string'
>>> y = 10
>>> '<td>%s</td><td>%4d</td>' % (s, y)
'<td>some string</td><td>  10</td>' 
```

我想填充数字单元格，`&nbsp;`因为我的 html 后端不接受文本对齐。有没有简单的方法来格式化数值`&nbsp;`而不是空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:58:20.043

你可以使用类似的东西：

```
"%s%d" % ("&nbsp;" * (4 - len(str(y))), y) 
```

# node.js - 生成进程，关闭父进程并打开进程

> ID：13390011
> 
> 赞同：0
> 
> 时间：2012-11-15T00:56:57.420
> 
> 标签：node.js, vlc

如何在 node.js 中生成一个进程并使其无法关闭，尽管父进程已关闭。

```
var spawn = require("child_process").spawn;

var ex = spawn("vlc", ["/var/www/fr.mkv"]); 
```

当我完成打开 VLC 的 node.js 进程时，VLC 关闭并且我不希望它关闭。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:26:07.667

将`detached`选项设置为`true`。查看[文档](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

```
spawn("vlc", ["/var/www/fr.mkv"], { detached: true }) 
```

# castle-windsor - WcfFacility 和 Sequence 不包含任何元素错误？

> ID：13390021
> 
> 赞同：0
> 
> 时间：2012-11-15T00:58:02.020
> 
> 标签：castle-windsor, castle, wcffacility

我有带有服务合同和实现的 wcf 库。

```
 [ServiceContract]
    public interface IServiceProtoType 
    {
        [OperationContract]
        Response GetMessage(Request request);

        [OperationContract]
        String SayHello();

    }
    [DataContract]
    public class Request
    {
        private string name;

        [DataMember]
        public string Name
        {
            get { return name; }
            set { name = value; }
        }

    }
    [DataContract]
    public class Response
    {
        private string message;

        [DataMember]
        public string Message
        {
            get { return message; }
            set { message = value; }
        }

    }
 public class MyDemoService : IServiceProtoType
    {
        public Response GetMessage(Request request)
        {
            var response = new Response();
            if (null == request)
            {
                response.Message = "Error!";
            }
            else
            {
                response.Message = "Hello, " + request.Name;
            }
            return response;
        }
        public string SayHello()
        {
            return "Hello, World!";
        }
    } 
```

我有一个引用这个库的 Windows 服务项目，其中 MyService 只是一个继承 ServiceBase 的空壳。该服务在本地系统下安装并运行。

```
static void Main()
        {
          ServiceBase.Run(CreateContainer().Resolve());
        }

        private static IWindsorContainer CreateContainer()
        {
            IWindsorContainer container = new WindsorContainer();
            container.Install(FromAssembly.This());
            return container;
        }

 public class  ServiceInstaller : IWindsorInstaller
    {

        #region IWindsorInstaller Members

        public void Install(IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
        {

            string myDir;

            if (string.IsNullOrEmpty(AppDomain.CurrentDomain.RelativeSearchPath))
            {
                myDir = AppDomain.CurrentDomain.BaseDirectory;
            }
            else
            {
                myDir = AppDomain.CurrentDomain.RelativeSearchPath;
            }

            var wcfLibPath  = Path.Combine(myDir , "WcfDemo.dll");
            string baseUrl = "http://localhost:8731/DemoService/{0}";
            AssemblyName myAssembly = AssemblyName.GetAssemblyName(wcfLibPath);

            container
                .Register(
                    AllTypes
                        .FromAssemblyNamed(myAssembly.Name)
                        .InSameNamespaceAs<WcfDemo.MyDemoService>()
                        .WithServiceDefaultInterfaces()
                        .Configure(c =>
                                   c.Named(c.Implementation.Name)
                                       .AsWcfService(
                                           new DefaultServiceModel()
                                               .AddEndpoints(WcfEndpoint
                                                                 .BoundTo(new WSHttpBinding())
                                                                 .At(string.Format(baseUrl,
                                                                     c.Implementation.Name)
                                                                 )))), Component.For<ServiceBase>().ImplementedBy<MyService>());
        }

        #endregion
    } 
```

在客户端控制台应用程序中，我有以下代码，并且收到以下错误：{“序列不包含元素”}

```
 static void Main(string[] args)
        {
            IWindsorContainer container = new WindsorContainer();
            string baseUrl = "http://localhost:8731/DemoService/{0}";
            container.AddFacility<WcfFacility>(f => f.CloseTimeout = TimeSpan.Zero);

            container
                .Register(
                    Types
                        .FromAssemblyContaining<IServiceProtoType>()
                        .InSameNamespaceAs<IServiceProtoType>()
                        .Configure(
                            c => c.Named(c.Implementation.Name)
                                     .AsWcfClient(new DefaultClientModel
                                     {
                                         Endpoint = WcfEndpoint
                                             .BoundTo(new WSHttpBinding())
                                             .At(string.Format(baseUrl,
                                                 c.Name.Substring(1)))
                                     })));

            var service1 = container.Resolve<IServiceProtoType>();

            Console.WriteLine(service1.SayHello());

            Console.ReadLine();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:46:45.230

我知道这可能是什么，但如果以下问题的答案是否定的，您现在可以停止阅读（我为提前浪费您的时间而道歉）：

**一个（或多个）`Request`、`Response`或是否与 ?`MyDemoService`在同一命名空间中`IServiceProtoType`？**

我怀疑温莎对这些感到困惑，因为你正在做......

```
Types
    .FromAssemblyContaining<IServiceProtoType>()
    .InSameNamespaceAs<IServiceProtoType>() 
```

...然后配置作为 WCF 客户端代理返回的所有内容。这意味着它将尝试为不应该的事物创建代理，因此是一个`Sequence Contains no Elements`例外（恕我直言，这不是最有用的消息，但很受追捧）。

简单的解决方法就是将您`IServiceProtoType`放入自己的命名空间（我经常有一个命名空间，就像`XXXX.Services`我的服务合同一样）。

如果这对您来说是不可接受的，那么您需要找出另一种方法来识别服务合同 -`If`例如看一下该方法，或者只是一个好的 ol' `Component.For`。

# knockout.js - 淘汰赛 js 模板未绑定到 ko.computed

> ID：13390022
> 
> 赞同：0
> 
> 时间：2012-11-15T00:58:15.103
> 
> 标签：knockout.js

为了让附加的代码正常工作，我几乎整天都在沮丧地玩耍。代码或多或少取自[http://jsfiddle.net/rniemeyer/5Xr2X/](http://jsfiddle.net/rniemeyer/5Xr2X/)。我的版本显示第一页，IE，前 10 行。单击下一步会触发 pagedRows 函数，但不会在我的一生中显示下一页数据。嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻

附上代码

```
<table>
   <tr>
       <th>Id</th>
       <th>Type</th>
       <th>Name</th>
    </tr>
  <tbody data-bind='template: { name: "fieldTemplate", foreach: pagedRows }'></tbody>
</table>

<a href="#" data-bind="click: previous, visible: pageIndex() > 0">Previous</a>
<a href="#" data-bind="click: next, visible: pageIndex() < maxPageIndex()">Next</a>

<script type="text/html" id="fieldTemplate">
    <tr>
         <td><span data-bind="text:FieldId" /></td>
         <td><span data-bind="text:Type" /></td>
         <td><span data-bind="text:Description" /></td>
    </tr>
</script>

<script>
    function ViewModel(jsondata) {
        var self = this;
        self.fields = ko.observableArray(jsondata);
        self.pageIndex = ko.observable(0);
        self.pageSize = ko.observable(10);

        self.pagedRows = ko.computed(function () {
            var size = self.pageSize();
            var start = self.pageIndex() * size;
            return self.fields.slice(start, start + size);
        });

        self.maxPageIndex = ko.computed(function () {
            return Math.ceil(self.fields().length / self.pageSize()) - 1;
        });

        self.next = function () {
            self.pageIndex(self.pageIndex + 1);
        }
        self.previous = function () {
            self.pageIndex(self.pageIndex - 1);
        }
    }

    $(function () {
        var data = [];
        for (var i = 0; i < 100; i++) {
            data.push({
                FieldId: i,
                Type: "Type" + i,
                Name: "Name" + i,
                Description: "Description" + i
            })
        }

        ko.applyBindings(new ViewModel(data));

    });
</script> 
```

看起来非常直截了当，但我就是不明白。任何帮助将不胜感激。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:07:07.950

当您执行下一个/上一个操作时，您需要通过将其作为函数调用来检索 observable 的值并从中加减 1。所以，你会想做：

```
self.next = function() {
    self.pageIndex(self.pageIndex() + 1);
}
self.previous = function() {
    self.pageIndex(self.pageIndex() - 1);
} 
```

# android - Android Socket 连接失败

> ID：13390026
> 
> 赞同：0
> 
> 时间：2012-11-15T00:58:54.430
> 
> 标签：android, sockets, client

我正在尝试在 Android 客户端和 C# 服务器之间建立连接。我的服务器工作正常，除了 android 客户端即使在添加互联网连接权限后也无法工作

这是代码：

```
 private void connectSocket(String a){ 

    try { 
        InetAddress serverAddr = InetAddress.getByName("192.168.0.2"); 
        Log.d("TCP", "C: Connecting....");

        Socket socket = new Socket(serverAddr,4444); 
        Log.d("TCP", "C: I dunno ...");
        //String message = "1";

        PrintWriter out = null;
        BufferedReader in = null;

        try { 
          //  Log.d("TCP", "C: Sending: '" + message + "'"); 
            out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));                

            //out.println(message);
            while ((in.readLine()) != null) {
            txt.append(in.readLine());
            }

            Log.d("TCP", "C: Sent."); 
            Log.d("TCP", "C: Done.");               

        } catch(Exception e) { 
            Log.e("TCP", "S: Error", e); 
        } finally { 
            socket.close(); 
        } 

    } catch (UnknownHostException e) { 
        // TODO Auto-generated catch block 
        Log.e("TCP", "C: UnknownHostException", e); 
        e.printStackTrace(); 
    } catch (IOException e) { 
        // TODO Auto-generated catch block 
        Log.e("TCP", "C: IOException", e); 
        e.printStackTrace(); 
    }       
} 
```

这是调试日志：

```
11-15 02:41:58.040: W/dalvikvm(26839): threadid=1: thread exiting with uncaught exception (group=0x41c352a0)
11-15 02:41:58.075: E/AndroidRuntime(26839): FATAL EXCEPTION: main
11-15 02:41:58.075: E/AndroidRuntime(26839): android.os.NetworkOnMainThreadException
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at libcore.io.IoBridge.connect(IoBridge.java:112)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.net.Socket.startupSocket(Socket.java:566)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.net.Socket.<init>(Socket.java:225)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at com.example.socketclient.SocketCode.connectSocket(SocketCode.java:50)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at com.example.socketclient.SocketCode.access$0(SocketCode.java:44)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at com.example.socketclient.SocketCode$1.onClick(SocketCode.java:35)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.view.View.performClick(View.java:4211)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.view.View$PerformClick.run(View.java:17267)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.os.Handler.handleCallback(Handler.java:615)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.os.Looper.loop(Looper.java:137)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at java.lang.reflect.Method.invoke(Method.java:511)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-15 02:41:58.075: E/AndroidRuntime(26839):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T01:05:42.153

从外观上看，您正试图在主线程上执行网络操作。看一下 log trace 特别行`android.os.NetworkOnMainThreadException`。

[Android 开发人员：主线程异常上的网络](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

始终在主线程以外的单独线程上进行网络连接。也有不同的方法可以实现这一点，例如，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或自行启动线程。

对于这个和 Android 开发者网站，有几篇关于 SO 的帖子。这里有一些链接可以帮助您：

[Android 开发者：连接网络](http://developer.android.com/training/basics/network-ops/connecting.html)

[Android 开发者博客：多线程提高性能](http://android-developers.blogspot.ca/2010/07/multithreading-for-performance.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:02:15.233

[在这里](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)查看这个链接，因为从最新版本的API开始，禁止执行主线程调用的网络操作，所以您需要创建另一个（后台）线程来执行它。

# javascript - 在javascript中交换数组元素的问题

> ID：13390028
> 
> 赞同：0
> 
> 时间：2012-11-15T00:58:59.257
> 
> 标签：javascript, arrays, undefined

我是一名助教，一名学生问为什么以下代码没有交换数组中的前 2 个元素，而是导致未定义。这是学生给我看的代码：

```
var swapFirstTwoElementsOf = function (a) {
    a = [a[1],a[0]].concat(a.slice(2, a.length));
} 
```

为什么返回未定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:01:32.177

您需要返回变量。本地引用被重新分配，但原始变量 a 没有。你需要做类似的事情

```
var swapFirstTwoElementsOf = function (a) {
    return [a[1],a[0]].concat(a.slice(2, a.length));
}

var myArray = [0, 1, 2, 3];
myArray = swapFirstTwoELementsOf(myArray); 
```

以前，该函数评估为未定义，因为它没有返回任何内容。

# tsql - 在 TSQL 中，SUM(A + B) 与 SUM(A) + SUM(B) 之间是否存在性能差异？

> ID：13390030
> 
> 赞同：2
> 
> 时间：2012-11-15T00:59:08.883
> 
> 标签：tsql, sql-server-2008-r2

我必须对 2 个字段求和，然后再求和。从性能的角度来看，先添加字段还是在对列求和后添加字段有什么区别？方法 1 = SELECT SUM(columnA + columnB) 方法 2 = SELECT SUM(columnA) + SUM(columnB)（环境 = SQL Server 2008 R2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:14:05.757

我已经检查过了，我看到的`sum(x) + sum(y)`是更快。为什么？当您使用 sum 函数时，您正在使用聚合函数。聚合时，将跳过空值。当您在聚合函数中组合两个字段时，处理器必须检查其中一个字段是否为 NULL，因为集合可以同时包含值和 NULL。将 NULL（或 UNKNOWN 或 NOTHING，如果您愿意）添加到某些东西，仍然什么都不是，所以 NULL。因此，对于每条记录，都必须进行检查。

当您查看您的执行计划并检查计算机标量运算符时，您会确切地看到这种行为。对于该`sum(x) + sum(y)`方法，您会看到估计的 cpu 成本为 0,0000001，而另一种方法最多占用 0,0000041。那是更多的东西！此外，当您仔细观察时，您会发现`sum(x + y)`将制作类似 `[Expr1004] = Scalar Operator(CASE WHEN [Expr1006]=(0) THEN NULL ELSE [Expr1007] END)`

所以，最终，`sum(x) + sum(y)`可以考虑更快。

# c# - C#/.net 可以从字符串中解析指数十六进制编码的浮点数吗？

> ID：13390034
> 
> 赞同：8
> 
> 时间：2012-11-15T00:59:35.710
> 
> 标签：c#, .net, parsing, floating-point

C++、Java 都在语言的语法中包含 [-]0xh.hhhhp+/-d 格式，其他语言如 python 和 C99 具有解析这些字符串的库支持（float.fromhex、scanf）。

我还没有找到用 C# 或使用 .NET 库来解析这种精确的十六进制编码指数格式的方法。

有没有一种很好的方法来处理这个问题，或者一个不错的替代编码？（十进制编码不准确）。

示例字符串：0x1p-8 -0xfe8p-12

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:38:48.140

不幸的是，我不知道 .NET 内置的任何方法可以与 Python 的[float.fromhex()](http://docs.python.org/3.1/library/stdtypes.html#float.fromhex)相比。所以我想你唯一能做的就是在 C# 中滚动你自己的 .fromhex() 。此任务的难度范围从“有些简单”到“非常困难”，具体取决于您希望解决方案的完成程度和优化程度。

正式地，[IEEE 754](http://ieeexplore.ieee.org/xpl/mostRecentIssue.jsp?punumber=4610933)规范允许在十六进制系数内使用小数（即 0xf.e8p-12），这为我们增加了一层复杂性，因为（令我沮丧的是）.NET 也不支持十六进制的 Double.Parse()字符串。

如果您可以将问题限制在您提供的示例中，其中您只有整数作为系数，您可以使用以下使用字符串操作的解决方案：

```
public static double Parsed(string hexVal)
{
    int index = 0;
    int sign = 1;
    double exponent = 0d;

    //Check sign
    if (hexVal[index] == '-')
    {
        sign = -1;
        index++;
    }
    else if (hexVal[index] == '+')
        index++;
    //consume 0x
    if (hexVal[index] == '0')
    {
        if (hexVal[index+1] == 'x' || hexVal[index+1] == 'X')
            index += 2;
    }

    int coeff_start = index;
    int coeff_end = hexVal.Length - coeff_start;

    //Check for exponent
    int p_index = hexVal.IndexOfAny(new char[] { 'p', 'P' });
    if (p_index == 0)
        throw new FormatException("No Coefficient");
    else if (p_index > -1)
    {
        coeff_end = p_index - index;
        int exp_start = p_index + 1;
        int exp_end = hexVal.Length;
        exponent = Convert.ToDouble(hexVal.Substring(exp_start, exp_end - (exp_start)));
    }

    var coeff = (double)(Int32.Parse(hexVal.Substring(coeff_start, coeff_end), NumberStyles.AllowHexSpecifier));
    var result = sign * (coeff * Math.Pow(2, exponent));
    return result;
} 
```

如果您正在寻找与 Python 的 fromhex() 相同的函数，您可以尝试将[CPython 实现](http://svn.python.org/view/python/trunk/Objects/floatobject.c?revision=82447&view=markup)转换为 C#。我试过了，但由于我对标准不是很熟悉，并且在遵循他们正在寻找的所有溢出检查时遇到了麻烦，所以我陷入了困境。它们还允许其他内容，例如无限的前导和尾随空格，这是我的解决方案所不允许的。

我的解决方案是“有点简单”的解决方案。我猜如果你真的知道你的东西，你可以在位级别构建符号、指数和尾数，而不是把所有东西都相乘。您当然也可以一次性完成，而不是使用 .Substring() 方法作弊。

希望这至少能让你走上正轨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:43:16.067

我编写了 C# 代码，用于格式化和解析 IEEE 754r 中描述的十六进制浮点格式的数字，并受 C99、C++11 和 Java 的支持。该代码是 F# 的 BSD 许可[FParsec](http://www.quanttec.com/fparsec/)库的一部分，包含在单个文件中： [https ://bitbucket.org/fparsec/main/src/tip/FParsecCS/HexFloat.cs](https://bitbucket.org/fparsec/main/src/tip/FParsecCS/HexFloat.cs)

[支持的格式在http://www.quanttec.com/fparsec/reference/charparsers.html#members.floatToHexString](http://www.quanttec.com/fparsec/reference/charparsers.html#members.floatToHexString)有所描述

测试代码（用 F# 编写）可以在[https://bitbucket.org/fparsec/main/src/tip/Test/HexFloatTests.fs找到](https://bitbucket.org/fparsec/main/src/tip/Test/HexFloatTests.fs)

# mysql - 删除今天创建的表

> ID：13390035
> 
> 赞同：0
> 
> 时间：2012-11-15T00:59:41.637
> 
> 标签：mysql, information-schema

我需要删除今天创建的所有表。我不知道表是什么，因为该过程是由框架自动生成的。

这可以通过查询`information_schema`? 任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:02:42.683

您可以使用今天创建的所有表

```
SELECT TABLE_NAME, TABLE_SCHEMA AS db FROM information_schema.`TABLES` t 
WHERE DATE(t.CREATE_TIME) = CURDATE() 
AND t.TABLE_SCHEMA NOT IN("information_schema", "mysql", "performance_schema") 
```

`NOT IN("information_schema", "mysql", "performance_schema")`msql 自身创建的排除（临时）系统表。如果您不需要删除不同数据库之间的表，最好将 TABLE_SCHEMA 限制为您使用的任何数据库名称。

如何删除它们现在取决于您；）。

# javascript - SDK2：使用 updateSettings()

> ID：13390036
> 
> 赞同：1
> 
> 时间：2012-11-15T00:59:48.600
> 
> 标签：javascript, extjs4, rally

我正在尝试为我的应用保存设置。看起来应该很简单，但这似乎不起作用：

```
 Ext.define('MyApp', {
          extend: 'Rally.app.App',
          componentCls: 'app',

          ...

          launch: function() {
                var settings = this.settings;

                console.log('settings', settings);

                if (!settings.count) {
                    settings.count = 1;
                } else {
                    settings.count++;
                }

                this.updateSettingsValues(settings);

                    ... rest of App ...
            } 
```

始终将设置显示为“计数：1”，从不增加，即使我重新加载多次。我在拉力赛内外都尝试过。我正在使用 SDK 2.0p5。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:20:15.710

好的，我查看了源代码并弄清楚了...需要将带有“设置”的“选项”对象作为子对象传递。这在技术上在文档中，但因为没有解释，所以我只是做了看起来很明显的事情。我认为需要更新文档以使这一点更清楚，它也没有谈到您可以通过选项传递的完成功能......

```
 launch: function() {
            var settings = this.settings;
            var options = { settings: settings };

            console.log('settings', settings);

            if (!settings.count) {
                settings.count = 1;
            } else {
                settings.count++;
            }

            this.updateSettingsValues(options);

                ... rest of App ...
        } 
```

# c# - 正则表达式模型验证：0.25 的整数或小数倍数

> ID：13390037
> 
> 赞同：2
> 
> 时间：2012-11-15T00:59:57.693
> 
> 标签：c#, regex, entity-framework, attributes, data-annotations

我正在尝试编写一个正则表达式来匹配表示为`.25`（例如`1.25`，`14.75`）的十进制倍数的数值。

```
// Must Match
1.0
1.25
1.250000
1.5
1.500
1.75
1.7500

// Must Not Match
1.2
1.46
1.501
1.99 
```

到目前为止，我有以下表达式：`\d+(\.((0+)|(250*)|(50*)|(750*)))`. 当我使用像[gskinner.com/regexr](http://gskinner.com/regexr)这样的在线工具时，它可以工作。当我在验证属性中使用表达式来播种我的 EntityFramework 数据库时，它会产生验证错误：

```
[RegularExpression(@"^\d+(\.((0+)|(250*)|(50*)|(750*)))$", ErrorMessage = "Hours must be 15 minute increments expressed as decimals (ex. .0, .25, .5, .75)")]
public double Hours { get; set; } 
```

类似的问题（[我正在寻找一种将数字的小数部分向上或向下舍入到最接近的 .25、0.5、0.75 或整数](https://stackoverflow.com/questions/2900572/i-am-looking-for-a-way-to-round-the-decimal-portion-of-numbers-up-or-down-to-the)的方法）但我需要使用正则表达式来使用上述数据注释。

### 问题：

1.  有人看到我的表情有什么问题吗？

2.  如果您可以将其扩展为支持整数（例如`4`or`4.25`但不是`4.`or `4.62`） ，则可以加分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:06:54.357

要**匹配**这样的数字，请使用正则表达式模式

```
 (?!0\d)\d+(?:[.](?:25|5|75|0)0*)?(?!\d) 
```

要**验证**输入是这样的数字，请使用正则表达式模式

```
 ^(?!0\d)\d+(?:[.](?:25|5|75|0)0*)?$ 
```

* * *

在这两种情况下，第一部分`(?!0\d)`都是可选的，以禁止匹配/验证带有无效前导零的数字，例如`000003.250`，当 match 将修剪它们并只取`3.250`; 如果此可选部分存在于正则表达式中，则验证将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:16:57.283

这也匹配整数：

```
^\d+(\.(25|5|75|0)0*)?$ 
```

我用[RegexHero](http://regexhero.net/tester/)对其进行了测试。它在后台有一个 .NET Regex 引擎。如果您同时使用所有测试用例，请确保`Multiline`选中选项，以便`^`和`$`符号单独匹配每一行，而不是整个文本。

# ios - 添加故事板视图作为以编程方式创建的视图的子视图

> ID：13390038
> 
> 赞同：8
> 
> 时间：2012-11-15T01:00:24.823
> 
> 标签：ios, xcode, cocoa-touch, uiview, storyboard

我创建了一个特殊的 UIView 类，它具有某些属性，我以编程方式这样做是因为它通常是空白的，但有时会包含其他视图。我知道如果我以编程方式创建 UIView 我可以做类似的事情`[specialView addSubview: aView];`

我的问题是我在故事板中创建了一个 UIView，我需要将该 UIView 作为子视图添加到我的特殊视图中。我已将它连接为我的 ViewController 中的一个属性，但是当我执行与上面相同的代码时，什么也没有发生。想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T01:10:23.170

```
MyViewController *myViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"MyScene"]; 
[specialView addSubview:myViewController.theViewToAdd]; 
```

并且不要忘记在 Interface Builder 中为您的场景（视图控制器）提供这样的标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T08:02:40.600

另一种解决方案是您可以将视图控制器添加为子视图控制器。

```
 func displayContentController(content: UIViewController) {
    addChildViewController(content)
    self.view.addSubview(content.view)
    content.didMoveToParentViewController(self)
} 
```

去除 ：

```
func hideContentController(content: UIViewController) {
    content.willMoveToParentViewController(nil)
    content.view.removeFromSuperview()
    content.removeFromParentViewController()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:02:07.803

包含您想要的视图的 UIViewController 可能不会被实例化。因此，您需要实例化该控制器并从那里获取视图。

# objective-c - 在 iOS 中播放声音会暂停背景音乐

> ID：13390039
> 
> 赞同：2
> 
> 时间：2012-11-15T01:00:27.913
> 
> 标签：objective-c, ios, audio, avaudioplayer, avaudiosession

如何在不暂停背景音乐的情况下在 iOS 中播放声音？

我有这个：

```
NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"alert" ofType:@"wav"];
NSURL *url = [NSURL URLWithString:soundPath];

[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil];
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: url error:nil];
audioPlayer.numberOfLoops = 0;
[audioPlayer play]; 
```

然而，任何背景音乐都停止了。我错过了什么？

我也试过这个，无济于事：

```
- (void)alarm:(CDVInvokedUrlCommand *)command {
    [self setupAudioSession];
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"alert" ofType:@"wav"];
    NSURL *url = [NSURL URLWithString:soundPath];

    AVPlayer *audioPlayer = [[AVPlayer alloc] initWithURL: url];
    [audioPlayer play];
}

- (void)setupAudioSession {
    AudioSessionInitialize(NULL,NULL,NULL,NULL);

    OSStatus activationResult = 0;
    activationResult          = AudioSessionSetActive(true);

    UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;

    AudioSessionSetProperty
    (
     kAudioSessionProperty_AudioCategory,
     sizeof(sessionCategory),
     &sessionCategory
     );

    OSStatus propertySetError = 0;
    UInt32 allowMixing        = true;

    propertySetError = AudioSessionSetProperty
    (
     kAudioSessionProperty_OverrideCategoryMixWithOthers,
     sizeof(allowMixing),
     &allowMixing
     );
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:06:23.087

您需要设置适当的音频会话，如下所示：

```
AudioSessionInitialize(NULL,NULL,NULL,NULL);

OSStatus activationResult = 0;
activationResult          = AudioSessionSetActive(true);

UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;

AudioSessionSetProperty
(
    kAudioSessionProperty_AudioCategory,
    sizeof(sessionCategory),
    &sessionCategory
 );

OSStatus propertySetError = 0;
UInt32 allowMixing        = true;

propertySetError = AudioSessionSetProperty
(
    kAudioSessionProperty_OverrideCategoryMixWithOthers,
    sizeof(allowMixing),
    &allowMixing
); 
```

# sql-server - SQL Server：选择最晚时间

> ID：13390042
> 
> 赞同：1
> 
> 时间：2012-11-15T01:00:43.973
> 
> 标签：sql-server, distinct

我有一个运行良好的查询，但有一个问题，它显示了我不想要的其他数据。

数据是每个用户名的最新数据。

这是查询：

```
SELECT
    l.USER_KEY AS id,
    l.USER_ID AS username, 
    gl1.CHAR_KEY AS char_id,
    gl1.NAME AS charname,
    gl1.GATENUM AS server,
    CONVERT(VARCHAR(20), l.LOGINTIME, 100) AS user_time,
    CONVERT(VARCHAR(20), gl1.OCCUR_TIME, 100) AS char_time
FROM LOG_CONNECT201211 AS gl1
    JOIN game.dbo.CHAR_INFOR AS g --character data
        ON gl1.CHAR_KEY = g.CHAR0_KEY OR gl1.CHAR_KEY = g.CHAR1_KEY OR gl1.CHAR_KEY = g.CHAR2_KEY
    JOIN login.dbo.USER_CHECK_LOGIN AS l --login data
        ON g.USER_KEY = l.USER_KEY
    JOIN (SELECT    char_key, max(OCCUR_TIME) as mostrecent  --game logs
            FROM    LOG_CONNECT201211 
            WHERE   KIND=20 OR KIND=21
            GROUP BY char_key) AS gl2
        ON gl2.char_key = gl1.char_key and gl2.mostrecent = gl1.OCCUR_TIME
WHERE l.CHECKLOGIN = 1
ORDER BY username DESC 
```

返回：

```
id      username    char_id name        map user_time           char_time   
------------------------------------------------------------------------------------
3667    zr5970      11002   warpath     4   Nov 15 2012  8:54AM Nov  7 2012  6:31AM
3667    zr5970      11004   bloodfines  4   Nov 15 2012  8:54AM Nov  7 2012  6:33AM
3667    zr5970      11003   hanzhou     1   Nov 15 2012  8:54AM Nov 15 2012  8:54AM
14999   yvacosta    52086   Creams      1   Nov 15 2012  8:17AM Nov 15 2012  8:17AM
23433   yurich      1911481 abal        5   Nov 15 2012  8:34AM Nov  9 2012  4:05PM
23433   yurich      1911482 yurich      5   Nov 15 2012  8:34AM Nov 15 2012  8:30AM
23433   yurich      1911483 sharmaine   5   Nov 15 2012  8:34AM Nov 15 2012  8:35AM
10967   yubiwamoi   33376   Dwina       1   Nov 15 2012  4:33AM Nov 15 2012  4:33AM 
```

所以数据是正确的，但我只想为每个用户名返回一行。

在此数据上，用户名返回 3，有 3 个名称，但我想要的唯一名称是具有最新 char_time 的名称。

正确数据示例：

```
id      username    char_id name        map user_time           char_time   
-----------------------------------------------------------------------------------
 3667   zr5970      11003   hanzhou     1   Nov 15 2012  8:54AM Nov 15 2012  8:54AM
14999   yvacosta    52086   Creams      1   Nov 15 2012  8:17AM Nov 15 2012  8:17AM
23433   yurich      1911483 sharmaine   5   Nov 15 2012  8:34AM Nov 15 2012  8:35AM
10967   yubiwamoi   33376   Dwina       1   Nov 15 2012  4:33AM Nov 15 2012  4:33AM 
```

请注意，我只显示了`zr5970`最新的数据`char_time`

请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:05:41.840

首先选择用户名和最长时间。这样，您将拥有正确的行数。当您拥有它时，您可以轻松地将其他列添加到您的查询中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:51:12.370

```
select a.USER_KEY AS id,
    l.USER_ID AS username, 
    gl1.CHAR_KEY AS char_id,
    gl1.NAME AS charname,
    gl1.GATENUM AS server,
    CONVERT(VARCHAR(20), l.LOGINTIME, 100) AS user_time,
   CONVERT(VARCHAR(20), gl1.OCCUR_TIME, 100) AS char_time
from 
(select user_key, max(occur_time) as mostrecent
from log_connect2011
WHERE   KIND=20 OR KIND=21
group by user_key) a
join LOG_CONNECT201211 AS gl1 on a.user_key = gl1.user_key and a.mostrecent =        gl1.occur_time 
JOIN game.dbo.CHAR_INFOR AS g --character data
  ON gl1.CHAR_KEY = g.CHAR0_KEY OR gl1.CHAR_KEY = g.CHAR1_KEY OR gl1.CHAR_KEY = g.CHAR2_KEY
JOIN login.dbo.USER_CHECK_LOGIN AS l --login data
  ON g.USER_KEY = l.USER_KEY
WHERE l.CHECKLOGIN = 1
ORDER BY username DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:20:34.487

使用 ROW_NUMBER()

```
SELECT *
FROM
(
SELECT
    l.USER_KEY AS id,
    l.USER_ID AS username, 
    gl1.CHAR_KEY AS char_id,
    gl1.NAME AS charname,
    gl1.GATENUM AS server,
    CONVERT(VARCHAR(20), l.LOGINTIME, 100) AS user_time,
    CONVERT(VARCHAR(20), gl1.OCCUR_TIME, 100) AS char_time,
    rn = row_number() over (partition by l.USER_KEY order by gl1.OCCUR_TIME DESC)
FROM LOG_CONNECT201211 AS gl1
    JOIN game.dbo.CHAR_INFOR AS g --character data
        ON gl1.CHAR_KEY = g.CHAR0_KEY OR gl1.CHAR_KEY = g.CHAR1_KEY OR gl1.CHAR_KEY = g.CHAR2_KEY
    JOIN login.dbo.USER_CHECK_LOGIN AS l --login data
        ON g.USER_KEY = l.USER_KEY
WHERE l.CHECKLOGIN = 1
) X
WHERE rn=1
ORDER BY username DESC 
```

# c - C语言中bool变量的用处是什么？

> ID：13390047
> 
> 赞同：1
> 
> 时间：2012-11-15T01:01:19.660
> 
> 标签：c, variables, boolean

在下面的代码中使用 bool 变量而不是 int 来设置值 1 或 0 有什么好处？它有什么区别？

```
#include<stdio.h>
int main(void)
{
    int p,d;
    _Bool isPrime;

    for ( p = 2; p <= 50; p++){
        isPrime = 1;

        for (d = 2; d < p; d++)
            if (p %d == 0)
                isPrime = 0;

        if (isPrime != 0)
            printf("%i ",p);
    }

    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:08:53.843

这对于明确您的意图很有用。当您将变量声明为`Bool_`时，很明显它不应该具有除`true`and以外的值`false`。

编写示例代码的更传统方法是：

＃包括

```
int main(void)
{
    for (int p = 2; p <= 50; p++) {
        bool isPrime = true;

        for (int d = 2; d < p; d++) {
            if (p % d == 0) isPrime = false;
        }

        if (!isPrime) printf("%i ", p);
    }

    printf("\n");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:06:33.060

我只是使用纯整数作为我的布尔类型，没有任何类型定义或特殊定义或真/假值的枚举。如果您按照我下面的建议从不与布尔常量进行比较，那么您只需要使用 0/1 来初始化标志。然而，在当今时代，这种做法可能被认为过于反动。在这种情况下，绝对应该使用它，因为它至少具有标准化的好处。

无论调用什么布尔常量，仅将它们用于初始化。永远不要写类似的东西

```
if (ready == TRUE) ...
while (empty == FALSE) ... 
```

这些总是可以用更清晰的来代替

if (ready) ... while (!empty) ... 请注意，这些实际上可以合理且可以理解地大声读出。

给你的布尔变量正名，即full而不是notfull。后者导致代码难以阅读。比较

```
if (full) ...
if (!full) ... 
```

和

```
if (!notfull) ...
if (notfull) ... 
```

前一对读起来很自然，而 !notfull 即使是这样读起来也很尴尬，并且在更复杂的布尔表达式中变得更糟。

通常应避免使用布尔参数。考虑这样定义的函数

```
void foo(bool option) { ... } 
```

在函数体内，参数的含义非常清楚，因为它有一个方便且有意义的名称。但是，呼叫站点看起来像

```
foo(TRUE);
foo(FALSE): 
```

在这里，如果不总是查看函数定义或声明，基本上不可能知道参数的含义，如果添加更多布尔参数，情况会变得更糟。我建议要么

```
typedef enum { OPT_ON, OPT_OFF } foo_option;
void foo(foo_option option); 
```

或者

```
#define OPT_ON true
#define OPT_OFF false
void foo(bool option) { ... } 
```

无论哪种情况，呼叫站点现在看起来像

```
foo(OPT_ON);
foo(OPT_OFF); 
```

读者至少有机会理解，而无需挖掘 foo 的定义。

# ruby - 数组或哈希的元素之一是否为 nil

> ID：13390050
> 
> 赞同：0
> 
> 时间：2012-11-15T01:01:36.487
> 
> 标签：ruby, arrays

是否有任何方法可以告诉数组或哈希的元素之一为零？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T01:04:14.590

对于一个数组

```
array = [1, 2, 'a']
array.any?(&:nil?)
#=> false 
```

对于哈希，我猜您正在谈论 nil 值。

```
hash = {:a => 1, :b => 2, :c => nil}
hash.value?(nil)
#=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:03:53.383

您可以使用该`any?`方法：[http ://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)

例如：`arr.any? { |x| x.nil? }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T03:18:20.950

正如 oldgod 和 strmstn 指出的那样，您应该使用 any，并且在块内的条件中，您可以验证元素是 a`nil`还是它的类是`Hash`

```
[1,2,nil].any? {|x| x.class == Hash or x.nil? } # => true

[1,2,{}].any?  {|x| x.class == Hash or x.nil? } # => true 
```

# php - 如何在 Magento 的 list.phtml 中访问自定义图像属性

> ID：13390051
> 
> 赞同：0
> 
> 时间：2012-11-15T01:01:46.217
> 
> 标签：php, magento

我正在用 magento 创建一个网站。

所以我为我的产品添加了一个新的媒体图像属性。我想为我的主页使用特定图像，但一些产品没有此图像。

所以我创建了一个名为 list-homepage.phtml 的新 list.phtml 文件。

所以我目前正在list.phtml中的产品集合中执行此操作。

```
$product=Mage::getModel('catalog/product')->load($_product->getId()); 
```

我再次从上方加载产品，并测试该产品是否具有新的图像属性

```
<?php if ($product->getMaleFemaleImage()){  ?>
      <img src="<?php echo $this->helper('catalog/image')->init($product, 'male_female_image')->setQuality(100)->resize($imgSize); ?>" width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($product, 'male_female_image'), null, true) ?> " />
<?php }else{ ?>
     <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->setQuality(100)->resize($imgSize); ?>" width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
<?php }?> 
```

这可行，但正如您从上面看到的，我必须再次加载产品，我不想这样做。有什么方法可以访问我创建的 male_female_image 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:48:02.223

看看[@Magento - 将媒体库属性添加到产品平面表](https://stackoverflow.com/questions/9974513/magento-add-media-gallery-attribute-to-product-flat-table)

打开 app/design/frontend/default/yourtheme/layout/catalog.xml

在`<catalog_category_layered translate="label">`并 `<catalog_category_default translate="label">`找到下面的行

```
 <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
 <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
 <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml"> 
```

和（添加`<action method="addAttribute">`....）

```
<block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
<block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
add -->   <action method="addAttribute"><name>MaleFemaleImage</name></action>
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml"> 
```

阅读更多 @

*   [如何在 Magento Commerce 的类别中向产品网格或列表视图添加属性](http://www.imagedia.com/2010/02/how-to-add-attributes-to-product-grid-or-list-view-in-category-in-magento-commerce/)

*   [如何将属性添加到类别中的产品网格](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/add-attributes-to-product-grid)

# xml - T-SQL 和 XML - 将父元素和多个子元素连接到结果集中

> ID：13390058
> 
> 赞同：5
> 
> 时间：2012-11-15T01:03:01.940
> 
> 标签：xml, sql-server-2008, tsql, xml-parsing

这是 XML：

```
<?xml version="1.0" encoding="UTF-16"?>
<Response>
  <Offers>
    <Car>
      <Group>ECMR</Group>
    </Car>
    <Insurances>
      <Optional>
        <Code>BE</Code>
      </Optional>
      <Optional>
        <Code>BF</Code>
      </Optional>
      <Optional>
        <Code>I</Code>
      </Optional>
      <Optional>
        <Code>LD</Code>
      </Optional>
    </Insurances>
  </Offers>
  <Offers>
    <Car>
      <Group>CDMR</Group>
    </Car>
    <Insurances>
      <Optional>
        <Code>BA</Code>
      </Optional>
      <Optional>
        <Code>BG</Code>
      </Optional>
      <Optional>
        <Code>IS</Code>
      </Optional>
      <Optional>
        <Code>LS</Code>
      </Optional>
    </Insurances>
  </Offers>
</Response> 
```

使用此 XML 并在 SQL Server 存储过程中的单个 SELECT 语句中，我想创建一个如下所示的结果集：

```
Group           Codes
--------------------------
ECMR            BE,BF,I,LD
CDMR            BG,BA,IS,LS 
```

结果集中的每条记录都包含一个用于`<Car><Group>group</Group></Car>`连接的列和用于连接每个 的列`<Insurances><Optional><Code>code</Code></Optional></Insurances>`。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:42:35.827

```
select T.N.value('(Car/Group/text())[1]', 'varchar(10)') as [Group],
       (
         select ','+T2.N.value('(./text())[1]', 'varchar(10)')
         from T.N.nodes('Insurances/Optional/Code') as T2(N)
         for xml path(''),  type
       ).value('substring(./text()[1], 2)', 'varchar(100)') as Codes
from @XML.nodes('/Response/Offers') as T(N) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:35:23.220

试试这个

```
DECLARE @x XML
SELECT @x = N'<?xml version="1.0" encoding="UTF-16"?>
<Response>
  <Offers>
    <Car>
      <Group>ECMR</Group>
    </Car>
    <Insurances>
      <Optional>
        <Code>BE</Code>
      </Optional>
      <Optional>
        <Code>BF</Code>
      </Optional>
      <Optional>
        <Code>I</Code>
      </Optional>
      <Optional>
        <Code>LD</Code>
      </Optional>
    </Insurances>
  </Offers>
  <Offers>
    <Car>
      <Group>CDMR</Group>
    </Car>
    <Insurances>
      <Optional>
        <Code>BA</Code>
      </Optional>
      <Optional>
        <Code>BG</Code>
      </Optional>
      <Optional>
        <Code>IS</Code>
      </Optional>
      <Optional>
        <Code>LS</Code>
      </Optional>
    </Insurances>
  </Offers>
</Response>'

;With CTE AS(
SELECT
    X.value('Group[1]' ,'varchar(15)') As [Group],    
    Y.value('Code[1]' ,'varchar(15)') AS [Codes]
FROM 
@x.nodes('//Response/Offers/Car') T(X)
CROSS APPLY X.nodes('../Insurances/Optional') U(Y))

Select 
    [Group]
    , [Codes] = Stuff((Select ',' + CAST([Codes] AS vARCHAR(MAX))
      FROM CTE c2
      WHERE c2.[Group] = c1.[Group]
      FOR XML PATH('')
      ),1,1,'')
From CTE c1
Group By c1.[Group] 
```

**结果**

```
Group   Codes
ECMR    BE,BF,I,LD
CDMR    BA,BG,IS,LS 
```

# c# - AsyncCallback 之后的异常

> ID：13390060
> 
> 赞同：0
> 
> 时间：2012-11-15T01:03:10.523
> 
> 标签：c#, .net, httpwebrequest, asynccallback

我的`AsyncCallback`功能有问题。我正在使用一个来下载数据，然后无论我做什么，它都会引发一个不同的异常。一些代码：

```
private void downloadBtn_Click(object sender, RoutedEventArgs e)
{
    string fileName = System.IO.Path.GetFileName(Globals.CURRENT_PODCAST.Title.Replace(" ", string.Empty));
    MessageBox.Show("Download is starting");
    file = IsolatedStorageFile.GetUserStoreForApplication();
    streamToWriteTo = new IsolatedStorageFileStream(fileName, FileMode.Create, file);
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(Globals.CURRENT_PODCAST.Uri));
    request.AllowReadStreamBuffering = false;
    request.BeginGetResponse(new AsyncCallback(GetData), request);
}

private void GetData(IAsyncResult result)
{
    HttpWebRequest request = (HttpWebRequest)result.AsyncState;
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
    Stream str = response.GetResponseStream();
    byte[] data = new byte[16* 1024];
    long totalValue = response.ContentLength;
    while (str.Read(data, 0, data.Length) > 0)
    {
        if (streamToWriteTo.CanWrite)
            streamToWriteTo.Write(data, 0, data.Length);
        else
            MessageBox.Show("Could not write to stream");
    }
    streamToWriteTo.Close();
    MessageBox.Show("Download Finished");
} 
```

有没有办法告诉异步回调何时完成，然后运行代码而不会崩溃，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:53:26.563

问题是您是`MessageBox.Show`从线程池线程调用的。您需要从 UI 线程调用它。为此，您需要与 UI 线程同步。例如：

```
this.Invoke((MethodInvoker) delegate
    { MessageBox.Show("success!"); }); 
```

调用`Invoke`将在 UI 线程上执行代码。有关详细信息，请参阅[Control.Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)的文档。

# jquery-ui - jquery返回到以前的状态

> ID：13390062
> 
> 赞同：1
> 
> 时间：2012-11-15T01:03:16.730
> 
> 标签：jquery-ui, jquery, jquery-plugins

当我单击添加图像按钮时，当我单击新图像时会出现一个新图像，我可以使用 jquery 将其恢复到以前的状态...显示上一个图像并在悬停时添加图像

[http://jsfiddle.net/6Mmme/37/](http://jsfiddle.net/6MmMe/37/)

在下面提供我的 js 代码

```
$("div").hover(
  function () {
    $("<div>add image</div>").click(function() {
        $(this).parent().unbind("hover").children("img").attr("src", "http://www.onlinegrocerystore.co.uk/images/goodfood.jpg");
        $(this).remove();
    }).appendTo(this);
  }, 
  function () {
    $(this).find("div:last").remove();
  }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:07:34.037

问题是您正在处理第一个 div，然后将其删除。有几种方法可以实现我认为你的目标。

我建议使用隐藏/显示来进行操作，以便于管理。

如果你想在 jQuery 中这样做，你可以这样做：

```
<!DOCTYPE html>
<html>
<head><script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<style type='text/css'>
div div { color:red; display:none}
</style>
<script>
$(function(){
$('body > div').hover(function(){
    // show "add image"
    $('div', this).show(); 
}, function(){
    // hide "add image" and reet image src. 
   $('div', this).hide();
   $('img', this).attr("src", "http://imgs.zinio.com/magimages/500299032/2012/416238969_170.jpg");
})
// top-level click handler
.click(function(){
        $('img', this).attr("src", "http://www.onlinegrocerystore.co.uk/images/goodfood.jpg");              
    });
}); 

</script>
</head>

<body>
  <div>
    <img src="http://imgs.zinio.com/magimages/500299032/2012/416238969_170.jpg" alt="Nov-12" title="Food Network Magazine" class="cover">
    <div href="#">add image</div>
</div>

</body>
</html> 
```

如果您想主要在 CSS 中执行此操作，只需使用 jQuery 切换一个类，您可以这样做：

```
<!DOCTYPE html>
<html>
<head><script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<style type='text/css'>
body > div {
background-image: url(http://imgs.zinio.com/magimages/500299032/2012/416238969_170.jpg);
    width: 170px;
    height:222px;
    position:relative;
}
body > div.newImage:hover {
    background-image: url(http://www.onlinegrocerystore.co.uk/images/goodfood.jpg);
    width: 249px;
    height:274px;
}
div div { 
    color:red;
    position:absolute;
    bottom:0;
    margin-bottom:-16px;
    display:none;
}
div:hover div {
    display:block;
}
</style>
<script>
$(function(){
    $('body > div').click(function(){
       $(this).addClass('newImage');
    }).hover(false, function(){
        $(this).removeClass('newImage');
    });​
}); 
</script>
</head>
<body>
    <div>
        <div>add image</div>
    </div>
</body>
</html> 
```

如果你真的喜欢添加/删除东西，你可以这样做：

```
<!DOCTYPE html>
<html>
<head><script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<style type='text/css'>
div div { color:red;}​
</style>
<script>
$(function(){
    $('body > div').hover(function(){
        // show "add image"
        $(this).append('<div>add image</div>');
    }, function(){
        // hide "add image" and reset image src. 
       $('div', this).remove();
       $('img', this).attr("src", "http://imgs.zinio.com/magimages/500299032/2012/416238969_170.jpg");
    })
    // top-level click handler
    .click(function(){
        $('img', this).attr("src", "http://www.onlinegrocerystore.co.uk/images/goodfood.jpg");              
    });
}); 
</script>
</head>
<body>
    <div>
        <img src="http://imgs.zinio.com/magimages/500299032/2012/416238969_170.jpg" alt="Nov-12" title="Food Network Magazine" class="cover">
    </div>
</body>
</html> 
```

# scheme - 在没有参数的情况下使用 lambda 在 Scheme 中继续

> ID：13390065
> 
> 赞同：1
> 
> 时间：2012-11-15T01:03:34.157
> 
> 标签：scheme, continuations

所以我正在处理延续并有这样的事情：

```
(or
    (call/cc (lambda (cont)
           ...
          (if ( ... )
              (cons randomList (lambda() (cont #f)))
              #f)})}
     ( do something else) 
```

我想知道 (lambda() (cont #f)) 和 (cont #f) 之间的区别是什么。我用 lambda 得到了我想要的答案，没有问题。有人可以解释其中的区别吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:54:06.857

以这种方式使用的 nullary（零参数）lambda 称为*thunk*。

在 Scheme 中使用 Thunk 来延迟某些代码的执行。例如，假设我们正在谈论`(display #f)`而不是`(cont #f)`. 如果您`(display #f)`直接编写，那么当代码执行到该点时，它会`#f`立即显示，而如果您将其包装在 thunk ( ) 中，则在调用 thunk 之前`(lambda () (display #f))`它不会显示。`#f`

回到您的代码，代码中的 a`(cont #f)`将导致在调用延续的点立即跳转。将其包装在 thunk 中会延迟调用延续，直到您调用 thunk。

# jquery - errorPlacement 参数破坏 jQuery 验证插件

> ID：13390067
> 
> 赞同：1
> 
> 时间：2012-11-15T01:03:54.183
> 
> 标签：jquery, jquery-validate, errorplacement

我有一个正在处理的表单，并且我的验证 JavaScript（jQuery 和 jQuery 验证插件）在一定程度上可以工作。我已经设置了一个 jsfiddle 以显示它的工作状态：http: [//jsfiddle.net/5Ukv2/](http://jsfiddle.net/5Ukv2/)

但是，当我使用 errorPlacement 函数/参数时，它会中断。错误出现在我指定的位置，但是每当我更新输入（即任何击键）时都会添加多个错误，并且当条目根据 JavaScript 有效时，错误不会从我的 HTML 中删除： [http：/ /jsfiddle.net/5Ukv2/1/](http://jsfiddle.net/5Ukv2/1/)

此外，一旦我输入输入字段，验证就会开始；与额外的和未删除的错误元素相比，这个问题是次要的。

我究竟做错了什么？

下面附上的代码供参考以及在 jsfiddles 中。我评论了几种方法，因为它们进行的 ajax 调用在这里不起作用，但验证的作用相同。

HTML：

```
<form action="email_submit.php" method="post" name="enterForm" id="enterForm">
    <label for="email">输入你的邮箱来玩：
    <input type="text" name="email" id="email" value="" />
    <input type="submit" value="Enter" name="submit" class="submit" />       
</form>

```

JavaScript：

```
// JavaScript Document

$(function(){

$("#enterForm").validate({
    rules: {
        email: {
            email: true,
            required: true,
            remote: {url:"email_valid.php", async:false}
        }
    },
    messages:{
            email:{
                email: "Please enter a valid email address",
                required: "Please enter an email address",
                remote: "That is not a valid domain"
                }
    },
    submitHandler: function(form) {

        var formData = $('form').serialize();
        $.ajax({
          type: 'POST',
          url: "email_submit.php",
          data: formData,
          success: function(data){
              if(data.subscriber && data.valid_email)
                window.location = "calendar.html";
              else if( !data.valid_email)
                alert("Please enter a valid email");
              else if( !data.subscriber)
                alert("Open sign up form");
          },
          error: function(data){
              alert("e:" + data);
              console.log(data);
          },
          dataType: "JSON"
        });

        return false;
    },
    errorPlacement: function (error, element){
        if(  element.attr("name") == "email" ){
            error.insertAfter("#enterForm");
        } 
        else
            error.insertAfter(element);
    }               

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:42:57.100

看起来验证器插件希望将错误放置在表单元素中的某个位置。当它在寻找要隐藏或显示的“错误”元素时，它必须将搜索限制在当前表单中。这允许您在页面上有多个表单，并且对一个表单的更改不会影响其他表单。

可以说，这可能是插件中的一个错误。这是对您的表单的修改（见[小提琴](http://jsfiddle.net/barmar/5Ukv2/2/)）

```
 <form action="email_submit.php" method="post" name="enterForm" id="enterForm">
            <label for="email">Enter your email to play:</label> 
            <input type="text" name="email" id="email" value=""  /> 
            <input type="submit" value="Enter" name="submit" class="submit" />             
        <div id="error_container"></div>
        </form> 
```

​</p>

```
$(function(){

    $("#enterForm").validate({
        rules: {
            email: {
                email: true,
                required: true/*,
                remote: {url:"email_valid.php", async:false}*/
            }
        },
        messages:{
                email:{
                    email: "Please enter a valid email address",
                    required: "Please enter an email address"/*,
                    remote: "That is not a valid domain"*/
                    }
        },
        submitHandler: function(form) {

            var formData = $('form').serialize();
            $.ajax({
              type: 'POST',
              url: "email_submit.php",
              data: formData,
              success: function(data){
                  if(data.subscriber && data.valid_email)
                      window.location = "calendar.html";
                  else if( !data.valid_email)
                      alert("Please enter a valid email");
                  else if( !data.subscriber)
                      alert("Open sign up form");
              },
              error: function(data){
                  alert("e:" + data);
                  console.log(data);
              },
              dataType: "JSON"
            });

            return false;
        }, //uncomment this errorPlacement method
        errorPlacement: function (error, element){
            if(  element.attr("name") == "email" ){
                error.insertAfter("#error_container");
            } 
            else
                error.insertAfter(element);
        }               

    });

});​ 
```

# ruby - 无法理解如何使用 ci_reporter gem

> ID：13390068
> 
> 赞同：0
> 
> 时间：2012-11-15T01:04:05.853
> 
> 标签：ruby, rake, testunit

我无法理解[ci_reporter](http://rubydoc.info/gems/ci_reporter/1.7.3/frames) gem 的使用方式。如何修改我的 rakefile “使 ci:setup:testunit 任务成为您的测试任务的依赖项” 我不明白如何去做这要求我做的事情。谁能解释一下？谢谢

```
#this isn't legal ruby! ARG!!!!! 
task :myNewTask => ci:setup:testunit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:13:20.097

您要做的是指定为字符串而不是符号。

```
 task :myNewTask => "ci:setup:testunit" 
```

# c# - 检查二维数组中的所有元素是否具有相同的值

> ID：13390069
> 
> 赞同：1
> 
> 时间：2012-11-15T01:04:11.490
> 
> 标签：c#, .net, c#-4.0

如果我们有一个一维数组，我们可以使用以下命令来查看是否所有元素都等于 3：

```
int[] t = Enumerable.Repeat(3, 10).ToArray();

if (t.All(item => item.Equals(3))) MessageBox.Show("all elements equals to 3"); 
```

但是如果我有一个二维数组，我如何检查所有元素是否等于 3（没有任何 for-Loops）：

```
 int[,] t2D= new int[,] { { 3, 3 }, { 3, 3 }, { 3, 3 }, { 3, 3 } };

    if( CHECK IF ALL ELEMENTS IN **t2D** are equal to 3) 

               {
                MessageBox.Show("all elements equals to 3");
               } 
```

我应该在 If 语句中输入什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:12:04.947

2D-array 是一种[可枚举类型](http://msdn.microsoft.com/en-us/library/2h3zzhdw.aspx)（但它实现了非泛型`IEnumerable`）。它的枚举器枚举了二维数组中的所有项目。因此，您只需要做一件事 - 将其项目转换为`int`（从而检索`IEnumerable<int>`）并应用`All`

```
t2D.Cast<int>().All(x => x == 3) 
```

# recursion - 任何使用循环的方法都可以递归编写吗？

> ID：13390070
> 
> 赞同：1
> 
> 时间：2012-11-15T01:04:12.710
> 
> 标签：recursion

我知道任何递归方法都可以用循环（而不是递归）的方式编写，但是任何给定的迭代方法都可以递归编写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:08:34.680

是的，它可以！这在逻辑上似乎有点循环，但有些语言是 100% 图灵完备的，只有迭代结构，而另一些语言只有递归结构。

因此，两者必须是等价的。

# php - php 将 ExpressionEngine 数据库查询导出到 .txt 文件

> ID：13390073
> 
> 赞同：1
> 
> 时间：2012-11-15T01:04:38.443
> 
> 标签：php, sql, expressionengine

我目前正在研究将 ExpressionEngine 频道条目转换为单独的 .txt 或 .csv 文件的项目。我可以将所有频道条目导出到一个文件中，但是在将每个条目分成单独的文件时我很挣扎......

我正在将该网站与客户的零售店库存系统集成。当商店下订单时，软件将 .txt 或 .csv 文件输入系统，然后更新他们的库存。

该网站将根据店内订单和在线订单显示他们的产品以及实时库存。

我正在研究通过 sql 查询从每个订单中提取数据并将其导出为 .txt 文件。每个订单将创建一个单独的文本文件，并且每小时一次，.txt 文件将通过 cron 导出到服务器内的文件夹。这是客户库存系统从中上传 .txt 文件的文件夹。因此，如果通过网站下订单，文件将被导出并上传到库存系统，从而减少该项目的库存库存购买订单中的金额。

任何建议或指示将不胜感激。

如果这是实现此目的的复杂方法，并且任何人都有更简化的解决方案，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:14:41.213

您使用什么模块进行电子商务设置？它可能有一个扩展挂钩，您可以在每个订单完成后使用该挂钩。您可以在该挂钩中添加代码，以将订单作为文本文件直接导出到服务器上的上述文件夹中。

*   CartThrob：[cartthrob_on_authorize](http://cartthrob.com/docs/developers/hooks/index.html#cartthrob_on_authorize)
*   商店：[商店-订单-完成-结束](https://exp-resso.com/docs/store/developers/extension_hooks.html#store-order-complete-end)
*   辉煌零售：[br_order_create_after](http://docs.brilliantretail.com/developers/extending-brilliantretail/hooks/order.html)

# node.js - nodejs redis Q 承诺，如何使它工作？

> ID：13390075
> 
> 赞同：8
> 
> 时间：2012-11-15T01:04:50.360
> 
> 标签：node.js, redis, promise, q

我试图从 redis 中获取一些值，将它们组合起来并最终发送。但我就是无法让这些承诺奏效。

这是`get`redis的简单功能

```
client.get('user:1:id',function(err,data){
    // here I have data which contains user ID
});
client.get('user:1:username',function(err,data){
    // here I have data which contains username
}); 
```

现在我想获取`ID`并`username`发送它们，但我不知道如何实现它。我设法使它与回调一起工作，但结果非常混乱，所以我尝试将匿名函数包装到`Q.fcall`调用后`.then`，看起来像这样

```
client.get('user:1:id',Q.fcall(function(err,data){
    return data;
}).then(function(val) {
   // do something
})); 
```

但这给了我错误，因为传递了太多的参数，我什至不确定这是否会对我有所帮助，即使它会起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T01:13:46.527

```
Q.all([Q.ninvoke(client, 'get', 'user:1:id'),
       Q.ninvoke(client, 'get', 'user:1:username')]).then(function (data) {
  var id = data[0];
  var username = data[1];
  // do something with them
}); 
```

见[https://github.com/kriskowal/q#adapting-node](https://github.com/kriskowal/q#adapting-node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T14:31:17.480

我使用一个简单的 RequireJS 模块，使用*node-redis*和*whenjs*创建一个提升的 redis 包装器：

```
define [
  'redis/lib/commands'
  'when'
  'when/node/function'
], (Commands, When, NodeFn) ->
  'use strict'

  lift = (redis) ->
    wrapped = {}
    Commands.map (cmd) ->
      wrapped[cmd] = (args...) ->
        def = When.defer()
        args.push NodeFn.createCallback def.resolver
        redis[cmd].apply redis, args
        def.promise
    wrapped

  {lift} 
```

用法很简单：

```
client = lift redis.createClient()
client.get("hello").then console.log, console.error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T22:44:31.023

使用 Promise、Bluebird 和 node_redis：

```
import { RedisClient, createClient, ClientOpts } from "redis";
import { promisifyAll, PromisifyAllOptions } from "bluebird";

export module FMC_Redis {

    export class Redis {
        opt: ClientOpts;
        private rc: RedisClient;
        private rcPromise: any;

        private static _instance: Redis = null;
        public static current(_opt?: ClientOpts): Redis {

            if (!Redis._instance) {
                Redis._instance = new Redis(_opt);
                Redis._instance.redisConnect();
            }
            return Redis._instance;
        }

        public get client(): RedisClient {
            if (!this.rc.connected) throw new Error("There is no connection to Redis DB!");
            return this.rc;
        }

        /******* BLUEBIRD ********/
        public get clientAsync(): any {
            // promisifyAll functions of redisClient 
            // creating new redis client object which contains xxxAsync(..) functions.
            return this.rcPromise = promisifyAll(this.client);
        }

        private constructor(_opt?: ClientOpts) {
            if (Redis._instance) return;

            this.opt = _opt
                ? _opt
                : {
                    host: "127.0.0.1",
                    port: 6379,
                    db: "0"
                };
        }

        public redisConnect(): void {
            this.rc = createClient(this.opt);
            this.rc
                .on("ready", this.onReady)
                .on("end", this.onEnd)
                .on("error", this.onError);
        }

        private onReady(): void { console.log("Redis connection was successfully established." + arguments); }
        private onEnd(): void { console.warn("Redis connection was closed."); }
        private onError(err: any): void { console.error("There is an error: " + err); }

        /****** PROMISE *********/
        // promise redis test
        public getRegularPromise() {
            let rc = this.client;
            return new Promise(function (res, rej) {
                console.warn("> getKeyPromise() ::");
                rc.get("cem", function (err, val) {
                    console.log("DB Response OK.");
                    // if DB generated error:
                    if (err) rej(err);
                    // DB generated result:
                    else res(val);
                });
            });
        }

        /******* ASYNC - AWAIT *******/
        // async - await test function
        public delay(ms) {
            return new Promise<string>((fnResolve, fnReject) => {
                setTimeout(fnResolve("> delay(" + ms + ") > successfull result"), ms);
            });
        }

        public async delayTest() {
            console.log("\n****** delayTest ")
            let a = this.delay(500).then(a => console.log("\t" + a));

            let b = await this.delay(400);
            console.log("\tb::: " + b);
        }

        // async - await function
        public async getKey(key: string) {
            let reply = await this.clientAsync.getAsync("cem");
            return reply.toString();
        }
    }
}

let a = FMC_Redis.Redis.current();
// setTimeout(function () {
//     console.warn(a.client.set("cem", "naber"));
//     console.warn(a.client.get("cem"));
//     console.warn(a.client.keys("cem"));
// }, 1000);

/***** async await test client *****/
a.delayTest();

/** Standart Redis Client test client */
setTimeout(function () {
    a.client.get("cem", function (err, val) {
        console.log("\n****** Standart Redis Client")
        if (err) console.error("\tError: " + err);
        else console.log("\tValue ::" + val);
    });
}, 100)

/***** Using regular Promise with Redis Client > test client *****/
setTimeout(function () {
    a.getRegularPromise().then(function (v) {
        console.log("\n***** Regular Promise with Redis Client")
        console.log("\t> Then ::" + v);
    }).catch(function (e) {
        console.error("\t> Catch ::" + e);
    });
}, 100);

/***** Using bluebird promisify with Redis Client > test client *****/
setTimeout(function () {
    var header = "\n***** bluebird promisify with Redis Client";
    a.clientAsync.getAsync("cem").then(result => console.log(header + result)).catch(console.error);
}, 100); 
```

[![在此处输入图像描述](../Images/408bcf10681cd16cbbdda737dc1658c3.png)](https://i.stack.imgur.com/6IZLQ.png)

# jquery - 使用 XML，jquery 的 .attr() 和 getAttribute() 什么时候返回不同的结果？

> ID：13390077
> 
> 赞同：0
> 
> 时间：2012-11-15T01:05:00.243
> 
> 标签：jquery, xml, ajax, tinymce

我从服务器获取 XML 响应并在 jquery（Chrome 23.0.1271.64 和 Firefox 15.01 上的 jQuery 1.8.2）中解析它以获取各种属性。3 次中有 2 次按计划工作，但第三次， attr() 调用返回整个元素而不是 attr 值。

举个例子：

```
$(xmlData).find("template").attr("largeBlockFirst") 
```

返回一个节点数组，其中一个条目的 tagName 为模板，而

```
$(xmlData).find("template").get(0).getAttribute("largeBlockFirst") 
```

返回一个字符串。

我的理论是，由于某种原因，xmlData 中有一些不同的东西，我无法通过序列化它来看到。在每种情况下，我的方法都由 ajax 调用上的成功回调调用。每个响应都是内容类型 text/xml （总是相同的 url，但以防我每次都检查类型）。

有什么想法可能导致 xml 被不同地解析吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:41:46.270

看看：[http ://brian.pontarelli.com/2007/09/12/how-to-get-jquery-and-tinymce-to-work/](http://brian.pontarelli.com/2007/09/12/how-to-get-jquery-and-tinymce-to-work/)

而不是使用`$`你可能想要使用`jQuery`，并且可能调用`jQuery.noConflict`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:45:36.317

事实证明，3.5.4 之前的 tinymce 破坏了 1.7.2 或更新版本的 jquery。其中一种方法是它破坏了 attr 函数。我升级到最新的tinymce，现在可以正常工作了。希望tinymce升级没有什么让我担心的，交叉手指。

# python - epoll 中如何通知 connect() 失败？

> ID：13390082
> 
> 赞同：0
> 
> 时间：2012-11-15T01:05:23.503
> 
> 标签：python, linux, sockets, connect, epoll

我正在编写一个简单的测试脚本（python）来测试 Web 服务器的性能（这个服务器所做的只是 HTTP 重定向）。Socket 设置为非阻塞，并注册到一个 epoll 实例。

我怎么知道 connect() 因为服务器不能接受更多的连接而失败？我目前使用 EPOLLERR 作为指标。这个对吗？

编辑：假设：1）不考虑IP层网络不可达性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:35:22.523

这捕获了`Connection Refused`和其他套接字错误的情况。由于我假设您也在挂起的套接字上注册读/写可用性（成功），因此您还应该手动超时那些未能通知您相关文件描述符上的读、写或错误可用性的连接可接受的时间限制。

`ECONNREFUSED`通常仅在服务器的`accept()`队列超过其限制或服务器甚至没有绑定到远程端口的套接字时才返回。 `ENETDOWN`, `EHOSTDOWN`, `ENETUNREACH`, 和`EHOSTUNREACH`仅在低于 TCP 的层（例如，IP）知道由于某种原因无法到达主机时才返回，因此它们对于压力测试 Web 服务器的性能并不是特别有用。

因此，您还需要通过超时限制建立连接所花费的时间，以涵盖压力测试失败场景的全部范围。超时值的选择取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:07:32.527

您无法知道它“失败，因为服务器无法接受更多连接”，因为没有针对该条件的特定协议。您只能知道它失败的原因通常有：ECONNREFUSED、连接超时、EUNREACH 等。

# ios - Phonegap App 适用于 iOS 6 但不适用于 iOS 5

> ID：13390086
> 
> 赞同：2
> 
> 时间：2012-11-15T01:05:40.403
> 
> 标签：ios, ios5, cordova, jquery-mobile, requirejs

在 iOS 5 中发生的所有事情都是“DeviceReady”和“Load”事件被触发并且我的所有文件都被加载

我的堆栈包括：

```
Cordova 2.2.0rc2
Phonegap ChildBrowser
Phonegap InAppPurchaseManager
BackboneJS
UnderscoreJS
jQuery 1.8.1
jQueryMobile 1.2.0
RequireJS
ParseJS 
```

我可以看到文件已经加载，因为我有相应的 JS 对象：

```
CDV
window.plugins.childBrowser
window.plugins.inAppPurchaseManager
Backbone
_
$
$.mobile
require
Parse 
```

但是，没有发生的步骤是 RequireJS 加载`main.js`文件。为什么在 iOS 6 发生这种情况时 iOS 5 却没有发生这种情况非常令人困惑。

关于为什么会发生这种情况的任何想法？我很愿意尝试。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:55:21.887

您可以使用[Weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)远程调试应用程序。[phonegap.com 上的这篇博文](http://phonegap.com/2011/05/18/debugging-phonegap-javascript/)解释了如何使用 Weinre 来调试应用程序。它应该显示您的应用程序可能产生的任何 JavaScript 错误。

# android - 内存不足

> ID：13390091
> 
> 赞同：0
> 
> 时间：2012-11-15T01:06:09.587
> 
> 标签：android, bitmap, android-fragments, android-viewpager, out-of-memory

如何有效地回收 Fragments 中的大图像（更准确地说，在**ViewPager**中）？

在**onDestroyView()**中，我通过执行 bitmap.recycle() 来回收位图，但首先我将路径存储在**onSaveInstanceState中的****Bundle**中。我阅读了数千个关于未调用 onSaveInstanceState 情况的问题和线程。但是，**FragementStatePagerAdapter**调用destroyView **()**因此它会释放与片段关联的资源。

 ******如果我阻止 FragmentStatePagerAdapter 调用**super.destroyView()**我将保持 Fragment 的 UI 不变，我知道这一点。

我想要实现的是在片段被销毁时执行**.recycle() ，在 onSaveInstanceState 中保存位图的路径，然后在调用****onCreateView()**时重用该路径来创建新位图，然后将相同的位图放入片段 UI 的**ImageView**。

在将位图设置为 ImageView 之前，我使用 Google 的指南来有效地加载/采样位图。

任何指针都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:09:06.833

换个方式想。创建将使用 LruCache 的位图管理器，并且可以访问您在寻呼机中使用的所有片段/视图。这样，您始终在内存中拥有最新的位图，并且数量有限，不会出现 OutOfMemory 异常。******

# ruby-on-rails - Rspec testing 属于并有很多

> ID：13390092
> 
> 赞同：8
> 
> 时间：2012-11-15T01:06:11.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, associations

我正在运行 rspec 测试以确保两个模型之间通过`has_many`和相互关联`belongs_to`。下面是我的测试。

```
describe "testing for has many links" do
  before do
    @post = Post.new(day: "Day 1", content: "Test")
    @link = Link.new(post_id: @post.id, title: "google", url: "google.com")
  end

  it "in the post model" do
    @post.links.first.url.should == "google.com"
  end
end 
```

测试告诉我 url 是一个未定义的方法。我的测试有什么问题？或者我只是错过了一些基本的东西。

Post 的模型文件

```
has_many :links 
```

Link 的模型文件

```
belongs_to :post 
```

最重要的是，链接模型具有属性`post_id`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T01:51:06.417

您需要保存两个模型来验证这种关系，也可以使用[shoulda](https://github.com/thoughtbot/shoulda) gem。

代码如下所示：

```
describe Link do
  it { should belong_to(:post) }
end 
```

* * *

```
describe Post do
  it { should have_many(:links) }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:14:33.107

您需要将您分配给您`link`，`post`否则，如果您这样做`@post.links`，您将得到一个空数组 ([])，它`[].first`返回`nil`. 然后你的尝试`nil.url`，然后你得到*url 是一个未定义的方法`NilClass`*。

```
@post = Post.new(day: "Day 1", content: "Test")
@link = Link.new(title: "google", url: "google.com")
@post.links << @link 
```

# c# - 自定义组合框抛出 ArgumentOutOfRangeException

> ID：13390093
> 
> 赞同：3
> 
> 时间：2012-11-15T01:06:13.970
> 
> 标签：c#, combobox

我的自定义组合框源如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Windows.Forms;

namespace IHWinUtility
{
    public class IHComboBox : ComboBox
    {
        private IHComboBoxItems _ihComboBoxItems;

        public IHComboBox()
        {
            this.DropDownStyle = ComboBoxStyle.DropDownList;
            _ihComboBoxItems = new IHComboBoxItems(this);
        }

        new public IHComboBoxItems Items
        {
            get { return _ihComboBoxItems; }
            set { _ihComboBoxItems = (IHComboBoxItems)value; }
        }

        new public string SelectedValue
        {
            get { return this.SelectedItem == null ? "" : ((IHComboBoxItem)this.SelectedItem).Value.ToString(); }
        }
    }

    public class IHComboBoxItems : ComboBox.ObjectCollection
    {
        public IHComboBox _ihComboBox;

        public IHComboBoxItems(IHComboBox owner) : base(owner)
        {
            _ihComboBox = owner;
        }

        public int Add(string Text, object Value)
        {
            int _retValue = 0;

            IHComboBoxItem _item = new IHComboBoxItem();
            _item.Text = Text;
            _item.Value = Value;
            _ihComboBox.Items.Add(_item);

            _retValue = _ihComboBox.Items.Count;

            return _retValue;
        }

        new public void Insert(int index, object item)
        {

        }
    }

    public class IHComboBoxItem
    {
        public string Text { get; set; }
        public object Value { get; set; }

        public override string ToString()
        {
            return Text;
        }
    }
} 
```

我在该组合框中添加了一些数据，如下所示：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.ihComboBox1.Items.Add("Text1", "Value1");
    } 
```

它工作得很好。我可以看到 Text1 绑定到我的 Combobox。但问题是当我通过单击 Combobox 中的箭头更改 selectedItem 时，它会抛出以下错误：

```
System.ArgumentOutOfRangeException was unhandled Message="InvalidArgument=Value of '0' is not valid for 'index'.
Parameter name: index
   at: System.ArgumentOutOfRangeException System.Windows.Forms.ComboBox.ObjectCollection.get_Item(Int32 index)
   at: System.Windows.Forms.ComboBox.get_SelectedItem()
   at: System.Windows.Forms.ComboBox.get_Text()
   at: System.Windows.Forms.ComboBox.WmReflectCommand(Message& m)
   at: System.Windows.Forms.ComboBox.WndProc(Message& m)
   at: System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at: System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at: System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:36:53.327

在选定的值中，您试图强制一个值。但该值不在收藏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T09:58:35.260

当您的代码调用 IHComboBoxItems::Add 方法时，新对象将被添加到 IHComboBox._ihComboBoxItems 集合中，与原始 ComboBox.Items 集合不同。原始 ComboBox.Items 将为空。

ComboBox.get_Text 使用 ComboBox.Items 属性通过当前 SelectedIndex 获取 SelectedItem。

下拉列表使用反射枚举 Items 集合，映射到新的 IHComboBoxItems.Items 属性（调用 Add 后不会为空），并允许用户选择非零 SelectedIndex，但原始 ComboBoxItems.Items 将保持为空。当内部 ComboBox 代码尝试加载 Text 时，它使用非零 SelectedIndex 调用原始 ComboBox.Items（保持为空）并导致异常。

尝试在 ObjectCollection 上创建和使用包装器，而不是创建新的 ObjectCollection 实例。**但是在包装器代码中，您必须在每次使用它之前检查到 ObjectCollection 实例的链接**（否则您将得到 ArgumentOutOfRangeException），因为 ComboBox 代码可以重新创建它并且不允许覆盖创建 ObjectCollection 实例构造。

代码示例：

```
public abstract class TypedComboBox<T> : ComboBox
{
    public TypedComboBox()
    {
        _objectCollectionProxy = new TypedObjectCollectionProxy<T>(this);
    }

    private TypedObjectCollectionProxy<T> _objectCollectionProxy;

    public ObjectCollection ObjectCollectionCollection
    {
        get { return base.Items; }
    }

    public class TypedObjectCollectionProxy<ItemType> : IList, IList<ItemType>, ICollection, ICollection<ItemType>, IEnumerable, IEnumerable<ItemType>
    {
        public ObjectCollection _objectCollection;
        private TypedComboBox<T> _owner;

        public TypedObjectCollectionProxy(TypedComboBox<T> owner)
        {
            this._owner = owner;
            this._objectCollection = owner.ObjectCollectionCollection;
        }

        /// <summary>Gets the number of items in the collection</summary>
        public int Count { get { return _objectCollection.Count; } }
        /// <summary>Gets a value indicating whether this collection can be modified</summary>
        public bool IsReadOnly { get { return _objectCollection.IsReadOnly; } }

        /// <summary>Retrieves the item at the specified index within the collection</summary>
        /// <param name="index">The index of the item in the collection to retrieve</param>
        /// <returns>An object representing the item located at the specified index within the collection</returns>
        /// <exception cref="System.ArgumentOutOfRangeException">The index was less than zero.-or- The index was greater than the count of
        ///                                                          items in the collection.</exception>
        [Browsable(false)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
        public virtual ItemType this[int index]
        {
            get
            {
                CheckItems();
                return (ItemType)_objectCollection[index];
            }
            set
            {
                CheckItems();
                _objectCollection[index] = value;
            }
        }

        public void CheckItems()
        {
            if (this._objectCollection != _owner.ObjectCollectionCollection)
                this._objectCollection = _owner.ObjectCollectionCollection;
        }

        /// <summary>Adds an item to the list of items for a System.Windows.Forms.ComboBox</summary>
        /// <param name="item">An object representing the item to add to the collection</param>
        /// <returns>The zero-based index of the item in the collection</returns>
        /// <exception cref="System.ArgumentNullException">The item parameter was null</exception>
        public int Add(ItemType item)
        {
            CheckItems();
            return _objectCollection.Add(item);
        }

        /// <summary>Adds an array of items to the list of items for a System.Windows.Forms.ComboBox</summary>
        /// <param name="items">An array of objects to add to the list</param>
        /// <exception cref="System.ArgumentNullException">An item in the items parameter was null</exception>
        public void AddRange(IEnumerable<ItemType> items)
        {
            CheckItems();
            _objectCollection.AddRange(items.Cast<object>().ToArray());
        }

        /// <summary>Removes all items from the System.Windows.Forms.ComboBox</summary>
        public void Clear()
        {
            CheckItems();
            _objectCollection.Clear();
        }

        /// <summary>Determines if the specified item is located within the collection</summary>
        /// <param name="value">An object representing the item to locate in the collection</param>
        /// <returns>true if the item is located within the collection; otherwise, false</returns>
        public bool Contains(ItemType value)
        {
            CheckItems();
            return _objectCollection.Contains(value);
        }

        /// <summary>Copies the entire collection into an existing array of objects at a specified location within the array</summary>
        /// <param name="destination">The object array to copy the collection to</param>
        /// <param name="arrayIndex">The location in the destination array to copy the collection to</param>
        public void CopyTo(object[] destination, int arrayIndex)
        {
            CheckItems();
            _objectCollection.CopyTo(destination, arrayIndex);
        }

        /// <summary>Returns an enumerator that can be used to iterate through the item collection</summary>
        /// <returns>An System.Collections.IEnumerator that represents the item collection</returns>
        public IEnumerator GetEnumerator()
        {
            CheckItems();
            return _objectCollection.GetEnumerator();
        }

        /// <summary>Retrieves the index within the collection of the specified item</summary>
        /// <param name="value">An object representing the item to locate in the collection</param>
        /// <returns>The zero-based index where the item is located within the collection; otherwise, -1</returns>
        /// <exception cref="System.ArgumentNullException">The value parameter was null</exception>
        public int IndexOf(ItemType value)
        {
            CheckItems();
            return _objectCollection.IndexOf(value);
        }

        /// <summary>Inserts an item into the collection at the specified index</summary>
        /// <param name="index">The zero-based index location where the item is inserted</param>
        /// <param name="item">An object representing the item to insert</param>
        /// <exception cref="System.ArgumentNullException">The item was null</exception>
        /// <exception cref="System.ArgumentOutOfRangeException">The index was less than zero.-or- The index was greater than the count of items in the collection</exception>
        public void Insert(int index, ItemType item)
        {
            CheckItems();
            _objectCollection.Insert(index, item);
        }

        /// <summary>Removes the specified item from the System.Windows.Forms.ComboBox</summary>
        /// <param name="value">The System.Object to remove from the list</param>
        public bool Remove(ItemType value)
        {
            int kIndex = IndexOf(value);
            if (kIndex >= 0)
            {
                CheckItems();
                _objectCollection.RemoveAt(kIndex);
                return true;
            }
            return false;
        }

        /// <summary>Removes an item from the System.Windows.Forms.ComboBox at the specified index</summary>
        /// <param name="index">The index of the item to remove</param>
        /// <exception cref="System.ArgumentOutOfRangeException">The value parameter was less than zero.-or- The value parameter was greater than or equal to the count of items in the collection</exception>
        public void RemoveAt(int index)
        {
            CheckItems();
            _objectCollection.RemoveAt(index);
        }

        #region IList Members

        int IList.Add(object value)
        {
            return this.Add((ItemType)value);
        }

        void IList.Clear()
        {
            this.Clear();
        }

        bool IList.Contains(object value)
        {
            return this.Contains((ItemType)value);
        }

        int IList.IndexOf(object value)
        {
            return this.IndexOf((ItemType)value);
        }

        void IList.Insert(int index, object value)
        {
            this.Insert(index, (ItemType)value);
        }

        bool IList.IsFixedSize
        {
            get
            {
                CheckItems();
                return (_objectCollection as IList).IsFixedSize;
            }
        }

        bool IList.IsReadOnly
        {
            get { return this.IsReadOnly; }
        }

        void IList.Remove(object value)
        {
            this.Remove((ItemType)value);
        }

        void IList.RemoveAt(int index)
        {
            this.RemoveAt(index);
        }

        object IList.this[int index]
        {
            get
            {
                return this[index];
            }
            set
            {
                this[index] = (ItemType)value;
            }
        }

        #endregion

        #region ICollection Members

        void ICollection.CopyTo(Array array, int index)
        {
            this.CopyTo((object[])array, index);
        }

        int ICollection.Count
        {
            get { return this.Count; }
        }

        bool ICollection.IsSynchronized
        {
            get
            {
                CheckItems();
                return (_objectCollection as ICollection).IsSynchronized;
            }
        }

        object ICollection.SyncRoot
        {
            get
            {
                CheckItems();
                return (_objectCollection as ICollection).SyncRoot;
            }
        }

        #endregion

        #region IEnumerable<ItemType> Members

        IEnumerator<ItemType> IEnumerable<ItemType>.GetEnumerator()
        {
            CheckItems();
            return _objectCollection.Cast<ItemType>().GetEnumerator();
        }

        #endregion

        #region ICollection<ItemType> Members

        void ICollection<ItemType>.Add(ItemType item)
        {
            this.Add(item);
        }

        void ICollection<ItemType>.Clear()
        {
            this.Clear();
        }

        bool ICollection<ItemType>.Contains(ItemType item)
        {
            return this.Contains(item);
        }

        void ICollection<ItemType>.CopyTo(ItemType[] array, int arrayIndex)
        {
            throw new NotImplementedException();
        }

        int ICollection<ItemType>.Count
        {
            get { return this.Count; }
        }

        bool ICollection<ItemType>.IsReadOnly
        {
            get { return this.IsReadOnly; }
        }

        bool ICollection<ItemType>.Remove(ItemType item)
        {
            return this.Remove(item);
        }

        #endregion

        #region IEnumerable Members

        IEnumerator IEnumerable.GetEnumerator()
        {
            return this.GetEnumerator();
        }

        #endregion
    }

    /// <summary>Gets an object representing the collection of the items contained in this System.Windows.Forms.ComboBox</summary>
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Browsable(false)]
    [Bindable(true)]
    public new TypedObjectCollectionProxy<T> Items
    {
        get { return _objectCollectionProxy; }
    }

    /// <summary>Gets or sets currently selected item in the System.Windows.Forms.ComboBox</summary>
    [Bindable(true)]
    [Browsable(false)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public new T SelectedItem
    {
        get { return (T)base.SelectedItem; }
        set { base.SelectedItem = value; }
    }
} 
```

这是我自己的抽象通用组合框。

# javascript - 当 JavaScript 取消超链接“点击”事件时，屏幕阅读器会做什么？

> ID：13390096
> 
> 赞同：3
> 
> 时间：2012-11-15T01:06:31.277
> 
> 标签：javascript, hyperlink, accessibility, carousel

鉴于下面的代码，对于使用屏幕阅读器导航的用户，`myHyperlink.onclick`当他们跟随该超链接并取消事件时，JavaScript 是否仍会执行？我的目标是让使用屏幕阅读器导航的用户直接导航到，`http://www.google.com`因为他们无论如何都不会真正看到图像。

```
<!DOCTYPE html>
<html>
 <head>
     <title>Accessibility?</title>
     <script>
     window.onload = function() {
         var myHyperlink = document.getElementById("slider-nav");
         myHyperlink.onclick = function() {
             document.getElementById("about-google").style.display = "block";
             return false;
         };
     };
     </script>
 </head>
 <body>
     <div id="main">
         <a href="http://www.google.com" id="slider-nav">Google</a>
         <div id="about-google" style="display:none;">
             <a href="http://www.google.com">
                 <img src="https://www.google.com/images/srpr/logo3w.png" alt="Google logo" />
             </a>
         </div>
     </div>
 </body>
</html> 
```

[代码也可从 JSFiddle 获得。](http://jsfiddle.net/DXUqr/)

对于上下文，我正在尝试使轮播/滑块小部件对屏幕阅读器更加友好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:37:03.563

无论链接是由视力正​​常的用户使用鼠标、视力正常的用户使用键盘还是屏幕阅读器使用键盘激活，浏览器行为都没有区别。在所有情况下，`onclick`都会调用您的处理程序，显示徽标并取消导航。对于键盘用户（无论是否有视力），键盘焦点将保持在初始文本链接上。有视力的用户会看到新图像出现，屏幕阅读器用户不会听到任何声音，并且可能会想知道为什么显然什么也没发生。

您可以自己尝试：[下载免费的 NVDA 屏幕阅读](http://www.nvda-project.org/wiki/Download)器（如果您觉得它有用，请捐赠），然后针对在 IE 或 Firefox 中运行的页面进行尝试（Chrome 对可访问性的支持略有滞后，但正在迎头赶上。）对于 JSFiddle页面，在独立页面而不是窗格中处理结果通常更容易，您可以通过拉出框架 URL 并将其粘贴到新的浏览器页面 - [http://fiddle.jshell 来做到这一点。 net/DXUqr/show/](http://fiddle.jshell.net/DXUqr/show/)在你的情况下。NVDA 并不是唯一的屏幕阅读器，但它与任何用于检查基本 Web 可访问性的屏幕阅读器一样好。

（一般来说，首先无法确定用户是否在使用屏幕阅读器。最好的办法是编写适用于所有用户的易于访问的良好 HTML。）

# knockout.js - 淘汰赛：数据映射不适用于过滤器功能

> ID：13390099
> 
> 赞同：1
> 
> 时间：2012-11-15T01:06:34.437
> 
> 标签：knockout.js

基本上我对淘汰赛很陌生。我一直在尝试大量的例子，现在我要疯了。我正在做的事情并不难。但是，它仍然不起作用。

我正在尝试接收数据，将其映射到一个对象（？），然后使用一些可观察对象进行不同的过滤。这些数据永远不需要写回服务器，它只是为了消费。

我的坏例子：http: [//jsfiddle.net/boyus/qTb5Q/3/](http://jsfiddle.net/boyus/qTb5Q/3/)

```
function Item(id, firstName, lastName, expertise, img, tag) {
    this.id = ko.observable(id);
    this.firstName = ko.observable(firstName);
    this.lastName = ko.observable(lastName);
    this.expertise = ko.observable(expertise);
    this.img = ko.observable(img);
    this.tag = ko.observable(tag);
    this.fullName = ko.dependentObservable(function() {
        return this.firstName() + " " + this.lastName();
    }, this);
    this.expertPath = ko.dependentObservable(function() {
        return "http://www.example.com/user/" + this.id();
    }, this);
    this.imgPath = ko.dependentObservable(function() {
        return "http://img835.imageshack.us/img835/5116/" + this.img();
    }, this);
}

var viewModel = {
    items: ko.observableArray([]),
    filter: ko.observable()
};

//ko.utils.arrayFilter - filter the items using the filter text
viewModel.filteredItems = ko.dependentObservable(function() {
    var filter = this.filter().toLowerCase();
    if (!filter) {
        return this.items();
    } else {
        return ko.utils.arrayFilter(this.items(), function(item) {
            return (item.fullName().indexOf(filter) > -1);
        });

    }, viewModel);

var JSONdataFromServer = '[{"id":"1","firstName":"Bill","lastName":"Nye","expertise":"Science Guy", "img":"emptyprofile.png","tag":"environment"},{"id":"54","firstName":"John","lastName":"Dow","expertise":"Software Creation","img":"emptyprofile.png","tag":"software"},{"id": "544","firstName":"Pete","lastName":"Dragon","expertise":"Magic (and Sparkles)","img":"emptyprofile.png","tag": "environment"}]';

var dataFromServer = ko.utils.parseJson(JSONdataFromServer);

//do some basic mapping (without mapping plugin)
var mappedData = ko.utils.arrayMap(dataFromServer, function(item) {
    return new Item(item.id, item.firstName, item.lastName, item.expertise, item.img, item.tag);
});

viewModel.items(mappedData);

ko.applyBindings(viewModel);​ 
```

感谢您提前提供的所有帮助。

如果它有帮助（也就是我的代码将永远无法工作）我未来对此代码的更新将是：

*   按类别过滤（我想我在另一个例子中有这个工作，但不是每个专家的类别数组）
*   按姓氏的第一个字母过滤
*   所有 3 种过滤类型必须在同一页面上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:11:53.073

For the specific problems with your current fiddle:

*   you were missing a brace in the `filteredItems` at the end of the `else` statement
*   you can't call `toLowerCase()` on null or undefined. I changed it to initialize `filter` as an empty string.
*   the comparison probably should convert `fullName` to lower case as well.

Updated sample here: [http://jsfiddle.net/rniemeyer/qTb5Q/4/](http://jsfiddle.net/rniemeyer/qTb5Q/4/)

# android - 你能从 Zxing 复制 UPC 并粘贴到 Web 应用程序上吗

> ID：13390103
> 
> 赞同：0
> 
> 时间：2012-11-15T01:06:54.003
> 
> 标签：android, web-applications, zxing, barcode-scanner

我要做的是在您按下按钮并打开本机应用程序时启动 Zxing 应用程序，然后获取生成的条形码编号并将其放入我们的数据库中。只需打开应用程序就可以做到这一点，还是我需要实际创建一个本机应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:15:56.440

如果不编写一些代码，您将无法将条形码放入您自己的数据库中。您可以使用他们的应用程序从您自己的应用程序中使用 Zxing 应用程序`IntentIntegrator`

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan();

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
if (scanResult != null) {
    // place your scan result into the database
}
    // no result found
} 
```

请阅读“通过意图扫描” [http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

将所需的源代码添加到您的项目中： [Source code](http://code.google.com/p/zxing/downloads/detail?name=ZXing-2.1.zip&can=2&q=)

# phpquery - jQuery NextUntil 类似 phpQuery 的函数

> ID：13390104
> 
> 赞同：2
> 
> 时间：2012-11-15T01:06:58.663
> 
> 标签：phpquery

phpQuery 是否有任何 jQuery NextUntil 函数？如果我有这个 HTML 结构：

```
<table id="m" width="100%">
    <tbody>
        <tr class="x" align="center"></tr>
        <tr></tr>
        <tr class="n"></tr>
        <tr></tr>
        <tr class="n"></tr>
        <tr></tr>
        <tr class="x" align="center"></tr>
        <tr class="n"></tr>
        <tr></tr>
        <tr class="n"></tr>
        <tr></tr>
        <tr class="n"></tr>
        <tr></tr>
    </tbody>
</table> 
```

我想做的就是使用 phpQuery 获取“tr.x”之间的元素。在 jQuery 中，我们可以使用 NextUntil() 函数来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:31:12.517

我认为这将适用于您的目的：

```
$i = 0;
foreach($children as $child){
    if($i == 2){ break; }
    $i = (pq($child)->attr('class') == 'x') ? ($i + 1) : $i;
    if($i == 0){ continue; }

    echo pq($child)->text();
} 
```

**注意**：这也将排除`tr`第一个之前的所有元素`tr.x`

例如，如果 html 是..

```
<tbody>
    <tr class="n">h</tr>
    <tr class="x" align="center">a</tr>
    <tr>b</tr>
    <tr class="n">c</tr>
    <tr>d</tr>
    <tr class="n">e</tr>
    <tr>f</tr>
    <tr class="x" align="center">g</tr>
    <tr class="n">h</tr>
    <tr></tr>
    <tr class="n"></tr>
    <tr></tr>
    <tr class="n"></tr>
    <tr></tr>
</tbody> 
```

输出将是

```
a
b
c
d
e
f
g 
```

希望有帮助

# ios - iOS 6 CLLocationManager 最后位置

> ID：13390109
> 
> 赞同：2
> 
> 时间：2012-11-15T01:08:01.397
> 
> 标签：ios, objective-c, ios6, cllocationmanager, cllocationdistance

因此，从 iOS 6 开始，`-locationManager:didUpdateToLocation:fromLocation:`已弃用。

相反，Apple 建议使用`-locationManager:didUpdateLocations:`，它提供从一个到一系列最近的位置更改的任何位置。然而，极有可能它提供了一个`locations`长度为 1 的数组，似乎无法访问`fromLocation:(CLLocation *)oldLocation`old 的参数。

有没有办法在不使用过时方法的情况下获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:40:27.690

您只需将一个属性设置为 locationManager:didUpdateLocations: 返回的值，您可以将其用作 fromLocation，然后再次调用该方法，并将其返回的内容用作 toLocation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:09:21.827

正如 rdelmar 所说，如果您需要以前的位置，我只会将收到的最后一个位置存储`locationManager:didUpdateLocations:`在 ivar 或属性中，如果`locationManager:didUpdateLocations:`返回一个只有一个值的数组，请获取您之前保存在 ivar/property 中的值并使用它为您的“旧”位置。

# windows-phone - 如何将一些媒体测试内容上传到 Windows Phone 模拟器？

> ID：13390110
> 
> 赞同：1
> 
> 时间：2012-11-15T01:08:09.073
> 
> 标签：windows-phone

我有 VS2012 windows phone 模拟器，它工作得很好。我可以开发和调试。

问题是如何将测试内容上传到模拟器？我需要模拟器媒体库中的几首歌曲来调试我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:02:10.333

您可以使用 windows phone 电源工具将文件上传到模拟器。连接模拟器并将文件放在您想要的位置。检查此链接： [Wp 电动工具](http://wptools.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:09:56.120

不幸的是，你不能在模拟器中做到这一点......你需要一部真正的手机......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:40:03.320

你不能只登录 SkyDrive 并从那里抓取吗？此外，这种将文件部署到模拟器的 7.0 方法可能仍然有效：http: [//justinangel.net/WindowsPhone7EmulatorAutomation](http://justinangel.net/WindowsPhone7EmulatorAutomation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:53:50.720

您也许可以与当地的开发人员传道员一起获得测试设备。您可以使用此应用程序找出是谁 - [http://www.windowsphone.com/s?appid=30db0bac-e968-4e50-8205-30adf19fb5b9](http://www.windowsphone.com/s?appid=30db0bac-e968-4e50-8205-30adf19fb5b9)。

# r - 写入 txt 文件会创建不需要的第一列

> ID：13390111
> 
> 赞同：1
> 
> 时间：2012-11-15T01:08:26.987
> 
> 标签：r, export, dataframe

我有这个`data frame`叫做“ `Datos`”（摘要）：

`Datos[1:10,1:5]`：

```
 RUN_ADM                                        NOM_ADM RUN_FM Tipo.de.Fondo.Mutuo FECHA_INF
1  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860902
2  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860903
3  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860904
4  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860905
5  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860906
6  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860907
7  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860908
8  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860909
9  96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860910
10 96767630 BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.   8001                   5  19860911 
```

其中 Datos[1:10,1] ( `$RUN_ADM`):

```
[1] 96767630 96767630 96767630 96767630 96767630 96767630 96767630 96767630 96767630 96767630 
```

然后我`subset`：

```
 Datos2<-subset(Datos,Datos[,4]==5) 
```

然后写入txt文件：

```
write.table(Datos2,"C:/Users/Tomas/Desktop/Memoria de Titulo/CartolaTipo5.txt", sep="\t",col.names = TRUE) 
```

问题是这会生成一个文件，其中包含一个新列（第一列）的 ID 键。并且 colnames 被替换：

```
RUN_ADM NOM_ADM RUN_FM  Tipo.de.Fondo.Mutuo FECHA_INF
1   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
2   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
3   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
4   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
5   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
6   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
7   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
8   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
9   96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5
10  96767630    BANCHILE ADMINISTRADORA GENERAL DE FONDOS S.A.  8001    5 
```

现在我的第一列“RUN_ADM”是：

```
RUN_ADM
1
2
3
4
5
6
7
8
9
10 
```

我该怎么做才能避免出现第一个新专栏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:14:53.690

这些是行名。不包括`row.names = FALSE`在调用中设置的行名`write.table`

```
write.table(Datos2,"C:/Users/Tomas/Desktop/Memoria de Titulo/CartolaTipo5.txt", 
            sep="\t",col.names = TRUE, row.names = FALSE) 
```

# javascript - 有没有办法使用类似于 contenteditable 的用户提交的 textarea 值来更新 DOM？

> ID：13390116
> 
> 赞同：2
> 
> 时间：2012-11-15T01:08:54.353
> 
> 标签：javascript, jquery, html, contenteditable

我只需要 DOM 中 textarea 的 html 标记来反映用户输入的值。（编辑：用户输入一些东西，当你点击“检查元素”时它会显示出来）

一个 contenteditable div 工作正常，但现在看来我毕竟需要一个 textarea。有人知道用javascript或html5做这件事的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:24:02.320

我想这样的事情会帮助你。它使用纯 javascript 和 html5 数据值属性：

```
 <textarea id="myTextArea" onkeyup="this.setAttribute('data-value', this.value);" data-value=""></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:26:41.557

这应该使用 text() 函数从用户输入中转义 html：

```
$('textarea').on( 'blur' , function() 
{
    var textarea = $( this );
    textarea.next('span').text( textarea.val() );
}); 
```

带有以下标记：

```
<textarea></textarea>
<span></span>​ 
```

这里的演示：http: [//jsfiddle.net/UDfmm/](http://jsfiddle.net/UDfmm/)

编辑：如果您想保留换行符，请执行此操作

```
$('textarea').on( 'blur' , function() 
{
    var textarea = $( this );
    var span = textarea.next('span');

    var content = span.text( textarea.val() ).html();
    var content_with_br = content.replace(/\n\r?/g, "<br />");

    span.html( content_with_br );

}); 
```

在这里演示：http: [//jsfiddle.net/UDfmm/3/](http://jsfiddle.net/UDfmm/3/)

# dll - Visual Studio 2012 中的 glew32.dll 错误

> ID：13390117
> 
> 赞同：2
> 
> 时间：2012-11-15T01:09:01.657
> 
> 标签：dll, windows-8, visual-studio-2012, glew

这个问题很容易解释。以下是详细信息：我正在尝试在 Windows 8 上的 Visual Studio 2012 中包含 freeglut 和 glew。我在 64 位系统上，所以我认为我需要将 glew32.dll 放在我的 64 位系统文件夹中。我尝试过并收到以下错误：

“应用程序无法正确启动（0xc000007b）。单击确定关闭应用程序。”

我将其解释为我试图将 32 位 dll 放入 64 位文件夹中，反之亦然。

只是为了笑，我尝试将文件放入 System32，但当然，它只是告诉我该文件不在我的计算机上。有什么建议么？

编辑* 我还可以补充一点，为此的一些设置与在 Windows 7 或 Visual Studio 2010 或更早版本上的设置不同。我可能错过了一些东西，因为我使用搜索功能结合了我在各种网站上找到的一些文档来改进它。（即 lib 和 include 文件夹不再在同一个地方）

EDIT2* 我确信这可能是派生出来的，但为了清楚起见，我还是想添加它：如果我删除了 glew32.lib 的依赖项并使用 glew.h 注释掉任何代码，则窗口形式应如此。我认为不需要我的源代码，因为我 99% 确定这不是代码问题，但如果有人想查看它，请告诉我，我会附上它。

# java - JAVA：存储数字？

> ID：13390118
> 
> 赞同：0
> 
> 时间：2012-11-15T01:09:04.307
> 
> 标签：java, bit

我正在尝试为 AP 考试自学 Java，但偶然发现了一个我不太了解的部分。

有一个盒子分为 8 个部分，代表 8 位存储。第一个有 0，后面的七个框有 1。为什么 -2^7 - (2^7)-1 的可能值是 -128 - 127？为什么不直接打开第一位并使其变为-2^8 - 2^8？请以最简单和彻底的方式解释。我已经在网上阅读了一些关于此的答案，但我不明白。这也是我书中的第一部分，他们没有很好地解释。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:13:11.660

它是一个组合问题。如果你手上有 8 个手指，你可以向其他人展示多少种可能的手指组合？答案是 2^8。即 2 * 2^7。因此，您有 2^7 个正数和 2^7 个负数，但您还必须显示零。这就是为什么你有 2^7-1 个正值和 2^7 个负值和零的原因。我希望这能很好地解释它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:15:43.773

Java字节表示为有符号字节，所以最左边的位代表数字的符号（正或负），所以只剩下7位。如果您使用所有 8 位（因此您可以达到 2^8），则您不能表示负数。

这个[二进制补码表](http://en.wikipedia.org/wiki/Two%27s_complement)显示了这一点

# java - Java 正则表达式在包含引号的字符串上中断

> ID：13390122
> 
> 赞同：1
> 
> 时间：2012-11-15T01:09:23.033
> 
> 标签：java, regex

`"\"a".matches("a")`返回假。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:13:31.853

该[`matches`方法期望*整个*字符串匹配](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)，而不仅仅是目标字符串中某处存在的匹配。

另一方面，这会[返回](http://ideone.com/lemV8k) `true`，因为它允许字符串在匹配之前或之后包含任何内容：

```
"\"a".matches(".*a.*") 
```

在字符串中的任何位置查找匹配项的另一种方法是[`Pattern`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)直接使用：

```
if (Pattern.compile("a").matcher("\"a").find()) {
    ...
} 
```

# c# - 如何使用谓词 在 EF Where() 子句中？

> ID：13390126
> 
> 赞同：13
> 
> 时间：2012-11-15T01:09:30.573
> 
> 标签：c#, linq, entity-framework, linq-expressions

我正在尝试在我的 EF 过滤代码中使用谓词。

这有效：

```
IQueryable<Customer> filtered = customers.Where(x => x.HasMoney && x.WantsProduct); 
```

但是这个：

```
Predicate<T> hasMoney = x => x.HasMoney;
Predicate<T> wantsProduct = x => x.WantsProduct;
IQueryable<Customer> filtered = customers.Where(x => hasMoney(x) && wantsProduct(x)); 
```

运行时失败：

```
The LINQ expression node type 'Invoke' is not supported in LINQ to Entities. 
```

我不能使用第一个选项，因为这是一个简单的示例，实际上，我正在尝试将一堆谓词组合在一起（使用 and、not、or 等）来实现我想要的。

*如何让 EF Linq 提供程序“理解”我的谓词？*

如果我使用`Func<T, bool>`. 它适用于`Expression<Func<T>>`，但我无法将表达式组合在一起进行复杂过滤。如果可能的话，我宁愿避免使用外部库。

更新：
如果无法做到这一点，我有什么选择？也许表达式被组合/或'ed/and'ed以某种方式达到相同的效果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T08:51:43.027

```
Expression<Func<Customer, bool>> hasMoney = x => x.HasMoney;
Expression<Func<Customer, bool>> wantsProduct = x => x.WantsProduct;
IQueryable<Customer> filtered = customers.Where(hasMoney).Where(wantsProduct); 
```

*   用于作为表达式树`Expression<T>`离开，而不是将其编译为 .NET 方法`x => x.HasMoney`
*   使用`Expression<Func<Customer, bool>>`而不是`Expression<Predicate<Customer>>`，因为这是[`Queryable.Where`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)预期的
*   直接`.Where`将其传入 ，使用多个`.Where`调用而不是`&&`.

`.Union`可以通过使用,`.Except`等重写它们来获得更复杂的条件（包括不，或等） 。

另一种方法是使用[LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)的`AsExpandable`：

```
Expression<Func<Customer, bool>> hasMoney = x => x.HasMoney;
Expression<Func<Customer, bool>> wantsProduct = x => x.WantsProduct;
IQueryable<Customer> filtered = customers.AsExpandable().Where(x => hasMoney.Invoke(x) && wantsProduct.Invoke(x)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T01:20:56.617

不幸的是，无法`Predicate<T>`在 EF linq 中使用，因为无法将其映射到 SQL 查询中。这只能通过表达式来完成，因为它们可以被解析并转换为 SQL。

事实上，有 4 种语言特性使 linq 成为可能：

1.  扩展方法
2.  类型推断
3.  闭包
    *，尤其是对于 linq2sql*
4.  **表达式**

更新：
可能的解决方案是以编程方式构建表达式。[如何：使用表达式树构建动态查询](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

# php - 更新主厨 php 食谱的 php 版本

> ID：13390129
> 
> 赞同：3
> 
> 时间：2012-11-15T01:10:14.300
> 
> 标签：php, ubuntu, chef-infra, vagrant

我是厨师的新手，并试图配置 php 食谱以在 Ubuntu 上安装 php 5.4.8 而不是默认的 php 5.3.10。

我尝试在自定义说明书的 attributes/default.rb 文件中添加此设置：

`default['php']['version'] = '5.4.8'`

但是安装的版本还是5.3.10

`php -v`

`PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) (built: Sep 12 2012 19:00:43) Copyright (c) 1997-2012 The PHP Group Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies`

如何覆盖 php 版本的默认设置？

**编辑：** 基于答案[https://github.com/AlexDisler/php54-chef-env的带有 php 5.4 的 Vagrant repo](https://github.com/AlexDisler/php54-chef-env)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T20:50:46.163

我也是新手，我做了同样的事情。我相信你需要添加一个指向你想要的 php 版本的包。

这是您可以查看的食谱。 [https://github.com/homemade/chef-dotdeb](https://github.com/homemade/chef-dotdeb)

您想在调用 php 配方之前将其添加到 run_list 的顶部

前任。

如果你正在使用 vagrant（如果你不是，你最好去下载它，它会让你的生活再次变得有趣）[http://www.vagrantup.com](http://www.vagrantup.com)

```
chef.add_recipe("dotdeb")
chef.add_recipe("dotdeb::php54")
chef.add_recipe("apache2")
chef.add_recipe("apache2::mod_php5")
chef.add_recipe("apache2::mod_rewrite")
chef.add_recipe("php") 
```

我希望这能够帮到你。

编辑：我必须对此进行测试，并且它有效。祝你好运！

# javascript - 有没有办法让 div 在被溢出时“向上”显示：隐藏？

> ID：13390130
> 
> 赞同：1
> 
> 时间：2012-11-15T01:10:17.773
> 
> 标签：javascript, jquery, css, jquery-chosen

我将 Harvest Chosen 用于一些动态选择元素，但我遇到了一个问题，如果选择元素靠近页面底部，则选择列表会被切断。包含的 div 设置为溢出：隐藏，并且由于某种原因将其更改为溢出：可见导致滚动条显示在容器 div 内。

如果我能让选项列表表现得像一个正常的下拉菜单，并在底部被剪裁时呈现“向上”，那就太好了。

那么是否有一些神奇的css（或者可能是javascript/jquery）可以强制div显示在选择元素的顶部而不是它的下方，但只有当它被包含元素切断时？

还是我错过的 Harvest Chosen 插件中的一个更好的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T17:34:07.830

看起来即使在选择的 1.2.0 中，它仍然具有相同的行为。我很惊讶还没有人添加这个功能。替代方法：使用 Select2。

# c - 从 C 中的文件中读取名称值对

> ID：13390133
> 
> 赞同：4
> 
> 时间：2012-11-15T01:10:50.407
> 
> 标签：c, file

我想在 C 中打开一个 .txt 文件并读取 .txt 文件中的名称值对以及不同变量中的每个值。txt 文件只有 3 行。

```
Name1 =  Value1
Name2 =  Value2
Name3 =  Value3 
```

我想提取与名称 1、2 和 3 对应的值并将它们存储在一个变量中。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:17:32.100

[这个答案](https://stackoverflow.com/a/2523494/544198)显示了最好的方法

```
#include <string.h>

char *token;

char *search = "=";

 static const char filename[] = "file.txt";
FILE *file = fopen ( filename, "r" );
if ( file != NULL )
{
  char line [ 128 ]; /* or other suitable maximum line size */
  while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
  {
    // Token will point to the part before the =.
    token = strtok(line, search);
    // Token will point to the part after the =.
    token = strtok(NULL, search);
  }
  fclose ( file );
} 
```

剩下的交给你去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:20:41.040

您可以使用 fgets 函数逐行读取文件。给出字符串中的每一行。然后使用 strtok 函数将字符串拆分为使用空格作为分隔符的标记。所以你会得到Value1，Value2 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:19:29.253

为文件创建一个指针。

```
FILE *fp;
char line[3]; 
```

打开文件。

```
fp = fopen(file,"r");
if (fp == NULL){
  fprintf(stderr, "Can't open file %s!\n", file);
  exit(1);  
} 
```

逐行阅读内容。

```
for (count = 0; count < 3; count++){      
   if (fgets(line,sizeof(line),fp)==NULL)
      break;
   else {               

      //do things with line variable

      name = strtok(line, '=');
      value = strtok(NULL, '=');

  }  
} 
```

不要忘记关闭文件！

```
fclose(fp); 
```

# iphone - 更新到 iOS 6.0.1 后丢失数据

> ID：13390136
> 
> 赞同：1
> 
> 时间：2012-11-15T01:11:43.003
> 
> 标签：iphone, ios, ios6

当用户升级到 iOS 6.0.1 时，我收到了来自用户的数据丢失报告。我在 ios 6.0.1 发布前不久推出了使用 Cordova 2.1 的应用程序的新版本。发布后，我开始收到有关数据丢失的报告。phonegap 和 iOS 6.0.1 是否存在另一个 iOS 5.0 数据存储问题？我们的应用程序和用户依赖于可检索的数据。像我们在 iOS 5 中遇到的另一个数据丢失将是毁灭性的。我已经使用 cordova 2.2 重建了应用程序，并通过升级到 ios 6.0.1 进行了测试。一旦我在应用程序上硬停止，数据就会丢失。请帮忙。提前致谢。

# opencv - 尝试检测图像库中的图像存在

> ID：13390137
> 
> 赞同：0
> 
> 时间：2012-11-15T01:11:47.747
> 
> 标签：opencv

我正在研究一个希望能够确定的项目，给定一个与目标图像最相似的图像库。在做了一些研究之后，我决定使用 OpenCV 来匹配描述符。我采用了一个简单的测试用例，它有两个库图像和一个目标图像，它是第一个库图像的一个小变体。我计算每个图像的关键点和描述符，然后将每个库图像的描述符与目标图像的描述符进行匹配。然后我遍历匹配以找到平均距离，计算出平均距离较小的那个将是最相似的那个。然而，这是行不通的——平均距离基本相同。

有什么建议么？

# xpages - 需要 xpages dojo 验证文本框

> ID：13390141
> 
> 赞同：0
> 
> 时间：2012-11-15T01:12:18.697
> 
> 标签：xpages, xpages-extlib

我的 xpage 中有 dojo 验证文本框，其中计算了所需的属性（动态计算），如下所示

```
var syn = getComponent("SynCboxGrp").getValue();
if (syn == "Yes")
{return true;
}else{
    return false;
} 
```

这里组件 SynCboxGrp 是单选按钮。根据单选按钮的值，文本框是必需的。但它不能正常工作。更改单选按钮值不会更改所需的行为。

感谢任何帮助

* * *

**更新**

感谢 stwissel、Per Henrik Lausten 和 Eric。我在必需的属性中只有这个 ssjs

```
<xe:djValidationTextBox id="UBOCAgent"                      value="#{dsRacDoc.UBOCAgent}"                       disableClientSideValidation="true">
<xe:this.required><![CDATA[#{javascript:var syn = getComponent("SynCboxGrp").getValue();

if (syn == "Yes")
{
    return true;
}else{
    return false;
}
}]]></xe:this.required>
</xe:djValidationTextBox> 
```

我还在我的单选按钮 onclick 事件上尝试了这个部分刷新代码`XSP.partialRefreshGet("#{id:UBOCAgent}");`

这仍然不会改变行为。它基于初始单选按钮值工作。不利的一面是，因为它是一个获取请求，它会从服务器更新字段内容。我还尝试了 Eric 的建议禁用客户端验证，但这没有帮助。

Eric，我也在尽可能地使用 CSJS，但在这种情况下，所需的属性只有 SSJS 选项。所以不知道如何尝试 CSJS。我应该尝试创建自己的 dojo 字段而不是使用 entension lib 中的一个吗？如果是这样，我不确定如何计算所需的属性。如果您可以帮助我提供一些示例代码，那将是很大的帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:54:20.607

You're doing a partialRefreshGet, which is updating the Dojo Validation Text Box. But you never post back the updated value from the radio, so the server-side value for the radio button is still the initial value. Consequently, required is still false.

Check the markup when required is true on the Dojo Validation Text Box, but the validation triggers client-side, so there should be an attribute in the markup that you can manipulate via CSJS, if that is your preferred route.

Do you have particular latency issues that you need to work around? Picking up on this and the other question you have about doing a lookup to a database on click of a button, you're hitting a few problems. I don't know how experienced you are in XPages development, but it's not an approach I would recommend without a good understanding of client-side output and server-side component trees. The initial page load of your XPage will also be slower and the size of the HTML passed to the browser will be larger, because of the amount of CSJS passed to the browser.

I would recommend using the in-built partial refresh except for situations where browser to server network is a significant issue, and only then falling back to coding your own partial refresh posting a subset of data. In my experience, it's easier and quicker to develop, easier to debug and more flexible.

For this particular scenario, regardless of whether you code the partial refresh yourself or use inbuilt functionality, one point I'm not certain of is this. That once you set validation on the Dojo Validation Text Box, that validation runs client-side and may impact any attempt to un-set the required property by posting to the server. I haven't tested, so can't be certain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:46:26.957

两件事之一：

1.  如前所述，要触发您的 SSJS 值更改，请确保部分（至少）刷新包含上述代码的元素；可以使用容器元素来完成。此外，检查您的字段的 disableClientSideValidation 参数是否已设置（所有属性视图）。
2.  将您的 SSJS 代码（仅返回是或其他情况的二进制评估，我假设否，值）转换为 CSJS

最近，在我当前项目的初步开发之后，我开始偏爱 CSJS 方法，以减少服务器端的回调；尤其是在我想要实现的所有组件的显示/渲染的情况下。如果你走这条路，请记住 dojo.byId("#{id:myControlsServerNameHere}").value （对于文本字段，请参阅下面的单选按钮值）结合设置[显示](https://developer.mozilla.org/en-US/docs/CSS/display)或[可见](https://developer.mozilla.org/en-US/docs/CSS/visibility)CSS 属性可能非常便利。正如文档所描述的，如果您希望它存在于页面上但不显示（出于格式化目的，也可以保留默认值），请使用可见性路线，否则显示属性。

我目前正在使用的无线电值的 CSJS 抓取如下：

```
var result=null;
for(i=0; i<document.forms[0].elements.length;i++){
    if(document.forms[0].elements[i].name=="#{id:serverNameOfRadioElement}"){
        if(document.forms[0].elements[i].checked == true){
            result=document.forms[0].elements[i].value;
            break;
        }
    }
}
//then handle your result, either with an if, or switch statement 
```

希望这可以帮助。如果您遇到更多问题，请回发更多代码以提供更大的图景。

# c# - 将 3 位数字转换为文本

> ID：13390143
> 
> 赞同：0
> 
> 时间：2012-11-15T01:12:34.780
> 
> 标签：c#

我已经完成了大部分工作，但对如何添加“二十多岁”感到困惑，我有所有的“一号”和“十几岁”，但它停在 119，因为我没有“二十多岁”。在静态字符串 ThreeDigit 中，我将其设置为执行三位数字。

```
{
class Program
{
    static string[] digitWords =
    { "zero", "one", "two", "three", "four",
        "five", "six", "seven", "eight", "nine",
        "ten", "eleven", "twelve", "thirteen", "fourteen",
        "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };

    static string[] tenWords =
    { "", "", "twenty", "thirty", "forty",
      "fifty", "sixty", "seventy", "eighty", "ninety" };

    static string[] hundredWords = { "", "One-hundred", "two-hundred", "three-hundred", "four-hundred", "five-hundred", "six-hundred", "seven-hundred", "eight-hundred", "nine-hundred"};

    static string TwoDigit(int num)
    {
        if (num < 0 || num > 1001) return "";
        if (num < 20) return digitWords[num];
        if (num % 10 == 0)
            return tenWords[num / 10];
        else
            return tenWords[num / 10] + "-" + digitWords[num % 10];
    }

    static string ThreeDigit(int num)
    {
        if (num % 100 == 0)
            return hundredWords[num / 100];
        else
            return hundredWords[num / 100] + "-" + digitWords[num % 100];
    }

    static void Main(string[] args)
    {
        for (int i = 0; i <= 19; i++)
            Console.WriteLine("{0}: {1}", i, TwoDigit(i));
        for (int i = 20; i <= 99; i +=7)
            Console.WriteLine("{0}: {1}", i, TwoDigit(i));
        for (int i = 100; i <= 1100; i ++)
            Console.WriteLine("{0}: {1}", i, ThreeDigit(i));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:15:23.830

这是一个很好的工作解决方案：http: [//www.blackbeltcoder.com/Articles/strings/converting-numbers-to-words](http://www.blackbeltcoder.com/Articles/strings/converting-numbers-to-words)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:04:16.847

尝试：

```
else
    return hundredWords[num / 100] + " and " + TwoDigit(num);
} 
```

# jquery - ASP.Net MVC WebService 不能与 JQuery 一起使用，可以在浏览器中使用

> ID：13390149
> 
> 赞同：0
> 
> 时间：2012-11-15T01:13:44.397
> 
> 标签：jquery, asp.net-mvc, web-services

今天，我编写了我的第一个 ASP MVC WebService（.Net 版本 4，Entity4.2）。这真的很简单，只是返回一个自定义 ItemChoice 对象的数组。当我直接从 IE 调用它时，它想下载 json 对象，当我从 FF 调用它时，我看到对象的 XML 版本。

我正在使用 VS 12 附带的 jquery 1.7.1 将 Web 服务集成到我在 localhost 上构建的页面中（开始）。

当我从 JQuery 调用服务时会发生什么，成功函数永远不会运行。但是，如果我将 getJSON 指向同一服务的本地副本，它就可以工作。查看 Charles Web Proxy，两者都返回并且似乎具有相同的返回。

代码如下所示：

```
<script type="text/javascript">
    $(document).ready(function() {
        $.getJSON('http://myserver/CECService/api/itemchoices',
            function (data, status) {
                $.each(data, function(key, val) {
                    $('<option />', {value:val.itemValue, text:val.displayText}).appendTo('#School');

                });//end each
            });//end get json
    });//end document.ready
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T04:32:07.293

您遇到了这个问题，因为您正在进行违反浏览器[同源](http://en.wikipedia.org/wiki/Same_origin_policy)安全策略的 ajax 调用。有关潜在解决方法的说明，请参阅[以下内容。](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

编辑：

另一种常用的方法是[JSONP](http://en.wikipedia.org/wiki/JSONP)。

# c# - 应用程序未完全关闭，不知道为什么

> ID：13390151
> 
> 赞同：0
> 
> 时间：2012-11-15T01:13:55.103
> 
> 标签：c#, winforms, multithreading, visual-studio-2010, visual-studio

我有一个像这样打开的应用程序：（Program.cs）

```
 Main MainForm = new Main();
        Application.Run(); 
```

如果用户未指定 /hide 选项，则程序显示如下：（Main.cs）

```
internal Main()
{
    InitializeComponent();
    this.Show();
} 
```

有时，如果文件不存在，程序需要立即关闭。所以我像这样关闭它：（Main.cs）

```
private void MainLoad(object sender, EventArgs e)
{
    if (!File.exist("FilePath")
        this.Close();
} 
```

在 FormClosed 上，我有这个：

```
Application.ExitThread(); 
```

这个destoy 几乎包含了应用程序中的所有内容，包括任务栏图标。但是，在 Visual Studio 上，程序仍然“运行”，直到我单击“停止调试”。任何人都知道为什么会这样？

目标：如果用户指定 /hide 参数，我想最小化启动程序（不显示 Flash 屏幕）。如果找不到某个文件，程序将自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:27:55.603

将此代码放在 Program Main 中。

```
if (!File.Exists("FilePath"))
        {
            return;
        } 
```

在您的表单加载中指定以下内容：

```
this.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:32:26.413

而不是`this.Close();`，尝试使用`Environment.Exit();`

# c - 在实践中 C 比 R 快多少？

> ID：13390152
> 
> 赞同：7
> 
> 时间：2012-11-15T01:13:58.730
> 
> 标签：c, r

我在 R 中编写了一个 Gibbs 采样器，并决定将其移植到 C 中，看看它是否会更快。我看过的很多页面都声称 C 将快 50 倍，但每次我使用它时，它只比 R 快五到六倍。我的问题是：这是可以预料的，还是我没有使用哪些技巧会使我的 C 代码比这快得多（比如使用矢量化如何加速 R 中的代码）？我基本上采用了代码并用 C 重写了它，用 for 循环替换了矩阵运算，并使所有变量指针。

另外，从 R 程序员的角度来看，有人知道 C 的良好资源吗？Matloff有一本名为*The Art of R Programming*的好书，但它似乎是从已经了解 C 的人的角度编写的。

此外，当我的 C 代码在 Windows 的标准 R GUI 中运行时，屏幕往往会冻结。它不会崩溃；一旦代码完成运行，它就会解冻，但它会阻止我在 GUI 中做任何其他事情。有人知道我怎么能避免这种情况吗？我正在使用 .C() 调用该函数

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T01:38:59.240

许多现有的帖子都有可以运行的*明确示例*，例如 Darren Wilkinson 在他的博客上有几篇帖子用不同的语言分析这个，后来甚至在不同的硬件上（例如，将他的高端笔记本电脑与他的上网本和 Raspberry Pi 进行比较）。他的一些帖子是

*   [最初（然后修订）的帖子](http://darrenjw.wordpress.com/2011/07/16/gibbs-sampler-in-various-languages-revisited/)
*   [另一个稍后的帖子](http://darrenjw.wordpress.com/2011/07/31/faster-gibbs-sampling-mcmc-from-within-r/)

在他的网站上还有更多——这些通常比较 C、Java、Python 等等。

[现在，我还使用Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)将它变成了一个版本——请参阅 [这篇博](http://dirk.eddelbuettel.com/blog/2011/07/14/#rcpp_gibbs_example)文。今年夏天，我们还在 useR 上使用了相同的示例来比较 Julia、Python 和 R/C++，因此您应该可以找到很多其他示例和参考资料。MCMC 被广泛使用，并且是加速的“容易选择”。

鉴于这些示例，请允许我补充一点，我不同意您之前收到的两个评论。速度*不会*一样，在这样的示例中很容易做得更好，而您的 C/C++ 技能将主要决定好多少。

最后，一个经常被忽视的方面是*RNG的速度*很重要。运行循环并添加东西很便宜 - 做“好”的平局不是，而且很多系统间的变化也来自于此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:17:37.027

关于 GUI 冻结，您可能需要时不时地`R_CheckUserInterrupt`打电话`R_ProcessEvents`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-12T17:11:01.977

我想说 C 做得好，比 R 快得多。

您可以尝试一些简单的收获：将编译器设置为优化以提高速度。使用 -march 标志编译。此外，如果您使用的是 VS，请确保您使用的是发布选项进行编译，而不是调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T01:59:08.643

您观察到的性能差异将取决于许多因素：您正在执行的操作类型、您如何编写 C 代码、您使用什么类型的编译器级优化、您的目标 CPU 架构等。

您可以编写基本的、草率的 C 语言，并获得可以正常运行和运行的东西。您还可以针对目标 CPU 的独特特性微调您的代码 - 可能调用专门的汇编指令 - 并从代码中榨取您所能获得的每一滴性能。您甚至可以编写运行速度明显*慢*于 R 版本的代码。C 为您提供了很大的灵活性。这里的限制因素是您希望投入多少时间来编写和优化 C 代码。

反之亦然（此处重复上一段，但交换“C”和“R”）。

我不是想听起来很滑稽，但你的问题真的没有一个直截了当的答案。判断您的 C 版本的速度有多快的唯一方法是两种方式编写代码并对其进行基准测试。

# c++ - 应该如何重载具有 const/non-const 参数的函数？

> ID：13390155
> 
> 赞同：6
> 
> 时间：2012-11-15T01:14:45.470
> 
> 标签：c++, c++11, overloading

我有以下代码：

```
// string specializations
void foo(const char *a, const char *b);
void foo(const char *a, const std::string &b);
void foo(const std::string &a, const char *b);
void foo(const std::string &a, const std::string &b);

// generic implementation
template<typename TA, typename TB>
void foo(TA a, TA b)
{...} 
```

问题是这个测试用例：

```
char test[] = "test";
foo("test", test); 
```

最终调用`foo`. 显然，我可以使用各种非`const`参数混合添加更多重载，但我想知道：是否有更好的重载方法，以便`foo`专门处理所有字符串`const`和非`const`字符串配对？一个不需要我希望我没有错过一些参数类型的排列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:53:45.167

感谢 Mooing Duck 的建议，这是我的解决方案：

```
// string specialization
void foo(const std::string &a, const std::string &b);

template<typename TA, typename TB>
typename std::enable_if<
    std::is_constructible<std::string, TA>::value &&
    std::is_constructible<std::string, TB>::value
>::type foo(TA a, TB b)
{
    foo(std::string(std::move(a)), std::string(std::move(b)));
}

// generic implementation
template<typename TA, typename TB>
typename std::enable_if<
    !std::is_constructible<std::string, TA>::value ||
    !std::is_constructible<std::string, TB>::value
>::type foo(TA a, TB b)
{...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:29:56.597

如果我正确理解您的目标，您可以这样做

```
template<typename T1,typename T2 >
void foo(T1, T2)
{
     static_assert(sizeof(T1) == 0,"Did not overload all foo's");
}

template<>
void foo<const char *a, const char *b>()
{
    ... Handle this case
}

... ect ect ect 
```

这样做的好处是您可以明确地处理您想要的每个实例，同时如果您错过了一个会生成编译错误。

# c# - 如何使用自己的字符表？

> ID：13390156
> 
> 赞同：0
> 
> 时间：2012-11-15T01:14:49.337
> 
> 标签：c#, winforms, character-encoding

所以我正在加载一个包含一些加密文本的文件，它使用自定义字符表，我如何从外部文件加载它或将字符表放入代码中？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:18:51.950

首先检查文件并计算行数，以便分配数组。您可以在这里只使用一个列表，但数组的性能要好得多，并且您有大量的项目，您必须循环很多（文件中的每个编码字符一次），所以我认为您应该使用数组代替.

```
 int lines = 0;
    try 
    {
         using (StreamReader sr = new StreamReader("Encoding.txt")) 
        {
            string line;
            while ((line = sr.ReadLine()) != null) 
            {
                lines++;   
            }
        }
    }
    catch (Exception e) 
    {
        // Let the user know what went wrong.
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    } 
```

现在我们要分配元组数组；

```
 Tuple<string, string> tuples = new Tuple<string, string>[lines]; 
```

之后，我们将再次循环文件，将每个键值对添加为元组。

```
 try 
    {
         using (StreamReader sr = new StreamReader("Encoding.txt")) 
        {
            string line;
            for (int i =0; i < lines; i++) 
            {
                line = sr.Readline();
                if (!line.startsWith('#')) //ignore comments
                {
                     string[] tokens = line.Split('='); //split for key and value
                     foreach(string token in tokens)
                           token.Trim(' '); // remove whitespaces

                    tuples[i].Item1 = tokens[0];
                    tuples[i].Item2 = tokens[1];
                }   
            }
        }
    }
    catch (Exception e) 
    {
        // Let the user know what went wrong.
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    } 
```

我已经给了你很多代码，尽管这可能需要一些修改才能工作。我没有在编译器中编写第二个循环，而且我懒得查找类似的东西`System.String.Trim`并确保我正确使用它。我会把这些东西留给你。这具有做到这一点的核心逻辑。如果您想改用列表，请将 for 循环内的逻辑移动到我计算行数的 while 循环中。

解码你正在阅读的文件，你必须遍历这个数组并比较键或值，直到你有一个匹配。

另一件事-您的元组数组将有一些空索引（该数组的长度是文件`lines`中实际`lines - comments + blankLines`存在的）。当您尝试匹配字符时，您需要进行一些检查以确保您没有访问这些索引。或者，您可以增强文件读取，使其不计算空行或注释，或从您读取的文件中删除这些行。最好的解决方案是增强文件读取，但这也是最多的工作。

# java - 我应该在哪里存储图像（和其他文件）以供我的 Java 程序使用？

> ID：13390157
> 
> 赞同：4
> 
> 时间：2012-11-15T01:14:51.957
> 
> 标签：java, image, imageicon

我正在尝试创建一个（非常）简单的 GUI 程序，它允许用户从不同的单选按钮中进行选择以在 JLabel 中显示图像。我正在使用的代码是这样的：

```
 JLabel imageLabel = new JLabel();
 imageLabel.setIcon(new ImageIcon("images/Dog")); 
```

我的问题是，我将这个“图像”文件夹放在*哪里？*当我把它放在 src*和*bin 文件夹中时，图像仍然没有加载。我最终尝试了以下代码，当我使用 bin 文件夹时该代码有效：

```
 imageLabel.setIcon(new ImageIcon(getClass().getResource("images/Dog"))); 
```

问题是，据我了解 bin 文件夹不应该用于这些文件？另外，我很确定我放在那里的图像文件夹已被删除（这是不使用它的一个很好的理由......）。

我正在将目录发送给我的教授，所以我不希望文件路径专门在我的计算机上工作。

PS我正在使用Eclipse，如果这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:16:56.883

只需将其放在项目的文件夹中即可。例子：

![（示例图片）](../Images/5b79d7dad8fc2e216926835438c5fbf4.png)

你会把你的`images`文件夹放在我的“ `del_icon`”图像所在的位置。就在文件夹里。

# mongodb - MongoDB 是否重用已删除的空间？

> ID：13390160
> 
> 赞同：17
> 
> 时间：2012-11-15T01:15:14.960
> 
> 标签：mongodb

首先，我知道这个问题：

[自动压缩mongodb中删除的空间？](https://stackoverflow.com/questions/4555938/auto-compact-the-deleted-space-in-mongodb)

我的问题不是关于缩小数据库文件大小，而是更多关于重用已删除空间的问题。假设我在一个集合中有 100K 文档，然后我删除了其中的 50K。Mongo 会重复使用已删除文档释放的数据文件中的空间吗？还是他们只是“标记”为已删除？

我不太关心磁盘上文件的实际大小，它更多的是关于“它只是不断增长”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T01:58:23.197

**更新（2015 年 3 月）：**从 3.0 版本开始， MongoDB 中提供了多个[存储引擎。](http://docs.mongodb.org/manual/faq/storage/#what-is-a-storage-engine)这个答案适用于 MMAP 存储引擎（在 MongoDB 3.0 中仍然是默认的），其他引擎（例如 WiredTiger）的答案是完全不同的，很可能是可调和可调的。因此，如果您使用其他引擎，请阅读该存储引擎的相关文档以确定您的空间重用默认值和选项。

使用 MMAP 存储引擎，当文档被删除时，留下的空间被放入空闲列表中。但是，要使用该空间，稍后需要插入类似大小的文档，并且 MongoDB 需要在特定时间范围内为该文档找到合适的空间（一旦查看列表超时，它将只是追加）否则空间再利用不会经常发生。此删除是在数据文件中完成的，因此这里不会发生磁盘空间回收——所有这些都是在现有数据文件内部完成的。

如果您随后进行了[修复](http://docs.mongodb.org/manual/reference/method/db.repairDatabase/)，或从头开始重新[同步辅助服务器，则数据文件将被重写并且磁盘上的空间将被回收（文档上的任何填充也将被删除）。](http://docs.mongodb.org/manual/administration/replica-sets/#resyncing-a-member-of-a-replica-set)这是您将在磁盘上看到实际空间回收的地方。对于任何其他操作（包括[紧凑型](http://docs.mongodb.org/manual/reference/command/compact/)），磁盘使用量不会改变，甚至可能会增加。

在 2.2+ 中，您现在可以使用[collMod 命令](http://docs.mongodb.org/manual/reference/command/collMod/)和[usePowersOf2Sizes](http://docs.mongodb.org/manual/reference/command/collMod/#usePowerOf2Sizes)选项来使删除空间的重复使用更有可能（请注意，这是 2.6+ 中的[默认设置](http://docs.mongodb.org/manual/release-notes/2.6/#storage)）。这意味着文档的初始空间分配效率稍低（例如 400 字节文档为 512 字节），但意味着当插入新文档时，它更有可能重新使用该空间。如果您要删除（或增长并因此移动）大量文档，那么从长远来看，这将更有效率。

对于任何感兴趣的人，其中一位编写了大量存储代码的人 ( [Mathias Stearn](https://github.com/RedBeard0531) ) 对存储内部进行了精彩的介绍，可以在[此处找到](https://www.youtube.com/watch?v=X_YKRnbpRF0)

# hibernate - 继承的实体可以有自己的唯一标识符吗？

> ID：13390165
> 
> 赞同：0
> 
> 时间：2012-11-15T01:15:51.433
> 
> 标签：hibernate, inheritance, entity, uniqueidentifier, identifier

那么一个简单的问题：继承父类的子类能不能不仅有父类的ID，也有自己的ID？

例如，我们有一个实体类 User 和扩展它的子类 Patient。用户拥有`idUser`并且患者不仅可以拥有`idUser`而且可以`idPatient`拥有自己的唯一标识符吗？还有另一个标识符有用吗？

嗯，也许我应该提一下，这都是在将这些实体与 hibernate 映射的上下文中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:26:53.780

不。

Hibernate 使用该`@Id`字段来表示身份，而就 hibernate 而言，只能是其中之一。

您可以通过注释查看使用复合 id 字段[`@EmbeddedId`](http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html)，它允许具有多个“id”字段的自定义类作为键。

# javascript - JavaScript/HTML/CSS - 一页上的多个表单

> ID：13390166
> 
> 赞同：2
> 
> 时间：2012-11-15T01:16:18.403
> 
> 标签：javascript

我正在尝试用 JavaScript、HTML 和 CSS 创建一个简单的网页。网页生成 5 个 div 元素。每个 div 元素包括一个随机数、文本输入和提交按钮。我下面的代码就是这样做的。

然后用户应该能够在文本输入框中输入随机数并单击提交按钮。脚本应该检查他们是否输入了正确的答案。

我不确定这是否可能？我了解如何为页面上的单个表单编写代码，但此示例在单个页面上使用 5 个动态生成的表单。任何帮助将不胜感激。

```
 <html>
    <head>

    <style type="text/css">
       #test {
           width:250px;
            padding:10px;
            border:5px solid gray;
            margin:10px;

        }
     </style>

    </head>

    <body>
    <script>

    for (i = 0; i < 5; i++) {

        document.write('<div id="test">');
        var ranNum = Math.floor(Math.random()*10);
        document.write(ranNum);
        document.write("<p>Enter the number above:</p>");
        document.write("<form id=\"form1\" name=\"form1\" method=\"post\" action=\"\"><input type=\"text\" name=\"answer\" id=\"answer\" /><input type=\"submit\" name=\"button\" id=\"button\" value=\"Submit\" /></form>");
        document.write('</div>');
    }

    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:11:34.593

您甚至不与服务器交互来检查它是否是正确的答案。所以，是的，你可以很容易地做到这一点。`#id`使用jquery，将这些数字属性设置为全局对象，以您的输入命名的属性，因此当用户单击时，只需将输入的值与具有相同名称的全局对象的属性进行比较。

例如：

```
window.myObject = {}

myObject.div1 = // your code for random number
myObject.div2 = // again, code for random number 
```

依此类推，最好将您的随机数代码放入一个函数并为每个属性调用它。

然后只需将 div 值设置为属性：

```
$("div.div1").append("<span class='value'>" + myObject.div1 + "</span>"); 
```

或者甚至您可以创建一个循环来执行此操作，这样您就不需要为所有 div 键入它。

之后，测试您的输入：

```
$("div.div1").find("submit").click(function(){
    // here you collect the data from your form, lazy to type
    // and test it for equality with coresponding myObject.div1 
    // or with the value in <span class="value>
    //e.g.
    if ($(this).parent().find(".mytextinput").val() == $(this).parent().find("span.value").val())
        { //do something} else {//do something else }
}); 
```

当然，这假设您可以使用 jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:16:17.960

正如评论中所指出的，确保 id 始终是唯一的。我不会将 ajax 用于这么简单的事情，您可以检查客户端的值。请参阅下面的工作解决方案。

```
for (i = 0; i < 5; i++) {
    document.write('<div id="div-' + i + '">');
    var ranNum = Math.floor(Math.random()*10);
    document.write(ranNum);
    document.write("<p>Enter the number above:</p>");
    document.write("<form id=\"form-" + i + "\" name=\"form-" + i + "\"><input type=\"text\" name=\"answer\" id=\"answer-" + i + "\" /><input type=\"submit\" name=\"button\" id=\"button-" + i + "\" value=\"Submit\" onclick=\"checkAnswer(this); return false;\"/></form>");
    document.write('</div>');
}
function checkAnswer(element) {
    var thisAnswer=element.form.parentElement.textContent.substring(0,1);
    var answerGiven=element.form.children[0].value;
    if (thisAnswer==answerGiven) {
        alert("correct!");
    } else {
        alert("wrong!");
    }
} 
```

# ruby-on-rails - 访问 fields_for 内的子对象（Rails 2.3.11）

> ID：13390171
> 
> 赞同：0
> 
> 时间：2012-11-15T01:16:53.617
> 
> 标签：ruby-on-rails, ruby

我的编辑操作中有一个嵌套表单，用于名为 CustomOrder 的类。CustomOrder 接受 nested_attributes_for CustomSizes 属于 Size 和 Style 类。

现在，我可以检索具有相应 style_id、size_id 和数量的记录。

```
- f.fields_for :custom_sizes do |b|
%t
  %td
    = b.text_field :style_id
  %td
    = b.text_field :size_id
      %td
    = b.text_field :quantity 
```

不过，我真正想做的是在此处向用户显示相应的 Style 和 Size 对象，并隐藏 text_fields。像这样的东西：

```
- f.fields_for :custom_sizes do |b, custom_size|
%tr
  %td
    = custom_size.style.name
  %td
    = custom_size.size.name
  %td
    = b.text_field :quantity 
```

我有什么方法可以在 fields_for 循环期间访问子对象吗？

# sas - 在 SAS 中读取带有错误位置的分隔符的文本文件

> ID：13390176
> 
> 赞同：3
> 
> 时间：2012-11-15T01:17:31.040
> 
> 标签：sas

我正在将一个 .txt 文件读入 SAS，它使用“|” 作为分隔符。问题是有一列使用“|” 作为一个单词分隔符，而不是像分隔符一样，这​​需要在一列中。

例如，txt 文件如下所示：

```
apple|fruit|Healthy|choices|of|food|12|2012|chart 
```

需要在 SAS 数据集中看起来像这样：

```
apple | fruit | Healthy choices of Food | 12 | 2012 | chart 
```

如何消除“|” 在“健康的食物选择”之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:22:54.757

我认为这会做你想要的：

```
data tmp1;
  length tmp $100;
  input tmp $;
  cards;
apple|fruit|Healthy|choices|of|food|12|2012|chart
apple|fruit|Healthy|choices|of|food|and|lots|of|other|stuff|12|2012|chart
;
run;

data tmp2;
  set tmp1;
  num_delims=length(tmp)-length(compress(tmp,"|"));
  expected_delims=5;
  extra_delims=num_delims-expected_delims;
  length new_var $100;
  i=1;
  do while(scan(tmp,i,"|") ne "");
    if i<=2 or (extra_delims+2)<i<=num_delims then new_var=trim(new_var)||scan(tmp,i,"|")||"|";
    else new_var=trim(new_var)||scan(tmp,i,"|")||"#";
    i+1;
  end;
  new_var=left(tranwrd(new_var,"#"," "));
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:11:16.100

稍微扩展一下 Itzy 的答案，这是另一种可能的解决方案：

```
data want;
   /* Define variables */
   attrib item    length=$10 label='Item';
   attrib class   length=$10 label='Family';
   attrib desc    length=$80 label='Item Description';
   attrib count   length=8   label='Some number';
   attrib year    length=$4  label='Year';
   attrib somevar length=$10 label='Some variable';

   length countc $8; /* A temp variable */

   infile 'c:\temp\delimited_temp.txt' lrecl=1000 truncover;
   input;
   item    = scan(_infile_,1,'|','mo');
   class   = scan(_infile_,2,'|','mo');
   countc  = scan(_infile_,-3,'|','mo');  /* Temp var for numeric field */
   count   = inputn(countc,'8.');         /* Re-read the numeric field */
   year    = scan(_infile_,-2,'|','mo');
   somevar = scan(_infile_,-1,'|','mo');

   desc = tranwrd(
             substr(_infile_
                 ,length(item)+length(class)+3
                 ,length(_infile_) 
                    - ( length(item)+length(class)+length(countc)
                       +length(year)+length(somevar)+5))
            ,'|',' ');
   drop countc;
run; 
```

在这种情况下，关键是直接读取您的文件并自己处理分隔符。这可能很棘手，并且要求您的数据文件与描述的完全相同。更好的解决方案是返回给提供此数据的人，并要求他们以更合适的形式将其提供给您。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:05:21.563

这不是特别优雅，但它会起作用：

```
data tmp;
 input tmp $50.;
 cards;
apple|fruit|Healthy|choices|of|food|12|2012|chart
;
run;

data tmp;
 set tmp;
 var1 = scan(tmp,1,'|');
 var2 = scan(tmp,2,'|');
 var4 = scan(tmp,-3,'|');
 var5 = scan(tmp,-2,'|');
 var6 = scan(tmp,-1,'|');

 var3 = tranwrd(tmp,trim(var1)||"|"||trim(var2),"");
 var3 = tranwrd(var3,trim(var4)||"|"||trim(var5)||"|"||trim(var6),"");
 var3 = tranwrd(var3,"|"," ");
 run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:14:41.630

另一种可能的解决方法。

```
data tmp;
infile '/path/to/textfile'; 
input tmp :$100.;
array varlst (*) $30 v1-v6;
a=countw(tmp,'|');
do i=1 to dim(varlst);
 if i<=2 then
   varlst(i) = scan(tmp,i,'|');
 else if i>=4 then
   varlst(i) = scan(tmp,a-(dim(varlst)-i),'|');
 else do j=3 to a-(dim(varlst)-i)-1;
   varlst(i)=catx(' ', varlst(i),scan(tmp,j,'|'));
   end;
 end;
drop tmp a i j; 
run; 
```

# android - 如何保存用户输入并在列表视图中检索？

> ID：13390178
> 
> 赞同：3
> 
> 时间：2012-11-15T01:17:30.767
> 
> 标签：android, android-listview, android-edittext, favorites

我想在`EditText`单击“添加到收藏夹”按钮时保存用户输入（字符串类型）。并希望在`ListView`用户选择“收藏夹”选项卡时显示保存的输入。我一般有四个标签。我想将输入保存在一个选项卡中，而不是收藏夹选项卡中。我怎样才能做到这一点？我正在使用日食。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T07:15:46.983

用于`SharedPreferences`保存和检索小块数据，对于大块数据，请考虑将其保存到文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T07:20:46.230

好吧，您总是可以创建一个 SQLite 数据库，并在一个选项卡中执行 INSERT 操作，并在收藏夹选项卡中从数据库中执行 SELECT。

例如，如果您不需要将该信息保存在数据库中，则可以创建超级全局变量。例如，您可以通过创建一个名为“Constants”的新类并在其中声明公共静态变量来做到这一点。这样，您可以从应用程序内的任何位置访问它们

# azure - 如何在 Windows Azure 虚拟机上强制更改 ip？

> ID：13390179
> 
> 赞同：4
> 
> 时间：2012-11-15T01:18:08.447
> 
> 标签：azure, ip, virtual

我想知道如何在 Windows Azure 机器上强制更改 IP？通话`ipconfig -renew`似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-19T20:48:08.090

关闭机器后，您将获得一个新 IP。

例如，单击门户中的关闭，您应该会看到以下消息：

> 如果继续，分配给此虚拟机的 IP 地址将被释放。您确定要关闭虚拟机 [名称] 吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T06:43:39.250

首先，您真的不需要更改任何 Windows Azure 虚拟机的 IP 地址。我将尝试解释更多有关 Windows Azure IP 地址详细信息的信息。

Windows Azure 机器有一个固定的内部 IP 地址，Windows Azure 服务有一个公开的虚拟 IP 地址。内部 IP 地址特定于每个虚拟机（云服务实例或虚拟机实例），它在配置 VM 实例时分配，并在虚拟机实例的生命周期内保持不变。

使用 Windows Azure 云服务实例 (PaaS)，您无法控制虚拟机 IP 地址。但是，如果您创建 Windows Azure 虚拟机 (IaaS)，您可以使用 Windows Azure 虚拟网络将所有虚拟机放在一个 IP 地址/子网组中，如此[处](https://www.windowsazure.com/en-us/manage/services/networking/create-a-virtual-network/)所述。这可能是也可能不是您的要求，但这是 IaaS VM 中的一种方式，您可以将 VM 与您的虚拟网络放在一起。

![在此处输入图像描述](../Images/28b3e98e51f4e33a07ed960729b96bcf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T19:46:58.777

删除部署或云服务，等待大约 10 分钟，然后重新创建。这将为新的云服务分配一个新的公共 IP 地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T09:42:25.223

**如果您使用资源管理器，则使用**Powershell 方式：****

 **```
Get-AzureRmVM | Stop-AzureRmVM -Force
Get-AzureRmVM | Start-AzureRmVM 
```

或对于经典 VM：

```
Get-AzureVM | Stop-AzureVM -Force
Get-AzureVM | Start-AzureVM 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-11-26T18:57:03.900

按照[https://azure.microsoft.com/en-us/documentation/articles/virtual-networks-reserved-private-ip/上的说明进行操作](https://azure.microsoft.com/en-us/documentation/articles/virtual-networks-reserved-private-ip/)

你需要重启服务器**

# git - git push origin develop 什么都不做

> ID：13390180
> 
> 赞同：5
> 
> 时间：2012-11-15T01:18:11.267
> 
> 标签：git

我是使用 git 的新手。我试过了`git push origin develop`，终端说一切都是最新的。我试过`git diff --stat origin/develop`了，终端显示：

```
 tpl/view/css/layout.css           |    7 ++++---
 tpl/view/ctrl.time-sheet-item.tpl |   10 +++++-----
 tpl/view/ctrl.time-sheet.tpl      |    7 +++----
 3 files changed, 12 insertions(+), 12 deletions(-) 
```

所以对我来说，看起来应该还有要推送的文件。我去我朋友的电脑上做了一个`git pull origin develop`，它没有收到我上面提到的三个文件的新更改。如何将我的更改推送到开发分支并在另一台计算机上接收它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T01:41:28.220

根据您的评论，问题（可能）是您反复分支。（比如 bar/develop、foo/bar/develop/blah/foo/bar/develop 等）。

你的变基让你失望的原因是你不能变基到一个不包含你分支的初始提交的分支（致命：需要一个修订版）

请执行下列操作：

```
 git status 
```

这将打印您当前的分支。（让我们假设它的 blah/foo/bar/develop）

从这里你必须选择。

选项 1) 更简单，如果中间步骤之一已更改并且您希望从中获得一些东西，则可能无法正常工作：

```
 git checkout develop
 git fetch
 git rebase origin/develop
 git merge origin/blah/foo/bar/develop 
```

选项 2) 可行，但可能非常耗时

```
 git fetch
 git rebase origin/foo/bar/develop
 git push origin foo/bar/develop
 git checkout foo/bar/develop
 git rebase origin/bar/develop
 git push origin bar/develop
 git checkout bar/develop
 git rebase origin/develop 
```

我可能会尝试选项 1，如果选项 1 不起作用，则只回退到选项 2 在任何一种情况下，如果有的话，解决合并冲突，你就完成了：

```
 git commit -a
 git push origin develop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:26:21.323

1.  您应该执行“git add file1 file2 ...”来添加您的更改
2.  您应该执行“git commit”以将更改提交到本地 git 存储库
3.  然后您可以将您所做的事情推送到远程存储库。

# java - 将 HTML 中的表格转换为图像

> ID：13390185
> 
> 赞同：1
> 
> 时间：2012-11-15T01:19:00.097
> 
> 标签：java, html

是否可以将 HTML 页面内的表格转换为图像？是的，这是针对时事通讯的。到目前为止，我已经使用“div”元素构建的 HTML 进行了尝试，但在大多数浏览器/电子邮件客户端中，它们并没有达到预期的效果。然后我尝试将它们全部更改为基本的 HTML 元素（“table”、“td”、“tr”）。然而，一些邮件客户端似乎有问题。

所以我想尝试将每个表构建为图像的可能性。我的代码生成器是一个 Java 批处理程序。从数据库中获取表的数据并构建页面，我将其作为电子邮件发送给用户。之前有一篇类似主题的帖子[使用 Java 将 html 表转换为图像？](https://stackoverflow.com/questions/9628302/converting-html-table-to-image-with-java). 但似乎提问者方面没有进一步的更新。

我试图实现的 HTML 页面看起来像：http: [//i.imgur.com/EOidl.png ?1](https://i.imgur.com/EOidl.png?1)

我正在尝试将红色的图像制作为图像并将它们制作为链接。每个块都有不同的 URL。在每个红色块内，都会有多个 html 子元素，例如图像、文本..

这甚至可能吗？

# javascript - 如何将变量从对象获取到另一个对象？

> ID：13390186
> 
> 赞同：-1
> 
> 时间：2012-11-15T01:19:04.887
> 
> 标签：javascript, jquery, variables, object, properties

```
var options = {
    properties: 'someValue'
};

var moved = {
    init:function() {
        console.log(properties) // get propeties from options object
    }
}; 
```

如何在移动对象中使用选项对象属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:20:16.703

该属性是通过其对象获得的：

```
console.log( options.properties ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:20:23.677

您需要参考选项对象

```
var moved = {
    init:function() {
        console.log(options.properties) // get propeties from options object
    }
}; 
```

# javascript - 使用 POST 请求的 AJAX 应用程序在 Internet Explorer 中是否总是失败？

> ID：13390189
> 
> 赞同：9
> 
> 时间：2012-11-15T01:19:11.933
> 
> 标签：javascript, ajax, internet-explorer, post

我最近发现，使用 Internet Explorer 运行我的应用程序的用户出现间歇性故障的问题是由于 Internet Explorer 中的错误造成的。该错误位于 HTTP 堆栈中，应该会影响所有使用来自 IE 的 POST 请求的应用程序。结果是失败的特征是请求似乎挂起大约 5 分钟（取决于服务器类型和配置），然后从服务器端失败。服务器放弃后，浏览器应用程序将在 post 请求中出错。我将在下面详细解释 IE 错误。

据我所知，任何使用 XMLHttpRequest 向服务器发送 POST 请求的应用程序都会发生这种情况，如果请求是在错误的时间发送的。我编写了一个示例程序，试图在这些时间发送 POSTS。它尝试在服务器关闭连接的精确时刻向服务器发送连续的 POST。间隔来自服务器发送的 Keep-Alive 标头。

我发现当从 IE 运行到具有一点延迟的服务器时（即不在同一个 LAN 上），问题仅在几次 POST 后出现。发生这种情况时，IE 会锁定得很厉害，以至于必须强制关闭。滴答作响的时钟表明浏览器仍在响应。

您可以通过浏览以下网址进行尝试： http: [//pubdev.hitech.com/test.post.php](http://pubdev.hitech.com/test.post.php)。**请注意，当您运行它时，您在任何 IE 会话中都没有任何重要的未保存信息，因为我发现它会使 IE 崩溃。**

完整的源代码可以在以下位置检索： http: [//pubdev.hitech.com/test.post.php.txt](http://pubdev.hitech.com/test.post.php.txt)。您可以在任何具有 php 并配置为持久连接的服务器上运行它。

我的问题是：

1.  其他人在这个问题上的经验是什么？

2.  是否有解决此问题的已知策略（“使用其他浏览器”除外）？

3.  Microsoft 是否有比我找到的文章更好的信息（见下文）？

问题是 Web 浏览器和服务器默认使用 RFC 2616 第 8.1 节中所述的持久连接（参见[http://www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt)）。这对于性能非常重要——尤其是对于 AJAX 应用程序——并且不应该被禁用。然而，有一个小的时间漏洞，浏览器可能会在服务器决定连接空闲并决定关闭它的同时开始在先前使用的连接上发送 POST。结果是浏览器的 HTTP 堆栈将收到一个套接字错误，因为它正在使用一个关闭的套接字。RFC 2616 第 8.1.4 节预见了这种情况，并指出，“......客户端、服务器和代理必须能够从异步关闭事件中恢复。客户端软件应该重新打开传输连接并重新传输中止的请求序列而无需用户交互……”

发生这种情况时， Internet Explorer*会*重新发送 POST，但它会破坏请求。它发送 POST 标头，包括发布的数据的 Content-Length，但它不发送数据。这是一个不正确的请求，服务器将等待一段未指定的时间来获取承诺的数据，然后再因错误导致请求失败。我已经能够使用模拟 HTTP 服务器的 C 程序在 100% 的情况下演示此失败，该服务器会关闭传入 POST 请求的套接字而不发送响应。

微软似乎在 [http://support.microsoft.com/kb/895954](http://support.microsoft.com/kb/895954)中承认了这一失败。他们说它会影响 IE 版本 6 到 9。它为这个问题提供了一个修补程序，自 IE 7 以来的所有版本的 IE 都附带了该修补程序。由于以下原因，该修补程序似乎并不令人满意：

1.  除非您使用 regedit 将名为 FEATURE_SKIP_POST_RETRY_ON_INTERNETWRITEFILE_KB895954 的键添加到注册表，否则它不会启用。这不是我希望我的用户必须做的事情。

2.  该修补程序实际上并不能修复损坏的 POST。相反，如果套接字按照 RFC 的预期关闭，它会立即出错而不会尝试重新发送 POST。应用程序仍然失败——只是失败得更快。

以下示例是一个自包含的 php 程序，用于演示该错误。它尝试在服务器关闭连接的精确时刻向服务器发送连续的 POST。间隔来自服务器发送的 Keep-Alive 标头。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-14T21:29:11.587

我们经常在 IE 中遇到这个问题。没有好的解决办法。唯一能保证解决问题的办法是确保web服务器的keepalive超时时间高于浏览器的keepalive超时时间（IE默认是60s）。任何将 Web 服务器设置为较低值的情况都可能导致 IE 尝试重用连接并发送由于套接字已关闭而被 TCP RST 拒绝的请求。如果 web 服务器的 keepalive 超时值高于 IE 的 keepalive 超时值，则 IE 对连接的重用确保套接字不会关闭。对于高延迟连接，您必须考虑延迟时间，因为在传输中花费的时间可能是一个问题。

但是请记住，增加服务器上的 keepalive 意味着空闲连接使用服务器套接字的时间要长得多。因此，您可能需要调整服务器大小以处理大量不活动的空闲连接。这可能是一个问题，因为它可能会导致服务器无法处理的负载激增。

另一件事要记住。您注意到 RFC 部分 8.1.4 声明：“...客户端、服务器和代理必须能够从异步关闭事件中恢复。客户端软件应该重新打开传输连接并重新传输中止的请求序列而无需用户交互。. 。”

你忘记了一个非常重要的部分。全文如下： 只要请求序列是幂等的，客户端软件应该重新打开传输连接并重新传输中止的请求序列而无需用户交互（参见第 9.1.2 节）。非幂等方法或序列不得自动重试，尽管用户代理可以为人工操作员提供重试请求的选择。具有应用程序语义理解的用户代理软件的确认可以替代用户确认。如果第二个请求序列失败，则不应重复自动重试

HTTP POST 是 9.1.2 定义的非幂等的。因此，根据 RFC，注册表黑客的行为实际上在技术上是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:52:32.407

不，通常 POST 在 IE 中工作。这可能是一个问题，你在说什么，但这不是一个大问题，值得发这么大的帖子。

当您发出 POST ajax 请求时，要确保涵盖所有浏览器不一致，只需使用 jquery。

还有一件事：没有人会告诉你“使用另一个浏览器”，因为 IE 被广泛使用并且需要得到照顾（嗯，除了 IE6 和某些，甚至可能是一些更新的版本）

所以，POST**必须**在 IE 中工作，但为了让自己免受意外错误行为的影响，使用 jquery 并且你可以睡得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:44:26.877

我从来没有遇到过这个问题。我们的客户大多运行 IE6。

我怀疑您将保持活动计时器配置的时间过长。大多数人将其配置为低于 1 秒，因为持久连接仅用于加速页面加载而不是服务 Ajax 调用。

如果您的 keep-alive 配置时间过长，您将面临比 IE 崩溃更严重的问题 - 您的服务器将用完文件描述符来打开套接字！*

* 注意：*顺便说一下，打开和不关闭与 HTTP 服务器的连接是众所周知的 DOS 攻击，它试图强制服务器达到其最大打开套接字限制。这就是为什么大多数服务器管理员还配置连接超时以避免套接字打开时间过长。*

# jquery - 无法让主题 b 或 c 在电话间隙应用程序中工作

> ID：13390190
> 
> 赞同：1
> 
> 时间：2012-11-15T01:19:17.230
> 
> 标签：jquery, cordova

这是我在 Xcode 电话间隙投影中使用的真正简单的 index.html ......我似乎只能让黑色应用栏框架工作......而不是主题 b 和 dc 等......正在尝试使用其他主题来比较差异。

```
 <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery Mobile: Theme Download</title>
    <!-- link rel="stylesheet" href="themes/retire-ipad.min.css" / -->
    <link rel="stylesheet" href="css/jquery.mobile-1.0.1.min.css" />
    <script t type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script t type="text/javascript" src="js/jquery.mobile-1.0.1.min.js"></script>
        <!-- from template -->
        <script type="text/javascript" src="cordova-2.1.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
            </script>

</head>
<body>

    <div data-role="page" data-theme="b"  data-content-theme="b">

        <div data-role="header">
            <a href="#" data-rel="back"  data-icon="arrow-l" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Back</a>
           <h1>Page Title</h1>
            <a href="../../" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
        </div><!-- /header -->

        <div data-role="content">
            <p>Page content goes here.</p>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->

</body> 
```

是查询的版本还是其他的？

-T

# iphone - 如何在我的应用程序最小化之前捕获事件？

> ID：13390191
> 
> 赞同：2
> 
> 时间：2012-11-15T01:19:17.953
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

当通过单击主页按钮最小化应用程序时，我需要关闭一些我正在使用的资源。

注意，我不想拦截 Home 键，我知道这是 Apple 不允许的

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T01:22:59.667

`- (void)applicationDidEnterBackground:(UIApplication *)application`使用appdelegate 类中的委托方法。每当用户点击主页按钮时，都会调用此方法。有关更多详细信息，[请查看苹果文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground:)`applicationWillResignActive:`如果您想检测来电或短信以及应用程序最小化，您可以使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:37:31.927

你想看看`UIApplicationDelegate`（[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)）。具体来说，`applicationWillResignActive`应该`applicationDidEnterBackground`是你想要的。

从 Apple 文档中，[这](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW35)也通过示例 - 应用程序状态和多任务处理更详细地说明了这一点。

# java - 面部检测不适用于前置摄像头

> ID：13390193
> 
> 赞同：10
> 
> 时间：2012-11-15T01:19:38.473
> 
> 标签：java, android, face-detection, face-recognition

所以基本上，我有这个代码，

```
 if(mCamera.getParameters().getMaxNumDetectedFaces()==0)
        {
            System.out.println("Face detection not avaliable");
        }
        else
        {
            System.out.println("Max faces: " + Integer.toString(mCamera.getParameters().getMaxNumDetectedFaces()));
        }

        mCamera.setFaceDetectionListener(new FaceDetectionListener() {

            @Override
            public void onFaceDetection(Face[] faces, Camera camera) {
                // TODO Auto-generated method stub
                System.out.println("Face detection callback called." + Integer.toString(faces.length));

            }

        }); 
```

调用后`mCamera.startFaceDetection();`，回调被调用，一切正常。但是，如果我更换相机，相同的代码会导致回调永远不会被调用。,`getMaxNumDetectedFaces`两个摄像头都返回 35，所以我假设前置摄像头支持它。我可以来回更换摄像头，每次都调用这个代码，它适用于后置摄像头，但不适用于前置摄像头。

还有什么我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T18:13:10.830

是否有可能相机的质量不工作（前一个，对吗？）不够准确，无法进行面部检测？相机的图像可能过于嘈杂，人脸检测器无法正常工作。还有许多其他变量可能会阻碍这一点。

也在搜索前置摄像头，看起来前置摄像头的点可能是镜像的。这在：http: [//developer.android.com/reference/android/hardware/Camera.Face.html](http://developer.android.com/reference/android/hardware/Camera.Face.html)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:40:17.173

有没有办法检查相机是否被读取？Java 在注册网络摄像头等方面一直存在一些问题......也许尝试确保您可以使用网络摄像头看到图像。

顺便说一句，如果您需要任何进一步的帮助，我们将需要更多地了解代码。图书馆等……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T06:39:02.280

此代码将返回您的前置摄像头的 id，对于其他人您可以更改 camera.CameraInfo：

```
 private int findFrontFacingCamera() {
    int cameraId = -1;
    // Search for the front facing camera
    int numberOfCameras = Camera.getNumberOfCameras();
    for (int i = 0; i < numberOfCameras; i++) {
        Camera.CameraInfo info = new Camera.CameraInfo();
        Camera.getCameraInfo(i, info);
        if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {

            Log.d("FaceDetector", "Camera found");
            cameraId = i;
            break;
        }
    }
    return cameraId;
} 
```

我有在我的 Gallaxy 平板电脑上工作的代码，但它不会调用拍摄照片，因此不会调用其他设备中的人脸检测，所以在搜索了一段时间后，我发现这个解决方案有效。我在调用 takePicture 的类中添加了以下代码：

```
 camera.startPreview(); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-07-26T11:46:57.027

您可以使用网络[摄像](https://github.com/sarxos/webcam-capture)头从网络摄像头捕获图像。它会自动检测网络摄像头，因此无需额外配置网络摄像头。它还一次支持多个网络摄像头。

# c++ - C++ 不能调用某些函数

> ID：13390200
> 
> 赞同：1
> 
> 时间：2012-11-15T01:20:28.237
> 
> 标签：c++, function, call

我确信有一个简单的解释，但我不能在其他一些函数下面调用函数。

```
int methodOne() {
    std::cout << "Method 1";
    methodTwo(); //Problem is here. I cannot call methodTwo()
    return 0;
}

int methodTwo() {
    std::cout << "Method 2";
    return 0;
}

int main() {
    methodOne();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T01:22:25.343

```
int methodTwo();  // forward declaration

int methodOne() {
    std::cout << "Method 1";
    methodTwo(); // works!
    return 0;
}

int methodTwo() {
    std::cout << "Method 2";
    return 0;
} 
```

C++ 编译器不会回溯。您必须在使用之前声明一个函数。链接器稍后可以弄清楚细节，但是您必须先让编译器知道函数，这就是前向声明的用途。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T01:22:16.787

您只需要在 MethodOne 的声明之前转发声明 MethodTwo

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T01:25:12.917

首先，关于术语的一点：在 C++ 中，术语**方法**从不应用于独立函数，仅应用于成员函数。

正如您在下面看到的，您的示例仅对独立函数有意义，因此使用术语“方法”非常具有误导性。

在 C++ 中，必须在使用之前声明某些内容。

对于自由函数，这意味着您不能在声明之前在文本中的某个点调用函数：

```
void foo() { bar(); }   // NO GOOD!
void bar() {} 
```

但是，当您编写类声明时

```
struct S
{
    void foo() { bar(); }
    void bar() {}
}; 
```

编译器（本质上）将其转换为

```
struct S
{
    inline void foo();
    inline void bar();
};

inline void S::foo() { bar(); }
inline void S::bar() {} 
```

正如您在这个*转换*后的和更基本的代码中看到的那样，`bar`在它被声明之前不会被调用。

简而言之，编译器在使用它之前需要知道一些东西。

最后，对于独立函数，解决问题的一种方法是重新**排序**声明，另一种方法是先*声明*`bar`函数，称为**前向声明**。

重新排序通常会节省您的工作，因为具有前向声明意味着必须维护前向声明和定义。新手经常遇到前向声明与预期定义不同的情况，因此他们会遇到神秘的编译错误。通常最好通过重新排序定义来避免所有这些：`bar`首先，因为它是由`foo`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T01:23:59.580

像这样添加前向声明：

```
int methodTwo(); //Forward declaration

int methodOne() {
    std::cout << "Method 1";
    methodTwo(); //Problem is here. I cannot call methodTwo()
    return 0;
}

int methodTwo() {
    std::cout << "Method 2";
    return 0;
}

int main() {
    methodOne();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T01:23:18.603

如果在您调用的函数之前未声明任何函数，您需要转发声明它们。

```
int FunctionTwo(); 
```

顺便说一句，方法通常意味着类函数。

# python - 如何让子类使用父变量而不重新定义它们？

> ID：13390201
> 
> 赞同：2
> 
> 时间：2012-11-15T01:20:29.063
> 
> 标签：python, inheritance

长期阅读，第一次提问。无论如何，这是我正在使用的代码：

```
class Person(object):
  def __init__(self, s):
    self.name = s
    self.secret = 'I HAVE THE COOKIES'

  @classmethod
  def shout(self):
    print self.name.upper()

class Kid(Person):
  def __init__(self, s):
    super(Kid,self).__init__(s)
    self.age = 12

b = Person('Bob')
k = Kid('Bobby')
print b.name
print k.name
print k.age
print k.secret
k.shout() 
```

导致此输出和错误：

```
Bob
Bobby
12
I HAVE THE COOKIES
Traceback (most recent call last):
File "a.py", line 22, in <module>
  k.shout()
File "a.py", line 8, in shout
  print self.name.upper()
AttributeError: type object 'Kid' has no attribute 'name' 
```

我假设 Kid 能够使用 Person 的喊叫方法，将其（孩子的）“自我”替换为 parent（该方法所在的位置）。显然，事实并非如此。我知道我可以在 init 之外声明名称，但这既不能容纳输入的数据又不能。另一种选择是为 Person 的每个孩子重新定义喊叫，但这是我试图避免的大量重复代码。

首先十分感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T01:25:55.100

问题是这`@classmethod`是一个类的方法。它无权访问实例的属性。具体来说，该方法实际上是传递给类对象，因此`self`是错误的。你真的应该打电话`shout`的说法`cls`。如果您删除，`@classmethod`那么这一切都有意义，您的代码将按预期工作。

实际上，您可以将其`k.shout()`视为等效于`Kid.shout()`.

# android - 双ActionBar出现？

> ID：13390202
> 
> 赞同：1
> 
> 时间：2012-11-15T01:20:30.517
> 
> 标签：android, actionbarsherlock

这是我的第一个 android 应用程序，我作为 iPhone 开发人员已经 3 年了，这是一种思维方式的转变，但我仍然觉得有些东西很奇怪。首先我不知道这个 iPhone 背景是否会引起一些麻烦，但这是我想要做的：

我想用两个选项实现一个 ActionBar，就像 iOS 的 TabBar 一样：

![动作栏](../Images/982b8ed34c90b4366f41b179f7981d7a.png)

我想要的是当用户选择一个动作时，一些活动将呈现给用户。

到目前为止，这是我正在做的事情（不是那么多）：

*   我正在使用 ActionBarSherlock，我有 3 个活动：myApp、First 和 Second

myapp.java 仅创建 ActionBar 元素并加载`activity_first`：

```
package com.example.myApp;

import com.actionbarsherlock.ActionBarSherlock;
import com.actionbarsherlock.view.MenuItem;

import android.os.Bundle;

import com.actionbarsherlock.ActionBarSherlock.OnCreateOptionsMenuListener;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;

public class myApp extends SherlockActivity implements OnCreateOptionsMenuListener {
    ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTitle("myApp");
        mSherlock.setContentView(R.layout.activity_first);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add("First")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        menu.add("Second")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return true;
    }
} 
```

到目前为止，除了生成的存根之外，这些活动还没有：

```
import android.app.Activity;
import android.os.Bundle;

public class First extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first);

    }
} 
```

所以我有 1 个问题和 1 个问题：

1.  **问题**：这是对 ActivityBar 的正确使用吗？我的意思是，它应该用于切换活动吗？
2.  **问题**：正如您在 myApp 类的 OnCreate 方法中看到的，我正在加载`activity_first`，它确实加载了活动，但是它两次加载了 ActionBar，如下所示：

![在此处输入图像描述](../Images/1e0dc71f4ee5566730906952ae23c290.png)

我不明白为什么它被加载两次。如果我删除该行：`mSherlock.setContentView(R.layout.activity_first);`它加载 Bar 一次，显然我需要加载活动......

此外，我已将 NoActionBar 主题分配给 XML 图形编辑器 (activity_first.xml) 中的 activity_first，但它不起作用。我能做些什么来加载它一次。

**感谢您宝贵的时间**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:24:34.830

> 这是 ActivityBar 的正确使用吗？我的意思是，它应该用于切换活动吗？

您可以将“第一”和“第二”视为桌面应用程序中的工具栏按钮。如果您愿意，欢迎您让这些操作栏项目启动活动。

> 正如您在 myApp 类的 OnCreate 方法中看到的那样，我正在加载 activity_first，它确实加载了活动，但是它两次加载了 ActionBar，如下所示：

删除这一行：

```
ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this); 
```

并更改`mSherlock.setContentView(R.layout.activity_first);`为`setContentView(R.layout.activity_first);`. 我相信这会解决你的问题。

# delphi - 在 Delphi 中没有类的 WM_COPYDATA

> ID：13390208
> 
> 赞同：2
> 
> 时间：2012-11-15T01:21:43.767
> 
> 标签：delphi, wm-copydata

我想发送/接收来自 2 个 CONSOLE 应用程序的字符串（2 个不同的 PID，没有表单！）。我看到我需要在一个类中声明这个。是否可以在控制台应用程序中完全没有类的情况下做到这一点？如果是这样，我该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T02:00:30.830

`WM_COPYDATA`如果没有将其发送到的窗口，您将无法使用。如果不使用类，则必须直接使用 Win32 API`RegisterClass()`和`CreateWindow/Ex()`函数来分配窗口并为其消息处理程序提供自己的独立函数。

但是为什么不使用类呢？然后，您可以利用 RTL 的内置消息处理程序系统。至少，您可以使用`AllocateHWnd()`静态类方法，这样您就不必在运行时实例化类对象，例如：

```
type
  TWindowMessages = class
  public
    class procedure WndProc(var Message: TMessage);
  end;

class procedure TWindowMessages.WndProc(var Message: TMessage);
begin
  //...
end;

var
  Wnd: HWND;

Wnd := AllocateHWnd(TWindowMessages.WndProc);
// pump the message queue for new messages as needed...
DeallocateHWnd(Wnd); 
```

如果这不能满足你的需要，那么你应该考虑一种不依赖于windows的不同的IPC机制，比如命名管道、邮槽、套接字等。

# security - 不使用 ssl - 只使用 ftp 的网络托管公司有多安全

> ID：13390212
> 
> 赞同：0
> 
> 时间：2012-11-15T01:22:04.113
> 
> 标签：security, ftp, web-hosting

我正在考虑短期使用免费托管公司（不确定我是否应该提及名称），但他们不提供 sftp 并且 cpanel 是 http 而不是 https。他们似乎是一家合理的公司，我已经将它们用于低安全性网站几年了，只为付费帐户提供 ssl。

这是一个 php web 应用程序，适用于一家即将上线的公司，如果我需要离开我的计算机，我需要在他们进行数据输入时提供更好的正常运行时间的东西，我需要做一些额外的编码。

违约的可能性有多大？我是踩在薄冰上，还是实际上没有那么危险？

原谅我可能是菜鸟的问题，这是我最后一个大学项目，我觉得我有点深陷其中，哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:36:48.093

如果您使用它们几年并且尚未被破坏，您认为它现在发生的可能性是多少？您是否认为该站点会比您过去的站点更引人注目，从而更容易引起不必要的关注？

另一方面，如果您的这个客户正在或可能正在向您付款并期望可靠性/安全性，或者如果违规的影响很大（敏感数据），为什么不为安心付费呢？

如果您想继续使用免费服务，只需确保在异地发送频繁（非覆盖）数据备份，以便在任何情况下都可以恢复。

# powershell - Powershell控制MSWord：如何选择全部内容并更新？

> ID：13390213
> 
> 赞同：0
> 
> 时间：2012-11-15T01:22:13.197
> 
> 标签：powershell, ms-word

我正在处理大量使用字段和交叉引用（内部和文档之间）的 Word 文档。要更新这些并在更改后再次使所有内容保持一致，我必须打开每个文件，选择整个文件的内容（相当于按 Ctrl-A）并更新所有字段（相当于按 F9）。而且我必须对所有文件执行**两次**，以便所有文件间交叉引用也正确更新。

由于这是一个相当乏味和冗长的过程，我想为我写一个小 PowerShell 脚本来为我做这件事。更新文件的相关函数如下所示：

```
...
function UpdateDoc([object]$word, [object]$fileHandle) {
    Write-Host("Updating: '" + $fileHandle.Name + "' ('" + $fileHandle.FullName + "'):")
    # open the document:
    $doc = $word.Documents.Open($fileHandle.FullName)
    # select the entire document:
    ???
    # update it:
    ???
    # then save it:
    $doc.Save
    $doc.Close
    Write-Host("'" + $fileHandle.Name + "' updated.")
}
... 
```

但我被困在如何选择文件的内容并更新它，即必须进入这个代码而不是两个 ???-标记来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:21:29.553

你试过了吗：

```
$doc.Fields | %{$_.Update()} 
```

那应该更新所有字段

# mysql - Rails：使用数组查询

> ID：13390216
> 
> 赞同：3
> 
> 时间：2012-11-15T01:22:36.893
> 
> 标签：mysql, ruby-on-rails-3

我有以下方法创建然后执行 SQL 查询：

```
def edition_authors(edition, authors)
  query_string = "contributor_type = ? AND author = ?"
  for i in 1..authors.length - 1
    query_string += " OR author = ?"
  end
  return edition.contributors.where(query_string, 'Author', authors)
end 
```

最后一行是我遇到的麻烦。我希望“作者”数组以某种方式变成一组字符串。例如，如果作者数组包含 ['James Joyce', 'Cory Doctorow', 'Cormac McCarthy']，我希望最后一行这样写：

```
return edition.contributors.where(query_string, 'Author', 'James Joyce', 'Cory Doctorow', 'Cormac McCarthy') 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T01:50:50.787

取决于您使用的导轨和红宝石，

1.  ActiveRecord 在 Rails 3 中已经有了这个功能：`Model.where(:my_field => ['Author', 'James Joyce', 'Cory Doctorow', 'Cormac McCarthy'])`

2.  `arr.map{|v| v.to_s.inspect}`会给你一个逗号分隔的列表

3.  `arr.join(',')`会给你一个逗号分隔的列表，没有引号。

然后你可以随心所欲地使用这个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:58:17.043

试试这个：

1.  不要使用一大堆`OR`s，而是使用 SQL`IN`子句，并且
2.  然后用于[`Array#join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)提供值

所以：

```
.where("contributor_type = ? AND author IN (?)", 'Author', authors.join("','")) 
```

应该做的伎俩，有一些警告： SQL IN 子句中的字符串值需要单引号和逗号分隔`SELECT * FROM fubar WHERE blah IN ('foo','bar','baz');`我认为 Rails 知道如何引用事物很聪明，所以查看 Rails 日志以查看正在生成的 SQL 如果你得到一个错误。

此外，由于您的值可能包含单引号（Georgia O'Keefe），因此我不确定 Rails 是否足够聪明，可以在以这种方式使用时为您转义这些。

额外提示：确保`Author`列上有索引。一般来说，这是一个*昂贵*的查询。

# jquery - Uploadify：获取对象或父 ID

> ID：13390217
> 
> 赞同：0
> 
> 时间：2012-11-15T01:22:37.317
> 
> 标签：jquery, uploadify

我有一个页面，可以通过后端自定义文件上传输入，所以我对 uploadify 的调用是在一个类上，如下所示：

```
$('.uploadify_upload').uploadify({
            'uploader'  : '../js/uploadify/uploadify.swf',
            'script'    : '../js/uploadify/uploadify.php',
            'cancelImg' : '../js/uploadify/cancel.png',
            'checkScript' : '../js/uploadify/check.php',
            'folder'    : '../img/uploads/temp/<?= $upload_temp_folder ?>/',
            'auto'      : true,
            'multi'     : false,
            'buttonText': 'Upload image',
            onComplete: function (event, queueID, fileObj, response, data) {
                $('#file_name').text(fileObj.name);
            }
        }); 
```

html 看起来像：

```
<div class="image_preview" id="preview_<?= $field['field_name_in_channel_data'] ?>">
                                    <input type="file" class="uploadify_upload" id="upload_<?= $field['field_name_in_channel_data'] ?>" name="upload_<?= $field['field_name_in_channel_data'] ?>"/>
                                </div> 
```

我希望能够在我的 uploadify 函数中获取 div id ( `preview__..`) 或输入 id( )。`upload_...`这样，我可以让后端知道上传的字段是哪个字段，以便以后适当地写入数据库。我试过

```
'onSelect'    : function(event,data) {
                    var div_id = $(this).parent().attr('id');
                    alert(div_id);

                }, 
```

除其他外，但没有成功..我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:07:04.333

这是答案：

```
'onSelect'    : function(event,ID,fileObj) {
    var elem_id = $(event.target).attr("id"); //here you get the id of the object.
    $("#"+elem_id).uploadifySettings('scriptData',{'formID':elem_id})
}, 
```

来自[Uploadify：使用 scriptData 将表单的 ID 作为参数传递](https://stackoverflow.com/questions/4524712/uploadify-passing-a-forms-id-as-a-parameter-with-scriptdata)

# lucene - Lucene：TermQuery 与 SpanTermQuery

> ID：13390219
> 
> 赞同：1
> 
> 时间：2012-11-15T01:23:07.150
> 
> 标签：lucene, lucene.net

TermQuery 和 SpanTermQuery 之间似乎没有任何功能差异。是否有任何其他差异，例如搜索性能？我想知道即使差异很小。

如果有区别，我正在使用 Lucene.Net 2.9.4g。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:35:48.173

我发现当搜索服务器处于负载状态时，两种查询类型之间存在*明显的性能差异。***TermQuery 更快。**

我使用 50 个并发用户对包含数百万个文档的数据库进行负载测试，得到以下平均搜索时间。

*   使用 SpanTermQuery：5 秒
*   使用 TermQuery：3 秒

（还有其他因素使我的平均值高于正常值，例如大型文档、复杂的查询和不太理想的服务器。但是，使用 TermQuery 与 SpanTermQuery 的影响是显而易见的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:31:43.427

如果您不需要 Spans 搜索 API 中的功能，则没有功能差异。例如，`SpanTermQuery`如果要使用`SpanNearQuery`/ `SpanOrQuery`/`SpanNotQuery`等，则需要使用 for 子句，但如果不使用 Spans API，则不需要它。

当您使用有效负载时，跨度也非常方便。

两个类的性能应该相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:44:49.057

SpanTermQuery 即使不需要位置信息也需要额外的 IO。因此，如果 TermQuery 可以工作，请不要使用 SpanTermQuery。

# css - 为什么内联块 div 有内容时的位置较低？

> ID：13390220
> 
> 赞同：12
> 
> 时间：2012-11-15T01:23:17.323
> 
> 标签：css

如果您将三个相同的 div 定位在 inline-block 中，它们将完美对齐。但是，如果您将任何内容放在任何 div 中，它就会下降到其他 div 之下。为什么这样做？

```
<div class="left">?</div>
<div class="center"></div>
<div class="right"></div>

div {
    display:inline-block;
    margin-:2px;
    height:100px;
    width:25px;
    border:1px solid black;
}​ 
```

[http://jsfiddle.net/7kkC6/](http://jsfiddle.net/7kkC6/)

更好的例子：http: [//jsfiddle.net/7kkC6/9/](http://jsfiddle.net/7kkC6/9/)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-15T01:37:46.773

这是因为垂直对齐默认设置为基线。您可以通过将其设置为 top 来解决您的问题：

```
div {
    display:inline-block;
    margin-:2px;
    height:100px;
    width:25px;
    border:1px solid black;
    vertical-align: top;
}​ 
```

这里的演示：http: [//jsfiddle.net/7kkC6/4/](http://jsfiddle.net/7kkC6/4/)

# c# - c# string.format 删除我的引号

> ID：13390222
> 
> 赞同：2
> 
> 时间：2012-11-15T01:23:30.953
> 
> 标签：c#, asp.net, string-formatting

我不知道我是看不懂[文档](http://msdn.microsoft.com/en-us/library/ms228362.aspx)还是需要再喝一杯咖啡。

我想将小数格式化为一些html。以下代码的工作原理是格式化字符串，但它会去除添加的任何类型的引号或撇号。

```
private string FormatOutput1 = "{0:<span style='font-size: 14px;'>$0</span>.00}";
private string FormatOutput2 = "{0:<span style=\"font-size: 14px;\">$0</span>.00}";
private string FormatOutput3 = @"{0:<span style=""font-size: 14px;"">$0</span>.00}";
private string FormatOutput3 = "{0:<span style=\'font-size: 14px;\'>$0</span>.00}";
string.Format( FormatOutput, order.OrderTotal ) ); 
```

对我来说总是导致（假设小数点是 330）

```
<span style=font-size: 14px;>$330</span>.00 
```

缺少引号正在破坏所需的输出。有没有办法解决这个问题或我想念的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:31:21.160

如果您真的只想格式化小数，请将 html 移到大括号之前：

```
string FormatOutput = "<span style='font-size: 14px;'>$</span>{0:0.00}"; 
```

为了适应更新，您可以使用它进行转义，`\`但由于它是一个字符串，您需要使用两个`\\`并转义`;`：

```
string FormatOutput = "{0:<span style=\\'font-size: 14px\\;\\'>0</span>.00}"; 
```

# javascript - 图片不使用 JavaScript 切换

> ID：13390225
> 
> 赞同：0
> 
> 时间：2012-11-15T01:24:02.577
> 
> 标签：javascript, html, css

我设置了代码，所以当您单击图片开关时，会弹出一个菜单。（我还没有完成菜单）。但是当我点击图片时，它并没有改变。你能告诉我如何修复我的代码吗谢谢。我无法让 jsfiddle 工作，所以这是我的网站[http://spencedesign.netau.net/singaporehomemenu.html](http://spencedesign.netau.net/singaporehomemenu.html)

令人不安的代码是：

```
function showMore() {
    if (more.style.display != "none") {
        more.style.display = "none";
    }
    else {
        more.style.display = "block";
    }
}

imgs = Array("more.png", "less.png");
var x = 0;

function change() {
    document.getElementById("bob").src = imgs[++x];

    if (x == 1) {
        x = -1;
    }
}
if (!imgs[x + 1]) {
    x = -1;
} 
```

**[JSFiddle](http://jsfiddle.net/ae5wa/)**

（是的，我有所有适当的 body 和 html 标签，我只是认为不需要证明我的问题）感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:30:07.600

您的问题是您没有名为 bob 的 ID。因此，当您尝试调用时：

```
document.getElementById("bob") ... 
```

这是空的。

您需要将要更改的图像设置为具有名为 bob 的 id（为什么您将其称为 bob？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:58:54.023

正如李所说，你错过了给 img 一个 ID。此外，您提前关闭了 change() 函数，因此它永远不会到达第二个 if。

```
function change() {
    document.getElementById("bob").src = imgs[++x];

    if (x == 1) {
        x = -1;
    }
//} Moved from here
if (!imgs[x + 1]) {
    x = -1;
}
} 
```

在这里工作：[编辑 jsfiddle](http://jsfiddle.net/ae5wa/1/)

# python - Sphinx 文档处理器扩展对 HTML 和 LaTeX 输出的工作方式不同？

> ID：13390226
> 
> 赞同：9
> 
> 时间：2012-11-15T01:24:04.347
> 
> 标签：python, python-sphinx

我有一个简单的狮身人面像扩展如下：

```
from docutils import nodes
from docutils.parsers.rst import directives
from sphinx.util.compat import Directive

class testnode(nodes.Element):
    def __init__(self, *args, **kwargs):
        super(testnode, self).__init__(*args, **kwargs)
        self['foo'] = '?'

def visit_testnode_latex(self, node):
    self.body.append('Test: %s' % node['foo'])

def depart_testnode_latex(self, node):
    pass

def visit_testnode_html(self, node):
    self.body.append('<p>Test: %s</p>' % node['foo'])

def depart_testnode_html(self, node):
    pass

class TestDirective(Directive):
    has_content = False
    required_arguments = 0
    optional_arguments = 0
    final_argument_whitespace = False
    option_spec = {
        'foo': directives.unchanged,
    }

    def run(self):
        node = testnode()
        node['foo'] = self.options.get('foo')
        return [node]

def setup(app):
    app.add_directive("testdirective", TestDirective)
    app.add_node(testnode,
                 html=(visit_testnode_html,
                       depart_testnode_html),
                 latex=(visit_testnode_latex,
                        depart_testnode_latex)) 
```

给定一个包含

```
.. testdirective::
   :foo: bar 
```

HTML 输出包含 »Test: bar« 但 LaTeX 输出包含 »Test: ?« （默认值）。`node['foo']`我在分配后检查了它是否具有正确的值`TestDirective.run()`，但在 LaTeX 编写器运行之前，它似乎不会一直存在。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:28:29.553

在逐步浏览了 Sphinx 的 LaTeX writer 之后，我在这里发现了问题。这是您在初始化程序中为`'foo'`关键字设置默认值的方式。`testnode`

LaTeX 编写器有一个要点，它对整个文档树进行深度复制，以便将其内联到另一棵树中。节点上的 deepcopy`Element`初始化同一个类的新节点，并通过构造函数传递原始节点的所有属性和内容。因此，当您`testnode`被复制时，您的构造函数会覆盖传递给构造函数的原始 'foo' 属性。而是这样写，它应该可以工作：

```
class testnode(nodes.Element):
    def __init__(self, *args, **kwargs):
        super(testnode, self).__init__(*args, **kwargs)
        if 'foo' not in self:
            self['foo'] = '?' 
```

这将防止您的默认值覆盖已传递给构造函数的属性的任何显式值。还有其他几种可能的变体。

# sql - sql查询完全匹配

> ID：13390227
> 
> 赞同：1
> 
> 时间：2012-11-15T01:24:18.097
> 
> 标签：sql

假设我有下表

```
name | color
-------------
jon    blue
jon    black
jon    red
bill   blue
bill   red
jack   blue
.... 
```

我想运行一个查询来获取所有只有颜色=蓝色和红色的名称，对于一个qeyry，所有名称的颜色=只有蓝色（没有黑色，没有红色）

我试过类似下面的东西

```
select name, color from table where color in ('blue', 'red')
group by name, color 
```

但它给了我比我预期更多的结果......有什么想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:11:13.810

让我们试试这个查询：

```
SELECT name, color
FROM table1
WHERE name IN
(
    SELECT name
    FROM table1 t1
    WHERE color IN ('blue', 'red')
      AND NOT EXISTS
      (
         SELECT * 
         FROM table1 t2 
         WHERE t1.name = t2.name
           AND t2.color NOT IN ('blue', 'red')
       )
    GROUP BY name
    HAVING COUNT(DISTINCT color) = 2 --to be sure only red won't be accepted

    UNION

    SELECT name
    FROM table1 t1
    WHERE color = 'blue'
     AND NOT EXISTS
     (
        SELECT * 
        FROM table1 t2 
        WHERE t1.name = t2.name
          AND t2.color <> 'blue'
     )
)
ORDER BY name, color 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:27:49.540

```
 select name
    from tbl
   where color in ('blue','red')
     and not exists (select * from tbl t2
                     where t2.name=tbl.name and t2.color NOT IN ('blue','red'))
group by name
  having count(distinct color) = 2 
```

# objective-c - 我可以检测用户是否触摸了地图上除注释之外的任何地方吗？

> ID：13390229
> 
> 赞同：1
> 
> 时间：2012-11-15T01:24:36.197
> 
> 标签：objective-c, ios, mkannotation

我正在构建一个应用程序，我想知道用户何时触摸了注释或地图上的其他任何地方。我有一个按钮，只有在选择了注释时才想显示。因此，如果用户在注释后尝试触摸地图上的任何位置（如果不是另一个注释），则使按钮不可见。

目前，我已经尝试过 touchesEnded 方法，但问题是它无法识别注释和着陆。

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    if([touches isMemberOfClass:[BuildingViewController class]])
        printf("Building");
    else
        printf("Land!");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:18:09.763

`touches`是带有类的对象`NSSet`，因此您可以从中获取对象`NSSet`并检查它的类成员资格。例如：

```
UITouch *touch = [touches anyObject]; 
```

您可以通过触摸获取 UIView

```
UIView *touchedView = touch.view; 
```

然后检查这个 UIView 类并与你的比较

```
[touchedView isMemberOfClass:[BuildingView class]] 
```

我还建议您检查该 NSSet 中的所有触摸。

```
BOOL isBuilding = NO;

for(UITouch *touch in touches){
    if([touch.view isMemberOfClass:[BuildingView class]]){
        isBuilding = YES;
        break;
    }
}

if(isBuilding){
    printf("Building");
}else{
    printf("Land!");
} 
```

# java - 如何为 C/C++ 添加 Java 到我的 Eclipse

> ID：13390234
> 
> 赞同：0
> 
> 时间：2012-11-15T01:25:06.443
> 
> 标签：java, c++, c, eclipse, ide

> **可能重复：**
> [在 CDT 之上安装 eclipse JDT](https://stackoverflow.com/questions/1853450/install-eclipse-jdt-on-top-of-cdt)

我正在寻找我的 mac 和 pc 的说明。我最近为 c 和 c++ 开发人员安装了 eclipse，不想为 java 安装另一个副本。

# java - 使用 evince 保存后，可编辑的 .pdf 字段消失（但在字段焦点上可见）

> ID：13390236
> 
> 赞同：4
> 
> 时间：2012-11-15T01:25:23.743
> 
> 标签：java, web-applications, pdf-generation, itext, ubuntu-12.04

首先，让我感谢 SO 社区过去多次帮助我；你们是一个了不起的资源！

在我的工作中，我开发了一个 Web 应用程序，该应用程序使用在 Scribus 中创建的 PDF 模板和 iText Java 库来使用我们数据库中的数据填充模板。有时，用户提供的字段是必需的，而 iText 并未触及。下载 .pdf 时，会编辑一个字段，并使用 Evince 保存副本，结果文件在重新打开时不会显示编辑后的文本。但是，在编辑字段的焦点上，它将显示保存的文本。失焦，文字消失。剪切文本，粘贴回字段；它保持可见 - 直到您保存并重新打开文档。保存并重新打开后，原始问题就出现了。我发现了很多关于这个问题的非常相似的帖子，但没有一个解决方案似乎对我有用。

此外，这个问题很古怪。如果我用 Evince 打开 Scribus 模板（iText 未触及的 .pdf 文件），然后编辑字段并保存，它们将在重新打开时正确显示。但是，一旦库接触到模板，就会出现问题。同样，我可以用我在搜索此问题的原因时发现的 PDF 文件重现该问题；像这个：

[http://www.quask.com/samples/pdfforms/pcpurchase.pdf](http://www.quask.com/samples/pdfforms/pcpurchase.pdf)

这使我相信行为不端的文件可能以某种方式损坏，并且 iText 可能是我的问题的原因，但 iText 不是我可以重现该问题的唯一途径，所以我不知道该怎么做思考。在我见过的众多解决方案中，我似乎找不到可行的解决方案。是否有人对这个问题足够熟悉，能够告诉我在哪里可以深入了解这个问题或提供一些关于我正在使用的工具的见解？如果您使用谷歌搜索该问题，我已经看到了。

我正在使用 Ubuntu 12.04（精确）、Evince 3.4.0、iText 2.1.5，并且可以根据要求尝试填写任何其他相关详细信息。我很担心发布任何代码，因为我不确定它是否是 Kosher，并且它可以很好地构建表单，除了这个特殊问题；更不用说我可以在不使用我们的 webapp 的情况下重现问题。

这是我在这里的第一篇文章，我是一名新手程序员（还在上学！）所以如果我违反了任何约定或可以以任何方式改进我未来的查询，请务必告诉我。

谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:48:50.473

检查 jbowman 在对他的问题的评论中提供的文件——特别注意密码字段（这是 evince 最终填写的字段之一）——显示：

模板.pdf

*   是由 Scribus PDF Library 1.4.1.svn 生成的原始表单；
*   包含一个具有 9 个字段的 AcroForm，并且标志 NeedAppearances 设置为 true；
*   具有密码字段（名为 passwordField），其中包含一个空值和一个*正常*外观流，它使用空文本绘制一个矩形。

after_itext.pdf

*   是由 iText 2.1.5 编辑的原始表单，不幸的是不是附加模式，这会使分析更容易；
*   包含一个带有 8 个字段的 Acroform（成员编号字段已填写并展平），没有 NeedAppearances 标志；
*   密码字段（名为 passwordField:u4woYY1FK9）的值和外观保持不变。

after_itext_edited.pdf

*   是以前由 iText 编辑的表格，现在由其他一些软件（evince）以附加模式编辑；
*   包含一个没有 NeedAppearances 标志的 8 个字段的 Acroform；对字段 passwordField:u4woYY1FK9 和 memberPrefix:u4woYY1FK9 进行了唯一更改：
*   具有带有新关联值*asdf*的密码字段（名为 passwordField:u4woYY1FK9），但其外观保持不变；
*   具有成员前缀字段（名为 memberPrefix:u4woYY1FK9）和一个新的关联值*asdf*，但其外观保持不变。

因此，观察到的默认值未显示的行为是可以预期的：

最终的 Acroform 没有 NeedAppearances 标志。该标志在[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)规范中定义为：

> 一个标志，指定是否为文档中的所有小部件注释构造外观流和外观字典（参见 12.7.3.3，“可变文本”）。默认值：假。

因此，您的 PDF 文档在其最终形式中表示：不需要生成小部件的外观（例如 AcroForm 字段可视化），从文档中获取外观。

文档中密码字段的外观是原始的，带有空文本的矩形。

所以你会看到这个空矩形。

当您单击该字段时，PDF 查看器准备编辑其内容并因此显示它认为合适的值。

如果使用 evince 编辑 PDF 文件旨在获得可见的结果，则在更改字段值时，evince还**必须**添加更新的外观流或确保设置了 AcroForm NeddAppearances 标志。因此，这就是 evince 失败的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T01:19:28.797

我已经接受了 mkl 的回答，因为它对字段显示不正确的*原因*一针见血，并且包含的​​信息比我能提供的关于该问题的信息要多得多。但是，答案评论中的建议修复不起作用，因为文档是使用 iText 2.1.5 生成的（在这种特殊情况下）`PdfCopyFields`，它不尊重（剥离）原始文档的 NeedAppearances 标志，并且要求`setNeedAppearances(true)`没有`AcroForm`解决问题因为这。

破解`createAcroForms()`方法`PdfCopyFieldsImp`以包含该行

```
form.put(PdfName.NEEDAPPEARANCES, PdfBoolean.PDFTRUE); 
```

最终似乎为我解决了这个问题。通过此添加，evince 在保存并重新打开文档后正确显示对字段的更改。

# javascript - 如何选择动态创建的 html 选择的值

> ID：13390237
> 
> 赞同：-1
> 
> 时间：2012-11-15T01:25:33.367
> 
> 标签：javascript, jquery, html, jquery-selectors, jquery-events

我有两个占位符用于两个不同的 html 选择，它们将被动态创建

```
var dropdown1 = '#select1';
var dropdown2 = '#select2'; 
```

稍后我会动态创建元素并附加一个事件......

```
$('some div').append(dropdown1);
$('some div').append(dropdown2);
$(dropdown1).append('<option>' + value + '</option>'); 
$(dropdown1).append('<option>' + value + '</option>'); 
```

然后我添加一个事件监听器......

```
$(document.body).on('change', dropdown1, function() {
alert($(dropdown1).val());
alert($(dropdown2).val());

}); 
```

我希望能够同时获得下拉 1 和下拉 2 的值。相反，我得到一个空数组或未定义的数组。

任何人都知道如何为这些动态创建的选择获取两个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:29:32.433

您没有持有对 jQuery 对象的引用，只是一个 id 字符串。尝试这个：

```
$(document).on('change', dropdown1, function() {
    alert($(dropdown1).val()); /* or, you could use $(this).val() */
    alert($(dropdown2).val());    
}); 
```

这只会在您更改第一个下拉菜单时触发，因为选择器参数传递给 on()。

# java - J对图像进行 FFT 变换

> ID：13390238
> 
> 赞同：7
> 
> 时间：2012-11-15T01:25:36.130
> 
> 标签：java, image-processing, fft

我有一个图像，我想使用 FFT 转换到频域，Java 似乎缺少这个库，但我找到了两个。一个是 JTransforms，另一个是鲜为人知的，没有名字。

对于不太知名的一个，2D 只能具有 2 的幂的长度值，但具有简单的使用方法，例如`FastFourierTransform.fastFT(real, imaginary, true);`实部是充满每个像素值的双精度数组的 2D 数组，而虚部是相同大小的 2D 数组的零。布尔值将取决于正向或反向变换。这对我来说很有意义，除了两个要求的力量破坏了我所做的任何变换（我最初在图像周围添加了黑色空间以使其适合最接近的两个幂）之外，它起作用了，我正在努力解决如何使用 JTransforms 的等效方法，并希望得到任何指导。我会说明我目前在做什么。

我相信相关的类是`DoubleFFT_2D`，它的构造函数需要许多行和列，我认为它们是图像的宽度和高度。因为我的图像没有虚部，我想我可以使用`doubleFFT.realForwardFull(real);`它将虚部视为零并传递充满像素的真实二维数组。不幸的是，这根本不起作用。JavaDoc 状态`the input array must be of size rows*2*columns, with only the first rows*columns elements filled with real data`但我不明白这与我的图像有什么关系，以及我必须做些什么来满足这个要求。

对于冗长而糟糕的解释感到抱歉，如果需要任何其他信息，我很乐意提供。

JTransforms 库和文档可以在这里找到：[https ://sites.google.com/site/piotrwendykier/software/jtransforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T11:37:22.480

[太糟糕了，除了压缩下载](http://sourceforge.net/projects/jtransforms/files/jtransforms/2.4/jtransforms-2.4-doc.zip/download)之外，JTransforms 的文档无法在线获得。它非常完整和有用，您应该检查一下！

回答您的问题：[`DoubleFFT_2D.realForwardFull(double[][] a)`](http://wendykierp.github.io/JTransforms/apidocs/org/jtransforms/fft/DoubleFFT_2D.html#realForwardFull-double:A:A-)采用实数数组（您的像素）。但是，FFT 的结果对于每个输入值都有两个输出值 - 每个频率仓的实部和虚部。这就是为什么您的输入数组需要是实际图像数组的两倍大，其中一半是空的/用零填充。

请注意，所有 FFT 函数`a`不仅用于输入，还用于输出 - 这意味着其中的任何图像数据都会丢失，因此可能需要复制到不同/更大的数组！

对于您的场景，简单而明显的解决方法是[`DoubleFFT_2D.realForward(double[][] a)`](http://wendykierp.github.io/JTransforms/apidocs/org/jtransforms/fft/DoubleFFT_2D.html#realForward-double:A:A-)改用它。这个只会计算正光谱，因为负侧将与其对称。这是因为您的输入值是真实的。

此外，请查看[`RealFFTUtils_2D`](http://wendykierp.github.io/JTransforms/apidocs/org/jtransforms/fft/RealFFTUtils_2D.html)JTransforms 中的类，这将使您之后从数组中检索结果变得更加容易:)

# java - 如何配置自定义maven项目结构

> ID：13390239
> 
> 赞同：4
> 
> 时间：2012-11-15T01:25:53.237
> 
> 标签：java, maven, build, jenkins

我知道通常的 Maven 结构是这样的：

```
 pom.xml
 src
   - main
   - web
    - WEB-INF 
```

但是，我有一个具有以下结构的项目

```
src
  - main
web
  - WEB-INF 
```

以上两者中的后者目前不使用maven。通过使结构符合 Maven 标准，我已经开始在本地为这个项目使用 Maven。但是，我现在想通过将它从源代码控制 (svn) 中自动从 jenkins 构建这个项目。所以我只想添加一个 pom.xml ，它知道`web`不在里面的事实`src`

这可能与maven有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:07:03.330

您可以将其配置[`maven-war-plugin`](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)为使用另一个[`warSourceDirectory`](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#warSourceDirectory)，但正如 Jeff Storey 在他的[回答](https://stackoverflow.com/a/13390266/1350762)中解释的那样，确实不建议这样做。

你会这样做：

```
<project>
    ...
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <warSourceDirectory>web</warSourceDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
    ...
</project> 
```

几个问题之一是，例如，[`maven-jetty-plugin`](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)不会开箱即用。默认情况下，它会查找，`src/main/webapp`因此必须进行配置。

你可能不使用，`maven-jetty-plugin`但你明白了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T01:29:32.810

使用 maven 战争插件属性，您可以设置`warSourceDirectory`属性[http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)（我不确定您到底遇到了什么问题，所以这可能会也可能不会解决您的具体问题）。

但是，maven 非常固执己见，我强烈建议使用预期的 maven 结构。其他插件可能会给你带来意想不到的问题，当你遵循它们的约定时，maven 的生活通常会容易得多。

# java - 替换密码字段中的点字符，Jframe，Java

> ID：13390247
> 
> 赞同：1
> 
> 时间：2012-11-15T01:26:57.983
> 
> 标签：java, swing, jframe, character, jpasswordfield

我想问我如何更改密码字段中的字符，这是我想用星号替换的点？？？

我正在使用 Jframe，Java

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T01:29:18.923

[PasswordTextField.setEchoChar('*');](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#setEchoChar%28char%29)

# css - CSS - 悬停不起作用

> ID：13390250
> 
> 赞同：0
> 
> 时间：2012-11-15T01:27:34.067
> 
> 标签：css, hover

我有这些CSS代码：

```
 .tabs_inactive {
        border: 1px solid #cccccc;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        background-color: #eeeeee;
        border-bottom: #cccccc;
    }

    .tabs_inactive:hover {
        background-color: #ff8000;
        border-color: #ff8000;
        cursor: pointer;
    }

    /*this does not work*/
    .tabs_inactive:hover a {
        color: #ffffff;
    }

    .tabs_active {
        background-color: #ffffff;
        border-bottom: 2px solid #ffffff;
    }

    .tabs_active:hover{
        background-color: #ffffff;
        border: 1px solid #cccccc;
        border-bottom: 2px solid #ffffff;
        cursor: default;
    }

    .tabs_active:hover a {
        cursor: default;
    } 
```

最后一个 ( `.tab_active:hover a`) 在我的网页中运行良好，但第三个块不是。我不知道为什么会这样。有人能解释一下为什么第三个块不起作用吗？谢谢！

* * *

更新 1：这是相关的 JavaScript 代码：

```
//add class "tabs_inactive" to the original tabs option.
$( "#tabs ul li" ).addClass("tabs_inactive");

//default: set the first tab as the active one.
$( "#tabs ul li" ).first().toggleClass("tabs_active");

//to make sure the style sheet will be changed when click on the inside <a> tag
$( "#tabs ul li a" ).live( "click", function () {
    //close other tabs
    $( this ).parents("ul").children("li").each( function (){
        if( $(this).hasClass("tabs_active")){
            $(this).removeClass("tabs_active");
        }
    });
    $( this ).parent().toggleClass("tabs_active");
    return false;
});
//change the class to "tabs_active" when the tab is clicked
$( "#tabs ul li" ).live( "click", function () {
    //close other tab
    $( this ).parent().children("li").each( function (){
        if( $(this).hasClass("tabs_active")){
            $(this).removeClass("tabs_active");
        }
    });
    $( this ).toggleClass("tabs_active");
}); 
```

还有HTML代码：

```
 <div id="tabs">
            <ul>
                <li><a href="#homepage">HOME</a> </li>
                <li><a href="#option1">option1</a> </li>
            </ul>
            <div id="homepage">
                <p>
                    HOME:
                    Here is the home page
                </p>
            </div>
            <div id="option1">
                <p>
                    Option1:
                    Here is the tag page 1
                </p>
            </div>
        </div> 
```

所以，是的，我正在尝试实现一个选项卡菜单，这是一种做法，所以我不想使用原始的 JqueryUI 功能。有人知道这是什么问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:02:55.870

对不起，这不是一个错字或其他什么，我只是犯了一个错误，我给了`#tab ul li a`之前的字体颜色样式，这是使用 id 选择器，这使得该功能`toggleClass`根本不起作用。我将该标签从 id 转换为 class 然后一切正常。谢谢大家，那是我的错。

# ruby-on-rails - 如何从 Jenkins 中删除旧的 rcov 结果？

> ID：13390251
> 
> 赞同：0
> 
> 时间：2012-11-15T01:27:40.113
> 
> 标签：ruby-on-rails, jenkins, rcov

当我第一次将我的 Rails 项目放在 Jenkins 中时，我的设置是关闭的，我为`vendor/`. 我已经修复了我的设置，因此新报告不包含该代码，但即使在清除了我的 Jenkins 工作区之后，它仍然`vendor/`在每个报告中包含该代码。

如何删除旧的 rcov 统计信息并仅跟踪我自己的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:20:12.940

当包含它们的所有旧版本消失时，覆盖统计信息将自行修复。

# objective-c - pjsua_conf_disconnect 不要在某些 Mac 上静音麦克风

> ID：13390253
> 
> 赞同：1
> 
> 时间：2012-11-15T01:27:45.657
> 
> 标签：objective-c, osx-mountain-lion, pjsip

**问题：**

是否有可能在特定条件下（硬件，...）该`pjsua_conf_disconnect(0, callInfo.conf_slot)`功能不会使麦克风静音？

如果是，我们如何使用 PJSIP 有效地将麦克风静音？

**细节：**

在 OSX SIP 应用程序中，用户可以将麦克风静音，这将调用：

```
...
pjsua_call_info callInfo;
pjsua_call_get_info([self identifier], &callInfo);
pj_status_t status = pjsua_conf_disconnect(0, callInfo.conf_slot);
... 
```

`[self identifier]`当前呼叫的在哪里`pjsua_call_id`。

我确信在这 3 行之后`status == PJ_SUCCESS`，因为只有当这个条件为真时，UI 才会更新以让用户知道麦克风已静音。

该项目使用`pjlib 1.12.0 for POSIX`静态库。

面临此问题的用户使用 Mac OSX 10.8.1 和 10.8.2。他们都在使用内置的 MacBook [Pro,Air] 麦克风，没有耳机。

*请注意，我自己无法在 OSX 10.8.2 mid-2009 MBP 上以完全相同的版本（来自 MacAppStore）重现此问题，这就是使此问题难以解决的原因。*

*请注意，这不是随机问题，它是恒定的：因为静音功能永远不会对遇到此问题的用户起作用，而对其他人始终有效。*

# java - Tanuki Software Java 服务包装器。错误：找不到类

> ID：13390260
> 
> 赞同：1
> 
> 时间：2012-11-15T01:28:59.817
> 
> 标签：java, java-service-wrapper

我正在尝试使用 Tanuki Java Service Wrapper 将我的应用程序作为服务启动。

我已经创建了 WrapperSimpleApp 提到的目录。这是我的配置文件。

```
#encoding=UTF-8
# Configuration files must begin with a line specifying the encoding
#  of the the file.

#********************************************************************
# Wrapper License Properties (Ignored by Community Edition)
#********************************************************************
# Professional and Standard Editions of the Wrapper require a valid
#  License Key to start.  Licenses can be purchased or a trial license
#  requested on the following pages:
# http://wrapper.tanukisoftware.com/purchase
# http://wrapper.tanukisoftware.com/trial

# Include file problems can be debugged by removing the first '#'
#  from the following line:
##include.debug

# The Wrapper will look for either of the following optional files for a
#  valid License Key.  License Key properties can optionally be included
#  directly in this configuration file.
#include ../conf/wrapper-license.conf
#include ../conf/wrapper-license-%WRAPPER_HOST_NAME%.conf

# The following property will output information about which License Key(s)
#  are being found, and can aid in resolving any licensing problems.
#wrapper.license.debug=TRUE

#********************************************************************
# Wrapper Localization
#********************************************************************
# Specify the locale which the Wrapper should use.  By default the system
#  locale is used.
#wrapper.lang=en_US # en_US or ja_JP

# Specify the location of the Wrapper's language resources.  If these are
#  missing, the Wrapper will default to the en_US locale.
wrapper.lang.folder=../lang

#********************************************************************
# Wrapper Java Properties
#********************************************************************
# Java Application
#  Locate the java binary on the system PATH:
wrapper.java.command=java
#  Specify a specific java binary:
#set.JAVA_HOME=c:/Prigram Files/Java/jdk1.7.0_03
#wrapper.java.command=%JAVA_HOME%/bin/java

# Tell the Wrapper to log the full generated Java command line.
#wrapper.java.command.loglevel=INFO

# Java Main class.  This class must implement the WrapperListener interface
#  or guarantee that the WrapperManager class is initialized.  Helper
#  classes are provided to do this for you.  See the Integration section
#  of the documentation for details.
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp

# Java Classpath (include wrapper.jar)  Add class path elements as
#  needed starting from 1
wrapper.java.classpath.1=../lib/wrapper.jar
wrapper.java.classpath.2=../lib/jna/jna.jar
wrapper.java.classpath.3=../lib/jna/platform.jar
wrapper.java.classpath.4=../lib/sqljdbc_4.0/enu/sqljdbc4.jar

# Java Library Path (location of Wrapper.DLL or libwrapper.so)
wrapper.java.library.path.1=../lib/native

# Java Bits.  On applicable platforms, tells the JVM to run in 32 or 64-bit mode.
wrapper.java.additional.auto_bits=TRUE

# Java Additional Parameters
wrapper.java.additional.1=

# Initial Java Heap Size (in MB)
#wrapper.java.initmemory=3

# Maximum Java Heap Size (in MB)
#wrapper.java.maxmemory=64

# Application parameters.  Add parameters as needed starting from 1
wrapper.app.parameter.1=esq.logreader.DbTestDriver
wrapper.app.parameter.2=Event_Logger
wrapper.app.parameter.3=Event_Table
wrapper.app.parameter.4=Scouser
wrapper.app.parameter.5=12345

#********************************************************************
# Wrapper Logging Properties
#********************************************************************
# Enables Debug output from the Wrapper.
wrapper.debug=TRUE

# Format of output for the console.  (See docs for formats)
wrapper.console.format=PM

# Log Level for console output.  (See docs for log levels)
wrapper.console.loglevel=INFO

# Log file to use for wrapper output logging.
wrapper.logfile=../logs/wrapper.log

# Format of output for the log file.  (See docs for formats)
wrapper.logfile.format=LPTM

# Log Level for log file output.  (See docs for log levels)
wrapper.logfile.loglevel=INFO

# Maximum size that the log file will be allowed to grow to before
#  the log is rolled. Size is specified in bytes.  The default value
#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or
#  'm' (mb) suffix.  For example: 10m = 10 megabytes.
wrapper.logfile.maxsize=0

# Maximum number of rolled log files which will be allowed before old
#  files are deleted.  The default value of 0 implies no limit.
wrapper.logfile.maxfiles=0

# Log Level for sys/event log output.  (See docs for log levels)
wrapper.syslog.loglevel=NONE

#********************************************************************
# Wrapper General Properties
#********************************************************************
# Allow for the use of non-contiguous numbered properties
wrapper.ignore_sequence_gaps=TRUE

# Do not start if the pid file already exists.
wrapper.pidfile.strict=TRUE

# Title to use when running as a console
wrapper.console.title=@app.long.name@

#********************************************************************
# Wrapper JVM Checks
#********************************************************************
# Detect DeadLocked Threads in the JVM. (Requires Standard Edition)
wrapper.check.deadlock=TRUE
wrapper.check.deadlock.interval=60
wrapper.check.deadlock.action=RESTART
wrapper.check.deadlock.output=FULL

# Out Of Memory detection.
# (Simple match)
wrapper.filter.trigger.1000=java.lang.OutOfMemoryError
# (Only match text in stack traces if -XX:+PrintClassHistogram is being used.)
#wrapper.filter.trigger.1000=Exception in thread "*" java.lang.OutOfMemoryError
#wrapper.filter.allow_wildcards.1000=TRUE
wrapper.filter.action.1000=RESTART
wrapper.filter.message.1000=The JVM has run out of memory. 
```

PS：我已经删除了配置文件的其余部分，因为我将其保留在提供的默认配置文件中。Din 想让这篇文章变得凌乱而冗长。

错误信息（更新）：

```
STATUS | wrapper  | 2012/11/14 19:04:39 | --> Wrapper Started as Console
STATUS | wrapper  | 2012/11/14 19:04:39 | Java Service Wrapper Community Edition 32-bit 3.5.15
STATUS | wrapper  | 2012/11/14 19:04:39 |   Copyright (C) 1999-2012 Tanuki Software, Ltd. All Rights Reserved.
STATUS | wrapper  | 2012/11/14 19:04:39 |     http://wrapper.tanukisoftware.com
STATUS | wrapper  | 2012/11/14 19:04:39 | 
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Launching Startup thread.
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Startup thread started.
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Attempting to verify the binary signature.
DEBUG  | wrapper  | 2012/11/14 19:04:39 | The file "D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin\wrapper.exe" is signed and the signature was verified.
DEBUG  | wrapper  | 2012/11/14 19:04:39 |   Signer Certificate:
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Serial Number: 
DEBUG  | wrapper  | 2012/11/14 19:04:39 |       00 97 06 fe b5 6e 56 cc cb 66 3a bb 55 a7 a0 e4 76 
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Issuer Name: UTN-USERFirst-Object
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Subject Name: Tanuki Software Ltd.
DEBUG  | wrapper  | 2012/11/14 19:04:39 |   TimeStamp Certificate:
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Serial Number: 
DEBUG  | wrapper  | 2012/11/14 19:04:39 |       47 8a 8e fb 59 e1 d8 3f 0c e1 42 d2 a2 87 07 be 
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Issuer Name: UTN-USERFirst-Object
DEBUG  | wrapper  | 2012/11/14 19:04:39 |     Subject Name: COMODO Time Stamping Signer
DEBUG  | wrapper  | 2012/11/14 19:04:39 | 
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Startup thread stopped.
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Release time: 2012/06/20 00:00:00
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Build time:   2012/06/20 17:50:00
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Timezone:     Pacific Standard Time (Pacific Daylight Time) Offset: 28800, hasDaylight: 1
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Using tick timer.
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Current User: Scouser  Domain: Scouser-Umang
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Operating System ID: Microsoft Windows 7 Home Premium Edition Service Pack 1 (build 7601), 64-bit
INFO   | wrapper  | 2012/11/14 19:04:39 | 
INFO   | wrapper  | 2012/11/14 19:04:39 | Environment variables (Source | Name=Value) BEGIN:
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _PARAMETERS= 
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _REALPATH=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _WRAPPER_BASE=wrapper
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _WRAPPER_CONF="../conf/wrapper.conf"
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _WRAPPER_CONF_DEFAULT=../conf/wrapper.conf
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _WRAPPER_EXE=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin\wrapper.exe
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | _WRAPPER_L_EXE=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin\wrapper-windows-x86-64.exe
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ALLUSERSPROFILE=C:\ProgramData
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | APPDATA=C:\Users\Scouser\AppData\Roaming
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | asl.log=Destination=file;OnFirstLog=command,environment,parent
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | CLASSPATH=.;C:\Program Files\Java\jdk1.7.0_03\jre\lib\rt.jar
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | CommonProgramFiles=C:\Program Files (x86)\Common Files
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | CommonProgramFiles(x86)=C:\Program Files (x86)\Common Files
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | CommonProgramW6432=C:\Program Files\Common Files
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | COMPUTERNAME=SCOUSER-UMANG
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ComSpec=C:\windows\system32\cmd.exe
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | FP_NO_HOST_CHECK=NO
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | HOMEDRIVE=C:
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | HOMEPATH=\Users\Scouser
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | LOCALAPPDATA=C:\Users\Scouser\AppData\Local
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | LOGONSERVER=\\SCOUSER-UMANG
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | NUMBER_OF_PROCESSORS=4
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | OS=Windows_NT
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | Path=C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\PHP\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\PHP\php.exe;C:\Program Files\Java\jdk1.7.0_03\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\Calibre2\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\Samsung\AllShare Framework DMS\1.3.03\;C:\Program Files\Samsung\AllShare Framework DMS\1.3.03\64bit\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PHPRC=C:\Program Files (x86)\PHP\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROCESSOR_ARCHITECTURE=x86
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROCESSOR_ARCHITEW6432=AMD64
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 37 Stepping 2, GenuineIntel
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROCESSOR_LEVEL=6
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROCESSOR_REVISION=2502
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ProgramData=C:\ProgramData
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ProgramFiles=C:\Program Files (x86)
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ProgramFiles(x86)=C:\Program Files (x86)
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | ProgramW6432=C:\Program Files
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PROMPT=$P$G
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PSModulePath=C:\windows\system32\WindowsPowerShell\v1.0\Modules\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\PowerShell\Modules\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | PUBLIC=C:\Users\Public
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | QTJAVA=C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | SESSIONNAME=Console
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | SSH_AGENT_PID=9128
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | SSH_AUTH_SOCK=/tmp/ssh-zhvjHY8368/agent.8368
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | SystemDrive=C:
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | SystemRoot=C:\windows
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | TEMP=C:\Users\Scouser\AppData\Local\Temp
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | TMP=C:\Users\Scouser\AppData\Local\Temp
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | USERDOMAIN=Scouser-Umang
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | USERNAME=Scouser
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | USERPROFILE=C:\Users\Scouser
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | VBOX_INSTALL_PATH=C:\Program Files\Oracle\VirtualBox\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | VS100COMNTOOLS=C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Tools\
INFO   | wrapper  | 2012/11/14 19:04:39 |   P---- | windir=C:\windows
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_ARCH=x86
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_BIN_DIR=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_BITS=32
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_CONF_DIR=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\conf
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_FILE_SEPARATOR=\
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_HOST_NAME=Scouser-Umang
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_HOSTNAME=Scouser-Umang
INFO   | wrapper  | 2012/11/14 19:04:39 |   P--W- | WRAPPER_INIT_DIR=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_LANG=en
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_OS=windows
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_PATH_SEPARATOR=;
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_PID=6228
INFO   | wrapper  | 2012/11/14 19:04:39 |   ---W- | WRAPPER_WORKING_DIR=D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\bin
INFO   | wrapper  | 2012/11/14 19:04:39 | Environment variables END:
INFO   | wrapper  | 2012/11/14 19:04:39 | 
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Use tick timer mutex=FALSE
DEBUG  | wrapper  | 2012/11/14 19:04:39 | active log file changed: ..\logs\wrapper.log
DEBUG  | wrapper  | 2012/11/14 19:04:39 | Preparing to restart with mode 1.
DEBUG  | wrapperp | 2012/11/14 19:04:40 | server listening on port 32002.
DEBUG  | wrapper  | 2012/11/14 19:04:40 | Magic number for file C:\windows\system32\java.exe: 0x4d5a9000
DEBUG  | wrapper  | 2012/11/14 19:04:40 | Ping settings: wrapper.ping.interval=5, wrapper.ping.interval.logged=1, wrapper.ping.timeout=30
STATUS | wrapper  | 2012/11/14 19:04:40 | Launching a JVM...
DEBUG  | wrapper  | 2012/11/14 19:04:40 | Command: "C:\windows\system32\java.exe" -Djava.library.path="..\lib\\" -classpath "..\lib\wrapper.jar;..\lib\jna\jna.jar;..\lib\jna\platform.jar;..\lib\sqljdbc_4.0\enu\sqljdbc4.jar" -Dwrapper.key="Adm-N04uyX1nT_K1" -Dwrapper.port=32002 -Dwrapper.jvm.port.min=31000 -Dwrapper.jvm.port.max=31999 -Dwrapper.debug="TRUE" -Dwrapper.pid=6228 -Dwrapper.version="3.5.15" -Dwrapper.native_library="wrapper" -Dwrapper.cpu.timeout="10" -Dwrapper.jvmid=1 org.tanukisoftware.wrapper.WrapperSimpleApp ..bin\esq.logreader.DbTestDriver Event_Logger Event_Table Scouser 12345
DEBUG  | wrapper  | 2012/11/14 19:04:40 | JVM started (PID=11784)
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: WrapperManager class initialized by thread: main   Using classloader: sun.misc.Launcher$AppClassLoader@92e78c
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager: Initializing...
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: JVM #1
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Running a 32-bit JVM.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: org.tanukisoftware.wrapper.WrapperManager package information:
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Implementation Title: org.tanukisoftware.wrapper
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Implementation Vendor: Tanuki Software, Ltd.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Implementation Version: 3.5.15
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Is Sealed?: False
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: org.tanukisoftware.wrapper.WrapperManager protection domain:
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Location: file:/D:/Umang/Documents/College/Eclipse%20Work/WindowsEventLogReader/lib/wrapper.jar
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:     Size: 119,430
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:     MD5: 2c0a68dc7fc3dec48d62674afafbfeb6
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Registering shutdown hook
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Using wrapper
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Registered MBean with Platform MBean Server: org.tanukisoftware.wrapper:type=WrapperManager
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Load native library.  There are multiple possible file names and the first to be found will be used.  Errors loading non-existing files is normal and is only a problem if they all fail.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Attempt to load native library with name: wrapper-windows-x86-32.dll  Result: Success!
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug:   Successfully loaded native library.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Loaded localized resources.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Calling native initialization method.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperJNI Debug: Initializing WrapperManager native library.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperJNI Debug: Java Executable: C:\windows\SysWOW64\java.exe
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperJNI Debug: Native Library: D:\Umang\Documents\College\Eclipse Work\WindowsEventLogReader\lib\wrapper-windows-x86-32.dll
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperJNI Debug: Windows version: 6.1.7601
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager: WARNING - The version of the Wrapper which launched this JVM is 
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager:           "3.5.15" while the version of the native library 
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager:           is "3.4.0".
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager:           The Wrapper may appear to work correctly but some features may
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager:           not function correctly.  This configuration has not been tested
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager:           and is not supported.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager: 
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Java Version   : 1.7.0_09-b05 Java HotSpot(TM) Client VM
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Java VM Vendor : Oracle Corporation
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: OS Name        : Windows 7
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: OS Arch        : x86
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: 
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Control event monitor thread started.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Startup runner thread started.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperSimpleApp Error: Unable to locate the class ..bin\esq.logreader.DbTestDriver : java.lang.ClassNotFoundException: //bin\esq/logreader/DbTestDriver
INFO   | jvm 1    | 2012/11/14 19:04:40 | 
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperSimpleApp Usage:
INFO   | jvm 1    | 2012/11/14 19:04:40 |   java org.tanukisoftware.wrapper.WrapperSimpleApp {app_class{/app_method}} [app_arguments]
INFO   | jvm 1    | 2012/11/14 19:04:40 | 
INFO   | jvm 1    | 2012/11/14 19:04:40 | Where:
INFO   | jvm 1    | 2012/11/14 19:04:40 |   app_class:      The fully qualified class name of the application to run.
INFO   | jvm 1    | 2012/11/14 19:04:40 |   app_arguments:  The arguments that would normally be passed to the
INFO   | jvm 1    | 2012/11/14 19:04:40 |                   application.
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: WrapperManager.stop(1) called by thread: main
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Backend not connected, not sending packet STOP : 1
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Pausing for 1,000ms to allow a clean shutdown...
INFO   | jvm 1    | 2012/11/14 19:04:40 | WrapperManager Debug: Stopped checking for control events.
DEBUG  | wrapper  | 2012/11/14 19:04:40 | Pause reading child process output to share cycles.
INFO   | jvm 1    | 2012/11/14 19:04:41 | WrapperManager Debug: Thread, main, handling the shutdown process.
INFO   | jvm 1    | 2012/11/14 19:04:41 | WrapperManager Debug: shutdownJVM(1) Thread: main
INFO   | jvm 1    | 2012/11/14 19:04:41 | WrapperManager Debug: wait for 0 shutdown locks to be released.
INFO   | jvm 1    | 2012/11/14 19:04:41 | WrapperManager Debug: Backend not connected, not sending packet STOPPED : 1
INFO   | jvm 1    | 2012/11/14 19:04:42 | WrapperManager Debug: calling System.exit(1)
DEBUG  | wrapper  | 2012/11/14 19:04:42 | JVM process exited with a code of 1, setting the wrapper exit code to 1.
ERROR  | wrapper  | 2012/11/14 19:04:42 | JVM exited while loading the application.
DEBUG  | wrapper  | 2012/11/14 19:04:42 | Preparing to restart with mode 2.
DEBUG  | wrapper  | 2012/11/14 19:04:42 | JVM was only running for 2 seconds leading to a failed restart count of 1.
DEBUG  | wrapper  | 2012/11/14 19:04:42 | Waiting 5 seconds before launching another JVM.
STATUS | wrapper  | 2012/11/14 19:04:43 | CTRL-C trapped.  Shutting down.
DEBUG  | wrapper  | 2012/11/14 19:04:43 | wrapperStopProcess(0, TRUE) called.
DEBUG  | wrapperp | 2012/11/14 19:04:43 | closing backend server.
STATUS | wrapper  | 2012/11/14 19:04:43 | <-- Wrapper Stopped 
```

我的问题是我做错了什么。我也尝试应用 WrapperListener，同样的错误仍然存​​在。

是否有可能我的目录没有以适当的方式保存。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:10:42.273

本机库的错误是因为wrapper.dll是3.4.0版本，而Wrapper.exe和wrapper.jar的版本是3.5.15。请务必使用相同的版本。

您看到的主要问题是应用程序的启动。错误是说 WrapperSimpleApp 类的主要方法没有接收到正确的参数。

查看您的配置文件，第一个参数是：wrapper.app.parameter.1=esq.logreader.DbTestDriver

这看起来是正确的。但是命令行看起来像这样：..bin\esq.logreader.DbTestDriver

您确定您发布的 wrapper.conf 文件与用于创建 wrapper.log 文件的文件相同吗？从日志输出来看，似乎正在使用以下设置：wrapper.app.parameter.1=..bin\esq.logreader.DbTestDriver

干杯，莱夫

# ios - 如何在 Cocos2d 游戏中有效保存用户设置

> ID：13390263
> 
> 赞同：0
> 
> 时间：2012-11-15T01:29:21.873
> 
> 标签：ios, xml, xml-parsing, cocos2d-iphone, uiswitch

所以我目前有一种为我的 Cocos2d 游戏保存设置的有效方法，我使用的方法是 XML 解析器。

首先，将 NSUserDefaults 用于这样的事情会更好吗？

# *编辑：如果您已经知道 XML 解析器的工作原理，请跳到最后。*

这是我的 GlobalSettings.h：

```
#import <Foundation/Foundation.h>

@interface GlobalSettings : NSObject {

// Declare variables with an underscore in front, for example:
int _currency;
BOOL _BankerBossDefeated;
BOOL _BabyBossDefeated;
BOOL _DuckBossDefeated;
BOOL _BaseBallBossDefeated;
BOOL _NewtonBossDefeated;

BOOL _CatchExtender;
BOOL _CatchExtenderEnabled;
BOOL _SpeedBoost;
BOOL _SpeedBoostEnabled;
}

// Declare your variable properties without an underscore, for example:
@property (nonatomic, assign) int currency;
@property (nonatomic, assign) BOOL BankerBossDefeated;
@property (nonatomic, assign) BOOL BabyBossDefeated;
@property (nonatomic, assign) BOOL DuckBossDefeated;
@property (nonatomic, assign) BOOL BaseBallBossDefeated;
@property (nonatomic, assign) BOOL NewtonBossDefeated;
@property (nonatomic, assign) BOOL SpeedBoost;
@property (nonatomic, assign) BOOL CatchExtender;
@property (nonatomic, assign) BOOL SpeedBoostEnabled;
@property (nonatomic, assign) BOOL CatchExtenderEnabled;

// Put your custom init method interface here:
-(id)initWithcurrency:(int)currency 
BankerBossDefeated:(BOOL)BankerBossDefeated
BabyBossDefeated:(BOOL)BabyBossDefeated
DuckBossDefeated:(BOOL)DuckBossDefeated
BaseBallBossDefeated:(BOOL)BaseBallBossDefeated
NewtonBossDefeated:(BOOL)NewtonBossDefeated
CatchExtender:(BOOL)CatchExtender
       SpeedBoost:(BOOL)SpeedBoost
 CatchExtenderEnabled:(BOOL)CatchExtenderEnabled
       SpeedBoostEnabled:(BOOL)SpeedBoostEnabled;

@end 
```

我的 GlobalSettings.m 是：

```
#import "GlobalSettings.h"

@implementation GlobalSettings

// Synthesize your variables here, for example: 
@synthesize currency = _currency;
@synthesize BankerBossDefeated = _BankerBossDefeated;
@synthesize BabyBossDefeated = _BabyBossDefeated;
@synthesize DuckBossDefeated = _DuckBossDefeated;
@synthesize BaseBallBossDefeated = _BaseBallBossDefeated;
@synthesize NewtonBossDefeated = _NewtonBossDefeated;
@synthesize SpeedBoost = _SpeedBoost;
@synthesize CatchExtender = _CatchExtender;
@synthesize SpeedBoostEnabled = _SpeedBoostEnabled;
@synthesize CatchExtenderEnabled = _CatchExtenderEnabled;

// put your custom init method here which takes a variable 
// for each class instance variable
-(id)initWithcurrency:(int)currency
BankerBossDefeated:(BOOL)BankerBossDefeated
 BabyBossDefeated:(BOOL)BabyBossDefeated
 DuckBossDefeated:(BOOL)DuckBossDefeated
 BaseBallBossDefeated:(BOOL)BaseBallBossDefeated
NewtonBossDefeated:(BOOL)NewtonBossDefeated
    CatchExtender:(BOOL)CatchExtender
       SpeedBoost:(BOOL)SpeedBoost
    CatchExtenderEnabled:(BOOL)CatchExtenderEnabled
       SpeedBoostEnabled:(BOOL)SpeedBoostEnabled;{

if ((self = [super init])) {

    // Set class instance variables based on values 
    // given to this method
    self.currency = currency; 
    self.BankerBossDefeated = BankerBossDefeated;  
    self.BabyBossDefeated = BabyBossDefeated;
    self.DuckBossDefeated = DuckBossDefeated;
    self.BaseBallBossDefeated = BaseBallBossDefeated;
    self.NewtonBossDefeated = NewtonBossDefeated;
    self.CatchExtender = CatchExtender;
    self.SpeedBoost = SpeedBoost;
    self.CatchExtenderEnabled = CatchExtenderEnabled;
    self.SpeedBoostEnabled = SpeedBoostEnabled;
}
return self;
}

- (void) dealloc {
[super dealloc];
}

@end 
```

然后我用 SettingsParser.h 解析 XML：

```
#import <Foundation/Foundation.h>

@class GlobalSettings;

@interface SettingsParser : NSObject {} 

+ (GlobalSettings *)loadData;
+ (void)saveData:(GlobalSettings *)saveData;

@end 
```

和 SettingsParser.m：

```
#import "SettingsParser.h"  
#import "GlobalSettings.h"  
#import "GDataXMLNode.h"

@implementation SettingsParser

+ (NSString *)dataFilePath:(BOOL)forSave {

NSString *xmlFileName = @"GlobalSettings";

/***************************************************************************
 This method is used to set up the specified xml for reading/writing.
 Specify the name of the XML file you want to work with above.
 You don't have to worry about the rest of the code in this method.
 ***************************************************************************/

NSString *xmlFileNameWithExtension = [NSString stringWithFormat:@"%@.xml",xmlFileName];    
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *documentsPath = [documentsDirectory     stringByAppendingPathComponent:xmlFileNameWithExtension];
if (forSave || [[NSFileManager defaultManager] fileExistsAtPath:documentsPath]) {
    return documentsPath;   
    NSLog(@"%@ opened for read/write",documentsPath);
} else {
    NSLog(@"Created/copied in default %@",xmlFileNameWithExtension);
    return [[NSBundle mainBundle] pathForResource:xmlFileName ofType:@"xml"];
}    
}

+ (GlobalSettings *)loadData {

/*************************************************************************** 
 This loadData method is used to load data from the xml file 
 specified in the dataFilePath method above.  

 MODIFY the list of variables below which will be used to create
 and return an instance of TemplateData at the end of this method.
 ***************************************************************************/

int currency;
BOOL BankerBossDefeated;
BOOL BabyBossDefeated;
BOOL DuckBossDefeated;
BOOL BaseBallBossDefeated;
BOOL NewtonBossDefeated;
BOOL CatchExtender;
BOOL SpeedBoost;
BOOL CatchExtenderEnabled;
BOOL SpeedBoostEnabled;

// Create NSData instance from xml in filePath
NSString *filePath = [self dataFilePath:FALSE];
NSData *xmlData = [[NSMutableData alloc] initWithContentsOfFile:filePath];
NSError *error;
GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error];
if (doc == nil) { return nil; NSLog(@"xml file is empty!");}
NSLog(@"Loading %@", filePath);

/*************************************************************************** 
 This next line will usually have the most customisation applied because 
 it will be a direct reflection of what you want out of the XML file.
 ***************************************************************************/

NSArray *dataArray = [doc nodesForXPath:@"//GlobalSettings" error:nil];
NSLog(@"Array Contents = %@", dataArray);

/*************************************************************************** 
 We use dataArray to populate variables created at the start of this 
 method. For each variable you will need to:
    1\. Create an array based on the elements in the xml
    2\. Assign the variable a value based on data in elements in the xml
 ***************************************************************************/

for (GDataXMLElement *element in dataArray) {

    NSArray *currencyArray = [element elementsForName:@"currency"];       
    NSArray *BankerBossDefeatedArray = [element elementsForName:@"BankerBossDefeated"];   
    NSArray *BabyBossDefeatedArray = [element elementsForName:@"BabyBossDefeated"]; 
    NSArray *DuckBossDefeatedArray = [element elementsForName:@"DuckBossDefeated"]; 
    NSArray *BaseBallBossDefeatedArray = [element     elementsForName:@"BaseBallBossDefeated"]; 
    NSArray *NewtonBossDefeatedArray = [element elementsForName:@"NewtonBossDefeated"];
    NSArray *CatchExtenderArray = [element elementsForName:@"CatchExtender"];
    NSArray *SpeedBoostArray = [element elementsForName:@"SpeedBoost"];
    NSArray *CatchExtenderEnabledArray = [element elementsForName:@"CatchExtenderEnabled"];
    NSArray *SpeedBoostEnabledArray = [element elementsForName:@"SpeedBoostEnabled"];

    // currency
    if (currencyArray.count > 0) {
        GDataXMLElement *currencyElement = (GDataXMLElement *) [currencyArray objectAtIndex:0];
        currency = [[currencyElement stringValue] intValue];
    } 

    // BankerBossDefeated    
    if (BankerBossDefeatedArray.count > 0) {
        GDataXMLElement *BankerBossDefeatedElement = (GDataXMLElement *) [BankerBossDefeatedArray objectAtIndex:0];
        BankerBossDefeated = [[BankerBossDefeatedElement stringValue] boolValue];
    }

    // DuckBossDefeated    
    if (DuckBossDefeatedArray.count > 0) {
        GDataXMLElement *DuckBossDefeatedElement = (GDataXMLElement *) [DuckBossDefeatedArray objectAtIndex:0];
        DuckBossDefeated = [[DuckBossDefeatedElement stringValue] boolValue];
    }

    // BabyBossDefeated    
    if (BabyBossDefeatedArray.count > 0) {
        GDataXMLElement *BabyBossDefeatedElement = (GDataXMLElement *) [BabyBossDefeatedArray objectAtIndex:0];
        BabyBossDefeated = [[BabyBossDefeatedElement stringValue] boolValue];
    }

    // BaseBallBossDefeated    
    if (BaseBallBossDefeatedArray.count > 0) {
        GDataXMLElement *BaseBallBossDefeatedElement = (GDataXMLElement *) [BaseBallBossDefeatedArray objectAtIndex:0];
        BaseBallBossDefeated = [[BaseBallBossDefeatedElement stringValue] boolValue];
    }

    // NewtonBossDefeated    
    if (NewtonBossDefeatedArray.count > 0) {
        GDataXMLElement *NewtonBossDefeatedElement = (GDataXMLElement *) [NewtonBossDefeatedArray objectAtIndex:0];
        NewtonBossDefeated = [[NewtonBossDefeatedElement stringValue] boolValue];
    }
    // CatchExtender
    if (CatchExtenderArray.count > 0) {
        GDataXMLElement *CatchExtenderElement = (GDataXMLElement *) [CatchExtenderArray objectAtIndex:0];
        CatchExtender = [[CatchExtenderElement stringValue] boolValue];
    }
    // SpeedBoost
    if (SpeedBoostArray.count > 0) {
        GDataXMLElement *SpeedBoostElement = (GDataXMLElement *) [SpeedBoostArray objectAtIndex:0];
        SpeedBoost = [[SpeedBoostElement stringValue] boolValue];
    }

    // CatchExtenderEnabled
    if (CatchExtenderEnabledArray.count > 0) {
        GDataXMLElement *CatchExtenderEnabledElement = (GDataXMLElement *) [CatchExtenderEnabledArray objectAtIndex:0];
        CatchExtenderEnabled = [[CatchExtenderEnabledElement stringValue] boolValue];
    }
    // SpeedBoost
    if (SpeedBoostEnabledArray.count > 0) {
        GDataXMLElement *SpeedBoostEnabledElement = (GDataXMLElement *) [SpeedBoostEnabledArray objectAtIndex:0];
        SpeedBoostEnabled = [[SpeedBoostEnabledElement stringValue] boolValue];
    }

}

/*************************************************************************** 
 Now the variables are populated from xml data we create an instance of
 TemplateData to pass back to whatever called this method.

 The initWithExampleInt:exampleBool:exampleString will need to be replaced
 with whatever method you have updaed in the TemplateData class.
 ***************************************************************************/

//NSLog(@"XML value read for exampleInt = %i", exampleInt);
//NSLog(@"XML value read for exampleBool = %i", exampleBool);
//NSLog(@"XML value read for exampleString = %@", exampleString);

GlobalSettings *Data = [[GlobalSettings alloc] initWithcurrency:currency
                                                  BankerBossDefeated:BankerBossDefeated
                                               BabyBossDefeated:BabyBossDefeated     DuckBossDefeated:DuckBossDefeated BaseBallBossDefeated:BaseBallBossDefeated     NewtonBossDefeated:NewtonBossDefeated
                                                  CatchExtender:CatchExtender
                                                     SpeedBoost:SpeedBoost     CatchExtenderEnabled:CatchExtenderEnabled
                                                     SpeedBoostEnabled:SpeedBoostEnabled];

[doc release];
[xmlData release];
return Data;
[Data release];
}

+ (void)saveData:(GlobalSettings *)saveData {

/*************************************************************************** 
 This method writes data to the xml based on a TemplateData instance
 You will have to be very aware of the intended xml contents and structure
 as you will be wiping and re-writing the whole xml file.

 We write an xml by creating elements and adding 'children' to them.

 You'll need to write a line for each element to build the hierarchy // <-- MODIFY CODE ACCORDINGLY
 ***************************************************************************/

GDataXMLElement *GlobalSettingsElement = [GDataXMLNode elementWithName:@"GlobalSettings"];

GDataXMLElement *currencyElement = [GDataXMLNode elementWithName:@"currency" 
                                                       stringValue:[[NSNumber numberWithInt:saveData.currency] stringValue]];

GDataXMLElement *BankerBossDefeatedElement = [GDataXMLNode elementWithName:@"BankerBossDefeated"   
                                                        stringValue:[[NSNumber numberWithBool:saveData.BankerBossDefeated] stringValue]];

GDataXMLElement *BabyBossDefeatedElement = [GDataXMLNode elementWithName:@"BabyBossDefeated"   
                                                               stringValue:[[NSNumber numberWithBool:saveData.BabyBossDefeated] stringValue]];

GDataXMLElement *DuckBossDefeatedElement = [GDataXMLNode elementWithName:@"DuckBossDefeated"   
                                                               stringValue:[[NSNumber numberWithBool:saveData.DuckBossDefeated] stringValue]];

GDataXMLElement *BaseBallBossDefeatedElement = [GDataXMLNode elementWithName:@"BaseBallBossDefeated"   
                                                               stringValue:[[NSNumber numberWithBool:saveData.BaseBallBossDefeated] stringValue]];

GDataXMLElement *NewtonBossDefeatedElement = [GDataXMLNode elementWithName:@"NewtonBossDefeated"   
                                                               stringValue:[[NSNumber numberWithBool:saveData.NewtonBossDefeated] stringValue]];
GDataXMLElement *CatchExtenderElement = [GDataXMLNode elementWithName:@"CatchExtender"
                                                               stringValue:[[NSNumber numberWithBool:saveData.CatchExtender] stringValue]];
GDataXMLElement *SpeedBoostElement = [GDataXMLNode elementWithName:@"SpeedBoost"
                                                               stringValue:[[NSNumber numberWithBool:saveData.SpeedBoost] stringValue]];
GDataXMLElement *CatchExtenderEnabledElement = [GDataXMLNode elementWithName:@"CatchExtenderEnabled"
                                                          stringValue:[[NSNumber numberWithBool:saveData.CatchExtender] stringValue]];
GDataXMLElement *SpeedBoostEnabledElement = [GDataXMLNode elementWithName:@"SpeedBoostEnabled"
                                                       stringValue:[[NSNumber numberWithBool:saveData.SpeedBoost] stringValue]];

// Using the elements just created, set up the hierarchy
[GlobalSettingsElement addChild:currencyElement];
[GlobalSettingsElement addChild:BankerBossDefeatedElement];
[GlobalSettingsElement addChild:BabyBossDefeatedElement];
[GlobalSettingsElement addChild:DuckBossDefeatedElement];
[GlobalSettingsElement addChild:BaseBallBossDefeatedElement];
[GlobalSettingsElement addChild:NewtonBossDefeatedElement];
[GlobalSettingsElement addChild:CatchExtenderElement];
[GlobalSettingsElement addChild:SpeedBoostElement];
[GlobalSettingsElement addChild:CatchExtenderEnabledElement];
[GlobalSettingsElement addChild:SpeedBoostEnabledElement];

GDataXMLDocument *document = [[[GDataXMLDocument alloc] 
                               initWithRootElement:GlobalSettingsElement] autorelease];

NSData *xmlData = document.XMLData;

NSString *filePath = [self dataFilePath:TRUE];
NSLog(@"Saving data to %@...", filePath);
[xmlData writeToFile:filePath atomically:YES];
}

@end 
```

# **编辑：实际问题从这里开始：**

在我的菜单类中，当 CatchExtender 和 SpeedBoost 启用时，我有两个开关（它们是在游戏商店中购买的）。在这些开关中，我想根据开关设置 SpeedBoostEnabled 和 CatchExtenderEnabled。

这些是开关：

在我的初始化中：

```
if (GlobalSettings.CatchExtender == TRUE) {
        if(GlobalSettings.SpeedBoost == TRUE){
            catchSwitch = [[ UISwitch alloc ] initWithFrame: CGRectMake(220, 400, 10, 10)];
            catchSwitch.center = CGPointMake(240, 450);

            CCLabelTTF *catchLabel = [CCLabelTTF labelWithString:@"Catch Extender" fontName:@"Chalkduster" fontSize:15];
            catchLabel.color = ccWHITE;
            catchLabel.position = CGPointMake(240, 60);
            [self addChild: catchLabel];
        }else{
            catchSwitch = [[ UISwitch alloc ] initWithFrame: CGRectMake(160, 400, 10, 10)];
            catchSwitch.center = CGPointMake(160, 450);
            CCLabelTTF *catchLabel = [CCLabelTTF labelWithString:@"Catch Extender" fontName:@"Chalkduster" fontSize:15];
            catchLabel.color = ccWHITE;
            catchLabel.position = CGPointMake(160, 60);
            [self addChild: catchLabel];
        }

        catchSwitch.on = NO;  //set to be OFF at start
        catchSwitch.tag = 1;  // this is not necessary - only to find later
        [catchSwitch addTarget:self action:@selector(catchAction:) forControlEvents:UIControlEventValueChanged];
        [[[CCDirector sharedDirector] openGLView] addSubview:catchSwitch];

    }

    if (GlobalSettings.SpeedBoost == TRUE) {
        if(GlobalSettings.CatchExtender == TRUE){
            speedSwitch = [[ UISwitch alloc ] initWithFrame: CGRectMake(100, 400, 10, 10)];
            speedSwitch.center = CGPointMake(80, 450);
            CCLabelTTF *speedLabel = [CCLabelTTF labelWithString:@"Speed Enhancer" fontName:@"Chalkduster" fontSize:15];
            speedLabel.color = ccWHITE;
            speedLabel.position = CGPointMake(80, 60);
            [self addChild: speedLabel];
        }else{
            speedSwitch = [[ UISwitch alloc ] initWithFrame: CGRectMake(160, 400, 10, 10)];
            speedSwitch.center = CGPointMake(160, 450);
        }

        speedSwitch.on = NO;  //set to be OFF at start
        speedSwitch.tag = 1;  // this is not necessary - only to find later
        [speedSwitch addTarget:self action:@selector(speedAction:) forControlEvents:UIControlEventValueChanged];
        [[[CCDirector sharedDirector] openGLView] addSubview:speedSwitch];
    } 
```

在行动中：

```
- (void)catchAction:(id)sender
{
// Your logic when the switch it used
// NSLog(@"switchAction: value = %d", [sender isOn]);
if ([sender isOn]) {
    GlobalSettings *GlobalSettings = [SettingsParser loadData];
    GlobalSettings.CatchExtenderEnabled = TRUE;

    UIAlertView* dialog = [[UIAlertView alloc] init];
    [dialog setDelegate:self];
    [dialog setTitle:@"ON"];
    [dialog setMessage:@"Catch Extender is on"];
    [dialog addButtonWithTitle:@"Sweet!"];
    [dialog show];
    [dialog release];
    [SettingsParser saveData:GlobalSettings];

}else{
    GlobalSettings *GlobalSettings = [SettingsParser loadData];
    GlobalSettings.CatchExtenderEnabled = FALSE;
    UIAlertView* dialog = [[UIAlertView alloc] init];
    [dialog setDelegate:self];
    [dialog setTitle:@"OFF"];
    [dialog setMessage:@"Catch Extender is off"];
    [dialog addButtonWithTitle:@"Thanks"];
    [dialog show];
    [dialog release];
    [SettingsParser saveData:GlobalSettings];
}
}

- (void)speedAction:(id)sender
{
// Your logic when the switch it used
// NSLog(@"switchAction: value = %d", [sender isOn]);
if ([sender isOn]) {
    GlobalSettings *GlobalSettings = [SettingsParser loadData];
    GlobalSettings.SpeedBoostEnabled = TRUE;

    UIAlertView* dialog = [[UIAlertView alloc] init];
    [dialog setDelegate:self];
    [dialog setTitle:@"ON"];
    [dialog setMessage:@"Speed Enhancer is on"];
    [dialog addButtonWithTitle:@"Sweet!"];
    [dialog show];
    [dialog release];
    [SettingsParser saveData:GlobalSettings];

}else{
    GlobalSettings *GlobalSettings = [SettingsParser loadData];
    GlobalSettings.SpeedBoostEnabled = FALSE;
    UIAlertView* dialog = [[UIAlertView alloc] init];
    [dialog setDelegate:self];
    [dialog setTitle:@"OFF"];
    [dialog setMessage:@"Speed Enhancer is off"];
    [dialog addButtonWithTitle:@"Thanks"];
    [dialog show];
    [dialog release];
    [SettingsParser saveData:GlobalSettings];
    }
} 
```

在保存游戏关卡数据的类中，我通常使用一个简单的 if 语句检查这些布尔值。但它似乎不起作用，设置似乎没有保存，因为在日志中，XML 文件中的值似乎没有改变..

再次对长篇文章感到抱歉，但这个问题有点困扰我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:37:14.487

我以前从未使用过 Cocos2D，但这看起来就像您`NSUserDefaults`在典型的 iOS 应用程序中使用的一样，如下所示：`[[NSUserDefaults standardUserDefaults] setBool:YES ForKey:@"Key"];`

# python - 在python中的一行中读取两个单独的值

> ID：13390264
> 
> 赞同：1
> 
> 时间：2012-11-15T01:29:24.520
> 
> 标签：python, turtle-graphics

我需要你的帮助。到目前为止，这是我的程序

```
import turtle
turtle.showturtle()

def turtle_interface():
    while True :
          n = 0
          instructions = input().split()
          i = instructions[0]
          if len(instructions) > 1:
              n = int(instructions[1])
              if i == 'forward' :
                  turtle.forward(n)
              elif i == 'backward' :
                  turtle.backward(n)
              elif i == 'left' :
                  turtle.left(n)
              elif i == 'right' :
                  turtle.right(n)
              elif i == 'quit' :
                  break
              elif i == 'new' :
                  turtle.reset()
              else :
                  continue

print('Control the turtle!')
turtle_interface() 
```

如您所见，当字符串后面没有 [n] 时，它会被忽略。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:36:18.287

我想是因为`if len(instructions) > 1:`考试。如果字符串后面没有[n]，那么只有一条指令，长度不会大于1。

你应该尝试这样的事情：

```
def turtle_interface():
    while True :
          n = 0
          instructions = input().split()
          i = instructions[0]
          if len(instructions) > 1:
              n = int(instructions[1])
              if i == 'forward' :
                  turtle.forward(n)
              elif i == 'backward' :
                  turtle.backward(n)
              elif i == 'left' :
                  turtle.left(n)
              elif i == 'right' :
                  turtle.right(n)
          elif i == 'new' :
              turtle.reset()
          elif i == 'quit' :
              break 
```

注意 . 行的缩进和位置`if i == 'new'`。

# html - Rails：使用 Bootstrap 输入样式替换 Rails 中内置的 form_for 方法

> ID：13390267
> 
> 赞同：1
> 
> 时间：2012-11-15T01:29:38.360
> 
> 标签：html, css, ruby-on-rails, forms

我正在尝试在 Rails中使用[Bootstrap 表单。](http://twitter.github.com/bootstrap/base-css.html#forms)但是在检查了我的后脚手架创建的 _form 部分后，我不太确定如何使用常规输入法编辑变量。

**例如，这是内置的表单代码：**

```
<%= form_for(@post) do |f| %>

<div class="field">
 <%= f.label :name %><br />
 <%= f.text_field :name %>
</div>
<div class="field">
 <%= f.label :content %><br />
 <%= f.text_area :content %>
</div>
 <div class="actions">
 <%= f.submit %>
</div>

<% end %> 
```

**我想使用下面的表单代码：**

```
<form>
<fieldset>
<legend>Start posting</legend>
<label>Name</label>
 <input class="span10" type="text" placeholder="Name: ">
<label>Content</label>
 <input class="span10" type="text" placeholder="Content: ">
<textarea rows="10"></textarea>
<button type="submit" class="btn">Submit</button>
</fieldset>
</form> 
```

**问题：如何使用 Bootstrap 版本的表单代码？**

我尝试过类似的东西..

```
<input class="span10" type="text" name="@post.name" placeholder="Type in name: ">
<button type="submit" class="btn">Submit</button> 
```

但这似乎不起作用。我认为 Bootstrap 提交按钮没有指向正确的方向，所以我也尝试了以下操作：

```
<input class="span10" type="text" name="@post.name" placeholder="Type in name: ">
<%= form_for(@post) do |f| %>
 <%= f.submit %>
<% end %> 
```

有人可以帮我吗？我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:48:22.780

您应该将 twitter-bootstrap-rails gem 添加到您的应用程序中，而不是手动执行此操作。在这里查看说明和文档：[twitter-bootstrap-rails gem](https://github.com/seyhunak/twitter-bootstrap-rails)

That will do the trick!

# php - PHP“意外的$end”

> ID：13390268
> 
> 赞同：7
> 
> 时间：2012-11-15T01:30:01.623
> 
> 标签：php, syntax

我实际上检查了我的代码一百次，但我找不到错误：

我得到的错误：解析错误：语法错误，第 46 行 /home/tennox/public_html/php/kalender.php 中的意外 $end

我试图做一个计算复活节星期天的函数，在另一个没有其他脚本的脚本中它只是工作，但在这个不是。反过来也是一样！

```
<?php
$year = isset($_POST['year']) ? intval($_POST['year']) : date('Y');
$months = array("", "Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember");
$days = array('So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa');
$ostern = getOsterSonntag($year);
?>
<form action="kalender.php" method="POST" target="_self">
<input type="text" name="year" value="<?php echo $year; ?>">
</form>
<table border="1" cellspacing="0">
<?php
for($y=0; $y<32; $y++) {
   echo "<tr height=\"20\">";
   for($x=1; $x<=12; $x++) {
      echo "<td width=\"5%\">";
      $date = strtotime("$y.$x.$year");
      $day = date("d", $date);
      $dayname = $days[date("w", $date)];

      if ($y == 0) {
         echo "<div align=\"center\"><b>$months[$x]</b></div>";
      } elseif ($y < date("t",$date) && !($y == 30 && $x == 2)) {
         if (date("w", $date) == 6 || date("w", $date) == 0)
            echo "<b>";
         echo "$day $dayname";
         if ($date == $ostern)
            echo "(Ostersonntag)";
         if (date("w", $date) == 6 || date("w", $date) == 0)
            echo "</b>";
      } else {
         echo "   -   ";
      }
      echo "</td>";
   }
   echo "</tr>";
}
?>
</table>

<?php
function getOsterSonntag($year) {
   $a = $year % 19;
   $b = $year % 4;
   $c = $year % 7;
   $k = floor($year / 100);
   $p = floor((8*$k + 13) / 25);
   $q = ($k / 4);
   $d = (19*$a + ((15 + $k - $p - $q) % 30)) % 30;
   $e = (2*$b + 4*$c + 6*$d + ((4 + $k - $q) % 7)) % 7;

   $ostern = 22 + $d + $e;
   if ($ostern > 31){
      $ostern -= 31;
      return strtotime("$ostern.4.$year");
   } else
      return strtotime("$ostern.3.$year");
}
?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T02:07:17.417

该错误意味着 PHP 已完成分析您的代码，但您忘记关闭页面中某处的符号。要么您忘记关闭引号、括号、括号或逗号。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T01:32:33.147

此错误通常意味着您错过了一个`}`. 检查所有大括号并确保您有相同数量的`{`as `}`- 带有括号匹配的代码编辑器（例如 Notepad++）可以使这更容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T02:47:13.537

在这部分代码中，我认为您应该为 else 添加 { }。

```
 $ostern = 22 + $d + $e;
       if ($ostern > 31){
          $ostern -= 31;
          return strtotime("$ostern.4.$year");
       } else
          return strtotime("$ostern.3.$year"); 
```

在这部分中也将 { } 放在这部分中，如下所示：

```
if (date("w", $date) == 6 || date("w", $date) == 0) {
      echo "<b>";
      echo "$day $dayname";
} 
```

# ruby-on-rails - Rails 充当 Messageable 设置表单

> ID：13390270
> 
> 赞同：0
> 
> 时间：2012-11-15T01:30:21.773
> 
> 标签：ruby-on-rails, forms, controller

我正在尝试将[行为用作能够发送消息的 gem](https://github.com/LTe/acts-as-messageable)，并且我正在关注他们的示例[控制器](https://github.com/LTe/acts-as-messageable/wiki/Example-controller)

**已解决 查看答案**

尝试在视图中发送消息时，我不断收到此错误**undefined method `send_message' for nil:NilClass**

我应该如何调整我的代码？谢谢

**查看（表格）**

```
 <%= simple_form_for ActsAsMessageable::Message.new, :url => messages_path, :method => :post do |f| %>
                <%= f.hidden_field :to, value: @gear.user.email %>
                <%= f.input :body %>
                <%= f.input :topic %>
                <%= f.button :submit, class: 'btn' %>
            <% end %> 
```

**用户模型**

```
class User < ActiveRecord::Base 
  acts_as_messageable :table_name => "messages",                         # default 'messages'
                      :required   => [:topic, :body],                     # default [:topic, :body]
                      :class_name => "ActsAsMessageable::Message",       # default "ActsAsMessageable::Message",
                      :dependent  => :nullify                            # default :nullify

end 
```

**消息控制器**

```
class MessagesController < ApplicationController
  def new
    @message = ActsAsMessageable::Message.new
  end

  def create
    @to = User.find_by_email(params[:acts_as_messageable_message][:to])
    current_user.send_message(@to, params[:acts_as_messageable_message][:topic], params[:acts_as_messageable_message][:body])
  end
end 
```

**开发日志**

```
Started POST "/messages" for 127.0.0.1 at 2012-11-15 07:23:40 -0600
Processing by MessagesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OqaDOP6PldbFVXWPZyijn+887Ym/fDsU0oqzVrL0rQA=", "acts_as_messageable_message"=>{"to"=>"xyz@test.com", "body"=>"test", "topic"=>"test"}, "commit"=>"Create Message"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'xyz@test.com' LIMIT 1
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `send_message' for nil:NilClass):
  app/controllers/messages_controller.rb:29:in `create 
```

'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:59:41.273

从错误消息和提供的代码看来，您的 params obj 的格式不像您想的那样。试一试`params[:acts_as_messageable_message]`，而不是`[:message]`. 如果这不起作用，请检查日志以查看作为参数传入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:15:09.870

我最终让它工作了。最终的问题是 gem 使用的是用户模型，并且期望控制器是用户控制器，而不是另一个名为“消息”的控制器。所以我只是将我的操作移到了我的用户控制器中，添加了路由并更改了视图路径，它现在可以工作了。@Alex.Bullard 感谢您的帮助。

我在下面发布我的编辑：

**控制器变更**

```
class UsersController < ApplicationController
  respond_to :html, :json
  def new_message
    @message = ActsAsMessageable::Message.new
  end

  def create_message
    @to = User.find_by_email(params[:acts_as_messageable_message][:to])
    current_user.send_message(@to, params[:acts_as_messageable_message][:topic], params[:acts_as_messageable_message][:body])
    redirect_to :back, notice: "Message sent to Owner"
  end

end 
```

**看法**

```
 <%= simple_form_for ActsAsMessageable::Message.new, :url => create_message_users_path, :method => :post do |f| %>
                <%= f.hidden_field :to, value: @gear.user.email %>
                <%= f.input :body %>
                <%= f.input :topic %>
                <%= f.button :submit, class: 'btn' %>
            <% end %> 
```

**路线**

```
 resources :users, :except => [ :create, :new ] do
     get "new_message", :on => :collection
     post "create_message", :on => :collection
     resources :store
  end 
```

# amazon-s3 - aws s3 - s3cmd：“警告：MD5 签名不匹配：” - 做什么？

> ID：13390271
> 
> 赞同：23
> 
> 时间：2012-11-15T01:30:23.553
> 
> 标签：amazon-s3, amazon-web-services

当我使用 s3cmd 下拉文件（大小不合理 - 小于 100 兆字节）时，我偶尔会看到此错误：警告：MD5 签名不匹配：计算 = BLAH，收到 =“NOT-BLAH”

谷歌搜索表明这可能是由 S3 分割文件的方式引起的。其他人说忽略它。

有谁知道为什么会发生这种情况以及正确的做法是什么？

谢谢你的时间，--亨利

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-18T22:07:27.517

深入研究，似乎 s3cmd 从亚马逊读取了错误的 md5 总和。看起来 s3cmd 似乎是从 ETAG 字段中得到它的总和。将 PUT 对象的实际数据与 GET 对象的实际数据进行比较，内容是相同的，可以安全地忽略此错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-20T01:22:16.890

如果文件以“Multipart”的形式上传，则 S3 中文件的 ETag 将与 MD5 不匹配。当一个文件被标记为多部分时，AWS 将对每个部分进行哈希处理，连接结果，然后对该值进行哈希处理。

如果文件实际上没有多个部分，则结果将是散列的散列，末尾添加了 -1。尝试在用于将文件上传到 S3 的工具中禁用 multipart。对于 s3cmd，选项是 --disable-multipart。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-01T18:26:17.280

如果文件是使用 S3 分段上传功能上传的（通常用于大于 15MB 的文件或从标准输入读取的文件），则需要在其中包含“-”的 ETag。s3cmd 1.5.2 知道这一点并忽略此类 ETag。如果您的 s3cmd 早于 1.5.2，请升级。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-20T18:16:37.207

这是一个更大的问题，因为您使用的是 s3cmd sync，因为它会导致它重新下载以前同步的文件。要解决这个问题，请添加`--no-check-md5`选项，这会导致 s3cmd 仅检查文件大小以确定更改的文件（这对我的目的很有用，但可能并不适合所有人，具体取决于应用程序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T02:31:40.833

大约一个小时前我看到了 S3 目前正遇到这个问题的报告，例如[这条推文](https://twitter.com/ylastic/status/268884514518999040)：

> RT @drags：@ylastic S3 也将不正确的 md5s 返回到 s3cmd。在 AWS 之前，从未见过带有“-”的 md5。#AWS #S3

尽管[AWS 状态页面](http://status.aws.amazon.com/)没有报告任何问题，但我预计这是一个暂时性问题。很快再试一次:-)

# php - 使用 HTTP GET/POST 向/从中型/大型数据库传输数据是一个好主意吗？

> ID：13390273
> 
> 赞同：1
> 
> 时间：2012-11-15T01:30:30.533
> 
> 标签：php, sql, windows-phone-7, http, post

使用 PHP 脚本和 http POST/GET 将值输入到大中型数据库是个好主意吗？即它是否可靠？会安全吗？它会是可扩展的吗？等等。

数据库本质上是 PostgreSQL 或 MySql。我正在为 Windows Phone 7 开发应用程序，并且没有用于 MySQL 或 PostgreSQL 的 SQL 库，因此我被迫使用 MS SQL 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:46:20.407

也许。要看。

HTTP 是一种传输小块数据的合理方式——它并不是真正为将大量数据从客户端移动到服务器而设计的——因此，许多*实现*(1) 限制了您可以移动的数据量。这些包括客户端和服务器之间的所有网络设备（特别是防火墙和代理）。

如果您传输的字节数超过 512 个字节，那么使用 POST 而不是 GET 应该会更可靠。由于您是从带宽有限的移动设备传输数据，因此设备能够保持连接的时间可能会明显减少。为了获得可靠的传输和良好的用户体验，您希望以小块（一次一条记录？）传输数据。

为什么不在 HTML5 中实现呢？这将使移植到 iOS / Android / Microsoft 的下一个开发平台变得更加容易。

(1) 协议本身不限制大小。

# cocos2d-iphone - 如何使 CCMenuItemImage 在触摸按下时调用选择器（而不是触摸释放）

> ID：13390274
> 
> 赞同：0
> 
> 时间：2012-11-15T01:30:41.947
> 
> 标签：cocos2d-iphone

CCMenuItemImage 将在按下它的触摸释放它后调用选择器。

*但是，触摸按下它就*不能让它调用选择器吗？这是为了在菜单中创建更快的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:59:03.370

子类 CCMenuItemImage 并处理事件

```
-(void) selected{
    // do you thing : for example you could have a target:selector pair of 
    // properties added in your implementation.
    [super selected];
} 
```

我用它来检测长触摸并弹出上下文工具提示窗口（例如）。

# c++ - 当我创建一个 int 指针并实例化一个数组时，该数组在内存中发生了什么？

> ID：13390276
> 
> 赞同：0
> 
> 时间：2012-11-15T01:30:59.747
> 
> 标签：c++, c

可以说我做这样的事情

```
int *array;
array = new int[10]; 
```

这个数组的内存是如何设置的？什么类型`array[0]`？（一个指针？一个整数？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:35:37.593

此代码首先为称为数组的指针分配空间。该内存在堆栈上分配。

接下来，它从堆中分配一块内存来保存 10 个整数，并将地址分配给`array`.

`array[0]`将引用 10 块中的第一个整数。下标使其成为值而不是指针。

看在上帝的份上，开始接受人们给你的一些答案吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:34:52.877

在这种情况下，`array[0]`具有 int 类型。

内存只是一个指向内存的指针，用于保存分配在空闲存储区某处的 10 个整数（主要翻译为：“老实说，我们并不关心它的地址，我们只关心它是我们的内存并且我们可以使用它'直到我们删除它'）。

请注意，在这种情况下，您依赖于最初在 C: 中定义的等价，`x[y]`它等价于`*(x+y)`. 在这种情况下，你`x`是一个指针，并且指针的加法发生在它指向的类型的大小的增量中，所以当我们使用 时，我们会得到指向的内存中的第`array[N]`N^项`array`。

一个小细节：你不应该这样做——可能永远不会。在 C++中使用几乎*没有*充分的理由。`new type[size]`有一次我们这样做是因为`std::vector`还没有更好的替代品（例如 ）——但现在这是一个糟糕的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T01:35:01.373

array[0] 作为数组的一个元素，是一个 int。

array 已被声明为指向 int 的指针。

在内存中，“新”调用分配一个空间块来保存十个整数。'array' 是指向该块开始的指针。array[0] 是第一个元素。array[1] 是第二个，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T02:34:20.457

> 这个数组的内存是如何设置的？

`new int[10]`将从空闲存储中动态分配足够的内存以包含十个类型的值`int`。它为您提供了指向该内存的指针，您将其存储在`array`变量中。

`array`本身是指针类型的自动变量；它通常存储在为当前函数调用自动分配的堆栈区域中，并在函数返回时被释放。

完成内存后，您必须使用`delete [] array`. 由于很容易出错，因此通常最好使用智能指针或容器等[RAII类型来管理动态资源。](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)在这种情况下，`std::vector<int> array(10)`将为您提供一个相同大小的数组，并在超出范围时自动为您删除它。

> 什么类型`array[0]`？

`array[0]`是 的数组的第一个元素`int`，所以它的类型是`int`。

# jena - 与 Jena 一起在 Top Class 之前找到一个班级的 Super Class

> ID：13390282
> 
> 赞同：0
> 
> 时间：2012-11-15T01:32:09.233
> 
> 标签：jena, ontology, owl

我正在使用耶拿框架来处理我的猫头鹰本体。

我想写一个方法来找到它所属的超类，它就在 Thing 类下面。

四个例子，如果有 5 级层次结构，假设第一级是 Thing，第二级是 secondAncestor，第三级是 ThirdAncestor，依此类推。如果我通过一个类 FifthAncestor，我想返回 SecondAncestor，因为 Thing 没有任何意义。如果我通过 ThirdAncestor，我想返回 SecondAncestor。换句话说，它属于最一般的类，但不是顶级的（事物）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:22:48.690

**方法一**

这将取决于您的模型是否具有推理器，因为`owl:Thing`通常不会在模型中断言，因此不会出现在没有推理器的模型中。鉴于此，那么：

```
OntModel m = ... your OntModel ...;
OntClass thing = m.getOntClass( OWL.Thing.getURI() );
for (Iterator<OntClass> i = thing.listSubClasses(true); i.hasNext(); ) {
    OntClass hierarchyRoot = i.next();
    ....
} 
```

注意调用中标志的`direct = true`使用`listSubClasses()`。

**方法二**

不需要推理机。

```
for (Iterator<OntClass> i = m.listHierarchyRootClasses(); i.hasNext(); ) {
    OntClass hierarchyRoot = i.next();
    ....
} 
```

请注意，此方法将返回根类，即使它们是代表类表达式的匿名资源。出于 UI 目的，这通常不是您想要的（很难以有意义的方式向用户显示 bNode）。在这种情况下，请改用[OntTools.namedHierarchyRoots](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntTools.html#namedHierarchyRoots%28com.hp.hpl.jena.ontology.OntModel%29)。

**更新**

我现在明白 Alan 想要作为特定类的父类的根类，而`namedHierarchyRoots`将列出类层次结构的*所有*根类。请注意，一般来说，一个类在它和 之间可能有零个、一个或多个命名超类`Thing`。

无论如何，这就是我将如何解决这个问题。同样，此解决方案假定模型*未*使用推理器。有了推理器，它会容易得多：

```
private boolean hasSubClassTransitive( OntClass parent, OntClass child ) {
    return OntTools.findShortestPath( child.getOntModel(), child, parent,
                                      new OntTools.PredicateFilter( RDFS.subClassOf ) ) != null;
}

public List<OntClass> namedRootsOf( OntClass c ) {
    List<OntClass> cRoots = new ArrayList<OntClass>();
    for (OntClass root: OntTools.namedHierarchyRoots( c.getOntModel() )) {
        if (hasSubClassTransitive( root, c )) {
            cRoots.add( root );
        }
    }
    return cRoots;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:19:16.030

我在不使用推理器的情况下以下列方式找到解决方案。这不是完美的解决方案，但它有效。如果您将未命名（匿名）类作为超类，此解决方案也可以解决问题。

首先，我创建了一个存储顶级类名的数组。

如果传递的参数是顶级类，则在我创建的数组中搜索的简单方法。

```
public Boolean IsTopClass(String ontologyClass)
  {
              //NS is URI of ontology
      String onClass=ontologyClass.replace(NS, "");

      for(String oClass: topLevelClassList)
      {
          if(oClass.equalsIgnoreCase(onClass))
              return true;
      }
      return false;

  } 
```

然后是在事物下找到最通用类的主要方法：

```
 public String FindSuperClassUnderThing(OntClass subClass)
  {

     OntClass prevSubClass=subClass;
     OntClass prevprevSubClass=null;         

     String topClass="";

     String supClass=subClass.toString();
     ExtendedIterator<OntClass> superClassList=null;
    while(!this.IsTopClass(topClass))
    {   
        prevprevSubClass=prevSubClass;
        prevSubClass=prevSubClass.getSuperClass();
                    //if returned class is a anonymous class (not a named one)
                    //get list of superclasses and check if there is a topclass
                    //inside the super class list
        if(!prevSubClass.toString().startsWith(NS))
        {
            prevSubClass=prevprevSubClass;
             superClassList= prevSubClass.listSuperClasses();

             while(superClassList.hasNext())
                {
                   OntClass OntClassFromList= superClassList.next();
                    if(this.IsTopClass(OntClassFromList.toString()))
                    {
                    topClass= OntClassFromList.toString();
                    }
                }

        }
        else
        {
            if (this.IsTopClass(prevSubClass.toString()))
            {
                topClass= prevSubClass.toString();
            }
        }

    }

     return topClass;
} 
```

# php - 如何在 php 文件完成运行之前关闭与服务器的连接？

> ID：13390287
> 
> 赞同：3
> 
> 时间：2012-11-15T01:32:27.277
> 
> 标签：php, http-request

例如

```
<?php

//GetParameters here

//send response/end connection

//keep executing the script with the retrieved parameters. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:34:12.883

你可以这样做，只是可能需要一些修补。您需要使用不同的脚本处理数据，而不是尝试关闭第一个脚本上的连接。

```
<?php

//Get Parameters

//Send output to user

//now use curl to access other script

$post = http_build_query($_POST); // you can replace this with a processed array

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/otherscript.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_exec($ch);
curl_close($ch);

?> 
```

其他脚本.php

```
<?php

header( "Connection: Close" );

// do your processing

?> 
```

只是为了解释一下，当 curl 连接时，它会获得一个连接关闭的标头，因此 curl 退出。同时，“其他脚本”正在处理没有打开连接的数据。

我很确定使用 exec() 也可能是一种选择。您可以简单地在命令行上使用 php 调用 otherscript，将变量作为 cmd 行参数传递。如果你正在运行 linux，这样的东西应该对你有用：

```
exec("nohup php -f otherscript.php -- '$arg1' '$arg2' < /dev/null &"); 
```

现在 otherscript.php 正在后台以不同的进程 ID 运行

# http - 在哪里可以找到示例 Web 服务器请求/响应数据

> ID：13390290
> 
> 赞同：0
> 
> 时间：2012-11-15T01:32:32.987
> 
> 标签：http, post, get, webserver

是否有任何类型的数据转储或包含来自 Web 服务器日志的信息的数据集？

我主要寻找的信息是：a）它是什么类型的请求（POST 或 GET 或 HTTP 或其他）b）正在传输什么类型的数据（图像、音频、视频或文本）c）什么是正在传输的数据的大小

IP 地址、URL 等信息可以是匿名的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:45:58.640

你在用火狐吗？如果是这样，您可以使用包含的 Web 控制台工具来查看从浏览器发送到服务器的所有 HTTP 请求正文和响应正文，以及方法（GET、POST 等）之类的内容。这将与 Web 服务器记录的内容相同（显然，客户端的 IP 地址始终是您）。如果您想要数据转储，您应该能够复制所有数据并将其粘贴到文件中。

要使用 Web 控制台，请单击橙色 Firefox 按钮，然后单击 Web Developer > Web Console。或者，如果您使用的是旧版本或禁用了 Firefox 按钮，则它位于工具菜单下。

**编辑：**为了充分利用它，您需要右键单击控制台并选择 Log Request and Response Bodies。这将为您提供更多信息，而不仅仅是标题。

# ios - Facebook ios sdk authorize 打开两个权限请求对话框

> ID：13390291
> 
> 赞同：3
> 
> 时间：2012-11-15T01:32:41.583
> 
> 标签：ios, facebook, facebook-ios-sdk, authorize

从我们的游戏中调用授权（使用 Facebook ios sdk 2.x 或 3.1）会在 Facebook 应用程序中产生两个权限对话框。如果设备上不存在 Facebook 应用程序，Web 浏览器中也会出现类似的奇怪行为，但我将避免描述该特定情况。

在测试过程中，我们发现...

**在 iPhone 上**

接受第一个权限对话框会导致一个带有取消按钮的空白对话框。单击取消将关闭对话框，短暂显示第二个（完全重复的）权限对话框，然后将用户返回到应用程序。如果用户返回 Facebook 应用程序，他们将看到仍然存在的第二个权限对话框。

**在 iPad 上**

接受第一个权限对话框通常会导致一个带有取消按钮的空白对话框。单击取消（或者如果取消对话框根本不显示）将显示第二个（完全重复的）权限对话框。单击此对话框上的“允许”将使用户返回应用程序。

以下是一些有助于说明 ipad 外壳的图片：

*   第一个权限对话框显示：[https ://www.evernote.com/shard/s54/sh/3037a5b8-d55a-4bc2-ad11-a889202ca596/14f2e1241ee78c333c6cb2c8f978adfe](https://www.evernote.com/shard/s54/sh/3037a5b8-d55a-4bc2-ad11-a889202ca596/14f2e1241ee78c333c6cb2c8f978adfe)

*   用户单击“接受”，然后显示空白取消对话框：[https ://www.evernote.com/shard/s54/sh/8ef40f24-7291-4592-9faa-9e2f322c0652/66ae6f4e43192510a7beeb9fb154bd04](https://www.evernote.com/shard/s54/sh/8ef40f24-7291-4592-9faa-9e2f322c0652/66ae6f4e43192510a7beeb9fb154bd04)

*   用户单击“取消”，然后显示第二个权限对话框：（参考第一张图片...我已经点击了最多 2 个链接）

*   用户点击“接受”，流程返回游戏（也未显示）

此后，我使用流行的 Facebook 游戏 - Diamond Dash 尝试了相同的步骤。在 iPad 上，您会看到一个类似的双重权限对话框（减去空白的取消对话框）。如果您“允许”第一个权限对话框，控制权将返回游戏。如果您随后返回 Facebook 应用程序，您将看到第二个权限对话框挂在附近。

最终，用户可以通过多个对话并继续玩游戏……但流程肯定是混乱的。

所以我的问题是：

1）我们如何在接受权限后摆脱空白取消对话框和 2）我们如何摆脱双重权限对话框（或至少确保在 iPad 上，第一个权限对话框将用户返回到我们的应用程序)

我已经搜索了与空白 fb 对话框相关的其他帖子，到目前为止，所有内容都指向会话到期（或在已被授予权限后重新请求权限），所以我相信这是一个新的错误报告。

我在 Facebook 网站管理页面上尝试过的一些事情：

*   关闭增强的身份验证对话框（没有区别）
*   关闭经过身份验证的推荐（没有区别）
*   删除了我们要求的所有权限（没有区别）
*   使用或不使用 url 方案没有效果
*   单个和多个捆绑 ID
*   删除 iphone 应用程序 ID

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:55:56.760

So after mucking with Facebook settings for awhile, it appears that setting the "Enhanced Auth Dialog" (in Advanced section) to true has fixed the problem with the blank cancel screen. The double permission dialog problem is still there, but since the second dialog is shown just before the user is flipped back to the game, it's not very disruptive.

Of note, new Facebook apps no longer have a setting for Enhanced Auth Dialog. I believe these newer apps force the setting to true.

# asp.net-mvc-3 - 在 VS2010 中添加 WCF 服务时不支持的媒体类型 (415)

> ID：13390295
> 
> 赞同：0
> 
> 时间：2012-11-15T01:33:25.617
> 
> 标签：asp.net-mvc-3, wcf, wcf-client

我有一个 MVC 网站和一个控制台应用程序的解决方案。该网站托管 2 个 WCF 服务，每当我尝试在控制台应用程序中添加对任一服务的引用时，都会收到以下错误：

> HTML 文档不包含 Web 服务发现信息。元数据包含无法解析的引用：' [http://blah:57997/Service/DWBusinessService.svc](http://blah:57997/Service/DWBusinessService.svc) '。内容类型应用程序/soap+xml；charset=utf-8 不受 service 支持 `[http://blah:57997/Service/DWBusinessService.svc](http://blah:57997/Service/DWBusinessService.svc)`。客户端和服务绑定可能不匹配。远程服务器返回错误：（415）不支持的媒体类型。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

网站和控制台应用程序都构建良好。

有什么想法我在这里出错了吗？

编辑说：我确定哪些信息与这个问题相关 - 随时要求更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:39:14.887

糟糕 - 发现与我在 Google 上看到的其他示例不同的问题。出于某种原因，我在我的网站（WCF 主机）web.config 中注释掉了这个块

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

把它放回去，我就重新开始工作了。

# c++ - 是否可以将运算符用作映射中的映射值？

> ID：13390296
> 
> 赞同：1
> 
> 时间：2012-11-15T01:33:33.357
> 
> 标签：c++, map, operator-keyword

我想做这样的事情：

```
int a = 9, b = 3;
map<char,operator> m;
m['+'] = +;
m['-'] = -;
m['*'] = *;
m['/'] = /;
for(map<char,operator>::iterator it = m.begin(); it != m.end(); ++it) {
    cout << func(a,b,it -> second) << endl;
} 
```

输出是这样的：

```
12
6
27
3 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T01:36:14.390

您可以在以下位置使用预制函子`<functional>`：

```
int a = 9, b = 3;
std::map<char, std::function<int(int, int)>> m;

m['+'] = std::plus<int>();
m['-'] = std::minus<int>();
m['*'] = std::multiplies<int>();
m['/'] = std::divides<int>();

for(std::map<char, std::function<int(int, int)>>::iterator it = m.begin(); it != m.end(); ++it) {
    std::cout << it->second(a, b) << std::endl;
} 
```

每个都是一个类，`operator()`它接受两个参数并返回对这两个参数进行数学运算的结果。例如，`std::plus<int>()(3, 4)`与 基本相同`3 + 4`。每个都存储为签名的函数包装对象，`int(int, int)`然后根据需要使用两个数字调用。

# mysql - MYSQL 使用四个 INNER JOINS 更新表

> ID：13390305
> 
> 赞同：1
> 
> 时间：2012-11-15T01:34:46.793
> 
> 标签：mysql

我有一个返回正确值的查询：

```
SELECT cnl.id         cID,
       snl.id         sID,
       cnl.fk_lei     cnl,
       sid.lei        sid,
       cnl.fk_cnty_id cCid,
       snl.fk_cnty_id sCid,
       sec.id         secID,
       sid.id         sidID
FROM   cici.name_loc cnl
       INNER JOIN se4.name_loc snl
               ON snl.legal_name = cnl.legal_name
                  AND snl.fk_cnty_id = cnl.fk_cnty_id
       INNER JOIN se4.sym_exch_cnty sec
               ON sec.id = snl.fk_sec_id
       INNER JOIN se4.identifiers sid
               ON sid.fk_sec_id = sec.id
                  AND sid.lei = 'NA'
WHERE  cnl.legal_name = 'Apple Inc.' 
```

```
+------+------+----------+-----+------ +-----+-------+--------+
| 身份证 | 标识 | cnl | 席位 | cCid | SCID | 秒ID | 标识号 |
+------+------+----------+-----+------ +-----+-------+--------+
| 2010 | 3104 | HWUPKR0MPOU8FGXBT394 | 不适用 | 233 | 233 | 13756 | 9722 |
+------+------+----------+-----+------ +-----+-------+--------+
```

我想修改它，以便我可以更新查询中使用的表中的字段。因此，在上述结果中，字段“sid”将从“NA”更新为“HWUPKR0MPOU8FGXBT394”

确切地说，“标识符”表有一个“sid.lei”列，需要从“NA”更改为“cnl.fk_lei”table.column 中的值 - 仅当上述选择中的所有条件都为遇见了。我只想更改一条记录，而不是表中的所有记录。

我尝试了几条路线，它们都给出了相同的错误：错误 1062 (23000): Duplicate entry 'HWUPKR0MPOU8FGXBT394-NA-NA-NA-1-1' for key 'mk_ident__6fks'

这告诉我更新出错了。

这是我尝试的更新之一：

```
UPDATE identifiers AS b
       INNER JOIN cici.name_loc cnl
               ON cnl.legal_name = 'Apple Inc.'
       INNER JOIN se4.name_loc snl
               ON snl.legal_name = cnl.legal_name
                  AND snl.fk_cnty_id = cnl.fk_cnty_id
       INNER JOIN se4.sym_exch_cnty sec
               ON sec.id = snl.fk_sec_id
SET    b.lei = cnl.fk_lei
WHERE  cnl.legal_name = 'Apple Inc.' 
```

在这种情况下，我只尝试更新一条记录。但是，我有数百条记录，其中 snl.legal_name = cnl.legal_name，我需要使用 cnl.fk_lei 中的数字更新所有记录。

任何想法都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:45:10.357

我认为您需要在以下位置放置`sid.lei = 'NA'`（缺失）代替`cnl.legal_name = 'Apple Inc.'`（已经存在于连接条件中）：

```
 UPDATE identifiers AS b
   INNER JOIN cici.name_loc cnl
           ON cnl.legal_name = 'Apple Inc.'
   INNER JOIN se4.name_loc snl
           ON snl.legal_name = cnl.legal_name
              AND snl.fk_cnty_id = cnl.fk_cnty_id
   INNER JOIN se4.sym_exch_cnty sec
           ON sec.id = snl.fk_sec_id
   SET    b.lei = cnl.fk_lei
   WHERE  sid.lei = 'NA' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:46:06.820

下面是来自[MySQL 网站的 UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
[WHERE where_condition]
[ORDER BY ...]
[LIMIT row_count] 
```

您想要做的是以下内容：

```
UPDATE identifiers AS b
   SET b.lei = (select cnl.fk_lei
                  from cici.name_loc cnl
            INNER JOIN se4.name_loc snl  ON snl.legal_name = cnl.legal_name 
                   and snl.fk_cnty_id = cnl.fk_cnty_id
            INNER JOIN se4.sym_exch_cnty sec ON sec.id = snl.fk_sec_id
                 where cnl.legal_name = 'Apple Inc.') 
```

请注意，这将更新所有`identifiers`行，您可能希望添加`where clause`到更新中以限制其影响。

# java - PyTables 和 numexpr 的 Scala 或 Java 类似物

> ID：13390307
> 
> 赞同：2
> 
> 时间：2012-11-15T01:34:57.160
> 
> 标签：java, scala, bigdata, pytables, numexpr

我正在寻找 numexpr 和 PyTables 的 Scala 或 Java 类似物（尤其是 tables.Expr）。这适用于需要对内存不足的数据执行矩阵运算的多核机器上的多核分析系统。特别是这些库应该优化磁盘、内存、缓存和 CPU 之间的数据移动。应该有效地处理稀疏矩阵。有关图书馆应解决哪些问题的更多背景信息，请参阅[http://www.youtube.com/watch?v=J3-oN_TulTg和](http://www.youtube.com/watch?v=J3-oN_TulTg)[https://www.google.com/search?q=alted](https://www.google.com/search?q=alted+cpu+starvation) 的热门搜索[+cpu+饥饿](https://www.google.com/search?q=alted+cpu+starvation)。

虽然这个问题表面上与[Scala 等同于 pyTables？](https://stackoverflow.com/questions/8015534/scala-equivalent-to-pytables) 该问题没有指定 pytables 的哪些方面很重要，并且那里的答案不适合我的问题。

处理缓存感知和缓存遗忘算法的 OTOH 库可能会有所帮助。

我想“Scala Virtualized”（又名语言虚拟化）和 Stanford-PPL Delite 框架可以作为在 Scala 中构建我所需要的东西的良好基础，如果我正在寻找的东西还不存在的话。

Hadoop、MapReduce、图形数据库和大多数流行的 nosql 存储都不是我想要的。虽然我正在寻找的是技术上的一种 nosql 存储。

# c# - 区分进程的不同运行实例

> ID：13390312
> 
> 赞同：1
> 
> 时间：2012-11-15T01:35:44.077
> 
> 标签：c#

我想知道如何区分在 C# 中运行的软件的两个不同实例。假设我有 2 个使用相同软件（均使用 KMPlayer）运行的不同视频，或者我同时打开了两个远程桌面会话 (mstsc.exe)。我可以使用此代码来获取所有实例：

```
Process.GetProcessesByName("mstsc"); 
```

但是我如何区分这些实例呢？我主要是想在我的软件中区分不同的正在运行的视频实例和远程桌面实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:18:52.170

检查 Process Id 或 MainWindowTitle 是否适合您。

# c# - POS 应用程序开发 - 收据打印

> ID：13390313
> 
> 赞同：21
> 
> 时间：2012-11-15T01:35:48.623
> 
> 标签：c#, wpf, printing, epson, receipt

我一直在为餐厅/酒吧构建 POS 应用程序。
设计部分已经完成，在过去的一个月里，我一直在编写代码。
一切正常，除了现在我需要打印。我必须打印到连接到运行该软件的计算机的收据打印机，稍后我将尝试在远程打印机（如厨房的打印机）上打印。

我在这件事上搜索了帮助，却发现在这些类型的打印机中打印的标准是使用 .NET 的 POS。问题是，这现在有点过时了，或者至少几年以来它没有任何更新。有很多关于如何使用这个库的问题被问到，而且大多数答案都不太容易理解。因此，如果有人可以在收据打印机上打印一个简单的短语（“Hello World”），我将非常感激。
我正在使用在 64 位 Windows 7 上运行的 Visual Studio 2012，并且我正在 C# 中编写 WPF。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-27T07:22:38.490

我知道这是一篇旧帖子，但对于那些仍在寻找解决方案的人，我可以告诉你我做了什么。

在花了很多时间为 .Net 处理 OPOS 和 POS 之后，我最终放弃了这些，只使用了内置`System.Drawing.Printing`库。.Net 的 OPOS 和 POS 最终很难开始工作，并且最终无法像内置库那样工作。

我使用的是 Epson TM-T20II 收据打印机。

这是一些对我来说效果很好的代码。

```
public static void PrintReceiptForTransaction()
{
    PrintDocument recordDoc = new PrintDocument();

    recordDoc.DocumentName = "Customer Receipt";
    recordDoc.PrintPage += new PrintPageEventHandler(ReceiptPrinter.PrintReceiptPage); // function below
    recordDoc.PrintController = new StandardPrintController(); // hides status dialog popup
                                                                // Comment if debugging 
    PrinterSettings ps = new PrinterSettings();
    ps.PrinterName = "EPSON TM-T20II Receipt";
    recordDoc.PrinterSettings = ps;
    recordDoc.Print();
    // --------------------------------------

    // Uncomment if debugging - shows dialog instead
    //PrintPreviewDialog printPrvDlg = new PrintPreviewDialog();
    //printPrvDlg.Document = recordDoc;
    //printPrvDlg.Width = 1200;
    //printPrvDlg.Height = 800;
    //printPrvDlg.ShowDialog();
    // --------------------------------------

    recordDoc.Dispose();
}

private static void PrintReceiptPage(object sender, PrintPageEventArgs e)
{
    float x = 10;
    float y = 5;
    float width = 270.0F; // max width I found through trial and error
    float height = 0F;

    Font drawFontArial12Bold = new Font("Arial", 12, FontStyle.Bold);
    Font drawFontArial10Regular = new Font("Arial", 10, FontStyle.Regular);
    SolidBrush drawBrush = new SolidBrush(Color.Black);

    // Set format of string.
    StringFormat drawFormatCenter = new StringFormat();
    drawFormatCenter.Alignment = StringAlignment.Center;
    StringFormat drawFormatLeft = new StringFormat();
    drawFormatLeft.Alignment = StringAlignment.Near;
    StringFormat drawFormatRight = new StringFormat();
    drawFormatRight.Alignment = StringAlignment.Far;

    // Draw string to screen.
    string text = "Company Name";
    e.Graphics.DrawString(text, drawFontArial12Bold, drawBrush, new RectangleF(x, y, width, height), drawFormatCenter);
    y += e.Graphics.MeasureString(text, drawFontArial12Bold).Height;

    text = "Address";
    e.Graphics.DrawString(text, drawFontArial10Regular, drawBrush, new RectangleF(x, y, width, height), drawFormatCenter);
    y += e.Graphics.MeasureString(text, drawFontArial10Regular).Height;

    // ... and so on
} 
```

希望它可以帮助某人跳过自定义驱动程序的所有麻烦。:)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-15T08:32:20.087

.NET 的 POS 可能是要走的路。

大多数收据打印机制造商都会提供 OPOS 服务对象。

[正如这篇 MSDN 文章所述](http://msdn.microsoft.com/en-us/library/ms828083(v=winembedded.10).aspx)，.NET 的 POS与OPOS v1.8 服务对象兼容。

OPOS / UPOS（.NET 的 POS 所基于的）恕我直言，这是一个设计不佳的 API（由设备制造商而不是应用程序开发人员设计），但它是你今天拥有的最好的。

我没有任何具体的示例，但基本与 OPOS 相同——您需要打开、声明、启用设备，然后您可以调用其方法（例如打印）。您可以尝试查看 OPOS 示例，例如[这个 PosPrinter1 示例](http://monroecs.com/posfordotnet/opos_dotnet.htm)，它可能与 .NET 的 POS 非常相似。

[此博客](http://blog.lavablast.com/post/2011/06/06/Using-Microsoft-POS-for-NET-in-2011.aspx)提供了一些有关为 .NET 设置 POS 的信息，这些信息可能会有所帮助。

**更新**

这是用于 OPOS 打印机的 VB Hello World。您首先需要创建一台打印机并将其添加到注册表中，并使用所需的逻辑设备名称 = LDN。我相信 Epson ADK 包含一个在注册表中添加打印机的实用程序。此实用程序还可以对打印机执行健康检查，以检查它是否安装正确。完成此操作后，应该很容易将下面的代码适应 POS for .NET

```
OPOSPOSPrinter.Open "MyPrinter"    ' LDN of your printer   
OPOSPOSPrinter.Claim 500           ' Timeout   
OPOSPOSPrinter.DeviceEnabled = True  

'- Print   
OPOSPOSPrinter.PrintNormal 2, "Hello world"  

'- Close the printer   
If OPOSPOSPrinter.Claimed then   
   OPOSPOSPrinter.Release   
End If  
OPOSPOSPrinter.Close 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T04:57:14.707

**.NET 打印**

在.NET 下打印并不太难。看看[这里](http://www.codeproject.com/Articles/33076/WPF-Printing-Basic-Text-Printing)和[msdn](http://msdn.microsoft.com/en-us/library/gg145044.aspx)。

打印到 POS/收据打印机将与打印到任何其他打印机相同，假设它是 Windows 打印机、网络或其他打印机。如果您使用的是串行打印机，事情可能会稍微困难一些，因为您可能需要使用制造商特定的 API，幸运的是，尽管如今大多数优秀的 POS 打印机都得到操作系统的完全支持。

首先，您需要在`System.Printing`项目中添加对 dll 的引用。

那么打印就这么简单

```
private void PrintText(string text)
{
    var printDlg = new PrintDialog();
    var doc = new FlowDocument(new Paragraph(new Run(text)));
    doc.PagePadding = new Thickness(10);

    printDlg.PrintDocument((doc as IDocumentPaginatorSource).DocumentPaginator, "Print Caption");
} 
```

要使用..

```
PrintText("Hello World"); 
```

您还可以利用[PrintDialog.PrintVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.aspx)并使用 xaml 模板定义您的文档。

可以使用 PrintDialog 属性设置打印设置。

获取要打印到的打印机

```
private PrintQueue FindPrinter(string printerName)
{
    var printers = new PrintServer().GetPrintQueues();
    foreach (var printer in printers)
    {
        if (printer.FullName == printerName)
        {
            return printer;
        }
    }
    return LocalPrintServer.GetDefaultPrintQueue();
} 
```

尽管在打印到收据打印机时需要记住一些事项，但您需要考虑格式。更具体地说，您需要考虑页面的宽度以及每行可以容纳多少个字符；这对我来说是很多试验和错误，尤其是在不同字体大小的情况下。

在大多数情况下，您真的不需要担心分页，打印机会在完成您的文档后自动裁切纸张。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T06:08:34.960

如果您想以打印机的全速打印，您可能需要使用特定于打印机的转义码，并生成“原始”输出。

看看 Michael Buen 对[这个 SO question](https://stackoverflow.com/a/10425321)的回答，尤其是 UPDATE 位。

# python - 在多对一格式的 Django 模型中，将多个用户作为一个模型字段

> ID：13390315
> 
> 赞同：9
> 
> 时间：2012-11-15T01:35:51.120
> 
> 标签：python, django, model, one-to-many

我想创建一个简约的任务管理应用程序来学习 Django 的基础知识。所以会有 Projects 、 Tasks 和 Users 作为三大实体。

*   一个项目可以有多个用户
*   一个项目可以有多个任务
*   一个任务可以分配给 1 个用户

`django.contrib.auth.models.User`我无法弄清楚如何从 Project - > Users用作我的用户源进行多对一。

这是我到目前为止所拥有的，但我知道这是错误的，我无法理解它。我试图与其他问题联系起来，例如与参赛者有关的问题和与 StackOverflow 上的漏洞 URLS 相关的问题。我不确定是否必须编写自己的用户模型，或者以某种方式扩展它。

```
class Project(models.Model):
    Project_Name = models.CharField(max_length=100)
    Project_Users = models.ManyToManyField(User)

class Tasks(models.Model):
    Task_Name = models.CharField(max_length=300)
    Task_AssignedToUser = models.ForeignKey("Project_Name", through=Users) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T01:39:34.480

```
class Project(models.Model):
    name = models.CharField(max_length=100)
    users = models.ManyToManyField(User)

class Task(models.Model):
    project = models.ForeignKey(Project, related_name='project_tasks')
    name = models.CharField(max_length=300)
    assignee = models.ForeignKey(User, related_name='tasks') 
```

获取参与特定项目的用户：

```
p = Project.objects.get(name='myproject')
users = p.users.all() 
```

获取项目的任务：

```
users = p.project_tasks.all()  # Because of `related_name` in Task.project 
```

获取所有项目中用户拥有的所有任务：

```
u = User.objects.get(username='someuser')
u.tasks.all()  # Because of `related_name` in Task.assignee 
```

笔记：

1.  A`ForeignKey`是多对一关系。例如，一个任务只属于一个项目 - 一个项目可以有多个任务。

2.  您不需要多余的字段名称。`name`好于`Project_Name`

3.  一次一个问题。

# php - 如何将自定义代码添加到特定的 s 在 wordpress 中构建导航？

> ID：13390316
> 
> 赞同：1
> 
> 时间：2012-11-15T01:35:57.050
> 
> 标签：php, css, wordpress

有问题的网站就在[这里](http://www.cars.evanparsons.net/)我正在尝试生成一个 CSS 下拉列表，但是没有这样的选项可用`wp_list_pages()`，我也无法在外观菜单中使用 WP Menus 获得所需的效果（我使用这种方法来生成我的页脚链接）

这是理想的：

![图片](../Images/75a6317dc67eaffed25504bca2f96f18.png)

我知道如何生成菜单，只是不知道如何在没有 hack javascript 解决方案的情况下在“汽车”菜单下获取它。

理想的解决方案包括通过模板名称“Car Showcase”来定位列表项，并允许我在它之后生成 PHP/HTML（制作下拉菜单所需的代码）。这对每个人都有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:38:09.740

为 WordPress 菜单创建自定义 HTML 的实际方法是创建一个 Walker

[http://codex.wordpress.org/Function_Reference/Walker_Class](http://codex.wordpress.org/Function_Reference/Walker_Class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:56:14.840

您是否可以不只是创建另一个菜单并将其从以下位置拉出：

`wp_nav_menu( array( 'name' => 'menu-header'));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:09:33.290

我在functions.php中扩展了walker类，它比它应该的要脏得多，而且我仍然针对由ID生成的列表项，这是我不喜欢的解决方案，但这是我最干净的解决方案可以想出，直到我找到一个更好的。

```
class Dropdowns extends Walker_page {   

function end_el(&$output, $item, $depth=0, $args=array()) {

    if ($item -> ID == 55) { //checks if the page id is the list item I want to make my dropdown under
         $vehicles = query_posts('post_type=vehicles'); //my custom post that I want to dropdown

         if ($vehicles) { //check for no entries
            //code for drop downs go here
         }

    }     
}  
} 
```

# ruby-on-rails - Rails - Twitter::Error::BadRequest（错误的身份验证数据） - 部署到 Heroku 之后

> ID：13390317
> 
> 赞同：4
> 
> 时间：2012-11-15T01:36:11.980
> 
> 标签：ruby-on-rails, twitter, heroku, twitter-oauth

在我的应用程序中，我为用户提供了使用以下代码发送推文：

```
 if twitter = current_user.authentications.find_by_provider("twitter")
        Twitter.configure do |tw|
          tw.consumer_key = "6jaqMt7kE9iVxh8hX0mmtQ"
          tw.consumer_secret = "5ZIydxRBFfEJxc2EzedahIxoeO8g1hZCQVqZFtWWNM"
          tw.oauth_token = twitter.token
          tw.oauth_token_secret = twitter.token_secret
        end
        Twitter.update(params[:tweet]) 
```

它在我的本地主机中运行良好。但是现在我已经将我的应用程序部署到heroku，并且我正在尝试发送推文，但是在heroku日志中它说：

```
2012-11-15T01:30:32+00:00 app[web.1]: Completed 500 Internal Server Error in 494ms
2012-11-15T01:30:32+00:00 app[web.1]: 
2012-11-15T01:30:32+00:00 app[web.1]: Twitter::Error::BadRequest (Bad Authentication data):
2012-11-15T01:30:32+00:00 app[web.1]: 
2012-11-15T01:30:32+00:00 app[web.1]: 
2012-11-15T01:30:32+00:00 app[web.1]:   app/controllers/posts_controller.rb:12:in `create' 
```

我应该怎么做才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:25:40.750

两件事情：

1.  在您注册的 Twitter 应用程序的设置中，将您的回调 URL 更新到您的生产服务器位置。

2.  如果您使用的是 herokuapp.com 的子域，您猜怎么着，您正处于对 Twitter 的大量其他 API 请求的池中。[通过 Apigee 代理您的 API 请求](http://apigee.com/docs/enterprise/content/get_started_api)。

3.  通过控制台初始化然后迁移 Heroku 上的数据库：

    `heroku run rake db:setup`

    `heroku run rake db:migrate`

（通常只是 rake db:migrate 工作，但在这种情况下我必须同时做）

来自[Twitter 开发讨论](https://dev.twitter.com/discussions/3955)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T01:40:15.147

我已经弄清楚了 Twitter 身份验证并用我的经验写了一个教程：[http ://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/](http://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/)

# zend-framework - 获取 Zend Framework URL 参数

> ID：13390320
> 
> 赞同：4
> 
> 时间：2012-11-15T01:36:17.057
> 
> 标签：zend-framework, zend-route

我正在构建我的第一个 Zend Framework 应用程序，我想找出从 URL 获取用户参数的最佳方法。

我有一些具有`index`、`add`和action 方法`edit`的控制器。action 可以带一个参数，`delete`and动作可以带一个参数。`index``page``edit``delete``id`

```
Examples
    http://example.com/somecontroller/index/page/1
    http://example.com/someController/edit/id/1
    http://example.com/otherController/delete/id/1 
```

到目前为止，我在操作方法中获取了这些参数，如下所示：

```
class somecontroller extends Zend_Controller_Action
{
    public function indexAction()
    {
        $page = $this->getRequest->getParam('page');
    }
} 
```

但是，一位同事告诉我使用 Zend_Controller_Router_Rewrite 的更优雅的解决方案如下：

```
$router = Zend_Controller_Front::getInstance()->getRouter();

$route = new Zend_Controller_Router_Route(
                        'somecontroller/index/:page',
                        array(
                            'controller' => 'somecontroller',
                            'action'    => 'index'
                        ),
                        array(
                            'page' => '\d+'
                        )
);

$router->addRoute($route); 
```

这意味着对于每个控制器，我需要添加至少三个路由：

*   一个用于带有 :page 参数的“索引”操作
*   一个用于带有 :id 参数的“编辑”操作
*   一个用于带有 :id 参数的“删除”操作

请参阅下面的代码作为示例。这些只是一个控制器的 3 个基本动作方法的路线，想象有 10 个或更多控制器......我无法想象这是最好的解决方案。我看到的唯一好处是参数键已命名，因此可以从 URL 中省略（`somecontroller/index/page/1`变为`somecontroller/index/1`）

```
// Route for somecontroller::indexAction()
$route = new Zend_Controller_Router_Route(
                        'somecontroller/index/:page',
                        array(
                            'controller' => 'somecontroller',
                            'action'     => 'index'
                        ),
                        array(
                            'page' => '\d+'
                        )
);

$router->addRoute($route);

// Route for somecontroller::editAction()
$route = new Zend_Controller_Router_Route(
                        'somecontroller/edit/:id',
                        array(
                            'controller' => 'somecontroller',
                            'action'     => 'edit'
                        ),
                        array(
                            'id' => '\d+'
                        )

$router->addRoute($route);

// Route for somecontroller::deleteAction()
$route = new Zend_Controller_Router_Route(
                        'somecontroller/delete/:id',
                        array(
                            'controller' => 'somecontroller',
                            'action'     => 'delete'
                        ),
                        array(
                            'id' => '\d+'
                        )

$router->addRoute($route); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:19:19.620

我倾向于这样看：

1.  **确定处理要求。**

    每个“行动”需要什么？一个编辑动作和一个删除动作可能需要一个 :id 参数。添加操作和列表操作可能不会。这些控制器/动作然后使用参数并进行处理。

    注意：您可以编写这些控制器/操作，而无需参考将访问者带到那里的 url。这些动作只是期望它们的参数将被传递给它们。

2.  **决定（！）你想要什么网址。**

    一般来说，我发现`(/:module/):controller/:action`url 的部分大部分都可以正常工作（除了顶级相对静态页面，例如`/about`，我经常将操作放在 IndexController （或 StaticController）上，并且讨厌`/index`在 url 中包含前缀.

    因此，要处理帖子，您可能需要以下网址：

    *   `/post`- 列出所有帖子，可能带有一些分页
    *   `/post/:id`- 显示特定的帖子
    *   `/post/:id/edit`- 编辑特定的帖子
    *   `/post/:id/delete`- 删除特定帖子
    *   `/post/add`- 添加帖子

    或者，您可能想要：

    *   `/post/list`- 列出所有帖子，可能带有一些分页
    *   `/post/display/:id`- 显示特定的帖子
    *   `/post/edit/:id`- 编辑特定的帖子
    *   `/post/delete/:id`- 删除特定帖子
    *   `/post/add`- 添加帖子

    或任何其他网址方案。关键是，您决定要公开的网址。

3.  **创建路线...**

    ...将这些网址映射到控制器/操作。[并确保无论何时渲染它们，都使用`url()`带有路由名称的视图助手，以便路由更改不需要更改您的操作或视图中的下游代码。

您最终会以这种方式编写更多路线吗？是的，我发现我做到了。但是，对我来说，好处是我可以决定我的网址。我不拘泥于 Zend 的默认设置。

但是，与大多数事情一样，YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:48:28.297

这完全取决于您的确切要求。如果您只是想传递一个或两个参数，第一种方法将是最简单的。为每个动作定义路线是不切实际的。您想要定义路由的一些场景是：

1.  长 url - 如果特定操作的参数列表很长，您可能需要定义一个路由，以便您可以省略请求中的键，从而缩短 url。
2.  花哨的 url - 如果您想偏离 Zend 框架的正常控制器/动作 url 模式，并为您的应用程序定义不同的 url 模式（例如，以“.html”结尾）
3.  蛞蝓 / SEO 友好的 URL

以博客为例，您可能希望为博客文章 url 定义路由，以便 url 对 SEO 友好。同时，您可能希望保留编辑/删除/发表评论等 url 以保持 ZF 默认并使用 $this->getRequest->getParam() 访问该上下文中的请求参数。

总而言之，一个优雅的解决方案是路由和默认 url 模式的组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:48:26.457

在之前的回答中，@janenz00 提到“长网址”是使用路由的原因之一：

> 长 url - 如果特定操作的参数列表很长，您可能需要定义一个路由，以便您可以省略请求中的键，从而缩短 url。

假设我们有一个`employee`控制器，其`index`操作显示员工表，其中包含每个员工的一些附加数据（例如年龄、部门......）。该`index`操作可以采用以下参数：

*   一个`page`参数（必填）
*   一个`sortby`参数（可选），它采用一个列名进行排序（例如年龄）
*   一个`dept`参数（可选），它采用部门的名称，仅显示在该部门工作的员工

我们添加以下路线。`dept`请注意，在使用此路由时，如果不先指定参数，我们将无法指定`sortby`参数。

```
$route = new Zend_Controller_Router_Route(
                    'employee/index/:page/:sortby/:dept',
                    array(
                        'controller' => 'employee',
                        'action'    => 'index')
); 
```

如果我们在我们的操作方法中获取这些参数，我们可以避免这个问题（因为参数键是在 url 中指定的）：

```
http://example.com/employee/index/page/1/dept/staff 
```

我可能以错误的方式看待它（或者可能看不到路由的全部潜力），但对我来说，使用路由的唯一两个原因是：

*   如果您的网址不符合传统`/module/controller/action`模式
*   如果您想让您的网址对 SEO 更友好

如果您使用路由的唯一原因是使用命名参数，那么我认为最好在您的操作方法中获取这些参数，原因有两个：

*   将路由数量保持在最低限度将减少路由器花费的时间和资源
*   在 url 中传递参数键允许我们使用带有可选参数的更复杂的 url。

非常欢迎有关此主题的任何想法或建议！

# php - 在 PHP 中实现 C 的 atoi()

> ID：13390323
> 
> 赞同：5
> 
> 时间：2012-11-15T01:36:25.443
> 
> 标签：php, c, algorithm, atoi

C中有一个函数，atoi()，用PHP实现；

*   $字符串 = '5467'; //函数应该以整数形式返回 5467

所以这就是我发现的 ( `its implementation in C`)

```
int myatoi(const char *string) {
    int i;
    i=0;
    while(*string) {
        i = (i<<3) + (i<<1) + (*string - '0');
        string++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:40:03.430

除非我误解了这个问题：

```
function atoi($string)
{
  return (int) $string;
} 
```

看看您是否将 php 的概念理解为一种松散类型的语言，这听起来像是一个棘手的问题。所以，是的，这样问是公平的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T01:55:09.653

我不知道 PHP，但如果要看看你是否可以编写算法，我可以展示我如何在 C 中处理这个问题。（此处未经测试的代码。）

```
int atoi(char *s)
{
    int val = 0;
    while (*s)
    {
        val *= 10;
        val += (*s) - '0';
        s++;
    }
    return val;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T01:49:55.307

真的只是：

```
function myatoi($s) {
    return (int) $s;
} 
```

我认为他们正在寻找您解决问题的能力，这是一个很好的想法。一位优秀的高级开发人员可能会提出以下有趣的观察结果：

*   如果数据无效（例如：“a”），我的函数应该返回什么。0? 抛出异常？您的 C 示例将返回一些垃圾（即使对于“15a”，标准规定您应该返回 15）。
*   您的 C 示例无法处理负数。
*   如果数字不适合整数，结果应该是什么？您的 C 示例将简单地溢出（顺便说一句，这在 C 中完全有效）。

# ipad - 在 iPad 上滚动 div

> ID：13390324
> 
> 赞同：0
> 
> 时间：2012-11-15T01:36:44.053
> 
> 标签：ipad, scroll

我想在页面上滚动一个小 div，但是当我使用 ipad 时，它会滚动整个页面。在 PC 上，我可以单击滚动条，效果很好。我已经`-webkit-overflow-scrolling:touch`按照其他人的建议使用了该属性，但它没有用。有没有人有好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:54:27.423

尝试将此添加到您的部分：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

当您只想滚动有溢出的部分时，这可以确保页面保持原位并且不会滚动。这很有用的一个很好的例子是当你想创建一个地图，并用捏缩放。您只想缩放地图，而不是缩放地图周围的页面，这将是默认行为。

# javascript - 以编程方式选择 在一个 element then immediately de-selects I'm populating a <select>element with file names returned by a php script. After uploading a file, I want the</select> element to automatically select the newly uploaded file. The

> ID：13390329
> 
> 赞同：2
> 
> 时间：2012-11-15T01:37:11.463
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:41:35.290

您必须自己触发 onchange 事件，.prop() 不会触发此事件。您可以使用：

```
$('#uploadedFilesSelect').trigger('change'); 
```

# python - 将 HTML 解析为纯文本

> ID：13390331
> 
> 赞同：1
> 
> 时间：2012-11-15T01:37:23.793
> 
> 标签：python

我正在尝试使用在多个帖子中推荐的 MLStripper 类从电子邮件中删除 html 以获得纯文本。由于“@”符号，strip_tags 函数在尝试解析时遇到问题。我猜这个类不够强大，只能解析有效的 html 标签，关于如何修复以下内容以处理“@”或其他库以从文本中删除 html 的任何建议？我还需要删除 & 之类的东西。

**Python：**

```
from HTMLParser import HTMLParser

class MLStripper(HTMLParser):
            def __init__(self):
                 self.reset()
                 self.fed = []
            def handle_data(self, d):
                 self.fed.append(d)
            def get_data(self):
                 return ''.join(self.fed)

            def strip_tags(self, html):
                 s = MLStripper()
                 s.feed(html)
                 return s.get_data()

 ML = MLStripper()
 test = ML.strip_tags("<div><br>On Sep 27, 2012, at 4:11 PM, Mark Smith <marksmith@gmail.com> wrote</br></div>")
 print test 
```

**错误：**

```
Traceback (most recent call last):
  File "IMAPReader.py", line 49, in <module>
    strippedText = ML.strip_tags("<marksmith@gmail.com>")
  File "IMAPReader.py", line 22, in strip_tags
    s.feed(html)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 108, in feed
    self.goahead(0)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 148, in goahead
    k = self.parse_starttag(i)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 229, in parse_starttag
    endpos = self.check_for_whole_start_tag(i)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 304, in check_for_whole_start_tag
    self.error("malformed start tag")
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 115, in error
    raise HTMLParseError(message, self.getpos())
HTMLParser.HTMLParseError: malformed start tag, at line 1, column 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:25:29.853

如果您希望获得无效标记，则不需要 HTML 解析器。看看 BeautifulSoup：

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

他们有一个很好的例子来做你想做的事：

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

```
from bs4 import BeautifulSoup

html_doc = """
<html><head><title>The Dormouse's story</title></head>

<p class="title"><b>The Dormouse's story</b></p>

<p class="story">Once upon a time there were three little sisters; and their names were
<a href="http://example.com/elsie" class="sister" id="link1">Elsie</a>,
<a href="http://example.com/lacie" class="sister" id="link2">Lacie</a> and
<a href="http://example.com/tillie" class="sister" id="link3">Tillie</a>;
and they lived at the bottom of a well.</p>

<p class="story">...</p>
"""

soup = BeautifulSoup(html_doc)

print(soup.get_text()) 
```

返回...

```
# The Dormouse's story
#
# The Dormouse's story
#
# Once upon a time there were three little sisters; and their names were
# Elsie,
# Lacie and
# Tillie;
# and they lived at the bottom of a well.
#
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:41:48.803

你使用的是什么版本的 Python？我使用 Python 2.7.2 运行了您的代码，但遇到了与您相同的错误。后来我在一台装有**Python 2.7.3**的计算机上运行它，它运行良好。这很奇怪，所以我查了一下，发现一些文档说 Python 中包含的 HTML 解析器在以后的版本中变得更加宽松。尝试升级到 2.7.3，它应该可以工作。

# c++ - 编译错误 C3861 Visual Studio 2010

> ID：13390332
> 
> 赞同：1
> 
> 时间：2012-11-15T01:37:27.807
> 
> 标签：c++, c, visual-studio-2010, dll, compiler-errors

我遇到了两个错误，我一生都无法弄清楚......过去几个小时我在谷歌上研究了它。我现在在哪里。这是我得到的编译错误。

```
 2   IntelliSense: identifier "RegisterShader" is undefined  c:\users\administrator\documents\visual studio 2010\projects\test\dllmain.cpp   18  20  

Error   1   error C3861: 'RegisterShader': identifier not found c:\users\administrator\documents\visual studio 2010\projects\test\dllmain.cpp   50  1 
```

// stdafx.h

```
// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//
#pragma once
#include "targetver.h"

#define WIN32_LEAN_AND_MEAN             // Exclude rarely-used stuff from Windows headers
// Windows Header Files:
#include <windows.h>

// TODO: reference additional headers your program requires here
#include <detours.h>
#include "typedefs.h" 
```

// stdafx.cpp

```
// stdafx.cpp : source file that includes just the standard includes
// blopsII.pch will be the pre-compiled header
// stdafx.obj will contain the pre-compiled type information

#include "stdafx.h"

// TODO: reference any additional headers you need in STDAFX.H
// and not in this file 
```

// typedefs.h

```
#ifndef TYPEDEFS_H
#define TYPEDEFS_H

#define OFF_REGISTERSHADER 0x00715690

typedef float  vec_t;
typedef vec_t  vec2_t[2];
typedef vec_t  vec3_t[3];
typedef vec_t  vec4_t[4];
typedef int    qhandle_t;

typedef int ( * tRegisterShader )( char* szName, int unk );

#endif 
```

// typedefs.cpp

```
#include "stdafx.h"

tRegisterShader RegisterShader = ( tRegisterShader )OFF_REGISTERSHADER; 
```

// dllmain.cpp

```
// dllmain.cpp : Defines the entry point for the DLL application.
#include "stdafx.h"

//#include "typedefs.h"

DWORD dwHook = 0x6ADC30;

void callback()
{

    qhandle_t white = RegisterShader("white", 3);
}

int __cdecl hkRender()
{
    _asm pushad;
    callback();
    _asm popad;
}

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:

    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:39:39.387

有几种方法可以做到这一点：

**dllmain.cpp**

```
#include "stdafx.h"
#include "typedefs.h"

extern tRegisterShader RegisterShader; 
```

其余的就像你已经拥有的一样。

* * *

或者，您可以通过将 extern 放在 typedefs.h 的底部来“发布”在 typedefs.cpp 中定义的变量：

**类型定义.h**

```
#ifndef TYPEDEFS_H
#define TYPEDEFS_H

#define OFF_REGISTERSHADER 0x00715690

typedef float  vec_t;
typedef vec_t  vec2_t[2];
typedef vec_t  vec3_t[3];
typedef vec_t  vec4_t[4];
typedef int    qhandle_t;

typedef int ( * tRegisterShader )( char* szName, int unk );

extern tRegisterShader RegisterShader;

#endif 
```

后一种方法在发布在头文件中定义的类型的全局变量时很常见，该变量在匹配的 .cpp 文件中定义。在标头中将其声明为 extern 会有效地将其公开给包括标头在内的任何人（包括您的 dllmain.cpp）。

# algorithm - 两个矩形相交

> ID：13390333
> 
> 赞同：57
> 
> 时间：2012-11-15T01:37:29.103
> 
> 标签：algorithm, math, pseudocode, shapes

我有两个矩形，每个矩形都有 4 个值：

左侧位置`X`、顶部位置`Y`、宽度`W`和高度`H`：

```
X1, Y1, H1, W1
X2, Y2, H2, W2 
```

矩形不旋转，如下所示：

```
+--------------------> X axis
|
|    (X,Y)      (X+W, Y)
|    +--------------+
|    |              |
|    |              |
|    |              |
|    +--------------+
v    (X, Y+H)     (X+W,Y+H)

Y axis 
```

确定两个矩形的交点是否为空的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-11-15T01:58:30.873

```
if (X1+W1<X2 or X2+W2<X1 or Y1+H1<Y2 or Y2+H2<Y1):
    Intersection = Empty
else:
    Intersection = Not Empty 
```

如果你有四个坐标 -`((X,Y),(A,B))`和`((X1,Y1),(A1,B1))`- 而不是两个加上宽度和高度，它看起来像这样：

```
if (A<X1 or A1<X or B<Y1 or B1<Y):
    Intersection = Empty
else:
    Intersection = Not Empty 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-26T11:50:51.180

最好的例子..

```
/**
 * Check if two rectangles collide
 * x_1, y_1, width_1, and height_1 define the boundaries of the first rectangle
 * x_2, y_2, width_2, and height_2 define the boundaries of the second rectangle
 */
boolean rectangle_collision(float x_1, float y_1, float width_1, float height_1, float x_2, float y_2, float width_2, float height_2)
{
  return !(x_1 > x_2+width_2 || x_1+width_1 < x_2 || y_1 > y_2+height_2 || y_1+height_1 < y_2);
} 
```

还有另一种方式看到这个[链接](http://silentmatt.com/rectangle-intersection/)......并自己编码......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-07T06:25:23.163

如果两个矩形具有相同的尺寸，您可以这样做：

```
if (abs (x1 - x2) < w && abs (y1 - y2) < h) {
    // overlaps
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T14:57:34.760

我刚刚尝试使用 ac 程序并在下面写道。

```
#include<stdio.h>

int check(int i,int j,int i1,int j1, int a, int b,int a1,int b1){
    return (\
    (((i>a) && (i<a1)) && ((j>b)&&(j<b1))) ||\ 
    (((a>i) && (a<i1)) && ((b>j)&&(b<j1))) ||\ 
    (((i1>a) && (i1<a1)) && ((j1>b)&&(j1<b1))) ||\ 
    (((a1>i) && (a1<i1)) && ((b1>j)&&(b1<j1)))\
    );  
}
int main(){
    printf("intersection test:(0,0,100,100),(10,0,1000,1000) :is %s\n",check(0,0,100,100,10,0,1000,1000)?"intersecting":"Not intersecting");
    printf("intersection test:(0,0,100,100),(101,101,1000,1000) :is %s\n",check(0,0,100,100,101,101,1000,1000)?"intersecting":"Not intersecting");
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T01:02:48.747

使用坐标系，其中 (0, 0) 是左上角。

我从垂直和水平滑动窗口的角度想到了它，并提出了这个：

(B.Bottom > A.Top && B.Top < A.Bottom) && (B.Right > A.Left && B.Left < A.Right)

如果您将德摩根定律应用于以下内容，您会得到什么：

不是（B.Bottom < A.Top || B.Top > A.Bottom || B.Right < A.Left || B.Left > A.Right）

1.  B高于A
2.  B低于A
3.  B在A的左边
4.  B在A的右边

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-23T17:34:50.173

如果矩形的左下角和右上角的坐标是：
(r1x1, r1y1), (r1x2, r1y2) 代表 rect1 和
(r2x1, r2y1), (r2x2, r2y2) 代表 rect2
(Python 类似下面的代码)

```
 intersect = False
    for x in [r1x1, r1x2]:
        if (r2x1<=x<=r2x2):
            for y in [r1y1, r1y2]:
                if (r2y1<=y<=r2y2):
                    intersect = True
                    return intersect
                else:
                    for Y in [r2y1, r2y2]:
                        if (r1y1<=Y<=r1y2):
                            intersect = True
                            return intersect
        else:  
            for X in [r2x1, r2x2]:
                if (r1x1<=X<=r1x2):
                    for y in [r2y1, r2y2]:
                        if (r1y1<=y<=r1y2):
                            intersect = True
                            return intersect
                        else:
                            for Y in [r1y1, r1y2]:
                                if (r2y1<=Y<=r2y2):
                                    intersect = True
                                    return intersect
    return intersect 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-02T23:48:25.223

if( X1<=X2+W2 && X2<=X1+W1 && Y1>=Y2-H2 && Y2>=Y1+H1 ) 相交

在问题中，Y 是最高位置..

注意：此解决方案仅适用于矩形与 X / Y 轴对齐的情况。

# compiler-construction - lex 错误 y.tab.h

> ID：13390337
> 
> 赞同：6
> 
> 时间：2012-11-15T01:38:07.053
> 
> 标签：compiler-construction, lex

我试图让这个示例代码工作，但我不断收到错误：致命错误：'y.tab.h' file not found #include "y.tab.h"。我能做些什么呢？

```
%{
#include <stdlib.h>
void yyerror(char *);
#include "y.tab.h"
%}

%% [0-9]+     {
                 yylval = atoi(yytext);
                 return INTEGER;
               }

[-+\n]         return *yytext;

[ \t]        ; /* skip whitespace */

.            yyerror("invalid character");

%%

int yywrap(void) {
return 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-12T18:12:53.177

flex 文件中包含的“y.tab.h”文件是在使用 -dy 运行 bison 时生成的。例子：

```
flex mylex.l
bison -dy myparser.y 
```

那么你应该一起编译它们：

```
gcc lex.yy.c myparser.tab.c -o mycompiler.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:25:51.580

您正在使用的 yacc 文件可能正在创建一个名为“y.tab.c”的输出文件，而不是您试图在此处包含的“y.tab.h”。您可能应该尝试更改它。

# javascript - 我如何使用 jPanelMenu？（jQuery 菜单插件）

> ID：13390339
> 
> 赞同：4
> 
> 时间：2012-11-15T01:38:26.847
> 
> 标签：javascript, jquery

我不是 javascript 忍者，但我想将此库合并到针对平板电脑的网站中。这是图书馆： [jPanelMenu](http://jpanelmenu.com/)

这是我重新编写的html：

```
 <script src="/Scripts/jquery-1.7.1.js"></script>

<script src="/Scripts/jPanelMenu-1.0.0.min.js" type="text/javascript"></script> 

<header class="main">

        <ul id="menu">
            <li><a href="/">Overview</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#inner-workings">Inner-Workings</a></li>
            <li><a href="#animation">Animation</a></li>
            <li><a href="#options">Options</a></li>
            <li><a href="#api">API</a></li>
            <li><a href="#tips">Tips &amp; Examples</a></li>
            <li><a href="#about">About</a></li>
        </ul>
</header>
<script type="text/javascript">
    $(document).ready(function () {
        var jPM = $.jPanelMenu();
        jPM.on();
    });
</script>
<body> 
```

我在浏览器中看到的只是一个普通的 UL 项目符号列表。chrome 开发工具中没有 Js 错误。任何人都使用过这个插件或知道我做错了什么？

谢谢！

**编辑：**

这是来自 dbaseman 解决方案的更新代码

```
<html>
<script src="/Scripts/jquery-1.7.1.js"></script>

<script src="/Scripts/jPanelMenu-1.0.0.min.js" type="text/javascript"></script> 

<header class="main">
        <div class="menu-trigger">Click Me</div>
        <ul id="menu" style="display: none;">
            <li><a href="/">Overview</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#inner-workings">Inner-Workings</a></li>
            <li><a href="#animation">Animation</a></li>
            <li><a href="#options">Options</a></li>
            <li><a href="#api">API</a></li>
            <li><a href="#tips">Tips &amp; Examples</a></li>
            <li><a href="#about">About</a></li>
        </ul>
</header>
<script type="text/javascript">
    $(document).ready(function () {
        var jPM = $.jPanelMenu();
        jPM.on();
    });
</script>
<body>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index.Tablet</title>
</head>
<body>
    <div>
        tablet home
    </div>
</body>
</html>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:48:15.153

您需要添加一个“触发器”元素来启用菜单（`.menu-trigger`默认情况下会查找）：

```
<div class="menu-trigger">Click me to trigger</div> 
```

（另外，显然它希望菜单元素最初是隐藏的，所以使用`<ul style="display: none;" ...>`.）

[演示](http://jsfiddle.net/yCvD3/177/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T02:41:34.403

您需要将触发器更改为锚标记

```
<a class="menu-trigger" href="#menu">Click Me</div> 
```

您可以在 Jpanelmenu 网页源中看到它。

# c - 提取公共 IP 地址

> ID：13390341
> 
> 赞同：2
> 
> 时间：2012-11-15T01:38:47.453
> 
> 标签：c, client-server

> **可能重复：**
> [以编程方式发现公共 IP](https://stackoverflow.com/questions/613471/discovering-public-ip-programatically)

有没有办法从 C 程序中知道我的公共 IP 地址？我正在使用 DSL 调制解调器并在 Linux 操作系统上工作。

我需要知道公共 IP，这样我才能使服务器-客户端套接字程序在 Internet 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:53:13.810

从您的问题中不清楚您是否在路由器后面，但如果不是，我认为这不是重复的。

如果您在路由器后面，那么除非路由器已经配置为转发到您的机器，否则知道*路由器*的公共 IP 地址几乎是无用的。

如果您不在路由器后面，问题很简单。只需创建一个 UDP 套接字并将`connect`其连接到任何非本地 IP 地址，然后调用`getsockname`套接字。结果`sockaddr_in`将包含用于发送到该地址的 IP 地址，即您的“公共 IP 地址”。`8.8.8.8`与任何 dns“根服务器”一样，这将是一个不错的简单地址选择。请记住，您不必向它发送任何数据包（这就是您使用 UDP 而不是 TCP 的原因），只需`connect`一个无连接套接字即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:41:27.283

是的，您可以使用[STUN 协议](http://en.wikipedia.org/wiki/STUN)向 STUN 服务器询问它认为您的请求来自哪个 IP 地址。您可以使用几个开放的 STUN 服务器，例如 stunserver.org。

# php - s3直接上传限制文件大小和类型

> ID：13390343
> 
> 赞同：33
> 
> 时间：2012-11-15T01:38:57.303
> 
> 标签：php, amazon-s3, filesize, file-type

一个新手问题，但我用谷歌搜索了一下，似乎找不到任何解决方案。

我想允许用户直接将文件上传到 S3，而不是先通过我的服务器。通过这样做，在实际上传到 S3 之前，有什么方法可以检查文件的大小限制和允许的类型？最好不要使用Flash，而是使用javascript。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-08-12T16:15:55.517

如果您正在谈论安全问题（人们将大文件上传到您的存储桶），是的，您可以通过基于浏览器的上传到 S3 来限制文件大小。

这是“策略”变量的示例，其中“内容长度范围”是关键点。

```
"expiration": "'.date('Y-m-d\TG:i:s\Z', time()+10).'",
"conditions": [
    {"bucket": "xxx"},
    {"acl": "public-read"},
    ["starts-with","xxx",""],
    {"success_action_redirect": "xxx"},
    ["starts-with", "$Content-Type", "image/jpeg"],
    ["content-length-range", 0, 10485760]
] 
```

在这种情况下，如果上传文件大小> 10mb，则上传请求将被亚马逊拒绝。

当然，在开始上传过程之前，您应该使用 javascript 检查文件大小，如果是，则发出一些警报。

[在javascript中获取文件大小](https://stackoverflow.com/questions/2966076/getting-file-size-in-javascript)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-22T06:14:18.567

AWS 编写了一个教程，解释如何[创建 HTML POST 表单，允许您的网站访问者使用标准 Web 浏览器将文件上传到您的 S3 帐户](https://docs.aws.amazon.com/AmazonS3/latest/userguide/HTTPPOSTExamples.html)。它使用 S3 预签名 URL 来防止篡改，您可以按文件大小限制访问。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-11-15T01:45:33.523

要做你想做的事，你需要通过你自己的网络服务上传。无论如何，这可能是最好的，因为为您的最终用户提供对 S3 存储桶的全局写入访问权限是一场安全噩梦，更不用说没有什么可以阻止他们上传大文件并增加您的费用。

# c++ - 在构造函数之前未分配数组属性的内存？

> ID：13390348
> 
> 赞同：0
> 
> 时间：2012-11-15T01:39:18.983
> 
> 标签：c++, memory-management, constructor, struct

当我运行程序并新建一个 NetworkEditor 时，它会在构造函数中损坏，因为它会从数组的内存中读取。
当我一循环一循环地调试它时，就可以了！？
*为什么？在进入构造函数之前，它没有为数组分配足够的内存吗？*

在我的课堂上，我有两个属性：

```
/*NetworkEditor.h*/

    class CNetworkEditor : public CDiagramEditor
    {...
        VLLink* VL_list[10];
        VLLink* temp_VL_list[10];
    } 
```

在构造函数中，我初始化了数组：

```
/*NetworkEditor.cpp*/
    for (int i = 0; i < 10; i++)
    {
        VLLink* vl_link = NULL;
        while(vl_link == NULL)
        {
            vl_link = new VLLink;
        }
        vl_link->preLink = NULL;
        vl_link->nextLink = NULL;
        vl_link->link = NULL;

        VLLink* vl_link2 = NULL;
        while (vl_link2 == NULL)
        {
            vl_link2 = new VLLink;
        }
        vl_link2->preLink = NULL;
        vl_link2->nextLink = NULL;
        vl_link2->link = NULL;

        VL_list[i] = vl_link;
        temp_VL_list[i] = vl_link2;
    } 
```

VLLink 定义为：

```
typedef struct struct_VLLink
{
    CPhysicalLink* link;
    struct_VLLink* preLink;
    struct_VLLink* nextLink;
}VLLink; 
```

如果我将其更改为：

```
 VLLink* VL_list2[10];
    VLLink* temp_VL_list2[10];
    for (int i = 0; i < MAX_VL_NUM; i++)
    {
        VLLink* vl_link = NULL;
        while(vl_link == NULL)
        {
            vl_link = new VLLink;
        }
        vl_link->preLink = NULL;
        vl_link->nextLink = NULL;
        vl_link->link = NULL;

        VLLink* vl_link2 = NULL;
        while (vl_link2 == NULL)
        {
            vl_link2 = new VLLink;
        }
        vl_link2->preLink = NULL;
        vl_link2->nextLink = NULL;
        vl_link2->link = NULL;

        VL_list2[i] = vl_link;
        temp_VL_list2[i] = vl_link2;

    } 
```

会没事的！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:50:24.410

除了@PeterHuene 建议用类似或类似的东西替换`VL_list`和之外，您应该将初始化移动到构造函数中，避免循环中的代码重复`temp_VL_list``std::list<CPhysicalLink>``VLLink`

```
struct VLLink {
    VLLink() : link(NULL), prelink(NULL), nextlink(NULL) {}
    ...
};` 
```

然后你可以像@MikeSeymour 说的那样减少你的循环

```
for (int i = 0; i < MAX_VL_NUM; i++) {
    VL_list[i] = new VLLink();
    temp_VL_list[i] = new VLLink();
} 
```

内存问题的一个原因可能`MAX_VL_NUM`是大于 10。因此，您应该在任何`MAX_VL_NUM`地方使用或在任何地方使用 10。

现在回答你的问题;-)

> 如果我把它改成……就可以了！？

没有人能回答这个问题，因为没有人知道你想要实现什么。我的第一反应肯定是*不！*，因为“仅仅因为”移动变量几乎总是一个坏主意。与其解决一些随机的症状，不如分析问题并解决原因。

您的更改还会将含义从*类成员*修改为堆栈上的自动*变量。*

# java - Netty - connectTimeoutMillis 与 ReadTimeoutHandler

> ID：13390363
> 
> 赞同：6
> 
> 时间：2012-11-15T01:41:22.743
> 
> 标签：java, netty, connection-timeout

来自 Netty API 文档

> connectTimeoutMillis = "连接超时，以毫秒为单位。如果禁用，则为 0。"

和

> ReadTimeoutHandler = 在特定时间段内未读取数据时引发 ReadTimeoutException。

从客户的角度来看，我对上述内容的解释是否正确？

> 客户端将尝试连接到主机直到“connectTimeoutMillis”。如果建立了连接，并且未将 ReadTimeoutHandler 添加到管道中，则 Channel 可以无限期地等待响应。如果将 ReadTimeoutHandler 添加到管道，则一旦 timeoutSeconds 过去，就会引发 ReadTimeoutException。

一般来说，我只想尝试连接到主机最多'x'秒，但如果通过网络发送请求，我想等待最多'y'秒的响应。如果它塑造/影响答案，则客户端是 Netty，但服务器不是。

跟进：ReadTimeoutHandler 上的 timeoutSeconds 是连续读取字节之间的超时，还是整个请求/响应的超时？示例：如果 timeoutSeconds 为 60，并且每 59 秒读取一个字节（总共 1024 个字节），那么整个响应会在 60416 秒内成功读取，还是会因为总经过时间超过 60 秒而失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:10:53.200

ReadTimeoutHandler 不理解响应的概念。它只能理解 Netty 3 中的 messageReceived 事件或 Netty 4 中的 inboundBufferUpdated 事件。从 NIO 的角度来看，此行为的确切影响取决于 ReadTimeoutHandler 在管道中的位置。（我从未使用过 OIO，所以不能说行为是否完全相同）。

如果 ReadTimeoutHandler 低于管道中的任何帧解码器（即更靠近网络），那么您描述的行为是正确的 - 单字节读取将重置计时器，并且正如您所确定的，可能导致响应需要很长时间被阅读。如果您正在编写服务器，则可以利用它来形成拒绝服务攻击，而攻击者只需付出很少的努力。

如果 ReadTimeoutHandler 高于您的帧解码器，则它适用于您的整个响应。我认为这是您正在寻找的行为。

请注意，ReadTimeoutHandler 也不知道您是否已发送请求 - 它只关心是否已从套接字读取数据。如果您的连接是持久的，并且您只希望在发送请求时触发读取超时，则您需要构建一个请求/响应感知超时处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:14:21.077

1.  Yes, you have correctly identified the difference between connect timeout and read timeout. Note that whatever any documentation may say to the contrary, the default or zero connect timeout means about 60-70 seconds, not infinity, and you can only use the connect timeout parameter to reduce that default, not increase it.

2.  Read timeout starts when you call read() and ends when it expires or data arrives. It is the maximum time that read() may block waiting for the first byte to arrive. It doesn't block a second time in a single invocation.

# java - java中是否有math.substring之类的东西？

> ID：13390368
> 
> 赞同：3
> 
> 时间：2012-11-15T01:41:43.633
> 
> 标签：java, math, int, substring

好吧，我只是好奇。但我想知道是否有数字的子字符串（math.substring？），然后它会在指定的位置获取字符。

示例（真的很糟糕的一个）

```
int number = 5839;
int example = number.substring(0,1)
println = example; 
```

然后它显示5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:43:55.633

你为什么不把它转换成一个字符串，然后调用`substring(0,1)`？...

```
int number = 5839;
int example = Integer.parseInt((number+"").substring(0,1)); 
```

调用`number+""`会导致 JVM 将其转换为`String`，然后调用`substring()`它。然后，您最终将其解析回`int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:43:52.870

```
int number = 5839;
String numString = Integer.toString(number);
String example = numString.substring(0,1)
int subNum = Integer.parseInt(example);
System.out.println(subNum); 
```

将其更改为`String`第一个。这是我写的一个小函数：

```
public static int intSubstring(int number, int beginIndex, int endIndex) {
    String numString = Integer.toString(number);
    String example = numString.substring(beginIndex,endIndex)
    int subNum = Integer.parseInt(example);
    return subNum;
} 
```

或压缩：

```
public static int intSubstring(int number, int beginIndex, int endIndex) {
    return Integer.parseInt((number+"").substring(beginIndex,endIndex));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T01:44:47.720

不，那里没有。但是您可以将整数转换为字符串并获取子字符串并再次解析回整数

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T01:45:52.220

不，没有这样的事情，但您可以执行以下操作：

```
String s = ""+number; //You can now use the Substring method on s; 
```

或者，如果您只想删除最后 y 位：

```
number = (int)(number/y); 
```

如果您只想保留最后的 z 位：

```
number = number%(Math.pow(10,z)); // % means modulo 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T01:47:51.510

不，没有。*int*是原始数据类型。但是，您可以通过一个声明来满足您的需求。

```
Integer.parseInt(String.valueOf(12345).substring(1, 2)) 
```

# c++ - 霍夫曼代码 - 分段错误 11

> ID：13390374
> 
> 赞同：3
> 
> 时间：2012-11-15T01:42:10.103
> 
> 标签：c++, recursion, segmentation-fault, binary-tree, huffman-code

好的，我尝试自己制作 Hauffman 代码，但当我尝试使用递归方法为每个字母打印相应的代码时遇到问题。

（此时我已经创建了一个 BinaryTree 并且 root 不是 NULL）每个节点都有一个值，如果它是一个叶子，它也有一个字母，所以我开始一个节点一个节点地向下遍历树，但似乎在递归方法中node只是忘记了他是谁或者我不知道，我尝试了很多东西。:S

递归方法是**createCode** (Node* actual, string actualCode)；

这是代码：

```
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <string>
#include <queue>
using namespace std;

#define MAX_VALUE 256
int frequencies[MAX_VALUE] = {0};

struct Node {
    int value;
    char letter;
    struct Node *Left, *Right;
}*root=NULL, *temp, *left_temp, *right_temp;

struct CompareNode : public std::binary_function<Node*, Node*, bool> {
    bool operator()(const Node* lhs, const Node* rhs) const {
        if (lhs->value == rhs->value)
            return lhs->letter > rhs->letter;
        else
            return lhs->value > rhs->value;
    }
};

void createCode(Node* actual,string actualCode) {
    if (actual->Left == NULL && actual->Right == NULL) {
        cout << "For: " << actual->letter << " is " << actualCode << endl;
    }
    else {
        if (actual->Left) {
            createCode(actual->Left, actualCode + "0");
        }
        if (actual->Right) {
            createCode(actual->Right, actualCode + "1");
        }
    }
}

void createTree() {
    priority_queue<Node*, vector<Node*>, CompareNode> que;

    for (int x = 0; x < MAX_VALUE; x++) {
        if (frequencies[x] > 0) {
            temp = new Node;
            temp->value = frequencies[x];
            temp->letter = char(x);
            que.push(temp);
        }
    }

    while (que.size() > 1) {
        temp = new Node();
        temp->Left = que.top();
        que.pop();
        temp->Right = que.top();
        que.pop();
        temp->value = temp->Left->value + temp->Right->value;
        temp->letter = NULL;
        que.push(temp);
    }

    root = que.top();
    que.pop();
}

void fillArray(int argc, char *argv[]) {
    string line;
    const char* ptr;

    ifstream myFile(argv[argc - 1]);
    if (myFile.is_open()) {
        while (myFile.good()) {
            getline(myFile,line);

            if (line.length() != 0) {
                ptr = &line.at(0);

                while (*ptr != '\0')
                    ++frequencies[*ptr++];
            }
        }
    }
    else
        cout << "The file could not be open.";
}

int main(int argc, char *argv[]) {
    fillArray(argc, argv);

    createTree();

    createCode(root, "");
    return 0;
} 
```

这是示例树（我试图发布图像，但因为我是新手，所以我不能）：

[二叉树图像](http://f.cl.ly/items/2d423V1X3e2G451h2Z36/Screen%20Shot%202012-11-14%20at%207.31.55%20PM.png)

这是输出：

```
For: a is 0
For:   is 10
Segmentation fault: 11 
```

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:30:31.537

在创建推入队列的 s时，您需要初始化`Left`和`Right`指针：`NULL``Node`

```
if (frequencies[x] > 0) {
    temp = new Node;
    temp->Left = NULL;
    temp->Right = NULL;
    temp->value = frequencies[x];
    temp->letter = char(x);
    que.push(temp);
} 
```

如果没有显式初始化，这些指针具有不确定的值，而且通常不是`NULL`，因此在`createCode`您取消引用无效指针时。

# c++ - 链接器为在某些上下文中使用的整数静态 const 成员提供错误“未定义的符号”

> ID：13390376
> 
> 赞同：2
> 
> 时间：2012-11-15T01:42:23.297
> 
> 标签：c++, linker, initialization, standards, static-members

> **可能重复：**
> [C++ - 在类定义中定义静态常量整数成员](https://stackoverflow.com/questions/3025997/c-defining-static-const-integer-members-in-class-definition)

注意：有几个现存的问题是类似的问题，但我已经审查了其中的许多问题，但找不到解释这种行为的答案：

假设我有如下代码（在**头**文件中）

```
class Foo {
    static const int TEST = 33;

    public:
    void willItWork(void) {
        printf("%d", std::max(TEST, 75));  // embedded platform, no streams
    }
};

int main(void) {
    Foo tester;
    tester.willItWork();
} 
```

这将编译，但不会链接。我收到链接器错误

> 错误：L6218E：未定义符号 Foo::TEST（引用自 foo.o）。

似乎只是将值传递给外部函数会导致问题。在类中的普通表达式或函数中使用`TEST`效果很好。如果我改为写`willItWork()`为

```
void willItWork(void) {
    int diff = TEST - 23;
    printf("%d", diff);
} 
```

没有错误。

我发现了另一个引用 C++ 标准的问题（第 9.4.2 节）：

> 如果静态数据成员是 const 整数或 const 枚举类型，它在类定义中的声明可以指定一个 const-initializer，它应该是一个整数常量表达式。

由于我所做的似乎是“在规则范围内”，任何人都可以为这种奇怪的行为想出任何可能的解释吗？

我在 ideone 上尝试了类似的代码并且没有问题（但是，我无法模仿确切的结构，即那里的头文件）。这是否意味着我使用的链接器不太符合这里的标准？

非常感谢任何见解。我也可以随时提供更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:47:50.637

如果编译器认为它需要`static`成员变量的地址，例如，在某个时刻将变量绑定到引用时，它将创建一个相应的未定义符号，您将不得不定义该成员：

```
int const foo::TEST; 
```

（在一个翻译单元中）。如果编译器只访问 a 值，您可以不定义对象而侥幸逃脱。除非您需要类型为 an `int`，否则您可以使用 an`enum`并避免定义成员的需要：

```
enum { TEST = 33 }; 
```

如果我没记错的话，要查找的标准中的术语是*odr-used 。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T01:46:05.323

`std::max`通过引用而不是值来获取其参数。绑定对静态 const 的引用需要一个实际的对象，而不仅仅是值。

# php - PHP shell_exec 不一致

> ID：13390377
> 
> 赞同：2
> 
> 时间：2012-11-15T01:42:23.600
> 
> 标签：php, macos, osx-mountain-lion

我正在尝试在 PDF 文件中搜索多个关键词。我有大约 60 个 PDF 和大约 8 个关键词，不喜欢大约 480 个手动搜索。

我愿意接受其他建议（见下文），但目前我的方法是`mdfind`在 OS X 上使用，如下所示：

```
$finds = array();
foreach ($search as $term) {
    $result = "";
    $cleanResult = array();
    $shellQuery = "mdfind -onlyin \"$wd\" \"kind:pdf $term\"";
    echo "\n\n$shellQuery\n";
    $result = shell_exec($shellQuery);
    echo $result;
    $cleanResult = split("\n", $result);
    array_pop($cleanResult);
    $finds[$term] = $cleanResult;

    unset($result);
    unset($cleanResult);
}
print_r($finds); 
```

然而，尽管这构建`$shellQuery`得很好，但由于某种原因`$result`，即使命令有效（即，如果我将 的值复制并粘贴`$shellQuery`到终端窗口中，它也会按预期工作）。

假设`$search`包含 'foo'、'bar' 和 'joe'，它可能会找到 'foo' 和 'joe' 很好，但没有返回 'bar'。如果我从数组中删除 'foo' 和 'joe' 并只搜索 'bar'，它会找到 'bar' 很好。通话之间需要休息吗？

顺便说一句，我首选的方法是执行以下操作：

`find . -name "*.pdf*" -exec pdftotext {} - \; | grep -i -l "foo"`

但我不能让它在终端工作。我已经安装了[http://www.bluem.net/en/mac/packages/](http://www.bluem.net/en/mac/packages/)（我很难编译东西，所以像这样的包=竖起大拇指！），但每次我尝试将它传递给 grep（例如`pdftotext myfile.pdf - | grep -i -l "foo"`） grep 只是返回`(standard output)`，仅此而已。

# java - 如何用图像结果定义动作的注释？

> ID：13390380
> 
> 赞同：1
> 
> 时间：2012-11-15T01:42:51.300
> 
> 标签：java, struts2, annotations

我可以在*struts.xml*配置中定义它。

```
<action name="getImage" class="my.action.GetImageAction">
      <result name="success" type="stream">  
          <param name="contentType">image/jpeg</param>  
          <param name="inputName">imageStream</param>  
          <param name="bufferSize">1024</param>  
      </result>  
</action> 
```

我现在正试图通过在带有*名称空间*、*结果路径*的类上的注释来定义它，但我不知道该怎么做。请帮忙 ：）

我努力了

```
@Namespace("/my/namespace")
@ResultPath("/")
@Result(name = "success", type = "imageResult")
public class GetImageAction extends ActionSupport {
.....
@Override
@Action("/getImage")
public String execute() throws Exception {
..... 
```

我得到了一个错误

```
HTTP Status 404 - No result defined for action 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T05:40:07.043

正如错误所说，结果必须在 Action 中定义。定义看起来像这样

```
@Action(value = "getImage", results = { @Result(
        name = "success", 
        type = "stream", 
        params = {"contentType", "application/pdf" }) }) 
```

在示例中，您也看到了类型以及如何定义 contentType。

并且流将由“getFileInputStream”方法返回：

```
public InputStream getFileInputStream() {

            return fileInputStream;
    } 
```

“getContentDisposition”方法必须在 Action 类中可用

```
public String getContentDisposition() {
    return "attachment; filename=" + getFilename() + ".pdf";
} 
```

# android - 使用光标响应和 getExtras 不起作用？

> ID：13390384
> 
> 赞同：0
> 
> 时间：2012-11-15T01:43:06.960
> 
> 标签：android

我正在设计一个 ContentProvider，它需要返回带有数据的游标，并且我需要知道该数据的状态。

我需要光标数据的状态，因为该数据已下载，并且我需要知道它是否仅下载了部分数据，或者在下载期间是否未下载某些元素。它有点复杂，但您可能会明白为什么我需要光标数据的状态。

`getExtras`因此，我已经查看了 Android 中所有 Cursor 实现的源代码，并且函数似乎`respond`是纯垃圾，因为它们在内部不做任何事情......而且，似乎缺少一个`setExtras`函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:58:50.127

我*认为*方法不是setExtras()，而是response()。

我不确定您所说的“数据状态”是什么意思，但听起来您想知道光标中的列是否干净。我见过的大多数内容提供程序实现都将这种类型的状态本身放入行中，或者将其存储在单独的表中。我认为您不应该尝试将状态附加到光标本身。

如您所知，如果您想在游标基础数据发生更改时获得通知，您可以使用 setNotificationUri()、registerContentObserver 或 registerDataSetObserver()。

请注意，没有什么要求您使您从内容提供者提供的列与您使用的任何底层数据库中的列相同。您可以添加提供程序本身生成的列，并将状态存储在其中。

# android - 如何在android上保存布局？

> ID：13390385
> 
> 赞同：0
> 
> 时间：2012-11-15T01:43:07.283
> 
> 标签：android, android-layout

我想在 android 上捕获一个布局文件图像并保存到 sd 卡。在这里，如果我使用此代码，我想要捕获布局 RelativeLayout，我的应用程序运行得很好。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Button
            android:id="@+id/ChoosePictureButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Sign" />
        <Button
            android:id="@+id/Clear"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Clear" />
        <Button
            android:id="@+id/SavePictureButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Save" />
    </TableRow>
</TableLayout>
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="870dp"
    android:layout_alignParentLeft="true"
    android:layout_centerInParent="true" >
    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:src="@drawable/sample" />
</FrameLayout>
<com.example.testsign.SignatureView
    android:id="@+id/sign"
    android:layout_width="match_parent"
    android:layout_height="170dp"
    android:layout_alignParentBottom="true"
    android:visibility="invisible" >
</com.example.testsign.SignatureView> 
```

但是当我想捕获 Framelayout 时，我的应用程序出错了。我不明白为什么？你能帮帮我吗！

源代码：

```
public class Test extends Activity implements OnClickListener {

private SignatureView sign;
private Button choosePicture;
private Button savePicture;
private Button clear;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);
    int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }
    else {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }
    choosePicture = (Button) this.findViewById(R.id.ChoosePictureButton);
    savePicture = (Button) this.findViewById(R.id.SavePictureButton);
    savePicture.setOnClickListener(this);
    choosePicture.setOnClickListener(this);
    clear=(Button)findViewById(R.id.Clear);
    clear.setOnClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_test, menu);
    return true;
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub

    if(arg0==choosePicture)
    {
        sign = (SignatureView) findViewById(R.id.sign);
        sign.setBackgroundColor(0xFFFFFFFF);
        sign.setVisibility(View.VISIBLE);

    }else if(arg0==clear)
    {
        //sign.setVisibility(View.INVISIBLE);
        sign.clearSignature();
    }else if(arg0==savePicture)
    {   
        Toast.makeText(this, "Saved!!!Thank you!!!", Toast.LENGTH_LONG).show();
        captureScreen();

    }
}
private void captureScreen() {
      RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.main);
      Bitmap b = Bitmap.createBitmap(mainLayout.getWidth(), mainLayout
            .getHeight(), Bitmap.Config.ARGB_8888);
      Canvas c = new Canvas(b);
      mainLayout.draw(c);
      ContentValues contentValues = new ContentValues(3);
      contentValues.put(Media.DISPLAY_NAME, "Draw On Me");
      Uri imageFileUri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, contentValues);
      try {
          OutputStream imageFileOS = getContentResolver().openOutputStream(imageFileUri);
          b.compress(CompressFormat.JPEG, 90, imageFileOS);
          Toast t = Toast.makeText(this, "Thank you! Image Saved!", Toast.LENGTH_LONG);
          t.show();
        } catch (Exception e) {
          Log.v("EXCEPTION", e.getMessage());
        }

} 
```

}

当我想要捕获帧布局时记录错误

```
> 11-15 09:00:30.492: W/dalvikvm(4364): threadid=1: thread exiting with uncaught exception (group=0x40bda1f8)

11-15 09:00:30.492: E/AndroidRuntime(4364): FATAL EXCEPTION: main

11-15 09:00:30.492: E/AndroidRuntime(4364): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testsign/com.example.testsign.Test}: java.lang.ClassCastException: android.widget.FrameLayout cannot be cast to android.widget.Button

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread.access$600(ActivityThread.java:128)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.os.Handler.dispatchMessage(Handler.java:99)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.os.Looper.loop(Looper.java:137)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread.main(ActivityThread.java:4514)
11-15 09:00:30.492: E/AndroidRuntime(4364): at java.lang.reflect.Method.invokeNative(Native Method)
11-15 09:00:30.492: E/AndroidRuntime(4364): at java.lang.reflect.Method.invoke(Method.java:511)

11-15 09:00:30.492: E/AndroidRuntime(4364): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)

11-15 09:00:30.492: E/AndroidRuntime(4364): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)

11-15 09:00:30.492: E/AndroidRuntime(4364): at dalvik.system.NativeStart.main(Native Method)

11-15 09:00:30.492: E/AndroidRuntime(4364): Caused by: java.lang.ClassCastException: android.widget.FrameLayout cannot be cast to android.widget.Button

11-15 09:00:30.492: E/AndroidRuntime(4364): at com.example.testsign.Test.onCreate(Test.java:43)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.Activity.performCreate(Activity.java:4465)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)

11-15 09:00:30.492: E/AndroidRuntime(4364): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)

11-15 09:00:30.492: E/AndroidRuntime(4364): ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T02:43:25.573

如果您使用 eclipse 清理您的项目。当 xml 编辑器出现问题时，就会出现转换问题。花了我很长时间才弄清楚为什么会发生铸造错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:22:27.537

在您的代码中的某个时刻（我在这里很确定：Test.java:43），您将 FrameLayout 错误地转换为 Button。

仔细检查您正在使用的 id（在您的布局中，当您 findViewById 时在您的 Activiy 中）。

# google-maps - 获取特定区域的所有公司地理编码

> ID：13390386
> 
> 赞同：0
> 
> 时间：2012-11-15T01:43:09.957
> 
> 标签：google-maps, google-maps-api-3, geocoding, google-maps-markers

是否可以通过 Google 搜索 APIv3 获取特定公司的所有地理编码？

前任。我搜索“Booster juice，Ontario”，它会返回安大略省Booster Juice 位置的所有地理编码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:01:45.807

您可以使用[places-library 的 textSearch](https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests)，但结果仅限于 20 个项目。

**开始之前：**不允许创建包含 Maps-API 数据的企业列表（当它是实施的主要目的时）。

# z3 - 如何安装 iZ3？

> ID：13390388
> 
> 赞同：2
> 
> 时间：2012-11-15T01:43:37.000
> 
> 标签：z3

我正在尝试使用 iZ3 生成插值。但是，安装 Z3 后没有 iZ3 二进制文件，也找不到任何有关如何安装的信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:21:13.573

iZ3 在最新版本中不可用。Z3 4.1 是包含 iZ3 的最后一个版本。这个版本可以在这里找到：[http](http://research.microsoft.com/en-us/um/redmond/projects/z3/older_z3.html) ://research.microsoft.com/en-us/um/redmond/projects/z3/older_z3.html 。请记住，iZ3 依赖于不属于 Microsoft 的软件组件，并且无法与[http://z3.codeplex.com](http://z3.codeplex.com)上的其余源代码一起发布。

# java - 组合语法有效但词法分析器和解析器语法分离时出错？

> ID：13390389
> 
> 赞同：2
> 
> 时间：2012-11-15T01:43:45.320
> 
> 标签：java, xml-parsing, antlr, antlrworks

**原来的**

这是我第一次在 stackoverflow 上提出问题，所以我希望解决方案不会太明显。我正在尝试使用 antlr 来解析 xml 文件中的数据，以便为我在 eclipse 中创建的 java 程序生成可用的令牌。我只有使用 antlr 和 antlr-works IDE 来生成我需要合并的 java 代码的经验。问题是，我的 xml 文件非常大而且很复杂，所以一开始，我只对一次查看几个属性感兴趣。为了使事情对我来说更简单，我尝试使用过滤器选项来筛选并仅获取与我的令牌定义匹配的数据。我意识到只有在分别定义解析器和词法分析器语法时才能使用过滤器选项，但是当我尝试调整组合语法时，在抱怨丢失或不需要的令牌的错误之后，我突然开始出错，我一直在努力理解为什么一个有效而另一个无效。我将它们保存在同一个文件中，删除选项语句并不能解决问题。

这是我的综合语法，然后是我的改编语法，如果有人能给我任何帮助或指导，我将不胜感激。

**结合：**

```
grammar dataExtract;

prog    :    .*;

SOF     :      ('<posts>');

Tag_string :    ('<')(.~'>')+('>');

Tag :   ('Tags="')Tag_string+('"');

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

EOF :   '</posts>'; 
```

**分离：**

```
parser grammar dataExtract;

prog    :    .*;

lexer grammar dataExtract

SOF     :      ('<posts>');

options{filter=true};

Tag_string :    ('<')(.~'>')+('>');

Tag :   ('Tags="')Tag_string+('"');

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

EOF :   '</posts>'; 
```

**更新**

谢谢你的回答，这对我来说很有意义，我更接近让我的语法正常工作，我似乎还有一个问题。解析器语法似乎工作得很好，antlrworks 甚至生成了一个 Java 类而没有抱怨，但是，当我将词法分析器定义保存在它自己的 .g 文件中时，词法分析器规则似乎仍然中断，即使我定义的唯一规则是全部: .*;，我得到一个 EarlyExitException。另外，如果我理解正确，tokenVocab 选项会从词法分析器语法中搜索令牌文件，但由于我收到错误并且它没有生成任何代码，因此还没有创建令牌文件，所以我假设没有它，解析器就不能正确生成。知道发生了什么吗？我曾尝试搜索类似的问题，但很多材料似乎断言，当在输入中找不到与规则匹配的标记时会导致此错误，但因为我什至还没有达到我给它输入这个的地步不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:18:22.750

在分离词法分析器和解析器语法时，ANTLR 不会在生成的 .java 源文件的名称后面`"Lexer"`或后面附加任何内容。`"Parser"`所以在这种情况下你应该使用唯一的名字：

## 解析器

```
parser grammar DataExtractParser;

options {
  tokenVocab=DataExtractLexer; 
}

... 
```

## 词法分析器

```
lexer grammar DataExtractLexer;

... 
```

另外，正如我之前提到的，明确指出解析器应该通过`tokenVocab=LEXER_GRAMMAR_NAME;`选项使用哪些标记（词法分析器规则）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T05:51:57.450

您需要告诉解析器要使用哪个令牌集。

```
parser grammar dataExtract;

options
{
  tokenVocab=dataExtract; // Looks for dataExtract.tokens file
}

prog : .*; 
```

# java - 如何检测相同类型的两个对象中的所有变量是否相同？

> ID：13390393
> 
> 赞同：0
> 
> 时间：2012-11-15T01:44:01.163
> 
> 标签：java, variables, equality

假设我有两个对象，`A`并且`B`在哪里..

```
Object A=new Object();
Object B=A; 
```

默认情况下，这些对象每个都有两个整数：`int X`和`int Y`. 首先，在`A`和`B`中，

```
(X == 0) && (Y == 0) 
```

所以，你会说这两者是平等的，就像 Java 一样。现在，假设我们改变`A.X`了`A.X=2`. 现在，`A`并且`B`不再相等，因为

`A.X==2`

..但..

`B.X==0`

然而，Java 仍然说它们是平等的。

```
(A.equals(B)) == true
(B.equals(A)) == true 
```

那么，你如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:54:39.163

通过这样做`Object B=A;`，您不会创建一个新对象，而`B`只是指向`A`。所以它只有一个对象。

**因此，当您更改时`A.X = 2`，`B.X`在其引用相同变量时也是 2，因此相等。**

您可以通过打印`B.X`值来验证这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:57:00.827

我认为每个人（辛格先生除外）都在这里遗漏了一点：

```
Object A=new Object(); // Implication is that this is really a user-defined class
Object B=A; 
```

你在这里只有一个对象。如果您对对象 A 进行更改，对象 B 中将出现相同的更改，因为它们是*完全相同的对象*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:50:36.573

如果`Object`真的是你自己的类而不是`java.lang.Object`（如果是，那么它会有这些变量`x`和`y`），那么这真的是一个糟糕的类名选择。

您的类必须将`.equals`方法重写为：

```
@Override
public boolean equals(Object obj) {
    if(this == obj) return true;
    if(!(obj instanceof MyObject)) return false;
    MyObject other = (MyObject) obj;
    return other.x == this.x && other.y == this.y;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T01:46:24.533

您需要覆盖包含变量的类的 .equals 方法。看看这个问题：[How to override equals method in java](https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java)

# matlab - MATLAB 错误：保存图时出错：“对象必须具有‘图’类型的祖先”

> ID：13390400
> 
> 赞同：2
> 
> 时间：2012-11-15T01:45:18.250
> 
> 标签：matlab, figure

在 MATLAB 2012a 中，我试图将图形保存为 .fig 文件，而我得到的只是一个窗口

标题：错误保存图

消息：对象必须具有“figure”类型的祖先。

我用谷歌搜索了这个错误消息，谷歌能够完美地预测我的搜索，这意味着其他人之前搜索过相同的错误消息..但是没有一个在线页面实际讨论这个错误。

我知道我没有提供太多信息，对此我深表歉意，但我无法想象还有什么其他细节可以提供。2 分钟前，我以完全相同的方式将完全相同的程序生成的不同图形保存为 .fig 文件，没有任何问题。

这个错误信息是什么意思，我该如何解决这个问题，以便我可以再次以 .fig 格式保存数字？

编辑：我正在尝试从 GUI 保存文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:14:38.947

您的问题似乎与 GUI 如何构建图形有关： * 父对象的类型为“图形” * 此对象有一些（通常）类型为“轴”的子对象 * 大多数图形对象（线条、文本等）属于一个轴。

未以“figure;plot(),etc...”方式构建的图形似乎出错了，例如稍后添加到图形的对象（例如“图例”）或使用自定义命令制作的图形（'hist'、'bar3' 等）。

我的猜测是添加了一些没有图形句柄作为其“祖先”的 GUI 对象。

在 StackOverflow 之外查询这个问题似乎涉及 matlab 函数“getproxyvaluefromhandle”。也许谷歌搜索会有所帮助。[有人在这里](http://www.gomatlab.de/abspeichern-einer-grafik-t24878.html)找到了分解图的帮助（似乎是 Matlab、英语和德语的混合体）

如果您没有代码，您至少可以描述图中的内容吗？否则答案将像问题一样摇摆不定......

# python - python的设计：为什么断言是一个语句而不是一个函数？

> ID：13390401
> 
> 赞同：65
> 
> 时间：2012-11-15T01:45:30.433
> 
> 标签：python, language-design, assert

**在 Python 中，`assert`是一个语句，而不是一个函数。这是一个深思熟虑的决定吗？`assert`有一个语句（和保留字）而不是一个函数有什么好处吗？**

根据[文档](http://docs.python.org/3.2/reference/simple_stmts.html#assert)，扩展[为](http://docs.python.org/2/reference/simple_stmts.html#assert) `assert expression1, expression2`

```
if __debug__:
    if not expression1: raise AssertionError(expression2) 
```

文档还说“当在编译时请求优化时，当前的代码生成器不会为断言语句发出代码。” 在不知道细节的情况下，似乎需要一个特殊情况才能使这成为可能。但是，一种特殊情况也可用于优化对`assert()`函数的调用。

如果`assert`是一个函数，你可以写：

```
assert(some_long_condition,
       "explanation") 
```

但是因为`assert`是一个语句，元组总是计算为`True`，你得到

```
SyntaxWarning: assertion is always true, perhaps remove parentheses? 
```

正确的写法是

```
assert some_long_condition, \
       "explanation" 
```

这可以说是不那么漂亮。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T02:20:53.010

> 让 assert 成为语句（和保留字）而不是函数有什么好处吗？

1.  不能重新分配给用户函数，这意味着它可以在编译时被有效地禁用，正如@mgilson 指出的那样。
2.  第二个可选参数的评估被推迟到如果/当断言失败时。用函数和函数参数来做这件事很尴尬（需要传递一个 lambda）。不推迟对第二个参数的评估会带来额外的开销。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-15T02:16:20.570

在 python 和其他语言（特别是 C）中，一个美妙的事情`assert`是您可以删除它们以优化您的代码，只需添加正确的`#define`（可选地在命令行上使用我曾经使用过的任何编译器）或优化标志（`-O`在Python）。如果`assert`成为一个函数，这个特性将不可能添加到 python，因为直到运行时你才知道你是否有`assert`同名的内置函数或用户定义的函数。

* * *

另请注意，在 python 中，函数调用相当昂贵。用代码替换内联`if __debug__: ...`可能比执行函数调用更有效，如果您将`assert`语句放在性能关键例程中，这可能很重要。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-01T06:54:24.370

除了其他答案（和某种题外话）之外，还有一个提示。为避免使用反斜杠，您可以在括号内使用隐式行连接。;-)

代替：

```
assert some_long_condition, \
       "explanation" 
```

你可以写：

```
assert some_long_condition, (
       "explanation") 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-15T03:36:18.057

我不是 Python 专家，但我相信性能是最大的原因之一。

如果我们有 assert(expression, explain) 作为函数，如果表达式的计算成本很高，即使我们处于非调试模式，Python 也需要计算两个表达式才能将其传递给 assert 函数。

通过扩展断言，表达式和解释语句实际上不会被评估，除非它们确实需要（当**调试**评估为真时）。我认为，如果我们想在不必要的时候断言不影响性能（即生产系统中没有性能影响），这一点至关重要。

# http - HTTP 状态码 401 的替代方案？

> ID：13390415
> 
> 赞同：4
> 
> 时间：2012-11-15T01:46:37.047
> 
> 标签：http

我有一个通过 AJAX 向服务器发布内容的页面。如果用户未登录或用户无权发帖，服务器端脚本将返回状态码 401。问题是，浏览器会通过登录对话框提示用户，而我们无权阻止它。可以用 500 更改 401 吗？如果不是，我可以使用什么合适的通用或自定义代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:27:18.977

网站管理员 StackExchange 上也提出了[类似的问题。](https://webmasters.stackexchange.com/questions/24443/should-i-return-a-http-401-status-code-on-an-html-based-login-form)401 用于 HTTP 身份验证，407 用于代理身份验证，两者都与您使用的基于表单的身份验证不同。`500 - Internal Server error`当用户未登录时，您当然可以返回，但是我提到的帖子建议使用`403 - Forbidden`. 可以在[此处](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)找到 HTTP 状态代码及其含义的列表。

# uitableview - 嵌套推送动画，但没有推送？

> ID：13390421
> 
> 赞同：0
> 
> 时间：2012-11-15T01:47:06.863
> 
> 标签：uitableview, ios6, xcode4.5, uistoryboardsegue

当我尝试执行 segue 时出现此错误...

```
2012-11-14 20:24:54.133 MyApp[26266:c07] nested push animation can result in corrupted navigation bar
2012-11-14 20:24:54.486 MyApp[26266:c07] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2012-11-14 20:24:54.487 MyApp[26266:c07] Unbalanced calls to begin/end appearance transitions for <SheetDrillDownViewController: 0xa1bb980>. 
```

这是我的设置：初始视图->下一个视图（UITableView）->最后一个视图（UITable）

每个单元格都推送到另一个视图，直到最后一个视图。我没有模态转场，我有推送转场...我将推转转场从单元格链接到下一个视图，每个视图都有不同的名称...我的 selectedRowAtIndex 方法中有一个执行转场线。我曾尝试删除该方法，有人说我在两次调用 segue，但是单击时单元格变为蓝色，并且不会推送到任何地方......我该如何解决这个错误？谢谢。

这是我的代码：

```
 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath) {
    [self performSegueWithIdentifier:@"subjectDrillDown" sender:nil];
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"Attempting to identify segue...");
    // Make sure we're referring to the correct segue
    if ([[segue identifier] isEqualToString:@"subjectDrillDown"]) {

        NSLog(@"Segue has been identified...");
        // Get reference to the destination view controller
        SubjectDrillDownViewController *vc = [segue destinationViewController];
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row]; 
        NSMutableDictionary *object = [tableDataSource objectAtIndex:selectedIndex];
        NSString *key = [object valueForKey:@"key"];
        [vc setSelectedItem:key];

        NSLog(@"Switching to %@ detail view...",key);
        NSLog(@"Passing dictionary to %@ view... (Source below)\n\n %@",key,[NSString stringWithFormat:@"%@", [tableDataSource objectAtIndex:selectedIndex]]);
        [vc setDetailDataSourceDict:[tableDataSource objectAtIndex:selectedIndex]];
    }
    else {
        NSLog(@"ERROR, DOUBLE CHECK SEGUE'S NAME!");
    }
} 
```

* * *

我已经看过所有其他 Stack Overflow 问题，但大多数正确答案对我不起作用......

* * *

## 编辑：

下一个视图能够加载，但是当我单击后退按钮时，突然多了两个视图......

* * *

## 更新：

![在此处输入图像描述](../Images/9928b30808fc494d12a002a7c2864293.png)

我将尝试发布尝试识别 segue 的次数... NSLogs，但我的编译器突然无法运行:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:31:09.183

`didSelectRowAtIndexPath`如果您已经将其配置为 cell -> next view，您肯定不需要执行 segue in 。

但是，从那里删除呼叫对您不起作用，然后您可以尝试从视图控制器（从视图区域按 ctrl+拖动）到下一个视图的转场并保持转场呼叫`didSelectRowAtIndexPath`

* * *

我总是使用以下方法之一

**方法一：**

从`UITableViewCell`到 继续`Next View Controller`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Nothing
} 
```

**方法二：**

从`Main View Controller`到 继续`Next View Controller`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:@"subjectDrillDown" sender:nil];
} 
```

您收到的错误是因为您有 segue 并且您在选择时手动执行 segue - 因此，它会导致**嵌套推送动画**

确保 segue 的名称是正确的，并且您只使用上述方法之一

# iphone - 推送 UIViewController 时如何更改 TabBarItens？

> ID：13390427
> 
> 赞同：1
> 
> 时间：2012-11-15T01:47:50.193
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller, uitabbaritem

在我的`firstViewController`我有一个`tabbar`包含 my`firstViewController`和一个`helpViewController`.

当我从 中单击一个按钮时`FirstViewController`，我按下`NewViewController`。但是，当这个视图被推送时，我想将内容从 更改`TabBarController`为显示其他 ViewController，`infoViewController`如`optionViewController`和`NewViewController`。那可能吗？

第一个图像代表我的应用程序。有`FirstViewController`一个按钮可以推动`NewViewController`。当用户单击此按钮时，我希望我的应用程序显示第二张图片中的内容。有可能吗？![我的问题](../Images/c7c0e9d5a46f7231ac88788bde6e052a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:32:42.753

你应该在一个项目中只有 1`UITabBarController`个，它应该是你的 rootViewController。如果您想要不同的选项卡，那么您应该探索`setViewControllers:animated:`.

# css - 仅在 IE8 上，Div 不在全宽页眉中居中

> ID：13390429
> 
> 赞同：0
> 
> 时间：2012-11-15T01:47:52.723
> 
> 标签：css, html, center

我[在此页面上](http://www.olwan.org)的标题 div向左浮动。它应该位于页面中间。

知道问题出在哪里吗？它在 Chrome、Safari 和 Firefox 上完美运行，但在 IE8 上却不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:11:21.700

一个可能的解决方案是使用 HTML5 doctype `<!DOCTYPE html>`。我最近遇到了这样的问题，这为我解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:33:33.383

你得到了特定于 IE 的样式，可以将该标题变成内联块：

```
<!--[if gte IE 7.0]>
<style type="text/css">
.clearfix {display: inline-block;}
</style>
<![endif]--> 
```

消除 。`clearfix`从`#ja-header`

# php - 如何在下拉菜单中立即更改更新数据

> ID：13390433
> 
> 赞同：0
> 
> 时间：2012-11-15T01:48:40.813
> 
> 标签：php, jquery, ajax, mysqli

我有一个应用程序，您可以通过单击此链接[应用程序查看](http://helios.hud.ac.uk/u0867587/Mobile_app/editsessionadmin.php)

当您打开应用程序时，请按照以下步骤操作：

1.  当您打开申请时，您会看到两个下拉菜单，一个是课程，一个是模块，请在相关下拉菜单中选择课程`INFO101 - ...`和模块，然后点击“提交课程和模块”按钮。`CHI2513 - ...`

2.  您将看到下面显示的一些详细信息。您将看到另一个显示评估的下拉菜单，请从下拉菜单中选择任何评估，您将看到所选评估的详细信息显示在下面的文本输入中，“新日期”和“新开始时间”除外。

3.  请点击日历和时钟图标，为相关文本输入选择“新日期”和“新开始时间”。完成后，单击下面的“更新日期/开始时间”按钮。

4.  将出现一个确认框，单击“确定”。现在下面会出现一条消息，说明更新成功，但问题就在这里。如果您查看评估的下拉菜单，您可以看到对于您刚刚更改的评估，它没有显示新的时间和日期，它仍然显示旧的时间和日期。现在，如果您刷新页面并按照步骤 1 和 2 操作，则会在下拉菜单中显示更新时间和日期。

所以我的问题是，我如何才能在用户确认更新发生之后立即在所选评估的下拉菜单中显示新的日期和时间，以便他们可以看到更改已经发生而没有需要刷新吗？

此外，当前日期和开始时间文本输入需要更改以显示更新后的新日期和开始时间，新日期和新开始时间文本输入应返回空白。

下面是显示应用程序的 editsessionadmin.php 页面：

```
<script type="text/javascript">

function submitform() {    

$.ajax({
type: "POST",
url: "updatedatetime.php",
data: $('#updateForm').serialize(),
success: function(html){
$("#targetdiv").html(html);
}
});        
}

function showConfirm(){

var examInput = document.getElementById('newAssessment').value;
var dateInput = document.getElementById('newDate').value;
var timeInput = document.getElementById('newTime').value;

if (editvalidation()) {

var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

if (confirmMsg==true)
{
submitform();   
}
}
} 

$('body').on('click', '#updateSubmit', showConfirm); 

</script>   

<style>
.red{ color:red; }
.green{ color:green; }
</style>

<?php

// connect to the database
include('connect.php');
include('noscript.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$newassessment = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : '';

$sql = "SELECT CourseId, CourseName FROM Course ORDER BY CourseId"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
$course = $dbCourseId;
$coursename = $dbCourseName; 
$courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;  

$outputcourse = ""; 
$outputcourse .= "<p><strong>Course:</strong> " . $course .  " - "  . $coursename . "</p>";

} 

$courseHTML .= '</select>'; 

$moduleHTML = "";  
$moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
$moduleHTML .= '</select>'; 

?>

<script type="text/javascript">

function getModules() { 
var course = jQuery("#coursesDrop").val(); 
jQuery('#modulesDrop').empty(); 
jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
jQuery.ajax({ 
type: "post", 
url:  "module.php", 
data: { course:course }, 
success: function(response){ 
jQuery('#modulesDrop').append(response); 
} 
}); 

}

</script> 

<h1>EDIT AN ASSESSMENT'S DATE/START TIME</h1>   

<p>You can edit assessment's Date and Start time on this page. Only active assessments can be editted.</p>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" /></p>
<div id="moduleAlert"></div>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

$outputmodule = ""; 

$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleName = $moduleInfo[1];
$outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleId, $moduleName);

echo $outputcourse;
echo $outputmodule;

$sessionquery = "
SELECT SessionId, SessionName, SessionDate, SessionTime, ModuleId
FROM Session
WHERE
(ModuleId = ?)
ORDER BY SessionName 
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$moduleId);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbModuleId);

$sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

if($sessionnum ==0){
echo "<p>Sorry, You have No Assessments under this Module</p>";
} else { 

$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $sessionqrystmt->fetch() ) {
if(time() > strtotime($dbSessionDate." ".$dbSessionTime)){
$class = 'green';
} else {
$class = 'red';
}
$sessionHTML .= sprintf("<option value='%s' style='color: %s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;  
}

$sessionHTML .= '</select>';

$assessmentform = "<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post'>
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
</form>";

echo $assessmentform;

}

$editsession = "<form id='updateForm'>

<p><strong>Current Assessment's Date/Start Time:</strong></p>
<table>
<tr>
<th>Assessment:</th>
<td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Date:</th>
<td><input type='text' id='currentDate' name='Datecurrent' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Start Time:</th>
<td><input type='text' id='currentTime' name='Timecurrent' readonly='readonly' value=''/> </td>
</tr>
</table>
<div id='currentAlert'></div>

<p><strong>New Assessment's Date/Start Time:</strong></p>
<table>
<tr>
<th>Assessment:</th>
<td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Date:</th> 
<td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Start Time:</th> 
<td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/><span class='timepicker_button_trigger'><img src='Images/clock.gif' alt='Choose Time' /></span> </td>
</tr>
</table>
<div id='datetimeAlert'></div>

</form>

<button id='updateSubmit'>Update Date/Start Time</button>

<div id="targetdiv"></div>
";

echo $editsession;

}

?> 
```

下面是 ajax 调用以执行更新并显示成功/错误消息的 updatedatetime.php：

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$sessionname = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : ''; 
$sessiondate = (isset($_POST['Datenew'])) ? $_POST['Datenew'] : ''; 
$sessiontime = (isset($_POST['Timenew'])) ? $_POST['Timenew'] : ''; 

$formatdate = date("Y-m-d",strtotime($sessiondate));
$formattime = date("H:i:s",strtotime($sessiontime));

$updatesql = "UPDATE Session SET SessionDate = ?, SessionTime = ? WHERE SessionName = ?";                                           
$update = $mysqli->prepare($updatesql);
$update->bind_param("sss", $formatdate, $formattime, $sessionname);
$update->execute();

$query = "SELECT SessionName, SessionDate, SessionTime FROM Session WHERE SessionName = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s", $sessionname);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionName, $dbSessionDate, $dbSessionTime);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();

if ($numrows == 1){

echo "<span style='color: green'>Your Assessment's new Date and Time have been updated</span>";

}else{

echo "<span style='color: red'>An error has occured, your Assessment's new Date and Time have not been updated</span>";

}

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:19:05.120

下面的 Javascript 应该做你想做的事。这应该从您的 AJAX 代码的成功函数中调用。

```
//Get and store the new date and time.
var newDate = jQuery("#newDate").val();
var newTime = jQuery("#newTime").val();

//Set your current date and time to your new date and time.
jQuery("#currentDate").val(newDate);
jQuery("#currentTime").val(newTime);

//Find the currently selected session and update it.
var selectedOption = jQuery("#sessionsDrop option:selected");
var label = selectedOption.text().split(" - ");
selectedOption.text(label[0] + " - " + newDate + " - " + newTime);

//Clear the new date and time fields.
jQuery("#newDate").val("");
jQuery("#newTime").val(""); 
```

# java - 如何在Java中获得多个锁而没有排序约束？

> ID：13390436
> 
> 赞同：9
> 
> 时间：2012-11-15T01:49:46.257
> 
> 标签：java, concurrency, locking

所以我有类似的代码

```
synchronized(objectOne){ do stuff }
synchronized(objectTwo){ do stuff } 
```

这样做的问题是程序将等待 lock on `objectOne`，即使 lock for`objectTwo`可用。我要做的是说：尝试同时锁定`objectOne`和`objectTwo`，并且无论您先获得哪个锁，都可以为该锁做些事情。我想出了一个解决方案，但我认为它相当hacky，我想知道是否有人有更好的想法。

这是我的想法：启动 2 个线程，每个线程等待一个锁，然后主线程将等待一个[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)。所以你最终会得到这样的结果：

```
CountDownLatch latch = new CountDownLatch(2);

new Thread(new Runnable(){
public void run(){
    synchronized(objectOne) { do stuff }
    latch.countDown();
}).start();

new Thread(new Runnable(){
public void run(){
    synchronized(objectTwo) { do stuff }
    latch.countDown();
}).start();

latch.await(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:02:07.623

我认为你应该使用[`Lock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html)which 为你提供的方法[`boolean tryLock()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html#tryLock%28%29)。

> 返回：如果获得了锁，则返回 true，否则返回 false

当你至少有一把锁时，继续做事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:14:06.973

You might want to have 2 queues of jobs, 2 threads each polling a queue and execute the jobs.

For jobs related to objectOne, you put it in queue#1; jobs related to objectTwo in queue#2.

```
worker1.queue.put( new Runnable(){ public void run() { do stuff } } );
worker2.queue.put( new Runnable(){ public void run() { do stuff } } );

----

class Worker extends Thread

    BlockingQueue<Runnable> queue = new LinkedBlockingQueue<>();

    public void run()
        while(true)
            queue.take().run(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:47:31.347

根据数量的不同，`stuff`分拆多个线程来做事情可能会产生更多的开销。如果`stuff`操作足够快，最好在单个线程中执行操作。你得花点时间才能知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T05:09:48.800

我有点喜欢你的黑客，至少如果这是一次性的情况。那就是说...

如果您经常做这种事情并且想要“不那么老套”的东西，我建议您[ExecutorService#invokeAll()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)。这需要一个 Callables 列表，在线程池上执行它们并阻塞，直到它们全部完成。

草图：

```
ExecutorService es = Executors.newCachedThreadPool(); // for example...
List<Future<Void>> results = es.invokeAll(new ArrayList {{ 
        add(new Callable<Void> { 
            public Void call() { synchronized(objectOne) { do stuff } }
        });
        add(new Callable<Void> { 
            public Void call() { synchronized(objectTwo) { do stuff } }
        });
    }});
// both Callables are done when you get here 
```

这显然假设在您的应用程序中此时可以从不同的线程调用这些方法。如果由于某种原因您需要从同一个线程调用两者，我认为您注定要使用`tryLock`Bhesh Gurung 的回答中讨论的忙等待。

# d3.js - 你如何在 d3.js 中设置周期性计时器？

> ID：13390438
> 
> 赞同：10
> 
> 时间：2012-11-15T01:49:54.730
> 
> 标签：d3.js

我想每 5 分钟运行一次特定功能。如果我写这样的代码：

```
function f() {
    console.log("hi");
    d3.timer(f, 5*60*1000);
    return true;
}

d3.timer(f, 5*60*1000); 
```

然后`f`似乎运行一次，然后再也不运行。

我通过创建被调用的克隆来实现所需的`f`行为`f2`：`f`调用`d3.timer(f2)`和`f2`调用`d3.timer(f)`。这似乎是一个丑陋的黑客。有没有更好的办法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T17:56:57.863

我认为[@nrabinowitz 的答案](https://stackoverflow.com/a/13403301/1015178)可能是最好和最简单的，但如果你真的想使用`d3.timer`，这就是你的做法。

```
var interval = 1000; // one second in milliseconds

var makeCallback = function() {
    // note that we're returning a new callback function each time
    return function() {
        console.log('OH HAI!!');
        d3.timer(makeCallback(), interval);
        return true;
    }
};

d3.timer(makeCallback(), interval); 
```

您的代码未按预期工作，因为 d3.js 将计时器映射到函数实例（请参阅此处的代码：[https](https://github.com/mbostock/d3/blob/master/d3.v2.js#L4073) ://github.com/mbostock/d3/blob/master/d3.v2.js#L4073 ），所以您的代码正在执行以下操作：

1.  使用回调设置计时器`f()`
2.  `f()`五分钟后调用
3.  `f()`登录到控制台，创建一个新的计时器，该计时器也`f()`用作其回调，然后**通过返回取消该计时器`true`**。

我的答案中的代码通过每次返回一个新的函数实例来解决问题。

当然，这比使用 更复杂，更难理解`setInterval`，所以你应该这样做。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-15T17:52:03.940

这听起来像是标准 JavaScript`setInterval()`方法的工作：

```
setInterval(f, 5*60*1000); 
```

如果您需要它在每次调用时运行动画，那`d3.timer`将是有用的 - 否则，标准`setInterval`和`setTimeout`方法可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-03T05:19:21.377

Looks like d3.interval is a thing, and is meant to be a replacement for setInterval: [https://github.com/d3/d3-timer#interval](https://github.com/d3/d3-timer#interval)

```
var interval = d3.timeout(callback, interval_time, optional_delay); 
```

# clojure - jclouds 新手——无法使用 lein 下载任何 JClouds JAR 文件

> ID：13390440
> 
> 赞同：1
> 
> 时间：2012-11-15T01:50:07.100
> 
> 标签：clojure, leiningen, jclouds

按照 Jclouds 网站上的说明，我下载了 Lein BAT 文件，并将 Curl 下载到同一文件夹中。我正在使用 Windows 8 x64 PC。

现在我在包含 lein 和 curl 的文件夹中创建了一个名为“project.clj”的文件。

之后，我运行了以下命令——

```
lein deps 
```

然而，这一切只是在以下路径中创建一个文件（在包含 Lein 和 curl 的文件夹中）--

```
target\scale\dependencies 
```

名为“dependencies”的文件包含以下文本——

```
 ([:dependencies [[org.jclouds/jclouds-all "1.5.3"] [org.jclouds.driver/jclouds-sshj "1.5.3"]]]) 
```

我不确定我在这里做错了什么......如何正确下载所有 jclouds 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:19:25.947

抱歉，这是用 lein 2 更新的。现在更正了 jclouds.apache.org[文档。](http://jclouds.apache.org/start/install/#lein)

创建 project.clj 后...

```
Execute lein pom, then mvn dependency:copy-dependencies which will fill target/dependency with all the jclouds jars. 
```

# php - CI：在模型更改时生成迁移

> ID：13390447
> 
> 赞同：1
> 
> 时间：2012-11-15T01:51:21.370
> 
> 标签：php, codeigniter

Codeigniter 中是否存在用于在模型或架构更改时自动生成[迁移脚本的实用程序？](http://codeigniter.com/user_guide/libraries/migration.html)如果是这样，它在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:50:34.093

不幸的是，不存在这样的实用程序。虽然这绝对是一个很棒的。您可以编写一个来监视数据库结构的变化，尽管这可能是一个怪物项目。或者，可以编写一个库来提供该功能。

# c++ - 单链打印 C++

> ID：13390449
> 
> 赞同：0
> 
> 时间：2012-11-15T01:51:36.420
> 
> 标签：c++, linked-list

我正在尝试以 {1,2,3,4,etc} 格式选择我的链。您可以在下面找到包含节点布局的头文件。我只是对如何循环浏览我的列表以打印出项目感到困惑。

任何指导将不胜感激！

设置.h

```
using namespace std;

#include <iostream>

class Set
{
  private:

    struct Node
    {
      int Item;      // User data item
      Node * Succ;   // Link to the node's successor
    };

    unsigned Num;    // Current count of items in the set
    Node * Head;     // Link to the head of the chain

  public:

    // Return information about the set
    //
    bool is_empty() const { return Num == 0; }
    unsigned size() const { return Num; }

    // Initialize the set to empty
    //
    Set();

    // Insert a specified item into the set, if possible
    //
    bool insert( int );

    // Display the set
    //
    void display( ostream& ) const;

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:02:17.180

这里有两个建议： 1）先排序列表，然后打印所有节点；2）为数据创建另一个列表（索引）并对这些链接进行排序（这些节点中不需要数据）。

## 首先排序列表

一种常用的技术是按照您希望它们打印的顺序对节点进行排序。这应该涉及更改链接字段。
接下来，从头节点开始，打印列表中的每个节点（或列表中每个节点的数据）。

## 使用索引列表

创建另一个没有数据字段的链表。此列表中的链接指向原始列表中的数据字段。按照您希望打印节点的顺序对新列表进行排序。
该技术保留了第一个列表的创建顺序并允许不同的排序方案。

## 更改链接

由于您正在编写自己的链接列表，因此链接的更改留作练习，因为我没有得到报酬来编写您的代码。SO以及网络上有很多用于排序和遍历链表的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:57:46.217

你只想做这样的事情：

```
void Set::display(ostream &out) const {
    for(int i=0; i<Num; i++) {
        out << Pool[i] << " ";
    }
    out << endl;
} 
```

An`ostream`行为正常`cout`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:01:08.820

很难回答你的问题。如果要将数组打印到屏幕上，则应考虑编写`display()`如下代码：

```
#include <iostream>
#include <iterator>
void Set::display() const {
   ostream_iterator<int> out_it (cout," ");
   copy(Pool,Pool+Num,out_it);   
   cout << endl;
} 
```

或者如果你想写信 （正如@alestanis在[回答](https://stackoverflow.com/a/13163962/1714661)`ostream&`中指出的那样）

```
#include <iostream>
#include <iterator>
void Set::display(ostream &out) const {
   ostream_iterator<int> out_it (out," ");
   copy(Pool,Pool+Num,out_it);   
   out << endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T01:59:35.930

没有测试，我会做这样的事情。（假设最后一个节点已`Succ`设置为`NULL`，正如我建议的那样。）

```
void LoopList(struct Node *head)
{
    for (struct Node *p = head; p != null; p = p->Succ)
    {
        // Do whatever with this node
        Print(p);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T02:45:55.103

我想我想多了。无论如何，这就是我最终要做的。现在我只需要为逗号添加一些格式，我已经设置好了。

```
Node * Temp;
Temp = new (nothrow) Node;
Temp = Head;
out << "{";
while(Temp->Succ)
{
      out << Temp->Item;
      Temp = Temp->Succ;
}
out << '}' << endl; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-15T02:01:38.860

假设你的列表是循环的，你可以使用这个：

```
struct Node *n = begin;

if (n != NULL) {
    //do something on it
    ...
    for (n = begin->Succ; n != begin; n = n->Succ) {
    }
} 
```

或者

```
struct Node *n = begin;
if (n != NULL) {        
    do {        
        //do something
        ...
        n = n->Succ;
    } while (n != begin)
} 
```

# html - 将鼠标悬停在图像上，图像的其余部分将出现，但超出 css 范围

> ID：13390451
> 
> 赞同：0
> 
> 时间：2012-11-15T01:51:56.373
> 
> 标签：html, css

我有以下代码[http://jsfiddle.net/tbedf/5/](http://jsfiddle.net/tbedf/5/)它可以工作。但我想知道我是否可以做一些事情，当图像在悬停后显示为全尺寸时，完整的图像会出现在顶部下面的图像，而不是把图像一直向下推。

```
li { float:left; height:100px; overflow:hidden; margin:10px; }
li:hover { height:auto; } 
```

提前谢谢您，如果您不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:06:59.900

你可以使用这个 CSS：

```
li {float:left; height:100px;  position:relative; overflow:hidden; margin:10px; }
img {position: relative; height:auto; left:0px; top:0;}
li:hover { overflow:visible; z-index:99;  } 
```

​工作[演示](http://jsfiddle.net/tbedf/8/)

# javascript - 在 WebSocket 中接收 Blob 并在 Canvas 中呈现为图像

> ID：13390454
> 
> 赞同：12
> 
> 时间：2012-11-15T01:52:30.507
> 
> 标签：javascript, websocket

我正在构建一个简单的 WebSocket 应用程序，它将当前画布的二进制快照传输到其他侦听器。

当前画布快照是使用 WebSocket 发送的：

```
var image = context.getImageData(0, 0, canvas.width, canvas.height);
var buffer = new ArrayBuffer(image.data.length);
var bytes = new Uint8Array(buffer);
for (var i=0; i<bytes.length; i++) {
    bytes[i] = image.data[i];
}
websocket.send(buffer); 
```

尝试将接收端的数据呈现为：

```
var bytes = new Uint8Array(blob.size);
var image = context.createImageData(canvas.width, canvas.height);
for (var i=0; i<image.length; i++) {
    image[i] = bytes[i];
}
context.drawImage(image, 0, 0); 
```

正确接收 blob，但图像仍未呈现。

任何想法 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T18:59:05.170

在连接初始化后立即设置 WebSocket 的 binaryType 属性就可以了。这可以这样做：

```
var wsUri = "ws://localhost:8080/whiteboard/websocket";
var websocket = new WebSocket(wsUri);
websocket.binaryType = "arraybuffer"; 
```

这将允许传输文本和二进制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:02:49.000

我想你可能已经看过这个页面了。

[http://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html](http://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html)

在该页面上找到**“接收二进制消息”**或更好地阅读整页。

我认为最好将调试放在 onmessage events 第一行并检查 event.data 对象。正如您所说，能够捕获二进制数据并将其发送到服务器，这消除了您的浏览器可能不支持 Web 套接字上的二进制数据的疑问。

现在我唯一的疑问是“服务器真的在发送二进制数据吗？” 您可以尝试创建一个可见的 img html 元素并将接收到的数据分配给 src prop 到该元素以检查数据吗？不知道这是否可以帮助 [websocket 进行数据的二进制传输和解码](https://stackoverflow.com/questions/3806100/websocket-for-binary-transfer-of-data-decode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:57:13.997

您的 bytes 变量似乎为空您使用了[http://www.javascripture.com/Uint8Array](http://www.javascripture.com/Uint8Array)或[https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Uint8Array](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Uint8Array)中的第一种构造函数， 其中每个元素都分配为零.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T03:58:50.777

[http://www.w3schools.com/tags/canvas_createimagedata.asp?output=print](http://www.w3schools.com/tags/canvas_createimagedata.asp?output=print)

它应该是 image.data[] 而不是 image[]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T16:55:39.987

您的最终代码应如下所示

```
var bytes = new Uint8Array(blob);
var image = context.createImageData(canvas.width, canvas.height);
for (var i=0; i<bytes.length; i++) {
    image.data[i] = bytes[i];
}
context.drawImage(image, 0, 0); 
```

# python - 为什么 2.__add__(3) 在 Python 中不起作用？

> ID：13390458
> 
> 赞同：14
> 
> 时间：2012-11-15T01:52:58.487
> 
> 标签：python, methods, int, syntax-error

整数`2`有一个`__add__`方法：

```
>>> "__add__" in dir(2)
True 
```

...但调用它会引发 SyntaxError：

```
>>> 2.__add__(3)
  File "<stdin>", line 1
    2.__add__(3)
            ^
SyntaxError: invalid syntax 
```

为什么我不能使用该`__add__`方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T01:55:35.433

`2.`被解析为浮点数，`2.__add__`SyntaxError 也是如此。

你可以评价

`(2).__add__(3)`反而。

* * *

```
In [254]: (2).__add__(3)
Out[254]: 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T02:17:33.417

绕过`2.`被解析为浮点数的另一种方法是在 the`2`和 the之间插入一个空格`.`

```
>>> 2 .__add__(3)
5 
```

# android - 使用sqlite在android中区分和substri

> ID：13390460
> 
> 赞同：1
> 
> 时间：2012-11-15T01:53:25.977
> 
> 标签：android, sql, sqlite, contacts

我想得到所有联系人的第一个字母而不重复我不能使用这样的东西：

> 光标 flc = this.cr.query(ContactsContract.Contacts.CONTENT_URI, Proyection2, null, null, "UPPER("+ContactsContract.Contacts.DISPLAY_NAME+")");

因为内容提供者不允许在代码中使用函数，所以这是我想要的解释：

> "从 "+ContactsContract.Contacts.CONTENT_URI" 中选择不同的 substr(" + ContactsContract.Contacts.DISPLAY_NAME+", 1, 1)

我搜索了一种与内容提供者或直接访问 bd 的方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:05:30.433

内容提供者不是通用的 SQL 接口；他们只支持他们已经实现的那些访问，而且他们可能一开始就不是基于 SQL 数据库的。

如果您想做任何内容提供商不直接支持的过滤或分组，您必须自己做。

# asp.net - 从代码隐藏发布文件

> ID：13390464
> 
> 赞同：1
> 
> 时间：2012-11-15T01:53:50.820
> 
> 标签：asp.net, file-upload, sitecore

我想从代码隐藏上传文件。

我想稍微解释一下我的情况。

我现有的代码是..

我有一个文件上传控件。

```
<asp:FileUpload ID="fuSRForm" runat="server" class="file"/> 
```

然后从代码隐藏中检查该控件的条件。

```
if (fuSRForm.HasFile && (fuSRForm.PostedFile.ContentType.ToString().Trim().ToLower().Contains("pdf") || fuSRForm.PostedFile.ContentType.ToString().Trim().ToLower().Contains("application/vnd.openxmlformats-officedocument.wordprocessingml.document") || fuSRForm.PostedFile.ContentType.ToString().Trim().ToLower().Contains("msword"))) 
```

如果满足条件，

我使用 Sitecore API 上传文件。

这是上传AP​​I的一部分。

```
 // creating necessary arguments to be passed to the processor
                        UploadArgs args = new UploadArgs();

                        // adding http files collection
                        args.Files = base.Request.Files; 
```

因此，API 通过使用抓取所有发布的文件`base.Request.Files`

* * *

我的新情况是当用户单击时我创建了一个 pdf 文件`Submit`。

然后我将它保存在一个名为`asyncupload`

之后我必须`Sitecore`使用相同的 API上传它

所以，我试图将 更改`base.Request.Files`为我的文件。

但我无法改变这一点。

所以，我将不得不使用`FileUpload`控件上传我的文件。

```
 FileUpload tempFU = new FileUpload();
            tempFU.PostedFile= ????
            args.Files = base.Request.Files; 
```

我被困在这里。我可以从后面的代码中发布我的文件，也可以将其更改`base.Request.Files`为我的文件。

无论哪种方式，我都被困住了。任何人都可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:48:10.550

我不确定你的最终目标是什么。如果我对您的理解不正确，也许您可​​以发布更多代码。但以下是向媒体库添加文件的方法：[Brian Pedersen：以编程方式向 Sitecore 媒体库添加文件](http://briancaos.wordpress.com/2009/07/09/adding-a-file-to-the-sitecore-media-library-programatically/)

如果您使用的是`<asp:FileUpload />`控件，则可以像这样将文件保存到服务器磁盘：

```
string filePath = Path.Combine(Server.MapPath("~/"), "upload/tempfile.tmp");
FileUpload1.SaveAs(filePath); 
```

然后从我上面提供的链接调用该`AddFile`方法：

```
AddFile(filePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T11:43:54.073

你需要在你要击中的 api 中使用处理程序并击中它

`using (WebClient client = new WebClient()) { client.UploadFile(Sitecore Handler, FilePath); }`

# c# - 如何从 .wav 声音转换为 double[] C#

> ID：13390472
> 
> 赞同：2
> 
> 时间：2012-11-15T01:55:25.303
> 
> 标签：c#, audio

我需要执行 FFT，并且我有一个声音样本 .wav 格式。该函数需要 `double[] xRe, double[] xIm, REAL PART and imaginary part`如何将声音文件转换为double[]？我从来没有见过这样的事情。在互联网上找不到那种操作。这是这个声音样本： [http ://www.speedyshare.com/fFD8t/e.wav](http://www.speedyshare.com/fFD8t/e.wav)

请帮忙，因为我使用了 Pascal，现在不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T02:11:25.673

这是一个简单的流操作。

1.  您必须阅读 wav 文件头。
2.  您必须读取数据字节。

从 MSDN 粘贴：

```
BinaryReader reader = new BinaryReader(waveFileStream);

//Read the wave file header from the buffer. 

int chunkID = reader.ReadInt32();
int fileSize = reader.ReadInt32();
int riffType = reader.ReadInt32();
int fmtID = reader.ReadInt32();
int fmtSize = reader.ReadInt32();
int fmtCode = reader.ReadInt16();
int channels = reader.ReadInt16();
int sampleRate = reader.ReadInt32();
int fmtAvgBPS = reader.ReadInt32();
int fmtBlockAlign = reader.ReadInt16();
int bitDepth = reader.ReadInt16();

if (fmtSize == 18)
{
    // Read any extra values
    int fmtExtraSize = reader.ReadInt16();
    reader.ReadBytes(fmtExtraSize);
}

int dataID = reader.ReadInt32();
int dataSize = reader.ReadInt32();

// Store the audio data of the wave file to a byte array. 

byteArray = reader.ReadBytes(dataSize);

// After this you have to split that byte array for each channel (Left,Right)
// Wav supports many channels, so you have to read channel from header 
```

这是更详细的解释：

[http://msdn.microsoft.com/en-us/library/ff827591.aspx](http://msdn.microsoft.com/en-us/library/ff827591.aspx)

在这里您可以阅读有关 WAV 文件格式的信息：

[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

还有一些关于 WAV 作为复数和 FFT：

[如何将波形数据转换为复数](https://stackoverflow.com/questions/6581001/how-to-convert-wave-data-into-complex-numbers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-10T00:35:28.450

Kamil 的解决方案非常接近，但不适用于我遇到的一些 wav 文件。经过一番研究，这是我发现的。在规范 WAV PCM 声音文件格式 ( [http://soundfile.sapp.org/doc/WaveFormat/](http://soundfile.sapp.org/doc/WaveFormat/) ) 的描述中，我在注释中发现了这个参考：*Wave 数据流中可能有额外的子块。如果是这样，每个都会有一个 char[4] SubChunkID，和 unsigned long SubChunkSize，以及 SubChunkSize 的数据量。*

在我遇到的几个 wav 文件中，确实有额外的子块，所以我不得不添加一些代码来读取，直到找到“数据”标记。添加后，它普遍适用。我的完整代码如下。

```
public static bool ReadWavFile(string filename, out float[] L, out float[] R)
        {
            L = R = null;

            try
            {
                using (FileStream fs = File.Open(filename, FileMode.Open))
                {
                    BinaryReader reader = new BinaryReader(fs);

                    // chunk 0
                    int chunkID = reader.ReadInt32();
                    int fileSize = reader.ReadInt32();
                    int riffType = reader.ReadInt32();

                    // chunk 1
                    int fmtID = reader.ReadInt32();
                    int fmtSize = reader.ReadInt32(); // bytes for this chunk
                    int fmtCode = reader.ReadInt16();
                    int channels = reader.ReadInt16();
                    int sampleRate = reader.ReadInt32();
                    int byteRate = reader.ReadInt32();
                    int fmtBlockAlign = reader.ReadInt16();
                    int bitDepth = reader.ReadInt16();

                    if (fmtSize == 18)
                    {
                        // Read any extra values
                        int fmtExtraSize = reader.ReadInt16();
                        reader.ReadBytes(fmtExtraSize);
                    }

                    // chunk 2 -- HERE'S THE NEW STUFF (ignore these subchunks, I don't know what they are!)
                    int bytes;
                    while(new string(reader.ReadChars(4)) != "data")
                    {
                        bytes = reader.ReadInt32();
                        reader.ReadBytes(bytes);
                    }

                    // DATA!
                    bytes = reader.ReadInt32();
                    byte[] byteArray = reader.ReadBytes(bytes);

                    int bytesForSamp = bitDepth / 8;
                    int samps = bytes / bytesForSamp;

                    float[] asFloat = null;
                    switch (bitDepth)
                    {
                        case 64:
                            double[]
                            asDouble = new double[samps];
                            Buffer.BlockCopy(byteArray, 0, asDouble, 0, bytes);
                            asFloat = Array.ConvertAll(asDouble, e => (float)e);
                            break;
                        case 32:
                            asFloat = new float[samps];
                            Buffer.BlockCopy(byteArray, 0, asFloat, 0, bytes);
                            break;
                        case 16:
                            Int16[]
                            asInt16 = new Int16[samps];
                            Buffer.BlockCopy(byteArray, 0, asInt16, 0, bytes);
                            asFloat = Array.ConvertAll(asInt16, e => e / (float)Int16.MaxValue);
                            break;
                        default:
                            return false;
                    }

                    switch (channels)
                    {
                        case 1:
                            L = asFloat;
                            R = null;
                            return true;
                        case 2:
                            L = new float[samps];
                            R = new float[samps];
                            for (int i = 0, s = 0; i < samps; i++)
                            {
                                L[i] = asFloat[s++];
                                R[i] = asFloat[s++];
                            }
                            return true;
                        default:
                            return false;
                    }
                }
            }
            catch
            {
                Debug.WriteLine("...Failed to load note: " + filename);
                return false;
                //left = new float[ 1 ]{ 0f };
            }

        } 
```

# c# - 文本框下拉 onclick 事件

> ID：13390477
> 
> 赞同：0
> 
> 时间：2012-11-15T01:56:27.833
> 
> 标签：c#, asp.net, drop-down-menu, textbox

大家好，我想在页面加载时显示一个文本框。此文本框将根据正在修改的用户具有相应的部门。

例如，当有人要编辑属于人力资源部门的用户的信息时，文本框将显示“人力资源”。但是，如果您想修改该信息，我希望能够单击文本框，它将表现为显示所有可用部门的下拉列表。

此外，如果有人想添加一个新部门，您只需在文本框中输入新部门并保存用户信息。

我怎样才能做到这一点？

希望我说清楚了，但如果没有，我很乐意回答您的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:14:52.260

我建议使用[jQuery UI 自动完成](http://jqueryui.com/autocomplete/)。

不久前，我制作了一个关于如何在 asp.net 中执行此操作的视频教程。 [http://www.youtube.com/watch?v=ULHSqoDHP-U&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=6&feature=plcp](http://www.youtube.com/watch?v=ULHSqoDHP-U&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=6&feature=plcp)

# c++ - C++ 进程因状态 3 混淆而终止

> ID：13390479
> 
> 赞同：2
> 
> 时间：2012-11-15T01:56:56.433
> 
> 标签：c++, class, pointers, reference, compiler-errors

我对编程很陌生，但在过去一周左右一直在关注 c++ 教程并积累了许多 PDF 来帮助我。我在他们或网上找不到任何足够清楚地回答我的问题的东西。请原谅我的新手。

相关代码：

日志文件.hpp

```
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// HEADER :: CLASS INTERFACE FILE

// ==============================
// Include Guard
#ifndef __LOGFILE_INCLUDED__ // If Actor.hpp hasn't been included yet
#define __LOGFILE_INCLUDED__ // Define this for the compiler so it knows it has now been included

// ==============================
// Forward declared dependencies

// ==============================
// Included dependencies
#include <iostream>
#include <fstream>

// ==============================
// Actual class
class Logfile { // Logfile
public:
    // Globally accessible variables
    bool LACT; // Is log file active?
    std::ofstream LOG; // Actual log file
    std::string entry; // Data to be entered in log file

    // ==============================
    // Core methods
    Logfile(); // Constructor
    ~Logfile(); // Destructor

    // Additional methods
    bool isActive(); // Is log file active?
    void logEntry(std::string entry); // Make an entry in the log if 'LACT' is set to true
    void toggleLog(); // Toggle log file open or closed
};

extern Logfile *log; // This variable is declared in main

#endif // __LOGFILE_INCLUDED__ 
```

日志文件.cpp

```
// ==============================
// Included dependencies
#include "Logfile.hpp"

// ==============================
// Core methods
Logfile::Logfile() { // Constructor
    LACT = true; // Toggle logfile to active
    LOG.open ("LOG.txt"); // Open 'log.txt' and prepare it to receive 'LOG' entries
    LOG << "LOG FILE CLASS CONSTRUCTED\n";
    LOG << "LOG FILE OPENED\n";
}

Logfile::~Logfile() { // Deconstructor
    LOG << "LOG FILE CLOSED\n";
    LOG << "LOG FILE CLASS DECONSTRUCTED";
    LOG.close(); // Close log file
}

// Additional methods
bool Logfile::isActive() { // Is log file active?
    if ( LACT ) return true;
    else return false;
}

void Logfile::logEntry(std::string entry) { // Make an entry in the log if 'LACT' is set to true
    if ( LACT ) LOG << entry << std::endl;
}

void Logfile::toggleLog() { // Toggle log file open or closed
    if ( LACT ) { // Log file is active
        LOG << "LOG FILE CLOSED\n";
        LOG.close(); // Close log file
    } else { // Log file is inactive
        LOG.open ("LOG.txt"); // Open 'log.txt' and prepare it to receive 'LOG' entries
        LOG << "LOG FILE OPENED\n";
    }
} 
```

引擎.hpp

```
// ==============================
// Forward declared dependencies
class Logfile;

class Engine { // Core system, main loop
public :
    // Globally accessible variables 
    Logfile *log; // Declare 'log' as an empty pointer (*) 
```

引擎.cpp

```
// ==============================
// Included dependencies
#include "Logfile.hpp"

// ==============================
// Core methods
Engine::Engine() { // Constructor method
    // Initialization
    log = new Logfile(); // Declare 'log' as pointer to access log file
    TCODConsole::initRoot(80,50,"Testbed",false); // Create 'root' console (not fullscreen)
    if ( log->isActive() ) log->logEntry("(TCODConsole) Root console initialized"); // WORKS 
```

地图.hpp

```
// ==============================
// Forward declared dependencies
class Logfile;

extern Logfile *log; // Pointer exists in Engine.hpp 
```

地图.cpp

```
// ==============================
// Included dependencies
#include "Logfile.hpp"

if ( log->isActive() ) log->logEntry("(TCODConsole) Root console initialized"); TERMINATION STATUS 3
if ( tiles[(x-1)+y*width].tType =="floor" ) tally++; // Left tile status, add 1 to tally if floor  :  TERMINATION STATUS 3
if ( tiles[(x-1)+(y-1)*width].canWalk ) tally++; // Left-top tile status, add 1 to tally if floor  :  WORKS 
```

如果我理解正确，终止状态 3 表示我错误地引用了一个关于它是否是指针的变量......？当我想从 Map.cpp 中的 2Darray 中的单个图块访问 tType 字符串时，我最初遇到了这个问题（尽管我可以访问布尔变量 canWalk 就好了......），但不知道出了什么问题，所以我决定学习实现一个外部日志来查找问题......但我想我在这样做时找到了回到同一个问题的方法......

非常感谢任何帮助，就像批评一样，我还有很多东西要学。

--

我问这个问题的最初目的是（现在我意识到）从多文件程序中的任何 *.cpp 文件中获取一个全局声明的对象。我刚刚找到了这个答案：[http](http://www.cplusplus.com/forum/beginner/3848/) ://www.cplusplus.com/forum/beginner/3848/ ，以防这可能对其他有类似问题的人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T03:15:16.163

在您的 Logfile.hpp 中，您缺少`#include <string>`：您的`LogFile`类变量之一已声明`std::string`，因此您需要包含它。

在您的 Engine.cpp 中，您忘记将您的 Engine.hpp 包含在您的 LogFile *log 中；变量被声明。这会导致您的 Engine.cpp 文件出现错误，您在该文件中尝试为其分配一个新`LogFile`对象。

所以添加`#include <string>`到 Logfile.hpp 的顶部并添加`#include "Engine.hpp"`到 Engine.cpp 的顶部

# jquery - jQuery Ajax 不加载内容

> ID：13390482
> 
> 赞同：0
> 
> 时间：2012-11-15T01:57:07.047
> 
> 标签：jquery, ajax, dynamic-loading

我正在使用[w3schools 编写的代码（这是链接）](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_load)，试图让一些 Ajax 在我的个人网页上运行。

不幸的是，由于某种原因，当我将其复制并粘贴到实际文件中时，它实际上并没有加载任何内容。我已经修复了 jQuery 引用并创建了一个名为 demo_test.txt 的文件。除此之外，我没有接触过代码，但它在本地不起作用。

jQuery Ajax 有什么改变吗？我做错了吗，还是什么？我不明白为什么这不能像在网络上那样工作。

谢谢！

# virtualhost - 生产中的流浪者

> ID：13390483
> 
> 赞同：42
> 
> 时间：2012-11-15T01:57:18.503
> 
> 标签：virtualhost, vagrant, infrastructure

我一直在阅读有关 Vagrant 的文章，我发现它对我的开发非常有用。我目前正在管理一系列服务（邮件、Web、LDAP、文件共享等），其中一个经常出现故障并需要快速备份。是否可以（并且推荐）将 Vagrant 用于这些目的？

到目前为止，我已经像真机一样安装了虚拟机。

我还想知道 Vagrant 的替代方案，它允许我设置一个简单的配置文件并放置一个虚拟机，例如，使用 Zimbra，并快速拥有一个备用邮件服务器，启用 RabbitMQ 等。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T00:01:56.873

Vagrant 应该更像是一个临时环境来测试您的基础架构更改。它应该是您自动化基础架构更改的测试平台。

我们在我公司使用它的方式是这样的：

1.  在 Vagrant 中为我们的托管服务器创建虚拟机。
2.  为每个服务器创建 puppet 定义。
3.  为每个服务器创建黄瓜测试。
4.  通过 puppet 进行基础设施更改并添加黄瓜测试。
5.  启动我们的服务器以测试故障。
6.  修复错误、发布和/或返回第 4 步。

基本上，当我们对我们的更改感到满意时，我们会将我们的 puppet 更改投入生产以实现它。

我不建议使用 vagrant 来管理虚拟机以进行实际生产。我会使用 razor、virsh、OpenStack 或其他许多 vm 管理系统之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-25T21:19:07.423

*   根据我的经验，Vagrant 主要用于开发环境。
*   例如，与 Terraform 相比，Vagrant 配置和配置选项是有限的。
*   如果您在基于云的环境中工作，则可以使用 Terraform 进行基础设施配置。
*   如果您的环境是本地的，或者您的虚拟机将托管在数据中心上，您可以使用 Ansible、chef 或 puppet 进行配置管理和自动化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T22:35:09.203

此页面表明 Vagrant push 命令用于部署到生产环境：

[https://www.hashicorp.com/blog/vagrant-push-one-command-to-deploy-any-application/](https://www.hashicorp.com/blog/vagrant-push-one-command-to-deploy-any-application/)

*“此外，多个 config.push.define 声明可以在 Vagrantfile 中定义多个推送，例如，一个用于暂存，一个用于生产。”*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T13:27:08.910

Hashicorp 刚刚发布了[Otto](https://ottoproject.io/)，这意味着要成为 Vagrant 的继任者。它旨在支持部署环境。

从他们的[Github 页面](https://github.com/hashicorp/otto)：

## 奥托的主要特点是：

*   **自动开发环境**：Otto 检测您的应用程序类型并构建专门为该应用程序量身定制的开发环境，配置为零或最少。如果您的应用程序依赖于其他服务（例如数据库），它会在您的开发环境中自动为您配置和启动这些服务。

*   **为微服务而构建**：Otto 了解依赖项和版本控制，可以为任何环境自动部署和配置应用程序及其所有依赖项。应用程序只需要告诉 Otto 它的直接依赖关系；依赖关系的依赖关系被自动检测和配置。

*   **部署**：Otto 知道如何部署应用程序以及开发它们。无论您的应用程序是现代微服务、遗留单体还是介于两者之间的东西，Otto 都可以将您的应用程序部署到任何环境中。

*   **Docker** : Otto 可以使用 Docker 下载并启动依赖项进行开发，以简化微服务。应用程序可以自动容器化以使部署更容易，而无需更改开发人员的工作流程。

*   **生产强化工具**：Otto 使用生产强化工具来构建开发环境 ( [Vagrant](https://vagrantup.com) )、启动服务器 ( [Terraform](https://terraform.io) )、配置服务 ( [Consul](https://consul.io) ) 等等。Otto 建立在为世界上最大的网站提供支持的工具之上。Otto 会自动安装和管理所有这些工具，因此您不必这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-25T16:15:01.603

我有同样的问题，并且一直在调查 Vagrant push 的使用，根据他们的[文档](https://www.vagrantup.com/docs/push/)，从 1.7 版开始，Vagrant 能够在与 Vagrantfile 相同的目录中部署或“推送”应用程序代码到远程，例如 FTP服务器。

我正在考虑让开发人员在虚拟机中启动 vagrant，同时还让您可以选择将代码部署到生产环境的实时服务器。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2016-06-29T09:13:39.037

正如@andrerpena 所提到的，Otto 是 Vagrant 的继任者。

来自[www.ottoproject.io](https://www.ottoproject.io/intro/vagrant-successor.html)：

> Otto 可以部署您的应用程序。多年来，Vagrant 的用户一直想要一种将他们的 Vagrant 环境部署到生产环境的方法。**不幸的是，Vagrantfile 没有包含足够的信息来构建**具有行业最佳实践的适当生产环境。制作了一个 Appfile 来对这些知识进行编码，并且只需一个命令即可进行部署。

# css - Chrome 开发工具 (CSS) 编辑和保存

> ID：13390484
> 
> 赞同：4
> 
> 时间：2012-11-15T01:57:27.427
> 
> 标签：css, google-chrome

我需要更改某个小部件类别中某些单词的颜色，我已经看过有关开发工具的 youtube 视频。

当我找到要更改的部分时，我在 element.style {color:red; 右上角的“元素”（开发工具）中进行更改 但是当我去资源时跟随视频，我所做的更改不存在。

1.  我只能在 Elements 中编辑，无法保存
2.  我只能保存在资源中，我不能编辑/添加任何东西

有人可以帮我这个开发工具应该如何工作吗？

但是，我可以在 Sources 中编辑/添加和保存，也许我需要将样式表从 Resources 保存到 Sources？这是我应该做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:52:34.820

正如您所说，Chrome 开发工具没有内置功能来保存您编辑的代码，无论如何有几个 Chrome 扩展。我认为最好的是**Tincr**。

你可以在这里找到它[Tincr](http://tin.cr/)

然后你也可以在这里找到教程：http: [//addyosmani.com/blog/lets-tincr-bi-directional-editing-and-saving-with-the-chrome-devtools/](http://addyosmani.com/blog/lets-tincr-bi-directional-editing-and-saving-with-the-chrome-devtools/)。

基本上你

1.  安装扩展，

2.  然后您选择应用程序类型：Ruby on Rails、Chrome 扩展、Atlassian 插件和配置文件，

3.  然后您可以添加项目的根目录。

    完成后，如果您使用 Google Chrome 开发工具编辑某些内容，更改将自动保存到源文件中，并且还有实时重新加载功能，因此您无需按刷新按钮或 F5 重新加载更改后的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:33:52.890

您无法通过开发人员工具编辑服务器上的文件，并且刷新后更改不会保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:03:56.557

截至 2013 年 3 月的更新答案，您现在可以从开发工具中保存更改（JS 和 CSS，而不是 DOM）。

[http://remysharp.com/2012/12/21/my-workflow-never-have-to-leave-devtools/](http://remysharp.com/2012/12/21/my-workflow-never-having-to-leave-devtools/)

# rally - Rally SDK 2.0 有没有办法获取看板状态更改日期

> ID：13390485
> 
> 赞同：3
> 
> 时间：2012-11-15T01:57:30.490
> 
> 标签：rally, kanban

尝试检索用户故事的看板状态更改日期。因此，对于每个看板状态发生的那一天。是否存在包含该信息的对象或属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:09:59.583

目前，获取此信息的唯一方法是查询和解析 Story 上的 RevisionHistory 集合——这可能有点麻烦和缓慢。

如果您的组织在 LookbackAPI 预览计划中，我建议使用基于 LBAPI 的查询，该查询可以通过单个 REST 查询捕获状态更改。

# android - “找不到与给定名称匹配的资源（在具有值的‘图标’处”

> ID：13390486
> 
> 赞同：2
> 
> 时间：2012-11-15T01:57:41.690
> 
> 标签：android, android-layout

有一个很奇怪的问题

下面是我的菜单activity_action_bar_main.xml，它抱怨

```
android:icon="@android:drawable/ic_action_view_as_list" 
```

排

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" 
    >

    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="ifRoom|withText"
        android:title="Action Bar1"
        android:icon="@android:drawable/ic_action_view_as_list"/> 

</menu> 
```

它抱怨我的图标

```
[2012-11-15 02:38:53 - TabsimpleActionBar] W/ResourceType( 3908): Bad XML block: header size 789 or total size 0 is larger than data size 0
[2012-11-15 02:38:53 - TabsimpleActionBar] C:\Users\djzingo\workspace1\TabsimpleActionBar\res\menu\activity_action_bar_main.xml:4: error: Error: No resource found that matches the given name (at 'icon' with value '@android:drawable/ic_action_view_as_list'). 
```

但是我在我的代码的其他地方使用它并且它应该显示出来，所以我现在它已经到位。

```
package com.ahmad.actionBar;

import android.annotation.SuppressLint;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.ActionBar.TabListener;
import android.app.Activity;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.view.Menu;
import android.widget.RelativeLayout;

@SuppressLint("NewApi")
public class ActionBarMain extends Activity implements TabListener {
    RelativeLayout rl;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_action_bar_main);
        try {
            rl = (RelativeLayout) findViewById(R.id.mainLayout);
            fragMentTra = getFragmentManager().beginTransaction();
            ActionBar bar = getActionBar();
            bar.addTab(bar.newTab()
                    .setText("Collection")
                    .setIcon(R.drawable.ic_action_view_as_list)//It works here
                    .setTabListener(this));;;

            bar.addTab(bar.newTab()
                        .setText("Summary")
                        .setIcon(R.drawable.ic_action_info)
                        .setTabListener(this));;;

            bar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM
                    | ActionBar.DISPLAY_USE_LOGO);
            bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            bar.setDisplayShowHomeEnabled(true);
            bar.setDisplayShowTitleEnabled(false);
            bar.show();

        } catch (Exception e) {
            e.getMessage();
        }

    }

    FragMent1 fram1;
    FragmentTransaction fragMentTra = null;
    FragMent2 fram2;
    FragMent3 fram3;

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        if (tab.getText().equals("Collection")) {
            try {
                rl.removeAllViews();
            } catch (Exception e) {
            }
            fram1 = new FragMent1();
            fragMentTra.addToBackStack(null);
            fragMentTra = getFragmentManager().beginTransaction();
            fragMentTra.add(rl.getId(), fram1);
            fragMentTra.commit();
        } else if (tab.getText().equals("Summary")) {
            try {
                rl.removeAllViews();
            } catch (Exception e) {
            }
            fram2 = new FragMent2();
            fragMentTra.addToBackStack(null);
            fragMentTra = getFragmentManager().beginTransaction();
            fragMentTra.add(rl.getId(), fram2);
            fragMentTra.commit();
        } else if (tab.getText().equals("Details")) {
            try {
                rl.removeAllViews();
            } catch (Exception e) {
            }
            fram3 = new FragMent3();
            fragMentTra.addToBackStack(null);
            fragMentTra = getFragmentManager().beginTransaction();
            fragMentTra.add(rl.getId(), fram3);
            fragMentTra.commit();
        }

    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_action_bar_main, menu);
        return true;
    }

} 
```

您有什么建议为什么当我删除 android:icon="@android:drawable/ic_action_view_as_list" 行但在我将图标添加到 xml 文件时得到 BadXML 块时它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:22:48.410

我认为这个drawable不是android drawable的一部分，所以试试

```
android:icon="@drawable/ic_action_view_as_list" 
```

反而。

# android - 为什么 AChartEngine PieChart 不显示在对话框中？

> ID：13390487
> 
> 赞同：1
> 
> 时间：2012-11-15T01:57:42.870
> 
> 标签：android, xml, android-layout, dialog, achartengine

我是 android 开发的菜鸟，我正在尝试在对话框中显示饼图。但是，我无法显示饼图。我使用 XYChartBuilder.java 作为我的指南，正如这个 SO question [here所建议的那样](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a). 我使用 achart 演示 xychart.xml 来测试我的布局设计，它与演示完美配合。但是当我尝试对我的应用程序使用相同的 xml 配置时，我得到一个 nullpointerexception 说 android.graphics.Canvas.throwIfRecycled。我所做的唯一更改是在通过 layoutinflater 打开对话框时实例化 ChartView，而不是在演示中的 onResume 期间。当我将图表线性布局从定义的 200dp 高度更改为“wrap_content”时，不会引发异常。我在清单中包含了活动 android:name="org.achartengine.GraphicalActivity" /> 所以这不是问题。问题必须与对话框有关。任何帮助是极大的赞赏。

我的 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <com.activity.GSCC.SegmentedRadioGroup
        android:id="@+id/segment_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:checkedButton="@+id/button_one"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@id/button_one"
            android:layout_weight="0.25"
            android:button="@null"
            android:gravity="center"
            android:minHeight="33dip"
            android:minWidth="40dip"
            android:text="Ledger"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/radio_colors" />

        <RadioButton
            android:id="@+id/button_two"
            android:layout_weight="0.25"
            android:button="@null"
            android:gravity="center"
            android:minHeight="33dip"
            android:minWidth="40dip"
            android:text="Chart"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/radio_colors" />
    </com.activity.GSCC.SegmentedRadioGroup>
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="105dp" >

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Coin"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Qty."
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Oz."
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Value"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/tvcurrentcoin"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:ellipsize="none"
                    android:maxWidth="100dp"
                    android:text="CurrentCoin"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>

                <TextView
                    android:id="@+id/tvcurrentqty"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="CurrentQuantity"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/tvcurrentoz"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="CurrentOunces"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>

                <TextView
                    android:id="@+id/tvcurrentvalue"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="CurrentValue"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/nothing2"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:ellipsize="none"
                    android:maxWidth="100dp"
                    android:text=""
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>

                <TextView
                    android:id="@+id/nothing"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text=""
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/tvTotalValue"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="TOTAL:"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>

                <TextView
                    android:id="@+id/tvportfoliovalue"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="CurrentValue"
                    android:textColor="#FFFFFF"
                    android:textSize="12dp" >
                </TextView>
            </TableRow>
        </TableLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/add_values" />

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TableRow>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="5dip"
                    android:text="@string/x" />

                <EditText
                    android:id="@+id/xValue"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:enabled="false" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="5dip"
                    android:text="@string/y" />

                <EditText
                    android:id="@+id/yValue"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:enabled="false" />

                <Button
                    android:id="@+id/add"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:enabled="false"
                    android:text="@string/add" />
            </TableRow>
        </TableLayout>

        <LinearLayout
            android:id="@+id/chart"
            android:layout_width="fill_parent"
            android:layout_height="200dp" //Doesn't throw exception when set to "wrap content"
            android:layout_weight="1"
            android:orientation="horizontal" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/new_series"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/new_series" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinneradd"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.77" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Spinner
                    android:id="@+id/spinnermodify"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.70" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinnerdelete"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.77" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinnerchange"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1.40" />
        </LinearLayout>

        <Button
            android:id="@+id/bSQLdeleteall"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Delete All Entries" />
    </LinearLayout>
</ScrollView> 
```

我的代码

```
LayoutInflater layoutInflater = getLayoutInflater();
View view=layoutInflater.inflate(R.layout.sqliteexample2,null);

//CHART ADDITIONS
            if (mChartView == null) {
                  piechartlayout = (LinearLayout) view.findViewById(R.id.chart);
                  mChartView = ChartFactory.getLineChartView(Activity.this, mDataset, mRenderer);
                  mRenderer.setClickEnabled(true);
                  mRenderer.setSelectableBuffer(100);                     
                  mChartView.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                      SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
                      double[] xy = mChartView.toRealPoint(0);
                      if (seriesSelection == null) {
                        Toast.makeText(Activity.this, "No chart element was clicked", Toast.LENGTH_SHORT)
                            .show();
                      } else {
                        Toast.makeText(Activity.this,
                            "Chart element in series index " + seriesSelection.getSeriesIndex()
                                + " data point index " + seriesSelection.getPointIndex() + " was clicked"
                                + " closest point value X=" + seriesSelection.getXValue() + ", Y=" + seriesSelection.getValue()
                                + " clicked point value X=" + (float) xy[0] + ", Y=" + (float) xy[1], Toast.LENGTH_SHORT).show();
                      }
                    }
                  });
                  mChartView.setOnLongClickListener(new View.OnLongClickListener() {
                    @Override
                    public boolean onLongClick(View v) {
                      SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
                      if (seriesSelection == null) {
                        Toast.makeText(Activity.this, "No chart element was long pressed",
                            Toast.LENGTH_SHORT);
                        return false; // no chart element was long pressed, so let something
                        // else handle the event
                      } else {
                        Toast.makeText(Activity.this, "Chart element in series index "
                            + seriesSelection.getSeriesIndex() + " data point index "
                            + seriesSelection.getPointIndex() + " was long pressed", Toast.LENGTH_SHORT);
                        return true; // the element was long pressed - the event has been
                        // handled
                      }
                    }
                  });
                  mChartView.addZoomListener(new ZoomListener() {
                    public void zoomApplied(ZoomEvent e) {
                      String type = "out";
                      if (e.isZoomIn()) {
                        type = "in";
                      }
                      System.out.println("Zoom " + type + " rate " + e.getZoomRate());
                    }

                    public void zoomReset() {
                      System.out.println("Reset");
                    }
                  }, true, true);
                  mChartView.addPanListener(new PanListener() {
                    public void panApplied() {
                      System.out.println("New X range=[" + mRenderer.getXAxisMin() + ", " + mRenderer.getXAxisMax()
                          + "], Y range=[" + mRenderer.getYAxisMax() + ", " + mRenderer.getYAxisMax() + "]");
                    }
                  });
                  piechartlayout.addView(mChartView, new LayoutParams(LayoutParams.WRAP_CONTENT,
                      LayoutParams.WRAP_CONTENT));
                  boolean enabled = mDataset.getSeriesCount() > 0;
                  setSeriesEnabled(enabled);
                } else {
                  mChartView.repaint();
                }

            //////CHART ADDITIONS
                    mX = (EditText) view.findViewById(R.id.xValue);
                    mX.setEnabled(true);
                    mY = (EditText) view.findViewById(R.id.yValue);
                    mY.setEnabled(true);
                    mRenderer.setApplyBackgroundColor(true);
                    mRenderer.setBackgroundColor(Color.argb(100, 50, 50, 50));
                    mRenderer.setAxisTitleTextSize(16);
                    mRenderer.setChartTitleTextSize(20);
                    mRenderer.setLabelsTextSize(15);
                    mRenderer.setLegendTextSize(15);
                    mRenderer.setMargins(new int[] { 20, 30, 15, 0 });
                    mRenderer.setZoomButtonsVisible(true);
                    mRenderer.setPointSize(10);
                    mRenderer.setInScroll(true);

                    mAdd = (Button) view.findViewById(R.id.add);
                    mAdd.setEnabled(true);
                    mNewSeries = (Button) view.findViewById(R.id.new_series);
                    mNewSeries.setOnClickListener(new View.OnClickListener() {
                      public void onClick(View v) {
                        String seriesTitle = "Series " + (mDataset.getSeriesCount() + 1);
                        XYSeries series = new XYSeries(seriesTitle);
                        mDataset.addSeries(series);
                        mCurrentSeries = series;
                        XYSeriesRenderer renderer = new XYSeriesRenderer();
                        mRenderer.addSeriesRenderer(renderer);
                        renderer.setPointStyle(PointStyle.CIRCLE);
                        renderer.setFillPoints(true);
                        mCurrentRenderer = renderer;
                        setSeriesEnabled(true);
                      }
                    });

                    mAdd.setOnClickListener(new View.OnClickListener() {
                      public void onClick(View v) {
                        double x = 0;
                        double y = 0;
                        try {
                          x = Double.parseDouble(mX.getText().toString());
                        } catch (NumberFormatException e) {
                          // TODO
                          mX.requestFocus();
                          return;
                        }
                        try {
                          y = Double.parseDouble(mY.getText().toString());
                        } catch (NumberFormatException e) {
                          // TODO
                          mY.requestFocus();
                          return;
                        }
                        mCurrentSeries.add(12, 0);
                        mX.setText("");
                        mY.setText("");
                        mX.requestFocus();
                        if (mChartView != null) {
                          mChartView.repaint();
                        }
                        Bitmap bitmap = mChartView.toBitmap();
                        try {
                          File file = new File(Environment.getExternalStorageDirectory(), "test" + index++ + ".png");
                          FileOutputStream output = new FileOutputStream(file);
                          bitmap.compress(CompressFormat.PNG, 100, output);
                        } catch (Exception e) {
                          e.printStackTrace();
                        }
                      }
                    });
                    //END CHART ADDITIONS 
```

全栈跟踪（当我为包含图表的布局提供定义的 100dp 高度时）

```
11-14 20:28:13.430: E/AndroidRuntime(26620): java.lang.NullPointerException
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.graphics.Canvas.throwIfRecycled(Canvas.java:954)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.graphics.Canvas.drawBitmap(Canvas.java:980)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at org.achartengine.GraphicalView.onDraw(GraphicalView.java:174)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.View.draw(View.java:6880)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.View.draw(View.java:6986)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.widget.ScrollView.draw(ScrollView.java:1409)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.View.draw(View.java:6883)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.View.draw(View.java:6883)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2116)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewRoot.draw(ViewRoot.java:1565)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1301)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1914)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.os.Looper.loop(Looper.java:130)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at android.app.ActivityThread.main(ActivityThread.java:3859)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at java.lang.reflect.Method.invoke(Method.java:507)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-14 20:28:13.430: E/AndroidRuntime(26620):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:40:31.620

我之前遇到过类似的问题。尝试在对话框中使用缩放功能是不可能的。尝试注释掉 setzoomvisible，它应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:22:07.820

我建议您首先下载整个 AChartEngine 演示程序并按原样运行。然后，您可以开始逐步修改它，直到获得您需要的版本。

# sql-server - 一列的值不能大于另一列

> ID：13390490
> 
> 赞同：9
> 
> 时间：2012-11-15T01:57:58.570
> 
> 标签：sql-server, database-design, constraints, check-constraints

我正在尝试创建一个表，其中一列中的值不能大于下一列。例如，我正在创建下表。

```
CREATE TABLE Price (
    PriceID INT PRIMARY KEY IDENTITY (1,1),
    OriginalPrice FLOAT NOT NULL,
    CurrentPrice FLOAT NOT NULL,
    Discount FLOAT,
    ShippingCost FLOAT NOT NULL,
    Tax FLOAT NOT NULL); 
```

Current Price 不能大于 OriginalPrice。

所以我尝试做的是

```
CurrentPrice FLOAT CHECK (CurrentPrice <= OriginalPrice) NOT NULL, 
```

但这给了我以下错误：

```
Msg 8141, Level 16, State 0, Line 1
Column CHECK constraint for column 'CurrentPrice' references another column, table 'Price'.
Msg 1750, Level 16, State 0, Line 1
Could not create constraint. See previous errors. 
```

我不允许引用同一个表中的列吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T02:09:17.023

只需将其更改为表级约束而不是列约束。

```
CREATE TABLE Price (
    PriceID INT PRIMARY KEY IDENTITY (1,1),
    OriginalPrice FLOAT NOT NULL,
    CurrentPrice FLOAT NOT NULL,
    Discount FLOAT,
    ShippingCost FLOAT NOT NULL,
    Tax FLOAT NOT NULL,
    CHECK (CurrentPrice <= OriginalPrice)); 
```

您也可以在之后添加它，例如

```
ALTER TABLE Price ADD CHECK (CurrentPrice <= OriginalPrice);
--or
ALTER TABLE Price ADD CONSTRAINT CK_Price_Current_vs_Original
    CHECK (CurrentPrice <= OriginalPrice); 
```

# java - 如何在服务器上自主运行程序，如何在服务器上无限期地运行java程序？

> ID：13390494
> 
> 赞同：4
> 
> 时间：2012-11-15T01:58:26.930
> 
> 标签：java, jar

我有一个 jar 可执行文件，我试图运行它直到在 linux 服务器上停止。我试过查看 Java Service Wrapper API，但这真的很困难，我什至不确定这就是我想要的。有没有办法可以在服务器上运行程序，以便在我注销时程序继续运行？我正在使用 ssh 登录到服务器和命令行来运行 jar。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T02:02:42.380

跑：

```
 nohup java -jar myjar.jar & 
```

最后的＆符号将在新的分叉进程中运行它，因此它会在您注销后继续运行。 `nohup`防止它在其所有者注销时挂断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T02:05:00.567

如果您能够将服务器设置为守护程序，则可以这样做。如果没有，您可以尝试使用类似屏幕的程序来创建虚拟终端。

```
sudo apt-get install screen
screen java -jar myJar.jar 
```

如果你想重新连接你的终端：

```
screen -r 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T02:10:04.757

如果您想将其作为服务运行，请查看[daemontools](http://cr.yp.to/daemontools.html)。

它会在机器启动时启动您的程序，如果它崩溃则重新启动它，当机器关闭时停止它。

在 Ubuntu 上只是一个 apt-get away。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T02:06:34.477

为什么是的！（请记住，这可能只适用于服务器而不是您的个人计算机）使用 linux 'screen' 命令创建一个虚拟终端，该终端将在您注销后继续，说明在[这里](http://go2linux.garron.me/linux/2010/04/linux-screen-command-tutorial-740)。

基本上，使用：

```
$ screen 
```

启动一个新的虚拟终端窗口。启动你的代码，一旦你开始运行它，输入“control+a”，然后输入“d”从窗口中分离。分离后，您可以注销，您的程序仍将在服务器上运行。要回到它，请键入：

```
$ screen -r 
```

你会回到你的程序。十分简单！[指示](http://go2linux.garron.me/linux/2010/04/linux-screen-command-tutorial-740)

# python - 如何使用 numpy 在数组中添加任意两个元素并生成矩阵？

> ID：13390497
> 
> 赞同：5
> 
> 时间：2012-11-15T01:58:38.613
> 
> 标签：python, numpy, scipy

本机python代码是这样的：

```
>>> a=[1,2,3,4,5,6]
>>> [[i+j for i in a] for j in a]
[[2, 3, 4, 5, 6, 7], 
 [3, 4, 5, 6, 7, 8], 
 [4, 5, 6, 7, 8, 9], 
 [5, 6, 7, 8, 9, 10], 
 [6, 7, 8, 9, 10, 11], 
 [7, 8, 9, 10, 11, 12]] 
```

但是，我必须使用 numpy 来完成这项工作，因为数组非常大。有没有人知道如何在**numpy**中做同样的工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T01:59:28.137

许多 NumPy 二元运算符都有一种`outer`方法，可用于形成等价的乘法（或在本例中为加法）表：

```
In [260]: import numpy as np
In [255]: a = np.arange(1,7)

In [256]: a
Out[256]: array([1, 2, 3, 4, 5, 6])

In [259]: np.add.outer(a,a)
Out[259]: 
array([[ 2,  3,  4,  5,  6,  7],
       [ 3,  4,  5,  6,  7,  8],
       [ 4,  5,  6,  7,  8,  9],
       [ 5,  6,  7,  8,  9, 10],
       [ 6,  7,  8,  9, 10, 11],
       [ 7,  8,  9, 10, 11, 12]]) 
```

# python - 如果我有一个素数/指数列表，如何生成一个数字的所有乘法分区？

> ID：13390499
> 
> 赞同：7
> 
> 时间：2012-11-15T01:58:46.767
> 
> 标签：python, algorithm, number-theory

例如，数字 24 的素数分解为 2^3*3^1，可以写成以下方式

```
1*24
2*12
2*2*6
2*3*4
2*2*2*3
3*8
4*6 
```

我可能错过了一个，但你明白了。

我尝试查看另一个线程[如何找到任何整数的乘法分区？](https://stackoverflow.com/questions/8558292/how-to-find-multiplicative-partitions-of-any-integer)但老实说，无法理解答案。

我不需要任何人为我编写代码，而是我可以真正使用一些帮助来为此创建一个有效的算法（可能是递归的？）。

我正在用 Python 编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:24:53.663

您的问题可以浓缩为查找[set 的所有分区](http://en.wikipedia.org/wiki/Partition_of_a_set)，因为每个因素（素数和复合）都可以表示为构成您的分区的子集元素的乘积。

我会将您的号码的因素表示为一个列表`[2, 2, 2, 3]`（嗯，一组）。以下是此列表的一些可能分区：

*   `[2] + [2, 2, 3]`
*   `[2, 2] + [2, 3]`
*   `[2] + [2] + [2, 3]`
*   `[3] + [2] + [2, 2]`
*   ...

如果将每个子集的每个元素相乘，您将得到原始数字的一个因子：

*   `2 * 12`
*   `4 * 6`
*   `2 * 2 * 6`
*   `3 * 2 * 4`

您可能需要为`1 * n`.

这是一个相关的问题：[如何最大限度地划分集合？](https://stackoverflow.com/questions/1618685/how-can-i-maximally-partition-a-set)

还有另一个相关链接：[Generating the Partitions of a Set](http://compprog.wordpress.com/2007/10/15/generating-the-partitions-of-a-set/)

# php - CSS 文件在 php 模板中的位置

> ID：13390504
> 
> 赞同：2
> 
> 时间：2012-11-15T01:59:11.437
> 
> 标签：php, wordpress

我正在为朋友的业务做一些编辑工作，而 wordpress 模板是以非常古老的方式编写的。我已经弄清楚了大部分代码是如何工作的，但是让我感到困惑的一件事是文件引用了 css 信息的地方，它没有以任何通常的方式导入它，也没有使用主要的 wordpress主题 css 文件。我也无法在萤火虫中找到资源。谁能帮我理解这段代码是如何工作的？我特别想访问 singleStyle div 的 css 信息

网址： [http ://wp.rafelshearling.com/?page_id=319](http://wp.rafelshearling.com/?page_id=319)

代码：

```
<?php
/**
 * The template used for displaying page content in page.php
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
<?php the_ID(); ?> 
post_class();

 */
?>
    <h1 class="entry-title"><?php the_title(); ?></h1>

    <div class="entry-content">
        <?php if(is_page( array( 319, 321 ) ) ) { ?>

            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

            <?php if(is_page( 319 ) ) { // Mens ?>

                <script>
                var pageNum = 1;
                var catIndex = 0;
                var pageMax, catSlugList = ["jackets"];
                var originalCat = catSlugList[catIndex];
                var originalCatID = 9;

                $(function() {
                    $.ajax({
                        url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                        success: function(data) {
                            pageMax = data.pages;
                            var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                            var $showLargerDiv = $("#viewLargerDiv");
                            for(var i in data.posts){
                                $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                            }
                            $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                            $("#stylesDiv .singleStyle").mouseenter( function(e){
                                $("#viewLargerDiv").empty().append($(this).clone());
                            });

                            $(".childrenUls a").removeClass("active");
                            $(".childrenUls a:eq("+catIndex+")").addClass("active");
                        }
                    });

                    $(".childrenUls a").click( function(e){
                        return false;
                    });

                    $("#collectionNav p a").click( function(e){
                        if(this.getAttribute("href") === "#Back"){
                            if(pageNum === 1){

                                return false;
                            } else {
                                pageNum--;

                                $.ajax({
                                    url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                    success: function(data) {
                                        $("#stylesDiv, #viewLargerDiv").empty();
                                        pageMax = data.pages;
                                        var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                        var $showLargerDiv = $("#viewLargerDiv");
                                        for(var i in data.posts){
                                            $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                        }
                                        $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                        $("#stylesDiv .singleStyle").mouseenter( function(e){
                                            $("#viewLargerDiv").empty().append($(this).clone());
                                        });

                                        $(".childrenUls a").removeClass("active");
                                        $(".childrenUls a:eq("+catIndex+")").addClass("active");
                                    }
                                });

                            }
                        } else if(this.getAttribute("href") === "#More"){
                            if(pageNum < pageMax){
                                pageNum++;
                                $.ajax({
                                    url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                    success: function(data) {
                                        $("#stylesDiv, #viewLargerDiv").empty();
                                        pageMax = data.pages;
                                        var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                        var $showLargerDiv = $("#viewLargerDiv");
                                        for(var i in data.posts){
                                            $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                        }
                                        $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                        $("#stylesDiv .singleStyle").mouseenter( function(e){
                                            $("#viewLargerDiv").empty().append($(this).clone());
                                        });

                                        $(".childrenUls a").removeClass("active");
                                        $(".childrenUls a:eq("+catIndex+")").addClass("active");
                                    }
                                });
                            } else {
                                return false
                            }
                        }
                        return false;
                    });
                });
                </script>

                <ul class="childrenUls cMe">
                    <?php wp_list_categories('child_of=5&orderby=id&order=DESC&title_li='); ?>
                </ul>

            <?php } else if(is_page( 321 ) ) { // Womens ?>

                <script>
                var pageNum = 1;
                var catIndex = 0;
                var pageMax, catSlugList = ["jackets-vests-assessories","hip-34-length","full-length"];
                var originalCat = catSlugList[catIndex];
                var originalCatID = 8;
                $(function() {
                    $.ajax({
                        url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                        success: function(data) {
                            pageMax = data.pages;
                            var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                            var $showLargerDiv = $("#viewLargerDiv");
                            for(var i in data.posts){
                                $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                            }
                            $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                            $("#stylesDiv .singleStyle").mouseenter( function(e){
                                $("#viewLargerDiv").empty().append($(this).clone());
                            });

                            $(".childrenUls a").removeClass("active");
                            $(".childrenUls a:eq("+catIndex+")").addClass("active");

                        }
                    });

                    $(".childrenUls a").click( function(e){
                        catIndex = $(".childrenUls a").index(this);
                        pageNum = 1;
                        $.ajax({
                            url: '/?json=get_category_posts&slug='+catSlugList[catIndex]+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                            success: function(data) {
                                $("#stylesDiv, #viewLargerDiv").empty();
                                pageMax = data.pages;
                                var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                var $showLargerDiv = $("#viewLargerDiv");
                                for(var i in data.posts){
                                    $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                }
                                $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                $("#stylesDiv .singleStyle").mouseenter( function(e){
                                    $("#viewLargerDiv").empty().append($(this).clone());
                                });

                                $(".childrenUls a").removeClass("active");
                                $(".childrenUls a:eq("+catIndex+")").addClass("active");

                            }
                        });

                        return false;
                    });

                    $("#collectionNav p a").click( function(e){
                        if(this.getAttribute("href") === "#Back"){
                            if(pageNum===1){
                                if(catIndex === 0){
                                    return
                                } else {
                                    pageNum = 1;
                                    catIndex--;
                                    originalCat = catSlugList[catIndex];

                                    $.ajax({
                                        url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                        success: function(data) {
                                            $("#stylesDiv, #viewLargerDiv").empty();
                                            pageMax = data.pages;
                                            var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                            var $showLargerDiv = $("#viewLargerDiv");
                                            for(var i in data.posts){
                                                $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                            }
                                            $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                            $("#stylesDiv .singleStyle").mouseenter( function(e){
                                                $("#viewLargerDiv").empty().append($(this).clone());
                                            });

                                            $(".childrenUls a").removeClass("active");
                                            $(".childrenUls a:eq("+catIndex+")").addClass("active");

                                        }
                                    });

                                }
                            } else {
                                pageNum--;

                                $.ajax({
                                    url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                    success: function(data) {
                                        $("#stylesDiv, #viewLargerDiv").empty();
                                        pageMax = data.pages;
                                        var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                        var $showLargerDiv = $("#viewLargerDiv");
                                        for(var i in data.posts){
                                            $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                        }
                                        $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                        $("#stylesDiv .singleStyle").mouseenter( function(e){
                                            $("#viewLargerDiv").empty().append($(this).clone());
                                        });

                                        $(".childrenUls a").removeClass("active");
                                        $(".childrenUls a:eq("+catIndex+")").addClass("active");
                                    }
                                });

                            }
                        } else if(this.getAttribute("href") === "#More"){
                            if(pageNum===pageMax){
                                if(catSlugList.length-1 === catIndex){
                                    return
                                } else {
                                    pageNum = 1;
                                    catIndex++;
                                    originalCat = catSlugList[catIndex];

                                    $.ajax({
                                        url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                        success: function(data) {
                                            $("#stylesDiv, #viewLargerDiv").empty();
                                            pageMax = data.pages;
                                            var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                            var $showLargerDiv = $("#viewLargerDiv");
                                            for(var i in data.posts){
                                                $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                            }
                                            $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                            $("#stylesDiv .singleStyle").mouseenter( function(e){
                                                $("#viewLargerDiv").empty().append($(this).clone());
                                            });

                                            $(".childrenUls a").removeClass("active");
                                            $(".childrenUls a:eq("+catIndex+")").addClass("active");
                                        }
                                    });

                                }
                            } else if(pageNum < pageMax){
                                pageNum++;
                                $.ajax({
                                    url: '/?json=get_category_posts&slug='+originalCat+'&count=12&page='+pageNum+'&exclude=categories,type,url,title_plain,status,excerpt,comments,comment_count,comment_status,tags,attachments,modified,date,author',
                                    success: function(data) {
                                        $("#stylesDiv, #viewLargerDiv").empty();
                                        pageMax = data.pages;
                                        var $collectionDiv = $("#styleCollectionDiv").children("div:eq(1)");
                                        var $showLargerDiv = $("#viewLargerDiv");
                                        for(var i in data.posts){
                                            $collectionDiv.append("<div class='singleStyle'>"+data.posts[i].content+"<p>"+data.posts[i].title+"</p></div>");
                                        }
                                        $showLargerDiv.append($collectionDiv.children("div:eq(0)").clone());

                                        $("#stylesDiv .singleStyle").mouseenter( function(e){
                                            $("#viewLargerDiv").empty().append($(this).clone());
                                        });

                                        $(".childrenUls a").removeClass("active");
                                        $(".childrenUls a:eq("+catIndex+")").addClass("active");
                                    }
                                });
                            } else {
                                return false
                            }
                        }
                        return false;
                    });
                });
                </script>

                <ul class="childrenUls">
                    <?php wp_list_categories('child_of=4&orderby=id&order=DESC&title_li='); ?>
                </ul>
            <?php } ?>

            <br style="clear:both;" />

            <div id="largeViewDiv">
                <div><p>Place mouse over thumbnails to view larger.</p></div>
                <div id="viewLargerDiv"></div>
            </div>
            <div id="styleCollectionDiv">
                <div id="collectionNav"><p class="cMe"><a class="backButton" href="#Back">< Back</a><a class="moreButton" href="#More">More ></a></p></div>
                <div id="stylesDiv"></div>
            </div>
            <br style="clear:both;" />

        <?php } else { ?>
            <?php the_content(); ?>
            <?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) ); ?>
        <?php } ?>
    </div><!-- .entry-content -->

    <?php edit_post_link( __( 'Edit', 'twentyeleven' ), '<br><br><br><span class="edit-link">', '</span>' ); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:08:48.303

大多数 Wordpress 模板的 CSS 位于 wp-content>themes>theme_name 文件夹中，它几乎总是被称为 style.css

如果我没记错的话，CSS 也在主题主文件夹的 header.php 中被引用。

# c - C Array 的行为因位数不同而不同，为什么？

> ID：13390509
> 
> 赞同：0
> 
> 时间：2012-11-15T02:00:03.340
> 
> 标签：c, cs50

我有一个代码，它从输入中获取一个数字，然后将其放入数组中，然后打印所述数组。但是有一个很奇怪的副作用，当我输入 13 位数字时，我的最后一位数字是错误的。如果我输入 15 或 16 位数字，一切都很好。我无法理解发生了什么！这是代码：numberDigits 是 12、14 或 15，取决于 number 的位数。

```
int myNumber[numberDigits];
    for (int i = 0; i <= numberDigits; i++)
    {
        myNumber[numberDigits - i] = number % 10;
        number = number / 10;         
    } 
    printf("\n");

    for (int i = 0; i <= numberDigits; i++)

    {
        printf("%i",myNumber[i]);
    } 
```

编辑：我的号码被初始化为 long long int。这是验证位数的检查：

```
 if (number / 1000000000000 >= 1 && number / 1000000000000 < 10)
    {
        numberDigits = 12;
    } 
if (number / 100000000000000 >= 1 && number / 100000000000000 < 10)
    {
        numberDigits = 14;
    }
if (number / 1000000000000000 >= 1 && number / 1000000000000000 < 10)
    {
        numberDigits = 15;
    } 
```

编辑：上次更新，是的，我已经更新了我的代码，它可以按照您的建议正常工作，但我需要了解为什么我的代码不起作用。我认为也许 array[12] 实际上包含 12 个元素而不是 13，当我用它访问元素 array[12] 时，我从内存中得到了一些随机值，但是为什么 array[14] 或 array 不会发生这种情况[15] 分别有 15 位和 16 位数字。以及为什么当您在错误位置访问数组时程序不会崩溃。下面的原始问题带有不起作用的旧代码。

编辑：这是感兴趣的人的完整清单。

```
#include <stdio.h>
#include <cs50.h>

int verify (long long int number);

int main(void)

{
    printf("Please enter card number: \n");
    long long int number = GetLongLong();
    // AMEX uses 15 digits
    if (number > 100000000000000 && ((number / 10000000000000 == 34) || (number / 10000000000000 == 37)))
    {        

        printf("AMEX");

    }

    if (number > 1000000000000 && number < 10000000000000 && (number / 1000000000000 == 4))
    {
        printf("VISA");
    }

    if (number > 1000000000000000 && number < 9999999999999999 && (number / 1000000000000000 == 4))
    {
        printf("VISA");
    }

        if (number > 1000000000000000 && number < 9999999999999999 && (number / 100000000000000 == 51 || number / 100000000000000 == 52 || number / 100000000000000 == 53 || number / 100000000000000 == 54 || number / 100000000000000 == 55))
    {
        printf("MASTERCARD");
    }

    return verify(number); 
}

int verify (long long int number)
{
    int numberDigits;
    if (number / 1000000000000 >= 1 && number / 1000000000000 < 10)
        {
            numberDigits = 12;
        } 
    if (number / 100000000000000 >= 1 && number / 100000000000000 < 10)
        {
            numberDigits = 14;
        }
    if (number / 1000000000000000 >= 1 && number / 1000000000000000 < 10)
        {
            numberDigits = 15;
        }       

    int myNumber[numberDigits];
    for (int i = 0; i <= numberDigits; i++)
    {
        myNumber[numberDigits - i] = number % 10;
        number = number / 10;         
    } 
    printf("\n");

    for (int i = 0; i <= numberDigits; i++)

    {
        printf("%i",myNumber[i]);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:01:37.330

您的`for`循环应如下所示：

```
for (int i = 0; i < numberDigits; i++) 
```

由于索引是从零开始的，最后一个将是`numberDigits - 1`. 所以`<=`会走到尽头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:02:38.370

我认为应该是这样的：

```
for(int i = 0; i < numberDigits; ++i) printf("%d",myNumber[i]); 
```

代替：

```
for(int i = 0; i <= numberDigits; ++i) printf("%i",myNumber[i]); 
```

在第一个循环中：

```
myNumber[numberDigits - (i + 1)] = number % 10; 
```

此外，您可以使用类似这样的方法来了解位数：

```
int digits(long long num) {
  if(!num) return 1;
  return log10(num) + 1;
} 
```

# ruby-on-rails - Rails 嵌套形式，计算嵌套项中的值

> ID：13390512
> 
> 赞同：2
> 
> 时间：2012-11-15T02:00:50.587
> 
> 标签：ruby-on-rails, nested, before-save

我是 Rails 新手，正在开发我的第一个 Rails 项目，它是一个发票应用程序，在发票表单中包含嵌套行项目。我想在保存发票之前计算总发票。如果只是在保存过程中添加了项目，我可以很好地保存它，但是如果其中一个嵌套的行项目被标记为要删除，它就不能正确计算总数。我将不得不返回并再次保存以获得正确的总账单金额。

```
class Invoice < ActiveRecord::Base
  attr_accessible :job_name, :items_attributes, :tax1, :tax2, :subtotal

  before_save :calculate_totals

  has_many :items, :dependent => :destroy
  accepts_nested_attributes_for :items, allow_destroy: true

  private

  def calculate_totals
    self.subtotal = 0

    self.items.each do |i|
      self.subtotal = self.subtotal + (i.quantity * i.cost_per)
    end
  end
end 
```

我注意到这与 params 有何不同，但问题项目记录列在请求的参数中，其中 :_destroy = true

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"+OqRa7vRa1CKPMCdBrjhvU6jzMH1zQ=",
 "invoice"=>{"client_id"=>"1",
 "job_name"=>"dsdsadsad",
 "items_attributes"=>{"0"=>{"name"=>"jhksadhshdkjhkjdh",
 "quantity"=>"1",
 "cost_per"=>"50.0",
 "id"=>"21",
 "_destroy"=>"false"},
 "1"=>{"name"=>"delete this one",
 "quantity"=>"1",
 "cost_per"=>"10.0",
 "id"=>"24",
 "_destroy"=>"true"}}},
 "commit"=>"Update Invoice",
 "id"=>"8"} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:04:33.947

我找到了一个似乎可行的解决方案：

```
class Invoice < ActiveRecord::Base
  attr_accessible :job_name, :items_attributes, :tax1, :tax2, :subtotal

  before_save :calculate_totals

  has_many :items, :dependent => :destroy
  accepts_nested_attributes_for :items, allow_destroy: true

  private
    def calculate_totals
      self.subtotal = 0

      self.items.each do |i|
        unless i.marked_for_destruction?
          self.subtotal += (i.quantity * i.cost_per)
        end
      end

end 
```

关键是marked_for_destruction的方法吗？在这种情况下，我正在检查未标记为销毁的项目。这是解释它的rails api的链接：http: [//api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

谢谢史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:49:59.903

```
params[:invoice][:items_attributes].each do |i|
  self.subtotal = self.subtotal + (i[:quantity].to_f * i[:cost_per].to_f) unless i['_destroy'] == 'true'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:14:57.270

您在**was saved****之前`Invoice`**已经计算过项目，所以它也计算了销毁的项目，如 API 文档中的指南：

> 请注意，在保存父级之前，模型不会被销毁。

因此，您只需要更改`before_save`为`after_save`，它就会起作用。

# c# - list.where 的编译错误

> ID：13390513
> 
> 赞同：3
> 
> 时间：2012-11-15T02:01:00.980
> 
> 标签：c#, list, generics, where

我无法弄清楚为什么我不断收到此错误。请帮忙！！！

*“System.Collections.Generic.List”不包含“Where”的定义，并且找不到接受“System.Collections.Generic.List”类型的第一个参数的扩展方法“Where”（您是否缺少 using 指令还是汇编参考？）*

```
using System.Collections.Generic;
using System.Collections;
    public class HistTradePlot : Indicator
    {
        private class Traid
            {
                public DateTime Date { get; set; }
                public int Index { get; set; }
                public int Buy { get; set; }
                public int Price {get;set;}
            }
        List<Traid> traids = new List<Traid>();

            if (Bars.FirstBarOfSession)
                {Bars.Session.GetNextBeginEnd(BarsArray[0], 0, 
out sessionBegin, out sessionEnd);
                    var sessionTrades = traids.Where(t => t.Date > sessionBegin && t.Date <= sessionEnd);
                Print("Session Start: " + sessionBegin + " Session End: " + sessionEnd);
                for (int i=0;i<sessionTrades.Length();i++){
                Print(Convert.ToString(sessionTrades[i].Date));
                }
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:02:23.093

这通常发生在您没有包含 Linq 命名空间时，因此编译器无法找到 Linq 扩展方法，例如`Where`. 尝试添加：

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T02:02:27.390

你需要有

```
using System.Linq; 
```

在文件的顶部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T02:04:51.923

此外，LINQ 在 Frameworks 3.5 及更高版本中。如果您使用的是 3.5 之前的 .NET 版本，则不支持 LINQ。

# powershell - 如何使用批处理或 vbscript 将位置添加到 Windows 7/8 搜索索引？

> ID：13390514
> 
> 赞同：6
> 
> 时间：2012-11-15T02:01:18.790
> 
> 标签：powershell, vbscript, windows-search

我正在尝试以编程方式将位置（范围）添加到我的 Windows 8 搜索索引中，经过一番谷歌搜索后，我找到[了以下](http://www.codeproject.com/Articles/33483/Windows-Indexing-Service-Basics)代码：

```
Set objISAdm = CreateObject("Microsoft.ISAdm")
Set objCatalog = objISAdm. GetCatalogByName("MyCatatlog")
Set objScope= objCatalog.AddScope("C:\myfiles",False)
objScope.Alias = "MyCatalogScope" 
```

不幸的是，`800A01AD`错误提示提示`Microsoft.ISAdm`无法创建对象；经过进一步挖掘，上述代码似乎不适用于 Windows 8 上较新版本的 Windows Search。

有谁知道如何使用 VB 脚本或命令行来做到这一点，大概在 Windows 7 下工作的东西也可以在 Windows 8 上工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T13:14:59.670

加雷特，你真是个天才！这是我从您提供的链接中学到的代码：

```
#Code copied from "Powershell Tackles Windows Desktop Search" http://powertoe.wordpress.com/2010/05/17/powershell-tackles-windows-desktop-search/
#Microsoft.Search.Interop.dll is needed, download from http://www.microsoft.com/en-us/download/details.aspx?id=7388
#Load the dll
Add-Type -path "D:\Unattend\UserFiles\Tools\Microsoft.Search.Interop.dll"
#Create an instance of CSearchManagerClass
$sm = New-Object Microsoft.Search.Interop.CSearchManagerClass 
#Next we connect to the SystemIndex catalog
$catalog = $sm.GetCatalog("SystemIndex")
#Get the interface to the scope rule manager
$crawlman = $catalog.GetCrawlScopeManager()
#add scope
$crawlman.AddUserScopeRule("file:///D:\*",$true,$false,$null)
$crawlman.SaveAll() 
```

将代码另存为 AddScope.ps1，然后从提升的 cmd 控制台运行它：

```
PowerShell Set-ExecutionPolicy Unrestricted -force
PowerShell D:\Unattend\UserFiles\AddScope.ps1 
```

而已！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:05:07.923

在您提供的代码中，您正在尝试使用[Indexing service interface](http://msdn.microsoft.com/en-us/library/ms691558%28VS.85%29.aspx)。Windows 8 中不再提供索引服务。从文档中：

> 从 Windows XP 开始不再支持索引服务，并且从 Windows 8 开始无法使用。相反，使用 Windows Search 进行客户端搜索，使用 Microsoft Search Server Express 进行服务器端搜索。

正如文档所述，您将需要查看[Windows Search](http://msdn.microsoft.com/en-us/library/aa965362%28VS.85%29.aspx)。

更新：

我没有这样做，但要完成您正在寻找的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb266540%28v=vs.85%29.aspx)状态

> 在您可以使用任何 Crawl Scope Manager (CSM) 界面之前，您必须执行以下先决条件步骤：
> 
> 1.  创建 CrawlSearchManager 对象并获取其 ISearchManager 接口。
> 2.  为“SystemIndex”调用 ISearchManager::GetCatalog 以获取 ISearchCatalogManager 接口的实例。
> 3.  调用 ISearchCatalogManager::GetCrawlScopeManager 以获取 ISearchCrawlScopeManager 接口的实例。
> 
> 对 Crawl Scope Manager (CSM) 进行任何更改后，您必须调用 ISearchCrawlScopeManager::SaveAll。此方法不接受任何参数，并在成功时返回 S_OK。

这是一个[例子](http://blogs.microsoft.co.il/blogs/sasha/archive/2009/02/08/enable-windows-search-indexing-on-folders.aspx)和[另一个](https://code.google.com/p/olakedms/source/browse/SearchEngine/CSearchDAL.cs)例子。

不幸的是，我认为这不能通过 VBScript 完成，因为 Windows Search API 提供的 COM[接口](http://msdn.microsoft.com/en-us/library/windows/desktop/ff684392%28v=vs.85%29.aspx)不实现[IDispatch](http://msdn.microsoft.com/en-us/library/ms221608%28VS.85%29.aspx)接口，它允许像 VBScript 这样的脚本语言通过[后期绑定](http://technet.microsoft.com/en-us/library/ee198877.aspx)调用 COM 对象。

它必须来自 VBScript，还是可以在 .NET 中完成？如果它必须来自 VBScript，那么一种方法是在 .NET 中编写一个包装器并将其[公开](http://msdn.microsoft.com/en-us/library/zsfww439%28VS.100%29.aspx)为一个 COM 对象。

# jpa - 当属性仅在某些子类中时，JPA fetch join

> ID：13390515
> 
> 赞同：1
> 
> 时间：2012-11-15T02:01:35.720
> 
> 标签：jpa, eclipselink

有没有办法做这样的事情

```
select a from A a join fetch a.b 
```

什么时候`a.b`只存在于的某些子类`A`？

我在哪里

```
@Entity
class A {
}

@Entity
class SubA extends A {
  @OneToMany
  List<B> b;
} 
```

换句话说，`a.b`只有当`a instanceof SubA`它为真时，我才想获取并加入 @OneToMany 集合。

这可能吗？或者有没有更好的方法来避免集合的 n 加一选择问题？我真正想要的是阻止`B`对集合中的每个进行往返 - fetch join 似乎对此很有效。

我正在使用 EclipseLink，但尽可能喜欢 JPA 标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T01:52:26.237

“更好的方法”（无论如何使用 Eclipselink）看起来是使用批量获取，或者通过注释`@OneToMany`或`@BatchFetch`添加查询提示。

# objective-c - Objective C 中的时间间隔

> ID：13390532
> 
> 赞同：5
> 
> 时间：2012-11-15T02:03:16.577
> 
> 标签：objective-c, xcode

我对 Objective C 和 x-code 非常陌生。我上周才开始学习它。很抱歉，如果问题太简单了。

我正在做一个更像视觉小说的游戏，所以它非常简单且基于故事板的应用程序，但我有一个关于显示我的选择的问题。我希望在我的过场动画结束后出现选择。有什么办法可以添加诸如时间间隔中断之类的东西，以便它们仅在特定时间后出现。有人可以指导我如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:35:29.770

```
[self performSelector:@selector(displayChoice:) withObject:nil afterDelay:1.0]; 
```

您可以使用此方法...延迟后的秒数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:02:29.970

根据您显示过场动画的方式，显示这些 UI 元素的更安全的方法是在过场动画结束时以某种方式触发一个动作。我可以预见的 NSTimer 实现的问题是，无论出于何种原因，如果您的过场动画播放时间比您设置的 NSTimer 间隔时间长，那么您的 UI 元素就会过早显示。只是我的两分钱不同，但我认为这是一种更优雅的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T02:08:01.970

您可以使用[`NSTimer`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)：

```
[NSTimer scheduledTimerWithTimeInterval:2.0f 
                                 target:self
                               selector:@selector(displayChoiceTimerFired:)
                               userInfo:nil 
                                repeats:NO]; 
```

这将安排一个计时器，该计时器将`displayChoiceTimerFired:`在 2 秒后执行该方法。（该方法的参数是计时器本身。）

或者你也可以使用[`NSObject`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)'s`perform`方法：

```
[self performSelector:@selector(displayChoice:) withObject:nil afterDelay:2.0f]; 
```

# jquery - 同时在 2 个 div 中注册鼠标事件？

> ID：13390535
> 
> 赞同：2
> 
> 时间：2012-11-15T02:04:14.587
> 
> 标签：jquery, html, canvas, mouseevent

有没有办法在两个不同的 div 上注册鼠标事件（单击、悬停、滚动等）？

我目前正在使用一个应用程序，该应用程序同时使用传单地图（对于那些不知道它的人来说，类似于谷歌地图）和一个分层的画布元素（运行处理）。现在我可以通过什么都不做来让事件在画布元素中注册，或者我可以通过给画布提供 CSS 来让事件在地图中注册`pointer-events:none;`。

有什么直接的方法可以点击它们吗？

另一种方法是定义点击进入其中一个或另一个的区域。具体来说，我希望点击透明画布区域，而不透明画布区域在画布内记录对它们的点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:04:34.030

您可以设置一个类，然后调用`.click()`或其他任何内容，然后将您的操作设置为该类

```
$(".className").click(function(){ Your Action here }); 
```

并且动作是您想要的任何动作，它甚至可以影响两个 div，例如：

```
$(".className").html('Affected DIVS!'); 
```

然后只需在两个 DIVS 上设置您的班级名称...

`<div class="className">`

另外......你可以`trigger()`为`.click()`一个你无法达到的DIV，即：

```
$('.className').trigger('click'); 
```

总之，您可以使用该`trigger()`事件来调用相同的操作：在div 2`.click()`上的 div 1`trigger()` `.click()`上。在`.hover()`div 1 上，`trigger()` `.hover()`在 div 2 上。在滚动等..等..

# c - 从函数 c 返回二维数组的正确方法

> ID：13390541
> 
> 赞同：9
> 
> 时间：2012-11-15T02:05:30.573
> 
> 标签：c, arrays, function

我已经尝试过了，但它不起作用：

```
#include <stdio.h>

    int * retArr()
    {
    int a[3][3] = {{1,2,3},{4,5,6},{7,8,9}};
    return a;
    }

    int main()
    {
    int a[3][3] = retArr();
    return 0;
    } 
```

我收到这些错误：

> 错误 3 错误 C2075: 'a' : 数组初始化需要大括号
> 4 IntelliSense: 返回值类型与函数类型不匹配

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T02:11:38.593

结构是一种方法：

```
struct t_thing { int a[3][3]; }; 
```

然后只需按值返回结构。

完整示例：

```
struct t_thing {
    int a[3][3];
};

struct t_thing retArr() {
    struct t_thing thing = {
        {
            {1, 2, 3},
            {4, 5, 6},
            {7, 8, 9}
        }
    };

    return thing;
}

int main(int argc, const char* argv[]) {
    struct t_thing thing = retArr();
    ...
    return 0;
} 
```

* * *

您面临的典型问题是，`int a[3][3] = {{1,2,3},{4,5,6},{7,8,9}};`在您的示例中是指在函数返回后回收的内存。这意味着您的调用者读取 (Undefined Behaviour) 是不安全的。

其他方法包括将数组（调用者拥有的）作为参数传递给函数，或者创建一个新的分配（例如使用`malloc`）。该结构很好，因为它可以消除许多陷阱，但它并不适合所有场景。当结构的大小不是恒定的或非常大时，您将避免按值使用结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-17T18:46:04.257

**我们可以通过使用堆内存/使用 stdlib 分配内存来解决它：**

> 使用 stdlib 分配内存可以通过 malloc 和 calloc 完成。
> 
> **创建数组**：

*   ```
    int  ** arr=( int * * ) malloc ( sizeof ( int * ) * 5 ); 
    ```

    用于分配 5 行。
*   ```
    arr[i]=(int *)malloc(sizeof(int)*5); 
    ```

    用于在每个“i”行中分配 5 列。
*   因此我们创建了 arr [5] [5]。

> **返回数组：**

*   ```
    return arr; 
    ```

我们只需要像上面一样发送负责访问该数组的指针。

```
#include<stdio.h>
#include<stdlib.h>
int **return_arr()
{
    int **arr=(int **)malloc(sizeof(int *)*5);
    int i,j;
    for(i=0;i<5;i++)//checking purpose
    {
        arr[i]=(int *)malloc(sizeof(int)*5);
        for(j=0;j<5;j++)
        {
            arr[i][j]=i*10+j;
        }
    }
    return arr;
}
int main()
{
    int **now;
    now=return_arr();
    int i,j;
    for(i=0;i<5;i++)
    {
        for(j=0;j<5;j++)
        {
            printf("%d ",now[i][j]);
        }
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T02:32:45.687

几个问题：

首先，您不能从函数调用中初始化数组；语言定义根本不允许这样做。可以用字符串字面量初始化一个数组`char`，例如

```
char foo[] = "This is a test"; 
```

`wchar_t`一个, `char16_t`, 或的数组`char32_t`可以使用宽字符串字面量进行初始化，否则初始化程序必须是用大括号括起来的值列表。

其次，您的类型不匹配；除非它是`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of `T`”类型的表达式将转换为“pointer to `T`”类型的表达式，表达式的值将是第一个元素的地址；

在函数中`retArr`，表达式中的类型`a`为“3-element array of 3-element array of `int`”；根据上面的规则，这将被转换为“指向 3 元素数组的指针”类型的表达式`int`，或者`int (*)[3]`：

```
int (*retArr())[3]
{
  int a[3][3] = ...;
  return a;
} 
```

但正如 Brendan 指出的那样，一旦`retArr`退出`a`不再存在；返回的指针值最终无效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T02:20:07.247

```
#include <stdio.h>

int** retArr()
{
    static int a[3][3] = {{1,2,3},{4,5,6},{7,8,9}};
    return a;
}

int main()
{
    int** a = retArr();
    return 0;
} 
```

您还可以将返回的变量指定为静态。您还必须将 main 中的变量 a 声明为 int** （而不是指定尺寸）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-04-30T22:56:00.610

在OP给出的示例中，将数组放在堆栈上是最容易的。我没有测试这个，但它会是这样的。

#include stdio.h

```
void retArr(a[][3]) {
  a[0][0] = 1; a[0][1] = 2; a[0][2] = 3;
  a[1][0] = 4; a[1][1] = 5; a[1][2] = 6;
  a[2][0] = 7; a[2][1] = 8; a[2][2] = 9;
}

main() {
  int a[3][3];
  retArr(a);
} 
```

是的，这不会使用返回函数“返回”数组，但我认为这不是问题的意图。数组 a[][] 确实被加载了，加载的 a[][] 在调用 retArr() 后在 main 中可用，没有任何内容被覆盖。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-15T02:11:02.543

为了这：

```
int * retArr() {
    int a[3][3] = {{1,2,3},{4,5,6},{7,8,9}};
    return a;
} 
```

该数组具有本地范围，并在您退出函数后立即被销毁。这意味着`return a;`实际上返回一个悬空指针。

要解决此问题，请将数组放在全局范围内，或使用`malloc()`数组并将其复制到分配的空间中。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-11-15T02:06:51.133

需要退货`int**`，没有`int`。

# javascript - 允许在溢出的较小父 Div 内动态调整大小的子 Div：auto 大于其父 Div

> ID：13390543
> 
> 赞同：0
> 
> 时间：2012-11-15T02:05:59.980
> 
> 标签：javascript, html, css

我正在构建一个从 javascript 对象加载文件夹/文件树的文件系统。它工作得很好，但现在我正试图将整个东西限制在一个可以滚动的框内。问题是框​​（.explorer）将文件和文件夹的宽度限制为它自己的宽度。文件和文件夹文本不受限制，只有它们的背景颜色受限制。

这是CSS和HTML。我希望你能帮忙。

```
.explorer{
    width:100px;
    height:100px;
    margin:35px;
    float:left;
    overflow:auto;
}
.folder, .file{
    width:100%;
    padding:4px 6px;
    cursor: pointer;
    Background:#212121;
    color:#fff;
}
.file{
    Background:#eb9824;
}
.hide, .show{
    margin-left:20px;
} 
```

还有一段由javascript生成的粗略的HTML

```
<div class="explorer">

    <div class="folder">root</div>
    <div class="show" id="rootcontents">

        <div class="folder" id="root-folder1">folder1</div>
        <div class="show" id="root-folder1contents">

            <div class="folder" id="root-folder1-folder1">folder1</div>
            <div class="hide" id="root-folder1-folder1contents" style="display: block;">

                <div class="folder" id="root-folder1-folder1-folder1">folder1</div>
                <div class="hide" id="root-folder1-folder1-folder1contents" style="display: block;">

                    <div class="file" id="root-folder1-folder1-folder1-file1">file1</div>
                    <div class="file" id="root-folder1-folder1-folder1-file2">file2</div>

                </div>
            </div>

            <div class="folder" id="root-folder1-folder2">folder2</div>
            <div class="hide" id="root-folder1-folder2contents" style="display: none;">

                <div class="folder" id="root-folder1-folder2-folder1">folder1</div>
                <div class="hide" id="root-folder1-folder2-folder1contents" style="display: none;">

                    <div class="file" id="root-folder1-folder2-folder1-file1">file2</div>
                    <div class="file" id="root-folder1-folder2-folder1-file2">file2</div>

                </div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:36:59.117

我称之为错误。`.explorer`盒子有一个适合容器的背景，而不是内容，这是不寻常的和不受欢迎的。

`.explorer`在您的情况下，快速解决方法是在, 和 set内插入一个虚拟 div `style="float: left"`，这将提示浏览器从其子项重新计算框大小，而不是其父项的宽度。

[http://jsfiddle.net/G9v4w/2/](http://jsfiddle.net/G9v4w/2/)

# prolog - 真相维护系统的 Prolog 实现

> ID：13390544
> 
> 赞同：2
> 
> 时间：2012-11-15T02:06:07.360
> 
> 标签：prolog, tms

真相维护系统 (TMS) 存储在给定知识库中导致特定结论的推理的理由。

一个很好的例子看起来像这样（这*不是*序言）：

```
∀ X good_student(X) ∧ M study_hard(X) → study_hard (X)
∀ Y party_person(Y)  → ¬study_hard (Y)
good_student(pat) 
```

我根本无法弄清楚如何实现这一点。我不知道如何具体表示模态运算符M（符合）。显然，我可以创建谓词 good_student/1、study_hard/1 和 party_person/1。study_hard/1 到 good_student 和 ¬study_hard 的链接也是我迷路的地方。

这引出了我的问题：有人知道如何在 prolog 中实现类似的东西吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:45:04.367

你知道 Prolog 支持一阶逻辑的一个子集。你不能使用任意的逻辑句子，甚至不能使用从句，而是使用明确的从句。现在，在该程序中，您有两件事不受支持：子句头部的否定和模态运算符。如果 M 是我所理解的，则从您的评论中可以看出它是失败的否定。您可以在 Prolog 中免费将其作为默认否定（`\+`或`not`）。对于头脑中的否定，您有两种方法：

1.  您可以尝试使用逻辑转换推导出由确定子句组成的逻辑等价理论。我现在懒得尝试这个，但你可以试一试。
2.  嘿，你不是第一个想在头脑中使用否定的人。有不同的框架来处理这个问题。溯因逻辑编程系统可以处理完整性约束，并且可以为您提供否定以及免费使用其他模态运算符。更好的是，尝试答案集编程。许多 ASP 求解器可以处理您的程序。

祝你好运。

# android - 将图像从 android 上传到服务器 php 时出错？

> ID：13390545
> 
> 赞同：0
> 
> 时间：2012-11-15T02:06:22.937
> 
> 标签：android, image-uploading

我想将图像从 android 设备上传到服务器 php，但我的应用程序出错。你能帮我修一下吗？谢谢！源代码

```
public class MainActivity extends Activity implements OnClickListener {

private ImageView image;
private Button btnselect;
private Button btnupload;
private Bitmap bmp;
private HttpResponse response;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    image = (ImageView) findViewById(R.id.image);
    btnselect = (Button) findViewById(R.id.btnselect);
    btnupload = (Button) findViewById(R.id.btnupload);
    btnselect.setOnClickListener(this);
    btnupload.setOnClickListener(this);
    Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
            R.drawable.electricinvoicesign);
    image.setImageBitmap(bitmapOrg);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btnselect:
        Intent choosePictureIntent = new Intent(
                Intent.ACTION_PICK,
                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(choosePictureIntent, 0);
        break;
    case R.id.btnupload:
        new upload().execute();
        break;
    default:
        break;
    }

}
public void hienthi()
{
    Toast.makeText(this, "Upload thanh cong!", Toast.LENGTH_LONG).show();
}

private class upload extends AsyncTask<Void, Void, Void>
{

    private ProgressDialog progressDialog;
    private BufferedReader in;

    @Override
    protected void onPostExecute(final Void unused) {
        try
        {
        this.progressDialog.dismiss();
        System.out.print("Upload thanh cong!");
        hienthi();
        in = new BufferedReader(new InputStreamReader(response
                .getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String result = sb.toString();
        System.out.println(result);
        }catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    protected void onPreExecute() {
        this.progressDialog = ProgressDialog.show(
                MainActivity.this, "", " Loading...");
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        try {
            Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
                    R.drawable.electricinvoicesign);
            ByteArrayOutputStream bao = new ByteArrayOutputStream();
            bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
            byte[] ba = bao.toByteArray();
            String ba1 = Base64.encodeBytes(ba);
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("image", ba1));
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                        "http://longvansolution.tk/uploadimage.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            response=httpclient.execute(httppost);
            System.out.print("Upload thanh cong 2!");

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        return null;
    }

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Uri imageFileUri = data.getData();
        try {
            BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
            bmpFactoryOptions.inJustDecodeBounds = true;
            bmp = BitmapFactory
                    .decodeStream(
                            getContentResolver().openInputStream(
                                    imageFileUri), null, bmpFactoryOptions);
            bmpFactoryOptions.inJustDecodeBounds = false;
            bmp = BitmapFactory
                    .decodeStream(
                            getContentResolver().openInputStream(
                                    imageFileUri), null, bmpFactoryOptions);
            image.setImageBitmap(bmp);
        } catch (Exception e) {
            Log.v("ERROR", e.toString());
        }
    }
} 
```

}

这是错误：

> 11-15 13:59:04.642: W/System.err(17525): android.os.NetworkOnMainThreadException 11-15 13:59:04.642: W/System.err(17525): 在 android.os.StrictMode$AndroidBlockGuardPolicy。 onNetwork(StrictMode.java:1099) 11-15 13:59:04.642: W/System.err(17525): 在 libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163) 11-15 13:59:04.642: W/System.err(17525): 在 libcore.io.IoBridge.recvfrom(IoBridge.java:503) 11-15 13:59:04.642: W/System.err(17525): 在 java.net.PlainSocketImpl.read (PlainSocketImpl.java:488) 11-15 13:59:04.642: W/System.err(17525): 在 java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46) 11-15 13:59:04.642: W/System.err(17525): 在 java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240) 11-15 13:59:04.642: W/System.err(17525): 在 org.apache.http .impl.io.AbstractSessionInputBuffer。fillBuffer(AbstractSessionInputBuffer.java:103) 11-15 13:59:04.642: W/System.err(17525): 在 org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134) 11-15 13:59:04.642: W/System.err(17525): 在 org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:161) 11-15 13:59:04.642: W/System.err (17525): 在 org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:159) 11-15 13:59:04.642: W/System.err(17525): 在 java.io.InputStreamReader.read( InputStreamReader.java:244) 11-15 13:59:04.642: W/System.err(17525): 在 java.io.BufferedReader.fillBuf(BufferedReader.java:130) 11-15 13:59:04.642: W/ System.err(17525): at java.io.BufferedReader.readLine(BufferedReader.java:390) 11-15 13:59:04.642: W/System.err(17525): at com.example.uploadimage.MainActivity$upload .onPostExecute(MainActivity.java:99) 11-15 13:59:04.642: W/System.err(17525): 在 com.example.uploadimage.MainActivity$upload.onPostExecute(MainActivity.java:1) 11-15 13: 59:04.642: W/System.err(17525): 在 android.os.AsyncTask.finish(AsyncTask.java:602) 11-15 13:59:04.642: W/System.err(17525): 在 android.os .AsyncTask.access$600(AsyncTask.java:156) 11-15 13:59:04.642: W/System.err(17525): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615) 11-15 13:59:04.642: W/System.err(17525): 在 android.os.Handler.dispatchMessage(Handler.java:99) 11-15 13:59:04.642: W/System.err(17525): 在 android .os.Looper.loop(Looper.java:137) 11-15 13:59:04.642: W/System.err(17525): 在 android.app.ActivityThread.main(ActivityThread.java:4514) 11-15 13 ：59：04.642：W / System.err（17525）：在java.lang.reflect.Method。invokeNative（本机方法）11-15 13:59:04.650：W/System.err（17525）：在 java.lang.reflect.Method.invoke（Method.java:511）11-15 13:59:04.650：W /System.err(17525): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790) 11-15 13:59:04.650: W/System.err(17525): 在 com. android.internal.os.ZygoteInit.main(ZygoteInit.java:557) 11-15 13:59:04.650: W/System.err(17525): at dalvik.system.NativeStart.main(Native Method)主要（本机方法）主要（本机方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:27:10.043

我相信你输入了错误的`InputStream`类。好像你已经`InputStream`在你的应用程序的某处定义了一个类或其他东西，使用来自`java.io`.

# autocad - 通过 RealDWG 引擎访问对象启用程序

> ID：13390546
> 
> 赞同：1
> 
> 时间：2012-11-15T02:06:26.513
> 
> 标签：autocad, custom-object

我正在尝试使用 RealDWG 打开一个包含来自另一个应用程序的自定义对象的 dwg 文件。有没有人知道如何访问该特定应用程序的对象启用程序以读取对象的内部数据的任何文档或示例/视频？

谢谢， 阿夫辛

建议标签：RealDWG Object-Enabler

# mysql - MySQL Item 属性取决于类别

> ID：13390551
> 
> 赞同：1
> 
> 时间：2012-11-15T02:06:49.343
> 
> 标签：mysql, attributes, categories

假设我有一家销售一般产品的商店……例如衣服和电脑。一个项目只能有一个类别。

因此，我的项目具有类别（衣服、计算机等），并且根据类别，项目具有属性，而这些属性的值也取决于类别。

对此有什么好的方法？到目前为止，我有一个与表 tbl_attribute 具有多对多关系的 tbl_item，但我猜我应该将它更改为 tbl_category 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:50:14.043

好像你有：

```
item(item_id, name, category_id)
item_attributes(item_id, attribute_id)
attributes(attribute_id, category_id, name) 
```

因此，对于给定的项目，您查找 category_id。以此来获取可用属性的列表，并将适当的属性插入 item_attributes 表中。

# jquery - 带有强制和自由文本的自动完成标签

> ID：13390567
> 
> 赞同：8
> 
> 时间：2012-11-15T02:09:34.110
> 
> 标签：jquery, jquery-ui, tags

我需要一个允许自由文本的多行文本框，但是如果我开始输入字符：“@@”
，应该会显示带有可用标签的自动完成框，并允许我从现有的标签和“@@”字符中选择标签不应出现在标签名称中。

目前我正在使用jquery UI 的[tag-it 插件](https://github.com/aehlke/tag-it)，但无法弄清楚如何允许自由文本并且只在“@@”输入时显示自动完成框。以及如何使用 textarea 而不是常规输入。

另外，如果他们输入 @@ 并且不允许输入自由文本（第一个可用的选择会很好）
Javascript，我想强制他们从列表中选择：

```
$(document).ready(function() {

  //The demo tag array
  var availableTags = [
    {value: 1, label: 'tag1'},
    {value: 2, label: 'tag2'},
    {value: 3, label: 'tag3'}];

  //The text input
  var input = $("input#text");

  //The tagit list
  var instance = $("<ul class=\"tags\"></ul>");

  //Store the current tags
  //Note: the tags here can be split by any of the trigger keys
  //      as tagit will split on the trigger keys anything passed  
  var currentTags = input.val();

  //Hide the input and append tagit to the dom
  input.hide().after(instance);

  //Initialize tagit
  instance.tagit({
    tagSource:availableTags,
    tagsChanged:function () {

      //Get the tags            
      var tags = instance.tagit('tags');
      var tagString = [];

      //Pull out only value
      for (var i in tags){
        tagString.push(tags[i].value);
      }

      //Put the tags into the input, joint by a ','
      input.val(tagString.join(','));
    }
  });

  //Add pre-loaded tags to tagit
  instance.tagit('add', currentTags);
}); 
```

html:

```
<p>This example shows how to use Tagit on an input!</p>
<input type="text" id="text" name="tags" value="one,two,three"/>
​ 
```

在这里测试：http: [//jsfiddle.net/hailwood/u8zj5/](http://jsfiddle.net/hailwood/u8zj5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T23:09:54.340

由于您使用了 tag-it 插件.. 我在输入中添加了一些处理程序来处理

1.  `@@`在您键入时显示自动完成
2.  如果没有输入，则为自由文本`@@`

如果输入@@ ，我仍然需要时间来查看***不允许自由文本***

**演示： http:** [//jsfiddle.net/xBgfJ/2/](http://jsfiddle.net/xBgfJ/2/)以下是完整代码，

**注意：**下面的代码是对现有插件代码的**调整。**

```
$(document).ready(function() {

    //The demo tag array
    var availableTags = [{value: 1, label: 'tag1'},{ value: 2,label: 'tag2'}, { value: 3, label: 'tag3'}];

    //The text input
    var input = $("input#text");

    //The tagit list
    var instance = $("<ul class=\"tags\"></ul>");

    //Store the current tags
    //Note: the tags here can be split by any of the trigger keys
    //      as tagit will split on the trigger keys anything passed  
    var currentTags = input.val();

    //Hide the input and append tagit to the dom
    input.hide().after(instance);

    //Initialize tagit
    instance.tagit({
        tagSource: availableTags,
        tagsChanged: function() {

            //Get the tags            
            var tags = instance.tagit('tags');
            var tagString = [];

            //Pull out only value
            for (var i in tags) {
                tagString.push(tags[i].value);
            }

            //Put the tags into the input, joint by a ','
            input.val(tagString.join(','));
        },
        onTagAdded: function() {
            inpNext.parent().find('.pre-filter').remove();
        }
    });

    //Add pre-loaded tags to tagit
    instance.tagit('add', currentTags);

    var inpNext = input.next();
    var autoCompelteMenu = $('.ui-autocomplete', inpNext);

    inpNext.on('keydown', '.tagit-input', function(e) {
        var $parent = $(this).parent();
        var $preFilter = $parent.find('.pre-filter');
        if (e.which == 8 && this.value == '') { //backspace           
            $preFilter.remove();
        } else if (e.which == 9 || e.which == 32
                  || e.which == 188 || e.which ==  44 ||
                  e.which == 13 ) { //tab or space, comma and enter
            $preFilter.remove();
            autoCompelteMenu.css('opacity', 0);
        }

    }).on('keypress', '.tagit-input', function(e) {

        var $parent = $(this).parent();
        var $preFilter = $parent.find('.pre-filter');

        if (e.which == 64 && !$preFilter.length) {
            $parent.prepend('<span class="pre-filter hidden">@</span>');
            autoCompelteMenu.css('opacity', 0);
        } else if ( e.which == 64 && $preFilter.length) {
            e.preventDefault();
            this.value = '';
            $preFilter.append('@').removeClass('hidden');
            autoCompelteMenu.css('opacity', 1);
        }

        return;

    }).on('blur', '.tagit-input', function() {
        $(this).parent().find('span').remove();
        autoCompelteMenu.css('opacity', 0);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T22:01:53.220

我为此创建了一个[Meteor](http://www.meteor.com/)包，它允许自由文本和多个自动完成源。Meteor 的数据模型允许使用自定义渲染列表进行快速多规则搜索。如果您没有将 Meteor 用于您的 Web 应用程序，（我相信）很遗憾，您将找不到任何用于自动完成的出色功能。

使用 自动完成用户`@`，其中在线用户显示为绿色：

![在此处输入图像描述](../Images/d10f3cf6c30a271ddb6dc725cb9d193b.png)

在同一行中，使用`!`元数据和引导图标自动完成其他内容：

![在此处输入图像描述](../Images/3e43d2b25fca9b11a1a92407916b2ee5.png)

分叉、拉动和改进：

> [https://github.com/mizzao/meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)

# linux - 内核线程---“kthreadd”

> ID：13390568
> 
> 赞同：5
> 
> 时间：2012-11-15T02:09:48.193
> 
> 标签：linux, kernel

众所周知，kthreadd是一个内核线程，用来帮助别人创建新的内核线程（`kthread_create_list`查看是否有新的内核线程需要创建）。

但是我不明白为什么我们不用`create_kthread`创建一个新的内核线程？我看不出 kthreadd 有什么不同。

你能给我一些建议吗，拜托。

感谢您的大力帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:07:15.063

并不真地。kthreadd 是在内核空间中运行的守护线程。原因是内核有时需要创建线程，但在内核中创建线程非常棘手。因此，如果需要，kthreadd 是内核用来生成新线程的线程。该线程也可以访问用户空间地址空间，但不应该这样做。它由内核管理，因此无需担心。

# c# - Html.ActionLink 文本框值

> ID：13390569
> 
> 赞同：1
> 
> 时间：2012-11-15T02:09:52.170
> 
> 标签：c#, asp.net-mvc, html.actionlink

我需要输入这个值：

```
 @Html.DropDownList("region", new[]{ 
           new SelectListItem() { Text = "MA", Value = "MA" },
                new SelectListItem() { Text = "BC", Value = "BC" },
                     new SelectListItem() { Text = "ON", Value = "ON" },

          }) 
```

进入这里：

```
@Html.ActionLink("<<", "List", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, zipCode = ViewData["zipCode"], searchType = ViewData["searchType"], distance = ViewData["distance"], region = ViewData["region"], country = ViewData["country"] }) 
```

ViewData["region"] 为空，单击链接时无法获取该值。如何将 DropDownList 的区域值放入查询字符串？我在代码中将区域设置为默认值 MA：

```
public ViewResult List(string sortOrder, string currentFilter, string searchString, int? page, string zipCode, string region, int? distance, string searchType, string country)
    {
        _storeService = new StoreService();

         //sets defaults
         if (String.IsNullOrEmpty(zipCode))
         {
             zipCode = "02472";
         }

         if (String.IsNullOrEmpty(region))
         {
             region = "MA";
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:20:43.033

由于您无法在页面加载时设置 URL，我只需向锚标记添加一个点击侦听器，并在那里更新链接：

```
@Html.ActionLink("<<", "List", new { ... },
    new { onclick = "updateLink(this);" }) 
```

处理程序应从区域下拉列表中检索区域，并更新链接的`href`：

```
function updateLink(anchor) {
    var select = document.getElementById('region');
    var region = select.options[select.selectedIndex].value;
    anchor.href = e.href + "&region=" + region;
} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:36:24.353

当用户看到您的页面时，它已经使用链接值呈现，我猜您希望在用户做出选择后将所选值放置在该链接中。客户端的事情。从您的代码中-您将 ViewData["region"] 中的值传递给控制器​​，该值从一开始就没有填充到控制器上。这就是你得到空值的原因。使用 ajax 在选择更改时填充视图数据。

# delphi - 如何检测非修饰键组合？

> ID：13390571
> 
> 赞同：6
> 
> 时间：2012-11-15T02:10:11.730
> 
> 标签：delphi, textbox, keyboard-shortcuts, keyboard-events, onkeypress

我在 Delphi 中有以下问题（但它可能被视为一般编程问题）。

我想以某种方式处理多个非修饰键组合的按键事件，例如像`A`+`D`或`D`+`F`或`D`+ `F`+这样的快捷键`G`。

我知道如何使用修饰键处理快捷键，例如`CTRL`+`D`或`CTRL`++或`ALT`+ ，但我如何检测非修饰键组合？`D``ALT``D`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T02:40:46.503

每个单独的击键都会生成单独`OnKeyDown`的`OnKeyPress`、 和`OnKeyUp`事件。所以你有三个选择：

1.  跟踪当前按下的每个键。对于您收到的每个键，在事件中为其设置一个标志，并在`OnKeyDown`相应的事件中为它清除标志`OnKeyUp`。当您收到 的`OnKeyDown`事件时`D`，检查您是否已经标记了`A`、`F`、`G`等。and事件还会告诉您、`OnKeyDown`和键的状态。`OnKeyUp``CTRL``ALT``SHIFT`

2.  使用 Win32 API或`GetKeyboardState()`函数。当您收到 的事件时，询问操作系统当前是否按下了、、、等。`GetKeyState()``GetAsyncKeyState()``OnKeyDown``D``A``F``G``CTRL`

3.  对于某些序列，您可以使用`RegisterHotKey()`并让操作系统为您跟踪密钥。当检测到注册序列时，您将收到一条`WM_HOTKEY`消息。

# jpa - 将多个 JPA 列映射到单个数组

> ID：13390574
> 
> 赞同：1
> 
> 时间：2012-11-15T02:10:47.510
> 
> 标签：jpa

我目前正在将一些遗留代码移植到使用 JPA 并且在尝试将其中一个表简化为实体时遇到了问题。

我有一张在 24 小时内（每半小时）采集的各种读数的表格。看起来像：

```
Date     |R1|R2|R3...R48

1/1/2012,1,5,1,3,3,4,5,5....etc 
```

我希望我的实体 bean 看起来像：

```
@Entity
public class Reading {

    @Id
    String date;

    @??
    int[] values;

    @???
    int sumOfValues
} 
```

有什么建议我可以解决这个问题吗？甚至可能吗？另外 - 我只想阅读这些值，如果这样更容易的话。我在 MongoDB 中使用 EclipseLink 2.4

** 更新 **

几乎拥有它 - 但需要以某种方式维护顺序（我认为字段映射无序） - 或通过对列名的引用：

```
@Entity  
@Customizer (RawDataCustomizer.class)  
public class Reading {  
private List<Integer> values...  
public void setValue(Integer value)...  
public static class RawDataCustomizer implements DescriptorCustomizer {  

    @Override  
    public void customize(ClassDescriptor descriptor) throws Exception {  
    //loses ordering?  
    for (int i=1; i<=48; i++)  
    descriptor.addDirectMapping("R"+i, "getValue", "setValue", "r"+i);  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:22:17.653

我认为您不能告诉 JPA 映射到开箱即用的数组。您需要映射每一列并执行一些自定义代码来创建数组：

*   [在这个](https://stackoverflow.com/a/2325163/1012381)答案中使用@Embedded
*   或使用带有类似查询的@NamedNativeQuery

    SELECT Date, concact(R1,',',R2,',',R3,...) AS R 从 MYTABLE

并在二传手：

```
public void setR(String r) {
  String[] myarray = r.split(',');
  // Convert String[] to int[] and compute sum
} 
```

请注意，第二个解决方案确实是一种解决方法。我会优先映射所有列并在实体之外进行计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:17:11.657

最终解决方案，使用@Customizer - 一点也不理想 - 但现在效果很好：

```
public static class RawDataMapping extends EISDirectMapping  {
    private final int index;
    public RawDataMapping(int index, String attributeName,String fieldName) {
        super();
        this.index = index;
        setAttributeName(attributeName);
        setFieldName(fieldName);
        setAttributeAccessor(new CustomAccessorAttributeAccessor(this));
    }
    public void set(Object object, Object value)...
    public Object get(Object object)...
} 
```

# javascript - Javascript：将变量定义为调用相同函数的匿名函数

> ID：13390575
> 
> 赞同：3
> 
> 时间：2012-11-15T02:10:49.767
> 
> 标签：javascript, anonymous-function, self-reference, variable-declaration, function-expression

我被赋予了这样的功能：

```
//! Work on record.
/*!
    \param[in]  Record                  (object) Record.
    \param[in]  AsyncCallback           (function) Asynchronous callback which is called when the operation is complete. It takes no parameters.
*/
function WorkOnRecord(Record, AsyncCallback)
{
    /* Work on Record asynchronously (e.g. by calling $.ajax())
       and call AsyncCallback on complete. */
} 
```

现在，我有一个对象数组`RecordArray`（

所以我想出了：

```
$(function() {
    var RecordArray = SomeOtherFunc();      // RecordArray is an array of objects.

    // Work on records, one by one.
    var RecordIndex = 0;
    var WorkFunc = function() {
        // If there are still records to work on...
        if(RecordIndex < RecordArray.length)
        {
            // Work on record.
            WorkOnRecord(RecordArray[RecordIndex], function() {
                // Move forward to next record.
                WorkFunc();
            });
            RecordIndex++;
        }
        // If there are no more records to work on...
        else
        {
            /* We are all done. */
        }
    };
    WorkFunc(); // Start working.
}); 
```

如您所见，`WorkFunc`实际上是从`WorkFunc`定义变量本身的匿名函数内部调用的。**这在 ECMAScript/Javascript 中合法**吗？（法律意味着它适用于所有符合标准的浏览器）

我的意思是，对我来说，它很像`var c = c + 1;`在*Javascript*或*C/C++/ObjC/Java*中，它`int c = c + 1;`在*定义变量时引用了一个变量*，所以要么*它应该是非法*的，要么*它的行为应该是 undefined*。

 ***但是，它似乎在一些浏览器上运行良好。

* * *

经过更多的研究和思考，我想出了其他解决方案。

*   解决方案1：命名匿名函数（`MyFunc`），这样我就可以在里面使用它的名字（参考[这里](https://stackoverflow.com/a/338053/1402846)）。

代码：

```
var WorkFunc = function MyFunc() {  // Name it MyFunc.
    if(RecordIndex < RecordArray.length)
    {
        WorkOnRecord(RecordArray[RecordIndex], function() {
            MyFunc();   // Use MyFunc here
        });
        RecordIndex++;
    }
};
WorkFunc(); 
```

*   解决方案2：使用函数声明而不是函数表达式，这样它更像是一个递归函数（虽然不完全是）（参考[这里](https://stackoverflow.com/a/336868/1402846)）。

代码：

```
function WorkFunc() {   // Declare function.
    if(RecordIndex < RecordArray.length)
    {
        WorkOnRecord(RecordArray[RecordIndex], function() {
            WorkFunc();
        });
        RecordIndex++;
    }
};
WorkFunc(); 
```

*   解决方案3：将变量作为参数（`NextStepFunc`）传递，这样我就不需要在`WorkFunc`里面引用（这看起来很有趣）。

代码：

```
var WorkFunc = function(NextStepFunc) { // Accept function as parameter.
    if(RecordIndex < RecordArray.length)
    {
        WorkOnRecord(RecordArray[RecordIndex], function() {
            NextStepFunc(NextStepFunc); // Call function as defined by parameter.
        });
        RecordIndex++;
    }
};
WorkFunc(WorkFunc); // Pass function as variable to parameter. 
```

但我的问题仍然存在：我原来的解决方案**合法**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:42:06.553

是的。匿名函数可以访问在父作用域中声明的每个变量，而不管它们的值（这是使用匿名函数进行递归的标准方法）。

请注意，如果稍后在父作用域中将变量设置为 null，则匿名函数中的后续调用将引发 TypeError（因为 null 将不再可调用）。这也意味着您甚至可以更改其值以针对另一个函数（但这绝对不是一个好习惯）。***

# actionscript-3 - 在 ActionScript 中单击并拖动

> ID：13390577
> 
> 赞同：1
> 
> 时间：2012-11-15T02:10:56.930
> 
> 标签：actionscript-3, events

当用户按住鼠标按钮并移动鼠标时，我正在尝试进行 2D“相机”移动（实际上只是调整背景图像的 x、y）。

我知道 MouseEvent.MOUSE_MOVE 存在，并且鼠标单击事件存在，但是我不确定如何正确组合这些事件，以便仅在按下鼠标且鼠标移动时才起作用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:02:56.597

您需要使用 MouseEvent.MOUSE_DOWN、MouseEvent.MOUSE_UP 和 MouseEvent.MOUSE_MOVE 的组合，我还有用于在鼠标按下时保存背景位置以及在鼠标按下时存​​储鼠标位置的变量（然后使用 MOUSE_DOWN 和 MOUSE_UP 事件处理程序添加或删除 MOUSE_MOVE 侦听器）。您可能还想处理 ROLL_OUT 并让它调用 MOUSE_UP 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:02:21.807

这里有一个很好的 tut：http: [//edutechwiki.unige.ch/en/Flash_drag_and_drop_tutorial](http://edutechwiki.unige.ch/en/Flash_drag_and_drop_tutorial)

完整的源代码和所有。

# php - 如何更改登录详细信息，以便将它们存储在 cookie 中，以便用户保持登录状态并且不会过期

> ID：13390580
> 
> 赞同：1
> 
> 时间：2012-11-15T02:11:12.490
> 
> 标签：php, session, cookies, browser, login

我想创建一个用户登录的简单登录系统，然后它将保存用户登录的详细信息，并且他们将始终登录，直到他们单击注销链接。现在我听说为了做到这一点，用户 cookie 更好。下面是登录页面：

teacherlogin.php 脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

// connect to the database
include('connect.php');
include('member.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  // required variables (make them explciit no need for foreach loop)
  $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
  $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
  $loggedIn = false;
  $active = true;

  if ((isset($username)) && (isset($userid))){
      echo "You are already Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a href='./menu.php'>Go to Menu</a> | <a href='./teacherlogout.php'>Logout</a>";
  }
  else{

  if (isset($_POST['submit'])) {

      $teacherpassword = md5(md5("g3f".$teacherpassword."rt4"));  

    // don't use $mysqli->prepare here
    $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

    while($stmt->fetch()) {
      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
if ($dbActive == 0) {
    $loggedIn = false;
    $active = false;
    echo "You Must Activate Your Account from Email to Login";
}else {
    $loggedIn = true;
    $active = true;
      $_SESSION['teacherid'] = $dbTeacherId;
      $_SESSION['teacherusername'] = $dbTeacherUsername;
}
      }
    }

    if ($loggedIn == true){
      $_SESSION['teacherforename'] = $dbTeacherForename;
      $_SESSION['teachersurname'] = $dbTeacherSurname;
      header( 'Location: menu.php' ) ;
      die();
    }

    if (!$loggedIn && $active && isset($_POST)) {
    echo "<span style='color: red'>The Username or Password that you Entered is not Valid. Try Entering it Again</span>";
    }

       /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
  }
?>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Teacher Login</title>
   <link rel="stylesheet" type="text/css" href="TeacherLoginStyle.css">
   </head>
<body>

                <?php
        include('noscript.php');
        ?>

    <h1>TEACHER LOGIN</h1>

  <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
  <p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
  <p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
  <p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
  </form>

  <a href="./forgotpass.php">Forgot Password</a>

</body>

<?php

}

?> 
```

在上面的代码中，用户将在相关文本输入中输入他们的用户名和密码。当他们提交登录详细信息时，它将检查数据库以查看他们的登录详细信息是否在数据库中匹配。

现在我想要做的是将用户的用户名和 id 的详细信息存储在一个 php 脚本（member.php）中，以便它知道哪个用户登录了。但目前我正在使用 $SESSION 来执行此操作，其中包含少量时间：

member.php 页面：

```
<?php

if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  }

        ?> 
```

如何更改上面的代码以包含 cookie，以便会员页面中的用户详细信息将无限期保留（直到他们退出当然）。

更新：

好的，这是`Teacher`数据库中的表：

```
TeacherId (auto PK) TeacherForename  TeacherSurname TeacherUsername, TeacherPassword
1                   John             Parks          j.parks          b018460fba79b
2                   Mary             Little         u0876555         a33rfe3tn12e3
3                   Jim              Owen           owensjimmy       fkof04r3fk422 
```

所以你是说首先在上面的表中添加一列 SessionId 并为每个用户存储一个复杂的 id，例如`34dekfm45345`。

然后我真的需要你的帮助才能看到如何找到正确的 SessionId 并删除 SessionId 的代码。

更新 2：

因此，如果我理解正确，以下是 php 脚本的外观：

教师登录.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <?php

    // connect to the database
    include('connect.php');
    include('member.php');
    include('sessionuser.php');

      /* check connection */
      if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        die();
      }

      // required variables (make them explciit no need for foreach loop)
      $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
      $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
      $loggedIn = false;
      $active = true;

      if ((isset($username)) && (isset($userid))){
          echo "You are already Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a href='./menu.php'>Go to Menu</a> | <a href='./teacherlogout.php'>Logout</a>";
      }
      else{

      if (isset($_POST['submit'])) {

          $teacherpassword = md5(md5("g3f".$teacherpassword."rt4"));  

        // don't use $mysqli->prepare here
        $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
        // prepare query
        $stmt=$mysqli->prepare($query);
        // You only need to call bind_param once
        $stmt->bind_param("ss",$teacherusername,$teacherpassword);
        // execute query
        $stmt->execute(); 
        // get result and assign variables (prefix with db)
        $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

        while($stmt->fetch()) {
          if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
    if ($dbActive == 0) {
        $loggedIn = false;
        $active = false;
        echo "You Must Activate Your Account from Email to Login";
    }else {
        $loggedIn = true;
        $active = true;
          $_SESSION['teacherid'] = $dbTeacherId;
          $_SESSION['teacherusername'] = $dbTeacherUsername;
    }
          }
        }

        if ($loggedIn == true){
          $_SESSION['teacherforename'] = $dbTeacherForename;
          $_SESSION['teachersurname'] = $dbTeacherSurname;
          header( 'Location: menu.php' ) ;
          die();
        }

        if (!$loggedIn && $active && isset($_POST)) {
        echo "<span style='color: red'>The Username or Password that you Entered is not Valid. Try Entering it Again</span>";
        }

           /* close statement */
        $stmt->close();

        /* close connection */
        $mysqli->close();
      }
    ?>
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
            <title>Teacher Login</title>
       <link rel="stylesheet" type="text/css" href="TeacherLoginStyle.css">
       </head>
    <body>

                    <?php
            include('noscript.php');
            ?>

        <h1>TEACHER LOGIN</h1>

      <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
      <p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
      <p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
      <p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
      </form>

      <a href="./forgotpass.php">Forgot Password</a>

    </body>

    <?php

    }

    ?> 
```

我没有更改它检查用户当前是否登录的代码，我是否将其更改`if ((isset($username)) && (isset($userid))){`为任何相关的？我在上面包含了`include(sessionuser.php) 代码

member.php 脚本：

```
<?php

    if (isset($_SESSION['teacherid'])) {

          $userid = $_SESSION['teacherid'];

      }

    if (isset($_SESSION['teacherusername'])) {

          $username = $_SESSION['teacherusername'];

      }

            ?> 
```

我还需要上面的 member.php 脚本吗？

sessionuser.php 脚本：

```
$sessionUserID = false;

if (isset($_COOKIE['sessionUserID']) && preg_match('/^[a-z9-0]{32}$/i) {
    $sessionUserID = $_COOKIE['sessionUserID'];

    // Get the session details from the database
    $sql = 'SELECT s.*, t.* FROM SessionUser s LEFT JOIN Teacher t ON s.TeacherId=t.TeacherId WHERE s.SessionUserId=:SessionUserId';
    $aParams = array(':SessionUserId' => $sessionUserID)
    $sessionRow = $stmnt->fetch();
    if ($sessionRow) {
        // User is logged in, and you have details in $sessionRow
        // At this point, you can also validate other info such as the UserAgent, IP etc. All forgable, but can help add a littel security.
    } else {
        // Passed an invalid / expired session ID
        $sessionUserID = false;
    }
}

// If you don't have a session, create one
if (!$sessionUserID) {
    // Create a session user ID - make it non sequential
    // You should put this in a loop and check $sessionID is unique. Insert will fail is not unique
    $sessionUserID = md5(time() . uniqid());
    $sql = 'INSERT INTO SessionUser(SessionUserId, TeacherId)
              VALUES(:SessionUserId, 0)';
    $aParams = array(':SessionUserId' => $sessionUserID)
    $smnt->execute();

    // Default session details
    $sessionRow = array('TeacherId'=>0);

    // Now the cookie part
    setcookie('sessionUserID', $sessionUserID, time() + howLongYouWant, '/');
}

// Not check for user logging in.
if (UserLogsIn) {
    if ($sessionRow['teacher_id'] > 0) {
         // Already logged in!?
    } else {

        $sql = 'UPDATE SessionUser SET Teacher_id=:TeacherId WHERE SessionUserId=:SessionUserId';
        $aParams = array(':TeacherId'=>$TeacherId, ':SessionUserId' => $sessionUserID);
        $smnt->execute();

        // After a form post, always redirect to the same page or another page - stops the "do you want to resent this data" message on back button
        // DO NOT echo anything before this point.
        header('location: this page');
        exit();
    }
} elseif (UserLogsOut) {
    if ($sessionRow['TeacherId'] == 0) {
         // Not Logged In!?
    } else {

        $sql = 'UPDATE SessionUser SET TeacherId=0 WHERE SessionUserd=:SessionUserid';
        $aParams = array(':session_id' => $sessionID);
        $smnt->execute();

        // After a form post, always redirect to the same page or another page - stops the "do you want to resent this data" message on back button
        // DO NOT echo anything before this point.
        header('location: this page');
        exit();
    }
} 
```

sessionuser.php 脚本代码包含上述所有代码是否正确？我已更改代码以尝试匹配下面的数据库表：

会话用户表：

```
SessionUserId (CHAR32) PK
TeacherId (INT) //matches TeacherId field in teacher table 
```

更新2正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:17:37.430

简单（但错误）的答案是您将所有替换`$_SESSION['blah'] = $value`为`setcookie('blah', $value, time() + ages);`

但是您遇到的问题是您将用户信息存储在会话中 - 如果您存储在 cookie 中，则可以轻松更改该信息。

因此，您需要一种本地（在服务器上）存储个人详细信息的方式，以及一个用于调用这些详细信息的参考号 - 本质上您需要复制会话，但使用您自己的数据库（或文件存储）。

通常这是在数据库中完成的：您创建一个“会话”数据库，给每个用户一个唯一的会话 ID（很难猜到，不是一个直接的数字），然后将该会话 ID 存储在 cookie 中，并将个人详细信息存储在数据库中. 然后你得到一个会话 cookie，从数据库中调用它们的详细信息。当他们注销时，删除数据库等中的条目。如果服务器重新启动并且您丢失会话，您的会话数据在数据库中是安全的 - 用户始终登录，直到您不想要它。

所以有一个简单的答案，也有一个真实的、更复杂的答案。

* * *

编辑：

根据要求，一个即兴的过程。我错过了错误检查和数据库调用的所有爵士乐。这应该让你开始。

```
// Create a DB with the following structure
session_id CHAR(32) PRIMARY KEY
teacher_id INT(mathc your teachers table)

// Check for cookie, validate it's an expected format
$sessionID = false;

if (isset($_COOKIE['sessionID']) && preg_match('/^[a-z9-0]{32}$/i) {
    $sessionID = $_COOKIE['sessionID'];

    // Get the session details from the database
    $sql = 'SELECT s.*, t.* FROM sessions s LEFT JOIN teachers t ON s.teacher_id=t.teacher_id WHERE s.session_id=:session_id';
    $aParams = array(':session_id' => $sessionID)
    $sessionRow = $stmnt->fetch();
    if ($sessionRow) {
        // User is logged in, and you have details in $sessionRow
        // At this point, you can also validate other info such as the UserAgent, IP etc. All forgable, but can help add a littel security.
    } else {
        // Passed an invalid / expired session ID
        $sessionID = false;
    }
}

// If you don't have a session, create one
if (!$sessionID) {
    // Create a session ID - make it non sequential
    // You should put this in a loop and check $sessionID is unique. Insert will fail is not unique
    $sessionID = md5(time() . uniqid());
    $sql = 'INSERT INTO sessions(session_id, teacher_id)
              VALUES(:session_id, 0)';
    $aParams = array(':session_id' => $sessionID)
    $smnt->execute();

    // Default session details
    $sessionRow = array('teacher_id'=>0);

    // Now the cookie part
    setcookie('sessionID', $sessionID, time() + howLongYouWant, '/');
}

// Not check for user logging in.
if (UserLogsIn) {
    if ($sessionRow['teacher_id'] > 0) {
         // Already logged in!?
    } else {

        $sql = 'UPDATE sessions SET teacher_id=:teacher_id WHERE session_id=:session_id';
        $aParams = array(':teacher_id'=>$teacher_id, ':session_id' => $sessionID);
        $smnt->execute();

        // After a form post, always redirect to the same page or another page - stops the "do you want to resent this data" message on back button
        // DO NOT echo anything before this point.
        header('location: this page');
        exit();
    }
} elseif (UserLogsOut) {
    if ($sessionRow['teacher_id'] == 0) {
         // Not Logged In!?
    } else {

        $sql = 'UPDATE sessions SET teacher_id=0 WHERE session_id=:session_id';
        $aParams = array(':session_id' => $sessionID);
        $smnt->execute();

        // After a form post, always redirect to the same page or another page - stops the "do you want to resent this data" message on back button
        // DO NOT echo anything before this point.
        header('location: this page');
        exit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:51:14.550

我的建议是延长会话到期时间。通常会话在浏览器关闭时过期，您可以从 ini 设置中更改此设置。请参阅[http://php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php) 不会正是您正在寻找的，即永远，但延长时间可能是一个合理的解决方案。

# css - 更改 HTML 5 Boilerplate 默认字体大小是否安全？

> ID：13390581
> 
> 赞同：2
> 
> 时间：2012-11-15T02:11:21.307
> 
> 标签：css, html, html5boilerplate

我认为 HTML5 Boilerplate 的默认字体大小对我正在设计的网站的品味来说有点高，但我喜欢它的功能。`font-size:1em;`将main.css 中的内容更改为类似的内容是否安全`font-size:0.9em;`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:31:33.610

绝对 - 它只是 CSS。它可以让你看起来也想要它。

[事实上，增加尺寸可能不是一个坏主意](http://www.smashingmagazine.com/2011/10/07/16-pixels-body-copy-anything-less-costly-mistake/)

# javascript - 使用 div 的 innerHTML 创建的脚本标签不起作用

> ID：13390588
> 
> 赞同：9
> 
> 时间：2012-11-15T02:12:17.537
> 
> 标签：javascript, html

这是JS代码：

```
var wrap = document.createElement("div");
wrap.innerHTML = '<script type="text/javascript" src="'+scriptUrl+'"></script>';
var wrapscript = wrap.childNodes[0];
document.body.appendChild(wrapscript) 
```

正文确实插入了脚本元素，但是没有加载 JS 资源，甚至没有 http 请求。

有人可以解释为什么会这样吗？

问题在于 Zeptojs 的 $ 方法

```
$('<script type="text/javascript" src="'+scriptUrl+'"></script>').appendTo($("bdoy")) 
```

它像上面的代码一样工作，并导致错误。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T06:57:33.027

这个是微不足道的。

如规范（[8.4 解析 HTML 片段](http://dev.w3.org/html5/spec/the-end.html#parsing-html-fragments)和[8.2.3.5 其他解析状态标志](http://dev.w3.org/html5/spec/parsing.html#scripting-flag)）中所述，引用：

*使用`innerHTML`浏览器时会*

> 1.  创建一个新的 Document 节点，并将其标记为 HTML 文档。
>     
>     
> 2.  如果存在上下文元素，且上下文元素的 Document 处于 quirks 模式，则让 Document 处于 quirks 模式。否则，如果存在上下文元素，并且上下文元素的 Document 处于 limited-quirks 模式，则让 Document 处于 limited-quirks 模式。否则，让文档处于无怪癖模式。
>     
>     
> 3.  创建一个新的 HTML 解析器，并将其与刚刚创建的 Document 节点相关联。...

*并且在解析`<script>`内部时*

> 如果在创建解析器时为与解析器关联的文档启用了脚本，则脚本标志设置为“启用”，否则设置为“禁用”。
> 
> 即使解析器最初是为 HTML 片段解析算法创建的，即使脚本元素在这种情况下不执行，也可以启用脚本标志。

所以它不会被执行，只要你用`innerHTML`.

并且 using`innerHTML`将阻止创建*的* `<script>`元素永久执行。

如规范（[4.3.1 脚本元素](http://dev.w3.org/html5/spec/the-script-element.html#attr-script-src)，）中所述，引用：

> 动态更改 src、type、charset、async 和 defer 属性没有直接影响；这些属性仅在下面描述的特定时间使用。

总结下面的*描述*是，它只`src`在注入时解析属性`<script>`（`document`不管是哪个，包括使用时创建的[临时](http://dev.w3.org/html5/spec/the-end.html#parsing-html-fragments)`innerHTML`属性。）

所以，只要你想给文档注入脚本并让它执行，你就必须使用`script = document.createElement('script')`.

设置它的属性`src`和`type`，可能是里面的内容（通过使用`script.appendChild(document.createTextNode(content))`），然后将其附加到`document.body`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T02:41:10.330

你可以试试这个：

```
var wrap = document.createElement('div');
var scr = document.createElement('script');
scr.src = scriptUrl;
scr.type = 'text/javascript';
wrap.appendChild(scr);
document.body.appendChild(wrap); 
```

通过显式创建脚本标记，您是在告诉 JS，innerHTML 不是文本，而是可执行脚本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-26T13:46:18.903

当您无法控制插入机制并且您被迫使用带有`script`信标的 innerHTML 时，一个可能的解决方案是从“幽灵”节点重建 DOM 节点。

这是广告技术行业中反复出现的问题，其中许多自动化系统复制任意 HTML 代码（也称为广告服务器 ^^）。

在 Chrome 中运行良好：

```
var s = wrap.getElementsByTagName('script');
for (var i = 0; i < s.length ; i++) {
  var node=s[i], parent=node.parentElement, d = document.createElement('script');
  d.async=node.async;
  d.src=node.src;
  parent.insertBefore(d,node);
  parent.removeChild(node);
} 
```

（你可以[在 JSFiddle 中测试它](http://jsfiddle.net/samuel_29/qe3htbbr/)）

# data-compression - 随机数字数据最有效的无损压缩？

> ID：13390591
> 
> 赞同：5
> 
> 时间：2012-11-15T02:12:38.753
> 
> 标签：data-compression

我的数据实际上并不是完全随机的。我正在寻找压缩遥测测量值，这些测量值往往在同一范围内（例如温度变化不大）。但是，我寻求一种适用于多种应用的解决方案，因此我可能会在一天发送温度，下一天发送电压，等等。

我想通过低数据速率卫星链路发送测量结果。SatCom 相当昂贵，所以我想尽可能地削减每一分钱。我不介意花费计算资源来打包和解包数据，因为没有什么是时间紧迫的（传输 192 个字节可能需要 30 秒）。

任何人都可以建议一种 FOSS 数据压缩方法，它会给我最大的遥测数据压缩吗？

值得尝试吗？我可以期待什么样的百分比收益？

抱歉，我无法更准确地了解数据的性质 - 只是一般的遥测测量，如温度、纬度/经度 GPS 位置、液体流速等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:32:34.213

真正随机的数据是不可压缩的。

由于您无法透露数据的详细信息，因此最好的办法是在一些样本数据上测试几种不同的压缩算法。

一个很好的起点是[DEFLATE 算法](http://en.wikipedia.org/wiki/DEFLATE)，它是 LZ77 滑动窗口压缩和 Huffman 编码的行业标准组合。它由许多特定的压缩包实现，[GZIP](http://en.wikipedia.org/wiki/Gzip)就是一个突出的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T02:35:19.043

也许最好的解决方案是使用 DEFLATE 库并在大数据块上运行它并使用高压缩设置。

如果您想推出自己的流压缩算法，您可以应用适用于声音文件的相同算法：直接发送第一个测量值，然后对每个样本与前一个样本之间的差异进行编码（增量编码）。

现在，最佳编码会根据数据变化的速度而有所不同：

如果数据变化足够快，请使用自适应 Huffmann 树。如果差异不相关（数据+噪声），这将使您从熵中每个样本最多获得一位。

如果几个连续的数据样本可能彼此相等（数据变化不是很快并且没有 HF 噪声），则使用一棵 Huffmann 树对每个非零差异进行编码，并使用第二个 Huffmann 树编码零的数量. 这将使您每次运行最多获得两位。

您甚至可以仅将差异编码为一位（向上或向下），但是您需要能够对零长度运行进行编码。

* * *

我的建议：增量编码一次或两次以获得不相关的条目，然后使用库进行 DEFLATE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-18T15:46:40.183

这个用例的完美算法是[分位数压缩](https://www.graphallthethings.com/posts/quantile-compression)。它在 rust 中以 FOSS 的名义实现[`q-compress`](https://crates.io/crates/q_compress)。

例如，假设您要无损传输一些 32 位浮点数据，例如温度，它们都是开尔文均匀分布在 275-300 范围内。

**LZ77/78 算法每个数字大约需要 24 位**，因为它们查看字节级别，并且会遗漏尾数位中的大部分可压缩信息。您可以在链接的博客文章中看到一个示例。

**分位数压缩将使用每个数字大约 20 位**（分布的实际熵；您需要 23 个尾数位中的大约 20 个，指数 8 对应于 256-512 范围来编码这些开尔文）。

您可以离散化以做得更好。在此示例中，32 位浮点数将为您提供小数点后 15 位的精度。如果您只关心 mK 的精度，则可以改为传输mK 的*整*数值。这些将在 275000 和 300000 之间，并且分位数压缩可以将这些压缩到**每个数字大约 15 位**。如果您只关心开尔文的 dK (1/10) 精度，您可以缩小到**每个数字 8 位**。

如果您的数字变化缓慢（例如，相邻值相似），您可以在离散化和分位数压缩之间进行[Delta 编码](https://en.wikipedia.org/wiki/Delta_encoding)。根据您的数据变化的速度，可以想象，这可以在 dK 精度下使用**每个数字 2-8 位。**

# spring-mvc - Spring MVC wildcard

> ID：13390595
> 
> 赞同：0
> 
> 时间：2012-11-15T02:13:20.510
> 
> 标签：spring-mvc

> **Possible Duplicate:**
> [Spring 3 RequestMapping: Get path value](https://stackoverflow.com/questions/3686808/spring-3-requestmapping-get-path-value)

Does anyone knows how to map everything under a certain URL and then catch that mapped value into a request variable?

```
@RequestMapping("/content/{path:.*}") // matches only one level
@RequestMapping("/content/**")        // matches everything, can't catch
                                      // the actual value matched by the two stars
@RequestMapping("/content/{path:**}") // does not compute 
```

What I need to map is:

```
/content/a.gif
/content/a/b.gif
/content/a/b/c.gif
/content/a/b/c/d.gif 
```

It's really frustrating because it is such a common scenario.

# c# - C#中的对象方法继承

> ID：13390597
> 
> 赞同：1
> 
> 时间：2012-11-15T02:13:44.617
> 
> 标签：c#, oop, interface

好的，这需要先进行一些设置。

```
public interface IPolicyObjectAdapter
{
    PolicyImage GetPolicyImage(BridgePolicy policy);
}

public class BridgePolicyAdapter : IPolicyObjectAdapter
{
    protected virtual PolicyImage GetPolicyImage(BridgePolicy policy)
    {
         AddPolicyInformation(policy);
    }

    protected virtual void AddPolicyInformation(BridgePolicy policy)
    {
       //does stuff
    }
}

public class HSPolicyAdapter : BridgePolicyAdapter, IPolicyObjectAdapter
{
     protected override void AddPolicyInformation(BridgePolicy policy)
     {
          base.AddPolicyInformation(policy);
          //does more stuff
     }
} 
```

当我执行以下代码时，我希望代码进入 HSPolicyAdapter 的 AddPolicyInformation 方法。但它永远不会。它直接进入 BridgePolicyAdapters AddPolicyInformation 方法。

```
IPolicyObjectAdapter Adapter = null;
Adapter = new HSPolicyAdapter();
PolicyImage image = Adapter.GetPolicyImage(policy); 
```

我确信我错过了一些如此明显会伤害的东西，但我的大脑现在无法正常工作。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:09:37.607

我将这种解释拼凑在一起，对我来说效果很好：

```
public class BridgePolicy
{
    public string Name { get; set; }
}

public class PolicyImage
{
    public string Name { get; set; }
}

public interface IPolicyObjectAdapter
{
    PolicyImage GetPolicyImage(BridgePolicy policy);
}

public class BridgePolicyAdapter : IPolicyObjectAdapter
{

    protected virtual void AddPolicyInformation(BridgePolicy policy)
    {
        //does stuff
    }

    public virtual PolicyImage GetPolicyImage(BridgePolicy policy)
    {
        AddPolicyInformation(policy);

        return null;
    }
}

public class HSPolicyAdapter : BridgePolicyAdapter, IPolicyObjectAdapter
{
    protected override void AddPolicyInformation(BridgePolicy policy)
    {
        base.AddPolicyInformation(policy);
        //does more stuff
    }
}

class Program
{
    static void Main(string[] args)
    {
        BridgePolicy p = new BridgePolicy();
        IPolicyObjectAdapter Adapter = null;
        Adapter = new HSPolicyAdapter();
        PolicyImage image = Adapter.GetPolicyImage(p);
    }
} 
```

# sql-server - 禁用 Hibernate 调用存储过程的事务

> ID：13390598
> 
> 赞同：3
> 
> 时间：2012-11-15T02:13:45.753
> 
> 标签：sql-server, spring, hibernate, transactions, jtds

对于我们的 Web 应用程序，所有数据库访问都是通过存储过程执行的。这个设计决定是一成不变的，我无法改变它。

此外，所有事务处理都在存储过程中完成。Java 层不得使用事务。

我可以使用普通的 JDBC 轻松完成此操作。但我更喜欢使用 Hibernate 的 ORM 和缓存功能。

使用 Hibernate 调用存储过程很容易：

```
final Session session = sessionFactory.getCurrentSession();
final Query query = session.createSQLQuery("EXEC dbo.SP_ProductSearch :searchStr").addEntity(Product.class).setString("searchStr", "ap");
return query.list(); 
```

但是当我运行数据库配置文件时，我看到以下内容。

```
SET IMPLICIT_TRANSACTIONS ON
EXEC dbo.SP_ProductSearch  N'ap'
IF @@TRANCOUNT > 0 COMMIT TRAN
IF @@TRANCOUNT > 0 COMMIT TRAN
SET IMPLICIT_TRANSACTIONS OFF 
```

无论如何我可以禁用 4x 交易语句吗？

我的技术栈如下。

*   春天 3.1.2
*   休眠 4.1.8
*   jTDS（JDBC驱动）1.2.5
*   微软 SQL 服务器 10.x

非常感谢……亚当。

* * *

@ctapobep - 这是使用普通 JDBC 完成的。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class PlainJdbcTest
{
    private static final String USERNAME = "sa";
    private static final String PASSWORD = "password";
    private static final String URL = "jdbc:jtds:sqlserver://myserver:1433;DatabaseName=testDatabase;prepareSQL=0";
    private static final String QUERY = " EXEC dbo.SP_ProductSearch ?";
    private static final String DRIVER = "net.sourceforge.jtds.jdbc.Driver";

    public static void main(String[] args) throws Exception
    {
        Class.forName(DRIVER).newInstance();

        final Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
        final PreparedStatement statement = connection.prepareStatement(QUERY);
        statement.setString(1, "ba");
        final ResultSet resultSet = statement.executeQuery();

        while(resultSet.next())
        {
            final int id = resultSet.getInt(1);
            final String desc = resultSet.getString(2);
            System.out.print(id + " / " + desc);
        }

        if(resultSet != null) resultSet.close();
        if(statement != null) statement.close();
        if(connection != null) connection.close();
    }
} 
```

这就是配置文件中显示的内容 - 完美运行！

```
EXEC dbo.SP_ProductSearch  N'ba' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:30:59.483

你如何调用你的休眠代码（执行存储过程）？它是通过具有 @Transactional 注释的 Spring Service 类调用的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:45:41.473

我还没有发现任何阻止 Hibernate 使用事务的方法，所以作为一种解决方法，我已经切换到运行良好的 MyBatis。

[http://www.mybatis.org/spring/index.html](http://www.mybatis.org/spring/index.html)

# powershell - Powershell get day of the week in yyMMdd format

> ID：13390599
> 
> 赞同：1
> 
> 时间：2012-11-15T02:13:52.900
> 
> 标签：powershell

I'm getting the date from a file name "BW-121113-CF1.pdf". So I have my date 121113, how do I figure out what day of the week that was. I tried: "{0:yyMMdd}" -f (get-date) "121113". But of course that didn't work. Any suggestions?

```
get-date "11/13/12" -format dddd 
```

That get's me the right day of the week. But I need the get-date to understand that "121113" is the say date.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:46:13.280

尝试这个：

```
([datetime]::ParseExact("121113", "yyMMdd", 
    [System.Globalization.CultureInfo]::InvariantCulture )).DayOfWeek 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:57:08.440

你有很多解决方案：

`([datetime]"11/13/12").DayOfWeek")`将以 .NET 自然语言为您提供星期几（英文）

尝试 ：`[datetime]::parse("13/11/2012")`

或者 ：`("{0:dddd}" -f [datetime]::parse("13/11/2012"))`

或者 ：`([datetime]"11/13/2012").tostring("dddd")`

在您的特殊情况下：

转换 :`$aDate = ("121113" -replace '([0-9]{2})([0-9]{2})([0-9]{2})','$2/$3/$1')` 给出 : `11/13/12`in `$aDate` And :`([datetime]$aDate).dayofweek`

所以 ：

```
([datetime]("121113" -replace '([0-9]{2})([0-9]{2})([0-9]{2})','$2/$3/$1')).dayofweek 
```

# git - 撤消 git remove

> ID：13390601
> 
> 赞同：3
> 
> 时间：2012-11-15T02:14:05.203
> 
> 标签：git

我不小心执行了以下命令：

```
git rm -r . 
```

毫不奇怪，它删除了所有内容。有没有办法恢复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T02:16:09.463

尝试：

```
git reset HEAD 
```

如果您没有任何您关心的未提交更改，那么

```
git reset --hard HEAD 
```

应该强制将所有内容重置为您的最后一次提交。如果您确实有未提交的更改，但第一个命令不起作用，则使用 git stash 保存未提交的更改：

```
git stash
git reset --hard HEAD
git stash pop 
```

要恢复文件夹中所有已删除的文件，请输入以下命令。

```
 git ls-files -d | xargs git checkout -- 
```

检查删除的内容尝试：

```
git-ls-files --deleted 
```

# c# - Alternative approach to a switch case statement

> ID：13390608
> 
> 赞同：0
> 
> 时间：2012-11-15T02:15:00.823
> 
> 标签：c#, .net, design-patterns, switch-statement

I wrote this method that takes in a generic parameter object. This method accepts different parameter objects with different properties. The idea is that based on the value of the "MethodName" property, I can construct a URI base on properties of that particular parameter object

I use reflection to get the value of the property named "MethodName." It's not a method, just a property name.

I use the value of the MethodName property in a case statement. This seems like an inferior way to accomplish my task. Especially as the number of MethodNames grow.

Below is the source with the case statement implementation. Any help would be appreciated.

* * *

```
 public string ConstructBBAPIUri<T>(T parameters)
    {
        var methodName = "";
        var uri = "";
        var userId = "";
        long timeStamp = 0;
        var signature = "";
        var sessionKey = "";
        var newUserId = "";

        if (parameters != null)
        {
            methodName = parameters.GetType().GetProperty("MethodName").GetValue(parameters, null).ToString();

            switch (methodName)
            {
                case "user.login":
                    userId = parameters.GetType().GetProperty("UserId").GetValue(parameters, null).ToString();
                    timeStamp = Convert.ToInt64(parameters.GetType().GetProperty("TimeStamp").GetValue(parameters, null));
                    signature = GenerateBunchBallSignature(userId);

                    uri = "method=" + methodName + "&apiKey=" + apiKey + "&userid=" + userId + "&ts=" +
                          timeStamp + "&sig=" + signature;
                    break;

                case "user.modifyUserId":

                    //We shouldn't need the session key if user.login is being called first
                    userId = parameters.GetType().GetProperty("UserId").GetValue(parameters, null).ToString();
                    newUserId = parameters.GetType().GetProperty("NewUserId").GetValue(parameters, null).ToString();

                    uri = "method=" + methodName + "&sessionKey=" + sessionKey + "&oldUserId=" + userId +
                          "&newUserId=" + newUserId;
                    break;
            }
        }

        return uri;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:43:28.223

更好的设计是委托类上的 URI 构造。

1.  使用 ConstructBBAPIUri() 方法创建接口；
2.  为您具有代码访问权限的新类或现有类实现接口
3.  对于您无权访问代码的现有类，从这些类继承并实现接口。希望这些类所需的所有属性都可以访问，否则使用反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:33:36.257

一种选择是将函数添加到字典中，但我看不出这会比当前方法好得多，而且它会更加混乱和容易出错。

我认为 Max Shmelev 暗示的将是最好的解决方案。如果可以的话，为每个将被传递的类添加一个接口，并为这个方法添加一个通用约束。该接口将定义一个方法，当在对象中实现时，该方法将处理该对象的序列化。

如果列表不太长，您可以为要处理的每种不同类型添加方法，并且在每种情况下只调用一个方法。

# ios - When will the layoutSubviews be called by the instance of UIScrollView for a scrolling action?

> ID：13390609
> 
> 赞同：0
> 
> 时间：2012-11-15T02:15:02.750
> 
> 标签：ios, ios5, uiscrollview

My question is actually about the timing that the layoutSubviews is being fired. Is it called when the scroll view starts to scroll? or, the scrolling is completed? or being fired during the scrolling? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:37:48.690

每次滚动视图的边界发生变化（每秒最多发生 60 次）时，它都会在滚动的每一帧上触发。[Eliza 在WWDC 2010](https://developer.apple.com/videos/wwdc/2010/)的“Session 104 - Designing Apps with Scroll Views”视频中提到了这 14 分钟。

有时，仅从`NSLog`方法调用比在 stackoverflow 上等待某人回答您要快。;^)

# php - Detect if PDO->execute returns a row/record?

> ID：13390610
> 
> 赞同：6
> 
> 时间：2012-11-15T02:15:11.860
> 
> 标签：php, pdo, execute

code example;

```
$stmt = $db->prepare('SELECT u.username, u.display_name FROM users u WHERE u.id = :userId');
$stmt->bindValue(':userId', 10);
$stmt->execute(); 
```

Using prepare -> execute. If your sure the query will return max 1 row; is there a simple way to see if query did return a row? I see everyone validating on 'rowCount', but isn't there a cleaner way?

this article: [http://www.christiansouth.com/php/pdo-getting-started-part-2-pdostatement/](http://www.christiansouth.com/php/pdo-getting-started-part-2-pdostatement/) states;

> TRUE if the query was successful FALSE if it wasn’t. The stumble here is it will ONLY return FALSE if the SQL has an error. So if the SQL is valid but return no rowset you will still get a TRUE return value.

Is this statement correct? Because php.net only talks about:

> Returns TRUE on success or FALSE on failure.

So, rapping up the questions again:

*   Is it true you can't validate if a row was returned using $stmt (in above example) as a boolean?
*   Is there any solution to this that looks cleaner then 'rowCount' rapped in an if?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:35:44.817

*使用*结果集（即[`fetch`](http://php.net/manual/en/pdostatement.fetch.php)）：是否有一行？

具有 0 条记录的结果集在“是否有效”方面仍然完全有效，这就是为什么*每次*有效查询都返回 TRUE 的原因`execute`。在这种情况下，FALSE 应仅被视为*异常条件*。

另一方面，（第一个）的结果`fetch`- 结合查询将仅返回 0..1 行的知识 - 可用于确定是否提取了单行。由于这是访问此类查询数据的“标准”方式，因此无需执行额外检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:22:52.523

只要您使用 mysql，rowCount 就会为您提供结果集中的数字，而无需进行其他查询。其他数据库可能无法准确支持 rowCount，因此您必须先进行单独的 select count(*) ... 查询。

至于您在执行时是否只得到真或假，这绝对是真的，即使对于不返回任何行的查询也是如此。这是因为在关系理论中，空结果集是完全有效的，没有行的选择不是错误。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-10-02T14:38:40.550

使用 exec();

来自 PHP 手册：

> PDO::exec() 返回由您发出的 SQL 语句修改或删除的行数。如果没有行受到影响，PDO::exec() 返回 0。

[http://php.net/manual/en/pdo.exec.php](http://php.net/manual/en/pdo.exec.php)

# youtube-api - YouTube API calls to playlist feed fails when playlist IDs are not prefixed with "PL"

> ID：13390612
> 
> 赞同：2
> 
> 时间：2012-11-15T02:15:15.357
> 
> 标签：youtube-api

*(I've [submitted a bug report to YouTube](http://code.google.com/p/gdata-issues/issues/detail?id=3599) but thought someone here might have some insight)*

It seems that the YouTube API is suddenly (past 24 hours or so) demanding a leading "PL" in playlist IDs when requesting playlist feeds. Here's how you can reproduce:

1.  Make an API call to [http://gdata.youtube.com/feeds/api/playlists/PL83FF64CDA043CBC4?v=2](http://gdata.youtube.com/feeds/api/playlists/PL83FF64CDA043CBC4?v=2)
2.  Make an API call to [http://gdata.youtube.com/feeds/api/playlists/83FF64CDA043CBC4?v=2](http://gdata.youtube.com/feeds/api/playlists/83FF64CDA043CBC4?v=2)

You'll notice that the actual playlist identifier (83FF64CDA043CBC4) is the same in each case, but the first call is prefixed with "PL".

The playlist itself is viewable at both

1.  [http://www.youtube.com/playlist?list=PL83FF64CDA043CBC4](http://www.youtube.com/playlist?list=PL83FF64CDA043CBC4)
2.  [http://www.youtube.com/playlist?list=83FF64CDA043CBC4](http://www.youtube.com/playlist?list=83FF64CDA043CBC4)

According to [this blog post](http://apiblog.youtube.com/2012/08/playlists-now-with-more-pl.html), the API should be *tolerant* of the leading "PL", but in this case it seems to demand it.

Anyone have some insight into the sudden change?

# java - 试图将 JLabel 置于 Paint 之上

> ID：13390613
> 
> 赞同：1
> 
> 时间：2012-11-15T02:15:41.477
> 
> 标签：java, swing, paint, jlabel, imageicon

一直在尝试创建一个基本上具有背景的程序（使用 Paint() 绘制），然后在其上方放置一个带有图像的标签。

继续将 JLabel 放在 Paint 下方...

有任何想法吗？

提前非常感谢。

* * *

```
public class GUI extends JFrame {

    JPanel menuBar = new JPanel();
    JButton button1 = new JButton("Press Me");
    JLayeredPane layeredPane = new JLayeredPane();
    private ImageIcon image1;
    private static JLabel label1;

    public GUI() {
        super("Add a profile");

        setLayout(null);

        try {
            image1 = new ImageIcon(getClass().getResource(
                    "Images/location.PNG"));
        } catch (Exception e) {
            System.out.println("Image not found!");
        }
        label1 = new JLabel(image1);
        label1.setBounds(new Rectangle(new Point(262, 94), label1.getPreferredSize()));
        label1.setLocation(1, 1);
        label1.setSize(114, 105);
        add(label1);
    }

    public void paint(Graphics g) {
        paintComponents(g);
        Graphics2D g2d = (Graphics2D) g;

        // Menu Bar
        g2d.setColor(Color.BLACK);
        g2d.drawRect(60, 93, 190, 373);
        g2d.setColor(Color.GRAY);
        g2d.fillRect(61, 94, 189, 372);

        // Background box
        g2d.setColor(Color.BLACK);
        g2d.drawRect(281, 106, 560, 360);
        g2d.setColor(Color.GRAY);
        g2d.fillRect(282, 107, 559, 359);
    }

    public static void main(String[] args) {
        GUI gui = new GUI();
        gui.setVisible(true);
        gui.setSize(900, 550);
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gui.setResizable(false);
        gui.setLocationRelativeTo(null);

    } 
```

## }

可悲的是无法让它工作，无论如何谢谢一堆哦，我没有看到你所做的图像！对不起！我现在看看

真的很感激这一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:35:53.747

从您的代码的外观来看，您正在尝试使用绘画来完成其他容器的工作。我建议，不要。

不要覆盖顶级`paint`容器（例如`JFrame`

相反，为您自己创建一个自定义组件（从类似的东西扩展`JPanel`）并使用它的`paintComponent`方法，然后将其添加到框架中。

在你的情况下，你可以改变组件的背景和边框，它会得到相同的结果。

**更新**

![在此处输入图像描述](../Images/8584c4330b6706bae803dcf880969b5f.png)

只需一些基本布局和几个组件，我就能够制作出这个......

```
public class BadPaint {

    public static void main(String[] args) {
        new BadPaint();
    }

    public BadPaint() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MenuPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MenuPane extends JPanel {

        public MenuPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weighty = 1;
            gbc.fill = GridBagConstraints.VERTICAL;
            gbc.insets = new Insets(10, 10, 10, 10);

            BackgroundPane left = new BackgroundPane();
            left.setLayout(new BorderLayout());
            JLabel label = new JLabel(" Menu ");
            label.setHorizontalAlignment(JLabel.CENTER);
            label.setVerticalAlignment(JLabel.CENTER);
            left.add(label);
            add(left, gbc);

            gbc.gridx++;
            gbc.weighty = 0;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.BOTH;
            gbc.insets = new Insets(40, 10, 40, 10);
            BackgroundPane right = new BackgroundPane();
            right.setLayout(new BorderLayout());
            label = new JLabel(" Content ");
            label.setHorizontalAlignment(JLabel.CENTER);
            label.setVerticalAlignment(JLabel.CENTER);
            right.add(label);
            add(right, gbc);

        }

    }

    public class BackgroundPane extends JPanel {

        public BackgroundPane() {
            setBackground(Color.GRAY);
            setBorder(new LineBorder(Color.BLACK));
        }

    }

} 
```

我建议您从通读中受益

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

# javascript - Javascript: Replace all P tags with Div (without any library)

> ID：13390614
> 
> 赞同：1
> 
> 时间：2012-11-15T02:15:55.503
> 
> 标签：javascript

Below is a code snippet

```
var pTags=document.getElementsByTagName('p');
for(i=0;i<pTags.length;i++)
{
    var p=pTags[i],  div=document.createElement('div');
    div.innerHTML='P tag replaced with a div tag';
    p.parentNode.replaceChild(div, p);
} 
```

It should replace all `P` tags with `Div` but it's not replacing all but some of them. The `red` ones ([fiddle](http://jsfiddle.net/eZNqn/)) are not replacing.

I don't need this but I want to know what is I'm doing wrong here ? So, my question is why not it's working in this way. Hope someone can tell me the fact.

Thanks for your effort!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:24:35.897

`getElementsByTagName`返回一个活动节点列表，因此每次替换节点时列表都会更改，因此您只想获取列表中的第一个节点并替换它，直到列表为空，请参阅[http://jsfiddle.net/mowglisanu/eZNqn/ 4/](http://jsfiddle.net/mowglisanu/eZNqn/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T15:46:49.190

单线方式;-)

首先，选择你想要的任何元素（在这种情况下，正文的所有内容）

```
var elem = document.getElementsByTagName('body')[0];
var target = elem.innerHTML; 
```

“线”

```
elem.innerHTML = target.replace(/(<div)/igm, '<p').replace(/<\/div>/igm, '</p>'); 
```

我希望这会有所帮助。[在此处查看实际操作](http://jsfiddle.net/mcurbelop/znX2v/2/)

# maven - 仅为特定子模块/项目执行 maven-release-plugin 部署步骤

> ID：13390619
> 
> 赞同：5
> 
> 时间：2012-11-15T02:16:56.803 元素
> 
> 标签：maven, nexus, pom.xml, maven-release-plugin, sonatype

我有一个 Maven 项目，其组织方式为：

我的项目

*   核心（父级 -> oss.sonatype.org）
*   包（父 -> MyProject）

MyProject 和 Package 用于将项目捆绑为专有部署方法（创建专门的 Zip）

**我想要做的是能够将核心项目部署到 OSS Sonatype Nexus Repo，以便通过其他项目中的 Maven 依赖项使用。**

“MyProject”连同其子项目（Core、Package）一起被检入 github。

我的问题是，当我执行 maven release:perform （在核心目录中）时，它会从 github 签出 MyProject，然后针对 Parent 的 pom 运行 maven deploy ——因为它是结帐根目录中的 pom。

我不想处理嵌套的 git repos；弄清楚如何在一个仓库中维护 MyProject 和 Package，在另一个仓库中维护 Core。

那么，我怎么能：

1.  告诉 maven-release-plugin（通过 oss.sonatype.org 父 pom 包含）仅针对核心项目执行。
2.  告诉 maven-release-plugin 跳过 MyProject 和 Package 项目上的所有部署操作。（我想我会更喜欢这个，因为如果它 maven-release-plugin 可以使我的 POM 版本保持同步）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:23:48.480

我认为如果你不释放父级，你就不能释放一个模块。

我检查了有关插件的文档，您可以释放父级，但我没有找到有关仅释放子级的信息。

见：[http ://maven.apache.org/maven-release/maven-release-plugin/faq.html#nonrecursive](http://maven.apache.org/maven-release/maven-release-plugin/faq.html#nonrecursive)

# c++ - 替代品

> ID：13390620
> 
> 赞同：6
> 
> 时间：2012-11-15T02:17:14.077
> 
> 标签：c++, visual-c++, c++11

我正在寻找`<ctime>`库的 C++11 版本。C ++ 11中是否包含这样的内容？

编辑：任何具有更多功能的东西都是完美的！

编辑 2：我希望将它与我正在制作的游戏一起使用，以便我可以跟踪总玩的时间。任何对我有帮助的东西都是我正在寻找的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T02:34:29.583

C++11 包含`<chrono>`头文件，它提供了不同类型的时钟（我将使用高分辨率时钟），它们具有`now`功能。您可以从中减去其中两个收到的时间，`now()`以获得它们之间的 s 总数`<unit>`（我将使用秒数）：

```
using clock = std::chrono::high_resolution_clock;
using unit = std::chrono::seconds;
std::chrono::time_point<clock> startTime = clock::now(); //get starting time

... //do whatever stuff you have to do

std::chrono::time_point<clock> thisTime = clock::now();
long long secondsElapsed = std::chrono::duration_cast<unit>(thisTime - startTime).count();

//now use secondsElapsed however you wish
//you can also use other units, such as milliseconds or nanoseconds 
```

但是请注意，除非时钟的成员是因为该成员意味着后续调用将提供比前一次调用更大的数字，`secondsElapsed`否则不能保证为正数。`is_steady``true``true``now()``now()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T02:47:00.807

中的许多函数`<ctime>`，尤其是`ctime`函数本身，都与将日期和时间*格式化*为字符串有关。

C++11 提供了一个新的 io-manipulator `std::put_time`，它确实取代了 C 风格的函数，并且完全兼容 C++ 的语言环境相关的特性。

`tm`具体来说，给定 C 样式格式的时间点：

```
std::time_t t = std::time(NULL);
std::tm tm = *std::localtime(&t); 
```

`std::put_time`如果特定于区域设置的格式参数，例如`%c`（特定于区域设置的日期/时间）、`%Ec`（特定于区域设置、扩展的日期/时间，例如日本的帝国年）或`%Z`（时区） ，则可以根据任何选定的区域设置进行打印用于：

```
std::cout.imbue(std::locale("ja_JP.utf8"));
std::cout << "ja_JP: " << std::put_time(&tm, "%c %Z") << '\n';
std::cout << "ja_JP: " << std::put_time(&tm, "%Ec %Z") << '\n'; 
```

这些调用打印如下：

```
2012年11月15日 11時49分04秒 JST     // first call
平成24年11月15日 10時49分05秒 JST   // second call 
```

另一个答案中提到的来自 的时间点检索函数`<chrono>`也可以`tm`使用该方法转换为结构，`to_time_t`然后与 一起使用`put_time`。这使得代码独立于任何 C 风格的函数调用，至少在表面上是这样：

```
using namespace std;
auto now = chrono::system_clock::now();

time_t now_c = chrono::system_clock::to_time_t(now);
cout << "Locale-specific time now: "
     << put_time(localtime(&now_c), "%c %Z") << '\n'; 
```

结合`<chrono>`持续时间类型，这为计算和打印日期和时间提供了极大的灵活性：

```
time_t now_c = chrono::system_clock::to_time_t(now - chrono::hours(48));
cout << "Locale-specific time on the day before yesterday: "
     << put_time(localtime(&now_c), "%c %Z") << '\n'; 
```

这些是上述所有函数调用所需的标头：

```
#include <iostream>
#include <iomanip>
#include <ctime>
#include <chrono> 
```

**可用性说明**我不确定 MSVC 和 Clang，但不幸的是，GCC 还没有提供该`std::put_time`功能：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54354) ://gcc.gnu.org/bugzilla/show_bug.cgi?id=54354 。

# ios - iOS Store Kit 重新购买

> ID：13390621
> 
> 赞同：0
> 
> 时间：2012-11-15T02:17:14.500
> 
> 标签：ios, storekit

我使用带有测试 itunesconnect 用户帐户的 Store Kit，它运行良好。现在，我想重复使用这个测试帐户或任何其他测试帐户来重新购买相同的产品。但是，该应用程序不允许重置购买状态。它告诉我已经购买了该产品，并且无法退出或做任何事情，以便重新购买以进行测试。我应该怎么做才能再次测试我的产品购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:42:30.737

您无法重置非消耗品的服务器端“已购买”状态。如果需要测试，您必须创建一个新的测试用户。

您可以重置客户端“已购买”状态，但这取决于您和您的实施。如果您要求 StoreKit 购买已经购买的商品，我相信您`SKPaymentTransactionObserver`会收到与购买新商品一样的消息，即使向用户显示的警报会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:22:39.770

您不必测试回购功能。iTunes 会根据您拥有的 IAP 类型（订阅/非订阅）自动处理此问题。但是，您可能希望通过在成功购买时将其记录在 NSUserDefaults 中来调整您的 UI 以表示重新购买而不是购买。

# jquery - 在 MVC3 中获取日期时间总是返回到控制器

> ID：13390622
> 
> 赞同：0
> 
> 时间：2012-11-15T02:17:23.267
> 
> 标签：jquery, asp.net-mvc-3, data-annotations

使用 MVC3 和 jQuery 插件 datepicker。

我可以看到日历，并且可以将日期设置为该字段。但是当我将模型发布回控制器时，我总是得到该属性的空值。它将该特定日期显示为无效日期。

这是我的模型。

```
[DataType(DataType.DateTime)]
        [DisplayName("PostTime")]
        [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
        public DateTime? PostTime { get; set; } 
```

我的一部分观点

```
 @using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
    <legend>BlogPost</legend>

    <div class="editor-label">
    @Html.LabelFor(model => model.PostTitle)
    </div>
    <div class="editor-field">
    @Html.EditorFor(model => model.PostTitle)
    @Html.ValidationMessageFor(model => model.PostTitle)
    </div>

    <div class="editor-label">
    @Html.LabelFor(model => model.PostTime)
    </div>
    <div class="editor-field">
    <span class="datepicker">
    @Html.EditorFor(model => model.PostTime)
    @Html.ValidationMessageFor(model => model.PostTime)
    </span>
    </div>

    <p>
    <input type="submit" value="Create" />
    </p>
    </fieldset>
}

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#PostTime").datepicker({
                    showOn: 'both',
                    buttonImage: "/content/img/calendar_icon.png"
                });
            });
        </script> 
```

控制器是

```
[HttpPost]
public ActionResult Create(BlogPost blogpost)
{
    if (ModelState.IsValid)
    {
        var db = new BlogPostContext();
        db.Add(blogpost);
        return RedirectToAction("Index");
    }
    return View(blogpost);
} 
```

可以有人我想念的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:08:12.760

至于收到错误说它不是有效日期，您需要指定日期选择器的格式：

```
 $(document).ready(function () {
            $("#PostTime").datepicker({
                showOn: 'both',
                dateFormat: 'dd/mm/yy',
                buttonImage: "/content/img/calendar_icon.png"
            });
        }); 
```

# wordpress - 该网站的侧边栏一直掉到页面底部 - Internet Explorer 9 中的问题

> ID：13390625
> 
> 赞同：1
> 
> 时间：2012-11-15T02:17:48.070
> 
> 标签：wordpress, internet-explorer, internet-explorer-9, sidebar

有问题的网站在 Chrome/Firefox 中看起来很棒，但在 IE9 中各种混乱。

我尝试将这行代码添加到 header.php 文件中。

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

我还检查了填充以查看是否导致问题......我找不到它在哪里。

我检查了我所有的插件，看看其中一个是否具有破坏性。事实并非如此。

我使用这个验证器 ( [http://validator.w3.org/](http://validator.w3.org/) ) 来查找代码中的错误，但根本没有太多错误。

我**不**知道如何解决这个问题。我真的很感激一些帮助。

# android - 从android获取区域设置

> ID：13390627
> 
> 赞同：1
> 
> 时间：2012-11-15T02:17:59.707
> 
> 标签：android

如何`regional setting`在android中获取用户的手机？因为我找不到相关信息如何在android中获取它。

例如。如果他现在的设置是在新加坡，就会得到新加坡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:25:25.377

查看 Locale 类以获取本地化/区域信息：

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)

前任。语言环境 defaultLocale = Locale.getDefault();

阅读标有“注意默认语言环境”的部分，当您使用的不仅仅是用户演示时，它可以帮助您避免 Locale 类中的 getDefault() 的一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:30:07.020

这可能会有所帮助

```
Context c = getBaseContext();
Resources r = c.getResources();  
Configuration config = r.getConfiguration();   
Locale currentLocale = config.locale; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:32:35.507

Activity 中最简单的方法是：

```
Locale l = Locale.getDefault();
Log.d("TAG", "Country: " + l.getDisplayCountry()); 
```

# iphone - 方法调用的参数太多，预期为 1，有 2

> ID：13390628
> 
> 赞同：1
> 
> 时间：2012-11-15T02:18:05.990
> 
> 标签：iphone, xcode, ios5, twitter

我`TWTweetComposeViewController`在我的应用程序中使用 iOS 5 legacy。出于某种原因，我收到了一个`"Too many arguments to method call, expected 1, have 2" error."`我曾尝试在类似问题中寻找答案的邮件，但到目前为止他们还没有帮助我。

这是代码：

```
TWTweetComposeViewController *tweetSheet =
                [[TWTweetComposeViewController alloc] init];
                [tweetSheet setInitialText:@"%@", [[_items objectAtIndex:indexPath.row] objectForKey:@"redirect_url"]];
                [self presentModalViewController:tweetSheet animated:YES]; 
```

有任何想法吗？提前致谢。

![截屏](../Images/68323a0e84039e2170aac1e30595f48d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T02:26:15.523

就像错误所说的那样，你有太多的论点。你需要使用 NSString 的 stringWithFormat 方法来创建你的动态字符串：

```
[tweetSheet setInitialText:[NSString stringWithFormat:@"%@", [[_items objectAtIndex:indexPath.row] objectForKey:@"redirect_url"]]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:20:14.370

您需要用来`[NSString stringWithFormat:@"%@",object];`制作格式字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T11:00:28.197

我收到此错误是因为 Xcode 自动完成*stringWith...*到`stringWithString:`而不是预期的`stringWithFormat:`. 花了一些时间找出问题所在，因此请检查您是否确实使用了正确的方法。

# jquery - Jquery-ui Sortable 具有不同的高度工作，但定位错误。有什么解决办法吗？

> ID：13390630
> 
> 赞同：0
> 
> 时间：2012-11-15T02:18:32.453
> 
> 标签：jquery, css, jquery-ui, css-float, jquery-ui-sortable

我已经有一个可以处理不同高度和宽度的工作 jquery-ui 可排序，但是当它像这样定位时问题就来了：

[http://jsfiddle.net/N52GP/7/](http://jsfiddle.net/N52GP/7/)

它应该是什么样子：

[http://i.imgur.com/NkDxn.jpg](http://i.imgur.com/NkDxn.jpg)

我知道这是一个 CSS 浮动问题，现在我已经测试和搜索了几个小时，但找不到任何解决方案。即使我将 Box 4 设置为 float: right 它仍然会显示在与 Box 3 相同的高度上。

请参阅 HTML / CSS 浮动问题中的代码：

```
<!DOCTYPE html>
<html>
<body>

    <style>
        .portlet {
            float: left;
            margin: 5px;
            background-color: #b5b5b5;
        }

        #box1, #box4 {
            width: 150px;
            height: 220px;
        }

        #box2, #box3 {
            width: 250px;
            height: 100px;
        }
    </style>

    <div style="float: left; width: 600px; padding: 10px;">

        <div id="box1" class="portlet">
            <div class="portlet-header">Box 1</div>
            <div class="portlet-content">Box Desc</div>
        </div>

        <div id="box2" class="portlet">
            <div class="portlet-header">Box 2</div>
            <div class="portlet-content">Box Desc</div>
        </div>

        <div id="box3" class="portlet">
            <div class="portlet-header">Box 3</div>
            <div class="portlet-content">Box Desc</div>
        </div>

        <div id="box4" class="portlet">
            <div class="portlet-header">Box 4</div>
            <div class="portlet-content">Box Desc</div>
        </div>

    </div>

</body>
</html> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:25:34.293

div 框不能并排放置在`#sortable`容器中。

你需要扩展容器，如果你真的必须使用浮动，你也需要包装`#box2`和`#box3``div`

尝试：

```
<div id="middle">
    <div id="box2" class="portlet">
        <div class="portlet-header">Box 2</div>
        <div class="portlet-content">Box Desc</div>
    </div>

    <div id="box3" class="portlet">
        <div class="portlet-header">Box 3</div>
        <div class="portlet-content">Box Desc</div>
    </div>
</div>

#middle {
    float:left; 
    width:258px;
} 
```

# java - 解析没有时区转换的日期

> ID：13390631
> 
> 赞同：15
> 
> 时间：2012-11-15T02:18:42.077
> 
> 标签：java, datetime, groovy, gremlin

我正在使用 groovy（确切地说是遍历图形数据库的 gremlin）。不幸的是，因为我使用的是 gremlin，所以我无法导入新类。

我有一些日期值希望转换为 Unix 时间戳。它们以 UTC 格式存储为：`2012-11-13 14:00:00:000`

我正在使用这个片段（在 groovy 中）解析它：

```
def newdate = new Date().parse("yyyy-M-d H:m:s:S", '2012-11-13 14:00:00:000') 
```

问题是它进行了时区转换，结果是：

```
Tue Nov 13 14:00:00 EST 2012 
```

然后，如果我使用 将其转换为时间戳`time()`，则将其转换为 UTC，然后生成时间戳。

如何在`new Date()`首次解析日期时不进行任何时区转换（并且假设日期为 UTC）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T02:27:08.417

以下是在 Java 中执行此操作的两种方法：

```
/*
 *  Add the TimeZone info to the end of the date:
 */

String dateString = "2012-11-13 14:00:00:000";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-d H:m:s:S Z");
Date theDate = sdf.parse(dateString + " UTC"); 
```

* * *

```
/*
 *  Use SimpleDateFormat.setTimeZone()
 */

String dateString = "2012-11-13 14:00:00:000";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-d H:m:s:S");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
Date theDate = sdf.parse(dateString); 
```

请注意*Date.parse()*已被弃用（所以我不推荐它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T14:54:27.497

我使用日历来避免时区转换。虽然我没有使用 new Date()，但结果是一样的。

```
String dateString = "2012-11-13 14:00:00:000";
Calendar calendar = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-d H:m:s:S");
calendar.setTime(sdf.parse(dateString));
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
Date date = calendar.getTime(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T02:22:33.403

Date class parse(String str) 从 JDK 1.1 中被弃用，尝试支持 TimeZone 和 Locale 设置的 SimpleDateFormat 类。

# java - 用什么骆驼 EIP 模式来表示 EOF？

> ID：13390635
> 
> 赞同：0
> 
> 时间：2012-11-15T02:19:15.363
> 
> 标签：java, integration, apache-camel, esb

我有一个场景，我通过将大型日志文件摄取到基于 Camel 的 ESB 来处理它。此总线上的第一站是一个处理器 -`LogTransformer`一个一个（实时）从日志文件中解析日志消息，并创建 XML 片段：

```
<log-record level="INFO" source="MyApp" .../> 
```

这些`<log-record/>`XML 片段中的每一个都被放入消息队列并被总线拾取。最终它在 MySQL 数据库中结束。

我有某些处理器，我只想在日志文件完全处理*后才*启动（所有日志记录都已转换为`<log-record/>`并入队，由总线处理并存储到 DB）。诸如报告生成器、BI 组件等之类的东西。这些处理器不应该在整个日志入队之前开始。

**Camel 自动向这些处理器指示它们可以启动的方式是什么？**

我能想到的最好办法是让我的`LogTransformer`处理器（解析日志记录、将它们转换为XML 并将它们排入队列的部分）在完成处理日志*后*`<log-record>`创建一个 EOF 日志记录。类似的东西。然后它像往常一样将此消息排入队列。*`<log-record eof="true">`*

 *当总线中的最后一个处理器（持久化`<log-record>`到 MySQL）遇到 EOF 日志记录时，它不会将其持久化，而是将其排入队列。

这些报告生成器、BI 组件等等待此队列上的消息启动。

这个解决方案似乎很复杂。我是 ESB 和 Camel 的新手，所以我想会有一个 EIP/处理器来处理这种情况，但我似乎找不到它。骆驼向导将如何构建此解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:34:34.137

看看 Splitter (http://camel.apache.org/splitter.html) 和 Aggregator (http://camel.apache.org/aggregator2.html)。聚合器可以使用 completionSize 来确定它拥有继续处理所需的所有片段。*

# autofac - 使用 AutoFac 手动调用属性注入

> ID：13390637
> 
> 赞同：4
> 
> 时间：2012-11-15T02:19:45.923
> 
> 标签：autofac

假设在程序开始时已经注册了所有依赖项。在程序的稍后阶段，如何使用 AutoFac 创建一个带有无参数构造函数的新对象并将注册的属性注入到对象中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T06:15:51.177

您可以在容器中注册您的对象，`PropertiesAutowired`然后在需要实例时使用 resolve：

```
ContainerBuilder builder = new ContainerBuilder();
// builder register other dependencies
builder.RegisterType<MyObject>().PropertiesAutowired();

var container = builder.Build();

var myObject = container.Resolve<MyObject>(); //the properties will be filled 
```

或者，如果您不想在容器中注册，您可以`InjectProperties`在现有实例上使用该方法：

```
ContainerBuilder builder = new ContainerBuilder();
// builder register other dependencies

var container = builder.Build();

var myObject = new MyObject();
container.InjectProperties(myObject); //the properties will be filled 
```

# javascript - 对 JavaScript 上下文感到困惑 - crm 2011 在线

> ID：13390641
> 
> 赞同：0
> 
> 时间：2012-11-15T02:20:25.390
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-online

我已经覆盖了案例解决按钮来调用我的自定义 JavaScript。我将调用此函数 custom_resolve_func()。这很好用。当我按下解决按钮时，custom_resolve_func() 被调用。

我有另一个附加到案例表单的 OnLoad 事件的函数。我将调用此函数 custom_onload_func()。它工作正常。当我加载表单时，会调用 custom_onload_func()。

custom_resolve_func() 和 custom_onload_func() 在同一个 JS webresource 中。

我的问题是如何让两个函数在运行时共享数据？

例如，在 custom_onload_func() 中，我为 JS webresource 设置了一个全局变量。当我按下解决按钮并调用 custom_resolve_func() 时，我读取了相同的变量，但它好像从未在 custom_onload_func() 中设置过。如果我在声明时给它一个初始值，这就是我在 custom_resolve_func() 中读取它时得到的值。

两个函数如何共享相同的上下文？我需要 custom_resolve_func() 能够以某种方式访问​​表单上下文...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:05:31.033

功能区在 IFrame 中加载，因此您无法从表单上加载的脚本访问在功能区中加载的脚本。此外，我相信您已经加载了两个脚本。

因此，我会尝试仅在表单上加载脚本并将模拟文件放入功能区命令定义中。

```
<JavaScriptFunction Library="mock.js" FunctionName="custom_resolve_func"> 
```

或者将变量存储在表单的隐藏字段中。

# google-app-engine - s~applicationid: 未捕获的应用程序失败

> ID：13390645
> 
> 赞同：0
> 
> 时间：2012-11-15T02:20:49.873
> 
> 标签：google-app-engine

我和一小群人正在使用远程 git 存储库来保存我们的 GAE 项目。其他人部署项目没有问题，但是每当我部署时，似乎我无法访问任何涉及 JSP 或 servlet 相关页面的页面。我留下了一个空白页和 html：

`<title>s~applicationid: uncaught application failure</title>`

这与我的 JSP 编译方式有关吗？由于我的同事部署没有问题，它必须是本地的，但我不知道从哪里开始这个问题。任何人都可以帮忙吗？

编辑：这是 GAE 管理面板给出的错误日志。[http://pastebin.com/mRddXgiz](http://pastebin.com/mRddXgiz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:32:30.413

从您的错误日志中，错误消息的关键部分可能是：

```
Unsupported major.minor version 51.0 
```

您看到这个是因为您使用 Java 7 进行编译，但应该使用 Java 6。

# javascript - jQuery - 没有得到元素：正确启用

> ID：13390647
> 
> 赞同：1
> 
> 时间：2012-11-15T02:20:54.897
> 
> 标签：javascript, jquery, ruby-on-rails-3

在我的表单中，我有两个 div（bench_stock_items 和 non_bench_stock_items）具有相同的字段和相同的 id。使用 jQuery，我根据在 client_id select 中选择的值禁用一个并启用另一个，该值不是 div 的一部分。我有一个函数可以根据在 media_id select 中选择的值显示/隐藏不同的表单，这是 div 的一部分。我的功能仅适用于加载为启用的第一个 div 中的选择，而不适用于加载禁用的第二个 div。我几乎尝试了一切。我能够找到元素：在第一个 div 中正确启用但在第二个 div 中没有。

Javascript：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#non_bench_stock_fields :input").removeAttr("disabled", true);
        $("#bench_stock_fields :input").attr("disabled", true);
        $("#artifact_client_id").change(function () {
            if ($("#artifact_client_id option:selected").text() == "Bench Stock") {
                $("#bench_stock_fields").slideDown("fast");
                $("#bench_stock_fields :input").removeAttr("disabled");
                $("#non_bench_stock_fields").slideUp("fast");
                $("#non_bench_stock_fields :input").attr("disabled", true);
            } else {
                $("#non_bench_stock_fields").slideDown("fast");
                $("#non_bench_stock_fields :input").removeAttr("disabled");
                $("#bench_stock_fields").slideUp("fast");
                $("#bench_stock_fields :input").attr("disabled", true);
            }
        });
        $("#artifact_media_id:enabled").change(function () {
            var enabled_media_id = null;
            enabled_media_id = $("#artifact_media_id:enabled");
            var enabled_evidence_type_id = null;
            enabled_evidence_type_id = $("#artifact_evidence_type_id:enabled");

            if ($(enabled_media_id).find('option:selected').text() !== "Please select") {
                $("#show_selected_media_fields").slideDown("fast");
                $("#show_selected_media_fields :input").removeAttr("disabled", true);
                $.post("/artifacts/show_selected_media_fields", {
                    media_type: $(enabled_media_id).find('option:selected').text(),
                    evidence_type_id: $(enabled_evidence_type_id).find('option:selected').val()
                }, function (data) {
                    $("#show_selected_media_fields").html(data);
                });
            } else {
                $("#show_selected_media_fields").slideUp("fast");
                $("#show_selected_media_fields :input").attr("disabled", true);
            }
            $('#printHere').html(enabled_media_id);

        });

        $("#artifact_evidence_type_id:enabled").change(function () {
            var enabled_evidence_type_id = null;
            enabled_evidence_type_id = $("#artifact_evidence_type_id:enabled");
            if ($(enabled_evidence_type_id).find('option:selected').text() == "Deliverable, (DC)") {
                $("#logical_items_form").slideDown("fast");
                $("#logical_items_form :input").removeAttr("disabled", true);
            } else {
                $("#logical_items_form").slideUp("fast");
                $("#logical_items_form :input").attr("disabled", true);
            }
        });

    }); 
```

我的红宝石视图html：

```
<div id="bench_stock_fields" class="hide">

                <li><%= f.label :evidence_number, :class => "required" %><%= f.text_field :evidence_number %></li>
                <li><%= f.label :evidence_type, :class => "required" %><%= f.collection_select(:evidence_type_id, EvidenceType.where("code='BS'"), :id, :name_and_code) %></li>     
                <li><%= f.label :media_id, :class => "required" %><%= f.collection_select(:media_id, Media.where("name = 'External Hard Drive' or name = 'Internal Hard Drive' or name = 'Thumb Drive'"), :id, :name) %></li>
                <li><%= f.label :received_location,:class => "required" %><%= select_tag(:current_location_id, options_from_collection_for_select(Location.where("location = 'Lab' and rack = 'N/A' and bin = 'Bench Stock'"), :id, :location_name)) %></li>        
</div>
<div id="non_bench_stock_fields" >
--- same fields as above... 
   blah... blah... blah... 
```

==================================================== ===========================

好的，我写了一个简化版本的代码，以便更容易理解。这是我的完整代码：

```
<html>                                                                  
 <head>  
<meta charset="utf-8"> 
 <script type="text/javascript" src="jquery.js"></script>          
<link rel="stylesheet" type="text/css" href="application.css"> 
 </head>                                                                 
 <body>                                                                  
  <script type="text/javascript">                                         
 $(document).ready(function() {
  $("#div_car :input").attr("disabled",true);
  $("#div_car").attr("disabled",true);  

    $("#decide").change(function(){
    if ($("#decide option:selected").text() == 'Car')             { 
              $("#div_car").slideDown("fast"); 
              $("#div_car").removeAttr("disabled");
              $("#div_car :input").removeAttr("disabled");
              $("#div_bus").slideUp("fast"); 
              $("#div_bus").attr("disabled",true);
              $("#div_bus :input").attr("disabled",true);
                } else { 
              $("#div_bus").slideDown("fast");
              $("#div_bus").removeAttr("disabled");
              $("#div_bus :input").removeAttr("disabled");
              $("#div_car").slideUp("fast");
              $("#div_car").attr("disabled",true);
              $("#div_car :input").attr("disabled",true);
              }     
    });

    $("#cars:enabled").change(function(){
    var enabled_select_id = $("#cars:enabled"); 
    $('#printHere').html(enabled_select_id);
    });

 });

</script> 

   <!-- we will add our HTML content here -->  

<div id="div_decide">
<select id = "decide" name="decide">
<option value="buss">Buss</option>
<option value="car">Car</option>
</select>
</div>   

<div id="div_car" class="hide">
<select id = "cars" name="cars">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat" selected="selected">Fiat</option>
<option value="audi">Audi</option>
</select>
</div>   
<div id="div_bus">
<select id = "cars" name="cars">
<option value="volvo selected="selected">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat">Fiat</option>
<option value="audi">Audi</option>
</select>
</div>
Enabled Select will print here <br/><br/>
    <span id="printHere"></span>   
 </body>                                                                 
 </html> 
```

我的 application.css 是：

```
.hide{ display:none;} 
```

基本上这是我需要做的：

我需要将 div_car 加载为禁用和隐藏。根据选择“决定”中选择的值，我需要用 div_car 切换 div_bus。根据 CURRENTLY ENABLED 中选择的值选择“汽车”，我需要显示一些东西......说打印元素。它仅适用于 div_bus 中的选择汽车，但在使用 div_car 切换时不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:17:31.137

我通过在 rails 中使用 html 选项为两个 collection_selects 设置不同的网络 ID 解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:22:57.977

这不是一个真正的答案......我有两个问题。

第一的。使用 :enabled psuedo 选择器进行更改有什么意义，如果它被禁用，您将无法更改它......真的没有意义......

其次，当我看到这样的函数时，我不禁想知道为什么你会想把事情复杂化......

```
 $("#artifact_evidence_type_id:enabled").change(function () {
        var enabled_evidence_type_id = null;
        enabled_evidence_type_id = $("#artifact_evidence_type_id:enabled");
        if ($(enabled_evidence_type_id).find('option:selected').text() == "Deliverable, (DC)") {
            $("#logical_items_form").slideDown("fast");
            $("#logical_items_form :input").removeAttr("disabled", true);
        } else {
            $("#logical_items_form").slideUp("fast");
            $("#logical_items_form :input").attr("disabled", true);
        }
    }); 
```

像这样写它似乎更符合你的理智......

```
 $("#artifact_evidence_type_id").change(function () {

        if ($(this).find('option:selected').text() == "Deliverable, (DC)") {

            $("#logical_items_form").slideDown("fast").find('input').attr("disabled", false);

        } else {

            $("#logical_items_form").slideUp("fast").find('input').attr("disabled", true);

        }
    }); 
```

# java - Swing 游戏布局问题

> ID：13390651
> 
> 赞同：0
> 
> 时间：2012-11-15T02:21:18.953
> 
> 标签：java, swing, layout-manager, jlayeredpane

我正在努力在分层窗格中实现游戏，但遇到了一些布局问题。出于某种原因，没有正确排列。最后我的框架顶部有一个空白区域，框架永远不会延伸到正确的尺寸以适合所有东西。我试过 frame.pack() 因为我以前做过（没有分层窗格），但这似乎也不起作用。

如果有人可以帮助我，我将不胜感激。我有一种感觉，我缺少一些小东西。

```
public class gameGUI extends JFrame{

//set up all the variables that will be used in the gameGUI
static int skyWidth = 1024;
static int skyHeight = 120;
static int sidebarWidth = 120;
static int sidebarHeight = 480;
static int boardWidth = 904;
static int boardHeight = 480;
private JLayeredPane pane = new JLayeredPane();
public static YardDriver thisDriver;
public static int getScreenWidth(){return boardWidth;}
public static int getScreenHeight(){return boardHeight;}

public JLayeredPane getPane(){
    return pane;
}

//Convert the width of the screen to work with the gui
public int convertX(int rainLoc,BufferedImage img){
    int x = rainLoc % 30;
    return ((boardWidth-img.getWidth())*x) / YardDriver.getScreenWidth();
}

//Convert the height of the screen to work with the gui
public int convertY(int rainLoc, BufferedImage img){
    int y = (rainLoc - (rainLoc % 30)) / 30;    
    return ((boardHeight-img.getHeight())*y) / YardDriver.getScreenWidth();
}   

//Convert the screen to the board
public static int convertStoB(Point screenLoc){
    int y = ((screenLoc.y - skyHeight) * YardDriver.getScreenHeight())/boardHeight;
    int x = ((screenLoc.x - sidebarWidth) * YardDriver.getScreenWidth())/boardWidth;
    return x + y*YardDriver.getScreenWidth();
}

private void loadAll() {

}

public gameGUI() {
    loadAll();

    JPanel timer = new JPanel();
    //place the image in a jlabel and set bounds
    timer.add(sky);
    //Set preferredsize, border, and set opaque
    timer.setPreferredSize(new Dimension(skyWidth,skyHeight));
    timer.setBounds(0, 0, skyWidth, skyHeight);
    timer.setOpaque(true);
    timer.setBorder(BorderFactory.createLineBorder(Color.BLACK,2));

    JPanel sidebar = new JPanel();
    sidebar.setBounds(0, skyHeight, sidebarWidth, sidebarHeight);
    JButton nativeOne = new JButton();
    JButton nativeTwo = new JButton();
    JButton nativeThree = new JButton();
    JButton exoticOne = new JButton();
    JButton exoticTwo = new JButton();
    JButton exoticThree = new JButton();
    //Set the preferredsize and set a border
    sidebar.setLayout(new GridLayout(6, 1));
    sidebar.setPreferredSize(new Dimension(sidebarWidth, sidebarHeight));
    //Add each button to the sidebar
    sidebar.add(nativeOne);
    sidebar.add(nativeTwo);
    sidebar.add(nativeThree);
    sidebar.add(exoticOne);
    sidebar.add(exoticTwo);
    sidebar.add(exoticThree);
    sidebar.setBorder(BorderFactory.createLineBorder(Color.BLACK,2));

    JPanel board = new gamePanel(this);
    board.setBounds(sidebarWidth, skyHeight, boardWidth, boardHeight);
    board.setPreferredSize(new Dimension(904, 480));
    board.setBorder(BorderFactory.createLineBorder(Color.BLACK,2));

    timer.setVisible(true);
    sidebar.setVisible(true);
    board.setVisible(true);

    pane.add(timer, new Integer(1));
    pane.add(sidebar, new Integer(1));
    pane.add(board, new Integer(1));
    pane.setBounds(0,0,1024, 600);

    setTitle("Storm Watch");
    setSize(1024, 600);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //Pack the frame and set it to visible
    setVisible(true);
    setContentPane(pane);

}
    public static void main(String[] args){

        //Create a new frame with the createAndShowGUI 
        JFrame frame = new gameGUI();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:41:57.667

您忘记设置 LayoutManager，请执行以下操作：

```
this.pane.setLayout(new BorderLayout());
this.pane.add(timer, BorderLayout.PAGE_START);
this.pane.add(sidebar, BorderLayout.LINE_START);
this.pane.add(board, BorderLayout.CENTER); 
```

# mysql - MySQL 查询到 XQuery

> ID：13390653
> 
> 赞同：1
> 
> 时间：2012-11-15T02:21:44.403
> 
> 标签：mysql, xml, xquery, xquery-sql

我正在尝试将以下 MySQL Query 等同于 XQuery

```
SELECT S.Classification, COUNT(S.Classification) AS "No. Students", AVG(S.GPA) AS "AVG
    Class. GPA"
FROM Student S
GROUP BY S.Classification
ORDER BY S.Classification ASC; 
```

这输出：http: [//i.stack.imgur.com/Iu0d4.png](http://i.stack.imgur.com/Iu0d4.png)

我的数据库如下所示：

```
CREATE TABLE 'Student' (
'StudentID' CHAR(9) NOT NULL,
'Classification' CHAR(10) NULL DEFAULT NULL,
'GPA` DOUBLE NULL DEFAULT NULL,
'MentorID' CHAR(9) NULL DEFAULT NULL,
'CreditHours' INT(11) NULL DEFAULT NULL,
PRIMARY KEY ('StudentID')
) 
```

在 XML 中：

```
<Document>
  <Table>
    <StudentID>118784412</StudentID>
    <Classification>Sophomore</Classification>
    <GPA>3.19</GPA>
    <MentorID>201586985</MentorID>
    <CreditHours>39</CreditHours>
  </Table>
</Document> 
```

我不确定如何在 xquery 中使用 count() 和 avg()。我从哪说起呢？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:43:53.983

您可以使用 XQuery 3.0 中定义的 group by 运算符轻松实现此目的。假设给定的 xml 在变量`$doc`中并且数据库的每一行都在另一个`<Table />`节点中，您可以这样做：

```
for $student in $doc/Table
let $classification := $student/Classification
group by $classification
order by $classification
return 
  <output>
    <Classification>{$classification}</Classification>
    <NoStudents>{count($student)}</NoStudents>
    <AvgGPA>{avg($student/GPA)}</AvgGPA>
  </output> 
```

有许多（优秀的）XQuery 处理器支持 XQuery 3.0，例如[BaseX](http://www.basex.org)、[eXist](http://exist-db.org/)和[Zorba](http://www.zorba-xquery.com/)

# maven - maven 包阶段

> ID：13390656
> 
> 赞同：0
> 
> 时间：2012-11-15T02:21:48.540
> 
> 标签：maven

我是 maven 新手，很高兴能对 maven 包阶段进行解释。我有一个名为 com-theta-gesture 的 maven 项目，其中包含三个 java 类。其中一个类中有 main 方法。当我运行 mvn package 命令时，会创建目标文件夹。下面是目标文件夹的结构

```
 target/
        |
        classes/
        |
        maven-archive/
        |
        generated-sources/
        |
        testclasses/
        |
        surefire_report/
        |
        com-theta-gesture-1.0-SNAPSHOT.jar 
```

在 classes 文件夹中是应用程序的三个已编译的 java 类。我的问题是，如果我要运行这个应用程序，我必须运行 com-theta-gesture-1.0-SNAPSHOT.jar 可执行 jar 还是必须运行 classes 文件夹中的主类。因为当我尝试以下命令时

```
C:\Users\FAISAL\Desktop\disaster\com-bbox-gesture\target>java com-bbox-gesture-1.0-SNAPSHOT.jar 
```

我收到以下错误

```
Error: Could not find or load main class com-bbox-gesture-1.0-SNAPSHOT.jar 
```

希望能找到解释。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:50:44.643

如果您只是构建一个独立的 JAR 文件，则无需使用程序集插件。

相反，您可以简单地配置项目中已经使用的 maven-jar-plugin，如下所示：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      ...
      <configuration>
        <archive>
          <manifest>
            <addClasspath>true</addClasspath>
            <mainClass>fully.qualified.MainClass</mainClass>
          </manifest>
        </archive>
      </configuration>
      ...
    </plugin>
  </plugins>
</build> 
```

`addClasspath`如果它是没有依赖关系的独立 JAR，则不需要。

可以通过转到[maven-jar-plugin](http://maven.apache.org/plugins/maven-jar-plugin/)的文档并单击左侧导航中的[创建可执行 JAR 文件来找到上面的代码片段。](http://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:57:01.640

谷歌“maven self executable jar”会给你答案

[http://maven.apache.org/plugins/maven-assembly-plugin/usage.html](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)

简而言之，JAR 不能自动执行。您需要将 Main Class 信息放在 MANIFEST 文件中。引用的链接描述了 Maven 中设置此类信息的正常方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:14:25.070

正如 Adrian Shum 解释的那样，该 jar 默认不是可执行 jar。

但是，如果您只想运行 jar 但不创建可执行 jar，则可以使用[`exec-maven-plugin`](http://mojo.codehaus.org/exec-maven-plugin/).

这是一个包含以下内容的小型 pom 文件`exec-maven-plugin`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.acne</groupId>
    <artifactId>app</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <mainClass>com.acne.App</mainClass>
        <argument/>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>${mainClass}</mainClass>
                    <arguments>
                        <argument>${argument}</argument>
                    </arguments>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

使用这个 pom，您可以执行以下操作：

```
mvn package exec:java 
```

您的程序将被打包然后执行。

使用定义的属性，您可以轻松更改主类并添加参数：

```
mvn exec:java -DmainClass=com.acne.Calculator -Dargument=100 
```

# java - 处理“自定义”（未知）Java 类的最佳方法

> ID：13390657
> 
> 赞同：0
> 
> 时间：2012-11-15T02:22:01.920
> 
> 标签：java

我正在为 Java 实施一种在线编程竞赛。这个想法是比赛的参与者为应用程序编写一个控制器并将其发送到比赛服务器。该自定义控制器必须从 API 的基类派生。

好的，所以所有参与者都可以编写自己的控制器类，可能还包括其他自定义类，并且由于控制器的主类是从API的（抽象）基类派生的，服务器上的应用程序可以轻松调用子的特定方法类（即自定义控制器）以一定的间隔来控制应用程序。

我现在的问题是：您对我应该如何从 API 的角度处理这种情况有什么建议，以便它允许一种方便的方式来动态加载自定义控制器实现？

我要避免的是参与者需要将 API jar 文件包含到他们的 Java 项目中（例如在 Eclipse 中），然后编写他们的控制器类，再次将所有内容放入一个可执行的 jar 中，然后将其上传到比赛服务器。我绝对不想在服务器上执行完全自定义的应用程序。

我宁愿让参与者只上传他们的自定义控制器类。然后在服务器上这个类应该被自动加载并作为应用程序的一部分。我基本上在这里看到两个选项：

1.  将编译好的.class文件上传到服务器；或者
2.  上传Java源代码文件，然后在服务器上编译

您会建议这两个选项中的哪一个，为什么？
或者：你有其他更好的选择吗？

此外，我应该如何处理多个类的上传？如果可能的话，我希望允许参与者在主控制器类旁边编写额外的实用程序类。

提前感谢您的所有想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:04:50.323

Web 服务器、Eclipse 和其他平台使用的模式是通过指定其模式来指定部署描述符（通常是 XML 文件）。在您的情况下，部署描述符将识别 jar 文件的名称（通常与部署描述符在同一目录中）和 Java 类的完全限定名称（在本例中为自定义控制器）。

您编写一个读取部署描述符的程序，以发现 jar 文件的名称（您通过类加载器访问）和客户控制器的名称（您使用类加载器加载）。

这使您可以接收任意数量的条目，每个条目都包含在自己的目录中。

您甚至可以通过让部署描述符成为 jar 本身中具有明确名称的文件来获得幻想，从而使 jar 成为一个完全包含的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:53:55.063

首先，让开发人员在他们的 Eclipse 项目中包含 API jar 并不意味着您需要将其作为完整的应用程序运行。实际上，您应该将 API jar 提供给开发人员。但是，开发人员应该为您提供一个只包含他们自己开发的类的 JAR。

我建议不要采取“接收源代码并在服务器上编译”的方法。它只是使情况不必要地复杂化。

在您的服务器收到 JAR 后，您可以简单地创建相应的类加载器来加载它们的代码。

下一个问题是：你怎么知道从他们的 JAR 中加载哪个类？

有很多方法可以做到这一点，这里我建议两种最简单的方法：

1）与@ChrisGerken 建议的类似，有一个“部署描述符”。在简化视图中，部署描述符只是一个具有预定义格式的文本文件，位于预定义的位置。您的代码可以从提供的 JAR 中读取此文件，并且您可以要求开发人员将类名（其实现类的）放入描述符中，您可以通过反射轻松实例化他们的类。

2）另一种方法类似于 SLF4J 如何加载他们的适配器：开发人员应该在预定义的包中使用预定义的类名来实现他们的实现。您可以通过反射轻松创建实现类，并且省去了读取描述符文件的步骤。但是你失去了灵活性。

两种方式都应该有效。选择一个适合您需要的（我建议先选择 2，您可以稍后添加对 1 的支持）

# ruby-on-rails - Rails has_many：为什么 create_model 不起作用？

> ID：13390665
> 
> 赞同：0
> 
> 时间：2012-11-15T02:22:48.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many

我想我在这里遗漏了一些简单的东西......但无法弄清楚。

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me
  has_many :events
end

class Event < ActiveRecord::Base
  attr_accessible :start, :end, :all_day, :url
  belongs_to :user
end

u1 = User.create name: "Bob", email: "bob@what.com", password: "asdfasdf"
u1.create_event(start: 3.days.from_now) 
```

-->

```
undefined method `create_event' for #<User:0x007f918cbbf7b8> 
```

然而，

```
u1.events << Event.create!(start: 3.days.from_now) 
```

作品！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T05:45:45.327

您已定义`has_many`关联：

```
has_many :events 
```

所以，如果你想创建对象，你可以使用这些方法：

```
# create new object, but not insert to database
u1.events.build(...)

# create new object and auto call `save` method to insert to database
u1.events.create(...) 
```

您使用，当您定义关联`u1.create_event`时，这将更正：`has_one`

```
has_one :event 
```

因此，您将拥有这些方法来创建对象：

```
# create new object, but not insert to database
u1.build_event(...)

# create new object and auto call `save` method to insert to database
u1.create_event(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:37:30.293

看不到在用户上定义的 create_event。你也可以使用

```
u1.events.build(:start => 3.days.from_now)
u1.save 
```

很着迷地看到

```
u1.events << Event.create!(start: 3.days.from_now) 
```

作品。虽然，我确实认为它有点迟钝，对于代码的普通读者来说可能不会立即清楚。

# c# - 将参数传递给 BackGroundWorker

> ID：13390667
> 
> 赞同：0
> 
> 时间：2012-11-15T02:22:50.190
> 
> 标签：c#, backgroundworker

我有以下类型的 3 个列表：

1.  文件夹名称：字符串
2.  FTP计数：整数
3.  预期计数：整数

所有都相互关联（基于它们在列表中的索引），我想将它们作为参数传递给`BackGroundWorker`它，在增加 FTPcount 和 Expectedcount 的同时读取 folderName。

我怎样才能通过它们（通过引用？），以便在每个完成执行后我能够看到增量？

```
 List<string> folderName = new List<string>();
        List<int> Expectedcount = new List<int>();
        List<int> FTPcount = new List<int>();

        foreach (string folder in Properties.Settings.Default.Folders)
        {
            BackgroundWorker bg = new BackgroundWorker();

            bGs.Add(bg);
            Expectedcount.Add(new int());
            FTPcount.Add(new int());
            folderName.Add(folder);

            bg.DoWork += new DoWorkEventHandler(Process_Instiution);
            bg.RunWorkerAsync(new { folderName = folder, Expected = Expectedcount[Expectedcount.Count - 1] as object, FTP = FTPcount[FTPcount.Count - 1] as object });
        }

        while (true)
        {
            bool IsBusy = false;
            foreach (BackgroundWorker bg in bGs)
                if (bg.IsBusy)
                {
                    IsBusy = true;
                    break;
                }

            if (IsBusy)
                Application.DoEvents();
            else
                break;
        }
        //Code to read the various List and see how many files were expected and how many were FTPed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:39:29.127

使用指定参数的[DoWork(Object data) 方法](http://msdn.microsoft.com/en-us/library/f00zz5b2.aspx)。[您将不得不强制转换并从args Argument Property](http://msdn.microsoft.com/en-us/library/system.componentmodel.doworkeventargs.argument.aspx)中检索它。

我要么创建一个对象包装器来传递数据，要么使用匿名类型。

# sql - 如何使用sql查询格式化数据

> ID：13390670
> 
> 赞同：0
> 
> 时间：2012-11-15T02:23:03.620
> 
> 标签：sql, sql-server-2008

我有一个名为“客户”的表，如下所示

```
ID         NAME
1001       MATHEW
1002       THOMAS
1003       ALEX
1004       ALBY 
```

我需要使用 sql 查询在单个列中查看类似下面的数组的输出

输出如下

```
FORMAT_DATA
1001:MATHEW|1002:THOMAS|1003:ALEX|1004:ALBY| 
```

我如何在 sl 查询中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:58:49.637

您可以使用 FOR XML

**查询**：

```
select
(
  select RIGHT(ID,10) + ':' + NAME + '|'
  from Customer
   for xml path(''), type
).value('.','nvarchar(max)') DATA_FORMAT; 
```

**资料**：

```
CREATE TABLE Customer (
    ID int, NAME varchar(20));
INSERT Customer VALUES
    (1001,       'MATHEW'),
    (1002,       'THOMAS'),
    (1003,       'ALEX'),
    (1004,       'ALBY'); 
```

**[结果](http://sqlfiddle.com/#!6/563a6/3/0)**：

```
|                                  DATA_FORMAT |
------------------------------------------------
| 1001:MATHEW|1002:THOMAS|1003:ALEX|1004:ALBY| | 
```

# c# - 父对象的 WPF 中的数据绑定

> ID：13390671
> 
> 赞同：1
> 
> 时间：2012-11-15T02:23:06.373
> 
> 标签：c#, wpf, data-binding, mvvm, binding

我有一个 TreeView 我正在填充并向每个项目添加一个 ContextMenu。问题是在我的 ViewModel 中，TreeView ItemSource 绑定到 ViewModel 本身的一个属性。当我尝试再次引用 ViewModel 上的某些属性时，我似乎无法让它工作。

```
<TreeView Grid.ColumnSpan="1" Grid.Row="1" HorizontalAlignment="Stretch" ItemsSource="{Binding ModelItems}" SelectedTreeItem="{Binding SelectedItem, Mode=TwoWay}" VerticalAlignment="Stretch" Grid.RowSpan="3" Margin="5">
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate ItemsSource="{Binding Models}">
        <TextBlock Text="{Binding Header, Mode=TwoWay}"  ToolTip="{Binding Tooltip, Mode=TwoWay}">
            <TextBlock.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Server" Visibility="{Binding Path=IsServerVisible}">
                        <MenuItem Header="Add" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Windows:MainWindow}}, Path=ViewModel:ViewModel.AddServerCommand}"/>
                        <MenuItem Header="Edit" />
                        <MenuItem Header="Delete" />
                    </MenuItem>
                    <MenuItem Header="Config" Visibility="{Binding Path=IsConfigVisible}">
                        <MenuItem Header="Fetch" />
                        <MenuItem Header="Edit" />
                        <MenuItem Header="Save" />
                    </MenuItem>     
                </ContextMenu>
            </TextBlock.ContextMenu>
        </TextBlock>
    </HierarchicalDataTemplate>                
</TreeView.ItemTemplate> 
```

StackOverflow 上的前一篇文章指出了使用 RelativeSource 正确绑定到 MainWindow 上的 ViewModel 的方向。但是，当我运行该应用程序时，该命令不起作用，并且“输出”窗口没有生成任何我可以看到的绑定或 xaml 错误。

基本上可见性绑定有效，因为这些属性存在于“模型”项目上。但是，我希望将所有内容都移至 ViewModel，尤其是 Command。

谁能发现我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T06:16:28.883

这里要记住的关键是**上下文菜单不是可视化树的一部分**。

因此，它们不会继承与它们所属的用于绑定的控件相同的源。处理这个问题的方法是绑定到`placement target`ContextMenu 本身。但是，由于您想在 ViewModel 类中为 Command 绑定它，所以`DataContext in Tag`将 TextBlock 放置并在您的命令绑定中使用，如下所示 -

```
<HierarchicalDataTemplate ItemsSource="{Binding Models}">
    <TextBlock Text="{Binding Header}"
               Tag="{Binding DataContext, RelativeSource=
               {RelativeSource Mode=FindAncestor, AncestorType=Window}}">
         <TextBlock.ContextMenu>
              <ContextMenu>
                  <MenuItem Header="Server" Command="{Binding 
                            PlacementTarget.Tag.AddServerCommand,
                            RelativeSource={RelativeSource Mode=FindAncestor, 
                            AncestorType=ContextMenu}}"/>
               </ContextMenu>
          </TextBlock.ContextMenu>
      </TextBlock>
</HierarchicalDataTemplate> 
```

用于与上述类似的其他绑定，它将按照您的意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:25:41.033

代替

```
<MenuItem Header="Add" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Windows:MainWindow}}, Path=ViewModel:ViewModel.AddServerCommand}"/> 
```

尝试

```
<MenuItem Header="Add" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Windows:MainWindow}}, Path=DataContext.AddServerCommand}"/> 
```

你的 ViewModel 不是你的 DataContext 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:38:42.950

因为您没有发布完整的 .xaml，所以让我们使用树视图的数据上下文。因为 RelativeSource 让我们可以访问 TreeView，所以您需要在 Binding Path 中使用 DataContext，因为这是对您的 ViewModel 的引用。

```
Command="{Binding Path="DataContext.AddServerCommand" RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TreeView}}}" 
```

# php - MongoDB 选择排序问题

> ID：13390673
> 
> 赞同：3
> 
> 时间：2012-11-15T02:23:37.120
> 
> 标签：php, android, mysql, sql, mongodb

我的问题是我想做一个数据库查找（选择）witz 一个分类。^^

在我的代码中看起来像：

```
$return = $db->selectCollection( $category )->find(array("time" > $time_lastweek))->sort(array("rating/count_raitings" => 1,"count_raitings" => 1))->limit(10); 
```

我以前在 SQL (PDO) 中这样做过，如下所示：

```
$last_week = $dbh->prepare('SELECT * FROM '.$category.' WHERE time > :zeit ORDER BY rating/count_raitings ASC, count_raitings ASC LIMIT 10');
        $last_week->execute(array(':zeit' => $time_lastweek));
        $return = $last_week->fetchAll(PDO::FETCH_CLASS); 
```

请任何人都可以帮助我。MongoDB 的东西对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:13:01.913

以下是如何使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)在 shell 中执行此操作（应该可以直接转换为 PHP）：

```
db.category.aggregate([
    // Filter the docs to those where time > time_lastweek
    { $match: {time: {$gt: time_lastweek}}},

    // Identify what to include from each doc, adding a computed field for the division
    { $project: {
        time: 1,
        rating: 1,
        count_raitings: 1,
        div_val: {$divide: ['$rating', '$count_raitings']}
    } },

    // Sort the results
    { $sort: {div_val: 1, count_raitings: 1}},

    // Limit to the top 10
    { $limit: 10 }
]) 
```

# c# - 来自 WP7 应用程序的帖子是一个空数组

> ID：13390675
> 
> 赞同：2
> 
> 时间：2012-11-15T02:23:50.297
> 
> 标签：c#, php, windows-phone-7, post

我有以下代码用于处理 WP7 下的简单帖子：

```
private void goto_login(object sender, RoutedEventArgs e)
{
   WebClient webClient = new WebClient();
   webClient.Headers["Content-Type"] = "text/xml";
   var uri = new Uri("http://example.com/wp_login", UriKind.Absolute);
   StringBuilder postData = new StringBuilder();
   postData.AppendFormat("{0}={1}", "username", HttpUtility.UrlEncode(username_box.Text));
   postData.AppendFormat("&{0}={1}", "password", HttpUtility.UrlEncode(password_box.Password));
   webClient.Headers[HttpRequestHeader.ContentLength] = postData.Length.ToString();
   webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(webClient_UploadStringCompleted);
   webClient.UploadProgressChanged += webClient_UploadProgressChanged;
   webClient.UploadStringAsync(uri, "POST", postData.ToString());
}

void webClient_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
   Debug.WriteLine("result: "+e.Result);
}

void webClient_UploadProgressChanged(object sender, UploadProgressChangedEventArgs e)
{
   Debug.WriteLine(string.Format("Progress: {0} ", e.ProgressPercentage));
} 
```

在 PHP 端，脚本只是这样做：

```
var_dump($_POST); 
```

这样做，我总是从服务器得到一个空数组。如果有任何区别，我将在模拟器而不是设备上运行它。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:14:40.610

如果有人碰巧通过这个问题寻找答案，这就是问题所在：

```
webClient.Headers["Content-Type"] = "text/xml"; 
```

应改为：

```
webClient.Headers["Content-Type"] = "application/x-www-form-urlencoded"; 
```

# css - CSS 和嵌套表格 TD 宽度在网格上垂直对齐

> ID：13390680
> 
> 赞同：1
> 
> 时间：2012-11-15T02:24:06.660
> 
> 标签：css, vertical-alignment, css-tables

我正在尝试将表格数据列对齐以具有相同的宽度，即使它们是嵌套的......所以我认为固定宽度将在 CSS 中解决它我适用于每个 TABLE TR TD:nthclild(X) 不同的宽度..是的，它适用于萤火虫所有这些......但是......

出于某种原因......它没有像期望的那样显示......（见截图），所有的都是垂直未对齐的：

![在此处输入图像描述](../Images/d59ff3c082d2721bf33087ae88406530.png)

我尝试了不同的宽度..我只是对这个很生气，因为我不知道该怎么处理它......

我将附上完整的 zip 文件以拥有所有 css... 我可以使用 CSS3 和 Jquery 以及最新的浏览器... 不关心 IE 和其他东西

有谁知道如何做到这一点？我没主意了

这是带有 css 的整个页面， [（此处为 zip 链接）](http://usamicasa.com/Archive.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T20:25:10.213

在这些不相关的问题中，使用`div`with`display:inline-block`强制垂直对齐：

*   [如何在 div 内垂直居中 <span>？](https://stackoverflow.com/questions/4357315/how-to-vertically-center-a-span-inside-a-div/11161968#11161968)
*   [如何在指定容器中均匀且完全地拉伸固定数量的水平导航项](https://stackoverflow.com/questions/5060923/how-to-stretch-html-css-horizontal-navigation-items-evenly-and-fully-across-a/14187847#14187847)

# java - android java 将时间戳 2012-11-13T18:38:30Z 转换为时间前

> ID：13390682
> 
> 赞同：0
> 
> 时间：2012-11-15T02:24:19.390
> 
> 标签：java, android, timestamp

当我调用 youtube API 时，它会返回以下时间戳：

```
2012-11-13T18:38:30Z 
```

我需要根据当前时间和上述时间戳计算“时间前”。因此，使用上面的时间戳和当前时间，我应该得到 6 天前等信息。

我需要在 android 中转换它，所以任何 android 或 java 答案都可以提供帮助。

似乎有一个计算时间的函数，但您需要先将 2012-11-13T18:38:30Z 转换为毫秒或秒，或其他

我的问题是，在 java 中，你如何将 2012-11-13T18:38:30Z 转换为其他可以给我几秒钟、几天或其他时间的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:31:52.397

使用 SimpleDateFormat 类创建 Date 对象，然后 getTime() 以毫秒为单位获取它。

试试谷歌，你会得到很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:33:24.813

你的意思是从日期到长的转换？

这可能会有所帮助

[http://www.roseindia.net/java/java-conversion/DateToLong.shtml](http://www.roseindia.net/java/java-conversion/DateToLong.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:33:32.337

您不能将其转换为**毫秒**，它仅指定为**second**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:27:28.967

使用此模式解析您的时间戳。

`yyyy-MM-dd'T'HH:mm:ssZ`

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
java.util.Date parsedTimeStamp = format.parse("2012-11-13T18:38:30Z");
long videoTime = parsedTimeStamp.getTime(); 
```

我已经告诉过你第一部分，不幸的是，我的时间很短，所以接下来的步骤你自己来做：（我稍后会添加代码。） `videoTime`会给你以毫秒为单位的视频时间。您可以使用 `long systemTime = System.currentTimeMillis()/1000`. ~~将这两者相减，并将减法的结果转换为差值。~~

```
Calender c1 = Calender.getInstanec().setTime(new Date(videoTime));
Calender c2 = Calender.getInstanec().setTime(new Date(systemTime)); 
```

使用此日期创建两个日历，并使用日历方法，您会发现日期之间的日期和月份之间的差异。

# c# - ASP.NET - SQL - 检索“包含”对象

> ID：13390685
> 
> 赞同：0
> 
> 时间：2012-11-15T02:24:39.643
> 
> 标签：c#, asp.net, sql, linq

所以我有 2 张桌子`Comments`和`Students`. 每条评论都有一个学生： `Comment.StudentId`

我正在使用 POCO 生成的类，当我进行如下查询时，它似乎给了我评论类中的整个 Student 对象：

```
var query =
    from comment in context.Comments
    where comment.StudentId == properId
    orderby comment.Created
    select comment; 
```

所以我可以像这样访问学生的财产`comment.Student.Name`

但是，当我复制结果（`query.ToList()`以在方法外部使用时，它给了我一个错误，说 ObjectContext 实例已被处置。

如何从对象中包含的对象中检索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:29:27.910

在 .ToList() 之前添加 .Include("Student")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:37:08.600

请记住，Linq 使用`IEnumerable`，它会延迟查询的执行，直到您尝试迭代结果（就像您通过调用一样`.ToList()`）。如果您`.ToList()`按照您所说的那样调用“方法之外”，那么您很可能正在处理上下文，这意味着查询对象不再可行。

一个快速而肮脏的技巧是确保在处理上下文之前执行一次查询：

```
var query =
    (from comment in context.Comments
    where comment.StudentId == properId
    orderby comment.Created
    select comment).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T03:20:49.623

在退出包含 dbcontext 的方法之前，您必须调用 .ToList()。这将调用数据库并填写您的 Comment 类。否则，当您尝试在该方法之外“从对象中包含的对象中检索数据”并且尚未加载它们时，您将看到 DbContext 已被释放。这是因为 EF 正在尝试为这些项目再次“加载”或“调用数据库”。当然，由于您现在不在包含上下文的方法之外，因此 EF 无法加载它们。您应该阅读我认为默认打开的 EF 的“延迟加载”功能。

您可能想要创建一个只返回完全加载的 Comment 对象的方法。像这样的东西：

```
public class YourDbAccessClass {
    public IEnumerable<Comment> GetCommentsByStudentId(int id) {
        using (YourContextClass context = new YourContextClass()) {
            // Eager load Student with the .Include() method.
            var query = from comment in context.Comments.Include("Student")
                        where comment.StudentId == id
                        orderby comment.Created
                        select comment;

            return query.ToList();
        }
    }
} 
```

然后在您的调用代码中：

```
protected void ...some method on your view or asp page {
    YourDbAccessClass db = new YourDbAccessClass();
    var comments = db.GetCommentsByStudentId(yourIdVariableHere);

    // Now you can loop through those items without dbcontext.
    // Response.Write is probably a bad example, but you probably get the gist here.
    foreach(var comment in comments) {
        Response.Write("<li>" + comment.Student.Name + "</li>");
    }
} 
```

# sql - SSAS Cube excel数据透视表显示为列表而不是组

> ID：13390688
> 
> 赞同：0
> 
> 时间：2012-11-15T02:24:49.257
> 
> 标签：sql, excel, pivot, ssas, cube

如何创建详细列表报告（不是汇总/分组报告）。

因此，例如，在列表中显示所有值，而不是将其组合在一起并展开它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:29:29.500

在 SSAS 中创建一个操作以钻取到详细信息列表。

这可能有助于[钻取](http://www.simple-talk.com/content/print.aspx?article=981)

# java - 如何从 AsynchronousSocketChannel 反序列化 Serializable 对象

> ID：13390694
> 
> 赞同：0
> 
> 时间：2012-11-15T02:25:47.803
> 
> 标签：java, serialization, nio, objectinputstream, nio2

要执行反序列化，我需要一个`ObjectInputStream`. 但是我们只使用`AsynchronousSocketChannel`，它不能转换为`ObjectInputStream`。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:29:56.607

您可以转换`AsynchronousSocketChannel`为`InputStream`by `Channels.newInputStream(channel)`。

# android - 无法创建/添加帐户@emulated android 设备

> ID：13390697
> 
> 赞同：2
> 
> 时间：2012-11-15T02:25:53.623
> 
> 标签：android, sync, account, device-emulation

我以前从未使用过 android，但我真的很想尝试，所以到目前为止我安装了 eclipse 和 sdk。我设法使用果冻豆创建了一个虚拟设备，它似乎工作正常。我可以浏览互联网等。

现在我想从 google playstore 在模拟器上安装一些应用程序，但我需要连接或同步我的设备。我发现很多帖子如何做到这一点。显然我只需要转到模拟设备的设置并添加我的帐户。

问题是，我就是无法添加帐户。每次我点击“添加帐户”时都没有任何反应，所以我根本无法添加任何东西。与此相关的大多数问题都与一些错误消息等有关，但我什至没有那么远。

应该还有类似帐户和同步@“个人”的东西 - 这不会显示在模拟设备上。只有定位服务、安全、语言和输入、备份和重置。

也许有人可以解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:47:02.877

我相信您很可能已经在模拟器上安装了 Android 4.1.2 映像。您将需要尝试使用 Google API (Google Inc) - API 级别 16，它可以让您访问添加帐户。

# python - 用pythons标准库解析html？还是手动“安装”一个模块？

> ID：13390698
> 
> 赞同：0
> 
> 时间：2012-11-15T02:25:58.127
> 
> 标签：python, ssh, hosting

我一直使用漂亮的汤和 lxml.html 来解析 python 中的 html，但现在我面临着编写一个仅在标准库上运行的脚本。下一个最好的模块/技术是什么？

我准备接受它会比较差，即使我会失去使用 CSS 选择器的能力（哭泣！）问题是我需要它在任何旧的网络主机上运行，​​而他们只有标准库。

或者，我可以以某种方式手动安装 lxml 和 lxml.html 模块吗？即复制 /usr/share/pyshared/lxml 文件夹到我的服务器并使用 sys.path.insert 让我的脚本看到它？这很难看，但只要重写我的代码来解析没有两个事实上的标准库的 html 就行了！

我还没有尝试过，但我怀疑你在共享托管服务器上获得的 shell 是否允许我以更传统的方式安装 python 模块：使用“python setup.py install”或 pip 但如果你知道，请告诉我知道。

干杯，

罗杰 - 伦敦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:28:02.627

试试[virtualenv](http://www.virtualenv.org/)，你可以在任何你喜欢的地方安装包。

```
cd ~
wget https://raw.github.com/pypa/virtualenv/master/virtualenv.py
python virtualenv.py newenv
cd newenv
source bin/activate
pip install lxml 
```

# symfony - 使用 symfony2 是否可以使用 constraintValidator 服务来验证属性

> ID：13390703
> 
> 赞同：3
> 
> 时间：2012-11-15T02:26:29.587
> 
> 标签：symfony, validation, constraints, custom-validators

我遵循了以下[Symfony2 食谱教程](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html)，但我不断收到错误消息

`constraint myContraintClass cannot be put on properties or getters`

在validation.yml 我有

```
Core\Entity\Activity:
  properties:
    maxTotalParticipant:
      - Application\ActivityBundle\Validator\ActivityMaxTotalParticipant: ~ 
```

这是我的约束

```
<?php
namespace Application\ActivityBundle\Validator;
use Symfony\Component\Validator\Constraint;
/**
 * @Annotation
 */
class ActivityMaxTotalParticipant extends Constraint
{
  public $message = 'trigger error';

  public function validatedBy() {
    return 'activity_max_total_participant_validator';
  }

  public function getTargets() {
    return self::CLASS_CONSTRAINT;
  }

  public function getMessage() {
    return $this->message;
  }
} 
```

和我的约束验证器

```
<?php 
 namespace Application\ActivityBundle\Validator;
 use Symfony\Component\Validator\ExecutionContext;
 use Symfony\Bundle\DoctrineBundle\Registry;
 use myApp\Core\Entity\Activity;
 use Symfony\Component\Validator\Constraint;
 use Symfony\Component\Validator\ConstraintValidator;
 use Symfony\Component\Translation\Translator;
 use Symfony\Component\Translation;

 class ActivityMaxTotalParticipantValidator extends ConstraintValidator
 {
    private $doctrine;
    private $translator;

    public function __construct(Registry $doctrine, Translator $translator){
        $this->doctrine = $doctrine;
        $this->translator = $translator;
    }

    /**
     * @param : $value {Activity object}
     * @param : $constraint {ActivityMaxTotalParticipant object}
     * */
    public function isValid( $value, Constraint $constraint) {
      if($value->getId() !== null) { return true; }
      return false;
    }

    private function isMaxTotalParticipantGreaterThanActualParticipants(Activity $activity, ExecutionContext $context){
      $activityUser = $this->doctrine->getEntityManagerForClass('myApp\Core\Entity\ActivityUser')->getRepository('myApp\Core\Entity\ActivityUser')->countNumberParticipantByActivityId($value->getId());
      if($activityUser > $activity->getMaxTotalParticipant() && $activity->getMaxTotalParticipant() !== null) {
        $propertyPath = $this->context->getPropertyPath().'.maxTotalParticipant';
        $this->context->setPropertyPath($propertyPath);
        $this->context->addViolation($constraint->message, array(), null);
        return false;
      }
      return true;
   }

   private function isMaxTotalParticipantGreaterEqualOne(Activity $activity, ExecutionContext $context)
   {
     $maxTotalParticipant = $activity->getMaxTotalParticipant();
     if ($activity->getNumberOfPlacesLimited() == 1 && ($maxTotalParticipant == null || trim($maxTotalParticipant) == '' || $maxTotalParticipant < 1) )  {           
            return false;
     }
     return true;
   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T13:45:19.800

您应该将返回值更改`getTargets()`为`self::PROPERTY_CONSTRAINT`。现在是`self::CLASS_CONSTRAINT`，这意味着约束只能放在类级别，而不能放在属性级别（例如`$maxTotalParticipant`您的情况下的属性）。

# javascript - Jquery插件将属性传递给另一个对象不起作用

> ID：13390709
> 
> 赞同：0
> 
> 时间：2012-11-15T02:27:10.117
> 
> 标签：javascript, variables, object, jquery-plugins, properties

```
(function( $, window ) {

    $.fn.slideInterval = function( options ) {

    return this.each(function() {

        $(this).css({overflow: "hidden"})

        var slider = {
            self: this,
        init:function( options, elem ) {                
            self.elem = elem;
            self.$elem = $( elem );
            slider.action()

        },
        action:function() {
            slider.moved.call(slider.self)
        },

        moved:function() {

                console.log(options.fade) // options.fade is undefined

        }

    }

    slider.init( options, this );
    });
 }; 

    $.fn.slideInterval.options = function() {
    var options = $.extend({
        fade: 5,
        ImgSlide: null,
        interval: null,
        bullet: 'default',
        context: 'Your Title'
    })( options );

    };

})( jQuery, window); 
```

当我在滑块方法中调用 options.fade 但不起作用时，我遇到了一些问题。如何在滑块对象方法中获取选项对象属性.....?

..................................................... ..................................................... ..................................................... ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:02:17.870

我认为你想要的是`options`在你调用时扩展传递的对象`slideInterval`，但我不确定，因为你没有正确解释你的代码和问题：

```
(function ($, window) {

    $.fn.slideInterval = function(options) {
        // argument default options with passed options
        options = $.extend({}, $.fn.slideInterval.options, options);

        return this.each(function () {
            // ...
        });
    };

    $.fn.slideInterval.options = {
        fade: 5,
        ImgSlide: null,
        interval: null,
        bullet: 'default',
        context: 'Your Title'
    };

})(jQuery, window); 
```

# video - 将两个视频叠加到静态图像上？

> ID：13390714
> 
> 赞同：14
> 
> 时间：2012-11-15T02:27:22.700
> 
> 标签：video, ffmpeg, video-processing, video-encoding, command-line-tool

我有两个视频，我想将它们组合成一个视频，其中两个视频都位于静态背景图像之上。（想想这样的事情[。](https://www.youtube.com/watch?v=IfDcqhtoM1A)）我的要求是我使用的软件是免费的，它可以在 OSX 上运行，而且我不必对我的视频进行过多的重新编码。我还希望能够从命令行或通过脚本执行此操作，因为我会经常这样做。（但这并不是绝对必要的。）

我尝试摆弄 ffmpeg 几个小时，但它似乎不太适合后期处理。我可能会通过叠加功能将某些东西拼凑在一起，但到目前为止，我还没有弄清楚如何做到这一点，除了痛苦地将图像转换为视频（这需要我的视频长度的 2 倍！）然后在另一个渲染步骤中将两个视频叠加到它上面。

有小费吗？谢谢！

* * *

**更新：**

感谢 LordNeckbeard 的帮助，我能够通过一个 ffmpeg 调用实现我想要的结果！不幸的是，编码速度很慢，编码 1 秒的视频需要 6 秒。我相信这是由背景图像引起的。关于加速编码的任何提示？这是 ffmpeg 日志：

```
MacBook-Pro:Video archagon$ ffmpeg -loop 1 -i underlay.png -i test-slide-video-short.flv -i test-speaker-video-short.flv -filter_complex "[1:0]scale=400:-1[a];[2:0]scale=320:-1[b];[0:0][a]overlay=0:0[c];[c][b]overlay=0:0" -shortest -t 5 -an output.mp4
ffmpeg version 1.0 Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov 14 2012 16:18:58 with Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn)
  configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libopus --enable-libtheora --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid
  libavutil      51\. 73.101 / 51\. 73.101
  libavcodec     54\. 59.100 / 54\. 59.100
  libavformat    54\. 29.104 / 54\. 29.104
  libavdevice    54\.  2.101 / 54\.  2.101
  libavfilter     3\. 17.100 /  3\. 17.100
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, image2, from 'underlay.png':
  Duration: 00:00:00.04, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: png, rgb24, 1024x768, 25 fps, 25 tbr, 25 tbn, 25 tbc
Input #1, flv, from 'test-slide-video-short.flv':
  Metadata:
    author          : 
    copyright       : 
    description     : 
    keywords        : 
    rating          : 
    title           : 
    presetname      : Custom
    videodevice     : VGA2USB Pro V3U30343
    videokeyframe_frequency: 5
    canSeekToEnd    : false
    createdby       : FMS 3.5
    creationdate    : Mon Aug 16 16:35:34 2010
    encoder         : Lavf54.29.104
  Duration: 00:50:32.75, start: 0.000000, bitrate: 90 kb/s
    Stream #1:0: Video: vp6f, yuv420p, 640x480, 153 kb/s, 8 tbr, 1k tbn, 1k tbc
Input #2, flv, from 'test-speaker-video-short.flv':
  Metadata:
    author          : 
    copyright       : 
    description     : 
    keywords        : 
    rating          : 
    title           : 
    presetname      : Custom
    videodevice     : Microsoft DV Camera and VCR
    videokeyframe_frequency: 5
    audiodevice     : Microsoft DV Camera and VCR
    audiochannels   : 1
    audioinputvolume: 75
    canSeekToEnd    : false
    createdby       : FMS 3.5
    creationdate    : Mon Aug 16 16:35:34 2010
    encoder         : Lavf54.29.104
  Duration: 00:50:38.05, start: 0.000000, bitrate: 238 kb/s
    Stream #2:0: Video: vp6f, yuv420p, 320x240, 204 kb/s, 25 tbr, 1k tbn, 1k tbc
    Stream #2:1: Audio: mp3, 22050 Hz, mono, s16, 32 kb/s
File 'output.mp4' already exists. Overwrite ? [y/N] y
using cpu capabilities: none!
[libx264 @ 0x7fa84c02f200] profile High, level 3.1
[libx264 @ 0x7fa84c02f200] 264 - core 119 - H.264/MPEG-4 AVC codec - Copyleft 2003-2011 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=3 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output.mp4':
  Metadata:
    encoder         : Lavf54.29.104
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 1024x768, q=-1--1, 25 tbn, 25 tbc
Stream mapping:
  Stream #0:0 (png) -> overlay:main
  Stream #1:0 (vp6f) -> scale
  Stream #2:0 (vp6f) -> scale
  overlay -> Stream #0:0 (libx264)
Press [q] to stop, [?] for help 
```

* * *

**更新 2：**

有用！一项重要的调整是将 underlay.png 输入移动到输入列表的末尾。这大大提高了性能。这是我最后的 ffmpeg 电话。（这种特殊安排不需要最后的地图，但有时我想将一些额外的音频输入映射到我的输出。）

```
ffmpeg
    -i VideoOne.flv
    -i VideoTwo.flv
    -loop 1 -i Underlay.png
    -filter_complex "[2:0] [0:0] overlay=20:main_h/2-overlay_h/2 [overlay];[overlay] [1:0] overlay=main_w-overlay_w-20:main_h/2-overlay_h/2 [output]"
    -map [output]:v
    -map 0:a
    OutputVideo.m4v 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-15T20:01:34.880

ffmpeg 中的复杂过滤器图一开始可能看起来很复杂，但一旦你尝试了几次，它就会变得有意义。您需要熟悉 filtergraph 语法。从阅读[Filtering Introduction](http://ffmpeg.org/ffmpeg-filters.html#Filtering-Introduction)和[Filtergraph Description](http://ffmpeg.org/ffmpeg-filters.html#Filtergraph-description)开始。您不必完全理解它，但它将帮助您理解以下示例。

## 例子

![静态图像上的两个视频](../Images/ede235200b8b3ab3fd569f34c17febae.png)

使用[`scale`](http://ffmpeg.org/ffmpeg-filters.html#scale)视频过滤器将输入缩放（调整大小）为特定大小，然后使用[`overlay`](http://ffmpeg.org/ffmpeg-filters.html#overlay-1)视频过滤器将视频放置在静态图像上。

```
ffmpeg -loop 1 -i background.png -i video1.mp4 -i video2.mp4 -filter_complex \
"[1:v]scale=(iw/2)-20:-1[a]; \
 [2:v]scale=(iw/2)-20:-1[b]; \
 [0:v][a]overlay=10:(main_h/2)-(overlay_h/2):shortest=1[c]; \
 [c][b]overlay=main_w-overlay_w-10:(main_h/2)-(overlay_h/2)[video]" \
-map "[video]" output.mkv 
```

## 这意味着什么

### 非过滤选项：

*   `-loop 1`连续循环下一个输入，即`background.png`.

*   `background.png`背景图像。流[说明符](http://ffmpeg.org/ffmpeg.html#Stream-specifiers-1)是`[0:v]`大小为 1280x720。

*   `video1.mp4`这是第一个视频输入（示例图像中的 Big Buck Bunny）。流说明符是`[1:v]`. 它的大小为 640x360。

*   `video2.mp4`第二个视频输入（示例图像中的 varmints）。流说明符是`[2:v]`. 它的大小为 640x360。

### 过滤选项

*   `-filter_complex`启动复杂过滤器图的选项。

*   `[1:v]scale=(iw/2)-20:-1[a]`这是采用`video1.mp4`，称为`[1:v]`，并缩放它。`iw`是*输入宽度*的别名，在这种情况下它的值是 640。我们将比分成两半并减去额外的 20 像素作为填充，这样当每个视频被覆盖时，它周围就会有空间。`-1`表示自动计算将保留方面的值。当然，您可以省略花哨并手动提供诸如`scale=320:240`. 然后使用一个名为的输出*链接标签*`[a]`，以便我们稍后可以参考此输出。

*   `[2:v]scale=(iw/2)-20:-1[b]`与上面相同，但`video2.mp4`用作输入并将输出链接标签命名为`[b]`.

*   `[0:v][a]overlay=10:(main_h/2)-(overlay_h/2):shortest=1[c]`用作第一个叠加输入，并使用`background.png`我们的第一个比例过滤器的结果，称为`[a]`，作为第二个叠加输入。放在上面`[a]`。是*主高度*的别名，它指的是背景输入 ( ) 高度。是*叠加高度*的别名，指的是前景的高度 ( )。此示例将 Big Buck Bunny 放置在左侧。当最短的输入终止时，将强制输出终止；否则它将永远循环，因为正在循环。命名此过滤器的结果。`[0:v]``main_h`*`[0:v]``overlay_h`*`[a]``shortest=1``background.png``[c]`**

***   `[c][b]overlay=overlay_w*2:overlay_h:shortest=1[video]`用作`[c]`第一个叠加输入和`[b]`第二个叠加输入。使用叠加参数`overlay_w`和`overlay_h`（叠加输入宽度和高度）。此示例将把害虫 varmints 放在右侧。将输出标记为`[video]`。

    *   `-map "[video]"`将过滤器的输出映射到输出文件。`[video]`过滤器图末尾的链接标签不一定是必需的，但建议使用映射显式。** 

 **## 声音的

### 有两个独立的音频流

默认情况下，只有遇到的第一个输入音频通道将用于[流选择](http://ffmpeg.org/ffmpeg.html#Stream-selection)中定义的输出。您可以使用该[`-map`](http://ffmpeg.org/ffmpeg.html#Advanced-options)选项从第二个视频输入添加额外的音轨（输出将有两个音频流）。此示例将[流式复制](http://ffmpeg.org/ffmpeg.html#Stream-copy)音频而不是重新编码：

```
ffmpeg -loop 1 -i background.png -i video1.mp4 -i video2.mp4 -filter_complex \
"[1:v]scale=(iw/2)-20:-1[a]; \
 [2:v]scale=(iw/2)-20:-1[b]; \
 [0:v][a]overlay=10:(main_h/2)-(overlay_h/2):shortest=1[c]; \
 [c][b]overlay=main_w-overlay_w-10:(main_h/2)-(overlay_h/2)[video]" \
-map "[video]" -map 1:a -map 2:a -codec:a copy output.mkv 
```

### 合并两个音频流

[`amerge`](http://ffmpeg.org/ffmpeg-filters.html#amerge)或者使用和音频过滤器将两个音频输入合并为一个[`pan`](http://ffmpeg.org/ffmpeg-filters.html#pan)（假设两个输入都是立体声并且您想要立体声输出）：

```
ffmpeg -loop 1 -i background.png -i video1.mp4 -i video2.mp4 -filter_complex \
"[1:v]scale=(iw/2)-20:-1[a]; \
 [2:v]scale=(iw/2)-20:-1[b]; \
 [0:v][a]overlay=10:(main_h/2)-(overlay_h/2):shortest=1[c]; \
 [c][b]overlay=main_w-overlay_w-10:(main_h/2)-(overlay_h/2)[video]" \
 [1:a][2:a]amerge,pan=stereo:c0<c0+c2:c1<c1+c3[audio]" \
-map "[video]" -map "[audio]" output.mkv 
```

## 另见

*   [FFmpeg 过滤文档](http://ffmpeg.org/ffmpeg-filters.html)
*   [FFmpeg Wiki：过滤指南](https://trac.ffmpeg.org/wiki/FilteringGuide)
*   [FFmpeg Wiki：x264 编码指南](https://trac.ffmpeg.org/wiki/x264EncodingGuide)**

# python - 安装 Python 的多个主版本和位版本

> ID：13390716
> 
> 赞同：6
> 
> 时间：2012-11-15T02:27:47.993
> 
> 标签：python, windows-7, installation

如果我希望在打开*.py*文件时默认使用**64 位 Python 3.3 ，那么安装 32 位和 64 位版本的 Python 2.7 和 Python 3.3 的最佳方式/顺序是什么？**

 *我已经安装了每个版本的 32 位版本，默认设置为 Python 3.3。

* * *

如果只重命名我当前安装的版本的目录就可以了，*python27.dll*和使用它的程序（或*python33.dll*）会继续工作吗？该库由 python 安装程序安装到*%WINDIR%\System32*和/或*%WINDIR%\SysWoW64 。*

* * *

感谢您的回答，这是我所做的：

1.  已卸载 Python 3.3（剩下 2 个文件）
    *   *C:\Python33\Lib\lib2to3\Grammar3.3.0.final.0.pickle*
    *   *C:\Python33\Lib\lib2to3\PatternGrammar3.3.0.final.0.pickle*
2.  已卸载 Python 2.7
3.  已安装 Python 2.7 x86 *（无注册扩展）*
    *   `C:\Python\27_32\`
4.  已安装 Python 2.7 x86-64 *（无注册扩展）*
    *   `C:\Python\27\`
5.  已安装 Python 3.3 x86 *（无注册扩展）*
    *   `C:\Python\33_32\`
6.  已安装 Python 3.3 x86-64 *（具有默认寄存器扩展）*
    *   `C:\Python\33\`
7.  删除*C:\Python33*
    *   CCleaner 安装程序对此位置的参考问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:42:24.217

安装程序通常有一个“设置文件关联”选项来处理这个问题，我认为默认情况下它是打开的，这意味着最近安装的将处理双击 .py 文件。所以最后安装 64 位 Python 3.3，它应该可以工作。几天前我刚刚使用 2.7 的 32 位和 64 位版本进行了此操作，它似乎工作正常。

不过，我不会重命名您现有的目录。您应该将每个版本的 Python 安装在其自己的目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:48:10.877

使用[PEP 397](http://www.python.org/dev/peps/pep-0397/)启动器并将其配置为启动您首选的 Python 版本。所有版本的 Python 3.3 都附带一个副本，或者您可以单独安装它。

详细说明：

`python`与其通过键入shell来启动 Python，不如运行`py.exe`（如果最近安装的版本是 Python 3.3 或更高版本，这也应该是双击 Python 文件的默认操作）。`py.exe`是一个帮助程序，用于在您的系统上搜索和定位合适的 Python 版本。

您可以在不同位置编辑`.ini`文件以指定默认版本，或者您的 Python 脚本可以指定它们期望运行的版本（使用“shebang”行，如 PEP 中所述）。因此，您可以将系统默认设置为 64 位 Python 3.3，同时还允许各个脚本按需使用其他版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T02:36:24.227

我会为您要安装的每个版本（2.7/3.2）或风味（32 位/64 位）的 python 使用 virtualenv。从本质上讲，virtualenv 是您安装的沙箱，不会泄漏到其他沙箱中。

[This other SO question](https://stackoverflow.com/questions/5844869/comprehensive-beginners-virtualenv-tutorial)解释了如何制作virtualenvs*

# javascript - 正则表达式的问题

> ID：13390720
> 
> 赞同：1
> 
> 时间：2012-11-15T02:28:06.370
> 
> 标签：javascript, regex

对于擅长正则表达式的人来说，这应该很简单：

我有一个字符串`var str="<a class='removable'>$10 STNA Workbook <br/></a>";`

我能够提取我的第一个问题的数字。现在更困难的任务是提取，在本例中是“STNA Workbook”。然而，问题是这个语句可以是 1、2、3、4 或许多字长。所以我需要匹配数字和<br/>之间的所有内容

我最后一次尝试的样子`var patt1=(\d)(.*?)\[<\];`

对正则表达式部分的快速解释将不胜感激，但不是绝对必要的，因为我正在努力学习这一点。任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:35:19.263

你非常接近。

`var matches = str.match(/(\d+)(.*?)</);`

match[1] 将包含数字，matches[2] 将包含单词

你知道`\d`（匹配数字）是什么。`(.*?)`是对任何字符的非贪婪匹配并结束`<`非贪婪匹配

# sql - SQL Server - 用于查找基于特定数据类型构建的所有聚集索引的脚本

> ID：13390721
> 
> 赞同：7
> 
> 时间：2012-11-15T02:28:18.740
> 
> 标签：sql, sql-server, tsql

我正在尝试查找基于数据类型 uniqueIdentifier 的列构建的所有聚集索引。显然，这对于聚集索引来说是一个糟糕的选择，我正试图找到所有这些并删除它们。到目前为止，我编写的脚本会返回每个具有唯一标识符的表的所有聚集索引。请帮忙。这是脚本：

```
select distinct object_name(i.object_id) AS tablename, i.name AS indexname, i.type_desc     as type 
from sys.indexes i
join sys.index_columns ic on ic.object_id = i.object_id and ic.index_id = i.index_id
join sys.columns c on c.column_id = ic.index_column_id 
join sys.types t on t.system_type_id = c.system_type_id
join sys.objects o on o.object_id = i.object_id
where t.name = 'uniqueidentifier'
and i.type_desc = 'clustered'
and object_name(i.object_id) not like 'sys%' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T02:48:42.967

```
select o.name objectname, i.name indexname, c.name as columnname
from sys.objects o
join sys.indexes i on i.object_id = o.object_id
join sys.index_columns ic on ic.index_id = i.index_id and ic.object_id = i.object_id
join sys.columns c on c.object_id = o.object_id and c.column_id = ic.column_id
join sys.types t on c.system_type_id = t.system_type_id
where o.is_ms_shipped = 0
  and i.type_desc = 'CLUSTERED'
  and t.name = 'uniqueidentifier'
order by o.name, i.name 
```

# jquery - 使用 jQuery 读取 XML 文件

> ID：13390722
> 
> 赞同：0
> 
> 时间：2012-11-15T02:28:22.373
> 
> 标签：jquery, xml, xml-parsing

我有一个格式为 xml 的文件：

```
<cart>
<itemCount>1</itemCount>
<cartTotal>33.94</cartTotal>
</cart> 
```

这是为了跟踪电子商务购物车的内容。所以它总是只有一个“购物车”节点。

我想阅读“cartTotal”字段。如果它大于 0，那么我想在网站上显示我的“查看购物车”按钮。

我尝试了以下方法，但它不起作用：

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "https://www.example.com/file.xml",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('cart').each(function(){
                if (($(this).attr('cartTotal')) > 0) {
                    $("a.view-cart-button").css('visibility', 'visible');
                }
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:32:38.980

其中的元素`<cart>...</cart>`不是**属性**而是**子节点**。

代替：

```
if (($(this).attr('cartTotal')) > 0) {
    $("a.view-cart-button").css('visibility', 'visible');
} 
```

和：

```
if ( $('cartTotal',$(this)).text()*1 > 0) {
    $("a.view-cart-button").css('visibility', 'visible');
} 
```

**修正案**

需要注意的是，使用 AJAX 在另一个域上调用 XML 文件并且没有[CORS](http://enable-cors.org/)访问，这将失败，请尝试以下操作：

```
$(document).ready(function(){

    $.ajax({
        type: "GET" ,
        url: "https://secure.ultracart.com/cgi-bin/UCJavaScript?merchantid=DEMO&type=xml" ,
        dataType: "xml" ,
        success: function(xml) {
            if( $(xml).find('cartTotal').text()*1 > 0 ){
                $("a.view-cart-button").css('visibility', 'visible');
            }
        }
    });

});​ 
```

如果您正在处理支付网关或类似的东西，请首先参考他们的文档 - 他们将指定您如何从您自己的网站与他们进行交互。

# javascript - Javascript 字符串替换方法。在替换字符串中使用匹配

> ID：13390724
> 
> 赞同：0
> 
> 时间：2012-11-15T02:28:38.043
> 
> 标签：javascript, regex, replace

我有以下 javascript 字符串

```
/Library/Application%20Support/Adobe/Fireworks%20CS6/Commands 
```

“CS#”部分中的数字可能会改变，但我想将字符串转换为以下格式，记住数字可能会改变。

```
/Library/Caches/Adobe/TypeSupport/CS6 
```

我知道我可以通过多种方式做到这一点，但出于教育的目的，我正在寻找最好的方法。

我可以使用 replace 方法使用正则表达式进行搜索，但是否可以在替换中使用匹配项？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:38:48.627

最简单的解决方案是在正则表达式中使用括号来捕获您希望在替换中使用的原始字符串部分，然后通过特殊序列将其包含在替换字符串中`$1`。对于您的示例：

```
'/Library/Application%20Support/Adobe/Fireworks%20CS6/Commands'.replace(
    /^.*\/(CS[0-9]+).*$/, 
    '/Library/Caches/Adobe/TypeSupport/$1'); 
// => /Library/Caches/Adobe/TypeSupport/CS6 
```

（您可以有多个括号，在这种情况下，后续组是`$2`,`$3`等。有时您关心的字符串恰好与整个正则表达式匹配，在这种情况下，您可以`$&`在替换字符串中使用，并且不需要任何括号。）

正如您所做的那样，这对于简单地包含源字符串中的文字文本非常有用。

但是，如果您正在做一些更花哨的事情-例如尝试更改匹配文本的大小写-它将无法正常工作。（`'$1'.toLowerCase()`将简单地将文字字符串 '$1' 转换为小写，然后将其传递给`replace`; 没有帮助。）对于这些情况，您可以使用函数而不是字符串作为替换。每次匹配都会调用一次，并传递匹配的字符串部分（相当于`$&`字符串版本）；如果正则表达式中有括号，它将按顺序传递一个包含每个组匹配项的附加参数。因此，您可以像这样将示例转换为小写：

```
'/Library/Application%20Support/Adobe/Fireworks%20CS6/Commands'.replace(
        /^.*\/(CS[0-9]+).*$/, 
        function(whole_match, cs_number) { 
          return "/Library/Caches/Adobe/type_support/" + cs_number.toLowerCase()
        });  
// => /Library/Caches/Adobe/type_support/cs6 
```

[您可以在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Replace)阅读 Mozilla 规范/文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:31:18.187

当然 ：

```
'/Library/Application%20Support/Adobe/Fireworks%20CS6/Commands'.replace(/.*(CS[0-9]+).*/, '/Library/Caches/Adobe/TypeSupport/$1'); 
```

您可以使用 来引用捕获组`$N`，其中`N`是组的索引（从 1 开始）。

# linux - 用于归档日志文件的 Bash 脚本

> ID：13390725
> 
> 赞同：5
> 
> 时间：2012-11-15T02:29:26.537
> 
> 标签：linux, bash, unix

我正在尝试编写一个脚本来重命名和存档日志文件，但我就是想不通。这是它应该如何工作的示例：如果您有一个名为 error_log 的文件，并且您是第一次运行脚本，它应该将文件 error_log 重命名为`error_log.1`，然后`error_log.1`使用 gzip 存档。第二次运行脚本时，您将有两个文件：error_log 和`error_log.1.gz`，现在您应该重命名`error_log.1.gz`为`error_log.2.gz`; `error_log`到`error_log.1`并再次使用 gzip归档`error_log.1`到。`error_log.1.gz`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T02:31:25.327

您要查找的内容名为`logrotate`，它是一个基本的`Unix`管理命令，可以根据需要轮换日志。

看 `man 8 logrotate`

简单配置文件示例：

```
/var/log/apache/error_log {
        daily
        rotate 90       # keep only 90 logs
        copytruncate    # don't stop apps, but copy log
        compress        # gzip log in *.gz
} 
```

# mysql - 为什么“解释”命令在同一个 SQL 语句上产生不同的结果？

> ID：13390729
> 
> 赞同：2
> 
> 时间：2012-11-15T02:29:36.487
> 
> 标签：mysql, sql, query-optimization, explain

我将 MySQL 数据库从一个环境迁移到另一个环境，并发现迁移后，特定查询的运行速度比原来慢得多。

我正在调查带有“解释”关键字（如下）的语句，发现“解释”命令在不同的服务器上给出了不同的输出。

```
explain select distinct j.job,f.path,p.path  
from fixes f
join  jobs j on  f.job=j.id 
join  paths p  on p.id =f.path  
where p.path like '//depot1/Dev\-trunk/%' ; 
```

对于原始版本，它给出：

```
 1   SIMPLE  p   range   PRIMARY,path    path    752     **19**  Using where; Using index; Using temporary
    1   SIMPLE  f   ref path,job    path    8   p.p.id  **6448356** 
    1   SIMPLE  j   eq_ref  PRIMARY PRIMARY 8   p.f.job **1** 
```

同样的语句在新环境中产生不同的输出：

```
 1   SIMPLE  j   index   PRIMARY job 62      **68486**   Using index; Using temporary
    1   SIMPLE  f   ref path,job    job 8   p.j.id  **812** 
    1   SIMPLE  p   eq_ref  PRIMARY,path    PRIMARY 8   p.f.path    **1**   Using where 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:47:29.707

仅供参考，事实证明，在迁移数据库时，引擎优化器会使用一些统计信息来决定例如连接表的最佳策略，这显然没有被复制。

解决方案是**`ANALYZE`**在每个表上运行以“重建”此类信息。因此，在对每个表进行 ANALYZE 并`explain`再次运行命令后，输出一致并且查询速度显着提高。

# ruby-on-rails - 已部署的 Rails 应用程序上的 Postgresql 错误

> ID：13390730
> 
> 赞同：1
> 
> 时间：2012-11-15T02:29:37.947
> 
> 标签：ruby-on-rails, postgresql, deployment, linode

我有一个我目前正在开发的 Rails 应用程序。我已经使用 ubuntu 12.10 部署到 linode 服务器，并且收到了一个可爱的“我们很抱歉，但出了点问题”。信息。我一直在查看日志文件中是否有任何可能出现问题的迹象，但似乎没有任何错误发生。

已知

1.  在开发和生产模式下本地工作
2.  错误日志除了访问数据库之外什么也没说
3.  rake db:migrate 数据库配置未指定适配器
4.  RAILS_ENV=production rake db:create 导致用户“部署者”的密码认证失败
5.  postgresql 中的用户/所有者是“任务”，密码与我在 database.yml 中的密码匹配

我一直在寻找 stackoverflow 试图找到任何相关的错误，但我还没有找到有效的解决方案。

在此先感谢您的时间。

.

```
deployer@Asphodel:~/apps/TaskWebsite/current$ RAILS_ENV=production rake db:create
FATAL:  password authentication failed for user "deployer"
FATAL:  password authentication failed for user "deployer"
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `new'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `connect'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:107:in `rescue in create_database'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:51:in `create_database'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (3 levels) in <top (required)>'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `each'
/home/deployer/apps/TaskWebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (2 levels) in <top (required)>'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>'
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"tasks_production", "pool"=>5, "host"=>"localhost", "user"=>"tasks", "password"=>"blahblah"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:43:00.397

您的本地 unix 用户没有权限访问您的 postgresql 套接字。要解决此问题，您应该授予本地访问权限，编辑`/etc/postgresql/main/pg_hba.conf`并在关于 # "local" 的评论后添加：

```
local all         all                 trust 
```

这将授予此计算机上的所有本地用户的访问权限。

保存文件并重新启动 Postgresql - 你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:42:29.537

在黑暗中刺伤......猜测“部署者”是操作系统用户？Postgres 的 pg_hba.conf 文件是什么样的？

[http://www.postgresql.org/docs/9.2/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/9.2/static/auth-pg-hba-conf.html)

也许您只允许来自本地主机的“对等”？看一下特别像下面这样的部分......

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:41:40.727

您的 database.yml 中的生产配置是什么样的？看起来指定的用户有“部署者”，如果集群中的用户是你提到的“任务”，那将是不正确的。如果用户名和密码正确，我会尝试通过其他客户端连接到集群来开始故障排除——我个人的偏好是只使用 psql 实用程序。您可以像这样连接（假设 psql 在您的路径中） -

```
psql -h localhost -U deployer postgres 
```

“postgres”数据库默认创建在一个新的数据集群中。一旦您可以连接到不同的客户端，请使用任何必要的更改更新您的 database.yml 中的生产配置，然后重试。

# mysql - 在分组之前展开数据

> ID：13390733
> 
> 赞同：0
> 
> 时间：2012-11-15T02:29:59.980
> 
> 标签：mysql, algorithm

那里的mysql大师的问题：

我有一个数据集，列出了人工费率和费率开始的日期。这些费率可以是每小时、每天、每周甚至每月。（即有人从 11 月 6 日开始以每周 700 美元的价格工作 1 周）

我正在尝试建立一个图表来绘制每日支出随时间变化的图表。我有一个简单的总和和组查询。然而，每周和每月的利率正在扭曲它。在上面的示例中，所有 700 美元都在 11 月 6 日到达，而这 700 美元中真正只花了一天的价值（100 美元）。

数据集非常大，所以我试图让 mysql 尽可能多地完成繁重的工作，而不必遍历每一行。但是，如果有一种保守的方法可以以编程方式解决这个问题，而不是通过怪物查询，我愿意接受。

毛茸茸的，对吧？有任何想法吗？

如果无法回答，我的备份方案只是将所有数据按日费率存储，但原始费率类型（周、月）也将被存储，以便返回该费率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:55:02.567

我不得不处理这个完全相同的问题，除了它是基于午夜的工作时间。

无论如何，业务逻辑是最重要的，您似乎想以 X 美元计算 1 周为每天 $(1/7)X。

我要做的是将这个查询分开，首先每小时/每天做一次 - 很简单，一整天。然后每周/每月做一次，首先得到中间数据，这很容易。然后得到 begin-6, beginning-5, . . begin-1（每周），开始计算您想要的范围内的天数。

如果需要，您可以合并所有这些查询以获得一个返回集。

但可能最好在 mysql 之外进行，您将获得更精细的粒度控制。然后，您可以返回所有数据并快速循环以处理头部和尾部。

# android - 前缀“com.example”。用作占位符，不应使用

> ID：13390736
> 
> 赞同：-1
> 
> 时间：2012-11-15T02:30:02.350
> 
> 标签：android, eclipse, mobile

我总是收到这个警告

> *包名称：*前缀“com.example”。用作占位符，不应使用

这是我应该担心的事情吗？或者它只是从 IDE 向开发人员发出的友好通知？想知道如果我改变了我会遇到的问题

![在此处输入图像描述](../Images/da207619374033a65cfda439786ff7b0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:41:06.933

这看起来只是对开发人员的友好信息。`com.example`将由 Eclipse 添加作为占位符，以向您展示应如何构建包名称。`in.sathyanarayanan.accelerometertesting`如果您打算将此代码用于任何严重的事情，您可能会考虑将其更改为独特的东西。

但鉴于项目的名称是`accelerometertesting`我想它不是一个严肃的应用程序，所以你真的不需要担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:37:27.003

如果您计划将您的应用程序放在 Google Play 上，并且您引用的包名称是项目清单中使用的包名称，那么这很重要。

有关包名称及其效果的更多信息（当该包名称是清单中的那个时）：http: [//developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)下的包

> 包名称用作应用程序的唯一标识符。它也是应用程序进程的默认名称（参见元素的进程进程属性）和活动的默认任务亲和性（参见元素的 taskAffinity 属性）。

# php - var_dump 和 simpleXML？

> ID：13390738
> 
> 赞同：2
> 
> 时间：2012-11-15T02:30:07.193
> 
> 标签：php

我正在通过 simpleXML 加载一个 XML 文件。我充其量是 PHP 的新手和解析 PHP 的新手，但我有点困惑

我试图了解我存储的变量的结构，所以我尝试了 var_dump()

让我感到困惑的是我在 XML 中寻找的数据*不在*转储数据中的任何位置

[http://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=25](http://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=25)

这是我目前使用的 URL。但是，例如，在转储的变量数据中找不到持续时间/秒——它在哪里以及如何访问它？

这是我得到的输出：http: [//pastebin.com/ggumXTEu](http://pastebin.com/ggumXTEu)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:28:55.107

路径`<yt:duration>`是`/feed/entry/media:group/yt:duration/`

使用 var_dump() 时看不到这些元素，因为它们属于命名空间（媒体和 yt）。

您可以使用 SimpleXMLElement->children() 来访问这些元素，您需要提供 namespace-uri 作为参数`children()`

```
<ol>
<?php
$xml=simplexml_load_file('http://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=25');
foreach($xml->entry as $entry)
{
  $duration=$entry
              ->children('http://search.yahoo.com/mrss/')
                ->group
                  ->children('http://gdata.youtube.com/schemas/2007')
                    ->duration
                      ->attributes()
                        ->seconds;
       printf('<li><strong>%s</strong>( %ds)</li>',$entry->title,$duration); 
}
?> 
</ol> 
```

# ios - UIWebView 中的右填充/边距无法正常工作（嵌入式移动 safari）

> ID：13390742
> 
> 赞同：1
> 
> 时间：2012-11-15T02:30:37.550
> 
> 标签：ios, css, uiwebview, mobile-safari, padding

这是在 iOS 应用程序内的 UIWebView 中使用的。它在普通的 Mobile Safari 中似乎可以正常工作，但在嵌入式浏览器中却不行。

基本上，我有一些 HTML 和 CSS。HTML 元素四周都应用了一些填充，而 BODY 元素则没有。我期望看到的是被空白空间包围的 BODY 的内容。在桌面 Safari 中，这是可行的。但由于某种原因，在 Mobile Safari（嵌入式 Safari）中，HTML 标记的右填充被忽略，或者 BODY 标记可能被拉伸 - 不确定是哪个。请查看以下屏幕截图以进行说明：

![在此处输入图像描述](../Images/6131f9aa7ca9bdad2a3c3e6e39790e64.png)![移动Safari](../Images/142729b6dbbfc5e5381a96e57dbd50a9.png)

请注意在 Mobile Safari 示例中填充似乎是如何消失的。注意：这些只是我在 Photoshop 中模拟的图像，不是屏幕截图，但行为是相同的。

这是代码（当然是简化的）：

```
<html>
<head>
<style>
html {
    background-color: #FFF;
    padding: 10px;
}
body {
    background-color: #0F0;
}
</style>
<body>
<div> ... some stuff ... </div>
</body>
</html> 
```

为确保没有拉伸 BODY 标签的宽度，我尝试删除所有不需要的 HTML 和 CSS，基本上只保留一个带有绿色背景的空 BODY 标签，如图所示。这仍然有同样的问题。我还尝试在 BODY 标记周围放置边距，而不是在 HTML 标记中填充，但这不起作用。

编辑：我也尝试将框模型设置为边框框，[如此处所述](http://css-tricks.com/box-sizing/)，但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-04T11:27:12.357

[从这个答案](https://stackoverflow.com/a/12610156/810661)（它对我有用）

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *padding = @"document.body.style.margin='0';document.body.style.padding = '0'";
    [webView stringByEvaluatingJavaScriptFromString:padding];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:28:04.500

原来 UIWebView 没有被初始化为任何尺寸。它根本没有被显式初始化，例如`[[UIWebView alloc] initWithFrame:....]`. 使用适当的尺寸显式初始化它解决了这个问题。

# c# - 安全代码审查：如何处理解密的对称密钥？

> ID：13390751
> 
> 赞同：1
> 
> 时间：2012-11-15T02:31:22.913
> 
> 标签：c#, security, encryption, azure, rsa

在以下代码中：`symmetricCryptoKey`表示应始终保护的私人信息，因为它是加密对称密钥的解密版本。

问题：

*   是否可以进行其他增强来保护多租户环境（托管在 Azure 上）中的内存，特别是与`symmetricCryptoKey`keyCache 或 keyCache 的交互？

**TL;DR 代码示例**

```
 byte[] symmetricCryptoKey = RSA.Decrypt(key.Key, true);

                AesManaged algorithm = new AesManaged();
                algorithm.IV = key.iv;
                algorithm.Key = symmetricCryptoKey;
                keyCache[key.Version] = algorithm; 
```

完整的代码文件 ... [Codeplex 源](http://azuretableencrypt.codeplex.com)

```
using EncryptDecrypt.Exceptions;
using Microsoft.WindowsAzure.Storage;
using System;
using System.Collections.Generic;
using System.Data.Services.Client;
using System.Net;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;

namespace EncryptDecrypt
{
    /// <summary>
    /// Store the various encryption keys so that we don't need to load them from storage all the time
    /// </summary>
    /// <remarks>
    /// Is there something we should be doing to secure the memory used by this class?
    /// </remarks>
    internal class AzureTableCryptoKeyStore : IDisposable
    {
        private Dictionary<int, SymmetricAlgorithm> keyCache = new Dictionary<int, SymmetricAlgorithm>();
        internal CloudStorageAccount KeyStoreAccount { get; private set; }

        internal AzureTableCryptoKeyStore(CloudStorageAccount acct)
        {
            this.KeyStoreAccount = acct;

            SymmetricKeyStore keyTable = new SymmetricKeyStore(acct);
            List<SymmetricKey> allKeys = null;

            try
            {
                allKeys = keyTable.GetAllKeys();
            }
            catch (DataServiceQueryException dsq)
            {
                if (dsq.Response.StatusCode == (int)HttpStatusCode.NotFound)
                {
                    //Table hasn't been created, so there aren't any keys. Guess we'll just go with it. 
                    allKeys = new List<SymmetricKey>(0);
                }
                else
                {
                    throw new AzureTableCryptoInitializationException("Failed to load encryption keys from storage", dsq);
                }
            }
            catch (DataServiceClientException dsce)
            {
                if (dsce.StatusCode == (int)HttpStatusCode.NotFound)
                {
                    //Table hasn't been created, so there aren't any keys. Guess we'll just go with it. 
                    allKeys = new List<SymmetricKey>(0);
                }
                else
                {
                    throw new AzureTableCryptoInitializationException("Failed to load encryption keys from storage", dsce);
                }
            }
            catch (Exception ex)
            {
                throw new AzureTableCryptoInitializationException("Could not load encryption keys table", ex);
            }

            foreach (var key in allKeys)
            {
                try
                {
                    X509Certificate2 certificate = CertificateHelper.GetCertificateByThumbprint(key.CertificateThumbprint);
                    if (certificate == null)
                    {
                        //Can't find the cert for this key, just continue
                        continue;
                    }

                    RSACryptoServiceProvider RSA;
                    try
                    {
                        RSA = (RSACryptoServiceProvider)certificate.PrivateKey;
                    }
                    catch (CryptographicException)
                    {
                        throw new AzureTableCryptoPrivateKeyNotAccessibleException(key.Version, key.CertificateThumbprint);
                    }

                    byte[] symmetricCryptoKey = RSA.Decrypt(key.Key, true);

                    AesManaged algorithm = new AesManaged();
                    algorithm.IV = key.iv;
                    algorithm.Key = symmetricCryptoKey;
                    keyCache[key.Version] = algorithm;
                }
                catch (AzureTableCryptoException)
                {
                    //Just rethrow these
                    throw;
                }
                catch (Exception ex)
                {
                    throw new AzureTableCryptoInitializationException("Error initializing crypto key version " + key.Version, ex);
                }
            }
        }

        internal ICryptoTransform GetDecryptor(int version)
        {
            return GetAlgorithm(version).CreateDecryptor();
        }

        internal ICryptoTransform GetEncryptor(int version)
        {
            return GetAlgorithm(version).CreateEncryptor();
        }

        private SymmetricAlgorithm GetAlgorithm(int version)
        {
            SymmetricAlgorithm algo;
            if (!keyCache.TryGetValue(version, out algo))
            {
                throw new AzureTableCryptoNotFoundException(version);
            }
            return algo;
        }

        public void Dispose()
        {
            Dictionary<int, SymmetricAlgorithm> cache = keyCache;
            keyCache = null;

            foreach (var algo in cache.Values)
            {
                algo.Clear();
                algo.Dispose();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:11:32.960

您可以使用诸如 SecureString 之类的东西来帮助防止内存嗅探器抓取密钥：

[SecureString 如何“加密”并且仍然可用？](https://stackoverflow.com/questions/6982236/how-is-securestring-encrypted-and-still-usable)

它们当然不是完美的，因为如果程序本身具有解密它的所有信息，那么计算机中就存在查看字符串所需的一切。它确实减少了它可能受到损害的情况。

# php - PHP 流写入缓冲区

> ID：13390753
> 
> 赞同：2
> 
> 时间：2012-11-15T02:31:31.223
> 
> 标签：php, sockets, php-socket

我正在尝试以非阻塞方式将大量数据（~250K）写入流。

抽象出复杂性和对象结构，这就是我正在运行的：

```
$fp = fsockopen('host', 80);
socket_set_blocking( $fp, false );
fwrite( $fp, $string, $length ); // Where $string is a 250K string 
```

然而，数据并没有全部被写入。假设这是 PHP 的写入缓冲区开始发挥作用，我设置`stream_set_write_buffer( $fp, 0 )`了但这也没有解决问题。

我将我的 fwrite 分成 4096B 的块——看起来客户端发送了 3 个完整的批次（4096 字节）和第四批次的 ~1500B。对 fwrite 的任何和所有连续调用都返回写入的 0 个字节。

有谁知道如何将这些数据排队以非阻塞方式发送出去？如果我删除`socket_set_blocking( $fp, false );`- 一切正常。很明显，异步运行它是一个问题。

你怎么认为？套接字扩展在这里有帮助吗？它是否以不同的方式处理缓冲区？

注意：出于各种原因，我有意编写此套接字传输层以避免使用 curl。使用`curl_multi()`不是一种选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:12:50.053

您的问题几乎可以肯定是由于`fwrite`新数据包的到来可能会中断对非阻塞套接字流的操作。因此，您不能指望 an`fwrite`是原子的。在这种情况下，您**必须**依靠`fwrite`调用的返回值来准确地告诉您在该通道中写入流的确切字节数，并继续写入，直到发送完所有数据。

例如 ...

```
$dataToWrite = 'my data';
$bytesToWrite = strlen($dataToWrite);
$totalBytesWritten = 0;

while ($totalBytesWritten < $bytesToWrite) {
    $bytes = fwrite($mySock, substr($dataToWrite, $totalBytesWritten));
    $totalBytesWritten += $bytes;
} 
```

显然，对这个问题的稳健处理还必须考虑到套接字连接消失等情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:12:41.777

您是否考虑了阻塞和重试？我假设您需要考虑 EAGAIN/EWOULDBLOCK/EINTR 状态，否则您最终会阻止自己。

# utf-8 - Wget 和 utf-8 网站

> ID：13390754
> 
> 赞同：1
> 
> 时间：2012-11-15T02:31:31.893
> 
> 标签：utf-8, wget

我想用 wget 下载我自己的网站作为简单的 html (http://www.dariomac.com) 来制作离线作品集。我的问题是 wget 正确下载了所有网站，但某些字符保存不正确。例如，我的名字 Darío Macchi 被保存为 Darão Macchi。

有没有办法解决这个问题？如果没有，在这种情况下是否有其他软件可以使用？

提前致谢！

编辑：我的操作系统是带有 NTFS 文件系统的 Windows

# reference - 如何将顽固的引用添加到我的 Windows 应用商店项目？

> ID：13390759
> 
> 赞同：1
> 
> 时间：2012-11-15T02:32:22.620
> 
> 标签：reference, windows-8, visual-studio-2012, projects-and-solutions, windows-store-apps

我首先遇到了为 Bing 地图添加参考的问题（http://stackoverflow.com/questions/13239597/why-can-i-not-reference-bing-maps-in-my-app）；但现在我意识到我什至不能添加任何引用。

当我右键单击引用时，我在任务栏中看到“此项目不支持预览”；但是参考管理器出现了，但是单击一个项目（例如“Microsoft Visual C++ Runtime Package”或“SQLite for Windows Runtime”）什么也没做。

有没有人见过这种知道如何解决它的行为，或者至少对它有任何想法或“预感”？

这是我尝试的方法：

文件 | 新项目 | 已安装 | 模板 | 视觉 C# | Windows 商店 | 拆分应用程序 (XAML)

选择的框架是“.NET Framework 4.5”

当我展开引用时，我看到：

```
.NET for Windows Store apps
Windows 
```

当我右键单击引用并选择添加引用时，引用管理器将显示这些 Windows | 显示的扩展（“*过滤到：适用于的 SDK* ”）：

```
Bing Maps for C#, C++, or Visual Basic
Microsoft Visual C++ Runtime Packages
Microsoft Visual Studio Test Core
MSTest for Managed Projects
SQLite for Windows Runtime 
```

...但是选择其中任何一个并单击“确定”无济于事-它们不会添加到我的项目的参考中。引用英国人的话，“***该死的L这是怎么回事？！？*** ”

## 更新

发生的事情也是，如果我选择*工具 | 库包管理器 | Manage NuGet Packages for Solution*，当我将鼠标悬停在列表中的某个项目上或尝试单击“搜索”编辑时，对话框会消失。

这里显然*确实*有问题；只有我吗？其他人有这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:07:10.270

必须选中复选框。

如此明显，但对我来说“不可见”-似乎选择该项目就足够了，而我没有注意/没有“看到”该复选框。也许不应该允许一个人在没有选择/检查的情况下选择“确定”？并提示您检查复选框？

这是答案：

[http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/075ba866-fd8b-41d3-ab5e-a3c0812ab430](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/075ba866-fd8b-41d3-ab5e-a3c0812ab430)

# excel - 在另存为制表符分隔的 txt 文件之前在 Excel 工作表中取消美化表格

> ID：13390761
> 
> 赞同：1
> 
> 时间：2012-11-15T02:32:29.797
> 
> 标签：excel, csv

我经常在 Excel 工作簿的许多工作表中将数据作为“漂亮的表格”。“漂亮”是指每个工作表的顶部和底部都有说明性文本，标题有合并的单元格，标题和第一个数据行之间有空白行，数据列之间有空白列等。

![这是一个罪犯的一部分的屏幕截图。](../Images/29bbbed335be6f2f0bcd6b4c2f2a4b47.png)

这里有减少体力劳动的最佳实践吗？

一种方法是在 Excel 中修复所有这些表。另一种可能是将“原样”保存到制表符分隔的 txt，手动选择和导入数据行，删除空白列，然后手动输入标题信息。我倾向于后者，但即使这是相当手动的。

高手在做什么？当我这样做时，我感觉自己就像一个不知道剪切和粘贴的人。

FWIW，我在大多数事情上都使用 Python、Stata 和 R，但我对任何可以简化此过程的工具持开放态度。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:48:33.087

老实说，我在清理数据过程中使用的自动化程度取决于我必须执行的次数。对我来说，我认为通过宏修改 Excel 中的文件。

如果您的文件始终具有相同的格式（对于特定任务），您可以简单地记录您正在执行的清理它们的步骤的宏，并将它们保存在您的个人工作簿中

如果它们略有不同但主题有所不同，您可以修改录制的 marco（理想情况下分解为类似的函数`DeleteTopRows`，并且`DeleteEmptyColumns`根据输入文件接受不同的参数）

我认为 Excel VBA 是这类工作最容易工作的地方，因为 excel 应用程序可以帮助处理许多内置函数。例如，在您上面的工作表`Range("10:11").Delete`中将删除它们。

# javascript - 使用 highcharts.js 在每个 xAxis 类别标签上显示自定义图标图像 [html]

> ID：13390766
> 
> 赞同：3
> 
> 时间：2012-11-15T02:32:37.950
> 
> 标签：javascript, jquery, html, jquery-ui

我有这个正在处理的图表，基本上是一组 10 行 [系列]，我必须在每个栏的开头动态添加一个自定义图标（图像），我可以添加一个图像，但正在显示所有行上都有相同的新元素，非常感谢您对此的任何帮助。

这是我创建的 jsFiddle [http://jsfiddle.net/KrTbz/ 。](http://jsfiddle.net/KrTbz/)

这是我需要做的js代码

```
 labels: {
                color: '#fff',

                x: 5,
                useHTML: true,
                formatter: function () {
                    return '<img class="" src="http://dummyimage.com/60x60/ff6600/ffffff"/>';
                }

            } 
```

希望我能得到一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T02:51:39.987

见[http://jsfiddle.net/troynt/KrTbz/3/](http://jsfiddle.net/troynt/KrTbz/3/)

只需用您想要的任何图像替换随机单词占位符。

```
formatter: function () {
    return {
        'Awesome': 'blah',
        'Awesome Previous': 'yadda',
        'Good': 'dabba',
        'Good Previous': 'doo',
        'Okay': 'word',
        'Okay Previous':'up',
        'Awful': 'blah',
        'Awfull Previous': 'blah2'
    }[this.value];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-19T21:59:10.883

要为每个标签应用自定义图像，请尝试使用以标签为索引的图像数组：

```
 $(function () {

        var categoryImgs = {
            'Apples': '<img src="http://dummyimage.com/60x60/ff6600/ffffff"><img>&nbsp;',
            'Oranges':'<img src="http://highcharts.com/demo/gfx/sun.png"><img>&nbsp;',
            'Pears':'<img src="http://highcharts.com/demo/gfx/sun.png"><img>&nbsp;',
            'Grapes':'<img src="http://highcharts.com/demo/gfx/sun.png"><img>&nbsp;',
            'Bananas':'<img src="http://highcharts.com/demo/gfx/sun.png"><img>&nbsp;'
        };

        $('#container').highcharts({
            chart: {
                type: 'column'
            },

            title: {
                text: 'Stacked column chart'
            },
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas'],
                labels: {
                    x: 5,
                    useHTML: true,                        
                    formatter: function () {
                        return '<div class="myToolTip" title="Hello ' 
                       + this.value +'">' +  categoryImgs[this.value] + '</div>';
                    }, 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T02:51:49.033

好吧，你可以先试试这个：

[http://jsfiddle.net/KrTbz/1/](http://jsfiddle.net/KrTbz/1/)

```
formatter: function () {
                    console.log(this);
                    return '<img class="" ' +
src="http://dummyimage.com/100x30/ff6600/ffffff?text=' + this.value + '" />';
                } 
```

的值`this`是当前正在绘制的线，并`this.value`带有标签。

如果您在 Chrome 中运行它并按 F12 以查看控制台，您可以看到 console.log 转储出的内容，即完整对象。

如果您需要更多差异，则可以在该值上进行分支。

# php - phpmyadmin 本地主机错误

> ID：13390772
> 
> 赞同：0
> 
> 时间：2012-11-15T02:33:22.533
> 
> 标签：php, phpmyadmin

我在 MAC 10.8.1 上安装了 Apache、PHP、MySQL，然后通过在终端中发出命令安装了 phpmyadmin `- sudo apt-get install phpmyadmin`。

之后，在我的网络浏览器中输入... localhost/phpmyadmin，它会给出以下错误消息。

> 未找到
> 
> 在此服务器上未找到请求的 URL /phpmyadmin。Apache/2.2.22 (Unix) mod_fastcgi/2.4.6 mod_ssl/2.2.22 使用 Suhosin-Patch 打开 SSL/0.9.8r DAV/2 PHP/5.3.13 mod_wsgi/3.3 Python/2.7.2 服务器在 localhost 端口 80

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:51:25.773

unix 上的 Apache 通常区分大小写，请尝试 /phpMyAdmin。如果这不起作用，phpMyAdmin 文件夹实际上是在您的服务器文档根目录中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:26:32.547

MAC OS 无法识别`localhost`，请`127.0.0.1`改用。

在浏览器中，您应该使用`http://127.0.0.1/phpmyadmin`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:42:30.907

看看这篇文章能否为您解决。是的，我知道它是用于在 Ubuntu 上安装的，但它可能会起作用：

[https://help.ubuntu.com/community/phpMyAdmin](https://help.ubuntu.com/community/phpMyAdmin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T19:11:48.723

尝试在 phpmyadmin 的目录和你的 www 之间建立一个符号链接

类似的东西：

```
sudo ln -s /usr/share/phpmyadmin/ /var/www/ 
```

之后一切正常:)

如果您将路径更改为其他目录，只需将 /var/www 更改为 /home/your/path/to/www

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-10T06:26:26.783

对于那些仍然面临这个问题的人：

*   最快的解决方法：告诉 localhost 使用哪个端口。

检查 Apache 使用哪个端口（在我的情况下是 90）并替换：

> [http://localhost/phpmyadmin](http://localhost/phpmyadmin)
> 
> 和
> 
> [http://localhost:90/phpmyadmin](http://localhost:90/phpmyadmin)

干杯!

# cassandra - 如何在 ubuntu 上重新安装 cassandra？

> ID：13390775
> 
> 赞同：24
> 
> 时间：2012-11-15T02:33:32.980
> 
> 标签：cassandra

我是 Ubutu(linux) + Cassandra 的新手。

我用 OpenJdk 在我的 ubuntu 机器上测试了 Cassandra。有一些很好的文章来解释如何在 ubuntu 上安装 Cassandra，所以我可以这样做。我更改了一些配置值并检查它是否正常运行。

而且，我决定移除 cassandra 并重新安装以获得干净的。

[我所做的]

我通过以下步骤卸载 Cassandra：

1.  使用 apt-get 卸载 Cassandra

    > apt-get 删除 cassandra

2.  删除数据/日志/目录

    > rm -rf /var/lib/cassandra
    > 
    > rm -rf /var/log/cassandra
    > 
    > rm -rf /etc/cassandra

之后我尝试安装新的 cassandra

> apt-get 安装 cassandra

[错误信息]

> `sudo cassandra -f`
> 
> 线程“主”java.lang.ExceptionInInitializerError 中的异常原因：java.lang.RuntimeException：无法找出 log4j 配置：log4j-server.properties
> 
> 在 org.apache.cassandra.service.AbstractCassandraDaemon.initLog4j(AbstractCassandraDaemon.java:86)
> 
> 在 org.apache.cassandra.thrift.CassandraDaemon.(CassandraDaemon.java:62) 找不到主类：org.apache.cassandra.thrift.CassandraDaemon。程序将退出。`

并且“/var/lib/cassandra”、“/var/log/cassandra”和“/etc/cassandra”目录OTL下没有文件。

我想知道，我想念什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-11T17:51:50.623

通过执行以下操作，我能够完全卸载 Cassandra：

```
apt-get remove cassandra 
```

--- 删除 cassandra 目录

```
rm -rf /var/lib/cassandra
rm -rf /var/log/cassandra
rm -rf /etc/cassandra 
```

但是，做了以上之后，还是有一些东西遗留下来，如果你在这样做之后尝试重新安装它，它不会起作用，因为安装会检测到那些剩余的文件并认为你仍然安装了软件. 您将获得一组新目录，但它们将是空的。因此，您需要删除所有其他内容。有些目录和文件需要手动删除。

--- 找到剩余的 Cassandra 文件

```
find / -name 'cassandra' 
```

或者，

```
find / -name '*cassandra*' 
```

* * *

（系统上的所有剩余文件都需要删除，或者一些目录留空或根本不创建）。

上面的命令将返回留下的文件和目录的列表。删除它们。

现在，您应该能够：

```
apt-get update 
```

其次是：

```
apt-get install cassandra 
```

完成此操作后，我得到了一个全新的安装，并在启动 Cassandra 后，它完成了所有首次启动的工作并启动并运行。

如果您收到关于由于公钥而无法验证签名的 GPG 错误，则需要在安装语句之前进行设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-09T19:18:17.277

为此，Datastax 提供了一个 bash 脚本：

[https://docs.datastax.com/en/ddac/doc/datastax_enterprise/install/uninstallDDAC.html?hl=uninstall%2Ccassandra](https://docs.datastax.com/en/ddac/doc/datastax_enterprise/install/uninstallDDAC.html?hl=uninstall%2Ccassandra)

下面是脚本代码：

```
# Stop services
/etc/init.d/cassandra stop
/etc/init.d/dse stop
/etc/init.d/opscenter-agent stop

# Remove packages
PACKAGES=(dsc dsc1.1 dsc12 dsc20 cassandra apache-cassandra1 dsc-demos \
dse dse-libhadoop-native dse-libhadoop dse-libcassandra dse-hive dse-libhive dse-pig \
dse-libpig dse-demos dse-libsqoop dse-libtomcat dse-liblog4j dse-libsolr dse-libmahout dse-full)
DEB_PACKAGES=(python-cql python-thrift-basic)
RPM_PACKAGES=(python26-cql python26-thrift)
if [ `which dpkg` ]; then
PLIST=(${PACKAGES[@]} ${DEB_PACKAGES[@]})
dpkg -P ${PLIST[*]}
rm -rf /etc/apt/sources.list.d/datastax.list
else
PLIST=(${PACKAGES[@]} ${RPM_PACKAGES[@]})
yum -y remove ${PLIST[*]}
rm -rf  /etc/yum.repos.d/datastax.repo
fi

# Cleanup log and configuration files
rm -rf /var/lib/cassandra/* /var/log/{cassandra,hadoop,hive,pig}/* /etc/{cassandra,dse}/* \
/usr/share/{dse,dse-demos} /etc/default/{dse,cassandra} 
```

要重新安装，只需运行此脚本，然后再次安装 cassandra，就像第一次安装一样。

编辑：似乎他们的脚本有点过时了。我不得不将 dsc20 添加到 PACKAGES 列表中。

编辑 2：链接坏了（是 [http://www.datastax.com/documentation/opscenter/3.2/webhelp/#opsc/online_help/opscRemovingPackages_t.html](http://www.datastax.com/documentation/opscenter/3.2/webhelp/#opsc/online_help/opscRemovingPackages_t.html)，感谢 Daisuke Aramaki 找到最新的链接）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-16T12:03:46.160

AFAIK，您的卸载步骤是正确的。

检查每个目录的权限。在我在 Ubuntu 10.04 上安装的 Cassandra 1.1.6 中，/etc/cassandra 归 root 所有，而 /var/lib/cassandra 和 /var/log/cassandra 归 cassandra 用户和组所有。

此外，您应该使用 init 脚本来启动 cassandra，如下所示：

```
sudo service cassandra start 
```

而不是直接从 sudo 开始。

我看到当以 root 身份而不是以 cassandra 用户身份手动运行 cassandra 时，权限会变得混乱，这是 init 脚本为您处理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-20T19:21:19.447

实际上问题是cassandra无法启动，因为它在其配置目录中找不到名为“log4j-server.properties”的文件，要解决您在那里遇到的问题，无需重新安装，只需执行以下操作解决问题：

[1) 从这里](http://apache.claz.org/cassandra/1.2.5/apache-cassandra-1.2.5-bin.tar.gz)下载 tarball 文件。

2）提取它：

```
$ tar -xzvf apache-cassandra-1.2.5.tar.bin.gz 
```

3）查看cassandra的配置路径在哪里。您可以从名为“/usr/share/cassandra/cassandra.in.sh”的文件中获取配置路径，查看名为“CASSANDRA_CONF”的键。

```
$ gedit /usr/share/cassandra/cassandra.in.sh 
```

4）从名为“conf”的目录中手动从提取的包（步骤2）中复制丢失的文件

```
$ sudo cp extracted_cassandra/conf/cassandra.yaml /etc/cassandra
$ sudo cp extracted_cassandra/conf/log4j-server.properties /etc/cassandra 
```

提示：

*   了解更多信息。如何安装 cassandra debian 包，检查[这个](http://wiki.apache.org/cassandra/DebianPackaging)
*   了解更多信息。如何从他们的存储库安装 cassandra，检查[这个](http://blog.eviac.com/2012/08/install-apache-cassandra-on-ubuntu.html)

*   如果要重新安装它，只需执行以下操作：

    $ sudo apt-get 删除卡桑德拉

    $ sudo apt-get install cassandra

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-13T16:37:43.603

因为我也遇到了同样的 XML 错误，这里有另一个答案。该错误也在[此 SO post](https://stackoverflow.com/questions/6574093/cassandra-starting-issue)中详细说明，其中 OP 无法启动 Cassandra。我按照您的步骤卸载并按照[本文](http://java.dzone.com/articles/installing-apache-cassandra)中的步骤重新安装。

## 我做了什么——我学到了什么

问题一定与 C* 版本有关。我最初使用的链接引导我使用以下命令进行安装：

```
deb http://www.apache.org/dist/cassandra/debian 10x main 
```

**取而代之的是**，我将命令升级为指向 Cassandra Debian 版本 11 (11x)。例如

```
deb http://www.apache.org/dist/cassandra/debian 11x main 
```

我还明智地卸载了 Cassandra 的所有内容，重新启动并强制通过新版本的 Cassandra

## 资源

对于在 Ubuntu 上安装 Cassandra 的另一个（旧）源，请尝试 Vineet Daniel[在 Ubuntu 上安装 Cassandra](http://vineetdaniel.blogspot.co.uk/2010/08/installing-cassandra-on-ubuntu.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-03T06:40:38.750

1.  删除已安装的 cassandra 包和配置文件：

    `sudo apt-get purge "cassandra-*" "datastax-*"`

2.  删除库和日志目录：

    `sudo rm -r /var/lib/cassandra`

    `sudo rm -r /var/log/cassandra`

# html - 如何获取不总是可见的 HTML 元素？

> ID：13390777
> 
> 赞同：4
> 
> 时间：2012-11-15T02:33:48.003
> 
> 标签：html, vb.net, drop-down-menu, web

我正在尝试制作一个程序，该程序将从我兄弟学校用来显示您当前成绩的网站中提取信息。

我基本上已经设置好了所有东西，但是我遇到了一件事情。

我为此使用了 WebBrowser，顺便说一下，我知道我应该使用 WebRequests。

有一个组合框（下拉菜单）将填充注册到家长帐户的学生列表。

但是，在单击框之前，不会将学生加载到组合框中。

我试图让 WebBrowser 只需单击组合框，但我无法让它工作。

这是组合框的 HTML：

```
<a id="droplist" tabindex="1" href="#students" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all ui-state-loading">SELECT A STUDENT<span class="ui-icon ui-icon-triangle-1-s"></span></a> 
```

这是包含未加载名称的 DIV 的 HTML：

```
<div id="students" class="hidden">
                 <ul></ul>
              </div> 
```

这是 DIV 的 HTML，其中包含加载时组合框中的名称：

```
<div id="students" class="hidden">
                 <ul><li><a href="#" id="17743">Aaron P. Hailey </a></li><li><a href="#" id="16265">Aidan C. Hailey </a></li><li><a href="#" id="19305">Ethan B. Hailey </a></li></ul>
              </div> 
```

我的猜测是我将不得不发送一个额外的请求来获取信息或其他东西，但有人能想到一个简单的解决方法吗？

我是VB的菜鸟，所以我遇到了很多麻烦。

谢谢，如果您需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T04:54:30.417

**fireEvent 方法**- 在对象上触发指定事件。

设置下拉值后，您可以尝试触发附加到下拉列表的事件（onchange）。

```
doc.getElementById("droplist").selectedindex=1
doc.getElementById("droplist").FireEvent("onchange") 
```

参考[这个](https://stackoverflow.com/questions/16347898/using-vba-excel-to-navigate-a-website-by-changing-dropdown-value/16349937#16349937)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T16:26:15.070

您正在查看的“组合框”附加了一个事件侦听器。单击此按钮会触发并向 Web 服务器发出 ajax 请求。您应该能够通过“网络”选项卡下的 Chrome 开发人员工具隔离返回所需成绩数据的 URI。这会记录页面发出的所有 HTTP 请求。获得 URI 后，您应该能够直接向它发出自己的请求，因此能够自己解析响应。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-30T20:21:16.717

将字段加载到页面后，您可以使用 jquery 的标准 val 函数访问它们的值。

$('#field1').val();

# c# - 基于 C# 桌面应用程序的加载器动画

> ID：13390778
> 
> 赞同：0
> 
> 时间：2012-11-15T02:33:55.647
> 
> 标签：c#, .net, desktop-application, loader

在jquery ajax beforeSend 中是否有类似的方法并在C# 中完成？

因为在网络中，我通常在按下添加按钮时会设置`beforendSend:`一个功能来显示图像并隐藏图像功能`complete:`

现在我想在 C# 桌面应用程序中做。有没有类似的？像某种使用进度条

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:44:26.533

这是一个winforms应用程序吗？它有一个可以使用的 ProgressBar 控件。WPF 也有一个。但是您将希望在后台线程上进行处理，以便您的 UI 保持响应并更新您的进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:12:15.340

您将需要执行后台处理和 UI 回调。下面非常简单的例子：

```
private void button3_Click(object sender, EventArgs e)
    {
        ProcessingEvent += AnEventOccurred;

        ThreadStart threadStart = new ThreadStart(LongRunningProcess);
        Thread thread = new Thread(threadStart);
        thread.Start();
    }

    private void LongRunningProcess()
    {
        RaiseEvent("Start");

        for (int i = 0; i < 10; i++)
        {
            RaiseEvent("Processing " + i);
            Thread.Sleep(1000);
        }

        if (ProcessingEvent != null)
        {
            ProcessingEvent("Complete");
        }
    }

    private void RaiseEvent(string whatOccurred)
    {
        if (ProcessingEvent != null)
        {
            ProcessingEvent(whatOccurred);
        }
    }

    private void AnEventOccurred(string whatOccurred)
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new Processing(AnEventOccurred), new object[] { whatOccurred });
        }
        else
        {
            this.label1.Text = whatOccurred;
        }
    }

    delegate void Processing(string whatOccurred);

    event Processing ProcessingEvent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T09:24:02.680

您需要实现如下：

```
 FrmLoading f2 = new FrmLoading();   // Sample form whose Load event takes a long time
    using (new PleaseWait(this.Location, () => Fill("a")))  // Here you can pass method with parameters
          { f2.Show(); } 
```

请稍等.cs

```
public class PleaseWait : IDisposable
{
    private FrmLoading mSplash;

    //public delegate double PrdMastSearch(string pMastType);
    public PleaseWait(Point location, Action methodWithParameters)
    {
        //mLocation = location;
        Thread t = new Thread(workerThread);
        t.IsBackground = true;
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        methodWithParameters();
    }
    public void Dispose()
    {
        mSplash.Invoke(new MethodInvoker(stopThread));
    }
    private void stopThread()
    {
        mSplash.Close();
    }
    private void workerThread()
    {
        mSplash = new FrmLoading();   // Substitute this with your own
        mSplash.StartPosition = FormStartPosition.CenterScreen;
        //mSplash.Location = mLocation;
        mSplash.TopMost = true;
        Application.Run(mSplash);
    }
} 
```

它工作 100% 正确......现在在我的系统中工作。

# ios - ios UITextChecker 无法将单词添加到字典中

> ID：13390782
> 
> 赞同：3
> 
> 时间：2012-11-15T02:34:28.320
> 
> 标签：ios, dictionary

我正在尝试通过`UITextChecker` 使用以下方法将一个单词添加到 iOS 字典中：

```
[UITextChecker learnWord:@"whatishouldadd"];

[UITextChecker hasLearnedWord::@"whatishouldadd"]<--return true 
```

但是，当我启动笔记并输入上述内容时，它带有红色下划线。

**另一个例子：** 我尝试`happizer`使用上面的方法在字典中添加。但是，当我开火笔记时，`happier`会提示。

我可以知道该函数是否`learnWord`实际上将工作添加到字典中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:45:25.197

根据`UITextChecker`课堂参考，[learnWord](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextChecker_Class/Reference/Reference.html#//apple_ref/occ/clm/UITextChecker/learnWord%3a) ...

> “告诉文本检查器学习指定的单词，以便它不会被评估为拼写错误。”

由于您正在创建`UITextChecker`应用程序的内部，因此`UITextChecker`学习单词的是您的，而不是整个`iPhone`字典。因此，在应用程序内部教授的单词将无法在全球范围内使用。

# javascript - 始终以高清播放 YouTube 视频：在 IE 上不起作用

> ID：13390785
> 
> 赞同：1
> 
> 时间：2012-11-15T02:34:30.290
> 
> 标签：javascript, jquery, html, youtube-api

我有一段 Javascript 可以成功地使嵌入式 YouTube 视频始终以高清格式播放（如果该视频也以高清格式上传）。

**我的问题：**当我在 Internet Explorer 中运行代码时，它不会在 HD720 中播放视频，它只能在 420（Large=420px）中播放。当我在 Chrome、Firefox 和 Safari 中运行这个确切的代码时，它们都在 HD720 中播放视频。

**你知道我怎样才能让 IE 总是在 HD720 中播放我的嵌入式 Youtube 视频吗？**

我的代码：请参阅下面的注释为什么“hd720”不起作用：

```
<script type="text/javascript" src="https://www.youtube.com/player_api"></script>
<script>
    function onPlayerReady(event) {
            event.target.setPlaybackQuality('highres'); 
            // NOTE: MAKING the above value 'hd720' makes NONE of the browsers
            // play the video in HD720, test it for yourself to see.
            // So thats NOT a solution.
    }

  function loadYouTubeVideo(uid) {
        setTimeout( function() {
                    var id         = uid;
                    var instPlayer = new YT.Player(id, {
                        height: '480',
                        width: '853',
                        enablejsapi: 1,
                        suggestedQuality: 'highres',
                        videoId: uid,
                        events: {
                                'onReady': onPlayerReady 
                        }
                    });
            }, 500);
    }
</script> 
```

然后你像这样在你的页面中嵌入一个 Youtube 视频（注意 *VIDEO_ID* 是你的 youtube 视频的唯一 ID）：

```
<div id="VIDEO_ID"></div>
<script>
    loadYouTubeVideo("VIDEO_ID");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:18:59.267

在 480 像素视频播放器中播放 720p（720 像素高）视频不会提高所看到的视频质量，因为额外的像素无法在设备上显示。事实上，与在 YouTube 服务器上进行转码时相比，调整大小必须以更注重性能的方式进行，并且您最终可能会获得比允许显示标准分辨率更差的播放质量。

默认情况下，YouTube 播放器将在考虑任何播放控件后选择适合播放器内部的最大分辨率（按高度）。即对于 480 像素高的播放器，适合的最高质量是 420p 版本。

我没有在不同的播放器和编解码器中明确测试 setPlaybackQuality 方法，以查看它是否具有与初始视频加载不同的行为，但我不认为其目的是让开发人员强制使用比实际显示更高的分辨率。

# php - 在多维数组PHP中获取父级的子级

> ID：13390787
> 
> 赞同：0
> 
> 时间：2012-11-15T02:34:58.020
> 
> 标签：php, multidimensional-array

我有一个多维数组（如下所示）。我试图做的是找到一个特定的值，如果该值有孩子，只列出那些孩子。因此，例如，如果正在搜索 slug 的“测试”，则页面上会列出所有“测试”的子项。“Test2”没有孩子，所以没有列出。如果正在搜索“/test/sub”（蛞蝓），并且由于它有孩子，我想显示所有孩子（例如“sh”、“rd”、“co”）。我不知道如何开始，所以非常感谢任何帮助。

```
 Array
    (
     [test] => Array
      (
        [children] => Array
         (
           [2] => Array
             (
               [parent] => 4
               [title] => Sub
               [slug] => test/sub/
               [id] => 2
               [children] => Array
               (
                 [3] => Array
                 (
                   [parent] => 2
                   [title] => sh 
                   [slug] => test/sub/sh
                   [id] => 3
                 )
                 [27] => Array
                 (
                   [parent] => 2
                   [title] => RD
                   [slug] => test/sub/rd
                   [id] => 27
                 )
                 [145] => Array
                 (                                     
                   [parent] => 2
                   [title] => cO
                   [slug] => test/sub/co
                   [id] => 145
                 )
               )
            )
            [8] => Array
            (
              [parent] => 4
              [title] => sub2
              [slug] => test/sub2
              [id] => 8
            )
            [19] => Array
            (
              [parent] => 4
              [title] => sub3
              [slug] => test/sub3
              [id] => 19
              [children] => Array
              (
                [20] => Array
                (
                 [parent] => 19
                 [title] => child1
                 [slug] => test/sub3/child1
                 [id] => 20
                )
                [21] => Array 
                (
                 [parent] => 19     
                 [title] => child2
                 [slug] => test/sub3/child2                                                                                          [id] => 21
                 )
               )
            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:26:39.337

行。我有办法解决这个问题，但我不确定它是否最有效。假设查询数据库后得到的对象是$anObject。所以我们会这样做，

```
for($i = 0;$i < 50;$i++){
if($anObject->test->children[$i]){
for($j = 0;$j < 200;$j++){
$slug = $anObject->test->children[$i]->$j->slug;
echo $slug;
}
}} 
```

基本上，我正在检查是否存在针对特定 $i 值的特定对象，然后查看它是否具有针对特定 $j 值的值。如果您知道整数的范围，则可以更改这些值。当我们得到它时，我们在 $slug 变量中获取它，然后在该部分添加一些过程来使用这个值。

让我知道这是否有帮助。

# c# - 如何减少组合框项目之间的间距和/或显示所有项目？

> ID：13390789
> 
> 赞同：0
> 
> 时间：2012-11-15T02:35:03.940
> 
> 标签：c#, combobox, windows-8, winrt-xaml

在我有很多项目（> 10）的组合框中，我需要：（a）在下拉菜单发生时显示所有项目 - 或：（b）减少项目之间的空间（看起来过多，几乎“卡通")

所以，我真的更喜欢两者。我该如何做一个或另一个或两者兼而有之？

看起来 MaxDropDownHeight 属性只是票，但设置为 Infinity 它不起作用/对 Infinity 有一个奇怪的定义。

这是其中一个存在此问题的 XAML：

```
<ComboBox x:Name="comboBoxDay" Grid.Row="4" Grid.Column="5" Margin="8" IsEnabled="False"></ComboBox> 
```

...以及它包含的内容：

```
for (int i = 1; i < 32; i++)
{
    comboBoxDay.Items.Add(i);
} 
```

## 更新

将高度设置为 15 会截断部分文本；18 也是如此。即便如此，也只显示 3 月至 11 月。我还将 MaxDropDownHeight 设置为第一个 320，然后是 520。这是相关组合框的整个 XAML：

```
 <ComboBox x:Name="comboBoxFromMonth" Grid.Row="1" Grid.Column="1" 
Height="24" Width="80" MaxDropDownHeight="520" HorizontalAlignment="Left" 
VerticalAlignment="Center" Margin="4">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" Height="20" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

...（1 月、2 月和 12 月在没有滚动的情况下仍然无法显示，尽管下面有足够的空间 - 房地产不是问题）。

似乎组合框中的所有项目都应该默认显示，而不需要跳过箍来显示它们……至少有合理数量的项目（42 个或更少）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:47:29.240

对于（a），您是对的，您可以使用`MaxDropDownHeight`，但它只会转到屏幕的顶部/底部，而不会进一步。要使其垂直填充屏幕，您需要修改默认[控件模板](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)并为 Popup 的`Placement`属性赋予不同的值（例如，`Center`）：

对于（b），您可以通过定义一个来减少元素之间的空间`ItemTemplate`：

```
<ComboBox>
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" Height="15" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:00:08.410

我也试图让弹出窗口向下显示，最终我在编辑模板后设置了边距。在给定的链接中，给出了一个命令 PopupPlacement，但它在 WinRT 中不起作用。但是这个提示帮助我理解了这个想法。

# java - 将 Excel 版本作为参数传递给 Cognos

> ID：13390791
> 
> 赞同：1
> 
> 时间：2012-11-15T02:35:12.680
> 
> 标签：java, cognos-8

我们在 java 应用程序中形成 URL 并将其传递给 cognos 服务器以生成报告。目前 Excel 报告默认为 2002。有没有办法通过 URL 将 Excel 版本号更改为 2007 到 cognos 服务器？

我知道这可以通过手动设置 excel 版本在 Cognos 服务器中为每个报告完成，但想知道是否有可以通过 URL 传递的参数值来设置 excel 版本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T02:17:46.800

已经找到解决方案。用于`run.outputFormat=spreadsheetML`告诉 Cognos 生成 Excel 2007 格式的 excel 电子表格。

Cognos 支持的格式有`CSV, HTML, HTMLFragment, MHT, PDF, singleXLS, XHTML, layoutDataXML, spreadsheetML, rawXML, XLWA, and XML`

来源：[使用参数化 URL 执行任务](http://pic.dhe.ibm.com/infocenter/tivihelp/v35r1/index.jsp?topic=%2Fcom.ibm.tivoli.tcr.doc_31%2Fttcr_urls.html)

# linq - 查询缓存...如何清除？

> ID：13390794
> 
> 赞同：1
> 
> 时间：2012-11-15T02:35:35.697
> 
> 标签：linq, entity-framework

我正在使用 Linq 查询实体框架 SQL 数据库。

这是我的代码：

```
var found = this.keys.FirstOrDefault(r => r.Key.ToLowerInvariant() == key.ToLowerInvariant()); 
```

我收到以下错误：

> LINQ to Entities 无法识别方法 'System.String ToLowerInvariant()' 方法，并且此方法无法转换为存储表达式。

我立即将其更改为：

```
var found = this.keys.FirstOrDefault(r => r.Key.ToLower() == key.ToLower()); 
```

但是，我收到了同样的错误。我用以下方法对其进行了测试：

```
var found = this.keys.FirstOrDefault(); 
```

我仍然收到完全相同的错误。这是以某种方式被缓存还是什么？任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:58:22.740

针对 EF 的查询被转换为 SQL，因此，它尝试转换您的查询但没有成功，因为 EF 无法转换 LINQ to objects 可以转换的许多表达式。您可以在 msdn 中找到有关它的更多信息。

# python - Python 搜索、列出和选择打印

> ID：13390797
> 
> 赞同：1
> 
> 时间：2012-11-15T02:36:02.460
> 
> 标签：python

我有一个文件，其中包含来自有机分子的几种能量。我想制作一个允许我打印选定能量的python脚本，比如说第一个或第二个或最后一个或最后一个之前的第三个等等。我正在学习python，我知道我应该做搜索列表，插入第二个参数，指示我要打印的能量。由于我正在学习，我不知道如何做到这一点。这是我制作的脚本，但第一个脚本只打印第一个能量，第二个脚本只打印最后一个。非常感谢任何帮助。（这是一个链接，其中包含我用作输入的文件示例[https://dl.dropbox.com/u/63216126/ActCat.out](https://dl.dropbox.com/u/63216126/ActCat.out)）

我制作的第一个代码

```
 import sys
    import re

    filename = sys.argv[1]
    newfile = str(filename) + ".3d"

    openold = open(filename,"r")
    opennew = open(newfile,"w")

    rline = openold.readlines()

    for line in rline:
        if re.search( r"SCF Done", line ):
            words = line.split()

            energy = float( words[4] )

            print >>opennew,  "The energy of the molecule is %f kcal mol-1" % energy
            break

    openold.close()
    opennew.close() 
```

我制作的第二个代码

```
 import sys
    import re

    filename = sys.argv[1]
    newfile = str(filename) + ".3d"

    openold = open(filename,"r")
    opennew = open(newfile,"w")

    start = 0

    rline = openold.readlines()

    for i in range (len(rline)):
        if "SCF Done" in rline[i]:
            start = i

    for line in rline[start:start+1] :
        words = line.split()
        energy = words[4]
        print >>opennew,  "The energy of the molecule is %s kcal mol-1" % energy
        break

    openold.close()
    opennew.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:02:36.547

您想选择性地选择打印哪种能量吗？这会将所有能量收集到一个列表中，然后您可以索引该列表以打印您想要的。请注意，我`break`从循环中删除了它，因此它收集了所有这些。

```
import sys
import re

filename = sys.argv[1]
newfile = str(filename) + ".3d"

openold = open(filename,"r")
opennew = open(newfile,"w")

rline = openold.readlines()
energies = []
line_number = 0
for line in rline:
    line_number += 1
    if re.search( r"SCF Done", line ):
        words = line.split()

        energy = float( words[4] )
        energies.append(("The energy of the molecule is %f kcal mol-1" % energy, line_number))

print >>opennew, energies[0] # print first energy and line number
print >>opennew, energies[4] # print 5th energy and line number
print >>opennew, energies[-1] # print last energy and line number
print energies[1][0] # print energy
print energies[1][1] # print line number

openold.close()
opennew.close() 
```

# oracle - Oracle -> 自动更改表的列

> ID：13390802
> 
> 赞同：0
> 
> 时间：2012-11-15T02:37:00.300
> 
> 标签：oracle, plsql

无论如何我们可以根据日期自动更改列的值吗？像编写程序或触发器一样？我需要在不插入或更新任何其他表/列的情况下更改值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:21:56.993

不直接，不。

`DBMS_JOB`您可以使用其中一个或`DBMS_SCHEDULER`将在后台运行并`UPDATE`在将来的某个时间点发出一个作业来提交作业。您可以在插入或更新行时从触发器提交作业，即

```
CREATE OR REPLACE TRIGGER trigger_name
  BEFORE INSERT OR UPDATE ON table_name
  FOR EACH ROW
DECLARE
  l_jobno PLS_INTEGER;
BEGIN
  IF :new.status = 'active'
  THEN 
    dbms_job.submit( l_jobno,
                     q'{UPDATE table_name SET status = 'inactive' WHERE table_id = }' || :new.table_id,
                     sysdate + x ); 
  END IF;
END; 
```

当然，根据我们所讨论的行数，您可能会更好地拥有一个每隔几分钟运行一次的作业，该作业会根据您定义的任何标准更新表。

# java - 检查字符串以查看在 Java 中添加的内容

> ID：13390813
> 
> 赞同：2
> 
> 时间：2012-11-15T02:39:09.377
> 
> 标签：java

我有一个化学化合物 ex 'H'，我想在其中添加 'H'、'C'、'O' 或 'N'。如何签入我要添加到当前化合物的代码？

其次，当我添加到我当前的化合物中时，它可能是 H2。因此，如果我添加 H，它将变成 H2H，但我希望它是 H3，我该如何解决这个问题？

我不太确定如何明智地进行编码，但是

```
String Compound = "H2";
String a="H";
String b="C";
String c="O";
string d="N";

if (I am adding "H" to Compound){

//do something

}

if(I am adding "C" to Compound) {

//do something else

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:54:09.077

为了使事情更容易理解和更***面向对象***，我认为使用`Compound`您自己的类可能会按需要工作。

```
class Compound {
    String last;
    String compound;
    int lastSuffixCount;

    Compound() {
        this.last = "";
        this.compound = "";
        this.lastSuffixCount = 0;
    }

    public String getCompound() {
        return compound;
    }

    public void setCompound(String compound) {
        this.compound = compound;
    }

    public void add(String suffix, int times) {
        if (suffix.equals(this.last) && times > 0) 
        {
            this.compound = compound.replace(lastSuffixCount + "", "");
            this.lastSuffixCount = lastSuffixCount + times;
            this.compound += lastSuffixCount;
        } else if (times > 0) {
            this.compound += suffix + times;
        }
        this.lastSuffixCount = times;
        this.last = suffix;
    }
} 
```

**示例驱动程序：**

```
public static void main(String[] args) {
    Compound c = new Compound();
    c.add("H", 2);
    System.out.println(c.getCompound());
    c.add("H", 1);
    System.out.println(c.getCompound());
    c.add("O", 6);
    c.add("H", 4);
    System.out.println(c.getCompound());
} 
```

**输出：**

```
H2
H3
H3O6H4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:55:31.130

您想要构建一个正则表达式，它将捕获大写字母、小写字母和数字。这会将公式分解为不同的元素及其计数。使用地图来保存计数应该可以。

输入像`C8H10N4O2`

你最终会得到类似的东西：

```
{
  "C" : 8,
  "H" : 10,
  "N" : 4,
  "O" : 2
} 
```

对两个操作数执行此操作，并将计数加在一起。

遍历地图的键并将它们与它们的计数放在一起以获得您的答案。您如何迭代密钥可能必须由化学命名规则决定，我对此一无所知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:02:43.790

我感到有点困惑`(I am adding "C" to Compound)`

您想检测您添加的字符串是否包含“C”（或其他字符串）？

采用`String.indexOf(String s)`

例子：

```
String c = "C";
String somethingAdding = "CH3";
if(somethingAdding.indexOf(c) == -1)
{
    // NOT adding C
}
else
{
    // adding C
} 
```

但我真的建议你制作一个类来包装数据，而不是使用字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T03:55:04.553

这是我的面向对象方法：

```
public class Compound {

    private static Pattern elementPattern = Pattern.compile("[A-Z]\\d*");

    private Map<Character, Integer> elements;

    public Compound(String compoundString) {
        elements = new HashMap<Character, Integer>();

        Matcher matcher = elementPattern.matcher(compoundString);
        while(matcher.find()) {
            String elementAndCount = m.group()

            char element = elementAndCount.charAt(0);
            int count = (elementAndCount.length() > 1) ?
                    Integer.valueOf(elementAndCount.substring(1)) :
                    1;

            elements.put(element, count);
        }
    }

    public void addElement(Character element) {
        addElement(element, 1);
    }

    public void addElement(Character element, int count) {
        if (elements.containsKey(element)) {
            int currentCount = elements.get(element);
            elements.put(element, count + 1);
        } else {
            elements.put(element, 1);
        }
    }

    @Override
    public String toString() {
        StringBuilder toReturn = new StringBuilder();
        for (Map.Entry<Character, Integer> entry : elements.entrySet()) {
            toReturn.append("" + entry.getKey() + entry.getValue());
        }
        return toReturn.toString();
    }
}

            if (element 
```

# .htaccess - 基于伪造引荐来源网址的重定向

> ID：13390817
> 
> 赞同：3
> 
> 时间：2012-11-15T02:39:58.420
> 
> 标签：.htaccess

我认为某些恶意机器人或用户在请求中伪造了引用者，从而绕过了我的拒绝声明。

除其他片段外，我的 htaccess 具有以下内容

```
 ErrorDocument 403 "Nothing Interesting Here"
    order allow,deny
    deny from .eviluser.org
    allow from all 
```

我的 htaccess 中也有：

```
 RewriteCond %{HTTP_REFERER} ^http(s)?://(www\.)?eviluser.*$ [NC]
    RewriteRule .* - [F,L] 
```

但我的日志显示：

```
 wnode1.eviluser.org - - [14/Nov/2012:18:21:44 -0500] "GET /some-document.html HTTP/1.0" 200 68584 "http://myoriginaldomain/some-document.html" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0" 
```

问题：1）如果 wnode1.eviluser.org 被拒绝，它怎么可能得到一个 200 代码？2) 他们是否通过伪造作为我网站上的文件的推荐人来绕过这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:00:01.090

Apache 的[mod_authz_host 文档](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow)建议如果您在`allow from`语句中使用主机名，它将进行反向查找。没有提到任何内容`deny from`，但我认为这以相同的方式工作。[这篇博客文章](http://betabug.ch/blogs/ch-athens/933)表明这​​个假设是正确的。

`deny from`鉴于此，至少对于语句来说，伪造原始主机名是不可能的。做到这一点的唯一方法是在数据包级别伪造原始 IP 地址，但是在[非常有限的情况](http://nmap.org/book/idlescan.html)下可以使用它。另一方面，你`RewriteCond %{HTTP_REFERER}`的显然是伪造的。

我对 Apache 配置不够好，无法查看您的代码并查看是否存在问题，但上述提示可能是配置错误而不是 Apache 限制。

我会尝试根据 IP 地址（例如`deny from 100.100.0.0`）拒绝，看看你是否会得到更好的结果。顺便说一句，您是否测试过自己的主机名？（例如，`deny from localhost`），或者尝试拒绝具有您控制的有效反向查找的机器？

# youtube-api - YouTube 播放列表 API 返回 404 错误

> ID：13390824
> 
> 赞同：1
> 
> 时间：2012-11-15T02:41:09.007
> 
> 标签：youtube-api, gdata-api, atom-feed

突然间，我网站上的所有 YouTube 视频都消失了，我正在使用以下 URL 从播放列表中获取信息（根据需要更改播放列表 ID）：

[http://gdata.youtube.com/feeds/api/playlists/27D1E834D93C2D88?&max-results=50](http://gdata.youtube.com/feeds/api/playlists/27D1E834D93C2D88?&max-results=50)

这几个月来一直很好，即使是今天早上，但在今天午餐时间左右，一切都消失了，从那以后就再也没有出现过。我得到的只是 404 错误，有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:14:55.570

我最近遇到了同样的问题。

您可以将 PL 添加到播放列表 ID 的开头，因此在您的情况下：

[http://gdata.youtube.com/feeds/api/playlists/PL27D1E834D93C2D88?&max-results=50](http://gdata.youtube.com/feeds/api/playlists/PL27D1E834D93C2D88?&max-results=50)

这目前对我有用。不知道为什么 YouTube 改变了这一点。

这是关于同一主题的另一篇文章。 [当播放列表 ID 没有以“PL”为前缀时，YouTube API 调用播放列表提要失败](https://stackoverflow.com/questions/13390612/youtube-api-calls-to-playlist-feed-fails-when-playlist-ids-are-not-prefixed-with)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:07:08.230

这是一个无意的更改，将被还原。有关更多详细信息，请参阅问题跟踪器：[https ://code.google.com/p/gdata-issues/issues/detail?id=3599](https://code.google.com/p/gdata-issues/issues/detail?id=3599)

# android - AlarmManager 和 IntentService...仅在启动后完成第一个周期

> ID：13390826
> 
> 赞同：0
> 
> 时间：2012-11-15T02:41:27.150
> 
> 标签：android, alarmmanager, intentservice

所以我得到了这个警报管理器，它可以由带有 BOOT_COMPLETED 的 intentService 触发。

警报管理器的工作是每 10 分钟调用另一个意图服务。此意图服务更新 SQLite 数据库值。

```
7:00  = boot time, alarm manager set up
7:10 = intent service called, increment a value in SQLITE, "Week" column, from value 1 to 2
7:20 = same as above, value 2 to 3
7:21 = turn off the phone..
7:22 = turn on the phone, set up the alarm manager again
7:30 = same as 7:10 and 7:20 function, 3 to 4
7:31 = turn off again
7:55 = turn on again, the function that should be off twice, (7:40 and 7:50) but it only goes off once, meaning the value was change from 4 to 5, instead of 4 to 5 to 6.. 
```

每周的每一次变化，意图服务都会根据数量做其他事情，我永远不应该跳过任何一周

```
@Override
public void onReceive(Context context, Intent intent) {
    PowerManager pm = (PowerManager) context
            .getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(
            PowerManager.PARTIAL_WAKE_LOCK, "");
    wl.acquire();

    // Put here YOUR code.
    Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For
                                                                            // example

    wl.release();
    context.startService(new Intent(context, CheckClassroom.class));

    SharedPreferences a = context.getSharedPreferences("mPref", 0);
    SharedPreferences.Editor editor = a.edit();
    long interval = System.currentTimeMillis();
    editor.putLong("first", interval + (30 * 1000));
    int idnow = a.getInt("idnow", 1);
    idnow = idnow + 1;
    editor.putInt("idnow", idnow);

    editor.commit();

}

public void SetAlarm(Context context) {
    SharedPreferences a = context.getSharedPreferences("mPref", 0);

    long iFirst = a.getLong("first", System.currentTimeMillis()
            + (30 * 1000));

    AlarmManager am = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(context, Alarm.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);

    am.setRepeating(AlarmManager.RTC_WAKEUP, iFirst, 30 * 1000, pi); // 
} 
```

# java - 在 Java 中使用 STR_TO_DATE 插入日期，带有 PreparedStatement

> ID：13390827
> 
> 赞同：0
> 
> 时间：2012-11-15T02:41:31.127
> 
> 标签：java, mysql, date, prepared-statement, string-to-datetime

假设我们有一个名为*FrmRegistration*的 JFrame 。它的功能是将数据插入一个名为*records*的表中。

MySQL 的命令**desc 记录**将导致以下结果：

```
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| id        | varchar(7)   | NO   | PRI |         |       | 
| name      | varchar(100) | NO   |     | NULL    |       | 
| birthday  | date         | NO   |     | NULL    |       |
+-----------+--------------+------+-----+---------+-------+ 
```

在*FrmRegistration*中有一个用于生日输入的 JFormattedTextField，我们称之为*ftfBirthday*。在 Netbeans 中，我们通过右键单击组件并转到属性 -> 代码选项卡 -> 变量名来将名称放入组件中。或右键单击 -> 自定义代码 -> 重命名...按钮。

右键单击该字段并转到“属性”，然后在 FormatterFactory 中单击“...”按钮。使用以下命令创建自定义字段：####/##/##

JFormattedTextField 的原因是用户不会因为输入斜线而浪费时间。它们会自动出现。

*在FrmRegistration*中名为 Insert的按钮的源代码中应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:41:31.127

在转到源代码之前，右键单击日期字段并转到属性。复制文本的内容。它应该是（a = 一个空格）：

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

它将在“ **} else if (” // “.equals(birthday)) {** ” 行中使用。

（请参阅正确参数的代码）

我添加了一些额外的东西，比如检查字段是否为空。

```
 try {
                Class.forName("com.mysql.jdbc.Driver");

                try (Connection con = DriverManager.getConnection(

                                "jdbc:mysql://localhost/database_name_here",
                                "username_here", "password_here")) {

                    String if = txtId.getText();
                    String name = txtName.getText();
                    String birthday = ftfBirthday.getText();

                    PreparedStatement stmt = con.prepareStatement(

                            "INSERT INTO records "
                            + "(id, name, birthday)"
                            + "VALUES(?,?,STR_TO_DATE(?,'%Y/%m/%d'))");

                    if (id.isEmpty()) {
                        JOptionPane.showMessageDialog(null,
                                "The ID field must be completed!");

                    } else if (name.isEmpty()) {
                        JOptionPane.showMessageDialog(null,
                                "The Name field must be completed!");

                    } else if ("    /  /  ".equals(birthday)) {
                        JOptionPane.showMessageDialog(null,
                                "The Birthday field must be completed!");

                    } else {

                        stmt.setString(1, id);
                        stmt.setString(2, name);
                        stmt.setString(3, birthday);

                        stmt.executeUpdate();

                        JOptionPane.showMessageDialog(this, " Data was saved successfully! ");

                    }

                }

            } catch (SQLException e) {
                JOptionPane.showMessageDialog(this, "SQL command error "
                        + e.getMessage());

            } catch (ClassNotFoundException e) {
                JOptionPane.showMessageDialog(this,
                        " Database driver not found ");

        } 
```

就是这样。希望它可以帮助某人！:-)

# jsf - PrimeFaces Gmap 不渲染（在最简单的例子中）

> ID：13390829
> 
> 赞同：1
> 
> 时间：2012-11-15T02:41:37.533
> 
> 标签：jsf, jsf-2, primefaces

我有一个最简单的页面之一`p:gmap`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <f:view>
        <h:head>
            <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
        </h:head>

        <h:body>
            Map:
            <p:gmap center="49.967109, 8.80198" zoom="15" type="HYBRID" />
        </h:body>
    </f:view>

</html> 
```

但是，这在 Map: 标题下绝对没有显示任何内容。

我意识到脚本连接到某些地方，但没有呈现任何内容。

**问：**出了什么问题，你如何解决这个问题？

PS：我正在使用所有版本的 PF 3.x ... 交换它们没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T04:18:22.947

您缺少高度和宽度：

```
<p:gmap center="41.381542, 2.122893" zoom="15" type="HYBRID" style="width:600px;height:400px" /> 
```

# python - 我有一个复杂的模型问题...里面有更多信息

> ID：13390835
> 
> 赞同：0
> 
> 时间：2012-11-15T02:42:16.413
> 
> 标签：python, django, django-models

所以基本上我的应用程序当然有用户，每个用户可以创建 5 个“ModelA”实例。很简单，但也有与“ModelA”和用户模型相关的“ModelB”。我希望用户能够创建总共 15 个“ModelB”实例，但每个“ModelA”实例只能绑定 5 个“ModelB”实例？

有小费吗？

我为每个用户处理 5 个“ModelA”实例的第一部分的方式是这样的：

```
def clean(self):
        new_instance = self.__class__
        if (new_instance.objects.count() > 4):
            raise ValidationError(
                "Users may only create 5 %s." % new_instance.verbose_name_plural
            )
        super(ModelA, self).clean() 
```

谢谢

编辑：（假设内置 Django 用户功能）

```
class ModelB(models.Model):
    user = models.ForeignKey(User)
    modelA = models.ForeignKey('ModelA')
    other_field = models.CharField(max_length=50)

class ModelA(models.Model):
    user = models.ForeignKey(User)
    other_field = models.CharField(max_length=50) 
```

基本上，用户可以创建 5 个“ModelA”实例，并且对于每个实例，他们可以创建 3 个“ModelB”实例。

我怎样才能在模型逻辑中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:20:09.310

这行得通吗？

```
class ModelB(models.Model):
  user = models.ForeignKey(User)
  modelA = models.ForeignKey('ModelA', related_name = 'modelbs')
  other_field = models.CharField(max_length=50)

  def clean(self):
    if (self.modelA.modelbs.all().count() > 2):
        raise ValidationError(
            "ModelA may create may only create 3 modelBs "
        )
    super(ModelB, self).clean()

class ModelA(models.Model):
  user = models.ForeignKey(User, related_name = 'modelas')
  other_field = models.CharField(max_length=50)

  def clean(self):
    if (self.user.modelas.all().count() > 2):
        raise ValidationError(
            "User may create may only create 3 modelAs "
        )
    super(ModelA, self).clean() 
```

# function - 太阳系映射，ODE45 故障

> ID：13390836
> 
> 赞同：6
> 
> 时间：2012-11-15T02:42:18.987
> 
> 标签：function, matlab, system

以下代码旨在通过结合每个重要天体对其他天体的影响来绘制太阳系。当然，它应该导致预期的轨道。在最终的嵌入式函数`GravityDE`中，它无法从中读取值`PlanetVec`，因此，每次都无法产生正确的新结果。我们得到错误

```
??? Undefined function 'GravityDE' for input arguments of type double. 
```

任何有关如何解决此问题的建议都将受到欢迎！

```
function Gravity1()

clear;
format long eng;
load('solar_system_data.mat');

StartTime = 0;
TimeStep = 24 * 3600 * 10;
EndTime = 24 * 3600 * 100;

TVec = StartTime:TimeStep:EndTime;
TimeStepMin = StartTime:2:TimeStep;

%Column Vectors for initial conditions
SunVec = [xposition(1), yposition(1), vx(1), vy(1),mass(1),1];
MercuryVec = [xposition(2), yposition(2), vx(2), vy(2),mass(2),2];
VenusVec = [xposition(3), yposition(3), vx(3), vy(3),mass(3),3];
EarthVec = [xposition(4), yposition(4),vx(4), vy(4),mass(4),4];
MoonVec = [xposition(10), yposition(10), vx(10), vy(10),mass(10),10];
MarsVec = [xposition(5), yposition(5), vx(5), vy(5),mass(5),5];
JupiterVec = [xposition(6), yposition(6), vx(6), vy(6),mass(6),6];
SaturnVec = [xposition(7), yposition(7), vx(7), vy(7),mass(7),7];
UranusVec = [xposition(8), yposition(8), vx(8), vy(8),mass(8),8];
NeptuneVec = [xposition(9), yposition(9), vx(9), vy(9),mass(9),9];
PlanetVec=[SunVec(1),SunVec(2),SunVec(3),SunVec(4),SunVec(5),SunVec(6);MercuryVec(1),       MercuryVec(2), MercuryVec(3), MercuryVec(4),MercuryVec(5),MercuryVec(6);VenusVec(1), VenusVec(2), VenusVec(3), VenusVec(4),VenusVec(5),VenusVec(6);EarthVec(1), EarthVec(2), EarthVec(3), EarthVec(4),EarthVec(5),EarthVec(6);MoonVec(1),MoonVec(2),MoonVec(3),MoonVec(4),MoonVec(5),MoonVec(6);MarsVec(1), MarsVec(2), MarsVec(3), MarsVec(4),MarsVec(5),MarsVec(6);JupiterVec(1), JupiterVec(2), JupiterVec(3), JupiterVec(4),JupiterVec(5),JupiterVec(6);SaturnVec(1), SaturnVec(2), SaturnVec(3), SaturnVec(4),SaturnVec(5),SaturnVec(6);UranusVec(1), UranusVec(2),UranusVec(3), UranusVec(4),UranusVec(5),UranusVec(6);NeptuneVec(1),       NeptuneVec(2), NeptuneVec(3), NeptuneVec(4),NeptuneVec(5),NeptuneVec(6)];
n=0;
while n<EndTime;
%Built in solver
[TimeVec, SunMat] = ode45(@GravityDE, TimeStepMin, SunVec);
[TimeVec, MercuryMat] = ode45(@GravityDE, TimeStepMin, MercuryVec);
[TimeVec, VenusMat] = ode45(@GravityDE, TimeStepMin, VenusVec);
[TimeVec, EarthMat] = ode45(@GravityDE, TimeStepMin, EarthVec);
[TimeVec, MoonMat] = ode45(@GravityDE, TimeStepMin, MoonVec);
[TimeVec,  MarsMat] = ode45(@GravityDE, TimeStepMin, MarsVec);
[TimeVec, JupiterMat] = ode45(@GravityDE, TimeStepMin, JupiterVec);
[TimeVec, SaturnMat] = ode45(@GravityDE, TimeStepMin, SaturnVec);
[TimeVec,  UranusMat] = ode45(@GravityDE, TimeStepMin, UranusVec);
[TimeVec, NeptuneMat] = ode45(@GravityDE, TimeStepMin, NeptuneVec);

SunXVec = SunMat (end,1);
SunYVec = SunMat (end,2);
SunVXVec = SunMat(end,3);
SunVYVec = SunMat(end,4);

MercuryXVec = MercuryMat (end,1);
MercuryYVec = MercuryMat (end,2);
MercuryVXVec = MercuryMat(end,3);
MercuryVYVec = MercuryMat(end,4);

VenusXVec = VenusMat (end,1);
VenusYVec = VenusMat (end,2);
VenusVXVec = VenusMat(end,3);
VenusVYVec = VenusMat(end,4);

EarthXVec = EarthMat (end,1);
EarthYVec = EarthMat (end,2);
EarthVXVec = EarthMat(end,3);
EarthVYVec = EarthMat(end,4);

MoonXVec = MoonMat (end,1);
MoonYVec = MoonMat (end,2);
MoonVXVec = MoonMat(end,3);
MoonVYVec =MoonMat(end,4);

MarsXVec = MarsMat (end,1);
MarsYVec = MarsMat (end,2);
MarsVXVec = MarsMat(end,3);
MarsVYVec = MarsMat(end,4);

JupiterXVec = JupiterMat (end,1);
JupiterYVec = JupiterMat (end,2);
JupiterVXVec = JupiterMat(end,3);
JupiterVYVec =JupiterMat(end,4);

SaturnXVec = SaturnMat (end,1);
SaturnYVec = SaturnMat (end,2);
SaturnVXVec = SaturnMat(end,3);
SaturnVYVec =SaturnMat(end,4);

UranusXVec = UranusMat (end,1);
UranusYVec = UranusMat (end,2);
UranusVXVec = UranusMat(end,3);
UranusVYVec =UranusMat(end,4);

NeptuneXVec = NeptuneMat (end,1);
NeptuneYVec = NeptuneMat (end,2);
NeptuneVXVec = NeptuneMat(end,3);
NeptuneVYVec =NeptuneMat(end,4);

SunVec=[SunXVec,SunYVec,SunVXVec,SunVYVec,mass(1),1];
MercuryVec = [MercuryXVec, MercuryYVec, MercuryVXVec, MercuryVYVec,mass(2),2];
VenusVec = [VenusXVec, VenusYVec, VenusVXVec, VenusVYVec,mass(3),3];
EarthVec = [EarthXVec, EarthYVec, EarthVXVec, EarthVYVec,mass(4),4];
MoonVec = [MoonXVec,MoonYVec,MoonVXVec,MoonVYVec,mass(10),10];
MarsVec = [MarsXVec, MarsYVec, MarsVXVec, MarsVYVec,mass(5),5];
JupiterVec = [JupiterXVec, JupiterYVec, JupiterVXVec, JupiterVYVec,mass(6),6];
SaturnVec = [SaturnXVec, SaturnYVec, SaturnVXVec, SaturnVYVec,mass(7),7];
UranusVec = [UranusXVec, UranusYVec,UranusVXVec, UranusVYVec,mass(8),8];
NeptuneVec = [NeptuneXVec, NeptuneYVec, NeptuneVXVec, NeptuneVYVec,mass(9),9];
PlanetVec=[SunVec(1),SunVec(2),SunVec(3),SunVec(4),SunVec(5),SunVec(6);MercuryVec(1),                MercuryVec(2), MercuryVec(3), MercuryVec(4),MercuryVec(5),MercuryVec(6);VenusVec(1),  VenusVec(2), VenusVec(3), VenusVec(4),VenusVec(5),VenusVec(6);EarthVec(1), EarthVec(2),   EarthVec(3),   EarthVec(4),EarthVec(5),EarthVec(6);MoonVec(1),MoonVec(2),MoonVec(3),MoonVec(4),MoonVec(5),MoonVec(6);MarsVec(1), MarsVec(2), MarsVec(3), MarsVec(4),MarsVec(5),MarsVec(6);JupiterVec(1),  JupiterVec(2), JupiterVec(3), JupiterVec(4),JupiterVec(5),JupiterVec(6);SaturnVec(1),  SaturnVec(2), SaturnVec(3), SaturnVec(4),SaturnVec(5),SaturnVec(6);UranusVec(1),  UranusVec(2),UranusVec(3), UranusVec(4),UranusVec(15),UranusVec(6);NeptuneVec(1),  NeptuneVec(2), NeptuneVec(3), NeptuneVec(4),NeptuneVec(5),NeptuneVec(6)];

plot (SunXVec,SunYVec,'.','Color','yellow');
hold on;
plot (MercuryXVec,MercuryYVec,'.','Color','green');
hold on;
plot (VenusXVec,VenusYVec,'.','Color','blue');
hold on;
plot (EarthXVec,EarthYVec, '.','Color', 'red');
hold on;
plot (MoonXVec,MoonYVec, '.','Color','black');
hold on;
plot (MarsXVec,MarsYVec, '.','Color','black');
hold on;
plot (JupiterXVec,JupiterYVec,'.','Color','green');
hold on;
plot (SaturnXVec,SaturnYVec, '.','Color','blue');
hold on;
plot (UranusXVec,UranusYVec, '.','Color','red');
hold on;
plot (NeptuneXVec,NeptuneYVec, '.','Color','blue');
hold on;
n=n+TimeStep;
end

function dYVec = GravityDE (TimeStep, YVec,PlanetVec)
load('solar_system_data.mat');
GravConst = 6.67259e-11;
Xi = YVec(1);
Yi = YVec(2);
VXi = YVec(3);
VYi = YVec(4);
Massi=YVec(5);
BodyName=YVec(6);

AccXtotal=0;
AccYtotal=0;
j=1;
while j<=10

Massj=PlanetVec(j,5);
Yj=PlanetVec(j,2);
Xj=PlanetVec(j,1);

RangeSq = (Xi-Xj).^2 + (Yi-Yj).^2;
if RangeSq==0
    AccMag=0;
    Theta = atan2(Yi-Yj,Xi-Xj);
    AccX = -AccMag .* cos (Theta);
    AccY = -AccMag .* sin (Theta);
    j=j+1;
    AccXtotal=AccXtotal+AccX;
    AccYtotal=AccYtotal+AccY;
else
    Theta = atan2(Yi-Yj,Xi-Xj);
    AccMag = (GravConst .* Massj ./ RangeSq);
    AccX = -AccMag .* cos (Theta);
    AccY = -AccMag .* sin (Theta);
    j=j+1;
    AccXtotal=AccXtotal+AccX;
    AccYtotal=AccYtotal+AccY;
    VXi=VXi+AccXtotal.*TimeStep;
    VYi=VYi+AccYtotal.*TimeStep;
end

dYVec = [VXi; VYi; AccXtotal; AccYtotal;Massi;BodyName];

end 
```

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:23:44.983

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:23:07.553

没有`solar_system_data.mat`，很难调试你的代码，但问题是你没有传递`PlanetVec`给你的函数

如果我没记错的话，你应该试试

```
[TimeVec, SunMat] = ode45(@(t,y)GravityDE(t,y,PlanetVec), TimeStepMin, SunVec); 
```

请阅读[参数化功能](http://www.mathworks.com/help/matlab/math/parameterizing-functions.html)

# asp.net - ServiceStack：如何忽略路由？

> ID：13390841
> 
> 赞同：2
> 
> 时间：2012-11-15T02:43:05.173
> 
> 标签：asp.net, servicestack, elmah

我正在尝试让 Elmah 使用 ServiceStack 作为基础路由引擎运行。有什么方法可以**忽略**ServiceStack 的某个路线，所以我可以转到“/elmah.axd”，或者我在这里缺少的另一个选项？

在 Web.config 中

```
<handlers>
  <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
  <add path="elmah.axd" name="Elmah" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" />
</handlers> 
```

注意：我已经配置了日志工厂

```
LogManager.LogFactory = new ElmahLogFactory(new NLogFactory()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:05:29.063

将 Elmah 路径移到处理程序中的 ServiceStack 上方之一

# c - 如何擦除硬盘驱动器

> ID：13390843
> 
> 赞同：5
> 
> 时间：2012-11-15T02:43:47.043
> 
> 标签：c, linux, erase, hard-drive

这是一个奇怪的问题，但在这里。我想编写一个程序来用 1s 然后 0s 刷新我的外部硬盘驱动器来彻底清理它，这样我就可以卖掉它了。现在，我为什么要编写自己的软件而不仅仅是使用 DBAN？

1.  据我了解，DBAN 会删除它检测到的所有硬盘驱动器。我只想清洁我的外部。

2.  DBAN 闪烁七次。我觉得这对我的目的来说有点过分，因为我的外部不包含非法材料或信用卡信息。

3.  老实说，我其实有点好奇固件是如何工作的。

谷歌并没有出现太多（愚蠢的 Adob​​e Flash）。我更喜欢在 C/C++ 中执行此操作，但其他语言也可以使用，包括汇编。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T03:28:07.317

好吧，用 C 语言做这件事相当容易。首先，您以写入模式打开相应的设备文件：

```
int fd = open("/dev/sdc", O_WRONLY); 
```

你只`write()`需要 512 字节的块，直到你不能再写了。较新的磁盘使用 4096 字节扇区，但操作系统通常将它们视为具有 512 字节扇区，因此 512 是最安全的值。这是一个完全执行此操作的 C 程序：

（注意：要*非常*小心地选择正确的 /dev 设备文件，否则你会擦除错误的磁盘！）

```
#include <stdio.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(void)
{
    int fd = open("/dev/sdd", O_WRONLY);
    if (fd < 0) {
        fprintf(stderr, "Error opening device file.\n");
        return EXIT_FAILURE;
    }

    // Write 0's all over the disk, in chunks of 512 bytes.
    char* zeros = calloc(1, 512);
    ssize_t written, total = 0;
    do {
        total += written = write(fd, zeros, 512);
        printf("\rBytes written: %ld", total);
    } while (written == 512);
    printf("\nDone!\n");

    close(fd);
    free(zeros);
    return 0;
} 
```

如果您删除 ，您可能会获得加速`printf()`，尽管看到它发生的进度有点酷。您可能还应该在最后进行额外的错误检查（如果`written`是 -1，则发生错误，您应该检查`errno`。）

请注意，由于缓存，程序在打印“完成”后可能会在最后挂起一段时间。它并没有真正挂起，只是写操作的缓存会阻塞它，直到它们全部完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:05:14.893

> 据我了解，DBAN 会删除它检测到的所有硬盘驱动器。我只想清洁我的外部。

[它没有](http://sourceforge.net/projects/dban/screenshots/84360)。

> DBAN 闪烁七次。我觉得这对我的目的来说有点过分，因为我的外部不包含非法材料或信用卡信息。

但是当你早上醒来时，它已经完成了，对吧？此外，它[显然是可配置](http://sourceforge.net/projects/dban/screenshots/84362)的。

> 老实说，我其实有点好奇固件是如何工作的。

IMO，这不是最好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T03:07:05.370

作为注释。您的问题似乎是关于擦除数据，也就是粉碎等。

刷硬盘就是更新内部软件。如：[硬盘有自己的固件](http://www.databe.com/articles/article6.html)。在Linux下你可以这样做：

```
$ sudo hdparm -I /dev/sda 
```

然后，您将获得以下信息：

```
ATA device, with non-removable media
    Model Number:       ST31000524AS                            
    Serial Number:      XXXXXXX
    Firmware Revision:  JC4B    
    Transport:          Serial, SATA Rev 3.0 
```

...

尽管这是相反的方式，但您可以查看/搜索取证。即[FAU](http://www.gmgsystemsinc.com/fau/)、[开源数字取证](http://www2.opensourceforensics.org/tools)等以获取更多信息。

[更多关于擦拭](https://www.anti-forensics.com/disk-wiping-one-pass-is-enough/)。

# css - jQuery UI 按钮主题

> ID：13390844
> 
> 赞同：0
> 
> 时间：2012-11-15T02:44:18.487
> 
> 标签：css, jquery-ui

我们如何通过添加 css 类来设计 jQuery UI 按钮？

我有下面的按钮：

```
<input class="ui-state-default ui-button" type="button" value="click"/> 
```

缺少的一件事是 jQuery UI 按钮的圆角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:03:25.430

我认为这是一个好方法。

```
<script>
    $( ".myclass" ).button();
</script> 
```

这是html：

```
<input class="myclass" type="button" value="click"/> 
```

# php - ckfinder 与 ckeditor 的集成

> ID：13390848
> 
> 赞同：1
> 
> 时间：2012-11-15T02:45:51.990
> 
> 标签：php, ckeditor

这是我的集成代码：

```
 My extranet is in root/include/ckeditor and root/include/ckfinder

$baseUrl = 'https://extranet.com/crm/include/;
$baseUrl = '/userfiles/';

$baseDir = '/crm/include/userfiles/; 
```

我正在尝试进行配置，仅此而已。我正在尝试与 ckeditor 集成，但我遇到了各种错误。谁能告诉我我在哪里做错了。

```
It was not possible to properly load the XML response from the web server.
    XML Parsing Error: junk after document element Location: https://extranet.zeald.com/crm_snapshot/include/ckfinder/ckfinder.html?CKEditor=message&CKEditorFuncNum=2&langCode=en Line Number 2, Column 1:Parse error: parse error, unexpected T_STRING, expecting T_OLD_FUNCTION or T_FUNCTION or T_VAR or '}' in /mnt/clusternfs2/extranet/crm_snapshot/include/ckfinder/core/connector/php/php4/Utils/Misc.php on line 54
    ^
    Raw response from the server:

    Parse error: parse error, unexpected T_STRING, expecting T_OLD_FUNCTION or T_FUNCTION or T_VAR or '}' in /mnt/clusternfs2/extranet/crm_snapshot/include/ckfinder/core/connector/php/php4/Utils/Misc.php on line 54 
```

编辑：在这里查看 Misc.php 给出错误的代码

```
public static function encodeURIComponent($str)
    {
        $revert = array('%21'=>'!', '%2A'=>'*', '%27'=>"'", '%28'=>'(', '%29'=>')');
        return strtr(rawurlencode($str), $revert);
    } 
```

我已经运行了 php 版本 4.3.10，并且我阅读了 ckfinder 文档，说明 php4+ 支持 version2.2.1。

编辑：我已经删除了这段代码，它似乎正在工作：

```
/*  public static function encodeURIComponent($str)
    {
        $revert = array('%21'=>'!', '%2A'=>'*', '%27'=>"'", '%28'=>'(', '%29'=>')');
        return strtr(rawurlencode($str), $revert);
    } */ 
```

有没有办法使这项工作。

希望有人可以帮助我。

# android - 在包“android”中找不到属性“widgetCategory”的资源标识符

> ID：13390852
> 
> 赞同：3
> 
> 时间：2012-11-15T02:47:00.483
> 
> 标签：android, compilation

widgetCategory 是在 Android 4.2 SDK level 17 中添加的。我用 apktool 反编译了一个 APK，将 widgetCategory 属性添加到一个 xml 文件中，然后重新编译。

错误是这样的：

```
No resource identifier found for attribute 'widgetCategory' in package 'android' 
```

我尝试使用最新的 aapt 并更改 apktool.yml 中的 sdk 级别，但都没有解决问题。

我需要更改什么来为 apktool 添加对 Android 4.2 的支持吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T06:43:20.657

将构建目标设置为 API 17。在 Eclipse 中，您可以通过右键单击项目并选择属性来实现此目的。然后，在 Android 下，选择 Android 4.2 作为构建目标。也可以只打开文件 project.properties 并将目标设置为`android-17`.

您不必**更改**任何一个`minSdkVersion`或`targetSdkVersion`在 Android Manifest 中进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:05:06.637

我自己也遇到了这个问题。您需要将 App 的 MinSdkVersion（在 manifest.xml 中）更新为 17。

如果它使用低于 17 的 MinSdkVersion，它将无法识别 widgetCategory 资源。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T16:42:03.863

当 OP 说他正在使用 apktool 时，所有答案都针对使用 Eclipse 和 Java 的人。最有可能的问题是 apktool 正在使用低于 17 级的框架 SDK 文件。[https://code.google.com/p/android-apktool/wiki/FrameworkFiles](https://code.google.com/p/android-apktool/wiki/FrameworkFiles)

# tfs - 升级 2008 到 2010 后的 TFS 工作区问题

> ID：13390858
> 
> 赞同：1
> 
> 时间：2012-11-15T02:47:34.397
> 
> 标签：tfs, upgrade, workspace

我刚刚按照 [http://blog.hinshelwood.com/upgrading-team-foundation-server-2008-to-2010/的说明将 TFS 2008 升级到 2010](http://blog.hinshelwood.com/upgrading-team-foundation-server-2008-to-2010/)

在 TFS 2010 安装和升级过程中，我以域用户“A”的身份登录。

一切都很好，但是：我在以域用户“B”身份工作的客户端计算机上的 Visual Studio (2010) 中打开解决方案，进行一些更改并签入。这个变更集显示为用户“A”所做的。那绝对不应该是这样。

我试过：

使用命令 tf workspace /remove:* 在本地删除客户端计算机的所有工作区，并使用 Team Foundation Sidekicks 在 TFS 上删除所有工作区。

重新连接到 VS 中的 TFS 并重新创建用户“A”的工作区！

我手动将此工作区的所有者更改为用户“B”并且它消失了，即工作区下拉列表显示“没有可用的工作区”字符串。但是 Sidekicks 现在为用户“B”显示正确的工作空间存在。

似乎 VS 以“A”用户身份连接到 TFS。我想知道为什么会这样？当我以“B”身份登录域时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:40:42.010

我找到了问题的根源。存储的用户名和密码中有条目。因此，Windows 始终以用户“A”的身份连接到具有 TFS 的计算机。我删除了这个保存的凭据，现在一切正常。

# viewport - viewportSize 似乎不适用于 PhantomJS

> ID：13390859
> 
> 赞同：12
> 
> 时间：2012-11-15T02:47:38.757
> 
> 标签：viewport, phantomjs

这个 PhantomJS 脚本的输出不应该是 240x320 像素吗？我得到一个大的、默认大小的图像。clipRect() 似乎可以呈现正确大小的图像，但我需要页面的响应内容来反映实际的浏览器窗口大小。

```
var page = require('webpage').create();

page.viewportSize = { width: 240, height: 320 };  

page.open('http://cnn.com', function (status) {

    if (status !== 'success') {
        console.log('Unable to load the address!');
    } else {
        window.setTimeout(function () {
            page.render('default.png');
            phantom.exit();
        }, 200);
    }

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-01T14:45:01.447

这行得通！[在问题](https://github.com/ariya/phantomjs/issues/10619)的 github 页面上找到了代码片段。它将“body”元素强制为页面 viewportSize：

```
var width = 1024;
var height = 768;
var webpage = require('webpage');

page = webpage.create();
page.viewportSize = {width: width, height: height};
page.open('http://harness.io', function(status) {
    console.log(status);
    page.evaluate(function(w, h) {
      document.body.style.width = w + "px";
      document.body.style.height = h + "px";
    }, width, height);
    page.clipRect = {top: 0, left: 0, width: width, height: height};                                                                                                                           
    page.render('/tmp/test.png');
    phantom.exit();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-25T04:24:53.003

这是一个已知问题，但我找到了解决方法：

1.  将页面加载到您喜欢的任何大小的 iframe 中。
2.  渲染剪裁到 iframe 矩形的屏幕截图。

在这个存储库中有代码可以做到这一点：[https ://github.com/jbeuckm/Splasher](https://github.com/jbeuckm/Splasher)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-17T21:55:56.213

这似乎适用于 1.9.7 的 Mac 二进制文件：

```
page.set('viewportSize', {width: 320, height: 480}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-05T23:56:27.293

**在 CasperJS**`casper.viewport()`中，我处理了这个问题，使用了上述方法，最终发现一旦我通过该方法设置了单个视口选项，就没有必要（至少对我来说，在 CasperJS 中） 。

我已经在下面发布了我的版本，因此您可以看到它如何同时处理多个 url。

```
// Requires node.js and casperjs (npm install casperjs)
var casper   = require('casper').create();
var root_dir = 'screenshots/';
var links    = [];
var root     = 'http://localhost:8001/';
var DEBUG    = false;
var opts     = {top: 0, left: 0, 'width': 1280, 'height': 1024};

function getHrefs() {
    // Taken wholesale from casperjs
    // http://docs.casperjs.org/en/latest/quickstart.html
    var links = document.querySelectorAll('.days li > a');
    return Array.prototype.map.call(links, function(e) {
        return e.getAttribute('href');
    });
}

function captureLinks(links) {
    casper.echo('= SCREEN CAPTURING LINKS ====');
    casper.each(links, function(self, link) {
        var filename = root_dir + link.replace('/index.html', '') + '.png';
        casper.echo('Capturing... ' + filename);

        // Relevant code...
        this.viewport(opts.width, opts.height);

        self.thenOpen(root + link, function() {
            // slight delay for external libraries and init loading
            this.wait(500, function(){
                this.capture(filename, opts);
            });
        });
    });
}

casper.start(root, function() {
    links = links.concat(this.evaluate(getHrefs));
    this.echo('= GETTING LINKS ====');
    if(DEBUG) this.echo(links.join('\n'));
    captureLinks(links);
});

casper.run(); 
```

# java - 在java中设置背景图像

> ID：13390864
> 
> 赞同：4
> 
> 时间：2012-11-15T02:48:41.670
> 
> 标签：java, android, background

所以基本上，我有一个 xml，我想重用它。内容有些相同，只是背景不同，还有一些调整。我该怎么做。。我试过`View.setBackGroundDrawable(R.drawable.sample);`了，但它不起作用。我的应用程序崩溃。不过，我已将图像放在可绘制文件夹之一中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T02:56:30.577

您可以尝试在您的 xml 上为您的布局分配一个 id，以便在您的 java 代码上，您可以为其设置不同的布局。这是一个示例：

```
 //assuming your Layout is named linearlayout1:
 LinearLayout ll = (LinearLayout) findViewById(R.id.linearlayout1);
 ll.setBackgroundResource(R.drawable.sample); 
```

您还可以在设置背景之前创建 if 语句，例如：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linearlayout1);
if( yourifstatement) {
ll.setBackgroundResource(R.drawable.sample);
} 
```

如果是RelativeLayout，则同样的代码适用，只需将LinearLayout改为RelativeLayout即可。

如果这不是问题，请发布您的 LogCat。

# java - 引用类的向量

> ID：13390866
> 
> 赞同：-2
> 
> 时间：2012-11-15T02:49:16.753
> 
> 标签：java, class, vector, 2d-vector

考虑以下：

```
 class a
 {
  int p;
   a(int x)
    {
    p=x;
 }
 }

class b
{ vector<a> var;
   b(*type*a l)
    {
     new var;
     var(l);
     }
 } 
```

基本上，我试图创建一个类（'a'）的向量并从另一个类中调用它。几个问题——

1) 在 b 类中，'new var' 的位置是否正确？当我定义向量 var 时，我应该在构造函数之外还是在构造函数内部声明它？这些情况是什么意思。

2）主要，我也想声明一个b类的向量。我该怎么做？

做

```
Vector<b>  ex = new Vector<b> (100,5); sound right? 
```

即，100 是大小，5 是达到满负荷时应该增加的数量？

我可以不指定大小并通过 addElement() 继续添加吗？ - 向量类型会自动增加其大小吗？

3）因此，要访问b的第i个元素，以及b的成员变量'var'的第j个元素，我将如何指定它？这对吗？

```
 ex[i].var.get[j] ? 
```

我只是从这一切开始，所以请耐心等待。我是一个真正的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:05:49.100

首先，如果您指的是`java.util.Vector`不要使用它，除非您知道自己在做什么。改为使用`java.util.ArrayList`。

下面展示了如何声明和初始化一个包含类型对象的 ArrayList `a`。

```
class b { 

    private ArrayList<a> var = new ArrayList<a>(); // declare & intialize like this

    b(a l) {
        var.add(l);
    }
} 
```

一个 ArrayList 的 ArrayList...

```
ArrayList<ArrayList<Foo>> foo = new ArrayList<ArrayList<Foo>>();

// initialize foo

foo.get(0).get(2);  // like foo[0][2] if foo were an array 
```

# eclipse - 带有 JSF facet 的“动态 Web 项目”和“JSF 项目”有什么区别？

> ID：13390867
> 
> 赞同：1
> 
> 时间：2012-11-15T02:49:18.173
> 
> 标签：eclipse, jakarta-ee, jboss-tools

当我在 Eclipse 中安装“Web 工具平台”插件时，我可以创建一种新型项目，称为“动态 Web 项目”。在这样的项目中，我可以添加 JSF facet，然后用它来制作 JSF 应用程序。但是当我安装“jboss 工具”插件时，我有一个名为“JSF 项目”的项目类型。两种类型的项目有什么区别？为什么 jboss 工具的人创建了他们自己类型的 JSF 项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:55:32.317

创建 Eclipse 插件是为了轻松实现**一些常用/所需的配置。**正如您所说，您可以创建一个`Dynamic Web Prject`然后执行几个步骤来转换/支持 JSF。JSF 项目是使用已经为您完成的那些必需配置创建的。

`simple project`您甚至可以在一个（通过 New -> General->Project 选项创建）之间应用相同的示例，`Dynamic Web Project`即您可以创建一个简单的项目，创建文件/文件夹，手动更新类路径等并实现相同的功能，这可以直接通过`Dynamic Web Project`选项。**这些插件/选项可帮助您避免几个手动步骤来实现通常需要的功能。**JSF 项目也不例外。

# google-chrome - 未在 Chrome 中呈现的特定元素的边框半径

> ID：13390869
> 
> 赞同：0
> 
> 时间：2012-11-15T02:49:33.970
> 
> 标签：google-chrome, css, curve

这是我的网站： [http ://splash.inting.org/wp/](http://splash.inting.org/wp/)

在右侧边栏上，我有两个元素，顶部的 reg 表单和底部的小滑块。两者都实现了相同的边框半径样式，但底部的样式没有在 Chrome 中呈现弯曲边框。我已经应用了溢出：隐藏。

注意事项：

1.  两个元素（注册和滑块）都应用了相同的边框半径样式，但在 chrome 中，只有注册以正确的边框样式呈现
2.  边界半径在 Firefox 甚至 IE 中都能正确呈现

有任何想法吗？谢谢！

**铬合金：**

![在此处输入图像描述](../Images/e3fe6ff36baeebcbaa6a55c35640c6da.png)

**火狐：**

![在此处输入图像描述](../Images/6cce525cfbfe65401fb14ba9641c5366.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:58:41.840

将边框半径直接应用于图像。

```
.meteor-slides .mslide img
{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

# html - iframe 返回主页而不是外部文件

> ID：13390874
> 
> 赞同：0
> 
> 时间：2012-11-15T02:50:47.913
> 
> 标签：html, iframe, joomla, adobe-edge

我正在尝试嵌入在 Adob​​e Edge 中创建的 html5 横幅，我能想到的最简单的方法是将所有代码边缘吐出到 ftp 上，然后使用 iframe 指向 html 文件。如果我在我的机器上本地执行此操作，它工作正常，如果我在我们的实时站点上尝试它，则网站的左上角显示在 iframe 中而不是横幅中。这是一个 Joomla 1.5 站点，我不知道是什么原因造成的，因为我以前没有使用过 iframe。我已经编辑了代码，所以它不再有空格。

这是我的网站：[www.webchild.com.au](http://www.webchild.com.au)

这是 iframe 代码：

```
<iframe src="/stdAds/html5/bilby-test/bilby_theatrical_banner.html" width="300" height="250" frameborder="0" scrolling="no"></iframe> 
```

html文件里面的代码是：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<title>Bilby Theatrical Productions Banner</title>
<!--Adobe Edge Runtime-->
<script type="text/javascript" charset="utf-8" src="bilby_theatrical_banner_edgePreload.js"></script>
<style>
.edgeLoad-EDGE-380725615 { visibility:hidden; }
</style>
<!--Adobe Edge Runtime End-->

</head>
<body style="margin:0;padding:0;">
<div id="Stage" class="EDGE-380725615">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:21:33.750

尝试从链接中删除空格。很可能是`%20`复制空格键搞砸了链接。否则，您是否检查过包含的 html 文件肯定位于 FTP 上的正确位置。如果您只是尝试直接访问链接（[http://www.webchild.com.au/stdAds/html5/bilby-test/Bilby%20Theatrical%20Banner.html](http://www.webchild.com.au/stdAds/html5/bilby-test/Bilby%20Theatrical%20Banner.html)），您会看到出现 404 错误，这可能就是原因您的网站顶部出现 - 404 错误页面而不是页面

# javascript - php matchall 类似 javascript 中的函数，当 exec 正则表达式

> ID：13390877
> 
> 赞同：-1
> 
> 时间：2012-11-15T02:51:12.877
> 
> 标签：javascript, regex

抱歉，如果问题重复

我有一个 XML 文件，类似于

```
<item>
   <attr1>attr1.1</attr1>
   <attr2>attr1.2</attr2>
</item>
...
<item>
   <attr1>attr2.1</attr1>
   <attr2>attr2.2</attr2>
</item> 
```

而我想要做的就是使用正则表达式来获取一个项目数组。出于某种原因，我不想在这里使用 jQuery（我已经阅读了有关 jQuery.parseXML 的信息）。你能告诉我如何在 javascript 中获取所有项目或其他东西，就像 PHP 中的 match_all() 一样。这是我的正则表达式，

```
 /<item>([\w\W]+?)<\/item>/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:17:51.453

正如 zerkms 所提到的，已经有一些在 javascript 中解析 XML 的方法可以提供更大范围的健壮性和灵活性。对于尝试使用正则表达式解析正则语言的超集的问题，还有一个[特别臭名昭著的答案，简而言之，这不是解决此问题的最佳方法。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

但是，如果您正是对这个用例感兴趣，那么不幸的是，没有像 php 中的 match_all 或 python 的 re 中的 findall 之类的功能。看看[这个 stackoverflow](https://stackoverflow.com/questions/3410464/how-to-find-all-occurrences-of-one-string-in-another-in-javascript)，尤其是代码块

```
var str = "I learned to play the Ukulele in Lebanon."
var regex = /le/gi, result, indices = [];
while ( (result = regex.exec(str)) ) {
    indices.push(result.index);
} 
```

在第一个答案中，有关以类似方式查找相同正则表达式的多次出现的一些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T23:28:44.127

模拟这种行为的一种方法是在正则表达式的替换方法中使用回调函数来构建结果。这是一个方便地抽象为函数的示例...

```
function match_all(pattern, input){
    var result = [];
    input.replace(pattern, function(_, val){ result.push(val); })
    return result;
} 
```

...使用示例 xml 进行检查...

```
var sample = "<item>\n\
   <attr1>attr1.1</attr1>\n\
   <attr2>attr1.2</attr2>\n\
</item>\n\
...\n\
<item>\n\
   <attr1>attr2.1</attr1>\n\
   <attr2>attr2.2</attr2>\n\
</item>"

console.log(match_all(/<item>([\w\W]+?)<\/item>/gm, sample))
// [
//    "↵   <attr1>attr1.1</attr1>↵   <attr2>attr1.2</attr2>↵",
//    "↵   <attr1>attr2.1</attr1>↵   <attr2>attr2.2</attr2>↵"
// ] 
```

# php - to_route() 重复基本路径

> ID：13390879
> 
> 赞同：3
> 
> 时间：2012-11-15T02:51:15.940
> 
> 标签：php, laravel

我正在尝试使用 laravel 制作我的第一个应用程序，但路线有问题。每当我尝试生成路由（Redirect::to_route() 或 HTML::link_to_route()）时生成的地址都是错误的。基本路径加倍。

这：

```
{{ HTML::link_to_route('admin.edit_newsletter', 'Editar Newsletter', array($newsletter->id), array('class' => 'btn btn-inverse')) }} 
```

结果链接：

```
http://newsletters_app.dev/http://newsletters_app.dev/admin/newsletters/1/edit 
```

**我的路线**

```
// admin.newsletter Resource
Route::get('admin/newsletters/(:num)/edit', array('as' => 'admin.edit_newsletter', 'uses' => 'admin.newsletters@edit')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:47:28.787

**由于下划线**，根据 filter_var($url, FILTER_VALIDATE_URL)，url 'http://newsletters_app.dev' 无效。因此，HTML::link() 正在生成重复的基础。解决方案是简单地从 URL 中删除下划线。

# html - ModX Revo：表单操作不起作用？

> ID：13390881
> 
> 赞同：0
> 
> 时间：2012-11-15T02:51:18.343
> 
> 标签：html, forms, content-management-system, modx, modx-revolution

我在 ModX Revo 资源上有一个表格，看起来不错，没什么特别的：

```
<form id="contactform" action="http://mysite.com/index.php?id=41" method="send">
<tr>
<td class="orange">Name*</td>
<td><input size="24" type="text" name="name" id="name"></td>
</tr>
etc...
<tr>
<td id="tablecenter" colspan="2"><input type="submit" value="Send"></td>
</tr>
</form> 
```

但是当我点击发送时，我只是被重定向到主页（404）。接收资源（资源 41）已发布，并且可以通过其他方式正常访问，只是不能使用此表单操作。

尝试了 Send 和 Get 方法以及短 URL 和绝对 URL，但没有区别。

有谁知道为什么会发生这种情况？谢谢！

（ps：如果重要，FURL 会在本网站上关闭）。

更新：似乎不仅仅是资源 41 那是一个问题 - 不适用于任何资源

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T02:58:48.917

使用 method="post" 代替。似乎工作正常。结束问题

# sencha-touch-2 - 你如何获得字段属性

> ID：13390888
> 
> 赞同：0
> 
> 时间：2012-11-15T02:51:48.493
> 
> 标签：sencha-touch-2

我正在开发 Sencha 应用程序，但无法访问我定义的基本模型的字段。我`Ext.define`用来定义一个模型并`Ext.create`创建它的一个实例。根据文档，我应该能够通过调用字段来访问其字段`get.(<fieldname>)`，但它不起作用并且返回 null。这是基本代码以及[jsfiddle](http://jsfiddle.net/gusennan/Vs48R/)。

```
Ext.define('App.model.Patient', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['admissionGuid',
            'firstName', 'middleInitial', 'lastName', 'visitType',
            { name: "visitDate", type: 'date'}]
    }
});​

var newVisit = Ext.create('App.model.Patient', {
        admissionGuid: 1234,
        firstName: "FirstName",
        middleName: "MiddleName",
        lastName: "LastName",
        visitType: "Revisit",
        visitDate: new Date() 
});

alert(newVisit.get('admissionGuid')); // returns null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:12:21.040

您传递的数据存储在原始参数中，所以试试这个

```
alert(newVisit.raw.admissionGuid); 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:03:38.177

您的代码使用 Sencha Touch 2 是正确的。我已经对其进行了测试，它可以按预期工作。在这里使用 ST 小提琴：[http ://www.senchafiddle.com/#6Q9ac](http://www.senchafiddle.com/#6Q9ac)

ExtJS 和 Sencha Touch 共享相似的类系统，但它们并不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T03:03:13.787

只是另一种方式，

我们还可以通过以下方式访问模型内​​部的数据：

```
*instanceOfModel*.data.*fieldName* 
```

例如，对于给定的代码，它将是：

```
newVisit.data.admissionGuid 
```

# json - 在 JMeter 查看结果树中看不到 JSON 响应

> ID：13390890
> 
> 赞同：4
> 
> 时间：2012-11-15T02:51:57.717
> 
> 标签：json, jmeter

我想知道是否有人可以告诉我为什么我在 JMeter 查看结果树中看不到来自同样类型为 json 的请求的 json 响应。我知道响应在那里，因为我使用正则表达式来提取数据（我根据 Firebug 中返回的结果编写了 reg ex）。因此可以从 json 响应中提取数据，它只是不会显示在查看结果树中。我可以看到对我使用 JMeter 进行性能测试的不同应用程序的另一个请求的 json 响应，但该特定请求是一个 ajax 请求。没有把握

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:01:15.770

在此处添加示例编写器并显示内容。

*   [http://jmeter.apache.org/usermanual/component_reference.html#Simple_Data_Writer](http://jmeter.apache.org/usermanual/component_reference.html#Simple_Data_Writer)

你会看到问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T07:21:52.807

嗨，任何在这篇文章中寻找 jmeter 的人，当您在互联网上找不到关于如何在发送请求时记录您的响应的答案时，您可能会有点担心，这是解决方案，而且很简单......

只需添加如下一行。

result.setResponseData("把任何内容放在这里都显示为字符串。", "UTF-8");

并检查您的回复是否会很酷。

# android - 声明 SharedPreferences.Editor 使我的应用程序崩溃

> ID：13390891
> 
> 赞同：2
> 
> 时间：2012-11-15T02:52:07.260
> 
> 标签：android, sharedpreferences

```
// I declared myPrefs globally in the lass  
SharedPreferences myPrefs = null;

// this is called in my do draw function 
```

`public void doDraw() {
myPrefs = this.getSharedPreferences("myPrefs", Context.MODE_WORLD_READABLE); SharedPreferences.Editor editor = myPrefs.edit();
editor.putInt("MYHIGHSCORE", score); editor.commit();` }

每当我打电话`SharedPreferences.Editor editor = myPrefs.edit();`时，我的程序就会崩溃。我做错了什么？我正在尝试为高分系统存储一个 int 。并且`SharedPreferences`对于像我这样的迷你高分系统提出了很多建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:20:29.307

编辑：

```
package com.example.logindemo;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class LoginPage extends Activity {

    EditText name = null, pwd = null;
    SharedPreferences login_pref = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login_page);
        name = (EditText) findViewById(R.id.name_edt);
        pwd = (EditText) findViewById(R.id.pwd_edt);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_login_page, menu);
        return true;
    }

    public void loginMethod(View v) {
        login_pref = this.getSharedPreferences("login_pref",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor login_pref_editor = login_pref.edit();
        login_pref_editor.putString("Name", name.getText().toString());

        login_pref_editor.commit();
        startActivity(new Intent(this, WelcomeScreen.class));
    }
} 
```

试试这个。我认为您的共享首选项对象未正确获取。注意：编辑帖子以添加整个班级的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:26:23.390

如果您打算只有一个首选项文件，请尝试使用此代码来检索`SharedPreference`.

```
myPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:10:32.090

我想问题不在于`edit()`你`apply()`的改变。[在这里](https://stackoverflow.com/a/10491324/925202)查看解决方案

# bash - 对多个收件人使用来自 bash 脚本的 sendmail

> ID：13390894
> 
> 赞同：44
> 
> 时间：2012-11-15T02:53:03.573
> 
> 标签：bash, sendmail

我在 cron 中运行 bash 脚本，以便在满足特定条件时向多个收件人发送邮件。

我已经对变量进行了如下编码：

```
subject="Subject"
from="user@domain.com"
recipients="user1@gmail.com user2@gmail.com"
mail="subject:$subject\nfrom:$from\nExample Message" 
```

而实际发送：

```
echo -e $mail | /usr/sbin/sendmail "$recipients" 
```

问题是只有 user2@gmail.com 正在接收电子邮件。如何更改此设置以便所有收件人都收到电子邮件？

注意：解决方案必须使用 sendmail，我使用的是 jailshell，它似乎是唯一可用的方法

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-15T02:58:39.597

尝试这样做：

```
recipients="user1@gmail.com,user2@gmail.com,user3@gmail.com" 
```

还有另一种方法，使用 shell *here-doc*：

```
/usr/sbin/sendmail "$recipients" <<EOF
subject:$subject
from:$from

Example Message
EOF 
```

请务必按照[RFC 822](https://www.ietf.org/rfc/rfc0822.txt)用空行将标题与正文分开。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-15T13:52:27.177

使用选项 -t 发送邮件。

在您的情况下 -`echo -e $mail | /usr/sbin/sendmail -t` 并将您的收件人列表添加到消息本身，就像`To: someone@somewhere.com someother@nowhere.com`在该行之后一样`From:.....`

`-t`选项意味着 - 为收件人阅读消息。To:、Cc: 和 Bcc: 行将被扫描以查找收件人地址。Bcc: 行将在传输前被删除。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-17T06:54:21.023

从 shell 脚本中使用 sendmail

```
subject="mail subject"
body="Hello World"
from="me@domain.com"
to="recipient1@domain.com,recipient2@domain.com"
echo -e "Subject:${subject}\n${body}" | sendmail -f "${from}" -t "${to}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T13:13:20.980

对于 postfix `sendmail`，我添加了一个对脚本有用的行命令

我在 RHEL（未公开的收件人）中的 sendmail 命令末尾添加默认位置的收件人时遇到问题，并且管道回显命令挽救了这一天。

`-f`从[http://www.postfix.org/sendmail.1.html](http://www.postfix.org/sendmail.1.html)找到的选项

请注意，echo 中的语法很重要，请在尝试使用 sendmail 之前尝试回显到要检查的文件。

`echo -e "To:receiver1@domain1, receiver2@domain2 \nSubject:Subject of email \n\nBody of email.\n" | /usr/sbin/sendmail -f sender@domain -F sendername -it`

# ruby-on-rails - Spork 跑步和听但不工作

> ID：13390895
> 
> 赞同：1
> 
> 时间：2012-11-15T02:53:27.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, guard, spork

已解决：取出保护文件中的 spork 代码，然后从我的另一个与 spork 和 guard 一起使用的应用程序中复制并粘贴一个工作保护文件。

我在我的应用程序中安装了 Guard 和 Spork。Guard 工作正常，但是当我运行 Spork 时，Spork 加载并说准备好并在听。一旦我打开一个新终端并启动 rspec，Spork 就会在第一个终端中被杀死，这会出现......

```
jason@jason:~/ror/blog$ guard
14:57:44 - INFO - Guard here! It looks like your project has a Gemfile, yet you are 
running
> [#] `guard` outside of Bundler. If this is your intent, feel free to ignore this
> [#] message. Otherwise, consider using `bundle exec guard` to ensure your
> [#] dependencies are loaded correctly.
> [#] (You can run `guard` with --no-bundler-warning to get rid of this message.)
14:57:45 - INFO - Guard uses NotifySend to send notifications.
14:57:45 - INFO - Guard uses TerminalTitle to send notifications.
14:57:45 - INFO - Guard is now watching at '/home/jason/ror/blog'
14:57:45 - INFO - Starting Spork for RSpec
Using RSpec
Preloading Rails environment
WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 
2.8.0
Loading Spork.prefork block...
Spork is ready and listening on 8989!
14:58:02 - INFO - Spork server for RSpec successfully started
14:58:03 - INFO - Guard::RSpec is running, with RSpec 2!
14:58:03 - INFO - Running all specs 
```

在原来的终端上，这会出现......

```
jason@jason:~/ror/blog$ spork
Using RSpec
Preloading Rails environment
WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 
2.8.0
Loading Spork.prefork block...
Spork is ready and listening on 8989!
Killed
jason@jason:~/ror/blog$ 
```

这是我的 spec_helper 文件

```
require 'rubygems'
require 'spork'

Spork.prefork do

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|

    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    config.use_transactional_fixtures = true

    config.infer_base_class_for_anonymous_controllers = false

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true

  end
end

Spork.each_run do
  FactoryGirl.reload
end 
```

这是我的 Guardfile

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

require 'active_support/core_ext'

guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' 
=> 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch(%r{^config/environments/.+\.rb$})
  watch(%r{^config/initializers/.+\.rb$})
  watch('spec/spec_helper.rb')
  watch(%r{^spec/support/.+\.rb$})
end

guard 'rspec', :version => 2, :all_after_pass => false do
 watch(%r{^spec/.+_spec\.rb$})
 watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
 watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }  
watch(%r{^app/(.*)(\.erb|\.haml)$})                { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing
/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance
/#{m[1]}_spec.rb"] }
watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
watch('config/routes.rb')                           { "spec/routing" }
watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara request specs
watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/requests
/#{m[1]}_spec.rb" }

# Turnip features and steps
watch(%r{^spec/acceptance/(.+)\.feature$})
watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#
{m[1]}.feature")][0] || 'spec/acceptance' }
end 
```

我的 gemfile 包含

```
group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
  gem 'factory_girl_rails', '4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end

group :development, :test do
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end 
```

虽然看起来它正在工作，但测试需要相同的时间，所以我知道 spork 不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:09:32.787

取出保护文件中的 spork 代码，然后从我的另一个与 spork 和 guard 一起使用的应用程序中复制并粘贴一个工作保护文件。最后，我的保护文件中不需要 spork 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:58:10.337

为什么你`guard 'rspec', :version => 2 do`的`guard`文件中有两个？您应该删除第一个。并尝试将其添加到您的保护文件中：

```
guard 'spork', :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch(%r{^config/environments/.+\.rb$})
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb')
  watch('test/test_helper.rb')
  watch('spec/support/')
end 
```

但是，您需要记住：**将 Spork 保护放在 RSpec/Cucumber/Test::Unit 保护之前！）**。你可以在我的博客[hkthanh89](http://hkthanh89.github.com/)上抢夺，我总结了一些信息来创建 spork 和 guard。

# python - 根据 CSV 文件中的数据计算的返回列表（没有 CSV 模块）

> ID：13390897
> 
> 赞同：0
> 
> 时间：2012-11-15T02:54:05.583
> 
> 标签：python, list, csv, dictionary

我要做的是读取一个 CSV 文件，其中包含用于梦幻足球队的统计数据。该文件如下所示：

```
Name    Team    G   QBRat   Comp    Att Pct Pass    Yds Pass    YG  Yds Att TD  Int
Matt    Flynn   GNB 5   124.8   33  49  67.3    518 103.6   10.6    6   2
Aaron   Rodgers GNB 15  122.5   343 502 68.3    4643    309.5   9.2 45  6
Tyrod   Taylor  BAL 3   118.8   1   1   100 18  6   18  0   0
Brian   Hoyer   NWE 3   118.8   1   1   100 22  7.3 22  0   0
Drew    Brees   NOR 16  110.6   468 657 71.2    5476    342.3   8.3 46  14
 ... etc. 
```

我做这件事的时间有限，而且我需要它简单——这意味着我不能使用该`csv`模块，也不能使用一堆高级命令来执行它（我的意思是我可以，但我没有如果我看不懂就想用它）。

我要做的是：

1.  **从文件中读取统计信息**。基本上有 6 个不同的 CSV 文件，因为我必须根据四分卫、跑卫、外接手、近端锋、踢球手和球队的整体防守来计算和返回统计数据列表。现在我只会以四分卫为例。

2.  **从此 CSV 文件创建一个点系统**。我必须查看每个玩家的名字，并根据他们的统计数据添加或减去一定数量的积分：

    *   每个传球 TD 4 分 (TD - Rush TD)

    *   每冲 TD (冲 TD) 6 分

    *   每传球 25 码得 1 分（Pass Yds）

    *   如果完成率超过 60% (Pct)，则 10 分

    *   如果完成率超过 70% (Pct)，则奖励 20 分

    *   -2 每个麻袋（麻袋）

    *   -6 每次失手 (FumL)

3.  **返回（或打印，无论如何） top 20**，在基于点数的列表中，有点像这样：

    ```
    Name________________________Team__________________Points
    ====________________________====__________________======
    player name_____________    their team______________how many points they have 
    ```

我迷路了，我真的需要一些帮助，感谢所有能提供一些见解的人:)

这就是我所在的地方：

```
def qtrBacks():
    qb = open('NFL2011QB.csv', 'r')
    points = 0
    for Name in qb:

print('Top Quarterbacks')
print()
print('Name\t\t Team\t Points')
print('====\t\t ====\t ======') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:33:53.077

我建议将工作分解为几个功能。这可以帮助您将工作组织成可以单独调整或修改的单独部分。

首先，我建议处理文件解析。这很重要，因为它是我们确定将保存玩家数据的数据结构的地方。我认为将每个玩家的统计数据保存在字典中是有道理的，从每个统计数据名称（如“TD”）映射到值。这是一个函数，它使用列表推导来构建此类词典的列表，每个玩家一个，从文件的标题中获取统计名称。如果文件的每一列都没有正确的标题，这可能无法正常工作。

```
def read_player_file(filename):
    with open(filename) as f:
        head = f.readline().split("\t")

        player_list = [dict(zip(head, line..strip().split("\t"))) for line in f]

    return player_list 
```

上面的代码几乎等同于您可以对`csv`模块执行的操作，尽管它可能也无法处理稍微混乱的文件。这是使用的替代版本`csv.DictReader`：

```
def read_player_file(filename):
    with open(filename, "rb") as f:
        return player_list = list(csv.DictReader(f)) 
```

这两种实现都（希望）独立于文件的细节，因此您可以将它们用于每个 CSV 文件，即使它们具有不同的统计信息。

接下来要编码的是评分功能。我不完全确定如何为您列出的规则执行此操作，因为`TD`您的示例数据中只有一列（没有单独的运行 TD 值），并且没有用于麻袋或摸索的列。

```
def qb_score(player_dict):             # FIXME: Replace ? values!
    run_td = ?
    pass_td = int(player_dict["TD"]) - run_td
    pass_yards = int(player_dict["Yds Pass"])
    sacks = ?
    fumbles = ?
    completion_rate = float(player_dict["Pct Pass"])

    score = 4*pass_td + 6*run_td + pass_yards//25 - sacks*2 - fumbles*4

    if completion_rate > 60:
        score += 10
    if completion_rate > 70: # maybe this should be an elif?
        score += 20

    return score 
```

现在，我们可以将它们组合在一起并返回得分最高的 QB：

```
def top_qbs(count=20):
    qb_list = read_player_file("NFL2011QB.csv")

    for qb in qb_list:
        qb["qb score"] = qb_score(qb)

    qb_list.sort(key=lambda qb:qb["qb score"], reversed=True)

    return qb_list[:count] 
```

您可以使用以下内容进行打印输出：

```
def print_top_qbs():
    qbs = top_qbs()

    print('Top Quarterbacks')
    print()
    print('Name\t\t Team\t Points')
    print('====\t\t ====\t ======')
    for qb in qbs:
        print("{Name}\t{Team}\t{qb score}".format(**qb)) 
```

# export - 用户友好的多模型（带有关联文件）导出文件结构的技术建议

> ID：13390901
> 
> 赞同：0
> 
> 时间：2012-11-15T02:54:36.573
> 
> 标签：export, yaml, ruby-on-rails-2

我面临着需要以一种易于读回我的系统的格式导出一组模型实例（其中一些具有关联的文件附件），但这也是人类友好的阅读，并可能导入另一个类似的系统（尽管我不关心将其导出以适应任何特定标准，因为似乎还没有关于 ePortfolio 导出标准的巨大共识。

这样做的重点是为最终用户备份，以便他们可以与使用我们产品的其他学校共享这些电子档案。

我目前的想法是为每个适用的模型添加一个导出方法，以定义要吐出的内容。此方法还将调用此模型所依赖的关联模型的导出方法（例如子关系）。

我目前的导出格式选择是 YAML，因为它的可读性和与 Ruby 的集成。文件系统格式可能是 zip 文件结构，我想我需要以某种方式重新标识所有模型实例或在 YAML 文件中显示这种父子关系，以便可以在没有任何内容的新系统中创建它需要与原始系统中相同的 ID。

无论如何，我知道这有点宽泛，但我想听听您对这种机制的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:25:37.100

最后，我使用了一个包含 XML 文件以及所有链接资产（文档、图片等）的 ZIP 文件。似乎是最开放和面向未来的方式，并且允许精明的人将这些数据导入另一个系统。

有 LEAP2A 但对我来说似乎含糊不清。

# r - 如何对组内的数据进行排序并计算R中每个组的元素？

> ID：13390903
> 
> 赞同：-5
> 
> 时间：2012-11-15T02:54:43.350
> 
> 标签：r, sorting

> **可能重复：**
> [如何在 R 中按列对数据框进行排序](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)

大家：我想使用R对组内的数据进行排序。例如：数据是：

```
geneID  Nr.annotation
CL1002  uncharacterized
CL1002  uncharacterized
CL1002  uncharacterized
CL1002  uncharacterized
CL1002  uncharacterized
CL1002  uncharacterized
CL1019  PREDICTED:
CL1019  PREDICTED:
CL1019  predicted
CL1019  PREDICTED:
CL1019  PREDICTED:
CL1019  predicted
CL1019  predicted
CL1019  hypothetical
CL10246 unnamed
CL10246 predicted
CL10246 unnamed
CL10246 unnamed
CL10246 unnamed
CL10246 unnamed
CL10246 unnamed
CL1064  octicosapeptide/Phox/Bem1p
CL1064  octicosapeptide/Phox/Bem1p
CL1064  serine/threonine
CL1064  serine/threonine
CL1064  serine/threonine
CL1064  serine/threonine 
```

这是原始数据。请复制并使用如下代码：

```
read.table("clipboard",strip.white=T,header=T) 
```

然后，我该怎么办？排序后，我希望结果是这样的：

```
geneID  Nr.annotation
CL1002  PREDICTED:
CL1002  uncharacterized    4
CL1019  PREDICTED:         6
CL1019  hypothetical       1
CL1019  uncharacterized    1
CL10246 predicted          1
CL10246 unnamed            6
CL1064  octicosapeptide/Phox/Bem1p  2
CL1064  serine/threonine   4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:03:44.940

您可以使用`plyr`和`arrange`。您所做的只是先按一列排序，然后再按下一列

```
library(plyr)

arrange(DF,geneID, Nr.annotation) 
```

（在第二次查看时，您的示例输出不太有意义。您如何获得以下组合

`CL1002 PREDICTED:`

# javascript - 根据来源删除图像元素

> ID：13390905
> 
> 赞同：0
> 
> 时间：2012-11-15T02:54:59.590
> 
> 标签：javascript, regex, windows-8

如何根据来源使用 vanilla javascript + regEx 删除图像元素？

我正在使用 Web 应用程序阅读 RSS 提要。如果某些图像元素的来源包含“评论”一词，我想删除它们。

最好在将 rss 提要呈现到页面之前对其进行编辑（只是从 http 请求中提取，并且仍然在“字符串”中）。

更新：感谢您的回复。在每篇文章的最底部，它们都包含一个评论链接……这是我想要删除的。这是每篇文章最后的代码：

`<a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/ADDRESS/FEED"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/[ADDRESS]/[FEED]" /></a>`

此外，每篇文章的 [feed] 值都会发生变化。那么检查'comments'这个词或检查源是否以x开头会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:09:18.867

```
var images = document.getElementsByTagName('img');
for (var i = 0; i < images.length; i++) {
    var img = images[i];
    if (img.src.indexOf('comments') > 0) {
       var link = img.parentNode;
       link.parentNode.removeChild(link);
    }
} 
```

*   第 1 行：获取页面上所有图像元素的列表
*   第 2 行：遍历列表，删除那些 src 中包含“comments”一词的人。这是通过调用`indexOf`任何字符串对象的方法来完成的。[详细在这里](http://www.w3schools.com/jsref/jsref_indexof.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:25:14.643

你可以试试这个

```
var imgs=document.images;
for(i=0;i<imgs.length;i++)
    if(imgs[i].src.test('comments'))
        imgs[i].parentNode.parentNode.removeChild(imgs[i].parentNode);​ 
```

[**演示**](http://jsfiddle.net/ZPRhL/6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:25:17.373

感谢您的回复。lins05 建议了一些我稍微调整过的代码。注意：下面的代码没有删除元素或其父元素，而是简单地隐藏了元素。

```
 var images = document.getElementsByTagName('img');
    for (var i = 0; i < images.length; i++) {
        var img = images[i];
        if (img.src.indexOf('comments') > 0) {
            img.style.display = "none";
        }
    } 
```

RSS 提要的文章列表存储在页面上的模型中。将评论从模型中剔除会更理想。但是当前的“每次文章出现在页面上时都隐藏元素”的方法效果很好:)

# django - Django-forms 代码给出了我所有的表单 ViewDoesNotExist 错误

> ID：13390907
> 
> 赞同：0
> 
> 时间：2012-11-15T02:55:23.800
> 
> 标签：django, django-forms

由于某种原因，这段代码导致`ViewDoesNotExist`我的许多模板出错：

```
CHOICES = list ( (obj.manufacturer,obj.manufacturer) for obj in UniPart.objects.all().values('manufacturer').distinct() ) 
```

当我注释掉该代码并用硬编码选项替换时，一切都很好。

到底发生了什么？

这是我在我的`forms.py`：

```
CHOICES = list ( (obj.manuacturer,obj.manufacturer) for obj in UniPart.objects.all().values('manufacturer').distinct() )
manufacturer = forms.ChoiceField(choices=CHOICES) 
```

UniPart 定义如下：

```
class UniPart (models.Model):
    manufacturer=models.CharField(_('manufacturer'), max_length=255) 
```

这是`urls.py`：

```
url(r'^add$','mysims.views.add_model'), 
```

和`mysims`应用程序`views.py`：

```
def add_model(request, points=None):
    if request.method == "POST":
        formtoaddmodel = newsimform(request.POST, request.FILES)
        new_sim = formtoaddmodel.save(commit=False) 
```

# architecture - 依赖于业务逻辑层的用户界面打破了依赖倒置原则？

> ID：13390909
> 
> 赞同：1
> 
> 时间：2012-11-15T02:55:30.890
> 
> 标签：architecture, inversion-of-control, dependency-inversion

依赖倒置原则指出：高级模块不应该依赖于低级模块。

考虑到这一点，我的老：

```
UI -> Business Logic Layer -> Data Access Layer 
```

变成了

```
UI -> Business Logic Layer <- Data Access Layer 
```

我根据业务逻辑层保留 UI，以便我可以轻松附加另一个 UI 实现。我的业务逻辑层是大脑。

但这是否违反了依赖倒置原则？UI 比业务逻辑更高，对吧？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:44:11.213

[Dependecy Inversion](http://en.wikipedia.org/wiki/Dependency_inversion_principle)中的高级或低级模块关注实现细节。以它的原理为例。该原则指出：

A. 高级模块不应该依赖于低级模块。**两者都应该依赖于抽象。**

**B. 抽象不应依赖于细节。细节应该取决于抽象。**

在评估依赖倒置原则时，考虑哪些模块或层并不重要。您可以拥有高级 UI 和低级 UI。这个原则的重点是你的高层 UI 不应该依赖低层的业务逻辑层，高层模块之间的任何其他东西都可以。

# r - 相当于 R 中的 normxcorr2？

> ID：13390911
> 
> 赞同：0
> 
> 时间：2012-11-15T02:55:32.363
> 
> 标签：r

你知道它在 R 或 R 包中是否存在`normxcorr2()`与 Matlab 等效的函数吗？

我想计算二维矩阵的互相关，并根据两个方向的滞后显示互相关系数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:03:36.100

你试过 `ccf()`从`stats`包里吗？（`stats`应该已经是您的 R 安装的一部分）

# ruby-on-rails - 在 Ruby on Rails 中生成表

> ID：13390912
> 
> 赞同：0
> 
> 时间：2012-11-15T02:56:03.557
> 
> 标签：ruby-on-rails, ruby

为什么从我的视图调用时这不会产生一个表？使用 fields_table(@user, ["id", "username"]) 我没有得到 tbody 的 trs 或 tds，但我得到了其他所有内容。

```
def fields_table(obj, fields)
  return false if obj.nil?
  content_tag(:table) do
    thead = content_tag(:thead) do
      content_tag(:tr) do
        content_tag(:td, "Property") + content_tag(:td, "Value")
      end
    end
    tbody = content_tag(:tbody) do
      fields.each do |name|
        content_tag(:tr) do
          content_tag(:td, name) + content_tag(:td, obj.read_attribute(name))
        end
      end
    end
    thead + tbody
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:10:09.620

这段代码只是遍历字段。它不返回任何内容，因此封闭`tbody`不会有任何内容。

```
tbody = content_tag(:tbody) do
  fields.each do |name|
    content_tag(:tr) do
      content_tag(:td, name) + content_tag(:td, obj.read_attribute(name))
    end
  end
end 
```

您需要像在代码的其他部分中所做的那样返回一些内容，或者将其更改为如下内容：

```
tbody = content_tag(:tbody) do
  fields.map do |name|
    content_tag(:tr) do
      content_tag(:td, name) + content_tag(:td, obj.read_attribute(name))
    end
  end.join
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:06:17.817

我建议使用 collection 参数渲染一个部分，并内置 rails goodness 来执行这种类型的操作。我猜你希望表格标题与字段对齐？您仍然可以按照以下方式执行此操作（尚未测试，但应该可以），

在您的模型中，将类方法或数组定义为包含您要在前端显示的属性的常量，例如

**模型/用户.rb**

```
VisibleFields = [:id, :username]

#workaround for toplevel class constant warning you may get
def self.visible_fields
  User::VisibleFields
end 
```

**意见/用户/index.html.erb**

```
<table>
  <thead>
    <tr>
    <% User.visible_fields.each do |field| %>
      <th><%= field.to_s.titleize %></th>
    <% end %>
    </tr>
  </thead>
<tbody>
<%= render :partial => 'user', :collection => @users %>
</tbody>
</table>

**views/users/_user.html.erb**

<tr>
<% user.visible_fields.each do |field| %>
  <td class="label"><%= field.to_s.titleize %></td><td class="value"><%= user.send(:field) %></td>
<% end %>
</tr> 
```

# google-maps - 缩小时可以将谷歌地图类型更改为路线图吗？

> ID：13390918
> 
> 赞同：0
> 
> 时间：2012-11-15T02:57:22.690
> 
> 标签：google-maps

谷歌最近对他们的地图进行了更改，它在缩小时会切换到地形模式（从缩放级别 17 开始）。是否可以使用 javascript API 将其切换回或强制其保持在 RoadMap 模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:40:43.700

你做不到。因为谷歌自己改变了磁贴，所以我们什么也做不了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T21:01:17.280

Kasheftin 已经提出了一个解决方案来回答他的问题“在谷歌地图的最大缩放级别上自动切换到其他 mapType”：[https ://stackoverflow.com/a/18147423/348485](https://stackoverflow.com/a/18147423/348485)

# prolog - 返回两个或更多结果时成功的谓词

> ID：13390922
> 
> 赞同：4
> 
> 时间：2012-11-15T02:58:26.953
> 
> 标签：prolog

如果返回*两个或更多结果*，如何实现`rule1`成功？`rule2`

 *```
rule1(X) :-
    rule2(X, _). 
```

我如何计算结果，然后设置何时成功的最小值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:30:39.477

> 我如何计算结果，然后为它设置一个最小值？

目前尚不清楚您所说的结果是什么意思。所以我会做一些猜测。结果可能是：

**一个解法。**例如，目标`member(X,[1,2,1])`有两个解决方案。不是三个。在这种情况下，请考虑使用 any`setof/3`或类似的谓词。无论如何，`setof/3`在解决您遇到的问题之前，您应该先了解。

**一个答案。**目标`member(X,[1,2,1])`有三个答案。目标`member(X,[Y,Z])`有两个答案，但有无限多的解决方案。

因此，如果您想确保至少有一定数量的答案，请定义：

```
至少（目标，N）：-
   \+ \+ call_nth（目标，N）。

```

`call_nth/2` [在另一个 SO-answer 中](https://stackoverflow.com/a/11400256/772868)定义。

请注意，其他 SO 答案不正确：它们要么不终止，要么产生意外的实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:33:38.990

您可以使用库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）来计算解决方案

```
:- use_module(library(aggregate)).

% it's useful to declare this for modularization
:- meta_predicate at_least(0, +).

at_least(Predicate, Minimum) :-
      aggregate_all(count, Predicate, N),
      N >= Minimum. 
```

例子：

```
?- at_least(member(_,[1,2,3]),3).
true.

?- at_least(member(_,[1,2,3]),4).
false. 
```

**在此处编辑**是一种更有效的方法，将 SWI-Prolog 工具用于[全局变量](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%276.3%27,swi%28%27/doc/Manual/gvar.html%27%29%29)

```
at_least(P, N) :-
    nb_setval(at_least, 0),
    P,
    nb_getval(at_least, C),
    S is C + 1,
    ( S >= N, ! ; nb_setval(at_least, S), fail ). 
```

根据这个定义，P*只*被调用N 次。（我介绍了一个服务谓词 m/2 来显示它返回的内容）

```
m(X, L) :- member(X, L), writeln(x:X).

?- at_least(m(X,[1,2,3]),2).
x:1
x:2
X = 2. 
```

**编辑**@false评论的会计，我试过了

```
 ?- call_nth(m(X,[1,2,3]),2).
x:1
x:2
X = 2 ;
x:3
false. 
```

与 call_nth 从[这里](https://stackoverflow.com/a/11400256/874024)。

从实际的角度来看，我认为 nb_setval (vs [nb_setarg](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.20.1%27,swi%28%27/doc/Manual/manipterm.html%27%29%29) ) 在全局变量和局部变量之间进行了通常的权衡。即对于某些任务，可以很容易地知道接受条件的限制是什么。如果这不是必需的，则 nb_setarg 会更干净。

底线：更好的方法显然是使用 call_nth，双重否定的“技巧”解决了不适当的变量实例化。*

# python - Python中的素数生成器

> ID：13390924
> 
> 赞同：2
> 
> 时间：2012-11-15T02:58:27.870
> 
> 标签：python

我尝试使用 Eratosthenes 的史蒂夫在 Python 中创建所有素数的流。但是，我得到一个错误。

这是我尝试过的：

```
def genPrimes0(N):
    if (isPrime(N)):
        yield [N]
        filter(lambda x: N%x[0] == 0, genPrimes0(N+1))
    else:
        genPrimes0(N+1)

P = genPrimes0(2) 
```

这是控制台：

```
>>> ================================ RESTART ================================
>>> 
>>> P.next()
[2]
>>> P.next()

Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    P.next()
StopIteration
>>> 
```

任何的想法 ？

编辑：

我想要递归。我想用 LAZY 评估做一个实验。不是特别对这个问题感兴趣，而是对懒惰的评估感兴趣——我完全随机地选择了这个问题来做实验。

我正在使用带有 Idle 的 Python 2.7，但这并不重要。了解会发生什么很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T03:35:16.863

我认为您在当前的生成器中太努力了。您可以少做很多工作（例如拥有一个`isPrime`预言机）并让算法做它的事情：

```
def primes(n=2): # don't provide a different n value, or you will get odd results
    yield n
    yield from filter(lambda x: x % n, primes(n+1)) 
```

`yield from`这使用了一些Python 3.3 特定的语法（@icktoofay 的回答显示了这种循环（他还指出这`filter`只是 Python 3 中的生成器，所以`itertools.ifilter`如果您使用的是 Python 2，请使用）。

示例输出：

```
>>> for p in primes():
    print(p)
    if p > 100:
        break

2
3
5
7
11
13
17
19
23
29
31
37
41
43
47
53
59
61
67
71
73
79
83
89
97
101 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T03:39:22.350

您不需要递归进行惰性求值，您可以使用 itertools 中的函数来惰性计算素数。

```
import itertools    

def primes():
    numbers = itertools.count(2)
    while True:
        p = numbers.next()
        numbers = itertools.ifilter(lambda x, p=p: x%p, numbers)
        yield p

print list(itertools.islice(primes(), 100)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T03:08:50.653

这不是 Eratosthenes，而是 som 非尾递归函数女巫只是填充堆栈。如果你有 isPrime 函数，你应该这样写

```
def gen_primes(start):
   return itertools.filter(isPrime , itertools.count(start) ) 
```

# ruby - 带有实例变量的数学

> ID：13390927
> 
> 赞同：2
> 
> 时间：2012-11-15T02:58:39.667
> 
> 标签：ruby

我有这堂课：

```
class Account
    attr_accessor :balance
    def initialize(balance)
            @balance = balance
    end
    def credit(amount)
            @balance += amount
    end
    def debit(amount)
            @balance -= amount
    end
end 
```

然后，例如，稍后在程序中：

```
bank_account = Account.new(200)
bank_account.debit(100) 
```

如果我在其中调用带有“-=”运算符的借记方法（如上面的类中所示），程序将失败并显示以下消息：

```
bank2.rb:14:in `debit': undefined method `-' for "200":String (NoMethodError)
from bank2.rb:52:in `<main>' 
```

但是，如果我删除减号并将其设为@balance = amount，那么它就可以工作。显然我希望它减去，但我不知道为什么它不起作用。不能用实例变量做数学吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:01:14.947

你传入的值`initialize()`是一个字符串，而不是一个整数。通过 将其转换为 int `.to_i`。

```
def initialize(balance)
   # Cast the parameter to an integer, no matter what it receives
   # and the other operators will be available to it later      
   @balance = balance.to_i
end 
```

同样，如果传递给`debit()`and的参数`credit()`是字符串，则将其转换为 int。

```
def credit(amount)
    @balance += amount.to_i
end
def debit(amount)
    @balance -= amount.to_i
end 
```

最后，我要补充一点，如果你打算`@balance`在方法之外设置`initialize()`，建议定义它的 setter 以`.to_i`隐式调用。

```
def balance=(balance)
  @balance = balance.to_i
end 
```

注意：这假设您想要并且只打算使用整数值。`.to_f`如果您需要浮点值，请使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T03:02:29.657

很可能，你做到了

```
bank_account = Account.new("200") 
```

你实际上应该做

```
bank_account = Account.new(200) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:01:34.447

尝试

```
def credit(amount)
        @balance += amount.to_i
end
def debit(amount)
        @balance -= amount.to_i
end 
```

或传递一个数字作为参数（错误表示您正在传递一个字符串）

# visual-c++ - 如何将 Cocos2dx-wp8 从应用程序 (.exe) 移植到动态库 (.dll)

> ID：13390934
> 
> 赞同：1
> 
> 时间：2012-11-15T02:59:15.117
> 
> 标签：visual-c++, dll, cocos2d-x, dllexport, windows-phone-8

我已经解决这个问题将近一周了，但我仍然有 700 多个错误。绝对需要你的帮助！谢谢。

**问题**：需要使用

> 适用于 Windows Phone 8 的 Cocos2dx

在我的**C++/DirectX** Visual Studio 2012 项目中，该项目也使用 C#/XAML UI。

**给定**：Cocos2dx-wp8 作为 Application .exe 项目从[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Download下载](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Download)

**解决方案**：

1.  在 Visual Studio 2012 中打开我的 C#/XAML/DirectX Game1 解决方案 .sln 项目。
2.  在解决方案资源管理器中右键单击解决方案。添加 --> 现有项目...
3.  选中：\cocos2dx-0.13.0-wp8-0.8\HelloWorld\cocos2d.vcxproj 并点击打开
4.  将 HelloWorld 项目重命名为“Cocos2dxWp8”之类的其他名称，并删除 HelloWorld Classes 文件夹和您不想要的所有资产（如松鼠和背景图像）
5.  单击属性--> 配置属性--> 常规--> 配置类型--> 从“应用程序（.exe）更改为“动态库（.dll）”

6.  添加了属性的新路径 --> C/C++ --> 附加包含目录 -->

> $(项目目录); $(中间输出路径); ..\cocos2dx\包括；..\cocos2dx; ..\cocos2dx\platform\third_party\win8_metro\libpng; ..\cocos2dx\platform\third_party\win8_metro\zlib; ..\cocos2dx\平台\第三方\win8_metro；....\Cocos2dxWp8; ..\cocos2dx\平台\win8_metro；..\cocos2dx\platform\third_party\win8_metro\freetype; ..\cocos2dx\platform\third_party\win8_metro\libjpeg; ..\CocosDenshion\include; ..\cocos2dx\平台；公司；%（附加包含目录）

1.  更新了 Properties --> Linker --> Input --> Additional Dependencies --> 中的路径

> ..\cocos2dx\platform\third_party\win8_metro\libraries\x86\freetype.lib; ..\cocos2dx\platform\third_party\win8_metro\libraries\x86\zlib.lib; ..\cocos2dx\platform\third_party\win8_metro\libraries\x86\libjpeg.lib; ..\cocos2dx\platform\third_party\win8_metro\libraries\x86\libpng.lib; dxguid.lib;xaudio2.lib;dxgi.lib;uuid.lib;d3d11.lib;%(AdditionalDependencies)

1.  更新了 VC++ 目录中的路径：

> $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\freetype; $(解决方案目录); $（项目目录）公司；$(SolutionDir)GameWp8Dx\Cocos2dxWp8\CocosDenshion\include; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\zlib; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\libraries; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\libpng; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\libjpeg; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\libxml2; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\third_party\win8_metro\; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform\win8_metro; $(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\platform；$(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx\include；$(SolutionDir)GameWp8Dx\Cocos2dxWp8\cocos2dx; $(包含路径)

**从这里，它构建成功！** 它输出一个 .dll 文件但没有 .lib 文件，所以...

1.  在 CCPlatformMacros.h 中，我启用了将类导出到 dll：

    #define CC_DLL __declspec(dllexport)

是的，.lib 正在被写入...

**715 个错误，772 个警告**

> 错误 773 er​​ror LNK2001: **unresolved external symbol** "public: virtual __thiscall cocos2d:: **CCKeypadHandler** ::~CCKeypadHandler(void)" (??1CCKeypadHandler@cocos2d@UAE@XZ) F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld \CCSpriteBatchNode.obj Cocos2dXWp8Framework Error 774 error LNK2001: 无法解析的外部符号“public: virtual __thiscall cocos2d::CCKeypadHandler::~CCKeypadHandler(void)” (??1CCKeypadHandler@cocos2d@UAE@XZ)

我已经包含了定义 CCKeyHandler 类的头文件（在 CCKeypadDelegate.h 中），并且 CCSpriteBatchNode.h 也在同一个包含文件夹中。

类签名如下所示：

```
class CC_DLL CCKeypadHandler : public CCObject
class CC_DLL CCSpriteBatchNode : public CCNode, public CCTextureProtocol 
```

错误继续存在...

> F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\cocos2dorig.obj Cocos2dXWp8Framework Error 775 error LNK2001: unresolved external symbol "public: virtual __thiscall cocos2d::CCKeypadHandler::~CCKeypadHandler(void)" (??1CCKeypadHandler@cocos2d @@UAE@XZ) F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\CCImage_win8_metro.obj Cocos2dXWp8Framework
> 
> ...
> 
> 错误 1482 error LNK2001: unresolved external symbol "public: virtual void __thiscall cocos2d::CCTMXMapInfo::textHandler(void *,char const *,int)" (?textHandler@CCTMXMapInfo@cocos2d@UAEXPAXPBDH@Z) F:\src\WindowsPhone \GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\CCDrawingPrimitives.obj Cocos2dXWp8Framework Error 1483 error LNK2001: unresolved external symbol "public: virtual void __thiscall cocos2d::CCTMXMapInfo::textHandler(void *,char const *,int)" (?textHandler@CCTMXMapInfo @cocos2d@UAEXPAXPBDH@Z) F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\cocos2d.obj Cocos2dXWp8Framework Error 1484 error LNK2019: unresolved external symbol "public: virtual __thiscall cocos2d::CCKeypadDispatcher::~CCKeypadDispatcher(void) “ (??1CCKeypadDispatcher@cocos2d@UAE@XZ) 在函数中引用”public: virtual void * __thiscall cocos2d::CCKeypadDispatcher::`向量删除析构函数'(unsigned int)" (??_ECCKeypadDispatcher@cocos2d@UAEPAXI@Z) F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\CCDirector。 obj Cocos2dXWp8Framework Error 1485 error LNK2001: unresolved external symbol "public: virtual __thiscall cocos2d::CCKeypadDispatcher::~CCKeypadDispatcher(void)" (??1CCKeypadDispatcher@cocos2d@UAE@XZ) F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8 \HelloWorld\CCLayer.obj Cocos2dXWp8Framework Error 1486 error LNK2001: unresolved external symbol "public: virtual __thiscall cocos2d::CCKeypadDispatcher::~CCKeypadDispatcher(void)" (??1CCKeypadDispatcher@cocos2d@UAE@XZ) F:\src\WindowsPhone\ GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\CCEGLView_win8_metro。obj Cocos2dXWp8Framework Error 1487 error LNK1120: 48 unresolved externals F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\Win32\Debug\cocos2d\Cocos2dXWp8Framework.dll Cocos2dXWp8Framework

**解决方案/项目路径：**

F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx.sln F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\GameWp8Dx\GameWp8Dx.csproj F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\GameWp8DxComponent\GameWp8DxComponent.vcxproj F:\src\WindowsPhone \GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\cocos2d.vcxproj

**Cocos2d 包含文件：**

F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\cocos2dx\include F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\cocos2dx\platform

**此处构建的目标文件：**

F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\HelloWorld\Win32\Debug*.obj

**.dll / .lib 在这里构建：**

F:\src\WindowsPhone\GameWp8Dx\GameWp8Dx\Cocos2dxWp8\Win32\Debug\cocos2d

抱歉，这篇文章很长，但我希望有足够的细节来解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:56:57.890

我创建了一个新的动态库项目，然后复制了这些文件。我构建了 .dll 和 .lib，但不适用于 ARM CPU 构建目标（用于设备）。此外，Cocos2dx 导演和场景层的设置似乎不适用于呈现到 DrawingSurfaceBackgroundGrid 控件的现有 C#/XAML 和 DirectX 项目。所以最后，我没有在我的混合项目设置中使用 Cocos2dx。

如果其他人有更好的建议，请告诉我。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T16:53:29.640

主题：也许您没有在 SLN 中正确设置项目依赖项？

我让 Cocos2d 部分使用 XAML+D3d 互操作，但由于调用从 XAMLComponent DLL 到 Cocos2d DLL 来回调用，它似乎弄乱了指针和内存。现在我试图将所有 Cocos2D 源文件移动到我的 D3Dcomponent 项目中，但是出现了严重错误，并且我得到了一个奇怪的 kernelbase.dll 第一次机会异常。

题外话：我还尝试在 XAML+D3D 互操作项目上通过 cocos2d-x 完成游戏，并使用 Visual Studio 2012 附带的模板。但是，只显示了一个模糊的背景。我使用的是 DrawingSurfaceBackgroundGrid，后来发现在 Windows Phone 8 上，它有一些与 Z-order 相关的问题。我最终用 DrawingSurface 替换它。

# sql - 创建一个表中的 count() 小于另一表中的元组值的 SQL 断言

> ID：13390937
> 
> 赞同：1
> 
> 时间：2012-11-15T03:00:27.560
> 
> 标签：sql, sql-server-2008, assertion

有两张表：

课程（**CourseNo、SectionNo、Year、Semester**、Capacity）（粗体表示键）。

招生（**课程编号、年份、学期、学段编号、学生编号**、年级）

我将如何使用 SQL 来确保每个班级的注册人数少于班级容量？

我知道如何单独完成这些部分，但是每个班级注册的学生的 count() 与该班级的容量之间的比较是我迷失的地方。我不知道如何确保它与正确的值进行比较。

谢谢

编辑：我正在使用 SQL Server 2008 创建此断言，但我想知道除了在 SQL Server 中创建触发器（因为它不支持断言）之外，如何执行常规 SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:03:37.457

```
select courseno, capacity, count(*) as enrollments
from classes c 
join enrollments e on e.courseno = c.courseno
group by c.courseno , capacity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:05:27.753

```
select c.CourseNo, c.SectionNo, c.[Year], c.Semester, Capacity, count(*) as Enrolled
from classes as c 
 join enrollments as e
  on c.CourseNo = e.CourseNo
   and c.SectionNo = e.SectionNo
   and c.[Year] = e.[Year]
   and c.Semester = e.Semester
 group by c.CourseNo, c.SectionNo, c.[Year], c.Semester, Capacity
 having count(StudentNo) > Capacity 
```

# r - R中的svm内核实验室

> ID：13390939
> 
> 赞同：0
> 
> 时间：2012-11-15T03:01:03.207
> 
> 标签：r, kernel

我想知道当我使用 ksvm 时如何找出**sigma的最佳值（我的数据集有 21 个分类和数值变量，有 1400 个观察值）这是我的代码：**

```
rbf <- rbfdot(sigma = 0.05)
model <- ksvm(target~.,data = train,prob.model = TRUE,kernel = rbf)
p <- predict(model,test,type="probabilities") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T15:40:04.293

我同意这`kpar="automatic"`可能会有所帮助，但这仅适用于一些无监督的启发式方法，并不一定会优化分类精度的参数。实现后者的唯一方法是编写一个将网格搜索与交叉验证结合使用的包装器。如果您不想自己编写，mlr 包（函数`tuneParams()`）可以为您完成。e1071 包（包括一个到 LIBSVM 的接口）也提供了一个`tune()`做同样事情的函数。

干杯，UBod

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:40:33.723

ksvm 为您找出最佳的 sigma 值。我在写作

# 训练 svm 向量

```
ksvm_model<- ksvm(x=train,y=y,scaled=TRUE,type="nu-svr",kernel="rbfdot", kpar="automatic", prob.model=TRUE,class.weights=NULL,cache=100,cross=5);
#summary(ksvm_model);
# train and test the model over the test data 
next_y<-predict(ksvm_model,test_mat,type="response"); 
```

"kpar="automatic"" 会为您做到这一点。

只需检查一下。

# c# - 如何在代码中执行此自动完成框 xaml？

> ID：13390946
> 
> 赞同：0
> 
> 时间：2012-11-15T03:02:26.147
> 
> 标签：c#, silverlight, .net-4.0

我有一个带有这些数据绑定的自动完成框：

```
<sdk:AutoCompleteBox Height="23" HorizontalAlignment="Left" Margin="80,21,0,0" Name="comboBox_clients" VerticalAlignment="Top" Width="171" ItemsSource="{Binding}" IsTextCompletionEnabled="True" IsDropDownOpen="True" ValueMemberPath="client_code">
    <sdk:AutoCompleteBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding client_code}" Name="left" Width="70" />
                <TextBlock Text="{Binding client_name}" Name="right" Width="250" />
            </StackPanel>
        </DataTemplate>
    </sdk:AutoCompleteBox.ItemTemplate>
</sdk:AutoCompleteBox> 
```

它像我想要的那样工作，但它出现在一个加载很多的表单上，并且因为自动完成框有几千个项目，所以在初始加载时需要两到三秒才能将所有字符串编入索引/按顺序/无论如何一次我将它与适当的 observablecollection 绑定。

相反，我想将 autocompletebox 对象保留为全局对象，因此几秒钟的索引时间仅发生在第一次加载时，然后在随后打开窗口期间，表单上的 autocompletebox 可以设置为全局对象。我将如何在代码中复制这个数据绑定结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:29:41.433

首先创建一个 AutoComplete 并设置它的 DataTemplate（下面的链接会引导你）。

您无法在后台获取 DataTemplate 代码的实例，但是...

[https://stackoverflow.com/a/7101581/413032](https://stackoverflow.com/a/7101581/413032)

[https://stackoverflow.com/a/72158/413032](https://stackoverflow.com/a/72158/413032)

但是，如果我是您，尽管在代码隐藏中创建数据模板，但创建一个小资源并从后面的代码中获取它会使事情变得更容易。

# ruby-on-rails - Rails - 传递参数以创建填充表单

> ID：13390954
> 
> 赞同：0
> 
> 时间：2012-11-15T03:03:22.410
> 
> 标签：ruby-on-rails, forms, parameter-passing, link-to

我想通过 link_to 方法传递一些参数来创建方法，以便表单将显示预填充给用户。

我写了这段代码来传递参数，

```
<%= link_to "Buy", new_transaction_url(:friend_id => @friend.id, :t_type => 2) %> 
```

在 transactions_controller 的新方法中，我有：

```
@transaction = Transaction.new
@transaction.t_type = params[:t_type] 
```

它也没有奏效。

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:20:48.923

尝试更改`params[:t_type]`为`params[:transaction][:t_type]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:07:49.767

通常`new_transaction_url`会调用`#new`控制器中的操作，而不是`#create`操作。在您执行此操作时查看您的日志文件，以准确查看正在调用的控制器操作以及正在传递的参数。

# php - 我应该为这个 php/mysql xml 生成 api 使用什么缓存策略/技术

> ID：13390959
> 
> 赞同：1
> 
> 时间：2012-11-15T03:03:45.603
> 
> 标签：php, mysql, xml, caching

我正在开发一个基于 php/mysql 的 api，它通过执行多个 sql 查询返回生成的 xml，然后将结果集组装成单个 xml 字符串/文档。

我将有多个客户请求此 api 的各种风格，例如：

[http://domain.com/api/](http://domain.com/api/) /playerbio/12345 将返回一个球员的传记，其中包括个人信息、当前年初至今的统计数据、职业统计数据、伤病名单等。

这种类型的 api 请求将由许多客户每小时发出，针对不同的联赛、球队、名册、球员等

源数据库的统计人员和编辑人员全天不断地管理这些内容。

我目前有这个 api 直接从编辑器源数据库读取，几乎可以保证生成的任何 xml 文档都是最新的。

我正在考虑实施缓存策略以减少查询源数据库的次数，因为平均 xml 文档需要 4-7 次查询来收集所有数据以进行组装。

我在这里寻找策略和技术，特别是考虑到这个 api 每天将被调用 300-500k 次，并且 xml 文档大小范围从 20k 到 100k。

我知道有 APC、memcache、memcached、Redis、MongoDB，甚至创建了一个简单的基于文件的缓存，但我想听听其他人在类似情况下的使用情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:53:01.863

如果您想要快速且持久的数据，Redis 是您的选择，否则 MemcacheD 将是您的替代方案，但如果您的应用程序在单个服务器上运行，那么 APC 将是理想的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:17:07.537

我是 memcached 的忠实粉丝——它快速、易于使用并且具有用于集成的标准库。

memcached 速度非常快，可以提供大量数据，但它不是持久的，它是一个真正的缓存，所以希望有一种加载数据的方法。旧钥匙的自动修剪是无价的。

# c# - DataGridView - 改变列的颜色

> ID：13390960
> 
> 赞同：0
> 
> 时间：2012-11-15T03:03:59.877
> 
> 标签：c#, .net

我有一个这种格式的datagridview：

```
Days | one | two | three | four | five
day1 |cell |cell |...ect
day2
day3
day4
day5 
```

我想要做的是改变 day1,day2..ect 单元格的背景颜色。当我在这里时，是否可以将这些单元格设为只读，以便任何输入从“一”行单元格 1 开始，依此类推，所以我不会覆盖天数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:16:49.160

如果您使用的是winforms，它应该是这样的

```
dataGridView1.Columns["Days "].ReadOnly = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:25:39.827

你没有具体说明你是如何处理颜色的，所以我想我会提供一些可能有帮助的反馈。

更改列时，最好设置`dataGridViewColumn.DefaultCellStyle`而不是遍历列中的单元格并设置每个单元格的样式。

# garbage-collection - 如果 A 持有对 B 的引用，B 可以被垃圾回收吗？

> ID：13390961
> 
> 赞同：2
> 
> 时间：2012-11-15T03:04:08.523
> 
> 标签：garbage-collection

这实际上是《Java Performance》一书的一个问题，作者在其中提到：

> 在旧代空间垃圾收集之前对年轻代空间进行垃圾收集通常会导致垃圾收集器的工作更少，并且更多的对象被垃圾收集，因为旧代空间中的对象可能持有对年轻代空间中对象的对象引用。**如果年轻代空间没有被垃圾回收，那么老年代空间中任何持有​​对年轻代空间对象的引用的对象都不能被垃圾回收。**

我觉得粗体字是不正确的。我认为他实际上的意思是，如果年轻代空间没有被垃圾收集，那么老年代空间中被年轻代空间中的对象**引用（而不是持有对）**的任何对象都不能被垃圾收集。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:55:44.127

> 我认为他实际上的意思是，如果年轻代空间没有被垃圾收集，那么老年代空间中被年轻代空间中的对象引用（而不是持有对）的任何对象都不能被垃圾收集。

我同意你的看法。可能只是一个错字。

# java - Java SSL：添加 HTTPS EndpointIdentificationAlgorithm 后出现“致命错误：80：...展开网络记录”

> ID：13390964
> 
> 赞同：4
> 
> 时间：2012-11-15T03:04:25.150
> 
> 标签：java, ssl, hostname

Java 7u9

标题中的错误消息是：“致命错误：80：展开网络记录的问题”。所以不会让我在标题中加上“问题”。

我正在构建一个针对 Netty 的 Java HTTPS 客户端。SSL 握手一直有效，直到我添加了“HTTPS”端点识别算法以启用服务器主机名验证：

```
SSLEngine engine = tcpHelper.getSSLContext().createSSLEngine();
SSLParameters sslParameters = engine.getSSLParameters();
sslParameters.setEndpointIdentificationAlgorithm("HTTPS");
engine.setSSLParameters(sslParameters);
engine.setUseClientMode(true); 
```

添加算法后，SSL 握手挂起，连接最终超时。启用 SSL 调试（javax.net.debug=all）后，我可以看到握手现在在 ServerHello 之后失败，在服务器发送它的证书链之后，之后

```
*** ServerHelloDone
1761586552@qtp-1653588482-2, WRITE: TLSv1.2 Handshake, length = 3294 
```

在服务器上。客户端接收并显示证书链，然后失败：

```
New I/O  worker #3, fatal error: 80: problem unwrapping net record
java.lang.RuntimeException: Delegated task threw Exception/Error
%% Invalidated:  [Session-1, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256]
New I/O  worker #3, SEND TLSv1.2 ALERT:  fatal, description = internal_error
New I/O  worker #3, WRITE: TLSv1.2 Alert, length = 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T03:04:25.150

Java 7u9

首先，感谢布鲁诺对[这个相关问题](https://stackoverflow.com/questions/13315623/netty-ssl-hostname-verification-support)的帮助，这使我得到了最终答案。

回答我自己的问题。来之不易的知识。

解决方案是在创建 SSL Engine 时将请求目标的主机和端口添加到构造函数中：

```
SSLEngine engine = tcpHelper.getSSLContext().createSSLEngine(targetHost, targetPort); 
```

如果没有这个，Java 最终会在 SSL 库 (IPAddressUtil.textToNumericFormatV4) 深处抛出 NullPointerException，这会导致 SSL 调试输出中的错误消息不是很有帮助。

# php - 使用 PHP 将 C++ 编译为二进制文件

> ID：13390973
> 
> 赞同：2
> 
> 时间：2012-11-15T03:05:23.153
> 
> 标签：php, c++, compilation

我有一个用户想要下载的程序。与其提供下载链接，他们下载程序并输入信息，不如让我的 PHP 脚本来做。

我的网站需要用户名和密码才能登录，有一个用户可以下载文件的私人页面。当用户进入“下载”页面时，页面上有用户必须选择的特定选项。一旦选择了选项并且用户单击“下载”，我希望 PHP 转到我的程序源，在源中添加缺少的数据，将其编译为 .exe，然后将其返回给用户。

事情是，我不知道如何做到这一点，我害怕 PHP 会为一个用户提供信息并意外地将一个用户信息提供给其他所有人。

我目前正在 Windows 中制作我的程序（使用 Code::Blocks），但我将在 Linux 或 FreeBSD 服务器上托管文件。只是想把它说出来，以防有什么我需要知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:27:47.507

由于您实际上允许用户在您的服务器上输入任意代码，这似乎是一个严重的安全风险。为什么需要自定义可执行文件？会不会是配置文件？

如果你想继续这样做，它可以很容易地完成。也许使用像 Mustache 这样的模板引擎（不是 C++ 语言功能模板）。编写您的源文件以包含此小胡子模板。

当用户发布信息后，您只需运行命令以应用模板以获取完成的源代码，然后运行您的 makefile 以生成完成的可执行文件。然后你可以像其他任何东西一样给它。

如果您想确保用户无法获得相同的二进制文件，一个简单的方法是在每次运行后删除完成的可执行文件。有更好的方法可以做到这一点，但这很容易。

# java - 在paint（g）中设置JLabel的文本-这是错误的吗？

> ID：13390974
> 
> 赞同：0
> 
> 时间：2012-11-15T03:05:30.367
> 
> 标签：java, applet

代码片段在这里：

```
 int area;
        int[] xcoords = new int[3];
        xcoords[0] = coordsAX;
        xcoords[1] = coordsBX;
        xcoords[2] = coordsCX;
        sortArray(xcoords);
        int[] ycoords = new int[3];
        ycoords[0] = coordsAY;
        ycoords[1] = coordsBY;
        ycoords[2] = coordsCY;
        sortArray(ycoords);
        //Remember, array[0] is the biggest and array[2] is the smallest!
        int rectWidth = xcoords[0] - xcoords[2];
        int rectHeight = ycoords[0] - ycoords[2];

        area = (rectWidth * rectHeight);
        System.out.println(area);
        lblArea.setText("Area: " + area); 
```

整个代码都在我的小程序的paint(g) 方法中。我的目标是让用户能够看到 JLabel。计算非常顺利。但是当我运行时，小程序看起来像：

![在此处输入图像描述](../Images/ec38868612c3136ac529a5b38bfe3e34.png)

我已经收集到 setText 行不应该在 paint(g) 中，但是在这种情况下，它应该去哪里才能使它成为 JLabel 保持不变，直到生成一个新的三角形（通过单击“单击我”按钮）？

请注意，我是一名自学 Java 的高中生，因此，我对这门语言的了解就像一大块瑞士奶酪。我会很感激没有解释太多远高于基本小程序制作水平的主题的解释。:)

感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:11:03.380

大概你有一个附加到“点击我”按钮的动作监听器。

当动作被触发时，我会在那时更新标签和 UI。

您可能想阅读[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

（我也有点担心您使用的是 AWT 而不是 Swing，但我可能弄错了；））

**更新示例**

![在此处输入图像描述](../Images/9548b159f85a1bf9d1511c33f84b63a5.png)

```
public class TestArea {

    public static void main(String[] args) {
        new TestArea();
    }

    public TestArea() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AreaPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class AreaPane extends JPanel {

        private JLabel areaLabel;

        public AreaPane() {
            areaLabel = new JLabel("Area: ...");
            JButton clickMe = new JButton("Click Me");
            clickMe.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    areaLabel.setText("Area: " + NumberFormat.getNumberInstance().format(Math.random() * 1000));
                    // update UI as required
                }

            });

            add(areaLabel);
            add(clickMe);
        }
    }
} 
```

# php - 将样式表替换为其他网页自己的样式表

> ID：13390975
> 
> 赞同：0
> 
> 时间：2012-11-15T03:05:38.447
> 
> 标签：php, request, stylesheet, external

我正在建立网站 www.verbum.xtrweb.com/verbum.php

我使用 php 中的 request 函数从网站 www.rae.es 获取西班牙语单词的定义。我得到的输出是在一个，但不幸的是，我不能改变它输出的元素的样式。例如，如果您查找单词“hola”，您将获得“hola”的含义，但使用 www.rae.es 的样式表。我想要的是将此输出应用于我自己的样式（颜色、字体、字体大小等）

![在此处输入图像描述](../Images/dcd2f3e63e564bf812ed2dcfbd482fb6.png) 我现在有一个叫做 $important 的东西！但根据我之前测试的方式，它不起作用。

我急切地唤起了stackoverflow社区的神奇帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:31:54.383

您要更改的内容位于 iframe 中。我建议您直接将样式表注入 iframe，但不幸的是，您想要的内容位于不同的域中。由于跨域安全策略，您将无法直接修改 iframe 的内容。

有两种方法可以解决这个问题。您可以使用 PHP 应用程序来获取您需要的内容，然后您可以过滤它并以您想要的任何方式更改它。这将替换 iframe，而您只需在页面上显示您需要的内容。另一种选择是使用更简单的 PHP 应用程序来获取内容，但根本不修改它。然后你将你的 iframe 指向这个 PHP 应用程序，它会以与现在相同的方式显示，但它将来自同一个域。然后你可以用 Javascript 注入一个样式表，让它看起来像你想要的任何样子。

“重要！” 如果您使用我提到的第二种方法，可能需要 CSS 覆盖，但这不是问题的根本原因。如果你想了解更多关于如何使用重要！，我推荐[这篇文章](http://css-tricks.com/when-using-important-is-the-right-choice/)。

下面我实现了我描述的第一种方法的一个例子。这将下载请求的页面，然后注入一组自定义样式。

```
<?php
$url = 'http://lema.rae.es/drae/srv/search?id=IwxflJmT9DXX2DMkYs8Z';

$css = <<<EOT
<style type="text/css">
body
{
    background: #eeeeee;
}
.a
{
    color: green;
}
.f
{
    font-size: 200%;
}
.o
{
    font-size: 80%;
}
img
{
    opacity: .5;
}
img:hover
{
    opacity: 1;
}
</style>
EOT;

$data = file_get_contents($url);
$data = str_replace('</head>', $css.'</head>', $data);
echo $data;

?> 
```

# regex - nmap 服务文件上的正则表达式

> ID：13390976
> 
> 赞同：2
> 
> 时间：2012-11-15T03:05:47.207
> 
> 标签：regex, sed, nmap

我只需要使用 sed 过滤来自 /usr/share/nmap/nmap-services 的端口

```
tcpmux  1/tcp   0.001995        # TCP Port Service Multiplexer [rfc-1078]
compressnet     2/tcp   0.000013        # Management Utility
compressnet     3/tcp   0.001242        # Compression Process
unknown 4/tcp   0.000477
unknown 6/tcp   0.000502
echo    7/tcp   0.004855
unknown 8/tcp   0.000013
discard 9/tcp   0.003764        # sink null
unknown 10/tcp  0.000063
systat  11/tcp  0.000075        # Active Users 
```

我尝试过类似 (!?([0-9]+/tcp)) 但它不起作用：为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:11:14.387

尝试这样做：

```
grep -oP '\d+(?=/(udp|tcp))' /usr/share/nmap/nmap-services 
```

或使用 perl ：

```
perl -lne 'print $& if m!\d+(?=/(udp|tcp))!' /usr/share/nmap/nmap-services 
```

我使用*积极的前瞻性*高级正则表达式，请参阅[http://www.perlmonks.org/?node_id=518444](http://www.perlmonks.org/?node_id=518444)

或使用没有高级正则表达式的 awk ：

```
awk '{gsub("/.*", ""); print $2}' /usr/share/nmap/nmap-services 
```

或者

```
awk -F'[ /\t]' '{print $2}' /usr/share/nmap/nmap-services 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:14:24.720

最简单的就是这样：

```
cut -s -d\  -f2 test 
```

你也可以这样做：

```
sed '/[^ ]* \([^ ]*\).*/ s::\1:; /^$/d' FILE 
```

`cut`变体打印不匹配的空行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:57:21.827

这是一个使用 AWK 的示例

```
cat /usr/share/nmap/nmap-services | awk '{print $2}' | awk -F\/ '{print $1}' 
```

# ios - 如果我支持 iOS 3.x，Apple 会拒绝我们的应用吗？

> ID：13390977
> 
> 赞同：2
> 
> 时间：2012-11-15T03:05:48.963
> 
> 标签：ios, iphone, xcode, ios-3.x

我知道如果我在 Xcode 4.5 上构建我们的应用程序，我们将无法将我们的应用程序提交到 App Store，更不用说我们甚至无法在装有 iOS3.x 的设备上运行该应用程序。

不是我想澄清的是，如果我们决定仍然支持 iOS3.x，我们是否只使用 Xcode 4.3 或任何低于 4.5 的 Xcode，瞧，我可以将它提交到应用商店，Apple 不会给予关心和批准该应用程序是否支持 iOS3.x，因为它是使用较低版本的 Xcode 构建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:11:47.760

只要您提供了 iPhone 5 的屏幕截图，您应该可以提交向后支持 iOS 3.x 的应用程序。

但是为什么要支持 iOS 3.x 呢？使用此 iOS 版本的设备并不多。

# php - MongoDB 功能类似于 SQL 中的受影响行？

> ID：13390981
> 
> 赞同：0
> 
> 时间：2012-11-15T03:06:11.637
> 
> 标签：php, sql, mongodb, pdo

我是 MongoDB 的新手，我想证明我的查询结果是否符合预期。像受影响的行或 SQL 中的某些内容。我正在使用 pdo 和 mongoDB 在 PHP 中工作。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:16:15.590

我发现了这样的事情：

```
$result->count() 
```

这给了我在 mongodb 中查询的影响行。仅供您参考

# java - 返回布尔值的方法

> ID：13390982
> 
> 赞同：3
> 
> 时间：2012-11-15T03:06:13.587
> 
> 标签：java, arrays, methods, boolean

好的，所以我的问题是关于布尔返回。对于我的 Comp Sci 作业，我必须使用方法制作课程注册程序，其中之一是添加课程方法。基本上，您在目录中搜索课程，如果匹配，则将其添加到学生日程表并返回布尔值 true。我这样做了，但由于某种原因，它给了我一个错误。这是代码：

```
public static boolean addCourse(
    Course[] catalog,
    Course[] mySchedule,
    int myNumCourses,
    int dept,
    int courseNum)
{
    int j;
    int i;
    int k;
    int deptCat;
    int courseNumCat;
    Course courseAdd = null;
    char checkDay;
    int checkTime;

    if (mySchedule.length == myNumCourses) {
        return false;
    }
        for (i = 0 ; i < catalog.length ; i++) {
            Course course = catalog[i];
            deptCat = course.getDepartment();
            courseNumCat = course.getCourseNumber();
            if (deptCat == dept && courseNumCat == courseNum) {
                courseAdd = catalog[i];
                break;
            }
            else continue; }
        for (j = 0 ; j < myNumCourses ; j++) {
            if (mySchedule[j] == null) {
                mySchedule[j] = courseAdd;
                return true;
                }
                else continue;
                }

    for (k = 0 ; k < mySchedule.length ; k++) {
        Course course = mySchedule[k];
        if (course != null) {
            checkDay = course.getDay();
            checkTime = course.getPeriod();
            if (checkDay == courseAdd.getDay() && checkTime == courseAdd.getPeriod()) {
                return false;
            }
        }
        else continue;

    }

} 
```

为什么它不能识别布尔返回值？是因为我把它们放在一个循环中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:10:32.813

您*需要*在方法的末尾放置一个`return`-statement，即使您可能知道它永远不会到达（编译器不够聪明，无法知道这一点，这解释了错误）。

例如，即使这样也*不会*编译：

```
public static boolean foo() {
    if (true)
        return true;
} 
```

除非我们添加最后的`return`声明。你所拥有的是类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:19:45.873

您必须在所有代码路径中显式返回一个布尔值（true/false）。因为您的函数的返回类型是“布尔值”。

在您的情况下，您必须在最后一个循环之后添加一个 return 语句。

如果不想写很多“return xx”语句，可以把这个函数的返回类型改为“void”，在错误的情况下抛出异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T03:49:19.917

我认为最后一个循环有问题。如果返回 false 的条件从未满足，它会一直持续到调度结束，而不返回任何内容。如果您要在方法的末尾添加一个返回，则此循环可能会落入它。如果没有执行“return false”，您的意思是在循环后返回 true 吗？

```
 for (k = 0; k < mySchedule.length; k++) {
      Course course = mySchedule[k];
      if (course != null) {
        checkDay = course.getDay();
        checkTime = course.getPeriod();
        if (checkDay == courseAdd.getDay()
            && checkTime == courseAdd.getPeriod()) {
          return false;
        }
      } else
        continue;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T03:11:20.920

将返回值放在循环中没有任何问题，但是，编译器无法保证此方法将返回值并因此引发错误。在方法的最后，您需要返回 true 或 false，以最合适的为准。您的所有返回都在条件范围内，因此可能无法执行，使您的函数没有返回语句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T03:09:23.207

无论您在哪里使用`if`语句，它都可能`else`还必须返回或流必须转到另一个返回。返回时缺少 ELSE。

# codeigniter - 调试 Codeigniter Shoppincart 功能：

> ID：13390983
> 
> 赞同：1
> 
> 时间：2012-11-15T03:06:56.527
> 
> 标签：codeigniter

请给我一些帮助。这是一个 Codeigniter 脚本 MVC。模型中有一个控制器“功能添加到购物车”，模型：“功能 get_products”。我看不出这里出了什么问题以及为什么函数 get_products 没有执行。有人可以帮我吗。

这是连接到数据库的模型：get_product：

```
function get_product()
{
  $product_id = $this->input->post(‘product_id’);

  $query = $this->db->select(‘product_id, product_name, description, price, photopath’);
  $query = $this->db->from(‘product’);
  $query = $this->db->where(‘product_id’, $product_id); 
  $query = $this->db->get(’‘);
  return $query->result_array();
} 
```

这是一个名为 Function add_cart 的控制器，它将产品添加到“购物车视图”：

```
public function add_cart()
{

  $thisProduct = $this->Cart_model->add_product();

  if($thisProduct->num_rows() > 0)
  {

  $data = array(‘id’ => $thisProduct[‘product_id’],
               ‘qty’ => 1,
             ‘price’ => $thisProduct[‘price’],
              ‘name’ => $thisProduct[‘product_name’], 
       ‘description’ => $thisProduct[‘description’]
  );

  $this->cart->insert($data);

  }

  $this->load->view(“site_header”);
  $this->load->view(“site_nav”);
  $this->load->view(“shoppingcart”, $data);
  $this->load->view(“site_footer”);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:48:48.730

你犯了很多错误。在这里阅读：http: [//codeigniter.com/forums/viewthread/128969/](http://codeigniter.com/forums/viewthread/128969/)

# scheme - 使用方案的延续

> ID：13390985
> 
> 赞同：4
> 
> 时间：2012-11-15T03:07:05.277
> 
> 标签：scheme, continuation

所以我认为我了解延续在 Scheme 中的基本工作原理，但我无法弄清楚如何使用它而不是递归。

我们得到了 make-matcher 的工作代码（只是基本的模式匹配），它已经完成了我们想要的一切。您给它一个模式，它会为您创建一个匹配器，您可以使用它在片段中搜索该模式。匹配器接受一个接受器，将它的结果提供给它，如果结果不被接受，它会递归地下降到片段的下一部分并继续前进。

现在，我们要做的基本上就是修改它以使用延续而不是接受器。它返回后缀（从不匹配的模式中留下的东西）和一个延续，所以像

```
(let ((suffix (car match-result))
          (backtrack (cdr match-result))) 
```

会给我们后缀和函数回溯，我们可以调用以继续前进。

所以供参考，原始代码

```
(define match-junk
  (lambda (k frag accept)
    (or (accept frag)
        (and (< 0 k)
             (pair? frag)
             (match-junk (- k 1) (cdr frag) accept)))))

(define match-*
  (lambda (matcher frag accept)
    (or (accept frag)
        (matcher frag
                (lambda (frag1)
                  (and (not (eq? frag frag1))
                       (match-* matcher frag1 accept)))))))

(define make-matcher
  (lambda (pat)
    (cond    
     ((symbol? pat)
      (lambda (frag accept)
        (and (pair? frag)
             (eq? pat (car frag))
             (accept (cdr frag)))))

     ((eq? 'or (car pat))
      (let make-or-matcher ((pats (cdr pat)))
        (if (null? pats)
            (lambda (frag accept) #f)
            (let ((head-matcher (make-matcher (car pats)))
                  (tail-matcher (make-or-matcher (cdr pats))))
              (lambda (frag accept)
                (or (head-matcher frag accept)
                    (tail-matcher frag accept)))))))

     ((eq? 'list (car pat))
      (let make-list-matcher ((pats (cdr pat)))
        (if (null? pats)
            (lambda (frag accept) (accept frag))
            (let ((head-matcher (make-matcher (car pats)))
                  (tail-matcher (make-list-matcher (cdr pats))))
              (lambda (frag accept)
               (head-matcher frag
                             (lambda (frag1)
                               (tail-matcher frag1 accept))))))))

     ((eq? 'junk (car pat))
      (let ((k (cadr pat)))
    (lambda (frag accept)
      (match-junk k frag accept))))

     ((eq? '* (car pat))
      (let ((matcher (make-matcher (cadr pat))))
    (lambda (frag accept)
      (match-* matcher frag accept))))))) 
```

因此，让我们以 or-matcher 为例。目前，如果它找到匹配项，它会将结果提供给接受者，如果接受者不喜欢这个结果，它会继续寻找下一个可能的答案。如果我想使用延续，我将不得不在它找到结果后强制它退出并使用 call/cc 来存储程序的当前状态。我只是……不完全确定我应该把逃生和呼叫/抄送放在哪里。我想我现在需要添加一个基本案例，因为我没有接受者告诉我我的答案是对还是错，但是......

我想如果有人只是给我一些关于要进行的主要更改的指示，我可能会弄清楚。我当时了解 WHAT 的各个部分，但无法完全了解如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:20:32.833

让我们考虑一下方案方式。

您只需要一个流，它会一一返回所有匹配项。并且您已经获得了一个返回匹配顺序的函数，如下所示：

```
(define matcher
  (lambda (yield)
    ; the following is your matcher implementation
    (loop ... (yield one-result) ...))) 
```

yield 是一个函数，它捕获延续并将控制权返回给调用者。让我们通过 call/cc 来实现它来制作一个流。

```
(define make-match-stream
  (stream-unfold
    car                     ; map
    identify                ; pred
    (lambda (x) ((cdr x)))  ; gen
    (begin                  ; base
      (matcher (lambda (one-result)
        (call/cc (lambda (continuation)
          (cons one-result continuation)))))
      #f))) 
```

`stream-unfold`来自 srfi-41，它返回一个流`unfold`。

用于`stream-filter`过滤掉不需要的结果：

```
(stream-filter accept result) 
```

# ruby - Ruby Helper 中的嵌套方法

> ID：13390987
> 
> 赞同：0
> 
> 时间：2012-11-15T03:07:30.653
> 
> 标签：ruby, haml, middleman

我在 MiddleMan 做一个项目。试图将一个方法的结果作为另一个方法的参数传递。我遇到了逗号和括号的各种语法问题。一切对我来说都是正确的，我疯了吗？提前致谢！

我遇到问题的方法调用是`create_campus_subnav()`

```
module SubnavHelper

  def create_subnav_link ( label, link="" )
    if link == ""
      link = label
    end
    return "          <li id='item-#{link}'><a class='title' id='link-#{link}'>#{label}</a></li>"
  end

  def create_subnav (*links)
    subnav = "\
    <nav class='nav-sub'>\
      <div class='nav-wrap'>\
        <ul class='nav-list'>"

    links.each do |attr,val|
      subnav += " attr: " + attr;
      subnav += " val: " + val;
      # subnav += args["attr"] + "\n"
    end 

    subnav += "\
        </ul>\
      </div>\
    </nav>"
    return subnav
  end

  def create_campus_subnav
      subnav = create_subnav ( 
        create_subnav_link ("Campus Overview", "Overview"), 
        create_subnav_link ("About", "About"),  
        create_subnav_link ("Admissions"), 
        create_subnav_link ("Career Services" "CareerServices"),       
        create_subnav_link ("Schedules, Tuition & Fees" "Tuition"),         
        create_subnav_link ("Financial Assistance & Scholarships" "FinancialAssistance"),         
        create_subnav_link ("Faculty")      
      )
      puts subnav
  end
end 
```

和错误：

```
/dev/config.rb:54:in `require': /gia/dev/helpers/subnav_helper.rb:36: syntax error, unexpected ',', expecting ')' (SyntaxError)
        create_subnav_link ("Campus Overview", "Overview"), 
                                              ^
/dev/helpers/subnav_helper.rb:36: syntax error, unexpected ')', expecting keyword_end
        create_subnav_link ("Campus Overview", "Overview"), 
                                                          ^
/dev/helpers/subnav_helper.rb:37: syntax error, unexpected ',', expecting ')'
        create_subnav_link ("About", "About"),  
                                             ^
/dev/helpers/subnav_helper.rb:37: syntax error, unexpected ')', expecting keyword_end
        create_subnav_link ("About", "About"),  
                                                      ^
/dev/helpers/subnav_helper.rb:39: syntax error, unexpected tLPAREN_ARG, expecting keyword_do or '{' or '('
        create_subnav_link ("Career Services" "...
                            ^
/dev/helpers/subnav_helper.rb:39: syntax error, unexpected ',', expecting keyword_end
...er Services" "CareerServices"),       
...                               ^
/dev/helpers/subnav_helper.rb:41: syntax error, unexpected tLPAREN_ARG, expecting keyword_do or '{' or '('
        create_subnav_link ("Financial Assistance & Schol...
                            ^
/dev/helpers/subnav_helper.rb:41: syntax error, unexpected ',', expecting keyword_end
...rships" "FinancialAssistance"),         
...                               ^
/dev/helpers/subnav_helper.rb:43: syntax error, unexpected ')', expecting keyword_end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:28:59.817

```
def create_subnav (*links)
  subnav = "\
    <nav class='nav-sub'>\
      <div class='nav-wrap'>\
        <ul class='nav-list'>"

        links.each do |attr,val|
          subnav += " attr: " + attr;
          subnav += " val: " + val;
          # subnav += args["attr"] + "\n"
        end 

        subnav += "\
        </ul>\
      </div>\
    </nav>"
    return subnav
end

def create_campus_subnav
  subnav = create_subnav(
                          create_subnav_link("Campus Overview", "Overview"),
                          create_subnav_link("About", "About"),
                          create_subnav_link("Admissions"),
                          create_subnav_link("Career Services" "CareerServices"),
                          create_subnav_link("Schedules, Tuition & Fees" "Tuition"),
                          create_subnav_link("Financial Assistance & Scholarships" "FinancialAssistance"),
                          create_subnav_link("Faculty")
                         )
                         puts subnav
end 
```

这将为您完成，但我想我希望参数列表的第一个条目位于同一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:22:27.383

尝试使用内置的视图助手，`content_tag`而不是做一堆字符串连接：

```
def subnav(*links)
  content_tag(:nav, 
    content_tag(:div,
      content_tag(:ul,
        links.map do |link|
          content_tag :a, link.text, :href => link.href do
        end.join, :class => 'nav-list'),
      :class => 'nav-wrap'
    ),
    :class => 'nav-sub'
  )
end 
```

注意：我只是猜测了您的“链接”变量的结构，但我认为您明白了

# python - 在 Matplotlib 中设置等高线子图的位置

> ID：13390993
> 
> 赞同：2
> 
> 时间：2012-11-15T03:08:11.297
> 
> 标签：python, matplotlib, scipy

我正在使用 SciPy 识别 CT 图像中的肿瘤。一旦我确定了包含肿瘤的切片，我使用以下方法检索切片：

```
slice_x, slice_y = ndimage.find_objects(label_im==label)[0] 
```

然后我绘制完整图像如下：

```
plt.imshow(image, cmap='gray') 
```

我想将提取的切片（包含肿瘤）的轮廓覆盖在适当位置的原始图像之上。但是，我无法让等高线图位于正确区域的顶部。相反，等高线图始终位于图像的左上角。这是我正在使用的：

```
plt.contour(mask[slice_x, slice_y], position=(slice_x.start, \
slice_y.start), linewidths=2, colors='r') 
```

结果如下：

![CT图像](../Images/c245cfd97aa8af9a23f77a9b850a2ed7.png)

如何在主图中设置等高线图的位置？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:23:11.877

您需要使用`extent`关键字参数而不是`position`. 但是，您需要指定最大值和开始（即它必须是`extent=[xmin, xmax, ymin, ymax]`）

在您的情况下，它看起来像：

```
extent=[xslice.start, xslice.stop+1, yslice.start, yslice.stop+1]
plt.contour(mask[xslice, yslice], extent=extent) 
```

请注意，您可能需要使用`origin`关键字参数（或翻转 ymin 和 ymax）来控制输入数据的解释方式。

或者，您可以执行以下操作：

```
x, y = np.mgrid[xslice, yslice]
plt.contour(x, y, mask[xslcie, yslice]) 
```

如果你在一个大区域工作，效率会有点低，但它会干净得多。

作为后一种方法的完整示例：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

data = np.random.random((100,100))

xslice, yslice = slice(20, 30), slice(45, 65)

plt.imshow(data, cmap=cm.gray)

x, y = np.mgrid[xslice, yslice]
plt.contour(x, y, data[xslice, yslice])

plt.show() 
```

![在此处输入图像描述](../Images/34b2cf89a3a7c8cd25f29e70082f5cd0.png)

# windows-phone-7 - 我可以在 Windows Phone 上的一个应用程序中同时使用“PeriodicTask”和“ResourceIntensiveTask”吗？

> ID：13390997
> 
> 赞同：2
> 
> 时间：2012-11-15T03:09:17.620
> 
> 标签：windows-phone-7, windows-phone

正如题主所说，我可以在 Windows Phone 上的一个应用程序中使用`PeriodicTask`和`ResourceIntensiveTask`一起使用吗？

例如，我可以同时拥有 a`PeriodicTask`和 a`ResourceIntensiveTask`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T04:08:30.813

是的。根据[How to: Implement Background Agents for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.92%29.aspx)：

> 每个应用程序一次只能注册一个 ScheduledTaskAgent，但您可以将此代理安排为资源密集型代理和定期代理。如果您的应用程序同时使用 ResourceIntensiveTask 和 PeriodicTask，您可以检查传递给 OnInvoke 方法的 ScheduledTask 对象的类型，以确定正在为哪个任务调用代理，并根据需要分支您的代码执行。

您应该能够在这两种任务上调用 ScheduledActionService.Add()。

# html - 使浮动 div 的位置不受其内容的影响，无需设置宽度

> ID：13390999
> 
> 赞同：0
> 
> 时间：2012-11-15T03:09:20.730
> 
> 标签：html, css-float

我想做这个布局，div2的宽度不会受他的内容影响

```
-----------------------------------------
          |      |               |
   div1   |      |      div2     |      
          |      |               |       
----------------------------------------- 
```

这是我的代码：

```
 <html>
    <body>

    <div style="background:red;height:200px;">

        <div  style="background:black;width:100px;float:left;height:100px;">

        </div>

        <div  style="background:green;height:50px;float:left;margin:10px;">
        when here the content is too much, this div will start another line, 
which is not wanted, I want this div to be float always, also , I dont know the with.
        </div>

    </div>

    <body>
    </html> 
```

又怎样 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:28:04.633

添加css属性

```
max-width:100px 
```