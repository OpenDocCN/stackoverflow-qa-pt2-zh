# StackOverflow 问答 13416000-13416999

# layout - Qt formlayout没有垂直扩展qplaintextedit

> ID：13416000
> 
> 赞同：9
> 
> 时间：2012-11-16T11:48:08.897
> 
> 标签：layout, pyqt, resize, pyqt4, qplaintextedit

我很困惑为什么**QPlainTextEdit小部件在添加到****QFormLayout**时不会垂直调整大小。在下面的代码中，文本字段正确地水平放大，但不能垂直放大。

谁能解释这种行为并提供解决方案？我已经尝试了所有我知道的技巧，但无济于事。

```
from PyQt4 import QtGui

class Diag(QtGui.QDialog):

    def __init__(self, parent, *args, **kwargs):
        QtGui.QDialog.__init__(self, parent)
        layout = QtGui.QFormLayout(self)
        widg = QtGui.QPlainTextEdit(self)
        layout.addRow('Entry', widg)

if __name__ == '__main__': #pragma: no cover
    app = QtGui.QApplication([])
    window = Diag(None)
    window.show()
    app.exec_() 
```

这是 QPlainTextEdit 小部件不垂直调整大小的示例： [![QPlainTextEdit 添加到 QFormLayout 但不垂直调整大小](../Images/2cf204bb1dd333298ca620525d55524f.png)](https://i.stack.imgur.com/WLdmQ.jpg)

这是在使用 PyQt 4.5.2 和 Python 32 位 2.6 的 Windows 7 上。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T18:38:44.903

似乎默认情况下， a`QFormLayout`只会根据它们的`sizeHint`.

要更改此行为，请根据需要调整[垂直拉伸](https://doc.qt.io/qt-4.8/qsizepolicy.html#setVerticalStretch)：

```
policy = widg.sizePolicy()
policy.setVerticalStretch(1)
widg.setSizePolicy(policy) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-23T20:26:10.207

您应该将对象设置在 formlayout 的最后一行（参见 QPlainTextEdit），其垂直拉伸因子不应为 0。

# objective-c - 如何在屏幕右侧制作一个小的下拉窗口？

> ID：13416003
> 
> 赞同：0
> 
> 时间：2012-11-16T11:48:14.433
> 
> 标签：objective-c, xcode, macos, cocoa

如何在屏幕右侧制作一个小的下拉窗口。哪个显示窗口，例如 1 秒钟然后返回，离开屏幕

我必须使用什么方法？或者如果可以，如何在界面生成器中制作它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:02:04.490

要创建下拉列表，请参阅[此链接](http://www.edumobile.org/iphone/iphone-programming-tutorials/a-simple-drop-down-list-for-iphone/)并使其消失，您可以使用 NSTimer 1 秒

```
NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                               target:self 
                                                             selector:@selector(timerFired:) 
                                                             userInfo:nil 
                                                              repeats:NO];
}

-(void)timerFired:(NSTimer *) theTimer
{ 
    ["your drop down view" removeFromSuperview];
} 
```

# javascript - 如何在按下 Enter Jquery-UI 自动完成时触发点击事件

> ID：13416006
> 
> 赞同：0
> 
> 时间：2012-11-16T11:48:24.883
> 
> 标签：javascript, jquery, jquery-ui, jquery-events, jquery-ui-autocomplete

我有以下JS：

```
 $("#search").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/GetCompanyNames",
                    dataType: "json",
                    data: "searchterm=" + request.term,
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                label: item.Name,
                                value: item.Name,
                                LogoUrl: item.LogoUrl,
                                InternetName :item.InternetName,
                                Name: item.Name
                            };
                        }));
                    }
                });
            },
          minLength: 1
        }).data("autocomplete")._renderItem = function (ul, item) {
            var innerHtml = '<a href=/Store/'+item.InternetName+'><div class="list_item_container" style="height: 60px;"><div class="image" style="float: left; margin-right: 35px;"><img src="' + item.LogoUrl + '"></div><div class="label">' + item.Name + '</div></div></a>';
            return $("<li></li>")
        .data("item.autocomplete", item)
        .append(innerHtml)
        .appendTo(ul);
        };

    }); 
```

这使得这个

![在此处输入图像描述](../Images/4c4abe98876c9f5d7b4c03822c57e8f2.png)

这是一个建议下拉列表，显示当我在文本框中输入任何字符时，就像`ib`在这种情况下，
一切正常，但是当我用鼠标单击下拉列表的任何项目时只有一个问题，它会将我带到写在其锚点中的 url标签，我希望如果我向下滚动并在某个项目上按 Enter 键，它会做同样的事情，当我在下拉项目上按 Enter 键时它不会做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:59:10.190

看看这个[jqFAQ.com](http://jqfaq.com/how-to-associate-a-url-with-each-choice-and-navigate-to-that-url-on-selection/)主题，这将帮助您导航到通过鼠标单击和按 Enter 进行的选择的 url。还有一些与自动完成相关的常见问题解答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:48:08.250

尝试向返回的列表项中`keyup`的元素添加处理程序。`a`您应该可以通过修改`_renderItem`函数来做到这一点：

```
._renderItem = function (ul, item) {
    var div = $('<div />'), //building using DOM elements, rather than HTML string.
        liContainer = div.clone().addClass('list_item_container').css('height', '60px'),
        img = $('<img />').attr('src', item.LogoUrl),
        imgContainer = div.clone().addClass('image').css({
            "float": "left",
            "margin-right": "35px"
        }),
        divLabel = div.clone().addClass('label').text(item.Name),
        a = $('<a />').attr('href', '/Store/' + item.InternetName);
        imgContainer.append(img);
        liContainer.append(imgContainer).append(divLabel);
        a.append(liContainer);
        a.on('keyup', function (e) { //add keyup handler to navigate to new URL on [Enter]
            if (e.which === 13) {
                window.location.href = $(this).attr('href');
            }
        });
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append(a)
        .appendTo(ul);
}; 
```

# gcc - dtrace: 编译脚本失败 找不到预处理器

> ID：13416007
> 
> 赞同：2
> 
> 时间：2012-11-16T11:48:26.520
> 
> 标签：gcc, ubuntu, dtrace, dwarf

我正在尝试[从 oracle 测试此脚本以在 Ubuntu 10.04 上获取活动的 NFS 客户端](https://blogs.oracle.com/erickustarz/entry/dscript_to_retrieve_active_nfs)，但我无法让它运行。

为此，我首先按照[这些说明](https://askubuntu.com/questions/60940/how-do-i-install-dtrace)安装了 dtrace 。这正是我所做的：

```
apt-get install bison flex zlib1g-dev libelf-dev binutils-dev libdw-dev libc6-dev-i386
wget ftp://crisp.dyndns-server.com/pub/release/website/dtrace/dtrace-20121009.tar.bz2
tar xfj dtrace-20121009.tar.bz2
cd dtrace-20121009
make all
make install
make load 
```

但是，我在编译时收到此警告：

```
=================================================================
=== You need /usr/lib/libdwarf.a and /usr/lib/libbfd.a installed to build.
=== 
=== apt-get install binutils-dev
=== apt-get install libdw-dev
=== 
=== Without these, we will not build ctfconvert (needed for 
=== SDT structure definitions).
=================================================================
cd cmd/instr ; make --no-print-directory
cd usdt/c ; make --no-print-directory
tools/mkdriver.pl all
Executing: /usr/src/dtrace/dtrace-20121009/tools/make-me
make -C /lib/modules/2.6.38-16-server/build M=/usr/src/dtrace/dtrace-20121009/build-2.6.38-16-server/driver
  CC [M]  /usr/src/dtrace/dtrace-20121009/build-2.6.38-16-server/driver/systrace.o
  LD [M]  /usr/src/dtrace/dtrace-20121009/build-2.6.38-16-server/driver/dtracedrv.o
  Building modules, stage 2.
  MODPOST 1 modules
  LD [M]  /usr/src/dtrace/dtrace-20121009/build-2.6.38-16-server/driver/dtracedrv.ko
tools/mkctf.sh
build/ctfconvert not available - so not building the linux.ctf file
NOTE: The build is complete, but build/ctfconvert is not available.
      This means you will get run time errors from the io.d and sched.d files
      due to undefined kernel structure definitions. Simply delete or rename
      these files until a fix can be put in place to handle older
      distros which do not have the required libdwarf dependencies.

      (Typical error is references to undefined struct definitions such
      as dtrace_cpu_t).

sync 
```

我已经安装了`libdw-dev`and `binutils-dev`，但是看一下makefile，它似乎在寻找`libdwarf.so`，并且`libdw`在我的系统上被命名为`libdw.so`.

为了规避这一点，我创建了一个符号链接`ln -s /usr/lib/libdw.so /usr/lib/libdwarf.so`。这样做之后，编译失败。

```
cd cmd/ctfconvert ; make --no-print-directory
gcc -g -I. -I../../ -I../../libctf -I../../common -I../../uts/common -I../../linux -I/usr/include/libdwarf -c dwarf.c
In file included from dwarf.c:94:
/usr/include/dwarf.h:56: error: expected identifier before numeric constant
/usr/include/dwarf.h:136: error: expected identifier before numeric constant
/usr/include/dwarf.h:321: error: expected identifier before numeric constant
/usr/include/dwarf.h:461: error: expected identifier before numeric constant
/usr/include/dwarf.h:517: error: expected identifier before numeric constant
make[3]: *** [../../build/ctfconvert.obj/dwarf.o] Error 1
make[2]: *** [all] Error 2
make[1]: *** [do_cmds] Error 2
tools/bug.sh
make: *** [all] Error 1 
```

所以，让我们撤消它。我删除了符号链接，再次编译，运行`make install`并`make load`希望一切正常。一切似乎都很好。

但是，然后我尝试运行上面提到的脚本，但它失败了：

```
# ./get_ngs_clients.d 
dtrace: failed to compile script ./get_ngs_clients.d: Preprocessor not found 
```

我不知道发生了什么。我已经安装了 gcc，以防万一。

```
# dpkg -l | grep gcc
ii  gcc                                    4:4.4.3-1ubuntu1                  The GNU C compiler
ii  gcc-4.4                                4.4.3-4ubuntu5.1                  The GNU C compiler
ii  gcc-4.4-base                           4.4.3-4ubuntu5.1                  The GNU Compiler Collection (base package)
ii  gcc-4.4-multilib                       4.4.3-4ubuntu5.1                  The GNU C compiler (multilib files)
ii  gcc-multilib                           4:4.4.3-1ubuntu1                  The GNU C compiler (multilib files)
ii  lib32gcc1                              1:4.4.3-4ubuntu5.1                GCC support library (32 bit Version)
ii  libgcc1                                1:4.4.3-4ubuntu5.1                GCC support library 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T11:03:09.137

如果您的系统上没有 libdwarf.a，则不会构建 ctfconvert 工具。（libdwarf.a 和 libdw.a 不一样）。

如果 ctfconvert 未构建，则您自己的任何脚本或 dtrace etc/*.d 脚本可能无法加载。（Dtrace force 会自动为您加载这些脚本，这很烦人）。任何依赖结构定义的脚本都会失败。

截至 2013 年 5 月，我正在研究更新到 libdw.a 需要什么，因为这似乎是 libdwarf 的现代替代品。

（由 DTrace/Linux 的“作者”发布）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:29:32.810

您是否尝试将 --enable-dtrace=false 添加到 /.configure？或者也许 --with-dtrace=false？

我认为这应该可以解决问题...

# ruby-on-rails - 使用轮胎进行弹性搜索：自定义停用词不起作用

> ID：13416008
> 
> 赞同：0
> 
> 时间：2012-11-16T11:48:32.243
> 
> 标签：ruby-on-rails, elasticsearch, tire

我想将一组自定义停用词添加到模型中的一个特定字段。所以我为该字段添加了一个自定义分析器。但是，当我使用停用词进行搜索时，仍然会显示结果。我的模型里面的代码如下：

```
settings :analysis => {
 :filter  => {
  :stop_filter => {
    :type        => "stop",
    :stopwords   => ["how", "when", "where", "who", "which", "what", "do", "the", "a", "is", "to"]
  }
 },
 :analyzer => {
  :my_analyzer => {
    :type         => "standard",
    :filter       => "stop_filter",
    :tokenizer    => "standard"
  }
 }
} do
 mapping do
  indexes :id,              :type => 'integer',     :index    => :not_analyzed
  indexes :sortable_id,     :type => 'integer',     :index    => :not_analyzed
  indexes :summary,         :type => 'string',      :analyzer => 'my_analyzer'
 end
end

def self.search_all(search_string = nil, options = {})
  tire.search(:load => true, :page => options[:page] || 1, :per_page => options[:per_page] || 10) do
    query {search_string.present? ? string(search_string) : all}
    filter :term, {:topics_list_filter =>  options[:topic_id]} if options[:topic_id]
    sort {by options[:sort], options[:order] || 'desc'} if options[:sort].present?
  end
end 
```

我还尝试通过`stopwords`在分析器中提供选项，而不创建`stop_filter`. 我不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:55:33.477

您的查询正在搜索[`_all`](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)使用默认分析器编制索引的字段。您可以将查询中的默认字段替换为默认分析器，`summary`也可以替换为默认分析器。请参阅[如何为使用轮胎的弹性搜索设置默认分析器？](https://stackoverflow.com/questions/9670016/how-do-i-set-the-default-analyzer-for-elastic-search-with-tire/9670873#9670873)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:09:23.833

您是否重新索引了您的文档？我认为只有在创建文档时以及在某些情况下创建索引时才会将您的映射条件发送到 ElasticSearch。

# html - 如何改变div元素的位置

> ID：13416013
> 
> 赞同：0
> 
> 时间：2012-11-16T11:48:47.567
> 
> 标签：html

我有一个 div 元素

```
<div id="divKPI" class="divKPI" >
    <asp:Label ID="lblKPI" runat="server" CssClass="lblKPI"></asp:Label>
    </div> 
```

我有课

```
.divKPI
{
    padding-top:800;
    text-align:center;
} 
```

它将标签设置为中心但不定位标签元素。请帮助我。我也使用了“顶部”但没用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:53:33.373

```
#lblKPI {
    margin: 0 auto;
    width: xxx px;
} 
```

# ruby-on-rails - 找不到 gem 'sqlite3 (>= 0) ruby '

> ID：13416016
> 
> 赞同：4
> 
> 时间：2012-11-16T11:49:00.453
> 
> 标签：ruby-on-rails, ruby, ubuntu, sqlite, rvm

我正在学习 Ruby on Rails，并按照 Ryan Bigg 的博客和 Agile Wed Development 书中的 RVM 和 Rails 安装。这以前在我家里的电脑上工作过，但在工作中它给了我错误：

```
depot$ rails -v
Could not find gem 'sqlite3 (>= 0) ruby' in the gems available on this machine.
Run `bundle install` to install missing gems. 
```

我正在尝试生成一个脚手架，但这就是我得到的：

```
depot$ rails generate scaffold Product \ title:string description:text image_url:text price:decimal
Could not find gem 'sqlite3 (>= 0) ruby' in the gems available on this machine.
Run `bundle install` to install missing gems. 
```

我安装了 sqlite3，RVM 1.9.2-p320，并在 Ubuntu 11.04 上运行。

任何想法可能导致此问题以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T12:10:58.420

跑

```
bundle install 
```

在 Rails 应用程序的目录中，就像两条错误消息都指示您那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-25T12:19:26.203

我有同样的问题，你可以尝试在应用程序目录`sudo apt-get install libsqlite3-dev`中运行。`bundle install`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:27:12.530

您需要从您的应用程序目录运行它，以便它可以找到 Gemfile 以了解它需要从 Gemfile 安装哪些 gem。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-26T16:39:58.310

是的。当我开始使用 rails 时，我也遇到了同样的问题，然后在编写“rails new”时，我遇到了 sqlite3 的问题。这是由于未执行“捆绑安装”的原因。当我们尝试“捆绑安装”时，它会显示一些 gemfile 丢失错误。发生这种情况的原因是我们没有将目录更改为我们使用 rails 应用程序的文件夹。因此，要解决此问题，请按照下列步骤操作：

1.  type 'rails new app' // 代替 app 你可以输入任何你想要的名字。
2.  现在将在您的家中创建一个名为 app 的文件夹。
3.  现在开始新的终端。
4.  键入“cd 应用程序”
5.  现在你可以继续你的工作，你不会遇到任何这样的问题。

# ruby-on-rails-3 - ActiveRecord 如何知道一个实例模型是否属于某个类范围？

> ID：13416019
> 
> 赞同：2
> 
> 时间：2012-11-16T11:49:03.660
> 
> 标签：ruby-on-rails-3, activerecord

我在我的 ActiveRecord 类中定义了一个范围，比方说：

```
class Book < ActiveRecord::Base
  scope :old, where( "published_at < ?", 1.year.ago )
end 
```

我想问这个类的任何实例是这样的：

```
book.old? 
```

有没有办法在不重复`where`定义的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:47:05.820

使用您的范围在数据库上运行另一个查询：

```
Book.old.exists?(book.id) 
```

如果你想在多个地方重用它，最好实现一个方法：

```
def old?
  Book.old.exists?(id)
end

book.old? 
```

# asp.net - 服务器响应为：5.7.7 本地域中的发件人未知

> ID：13416020
> 
> 赞同：0
> 
> 时间：2012-11-16T11:49:06.210
> 
> 标签：asp.net, visual-studio-2010, email, sendmail

当我尝试通过 SMTP 服务器发送邮件时出现异常。这是例外：

```
System.Net.Mail.SmtpException: Transaction failed. 
The server response was: 5.7.7 Sender Unknown in Local Domain . at 
System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response) at 
System.Net.Mail.MailCommand.Send(SmtpConnection conn, Byte[] command, String from) at 
System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String 
deliveryNotify, SmtpFailedRecipientException& exception) at System.Net.Mail.SmtpClient.Send(MailMessage 
message) at _Default.Button1_Click1(Object sender, EventArgs e) 
in d:\pjt\mail_check\Default.aspx.cs:line 39 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:00:18.170

检查此[链接](http://www.nethosted.co.uk/community/unknown-sender-in-local-domain-t2418.html)。它可能会有所帮助

# c - C中的内存寻址和指针

> ID：13416025
> 
> 赞同：14
> 
> 时间：2012-11-16T11:49:55.287
> 
> 标签：c

这取自C，并以此为基础。假设我们有一个 32 位指针

```
char* charPointer; 
```

它指向内存中包含一些数据的某个位置。它知道这个指针的增量是 1 个字节，等等。另一方面，

```
int* intPointer; 
```

还指向内存中的某个位置，如果我们增加它，它知道如果我们向它添加 1，它应该增加 4 个字节。

问题是，我们如何能够使用这些指针来寻址完整的 32 位可寻址空间 (2^32) - 4 GB，如果它们显然包含一些允许它们彼此分开的信息，例如`char*`或`int*`，所以这给我们留下的不是 32 个字节，而是更少。

当我输入这个问题时，我开始思考，也许这都是语法糖，真的是编译器吗？也许原始指针只是 32 位并且它不关心类型？是这样吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T11:55:46.350

您可能会对编译时间和运行时间感到困惑。

在编译期间，`gcc`（或任何 C 编译器）知道指针的类型，特别是知道该指针变量指向的数据的类型。因此`gcc`可以发出正确的机器代码。因此，变量的增量`int *`（在具有 32 位的 32 位机器上`int`）被转换为 4（字节）的增量，而`char*`变量的增量被转换为 1 的增量。

在运行时，已编译的可执行文件（它不关心或不需要`gcc`）仅处理机器指针，通常是字节地址（或某个字的开头）。

类型（在*C*程序中）在运行时是未知的。

^(其他一些语言（Lisp、Python、Javascript ......）需要在运行时知道类型。在最近的 C++（但不是 C）中，某些对象（具有虚函数的对象）可能具有[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)。)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-16T11:55:16.007

它确实是语法糖。考虑以下代码片段：

```
int t[2];
int a = t[1]; 
```

第二行相当于：

```
int a = *(t + 1); // pointer addition 
```

它本身相当于：

```
int a = *(int*)((char*)t + 1 * sizeof(int)); // integer addition 
```

在编译器检查完类型后，它会丢弃强制转换，并且仅适用于地址、长度和整数加法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T11:55:15.990

是的。原始指针是 32 位数据（或 16 位或 64 位，具体取决于架构），并且不包含任何其他内容。是否`int *`, `char *`,`struct sockaddr_in *`只是编译器的信息，知道递增时实际添加的数字是多少，以及取消引用时它将具有的类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T11:59:18.780

您的假设是正确的：要查看如何处理不同类型的指针，请尝试运行此程序：

```
int main()
{
    char * pc = 0;
    int * pi = 0;

    printf("%p\n", pc + 1);
    printf("%p\n", pi + 1);

    return 0;
} 
```

您会注意到，向 char* 添加 1 会将其数值增加 1，同时对 int* 增加 4（这是我机器上的 int 的大小）执行相同操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T11:56:11.963

正如您最后所说的那样-C 中的类型只是一个编译时概念，它告诉编译器如何为您可以对变量执行的各种操作生成代码。

最后指针归结为它们指向的地址，一旦代码编译，语义信息就不再存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T11:54:51.157

递增 int* 指针与递增 char* 不同，仅仅是因为指针变量被声明为 int*。您可以将 int* 转换为 char* ，然后它将增加 1 个字节。

所以，是的，这一切都只是语法糖。它使某些类型的数组处理更容易，并使 void* 用户感到困惑。

# java - 如何在速度模板中检索哈希图值

> ID：13416034
> 
> 赞同：3
> 
> 时间：2012-11-16T11:50:50.303
> 
> 标签：java, velocity

如何从速度模板中的以下哈希图中检索值？请帮忙..

```
LinkedHashMap<String, LinkedHashMap<Integer, Object>> hashmap = new LinkedHashMap<String, LinkedHashMap<Integer,Object>>(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T16:21:34.697

首先，将 hashmap 添加到您的支持 Java 类（[在此处](http://velocity.apache.org/engine/devel/developer-guide.html#The_Context)参考）。

```
context.put("myhashmap", hashmap); 
```

然后您可以在 Velocity 模板中的任何位置[引用，例如：](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#references)

```
<span>$myhashmap.get("foo").get(1).toString()</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T06:01:03.417

这对我有用：

```
$!myhashmap.get($!foo).toString(); 
```

注意：`foo`在我的情况下是一个变量。

# erlang - RabbitMQ 插件依赖

> ID：13416036
> 
> 赞同：3
> 
> 时间：2012-11-16T11:51:00.620
> 
> 标签：erlang, rabbitmq

我正在为 rabbitmq 插件开发设置一个特殊的 ubuntu vm。我正在通过插件开发指南工作：[http ://www.rabbitmq.com/plugin-development.html](http://www.rabbitmq.com/plugin-development.html)

节拍器插件正在工作，所以我想让 rabbitmq_management 插件也能正常工作。

我设置了必要的符号链接，当我运行 rabbitmq-plugin enable rabbitmq_management 时，我在控制台中收到以下错误：

```
 % ../scripts/rabbitmq-plugins enable rabbitmq_management
Error: The following dependencies could not be found:
  mochiweb
  webmachine 
```

我不知道将这些依赖项（mochiweb、webmachine）放在哪里，以便 rabbitmq_management（或它的依赖项）可以看到它们。

我试图从 git 克隆并直接在 rabbitmq-server/plugins 目录中创建这些项目，但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:10:57.023

一些插件依赖于其他插件。在这种情况下，您需要 mochiweb 和 webmachine 插件。将它们放在代理插件文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-02T20:54:37.377

我有同样的问题：

> 错误：找不到以下插件：RabbitMQ_management

很长一段时间后，重新安装，删除和重新安装。解决方案很简单，插件名称区分大小写。因此，请检查插件目录是否正确。只需将命令更改为：

```
RabbitMQ-plugins enable RabbitMQ_Management 
```

到

```
RabbitMQ-plugins enable rabbitmq_management 
```

解决了我的问题。

# c# - OracleDataReader 只返回一行

> ID：13416039
> 
> 赞同：4
> 
> 时间：2012-11-16T11:51:05.653
> 
> 标签：c#, visual-studio, oracle

我正在尝试遍历光标。当我直接在 pl/sql 中执行命令（表示为 sql - 见下文）时，我得到的结果集包含更多行。但是当我运行这段代码时，我只得到一行：

```
using (OracleConnection conn = new OracleConnection(connstring))
{
    conn.Open();
    string sql = "select close, ts from dpr@price where qot_id=2029543939 and ts>='" + start + "' and  ts<='" + end + "'";
    using (OracleCommand comm = new OracleCommand(sql, conn))
    {
        using (OracleDataReader rdr = comm.ExecuteReader())
        {
             while (rdr.Read())
             {                                
                  Console.WriteLine(rdr.GetOracleDecimal(0));
             }

         }
     }
} 
```

代码不会抛出任何异常（至少不是以通常的方式；我的意思是它不会停止或写入堆栈跟踪）。但是，我可以在调试时通过 reader Object 看到这些行（我认为这与这里无关，但显示输出“以防万一”）：

```
InitialLONGFetchSize = 'rdr.InitialLONGFetchSize' threw an exception of type 'System.NullReferenceException' 

InitialLOBFetchSize = 'rdr.InitialLOBFetchSize' threw an exception of type 'System.NullReferenceException' 
```

结果应该只有类型`DateTime`和`Number (10,4)`。并且该表没有类型为 lob 或 long 的字段。

这是表格方案：

```
QOT_ID    NUMBER
TS            DATE
CLOSE     NUMBER
OPEN      NUMBER
HIGH      NUMBER
LOW       NUMBER
KASSE     NUMBER
VOLUME    NUMBER
CLOSE_BID     NUMBER
SPL_BEREINIGT VARCHAR2
OPEN_INTEREST NUMBER
TRADES    NUMBER
TURNOVER      NUMBER
HIGH_BID      NUMBER
LOW_ASK   NUMBER 
```

The query is correct and the entries exist. The returned row seems to be random one... It is not the first or last row. I'm using ODT with ODAC 11\. I have VS2012 and working under windows 7(32-bit). I'm connected to Oracle 10g .

Any clue what am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:19:38.153

See: [Oracle Data Provider for .Net](http://docs.oracle.com/html/A96160_01/features.htm) and [here](http://docs.oracle.com/cd/B14117_01/win.101/b10117/client002.htm) and [here to](http://docs.oracle.com/cd/E11882_01/win.112/e18754/OracleCommandClass.htm#BABEGDHA)

It seems that quite possibly the issue could be resolved by specifying either of the following: (failure to specify either of these causes issues with both InitialLONGFetchSize and InitialLOBFetchSize)

*   primary key

*   ROWID

*   unique columns - (defined as a set of columns on which a unique constraint has been defined or a unique index has been created, where at least one of the columns in the set has a NOT NULL constraint defined on it)

Failing that specify values for both InitialLONGFetchSize and InitialLOBFetchSize.

# javascript - 如何在媒体播放器中显示封面？

> ID：13416043
> 
> 赞同：0
> 
> 时间：2012-11-16T11:51:13.407
> 
> 标签：javascript, android, cordova, media-player

我是 phonegap 的新手，我正在使用 phonegap 为 android 构建一个媒体播放器。我想显示当前正在播放的歌曲的封面。我怎样才能使用phonegap呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:36:50.140

有一些用于编写专辑封面的代码

```
http://getid3.sourceforge.net/source/write.id3v2.phps
// 4.14  APIC Attached picture 
```

如果您想从自己的服务器播放流媒体，这会很有用

# javafx-2 - JavaFX 2.2 FXML 验证文本字段

> ID：13416049
> 
> 赞同：5
> 
> 时间：2012-11-16T11:51:44.487
> 
> 标签：javafx-2, validation, textfield, fxml

我改进了之前的 TextField 验证实现，这次使用绑定制作了一个真正的自定义控件，并进行了实时验证。它可以与 FXML 一起使用，而无需更多 Java 代码。

```
import javafx.beans.binding.BooleanBinding;
import javafx.beans.property.BooleanProperty;
import javafx.beans.property.IntegerProperty;
import javafx.beans.property.ReadOnlyBooleanProperty;
import javafx.beans.property.ReadOnlyIntegerProperty;
import javafx.beans.property.ReadOnlyStringProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.beans.property.SimpleIntegerProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.scene.control.TextField;
import javafx.scene.effect.BlurType;
import javafx.scene.effect.DropShadow;
import javafx.scene.effect.Effect;
import javafx.scene.paint.Color;

/**
 * <p>
 * TextField with regex-based real-time input validation.
 * JavaFX 2 and FXML compatible. </p>
 * <p>
 * FXML code example:<div>
 *  {@code <ValidatedTextField fx:id="validatedTextField" minLength="1" maxLength="1" mask="^[0-9]*$" />}
 * </div>
 * </p>
 * 
 * @author 82300009
 */
public final class ValidatedTextField extends TextField {

    private final BooleanProperty invalid = new SimpleBooleanProperty(false);
    private final StringProperty mask;
    private final IntegerProperty minLength;
    private final IntegerProperty maxLength;

    private Effect invalidEffect = new DropShadow(BlurType.GAUSSIAN, Color.RED, 4, 0.0, 0, 0);

    public ValidatedTextField() {
        super();
        this.mask = new SimpleStringProperty(".");
        this.minLength = new SimpleIntegerProperty(-1);
        this.maxLength = new SimpleIntegerProperty(-1);

        bind();
    }

    public ValidatedTextField(String mask, int minLength, int maxLength, boolean nullable) {
        this(mask, minLength, maxLength, nullable, null);
    }

    public ValidatedTextField(String mask, int minLength, int maxLength, boolean nullable, String string) {
        super(string);
        this.mask = new SimpleStringProperty(mask);
        this.minLength = new SimpleIntegerProperty(minLength);
        this.maxLength = new SimpleIntegerProperty(maxLength);

        bind();
    }

    public ReadOnlyBooleanProperty invalidProperty() {
        return invalid;
    }

    public ReadOnlyStringProperty maskProperty() {
        return mask;
    }

    public ReadOnlyIntegerProperty minLengthProperty() {
        return minLength;
    }

    public ReadOnlyIntegerProperty maxLengthProperty() {
        return maxLength;
    }

    public boolean getInvalid() {
        return invalid.get();
    }

    public String getMask() {
        return mask.get();
    }

    public void setMask(String mask) {
        this.mask.set(mask);
    }

    public int getMinLength() {
        return minLength.get();
    }

    public void setMinLength(int minLength) {
        this.minLength.set(minLength);
    }

    public int getMaxLength() {
        return maxLength.get();
    }

    public void setMaxLength(int maxLength) {
        this.maxLength.set(maxLength);
    }

    public Effect getInvalidEffect() {
        return this.invalidEffect;
    }

    public void setInvalidEffect(Effect effect) {
        this.invalidEffect = effect;
    }

    private void bind() {
        this.invalid.bind(maskCheck().or(minLengthCheck()));

        this.textProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> ov, String t, String t1) {
                if (textProperty().get().length() > maxLength.get()) {
                    setText(t);
                }
            }
        });

        this.invalid.addListener(new ChangeListener<Boolean>() {
            @Override
            public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
                if (t ^ t1) {
                    if (t1) {
//                        setStyle("-fx-font-weight: bold; -fx-text-fill: red;");
                        setEffect(invalidEffect);
                    } else {
//                        setStyle("-fx-font-weight: normal; -fx-text-fill: inherit;");
                        setEffect(null);
                    }
                }

            }
        });
    }

    private BooleanBinding maskCheck() {
        return new BooleanBinding() {
            {
                super.bind(textProperty(), mask);
            }

            @Override
            protected boolean computeValue() {
                return !textProperty().get().matches(mask.get());
            }
        };
    }

    private BooleanBinding minLengthCheck() {
        return new BooleanBinding() {
            {
                super.bind(textProperty(), minLength);
            }

            @Override
            protected boolean computeValue() {
                return textProperty().get().length() < minLength.get();
            }
        };
    }

    private BooleanBinding maxLengthCheck() {
        return new BooleanBinding() {
            {
                super.bind(textProperty(), maxLength);
            }

            @Override
            protected boolean computeValue() {
                return textProperty().get().length() > maxLength.get();
            }
        };
    }
} 
```

然而，关于“无效”的图形效果仍有一点微不足道。正如你在这里看到的：

```
this.invalid.addListener(new ChangeListener<Boolean>() {
            @Override
            public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
                if (t ^ t1) {
                    if (t1) {
//                        setStyle("-fx-font-weight: bold; -fx-text-fill: red;");
                        setEffect(invalidEffect);
                    } else {
//                        setStyle("-fx-font-weight: normal; -fx-text-fill: inherit;");
                        setEffect(null);
                    }
                }

            }
        }); 
```

我尝试使用 setStyle 但使用**-fx-font-weight: inherit;** 破坏代码（不要为什么，因为它应该是它的默认值）。注入 StyleClass 不起作用，因为当 invalid 为 false 时我无法恢复它。

有什么线索吗？当然可以分离内部侦听器并附加另一个具有其他效果的外部侦听器（fi 显示绿色勾号而不是更改 TextField 效果）。

如果您介意，您可以自由使用代码:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:13:02.027

您始终可以通过从样式类列表中删除样式来恢复样式，即

```
node.getStyleClass().remove("my-style"); 
```

# android - android 使用 ksoup 调用服务

> ID：13416050
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:51:45.690
> 
> 标签：android, asp.net, soap, ksoap

我创建了一个 asp.net 服务，代码如下：

```
namespace ArttechApps
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string getBoughtApps(String imei)
        {
            return "this is the string to return";// JAVA : SOAP 
        }
    }
} 
```

我需要一个调用此服务的 android 代码。这是java代码： public static void connect(String url) {

```
 webServices ws=new webServices("getBoughtApps", "http://tempuri.org/", "http://localhost:12409/getApps.asmx");

        ws.AddProperty("imei", "000000000000000", String.class);

        String res="";
        try 
        {

            SoapObject respuesta = ws.CallWebService();

            res=respuesta.toString();

            Log.d("Response", res);
        } catch (Exception e) 
        {

            e.printStackTrace();
        }
        result=res;
    } 
```

这是安卓的代码。[已编辑] 谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:54:58.630

这里有我用来使用 KSOAP2 for android 使用 Web 服务的类

```
import org.ksoap2.transport.AndroidHttpTransport;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;
import android.util.Log;

public class webServices {

    public static String METHOD_NAME;
    public static String NAMESPACE;
    public static String URL;   
    public SoapSerializationEnvelope Envelope_class = null; 
    private SoapObject request;

    public webServices(String NombreMetodo, String Namespace, String URLWService )
    {       
        METHOD_NAME = NombreMetodo;
        NAMESPACE= Namespace;
        URL= URLWService;   
        request= GetSoapObject(METHOD_NAME);
    }

    public void AddProperty(String Name, Object Value ,Type tipo)
    {
        PropertyInfo prop = new PropertyInfo();     
        prop.setName(Name);
        prop.setValue(Value);
        prop.setType(tipo);
        request.addProperty(prop);  
    }

    private SoapObject GetSoapObject (String Methodname)
    {
        return new SoapObject(NAMESPACE,METHOD_NAME);
    }

    private static SoapSerializationEnvelope GetEnvelope(SoapObject Soap)
    {
       SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
       envelope.dotNet = true;     
       envelope.setOutputSoapObject(Soap);
       return envelope;

     }

    public SoapObject CallWebService() throws IOException, XmlPullParserException 
    {       
        SoapObject response=null;
        SoapSerializationEnvelope Envelope = GetEnvelope(request);
        Envelope.bodyOut=request;
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport (URL);
        androidHttpTransport.debug=true;
        try
           { 

               androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);              
               response = (SoapObject) Envelope.getResponse();      
               Envelope_class = Envelope;
           }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.d("AndroidRequest",androidHttpTransport.requestDump);
            Log.d("AndroidResponse",androidHttpTransport.responseDump);
            return null;
        }   

        return response;
    }

    public Object CallWebServicePrimitive() throws SoapFault
    {
        SoapObject request = GetSoapObject(METHOD_NAME);    
        SoapSerializationEnvelope Envelope = GetEnvelope(request);

         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
         try {
            androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);
        } catch (IOException e) {
            Log.d("ErrorApp", e.getMessage().toString());
        } catch (XmlPullParserException e) {
            Log.d("ErrorApp", e.getMessage().toString());
        }   

        SoapPrimitive response= (SoapPrimitive) Envelope.getResponse();
        return response;
    }

} 
```

如果您使用的是 WCF 服务，则需要更改：

> SoapSerializationEnvelope(SoapEnvelope.VER11) 到：SoapSerializationEnvelope(SoapEnvelope.VER12)

并将 URL 指向您的 SVC URL

# php - 使用 PHP 对电子邮件标头进行 UTF-8 字符编码

> ID：13416051
> 
> 赞同：4
> 
> 时间：2012-11-16T11:51:48.340
> 
> 标签：php, character-encoding, mime

我正在尝试将 → （右箭头，`&rarr;`或 unicode 2192 hex）编码到电子邮件主题行中。

当我使用 php 时，[`mb_encode_mimeheader()`](http://uk1.php.net/mb_encode_mimeheader)我得到的价值与使用 Thunderbird 或 Gmail 做同样的事情时不同。但是当 php 生成的电子邮件到达时，字符没有正确显示。此外，PHP`mb_decode_mimeheader()`可以处理 PHP 的输出，但不能解码来自其他电子邮件源的内容。

通过十六进制转储，我发现箭头的 UTF-8 表示是

```
<?php
$rarr = "\xe2\x86\x92";

mb_encode_mimeheader($rarr, 'UTF-8'); //     =?UTF-8?B?w6LChsKS?=
// whereas Tbird and Gmail produce:          =?UTF-8?B?4oaS?=
// and more manually:
'=?UTF-8?B?' . base64_encode($rarr).'?='; // =?UTF-8?B?4oaS?= 
```

PHP 的编码出现在 Thunderbird 和 Gmail 中：

我对 PHP 的行为完全感到困惑，因为它似乎没有产生标准结果。

**如何让 PHP 对 UTF-8 电子邮件标头值进行编码，以便邮件客户端正确解码？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T12:00:40.963

似乎有一个忽略第二个参数的错误，当我添加内部编码时，我得到了正确的结果：

```
<?php
$rarr = "\xe2\x86\x92";
mb_internal_encoding( "UTF-8");
echo mb_encode_mimeheader($rarr, 'UTF-8'); //=?UTF-8?B?4oaS?= 
```

但

```
<?php
$rarr = "\xe2\x86\x92";

mb_encode_mimeheader($rarr, 'UTF-8'); //=?UTF-8?B?w6LChsKS?= 
```

只需设置内部编码就足够了：

```
<?php
$rarr = "\xe2\x86\x92";
mb_internal_encoding( "UTF-8");
echo mb_encode_mimeheader($rarr); //=?UTF-8?B?4oaS?= 
```

# c# - 强类型数据集作为用户定义的表类型参数

> ID：13416052
> 
> 赞同：3
> 
> 时间：2012-11-16T11:51:48.870
> 
> 标签：c#, sql-server-2008, strongly-typed-dataset

我有一个存储过程来处理定义为的表的插入、更新和删除

```
CREATE TABLE [dbo].[TestTable](
    [Id] [int] PRIMARY KEY NOT NULL,
    [Data] [nvarchar](50) NOT NULL,
    [ChangeDate] [datetime] NULL) 
```

与存储过程

```
CREATE PROCEDURE MergeTest
    @Testing TestTableType readonly
AS
BEGIN
    MERGE INTO Testing as Target
    USING (SELECT * FROM @Testing) AS SOURCE
        ON (Target.Id = Source.Id)
    WHEN MATCHED THEN
        UPDATE SET 
            Target.Data = Source.Data,
            Target.ChangeDate = Source.ChangeDate
    WHEN NOT MATCHED BY TARGET THEN
        INSERT (Data, ChangeDate)
        VALUES (Source.Data, Source.ChangeDate)
    WHEN NOT MATCHED BY SOURCE THEN
        DELETE;

    RETURN 0;
END 
```

和 UDT 类型为

```
CREATE TYPE TestTableType AS TABLE(
    [Id] [int] PRIMARY KEY NOT NULL,
    [Data] [nvarchar](50) NOT NULL,
    [ChangeDate] [datetime] NULL) 
```

我正在尝试使用此结构从 C# 进行批量插入等。使用以下代码可以工作：

```
using (SqlConnection connection = new SqlConnection(@"..."))
{
    connection.Open();

    DataTable DT = new DataTable();
    DT.Columns.Add("Id", typeof(int));
    DT.Columns.Add("Data", typeof(string));
    DT.Columns.Add("ChangeDate", typeof(DateTime));

    for (int i = 0; i < 100000; i++)
    {
        DT.AddTestRow((i + 1), (i + 1).ToString(), DateTime.Now);
    }

    using (SqlCommand command = new SqlCommand("MergeTest", connection))
    {
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.AddWithValue("@Testing", DT);
        command.ExecuteNonQuery();
    }
} 
```

但是，当我更改线路时

```
DataTable DT = new DataTable();
DT.Columns.Add("Id", typeof(int));
DT.Columns.Add("Data", typeof(string));
DT.Columns.Add("ChangeDate", typeof(DateTime)); 
```

到

```
DataSet1.TestDataTable DT = new DataSet1.TestDataTable(); 
```

这是相同`DataTable`结构的强类型版本，我得到一个`Argument Exception`错误

> 不存在从对象类型 TestBulkInsertDataset.DataSet1+TestDataTable 到已知托管提供程序本机类型的映射。

有没有办法使用强类型`DataTable`作为用户定义的表类型参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:33:44.783

找到了答案。使用强类型数据表时，您必须指定参数的类型。参数行变为：

```
var testingparam = command.Parameters.AddWithValue("@Testing", DT);
testingparam.SqlDbType = SqlDbType.Structured; 
```

然后一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:08:58.820

你有没有尝试过这样的事情？

```
DataSet1.TestDataTable DT = new DataSet1.TestDataTable();

// Fill data table

DataTable DT1 = DT;  // DataSet1.TestDataTable should be a subclass of DataTable

using (SqlCommand command = new SqlCommand("MergeTest", connection))
{
    command.CommandType = CommandType.StoredProcedure;
    command.Parameters.AddWithValue("@Testing", DT1);
    command.ExecuteNonQuery();
} 
```

如果类型化的数据集仍然是常规数据集和数据表的子类，我认为这会起作用。

ETA：既然那行不通，那这个怎么样？

```
DataSet DS1 = new DataSet();
DS1.Merge(DT, false, MissingSchemaAction.Add);

// etc.

command.Parameters.AddWithValue("@Testing", DS1.Tables[0]); 
```

假设这有效（并且您可能必须摆弄 Merge 方法的重载才能获得所需的结果），您将在 DataSet 中获得一个 DataTable ，它具有 DT 的架构和数据`DataSet1.TestDataTable`，但将只是类型`DataTable`。

# javascript - 如何在 Flot 中使用 Json 绘制图形？

> ID：13416063
> 
> 赞同：1
> 
> 时间：2012-11-16T11:52:32.670
> 
> 标签：javascript, ajax, flot

我正在使用[Flot Graph Api](https://github.com/flot/flot/blob/master/API.md)在我的客户端 php 中显示条形图、折线图。正如他们在示例中提到的那样，我尝试通过 Json 来绘制图表。

我像这样打包Json，

```
 [{"label":"63f9311f-5d33-66ad-dcc1-353054485572","bars":{"show":true},"data":        [[-170.44530493708,270.44530493708]]},{"label":"8f6dcf4a-b20c-8059-1410-353054486037","bars":{"show":true},"data":[[-791.50048402711,891.50048402711]]},{"label":"c2b4cf75-3e0b-f9ff-722e-353054485803","bars":{"show":true},"data":[[-1280.0484027106,1380.0484027106]]},{"label":"eb963e23-75cd-6131-867a-353054485894","bars":{"show":true},"data":[[-1487.2604065828,1587.2604065828]]},{"label":"ef413106-d5be-593b-1cda-353054485719","bars":{"show":true},"data":[[-1940.9583736689,2040.9583736689]]}] 
```

但是图表没有绘制。

```
 $.ajax({                                      
  url: '../c/By_Machine_Controller.php',                  //the script to call to get data          
  data: "",                        //you can insert url argumnets here to pass to api.php
                                   //for example "id=5&parent=6"
  dataType: 'json',                //data format      
  success: function(data)          //on recieve of reply
  {
    var Up = [];
    var Down = [];
    Up = data[0];              //get Up
    Down = data[1];           //get Down
    //alert(Up);
    $.plot($("#placeholder"), [ Up , Down ]);
  } 
}); 
```

与 Json 或 My JS 有什么关系吗？因为，我是新来的，所以我没有任何线索。谁能帮我吗。

我输入的答案工作正常，但在这种情况下，我将 JSON 写入临时文件并访问它，但我的要求是，

我计算本地主机中 MODEL 文件夹中的浮点值，并将其作为关联数组传递，并将其编码为 CONTROLLER 文件夹中的 JSON。现在我需要在本地主机的 VIEW 文件夹中访问 JSON。

控制器代码：

```
 $json = json_encode($allData);
    $myFile = "ReasonByTime.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    $stringData = "Bobby Bopper\n";
    fwrite($fh, $json);

    fclose($fh); 
```

但是当我像下面这样通过 JS 在 VIEW 中访问 CONTROLLER 的 $json 时，它不起作用。我用谷歌搜索了它，但我无法修复它。你能帮我解决这个问题吗？

查看 JS 代码以从控制器访问 JSON。

```
 $(document).ready(function () {

    //var dataurl = '../c/By_Machine_Controller.php';

    function onDataReceived(data) {

        $.plot(placeholder, data, options);
    }
    $.ajax({
        type: "GET",
        url: '../c/By_Machine_Controller.php',
        data: 'data',
        dataType: 'json', 
        success: function(data) { 
            alert(data);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:19:00.827

看起来不错，`barWidth`如果需要可以添加：

[http://jsfiddle.net/YHPea/](http://jsfiddle.net/YHPea/)或页面示例： http: [//people.iola.dk/olau/flot/examples/stacking.html](http://people.iola.dk/olau/flot/examples/stacking.html)

Flot 库填满所有空间，这就是为什么你会得到这样的结果：http: [//jsfiddle.net/YHPea/1/](http://jsfiddle.net/YHPea/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:52:42.917

我做了一些测试，只是

```
$.plot($("#placeholder"), data); 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:52:37.483

这对我有用。

```
 <script language="javascript" type="text/javascript">  
$(document).ready(function(){
$.getJSON('ReasonByTime.txt', function(json) {
    $.plot($("#placeholder"),json, {bars: { show: true, barWidth:0.2},xaxis: {ticks: json.ticks}});
}); 
```

});

# import - 用于处理导入的 Python 导入

> ID：13416064
> 
> 赞同：2
> 
> 时间：2012-11-16T11:52:48.287
> 
> 标签：import, python-2.7

我试图编写一个脚本来处理我在 Python 中的导入（我想通过设置环境变量等来避免这样做）。脚本“imports.py”如下所示：

```
import re
import os
... 
```

在 bash 中启动 python 后，我通过以下方式导入脚本：

```
import imports 
```

Python 不导入任何内容，也没有错误消息。知道为什么会这样吗？

最好的问候， 伊莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:15:41.620

当你导入你的`imports`模块时，你仍然必须在`imports`你试图访问它时调用你的模块中的每个导入。

例如，假设您已经导入了导入`re`中包含的模块`somefunction`：

**错误的：**

```
import imports
Var = imports.somefunction() 
```

**对：**

```
import imports 
Var = imports.re.somefunction() 
```

但是，如果您试图避免调用`re`just to you use`somefunction`那么您应该更新您的`imports`模块

示例：这是您应该在`imports`模块中执行的操作

```
import re
def Myfunction():
    V = somefunction()
    return V 
```

这样就可以直接调用 Myfunction 了：

```
import imports
Var = imports.Myfunction() 
```

对，它产生与

```
Var = imports.re.somefunction() 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:16:26.643

现在你已经导入`imports`了 , 其中导入了`os`, `re`,`...`

这并不意味着您可以直接在您的`__main__`.

```
imports.os
imports.re
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:37:36.653

你可以使用：

```
from imports import * 
```

这会将模块中的所有变量`imports`带入您当前的命名空间。

在您的情况下：变量将是引用导入模块的变量，因此可以按照您的意愿工作。

*（它也会使您的代码不那么清晰；在需要时导入这些模块是否需要做很多工作？人们会这样做。）*

# c# - 查询数据表

> ID：13416067
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:52:53.323
> 
> 标签：c#, linq, datatable

我正在尝试查询数据表以根据输入字符串从数据表中检索数据，可以在下面看到一个 eangle

数据表数据

```
 a  || e || i || o || u || j||
----------------------------------------
value[10]|| 1 || 1 || 1 || 1 || 1  1
string[1]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1

input string 

value

output data 
value[10]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1
value[10]|| 1 || 1 || 1 || 1 || 1  1 
```

列名可以更改，但行不会更改

所有需要与查询文本匹配的是打开的方括号之前的所有内容。

我想知道我怎么能做这个查询，因为我到目前为止使用的方法不起作用。

```
var result = excelDataTable.AsEnumerable().Where((((row,index)=> index==0))); 
```

和

```
var result = excelDataTable.AsEnumerable().Where(data => data.Field<String>(0).StartsWith(queryString)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:55:52.380

我相信您想选择那些第一列不包含`"string"`在内容中的行。试试下面的。

```
var result = excelDataTable.AsEnumerable()
                         .Where(r=> !r.Field<string>(0).StartsWith("string"));
                                    ^^^
                                   //Notice the ! - Not 
```

# android - 在android中禁用浏览器的地址栏

> ID：13416068
> 
> 赞同：0
> 
> 时间：2012-11-16T11:52:53.643
> 
> 标签：android, android-layout, android-browser, address-bar

我使用下面的代码行禁用了 android 地址栏。

```
 if(isAddressBarEnabled)
        mLayout.findViewById(R.id.address_bar).setVisibility(View.VISIBLE);
    else
        mLayout.findViewById(R.id.address_bar).setVisibility(View.GONE); 
```

在这里，当我点击一个链接时，它会首先显示地址栏，一旦页面加载它就会消失。我也想在加载时禁用地址栏。可能吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:59:22.123

从[Android View 文档](http://developer.android.com/reference/android/view/View.html#attr_android%3avisibility)中，将此 XML 代码添加到 address_bar 布局。

```
android:visibility="gone" 
```

# c++ - getline 中的“无效转换”错误

> ID：13416069
> 
> 赞同：3
> 
> 时间：2012-11-16T11:52:55.493
> 
> 标签：c++, getline

在这个程序中，我试图从文件中读取第三行文本，然后只在最后一个空格之后取其结尾。但是，当我使用 getline 函数时，它给了我一个

> idp_handler.cc:37：错误：从 'void*' 到 'char' 的无效转换（第 37 行是第一个 getline 的行）

这是我的代码

```
void idp_handler::resume() {
    ofstream myfile;
    myfile.open (PATH_R);

    string read;
    getline (myfile, read);
    getline (myfile, read);
    getline (myfile, read);

    for(int i = read.size()-1; read[i]==' '; i--) read = read.substr(i,read.size()-i);
    cout << "karp" << read << "karp" << endl;

} 
```

PATH_R 只是通向我正在读取的文件的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:22:26.707

您应该使用`std::ifstream`，并且始终使用前缀`std::`而不是将名称空间导入`std`全局名称以避免冲突：

```
void idp_handler::resume() {
    std::ifstream myfile;
    myfile.open (PATH_R);

    std::string read;
    std::getline (myfile, read);
    std::getline (myfile, read);
    std::getline (myfile, read);

    <...>
} 
```

# magento - checkout_cart_product_add_after 观察者不在实时服务器中触发但在本地服务器中工作

> ID：13416076
> 
> 赞同：2
> 
> 时间：2012-11-16T11:53:27.010
> 
> 标签：magento

我的模块遇到了一些问题，它在本地服务器上工作正常，但在开发服务器上却不行。这是我的代码：app/etc/modules/Ecophone_Specialoffer.xml

```
<?xml version="1.0"?>
<config>
    <modules>
         <Ecophone_Specialoffer>
            <active>true</active>
            <codePool>local</codePool>
        </Ecophone_Specialoffer>
    </modules>
</config> 
```

配置文件 app/code/local/Ecophone/Specialoffer/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
      <Ecophone_Specialoffer>
          <version>0.1.0</version>
      </Ecophone_Specialoffer>
    </modules>
    <frontend>
     <events>
        <checkout_cart_product_add_after>
            <observers>
               <Ecophone_Specialoffer_Model_Observer>
                  <type>singleton</type>
                  <class>Ecophone_Specialoffer_Model_Observer</class>
                  <method>changingPrice</method>
               </Ecophone_Specialoffer_Model_Observer>
           </observers>
        </checkout_cart_product_add_after>
    </events>
    </frontend>
</config> 
```

Observer.php app/code/local/Ecophone/Specialoffer/Model/Observer.php

```
class Ecophone_Specialoffer_Model_Observer {
    public function changingPrice(Varien_Event_Observer $obs){
             die('hello');
        }
} 
```

我不知道开发服务器会出现什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:15:11.000

检查大写字母和小写字母之间的区别，因为 Windows 不关心大写字母与否，但 linux 关心。核实。

改变：

```
<Ecophone_Specialoffer_Model_Observer> 
```

至：

```
<ecophone_specialoffer_model_observer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T13:32:20.477

请登录到magento admin去系统->工具->编译并点击禁用。

现在它将在服务器中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:33:32.210

将您的事件代码放入

```
<global>

<!-- you event here -->

</global> 
```

所以就像

```
<global>
<events>
        <checkout_cart_product_add_after>
            <observers>
               <ecophone_specialoffer_model_observer>
                  <type>singleton</type>
                  <class>Ecophone_Specialoffer_Model_Observer</class>
                  <method>changingPrice</method>
               </ecophone_specialoffer_model_observer>
           </observers>
        </checkout_cart_product_add_after>
    </events>
</global> 
```

这将解决您的问题。问候苏克万

# python - 在 Python3 中分析文件中的数据并将其输出到字典中

> ID：13416078
> 
> 赞同：2
> 
> 时间：2012-11-16T11:53:33.857
> 
> 标签：python, python-3.x

我正在编写一个名为`average_by_section: (file, str) -> float`

第一个参数是一个打开的标记文件。每行代表一个学生，由一个学号、一个姓名、一个部门代码和一个年级组成，所有这些都用空格分隔。

例如，它看起来像这样：

```
987654322    Xu             Carolyn         L0101   19.5
233432555    Jones          Billy Andrew    L5101   16.0
555432345    Patel          Amrit           L0101   13.5 
```

返回该部分中所有学生的平均分数，或者`None`如果部分代码未出现在任何学生的分数文件中，则返回。

我得到的提示是：

*   提示：请注意，每个学生的姓名数量各不相同。
*   提示：用于`rstrip()`去除行尾多余的空格。
*   提示：为了测试这个函数，编写一个辅助函数来打开和关闭标记文件并`average_by_section`在其间调用。

我现在要在文件的行中吐出元素：

```
def average_by_section(marks, section):
    dic = {}
    for line in marks:
        wordlist = line.split() 
```

而且我不知道接下来要做什么...

我需要一些说明/指南来完成此功能。

你会怎么写这个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:36:47.553

试试这个作为下一行：

```
(studentNumber, *names, sectionCode, grade) = wordlist 
```

这是一个不错的 Python3 新功能，`*`在该作业中具有此功能:)

关于文件的打开/关闭：您使用的是高级语言，这大大简化了这部分：

```
with open('/path/to/marks/file.txt') as marks:
    print average_by_section(marks, section) 
```

就是这样。为您完成所有的`with`打开和关闭。

# javascript - 使用带有多个动画的 jquery .when

> ID：13416079
> 
> 赞同：3
> 
> 时间：2012-11-16T11:53:36.497
> 
> 标签：javascript, jquery, animation

我是 jquery 和 js 的新手，所以也许这是一个愚蠢的问题。

我有两个动画：

```
$(foo2).fadeOut(1000);
$(foo1).fadeOut(2000); 
```

我希望在它们**以某种优雅的方式完成时调用回调（可扩展到具有不同持续时间的任意数量的动画 - 并且不知道持续时间 - 可能使用.when）**

到目前为止，我`.when`只调用最长的动画：

```
function different_animation() {

  effect = function() {

   foo1 = 'div'; //this is an example that selects multiple elements
   foo2 = 'p'; //this is an example that selects multiple elements

    var ret1 = $(foo1).fadeOut(1000);
    var ret2 = $(foo2).fadeOut(2000);

    var seconds = new Date().getTime() / 1000;
    console.log('fade out at'+seconds);

    // i know that to ret2 there is attached a longer animation is longer then ret1
    return ret2; 
  }

  $.when( effect() ).done(function() {
    var seconds = new Date().getTime() / 1000;
    console.log('done at '+seconds);
  });
} 
```

但是如果有更多动画并且我不知道每个动画的时间怎么办？我需要一些可以加入 rets 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:01:55.387

您可以通过利用[`$.Deferred`](http://api.jquery.com/category/deferred-object/)和回调功能来做到这一点`fadeOut`：

```
var deferred1 = $.Deferred();
var deferred2 = $.Deferred();
$(foo1).fadeOut(1000, function() { deferred1.resolve(); } );
$(foo2).fadeOut(2000, function() { deferred2.resolve(); } );

$.when(deferred1, deferred2).done(function() {
    console.log("both animations have completed");
}); 
```

这可以很容易地扩展到任意数量的动画（以及一般的承诺）。您可以将尽可能多的 promise 或 deferred 放入一个数组并使用

```
$.when.apply(null, arrayOfPromises).done(callback); 
```

`callback`全部完成后开火。

**[看到它在行动](http://jsfiddle.net/2sJVX/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T08:40:33.980

jQuery 的the`.animate()`和其他效果方法返回一个可在`.when()`方法中使用的对象，因此无需手动创建和解析延迟对象。

```
var promises = [];
promises.push($("#foo1").fadeOut(1000));
promises.push($("#foo2").fadeOut(2000));
$.when.apply(null, promises).done(function() { /* all done */ }); 
```

从这个版本的 Jons jsfiddle 可以看出：http: [//jsfiddle.net/2sJVX/55/](http://jsfiddle.net/2sJVX/55/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T12:02:36.607

根据的[文档](http://api.jquery.com/deferred.done/)，`jquery.Deferred()`您可以将函数链接到数组中，如下所示：

```
var arrayOfAnimation = [];

effect = function() {

  foo1 = 'div'; //this is an example that selects multiple elements
  foo2 = 'p'; //this is an example that selects multiple elements

  var deferred1 = $.Deferred();
  var deferred2 = $.Deferred();
  $(foo1).fadeOut(1000, function() { deferred1.resolve(); } );
  $(foo2).fadeOut(2000, function() { deferred2.resolve(); } );

  arrayOfAnimation.push(deferred1);
  arrayOfAnimation.push(deferred2);

  var seconds = new Date().getTime() / 1000;
  console.log('fade out at'+seconds);
}

$.done(arrayOfAnimation)
.done()
.done(function() {
  var seconds = new Date().getTime() / 1000;
  console.log('done at '+seconds);
}); 
```

**更新：**
来自文档的示例：

```
<script>
/* 3 functions to call when the Deferred object is resolved */
function fn1() {
  $("p").append(" 1 ");
}
function fn2() {
  $("p").append(" 2 ");
}
function fn3(n) {
  $("p").append(n + " 3 " + n);
}

/* create a deferred object */
var dfd = $.Deferred();

/* add handlers to be called when dfd is resolved */
dfd
/* .done() can take any number of functions or arrays of functions */
.done( [fn1, fn2], fn3, [fn2, fn1] )
/* we can chain done methods, too */
.done(function(n) {
  $("p").append(n + " we're done.");
});

/* resolve the Deferred object when the button is clicked */
$("button").bind("click", function() {
  dfd.resolve("and");
});
</script> 
```

# php - 按值连接多维数组

> ID：13416082
> 
> 赞同：0
> 
> 时间：2012-11-16T11:53:55.870
> 
> 标签：php, mysql, multidimensional-array

您好我有一个小问题，我查询 mysql 并检索数据列表以进行 json 编码并绘制成图表（例如数量与日期轴）。但是 sql 正确地不返回没有数据的查询数据的日期。所以图表上缺少日期。

我在这里读到了一些人拒绝创建其他表格的工作只是为了填补空白。这不是我的选择。

我有一个解决方案，可以在查询中创建一个包含所有日期的数组。

有人可以建议一种将其压缩到我的多维查询结果数组的方法。希望通过某种聪明的 foreach 方式。

或者是否有一个我不确定的 SQL 函数可以填写空白日期？

我的查询目前看起来像：

```
 SELECT SQL_CALC_FOUND_ROWS Date, SUM(call_answer) AS call_answer, SUM(call_busy) AS call_busy, SUM(call_noanswer) AS call_noanswer, SUM(call_notrec) as call_notrec
    FROM ( 
        SELECT * FROM ( 
            SELECT substring(dateCreated, 1,10) AS Date, COUNT(id) as call_answer, 0 as call_busy, 0 as call_noanswer, 0 as call_notrec
            FROM cdr 
            WHERE  (company = '8346767432431') AND (dateCreated >= '2012-10-16' ) AND (dateCreated <= '2012-11-16' )  AND dialStatus = 'NORMAL_CLEARING' GROUP BY Date ) 
            AS t_0 
            UNION
            SELECT * FROM ( 
            SELECT substring(dateCreated, 1,10) AS Date, 0 as call_answer, COUNT(id) as call_busy, 0 as call_noanswer, 0 as call_notrec
            FROM cdr 
            WHERE  (company = '8346767432431') AND (dateCreated >= '2012-10-16' ) AND (dateCreated <= '2012-11-16' )  AND dialStatus = 'USER_BUSY' GROUP BY Date )
            AS t_1
            UNION
            SELECT * FROM ( 
            SELECT substring(dateCreated, 1,10) AS Date, 0 as call_answer, 0 as call_busy, COUNT(id) as call_noanswer, 0 as call_notrec
            FROM cdr 
            WHERE  (company = '8346767432431') AND (dateCreated >= '2012-10-16' ) AND (dateCreated <= '2012-11-16' )  AND (dialStatus = 'ORIGINATOR_CANCEL' OR dialStatus = 'NO_USER_RESPONSE') GROUP BY Date )
            AS t_2
            UNION
            SELECT * FROM ( 
            SELECT substring(dateCreated, 1,10) AS Date, 0 as call_answer, 0 as call_busy, 0 as call_noanswer, COUNT(id) as call_notrec
            FROM cdr 
            WHERE  (company = '8346767432431') AND (dateCreated >= '2012-10-16' ) AND (dateCreated <= '2012-11-16' )  AND (dialStatus = 'UNALLOCATED_NUMBER' OR dialStatus = 'INVALID_NUMBER_FORMAT') GROUP BY Date )
            AS t_3

    )

    AS t_total
    GROUP BY Date; 
```

所以已经很乱了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:08:37.317

您可以使用 MySQL 中的比较结果是一个数字这一事实来简化您的 SQL 查询；0 为假，1 为真。所以你可以总结比较来计算你的计数。

```
SELECT DATE(dateCreated) AS `Date`,
 SUM(dialStatus = 'NORMAL_CLEARING') AS call_answer,
 SUM(dialStatus = 'USER_BUSY') AS call_busy,
 SUM(dialStatus = 'ORIGINATOR_CANCEL') AS call_noanswer,
 SUM(dialStatus = 'UNALLOCATED_NUMBER') AS call_notrec
FROM cdr 
WHERE company = '8346767432431'
  AND dateCreated BETWEEN '2012-10-16' AND '2012-11-16' -- = 11-16 0:00 !
GROUP BY DATE(dateCreated) ASC 
```

请注意，无论是在此查询中还是在原始查询中，范围的结尾都将隐含地假定*时间*为`0:00`. 所以你不会包括那一天，除了第一秒。你可能需要调整它。

至于如何组合事物的实际问题：上述查询按升序生成日期。所以拿你的日期列表，看看该列表上的第一项是否等于下一条记录的日期。虽然情况并非如此，但在结果数据中插入一行零并继续列表中的下一个日期，保持查询中的当前记录不变。

# git - 在 Gerrit 中处理过时的依赖项

> ID：13416083
> 
> 赞同：4
> 
> 时间：2012-11-16T11:54:01.733
> 
> 标签：git, version-control, gerrit

我在 Merge Pending 状态下进行了审核更改。变化取决于另一个过时的变化。依赖项具有已合并的较新版本。

我尝试使用变基按钮来变基未成功的未决更改，变基导致冲突。因此，我决定将待处理的更改提取到本地存储库并将其变基为 master。我解决了冲突。

在那之后，我想把它推回去。我收到错误消息：

```
 ! [remote rejected] HEAD -> refs/for/master (change 166 closed) 
```

更改 166 是依赖项。所以我无法推回重新定位的版本。

摆脱过时依赖项的适当方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:16:29.573

似乎您也重新设置了 CL#166 并尝试推动这些更改。

重新调整您再次更改并使用 `git rebase ... -i` 来选择您需要的唯一提交（即删除带有 166 的行）。

# html - 如何从 Web Worker 内部访问 document.cookie？

> ID：13416084
> 
> 赞同：5
> 
> 时间：2012-11-16T11:54:02.370
> 
> 标签：html, cookies, xmlhttprequest, web-worker

由于 Web Worker 无法访问该`document`对象，我如何在工作脚本中访问 c​​ookie？

### 背景

我正在使用 Django，我需要在 AJAX 帖子中传递 CSRF 令牌。执行此操作的标准方法是从中获取令牌`document.cookie`并将其作为标头传递：

```
xhr.setRequestHeader('X-CSRFToken', readCookie('csrftoken')); 
```

（[来源](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)）

网络工作者支持`XMLHttpRequest`，似乎他们将 cookie 发送到服务器，但我找不到在脚本本身中获取 cookie 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T14:49:35.370

在`xhr.setRequestHeader('X-CSRFToken', readCookie('csrftoken'));`创建一个变量来存储 cookie 之前，如下所示：

```
ck = readCookie('csrftoken');`Removing "var" variable "ck" becomes global. This way you can access it from outside the Web Worker.`
xhr.setRequestHeader('X-CSRFToken', ck); 
```

在 ck 你有 cookie。

# ios - iOS uilabel over uitextfield

> ID：13416086
> 
> 赞同：0
> 
> 时间：2012-11-16T11:54:09.343
> 
> 标签：ios, uitextfield, uilabel

我想在文本字段上有一个标签，当用户键入时它会发生变化。问题是文本字段的插入符号位于标签后面（如果我将标签放在文本字段的前面）。我总是可以使文本字段的背景透明，并在标签和文本字段后面添加另一个禁用的文本字段，但我想要一个更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:09:50.230

您可以在文本字段后面添加标签，并使文本字段背景透明且无边框。并删除占位符。您可以使用以下方法来实现此目的。

```
- (BOOL) textField: (UITextField *)theTextField shouldChangeCharactersInRange: (NSRange)range replacementString: (NSString *)string
 {

} 
```

# jquery - jQuery 冲突 - 使用 jQuery-noconflict

> ID：13416088
> 
> 赞同：0
> 
> 时间：2012-11-16T11:54:16.470
> 
> 标签：jquery

好吧，我阅读了一些线程和 jquery 的 wiki，但不知何故我无法解决我的问题。

尝试添加 jQuery.noConflict() 因为如果我运行某些 jQuery 库会发生冲突。如果我像 jQuery Wiki 上所说的那样添加 jQuery.noConflict()。这两个脚本都不起作用。

剧本

```
$(document).ready(function() {

    //Default Action
    $(".tab_content").hide();
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_content:first").show();

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").hide();
        var activeTab = $(this).find("a").attr("href");
        $(activeTab).fadeIn();
        return false;
    });

}); 
```

如果我在这里添加 jQuery.noConflict()

```
 $.noConflict();
    jQuery(document).ready(function($) {

    //Default Action
    $(".tab_content").hide();
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_content:first").show();

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").hide();
        var activeTab = $(this).find("a").attr("href");
        $(activeTab).fadeIn();
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:01:07.447

我认为你应该像这样使用它：

```
 jQuery(document).ready(function($) {
    $.noConflict();

    // then the code stuff
  }); 
```

看看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:03:00.220

尝试使用这个-

```
jQuery.noConflict()(function(){
    // code using jQuery
}); 
```

如果这不起作用，请尝试使用 html、css 和 js 制作小提琴并提供有问题的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:03:43.680

您可以像这样使用它（来自[jQuery 文档](http://api.jquery.com/jQuery.noConflict/)）：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });

  // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:03:24.380

我建议将代码更改为这样的

```
(function($){
   // code using jQuery with $.
}(jQuery)); 
```

这将在文件准备就绪时调用，您将不再需要`$.noConflict();`

# android - Android用变音符号转换json字符串

> ID：13416094
> 
> 赞同：0
> 
> 时间：2012-11-16T11:54:28.067
> 
> 标签：android, json, gson

我想将 josn 字符串发送到网络服务器上的 php sript。

我使用这个代码：

```
JSONObject json = new JSONObject();
json.put("street", "straße"); 
```

json 把这个准确地放到字符串中，但是 php 脚本不需要`straße`，它需要`stra\u00dfe`

有什么办法可以做到这一点`String.replace()`

也许这有助于其他解决方案，php脚本删除`ß`字符串中的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:38:42.200

您不能向服务器发送*字符*，只能发送*字节*。你需要弄清楚你的 JSON 字符串在哪里被转换为字节数组，并确保它包含一个像 UTF-8 这样的字符集。

JSON 编码器不会转换`ß`为，`\u00df`因为这不是它的工作。就它而言，`ß`是一个合法的输出字符。

# android - 与 phonegap + android 绑定的 Backbone.js 事件在单击时提供“蓝色包装”

> ID：13416095
> 
> 赞同：0
> 
> 时间：2012-11-16T11:54:30.143
> 
> 标签：android, cordova, backbone.js, dom-events, backbone-events

我遇到了非常奇怪的情况，当我通过backbone.js 事件绑定时，我的android phonegap 应用程序在点击时得到“蓝色环绕框”。

iOS版本没问题。

我附上截图： ![触发时](../Images/85af18305124fa5dea8afb2f0fbb196e.png)

![常规的](../Images/ac053c69b16cc613f2f4c17bc32d5bea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:41:51.533

“蓝色包装”可能是您移动设备默认 CSS 的一部分。您可以尝试添加：

```
* { -webkit-tap-highlight-color:  rgba(255, 255, 255, 0) !important; } 
```

# android - 如果应用程序进入后台，移动应用程序状态是否会保持不变

> ID：13416096
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:54:35.853
> 
> 标签：android, ios, mobile

对于 Android/ARM 和 iOS 4，如果移动应用程序进入后台（例如，如果另一个应用程序获得焦点），应用程序的状态是否会保持不变，当它再次变为活动时？

如果空闲一段时间，应用程序会自动关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:31:44.090

在 iOS 中有两种方法...
1.applicationDidEnterBackground
2.applicationWillEnterForeground

因此，请将此方法用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:56:31.090

在 Android 中，如果需要重新获得一些内存，操作系统可能会终止应用程序。这意味着`onStop()`您的活动的方法将被调用。

有关更多详细信息，请参阅[Android 开发人员 - 活动生命周期](http://developer.android.com/guide/components/activities.html#Lifecycle)。

# google-maps-api-3 - 如何使用 api v3 在谷歌地图上动态添加自定义图层

> ID：13416098
> 
> 赞同：3
> 
> 时间：2012-11-16T11:54:38.863
> 
> 标签：google-maps-api-3

我正在使用 Google Maps api v3.. 我想加载一个由我的 .NET 代码生成的图层。我想在地图上显示该图像.. 这可能吗？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:08:10.780

您可以使用此代码..

```
var Layerone= {
getTileUrl: function (coord, zoom) {

   return "http://www.ursite.com/urpage.aspx?x=" + coord.x + "&y=" + coord.y + "&zoom=" + zoom ;

},
tileSize: new google.maps.Size(256, 256),
maxZoom: 20,
name: 'Custom layer' 
```

};

在这之后

```
var secondLayerType = new google.maps.ImageMapType(LayerOne); 
```

这将创建一个图像层。现在你可以在地图上添加这个层，如下所示：

```
 map.overlayMapTypes.push(secondLayerType); 
```

这里'map'是你的地图对象

# ruby - 使用 ruby 邮件转发电子邮件

> ID：13416105
> 
> 赞同：2
> 
> 时间：2012-11-16T11:54:58.833
> 
> 标签：ruby, email, gem

我正在使用 ruby​​ 邮件 gem（https://github.com/mikel/mail）将邮件从一个邮箱转发到另一个邮箱。

有谁知道如何创建转发消息？

邮件上的 Tmail gem create_forward() 中有一种方法可以通过设置正确的主题等来创建给定邮件的转发版本。如果可用，我正在寻找类似的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:58:49.480

你能不能简单地将邮件发件人和文本保存为变量，创建一条新消息来撰写并使用该信息来构造一个 fwd: 版本？

# c++ - 如何使用朴素贝叶斯算法对未知记录进行分类

> ID：13416109
> 
> 赞同：2
> 
> 时间：2012-11-16T11:55:05.027
> 
> 标签：c++, c, machine-learning, data-mining

我正在尝试对一些实时数据实施朴素贝叶斯算法。我知道贝叶斯的规则，但我不确定如何在我的数据上实施。我的数据如下所示。我的数据中共有 2 个标签可以，欺诈和测试数据标记为 unkn。我需要通过应用朴素贝叶斯算法将所有 unkn 记录分类为正常或欺诈。我该如何实现？请有人帮助我。

```
1,v1,p1,182,1665,unkn
2,v2,p1,3072,8780,ok
3,v3,p1,20393,76990,ok
4,v4,p1,112,1100,fraud
5,v3,p1,6164,20260,unkn
6,v5,p2,104,1155,ok
7,v6,p2,350,5680,unkn
8,v7,p2,200,4010,ok
9,v8,p2,233,2855,unkn
10,v9,p2,118,1175,unkn 
```

贝叶斯规则：-

unkn ok 的后验概率 = ok 的先验概率 * 给定 unkn 的可能性 ok。

未知欺诈的后验概率 = 欺诈的先验概率 * 给定欺诈的未知概率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:28:02.807

我假设该行`1,v1,p1,182,1665,unkn`被解释为：

*   `1`, `v1`= 一些标识符
*   `p1,182,1665`= 数据点的特征
*   `unkn`= 标签，在这种情况下未知

考虑到这种表示法，您的训练数据由所有带有标签`ok`或的行组成，`fraud`其余的是您的测试数据。您必须计算先验和条件似然：

1.  先验概率是训练数据中示例`ok`的比例。`ok`这同样适用于`fraud`
2.  对于每个特征`f`，例如`v1`或，其给出的可能性 ok 是训练数据中包含该特征`p1`的示例的比例。`ok`例如，`p1`包含在 4 个`ok`示例中的 2 个中，给您 0.5 的概率。

对于每个示例，将您在步骤 2 中为其所有特征计算的概率相乘。将结果乘以步骤 1 中的概率，以获得示例属于特定类的（联合）概率。

注意事项：

*   将概率相乘最终会导致下溢。您可能想要添加这些概率的日志。
*   我描述的算法仅适用于离散值特征。您在上面似乎具有的连续值特征（例如`182`）需要转换为离散值（例如通过分箱），或者您需要在步骤 2 中想出一些其他方法来估计条件概率。Google for Continuous-valued Naive Bayes

# iphone - 用 nib 定义 UICollectionViewCell

> ID：13416113
> 
> 赞同：15
> 
> 时间：2012-11-16T11:55:17.723
> 
> 标签：iphone, ios, interface-builder, uicollectionview, uicollectionviewcell

如果我理解正确， a 的内容[`UICollectionViewCell`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewCell_class/Reference/Reference.html)应该进入它的`contentView`属性和背景`backgroundView`中。

然而，当我将 a 拖到`UICollectionViewCell`Interface Builder 时，并没有提到`contentView`or `backgroundView`。如果我添加子视图，它们会将整个单元格作为其父级，而不是`contentView`or `backgroundView`。

`UICollectionViewCell`那么，用 IB定义 a 的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T05:11:33.617

“如果我添加子视图，它们会将整个单元格作为其父级，而不是 contentView”

这不是真的。如果您拖入 UICollectionViewCell，并向其中添加 UI 元素，您就是将它们添加到内容视图中。它没有出现在对象列表中的事实并不意味着它不存在（NSBox 也是如此——它有一个内容视图也没有出现在 IB 中）。如果在 collectionView:didSelectItemAtIndexPath: 中，您记录 cellForItemAtIndexPath，并查看它的子视图，您只会找到一个，这与您通过记录 cell.contentView 获得的相同。如果您记录其子视图，那么您将看到您的 UI 元素。

现在，就背景视图而言，我不认为这是您可以从 IB 访问的内容。您可以拥有一个带有 UIView 的 xib 文件，然后将其分配给单元格的 backgroundView 属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T15:51:57.000

由于没有更好的选择，我为`contentView`和使用单独的 nib 文件`backgroundView`。然后在我的`UICollectionViewCell`子类中：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        NSArray *contentViewNib = [[NSBundle mainBundle] loadNibNamed:@"CollectionViewCellContentView" owner:self options:nil];
        [self.contentView addSubview:contentViewNib[0]];
        NSArray *backgroundViewNib = [[NSBundle mainBundle] loadNibNamed:@"CollectionViewCellBackgroundView" owner:self options:nil];
        self.backgroundView = backgroundViewNib[0];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T01:06:49.160

我不确定这是否是 Xcode 8 的新功能，但`UICollectionViewCell`包括用于连接`backgroundView`和`selectedBackgroundView`.

[![在此处输入图像描述](../Images/d064da7997fe714d247e9022cc745637.png)](https://i.stack.imgur.com/4OrcT.png)

多亏了这一点，您可以将一个`UIView`（或子类）添加到您的集合视图单元格并将其连接到任一插座。这样您就可以使用 IB 定义它们。

[![在此处输入图像描述](../Images/769fe0b6caac945026bb7cbfcd8f5442.png)](https://i.stack.imgur.com/ylbzy.png)

希望这可以帮助！

# c# - .net 4.5：DataGrid - 前景色行为改变

> ID：13416117
> 
> 赞同：1
> 
> 时间：2012-11-16T11:55:27.483
> 
> 标签：c#, .net, wpf, .net-4.5

我有 ac# 业务应用程序（仍然针对 .net 4.0）。安装 .net 4.5 后，数据网格行的非活动前景色发生了变化。（我没有重新编译，仍然执行相同的二进制文件）

似乎他们改变了前景色的对比色计算。

更多细节。Datagrid 是这样定义的：

```
<DataGrid Background="White" AlternatingRowBackground="WhiteSmoke" ... /> 
```

我们还以这种方式为 Datagrid 定义了一个全局样式：

```
<Style TargetType="{x:Type DataGrid}">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="{DynamicResource ItemSelectedFocusedColor}"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{DynamicResource ItemSelectedFocusedColor}"/>
    </Style.Resources>
</Style> 
```

颜色：`<Color x:Key="ItemSelectedFocusedColor">#88087ED1</Color>`

在安装了 .net 4 的情况下执行应用程序时，**未聚焦**的Datagrid 行的前景文本颜色为**White**。在安装了 .net 4.5 的情况下执行应用程序时，**未聚焦**的Datagrid 行的前景文本颜色为**Black**。

如果数据网格具有焦点，则行为是相同的。（两个版本均为白色）

对我来说，这是就地更新的重大变化。我所有的客户都应该获得完全相同的用户体验，而与安装的版本无关。

[我在MSDN .net 4.5 Application Compatibility](http://msdn.microsoft.com/en-us/library/hh367887.aspx)上也找不到有关此问题的任何信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:15:43.743

DataGrid 和 DataGridRow 控件模板已在 .NET4.0 和 .NET4.5 版本之间进行了更改。负责根据选择和焦点改变颜色的触发器不再使用相同的 SystemColors。

这就是为什么在 xaml 中覆盖 SystemColors 以更改选择颜色，即使是一个不错的技巧，也不是一个好的做法。

您应该覆盖控件模板/样式以使它们与您自己的画笔一起使用。这样，即使 Microsoft 决定更改其内置模板，您的代码也不会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T23:19:53.130

您可以按照@Sisyphe 的建议进行操作，或者您可以继续“作弊”！我们不得不将此添加到`Style.Resources`列表中以解决相同的问题

```
<SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="{x:Static SystemColors.HighlightColor}"/> 
```

见[https://stackoverflow.com/a/13053511/1811110](https://stackoverflow.com/a/13053511/1811110)

# mono - 将 MonoDroid 升级到 Mono 3 或 2.12

> ID：13416134
> 
> 赞同：1
> 
> 时间：2012-11-16T11:56:38.437
> 
> 标签：mono, xamarin.android, monodevelop

我看到 Mono 3.0（或者是 2.12）刚刚在 10 月份发布。那个 3.0/2.12 版本稳定吗？如何升级 MonoDroid 以使用它，以便我可以使用 C# 5.0 异步关键字？我目前正在使用 MondoDroid 4.2.7

我在Mono Develop 中单击了检查更新，只能找到适用于android 4.2.8 beta 的单声道。我在发布文档中看到还有一个 4.4 版本。是否有使用最新单声道版本的 monodroid 版本。如果不是，它是否稳定/易于更换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:44:04.597

当前的 3.0.0 版本是 beta 版本（还没有稳定版本的固定日期）。

您无法更改 Mono 版本 Mono for Android（或 MonoTouch）使用自己，那些产品本身嵌入 Mono（Mono 运行时和 Mono for Android / MonoTouch 紧密结合在一起，因此不仅仅是在 Mono 版本之间切换的问题）。

目前的计划是在明年初的某个时候发布基于 Mono 3.0 的 Mono for Android / MonoTouch。

# android - Android：缓慢的 UI 渲染，同时内置和自定义动画

> ID：13416137
> 
> 赞同：3
> 
> 时间：2012-11-16T11:56:43.400
> 
> 标签：android, animation, handler, ondraw

我需要有关同时使用内置动画和自定义动画的建议。

我的应用程序有一个带有以下动画视图的屏幕-

1.  带有旋转动画的视图。
2.  带有 AnimationDrawable 的视图以及上面的翻译动画。
3.  通过处理程序重复 onDraw() 调用来模拟动画的自定义视图。

动画 1 和 2 同时运行没有任何问题。

仅自定义视图的动画也运行流畅。

但是当我同时运行所有 3 个时，它们会彼此减慢速度。

看起来他们是轮流跑的，

当 1 和 2 运行时， 3 暂停一段时间。

当3运行时，1和2暂停一段时间。

# javascript - 如何在播放 15 秒后自动暂停 JWplayer？

> ID：13416139
> 
> 赞同：3
> 
> 时间：2012-11-16T11:56:46.863
> 
> 标签：javascript, html, flash, jwplayer

我正在寻找 javascript 在播放 15 秒后自动暂停我的 wordpress 博客上的 JWPlayer。我目前有 15 秒后弹出的内容储物柜，并且视频在页面加载时开始自动播放，我基本上需要它在内容储物柜弹出时停止。

也许有可能在 15 秒后弹出内容储物柜时暂停视频。那可能会变得不那么同步？

我想出了更好的代码，可以在内容储物柜弹出时执行（div“overlay_div”）。但是有些东西还是不行。

```
if (document.getElementById("overlay_div")) {jwplayer().stop();} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:11:21.003

您可以设置一个回调，使用`onPlay(callback)`该回调将在播放器开始播放时立即触发。此外，您将需要一个变量来跟踪到目前为止已经播放了多少秒（我们称之为这个`secondsPlayed`）。

在 的回调函数中`onPlay`，您使用 1 秒的时间间隔。每次调用间隔代码时，您`secondsPlayed`的变量都会增加 1。

一旦`secondsPlayed`变量达到，您可以使用自定义 Javascript`15`停止播放并执行。`pause(state)`此时您还应该禁用该间隔，因为您已经处理了`15-second playback`此时的方式。

[您可以在 JW Player](http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference)的 Javascript API 参考页面上找到我提到的所有功能的详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:10:56.883

你可以使用 `timeupdate: function(event){}`. 在里面检查`duration`并暂停播放器。

但此`timeupdate`事件并非每 1ms 发生一次。因此，它不会为您提供同步的最佳选择。

# excel - 声明要在循环中使用的数组

> ID：13416140
> 
> 赞同：2
> 
> 时间：2012-11-16T11:56:47.890
> 
> 标签：excel, vba

我正在尝试搜索某个类别的列，然后在满足条件时将该类别更改为不同的名称（如果它是我需要更改的类别）。我知道如何使用单个变量逐行遍历列，但是，当我尝试将行和列的组合声明为数组（以加快循环）时，我被挂断了。我是 VBA 新手，过去没有使用过数组。以下是我到目前为止的代码。

```
Dim myArray(1 To 1000, 3 To 3)
Dim i As Integer

For i = 1 To 1000
 myArray(i, 3) = Worksheets("Sheet1").Cells(i, 3)

 Next i

If myArray(i) = "Category1" Then
myArray(i) = "DifferentCategory" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:01:56.697

您的阵列使用情况不一致。如果您所做的只是更改名称，则无需使用多维数组：

假设您的代码是您所拥有的，那么以下应该可以工作：

```
Dim myArray(1 To 1000)
Dim i As Integer

For i = 1 To 1000
 myArray(i) = Worksheets("Sheet1").Cells(i, 3)

 Next i

If myArray(i) = "Category1" Then
myArray(i) = "DifferentCategory" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:40:39.877

您想更改单元格值：

```
Dim i As Integer

For i = 1 To 1000
   If Worksheets("Sheet1").Cells(i, 3).Value2 = "Category1" Then
       Worksheets("Sheet1").Cells(i, 3).Value2 = "DifferentCategory"
    End If
 Next i 
```

或者您希望`myArray`更改局部变量 ( ) 以便在您的代码中进一步使用：

```
Dim myArray(1 To 1000) As String
Dim i As Integer

For i = 1 To 1000
    MyArray(i) = Worksheets("Sheet1").Cells(i, 3).Value2 
    If MyArray(i) = "Category1" Then
       myArray(i) = "DifferentCategory"
    End If
 Next i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:59:31.980

以下 1 班轮将执行您在第一句话中解释的内容：

```
Range(Worksheets("Sheet1").Cells(1, 3), Worksheets("Sheet1").Cells(1000, 3)).Replace "Category1", "DifferentCategory" 
```

或者更容易阅读的版本：

```
Dim targetRange As Range
With Worksheets("Sheet1")
    Set targetRange = .Range(.Cells(1, 3), .Cells(1000, 3))
    targetRange.Replace "Category1", "DifferentCategory"
End With 
```

如您所见，数组不是必需的，因为您正在寻找一个值并替换它。

但是，如果您真的想使用数组，这是更快的方法之一：

```
Dim myArray
Dim i As Integer
With Worksheets("Sheet1")
    'myArray will now be a (1 to 1000, 1 to 1) array with all the cell values.
    myArray = .Range(.Cells(1, 3), .Cells(1000, 3))
End With
For i = 1 To 1000
    If myArray(i, 1) = "Category1" Then myArray(i, 1) = "DifferentCategory"
Next 
```

# android - 来自 nativeGetEnabledTags 的意外值：0

> ID：13416142
> 
> 赞同：303
> 
> 时间：2012-11-16T11:57:01.510
> 
> 标签：android, adt, android-logcat

我安装了最新版本的 SDK (r21) 和 ADT 21.0.0。我尝试了简单的代码，它运行良好，但现在我在[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)中收到以前版本中没有出现的警告：

> 来自 nativeGetEnabledTags 的意外值：0

我用谷歌搜索，发现*[问题 39723: Emulator spams LogCat with "Unexpected value from nativeGetEnabledTags: 0" message](http://code.google.com/p/android/issues/detail?id=39723)*。

这是什么意思？

* * *

## 回答 #1

> 赞同：478
> 
> 时间：2012-11-20T16:03:14.383

我也遇到了这个问题。作为一种解决方法，我在过滤器字段`LogCat`上使用以下表达式过滤输出：`by Log Message`

```
^(?!.*(nativeGetEnabledTags)).*$ 
```

否则它是如此垃圾邮件它几乎是无用的。

按照 [Laksh 的](https://stackoverflow.com/users/1737392/laksh)建议，如果您想始终过滤它而不必总是将其写在`Search for messages`字段上：

1.  转到您的`Logcat`
2.  在`Saved Filters`左侧部分中，单击`Edit selected logcat filter`（如果未显示已保存的过滤器，则单击 Logcat 中的显示已保存的过滤器视图）
3.  在那里，在按日志消息字段中，输入`^(?!.*(nativeGetEnabledTags)).*$`。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-01-18T14:38:01.573

这是 API 17 的模拟器系统映像中的一个错误。

目前，您的解决方法如下：

**如果您不需要 API 级别 17**

*   使用 API 16（或更低）的模拟器...
*   ...或更高版本（例如 API 19，经过测试也可以解决问题）。

**如果您确实需要 API 级别 17**

*   使用真实设备：Nexus 4、Nexus 7、Nexus 10。
*   使用 Hendrik 建议的 LogCat 过滤器。但是，您必须编辑您拥有的每个过滤器（如果您想全部修复）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-18T12:09:04.723

您提到的链接有答案。这是最新版本的工具中引入的错误。在后续评论中，您可以看到谷歌代表说正在修复。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-04T11:41:56.637

更新`ARM EABI v7a System Image`from`Android SDK Manager`和警告不会再被看到.. !! :)

是的。这仅适用于 ARM EABI 系统映像，不适用于 Intel 映像。

**更新**

似乎有一个适用`Intel x86 Atom System Image`于*API 18*的更新可以解决这个问题（虽然我还没有尝试过）。A[`link`](http://software.intel.com/en-us/articles/intel-atom-x86-image-for-android-jelly-bean-43-installation-instructions-manually)手动安装系统映像。当然，它也可以在 Android SDK Manager 中使用。

但它仅适用于 Android 4.3。4.2.x 开发人员可能仍需等待修复..！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-27T12:38:59.903

Intel x86 Atom 映像和“nativeGetEnabledTags: 0”的问题在 Android 4.3 (API 18) Intel x86 Atom 映像的发布中得到修复。我刚刚对其进行了测试，并且可以确认这一点。

使用 ARM 映像，这已在不久前修复，我知道...

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-08T22:40:04.590

由于这些消息带有`Trace`标签，您可以使用更简单的表达式来过滤它们`by Log Tag`字段：

```
^(?!Trace) 
```

就是这样。

顺便说一句，我也在真实设备（Fly IQ4410）上看到了这些消息。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-11T12:28:56.607

我收到了很多类似的消息，所以我需要更好的过滤器。将这些过滤器添加到 LogCat：

**按日志标签：**

```
^(?!.*(GN_FW_TextView|GN_FW_Editor|SurfaceTextureClient|skia|AbsListView|Provider/Settings|InputMethodManager|jdwp)).*$ 
```

**通过日志消息：**

```
^(?!.*(nativeGetEnabledTags)).*$ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-16T20:34:08.373

我已经添加了`^(?!.*(nativeGetEnabledTags)).*$` 过滤器，但你可以看到它对我的帮助有多大：

![在此处输入图像描述](../Images/b5652d3f1bb45ae6f5586d2a2dacc564.png)

从 1157 过滤了一些，799 绕过了相同的比率，但数字更大一些：

![在此处输入图像描述](../Images/6b2d2064ed91558ab5014a673dcede54.png)

我需要添加“SpamFilter”才能使用 Logcat：

![在此处输入图像描述](../Images/2910cdc6fb1bfe8fc9ff434cf6a4d2f3.png)

按日志标签：

```
 ^(?!Trace|ADB_SERVICES|BufferQueue|wpa_supplican|SurfaceFlinger|Settings/BW|Bluetooth HS/HF) 
```

按应用程序名称：

```
^(?!com.android.systemui|system_process) 
```

对我来说，它使 Logcat 有点可用。

# jquery-mobile - 在jQuery mobile listview中刷新单个li

> ID：13416145
> 
> 赞同：1
> 
> 时间：2012-11-16T11:57:14.503
> 
> 标签：jquery-mobile

我有一个列表视图，带有搜索过滤器，几乎 300 `<li>`。

刷新列表视图大约需要 7 秒，但有时我只想更新单个`<li>`.

有没有办法在`<li>`不刷新完整列表视图的情况下刷新单曲？

**编辑：**

**示例**：

```
<ul data-role="listview" id="myList">
    <li id="a" data-icon="check"><a href="">A</a></li>
    <li id="b" data-icon="check"><a href="">B</a></li>
</ul> 
```

**解决方案**：

```
$('#a span').removeClass ('ui-icon-check');
$('#a span').addClass ('ui-icon-refresh'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:38:02.127

这样的事情有用吗？

*   [http://jsfiddle.net/RzBhu/](http://jsfiddle.net/RzBhu/)

JS

```
// US Flag
var newImageSource = "http://jquerymobile.com/demos/1.2.0/docs/lists/images/us.png"; 

// this is the item you want to change
var listItemChildNeeded = 3; 

// this is the list with the found item
var listItemChildSelected = $("#myList :nth-child("+listItemChildNeeded+")"); 

// digging into the jQM markup first level
var listItemChildSelectedFirstChild = listItemChildSelected.children(); 

// digging into the jQM markup second level
var listItemChildSelectedSecondChild = listItemChildSelectedFirstChild.children(); 

// digging into the jQM markup third level
var listItemChildSelectedThirdChild = listItemChildSelectedSecondChild.children(); 

// digging into the jQM markup fourth level
var listItemChildSelectedFourthChild = listItemChildSelectedThirdChild.children(); 

// Change Great Britains Flag to the US Flag
listItemChildSelectedFourthChild.attr('src', newImageSource);

// one liner syntax
//$("#myList :nth-child(3)").children().children().children().children().attr("src","http://jquerymobile.com/demos/1.2.0/docs/lists/images/us.png");

​ 
```

HTML

```
<div data-role="page" id="home" class="pages" data-theme="c">
    <ul data-role="listview" id="myList">
        <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/gf.png" alt="France" class="ui-li-icon">France <span class="ui-li-count">4</span></a></li>
            <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/de.png" alt="Germany" class="ui-li-icon">Germany <span class="ui-li-count">4</span></a></li>
            <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/gb.png" alt="Great Britain" class="ui-li-icon">Great Britain <span class="ui-li-count">0</span></a></li>
            <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/fi.png" alt="Finland" class="ui-li-icon">Finland <span class="ui-li-count">12</span></a></li>
            <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/sj.png" alt="Norway" class="ui-li-icon">Norway <span class="ui-li-count">328</span></a></li>
            <li><a href="#"><img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/us.png" alt="United States" class="ui-li-icon">United States <span class="ui-li-count">62</span></a></li>
    </ul>
</div>​ 
```

# linux - Linux 删除至少 2 周前的文件和（一个月中的某天）% 14 != 0

> ID：13416146
> 
> 赞同：0
> 
> 时间：2012-11-16T11:57:15.930
> 
> 标签：linux, shell, ubuntu, delete-file

我每天都在为我的数据库创建备份。

对于硬盘保存，如何从*shell 脚本*`2 weeks`中删除早于AND的文件？`(day of month) % 14 != 0`

 *所以我正在寻找类似的命令`find / -mtime +14 -exec rm {} \;`，除了*不删除*在任何一个月的第 14 天或第 28 天创建的文件。

我想在**过去 2 周**和**之后****每 2 周**（几乎）进行一次每日备份？

 **循环中的 PHP 代码将是：

```
$mtime = filemtime($file); // Last modified date of file (created)
$day_mtime = date('j', $mtime); // Day of month (1-31)
$two_weeks_ago = time() - 60 * 60 * 24 * 14;

if ($mtime < $two_weeks_ago && $day_mtime % 14 != 0) {
    // Delete file older than 2 weeks 
    // AND not modified not 14'th nor 28'th day of month
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:23:17.843

这是 bash 等价物。从 php 迁移到 bash 时需要注意的几点：

*   在 bash`$`中表示“...的值”，变量也是如此`mtime`，也是变量`$mtime`的值
*   符号`$(...)`表示运行括号中的命令并捕获其输出因此，`$(stat -c %Y $file)`替换为的输出`stat -c %Y $file`
*   赋值操作符周围不能有空格`a=b`有效，`a = b`不

    ```
    mtime=$(stat -c %Y $file)
    day_mtime=$(date -d@$mtime +%d)
    two_weeks_ago=$(date -d '2 weeks ago' +%s)
    mod_14_day=$(expr $day_mtime 14)
    if [ $mtime -lt $two_weeks_ago ] && [ $mod_14_day -eq 0 ] ; then
    fi 
    ```***

# android - 是否可以在奥地利使用 androids 本地化的德语文件夹（drawable-de）？

> ID：13416152
> 
> 赞同：2
> 
> 时间：2012-11-16T11:57:48.467
> 
> 标签：android, image, localization

我的 android 应用程序中有德国图像。这些图像位于 drawable-de 文件夹中。效果很好。但是当我在德国（奥地利）更改我的设备语言时，该应用程序使用默认（英语）图像。是否可以将德国图像用于其他德语国家，而无需复制它们？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:07:02.827

您可以为这种情况创建别名资源：

[http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:53:26.873

你用的是什么安卓版本？我刚刚测试了一个应用程序，它在 res/drawable 上具有中性图像，在 res/drawable-de 中具有德国图像。此外，该应用程序在 values 中具有中性字符串，在 values-de 中具有德语字符串，在 values-de-rAT 中具有奥地利德语字符串。

所以有一个奥地利特定的字符串，但没有奥地利特定的标志图像。这就是为什么我希望 Android 使用德国国旗图像。它正确地做到了。我使用的是 Android 4.1 (API 16)。

然后我使用 Android 2.3 (API 10) 降级了应用程序，它再次工作。这意味着图像级联的工作方式至少从 Android 2.3 开始就应该如此。我没有安装任何订单 SDK，所以我无法测试它们。

这是关于按项目的屏幕截图。

![安卓项目](../Images/e26919d6f93f4027adf6b29f77ad519d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:00:23.240

Use `getResources().getConfiguration().locale.getCountry();`or `getLanguage()`which 返回正在使用的国家/语言。然后，在您的代码中，加载不同的图像。

# mysql - MYSQL中按FIELD排序

> ID：13416153
> 
> 赞同：9
> 
> 时间：2012-11-16T11:57:52.327
> 
> 标签：mysql, mysql-workbench

我正在努力解决这个问题。我有一张这样的桌子。

```
 +-------------+-------+
    | type        | COUNT |
    +-------------+-------+
    | A           |     1 |
    | C           |     5 |
    | B           |     4 |
    +-------------+-------+ 
```

我要查询表，结果一定是这样的。

```
+-------------+-------+
| type        | COUNT |
+-------------+-------+
| A           |     1 |
| B           |     5 |
| C           |     9 |
| D           |     0 |
+-------------+-------+ 
```

询问：

```
select type , COUNT from TABLE order by FIELD(type,'A','B','C','D') ; 
```

如果该列`type`具有 'A,B,C,D' 的值，则它工作正常。在某些情况下，`FIELD('A','B','C','D')`某些列的顺序在 table 中可能没有值。在这种情况下，我想为它输入 0 并构造一个 result 。

D 不在表中。所以把'0'给它。

**显示创建表输出**

```
CREATE TABLE `Summary` (
  `TIMESTAMP` bigint(20) NOT NULL DEFAULT '0',
  `type` varchar(50) NOT NULL DEFAULT '',
  `COUNT` bigint(19) NOT NULL,
  PRIMARY KEY (`TIMESTAMP`,`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T12:08:51.093

怎么样：

```
select a.col as type,coalesce (`COUNT`,0) as `count`
from 
(select 'A' as col union all
select 'B' as col union all
select 'C' as col union all
select 'D' as col )a
left join Table1 T
on a.col=T.type
order by FIELD(a.col,'A','B','C','D') ; 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!2/fa2a0/9)

# java - 将对象列表从动作传递到渲染阶段

> ID：13416157
> 
> 赞同：3
> 
> 时间：2012-11-16T11:58:05.527
> 
> 标签：java, spring, portlet

我正在为 portlet 使用 spring MVC，但我发现了一个问题。

我需要将一个对象列表从动作阶段传递到渲染阶段。我尝试使用 setRenderParameter，如下所示：

```
actionresponse.setRenderParameter(String string, String[] strings);
actionresponse.setRenderParameter("myList",myList.toString()); 
```

这里我们有两种方法：

```
@RequestMapping(params = ACTION_MYACTION)
public final void doAction(MyBean search, Errors errors, ActionRequest actionrequest, ActionResponse actionresponse) {
    String processName = UtilLog.getProcessName(CLASS_NAME, "doAction");
    successMessage.clear();
    justlist = null;

    validateBean(consulta, errors);

    if (!errors.hasErrors()) {
        try {

            mylist = myBpelImpl.getList(search);
    actionresponse.setRenderParameter("myList",myList.toString());

        } catch (Exception ex) {
            LOG.error(processName, ex);
            processError(actionrequest, null, ex);
        }
    }

    informSuccessMessage(actionrequest, errors, status);

}

@RequestMapping(params = ACTION_MYACTION)
public final String doRender(@ModelAttribute(value = "myBean") MyBean search, Errors errors, RenderRequest renderrequest) {

List<otherBean> mylist =   renderrequest.getParameter("myList");

    renderrequest.setAttribute(ServletContextKeys.SC_JUSTIFICANTE_LIST, myList);

    return ServletContextKeys.SC_CONSULTA_JUSTIFICANTES;

} 
```

但这不起作用，因为在渲染阶段，它无法将字符串转换为我的对象列表。我怎么能这样做..？

起初，我在类级别使用私有 List mylist，但据我所知，控制器是单例模式，所以我们不能使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T13:35:21.383

将 ActionRequest 请求对象添加到您的方法签名中，如下所示，并将对象添加为属性

```
@ActionMapping(params = "doAction=searchDeviceResults")
public void searchResults(@ModelAttribute(value = "searchForm") SearchForm searchForm,
                          BindingResult bindingResult, 
                          ActionRequest request, 
                          ActionResponse response, 
                          SessionStatus sessionStatus) {

    searchFormValidator.validate(searchForm, bindingResult);

    if (!bindingResult.hasErrors()) {
        response.setRenderParameter("doAction", "showDeviceResults");
        sessionStatus.setComplete();    
        List<AccountDetail> accList = accountService.getAccountDetail(adp);
        request.setAttribute("accountList", accList); // here we go
    }

} 
```

另一件重要的事情是在*portlet.xml*中添加下面的配置标记，因此无需获取并再次放入 render 方法，您的请求属性将在*JSP*上可用。

```
<container-runtime-option>
    <name>javax.portlet.actionScopedRequestAttributes</name>
    <value>true</value>
</container-runtime-option>
<container-runtime-option>
    <name>javax.portlet.renderHeaders</name>
    <value>true</value>
</container-runtime-option>
<container-runtime-option>
    <name>javax.portlet.escapeXml</name>
    <value>false</value>
</container-runtime-option> 
```

如果出现任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:44:50.677

您可以尝试使用 JSR 286 Action-scoped Request Attributes。请参阅[http://www.theserverside.com/news/1363818/JSR-286-Portlets-Action-scoped-Request-Attributes](http://www.theserverside.com/news/1363818/JSR-286-Portlets-Action-scoped-Request-Attributes)。

此外，它可能是一个错字，但注释你的 doAction`@ActionMapping(params = ACTION_MYACTION)`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-19T13:19:58.017

我找到了答案！

我需要使用

```
PortletUtils.setSessionAttribute(actionrequest, "mylist", mylist); 
```

而不是 actionresponse.setRenderParameter。

有用！

# php - 拆分/分解一个长的 HTML 文件？我使用 PHP 包含吗？

> ID：13416158
> 
> 赞同：0
> 
> 时间：2012-11-16T11:58:06.820
> 
> 标签：php, html

分解长 HTML 文件的约定是什么？

我目前正在使用`<?php include("storage"); ?>`并将所有代码放在一个名为“storage”的文件中，并删除了扩展名，因此我网站的访问者无法访问它。这可能是不对的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:07:49.360

我不会说分解一个长 HTML 文件本身就足够传统，足以保证如何做到这一点的约定。对最终用户没有好处，相同大小的 HTML 块必须在单个请求中传递。

这只是为了您在开发时的方便吗？在这种情况下，我更喜欢在部署文件之前组合文件的构建脚本，而不是必须在服务器端为每个请求组合它们。

但是，如果文件太大以至于您无法有效地处理它，您可能应该考虑是否要在每次请求时将其发送给用户。

正如其他人所指出的那样，删除文件扩展名以保护它们不被用户访问并没有什么特别的，除非您明确配置您的服务器来执行此操作。

# eclipse - 如何在条目上而不是在 JFace ComboViewer 中的组合上添加工具提示

> ID：13416164
> 
> 赞同：3
> 
> 时间：2012-11-16T11:58:18.933
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, jface

我正在加载我`ComboViewer`的一千多个元素。

有些元素比底层的宽度长`combo`。

我想在条目上添加工具提示，而不是在`combo`.

我希望这样，当列表下拉并且用户将鼠标指针放在其中一个值上时，整个文本应该可以通过`tooltip`类似于`tooltip`a 所示的方式显示`JFace TableViewer`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:17:22.507

如果您正在使用 a`ComboViewer`并且您提供自己的`CCombo`实例，则可以获得 CCombo 的子项，其中一个应该是`List`显示为下拉菜单的控件。您可以将您的添加`MouseTrackListener`到此`List`控件并根据鼠标悬停的项目显示工具提示。

# tsql - 使用 Xquery 中的属性值从 XML 节点分组中检索数据

> ID：13416165
> 
> 赞同：0
> 
> 时间：2012-11-16T11:58:20.400
> 
> 标签：tsql, sql-server-2005, xquery-sql

我有类似的 XML 数据

```
<Answers>
<AnswerSet>
    <Answer questionId="Name" IncludeInGroup="false">ds</Answer>
    <Answer questionId="Email" IncludeInGroup="false">sds</Answer>
    <Answer questionId="Password" IncludeInGroup="false">QqH4x4jhNCs=</Answer>
    <Answer questionId="GUID" IncludeInGroup="false">dsdsd</Answer>
    <Answer questionId="RegistrationIDInfo" IncludeInGroup="false">sdsd</Answer>
    <Answer questionId="Login" type="list" IncludeInGroup="false" value="1" color="blue">Enabled</Answer>
    <Answer questionId="FriendList" IncludeInGroup="false" RegionName="Friends" RepeatRegion="0">ds</Answer>   
    <Answer questionId="testDropdown" type="list" selectedValue="2" IncludeInGroup="false" TP="1" TP1="2">item2</Answer>
    <Answer questionId="testRadio" type="list" IncludeInGroup="false" value="3" color="222" test="123" a="1" a1="22">item234</Answer>
    <Answer questionId="TestCheckbox" type="list" value="Item1" RepeatRegion="0" IncludeInGroup="false">Item1</Answer>
    <Answer questionId="TestCheckbox" type="list" value="Item3" RepeatRegion="0" IncludeInGroup="false">Item3</Answer>
    <Answer questionId="TestCheckbox" type="list" value="Item1" RepeatRegion="1" IncludeInGroup="false">Item1</Answer>
    <Answer questionId="TestCheckbox" type="list" value="Item2" RepeatRegion="1" IncludeInGroup="false">Item2</Answer>
</AnswerSet> 
```

需要通过repeatregion属性分组获取questionid="TestCheckbox"的数据

# 输出

项目 1，项目 3|项目 1，项目 2

我已尝试使用以下查询，但它返回 Item1|Item3|Item1|Item2

将 @Content 声明为 XML 设置 @Content='Above XML...' 将 @Field 声明为 varchar(100) 设置 @Field='TestCheckbox' SELECT ISNULL( STUFF( (select '|' + T.answers.value('. ', 'VARCHAR(max)') FROM @Content.nodes('Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")]') AS T(answers) for xml path('')) , 1, 1, '') ,'')

请指导我获得以上输出。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:24:30.837

尝试这个

```
;with cte as
(
select 
t.Answers.value('@RepeatRegion', 'int') region,
T.answers.value('.', 'VARCHAR(max)') value
FROM @Content.nodes('Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")]') AS T(answers) 
) 

select
    STUFF ((
        select '|' + v.results
        from
        (       
        SELECT distinct 
        top 100 percent
            region,
            stuff(
            (
                select cast(',' as varchar(max)) + c1.value
            from cte c1
            WHERE c1.region = cte.region
            for xml path('')
            ), 1, 1, '') AS results
        FROM
            cte
        order by cte.region

        ) v
        for xml path('')
    ),1,1,'') 
```

# ios - 即使有人删除了ipa，有没有办法保存应用程序数据？

> ID：13416167
> 
> 赞同：0
> 
> 时间：2012-11-16T11:58:29.360
> 
> 标签：ios, sqlite, core-data, plist, nsuserdefaults

我正在开发一个电子书阅读器应用程序。在这里，如果用户下载任何书而不是我需要将该书保存在应用程序目录之外。

目前我保存在应用程序目录中。这就是为什么在用新的 ipa 更新应用程序后，下载的数据也被删除了。

Android 中是否有（iOS）类似内容提供者的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:05:12.473

首先，更新应用程序后，文档目录的内容会保留在那里，不会被删除。如果您从设备中删除现有应用程序并安装新应用程序，就会发生这种情况。在实际应用中升级新版本时，不会丢失当前在应用程序文档目录中的任何数据。

其次，如果您不希望在任何一种情况下丢失任何数据，我建议您实施 iCloud。在那里，您可以同步您想要在应用程序后期获取的数据。

祝你好运！！

# graphics - 高分辨率的图标和文本大小

> ID：13416169
> 
> 赞同：0
> 
> 时间：2012-11-16T11:58:34.033
> 
> 标签：graphics, screen-resolution, high-resolution

我知道我可以轻松检查物理 DPI，但我不知道这是否值得痛苦..

我正在编写一个使用 32x32 图标的应用程序，这些图标右侧有 2 行文本（两行都垂直适合 32 像素图标高度）。在 1680x1050 时，文本清晰可见，但我想知道它在 2560x1600 时的可见度。

我强制字体为 16 像素高，不考虑任何操作系统偏好。我假设运行 2560x1600 的人不会在 17" 上这样做，因此监控 DPI 不是问题。

问题是：我是否可以假设在支持该分辨率的显示器上以 2560x1600 的分辨率可以读取 16 像素高的文本？（27 英寸或更高）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:06:22.533

假设您的文本确实是像素图形，并且在更高 DPI 显示器上会显得更小（一些 UI 技术/操作系统/API 会自动为您缩放文本甚至整个 UI 在更高 DPI 显示器上，所以它会显示在相同大小但更清晰），您不能安全地假设它是可读的。

像素的实际大小以及因此文本取决于：

*   操作系统的 DPI 设置
*   显示器的实际 DPI

**评论后更新：**

例如，在视网膜 MacBook Pro（具有 220 PPI）上，高度为 16 像素的 a 将[小于 2 毫米。](http://www.wolframalpha.com/input/?i=16%20pixel%20at%20220%20ppi%20in%20mm)在具有 iPhone (326 PPI) 的 PPI 的屏幕上，[它将接近 1 mm](http://www.wolframalpha.com/input/?i=16%20pixel%20at%20326%20PPI%20in%20mm)。所以这是否可读取决于观看者的眼睛、显示器的质量（即使是高 PPI 显示器的清晰度也会有所不同），并且取决于您离屏幕的距离。

**更新 2：**

像素是否被缩放（因此与屏幕像素不同）取决于操作系统和用于呈现文本的 UI 技术/API。它不*取决于*屏幕是否是“视网膜”显示器。在任何主流操作系统上，都有直接控制屏幕像素的方法。

如果目标设备上的像素与屏幕上的像素相同，您可以轻松计算得到的 16 个像素的物理大小，因此可读性取决于：

*   16 像素的物理大小（您可以轻松计算，如上面的两个链接所示）
*   显示器的质量（即使是高 PPI 显示器的清晰度也会有所不同）
*   你离屏幕有多近
*   你的眼睛有多好

如果在目标设备上像素被操作系统或任何其他将像素带到屏幕上的层缩放，可读性还取决于

*   您的像素如何缩放并映射到设备的物理像素（比例因子、插值算法、加法过滤等）

所以现在应该是一个相当安全的赌注，除非你知道你的目标受众及其设备，否则你真的不能依赖这些小文本的可读性。

# php - htaccess 2 mod_rewrite

> ID：13416170
> 
> 赞同：1
> 
> 时间：2012-11-16T11:58:43.173
> 
> 标签：php, .htaccess, url, xampp

我是 .htaccess 的初学者，有人可以帮我吗？

//我的 .htaccess 代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /alumini/profile.php?username=$1 
```

//通过上面我可以重定向url

**localhost/alumini/profile.php?username=name**

至

**本地主机/铝/名称**

但我也想隐藏**loacalhost/alumini/index.php**到**loacalhost/alumini**

> 简单地说……
> 
> 我想要一个 htaccess 代码来隐藏索引页面，我还需要转换
> 
> **localhost/alumini/profile.php?username=name**
> 
> 至
> 
> **本地主机/铝/名称**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:01:59.027

您的第一个请求是重写，而不是重定向。你的第二个是重定向。对于重写，以下规则应该可以解决问题（未经测试）：

```
RewriteRule ^localhost/alumini/([a-zA-Z]+)$ /alumini/profile.php?username=$1 
```

括号内的正则表达式匹配一个或多个大写或小写字母，不匹配其他任何内容，匹配的值传递给 $1。您可能需要根据用户名的格式更改正则表达式。

和 index.php 重定向（删除它存在的 index.php）：

```
Redirect 301 /alumini/index.php http://localhost/alumini 
```

301 代表页面已永久移动的事实，并且对于 SEO 更好，因为只有非 index.php 页面将被编入索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:20:35.870

```
RewriteRule ^localhost/alumini/([a-zA-Z0-9]+)$ /alumini/profile.php?username=$1
RewriteRule ^localhost/alumini$ /alumini/index.php 
```

# linux - 如何在 Wordpress 中列出自定义文件夹中的文件？

> ID：13416177
> 
> 赞同：2
> 
> 时间：2012-11-16T11:59:14.163
> 
> 标签：linux, wordpress, file, ubuntu

我是 Wordpress 的新手，需要一些帮助。

我想要做的是我已经创建了一个 Wordpress 帐户，现在我想在该博客中创建一个部分，其中包含我上传到我的计算机上特定文件夹的所有文件。因此，每当我在那里更改任何文件时，它都会自动更改那里。这可能吗？

还有一种方法可以仅将我的 wordpress 网站的读取权限授予具有用户名和密码的人吗？

我正在使用 Linux Ubuntu 12.04

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:27:38.890

我们开始吧，以插件的形式 :)

![wordpress中的自定义文件夹文件列表](../Images/6f88ca54b0b90fce655fbcb661c891ba.png)

## 笔记

*   媒体子菜单增加了功能[`add_media_page()`](http://codex.wordpress.org/Function_Reference/add_media_page)。

*   正在读取的文件夹是`wp-content/custom/`使用[WordPress 常量](http://codex.wordpress.org/Editing_wp-config.php#WordPress_address_.28URL.29) `WP_CONTENT_*`。如果您没有修改它们，它们会指向默认的内容目录。

*   调整 和 的`$baseDir`值`$baseUrl`。

*   也许，您不想直接链接到文件，而是要[强制下载](https://stackoverflow.com/search?q=%5Bphp%5D%20force%20download)或打开[媒体播放器](https://stackoverflow.com/search?q=%5Bphp%5Dfiletype%20media%20player)。

*   创建一个新的PHP文件，粘贴代码，放入你的插件文件夹，激活

## 插入

```
<?php
/*
Plugin Name: List Files in Custom Folder
Plugin URI: https://stackoverflow.com/q/13416177/1287812
Description: Add a Media page where the contents of a custom folder are listed as "<a>Filename</a> - Size"
Author: Rodolfo Buaiz
Author URI: http://wordpress.stackexchange.com/users/12615/brasofilo
Version: 1.0
License: GPL
*/
add_action( 'admin_menu', 'so_13416177_folder_menu' );

function so_13416177_folder_menu() 
{
    add_media_page( 
        'Custom Folder Media', 
        'Custom Folder', 
        'delete_plugins', 
        'so-13416177', 
        'so_13416177_display_page' 
    );
}

function so_13416177_display_page() 
{
    $baseDir = WP_CONTENT_DIR . '/custom';
    $baseUrl = WP_CONTENT_URL . '/custom/';
    $files = array();

    if ( $dir = opendir( $baseDir ) ) 
    {
        while ( $file = readdir( $dir ) ) 
        {
            if ( $file != "." && $file != '..' ) 
            {
                if ( !is_dir( $baseDir . "/" . $file ) ) 
                {
                    // Hide files that start with a dot
                    if( !so_834303_starts_with( $file, '.' ) ) 
                    {
                        $size = so_13416177_file_size( 
                            filesize( $baseDir . "/" . $file ) 
                            );
                        $files[] = array( $file, $size );
                    }
                }
            }
        }       
        closedir($dir);     
    }

    ?><div id="icon-upload" class="icon32"></div><h2>Custom Folder</h2><?php

    if ( empty( $files ) ) 
    {
        echo '<p>No files!</p>';
        break;
    }
    ?>              
    <table class="widefat">
        <thead>
            <tr>
                <th>File</th>
                <th>Size</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>File</th>
                <th>Size</th>
            </tr>
        </tfoot>
        <tbody>
    <?php
    foreach ($files as $file) 
    {
        ?>
           <tr>
              <td>
                <a href="<?php echo $baseUrl.$file[0]; ?>">
                <?php echo $file[0]; ?>
                </a>
             </td>
             <td><b><?php echo $file[1]; ?></b></td>
           </tr>
        <?php
    }
    ?>
        </tbody>
    </table>
    <?php
}

// https://stackoverflow.com/q/834303
function so_834303_starts_with( $haystack, $needle )
{
    return !strncmp( $haystack, $needle, strlen( $needle ) );
}

// http://www.php.net/manual/en/function.filesize.php#110739
function so_13416177_file_size( $o, $depth=0 ) 
{
    if( $o > 1024 ) 
        return so_13416177_file_size( $o/1024, $depth+1 );

    $unit = array( 'B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'PB', 'ZB', 'YB' );
    return sprintf( '%.01f %s', $o, $unit[$depth] );
} 
```

* * *

## PS。

要为用户提供只读权限，请将其角色设置为[`Subscriber`](http://codex.wordpress.org/Roles_and_Capabilities#Subscriber)。

# jquery - 银行账户的动态键盘捕获

> ID：13416179
> 
> 赞同：0
> 
> 时间：2012-11-16T11:59:18.877
> 
> 标签：jquery

我想创建一个用于捕获输入框并以银行格式编写的 jquery。我是说：

西班牙银行格式如下：

**0000 - 0000 - 00 - 0000000000**

4位数，4位数，2位数，最后10位数。

我想创建或找到一个 jquery，当您介绍数字时，它会在您的键盘上输入数字时动态放置**- 。**

有人知道这样做的任何 jquery 吗？

# database - 如何将查询的输出获取到 oracle 中的 csv 文件或通过其他方式

> ID：13416180
> 
> 赞同：0
> 
> 时间：2012-11-16T11:59:19.170
> 
> 标签：database, output

我写了一个plsql脚本。该脚本根据某些标准从多个表中获取数据，并将数据格式化为逗号分隔格式。现在，就行数和行大小而言，获取的数据非常庞大。我想要 csv 文件中的数据。我试过做以下事情：

1.  使用带有 DBMS_OUTPUT.PUT_LINE 的假脱机。DBMS_OUTPUT.ENABLE 的限制只有 20000 个字节，所以我的记录出现在假脱机文件的一半。
2.  使用 utl_file 我可以在 csv 文件中获取它，但问题是我的数据库驻留在其他机器上（物理上），而我的应用程序驻留在其他机器上。所以当我触发 plsql 脚本时，它会在数据库机器上创建该文件。utl_file 也需要在数据库机器上创建目录对象，这很快就会成为我的安全问题。

无论如何，我可以将 plsql 脚本的输出通过管道传输到位于我的应用程序机器上（而不是我的数据库机器上）的文件中。您还可以建议使用其他一些编程语言的解决方案，例如 java 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:25:19.333

你有几个选择：

1.  dbms_output.enable 有一个可选参数——缓冲区大小。默认为 20,000，最大允许为 1,000,000 (Oracle 9i - 11g)。 `dbms_output.enable(1000000);`

    *   [dbms_output：Oracle 9i](http://docs.oracle.com/cd/B10501_01/appdev.920/a96612/d_outpu2.htm#1000431)
    *   [dbms_output：Oracle 10g](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm#i999293)
    *   [dbms_output：Oracle 11g](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm#i999293)
2.  如果空间不够，那么您可能需要运行 PL/SQL 块以一次只输出所需输出的一部分。
3.  您可以将您的 PL/SQL 块重写为 SQL 查询吗？然后，如果您使用的是 sqlplus，则可以运行此命令以使输出以逗号分隔：

    `set colsep ","`

...然后使用假脱机并执行您的查询。

# java - 自动化脚本：是否可以在屏幕上找到特定的文本？

> ID：13416182
> 
> 赞同：4
> 
> 时间：2012-11-16T11:59:26.043
> 
> 标签：java, testing, automation, screenshot

我正在使用 T-Plan Robot 创建自动化脚本，这是一个基于 Java 的工具，可以登录到 SUT 机器。

目前，我处理鼠标光标应单击的位置的方式是使用“waittomatch”或“compareto”方法使用位置的迷你屏幕截图。

例子：

```
compareTo(new File[] { new File("C:\\Users\\User\\Google Drive\\Testing\\Automation\\Robot\\ImageTemplates\\LabelFirstName.png") }, "search2");
      if (getContext().getExitCode() > 0) {
          exit(1);
      } else {
mouseClick(new Point(getVariableAsInt("_COMPARETO_CLICK_X"), getVariableAsInt("_COMPARETO_CLICK_Y")));
      } 
```

但是，所有这些匹配都是我所期望的元素。字段标签不会经常更改并且保持不变，因此脚本总是可以找到它们。

我现在面临的问题是我希望在保存后在屏幕上找到特定的申请人记录。它有一个不断变化的名称，而不是一个固定的名称，所以这不是一个简单的截图并匹配它的案例。例如，它在末尾添加日期和时间：

```
type("PrimaryApplicant_" + getVariableAsString("_CURDATE"), "100"); 
```

有没有办法将鼠标光标移动到这个确切的文本上？

也许一种将这些信息存储为字符串然后将其与当时屏幕上的内容相匹配的方法？这是怎么做到的？

希望这是有道理的。不演示就很难解释！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:54:05.400

如果标签标识符始终是“PrimaryApplicant_ddmmyyyy”，那么您应该能够使用一些忽略日期的正则表达式来获取标签，除非我误解了问题？（我会将此作为评论而不是答案，但我认为我还没有足够的声誉......）

# qt - Qt 样式表，如何设置 QPalette::Link 和 QPlatte::LinkVisited 的颜色

> ID：13416183
> 
> 赞同：6
> 
> 时间：2012-11-16T11:59:33.413
> 
> 标签：qt, hyperlink, stylesheet, qtstylesheets

我使用了一个库，它使用 QPalette::Link 和 QPalette::LinkVisited 的颜色作为小部件的背景和边框颜色。我想用样式表改变这些颜色。如何在样式表的帮助下设置 Link 和 LinkVisited 的颜色？

我读过，qt 不支持链接的 LinkVisited 选项。但在我的情况下，这两种颜色都不是用于链接，而是用于小部件的某些部分。

我想使用样式表而不是设置 QPalette 的颜色。但似乎不可能用样式表设置颜色。这是真的吗？

我想为小部件设置颜色。我可以使用这段代码：
`QPalette p;`
`p.setColor(QPalette::Link, QColor(0,255,0));`
`p.setColor(QPalette::LinkVisited, QColor(0, 255, 0));`
`pWidget->setPalette(p);`

但我想对样式表做同样的事情。例如这样的：
`QWidget { link-color: green; link-visited-color: green;}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T22:08:28.183

和你一样，我找不到使用样式表或 QPalette 的正确方法。

但是为了我控制颜色的需要，我使用了这个方法，在`<span>`里面设置`<a>`来控制颜色。

```
QLabel().setText('<a href="..link"><span style="color:white;">something</span>') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-03T13:20:01.600

这是设置它的错误位置。链接是文档的一部分，而不是浏览器的一部分，QWidgets 或多或少是浏览器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T14:42:04.680

您可以按如下方式设置小部件的`background-color`&属性，忘记：`color``QPallette`

```
QWidget#yourWidgetName
{
  background-color: #ccc;
  color: #1c1c1c;
} 
```

阅读[文档](http://doc.qt.digia.com/qt/stylesheet-examples.html)AZ，它拥有处理 QT 样式表时需要的所有智慧

但是，在样式表级别设置`link-color`&`link-visited-color`是不可能的。

# c# - 带有证书的 SSL 在 Java 中工作但在 C# 中不工作

> ID：13416184
> 
> 赞同：2
> 
> 时间：2012-11-16T11:59:34.907
> 
> 标签：c#, java, ssl, certificate

我必须调用需要 SSL 和客户端身份验证的服务。我有一个 p12 客户端证书（私有和公共）和一个公共远程服务器证书。

Java 客户端：远程证书在 jks 中，服务工作正常。

c#：我尝试使用相同的 p12 进行身份验证并将 pem（使用 keytool 从 jks 导出）加载到 LocalComputer Personal 文件夹中，但出现异常：

```
 The remote certificate is invalid according to the validation procedure. 
```

我查看了服务器证书的详细信息，发现无法完成上链；我认为是因为证书颁发者的范围不包含签名权。

如果这是正确的，为什么 java 正在工作？
如果这不正确，为什么 C# 不起作用？
如何强制 C# 将来自服务器的证书视为有效？
在 Windows 中，我是否必须始终通过证书管理单元和 LocalComputer 等，或者我可以将信任嵌入到我的客户端应用程序中？

**更新：**

我更改了标题并删除了*web-services*标签，因为它不是特定于 web-service 的问题，而是 SSL；所以：
**标题是**：WS 调用，客户端证书在 Java 中工作，但不在 C# 中
**标题现在**：SSL，证书在 Java 中工作，但不在 C# 中

现在我已经通过调用 java 应用程序让我的 C# 系统工作了，但我不太喜欢它。
我在不同环境下使用同一系统上的相同证书集测试了应用程序，并声明违反信任链不允许我的 c# 客户端通过 SSL 连接，但 java 忽略它。

所以我的最后一个问题是：java 在建立 SSL 连接时是否会忽略整个信任链的完整性？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T13:17:19.290

通常会发生，因为以下任一情况为真：

*   该证书是自签名的，而不是作为可信证书添加的。
*   证书已过期。
*   该证书由您的计算机上未安装的根证书签名。
*   已探查吊销列表，但无法找到/使​​用。

尝试获取有关服务器证书的一些信息，并查看是否需要在客户端上安装任何特定证书才能使其正常工作。

# delphi - Delphi，我的嗅探器无法在 WLAN 上工作

> ID：13416187
> 
> 赞同：0
> 
> 时间：2012-11-16T12:00:01.217
> 
> 标签：delphi, sockets, network-programming, winsock, packet-sniffers

我有一个工作嗅探器程序，用 Delphi 编写。它在局域网中很好。但是当我的计算机在 WLAN 上时，它不会记录任何内容。初始化：

```
 if (WSAStartup(MAKEWORD(2,2), Wsa) <> 0) then ErrorMsg ('WSAStartup');

 //Create a RAW Socket
 sniffer:= socket(AF_INET, SOCK_RAW, IPPROTO_IP);
 if (sniffer = INVALID_SOCKET) then ErrorMsg ('Socket');

 //Retrive the local hostname
 getmem (hostname, 100);
 if (gethostname(hostname, 100) = SOCKET_ERROR) then ErrorMsg ('Gethostname');

 //Retrive the available IPs of the local host
 local:= gethostbyname(hostname);
 if (local = nil) then ErrorMsg ('Gethostbyname');
 i:= 0;
 repeat
  i:= i + 1;
  Move (local^.h_addr^[i-1], Addr, sizeof(Tinaddr));
 until (local^.h_addr^[i-1] <> #0);

 Players.MyIP:= inet_ntoa(Addr);
 if Players.MyIP = '0.0.0.0' then
        begin
         Showmessage ('No IP!?'); halt;
        end;
 _in:= 0;
 FillChar (Dest, SizeOf(Dest), 0);
 Move (local^.h_addr^[_in], dest.sin_addr.s_addr, sizeof(dest.sin_addr.s_addr));
 dest.sin_family:= AF_INET;
 dest.sin_port  := 0;

 if (bind(sniffer, @dest, sizeof(dest))) = SOCKET_ERROR then ErrorMsg ('Bind');

 j:= 1;
 if (WSAIoctl(sniffer, SIO_RCVALL, @j,4, nil, 0, LPDWORD(@_in),nil, nil)) = SOCKET_ERROR then ErrorMsg ('WSAIoctl'); 
```

捕获线程

```
 while not Terminated do
 begin
  mangobyte:= recvfrom (sniffer,Buffer^,65536,0,nil,nil); //Eat as much as u can
  if (mangobyte > 0) then
  begin
   adsasdasd
  end 
```

所以它不会记录任何东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:09:30.227

我想WLAN是指WiFi。以太网 (LAN) 数据包采用 802.3 格式，WiFi 数据包采用 802.11 格式。我不确定您的嗅探器到底在做什么，但是解析 802.3 帧与解析 802.11 帧不同。Windows XP 和更早的版本不支持原生 WiFi，因此驱动程序必须使用 802.3 标头包装无线数据包以模拟以太网 (LAN) 数据包。从 Vista 开始，不需要包装，操作系统直接处理 802.11 帧。除非您使用 WinXP 或更早版本，否则您需要对无线帧进行不同的解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:55:53.703

您正在绑定到第一个可用的本地 IP（顺便说一句，不要`gethostbyname()`用于枚举本地 IP，因为不能保证返回正确的值。请改用[GetAdaptersInfo()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917.aspx)或[GetAdaptersAddresses()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915.aspx)）。如果机器安装了多个 IP，您可能绑定到了错误的 IP。在这种情况下，您应该让用户选择要绑定的 IP。

# c# - 使用字符串创建方法。C＃

> ID：13416188
> 
> 赞同：0
> 
> 时间：2012-11-16T12:00:01.553
> 
> 标签：c#, string, methods

我试图创建一种方法，该方法将在 MessageBox 中生成标题为“The Title”的“Adam”。此代码不起作用。这是因为 return 只能返回一个值，例如字符串名称吗？如果我删除标题选项，它工作正常。任何想法都会很棒。

```
 private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(myMethod("Adam", "The Title"));
    }
    string myMethod(string name, string title)
    {
        return name, title;             
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:01:45.213

试试这个：

```
 private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(myMethod("Adam", "The Title"));
    }
    string myMethod(string name, string title)
    {
        return name + " " + title;             
    } 
```

**编辑：在 texbox 上显示“标题”**

```
 private void button1_Click(object sender, EventArgs e)
        {
           myMethod("Adam", "The Title");
        }
        void myMethod(string name, string title)
        {
             MessageBox.Show(name,title);       
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:33:58.547

一个方法只能返回一个值。返回的值可以是复杂类型，因此您可以通过创建自己的数据类型（或使用内置类型）返回多个字符串：

```
class Message
{
   public string Title {get; set;}
   public string Message {get; set;}
} 
```

使用这个你可以做到

```
private void button1_Click(object sender, EventArgs e)
{
    var message = MyMethod("Title", "Message");
    MessageBox.Show(message.Title, message.Message);
}

Message myMethod(string name, string title)
{
    return new Message{Title = title, Message = name};             
} 
```

鉴于这种情况，这是毫无意义的，但`myMethod`可以对参数进行查找或操作，以生成返回的消息。

另一种方法是，正如这里已经讨论过的，让`myMethod`处理消息框的显示。

```
private void button1_Click(object sender, EventArgs e)
{
    myMethod("Adam", "The Title");
}
void myMethod(string name, string title)
{
    MessageBox.Show(name,title);       
} 
```

# java - 使用 Snmp4j 进行网络发现

> ID：13416190
> 
> 赞同：2
> 
> 时间：2012-11-16T12:00:05.420
> 
> 标签：java, networking, snmp, snmp4j, autodiscovery

我需要用 Snmp4j 实现网络发现机制。我试图找到有关此机制的示例，但找不到有效的示例。是否有任何 java 示例/教程来管理 IP 地址范围并进行发现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:23:25.000

[Nmap](http://nmap.org)呢？

```
nmap x.x.x.x/x -sU -p U:161 
```

上面的命令将返回网络中所有具有 SNMP 服务侦听的计算机。Nmap 还具有 XML 输出（-oX 文件名.xml），可以使用 Java 或任何其他语言轻松解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:18:40.303

你的问题需要更具体一点。

*   您想了解 snmp4j 吗？如果是这样，您在[网站](http://www.snmp4j.org/)上缺少什么？
*   您的意思是问有关在 Java 中管理 IP 地址的问题吗？然后去[源头](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)。
*   是您担心的端口扫描部分吗？然后就是您所追求的[All About Sockets 。](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

我的猜测是你应该编写这样的代码

1.  找出它所在的网络类型（例如 192.168.1.0/24）
2.  端口扫描该网络，寻找侦听 161/UDP 的 IP。
3.  使用 snmp4j 查询这些 IP。

很简单，嗯:-)

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T19:55:58.143

看看[netTransformer](https://github.com/iTransformers/netTransformer)确保它可以满足您的需求。通常，您应该始终有一个起始 IP 地址和一种描述 SNMP 连接详细信息的方法，以匹配您网络中的潜在设备。然后通过 SNMP 可以查询各种 SNMP 表，从而有各种发现方法。最简单的一种是查询 ARP 表、ip 路由表（下一跳是确定的邻居），还有许多其他的，包括通过 SNMP 公开的几乎任何路由甚至面向会话的协议。

# scala - 按名称类型参数

> ID：13416192
> 
> 赞同：5
> 
> 时间：2012-11-16T12:00:13.250
> 
> 标签：scala, pass-by-name

想象一下，我有以下类定义：

```
class Foo[T] 
```

我想做以下事情

```
def bar(x:Foo[ =>Int ]):Int = ??? 
```

但编译器因“此处不允许使用名称参数类型”而失败

如何使用按名称类型作为泛型方法的类型参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T12:06:15.463

您必须提供自己的惰性包装器。像这样的东西：

```
class Lazy[T](wrp: => T) {
  lazy val value: T = wrp
} 
```

进而：

```
def bar(x: Foo[Lazy[T]]): Int = ??? 
```

# c# - 如何在 C# 中发现 onvif 设备

> ID：13416193
> 
> 赞同：12
> 
> 时间：2012-11-16T12:00:14.077
> 
> 标签：c#, wcf, ip-camera, onvif, ws-discovery

我正在开发一个应用程序，它将探测连接在网络上的 ONVIF 设备以进行自动发现。根据 ONVIF Core 规范，探测消息的 SOAP 格式为：

```
 <?xml version="1.0" encoding="UTF-8"?>
<e:Envelope xmlns:e="http://www.w3.org/2003/05/soap-envelope"
xmlns:w="http://schemas.xmlsoap.org/ws/2004/08/addressing"
xmlns:d="http://schemas.xmlsoap.org/ws/2005/04/discovery"
xmlns:dn="http://www.onvif.org/ver10/network/wsdl">
<e:Header>
<w:MessageID>uuid:84ede3de-7dec-11d0-c360-f01234567890</w:MessageID>
<w:To e:mustUnderstand="true">urn:schemas-xmlsoap-org:ws:2005:04:discovery</w:To>
<w:Action
a:mustUnderstand="true">http://schemas.xmlsoap.org/ws/2005/04/discovery/Pr
obe</w:Action>
</e:Header>
<e:Body>
<d:Probe>
<d:Types>dn:NetworkVideoTransmitter</d:Types>
</d:Probe>
</e:Body>
</e:Envelope> 
```

如何在 WCF 中发送此消息以发现 onvif 设备？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T21:46:20.017

只需使用[WCF Web 服务发现](http://msdn.microsoft.com/en-us/library/dd456791.aspx)功能。ONVIF 遵循与 WCF 实施的标准相同的标准。您需要使用 DiscoveryClient 类来发送探测。

我已经有一段时间没有这样做了，所以它可能不完全正确，但您的代码应该如下所示。多播探测将找到所有可发现的设备。您可以通过检查事件处理程序中每个响应的元数据来检测您的 onvif 设备是否已响应。如果您仍然无法得到响应，则可能是网络或设备问题。如果您确实收到了回复，您可以细化您的查找条件以仅通知所需的类型。

```
class Program
{
    static void Main(string[] args)
    {
        var endPoint = new UdpDiscoveryEndpoint( DiscoveryVersion.WSDiscoveryApril2005 );

        var discoveryClient = new DiscoveryClient(endPoint);

        discoveryClient.FindProgressChanged += discoveryClient_FindProgressChanged;

        FindCriteria findCriteria = new FindCriteria();
        findCriteria.Duration = TimeSpan.MaxValue;
        findCriteria.MaxResults = int.MaxValue;
        // Edit: optionally specify contract type, ONVIF v1.0
        findCriteria.ContractTypeNames.Add(new XmlQualifiedName("NetworkVideoTransmitter",
            "http://www.onvif.org/ver10/network/wsdl"));

        discoveryClient.FindAsync(findCriteria);

        Console.ReadKey();
    }

    static void discoveryClient_FindProgressChanged(object sender, FindProgressChangedEventArgs e)
    {
        //Check endpoint metadata here for required types.

    }
} 
```

# android - 自定义ActionBar，保留平板上的菜单按钮

> ID：13416195
> 
> 赞同：0
> 
> 时间：2012-11-16T12:00:19.387
> 
> 标签：android, customization, android-actionbar

我想使用一个完全自定义的操作栏（带有我自己的文本、字体和背景），但在右侧我想保留出现在没有硬件菜单按钮的平板电脑和设备上的标准菜单图标（例如三星 Galaxy）。

基本上我想把这个用于平板电脑：

![片剂](../Images/b314a42c1e3a7c6c04ab5b4b5a7b3daa.png)

这适用于支持硬件菜单按钮的普通手机：

![电话](../Images/10aae9ac504c867b9528f38a2198a291.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:07:43.583

假设问题是“如何做到这一点？”，我会回答你应该使用风格。
请参阅此[页面](http://android-developers.blogspot.com.es/2011/04/customizing-action-bar.html)。

# java - 从休眠查询中获取通用对象

> ID：13416198
> 
> 赞同：4
> 
> 时间：2012-11-16T12:00:23.157
> 
> 标签：java, generics, jpa

如[http://www.javacodegeeks.com/2012/07/ultimate-jpa-queries-and-tips-list-part_7092.html](http://www.javacodegeeks.com/2012/07/ultimate-jpa-queries-and-tips-list-part_7092.html)中所述，您可以从 jpa 查询中获取对象。到现在为止还挺好。

但由于我必须经常使用它，所以我想使用泛型。所以而不是

```
Query query = em.createQuery('select new com.model.PersonDogAmountReport(p, size(p.dogs)) from Person p'); 
```

我想

```
Query query = em.createQuery('select new com.model.Report<Person, Long>(p, size(p.dogs)) from Person p'); 
```

或者

```
Query query = em.createQuery('select new com.model.Report<com.model.Person, java.lang.Long>(p, size(p.dogs)) from Person p'); 
```

. 尝试这样做会给我以下异常：

```
org.hibernate.hql.ast.QuerySyntaxException: expecting OPEN, found '<' near line 1 
```

这是否意味着，我想要的只是不支持？有没有好的选择？

*NamedNativeQuery*和*resultClass*几乎可以实现同样的事情，但这样我就不会将 Person 作为一个实体。

如果我改用对象，则无法转换返回的列表，这意味着我必须迭代 -> meh desu。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:06:17.260

无论如何，创建这样的报告实例并不安全，因为 Hibernate 使用反射来实例化和填充报告。所以你可以简单地做：

```
Query query = em.createQuery('select new com.model.Report(p, size(p.dogs)) from Person p');
return (List<Report<Person, Long>>) query.list(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:07:06.557

您需要记住的是，使用 Java 泛型类型擦除将删除所有泛型类型。这将使用适当的强制转换将 a`List<Person>`简化为简单的 a 。`List<Object>`在运行时没有`List<Person>`. 因此，在这种情况下，只需获得一个`List`并自己做演员表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:32:09.813

您可能会考虑使用一个简单的子类来绑定泛型类型。所以：

```
package com.model;

public class PersonLongReport extends Report<Person, Long> {
    public PersonLongReport(Person person, Long long) {
        super(person, long);
    }
} 
```

进而：

```
public List<? extends Report<Person, Long>> doQuery() {
    TypedQuery<PersonLongReport> query = em.createQuery('select new com.model.PersonLongReport(p, size(p.dogs)) from Person p', PersonLongReport.class);
    return query.getResultList();
} 
```

对于那个微不足道的子类的成本，你得到了类型安全。

# ruby - Zip（不是 gzip）Ruby HTTPResponse

> ID：13416201
> 
> 赞同：2
> 
> 时间：2012-11-16T12:00:34.110
> 
> 标签：ruby, zip, httpresponse

我正在使用以 zip 格式（不是 gzip）压缩的 XML 响应的 Web 服务。我知道 Ruby 会自动解压缩 gzip 格式的响应，但我正在使用的服务没有 gzip 格式。

这是我用来获取服务响应的代码：

```
require 'net/http'
require 'uri'
require 'nokogiri'

xml = Nokogiri::XML::Builder.new do |xml|
    xml.method {
        xml.param1 'value1'
        xml.param2 'value2'
    }
end

url = URI.parse('http://url.to.webservice/')
request = Net::HTTP::Post.new(url.path)
request.content_type = 'text/xml'
request.body = xml.to_xml

response = Net::HTTP.new(url.host, url.port).start { |http| http.request(request) }

case response
when Net::HTTPSuccess, Net::HTTPRedirection
    # Decompress Zip response
else
    puts "Request error."
end 
```

是否有使用 Ruby 解压缩 Zip 响应的内置方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:54:55.750

这个解决方案非常难看，因为它使用临时文件。但是我找不到更好的方法来处理 ruby​​ 中的 .zip 文件：-\ 确保安装 ruby​​zip gem w/`gem install rubyzip`然后将其要求为`require 'zip/zip'`

```
 t=Tempfile.new('1.xml.zip')
  File.open(t.path, 'w') do |f|
    f.write response.body
  end

  Zip::ZipFile.open(t.path) do |files|
    files.each do |file|
      puts Nokogiri::XML.parse(file.get_input_stream)
    end
  end
  t.delete 
```

将此代码代替您的评论；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:48:29.877

您应该能够使用 动态解压缩文件`zipruby`，如下所示：

```
require 'zipruby'

Zip::Archive.open_buffer(response.body) do |ar|
   ar.each do |zf|
      if zf.directory?
         FileUtils.mkdir_p(zf.name)
      else
         dirname = File.dirname(zf.name)
         FileUtils.mkdir_p(dirname) unless File.exist?(dirname)
         open(zf.name, 'wb') do |f|
            f << zf.read
         end
      end
   end
end 
```

这考虑到 Web 服务发送的 zip 文件可能包含多个文件的事实。如果该服务仅发送一个文件，您可以使用如下更简单的解决方案：

```
Zip::Archive.open_buffer(response.body) do |ar|
   ar.fopen(0) do |zf|
      open(zf.name, 'wb') do |f|
         f << zf.read
      end
   end
end 
```

# javascript - 你可以在 $.post() 中使用 $(this) 吗？

> ID：13416205
> 
> 赞同：1
> 
> 时间：2012-11-16T12:00:52.687
> 
> 标签：javascript, jquery, ajax, dom

我似乎无法从 $.post 部分中访问 $(this) 。它在外面工作得很好。这是javascript：

```
 $('.idea').each(function(){
        var title = $(this).html();
        $.post("votes.php", { title: title }, function(data){
            $(this).nextAll('.voteTotal').html(data);
        }, "json");
    }); 
```

HTML：

```
<h3 class="idea">Idea #1</h3>
<h4 class="voteTotal"></h4>
<p>This is a really cool idea.</p>
<a href="#" class="vote">Click to vote</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:01:31.863

`this`您应该在回调函数之前备份：

```
$(".idea").each(function() {
    var $this = $(this),
        title = $this.html();

    $.post("votes.php", { title: title }, function(data) {
        $this.nextAll(".voteTotal").html(data);
    }, "json");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:11:23.407

使用`context`设置，然后它会工作：

```
$('.idea').each(function(){
    var title = $(this).html();
    $.post("votes.php", { title: title, context: this }, function(data){
        $(this).nextAll('.voteTotal').html(data);
    }, "json");
}); 
```

# testing - 无法将 Mercury Test Director 8.0 sp2 连接到 Oracle 10

> ID：13416214
> 
> 赞同：1
> 
> 时间：2012-11-16T12:01:21.517
> 
> 标签：testing, oracle10g, hp-quality-center

我试图将 Mercury Test Director 8.0 sp2 连接到 Oracle 10g，但是我尝试的任何方式都失败了，我进行了大量研究并得出结论，TD 8 不支持 Oracle 10g。从以前的经验来看，总是有离开。当涉及到这一点时，我会建议我有点新手。

# android - 谷歌地图、Android 中的叠加层

> ID：13416217
> 
> 赞同：0
> 
> 时间：2012-11-16T12:01:40.843
> 
> 标签：android, google-maps

我有下一个问题：我想将叠加层放在 googleMaps 的 mapView 中。我从数据服务器加载坐标，然后将其转换为 intE6 类型。但是当我把GeoPoint放在地图上时，它出现在其他站点，我尝试放置其他点并且点之间的距离很好但是它们被移位到其他站点。我认为问题可能出在地图配置上，但我不知道在哪里，因为我检查了这些点的坐标并且很好，而且很久以前它与其他坐标一起工作。

感谢您的回复 ：）

我检查了一下，转换很好：

```
float latitude = (float) json_data.getDouble("latitude");
float longitude = (float) json_data.getDouble("longitude");

Log.d("POINT",(int)(latitude*1E6)+" "+ (int)((longitude*1E6)));

GeoPoint p = new GeoPoint((int)(latitude*1E6), (int)(longitude*1E6));

Log.d("POINT", ""+p.getLatitudeE6()+" "+p.getLongitudeE6()); 
```

已解决：我的错，它工作正常，我的代码中还有其他错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:56.163

已解决：我的错，它工作正常，我的代码中还有其他错误。

# xtk - 在 3D 中加载 xtk 中的 .nii 文件

> ID：13416219
> 
> 赞同：0
> 
> 时间：2012-11-16T12:01:48.517
> 
> 标签：xtk

与 DICOM 文件一样，是否可以有一个使用 XTK 显示 .nii 文件的简单示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:25:39.793

最简单的情况就是这样

[http://jsfiddle.net/p683A/1/](http://jsfiddle.net/p683A/1/)

```
// create and initialize a 3D renderer
var r = new X.renderer3D();
r.init();

// create a X.volume
var volume = new X.volume();
// .. and attach the single-file dicom in .NII format
// this works with gzip/gz/raw encoded NII files but XTK also supports other
// formats like MGH/MGZ, NRRD and DICOM
volume.file = 'http://x.babymri.org/?avf.nii';

r.add(volume);

r.render();
​ 
```

第 10 课展示了更高级的内容：http: [//lessons.goxtk.com/10/](http://lessons.goxtk.com/10/)

# c# - 单元测试 C# 保护方法

> ID：13416223
> 
> 赞同：82
> 
> 时间：2012-11-16T12:01:57.057
> 
> 标签：c#, .net, unit-testing, protected

我来自 Java EE 世界，但现在我正在从事一个 .Net 项目。在 Java 中，当我想测试一个受保护的方法时，这很容易，只需要具有相同包名的测试类就足够了。

C#有类似的东西吗？对受保护的方法进行单元测试有什么好的做法吗？我只发现框架和人们说我应该只测试公共方法。

没有任何框架应该是可以做到的……</p>

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-16T12:04:23.797

您可以继承您在测试类上测试的类。

```
[TestClass]
public class Test1 : SomeClass
{
    [TestMethod]
    public void MyTest
    {
        Assert.AreEqual(1, ProtectedMethod());
    }

} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-09-12T09:14:42.327

另一种选择是`internal`用于这些方法，然后用于[`InternalsVisibleTo`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)允许您的测试程序集访问这些方法。这不会阻止同一程序集中的其他类使用这些方法，但会阻止不是您的测试程序集的其他程序集访问它们。

这不会为您提供尽可能多的封装和保护，但它非常简单并且很有用。

**添加到`AssemblyInfo.cs`包含内部方法的程序集中**

```
[assembly: InternalsVisibleTo("TestsAssembly")] 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-07-16T08:19:39.817

您可以在继承您要测试的类的新类中公开受保护的方法。

```
public class ExposedClassToTest : ClassToTest
{
    public bool ExposedProtectedMethod(int parameter)
    {
        return base.ProtectedMethod(parameter);
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-06T06:54:14.053

您可以使用 PrivateObject 类来访问所有私有/受保护的方法/字段。

PrivateObject 是 Microsoft 单元测试框架中的一个类，它是一个包装器，可以调用通常无法访问的成员进行单元测试。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-16T12:10:15.970

您可以使用反射来调用私有和受保护的方法。

请参阅此处了解更多信息：

[http://msdn.microsoft.com/en-us/library/66btctbe.aspx](http://msdn.microsoft.com/en-us/library/66btctbe.aspx)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-09-17T12:48:31.653

尽管公认的答案是最好的答案，但它并没有解决我的问题。从受保护的类派生出来的许多其他东西污染了我的测试类。最后，我选择将待测试逻辑提取到公共类中并对其进行测试。当然，这并不适合所有人，并且可能需要进行相当多的重构，但是如果您一直滚动到此答案，它可能会对您有所帮助。:) 这是一个例子

**老情况：**

```
protected class ProtectedClass{
   protected void ProtectedMethod(){
      //logic you wanted to test but can't :(
   }
} 
```

**新情况：**

```
protected class ProtectedClass{
   private INewPublicClass _newPublicClass;

   public ProtectedClass(INewPublicClass newPublicClass) {
      _newPublicClass = newPublicClass;
   }

   protected void ProtectedMethod(){
      //the logic you wanted to test has been moved to another class
      _newPublicClass.DoStuff();
   }
}

public class NewPublicClass : INewPublicClass
{
   public void DoStuff() {
      //this logic can be tested!
   }
}

public class NewPublicClassTest
{
    NewPublicClass _target;
    public void DoStuff_WithoutInput_ShouldSucceed() {
        //Arrange test and call the method with the logic you want to test
        _target.DoStuff();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-18T12:06:12.673

您可以使用从基类调用受保护方法的公共方法创建存根。这也是您在生产中使用这种受保护方法的方式。

```
public class FooStub : Bar 
{
    public string MyMethodFoo()
    {
        return MyMethodBar();
    }
}

public abstract class Bar 
{
    protected string MyMethodBar()
    {
        return "Hello World!"
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-15T11:34:09.897

这是我在测试项目中使用的扩展方法[（扩展方法是什么？） 。](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods)唯一的缺点是您必须将名称写成 a `string`，因为`nameof()`它遵循保护规则，并且不允许您引用受保护或私有成员。

```
 public static MethodInfo GetNonPublicMethod(this Type type, string method)
        {
            MemberInfo[] temp = type.GetMember(method, MemberTypes.Method, BindingFlags.NonPublic | BindingFlags.Instance);
            if (temp.Length == 1)
            {
                if (temp[0] is MethodInfo ret)
                {
                    return ret;
                }
                else
                {
                    throw new ArgumentException("Not a method.");
                }
            }
            else
            {
                if (temp.Length == 0)
                {
                    throw new ArgumentException("Method was not found.");
                }
                else
                {
                    throw new ArgumentException("Multiple methods found.");
                }
            }
        } 
```

有关此方法的更多信息：[https ://docs.microsoft.com/en-us/dotnet/api/system.type.getmember?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.type.getmember?view=net-5.0)

PS：`methodInfo.Invoke(instance, params)`用来调用它。

# ruby - 为什么 object_id 在 Windows 上持续存在而不在 linux 上存在？

> ID：13416230
> 
> 赞同：6
> 
> 时间：2012-11-16T12:02:30.170
> 
> 标签：ruby, windows, objectid

这个节目

```
class ObjectGarden
    class << self.clone
            puts self.object_id
    end
end

puts ObjectGarden.clone.object_id 
```

当在 Linux 上运行时（已在 RHEL 上测试过）`object_id`，如我所料，在多次运行时会生成不同的 s。但是，当我在 Windows 上运行它时，我会在多次运行中得到相同的输出。而且无论我做什么（休眠/关机/“臭名昭著`object_id`的蓝屏”并重新启动）都不会改变。

我还注意到，`object_id`如果我更改程序的内容（即使是微不足道的更改，例如添加新行或注释），Windows 也会发生更改。

为什么 Windows 和 Linux 实现之间存在这种差异？由于我无法访问 OS X，因此有人可以在 Mac 上运行它并记录结果。

我在 Windows 上使用 Ruby 1.9.2-p136，在 Linux 上使用 Ruby 1.9.2-p180。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:18:23.267

对于 ruby​​ 中的大多数对象，您从中获得的数字`#object_id`实际上是指向该对象的内部 C 数据结构的指针。该数据结构又通过 ruby​​ 实现/构建使用的任何内存分配器为其分配空间。

如果不阅读代码，我会猜测 linux 版本每次都会产生不同的结果，因为某些东西，无论是 ruby​​ 还是 C 分配器，都故意为分配或指针使用随机偏移量，以使它们难以猜测，从而使程序更多安全的。

ruby 对 's 只有一个保证`object_id`：只要一个特定对象存在，它`object_id`对于那个 ruby​​ 解释器来说是唯一的并且不会改变。就这样。`object_id`如果对象最终获得相同的内存块，您甚至可以获得与之前创建的对象和后来的垃圾收集对象相同的对象。

另请注意，如果您执行以下操作：

```
irb(main):001:0> a = "hi"
=> "hi"
irb(main):002:0> a.object_id
=> 14348380
irb(main):003:0> a = a + " there"
=> "hi there"
irb(main):004:0> a.object_id
=> 14197020 
```

该行`a = a + " there"`实际上创建了一个带有 new 的新对象，而`object_id`using`#concat`没有：

```
irb(main):005:0> a = "hi"
=> "hi"
irb(main):006:0> a.object_id
=> 12031400
irb(main):007:0> a.concat " there"
=> "hi there"
irb(main):008:0> a.object_id
=> 12031400 
```

另请注意，在 ruby​​ 中，赋值将分配的变量绑定到对象，因此将一个变量分配给另一个变量会将它们都指向同一个对象：

```
irb(main):011:0> a = "hi"
=> "hi"
irb(main):012:0> a.object_id
=> 12081640
irb(main):013:0> b = a
=> "hi"
irb(main):014:0> b.object_id
=> 12081640 
```

所以改变一个变量会改变另一个：

```
irb(main):015:0> a.concat " there"
=> "hi there"
irb(main):016:0> b
=> "hi there" 
```

# c# - MessageBox.Show 问题

> ID：13416235
> 
> 赞同：2
> 
> 时间：2012-11-16T12:03:06.097
> 
> 标签：c#, winforms, dialog, messagebox

我有很多这样的代码，它通常可以工作

```
private void button_Click(object sender, EventArgs e)
{
    try
    {
        DialogResult result;
        result = MessageBox.Show( "Questa operazione potrebbe richiedere alcuni minuti,\r\nsei sicuro di voler continuare?", "Attenzione", MessageBoxButtons.YesNo, MessageBoxIcon.Warning );
        if ( result == System.Windows.Forms.DialogResult.Yes )
        {
            DoSomething();
        }
        else
        {
            DoSomethingElse();
        }
    }
    Catch (Exception ex)
    {
        LogExceptio(ex);
    }
} 
```

但由于某种原因，特定`Windows Form`的`MessageBox`没有显示。如果我按下`Enter`它，就像我点击“是”一样继续；如果我按下`ALT`键，MessageBox 会神奇地出现在屏幕上。

任何想法？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:06:45.947

尝试为消息框指定所有者（据我所知，应该有包含该参数的重载方法）。所有者应该是当前打开的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T14:53:44.423

我通过设置 DataGrid.visible = false 来解决这个问题。

```
private void button_Click(object sender, EventArgs e)
{
try
{
    DialogResult result;
    DataGrid.visible=false;
    result = MessageBox.Show( "Questa operazione potrebbe richiedere alcuni minuti,\r\nsei sicuro di voler continuare?", "Attenzione", MessageBoxButtons.YesNo, MessageBoxIcon.Warning );
    if ( result == System.Windows.Forms.DialogResult.Yes )
    {
        DoSomething();
    }
    else
    {
        DoSomethingElse();
    }
}
DataGrid.visible=true;
Catch (Exception ex)
{
    LogExceptio(ex);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T07:35:50.020

因为在你的应用程序中使用了一些线程 MessageBox 可能会出现在背景上。因此，您还必须在 lambda 表达式线程中传递 MessageBox，如下所述

```
new Thread(() => 
 {
    MessageBox.Show("Your Text");
 }).Start(); 
```

希望它会帮助你...

# c# - 如何将控件模板分配给 Wpf 中的窗口？

> ID：13416238
> 
> 赞同：1
> 
> 时间：2012-11-16T12:03:09.747
> 
> 标签：c#, wpf, templates, controltemplate

我正在尝试定义一个控件模板，然后我想将其用于模式对话框。问题是，我遵循了在 stackoverflow 和其他任何地方可以找到的所有说明，但是没有加载和应用样式/模板？相反，我得到一个静态资源异常。

那么，如果模板和窗口位于不同的文件中，如何将模板应用到我的窗口？

有什么帮助吗？

```
<Window x:Class="WpfWindowTemplateTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        Template="{StaticResource MyWindowTemplate}"
        Style="{StaticResource MyWindowStyle}" /> 
```

我使用的模板是这个：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ControlTemplate x:Key="MyWindowTemplate" TargetType="{x:Type Window}">
        <Border x:Name="WindowBorder" Style="{DynamicResource WindowBorderStyle}">
            <Grid>
                <Border Margin="4,4,4,4" Padding="0,0,0,0" x:Name="MarginBorder">
                    <AdornerDecorator>
                        <ContentPresenter/>
                    </AdornerDecorator>
                </Border>
                <ResizeGrip Visibility="Collapsed" IsTabStop="false" HorizontalAlignment="Right" x:Name="WindowResizeGrip" 
                    VerticalAlignment="Bottom" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="ResizeMode" Value="CanResizeWithGrip"/>
                    <Condition Property="WindowState" Value="Normal"/>
                </MultiTrigger.Conditions>
                <Setter Property="Visibility" TargetName="WindowResizeGrip" Value="Visible"/>
                <Setter Property="Margin" TargetName="MarginBorder" Value="4,4,4,20" />
            </MultiTrigger>
            <Trigger Property="WindowState" Value="Maximized">
                <Setter Property="CornerRadius" TargetName="WindowBorder" Value="0,0,0,0"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <Style x:Key="MyWindowStyle" TargetType="{x:Type Window}">
        <Setter Property="AllowsTransparency" Value="False" />
        <Setter Property="WindowStyle" Value="SingleBorderWindow" />
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="ShowInTaskbar" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Window}">
                    <Border>
                        <AdornerDecorator>
                            <ContentPresenter/>
                        </AdornerDecorator>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>    
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:08:00.407

使用 DynamicResource 而不是 StaticResource。

```
<Window x:Class="WpfWindowTemplateTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    Template="{DynamicResource MyWindowTemplate}"
    Style="{DynamicResource MyWindowStyle}" /> 
```

将此添加到您的 app.xaml

```
<ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/WpfWindowTemplateTest;component/MyWindowTemplate.xaml" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

# c# - “Bad IL Range”异常是什么意思？

> ID：13416240
> 
> 赞同：7
> 
> 时间：2012-11-16T12:03:16.200
> 
> 标签：c#, .net

是什么具体导致了消息“Bad IL range”的异常？

我从我的一位客户那里收到了包含此消息的错误报告，但我看不到异常类型。在此文本上进行谷歌搜索会产生非常不同的结果，我怀疑这是 .NET/C# 中相当低的级别，可能会在许多不同的情况下发生。我假设 IL 在这种情况下是“中间语言”。

那么究竟是什么导致了这个异常，它发生的常见潜在原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T12:10:02.117

异常类型为`BadImageFormatException`，当程序集损坏时抛出（完整的异常消息应说明哪个程序集）。发生这种情况的原因可能多种多样：病毒、硬件故障、软件错误或用户采取的错误操作。异常消息和 Fusion 日志属性将包含有关它所代表的错误类型的更多信息。

您对此无能为力，如果问题仍然存在，他可能需要重新安装您的应用程序或 .NET Framework，如果它确实发生过一次，那么他应该检查病毒或进行严格的硬件测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T12:09:01.527

运行时验证加载的程序集，特别是 - 检查提供的 CIL 的有效性 - 它检测 CIL 结构和 CIL 流中的各种不同问题。

虽然我自己从未见过这个特定问题，但我想最常见的原因是应用程序或 .NET 程序集之一的物理损坏。

我会尝试重新安装您的应用程序（和/或 .NET 运行时）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-09T02:05:03.217

我的问题是一个狡猾的工作目录。所以其中某处有一个坏的DLL，也许是一个nuget引用。更新我所有的 nuget 包都不起作用，解决方案重建不起作用，电脑重启不起作用。

从我的源代码管理 (svn) 重新签出到新的工作目录解决了这个问题。

我在 Win10 上，所以这里可能有更深层次的东西，但从那以后几天我没有任何进一步的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-27T10:17:05.777

**在我的情况下，由于在 _FormClosing 事件中处理程序集对象而**发生此错误，如下所示：

```
if (_kishpos != null)
  _kishpos.Dispose(); 
```

无需在 _FormClosing() 事件中处理程序集对象。

**评论或删除它，以修复您的“Bad IL range”错误。**

```
//if (_kishpos != null)
//  _kishpos.Dispose(); 
```

我的错误已修复。

# dynamics-crm - 在 CRM 2011 中，安装了哪个类调用 dll 插件？

> ID：13416243
> 
> 赞同：0
> 
> 时间：2012-11-16T12:03:26.537
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

我需要知道哪一类 CRM 2011 调用了安装的插件。

我是插件的新手，但我认为每次调用它们都使用相同的过程。我需要让它们在不同的实例上工作。

让我介绍一个例子。我有一个`IPlugin`类的实现，其中有一个名为`_log`.

```
public class Plugin : IPlugin { 
    private static String _log;
} 
```

所以，如果我有异步插件，每次插件触发器，我应该有新的对象，对吧？当我查看日志文件时，我注意到在同一个日志中，插件的进程不止一个。示例：“Log-> obj1.method_1, obj2.method_1” 就像类插件只有一个实例，每次触发插件时，它只是调用`Execute()`不同的*serviceProvider*参数的方法。这可能吗？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:03:51.897

我不确定你在问什么，但我猜你的插件有一些多线程问题。无法更改它，因此每次都会创建一个新对象。任何类级别的变量都会产生竞争条件。为什么你认为你需要每个插件调用都在不同的进程中？

## 编辑 1

为什么不直接创建一个新对象作为插件的第一步，传入执行过程？将插件中定义的所有类级别变量移动到新类。这样您就不必担心多线程问题。

## 编辑 2 - 示例 ##

```
// Your actual IPlugin class would only contain this, nothing else.
public class MyPlugin : IPlugin
{
    public void Execute(IServiceProvider serviceProvider)
    {       
        new MyPluginLogic().ExecutePluginLogic(serviceProvider);    
    }
}

public class MyPluginLogic{
    private static String _log;

    public void ExecutePluginLogic(IServiceProvider serviceProvider){
        // Do what ever logic you were previously doing in your plugin class.
    }
} 
```

如果您以这种方式设置代码，则可以保证`MyPluginLogic`每次调用插件时都会获得一个新对象，这将消除任何可能的非静态竞争条件。

如果您仍然遇到问题，请发布您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:43:40.530

听起来您的逻辑遇到了问题，并决定采用一种与 CRM 应该工作的方式不兼容的方法来修复它。退后一步，描述一下为什么你觉得“*每个调用都必须在不同的实例上工作*”。

正如@Daryl 正确指出的那样，没有办法更改`Plugin`对象的缓存，这正是[CRM SDK](http://msdn.microsoft.com/en-us/library/cc151102.aspx)声明的原因：

> 为了提高性能，Microsoft Dynamics CRM 缓存插件实例。插件的 Execute 方法应该写成无状态的，因为不是每次调用插件都会调用构造函数。此外，多个系统线程可以同时执行插件。所有每次调用的状态信息都存储在上下文中，因此您不应在插件中使用全局变量或尝试将任何数据存储在成员变量中以供下次插件调用时使用。

# liferay - 如何将portlet 放在标题中？

> ID：13416247
> 
> 赞同：1
> 
> 时间：2012-11-16T12:03:49.810
> 
> 标签：liferay, liferay-6, liferay-theme

我使用Liferay Portal 6.0 CE，需要将portlet（两个按钮）放在标准模板的标题中，如下图所示：

![在此处输入图像描述](../Images/7e2e6977f4fbf33738d33f8342b6a3db.png)

我该怎么做？..

我需要访问超出模板范围的层：

![在此处输入图像描述](../Images/037202f4cc97edf38bd8578768e8761f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:10:42.440

我找到了以下文档，我认为我得到了解决方案：

[Liferay 主题：自定义 Liferay 的外观和感觉](http://content.liferay.com/document/Liferay%20Themes.pdf)

# node.js - 哪种方式更适合将文件从服务器放入 amazon s3？

> ID：13416249
> 
> 赞同：2
> 
> 时间：2012-11-16T12:03:59.787
> 
> 标签：node.js, express, restify, fs, knox-amazon-s3-client

我想通过restify（或express）提供一个休息服务api

*   服务的职责是让可以把音频/mpeg或者其他
    二进制文件放到我们服务器的客户端，然后验证认证，如果
    通过，把文件放到amazon s3，然后检查s3客户端
    响应状态码，如果s3客户端响应statusCode == 200 ，
    做点什么

> **解决方案**1：使用请求流管道通过knox将文件放到亚马逊

```
var stream = s3.put(filepath, {options});
serverReq.pipe(stream);
stream.on('response', function(err, s3Res) {
    if (err) { console.log(err); }
    if (s3Res.statusCode == 200) { store file infos on DB}
} 
```

> **解决方案**2：使用formdiable和fs将文件预先存储在服务器本地临时文件夹中，然后通过knox将文件放到亚马逊

```
(after pre store file on server local temp folder)
s3.putFile(sourcePath, destPath, {options}, function(err, _res) {
    (clear local files from local temp folder)

    if (err) { return next(err); }
    if (_res.statusCode == 200) {console.log('save on %s', s3.url(dest))}
    res.send(_res.statusCode);
    return next();
}); 
```

> **解决方案1和解决方案2或其他更好的方法之间哪种方法更好？这里是否有任何性能问题需要知道？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:53:38.300

根据服务器负载和可用带宽，您的磁盘是您最大的潜在瓶颈。我会说使用直接流式传输文件而不将其存储到物理媒体的解决方案 1。确保您也不要尝试将整个对象存储到内存中，否则您可能会遇到系统资源问题。

# html - HTML5时间输入显示比实际时间少1小时

> ID：13416254
> 
> 赞同：0
> 
> 时间：2012-11-16T12:04:40.553
> 
> 标签：html, time, input

我正在尝试输入由 new Date() 返回的当前时间...

```
$('#TSE').val(new Date().toJSON().substring(11,16)); 
```

...在时间输入字段中：

```
<input type="time" id="TSE"> 
```

该值的格式为 hh:mm 并被输入字段接受。

问题是它显示的时间比实际时间**少 1 小时。**

例如，如果 new Date() 为**2012-11-16T11:59**，则输入字段将显示**10:59**

我在使用 Safari Mobile（网络应用程序）时遇到了这个问题。我的时区是 CET (GMT+1)。几周前我们失去了夏令时。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:11:55.733

您显示的时间不正确。这是发生的事情：

```
> new Date().toJSON()
'2012-11-16T12:08:42.914Z'
> new Date().toJSON().substring(11,16)
'12:08' 
```

`'toJSON()`将日期转换为 UTC 和格式 w/r/t [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。日期末尾有一个“Z”；这表示 UTC。

`.toJSON()`执行此转换是有意义的，因为将日期标准化以进行存储或传输是有好处的。为了在 UI 中显示，最好使用另一个格式化函数。

另请参阅：[在哪里可以找到有关在 JavaScript 中格式化日期的文档？](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:08:39.783

```
$('#TSE').val(new Date().toLocaleTimeString()); 
```

# html - 如何设置按钮的固定位置？

> ID：13416256
> 
> 赞同：0
> 
> 时间：2012-11-16T12:04:50.760
> 
> 标签：html, css

我创建了一个非常简单的搜索表单 - 这里是：

![搜索表格](../Images/a486450651f3feb89c00d2cfe3e30471.png)

`onClick`它显示了更多选项：

![更多选择](../Images/3429fe7d6423fe84fc1b577b2dc4b4ac.png)

但问题是第二个按钮在底部之后`div`，所以我需要以某种方式将它锁定在当前位置，我不知道如何。

![按钮位置](../Images/352be8b90c55de6fe9e843072240b13c.png)

实际上应该是这样的（底部 div 是“可切换的”，所以它应该只显示其中一个）

![最后](../Images/0dba8bf68ba72ccfc1342960c5405500.png)

这是[我](http://jsfiddle.net/nonamez/PDjmB/2/)在*jsfiddle*上的代码（不包括视图样式 - 仅结构）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:10:59.273

将此行添加到您的 CSS 中，对我有用：

```
div.advanced-search-values{
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:10:14.363

```
div.advanced-search-values { position: fixed;} 
```

尝试这个。

或使用

```
div.advanced-search-values { position: absolute;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:27:24.090

绝对位置在这里可以正常工作

在您的 CSS 中添加以下行：

```
.simple-search{
    float: left;
    position:relative;
}

div.advanced-search-values{
    display: none;
    border: 1px solid #DDDDDD;
    margin-top: 5px;
    padding: 2px;
    position:absolute;
    top:26px;
    left:235px
} 
```

这是[jsfiddle文件](http://jsfiddle.net/PDjmB/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:27:40.733

我刚刚添加了位置，它对我有用。

```
div.advanced-search-values {
display: none;
border: 1px solid #DDDDDD;
margin-top: 5px;
padding: 2px;
position: absolute; // or     position:fixed; (both works fine) 
```

}

# actionscript-3 - 如何从 class.as 访问变量以在影片剪辑中使用

> ID：13416257
> 
> 赞同：0
> 
> 时间：2012-11-16T12:04:54.050
> 
> 标签：actionscript-3, flash

我有一个类名 sample_1.as

```
package  {

    import flash.display.MovieClip;

    public class sample_1 extends MovieClip {

        public var targetScene:String;

        public function sample_1() {
            // constructor code
        }
    }
} 
```

我想从不同的帧以及在movieclips中访问和更改targetScene字符串

```
gotoAndPlay(targetScene);
or
targetScene = "MainMenuEnter"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:03:05.253

从任何框架/类中获得类似变量的一种快速简便的方法是将其设为静态：

```
public class sample_1 extends MovieClip {    
    public static var targetScene:String;
} 
```

您可以`targetScene`从任何地方使用访问`sample_1.targetScene`，例如：

```
sample_1.targetScene = "3";
gotoAndPlay(uint(sample_1.targetScene)); 
```

这不是最好的使用方法，尤其是当项目变得更大并且具有更多组件时，为了全局访问而将变量声明为静态可能会导致大量意大利面条代码，但它是一个快速的“n”脏修复让你开始。

# sql - SQL Server 2005 错误 - ""MAX" 不是可识别的表提示选项"

> ID：13416260
> 
> 赞同：2
> 
> 时间：2012-11-16T12:05:11.570
> 
> 标签：sql, tsql, sql-server-2005, pivot

我正在尝试使用动态 SQL 对需要动态生成列名的表进行透视。我的代码是：

```
DECLARE @columns varchar(max)
DECLARE @query varchar(max)
SELECT @columns = COALESCE(@columns + ',[' + cast([Name] as varchar(max)) + ']', 
                 '[' + cast([Name] as varchar(max))+ ']')           
    FROM   dbo.Temp2

SET @query = 'SELECT * FROM dbo.Temp2 AS PivotData'
SET @query = @query  + 
'PIVOT (MAX(VALUE) FOR [NAME] IN (' + @columns + ')) AS p'                              

EXEC (@query) 
```

我的@columns 函数似乎可以工作（尽管我只能“打印”8000 个字符来验证），并且我已经读到在 SQL 2005 中对非数字 varchars 执行 MAX 或 MIN 函数是可以接受的，但是当我运行以完整形式查询我收到错误消息：

```
Msg 321, Level 15, State 1, Line 1
"MAX" is not a recognized table hints option. If it is intended as a parameter to a table-valued function, ensure that your database compatibility mode is set to 90. 
```

我检查了兼容性级别，它设置为 90。任何人都可以提供任何建议来解决这个问题吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:07:08.710

`PivotData`您在和之间缺少一个空格`PIVOT`。

```
 SET @query = @query  + 
    ' PIVOT (MAX(VALUE) FOR [NAME] IN (' + @columns + ')) AS p' 
//   ^--- HERE 
```

结果，SQL 解析器解释`PivotDataPIVOT`为单个标识符，导致稍后出现语法错误。

# eclipse - maven-scala-plugin 给出 pom 文件错误

> ID：13416264
> 
> 赞同：11
> 
> 时间：2012-11-16T12:05:30.367
> 
> 标签：eclipse, scala, maven, maven-plugin, m2eclipse

我正在使用 scala 和 maven 测试 java 代码。maven-scala-plugin 在 Eclipse 中返回一个 pom 文件错误。这是我的 pom 片段：

```
 <plugin>
            <groupId>org.scala-tools</groupId>
            <artifactId>maven-scala-plugin</artifactId>
            <version>2.15.2</version>
            <executions>
                <execution>
                    <id>scala-test-compile</id>
                    <phase>test-compile</phase>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

这是错误：

```
Plugin execution not covered by lifecycle configuration: org.scala-tools:maven-scala-plugin:2.15.2:testCompile 
 (execution: scala-test-compile, phase: test-compile) 
```

我是否正确配置了 pom？

scala 测试运行正常，因为它们都通过了。也许这是一个 Maven 错误？

当我查看项目的 Maven 属性时，生命周期映射不可用： ![在此处输入图像描述](../Images/ed9883d3e7da622345755dac05e6e776.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-30T18:58:44.270

您应该从此更新站点安装 m2eclipse-connector：http: [//alchim31.free.fr/m2e-scala/update-site](http://alchim31.free.fr/m2e-scala/update-site)

检查此文档：

[http://scala-ide.org/docs/tutorials/m2eclipse/index.html](http://scala-ide.org/docs/tutorials/m2eclipse/index.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T12:56:51.500

不，这不是 Maven 错误。[此页面](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#lifecycle_mapping_metadata_provided_by_maven_plugin)描述了显示消息的原因以及如何处理它。

在问题上按 Ctrl+1 后，Eclipse 应该建议两个快速修复：

1.  发现新的 m2e 连接器。先试试这个，如果发现连接器重启 Eclipse 并重建项目，问题应该会消失。

2.  将目标永久标记为忽略。它将添加一些代码，`pom.xml`这意味着目标不会在 Eclipse 中的构建上运行，只能从命令行运行。您也可以`<ignore>`将添加的部分替换`<execute>`为在 Eclipse 中运行目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-24T07:49:24.923

在 Eclipse 中安装 m2e 插件（Scala IDE 的 Maven 集成）后，它运行良好。

# session - 即使我不登录也有会话cookie

> ID：13416266
> 
> 赞同：1
> 
> 时间：2012-11-16T12:05:44.493
> 
> 标签：session, symfony, symfony-2.1

我在浏览器中删除了该网站的所有 cookie，再次检查 cookie：没有 cookie。重新加载 example.com，检查 cookie：SESSID（我的 php 会话 cookie）。

如果我不登录，难道不应该没有cookie吗？这可能是什么原因造成的？

我想一个可能的原因：闪信息。但是我没有在 example.com 中使用它们，我只检查是否有要打印的 flash 消息，如果没有则什么都不做。

我尝试禁用 CSRF 保护，但没有奏效。

这是根据分析器的响应，在删除 cookie 并发出请求之后：http: [//i.imm.io/LSRr.jpeg](http://i.imm.io/LSRr.jpeg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:10:38.013

我为此打开了一个问题：[https ://github.com/symfony/symfony/issues/6036](https://github.com/symfony/symfony/issues/6036)

显然，即使您没有在其中存储任何内容，也可以创建会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:21:42.127

检查你的配置文件

```
framework:
    session:
        auto_start: true 
```

无需登录即可创建会话的原因有很多。第三方捆绑包可能正在创建会话，`session.auto_start`可能在您的 php.ini 中启用，或者您的特定安全配置可能会自动创建会话。在表单中使用 CSRF 令牌也会创建会话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T12:15:14.673

大多数网站使用 cookie 的目的远不止记住您的用户名和密码。创建它们是为了检查您上次访问该站点的时间，如果您为该站点设置了任何自定义设置，以记住自动登录的用户名和密码。

所以是的，对于大多数网站来说，每次你第一次访问它时创建一个或更多的 cookie 是很正常的，然后每次访问都会更新它们。

另外，我认为 SESSID 只会出现在某些浏览器中，用于检查服务器的会话 ID。

你使用的是什么浏览器？它可能是由浏览器而不是网站创建的 cookie。

# mongodb - Mongo 代表集以及如何使用 pymongo 删除死节点

> ID：13416268
> 
> 赞同：0
> 
> 时间：2012-11-16T12:05:51.640
> 
> 标签：mongodb, pymongo

我在 ec2 上有一个死节点。如何使用 pymongo 从代表集中删除死的次要？

```
{u'date': datetime.datetime(2012, 11, 16, 11, 53, 53),
 u'members': [{u'_id': 0,
               u'health': 1.0,
               u'name': u'xxxxxxxxx:27017',
               u'optime': Timestamp(1352810702, 1),
               u'optimeDate': datetime.datetime(2012, 11, 13, 12, 45, 2),
               u'self': True,
               u'state': 1,
               u'stateStr': u'PRIMARY',
               u'uptime': 507560},
              {u'_id': 1,
               u'health': 1.0,
               u'lastHeartbeat': datetime.datetime(2012, 11, 16, 11, 53, 51),
               u'name': u'ffffffffff:27017',
               u'optime': Timestamp(1352810702, 1),
               u'optimeDate': datetime.datetime(2012, 11, 13, 12, 45, 2),
               u'pingMs': 1,
               u'state': 2,
               u'stateStr': u'SECONDARY',
               u'uptime': 163187},
              {u'_id': 2,
               u'errmsg': u'socket exception [CONNECT_ERROR] for jjjjjjjj:27017',
               u'health': 0.0,
               u'lastHeartbeat': datetime.datetime(2012, 11, 16, 11, 53, 14),
               u'name': u'jjjjjjjjjj:27017',
               u'optime': Timestamp(1352810702, 1),
               u'optimeDate': datetime.datetime(2012, 11, 13, 12, 45, 2),
               u'pingMs': 0,
               u'state': 8,
               u'stateStr': u'(not reachable/healthy)',
               u'uptime': 0}],
 u'myState': 1,
 u'ok': 1.0,
 u'set': u'heythat'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:32:06.760

您可以从集合中获取副本集配置`local.system.replset`：

```
>>> from pymongo import Connection
>>> c = Connection()
>>> conf = c['local']['system.replset'].find_one() 
```

如果您在 mongo shell 中检查 rs.reconfig 包装器所做的事情，您会看到它还增加了版本，然后运行了一个特殊`replSetReconfig`命令。

```
default:PRIMARY> rs.reconfig
function (cfg, options) {
    cfg.version = rs.conf().version + 1;
    cmd = {replSetReconfig:cfg};
    for (var i in options) {
        cmd[i] = options[i];
    }
    return this._runCmd(cmd);
} 
```

只需在 Python 中做同样的事情。修改`conf['members']`文档（例如删除死节点）并更新版本（添加 1）。然后`replSetReconfig`使用更新的`conf`字典作为参数对 admin 数据库运行命令。

```
>>> # change conf['members'] accordingly
>>> conf['version'] += 1
>>> c['admin'].command({'replSetReconfig':conf}) 
```

# javascript - XSL 作为 javascript 函数参数

> ID：13416271
> 
> 赞同：0
> 
> 时间：2012-11-16T12:06:10.583
> 
> 标签：javascript, html, xslt

我搜索并尝试了各种解决方案（例如使用 xsl:variable），但没有一个有效。

这是我的情况。这可行，但我想将 xsl_value-of 作为参数传递给 alert()：

```
<a href="#" onclick="alert('text')"><xsl:value-of select="@naziv" /></a> 
```

所以它会像

```
<a href="#" onclick="alert('{<xsl:value-of select="@naziv" />}')"><xsl:value-of select="@naziv" /></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:17:21.913

使用属性值模板，即

```
<a href="#" onclick="alert('{@naziv}');"><xsl:value-of select="@naziv"/></a> 
```

# ios - presentModalViewController 在关闭时会破坏 UITextView 布局

> ID：13416277
> 
> 赞同：4
> 
> 时间：2012-11-16T12:06:27.383
> 
> 标签：ios, layout, uitextview, offset, presentmodalviewcontroller

我在使用 presentModalViewController 时遇到了一个非常奇怪的问题。我有一个包含许多 UIViewController 的应用程序，它们显示 UIButton 和 UITextViews。我手动偏移 UITextViews 中的文本以根据某些标准将它们对齐顶部或底部。

除非我使用 presentModalViewController 来显示 MFMessageComposeViewController，否则一切正常。当我关闭 MFMessageComposeViewController 时，后面的 UITextViews 失去了偏移量，底部的文本对齐现在位于 UITextView 的顶部...

如果我保留 99% 的代码并且不调用 presentModalViewController 一切正常。我查看了 viewWillAppear、layoutSubviews 等，试图找到我的偏移量在哪里重置，但我被卡住了。

# dart - 列表的反向迭代器？

> ID：13416278
> 
> 赞同：24
> 
> 时间：2012-11-16T12:06:27.510
> 
> 标签：dart

有没有一种有效的方法可以在 dart 中以相反的顺序遍历列表中的对象？我可以使用索引，但这会导致性能下降（即，如果`List<E>`在内部使用链表构建）？

上下文：我正在从后到前绘制对象，但需要从前到后处理它们

阿里

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2014-03-08T19:16:05.190

您现在可以在 Dart 中反转列表的迭代。在 List 上使用`reversed`getter。

```
var fruits = ['apples', 'oranges', 'pears'];
Iterable inReverse = fruits.reversed;
var fruitsInReverse = inReverse.toList();
print(fruitsInReverse); // [pears, oranges, apples] 
```

您可以将其缩短为：

```
var fruits = ['apples', 'oranges', 'pears'];
print(fruits.reversed.toList()); 
```

请参阅[API 文档](https://api.dartlang.org/stable/2.6.1/dart-core/List/reversed.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T13:38:27.407

在问题[#2804](http://dartbug.com/2804)得到*修复*之前，您必须使用索引以相反的顺序迭代列表。对于您的性能问题，应该很好，因为[Lasse RH Nielsen 曾经说过](https://groups.google.com/a/dartlang.org/d/msg/misc/c45lBlaS2DA/ufL_GDslUBQJ)：

> Dart 中的列表用于随机访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:07:04.220

如果有一个有效的向后迭代就好了。

同时，您可以做的是创建一个带有反向链接的列表。

例如

```
class BackwardsLinked {
    // properties, methods etc.
    // as an example, just an int
    int value;

    BackwardsLinked(this.value);

    BackwardsLinked previousItem;

    String toString() => "[$value]";
}

void main() {
    // setting up the list
    var list = new List<BackwardsLinked>();
    var anchor = new BackwardsLinked(0);
    anchor.previousItem = null;

    list.add(anchor);

    for (int i = 1; i < 10; i++) {
        list.add(new BackwardsLinked(i * 3));
        list[i].previousItem = list[i - 1];
    }
    BackwardsLinked terminal = list[list.length - 1];

    // Iteration
    print("Forwards, as usual:");
    for (BackwardsLinked link in list) {
        // Do whatever with object
        print(link);
    }

    print("Backwards:");
    {
        BackwardsLinked link = terminal;
        print(terminal);
        while (link.previousItem != null) {
            link = link.previousItem;
            // Do whatever with object
            print(link);
        }
    }
} 
```

# x86 - IA-32 上自我 IPI 的目的

> ID：13416279
> 
> 赞同：6
> 
> 时间：2012-11-16T12:06:32.080
> 
> 标签：x86, kernel, interrupt, osdev

在 IA-32 架构上，处理器向自身发送处理器间中断的目的是什么？

根据英特尔 IA-32 架构软件开发人员手册，卷。3，第。10.1：

> IPI 用于软件自中断、中断转发或抢占式调度。

但是，当处理器也可以使用 INT 指令中断自身时，为什么还要使用自 IPI？这个功能似乎是多余的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:20:24.213

我认为最大的原因是一致性：如果您正在为多核处理器编写软件，并且您想向系统中的所有内核发送中断，那么必须对每个其他内核执行 IPI，然后执行INT 中断当前内核，当然您还必须为两个中断源等设置处理程序......将 IPI 发送给每个人要容易得多。

另一种情况可能是多核系统，您将工作或消息传递给“空闲”核心以处理负载。“免费”核心可能是当前核心，同样您不希望仅仅因为您正在向自己发送中断而在软件中出现特殊情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T17:28:09.800

我想你已经知道原因了，因为 2 年过去了。

但这是我的理解：

IPI 可以在 IRQ 被禁用时被阻止，它由 IOAPIC 保存，直到目标内核使用 sti 指令重新启用 IRQ。然而，无论是否启用 IRQ，int 指令总是将 CPU 捕获到较低的环级别。

所以当内核想要做某事时可能需要自我 IPI，但现在当 IRQ 被禁用时不需要。因此，它会向自己发送一个 IPI，一旦重新启用该内核上的 IRQ，就会发生此类中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:25:02.600

自我 IPI 还有另一个原因。

如果您初始化一个 SMI 处理程序，它首先位于 ram 中的低地址。整个 CPU 状态保存在 SMI 中。但是，所有 CPU 最初都将使用相同的状态区域，并且新的重定位地址是通过操作状态变量来设置的。

在这种情况下，您希望同时将初始 SMI 发送到一个 CPU。如果您将其发送给所有人，他们都将使用相同的区域来存储状态，这将是一场灾难。

为所有 CPU 使用相同的 SMI 处理程序重定位初始化例程很方便，因此您可以使用带有 SMI 类型的自 IPI 来输入 SMI 重定位代码。

BSP 可以将 SMI IPI 发送给它自己，然后同时发送给一个 AP。然后他们将一一迁移到非冲突地区。

我确信还有许多其他需要自我 IPI 的情况。每当 CPU 共享一个关键区域（如在初始 SMI 状态中）时，就会激发自身 IPI 的一致性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-26T02:41:40.750

不，不，不，和不。

Chris Desjardins 最接近真正的原因。

我将尝试阐明自我 IPI 的目的。自 IPI 与软件中断无法区分 ( `INT nn`)。两者都会通过中断描述符表 (IDT) 调用指定的中断处理程序。此外，内核可以使用两者来调用一些处理过程。但是，虽然操作系统内核倾向于广泛使用 Self-IPI，但它们从不使用软件中断。为什么和什么会有所不同？首先，这两种方法都很昂贵。中断处理对 CPU 来说是一项繁重的工作，需要耗费数百个周期。当调用者和被调用者都驻留在内核中时，中断处理程序序言和结语执行大量簿记是不必要的。常规函数调用只需要几个 CPU 周期，并产生与软件中断相同的效果。所以没有任何理由多付一百倍并使用`INT nn`. 因此，内核从不`INT nn`在其代码中使用软件中断 ( )。然而，他们仍然广泛使用 Self-IPI，这似乎做同样的工作。有什么区别？它们之间潜在且不明显的对比是，软件中断作为任何其他指令直接在 CPU 内核中处理，但 Self-IPI 像任何其他硬件中断一样通过本地 APIC。虽然`INT nn`只模拟硬件中断，但 Self-IPI 与 IO 设备生成的 IRQ 请求无法区分。

在这里我们可以找到要点：**Local APIC 实现了中断优先级模式。**它总是传递给 CPU 中断请求，该请求具有所有待处理的最大向量值。具有较高优先级的中断请求可以抢占较低优先级中断的中断处理程序的执行。换句话说，内核现在可以有多个堆栈中断处理程序。此外，它有一个 TPR 寄存器，用于清除优先级低于或等于指定的中断报告。操作系统如此广泛地使用它，以至于在 x64 中，它被 CR8 寄存器作为别名以便更快地访问。通常，操作系统严重依赖本地 APIC 优先级模式。例如，Windows 中的 IRQ 级别直接映射到本地 APIC 优先级类。内核小心地在中断源之间分配向量，以将它们分配给不同的优先级并以良好的顺序进行。例如，系统定时器通常具有最高优先级，不能被任何其他中断处理程序阻塞或抢占。当内核进行 Self-IPI 时，它请求调用指定的中断处理程序并计算其优先级。

说明性的例子。Windows 直接基于本地 APIC 优先级架构实现延迟过程调用机制。DPC 中断处理程序具有最低优先级。使用 DPC，Windows 实现了类似于 Linux 中的中断处理策略，称为上半部/下半部。上半部分处理程序以高优先级运行，并且应该尽可能短且尽可能快。它将所有与中断处理相关的繁重工作委托并推迟到以低优先级运行的下半部分处理程序。同样，在 Windows 中，硬件中断处理程序以高优先级运行，并使用 Self-IPI 为任何繁重的工作安排 DPC。DPC 作为一个中断，以高于常规代码（线程、进程、应用程序）的优先级运行，但由于它的优先级最低，它在所有挂起的硬件中断处理程序完成时运行。此外，虽然 DPC 执行会阻塞常规代码，但它不会阻塞、延迟或推迟硬件中断处理程序的执行。即使对于在 DPC 过程中间到达的中断也是如此。

# vb.net - VB linq to sql isnull

> ID：13416280
> 
> 赞同：2
> 
> 时间：2012-11-16T12:06:32.830
> 
> 标签：vb.net, linq, isnull

我想在 linq to sql 中做这个

```
select isnull(x.COD, '1') as 'NCOD'
from table x 
```

我试过这个。

```
From x In table
select NCOD = x.COD ?? '1'; 
```

我正在使用 LINQPad 4 和 VB 表达式。但 LINQPAd 说我不能使用？表达（西班牙语中没有 se puede usar aquí el carácter '?'）

任何想法？

PD：对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:20:46.267

如果您的值类型是字符串，则可以使用以下表达式：

```
result = from x in values select IF(String.IsNullOrEmpty(x),"No value",x); 
```

如果它是可空类型（如 int?、Double?、SomeClass?）：

```
result = from x in values select IF(x.HasValue,x,1); 
```

参考：

*   VB.NET 中的可空类型 - [http://visualbasic.about.com/od/usingvbnet/a/nullabletypes.htm](http://visualbasic.about.com/od/usingvbnet/a/nullabletypes.htm)
*   关于 VB IF 运算符的警告：[https ://stackoverflow.com/a/11990998/1732138](https://stackoverflow.com/a/11990998/1732138)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T12:16:56.573

尝试以下查询，这将对您有所帮助。

```
var InvoiceNo = dbContext.table.where(x => (int?)x.ICOD) ?? "NCOD"; 
```

在这里，**？？**仅适用于可为空的**int？**

而且您是 vb.net 用户，您应该使用以下代码，这将对您有所帮助...

```
Dim InvoiceNo = If(dbContext.table.where(Function(x) DirectCast(x.ICOD, System.Nullable(Of Integer))), "NCOD") 
```

# android - 在 Android 中使用 Mifare Ultralight 编写 - 内存被锁定？

> ID：13416285
> 
> 赞同：1
> 
> 时间：2012-11-16T12:07:01.207
> 
> 标签：android, nfc, mifare

我在向 Mifare Ultralight C 标签写入数据时遇到问题。我可以在部分内存中读写它，但似乎它的一部分被阻塞了，它向我显示了一个 IOException "Transceive failed"。我不能写内存位置 14-27。块似乎没有被锁定。我第一次写东西时，它工作得很好，但现在我什至无法将标签格式化为 Ndef。

我正在使用该方法

```
ultralight.writePage(pageOffset, data); 
```

我无法上传图片，但希望这有助于更好地描述问题（信息取自 TagInfo 应用程序）：

```
ATQA 0x4400
萨克 0x00
内存内容：
00 * 04:4F:BD 7E (UID0-UID2, BCC0)
01 * 5A:53:28:80 (UID3-UID6)
02\. A1 48 00:00 (BCC1, INT, LOCK0-LOCK1)
03\. E1:10:12:00 (OTP0-OTP3)
04-OF . 数据
10-27？数据
28 ?p XX XX -- -- (LOCK2-LOCK3)
29 ?p XX XX -- -- (CNT0-CNT1)
2A ?p 28 -- -- -- (AUTH0)
2B ?p XX -- -- -- (AUTH1)
2C ?- XX XX XX XX
2D ?- XX XX XX XX
2E ?- XX XX XX XX
2F ?- XX XX XX XX

```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:26:27.903

也许您在访问位中写入了错误的内容，即使您拥有正确的写入密钥，也会阻止您写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:28:36.197

页面 0x10 及以后的锁定字节是不可访问的，因此如果您不知道身份验证密钥，就很难确定发生了什么。您可能所做的是在第一次写入数据时覆盖页面 0x28 及之后，从而意外锁定页面 0x14-0x27（并且可能设置了密码）。不幸的是，一旦页面被锁定，您将无法再解锁它。

# android - Android围绕一个点旋转多个位图

> ID：13416291
> 
> 赞同：0
> 
> 时间：2012-11-16T12:07:18.920
> 
> 标签：android, bitmap, rotation

我正在围绕某个点在画布上旋转一组位图。我正在使用以下功能进行旋转：

```
private void rotateGroupdAtPoint(ArrayList<MyBitmap> group, int degrees) {
        // TODO Auto-generated method stub

        float minx=100000,miny=100000,maxx=-100000,maxy=-100000;
        for(int i = 0; i < group.size(); i++) {
            MyBitmap m = group.get(i);
            if(minx > m.getX()) {
                minx = m.getX();
            }
            if(miny > m.getY()) {
                miny = m.getY();
            }
            if(maxx < m.getX() + m.getBmp().getWidth()) {
                maxx = m.getX() + m.getBmp().getWidth();
            }
            if(maxy < m.getY() + m.getBmp().getHeight()) {
                maxy = m.getY() + m.getBmp().getHeight();
            }
        }

        float x = (minx+maxx)/2;
        float y = (miny+maxy)/2;
        Log.d("minmax","min:"+minx+","+maxx+"    max:"+miny+","+maxy);

        for(int i = 0; i < group.size(); i++) {
            Log.d("position before","x:" + group.get(i).getX() + ", y:" + group.get(i).getY());
            float newx = (float)(((group.get(i).getX() - x) * Math.cos(Math.toRadians(degrees))) + ((group.get(i).getY() - y) * Math.sin(Math.toRadians(degrees)))) + x;
            float newy = (float)(((group.get(i).getX() - x) * Math.sin(Math.toRadians(degrees))) - ((group.get(i).getY() - y) * Math.cos(Math.toRadians(degrees)))) + y;
            group.get(i).setX(newx);
            group.get(i).setY(newy);
            group.get(i).setBmp(rotateBitmap(group.get(i).getBmp(), -90));
            Log.d("position","x:" + group.get(i).getX() + ", y:" + group.get(i).getY());

        }
    }

private Bitmap rotateBitmap(Bitmap bmp, int degrees) {
        if (degrees != 0 && bmp != null) {
            Matrix matrix = new Matrix();

            matrix.setRotate(degrees, (float) bmp.getWidth() / 2, (float) bmp.getHeight() / 2);
            try {
                Bitmap rotatedBmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), matrix, true);
                if (bmp != rotatedBmp) {
                    bmp.recycle();
                    bmp = rotatedBmp;
                }
            } catch (OutOfMemoryError ex) {
                return null;
            }
        }
        return bmp;
    } 
```

首先，我找到所有位图共有的中点，然后围绕该点旋转。目前我对方向没有问题，我也会添加代码来做到这一点。但我的问题是位图没有围绕中心点以所需的角度正确旋转。谁能指导我哪里错了？

![在此处输入图像描述](../Images/dea24a186d5dea437beb0fd083a839d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:31:35.197

您根本没有旋转位图。您可以使用`setX()`和`setY()`属性将位图移动到它们的新位置。最重要的是，您需要决定它们应该旋转的程度并将该[`setRotation()`](http://developer.android.com/reference/android/view/View.html#setRotation%28float%29)方法与[`setPivotX()`](http://developer.android.com/reference/android/view/View.html#setPivotX%28float%29)和[`setPivotY()`](http://developer.android.com/reference/android/view/View.html#setPivotY%28float%29)方法结合使用。

默认情况下，`setRotation(float radians)`将围绕`radians`您正在旋转的视图的中心点旋转图像。因此，如果您调用`group.get(i).setRotation(Math.PI/2)`，您的位图将从它所在的点旋转 90 度。

`setPivot()`您可以通过调用方法 来调整它的旋转点。

```
View view = group.get(i);
view.setPivotX(0);
view.setPivotY(0);
view.setRotation(Math.PI/2); 
```

这将围绕`view`左上角旋转到垂直角度。

# python - 使用 Python 输入列表

> ID：13416293
> 
> 赞同：0
> 
> 时间：2012-11-16T12:07:20.783
> 
> 标签：python, list, import, python-3.x

我的python知识有一点小问题（新手）。我正在尝试做的事情是将字符串列表输入到变量中，然后我需要做一些循环遍历列表并从列表中返回几个字符串。

问题是我不知道如何将列表输入到变量中。

这是我尝试的代码：

```
x=[]
x=(input('Please enter a list of strings: ')) 
```

...然后我`['car', 'house', 't-shirt', 'bicycle', 'images']`假设这`x`将是一个带有字符串列表的变量，但事实并非如此。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:17:56.567

我假设您使用的是 Python 3（如果这是 Python 2 代码，那么您就有问题了）。

从[文档](http://docs.python.org/3.3/library/functions.html#input)中：

> input(...): ...该函数然后从输入中读取一行，将其转换为字符串（去除尾随的换行符），然后返回。

所以，`input()`返回一个字符串。不是列表或任何东西。

当然，您可以`split()`将字符串放在逗号上，并`strip()`从末尾开始使用 '[' 或 ']' 之类的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:27:41.810

我假设您使用的是 python 3.x。如果您尝试输入一个列表，使用`input`我认为即使您输入数据也会被视为字符串`['car', 'house', 't-shirt', 'bicycle', 'images']`

您可以尝试将数据转换为列表：

```
str_x = input('Please enter a list of strings: '))
x = [s.strip() for s in str_x[1:-1].split(',')]   # String to List conversion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T21:04:37.377

这是另一种方法：

```
>>> x=input('Please enter a list of strings: ').split(sep=', ')
Please enter a list of strings: hi, there, stack, overflow
>>> print(x)
['hi', 'there', 'stack', 'overflow'] 
```

这样，您就可以让 input() 完成工作，因为它默认将输入作为字符串。.split() 返回一个列表，但您始终可以使用

```
x=list(input(...)) 
```

以防万一将来的版本决定返回一个元组。

您也可以更改分隔符，即您可以只使用逗号，而不是逗号和空格，这取决于您自己的风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T06:51:14.617

在 Python 2 中，这将起作用

```
x=raw_input('Please enter a list of strings: ').split()
print x 
```

# python - 无法使用 mod_python 和 PSP 写入文件

> ID：13416294
> 
> 赞同：0
> 
> 时间：2012-11-16T12:07:22.670
> 
> 标签：python, apache, permissions, mod-python, python-server-pages

所以，我有一个 Python Server Pages 脚本，它在运行时会将内容保存到`/var/www/`. 它打开文件：

```
open(filename, 'wb') 
```

这导致了这个：

```
IOError: [Errno 13] Permission denied: 'file.txt' 
```

我正在使用 Apache 并已设置`/var/www/`为`chmod 755`. 我不确定 www-data 是否正在尝试写入，因为当我运行它时，输出很简单`0`：

```
<%
import os
req.write(str(os.system('whoami')))
%> 
```

无论如何我`chown`都想`www-data`了，但它仍然不起作用。任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:16:50.027

没有做足够的搜索，设法通过使用完整路径编写来解决它，即。

```
open('/var/www/' + filename, 'wb') 
```

代替

```
open(filename, 'wb') 
```

# java - 在文件中搜索字符串并在上面插入内容

> ID：13416296
> 
> 赞同：1
> 
> 时间：2012-11-16T12:07:24.713
> 
> 标签：java, seek, randomaccessfile

我尝试在 txt 文件中搜索字符串并在其上方插入一些特定内容。可悲的是，输出看起来与我的预期完全不同。

有人可以给我一个提示吗？
这就是我有多远！

```
 String description= "filename.txt";
    String comparison="    return model;";
    RandomAccessFile output = null;
        try
        {
          output = new RandomAccessFile(description, "rw" );
          String line = null;
          while ((line = output.readLine()) != null) {
                  if (line.equals(comparison)){
                      //System.out.println("alt: "+line);
                      output.seek(output.getFilePointer()-line.getBytes().length);
                      output.writeChars("new stuff; \n");
                      //System.out.println("new: "+output.readLine());
                      }
          }
        }
        catch ( IOException e ) {
          e.printStackTrace();
        }
        finally {        
          if ( output != null ){ try { output.close(); } catch ( IOException e ) { e.printStackTrace(); }}
        } 
```

这是我尝试阅读的文件：

```
/*filename.txt*/
    some longer content ~ 100kB

    return model;

    further content 
```

这就是我希望得到的

```
/*filename.txt*/
    some longer content ~ 100kB

    new stuff;

    return model;

    further content 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:28:33.737

文件不支持插入或删除除文件末尾以外的内容。（这不是 Java 的限制，而是操作系统的限制）

要插入文本，您必须重写文件（至少从您要更改的点开始） 最简单的解决方案是将内容复制到临时文件，根据需要更改/插入或删除，如果成功则替换原始文件.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:31:08.100

使用两个文件。复制到您想要的行到新文件中。添加你的新行。然后再次将其余行复制到文件中。最后，将新文件的全部内容复制到旧文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:30:18.887

首先：您要测试的字符串中有空格：

```
String comparison="    return model;"; 
```

比较这样的行会更好：

```
if (line.trim().equals(comparison.trim())){ ... 
```

调用`trim()`将删除该行和比较字符串中的所有空格/制表符，因此如果某些文件使用制表符而不是空格或不同数量的空格，它也会匹配...

# jquery - 具有特定语法的 json 日期格式

> ID：13416297
> 
> 赞同：0
> 
> 时间：2012-11-16T12:07:33.293
> 
> 标签：jquery, html, json

我知道这个问题有几个高质量的答案，但我正在努力使用语法来让它工作：

```
$.getJSON( "ticketweb.json",
            function(data){
              $.each(data.events, function(){
              $('ul#listings').append("<li><div class=event-col><span class=name>" +this.eventname+ "</span><p>" +this.eventurl+ "</p><div class=date>" +this.dates.startdate+ "</div><p>" +this.eventimages+ "</p><p>" +this.venue.name+ "</p></div></li>");

            });
        }); 
```

在哪里

```
<div class=date>" +this.dates.startdate+ "</div> 
```

.append 的一部分是我想要格式化的位。我尝试了很多方法，但不确定如何将更通用的 json 格式方法合并到上述语法中。

编辑：我理想的日期格式是：11 月 17 日星期六，尽管 17.11.12 也可以。

我当前得到的输出是 20120629100000。没有像我在类似问题上看到的那样的正斜杠或反斜杠 (/Date(1224043200000)/)，我不确定这里是否缺少良好的编码实践元素. 我的 JSON 文件在下面输入是完全有效的：

```
 "events":   [
    {
  "eventid": "4419605",
  "facebookeventid": "",
  "eventname": "",
  "description": "",
  "eventurl": "",
  "additionallistingtext": "",
  "status": "SalesEnded",
  "tags": "",
  "spotifyuri": "",
  "dates":       {
    "startdate": "20120529010000",
    "enddate": "20121231235500",
    "onsaledate": "20120309084000",
    "announcedate": "20120309115333",
    "timezone": "EDT"
  },
  "venue":       {
    "venueid": "210795",
    "name": "Online",
    "venueurl": "",
    "city": "Online",
    "state": "",
    "postalcode": "00000",
    "country": "US",
    "address": "Online",
    "twitterid": "",
    "venueimages":         {
      "large": "",
      "small": ""
    }
  },
  "eventimages": [""],
  "prices":       {
    "pricelow": "$195.00",
    "pricehigh": "$195.00",
    "pricedisplay": "$195.00"
  },
  "attractionList":       [
            {
      "sequence": "0",

      "billing": "1.00",
      "genre": "Seminar/Lecture",
      "links": "",
      "media": ""
    },
            {
      "sequence": "1",
      "billing": "0.75",
      "links": "",
      "media": ""
    },
            {
      "sequence": "2",
      "billing": "0.75",
      "links": "",
      "media": ""
    }
  ]
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:44:27.403

如果我理解正确，您有两个选择 - 更改服务器发送的日期格式，或在客户端收到日期后格式化日期。

如何实现后者的示例：

```
var dateStr = this.dates.startdate // 20120629100000
var formattedDate = dateStr.substr( 6, 2) + '/'
                  + dateStr.substr( 4, 2) + '/'
                  + dateStr.substr( 0, 4) + ' ' 
                  + dateStr.substr( 8, 2) + ':'
                  + dateStr.substr(10, 2) + ':'
                  + dateStr.substr(12, 2);

... '<div class="date">' + formattedDate + '</div>' ... 
```

此特定示例将输出：`29/06/2012 10:00:00 (DD/MM/YYYY HH:MM:SS)`

# zebra-printers - Zebra ZPL 中的新产品线

> ID：13416299
> 
> 赞同：15
> 
> 时间：2012-11-16T12:07:35.430
> 
> 标签：zebra-printers, zpl

1.  如何为“文本”添加换行符？比如说：

    ```
    Hello World 
    ```

    会变成

    ```
    Hello
    World 
    ```

    无论如何，我可以为我的代码添加一个换行符吗？

    ```
    ^FT78,76^A0N,28,28^FH\^FDHello\nWorld^FS 
    ```

2.  如果我的标签中的“文本”太长，我将如何添加另一行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-10T16:30:57.663

用于`\&`新行

```
^FT78,76^A0N,28,28^FH\^FDHello\&World^FS 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-17T12:54:18.533

我建议您结合 Thorsten 和 Dharmesh 的答案以获得最大效果：

```
^FB400,2,0,C^FO0,50
^FDHello\&World^FS 
```

这样做会产生一个如下所示的标签：

![结果说](../Images/6481a563c847e2e706ed64df69aee1df.png)

这种方法的好处有两个：首先，文本块将适当地定位和对齐新行。其次，您可以完全控制换行符实际发生的位置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-04T10:57:54.433

我知道这个问题已经很老了，但我发现`^FB`命令（字段块）实际上非常擅长包装文本：

我使用了这样的一行：

```
^A0R,54,54^FO505,3424^FB630,2,0,L,0^FDThis is a pretty long line of text^FS 
```

它被很好地包裹成两行。您唯一需要注意的是，换行似乎只发生在空格处，而不是逗号或任何其他标点符号处。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T16:51:45.120

^FX 不理解 \n，您需要将它传递给 \0A（\n 的十六进制等效项）[ASCII wiki 页面](https://en.wikipedia.org/wiki/ASCII)

所以你的 ZPL 应该看起来像

```
^FT78,76^A0N,28,28^FH_^FDHello_0AWorld^FS 
```

我将十六进制字符更改为 _ vs \ 以便其他人在您完成后查看此内容时不会感到困惑。

Jason 关于使用 ^FB 命令的想法是一个绝妙的想法。它有一些奇怪的属性（带有文本旋转），但通常是用于文本换行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-19T05:00:48.053

虽然这个问题有点老，但它确实提到了 ZPL 命令 ^FT 是指示文本元素出现*位置的命令。*78 和 76 分别对应标签的 X 轴和 Y 轴，测量单位是点。考虑到这一点，前面的答案原则上是正确的。您可以在更改 y 参数的情况下调用另一个 ^FT 命令，例如：

```
^FT78,78^A0N,28,28^FH\Hello^FS
^FT78,110^A0N,28,28^FH\World^FS 
```

作为替代方案，ZPL[手册](https://support.zebra.com/cpws/docs/zpl/zpl_manual.pdf)详细介绍了 ^TB（文本框）命令，其中包括自动换行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-03T10:59:32.267

不回答原始问题，但对于使用 ZPL 进行 unicode 的任何人来说，这可能会有所帮助。

我正在使用`^TB`阿拉伯语文本，发现`\&`无法创建新行。

起作用的是[将新行转换为十六进制](https://r12a.github.io/apps/conversion/)（`_0A`）并使用它。

例如：

```
^XA
^LL0406
^CI28
^CWZ,E:TT0003M_.FNT
^PA0,1,1,0

^FO609,50,2
^AZN,40,35
^TBN,559,300
^FH
^FD
_D8_B4_D8_B4_D8_B4_0A <-- new line
_D8_B4_D8_B4_D8_B4_0A <-- new line
_D8_B4_D8_B4_D8_B4
^FS

^PQ1
^XZ 
```

...会输出这样的票：

```
ششش
ششش
ششش 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2021-10-09T11:49:34.957

对于 android，"\r\n" 用于添加换行符。

```
text.replaceAll("\n", "\r\n"); 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-11-17T22:49:19.000

不幸的是，你不能真正做到这一点。您可能已经发现太长的文本会绕回同一行。您必须创建一个新行来容纳文本。我忘记了该字符串中的哪些数字是位置（可能是 28,28）尝试添加一行，将其更改为 34,28 并查看它是否移动到下面的新行...。只需使用这 4 个数字在那条线的前面。一个是字体大小（这可能会对您有所帮助），另外两个是从顶部到右侧的位置。一个简单的方法就是用文本编辑器编辑文件，然后从命令行复制命令到打印机 UNC 路径，看看你得到了什么。（即复制“C:\test.txt\127.0.0.1\zebra）。希望这会有所帮助。

# html5-canvas - KineticJS - 使用 Group 时在 Shape 覆盖上下文设置中使用 drawFunc

> ID：13416301
> 
> 赞同：1
> 
> 时间：2012-11-16T12:07:39.567
> 
> 标签：html5-canvas, kineticjs, shape

我对使用 HTML5 Canvas 和 KineticJS 很陌生，所以如果这是我的明显错误，请原谅我。

我的问题是我正在使用由形状组成的组。Shapes 使用 drawFunc 来实现绘图魔法。都是好东西。但是 - 我注意到在我的 Shape 调用中所做的设置似乎覆盖了“全局”上下文设置。[我创建的一个小提琴](http://jsfiddle.net/chrisward/vYRhs/)最好地展示了这一点，它向标准的“KineticJS 拖放组”[演示](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/)添加了一些十字（形状） 。

```
 // ----------------------------------------------------------[ my bit starts ]
        var tmp_x = i * 30 + 100
        var tmp_y = i * 30 + 40
        var shape = new Kinetic.Shape({

            drawFunc: function(context) {

                context.moveTo(tmp_x-10, tmp_y);
                context.lineTo(tmp_x + 10, tmp_y);
                context.moveTo(tmp_x, tmp_y - 10);
                context.lineTo(tmp_x, tmp_y + 10);

                this.fill(context);
                this.stroke(context);
            } ,
            fill: "#0FD2FF",
            stroke: "orange"
        });
        group.add(shape);
        // ----------------------------------------------------------[ my bit ends ]

        var box = new Kinetic.Rect({
            x: i * 30 + 210,
            y: i * 18 + 40,
            width: 100,
            height: 50,
            name: colors[i],
            fill: colors[i],
            stroke: 'black',
            strokeWidth: 4
        });

        group.add(box); 
```

您会注意到在形状标记中对彩色框的设置进行的描边和填充设置 - 除了在最后一个十字（形状）之后创建的最后一个。

感觉像是某种后期评估的事情，因为只有在渲染组时才完成。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:17:41.403

上下文*是*全局的，因此当您对其应用设置时，它们将持续存在于使用上下文进行绘制的每个形状中。

您需要在您的 drawFunc 中，围绕您对 的其他调用调用 和`context.beginPath()`，以表明这是一个与其他形状分开的新形状。`context.closePath()``context`

所以现在，你的形状代码是这样的：

```
var shape = new Kinetic.Shape({
    drawFunc: function(context) {
        context.beginPath();
        context.moveTo(tmp_x-10, tmp_y);
        context.lineTo(tmp_x + 10, tmp_y);
        context.moveTo(tmp_x, tmp_y - 10);
        context.lineTo(tmp_x, tmp_y + 10);
        context.closePath();

        this.fill(context);
        this.stroke(context);
    },
    fill: "#0FD2FF",
    stroke: "orange"
}); 
```

这将防止您的上下文设置泄漏到其他形状。

# asp.net - 在 Asp .Net 中访问页面时出现错误 403

> ID：13416307
> 
> 赞同：1
> 
> 时间：2012-11-16T12:08:07.030
> 
> 标签：asp.net, iis

我有一个网站。在我的测试和登台环境中，我可以访问一个页面。我禁用了该页面的会话状态，并将会话 ID 存储在整个应用程序的 url 中。

但是当我在现场测试时，我得到一个 403 - Forbidden: Access is denied 页面。

我使用 ASP .Net Webforms 4.0 和 IIS 7.5。

我相信这与配置有关，因为在暂存时我的环境与实时完全相同，并且暂存和实时运行在同一台机器上。

我不使用 url rewrite 或类似的东西。页面也使用 SSL，但登台环境也使用 SSL，并且可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:12:55.850

确保运行应用程序池的帐户有权访问包含已部署网站的目录。

# ios - 通过代码使用私有 API 处理电子邮件帐户

> ID：13416308
> 
> 赞同：1
> 
> 时间：2012-11-16T12:08:08.207
> 
> 标签：ios, iphone-privateapi

我想通过代码删除已在设备中注册的现有电子邮件帐户。我通过一些论坛得到的基本想法是使用私有API（如accountSettings）来处理这些操作，但是删除操作没有反映在设备中，尽管引用在应用程序中被删除。谁能建议我如何进行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:33:51.337

有一个名为 AccountsSettings 的私有框架。

它有一些有趣的类（例如 AccountsManager）。它有名为“deleteAccount”和“deleteAccountWithIdentifier”的方法。

我不确定它们是否会起作用（它们可能受到权利的保护）。但是，您可以尝试一下。

顺便提一句。您可以从这里获取它的标题： [https ://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-/blob/master/AccountSettings.framework/AccountsManager.h](https://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-/blob/master/AccountSettings.framework/AccountsManager.h)

# android - 在android的水平列表视图中动态添加图像？

> ID：13416311
> 
> 赞同：0
> 
> 时间：2012-11-16T12:08:26.753
> 
> 标签：android, android-listview, scrollview

我从服务器获取图像，我需要在单行中添加意味着在水平列表视图中。我该怎么做请帮忙？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:11:11.563

检查此[水平列表视图](http://www.dev-smart.com/archives/34)。安卓中的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:11:13.767

开始检查水平列表视图的实现，如下所示：

[https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/Horizo​​ntalListView.java](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java)

# java - 更改 Android 应用的样式和主题中的文本外观

> ID：13416315
> 
> 赞同：24
> 
> 时间：2012-11-16T12:08:49.390
> 
> 标签：java, android, text, android-theme, android-styles

我正在编写一个 android 应用程序，我想改变我的应用程序的主题。

我已经设法通过使用主题来更改应用程序的背景颜色，但我正在努力更改默认文本外观。

这是我的**styles.xml**资源文件。

```
<resources>
    <style name="QTheme" parent="android:Theme.Light">
        <item name="android:windowBackground">@color/q_green</item>
        <item name="android:colorBackground">@color/q_green</item>
        <item name="android:textAppearance">@style/QText</item> 
    </style>

    <color name="q_green">#008000</color>
    <color name="white">#FFFFFF</color>

    <style name="QText" parent="@android:style/TextAppearance.Medium"> 
        <item name="android:textSize">20sp</item> 
        <item name="android:textColor">@color/white</item> 
        <item name="android:textStyle">bold</item>
        <item name="android:textFont">Verdana</item>
    </style>
</resources> 
```

只是为了检查一下，这是我想在布局文件中使用上述样式的**TextView之一。**

```
<TextView
    android:id="@+id/txtDevice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/device" 
/> 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-16T12:46:27.930

只是为了完整性，并完全归功于 Lusprog，这现在是我的资源文件

```
<resources>
    <style name="QTheme" parent="android:Theme.Light">
        <item name="android:windowBackground">@color/q_green</item>
        <item name="android:colorBackground">@color/q_green</item>
        <item name="android:textViewStyle">@style/QText</item> 
    </style>

    <color name="q_green">#008000</color>
    <color name="white">#FFFFFF</color>

    <style name="QText" parent="@android:style/TextAppearance.Medium"> 
        <item name="android:textSize">20sp</item> 
        <item name="android:textColor">@color/white</item> 
        <item name="android:textStyle">bold</item>
        <item name="android:typeface">sans</item>
    </style>
</resources> 
```

还要感谢 Padma Kumar 的字体帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:14:30.843

//从你的样式中删除这一行没有这样的属性

```
<item name="android:textFont">Verdana</item> 
```

//你可以给字体改变字体样式

```
<item name="android:typeface">monospace</item> 
```

//用于设置样式

```
<TextView
    android:id="@+id/txtDevice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    style="@style/QText"
    android:text="@string/device" 
/> 
```

# c# - 使用快捷键启动 Windows 8 应用程序

> ID：13416319
> 
> 赞同：1
> 
> 时间：2012-11-16T12:08:54.037
> 
> 标签：c#, windows-8, keyboard-shortcuts

我可以分配键盘快捷键组合以通过代码启动我的 Windows 8 应用程序而无需用户干预吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:15:56.917

`RegisterHotKey`不适用于 Windows 应用商店应用。[MSDN上的讨论](http://social.msdn.microsoft.com/Forums/nn-NO/winappswithnativecode/thread/6d15817b-4410-46a7-b98a-a1971125ef41)

在调查这个问题时，我认为这可能是因为以下两件事之一：

**电池寿命问题**监控系统范围的事件需要更多的处理，但如果在操作系统级别完成对热键的过滤，我相信与监控所有键盘事件相比，成本不会太大，因此我们可以：

**跨平台**的一致性看到虚拟键盘不包括*Windows*或*Alt*等键，我想在 Surface 设备上执行大多数热键是不可能的。他们可能决定简单地删除该功能以保持一致性，而不是在 PC 上获得“更好的体验”。

如果有人有更好的解释，我想听听！

# ilog - 我在哪里可以获得 ILOG 罐子

> ID：13416322
> 
> 赞同：1
> 
> 时间：2012-11-16T12:08:56.847
> 
> 标签：ilog

我在哪里可以获得以下 ILOG jar

1.  jrules-engine.jar
2.  jrules-res-XXXX-session-java.jar（XXXX - 代表您正在使用的 ILOG 的版本）
3.  jrules-res-execution.jar
4.  jrules-res-session-XXXX.jar (XXXX - 代表你正在使用的应用服务器 websphere/weblogic 等..)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:27:32.887

您无法获得这些罐子，因为 ILOG 不是 IBM 的开源产品，此外，IBM 也根据 IBM 的网站重新命名了该产品

> JRules BRMS 系列通过 WebSphere Business Events 得到了增强，将两种强大的决策自动化技术整合到一个产品中。此新产品已更名为 IBM Operational Decision Manager。

[所以这里是您可以下载试用版的地方](http://www-01.ibm.com/software/decision-management/operational-decision-management/websphere-operational-decision-management)。安装试用版后，您可以访问您提到的 jar，但不能访问确切的版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T14:34:38.150

如果你想在你的应用程序中集成 Intellirule 编辑器，你可以集成一个 API，你可以在 Teamserver Core 中恢复这个 JAR。

# python - 如何像 Java 中的字节数组一样在 Python 中发布图像？

> ID：13416327
> 
> 赞同：0
> 
> 时间：2012-11-16T12:09:05.770
> 
> 标签：python, django

在我的 Django 后端，我处理这样的图像：

```
for file in request.FILES.iteritems():
            image = request.FILES["image"] 
```

使用字节数组通过 java 发送 post 请求很容易。

但是如何使用 Python 进行发布请求呢？

如，我有一个图片网址。

我已经使用从一个网址下载了 iamge

```
r = requests.get('url')
r.content #ImageConent 
```

现在我如何发布它以使其作为字节数组传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:34:58.003

查看有关如何发送多部分请求的[请求文档。](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)基本上你只需要这样做：

```
>>> url = 'http://httpbin.org/post'
>>> files = {'file': open('report.xls', 'rb')}   
>>> r = requests.post(url, files=files) 
```

或者在你的情况下：

```
>>> r = requests.get(url1)
>>> files = {'image': r.content}   
>>> r = requests.post(url2, files=files) 
```

# actionscript-3 - 多个操作系统/浏览器上的 AS3 URLRequest 本地文件

> ID：13416329
> 
> 赞同：0
> 
> 时间：2012-11-16T12:09:24.007
> 
> 标签：actionscript-3, path, request, urlrequest

好样的！

我还有另一个关于在现有文件中加载 .swf 的问题。

在我的游戏中。我有一个介绍屏幕，我在其中加载了另一个 .swf（这是一部电影）。这一切正常，URLRequest 是这样的：

```
request = new URLRequest("Movie.swf"); 
```

正如我所说，这很好用。但是，当我将我的 game.swf 和 movie.swf 复制到 U 盘时。（我将它们放在同一目录中以防止其他问题）。好像没有找到movie.swf。

现在我知道它与 URLRequest 和/或发布设置中给出的路径有关。但我不知道如何做到这一点，以便它在与 game.swf 所在的目录相同的目录中搜索。

我希望你们对这个问题有一个答案。

提前致谢，

马蒂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:32:00.130

Matti，我相信 Lukasz 的评论是正确的，因为它是一个安全错误。

您可以通过嵌入 Movie.swf 而不是使用加载程序来避免此安全错误。如果您这样做，那么在编译时，Movie.swf 需要位于 Game.as 文件旁边，它将包含在 Game.swf 中（无需同时提供这两个文件，只需 Game.swf）。

语法是：

```
package
{
  import flash.display.Sprite;

  public class Game extends Sprite
  {

    [Embed(source="MyMovie.swf")]
      private var myMovieClass:Class;

    private var myMovie:DisplayObject;

    public function Game():void
    {
      myMovie = new myMovieClass();

      // Technically myMovie is now a Loader, and once
      // it's loaded, it'll have .content that's a
      // MovieClipLoaderAsset, and .content.getChildAt(0)
      // will be your MyMovie.swf main timeline.
    }
  }
} 
```

或者，如果您将其嵌入为 mimeType="application/octet-stream"，您可以获取 SWF 的字节并在现有 Loader 的 .loadBytes() 方法中使用它：

```
package
{
  import flash.display.Sprite;
  import flash.utils.ByteArray;

  public class Game extends Sprite
  {

    [Embed(source="MyMovie.swf", mimeType="application/octet-stream")]
      private var movieBytes:Class;

    private var myMovie:DisplayObject;

    public function Game():void
    {
      // Treat this loader the same as your current loader,
      // but don't call .load(url), call loadbytes():
      var l:Loader = new Loader();
      l.loadBytes(new movieBytes() as ByteArray);
    }
  }
} 
```

# perl - 在 Perl 中打乱数组的最佳方法是什么？

> ID：13416337
> 
> 赞同：15
> 
> 时间：2012-11-16T12:09:59.437
> 
> 标签：perl, random, shuffle

所以我有一个文件。假设它看起来像这样（实际上更长）：

```
1234
2134
3124
4123 
```

改组该文件中的行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-16T12:13:41.377

```
#!/usr/bin/env perl

use strict;
use warnings;

use List::Util qw/shuffle/;

my @arr = shuffle <>;

print @arr; 
```

用法 ：

```
./script file.txt 
```

# c# - 如何在 JavaScript 方法中获取 ASP.NET DataGrid 控件的选定行索引？

> ID：13416339
> 
> 赞同：0
> 
> 时间：2012-11-16T12:10:06.573
> 
> 标签：c#, javascript, asp.net, visual-studio-2008, datagrid

Default.aspx 中使用了一个 DataGrid，要求是在 javascript 方法中获取所选行的所有列的文本，以将其复制到剪贴板。目前，我正在执行此任务，但它选择了 Grid 的所有行并将所有数据粘贴到剪贴板。

Default.aspx（示例文件）

```
<asp:GridView ID="ObjList" runat="server" OnLoad="xyz" AutoGenerateColumns="false" OnRowDataBound="ObjList_RowDataBound" AutoGenerateSelectButton="false"> 
<Columns>
  .
  .
  .
</Columns> 
```

调用 javascript 方法将数据复制到剪贴板的示例按钮。

```
<asp:ImageButton ID="BtnCopyToClipboard" ToolTip="Copy To Clipboard"   ImageUrl="img/tlb_list_copy.gif" OnClientClick="CopyGridView('ObjList'); return false;" runat="server" /> 
```

示例 JavaScript 函数：

```
function CopyGridView(gridId) {
var div = document.getElementById(gridId);

var sSelectedRowText = div.Rows[iPL_SelectedRowIndex].Value;
if (div != null) {
    div.contentEditable = 'true';
    var controlRange;
    if (document.body.createControlRange) {
        controlRange = document.body.createControlRange();
        controlRange.addElement(div);
        controlRange.execCommand('Copy');
        alert(InfoMsgClipboard);
    }
    div.contentEditable = 'false';
}
} 
```

任何建议，如何识别网格中的选定行并仅在剪贴板中复制选定的行数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:47:20.077

```
function setSelectedRowId(RowId){
        document.getElementById("txtRowId").value = RowId; }

    private void ObjList_ItemDataBound(object sender, System.Web.UI.WebControls.DataGridItemEventArgs e)
    {
       if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.SelectedItem)
       {
          e.Item.Attributes.Add("onclick", "setSelectedRowId('" + e.Item.Cells[0].Text + "');
       } 
```

# python - 日内时间序列的多指数构建（10 分钟价格数据）

> ID：13416344
> 
> 赞同：3
> 
> 时间：2012-11-16T12:10:27.483
> 
> 标签：python, dataframe, time-series, pandas, multi-index

我每十分钟就有一个盘中价格文件。[0:41] 一天。每个日期重复 42 次。下面的多索引应始终将重复的日期“折叠”为一个。

*   有 62,035 行 x 3 列：`[date, time, price]`.

*   我想编写一个函数来获取十分钟价格的差异，将差异限制在每个唯一日期。

换句话说，09:30 是每天的第一次，16:20 是最后一次：我**不能**重叠从 16:20 到 09:30 的价格天数之间的差异。对于数据框中的每个唯一日期，差异应从 09:40 - 09:30 开始，并以 16:20 - 16:10 结束。

这是我的尝试。任何建议将不胜感激。

```
def diffSeries(rounded,data):

'''This function accepts a column called rounded from 'data'
 The 2nd input 'data' is a dataframe 
'''

df=rounded.shift(1)
idf=data.set_index(['date', 'time'])  
data['diff']=['000']

  for i in range(0,length(rounded)):

    for day in idf.index.levels[0]:

      for time in idf.index.levels[1]:

        if idf.index.levels[1]!=1620:

          data['diff']=rounded[i]-df[i]

        else:
          day+=1
          time+=2

data[['date','time','price','II','diff']].to_csv('final.csv')

return data['diff'] 
```

然后我打电话：

```
data=read_csv('file.csv')

rounded=roundSeries(data['price'],5) 

diffSeries(rounded,data) 
```

在回溯中 - 我得到一个`Assertion Error`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:52:15.397

您可以使用 groupby 然后应用来实现您想要的：

```
diffs = data.groupby(lambda idx: idx[0]).apply(lambda row: row - row.shift(1)) 
```

举一个完整的例子，假设您为 11 月 14 日到 11 月 16 日创建了一个测试数据集：

```
import pandas as pd
from numpy.random import randn
from datetime import time

# Create date range with 10 minute intervals, and filter out irrelevant times
times = pd.bdate_range(start=pd.datetime(2012,11,14,0,0,0),end=pd.datetime(2012,11,17,0,0,0), freq='10T')
filtered_times = [x for x in times if x.time() >= time(9,30) and x.time() <= time(16,20)]
prices = randn(len(filtered_times))

# Create MultiIndex and data frame matching the format of your CSV
arrays = [[x.date() for x in filtered_times]
         ,[x.time() for x in filtered_times]]
tuples = zip(*arrays)

m_index = pd.MultiIndex.from_tuples(tuples, names=['date', 'time'])
data = pd.DataFrame({'prices': prices}, index=m_index) 
```

你应该得到一个像这样的 DataFrame：

```
 prices
date       time              
2012-11-14 09:30:00  0.696054
           09:40:00 -1.263852
           09:50:00  0.196662
           10:00:00 -0.942375
           10:10:00  1.915207 
```

如上所述，您可以通过按第一个索引分组然后减去每一行的前一行来获得差异：

```
diffs = data.groupby(lambda idx: idx[0]).apply(lambda row: row - row.shift(1)) 
```

这给了你类似的东西：

```
 prices
date       time              
2012-11-14 09:30:00       NaN
           09:40:00 -1.959906
           09:50:00  1.460514
           10:00:00 -1.139036
           10:10:00  2.857582 
```

由于您按日期分组，因此该功能不适用于 16:20 - 09:30。

您可能需要考虑使用 TimeSeries 而不是 DataFrame，因为这样可以为您提供更大的灵活性来处理此类数据。假设您已经从 CSV 文件加载了 DataFrame，您可以轻松地将其转换为 TimeSeries 并执行类似的功能来获取差异：

```
dt_index = pd.DatetimeIndex([datetime.combine(i[0],i[1]) for i in data.index])
# or dt_index = pd.DatetimeIndex([datetime.combine(i.date,i.time) for i in data.index]) 
# if you don't have an multi-level index on data yet
ts = pd.Series(data.prices.values, dt_index)
diffs = ts.groupby(lambda idx: idx.date()).apply(lambda row: row - row.shift(1)) 
```

但是，您现在可以访问内置的时间序列函数，例如重采样。有关 pandas 时间序列的更多信息，请参见[此处](http://pandas.pydata.org/pandas-docs/stable/timeseries.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:07:33.203

@MattiJohn 的构造给出了一个长度为 86,772 的过滤列表——在 2007 年 1 月 3 日-2012 年 8 月 30 日运行 42 次（10 分钟间隔）时。观察数据清洗问题。

这里来自 csv 的价格数据是长度：62,034。因此，简单地从 .csv 导入，如下所示，是有问题的：

```
filtered_times = [x for x in times if x.time() >= time(9,30) and x.time() <= time(16,20)]
DF=pd.read_csv('MR10min.csv')
prices = DF.price
 # I.E. rather than the generic: prices = randn(len(filtered_times))  above. 
```

实际数据没有达到“应该”的长度这一事实意味着存在**数据清理问题**。通常我们没有完整的时间，因为 bdate_time 会产生**（市场上的半天，等等，假期）**。

您的解决方案很优雅。但我不确定如何克服实际数据与先验规定数据帧之间的不匹配。

您的第二个 TimesSeries 建议似乎仍然需要构建类似于第一个的日期时间索引。例如，如果我使用以下两行来获取感兴趣的实际数据：

```
DF=pd.read_csv('MR10min.csv')
data=pd.DF.set_index(['date','time'])

dt_index = pd.DatetimeIndex([datetime.combine(i[0],i[1]) for i in data.index]) 
```

它将生成一个：

```
TypeError: combine() argument 1 must be datetime.date, not str 
```

**如何使 bdate_time 数组完全了解可用的实际数据？**

感谢 (@MattiJohn) 和任何有兴趣继续讨论的人。

# java - 可以完全从 DVD 运行的 Java 应用程序

> ID：13416346
> 
> 赞同：2
> 
> 时间：2012-11-16T12:10:28.047
> 
> 标签：java, database, embed, h2, portability

我必须创建一个可以完全从 DVD 运行的 Java 应用程序。应用程序必须与同样位于 DVD 上的数据库连接。我正在考虑使用嵌入式数据库，但我对它们了解不多。我是否必须从我的 java 应用程序启动数据库服务器，如果需要，我应该怎么做？

提前致谢。尼克·蒂斯利维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:18:46.520

您可以使用`SQLite`它是一个非常轻量级的 SQL 版本。它将数据存储在一个文件中。您甚至不必使用用户名和密码登录。只需将此 jar [sqlite-jdbc](http://www.java2s.com/Code/JarDownload/sqlite/sqlite-jdbc-3.7.2.jar.zip)添加到您的项目构建路径中。您可以通过以下方式访问它：

```
Class.forName("org.sqlite.JDBC");
Connection connection = DriverManager.getConnection("jdbc:sqlite:your_database.db"); //"your_database.db" is the SQLite database file on your DVD.

/*manipulate your db by using PreparedStatement, ResultSet, ... 
```

您必须在系统上安装 SQLite [SQLite 下载](http://www.sqlite.org/download.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:14:27.093

这听起来像是[SQLite](https://stackoverflow.com/questions/41233/java-and-sqlite)的工作。它完全在您自己的进程中运行，因此无需启动外部数据库服务器。

# iphone - 尽管我有 uinavigationcontroller 的类别来转发呼叫，但 shouldAutorotate 没有被调用

> ID：13416349
> 
> 赞同：1
> 
> 时间：2012-11-16T12:10:45.940
> 
> 标签：iphone, objective-c, ios, ios6, autorotate

我有点困惑。我希望我的应用程序恰好在我的 5 个 Viewcontrollers 之一中旋转。我为 UINavigationcontroller 创建了一个类别，实现了在 ios 6 中旋转的必要方法。

```
#import "UINavigationController+IOS6Rotation.h"

@implementation UINavigationController (IOS6Rotation)

-(BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    if (INTERFACE_IS_PAD) {
        return UIInterfaceOrientationLandscapeLeft;
    }
    else{
        return UIInterfaceOrientationPortrait;
    }    
}
@end 
```

我还在所有不应该旋转的 ViewController 中实现了这些方法。

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (BOOL)supportedInterfaceOrientations {
    if (INTERFACE_IS_PAD) {
        return UIInterfaceOrientationMaskLandscape;
    }
    else{
        return UIInterfaceOrientationMaskPortrait;
    }
} 
```

应该旋转的那个在 shouldAutorotate 中返回 YES

在启动时，我使用额外的 Viewcontroller 来显示 Splashscreen。这个 SplashScreen 像这样显示为 RootViewController。

```
vc_splash = [[SplashScreenViewController alloc] initWithNibName:@"SplashScreenViewController" bundle:[NSBundle mainBundle]];
[self.window setRootViewController:vc_splash];

DefaultSHKConfigurator *configurator = [[MySHKConfigurator alloc] init];
[SHKConfiguration sharedInstanceWithConfigurator:configurator];
[self.window makeKeyAndVisible]; 
```

当我完成加载我的数据库时，启动画面被交换为主屏幕。

```
self.viewController = [[MainViewController alloc] initWithNibName:@"MainViewController_iPhone" bundle:nil];
    UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController: self.viewController];
    [self.window setRootViewController: navControl]; 
```

现在的问题是，只有我的 Splashscreen 调用 shouldAutorotate，但其他屏幕没有。有人可以告诉我我是否在这里遗漏了一些必需品吗？我以为我已经做了所有必要的事情来让 bl****y 自动旋转在 ios 6 中正常工作......

提前谢谢，Maverick1st

******更新* ***** 如果您希望 iPad 以横向模式启动，请务必在您的 shouldAutoRotate 中返回 YES，**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:43:26.843

这对我有用添加`supportedInterfaceOrientationsForWindow` 方法`application` `delegate`：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
  UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
  [navigationController shouldAutorotate];
  [navigationController preferredInterfaceOrientationForPresentation];
  return UIInterfaceOrientationMaskAll;
} 
```

还要添加这个`application` `delegate`：

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
  return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
  return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}
@end 
```**

# android - Restlet Android 无法连接到 oData 服务

> ID：13416350
> 
> 赞同：4
> 
> 时间：2012-11-16T12:10:46.777
> 
> 标签：android, odata, restlet

我只是无法让 Android 上的 Restlet 正常工作。我有在纯 Java 中使用的相同 jars、相同生成的类等（它在那里工作）。问题似乎出在 HttpClientHelper 上。

我也读过这个：[http](http://wiki.restlet.org/docs_2.1/13-restlet/275-restlet/266-restlet.html) ://wiki.restlet.org/docs_2.1/13-restlet/275-restlet/266-restlet.html 。

这是我的代码：

```
import netflix.catalog.v2.Genre;
import org.restlet.engine.Engine;
import org.restlet.ext.net.HttpClientHelper;
import org.restlet.ext.odata.Query;

        Engine.getInstance().getRegisteredClients().clear();
        Engine.getInstance().getRegisteredClients().add(new HttpClientHelper(null)); 

        SystemDataObjectsService service = new SystemDataObjectsService();  

        Query<Genre> query = service.createGenreQuery("/Genres");

        for (Genre g : query) {
            Log.d(TAG, g.getName());
        } 
```

这是跟踪：

```
11-16 13:02:31.915: I/org.restlet(1344): Starting the HTTP client
11-16 13:02:31.924: I/org.restlet(1344): A recoverable error was detected (1001), attempting again in 2000 ms.
11-16 13:02:33.935: I/org.restlet(1344): A recoverable error was detected (1001), attempting again in 2000 ms.
11-16 13:02:35.955: E/org.restlet(1344): Can't get the metadata for http://odata.netflix.com/v2/Catalog/ (response's status: Communication Error (1001) - The connector failed to complete the communication with the server)
11-16 13:02:35.965: W/org.restlet(1344): Can't parse the content of http://odata.netflix.com/v2/Catalog/Genres
11-16 13:02:35.965: W/org.restlet(1344): java.lang.Exception: Can't execute the query without the service's metadata.
11-16 13:02:35.965: W/org.restlet(1344):    at org.restlet.ext.odata.Query.execute(Query.java:350)
11-16 13:02:35.965: W/org.restlet(1344):    at org.restlet.ext.odata.Query.iterator(Query.java:645)
11-16 13:02:35.965: W/org.restlet(1344):    at net.ascorbin.locaspo.MainActivity$LoginTask.doInBackground(MainActivity.java:74)
11-16 13:02:35.965: W/org.restlet(1344):    at net.ascorbin.locaspo.MainActivity$LoginTask.doInBackground(MainActivity.java:1)
11-16 13:02:35.965: W/org.restlet(1344):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-16 13:02:35.965: W/org.restlet(1344):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-16 13:02:35.965: W/org.restlet(1344):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-16 13:02:35.965: W/org.restlet(1344):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-16 13:02:35.965: W/org.restlet(1344):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-16 13:02:35.965: W/org.restlet(1344):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-16 13:02:35.965: W/org.restlet(1344):    at java.lang.Thread.run(Thread.java:856)
11-16 13:02:35.965: W/dalvikvm(1344): threadid=11: thread exiting with uncaught exception (group=0x409c01f8) 
```

我还尝试导入 org.restlet.ext.httpclient.HttpClientHelper （以及 Eclipse 建议的任何其他 HttpClientHelper），这会导致略有不同的跟踪：

```
11-16 13:06:27.775: I/org.restlet(1446): Get the metadata for http://odata.netflix.com/v2/Catalog/ at http://odata.netflix.com/v2/Catalog/$metadata
11-16 13:06:27.815: I/org.restlet(1446): Starting the HTTP client
11-16 13:06:27.836: W/org.restlet(1446): An error occurred during the communication with the remote HTTP server.
11-16 13:06:27.836: W/org.restlet(1446): java.net.UnknownHostException: Unable to resolve host "odata.netflix.com": No address associated with hostname
11-16 13:06:27.836: W/org.restlet(1446):    at java.net.InetAddress.lookupHostByName(InetAddress.java:400)
11-16 13:06:27.836: W/org.restlet(1446):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
11-16 13:06:27.836: W/org.restlet(1446):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-16 13:06:27.836: W/org.restlet(1446):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.ext.httpclient.internal.HttpMethodCall.sendRequest(HttpMethodCall.java:335)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.engine.http.adapter.ClientAdapter.commit(ClientAdapter.java:120)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.engine.http.HttpClientHelper.handle(HttpClientHelper.java:113)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.Client.handle(Client.java:180)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.handle(ClientResource.java:944)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.handle(ClientResource.java:912)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.handle(ClientResource.java:867)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.handle(ClientResource.java:892)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.handle(ClientResource.java:801)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.resource.ClientResource.get(ClientResource.java:544)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.ext.odata.Service.getMetadata(Service.java:483)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.ext.odata.Query.<init>(Query.java:232)
11-16 13:06:27.836: W/org.restlet(1446):    at org.restlet.ext.odata.Service.createQuery(Service.java:277)
11-16 13:06:27.836: W/org.restlet(1446):    at net.ascorbin.locaspo.SystemDataObjectsService.createGenreQuery(SystemDataObjectsService.java:87)
11-16 13:06:27.836: W/org.restlet(1446):    at net.ascorbin.locaspo.MainActivity$LoginTask.doInBackground(MainActivity.java:71)
11-16 13:06:27.836: W/org.restlet(1446):    at net.ascorbin.locaspo.MainActivity$LoginTask.doInBackground(MainActivity.java:1)
11-16 13:06:27.836: W/org.restlet(1446):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-16 13:06:27.836: W/org.restlet(1446):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-16 13:06:27.836: W/org.restlet(1446):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-16 13:06:27.836: W/org.restlet(1446):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-16 13:06:27.836: W/org.restlet(1446):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-16 13:06:27.836: W/org.restlet(1446):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-16 13:06:27.836: W/org.restlet(1446):    at java.lang.Thread.run(Thread.java:856)
11-16 13:06:27.836: I/org.restlet(1446): A recoverable error was detected (1001), attempting again in 2000 ms. 
```

我不知道还能做什么，如果有人有一个正在运行的 Restlet/oData android 项目，也许他/她可以给我一个提示？

# tree - Erlang 中的 B+ 树数据结构

> ID：13416356
> 
> 赞同：7
> 
> 时间：2012-11-16T12:11:00.323
> 
> 标签：tree, erlang, linked-list, b-tree

**[`B+ Tree`](http://en.wikipedia.org/wiki/B%2B_tree)**Erlang中是否有任何已知的开源数据结构实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T16:24:31.930

`eleveldb`如果您真的需要 B+ 树，我肯定会建议您研究应用程序。关键是您希望将数据存储在树的叶子中，在磁盘上离线，因为这通常是 B+-trees 的一个选项。还有一个纯 Erlang 的 LevelDB 变体，`hanoidb`它也很不错，由 Kresten Krab Thorup 编写。相同的使用领域。

如果您需要内存存储，您应该查看 ETS 或 Mnesia（后者用于分发）。在 Erlang 中，这些往往是最快的解决方案，因为您具有永远不会碰到磁盘的优势。如果您可以对数据进行标准键/值查找，而无需在 Mnesia 的事务上下文中运行（进行脏读），则尤其如此。典型的查找速度是 5-10 纳秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T04:35:40.333

如果您不想侵入开源数据库系统，这只是一种选择：

Chris Okasaki 的*纯函数式数据结构*可以让您对自己实现它有所了解。根据我的经验，B+ 树本身并不复杂。

如果您既想要内存存储又想要比 ets 和 mnesia 更底层（在某种意义上）的东西，我建议您使用[gb_trees 。](http://www.erlang.org/doc/man/gb_trees.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T16:24:24.210

据我所知，没有可用的独立库。然而，[CouchDB 源代码](https://github.com/apache/couchdb/)非常易读并且实现得很好。

# c# - C# http(s) GET 请求问题

> ID：13416363
> 
> 赞同：1
> 
> 时间：2012-11-16T12:11:24.610
> 
> 标签：c#, http, https, get, request

不知何故，我相信我没有正确执行我的 HTTP 请求。

本站：

[https://www.bintube.com/login/](https://www.bintube.com/login/)

有 2 个带有名称的 html 输入字段：

```
ctl00$main$Login1$UserName and ctl00$main$Login1$Password 
```

提交按钮的 HTML 代码是：

```
<input type="submit" name="ctl00$main$Login1$LoginButton" value="Login" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$main$Login1$LoginButton&quot;, &quot;&quot;, true, &quot;Login1&quot;, &quot;&quot;, false, false))" id="ctl00_main_Login1_LoginButton" /> 
```

奇怪的是，它不包含在表单标签中，不幸的是 onclick 对我来说是一个黑盒子。

所以为了得到正确的 GET 请求参数，我必须使用 Fiddler，因为我不知道 GET URL 参数（时间戳和哈希）是如何生成的。在提琴手中看起来像这样：

```
http://support.bintube.com/access/remote/?name=myname&email=myemail%40gmail.com&external_id=myexternal_id&organization=BinTube.com&timestamp=1353061816&hash=2372492438924389243 
```

[但是，此 URL 与前面提到的 URL https://www.bintube.com/login/](https://www.bintube.com/login/) (SSL)完全不同。所以我不知道我是否错过了任何东西，直到它跳转到[http://support.bintube.com/](http://support.bintube.com/)（这是 Fiddler 向我展示的），而且，我总是必须使用 Fiddler 给我 C# 代码的 URL ，以便使用我的代码登录。理想情况下，我的代码会自行解决所有问题，因此我不必使用 Fiddler。

我的代码是：

```
var cc = new CookieContainer();
List<string> paras = new List<string>();
string url;
string html;
// data copied from Fiddler, (changed some of it of course):
paras.Add(String.Format("{0}={1}", "name", HttpUtility.UrlEncode("myname")));
paras.Add(String.Format("{0}={1}", "email", HttpUtility.UrlEncode("myemail")));
paras.Add(String.Format("{0}={1}", "external_id", HttpUtility.UrlEncode("myexternal_id")));
paras.Add(String.Format("{0}={1}", "organization", HttpUtility.UrlEncode("BinTube.com")));
paras.Add(String.Format("{0}={1}", "timestamp", HttpUtility.UrlEncode("1353061816")));
paras.Add(String.Format("{0}={1}", "hash", HttpUtility.UrlEncode("2372492438924389243")));
url = "http://support.bintube.com/access/remote/" + "?" + paras.Aggregate((x, y) => x + "&" + y);
var req = (HttpWebRequest)WebRequest.Create(url);
Console.WriteLine(url);
req.CookieContainer = cc;
req.Method = "GET";
req.AllowAutoRedirect = true;
// also copied from Fiddler
req.Host = "support.bintube.com";
req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11";
req.KeepAlive = true;
req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
//req.Headers["Accept-Encoding"] = "gzip,deflate,sdch"; //<- this give gibberish response, why?
req.Headers["Accept-Language"] = "de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4";
req.Headers["Accept-Charset"] = "ISO-8859-1,utf-8;q=0.7,*;q=0.3";
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
cc.Add(resp.Cookies);
//rewrite cookies for further requests (found that somewhere, but did not help)
string ckheader = cc.GetCookieHeader(req.RequestUri);
cc.SetCookies(new Uri("http://www.bintube.com/"), ckheader);
StreamReader r = new StreamReader(resp.GetResponseStream());
html = r.ReadToEnd(); 
```

该代码有效。有时它停止工作，然后我必须从 Fiddler 获取新的 GET 参数，这是丑陋的设计，我对此一点也不满意。第二个更大的问题是我不能使用

```
https://www.bintube.com/search/ (requires login for results) 
```

和我收到的饼干。收到的 cookie（来自第一个请求）是 _zendesk_session 和 _zendesk_shared_session cookie，没什么重要的（谷歌搜索）。所以不知何故，我相信我没有得到正确的饼干来进一步发展。

也许有人对我为什么会失败这么严重有一些提示？

# entity-framework - 实体框架代码优先 - 复合主键上的导航属性

> ID：13416364
> 
> 赞同：2
> 
> 时间：2012-11-16T12:11:29.743
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, firebird2.5

*   火鸟 2.5
*   实体框架 5
*   火鸟客户端DLL 3.0.0.0

嗨，我正在尝试使用实体框架（代码优先）访问我的旧数据库。我遇到了数据库不使用外键的问题......

```
public class CUSTOMERS
{
    public int CUSTOMERID { get; set; }
    public string NAME{ get; set; }
}

public class INVOICES
{
    public int INVOICEID{ get; set; }
    public int CUSTOMERID{ get; set; }

    public virtual CUSTOMERS CUSTOMERS { get; set; }
}

public class INVOICEContext : DbContext
{
    public DbSet<CUSTOMERS> CUSTOMERS{ get; set; }
    public DbSet<INVOICES> INVOICES{ get; set; }

    public INVOICEContext(DbConnection connectionString) : base(connectionString, false)
    {
        Database.SetInitializer<INVOICEContext>(null);
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        /*modelBuilder.Entity<INVOICES>().HasRequired(b => b.CUSTOMERS)
                    .WithMany()
                    .Map(p => p.MapKey("INVOICEID"));*/ //Doesn't work because INVOICEID is defined

        modelBuilder.Entity<INVOICES>().HasKey(a => new { a.INVOICEID, a.CUSTOMERID});
        modelBuilder.Entity<CUSTOMERS>().HasKey(a => new { a.CUSTOMERID });

        base.OnModelCreating(modelBuilder);
    }
} 
```

通常我可以`CUSTOMERID`从类中删除该属性`INVOICES`，但在这种情况下它是主键的一部分......

我发现了许多建议使用的线程`IsIndependent`，但它似乎[已从 Entity Framework 5 (或 4.1)](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/285bc785-d884-4342-bfcf-a33847139501/)中删除。

我希望你能理解我糟糕的英语，也许给我一个提示我做错了什么^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:34:09.580

我不知道您所说的“*数据库不使用外键*”是什么意思。所以，也许以下不是您正在寻找的答案。`...MapKey...`但是我想说，如果您替换为`HasForeignKey`并使用`CUSTOMERID`而不是`INVOICEID`作为外键属性，您可以使用代码中注释掉的关系映射：

```
modelBuilder.Entity<INVOICES>()
    .HasRequired(b => b.CUSTOMERS)
    .WithMany()
    .HasForeignKey(b => b.CUSTOMERID); 
```

在我看来，模型和映射的其余部分都很好。您的关系是一种*识别关系*（这意味着外键是复合主键的一部分），它是与实体框架的有效映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:38:41.080

试试这个 ...

```
modelBuilder.Entity<INVOICES>()
      .HasRequired(i => i.CUSTOMERS)
      .WithMany()
      .HasForeignKey(i => i.CUSTOMERID); 
```

# objective-c - NSThread在失去焦点时停止

> ID：13416367
> 
> 赞同：1
> 
> 时间：2012-11-16T12:11:48.317
> 
> 标签：objective-c, ios, nsthread

我有一些线程需要持续运行或被锁定以供我使用。当我锁定电话或交换应用程序时，线程似乎停止，直到应用程序重新聚焦。

我有一个类 Worker，它是 NSThread 的子类。有一个名为 start 的方法，由创建 Worker 对象的 firstViewController 调用。

```
//method start
[self performSelectorInBackground:@selector(run) withObject:self]; 
```

我需要做什么才能让我的线程一直运行，而不是只在焦点上运行？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:18:37.793

当您的应用程序进入后台时，所有线程都挂起 - 除非您已将应用程序配置为使用多任务处理，并且您的工作正在使用多任务处理方法完成。这在[Apple developer](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)上有详细说明。

简而言之，如果你想在 App Store 中被接受，你基本上不能在 iOS 的后台持续运行一个线程，除非你是一个导航或 VOIP 应用程序。进入后台后，您可以让线程继续运行大约 10 分钟，但仅此而已。

# c# - 懒惰地实例化一个很少使用的视图模型？

> ID：13416368
> 
> 赞同：0
> 
> 时间：2012-11-16T12:11:53.020
> 
> 标签：c#, .net, mvvm, viewmodel, lazy-initialization

我的主视图模型 ( `mainViewModel`) 包含一个内部视图模型 ( `innerViewModel`)，它使用 DataTemplate 绑定到它的视图 (innerView)。

在我的`mainView`我有一个`ContentPresenter`它的 Content 属性绑定到`innerViewModel`并且它的 Visibility 绑定到一个`IsVisible`属性。Visibility 属性是 Collapsed 并且很少设置为 Visible。

我`mainViewModel`是列表中约 1000 个中的一个。目前，每个实例`mainViewModel`也有一个`innerViewModel`几乎从未使用过的实例。是否有一种延迟实例化的标准方法，`innerViewModel`只有当它的视图变得可见时才创建它？懒惰实例化的正常方法不起作用，因为`innerViewModel`在绑定中使用。

也许有更好的方法来将一个罕见的控件容纳在另一个控件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:23:29.200

尝试使用[Lazy](http://msdn.microsoft.com/en-us/library/dd997286.aspx)对象进行延迟初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:43:03.787

“是否有一种懒惰地实例化 innerViewModel 的标准方法，以便仅在它的视图变得可见时才创建它？”

解决方案就是这样做。现在，在 IsVisible 属性首次设置为 true 之前，我实际上并没有创建 innerViewModel 的实例。这意味着 mainView 上的 ContentPresenter 的 Content 大部分时间都绑定为 null，但这似乎不是问题。

# php - 从两个表中选择（count、order by、group by）codeigniter

> ID：13416370
> 
> 赞同：1
> 
> 时间：2012-11-16T12:12:02.207
> 
> 标签：php, codeigniter

我有一个 sql 命令，它可以工作，但我不能在 Codeigniter 中使用它，

当我在 phpmyadmin 中使用它时，它是有效的

> 选择 online_visitors.page_id , hotels.hotel_name , count(online_visitors.page_id) as count_visit FROM `online_visitors`, `hotels`where online_visitors.page_type = 'hotel' AND online_visitors.is_bot = 0 AND hotels.ID = online_visitors.page_id group by online_visitors.page_id order by online_visitors。 page_id asc

但是当我想在codeigniter代码中使用它时，我不能

```
$this->db->select("page_id , hotel_name");
$this->db->from("hotels");
$this->db->join("online_visitors");
$this->db->where("is_bot", 0);
$this->db->where("page_type", 'hotel');
$this->db->group_by("page_id");
$this->db->order_by("page_id");
$this->db->get(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:24:35.563

您可以通过使用带有联接的 CodeIgniter 活动记录来尝试此操作

```
 $this->db->select('ov.page_id , h.hotel_name, count(ov.page_id) as count_visit ');
    $this->db->from('online_visitors as ov');
    $this->db->join('hotels as h','h.ID = ov.page_id');
    $this->db->where('ov.page_type','hotel');
    $this->db->where('ov.is_bot',0);
    $this->db->group_by('ov.page_id');
    $this->db->order_by('ov.page_id',"asc");
    $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:19:40.177

您可以通过提到的 2 种方法来做到这一点

```
$query=$this->db->query(
'SELECT online_visitors.page_id , hotels.hotel_name , count(online_visitors.page_id) as count_visit FROM online_visitors , hotels WHERE online_visitors.page_type = 'hotel' AND online_visitors.is_bot = 0 AND hotels.ID = online_visitors.page_id group by online_visitors.page_id order by online_visitors.page_id asc'
); 
```

你可以`$query`作为对象访问

[或者您可以使用Active Record](http://codeigniter.com/user_guide/database/active_record.html)将其分解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:23:48.107

```
$this->db->select("online_visitors.page_id , 
hotels.hotel_name,count(online_visitors.page_id) as count_visit");

$this->db>where("online_visitors.page_type = 'hotel'");
$this->db>where("online_visitors.is_bot = 0");
$this->db>where("hotels.ID = online_visitors.page_id");
$this->db->group_by("online_visitors.page_id");
$this->db->order_by("online_visitors.page_id", "asc"); 
```

# jquery - 使用 DOM 更改加载另一个页面

> ID：13416372
> 
> 赞同：1
> 
> 时间：2012-11-16T12:12:12.703
> 
> 标签：jquery, dom

我正在尝试从**initial.html**加载不同的 html 页面：

```
$("#hidden_demo_div").load("modules/another.html", function (data) {
    var value = $(data).filter("#demo_div");
    var html = value.html(); // THERE IS NO <strong>Hello</strong> here!!!
} 
```

**这里是另一个.html**的片段

 **```
<html>
    .........................
    <head>
    <script type="text/javascript">
        $(document).ready(function() {
             anotherMethodInvocation();
        });
    </script>
    </head>

    <div id="demo_div"></div>
</html> 
```

接下来在JS for **another.html**我有：

```
function anotherMethodInvocation() {    
    $("#demo_div").append("<strong>Hello</strong>");
} 
```

所以问题是为什么我（在加载时的回调函数中）只是静态 HTML，但它没有改变？

**更新 1：**

a）“#hidden_​​demo_div”位于**initial.html**（链接带有.load的JS代码的HTML）。该元素在 BODY 声明：

b) 即使我放在 BODY 上它也不起作用（到一个 html 文件）

```
<div id="hidden_demo_div"></div> 
```

和（到另一个 html 文件）

```
<div id="demo_div"></div> 
```

在身体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:29:19.257

重要的是要意识到在加载远程页面时，该`ready`事件已经在主页中发生。这意味着包含在`$(document).ready(function() {}`远程页面中的代码将立即触发。

如果远程文件中的代码在它引用的 html 之前，它将找不到该 html，因为在代码触发时它不存在。

在远程页面中尝试这种结构：

```
<div id="demo_div"></div>
<!--  "demo_div" now exists , can run code on it -->
<script type="text/javascript">            
       anotherMethodInvocation();

</script> 
```**

# wcf - 为多个绑定引导 WCF

> ID：13416373
> 
> 赞同：0
> 
> 时间：2012-11-16T12:12:19.757
> 
> 标签：wcf, dependency-injection, named-pipes

我曾经有一个基于 HTTP 的传输，我在 Applicaiton_Start 中引导我的应用程序。通过引导程序，我的意思是设置我的 DI 容器等。我想更改为命名管道，但我可能想继续在另一台服务器上使用 HTTP。

我可以使用以下内容进行独立于传输的引导吗？我在 IIS 内托管。

```
/// <summary>
/// This class needs to reside in the App_Code special ASP.NET folder
/// It also needs to be set with a build action of Content
/// The signature public static void AppInitialize() is recognised by ASP.NET and is 
/// always called no matter the binding (HTTP or not)
/// </summary>
public static class AppStart
{
    public static void AppInitialize()
    {
        Bootstrapper.Initialize();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:30:28.060

您需要编写一个自定义[ServiceHostFactory](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactory.aspx)以及其他几个类。

Rory Primrose 有两篇关于使用 Unity 的主题的不错的博客文章。

*   [WCF 服务的 Unity 依赖注入 - 第 1 部分](http://www.neovolve.com/2010/05/15/unity-dependency-injection-for-wcf-services-e28093-part-1/)

*   [WCF 服务的 Unity 依赖注入 - 第 2 部分](http://www.neovolve.com/2010/05/17/unity-dependency-injections-for-wcf-services-e28093-part-2/)

# regex - 在文本编辑器中用正则表达式替换文本

> ID：13416374
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:12:21.007
> 
> 标签：regex, text, notepad++, text-manipulation

我需要编辑文本文件中的行。

文本文件包含 100 多行以下格式的数据。

```
 Cosmos Rh Us (Paperback)   $10.99   Shipped: 
 The Good Earth (Paperback) $6.66    Shipped: 
 BEST OF D.H. LAWRENCE (Paperback) $7.89 Shipped:
 ... 
```

这些是我用来买书的网上书店的节选

我在测试编辑器中有这些数据。我如何编辑它 [Fine/Replace] 使数据变成这样

```
 $10.99
  $6.66
  $7.89 
```

或者更好，*没有美元符号*，因为它很容易总计。

我使用记事本++作为文本编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:15:08.270

搜索（不要忘记在替换框中启用正则表达式！）

```
^.*\$(\d+\.\d+).*$ 
```

并将所有替换为

```
\1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:18:29.780

您可以简单地匹配整行并捕获 $ 符号后的所有数字：

```
Find what: ^[^$]*\$(\d+\.\d+).*$
Replace with: $1 
```

确保您**没有**选中“.matches newline”选项。请注意，如果一行中有多个 $ 符号，这将出现意外行为。

您可能需要更新到 Notepad++ 6。在此之前，一些正则表达式功能无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:17:46.497

寻找：

```
((?<=\$)[\d\.]+) 
```

用。。。来代替：

`\1`或`$1`（无论 Notepad++ 使用哪个）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:27:45.133

第一个正则表达式将被替换为空

```
[a-zA-Z0-9].*\) 
```

第二个正则表达式将被替换

```
[a-zA-Z]+\: 
```

# mysql - 另一个 1045：拒绝用户“某人”@“本地主机”的访问（使用密码：是）

> ID：13416375
> 
> 赞同：3
> 
> 时间：2012-11-16T12:12:23.923
> 
> 标签：mysql, database-connection

由于很多假人，我无法使用用户连接到 MySQL 服务器。

**这是我的用户在数据库`mysql`表中的设置`user`**

```
Host:   %
User: someone
Password: mypassword
Select_priv, Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv, Reload_priv, Shutdown_priv, Process_priv, File_priv, Grant_priv, References_priv, Index_priv, Alter_priv, Show_db_priv, Super_priv, Create_tmp_table_priv, Lock_tables_priv, Execute_priv, Repl_slave_priv, Repl_client_priv, Create_view_priv, Show_view_priv, Create_routine_priv, Alter_routine_priv, Create_user_priv: Y
max_questions, max_updates, max_connection, max_user_connections: 0 
```

**联系**

我通过`localhost`控制台或安装在这台机器上的 phpMyAdmin 连接。

**MySQL 服务器**

来自 phpMyAdmin 的信息：`Server: Localhost via UNIX socket | Server version: 5.0.70-log | Protocol version: 10`

1.  当mysql服务器运行时，`mysqld_safe --skip-grant-tables &`我可以以任何用户身份连接到服务器。
2.  当mysql服务器正常运行时，`/etc/init.d/mysqld start`我不能出现错误

    > 1045 : 用户 'someone'@'localhost' 的访问被拒绝（使用密码：YES）

我花了几个小时在 google 和 mysql 文档中寻找解决方案，但没有结果。可能这将是一些必要的设置。希望你能给我一些建议。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:19:58.590

您可能需要为某人用户重置密码。它经常发生。

尝试在不检查密码的情况下启动本地服务器：

```
mysqld_safe --skip-grant-tables 
```

接着

```
set password for 'someone'@'localhost' password('new fancy password') 
```

（注意''）

在文档中查看更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/set-password.html](http://dev.mysql.com/doc/refman/5.0/en/set-password.html)

这个答案也可能有帮助

[MySQL - 错误 1045 - 访问被拒绝](https://stackoverflow.com/questions/489119/mysql-error-1045-access-denied)

# c# - 在 TeamCity 中作为 MSTest 构建步骤的一部分运行 dotCover

> ID：13416378
> 
> 赞同：0
> 
> 时间：2012-11-16T12:12:39.797
> 
> 标签：c#, testing, teamcity, dotcover

我目前正在运行 dotCover 作为我在 TeamCity 中的 MSTest 构建步骤的一部分。我已将 MSTest 配置为运行与 匹配的程序集文件`**.Tests.dll`，否则其他所有内容都具有默认设置。

我不知道 dotCover 如何决定要跟踪哪些文件（我想知道），但我注意到很多第三方库和测试项目本身都出现在报告中 - 我想将其排除在外进行了分析和报告。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:18:53.513

在 TeamCity 7 中，您可以为 dotCover 指定程序集过滤器。例如，您可以通过添加否定过滤器来排除引用的程序集：

```
-:TheAssembly.To.Ignore.* 
```

这将排除名称开头的任何程序集`TheAssembly.To.Ignore`

![在此处输入图像描述](../Images/70078f23af5d0ded9f1c0b3bbcdc5bfe.png)

# opengl-es-2.0 - 在 GLSLES 顶点和片段着色器之间传递变量

> ID：13416379
> 
> 赞同：0
> 
> 时间：2012-11-16T12:12:45.403
> 
> 标签：opengl-es-2.0, glsl, shader, glsles

每当我查看示例着色器时，似乎这种类型的东西几乎是魔法发生的。有时信息会保存到位置/颜色等特殊位置，但有时片段着色器使用参数以及片段着色器如何知道从哪里获取我无法遵循的数据。

谁能提供一个中等简单的 GLES 着色器，并解释它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:29:40.120

看看[OpenGL ES 快速参考卡](http://www.khronos.org/opengles/sdk/docs/reference_cards/OpenGL-ES-2_0-Reference-card.pdf)。

您对稍后描述 GLSL 的“**内置输入、输出和常量**”感兴趣，特别是顶点着色器输出和片段着色器输入。

额外的 VS 输出（成为 FS 输入）应在两者中使用`varying`关键字声明。

# spring - 为什么用@target 定义的切入点不起作用？

> ID：13416380
> 
> 赞同：1
> 
> 时间：2012-11-16T12:12:47.697
> 
> 标签：spring, annotations, spring-annotations, aspects

我正在尝试使用 Spring 方面在使用`MongoRepository`. 目标是这个接口：

```
@InSearch
public interface ItemRepository extends MongoRepository<Item, Long>, 
    ItemRepositoryCustom 
{
    List<Item> findAllByUsername( String username );
    List<Item> findAllBySessionId( Long sessionId );
} 
```

当我使用这个切入点时：

```
@Pointcut( "execution(* save(..)) && " + 
    "target(org.springframework.data.mongodb.repository.MongoRepository)" )
private void saveEntity()
{} 
```

此方法在`open`调用方法之前运行正常：

```
@Before( "saveEntity() && args(entity)" )
public void beforeSavingEntity( JoinPoint jp, AuditedBean entity )
{ ... } 
```

但我希望它只在带有注释的接口上运行，`@InSearch`所以我尝试以这种方式定义切入点：

```
@Pointcut( "execution(* save(..)) && " +
    "target(org.springframework.data.mongodb.repository.MongoRepository) && " +
    "@target(xx.annotations.InSearch)" )
private void saveEntity()
{} 
```

注释定义：

```
@Target( { ElementType.TYPE} )
@Retention(RetentionPolicy.RUNTIME)
public @interface InSearch
{} 
```

使用此切入点，`beforeSavingEntity`不会调用该方法。我在日志上没有任何错误。我不确定我是否理解了`@target`关于`@within`. 我也试过了`@within`，也没有用。

我必须如何定义这个切入点以在实现扩展并用注释`save`的接口的类中选择方法执行？`MongoRepository``@InSearch`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:45:54.170

我认为您在应用程序中使用了基于类的代理。

由于注释没有被 Java 中的实现类继承，请尝试放在`@InSearch`实现类上。

请参阅[我应该在哪里放置 @Transactional 注释：在接口定义或实现类中？](https://stackoverflow.com/questions/3120143/where-should-i-put-transactional-annotation-at-an-interface-definition-or-at-a)

# wpf - 在 WPF 窗口中的 Height 属性上绑定，当有 Width 属性时不触发

> ID：13416386
> 
> 赞同：0
> 
> 时间：2012-11-16T12:13:10.770
> 
> 标签：wpf, xaml

我有以下 XAML：

```
<Window x:Class="Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfToolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
Title="{x:Static prop:Resources.Window1}" 
Height="{Binding WindowHeight}"
MinHeight="{Binding WindowMinHeight}"
MinWidth="500"> 
```

`WindowHeight`正如预期的那样，火灾的吸气剂。

但是当我添加：

```
Width="750" 
```

到 XAML .. ：

```
<Window x:Class="Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfToolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
Title="{x:Static prop:Resources.Window1}" 
Height="{Binding WindowHeight}"
MinHeight="{Binding WindowMinHeight}"
Width="750"
MinWidth="500"> 
```

.. getter for`WindowHeight`不会触发。

为什么是这样？

谢谢，乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:55:29.317

尝试这个：

```
<Window x:Name="window" x:Class="Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:WpfToolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
Title="{x:Static prop:Resources.Window1}"
Height="300"
Width="{Binding Height, ElementName=window}"> 
```

# java - Java 注释值

> ID：13416389
> 
> 赞同：0
> 
> 时间：2012-11-16T12:13:56.057
> 
> 标签：java, generics, annotations

我有几个注释，其中一个带有一些值的注释：

```
@Retention(RUNTIME)
@Target(PARAMETER)
public @interface Size {
     int min() default 1;
     int max() default Integer.MAX_VALUE;
} 
```

现在我有一些代码需要动态读取注释的所有这些值，并获取字段的类型和值。所以我不想检查我拥有的注释类型，而是更动态地进行检查。我注意到注释有点像带有某些方法的接口，所以我想我也许可以这样做：

```
Method[] methods = annotation.annotationType().getMethods();

Class<?>[] constructorParams = new Class<?>[methods.length];
Object[] values = new Object[methods.length];
int i = 0;
for(Method m : methods) {
    constructorParams[i] = m.getReturnType();
    values[i++] = m.invoke(annotation);
}

Constructor<? extends CustomValidator> constructor = clazz.getConstructor(constructorParams);
return constructor.newInstance(values); 
```

这行得通吗？还有其他更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:37:12.070

好的，给定上面的代码，改变这个语句：

```
Method[] methods = annotation.annotationType().getMethods(); 
```

有了这个声明

```
Method[] methods = annotation.annotationType().getDeclaredMethods(); 
```

修复它

# php - 异常处理程序在闭包中不起作用？

> ID：13416396
> 
> 赞同：1
> 
> 时间：2012-11-16T12:14:55.743
> 
> 标签：php, exception

我试图使用这个：

```
$error_handler = function($severity, $message, $filename, $lineno) {
    throw new ErrorException($message, 0, $severity, $filename, $lineno);
};

$exception_handler = function($exception) {
    self::invokeHttpError(500);
};

set_error_handler($error_handler, E_ALL | E_STRICT);
set_exception_handler($exception_handler); 
```

但是，当我调用它时它失败了：

```
$fn = function() {
    $application->test(); // $application is undefined
};
$fn(); 
```

调用错误处理程序，但不调用异常处理程序。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:37:50.797

取消引用未定义的对象会导致*致命且无法捕获*的错误。这就是发生这种情况时不调用您的异常处理程序和错误处理程序的原因。

虽然这种行为确实让我作为开发人员感到恼火，但我希望它会变成一个可捕获的异常。

**更新**

您可以做的一件事是在您的常规错误处理程序中抛出一个 ErrorException 来解决这个问题。这将防止在取消引用未定义符号时出现无法捕获的致命错误。

# javascript - 在 jQuery 和 Phonegap 中滑动会意外工作

> ID：13416400
> 
> 赞同：3
> 
> 时间：2012-11-16T12:15:10.763
> 
> 标签：javascript, android, jquery, cordova

我正在使用[此答案](https://stackoverflow.com/a/13396668/1022206)中给出的代码在我的 Phonegap 应用程序中滑动多个页面。

但是，似乎不推荐使用实时功能，此外，当我尝试重新加载时，页面下方会出现“0”。当我尝试更多时，会创建一串零，每个零的数量表示该页面的重新加载次数。长话短说：刷卡有效，但刷卡页面的每次加载都会出现 0。

我试图改成这个，但似乎不起作用（我使用的是 Phonegap 2.1.0、jQuery 1.8.2 和 jQuery Mobile 1.1.1）。

```
<script type="text/javascript">
    $('div.ui-page').on("swipeleft", function () {
        var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {
                transition: "slide",
                reverse: false
            }, true, true);
        }
    });
    $('div.ui-page').on("swiperight", function () {
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {
                transition: "slide",
                reverse: true
            }, true, true);
        }
    });
</script> 
```

编辑：我试过这个，与最初的问题一样：

```
<script type="text/javascript">
    $(document).delegate('div.ui-page', 'swipeleft', function () {
        var nextpage = $(this).nexy('div[data-role="page"]');
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {
                transition: "slide",
                reverse: false
            }, true, true);
        }
    });
    $(document).delegate('div.ui-page', 'swiperight', function () {
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {
                transition: "slide",
                reverse: false
            }, true, true);
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:33:34.183

该版本的 on 等效于 bind。要更换现场，您需要

```
$(document).on("swipeleft", "div.ui-page", function... 
```

要进一步调试事件，请检查 $(this) 所指的内容 - 它可能不是您认为的页面，并且可能没有下一个/上一个元素。

这在一定程度上取决于您的应用程序的设置方式，但通常您不能依赖以任何特定顺序存在的页面 div。

此外，对 changePage 的调用似乎与当前文档（ [http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)）不匹配 - 最后两个正确的是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:21:29.377

我不知道回答我自己的问题是否符合良好的礼仪，但我找到了解决方案，我认为它会很方便可见。

我更新到 jQuery 1.8.2 和 jQuery mobile 1.2.0，一切正常。一个有效的例子在这里：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>EventApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/css/jquery.mobile.structure-1.2.0.min.css" />

    <script type="text/javascript" charset="utf-8" src="js/core/cordova-2.1.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
    <script type="text/javascript">
    $(document).ready( function() {
    $('div.ui-page').live("swipeleft", function () {
        var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {
                transition: "slide",
                reverse: false
            });
        }
    });
    $('div.ui-page').live("swiperight", function () {
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {
                transition: "slide",
                reverse: true
            });
        }
    });
    });
    </script>
</head>
<body>
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page one</h2>
    </div>
    <div data-role="content">
        You are in page one.
    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="b.html" data-icon="info">Info</a></li>
                <li><a href="#" data-icon="gear">Settings</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div>
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page two</h2>
    </div>
    <div data-role="content">
        You are in page two.
    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="b.html" data-icon="info">Info</a></li>
                <li><a href="#" data-icon="gear">Settings</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div>
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page three</h2>
    </div>
    <div data-role="content">
        You are in page three.
    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="b.html" data-icon="info">Info</a></li>
                <li><a href="#" data-icon="gear">Settings</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div>
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">The map</h2>
    </div>
    <div data-role="content">
        <div id="map_canvas"></div>
    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="b.html" data-icon="info">Info</a></li>
                <li><a href="#" data-icon="gear">Settings</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div>
</body> 
```

如果你想要[JsFiddle 就在这里](http://jsfiddle.net/jontxu/fjNYd/)

# integration - C# 和 LuaInterface：如何在 Lua 中向 C# 对象添加表条目

> ID：13416402
> 
> 赞同：2
> 
> 时间：2012-11-16T12:15:13.347
> 
> 标签：integration, luainterface

我将 SharpLua 与 MonoDevelop 一起使用。我在 C# 端创建了一个类，它应该可以从 Lua 中使用。这很好，我可以从 Lua 访问所有字段。这很容易。

```
public class Test {
  public string Name;
} 
```

可以从 Lua 访问

```
print(test.Name) 
```

现在，我想通过 Lua 创建新字段。在 Lua 中它应该看起来像

```
test.abc = "A string"
print(test.abc) 
```

但这没有用。我在 ObjectTranslator 中遇到错误。所以我无法从 Lua 扩展表。我不想从 C# 访问这个新条目。应该只能创建它们。

还有其他方法可以实现这一目标吗？我可以从 LuaTable 创建一个类并将其插入 Lua 吗？

```
lua["NewLuaTable"] = new ClassFromLuaTable; 
```

而不是在 Lua 中使用

```
NewLuaTable.abc = "A string"
print(NewLuaTable.abc); 
```

但是，我是如何得到通知的，我想知道的东西在 LuaTable 中发生了变化（NewLuaTable.Name 发生了变化）？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:27:55.020

好的，我自己找到的。

您可以使用函数 get_Item() 和 set_Item() 从 Lua 扩展 C# 类。这两个函数与 Lua 元表中的 __index 和 __newindex 相同。因此，您可以在 C# 中创建一个 Dictionary 表并将其填充到 set_Item() 函数中。如果 LuaInterface 在类中没有找到入口，它会调用 get_Item() 来查看，是否可以通过这种方式获取值。如果它是有效的键值对，您可以在那里查看您的表。

# ajax - Ajax.ActionLink as a Img - 编写代码而不是 img 链接

> ID：13416403
> 
> 赞同：0
> 
> 时间：2012-11-16T12:15:21.887
> 
> 标签：ajax, asp.net-mvc, hyperlink

我正在尝试插入一个 img 以用作 Ajax.ActionLink。

这是代码：

```
@Ajax.ActionLink("[replacethis]", "_Edit", "Account", new { id = "<#= UserId#>" }, new AjaxOptions() { UpdateTargetId = "subForm", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" }).ToHtmlString().Replace("[replacethis]", "<img src=\"" + Url.Content("../../Scripts/ribbonfiles/ribbon/images/cadUsers.png") + "\" />")); 
```

问题是我打印了所有代码而不是获取 img 作为链接。

我错过了什么吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:30:28.170

找不到解决方案，所以我正在创建一个 img 链接并调用一个 js 函数来做任何我想做的事情。

我能做的最好的。

# performance - sharepoint 2010 首次加载异常缓慢

> ID：13416404
> 
> 赞同：1
> 
> 时间：2012-11-16T12:15:29.837
> 
> 标签：performance, sharepoint

Iam 有一个负载平衡的 Windows 身份验证 sharepoint 2010 场。

我在另一个农场也有类似的设置。

现在的问题是第一次加载页面的加载性能问题。事实上，这两个农场在第一次加载时都很慢。

Farm1 只需要 15 秒，而我的 Farm2 需要 90 多秒来呈现相同的页面。

我同意在第一次加载时需要 15 秒但需要 90 多秒是正常的！好像不太对！？为什么 Farm2 加载需要这么多时间？

在我执行 IISRESET 之后，它的第一页访问速度非常慢。但是在第一次访问该页面后，它就变得正常了。

我在这里复制粘贴我的意思（取自启用的开发人员仪表板）：

```
 BeginRequestHandler (0.18 ms)
        PostAuthenticateRequestHandler (0.10 ms)
        PostResolveRequestCacheHandler (70266.36 ms)
            ExecuteOnChannel:GetProfileProperties (56800.21 ms)
                CreateChannelAsProcess:Microsoft.Office.Server.UserProfiles.IProfilePropertyService (56203.42 ms)
                    GetProcessSecurityTokenForServiceContext (56196.01 ms)
                    CreateChannelWithIssuedToken (6.68 ms)
                InitializeWcfOperation (0.09 ms)
                ExecuteWcfOperation:http://Microsoft.Office.Server.UserProfiles/GetProfileProperties (76.54 ms)
                    CleanUpWcfOperation (0.02 ms)
            GetWebPartPageContent (4983.56 ms)
                GetFileAndMetaInfo (4974.71 ms)
        Proxy Channel call for Enterprise Metadata Service (1033.40 ms)
        CreateChannelAsProcess:Microsoft.SharePoint.Taxonomy.IMetadataWebServiceApplication (23.08 ms) 
```

如您所见，ExecuteOnChannel:GetProfileProperties 需要 60 秒。它是什么，为什么会被调用？请建议。

亲切的问候，

斋

# c - LoadLibrary 失败，错误 0，如何排除故障？

> ID：13416408
> 
> 赞同：1
> 
> 时间：2012-11-16T12:15:46.107
> 
> 标签：c, winapi, loadlibrary

`LoadLibrary`返回句柄 0，但`GetLastError()`也返回 0。想法？需要注意的一点是这段代码过去可以正常工作，我没有改变任何东西。我刚刚将项目的存储库克隆到另一个文件夹中，在那里重建它并遇到了问题。

# java - 正则表达式仅在字符串后面没有特定字符时才匹配字符串

> ID：13416409
> 
> 赞同：1
> 
> 时间：2012-11-16T12:15:52.800
> 
> 标签：java, regex, lookahead

我需要一个正则表达式，它仅在字符串后面没有正斜杠（/）字符并且我想匹配整个字符串时才匹配字符串。

例如下面的字符串应该匹配

```
/Raj/details/002-542545-1145457 
```

但不是这个

```
/Raj/details/002-542545-1145457/show 
```

我尝试使用[Negative Lookahead](http://www.regular-expressions.info/lookaround.html)来实现[此答案](https://stackoverflow.com/a/9587930/324900)所指定的目标。

我的代码是这样的。

```
pattern = Pattern.compile("/.*/details/(?!.*/)");
matcher = pattern.matcher(text);
if(matcher.matches()) {
  System.out.println("success");
} else {
System.out.println("failure");
} 
```

它正在失败。但是，如果我使用`matcher.find()`它，它就会成功。

请帮助我理解为什么它不匹配以及实现此目的的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:28:03.040

这

```
^/[^/]+/details/[^/]+$ 
```

将匹配

```
/Raj/details/002-542545-1145457 
```

但不是

```
/Raj/details/002-542545-1145457/show 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:23:23.140

我认为你的正则表达式没有做你期望它做的事情。您缺少捕获 之后的数值数据的表达式的一部分`/details/`。

您的正则表达式是肯定的，`.find()`因为您当前表达式的字符串中有一个匹配项，但该字符串与表达式不完全匹配，这就是为什么`.matches()`不起作用。

您当前的表达式不是贪婪搜索，它一到达就停止匹配`/details/`. 如果有`/`after则匹配失败`/details/`，因此它不匹配之间的字符`/details/`和任何潜在的字符`/`- 在您的示例中，数字数据。这会导致`.matches()`失败，即使仍然存在正匹配。

如果您希望它匹配整个字符串直到并包括数字但之后不匹配，则以下正则表达式应该可以工作：`/.*/details/[0-9\-]*(?!.*/)`- 两者都`.find()`将`.matches()`返回正数，因为表达式现在匹配所有内容到潜在的`/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:19:32.543

你的正则表达式看起来不错。`matcher()`仅匹配整个字符串，而`find()`匹配字符串中的下一个子字符串。

# delphi - 数据感知 cxgrid 中的组合框

> ID：13416413
> 
> 赞同：0
> 
> 时间：2012-11-16T12:16:04.203
> 
> 标签：delphi, delphi-xe2, tcxgrid

我有一个连接到 toracledataset 对象的数据感知 cxgrid。

DB 内部有一列定义为 number(1,0) 以允许布尔值。

我想将相应的网格列格式化为 ComboBox 以使用户能够在两个选项之间进行选择。

如何将组合框中的字符串转换为将插入数据库的整数值？我知道如何使用常规组合框来做到这一点，但不在 cxgrid 内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:32:26.993

最好的方法是使用 cxEditrepositiory 添加 cxImageComboBox 添加项目并定义 Value 和 Valuetype ，然后可以为您的 GridColum.RepositoryItem 选择

# c++ - #define NOMINMAX 使用 std::min/max

> ID：13416418
> 
> 赞同：41
> 
> 时间：2012-11-16T12:16:26.453
> 
> 标签：c++, visual-studio, winapi

我最近补充说：

```
#define NOMINMAX
#include <Windows.h>
#include <algorithm> 
```

到我的 main.cpp 以便使用

```
std::max( x , x ); // x is just a placeholder and not actual anything
std::min( x  , x ); 
```

但我不能`std::max()/std::min()`在其他文件中使用。

```
error C2589: '(' : illegal token on right side of '::'
error C2059: syntax error : '::' 
```

我试图添加`#define NOMINMAX`我的其他文件，但失败了。线索是什么？

在问之前我环顾四周，但我不明白答案[在 Visual C++ 上 NOMINMAX 可能存在的问题](https://stackoverflow.com/questions/4913922/possible-problems-with-nominmax-on-visual-c)

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-16T16:45:34.517

如果您真的很绝望，请在函数名称周围加上括号：

```
(std::min)(x, y); 
```

此语法不会应用类似函数的宏。（正式地，要应用类似函数的宏，宏的名称必须后跟可选的空格，然后是'（'。）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-16T12:22:14.460

`NOMINMAX`通过编译器标志定义：

```
> cl.exe -DNOMINMAX ... 
```

这将为所有源文件定义。我不使用 IDE，但此页面提供了有关导航 IDE 以进行设置的指南：[Using STL in Windows Program Can Cause Min/Max Conflicts](http://support.microsoft.com/kb/143208) ：

> 只需定义 NOMINMAX 预处理器符号。这可以在 Developer Studio 项目中的 Build、Settings 下的 C/C++ 选项卡的 Preprocessor 类别中完成。这将抑制 Windef.h 中的最小和最大定义。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-12-17T09:28:04.370

如果您定义 NOMINMAX，因为您更喜欢 STL 版本，那么在包含使用 min/max 宏的 gdiplus.h 时可能会遇到问题。作为解决方案，您需要在包含 gdiplus.h**之前包含 STL 标头并使用“使用命名空间 std”。**

例如：

```
#define NOMINMAX

// Include C++ headers
#include <algorithm>
using namespace std;

// Include Windows headers
#include <windows.h>
#include <gdiplus.h> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-18T04:11:50.423

很可能你的问题是你`#define NOMINMAX`在你之后`#include "windows.h"`。重要的`#define`是先来。

原因是windows.h（实际上我认为windef.h，它包含在windows.h中）有类似这样的代码：

```
#ifndef NOMINMAX
#define min(x,y) ((x) < (y) ? (x) : (y))
#define max(x,y) ((x) > (y) ? (x) : (y))
#endif 
```

`#define NOMINMAX`告诉编译器（或实际上是预处理器）跳过 and 的定义也是`min`如此，`max`但它仅适用于你在你之前执行它的情况`#include "windows.h"`。

# php - CURL 登录并提交另一篇文章

> ID：13416421
> 
> 赞同：2
> 
> 时间：2012-11-16T12:16:33.553
> 
> 标签：php, post, curl, login

为了学习 PHP，我的老板让我做一些项目。到目前为止，我已经完成了一个待办事项列表和提醒 (www.frontpagewebdesign.com/newfolder)，但我现在要做的是发送 SMS 通知。

因为我买不起这么小的项目的短信网关，所以我决定在这个网站上使用我的帐户：www.sms-gratuite.ro。我的麻烦是使用 CURL 自动登录和发送短信。

我遵循了一个教程，这就是我到目前为止所做的：

```
<?php

$form_vars = array();
//array for SMS sending form values

$username = '****@****.com';
$password = '********';
$loginUrl = 'http://sms-gratuite.ro/page/autentificare';
$postUrl='http://sms-gratuite.ro/page/acasa';
$form_vars['to'] = "076xxxxxxx"; 
//my own phone number
$form_vars['mesaj'] = "test";
//SMS text
$encoded_form_vars = http_build_query($form_vars);
$user_agent="Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";

//init curl
$ch = curl_init();

//Set the URL to work with
curl_setopt($ch, CURLOPT_URL, $loginUrl);

// ENABLE HTTP POST
curl_setopt($ch, CURLOPT_POST, 1);

//Set the post parameters (mail and parola are the IDs of the form input fields)
curl_setopt($ch, CURLOPT_POSTFIELDS, 'mail='.$username.'&parola='.$password);

//Handle cookies for the login
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);

//execute the request (the login)
$store = curl_exec($ch);

//check if the Login was succcesful by finding a string on the resulting page
if(strpos($store, "Trimite mesaj")===FALSE)
echo "logged in";
else
echo "not logged";

//set the landing url
curl_setopt($ch, CURLOPT_URL, 'http://sms-gratuite.ro/page/autentificare');

$referer='';

curl_setopt($ch, CURLOPT_URL, $postUrl);
//curl_setopt($ch, CURLOPT_HTTPHEADER,array("Expect:"));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_REFERER, $referer);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'to='.$form_vars['to'].'&mesaj='.$form_vars['mesaj']);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);

$result = curl_exec($ch);

if(strpos($result, "Mesajul a fost trimis")===FALSE)
echo "<br>sms sent";
else
echo "<br>sms not sent";

curl_close($ch);

?> 
```

我没有任何错误，但它肯定不起作用。首先登录失败。这种形式是一种特殊的形式吗？ curl 不能处理它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:04:19.073

1.  您可以将每个 curl 请求结果放入不同的文件中，例如 page1.html、page2.html 等。这样您就可以在浏览器中打开并查看您收到的请求的确切页面是什么
2.  您需要像浏览器一样发出完全相同的请求。有像 HttpFox（如果您使用的是 FireFox）这样的浏览器插件，可以向您显示所有已发送的字段、所有 cookie 和其他所有相关内容。您可以将该列表与您的卷曲形成的内容进行比较，以找到缺少的部分

尝试这些步骤并评论您遇到的更多错误，最好是详细的。

# windows - 是否有将用户添加到组高级用户的批处理脚本？

> ID：13416422
> 
> 赞同：3
> 
> 时间：2012-11-16T12:16:34.413
> 
> 标签：windows, batch-file, windows-xp

我正在尝试创建一个脚本，该脚本将在我们安装的新系统上创建新用户帐户并将它们放入相应的权限组中。我已设法将用户添加到“管理员”组并将它们从“用户”组中删除，但是在将用户添加到“高级用户”和“远程桌面用户”组时遇到了一些麻烦。到目前为止的脚本如下：

```
net user User1 User1 /add

net user User2 User2 /add 

net localgroup administrators User2 /add

net localgroup powerusers User1 /add

net localgroup users Users2 /delete 
```

除了脚本的第 4 行之外的每一件事都执行得很好我已经尝试了以下行来替换第 4 行并且没有运气这些行如下：

```
net localgroup power_users user1 /add

net localgroup power%20%users user1 /add 
```

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:27:30.247

*网络本地组*

列出机器中可用的组。检查组是否存在，然后继续添加。

如果该组存在并且您仍然有问题，请尝试“Power Users”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:29:29.257

尝试

```
net localgroup "Power Users" User1 /add 
```

# android - 在 ListView 中搜索无法正常工作

> ID：13416423
> 
> 赞同：1
> 
> 时间：2012-11-16T12:16:39.293
> 
> 标签：android, android-layout, listview, search

我有一个包含大约 30 个项目的 listView，并通过 editText 向其中添加了搜索功能。当我在文本字段中输入“a”时，所有以“a”开头的内容都会显示在列表中，但是当我输入另一个字母时，即使列表包含带有“a”的项目+我输入的另一个字母，列表也会消失。

让我感到困惑的另一件事是列表中有一个名为 IWU Trading 的项目，这是我唯一可以搜索的项目，这意味着如果我键入“I”+“W”，该项目就会显示在 listView 中。但是，如果我输入“a”+“r”，就会出现一个名为“art”的项目。

我的问题。我该怎么做才能使此搜索功能起作用？为什么它的行为如此？

我的 XML

```
 <EditText
    android:id="@+id/searchEditText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/selectCustomerTextView"
    android:layout_marginTop="20dp"
    android:hint="@string/typeToSearch"
    android:ems="10"
    android:imeOptions="actionDone"
    android:inputType="textNoSuggestions"/>

<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/nextButton"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/searchEditText" 
    android:choiceMode="singleChoice"
    android:dividerHeight="5dp" >
</ListView> 
```

我的代码：

```
 private ArrayAdapter<Customer> _oldAdapter = null;

    public void onCreate(Bundle savedInstanceState) {

    super.onCreate( savedInstanceState );
    setContentView(R.layout.activity_customer_pick);
    EditText searchText = (EditText) findViewById(R.id.searchEditText);
    ListView listView = (ListView) findViewById(R.id.list_view);
    listView.setClickable(true);

    searchText.addTextChangedListener(filterTextWatcher);

    _oldAdapter = _phoneDAL.BindValues(this);

    listView.setAdapter(_oldAdapter);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
              String s = _oldAdapter.getItem(arg2).toString();
              _listViewPostion = arg2;

              Toast.makeText(CustomerPick.this, "Du valde: " + s, arg2).show();
        }
    });
} 
```

搜索方法：

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        ArrayAdapter<Customer> _adapter = new ArrayAdapter<Customer>(CustomerPick.this, android.R.layout.simple_list_item_single_choice, new ArrayList<Customer>());

        ListView listView = (ListView) findViewById(R.id.list_view);

        int textLength = s.length();

        if(textLength == 0){
            listView.setAdapter(_oldAdapter);
            return;
        }
                for (int i = 0; i < listView.getAdapter().getCount(); i++)
                {
                    String word = _oldAdapter.getItem(i).getCustName().toLowerCase();
                    if (textLength <= word.length())
                    {
                        if(s.toString().equalsIgnoreCase(word.substring(0, textLength)))
                        {
                            _adapter.add(_oldAdapter.getItem(i));
                        }
                    }
                }
                listView.setAdapter(_adapter);
    }
}; 
```

}

我的 CustomerClass（私有 ArrayAdapter _oldAdapter = null;）

```
public class Customer {
private final int _custNumber;
private final String _custName;

public Customer(int custNumber, String custName){
    _custNumber = custNumber;
    _custName = custName;
}

public int getCustNumber() {
    return _custNumber;
}

public String getCustName() {
    return _custName;
}

@Override
public String toString(){
    return _custName;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:48:31.853

通过添加解决了该问题：

```
ListView listView = (ListView) findViewById(R.id.list_view);
((Filterable) listView.getAdapter()).getFilter().filter(s); 
```

进入`afterTextChanged`方法`TextWatcher`（阅读Luksprog的评论后）。

# google-chrome-devtools - Chrome 开发工具丢失网络历史记录

> ID：13416425
> 
> 赞同：30
> 
> 时间：2012-11-16T12:16:43.570
> 
> 标签：google-chrome-devtools

Google Chrome 开发者工具中的网络标签很棒，但似乎丢失了某些表单帖子的所有历史记录。

有没有办法让它保留网络历史？

如果没有，我可以使用其他工具吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-16T16:18:13.957

面板中的“导航时保留日志”状态栏按钮`Network`应该可以解决问题：

[![在此处输入图像描述](../Images/c5b98b2da97ae680bfd49e0a32fa269a.png)](https://i.stack.imgur.com/j7ys1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T08:14:43.933

> 有没有办法让它保留网络历史？

是和否。它可能不会保留您想要的网络历史记录。（2017-11-22 用 chrome 62 验证）

> 如果没有，我可以使用其他工具吗？

[https://www.charlesproxy.com/](https://www.charlesproxy.com/)

Charles 是一个 HTTP 代理 / HTTP 监视器 / 反向代理，它使开发人员能够查看他们的机器和 Internet 之间的所有 HTTP 和 SSL / HTTPS 流量。这包括请求、响应和 HTTP 标头（其中包含 cookie 和缓存信息）。

# c# - 从列表的行为创建实例

> ID：13416427
> 
> 赞同：0
> 
> 时间：2012-11-16T12:16:45.910
> 
> 标签：c#, wpf, mvvm

我有一种行为来支持列表框中的 selectedItems。这是代码的一部分。**如果目标又名AssociatedObject.SelectedItems**为空，是否有办法 创建它的实例？我尝试的一切都失败了...

```
void ContextSelectedItems_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    //Need to unsubscribe from the events so we don't override the transfer
    UnsubscribeFromEvents();

    //Move items from the selected items list to the list box selection
    Transfer(SelectedItems as IList,  AssociatedObject.SelectedItems);

    //subscribe to the events again so we know when changes are made
    SubscribeToEvents();
}

public static void Transfer(IList source,  IList target)
{
    if (source == null || target == null)
    {
        return;
    }

    target.Clear();

    foreach (var o in source)
    {
       target.Add(o);
    }
} 
```

**更新**

这是我的代码的来源。 [http://blog.bdcsoft.com/developer-blog/2011/no-binding-for-you-a-listbox-selecteditems-behavior-solution/](http://blog.bdcsoft.com/developer-blog/2011/no-binding-for-you-a-listbox-selecteditems-behavior-solution/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:39:09.343

This might be easier than you think now that mathieu said why your code doesn't work. Try something like the code below.

HTH,
Berryl

```
void ContextSelectedItems_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
//Need to unsubscribe from the events so we don't override the transfer
UnsubscribeFromEvents();

//Move items from the selected items list to the list box selection
Transfer(SelectedItems as IList,  AssociatedObject);

//subscribe to the events again so we know when changes are made
SubscribeToEvents();
}

public static void Transfer(IList source,  ListBox lb)
{
    if (source == null || lb== null || !lb.SelectedItems.Any())
        return;
}
lb.SetSelectedItems(source)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:32:57.067

您不能为 ListBox 的 SelectedItems 属性分配值，因为它是只读属性： http: [//msdn.microsoft.com/en-us/library/system.windows.controls.listbox.selecteditems(v=vs. 110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.selecteditems(v=vs.110).aspx)

```
[BindableAttribute(true)]
public IList SelectedItems { get; } 
```

为此使用[SetSelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.setselecteditems.aspx)方法。

此外，ListBox 上的 SelectedItems 属性不应为空，而应为空列表。

# yii - 将 YII ajaxButton 连接到控制器以执行服务器端功能？

> ID：13416428
> 
> 赞同：1
> 
> 时间：2012-11-16T12:16:48.543
> 
> 标签：yii

我有以下按钮：

```
<?php $this->widget('bootstrap.widgets.TbButton', array(
  'label'=>'myLabel',
  'buttonType'=>'ajaxButton', 
  'url'=>'someUrl', 
  'type'=>'primary', // null, 'primary', 'info', 'success', 'warning', 'danger' or 'inverse'
  'size'=>'small', // null, 'large', 'small' or 'mini'
  'ajaxOptions'=>array(
      'type' => 'POST',
      'beforeSend' => '
        function( request ) {
          //alert(request);
        }'
      ,
      'success' => 'function( data ) {
          //alert(data);
        }'
      ,
      'data' => array( 
        'actionName' => "INCREMENT"
      )
  ),
)); ?> 
```

所以，棘手的部分是，我如何将此按钮连接到实际的后端代码？我会假设它是通过发布到 URL 来完成的。就我而言，我将 URL 设置为：

```
'url'=>'someUrl' 
```

这是否意味着我必须创建一个视图、控制器和模型，以便发布一个 URL？不经过努力就没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:39:28.897

您不一定需要新的视图。但是你需要一个动作来*捕捉*这个请求。

在 Yii 中，每个动作都有一个唯一的 url 来引用它，并且有一些函数可以为我们生成这样的 url，[即`createUrl`](http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail "http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail"). 还有其他版本，`createUrl`这里的一个来自`CController`.

因此，您将 url 属性修改为：

```
'url'=>$this->createUrl('controller-name/action-name') 
```

然后在您的控制器中添加操作：

```
public function actionActionname(){
    // do your server-side stuff
    // maybe also return some message back to client-side view
    if(success)
        echo "Y";
    else echo "N";
    Yii::app()->end();
} 
```

# c# - 表单提交前的Javascript加密密码

> ID：13416432
> 
> 赞同：-4
> 
> 时间：2012-11-16T12:16:58.320
> 
> 标签：c#, javascript

有没有办法在javascript中进行双向加密？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T12:19:20.000

> 我将纯密码文本存储在我的数据库中，而不是哈希值。

不要那样做。人们用他们的密码信任你。[保护它们](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet#Password_Storage_Rules)是您的责任。

> 我希望在发送到我的服务器之前加密密码，我的服务器可以使用 C# 将其解密回纯文本。任何人都知道哪种javascript加密适合我的情况？

没有任何。唯一适合保护在浏览器和服务器之间传输的数据的系统是 SSL。使用 HTTPS 方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:23:02.803

我同意 Quentin 的观点，即以纯格式保存用户密码是个坏主意。

为了安全的数据加密，您可以使用一些非对称加密算法，例如 RSA。您的公钥将保存在 javascript 端，C# 服务器将拥有私钥来使用 RSA 解密收到的密文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:23:08.903

如果您的服务器可以将密码解密为纯文本，那么邪恶的人也可以，

您应该将密码以纯文本形式发送到服务器，然后将其转换为常规格式，`md5()`或者`sha1()`将其按原样存储在数据库中。

然后当用户想要登录时，加密输入的密码并将其与您之前存储的密码进行比较。

如果你想保护从客户端到服务器的数据传输，你应该使用 https 来确保数据不会被截获。

祝你好运

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T12:51:45.823

在我个人看来，使用 Javascript 进行加密的最佳方式是使用 SHA-1。不要使用 MD5 它是最糟糕的（太容易解密）。你可以使用这个库： http: [//pajhome.org.uk/crypt/md5/sha1.html](http://pajhome.org.uk/crypt/md5/sha1.html)

并以这种方式使用它：

```
var encrypted_password = hex_sha512(plain_password); 
```

Javascript的缺点是添加密码盐（[http://en.wikipedia.org/wiki/Salt_(cryptography)](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)）将毫无头绪，因为如果不让每个人都获得盐，他们就无法将其提供给浏览器任何人（否则您无法加密密码）。

出于这个特定原因，最安全的仍然是在服务器端使用 HTTPS 进行加密，否则这个库将很容易完成这项工作。

# twitter-bootstrap - 正确使用按钮的方法？（火狐错误）

> ID：13416433
> 
> 赞同：0
> 
> 时间：2012-11-16T12:17:00.567
> 
> 标签：twitter-bootstrap

我想知道使用引导程序按钮的正确方法是什么。

我想要做的是简单的基于 ajax 的表单。当用户填写并单击“发送”按钮时，我希望此按钮为“引导单击”（我的意思是引导示例中的单击状态）。然后，如果表单发送正确，我想要一个 AJAX 响应，它将按钮返回到正常的未单击状态。所以，这是我的代码：

**表格：**

```
<input type="submit" id="button" class="btn" data-loading-text="Loading..." value="Send"/> 
```

**的JavaScript：**

```
$('#button').bind('click', function(){
  $(this).button('loading');
}) 
```

**AJAX 响应：**

```
$('#button').reset(); 
```

现在，在 Chrome 中，一切正常。但是，当我在 Firefox 中运行它时，我可以看到一个非常奇怪的错误。当我单击此按钮时，它会在鼠标按钮按下的那一刻消失。当我失去鼠标按钮时，引导按钮再次显示。另外，这个消失的东西是唯一发生的动作，我负责触发 ajax 响应的 JS 代码不起作用。使它起作用的唯一机会是双击如此之快，以至于在按钮消失之前发生第二次单击，但我认为很明显它不能那样工作；）

你有什么想法我做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:10:26.783

你应该`data-loading-text="Loading.."`不使用`data-loading-state="Loading"`

# c# - 打开 Word 文档，除非它有 C# 密码

> ID：13416434
> 
> 赞同：1
> 
> 时间：2012-11-16T12:17:11.953
> 
> 标签：c#, interop, ms-word

我正在尝试做的事情是运行 word 文档的文件夹，并使用 word 中的 tiff 打印机将它们转换为 .tif 文件。问题是，如果我遇到一个带有密码的文档，它应该跳过该文档而不提示输入密码，它应该都保留在后台。

我可以看到 Document 类有一个 HasPassword 属性，但是在打开文档之前无法检查它。

```
word.Documents.OpenNoRepairDialog(@"c:\testfolder\testDocWithPw.docx", ReadOnly: true); 
```

我还尝试给密码一个 emtpy 参数，并尝试捕获错误代码。但我必须按取消提示要求输入密码才能到达那里。

```
Application word = new Application();
word.DisplayAlerts = WdAlertLevel.wdAlertsNone;
try
{
    word.Documents.OpenNoRepairDialog(@"c:\testfolder\Doc2.docx", ReadOnly: true, PasswordDocument: "");
    word.ActivePrinter = "TIFF Image Printer 10.0";
    Doc.PrintOut(); //printout untested for now
    Doc.Close(false);
}
catch (System.Runtime.InteropServices.COMException ex)
{
    if (ex.ErrorCode == 0x12345678)
    {
        //skip file and log file name and position for review
    }
} 
```

提前谢谢

编辑：刚刚尝试用错误的密码输入密码，我可以使用错误代码部分，最好的部分是，当没有密码时，即使你给它一个密码，它也会打开文件。所以它基本上做我想要的。在更糟糕的情况下，如果我不应该打开一个我不应该打开的文档上的某个人的密码，我可以检查 hasPassword 属性，如果我不应该访问密码错误的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:44:57.587

我自己回答这个问题，所以我没有悬而未决的问题。解决方法很简单，打开的时候给个密码就行了，如果留空字符串，和不提问一样。然后可以捕获一个 com 异常并且可以按照我的意愿处理它。

```
Application word = new Application();
word.DisplayAlerts = WdAlertLevel.wdAlertsNone;
try
{
    word.Documents.OpenNoRepairDialog(@"c:\testfolder\Doc2.docx", ReadOnly: true, PasswordDocument: "RandomButSurelyNotRightPassword");
    word.ActivePrinter = "TIFF Image Printer 10.0";
    Doc.PrintOut(); //printout untested for now
    Doc.Close(false);
}
catch (System.Runtime.InteropServices.COMException ex)
{
    if (ex.ErrorCode == 0x12345678)
    {
        //skip file and log file name and position for review
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T02:45:54.037

当我第一次尝试时

```
word.Documents.OpenNoRepairDialog(@"c:\testfolder\Doc2.docx", ReadOnly: true, PasswordDocument: "RandomButSurelyNotRightPassword"); 
```

当我打开一个没有密码的单词时，提示不成功。然后我发现

```
"RandomButSurelyNotRightPassword" 
```

作为占位符密码太长...

# ruby-on-rails - Ruby on Rails 延迟作业本地无法运行

> ID：13416439
> 
> 赞同：4
> 
> 时间：2012-11-16T12:17:34.137
> 
> 标签：ruby-on-rails, ruby, delayed-job

我正在为活动记录 gem [https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)处理延迟作业 我正在尝试设置一个作业以在我的应用程序中发生事件五分钟后运行。五分钟过去后，我需要进行一些数据库更新。我试过 rake jobs:work 和 RAILS_ENV=development script/delayed_job start。在此之前，我已经运行了 bundle install、rails 生成延迟作业：活动记录和 rake db：迁移。我有一个彩票网站，需要每五分钟检查一次中奖者，并为中奖玩家更新代币。

我等了五分钟，但我的本地应用程序没有更新。

这是我到目前为止所拥有的：

宝石文件：

```
 gem 'delayed_job_active_record'

 gem "daemons" 
```

作业（位于 lib 中）

```
class WinnersJob < Struct.new(:blast_id)
def perform
      ...
    end 
```

控制器

```
 require 'winners'
 Delayed::Job.enqueue(WinnersJob.new(blast.id), 1, 5.minutes.from_now)
 end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T14:27:27.580

我认为您必须使用工头在本地启动后台工作人员。以下适用于我的 Mac。

来自 Heroku 文档：

然后，您需要告诉您的应用程序处理放入您的作业队列的作业，您可以通过将其添加到您的`Procfile`：

```
worker:  bundle exec rake jobs:work 
```

现在，当您使用 Foreman 启动应用程序时，它将开始处理您的作业队列。

```
foreman start 
```

说了这么多，除非您在 Mac 上进行部署，否则它们是否在本地运行并不重要。***（在我让它工作后***我注意到了这一点。）只有它在你的服务器上工作才重要。如果您在 Heroku 上进行部署，那么延迟作业效果很好。

参考：

[https://devcenter.heroku.com/articles/delayed-job](https://devcenter.heroku.com/articles/delayed-job)
[https://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

# html - 带有：after伪元素的img标签上的奇怪行为？

> ID：13416443
> 
> 赞同：0
> 
> 时间：2012-11-16T12:17:51.623
> 
> 标签：html, css

昨天我问了一个关于[用 CSS3 应用不均匀阴影](https://stackoverflow.com/questions/13400097/uneven-box-shadow-with-css3-html5)的问题，最终的结果是[这样](http://jsfiddle.net/8XN8j/)的（这让我印象深刻！）

不幸的是，当我开始尝试在图像上使用它时，我最终得到了[这个](http://jsfiddle.net/qUpZX/)（阴影根本没有出现）

我似乎无法弄清楚为什么会发生这种情况，我尝试消除 alt 文本（这没有帮助）但是给 img 一个空白的 src 属性修复它（显然虽然我不想这样做！）

我能想到的是它可能与`content:""`css有关？我试过弄乱它，但一无所获。

我可以使用 div 来包装 img，然后给它上课，但最终我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:20:06.467

因此，只需将图像放入这样的 div 中。这可以接受吗？像这样：

```
<div class="container"><img src="http://intelligentpenguin.co.uk/blank_story.gif" alt="" /></div> 
```

[http://jsfiddle.net/qUpZX/4/](http://jsfiddle.net/qUpZX/4/)

[这里](https://stackoverflow.com/questions/5457825/before-pseudo-class-doest-works-with-images "here")有一个相关的问题

显然它与“之前”和“之后”伪类有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:23:30.933

你为什么不使用 div 周围

```
<div class="container">
    <img src="http://intelligentpenguin.co.uk/blank_story.gif " alt="" />
</div>​ 
```

并改变css

```
.container img{
    width: 300px;
    height: 200px;
    margin: 50px;
    background-color: #eeeeee;
    z-index: 1;
} 
```

[**演示**](http://jsfiddle.net/qUpZX/6/)

# android - 表情符号底部的文字显示

> ID：13416455
> 
> 赞同：0
> 
> 时间：2012-11-16T12:18:47.737
> 
> 标签：android, android-layout

我`EditText`使用spannable显示表情符号，但问题是文字出现在表情符号图片的底部，而不是在它的中间（见图）。

那么，如何让它显示在中间呢？

![在此处输入图像描述](../Images/ea9cc2b225925966dc275f169ce4f79d.png)

```
 <EditText
        android:id="@+id/et_tInput"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:inputType="textCapSentences|textMultiLine"
        android:maxLength="2000"
        android:maxLines="4"
        android:textColor="@android:color/black"
        android:textCursorDrawable="@drawable/black_cursor"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:35:07.083

为您设置重心`TextView`

```
android:gravity="center" 
```

或者

```
android:gravity="center_vertical" 
```

# css - 即使鼠标离开主下拉链接，如何保持悬停状态

> ID：13416456
> 
> 赞同：1
> 
> 时间：2012-11-16T12:18:46.683
> 
> 标签：css, drop-down-menu

我有一个可用的纯 CSS 下拉菜单

html;

```
<ul id=nav>
<li><a href="">Main Link 1</a>
    <ul>
        <li><a href="">Main Link 1 Sub Link 1</a></li>
        <li><a href="">Main Link 1 Sub Link 2</a></li>
        <li><a href="">Main Link 1 Sub Link 3</a></li>
        <li><a href="">Main Link 1 Sub Link 4</a></li>
    </ul></li>
<li><a href="">Main Link 2</a></li>
<li><a href="">Main Link 3</a>
<ul>
        <li><a href="">Main Link 3 Sub Link 4</a></li>
        <li><a href="">Main Link 3 Sub Link 4</a></li>
        <li><a href="">Main Link 3 Sub Link 4</a></li>
        <li><a href="">Main Link 3 Sub Link 4</a></li>
    </ul></li>
<li><a href="">Main Link 4</a></li>
</ul> 
```

请查看下面的完整表格，因为我无法在此处发布所有 css 代码；

[http://jsfiddle.net/hF3dm/](http://jsfiddle.net/hF3dm/)

我的问题是当您悬停邮件链接并继续访问子链接时，主链接的悬停状态消失了。如何在悬停在子链接上时保持主链接的悬停状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:22:24.790

最好的办法是将主链接的悬停状态放在“li”而不是“a”标签上。

```
ul#nav li:hover {
  // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:27:04.730

我刚刚添加了：

```
#nav li:hover { background-color: #a32a31; color: #fff; } 
```

到你的例子（在CSS的底部），似乎做你现在需要的

例如[http://jsfiddle.net/hF3dm/6/](http://jsfiddle.net/hF3dm/6/)

# c++ - 用于包装的 unique_ptr 的模板化移动 ctor

> ID：13416458
> 
> 赞同：0
> 
> 时间：2012-11-16T12:18:52.913
> 
> 标签：c++, pointers, c++11, move-semantics, unique-ptr

我想要类似于 unique_ptr 的东西，但保证（在合理范围内）是非空的。我编写了这个包含 unique_ptr 的类，并编写了这个移动构造函数，我希望它允许我从另一个指针移动构造一个指针，只要底层的 unique_ptr 可以类似地移动构造。所以，我首先用一些简单的东西来尝试它；从指向 int 的指针移动构造指向 int 的指针。

```
#include <memory>
#include <utility>
#include <cassert>

template<
    typename T
    > 
class Nonup
{
    private:

        std::unique_ptr<T> m_ptr;

    public:

        explicit Nonup( T* p )
        : m_ptr( p )
        { assert( p ); }

        Nonup( const Nonup& ) = delete;
        Nonup& operator=( const Nonup& ) = delete;

        template<typename U>
        Nonup( Nonup<U>&& old )
        :
            m_ptr( std::move( old ) )
        {}

        Nonup& operator=( Nonup&& rhs ) = default;

        decltype( *m_ptr ) operator*() const { return *m_ptr; }
};

int main()
{
    Nonup<int> first( new int( 42 ) );

    Nonup<int> second( std::move( first ) );

    return 0;
} 
```

为什么 g++ 4.7.0 在变量的移动构造上会出错`second`？“g++ -std=c++11 main.cpp”的输出如下。

```
main.cpp: In instantiation of ‘Nonup<T>::Nonup(Nonup<U>&&) [with U = int; T = int]’:
main.cpp:40:43:   required from here
main.cpp:27:37: error: no matching function for call to ‘std::unique_ptr<int, std::default_delete<int> >::unique_ptr(std::remove_reference<Nonup<int>&>::type)’
main.cpp:27:37: note: candidates are:
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/memory:86:0,
                 from main.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:164:2: note: template<class _Up, class> std::unique_ptr::unique_ptr(std::auto_ptr<_Up>&&)
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:164:2: note:   template argument deduction/substitution failed:
main.cpp:27:37: note:   ‘std::remove_reference<Nonup<int>&>::type {aka Nonup<int>}’ is not derived from ‘std::auto_ptr<_Up>’
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/memory:86:0,
                 from main.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:155:2: note: template<class _Up, class _Ep, class> std::unique_ptr::unique_ptr(std::unique_ptr<_Up, _Ep>&&)
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:155:2: note:   template argument deduction/substitution failed:
main.cpp:27:37: note:   ‘std::remove_reference<Nonup<int>&>::type {aka Nonup<int>}’ is not derived from ‘std::unique_ptr<_Up, _Ep>’
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/memory:86:0,
                 from main.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:142:7: note: std::unique_ptr<_Tp, _Dp>::unique_ptr(std::unique_ptr<_Tp, _Dp>&&) [with _Tp = int; _Dp = std::default_delete<int>]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:142:7: note:   no known conversion for argument 1 from ‘std::remove_reference<Nonup<int>&>::type {aka Nonup<int>}’ to ‘std::unique_ptr<int, std::default_delete<int> >&&’
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:136:17: note: constexpr std::unique_ptr<_Tp, _Dp>::unique_ptr(std::nullptr_t) [with _Tp = int; _Dp = std::default_delete<int>; std::nullptr_t = std::nullptr_t]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:136:17: note:   no known conversion for argument 1 from ‘std::remove_reference<Nonup<int>&>::type {aka Nonup<int>}’ to ‘std::nullptr_t’
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:130:7: note: std::unique_ptr<_Tp, _Dp>::unique_ptr(std::unique_ptr<_Tp, _Dp>::pointer, typename std::remove_reference<_To>::type&&) [with _Tp = int; _Dp = std::default_delete<int>; std::unique_ptr<_Tp, _Dp>::pointer = int*; typename std::remove_reference<_To>::type = std::default_delete<int>]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:130:7: note:   candidate expects 2 arguments, 1 provided
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:125:7: note: std::unique_ptr<_Tp, _Dp>::unique_ptr(std::unique_ptr<_Tp, _Dp>::pointer, typename std::conditional<std::is_reference<_Dp>::value, _Dp, const _Dp&>::type) [with _Tp = int; _Dp = std::default_delete<int>; std::unique_ptr<_Tp, _Dp>::pointer = int*; typename std::conditional<std::is_reference<_Dp>::value, _Dp, const _Dp&>::type = const std::default_delete<int>&]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:125:7: note:   candidate expects 2 arguments, 1 provided
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:120:7: note: std::unique_ptr<_Tp, _Dp>::unique_ptr(std::unique_ptr<_Tp, _Dp>::pointer) [with _Tp = int; _Dp = std::default_delete<int>; std::unique_ptr<_Tp, _Dp>::pointer = int*]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:120:7: note:   no known conversion for argument 1 from ‘std::remove_reference<Nonup<int>&>::type {aka Nonup<int>}’ to ‘std::unique_ptr<int, std::default_delete<int> >::pointer {aka int*}’
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:114:17: note: constexpr std::unique_ptr<_Tp, _Dp>::unique_ptr() [with _Tp = int; _Dp = std::default_delete<int>]
/usr/lib/gcc/x86_64-redhat-linux/4.7.0/../../../../include/c++/4.7.0/bits/unique_ptr.h:114:17: note:   candidate expects 0 arguments, 1 provided 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:28:04.707

您正在尝试`m_ptr`从 other初始化`Nonup`，而不是从它的`m_ptr`. 移动构造函数的初始化程序应该是：

```
m_ptr( std::move( old.m_ptr ) )
                     ^^^^^^ 
```

# php - 对现有类似 wiki 的降价项目的建议

> ID：13416461
> 
> 赞同：3
> 
> 时间：2012-11-16T12:19:12.860
> 
> 标签：php, markdown, wiki

我使用[TikiWiki](http://info.tiki.org/Tiki+Wiki+CMS+Groupware)有一段时间了，最​​近尝试了[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)，但是对于我的简单需求来说，它们中的任何一个似乎都太复杂了。

老实说，我更喜欢 markdown 而不是 wiki 语法，因为它很简单，因此我问这个问题：

我正在寻找一个基于 Markdown 语法的协作文档系统，例如 Github 的 wiki 系统。

*   这个项目应该用 PHP 编写，以便可以在共享主机上提供服务（即应该是可安装的和独立的）。
*   图像和其他媒体是可选的，但主要用于记录代码和编程相关项目。
*   可以使用 MySQL 或 PostgreSQL。
*   *不需要*扩展系统。
*   （可选）使页面可见或隐藏（草稿？）的可能性。

有人可以建议一个/这样的现有项目吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:52:15.463

你可以使用[DokuWiki](https://www.dokuwiki.org/dokuwiki)。它有自己的语法，但使用[Markdown-Plugin](https://www.dokuwiki.org/plugin%3amarkdownextra)它也可以理解 Markdown 文件（它使用[PHP Markdown Extra](http://michelf.ca/projects/php-markdown/extra/)库。）。wiki 文章直接存储在文件系统中，不需要数据库。DokuWiki 还有一些 Git 插件。

另一种解决方案是像[Sphinx](http://sphinx-doc.org/)这样的文档生成器，它以重组文本格式（比 Markdown 更强大）读取文本并编写静态 HTML 页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:22:06.240

我也使用了很多 TiddlyWiki（并且也为它做出了贡献）并切换到 DokuWiki 来托管一个 wiki。最后我开发了自己的项目，我每天使用 6 个月。

看看[NotewikiApp](http://notewiki.bidix.info/)：**一个将 Google App Engine 用作笔记本的 wiki webapp**

**Notewiki**是一个旨在记笔记并将其组织在笔记本中的 wiki。wiki 空间分为私人和公共区域，以共享一些笔记并隐藏其他笔记。

**Notewiki 应用程序**是用 Python 为 Google App Engine 实现的，并使用 Markdown 语法。此网络应用程序处于测试阶段（0.3 版）。它发布在[Google Code](http://code.google.com/p/notewikiapp)上。软件包已准备好安装在您自己的 Google Apps 域中。

Notewiki App 界面与 iPhone 兼容，可随时随地访问和编辑笔记。

# ios - 添加时子视图显示为灰色背景

> ID：13416481
> 
> 赞同：1
> 
> 时间：2012-11-16T12:20:17.373
> 
> 标签：ios, background, addsubview

我在左侧有一个表格视图（它是一个 iPad 应用程序），在右侧有一个空子视图，当用户触摸一个单元格时它会被填充。这就是我的 didSelect... 的样子：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    SecondViewController *remedyScreen = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];       
    [self.rightPanel addSubview:remedyScreen.view];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我的问题是，这个 SecondViewController 总是以灰色背景显示，并且在 xib 上设置为 clearClear 并且未选中 Opaque 属性。我假设这个奇怪的灰色背景颜色来自刚刚创建的子视图，因为即使我将颜色添加到 self.rightPanel，当我将子视图添加到它时它也会被灰色覆盖。我已经在代码设置 clearColor 和 Opaque = NO 中完成了设置，但我得到了相同的灰色背景。我在那里遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T12:23:38.030

试试这个：

```
UIView *backView = [[[UIView alloc] CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
backView.backgroundColor = [UIColor clearColor];
self.view.backgroundView = backView; 
```

# visual-studio-2010 - 当我使用 InstallShield 安装我的应用程序时，我收到“安装失败”消息。有没有办法让我知道它为什么失败？

> ID：13416483
> 
> 赞同：3
> 
> 时间：2012-11-16T12:20:17.750
> 
> 标签：visual-studio-2010, installation, installshield, failed-installation

为清楚起见，应用程序在安装失败消息后仍然可以工作，因此它似乎安装正确。如果人们无论应用程序是否工作都会看到此消息，我只是无法发布该应用程序。

我不知道为什么它向我显示该消息。

我正在使用 InstallShield SE（随 Visual Studio 2010 提供）。

**更新：** 我为 Windows 8 上的失败安装添加了示例安装日志：

[第 1 部分] [http://textuploader.com/?p=6&id=Qssr](http://textuploader.com/?p=6&id=Qssr) [第 2 部分] [http://textuploader.com/?p=6&id=8wytN](http://textuploader.com/?p=6&id=8wytN)

谁能破译这个？我已经搜索了文本“安装失败”但我找不到它，并且搜索例如“错误”不会返回任何有意义的内容。

只是要注意这发生在 Windows XP、Windows 7 和 Windows 8 上。

**更新 2：**

为了进一步复杂化这个问题，以下是一个不包含@Yan Sklyarenko 从第一个文件中指出的文本的日志。所以我看到了同样的问题，但第二个日志文件没有提到它。（另外，第二个日志文件是 2MB，这就是我必须将它托管在我的 google 文档驱动器上的原因。）

任何人有任何想法wtf与InstallShield有关吗？

[http://docs.google.com/open?id=0B813RziGagi_aldUNFJqLTNzYVE](http://docs.google.com/open?id=0B813RziGagi_aldUNFJqLTNzYVE)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:00:53.657

您的日志包含以下行：

> 用户取消安装。

通常这意味着用户取消了安装。:) 但这显然不是你的情况。

我设法找到[了以下知识库文章](http://msmvps.com/blogs/installsite/archive/2007/04/18/830140.aspx)。基本上，它有一个警告，如果您不与之交互，UAC 调用可能会超时。在这种情况下，它会输出您看到的错误并认为用户取消了安装：

```
 MSI (s) (A8:A0) [12:32:25:129]: MSI_LUA: Elevation required to install product, will prompt for credentials 
 MSI (s) (A8:A0) [12:32:46:578]: MSI_LUA: Credential Request return = 0x800704C7 
 User cancelled installation. 
```

大概，UAC窗口只是没有出现在前面？如果它是背景窗口，您可能会错过它。这是[另一个](http://msdn.microsoft.com/ru-ru/library/windows/desktop/aa369758%28v=vs.85%29.aspx)可能有用的链接（请参阅该文章的唯一评论）。您可以调查打开和关闭创建检查点如何影响行为。

顺便说一句，Windows XP 没有这个问题，因为它没有 UAC 功能。所以，它可能是别的东西。

# android - 当用户尝试打开 PreferenceActivity 时应用程序崩溃

> ID：13416487
> 
> 赞同：0
> 
> 时间：2012-11-16T12:20:40.297
> 
> 标签：android

我只有一个窗口，您可以在其中推送菜单-> 首选项并启动**Intent**

```
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_settings:
            startActivity(new Intent(this, com.example.app.PreferenciasGenerales.class));
            return true;
        default:
            return false;
    }
} 
```

它自动说必须关闭应用程序。

> 未捕获的处理程序：线程主因未捕获的异常而退出
> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.app/com.example.app.PreferenciasGenerales}：
> java.lang.ClassCastException：
> android 上的java.lang.Integer .app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
> 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
> 在 android.app.ActivityThread.access$2200(ActivityThread.java:119)
> 在 android.app.ActivityThread $H.handleMessage(ActivityThread.java:1863)
> 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 在 android.os.Looper.loop(Looper.java:123)
> 在 android.app.ActivityThread.main(ActivityThread.java:4363)
> 在 java.lang.reflect.Method.invokeNative(Native Method)
> 在 java.lang.reflect.Method.invoke(Method.java:521)
> 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
> at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
> at dalvik.system.NativeStart.main(Native Method)
> 引起：java.lang.ClassCastException: java.lang.Integer at android.app.ApplicationContext$SharedPreferencesImpl.getString(ApplicationContext.java:2572) at android.preference.Preference.getPersistedString(Preference.java:1250) at android.preference .ListPreference.onSetInitialValue(ListPreference.java:232) 在 android.preference.Preference.dispatchSetInitialValue(Preference.java:1173) 在 android.preference.Preference.onAttachedToHierarchy(Preference.java:985) 在 android.preference.PreferenceGroup.addPreference( PreferenceGroup.java:156) 在 android.preference.PreferenceGroup.addItemFromInflater(PreferenceGroup.java:97) 在 android.preference.PreferenceGroup.addItemFromInflater(PreferenceGroup.java:38) 在 android.preference.GenericInflater。rInflate(GenericInflater.java:488) 在 android.preference.GenericInflater.rInflate(GenericInflater.java:493) 在 android.preference.GenericInflater.inflate(GenericInflater.java:326) 在 android.preference.GenericInflater.inflate(GenericInflater.java :263) 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:254) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) -> 在 com.example.app.PreferenciasGenerales.onCreate(PreferenciasGenerales.java: 34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 还有 11 个rInflate(GenericInflater.java:493) 在 android.preference.GenericInflater.inflate(GenericInflater.java:326) 在 android.preference.GenericInflater.inflate(GenericInflater.java:263) 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java :254) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) -> 在 com.example.app.PreferenciasGenerales.onCreate(PreferenciasGenerales.java:34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 还有 11 个rInflate(GenericInflater.java:493) 在 android.preference.GenericInflater.inflate(GenericInflater.java:326) 在 android.preference.GenericInflater.inflate(GenericInflater.java:263) 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java :254) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) -> 在 com.example.app.PreferenciasGenerales.onCreate(PreferenciasGenerales.java:34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 还有 11 个inflate(GenericInflater.java:263) 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:254) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) -> 在 com.example.app.PreferenciasGenerales.onCreate (PreferenciasGenerales.java:34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 11 更多inflate(GenericInflater.java:263) 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:254) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) -> 在 com.example.app.PreferenciasGenerales.onCreate (PreferenciasGenerales.java:34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 11 更多34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 还有 11 个34) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) ... 还有 11 个

我要启动的 PreferenceActivity 是这样的：

```
public class PreferenciasGenerales extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    /*->*/addPreferencesFromResource(R.xml.preferencias_general);/*<- Here is the exception at StackTrace */
    }

    @Override
    protected void onStop() {
        final ProgressDialog waitDialog =
            ProgressDialog.show( this, "Wait", "i'm testing that those things you write are correct...", true);
        waitDialog.setCancelable(false);
        /* Cannot have integers array on ListPreference
         * http://code.google.com/p/android/issues/detail?id=2096 */
        String old_debug_level = PreferenceManager.getDefaultSharedPreferences(this).getString("debug_level", "3");
        PreferenceManager.getDefaultSharedPreferences(this).edit()
        .remove("debug_level")
        .putInt("debug_level", Integer.parseInt(old_debug_level))
        .commit();
    old_debug_level = null;

    String api_server = PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getString("api_server", "");
    String account_id = PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getString("account_id", "");
    String account_pass = PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getString("account_pass", "");
    String account_key = PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getString("account_key", "");
    boolean debug_enabled= PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getBoolean("debug_enabled", false);
    int debug_level = PreferenceManager.getDefaultSharedPreferences(PreferenciasGenerales.this).getInt("debug_level", 3);

    try {
                 // Connect to API to test credentials... 
```

您需要的更多与 PreferenceActivity 相关的东西......我已经删除了所有 strings.xml 值，因为它们太多并且是西班牙语。标题、提示、对话框标题等所有字符串都存在并且是正确的。他们从事其他活动

**/res/xml/preferencias_general.xml**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory>
        <EditTextPreference android:key="api_server"/>
    </PreferenceCategory>
    <PreferenceCategory android:title="@string/preferencias_cuenta_categoria_title">
        <EditTextPreference android:key="account_id"  />
        <EditTextPreference android:key="account_pass" />
        <EditTextPreference android:key="account_key"  />
    </PreferenceCategory>
        <PreferenceCategory android:key="debug_enabled" />
        <ListPreference android:key="debug_level" android:entryValues="@array/debug_level_entryValues" android:entries="@array/debug_level_entries" />
</PreferenceCategory> 
```

**/res/values/preferencias_general.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="debug_level_entries">
        <item>VERBOSE</item>
        <item>DEBUG</item>
        <item>INFO</item>
        <item>WARN</item>
        <item>ERROR</item>
    </string-array>
    <string-array name="debug_level_entryValues">
        <item>1</item>
        <item>2</item>
        <item>3</item>
        <item>4</item>
        <item>5</item>
   </string-array> 
```

--

**更新 1** 在回答@CommonsWere 我清除了数据，它显示它不完整：

![清除应用程序设置时的 ListPreference](../Images/af7fc6613672a53cddedd8291d17f899.png)

在此之前，我尝试退出并引发新的异常：

> java.lang.RuntimeException：无法停止活动 {com.merinosa.kimera/com.merinosa.kimera.PreferenciasGenerales}：java.lang.IllegalStateException：目标主机不得为空，或在参数中设置。在 android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3421) 在 android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3487) 在 android.app.ActivityThread.access$2800(ActivityThread.java:119) 在 android.app .ActivityThread$H.handleMessage(ActivityThread.java:1896) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread。 main(ActivityThread.java:4363) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java: 521) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 在 dalvik.system.NativeStart.main (Native Method) Caused by: java.lang.IllegalStateException: Target host不能为null，或者在参数中设置。在 org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:561) 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292) 在 org.apache.http.impl .client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient .java:465) 在 com.

那我应该在哪里测试配置是否正确？如果我再次运行应用程序，它会再次出现第一个错误。

--

**更新 2**

我的新错误与我原来的问题无关，因此可以将其设置为已回答。错误再次出现的原因是因为我按照 CommonsWare 在接受的答案中所说的那样修改了设置。
当我退出设置时，它执行 onStop() 并将 SharedPreferences 修改为整数，使其“不可种姓”。

必须对新错误进行适当调查，并在需要时再次询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:24:28.043

这个应用程序，在您用于测试的任何设备或模拟器上，已经保存了`SharedPreferences`，其中保存的值为 an `Integer`，您现在正尝试将其加载到`Preference`需要 a 的 a 中`String`。尝试通过设置清除应用程序的数据，或卸载并重新安装应用程序，以清除此问题。

此外，请注意，在您当前的偏好 XML 中，`debug_level`将保存为`String`.，但您正尝试通过`getInt()`.

# c++ - 返回无效的引用

> ID：13416488
> 
> 赞同：8
> 
> 时间：2012-11-16T12:20:43.167
> 
> 标签：c++

有时当我用 C++ 编程时，我希望`undefined`每个变量都有一个值，比如 Javascript！。例如，当我为数组的越界元素返回一个值时，返回 an`undefined`而不是抛出异常很有用，或者：

```
template <typename T, int SIZE>
class MyArray
{
  T arr[SIZE];
  static T badref;
public:
  T &operator[](int i)
  {
    if (i >=0 && i < SIZE)
      return arr[i];
    else
      throw std::string("OUT-OF-BOUNDS"); // or: return badref; !!
  }
}; 
```

另一个脏（在我看来）选项是将预定义变量的引用作为坏引用变量返回。我知道我们不能将`null`或类似的东西分配给参考变量。

是否有另一种格式良好的模式来返回引用，其中调用者能够找出返回的值无效？

**编辑：**我不是说`pointer`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T12:31:14.093

您可以使用 boost::optional 正如@chris 在他的评论中提到的那样。它是 Boost 库的一部分。有关详细信息，请参阅[此页面。](http://www.boost.org/doc/libs/1_52_0/libs/optional/doc/html/index.html)

修改`MyArray`类：

```
template <typename T, int SIZE>
class MyArray
{
  T arr[SIZE];
public:
  optional<T&> operator[](int i)
  {
    if (i >=0 && i < SIZE)
      return optional<T&>(arr[i]);
    else
      return optional<T&>();
  }
}; 
```

用法：

```
MyArray<int>() array;
// fill array with data

optional<int&> result = array[0];
if (result) {
    // item was found
} else {
    // index out of bounds
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T13:02:34.883

> 我希望每个变量都有一个未定义的值，比如 Javascript！

您只有一个“未定义”的指针值（nullptr）。引用是（根据定义）指向*有效*实例的东西。

要返回对静态对象的引用，您应该将运算符的 const 值和非 const 值分开：

```
template <typename T, int SIZE>
class MyArray
{
  T arr[SIZE];
  static T badref;
public:
  T &operator[](int i)
  {
    if (i >=0 && i < SIZE)
      return arr[i];
    else
      // returning ref here would allow clients to write:
      // MyArray<int> a;
      // a[-1] = 5; // valid if you return a non-const reference
      throw std::string("OUT-OF-BOUNDS");
  }
  const T &operator[](int i) const
  {
    if (i >=0 && i < SIZE)
      return arr[i];
    else {
      // MyArray<int> a;
      // a[-1] = 5; // will not compile (cannot assign to const)
      static const T invalid = T();
      return invalid;
    }
  } 
```

};

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T12:50:40.960

无论您怎么想，您的解决方案都需要适合类型系统。因此，您的函数签名必须明确说明（以这种方式或另一种方式）结果可能是 T，但也可能是其他东西。

常见的方法是：

*   不返回值，而是返回状态码并通过“out”参数（指针或引用）输出值：

    ```
    bool tryGet(int i, T& result); 
    ```

*   返回一个元组（状态，值），如：

    ```
    std::tuple<bool, T> get(int i) 
    ```

    *（如果无法获取，则认为第二个元组元素无关紧要 - 要求 T 具有默认构造函数）*

*   使用`boost::variant`（灵活，但需要提升）

*   使用`boost::optional`（上面的简单版本，当你只需要“要么 T 要么什么都没有”时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:59:40.610

引用的主要目标是避免无效 (NULL) 值，同时允许函数修改其参数并避免复制数据。如果需要 NULL 值，请使用指针。

# android - Android 将 App 带回前台

> ID：13416494
> 
> 赞同：1
> 
> 时间：2012-11-16T12:20:58.690
> 
> 标签：android, android-intent

我正在开发一个应用程序，它必须在后台工作，并在我从某个服务器收到事件时回来。

为此，我有一个在后台运行并获取消息的服务。我认为我能做的就是开始活动。像这样：

```
Intent ROA = new Intent(MainActivity.getInstance(), RouteOverviewActivity.class);
MainActivity.getInstance().startActivity(ROA); 
```

问题是这样的。代码被执行，但应用程序没有被推送到前台。当我手动重新打开应用程序时，它会在我在后台启动的活动中打开。

因此，除了将应用程序推到前台外，一切正常。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:23:16.063

您可能应该使用您的服务作为启动活动的上下文，即从您的服务代码内部：

```
Intent ROA = new Intent(this, RouteOverviewActivity.class);
startActivity(ROA); 
```

# vb.net - 在 Visual Basic 中使用 json.net 解析嵌套的 JSON

> ID：13416497
> 
> 赞同：3
> 
> 时间：2012-11-16T12:21:32.157
> 
> 标签：vb.net, json, json.net

我有嵌套的 JSON 字符串，我想从下面解析出适当的值。当我边做边学时，我有点挣扎，我有第一部分工作，我可以解析出单个 JSON 字符串，并使用下面的代码示例 1 返回适当的值，但是我被一个 JSON 字符串困住了问题在于它是嵌套的，因此相同的方法行不通

```
{
  "jsonrpc":"2.0",
  "method":"Player.OnPause",
  "params":{
     "data": { "item": { "id":29, "type":"episode" },
               "player": { "playerid":1, "speed":0 }
             },
     "sender":"xbmc"
  }
} 
```

而且代码...

```
 Dim JSON As String
    Dim values As Newtonsoft.Json.Linq.JObject
    JSON = JSON STRING WOULD GO HERE, COMES from TCP IP STREAM
    values = JObject.Parse(JSON)
    Console.WriteLine(values.GetValue("method")) 
```

使用该示例，我可以从第一级 JSON 字符串中提取方法键（例如 Player.OnPause），但是如何从第二级和第三级字符串中提取数据，例如在上面的字符串中，能够获取数据级别 JSON 值和项目级别 JSON 值。这可能以与上述类似的方式吗？

感谢您提供的任何提示，我是一个通过示例学习的人，但只是在努力应用一些东西来读取多个嵌套的 JSON 字符串或多个级别。毫无疑问，我想念这将是一件容易的事，但我很感激有人可以提供的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:21:02.307

```
 Dim jsonstring = IO.File.ReadAllText("json.txt")
    Dim jo = Json.Linq.JObject.Parse(jsonstring)
    Dim playerid = jo("params")("data")("player")("playerid") 
```

你的意思是这样的吗？"json.txt" 只包含您的 JSON 字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T08:23:32.127

在此处和其他地方搜索将 javascrip 对象表示法解析为 .net 字典的多态示例后，我放弃并编写了自己的。希望有人觉得这很有用；）

```
Public Class jsonDictionary
    Inherits Dictionary(Of String, Object)

#Region "Public Properties"
    Private _parent As jsonDictionary
    Public ReadOnly Property Parent() As jsonDictionary
        Get
            Return _parent
        End Get
    End Property

#End Region

#Region "Initialisation and Finalisation"

    Public Sub New(ByVal Parent As jsonDictionary, ByVal strJson As String)
        _parent = Parent
        For Each Element As String In SplitJSON(CharTrim(strJson))
            Dim elName As String = CharTrim(Element.Split(":")(0).Trim)
            Select Case Element.Split(":")(1).Trim.Substring(0, 1)
                Case "{"
                    Me.Add(elName, New jsonDictionary(Me, Element.Substring(InStr(Element, ":"))))
                Case "["
                    Dim ElArray As New List(Of jsonDictionary)
                    For Each ArrayElement As String In SplitJSON(CharTrim(Element.Substring(InStr(Element, ":"))))
                        ElArray.Add(New jsonDictionary(Me, ArrayElement))
                    Next
                    Me.Add(elName, ElArray)
                Case Else
                    Me.Add(elName, Element.Split(":")(1).Trim)
            End Select

        Next
    End Sub

#End Region

#Region "Private Methods"

    Public Shared Function CharTrim(ByVal Str As String) As String
        Return Str.Trim.Substring(1, Str.Length - 2)
    End Function

    Private Function SplitJSON(ByVal str As String) As String()

        Dim ret() As String = Nothing
        Dim sqCount As Integer = 0
        Dim clCount As Integer = 0
        Dim buildStr As New System.Text.StringBuilder

        For i As Integer = 0 To str.Length - 1
            Select Case str.Substring(i, 1)
                Case ","
                    If sqCount = 0 And clCount = 0 Then
                        Try
                            ReDim Preserve ret(UBound(ret) + 1)
                        Catch ex As Exception
                            ReDim ret(0)
                        Finally
                            ret(UBound(ret)) = buildStr.ToString
                            buildStr = New System.Text.StringBuilder
                        End Try
                    Else
                        buildStr.Append(str.Substring(i, 1))
                    End If
                Case Else
                    buildStr.Append(str.Substring(i, 1))
                    Select Case str.Substring(i, 1)
                        Case "["
                            sqCount += 1
                        Case "]"
                            sqCount -= 1
                        Case "{"
                            clCount += 1
                        Case "}"
                            clCount -= 1

                    End Select
            End Select
        Next
        If buildStr.ToString.Length > 0 Then
            Try
                ReDim Preserve ret(UBound(ret) + 1)
            Catch ex As Exception
                ReDim ret(0)
            Finally
                ret(UBound(ret)) = buildStr.ToString
            End Try
        End If
        Return ret

    End Function

#End Region

End Class 
```

# jsf - 如何使用 modalDialog 警告用户会话已过期？

> ID：13416498
> 
> 赞同：3
> 
> 时间：2012-11-16T12:21:34.433
> 
> 标签：jsf, session, primefaces, timeout, liferay

我想在重定向到登录表单之前警告用户他的会话已经完成。

当会话用户完成阻止重定向直到他单击窗口时，如何显示 modalDialog？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:48:21.840

从这里开始：http: [//www.primefaces.org/showcase/push/index.jsf](http://www.primefaces.org/showcase/push/index.jsf)只需推送消息并打开一个模式对话框。你试过这个吗？

# java - 如何为所有类配置 log4j fileappender？

> ID：13416499
> 
> 赞同：0
> 
> 时间：2012-11-16T12:21:41.047
> 
> 标签：java, log4j, configure, fileappender

在我的应用程序中，我读取了一个输入文件（例如 myFile1.txt）并创建了一个具有相同名称的输出文件（例如 myFile2log）。重点是输入文件将在 java 应用程序中读取，而不是作为命令行参数给出。因此需要在应用程序中设置一个附加程序，例如

```
public class Example {
private static final Logger LOG = Logger.getLogger(Example.class);

public Example() throws IOException {
    FileAppender appender = new DailyRollingFileAppender(new PatternLayout(
            PatternLayout.DEFAULT_CONVERSION_PATTERN), "yourfilename.log",
            "'.'yyyy-MM-dd");
    LOG.addAppender(appender);
    LOG.setLevel((Level) Level.DEBUG);
    LOG.debug("blabla");

    new RandomClass();
}

public static void main(String[] args) throws IOException {
    new Example();
}
}

public class RandomClass {
private static final Logger LOG = Logger.getLogger(RandomClass.class);

public RandomClass() {
    LOG.debug("hello Randomclass");
}
} 
```

这就是问题所在：如果我执行上述操作，自定义文件附加程序仅适用于定义文件附加程序的特定类，但不适用于任何其他类。因此，“RandomClass”的输出不会写入此日志文件，但这是必需的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:30:13.020

您可以在类路径中使用 log4j.properties 文件，然后只需在所有类中初始化记录器。

```
private static final Logger LOG = Logger.getLogger(Example.class); 
```

和 Appender 在构造函数中都不需要。您的属性文件应包含

```
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=yourfilename.log
log4j.appender.R.MaxFileSize=2048KB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:33:20.683

如果您想动态设置附加程序，您应该尝试将新附加程序设置为根记录器：

```
Logger logger = Logger.getRootLogger();
FileAppender appender = new DailyRollingFileAppender(new PatternLayout(
   PatternLayout.DEFAULT_CONVERSION_PATTERN), "yourfilename.log", "'.'yyyy-MM-dd");
logger.addAppender(appender) 
```

# django - Django：基于类的 ListView 中的搜索表单

> ID：13416502
> 
> 赞同：30
> 
> 时间：2012-11-16T12:22:04.207
> 
> 标签：django, forms, listview, django-class-based-views

我正在尝试实现一个`Class Based ListView`显示一组表集的选择。如果第一次请求该站点，则应显示数据集。我更喜欢 POST 提交，但 GET 也可以。

这是一个很容易处理的问题`function based views`，但是对于基于类的视图，我很难理解。

我的问题是我得到了各种各样的错误，这是由于我对基于分类的视图的理解有限造成的。我已阅读各种文档，并且了解直接查询请求的视图，但是一旦我想向查询语句添加表单，就会遇到不同的错误。对于下面的代码，我收到一个`ValueError: Cannot use None as a query value`.

**根据表单条目（否则选择整个数据库），基于类的 ListView 的最佳实践工作流程是什么？**

这是我的示例代码：

**模型.py**

```
class Profile(models.Model):
    name = models.CharField(_('Name'), max_length=255)

    def __unicode__(self):
        return '%name' % {'name': self.name}

    @staticmethod
    def get_queryset(params):

        date_created = params.get('date_created')
        keyword = params.get('keyword')
        qset = Q(pk__gt = 0)
        if keyword:
            qset &= Q(title__icontains = keyword)
        if date_created:
            qset &= Q(date_created__gte = date_created)
        return qset 
```

**表格.py**

```
class ProfileSearchForm(forms.Form):
    name = forms.CharField(required=False) 
```

**视图.py**

```
class ProfileList(ListView):
    model = Profile
    form_class = ProfileSearchForm
    context_object_name = 'profiles'
    template_name = 'pages/profile/list_profiles.html'
    profiles = []

    def post(self, request, *args, **kwargs):
        self.show_results = False
        self.object_list = self.get_queryset()
        form = form_class(self.request.POST or None)
        if form.is_valid():
            self.show_results = True
            self.profiles = Profile.objects.filter(name__icontains=form.cleaned_data['name'])
        else:
            self.profiles = Profile.objects.all()
        return self.render_to_response(self.get_context_data(object_list=self.object_list, form=form))

    def get_context_data(self, **kwargs):
        context = super(ProfileList, self).get_context_data(**kwargs)
        if not self.profiles:
            self.profiles = Profile.objects.all()
        context.update({
            'profiles': self.profiles
        })
        return context 
```

下面我添加了完成这项工作的 FBV。**如何将此功能转换为 CBV？** 在基于函数的视图中似乎很简单，但在基于类的视图中却不是。

```
def list_profiles(request):
    form_class = ProfileSearchForm
    model = Profile
    template_name = 'pages/profile/list_profiles.html'
    paginate_by = 10

    form = form_class(request.POST or None)
    if form.is_valid():
        profile_list = model.objects.filter(name__icontains=form.cleaned_data['name'])
    else:
        profile_list = model.objects.all()

    paginator = Paginator(profile_list, 10) # Show 10 contacts per page
    page = request.GET.get('page')
    try:
        profiles = paginator.page(page)
    except PageNotAnInteger:
        profiles = paginator.page(1)
    except EmptyPage:
        profiles = paginator.page(paginator.num_pages)

    return render_to_response(template_name, 
            {'form': form, 'profiles': suppliers,}, 
            context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-23T11:44:25.413

我认为您的目标是尝试根据表单提交过滤查询集，如果是这样，请使用 GET ：

```
class ProfileSearchView(ListView)
    template_name = '/your/template.html'
    model = Person

    def get_queryset(self):
        name = self.kwargs.get('name', '')
        object_list = self.model.objects.all()
        if name:
            object_list = object_list.filter(name__icontains=name)
        return object_list 
```

然后你需要做的就是编写一个`get`方法来渲染模板和上下文。

也许不是最好的方法。通过使用上面的代码，您无需定义 Django 表单。

它是这样工作的：基于类的视图将渲染模板、处理表单等的方式分开。像，`get`处理 GET 响应，`post`处理 POST 响应，`get_queryset`并且`get_object`是不言自明的，等等。了解可用方法的简单方法是启动 shell 并键入：

`from django.views.generic import ListView`如果你想知道`ListView`

然后键入`dir(ListView)`. 在那里您可以看到所有定义的方法并访问源代码以了解它。`get_queryset`用于获取查询集的方法。为什么不这样定义它，它也可以：

```
class FooView(ListView):
    template_name = 'foo.html'
    queryset = Photo.objects.all()  # or anything 
```

我们可以像上面那样做，但是我们不能用那种方法做动态过滤。通过使用`get_queryset`，我们可以进行动态过滤，使用我们拥有的任何数据/值/信息，这意味着我们也可以使用`name`由 发送的参数`GET`，并且它可以在 上使用`kwargs`，或者在这种情况下，在`self.kwargs["some_key"]`您`some_key`指定的任何参数上可用

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-23T18:53:22.703

好吧，我认为将验证留给表单是个好主意。在这种特殊情况下可能不值得，因为它是非常简单的形式 - 但肯定有更复杂的形式（也许你的也会增长），所以我会做类似的事情：

```
class ProfileList(ListView):
    model = Profile
    form_class = ProfileSearchForm
    context_object_name = 'profiles'
    template_name = 'pages/profile/list_profiles.html'
    profiles = []

    def get_queryset(self):
        form = self.form_class(self.request.GET)
        if form.is_valid():
            return Profile.objects.filter(name__icontains=form.cleaned_data['name'])
        return Profile.objects.all() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-01-18T01:24:16.303

这类似于@jasisz 的方法，但更简单。

```
class ProfileList(ListView):
    template_name = 'your_template.html'
    model = Profile

    def get_queryset(self):
        query = self.request.GET.get('q')
        if query:
            object_list = self.model.objects.filter(name__icontains=query)
        else:
            object_list = self.model.objects.none()
        return object_list 
```

那么你在 html 模板上要做的就是：

```
<form method='GET'>
  <input type='text' name='q' value='{{ request.GET.q }}'>
  <input class="button" type='submit' value="Search Profile">
</form> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T13:49:12.113

这已经在[动态过滤](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/#dynamic-filtering)的通用视图主题中得到了很好的解释。

您可以进行过滤`GET`，我认为您不能`POST`为此使用方法，因为`ListView`它不是从编辑混合继承的。

你可以做的是：

网址.py

```
urlpatterns = patterns('', 
                (r'^search/(\w+)/$', ProfileSearchListView.as_view()),
              ) 
```

视图.py

```
class ProfileSearchListView(ListView):
    model = Profile
    context_object_name = 'profiles'
    template_name = 'pages/profile/list_profiles.html'
    profiles = []

    def get_queryset(self):
         if len(self.args) > 0:
               return Profile.objects.filter(name__icontains=self.args[0])
         else:
               return Profile.objects.filter() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T04:55:22.847

我认为您遇到的错误是因为您的表单不需要名称字段。因此，尽管表单有效，但您的`name`字段的cleaned_data 为空。

这些可能是有问题的行：

```
if form.is_valid():
    self.show_results = True
    self.profiles = Profile.objects.filter(name__icontains=form.cleaned_data['name']) 
```

如果我是你，我会尝试换行：

```
self.profiles = Profile.objects.filter(name__icontains=form.cleaned_data['name']) 
```

对此：

```
self.profiles = Profile.objects.none() 
```

如果您停止接收错误（并且您的模板收到一个空的`object_list`），那么您遇到的问题就是我之前所说的：不需要名称字段。

如果这不起作用，请告诉我们！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-16T10:22:48.183

搜索模型中的所有字段

```
class SearchListView(ItemsListView):

# Display a Model List page filtered by the search query.

def get_queryset(self):
    fields = [m.name for m in super(SearchListView, self).model._meta.fields]
    result = super(SearchListView, self).get_queryset()
    query = self.request.GET.get('q')
    if query:
        result = result.filter(
            reduce(lambda x, y: x | Q(**{"{}__icontains".format(y): query}), fields, Q())
        )
    return result 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-25T21:28:22.737

我认为您最好通过 get_context_data 执行此操作。手动创建 HTML 表单并使用 GET 检索此数据。下面是我写的一个例子。当您提交表单时，您可以使用获取数据通过上下文数据传回。此示例不是根据您的要求量身定制的，但它应该可以帮助其他用户。

```
def get_context_data(self, **kwargs):
    context = super(Search, self).get_context_data(**kwargs)
    filter_set = Gauges.objects.all()
    if self.request.GET.get('gauge_id'):
        gauge_id = self.request.GET.get('gauge_id')
        filter_set = filter_set.filter(gauge_id=gauge_id)

    if self.request.GET.get('type'):
        type = self.request.GET.get('type')
        filter_set = filter_set.filter(type=type)

    if self.request.GET.get('location'):
        location = self.request.GET.get('location')
        filter_set = filter_set.filter(location=location)

    if self.request.GET.get('calibrator'):
        calibrator = self.request.GET.get('calibrator')
        filter_set = filter_set.filter(calibrator=calibrator)

    if self.request.GET.get('next_cal_date'):
        next_cal_date = self.request.GET.get('next_cal_date')
        filter_set = filter_set.filter(next_cal_date__lte=next_cal_date)

    context['gauges'] = filter_set
    context['title'] = "Gauges "
    context['types'] = Gauge_Types.objects.all()
    context['locations'] = Locations.objects.all()
    context['calibrators'] = Calibrator.objects.all()
    # And so on for more models
    return context 
```

# objective-c - 在 Mac OS X 中以编程方式更改窗口的高度超过屏幕的高度

> ID：13416503
> 
> 赞同：2
> 
> 时间：2012-11-16T12:22:05.260
> 
> 标签：objective-c, windows, macos, cocoa, applescript

尊敬的 Mac OS 低级用户，请帮助。

*我正在尝试以编程方式更改 safari 窗口（或其他窗口*）的高度。我正在尝试使用 AppleScript 和`AXUIElementSetAttributeValue`Carbon，但这些方法都不能将窗口增加到大于屏幕高度。但是，宽度变化没有任何问题。

我想我会从Win32 下`SetWindowPos`的`SWP_NOSENDCHANGING`flag 之类的东西开始。

也许，您可以禁用此功能，它监视窗口的大小或完全关闭负责它的人？

请注意，我想通过外部进程以编程方式执行此操作 - 我不是在问如何仅控制我自己的应用程序的窗口大小和位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:45:36.073

不可能，请在[Window Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Tasks/SizingPlacingWindows.html)中搜索“请注意，任何带有标题栏的 NSWindow 都会自动将自身限制在屏幕上” 。

# mysql - if else 语句 mysql

> ID：13416505
> 
> 赞同：1
> 
> 时间：2012-11-16T12:22:13.197
> 
> 标签：mysql, sql

我有 4 张桌子：

*   镇
*   部门
*   地区
*   国家

A`department`有一个外键 to`region`和一个`region`to`Country`

A`town`对其他表有 3 个外键，但只应填写其中一个，其他表必须为空。`Country`这是因为您可以使用其`departement`或`region`通过外键到达该镇。

现在我想做一个 SQL 查询，返回所有城镇及其部门、地区、国家（如果已设置）。问题是我无法根据设置的城镇 FK 进行不同的加入。

如何得到这份工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:32:34.543

这个怎么样：

```
SELECT …
FROM Town
LEFT JOIN Department ON Department.id = Town.department
LEFT JOIN Region ON Region.id = COALESCE(Town.region, Department.region)
LEFT JOIN Country ON Country.id = COALESCE(Town.country, Region.country) 
```

`COALESCE``NULL`从其参数中获取第一个非值。所以在这种情况下，来自的值`Town`会覆盖其他设置。正如您所说，具有区域参考的城镇不会有部门参考，其中只有一个应该是 non- `NULL`，因此如果您的数据如您所说，顺序并不重要。`LEFT JOIN`s 确保您获得不匹配的表的`NULL`值。如果您需要的只是该国家/地区的 id，则您可以省略最后一个连接并将 包含`COALESCE`到您选择的值中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:46:13.030

这是一个显示值的查询。

```
select town.*,Department.*,Region.*,Country.* from town,Department,Region,Country where town.Dept_Id = Department.Dept and town.Region_Id = Region.Region_Id and town.Country_Id = Country.Countr_Id and Department.Region_Id = Region.Region_Id and Region.Country_Id = Country.Country_Id 
```

取而代之的是，您可以使用左连接查询。此查询将花费更多的执行时间。左连接查询

```
select * from town left join Department ON Department.id = Town.department left join Region ON Region.id = coalesce (Town.region, Department.region) left join Country ON Country.id = coalesce (Town.country, Region.country) 
```

# android - 没有这样的列错误：如果数据库中没有项目，如何防止此错误？

> ID：13416508
> 
> 赞同：0
> 
> 时间：2012-11-16T12:22:22.537
> 
> 标签：android, sql

好吧，我认为我的标题说明了...使用以下代码：

```
public int getCorrectAnswersPrev(int level, String player) {
        int count = 0;
        level = level - 1;
        Cursor c = myDataBase.rawQuery(
                "SELECT COUNT(*) FROM ANSWERS WHERE LEVEL =" + level
                        + " AND ANSWERCORRECT = 1 AND PLAYER=" + player, null);
        c.moveToFirst();
        count = c.getInt(0);
        c.close();
        myDataBase.close();

        return count;

    } 
```

有时玩家根本没有回答某些问题，所以这意味着在关卡开始时，那里没有特定的项目......我收到这个错误，虽然我初始化计数为0，但我明白它仍然执行查询并返回错误。但是，如果数据库中没有项目，有没有办法可以防止这种情况发生？

编辑：

```
 11-16 13:34:30.188: E/AndroidRuntime(10206): FATAL EXCEPTION: main
11-16 13:34:30.188: E/AndroidRuntime(10206): android.database.sqlite.SQLiteException: no such column: Bog: , while compiling: SELECT COUNT(*) FROM ANSWERS WHERE LEVEL =1 AND ANSWERCORRECT = 1 AND PLAYER=Bog
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at com.hup.game.db.DataBaseHelper.getCorrectAnswers(DataBaseHelper.java:251)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at com.hup.game.LevelSelectorAdapter.getView(LevelSelectorAdapter.java:75)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.AbsListView.obtainView(AbsListView.java:1432)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.GridView.onMeasure(GridView.java:935)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.View.measure(View.java:8319)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.View.measure(View.java:8319)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.View.measure(View.java:8319)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.View.measure(View.java:8319)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.os.Looper.loop(Looper.java:130)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at android.app.ActivityThread.main(ActivityThread.java:3683)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at java.lang.reflect.Method.invokeNative(Native Method)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at java.lang.reflect.Method.invoke(Method.java:507)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
11-16 13:34:30.188: E/AndroidRuntime(10206):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:34:00.260

在连接值之后`player`可能被视为列名，因此而不是：

```
Cursor c = myDataBase.rawQuery(
    "SELECT COUNT(*) FROM ANSWERS WHERE LEVEL =" + level
    + " AND ANSWERCORRECT = 1 AND PLAYER=" + player, null); 
```

尝试使用参数：

```
Cursor c = myDataBase.rawQuery(
    "SELECT COUNT(*) FROM ANSWERS WHERE LEVEL = ? " +
    " AND ANSWERCORRECT = 1 AND PLAYER = ?",
    new String[] { String.valueOf(level), player }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:37:53.017

```
SELECT COUNT(*) FROM ANSWERS WHERE LEVEL =1 AND ANSWERCORRECT = 1 AND PLAYER=Bog 
```

引发错误。

它应该是

```
SELECT COUNT(*) FROM ANSWERS WHERE LEVEL =1 AND ANSWERCORRECT = 1 AND PLAYER='Bog' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T12:36:26.807

如果没有记录，则`Cursor`返回`null`。

您应该`c == null`在使用之前进行测试，`moveToFirst()`如下所示：

```
if(c != null){
    c.moveToFirst();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:32:58.907

```
Use "ifnull" 
```

例如：

```
 Cursor c = myDataBase.rawQuery(select ifnull(max(tm.no),0) as serial_no "
                        + "from table_bun as tb inner join table_mar"
                        + " as tm on tb.id = tm.id "
                        + "where tb.bid = " + bId
                        + " and tb.sid =  " + SId
                        + " and tb.eby  = '" + UId + "'", null); 
```

# .net - 随机不是那么随机 - 取决于之前的调用，所以看起来

> ID：13416511
> 
> 赞同：1
> 
> 时间：2012-11-16T12:22:32.293
> 
> 标签：.net, vb.net, random

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

在 vb.net 我使用这个函数来获取随机数：

```
 Private Function GetRandom(ByVal Min As Integer, ByVal Max As Integer) As Integer
    Dim Generator As System.Random = New System.Random()
    Return Generator.Next(Min, Max)
  End Function 
```

我从另一个看起来像这样（简化）的函数多次调用 GetRandom 函数：

```
Public Sub GetRandomPerson() 
  Dim Gender as integer
  Dim Zip as integer

  Gender = GetRandom(1,3)
  Zip = GetRandom(10000, 99999)

  ' Here I save the random person to DB
End Sub 
```

然后我有这个

```
For i As Integer = 1 to 10000
  GetRandomPerson()
Next 
```

我的问题是似乎依赖于对 GetRandom 的调用，似乎如果 Gender 为 1，则 Zip 永远不会高于某个值（大约 5000），如果 Gender 为 2，则 Zip 将始终高于某个值值（大约 5000）。

为什么会这样，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:25:59.757

您正在实例化`Random`每个*调用*。这就是为什么你会得到你所看到的结果：

```
Dim Generator As System.Random = New System.Random() 
```

`Random`使用基于当前时间的种子来生成伪随机序列（如果具有*相同*的种子，将生成*相同*的序列） - 如果像你一样在循环中调用，种子中可能会有 0 变化，生成一遍又一遍的相同值。

将实例移到函数之外，因此您只能使用生成器的单个实例。

我建议阅读 Jon Skeet 关于[Random](http://csharpindepth.com/Articles/Chapter12/Random.aspx)的这篇文章。

# django - 如何让 Django 在不同的 URL 上使用相同的会话？

> ID：13416512
> 
> 赞同：3
> 
> 时间：2012-11-16T12:22:40.247
> 
> 标签：django, session

我们如何让 Django 在 app.example.com、example.com 和 www.example.com 等不同的 URL 上使用相同的会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:05:50.050

您需要在[`SESSION_COOKIE_DOMAIN`](https://docs.djangoproject.com/en/1.4/topics/http/sessions/#session-cookie-domain)设置中添加参数

```
SESSION_COOKIE_DOMAIN = '.example.com' 
```

> 用于会话 cookie 的域。将此设置为跨域 cookie 的字符串，例如“.lawrence.com”（注意前导点！），或使用 None 作为标准域 cookie。

# php - 使用 postgres 约束进行表单验证

> ID：13416520
> 
> 赞同：1
> 
> 时间：2012-11-16T12:23:24.820
> 
> 标签：php, forms, validation, postgresql, check-constraints

我们正在迁移到 postgresql 数据库，我们希望使用尽可能多的约束检查。问题是当我想验证 Web 表单时，有很多难以维护的重复代码。是否可以将此数据库检查也用于 Web 表单验证？该应用程序是用 PHP 编写的，数据库层是[pomm](http://pomm.coolkeums.org/)。目标只是获取所有填充值，将其发送到数据库并获取所有失败的约束，而无需在 PHP 应用程序中定义其他规则。我怎样才能达到最简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:50:57.903

好吧，这里的数据库约束是为了确保您的数据以一致的方式存储。表单验证可能有不同的规则，具体取决于功能上下文。恕我直言，依靠数据库约束来验证表单并不是一个好主意（我为此使用了[Symfony 验证器](https://github.com/symfony/Validator)组件）。

从纯技术的角度来看，如果要将数据库用作验证层，最难的部分是提取无法插入/更新数据的原因。即使您可以从异常消息中获取此信息，这也会一一验证字段，直到所有字段都正常。

如果您仍想继续使用它，请捕获`Pomm\Exception`抛出的内容并从中获取[SQL 错误](http://www.postgresql.org/docs/9.2/static/errcodes-appendix.html)代码。

希望能帮助到你。

# jquery - jQuery Isotope 限制元素数量？

> ID：13416524
> 
> 赞同：2
> 
> 时间：2012-11-16T12:23:37.000
> 
> 标签：jquery, jquery-isotope

是否可以限制同位素中的条目数量？目前，我正在为类似表格的数据结构调整 Isotope，并且正在添加动态排序。

它的方式 - 我有一定数量的 HTML 条目（目前为 10 个）。它们按添加时间排序。当用户选择某种排序时，数据库中可能存在与请求的参数匹配的其他条目，但它们没有加载。所以我使用 jQuery 插入匹配用户排序请求的元素

```
$.get('myfile.php?request=something', function(callback) {
    var $newItems = $(callback);
    $('.container').isotope( 'insert', $newItems );
    $('.container').isotope({ sortBy : USER_SORT });
}); 
```

所有这一切都完美无缺，我唯一的问题是我添加了更多元素（我希望保留一定数量的可见条目）。我可以做一个解决方法并限制我的容器和 set 的高度`overflow: hidden;`，但我也在实现垂直无限滚动（当你滚动到底部时，会添加更多条目）。所以这需要不断管理容器本身，在我看来应该有更好的方法来做到这一点？

另一种方法是添加新元素，进行排序，然后从底部删除不需要的条目，但这会很糟糕，因为用户会看到额外的数据被过滤和动画，然后被删除。

所以我的问题..有没有办法限制同位素本身的条目？或者也许有人对如何限制它们有更好的想法？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-20T15:44:08.713

您可以使用`nth-child`CSS 选择器来限制过滤结果集，例如

```
$grid.isotope({
    filter: ':nth-child(-n+10)'
}); 
```

这将显示前 10 个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T15:00:33.620

以为我会为此加上两分钱，因为`:nth-child(-n+*)`不适合我的情况。原因是 nth-child 按照它们在 DOM 中出现的顺序来选择元素，所以如果你的元素是随机顺序的，它就不会真正起作用。

解决此问题的一种不太优雅的方法是将同位素实例的项目选择器更改为您添加到要显示的项目的类，例如`.item-selected`，然后将该类添加到回调返回的集合`n`中的第一个项目。这是不雅的，因为它要求您在每次过滤同位素容器时销毁并重新初始化它，但它确实有效。`filteredItems``arrangeComplete`

# php - 将产品插入其数据库时修改产品的项目选项存储的 Magento 核心行为

> ID：13416539
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:24:44.283
> 
> 标签：php, mysql, database, magento, core

我在 Magento 中的产品有一个项目选项，一旦我将产品添加到卡中，它就会存储在“sales_flat_quote_item_option”中。当我为产品选择此选项并将产品添加到该购物车时，就会发生这种情况。

我想知道 Magento 的核心代码中插入该表的 item 选项的确切位置，这样我就可以在那里做一些我想做的额外代码。特别是，我也想将该项目选项中的数据保存为文件。

我在哪里可以看到这种行为，以便我可以在其中编写更多代码并对其进行一些更改？

如果我不清楚，请询问更多信息。描述起来有点复杂。

我发现这个有趣的网站可能是我正在寻找的：

[http://incho.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/](http://inchoo.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:33:52.487

您可以使用 Magento 事件观察器功能的帮助。

希望这可以帮助！

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

如果您需要更多帮助，请告诉我！

# c# - Google Calendar API v3：使用 AccessToken 检索 CalendarList

> ID：13416543
> 
> 赞同：0
> 
> 时间：2012-11-16T12:25:25.640
> 
> 标签：c#, google-api, oauth-2.0, google-calendar-api

我正在尝试访问 Google API v3 日历列表，但即使我有用户的有效 AccessToken，我也会不断收到 401/404 响应。
（我完成了[Web Server Applications 的 OAuth2 协议，](https://developers.google.com/accounts/docs/OAuth2WebServer)并获得了[https://www.googleapis.com/auth/calendar](https://www.googleapis.com/auth/calendar)权限）

很难找到好的文档，谷歌网站本身不是很有帮助，搜索充满了旧的 v2 信息或使用 SDK。通常我可以将 python 回复翻译成 c#，但在这种情况下，即使这样也对我没有帮助。

所以我把头发拉了出来，但我可能在这里忘记了一些非常简单的东西，比如缺少参数或类似的东西，所以如果有人能快速查看这段代码并告诉我我做错了什么，将不胜感激.

```
var applicationKey = moduleModel.Application.Key;
var userID = moduleModel.User.UserID;
var accessToken = moduleModel.User.AccessToken.Token;

// It doesn't seem to make any difference whether I use the querystring
// parameter or the request header to specify the access_token
var sendAccessTokenAsHeader = 
    !(Request.QueryString["SendAccessTokenAsHeader"] == "0");

// I tried navigating to a specific user but it results in a 404 Not Found
var requestSpecificUserID = 
    Request.QueryString["RequestSpecificUserID"] == "1";

// Including or omitting my API_KEY doesn't seem to make any difference
var sendApplicationKey = 
    !(Request.QueryString["SendApplicationKey"] == "0");

var urlBuilder = new System.Text.StringBuilder();

urlBuilder.Append("https://");
urlBuilder.Append("www.googleapis.com");

if (requestSpecificUserID)
{
    urlBuilder.Append
        (string.Format("/calendar/v3/users/{0}/calendarList", userID));
}
else
{
    urlBuilder.Append
        ("/calendar/v3/users/me/calendarList");
}

var parameterJoiner = "?";

if (sendApplicationKey)
{
    urlBuilder.Append
    (
        string.Format
        (
            "{0}{1}={2}",
            parameterJoiner,
            "key",
            HttpUtility.UrlEncode(applicationKey)
        )
    );
    parameterJoiner = "&";
}

if (!sendAccessTokenAsHeader)
{
    urlBuilder.Append
    (
        string.Format
        (
            "{0}{1}={2}",
            parameterJoiner,
            "access_token",
            HttpUtility.UrlEncode(accessToken)
        )
    );
    parameterJoiner = "&";
}

var httpWebRequest = HttpWebRequest.Create(urlBuilder.ToString()) 
    as HttpWebRequest;
httpWebRequest.CookieContainer = new CookieContainer();

if (sendAccessTokenAsHeader)
{
    httpWebRequest.Headers["Authorization"] = string.Format
    (
        "Bearer {0}",
        accessToken
    );
}

// GetSafeResponse is just an extension method to catch the WebException 
// when the HttpStatusCode != OK

var response = httpWebRequest.GetSafeResponse(); 

// returns 401 (requestSpecificUserID = false)
// or 404 (requestSpecificUserID = true)

var responseText = response.GetResponseText();

return responseText; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:26:41.010

我通过阅读[这个](https://stackoverflow.com/questions/11505736/oauth-token-works-for-userinfo-but-not-to-google-calendar?lq=1)问题找到了答案。

显然，即使 Google 文档根本没有提到它**，**参数*minAccessRole*也是必需的。

工作示例：

```
var accessToken = moduleModel.User.AccessToken.Token;

var urlBuilder = new System.Text.StringBuilder();

urlBuilder.Append("https://");
urlBuilder.Append("www.googleapis.com");
urlBuilder.Append("/calendar/v3/users/me/calendarList");
urlBuilder.Append("?minAccessRole=writer");

var httpWebRequest = HttpWebRequest.Create(urlBuilder.ToString()) 
    as HttpWebRequest;

httpWebRequest.CookieContainer = new CookieContainer();
httpWebRequest.Headers["Authorization"] = 
    string.Format("Bearer {0}", accessToken);

var response = httpWebRequest.GetSafeResponse();

var responseText = response.GetResponseText();

return responseText; 
```

# javascript - 检查是否至少有一个输入字段填写了jQuery

> ID：13416545
> 
> 赞同：8
> 
> 时间：2012-11-16T12:25:39.127
> 
> 标签：javascript, jquery, input

我有一个 jQuery 脚本，它检查是否至少一个输入字段包含文本，但它不检查我的选择选项。有人可以帮我实施吗？

剧本：

```
$(function(){
    $("#myform").submit(function(){

        var valid=0;
        $(this).find('input[type=text]').each(function(){
            if($(this).val() != "") valid+=1;
        });

        if(valid){
            alert(valid + " inputs have been filled");
            return true;
        }
        else {
            alert("error: you must fill in at least one field");
            return false;
        }
    });
}); 
```

以及用于测试的 HTML：

```
<form action="/echo/html" id="myform" method="post">
<input type="text"><br>
<input type="text"><br>
<input type="text"><br>

<select name="something" id="something" type="text">
<option value=""></option>
<option value="one">Option one</option>
<option value="two">Option two</option>
<option value="three">Option three</option>
</select>

<input type="submit"/>
</form>​ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T12:30:55.670

对于一个同时获取 'select' 和 'input' 元素的语句，只需将单个 jQuery 选择器更改为多个选择器，如下所示：

```
$(this).find('input[type=text], select').each(function(){
            if($(this).val() != "") valid+=1;
        }); 
```

# c++ - C++：三规则，为什么？

> ID：13416546
> 
> 赞同：0
> 
> 时间：2012-11-16T12:25:43.930
> 
> 标签：c++, oop

> **可能的重复：**
> [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

当你在 C++ 中设计课程时，我在我的书中读到了关于三规则的内容：

```
If you define any one of three in class, then you should define all of three.
1) destructor
2) copy constructor
3) Copy assignment constructor 
```

我了解如何在 C++ 中实现这些。但我无法解释自己为什么在我们已经拥有一个的情况下应该同时做这三个**。**这之间有什么联系，请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:27:57.923

基本上定义其中一个的原因（而不依赖于自动机制），同样的原因也适用于其他“构造函数”。

# joomla - 创建新菜单项时为 joomla 组件创建新选项

> ID：13416547
> 
> 赞同：1
> 
> 时间：2012-11-16T12:25:45.717
> 
> 标签：joomla, joomla2.5, joomla-extensions

我在互联网上搜索了如何在创建新菜单项时创建其他选项的很好的解释。

例如：我在创建菜单选项时创建了销售不同公司芯片的组件，它只显示 xyz 公司的芯片，而不是所有公司的芯片。

类似的工作流程是当我们想要将文章添加为新菜单项时。“必需设置”所在的字段。

请告诉我负责它的代码或好的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:42:03.633

如果您正在寻找自定义组件的菜单选项，您可以在以下文件中添加菜单参数 -

```
site/components/com_component/views/viewname/tmpl/default.xml 
```

以下是如何创建菜单参数的说明-

[http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5_-_Part_06#site.2Fviews.2Fhelloworld.2Ftmpl.2Fdefault.xml](http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5_-_Part_06#site.2Fviews.2Fhelloworld.2Ftmpl.2Fdefault.xml)

有关参数的完整列表，您可以在此处查看 - [http://docs.joomla.org/Standard_form_field_types](http://docs.joomla.org/Standard_form_field_types)

# python - Python 遍历文件系统。奇怪的问题

> ID：13416549
> 
> 赞同：3
> 
> 时间：2012-11-16T12:25:51.097
> 
> 标签：python, python-3.x

我正在尝试遍历目录。下面是代码：

```
file_list = []
    os.chdir(self.config.Root_Directory_Path())
    for root, dirs, files in os.walk("."):
        file_list.extend( join(root,f) for f in files )
    file_sorted = sorted(file_list)
    f = open(self.config.Client_Local_Status(),'wb')        
    for file in file_sorted:
        print(file + "|" + str(os.path.getmtime(file)) + "\n")            
    f.close() 
```

首先，我遍历树，然后对其进行排序，然后打印。但是我在遍历时收到以下错误。我非常确定该文件存在，但无法找出错误的原因。请帮助我找出错误的原因并修复它。

下面是输出。

输出：

```
.\Drivers\Intel Drivers\Applications\Software\Applications\Wave_Embassy_Trust_Suite\EMBASSY Security Center\program files\Wave Systems Corp\EMBASSY Security Center\plugins\cpm.scp\webinterface\ru\js\HelpMessages.js|1229488128.0

.\Drivers\Intel Drivers\Applications\Software\Applications\Wave_Embassy_Trust_Suite\EMBASSY Security Center\program files\Wave Systems Corp\EMBASSY Security Center\plugins\cpm.scp\webinterface\ru\js\Strings.js|1229488128.0 
```

成功打印大量文件名后，一个特定文件的代码失败，如下所示：

错误：

```
Traceback (most recent call last):
  File "C:\SyncClientRK\SyncClientRK.py", line 183, in <module>
    SyncClientRK()
  File "C:\SyncClientRK\SyncClientRK.py", line 17, in __init__
    self.getStatus()
  File "C:\SyncClientRK\SyncClientRK.py", line 38, in getStatus
    self.generateLocalStatus()
  File "C:\SyncClientRK\SyncClientRK.py", line 53, in generateLocalStatus
    print(file + "|" + str(os.path.getmtime(file)) + "\n")
  File "C:\Python33\lib\genericpath.py", line 54, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [WinError 3] The system cannot find the path specified: '.\\Drivers\\Intel Drivers\\Applications\\Software\\Applications\\Wave_Embassy_Trust_Suite\\EMBASSY Security Center\\program files\\Wave Systems Corp\\EMBASSY Security Center\\plugins\\cpm.scp\\webinterface\\zh-CHS\\AccessingToolkit.htm' 
```

请注意，文件是在循环中获取并打印出来的，但是 os.path.getmtime 会抛出一个找不到的错误。无法理解为什么以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:03:41.110

这是一个 220 字符长的文件名，从本地目录开始。假设本地目录的路径长度超过 40 个字符，您将达到旧的 Windows 路径长度超过 260 个字符的限制。

并非所有在 Windows 中处理文件的方式都有这个限制，但可能这就是这里的问题。如果您的列表中有更长的文件名，那么这显然不是问题，但这就是我首先要研究的。

另请参阅：http: [//msdn.microsoft.com/en-us/library/aa365247%28v=vs.85%29.aspx#maxpath](http://msdn.microsoft.com/en-us/library/aa365247%28v=vs.85%29.aspx#maxpath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:38:19.310

文件名中可能有奇怪的字符？显然`os.walk`会返回您以后无法访问的内容；这不应该发生，但它确实发生了。必须是古怪的东西，可能与 Windows 文件系统、文件名处理等有关。当它不存在时打印名称，使用`repr(file_name)`，看看你是否能在里面找到奇怪的字符。更有可能是其他东西在摆弄，但这是我目前最好的猜测。

# knockout.js - Knockout Protected Observable 和映射插件

> ID：13416551
> 
> 赞同：0
> 
> 时间：2012-11-16T12:25:53.867
> 
> 标签：knockout.js, knockout-mapping-plugin

受保护的 observable 需要传递给函数的参数，例如：

```
var item = function(param)
{
  var me = this;
  me.itemProtected = ko.protectedObservable(param);

} 
```

我不知道 KO 映射插件的内部工作原理，但如果我使用它将 Json 数据映射到我的模型受保护的 observable 将不起作用。我假设它只是将属性映射为可观察对象并完全忽略受保护的可观察对象。绑定语法：

```
ko.mapping.fromJSON(data, null, viewModel); 
```

有没有办法映射 json 数据并保留受保护的 observable？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:31:22.843

```
ViewModel = function(data)
{
   this.itemProtected = ko.protectedObservable();
   return ko.mapping.fromJS(data, {}, this);

} 
```

JSON 数据课程需要有一个名为 itemProtected 的成员才能正常工作

编辑：Disclamer，我不知道 protectedObservable 是什么，它不是核心 KO 库的一部分。

编辑：

*   解决方案1：http: [//jsfiddle.net/LFCWe/](http://jsfiddle.net/LFCWe/)需要commit for json data to take
*   解决方案2：http: [//jsfiddle.net/LFCWe/1/](http://jsfiddle.net/LFCWe/1/)这个小提琴使用create方法，因此JSON的值将直接提交

# javascript - 选择其他选项并禁用选择

> ID：13416557
> 
> 赞同：0
> 
> 时间：2012-11-16T12:26:13.717
> 
> 标签：javascript, selection, option

您将在下面找到示例代码和演示。我将尝试解释它的作用：

当您选择`id="vanilla-yes"`或`id="chocolate-yes"`时，`id="icecreamcone"`将被选中并禁用。

当您取消选择两者时，它会从 中删除 disabled 属性`id="icecreamcone"`。

**问题：**
当仅取消选择两者之一时，它也会删除 disabled 属性。

**注意：**选择或选择
`id="icecreamcone"`时，应始终禁用。`id="vanilla-yes"``id="chocolate-yes"`

有谁知道如何解决这个问题？

**[演示](http://jsfiddle.net/L9rja/ "演示")**

```
<ul id="icecream" style="list-style:none;line-height:30px;">
  <li>
    <select id="icecreamcone">
      <option value="addicecreamcone">Would you like an ice cream cone?</option>
      <option id="icecreamcone-yes" value="yes">Yes</option>
      <option id="icecreamcone-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="vanilla">
      <option value="addvanilla">Would you like to add vanilla ice cream?</option>
      <option id="vanilla-yes" value="yes">Yes</option>
      <option id="vanilla-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="chocolate">
      <option value="addchocolate">Would you like to add chocolate ice cream?</option>
      <option id="chocolate-yes" value="yes">Yes</option>
      <option id="chocolate-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="sprinkles">
      <option value="addsprinkles">Would you like to add sprinkles on top?</option>
      <option id="sprinkles-yes" value="yes">Yes</option>
      <option id="sprinkles-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <input type="submit" id="submit-icecream" value="Submit Ice Cream" />
  </li>
</ul> 
```

```
<script type="text/javascript">
function observeFlavor(flavor, requires) {
    document.getElementById(flavor).onchange = function(){
      if(document.getElementById(flavor).options[1].selected == true) {
        document.getElementById(requires).options[1].selected = true;
        document.getElementById(requires).disabled = true;
      }
      else{           
        document.getElementById(requires).disabled = false;
      }
    }
}

document.getElementById("submit-icecream").onclick = function () {    
    document.getElementById("icecreamcone").disabled = false;
}

observeFlavor("chocolate","icecreamcone");
observeFlavor("vanilla","icecreamcone");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:36:04.450

添加一个计数器来跟踪当前阻止 disabled 的所有值`#icecreamcone`。如果您切换一个阻止`#icecreamcone`检查它是否被阻止的值：

1.  如果该值被阻塞，则减少计数器
2.  如果该值是非阻塞的，则增加计数器

如果计数器达到零，则取消阻止该元素 - 否则阻止它。

### 执行

```
var counter = {};
var previous = {};

function lock(id) {
    document.getElementById(id).options[1].selected = true;
    document.getElementById(id).disabled = true;
}

function unlock(id) {
    document.getElementById(id).disabled = false;
}

function observeFlavor(flavor, requires) {
    if (!counter[requires]) counter[requires] = 0;
    previous[flavor] = false;
    document.getElementById(flavor).onchange = function() {
        if (document.getElementById(flavor).options[1].selected == true && !previous[flavor]) {
            counter[requires]++;
            lock(requires);
            previous[flavor] = true;
        }
        else if (/* document.getElementById(flavor).options[2].selected == true &&*/
            previous[flavor]
        ) {
            previous[flavor] = false;

            if (--counter[requires] == 0) unlock(requires);
        }
    }
}

document.getElementById("submit-icecream").onclick = function() {
    document.getElementById("icecreamcone").disabled = false;
}

observeFlavor("chocolate", "icecreamcone");
observeFlavor("vanilla", "icecreamcone"); 
```

[JSFiddle](http://jsfiddle.net/L9rja/11/)

# javascript - 是否可以获得事件目标/srcElement 的行/字符号？

> ID：13416558
> 
> 赞同：3
> 
> 时间：2012-11-16T12:26:14.787
> 
> 标签：javascript, google-chrome, google-chrome-extension

我目前正在使用 oncontextmenu 检查右键单击：

```
window.oncontextmenu = function (e) {
    ...
} 
```

我知道如何获取目标 HTML，但我想知道如何找到目标元素在 HTML 中的位置。有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:04:36.883

你可以试试[https://developer.chrome.com/extensions/devtools.inspectedWindow.html](https://developer.chrome.com/extensions/devtools.inspectedWindow.html)

var element = $0;(返回 DOM 中选定的根元素)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:37:10.590

这可能有效，但是如果任何前面的元素与目标相同，它将返回不正确的值

```
window.oncontextmenu = function(e) {
    var charPos = document.body.innerHTML.indexOf(e.target.outerHTML);
} 
```

# javascript - 如何在使用 jquery 提交的名字中允许空格

> ID：13416561
> 
> 赞同：-3
> 
> 时间：2012-11-16T12:26:31.840
> 
> 标签：javascript, jquery

我是 jquery 验证的新手，我只想验证表单字段“名字”，它只允许字符和空格。

```
for eg:
"aaa bbb" instead of "aaabbb" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:15:47.853

关于输入掩码还有许多其他问题，例如[jQuery - Inputmask plugin](https://stackoverflow.com/questions/7935233/jquery-inputmask-plugin)

事实上，[今天发布了](https://stackoverflow.com/questions/13416179/dynamic-keyboard-capture-for-bank-accounts)另一个回复，推荐[digitalbush.com Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)。

如果您担心失去代表，请在发布问题之前进行更多研究。否决票按钮上的工具提示信息显示“这个问题没有显示任何研究工作；它不清楚或没有用”，我怀疑这就是反对票的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:40:41.873

您可以使用[jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)或正则表达式，如下所示：

```
$("yourinputselector").each(function(){
    if (/^[a-zA-Z]+\s$/.test(this.value)) {
        // valid input value
    } else {
        // invalid input value
    }
} 
```

# android - 如何在android中将视频文件（.mp4，.3gp）格式转换为二进制格式

> ID：13416562
> 
> 赞同：0
> 
> 时间：2012-11-16T12:26:48.210
> 
> 标签：android, video, binaryfiles

我已经从相机捕获了一个视频并存储在 sd 卡中，现在我需要将该视频文件转换为我的过程的二进制格式。谁能告诉我如何将视频文件转换为二进制格式。提前致谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:31:04.113

我使用以下方法转换了我的图像文件和pdf文件，请根据您的要求尝试

```
Bundle objBundle = objResult.getExtras();
Uri uriString = Uri.parse(objBundle.get("").toString());
File file = new File(uriString.getPath());
FileInputStream objFileIS = new FileInputStream(file);
ByteArrayOutputStream objByteArrayOS = new ByteArrayOutputStream();
byte[] byteBufferString = new byte[1024];
for (int readNum; (readNum = objFileIS.read(byteBufferString)) != -1;) 
{
 objByteArrayOS.write(byteBufferString, 0, readNum);
 System.out.println("read " + readNum + " bytes,");
}                    
byte[] byteBinaryData = Base64.encode((objByteArrayOS.toByteArray()), Base64.DEFAULT);
strAttachmentCoded = new String(byteBinaryData); 
```

这可能会帮助你

# android - 以编程方式打开和关闭屏幕在某些设备上不起作用

> ID：13416563
> 
> 赞同：1
> 
> 时间：2012-11-16T12:27:00.090
> 
> 标签：android, screen, wakelock, android-windowmanager, powermanager

我使用下面的代码来打开和关闭屏幕。这两段代码都适用于大多数设备（在 Galaxy Note、Galaxy S2 等上测试过），但不适用于少数设备（主要是平板电脑，但也有一些手机）。在某些设备上，屏幕开启但屏幕关闭不起作用，而其他一些设备则相反。我不确定原因是什么，因为它是非常标准的代码（并且因为它适用于某些设备，这意味着触发这些函数，即函数调用，不是问题）。是否有其他方法可以打开/关闭我可以使用的屏幕？任何帮助是极大的赞赏。

屏幕开启：-

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
final WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK
                                  |PowerManager.ACQUIRE_CAUSES_WAKEUP
                                  |PowerManager.ON_AFTER_RELEASE, "");
wl.acquire(); 
```

屏幕关闭（这调用了一个简单地使用设备管理员权限来锁定和关闭屏幕的活动。在某些设备上，这只会锁定屏幕。在其他设备上，它不做任何事情。在某些设备上，它可以完美运行）： -

```
 devicePolicyManager.lockNow(); 
```

这是我正在尝试的另一种方法，但我不能很好地工作。基本上我将亮度设置为 0 并关闭屏幕，然后执行这些操作的活动调用完成（）但由于某种原因，我无法在此之后 5-10 秒重新打开屏幕，无论我使用什么按钮按住（主页，电源）。

```
 WindowManager.LayoutParams params = getWindow().getAttributes();
  params.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;
  params.screenBrightness = 0;
  getWindow().setAttributes(params); 
```

# jquery - 网站无法在 IE8 上运行，一无所知

> ID：13416565
> 
> 赞同：-2
> 
> 时间：2012-11-16T12:27:09.020
> 
> 标签：jquery, internet-explorer-8, cross-browser

我创建了一个新网站，但是当我在 IE8（Internet Explorer 8）上查看它时，它显示了一个空白页面。我花了几个小时尝试寻找解决方案，但似乎无法弄清楚出了什么问题。这里有人可以帮助我吗？

我用过 jquery、css 和 html

非常感谢！

[http://www.badboot.be](http://www.badboot.be)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:45:19.227

javascript 控制台显示通过超大库初始化例程和 jQuery 的异常。*这表明 Supersized 库与 IE8 不兼容*。

这会导致取消隐藏页面的代码（我假设有）不运行，并且`body`keep their的子级`display: none`导致它们不出现。

# sql-server - 仅当列存在时才使用左外连接（SQL 服务器）

> ID：13416566
> 
> 赞同：1
> 
> 时间：2012-11-16T12:27:11.093
> 
> 标签：sql-server, join, where-clause

我正在使用 SQL Server Express，我正在尝试使用`LEFT OUTER JOIN`. 它工作得很好，但前提是所有列都存在。因此，过去一个小时我一直在阅读如何添加条件，以便`LEFT OUTER JOIN`仅在列存在时才这样做。

请参阅下面的代码（问题是最后一个`LEFT OUTER JOIN`，因为`a.[Page Path]`不存在）：

```
SELECT 
    b.[Page ID],
    ISNULL(b.[Page Group],'Other Landing Page') AS [Landing Page Group],
    ISNULL(c.[Page Group],'Other Second Page') AS [Second Page Group],
    ISNULL(d.[Page Group],'Other Page') AS [Page Path Group],
    a.*

FROM [mychoice-data-b9BwZvd] a 

LEFT OUTER JOIN [mychoice-pagedims] b 
ON 
   (a.[Landing Page Path] LIKE b.[Page ID])

LEFT OUTER JOIN [mychoice-pagedims] c 
ON 
   (a.[Second Page Path] LIKE c.[Page ID])

LEFT OUTER JOIN [mychoice-pagedims] d 
ON 
   a.[Page Path] LIKE d.[Page ID] 
   WHERE a.[Page Path] IS NOT NULL 
```

我试过`IF(EXISTS`了，但无论我做什么，我都会收到一个错误“无效的列名'页面路径'”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:47:20.150

我不认为你可以在一个查询中做到这一点，我建议你使用的一种方式是这样的：

```
if (
    select COUNT(*) 
    from sys.objects so 
    inner join sys.columns col 
    on so.object_id = col.object_id 
    where so.type = 'U' and so.name = 'tablename' and col.name = 'colname'
) > 0

-- column exists -> write select with the join

else

-- column does not exist, don't include the join 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:51:31.987

不，这是不可能的。数据库模式不应该在你的手中改变，所以应用程序应该知道它并且只查询存在的表和列。

如果有可能，您应该更改您的数据库架构，以便您需要运行查询的表不会略有不同甚至更好，因此您根本不需要在多个表上运行它。可能是通过将单个表中的信息与表明其来源的列结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:30:26.550

使用动态 SQL

```
DECLARE 
    @SQL VARCHAR(MAX)='
SELECT 
    b.[Page ID],
    ISNULL(b.[Page Group],''Other Landing Page'') AS [Landing Page Group],
    ISNULL(c.[Page Group],''Other Second PAGE'') AS [Second Page Group],
    ISNULL(d.[Page Group],''Other Page'') AS [Page Path Group],
    a.*

FROM [mychoice-data-b9BwZvd] a 

LEFT OUTER JOIN [mychoice-pagedims] b 
ON 
   (a.[Landing Page Path] LIKE b.[Page ID])

LEFT OUTER JOIN [mychoice-pagedims] c 
ON 
   (a.[Second Page Path] LIKE c.[Page ID])

LEFT OUTER JOIN [mychoice-pagedims] d 
ON 
   '+
CASE 
    WHEN EXISTS (
        SELECT  *
        FROM sys.columns C  
        JOIN sys.tables T ON T.object_id = C.object_id  
        LEFT JOIN   sys.schemas S ON S.Schema_id=T.Schema_id 
        WHERE 
            C.Name ='Page Path'  AND
            T.Name ='mychoice-pagedims'         
    )
    THEN    'a.[Page Path] LIKE d.[Page ID]'
    ELSE    '(1=0)'
END+'

WHERE a.[Page Path] IS NOT NULL
'
EXEC(@SQL) 
```

# php - 使用模板中的 getFilters()

> ID：13416568
> 
> 赞同：0
> 
> 时间：2012-11-16T12:27:13.903
> 
> 标签：php, templates, filter, symfony-1.4

我对 Symfony 还不是很熟悉，所以我可能在这里问一个明显的问题。我需要在模板中找出会话过滤器（从 Doctrine 设置）的值。我试过了：

```
$sf_user->getFilters();
$sf_params->get('filters'); 
```

但它们都不起作用。所以我的问题是：如何从模板访问过滤器值。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:40:13.920

尝试这样的事情：

`$sf_user->getAttribute('product.filters', array(), 'admin_module')`;

您需要将名称 ( `'product.filters'`) 和命名空间 ( `'admin_module'`) 替换为您正在使用的名称。

# c# - C# 中的侦听器和控制流

> ID：13416570
> 
> 赞同：0
> 
> 时间：2012-11-16T12:27:22.153
> 
> 标签：c#, asynchronous, listener

被调用函数如何让调用函数知道他已完成所有处理？

```
myFunction1(){

    myFunction2();

}

myFunction2(DownloadStringCompletedEventHandler callback){

    // Calls a web service and updates local files

}

myFunction2Returned(object sender, DownloadStringCompletedEventArgs e){

} 
```

像这样开始整个通话：

```
myFunction1();

// Continue processing here... 
```

现在我想知道的是，如果我打电话`myFunction1()`，你怎么能等到一切`myFunction2()`都完成后再继续处理？（这超出了“在此处继续处理......”评论之外的任何内容）。

问题是，在我调用`myFuntion1()`我的代码之后，尝试读取依赖于`myFunction2()`完成它的 Web 服务调用的文件并将所需的文件完全写入磁盘。

我希望这一切都有意义，很难让问题的措辞正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:39:24.113

您需要使用异步和等待。你可以写一个这样的函数：

```
private async void SomeFunction()
{
    // Do something
    await SomeOtherFunction();
    // Do something else
} 
```

在您的情况下，这对于您无法控制其他功能的处理的 Web 服务访问特别有用。这里的关键字是`async`以及`await`表明该函数将涉及异步编程的信号。

请注意，此语法相对较新（C#5），但由于您没有在问题中标记任何特定版本的 .NET，我想我会给您最新和最好的；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:39:40.700

您应该为此使用一些任务技术，[如下所示](http://msdn.microsoft.com/en-us/library/dd997417.aspx)：

```
static void SimpleNestedTask()
{
    var parent = Task.Factory.StartNew(() =>
    {
        // myFunction1 code here;
        Console.WriteLine("Outer task executing.");

        var child = Task.Factory.StartNew((t) =>
        {
            // myFunction2 code here
            // Calls a web service and updates local files
            Console.WriteLine("Nested task completing.");
        }, TaskCreationOptions.AttachedToParent | TaskCreationOptions.LongRunning);
   });

    parent.Wait();
    Console.WriteLine("Outer has completed.");
} 
```

# python - 自动调整一个 QGraphicsItem 实例的大小，并且无意中调整了所有其他实例的大小

> ID：13416580
> 
> 赞同：0
> 
> 时间：2012-11-16T12:27:57.880
> 
> 标签：python, resize, instance, shared, qgraphicsitem

我有一个问题，当我调整“Test_Boxes”之一的大小时，所有其他现有的 Text_Boxes 也会调整大小，之后创建的任何内容都会使用调整后的大小创建。

似乎他们都共享相同的 QRect 但他们不应该。

请帮忙。

## 代码：

```
import sys, sip, random 
from PyQt4.QtCore import *
from PyQt4.QtGui import *

PAGESIZE_LST            = [612, 792]
POINT_SIZE              = 10
CURSOR_SIZE             = 2 * POINT_SIZE

BORDER_WIDTH            = 0.5 * POINT_SIZE

def Cursor_Pos(item):
    # Get mouse position relative to this item
    cursor_pos          = item.scene().parent().mapFromGlobal(QCursor.pos())
    cursor_pos          = item.scene().views()[0].mapToScene(cursor_pos)
    cursor_pos          = item.mapFromScene(cursor_pos)
    return cursor_pos

class Test_Box(QGraphicsItem):
    """ Group box that groups the various stages """
    # Constants
    WIDTH               = 70 * POINT_SIZE
    HEIGHT              = 100 * POINT_SIZE
    RECT                = QRectF(0, 0, WIDTH, HEIGHT)
    CORNER_RADIUS       = 1.5 * POINT_SIZE
    FONT_SIZE           = 4 * POINT_SIZE
    BORDERRECT_PAD      = 4 * POINT_SIZE

    def __init__(self, position, parent=None):
        super(Test_Box, self).__init__(parent)

        # Vars
        self.resize_sections= None
        self.resize_pos     = None
        self.rect           = Test_Box.RECT

        # Settings
        self.setFlags(  self.flags()                    |
                        QGraphicsItem.ItemIsSelectable  |
                        QGraphicsItem.ItemIsMovable     |
                        QGraphicsItem.ItemIsFocusable   )

    def boundingRect(self):
        return self.rect.adjusted(-BORDER_WIDTH/2,-BORDER_WIDTH/2,BORDER_WIDTH/2,BORDER_WIDTH/2)

    def paint(self, painter, option, widget):
        # Draw Box

        # Inner and outer rect to display drag-expand's clickable area
        outer_rect  = self.boundingRect().adjusted(-Test_Box.BORDERRECT_PAD,-Test_Box.BORDERRECT_PAD,CURSOR_SIZE+Test_Box.BORDERRECT_PAD,CURSOR_SIZE+Test_Box.BORDERRECT_PAD)
        inner_bound = (BORDER_WIDTH/2 + (Test_Box.CORNER_RADIUS/2)) # Get corner offset due to rounded corners
        inner_rect  = self.boundingRect().adjusted((CURSOR_SIZE+inner_bound)+Test_Box.BORDERRECT_PAD, (CURSOR_SIZE+inner_bound)+Test_Box.BORDERRECT_PAD, -inner_bound-Test_Box.BORDERRECT_PAD, -inner_bound-Test_Box.BORDERRECT_PAD)    
        painter.drawRect(outer_rect)
        painter.drawRect(inner_rect)

        brush   = QBrush(QColor(100, 100, 100, 100))
        painter.setBrush(brush) 
        painter.drawRoundedRect(self.rect, Test_Box.CORNER_RADIUS, Test_Box.CORNER_RADIUS)      

    def Cursor_OnEdge(self):
        outer_rect  = self.boundingRect().adjusted(-Test_Box.BORDERRECT_PAD,-Test_Box.BORDERRECT_PAD,CURSOR_SIZE+Test_Box.BORDERRECT_PAD,CURSOR_SIZE+Test_Box.BORDERRECT_PAD)
        inner_bound = (BORDER_WIDTH/2 + (Test_Box.CORNER_RADIUS/2)) # Get corner offset due to rounded corners
        inner_rect  = self.boundingRect().adjusted((CURSOR_SIZE+inner_bound)+Test_Box.BORDERRECT_PAD, (CURSOR_SIZE+inner_bound)+Test_Box.BORDERRECT_PAD, -inner_bound-Test_Box.BORDERRECT_PAD, -inner_bound-Test_Box.BORDERRECT_PAD)    
        cursor_pos  = Cursor_Pos(self)
        on_edge     = False
        if outer_rect.contains(cursor_pos) and not inner_rect.contains(cursor_pos):
            on_edge = True
        return on_edge

    def mousePressEvent(self, event):
        # check if user has clicked this object's border
        if self.Cursor_OnEdge():
            self.Setup_Resize() 
        super(Test_Box, self).mousePressEvent(event)

    def mouseMoveEvent(self, event):
        if self.resize_pos != None:
            self.Resize()
        else:       
            super(Test_Box, self).mouseMoveEvent(event)

    def mouseReleaseEvent(self, event):
        if self.resize_pos != None:
            self.Done_Resize()
        super(Test_Box, self).mouseReleaseEvent(event)

    def Setup_Resize(self):     
        self.resize_sections= []
        self.setCursor(Qt.ClosedHandCursor)
        cursor_pos          = Cursor_Pos(self)
        self.resize_pos     = cursor_pos
        # Determine drag from sections
        if cursor_pos.y() > self.boundingRect().height()/2:
            # If on bottom half
            self.resize_sections.append('BOTTOM')
        else:
            self.resize_sections.append('TOP')
        if cursor_pos.x() < self.boundingRect().width()/2:
            # If on left half
            self.resize_sections.append('LEFT')
        else:
            self.resize_sections.append('RIGHT')    

    def Resize(self):
        updated         = False
        # From cursor_pos to resize_pos
        cursor_pos      = Cursor_Pos(self)  
        move_x          = cursor_pos.x() - self.resize_pos.x()
        move_y          = cursor_pos.y() - self.resize_pos.y()
        child_rect      = self.childrenBoundingRect()
        # If y not within child items rect
        if not child_rect.contains(child_rect.left()+1, cursor_pos.y()):
            if self.resize_sections[0] == 'TOP':
                self.rect.setTop(self.rect.top() + move_y)  
            else:
                self.rect.setBottom(self.rect.bottom() + move_y)
            updated     = True
        # If x not within child items rect
        if not child_rect.contains(cursor_pos.x(), child_rect.top()+1):
            if self.resize_sections[1] == 'LEFT':
                self.rect.setLeft(self.rect.left() + move_x)    
            else:
                self.rect.setRight(self.rect.right() + move_x)
            updated     = True
        # Check if updated      
        if updated:
            self.scene().update()
            self.resize_pos = cursor_pos

    def Done_Resize(self):
        self.resize_pos = None
        self.setCursor(Qt.ArrowCursor)  

class GraphicsView(QGraphicsView):
    def __init__(self, parent=None):
        super(GraphicsView, self).__init__(parent)
        self.setDragMode(QGraphicsView.RubberBandDrag)
        self.setRenderHint(QPainter.Antialiasing)
        self.setRenderHint(QPainter.TextAntialiasing)

    def wheelEvent(self, event):
        factor = 1.41 ** (event.delta() / 240.0)
        self.scale(factor, factor)

class Main_Dlg(QDialog):
    OFFSET  = 5

    def __init__(self, parent=None):
        super(Main_Dlg, self).__init__(parent)

        self.from_linkPnt= None

        self.prev_pnt   = QPoint()
        self.add_offset = Main_Dlg.OFFSET

        self.prntr  = QPrinter(QPrinter.HighResolution)
        self.prntr.setPageSize(QPrinter.Letter)

        self.view   = GraphicsView()
        self.scene  = QGraphicsScene(self)
        self.scene.setSceneRect(0, 0, PAGESIZE_LST[0], PAGESIZE_LST[1])
        self.view.setScene(self.scene)

        linkPnt_btn = QPushButton("Add Stage Box")
        linkPnt_btn.clicked.connect(self.Add_Item)

        layout      = QVBoxLayout()
        layout.addWidget(self.view)
        layout.addWidget(linkPnt_btn)
        self.setLayout(layout)

        self.Add_Item()

    def position(self):
        point   = self.mapFromGlobal(QCursor.pos())
        if not self.view.geometry().contains(point):
            coord_x = random.randint(int(PAGESIZE_LST[0]*0.25), int(PAGESIZE_LST[0]*0.75))
            coord_y = random.randint(int(PAGESIZE_LST[1]*0.25), int(PAGESIZE_LST[1]*0.75))
            point   = QPoint(coord_x, coord_y)
        else:
            if point == self.prev_pnt:
                point   += QPoint(self.add_offset, self.add_offset)
                self.add_offset += 5
            else:
                self.add_offset = Main_Dlg.OFFSET
                self.prev_pnt   = point
        return self.view.mapToScene(point)

    def Add_Item(self):
        item    = Test_Box(self.position())
        self.scene.addItem(item)

app = QApplication(sys.argv)
form = Main_Dlg()
rect = QApplication.desktop().availableGeometry()
form.resize(int(rect.width() * 0.6), int(rect.height() * 0.9))
form.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:40:17.890

是的，他们*共享*相同的`QRect`，因为您在分配给时不会创建它的副本`self.rect`：

```
class Test_Box(QGraphicsItem):
    """ Group box that groups the various stages """
    # Constants
    WIDTH               = 70 * POINT_SIZE
    HEIGHT              = 100 * POINT_SIZE
    RECT                = QRectF(0, 0, WIDTH, HEIGHT)
    CORNER_RADIUS       = 1.5 * POINT_SIZE
    FONT_SIZE           = 4 * POINT_SIZE
    BORDERRECT_PAD      = 4 * POINT_SIZE

    def __init__(self, position, parent=None):
        super(Test_Box, self).__init__(parent)

        # Vars
        self.resize_sections= None
        self.resize_pos     = None
        self.rect           = QRectF(Test_Box.RECT)    #use a copy!

        # Settings
        self.setFlags(  self.flags()                    |
                        QGraphicsItem.ItemIsSelectable  |
                        QGraphicsItem.ItemIsMovable     |
                        QGraphicsItem.ItemIsFocusable   ) 
```

此外，您正确地返回了一个新矩形，`boundingRect()`但在调整大小时您修改了共享矩形，这就是所有实例都相应调整大小的原因。

我认为`self.rect`从一开始就使用副本应该可以解决这个问题。

# java - 我可以在不分发源代码的情况下将 JavaFX 2.x 用于我的应用程序吗？

> ID：13416588
> 
> 赞同：0
> 
> 时间：2012-11-16T12:28:19.027
> 
> 标签：java, licensing, javafx-2, javafx

刚刚使用 java 启动了一个应用程序，计划使用 JavaFX。但后来我在维基百科中看到了 JavaFX 许可证 - GPL v2。我不擅长许可证，但据我了解，如果我打算使用 JavaFX，我必须将代码与应用程序一起分发。我在正确的轨道上吗？

该应用程序将涉及网络，因此不允许对客户端进行源代码访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:31:25.840

从[甲骨文的网站](http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#10)：

> **10\. JavaFX 在什么类型的许可证下可用？**
> JavaFX 在与Java SE[相同的许可和商业模式下可用。](http://www.oracle.com/technetwork/java/javase/terms/license/index.html)这包括第三方开发人员根据许可条款和条件随其应用程序分发运行时库的能力。

# php - 获取产品 URL

> ID：13416594
> 
> 赞同：-5
> 
> 时间：2012-11-16T12:28:41.400
> 
> 标签：php, xml-parsing

我有以下链接，它提供了产品列表。但我无法在 PHP 数组中获取这些产品如何获取这些产品。请给我一些想法。

网址 - [https://www.rudolphs-christmasshop.com.au/api/v2/products/](https://www.rudolphs-christmasshop.com.au/api/v2/products/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:34:57.623

从 URL 获取 XML 的方法有很多——也许最简单的方法是使用[`simplexml_load_file`](http://php.net/manual/en/function.simplexml-load-file.php)：

```
$xml = simplexml_load_file($url);
print_r($xml); 
```

`$url`您的 URL显然在哪里。您可以将用户名和密码添加到 URL 中，例如`http://username:password@url/`

或者您可以使用[cURL](http://uk3.php.net/manual/en/curl.examples-basic.php)然后[simplexml_load_string](http://www.php.net/manual/en/function.simplexml-load-string.php)来解析结果：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERPWD, $username . ':' . $password);
$result = curl_exec($ch);
curl_close($ch);

$xml = simplexml_load_string($result); 
```

# java - < c:import url...> 从另一个控制器重定向时不调用控制器方法

> ID：13416597
> 
> 赞同：1
> 
> 时间：2012-11-16T12:29:04.960
> 
> 标签：java, spring, model-view-controller, jstl

我创建了一个 jsp 视图（例如称为“foo”），其中包含 2 个 < c:import ...> 标记以加载 2 个局部视图（例如称为“subFoo1”和“subFoo2”）。它的完成方式是，我在控制器中有 3 个方法，每个视图一个 fooController - foo, sub1Controller > subFoo1, sub2Controller > subFoo2

当我单击将我带到返回 ModelAndView (foo.jsp) 的 fooController 的按钮时，其他 2 个部分视图由 < c:import ...> 标签加载并且可以 100% 正常工作。

问题是，当我从另一个控制器调用 fooController 时（所以不是来自浏览器的请求，而是来自另一个控制器，例如，将某些内容保存到数据库），然后 foo.jsp 加载正常，但 subFoo1 和 subFoo2 可以根本不加载。

调试显示正确的参数被传递给 fooController 和 foo.jsp，并且 sub1Controller 和 sub2Controller 都没有被调用。

这让我相信，当 foo.jsp 通过从另一个控制器调用其控制器而不是来自浏览器的请求来呈现时，< c:import ... > 标签没有调用它们的 URL。

正如我之前所说，当从浏览器向 fooController 发出请求时，它可以 100% 工作，但当我从另一个控制器调用 fooController 时则不行。

我四处搜寻，但似乎找不到像这样的东西。据我了解， < c:import ... > 吞下来自 URL 的 HTML 响应并将其嵌入到它所在的页面上。我不明白为什么请求 foo.jsp 会有所不同，就我而言，它应该对 < c:import ...> 标签没有影响（我说错了吗？）

# java - 为什么 Process.waitfor 不返回？

> ID：13416605
> 
> 赞同：1
> 
> 时间：2012-11-16T12:29:34.490
> 
> 标签：java, process, runtime.exec

这是我的代码。请审查它。它似乎没有`p.waitFor()`返回，请帮助我。谢谢。

```
try
        {
            String svnCmd="svn diff -r " +startVersion +":" + endVersion +" --summarize --username testdomain\\tesuer --password test.123 http://cvs-server.testserver.com:8001/svn/projects/testproject/";

            Process p = Runtime.getRuntime().exec(svnCmd);
            p.waitFor();
            BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line = reader.readLine();
            while (line != null)
            {
                System.out.println(line);
                line = reader.readLine();
            }
        }
        catch (IOException e1)
        {

        }
        catch (InterruptedException e2)
        {

        }

        System.out.println("Done"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:34:41.637

我猜，但是 Process API 存在一个常见问题，即您必须使用 Process 的 stdout 和 stderr ，否则当支持这些流（操作系统级别）的缓冲区填满时，外部进程可能会阻塞。

典型的方法是启动一个或多个线程以在后台使用此信息。

我不会自己动手，而是使用[Apache Commons Exec](http://commons.apache.org/exec/)来为你处理这个问题。

# c# - 如何从 SVN 存储库获取分支的最高修订号？

> ID：13416606
> 
> 赞同：2
> 
> 时间：2012-11-16T12:29:33.973
> 
> 标签：c#, visual-studio-2008, sharpsvn

我正在使用此代码片段从**svn**中查找最高修订号，但我的页面没有响应。它只继续搜索

```
using (SvnClient client = new SvnClient())
{
    SvnInfoEventArgs info;
    Uri repos = new Uri("svn://india01/repository/branches/mybranch1");
    client.GetInfo(repos, out info);
    lblMsg.Visible = true;
    lblMsg.Text = (string.Format("The last revision of {0} is {1}", 
           repos, info.Revision));
} 
```

我想从**svn**存储库中`mybranch1`获取最高修订号。**`svn://india01/repository/branches/mybranch1`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:55:43.833

这里我们需要将 SharpSvn Api dll 引用添加到 c# 项目中。 [SharpSvn 软件包下载链接](http://sharpsvn.open.collab.net)， [然后按照以下链接](http://sharpsvn.open.collab.net/docs/walkthrough.htm) 获取最高修订号的示例代码

```
SvnInfoEventArgs statuses;
SvnClient client = new SvnClient();
client.Authentication.Clear();//clear a previous authentication
client.Authentication.DefaultCredentials = 
    new System.Net.NetworkCredential("usr", "pass");
client.GetInfo("svn://india00/Repo/branches/xyz", out statuses);
int LastRevision = (int)statuses.LastChangeRevision;` 
```

添加引用为

```
using SharpSvn;
using System.Collections.Generic;
using System.Collections.ObjectModel;` 
```**

# php - 堆更新键

> ID：13416607
> 
> 赞同：0
> 
> 时间：2012-11-16T12:29:35.880
> 
> 标签：php, data-structures

简短描述：在更新几个值后，有没有一种快速的方法可以让堆恢复正常？如果我事先知道钥匙，我知道有一种简单的方法可以修复一个放错位置的钥匙。还有一种简单的方法可以将所有堆恢复为有序，使用与最初创建堆相同的函数。

我正在寻找这两者之间的东西。

有没有办法恢复两个放错位置的键的顺序？（假设我知道它们是哪些键）

详细说明：我需要 PHP 中的优先级队列（堆）。似乎有一组很好的 SPL 函数，但我没有找到对 update() 的支持。通过 update($key)，我的意思是一个函数，它允许我在更改 $key => $value 后恢复堆顺序。所以我用 update() 函数编写了自己的堆，它工作得很好。我已经有了要从另一个地方更新的密钥，所以我不必通过堆搜索来找到它，只需调用 update($key)。但我正在寻找一些优化。

我在该脚本中使用它的方式是：我创建一个堆，将其填满，然后重复执行此操作：

1.  查看根键，获取它的值
2.  在某个函数中使用该值作为参数，我们称之为 F()
3.  这个函数 F() 然后做一些事情，在此期间，它可能会更新堆中的几个值。
4.  跳到步骤 1

大多数时候，函数 F() 会更新两个键：根键和另一个键。但有时，它可能会更新更少或更多（有时它甚至可以更新所有键，但很少见）

我不太喜欢这样一个事实，即函数 F() 必须在每次更改后调用 update() 函数。由于某些原因（一个键可能会在 F() 函数的一次运行中重复更新），如果函数“手动”更改键的值，然后在完成后返回一个数组，那就更好了的密钥，已更新。然后，所有这些更新的密钥将一次全部放在正确的位置。

因此，必须修改 update() 函数以使用键数组而不是一个键。但我不确定这是可能的，也不知道怎么做。

# android - 设置垂直线的高度

> ID：13416609
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:29:41.237
> 
> 标签：android, layout

我有一些布局问题，不知道如何解决。

这是我的布局（以RelativeLayout 排列）：http: [//goo.gl/GxFTq](http://goo.gl/GxFTq)

可见的黑线是在我的 xml 中创建的

```
<View android:background="#000000"
      android:layout_width = "fill_parent"
      android:layout_below="@+id/lblCaption"
      android:id="@+id/view0"
      android:layout_centerHorizontal="true"
      android:layout_height="2dp"/> 
```

我用 gimp 添加了红线和绿线来描述我的问题。右侧的水平线应位于显示器顶部的垂直线和底部的中间。它应该像

```
android:layout_centerHorizontal="true" + distance between the top of the display to vertical line on top 
```

（见我照片上的绿线）

有小费吗？（xml 或编程方式的可能解决方案 - 没关系）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:51:54.513

试试这个新代码

```
<View
android:id="@+id/view0"
android:layout_width="2dp"
android:layout_height="50dp"
android:layout_below="@+id/lblCaption"
android:background="#000000" /> 
```

# java - 如何在验证 XAdES-T 消息之前从 X509SubjectName 中删除属性 PSEUDONYM

> ID：13416621
> 
> 赞同：1
> 
> 时间：2012-11-16T12:30:29.620
> 
> 标签：java, certificate, xades4j

目前，我们收到的证书在主题名称中包含属性 PSEUDONYM。当实例化一个 X500Name 对象时，java 给出一个异常。

在对 XAdES-T 消息的签名应用验证之前，如何从主题名称中删除 PSEUDONYM 属性。示例主题名称：C=NL,O=test,OU=Software,CN=DUMMY :PN,serialNumber=1,pseudonym=DUMMY :PN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:07:18.123

目前我很确定这是允许的。所以我会发布另一个问题如何实现它。

# java - 将符号转换为位 java

> ID：13416624
> 
> 赞同：0
> 
> 时间：2012-11-16T12:30:42.443
> 
> 标签：java, converter, symbols, bits

我需要将符号转换为位，以便每 2 个符号 = 1 字节 = 8 位。例如，如果用户输入是`RR`那么应该有`00001100`作为结果。（只是一个例子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:40:54.337

我无法理解你。为什么RR应该是00001100？在十六进制中，1100 代表字符“C”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:49:28.877

所以，如果我理解你的问题，那么有两种选择可以解决：简单或困难的方式。

简单的：

*   首先，您需要知道要使用的文字是否为十六进制值。
*   您可以使用键 0-9 | 创建一个表示 ASCII 表的排序映射。AH 和值代表你的二进制数。

例子：

```
SortedMap<Character, String>
lo_binary = new TreeMap<Character, String>();
lo_binary.put('0', "0000");
lo_binary.put('1', "0001");
lo_binary.put('2', "0010");
lo_binary.put('3', "0011");
lo_binary.put('4', "0100");
lo_binary.put('5', "0101");
lo_binary.put('6', "0110");
lo_binary.put('7', "0111");
lo_binary.put('8', "1000");
lo_binary.put('9', "1001");
lo_binary.put('A', "1010");
lo_binary.put('B', "1011");
lo_binary.put('C', "1100");
lo_binary.put('D', "1101");
lo_binary.put('E', "1110");
lo_binary.put('F', "1111"); 
```

*   阅读这两个符号并尝试将您的二进制代码查找到 Sorted Map 中。
*   将结果存储到字符串中

    字符串 ls_symbols = "AA"; 字符串 ls_result = " ";

    for (int ln=0; ln < ls_symbols.lenght(); ln++) { ls_result += lo_binary.get(ls_symbols.charAt(ln)); }

    System.out.println(ls_result); // AA -> 10101010

难的：

*   首先，您需要知道要使用的文字是否为十六进制值。
*   将具有十六进制字符的文字转换为 byte[]。
*   将 byte[] 转换为 boolean[]
*   结果为真 = 1 和假 = 0

例子：

// 你有文字 A。这个文字以二进制表示值 1010。你有 // 使用运算符 >>> 和 & 将二进制值更改为布尔值

```
1010
boolean = (1010 & 1000) == 1000 // (1000 = represents 0x80)
boolean = true (1);

1010 >>> 0100
boolean = (0100 & 1000) == 0000
boolean = false (0);

0100 >>> 1000
boolean = (1000 & 1000) == 1000
boolean = true (1);

1000 >>> 0000
boolean = (0000 & 1000) == 0000
boolean = false (0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:33:14.117

您的问题令人困惑，因为您谈论的是十六进制然后显示二进制数。无论如何，也许这会有所帮助......这会将输入转换为十六进制。也许你可以用它来准确地计算出你需要的东西（这对我来说不是那么清楚）。

```
import java.math.BigInteger;
public class MyTest {

    public static void main(String[] args) {

        String input = "RR";       
        System.out.println(toHex(input));     

    }   

    public static String toHex(String arg) {
        return String.format("%x", new BigInteger(1, arg.getBytes()));
    }    
} 
```

# pyqt - 当 setOrientation 为 Vertical 时，QDataWidgetMapper 在 PyQt 中无法与 QSqlTableModel 一起正常工作

> ID：13416626
> 
> 赞同：1
> 
> 时间：2012-11-16T12:31:00.367
> 
> 标签：pyqt, qsqltablemodel, setorientation

我有一个奇怪的问题。如果我只将两个小部件映射到 SQLITE 表的前两行（“simpletable”），则以下代码可以完美运行。小部件在启动时填充，当我编辑小部件并单击按钮并调用 mapper.submit() 时，表格已正确更新。

但是，一旦我映射了第三个小部件，小部件值就会在启动时正确填充，但是在调用 mapper.submit() 时出现错误并且不再有映射工作。

“simpletable”只是一组带有文本值的简单行和列：

```
"simpletable"
a1 b1 c1 d1
a2 b2 c2 d2
a3 b3 c3 d3 
```

当方向设置为水平时，列被正确映射并且一切正常。关于问题可能是什么的任何建议？

```
from PyQt4 import QtGui, QtCore, QtSql
import sys

def mapValues(mapper):
    if not mapper.submit():
        print "error!"
    else:
        print "ok!"
    mapper.toFirst()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    mw = QtGui.QWidget()
    db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
    db.setDatabaseName("demo_mapper.db")
    if not db.open():
        print "did not open"
    model = QtSql.QSqlTableModel()
    model.setTable("simpletable")
    model.select()
    model.submitAll()

    view = QtGui.QTableView()
    view.setModel(model)

    mapper = QtGui.QDataWidgetMapper()
    mapper.setSubmitPolicy(QtGui.QDataWidgetMapper.ManualSubmit)
    mapper.setModel(model)
    mapper.setOrientation(QtCore.Qt.Vertical)
    mapper.setCurrentIndex(0)

    vbox = QtGui.QVBoxLayout()
    vbox.addWidget(view)

    qlinePropValue_0 = QtGui.QLineEdit()
    qlinePropValue_1 = QtGui.QLineEdit()
    qlinePropValue_2 = QtGui.QLineEdit()

    mapper.addMapping(qlinePropValue_0, 0)
    mapper.addMapping(qlinePropValue_1, 1)

    ### ERROR HAPPENS IF LINE BELOW IS INCLUDED ###
    ### NO ERROR IF LINE BELOW IS COMMENTED OUT
    mapper.addMapping(qlinePropValue_2, 2)

    mapper.toFirst()

    view = QtGui.QTableView()
    view.setModel(model)

    vbox.addWidget(qlinePropValue_0)
    vbox.addWidget(qlinePropValue_1)
    vbox.addWidget(qlinePropValue_2)

    mybutton = QtGui.QPushButton()
    mybutton.setText("Press Me")
    mybutton.clicked.connect(lambda: mapValues(mapper))
    vbox.addWidget(mybutton)

    mw.setLayout(vbox)
    mw.show()

    sys.exit(app.exec_()) 
```

# android - Jquery mobile选择菜单选项设置动态生成但未设置选定选项

> ID：13416627
> 
> 赞同：1
> 
> 时间：2012-11-16T12:31:02.567
> 
> 标签：android, html, cordova, jquery-mobile, cross-platform

在这里，我定义了应用程序的代码和屏幕截图。图 1（我的应用程序）- 这是我的应用程序的输出。我想在选择菜单中显示选定的选项。

图片 2（我的应用程序）-当我单击任何一个选择选项菜单时，它就像这样。但我想将位置设置为选中状态。

图 3（需要这个）-我需要我的应用程序的这种类型的输出。

当我使用本地 Web 服务时，我得到了与 image-3 相同的输出。但是当我在线或从网站使用 Web 服务时，我得到与 image-1 和 image-2 相同的输出。

![在此处输入图像描述](../Images/7db127b3e0c752b69e4f970a680f3d35.png)

![在此处输入图像描述](../Images/2edd323c493df412c3374dccb083efb5.png)

![在此处输入图像描述](../Images/548d3ab5c287249cacc59441baa04102.png)

```
<body>
<div id="menu">
<h3>Menu</h3>
    <ul>
        <li class="active"><a href="home.html?l=0=c=0=d=0=t=1=dc=1" class="contentLink" target="_self">Home </a></li>
        <li class="none"><a href="myreservations.html" target="_self" class="contentLink">My Reservations</a></li>
        <li class="none"><a href="#" target="_self" class="contentLink">Credit Points</a></li>
        <li class="none"><a href="myprofile.html" target="_self" class="contentLink">My Account</a></li>
        <li class="none"><a href="aboutus.html" target="_self" class="contentLink">About Us</a></li>
        <li class="none"><a href="contactus.html" target="_self" class="contentLink">Contact Us</a></li>
        <li class="none"><a href="#" class="contentLink" id="Logoutbutton" name="Logoutbutton">Logout</a></li>
    </ul>
</div>

<div data-role="page" id="home" class="pages" data-theme="c">
<div data-role="header">
    <a href="#"class="showMenu" id="showMenu"></a>
    <a id="selectcity" style="line-height:18px;"><select name="selectcity_menu" id="selectcity_menu" data-native-menu="true" data-theme="c" >
        </select></a>            
    <a id="directlogin">LogIn</a>
        <h1></h1>
    </div><!-- /header -->

    <div data-role="footer">        
    <div data-role="navbar">
        <ul>
            <li><a href="home.html?l=0=c=0=d=0=t=1=dc=1" id="Restaurant" target="_self">Restaurant</a></li>
            <li><a href="home.html?l=0=c=0=d=0=t=2=dc=1" id="Lounge" target="_self">Lounge</a></li>
            <li><a href="home.html?l=0=c=0=d=0=t=3=dc=1" id="Banquet" target="_self">Banquet</a></li>
            <li><a href="home.html?l=0=c=0=d=0=t=4=dc=1" id="Event" target="_self">Event</a></li>           
        </ul>
    </div><!-- /navbar -->
    </div><!-- /footer -->

    <div data-role="content" align="center">
        <!--<input type="text" id="userstatus" name="userstatus"/>-->       

        <div class="ui-grid-a">
            <div class="ui-block-a">
                <div id="notation" style="width:100%;line-height:15px;padding:0px;">    
                <!--<label for="select-choice-0" class="select" ><h2> Locations </h2></label>-->
                <select name="note_utilisateur1" id="note_utilisateur1" data-native-menu="true" data-theme="c">
                </select>

                </div>
            </div>
            <div class="ui-block-b">
                <div id="notation" style="width:100%;line-height:15px;padding:0px;">    
                <!--<label for="select-choice-0" class="select"><h2> Cuisine </h2></label>-->
                <select name="note_utilisateur2" id="note_utilisateur2" data-native-menu="true" data-theme="c">
                </select>                   
                </div>            
            </div>                
        </div>

        <div class="ui-grid-a">
            <div class="ui-block-a">
                <div id="notation" style="width:100%;line-height:15px;padding:0px;">    
            <!--<label for="select-choice-0" class="select"><h2> Discount </h2></label>-->
                <select name="note_utilisateur3" id="note_utilisateur3" data-native-menu="true" data-theme="c">
                </select>                   
                </div>
            </div>
            <div class="ui-block-b">
                <a data-role="button" style="width:94%;line-height:15px;padding:0px;" id="clearall">Clear All</a>
            </div>                
        </div>        

        <hr />

        <br />

        <div id="restaurantlist">
        </div>       
    </div>
</div>
</body> 
```

从 Web 服务动态生成的所有下拉菜单选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:13:56.147

这行得通吗？

*   [http://jsfiddle.net/kGanA/](http://jsfiddle.net/kGanA/)

以下是 jQM 文档：

*   [http://jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html)

JS

```
// dummy options
var optionList = '<option value="1">Location 1</option><option value="2">Location 2</option><option value="3">Location 3</option>';

var myselect = $('#note_utilisateur3');

myselect.html(optionList); // adding the dummy options
myselect[0].selectedIndex = 2; // selecting the 2nd index ( remeber they start at zero )
myselect.selectmenu('refresh', true); // http://jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html 
```

使用您的问题中的 html

# java - 小程序有时会自动关闭

> ID：13416635
> 
> 赞同：4
> 
> 时间：2012-11-16T12:31:24.870
> 
> 标签：java, nullpointerexception, java-7

我的 java 应用程序发生了非常奇怪的事情。总之，问题在于它有时会在工作 30-60 秒后自行关闭。

具体情况如下：

*   应用程序实际上是在小程序设置中启动的，小程序加载主应用程序 jar，将其保存到磁盘，然后通过反射启动实际程序。小程序 jar 已签名，应用程序 jar 未签名，因此我不得不覆盖安全管理器。代码如下：

    ```
    System.setSecurityManager(new SecurityManager() {
       @Override public void checkPermission(Permission p) {}
    });
    URLClassLoader loader = new URLClassLoader(new URL[] {mainJarFile.toURI().toURL()}, this.getClass().getClassLoader());
    Class<?> app = Class.forName("launch.App", true, loader);
    Method start = app.getDeclaredMethod("start", URL.class, URL.class);
    start.invoke(app.newInstance(), codeBase, documentBase); 
    ```

*   只有当小程序通过`Citrix`连接到终端服务器运行时才会发生崩溃。

*   事实上，崩溃并不是崩溃。在日志文件中，我看到关闭挂钩在正常关闭期间已按应有的方式启动和完成。
*   如果小程序在 java 控制台可见且`trace`选项打开的情况下运行，我会在关机前看到以下消息：

    ```
    security: JSS is not configured
    network: Connecting https://javadl-esd-secure.oracle.com/update/baseline.version with proxy=HTTP @ FWR200/192.168.0.246:8080 
    ```

*   启动关闭挂钩后，应用程序似乎仍在运行，并且我在日志中看到如下异常：

    ```
    2012.11.13 16:20:07.171 | def.pR.run:1639 | class java.lang.NullPointerException : null
        sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
        java.security.AccessController.doPrivileged(Native Method)
        sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
        sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)        
        ... // so on, the exception seems to happen in completely regular app code 
    ```

*   最后，直到那些 Citrix 服务器开始使用`Java 7`（特别是 java 7 update 9）而不是`Java 6`. 降级java似乎不是一种选择。

我完全迷失在这里。有人至少能给我一些关于解决这个问题的建议吗？可能是什么原因？有没有办法解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:50:41.250

首先，我希望您在运行下载的应用程序之前正确验证它（通过 SSL 下载它或使用数字签名验证它，在这种情况下您最好对 jar 进行签名）。

到问题。这很可能是因为您在 applet JVM 中运行。applet jvm 的生命周期由浏览器决定。所以，如果你仍然想使用一个小程序作为启动器，那么在你的小程序子类的`Applet.destroy()`,`Applet.stop()`方法中插入一些调试输出，看看这是否与关闭有关。

另一种解决方案可能是使用 Java Webstart 启动它。这确实是从 Web 启动 Java 应用程序的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:41:19.630

覆盖安全管理器：这是否意味着您实际上**回避了整个 Java 小程序安全概念**？发布一个禁用安全管理器的小程序，然后加载另一个应用程序对我来说听起来是一个**非常糟糕的主意**，特别是如果您没有像 Java 小程序那样多的安全检查。如果有人设法抓住了这个小程序，他们可能会使用它从他们自己的网站加载漏洞利用代码，你的证书可能会被吊销。

围绕 Java 7u7 修复了一个主要的安全问题：

*   [http://www.kb.cert.org/vuls/id/636312](http://www.kb.cert.org/vuls/id/636312)

但它在 7u7 中还没有完全修复：

*   [http://seclists.org/fulldisclosure/2012/Sep/170](http://seclists.org/fulldisclosure/2012/Sep/170)

事实上，还有一个尚未修复：

*   [http://seclists.org/fulldisclosure/2012/Oct/155](http://seclists.org/fulldisclosure/2012/Oct/155)

也许其中一项更改会影响您的安全管理器侧步？

# mongodb - mongodb 索引的使用取决于符号

> ID：13416642
> 
> 赞同：0
> 
> 时间：2012-11-16T12:31:59.460
> 
> 标签：mongodb, indexing

说我`_id`在集合 A 上有化合物：

```
{
    _id:{
       orgUnit:Int64
       ...
    }
} 
```

查询此类表明使用了索引：

```
db.A.find({_id:{orgUnit:1039}}).explain() 
```

...

```
 "indexBounds" : {
            "start" : {
                    "_id" : {
                            "orgUnit" : 1039
                    }
            },
            "end" : {
                    "_id" : {
                            "orgUnit" : 1039
                    }
            } 
```

但是当我将查询更改为“点表示法”时，显示查询变得很简单。

```
db.A.find({"_id.orgUnit":1039}).explain()
...
"indexBounds" : {

}, 
```

点符号有什么问题？主要的：如何利用索引让我找到`"_id.orgUnit"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:40:33.033

这两个查询意味着两个不同的东西。

第一个是这样的：“找到我的文档，其`_id`恰好是一个对象`{orgUnit: 1039}`”。第二个就像：“给我找一个属性等于 1039`_id`的对象的文档”。`orgUnit`

所以第二个查询比较弱，并且也会匹配文档，`{_id: {foo: "bar", orgUnit: 1039}}`而第一个查询不会。Mongo 不能使用 index on`_id`来执行第二个查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:42:55.713

您需要创建一个单独的索引，`'_id.orgUnit'`以便使用点表示法有效地查询该字段。

```
db.A.ensureIndex({'_id.orgUnit': 1}) 
```

# android - AsyncTask 通知父 Activity 完成的最佳方式是什么？

> ID：13416644
> 
> 赞同：6
> 
> 时间：2012-11-16T12:32:00.080
> 
> 标签：android, android-asynctask, android-activity

```
public class ListingFoundBeaconService 
                    extends AsyncTask<String, String, String> {

    public ListingFoundBeaconService(Context contextGiven, 
                                     JSONObject jsonParams) {
        this.contextGiven = contextGiven;
        this.jsonParams = jsonParams;
    }

    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(contextGiven);
        pDialog.setMessage("Loading list of active Beacons..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
        Log.d("onPreExecute","onPreExecute worked" );
    }

    protected String doInBackground(String... args) {}

    protected void onPostExecute(String file_url) {   
        // Two activities will need this thread so I have 
        // kept this as a separate class. Here I want to send a
        // boolean value to the parent activity to show that 
        // the task has completed or not.
    } 
```

我可以在`onPostExecute()`函数中触发通知或完成事件侦听器，以便通知启动此类（`ListingFoundBeaconService`）的父类吗？这样做的标准方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T12:38:19.400

最好的方法是调用委托。在你的`AsyncTask`类中创建一个构造函数并有一个委托

代表界面：

```
public interface TaskDelegate {
    public void taskCompletionResult(String result);
} 
```

现在在`AsyncTask`：

```
private TaskDelegate delegate;

public ListingFoundBeaconService(Context contextGiven, 
                                 JSONObject jsonParams,
                                 TaskDelegate delegate) {
    this.contextGiven = contextGiven;
    this.jsonParams = jsonParams;
    this.delegate = delegate;
} 
```

上`postExecute`：

```
delegate.taskCompletionResult(result/msg/json); 
```

在您的主类中实现`TaskDelegate`并实现一个在任务完成时调用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T23:00:21.107

将 ListingFoundBeaconService 类抽象化，然后在调用类中重写 onPostExecute。

# php - 正则表达式捕获查询字符串中的变量

> ID：13416647
> 
> 赞同：2
> 
> 时间：2012-11-16T12:32:21.223
> 
> 标签：php, regex

我想获取位于两个字符之间的 url 的特定部分，例如在下面的链接中，我想获取 and 之间的`v=`部分`&`。

```
http://www.youtube.com/watch?v=mof-Dq3hvWs&feature=youtu.be 
```

我用下面的正则表达式做到这一点`(?<=v=)(.*?)(?=&)`

我的问题是链接不以`&`. 例如：

```
http://www.youtube.com/watch?v=5FlQSQuv_mg 
```

如何在这两种情况下匹配字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T12:33:45.307

不要使用正则表达式。使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)和[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)。

```
$url = 'http://www.youtube.com/watch?v=mof-Dq3hvWs&feature=youtu.be';
$parts = parse_url($url);
parse_str($parts['query'], $arr);
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:35:02.497

那这个呢？

```
(?<=v=)([^&]+) 
```

# arrays - 在 PowerShell 中通过引用传递/更新哈希表和数组

> ID：13416651
> 
> 赞同：4
> 
> 时间：2012-11-16T12:32:37.603
> 
> 标签：arrays, powershell, hashtable, pass-by-reference

当我了解 Perl 和 PowerShell 的不同之处时，我试图确定通过引用传递和更新列表之间的差异。我*想*我现在明白了，PowerShell 明智的。

**通过引用传递哈希表：**

调用函数时：不必在表名前加上`[ref]`. 在函数内：列表中的表名`param`可以简单地以 开头`[hashtable]`，而不是`[ref]`— （因为“收到”它已经是一个引用；所以向我解释了）。如果要在函数内更新哈希表，`.Value`则在未使用时`[ref]`不需要。IOW：以这种方式调用函数：`MyFunction $MyHashTable`. 该函数包含：

```
param([hashtable]$HashNameWithinFunction)

$HashNameWithinFunction.Add('x', 'y') 
```

**通过引用传递数组：**

无论是在调用函数时还是在函数`param()`列表中：数组的名称必须以`[ref]`. 当数组要通过引用更新时，`.Value`必须使用。该函数是这样调用的：`MyFunction ([ref]$MyArray)`. 该函数包含：

```
param([ref]$ArrayNameWithinFunction)

$ArrayNameWithinFunction.Value += 'something new' 
```

我的理解正确吗？我已经测试了上述内容，并且我知道两者都有效。但是，以这些方式进行操作是否有可能出现一些细微的错误？

添加以下来自 Chrstian 的回复：

```
function UpdateArray {
    param([ref]$ArrayNameWithinFunction)
    $ArrayNameWithinFunction.Value += 'xyzzy'
}
$MyArray = @('a', 'b', 'c')
UpdateArray ([ref]$MyArray) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T19:21:06.607

你的理解是正确的。一点补充：您通过值传递哈希表，因为您将添加到它，并且哈希表支持本地添加。数组的大小是不可变的（`+=`实际上是在幕后重新创建数组），因此如果您打算添加，则需要重新创建它，因此需要`ref`.

但请记住，最好避免通过引用传递参数。在某些时候，您可能会忘记它是这样做的，并花更多时间调试您的代码。如果您需要更改数组，最好在管道上返回新数组。

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 lwjgl

> ID：13416652
> 
> 赞同：6
> 
> 时间：2012-11-16T12:32:39.020
> 
> 标签：java, linux, javac, slick2d

我正在构建这里解释的基本 Slick 游戏示例：[http](http://slick.cokeandcode.com/wiki/doku.php?id=01_-_a_basic_slick_game) ://slick.cokeandcode.com/wiki/doku.php?id=01_-_a_basic_slick_game ，我遇到了一些问题。具体来说，游戏编译得很好，但是当我尝试运行它时，Java 抱怨：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at org.lwjgl.Sys$1.run(Sys.java:75)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:68)
    at org.lwjgl.Sys.loadLibrary(Sys.java:84)
    at org.lwjgl.Sys.<clinit>(Sys.java:101)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:128)
    at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:39)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:36)
    at SlickBasicGame.main(SlickBasicGame.java:79) 
```

这是我的源代码：

```
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;

public class SlickBasicGame extends BasicGame{

    Image plane = null;
    Image land = null;
    float x = 400;
    float y = 300;
    float scale = 1;

    public SlickBasicGame()
    {
        super("Slick2D Path2Glory - SlickBasicGame");
    }

    @Override
    public void init(GameContainer gc)
            throws SlickException {
        plane = new Image("data/plane.png");
        land = new Image("data/land.jpg");
    }

    @Override
    public void update(GameContainer gc, int delta)
            throws SlickException
    {
        Input input = gc.getInput();

        if(input.isKeyDown(Input.KEY_A))
        {
            plane.rotate(-0.2f * delta);
        }

        if(input.isKeyDown(Input.KEY_D))
        {
            plane.rotate(0.2f * delta);
        }

        if(input.isKeyDown(Input.KEY_W))
        {
            float hip = 0.4f * delta;

            float rotation = plane.getRotation();

            x+= hip * Math.sin(Math.toRadians(rotation));
            y-= hip * Math.cos(Math.toRadians(rotation));
        }

        if(input.isKeyDown(Input.KEY_2))
        {
            scale += (scale >= 5.0f) ? 0 : 0.1f;
            plane.setCenterOfRotation(plane.getWidth()/2.0f*scale, plane.getHeight()/2.0f*scale);
        }
        if(input.isKeyDown(Input.KEY_1))
        {
            scale -= (scale <= 1.0f) ? 0 : 0.1f;
            plane.setCenterOfRotation(plane.getWidth()/2.0f*scale, plane.getHeight()/2.0f*scale);
        }
    }

    public void render(GameContainer gc, Graphics g)
            throws SlickException
    {
        land.draw(0, 0);

        plane.draw(x, y, scale);

    }

    public static void main(String[] args)
            throws SlickException
    {
         AppGameContainer app =
            new AppGameContainer( new SlickBasicGame() );

         app.setDisplayMode(800, 600, false);
         app.start();
    }
} 
```

我对原始版本所做的唯一更改（报告相同的错误）是我删除了包声明。

我从这里下载了 Slick：[http://slick.cokeandcode.com/](http://slick.cokeandcode.com/)，点击“下载完整发行版”链接，我的 Slick 文件夹如下所示： ![在此处输入图像描述](../Images/1adcfac1a7818e24b10aa85aea666d8d.png)

我正在使用以下命令编译游戏：

`javac -cp lib/*:. SlickBasicGame.java`

并尝试用这个运行它：

`java -cp lib/*:. SlickBasicGame`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T12:37:48.230

将 a 添加`-Djava.library.path=path/to/dir`到命令行或作为 IDE 中的 VM 选项，以便 lwjgl 能够找到包含本机文件的文件夹。

# android - 我无法从广播接收器开始活动

> ID：13416656
> 
> 赞同：0
> 
> 时间：2012-11-16T12:32:55.960
> 
> 标签：android, broadcastreceiver, start-activity

我有一个广播接收器，当它收到一个意图时，我想开始/恢复一个活动。直到开始活动一切正常，我明白了意图等。

但我无法开始我的活动。

这是我的安卓清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.imgzine.testing"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".WebViewActivity"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name="com.imgzine.testing.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是我要开始的活动：

```
package com.imgzine.testing;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;

public class WebViewActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    Log.w("DEBUG", "Hello, I'm a webview");

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.google.com");

}

} 
```

这是我尝试开始活动的广播接收器的一部分：

```
 Log.w("DEBUG", "Hello, I receive.");
        Intent webviewintent = new Intent(webviewcontext,
        WebViewActivity.class);
        webviewintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        webviewintent.setAction(Intent.ACTION_MAIN);
        webviewintent.addCategory(Intent.CATEGORY_LAUNCHER);
        webviewcontext.startActivity(webviewintent); 
```

我必须在这里澄清 webviewcontext 是我的主要活动的上下文，我通过广播接收器的构造函数将它传递到这里。我在主要活动中创建了广播接收器：

```
 BroadcastReceiver mReceiver = new MyPhoneReceiver(context);
 registerReceiver(mReceiver, filter); 
```

但是活动没有开始。这是我得到的日志：

```
11-16 12:47:36.144: W/DEBUG(818): Hello, I receive.
11-16 12:47:36.144: I/ActivityManager(58): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.imgzine.testing/.WebViewActivity } 
```

任何想法都更受欢迎。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:07:32.947

事实证明，问题在于上下文。

以下作品：

```
webviewcontext = context.getApplicationContext(); 
```

（上下文是我从 onReceive 得到的上下文）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:38:11.847

```
Intent intent = new Intent(webviewcontext,WebViewActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
webviewcontext.startActivity(intent); 
```

# html - img 表现得像背景 img？

> ID：13416668
> 
> 赞同：9
> 
> 时间：2012-11-16T12:33:36.613
> 
> 标签：html, css

我在页面上有一个物理图像..

```
<img src="image.png" alt="image-name" /> 
```

我希望它表现得好像它是身体背景图像一样..

```
body{
background: url(image.png) no-repeat center top;
} 
```

即在没有浏览器看到的情况下居中，所以如果浏览器更宽则没有滚动条等？

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:39:54.033

是的，有可能，你可能不得不做这样的事情：

CSS

```
#your-image {
    position: absolute;
    z-index:1;
}
#container {
    position: relative;
    z-index: 2;
} 
```

HTML

```
<body>
    <img id="your-image src="" alt="">
    <div id="container">
        <!-- All your content goes there -->
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:36:43.170

是`position: fixed; z-index: -5000`你想要的吗？

`position: fixed`无论内容如何，​​使图像始终固定在浏览器上的某个位置。

`z-index: -5000`只是把图像放在一切后面

为了使其居中，我认为您需要事先知道图像的大小。如果你这样做，添加

```
top: 50%; 
left: 50%;
margin-top: -100px;
margin-left: -250px; 
```

其中 100 是图像高度的一半，而 250 是图像宽度的一半。取自 [中心位置：固定元素](https://stackoverflow.com/questions/2005954/margin-to-center-with-position-fixed)

演示：http: [//jsfiddle.net/SPsRd/1/](http://jsfiddle.net/SPsRd/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T12:41:07.583

正确的使用方法是：

```
 body { background-image:url(image.png) no-repeat center top;} 
```

# ruby-on-rails - 使用Rails和Rspec，如何测试数据库没有被方法触及

> ID：13416671
> 
> 赞同：4
> 
> 时间：2012-11-16T12:33:45.643
> 
> 标签：ruby-on-rails, database, testing, rspec

因此，我正在为一种方法编写测试，该方法出于性能原因应该在不使用 SQL 查询的情况下实现它需要实现的目标。我在想我需要知道的就是存根：

```
describe SomeModel do
  describe 'a_getter_method' do
    it 'should not touch the database' do
      thing = SomeModel.create

      something_inside_rails.should_not_receive(:a_method_querying_the_database)

      thing.a_getter_method
    end
  end
end 
```

**编辑**：提供一个更具体的例子：

```
class Publication << ActiveRecord::Base
end
class Book << Publication
end
class Magazine << Publication
end

class Student << ActiveRecord::Base
  has_many :publications

  def publications_of_type(type)
    #this is the method I am trying to test.  
    #The test should show that when I do the following, the database is queried.

    self.publications.find_all_by_type(type)
  end
end

describe Student do
  describe "publications_of_type" do
    it 'should not touch the database' do
       Student.create()
       student = Student.first(:include => :publications)
       #the publications relationship is already loaded, so no need to touch the DB

       lambda {
         student.publications_of_type(:magazine)
       }.should_not touch_the_database
    end
  end
end 
```

所以在这个例子中测试应该失败，因为 rails 'find_all_by' 方法依赖于 SQL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T14:24:30.147

`SomeModel.should_not_receive(:connection)`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-12T21:29:35.967

我知道这个问题现在已经很老了，但我偶然发现它试图做同样的事情。在环顾四周后，我发现有一个伟大而简单的宝石。

[https://github.com/brigade/db-query-matchers](https://github.com/brigade/db-query-matchers)

它添加了一个带块的 rspec 匹配器，因此您可以使用：

```
expect { subject.make_no_queries }.to_not make_database_queries 
```

配置也非常简单，这意味着您可以将一些确实进行查询的调用与连接到数据库的调用子集混合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:15:15.890

`SomeModel.create`创建一个实例`SomeModel`并将其保存到数据库中，并返回创建的对象。

**您想确保*任何*getter 方法都不会访问数据库吗？在 Rails 中，只有检索关联才会访问数据库，并且仅在第一次调用它们时。**

如果您有一个 getter 方法的特定实现，您“怀疑”它会访问数据库，我会假设它很容易测试，或者您是否正在防止未来的实现？

也许最简单的方法是做`SomeModel.build`，然后执行你的测试。创建一个实例，而不将其`build`保存到数据库中。如果 getter 工作，它肯定没有命中数据库（因为什么都不应该存在——取决于你的代码——如果不知道你实际测试的是什么 getter，很难说）。

如果您正在测试特定的 getter 方法，并且想要更相关的答案，请提供一些代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-31T16:05:15.103

我还没有足够的积分来发表评论，但要跟进@histocrat 留下的答案，以及@will-tomlins 留下的评论。如果你用存根`ActiveRecord::Base.connection`代替`SomeModel.connection`你将避免得到“堆栈级别太深”的消息，而是从匹配器本身得到一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T08:42:17.400

称呼

```
ActiveRecord::Base.connection.disconnect! 
```

在调用该方法之前，检查是否没有引发错误。

# javascript - Javascript将宽度和高度转换为字体大小

> ID：13416673
> 
> 赞同：1
> 
> 时间：2012-11-16T12:33:51.157
> 
> 标签：javascript, font-size

我不确定是否已经提出并回答了这个问题，但我还没有找到任何相关的结果。

我想知道是否可以计算特定尺寸（宽度/高度）并将其转换为字体大小？

例如，我有：

```
var textWidth = 150;
var textHeight = 30; 
```

我想从这些尺寸（像素）中获得字体大小？

编辑：感谢dystroy，我终于在您的帮助下解决了这个问题。我使用了[此处](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container)发布的功能，之后，它并不是很复杂：

```
$(function(){

            $( "#height, #width" ).keyup(function(){

                var varHeight = $( "#height" ).val();
                var varWidth = $( "#width" ).val();

                if(  varHeight != "" && varWidth != "" ){

                    $( "#text_container" ).css( "width", varWidth );    
                    $( "#text_container" ).css( "height", varHeight );

                    $( "#text_container" ).textfill({ maxFontPixels: 500 });

                    var getFontsize = $( "#text_container > span" ).css( "font-size" );
                    var fontSize = parseInt( getFontsize.slice(0, -2) );

                    $( "#fontsize" ).val( fontSize );

                }

            });

        }); 
```

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:51:12.953

我为您的问题做了一个小界面：您输入某些文本的最大宽度和最大高度，它会自动计算字体的大小以适应文本：http: [//jsfiddle.net/kPZ3E/](http://jsfiddle.net/kPZ3E/)

**HTML：**

```
Max width : <input id=width value=200> px
<br>Max height : <input id=height value=20> px
<br><br>
<table border=1><tr><td id=txtcell nowrap><span id=txt style=>Some sample text.</span></td></tr></table>
<br>Font Size : <span id=mes></span>​ 
```

**JS：**

```
var fontSize = 100;
var reduce = function() {
    $('#txt').css('font-size', fontSize);
    $('#mes').html(fontSize);
    if ($('#txt').width()>$('#width').val() || $('#txt').height()>$('#height').val()) {
       fontSize -= 1;
       reduce();
    }
};
reduce();
$('#width, #height').change(function(){fontSize = 100;reduce()}); 
```

*注意：小提琴中的超时只是在这里用动画显示还原过程。*

# c# - 如何更新网格视图？

> ID：13416676
> 
> 赞同：0
> 
> 时间：2012-11-16T12:34:02.763
> 
> 标签：c#, windows-8, windows-runtime

我正在编写一个 Windows 应用商店应用程序。
我有一个带有 GridView 的 View(FavoritenGrid)。此视图与 DataContext(FavoritenViewModel) 一起使用。并且 DataContext 有一个 List(FavList)。

现在我想在加载视图时获取最新的 FavList。

代码片段：

```
public FavoritenGrid()
{
    this.InitializeComponent();
    _vm = ((FavoritenViewModel)this.DataContext);
     ((DataViewModel)this.DataContext).LoadDataCommand.Execute(null);
    groupedItemsViewSource.Source =  _vm.FavList;
    (semanticZoom.ZoomedOutView as ListViewBase).ItemsSource = groupedItemsViewSource.View.CollectionGroups;
} 
```

收藏夹视图模型列表

```
 private ObservableCollection<FavoritenGroup<Draggable>> _favList;

public ObservableCollection<FavoritenGroup<Draggable>> FavList
{
    get { return _favList; }
    set
    {
        _favList = value;
        RaisePropertyChanged("FavList");
    }
} 
```

FavoritenViewModel 加载方法

```
 private async Task loadData()
 {
    IsLoading = true;

    FavList =  new ObservableCollection<FavoritenGroup<Draggable>>();
    FavList = await getFavoriten();

    IsLoading = false;
 } 
```

如果我不使用空列表初始化列表，我会得到 NullPointerException。

```
FavList =  new ObservableCollection<FavoritenGroup<Draggable>>(); 
```

此方法加载最新的 FavList。但它没有显示在视图中，我必须离开视图并再次加载以查看更改。

```
FavList = await getFavoriten(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:20:57.080

在这种情况下，您的视图不会更新，因为 ObservableCollection 没有被更新，它正在被替换。

如果我是你，我会做以下事情。

收藏夹视图模型

```
private ObservableCollection<FavoritenGroup<Draggable>> _favList = new ObservableCollection<FavoritenGroup<Draggable>>();
public ObservableCollection<FavoritenGroup<Draggable>> FavList
{
    get { return _favList; }
    set
    {
        _favList = value;
        RaisePropertyChanged("FavList");
    }
} 
```

然后删除`FavList = new ObservableCollection<FavoritenGroup<Draggable>>();`loadData() 方法中的。

接下来，当您更新列表时，我不会创建新集合（从而替换您的 ObservableCollection），而是尝试删除不再存在的项目，如果它们不在列表中，则添加新的项目。（您可以 Clear() 项目，然后添加所有新项目。这将更新现有集合并*应该*触发事件以更新 UI。

# java - 如何将命名空间感知设置为 false？

> ID：13416681
> 
> 赞同：6
> 
> 时间：2012-11-16T12:34:28.293
> 
> 标签：java, xml, jaxb, eclipselink, moxy

我正在尝试使用 EclipseLink MOXy 解析一些 XML，但它在`xsi`属性上失败了。如果我删除它，它解析得很好。但是，我有 100GiB 的 XML 需要处理，并且更改源文件不是一种选择。

有人建议，如果我可以设置，`XmlParser.setNamespaceAware(false)`那么它应该可以工作 - 但我不知道如何配置它，而不会直接进入 MOXy 的内部。

```
<record>
<header>
    <!-- citation-id: 14404534; type: journal_article; -->
    <identifier>info:doi/10.1007/s10973-004-0435-2</identifier>
    <datestamp>2009-04-28</datestamp>
    <setSpec>J</setSpec>
    <setSpec>J:1007</setSpec>
    <setSpec>J:1007:2777</setSpec>
</header>
<metadata>
    <crossref xmlns="http://www.crossref.org/xschema/1.0"
        xsi:schemaLocation="http://www.crossref.org/xschema/1.0 http://www.crossref.org/schema/unixref1.0.xsd">
        <journal>
            <journal_metadata language="en">
[...] 
```

`xsi:`当前缀存在时我得到的例外是：

```
org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[Exception [EclipseLink-25004] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred unmarshalling the document
Internal Exception: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[13,107]
Message: http://www.w3.org/TR/1999/REC-xml-names-19990114#AttributePrefixUnbound?crossref&xsi:schemaLocation&xsi] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:39:38.063

目前[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)中没有选项可以告诉它忽略名称空间。但是有一种方法可以通过利用 StAX 解析器来使用。

**演示**

您可以在不支持命名空间的 XML 输入上创建一个 StAX `XMLStreamReader`，然后让 MOXy 从中解组。

```
package forum13416681;

import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        xif.setProperty(XMLInputFactory.IS_NAMESPACE_AWARE, false);
        StreamSource source = new StreamSource("src/forum13416681/input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(source);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Foo root = (Foo) unmarshaller.unmarshal(xsr);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**Java 模型 (Foo)**

```
package forum13416681;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**输入 (input.xml)**

以下是您问题中 XML 的简化版本。请注意，此 XML 没有正确命名空间限定，因为它缺少 xsi 前缀的命名空间声明。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo xsi:schemaLocation="http://www.crossref.org/xschema/1.0 http://www.crossref.org/schema/unixref1.0.xsd">
    <bar>Hello World</bar>
</foo> 
```

**输出**

下面是运行演示代码的输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
   <bar>Hello World</bar>
</foo> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:12:02.457

与其完全禁用命名空间感知，不如使用特定于 StAX 实现的机制`xsi`提前声明前缀，然后在启用命名空间的情况下进行解析。例如，对于[Woodstox](http://woodstox.codehaus.org) ，您可以说：

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;
import com.ctc.wstx.sr.BasicStreamReader;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("com.example");

        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource source = new StreamSource("input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(source);
        ((BasicStreamReader)xsr).getInputElementStack().addNsBinding(
               "xsi", "http://www.w3.org/2001/XMLSchema-instance"); 
```

然后创建解组器并解`xsr`组[Blaise 的答案](https://stackoverflow.com/a/13418763/592139)。虽然这显然将您与一个特定的 StAX 实现联系在一起，但这意味着您不必修改现有的 JAXB 模型类，如果它们希望`<crossref>`元素及其子元素位于`http://www.crossref.org/xschema/1.0`名称空间中。

# c# - ListView 滚动行为

> ID：13416684
> 
> 赞同：0
> 
> 时间：2012-11-16T12:34:46.973
> 
> 标签：c#, wpf, wpf-controls

`Listview`到达列表末尾时，我正在加载新数据。仅使用鼠标滚轮时似乎还可以，但是使用滚动条时一切都出错了。主要思想是提供连续性列表的效果。为此，我使用`ScrollInToView`鼠标滚轮工作正常的情况。但万一滚动条不起作用。有谁知道如何修理它？

`Xaml`部分：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Name="SomeContol" >
<Window.Resources>
    <DataTemplate x:Key="Item">
        <Grid Grid.Column="1" Height="65" HorizontalAlignment="Left" Name="grid1" VerticalAlignment="Top" Width="239">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="64*" />
                <ColumnDefinition Width="175*" />
            </Grid.ColumnDefinitions>
            <TextBlock Height="30" HorizontalAlignment="Center" Margin="6,17,0,18" Name="textBlock1" Text="{Binding Number}" VerticalAlignment="Center" Width="58" TextAlignment="Center" FontSize="20" FontFamily="Shruti" TextTrimming="WordEllipsis" TextWrapping="Wrap" />
            <Grid.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FF9D76FF" Offset="0.163" />
                    <GradientStop Color="#08389FFF" Offset="0.878" />
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="65*" />
        <RowDefinition Height="246*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="264*" />
        <ColumnDefinition Width="239*" />
    </Grid.ColumnDefinitions>
    <ListBox 
        SelectedItem="{Binding ElementName=SomeContol, Path=SelectedOne}" 
        ScrollViewer.ScrollChanged="listBox1_ScrollChanged"
        SelectionChanged="listBox1_SelectionChanged"
        ItemTemplate="{StaticResource Item}" 
        ScrollViewer.CanContentScroll="False" 
        ItemsSource="{Binding ElementName=SomeContol, Path=SomeColection}" 
        Height="246" 
        HorizontalAlignment="Left" 
        Name="listBox1" 
        VerticalAlignment="Top" 
        Width="247" 
        Grid.Row="1" />

</Grid> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using System.Windows.Controls.Primitives;

namespace WpfApplication1
{
/// <summary>
/// Логика взаимодействия для MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private DateTime DT = DateTime.Now;

    public ObservableCollection<Axle> SomeColection
{
get { return (ObservableCollection<Axle>)GetValue(SomeColectionProperty); }
set { SetValue(SomeColectionProperty, value); }
}

    public Axle SelectedOne
    {
        get { return (Axle)GetValue(SelectedOneProperty); }
        set { SetValue(SelectedOneProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedOne.  This enables        animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedOneProperty =
        DependencyProperty.Register("SelectedOne", typeof(Axle), typeof(MainWindow), new UIPropertyMetadata(null));

// Using a DependencyProperty as the backing store for SomeColection.  This enables      animation, styling, binding, etc...
public static readonly DependencyProperty SomeColectionProperty =
DependencyProperty.Register("SomeColection", typeof(ObservableCollection<Axle>), typeof(MainWindow), new UIPropertyMetadata(null));

    public int count = 0;

    public MainWindow()
    {
        SomeColection = new ObservableCollection<Axle>();

        for(int i = 0; i < 30 ; i++)
        {
            count++;
            SomeColection.Add(new Axle(count, count + i));

        }

        InitializeComponent();

    }

    private void listBox1_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        if (((e.ExtentHeight) == (e.VerticalOffset + e.ViewportHeight)))
        {
            //Go Down

            if (DT < DateTime.Now)
            {
                for (int i = 0; i < 20; i++)
                {
                    count++;
                    SomeColection.RemoveAt(0);
                    SomeColection.Add(new Axle(count, count + i));

                }
                SelectedOne = SomeColection[6];
                //SelectedOne = SomeColection[30 -     (int)System.Math.Round(e.ViewportHeight / 65)];
                DT = DateTime.Now.AddSeconds(1);
            }

        }
        if ((e.VerticalOffset == 0))
        {
            //Go Up
            if (count > 31)
            {

                if(DT<DateTime.Now)
                {
                    for (int i = 0; i < 20; i++)
                    {
                        count--;
                        SomeColection.RemoveAt(29);
                        SomeColection.Insert(0, new Axle(count - 29, i));       
                    }
                    SelectedOne = SomeColection[22];

                    DT = DateTime.Now.AddSeconds(1);
                }
            }
        }
    }

    private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Selector selector = sender as Selector;
        if (selector is ListBox)
        {
            (selector as ListBox).ScrollIntoView(selector.SelectedItem);
        }
    }
}
} 
```

# java - Java将文件写为纯“windows-1252”

> ID：13416691
> 
> 赞同：1
> 
> 时间：2012-11-16T12:35:04.703
> 
> 标签：java, encoding

我有以下十进制 ascii 值数组

```
int[] istr={146,192,128,224,185,152,240,192,6,26,66,72,186,184,88,128,182,40,104,96,36,236,152,128,212,200,64,64,101,252,174,0,96,192,112,24,173,228,200,0,192,128,96,192,144,116,201,48}; 
```

我想将这些值作为（ascii / windows-1252）字符写入文件。

```
HOW IT SHOULD LOOK LIKE:    ’À€à¹˜ðÀBHº¸X€¶(h`$ì˜€ÔÈ@@eü®
MY OUTPUT:                  ?À?à¹?ðÀBHº¸X?¶(h`$ì??ÔÈ@@eü® 
```

正如您可以轻松看到的那样，我的输出中有一些字符不会像我期望的那样出现在文件中。编写我的文件的代码：

```
OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(output),"windows-1252");
    try {
        for (int c : istr) {
            out.write(c);
        }
    } finally {
        out.close();
    } 
```

那么为什么某些特殊字符没有正确写入我的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:38:49.127

当您打电话时，[`Writer.write(int)`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html#write%28int%29)您应该提供一个 Unicode 值。

例如，看看你的第一个字符，你有 Unicode 146，也就是 U+0092。[查看 U+0080 到 U+00FF](http://www.unicode.org/charts/PDF/U0080.pdf)的Unicode 图表，这是“私人使用 2”字符。目前尚不清楚为什么您会期望它以撇号形式出现。

如果您有想要在文件中结束的确切字节，则根本不应该使用 a `Writer`- 您应该只使用`OutputStream`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-20T11:03:55.060

outputstream 是抽象类。那么 write 函数是如何使用的呢？我在将汉字写入 excel 文件时遇到了类似的问题。我以与提到的代码非常相似的方式构建了我的代码。而不是 OutputStreamWriter =new OutputStreamWriter(new FileOutputStream(output),"utf-8"); 我用 =new OutputStream(new FileOutputStream(output),"utf=8");

我能够通过此修改构建代码，但 excel 中的值仍然是乱码

# vector - svg：生成“大纲路径”

> ID：13416693
> 
> 赞同：17
> 
> 时间：2012-11-16T12:35:26.160
> 
> 标签：vector, svg, coordinates, shapes

我有一组坐标，我将其转换为 svg 路径（使用三次贝塞尔曲线使其平滑）。当我应用一定的笔画宽度时，我得到以下结果（蓝点是我的坐标）![具有笔划宽度的立方 svg 路径](../Images/f325184ddd6c906fbf3879795f7a77d2.png)

我感兴趣的是**获得一条围绕灰色形状的路径**（例如：选择灰色/白色边框上的任何点，然后围绕形状进行四舍五入，直到您回到起点）。

我将如何计算这样的路径？

作为参考，这是我的 svg 信息：

```
 <g>
  <title>number 3</title>
  <path d="m238,50c5.67569,-1.01351 11.8327,-3.8229 20.92029,-2.14724c8.68106,0.69732 14.21173,4.90255 18.07971,7.14724c6.23697,3.61945 13.47556,9.5931 15,18c1.07056,5.90372 1.17343,10.97649 -4,16c-6.76816,6.57204 -19.45392,9.57738 -25.69687,10.59046c-3.94836,0.64074 4.73492,3.29883 10.69687,5.40954c8.05417,2.85142 15,8 21,14c6,6 5.26578,10.94739 5.26578,17.03015c-2.4541,7.30975 -4.23343,11.08675 -11.26578,12.96985c-3.98279,1.0665 -11.92578,3.49756 -17,4c-8.95618,0.88684 -15.80411,2.97838 -26,0l-9.19197,-3.44464" id="svg_1" opacity="0.5" stroke-width="10" stroke-linejoin="round" stroke="#000000" fill="none"/>
 </g> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-02T18:13:19.977

我创建了[svgContour](https://github.com/fracalo/svg-contour)函数，该函数被认为适用于与此类似的场景，
生成的轮廓偏移与值无关`stroke-width`，必须设置为函数的参数。

目前它会一次找到一个偏移侧，但是每侧运行一次可以解决这个问题。

**TLDR**
实际上通过 svgContour 你可以找到任何 svg 形状的轮廓，目前它不支持填充模式，但下一个目标是实现它。它依赖 getPathData() 来获取任何 SVGGeometryElement 的 pathData，然后这个数据会经历三个阶段：

*   **redrawSteepCurve前提：****除非曲线足够平坦**（在这种情况下，视觉渲染会很好），否则
    仅偏移曲线的点/控制点不会获得与另一个平行的贝泽曲线；这个方法需要一个 SVGPathData，如果它发现一个陡峭的曲线，它会分裂它直到它足够平坦（返回一个视觉上等效的 SVGPathData）。

***   **contourPathData**
    在这个阶段，pathData 以点为单位解散，点以段连接，每个段偏移，然后为每个连续段找到一个交点（我们得到的是偏移点的列表）。

    *   **drawLine**
    此阶段将步骤 2 中的点放在来自步骤 1 的 pathData 中，最后绘制轮廓。** 

 **一个例子：

```
const path = document.querySelector('path')

svgContour(path, 5)
```

```
svg {
  width: 100vw;
  height: 100vh
}
```

```
<script src="https://cdn.rawgit.com/fracalo/svg-contour/master/dist/svg-contour.js"></script>

<svg viewBox='300 0 100 200'>
  <g>
    <title>number 3</title>
    <path d="m238,50c5.67569,-1.01351 11.8327,-3.8229 20.92029,-2.14724c8.68106,0.69732 14.21173,4.90255 18.07971,7.14724c6.23697,3.61945 13.47556,9.5931 15,18c1.07056,5.90372 1.17343,10.97649 -4,16c-6.76816,6.57204 -19.45392,9.57738 -25.69687,10.59046c-3.94836,0.64074 4.73492,3.29883 10.69687,5.40954c8.05417,2.85142 15,8 21,14c6,6 5.26578,10.94739 5.26578,17.03015c-2.4541,7.30975 -4.23343,11.08675 -11.26578,12.96985c-3.98279,1.0665 -11.92578,3.49756 -17,4c-8.95618,0.88684 -15.80411,2.97838 -26,0l-9.19197,-3.44464"
    id="svg_1" opacity="0.5" stroke-width="10" stroke-linejoin="round" stroke="#000000" fill="none" />
  </g>
</svg>
```

轮廓被追踪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:18:27.347

我不确定这是否能解决您的问题。这取决于您要对大纲路径执行的操作。

PostScript 具有计算描边路径轮廓的功能，当填充它时，将产生与描边原始路径相同的视觉输出。但是，生成的路径数据可能不如您预期的那么优雅。

下面的 PostScript 程序（我们称它为`path2outlines.ps`将 PostScript 路径转换为“可填充”的 SVG 路径：

```
%!
% First, we're converting to outlines.
strokepath

% This is just a string buffer
/S 99 string def

% This defines a procedure for printing coordinates to stdout
/printCoordinates {     % coord* number command
  print                 % coord* number
  array astore          % array
  {                     % coord
    ( )print            % coord
    //S cvs             % string
    print               % 
  }forall
  (\n)print
} bind def

% This iterates over the path segments and prints the SVG path data.
{2(M) printCoordinates}
{2(L) printCoordinates}
{6(C) printCoordinates}
{(Z\n)print}
pathforall

quit 
```

您必须像这样向它提供数据文件（`%`开始评论）。让我们称之为`data.ps`：

```
%!
% First, set up the graphics state parameters
% Equivalent to stroke-width="10"
10 setlinewidth 

% Equivalent to stroke-linejoin="round" (0 = miter, 1 = round, 2 = bevel)
1 setlinejoin

% Now, we're defining the path.
% Use postfix notation, i.e. first coordinates, then command.
% m/M = moveto
% l = rlineto
% L = lineto
% c = rcurveto
% C = curveto

238 50 moveto
5.67569 -1.01351 11.8327 -3.8229 20.92029 -2.14724 rcurveto
8.68106 0.69732 14.21173 4.90255 18.07971 7.14724 rcurveto
6.23697 3.61945 13.47556 9.5931 15 18 rcurveto
1.07056 5.90372 1.17343 10.97649 -4 16 rcurveto
-6.76816 6.57204 -19.45392 9.57738 -25.69687 10.59046 rcurveto
-3.94836 0.64074 4.73492 3.29883 10.69687 5.40954 rcurveto
8.05417 2.85142 15 8 21 14 rcurveto
6 6 5.26578 10.94739 5.26578 17.03015 rcurveto
-2.4541 7.30975 -4.23343 11.08675 -11.26578 12.96985 rcurveto
-3.98279 1.0665 -11.92578 3.49756 -17 4 rcurveto
-8.95618 0.88684 -15.80411 2.97838 -26 0 rcurveto
-9.19197 -3.44464 rlineto 
```

根据您使用的平台，您可以使用 Ghostscript 来调用它，类似于：

```
gs -q data.ps path2outlines.ps > outlinePath.txt 
```

试一试，但我不确定你是否会满意。输出的复杂性可能会暗示问题的实际复杂性。特别是自相交路径是一个问题。

编辑（谈到问题）：我相信一般来说，在数学上不可能创建与给定贝塞尔曲线完全“平行”的贝塞尔曲线。**

# android - 在 Android 4.2 中写入全局设置

> ID：13416695
> 
> 赞同：3
> 
> 时间：2012-11-16T12:35:28.040
> 
> 标签：android, settings, android-4.2-jelly-bean

Android 4.2 引入了一个新类[Settings.Global](http://developer.android.com/reference/android/provider/Settings.Global.html)，它现在包含一些以前在[Settings.Secure](http://developer.android.com/reference/android/provider/Settings.Secure.html)或[Settings.System](http://developer.android.com/reference/android/provider/Settings.System.html)中的设置。

[由于 WRITE_SETTINGS 和 WRITE_SECURE_SETTINGS 权限（参见Manifest.permissions](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_SECURE_SETTING) ） ，写入系统设置和安全设置是（并且现在）可能的。

问题是......有没有办法修改全局设置？例如，之前可以从应用程序切换飞行模式，而现在，由于它位于 Settings.Global 中，因此似乎不可能:(

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T12:42:25.330

AFAIK，您可以以与修改`Settings.Global`相同的方式进行修改`Settings.Secure`：通过创建一个由固件的签名密钥签名或安装在系统分区上的应用程序，这样它就可以保存`WRITE_SECURE_SETTINGS`. `Settings.Global`和之间的区别`Settings.Secure`，据我了解，后者现在是基于每个用户的，而全局的是设备范围的。

# ssas - 在给定时间段内还活着的人的立方体

> ID：13416696
> 
> 赞同：0
> 
> 时间：2012-11-16T12:35:31.363
> 
> 标签：ssas, ssas-2008

我需要根据范围分析数据。最好的例子是：给我在给定时期（时间维度）还活着的人数。

我知道如何处理“出生日期”。
我知道如何处理“死亡日期”。

我不知道如何处理“在特定时期内随时活着”。由于时间维度可以处理天、周、月、季度、年等。

满足给定时期的数据将是：

*   期间开始时未死亡的人
*   在那个时期的任何时候出生的人

其他示例包括：在一段时间内处于未发货状态的订单，在一段时间内打开（未关闭）的呼叫中心呼叫等。

管理人员将使用该分析来确定特定年份中需要更多（或更少）工作人员的时期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:27:48.407

您始终可以使用 MDX 范围表达式：[Member1]:[Member2]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:02:01.530

我没有找到使用 SSAS 实现我想要的方法的方法。相反，我使用该多维数据集所需的数据创建了一个表（或视图）：

这个人活着的每一天，我都有 1 行。

我使用相同的想法来处理类似的问题： - 呼叫中心：每天的呼叫：每天（在任何时间点）开放的呼叫。- 发货：每天在途：每天在仓库等待发货的订单。

# windows-installer - 如何在不删除 Compact Sql DB 的情况下升级安装文件

> ID：13416697
> 
> 赞同：0
> 
> 时间：2012-11-16T12:35:44.443
> 
> 标签：windows-installer, sql-server-ce

我已经部署了一个带有紧凑型 SQL 数据库（本地数据库）的 Windows 安装文件。现在我想升级安装文件而不删除现有的本地数据库。

谁能帮助我如何进行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:17:47.780

如果不知道您当前的安装程序是如何编写的，很难给您一个准确的答案，但基本上考虑以下几点：

1) 如果您正在进行重大升级，您的 RemoveExistingProducts 安排在哪里？请注意，您不会要求安装程序进行完全卸载/重新安装，因为您会重新安装数据库文件。

2) 查看 Component 元素的 NeverOverwrite 属性。

3) 如果您希望 SDF 保持卸载状态，则还要考虑 Component 元素的 Permenant 属性，以便后续重新安装将具有相同的数据。

# c - 为什么减法适用于第一个而不是第二个？

> ID：13416698
> 
> 赞同：0
> 
> 时间：2012-11-16T12:35:45.567
> 
> 标签：c

在每个 if 语句的最后一行，'ciphered_text' 中的当前数组元素已从中减去 26。但是，这似乎仅适用于第一部分，而不适用于第二部分。谁能明白为什么？顺便说一句，任何人都可以告诉我是否应该在这里使用 else if 或 else。谢谢。

```
 for(arrayelement = 0; arrayelement < size; arrayelement++)
    {
        ciphered_text[arrayelement] = (plain_text[arrayelement]);
        if ((int)(ciphered_text[arrayelement]) >= 65 && (int)(ciphered_text[arrayelement]) <= 90)
        {
            ciphered_text[arrayelement] = (int)(ciphered_text[arrayelement]) + shiftkey;
            if (ciphered_text[arrayelement] > 90)
                ciphered_text[arrayelement] = (int)(ciphered_text[arrayelement]) - 26;

        }

else if ((int)(ciphered_text[arrayelement])  >= 97 && (int)(ciphered_text[arrayelement]) <= 122)
        {
            ciphered_text[arrayelement] = (int)(ciphered_text[arrayelement]) + shiftkey;
            if (ciphered_text[arrayelement] > 122)
                ciphered_text[arrayelement] = (int)(ciphered_text[arrayelement]) - 26;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:41:11.253

我想`ciphered_text`是 a`char[N]`还是 a `char*`？

失败的可能原因是

```
(int)(ciphered_text[arrayelement]) + shiftkey; 
```

大于 127，当它存储在`char`( `ciphered_element[arrayelement]`) 中时，它被转换为负值。`char`（注意：如果`char`已签名，则将超出范围的值转换为实现定义的。）

最简单的解决方法是将类型更改为`unsigned char`.

# eclipse - 将 valgrind 集成到 Eclipse 时遇到问题

> ID：13416701
> 
> 赞同：3
> 
> 时间：2012-11-16T12:36:04.483
> 
> 标签：eclipse, valgrind

我一直在尝试安装`Valgrinds`工具集成

> （Linux 工具：http: [//download.eclipse.org/linuxtools/update](http://download.eclipse.org/linuxtools/update)）

使用eclipse，但在安装过程中出现以下错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Valgrind Tools Integration 1.0.0.201209191645 (org.eclipse.linuxtools.valgrind.feature.group 1.0.0.201209191645)  
  Missing requirement: **Tools Launcher Core 1.1.0.201209191645 (org.eclipse.linuxtools.tools.launch.core 1.1.0.201209191645) requires 'bundle org.eclipse.ui 3.7.0' but it could not be found**  
  Cannot satisfy dependency:
    From: Valgrind Core Plug-in 1.0.0.201209191645 (org.eclipse.linuxtools.valgrind.core 1.0.0.201209191645)  
    To: bundle org.eclipse.linuxtools.tools.launch.core 0.0.0  
  Cannot satisfy dependency:
    From: Valgrind Tools Integration 1.0.0.201209191645 (org.eclipse.linuxtools.valgrind.feature.group 1.0.0.201209191645)  
    To: org.eclipse.linuxtools.valgrind.ui [1.0.0.201209191645]  
  Cannot satisfy dependency:
    From: Valgrind UI Plug-in 1.0.0.201209191645 (org.eclipse.linuxtools.valgrind.ui 1.0.0.201209191645)
    To: package org.eclipse.linuxtools.internal.valgrind.core 0.0.0 
```

我尝试安装其他`CDT`工具，但它们也没有安装，它们显示错误：

> 找不到捆绑包 org.eclipse.cdt.launch 7.0.0

在另一种情况下：

> 找不到捆绑包 org.eclipse.core.runtime 3.6.0 org.eclipse.core.filesystem 1.3.100。

我尝试搜索单个包

> （例如[http://grepcode.com/snapshot/repository.grepcode.com/java/eclipse.org/3.6/org.eclipse.core/runtime/3.6.0](http://grepcode.com/snapshot/repository.grepcode.com/java/eclipse.org/3.6/org.eclipse.core/runtime/3.6.0)）

但无法安装它们。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:17:49.333

您的 CDT 太旧了，无法运行最近的 linuxtools。而且很可能您的 Eclipse 太旧而无法运行最近的 CDT。

安装最新版本的 Eclipse + CDT，3.7 或 4.2.1。两者都包含足够新的 CDT 版本（8.0 或 8.1）来安装 linuxtools。

# java - 处理请求后的 Java Servlet 和 Commons FileUpload getParameter

> ID：13416704
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:36:11.563
> 
> 标签：java, jsp, servlets, request, apache-commons

我在 Java EE 中有一个使用*Apache Commons File Upload API*的应用程序。到目前为止一切进展顺利，但我有一个问题。

我在服务器端进行了某种验证 - 如果有任何问题，我必须将用户发送到上一页并将问题告知用户。我还必须将数据加载到表单中，但是当我`request.getParameter("key")`在 JSP 中使用时，它正在返回`null`.

我已经测试了未处理的请求`commons-fileupload`，我看到了结果。

我的问题是在请求被处理后如何保留`request.getParameter("key")`并将其发送回客户端`org.apache.commons.fileupload.servlet.ServletFileUpload`？

`<%out.println(request.getParameter("cedula"));%>``null`请求被 API 处理后返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:47:45.010

1）你为什么使用`getParameter`而不是`getAttribute`

2）当发生验证错误时，请求被重定向，这意味着发送了一个新的请求对象，您需要再次提供请求属性。

与将操作分派到 JSP 时所做的相同。如果你想传递参数，那么你应该在标签的属性`action`中提供它。`<form>`

它似乎依赖于框架，但您可以尝试。请注意，在 JSP 中，如果您使用[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)，您可以尝试`${param}`访问参数并`${attr}`访问属性，而不是使用*scriplets'* `getParameter`，如果您真的想通过 URL 传递它。JSTL也有[很好的艺术](http://www.ibm.com/developerworks/java/library/j-jstl0211/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:45:54.180

这很正常。整个 HTTP 请求以不同的格式发送，只有 Apache Commons FileUpload 可以处理。`request.getParameter("name")`不适用于任何参数，也不适用于常规参数。

您应该使用相同的 Apache Commons FileUpload API 从常规输入字段中提取值。您通常应该`item.isFormField()`在他们的代码示例中的行返回时执行此`true`操作（提取上传的文件将在它返回时完成`false`，您可能已经实现了该部分）。

或者，如果您已经使用 Servlet 3.0（Tomcat 7、Glassfish 3 等），那么您也可以只使用`@MultipartConfig`servlet 上的注释，这样您就可以获取上传的文件`request.getPart("name")`并继续`request.getParameter("name")`用于常规输入字段。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# c++ - 按偶数和奇数排序

> ID：13416712
> 
> 赞同：3
> 
> 时间：2012-11-16T12:37:00.407
> 
> 标签：c++, sorting, stdvector

我想知道是否可以使用 std::sort 函数按偶数或奇数对数字进行排序。

我有以下代码，但我不确定如何在 std::sort 中实现

```
inline bool isEven(const Point n) {
return n.getX()%2==0;
} 
```

它是否正确

```
vector<Point> c;
std::sort(c.begin(),c.end(),isEven) 
```

请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T13:30:33.467

根据我对您的问题的理解，您想将`odd`数字分开`even`。如果是这样，[`std::partition`](http://en.cppreference.com/w/cpp/algorithm/partition)就会这样做。

如果您想按升序值和单独`odd`的`even`数字进行排序，我会使用类似于这段代码的东西（不过，您必须弄清楚`Point`要对哪个组件进行排序）

```
bool sortByEven(const int& left, const int& right)
{
    if(left & 1 && right & 1) // both are odd
    {
        return left < right;
    }
    else if(left & 1) // left is odd
    {
        return false;
    }
    else if(right & 1) // right is odd
    {
        return true;
    }

    // both are even
    return left < right;
} 
```

这个函数可以和 一起使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)，下面是一个简短的例子：

```
std::vector<int> numbers;
numbers.push_back(-1);
numbers.push_back(5);
numbers.push_back(12);
numbers.push_back(7);
numbers.push_back(-31);
numbers.push_back(-20);
numbers.push_back(0);
numbers.push_back(41);
numbers.push_back(16);

std::sort(numbers.begin(), numbers.end(), sortByEven); 
```

将为您提供以下输出：

```
-20 0 12 16 -31 -1 5 7 41 
```

对于其他类型，只需更改`int`或使其成为`template`参数

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T12:48:50.200

为此，您应该使用`std::partition`而不是`std::sort`

```
vector<Point> c;
std::partition(c.begin(),c.end(),isEven) 
```

对于排序，您通常希望排序基于任意*两个元素*的相对顺序。在这种情况下，您只想根据元素的固有属性对输入进行分区。两种情况都可以归结为另一种情况，但采用直接方法总是更容易一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T12:42:53.213

如果您查看参考资料，[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)您会发现它用于比较的函数应该采用*两个*参数进行比较。所以你的代码根本不起作用。

我建议您改为迭代向量，将偶数值排序到一个临时向量中，将奇数值排序到另一个临时向量中。然后你清除实际的向量，并按照你喜欢的顺序附加两个临时向量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:44:10.133

您可以编写一个比较函数，例如

```
bool evenOddLess( Point const& a, Point const& b )
{ return (isEven( a ) < isEven( b )); } 
```

然后您可以将其用作`std::sort`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T22:26:54.383

在 C# 中，它甚至更简单：

```
 class Program 
    {
        static void Main()
        {
          int[] numbers = { 1, 2, 3, 4, 5,6,7,8,9,10,11,12,13,14 };

         //using delegate
          Array.Sort (numbers, (x, y) => x % 2 == y % 2 ? 0 : x % 2 == 1 ? -1 : 1);

          Array.ForEach(numbers, x => Console.Write(x));
          Console.WriteLine("");

         //using custom comparer
          CustomComparer comparer = new CustomComparer();
          Array.Sort(numbers, comparer);
          Array.ForEach(numbers, x => Console.Write(x));
          Console.WriteLine("");

          //using lambda
          int[] items = numbers.OrderBy(x => x % 2 == 0).ThenBy(x => x % 2).ToArray();

          Console.WriteLine("");
          Array.ForEach(items, x => Console.Write(x));
        }

        public int Compare(int x, int y)
        {
            return x % 2 == y % 2 ? 0 : x % 2 == 1 ? -1 : 1;
        }
    }

    public class CustomComparer : IComparer<int>
    {
        int IComparer<int>.Compare(int x, int y)
        {
            return x % 2 == y % 2 ? 0 : x % 2 == 1 ? -1 : 1;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-26T16:48:18.043

问题是您可以使用两个功能。

```
template< class BidirectionalIterator, class UnaryPredicate >
BidirectionalIterator partition( BidirectionalIterator first, BidirectionalIterator last, UnaryPredicate p );

template< class BidirectionalIterator, class UnaryPredicate >
BidirectionalIterator stable_partition( BidirectionalIterator first, BidirectionalIterator last, UnaryPredicate p ); 
```

> 函数[partition()](http://www.cplusplus.com/reference/algorithm/partition/?kw=partition)和[stable_partition()](http://www.cplusplus.com/reference/algorithm/stable_partition/)重新组织集合的元素，使得谓词 p 返回***true*****的所有**元素都在p 返回***false*****的所有元素之前**。这意味着元素将分为两个范围：
> 
>  ****• [first, return_value)
> 
> • [return_value，最后一个）
> 
> `return_value`任何一个函数返回的迭代器在哪里。结果组中的元素序列是哪里 `partition()`和`stable_partition()`不同的。
> 
> `partition()` **不保证**范围内的任何特定顺序。
> 
> `stable_partition()` **将在拆分之前保持元素的相对顺序**。这意味着如果有两个元素a和b，并且a在b之前，并且如果它们在拆分后都属于同一个组，那么元素a仍然会在元素b之前。****

 ****这是一个示例代码：

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

bool IsOdd(int i) {
    return (i & 1); //use !(i & 1); if you want to place even elements first in the vector
}

int main() {
    vector<int> v;
    // set some values and shuffle them:
    for (int i = 1; i<10; ++i)
        v.push_back(i);
    random_shuffle(v.begin(), v.end());

    cout << "All elements:";
    for (vector<int>::iterator it = v.begin(); it != v.end(); ++it)
        cout << ' ' << *it;
    cout << endl;

    //sort the vector
    cout << "Sorted vector:";
    sort(v.begin(), v.end());
    for (vector<int>::iterator it = v.begin(); it != v.end(); ++it)
        cout << ' ' << *it;
    cout << endl;

    //change to partition and see the difference
    vector<int>::iterator bound = stable_partition(v.begin(), v.end(), IsOdd);

    // print content:
    cout << "odd elements:";
    for (std::vector<int>::iterator it = v.begin(); it != bound; ++it)
        cout << ' ' << *it;
    cout << endl;

    cout << "even elements:";
    for (vector<int>::iterator it = bound; it != v.end(); ++it)
        cout << ' ' << *it;
    cout << endl;

    cout << "Sorted odd-even vector:";
    for (vector<int>::iterator it = v.begin(); it != v.end(); ++it)
        cout << ' ' << *it;
    cout << endl;

    return 0;
} 
```

输出：

```
All elements: 5 6 2 1 9 4 7 8 3
Sorted vector: 1 2 3 4 5 6 7 8 9
odd elements: 1 3 5 7 9
even elements: 2 4 6 8
Sorted odd-even vector: 1 3 5 7 9 2 4 6 8 
```

我希望它有助于理解。****

# jakarta-ee - 在 Tomcat 的备用端口上运行特定的 webapp

> ID：13416713
> 
> 赞同：0
> 
> 时间：2012-11-16T12:37:00.907
> 
> 标签：jakarta-ee, tomcat, web-applications, tomcat7

> **可能重复：**
> [如何在不同端口后面的单个 Tomcat 实例上运行不同的应用程序？](https://stackoverflow.com/questions/8823290/how-to-run-different-apps-on-single-tomcat-instance-behind-different-ports)

有没有办法将 Tomcat 7 配置为在备用端口上托管特定的 Web 应用程序？

我知道我可以在 conf/sever.xml 中更改连接器的端口，但这会更改全局的侦听端口，对于部署在 tomcat 实例中的所有 webapps。

我不能使用透明代理或任何其他中间网关来重定向请求，我需要使用最少的额外基础设施依赖项来解决这个问题，所以如果只有通过配置 tomcat 就能做到这一点，我会非常高兴。

例如：我希望 webapp_1 只能从 {topmcat_host}:{port1} 访问，而 webapp_2 只能从 {topmcat_host}:{port2} 访问

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:52:04.350

就应用程序设置而言，没有*可配置*的方法让 Tomcat 监听请求的端口。当然，最*文明*的选择是配置所有端口`server.xml`并根据需要进行切换。

如果您不能执行上述操作，您可以编写一个 servlet 侦听器，该侦听器绑定在任意端口上，并将所有请求/响应转发到/来自“主”端口（您也可以添加请求验证以仅允许此应用程序的请求） . 但这是一个疯狂的解决方案。

# css - 根据列表大小更改 css 类

> ID：13416714
> 
> 赞同：1
> 
> 时间：2012-11-16T12:37:01.173
> 
> 标签：css, html-lists

我有一个列表，假设列表的大小是 5：

```
<ul> 
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
<li>5</li>
</ul> 
```

在 css 中，我有三个类：

```
1 - li:first-child
2 - li:-nth-child(3)
3 - li:last-child 
```

好的，如果列表大小为 1，则问题从这里开始，它在同一元素上实现了第一个子类和最后一个子类。我有没有办法停止加载最后一个子类？我希望我已经把自己说清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:53:46.173

尝试在最后一个孩子声明之后为第一个孩子声明 css。

在下面的情况下，文本“列表项”应以粗体显示。

```
ul li:last-child {
 font-weight:normal;
}

ul li:first-child {
 font-weight:bold;
}

<ul>
 <li>List item</li>
<ul> 
```

# cordova - card.io Android Phonegap 集成

> ID：13416715
> 
> 赞同：0
> 
> 时间：2012-11-16T12:37:07.310
> 
> 标签：cordova, phonegap-plugins, card.io

我正在尝试为 card.io 和 phonegap (crodova) 编写一个插件。我的问题是当我点击打开 card.io 扫描信用卡时，应用程序崩溃并出现以下错误：

**11-16 14:19:52.990：E/SurfaceTextureClient(17199)：queueBuffer：错误队列缓冲区到 SurfaceTexture，-9**

**11-16 14:19:55.580: A/libc(17199): 致命信号 11 (SIGSEGV) 在 0x00000010 (code=1)**

我不是 java 专业人士，但我遵循了 phonegap 上的插件文档并查看了其他一些已经完成的文档。

下面是我的代码：

**主班**

```
package com.eliashajj.MyApp;

import org.apache.cordova.DroidGap;

import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.widget.TextView;
import com.elixir.vmart.R;

public class MyApp extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        try {
            super.loadUrl("file:///android_asset/www/index.html", 10000);
        } catch (Exception e) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Error");
            builder.setMessage("Please make sure you have have and internet connection and try again.");
            builder.setPositiveButton("OK", null);
            AlertDialog dialog = builder.show();

            TextView messageView = (TextView) dialog
                    .findViewById(android.R.id.message);
            messageView.setGravity(Gravity.CENTER);
        }
    }
} 
```

**这是我的 Card.IO 处理程序**

```
package com.eliashajj.MyApp;

import io.card.payment.CardIOActivity;
import io.card.payment.CreditCard;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class Cardio extends Plugin{

    private static final String MY_CARDIO_APP_TOKEN = "MY APP TOKEN";
    private static final String SCAN = "scan";
    private static final String CC_VARIABLE = "cc_number";
    private static final String CC_MONTH_VARIABLE = "cc_month";
    private static final String CC_YEAR_VARIABLE = "cc_year";
    private static final String CC_CVV_VARIABLE = "cc_cvv";
    private static String CC_NUMBER;
    private static int EXPIRY_MONTH;
    private static int EXPIRY_YEAR;
    private static int CVV_NUMBER;

    public String callback;
    public static final int REQUEST_CODE = 0x0ba7c0de;

    /*
     * Constructor
     */
    public Cardio(){

    }

    /*
     * Executes the request and returns PluginResult.
     *
     * @param action        The action to execute.
     * @param args          JSONArry of arguments for the plugin.
     * @param callbackId    The callback id used when calling back into JavaScript.
     * @return              A PluginResult object with a status and message.
     */
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        this.callback=callbackId;

        //Context cc = this.cordova.getActivity().getApplicationContext();
        if(action.equals(SCAN)){
            scan();
        }
        PluginResult r = new PluginResult(PluginResult.Status.NO_RESULT);
        r.setKeepCallback(true);
        return r;
    }

    public void scan() {
        // This method is set up as an onClick handler in the layout xml
        // e.g. android:onClick="onScanPress"
        Context cc = this.cordova.getActivity().getApplicationContext();

        Intent scanIntent = new Intent(cc, CardIOActivity.class);

        // required for authentication with card.io
        scanIntent.putExtra(CardIOActivity.EXTRA_APP_TOKEN, MY_CARDIO_APP_TOKEN);

        // customize these values to suit your needs.
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_EXPIRY, true); // default: true
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_CVV, true); // default: false
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_ZIP, false); // default: false

        // hides the manual entry button
        // if set, developers should provide their own manual entry mechanism in the app
        scanIntent.putExtra(CardIOActivity.EXTRA_SUPPRESS_MANUAL_ENTRY, false); // default: false

        Log.d("SCANNING TAG: ", "1");
        // MY_SCAN_REQUEST_CODE is arbitrary and is only used within this activity.
        this.cordova.startActivityForResult((Plugin) this, scanIntent, REQUEST_CODE);
        Log.d("SCANNING TAG: ", "2");
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.d("SCANNING TAG: ", "3");
        super.onActivityResult(requestCode, resultCode, data);
        Log.d("SCANNING TAG: ", "4");

        Log.d("Request Code: ",""+requestCode);
        Log.d("Request Code 2: ",""+REQUEST_CODE);

        if (requestCode == REQUEST_CODE) {
            Log.d("SCANNING TAG: ", "Data"+data);
            if (data != null && data.hasExtra(CardIOActivity.EXTRA_SCAN_RESULT)) {
                JSONObject obj = new JSONObject();
                CreditCard scanResult = data.getParcelableExtra(CardIOActivity.EXTRA_SCAN_RESULT);

                // Never log a raw card number. Avoid displaying it, but if necessary use getFormattedCardNumber()
                CC_NUMBER = scanResult.getRedactedCardNumber();
                // CC Expiry Month
                EXPIRY_MONTH = scanResult.expiryMonth;
                // CC Expiry Year
                EXPIRY_YEAR = scanResult.expiryYear;
                // CC CVV Number
                CVV_NUMBER = scanResult.cvv.length();

                try{
                    obj.put(CC_VARIABLE, CC_NUMBER);
                    obj.put(CC_MONTH_VARIABLE, EXPIRY_MONTH);
                    obj.put(CC_YEAR_VARIABLE, EXPIRY_YEAR);
                    obj.put(CC_CVV_VARIABLE, CVV_NUMBER);
                }
                catch(JSONException e){

                }
                this.success(new PluginResult(PluginResult.Status.OK, obj), this.callback);
            }
        }
        else {
            // Scanning was canceled
        }
    }

    protected void onResume() {
        super.onResume(true);

    }
} 
```

**这是我的 Cordova 插件 javascript**

```
var Cardio = function() {
};

//-------------------------------------------------------------------
Cardio.prototype.scan = function(successCallback, errorCallback) {
    if (errorCallback == null) { errorCallback = function() {}}

    if (typeof errorCallback != "function")  {
        console.log("Cardio.scan failure: failure parameter not a function");
        return
    }

    if (typeof successCallback != "function") {
        console.log("Cardio.scan failure: success callback parameter must be a function");
        return
    }

    cordova.exec(successCallback, errorCallback, 'Cardio', 'scan', []);
};

//-------------------------------------------------------------------

if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.cardio) {
    window.plugins.cardio = new Cardio();
} 
```

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:50:01.580

libc SIGSEGV 是来自本机层 (libc) 的段错误。其中一些确实在 3.0.2 版本中得到修复，因此请确保您拥有最新版本的 SDK。

否则，如果不查看本机故障转储，就很难确切知道问题出在哪里。这些有时隐藏在 DDMS logcat 视图中，因为它们是由 Android 而不是托管应用程序生成的，因此您需要确保删除任何 logcat 过滤才能看到它。

# jquery - 表单发布后刷新MVC3中的表

> ID：13416717
> 
> 赞同：0
> 
> 时间：2012-11-16T12:37:12.403
> 
> 标签：jquery, asp.net-mvc-3, html-table

我的场景是我有一些 HTML 下拉菜单，它们在更改时触发 jQuery 以动态填充返回的 JSON 结果表。

```
[HttpPost]
    public JsonResult GetTableInfo(Guid schemeId, Guid tableTypeId)
    {
        var tables = this.tableModel.GetTableInformationList(schemeId, tableTypeId);
        var formattedData = from t in tables
                            select new
                            {
                                TableId = t.TableId.ToString(),
                                TableName = t.TableName
                            };

        return Json(formattedData.ToList(), "text/json");
    } 
```

动态表列出过滤后的表，每行显示表名和允许删除表的表格。这是从 jQuery 函数“OnSuccess”中的 JSON 结果生成的

```
function OnSuccess(data) {
    var scheme = $('#schemesList').val();
    var tableType = $('#tableTypesList').val();
    var requestedBy = $('#requestedBy').val();

    var targetId = $('#tablesList');
    targetId.empty();
    targetId.css('color', 'black');
    if (data.length < 1) {
        targetId.append('<tr><td><strong>No tables match the selection</strong></td></tr>').css('color', 'Red');};

    for (var i = 0; i < data.length; i++) {
        var name = data[i].TableName;
        var id = data[i].TableId;
        targetId.append('<tr><td>' + name + '</td><td class="buttoncol">' +
                        '<form action="/DeleteTable" data-ajax="true" data-ajax-mode="replace" ' +
                        'data-ajax-success="OnSuccess" data-ajax-failure="OnFailure" data-ajax-update="#tablesList" ' +
                        'data-ajax-url="/GetTableInfo" method="post"> ' +
                        '<input id="tableId" name="tableId" type="hidden" value="' + id + '" />' +
                        '<input id="schemeId" name="schemeId" type="hidden" value="' + scheme + '" /> ' +
                        '<input id="tableTypeId" name="tableTypeId" type="hidden" value="' + tableType + '" /> ' +
                        '<input id="requestedBy" name="requestedBy" type="hidden" value="' + requestedBy + '" /> ' +
                        '<input type="submit" value="Delete table" id="deleteButton" /></form></td></tr>');
        if (requestedBy.length <= 0) {
            $('form input#deleteButton').attr('disabled', true);
        };
    }        
}; 
```

例如

**我的表 1** | **删除表格按钮**

**我的表 2** | **删除表格按钮**

**我的表 3** | **删除表格按钮**

...

所以现在我想要做的是单击发布行表单的删除按钮，然后一旦表被删除，得到一个表的刷新列表减去已删除的项目。为了实现这一点，我的**DeleteTable**操作执行删除，然后调用**GetTableInfo**，它返回一个 JSONResult（这是最初填充表的调用）。删除表单设置为不显眼的 ajax，以便它调用**OnSuccess**函数来重新填充表；问题是第二次返回我的 JSON 字符串，但没有再次构建到表中。

我很困惑，有人可以帮忙吗？另外，我是否以正确的方式进行此操作？我默认使用 jquery，因为我无法弄清楚如何使用 Ajax.BeginForm 使用 MVC3 标签动态创建表格内容 - 将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:51:03.623

您不需要行内的表单标签。只需使用 jquery ajax 发布您想要的内容：

```
for (var i = 0; i < data.length; i++) {
        var name = data[i].TableName;
        var id = data[i].TableId;
        targetId.append('<tr data-id=\'' + id + \'' ><td>' + name + '</td><td class="buttoncol">' +
                        '<input id="tableId" name="tableId" type="hidden" value="' + id + '" />' +
                        '<input id="schemeId" name="schemeId" type="hidden" value="' + scheme + '" /> ' +
                        '<input id="tableTypeId" name="tableTypeId" type="hidden" value="' + tableType + '" /> ' +
                        '<input id="requestedBy" name="requestedBy" type="hidden" value="' + requestedBy + '" /> ' +
                        '<input type="button" value="Delete table" class="deleteButton" id="deleteButton" /></td></tr>');
        if (requestedBy.length <= 0) {
            $('form input#deleteButton').attr('disabled', true);
        };
    }        

$(".deleteButton").click(function (){
    var btn = $(this);
    var currentTr = btn.closest("tr");
    var tableID = currentTr.attr("data-id");

    $.ajax({
      type: 'POST',
      url: url,
      data: {id : tableID},
      success: function (){
         var tr = $('#tablesList tr[data-id="' + tableID +'"]');
         tr.remove();
      },
      dataType: 'JSON'
    });
}); 
```

# com - CLSIDFromProgID() 在注册表中的什么位置？

> ID：13416722
> 
> 赞同：6
> 
> 时间：2012-11-16T12:37:20.913
> 
> 标签：com, guid, clsidfromprogid

MS的文档只是说：

> 给定一个 ProgID，CLSIDFromProgID 在注册表中查找其关联的 CLSID。

但它到底长在哪里？我遇到了一个奇怪的问题，即返回了错误的 CLSID，我想了解此函数希望帮助缩小问题所在的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T00:42:01.177

查找通过[应用程序的清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191(v=vs.85).aspx)及其依赖[程序集清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374219(v=vs.85).aspx)。这样做是为了支持[免注册 COM](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375134(v=vs.85).aspx)。

如果没有应用程序清单，或者没有任何依赖程序集清单在 a`comClass`或`clrClass`XML 元素中声明您的类，则查找默认为注册表，它将使用名为 的字符串值检查¹。[`HKEY_CLASSES_ROOT\<ProgID>`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd542719(v=vs.85).aspx)^([`CLSID`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688628(v=vs.85).aspx))

* * *

^(1.) `HKEY_CLASSES_ROOT`是和的混合`HKEY_CURRENT_USER\Software\Classes`体`HKEY_LOCAL_MACHINE\Software\Classes`。

# django - 我可以在 Django 中有多个模型表示吗

> ID：13416723
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:37:26.787
> 
> 标签：django, django-models

我的问题是我是否可以在 Django 中有多个模型表示。更具体地说，我在保存模型后使用 post_save 信号做某事。问题是信号传递了一个已保存模型的实例，但这只是 unicode 表示。这是因为我已经覆盖了**unicode**方法。我想将此方法保留用于管理面板，但出于其他目的，我需要访问模型的完整表示。

那么如何在信号中为模型传递不同的表示形式并在管理面板中传递不同的表示形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:37:00.730

Django`post_save`信号携带已保存的实际实例。

请参阅[实现](https://github.com/django/django/blob/master/django/db/models/base.py#L640)以供参考。

如果您确定它是 unicode，请分享 django 版本。

# sublimetext2 - 在 Sublime Text 2 中，将连字符视为单词的一部分

> ID：13416724
> 
> 赞同：27
> 
> 时间：2012-11-16T12:37:30.883
> 
> 标签：sublimetext2, sublimetext

如何在 Sublime Text 2 中双击包含连字符（破折号）的单词，选择整个单词，而不仅仅是由连字符分隔的单词的一部分？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-16T12:43:19.013

点击*settings* -> *default settings*，找到`"word_separators"`key并从字符集中删除连字符，重新保存。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-28T22:19:30.963

正如@Nate Pinchot 所说，最好将`"word_separators"`密钥添加到用户设置中。在更新 Sublime Text 的情况下，更改`Default Settings`将被重置。

转到`Preferences > Settings ̶ Users`并在最外面的`{}`括号之间添加：

```
// Characters that are considered to separate words, here without hyphen
"word_separators": "/\\()\"':,.;<>~!@#$%^&*|+=[]{}`~?", 
```

如果它不是添加的唯一或最后一个键，请不要忘记末尾的逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T20:31:37.140

正如@Intentss 提到的（我不希望它在评论中丢失），如果您只想针对特定文件类型修改此行为：

首选项 > 设置 - 更多 > 特定语法 - 用户。

或者在我的情况下

首选项 > 设置 - 特定语法

然后编辑显示的用户版本：

`"word_separators": "/\\()\"':,.;<>~!@#$%^&*|+=[]{}`~?"`

# android - 无法读取数据库android

> ID：13416725
> 
> 赞同：2
> 
> 时间：2012-11-16T12:37:31.473
> 
> 标签：android, database, sqlite

我将我的数据库从资产复制到设备，但它无法从这里的数据库中读取数据代码

```
package ta.ex;

import java.io.IOException;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    MyDatabase mydb;
    ListView listtema;
    SQLiteDatabase db;
    Cursor cursor;
    SimpleCursorAdapter adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mydb = new MyDatabase(this);
        try {
            mydb.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        db = db.openDatabase("data/data/ta.ex/databases/ensiklopedia.sqlite", null, db.OPEN_READONLY);

        listtema = (ListView)findViewById(R.id.listTema);
        String[] columns = new String[]{"_id","tema"};       
        cursor = db.query("tema", columns, null, null, null, null, null);
        if (cursor != null){
            adapter = new SimpleCursorAdapter(this,
                    android.R.layout.simple_list_item_1,cursor,
                    new String[]{"tema"},new int[]{android.R.id.text1});
            listtema.setAdapter(adapter);
        }

    }
} 
```

我的数据库.java

```
package ta.ex;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class MyDatabase extends SQLiteOpenHelper{   
    private static final String DB_PATH = "/data/data/ta.ex/databases/";
    private static final String DB_NAME = "ensiklopedia.sqlite";
    private SQLiteDatabase sqldb;
    private final Context myContext;

    public MyDatabase(Context context) {
        super(context,DB_NAME,null,1 );
        // TODO Auto-generated constructor stub
        this.myContext = context;
    }

     public void createDataBase() throws IOException{

            boolean dbExist = checkDataBase();

            if(dbExist){
                //do nothing - database already exist
            }else{

                //By calling this method and empty database will be created into the default system path
                   //of your application so we are gonna be able to overwrite that database with our database.
                this.getReadableDatabase();

                try {

                    copyDataBase();

                } catch (IOException e) {

                    throw new Error("Error copying database");

                }
            }

        }

        /**
         * Check if the database already exist to avoid re-copying the file each time you open the application.
         * @return true if it exists, false if it doesn't
         */
        boolean checkDataBase(){

            SQLiteDatabase checkDB = null;
            try{
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
            }
            catch(SQLiteException e){
                //database doesn't exist yet.
            }
            if(checkDB != null){
                checkDB.close();
            }

            return checkDB != null ? true : false;
        }

        /**
         * Copies your database from your local assets-folder to the just created empty database in the
         * system folder, from where it can be accessed and handled.
         * This is done by transfering bytestream.
         * */
        private void copyDataBase() throws IOException{

            //Open your local db as the input stream
            InputStream myInput = myContext.getAssets().open(DB_NAME);

            // Path to the just created empty db
            File outFileName = myContext.getDatabasePath(DB_NAME);

            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }
            //Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();

        }

        public boolean isDatabaseExist() {
            File dbFile = new File(DB_PATH+DB_NAME);
            return dbFile.exists();
        }

        public void openDataBase(){
            //Open the database
            String myPath = DB_PATH + DB_NAME;
            sqldb = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
        }

        @Override
        public synchronized void close() {

                if(sqldb != null)
                    sqldb.close();

                super.close();

        }
    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        // TODO Auto-generated method stub

    }

} 
```

原木猫

```
11-16 19:18:12.182: ERROR/AndroidRuntime(5818): java.lang.RuntimeException: Unable to start activity ComponentInfo{ta.ex/ta.ex.MainActivity}: java.lang.NullPointerException
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.os.Looper.loop(Looper.java:123)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at java.lang.reflect.Method.invoke(Method.java:521)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at dalvik.system.NativeStart.main(Native Method)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818): Caused by: java.lang.NullPointerException
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at ta.ex.MainActivity.onCreate(MainActivity.java:33)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-16 19:18:12.182: ERROR/AndroidRuntime(5818):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

当我使用复制到系统的 createDatabase() 数据库时，但每当我尝试打开数据库时，它总是强制关闭 java.lang.nullpointerexception。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:43:22.103

在行中使用它之前，您没有初始化变量`db`..

```
db = db.openDatabase("data/data/ta.ex/databases/ensiklopedia.sqlite", null, db.OPEN_READONLY); 
```

你可以这样做：

```
db = SQLiteDatabase.openDatabase("data/data/ta.ex/databases/ensiklopedia.sqlite", null, db.OPEN_READONLY); 
```

或使用您的功能`openDataBase`：

```
public SQLiteDatabase openDataBase(){
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        sqldb = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
        return sqldb;
    } 
```

在活动中：

```
db = mydb.openDataBase(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:46:31.437

我发现了问题，

```
 db = db.openDatabase("data/data/ta.ex/databases/ensiklopedia.sqlite", null, db.OPEN_READONLY); 
```

删除上面的行并使用以下

```
mydb.openDataBase(); 
```

在 mydatabase.java 中创建返回光标的函数。你在 mydatabase.java 类中有 db 对象

# awk - AWK——如何改进这个例子

> ID：13416726
> 
> 赞同：1
> 
> 时间：2012-11-16T12:37:31.827
> 
> 标签：awk

我有一个文件：

```
2012-11-15 10:35:00 2012 11 15 10 22 00
2012-11-14 13:03:00 2012 11 14 13 03 00
2012-11-14 13:13:00 2012 11 14 13 13 00
2012-11-14 13:23:00 2012 11 14 13 23 00 
```

此命令打印：

```
$ awk -F "\t" '{ system(" date -d \" "$1" \" +%s; date -d \" "$1" \" +%s ")}' file
1352972100
1352972100
1352894580
1352894580
1352895180
1352895180
1352895780
1352895780 
```

我想在 system() 中打印：

```
1352972100 1352972100
1352894580 1352894580
1352895180 1352895180 
1352895780 1352895780 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:49:35.673

使用 GNU awk。目前尚不清楚您真正从哪些字段获取打印时间戳，因此这里有一些使用您的输入文件的示例：

仅使用 1 美元：

```
$ gawk '{s=mktime(gensub(/-/," ","g",$1" 0 0 0")); print s,s}' file
1352959200 1352959200
1352872800 1352872800
1352872800 1352872800
1352872800 1352872800 
```

使用 $1 和 $2：

```
$ gawk '{s=mktime(gensub(/[-:]/," ","g",$1" "$2)); print s,s}' file
1352997300 1352997300
1352919780 1352919780
1352920380 1352920380
1352920980 1352920980 
```

使用 $3 及以上：

```
$ gawk '{sub($1" "$2" ","");s=mktime($0); print s,s}' file
1352996520 1352996520
1352919780 1352919780
1352920380 1352920380
1352920980 1352920980 
```

如果你没有傻瓜：

```
$ awk '{ ("date -d \" "$1" \" +%s") | getline s; print s,s}' file
1352959200 1352959200
1352872800 1352872800
1352872800 1352872800
1352872800 1352872800 
```

编辑：更新到如何使用 system() （不推荐）：

使用这个 shell 命令行：

```
$ printf "%s %s\n" $(date -d 2012/11/15 +%s) $(date -d 2012/11/15 +%s)
1352959200 1352959200 
```

并从 awk 中的 system() 调用它：

```
$ awk '{system( "printf \"%s %s\n\" $(date -d " $1 " +%s) $(date -d " $1 " +%s)" )}' file
1352959200 1352959200
1352872800 1352872800
1352872800 1352872800
1352872800 1352872800 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:26:13.350

```
awk -F "\t" '{ system(" echo $(date -d \" "$1" \" +%s; date -d \" "$1" \" +%s) ")}' file 
```

这使用`echo`命令将两个输出展平为一行。这不是一个好的解决方案，但它确实符合使用系统和产生答案的标准。您也可以使用此变体：

```
awk -F "\t" '{ system(" x=$(date -d \" "$1" \" +%s); echo $x $x ")}' file 
```

# jquery - 文本输入占位符和跨浏览器支持

> ID：13416735
> 
> 赞同：1
> 
> 时间：2012-11-16T12:38:20.740
> 
> 标签：jquery, placeholder

所以我知道`placeholder`在 IE10 之前的 IE 中不支持 HTML5 属性，但我真的需要这个功能。

我以为我可以做以下事情，但它似乎不起作用（看起来`.focus`and`.blur`方法没有被解雇......

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    $(function() {

        function isPlaceholderSupported() {
            var input = document.createElement('input');
            return ('placeholder' in input);
        }

        var placeholderSupport = isPlaceholderSupported();

        if (placeholderSupport == false) {
            $('#store_name').val('Store Name');
        }

        $('#store_name').focus(function() {
            if (placeholderSupport == false) {
                if ($(this).val() == 'Store Name') {
                    $(this).val('');
                }
            }
        });

        $('#store_name').blur(function() {
            if (placeholderSupport == false) {
                if ($(this).val() == '') {
                    $(this).val('Store Name');
                }
            }
        });
    });
</script>

<input type="text" name="store_name" id="store_name" placeholder="Store Name" /> 
```

我看不出这里的逻辑有任何缺陷，但这就是行不通。Chrome 的开发工具中没有报告错误，我还没有在 IE9 中尝试过。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:50:33.757

```
<input id="email" type="text"/>

 /*placeholder*/
function initPlaceHolder(input, defaultValue) {
    input.onfocus = function() {
                    if (input.value == defaultValue){
                      input.value = "";
                      input.style.color = '#444444';
                    }
                  };

    function remove() {
        if (input.value == "") {
          input.value = defaultValue;
          input.style.color = '#c9c9c9';              
        }
    }
    input.onblur = remove;
    remove();
}
window.onload = function(){
    initPlaceHolder(document.getElementById("email"), "Enter your Email");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:37:44.013

```
/*For placeholder*/ 
function ClearPlaceHolder(input) {      
    if (input.value == input.defaultValue){
        input.value = "";
        document.getElementById(input.id).style.color = '#444444';
    }
}

function SetPlaceHolder (input) {
   if (input.value == "") {
        input.value = input.defaultValue;
        document.getElementById(input.id).style.color = '#c9c9c9';              
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:52:25.693

[为什么不使用像http://archive.plugins.jquery.com/project/jq-watermark](http://archive.plugins.jquery.com/project/jq-watermark)这样的现有插件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T15:10:16.953

```
/* <![CDATA[ */
$(function() {
var input = document.createElement("input");
if(('placeholder' in input)==false) { 
    $('[placeholder]').focus(function() {
        var i = $(this);
        if(i.val() == i.attr('placeholder')) {
            i.val('').removeClass('placeholder');
            if(i.hasClass('password')) {
                i.removeClass('password');
                this.type='password';
            }           
        }
    }).blur(function() {
        var i = $(this);    
        if(i.val() == '' || i.val() == i.attr('placeholder')) {
            if(this.type=='password') {
                i.addClass('password');
                this.type='text';
            }
            i.addClass('placeholder').val(i.attr('placeholder'));
        }
    }).blur().parents('form').submit(function() {
        $(this).find('[placeholder]').each(function() {
            var i = $(this);
            if(i.val() == i.attr('placeholder'))
                i.val('');
        })
    });
}
});
/* ]]> */ 
```

试试这个。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T10:30:31.857

您可以将此方法用于支持 IE9+ 的占位符

```
$('[placeholder]').focus(function () {
    var input = $(this);
    if(input.attr('data-password') == 'password') {
        input.attr('type','password');
        input.attr('data-password','text');
    }
    if (input.val() == input.attr('placeholder')) {
        input.val('');
        input.removeClass('placeholder');
        if(input.attr('type') == 'password') {
            input.attr('type','text');
            input.attr('data-password','password');
        }
    }
}).blur(function () {
    var input = $(this);
    if(input.attr('data-password') == 'password') {
        input.attr('type','password');
        input.attr('data-password','text');
    }
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
        if(input.attr('type') == 'password') {
            input.attr('type','text');
            input.attr('data-password','password');
        }
    }
}).keyup(function () {
    var input = $(this);
    if(input.attr('data-password') == 'password') {
        input.attr('type','password');
        input.attr('data-password','text');
    }
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        if(input.attr('type') == 'password') {
            input.attr('type','text');
            input.attr('data-password','password');
        }
    }
}).blur(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-16T12:48:02.183

检查下面的 jQuery 仅适用于 IE

```
 $(function() {
       var textBox = $('input[type="text"]');
       textBox.each(function() {
        var self = $(this);
        self.val(self.attr('placeholder'));
       });
    });
    $(document).on('focus', textBox, function() {
        var self = $(this);
       if(self.val() == self.attr('placeholder')) {
           self.val('');
       }
    });
    $(document).on('blur', textBox, function() {
        var self = $(this);
        if(self.val() == '') {
            self.val(self.attr('placeholder'));
        }
    }); 
```

# google-maps - 无法显示重绘标记

> ID：13416740
> 
> 赞同：0
> 
> 时间：2012-11-16T12:38:46.277
> 
> 标签：google-maps, google-maps-api-3

我在我的房地产网站中使用谷歌地图来显示不同位置的项目

位置以绿色标记显示，如下链接所示

[地图链接](http://apryll.co.in/maps/maps1/map.html)

```
var markers = new Array();
var i;

function DrawMap(locations)
{   
  var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 10,
              center: new google.maps.LatLng(-33.92, 151.25),
              mapTypeId: google.maps.MapTypeId.ROADMAP
        });

var flagIcon_front = new google.maps.MarkerImage("images/marker.png");

var flagIcon_shadow = new google.maps.MarkerImage("images/marker_shadow.png")
flagIcon_shadow.size = new google.maps.Size(105, 53);
flagIcon_shadow.anchor = new google.maps.Point(20, 52);         
var boxText = document.createElement("div");
boxText.style.cssText = "border: 1px solid black; margin-top: 8px; padding: 5px; display:block; ";

var myOptions = {
content: boxText
,disableAutoPan: false
,maxWidth: 0
,pixelOffset: new google.maps.Size(-261, -268)
,zIndex: null
,boxStyle: { 
background: "url('images/metro-plot-bg-1.png') no-repeat -286px -1361px"
,opacity: 1
,width: "393px"
,height: "233px"
}
,closeBoxMargin: "11px 32px 2px 2px"
,closeBoxURL: "images/close_small.png"
,infoBoxClearance: new google.maps.Size(1, 1)
,isHidden: false
,pane: "floatPane"
,enableEventPropagation: false              
};  
var infowindow = new google.maps.InfoWindow();  
var marker;
for (i = 0; i < locations.length; i++) 
{  
marker = new google.maps.Marker({
position: new google.maps.LatLng(locations[i][1], locations[i][2]),
icon: flagIcon_front,
shadow: flagIcon_shadow,         
map: map
});       
markers.push(marker);
}
for(i=0;i<locations.length;i++) 
{  
 marker1 = markers[i];
google.maps.event.addListener(marker1, 'click', (function(marker1, i) {
return function() {
          //infowindow.setContent(locations[i][0]);
          //infowindow.open(map, marker);
          ib.setContent(locations[i][0]);
          ib.open(map, marker1);
          }
      })(marker, i));
 //marker.setMap(null);
var ib = new InfoBox(myOptions);
//ib.open(map, marker);
}   
}

var locations = [
                              ['<div class="map_view"></div>', -33.890542, 151.274856, 4],
                              ['<div class="map_view"></div>', -33.923036, 151.259052, 5],
                              ['<div class="map_view"></div>', -34.028249, 151.157507, 3],
                              ['<div class="map_view"></div>', -33.80010128657071, 151.28747820854187, 2],
                              ['<div class="map_view"></div>', -33.950198, 151.259302, 1]
                            ];

                            $('document').ready(function(e) {
                               DrawMap(locations);
                            }); 
```

上面的 DrawMap() 函数以纬度和经度为参数

```
 var locations = [
                              ['<div class="map_view"></div>', -33.890542, 151.274856, 4],
                              ['<div class="map_view"></div>', -33.923036, 151.259052, 5],
                              ['<div class="map_view"></div>', -34.028249, 151.157507, 3],
                              ['<div class="map_view"></div>', -33.80010128657071, 151.28747820854187, 2],
                              ['<div class="map_view"></div>', -33.950198, 151.259302, 1]
                            ];

                            $('document').ready(function(e) {
                               DrawMap(locations);
                            }); 
```

页面第一次加载时地图工作正常。所有标记都以正确的方式显示。但是当我通过提供纬度和经度作为参数来填充地图时，我得到了按钮上的 ajax 调用的 responseText，地图显示标记在一个地方分组。

ajax调用的脚本如下

```
function getLocations()
{
  for(i=0;i<locations.length;i++) 
  {
    markers[i].setMap(null);
  }
  url = 'map.php';      
  $.post(
  url,
  {
   "act" : "getLocations"   
  },
  function(responseText){                                       
   DrawMap(responseText);
  },
  "html"
);
} 
```

工作副本在以下链接中上传

[地图链接](http://apryll.co.in/maps/maps1/map.html)

单击底部的按钮以获取纬度和经度作为来自 ajax 请求的响应文本

请让我知道我的哪些标记未重绘到新位置

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:00:29.943

在按钮单击中，您正在调用 $.post，然后将其发送`responseText`到该`DrawMap`方法。`DrawMap`期待一个 javascript 数组，而不是 JSON 文本，因此您可能希望像这样调用该方法：

```
function(responseText) {
    DrawMap($.parseJSON(responseText));
} 
```

此外，您从服务器传递的不是 jQuery 可以解析的 JSON。以机智：

```
jQuery.parseJSON docs:
    ...
    {'test': 1} ('test' is using single quotes instead of double quotes).
    ... 
```

您的 JSON 代码如下所示：

```
[
    ['<div class="map_view"></div>', -33.790542, 151.274856, 4],
    ['<div class="map_view"></div>', -33.983036, 151.259052, 5],
    ['<div class="map_view"></div>', -34.128249, 151.157507, 3],
    ['<div class="map_view"></div>', -33.85010128657071, 151.28747820854187, 2],
    ['<div class="map_view"></div>', -33.900198, 151.259302, 1]     
] 
```

尝试更改引号，如下所示：

```
[
    ["<div class='map_view'></div>", -33.790542, 151.274856, 4],
    ["<div class='map_view'></div>", -33.983036, 151.259052, 5],
    ["<div class='map_view'></div>", -34.128249, 151.157507, 3],
    ["<div class='map_view'></div>", -33.85010128657071, 151.28747820854187, 2],
    ["<div class='map_view'></div>", -33.900198, 151.259302, 1]     
] 
```

# outlook - PR_END_DATE < PR_START_DATE

> ID：13416743
> 
> 赞同：0
> 
> 时间：2012-11-16T12:38:52.947
> 
> 标签：outlook, exchange-server, mapi

在使用 MAPI 进行一些工作期间，我发现一些约会的结果非常奇怪，例如：

标签：0x00600040 类型：PT_SYSTIME 属性名称：PR_START_DATE、PidTagStartDate DASL：http: [//schemas.microsoft.com/mapi/proptag/0x00600040](http://schemas.microsoft.com/mapi/proptag/0x00600040) 12:00:00 01.11.2012

标签：0x00610040 类型：PT_SYSTIME 属性名称：PR_END_DATE，PidTagEndDate DASL：http: [//schemas.microsoft.com/mapi/proptag/0x00610040](http://schemas.microsoft.com/mapi/proptag/0x00610040) 02:30:00 01.11.2012

其中 EndDate 小于 StartDate 或 EndDate 与 Outlook 日历中显示的不同。

约会和会议对象协议规范说 PidTagEndDate 包含约会结束的日期和时间。但似乎有时它包含长度（上例中为 2:30）。最尴尬的是 Outlook 在日历中正确显示日期，所以我需要一些方法来正确解释从 MAPI 获得的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:53:06.127

不确定原因，但在我的情况下，PidTagEndDate (PR_END_DATE) 在某些约会上不正确，为了获得正确的值，必须使用其他规范属性（如果当然存在 - 它并不总是设置）[PidLidAppointmentEndWhole](http://msdn.microsoft.com/en-us/library/office/cc815864.aspx)根据规范PidTagEndDate 必须相等，但似乎并不总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:12:18.113

尝试这样做

```
LPSPropTagArray lppPropTags;
ULONG ulPropCount;
LPSPropValue pProp;
SYSTEMTIME& tmEnd;

HRESULT hr=m_appointment->GetProps(lppPropTags, MAPI_UNICODE, &ulPropCount, &pProp);
MAPIFreeBuffer(lppPropTags);

FILETIME tmLocal;
FileTimeToLocalFileTime(&pProp->Value.ft, &tmLocal);
FileTimeToSystemTime(&tmLocal, &tmStart); 
```

tmLocal 变量将包含结束时间

# objective-c - 接收远程推送通知时打开视图控制器

> ID：13416745
> 
> 赞同：7
> 
> 时间：2012-11-16T12:39:02.307
> 
> 标签：objective-c, ios, apple-push-notifications

我正在使用 storyboard ，我想在用户收到远程推送通知时始终打开相同的视图，即使应用程序处于后台或打开状态。我需要呈现的视图是在情节提要中设置的初始视图控制器之后的四个视图。我读了这篇文章：

[如何将响应通知的模式视图显示为新窗口？（没有父VC）](https://stackoverflow.com/questions/10430860/how-can-i-show-a-modal-view-in-response-to-a-notification-as-a-new-window-no-p)

[当用户收到推送通知时打开特定的选项卡/视图](https://stackoverflow.com/questions/6734338/open-a-specific-tab-view-when-user-receives-a-push-notification)

所以这是我的代码：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
    notificacionViewController *menu = [navController.storyboard instantiateViewControllerWithIdentifier:@"notificacion"];

    // First item in array is bottom of stack, last item is top.
    navController.viewControllers = [NSArray arrayWithObjects:menu,nil];

    [self.window makeKeyAndVisible];

} 
```

但是当我收到通知时，应用程序崩溃并出现以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[locationViewController setViewControllers:]: unrecognized selector sent to instance 0x42ccd0' 
```

locationViewController 是在情节提要中设置为初始的视图控制器。

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T13:18:11.940

请尝试以下代码：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
    NotificationViewController *notificationViewController = [[NotificationViewController alloc] init];
    [navController.visibleViewController.navigationController pushViewController:notificationViewController];    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T11:47:08.900

我的代码与我看到的答案有些不同。事实是，唯一对我有用的代码如下：

```
 UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;

    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];

    IniciarSliderViewController *controller = (IniciarSliderViewController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"MenuSlider"];

   [navigationController pushViewController:controller animated:YES]; 
```

1.- 实例化导航控制器。在绝大多数情况下通常是 rootviewcontroller，但不是全部

2.- 实例化情节提要。通常标记为 MainStoryboard

3.- 实例化您的特定视图控制器。你必须适应你的特殊情况

4.-按你应该做的，因为你已经设置了你需要的一切

# installation - Installshield 问题显示带有 installscript 的 sql 对话框

> ID：13416747
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:05.747
> 
> 标签：installation, installshield, installscript

我正在使用 install shield 中的 installscript 项目创建安装程序。

我试图显示的对话框编码如下：

```
MessageBox("Doing sql call", INFORMATION);

Dlg_SqlServerTest: 
    szConnection = "";
    svServer = ""              ;
    svUser = "";
    svPassword = "";
    bvWindowsLogin = FALSE;
    svCatalog = "";
    bShowCxnName = TRUE;
    bShowDBCatalog = TRUE;

    nResult = SQLServerSelectLogin2(szConnection, svServer, svUser, svPassword, bvWindowsLogin, svCatalog, bShowCxnName, bShowDBCatalog);

    MessageBox("Done sql call", INFORMATION); 
```

实际上什么都没有显示。现在，如果我检查 nResult 对象，它的值为 -1。这是标准对话框，无论如何我都没有修改它。

如果我将此调用更改为对“SQLServerSelect”的调用，则表明没有问题。所以我的代码被击中没问题。但由于某种原因不会进入我的代码来显示 sql 的登录。

代码已放在调用“OnSQLServerInitialize()”之后。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:22:17.777

不知道为什么它不起作用。但是，我发现如果您进入“setup.rul”并从 2 个下拉菜单中选择“BeforeMoveData”和“OnSQLServerInitialize”，它将添加一些代码来执行调用以显示对话框。它必须做一些我没有做的初始化。

我还没有弄清楚为什么它说我的连接详细信息在错误时可以正常连接，但这是我的下一个问题！

# javascript - 如何让某人在我的 jQuery 插件上链接回调方法？

> ID：13416748
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:22.053
> 
> 标签：javascript, jquery, ajax, callback

我想为 jQuery.post() 提供一些额外的功能。我希望能够检查来自服务器的响应并调用不同的回调。

例如：

```
$("#frmFoo").postForm("ajax")
    .start(function () { showSpinner(); })
    .success(function () { alert ("Foo saved"); })
    .error(function() { alert ("Foo could not be saved at this time"); })
    .validationError(function() { alert("Please fix foo and try again"); })
    .complete(function() { hideSpinner(); }); 
```

因此，我希望能够将一致的 JSON 对象发送回页面，并基于该 JSON 对象调用成功或验证错误，为验证错误提供附加信息。

**更新** 这是一个陡峭的学习曲线，我几乎 100% 确定我做错了什么。下面是我对我想要的功能的尝试。

```
(function ($) {
     $.fn.postForm = function (url) {
         var options = options || {};
         var formData = this.serialize();
         var validationCb = jQuery.Callbacks("once memory");
         var successCb = jQuery.Callbacks("once memory");
         var errorCb = jQuery.Callbacks("once memory");
         var completeCb = jQuery.Callbacks("once memory");
         var s = jQuery.ajaxSetup({ }, options);
         var callbackContext = s.context || s;
         foo = {
             success: function () {
                 successCb.add(arguments[0]);
                 return this;
            },
             complete: function() {
                 completeCb.add(arguments[0]);
                 return this;
            },
            validationError : function() {
                validationCb.add(arguments[0]);
                return this;
            },
            error: function() {
                errorCb.add(arguments[0]);
                return this;
            }
         };
         $.post(url, formData)
            .success(function(data, textStatus, jqXhr) {
                 if (!data.Success) {
                     validationCb.fireWith(callbackContext, [data.Message, data.KeyValuePairs]);
                 } else {
                     successCb.fireWith(callbackContext, [data, textStatus, jqXhr]);
                 }
            })
            .complete(function (jqXhr, textStatus) {
                completeCb.fireWith(callbackContext, [jqXhr, textStatus]);
            })
            .error(function(jqXhr, textStatus, errorThrown) {
                errorCb.fireWith(callbackContext, [jqXhr, textStatus, errorThrown]);
            });
         return foo;
     };
 })(jQuery); 
```

那么我所做的事情有多糟糕？我不熟悉 javascript 和 jQuery，我确信我违反了一些注定会咬我的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:48:17.920

做你提议的事情不是很实际，因为它有效地改变了`promise`界面。

`$.post`请注意，如果您只是将结果返回给调用者，那么您想要的大部分内容已经存在：

```
showSpinner();
$.post({...})
    .done(...)           // aka .success (deprecated)
    .fail(...)           // aka .error (deprecated)
    .always(stopSpinner) // aka .complete (deprecated) 
```

因此，您必须首先显示微调器，但这几乎没有任何困难，并且无法捕获验证错误，因此这需要成为您`.done`功能的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:35:50.627

如果我理解正确你想要达到的目标，你应该使用[$.ajax()](http://api.jquery.com/jQuery.ajax/)。

```
$.ajax({
  url: your_url,
  type: 'POST'
  beforeSend: function(){ showSpinner(); },
  error: function() { alert ("Foo could not be saved at this time"); }
  success: function (data) { 
     if (data.validation == true) { //example of validation, depends on how you send data from backend
       alert ("Foo saved");
       hideSpinner();
     } else {
        alert("Please fix " + data.foo + " and try again"); //again depends on how you send data     
     }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:43:47.533

您正在寻找[$.Deferred](http://api.jquery.com/category/deferred-object/)（或[$.Callbacks](http://api.jquery.com/category/callbacks-object/)如果您想要真正自定义的东西），或者更普遍的是[promise pattern](http://wiki.commonjs.org/wiki/Promises/A)。一个简单的实现可能如下所示：

```
(function ($) {
    $.fn.postForm = function (url, options) {
        var options = options || {},
            s = jQuery.ajaxSetup({ }, options),
            callbackContext = s.context || s;

        var formData = this.serialize();
        var post = $.post(url, formData);
        var deferred = post.pipe(function(data, textStatus, jqXhr) {
            if (!data.Success) {
                // HTTP OK, soft error
                return $.Deferred().rejectWith(callbackContext, [data.Message, data.KeyValuePairs]);
            } else {
                // success
                return $.Deferred().resolveWith(callbackContext, [data, textStatus, jqXhr]);
            }
        }, function(jqXhr, textStatus, errorThrown) {
            // HTTP error
            return $.Deferred().rejectWith(callbackContext, [errorThrown, {}]);
        });

        deferred.success = deferred.done;
        deferred.error = deferred.fail;
        deferred.complete = deferred.always;

        return deferred;
    };
})(jQuery); 
```

这不区分`error`/ `validationError`，但摆脱了大多数 biolerplate 代码。

# javascript - 创建一个加载外部页面的超链接，后跟一个 javascript

> ID：13416752
> 
> 赞同：3
> 
> 时间：2012-11-16T12:39:30.520
> 
> 标签：javascript, html, facebook, hyperlink, external

我有一个**[javascript](http://www.gibwork.com/Gibwork.js)**，我想在加载我的 facebook 组时自动激活它。

如果我去我在 facebook 上的小组并将其添加为包含 javascript 作为其 url 的书签，则该代码可以正常工作。

我想知道如何在我的网站上放置，就像我尝试过的那样，**[这里](http://www.gibwork.com/gibworkadd/)**有一个带有超链接“单击此处”的页面，该页面将它们带到我的组页面，然后激活 javascript。

有些成员不精通浏览器，需要很长时间尝试创建书签的方法，并确保他们在组页面上单击它，或者只是在地址栏中添加 javascript。只是希望它尽可能自动化，并像点击我页面上的链接一样简单。这在 Firefox 中也很有效，所以如果代码包含使用 Firefox，那就太好了。

如果尚未这样做，我会在单击下载 firefox 之前说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:43:45.000

尝试这个：

> onclick="myFunction()"

因此，当您单击超链接时，是否会打开 yoru 页面并执行您想要的任何 javascript 功能。

```
<a target="_blank" onclick="myFunction()" href="http://www.facebook.com/groups/gib.work">Gibwork Group page </a> 
```

# ruby - HAML 助手（tab_up）不起作用

> ID：13416753
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:34.477
> 
> 标签：ruby, haml, helpers

我正在尝试使用 tab_up 和 tab_down haml-helper。我的理解是，在 tab_up 之后下一行应该缩进。

这个haml代码...

```
%h1 foo
- tab_up
%p bar
- tab_down
%strong baz 
```

应该产生这个html...

```
<h1>foo</h1>
  <p>bar</p>
<strong>baz</strong> 
```

但就我而言，它会产生...

```
<h1>foo</h1>
<p>bar</p>
<strong>baz</strong> 
```

将haml更改为...

```
%h1 foo
= tab_up
%p bar
= tab_down
%strong baz 
```

导致...

```
<h1>foo</h1>
1
<p>bar</p>
0
<strong>baz</strong> 
```

因此，选项卡的计数似乎运行正确，但在创建输出时不考虑它们。其他 haml-helpers 运行良好。使用 tab_up 和 tab_down 时是否需要考虑其他任何因素？

我正在使用 Rails 3.2.8、Ruby 1.9.2、Windows7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:16:06.533

您在哪里寻找“查看”html？我刚刚为我测试了这个，它在页面源中正常工作。如果您在 firebug 或类似工具中查看它，它不会显示缩进。

# c++ - SIMD 内部函数和指针

> ID：13416754
> 
> 赞同：1
> 
> 时间：2012-11-16T12:39:35.980
> 
> 标签：c++, c, simd, intrinsics

我读到的所有关于使用 C/C++ 内在类型来实现 MMX 和 SSE 等 SIMD 功能的内容都表明您应该将它们用作不透明类型，而不是直接引用内部。

但是，当我查看许多示例时，它们通过获取（显式对齐）指向原始数据的指针并在执行工作之前将它们重新解释为指向内部类型的指针来工作。但是，通过使用指向内在类型的指针，尤其是在将其他数据别名为这些类型时，您是否违反了该规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:00:33.400

你似乎发现大多数例子都很糟糕。

引用 SSE 类型的“内部”实际上是相当安全的（只要它可以编译），实际上您*可以*在内存中将它们别名为内存中的“普通”数据类型，很多人这样做是因为它使代码更方便编写和使用。

但这几乎破坏了使用 SIMD 的意义。它阻止了很多优化，这意味着编译器必须不断地存储/加载 SIMD 数据类型，而不仅仅是将它们保存在 SIMD 寄存器中。

你*可以*这样做，但你*不应该*这样做。正如您所发现的，许多人将“应该”理解为“随意这样做”。

# c# - 从更新面板中提交以编程方式更改表单操作

> ID：13416757
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:40.160
> 
> 标签：c#, asp.net, forms

我很困惑...我的 aspx 页面上有一个表单，文本字段位于更新面板内。我用它来验证登录。如果登录成功，我更改表单操作，然后我希望表单提交到该 url。

```
<form runat="server" id="form1">
     <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
     <asp:UpdatePanel ID="UpdatePanel1" runat="server">
          <ContentTemplate>
               <!--form fields-->
               <asp:Button ID="btnSubmit" runat="server"  onclick="btnSubmit_click" Text="Continue" />
          </ContentTemplate>
     </asp:UpdatePanel>
</form> 
```

然后我的代码隐藏

```
 protected void btnSubmit_click(object sender, EventArgs e)
 {
      //do some validation, if ok then change the form action
      form1.Action = "myurl2.aspx";
      btnSubmit = "proceed to next url";
 } 
```

因此，一旦用户通过验证，我将更改要发布到的表单的 URL，然后更改按钮名称。当我然后单击提交按钮时，没有任何反应。如何提交表格？我尝试做类似 form1.submit 的事情，但显然不存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:54:48.627

试着打电话

```
Server.Transfer(...); 
```

或者

```
Response.Redirect(...); 
```

# jsp - 使用 jstl 显示带有转义 xml 字符的属性上下文

> ID：13416758
> 
> 赞同：1
> 
> 时间：2012-11-16T12:39:40.830
> 
> 标签：jsp, jakarta-ee, escaping, jstl, el

我有一个包含 jstl 的页面。在 jsp 文件中，我必须提取上下文属性：

```
<%= pageContext.getServletContext().getAttribute("NameOfMyAtribute")%> 
```

并显示它转义 xml 字符：

```
<c:out escapeXml="true" value="  ?  "/> 
```

怎么做？处理顺序是什么？如果我简单地说：

```
<c:out escapeXml="true" value="<%= pageContext.getServletContext().getAttribute("NameOfMyAtribute")%>"/> 
```

它不会工作，即使它可能显示（没有 xml 字符）文本 < *%= pageContext.getServletContext().getAttribute("NameOfMyAtribute")%>*而不是调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:42:58.480

```
<c:out value="${NameOfMyAttribute}"/> 
```

或者

```
<c:out value="${applicationScope.NameOfMyAttribute}"/> 
```

忘记小脚本。它们不应该再被使用了。EL 查找页面范围属性，然后是请求范围属性，然后是会话范围属性，最后是应用程序范围属性。

默认`escapeXml`情况下是真的（因为它是唯一的`<c:out>`）

# c++ - 如何使用 C++ Win32 API 获取当前系统域 IP 地址？

> ID：13416760
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:45.650
> 
> 标签：c++, windows, winapi, active-directory

我尝试使用 c++ win32 API 获取当前系统域 IP 地址。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:56:19.417

如果你的意思是让你的公共 ip 在 NAT 后面，你必须打开一个套接字，绑定它并连接到服务器并请求它回答你的 ip 是什么。这不是一件容易的事。如果你只想知道你的私有IP，你可以阅读stackoverflow上的这个帖子：[获取本地计算机的IP地址](https://stackoverflow.com/questions/122208/get-the-ip-address-of-local-computer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:11:29.660

如果您指的是本地系统 DNS 服务器的 IP 地址，您可以执行`ipconfig /all`并解析它/它们的输出。

# c# - 如何删除或隐藏数据表中的特定列？

> ID：13416761
> 
> 赞同：9
> 
> 时间：2012-11-16T12:39:46.693
> 
> 标签：c#

我正在使用 C#。我想隐藏或删除 DataTable 或 DataSet 中的列。我附上我的部分代码：

```
DataTable dt = new DataTable();
DataView dv = new DataView();
dv = (DataView)Session["map_hi"];
dt = dv.ToTable();
dt.Columns[0].ColumnMapping = MappingType.Hidden;
dt.AcceptChanges(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T12:41:48.010

尝试这个

```
 DataTable t;
   t.Columns.Remove("columnName");
   t.Columns.RemoveAt(columnIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-09T13:52:25.493

正如 Pranay 所说，您可以将列删除为`myTable.Columns.Remove("columnName");`

但在我的情况下，它会引发异常“无法删除此列，因为它是关系的父键的一部分”

我能够克服它，如下所示。

```
 myTable.ParentRelations.Clear();
  myTable.ChildRelations.Clear();
  myTable.Constraints.Clear();
  myTable.Columns.Remove("columnName"); 
```

希望这会对某人有所帮助

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-16T12:43:49.903

使用`Visible`属性隐藏特定列：

```
dt.Columns[0].Visible= false; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2018-01-29T13:08:42.917

要隐藏和显示试试这个：

**隐藏：**

```
dt.Columns[ColumnIndex].Visible = false; 
```

或者：

```
dt.Columns["ColumnName"].Visible = false; 
```

**用于展示：**

```
dt.Columns[ColumnIndex].Visible = true; 
```

或者：

```
dt.Columns["ColumnName"].Visible = true; 
```

**对于删除：**

```
dt.Columns.RemoveAt(ColumnIndex); 
```

或者：

```
dt.Columns.Remove("ColumnName"); 
```

# asp.net - 单击 asp.net 中的按钮时出现 JScript 错误

> ID：13416763
> 
> 赞同：0
> 
> 时间：2012-11-16T12:39:50.377
> 
> 标签：asp.net, gridview, jscript

单击按钮时我得到了一个 JScript，但我在按钮事件或页面加载事件之前得到了这个错误，而且它似乎没有在任何用户代码上出错。这是错误弹出窗口：

```
Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. 
```

从服务器返回的状态码是：500
在调试模式下，以下抛出突出显示，导致弹出：

```
if(d&&!e.get_errorHandled())throw d. 
```

我不知道这是否有帮助，但如果我从 gridview 的列中取出一个文本框，这将停止失败。
我有几个文本框，我删除哪个文本框并不重要，只要它是其中之一即可。谁能指出我的问题？

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:08:00.763

包含的 JavaScript 将无济于事。我相信您正在使用更新面板？这是正在抛出的异步请求中的服务器端错误，冒泡到客户端。您可以侦听 ScriptManager 控件的 AsyncPostBackError 事件，附加到它，您将收到异步回发期间发生的所有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:11:04.563

事实证明，这与在服务器上的 http 处理中最大化集合的索引有关。我正在加载一个大约 10 列和 300 行的网格。调试 JScript 后，我​​最终得到一个错误“由于对象的当前状态，操作无效”。这导致我访问了以下博客：[Microsoft 安全公告 MS11-100 – 严重 – 问题和修复](http://arthicksdev.wordpress.com/2012/01/04/microsoft-security-bulletin-ms11-100-critical-issues-and-fixes/)我所做的一切都是为了解决这个问题，我在 web config 中为 appSettings 添加了一个配置设置：

```
<add key="aspnet:MaxHttpCollectionKeys" value="5000" /> 
```

在服务器上抛出的错误是无用的。废话，我为什么成为编码员:-)

# python - 用多边形裁剪光栅图像，建议解决与使用 16 位图像而不是 8 位图像相关的错误

> ID：13416764
> 
> 赞同：1
> 
> 时间：2012-11-16T12:39:52.773
> 
> 标签：python, compiler-errors, raster, gdal, 16-bit

我正在使用多边形（shapefile，*.shp）裁剪光栅图像（Erdas Imagine Images，*.img），下面的示例[Clip a Raster using a Shapefile](http://geospatialpython.com/2011/02/clip-raster-using-shapefile.html#comment-form)。按照示例我有错误：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
IndexError: too many indices 
```

帖子评论里面也报这个错误，但是没有报解决办法。使用此链接[数据](http://geospatialpython.googlecode.com/files/clipraster.zip)可以下载示例中使用的数据。当我使用 16 位图像时，图像是 8 位的。错误的起源可能是这种差异（8bit vs 16 bit）

```
import osgeo.gdal
from osgeo import gdal, gdalnumeric, ogr, osr
import numpy as np

def world2Pixel(geoMatrix, x, y):
    """
    Uses a gdal geomatrix (gdal.GetGeoTransform()) to calculate
    the pixel location of a geospatial coordinate
    (source http://www2.geog.ucl.ac.uk/~plewis/geogg122/vectorMask.html)
    geoMatrix
    [0] = top left x (x Origin)
    [1] = w-e pixel resolution (pixel Width)
    [2] = rotation, 0 if image is "north up"
    [3] = top left y (y Origin)
    [4] = rotation, 0 if image is "north up"
    [5] = n-s pixel resolution (pixel Height)

    """
    ulX = geoMatrix[0]
    ulY = geoMatrix[3]
    xDist = geoMatrix[1]
    yDist = geoMatrix[5]
    rtnX = geoMatrix[2]
    rtnY = geoMatrix[4]
    pixel = np.round((x - ulX) / xDist).astype(np.int)
    line = np.round((ulY - y) / xDist).astype(np.int)
    return (pixel, line)

inFile = 'C:\\myimage.img'
poly = "C:\\ClipArea.shp"

# Open the image as a read only image
ds = osgeo.gdal.Open(inFile,gdal.GA_ReadOnly)
# Check the ds (=dataset) has been successfully open
# otherwise exit the script with an error message.
if ds is None:
    raise SystemExit("The raster could not openned")
# Get image georeferencing information.
geoMatrix = ds.GetGeoTransform()
ulX = geoMatrix[0]
ulY = geoMatrix[3]
xDist = geoMatrix[1]
yDist = geoMatrix[5]
# Get image georeferencing information.
geoMatrix = ds.GetGeoTransform()
ulX = geoMatrix[0]
ulY = geoMatrix[3]
xDist = geoMatrix[1]
yDist = geoMatrix[5]
# open shapefile (= border of are of interest)
shp = osgeo.ogr.Open(poly)
if not len(shp) is 1:
    print "The shapefile with more than 1 record"
    sys.exit(-1)
source_shp = ogr.GetDriverByName("Memory").CopyDataSource(shp, "")
# Create an OGR layer from a boundary shapefile
source_layer = source_shp.GetLayer(0)
# Convert the layer extent to image pixel coordinates
minX, maxX, minY, maxY = source_layer.GetExtent()
ulX, ulY = world2Pixel(geoMatrix, minX, maxY)
lrX, lrY = world2Pixel(geoMatrix, maxX, minY)
# Calculate the pixel size of the new image
pxWidth = int(lrX - ulX)
pxHeight = int(lrY - ulY)

# Load the source data as a gdalnumeric array
srcArray = gdalnumeric.LoadFile(inFile)
clip = srcArray[:, ulY:lrY, ulX:lrX]

**Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
IndexError: too many indices** 
```

# android - 相对布局重叠

> ID：13416767
> 
> 赞同：0
> 
> 时间：2012-11-16T12:40:04.480
> 
> 标签：android, android-layout

我有一个布局问题。我已经尝试了好几个小时才能让它正确，但我无法弄清楚。

真的应该很简单。

我有一个看起来像这样的布局： 固定在屏幕上的是页眉和页脚，在它们之间有一个显示一些信息的滚动视图和一个按钮。

我只希望页眉、按钮和页脚是固定的，并且信息尽可能好地填充屏幕的其余部分。

我目前的解决方案几乎可以工作，问题是信息和按钮重叠（按钮在顶部）。信息只有在与页脚重叠时才会开始滚动。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/wrap_main" >

   <include
      android:id="@+id/in_header"
      layout="@layout/header" />

    <RelativeLayout
        android:id="@+id/body"
        style="@style/wrap_body_with_footer_style"
        android:layout_below="@id/in_header" >

       <!--  This is a scrollable view --> 
       <include  android:id="@+id/job_description"
                 layout="@layout/job_description" />

        <Button android:id="@+id/btn_job_details_pick_up_submit"
                style="@style/btn_confirmation_style"
                android:text="@string/btn_job_details_pick_up_submit"
                android:layout_alignParentBottom="true" />

      </RelativeLayout>

   <include layout="@layout/footer_krest_home_phone" />

</RelativeLayout> 
```

所以 JobDiscription 和 Button 重叠。

有任何想法吗？

谢谢大家。

编辑：有人在评论中提到 LinearLayouts。我确实尝试过使用 LinearLayouts，但我得到的效果是信息而不是收缩，而是按下按钮，因此它不再完全可见。如果您有解决方案来阻止这种下垂效果，我很乐意更改为 LinearLayouts。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T12:14:32.297

正如评论中已经讨论的那样，我还建议将 job_description 放在 btn_job_details_pick_up_submit 之上，并带有`android:layout_above="@id/btn_job_details_pick_up_submit"`.

*上面*并不意味着在某物的顶部，它将视图的底部与另一个视图的顶部对齐。

# visual-studio-2010 - C# Selenium WebDriver - FirefoxDriver 错误：无法在 45000 内启动套接字

> ID：13416768
> 
> 赞同：4
> 
> 时间：2012-11-16T12:40:05.940
> 
> 标签：visual-studio-2010, selenium, selenium-webdriver

当我尝试使用 Firefox 浏览器运行 selenium c# webdriver 脚本时，出现以下异常。

```
OpenQA.Selenium.WebDriverException was unhandled by user code
  HResult=-2146233088
  Message=Failed to start up socket within 45000
  Source=WebDriver
  StackTrace:
       at OpenQA.Selenium.Firefox.Internal.ExtensionConnection.ConnectToBrowser(Int64 timeToWaitInMilliSeconds) in 
```

两天前相同的脚本运行良好，不知道为什么它现在失败了。

*   我已将 selenium DLL 直接添加到我的项目中，并且没有 NUGETS [不知道它们是什么]
*   我尝试查看 netstat，但看不到为 45000 运行的任何端口 cmd> netstat -abno | 查找 /n /i "45000"
*   我尝试删除整个自动化框架套件并从 SVN 中签出代码。没有工作
*   我删除了 firefox 配置文件，卸载并安装了新的 firefox 配置文件。没有帮助。

突然之间导致此错误的原因令人惊讶，几个月来我一直在运行这些脚本并且工作正常。相同的“解决方案”也适用于不同的 PC 以及 firefox，并在我机器的 chrome 浏览器中运行。

PS - 我正在使用 selenium 2.23，并且认为我不需要升级版本，因为相同的脚本在不同的机器上可以完美运行。

您能否让我知道我可以尝试解决此问题的任何替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:44:07.397

我遇到了同样的问题，并通过`Selenium`使用`NuGet`.

我建议您`NuGet`以这种方式添加`Visual Studio`和添加`Selenium`软件包，它可能会为您解决问题。

我也有类似的问题`Chrome`和`IE`驱动程序`Selenium`，这些问题无法通过，我通过从[Selenium](http://seleniumhq.org/download/)站点`NuGet`下载最新版本解决了这里的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:41:27.157

您需要使用与 selenium IDE 匹配的 Firefox 版本。

您可能需要降级 Firefox 或升级 selenium IDE，例如 Arran 评论。

我遇到了同样的问题，因为我有 selenium 1.9 和 Firefox 17，但是这个版本的 ide 必须发布：

[硒发行说明](http://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)

1.10.0（待发布） 新增 - 增加了对 Firefox 16 和 17 的支持

1.9.1 新增 - 增加了对 Firefox 15 的支持

1.9.0 新 - 增加了对 Firefox 14 的支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:19:19.347

我有同样的问题并通过将我的 Selenium 版本更新到 2.31 然后重新安装 firefox 来解决它，因为它位于 Program Files (x86)/Firefox **3.6** / 中（我之前总是升级它并且它的位置自 3.6 版本以来没有改变） . 重新安装并重新启动后一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:21:33.847

如果通过 NuGet 卸载所有 selenium 组件（RC、Support、WebDriver、WebDriverBackedSelenium）并通过 NuGet 重新安装，则问题可以解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T14:16:26.593

我的问题被解决了

*   将测试项目直接复制几个级别
*   进入新的解决方案
*   不再在目录连接下。

当在一个文件夹中工作的相同代码和相同项目在另一个文件夹中不起作用时，我知道有些事情发生了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-19T05:06:03.030

删除当前添加到项目中的 webdriver dll 并从 Nuget 安装新的 dll。我遇到了同样的错误，我已经将 Firebug 添加到了 firefox，或者它可能已更新，因此旧版本的 dll 不支持。

# php - 从 URL 中删除扩展名不起作用

> ID：13416769
> 
> 赞同：0
> 
> 时间：2012-11-16T12:40:09.393
> 
> 标签：php, .htaccess

我在下面使用**htaccess**从 URL中删除**.php**但它不起作用。

`http://www.me.com/index.php`应该读`http://www.me.com/index`

有什么理由吗？

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

我也看了这些例子，但没有运气：

[1](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/) - [2](http://www.daniweb.com/web-development/php/threads/247708/remove-.php-from-urls-wth-.htaccess-file) - [3](https://stackoverflow.com/questions/4588022/htaccess-to-remove-php-extension-godaddy)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:43:30.840

我认为您错过了这一点-它不会更改/重写 URL-它会添加`.php`到您请求的 URL，因此当您请求`http://www.example.com/index`它时，它会检查请求的文件名不是目录 ( `!-d`)，然后检查是否存在有效的 PHP 文件 ( `-f`)。然后重写请求（不是 URL）来请求`index.php`文件。

从[文档中`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)这是描述

> 提供基于规则的重写引擎来动态重写请求的 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:33:45.787

我用这个`.htaccess`

```
AddDefaultCharset utf-8
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

DirectoryIndex index.php

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)/([^/]+)?$ index\.php?page=$1&s=$2&o=$3 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)?$ index\.php?page=$1&s=$2 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/?$ index\.php?page=$1 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})?$ index\.php?page=$1 [L]

ErrorDocument 404 /404 
```

重命名三个参数

*   第一个是页面
*   第二个是
*   第三个是o

这是为了避免在我的 URL 中使用`?`and`&`然后我这样调用我的页面

```
http://testsite/page/s/o 
```

如果你这样做`print_r($_REQUEST)`，它会给你这个

```
Array(
page => page
s    => s
o    => o
) 
```

**为避免扩展**，我使用以下机制

```
$file = $_REQUEST['page'] . ".php";
if (file_exists('inc/' . $file)) {
    include('inc/' . $file);
} 
```

希望它也对你有用

# python - 如何在 flask-sqlalchemy 中使用反射/自动加载

> ID：13416774
> 
> 赞同：6
> 
> 时间：2012-11-16T12:40:27.787
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在一个简单的测试应用程序中尝试 flask-sqlalchemy。我正在运行 SQL 服务器，我可以使用 SQLalchemy 从 Flask 连接到，如下所示：

```
from flask import render_template
from app import app, db

@app.route('/')
@app.route('/index')
def index():

    people = list(db.session.execute("select top 10 * from people where ppl_username IS NOT NULL")) 
```

但是，我也想使用 SQL 伪语言和 SQLalchemy 的 ORM 部分进行查询。因为这是一个现有数据库，我不想编写自己的类并*生成*数据库，我想反映现有数据库并以这种方式访问​​它。我[在 API 文档中找到了 reflect 方法](http://packages.python.org/Flask-SQLAlchemy/api.html?highlight=reflect#flask.ext.sqlalchemy.SQLAlchemy.reflect)，但我不知道如何（以及在​​哪里）使用它。

除了想知道如何做到这一点；我也想知道：

*   数据库反射会发生在每个请求上还是仅在应用程序启动时发生？（这是一个大数据库，所以每个请求都会成为一个阻碍）
*   是否可以从数据库中为类生成代码并将它们保存以备后用，就像 Django 的 inspectDB() 一样？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:30:52.417

是的，一切皆有可能。我使用[sqlautocode](http://turbogears.org/2.1/docs/main/Utilities/sqlautocode.html)来做你所说的。它生成 sqlalchemy 代码以在 sqlalchemy 中创建表/列并将它们放在一个文件中。只需安装它，然后从命令行运行它。

这会从我的 webapp 的现有 mysql 数据库生成模型 sqlalchemy 模型，并创建一个文件 alchemy_models.py：

`sqlautocode mysql://<dbuser>:<pass>@localhost:3306/<dbname> -o alchemy_models.py`

注意 mysql:// 位只是在 SA 中生成连接的语法

希望这可以帮助

# c# - Windows 8 应用程序的语言..？

> ID：13416775
> 
> 赞同：-3
> 
> 时间：2012-11-16T12:40:28.873
> 
> 标签：c#, javascript, windows-8

我对 C# 非常熟悉。现在我必须做基于 Windows 8 应用程序的新项目。

我已经浏览了[这个网站](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br211386.aspx)。这可以通过两种方式完成 - 使用 javascript/HTML 和 C#/XAML。我无法判断我必须遵循哪一个。

有人可以建议我 c# 或 javascript 更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:45:56.567

这完全取决于您是要制作桌面应用程序还是严格意义上的 Metro 应用程序。此外，像这样的固执己见的问题并不适合社区。因此，请在询问他们时保持警惕。

就个人而言，我喜欢 c#，但这是一种意见，因此这个问题不可能以绝对权威的方式回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:45:28.323

如果您已经了解 C#，我建议您继续学习。Javascript有时可能很古怪。

# mysql - MySQL存储函数中的多个结果行

> ID：13416776
> 
> 赞同：0
> 
> 时间：2012-11-16T12:40:29.303
> 
> 标签：mysql, stored-procedures, stored-functions

我编写了一个计算价格的 MySQL 函数：

```
CREATE DEFINER=`[USER]`@`[HOST]` FUNCTION `calculatePrice`(id INT) 
RETURNS DECIMAL(8,2) DETERMINISTIC
BEGIN
    IF id=10 THEN 
        RETURN 899;
    ELSE
        RETURN 710;
    END IF;
END 
```

这可以正常工作，但是在价格旁边，我想添加一个包含价格原因的字符串。

该函数应该像这样使用：

```
SELECT id, calculatePrice(id).price AS price, calculatePrice(id).reason AS reason FROM person; 
```

这对 MySQL 是否可行，它是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:45:04.250

取两个参数怎么样，值将取决于第二个参数，例如

```
CREATE DEFINER=`[USER]`@`[HOST]` FUNCTION `calculatePrice`(id INT, isPrice INT) 
RETURNS DECIMAL(8,2) DETERMINISTIC
BEGIN
    IF isPrice = 1 THEN -- for price
        IF id = 10 THEN 
            RETURN 899;
        ELSE
            RETURN 710;
        END IF;
    ELSE                -- for reason
        IF id = 10 THEN 
            RETURN 100;
        ELSE
            RETURN 200;
        END IF;
    END IF
END 
```

并称它为

```
SELECT  id, 
        calculatePrice(id, 1) AS price, 
        calculatePrice(id, 0).reason AS reason 
FROM person; 
```

但如果您不喜欢这个想法，只需制作两个适合您需求的单独功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:46:06.167

您可以 1）将返回类型更改为 varchar 2）返回并连接价格和描述

使用函数 CONCAT(price,',',desc)

# google-app-engine - 在本地测试谷歌云端点

> ID：13416777
> 
> 赞同：4
> 
> 时间：2012-11-16T12:40:38.347
> 
> 标签：google-app-engine, google-cloud-endpoints

我一直在尝试使用谷歌云端点在应用程序引擎中编写一些代码，并且我还注册了受信任的测试程序，但我的请求仍在等待中，所以据我所知，我只能在端点托管时访问它们apppot 域，所以有什么方法可以在本地使用端点，以便我可以继续开发，直到我的请求被考虑为云端点作为受信任的测试人员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T18:14:03.650

这没有公开记录（所有文档都与受信任的测试人员共享），但您可以使用本地开发服务器进行本地测试（在当前 SDK 中使用 Java，在与测试人员共享的 SDK 中使用 Python）。

如果您使用的是 Java，您可以查看[codelab](https://tictactoe-codelab.appspot.com)中的说明。

# matlab - 向 Vector 添加元素？

> ID：13416780
> 
> 赞同：0
> 
> 时间：2012-11-16T12:40:44.460
> 
> 标签：matlab, vector

我正在将 MatLab 中的一个函数转换为 C++ 并遇到这个（在 matlab 中）：

```
 f = blocks(min:max,1:len); 
```

具有值：**最小值 = 153，最大值 = 205**

它是一个二维向量。那么上面的代码行是否创建了一个新的二维向量并将“块”内的所有块复制到新向量中？

所以本质上，它本质上是一个循环，从 153 开始，到 250 结束，并将每个块复制到新向量？

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:52:51.813

该语句获取矩阵之间的行`min`和矩阵之间的`max`列`1`，并将它们分配给.`len``blocks``f`

让我们试一试：

```
M = magic(5) % gives

M =

    17    24     1     8    15
    23     5     7    14    16
     4     6    13    20    22
    10    12    19    21     3
    11    18    25     2     9

M2 = M(2:4,1:3) % rows 2 to 4, columns 1 to 3

M2 =

    23     5     7
     4     6    13
    10    12    19 
```

我不太了解 C++，但可能你需要 2 个`for`循环来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:48:53.703

如果`blocks`是 2d 矩阵，则该代码提取它的子矩阵并将其分配给变量`f`。提取的子矩阵是 row `min`to row`max`和 column `1`to column `len`。

有关更多信息，您应该阅读[此](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html;jsessionid=94401003a394cb167adbe8819636)内容。

如果您想在循环中执行此操作（在 matlab 中效率不高，但我不知道您将如何在 C++ 中解决它），它与以下内容相同：

```
f = NaN(max-min+1,len); % allocate memory for f
for rowi=1:(max-(min-1))
    f(rowi,:) =  blocks(rowi + min-1, 1:len);
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:14:51.620

那行代码将元素 [153,1] 和 [205,len] 之间的子矩阵的元素复制`blocks`到新创建的矩阵`f`中。移植到 C 中，这将是：

```
int f[max-min+1][len]; // or float or whatever
for(int ii=0; ii<=max-min; ii++)
    for(int jj=0; jj<len; jj++)
        f[ii][jj] = blocks[ii+min][jj]; 
```

我现在假设 min 和 max 包含从 0 开始计数的索引（即：152 和 204），而不是 1，就像你在 matlab 中所做的那样。

**更新：** 否则，性能更高（因为只有一个复制 while 行的 for 循环）

```
for(ii=0; ii<=max-min; ii++)
    memcpy( &f2[ii][0], &blocks[min+ii][0], sizeof(int)*(len) ); 
```

# c# - 将用户输入限制为 wpf 数据网格中的正整数

> ID：13416790
> 
> 赞同：1
> 
> 时间：2012-11-16T12:41:18.080
> 
> 标签：c#, wpf, datagrid

我有一个数据网格，其中我有一个非整数类型的数量字段。现在我想限制我的用户只输入正整数。我不想要处理数据网格键事件输入的解决方案。有什么建议么？

这是我正在使用的转换器

```
public class ValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        { return value; }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (!OnlyPositiveIntergerAllowed(value.ToString()))
            {
                string s = Regex.Replace(value.ToString(), @"[^0-9]+", string.Empty);

                if(s=="")
                return 0;
                else
                    return s;

            }
           if (value is string && (string)value == "")
            {
                return 0;
            }

            return value;

        }
        private static bool OnlyPositiveIntergerAllowed(string text)
        {
            var regex = new Regex("[^0-9]+"); //regex that matches disallowed text
            return !regex.IsMatch(text);
        }
} 
```

注意：它工作正常（即如果 123dasd。它在失去焦点 123 上转换），但我允许用户输入（dasd。）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:31:26.280

您寻求的解决方案称为验证。

搜索**WPF 验证**将提供大量链接，这是一个看起来不错的链接：[http ://wpftutorial.net/DataValidation.html](http://wpftutorial.net/DataValidation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:45:47.820

对于这种情况，`DataGridTemplateColumn`您可以使用`IntegerUpDown`扩展[WPF 工具包。](http://wpftoolkit.codeplex.com/)

例子：

```
 <DataGridTemplateColumn Header="Amount">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <toolkit:IntegerUpDown 
                                    Minimum="0"
                                    Value="{Binding Amount}"
                            />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

您也可以使用[DecimalUpDown](http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown)。

# java - 批量 API 错误：标准 Salesforce 对象上的 Upsert

> ID：13416791
> 
> 赞同：1
> 
> 时间：2012-11-16T12:41:18.830
> 
> 标签：java, salesforce, bulkinsert, bulkloader, bulk-load

我们正在使用 Bulk Api 来更新自定义和标准 Salesforce 对象的记录。它适用于自定义对象，但是当我们尝试对标准 Salesforce 对象执行 Upsert 操作时说：帐户，指定无效外部 ID 的错误指定为：

> [AsyncApiException exceptionCode='InvalidJob' exceptionMessage='提供的字段名称，名称与外部 ID、Salesforce Id 或客户的索引字段不匹配']

我们通过 java 代码提供 Name 作为外部 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:15:38.433

`Account.Name`不是外部 ID 字段！两者都不是`AccountNumber`。我猜你很困惑，因为它可以用作“导入我的帐户和联系人”等中重复数据删除的匹配字段？

这是我的结果，我不认为你会得到不同的结果：

```
Schema.DescribeFieldResult f = Account.Name.getDescribe();
System.debug(f.isExternalID());  // false
System.debug(f.isUnique());      // false
System.debug(f.isIdLookup());    // false 
```

您需要创建自己的分机。ID。如果你想在 upserts 中使用它（并用数据填充它）。在我的组织中，我们有自定义`Account_Number__c`...

# c - 如何使用 strtok 拆分字符串和新行

> ID：13416792
> 
> 赞同：2
> 
> 时间：2012-11-16T12:41:18.300
> 
> 标签：c, string, token

我正在尝试拆分我的字符串和 (\n) 新行，并希望在没有 \n 的情况下获取新字符串。我的代码如下。谢谢。

```
token = strtok(NULL,"") 
```

上面的代码片段将存储“一些字符串和\n”，因为我只需要“一些字符串”。

我的数据看起来像这样。

```
1,v1,p1,182,1665,unkn 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:26:22.327

如果您的数据看起来像这样

```
char line[] = "1,v1,p1,182,1665,unkn\n"; 
```

你可以做这样的事情（在C中）

```
char* p = line + strlen(line) - 1;
for (;*p != ','; --p) 
{
  ;
}
char* lastword = strtok(p + 1,"\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:34:15.113

如果您所做的只是替换第一个换行符，那么这会好得多：

```
char *tmp = strchr (str, '\n');
if (tmp) *tmp = 0; 
```

如果您要替换字符串中的最后一个换行符，那么这会更好：

```
char *tmp = strrchr (str, '\n');
if (tmp) *tmp = 0; 
```

# emacs - 为 setf 添加新的变量指示符？

> ID：13416796
> 
> 赞同：1
> 
> 时间：2012-11-16T12:41:36.243
> 
> 标签：emacs, lisp, elisp, advising-functions

我认为这在 Common Lisp 中是可能的（通过重载`setf`），但不确定 Emacs Lisp。

我想做的是：

```
(setf (local variable) value) 
```

表单`(local ...)`将调用我编写的一些代码并返回用于设置其值槽的符号。

编辑：从 gv.el 看来，建议似乎`gv-get`可以完成这项工作，但也许有更好的程序呢？

EDIT2：尝试了 Stefan 的建议，关闭，但不好:(

```
(gv-define-setter local (value varname &optional buffer)
  `(with-current-buffer (or ,buffer (current-buffer))
     (setq ,varname ,value))) 
```

扩展为：

```
(let* ((v bar))
 (with-current-buffer (or nil (current-buffer))
  (setq v 42))) 
```

显然，不是我想要的。我试图通过上面提到的建议和 with 来做到这一点`gv-define-expander`，但是引用太多了，我找不到`let`用冗余替换来松散表达式部分的方法。

编辑3：

好的，除非我在范围或变量将设置为的值的评估顺序中严重搞砸了一些东西，这似乎有效：

```
(gv-define-expander local
  (lambda (do &rest args)
    (let ((varname (first args))
          (buffer (or (second args) '(current-buffer)))
          (value (funcall do nil #'identity)))
      `(with-current-buffer ,buffer
         (setq ,varname ,value))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:47:28.290

有`gv-define-expander`, `gv-define-setter`, 和`gv-define-simple-setter`（按使用简单的顺序排列）。

您可能想尝试 100% 保证未经测试的代码（请注意我如何传递`with-current-buffer+setq`to`do`而不是`do`使用虚拟参数调用，以便在与 一起使用时这些东西有机会工作`push`）。

```
(gv-define-expander local
  (lambda (do &rest varname &optional buffer)
    (macroexp-let2 nil b buffer
      (funcall do `(buffer-local-value ',varname ,b)
               (lambda (value)
                `(with-current-buffer ,b
                   (setq ,varname ,value))))))) 
```

# javascript - 如何在 javascript 中从 imageData 生成图像？

> ID：13416800
> 
> 赞同：45
> 
> 时间：2012-11-16T12:41:54.193
> 
> 标签：javascript, canvas, putimagedata

我想知道是否有任何方法可以从之前从画布元素获得的 imageData 创建新图像？

我已经寻找解决方案，但他们似乎都将结果绘制到画布上。因此，如果可能的话，基本上我需要一种将 ImageData 对象直接转换为 Image 的方法。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-12-19T19:17:58.210

None of the previous answers provide an answer to the question as it was presented in the subject - getting an Image from ImageData. So here's a solution.

```
function imagedata_to_image(imagedata) {
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    canvas.width = imagedata.width;
    canvas.height = imagedata.height;
    ctx.putImageData(imagedata, 0, 0);

    var image = new Image();
    image.src = canvas.toDataURL();
    return image;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-16T12:49:22.207

You can use **toDataURL** method in Canvas. It makes a image data as Data URI.

```
var canvas = document.createElement("canvas");
canvas.width = 100;
canvas.height = 100;
var ctx = canvas.getContext("2d");
ctx.fillStyle = "red";
ctx.fillRect(0, 0, 100, 100);

var img = document.createElement("img");
img.src = canvas.toDataURL("image/png");
document.body.appendChild(img); 
```

If you want to know user's browser supports Data URI Scheme, You can use this function.

```
function useSafeDataURI(success, fail) {
    var img = document.createElement("img");

    img.onerror = function () {
        fail();
    };
    img.onload = function () {
        success();
    };

    img.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="; // insert a dot image contains 1px.
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-16T12:45:00.130

假设这是你的画布

```
<canvas id='mycanvas'></canvas> 
```

您可以使用

```
var imgData = document.getElementById('mycanvas').toDataURL(); 
```

然后，您可以通过更改其来源将其放入常规图像标签中

```
<img id='myimage'/>

document.getElementById('myimage').src = imgData; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:45:01.630

许多现代浏览器都支持数据 URI 方案。

如果您有图像数据，则可以使用 JavaScript 设置 img 元素的 src 属性。

看下面的例子： [http ://www.websiteoptimization.com/speed/tweak/inline-images/](http://www.websiteoptimization.com/speed/tweak/inline-images/)

# jquery - 从 html 输出中删除 span

> ID：13416803
> 
> 赞同：0
> 
> 时间：2012-11-16T12:42:11.760
> 
> 标签：jquery, html, jquery-mobile

我想`span`从 html 输出中删除标签。

假设我有一个`template`包含 html 输出的变量。

```
<li id="GRP_1" data-role="list-divider">Group 1<span id="121" onclick="deleteGroup(this.id);" class="ui-icon ui-icon-delete ui-icon-shadow li-divider-icon-right">&nbsp;</span></li> 
```

在上面的 html 输出中，我想删除/隐藏 span 标签。如果可能的话，给我一个隐藏和删除跨度标签的解决方案。[在这里](http://jsfiddle.net/krrr25/GWzPp/)找到小提琴示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:44:22.067

```
$('#121').hide();

$('#121').remove(); 
```

我建议您将 id 从数字更改为字母或字母+数字。或者为您的跨度添加一个独特的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:48:41.323

你可以通过许多不同的方式来做到这一点。

按编号：

`$('#121').hide();`或者`$('#121').remove();`

通过 html 元素：

`$('span').hide();`或者`$('span').remove();`

并按班级：

`$('ui-icon.ui-icon-delete.ui-icon-shadow.li-divider-icon-right').hide();`

或者

`$('ui-icon.ui-icon-delete.ui-icon-shadow.li-divider-icon-right').remove();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:45:38.383

```
$('li span').remove();

$('li span').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:00:45.460

还：

```
$('#GRP_1').find('span').hide();
$('#GRP_1').find('span').show(); 
```

# windows - 从 UMDF 驱动程序向内核模式驱动程序发送 IRP 读/写数据包

> ID：13416805
> 
> 赞同：1
> 
> 时间：2012-11-16T12:42:22.357
> 
> 标签：windows, driver, umdf, irp

是否可以创建 IRP 读/写数据包并将其从 UMDF 驱动程序发送到代表设备的内核模式驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:31:26.067

可以通过调用 IO 目标的 FormatRequestForRead/FormatRequestForWrite 方法并发送请求。例如，请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/ff559236(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559236(v=vs.85).aspx)。

# mercurial - 包含非连续修订的分支

> ID：13416809
> 
> 赞同：0
> 
> 时间：2012-11-16T12:42:38.260
> 
> 标签：mercurial, branch, branching-and-merging

假设我有一个没有像这样的分支的修订历史：

```
1
2
3
4 
```

现在我想在我的存储库中创建一个带有修订版`1`和的新分支`3`，而不是修订版`2`或`4`。`2`修订版/中没有冲突的更新`3`。有没有办法做到这一点。我的最终存储库应该有两个这样的分支：

```
4
3
2  3
| /
|/
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:45:09.880

如果您已经将此 repo 发布到公共位置（或任何开发人员克隆了您的 repo），您可以使用 和 的组合来执行此`graft`操作`backout`。

该`graft`命令会将提交从一个分支复制到另一个分支。该`backout`命令将反转先前提交所做的更改。

以下示例应复制您的情况：

```
hg init test
echo test>>test\test.txt && hg -R test ci -Am "baseline"
echo test>>test\test.txt && hg -R test ci -Am "changeset 1"
echo test>>test\test.txt && hg -R test ci -Am "changeset 2"
echo new>>test\new.txt   && hg -R test ci -Am "changeset 3"
echo test>>test\test.txt && hg -R test ci -Am "changeset 4"
hg -R test backout -r 3
hg -R test ci -m "backed out changeset 3"
hg -R test update -r 1
hg -R test graft -r 3
hg -R test glog --template "{desc}\n" 
```

这将创建一个新的匿名分支，其中包含您想要的更改，并且还会从原始分支中删除 rev 3 中的更改，而无需修改存储库的历史记录。

这将导致以下日志：

```
@  changeset 3
|
| o  backed out changeset 3
| |
| o  changeset 4
| |
| o  changeset 3
| |
| o  changeset 2
|/
o  changeset 1
|
o  baseline 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:46:18.737

因为你没有提到命名分支，所以我们使用匿名分支

前：

```
>hg glog --template "{rev}:{desc}\n"
@  3:Added d.txt
|
o  2:Added c.txt
|
o  1:Added b.txt
|
o  0:Initial commit

>hg rebase -s 2 -d 0

>hg glog --template "{rev}:{desc}\n"

@  3:Added d.txt
|
o  2:Added c.txt
|
| o  1:Added b.txt
|/
o  0:Initial commit

>hg rebase -s 3 -d 1

>hg glog --template "{rev}:{desc}\n"
@  3:Added c.txt
|
| o  2:Added d.txt
| |
o |  1:Added b.txt
|/
o  0:Initial commit 
```

在命名分支的情况下，您必须在第一次变基之前`hg branch BRANCHNAME`，`hg ci -m "Creating branch"`在变基中使用 -d 4 而不是 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:23:13.657

从您的评论中，听起来您正在尝试完成所谓的“挑选”：有选择地将一些变更集**复制**到另一个分支，而不将它们视为合并。如果那是正确的，您可以通过首先创建一个普通的修订分支，然后将要复制的变更集移植到它上面。命令**[hggraft](http://www.selenic.com/mercurial/hg.1.html#graft)**就是为此目的而设计的。

以下是它如何与命名分支一起工作，`selective`. 如果您想要未命名的分支，只需省略分支创建。

```
hg update -r 1
hg branch selective
hg graft -r 3 
```

结果将如下所示（我希望这是您想要的）：

```
4
|
3
|  5 = 3
2 /
|/
1
|
0 
```

默认情况下，graft 将从源变更集中复制用户、日期和描述。新修订版将具有与修订版 3 相同的效果，但将具有新的数字和哈希 id。Mercurial 不会知道修订版 3 和修订版 5 之间的关系。

没有办法选择性地导入一些变更集并将操作视为合并：合并总是统一完整的（线性）历史直到被合并的点。

# c# - 从 3 层架构中的存储过程中获取 C# 代码中的 scope_identity 值

> ID：13416811
> 
> 赞同：1
> 
> 时间：2012-11-16T12:42:43.167
> 
> 标签：c#, sql-server, scope-identity

在 C# 代码中插入数据后，我需要`scope_identity()`从存储过程中获取值。

在这里，我使用的是 3 层架构。请任何人帮助我

```
protected void Submit_Click(object sender, EventArgs e)
{
    this.CreateUserGroups(strGroupName, strDescription, strGroupType);
}

protected void CreateUserGroups(string strGroupName, string strDescription, string strGroupType)
{
    string strReturn = string.Empty;
    strReturn = objUser.SaveCreateGroups(strGroupName, strDescription, strGroupType);
}

public string SaveCreateGroups(string strGroupName, string strDescription, string strGroupType)
{
    try
    {
        DataManager.ParamBuilder param = new DataManager.ParamBuilder();
        if (strGroupName != string.Empty)
            param.AddParam(System.Data.SqlDbType.VarChar, "@c_groupname", strGroupName);
        else
            param.AddParam(System.Data.SqlDbType.Int, "@c_groupname", DBNull.Value);

        if (strDescription != string.Empty)
            param.AddParam(System.Data.SqlDbType.VarChar, "@c_description", strDescription);
        else
            param.AddParam(System.Data.SqlDbType.Int, "@c_description", DBNull.Value);

        if (strGroupType != string.Empty)
            param.AddParam(System.Data.SqlDbType.Int, "@n_grouptype", strGroupType);
        else
            param.AddParam(System.Data.SqlDbType.VarChar, "@n_grouptype", DBNull.Value);

        String strIsUserExitsInGroup = DataManager.ExecuteScalar("sp_create_user_groups", param.Parameters, true).ToString();

        return strIsUserExitsInGroup;
    }
    catch (Exception e)
    {
        throw new Exception(e.ToString());
    }
}

public static object ExecuteScalar(string procedureNameOrSql, List<SqlParameter> parameters, bool isStoredProcedure)
{
    object scalarValue;
    using (SqlConnection cn = createConnection())
    {
        SqlCommand cmd = new SqlCommand(procedureNameOrSql, cn);
        if (isStoredProcedure)
            cmd.CommandType = CommandType.StoredProcedure;
        if (parameters != null)
            cmd.Parameters.AddRange(parameters.ToArray());
        scalarValue = cmd.ExecuteScalar();
    }
    return scalarValue;
} 
```

我的存储过程：

```
CREATE Procedure [dbo].[sp_create_user_groups]
  @n_user_group_id int OUTPUT,
  @c_groupname varchar(200),
  @c_description varchar(200),
  @n_grouptype int
As
   Declare @IsGroupNameExists int,        
           @b_active bit

   select @IsGroupNameExists = 0
   set @b_active = 1

BEGIN
IF exists(select top 1 * from gdt_user_groups where c_group_name = @c_groupname)
BEGIN
 select @IsGroupNameExists = 1
END
ELSE
 BEGIN
    SET NOCOUNT ON;
    insert into gdt_user_groups(c_group_name,c_description,n_group_id,b_active,d_modified_dttm,
    d_created_dttm)values(@c_groupname,@c_description,@n_grouptype,@b_active,GETDATE(),GETDATE())
    select @n_user_group_id = SCOPE_IDENTITY();
    select @IsGroupNameExists = 0
 END 

 select @IsGroupNameExists
 END 
```

在这里，我可以在 C# 代码中获取 scope_identity 值。有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:47:31.013

您需要通过输出参数获取值，因此您必须遵循以下链接：
[Get output parameter value in ADO.NET](https://stackoverflow.com/questions/290652/get-output-parameter-value-in-ado-net)
[How to use OUTPUT parameter in Stored Procedure](https://stackoverflow.com/questions/7770924/how-to-use-output-parameter-in-stored-procedure)

> 您只需要创建一个SqlParameter，将Direction 设置为Output，并将其添加到SqlCommand 的Parameters 集合中。然后执行存储过程，获取参数的值。

在您的方法中添加额外参数后添加参数时，请执行以下操作

```
param.AddParam(SqlDbType.Int, "@c_Id", IdValue, ParameterDirection.Output); 
```

然后访问输出参数的值，如下所示：

```
object value = cmd.Parameters["@c_Id"].Value; 
```

**来源：** [获取最近添加的记录](http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record) 代码片段的身份：

```
string query = "AddCategory";
int ID;
string connect = @"Server=.\SQLExpress;Database=Northwind;Trusted_Connection=Yes;";
using (SqlConnection conn = new SqlConnection(connect))
{
  using (SqlCommand cmd = new SqlCommand(query, conn))
  {
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@Category", Category.Text);
    cmd.Parameters.Add("@CategoryID", SqlDbType.Int, 0, "CategoryID");
    cmd.Parameters["@CategoryID"].Direction = ParameterDirection.Output;
    conn.Open();
    cmd.ExecuteNonQuery();
    ID = (int)cmd.Parameters["@CategoryID"].Value;
  }
} 
```

程序...

```
CREATE PROCEDURE AddCategory
  -- Add the parameters for the stored procedure here
  @Category NVARCHAR(15),
  @CategoryID INT OUTPUT
AS
BEGIN
  SET NOCOUNT ON;

  -- Insert statements for procedure here
  INSERT INTO Categories (CategoryName) VALUES (@Category)
  SET @CategoryID = SCOPE_IDENTITY()
END 
```

希望以上参考资料能帮助您更多地了解这一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:48:39.093

阅读这篇文章： http: [//www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record](http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record)

并让您的接受率更高。

# ruby - Ruby 类方法名称中的变量

> ID：13416812
> 
> 赞同：0
> 
> 时间：2012-11-16T12:42:48.577
> 
> 标签：ruby, ruby-on-rails-3

`object.send(invoked_method_name)`非常有用。但是我需要在课堂上这样做，`Model.send(method_name_by_variable)`而这是我做不到的。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:29:32.877

`Model.send(method_name_by_variable)`应该是可能的，如果

*   `method_name_by_variable`是在范围内`Model`

你如何测试它（我`String`在我的例子中使用，`Model`应该是一样的。

**范围**

测试您的方法是否是公共方法：

```
method_name_by_variable = :new
p String.public_methods.include?(method_name_by_variable) #-> true
p 'aa'.public_methods.include?(method_name_by_variable)  #-> false 
```

# asp.net-mvc - 如何在启用延迟加载的情况下使用 Automapper 和 EF4 DbContext 从 ViewModel 更新现有实体

> ID：13416816
> 
> 赞同：7
> 
> 时间：2012-11-16T12:42:51.727
> 
> 标签：asp.net-mvc, entity-framework, lazy-loading, automapper, dbcontext

我正在使用 Automapper 在 Entity 和 ViewModel 对象之间进行映射（双向）。该模型使用 EF4 DbContext POCO，需要启用 LazyLoading（因此需要代理生成）。

我在尝试从视图模型更新现有实体时遇到了问题。当我调用 Mapper.Map(vm, entity) 时，Automapper 会引发异常。我的问题是：您应该如何使用 Automapper 处理 EF 代理对象？

代码看起来（简化）如下：

```
public class MyEntity
{
    public int Id {get;set;}
    public int Name {get;set;}
}

public class ViewModel
{
    public int Id {get;set;}
    public int Name {get;set;}
}

Mapper.CreateMap<MyEntity, ViewModel>();
Mapper.CreateMap<ViewModel, MyEntity>();

public ActionResult Edit(ViewModel vm)
{
    MyEntity entity = db.MyEntities.Find(vm.Id);
    Mapper.Map(vm, entity);
    db.Entry(entity).State = EntityState.Modified;
    db.SaveChanges();
} 
```

当我调用 Mapper.Map(vm, entity) 来更新现有的实体对象时，我得到了异常：

```
'Mapper.Map(viewModel, resultSet)' threw an exception of type 'AutoMapper.AutoMapperMappingException'
base {System.Exception}: {"Missing type map configuration or unsupported mapping.\n\nMapping types:\r\nResultSetView -> ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\r\nSciensus.Applications.ClinicalStudies.Web.Areas.Patient.Models.ResultSetView -> System.Data.Entity.DynamicProxies.ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\n\nDestination path:\nResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\n\nSource value:\nSciensus.Applications.ClinicalStudies.Web.Areas.Patient.Models.ResultSetView"}
Context: {Trying to map ResultSetView to ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2.}
Message: "Missing type map configuration or unsupported mapping.\n\nMapping types:\r\nResultSetView -> ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\r\nSciensus.Applications.ClinicalStudies.Web.Areas.Patient.Models.ResultSetView -> System.Data.Entity.DynamicProxies.ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\n\nDestination path:\nResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2\n\nSource value:\nSciensus.Applications.ClinicalStudies.Web.Areas.Patient.Models.ResultSetView"
StackTrace: "" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T03:41:34.337

我查看了 AutoMapper 源代码：

```
 public TDestination Map<TSource, TDestination>(TSource source, TDestination destination)
    {
        return Map(source, destination, opts => { });
    }

    public TDestination Map<TSource, TDestination>(TSource source, TDestination destination, Action<IMappingOperationOptions> opts)
    {
        Type modelType = typeof(TSource);
        Type destinationType = (Equals(destination, default(TDestination)) ? typeof(TDestination) : destination.GetType());

        return (TDestination)Map(source, destination, modelType, destinationType, opts);
    } 
```

**这个地方出现了问题：**

```
 Type destinationType = (Equals(destination, default(TDestination)) ? typeof(TDestination) : destination.GetType()); 
```

**所以没有问题的变化：**

```
 Mapper.Map(vm, entity,typeof(ViewModel),typeof(MyEntity)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:57:35.133

正如您所怀疑的那样，我相信您遇到了这个异常，因为 AutoMapper 没有为从您的实体`ResultSet_692D75838D4DC59B922F3E88CF1B10516CBF6CD8A32C4BE2F3FCC28CE83F0BD2`派生的延迟加载 ()创建的代理类的映射。`ResultSet`

您可能会尝试以下方法：

```
public ActionResult Edit(ViewModel vm)
{
    // This returns the entity proxy
    MyEntity oldEntity = db.MyEntities.Find(vm.Id);
    // i.e. Create a 'plain' Entity, not a proxy.
    MyEntity newEntity = Mapper.Map<ViewModel, MyEntity>(vm);

    db.Entry(oldEntity).CurrentValues.SetValues(newEntity);
    // I don't think you need this now.
    // db.Entry(entity).State = EntityState.Modified;
    db.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:18:39.157

所以我最终做的是滚动我自己的 IMappable 接口和一个简单的通用映射实用程序来支持双向映射。根据映射的复杂性，所需的代码最终可能少于 Automapper。下面的代码：

```
public interface IMappable<TEntity, TViewModel>
{
    void Map(TEntity source, TViewModel target);
    void Map(TViewModel source, TEntity target);
}

public class ModelMapper<TEntity, TViewModel> where TEntity : new() where TViewModel : IMappable<TEntity, TViewModel>, new()
{
    public static TViewModel Map(TEntity source)
    {
        TViewModel target = new TViewModel();
        Map(source, target);
        return target;
    }

    public static TEntity Map(TViewModel source)
    {
        TEntity target = new TEntity();
        Map(source, target);
        return target;
    }

    public static void Map(TEntity source, TViewModel target)
    {
        new TViewModel().Map(source, target);
    }

    public static void Map(TViewModel source, TEntity target)
    {
        new TViewModel().Map(source, target);
    }
} 
```

我的 ViewModel 为尽可能多的 Entity 类实现了 IMappable，实现了一个 Map 方法来处理每个方向的数据传输：

```
public class AddressView : IMappable<Address, AddressView>
{
    public long AddressId { get; set; }
    ...

    #region "IMappable members"
    public void Map(Address source, AddressView target)
    {
        target.AddressId = source.AddressId;
        target.City = source.City;
        target.FullAddress = source.FullAddress;
        if (source.CountryId.HasValue)
        {
            target.Country = source.Country.Name;
            target.CountryId = source.CountryId;
        }
        target.District = source.District;
        target.Postcode = source.Postcode;
        target.StreetName = source.StreetName;
    }

    public void Map(AddressView source, Address target)
    {
        target.AddressId = source.AddressId;
        target.City = source.City;
        target.CountryId = source.CountryId;
        target.District = source.District;
        target.Postcode = source.Postcode;
        target.StreetName = source.StreetName;
    }
    #endregion
} 
```

# c# - 如何在 c# WPF WebBrowser 控件的 mshtml.HTMLDocument 中选择表格单元格？

> ID：13416817
> 
> 赞同：1
> 
> 时间：2012-11-16T12:42:53.227
> 
> 标签：c#, facebook, wpf-controls

我会在 mshtml.HTMLDocument 中的 WPF Web 浏览器控件中进行选择。但是，我很痛苦。如果用户点击表格，我会知道选择单元格。如何知道表格中的选择单元格。

此代码我确认该表结构。

```
 IHTMLElementCollection tablecollection = doc.getElementsByTagName("table");
       foreach (IHTMLElement table in tablecollection)
       {
           System.Windows.MessageBox.Show(table.outerHTML);
       } 
```

# php - mysql的消息框设计

> ID：13416820
> 
> 赞同：1
> 
> 时间：2012-11-16T12:43:17.047
> 
> 标签：php, mysql, messagebox

我需要为用户登录系统创建一个消息框。现在我有可以登录并执行许多功能的用户。

用户表是这样的“

```
+-----+------+--------+
| uid | name | family |
+-----+------+--------+ 
```

现在我也需要创建一个消息框来显示用户消息。他们可以查看他们发送的内容或收到的内容。

我可以像这样创建表：

```
+-----------+-----+-------------+------+
| messageid | uid | messagetext | type |
+-----------+-----+-------------+------+ 
```

`messageid`是自动递增的整数类型，`type`是一个布尔变量，如果为 0，则消息在接收框中。如果是 1 - 消息在发送框中，但我的问题出在哪里？

我认为，如果我们对这个`messageid`字段进行自动增量，那么这个 messageid 将来会有很大的数字。出于这个原因，我认为这种设计可能是错误的......我的用户消息框有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:49:02.557

对于消息，它就像：如果是用户对用户的交互，那么：

```
+-----------+------------+--------------+-------------+--------------+------+
| messageid | sender_uid | receiver_uid | messagetext | message_time | type |
+-----------+------------+--------------+-------------+--------------+------+ 
```

否则结构很好。

由于大量的messageid，不会有任何问题。采取适当的数据类型。

# java - primefaces schedule：编辑移动/调整事件侦听器的事件详细信息

> ID：13416824
> 
> 赞同：0
> 
> 时间：2012-11-16T12:43:29.870
> 
> 标签：java, jsf-2, primefaces

我正在摆弄[primefaces 展示中的计划演示代码](http://www.primefaces.org/showcase/ui/schedule.jsf)（使用版本 3.3.1），并且我需要在移动/调整大小事件侦听器上调整计划的一些值。（我将使用“计划项目”来提及数据模型对象“计划的事件”，并为 API 触发的用户交互响应保留术语“事件”）。

因此，每当用户在界面上移动/调整计划项目的大小时，注册的事件侦听器就会触发，显示当天增量、分钟增量消息，就像展示示例一样。

但我需要对项目做一些修改，即：

a）确保计划的项目不在周末开始/结束（也是假期，但让我们忽略这一点）。将项目的开头/结尾向后或向前移动到前一个工作日（如果它从周末开始）或移动到下一个工作日（如果它在周末结束）

b) 使项目捕捉到最接近的一刻钟。

c) 确保预定项目不在上午 700 点之前或下午 2100 点之后开始/结束。如果超出这些限制，则将开始/结束时间捕捉到这些限制。

并在用户界面上显示产生的变化。但我无法在事件侦听器方法期间编辑数据模型。

这是时间表标签：

```
 <p:schedule value="#{scheduleController.eventModel}"
                        widgetVar="myschedule" view="agendaWeek" allDaySlot="false"
                        slotMinutes="15" firstHour="7" showWeekends="FALSE"
                        leftHeaderTemplate="prev,next" rightHeaderTemplate=""
                        minTime="7am" maxTime="21pm" timeFormat="dd/MM H:mm{ - dd/MM H:mm}"
                        axisFormat="HH" timeZone="#{rotulo.timeZone}">

                        <p:ajax event="dateSelect"
                            listener="#{scheduleController.onDateSelect}"
                            update="eventDetails" oncomplete="eventDialog.show()" />
                        <p:ajax event="eventSelect"
                            listener="#{scheduleController.onEventSelect}"
                            update="eventDetails" oncomplete="eventDialog.show()" />
                        <p:ajax event="eventMove"
                            listener="#{scheduleController.onEventMove}" update="messages" />
                        <p:ajax event="eventResize"
                            listener="#{scheduleController.onEventResize}" update="messages" />

                    </p:schedule> 
```

而托管的bean方法......

```
 public void onEventMove(ScheduleEntryMoveEvent event) {  
        doBusinessLogic((DefaultScheduleEvent) event.getScheduleEvent());
        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Event moved", "Day delta:" + event.getDayDelta() + ", Minute delta:" + event.getMinuteDelta());  

        addMessage(message);  
    }  

    public void onEventResize(ScheduleEntryResizeEvent event) {  
        doBusinessLogic((DefaultScheduleEvent) event.getScheduleEvent());
        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Event resized", "Day delta:" + event.getDayDelta() + ", Minute delta:" + event.getMinuteDelta());  

        addMessage(message);  
} 
```

`doBusinessLogic()`我将在其中调整时间值。如何进行更改以反映`DefaultScheduleEvent`时间表的数据模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:28:11.840

代码很好，通过调试数据模型，业务逻辑确实在正确更新调度项。

问题出在视图更新中。p:ajax 调用的更新属性应该是整个表单，而不仅仅是 eventDetails 或消息。

因此，通过将 jsf 页面更改为：

```
 <p:schedule value="#{scheduleController.eventModel}"
                        widgetVar="myschedule" view="agendaWeek" allDaySlot="false"
                        slotMinutes="15" firstHour="7" showWeekends="FALSE"
                        leftHeaderTemplate="prev,next" rightHeaderTemplate=""
                        minTime="7am" maxTime="21pm" timeFormat="dd/MM H:mm{ - dd/MM H:mm}"
                        axisFormat="HH" timeZone="#{rotulo.timeZone}">

                        <p:ajax event="dateSelect"
                            listener="#{scheduleController.onDateSelect}"
                            update="MYFORM" oncomplete="eventDialog.show()" />
                        <p:ajax event="eventSelect"
                            listener="#{scheduleController.onEventSelect}"
                            update="MYFORM" oncomplete="eventDialog.show()" />
                        <p:ajax event="eventMove"
                            listener="#{scheduleController.onEventMove}" update="MYFORM" />
                        <p:ajax event="eventResize"
                            listener="#{scheduleController.onEventResize}" update="MYFORM" />

                    </p:schedule> 
```

我能够在屏幕上看到事件的变化。

# c++ - 由于 typedef 导致的 C2371 错误

> ID：13416828
> 
> 赞同：0
> 
> 时间：2012-11-16T12:43:47.467
> 
> 标签：c++, visual-studio-2008, typedef

我可以问一个问题“为什么以下代码编译失败并在第 04 行出现错误 C2371”？

它在 VS6 上成功，但在 VS2008 上失败。

我试图注释掉第 05 行，仍然有这个编译错误。

```
01   typedef struct tagAAA
02   {
03       unsigned char      a;
04   } AAA;

05   typedef AAA FAR* LPAAA; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:53:41.087

据推测，编译器给出了错误消息和代码，告诉你问题出在哪里。谷歌搜索代码显示：

```
'identifier' : redefinition; different basic types 
```

您说错误在第 4 行；在这种情况下，可能标识符是`AAA`，并且您已经声明了其他名为`AAA`.

至于为什么它在一个有 15 年历史的预标准编译器上取得成功，你得问问历史学家。

另外，摆脱那些`typedef struct`废话；这在 C 中是个坏主意，在 C++ 中完全没有意义。除非您需要支持 16 位 MS-DOS，否则也请摆脱这些`FAR*`废话；您只需

```
struct AAA {
    unsigned char a;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:42:13.453

抱歉，我使用的名称与已在 Windows 中定义的名称冲突。似乎 VS6.0 不包括该文件。

非常感谢大家的支持。

另一种选择是在 stdafx.h 中包含以下宏

# 定义 VC_EXTRALEAN // 从 Windows 头文件中排除很少使用的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:53:34.337

您没有向我们展示`FAR`（此处只能是宏）的定义。我认为在 8086（16 位 MS/DOS）时代的 Microsoft 标头中有这样一个宏。我只是猜测，但如果他们将它保留一段时间以避免破坏旧代码，并且在 VC6 之后才摆脱它，我不会感到惊讶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:55:11.870

[MSDN 说](http://msdn.microsoft.com/en-us/library/t6xy3ys5%28v=vs.71%29.aspx)错误是“标识符已声明”。

这意味着标识符 ,`AAA`已经被声明。

所以这就是原因。

* * *

在 C++ 中，只需编写

```
struct Aaa
{
    unsigned char      a;
}; 
```

在哪里

*   无标签（在 C++ 中不需要）

*   没有指针类型的 typedef（可恶，并且还会导致`const`正确应用的问题，例如在 Microsoft 自己的代码中），

*   没有`FAR`（MS-DOS 有点古老）。

此外，使用非全大写名称，以尽量减少*与宏名称冲突*的可能性。

这样的冲突*可能*与您的问题有关。

# jquery - jQuery - 访问 X 和 Y 坐标（自定义事件）

> ID：13416830
> 
> 赞同：1
> 
> 时间：2012-11-16T12:43:50.527
> 
> 标签：jquery, function, events, return, coordinates

我正在处理图像幻灯片并使其启用触摸功能。我通过使用本文中提到的代码片段来做到这一点：http: [//blog.safaribooksonline.com/2012/04/18/mapping-mouse-events-and-touch-events-onto-a-single-event /](http://blog.safaribooksonline.com/2012/04/18/mapping-mouse-events-and-touch-events-onto-a-single-event/)

作者提到，通过使用他的代码触发触摸事件的标准化事件，X 和 Y 坐标的访问变得更加容易。这正是我发现困难的地方。我似乎根本无法访问这些值。我已经尝试了我能想到的一切。

这是代码：http: [//jsfiddle.net/BC8dr/3/](http://jsfiddle.net/BC8dr/3/)

标准化事件：

```
function normalizeEvent(type, original, x, y){

    return jQuery.Event(type, {

        pageX: x,
        pageY: y,
        originalEvent: original

    });

} 
```

在代码的底部，我评论了我不想访问的地方：

```
jQuery(current_slide).bind(TouchMouseEvent.DOWN, onDownEvent);

function onDownEvent(e){

    // This is where I need X and Y coordinate access

    // This will return result: undefined
    var x = e.pageX;
    console.log(x);
}​ 
```

所以我的问题是：如何访问 X 和 Y 坐标？

*注意：我对 JS/jQuery 很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T12:52:53.503

我知道这个问题已经够老了，但是在使用 e.pageY e.PageX 时，我在 Android 手机上遇到了问题。

通过针对事件的不同值来解决此问题，例如：

```
$(window).on("touchstart", function(event){
        var touchStartY = event.originalEvent.touches[0].clientY;
        var touchStartX = event.originalEvent.touches[0].clientX;
    });
$(window).on("touchmove", function(event){
        var touchMoveY = event.originalEvent.touches[0].clientY;
        var touchMoveX = event.originalEvent.touches[0].clientX;
    }); 
```

第一个函数将返回您启动时在浏览器中触摸位置的 x/y。第二个将为您提供您在浏览器中触摸位置的 x/y，但每次移动手指时都会调用它。

除了定位“clientX”/“clientY”，您还可以定位：

*   screenX/screenY - 相信是您在设备屏幕上触摸的位置，因为客户端就在浏览器窗口内。
*   pageX/pageY - 它认为从文档或网页的左上角而不是浏览器屏幕或设备屏幕的左上角获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:11:45.307

`event.clientX` `event.clientY`您可以在您的情况下使用 so接收 X 和 Y 坐标

```
function onDownEvent(e){

    console.log('X = ' + e.clientX);
    console.log('Y = ' + e.clientY);
}​ 
```

[你可以在这里](http://api.jquery.com/category/events/event-object/)阅读更多

# jquery - Drupal、jQuery -> Slidorion 和视图

> ID：13416836
> 
> 赞同：1
> 
> 时间：2012-11-16T12:44:05.627
> 
> 标签：jquery, drupal, slider, field

我实际上正在尝试将 Slidorion Slider (http://www.slidorion.com/) 集成到 Drupal 视图中。目前我坚持将我的视图字段添加到 slidorion 代码中：

```
<div id="slidorion">
    <div id="slider">
        <div class="slide"></div>
        <div class="slide"></div>
        <div class="slide"></div>
    </div>

    <div id="accordion">
        <div class="link-header">New Features</div>
        <div class="link-content">
            <!-- content -->
        </div>
        <div class="link-header">A Simple Image</div>
        <div class="link-content">
            <!-- content -->
        </div>
        <div class="link-header">Background Image w/ HTML</div>
        <div class="link-content">
            <!-- content -->
        </div>
    </div>
</div> 
```

问题是，我不知道如何打印字段的特殊数组值。在伪代码中，它应该看起来像这样：

```
<div id="slidorion">
    <div id="slider">
        <div class="slide">[field_image_0]</div>
        <div class="slide">[field_image_1]</div>
        <div class="slide">[field_image_2]</div>
    </div>

    <div id="accordion">
        <div class="link-header">[field_title_0]</div>
        <div class="link-content">
            [field_content_0]
        </div>
        <div class="link-header">[field_title_1]</div>
        <div class="link-content">
            [field_content_1]
        </div>
        <div class="link-header">[field_title_2]</div>
        <div class="link-content">
            [field_content_2]
        </div>
    </div>
</div> 
```

有人知道如何解决这个问题吗？

# iphone - 在 iPhone 上使用 SBJSON 发布到 php 页面的问题

> ID：13416840
> 
> 赞同：0
> 
> 时间：2012-11-16T12:44:13.347
> 
> 标签：iphone, xcode, json, sbjson

我从以前的项目中借出代码，我已经完成了它完美的工作。我已经单独测试了使用 jQuery 输出数据的页面，它工作正常，所以我知道这是 xcode 中的一个问题。

我正在使用以下代码，它采用一个包含用于获取正确返回数据的发布数据的 NSDictionary：

```
-(NSDictionary *)loadData:(NSDictionary *) sendDict{
    SBJsonWriter *writer = [SBJsonWriter new];
    NSString * jsonData = [writer stringWithObject:sendDict];
    NSString * getString = [NSString stringWithFormat:@"json=%@", jsonData];

    NSData *requestData = [NSData dataWithBytes: [getString UTF8String] length: [getString length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://divisi.co.uk/YTA/custom_api.php"]];
    [request setHTTPMethod: @"POST"];
    [request setHTTPBody: requestData];

    NSData *returnData = [ NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil ];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];

    NSLog(@"Returned Json: %@", returnString);

    // decoding the json
    NSDictionary *loginArray = [NSDictionary alloc];
    loginArray = [returnString JSONValue];

    if([[loginArray objectForKey:@"SC"] isEqualToString:@"200"]){
        return [loginArray objectForKey:@"data"];
    }
    else{
        return [loginArray objectForKey:@"error_message"];
    }
} 
```

当我发送发布请求时，它在 php 端发现 null 并且此编码要发布的 json`{"method":"getWhatsOn"}`非常简单。我的测试 php 页面只是获取此方法名称并将其打印回正确编码，即`{"SC":"200","data":"getWhatsOn"}`. 正如我提到的，它在使用 jQuery 的浏览器中工作，但在 php 中，当请求来自 iPhone 时，$_POST['method'] 返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:52:41.500

```
NSString *Sc= @"200";
 NSString *dataD=@"getWhatsOn";
 NSMutableDictionary *dictionnary = [NSMutableDictionary dictionary];
 [dictionnary setObject:Sc forKey:@"firstString"];
 [dictionnary setObject:dataD forKey:@"secondfield"];

 NSError *error = nil;
 NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
 options:kNilOptions
 error:&error];   

 NSString *urlString = @"your URL";
 NSURL *url = [NSURL URLWithString:urlString];

 // Prepare the request
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
 [request setHTTPMethod:@"POST"];
 [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
 [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
 [request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
 [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]]  forHTTPHeaderField:@"Content-Length"];
 [request setHTTPBody:jsonData];    

 NSError *errorReturned = nil;
 NSURLResponse *theResponse =[[NSURLResponse alloc]init];
 NSData *data = [NSURLConnection sendSynchronousRequest:request
 returningResponse:&theResponse
 error:&errorReturned];
 if (errorReturned) 
 {
 //...handle the error
 }
 else 
 {
 NSString *retVal = [[NSString alloc] initWithData:data
 encoding:NSUTF8StringEncoding];
 NSLog(@"%@", retVal);

 } 
```

# css - /（正斜杠）在 CSS 样式声明中

> ID：13416856
> 
> 赞同：17
> 
> 时间：2012-11-16T12:45:31.520
> 
> 标签：css

> **可能重复：**
> [这个 CSS 字体速记语法是什么意思？](https://stackoverflow.com/questions/4080265/what-does-this-css-font-shorthand-syntax-mean)

最近在检查苹果网站的样式时，我遇到了这个我无法理解的 CSS 规则声明：

```
body {
   font: 12px/18px "Lucida Grande","Lucida Sans Unicode",Helvetica,Arial,Verdana,sans-serif;
} 
```

我无法理解，因此想知道正斜杠`font: 12px/18px`实际上是如何工作的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T12:46:39.263

它只是意味着`font-size`和`line-height`

```
font: 12px/18px /*12px font-size and 18px line-height*/ 
```

这是一个速记符号......您可以使用更多的 CSS，例如

```
margin-top: 10px;
margin-right: 20px;
margin-bottom: 30px;
margin-left: 40px; 
```

可以简单地写为

```
margin: 10px 20px 30px 40px
         ^----^----^----^
       Top/Right/Bottom/Left 
```

或者说例如这个

```
border-width: 1px;
border-style:solid;
border-color: #ff0000; 
```

可以写成

```
border: 1px solid #f0000; 
```

这是一个很酷的 CSS 速记[**列表**](https://developer.mozilla.org/en-US/docs/Web/CSS/Shorthand_properties)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:46:41.827

它是 的简写`font-size: 12px; line-height: 18px`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T12:48:02.520

它是设置 2 个 css 属性的捷径，其作用与以下相同：

```
font-size: 12px;
line-height: 18px; 
```

# html - 为什么我应该在我的 HTML 中使用 UL/LI？

> ID：13416866
> 
> 赞同：16
> 
> 时间：2012-11-16T12:46:13.217
> 
> 标签：html, semantics

我有以下对我来说似乎非常好的结构，我总是使用 HTML5：

```
<div class="drop-menu" data-dropmenu="language">
  <a href="language/pt-pt" class="drop-menu-link">Português <span>(Brasil)</span></a>
  <a href="language/pt-pt" class="drop-menu-link">Português <span>(Portugal)</span></a>
  <a href="language/es" class="drop-menu-link">Español</a>
  <a href="language/en" class="drop-menu-link">English</a>
  <a href="language/ja" class="drop-menu-link">日本語&lt;/a>
  <a href="language/it" class="drop-menu-link">Italiano</a>
  <a href="language/de" class="drop-menu-link">Deutsch</a>
  <a href="language/fr" class="drop-menu-link">Français</a>
</div> 
```

那么，如果只是显示为块的 A 元素可以完成这项工作，我为什么要使用列表结构（ULs/LIs）呢？在这种情况下使用列表真的有用吗？我总是这样，而且看起来很好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T12:48:39.623

它在语义上更正确。

您上面的内容是语言的无序列表。您应该使用项目的无序列表（`UL`带有元素的`LI`元素）在语义上是正确的。

这也有助于屏幕阅读器和其他依赖正确语义的技术工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-27T15:33:41.543

使用 JAWS 屏幕阅读器的盲人的意见建议不要将 ul 和 li 元素用于菜单或导航列表。

[https://css-tricks.com/navigation-in-lists-to-be-or-not-to-be/](https://css-tricks.com/navigation-in-lists-to-be-or-not-to-be/)

尽管如果它是某种导航菜单，您应该将锚元素嵌套在 nav 元素中......但它的选项将引导用户进入新的视图/页面。如果它只是一个非交互式数据的列表，那么也许一个部分或旁边的元素会起作用。

对于具有不会导致新页面的交互式选项的元素列表（即仅发送 get/post 请求），它不太清楚将其包装在什么中。我认为 nav 元素在语义上仍然有意义（你是导航页面的数据库/CRUD 方面），或者只是一个部分/旁边的元素仍然可以工作。

对菜单元素有部分支持，这会很好:(

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-30T14:39:05.857

还因为，如果没有 CSS，您的菜单会像句子一样呈现内联...

> Português（巴西） Português（葡萄牙） Español 英语 日本语 Italiano Deutsch Français

...而不是一个格式很好（虽然看起来很乏味）的列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T12:50:28.527

> 使用列表有（至少）两个很好的理由。使用列表可以帮助您了解您的网站结构，这在 SEO 方面是好的，但如果人们出于可访问性原因使用自定义 CSS 或屏幕阅读器，也是如此。第二个稍微相关的一点是，它在创建样式表时很有帮助。您不需要想出自己的嵌套元素方式。只需使用列表并从那里开始。然后，您可以专注于使样式表正确，为不同的层次结构级别、第一个、最后一个、奇数或偶数列表项提供不同的样式。

[此](https://stackoverflow.com/questions/5622220/why-use-list-to-do-navigation-menu-instead-of-buttons)答案的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T12:51:19.563

要添加到*Oded*的答案，特别是您想要在语义上正确的原因是针对所有不使用普通浏览器的网络用户。以使用屏幕阅读器或某种网络爬虫的盲人为例。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-16T12:53:01.853

建议这样做是为了使您的标记在语义上具有描述性。由于您的下拉菜单本质上是指向不同语言的链接的无序列表，因此您应该在屏幕阅读器或搜索引擎蜘蛛为您的网站编制索引时告诉它们。

显然它不会（或不需要）对该菜单的典型呈现或功能产生任何影响，因此问题是您是否关心 SEO 和可访问性最佳实践。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-16T12:57:13.747

人们使用`<ul>`未排序的列表和`<li>`列表项将项目组合在一起。为什么要将 html 标记组合在一起……这使开发人员能够将使用 css 类的格式应用于一组……而不是每个元素。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-16T13:06:51.617

标签不仅用于表示（无论如何今天可以进行深刻的改变），而且还用于意义。`div`例如，您几乎可以（？）只用and做一个完整的网页`span`，但这并不意味着它是一个好主意......

你提到了 HTML5：他们不遗余力地添加了几个具有相似渲染但语义非常不同的标签。
如上所述，这有助于屏幕阅读器：他们会以不同的方式阅读您的编码，可能会尝试将其作为一个完整的句子阅读，而他们会以适当的语气和停顿阅读真实的列表。
但它也可能有助于网络蜘蛛（想想“谷歌”，但不仅如此）更好地掌握页面的结构并更好地索引最重要的部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-26T21:19:32.153

自 HTML 5 发布以来，`<nav>`可用于网站导航块而不是`div`.

参考[HTML 标准](https://html.spec.whatwg.org/multipage/sections.html#the-nav-element)

> nav 元素表示链接到其他页面或页面内的部分的页面部分：具有导航链接的部分。

HTML 标准包括一个使用`<nav>`和`<ul>`的示例`<li>`。

```
<nav>
  <ul>
   <li><a href="/">Home</a></li>
   <li><a href="/events">Current Events</a></li>
   ...more...
  </ul>
</nav> 
```

但它也说

> nav 元素不必包含列表，它也可以包含其他类型的内容。

```
<nav>
 <h1>Navigation</h1>
 <p>You are on my home page. To the north lies <a href="/blog">my
 blog</a>, from whence the sounds of battle can be heard. To the east
 you can see a large mountain, upon which many <a
 href="/school">school papers</a> are littered. Far up thus mountain
 you can spy a little figure who appears to be me, desperately
 scribbling a <a href="/school/thesis">thesis</a>.</p>
</nav> 
```

根据标准，使用`ul`和`li`是个人喜好，只要您必须`nav`指示导航。

# java - 安卓中的错误 - SQLite

> ID：13416869
> 
> 赞同：1
> 
> 时间：2012-11-16T12:46:31.453
> 
> 标签：java, android, android-sqlite

我正在尝试查询我的数据库以返回输入到文本框中的名称。我已经能够查看数据库中的所有项目，但我想使用文本框搜索名称。当我输入名称并点击搜索按钮时，日志猫显示错误“没有这样的列：john：编译时：SELECT name, gender, height, age, hair FROM details WHERE name= john ORDER by name.

```
 private void findRecords(){
    EditText find = (EditText)findViewById(R.id.nameSearch);
    EditText name = (EditText)findViewById(R.id.nameFound);
    EditText gender = (EditText)findViewById(R.id.genderFound);
    String s = find.getText().toString();
    //Long l = Long.parseLong(s);
    DatabaseClass hon = new DatabaseClass(this);

    String returnedName = hon.getName(s);
    String returnedGender = hon.getGender(s);

    name.setText(returnedName);
    gender.setText(returnedGender);

}

    public String getName(String s) {
    // TODO Auto-generated method stub
    String[] columns = new String[] {NAME_COLUMN, GENDER_COLUMN, HEIGHT_COLUMN, AGE_COLUMN, HAIR_COLUMN};
    Cursor c = sherlockdb.query(TABLE_NAME, columns, NAME_COLUMN +"="+ s, null, null, null, NAME_COLUMN);
    if (c != null){
        c.moveToFirst();
        String name = c.getString(1);
        return name;
    }
    return null;
} 
```

请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:51:54.357

代替：

```
Cursor c = sherlockdb.query(TABLE_NAME, columns, NAME_COLUMN +"="+ s, null, null, null, NAME_COLUMN); 
```

和：

```
String[] args={s};
Cursor c = sherlockdb.query(TABLE_NAME, columns, NAME_COLUMN +"=?", args, null, null, NAME_COLUMN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:51:29.883

你的专栏是什么数据？我认为您忘记将文字 jonh 放在“”之间。

你可以试试这个：

```
SELECT name, gender, height, age, hair FROM details WHERE name='john' ORDER by name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:51:30.910

试试这个：

```
Cursor c = sherlockdb.query(TABLE_NAME, columns, NAME_COLUMN +"='"+ s+"'", null, null, null, NAME_COLUMN); 
```

因为您需要 'john' 格式的字符串。

# asp.net - 如何在 ListItem 旁边放置一个按钮

> ID：13416872
> 
> 赞同：0
> 
> 时间：2012-11-16T12:46:38.347
> 
> 标签：asp.net, html, css, button, webforms

如何在每个列表项旁边放置一个按钮？

```
<asp:CheckBoxList ID="lstBrembo" runat="server">
    <asp:ListItem Text="Popular" Value="9"></asp:ListItem> // <--- button here
    <asp:ListItem Text="Pads" Value="70"></asp:ListItem>
    <asp:ListItem Text="Discs" Value="72"></asp:ListItem>
    <asp:ListItem Text="Drums" Value="73"></asp:ListItem>
    <asp:ListItem Text="Handed Discs" Value="109"></asp:ListItem>
    <asp:ListItem Text="Brembo Max" Value="108"></asp:ListItem>
</asp:CheckBoxList> 
```

每次我尝试在列表项之后或在其中插入 a 时，都会出现解析错误。我需要一个按钮。

有任何想法吗？

HTML：

```
<div id="MainContentPlaceHolder_pnlBrembo" class="groupbox">
    <fieldset>
        <legend>
            BREMBO
        </legend>
    <input type="submit" name="ctl00$MainContentPlaceHolder$ctl02" value="select all" class="selectAllButton" />
    <table id="MainContentPlaceHolder_lstBrembo">
            <tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_0" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$0" value="9" /><label for="MainContentPlaceHolder_lstBrembo_0">Popular</label></td>
            </tr><tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_1" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$1" value="70" /><label for="MainContentPlaceHolder_lstBrembo_1">Pads</label></td>
            </tr><tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_2" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$2" value="72" /><label for="MainContentPlaceHolder_lstBrembo_2">Discs</label></td>
            </tr><tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_3" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$3" value="73" /><label for="MainContentPlaceHolder_lstBrembo_3">Drums</label></td>
            </tr><tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_4" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$4" value="109" /><label for="MainContentPlaceHolder_lstBrembo_4">Handed Discs</label></td>
            </tr><tr>
                <td><input id="MainContentPlaceHolder_lstBrembo_5" type="checkbox" name="ctl00$MainContentPlaceHolder$lstBrembo$5" value="108" /><label for="MainContentPlaceHolder_lstBrembo_5">Brembo Max</label></td>
            </tr>
        </table>

    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:04:50.740

为此，请使用诸如 ListView 或 Repeater 之类的替代控件。默认的 checkBoxList 不会轻易地为您提供这种能力。使用数据绑定控件，您可以根据需要对其进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:24:27.923

正如 Brian Mains 所说，使用中继器或 listview insted

下面是 ListView 的简单示例：

```
<asp:ListView ID="lvBrembo" runat="server">
        <LayoutTemplate>
            <table id="lstBrembo" border="0">
                <tbody runat="server" id="itemPlaceholder">
                </tbody>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:CheckBox ID="chbSelection" Text='<%# Eval("name") %>' Checked='<%# Eval("selected") %>' runat="server" />
                </td>
                <td>
                    <asp:Button ID="btnDetails" Text='<%# Eval("link") %>' runat="server" />
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView> 
```

示例中使用的类：

```
class Brembo
    {
        public string name {get;set;}
        public string link {get;set;}
        public bool selected {get;set;}
        public int value {get;set;}
    } 
```

# ios - 我可以使用包含 UIImage 对象的数组作为 UITableView 中的索引标题吗？

> ID：13416876
> 
> 赞同：0
> 
> 时间：2012-11-16T12:47:01.993
> 
> 标签：ios, uitableview, indexing, uiimage

我想显示一些图像而不是在 UITableView 中显示 AZ 字母作​​为索引。从Apple的文档中，

![在此处输入图像描述](../Images/5f3887579202c40aa2795045524e4483.png)

还，

*   我有分组表而不是普通表。苹果会因此拒绝我的应用程序吗？
*   有没有办法返回一个包含一组 UIImages 的 NSArray？我试过了，但它会引发错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:50:37.700

的检查`return`值`sectionIndexTlesForTableView`应该是`array`的`strings`。

我认为 images 而不是 strings `not` `possible`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:00:45.677

使用分组样式，文档很清楚，您无法实现该方法（sectionIndexTitlesForTableView）

# android - 在 `Thread.setDefaultUncaughtExceptionHandler` 中显示一个对话框

> ID：13416879
> 
> 赞同：15
> 
> 时间：2012-11-16T12:47:04.387
> 
> 标签：android, exception-handling, android-alertdialog, android-dialog

当我的 android 应用程序抛出异常时，我想显示一个自定义对话框来告诉用户发生了错误，所以我使用`Thread.setDefaultUncaughtExceptionHandler`设置一个全局异常处理程序：

```
public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();

        Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
            @Override
            public void uncaughtException(Thread thread, final Throwable ex) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
                builder.setTitle("There is something wrong")
                        .setMessage("Application will exit：" + ex.toString())
                        .setPositiveButton("OK", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // throw it again
                                throw (RuntimeException) ex;
                            }
                        })
                        .show();
            }
        });
    }

} 
```

但我发现它抛出了任何异常，`AlertDialog`不会显示，而是应用程序阻塞，过了一会儿，它会显示一个系统对话框：

```
X app is not responding. Would you like to close it?
Wait  |  OK 
```

我现在该怎么办？

* * *

**更新**

日志：

```
11-16 12:54:16.017: WARN/WindowManager(90): Attempted to add window with non-application token WindowToken{b38bb6a8 token=null}.  Aborting. 
```

似乎错误来自`new AlertDialog.Builder(getApplicationContext());`

但这是`Application`子类中的异常处理程序，我该如何为其设置活动实例？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-16T12:57:42.563

您不能从这里进行任何 UI 操作。只需开始另一个活动/启动屏幕。传递一个额外的意图来表示崩溃并在该活动中显示对话框。

```
 /*
     * (non-Javadoc)
     * 
     * @see
     * java.lang.Thread.UncaughtExceptionHandler#uncaughtException(java.
     * lang.Thread, java.lang.Throwable)
     */
    @Override
    public void uncaughtException(Thread t, final Throwable e) {
        StackTraceElement[] arr = e.getStackTrace();
        final StringBuffer report = new StringBuffer(e.toString());
        final String lineSeperator = "-------------------------------\n\n";
        report.append(DOUBLE_LINE_SEP);
        report.append("--------- Stack trace ---------\n\n");
        for (int i = 0; i < arr.length; i++) {
            report.append( "    ");
            report.append(arr[i].toString());
            report.append(SINGLE_LINE_SEP);
        }
        report.append(lineSeperator);
        // If the exception was thrown in a background thread inside
        // AsyncTask, then the actual exception can be found with getCause
        report.append("--------- Cause ---------\n\n");
        Throwable cause = e.getCause();
        if (cause != null) {
            report.append(cause.toString());
            report.append(DOUBLE_LINE_SEP);
            arr = cause.getStackTrace();
            for (int i = 0; i < arr.length; i++) {
                report.append("    ");
                report.append(arr[i].toString());
                report.append(SINGLE_LINE_SEP);
            }
        }
        // Getting the Device brand,model and sdk verion details.
        report.append(lineSeperator);
        report.append("--------- Device ---------\n\n");
        report.append("Brand: ");
        report.append(Build.BRAND);
        report.append(SINGLE_LINE_SEP);
        report.append("Device: ");
        report.append(Build.DEVICE);
        report.append(SINGLE_LINE_SEP);
        report.append("Model: ");
        report.append(Build.MODEL);
        report.append(SINGLE_LINE_SEP);
        report.append("Id: ");
        report.append(Build.ID);
        report.append(SINGLE_LINE_SEP);
        report.append("Product: ");
        report.append(Build.PRODUCT);
        report.append(SINGLE_LINE_SEP);
        report.append(lineSeperator);
        report.append("--------- Firmware ---------\n\n");
        report.append("SDK: ");
        report.append(Build.VERSION.SDK);
        report.append(SINGLE_LINE_SEP);
        report.append("Release: ");
        report.append(Build.VERSION.RELEASE);
        report.append(SINGLE_LINE_SEP);
        report.append("Incremental: ");
        report.append(Build.VERSION.INCREMENTAL);
        report.append(SINGLE_LINE_SEP);
        report.append(lineSeperator);

        Log.e("Report ::", report.toString());
        Intent crashedIntent = new Intent(BaseActivity.this, SplashActivity.class);
        crashedIntent.putExtra(EXTRA_CRASHED_FLAG,  "Unexpected Error occurred.");
        crashedIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
        crashedIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(crashedIntent);

        System.exit(0);
        // If you don't kill the VM here the app goes into limbo

    } 
```

**另见：**

[实例化 AlertDialog 的 Android UncaughtExceptionHandler 中断](https://stackoverflow.com/questions/5519347/android-uncaughtexceptionhandler-that-instantiates-an-alertdialog-breaks)

[Toast 没有出现在 UnCaughtExceptionHandler 中](https://stackoverflow.com/questions/11609640/toast-not-showing-up-in-uncaughtexceptionhandler)

[如果这是主线程崩溃，如何从 UncaughtExceptionHandler 启动活动？](https://stackoverflow.com/questions/2222396/how-to-start-activity-from-uncaughtexceptionhandler-if-this-is-main-thread-crash)

**我是怎么做的：**

我有一个扩展 Activity 的 BaseActivity，并在活动的 onCreate 中设置了 UncaughtExceptionHandler。我所有的活动都扩展了 BaseActivity 而不是 Activity。

**钥匙**

1.  您不能在 中设置异常处理程序`Application.onCreate`，相反，您应该创建 a`BaseActivity`并将其设置在它的`onCreate`方法上。
2.  启动 SplashActivity 后，我们应该调用`System.exit(0)`
3.  我们不能持有错误实例来共享它`SplashActivity`，因为它会被销毁，相反，我们可以传递一些错误消息或将其保存在文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-10T10:05:21.140

似乎提供的解决方案不起作用（至少对于 Android 4.0 及更高版本）。对于任何可能感兴趣的人来说，打开`Activity`或涉及某种`UI`元素`Dialogs`是不可能的。经过一些研究，我意识到您可以提供的最大值是一条`Toast`消息，通知日志传递到服务器。可选地，`SharedPreferences`可以使用 a 来指示应用程序崩溃，并且在应用程序重新启动时，`Dialog`可以根据`SharedPreferences`属性值显示 a 并从那里传递先前捕获的异常（显然 Accra 使用相同的方法）：

```
public class FirstAc extends Activity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView();

        sharedPrefValue = pref.getBoolean("DID_APP_CRASH", false);
        if(sharedPrefValue)
           dialog.show();
    }
} 
```

当应用程序崩溃时，可以使用以下代码段将异常保存为字符串：

```
StringWriter sw = new StringWriter();
PrintWriter pw  = new PrintWriter(sw);
exception.printStackTrace(pw);
String stStr = sw.toString();
prefEditor.putString("EXCEPTION_CAUGHT", stStr); 
```

总而言之，为了将未捕获的异常传递到远程服务器，请创建一个自定义`UncaughtExceptionHandler`并且最重要的是保留对默认值的引用`UncaughtExceptionHandler`。与其通过调用突然关闭VM，不如`System.exit()`让Android在执行自定义操作后处理异常更合理。我更喜欢在旁边设置异常处理程序`Application`：

```
public class CustomApp extends Application {

    @Override
    public void onCreate() {

        super.onCreate();
        Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(this));
    }
} 
```

在`CustomExceptionHandler`执行自定义行为之后，让 Android 以默认方式处理异常：

```
public class CustomExceptionHandler implements UncaughtExceptionHandler {

    private CustomApp                _app;
    private UncaughtExceptionHandler _defaultEH; 

    public YolbilExceptionHandler(YolbilApp ac){

        _defaultEH = Thread.getDefaultUncaughtExceptionHandler();
        _app = ac;
    }

    @Override
    public void uncaughtException(Thread thread, final Throwable ex) {

        Toast.makeText(_app, "Delivering log...", Toast.LENGTH_LONG).show();
        // obtain the Exception info as a String
        StringWriter sw = new StringWriter();
        PrintWriter pw  = new PrintWriter(sw);
        ex.printStackTrace(pw);
        String exStr    = sw.toString();
        ExceptionServer.getInstance().deliverMessageAsync(exStr, _app);
        _defaultEH.uncaughtException(thread, ex);
    }

} 
```

这是一个如何将消息异步传递到服务器的示例：

```
public void deliverMessageAsync(final String msg, final YolbilApp app){

    new Thread(new Runnable() {

        @Override
        public void run() {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(SERVER_ADDR); 
            try {
                Looper.prepare();
                Toast.makeText(app, R.string.msg_delivering_log, Toast.LENGTH_LONG).show();
                httppost.setHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");                   
                httpclient.execute(httppost); 
                Toast.makeText(app, "Log delivered ...", Toast.LENGTH_SHORT).show();
                Looper.loop();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }).start();
} 
```

# javascript - 横幅 A 显示在 pageA.html 和横幅 B 与 pageB.html

> ID：13416880
> 
> 赞同：1
> 
> 时间：2012-11-16T12:47:04.853
> 
> 标签：javascript, if-statement, banner

我想在访问者在 page.html 上时显示bannerA.js，并在访问者在 page_en.html 上时显示bannerB.js，依此类推，有 5 个横幅/5 个页面。

我看到我可以使用这样的代码： if(document.URL.indexOf("foo_page.html") >= 0){ ...显示您的消息 }

但我不确定，因为我有两个以上的选择。也许开关控制可以帮助？

如何使用相同的 javascript 代码执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:57:10.180

这就是我要做的：

```
 var parts = window.location.pathname.replace(/\/$/, '').split('/'),
       page = parts[parts.length - 1];

    switch (page)
    {
    case "index.html":
      //Banner 1
      break;
    case "index_en.html":
      //Banner 2
      break;
    } 
```

page 将保存您感兴趣的字符串，然后相应地进行切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:55:46.893

依赖**document.URL.indexOf("foo_page.html")**不是最佳实践，因为您可以将 'foo_page.html' 作为 url 参数（**http://some/somepage.html?filter =true&foo_page.html** )

您可以使用公开“路径名”的 window.location 对象...[在此处查看更多信息](http://davidwalsh.name/javascript-window-location)

```
window.location.pathname.indexOf("foo_page.html") 
```

# google-app-engine - 在不同服务器上的 GAE 和数据库上托管应用程序

> ID：13416882
> 
> 赞同：4
> 
> 时间：2012-11-16T12:47:05.337
> 
> 标签：google-app-engine, hosting, google-cloud-datastore, google-data-api

我想在 GAE 上托管我的 java web 应用程序，在不同的服务器（GoDaddy）上托管我的数据库。谷歌数据存储只有 6 个月免费，所以我想使用不同主机的数据库（goDaddy）。那么它可能（在GAE的情况下）吗？

我可以从我的本地系统使用我的托管数据库（goDaddy），但是当我将我的应用程序上传到 GAE 时，它就不起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:15:12.837

如果您的数据库为远程连接提供了 REST API，那么它应该没有任何问题。如果您可以使用套接字（即 java.net 包）访问您的数据库，那么这是不可能的。

此外，Google App Engine 根据使用量而非时间提供免费配额。有关更多信息，请查看[App Engine 配额](https://developers.google.com/appengine/docs/quotas)

# perl - 将 id 全局哈希存储为键

> ID：13416883
> 
> 赞同：0
> 
> 时间：2012-11-16T12:47:14.837
> 
> 标签：perl, xml-twig

我需要所有 xml id 存储的哈希作为键，值始终为空。如何收集存储在树枝中全局哈希中的所有 id 值。

xml:

xml:

```
<book>
<book-meta>
<p><xref id="page_xii"/> to reproduce their work<xref id="fn1"/> in this volume<xref id="fn2"/>.</p>
</book-meta>
</book> 
```

脚本：

```
use strict;
use XML::Twig;
my $xml_twig_content = XML::Twig->new(
                keep_encoding => 1,
                twig_handlers => {
                keep_atts_order => 1,
                },
                pretty_print => 'indented',
);

$xml_twig_content->parsefile('sample.xml'); 
```

我不能这样做，我怎样才能让所有的 id 成为一个全局哈希作为键。

我需要：

```
my %global; 
```

1.  page_xii
2.  fn1
3.  fn2

我怎么能得到这个。存储此类型的示例，$global{page_xii} = '';

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:19:11.980

这取决于您是否需要按顺序排列，在数组中，或者在哈希中。

要将它们放入哈希中，没有什么可做的，它们就在里面`$twig->{twig_id_list}`（你为什么叫树枝`$xml_twig_content`？它又长又麻烦）。API 无法保证这一点，但它在 10 多年中没有改变，我认为在接下来的 10 年里没有理由改变它。

要将它们放入数组中，您可以设置一个处理程序`@*[@id]`，将 id 推送到数组中：

```
twig_handlers => { '*[@id]' => sub { push @ids, $_->id; } } 
```

然后，如果您想要的是哈希 id => ，请执行

```
my %global= map { $_ => $ids[$_] } 1..@ids; 
```

虽然这是一个奇怪的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:30:42.843

您可以为元素添加一个处理程序，像这样`_all_`解析出`id`每个元素。有关更多信息，请参阅[文档](https://metacpan.org/module/XML%3a%3aTwig)。你可能需要在里面搜索一下。

```
use strict;
use warnings;
use XML::Twig;
my $xml = <<'XML';
<book>
<book-meta>
<p><xref id="page_xii"/> to reproduce their work<xref id="fn1"/> in this volume<xref id="fn2"/>.</p>
</book-meta>
</book>
XML

my %global;
my $xml_twig_content = XML::Twig->new(
  keep_encoding => 1,
  twig_handlers => {
    keep_atts_order => 1,
    '_all_'         => sub {     # this is the important part!
      my ( $twig, $elem ) = @_;  # second argument is the current element
      $global{ $elem->id } = ''; # it has a method id() that gets the id
    },
  },
  pretty_print => 'indented',
);

$xml_twig_content->parse($xml);
print Dumper \%global; 
```

* * *

在更一般的说明中，您应该添加`use warnings`到您的程序中。此外，您通常不只是将元素的值设置`%global`为`''`，而是使用增量：

```
$global{ $elem->id }++; 
```

# c# - 线程安全队列 - 入队/出队

> ID：13416889
> 
> 赞同：30
> 
> 时间：2012-11-16T12:47:27.677
> 
> 标签：c#, multithreading, queue

首先，我将解释一个简短的场景；

作为来自某些设备的信号触发，警报类型的对象被添加到队列中。每隔一段时间，就会检查队列，并且对于队列中的每个警报，它都会触发一个方法。

但是，我遇到的问题是，如果在遍历队列时将警报添加到队列中，则会引发错误，说明队列在您使用时已更改。这是显示我的队列的一些代码，假设警报不断插入其中；

```
public class AlarmQueueManager
{
    public ConcurrentQueue<Alarm> alarmQueue = new ConcurrentQueue<Alarm>();
    System.Timers.Timer timer;

    public AlarmQueueManager()
    {
        timer = new System.Timers.Timer(1000);
        timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        timer.Enabled = true;
    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        DeQueueAlarm();
    }

    private void DeQueueAlarm()
    {
        try
        {
            foreach (Alarm alarm in alarmQueue)
            {
                SendAlarm(alarm);
                alarmQueue.TryDequeue();
                //having some trouble here with TryDequeue..

            }
        }
        catch
        {
        }
    } 
```

所以我的问题是，我如何使这个更...线程安全？这样我就不会遇到这些问题。也许类似于将队列复制到另一个队列，处理那个队列，然后将原始队列中处理的警报出队？

编辑：刚刚被告知并发队列，现在检查一下

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-16T13:10:21.453

```
private void DeQueueAlarm()
{
    Alarm alarm;
    while (alarmQueue.TryDequeue(out alarm))
        SendAlarm(alarm);
} 
```

或者，您可以使用：

```
private void DeQueueAlarm()
{
    foreach (Alarm alarm in alarmQueue)
        SendAlarm(alarm);
} 
```

根据 MSDN 文章[`ConcurrentQueue<T>.GetEnumerator`](http://msdn.microsoft.com/en-us/library/dd287144.aspx)：

> 枚举表示队列内容的即时快照。它不反映`GetEnumerator`调用后对集合的任何更新。枚举器可以安全地与队列的读取和写入同时使用。

`DeQueueAlarm`因此，当您的方法被多个线程同时调用时，两种方法之间的差异就会出现。使用该`TryQueue`方法，您可以保证`Alarm`队列中的每个都只会被处理一次；然而，哪个线程选择哪个警报是不确定的。该`foreach`方法确保每个竞赛线程将处理队列中的所有警报（从它开始迭代它们的时间点开始），从而导致多次处理相同的警报。

如果您想只处理每个警报一次，然后将其从队列中删除，您应该使用第一种方法。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-16T12:49:23.847

任何你不能使用的理由[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-16T12:49:18.883

.Net 已经有一个线程安全的队列实现：看看[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T17:58:01.687

考虑到每个线程实际上一次只处理一个警报，一个更好的方法是替换它：

```
 foreach (Alarm alarm in alarmQueue)
        {
            SendAlarm(alarm);
            alarmQueue.TryDequeue();
            //having some trouble here with TryDequeue..
        } 
```

有了这个：

```
 while (!alarmQueue.IsEmpty)
        {
            Alarm alarm;
            if (!alarmQueue.TryDequeue(out alarm))  continue;
            SendAlarm(alarm);
        } 
```

根本没有理由随时获取队列的完整快照，因为您只真正关心在每个周期开始时要处理的下一个。

# php - 计算PHP中两个日期之间的月数？

> ID：13416894
> 
> 赞同：40
> 
> 时间：2012-11-16T12:47:47.113
> 
> 标签：php, date

如果不使用 PHP 5.3 的[date_diff](http://www.php.net/manual/en/datetime.diff.php)函数（我使用的是 PHP 5.2.17），是否有一种简单而准确的方法来做到这一点？我正在考虑类似下面的代码，但我不知道如何计算闰年：

```
$days = ceil(abs( strtotime('2000-01-25') - strtotime('2010-02-20') ) / 86400);
$months = ???; 
```

我正在尝试计算一个人的月龄。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-16T12:52:17.957

```
$date1 = '2000-01-25';
$date2 = '2010-02-20';

$ts1 = strtotime($date1);
$ts2 = strtotime($date2);

$year1 = date('Y', $ts1);
$year2 = date('Y', $ts2);

$month1 = date('m', $ts1);
$month2 = date('m', $ts2);

$diff = (($year2 - $year1) * 12) + ($month2 - $month1); 
```

您可能还想在某处包含日期，具体取决于您是否指*整*月。希望你明白这一点。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-05T11:24:52.523

这是我在课堂上编写的一种简单方法，用于计算两个给定日期所涉及的月数：

```
public function nb_mois($date1, $date2)
{
    $begin = new DateTime( $date1 );
    $end = new DateTime( $date2 );
    $end = $end->modify( '+1 month' );

    $interval = DateInterval::createFromDateString('1 month');

    $period = new DatePeriod($begin, $interval, $end);
    $counter = 0;
    foreach($period as $dt) {
        $counter++;
    }

    return $counter;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-04-09T12:48:33.017

**这是我的解决方案。它检查日期的年份和月份并找出差异。**

```
 $date1 = '2000-01-25';
 $date2 = '2010-02-20';
 $d1=new DateTime($date2); 
 $d2=new DateTime($date1);                                  
 $Months = $d2->diff($d1); 
 $howeverManyMonths = (($Months->y) * 12) + ($Months->m); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T12:52:10.437

像这样：

```
$date1 = strtotime('2000-01-25');
$date2 = strtotime('2010-02-20');
$months = 0;

while (($date1 = strtotime('+1 MONTH', $date1)) <= $date2)
    $months++;

echo $months; 
```

如果要包括天数，请使用以下命令：

```
$date1 = strtotime('2000-01-25');
$date2 = strtotime('2010-02-20');

$months = 0;

while (strtotime('+1 MONTH', $date1) < $date2) {
    $months++;
    $date1 = strtotime('+1 MONTH', $date1);
}

echo $months, ' month, ', ($date2 - $date1) / (60*60*24), ' days'; // 120 month, 26 days 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-01T17:57:21.837

这就是我最终解决它的方式。我知道我有点晚了，但我希望这可以节省很多时间和代码行。
我使用 DateInterval::format 以年、月和日的形式显示人类可读的倒计时时钟。检查[https://www.php.net/manual/en/dateinterval.format.php](https://www.php.net/manual/en/dateinterval.format.php)以获取格式表，以查看有关如何修改返回值的选项。应该给你你正在寻找的东西。

```
$origin = new DateTime('2020-10-01');
$target = new DateTime('2020-12-25');
$interval = $origin->diff($target);
echo $interval->format('%y years, %m month, %d days until Christmas.'); 
```

输出：0 年，2 个月，24 天

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-29T13:36:29.520

这是我的解决方案。它只检查日期的年份和月份。因此，如果一个日期是`31.10.15`，另一个是`02.11.15`返回 1 个月。

```
function get_interval_in_month($from, $to) {
    $month_in_year = 12;
    $date_from = getdate(strtotime($from));
    $date_to = getdate(strtotime($to));
    return ($date_to['year'] - $date_from['year']) * $month_in_year -
        ($month_in_year - $date_to['mon']) +
        ($month_in_year - $date_from['mon']);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-31T18:02:19.987

我最近需要计算从产前到 5 岁（60 个月以上）的月龄。

上面的答案都不适合我。我尝试的第一个，这基本上是 deceze 答案的 1 班轮

```
$bdate = strtotime('2011-11-04'); 
$edate = strtotime('2011-12-03');
$age = ((date('Y',$edate) - date('Y',$bdate)) * 12) + (date('m',$edate) - date('m',$bdate));
. . . 
```

这在设定的日期失败，显然答案应该是 0，因为尚未达到月标记（2011-12-04），但代码返回 1。

我尝试的第二种方法，使用亚当的代码

```
$bdate = strtotime('2011-01-03'); 
$edate = strtotime('2011-02-03');
$age = 0;

while (strtotime('+1 MONTH', $bdate) < $edate) {
    $age++;
    $bdate = strtotime('+1 MONTH', $bdate);
}
. . . 
```

这失败并说 0 个月，当它应该是 1 时。

对我有用的是对这段代码的一点扩展。我使用的是以下内容：

```
$bdate = strtotime('2011-11-04');
$edate = strtotime('2012-01-04');
$age = 0;

if($edate < $bdate) {
    //prenatal
    $age = -1;
} else {
    //born, count months.
    while($bdate < $edate) {
        $age++;
        $bdate = strtotime('+1 MONTH', $bdate);
        if ($bdate > $edate) {
            $age--;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-09T04:18:55.043

我解决问题的功能

```
function diffMonth($from, $to) {

        $fromYear = date("Y", strtotime($from));
        $fromMonth = date("m", strtotime($from));
        $toYear = date("Y", strtotime($to));
        $toMonth = date("m", strtotime($to));
        if ($fromYear == $toYear) {
            return ($toMonth-$fromMonth)+1;
        } else {
            return (12-$fromMonth)+1+$toMonth;
        }

    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-22T17:04:35.957

我的解决方案是几个答案的混合。我不想做一个循环，特别是当我在 $interval->diff 中有所有数据时，我只是做了数学计算，如果就我而言，月数可能是负数，所以这是我的方法。

```
 /**
     * Function will give you the difference months between two dates
     *
     * @param string $start_date
     * @param string $end_date
     * @return int|null
     */
    public function get_months_between_dates(string $start_date, string $end_date): ?int
    {
        $startDate = $start_date instanceof Datetime ? $start_date : new DateTime($start_date);
        $endDate = $end_date instanceof Datetime ? $end_date : new DateTime($end_date);
        $interval = $startDate->diff($endDate);
        $months = ($interval->y * 12) + $interval->m;

       return $startDate > $endDate ? -$months : $months;

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-24T23:04:39.480

这个怎么样：

```
$d1 = new DateTime("2009-09-01");
$d2 = new DateTime("2010-09-01");
$months = 0;

$d1->add(new \DateInterval('P1M'));
while ($d1 <= $d2){
    $months ++;
    $d1->add(new \DateInterval('P1M'));
}

print_r($months); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-20T06:14:57.673

跟进@deceze 的回答（我对他的回答投了赞成票）。*即使第一个日期*的日期没有到达第二个日期的日期，月份仍将作为一个整体计算。

这是我关于包括这一天的简单解决方案：

```
$ts1=strtotime($date1);
$ts2=strtotime($date2);

$year1 = date('Y', $ts1);
$year2 = date('Y', $ts2);

$month1 = date('m', $ts1);
$month2 = date('m', $ts2);

$day1 = date('d', $ts1); /* I'VE ADDED THE DAY VARIABLE OF DATE1 AND DATE2 */
$day2 = date('d', $ts2);

$diff = (($year2 - $year1) * 12) + ($month2 - $month1);

/* IF THE DAY2 IS LESS THAN DAY1, IT WILL LESSEN THE $diff VALUE BY ONE */

if($day2<$day1){ $diff=$diff-1; } 
```

逻辑是，如果第二个日期的日期小于第一个日期的日期，它会将`$diff`变量的值减一。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-27T04:48:17.567

```
$date1 = '2000-01-25';
$date2 = '2010-02-20';

$ts1 = strtotime($date1);
$ts2 = strtotime($date2);

$year1 = date('Y', $ts1);
$year2 = date('Y', $ts2);

$month1 = date('m', $ts1);
$month2 = date('m', $ts2);

$diff = (($year2 - $year1) * 12) + ($month2 - $month1); 
```

如果月份从一月切换到二月，上面的代码将为您返回 $diff = 1 但如果您只想在 30 天后考虑下个月，则添加下面的代码行以及上面的代码行。

```
$day1 = date('d', $ts1);
$day2 = date('d', $ts2);

if($day2 < $day1){ $diff = $diff - 1; } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-03T15:46:26.627

要计算两个日期之间的日历月数（也如此问[）](https://stackoverflow.com/questions/13416894/calculate-the-number-of-months-between-two-dates-in-php)，我通常最终会做这样的事情。我将这两个日期转换为“2020-05”和“1994-05”之类的字符串，然后从下面的函数中获取它们各自的结果，然后对这些结果进行减法运算。

```
/**
 * Will return number of months. For 2020 April, that will be the result of (2020*12+4) = 24244
 * 2020-12 = 24240 + 12 = 24252
 * 2021-01 = 24252 + 01 = 24253
 * @param string $year_month Should be "year-month", like "2020-04" etc.
 */
static private function calculate_month_total($year_month)
{
    $parts = explode('-', $year_month);
    $year = (int)$parts[0];
    $month = (int)$parts[1];
    return $year * 12 + $month;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-31T14:09:16.453

```
function date_duration($date){
    $date1 = new DateTime($date);
    $date2 = new DateTime();
    $interval = $date1->diff($date2);
    if($interval->y > 0 and $interval->y < 2){
        return $interval->y.' year ago';
    }else if($interval->y > 1){
        return $interval->y.' years ago';
    }else if($interval->m > 0 and $interval->m < 2){
        return $interval->m.' month ago';
    }else if($interval->m > 1){
        return $interval->y.' months ago';
    }else if($interval->d > 1){
        return $interval->d.' days ago';
    }else{
        if($interval->h > 0 and $interval->h < 2){
            return $interval->h.' hour ago';
        }else if($interval->h > 1){
            return $interval->h.' hours ago';
        }else{
            if($interval->i > 0 and $interval->i < 2){
                return $interval->i.' minute ago';
            }else if($interval->i > 1){
                return $interval->i.' minutes ago';
            }else{
                return 'Just now';
            }
        }
    }
} 
```

返回 11 个月前、2 年前、5 分钟前的日期区分样式

例子：

```
echo date_duration('2021-02-28 14:59:00.00'); 
```

将根据您当前的月份返回“1 个月前”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-29T20:44:21.503

我只是想分享我写的函数。您可以通过输入相关的日期时间格式来修改它以获得月份和年份，以定义修饰符 aka modify("+1 something")。

```
/**
 * @param DateTimeInterface $start a anything using the DateTime interface
 * @param DateTimeInterface|null $end to calculate the difference to
 * @param string $modifier for example: day or month or year.
 * @return int the count of periods.
 */
public static function elapsedPeriods(
                       DateTimeInterface $start, 
                       DateTimeInterface $end = null, 
                       string            $modifier = '1 month'
): int
{

    // just an addition, in case you just want the periods up untill now
    if ($end === null ) {
        $end = new DateTime();
    }

    // we clone the start, because we dont want to change the actual start
    // (objects are passed by ref by default, so if you forget this you might 
    // mess up your data)
    $cloned_start = clone $start;

    // we create a period counter, starting at zero, because we want to count 
    // periods, assuming the first try, makes one period. 
    // (week, month, year, et cetera) 
    $period_count = 0;

    // so while our $cloned_start is smaller to the $end (or now).
    // we will increment the counter
    while ($cloned_start < $end) {
        // first off we increment the count, for the first iteration could end 
        // the cycle
        $period_count++;
        // now we modify the cloned start
        $cloned_start->modify(sprintf("+1 %s", $modifier));
    }

    return $period_count; // return the count
} 
```

干杯

# objective-c - 在 xcodebuild 期间未找到 RestKit/RestKit.h' 文件错误

> ID：13416900
> 
> 赞同：3
> 
> 时间：2012-11-16T12:48:10.670
> 
> 标签：objective-c, ios, xcode, jenkins, xcodebuild

我正在尝试使用 Jenkins-CI 自动构建一个使用 Restkit 的 iOS 项目，显然，restkit 作为一个项目驻留在主项目中。该项目使用 XCode-IDE 成功构建。

但是当我使用 xcodebuild（jenkins 使用它，并且我确实模拟了相同的）来构建它给出的项目时

```
error RestKit/RestKit.h file not found 
```

任何线索出了什么问题，这可以通过使用方案文件来纠正吗？如果有怎么办？或者我可以模拟一下，XCode-IDE 如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T05:48:34.953

我不认为我在回答这个问题，但一个适当的解决方法是使用 XCode 方案。还应将特定方案标记为共享。

这些链接可以提供帮助

[http://tetontech.wordpress.com/2011/05/26/command-line-building-using-xcode/](http://tetontech.wordpress.com/2011/05/26/command-line-building-using-xcode/)

[http://developer.apple.com/library/ios/#recipes/xcode_help-scheme_editor/Articles/SchemeManage.html](http://developer.apple.com/library/ios/#recipes/xcode_help-scheme_editor/Articles/SchemeManage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:55:11.883

我有完全相同的问题。我的解决方案：

首先你已经构建了 RestKit。之后，您可以构建您的项目。

如果您从项目的顶级目录运行脚本并且 restkit 在 RestKit 文件夹中：

```
xcodebuild -project RestKit/RestKit.xcodeproj -target RestKit -sdk iphonesimulator -configuration Debug clean build 
```

然后你可以建立你的项目。

如果这还不够，请将这两个添加到“标题搜索路径”中：

```
"$(BUILT_PRODUCTS_DIR)/../../RestKit/Build/Headers"
"$(BUILT_PRODUCTS_DIR)/../../Headers/RestKit" 
```

请注意，您必须将其添加到所有目标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T06:03:52.377

我猜你的问题和“ [Xcodebuild'ing a workspace and setting a custom build path](https://stackoverflow.com/questions/11965040/xcodebuilding-a-workspace-and-setting-a-custom-build-path/18327266#18327266) ”是一样的。使用绝对路径设置 SYSROOT，默认为相对路径。

# c# - 基于登录用户缓存部分

> ID：13416901
> 
> 赞同：2
> 
> 时间：2012-11-16T12:48:15.023
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, caching

我有一个包含大约 20 个控制器的 MVC 应用程序。

在这个应用程序中，我想将某些视图（主要是部分视图）缓存 60 秒，即结果每分钟只会更改一次，即使基础数据在那一分钟内发生了变化。

看起来很简单。

复杂之处在于，部分显示取决于当前登录用户的不同数据。如何确保缓存是每个使用 MVC3 的用户的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:53:57.983

您可以使用`OutputCacheAttribute`在控制器或逐个动作的基础上影​​响输出缓存，并使用`VaryByCustom`.

```
[OutputCache(Duration = 60, VaryByParam = "*", VaryByCustom="userName")] 
```

将其放在控制器上，然后进入 Global.asax.cs 并覆盖`GetVaryByCustomString`：

```
public override string GetVaryByCustomString(HttpContext context, string arg) 
{ 
  if(arg.ToLower() == “username” && context.User.Identity.IsAuthenticated) return context.User.Identity.Name;

  return base.GetVaryByCustomString(context, arg); 
} 
```

# emacs - emacs中的文本区域缩进

> ID：13416905
> 
> 赞同：2
> 
> 时间：2012-11-16T12:48:28.437
> 
> 标签：emacs

我正在努力做到

```
 It was the best of times ,
it was the worst of times,
it was the age of wisdom,
it was the age of foolishness. 
```

像这样

```
 It was the best of times ,
    it was the worst of times,
    it was the age of wisdom,
    it was the age of foolishness. 
```

对不起，我是新手......在书中它告诉我在设置区域标记后使用“ESC C-\”。我试过了，但是当我输入 Alt C 时，突出显示的区域消失了。

那么任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:57:52.897

在文本模式缓冲区中，如果您在第一个示例中标记文本并按`Ctrl`+ `Alt`+ `\`，您将获得第二个示例中的文本。此组合键运行命令`indent-region`。

我认为您正在使用文档中的语法。 `C-x`表示`Ctrl`+ `x`。

# c# - 如何根据另一个选择填充组合框？

> ID：13416910
> 
> 赞同：0
> 
> 时间：2012-11-16T12:48:46.190
> 
> 标签：c#, wpf, combobox

我打开一个显示两个组合框的模式对话框。第一个由代码填充列表。当用户选择一个条目时，第二个组合框需要更改其基础列表。例如：第一个框显示连接到计算机的所有网络摄像头，第二个框显示所选网络摄像头的可用分辨率/流媒体功能。

这是使用 System.Windows.Forms 完成的，但是在 Wpf 和 XAML 中执行此操作的最佳方法是什么？

![在此处输入图像描述](../Images/18125744831b34e8cafcaccfa5b64945.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:00:43.763

将第一个组合框的绑定`ItemsSource`到可用摄像机列表。对象应具有可用分辨率的属性。绑定`SelectedItem`到视图模型的属性。然后您可以将`ItemsSource`第二个组合框的属性绑定到`SelectedCamera.AvailableResolutions`或类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:14:03.410

这里有一个完整的代码示例供其他人学习。首先是 XAML，然后是代码隐藏。

```
<Window x:Class="CameraSelection.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:MyNamespace="clr-namespace:CameraSelection"
        Title="MainWindow" Height="350" Width="525">    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>        
        <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">Camera</TextBlock>
        <!-- 
        bind the source to MainWindow.Cameras; 
        set value onto MainWindow.Camera; 
        set the display member;
        auto-select first entry 
        -->
        <ComboBox Name="comboCameras" Grid.Row="0" Grid.Column="1" Margin="5" 
                  SelectedItem="{Binding Path=Camera, RelativeSource={RelativeSource AncestorType=MyNamespace:MainWindow}}" 
                  ItemsSource="{Binding Path=Cameras, RelativeSource={RelativeSource AncestorType=MyNamespace:MainWindow}}"
                  DisplayMemberPath="Name" 
                  SelectedIndex="0"
                  />
        <TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">Resolution</TextBlock>
        <!-- 
        bind the source to MainWindow.Resolutions; 
        set value onto MainWindow.Resolution;
        auto-select first entry;
        reload data according to MainWindow.PropertyChanged
        -->
        <ComboBox Name="comboResolutions" Grid.Row="1" Grid.Column="1" Margin="5" 
                  SelectedItem="{Binding Path=Resolution, RelativeSource={RelativeSource AncestorType=MyNamespace:MainWindow}}" 
                  ItemsSource="{Binding Path=Resolutions, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=MyNamespace:MainWindow}}" 
                  SelectedIndex="0"
                  />
    </Grid>
</Window>

public partial class MainWindow : Window, INotifyPropertyChanged
{
    Camera camera;

    #region Setters for SelectedItem

    public Camera Camera 
    {
        get { return camera; }
        set
        {
            if (value == camera)
                return;

            camera = value;
            OnPropertyChanged("Camera");            // camera has changed
            OnPropertyChanged("Resolutions");       // available resolution might have changed too
        }
    }

    public Size Resolution
    {
        get;
        set;
    }

    #endregion

    #region ItemSources

    public IEnumerable<Camera> Cameras
    {
        get
        {
            yield return new Camera { Name = "Integrated Webcam", Resolutions = new[] { new Size(800,600), new Size(640,480) } };
            yield return new Camera { Name = "USB Webcam", Resolutions = new[] { new Size(1024, 768), new Size(800, 600) } };
        }
    }

    public IEnumerable<Size> Resolutions
    {
        get
        {
            if (Camera == null)
                yield break;

            foreach (Size resolution in camera.Resolutions)
                yield return resolution;
        }
    }

    #endregion

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion

    public MainWindow()
    {
        InitializeComponent();
    }
}

public class Camera
{
    public string Name { get; set; }

    public IEnumerable<Size> Resolutions 
    {
        get; set;
    }
} 
```

# ios5 - 一个为ios sdk 6设计的应用程序，我可以在iPad1上测试它吗？

> ID：13416915
> 
> 赞同：0
> 
> 时间：2012-11-16T12:48:57.173
> 
> 标签：ios5, testing, ios6

在我的应用程序中一切正常，如果我将“部署目标”更改为 5.1 会改变什么？我必须删除所有的自动布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:09:18.850

是的，您还必须删除自动布局和 ios 6 特定的 api 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:22:14.117

只需添加到 samfisher 的答案，您必须进入每个 .xib 文件，然后转到右侧实用工具栏和第一个选项卡（文件检查器），然后取消选中“使用自动布局”。

# php - CTimeStampBehaviour 用于设置 create_time 和 update_time 使用 afterFind() 重置 create_time

> ID：13416917
> 
> 赞同：1
> 
> 时间：2012-11-16T12:49:06.917
> 
> 标签：php, datetime, yii, yii-behaviour

我正在使用 CTimeStampBehaviour 设置 create_time 和 update_time 在模型中使用 afterFind() 重置 create_time，基本上我正在设置要在前端显示的日期格式。但这不起作用，因为 create_time 在使用模型的 afterFind() 时发送 0000-00-00 00:00:00。当我在模型中评论 afterFind() 时它工作正常。

我在我的模型中使用了这个函数：

```
public function behaviors(){
return array(
    'CTimestampBehavior' => array(
        'class' => 'zii.behaviors.CTimestampBehavior',
        'createAttribute' => 'create_time',
        'updateAttribute' => 'update_time',
        'setUpdateOnCreate'=> true,
    )
);
} 
```

我在 yii 网站上看到了关于 CTimeStampBehavior 类的文档，它引用了 afterFind() 继承，但没有建议如何使用它。我在这样的模型中使用 afterFind() ：

```
protected function afterFind() {
parent::afterFind();
$this->create_time = Yii::app()->dateFormatter->formatDateTime(
        CDateTimeParser::parse(
            $this->create_time, 'yyyy-MM-dd hh:mm:ss'
        ), 'short', 'short'
    );
return true;
} 
```

任何人都可以建议使用 afterFind() 时为什么 create_time 是零填充的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:40:00.873

`create_time`当您在加载模型后保存模型并且 afterFind() 将值更改`create_time`为格式化日期时，将填充为零。这是因为当您现在保存模型时，您正试图将格式化的值发送到不理解格式的数据库并将值设置为`0000-00-00 00:00:00`.

当您实现`afterFind()`更改值格式的方法时，您必须实现`beforeSave()`将值设置回数据库可以理解的格式的方法。

直接在模型上格式化值通常是一个坏主意。当您执行严格的 MVC 时，视图的工作是正确格式化您的日期。

# eclipse - 使用 Sonatype Nexus 轻松更新 Eclipse 站点

> ID：13416919
> 
> 赞同：2
> 
> 时间：2012-11-16T12:49:12.710
> 
> 标签：eclipse, nexus, p2, sonatype, update-site

我正在为一个问题寻找更好的解决方案，我昨天解决了，但我不高兴；）

**我的任务**：使用 Nexus 创建一个功能齐全的 Eclipse 更新站点（可用于更新和目标平台定义）

**我的问题**：Nexus P2 网站的原始扩展只考虑插件（[Github：Nexus P2](https://github.com/sonatype/nexus-p2-repository-plugin)）

不幸的是，考虑功能的 Fork 也已经过时了。但我在[Maven P2 插件](https://github.com/reficio/p2-maven-plugin)中找到了解决方法。如果插件已分类，您可以使用 Eclipse 安装它。

因此，我寻找一种方法来对我的插件进行分类。我使用 Tycho 构建，但 Nexus 不考虑 Tycho 的元数据。所以我必须想办法让 Nexus 在没有 Tycho 的情况下对我的插件进行分类。**最后**，我[修补](https://github.com/nachtgold/nexus-p2-bridge-plugin/commit/c0941a2398efd7662dc3c8d64e91fd72d1eb18df)了 Nexus P2 桥接插件，并为每个插件添加了一个默认类别。另外，我们可以用这种方式来省略特征！

用Eclipse分类，我只知道repositories的组成。Tycho 也可以对存储库进行分类，但 Nexus 完全忽略了元数据。

* * *

有人对如何对插件或捆绑包进行分类有任何建议吗？目标是在 P2 Nexus 插件中使用这些元数据构建更有用的处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:47:54.517

Nexus 的主要目的是在构建之间交换工件，而不是交付给最终用户。因此，我怀疑 Nexus 是否特别适合您想要实现的目标。

如果您仍想使用 Nexus，我建议仅使用它来托管构建结果（如[本答案](https://stackoverflow.com/a/13365454/1523648)中所述），并将您的客户用作更新 URL 的位置托管为（可变）复合存储库，指向Nexus 中的构建结果存储库，在其他一些服务器上。（您也可以将组合存储为 Nexus 中的快照，但 URL 中的 SNAPSHOT 可能会造成混淆。）

但是，我不知道有任何好的工具支持这种方法。

# javascript - 在咖啡脚本文件中使用 erb 更改背景

> ID：13416931
> 
> 赞同：0
> 
> 时间：2012-11-16T12:49:59.323
> 
> 标签：javascript, css, ruby-on-rails, coffeescript, erb

我试图让它当用户从下拉列表中选择“白色”时，div 的背景图像变为白色图像，当他们选择“红色”时，它变为红色图像等。

我不得不使用咖啡脚本，因为我也在使用最好的宝石。我是coffeescript的新手，所以它可能是一个语法错误，但任何帮助将不胜感激！

user.js.coffee.erb：

```
jQuery ->
  $('.best_in_place').best_in_place()
  $('#background').css("background-image", "url("/assets/images/<% @user.background %>.jpg")") 
```

图像存储在 assets 中的 images 文件夹中。js.coffee.erb 文件存储在 assets 中的 javascripts 文件夹中。我收到以下错误：

> nil:NilClass 的未定义方法“背景”

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:13:58.313

我认为你不可能那样做。在生产环境中，这些 javascripts 应该被预编译，然后作为静态文件。它们不会在每次请求时更改以向不同的用户显示不同的背景。

一个可能的解决方案是设置`@user.background`为`background`标签的一个类。

# memory-management - 64 位操作系统的内存分配

> ID：13416934
> 
> 赞同：0
> 
> 时间：2012-11-16T12:50:06.423
> 
> 标签：memory-management, operating-system

内存分为两部分
1）为操作系统系统进程保留的一些内存部分
2）为用户进程保留的内存。
32 位操作系统为操作系统进程分配 4GB 内存。像这样为 64 位操作系统分配了多少内存空间（内存空间仅用于系统进程，即操作系统进程）。这个问题是面试时问我的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:53:21.983

我不清楚这个问题对 Windows 有多具体。从一般的角度来看，2 ^(32)给你约 40 亿，即 4GB。所以 2 ^(64)会给你 16[艾字节](http://en.wikipedia.org/wiki/Exabyte)（！）

请参阅[此处](http://en.wikipedia.org/wiki/64-bit_computing)了解更多信息。

> 一个 64 位寄存器可以存储 264 个（超过 18 个 quintillion）不同的值。因此，具有 64 位内存地址的处理器可以直接访问 264 字节（=16 exbibytes）的字节可寻址内存。

请注意附带条件。外部总线。仅仅因为 CPU 寄存器是 64 位宽，并不*一定*意味着外部总线的宽度相同。因此，CPU 和机器架构共同决定了实际限制。请注意标记[为“实用处理器的限制”](http://en.wikipedia.org/wiki/64-bit_computing#Limitations_of_practical_processors)的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:56:26.890

毕竟真的不是那么真实。

Windows 提供的不仅仅是 1 个内核或变体。

例如，市场上有支持 PAE 的内核的 Windows 操作系统，这足以证明您的说法不正确。

此外，Windows 的 32 位桌面版本无法提供 4Gb 的可寻址内存，而只能提供 ~3.5 。

**编辑** 请参阅[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)以获取详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:57:45.043

最大内存地址空间取决于您拥有的操作系​​统版本。

请参阅[物理内存限制：Windows 7](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx#physical_memory_limits_windows_7)

[在推动 Windows 的限制：物理内存](http://blogs.technet.com/b/markrussinovich/archive/2008/07/21/3092070.aspx)和[推动 Windows 的限制：进程和线程](http://blogs.technet.com/b/markrussinovich/archive/2009/07/08/3261309.aspx)中对此进行更多阅读

# c# - 跨任何文化的日期时间

> ID：13416936
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:50:17.483
> 
> 标签：c#, datetime, cultureinfo

我正在尝试将 DateTime 对象传递给我的网络服务。系统一直告诉我有一个 SqlDateOverflow 错误。我尝试将对象转换为字符串，但同样的错误仍然存​​在。

如何从使用某种文化的系统传递 DateTime 对象，而 Web 服务所在的服务器使用不同的文化？有没有办法标准化对象，以便任何系统，无论其文化如何，都可以将对象解析为其 DateTime 等效项？

我曾尝试使用 DateTime.Parse 方法、DateTime.TryParse 方法，甚至 DateTime.ParseExact 方法，但它们都导致“SqlDateOverflow”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:54:42.370

我总是将日期作为`ISO8601`格式的字符串传递

请参阅 [在 C# 中将 dateTime 转换为 ISO 格式 yyyy-mm-dd hh:mm:ss](https://stackoverflow.com/questions/1912894/c-sharp-convert-datetime-to-iso-format-yyyy-mm-dd-hhmmss)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:56:12.920

为避免此问题，您可以修改您在 Web 服务中调用的 SQL 脚本/过程，在开始时添加：

```
SET DATEFORMAT dmy; -- day/month/year 
```

或者

```
SET DATEFORMAT mdy; -- month/day/year 
```

这样，如果您将其作为格式正确的字符串传递，您的 SQL 引擎将始终正确处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:56:59.207

如果没有关于您要去/来自什么文化的更多细节，这可能会帮助您解决手头的问题

```
DateTime.Parse(yourDateTimeString,CultureInfo.InvariantCulture) 
```

# c# - 超出了跟踪大小配额。跟踪被截断

> ID：13416944
> 
> 赞同：0
> 
> 时间：2012-11-16T12:50:47.840
> 
> 标签：c#, wcf

我不断收到“超出跟踪大小配额。跟踪被截断。” 错误，即使我将 maxBufferPoolSize、maxReceivedMessageSize、maxArrayLength、maxBytesPerRead 值设置为 20000000

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_IRemoteRoutePlanner" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="20000000" maxReceivedMessageSize="20000000"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="20000000"
                        maxArrayLength="20000000" maxBytesPerRead="20000000" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WCFBetterplace/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IRemoteRoutePlanner"
                contract="RemoteBetterplaceReference.IRemoteRoutePlanner"
                name="WSHttpBinding_IRemoteRoutePlanner">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

您可以在这里查看项目代码：[https ://github.com/Vandborg/dm76-vandborg](https://github.com/Vandborg/dm76-vandborg)

链接到所有代码的原因是我真的不知道错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:06:11.447

```
<system.web>
   <compilation debug="true" targetFramework="4.0" />
   <httpRuntime executionTimeout="90" maxRequestLength="80000000"/>
</system.web> 
```

在 IIS 或 Visual Studio 主机应用程序中检查此项。

# security - Internet Explorer 8 - 首次访问后域的不同同源策略评级

> ID：13416945
> 
> 赞同：0
> 
> 时间：2012-11-16T12:50:56.390
> 
> 标签：security, internet-explorer, same-origin-policy

我的网页上有 (i) 框架。如果我尝试在 IE-8 上访问我的 webapp，它将无法按预期工作！一些 javascript 函数不会被调用。很明显，存在同源策略违规。frame-A 的 src 是 www.exa.com，frame-B 是 www.mple.com

现在，如果我打开一个新的浏览器选项卡并访问两个域一次，我的 web 应用程序将按预期运行。

IE-8 在这里发生了什么？似乎在会话中第一次访问域后，您“知道”该域并且它似乎比以前更信任？！

观察后立即出现的问题是：什么 javascript 代码可以模拟这种外国域的“预开放”？

提前致谢。

更新：似乎 IE 不接受第三方 cookie。根据这个我们的系统认为用户没有登录，所以他被抛出了。如果我们减少相关的 IE-Internet 选项，所有的工作都像预期的那样。我们仍在寻找支持带有默认选项的 IE-8 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:54:43.590

> 似乎 IE 不接受第三方 cookie。

部署[P3P 策略](http://en.wikipedia.org/wiki/P3P)，IE 中的默认设置将允许第三方 cookie。

浏览器会在各种情况下阻止第三方 cookie。例如，即使您有 P3P 策略，Safari 的默认设置也会阻止它们。因此，依赖它们通常不是一个好主意。

# java - 相机预览上出现绿色线条

> ID：13416947
> 
> 赞同：7
> 
> 时间：2012-11-16T12:50:59.830
> 
> 标签：java, android, camera, android-camera

我创建了一个相机预览，但在我的设备上，它在表面视图上显示绿色线条 - 这就是我所做的。它适用于我的一些设备，但只有少数三星设备会产生此类问题。

```
class Preview extends ViewGroup implements SurfaceHolder.Callback {
private final String TAG = "Preview";

SurfaceView mSurfaceView;
SurfaceHolder mHolder;
Size mPreviewSize;
List<Size> mSupportedPreviewSizes;
Camera mCamera;

Preview(Context context, SurfaceView sv) {
    super(context);

    mSurfaceView = sv;

    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void setCamera(Camera camera) {
    mCamera = camera;
    if (mCamera != null) {
        mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
        requestLayout();

        // get Camera parameters
        Camera.Parameters params = mCamera.getParameters();

        List<String> focusModes = params.getSupportedFocusModes();
        if (focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
            // set the focus mode
            params.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
            // set Camera parameters
            mCamera.setParameters(params);
        }
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // We purposely disregard child measurements because act as a
    // wrapper to a SurfaceView that centers the camera preview instead
    // of stretching it.
    final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
    final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
    setMeasuredDimension(width, height);

    if (mSupportedPreviewSizes != null) {
        mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
    }
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    if (changed && getChildCount() > 0) {
        final View child = getChildAt(0);

        final int width = r - l;
        final int height = b - t;

        int previewWidth = width;
        int previewHeight = height;
        if (mPreviewSize != null) {
            previewWidth = mPreviewSize.width;
            previewHeight = mPreviewSize.height;
        }

        // Center the child SurfaceView within the parent.
        if (width * previewHeight > height * previewWidth) {
            final int scaledChildWidth = previewWidth * height / previewHeight;
            child.layout((width - scaledChildWidth) / 2, 0,
                    (width + scaledChildWidth) / 2, height);
        } else {
            final int scaledChildHeight = previewHeight * width / previewWidth;
            child.layout(0, (height - scaledChildHeight) / 2,
                    width, (height + scaledChildHeight) / 2);
        }
    }
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where to draw.
    try {
        if (mCamera != null) {
            mCamera.setPreviewDisplay(holder);
        }
    } catch (IOException exception) {
        Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    if (mCamera != null) {
        mCamera.stopPreview();
    }
}

private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
    final double ASPECT_TOLERANCE = 0.1;
    double targetRatio = (double) w / h;
    if (sizes == null) return null;

    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;

    int targetHeight = h;

    // Try to find an size match aspect ratio and size
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }
    return optimalSize;
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    if(mCamera != null) {
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
        requestLayout();

        mCamera.setParameters(parameters);
        mCamera.startPreview();
    }
} 
```

}

![在此处输入图像描述](../Images/ab4f23af30dbee6cb8413bbba295424b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:42:12.613

相机在纵向时可能会出现奇怪的错误。除非您想花费大量时间为不同的设备寻找不同的解决方法，否则强烈建议您使用横向。

# angularjs - 在 Angular 中同步多个视图

> ID：13416949
> 
> 赞同：2
> 
> 时间：2012-11-16T12:51:08.133
> 
> 标签：angularjs

在过去的几天里，我们一直在为我们的 REST 服务编写一个新的基于 angular.js 的前端。到目前为止，事情进展顺利，我们已经构建了许多小页面和组件。

我们现在开始将这些东西集成到一个完整的应用程序中，并且想知道如何处理基于两个不同菜单的主视图。

我们希望所有这三个组件都根据一些全局状态进行更改。理想情况下由`$routeProvider`基于 url 控制。

我们可以想出几种方法来做到这一点。然而，它们似乎都不正确，我们没有找到关于 Angular 开发人员如何设想这样做的明确文档。

一些精简的片段：

索引.html

```
<!DOCTYPE html>
<html data-ng-app="myapp">
<head>
    ....snip...
</head>
<body>
    <div id="system-menu" data-ng-controller="MenuCtrl" data-ng-include="'partials/menu/system.html'"></div>
    <div id="main">
        <div id="main-menu" data-ng-controller="MenuCtrl" data-ng-include="'partials/menu/main.html'"></div>
        <div id="content" data-ng-view></div>
    </div>
</body> 
```

应用程序.js

```
var myapp = angular.module('myapp', ['ngResource', 'ui']).
    config(['$routeProvider', function($routeProvider) {
        $routeProvider.
            when('/messages', {
                templateUrl: 'partials/messages.html',
                controller: MessagesCtrl
            }).
            when('/messages/:messageId', {
                templateUrl: 'partials/messages.html',
                controller: MessagesCtrl
            }).
            ...snip...
            otherwise({
                redirectTo: '/messages'
        });
    }]); 
```

当用户单击指向 /messages/1 的链接时，我希望将控制器 messagesCtrl 用于视图。这很简单，并且可以按照上面的说明工作。然而，我的 MenuCtrl 并没有“注意到”这种情况发生，并且**手动广播**一条消息以让它知道页面更改，因此它可以显示子菜单对我来说似乎很难看。因为此消息的唯一原因是更新菜单会导致其他控制器的一些不需要的知识。

到目前为止，我们喜欢关于 angular.js 的文档，但它似乎在大局中缺乏。

任何人都可以为我们提供一个链接或一些关于惯用方式的指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T19:23:30.710

为了让您的菜单突出显示工作，您可以在菜单控制器中设置一个简单的方法，该方法从[$location](http://docs.angularjs.org/api/ng.$location)提供程序中读取当前路线。（快速模拟）

```
// Within your controller.
$scope.isActiveUrl = function (route) {
    return route === $location.path()
}
// 
Within the view
ng-class="{ 'active' : isActiveUrl('your/path') }" 
```

另请参阅： [如何突出显示当前菜单项？](https://stackoverflow.com/questions/12592472/how-to-highlight-a-current-menu-item-in-angularjs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:28:00.373

> 我们希望所有这三个组件都根据一些全局状态进行更改。理想情况下由基于 url 的 routeprovider 控制。

要在控制器之间进行通信，您可以创建一个服务，该服务可以将更改广播给所有订阅者。

查看视频中的以下 youtube 视频和 jsfiddles 链接

[http://www.youtube.com/watch?v=1OALSkJGsRw](http://www.youtube.com/watch?v=1OALSkJGsRw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T19:41:30.717

Venkat 是对的 - 使用服务。您需要在 MenuCtrl 中对正在更改的内容设置监视，以便它注意到更改。该事物可以是您公开的服务的属性，也可以是服务中函数的返回值。

当用户单击链接并且您位于第一个控制器中时，请在服务中设置一些指示菜单状态的内容。该元素是您想要在辅助控制器中监视的元素。然后，当这种情况发生变化时，级联效应是辅助控制器中的一个动作将触发，您可以使用刚刚设置的值做任何您想做的事情。

显然，您需要将这些服务注入到您的两个控制器中。

# c# - 班级规模错误

> ID：13416954
> 
> 赞同：1
> 
> 时间：2012-11-16T12:51:13.887
> 
> 标签：c#, .net, marshalling

我在将字节数组转换为类或结构时遇到问题。类是这样的：

```
[Serializable()]
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet = CharSet.Ansi)]
public class General {
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = Defines.CENTR_NAME_LENGTH + 1)] byte[] centralName;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = Defines.PROJECT_NAME_LENGTH + 1)] byte[] projectName;
    byte misc;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)] byte[] accessCode2;
    byte transmActive;
    byte transmHour;
    byte transmMin;
    [MarshalAs(UnmanagedType.U1)] public int Cp;
    [MarshalAs(UnmanagedType.U1)] public int Rp;
    [MarshalAs(UnmanagedType.U1)] public int Lcd;
    [MarshalAs(UnmanagedType.U1)] public int Relais;
    [MarshalAs(UnmanagedType.U1)] public int Pr;
    [MarshalAs(UnmanagedType.U1)] public int Sc;
    byte rd;
    byte reserve1;
    [MarshalAs(UnmanagedType.U1)] public int LocalCentrId;
    [MarshalAs(UnmanagedType.U1)] public int PrinterSel;
    [MarshalAs(UnmanagedType.U1)] public int Slave1;
    [MarshalAs(UnmanagedType.U1)] public int Slave2;
    [MarshalAs(UnmanagedType.U1)] public int Slave3;
    [MarshalAs(UnmanagedType.U1)] public int Master;
    [MarshalAs(UnmanagedType.U1)] public int AlarmRepeat;
    [MarshalAs(UnmanagedType.U1)] public int FaultRepeat;
    [MarshalAs(UnmanagedType.U1)] public int ResetSil1;
    [MarshalAs(UnmanagedType.U1)] public int ResetSil2;
    [MarshalAs(UnmanagedType.U1)] public int EvacDelayed1;
    [MarshalAs(UnmanagedType.U1)] public int EvacDelayed2;
    [MarshalAs(UnmanagedType.U1)] public int Led1;
    [MarshalAs(UnmanagedType.U1)] public int Led2;
    [MarshalAs(UnmanagedType.U1)] public int GenControl;
    [MarshalAs(UnmanagedType.U1)] public int ExtraGenControl;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = Defines.MAX_NMB_SIL_CONTROL)] byte[] silenceControls ;
    byte autoResetFault;
    byte autoResetSC;
    [MarshalAs(UnmanagedType.U1)] public int InitEvacDelay;
    [MarshalAs(UnmanagedType.U1)] public int SilenceEvacOff;
    byte summerTime;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)] byte[] accessCode1;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 16)] byte[] btPinCode;

    public string CentralName { get { return Encoding.ASCII.GetString(centralName); } set { centralName = Encoding.ASCII.GetBytes(value); } }
    public string ProjectName { get { return Encoding.ASCII.GetString(projectName); } set { projectName = Encoding.ASCII.GetBytes(value); } }
    public bool BackBeep { 
        get { 
            return (misc & 0x01) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x01;
            } else {
                misc ^= 0x01;
            }
        }
    }
    public bool StartStopEvac {
        get {
            return (misc & 0x02) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x02;
            } else {
                misc ^= 0x02;
            }
        }
    }
    public bool GenBehEvacKey {
        get {
            return (misc & 0x04) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x04;
            } else {
                misc ^= 0x04;
            }
        }
    }
    public bool GenBehEvacDet {
        get {
            return (misc & 0x08) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x08;
            } else {
                misc ^= 0x08;
            }
        }
    }
    public bool EvacDelayed {
        get {
            return (misc & 0x10) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x10;
            } else {
                misc ^= 0x10;
            }
        }
    }
    public bool SirService {
        get {
            return (misc & 0x20) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x20;
            } else {
                misc ^= 0x20;
            }
        }
    }
    public bool ResetSilService {
        get {
            return (misc & 0x40) != 0x00;
        }
        set {
            if (value) {
                misc |= 0x40;
            } else {
                misc ^= 0x40;
            }
        }
    }
    public string AccessCode1 { get { return Encoding.ASCII.GetString(accessCode1); } set { accessCode1 = Encoding.ASCII.GetBytes(value); } }
    public string AccessCode2 { get { return Encoding.ASCII.GetString(accessCode2); } set { accessCode2 = Encoding.ASCII.GetBytes(value); } }
    public bool EvacDirect { get { return transmActive == 0x01; } set { transmActive = (Byte)(value ? 0x01 : 0x00); } }
    public TimeSpan EvacDirectTime { get { return new TimeSpan(transmHour, transmMin, 0); } set { transmHour = (Byte)value.Hours; transmMin = (Byte)value.Minutes; } }
    public bool Rd { get { return rd == 0x01; } set { rd = (value ? (Byte)0x01 : (Byte)0x00); } }
    public List<int> SilenceControl {
        get {
            List<int> retVal = new List<int>();
            if (silenceControls != null) {
                foreach (byte b in silenceControls) {
                    retVal.Add(b);
                }
            }
            return retVal;
        } 
        set {
            silenceControls = new byte[Defines.MAX_NMB_SIL_CONTROL];
            for (int t = 0; t < Defines.MAX_NMB_SIL_CONTROL && t < value.Count; ++t) {
                silenceControls[t] = (Byte)value[t];
            }
        }
    }
    public bool AutoResetFault { get { return autoResetFault == 0x01; } set { autoResetFault = (Byte)(value ? 0x01 : 0x00); } }
    public bool AutoResetPower { get { return autoResetSC == 0x01; } set { autoResetSC = (Byte)(value ? 0x01 : 0x00); } }
    public bool SummerTime { get { return summerTime == 0x01; } set { summerTime = (Byte)(value ? 0x01 : 0x00); } }
    public string BtPinCode { get { return Encoding.ASCII.GetString(btPinCode); } set { btPinCode = Encoding.ASCII.GetBytes(value); } }

    public General() {
        Console.WriteLine("Create General");
        SetDefault();
    }

    public void SetDefault() {
        CentralName = "MD2400";
        ProjectName = "Limotec";
        Cp = 1;
        Rp = 0;
        Lcd = 0;
        Relais = 1;
        Pr = 0;
        Sc = 1;
        Rd = true;
        BackBeep = false;
        AccessCode1 = "654321";
        AccessCode2 = "123456";
        EvacDirect = false;
        EvacDirectTime = new TimeSpan( 0, 0, 0 );
        BtPinCode = "1111111111111111";
        SummerTime = true;
        GenControl = 1;
        ExtraGenControl = 0;
        SilenceControl.Add( 3 );
        InitEvacDelay = 2;
        EvacDelayed = false;
        StartStopEvac = false;
        SirService = false;
        ResetSilService = false;
        GenBehEvacKey = true;
        GenBehEvacDet = true;
        Master = 32;
        Slave1 = 0;
        Slave2 = 0;
        Slave3 = 0;
        AlarmRepeat = 0;
        FaultRepeat = 0;
        ResetSil1 = 0;
        ResetSil2 = 0;
        Led1 = 0;
        Led2 = 0;
        EvacDelayed1 = 0;
        EvacDelayed2 = 0;
        LocalCentrId = 0;
        AutoResetFault = true;
        AutoResetPower = true;
    }

    [OnDeserialized()]
    internal void OnDeserialized(StreamingContext contect) {
        Config.Singleton.Log.Info( string.Format( "General loaded: {0} {1}", CentralName, ProjectName ) );
    }
} 
```

当我执行 Marshall.SizeOf(typeof(General)) 时，我得到一个 ArgumentException。无法计算大小或偏移量。

如果我在同一个类中使用私有变量和公共属性会有问题吗？这些属性仅用于将变量转换为更有用的东西。（字节数组转换成字符串）

如何解决它，以便可以使用 Marshal.PtrToStructure 将字节数组放入类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:55:11.793

对我来说它只是工作：我得到 43，它与 2 * 21 + 1 一致。我检查了 .NET 2.0、3.5 和 4.5（对于 4.5，我检查了 x86 和 x64）——看起来很好。

不，属性无关紧要：marshal 代码只查看字段。

* * *

编辑：但是，**确实**发生的是数据不匹配：

> 无法封送类型，因为嵌入式数组实例的长度与布局中声明的长度不匹配。

您需要确保数组的长度正确 - 以下内容很难看，但可以正常工作（不要设置过长的字符串！）：

```
[MarshalAs(UnmanagedType.ByValArray, SizeConst = 21)]
byte[] centralName = new byte[21];
[MarshalAs(UnmanagedType.ByValArray, SizeConst = 21)]
byte[] projectName = new byte[21];
byte misc;

public string CentralName {
    get {
        int i = Array.IndexOf(centralName, (byte)0);
        if (i < 0) i = centralName.Length;
        return Encoding.ASCII.GetString(centralName, 0, i);
    }
    set {
        Array.Clear(centralName, 0, centralName.Length);
        Encoding.ASCII.GetBytes(value, 0, value.Length, centralName, 0);
    } }
public string ProjectName {
    get {
        int i = Array.IndexOf(projectName, (byte)0);
        if (i < 0) i = projectName.Length;
        return Encoding.ASCII.GetString(projectName, 0, i);
    }
    set {
        Array.Clear(projectName, 0, projectName.Length);
        Encoding.ASCII.GetBytes(value, 0, value.Length, projectName, 0);
    } } 
```

例如：

```
unsafe static void Main()
{
    int i = Marshal.SizeOf(typeof(General));
    General obj = new General { CentralName = "abc", ProjectName = "def" },
            clone;
    byte[] b = new byte[i];
    fixed(byte* a = b)
    {
        IntPtr ptr= new IntPtr(a);
        Marshal.StructureToPtr(obj, ptr, false);
        clone = (General) Marshal.PtrToStructure(ptr, typeof(General));
    }
    Console.WriteLine(clone.CentralName); // abc
    Console.WriteLine(clone.ProjectName); // def
} 
```

或者：

```
unsafe static void Main()
{
    int i = Marshal.SizeOf(typeof(General));
    General obj = new General { CentralName = "abc", ProjectName = "def" },
            clone;
    byte* a = stackalloc byte[i];

    IntPtr ptr= new IntPtr(a);
    Marshal.StructureToPtr(obj, ptr, false);
    clone = (General) Marshal.PtrToStructure(ptr, typeof(General));

    Console.WriteLine(clone.CentralName); // abc
    Console.WriteLine(clone.ProjectName); // def
} 
```

# c# - 检查 Windows 8 中的位置权限更改

> ID：13416961
> 
> 赞同：0
> 
> 时间：2012-11-16T12:51:34.343
> 
> 标签：c#, windows-8, microsoft-metro

我在我的 Windows 8 Metro 应用程序中使用 GeoLocator。假设用户已允许位置访问，我会获取他们的数据并将其保存到缓存中。当用户重新加载应用程序时，我不需要调用 GeoLocator，因为它在缓存中 - 一切都很好。

但是，如果用户关闭位置访问，我如何检测到这一点并相应地更新缓存，以便应用知道再次调用 GeoLocator？

我知道如果关闭该功能，GeoLocator 将会失败，但由于我的位置数据仍在缓存中，因此我不会调用 GeoLocator 来检测这一点。

我错过了一些明显的东西吗？有没有办法检测我错过的位置应用功能？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T19:17:44.767

您可以将 GetGeopositionAsync() 调用放入 try - catch。如果您收到“拒绝访问”异常，只需显示一个消息框，说明应用程序的位置权限已被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:14:51.087

我不确定我是否正确理解了您的问题，但有一句话：

*   缓存位置不是最好的主意。您无法保证在重新加载应用程序时，用户与应用程序暂停时处于相同的地理位置。在这种情况下，您应该在每次应用加载/恢复时调用 GeoLocator。

无论如何，如果您要检查位置是否已启用，则可以使用 GeoLocator 中的[StatusChanged](http://msdn.microsoft.com/en-US/library/windows/apps/windows.devices.geolocation.geolocator.statuschanged)事件。应用程序运行时位置设置的任何更改都将触发该事件。

但是如果应用程序被卸载则没有意义，事件不会被触发。

所以总而言之，如果你想知道在你的应用程序卸载时位置是否被禁用，除了每次加载应用程序时调用[Geolocator.GetGeoPositionAsync()](http://msdn.microsoft.com/en-us/library/windows/apps/br225537.aspx)并检查它是否失败之外别无他法。

希望有帮助。

# java - Gson 无法序列化

> ID：13416965
> 
> 赞同：0
> 
> 时间：2012-11-16T12:51:47.557
> 
> 标签：java, android

我正在开发应用程序，在该应用程序中我使用 Gson 解析来序列化包含一些数据数组的 json 对象..但是这里我解析的方法存在一些问题......它没有让我成功解析..我从未尝试过解析带有序列化注释的 Gson 库的 json 数据。你能告诉我我的错误在哪里吗？

**这是代码..**

```
 InputStream source = retrieveStream(url);

    Gson gson = new Gson();

    Reader reader = new InputStreamReader(source);
    GetAllAssetsResult response = gson.fromJson(reader, GetAllAssetsResult.class);

   private InputStream retrieveStream(String url) {

    DefaultHttpClient client = new DefaultHttpClient(); 

    HttpGet getRequest = new HttpGet(url);

    try {

           HttpResponse getResponse = client.execute(getRequest);
           final int statusCode = getResponse.getStatusLine().getStatusCode();

           if (statusCode != HttpStatus.SC_OK) { 
              Log.w(getClass().getSimpleName(), 
                  "Error " + statusCode + " for URL " + url); 
              return null;
           }

           HttpEntity getResponseEntity = getResponse.getEntity();
           return getResponseEntity.getContent();

    } 
    catch (IOException e) {
       getRequest.abort();
       Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
    }

    return null;

 } 
```

**这是序列化注释基础 Pojo：**

```
 package com.DemoGsonLib;

    import java.util.List;

    import com.google.gson.annotations.SerializedName;

        public class GetAllAssetsResult {

            public List<GetAllAssetsResult> getAllAssetsResult;

                @SerializedName("ATCOCode")
                public String ATCOCode;

                @SerializedName("AssetID")
                public String AssetID;

                @SerializedName("Bearing")
                public String Bearing;

                @SerializedName("CommonName")
                public String CommonName;

                @SerializedName("Locality")
                public String Locality;

                @SerializedName("Location")
                public String Location;

                @SerializedName("SMSNumber")
                public String SMSNumber;

                @SerializedName("Street")
                public String Street;
        } 
```

**json数据：**

```
{
  "GetAllAssetsResult": [
    {
      "ATCOCode": null,
      "AssetID": 1,
      "Bearing": null,
      "CommonName": null,
      "Locality": null,
      "Location": null,
      "SMSNumber": "Little Clare",
      "Street": null
    },
    {
      "ATCOCode": "34000000002",
      "AssetID": 2,
      "Bearing": null,
      "CommonName": "Gloucester Green Bus Station",
      "Locality": "Oxford City Centre",
      "Location": "50.4913",
      "SMSNumber": "oxfagwdw",
      "Street": "Gloucester Green"
    },
    { 
```

**错误**

```
11-16 13:16:26.805: WARN/System.err(1762): java.lang.NullPointerException
11-16 13:16:26.805: WARN/System.err(1762):     at com.DemoGsonLib.DemoGsonLibActivity.onCreate(DemoGsonLibActivity.java:39)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.Activity.performCreate(Activity.java:4533)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
11-16 13:16:26.805: WARN/System.err(1762):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 13:16:26.805: WARN/System.err(1762):     at android.os.Looper.loop(Looper.java:137)
11-16 13:16:26.805: WARN/System.err(1762):     at android.app.ActivityThread.main(ActivityThread.java:4517)
11-16 13:16:26.805: WARN/System.err(1762):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 13:16:26.805: WARN/System.err(1762):     at java.lang.reflect.Method.invoke(Method.java:511)
11-16 13:16:26.805: WARN/System.err(1762):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-16 13:16:26.805: WARN/System.err(1762):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-16 13:16:26.805: WARN/System.err(1762):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:05:48.730

您没有考虑在您的 pojo 中需要序列化一个 Json 数组这一事实

以下代码应该可以工作

```
public class GetAllAssetsResult
{
    @SerializedName("GetAllAssetsResult")
    public List<Asset> assets;

    class Asset
    {
        @SerializedName("ATCOCode")
        public String ATCOCode;

        @SerializedName("AssetID")
        public String AssetID;

        @SerializedName("Bearing")
        public String Bearing;

        @SerializedName("CommonName")
        public String CommonName;

        @SerializedName("Locality")
        public String Locality;

        @SerializedName("Location")
        public String Location;

        @SerializedName("SMSNumber")
        public String SMSNumber;

        @SerializedName("Street")
        public String Street;
    }
} 
```

# python - 如何使用 div 标签作为使用 BeautifulSoup 搜索 html 文档的起点

> ID：13416969
> 
> 赞同：0
> 
> 时间：2012-11-16T12:51:55.650
> 
> 标签：python, beautifulsoup

我有一个 HTML 文档，我想解析一个具有特定 id 的表，该表始终位于具有特定 id 的 div 标记中。这是我尝试过的：

```
soup = BeautifulSoup(html)
target_div = soup('div', {'id' : 'left'})
target_table = target_div.findNextSibling('table') 
```

显然那是行不通的。似乎我的第二条语句返回了一个 ResultSet 而不是在文档中移动我（我认为这是有道理的，但我不确定如何获得我需要的东西！）。进行这种解析的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:54:15.270

`findNextSibling`查找包含在与原始元素相同的父元素中的表`target_div`。您想查找*包含在*div 中的表。用于`.find()`：

```
target_div = soup.find('div', {'id' : 'left'})
target_table = target_div.find('table') 
```

对于简单的情况（例如包含的表），您可以使用标记名作为属性：

```
target_div = soup.find('div', {'id' : 'left'})
target_table = target_div.table 
```

您正在调用一个标签，这就像使用[`.find_all()`method](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#calling-a-tag-is-like-calling-find-all)。`.find_all()`返回[所有匹配的标签](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all)，一个列表。您必须遍历结果集，但由于您正在寻找一个*div*（使用它的 id），所以最好使用[`.find()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find)它只返回*一个*结果。

如果您确实需要处理多个匹配项，只需将结果`.find_all()`视为列表；循环它：

```
for element in soup.find_all('div')
    contained_table = element.find('table') 
```

或使用索引：

```
second_match = soup.find_all('div')[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:56:18.840

您还可以使用[CSS 选择器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)：

```
target_table = soup.select('div#yourid > table#yourtableid')[0] 
```

# javascript - 将文本块添加到 div 并设置宽度

> ID：13416971
> 
> 赞同：0
> 
> 时间：2012-11-16T12:52:14.713
> 
> 标签：javascript, jquery, css

我有画布

```
<div id="app-container">
    <div id="canvas-container">
        <div id="canvas"></div>
    </div>
</div> 
```

在CSS中我有

```
#canvas {
  position: absolute;
  background-color: white;
  width: 100%;
  height: 100%;
}

#app-container {
  height: auto !important;
  min-height: 100%;
}

#canvas-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
} 
```

我正在尝试将文本块添加到画布

```
$container= $("#canvas");
var $view = $("#template-textview").tmpl();
$("<div class=\"text-field\">" + me.text + "</div>").appendTo($view);
$view.appendTo($container); 
```

在该文本占据所有宽度之后。我怎么能告诉它只占用文本所需的宽度？

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:57:08.277

由于您使用的是块元素 ( `div`)，它自然会扩展到父宽度的 100%。

要解决这个问题，请尝试`inline-block`：

```
div.text-field { display: inline-block } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:57:32.847

有了这个 ？

```
#canvas {
    width: auto;
} 
```

# c# - 如何使用 C# 以编程方式裁剪图像

> ID：13416974
> 
> 赞同：0
> 
> 时间：2012-11-16T12:52:18.833
> 
> 标签：c#

我有一个 pdf 文件，我将首先保存为图像，然后裁剪该图像并将裁剪部分保存为新图像。我不知道如何裁剪我想要的部分。

这是 url 我们的实际图像如何看起来像 [这样](https://eshiponline.purolator.com/ShipOnline/shipment/getLabel.ashx?i=Jj9rW5SvclNNj9hf6bPh%2fsvR8ZbXYBG7ZF08%2b5ebYZ%2fgCZwEZpAokaDuO5RTCeLPwAdBUtd%2bCOjtS3WfMkkEKSjvalpxgnM4aQDlpNROUG5OQVSet5Kz4I3HIB76x2wAiOKGCJd1qHtbHL8P8ts%2fm1v4FnZDsF5RV%2fGNJk7TOnI%3d)

请点击链接，看看我应该提供什么值来提取左矩形。你能给我任何想法吗？

我得到了裁剪一部分图像的代码。这是一个以编程方式裁剪的示例。

```
Rectangle cropRect = new Rectangle(...);
Bitmap src = Image.FromFile(fileName) as Bitmap;
Bitmap target = new Bitmap(cropRect.Width, cropRect.Height);

using(Graphics g = Graphics.FromImage(target))
{
    g.DrawImage(src, new Rectangle(0, 0, target.Width, target.Height), 
                cropRect,                        
                GraphicsUnit.Pixel);
} 
```

我关心的是我应该在这里给出什么值来从图像中裁剪出确切的左侧矩形。`Rectangle cropRect = new Rectangle(...);`

谁能给我任何想法。谢谢我从这个 url 得到这个代码 [How to crop an image using C#?](https://stackoverflow.com/questions/734930/how-to-crop-an-image-using-c)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:56:15.790

由于这些标签非常标准，我不会尝试通过代码找出要裁剪的内容。只需将您的图片加载到图形编辑器中，它可以让您知道鼠标光标的坐标（Paint.Net 就是一个很好的例子）并找到您的上、左、右和下坐标。在您的程序中“硬编码”这些值并使用它们进行裁剪。

# php - 使用 mediawiki api 获取特定页面的完整历史记录

> ID：13416976
> 
> 赞同：2
> 
> 时间：2012-11-16T12:52:21.020
> 
> 标签：php, mediawiki, mediawiki-api

嗨，我已经在我的域中安装了媒体 wiki，并且我已经使用 api 使用以下函数获取页面详细信息

```
 $page->getSection('History'); 
```

但它只显示该特定页面的最后更新，而不是该页面的完整历史记录。谁能建议我如何使用[Mediawiki API](http://www.mediawiki.org/wiki/API%3aMain_page)获取页面的完整历史记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:58:50.340

我不熟悉您选择的客户端库，所以我会给您“普通”API url：[https ://en.wikipedia.org/w/api.php?action=query&prop=revisions&titles=New%20York&rvlimit= max&rvprop=timestamp|user|comment](https://en.wikipedia.org/w/api.php?action=query&prop=revisions&titles=New%20York&rvlimit=max&rvprop=timestamp|user|comment)（[此处描述的参数](https://www.mediawiki.org/wiki/API%3aProperties#revisions_.2F_rv)）。请注意 rvlimit=max 参数。您将获得 500 个修订而不是 1 个。请参阅文档以了解如何获取下一个 500。

修订查询通常只返回最新的修订，因此您可以尝试将“limit”、“rvlimit”或其他任何内容传递给您的客户端库，也许它支持它。如果没有，请尝试另一个或从头开始开发客户端。

# javascript - 比较两个输入字段 - 我做错了什么？

> ID：13416982
> 
> 赞同：0
> 
> 时间：2012-11-16T12:52:40.030
> 
> 标签：javascript, jquery

原谅我，但我才刚刚开始学习 Javascript。我正在尝试获取两个输入字段的总和，并且我想在每个 keyup 事件上更新结果“实时”。

目前，当在输入字段中输入值时，结果字段就会消失。

我究竟做错了什么？

太感谢了，

彼得

编辑：我多么愚蠢，我忘了发布代码

[http://jsfiddle.net/u7VwP/](http://jsfiddle.net/u7VwP/)

```
var inputFirst = $('#first'),
    inputSecond = $('#second'),
    inputFirstVal = inputFirst.val(),
    inputSecondVal = inputSecond.val();

function getResult(first, second) {
 var result = first + second;
 $('p#result').text(result);
};

inputFirst.on('keyup', function() {
 getResult(inputFirstVal, inputSecondVal);
});
inputSecond.on('keyup', function() {
 getResult(inputFirstVal, inputSecondVal);
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:00:17.503

```
inputFirstVal = inputFirst.val(),
inputSecondVal = inputSecond.val(); 
```

这些变量只初始化一次。您需要`val()`在要读取当前值的确切时刻调用。

见[http://jsfiddle.net/u7VwP/7/](http://jsfiddle.net/u7VwP/7/)

更新：已添加`parseInt`，因此您将添加数字而不是字符串。

请注意以下语法：

```
first = parseInt(first) || 0; 
```

如果 的结果`parseInt`是假的（例如`NaN`当我们无法解析数字时“不是数字”，或者是文字 0），则该值默认为运算符右侧的`||`0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:08:20.247

```
var inputFirst = $('#first'),
    inputSecond = $('#second');

function getResult() {
    var result = (parseInt(inputFirst.val()) || 0) + (parseInt(inputSecond.val()) || 0);
    $('#result').text(result);
};

inputFirst.on('keyup', function() {
    getResult();
});
inputSecond.on('keyup', function() {
    getResult();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:16:39.807

您必须阅读和思考 Javascript 代码的运行时。在您的示例中，当输入字段为空时会读取变量。因此，他们将永远是空的。您必须在将它们添加在一起的函数中读出它们。

此外，我建议您查看 jQuery 选择器。在以下代码中，为两个对象进行了绑定。

```
$(document).ready(function() {
    $('#first, #second').bind('keyup', function() {
        $('#result').val($('#first').val() + $('#second').val());
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:03:55.477

```
var inputFirst = $('#first'),
    inputSecond = $('#second'),
    inputFirstVal = inputFirst.val(),
    inputSecondVal = inputSecond.val();

function getResult(first, second) {
    var result = (parseInt(first) || 0) + (parseInt(second) || 0);
    //field.val() returns strings not numbers so parsing to ints. If letter is passed, consider it as 0
    $('p#result').text(result);
};

function handler()
{
  getResult(inputFirst.val() || 0, inputSecond.val() || 0); 
  // if value is null or undefined pass 0 to the function
}

inputFirst.on('keyup', handler);
inputSecond.on('keyup', handler);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:02:32.587

根据我的评论，getResult 函数将结束为：

```
function getResult() {
 inputFirstVal = inputFirst.val(),
 inputSecondVal = inputSecond.val();
 var result = inputFirstVal  + inputSecondVal ;
 $('p#result').text(result);
}; 
```

在更改时，您只需调用该函数：

```
inputFirst.on('keyup', getResult);
inputSecond.on('keyup', getResult); 
```

# grails - Spring Security Facebook 身份验证不起作用

> ID：13416987
> 
> 赞同：1
> 
> 时间：2012-11-16T12:52:47.893
> 
> 标签：grails, spring-security

[我刚刚从这里](http://grails.org/plugin/spring-security-facebook)安装了这个插件。

安装和配置后，整个应用程序停止工作。

当我点击我的应用程序的任何链接时，我收到此错误：

```
java.lang.NullPointerException: Cannot get property 'accessToken' on null object
    com.the6hours.grails.springsecurity.facebook.DefaultFacebookAuthDao.create(DefaultFacebookAuthDao.groovy:110)
    com.the6hours.grails.springsecurity.facebook.FacebookAuthProvider.authenticate(FacebookAuthProvider.groovy:39)
    com.the6hours.grails.springsecurity.facebook.FacebookAuthCookieTransparentFilter.doFilter(FacebookAuthCookieTransparentFilter.groovy:47)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

为什么会出现这个异常？

### 编辑：

我得到的例外是：

```
2012-11-16 18:58:28,662 [http-bio-8080-exec-1] ERROR facebook.FacebookAuthUtils  - Can't read data from Facebook
Message: Server returned HTTP response code: 400 for URL: https://graph.facebook.com/oauth/access_token?
    Line | Method
->>   96 | requestAccessToken in com.the6hours.grails.springsecurity.facebook.FacebookAuthUtils
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     90 | getAccessToken     in     ''
|     35 | authenticate . . . in com.the6hours.grails.springsecurity.facebook.FacebookAuthProvider
|     47 | doFilter           in com.the6hours.grails.springsecurity.facebook.FacebookAuthCookieTransparentFilter
|   1110 | runWorker . . . .  in java.util.concurrent.ThreadPoolExecutor
|    603 | run                in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . .  in java.lang.Thread

[http-bio-8080-exec-1] ERROR facebook.FacebookAuthProvider  - Creating user w/o access_token
[http-bio-8080-exec-1] ERROR [/presto].[gsp]  - Servlet.service() for servlet [gsp] in context with path [/presto] threw exception
Message: Cannot get property 'accessToken' on null object 
```

提前致谢。

# html - 计算的字体大小大于华硕 Nexus 7 上 CSS 中定义的大小

> ID：13416989
> 
> 赞同：9
> 
> 时间：2012-11-16T12:52:50.330
> 
> 标签：html, css

我在 Asus Nexus 7 上运行网页（用 jQueryMobile 编写）。我在 CSS 中将字体大小设置为 14px，但在调试期间（使用 PC 上的 Chrome）我可以看到它的计算大小是 22px。

HTML 代码如下所示：

```
<div data-role="content" class="ui-content" role="main">
    <div id="summaryContent">
        <div class="contentPanel">
            <div class="header">
                Some nice info with 14px
            </div>
            <div class="content">
                <div class="headerText">
                    Text with size of 22px (but should be 14px)
                </div>
                <div class="element">
                    Text with size of 22px (but should be 14px)
                    <span class="dateInfo"> 30.11.2012</span>
                </div>
                <div class="element">
                    Text with size of 22px (but should be 14px)
                    <span class="dateInfo"> 2012</span>
                </div>
                <div class="element">
                    Text with size of 22px (but should be 14px)
                    <span class="dateInfo"> 1981</span>
                </div>
                <div class="headerText">
                    Text with size of 22px (but should be 14px)
                </div>
                <div class="element">
                    Text with size of 22px (but should be 14px)
                </div>
                <div class="element">
                    Text with size of 22px (but should be 14px)
                </div>
            </div>
        </div>
    </div>
</div> 
```

div 是 14px，但下`class="header"`一个是 22px。

CSS 代码：

```
.contentPanel > div
{
    padding: 10px;
    font-size: 14px;
}

.contentPanel div.header,
{
    font-weight: bold;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

.contentPanel div.content
{
    color: #000000;
    border-radius: 0px 0px 5px 5px;
    border-bottom: 1px solid #B5B5B5;
}

.contentPanel div.content div.element {
    padding: 10px 10px 10px 0px;
    display: inline-block;
}
.contentPanel div.content span.dateInfo {
    color: #7a7a7a;
}

.headerText {
    color: #454545;
    font-weight: bold;
} 
```

我检查了文本缩放是 100%。是华硕 Nexus 7 的错误吗？有可能使它成为14px吗？在 iPad 和三星 Galaxy Tab 上一切正常。

### 2012 年 11 月 20 日更新：

我提出了建议的更改，但它们没有帮助。JavaScript 中的代码是这样工作的：

*   我在 JS 中创建 HTML

*   然后我将这个新创建的 HTML 插入 DOM

*   此时（在更改页面之前）在 Chrome 调试器（连接到 Nexus）中我可以看到 14px。
*   然后调用 jQueryMobile changePage() 并更改字体大小。

### 2012 年 11 月 20 日更新 #2

jQueryMobile 将类 ui-page-active 应用于应该显示在屏幕上的 DOM 树部分。

CSS：

```
.ui-mobile .ui-page-active { display: block; overflow: visible; } 
```

在应用这个类之前，字体大小是 14px，但在它之后，它会增加到 18px 或 22px。有时它工作正常。我在 iPad 和三星 Galaxy Tab 上检查了它，它工作正常。

有时再次进入页面会将字体大小恢复为 14px，旋转设备时也会发生类似的情况。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T02:12:01.657

这可能与[Font Boosting](https://bugs.webkit.org/show_bug.cgi?id=FontBoosting)有关。

要禁用特定元素，`max-height: 1000000px`请在元素、父元素或祖父元素上提供。

或者，提供

```
body, body * {
    max-height: 1000000px;
} 
```

在整个页面上禁用字体增强。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T02:06:24.113

[我在这里](https://stackoverflow.com/a/15261446/1156119)发布了您问题的潜在答案。

您的问题可能是由于 Chrome 的文本缩放设置，该设置出于可访问性原因将文本设置为特定比例。许多用户都在使用它，他们难以在手机上阅读小文本。您无法解决此问题，也不应尝试解决它，尤其是对于支持移动设备的网站。

![Chrome 可访问性选项](../Images/f91ea56e51e8245f61db94556cf6ef69.png)

我建议您要么忽略它，要么修改您的 CSS，使其支持略有不同的文本大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:42:41.917

没有 CSS 代码很难回答。

请查看从哪里获取属性，可能是从父元素继承的。您可以使用 firebug 或 Google Chrome 中的控制台（按 F12）并浏览 div。

您还可以在您的 css 规则中使用 !important “强制”使用属性：

```
.fontsize14px {
   font-size: 14px !important;
} 
```

还要检查您是否正确编写了属性或类名。有时只是一个错字的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-27T11:37:22.683

如果您在字体增强方面遇到问题，您可能需要检查是否在元数据中设置了视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-12T13:08:26.477

!important 标志对我没有帮助（Windows 桌面上的 Firefox）。我的情况是由于怪癖模式。

解决方案是要么使用标准模式，要么在怪癖模式中覆盖字体继承（在怪癖模式[中修复表格继承](https://developer.mozilla.org/en/docs/Fixing_Table_Inheritance_in_Quirks_Mode)）

1.  通过添加 doctype 声明来开启标准模式

    `<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

2.  或在怪癖模式下应用解决方法：

    ```
    table, caption { font-size: inherit; } 
    ```

    这同样适用于其他字体属性：

    ```
    font-weight: inherit;
    font-style: inherit;
    font-variant: inherit; 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-30T11:52:18.207

Chrome 有`Minimum font size`设置，它将覆盖您的`CSS`样式。如果你有这种风格：

```
.tiny-tiny-text { font-size: 1px; } 
```

但是设置为 7 px，你的字体大小永远不会小于 7 px。

[![在此处输入图像描述](../Images/056135a637e2101ccb84b981a9fa5343.png)](https://i.stack.imgur.com/nslSd.png)

# c# - 对象引用未设置为 dll 中对象的实例

> ID：13416992
> 
> 赞同：-1
> 
> 时间：2012-11-16T12:52:57.663
> 
> 标签：c#, windows, dll

我在我的应用程序中编写了这个方法，它工作正常。我决定为它创建一个 DLL 文件。但同样的方法给了我错误**对象引用未设置为 dll 中对象的实例**。代码是

```
public void Try(string conStr, string storedProcedure)
    {

        try
        {

            //create a connection string
            sqlCon = new SqlConnection(conStr);

            // create command
            sqlCmd = new SqlCommand(sqlCmd.CommandText, sqlCon);

            //add command type
            sqlCmd.CommandType = CommandType.StoredProcedure;

            // add the stored procedure name
            sqlCmd.CommandText = storedProcedure;

            //Open connection
            sqlCon.Open();

            // Execute transaction
            sqlCmd.ExecuteNonQuery();

        }
        catch (Exception e)
        {

            throw e;
        }
        finally
        {
            // Close connection
            sqlCon.Close();
        } 
```

错误发生在：

```
sqlCmd = new SqlCommand(sqlCmd.CommandText, sqlCon); 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:00:24.040

我肯定会尽量让您的连接在最短的时间内保持打开状态。我建议使用*using*语句。

```
public void Try(string conStr, string storedProcedure) {
    using (var sqlCon = new SqlConnection(conStr)) {
        // create command, also a local variable
        var sqlCmd = new SqlCommand();

        // set connection
        sqlCmd.Connection = sqlCon

        //add command type
        sqlCmd.CommandType = CommandType.StoredProcedure;

        // add the stored procedure name
        sqlCmd.CommandText = storedProcedure;

        //Open connection
        sqlCon.Open();

        // Execute transaction
        sqlCmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:57:32.473

您在设置其对应值之前调用 SQL 命令，您应该设置 CommandText 的值，然后实例化 SQL 命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:59:21.127

您尚未创建实例，`sqlCmd`并且试图将其传递`CommandText`给创建该对象的进程。您似乎将存储过程作为参数传递给执行，因此请尝试以下操作：

```
sqlCmd = new SqlCommand(storedProcedure, sqlCon); 
```

# sql - 总和中的小数舍入？

> ID：13416993
> 
> 赞同：5
> 
> 时间：2012-11-16T12:52:59.423
> 
> 标签：sql, decimal, rounding

我正在使用下表处理 SQLServer 2008：

```
id      user      program   seconds
------------------------------------
9999  'user01'    'pr01'       5 
```

列“秒”定义为小数 (14,0)，表中唯一的行是显示的行。

所以我尝试了一些查询：

Q1：

```
select seconds*0.95 from myTable
union all
select seconds from myTable 
```

它给出了我期望的结果：

```
4.75
5.00 
```

Q2：

```
select sum(seconds)*0.95 from myTable
union all
select sum(seconds) from myTable 
```

我期待与第一季度相同的结果，但我得到的结果是：

```
5
5 
```

问题 3：

```
select sum(seconds)*0.95 from myTable
union all
select sum(seconds)*1.00 from myTable 
```

在这种情况下，我得到了我期望的结果：

```
4.75
5.00 
```

所以，我想知道为什么第二季度没有得到预期的结果。~~我尝试了同样的例子，'秒'是小数（2,0）并且工作正常，所以我猜它与小数的大小有关，但在那种情况下，我无法弄清楚为什么 Q1 和 Q3 工作，而Q2 没有。~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:03:12.160

结果`sum(seconds)`是`numeric(38,0)`有意义的，因为您可以对任意数量的`numeric(14,0)`行求和，这样可以避免溢出较小的类型。

`numeric(38,0)`根据此处的[解释](http://blogs.msdn.com/b/sqlprogrammability/archive/2006/03/29/564110.aspx)，在顶部乘以`0.95`( ) 会得到结果。`numeric(2,2)``numeric(38,2)`

但是底部的部分`union`是`numeric(38,0)`这样的结果作为一个整体被转换成`numeric(38,0)`这再次是有意义的，因为`numeric(38,2)`总是可以毫无错误地转换成`numeric(38,0)`（尽管小数点后有数字丢失），但转换另一种方式根本不起作用非常大的数字。

您可以明确地铸造底部`numeric(38,2)`以避免这种情况。

```
SELECT sum(seconds) * 0.95 AS S
FROM   myTable
UNION ALL
SELECT CAST(sum(seconds) AS NUMERIC(38, 2))
FROM   myTable 
```

# c# - 是否可以同时在多个线程中运行 500 个不同的操作？

> ID：13416994
> 
> 赞同：2
> 
> 时间：2012-11-16T12:52:59.513
> 
> 标签：c#, multithreading, algorithm

比方说，我有一个包含 500 个对象的列表。对于每个对象，我正在调用一个函数来计算它的成本。因此，500 个调用中的每一个都独立于其他调用。整个过程大约需要 30 秒。难道不能同时运行所有 500 个任务，因为它们不相互依赖吗？我对多线程一无所知，因此我不知道它是否可以成为解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:56:23.723

您可以使用[Parallel.ForEach 方法](http://msdn.microsoft.com/en-us/library/dd992001.aspx)轻松地并行化工作：

```
Parallel.ForEach(items, item =>
{
    item.CalculateCost();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T12:59:17.583

运行单线程进程将仅使用您机器的一个核心（这确实允许其他核心运行操作系统和其他应用程序进程）。

您的进程听起来是多线程处理的一个很好的竞争者，但是您不需要每个进程都有一个新线程 - 这会在创建线程时产生开销，而且您将没有足够的内核来单独运行它们，因此他们将争夺 CPU 资源。

在 .Net4.0 中使用`Parallel.For`会巧妙地使用尽可能多的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T12:55:34.583

使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)为每个对象启动一个单独的任务。在任务中，您将调用该函数来计算它的成本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T13:02:16.563

> 难道不能同时运行所有 500 个任务，因为它们不相互依赖吗？

简而言之，**如果您有 500 个内核 ( [CPU](http://en.wikipedia.org/wiki/Central_processing_unit) )** ，可以。

[**在线程之间切换上下文**](http://en.wikipedia.org/wiki/Context_switch)是一个非常昂贵的过程，并且涉及暂停当前线程，这就是为什么每个 CPU 运行一个线程更有效的原因。

从 C# 4.0 开始，您可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)和[并行 LINQ (PLINQ)](http://msdn.microsoft.com/en-us/library/dd460688.aspx)，它简化[了 .NET Framework 中的并行编程](http://msdn.microsoft.com/en-us/library/dd460693.aspx)。

```
// IEnumerable<MyClass> items = ...

var results = items

  // Enables parallel execution of the query
  .AsParallel()

  // Specifies the method for creating values
  .Select(item => Calculate(item))

  // Waits for calculating all the values and returns the result (as an array)
  .ToArray(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T12:56:34.487

试试[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)

您可以在此处查看示例： [如何：编写简单的 Parallel.ForEach 循环](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T15:07:22.310

你能启动 500 个线程吗 - 是的。他们会同时运行吗？不。话虽如此，不幸的是，要使用的最佳线程数是一个比每个内核线程更复杂的问题。

例如，英特尔处理器的每个内核有两个执行管道（称为 u 和 v），允许乱序处理，根据条件，可以比顺序处理相同的两条指令更快地执行两条指令。问题是执行管道确实在核心内共享一些资源。他们分享：

缓存、分支预测资源、指令获取和解码以及执行单元。

这意味着执行两条指令的效率取决于缓存未命中和分支预测未命中等因素。优势在于指令在等待高延迟操作时阻塞（例如，在高速缓存未命中时将内存内容提取到高速缓存中），如果另一条管道中有另一条指令，则可以在等待时处理它。这绝对不会比两个独立的内核快，但通常比顺序指令处理更快（平均快大约 25%）。

要记住的另一件事是，操作系统还需要处理器上的一些时间来执行。Microsoft 对高效处理的最大线程数的建议是每个逻辑核心 25 个线程（没有超线程的每个物理核心有 1 个逻辑核心，有 HT 的每个物理核心有 2 个）（这是 IIS 中每个核心的默认最大线程数设置）。然而，应该注意的是，这是一个“经验法则”。找到真正最优的唯一方法是在给定的软件/硬件设置上进行测试。然而，硬件优化在实践中并不实用，也不推荐，因此需要“经验法则”。

# android - 在片段内创建活动，调用 onListItemClick 时没有任何反应

> ID：13416997
> 
> 赞同：0
> 
> 时间：2012-11-16T12:53:00.933
> 
> 标签：android, android-layout

嗨，我在代码 Q1 和 Q2 中有以下代码和 2 个问题

**Q1）**我在这个网站上读到你不能从片段内创建一个新的活动，所以如果我在一个片段内并且想做

```
Intent intent = new Intent(this, DetailActivity.class);
startActivity(intent); 
```

我该怎么做？

* * *

**Q2）** 而且似乎我没有进入我的 onListItemClick，我在这里做错了什么，是 OnListItemsClick 放错地方还是什么？

我有文件 ActionBarMain.java 创建一个新片段 Fragment1.java 波纹管

//ActionbarMain.java

```
 fram1 = new FragMent1();
        fragMentTra.addToBackStack(null);
        fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram1, "fram1");

//Fragment1.java
    import android.app.Fragment;
    import android.content.Intent;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;

    public class FragMent1 extends Fragment {

    private String[] bookNames;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        ListView listView = new ListView(getActivity());
        ArrayAdapter<String> array = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1);

        bookNames= bookNames();

        for (String str : bookNames)
            array.add(str);
        listView.setAdapter(array);
        return listView;
    }

    private String[] bookNames(){
        SimpleBookManager.getSimpleBookManager().count();
        bookNames = new String[SimpleBookManager.getSimpleBookManager().count()]; 
        for(int i=0; i < SimpleBookManager.getSimpleBookManager().count(); i++){
            bookNames[i]= SimpleBookManager.getSimpleBookManager().getBook(i).getTitle();
        }
        return bookNames;
    }

    public void onListItemClick(ListView l, View v, int position, long id) {
        //Q1)Nothing happens here nothing is printed out and I get no errors when I click on
        //an Item in the list, its like it don't come here, why?
        Log.d("test", SimpleBookManager.getSimpleBookManager().getBook(position).getTitle());
        Log.d("test", "jje");

        //Q2)Call the DetailActivity.java how to achive this since I'm inside a fragment?   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:57:34.560

A1)

```
Intent intent = new Intent(getActvity(), DetailActivity.class);
getActivity().startActivity(intent); 
```

这将打开详细活动。`getActivity()`返回放置您的片段的活动。

当我获得有关该问题的更多信息时，我将回答您的 Q2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:09:31.273

你为什么不使用 ListFragment ？

像这样的东西：

```
public class ListFragment extends android.support.v4.app.ListFragment {
    /*
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.Fragment#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    /*
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.Fragment#onActivityCreated(android.os.Bundle)
     */
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * android.support.v4.app.ListFragment#onListItemClick(android.widget.ListView
     * , android.view.View, int, long)
     */
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        Intent intent = new Intent(getActivity().getApplicationContext(),
                    DetailActivity.class);
            intent.putExtra("value", item);
            startActivity(intent);
        }

    }
} //END OF CLASS
//END OF FILE 
```

上面的代码对我有用。

# javascript - 序列化选择的装饰选择框？

> ID：13416998
> 
> 赞同：3
> 
> 时间：2012-11-16T12:53:01.610
> 
> 标签：javascript, jquery-chosen

有什么方法可以序列化用 selected.html 装饰的 html 表单元素。这是html片段：

```
<select data-placeholder="Please select a community..." multiple="multiple" class="community-select chzn-done" id="selBBJ" style="display: none;">
      <option></option>
      <option value="26">Awesome Private Community</option>
      <option value="1">Global Community</option>
      <option value="28">just another public community</option>
      <option value="25">New Awesome Public</option>
      <option value="27">Ololo community</option>
</select> 
```

**$(#some-select).val()**返回值但是 $(#some-select).serialize() - 返回空数组.. 其他没有**多个**正确序列化的元素.. 怎么做？

这是[在jsbin上播放代码的代码](http://jsbin.com/ojuyub/1/edit)

# graph - 概率等于 O(m)

> ID：13416999
> 
> 赞同：0
> 
> 时间：2012-11-16T12:53:07.097
> 
> 标签：graph, big-o, probability

假设 n 是网络的大小。

m 是 n 的函数。

从n个节点中创建一个节点的子集，一个节点的概率是p = O(m)。

p=O(m) 是什么意思，我如何根据给定的概率从 n 个节点中创建一个子集。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:36:06.190

单个节点的概率为 O(m(n))。因此，子集中必须有 O(m(n) * n) 个节点才能满足这个条件。这意味着您的子集大小将与您的 m 函数的乘积和集合的大小成比例地缩放。