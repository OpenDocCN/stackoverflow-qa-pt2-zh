# StackOverflow 问答 16022000-16022999

# java - 将空字符串设置为 xsi:nil=true

> ID：16022005
> 
> 赞同：0
> 
> 时间：2013-04-15T18:13:46.257
> 
> 标签：java, rest, jersey, jaxb2, xml-nil

我有这门课

```
package com.ni.schemas.provider_framework._1.providers;

import java.math.BigInteger;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

/**
 * 
 *                 This is the top-level for a Request. 
 *                 Providers may extend this type if needed, but may not restrict it by blocking the pre-defined elements
 *             
 * 
 * <p>Clase Java para RequestErrorType complex type.
 * 
 * <p>El siguiente fragmento de esquema especifica el contenido que se espera que haya en esta clase.
 * 
 * <pre>
 * &lt;complexType name="RequestErrorType">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="httpResponseCode" type="{http://www.w3.org/2001/XMLSchema}integer"/>
 *         &lt;group ref="{http://www.ni.com/schemas/provider-framework/1/providers}ErrorElementGroup"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "RequestErrorType", propOrder = {
    "httpResponseCode",
    "summary",
    "userMessage",
    "detail"
})
public class RequestErrorType {

    @XmlElement(required = true)
    protected BigInteger httpResponseCode;
    protected String summary;
    protected String userMessage;
    protected String detail;

    /**
     * Obtiene el valor de la propiedad httpResponseCode.
     * 
     * @return
     *     possible object is
     *     {@link BigInteger }
     *     
     */
    public BigInteger getHttpResponseCode() {
        return httpResponseCode;
    }

    /**
     * Define el valor de la propiedad httpResponseCode.
     * 
     * @param value
     *     allowed object is
     *     {@link BigInteger }
     *     
     */
    public void setHttpResponseCode(BigInteger value) {
        this.httpResponseCode = value;
    }

    /**
     * Obtiene el valor de la propiedad summary.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getSummary() {
        return summary;
    }

    /**
     * Define el valor de la propiedad summary.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setSummary(String value) {
        this.summary = value;
    }

    /**
     * Obtiene el valor de la propiedad userMessage.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getUserMessage() {
        return userMessage;
    }

    /**
     * Define el valor de la propiedad userMessage.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setUserMessage(String value) {
        this.userMessage = value;
    }

    /**
     * Obtiene el valor de la propiedad detail.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getDetail() {
        return detail;
    }

    /**
     * Define el valor de la propiedad detail.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setDetail(String value) {
        this.detail = value;
    }

} 
```

如果我想将 userMessage 变量设置为 null，在显示时，只是显示这个

```
<userMessage /> 
```

我需要显示

```
<userMessage xsi:nil="true" /> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:23:49.627

编组时使用以下内容将 null 视为 nil

```
@XmlElement(nillable = true)
protected String userMessage; 
```

如果 WSDL/XSD 将元素定义为 nillable，则代码生成将生成以下内容

```
protected JaxbElement<String> userMessage; 
```

我可以从您的 javadoc 中看出，生成的代码不是您今天使用的。如果您遇到其他人的网络服务，我建议从他们的 wsdl 生成正确的 dto 对象。您可以查看在 jdk/bin 目录中找到的 xjc.exe 和 wsdl.exe 的文档。

# java - Java 方法扩展而不是覆盖

> ID：16022009
> 
> 赞同：4
> 
> 时间：2013-04-15T18:14:03.013
> 
> 标签：java, inheritance, annotations

Java中是否有某种类型的@annotation或其他方法来强制方法扩展，而不是覆盖？

具体来说，假设我有一个类 Foo：

```
class Foo {
    public void bar(Thing thing) {
        // ...
    }
} 
```

有没有一种方法可以在编译时强制任何扩展 Foo 并且还覆盖 bar 的类 X 调用`super.bar(thing)`first？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:15:14.253

不，你必须明确地写出来。

构造函数的旁注：实例化子类时将隐式调用超类的空构造函数，无论后者的构造函数有多少参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:20:59.830

通常，您可以做的是创建一个`final`调用可扩展方法的方法。

```
class Foo {

    @Override
    public final void bar(Thing thing) {
        // super code comes here
        this.doBar(thing);
    }

    public abstract void doBar(Thing thing);

} 
```

你打电话时

```
foo.bar(thing); 
```

您的超级代码首先运行，然后是子类中的代码。

通过这种方式，您可以保护您的全部`bar`逻辑，并且只允许扩展/重新实现某些部分。

此外，它还允许您对结果进行*后处理*，或将代码*分解*为某些子任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:22:54.653

您可以声明`bar`为`final`，然后从 调用抽象方法`bar`，这将强制子类实现“扩展”。

```
abstract class Foo {
    public final void bar(Thing thing) {
        barImpl(thing);
        overrideMe(thing);
    }

    private final void barImpl(Thing thing) {
        // Original implementation of "bar" here.
    }

    protected abstract void overrideMe(Thing thing);
} 
```

**编辑**

我已从 更改`overrideMe`为`public`，`protected`因此用户`Foo`不能只调用`overrideMe`而不是`bar`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:43:30.400

虽然您不能强制代码在编译时调用其超类，但在运行时检测代码不调用超类时并不难。

```
class Foo {
    private boolean baseCalled;
    public final void bar(Thing thing) {
        baseCalled = false;
        barImp(thing);
        if (!baseCalled) {
            throw new RuntimeException("super.barImp() not called");
        }
    }
    protected void barImp(Thing thing) {
         baseCalled = true;
         . . . // base class implementation of bar
    }
} 
```

请注意，这扩展到多个继承级别，无需进一步阐述。该方法特别适用于从内部调用的方法`Foo`；在这些情况下，您通常可以放弃`final`限定符并重定向到实现方法，而只需定义基类方法来设置标志。清除标志将在每个调用点完成。

上述模式在 Android 框架中被广泛使用。它不保证在子类覆盖中`super.barImp`被称为*第一件事*；只是它被称为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T19:11:34.783

`@AroundInvoke`如果您使用的是 EJB，您可以尝试使用注解。

通过使用反射，您可以在*父*类中找到相同的方法，并且可以使用与调用原始方法相同的参数来调用它。

请注意，在这种情况下，您必须避免`super.bar(thing)`调用，否则它们将被调用两次。

# c++ - c ++调用具有多重继承的基类的虚拟运算符==

> ID：16022011
> 
> 赞同：0
> 
> 时间：2013-04-15T18:14:20.680
> 
> 标签：c++, operator-overloading, multiple-inheritance

鉴于以下摘录：

```
class Interface {
public:
    virtual bool operator==(const Interface &other) const = 0;
    virtual void print(ostream& sout) const = 0;
};

class A : virtual public Interface {
public:
    virtual bool operator==(const Interface &other)const;
    virtual void print(ostream& sout)const;

protected:
    short m_foo;
};

class B : virtual public Interface {
public:
    virtual bool operator==(const Interface &other)const;
    virtual void print(ostream& sout) const;

protected:
    short m_bar;
};

class C: public A, public B {
public:
    virtual bool operator==(const Interface &other) const;
    virtual void print(ostream& sout) const;
}; 
```

在 C.cpp 中，我试图实现 operator==：

```
bool C::operator==(const Interface &other) const {
    try {
        // This works, but it's duplicating code from A.cpp and B.cpp
        const C& otherC = dynamic_cast<const C&>(other);
        return (m_foo == otherC.m_foo && m_bar == otherC.m_bar);

        // This doesn't work -- it calls C::operator== instead of
        // A::operator== and B::operator== (infinite recursion).
        /*
        return (dynamic_cast<const A&>(*this) ==
                dynamic_cast<const A&>(other) &&
                dynamic_cast<const B&>(*this) ==
                dynamic_cast<const B&>(other));
                */
    } catch (bad_cast e) {
        return false;
    }
} 
```

我可以让它为输出方法工作，但我不知道在覆盖运算符时如何做等效的事情：

```
void C::print(ostream& sout) const {
    A::print(sout);
    sout << " ";
    B::print(sout);
} 
```

有没有办法调用基类的虚拟运算符，而不是像添加一个虚拟的 equals() 方法并让 operator== 调用它？

（注意：此代码基于家庭作业的一小部分，以防万一。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:18:16.600

您需要明确命名要使用的运算符。

代替：

```
 return (dynamic_cast<const A&>(*this) ==
            dynamic_cast<const A&>(other) &&
            dynamic_cast<const B&>(*this) ==
            dynamic_cast<const B&>(other)); 
```

有**编辑：更正**

```
 return (A::operator==( other ) &&
            B::operator==( other )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:37:48.243

```
return A::operator==(other) && B::operator==(other); 
```

这两个基类应处理 中的任何类型错误`other`，因此您无需在这里做任何事情。

编辑：重写代码以使用显式调用。

# php - PHP表单'冷却计时器'

> ID：16022016
> 
> 赞同：1
> 
> 时间：2013-04-15T18:14:43.713
> 
> 标签：php

好的，基本上我有一个用户提交的表单，但我需要一个“冷却计时器”，以便用户在给定的时间内不能再次提交它。我无法找到如何在 php 中执行此操作，如果可能的话，这将是首选。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T22:36:24.730

您可以将上次成功提交的时间戳存储在数据库（例如：MySQL）中，并在每次提交时检查数据库中的值 + 冷却时间是否小于或等于当前时间戳。你可以在 PHP 中使用`time()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T21:13:40.037

您必须为此使用会话！

当用户提交表单时，您必须将时间戳添加到他的会话中：

```
$_SESSION['last_submit'] = time(); 
```

现在，当他再次提交表单时，只需比较时间戳，例如：

```
if(isset($_SESSION['last_submit']) && ((time() - $_SESSION['last_submit']) < 60 * 5)) { //time in seconds! 60 seconds = 1 Minute and 1 minute * 5 = 5 minutes!
    die('Wait a few');
}
$_SESSION['last_submit'] = time();
// regular form processing here! 
```

我们在这里要做的是首先检查：是否设置了先前的时间戳？然后如果`time() - lastsubmit`少于 5 分钟。如果这些都返回 true，则表单被“提前”提交，我们就干脆死了。如果不是，我们刷新会话的时间戳并继续。

当然不要忘记开始会话！

```
session_start(); 
```

在页面的最顶部！

正如我在评论中读到的（再次感谢！），用户可以使用另一个浏览器或清除 cookie。为了防止这种情况（尽可能好），您还必须考虑 IP。

为此，您必须使用服务器端数据库！将客户端的 IP 连同时间戳一起存储到该数据库中，然后在您的 if 语句中，您不需要从会话中获取时间戳，而是从数据库中获取。使用客户端的 IP 来获取关联。时间戳。

# c# - SetFocus 使用 JavaScript 从代码后面控制

> ID：16022017
> 
> 赞同：0
> 
> 时间：2013-04-15T18:14:48.027
> 
> 标签：c#, javascript, jquery, asp.net, code-behind

我正在尝试使用 registerStartupScript 方法将焦点设置到页面控件（文本框）。然而，我一直没有成功。这是我尝试过的：

```
ClientScript.RegisterStartupScript(this.GetType(), "SetFocus", "<script>document.getElementById('" + this.tbAdjust.ClientID + "').focus();</script>"); 
```

和：

```
ClientScript.RegisterStartupScript(GetType(), "focus", "<script>$('" + this.tbAdjust.ClientID + "');</script>"); 
```

好像拿不到 似乎是一个非常直截了当的问题，如果你们都需要更多代码，请告诉我。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:30:09.373

通常`tbAdjust.Focus();`在后面的代码应该可以工作。这是脚本。

## 没有阿贾克斯

```
ClientScript.RegisterStartupScript(this.GetType(), "focus", 
"document.getElementById('" + this.tbAdjust.ClientID + "').focus();", true); 
```

## 与阿贾克斯

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "focus", 
"document.getElementById('" + this.tbAdjust.ClientID + "').focus();", true); 
```

如果你想使用jQuery，你需要在前面加上#。

例如， `"$('#" + this.tbAdjust.ClientID + "').focus();"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:19:38.347

jQuery 的 .ready() 方法不起作用吗？

```
$(document).ready(function() {
    $('#target').focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:34:19.040

尝试 Page.RegisterClientScriptBlock 代替：

```
Page.RegisterClientScriptBlock("SetFocus", "<script>document.getElementById('" + this.tbAdjust.ClientID + "').focus();</script>"); 
```

# objective-c - 分配属性、ARC 和 Core Foundation 对象

> ID：16022019
> 
> 赞同：4
> 
> 时间：2013-04-15T18:14:51.527
> 
> 标签：objective-c, automatic-ref-counting, core-foundation

## 编辑 2。

多亏了[肯](https://stackoverflow.com/users/1312143/ken-thomases)，这现在可以工作了。我什至认为我明白为什么:-)

这是修改后的行：

```
- (void) reCreatePath {
    CGMutablePathRef p = ::CGPathCreateMutable() ;

    ::CGPathMoveToPoint         (p, 0, TL.x, TL.y) ;
    // [snip]
    ::CGPathAddLineToPoint      (p, 0, BL.x, BL.y) ;
    ::CGPathCloseSubpath(p) ;

    self.path = p ;
    ::CGPathRelease(p) ;   // <<== THIS IS IT!! :-)
} 
```

## 编辑。

我还是不明白。我尝试了 Chuck 的建议：

```
@property (nonatomic, strong) __attribute__((NSObject)) CGPathRef  path ; 
```

像这样：

```
@interface TopLeftSlidingView  ()

@property (nonatomic, strong) __attribute__((NSObject)) CGPathRef  path ;

@end 
```

在我重新创建 CGPath 的地方：

```
- (void) reCreatePath {
    CGMutablePathRef p = ::CGPathCreateMutable() ;

    ::CGPathMoveToPoint         (p, 0, TL.x, TL.y) ;
    // [snip]
    ::CGPathAddLineToPoint      (p, 0, BL.x, BL.y) ;
    ::CGPathCloseSubpath(p) ;

//    self.path = (__bridge CGMutablePathRef) p ;
//    self.path = (__bridge_transfer CGMutablePathRef) p ;
//    self.path = (__bridge_retained CGMutablePathRef) p ;
    self.path = p ;
} 
```

三个注释掉的行中的任何一个都会导致编译器错误。未注释的行会编译，但会生成分析器警告：

```
/Users/verec/Projects/WordGame/WordGame/classes/TopLeftSlidingView.mm:211:26:
 Call to function 'CGPathCreateMutable' returns a Core Foundation object with
 a +1 retain count 
```

其次是：

```
/Users/verec/Projects/WordGame/WordGame/classes/TopLeftSlidingView.mm:225:5:
 Object leaked: object allocated and stored into 'p' is not referenced later 
 in this execution path and has a retain count of +1 
```

我就是不明白 ：（

* * *

考虑：

```
@interface Test : NSObject

@property (nonatomic, assign) CGColorRef color ;

@end

@implementation Test

- (void) dealloc {
    if (self.color) {
        ::CGColorRelease(self.color) ;
        self.color = 0 ;
    }
}

- (id) init {
    if (self = [super init]) {
        self.color = ::CGColorRetain([UIColor blueColor].CGColor) ;
    }
    return self ;
}

@end 
```

除了分析器不断报告警告之外，这一切都可以正常编译（并且看似运行）。

本质上，这段代码的意思是：“请 ARC，不要费心做任何事情`color`，请像对待任何其他`assign`属性一样对待它，无论是 BOOL 还是 CGFloat，我正在处理所有内存管理我自己一个人！”

除了 ARC 不听我的，还在抱怨！

我在这里阅读了很多关于 SO 的问题，但似乎没有一个能解决这个问题......

这里的关键点，编译器（尽管不是分析器）似乎同意，通过声明属性“分配”，我声称自己可以处理这一切......

所以我一定是错的，但我只是不明白为什么......

怎么了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T18:47:40.527

如果您使用的是自动合成的 getter 和 setter，那么这里确实存在内存管理问题。在 setter 中，您的 CGColor 需要被释放并保留新值，但`assign`访问器不会为您执行此操作 - 它实际上只是将新指针值分配给变量。您需要实现自己的访问器才能正确管理内存。

但是，如果您愿意，ARC 可以为您处理此问题，而无需您自己动手。像这样声明它：

```
@property(nonatomic, strong) __attribute__((NSObject)) CGColorRef color; 
```

# php - 如何在 PHP 中获取字符串的特定部分

> ID：16022020
> 
> 赞同：0
> 
> 时间：2013-04-15T18:14:51.633
> 
> 标签：php, regex, string, preg-match

我有一个遵循以下语法的不同字符串：x-y12h-z13-1

我希望能够使用 PHP 获取“z”之后的整数。在这个例子中，它将是 13。我不确定找出它的最佳方法，而且我非常不擅长正则表达式。

任何帮助是极大的赞赏。

编辑：字符串在“z”整数值之前和之后的长度也可以不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:21:26.713

```
<?php
preg_match('/(?<=z)\d+/', 'x-y12h-z13-1', $matches);
var_dump($matches[0]); 
```

匹配一个或多个前面带有 az 的数字。[http://codepad.viper-7.com/X5mu2m](http://codepad.viper-7.com/X5mu2m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:30:05.143

```
$your_integer = (int)substr($str, strpos($str, "z") + 1); 
```

这会找到第一个 z，然后切断字符串，包括 z。

然后我依靠 PHP 的转换行为读取第一个字符，直到它找不到更多数字并将它们转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:28:26.463

如果“z”是真正稳定的值，那么

```
$subject = "x-y12h-z13-1";
$pattern = '/-z(\d*)-/i';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches);

echo $matches[1][0]; 
```

如果结构稳定，则

```
$subject = "x-y12h-z13-1";
$pattern = '/^.*-.*-\w(\d*)-.*/i';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches);

echo $matches[1][0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:28:34.957

字符串的一般正则表达式：

```
<?php

$value = preg_match('/^x-y(\d+)h-z(\d+)-(\d+)/','x-y12h-z13-1', $matches); 
print_r($matches); 
```

$matches[2] 包含 'z' 之后的值

输出：

```
Array
(
    [0] => x-y12h-z13-1
    [1] => 12
    [2] => 13
    [3] => 1
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T18:29:40.507

这段代码应该适合你

```
$string = "x-y12h-z13-1";

$expl = explode("-", $string);
$str = "";   
foreach ($expl as $arr) {
    $strpos = "";
    $strpos = strstr( $arr, "z"); 

    if ($strpos) { 
        $str = substr($arr, "1",strlen($arr));
    }

}

echo $str; 
```

$str 将使您的字符串输出为 13。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T18:27:41.857

您也可以使用字符串函数提取它，这是示例：

$a = 'x-y12h-z13-1'; echo substr(strstr($a,'z'),1,strrpos(strstr($a,'z'),'-')-1);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T18:18:11.730

这完全取决于源字符串的结构有多“稳定”。您可以`substr()`在开始时使用[http://php.net/substr](http://php.net/substr)和`strstr()` [http://php.net/strstr](http://php.net/strstr)

# javascript - 下拉列表不回发-javascript

> ID：16022025
> 
> 赞同：2
> 
> 时间：2013-04-15T18:15:10.093
> 
> 标签：javascript, jquery, asp.net

我在第 4 个选项卡上有一个带有下拉列表控件的选项卡面板，但是当我选择一个项目时，即使**autopostback**属性为 true ，也不会发生**回发。**选择项目时有什么方法可以**回**发页面？

 ****我认为这使用 javascript 代码回发下拉列表请建议。

有任何想法吗 ？

```
<asp:DropDownList ID="ddlrole" runat="server" Width="151px" AutoPostBack="True" 
                  onselectedindexchanged="ddlrole_SelectedIndexChanged">
</asp:DropDownList> 
```

后面的代码是：

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if (!IsPostBack)
    {
        //code goes here
    }
 }

 protected void ddlrole_SelectedIndexChanged(object sender, EventArgs e)
 {
    st = int.Parse(ddlrole.SelectedValue);
 } 
```

`ddlrole_SelectedIndexChanged`从下拉列表中选择项目时不会触发？

我使用 javascript 代码来防止此选项卡返回到第一个选项卡：

```
<script type="text/javascript">
$(function () {
    $("#tabContainer").tabs();
    var currTab = $("#<%= HFCurrTabIndex.ClientID %>").val();
    $("#tabContainer").tabs({ selected: currTab });
});
</script> 
```****

# c# - 如何在编辑操作中使用 ViewModel？

> ID：16022026
> 
> 赞同：2
> 
> 时间：2013-04-15T18:15:10.910
> 
> 标签：c#, asp.net-mvc-4, view, visual-studio-2012, ef-code-first

我想养成使用的习惯`ViewModels`。过去我只在我的中使用它们，`Create Actions`我从未想过如何在`Edit Actions`. 我`Domain Entities`改用了。

假设我有以下内容：

使用`Entity Framework Code First`

**域项目中的**POCO 类****

 **```
public class Person
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int PersonId { get; set; }

    public string Name { get; set; }        

    public string Website { get; set; }

    public DateTime? Created { get; set; }

    public DateTime? Updated { get; set; }
} 
```

**在我的数据项目中**

摘要文件夹：

```
public interface IPersonRepository
{
    IQueryable<Person> People{ get; }  
    void SavePerson(Person person);     
} 
```

具体文件夹：

**EfDb 类**

```
public class EfDb : DbContext
{
    public EfDb() : base("DefaultConnection") {}

    public DbSet<Person> People{ get; set; }
} 
```

**EfPersonRepository 类**

```
#region Implementation of Person in IPersonRepository

public IQueryable<Person> People
{
    get { return _context.People; }
}

public void SavePerson(Persona person)
{
    if (person.PersonId == 0)
    {
        _context.People.Add(person);
    }
    else if (person.PersonId> 0)
    {
        var currentPerson = _context.People
            .Single(a => a.PersonId== person.PersonId);

        _context.Entry(currentPerson).CurrentValues.SetValues(person);
    }

    _context.SaveChanges();
}

#endregion 
```

**WebUI 项目 ViewModels 文件夹中的**PersonCreateViewModel****

 **```
public class PersonCreateViewModel
{
    [Required]
    [Display(Name = "Name:")]
    public string Name { get; set; }        

    [Display(Name = "Website:")]
    public string Website { get; set; }
} 
```

人员控制器和创建动作：

```
public class PersonController : Controller
{
    private readonly IPersonRepository _dataSource;

    public PersonController(IPersonRepository dataSource)
    {
        _dataSource = dataSource;
    }

    // GET: /Association/
    public ActionResult Index()
    {
        return View(_dataSource.Associations);
    }

    // GET: /Person/Details/5
    public ActionResult Details(int id)
    {
        return View();
    }

    // GET: /Person/Create
    [HttpGet]
    public ActionResult Create()
    {
       return View();
    }

    // POST: /Person/Create
    [HttpPost]
    public ActionResult Create(PersonCreateViewModel model)
    {
        if (ModelState.IsValid)
        {
            try
            {
                var Person = new Person
                      {
                          Name = Model.Name,
                          Website = model.Website,
                          Created = DateTime.UtcNow,
                          Updated = DateTime.UtcNow
                      };

                _dataSource.SavePerson(person);
                return RedirectToAction("Index", "Home");
            }
            catch
            {
                ModelState.AddModelError("", "Unable to save changes. ");
            }
        }

        return View(model);
    }
 } 
```

现在，除非我弄错了，否则我希望 my`PersonEditViewlModel`看起来完全像我的`PersonCreateViewlModel`. 但我不知道如何在我的`Edit`行动中使用它，前提是我也必须`SavePerson(Person person)`像我在`Create`行动中那样打电话。

注意：请不要对`AutoMapper`或提出建议`ValueInjecter`。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:33:00.590

它就像**创建**一样，只是你需要记录 ID。

```
[HttpGet]
public ActionResult Edit(int id)
{
    var personVm = _dataSource.People.Single(p => p.PersonId == id)
        .Select(e => new PersonEditViewModel {
                    e.PersonId = p.PersonId,
                    e.Name = p.Name,
                    e.Website = p.Website
                    ...
                });
    return View(personVm);
}

[HttpPost]
public ActionResult Edit(PersonEditViewModel model)
{
    if (ModelState.IsValid)
    {
        var person = _dataSource.People.Single(p => p.PersonId == model.PersonId);
        person.Name = model.Name;
        person.Website = model.Website;
        ...
        _dataSource.EditPerson(person);
        return RedirectToAction("Index", "Home");
    }
    return View(model);
} 
```

**编辑：** 因此您无需对编辑进行其他查询

```
public void EditPerson(Person person)
{
    _context.Entry(person).State = EntityState.Modified;
    _context.SaveChanges();
} 
```****

# android - Android onListItemClick() 似乎作用于多个列表项

> ID：16022034
> 
> 赞同：0
> 
> 时间：2013-04-15T18:15:58.217
> 
> 标签：android, android-layout, listactivity

我有一个 ListActivity。我的 onListItemClick() 方法应该使用点击位置的值更新点击项目内的 TextView（例如，如果我点击第三个项目，考虑到索引为 0 的项目列表，它会显示为“点击位置 = 2”）。但是，它似乎更新了多个项目（尽管调试器仅通过该方法一次）。有时会发生其他故障，例如单击的项目“单击的位置”文本消失或其内容在我滚动列表时发生变化。这是一种奇怪的行为，可以通过如下简单的项目设置来重现。也许我的 BaseAdapter 有问题？

事件列表.java：

```
package com.example.listactivitytest;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.TextView;

public class EventList extends ListActivity {

    private List<String> mEventList = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mEventList = new ArrayList<String>();
        for (int i = 0; i < 200; i++) {
            mEventList.add("Position = " + i);
        }
        setListAdapter(new EventListAdapter(mEventList));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {

        TextView textView = (TextView)(v.findViewById(R.id.textClickedPosition));
        String clickedPosition = "Clicked position = " + position;
        textView.setText(clickedPosition);
    }
} 
```

EventListAdapter.java：

```
package com.example.listactivitytest;

import java.util.ArrayList;
import java.util.List;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class EventListAdapter extends BaseAdapter {

    private List<String> eventList = new ArrayList<String>();

    public EventListAdapter() {
    }

    public EventListAdapter(List<String> eventList) {
        this.eventList = eventList;
    }

    @Override
    public int getCount() {
        return eventList.size();
    }

    @Override
    public Object getItem(int index) {
        return eventList.get(index);
    }

    @Override
    public long getItemId(int index) {
        return index;
    }

    @Override
    public View getView(int index, View view, ViewGroup parent) {
        if (view == null) {
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            view = inflater.inflate(R.layout.line_event_list, parent, false);
        }

        String event = eventList.get(index);

        TextView textView = (TextView) view.findViewById(R.id.textPosition);
        textView.setText(event);

        return view;
    }

    public List<String> getEventList() {
        return eventList;
    }
} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin">

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </ListView>

    <TextView android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="Empty list"
        android:layout_weight="1" />

</LinearLayout> 
```

line_event_list.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="3dp"
    android:orientation="vertical"
    android:background="#ffffff" >

    <TextView android:id="@+id/textPosition"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView android:id="@+id/textClickedPosition"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.listactivitytest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.listactivitytest.EventList"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:25:44.323

ListViews 重用它们的行布局，因为它比为每一行拥有一个独特的布局更有效。（10 个布局比 10,000 个要快。）因此，您需要更改为 Adapter 供电的数据集，而不是 TextView 本身。首先保存`new EventListAdapter()`为字段变量，调用它`mAdapter`，然后尝试：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    String clickedPosition = "Clicked position = " + position;
    mAdapter.getEventList().set(position, clickedPosition);
    mAdapter.notifyDataSetChanged();
} 
```

你应该观看 Google I/O 演示[Turbo Charge 你的 UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)以了解 ListViews 为何这样做以及如何利用此功能。（例如 ViewHolder 会有所帮助。）

# c++ - 使用向量存储从同一个父类继承的不同对象 c++

> ID：16022035
> 
> 赞同：0
> 
> 时间：2013-04-15T18:15:58.580
> 
> 标签：c++, inheritance, vector, polymorphism

我有一门课，我们称之为多项式。

所需多项式的数量事先不知道，并在运行时确定。我目前的实现使用了一个容器类，我们称之为Solutions，其中有一个向量，我们称之为polynomialVector，它是这样定义的：

```
 std::vector<Polynomial> polynomialVector; 
```

向量以这种方式创建和填充（解决方案的构造函数执行此工作）：

```
polynomialVector.reserve(numberofneededpolynomials);
for(int i = 0; i < numberofneededpolynomials ; i++) {
 polynomialVector.emplace_back(0) //Polynomial constructor takes an int parameter
} 
```

现在我想创建从通用多项式类继承的特定类型的多项式。多项式的类型将由用户在运行时确定。例如，如果用户输入 0，则使用通用多项式类，如果他输入 1，则使用特定派生多项式类，对于类型 2，使用不同特定类型的多项式等。

我在示例中看到这可以使用常规数组来完成：

```
Polynomial * polynomial1 = new DerivedPolynomial1(parameters);
Polynomial * polynomial2 = new DerivedPolynomial2(parameters);
Polynomial * arrayPolynomial[2] = {polynomial1, polynomial2}; 
```

但是我需要使用向量来完成它，因为应用程序创建了许多事先不知道的不同多项式（由多项式类随机创建，但这不相关）。我包装多项式类（解决方案类）的整个代码已经为向量编码。

我需要做这样的事情：

```
cin >> type;
if(type == 0) {
 polynomialVector.reserve(numberofneededpolynomials);
 for(int i = 0; i < numberofneededpolynomials ; i++) {
  *create polynomial of type 0 in a similar way that emplace_back does for the general case that I described*
 }
if(type == 1) {
  ... same thing but for type 1
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:25:18.963

要将多态数据类型存储在 std::vector 中，您需要存储指针。

为了确保代码不会泄漏内存，最简单的方法是使用智能指针。

```
std::vector<std::unique_ptr<Polynomial>> polynomialVector;
polynomialVector.emplace_back(new DerivedPolynomial1(parameters)); 
```

我假设您使用 C++11，因为您的代码使用`emplace_back`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:24:35.180

您应该将它们存储为指针，如下所示：

```
std::vector<Polynomial *> polynomialVector;
                       ^ 
```

此外，您必须处理内存（新建/删除）并将派生对象作为指向向量的指针。

随意使用`std::unique_ptr`或`std::shared_ptr`代替简单的指针：

```
std::vector<std::unique_ptr<Polynomial>> polynomialVector; 
```

或者

```
std::vector<std::shared_ptr<Polynomial>> polynomialVector; 
```

# java - 无法解决服务类上的 NullPointerException

> ID：16022036
> 
> 赞同：-3
> 
> 时间：2013-04-15T18:16:05.703
> 
> 标签：java, android, service, nullpointerexception

我的任务是解决我大学的一个小组项目的问题，但是我似乎无法解决我的服务类中的 NullPointerException 问题。我们的目标是创建一个脚本，它会持续监控 android 历史记录，直到找到匹配项 - 如果服务类在浏览器历史记录中找到匹配项，则执行警告类。该问题发生在第 71 行（服务类），但我不知道如何解决该问题。

服务等级：

```
public class Service_class extends Service {
    String Dirty1 = "www.pornhub.com";
    String Dirty2 = "www.playboy.com";
    String Dirty3 = "www.playboy.com";
    String Dirty4 = "www.playboy.com";
    String Dirty5 = "www.playboy.com";
    String Dirty6 = "www.playboy.com";
    String Dirty7 = "www.playboy.com";
    String Dirty8 = "www.playboy.com";
    String Dirty9 = "www.playboy.com";
    String Dirty10 = "www.playboy.com";

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();

        TextView tv = (TextView) findViewById(R.id.hello);
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
        Browser.BookmarkColumns.URL };
        Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                projection, null, null, null);
        String urls = "";
        if (cursor.moveToFirst()) {
        String url1 = null;
        String url2 = null;
        do {
        String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

        if (url.toLowerCase().contains(Dirty1)) {
        } else if (url.toLowerCase().contains(Dirty2)) {
        } else if (url.toLowerCase().contains(Dirty3)) {
        } else if (url.toLowerCase().contains(Dirty4)) {
        } else if (url.toLowerCase().contains(Dirty5)) {
        } else if (url.toLowerCase().contains(Dirty6)) {
        } else if (url.toLowerCase().contains(Dirty7)) {
        } else if (url.toLowerCase().contains(Dirty8)) {
        } else if (url.toLowerCase().contains(Dirty9)) {
        } else if (url.toLowerCase().contains(Dirty10)) {
        //if (url.toLowerCase().contains(Filthy)) {
        urls = urls
        + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
        + url + "\n";
        Intent intent = new Intent(Service_class.this, Warning.class);
        Service_class.this.startActivity(intent);
        }
        } while (cursor.moveToNext()); 
     //   tv.setText(urls);
    }

}

    private void setContentView(int main3) {
        // TODO Auto-generated method stub

    }

    private TextView findViewById(int hello) {
        // TODO Auto-generated method stub
        return null;
    }

    private Cursor managedQuery(Uri bookmarksUri, String[] projection,
            Object object, Object object2, Object object3) {
        // TODO Auto-generated method stub
        return null;
    }} 
```

主.java

```
import java.util.Calendar;
import com.parse.ParseAnalytics;
import com.parse.ParseObject;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.TrafficStats;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Chronometer;
import android.widget.TextView;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main3);

    // Start service using AlarmManager

    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 10);
    Intent intent = new Intent(Main.this, Service_class.class);
    PendingIntent pintent = PendingIntent.getService(Main.this, 0, intent,
            0);
    AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            36000 * 1000, pintent);

    // click listener for the button to start service
    Button btnStart = (Button) findViewById(R.id.button1);
    btnStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startService(new Intent(getBaseContext(), Service_class.class));

        }
    });

    // click listener for the button to stop service
    Button btnStop = (Button) findViewById(R.id.button2);
    btnStop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            stopService(new Intent(getBaseContext(), Service_class.class));
        }
    });
}} 
```

日志猫：

```
04-15 13:58:49.980: D/AndroidRuntime(1994): Shutting down VM
04-15 13:58:50.000: W/dalvikvm(1994): threadid=1: thread exiting with uncaught exception (group=0x40cc7930)
04-15 13:58:50.000: E/AndroidRuntime(1994): FATAL EXCEPTION: main
04-15 13:58:50.000: E/AndroidRuntime(1994): java.lang.RuntimeException: Unable to create service com.nfc.linked.Service_class: java.lang.NullPointerException
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2539)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.app.ActivityThread.access$1600(ActivityThread.java:141)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.os.Looper.loop(Looper.java:137)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at java.lang.reflect.Method.invoke(Method.java:511)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at dalvik.system.NativeStart.main(Native Method)
04-15 13:58:50.000: E/AndroidRuntime(1994): Caused by: java.lang.NullPointerException
04-15 13:58:50.000: E/AndroidRuntime(1994):     at com.nfc.linked.Service_class.onCreate(Service_class.java:71)
04-15 13:58:50.000: E/AndroidRuntime(1994):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2529)
04-15 13:58:50.000: E/AndroidRuntime(1994):     ... 10 more
04-15 14:00:23.770: D/AndroidRuntime(2047): Shutting down VM
04-15 14:00:23.770: W/dalvikvm(2047): threadid=1: thread exiting with uncaught exception (group=0x40cc7930) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:20:38.663

您的方法`managedQuery()`返回 null

```
private Cursor managedQuery(Uri bookmarksUri, String[] projection,
        Object object, Object object2, Object object3) {
    // TODO Auto-generated method stub
    return null;
}} 
```

所以当你尝试执行一个方法时，`null`你会得到一个`NullPointerException`.

```
Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
            projection, null, null, null); // cursor will be null
String urls = "";
if (cursor.moveToFirst()) { // this will be NPE 
```

让你的`managedQuery()`方法返回一个实例化的`Cursor`对象。

# javascript - Parse.com - 获取 Parse.Model 对象的 objectID 的最佳方式

> ID：16022039
> 
> 赞同：1
> 
> 时间：2013-04-15T18:16:13.510
> 
> 标签：javascript, parse-platform

我一直在尝试获取我正在使用的 Parse.com Parse.Model 对象的 objectId。我唯一成功的是使用以下内容：

```
this.model.toJSON().objectId 
```

这似乎既复杂又缓慢，因为我应该只能访问对象上的属性。尝试使用以下内容仅导致未定义的值。

```
this.model.get("objectId") 
```

关于我为访问此值而错过了什么的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T22:47:04.133

您可以通过属性访问对象 id `id`：

`this.model.id`

# batch-file - 从剪贴板访问复制的文本并存储在批处理文件中

> ID：16022042
> 
> 赞同：1
> 
> 时间：2013-04-15T18:16:25.793
> 
> 标签：batch-file

在我正在创建的批处理文件中，我试图在两个不同的复制文本之间进行字符串比较。基本上，旧的复制文本是否与新复制的文本相同。为此，我想访问剪贴板并将旧复制的文本存储在批处理文件中的变量中。然后，复制新文本，将其存储在我的批处理文件中的另一个变量中，然后比较两者，看看它们是否相同。我曾尝试寻找解决方案，但我看到的所有文章都描述了如何使用批处理文件将文本复制到剪贴板。然而，我正试图做相反的事情。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-03T14:56:39.233

这是一个简短的批量嵌入解决方案：

1）创建一个小的VB文件，将剪贴板的内容存储在一个临时文件中

```
set clipFile=%temp%\clipboard
set vbFile=%temp%\clipboard.vbs
del %vbFile% %clipFile%

rem Create VB file
>"%vbFile%" (
echo.Set objHTML = CreateObject("htmlfile"^)
echo.ClipboardText = objHTML.ParentWindow.ClipboardData.GetData("text"^)
echo.path = "%clipFile%"
echo.Set objFSO = CreateObject("Scripting.FileSystemObject"^)
echo.Set objFile = objFSO.OpenTextFile(path, 2, true^)
echo.objFile.WriteLine ClipboardText
echo.objFile.Close )>>"%vbFile%" 
```

2）执行VB脚本

```
"%vbFile%" 
```

3）将文件内容存储在变量中

```
SETLOCAL ENABLEDELAYEDEXPANSION
    for /f "delims=" %%i in (%clipFile%) do Set line=%%i
    set clipboard=!line!
    echo clipboard="%clipboard%"
ENDLOCAL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:21:10.837

没有从剪贴板读取的本地批处理解决方案，但有一些使用其他语言的简单方法。

这是一个 Powershell 脚本（如果需要，很容易从批处理文件中调用）： http: [//poshcode.org/2150](http://poshcode.org/2150)

Raymond Chen 有一个使用 perl 的解决方案：http: [//blogs.msdn.com/b/oldnewthing/archive/2009/11/10/9919908.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2009/11/10/9919908.aspx)

# mysql - 慢速远程查询

> ID：16022045
> 
> 赞同：0
> 
> 时间：2013-04-15T18:16:45.597
> 
> 标签：mysql, ruby-on-rails, sqlite

我正在开发一个 Rails 应用程序，并且在开发过程中使用 SQLite，速度非常快。

我已经开始使用由 Amazon 托管的远程 MySQL 数据库，并且查询时间非常慢。除了尝试优化远程数据库之外，我还能在 Rails 方面做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:52:00.907

本地数据库访问与远程将显示出显着的速度差异。由于您没有提供任何细节，我无法在这个问题上归零，但我可以提出一个建议：

尝试尽可能多地[缓存您的查询和视图。](http://guides.rubyonrails.org/caching_with_rails.html)这将减少您需要执行的查询量。这特别适用于菜单等静态数据。

[优化](http://guides.rubyonrails.org/active_record_querying.html)是关键。确保尽可能多地消除不必要的查询，并且您所做的那些查询仅请求使用该`select`方法所需的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:48:08.070

Profile the various components involved. The database server itself is one of them. The network latency is another. While for the second one probably there is little you can do, probably you can tweak alot the first part. Starting from profiling the queries and going to tweaking the server itself.

Knowing where to look for will help you start with the best approach. As for caching, always keep that in mind, but that can prove to be quite problematic depending on the nature of your application.

# java - 从二进制文件中读取大量 int 的最快方法

> ID：16022053
> 
> 赞同：5
> 
> 时间：2013-04-15T18:17:05.870
> 
> 标签：java, io, nio

我在嵌入式 Linux 设备上使用 Java 1.5，并希望读取一个具有 2MB int 值的二进制文件。（现在是 4bytes Big Endian，但我可以决定，格式）

使用`DataInputStream`via `BufferedInputStream` using `dis.readInt()`)，这 500 000 次调用需要 17 秒才能读取，但文件读入一个大字节缓冲区需要 5 秒。

**我怎样才能将该文件更快地读入一个巨大的 int[]？**

阅读过程不应额外使用超过 512 kb。

下面使用的这段代码`nio`并不比 java io 中的 readInt() 方法快。

```
 // asume I already know that there are now 500 000 int to read:
    int numInts = 500000;
    // here I want the result into
    int[] result = new int[numInts];
    int cnt = 0;

    RandomAccessFile aFile = new RandomAccessFile("filename", "r");
    FileChannel inChannel = aFile.getChannel();

    ByteBuffer buf = ByteBuffer.allocate(512 * 1024);

    int bytesRead = inChannel.read(buf); //read into buffer.

    while (bytesRead != -1) {

      buf.flip();  //make buffer ready for get()

      while(buf.hasRemaining() && cnt < numInts){
       // probably slow here since called 500 000 times
          result[cnt] = buf.getInt();
          cnt++;
      }

      buf.clear(); //make buffer ready for writing
      bytesRead = inChannel.read(buf);
    }

    aFile.close();
    inChannel.close(); 
```

**更新：对答案的评估：**

在 PC 上，使用 IntBuffer 方法的内存映射是我设置中最快的。
在没有 jit 的嵌入式设备上，java.io DataiInputStream.readInt() 更快一些（17 秒，而带有 IntBuffer 的 MemMap 则为 20 秒）

最终结论：通过算法更改更容易实现显着加速。（初始化文件较小）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:58:53.267

我不知道这是否会比 Alexander 提供的更快，但您可以尝试映射文件。

```
 try (FileInputStream stream = new FileInputStream(filename)) {
        FileChannel inChannel = stream.getChannel();

        ByteBuffer buffer = inChannel.map(FileChannel.MapMode.READ_ONLY, 0, inChannel.size());
        int[] result = new int[500000];

        buffer.order( ByteOrder.BIG_ENDIAN );
        IntBuffer intBuffer = buffer.asIntBuffer( );
        intBuffer.get(result);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:20:11.333

您可以`IntBuffer`从 nio 包中使用 -> [http://docs.oracle.com/javase/6/docs/api/java/nio/IntBuffer.html](http://docs.oracle.com/javase/6/docs/api/java/nio/IntBuffer.html)

```
int[] intArray = new int[ 5000000 ];

IntBuffer intBuffer = IntBuffer.wrap( intArray );

... 
```

通过调用 来填充缓冲区`inChannel.read(intBuffer)`。

一旦缓冲区已满，您`intArray`将包含 500000 个整数。

**编辑**

在意识到 Channels 只支持`ByteBuffer`.

```
// asume I already know that there are now 500 000 int to read:
int numInts = 500000;
// here I want the result into
int[] result = new int[numInts];

// 4 bytes per int, direct buffer
ByteBuffer buf = ByteBuffer.allocateDirect( numInts * 4 );

// BIG_ENDIAN byte order
buf.order( ByteOrder.BIG_ENDIAN );

// Fill in the buffer
while ( buf.hasRemaining( ) )
{
   // Per EJP's suggestion check EOF condition
   if( inChannel.read( buf ) == -1 )
   {
       // Hit EOF
       throw new EOFException( );
   }
}

buf.flip( );

// Create IntBuffer view
IntBuffer intBuffer = buf.asIntBuffer( );

// result will now contain all ints read from file
intBuffer.get( result ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-20T06:01:18.023

我使用序列化/反序列化、DataInputStream 与 ObjectInputStream 进行了相当仔细的实验​​，两者都基于 ByteArrayInputStream 以避免 IO 影响。对于一百万个整数，readObject 大约是 20 毫秒，readInt 大约是 116。一百万个整数数组的序列化开销是 27 个字节。这是在 2013 年的 MacBook Pro 上。

话虽如此，对象序列化有点邪恶，你必须用 Java 程序写出数据。

# c# - 让用户指定定时器时间？

> ID：16022054
> 
> 赞同：1
> 
> 时间：2013-04-15T18:17:08.350
> 
> 标签：c#, windows, timer, textbox, dispatcher

我希望 DispatcherTimer 从文本框中读取时间值：objTextBox。我尝试了这段代码，但似乎 TimeSpan 与字符串不兼容，或者我做错了什么？

错误：参数 1：无法从“字符串”转换为“长”

还; 时间是否必须在文本框中看起来像这样：0、0、1 或 00:00:01？

代码在这里：

```
 private void testing()
    {
        string theText = objTextBox.Text;
        DispatcherTimer dispatcherTimer = new DispatcherTimer();
        dispatcherTimer.Tick += new EventHandler(listjob3_Tick);
        dispatcherTimer.Interval = new TimeSpan(theText);
        dispatcherTimer.Start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:26:10.420

要从 a 转换为`TimeSpan`a`string`您可以利用[`TimeSpan.Parse`](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)，但您必须符合以下格式`[ws][-]{ d | [d.]hh:mm[:ss[.ff]] }[ws]`：

```
ws    is Optional white space.
-     is An optional minus sign, which indicates a negative TimeSpan. 
d     is Days, ranging from 0 to 10675199.
.     is A culture-sensitive symbol that separates days from hours. The invariant format uses a period (".") character.
hh    is Hours, ranging from 0 to 23\. 
:     is The culture-sensitive time separator symbol. The invariant format uses a colon (":") character.
mm    is Minutes, ranging from 0 to 59\. 
ss    is Optional seconds, ranging from 0 to 59\. 
.     is A culture-sensitive symbol that separates seconds from fractions of a second. The invariant format uses a period (".") character.
ff    is Optional fractional seconds, consisting of one to seven decimal digits. 
```

因此，只需转换天数，您实际上就可以使用`TimeSpan.Parse`并传入字符串 - 但如果您想转换分钟数，则需要对输入进行一些按摩，如下所示：

```
var input = string.Format("00:{0}", objTextBox.Text.PadLeft(2, '0')); 
```

所以你可以发出`var timeSpan = TimeSpan.Parse(input);`，因为你已经正确格式化它并且`Parse`会成功。我猜另一种选择是将分钟变成几天，但这需要一些浮点工作，而且实际上，IMO 并不是一个好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:19:09.623

要将字符串转换为 TimeSpan，请使用`TimeSpan.Parse(str)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:23:59.773

我猜你的例外在这里：

```
dispatcherTimer.Interval = new TimeSpan(theText); 
```

改用这个：

```
dispatcherTimer.Interval = new TimeSpan(Convert.ToInt64(theText)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:24:49.117

@Sneakybastardd：您是否**阅读**过有关构造函数重载的[`TimeSpan`文档？](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)您会注意到它们都没有使用字符串参数：整数类型是必需的。

阅读[文档](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)后，您可能会发现这些`TimeSpan`方法很有用：

*   `Parse()`
*   `ParseExact()`
*   `TryParse()`

关于格式，请参阅[“标准 TimeSpan 格式字符串”](http://msdn.microsoft.com/en-us/library/ee372286.aspx)和[“自定义 TimeSpan 格式字符串”](http://msdn.microsoft.com/en-us/library/ee372287.aspx)。如果需要的话，还要对不同文化的各种默认 TimeSpan 格式进行一些研究。

# csv - Google 电子表格自定义日期格式

> ID：16022056
> 
> 赞同：1
> 
> 时间：2013-04-15T18:17:11.910
> 
> 标签：csv, google-sheets, date-format

我正在寻找一个简单的公式来生成这种日期格式：

2013 年 8 月 12 日晚上 10:35

hh:mm AM/PM 月 dd yyyy

它适用于 MarketMeSuite CSV 计划实用程序，仅在上传计划推文时排除该格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:18:36.607

是的，使用该`Utilities.formatDate()`实用程序可以实现这种格式。请参阅Java 的[Oracle 类 SimpleDateFormat 文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)，因为它使用相同的格式。您应该能够使用以下格式获得所需的格式。

`h:mm a MMMMM d yyyy`

唯一的问题是日期之后的`th`or`nd`或`rd`or `st`。但是您可以使用一些 if 语句来根据数字对其进行格式化，我会让您处理它:)

上面的最后一个字符串是 -

`9:16 PM April 15 2013`

所以最终的日期对象创建将是。

`Utilities.formatDate(new Date(), "GMT", "h:mm a MMMMM d yyyy")`

**编辑**

我刚刚意识到您可能不是在谈论在脚本中获取这种格式，而是实际上只是在单元格中调用它。如果是这样，您仍然需要创建自定义函数，因此将以下代码添加到新脚本中。

```
function getDate() {
   var date = Utilities.formatDate(new Date(), "GMT", "h:mm a MMMMM d yyyy")
   return date;
} 
```

然后你可以在一个单元格中调用它`=getDate()`

# python - 用python绘制mathematica数据

> ID：16022060
> 
> 赞同：2
> 
> 时间：2013-04-15T18:17:29.120
> 
> 标签：python, numpy, plot, wolfram-mathematica

这个问题与我之前关于[“python 中的出版质量图”的](https://stackoverflow.com/q/15988413/957560)问题有关。

我正在尝试编写一个后处理器（一个 bash 脚本/python 组合），它将梳理我拥有的数千个（字面意思！）数据文件并绘制数据。问题是，我的数据文件来自mathematica。

由于对非线性偏微分方程进行 NDSolve 运算，我在 Mathematica (mma) 中有插值函数多项式。我能够从我的 mma 多项式中解构/提取离散数据。

以 mma 绘制的数据会生成 3D 轮廓图，如下所示： ![使用 <code>ListPlot3D</code> 的mathematica 3D 绘图](https://i.stack.imgur.com/jDCHn.png)

现在这是我感兴趣的某个时间步长的剖面图。它由我提取的 X 和 Y 坐标值（包含在本文末尾的数据）组成，绘制时如下所示：

![X数据](https://i.stack.imgur.com/7Yg41.png)

![Y数据](https://i.stack.imgur.com/IFEGe.png)

如何用 python 绘制这个 X、Y 数据？换句话说，最好的方法是什么？

我已经为曲面图和线框图尝试了以下 python 代码，但它们都**需要一个我没有的 Z 坐标**。

## 编辑

我对这个特殊的 3D 轮廓图的完整数据在[这里](http://dl.dropboxusercontent.com/u/13223318/data3d.dat)。我现在正试图弄清楚如何在行和列中排列它......

## 示例线框图：

```
from numpy import *
from numpy.random import rand
from pylab import pcolor, show, colorbar, xticks, yticks
from pylab import *
from mpl_toolkits.mplot3d import axes3d
from matplotlib import *
#from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
X, Y, Z = axes3d.get_test_data(0.05)
ax.plot_wireframe(X, Y,Z, rstride=10, cstride=10, cmap="binary")

plt.show() 
```

![Python线框图](https://i.stack.imgur.com/xesVc.jpg)

## 曲面图

```
from numpy import *
from numpy.random import rand
from pylab import pcolor, show, colorbar, xticks, yticks
from pylab import *
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import *
#from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, 0.25)
Y = np.arange(-5, 5, 0.25)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
Z = np.sin(R)
surf = ax.plot_surface(X,Y,Z, rstride=1, cstride=1, cmap="binary",
        linewidth=0, antialiased=False)
#ax.set_zlim(-1.01, 1.01)

#ax.zaxis.set_major_locator(LinearLocator(10))
#ax.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))

fig.colorbar(surf, shrink=0.5, aspect=5)

plt.show() 
```

![Python 曲面图](https://i.stack.imgur.com/bIByR.png)

## X、Y 数据：

X：

```
{0.132737, 0.13191, 0.129746, 0.127106, 0.125117, 0.12483, 0.126976, \
0.131958, 0.140068, 0.151781, 0.167899, 0.189295, 0.216319, 0.248189, \
0.282795, 0.317034, 0.347415, 0.370662, 0.384156, 0.386236, 0.376402, \
0.355467, 0.325648, 0.290526, 0.254685, 0.222845, 0.198549, 0.183281, \
0.177335, 0.182392, 0.203451, 0.246983, 0.315549, 0.405471, 0.509765, \
0.621364, 0.73459, 0.845401, 0.951138, 1.05018, 1.14164, 1.22514, \
1.30063, 1.3683, 1.42847, 1.48156, 1.52802, 1.56836, 1.60306, \
1.63263, 1.65754, 1.67825, 1.69521, 1.70884, 1.71951, 1.72761, \
1.73347, 1.7374, 1.73971, 1.74066, 1.74049, 1.73944, 1.7377, 1.73545, \
1.73286, 1.73009, 1.72724, 1.72445, 1.7218, 1.71938, 1.71726, 1.7155, \
1.71414, 1.71322, 1.71275, 1.71275, 1.71322, 1.71415, 1.71551, \
1.71727, 1.71939, 1.72181, 1.72446, 1.72726, 1.7301, 1.73288, \
1.73547, 1.73772, 1.73947, 1.74052, 1.74069, 1.73974, 1.73744, \
1.7335, 1.72765, 1.71955, 1.70888, 1.69525, 1.67829, 1.65757, \
1.63266, 1.60309, 1.56838, 1.52803, 1.48156, 1.42846, 1.36828, \
1.30059, 1.22507, 1.14155, 1.05005, 0.950968, 0.845186, 0.734326, \
0.621052, 0.509426, 0.405163, 0.31538, 0.247033, 0.203632, 0.18257, \
0.177457, 0.183338, 0.198563, 0.222852, 0.254712, 0.290571, 0.325696, \
0.355504, 0.376422, 0.386237, 0.38414, 0.370635, 0.347385, 0.317008, \
0.282778, 0.24818, 0.216314, 0.189287, 0.167886, 0.151767, 0.140056, \
0.131952, 0.126973, 0.124829, 0.125116, 0.127103, 0.129743, 0.131907, \
0.132737} 
```

是的：

```
{0.132737, 0.160814, 0.248665, 0.386715, 0.554857, 0.736199, \
0.919228, 1.09676, 1.26441, 1.41958, 1.56072, 1.68695, 1.79781, \
1.89307, 1.97268, 2.03665, 2.08504, 2.11789, 2.13527, 2.1372, \
2.12369, 2.0947, 2.05018, 1.99008, 1.91432, 1.82288, 1.71579, 1.5932, \
1.45551, 1.30345, 1.13838, 0.962571, 0.779892, 0.596757, 0.423678, \
0.276942, 0.177388, 0.136833, 0.13817, 0.160097, 0.190941, 0.222093, \
0.247023, 0.261917, 0.265986, 0.261225, 0.251781, 0.243058, 0.240757, \
0.250172, 0.275704, 0.320022, 0.382994, 0.461711, 0.551722, 0.648374, \
0.747602, 0.846211, 0.941863, 1.03295, 1.11842, 1.19768, 1.27043, \
1.33662, 1.39633, 1.4498, 1.49731, 1.53921, 1.57586, 1.60765, \
1.63497, 1.65821, 1.67774, 1.69392, 1.70711, 1.71765, 1.72583, \
1.73197, 1.73635, 1.73922, 1.74084, 1.74142, 1.74119, 1.74032, 1.739, \
1.73739, 1.73562, 1.73382, 1.73211, 1.73057, 1.72928, 1.72831, \
1.72768, 1.72744, 1.72759, 1.72812, 1.72901, 1.73023, 1.73172, \
1.7334, 1.73518, 1.73697, 1.73864, 1.74005, 1.74105, 1.74146, \
1.74111, 1.73977, 1.73724, 1.73326, 1.72759, 1.71994, 1.71003, \
1.69753, 1.68213, 1.66347, 1.64119, 1.61492, 1.58428, 1.54888, \
1.50832, 1.46224, 1.41028, 1.35213, 1.28756, 1.21644, 1.13877, \
1.05479, 0.965005, 0.870346, 0.772266, 0.672914, 0.575269, 0.483202, \
0.401281, 0.334109, 0.285083, 0.255065, 0.242016, 0.241877, 0.249537, \
0.25934, 0.265716, 0.264102, 0.251884, 0.229106, 0.198813, 0.166855, \
0.141209, 0.132737} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:59:25.140

使用`plot`or`scatter`方法绘制 x、y 数据。在您的情况下，x 是时间，y 是 X 或 Y 之一。要生成时间坐标，请使用[range](http://docs.python.org/2.7/library/functions.html?highlight=range#range)函数：

```
range(5) -> [0, 1, 2, 3, 4] 
```

这是一个例子。

```
#!python2

import matplotlib.pyplot as plt

X = [0.132737, 0.13191, 0.129746, 0.127106, 0.125117, 0.12483, 0.126976,
0.131958, 0.140068, 0.151781, 0.167899, 0.189295, 0.216319, 0.248189,
0.282795, 0.317034, 0.347415, 0.370662, 0.384156, 0.386236, 0.376402,
0.355467, 0.325648, 0.290526, 0.254685, 0.222845, 0.198549, 0.183281,
0.177335, 0.182392, 0.203451, 0.246983, 0.315549, 0.405471, 0.509765,
0.621364, 0.73459, 0.845401, 0.951138, 1.05018, 1.14164, 1.22514,
1.30063, 1.3683, 1.42847, 1.48156, 1.52802, 1.56836, 1.60306,
1.63263, 1.65754, 1.67825, 1.69521, 1.70884, 1.71951, 1.72761,
1.73347, 1.7374, 1.73971, 1.74066, 1.74049, 1.73944, 1.7377, 1.73545,
1.73286, 1.73009, 1.72724, 1.72445, 1.7218, 1.71938, 1.71726, 1.7155,
1.71414, 1.71322, 1.71275, 1.71275, 1.71322, 1.71415, 1.71551,
1.71727, 1.71939, 1.72181, 1.72446, 1.72726, 1.7301, 1.73288,
1.73547, 1.73772, 1.73947, 1.74052, 1.74069, 1.73974, 1.73744,
1.7335, 1.72765, 1.71955, 1.70888, 1.69525, 1.67829, 1.65757,
1.63266, 1.60309, 1.56838, 1.52803, 1.48156, 1.42846, 1.36828,
1.30059, 1.22507, 1.14155, 1.05005, 0.950968, 0.845186, 0.734326,
0.621052, 0.509426, 0.405163, 0.31538, 0.247033, 0.203632, 0.18257,
0.177457, 0.183338, 0.198563, 0.222852, 0.254712, 0.290571, 0.325696,
0.355504, 0.376422, 0.386237, 0.38414, 0.370635, 0.347385, 0.317008,
0.282778, 0.24818, 0.216314, 0.189287, 0.167886, 0.151767, 0.140056,
0.131952, 0.126973, 0.124829, 0.125116, 0.127103, 0.129743, 0.131907,
0.132737]

ax = plt.subplot(111)
ax.plot(range(len(X)), X)
#ax.scatter(range(len(X)), X)
plt.show() 
```

## 编辑以回答评论

```
#!python2

import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import numpy as np

DATA = 'test0005.dat'

def get_data(fname=DATA):
    '''Read 2d array of z coordinates from file. Convert to float values
    and wrap in a numpy array.'''
    with open(fname) as f:
        data = [map(float, line.split()) for line in f]
    return np.array(data)

def plot(x, y, z):
    '''Surface plot of 3d data.'''
    fig = plt.figure()
    ax = fig.gca(projection='3d')
    ax.plot_surface(x, y, z, rstride=4, cstride=4)
    plt.show()

if __name__ == '__main__':
    z = get_data()
    x = range(z.shape[0])
    y = range(z.shape[1])
    x, y = np.meshgrid(x, y)
    plot(x, y, z) 
```

# c# - c# 等效于“java.security.spec.RSAPublicKeySpec”和“java.security.PublicKey”

> ID：16022062
> 
> 赞同：1
> 
> 时间：2013-04-15T18:17:30.560
> 
> 标签：c#, java, encryption, rsa

我正在用 C# 开发现有 Java 应用程序的新版本。

现有应用程序使用带有 java.security.spec.* 和 boncycastle api 的 RSA 加密。

我正在为下面的 java 代码寻找 c# 中的等效代码：

```
public static java.security.PublicKey getKey
(
org.bouncycastle.asn1.x509.RSAPublicKeyStructure  rsaPublicKey
)
{

java.security.KeyFactory keyFactory = KeyFactory.getInstance("RSA");

 java.security.spec.RSAPublicKeySpec keySpec = new RSAPublicKeySpec(
rsaPublicKey.getModulus(), 
rsaPublicKey.getPublicExponent());

java.security.PublicKey pkey = keyFactory.generatePublic(keySpec);

return pkey;
} 
```

我“搜索”了很多，但没有找到解决方案。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:44:49.490

尽管您可能已经意识到这一点，但有一个 .NET 版本的[Bouncy Castle](http://www.bouncycastle.org/csharp/)，因此您可以在您的 C# 项目中使用它。

关于您的问题，[这里](https://stackoverflow.com/questions/8830510/c-sharp-sign-data-with-rsa-using-bouncycastle)是在纯 Bouncy Castle 中实现签名的示例，它处理 MakeKey 方法中的密钥生成，因此您可能想看看它。

顺便说一句，如果此密钥在证书中，您可能需要查看 .NET X509Certificate2 类。

**编辑**

我试图将您的方法转换为 ac# 等价物，我越接近它：

```
public static byte[] getKey(Org.BouncyCastle.Asn1.x509.RSAPublicKeyStructure  rsaPublicKey)
{
    Org.BouncyCastle.Crypto.Parameters.RsaKeyParameters bcKeySpec = new RsaKeyParameters();
    bcKeySpec.RsaKeyParameters(false, rsaPublicKey.getModulus(), rsaPublicKey.getPublicExponent());
    RSAParameters keySpec = Org.BouncyCastle.Security.DotNetUtilities.ToRSAParameters(bcKeySpec);
    RSACryptoServiceProvider keyFactory = new RSACryptoServiceProvider();
    keyFactory.ImportParameters(keySpec);
    byte[] pKey = keyFactory.ExportCspBlob(false);
    return pKey;
} 
```

请注意，密钥被导出到一个字节数组中，这取决于您以后要对密钥做什么，可能对您有帮助也可能对您没有帮助，此外，RSACryptoServiceProvider 对象允许您加密、解密、签名和验证，所以如果您将获得用于任何这些目的的密钥，那么您可能希望返回 keyFactory 对象而不是导出的公钥。

如果您想了解有关 RSACryptoServiceProvider 的更多信息，可以在此处阅读：http: [//msdn.microsoft.com/en-us/library/s575f7e2.aspx](http://msdn.microsoft.com/en-us/library/s575f7e2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-04T02:35:52.917

```
 public static string EncryptRsa(string stringPublicKey, string stringDataToEncrypt)
{
    byte[] publicKey = Convert.FromBase64String(stringPublicKey);
    using (RSACryptoServiceProvider rsa = DecodeX509PublicKey(publicKey))
    {
        byte[] dataToEncrypt = Encoding.UTF8.GetBytes(stringDataToEncrypt);
        byte[] encryptedData = rsa.Encrypt(dataToEncrypt, false);
        return Convert.ToBase64String(encryptedData);
    }
}

public static RSACryptoServiceProvider DecodeX509PublicKey(byte[] x509key)
{
    byte[] SeqOID = { 0x2A, 0x86, 0x48, 0x86, 0xF7, 0x0D, 0x01, 0x01, 0x01 };

    MemoryStream ms = new MemoryStream(x509key);
    BinaryReader reader = new BinaryReader(ms);

    if (reader.ReadByte() == 0x30)
        ReadASNLength(reader); //skip the size 
    else
        return null;

    int identifierSize = 0; //total length of Object Identifier section 
    if (reader.ReadByte() == 0x30)
        identifierSize = ReadASNLength(reader);
    else
        return null;

    if (reader.ReadByte() == 0x06) //is the next element an object identifier? 
    {
        int oidLength = ReadASNLength(reader);
        byte[] oidBytes = new byte[oidLength];
        reader.Read(oidBytes, 0, oidBytes.Length);
        if (oidBytes.SequenceEqual(SeqOID) == false) //is the object identifier rsaEncryption PKCS#1? 
            return null;

        int remainingBytes = identifierSize - 2 - oidBytes.Length;
        reader.ReadBytes(remainingBytes);
    }

    if (reader.ReadByte() == 0x03) //is the next element a bit string? 
    {
        ReadASNLength(reader); //skip the size 
        reader.ReadByte(); //skip unused bits indicator 
        if (reader.ReadByte() == 0x30)
        {
            ReadASNLength(reader); //skip the size 
            if (reader.ReadByte() == 0x02) //is it an integer? 
            {
                int modulusSize = ReadASNLength(reader);
                byte[] modulus = new byte[modulusSize];
                reader.Read(modulus, 0, modulus.Length);
                if (modulus[0] == 0x00) //strip off the first byte if it's 0 
                {
                    byte[] tempModulus = new byte[modulus.Length - 1];
                    Array.Copy(modulus, 1, tempModulus, 0, modulus.Length - 1);
                    modulus = tempModulus;
                }

                if (reader.ReadByte() == 0x02) //is it an integer? 
                {
                    int exponentSize = ReadASNLength(reader);
                    byte[] exponent = new byte[exponentSize];
                    reader.Read(exponent, 0, exponent.Length);

                    RSACryptoServiceProvider RSA = new RSACryptoServiceProvider(1024);
                    RSAParameters RSAKeyInfo = new RSAParameters();
                    RSAKeyInfo.Modulus = modulus;
                    RSAKeyInfo.Exponent = exponent;
                    RSA.ImportParameters(RSAKeyInfo);
                    return RSA;
                }
            }
        }
    }
    return null;
}

public static int ReadASNLength(BinaryReader reader)
{
    //Note: this method only reads lengths up to 4 bytes long as 
    //this is satisfactory for the majority of situations. 
    int length = reader.ReadByte();
    if ((length & 0x00000080) == 0x00000080) //is the length greater than 1 byte 
    {
        int count = length & 0x0000000f;
        byte[] lengthBytes = new byte[4];
        reader.Read(lengthBytes, 4 - count, count);
        Array.Reverse(lengthBytes); // 
        length = BitConverter.ToInt32(lengthBytes, 0);
    }
    return length;
} 
```

# spring - log4j：错误无法刷新写入器，java.io.IOException：句柄无效

> ID：16022063
> 
> 赞同：2
> 
> 时间：2013-04-15T18:17:31.413
> 
> 标签：spring, log4j, tomcat7

我将 log4j1.2.17 与我的 Spring Web 应用程序（Spring 3.2.1）一起使用。我间歇性地遇到以下问题。有时它来自启动本身，有时来自请求处理。以下是堆栈跟踪。

```
log4j:ERROR Failed to flush writer,
java.io.IOException: The handle is invalid
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(Unknown Source)
    at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
    at sun.nio.cs.StreamEncoder.flush(Unknown Source)
    at java.io.OutputStreamWriter.flush(Unknown Source)
    at org.apache.log4j.helpers.QuietWriter.flush(QuietWriter.java:59)
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:324)
    at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:276)
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:199) 
```

当我调试时，文件句柄似乎已经关闭。有一次，当我在异常之前进行测试时，我从 log4j 收到以下消息

```
log4j:Finalizing appender named [stdout].
log4j:Finalizing appender named [logfile]. 
```

不知道为什么当应用程序仍在使用它时它会被最终确定。

下面是我的 log4j xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<appender name="stdout" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %p [%c] -  %m%n" />
    </layout>
</appender>

<appender name="logfile" class="org.apache.log4j.RollingFileAppender">
    <param name="File"
        value="E:/logs/bizscore.log" />
    <param name="MaxFileSize" value="5000KB" />
    <param name="MaxBackupIndex" value="3" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %p [%c] -  %m%n" />
    </layout>
</appender>

<logger name="org.apache.commons">
    <level value="INFO" />
</logger>

<logger name="org.hibernate">
    <level value="INFO" />
</logger>

<logger name="org.springframework">
    <level value="INFO" />
</logger>

<root>
    <priority value="info" />
    <appender-ref ref="stdout" />
    <appender-ref ref="logfile" />
</root>

</log4j:configuration> 
```

任何指针都会有很大帮助。谢谢。

# javascript - Sencha Touch：无法从 Ext.Map 获取地图对象以提供给 google 方向服务

> ID：16022067
> 
> 赞同：2
> 
> 时间：2013-04-15T18:17:48.937
> 
> 标签：javascript, google-maps-api-3, sencha-touch-2

我有一个 Ext.Map 对象，我试图从中获取 google.maps.map() 对象，但它没有返回有效对象，因此我无法在地图上呈现方向。

```
addMaps: function(options){
    directionsDisplay =new google.maps.DirectionsRenderer();        
    directionsService = new google.maps.DirectionsService();
    activeMarkers = new Array();
    uconnPosition = new google.maps.LatLng(41.809929, -72.25486);
    myMapPosition = new google.maps.LatLng(41.809929, -72.25486);
    curBuildingPosition = new google.maps.LatLng(41.809929, -72.25486);

    uconnMap = new Ext.Map({

        mapOptions : {
            center : new google.maps.LatLng(41.809929, -72.25486),  //UConn
            zoom : 16,
            mapTypeId : google.maps.MapTypeId.ROADMAP,
            navigationControl: true,
            navigationControlOptions: {
                    style: google.maps.NavigationControlStyle.DEFAULT
                }
        },

        plugins : [
            new Ext.plugin.GMap.Tracker({
                    trackSuspended : true,   //suspend tracking initially
                    highAccuracy   : false,
                    marker : new google.maps.Marker({
                        position: uconnPosition,
                        title : 'My Current Location',
                        shadow: shadow,
                        icon  : image
                      })
            })
        ]

    });

   UConnApp.views.uconnTourMainPanel.add(uconnMap);
   directionsDisplay.setMap(uconnMap.getMap()); //THIS IS WHERE I THINK THE PROBLEM IS
   var org = new google.maps.LatLng(41.806501, -72.252769);
   var dest = new google.maps.LatLng(41.805222,-72.254388);

   var request = {
            origin: org,
            destination:dest,
            travelMode: google.maps.TravelMode.WALKING
        };
   directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        })
}, 
```

所以地图的创建没有问题，但是当我尝试将地图对象发送到谷歌地图方向服务时，它不会呈现到我的地图上。我已经尝试过 uconnMap.getMap() 和 uconnMap.map，但都没有从方向服务渲染到的任何一个返回对象。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:10:10.773

您需要使用以下代码::

```
 UConnApp.views.uconnTourMainPanel.add(uconnMap);

   directionsDisplay.setMap(uconnMap.map); // Changed this line for you…
   var org = new google.maps.LatLng(41.806501, -72.252769);
   var dest = new google.maps.LatLng(41.805222,-72.254388);

   var request = {
            origin: org,
            destination:dest,
            travelMode: google.maps.TravelMode.WALKING
        };
   directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        }) 
```

现在一切正常。我刚刚在我的应用程序中为您测试了它:)

# c++ - 尝试打印出 LinkedList 的节点时出现代码错误

> ID：16022075
> 
> 赞同：0
> 
> 时间：2013-04-15T18:18:08.963
> 
> 标签：c++, printing, indexing, linked-list

嘿，我基本上试图用它的元素打印出相应的节点。但是我遇到了一个错误：`Error 1 error C2440: 'return' : cannot convert from 'DoublyLinkedListNode<Datatype> *' to 'int &'` 我尝试了一些事情，比如更改索引函数的返回类型，但到目前为止我没有任何乐趣。谁能帮我解决这个问题？

这是我的代码：

```
//-------------------------------------------------------------------------------------------
//  Name:           Print.
//  Description:    Prints the elements from the list along with its index.
//-------------------------------------------------------------------------------------------
    void Print(DoublyLinkedList<int>& p_list)
    {
    //Set up a new Iterator.
    DoublyLinkedListIterator<int> itr = getIterator();
    for(itr.Start(); itr.Valid(); itr.Forth())
        {
        cout <<"Index: "<<itr.Index() << "Element: " << itr.Item() << "\n";
        }
    cout << endl;

    }
//-------------------------------------------------------------------------------------------
//  Class:  DoublyLinkedIterator.
//-------------------------------------------------------------------------------------------
template <class Datatype>
class DoublyLinkedListIterator
{
public:
//-------------------------------------------------------------------------------------------
//  Member Vairables.
//-------------------------------------------------------------------------------------------
    DoublyLinkedListNode<Datatype>* m_node;
    DoublyLinkedList<Datatype>* m_list;
    DoublyLinkedListIterator(DoublyLinkedList<Datatype>* p_list= 0, DoublyLinkedListNode<Datatype>* p_node= 0)
    {
        m_list= p_list;
        m_node= p_node;
    }

// ------------------------------------------------------------------
//  Name:           Start
//  Description:    Resets the iterator to the beginning of the list.
//  Arguments:      None.
//  Return Value:   None.
// ------------------------------------------------------------------
    void Start()
    {
        if(m_list!= 0)
            m_node= m_list -> m_head;
    }

// ----------------------------------------------------------------
//  Name:           End
//  Description:    Resets the iterator to the end of the list
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void End()
    {
        if(m_list!= 0)
            m_node = m_list->m_tail;
    }

// ----------------------------------------------------------------
//  Name:           Forth
//  Description:    Moves the iterator forward by one position
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void Forth()
    {
        if(m_node!= 0)
            m_node= m_node->m_next;
    }

// ----------------------------------------------------------------
//  Name:           Back
//  Description:    Moves the iterator backward by one position.
//  Arguments:      None.
//  Return Value:   None.
// ----------------------------------------------------------------
    void Back()
    {
        if(m_node!= 0)
            m_node = m_node->m_prev;
    }

// ----------------------------------------------------------------
//  Name:           Item
//  Description:    Gets the item that the iterator is pointing to.
//  Arguments:      None.
//  Return Value:   Reference to the data in the node.
// ----------------------------------------------------------------
    Datatype& Item()
    {
        return m_node->m_data;
    }

// ----------------------------------------------------------------
    //  Name:           Index
    //  Description:    Gets the index that the iterator is pointing to.
    //  Arguments:      None.
    //  Return Value:   Reference to the data in the node.
    // ----------------------------------------------------------------
        Datatype& Index()
        {
            return m_node;
        }
// ----------------------------------------------------------------
//  Name:           Valid
//  Description:    Determines if the node is valid.
//  Arguments:      None.
//  Return Value:   true if valid
// ----------------------------------------------------------------
    bool Valid()
    {
        return (m_node!= 0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:05:27.323

基本上我试图使用 m_node 作为索引，我被告知不是这样做的方法，并在 print 方法的 for 循环期间增加变量。这工作正常这是代码：

```
void Print(DoublyLinkedList<int>& p_list)
    {
        int index = 0;
    //Set up a new Iterator.
    DoublyLinkedListIterator<int> itr = getIterator();
    for(itr.Start(); itr.Valid(); itr.Forth())
        {
        index++;
        cout <<"Index: "<< index << "Element: " << itr.Item() << "\n";
        }
    cout <<"Number of Elements in the List: " << m_count << endl;

    } 
```

# javascript - 使用条件半径函数的 flotgraph

> ID：16022078
> 
> 赞同：0
> 
> 时间：2013-04-15T18:18:16.247
> 
> 标签：javascript, jquery, arrays, conditional-statements, flot

我有一个数据集，其中每个节点都包含一个日期和一个值。

我不希望 flot 在任何值处绘制一个圆形点，特别是如果该值为零

所以在我的图表选项中，我有：

```
points: {
          show: true,
          radius: 3
        }, 
```

但我怎么会有 `radius: function (x) { return x.value>0?3:0 };

这在flot中是否可行，如果可以，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:51:30.220

Flot 期望半径是一个数字。实现这一点的最简单方法是创建两个具有相同颜色的系列。第一个包含所有数据点，`points: { show: false }`第二个仅包含 y > 0 和 的那些数据点`lines: { show: false }`。

# android - 如何保留一些静态数据以供将来在微调器中使用？

> ID：16022084
> 
> 赞同：0
> 
> 时间：2013-04-15T18:18:42.587
> 
> 标签：android, spinner

当应用程序启动时，我从服务器获得了一些静态数据（数组），我需要将这些数据用于微调器，用于不同的活动。因此，这些数据应该可以在不同时间从不同活动中获得，以创建微调器。

我怎样才能做到这一点？如何在代码中生成微调器（微调器数据是键 = 值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:37:27.160

什么类型的数据包含该数组？也许你可以用[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref)它来保存它。

您可以在此处阅读有关生成微调器[的信息。](http://adanware.blogspot.com/2012/03/android-custom-spinner-with-custom.html) `CountryAdapter`类是制作微调器适配器的示例，该适配器在微调器下拉列表中显示项目。

编辑：将您的数据放入 Hashtable 并创建 2 种方法来保存和读取 SharedPreferences 中的数据：

```
public boolean saveData( Hashtable<String, String> myData) {

    Editor editor = getApplicationContext().getSharedPreferences("myData", Context.MODE_PRIVATE).edit();
    for (String key : myData.values()) {
        editor.putString(key, myData.get(key));
    }
    return editor.commit();
}

public Hashtable<String, String>  restoreData() {
    Hashtable<String, String> myData = new Hashtable<String, String>();

    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences("myData", Context.MODE_PRIVATE);
    int size = sharedPreferences.getInt("size", 0);

    for(int i =0; i < size; i++){
        myData.put(sharedPreferences.getString("key"+i, "key+1"), sharedPreferences.getString("value"+i, "value+1"));
    }

    return myData;
} 
```

# php - 如何在 javascript 中创建一个按钮，当用户单击该按钮时将打开 iframe？

> ID：16022089
> 
> 赞同：2
> 
> 时间：2013-04-15T18:18:59.523
> 
> 标签：php, javascript, html, iframe

我正在为我网站上的帖子发表评论。如何在 javascript 中创建一个按钮，当用户单击该按钮时将打开带有注释的 iframe 窗口？像 Facebook 这样的东西有他们对帖子的评论。如果有办法用其他语言创建它，我希望你写它。我刚刚写了 javascript，因为我听说你可以在 javascript 中做到这一点。如果有更优雅和/或更好的方式，请随意编写。所以在每篇文章下面我都会添加一个按钮，当用户点击它时，它应该会打开如下内容：

```
<iframe src="comment.php?postid=<?php echo $postid; ?>" 
    width=600px; 
    height=500px;>
</iframe> 
```

有没有一种方法只在您单击按钮时才加载 iframe 窗口，而不是与发布帖子的页面同时加载？例如，如果我在一页上有 10 篇文章，并且所有 10 篇文章的评论与包含文章的页面同时加载，则会大大降低页面速度。

你也知道如何根据帖子数量调整 iframe 窗口大小，如果帖子有 1 条评论，窗口大小为 100 像素，如果帖子有 5 条评论，窗口大小为 500 像素？

我知道 Facebook 对他们的评论有比这更好的东西，所以如果你知道比我的想法更好的东西，请随时分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:17:27.330

我会 jquery .load、.post、.get 或 .ajax

在每篇文章下都有一个名为 comments 的 div 类，并且在该 div 上不显示任何 CSS。当用户单击该文章的查看评论按钮时，向服务器发送请求并请求对该文章 ID 的评论。

您将希望将文章的 ID 存储在查看评论链接的属性中，以便您可以向 .load 请求传递您想要评论的文章的 ID。

```
<div articleid="5" class="view-com-button">view comments</div>
<div class="comment" articleid="5" style="display:none"></div>
$(".view-com-button").click(function(event){
$(".comment[articleid='$(this).attrib("articleid").load("comment.php", {( "idarticle" : $(this).attrib("articleid") )};
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:24:39.970

尝试使用类似 prettyPhoto 的东西：

[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

如果您在该页面上向下滚动，您将看到加载的窗口显示 iFrame 的示例。为网站创建类似半 ajax 的功能非常方便。你几乎可以使用任何 Lightbox 克隆来做类似的事情，但我发现 prettyPhoto 是最强大的，并且有相当多的支持。这确实使用 jQuery 和它自己的 javascript 文件来工作，但它是最小的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:25:05.733

你的问题的一个简单的解决方案是..

```
 <html>
    ..
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
...
    <body>
    ...
    <div class='comments-container'></div>
    <a class='show-comments' href='#'>Show Comments</a>
    ...
    <script>
    $(".show-comments").click(function(){
    $(".comments-container").html('<iframe src="comment.php?postid=<?php echo $postid; ?>" 
        width=600px; 
        height=500px;>
    </iframe>');
    });
    </script>
</body>
</html> 
```

或者您可以将所有评论加载到 div 元素上，默认情况下隐藏该元素，然后单击按钮后，您可以显示它。该解决方案可能是

```
<html>
    ..
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
...
    <body>
    ...
    <div class='comments-container'>
comment 1: ----    
comment 2: -----
</div>
    <a class='show-comments' href='#'>Show Comments</a>
    ...
    <script>
    $(".show-comments").click(function(){
    $(".comments-container").slideDown("slow");
    });
    </script>
</body>
</html> 
```

# c# - 关联类（列表中的列表）

> ID：16022092
> 
> 赞同：1
> 
> 时间：2013-04-15T18:19:05.377
> 
> 标签：c#, forms, list, class

我有 2 个与一个和另一个相关联的类，一个城镇中有很多人。

```
public class Town
{
    List<People> collectionOfPeople;

    public string town { get; set; }

    public Town()
    {
        townName = "";

        collectionOfPeople = new List<People>();
        collectionOfPeople.Add(new People());
    }

    public Town(string tmp_townName)
    {
        townName = tmp_townName;

        collectionOfPeople = new List<People>();
        collectionOfPeople.Add(new People("Daniel Smith", "22"));
    }
} 
```

在列表中构造一个城镇的实例以及与之关联的记录后，我想在表单上显示结果。

```
 private int numberOfPeople;
    private int currentPeopleShown;
    private int numberOfTown;
    private int currentTown;
    private List<People> peopleList;
    private List<Town> townList;

    // ************************* Methods/Functionality
    private void LoadData()
    {
        txt_townName.Text = (townList[0]).townName;
        txt_peopleName.Text = (peopleList[currentPeopleShown]).name;

        numberOfPeople = peopleList.Count();
        currentPeopleShown = 0;
    } 
```

我将如何引用列表中的列表，以显示或计算其中的记录数（town0 .. show people1、2、3 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:22:11.817

您必须将列表公开为属性

```
public List<People> CollectionOfPeople { get; set; }
^                                      ^ ^    ^    ^ 
```

然后像这样引用它：

```
var people = myTown.CollectionOfPeople; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:22:00.137

您可以使用 SelectMany(...) 将所有嵌套项目合并为单个 enumberable

```
townList.SelectMany(t=>t.collectionOfPeople).Count(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:23:40.027

> 我将如何引用列表中的列表，以显示或计算其中的记录数。（town0 .. 显示 people1,2,3 等）

```
foreach (Town town in townList)
  foreach (People people in town.collectionOfPeople)
    MessageBox.Show(people.Name); 
```

# python - 使用 pandas 读取带有前导空格的文本文件会给出一个 NaN 列

> ID：16022094
> 
> 赞同：9
> 
> 时间：2013-04-15T18:19:23.047
> 
> 标签：python, python-2.7, pandas

我正在使用 pandas.read_csv 来读取以空格分隔的文件。该文件在每行前面都有可变数量的空白字符（数字是右对齐的）。当我阅读这个文件时，它会创建一个 NaN 列。为什么会发生这种情况，防止它的最佳方法是什么？

例子：

文本文件：

```
 9.0  3.3 4.0
 32.3 44.3 5.1
  7.2  1.1 0.9 
```

命令：

```
import pandas as pd
pd.read_csv("test.txt",delim_whitespace=True,header=None) 
```

输出：

```
 0     1     2    3
0 NaN   9.0   3.3  4.0
1 NaN  32.3  44.3  5.1
2 NaN   7.2   1.1  0.9 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T19:06:34.460

我倾向于使用 FWIW `\s+`，它不会遇到同样的问题：

```
>>> pd.read_csv("wspace.csv", header=None, delim_whitespace=True)
    0     1     2    3
0 NaN   9.0   3.3  4.0
1 NaN  32.3  44.3  5.1
2 NaN   7.2   1.1  0.9
>>> pd.read_csv("wspace.csv", header=None, sep=r"\s+")
      0     1    2
0   9.0   3.3  4.0
1  32.3  44.3  5.1
2   7.2   1.1  0.9 
```

# java - JSoup BodyAsBytes 连接到 FileOutputStream 以保存临时文件不起作用？

> ID：16022098
> 
> 赞同：2
> 
> 时间：2013-04-15T18:19:57.730
> 
> 标签：java, android, cookies, download, jsoup

我使用 JSoup 来解析带有 cookie 的网站。我想使用 JSoup 从网站下载一个文件，并使用这段代码保存在哈希图中的 cookie：

```
Connection.Response res = Jsoup.connect("http://www.webpage.com/downloadpage).execute();
Map<String, String> cookies = res.cookies(); 
```

所以当我尝试下载文件时，我使用这个：

```
downloadFile(Jsoup.connect("http://www.webpage.com/file.ext).cookies(cookies).ignoreContentType(true).execute().bodyAsBytes()); 
```

和

```
private void downloadFile(byte[] fileByteArray) {
    try {
        File temprFile = File.createTempFile("tempfile", "ext", getCacheDir());
        temprFile.deleteOnExit();
        FileOutputStream fos = new FileOutputStream(temprFile);
        fos.write(fileByteArray);
        fos.close();

        }  catch (MalformedURLException e){
            e.printStackTrace();
        } catch (IOException ex) {
        String s = ex.toString();
        ex.printStackTrace();
    }
} 
```

程序运行没有错误，但是当我尝试打开临时文件时，文件似乎不完整。每次，恰好下载 1.408.576 个字节。例如，当我以这种方式下载 mp3 文件时，临时文件只包含原始文件的 40 秒。我在这里想念什么？

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:20:45.907

猜猜我很快就来这里问我的问题。我自己在 JSoup 的 GitHub 文档中找到了解决方案。无论如何，感谢您的回复！ [https://github.com/jhy/jsoup/blob/master/src/main/java/org/jsoup/Connection.java](https://github.com/jhy/jsoup/blob/master/src/main/java/org/jsoup/Connection.java)

```
/**
 * Set the maximum bytes to read from the (uncompressed) connection into the body, before the connection is closed,
 * and the input truncated. The default maximum is 1MB. A max size of zero is treated as an infinite amount (bounded
 * only by your patience and the memory available on your machine).
 * @param bytes number of bytes to read from the input before truncating
 * @return this Connection, for chaining
 */
public Connection maxBodySize(int bytes); 
```

不管怎么说，还是要谢谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-13T21:52:04.483

我添加了 0`maxBodySize(0)`并下载了完整的视频。例子`Jsoup.connect(url).maxBodySize(0).ignoreContentType(true).execute().bodyAsBytes()`

# perl - 用于将 2 个文件与多个条目组合的 Perl 脚本

> ID：16022101
> 
> 赞同：0
> 
> 时间：2013-04-15T18:20:05.457
> 
> 标签：perl, text-manipulation, merging-data, csv

我有一个制表符分隔的文本文件，如下所示：

```
contig11 GO:100 other columns of data
contig11 GO:289 other columns of data
contig11 GO:113 other columns of data
contig22 GO:388 other columns of data
contig22 GO:101 other columns of data 
```

还有一个是这样的：

```
contig11 3 N
contig11 1 Y
contig22 1 Y
contig22 2 N 
```

我需要将它们组合起来，以便一个文件的每个“多个”条目被复制并在另一个文件中填充其数据，这样我得到：

```
contig11 3 N GO:100 other columns of data
contig11 3 N GO:289 other columns of data
contig11 3 N GO:113 other columns of data
contig11 1 Y GO:100 other columns of data
contig11 1 Y GO:289 other columns of data
contig11 1 Y GO:113 other columns of data
contig22 1 Y GO:388 other columns of data
contig22 1 Y GO:101 other columns of data
contig22 2 N GO:388 other columns of data
contig22 2 N GO:101 other columns of data 
```

我几乎没有编写脚本的经验，但是在其中一个文件中只出现了一次“contig11”，并带有散列/键。但我什至无法开始做这件事！非常感谢有关如何解决此问题的一些帮助或提示。

*编辑*所以我尝试了 ikegami 的建议（见答案）：但是，这产生了我需要的输出，除了 GO:100 列以后（脚本中的 $rest ？？？） - 任何想法我做错了什么？

```
#!/usr/bin/env/perl

use warnings;

open (GOTERMS, "$ARGV[0]") or die "Error opening the input file with GO terms";
open (SNPS, "$ARGV[1]") or die "Error opening the input file with SNPs";

my %goterm;

while (<GOTERMS>)
{
    my($id, $rest) = /^(\S++)(,*)/s;
    push @{$goterm{$id}}, $rest;
}

while (my $row2 = <SNPS>)
{
    chomp($row2);
    my ($id) = $row2 =~ /^(\S+)/;
    for my $rest (@{ $goterm{$id} })
    {
        print("$row2$rest\n");
    }
}

close GOTERMS;
close SNPS; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:29:15.620

看看你的输出。它显然是由

*   对于第二个文件的每一行，
    *   对于具有相同 id 的第一个文件的每一行，
        *   打印出合并的行

所以问题是：如何找到第一个文件的行与第二个文件的行具有相同的 id？

答案是：您将第一个文件的行存储在由行 ID 索引的哈希中。

```
my %file1;
while (<$file1_fh>) {
   my ($id, $rest) = /^(\S++)(.*)/s;
   push @{ $file1{$id} }, $rest;
} 
```

所以前面的伪代码解析为

```
while (my $row2 = <$file2_fh>) {
   chomp($row2);
   my ($id) = $row2 =~ /^(\S+)/;
   for my $rest (@{ $file1{$id} }) {
      print("$row2$rest");
   }
} 
```

* * *

```
#!/usr/bin/env perl

use strict;   
use warnings;

open(my $GOTERMS, $ARGV[0])
     or die("Error opening GO terms file \"$ARGV[0]\": $!\n");
open(my $SNPS, $ARGV[1])
     or die("Error opening SNP file \"$ARGV[1]\": $!\n");

my %goterm;
while (<$GOTERMS>) {
    my ($id, $rest) = /^(\S++)(.*)/s;
    push @{ $goterm{$id} }, $rest;
}

while (my $row2 = <$SNPS>) {
    chomp($row2);
    my ($id) = $row2 =~ /^(\S+)/;
    for my $rest (@{ $goterm{$id} }) {
        print("$row2$rest");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:32:45.620

我将描述你如何做到这一点。您需要将每个文件 pu 放入数组中（每个 libe 都是一个数组项）。然后你只需要以需要的方式比较这些数组。你需要2个循环。每个数组/文件记录的主循环，其中包含您将用于campare的字符串（在您的示例中它将是第二个文件）。在此循环下，您需要为数组/文件中的每个记录创建另一个循环，其中包含您将与之比较的记录。并且只需使用另一个数组的每个记录检查数组的每个记录并处理结果。

```
foreach my $record2 (@array2) {
    foreach my $record1 (@array1){
        if ($record2->{field} eq $record1->{field}){
            #here you need to create the string which you will show
            my $res_string = $record2->{field}.$record1->{field};
            print "$res_string\n";
        }
    }
} 
```

或者不使用数组。只需读取文件并将每一行与另一个文件的每一行进行比较。总体思路是一样的））

# xml - 展开 XML Schema 以定义当前定义的顶级标记的列表

> ID：16022103
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:20:20.763
> 
> 标签：xml, xsd

[在这个页面上，Microsoft 提供了一个很好的 XML Schema 示例，](http://msdn.microsoft.com/en-us/library/ms256129.aspx)用于表示采购订单的 XML 文档。

我想创建一些非常相似的东西，但在我的例子中，XML 文档将包含一个完整的采购订单列表——即多个采购订单项目。在上面链接的示例中，Schema 仅代表一个采购订单。

我需要在架构中修改什么以允许多个采购订单？假设标签很简单`<purchaseOrders>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:36:31.373

将此添加到架构中：

```
<xs:element name="purchaseOrders">
   <xs:complexType>
     <xs:sequence>
       <xs:element ref="purchaseOrder" minOccurs="0" maxOccurs="unbounded"/>
     </xs:sequence>
   </xs:complexType>
</xs:element> 
```

`minOccurs="0"`如果`purchaseOrders`可以为空，则需要 - 如果它必须始终包含至少一个`purchaseOrder`，则可以将其丢弃。

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms256118.aspx)`xs:element`

# sass - 将 LESS mixins 转换为 Sass

> ID：16022104
> 
> 赞同：1
> 
> 时间：2013-04-15T18:20:24.257
> 
> 标签：sass

嗯..我对 LESS 有点熟悉，当我试图升级到 SASS 时。

在更少的情况下，我以这种方式创建了一些框架：

```
.w(@x){width:@x;}
.h(@x){height:@x;}
.f(@x,@y){font:@x '@y'} 
```

我将它保存在 framework.less 上，并将`@import`其保存在我的 main.less 上

我刚刚搜索过，但我没有找到如何在 SASS 中进行操作。只是阅读了官方网站上的文档，但没有成功。谁能给我解释一下或者给我发个教程链接？我在谷歌上找到的所有链接都很难理解，即使是让 SASS 工作也是如此。

LESS 的文档很容易理解，但是 SASS 太复杂了..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:35:36.187

那些被称为*mixins*。你可以这样写：

```
@mixin w($x){width:$x;}
@mixin h($x){height:$x;}
@mixin f($x,$y){font:$x $y} 
```

Mixin 调用如下所示：

```
.foo {
    @include f(1.5em, sans-serif);
} 
```

但是，您的`f`mixin 有多余的参数：

```
@mixin f($x){font:$x}

.foo {
    @include f(1.5em sans-serif);
} 
```

# qml - BlackBerry 10 Cascades 应用卡住影响财产

> ID：16022105
> 
> 赞同：0
> 
> 时间：2013-04-15T18:20:25.750
> 
> 标签：qml, blackberry-10, blackberry-cascades

我对列表/详细信息模式有疑问。我有一个 Article 类，继承自`QObject`，定义了一些属性（`title`，`updated`并且`content`是现在重要的属性）。为了填充我的 (QML) `ListView`，我有一个 C++ `GroupDataModel`，其中填充了一些`Article*`. 这是我的清单`onTriggered`：

```
onTriggered: {
    if (indexPath.length > 1) {
        currentArticle = dataModel.data(indexPath);
        var page = articlePageDefinition.createObject();
        nav.push(page)
    }
}
```

你可以猜到，`articlePageDefinition`使用 upper`currentArticle`属性定义了一个页面。

现在，当我显示 articlePage 一次时，它工作正常。我可以返回，单击相同的列表项，显示相同的`Article`详细信息，效果很好。但是当我选择第二篇文章时，该应用程序就冻结了。我可以返回导航窗格，但不能再单击列表项。我试图添加一些日志，`onTriggered`卡在`currentArticle = dataModel.data(indexPath);`. 此时，我可以`dataModel.data(indexPath)`毫无问题地记录每个属性。我试图不创建/推送页面，只是影响`currentArticle`和显示它的一些属性，它也可以正常工作。我真的不明白我在这里做错了什么，任何帮助表示赞赏。

如果您需要查看更多代码，一切都在这里：[https ://github.com/Kernald/tt-rss-bb10/tree/e29e3b616aa179dd42f66804ecc20a6a45b6bb22](https://github.com/Kernald/tt-rss-bb10/tree/e29e3b616aa179dd42f66804ecc20a6a45b6bb22)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:47:38.217

这可能会导致您遇到的问题：

1.  您创建 articlePage 并将其数据绑定到“currentArticle”全局变量
2.  当您返回时，articlePage 不会被删除。
3.  您打开同一个 articlePage 的另一个实例。最后一个仍然将其数据绑定到同一个 currentArticle 实例。
4.  当您返回并单击另一个项目时：之前的文章页面仍然存在于内存中。它绑定到“currentArticle”。问题是，改变的不是“currentArticle”的数据，而是“currentArticle”引用的对象。Qml binder 就会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:16:21.337

我的应用程序有类似的行为，但如果原因相同，我没有检查您的 github 代码。我认为您可以比我更快地验证这一点。
删除和添加具有相同索引的列表项时，代码会卡住。我删除了有关用户操作的条目并在该位置添加了一个新条目，但它卡住了。这是 BB10 的一个已知问题，我在这里找到：[https ://developer.blackberry.com/cascades/download/releasenotes/#known](https://developer.blackberry.com/cascades/download/releasenotes/#known)

# html - 如何在 Joomla 网站上将包含 Google 可视化的报告呈现为 pdf

> ID：16022106
> 
> 赞同：0
> 
> 时间：2013-04-15T18:20:27.253
> 
> 标签：html, pdf, joomla, visualization

好的，所以我要求这个记录我的解决方案并自己回答，但欢迎对我的方法进行任何改进。

问题：我需要向嵌入在 iframe 中的 html 页面（因此它需要自己的 url）和 pdf 呈现报告。该报告包括一个不寻常的图表，我见过的任何图表 api 都不支持该图表。我的网站使用 Joomla！CMS (V. 2.5.*) 这意味着我的后端是 php 和 mysql。我需要在不受 Joomla 上设置的默认模板干扰的情况下呈现报告。我在 linux 主机上运行，​​（基本 LAMP）。Joomla 在他们的 html 中使用了 base 标签，这搞砸了 svg 的 url()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:20:27.253

我的解决方案涉及以下内容：[wkhtml2pdf](http://code.google.com/p/wkhtmltopdf/)、js、[url 参数](http://www.marketingportland.com/marketing/joomla-articles/136-appending-onto-joomla-urls)和[编写 joomla 组件](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)。

我编写了一个带有两个站点视图的基本 Joomla 组件，一个在 html 中生成报告，另一个在 iframe 中显示报告视图。所以报告有一个网址可以访问它，我有办法嵌入它。该组件还具有用于生成报告的 js 和 css 提取到单独的文件以包含在媒体文件夹中（但这只是为了代码清洁而不是功能）。

报表视图必须对页眉进行以下修改以使报表正确呈现（保存为图表），否则资源在错误的时间加载：

```
$document = &JFactory::getDocument();
$document->setBase('');//base tag screws up svg urls so get rid of it
$document->addscript('http://www.google.com/jsapi');
$document->addscript(JURI::root(true).'/media/com_metahealthzone/javascript/chart.js');
$document->addStyleSheet(JURI::root(true).'/media/com_metahealthzone/css/chart.css'); 
```

iframe 中使用的 url 必须附加 ?template=system，tmpl=component 不起作用，因为模板中的 css 仍然被应用。

为了让 Google 可视化看起来正确，我在末尾添加了 javascript 来`OnLoadCallback`抓取 svg 并添加 a`linearGradient`作为`defs`标签的子项`id="svg_grad"`（为什么 Google 不支持渐变，我不知道），然后抓取所有元素在需要渐变的图表中并将其填充设置为`'url(#svg_grad)'`. 由于 svg 命名空间，请记住使用`setAttributeNS`，并使渐变`stop`标记成为渐变的子级，而不是 defs 的子级。

我仍然需要对 VML（愚蠢的 IE）进行调整。

我也必须克服 wkhtml2pdf 的一些问题。当您使用 js 向 DOM 添加元素时，它的行为与其他浏览器不同。您必须保留返回的句柄，因为您无法使用`document.getElement*`类型函数获取新元素。此外，您必须指示 wkhtml2pdf 等待 js 运行使用`--no-stop-slow-scripts`，否则图形不会显示（它很慢）。`--cookie <name> <value>`我还必须通过使用参数为 wkhtml2pdf 设置 cookie 来模拟用户的会话。

# java - 如何将字符串数组 x[i] 中的元素转换为字符串？

> ID：16022111
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:20:32.577
> 
> 标签：java, arrays, string, swt

查看下面的代码片段，该方法`maxFont.LabelFont(Label tmp, String tmp2)`只接受字符串输入，而不接受字符串数组中的元素。当我尝试使用`x[i].toString()`时，字符串会显示为`Label{xxxx}`而不是只是`xxxx`.

```
// for each column, prompt user to Insert data for that category
for (int i = 0; i < c; i++) {
    maxFont.textFont(y[i]);

    // Add label x[i] prompting for category value
    x[i].setParent(mUpdate);
    maxFont.labelFont(x[i],x[i].toString());
    // Add text field tmp2 to input the new data
    y[i].setParent(mUpdate);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:35:07.937

由于`toString()`在这种情况下总是返回`Label(xxxx)`，您可以使用 substrings 或 split 来提取`xxxx`。

这是使用拆分的简洁方法：

```
Label(xxxx).split( "[\\\\(\\\\)]")[1] 
```

所以在你的代码中你会使用

```
maxFont.labelFont(x[i],x[i].split( "[\\\\(\\\\)]")[1]); 
```

请注意，需要双反斜杠，括号也是`[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:37:26.873

你试过`String.valueOf`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:39:02.567

如果`x`确实是 SWT [`Label`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Label.html)，那么您想要：

```
x[i].getText() 
```

代替

```
x[i].toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:41:39.323

如果 x 是您的对象 - 覆盖 toString() 或添加您的私有方法。

否则 - 可能您可以将 x 转换为它的类型并使用 apppropeiated 属性。

# asp.net-mvc - MVC 视图设计器抱怨“net.pipe://localhost/ 没有端点监听

> ID：16022112
> 
> 赞同：2
> 
> 时间：2013-04-15T18:20:33.190
> 
> 标签：asp.net-mvc, visual-studio-2012

我最近安装了 Visual Studio 2012（终极版）更新 2。我不确定这个问题是否与该更新有关，但是.. 现在，当我在 VS 设计器中查看我的任何视图（.aspx）代码时，初始`@model`or`@using`指令得到一个波浪形的下划线和一个相关的错误消息“在 net.pipe://localhost/xxx 没有端点监听”。页面中依赖`@model`or`@using`指令的所有代码都有自己相关的波浪线下划线错误。但是代码运行得很好。错误在设计器中，而不是在运行时 JIT 编译器中。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:33:20.130

经过一番挖掘，我发现[一篇博](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/be50be61-39eb-49ba-aaf5-b18ded17c107/)文表明问题可能是由于未能以管理员身份运行 VS 引起的。我试过了（我以管理员身份运行 VS 并加载了有问题的解决方案）并且，bada bing，bada boom，问题解决了。

我一直很高兴跳过 ASP.NET 项目的“以管理员身份运行”的繁琐程序，并且一切正常。我猜他们一定在更新 2 中改变了一些东西，现在需要用管理员权限打开 ASP.NET MVC 项目。

**比我更了解的人可以确认这个诊断吗？**

（顺便说一句，我看到[这篇文章](http://blogs.msdn.com/b/abhiann/archive/2013/02/14/always-run-visual-studio-2012-as-administrator-in-windows-8.aspx)展示了如何强制 VS 在 Windows 8 上始终以管理员权限运行。这是一个全有或全无的解决方案......我真正喜欢的是 VS 开发人员 - 或某人有时间 - 将上下文菜单项添加到 .sln 文件以在启用管理员权限的 VS 中打开它们。）

编辑：

在我发布了这个“解决方案”（实际上是一种变通方法）4 个月后，我在这里：我打开了一个 MSDN 技术支持的事件。经过大量工作，我们一无所获；仍然不知道潜在的问题可能是什么。但是这个问题只存在于我的台式电脑上——我的笔记本电脑没有这个问题——而且我正在购买一台新电脑，所以当我在新电脑上安装 VS 并将旧电脑变成门挡时问题应该会消失.

# linux - 使用 Linux/Vim 将头文件或文本文件信息转换为代码

> ID：16022115
> 
> 赞同：1
> 
> 时间：2013-04-15T18:20:40.070
> 
> 标签：linux, parsing, vim, opencl, text-processing

我发现自己编写了一个从 OpenCL 错误代码到人类可读字符串的非常简单的转换。大约 50 个不同的代码在头文件中定义，如下所示：

```
...
#define CL_INVALID_CONTEXT -34
#define CL_INVALID_QUEUE_PROPERTIES -35
#define CL_INVALID_COMMAND_QUEUE -36
#define CL_INVALID_HOST_PTR -37
... 
```

我使用专家复制/粘贴将所有这些放在一个巨大的开关/案例中：

```
...
case CL_INVALID_CONTEXT:
  return "CL_INVALID_CONTEXT";
case CL_INVALID_QUEUE_PROPERTIES:
   return "CL_INVALID_QUEUE_PROPERTIES";
case CL_INVALID_COMMAND_QUEUE:
   return "CL_INVALID_COMMAND_QUEUE";
case CL_INVALID_HOST_PTR:
    return "CL_INVALID_HOST_PTR";
... 
```

因为我最近开始使用 Vim，所以我认为可能有一种方法可以使用 Linux 命令工具和 Vim 以更有效的方式做到这一点。这里有一个类似的帖子，有人声称用 Emacs 完成了它。关于如何避免下次在类似任务上浪费 15 分钟的任何想法？

（我知道*oclErrorSting()*可能存在，但为了一般性，我们忽略它！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:27:35.457

你可以在 Vim 中通过搜索和替换来做到这一点：

```
%s/#define \(\w\+\).*/case \1:^M  return "\1";/g 
```

获取`^M`输出的技巧是输入`CTRL-V`，然后`Enter`在输出中输入换行符。

这将对整个文件进行替换。

这通过执行匹配整行并将其替换为您想要的文本来工作。每个名称在搜索中被捕获到一个组中，这就是`\(\w\+\)`正在做的事情，然后在替换中使用匹配的文本两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:25:49.397

重复任务的另一个通用解决方案是使用`macros`，或者在帮助中调用复杂的重复。

基本上，您开始在寄存器中记录您的输入，创建一个案例，然后转到定义的下一行。

有关`:help q`更多详细信息，请参阅。

# ssrs-2008 - 如何避免在 SSRS 2008 r2 中将空白报告导出到 Excel？

> ID：16022116
> 
> 赞同：1
> 
> 时间：2013-04-15T18:20:42.947
> 
> 标签：ssrs-2008

嗨，我开发了一份报告，该报告在数据驱动订阅的帮助下动态获取参数。

但是当我订阅时，它会将所有用户报告导出到 Excel 并将其保存到 Windows 文件共享文件夹中。

这里我的问题是如果特定用户的报告为空，我的客户不想要报告。

但我必须在 SSRS 本身中解决这个问题，而不是在过程（数据库）级别进行更改。我在 SP Level 中使用了以下表达式，即

```
if(@@rowcoun>0)
raiserror("nodata",16,1) 
```

注意：但相同的程序用于多种目的，我的数据库开发人员不接受在 SP 级别进行更改。

在报告级别，如果报告为空，我将使用以下表达式隐藏列标题

```
iif(countrows()>0,"true","false") 
```

但上面的表达式显示空白报告，它正在为用户导出空的 Excel 表。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:47:04.040

由于您已经在使用数据驱动订阅，您需要做的是编辑订阅查询，以便它根据包含数据的邮件创建收件人电子邮件列表。我这样做的方法是将收件人表与要返回的数据集连接起来。

# java - 将变量从 JSP 传递到 Java

> ID：16022117
> 
> 赞同：0
> 
> 时间：2013-04-15T18:20:45.330
> 
> 标签：java, jsp

我正在尝试`seq`将从[JSP](http://en.wikipedia.org/wiki/JavaServer_Pages)调用的字符串变量传递给 Java 程序，并通过将字符串作为参数传递给其对象来将其传递给另一个 Java 程序。我不知何故被卡住了。

**启动.jsp：**

```
<%@ page import="org.dypbbi.nirmiti.ProtModMain %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>NIRMITI</title>
    </head>
    <body>
        <h1>Please wait...</h1>
        <%
            String seq=request.getParameter("s");
            ProtModMain.getSequence(seq);
        %>
    </body>
</html> 
```

**ProtModMain.java：**

```
package org.dypbbi.nirmiti;
public class ProtModMain {
    String sequence="";

    public static String getSequence(String str)
    {
        return str;
    }

    public static void main(String args[])throws Exception
    {
      ProtModMain MainObj = new ProtModMain();
      sequence = MainObj.getSequence();
      new ObjectFactory(sequence);
    }
} 
```

Start.jsp 将从[HTML](http://en.wikipedia.org/wiki/HTML)中检索字符串值。它通过方法将字符串传递给`ProtModMain`类`getSequence`。我现在需要使用字符串值将其传递给其他需要它的类，因此我打算将它作为参数传递给`ObjectFactory`对象。但在此之前，我需要调用类`getSequence`中的方法，`ProtModMain`以便传递值。我不明白如何`getSequence`在类的主要方法中调用该方法`ProtModMain`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:04:59.893

您需要使用 将参数设置为请求`request.setParameter("<name>",<value>);`。然后你可以在 Java 文件中使用`HTTPRequest getParameter("<name>");`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:31:32.770

您没有调用该`main`方法。在您的 JSP 中，您只调用静态`getSequence`的，顺便说一下，它只返回值。

我认为您有一个项目概念问题：为什么您的 Web (JSP) 应用程序有一个主类？

我认为你应该适应：

启动.jsp：

```
<%@ page import="org.dypbbi.nirmiti.ProtModMain %> 
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>NIRMITI</title>
    </head>
    <body>
        <h1>Please wait...</h1>
        <%
        String seq=request.getParameter("s");
        ProtModMain protModMain = new ProtModMain();
        ObjectFactory myFactory = protModMain.createFactory(seq);
        //do whatever you want with your factory ;)
        %>
    </body>
</html> 
```

ProtModMain.java：

```
package org.dypbbi.nirmiti;
public class ProtModMain {

    public ObjectFactory createFactory(final String sequence) {
        return new ObjectFactory(sequence);
    }
} 
```

这样，您将调用您想要的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:28:47.917

您可以使用`<form>`标签和`<input type='hidden'>`按钮`<input type='submit'>`，在表单中您将指定发送方法和发送数据的位置。

或者您可以存储在 POJO 中并存储在会话中并使用 servlet 恢复它。

或者将 Ajax 与 XmlHttpRequest 一起使用。

# javascript - 使用代码折叠显示 json 的小部件？

> ID：16022119
> 
> 赞同：1
> 
> 时间：2013-04-15T18:20:46.500
> 
> 标签：javascript, json, formatting, widget

我知道我可以轻松地格式化 json，`JSON.stringify(str, undefined, 4)`但有谁知道一个小部件可以显示带有代码折叠的 json？

这是我在令人敬畏的[ApprovalTests 库的 Jasmine 端口上做的一个峰值](http://approvaltests.sourceforge.net/)

# objective-c - mutableCopy 是对象的状态还是行为？

> ID：16022120
> 
> 赞同：1
> 
> 时间：2013-04-15T18:20:51.327
> 
> 标签：objective-c, syntax, mutable

我个人坚持“在 Objective-C 中使用点表示法和状态，以及使用行为的消息”原则。我不想讨论这个问题，但更多的是方法 mutableCopy 是状态还是行为？

也许我应该对状态和行为之间的区别进行更多研究，但据我所知，我不确定在这种情况下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:23:01.383

行为。对象的副本与“对象的某些特定属性”无关。它正在**从原始对象创建一个新对象。**所以请**不要**写

```
NSMutableArray *mutArr = array.mutableCopy; 
```

# delphi - 如何使控制台应用程序等待“Enter”键，但在一段时间后自动继续？

> ID：16022126
> 
> 赞同：11
> 
> 时间：2013-04-15T18:21:17.050
> 
> 标签：delphi, console-application, delphi-7

我在 delphi 7 中创建了一个控制台应用程序，它应该在您按下回车按钮后显示消息：

```
begin
  writeln ('Press ENTER to continue');
  readln;
  writeln ('blablabla');
  writeln ('blablabla');
end; 
```

问题是用户可以按任何按钮继续，这就是问题所在。如果用户按下键盘的输入按钮，我只希望程序继续。除了，我需要它在一段时间后自动继续，例如 5 秒，无需用户输入。

如何制作一个控制台应用程序，它会等待一段时间让用户按下 Enter 键，但如果用户不按下则自动继续？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T19:31:31.587

你可以试试这段代码（改编自我们的`SynCommons.pas`单元，在我们的*mORMot*框架内）：

```
procedure ConsoleWaitForEnterKey(TimeOut: integer);
  function KeyPressed(ExpectedKey: Word):Boolean;
  var lpNumberOfEvents: DWORD;
      lpBuffer: TInputRecord;
      lpNumberOfEventsRead : DWORD;
      nStdHandle: THandle;
  begin
    result := false;
    nStdHandle := GetStdHandle(STD_INPUT_HANDLE);
    lpNumberOfEvents := 0;
    GetNumberOfConsoleInputEvents(nStdHandle,lpNumberOfEvents);
    if lpNumberOfEvents<>0 then begin
      PeekConsoleInput(nStdHandle,lpBuffer,1,lpNumberOfEventsRead);
      if lpNumberOfEventsRead<>0 then
        if lpBuffer.EventType=KEY_EVENT then
          if lpBuffer.Event.KeyEvent.bKeyDown and
             ((ExpectedKey=0) or (lpBuffer.Event.KeyEvent.wVirtualKeyCode=ExpectedKey)) then
            result := true else
            FlushConsoleInputBuffer(nStdHandle) else
          FlushConsoleInputBuffer(nStdHandle);
    end;
  end;
    var Stop: cardinal;
begin
  Stop := GetTickCount+TimeOut*1000;
  while (not KeyPressed(VK_RETURN)) and (GetTickCount<Stop) do 
    Sleep(50); // check every 50 ms
end; 
```

请注意，嵌入在*mORMot*中的版本确实允许调用该`TThread.Synchronize()`方法并在必要时处理 GDI 消息循环。我希望这个程序正好适合你的需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T19:42:29.253

我以前做过几次类似的事情：

首先声明几个全局变量：

```
var
  hIn: THandle;
  hTimer: THandle;
  threadID: cardinal;
  TimeoutAt: TDateTime;
  WaitingForReturn: boolean = false;
  TimerThreadTerminated: boolean = false; 
```

二、添加功能

```
function TimerThread(Parameter: pointer): integer;
var
  IR: TInputRecord;
  amt: cardinal;
begin
  result := 0;
  IR.EventType := KEY_EVENT;
  IR.Event.KeyEvent.bKeyDown := true;
  IR.Event.KeyEvent.wVirtualKeyCode := VK_RETURN;
  while not TimerThreadTerminated do
  begin
    if WaitingForReturn and (Now >= TimeoutAt) then
      WriteConsoleInput(hIn, IR, 1, amt);
    sleep(500);
  end;
end;

procedure StartTimerThread;
begin
  hTimer := BeginThread(nil, 0, TimerThread, nil, 0, threadID);
end;

procedure EndTimerThread;
begin
  TimerThreadTerminated := true;
  WaitForSingleObject(hTimer, 1000);
  CloseHandle(hTimer);
end;

procedure TimeoutWait(const Time: cardinal);
var
  IR: TInputRecord;
  nEvents: cardinal;
begin

  TimeOutAt := IncSecond(Now, Time);
  WaitingForReturn := true;

  while ReadConsoleInput(hIn, IR, 1, nEvents) do
    if (IR.EventType = KEY_EVENT) and
      (TKeyEventRecord(IR.Event).wVirtualKeyCode = VK_RETURN)
      and (TKeyEventRecord(IR.Event).bKeyDown) then
      begin
        WaitingForReturn := false;
        break;
      end;

end; 
```

现在您可以使用`TimeoutWait`等待返回，但不超过给定的秒数。但是您必须在使用此功能之前进行设置`hIn`和调用：`StartTimerThread`

```
begin

  hIn := GetStdHandle(STD_INPUT_HANDLE);
  StartTimerThread;

  Writeln('A');
  TimeoutWait(5);

  Writeln('B');
  TimeoutWait(5);

  Writeln('C');
  TimeoutWait(5);

  EndTimerThread;

end. 
```

您可以摆脱`StartTimerThread`，特别是如果您每次调用启动一个线程，但`TimeoutWait`连续多次调用可能会更加棘手。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-31T20:50:54.933

**单位控制台**

```
unit Console;

interface

procedure WaitAnyKeyPressed(const TextMessage: string = ''); overload; inline;
procedure WaitAnyKeyPressed(TimeDelay: Cardinal; const TextMessage: string = ''); overload; inline;
procedure WaitForKeyPressed(KeyCode: Word; const TextMessage: string = ''); overload; inline;
procedure WaitForKeyPressed(KeyCode: Word; TimeDelay: Cardinal; const TextMessage: string = ''); overload;

implementation

uses
  System.SysUtils, WinAPI.Windows;

procedure WaitAnyKeyPressed(const TextMessage: string);
begin
  WaitForKeyPressed(0, 0, TextMessage)
end;

procedure WaitAnyKeyPressed(TimeDelay: Cardinal; const TextMessage: string);
begin
  WaitForKeyPressed(0, TimeDelay, TextMessage)
end;

procedure WaitForKeyPressed(KeyCode: Word; const TextMessage: string);
begin
  WaitForKeyPressed(KeyCode, 0, TextMessage)
end;

type
  TTimer = record
    Started: TLargeInteger;
    Frequency: Cardinal;
  end;

var
  IsElapsed: function(const Timer: TTimer; Interval: Cardinal): Boolean;
  StartTimer: procedure(var Timer: TTimer);

procedure WaitForKeyPressed(KeyCode: Word; TimeDelay: Cardinal; const TextMessage: string);
var
  Handle: THandle;
  Buffer: TInputRecord;
  Counter: Cardinal;
  Timer: TTimer;
begin
  Handle := GetStdHandle(STD_INPUT_HANDLE);
  if Handle = 0 then
    RaiseLastOSError;
  if not (TextMessage = '') then
    Write(TextMessage);
  if not (TimeDelay = 0) then
    StartTimer(Timer);
  while True do
    begin
      Sleep(0);
      if not GetNumberOfConsoleInputEvents(Handle, Counter) then
        RaiseLastOSError;
      if not (Counter = 0) then
        begin
          if not ReadConsoleInput(Handle, Buffer, 1, Counter) then
            RaiseLastOSError;
          if (Buffer.EventType = KEY_EVENT) and Buffer.Event.KeyEvent.bKeyDown then
            if (KeyCode = 0) or (KeyCode = Buffer.Event.KeyEvent.wVirtualKeyCode) then
              Break
        end;
      if not (TimeDelay = 0) and IsElapsed(Timer, TimeDelay) then
        Break
    end
end;

function HardwareIsElapsed(const Timer: TTimer; Interval: Cardinal): Boolean;
var
  Passed: TLargeInteger;
begin
  QueryPerformanceCounter(Passed);
  Result := (Passed - Timer.Started) div Timer.Frequency > Interval
end;

procedure HardwareStartTimer(var Timer: TTimer);
var
  Frequency: TLargeInteger;
begin
  QueryPerformanceCounter(Timer.Started);
  QueryPerformanceFrequency(Frequency);
  Timer.Frequency := Frequency div 1000
end;

function SoftwareIsElapsed(const Timer: TTimer; Interval: Cardinal): Boolean;
begin
  Result := (GetCurrentTime - Cardinal(Timer.Started)) > Interval
end;

procedure SoftwareStartTimer(var Timer: TTimer);
begin
  PCardinal(@Timer.Started)^ := GetCurrentTime
end;

initialization
  if QueryPerformanceCounter(PLargeInteger(@@IsElapsed)^) and QueryPerformanceFrequency(PLargeInteger(@@IsElapsed)^) then
    begin
      StartTimer := HardwareStartTimer;
      IsElapsed := HardwareIsElapsed
    end
  else
    begin
      StartTimer := SoftwareStartTimer;
      IsElapsed := SoftwareIsElapsed
    end

end. 
```

* * *

**测试或样本程序**

```
program Test;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  WinAPI.Windows,
  Console in 'Console.pas';

 begin
  Console.WaitAnyKeyPressed('Press any key to continue ...');
  WriteLn;
  Console.WaitAnyKeyPressed(5000, 'I''ll wait 5 seconds until You press any key to continue ...');
  WriteLn;
  Console.WaitForKeyPressed(VK_SPACE, 'Press [Space] key to continue ...');
  WriteLn;
  Console.WaitForKeyPressed(VK_ESCAPE, 5000, 'I''ll wait 5 seconds until You press [Esc] key to continue ...');
  WriteLn
end. 
```

# asp.net - 将失效 URL 重定向到 web.config 中的新 URL

> ID：16022130
> 
> 赞同：1
> 
> 时间：2013-04-15T18:21:37.230
> 
> 标签：asp.net, redirect, web-config

我有几 (4) 个链接需要在 .net 网站中重定向。例如，我需要[http://www.example.com/products/productname](http://www.example.com/products/productname)（现在不再存在）重定向到[http://www.example.com/products/productname.aspx](http://www.example.com/products/productname.aspx)。

如何在 web.config 中设置 301 重定向？

谢谢！

目前我有以下内容：

```
<location path="draft_root_beer">
<system.webServer>
<httpRedirect enabled="true" destination="~/products/draft_root_beer.aspx"     httpResponseStatus="Permanent" />
</system.webServer>
</location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:29:50.460

如果只是添加“.aspx”，我建议你使用[URL Rewriting](http://msdn.microsoft.com/en-us/library/ms972974.aspx)，链接会更好地进行 SEO。否则你会像下面这样：

```
<location path="productname">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://www.example.com/products/productname.aspx" httpResponseStatus="Permanent" />
    </system.webServer>
  </location> 
```

# java - 捕获 JSONException

> ID：16022134
> 
> 赞同：0
> 
> 时间：2013-04-15T18:21:49.600
> 
> 标签：java, android, json

我在这段代码中得到一个 JSON 异常：

```
JSONObject jObject = new JSONObject(JSONString);
        pontosUsuario.setIdUsuario(jObject.getInt("idUsuario"));
        //Toast.makeText(this, pontosUsuario.idUsuario, Toast.LENGTH_LONG).show();
        pontosUsuario.setNomeUsuario(jObject.getString("nomeUsuario"));
        pontosUsuario.setCPF(jObject.getString("CPF"));
        pontosUsuario.setEmail(jObject.getString("email"));
        pontosUsuario.setSigla(jObject.getString("sigla"));
        pontosUsuario.setSenha(jObject.getString("senha"));
        pontosUsuario.setInstuicao(jObject.getString("instituicao"));

        JSONArray jArr = new JSONArray(jObject.getString("listaDePontos"));

        for (int i = 0; i < jArr.length(); i++) {
            JSONObject temp = jArr.getJSONObject(i);
            Ponto ponto = new Ponto();
            ponto.setIdPonto(temp.getString("idPonto"));
            ponto.setPontoNome(temp.getString("pontoNome"));
            String data = temp.getString("dtCampo");
            data = data.substring(0, 10);
            //dtCampo = temp.getString("dtCampo");
            try {
                ponto.setDtCampo(new SimpleDateFormat(data, Locale.ENGLISH).parse(data));
            } catch (ParseException e) {
                e.printStackTrace();
            }
            ponto.setProjeto(temp.getInt("projeto"));
            ponto.setUTMEste(temp.getDouble("UTMEste"));
            ponto.setUTMNorte(temp.getDouble("UTMNorte"));
            ponto.setUTMFuso(temp.getInt("UTMFuso"));
            ponto.setUTMHemisferio(temp.getString("UTMHemisferio"));
            ponto.setLatDec(temp.getDouble("latDec"));
            ponto.setLongDec(temp.getDouble("longDec"));
            ponto.setAltitude(temp.getInt("altitude"));
            ponto.setDescPonto(temp.getString("descPonto"));
            ponto.setComplement(temp.getString("complement"));
            //ponto.getAnaliseCampo();
            AnaliseCampo analiseCampo = new AnaliseCampo();
            //JSONObject anObj = jObject.getJSONObject("analiseCampo");

            JSONObject anObj = jObject.getJSONObject("analiseCampo");
            //AnaliseCampo analiseCampo = new AnaliseCampo();
            analiseCampo.setNomeEstrutura(anObj.getString("nomeEstrutura"));
            analiseCampo.setIdAnCampo(anObj.getString("idAnCampo"));
            analiseCampo.setDescEstrutura(anObj.getString("descEstrutura"));
            analiseCampo.setEhBrunton(anObj.getBoolean("ehBrunton"));
            ponto.setAnaliseCampo(analiseCampo);
            //ponto.setAnaliseCampo(temp.get("analiseCampo"); 
```

例外是：detailMessage“analiseCampo 没有值”（id=830007838576）

这是 Ponto.class：

```
public class Ponto {

private String idPonto;
private String pontoNome;
private Date dtCampo;
private int projeto;
private double UTMEste;
private double UTMNorte;
private int UTMFuso;
private String UTMHemisferio;
private double latDec;
private double longDec;
private int altitude;
private String descPonto;
private String complement;
private AnaliseCampo analiseCampo;
private ArrayList<Arquivo> arquivos;
private ArrayList<PontoUnGeologica> idUnidadeGeologica;       

public String getIdPonto() {
    return idPonto;
}

public void setIdPonto(String idPonto) {
    this.idPonto = idPonto;
}

public String getPontoNome() {
    return pontoNome;
}

public void setPontoNome(String pontoNome) {
    this.pontoNome = pontoNome;
}

public Date getDtCampo() {
    return dtCampo;
}

public void setDtCampo(Date dtCampo) {
    this.dtCampo = dtCampo;
}

public int getProjeto() {
    return projeto;
}

public void setProjeto(int projeto) {
    this.projeto = projeto;
}

public double getUTMEste() {
    return UTMEste;
}

public void setUTMEste(double uTMEste) {
    UTMEste = uTMEste;
}

public double getUTMNorte() {
    return UTMNorte;
}

public void setUTMNorte(double uTMNorte) {
    UTMNorte = uTMNorte;
}

public int getUTMFuso() {
    return UTMFuso;
}

public void setUTMFuso(int uTMFuso) {
    UTMFuso = uTMFuso;
}

public String getUTMHemisferio() {
    return UTMHemisferio;
}

public void setUTMHemisferio(String utmHemisferio) {
    UTMHemisferio = utmHemisferio;
}

public double getLatDec() {
    return latDec;
}

public void setLatDec(double latDec) {
    this.latDec = latDec;
}

public double getLongDec() {
    return longDec;
}

public void setLongDec(double longDec) {
    this.longDec = longDec;
}

public int getAltitude() {
    return altitude;
}

public void setAltitude(int altitude) {
    this.altitude = altitude;
}

public String getDescPonto() {
    return descPonto;
}

public void setDescPonto(String descPonto) {
    this.descPonto = descPonto;
}

public String getComplement() {
    return complement;
}

public void setComplement(String complement) {
    this.complement = complement;
}

public AnaliseCampo getAnaliseCampo() {
    return analiseCampo;
}

public void setAnaliseCampo(AnaliseCampo analiseCampo) {
    this.analiseCampo = analiseCampo;
}

public ArrayList<Arquivo> getArquivos() {
    return arquivos;
}

public void setArquivos(ArrayList<Arquivo> arquivos) {
    this.arquivos = arquivos;
}

public ArrayList<PontoUnGeologica> getIdUnigadeGeologica() {
    return idUnidadeGeologica;
}

public void setIdUnigadeGeologica(ArrayList<PontoUnGeologica> idUnigadeGeologica) {
    this.idUnidadeGeologica = idUnigadeGeologica;
}

public Ponto()
{
    arquivos = new ArrayList<Arquivo>();
    idUnidadeGeologica = new ArrayList<PontoUnGeologica>();
    analiseCampo = new AnaliseCampo();
} 
```

}

这是 AnaliseCampo.class

```
public class AnaliseCampo {

public String nomeEstrutura;
public String idAnCampo;
public String descEstrutura;
public boolean ehBrunton;
public ArrayList<AnaliseEstrutural> analiseEstruturais;

public String getNomeEstrutura() {
    return nomeEstrutura;
}

public void setNomeEstrutura(String nomeEstrutura) {
    this.nomeEstrutura = nomeEstrutura;
}

public String getIdAnCampo() {
    return idAnCampo;
}

public void setIdAnCampo(String idAnCampo) {
    this.idAnCampo = idAnCampo;
}

public String getDescEstrutura() {
    return descEstrutura;
}

public void setDescEstrutura(String descEstrutura) {
    this.descEstrutura = descEstrutura;
}

public boolean isEhBrunton() {
    return ehBrunton;
}

public void setEhBrunton(boolean ehBrunton) {
    this.ehBrunton = ehBrunton;
}

public ArrayList<AnaliseEstrutural> getAnaliseEstruturais() {
    return analiseEstruturais;
}

public void setAnaliseEstruturais(
        ArrayList<AnaliseEstrutural> analiseEstruturais) {
    this.analiseEstruturais = analiseEstruturais;
}

public AnaliseCampo()
{
    analiseEstruturais = new ArrayList<AnaliseEstrutural>();
} 
```

}

这是JSON：

```
"idUsuario": 20,
"nomeUsuario": "Barbara Trzaskos",
"CPF": "978824029-15",
"email": "barbaratrzaskos@ufpr.br",
"sigla": "BTR",
"senha": "safira",
"instuicao": "Universidade Federal do Paraná",
"listaDePontos": [
  {
    "idPonto": "BTR0001",
    "pontoNome": "BTR-0001",
    "dtCampo": "2011-04-29T00:00:00",
    "projeto": 2,
    "UTMEste": 547276.0,
    "UTMNorte": 7285137.0,
    "UTMFuso": 22,
    "UTMHemisferio": "S",
    "latDec": -24.5469,
    "longDec": -50.5332,
    "altitude": 0,
    "descPonto": "Arenito mal selecionado. Apresenta fina banda de deformação, como um suave ressalto no relevo e coloração mais clara. Exibe plano subvertical com padrão anastomosado e cinemática aparente sinistral",
    "complement": "Coleta de amostra orientada.",
    "analiseCampo": {
      "nomeEstrutura": "-",
      "idAnCampo": "BTR0001",
      "descEstrutura": "",
      "ehBrunton": true,
      "analiseEstruturais": [
        {
          "idEstrutura": "BTR0001001",
          "ordem": 0,
          "tipo": "Plano",
          "codigo": "F",
          "brunton": "N42W/86SW",
          "clar": "228/86",
          "azimute": "228",
          "direcao": "42",
          "quadrante": "SW",
          "sentido": "Sinistral",
          "descricao": "",
          "mergulho": "86",
          "familia": ""
        }
      ]
  },
    "arquivos": [],
    "idUnigadeGeologica": [
      {
        "idUnidade": 816
      },
      {
        "idUnidade": 2295
      }
    ]
  }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:26:41.480

您在这一行中访问了错误的 JSON 对象：

```
JSONObject anObj = jObject.getJSONObject("analiseCampo"); 
```

它应该是：

```
JSONObject anObj = temp.getJSONObject("analiseCampo"); 
```

因为`temp`这是您将`listaDePontos`数组的每个元素分配给的内容。附带说明一下，鉴于数据的复杂性，您应该考虑使用以下方法将 JSON 直接映射到您的对象：

```
String json = "" ; // <-- your JSON here
Ponto ponto = new Gson().fromJson(json, Ponto.class); 
```

# api - 无法通过 API 访问“部门”用户字段？

> ID：16022135
> 
> 赞同：2
> 
> 时间：2013-04-15T18:21:49.637
> 
> 标签：api, rally

我们已经为我们的工作区设置了可用的部门，并希望将具有 user:department 关系的现有 Excel 文档迁移到新的数据字段。我使用 Pyral 包编写了一个 Python 脚本来尝试执行此操作，但看起来“部门”字段无法通过 API 访问？这是有意的还是我的查询有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:43:48.463

Pyral 默认为 Webservices API (WSAPI) 1.37，新的 User 字段仅出现在 WSAPI >= 1.41 上。

您可以通过更改此变量来覆盖 pyral 的默认 WSAPI 版本：

`WS_API_VERSION = "1.37"`

在 pyral 的 config.py 中：

`WS_API_VERSION = "1.42"`

# javascript - 使用 jquery 显示 div 的问题

> ID：16022146
> 
> 赞同：0
> 
> 时间：2013-04-15T18:22:52.293
> 
> 标签：javascript, jquery, onclick

单击复选框时，我似乎很难显示 div，这个问题很简单，但我似乎找不到正确的 jquery 解决方案来解决这个问题，尽管我觉得我很接近。

```
$html=
'<form action="contacted.php"  method="POST">
<input type = "hidden" name = "contact" class  = "hidden" value = "'.$ip.'">
<input type="checkbox" id="contact'.$ip.'" value = "'.$ip.'" onclick="show()"/>
<div class="hide" style="
    display:none;
    border:3px 
    solid black; 
    background-color:grey; 
    color:white; 
    width:200px; 
    position:absolute; 
    left:40%;
    top:20%;
    -moz-border-radius: 15px; 
    border-radius: 15px;
    padding:4px;
    z-index:1000;
    Width:500px;
">
<textarea name = "notes" style = "" > Let\'s get some notes about that...</textarea>
<input type="submit" value="YES"/>
<input type="button" value="NO" onclick="hide()">
</div>
</form>'; 
```

这是一个 for 循环，`$ip`是一个标识符。但它非常简单。

我试过的jquery

```
function show(){
    $(this).parent().find('.hide').css("display","block")
} 
```

我试图在单击复选框时显示 div 隐藏（这在同一页面上发生多次）并且我无法将 jquery 文档中的正确组合拼凑在一起。有任何想法吗？我相信这很简单，我非常愿意除了 javascript 建议 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:32:43.390

像这样为输入添加类并尝试一下

`<input type="checkbox" id="contact'.$ip.'" class="contact_click" value="'.$ip.'" onclick="show()"/>`

```
$('.contact_click').on('click',function(){
    $(this).closest('div').css('css','block');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:25:56.493

试试这个

改变

```
<input type="checkbox" id="contact'.$ip.'" value = "'.$ip.'" onclick="show()"/> 
```

到

```
<input type="checkbox" id="contact'.$ip.'" value = "'.$ip.'" onclick="show(this)"/> 
```

和脚本为

```
function show()
{
    this.parent().find('.hide').css("display","block");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:27:51.877

像这样将单击的元素传递到您的函数中

```
<input type="checkbox" id="contact'.$ip.'" value = "'.$ip.'" onclick="show(this)"/> 
```

和

```
function show(element){
    $(element).parent().find('.hide').css("display","block");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:29:37.513

您甚至不需要复选框是 div 的直接子级的类。

```
 $(this).parent().show(0); 
```

只需确保将单击处理程序绑定到复选框，这肯定会起作用。

并且只是为了确保您正确绑定事件，请在单击复选框时尝试此操作

```
 function test(){
     var test = $(this).parent().attr('class');
     alert(test);

   } 
```

你应该躲起来。所以如果你得到隐藏它被正确绑定

# javascript - $(this) 在 jQuery 中不起作用

> ID：16022148
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:22:55.627
> 
> 标签：javascript, jquery, html

我试图使用动态更改按钮值的名称`this`。这是我的代码。

HTML

```
<input class='submit' id='id1' type='button' value='Submit' /> 
```

JS代码

```
$(document).ready(function () {
    $('.submit').click(function () {
        $(this).val("hello");
    });
}); 
```

当我使用：

```
$("#id1").val("hello") 
```

它给出了预期的结果。

我在 jsfiddle 上放了相同的代码

[http://jsfiddle.net/pf92v/](http://jsfiddle.net/pf92v/)

它在那里工作正常。那么这背后的原因是什么呢？我正在使用 jQuery v1.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:24:29.357

代替

```
$('.submit') 
```

经过

```
$('#id1') 
```

问题是在您的`click`处理程序中，`this`指的是单击的元素。您已经在类的元素上定义了 click 事件`submit`（这就是`$('.submit')`意思）。由于未`submit`找到类的元素，因此从未触发处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:24:26.710

你的按钮应该有“提交”类

**编辑：**您已经更改了问题中的代码，并将课程设置为提交。在这种情况下，您的代码应该可以正常工作。如果没有，可能还有其他问题，但您需要向我们展示更多代码。

# c# - TransactionScopeOptions.Suppress 超时

> ID：16022149
> 
> 赞同：4
> 
> 时间：2013-04-15T18:23:00.703
> 
> 标签：c#, transactions, nservicebus

在我刚接手的一个应用程序中发现了这一行，并没有多大意义。

`using (new TransactionScope(TransactionScopeOption.Suppress, new TimeSpan(1,0,0))) {`

这会立即发生在 nservicebus 消息处理程序方法中，并覆盖整个处理程序。

它似乎试图抑制环境事务并在一小时后中止。超时到期时会发生什么？我认为这只是选项的组合，并不意味着任何合理。但它会导致发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:35:43.973

`Suppress`表示未使用环境事务；并且实际上，范围内的操作不在事务中执行。这允许您在当前事务之外执行操作，而不受该事务的影响。例如：

```
using(var trans = new TransactionScope())
{
   // do operations within transaction
   using(var unscoped = new TransactionScope(TransactionScopeOption.Suppress))
   {
      // do "immediate" operations
   }
   // do operations within transaction
   // NOTE: No trans.Complete() called
}

// operations performed within "scoped" are not rolled back. 
```

我不确定超时是否真的有意义`Suppress`

# android - 我的应用程序中的 WebView

> ID：16022153
> 
> 赞同：0
> 
> 时间：2013-04-15T18:23:20.160
> 
> 标签：android, android-webview

我有一个这样的 xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"  android:background="#262626">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="EXIT" />

 <ScrollView
        android:id="@+id/sv2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10dp" android:background="#ffffff">

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <WebView
                android:id="@+id/add_webView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:scrollbarStyle="insideOverlay"
                android:text="@string/desc" />

        </RelativeLayout>
    </ScrollView>
</LinearLayout> 
```

我想在我的应用程序中加载我的 Url，并保留我在 webView 上方创建的按钮。不幸的是，我在设备浏览器的新窗口中获得了 webView。

这就是我调用 webView 的方式：

```
WebView add_webView = (WebView) dialog
                    .findViewById(R.id.add_webView);

            add_webView.loadUrl(MYLINK); 
```

如何让我的 webView 进入我的应用程序而不是浏览器窗口？谢谢！！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:04:57.867

正如我希望在对话框中使用 webView，解决方案是使用 setWebClient()

AlertDialog.Builder alert = new AlertDialog.Builder(this);

```
 alert.setTitle("Title here");
    WebView wv = new WebView(this);

    wv.loadUrl("http:\\www.google.com");

    wv.setWebViewClient(new WebViewClient()
    {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);

            return true;
        }
    });

    alert.setView(wv);
    alert.setNegativeButton("Close", new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {
        }
    });
    alert.show(); 
```

# events - 何时使用 GWT 委托事件

> ID：16022157
> 
> 赞同：1
> 
> 时间：2013-04-15T18:23:49.330
> 
> 标签：events, gwt

何时是使用 GWT 委托事件的合适时间：

```
void com.google.gwt.user.client.ui.Widget.delegateEvent 
```

通常由浏览器调度的事件会在节点上冒泡，所以我想不出你需要手动委派事件的原因。一个真正的用例会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:23:36.380

`parent.delegateEvent(child, event)`实际上是一样的`child.fireEvent(event)`。

`fireEvent`最初是一种`protected`方法，因此`delegateEvent`被添加以公开它（[问题 3263](https://code.google.com/p/google-web-toolkit/issues/detail?id=3263)），然后`fireEvent`作为[另一项更改的一部分公开](https://code.google.com/p/google-web-toolkit/source/detail?r=4494)

*它与事件委托*模式无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:07:51.347

> 事件委托在下拉菜单之类的效果中特别有用，其中可能会发生许多链接上的事件，这些事件可以在根级别轻松处理（在这种情况下是或）。

只需浏览刚刚写的[博客。](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)@Chris Heilmann 和 @Dan Webb 的[用例演示](http://www.quirksmode.org/focusblurexample.html)

# java - 获取 jlists 的选定值

> ID：16022161
> 
> 赞同：0
> 
> 时间：2013-04-15T18:24:08.720
> 
> 标签：java, swing, jlist, listselectionlistener

```
for(Object a : freelist.getSelectedValues()){

        } 
```

freelist 是一个 JList；我将如何获得其他 JLists 的选定值，而不是再次使用该方法（2 次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:45:55.937

例如，您可以使用列表作为参数和回调对象来创建方法。

下面是一个**可能过度设计的**例子，但它可能会给你一个更清晰的想法。

```
interface ListItemCallback {
    void doWithListItem(Object listItem);
}

public void iterateOverSelectedListValues(JList list, ListItemCallback callback) {
     for (Object o : list.getSelectedValues()) {
               callback.doWithListItem(o);
     }
}

// calling the code
iterateOverSelectedListValues(myJList, new ListItemCallback() {
            public void doWithListItem(Object o) {
                      // very useful processing here...
            }
}); 
```

# ios - 向已批准的 iOS 应用添加另一个 IAP

> ID：16022164
> 
> 赞同：3
> 
> 时间：2013-04-15T18:24:19.387
> 
> 标签：ios, app-store-connect, in-app-purchase

我在 appstore 中有一个 iOS 应用程序，其中有一个非消耗性 IAP（可下载的杂志问题），均已获得批准。

我需要在应用程序中添加另一个非消耗性 IAP（另一期杂志），但想在我的应用程序中控制此 IAP 的可用时间 - 最好的方法是什么？

我可以将“Cleared for sale”设置为 NO，然后将 IAP 提交给 Apple 吗？

他们会仅根据提交的屏幕截图来检查和批准 IAP，还是需要能够在应用程序中进行测试？

如果他们需要对其进行测试，我如何确保它只对 Apple 可用，而对公众不可用，同时确保它在我想公开发布时已经获得批准？

批准额外的 IAP（无新应用版本）通常需要多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T16:32:29.483

根据我在此期间发现的情况回答我自己的问题：

> 我可以将“Cleared for sale”设置为 NO，然后将 IAP 提交给 Apple 吗？

tkanzakic 已经回答了 - 是的，这是可能的

> 他们会仅根据提交的屏幕截图来检查和批准 IAP，还是需要能够在应用程序中进行测试？

如果“Cleared for Sale”为否，这意味着（在我的情况下）IAP 在应用程序中根本不可见，甚至在沙盒中也不可见，在批准期间也不对 Apple 可见。

因此，Apple 必须仅根据屏幕截图批准 IAP。（也许这是特定于报亭应用程序，也许不是 - 我不知道。）

> 批准额外的 IAP（无新应用版本）通常需要多长时间？

一个实例用了 2 天（比那段时间大约 7 天的完整应用程序提交要快得多），另一个实例用了 6 天。

> 我需要在应用程序中添加另一个非消耗性 IAP（另一期杂志），但想在我的应用程序中控制此 IAP 的可用时间 - 最好的方法是什么？

我们最终这样做了：

*   在 IAP 的实际发布日期之前，提前创建了大量非消耗性 IAP（每期一个），仅使用屏幕截图，将“Cleared for sale”设置为 NO
*   苹果根据截图批准了未来问题的 IAP
*   在发布日期，使用（已获批准的）IAP 并将“Cleared for sale”设置为 YES
*   确保我们有足够的批准“备用”IAP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:46:00.987

是的，您可以设置`Cleared for sale`为`NO`, 以 Apple 批准您的 IAP 不需要将此属性设置为`YES`，一旦获得批准，您可以更改此属性并且它将可供用户使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:56:39.517

您无需立即清除应用内购买。您可以在沙盒环境中对其进行测试，并随时将其提供给公众。

批准 IAP 的时间与批准新应用版本的时间大致相同（5-7 天，或多或少）。

# python - GAE 数据存储不刷新

> ID：16022165
> 
> 赞同：2
> 
> 时间：2013-04-15T18:24:19.783
> 
> 标签：python, google-app-engine, refresh, google-cloud-datastore, ancestor

当我更新 GAE 数据存储时，只有在浏览器刷新页面后才会显示正确的数据存储内容：

```
import os

from google.appengine.ext.webapp import template
from google.appengine.ext import db
import webapp2

#def testkey():
#  return db.Key.from_path('test', 'test')

class TestEntity(db.Model):
  testkey = db.StringProperty(multiline=False)
  testvalue = db.StringProperty(multiline=False)

class TestRefreshProblem(webapp2.RequestHandler):
  def get(self):
    testquery = TestEntity.all()#.ancestor(testkey())
    entities = testquery.run()
    template_values = {
      'entities': entities,
      }
    path = os.path.join(os.path.dirname(__file__), 'index.html')
    self.response.out.write(template.render(path, template_values))

class TestRefreshProblemPost(webapp2.RequestHandler):
  def post(self):
    # testEntity = TestEntity(parent=testkey())
    testEntity = TestEntity()
    testEntity.testkey = self.request.get('testkey')
    testEntity.testvalue = self.request.get('testvalue')
    testEntity.put()
    self.redirect('/')

app = webapp2.WSGIApplication([
    ('/', TestRefreshProblem),
    ('/pst', TestRefreshProblemPost)
], debug=True) 
```

index.html 是：

```
<html>
  <body>
    <table border=0>
        <tr><td width=200>Key</td><td width=200>Value</td></tr>
        {% for entity in entities %}
          <tr>
            <td width=200>{{ entity.testkey|escape }}</td>
            <td width=200>{{ entity.testvalue|escape }}</td>
          </tr>
        {% endfor %}
      </table>
     <form action="/pst" method="post">
      <table>
        <td ><input type="text" name="testkey" size=30/></td>
        <td ><input type="text" name="testvalue" size=30/></td>
        <tr><td><input type="submit" value="Add entity"></td></tr>
      </table>
    </form>
  </body>
</html> 
```

通过使用（虚拟）祖先（re：带有＃的行），问题消失了。在我看来这是一种奇怪的行为......没有祖先可以解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:33:27.420

由于[最终的一致性](https://developers.google.com/appengine/docs/python/datastore/overview)，这是预期的行为。

实际上，因为您正在运行开发服务器，所以这只是对最终一致性的模拟——在真实的生产系统中，结果不会那么可预测。解决方案是相同的。

# android - 如何在 Android 中的客户端和服务器之间共享资源 ID？

> ID：16022167
> 
> 赞同：0
> 
> 时间：2013-04-15T18:24:22.077
> 
> 标签：android, localization, client-server

我正在编写一个客户端（android）/服务器（java）应用程序。服务器为客户端发出的每个请求返回真或“假和错误代码”。我将每个错误消息（字符串）添加到客户端的 strings.xml 中。

这就是我保留错误代码的方式；

```
public class ErrorCodes {
    public static final int WRONG_USERNAME = 1;
    public static final int WRONG_PASSWORD = 2;
    public static final int WRONG_EMAIL= 3;
    ...
} 
```

问题是，每次服务器发送错误代码时，我都必须（大致）那样处理它；

```
int code = conn.receive();
if(code == ErrorCodes.WRONG_USERNAME)
    print(getResources().getString(R.string.WRONG_USERNAME_ERROR));
else if(code == ErrorCodes.WRONG_PASSWORD)
    print(getResources().getString(R.string.WRONG_PASSWORD_ERROR));
... 
```

在我看来，有两种方法可以简化这个过程，但都不优雅。

*方法 1：*手动使 ErrorCodes 值等于 R.string 值。同样使用这种方法，我也不需要在客户端保留 ErrorCodes 类。

*问题：*每次添加新的错误消息时，我都必须更新 ErrorCodes 和 strings.xml。

*方法 2：*在服务器中使用生成的 R.java 文件，无需更新任何内容。这是我能想到的最好的。

*问题：* R.java 会有很多不必要的东西。我必须在服务器端使用它：`R.string.xyz`. 如果服务器没有用 java 编码，那么整个方法是没用的。

如果我使用其中之一，我可以在客户端执行此操作；

```
int code = conn.receive();
print(getResources().getString(code)); 
```

我想有一个更好的方法我想不出。因为这两种方式听起来都很痛苦。如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:47:29.257

我建议保持你的方法。它将引导您编写一些代码来处理所有情况，但最后，对我来说，这是最强大的解决方案，因为：

1.  您的服务器将不依赖于 Android。您的服务器的逻辑将仅对 Android 有效。如果明天您将为另一个平台开发一个客户端，那么拥有一个独立于平台的协议会更好。
2.  每次您编辑应用程序、添加新资源等时，您的 R 文件都会再次生成，并且`R.string.something`可能具有与先前构建不同的值。因此，在您推出应用程序更新的情况下，您的用户可能会遇到奇怪的错误，因为在您的应用程序的版本 1 中，资源 12345 可能指向，`R.string.something`而在版本 2 中可能指向`R.string.something_else`. 但也许对于这一点，有一种方法可以保持静态`R.string`值。

以下解决方案对我来说似乎可以接受：

您的服务器会为您的错误返回一些代码，例如：

```
1 for WRONG_USERNAME
2 for WRONG_PASSWORD
3 for WRONG_EMAIL 
```

你可以这样声明字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="error_1">Wrong username!</string>
    <string name="error_2">Wrong password!</string>
    <string name="error_3">Wrong email!</string>
</resources> 
```

然后按名称加载字符串资源：

```
int stringId = getResources().getIdentifier("error_"+errorCode,"string",getPackageName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:44:52.170

我使用您在方法 1 中描述的相同方法

如果您只想打印错误，请考虑使用 json 从服务器发送数据，例如：

```
if(logged_on == true){
    server.send("{\"status\":0}");
}else{
    server.send("{\"status\":1,\"error\":"+ErrorString);
} 
```

然后在客户端检查状态字段，如果等于 1 从错误字段中打印字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:45:40.963

最好的解决方案显然是在服务器上保留错误描述字符串，但这可能会给本地化带来额外的复杂性。您需要将设备的当前界面语言发送到服务器以获得正确的错误描述

否则我会在服务器端使用简短的文本错误标识符（例如“no_data_found”、“db_timeout”等）——这很有意义并且更容易调试和修改 android 应用程序的字符串表。
在客户端，我会添加相应的错误描述字符串，标识符遵循一些标准方案。例如：“error_no_data_found”、“error_db_timeout”。
然后，要检索错误描述字符串，您可以使用反射：

```
String getErrorString(String stringName)
{
    try
    {
        Field f_a =R.string.class.getDeclaredField(stringName);
        int a = f_a.getInt(null);
        return getString(a);
    }
    catch (NoSuchFieldException x)
    {
        return "No error description for "+stringName;
    }
    catch (IllegalAccessException x)
    {
        return "";
    }       
}

...
String errorDescription = getErrorString("error_"+errorCodeReceivedFromServer); 
```

此外，您可以编写一个脚本来检查所有服务器错误标识符是否在 strings.xml 文件中都有相应的条目。

# java - Android webview ajax

> ID：16022171
> 
> 赞同：2
> 
> 时间：2013-04-15T18:24:31.320
> 
> 标签：java, android, ajax, get

我有 wep 应用程序，其中一些页面必须执行 ajax 请求才能获取和更新该页面而不刷新页面。

我使用 android WebView 加载该 wep 应用程序时的问题。所有请求 ajax 的页面都不会更新页面，这意味着 ajax 请求不起作用。

这是 MainActivity.java 的代码

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview_layout);
        webView = (WebView) findViewById(R.id.webView);
        webView.clearCache(true);
        webView.setWebChromeClient(new WebChromeClient() {
            @Override
            public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
                Log.d(LOG_TAG, message);
                new AlertDialog.Builder(view.getContext())
                        .setMessage(message).setCancelable(true).show();
                result.confirm();
                return true;
            }
        });
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                Toast.makeText(view.getContext(), "onPageStarted", Toast.LENGTH_SHORT).show();
                super.onPageStarted(view, url, favicon); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                Toast.makeText(view.getContext(), "onPageFinished", Toast.LENGTH_SHORT).show();
                super.onPageFinished(view, url); //To change body of generated methods, choose Tools | Templates.
            }
        });

        WebSettings webSettings = webView.getSettings();
        webSettings.setBuiltInZoomControls(true);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setLoadWithOverviewMode(true);
        webSettings.setAllowContentAccess(true);
        webSettings.setUseWideViewPort(true);
        webView.loadUrl("http://192.168.1.236:8080/mobile/android.html");
} 
```

并且 android.html 有 ajax 请求。android 应用程序工作正常并加载 android.html 但没有获取 ajax 数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:08:24.200

经过漫长的3天，我终于找到了答案。
问题出在我请求的具有以下代码的页面中：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

在与 android webview 冲突且不适用于 jquery 选择器的响应中......不知道为什么！

但是当我从响应页面中删除上述代码时，它的 ajax 工作正常。

**PS：我所有的页面都是 xhtml 而不是 html。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:11:05.213

1.  检查`<uses-permission android:name="android.permission.INTERNET" />`您的 AppManifest.xml 文件中是否有。
2.  如果加载页面中的 javascript 向某个站点发出请求，`http://192.168.1.236:8080`而该站点不允许跨域 XMLHTTPRequests，则由于 WebView 的安全限制，这些请求将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T07:29:06.780

尝试这个

```
WebView web=(WebView) findViewById(R.id.webView1);
web.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T10:27:08.467

您可以将 AJAX 处理程序添加到您的 Web 视图中，以使用 AJAX 处理任何网站。

```
public class Main2Activity extends AppCompatActivity {

    private WebView webView;
    private ProgressBar progressBar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
        webView = (WebView) findViewById(R.id.webView);
        progressBar = (ProgressBar) findViewById(R.id.progressBar);
        progressBar.setVisibility(View.GONE);
        webView.getSettings().setJavaScriptEnabled(true);
        initWebView();
        loadURL();
    }

    private void loadURL() {
        webView.loadUrl("www.google.com");
    }

    @SuppressLint("JavascriptInterface")
    private void initWebView() {
        webView.setWebChromeClient(new MyWebChromeClient(Main2Activity.this));
        webView.addJavascriptInterface(new AjaxHandler(Main2Activity.this), "ajaxHandler");
        webView.getSettings().setJavaScriptEnabled(true);

        webView.setWebViewClient(new WebViewClient() {

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);
                progressBar.setVisibility(View.GONE);

            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                progressBar.setVisibility(View.VISIBLE);
            }

            @Override
            public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {
                super.onReceivedError(view, request, error);
                progressBar.setVisibility(View.GONE);
            }
        });
    }

    public class AjaxHandler {

        private static final String TAG = "AjaxHandler";
        private final Context context;

        public AjaxHandler(Context context) {
            this.context = context;
        }

        public void ajaxBegin() {
            Log.e(TAG, "AJAX Begin");
            Toast.makeText(context, "AJAX Begin", Toast.LENGTH_SHORT).show();
        }

        public void ajaxDone() {
            Log.e(TAG, "AJAX Done");
            Toast.makeText(context, "AJAX Done", Toast.LENGTH_SHORT).show();
        }
    }

    private class MyWebChromeClient extends WebChromeClient {
        Context context;

        public MyWebChromeClient(Context context) {
            super();
            this.context = context;
        }
    }

} 
```

# grails - Lucene /Searchable Plugin - Grails not reindexing 有很多

> ID：16022175
> 
> 赞同：0
> 
> 时间：2013-04-15T18:24:44.007
> 
> 标签：grails, lucene, grails-searchable

我有一个可搜索的模型设置为：

```
class Tag{
   def searchable = true
   String name
}

class PersonTag{
    static belongsTo = [person: Person]
    static searchable = {
        tag(component: true)
        person(component: true)
    }
    static PersonTag addTag(String name, Person person){
      if(person && person.id){
          def tag = Tag.findOrCreate(name)
          def t = new PersonTag(tag:tag, person:person)
          t.save(flush:true)
          return t
      }
    }
}

class Person{
    static searchable = {
        name boost: 2.0
        tags component:true         
    }
} 
```

我正在做的是按标签搜索“人”。当我的服务器启动时，它会索引所有内容，并且人们工作的所有现有标签。如果我添加一个新标签，在服务器重新启动之前我无法搜索它。但是，如果我更改了一个简单的属性，例如人名，我可以在不重新启动的情况下搜索它。我对标签的所有更改都经过`PeopleAdminController.`

关于为什么按标签搜索不起作用的任何建议？我什至尝试通过 domainInstance.reindex() 以及在控制器中使用 searchableService 手动索引/重新索引 Person、Tag 和 PersonTag。

我正在寻找不同控制器中的人`PeopleController`：

```
def search(){
    def result = People.search("${params.q}")
        render (view: '/searchable/search.gsp' , model:[searchResult: result])
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:30:53.067

好吧，我找到了一种“解决问题”的方法，但我不喜欢它（因为它是一个`reindexAll()`）。如果我打电话添加标签后：

```
searchableService.reindexAll() 
```

它会起作用的。我不明白为什么以下内容不起作用：

```
static PersonTag addTag(String name, Person person){
  if(person && person.id){
      def tag = Tag.findOrCreate(name)
      def t = new PersonTag(tag:tag, person:person)
      t.save(flush:true)

      t.index()
      tag.reindex()
      person.reindex()
      return t
  }
} 
```

# angularjs - 测试某些元素是否可见

> ID：16022180
> 
> 赞同：34
> 
> 时间：2013-04-15T18:25:14.747
> 
> 标签：angularjs, karma-runner

我如何确定一个元素在睾丸（茉莉花）中是可见的还是隐藏的？

我的 DOM 看起来像：

```
<div class="span5 value-entry">
    <input type="text" ng-model="query.value" placeholder="Enter value" class="input-large" ng-show="genericInput(criteria.attribute)">
    <select ng-model="query.value" ng-options="entry for entry in filteredValue(criteria.attribute)" class="input-medium" ng-show="!genericInput(criteria.attribute)">
        <option value="">-- Select Value --</option>.
    </select>
</div> 
```

要么显示选择，要么显示输入框，但不能同时显示两者。我希望检查哪个元素是可见的（基于其他一些标准），但我似乎无法弄清楚如何让代码工作。我写了以下代码：

```
expect(element('.value-entry input').is(':visible')).toBe(true); 
```

但我收到一个错误：

```
TypeError: Object #<Object> has no method 'is' 
```

如何检查输入是否可见并且选择是否同时隐藏（反之亦然）？

**编辑：**我想在这里补充一点，这是一个端到端的测试

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-10T09:58:32.733

This behavior has changed in Angular 1.2 because of `ng-animate`.

The code for `ngShow` is:

```
var ngShowDirective = ['$animate', function($animate) {
  return function(scope, element, attr) {
    scope.$watch(attr.ngShow, function ngShowWatchAction(value){
      $animate[toBoolean(value) ? 'removeClass' : 'addClass'](element, 'ng-hide');
    });
  };
}]; 
```

Which means that it will add/remove class `ng-hide` to hide/show the element.

Thus, as an example, the right way to test if the element is hidden would be:

```
expect(element.find('.value-entry input').hasClass('ng-hide')).toBe(true); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-23T19:39:28.043

你很亲密。但是，您应该如何测试可见性：

```
expect(element('#some-id:visible').count()).toBe(1); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-15T22:32:10.043

# 能见度测试

默认情况下，显示设置`inline`为输入和`inline-block`选择。因此，您可以通过测试默认 CSS 属性的存在来确定当前是否显示其中任何一个。

```
expect(element('.value-entry input').css('display')).toBe('inline');
expect(element('.value-entry select').css('display')).toBe('inline-block'); 
```

要检查其中任何一个是否被隐藏，请将`inline`和替换`inline-block`为检查`none`，这就是[ngShow](http://docs.angularjs.org/api/ng.directive%3angShow)隐藏元素的方式。

```
expect(element('.value-entry input').css('display')).toBe('none');
expect(element('.value-entry select').css('display')).toBe('none'); 
```

# python - 脚本中的类 CSV 数据到 Pandas DataFrame

> ID：16022184
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:25.807
> 
> 标签：python, pandas, ipython-notebook

我有一个带有关联 lon,lat 值的城市列表，我想将其转换为 DataFrame，但是我不想从 CSV 文件中读取，而是想让用户修改或添加到这些 city,lat,lon值到 IPython 笔记本中的单元格中。现在我有这个可行的解决方案，但它看起来有点难看：

```
import pandas as pd
sta =  array([
        ('Boston',          42.368186, -71.047984),
        ('Provincetown',    42.042745, -70.171180),
        ('Sandwich',        41.767990, -70.466219),
        ('Gloucester',      42.610253, -70.660570)
        ],
        dtype=[('City','|S20'), ('Lat','<f4'), ('Lon', '<f4')])

# Create a Pandas DataFrame
obs = pd.DataFrame.from_records(sta,index='City')
print(obs)
                    Lat        Lon
City                              
Boston        42.368187 -71.047981
Provincetown  42.042744 -70.171181
Sandwich      41.767990 -70.466217
Gloucester    42.610252 -70.660568 
```

**有没有更清晰、更安全的方法来创建 DataFrame？**

我想人们会忘记括号，在最后一行添加一个结束的“，”等等。

谢谢，丰富

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:38:19.717

您可以创建一个他们编辑的大多行字符串，然后`read_csv`从 StringIO 对象中读取它：

```
x = """
City, Lat, Long
Boston, 42.4, -71.05
Provincetown, 42.04, -70.12
"""

>>> pandas.read_csv(StringIO.StringIO(x.strip()), sep=",\s*")
           City    Lat   Long
0        Boston  42.40 -71.05
1  Provincetown  42.04 -70.12 
```

当然，人们仍然可能会因此而出错（例如，插入逗号），但格式更简单。

# ruby-on-rails - 对嵌套资源的删除调用不适用于集成测试？

> ID：16022187
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:36.330
> 
> 标签：ruby-on-rails, ruby

在使用 Rails 3.2 时遇到的这个问题，我一直在努力解决问题。我有一个简单的集成测试可以做到这一点。

```
require 'test_helper'

class UserFlowsTest < ActionDispatch::IntegrationTest
  fixtures :posts, :comments

  test "should delete comment" do
    post = posts(:one)
    comment = comments(:one)
    delete post_comment_path, :post_id => post.id, :id => comment.id
    assert_response :redirect
    assert_assign (:post)
  end
end 
```

您可以从 Rails 指南中识别模型。无论如何，当我打电话时，`rake:integration`我最终得到了这个。

```
test_should_delete_comment(UserFlowsTest):
ActionController::RoutingError: No route matches {:action=>"show", :controller=>"comments"}
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:533:in `raise_routing_error'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:529:in `rescue in generate'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:521:in `generate'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:562:in `generate'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:587:in `url_for'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/url_for.rb:148:in `url_for'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:213:in `post_comment_path'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/testing/integration.rb:382:in `method_missing'
    C:/dev/blog/test/integration/user_flows_test.rb:9:in `block in <class:UserFlowsTest>' 
```

我的路线是这样定义的。

```
 root        /                                           home#index
     posts_search GET    /posts/search(.:format)                     posts#search
       home_index GET    /home/index(.:format)                       home#index
    post_comments GET    /posts/:post_id/comments(.:format)          comments#index
                  POST   /posts/:post_id/comments(.:format)          comments#create
 new_post_comment GET    /posts/:post_id/comments/new(.:format)      comments#new
edit_post_comment GET    /posts/:post_id/comments/:id/edit(.:format) comments#edit
     post_comment GET    /posts/:post_id/comments/:id(.:format)      comments#show
                  PUT    /posts/:post_id/comments/:id(.:format)      comments#update
                  DELETE /posts/:post_id/comments/:id(.:format)      comments#destroy
            posts GET    /posts(.:format)                            posts#index
                  POST   /posts(.:format)                            posts#create
         new_post GET    /posts/new(.:format)                        posts#new
        edit_post GET    /posts/:id/edit(.:format)                   posts#edit
             post GET    /posts/:id(.:format)                        posts#show
                  PUT    /posts/:id(.:format)                        posts#update
                  DELETE /posts/:id(.:format)                        posts#destroy 
```

我究竟做错了什么？

编辑：

```
class CommentsController < ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
  end

  def destroy
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:id])
    @comment.destroy
    redirect_to post_path(@post)
  end
end 
```

不知道这里可能出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:30:19.303

我已经有一段时间没有定期使用 Test::Unit（这些天使用 RSpec），但我不记得有太多需要集成测试。大部分测试是单元测试和功能测试。

这个特定的测试并不是真正的集成测试。它不是测试跨域的信息流。它只是确保在销毁嵌套资源后有重定向。这是我要尝试的。请原谅任何过时的语法。假设一个文件`test/functional/comments_controller_test.rb`：

```
require 'test_helper'

class CommentsControllerTest < ActionController::TestCase
  fixtures :posts, :comments

  def test_destroy
    post = posts(:one)
    comment = comments(:one)
    delete :destroy, :id => comment.id, :post_id => post.id

    assert_redirected_to post_path(post)
    # and whatever else you want to test
  end
end 
```

# c# - 在 C# 中使用 Windows 默认编辑器打开图像

> ID：16022188
> 
> 赞同：6
> 
> 时间：2013-04-15T18:25:37.133
> 
> 标签：c#, .net, windows, image

在我的 C# 应用程序中，我想启动默认图像编辑器来编辑图像。

当我使用它时，它会使用[Windows 照片查看器](http://windows.microsoft.com/en-us/windows7/view-and-use-your-pictures-in-windows-photo-viewer)`System.Diagnostics.Process.Start("C:\\image.png")`打开图像文件。

当我在 Windows 资源管理器中右键单击图像文件时，会出现一个“编辑”菜单项，它会启动 Microsoft Paint（默认情况下）。我想在我的应用程序中做同样的事情（即使用默认图像编辑器打开文件）。

我不想通过执行对 MS Paint 进行硬编码`Process.Start("mspaint.exe C:\\image.png")`。我更喜欢使用用户设置的默认图像编辑器程序（可能与 MS Paint 不同）。

有没有办法做到这一点？

谢谢弗兰克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T18:28:08.333

您可以尝试使用动词启动进程`edit`。

```
ProcessStartInfo startInfo = new ProcessStartInfo("C:\\image.png");
startInfo.Verb="edit";

Process.Start(startInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-26T08:59:16.967

如果你想通过默认的 Windows 编辑器在图片框中打开你的图像，试试这个；

```
//Create temporary file name
String TMP_IMAGE = "tempImage" +DateTime.Now.Millisecond +".bmp";

//get the folder of application
string PATH_APP =                
        System.IO.Path.GetDirectoryName(Application.ExecutablePath) + @"\tempImage\";

//Create a subFolder tempImage
Directory.CreateDirectory(PATH_APP);

//Save a new path in a variable
String NEW_PATH = PATH_APP + TMP_IMAGE;

//Save the image in the pictureBox in the new path and file name
pictureBox.Image.Save(NEW_PATH);

//Lunch the process with defaoul image editor in the comouter
ProcessStartInfo startInfo = new ProcessStartInfo(NEW_PATH);
Process.Start(startInfo); 
```

# nsarray - 从 C Array 以相同格式创建浮点值在 -1.0 +1.0 范围内的 NSArray

> ID：16022189
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:42.140
> 
> 标签：nsarray, floating-accuracy

好的，也许我很累，但是在尝试通过 NSNumber 将“浮点值”从 C 数组样式传递到 NSarray 并获得相同的数据时遇到了一些麻烦。我想要实现的是在其他类中传递这个值来绘制音频波形。

假设：

```
 //needed range from -1.0 to 1.0
   monoFloatDataLeft[i] = (float)left / 32768.0;
   monoFloatDataRight[i] = (float)right / 32768.0;

   ArraySx = &monoFloatDataLeft[i];
   ArrayDx = &monoFloatDataRight[i]; 
   NSLog(@"right %f\n",ArrayDx);

   [self floatSx:*(ArraySx) floatDx:*(ArrayDx)]; 
```

输出：右-0.000061

现在在功能...

```
 -(void)floatSx: (float)left floatDx: (float) right{

 NSLog (@"Left in function  %f\n", left);
 NSLog (@"right in function  %f\n", right);

 NSArray *cannelLeftArray = [NSArray arrayWithObjects:[NSNumber numberWithFloat:left], nil];
 NSLog (@"cannelLeftArray  %@\n", canaleSinistroArray);

 NSArray *channelRightArray = [NSArray arrayWithObjects:[NSNumber numberWithFloat:right], nil];
 NSLog (@"channelRightArray  %@\n", canaleDestroArray); 
```

}

```
Output:
Left in function  -0.000061
right in function  -0.000153

cannelLeftArray("-0.0001525879")

channelRightArray("-6.103516e-05") 
```

好的，我需要的是使用相同的浮点值样式填充数组，例如函数中的左右...

希望足够清楚。

提前致谢

# ios - GameCenter 按地区匹配

> ID：16022191
> 
> 赞同：1
> 
> 时间：2013-04-15T18:25:44.167
> 
> 标签：ios, localization, game-center

我有一个游戏非常依赖基于文本的交流，因此，我只想将玩家与其他设置相同语言设置的玩家匹配，前提是它是合理的（即我的应用程序本地化的语言之一）。

现在，当我得到首选语言时，它是一个字符串。然而，匹配对象的玩家组是一个整数。将整数用于语言环境的最佳方法是什么？它们是在 iOS 中本地索引的，还是我必须提供自己的索引？

此外，有些人会说多种语言。我可以从系统设置中获得首选语言，但据我了解，这只是所有顺序不同的语言。无论如何，我是否可以提取有用的信息，说明除了当前语言之外哪些其他语言实际上适合用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:36:00.870

Game Center 匹配不够灵活，无法处理您的多语言场景。我建议你让用户选择一个。

您需要为要支持的语言提供自己的索引。

# jquery - 数据属性格式无法使用 jquery 工作？

> ID：16022194
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:47.480
> 
> 标签：jquery

```
alert($("#bottomTbodyTable tr [data-testlog]").length); // display value 0
alert($("#bottomTbodyTable tr").data("testlog")); // display the correct value 
```

在这个属性的显示过程中有明确的值时，我无法理解值 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:26:42.067

你可能想要

```
$("#bottomTbodyTable tr[data-testlog]").length 
```

这与 和 之间没有空格是相同的`tr`，`[data-testlog]`空格意味着具有 data 属性的元素将是 的后代`tr`。

# python - 如何处理 django 多对多映射器对象

> ID：16022195
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:48.980
> 
> 标签：python, django

我有模型：

```
class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          # Extra info can be added to the existing tag using this field
    createdAt = models.DateTimeField(auto_now_add=True)
    updatedAt = models.DateTimeField(auto_now=True)
    def __unicode__(self):   
        return unicode(self.tag)

class stores(models.Model):
    """ This is the store model """
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(max_length=1)                            # Store Popularity Number
    storeImage = models.ImageField(upload_to=storeImageDir)                              # Store Image 
    storeSlug = models.CharField(max_length=400)                                                       # This is the text you see in the URL
    createdAt = models.DateTimeField(auto_now_add=True)                                                  # Time at which store is created
    updatedAt = models.DateTimeField(auto_now=True)                                                   # Time at which store is updated
    storeTags = models.ManyToManyField(tags)                                             # All the tags associated with the store
    def __unicode__(self):
        return unicode(self.storeName)

    def StoreTags(self):
        return unicode(self.storeTags.all()) 
```

它在 StoreTags 下显示 [] 这是 storesAdmin 类：

```
class storesAdmin(admin.ModelAdmin):
    list_display = ('storeName','storeDescription','storeURL',
                    'storePopularityNumber','storeImage',
                    'storeSlug','createdAt','createdAt','StoreTags'
                    ) 
```

为什么它会这样显示我什至试图将其转换为 unicode 但它不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:22:01.343

避免在模型字段中使用 CamelCase。[Django Codigo 风格 - 模型字段](https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/#model-style)

“字段名称应全部小写，使用下划线而不是驼峰式。”

避免在函数和方法中使用 CamelCase。

“使用下划线，而不是 camelCase，用于变量、函数和方法名称（即 poll.get_unique_voters()，而不是 poll.getUniqueVoters）。”

尝试为 storetags 方法选择另一个名称。也许它与 storetags 字段 name.django 哈希对象冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:28:33.120

尝试使用代码：

```
models
class Tags(models.Model):
    #...
    def __unicode__(self):   
        return '%s' % self.tag

class Stores(models.Model):
    #...
    def __unicode__(self):
        return '%s' % self.storeTags.tag

admin, list_display is not supported to ManyToMany, i'm remove storetags
class storesAdmin(admin.ModelAdmin):
    list_display = ('storename','storedescription','storeurl',
                'storepopularitynumber','storeimage',
                'storeslug','createdat','createdat'
                ) 
```

告诉我它是否正常工作。

# java - 通过 JSP 标签将 JSON 对象从 Java 传递到 Javascript

> ID：16022197
> 
> 赞同：0
> 
> 时间：2013-04-15T18:25:51.640
> 
> 标签：java, json, jsp, jstl

我的应用程序的 java 服务器端有一个服务 A，它返回一个 JSON 对象，我需要在 javascript 端使用该对象来调用另一个服务 B。

该平台有点复杂，有两个基于 Stripes 和 Spring 的应用程序打包在同一场战争中，并且共享大量代码。

到目前为止，我的解决方案是创建一个访问 JSON 对象并将其放入变量的 JSP 标记：

```
 @Override
   public int doStartTag() throws JspException {
       pageContext.setAttribute(var, SERVICE_A_JSONOBJECT, scope);
       return SKIP_BODY;
   } 
```

这很好用，但是 jstl 变量被转换为字符串，所以在 javascript 调用中我必须使用 JSON.parse。

有没有办法通过将 JSON 对象传递给 javascript 而不进行转换然后解析来改善这一点？

注意：由于它们是两个应用程序，我想避免使用会话，因为那样我需要复制代码

# asp.net-mvc - MVC 3 添加更多字段，然后提供给帐户控制器

> ID：16022202
> 
> 赞同：0
> 
> 时间：2013-04-15T18:26:05.903
> 
> 标签：asp.net-mvc, user-accounts

有人能帮帮我吗？我想向帐户控制器添加比提供的更多的字段。我也想在表格中查看这些字段。我在 Register 类中添加字段。而且我不确定我想使用自动增量的 ID 字段，但不知道如果我没有看到表格怎么办。在普通数据库中它会自动执行。谢谢。我的 **帐户模型：**

public class ChangePasswordModel { [Required] [DataType(DataType.Password)] [Display(Name = "Current password")] public string OldPassword { get; 放; }

```
 [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "New password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm new password")]
    [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
}

public class LogOnModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
}

public class RegisterModel
{
    [Required]
    public int ID { get; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }

    [Required]
    [DataType(DataType.PhoneNumber)]
    [Display(Name = "Phone")]
    public string Phone { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "First line of address")]
    public string Address { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "DOB => dd/mm/yyyy")]
    public DateTime DateOfBirth { get; set; }

    [Required]
    [PostCode(ErrorMessage= "PostCode is not valid")]
    [Display(Name = "Post Code")]
    public string PostCode { get; set; }

    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
}

public class PostCodeAttribute : RegularExpressionAttribute
{
    public PostCodeAttribute()
        : base(
            @"([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-
                hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-
                Yj-y][0-9]?[A-Za-z])))) {0,1}[0-9][A-Za-z]{2})")
    {
        ErrorMessage = "PostCode is invalid";
    }
} 
```

然后在 AccountController 我可以创建在表中具有相同数据字段的用户，但 Membership 没有这个选项只有 Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus) ;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:00:33.883

您可能需要考虑[SimpleMembership](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)（这是未来）并使用您自己的架构，然后使用 NuGet 将[其与 MVC 3](http://anderly.com/2011/08/11/using-simplemembership-in-mvc3/)一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:57:31.603

这是“经典”的 ASP.NET，但应该有所帮助

[http://www.asp.net/web-forms/tutorials/security/membership/storing-additional-user-information-cs](http://www.asp.net/web-forms/tutorials/security/membership/storing-additional-user-information-cs)

（从这里[使用 MySql 和 MVC 3 上的成员资格向注册表添加更多字段](https://stackoverflow.com/questions/8369055/adding-more-fields-to-registration-form-using-membership-on-mysql-and-mvc-3)）

# java - 如何找到最接近特定值的数组元素的总和？

> ID：16022205
> 
> 赞同：11
> 
> 时间：2013-04-15T18:26:18.933
> 
> 标签：java, arrays, algorithm, dynamic-programming

在Java中，我应该如何找到一个数组元素的最接近（或相等）可能的总和到一个特定的值K？

例如，对于数组 {19,23,41,5,40,36} 和 K=44，最接近的可能和是 23+19=42。我已经为此苦苦挣扎了几个小时；我对动态编程几乎一无所知。顺便说一句，数组只包含正数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T19:14:52.510

对于此类问题，您通常会使用动态编程。但是，这基本上归结为保留一组可能的总和并逐个添加输入值，如下面的代码所示，并且具有相同的渐近运行时间`O(n K)`：.`n``K`

然而，下面版本中的常量可能更大，但我认为代码比动态编程版本更容易理解。

```
public class Test {
    public static void main(String[] args) {
        int K = 44;
        List<Integer> inputs = Arrays.asList(19,23,41,5,40,36);

        int opt = 0;                // optimal solution so far          

        Set<Integer> sums = new HashSet<>();
        sums.add(opt);

        // loop over all input values
        for (Integer input : inputs) {
            Set<Integer> newSums = new HashSet<>();

            // loop over all sums so far                        
            for (Integer sum : sums) {
                int newSum = sum + input;

                // ignore too big sums
                if (newSum <= K) {
                    newSums.add(newSum);

                    // update optimum                       
                    if (newSum > opt) {
                        opt = newSum;
                    }
                }
            }

            sums.addAll(newSums);
        }

        System.out.println(opt);
    }
} 
```

**编辑**

关于运行时间的简短说明可能很有用，因为我只是`O(n K)`毫无理由地声称。

显然，初始化和打印结果只需要恒定的时间，所以我们应该分析双循环。

外循环遍历所有输入，因此它的主体是执行`n`次数。

到目前为止，内部循环遍历所有总和，理论上这可能是一个指数数。*但是*，我们使用 的上限`K`，因此 中的所有值`sums`都在范围内`[0, K]`。由于`sums`是一个集合，它最多包含`K+1`元素。

内部循环内的所有计算都需要恒定的时间，因此整个循环需要`O(K)`. 出于同样的原因，该集合`newSums`也最多包含`K+1`元素，因此`addAll`最终`O(K)`也需要。

总结：外循环执行`n`次数。循环体采用`O(K)`. 因此，算法在`O(n K)`.

**编辑 2**

根据要求如何找到导致最佳总和的元素：

而不是跟踪单个整数 - 子列表的总和 - 您还应该跟踪子列表本身。如果您创建一个新类型，这相对简单（没有 getter/setter 以保持示例简洁）：

```
public class SubList {
    public int size;
    public List<Integer> subList;

    public SubList() {
        this(0, new ArrayList<>());
    }

    public SubList(int size, List<Integer> subList) {
        this.size = size;
        this.subList = subList;
    }
} 
```

初始化现在变为：

```
SubList opt = new SubList();

Set<SubList> sums = new HashSet<>();
sums.add(opt); 
```

内部循环`sums`也需要一些小的调整：

```
for (Integer input : inputs) {
    Set<SubList> newSums = new HashSet<>();

    // loop over all sums so far                        
    for (SubList sum : sums) {
        List<Integer> newSubList = new ArrayList<>(sum.subList);
        newSubList.add(input);
        SubList newSum = new SubList(sum.size + input, newSubList);         

        // ignore too big sums
        if (newSum.size <= K) {
            newSums.add(newSum);

            // update optimum                       
            if (newSum.size > opt) {
                opt = newSum;
            }
        }
    }

    sums.addAll(newSums);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:15:26.777

您可以将其视为`n-choose-k`所有可能的问题，`k`因此复杂性[是指数级](http://en.wikipedia.org/wiki/Combination#Number_of_k-combinations_for_all_k)的。

1.  找出一组数的总和最多为`K`。该集合应包括`i`数字，对于`i=1; i<=N; i++`. 为了实现这一点，对于每个`i`只取数组中数字的所有`n-choose-i` [组合](http://en.wikipedia.org/wiki/Combination)。
2.  保留一个`finalResult`包含迄今为止找到的最佳数字集及其总和的变量。
3.  将步骤 1 的每个子结果与 进行比较，`finalResult`并在必要时对其进行更新。

它让我想起了[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，所以你可能想看看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:38:14.263

我会说首先对数组进行排序。那么您的示例将是：arr = {5, 19, 23, 36, 40, 41}。然后： 1) 取 arr[0] 和 arr[i]，其中 i = arr.Size。求和并记录总和与 K 的差，如果总和小于 K。 2) 如果 sum > K，执行步骤 1，但不要使用 arr[i]，而是使用 arr[i-1]，因为我们想要降低我们的总和。如果 sum < K，则执行第 1 步，但不要使用 arr[0]，而是使用 arr[1]，因为我们想要增加总和。不断重复第 2 步，增加或减少索引，直到两个元素的索引相等。然后，我们知道导致总和和 K 之间差异最小的元素对。

----------------针对解决方案中任意数量的元素进行了编辑----------------

我相信你可能需要一棵树。这就是我的想法：

1）选择一个数字作为您的顶级节点。

2）对于集合中的每个数字，创建一个子节点，对于创建的每个分支，计算该分支的总和。

3) 如果总和小于 K，我们再次分支，为集合中的所有元素创建子节点。如果总和大于 K，我们停止，保持总和与 K 之间的差（如果总和 < K）。如果我们找到一个总和更好的分支，那么我们保留那个分支。重复此过程，直到所有分支都完成分支。

使用不同的顶部节点执行步骤 1-3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T20:27:30.593

```
private int closestSum(int[] a, int num){
    int k=a.length-1;
    int sum=0;
    Arrays.sort(a);

    while(a[k]>num){
        k--;
    }
    for(int i=0;i<k;i++){
        for(int j=i+1;j<=k;j++){
            if(a[i]+a[j]<=num && a[i]+a[j]>sum)
                sum = a[i]+a[j];
        }
    }
    return sum;
} 
```

# sql - jdbc列表上的jsp foreach format

> ID：16022207
> 
> 赞同：0
> 
> 时间：2013-04-15T18:26:32.433
> 
> 标签：sql, jsp, model-view-controller, jdbc

所以我的代码有点问题。我使用 jdbc 在 DAO 中查询我们的 SQL 数据库，如下所示：

```
List<Map<String,Object>> results = namedjdbcTemplate.queryForList(FINDALL,     namedParameters); 
```

然后将其从服务传递到控制器，然后将其添加到我们的模型中：

```
List<Map<String,Object>> locations = cmsAttributeService.getAttributeList(id);
        model.addAttribute("locationlist", locations); 
```

然后我需要显示我们的jsp中的所有条目。目前我这样做是这样的：

```
<c:forEach items="${locationlist}" var="list">  
<tr> 
  <td>
   <c:out value="${list }"></c:out>
  </td>
 </tr>
</c:forEach> 
```

我的问题是它返回的格式，例如：

```
{=UCMDB2.Project.name} 
```

我如何让它只返回 'UCMDB2.Project.name' 删除 {= }？我尝试了各种其他调用，例如使用 list.value、list.key，所有这些调用要么完全破坏它，要么将结果空白。我相当肯定它应该是一些我只是想念的简单的东西。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:10:39.643

将其更改为`List <String>`并且有效。

# javascript - 为什么 IE9 不打印任何东西？

> ID：16022208
> 
> 赞同：0
> 
> 时间：2013-04-15T18:26:33.597
> 
> 标签：javascript, jquery, internet-explorer-9, jqprint

我有一个使用 jqprint 的 javascript 打印功能（尽管我对代码做了一些小的调整）。

此打印功能在 IE8 和 Chrome 上运行没有问题。虽然在 IE9 上，它没有显示 JS 错误，并且浏览器打印对话框按预期显示，但是一旦我单击打印，什么也没有发生。最终，我计算机上的所有应用程序都开始滞后，但我必须重新启动。

如果我打开开发工具包 (F12) 并将文档模式设置为 IE8 标准，它在 IE9 中可以正常打印。

这是怎么回事？我真的很困惑...

**编辑：**

我的电脑没有连接到打印机，所以我使用内置的“Microsoft XPS Document Writer”进行测试。我已经在 IE8 和 Chrome 中的实际打印机上测试了代码，它确实有效。

**更新**：

由于某种原因今天停止工作，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:54:06.967

我不知道为什么，但我得到了它的工作。

当它调用 print 函数时，它是在它刚刚创建的 jquery 对象（iframe）上调用它。我更改了 jqprint 代码，因此它每次都重新抓取对象。

原始jqprint代码：

```
 $iframe[0].contentWindow.document.close();
 .... 
```

修改jqprint代码：

```
$('iframe')[0].contentWindow.document.close();
$('iframe')[0].contentWindow.focus();
$('iframe')[0].contentWindow.print();
$('iframe')[0].contentWindow.close(); 
```

# ios - 当我只指定一个约束时自动布局约束冲突

> ID：16022209
> 
> 赞同：2
> 
> 时间：2013-04-15T18:26:35.063
> 
> 标签：ios, autolayout, autoresizingmask

我的控制器中有以下简单的测试代码：

```
- (void)loadView
{
    UIView *view = [UIView new];
    [self setView:view];

    UILabel *label = [UILabel new];
    [label setText:@"Hello World!"];

    [view addSubview:label];

    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-[label]"
        options:0 metrics:nil views:NSDictionaryOfVariableBindings(label)]];
} 
```

代码失败，出现以下异常，我不知道为什么。任何帮助将不胜感激：

```
2013-04-15 14:15:47.880 libmarkup-test[1072:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. > Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x753eb60 H:|-(NSSpace(20))-[UILabel:0x7536b60]   (Names: '|':UIView:0x75376a0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x712a2c0 h=--& v=--& UILabel:0x7536b60.midX ==>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x753eb60 H:|-(NSSpace(20))-[UILabel:0x7536b60]   (Names: '|':UIView:0x75376a0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

“无法同时满足约束”消息特别令人困惑，因为据我所知，我只指定了一个约束。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T19:34:40.840

看起来你忘记`translatesAutoresizingMaskIntoConstraints`在 UILabel 上设置了。默认情况下它将是 YES。因此，该标签上的自动调整大小掩码被转换为附加约束，然后与您指定的约束相冲突。

添加这个应该可以解决约束问题：

`label.translatesAutoresizingMaskIntoConstraints = NO;`

您可能还应该考虑该标签上的垂直约束。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-17T07:07:56.430

请调整约束优先级（默认为1000）和拥抱优先级（默认为250）

# xcode - 使用 Xcode 的单元测试框架，应用程序代码是否可以确定它是否作为单元测试运行？

> ID：16022211
> 
> 赞同：1
> 
> 时间：2013-04-15T18:26:38.860
> 
> 标签：xcode, unit-testing, ocunit

使用 Xcode 提供的内置测试框架，有没有办法让应用程序代码确定它是否正在由测试运行程序运行，而不是作为应用程序运行？

换句话说，我想知道是否可以在应用程序代码中做这样的事情：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // ...

    if (IsUnitTestRunning()) {
        [self useDefaultSettings];
        [self showDefaultViewController];
    }
    else {
        [self restoreUserSettings];
        [self restoreUserInterface];
    }

    // ...
} 
```

我知道我可以创建一个新配置来定义一些预编译器宏并设置 Xcode 方案以在运行测试时构建和使用该配置，或者我可以在运行测试时将我的应用程序中的某种全局变量设置为 YES，但我我想知道 OCUnit 或 Xcode 中是否已经内置了一些东西来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:35:09.267

在 Macintosh 上，有一种方法可以在 Xcode 调试期间传递一些选项，使其进入“ `int main(argc, argv)`”。

我怀疑 iOS 端也有类似的功能。您应该能够捕获通过“ `int main(argc, argv)`”传递的选项。

这是您在 Xcode 方面进行修改的地方：

![稍微修改一下你的 Xcode 方案](https://i.stack.imgur.com/ckru2.jpg)

另一种选择可能是查看通过“ `didFinishLaunchingWithOptions:`”传入的选项字典，看看从 Xcode 启动与在设备或模拟器上启动它是否有什么不同（而不是从 Xcode 启动）。

# android - 在android中如何使服务可运行线程等待activity完成

> ID：16022215
> 
> 赞同：0
> 
> 时间：2013-04-15T18:26:56.830
> 
> 标签：android, service, runnable

从在后台无限期运行的服务中，我创建了一个用于网络操作的可运行线程并尝试从服务启动活动，活动启动并顺利运行，但当然服务继续运行..（在活动之后成为焦点。）。我想让我的服务在活动完成其工作或调用 ondestroy() 后恢复其以下代码。如何做到这一点。?

# c - C语言中的单词反转

> ID：16022220
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:27:07.293
> 
> 标签：c, arrays, strcpy, strcat

我正在尝试反转句子中单词的字母。我也试图将这些单词存储在一个新的 char 数组中。目前我得到一个运行时错误，对于我所有的调整我都无法解决。我的方法是创建一个与句子长度相同的新字符数组。然后循环遍历句子，直到我到达一个 ' ' 字符。然后向后循环并将这些字符添加到一个单词中。然后将单词添加到新句子中。任何帮助将非常感激。

```
int main(void) {
    char sentence [] = "this is a sentence";
    char *newSentence = malloc(strlen(sentence)+1);
    int i,j,start;
    start = 0;

    for(i = 0; i <= strlen(sentence); i++)
    {

        if(sentence[i] == ' ')
        {
            char *word = malloc((i - start)+1);
            for(j = sentence[i]; j >= start; j--)
            {
                word[j] = sentence[j];
            }
            strcat(newSentence,word);
            start =sentence[i +1];
        }
    }
    printf("%s",newSentence);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:55:36.333

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void) {
    char sentence [] = "this is a sentence";
    char *newSentence;
    int i,j,start, len;
    start = 0;
    len = strlen(sentence);
    newSentence = malloc(len+1);
    *newSentence = '\0';

    for(i = 0; i <= len; i++)
    {
        if(sentence[i] == ' ' || sentence[i] == '\0')
        {
            char *word = malloc((i - start)+1);
            int c = 0;
            for(j = i - 1; j >= start; j--)
            {
                word[c++] = sentence[j];
            }
            word[c]='\0';
            strcat(newSentence,word);
            if(sentence[i] == ' ')
                strcat(newSentence," ");
            start = i + 1;
            free(word);
        }
    }
    printf("%s",newSentence);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:30:25.020

从逻辑上讲，这里：

```
j = sentence[i]
start =sentence[i +1]; 
```

`start`并且`j`是 char 数组中的索引位置，您试图将 a 分配`char`给它们，这会搞砸一切。

应该：

```
j= i;
start = i +1; 
```

如果你的算法是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:53:59.043

相同的另一个变体......

```
int main(int argc, const char *argv[])
{
    char sentence [] = "this is a sentence";
    size_t len = strlen(sentence);
    char *newSentence = malloc(len + 1);
    char *ptr_src = sentence;
    char *ptr_dst = newSentence;

    while(ptr_src)
    {
        char *next, *t;

        next = strchr(ptr_src, ' '); // find next space
        if (!next) next = sentence + len; // if not found, next = EOL

        for (t = next; t > ptr_src;)
        {
            *ptr_dst++ = *--t;
        }
        if (*next)
        {
            *ptr_dst++ = *next++;
            ptr_src = next;
        }
        else
        {
            *ptr_dst = 0;
            break;
        }
    }
    printf("[%s]",newSentence);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T18:54:33.450

您的程序几乎没有错误。我试图在这个程序中删除：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void) {
    char sentence [] = "this is a sentence";
    char *newSentence = (char *)malloc(strlen(sentence)+1);
    int i,j,start, k;
    start = 0;

    for(i = 0;; i++)
    {

        if(sentence[i] == ' ' || sentence[i] == '\0')   //sentence[i] == '\0' for the last word.
        {
            char *word = (char *) malloc((i - start)+1);
            for(j = i-1, k = 0; j >= start; j--, k++)
            {
                word[k] = sentence[j];
            }
        word[k++] = ' ';                    //space after each word
        word[k] = '\0';                 

            strcat(newSentence,word);

            start = i+1;
        }

    if (sentence[i] == '\0')
        break;
    }
    printf("%s\n",newSentence);
    return 0;
} 
```

[在http://ideone.com/Z9ogGk](http://ideone.com/Z9ogGk)现场查看

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T18:29:01.200

```
strcat(newSentence,word); 
```

`newSentence`必须是一个字符串。字符串是*由第一个空字符终止并包括第一个空字符的连续字符序列*

**编辑：**对于上面写的内容，这个答案已被否决了 4 次。如果您认为不正确，请解释。否则，请删除您的反对票。

# python - Selenium Desired Capabilities - 为 PhantomJS 驱动程序设置句柄警报

> ID：16022226
> 
> 赞同：12
> 
> 时间：2013-04-15T18:27:29.397
> 
> 标签：python, selenium, phantomjs

我正在使用 webdriver 尝试 phantomJS，但在处理 javascript 警报时遇到了问题。我注意到 phantomjs 驱动程序 desired_capabilities 有一个字段`'handlesAlerts': False` 有没有办法将此值设置为 true？我已经尝试了明显的方法，但这没有任何效果：

```
drv = webdriver.PhantomJS(desired_capabilities={'handlesAlerts': True})

print drv.desired_capabilities

{u'browserName': u'phantomjs',
 u'driverName': u'ghostdriver',
 u'driverVersion': u'1.0.3',
 u'handlesAlerts': False,
 u'javascriptEnabled': True,...} 
```

我可以更改字典中的值`drv.desired_capabilities['handlesAlerts'] = True`，但是当我尝试切换到警报时，我收到一条错误消息。

```
$cat index.html 
<html>
<body>
<script type="text/javascript">
    alert('FOO!');
</script>
    Hello World.
</body>
</html>

>>> from selenium import webdriver
>>> driver = webdriver.PhantomJS()
>>> driver.desired_capabilities['handlesAlerts'] = True
>>> driver.get('index.html')
>>> alert = driver.switch_to_alert()
>>> alert.text

Traceback (most recent call last):
<snip>
selenium.common.exceptions.WebDriverException: Message: 
   'Invalid Command Method -  Request    => 
                 {"headers":{"Accept":"application/json",
                              "Accept- Encoding":"identity",
                              "Connection":"close",
                              "Content-Type":"application/json;charset=UTF- 8",
                              "Host":"127.0.0.1:56009", 
                              "User-Agent":"Python- urllib/2.7"},
                  "httpVersion":"1.1",
                  "method":"GET",
                  "url":"/alert_text",
                  "urlParsed": {"anchor":"",
                                "query":"",
                                "file":"alert_text",
                                "directory":"/",
                                "path":"/alert_text",
                                "relative":"/ alert_text",
                                "port":"",
                                "host":"",
                                "password":"",
                                "user":"",
                                "userInfo":"",
                                "authority":"",
                                "protocol ":"",
                                "source":"/alert_text",
                                "queryKey":{},
                                "chunks":["alert_text"]},
                                "urlOriginal":"/session/cd31ed90-a5f8-11e2-856d-5783db9f5342/alert_text"}' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T10:07:34.167

API 指定将所需功能传递给构造函数。但是，驱动程序可能不支持所需功能中请求的功能。在这种情况下，驱动程序不会抛出任何错误，这是故意的。会话返回一个功能对象，它指示会话实际支持的功能。

这就是在这种情况下实际发生的事情。PhantomJS 驱动程序不支持在[源代码](https://github.com/ariya/phantomjs/blob/056aa50c19b31de967ec7c30e59c6cb16680e48d/src/ghostdriver/session.js)中看到的处理警报，返回的功能对象表明了这一点。在大多数语言绑定中，此返回的功能对象是只读的；在返回对象可能是读写的语言绑定中，修改这些功能对会话没有实际影响。在未决的[W3C WebDriver 规范](http://www.w3.org/TR/webdriver/)中，有一个`requiredCapabilities`设置会在服务器无法提供该功能时引发异常，但据我所知，尚未由任何驱动程序实现。

# asp.net-web-api - 使用无状态服务（REST 服务）发送用户凭据的最佳实践是什么？

> ID：16022227
> 
> 赞同：3
> 
> 时间：2013-04-15T18:27:30.023
> 
> 标签：asp.net-web-api, security, stateless-session

将用户凭据发送到无状态服务（比方说 ASP.NET Web Api）的最佳实践是什么。

当 SSL 不是一个选项时应该怎么做？在 URL 参数中发送用户凭据是否安全（有或没有 SSL）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:09:59.287

查看[这篇](http://jamiekurtz.com/2013/01/14/asp-net-web-api-security-basics/)关于保护您的 API 的帖子，它易于阅读并解释了您需要的大部分内容。

关于 SSL 不是一种选择，如帖子中所述：

> **什么时候使用 HTTPS？**
> 
> 答：当您不想从 HTTP 请求中窃取信息时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:00:37.990

1.  使用标准身份验证（BasicAuthentication、OpenID 或 Oauth）
2.  使用 HTTPS。创建自签名证书并启用服务器是一个非常简单的操作
3.  即使使用 SSL，也不要在 URL 参数中传递任何机密信息（也是用户密码）。他们可以登录到您的服务器

# java - weblogic java.lang.IllegalStateException：找不到工厂 javax.faces.context.FacesContextFactory 的备份。

> ID：16022228
> 
> 赞同：0
> 
> 时间：2013-04-15T18:27:32.060
> 
> 标签：java, weblogic, ear

我有一个 java 面的应用程序，它可以与 Tomcat 7 一起正常工作，并带有以下 web.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>spfilesharing</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>GetIAMToken</servlet-name>
        <servlet-class>pt.ptinovacao.personal.spfilesharing.authentication.GetIAMToken</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>GetIAMToken</servlet-name>
        <url-pattern>/getIAMToken</url-pattern>
    </servlet-mapping>
    <servlet>
       <servlet-name>Faces Servlet</servlet-name>
       <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>bootstrap</param-value>
    </context-param>
</web-app> 
```

为了在 weblogic 中部署应用程序，我使用了一个带有以下 weblogic-application.xml 的 ear 项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd" >
    <prefer-application-packages>
        <package-name>org.opensaml.*</package-name>
        <package-name>org.slf4j.*</package-name>
        <package-name>javax.faces.*</package-name> 
        <package-name>com.sun.faces.*</package-name> 
        <package-name>org.apache.myfaces.*</package-name> 
    </prefer-application-packages> 

    <prefer-application-resources> 
        <resource-name>javax.faces.*</resource-name> 
        <resource-name>com.sun.faces.*</resource-name> 

        <resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
    </prefer-application-resources>

</weblogic-application> 
```

当我在 weblogic 中运行它时，出现以下错误：

```
java.lang.IllegalStateException: Could not find backup for factory javax.faces.context.FacesContextFactory. 
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1010)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:342)
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:302)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:299)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:250)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
    at weblogic.servlet.internal.StubSecurityHelper.initServletInstance(StubSecurityHelper.java:94)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:82)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:74)
    at weblogic.servlet.internal.StubLifecycleHelper.(StubLifecycleHelper.java:60)
    at weblogic.servlet.internal.StubLifecycleHelper.(StubLifecycleHelper.java:34)
    at weblogic.servlet.internal.ServletStubImpl.initStubLifecycleHelper(ServletStubImpl.java:624)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:565)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:281)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3288)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3254)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
    at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2163)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
    at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:09:17.383

我已将ear 项目的weblogic-application.xml 更改为：

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd" >
    <prefer-application-packages>
        <package-name>org.opensaml.*</package-name>
        <package-name>org.slf4j.*</package-name>
    </prefer-application-packages> 
</weblogic-application> 
```

现在它正在工作。

# sql-server - 我必须在 LINQ 中进行什么样的查询才能获得包含对象列表的自定义列表？

> ID：16022232
> 
> 赞同：2
> 
> 时间：2013-04-15T18:27:42.817
> 
> 标签：sql-server, linq, linq-to-sql

我要做的是找到从查询中获取对象集合的最佳和最快的方法，以便我可以将它们解析为 JSON 并通过 WCF Web 服务发送它们。我有一个与其他两个实体相关的实体，我的 edmx 中显示的属性是这样的：

*   事件

    *   事件 ID
    *   日期
    *   加速
    *   强度
    *   设备ID
    *   区块标识
    *   设备
    *   堵塞
*   设备

    *   设备ID
    *   别名
    *   集群 ID
    *   簇
    *   活动
*   堵塞

    *   区块标识
    *   开始日期
    *   日期结束
    *   活动

我想获取与每个块关联的事件列表列表，每个块的事件由一个列表表示，但我只想获取每个事件的 EventId、Date、DeviceId、BlockId、加速度和强度，因为我想要以避免尝试解析每个 Event 对象中的 Device 和 Block 属性而导致的循环引用。

我尝试了类似的东西

```
var result = (from d in context.Block select (d.Events)).ToList(); 
```

但这仅返回一个包含每个块中的事件对象的列表，但我不知道如何获取我为每个块中的每个事件指定的信息。

如何在查询中指定要检索的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:31:51.117

我认为使用基于方法的查询会更容易：

```
var result = context.Block.Select(b => b.Events.Select(e => new
                                                {
                                                    e.EventId,
                                                    e.Date,
                                                    e.DeviceId,
                                                    e.BlockId,
                                                    e.Accelleration,
                                                    e.Intensity
                                                }).ToList()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:32:46.183

您需要使用 groupJoin

这是一个例子

> var teamsandriders = teams.GroupJoin(riders, Team => Team.name, Rider => Rider.TeamName, (team, teamRiders) => new {Team = team.name, riders = teamRiders.Select(rider => rider.name )});

# c# - 在 C# 中写入事件

> ID：16022233
> 
> 赞同：0
> 
> 时间：2013-04-15T18:27:50.050
> 
> 标签：c#, asp.net, sdk, dynamics-crm, dynamics-crm-4

我正在使用 CRM 4 和 SDK 来抓取这样的案例：

```
public List<Case> GetCases()
    {
        List<Case> cases = new List<Case>();

            #region Retrieve Resolved Cases
        try
        {

            InitSession();

            RetrieveMultipleRequest req = new RetrieveMultipleRequest();
            req.ReturnDynamicEntities = true;

            //QueryExpression says what entity to retrieve from, what columns we want back and what criteria we use for selection
            QueryExpression qe = new QueryExpression();
            qe.EntityName = EntityName.incident.ToString();
            List<string> attributes = new string[] { 
            "incidentid","title" ,"description", "ticketnumber", "statuscode",
            "kez_allocatedhours",
            "customerid",
            "casetypecode"

            }.ToList();

            //columns to retireve 
            ColumnSet AvailabilityColumnSet = new ColumnSet();
            AvailabilityColumnSet.Attributes = attributes.ToArray();
            qe.ColumnSet = AvailabilityColumnSet;

            //filter
            FilterExpression fe = new FilterExpression();
            fe.FilterOperator = LogicalOperator.And;

            //condtion for filter
            ConditionExpression isResolved = new ConditionExpression();
            isResolved.AttributeName = "statuscode";
            isResolved.Operator = ConditionOperator.NotEqual;
            isResolved.Values = new string[] { "5" };

            fe.Conditions = new ConditionExpression[] { isResolved }; //Add the conditions to the filter
           qe.Criteria = fe; //Tell the query what our filters are
            req.Query = qe; //Tell the request the query we want to use

            //retrieve entities
            RetrieveMultipleResponse resp = svc.Execute(req) as RetrieveMultipleResponse;
            if (resp != null)
            {
                BusinessEntity[] rawResults = resp.BusinessEntityCollection.BusinessEntities;
                List<DynamicEntity> castedResults = rawResults.Select(r => r as DynamicEntity).ToList();

                foreach (DynamicEntity result in castedResults)
                {
                    string id = GetProperty(result, "incidentid");
                    string title = GetProperty(result, "title");
                    string description = GetProperty(result, "description");
                    string ticket = GetProperty(result, "ticketnumber");
                    string customer = GetProperty(result, "customerid");
                    int statuscode = -1;
                    string statusname = "";
                    double estHours = 0.0;
                    string casetype = "";
                    int casetypecode = -1;

                    Property prop = result.Properties.Where(p => p.Name == "statuscode").FirstOrDefault();
                    if (prop != null)
                    {
                        StatusProperty status = prop as StatusProperty;

                        if (status != null)
                        {
                            statuscode = status.Value.Value;
                            statusname = status.Value.name;
                        }
                    }

                    prop = result.Properties.Where(p => p.Name == "kez_allocatedhours").FirstOrDefault();

                    if (prop != null)
                    {
                        CrmFloatProperty fl = prop as CrmFloatProperty;

                        if (fl != null)
                        {
                            estHours = fl.Value.Value;
                        }
                    }

                    prop = result.Properties.Where(p => p.Name == "casetypecode").FirstOrDefault();

                    if (prop != null)
                    {
                        PicklistProperty fl = prop as PicklistProperty;

                        if (fl != null)
                        {
                            casetype = fl.Value.name;
                            casetypecode = fl.Value.Value;
                        }
                    }

                    Case c = new Case();
                    c.ID = id;
                    c.Title = title;
                    c.Description = description;
                    c.StatusCode = statuscode;
                    c.StatusName = statusname;
                    c.TicketNumber = ticket;
                    c.CustomerName = customer;
                    c.EstimatedHours = estHours;
                    c.Type = casetype;
                    c.TypeCode = casetypecode;

                    bool allowedThroughStat = true;
                    bool allowedThroughType = true;
                    var userStatuses = SettingsManager.Get("CRMUserStatusReasons").Split(';').ToList().Where(p => p.Length > 0).ToList();
                    var userTypes = SettingsManager.Get("CRMUserCaseTypes").Split(';').ToList().Where(p => p.Length > 0).ToList();

                    if(userStatuses.Count > 0 && !userStatuses.Contains(c.StatusCode.ToString()))
                    {
                        allowedThroughStat = false;
                    }

                    if (userTypes.Count > 0 && !userTypes.Contains(c.TypeCode.ToString()))
                    {
                        allowedThroughType = false;
                    }

                    if(allowedThroughStat && allowedThroughType)
                    cases.Add(c);
                }

            }

        }// end try
        catch (Exception)
        {
            return null;
            // The variable 'e' can access the exception's information.
            // return "Error Message: " + e.Message.ToString() + " | Stack Trace: " + e.StackTrace.ToString();
        }

        return cases;

            #endregion
    } 
```

但是，现在我需要能够在给定其事件 ID 的情况下从 C# 更改案例的状态和标题。

我查看了 SDK 文档，但找不到这样的示例。

以前有人用过这个吗？

谢谢

简单地说，上面是读取事件的代码。我可以举一个写事件字段的例子吗，只有一个。例如：我如何更改事件的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:45:36.953

您可以在 CrmService 上调用 Update 方法。这是[SDK 文章](http://msdn.microsoft.com/en-us/library/bb929003.aspx)。

```
Case c = new Case();
c.ID = id;
c.Title = title;
svc.Update(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:48:27.327

要更改实体的状态，请使用 setstaterequest。如果您想对动态实体执行此操作，则[此博客中有描述](http://blogs.msdn.com/b/jonasd/archive/2007/04/04/setting-status-with-setstatedynamicentityrequest.aspx)

# java - 超时后的Java返回值

> ID：16022237
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:27:57.083
> 
> 标签：java, multithreading, timer

我有一个函数可以迭代地进行计算并每次更新一个类全局变量（该函数运行迭代深化算法）。我想找到一种方法来进行计算，然后在 5s 后将全局变量值返回给调用者，而无需等待计算完成：

```
start computation
wait 5s
return global variable and terminate the computation function if not done 
```

我试过了：

```
start computation in a new thread
curThread.sleep(5s)
return current global variable value and interrupt the computation thread 
```

但线程终止有时会失败

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:12:26.117

这更像是一个提示而不是真正的解决方案，您可能需要根据自己的需要对其进行调整。

```
 class MyRunnable implements Runnable{

      private String result = "";
      private volatile boolean done = false;

      public synchronized void run(){
           while(!done){
                try{
                     Thread.sleep(1000);
                } catch (InterruptedException e) {
                     e.printStackTrace();
                }
                result = result + "A";
           }
    }

    public synchronized String getResult(){
         return result;
    }

    public void done(){
         done = true;
    }
 } 
```

以及运行它的代码：

```
 public static void main(String[] args) throws Exception {
    MyRunnable myRunnable = new MyRunnable();
    ExecutorService service = Executors.newFixedThreadPool(1);
    service.submit(myRunnable);
    boolean isFinished = service.awaitTermination(5, TimeUnit.SECONDS);
    if(!isFinished) {
        myRunnable.done();
        String result = myRunnable.getResult();
        System.out.println(result);
    }
    service.shutdown();
} 
```

# email - 通过 PHP 从免费的 Gmail 帐户发送

> ID：16022238
> 
> 赞同：0
> 
> 时间：2013-04-15T17:53:27.473
> 
> 标签：email, php, gmail, dns, dkim

我想使用我的免费 G​​mail 作为发件人通过 PHP 脚本发送电子邮件`From`。如何做到这一点以使 SPF 记录有效（就好像邮件实际上是从 Gmail 发送的一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:34:50.953

还有许多其他库。他们之中有一些是 ：

*   [http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)
*   [http://pear.php.net/package/Mail](http://pear.php.net/package/Mail)（这是Pear包）
*   [https://github.com/denvertimothy/ThriveSMTP](https://github.com/denvertimothy/ThriveSMTP)
*   [http://swiftmailer.org/](http://swiftmailer.org/)

您可以使用这些库中的任何一个使用 SMTP 从 PHP 发送邮件

使用带有 PHPMailer 库的 Gmail 帐户发送邮件的示例如下：

```
//include the file
require_once('class.phpmailer.php');

$phpmailer          = new PHPMailer();

$phpmailer->IsSMTP(); // telling the class to use SMTP
$phpmailer->Host       = "ssl://smtp.gmail.com"; // SMTP server
$phpmailer->SMTPAuth   = true;                  // enable SMTP authentication
$phpmailer->Port       = 465;          // set the SMTP port for the GMAIL server; 465 for ssl and 587 for tls
$phpmailer->Username   = "yourname@yourdomain"; // Gmail account username
$phpmailer->Password   = "yourpassword";        // Gmail account password

$phpmailer->SetFrom('name@yourdomain.com', 'First Last'); //set from name

$phpmailer->Subject    = "Subject";
$phpmailer->MsgHTML($body);

$phpmailer->AddAddress($to, "To Name");

if(!$phpmailer->Send()) {
  echo "Mailer Error: " . $phpmailer->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:40:49.663

作为解决方案之一，您可以使用 Zend Framework`Zend_Mail`类

```
 $email_conf = array(
        'auth' => 'login',
        'username' => 'your_login',
        'password' => 'your_password',
        'ssl' => 'tls',
        'port' => '587'
    );
    $transport = new Zend_Mail_Transport_Smtp('smtp.gmail.com', $email_conf);
    Zend_Mail::setDefaultTransport($transport);

    $mailer = new Zend_Mail('utf-8');
    $mail->addTo($recipientEmail); 
    $mail->setSubject($subject);
    $mailer->setBodyHtml($html);
    $mail->send(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:59:44.250

您必须通过 Google 的 SMTP 服务器发送邮件。如果您需要纯 PHP，请找到一个 SMTP 库（我只知道 PEAR 的[Net_SMTP](http://pear.php.net/package/Net_SMTP)）并`smtp.gmail.com`使用 Gmail 提供的常用设置对其进行配置。

# python - 从现有元组创建新元组，同时更改其元素之一？

> ID：16022245
> 
> 赞同：2
> 
> 时间：2013-04-15T18:28:10.383
> 
> 标签：python

我现在有一个这样的元组列表：

```
[('Ben', '5 0 0 0 0 0 0 1 0 1 -3 5 0 0 0 5 5 0 0 0 0 5 0 0 0 0 0 0 0 0 1 3 0 1 0 -5 0 0 5 5 0 5 5 5 0 5 5 0 0 0 5 5 5 5 -5'),
 ('Moose', '5 5 0 0 0 0 3 0 0 1 0 5 3 0 5 0 3 3 5 0 0 0 0 0 5 0 0 0 0 0 3 5 0 0 0 0 0 5 -3 0 0 0 5 0 0 0 0 0 0 5 5 0 3 0 0'),
  ...] 
```

它会持续一段时间。

我对python（和一般编程）相对较新，所以我正在努力弄清楚如何创建一个新的元组，其中每个元组的 item[1] 元素被修改，但每个左侧的 item[0] 元素原封不动。我要做的就是将每个元组的第二个元素放入所有这些数字的列表中。我试图只是 .split() 它，但元组是不可变的。那你会怎么处理这个问题呢？

最终它是一个开始练习的例子。我们正在根据每部电影的评分制作一个非常原始的电影推荐器，每个数字都是人们给出的与电影相对应的评分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:31:04.560

由于元组是不可变的，因此您必须基于旧元组创建新元组：

```
data = [('Ben', '5 0 0 0 0 0 0 1 0 1 -3 5 0 0 0 5 5 0 0 0 0 5 0 0 0 0 0 0 0 0 1 3 0 1 0 -5 0 0 5 5 0 5 5 5 0 5 5 0 0 0 5 5 5 5 -5'),
        ('Moose', '5 5 0 0 0 0 3 0 0 1 0 5 3 0 5 0 3 3 5 0 0 0 0 0 5 0 0 0 0 0 3 5 0 0 0 0 0 5 -3 0 0 0 5 0 0 0 0 0 0 5 5 0 3 0 0')]

data = [(name, ratings.split()) for name, ratings in data] 
```

如果您不熟悉列表推导，这相当于

```
new_data = []
for name, ratings in data:
    new_data.append( (name, ratings.split()) )
data = new_data 
```

# ssrs-2008 - SSRS 将总和除以一个字段

> ID：16022250
> 
> 赞同：0
> 
> 时间：2013-04-15T18:28:32.707
> 
> 标签：ssrs-2008, reporting-services

我正在尝试建立一个报告，该报告基本上报告一个物业在给定月份完成的已关闭事件的数量，然后将其除以该物业的床位数量。

事件数量是根据基于月份和属性的事件表计算的，然后每个属性的房间数显然是静态的。

我有一个表：

```
Incident: No_ which is the ID, PropertyID, Created_DateTime, Closed_DateTime, Status.

Property: ID, Name, No_of_Rooms 
```

我在计算字段中尝试了此代码，但它错误地说您不能使用聚合列，我认为它可能：

```
=Sum(Fields!No_.Value, "Incidents")/Fields!No_of_Rooms.Value 
```

我相信这很简单，但我找不到要搜索的内容来找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:42:08.497

如果这是报告的“详细信息”级别，通常是最低级别。你可能想要这个：

```
=(Fields!No_.Value / Fields!No_of_Rooms.Value) 
```

如果它在父组上，我猜你只是列出一个实例并且它**需要**一个聚合。在这种情况下：

```
= (Sum(fields!No_.Value) / Sum(Fields!No_of_Rooms.Value)) 
```

这将对聚合执行聚合。`(Fields!(thing).Value, "DataSet")`如果所有内容都在同一个数据集中，则无需执行此操作，否则请执行此操作。通常，如果在您的数据集引用的表或对象中，它会隐含地知道该部分而不会被列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:59:06.363

您的公式将起作用，但前提是放置在 tablix 中，但为了性能，如果可能，应在查询中计算。

# asp.net - 没有网络服务的自动完成扩展器

> ID：16022255
> 
> 赞同：0
> 
> 时间：2013-04-15T18:28:50.833
> 
> 标签：asp.net, c#-4.0

我试图在我的表示层中实现自动完成扩展器，而不使用 Web 服务。我有这样的代码。

但是，我不知道我哪里出错了，但是无法调用我代码后面的 web 方法。我也在我的脚本管理器中启用了 pagemethods。

而且我也没有更新面板。

```
<form id="form1" runat="server">
<ajax:ToolkitScriptManager ID="ScriptManager1" runat="server"/>
<div>
<asp:TextBox ID="txtdata" runat="server"></asp:TextBox>
<ajax:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" TargetControlID="txtdata"
MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1" CompletionInterval="1000" ServiceMethod="GetData" >
</ajax:AutoCompleteExtender> 
```

我的代码是

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public List<string> GetData(string prefixText,int count)
{

//my code to get a list from DAL

return list;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:50:50.473

该`GetData`方法必须是静态的。您可以在此处找到更多信息：[使用 jQuery 直接调用 ASP.NET AJAX 页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# linux - Linux 在重新启动时恢复 Windows

> ID：16022292
> 
> 赞同：0
> 
> 时间：2013-04-15T18:31:09.663
> 
> 标签：linux, memory, crash, reboot

计算机一次过载太多的窗口/程序，导致崩溃。不幸的是，系统被配置（以某种方式）重新加载所有这些窗口/程序重新启动，有谁知道如何解决这个问题并进行干净启动？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:34:50.000

1.  登录到终端（按 ALT+CTRL+F1）并编辑/删除您的会话文件（取决于桌面环境）。

2.  [在askubuntu](http://askubuntu.com)上更好地寻求帮助

# asp.net - 如果在 30 天内或已经过期，请更改“过期日期”字体颜色？

> ID：16022298
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:31:29.963
> 
> 标签：asp.net, sql, case, iif

不确定执行此操作的最佳方法，该应用程序较旧，这就是为什么我在生成它时遇到这么多麻烦的原因。我读过关于做 CASE 语句的文章，但我没有太多的 SQL 经验。任何帮助表示赞赏，答案将受到尊重。谢谢。此外，这没有任何设计，编写应用程序的人使用占位符，所有数据都来自这个巨大的文件，这超出了我的范围。我不知道为什么，因为我从未见过这样的事情。这是一个怪物。

```
'-
Dim TemplateColumnCDLExpiration As System.Web.UI.WebControls.TemplateColumn
TemplateColumnCDLExpiration = New System.Web.UI.WebControls.TemplateColumn
If Me.AllowSorting Then
    TemplateColumnCDLExpiration.SortExpression = "CDLExpiration"
End If
TemplateColumnCDLExpiration.ItemTemplate = 
    New JAG.WebUI.Controls.IEditGridTemplate(ListItemType.Item, 
        "CDLExpiration", 
        JAG.WebUI.Controls.tEditGridItemControlType.Label)
TemplateColumnCDLExpiration.HeaderText = "CDL Expiration"
MyBase.Columns.Add(TemplateColumnCDLExpiration)
'- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:48:02.237

好的，我会给你问题的答案`CASE`，但你必须保证你会阅读下面的注意事项。:)

我正在使用 Oracle SQL；我不知道其他 SQL 实现的语法是否不同。下面是一个显示语法的虚拟查询示例：

```
SELECT 
  CASE 
    WHEN (sysdate - TO_DATE('04/09/2013', 'mm/dd/yyyy') > 30) THEN 'red'
    ELSE 'black'
  END text_color
FROM dual; 
```

后面括号中的代码`WHEN`是测试。它将当前日期与 4 月 9 日进行比较并询问“4 月 9 日是否超过 30 天前？” 如果是这样，它将`'red'`作为 的值返回`text_color`。如果该条件为假，则返回`'black'`. 这是一个更通用的形式：

```
SELECT 
  CASE 
    WHEN (sysdate - :date_to_check > :expiration_days) THEN 'red'
    ELSE 'black'
  END text_color
FROM :my_table; 
```

* * *

# 注意事项

**您不需要 SQL 中的这种讨厌的逻辑。**检查自给定日期以来经过的 X 天数不是数据库逻辑。获取日期是数据库逻辑，决定从该日期到今天已经过去了多少天可以被争论为数据库逻辑或业务逻辑，但决定文本颜色绝对是显示逻辑，这意味着你应该修改你的 .NET 代码，而不是你的 SQL。如果您需要更改显示颜色怎么办？日期检查保持不变，但您必须修改...您的 SQL？只有当正在检索或存储的数据被修改时，才需要进行 SQL 修改。最重要的是，这不是一个干净的关注点分离。

# zend-framework2 - 如何从不同的模型中获取数据以供选择？

> ID：16022300
> 
> 赞同：0
> 
> 时间：2013-04-15T18:31:34.423
> 
> 标签：zend-framework2, zend-form2

我有一些属性的形式：

```
class ToraForm extends Form
{
    public function __construct($name = null)
    {
        parent::__construct('tora');
        $this->setAttribute('method', 'post');

        $this->add(array(
            'name' => 'id',
            'attributes' => array(
                'type' => 'hidden',
            ),
        ));
        $this->add(array(
            'name' => 'name',
            'attributes' => array(
                'type' => 'text',
                'required' => true,
            ),
            'options' => array(
                'label' => 'name',
            ),
        ));
} 
```

但我想添加下拉列表，其中包含从另一个模型中获取的数据。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:52:15.873

您可以采取几种不同的方法。最终，您的 Form 有一个依赖项，需要注入。我写了一篇关于选择列表的表单依赖项的三个最常见用例的深入博客文章。

*   [**Zend\Form\Element\Select 和数据库值**](http://samminds.com/2013/03/zendformelementselect-and-database-values/)

我的 BlogPost 涵盖以下场景：

*   Zend\Form\Element\Select 通过 DbAdapter
*   Zend\Form\Element\Select 通过 TableGateway
*   DoctrineModule\Form\Element\DoctrineObject 通过 Doctrine2

在这里，我将仅演示 DbAdapter 方法，而无需过多解释。请参阅我的博文以获得深入的解释。

```
public function formDbAdapterAction()
{
    $vm = new ViewModel();
    $vm->setTemplate('form-dependencies/form/form-db-adapter.phtml');

    $dbAdapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');
    $form      = new DbAdapterForm($dbAdapter);

        return $vm->setVariables(array(
        'form' => $form
    ));
} 
```

然后是相应的表单类：

```
class DbAdapterForm extends Form
{
    protected $dbAdapter;

    public function __construct(AdapterInterface $dbAdapter)
    {
        $this->setDbAdapter($dbAdapter);

        parent::__construct('db-adapter-form');

        $this->add(array(
            'name'    => 'db-select',
            'type'    => 'Zend\Form\Element\Select',
            'options' => array(
                'label'         => 'Dynamic DbAdapter Select',
                'value_options' => $this->getOptionsForSelect(),
                'empty_option'  => '--- please choose ---'
            )
        ));
    }

    // more later...

    // Also: create SETTER and GETTER for $dbAdapter!
} 
```

最后但并非最不重要的 DataProvider 函数：

```
public function getOptionsForSelect()
{
    $dbAdapter = $this->getDbAdapter();
    $sql       = 'SELECT t0.id, t0.title FROM selectoptions t0 ORDER BY t0.title ASC';
    $statement = $dbAdapter->query($sql);
    $result    = $statement->execute();

    $selectData = array();

    foreach ($result as $res) {
        $selectData[$res['id']] = $res['title'];
    }

    return $selectData;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:41:38.923

我的使用是这样的：

```
Class Useful{
/**
 * All languages
 * @return array 
 */
public static function getLanguages(){
  return array(
    'fr_DZ'=>'Algeria - Français',
    'es_AR'=>'Argentina - Español',
    'en_AU'=>'Australia - English',
    'nl_BE'=>'België - Nederlands',
    'fr_BE'=>'Belgique - Français',
    'es_BO'=>'Bolivia - Español',
    'bs_BA'=>'Bosna i Hercegovina - Hrvatski',
  ...
  );
 }
} 
```

在我这样使用之后：

```
$this->add(array(
  'type' => 'Zend\Form\Element\Select',
  'name' => 'languages',
  'attributes'=>array(
     'multiple'=>"multiple",
   ),
   'options'       => array(
     'label'             => 'My languages I speak',
     'description'       => '',
     'value_options'     => Useful::getLanguages()
    ),
 )); 
```

# orbeon - 在 Orbeon Form Runner 上添加提交按钮，然后在提交时调用自定义 Java REST API

> ID：16022307
> 
> 赞同：2
> 
> 时间：2013-04-15T18:32:00.970
> 
> 标签：orbeon, xforms, formbuilder

我正在开发一个 POC（概念证明），我正在评估 Orbeon 表单构建器/运行器。我使用的是社区版，以防万一，我需要更改代码，否则专业版会为 POC 做。

我正在将 FormRunner 与我在不同 Web 服务器上运行的 Web 应用程序集成，它将使用一些自定义查询参数调用 FormRunner URL。

我想从 FormRunner 中删除 Summary、PDF 和 Review 按钮，只希望保存按钮用作提交按钮，以便单击它将 POST 数据提交到我的自定义 Java 代码，这将与我的 Web 应用程序对话，可能通过 REST API。然后提交按钮应将我重定向到另一个页面，显示“您的数据已提交”。

我发现很难理解可以更改代码以实现预期行为的区域。你能在这方面给我一些建议吗？

谢谢和问候，Mayuresh。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T04:35:47.523

您不必为此更改代码，而是使用该[`oxf.fr.detail.buttons.*.*`](http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties/configuration-properties-form-runner#TOC-Buttons-on-the-detail-page)属性来定义显示哪些按钮。根据您的描述，您只需要[`workflow-send`](http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties/configuration-properties-form-runner#TOC-Workflow-send-button)按钮，除其他外，它可以将表单数据发布到您指定的服务。

# ruby - 地图中的 Ruby 并行处理

> ID：16022308
> 
> 赞同：1
> 
> 时间：2013-04-15T18:32:02.090
> 
> 标签：ruby, process, parallel-processing

请帮帮我

我如何为像地图一样的数组实现方法 pmap 但在两个过程中

我有代码

```
class Array

  def pmap
    out = []
    each do |e|
      out << yield(e)
    end
    out
  end

end

require 'benchmark'

seconds = Benchmark.realtime do
  [1, 2, 3].pmap do |x|
    sleep x
    puts x**x
  end
end

puts "work #{seconds} seconds" 
```

结果我必须得到 3 秒的基准测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:51:46.913

获得绝对 2 个**叉子**

你并不绝对需要 RPC。Marshal + Pipe 通常应该可以工作。

```
class Array

  def pmap
    first, last = self[0..(self.length/2)], self[(self.length/2+1)..-1]

    pipes = [first, last].map do |array|
      read, write = IO.pipe
      fork do
        read.close
        message = []
        array.each do |item|
          message << yield(item)
        end
        write.write(Marshal.dump message)
        write.close
      end
      write.close
      read
    end

    Process.waitall

    first_out, last_out = pipes.map do |read|
      Marshal.load(read.read)
    end

    first_out + last_out
  end

end 
```

**编辑**

现在使用叉子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T21:13:15.847

试试[平行](https://github.com/grosser/parallel)宝石。

```
require 'parallel'

class Array
  def pmap(&blk)
    Parallel.map(self, {:in_processes: 3}, &blk)
  end
end 
```

# windows - 属性表中编辑控件的奇怪之处

> ID：16022309
> 
> 赞同：0
> 
> 时间：2013-04-15T18:32:04.370
> 
> 标签：windows, winapi, propertysheet

我有一个包含几页的属性表。大多数页面都有一个或多个编辑控件。大多数控件不是从页面对话框初始化，而是从创建属性表的对话框初始化；然而，有些是在页面对话框中初始化的，它们的行为相同。

一切开始都很好。可以在页面之间移动。所有控件都没有输入焦点。

如果单击属性表页面中的编辑控件之一建立输入焦点，则可以修改该控件。一切似乎都井然有序。

如果随后移动到不同的属性页，则该页中的第一个编辑控件将获得输入焦点，并且该控件中的所有文本都将被选中！此行为适用于所有页面，但具有只读样式的编辑控件的页面除外。之后，可以移回其他页面，并且最初没有选择任何输入焦点行为。

所有页面都处理 PSN_QUERYINITIALFOCUS 通知并通过 SetWindowLong 机制返回零。

这是预期的行为吗？

为什么最初没有给予一些控制？

我在这里的主要兴趣是以某种方式杀死选择。我尝试在 PSN_SETACTIVE 通知中使用 EM_SETSEL 终止选择，但无济于事。

MSDN 在 PSN_QUERYINITIALFOCUS 下说：“否则，返回零，焦点将转到默认控件。” 如何将控件设置为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:34:33.850

**我觉得上面描述的动作很奇怪！我还是想知道**

**如果他们是正常的。**
**为什么最初没有控件获得焦点。**

我能够通过向属性表页面添加代码来处理任何编辑控件的 WM_COMMAND/EN_SETFOCUS 消息来终止选择。我不知道其他控件是否发送 EN_SETFOCUS 消息。

```
case EN_SETFOCUS:
    {
       char cn[16];
       HWND H = (HWND) lParam;
       GetClassName (H, cn, 15);
       if (strcmp (cn,"Edit") == 0)
       {
            SendMessage (H, EM_SETSEL, -1, 0);
       }
       return true;
    } 
```

我认为可以将任何选择保存在 EN_KILLFOCUS 处理程序中并在 EN_SETFOCUS 处理程序中恢复它，但是对于未知数量的控件这样做会很乏味。

# visual-studio-2012 - 在 VS2012 中使用 Chirpy？

> ID：16022310
> 
> 赞同：2
> 
> 时间：2013-04-15T18:32:07.533
> 
> 标签：visual-studio-2012, chirpy

我正在尝试设置 Chirpy - 我们正在从 MS Visual Studio 2010 迁移到 2012。我知道它应该最终在 Addins 文件夹中，但我没有看到它在工具 -> 插件下列出。有什么想法吗？

我们使用的是旧版本（对于 Github，没有人愿意升级，这样我们就不会遇到 Git 问题）——所以它可能没有这么简单。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-05T13:20:56.903

您必须编辑文件 C:\Users{USER}\Documents\Visual Studio 2012\Addins\Zippy.Addin

将 10.0 更改为 11.0，之后它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T11:27:19.487

您应该在两个地方进行编辑：

```
 <HostApplication>
        <Name>Microsoft Visual Studio Macros</Name>
        <Version>XX.0</Version>
    </HostApplication>
    <HostApplication>
        <Name>Microsoft Visual Studio</Name>
        <Version>XX.0</Version>
    </HostApplication> 
```

更改 XX.0：

如果你有 VS2012 然后输入：11.0 如果你有 VS2013 然后输入：12.0

重新启动 VS 插件将在那里 ;)

# java - 切换cardLayout后JPanel不会关闭

> ID：16022311
> 
> 赞同：0
> 
> 时间：2013-04-15T18:32:08.170
> 
> 标签：java, swing, jpanel, cardlayout

我`JPanels`的`cardLayout`. 当我切换到另一个`JPanel`时，它不会关闭前一个，并且在使用该程序后`JPanels`我会同时打开许多：`JPanels`

```
import javax.swing.*;
import java.awt.*;
import java.awt.CardLayout;
import java.awt.Component;
import java.awt.event.*;

public class guiFrames extends JFrame implements ActionListener{

  public  String name = "login";
    public boolean isDev = false;
    public boolean isMan = false;
  public  JButton loginSubmit, loginCancel,
        newIssue, newUser, list,
        detailsCancel, detailsSubmit, detailsAssign, detailsClose, detailsValidate, detailsFail,
        addUserCancel, addUserSubmit;
  public  JPanel cardGUI;
  public  JTextField loginTxt, pwTxt, userTxt, userPWTxt, issueDetailsTxt;
  public  JComboBox userCmb;
  public  CardLayout cards;

  public guiFrames(){
  }

  public Component inputFrame(){

    JPanel inputPnl = new JPanel();
    inputPnl.setLayout(new GridLayout(3,2));

    JLabel loginLbl = new JLabel("Login");
    inputPnl.add(loginLbl);
    loginTxt = new JTextField();
    inputPnl.add(loginTxt);
    JLabel pwLbl = new JLabel("Password");
    inputPnl.add(pwLbl);
    pwTxt = new JTextField();
    inputPnl.add(pwTxt);

    JPanel buttonPnl = new JPanel();
    buttonPnl.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

    loginSubmit = new JButton("Submit");
      loginSubmit.addActionListener(this);
    buttonPnl.add(loginSubmit);
    loginCancel = new JButton("Cancel");
      loginCancel.addActionListener(this);
    buttonPnl.add(loginCancel);

    JPanel container = new JPanel();
    container.setLayout(new BorderLayout());
    container.add(inputPnl, BorderLayout.CENTER);
    container.add(buttonPnl, BorderLayout.SOUTH);

    container.setVisible(true);

    return container;
  }

  public Component issueList(){

  JPanel listPnl = new JPanel();

  JPanel listFlow = new JPanel();
  listFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  newIssue = new JButton("New");
      newIssue.addActionListener(this);
  listFlow.add(newIssue);
  list = new JButton("Issues");
      list.addActionListener(this);
  listFlow.add(list);
  newUser = new JButton("Add User");
      newUser.setVisible(isMan);
      //newUser.setEnabled(false);
      newUser.addActionListener(this);
  listFlow.add(newUser);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(listFlow, BorderLayout.CENTER);

  listPnl.add(container);
//  listPnl.pack();
  listPnl.setVisible(true);
//  listPnl.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

  return listPnl;
 }

  public Component issueDetails(){
  JList list = new JList();
      issueDetailsTxt = new JTextField();
      issueDetailsTxt.addActionListener(this);

  JPanel detailsFlow = new JPanel();
  detailsFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  detailsCancel = new JButton("Cancel");
      detailsCancel.addActionListener(this);
  detailsFlow.add(detailsCancel);

      detailsFlow.add(issueDetailsTxt);
  detailsSubmit = new JButton("Submit");
      detailsSubmit.addActionListener(this);
  detailsFlow.add(detailsSubmit);

  detailsAssign = new JButton("Assign");
      detailsAssign.setVisible(isMan);
      detailsAssign.addActionListener(this);
  detailsFlow.add(detailsAssign);
  detailsClose = new JButton("Close");
      detailsClose.setVisible(isMan);
      detailsClose.addActionListener(this);
  detailsFlow.add(detailsClose);
  detailsValidate = new JButton("Validate");
      detailsValidate.setVisible(isDev);
      detailsValidate.addActionListener(this);
  detailsFlow.add(detailsValidate);
  detailsFail = new JButton("Fail");
      detailsFail.addActionListener(this);
  detailsFlow.add(detailsFail);
      detailsFail.setVisible(isDev);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(detailsFlow, BorderLayout.SOUTH);
  container.add(list, BorderLayout.CENTER);
      container.add(issueDetailsTxt, BorderLayout.NORTH);

  container.setVisible(true);

  return container;

  } 

  public Component addUser(){

  JPanel addUserGrid = new JPanel();
  addUserGrid.setLayout(new GridLayout(3,2));

  JLabel loginLbl = new JLabel("Login");
  addUserGrid.add(loginLbl);
  userTxt = new JTextField();
  addUserGrid.add(userTxt);
  JLabel pwLbl = new JLabel("Password");
  addUserGrid.add(pwLbl);
  userPWTxt = new JTextField();
  addUserGrid.add(userPWTxt);

  JLabel userLbl = new JLabel("User Type");
  addUserGrid.add(userLbl);
  userCmb = new JComboBox();
  userCmb.addItem("User");
  userCmb.addItem("Manager");
  userCmb.addItem("Developer");
      userCmb.addActionListener(this);
  addUserGrid.add(userCmb);

  JPanel addUserFlow = new JPanel();
  addUserFlow.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

  addUserCancel = new JButton("Cancel");
      addUserCancel.addActionListener(this);
  addUserFlow.add(addUserCancel);
  addUserSubmit = new JButton("Submit");
      addUserSubmit.addActionListener(this);
  addUserFlow.add(addUserSubmit);

  JPanel container = new JPanel();
  container.setLayout(new BorderLayout());
  container.add(addUserFlow, BorderLayout.SOUTH);
  container.add(addUserGrid, BorderLayout.CENTER);

  container.setVisible(true);

  return container;
  }

  public void cardView(){
        JFrame cardFrame = new JFrame(name);
        cardGUI = new JPanel();
        cards = new CardLayout();
        cardGUI.setLayout(cards);
        cardGUI.add(inputFrame(), "login");
    cardGUI.add(issueList(), "issueList");
    cardGUI.add(issueDetails(), "issueDetails");
    cardGUI.add(addUser(), "addUser");

        cardFrame.add(cardGUI, BorderLayout.CENTER);
        cardFrame.pack();
        cardFrame.setVisible(true);
        cardFrame.setDefaultCloseOperation(cardFrame.EXIT_ON_CLOSE);

     cards.show(cardGUI, name);
}

  public void actionPerformed(ActionEvent e){

    if(e.getSource() == loginSubmit){
        manager newUsr = new manager();

        if(newUsr.loginValidation(loginTxt.getText(), pwTxt.getText())){
            name = "issueList";
            isMan = newUsr.isManager();
            isDev = newUsr.isDeveloper();
            System.out.println("User Type: "+isMan);
            cardView();
        }else{
            loginTxt.setText("");
            pwTxt.setText("");
        }
    }else if(e.getSource() == loginCancel){
        loginTxt.setText(name);
        pwTxt.setText("");
        cardView();
        //cards.show(cardGUI, "login");
    }else if (e.getSource() == newIssue){//Goto New Issue Screen
        name = "issueDetails";
        cardView();
    }else if(e.getSource() == newUser){
        name = "addUser";
        cardView();//Goto Add User Screen
    }else if(e.getSource() == addUserCancel){//Go back to Issue List Screen
        name = "issueList";
        cardView();
    }else if(e.getSource() == addUserSubmit){//Add user
        manager newUsr = new manager();
        newUsr.createUser(userTxt.getText(), userPWTxt.getText(), userCmb.getSelectedItem());

        userTxt.setText("");
        userPWTxt.setText("");

    }else if(e.getSource() == list){//Goto Issue Details Screen
        name = "issueDetails";
        cardView();
    }else if(e.getSource() == detailsCancel){//Go Back to Issue List Screen
        name = "issueList";
        cardView();
    }else if(e.getSource() == detailsSubmit){

    }else if(e.getSource() == detailsAssign){

    }else if (e.getSource() == detailsClose){

    }else if (e.getSource() == detailsValidate){

    }else if (e.getSource() == detailsFail){

    }
  }
} 
```

这是主文件：

```
 public class testSerializable{
    public static void main(String[] args){
       manager newUsr = new manager();
       newUsr.loadUserInfo();
       guiFrames gui = new guiFrames();
       gui.cardView();
     }  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:46:57.817

由于您使用[Container](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html)将 JPanel 添加到其中，因此您可以使用[removeAll](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#removeAll%28%29)方法。

您正在将组件添加到您的`container`Container 中，因此我假设您需要从该 Container 中删除所有组件，然后添加新组件并刷新它。

伪代码：

```
container.removeAll();

container.add(NEW_COMPONENTS);

container.revalidate();
container.repaint(); 
```

# ios - 如何在 UIToolbar 中沿长度分布按钮？

> ID：16022312
> 
> 赞同：8
> 
> 时间：2013-04-15T18:32:09.397
> 
> 标签：ios, objective-c, uibarbuttonitem, uitoolbar

在我的应用程序中，我使用一些代码将带有图像的按钮动态添加到`UIToolbar`：

```
[self.navigationController setToolbarHidden:NO];
UIImage *buttonImage1 = [UIImage imageNamed:@"1.png"];
UIImage *buttonImage2 = [UIImage imageNamed:@"2.png"];
UIImage *buttonImage3 = [UIImage imageNamed:@"3.png"];

UIBarButtonItem *toolButton1 = [[UIBarButtonItem alloc] initWithImage:buttonImage1 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];
UIBarButtonItem *toolButton2= [[UIBarButtonItem alloc] initWithImage:buttonImage2 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];
UIBarButtonItem *toolButton3 = [[UIBarButtonItem alloc] initWithImage:buttonImage3 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];

[self setToolbarItems:[NSArray arrayWithObjects:toolButton1, toolButton2, toolButton3, nil]]; 
```

但效果不佳：

![截屏](https://i.stack.imgur.com/ki7o1.png)

如果我尝试设置另一种按钮样式：

```
toolButton1.style = UIBarButtonSystemItemFlexibleSpace;
toolButton2.style = UIBarButtonSystemItemFlexibleSpace;
toolButton3.style = UIBarButtonSystemItemFlexibleSpace; 
```

它看起来也很糟糕：

![截图 2](https://i.stack.imgur.com/xzzS9.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T18:41:02.540

添加两个使用系统样式的附加栏按钮，`UIBarButtonSystemItemFlexibleSpace`并在每个现有按钮之间放置一个：

```
[self.navigationController setToolbarHidden:NO];
UIImage *buttonImage1 = [UIImage imageNamed:@"1"];
UIImage *buttonImage2 = [UIImage imageNamed:@"2"];
UIImage *buttonImage3 = [UIImage imageNamed:@"3"];

UIBarButtonItem *toolButton1 = [[UIBarButtonItem alloc] initWithImage:buttonImage1 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];
UIBarButtonItem *toolButton2= [[UIBarButtonItem alloc] initWithImage:buttonImage2 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];
UIBarButtonItem *toolButton3 = [[UIBarButtonItem alloc] initWithImage:buttonImage3 style:UIBarButtonItemStylePlain target:self action:@selector(btnSettingsClick:)];

[self setToolbarItems:[NSArray arrayWithObjects:
    toolButton1, 
    [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
    toolButton2, 
    [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
    toolButton3, 
    nil]]; 
```

概念化很奇怪，但灵活空间实际上是一个独特的对象，而不是适用于其他对象的样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:41:22.720

您需要使用灵活的空间来让按钮沿着工具栏的长度分布。在按钮之前，每个按钮之间，在按钮之后，您应该有一个灵活的空格按钮。(UIBarButtonSystemItemFlexibleSpace)

```
UIBarButtonItem *flexibleSpaceBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:NULL] 
```

工具栏项数组应该是这样的：

```
[self setToolbarItems:[NSArray arrayWithObjects:toolButton1, flexibleSpaceBtn1, toolButton2, flexibleSpaceBtn2, toolButton3, nil]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-18T16:27:53.513

这是我使用的一些参考代码 -

```
//Constants
let imageNames : [String] = ["img1.png", ... "imgN.png"];

/********************************************************************************/
/** @fcn        spacingDemo()
 *  @brief      space all toolbar items evenly across the UIToolbar on keyboard
 *
 *  @param      [in] (UITextView) textView : view to attach keyboard to in response
 */
/********************************************************************************/
func spacingDemo() {

    //Vars
    var barButtons : [UIBarButtonItem];
    var button : UIButton;
    var img    : UIImage;

    //Init
    keyboardToolbar = UIToolbar();
    barButtons      = [UIBarButtonItem]();

    //Config
    keyboardToolbar.barTintColor = UIColor.lightGray;   /* set bkgnd color      */
    let flexBarButton = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil);
    barButtons.append(flexBarButton);                   /* size-to-fit          */

    for imageName in imageNames {

        //Gen Button
        button = UIButton(type: .custom);
        button.setImage(UIImage(named: imageName), for: .normal);
        button.addTarget(self, action:  #selector(self.keyboardResponse), for: .touchUpInside);
        barButtons.append(UIBarButtonItem(customView: button));

        //Apply Spacing
        let flexBarButton = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil);
        barButtons.append(flexBarButton);               /* size-to-fit          */
    }

    //Assemble
    keyboardToolbar.items = barButtons;

    //Attach
    textView.inputAccessoryView = keyboardToolbar;

    //Cleanup
    keyboardToolbar.sizeToFit();

    return;
} 
```

# c - C 编程 printf、scanf

> ID：16022315
> 
> 赞同：-5
> 
> 时间：2013-04-15T18:32:11.473
> 
> 标签：c, floating-point, include, printf, scanf

嗨，我已经编写了这段代码，但输出如下：

> 你旅行了多少英里？：（你显示的次数）
> 你消耗了多少加仑汽油？：

然后它只是跳过扫描并移动到下一个位置，

```
#include <stdio.h>
#include <string.h>
#include <float.h>

int main ()
{

    float mile;
    float gallon;

    printf("How many Miles have u traveled?: ");
    scanf("%.1f",&mile);
    printf("How many gallons of gasoline have u consumed?: ");
    scanf("%.1f",&gallon);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:34:37.140

您不应该格式化输入。所以只需`%f`用作的第一个参数`scanf`

```
int main ()
{

    float mile;
    float gallon;

    printf("How many Miles have u traveled?: ");
    scanf("%f",&mile);
    printf("How many gallons of gasoline have u consumed?: ");
    scanf("%f",&gallon);

} 
```

# firefox - vbs 文件中的预期语句结束错误

> ID：16022316
> 
> 赞同：0
> 
> 时间：2013-04-15T18:32:20.733
> 
> 标签：firefox, vbscript, proxy, settings

我正在自动执行禁用 Mozilla firefox 上的代理的任务（它目前默认为“自动代理配置 url”，我手动将其设置为“无代理”）。

经过一番研究，我意识到可以通过创建包含以下内容的 user.js 文件（覆盖存储在 pref.js 中的 firefox 设置）来更改设置：

```
user_pref("network.proxy.type", 0); 
```

以下是我遇到问题的 vbs 语法：

```
Set objFSO=CreateObject("Scripting.FileSystemObject")

outFile="%APPDATA%\Mozilla\Firefox\Profiles\3b59qrw5.default\user.js"
Set objFile = objFSO.CreateTextFile(outFile,True)
objFile.Write "user_pref("network.proxy.type", 0);" & vbCrLf
objFile.Close 
```

执行 vbs 文件时，出现此错误

第 5 行字符 27 预期语句结束 800A0401

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:21:06.420

VBScript 字符串由双引号分隔。如果要在 VBScript 中的字符串中使用双引号，则必须使用双双引号对它们进行转义：

```
objFile.Write "user_pref(""network.proxy.type"", 0);" & vbCrLf 
```

或通过连接插入文字双引号（ASCII 字符 34）：

```
objFile.Write "user_pref(" & Chr(34) & "network.proxy.type" & Chr(34) _
  & ", 0);" & vbCrLf 
```

# git - Git：最容易找出在哪个版本中添加了某些功能的方法是什么？

> ID：16022318
> 
> 赞同：1
> 
> 时间：2013-04-15T18:32:27.800
> 
> 标签：git, versions

例如，我想找出哪个 git 版本选项`simple`可用于`git push`. 我了解，我可以分析[发行说明](https://github.com/git/git/tree/master/Documentation/RelNotes)，但可能需要很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:37:52.557

两者都`git bisect`可以`git blame`帮助确定在哪个*提交*中引入了某种更改。将其转换为发布版本超出了 git 的范围，并且将取决于项目如何管理点发布。

# unit-testing - AngularJS 在服务测试中注入服务模拟

> ID：16022320
> 
> 赞同：7
> 
> 时间：2013-04-15T18:32:30.920
> 
> 标签：unit-testing, angularjs, jasmine, angularjs-service

一段时间以来，我一直在尝试测试一项服务无济于事，希望能得到一些帮助。这是我的情况：

我有一个看起来有点像这样的**服务**

```
myModule.factory('myService', ['$rootScope', '$routeParams', '$location', function($rootScope, $routeParams, $location) {

  var mySvc = {
    params: {}
  }

  // Listen to route changes.
  $rootScope.$on('$routeUpdate', mySvc.updateHandler);

  // Update @params when route changes
  mySvc.updateHandler = function(){ ... };

  ...
  ...

  return mySvc;

}]); 
```

我想在服务`'myService'`注入我的测试之前模拟注入的服务，这样我就可以测试下面的**初始化代码**

```
 var mySvc = {
    params: {}
  }

  // Listen to route changes.
  $rootScope.$on('$routeUpdate', mySvc.updateHandler); 
```

我正在使用 Jasmine 进行测试和模拟。这就是我现在想出的

```
describe('myService', function(){
  var rootScope, target;
  beforeEach(function(){
    rootScope = jasmine.createSpyObj('rootScope', ['$on']);

    module('myModule');
    angular.module('Mocks', []).service('$rootScope', rootScope );
    inject(function(myService){
      target = myService;
    });        
  });

  it('should be defined', function(){
    expect(target).toBeDefined();
  });

  it('should have an empty list of params', function(){
    expect(target.params).toEqual({});
  });

  it('should have called rootScope.$on', function(){
    expect(rootScope.$on).toHaveBeenCalled();
  });
}); 
```

但这不起作用。我的 rootscope 模拟并没有取代原来的模拟，而依赖注入文档最让我感到困惑。

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T13:52:32.133

我会监视实际的 $rootScope 而不是尝试注入您自己的自定义对象。

```
var target, rootScope;
beforeEach(inject(function($rootScope) {
  rootScope = $rootScope;

  // Mock everything here
  spyOn(rootScope, "$on")
}));

beforeEach(inject(function(myService) {
  target = myService;
}));

it('should have called rootScope.$on', function(){
  expect(rootScope.$on).toHaveBeenCalled();
}); 
```

我已经在 CoffeScript 中对此进行了测试，但上面的代码应该仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T17:30:16.413

您可以创建一个 RootController 然后注入它：

```
inject(function(myService, $controller){
  target = myService;
  $controller('rootController', {
        $scope : $rootScope.$new(),
        $rootScope : myService
  });
}); 
```

使用这种方法，您可以从“myService”访问 $rootScope 函数；这样的'myService.$on()'

我刚刚成功，如果需要帮助，请告诉我。

# c++ - 使用 cout 显示双精度的 C++ 问题

> ID：16022321
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:32:32.597
> 
> 标签：c++, floating-point, double, cout

我有这个简单的课程，无法弄清楚如何让双打正确显示。目前显示为**"0.00"**。如果没有“showpoint”和“setprecision()”，它们会显示为随机数（例如：6.95326e-310）。**分钟是一个整数，价格是问题所在**

```
output() const{
    cout << "Title: " << title;
    cout << fixed << showpoint << setprecision(2) <<
    "\nMinutes: " << get_minutes() << "\nPrice: ";
    cout << fixed << showpoint << setprecision(2) << get_price();
    cout  << "\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:38:31.153

6.95326e-310 不是随机数。它被称为[科学记数法](http://www.cplusplus.com/reference/ios/scientific/)，能够在不使用太多数字的情况下显示非常小或非常大的数字。如果您不希望这样，请在以下位置设置默认精度`cout`：

```
std::cout.precision(2); 
```

# ruby-on-rails - ExceptionNotifier.notify_exception 不起作用

> ID：16022322
> 
> 赞同：6
> 
> 时间：2013-04-15T18:32:37.573
> 
> 标签：ruby-on-rails, exception-notification

我们将这个 gem（[https://github.com/smartinez87/exception_notification](https://github.com/smartinez87/exception_notification)）与 rails 3.2.11 一起使用。我们想从控制器的操作和维基上提到的后台进程中使用以下方法“ExceptionNotifier.notify_exception(e)”，但我们收到以下错误

ExceptionNotifier：类的未定义方法“notify_exception”

我们正在安装这个 gem 的 3.0.1 版本。gem "exception_notification", "~> 3.0.1"

我们的 rails 版本是 3.2.11，ruby 版本是 ruby​​ 1.9.2p320。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-05T19:30:51.890

您正在阅读`notify_exception`尚未作为 gem 发布的版本的 API。

您可以将您`Gemfile`的指向 git repo

```
gem "exception_notification", git: "git://github.com/smartinez87/exception_notification.git" 
```

或使用适当的 API 调用`3.0.1`

```
ExceptionNotifier::Notifier.exception_notification(request.env, exception,
:data => {:message => "was doing something wrong"}).deliver 
```

的文档`3.0.1`在**[这里](https://github.com/smartinez87/exception_notification/tree/v3.0.1)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-07T05:29:36.157

在你的 gem 文件中只写这一行

```
gem 'exception_notification' , '3.0.1' 
```

在那之后

```
bundle install 
```

这对我有用:)

# heroku - 如何为指向 Heroku 应用程序的顶级域（无 www）设置 DNS？

> ID：16022324
> 
> 赞同：98
> 
> 时间：2013-04-15T18:32:44.447
> 
> 标签：heroku, dns

我已经在我的 Heroku 应用程序中添加了一个自定义域，它适用于`www.domain.com`.

我也需要知道如何设置域而不`www`解析到应用程序。

这是我当前的 DNS 设置：

```
$TTL 86400
@   IN SOA ns1.first-ns.de. postmaster.robot.first-ns.de. (
    2013041500   ; serial
    14400        ; refresh
    1800         ; retry
    604800       ; expire
    86400 )      ; minimum

@                        IN NS      robotns3.second-ns.com.
@                        IN NS      robotns2.second-ns.de.
@                        IN NS      ns1.first-ns.de.

@                        IN A       88.198.38.XXX
localhost                IN A       127.0.0.1
mail                     IN A       88.198.38.XXX
ftp                      IN CNAME   www
imap                     IN CNAME   www
loopback                 IN CNAME   localhost
pop                      IN CNAME   www
relay                    IN CNAME   www
smtp                     IN CNAME   www
www                      IN CNAME   appname.herokuapp.com.
@                        IN MX 10   mail 
```

使用什么正确设置才能使两者都`example.com`正确`www.example.com`指向我的 Heroku 应用程序？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-04-16T15:56:56.077

（注意：root、base、apex 域都是一样的。可互换使用 google-foo。）

传统上，要指向您的顶级域，您将使用指向服务器 IP 的 A 记录。该解决方案无法扩展，并且对于 Heroku 这样的云平台不可行，其中多个且频繁更改的后端负责响应请求。

对于子域（如`www.example.com`），您可以使用指向 的 CNAME 记录`your-app-name.herokuapp.com`。从那时起，Heroku 管理后面的动态 A 记录，`your-app-name.herokuapp.com`以便它们始终是最新的。不幸的是，DNS 规范不允许区域顶点（基域）上的 CNAME 记录。（例如，MX 记录会中断，因为 CNAME 将首先跟随其目标。）

回到根域，简单而通用的解决方案是根本不使用它们。作为一种后备措施，一些 DNS 提供商会为您设置 HTTP 重定向。在这种情况下，请将其设置`example.com`为 HTTP 重定向到`www.example.com`.

一些 DNS 提供商提出了自定义解决方案，允许在区域顶点上进行类似 CNAME 的行为。据我所知，我们有[DNSimple 的 ALIAS 记录](http://blog.dnsimple.com/zone-apex-naked-domain-alias-that-works/)和[DNS Made Easy 的 ANAME 记录](http://www.dnsmadeeasy.com/technology/aname-records/)；两者的行为相似。

使用这些，您可以将记录设置为（使用 zonefile 表示法，即使您可能会在他们的 Web 用户界面上执行此操作）：

```
@   IN ALIAS your-app-name.herokuapp.com.
www IN CNAME your-app-name.herokuapp.com. 
```

请记住`@`，这里是根域 ( `example.com`) 的简写。另外请注意，在区域文件和某些 Web 用户界面中，尾随点很重要。

### 也可以看看：

*   [用 Heroku 正确地做 DNS](https://web.archive.org/web/20140709085736/http://www.neilmiddleton.com/doing-dns-right-with-heroku/)
*   [避免裸域和 DNS A 记录](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)

### 评论：

*   Amazon 的 Route 53 也有一个 ALIAS 记录类型，但它有一些限制，因为它只能指向 AWS 内部。目前，我不建议将其用于 Heroku 设置。

*   有些人将 DNS 提供商与域名注册商混为一谈，因为两者都提供的公司有些重叠。请注意，要将您的 DNS 切换到上述提供商之一，您只需使用当前的域注册商更新您的名称服务器记录。您不需要转移您的域名注册。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-15T08:10:03.823

要将您的 apex/root/naked 域指向 Heroku 托管的应用程序，您需要使用支持 CNAME 类记录（通常称为 ALIAS 或 ANAME 记录）的 DNS 提供商。目前 Heroku[推荐](https://devcenter.heroku.com/articles/custom-domains#add-a-custom-root-domain)：

*   [DNSimple 的别名](http://support.dnsimple.com/articles/alias-record)
*   [DNS 上的 ANAME 变得简单](http://help.dnsmadeeasy.com/managed-dns/records/aname-records/)
*   [easyDNS 上的 ANAME](https://fusion.easydns.com/index.php?/Knowledgebase/Article/View/190/7/aname-records/)
*   [PointDNS 的别名](https://devcenter.heroku.com/articles/pointdns)
*   [CloudFlare 的 CNAME](https://support.cloudflare.com/hc/en-us/articles/200169056-Does-CloudFlare-support-CNAME-APEX-at-the-root-)

无论您选择哪一个，您的记录都将如下所示：

**记录：** `ALIAS`或`ANAME`

**名称：**空或`@`

**目标：** `example.com.herokudns.com.`

这就是你所需要的。

* * *

但是，同时解析 www 版本和非 www 版本[对 SEO不利。](https://moz.com/learn/seo/canonicalization)一个应该指向另一个作为规范 URL。您如何决定这样做取决于您是否使用 HTTPS。如果你不是，你可能应该像 Heroku 现在自动[为你处理 SSL 证书，](https://devcenter.heroku.com/articles/automated-certificate-management)并且免费为所有在付费测功机上运行的应用程序。

如果您不使用 HTTPS，则只需设置一个 301 重定向记录，大多数 DNS 提供商将名称`www`指向`http://example.com`.

如果您使用*的是*HTTPS，您很可能需要在应用程序级别处理重定向。如果您想知道原因，请查看这些[简短](https://support.dnsimple.com/articles/redirector-https/)和[详细的](https://blog.dnsimple.com/2016/08/https-redirects/)解释，但基本上由于您的 DNS 提供商或其他 URL 转发服务没有也不应该有您的 SSL 证书和私钥，它们无法响应 HTTPS对您的域的请求。

要在应用程序级别处理重定向，您需要：

*   将您的 apex 和 www 主机名添加到 Heroku 应用程序 (`heroku domains:add example.com`和`heroku domains:add www.example.com`)
*   [设置您的 SSL 证书](https://devcenter.heroku.com/articles/automated-certificate-management)
*   如上所述，使用 ALIAS 或 ANAME 记录将您的顶级域记录指向 Heroku
*   添加名称`www`指向的 CNAME 记录`www.example.com.herokudns.com.`
*   然后在您的应用程序中，301 将任何 www 请求重定向到非 www URL（这里是如何在 Django 中执行此操作[的示例）](https://stackoverflow.com/a/46233639/426839)
*   同样在您的应用程序中，您可能应该将任何 HTTP 请求重定向到 HTTPS（例如，[在 Django 中](https://docs.djangoproject.com/en/1.11/topics/security/#ssl-https)设置`SECURE_SSL_REDIRECT`为`True`）

查看DNSimple 的[这篇文章](https://support.dnsimple.com/articles/redirect-heroku/#redirect-https)了解更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-21T08:16:43.270

我现在使用 Google Apps（用于电子邮件）和 Heroku 作为网络服务器。我正在使用 Google Apps 301 永久重定向功能将裸域重定向到 WWW.your_domain.com

您可以在此处找到分步说明 [https://stackoverflow.com/a/20115583/1440255](https://stackoverflow.com/a/20115583/1440255)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T08:45:50.240

您不能拥有域的 CNAME 记录，因为 CNAME 是一种别名功能，涵盖所有数据类型（无论客户端是否查找 MX、NS 或 SOA 记录）。CNAME 也总是指一个新名称，而不是一个 ip 地址，因此实际上单行中有**两个错误**

```
@                        IN CNAME   88.198.38.XXX 
```

将该 CNAME 更改为 A 记录应该可以使其正常工作，前提是您使用的 ip 地址是 Heroku 应用程序的正确地址。

在 DNS 中使简单`domain.com`名称在浏览器中工作的唯一正确方法是将域指向具有 A 记录的 IP 地址。

# directx - 将 Ragdoll 映射到模型（DirectX 和 .X 文件 + PhysX）

> ID：16022329
> 
> 赞同：3
> 
> 时间：2013-04-15T18:32:48.510
> 
> 标签：directx, physx, .x, ragdoll

我正在尝试使用我的老师提供的引擎来创建布娃娃。我们使用 DirectX 10、.X 格式的网格文件（使用 assimp 和教师设计的封闭解析器）和 Nvidia PhysX。

我有工作动画（网格变形 oke），现在我必须在 PhysX 中创建一个布娃娃图（参考 Nvidia 课程）。但是我在将我的 PhysX 布娃娃绑定到我的网格时遇到问题，所以当我处于“种子模式”时，我的布娃娃会跟随动画。

我在定位 PhysX 演员（偏移 + 方向）和动画本身（x 轴旋转工作正常，但 z 和 y 轴不工作）方面遇到问题。也许坐标系有问题，但我对这个问题视而不见。我希望有人能发现我的代码中的一些错误或指出我正确的方向。

以下是通常需要将 PhysX actor 定位到 Mesh Bone 的 PhysX 骨骼代码：http: [//pastebin.com/QT8sxuUp](http://pastebin.com/QT8sxuUp)

作为通知，我直接从 .x 文件（使用教师解析器课程）获得的偏移量和转换矩阵，我还使用 LH 坐标系导出了网格。

这是我屏幕上的结果： ![图 1](https://i.stack.imgur.com/2gKf1.jpg) ![图 2](https://i.stack.imgur.com/IN57k.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T23:09:59.717

问题已解决。正如怀疑的那样，问题出在转换器内部。偏移值错误。

# html - 箱形阴影叠加

> ID：16022331
> 
> 赞同：0
> 
> 时间：2013-04-15T18:33:00.097
> 
> 标签：html, css

我正在尝试在两个元素上显示嵌入阴影并将它们覆盖，以便它们看起来与选项卡很好。一切看起来都很棒，除了一个我不知道如何让它看起来光滑的角落。（以黄色突出显示）。 ![在此处输入图像描述](https://i.stack.imgur.com/09FCS.png)

[**用于测试的 JsFiddle**](http://jsfiddle.net/pRX7A/)
这是我的 html：

```
<div class="container">
    <div class="outerWell">
    <div class="well" style="padding-top:15px">
        text
    </div>
    </div>
    <div class="well" style="margin-top:40px">
        test
    </div>
</div> 
```

然后我有创建阴影并隐藏阴影一侧的css `overflow:hidden`
*（.well类取自引导程序）*

```
 .well {
    min-height: 20px;
    padding: 19px;
    margin-bottom: 20px;
    background-color: #f5f5f5;
    border: 1px solid #e3e3e3;
    overflow:hidden;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -moz-box-shadow: inset 0 0 5px 1px #888;
    -webkit-box-shadow: inset 0 0 5px 1px #888;
    box-shadow: inset 0 0 5px 1px #888;
    }
        .outerWell {
        width: 200px;
    overflow: hidden;
    padding-bottom: 10px;
    height: 35px;
    margin-top: -40px;
    position:absolute;
        } 
```

有没有一种简单的方法可以解决我的问题，或者有更好的方法来完成我想要实现的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:23:27.650

您可以通过一些创造性地使用伪元素来实现这一点。看看[这篇关于 CSS-Tricks 的帖子。](http://css-tricks.com/better-tabs-with-round-out-borders/)

# javascript - cakephp2中的jquery函数

> ID：16022334
> 
> 赞同：0
> 
> 时间：2013-04-15T18:33:14.777
> 
> 标签：javascript, jquery, cakephp-2.0

我是 jquery 和 cakephp 的初学者。我试图在我的页面索引中运行一个 jquery 函数，但它不起作用。这个函数在我的主页面索引中嵌套了一个ticker，来自另一个名为ticker的页面。使用的 cakephp 路径类似于 SessionModels/ticker.ctp 和 SessionModels/index.ctp。

当我`ticker.ctp`单独运行我的页面时，它可以毫无问题地显示代码，但是当我尝试`<div id="ticker"> </div>`使用我的 jquery 函数将它嵌套在一个中时`index.ctp`，它什么也没做。这是我的 javascript/jquery 函数：

```
 <script type="text/javascript" > function ticker(){

    $.ajax ({
        type:'GET',
        url:'/SessionModels/ticker/',
        success:function(e){
            $('#ticker').html(e);
        },
        complete : function(e){
            setTimeout ("ticker()", 3000);
        }
    });

}

$(document).ready(function(){
ticker();
});</script> 
```

我已经在我的控制器中添加了我在 cakephp 教程中看到的这段代码

```
public $helpers = array('Js'); 
```

这是我的ticker.ctp的内容

```
 <marquee >
<?php foreach ($sessions as $session): ?>
<span style="color:#333333; font-size:12px; font-weight:bolder; font-family:Arial; vertical-align: text-top;"><?php echo $session['Dictionnary']['ticker']; ?>
</span>
        <?php echo $session['SessionModel']['_open']; ?>
        <?php echo $session['SessionModel']['_close']; ?>

<?php endforeach; ?>
</marquee> 
```

这是我的控制器的内容：

```
 class SessionModelsController extends Controller {

    public $helpers = array('Js');
    public $components = array('RequestHandler');

    public function index() {
        $this->set('sessions', $this->SessionModel->find('all', array('contain' => 'Dictionnary.stock_name')));

    }
    public function ticker() {
        $this->set('sessions', $this->SessionModel->find('all', array('contain' => 'Dictionnary.ticker')));
    }
} 
```

正如我所说，它完美地工作没有问题，但在 index.ctp 中嵌套ticker.ctp 是问题所在。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:11:43.053

Http 状态码 304“未修改”可能表示您的浏览器正在使用请求的缓存版本，而不是检索新数据。这可能是由您的服务器发送的“缓存”标头引起的。

jQuery.ajax() 有一个“缓存”选项，可以防止浏览器缓存 AJAX 请求，并通过向每个请求添加随机时间戳来*强制重新加载页面。*

将 'cache' 选项添加到您的 .ajax 选项并将其设置为 'false' 以使用它；

```
function ticker(){
    $.ajax ({
        type:'GET',
        url:'/SessionModels/ticker/',
        cache:false,
        success:function(e){
            $('#ticker').html(e);
        },
        complete : function(e){
            setTimeout(ticker, 3000);
        }
    });
} 
```

在此处阅读文档[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

要检查ticker() 函数是否实际运行，请尝试暂时将其更改为此；

```
function ticker(){
    alert('tick');
    setTimeout(ticker, 3000);
} 
```

我在我的情况下对此进行了测试，它可以正常工作，但是，您应该确保在此*之前*加载 jQuery 。由于您在*View*中使用此代码，因此您可能会在之后加载 jQuery（就在结束`</body>`标记之前）

更好的选择是使用 JsHelper 的缓冲区并在布局中输出缓冲的脚本；

```
/**
 * JsHelper will append this block to the $(document).ready()
 */
$script = "
        function ticker() {
            $.ajax ({
                type:'GET',
                url:'/timeline/qty_breakdown/',
                cache:false,
                success:function(e){
                    $('#ticker').html(e);
                },
                complete : function(e){
                    setTimeout (ticker, 3000);
                }
            });
        }

        ticker();
";

$this->Js->buffer($script); 
```

然后，在您的布局内（就在结束`</body>`标记之前）：

```
echo $this->Js->writeBuffer(); 
```

这将自动将您的脚本包装在 $(document).ready(...)

# mysql - 在 MySQL 中计算 TINYINT 值

> ID：16022337
> 
> 赞同：0
> 
> 时间：2013-04-15T18:33:29.347
> 
> 标签：mysql, sql, tinyint

表结构是这样的：

```
actions: int(10)
unlock: tinyint(1)
user_id: int(20)
name: varchar(50) 
```

我有这样的疑问：

```
SELECT SUM(actions) AS "sum_actions", SUM(unlock) AS "sum_unlock", user_id, name 
 FROM mytable AS `Results` WHERE user_id != 0 GROUP BY user_id 
 ORDER BY sum_actions DESC LIMIT 0,300 
```

这给出了`#1064 - You have an error in your SQL syntax`错误。

当我删除`SUM(unlock) AS "sum_unlock"`然后查询工作。所以我认为不可能对 TINYINT 求和。所以我改成了，`COUNT(unlock) as "count_unlock"`但这没有帮助。我不想将“解锁”表更改为 INT，因为它只有布尔值。如何计算每个 user_id 的总和的解锁表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:54:11.893

`unlock`是保留字。试试这个：

```
SELECT SUM(actions) AS "sum_actions", SUM(`unlock`) AS "sum_unlock", user_id, name 
FROM mytable AS `Results`
WHERE user_id != 0
GROUP BY user_id 
ORDER BY sum_actions DESC
LIMIT 0,300 
```

[这](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html)是保留字的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:36:31.667

您可以尝试`SUM(CAST(unlock AS INT))`将列视为`INT`列而不实际将其更改为`INT`列：

```
SELECT
    SUM(actions) AS "sum_actions",
    SUM(CAST(unlock AS INT)) AS "sum_unlock",
    user_id,
    name 
FROM
    mytable AS `Results`
WHERE
    user_id != 0
GROUP BY
    user_id,
    name
ORDER BY
    sum_actions DESC
LIMIT 0,300 
```

# sql - 如何在 SQL Server 中将数据与多项选择进行比较？

> ID：16022341
> 
> 赞同：0
> 
> 时间：2013-04-15T18:33:53.473
> 
> 标签：sql, sql-server

我以这些日期为例：

```
date1: 2013-01-01
date2: 2013-01-25 
```

`date1`如果介于这两个日期之间，我需要创建一个将产品特价插入数据库中的程序。

```
create procedure CreateOfferProduct(
@codP varchar(5),
@date1 date,
@date2 date,
)
as
if(not exists(
        select * from OfferProducts
            where Products.codP = @codP 
            and @date1 <= (select date2 from OfferProducts where codP = @codP)
    )
)
begin
       insert into OfferProducts(codP, date1, date2) 
       values(@codP, @date1, @date2);   
end 
```

但由于

```
select date2 from Products where codP = @codP 
```

返回多个值它不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:38:39.463

这是插入目标中尚不存在的多行的一种方法，而不是执行这种将值分配给变量的逐行技术（这更慢且不灵活）。

```
INSERT dbo.OfferProducts(codP, date1, date2)
  SELECT p.codP, @date, @date2
  FROM dbo.Products AS p
  WHERE codP = @codP
  AND NOT EXISTS 
  (
    SELECT 1 FROM dbo.OfferProducts 
      WHERE codP = p.codP
      AND date2 >= @date1 -- this logic seems funny
  ); 
```

如果您显示示例数据和所需结果，包括您希望从插入中排除的现有数据，我们可能会为您制定更好的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:39:37.447

您正在寻找两个时间段的交集。以下可能是您想要的：

```
. . .
if not exists (
    select *
    from OfferProducts op
    where op.codP = @codP and
          (op.date1 <= @date2 and
           op.date2 >= @date1)
  )
  . . . 
```

重叠的确切定义取决于端点是否包含在日期范围内。

在重新阅读问题时，您明确说明“如果它的 date1 在这两个日期之间”。如果是这样，请尝试：

```
if not exists (
    select *
    from OfferProducts op
    where op.codP = @codP and
          op.date1 between @date1 and @date2
  )
  . . . 
```

# root - Dbus 服务以 root 身份启动，其他用户无法访问

> ID：16022342
> 
> 赞同：0
> 
> 时间：2013-04-15T18:33:53.863
> 
> 标签：root, dbus

我有一个 dbus 服务器以 root 身份发布一些方法。

当我尝试使用小型 python 客户端访问它时，我无法访问它，直到我也以 root 身份启动客户端。

如何以系统用户身份访问以 root 身份启动的 D-Bus 服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:24:57.670

由于缺乏 D-Bus 的经验和知识，我问了这个问题。

就我而言，我使用 SessionBus 来发布我的方法。顾名思义，它是与会话相关的总线。基本上，如果我用我的会话（我的用户）启动 D-Bus 服务，那么我的用户可以访问它。

我需要的是使用 SystemBus。

从文档（[http://dbus.freedesktop.org/doc/dbus-specification.html#introduction](http://dbus.freedesktop.org/doc/dbus-specification.html#introduction)）：

> D-Bus 专为两个特定用例而设计：
> 
> *   “系统总线”，用于从系统通知用户会话，并允许系统从用户会话请求输入。
>     
>     
> *   用于实现 GNOME 和 KDE 等桌面环境的“会话总线”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T12:24:49.780

我也有同样的问题。我正在与 /etc/dbus-1/system.d 中的 .conf 文件作斗争，但文档是我读过的最糟糕的东西：http://dbus.freedesktop.org/doc/dbus-daemon.1 [。 html](http://dbus.freedesktop.org/doc/dbus-daemon.1.html)

我认为您的问题可以通过配置您的总线来解决。现在我有那个配置文件：

```
 <policy context="default">
            <allow send_interface="org.company.mybus"/>
            <allow receive_interface="org.company.mybus"
                   receive_sender="org.company.mybus"/>
    </policy> 
```

有了它，我可以实例化总线，但是当我调用导出的方法**initial_sync_data**时，会出现异常：

```
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.AccessDenied: 
    Rejected send message, 3 matched rules; type="method_call", sender=":1.254"     (uid=100108 pid=5632 comm="python applet_quota.py ") interface="(unset)" member="initial_sync_data" error name="(unset)" requested_reply="0" destination=":1.253" (uid=0 pid=5603 comm="python main.py ") 
```

# java - Java系统毫秒是否考虑闰秒？

> ID：16022346
> 
> 赞同：11
> 
> 时间：2013-04-15T18:34:20.263
> 
> 标签：java, datetime, time

java函数系统。*currentTimeMillis* () 显然返回自 1970 年 1 月 1 日以来的秒数。但是，根据[wikipedia.org/wiki/Leap_second](http://en.wikipedia.org/wiki/Leap_second)，自 1972 年以来已经有 25 个闰秒。这意味着自 1970 年 1 月 1 日以来的实际秒数比简单计算所建议的多 25 秒。系统。*currentTimeMillis* () 进行天真的计算并忽略闰秒？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T18:38:37.547

正式而言，这取决于操作系统和实现——至少对于`Date`. 来自以下文档[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)：

> 尽管 Date 类旨在反映协调世界时 (UTC)，但它可能并不完全如此，这取决于 Java 虚拟机的主机环境。几乎所有现代操作系统都假定在所有情况下 1 天 = 24 × 60 × 60 = 86400 秒。然而，在 UTC 中，大约每隔一两年就会多出一秒，称为“闰秒”。闰秒总是作为一天的最后一秒添加，并且总是在 12 月 31 日或 6 月 30 日。例如，由于添加了闰秒，1995 年的最后一分钟是 61 秒。大多数计算机时钟不够准确，无法反映闰秒的区别。

我怀疑您会发现，尽管您的计算机时钟与 UTC 大致对齐，但这是通过 NTP 或类似的方法定期校正时钟，而不是操作系统*真正*实现闰秒。

我相信 JRE 库通常*会*假设 86400 秒。它使生活*变得如此*简单，如果您无论如何都要纠正不准确的系统时钟，那么您也可以这样纠正闰秒。

您真的想计算出您感兴趣的内容。如果您需要一种使用闰秒来表示日期和时间的方法，那么标准 Java 库可能不适合您。据我所知，即使是[JSR-310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)也不再支持闰秒（这对大多数开发人员来说是一个非常明智的决定）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T18:57:18.577

POSIX 要求系统时钟不承认闰秒的存在。MS Windows 无法保证系统时钟硬件的质量（或存在），并且回避了 1 秒精度的保证。Java 不能轻易地做任何底层系统拒绝做的事情。操作系统受到[国际法规](http://www.ucolick.org/~sla/leapsecs/epochtime.html)历史的阻碍，这些法规导致一个 IEEE 标准 (PTP) 需要闰秒，而另一个 (POSIX) 标准则拒绝闰秒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-06T18:09:12.040

检查是否考虑闰秒的一种简单方法是计算从纪元到当前年份任何一天的 00:00 所经过的秒数。

如果该秒数与 00 模 60 一致，则不考虑闰秒，因为在 2013 年，您的模数应为 25（考虑过去 25 闰秒）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-31T13:48:41.100

我在[javarepl](http://javarepl.com)上做了一个小实验：

```
java> new Date(1000L * 86400 * (365 * 4 + 1) * 12)
java.util.Date res0 = Mon Jan 01 00:00:00 UTC 2018 
```

如您所见，使用了一个简单的“朴素”算术，它只考虑闰年，而不是闰秒。不会增加或减少额外的秒数。

*更新：*

新`Instant`课程也一样：

```
java> Instant.ofEpochMilli(1000L * 86400 * (365 * 4 + 1) * 12)
java.time.Instant res0 = 2018-01-01T00:00:00Z 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T18:38:42.037

查看 currentTimeMillis() 的 Javadoc，它引用[了 Date 类的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html)，其中有这样的说法：

> 尽管 Date 类旨在反映协调世界时 (UTC)，但它可能并不完全如此，这取决于 Java 虚拟机的主机环境。几乎所有现代操作系统都假定在所有情况下 1 天 = 24 × 60 × 60 = 86400 秒。然而，在 UTC 中，大约每隔一两年就会多出一秒，称为“闰秒”。闰秒总是作为一天的最后一秒添加，并且总是在 12 月 31 日或 6 月 30 日。例如，由于添加了闰秒，1995 年的最后一分钟是 61 秒。大多数计算机时钟不够准确，无法反映闰秒的区别。

所以回答你的问题：是的，闰秒被考虑在内。

# javascript - 在部署期间捆绑的 Rails 资产管道中包含外部 JS

> ID：16022349
> 
> 赞同：0
> 
> 时间：2013-04-15T18:34:30.797
> 
> 标签：javascript, ruby-on-rails, deployment, capistrano, asset-pipeline

我已经审查了这个问题 -[包括使用 Rails 3.1 资产管道的外部库](https://stackoverflow.com/questions/7235307/including-external-libraries-using-the-rails-3-1-asset-pipeline)- 这基本上是我正在寻找的一个警告：我想在资产管道中包含外部 URL，以便在部署到生产时，外部 url 与所需的其他本地文件捆绑到一个文件中。

更多细节：

我的用例是我在 GitHub 上找到了一个我喜欢的插件，并且作为开源社区的优秀成员，我想帮助回馈。我正在考虑的最省时的技术是分叉存储库，然后在开发过程中将需要该文件的本地项目指向所需 JS 文件的原始源，但当该文件与我的应用程序的其余部分捆绑在一起时我部署到登台/生产。这将允许我保持插件与父项目密切相关，但保持我自己的轨道，以便我可以决定何时合并来自基础项目的更新以及将我拥有的任何修复提交回父项目拉取请求。

话虽如此，我还没有找到任何关于如何使用当前的 rails JS 资产管道执行此操作的文档，或者是否有可能。本地的一些快速测试表明这适用于 css 文件但不适用于 js 文件。谁能确认这是否可能？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:01:42.600

我会使用类似[这个自定义 rake 任务](https://gist.github.com/barrettclark/769815)的东西。基本上，您所做的是将 rake 任务写入部署脚本的开头，但经过修改以将文件放入您的 vendor/assets 文件夹（或者您希望将其拉入资产管道的任何位置。）

这样，您在部署时提取请求的文件，但当您的资产管道捆绑所有内容时，它就在您的代码中。

这是链接腐烂的代码：

```
namespace :remote_file do
  desc "Get a file from a remote server"
  task :fetch do
  # based on http://snippets.dzone.com/posts/show/2469
  # http://farm1.static.flickr.com/92/218926700_ecedc5fef7_o.jpg
  Net::HTTP.start("farm1.static.flickr.com") do |http|
    resp = http.get("/92/218926700_ecedc5fef7_o.jpg")
    open("fun.jpg", "w") { |file| file.write(resp.body) } 
  end
end 
```

# javascript - 在页面上写数字

> ID：16022354
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:34:42.983
> 
> 标签：javascript

我正在尝试创建一个函数，将页面上的数字序列从 1 写入随机生成器选择的任何数字。如果页面上有数字 25、75 或 125，我想将它们分别更改为 25、75 和 125。这是我现在拥有的代码。你有什么建议吗？我现在被困住了。谢谢。

```
<script type="text/javascript">
        window.onload = randomNumber()

        var i = 0;
        var s = " ";
        function randomNumber() {
            var duck = Math.floor(Math.random() * 200);
            while (i < duck) {
                s += i + " ";
            }
            if ( duck = 25) {
                s+ = "twenty five";
            } else if ( duck = 75) {
                s+ = "seventy five";
            } else if ( duck = 125) {
                s+ = "one hundred and twenty five";
            }
            document.write(s);
        }

    </script>

<body style="background-color:yellow;">
    <div align="center">
        <div id="random">
            <input type="button" id="randomness" value="Click to Reveal!" onclick="randomNumber;">

        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:36:55.833

您正在构建您的字符串而没有咨询您的条件（也就是说，您的条件语句在构建您的字符串的循环之外）。您应该将`randomNumber`函数更改为：

```
function randomNumber() {
    var duck = Math.floor(Math.random() * 200);
    while (i < duck) {
        if ( duck === 25) {
          s += "twenty five";
        } else if ( duck === 75) {
          s += "seventy five";
        } else if ( duck === 125) {
          s += "one hundred and twenty five";
        } else {
          s += i + " ";
        }
        i++
    }
    document.write(s);
} 
```

# c - 如何告诉编译器展开这个循环

> ID：16022362
> 
> 赞同：1
> 
> 时间：2013-04-15T18:35:03.707
> 
> 标签：c, gcc, arm, loop-unrolling

我有以下循环，我在 ARM 处理器上运行。

```
// pin here is pointer to some part of an array
for (i = 0; i < v->numelements; i++)
{
    pe   = pptr[i];
    peParent = pe->parent;

    SPHERE  *ps = (SPHERE *)(pe->data);

    pin[0] = FLOAT2FIX(ps->rad2);
    pin[1] = *peParent->procs->pe_intersect == &SphPeIntersect;
    fixifyVector( &pin[2], ps->center ); // Is an inline function

    pin = pin + 5;
} 
```

通过循环的缓慢性能，我可以判断编译器无法展开这个循环，因为当我手动展开时，它变得非常快。我认为编译器被`pin`指针弄糊涂了。我们可以在这里使用`restrict`关键字来帮助编译器，还是`restrict`只为函数参数保留？一般来说，我们如何告诉编译器展开它而不用担心`pin`指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:12:21.720

要告诉 gcc 展开所有循环，您可以使用优化标志`-funroll-loops`。

要仅展开特定循环，您可以使用：

```
__attribute__((optimize("unroll-loops"))) 
```

有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/14251545/2040707)。

**编辑**

如果编译器在进入时无法确定循环的迭代次数，则需要使用`-funroll-all-loops`. 请注意，从[文档](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Optimize-Options.html)中：`"Unroll all loops, even if their number of iterations is uncertain when the loop is entered. This usually makes programs run more slowly."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:29:40.503

如果您将`pptr`大小扩大一倍，则可以使用该`pld`指令。

```
 __asm__ __volatile__("pld\t[%0]" :: "r" (pptr[i+1])); 
```

或者，您可能需要预加载**下一个** `peParent`和`SPHERE *ps`. ARM 上的循环开销非常小。展开循环不太可能带来显着的好处。没有循环变量常量。当您展开循环时，编译器的调度程序更有可能在使用高级数据之前获取高级数据。

You have not presented all of the code to see the data dependencies. There maybe other variables that would benefit from being *pre-loaded*. Giving a complete example would probably help everyone answer your question.

# javascript - 如何在 Javascript API 中完成安全身份验证

> ID：16022369
> 
> 赞同：5
> 
> 时间：2013-04-15T18:35:10.730
> 
> 标签：javascript, api, security, authentication, authorization

我们正在尝试为我们的服务开发一个 API，并且我们对如何完成身份验证过程感到怀疑。我们的客户端必须能够包含一个与我们的 Node.js 服务器连接的 .js 文件。这里的关键点是我们的后端必须跟踪 API 的使用，以便我们的客户将根据其使用收费。

我们的目的是为用户设计尽可能简单的 API，并使其安全。我们曾想过：

*   为每个用户创建一个 API_KEY 并在每个请求中将其与他们的域匹配。这里的问题可能是域不是最安全的选择，不是吗？我们知道域可能会在 HTTP 请求中被取代。

*   使用带有 API_KEY 和 SECRET_KEY 的 SDK 为给定会话和用户生成令牌。我一点也不喜欢这个选项，但我们更喜欢为开发人员提供更简单的解决方案，这并不意味着使用多个 API。

你有什么想法/建议/考虑/什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:05:05.610

我最喜欢你的第二个选择。除了 API_KEY 和 SECRET_KEY 你还可以做很多其他的事情。

首先确保所有请求都是通过 HTTPs 完成的。这是您可以添加的最重要的安全功能......而且它很容易做到。

其次，如果您想让事情变得超级安全，请从客户端发送时间戳。此时间戳可用于对 SECRET_KEY 进行哈希处理，为您提供防止有人重新创建数据的保护。

您的客户将在每个请求中发送以下内容：

1）时间戳 - 您将其存储在您的数据库中并拒绝任何具有较小数字的新请求

2) API_KEY - 本质上是一个用户 ID

3) 签名 - 这是 SECRET_KEY、时间戳和 API_KEY 的哈希值。（散列算法和参数顺序通常不重要。SHA1 相当不错）您的服务器可以计算此散列以验证此客户端实际上知道 SECRET_KEY。您的客户在任何时候都不应向任何人透露 SECRET_KEY。

您还可以查看 OAuth 标准。我相信一般来说 NodeJS 和 Javascript 都有它的库。 [NodeJS OAuth 提供者](https://stackoverflow.com/questions/6822840/is-there-a-node-oauth-server-implementation)

# mysql - MySQL：加入很多表

> ID：16022371
> 
> 赞同：2
> 
> 时间：2013-04-15T18:35:12.210
> 
> 标签：mysql, sql, join

我的 MySQL 数据库中有这些表，用于一个简单的大学图书馆应用程序（出于显而易见的原因，我将它们简化了一点）：

```
SELECT * FROM language;
╔═════════════╦══════════╗
║ language_id ║ language ║
╠═════════════╬══════════╣
║          11 ║  English ║
║          12 ║  Russian ║
║          13 ║   German ║
╚═════════════╩══════════╝

SELECT * FROM subject;
╔════════════╦═════════════╗
║ subject_id ║   subject   ║
╠════════════╬═════════════╣
║         21 ║ Mathematics ║
║         22 ║     History ║
║         23 ║   Chemistry ║
║         24 ║     Physics ║
╚════════════╩═════════════╝

SELECT publisher_id, publisher FROM publisher;
╔══════════════╦═══════════════╗
║ publisher_id ║   publisher   ║
╠══════════════╬═══════════════╣
║           31 ║ Berkley Books ║
║           32 ║       Penguin ║
╚══════════════╩═══════════════╝

SELECT author_id, first_name, last_name FROM author;
╔═══════════╦════════════╦═══════════╗
║ author_id ║ first_name ║ last_name ║
╠═══════════╬════════════╬═══════════╣
║        41 ║        Joe ║    Schmoe ║
║        42 ║       John ║     Smith ║
╚═══════════╩════════════╩═══════════╝

SELECT book_id, title, language_id, subject_id, publisher_id FROM book;
╔═════════╦═══════╦═════════════╦════════════╦══════════════╗
║ book_id ║ title ║ language_id ║ subject_id ║ publisher_id ║
╠═════════╬═══════╬═════════════╬════════════╬══════════════╣
║       1 ║     A ║          11 ║         22 ║           31 ║
║       2 ║     B ║          13 ║         24 ║           32 ║
╚═════════╩═══════╩═════════════╩════════════╩══════════════╝

SELECT book_id, author_id FROM book_author;
╔═════════╦════════════╗
║ book_id ║ author_id  ║
╠═════════╬════════════╣
║       1 ║         41 ║
║       1 ║         42 ║
║       2 ║         41 ║
╚═════════╩════════════╝

SELECT book_copy_id, book_id FROM book_copy;
╔══════════════╦═════════╗
║ book_copy_id ║ book_id ║
╠══════════════╬═════════╣
║            1 ║       1 ║
║            2 ║       1 ║
║            3 ║       1 ║
║            4 ║       2 ║
║            5 ║       2 ║
╚══════════════╩═════════╝ 
```

我有一个看起来像这样的查询（我把它展示给你以防万一）：

```
SELECT b.book_id,
       b.title,
       GROUP_CONCAT(CONCAT_WS(' ', a.last_name,
                                   a.first_name)
                              ORDER BY a.last_name
                              SEPARATOR ', ') AS authors,
       l.language,
       s.subject,
       p.publisher
FROM   book AS b
       LEFT JOIN book_author AS ba
              ON b.book_id = ba.book_id
       LEFT JOIN author AS a
              ON ba.author_id = a.author_id
       LEFT JOIN language AS l
              ON b.language_id = l.language_id
       LEFT JOIN subject AS s
              ON b.subject_id = s.subject_id
       LEFT JOIN publisher AS p
              ON b.publisher_id = p.publisher_id
GROUP BY b.title ASC;

╔═════════╦═══════╦════════════════════════╦══════════╦═════════╦═══════════════╗
║ book_id ║ title ║         authors        ║ language ║ subject ║   publisher   ║
╠═════════╬═══════╬════════════════════════╬══════════╬═════════╬═══════════════╣
║       1 ║     A ║ Joe Schmoe, John Smith ║  English ║ History ║ Berkley Books ║
║       2 ║     B ║             John Smith ║   German ║ Physics ║       Penguin ║
╚═════════╩═══════╩════════════════════════╩══════════╩═════════╩═══════════════╝ 
```

现在，我想要这个选择：

```
╔══════════════╦═══════╦════════════════════════╦══════════╦═════════╦═══════════════╗
║ book_copy_id ║ title ║         authors        ║ language ║ subject ║   publisher   ║
╠══════════════╬═══════╬════════════════════════╬══════════╬═════════╬═══════════════╣
║            1 ║     A ║ Joe Schmoe, John Smith ║  English ║ History ║ Berkley Books ║
║            2 ║     A ║ Joe Schmoe, John Smith ║  English ║ History ║ Berkley Books ║
║            3 ║     A ║ Joe Schmoe, John Smith ║  English ║ History ║ Berkley Books ║
║            4 ║     B ║             John Smith ║   German ║ Physics ║       Penguin ║
║            5 ║     B ║             John Smith ║   German ║ Physics ║       Penguin ║
╚══════════════╩═══════╩════════════════════════╩══════════╩═════════╩═══════════════╝ 
```

我也有这两个表：

```
SELECT student_id, first_name, last_name FROM student;
╔════════════╦════════════╦═══════════╗
║ student_id ║ first_name ║ last_name ║
╠════════════╬════════════╬═══════════╣
║         81 ║        Bob ║     Dylan ║
║         82 ║        Jim ║    Carrey ║
╚════════════╩════════════╩═══════════╝

SELECT student_id, book_copy_id FROM loan;
╔════════════╦══════════════╗
║ student_id ║ book_copy_id ║
╠════════════╬══════════════╣
║         81 ║            1 ║
║         81 ║            4 ║
║         82 ║            5 ║
╚════════════╩══════════════╝ 
```

我需要编写一个产生此选择的查询：

```
-- 'a' stands for 'the quantity of book copies that are available for a loan'
-- 't' stands for 'the total quantity of book copies'
╔═══╦═══╦═══════╦════════════════════════╦══════════╦═════════╦═══════════════╗
║ a ║ t ║ title ║         authors        ║ language ║ subject ║ publisher     ║
╠═══╬═══╬═══════╬════════════════════════╬══════════╬═════════╬═══════════════╣
║ 2 ║ 3 ║     A ║ Joe Schmoe, John Smith ║  English ║ History ║ Berkley Books ║
║ 0 ║ 2 ║     B ║             John Smith ║   German ║ Physics ║       Penguin ║
╚═══╩═══╩═══════╩════════════════════════╩══════════╩═════════╩═══════════════╝ 
```

我希望我已经用图表非常明确地概述了它。请让我为这两个问题编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:45:49.000

您需要加入`book_copy`并更改`group by`条件。这解决了您的第一个问题：

```
SELECT bc.book_copy_id,
       b.title,
       GROUP_CONCAT(CONCAT_WS(' ', a.last_name,
                                   a.first_name)
                              ORDER BY a.last_name
                              SEPARATOR ', ') AS authors,
       l.language,
       s.subject,
       p.publisher
FROM   book AS b
       LEFT JOIN book_author AS ba
              ON b.book_id = ba.book_id
       LEFT JOIN author AS a
              ON ba.author_id = a.author_id
       LEFT JOIN language AS l
              ON b.language_id = l.language_id
       LEFT JOIN subject AS s
              ON b.subject_id = s.subject_id
       LEFT JOIN publisher AS p
              ON b.publisher_id = p.publisher_id
       left join book_copy bc
              on b.book_id = bc.book_id
GROUP BY bc.book_copy_id ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:59:08.837

这应该可以解决问题，但不确定它有多有效。

请注意，我将 GROUP BY 更改为 book_id 而不是 title。如果两本书的标题相同，它们仍然是不同的书（不确定这是否会发生）。

```
SELECT COUNT(DISTINCT bc.book_copy_id) - COUNT(DISTINCT lo.book_copy_id) AS a,
   COUNT(DISTINCT bc.book_copy_id) AS t,
   b.book_id,
   b.title,
   GROUP_CONCAT(DISTINCT CONCAT_WS(' ', a.last_name, a.first_name) ORDER BY a.last_name SEPARATOR ', ') AS authors,
   l.language,
   s.subject,
   p.publisher
FROM   book AS b
LEFT JOIN book_author AS ba ON b.book_id = ba.book_id
LEFT JOIN author AS a ON ba.author_id = a.author_id
LEFT JOIN language AS l ON b.language_id = l.language_id
LEFT JOIN subject AS s ON b.subject_id = s.subject_id
LEFT JOIN publisher AS p ON b.publisher_id = p.publisher_id
LEFT JOIN book_copy AS bc ON (bc.book_id = b.book_id)
LEFT JOIN loan AS lo ON (lo.book_copy_id = bc.book_copy_id)
GROUP BY b.book_id; 
```

- 编辑

请注意，GROUP_CONCAT 中有一个 DISTINCT。如果两个作者有相同的名字，它只会被列出一次。不确定这是否重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:06:00.407

看起来我解决了第一个问题。请看一下它是否看起来合法（但感觉它工作得很好）：

```
SELECT bc.book_copy_id,
       subquery.title,
       subquery.authors,
       subquery.subject,
       subquery.language,
       subquery.publisher
FROM   book_copy AS bc
       LEFT JOIN (SELECT b.book_id,
                         b.title,
                         GROUP_CONCAT(CONCAT_WS(' ', a.last_name,
                                                     a.first_name)
                                                ORDER BY a.last_name
                                                SEPARATOR ', ') AS authors,
                         l.language,
                         s.subject,
                         p.publisher
                  FROM   book AS b
                         LEFT JOIN book_author AS ba
                                ON b.book_id = ba.book_id
                         LEFT JOIN author AS a
                                ON ba.author_id = a.author_id
                         LEFT JOIN language AS l
                                ON b.language_id = l.language_id
                         LEFT JOIN subject AS s
                                ON b.subject_id = s.subject_id
                         LEFT JOIN publisher AS p
                                ON b.publisher_id = p.publisher_id
                  GROUP BY b.title) AS subquery
              ON bc.book_id = subquery.book_id
ORDER BY subquery.title 
```

* * *

现在我完成了第二个问题。这是解决方案：

```
SELECT subquery.book_id,
      (COUNT(bc.book_copy_id) - (SELECT COUNT(l.book_copy_id)
                                 FROM   loan AS l
                                 WHERE  l.checked_in IS NULL AND
                                        l.book_copy_id IN (SELECT bc.book_copy_id
                                                           FROM   book_copy AS bc
                                                           WHERE  bc.book_id = subquery.book_id))) AS available,
       COUNT(bc.book_copy_id) AS total,
       subquery.title,
       subquery.authors,
       subquery.subject,
       subquery.language,
       subquery.publisher
FROM   book_copy AS bc
       LEFT JOIN (SELECT b.book_id,
                         b.title,
                         GROUP_CONCAT(CONCAT_WS(' ', a.last_name,
                                                     a.first_name)
                                                ORDER BY a.last_name
                                                SEPARATOR ', ') AS authors,
                         l.language,
                         s.subject,
                         p.publisher
                  FROM   book AS b
                         LEFT JOIN book_author AS ba
                                ON b.book_id = ba.book_id
                         LEFT JOIN author AS a
                                ON ba.author_id = a.author_id
                         LEFT JOIN language AS l
                                ON b.language_id = l.language_id
                         LEFT JOIN subject AS s
                                ON b.subject_id = s.subject_id
                         LEFT JOIN publisher AS p
                                ON b.publisher_id = p.publisher_id
                  GROUP BY b.title) AS subquery
              ON bc.book_id = subquery.book_id
GROUP BY subquery.book_id
ORDER BY subquery.title; 
```

# c++ - Min Heap Delete Min 乱序？

> ID：16022373
> 
> 赞同：0
> 
> 时间：2013-04-15T18:35:23.267
> 
> 标签：c++, heap, dijkstra

抱歉，这里是初学者编码器。我在网上找到了一个最小堆实现并将其放入我的加权图中。

```
class Heap : public weightedGraph
{
public: Heap();
    ~Heap();
    void insert(double element);
    double deletemin()
    {
        double min = heap.front();
        heap[0] = heap.at(heap.size()-1);
        heap.pop_back();
        heapifydown(0);
        return min;
    };

    void print();   

    int size()
    {return heap.size();}

private:
 int left(int parent);
 int right(int parent);
 int parent(int child);
 void heapifyup(int index);
 void heapifydown(int index);

private:
 vector<double> heap;
};

Heap::Heap() {}

Heap::~Heap()
void Heap::insert(double element)
{
   heap.push_back(element);
   heapifyup(heap.size()-1);
}

void Heap::heapifyup(int index)
{
 while((index>0) && (parent(index) >=0) && (heap[parent(index)] > heap[index]))
 {
     double tmp = heap[parent(index)];
     heap[parent(index)] = heap[index];
     heap[index] = tmp;
     index = parent(index);
 }
}

void Heap::heapifydown(int index)
{
 int child = left(index);

 if((child > 0) && (right(index) > 0) && (heap[child]>heap[right(index)]))
 {
     child = right(index);
 }
 if(child > 0)
 {
    double tmp = heap[index];
    heap[index] = heap[child];
    heap[child] = tmp;
    heapifydown(child);
 }
}

int Heap::left(int parent)
{
 int i = ( parent <<1) + 1; 
 return(i<heap.size()) ? i : - 1;
}

int Heap::right(int parent)
{
 int i = ( parent <<1) + 2; 
 return(i<heap.size()) ? i : - 1;
}

int Heap::parent(int child)
{
 if(child != 0)
 {
     int i = (child - 1) >>1;
     return i;
 }
 return -1;
} 
```

添加所有顶点后，当我运行 deletemin 直到堆为空时，但有些顶点不按顺序排列。

41 153 288 292 491 778 1842 1869 2995 3035 3902 4664 4827 5436 5447 5705 6334 6868 7711 8723 8942 9040 9741 9894 9961 11478 11538 11942 12316 12382 12859 14604 14771 15141 15724 17035 17421 17673 18467 **19264** 18716 19169 19718 19912 21726 22190 22648 23281 23811 24464 25667 **20037** 26299 26500 **25547** ***16827*** 26962 27644 **19895** 28145 **27529 28253** 28703 29358 30106 30333 31322 32391 32662 32757

可能还有一些其他的。有什么理由会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T22:58:32.773

检查您的 heapifydown 逻辑。你不是在比较父母的体重和孩子的体重你只是盲目地交换。你只是在比较孩子的体重。

# javascript - 无需重新加载页面即可重置 innerHTML

> ID：16022374
> 
> 赞同：2
> 
> 时间：2013-04-15T18:35:23.693
> 
> 标签：javascript, forms, function, reset

我写了一个小性格测验。从下拉菜单中选择答案并提交表单 ( `id="quizgenerator`) 后，表单本身将在以下代码行的帮助下被结果替换：

```
document.getElementById('quizgenerator').innerHTML = "<p id='result'  
align='center'><b>" + result + "</b></p>"; 
```

到目前为止，一切都很好。现在到了我无法弄清楚的棘手部分：我希望人们能够“返回”表格并再次参加测验，更改他们的答案并重新提交以查看他们最终可能会得到什么结果，然后无需重新加载页面.

我无法向表单添加重置按钮，因为表单已被结果替换。所以现在我在表单外添加了一个重置​​按钮：

```
<input type="reset" value="Reset" id="submit" onClick="history.go(0);"> 
```

这有效，但它重新加载页面。有没有办法在不重新加载的情况下重置 innerHTML 部分？

我已经在网上搜索了答案，但在所有这些情况下，重置按钮始终是表单的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:55:17.980

这是一些说明我的评论的简单代码。

[http://jsfiddle.net/Bk8rH/](http://jsfiddle.net/Bk8rH/)

```
$("#formsubmit").click(function () {
    $("#myform").hide();
    $("#myresults").text($("#mytext").val());
    $("#myresultsWrap").show();
});
$("#toform").click(function () {
    $("#myresultsWrap").hide();
    $("#myform").show();
}); 
```

当然你可以让它更漂亮，添加你自己的数据，如果用户回到它，可能会清除表单，等等。但这应该给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:38:38.573

如果不重新加载，您将无法恢复到以前的 HTML 状态。但是，您可以做的与替换表单时所做的相同。只有这一次您将结果替换为原始表单。您可以选择在该部分代码中再次添加相同的表单代码，或者您可以保存 quizgenerator 元素的 innerHTML，将其保存在变量中，并在您想要“重置”时将其放回原处。

# javascript - fancybox 2 - 在运行时提供图像列表

> ID：16022378
> 
> 赞同：0
> 
> 时间：2013-04-15T18:35:45.357
> 
> 标签：javascript, jquery, fancybox, fancybox-2

是的，我是 JS 新手……我承认。我有一个页面，其中包含地址列表和旁边的各种图标。一个图标应该会显示该地址的图片库 2。照片本身最初并未显示在页面上，而是按需加载。我正在尝试传递地址 ID 和照片数量以生成列表。但是，当我调用它时，它只是用 PhotoList 的字符串值而不是照片来调出花式框。

```
function DisplayPhotos(ID, PhotoCount) {
    var PhotoList = '';
    for (k = 1; k <= PhotoCount; k++) {
        PhotoList += "{href: 'http://mydomain.com/images/image-" + MUID + "-" + k + ".jpg'},";
    }

    $.fancybox.open([PhotoList], {
        padding: 0,
        helpers: {
            title: {
                type: 'outside'
            },
            thumbs: {
                width: 68,
                height: 50
            }
        }
    });
    return false;
} 
```

如果我手动将它们输入到函数中，它就可以工作。现在，我被困住了......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:46:07.383

原来这是一个类型转换问题。Fancybox 期待一个数组，但接收到一个字符串。查看更新的代码：

```
function DisplayPhotos(MUID, PhotoCount) {

    var PhotoList = '';

    for(k=1;k <= PhotoCount; k++){

        PhotoList += "http://mydomain.com/images/image-"+MUID+"-"+k+".jpg,";

    }

    PhotoList = PhotoList.substring(0, PhotoList.length - 1);
    var PhotoArray = PhotoList.split(',');

    $.fancybox.open(

        PhotoArray

    , {

        padding:0,
        helpers:{

            title:{
                type:'outside'
            },
            thumbs:{
                width:68,
                height:50
            }
        }

    });

    return false;

} 
```

# android - 保持图像视图固定在线性布局android的右侧

> ID：16022379
> 
> 赞同：0
> 
> 时间：2013-04-15T18:35:45.453
> 
> 标签：android, android-layout

我有一个标题，它是一个线性布局，有一个文本视图和一个图像视图。

```
< LinearLayout
<TextView 
  android:layout_weight="8"
  ...
  / >
 <ImageView
  android:layout_weight="2"
 ...
 /> 
< /LinearLayout > 
```

在纵向模式下，一切都很完美，但在横向模式下，由于标题的大小增加，图像视图向左移动了一点。

无论方向如何，我都希望能够将图像视图固定到标题的右侧。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:00:41.680

只需将 ImageView 的 layout_width 和 layout_height 设置为“wrap_content”并删除 layout_weight。这样，TextView 将填充 ImageView 左侧的所有可用空间。

```
<LinearLayout
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="horizontal">
     <TextView 
         android:layout_weight="1"
         android:layout_width="0dp"
         android:layout_height="match_parent"
     />
     <ImageView 
         android:src="@drawables/my_image"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"  
     />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:31:41.937

添加以下代码，它将所有可用空间分配给 texView，将 imageView 移动到布局的右侧：

```
< LinearLayout
<TextView 
android:layout_weight="1"
...
/ >
<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/> 
< /LinearLayout > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:55:31.657

用这个

```
< LinearLayout
...>
<TextView 
  android:layout_weight="8"
  ...
  / >
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="2"
    >
    <ImageView
        android:alignParentRight="true"
         ...
    />    
</RelativeLayout>

< /LinearLayout > 
```

# php - 从 php 中的另一个 xml 文件的内容更改 xml 文件字符串值

> ID：16022381
> 
> 赞同：0
> 
> 时间：2013-04-15T18:36:05.163
> 
> 标签：php, xml

我的问题可能很简单。但我从来没有对 XML 感兴趣。所以这对我来说是无法理解的。有一个安装程序，它的语言文件是xml格式。土耳其语文件比其他语言非常窄。所以我想将“turkish.xml”导入“general.xml”。在“general.xml”文件中，如果有相同的节点，节点值将被改变。如果没有，请保持不变。例如，这是我的 turkish.xml 的内容。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <DICTIONARY type="singlelanguage" lang="tr" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dictionary.xsd">
      <STRING id="AI.Directory.DefaultDefaultDir" value="Yeni Klasör"/>
      <STRING id="AI.Directory.Default32BitName" value="Otuziki bit"/>
    </DICTIONARY> 
```

在“general.xml”文件下方：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<DICTIONARY type="singlelanguage" lang="neutral" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dictionary.xsd">
  <STRING id="AI.Directory.DefaultDefaultDir" value="New Folder"/>
  <STRING id="AI.Directory.Default32BitName" value="32-bit"/>
  <STRING id="AI.DuplicateFile.DestName" value="Duplicate%s of %s"/>
  <STRING id="AI.Feature.DefaultTitle" value="Feature"/>
  </DICTIONARY> 
```

如果我管理它，它将是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<DICTIONARY type="singlelanguage" lang="neutral" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dictionary.xsd">
  <STRING id="AI.Directory.DefaultDefaultDir" value="Yeni Klasör"/>
  <STRING id="AI.Directory.Default32BitName" value="Otuziki bit"/>
  <STRING id="AI.DuplicateFile.DestName" value="Duplicate%s of %s"/>
   <STRING id="AI.Feature.DefaultTitle" value="Feature"/>
  </DICTIONARY> 
```

我不知道我将如何管理它。亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:58:56.450

您可以尝试将这两个文件加载到 DOMDocument 中，然后循环浏览通用文件。在循环内部，您可以查看是否有土耳其值并替换它。见[http://www.php.net/manual/en/book.dom.php](http://www.php.net/manual/en/book.dom.php)

我会试一试。我没有测试过这段代码，但希望你能设法修复它。应该是这样的。

编辑我没有在循环中使用 $result 值，现在试试

```
 <?php
    $turkish = new DOMDocument();
    $turkish->load('turkish.xml');

    $general = new DOMDocument();
    $general->load('general.xml');   

    $strings = $general->getElementsByTagName('STRING');
    $turkstrings = $turkish->getElementsByTagName('STRING');
    foreach($strings as $string) {
        foreach($turkstrings as $turk) {
            if($turk->getAttribute("id") == $string->getAttribute("id")) {
                $string->setAttribute("value", $turk->getAttribute("value"));
            }
        }
    }
    echo $general->saveXML();
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:08:29.210

我不确定您要求的内容是否真的有用，因为该软件应该已经使用默认设置完成了不完整的翻译文件。

但在技术上肯定是可能的，例如通过土耳其 XML 并更改通用 XML 中的每个相应条目：

```
$new = simplexml_load_string($general);

$elements = simplexml_load_string($turkish)->STRING;

foreach ($elements as $element)
{
    $xpath = sprintf('//STRING[@id="%s"]', $element['id']);

    if (list($found) = $new->xpath($xpath))
    {
        $found['value']    = $element['value'];
        $found['imported'] = 'turkish';
    }
}

$new->asXML('php://output'); 
```

此示例使用[PHP的*SimpleXML* 库](http://php.net/SimpleXML)。输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<DICTIONARY xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="singlelanguage" lang="neutral" xsi:noNamespaceSchemaLocation="dictionary.xsd">
  <STRING id="AI.Directory.DefaultDefaultDir" value="Yeni Klasör" imported="turkish"/>
  <STRING id="AI.Directory.Default32BitName" value="Otuziki bit" imported="turkish"/>
  <STRING id="AI.DuplicateFile.DestName" value="Duplicate%s of %s"/>
  <STRING id="AI.Feature.DefaultTitle" value="Feature"/>
</DICTIONARY> 
```

[在行动中看到它。](http://eval.in/16441)

# jquery - 根据单元格中的数据库数据更改表格数据单元格的颜色

> ID：16022385
> 
> 赞同：3
> 
> 时间：2013-04-15T18:36:19.860
> 
> 标签：jquery, json

我有一个内置在 jquery Mobile 中的 HTML 页面，它使用 AJAX、JSON 和 php 从数据库中提取数据。然后它遍历数据库/表，并填充表。一切正常，一切顺利。但是，一旦填充了表格数据单元格，我似乎无法弄清楚如何更改表格数据单元格背景颜色。IE：对于表中的每条记录，一旦代码完成，就有一个“状态”文本字段，其文本值为“正在运行”或“取消”。我希望显示“正在运行”或“已取消”的单元格为绿色或红色，具体取决于值。红色表示已取消，绿色表示正在运行。如果你能帮忙，请告诉我。该表由 AJAX、JSON、PHP MYSQL 数组填充，因此我的表的输出如下所示：

```
for(var i = 0; i < data.length; i++) {
     $('#output').append("<table width=100%><tr><td width=20%><b>"+data[i][1]+"</b></td><td width=20%><b>"+data[i][8]+"</b></td><td width=20%><b>"+data[i][2]+"</b></td><td class=statusClass width=20%><b>"+data[i][3]+"</b></td><td width=20%><b>"+data[i][4]+"</b></td></tr></table>");      
    } 
```

如果您想查看此页面的所有代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:49:19.200

试试这个：

```
$("#output td:contains(RUNNING)").attr("style","background-color:green");
$("#output td:contains(CANCELLED)").attr("style","background-color:red"); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/LfnQs/](http://jsfiddle.net/hescano/LfnQs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:53:04.000

您可以`class`根据您的值（“RUNNING”或“CANCELLED”）即时应用属性。
由于您使用的是`<table>`element 和 jQuery，它可能看起来像这样：

```
$row = $('<tr />');
$row.append($('<td />', {
    text: item[1],
    class: item[0]
}));
$('#sampleTable').append($row); 
```

[**小提琴示例**](http://jsfiddle.net/Lq6E4/)

# mysql - 为什么这个 ActiveRecord 查询没有歧义？

> ID：16022386
> 
> 赞同：0
> 
> 时间：2013-04-15T18:36:22.847
> 
> 标签：mysql, ruby-on-rails, activerecord

在 Rails 3 中，我使用以下代码来查询 MySQL 数据库：

```
MyData.joins('JOIN (SELECT id, name FROM sellers) AS Q
  ON seller_id = Q.id').
  select('*').
  joins('JOIN (SELECT id, name FROM users) AS T 
  ON user_id = T.id'). 
  select("*").each do |record| 
  #.......... 
```

然后，再往下一点，我尝试使用以下代码访问“名称”：（请注意，卖家和用户都有一个名称列）。

```
str = record.name 
```

这条线给了我一个“用户名”而不是“卖家名”，但它不应该什么都不给吗？由于我用一个名称列加入了多个表，我不应该得到像“列'名称'不明确”这样的错误吗？为什么没有发生这种情况？

顺便说一句，无论我是否包含第一个“select（'*'）”行，代码的行为方式都是相同的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:05:15.010

首先，没有理由调用`select`两次——实际上只会使用最后一次调用。其次，您不应该使用`select("*")`，因为 SQL 数据库（和 Rails）不会为您重命名不明确的列。相反，对您需要的额外列使用显式命名：

```
MyData.joins('JOIN (SELECT..) AS Q ON ...', 'JOIN (SELECT...) AS T ON ...').
       select('my_datas.*, T.name as t_name, Q.name as q_name').
       each do |record|
  # do something
end 
```

因此，没有理由在您的 JOIN 语句中进行子查询：

```
MyData.joins('JOIN sellers AS Q ON ...', 'JOIN users AS T ON ...'). 
```

最后，您应该已经为和`belongs_to`建立了关联。这意味着你可以这样做：`seller``user`

```
MyData.joins(:seller, :user).
       select("my_datas.*, sellers.name as seller_name, users.name as user_name").
       each do |record|
  # do something
end 
```

现在你可以打电话了`record.seller_name`，`record.user_name`没有任何歧义。

# php - 获取自mysql查询中特定日期以来的小时数作为int

> ID：16022390
> 
> 赞同：2
> 
> 时间：2013-04-15T18:36:33.737
> 
> 标签：php, mysql, datetime, time, formatting

所以，我有一个问题，我正试图解决这个问题。本质上，我有一个数据库，显示计算机上次连接到数据库的时间。我应该以百分比计算计算机的正常运行时间（自首次连接以来连接的小时数/自首次连接以来的总小时数。）

我所拥有的只是 mysql 数据库中的单个 DateTime 字段。那时，我可以执行“从 ID="1" order by TIME asc limit 1 的数据库中选择 TIME”来获取最旧的日期，但是我将如何获取自该 DateTime 对象以来的小时数？

期望的输出类似于“95%”——可能是 19 / 20 之类的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:06:35.257

利用

```
timestampdiff(HOUR,NOW(),OLDESTTIME) as uphours 
```

这会给你两个日期时间之间的小时差

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:41:38.720

将您的[DateTime 转换为 timestamp](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)，从最新的中减去最旧的，然后将结果除以 60 并再次除以 60：

```
(LatestTime-OldestTime)/60/60 
```

应该给你他们之间的小时数。

# html - CSS样式只有“this”元素

> ID：16022392
> 
> 赞同：5
> 
> 时间：2013-04-15T18:36:37.547
> 
> 标签：html, css, css-selectors

我有一个包含一个项目的列表，当悬停在该项目上时，它应该突出显示。我的工作正常如下：

```
li.test:hover
{
   text-decoration: underline
} 
```

但是，此列表项包含另一个列表，并且使用上述 CSS 规则，子列表中的所有列表项也都带有下划线。我只希望第一个`li`（实际上悬停在上面的那个）下划线。我确实尝试过使用子选择器，但我没有找到任何有效的方法（尽管它可能真的很明显）。

如何将样式仅应用于当前元素而不应用于其子元素？

jsfiddle：http: [//jsfiddle.net/Mansfield/2CtFW/](http://jsfiddle.net/Mansfield/2CtFW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:40:33.970

您可以欺骗它，但将您的文本内容包装到其他不包装其子节点的节点中[http://jsfiddle.net/2CtFW/7/](http://jsfiddle.net/2CtFW/7/)

这避免了级联规则，因为内部列表不包含在接收`text-decoration`规则的元素中。最初，我认为这是一个 hack，但考虑到您无法设置文本元素的样式，而这正是您在这种情况下想要做的，我认为这是实现您想要的唯一方法。

```
<ul>
    <li>
        <span>Item1</span>
        <ul>
            <li><span>Item2</span></li>
        </ul>
    </li>
<ul>

li>span:hover
{
    text-decoration: underline
} 
```

# asp.net - 计算日期百分比 (SQL Server)

> ID：16022394
> 
> 赞同：0
> 
> 时间：2013-04-15T18:36:49.337
> 
> 标签：asp.net, tsql, sql-server-2012, percentage

我正在尝试在 SQL Server 2012 Express 中添加一个自动计算的字段，该字段通过使用以下方法计算日期差异来存储项目完成的百分比：

```
ALTER TABLE dbo.projects
ADD PercentageCompleted AS (select COUNT(*)  FROM projects WHERE project_finish > project_start) * 100 / COUNT(*) 
```

但我收到此错误：

```
Msg 1046, Level 15, State 1, Line 2
Subqueries are not allowed in this context. Only scalar expressions are allowed. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:38:05.170

我不认为你能做到这一点。您可以编写一个触发器来解决它或将其作为更新语句的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:43:28.647

即使它是可能的（它不是），它无论如何也不是你想要作为计算列的东西：

1.  每一行的值都相同
2.  每次插入/更新后都需要更新整个表

您应该考虑在 a`stored procedure`或 user中执行此操作`defined function`。甚至在应用程序的业务逻辑中更好，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:48:27.683

您是否将“percentageCompleted”作为重复的列值存储在与项目数据相同的表中？

如果是这种情况，我不建议这样做，因为它会复制数据。

如果您不关心重复数据，请尝试将步骤分开，如下所示：

`ALTER TABLE dbo.projects ADD PercentageCompleted decimal(2,2)`--您也可以将其存储为 varchar 或 char

`declare @percentageVariable decimal(2,2)`

`select @percentageVariable = (select count(*) from projects where Project_finish > project_start) / (select count(*) from projects)`-- 需要通过完成/总获得比率

```
update projects
set PercentageCompleted = @percentageVariable 
```

这将在该表中为您提供一个十进制值，然后您可以在选择时对其进行格式化，如果您希望 % + PercentageCompleted * 100

# c++ - C++做while循环

> ID：16022402
> 
> 赞同：5
> 
> 时间：2013-04-15T18:37:17.663
> 
> 标签：c++, while-loop, do-while

我有一个包含 10 个项目的向量（为简单起见，所有同一个类都称为“a”）。我想要做的是检查'A'不是a）隐藏墙壁或b）隐藏另一个'A'。我有一个碰撞功能可以做到这一点。

这个想法只是让这个循环类通过并将“A”移动到下一个位置，如果该药水引起了碰撞，那么它需要在屏幕上给自己一个新的随机位置。因为屏幕很小，所以很有可能将元素放在另一个屏幕上（或墙顶等）。代码的逻辑在我的脑海中运行良好 - 但调试代码时对象只是卡在循环中，并保持在相同的位置。'A' 应该在屏幕上移动，但它保持不动！

当我注释掉 Do while 循环并将“MoveObject()”函数向上移动时，代码完美地工作，“A”在屏幕上移动。只是当我尝试为其添加额外功能时，它才不起作用。

```
 void Board::Loop(void){

        //Display the postion of that Element. 
        for (unsigned int i = 0; i <= 10; ++i){

            do {

                if (checkCollisions(i)==true){
                moveObject(i); 
                }
                else{
                    objects[i]->ResetPostion();

                }

            }
            while (checkCollisions(i) == false);
            objects[i]->SetPosition(objects[i]->getXDir(),objects[i]->getYDir());
        }

} 
```

下面的类是碰撞检测。这个我稍后会展开。

```
 bool Board::checkCollisions(int index){

    char boundry = map[objects[index]->getXDir()][objects[index]->getYDir()];

    //There has been no collisions - therefore don't change anything 
    if(boundry == SYMBOL_EMPTY){
        return false;
    }
    else{
        return true;

    }

} 
```

任何帮助将非常感激。我会给你买一杯虚拟啤酒:-)

谢谢

编辑：

ResetPostion -> 这将给元素 A 在屏幕上的随机位置 moveObject -> 这将查看对象的方向并适当地调整 x 和 Y 线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:51:14.420

我猜你需要：

```
do { ...
... } while (checkCollisions(i)); 
```

另外，如果你有 10 个元素，那么`i = 0; i < 10; i++`

顺便说一句。不要写`if (something == true)`，简单地`if (something)`或`if (!something)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:49:57.423

```
for (unsigned int i = 0; i <= 10; ++i){ 
```

是错误的，因为这是十一个项目的循环，使用

```
for (unsigned int i = 0; i < 10; ++i){ 
```

反而。

您没有定义“不起作用”是什么意思，所以这就是我现在可以提供的所有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:36:46.133

这里似乎对基本的语言结构和逻辑流程有很多困惑。编写一些非常简单的测试应用程序来练习不同的语言功能可能会对您有很大帮助。（如果你有的话，一个单步调试器也是如此）

`do/while()`是一个相当高级的功能，有些人在整个职业生涯中从未使用过，请参阅：[do...while vs while](https://stackoverflow.com/questions/3347001/do-while-vs-while)

我建议在`while`使用. 您的第一眼应该是当您刚刚完成一个or循环并意识到如果您稍微更改执行顺序，您可以节省大量重复的初始化代码。（就我个人而言，我什至不再使用它，我只是使用了一个迭代器，因为它让我可以在一个循环中预先**和发布代码）**`if/else``for``do``while``for``do``while(true)/break`

 **我认为这简化了您要完成的工作：

```
void Board::Loop(void) {
    //Display the postion of that Element. 
    for (unsigned int i = 0; i < 10; ++i) {
        while(IsGoingToCollide(i))  //check is first, do while doesn't make sense
            objects[i]->ResetPosition();
        moveObject(i);   //same as ->SetPosition(XDir, YDir)?
                         //either explain difference or remove one or the other
    }
} 
```

这个函数名对我来说似乎模棱两可：

```
bool Board::checkCollisions(int index) { 
```

我建议将其更改为：

```
// returns true if moving to next position (based on inertia) will 
// cause overlap with any other object's or structure's current location
bool Board::IsGoingToCollide(int index) { 
```

相反`checkCollisions()`也可能意味着：

```
// returns true if there is no overlap between this object's
// current location and any other object's or structure's current location
bool Board::DidntCollide(int index) { 
```

最后说明：仔细检查`->ResetPosition()`将事物**置于**边界内。**

# c++ - 结构类型向量的向量迭代器错误

> ID：16022405
> 
> 赞同：1
> 
> 时间：2013-04-15T18:37:38.187
> 
> 标签：c++, vector, struct, iterator

我正在尝试使用向量迭代器打印出向量中的所有元素。我查找了类似的问题，但发布的解决方案似乎对我不起作用。这是代码：

```
void printPerms()
{
   for(vector<process>::iterator it = allProcesses.begin(); it != allProcesses.end(); it++)
   {
      for(int i = 0; i < numResourceTypes; i++)
      {
         cout << (static_cast<process*>(*it).need) << (static_cast<process>(*it)).allocated <<endl;
      }
   }
} 
```

还有我遇到的错误，我不知道如何解决：

```
error C2440: 'static_cast' : cannot convert from 'process' to 'process *' No user
defined-conversion operator available that can perform this conversion, or the operator
cannot be called

error C2228: left of '.need' must have class/struct/union 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:39:28.993

尝试...

```
void printPerms()
{
   for(vector<process>::iterator it = allProcesses.begin(); it != allProcesses.end(); it++)
   {
      for(int i = 0; i < numResourceTypes; i++)
      {
         cout << it->need << it->allocated << endl;
      }
   }
} 
```

我不知道到底出了什么问题，我也不明白为什么需要使用`static_cast`，但是无论使用运算符，您都应该能够访问这些成员变量`->`。

取消引用迭代器会为您提供它的值（在本例中为`process`），而无需强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:45:04.157

问题是它`*it`的类型`process`，您可以尝试在转换之前通过更改来获取它的地址

```
(static_cast<process*>(*it).need) 
```

至

```
((static_cast<process*>(&(*it)))->need) 
```

但是，这样做可能更简单`it->need`

顺便说一句，如果您只是打印（而不是修改`vector`内容），那么建议使用`const_iterator`而不是`iterator`.

# asp.net-mvc - 如何将自定义的 kendo UI 网格保存到已登录特定用户的仪表板？

> ID：16022415
> 
> 赞同：3
> 
> 时间：2013-04-15T18:38:09.700
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

我正在构建一个具有剑道网格的 asp .net MVC 应用程序。用户将能够登录并根据他/她的需要使用拖放或过滤器自定义组数据等网格。我需要知道的是，是否有能力保存用户对网格所做的更改，以便下次登录时，他可以直接看到自定义网格，而不是重新进行更改。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:35:28.080

我能想到的一种可能的方法。

在像组、选择、排序这样的网格事件上，会触发一个函数，该函数将收集网格属性为

```
JSON object
[{
sortable: true,
group : columnName,
OrderBy: asc
}] 
```

1.  调用事件函数
2.  构建一个设置 JSON 对象
3.  将 Ajax 发布到客户表
4.  `gridSettings varchar(Max)`使用您构建的 JSON 对象更新字段。
5.  下次当客户从现场登录加载网格属性时。

# javascript - 每次应用启动时如何强制phonegap询问地理位置？

> ID：16022420
> 
> 赞同：0
> 
> 时间：2013-04-15T18:38:19.757
> 
> 标签：javascript, iphone, ios, cordova, geolocation

我正在使用 phonegap 构建一个 ios 应用程序，我使用此代码来获取用户的当前位置

```
navigator.geolocation.getCurrentPosition(geolocationSuccsess, geolocationError); 
```

但是有了这个，它在应用程序启动时只请求一次许可，我想强制它在每次启动时询问。

有没有办法做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:59:46.830

它只问一次的原因是它只需要。浏览器会记住它一段时间，只有在必要时才会再次出现。

# dependency-injection - Autofac：在单个方法调用期间需要短期对象的长期对象

> ID：16022423
> 
> 赞同：1
> 
> 时间：2013-04-15T18:38:24.530
> 
> 标签：dependency-injection, ioc-container, autofac

我有一个`X`在 Autofac 中注册为单实例的类，因为创建它的成本相当高。

`X`有一个`DoSomething`执行某些操作的方法。但是，要在 中完成任务`DoSomething`，`X`需要额外的依赖项。通常，我会将它们注入构造函数中，但在这种情况下，这会变得很困难，因为依赖项绑定到更窄的范围，例如 instance-per-httprequest 或 instance-per-lifetime-scope。我不能使用`Func<T>`，因为这仍然会解析委托被实例化的生命周期中的对象，所以我什么也得不到。

下一个选项是将依赖项作为参数传递给`DoSomething`，但是存在依赖项的事实实际上只是一个实现细节。事实上，我通过一个接口访问 X。我宁愿不通过添加此参数来导致抽象泄漏。

当然，在方法中手动解决依赖关系（即服务定位器样式）也不是很好。即便如此，我也有一个问题是我不确定如何访问正确的`IComponentContext`. 该类可以用在 Web 应用程序或常规应用程序中，或在 Web 应用程序的线程中，但在任何请求之外。我如何确定“当前”生命周期范围？

所以基本问题是这样的：

```
class X : ISomething 
{
  public void DoSomething()
  {
    IDependency dependency = ?;
    dependency.UseMe();
    /* more stuff */
  }
} 
```

理想情况下，我希望能够向构造函数中注入一些东西，以便稍后允许我解析当前生命周期范围内的实际对象，如下所示：

```
class X : ISomething 
{
  IResolveLater<IDependency> dependencyResolver;

  public X(IResolveLater<IDependency> dependencyResolver){
    this.dependencyResolver = dependencyResolver;
  }

  public void DoSomething()
  {
    IDependency dependency = dependency.Resolve();
    dependency.UseMe();
    /* more stuff */
  }
} 
```

我当然在这里闻到了设计问题，但我真的不能指望它。我该如何解决这个一般性问题：一个长期存在的对象，它需要本地范围内的短期对象来进行单个操作。我通常更喜欢不同的顺序：短期对象取决于长期对象。

我也在考虑以某种方式将长期存在的东西从 X 中移出，并创建一个额外的、短期的类`XHelper`来充当某种“适配器”：

```
class X 
{

  void DoSomething(IDependency dependency)
  {
    /* do something */
  }
}

class XHelper : ISomething
{
  X x;
  public XHelper(X x, IDependency dependency)
  {
    this.x = x;
    this.dependency = dependency;
  }

  public void DoSomething()
  {
    x.DoSomething(dependency);
  }
} 
```

因此，当我需要 ISomething 时，我将根据需要解析 XHelper（而不是 X），它会自动注入适当的依赖项。我需要为此引入一个额外的类型，这有点麻烦。

我怎样才能以最优雅的方式解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T03:48:52.823

在我看来，您的用例实际上是一个伪装的简单工厂模式。

创建一个简单的 DependencyFactory，它有一个 Create() 方法，该方法返回您想要实现 IDependency 的任何具体类的实例，然后让您的 DependencyFactory 实现一个接口 IDependencyFactory。

将 IDependencyFactory 注册到容器中，并修改 Class X 的构造函数以获取 IDependencyFactory。

使用 IDependencyFactory 实例在您的方法 DoSomething() 中解析 IDependency 的具体实例，并在其上调用 DoSomething()。

# java - Android sqlite查询以匹配包含文本的列

> ID：16022427
> 
> 赞同：10
> 
> 时间：2013-04-15T18:38:34.470
> 
> 标签：java, android, sqlite

如果给定列包含内部任何地方的文本，则尝试进行将返回匹配项的查询。例如，如果我要传递单词“really”，则包含文本“This is a very long line of text”的列将匹配。到目前为止，我的查询只有在完全匹配时才会返回，所以它只会匹配包含“really”的列，就是这样。

我尝试了几种方法，但似乎都返回了相同的结果：

第一种方式（s 是我传入的字符串）：

```
 Cursor cursor = mDb.query(DATABASE_TABLE, new String[] {KEY_TITLE}, KEY_TITLE + " LIKE '%" + s + "%' COLLATE NOCASE", null, null, null, null); 
```

下一条路

```
String p_query = "SELECT COUNT(*) FROM data WHERE number=? COLLATE NOCASE"; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-15T18:46:05.283

> 如果给定列包含内部任何地方的文本，则尝试进行将返回匹配项的查询。

这对我有用，它是参数化的：

```
Cursor cursor = mDb.query(DATABASE_TABLE, new String[] {KEY_TITLE}, 
        KEY_TITLE + " LIKE ?", new String[] {"%" + s + "%"}, 
        null, null, null); 
```

* * *

“真的”是一个足够独特的词，但如果您正在搜索“冰”之类的内容并且不想要“骰子”、“副”、“冰淇淋”等，则必须使用不同的模式，例如：`"% " + s + " %"`和`s + " %"`。

或者使用带有分[词](http://www.sqlite.org/fts3.html#tokenizer)器的 FTS 表，例如 Porter Stemming。

# google-app-engine - GAE Java 搜索 API：QueryOptions.Builder.setLimit(int) 的可接受范围是多少

> ID：16022434
> 
> 赞同：0
> 
> 时间：2013-04-15T18:38:45.203
> 
> 标签：google-app-engine, gae-search

显然，当前返回文档数量的默认查询限制为 20。可以使用[`QueryOptions.Builder.setLimit()`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/QueryOptions.Builder#setLimit%28int%29). Java 开发文档似乎没有指明允许的最大值。

我的应用程序中索引了数千条记录，搜索可能会返回大量对象。`MAX_QUERY_RESULTS = 1000`有没有办法以编程方式访问此搜索配额，而不是在应用程序中进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T16:22:26.753

com.google.appengine.api.search.checkers.SearchApiLimits 类有一长串类似的常量，包括值为 1000 的 SEARCH_MAXIMUM_LIMIT。

# internet-explorer - Dojo 1.8 树在 IE8/9 中无法正常工作，当鼠标悬停在节点上时触发错误

> ID：16022436
> 
> 赞同：1
> 
> 时间：2013-04-15T18:38:53.373
> 
> 标签：internet-explorer, dojo, tree, internet-explorer-9, mouseover

我在使用 Dojo 1.8 时遇到 IE8 问题。现在我的实现（由于工作隐私问题，我无法发布）渲染了树，但我无法选择，并且从 dojo.js 中的第 15178 行 char 11 未压缩的第 15178 行收到了一个 Function Expected 错误。每当我将鼠标悬停在树中的节点上时都会触发。

该行如下：

```
while(!matchesTarget.matches(eventTarget, selector, target)){
                    if(eventTarget == target || children === false || !(eventTarget = eventTarget.parentNode) || eventTarget.nodeType != 1){ // intentional assignment
                        return;
                    } 
```

这在 Chrome 或 FF 中不会发生。

为了尝试调试，我尝试从标准参考代码和来自 livedocs 的代码中运行来自 dojo 的示例代码。既不能在代码玻璃和 jsfiddle 中工作，也不能在 chrome 和 FF 中工作。

我正在使用编程实现。

有没有其他人遇到过这个问题，或者它可能是一个已知问题？

这是我尝试在 IE 中运行的示例代码：

```
require([
    "dojo/_base/window", "dojo/store/Memory",
    "dijit/tree/ObjectStoreModel", "dijit/Tree",
    "dojo/domReady!"
], function(win, Memory, ObjectStoreModel, Tree){

    // Create test store, adding the getChildren() method required by ObjectStoreModel
    var myStore = new Memory({
        data: [
            { id: 'world', name:'The earth', type:'planet', population: '6 billion'},
            { id: 'AF', name:'Africa', type:'continent', population:'900 million', area: '30,221,532 sq km',
                    timezone: '-1 UTC to +4 UTC', parent: 'world'},
                { id: 'EG', name:'Egypt', type:'country', parent: 'AF' },
                { id: 'KE', name:'Kenya', type:'country', parent: 'AF' },
                    { id: 'Nairobi', name:'Nairobi', type:'city', parent: 'KE' },
                    { id: 'Mombasa', name:'Mombasa', type:'city', parent: 'KE' },
                { id: 'SD', name:'Sudan', type:'country', parent: 'AF' },
                    { id: 'Khartoum', name:'Khartoum', type:'city', parent: 'SD' },
            { id: 'AS', name:'Asia', type:'continent', parent: 'world' },
                { id: 'CN', name:'China', type:'country', parent: 'AS' },
                { id: 'IN', name:'India', type:'country', parent: 'AS' },
                { id: 'RU', name:'Russia', type:'country', parent: 'AS' },
                { id: 'MN', name:'Mongolia', type:'country', parent: 'AS' },
            { id: 'OC', name:'Oceania', type:'continent', population:'21 million', parent: 'world'},
            { id: 'EU', name:'Europe', type:'continent', parent: 'world' },
                { id: 'DE', name:'Germany', type:'country', parent: 'EU' },
                { id: 'FR', name:'France', type:'country', parent: 'EU' },
                { id: 'ES', name:'Spain', type:'country', parent: 'EU' },
                { id: 'IT', name:'Italy', type:'country', parent: 'EU' },
            { id: 'NA', name:'North America', type:'continent', parent: 'world' },
            { id: 'SA', name:'South America', type:'continent', parent: 'world' }
        ],
        getChildren: function(object){
            return this.query({parent: object.id});
        }
    });

    // Create the model
    var myModel = new ObjectStoreModel({
        store: myStore,
        query: {id: 'world'}
    });

    // Create the Tree.
    var tree = new Tree({
        model: myModel
    });
    tree.placeAt(win.body());
    tree.startup();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:56:11.047

已解决：问题是我们的一个 JS 文件中的一个方法由于一些时髦的 IE mojo 而踩到 Dojo.js 中的匹配函数。

# java - 读取 Socket 流数据并读取前 2 个字节，找到剩余的消息长度

> ID：16022437
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:38:54.827
> 
> 标签：java, sockets, inputstream, bytearrayinputstream

如何从输入流中读取前 2 个字节并将 2 个字节数据转换为实际的 int 长度值，然后读取消息的其余部分并将其复制到字节数组中。数据数组的其余部分应该在从流中读取前 2 个字节后定义，有人知道有效的逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:05:01.540

使用 a`DataInputStream.`使用`readUnsignedShort()`方法返回长度字，然后使用该`readFully()`方法读取以下数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:44:03.763

这会从字节数组创建一个字符串。根据需要进行调整。

```
InputStream in;
try {
    in = socket.getInputStream();
    DataInputStream dis = new DataInputStream(in);

    int len = dis.readInt();
    byte[] data = new byte[len];
    if (len > 0) {
       dis.readFully(data);
    }           
    String sReturn = new String(data); 
} 
```

# php - 从数组中删除空值

> ID：16022439
> 
> 赞同：0
> 
> 时间：2013-04-15T18:39:01.183
> 
> 标签：php, arrays

我正在使用 php 函数来创建带有分页的条目的用户列表。我需要删除没有名称的条目，所以我尝试了这段代码，但它不起作用：没有名称的条目不会被删除。

```
$listing->entries( $order, $eLimit, $eLimStart, true, array('owner' => $userid, 'name' != null), false, $section); 
```

相反的效果很好，使用此代码，我得到所有没有名称的条目：

```
$listing->entries( $order, $eLimit, $eLimStart, true, array('owner' => $userid, 'name' => null), false, $section); 
```

名称在 DB 中是这样存储的：

```
- type: varchar(250)
- interclassement: utf8_general_ci
- Null: Yes
- Default: NULL 
```

我正在使用 PHP 版本 5.3.16。

请问我做错了什么？非常感谢。

********编辑***** *** 上下文：Joomla 2.5.9 和 SobiPro 1.08。我使用 SobiPro API 创建列表：**

 **```
$listing = SPFactory::Controller('listing');
$listing = new SPListingCtrl(); 
```

函数条目如下所示

```
public function entries( $eOrder, $eLimit = null, $eLimStart = null, $count = false, $conditions = array(), $entriesRecursive = false, $pid = -1 )
{
    return $this->getEntries( $eOrder, $eLimit, $eLimStart, $count, $conditions, $entriesRecursive, $pid );
} 
```

函数 getEntries 如下所示：

```
/**
 * @param string $eOrder
 * @param int $eLimit
 * @param int $eLimStart
 * @return array
 */
public function getEntries( $eOrder, $eLimit = null, $eLimStart = null, $count = false, $conditions = array(), $entriesRecursive = false, $pid = 0 )
{
    /* var SPDb $db */
    $db =& SPFactory::db();
    $eClass = SPLoader::loadModel( 'entry' );
    $entries = array();
    $eDir = 'asc';
    $oPrefix = null;
    $conditions = is_array( $conditions ) ? $conditions : array();

    /* get the ordering and the direction */
    if ( strstr( $eOrder, '.' ) ) {
        $eOr = explode( '.', $eOrder );
        $eOrder = array_shift( $eOr );
        $eDir = implode( '.', $eOr );
    }
    $pid = $pid ? $pid : SPRequest::sid();
    /* if sort by name, then sort by the name field */
    if ( $eOrder == 'name' ) {
        $eOrder = SPFactory::config()->nameField()->get( 'fid' );
    }
    if ( $entriesRecursive ) {
        $pids = $this->_model->getChilds( 'category', true );
        if ( is_array( $pids ) ) {
            $pids = array_keys( $pids );
        }
        $pids[ ] = SPRequest::sid();
        $conditions[ 'sprl.pid' ] = $pids;
    }
    else {
        $conditions[ 'sprl.pid' ] = $pid;
    }
    if ( $pid == -1 ) {
        unset( $conditions[ 'sprl.pid' ] );
    }

    /* sort by field */
    if ( strstr( $eOrder, 'field_' ) ) {
        static $field = null;
        $specificMethod = false;
        if ( !$field ) {
            try {
                $db->select( 'fieldType', 'spdb_field', array( 'nid' => $eOrder, 'section' => Sobi::Section() ) );
                $fType = $db->loadResult();
            }
            catch ( SPException $x ) {
                Sobi::Error( $this->name(), SPLang::e( 'CANNOT_DETERMINE_FIELD_TYPE', $x->getMessage() ), SPC::WARNING, 0, __LINE__, __FILE__ );
            }
            if ( $fType ) {
                $field = SPLoader::loadClass( 'opt.fields.' . $fType );
            }
        }
        if ( $field && method_exists( $field, 'sortBy' ) ) {
            $table = null;
            $oPrefix = null;
            $specificMethod = call_user_func_array( array( $field, 'sortBy' ), array( &$table, &$conditions, &$oPrefix, &$eOrder, &$eDir ) );
        }
        if ( !$specificMethod ) {
            $table = $db->join(
                array(
                    array( 'table' => 'spdb_field', 'as' => 'fdef', 'key' => 'fid' ),
                    array( 'table' => 'spdb_field_data', 'as' => 'fdata', 'key' => 'fid' ),
                    array( 'table' => 'spdb_object', 'as' => 'spo', 'key' => array( 'fdata.sid', 'spo.id' ) ),
                    array( 'table' => 'spdb_relations', 'as' => 'sprl', 'key' => array( 'fdata.sid', 'sprl.id' ) ),
                )
            );
            $oPrefix = 'spo.';
            $conditions[ 'spo.oType' ] = 'entry';
            $conditions[ 'fdef.nid' ] = $eOrder;
         //   $eOrder = 'baseData.' . $eDir;
         $eOrder = 'baseData = "", CONVERT(baseData,UNSIGNED INTEGER).' . $eDir;
        }
    }

    else {
        $table = $db->join( array(
            array( 'table' => 'spdb_relations', 'as' => 'sprl', 'key' => 'id' ),
            array( 'table' => 'spdb_object', 'as' => 'spo', 'key' => 'id' )
        ) );
        $conditions[ 'spo.oType' ] = 'entry';
        $eOrder = $eOrder . '.' . $eDir;
        $oPrefix = 'spo.';
        if ( strstr( $eOrder, 'valid' ) ) {
            $eOrder = $oPrefix . $eOrder;
        }
    }

    /* check user permissions for the visibility */
    if ( Sobi::My( 'id' ) ) {
        $this->userPermissionsQuery( $conditions, $oPrefix );
        if( isset( $conditions[ $oPrefix . 'state' ] ) && $conditions[ $oPrefix . 'state' ] ) {
            $conditions[ 'sprl.copy' ] = 0;
        }
    }
    else {
        $conditions = array_merge( $conditions, array( $oPrefix . 'state' => '1', '@VALID' => $db->valid( $oPrefix . 'validUntil', $oPrefix . 'validSince' ) ) );
        $conditions[ 'sprl.copy' ] = '0';
    }
    try {
        $db->select( $oPrefix . 'id', $table, $conditions, $eOrder, $eLimit, $eLimStart, true );
        $results = $db->loadResultArray();
    }
    catch ( SPException $x ) {
        Sobi::Error( $this->name(), SPLang::e( 'DB_REPORTS_ERR', $x->getMessage() ), SPC::WARNING, 0, __LINE__, __FILE__ );
    }
    Sobi::Trigger( $this->name(), 'AfterGetEntries', array( &$results, $count ) );
    if ( count( $results ) && !$count ) {
        $memLimit = ( int )ini_get( 'memory_limit' ) * 2097152;
        foreach ( $results as $i => $sid ) {
            // it needs too much memory moving the object creation to the view
            //$entries[ $i ] = SPFactory::Entry( $sid );
            $entries[ $i ] = $sid;
        }
    }
    if ( $count ) {
        return $results;
    }
    return $entries;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:00:47.477

而不是寻找非空条目，也许您可​​以做相反的事情并寻找具有某些内容的条目，如下所示：

`$listing->entries( $order, $eLimit, $eLimStart, true, array('owner' => $userid, 'name' => '%'), false, $section);`

然而，这纯粹是一种猜测，因为我们需要查看`entries`函数以了解如何处理各种参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:58:47.210

**已解决 - 感谢大家的帮助！**

$listing->entries($order, $eLimit, $eLimStart, true, array('owner' => $userid, '!name' => null), false, -1);**

# html - CSS - 我的图像在较小的屏幕尺寸上与我的文本重叠

> ID：16022442
> 
> 赞同：3
> 
> 时间：2013-04-15T18:39:10.377
> 
> 标签：html, css, image, text, overlapping

在我的网站上，当屏幕尺寸较小时，图像与我的主要内容文本重叠。在家里完全没问题，因为我的屏幕要大得多，但现在我在上大学，看起来很糟糕。

我能做些什么来解决这个问题吗？

```
#content {  
    font-size:16px;
    margin: 0 auto;
    width: 955px; 
} 
```

**这是问题的图片：http:** [//i776.photobucket.com/albums/yy41/tom14431996/problem-1_zpsa410ef94.png](http://i776.photobucket.com/albums/yy41/tom14431996/problem-1_zpsa410ef94.png)

如您所见，图像与文本重叠。

**这是如何添加我的第一个图像的示例代码：**

```
#imageholder1 {
float: left;
left: 2%;
position: fixed;
top: 11%;
border: double;
border-color: #333; 
```

}

**这是我的文本代码：**

```
#content {
    font-size:16px;
    margin: 0 auto;
    width: 955px; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:45:45.883

首先，不要`position: fixed;`为您当前的情况定位您的图像。 `position: fixed;`用于将元素**固定**在屏幕上，使其永远不会移动。当您在较小的屏幕上查看图像时，文本必须移动到某处，因此它会与固定图像重叠。

尝试为您的文本的类/ID 设置一个宽度，`50%`以便它适应您的屏幕宽度。如果我能看到更多的 html/css，我可以提供进一步的帮助。

试试`position: relative;`你的图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:42:13.763

`position: fixed`将图像放在文本上。如果您想在图像周围显示文字，请保持图像内联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:43:54.833

发生这种情况是因为您正在使用`position: fixed;`- 当您这样做时，该元素不会占用布局中的空间，而是位于静态定位的元素之上（默认设置）。你`float: left;`在这里什么都不做，因为你不能有一个浮动并且位置固定的元素。您可以通过使用边距和/或填充来解决此问题，以确保最小尺寸，以便固定元素始终位于边距/填充的顶部。或者您可以实际使用浮动，这将使内容围绕图像流动。

# java - 编写指向其实现者的通用接口的便捷方法

> ID：16022443
> 
> 赞同：5
> 
> 时间：2013-04-15T18:39:18.380
> 
> 标签：java, generics

java中是否有一种方法可以编写通用接口，以更方便的方式向此类接口的实现者指出？

例如我写了接口：

```
public interface Updatable<T> {
    void updateData(T t);
} 
```

我想指出，只有实现者的实例才能在 updateData(T t) 方法中传递。

所以，我必须写这样的东西：

```
public class Office implements Updatable<Office> {

@Override
    public void updateData(Office office) {
        //To change body of implemented methods use File | Settings | File Templates.
    }
...
...
...
} 
```

不过好像有点丑。你有更好的变种吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:15:30.633

人们一直在要求“This”类型，主要是为了流畅的 API。它可能永远不会成功。但我认为只要建立一个约定就可以了——命名类型变量`This`来表示`this`. 所以读者看到`This`并确切地知道它应该是什么；滥用是不可能的

```
public interface Updatable<This> {
    void updateData(This t);
}

// any Foo implementing Updatable must supply This=Foo

public class Office implements Updatable<Office> 
```

由于`This`must 是 的子类型`Updatable<This>`，人们经常表达这种约束

```
public interface Updatable<This extends Updatable<This>> 
```

我认为没有必要，也不应该这样做。的命名约定`This`已经足够好了。

该约束也不够严格，无法防止滥用。例如

```
public interface Foo<T extends Foo<T>>

public class Foo1 implements Foo<Foo1>  // good, intended use

public class Foo2 implements Foo<Foo1>  // compiles! but not intended 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T20:54:40.287

这很好，是最不难看和最清晰的方法。

泛型只是为了确保类型安全，即避免强制转换。您的`Updatable`界面已经是完全类型安全的。那么为什么要改变任何东西呢？

> 我想指出，只有实现者的实例才能在 updateData(T t) 方法中传递。

关键问题是：*你为什么*要这样做？从界面本身来看，我没有看到任何类型安全的原因，为什么需要这样做。

如果`Office`该类要求其`updateData`方法的参数是`Office`，那很好。但这将是特定于`Office`类的要求，因此`Office`应该负责（并且在您的代码中）使用适当的类型参数实现接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:42:06.090

我会写

```
public interface Updatable<T extends Updatable<?>> {
    void updateData(T t);
} 
```

同样丑陋，但更明确的是`T`必须实现接口。

# shared-libraries - 从共享对象 Windows/MinGW 中访问应用程序内部的符号

> ID：16022445
> 
> 赞同：2
> 
> 时间：2013-04-15T18:39:26.390
> 
> 标签：shared-libraries, symbols, dlopen

这是我的第一篇文章，我正在努力遵守论坛规则。我知道这个问题之前已经被问过很多次了，但是提供的解决方案对我不起作用。我不太清楚为什么会这样，可能我忽略了一些东西。

我想从驻留在主应用程序中的共享模块 (.so) 符号（变量和函数）访问。我总是收到链接错误（“未定义的引用”）。

该场景与此处描述的相似，但期望我使用的是纯 C 而不是 C++：

[共享对象在主二进制文件中找不到符号，C++](https://stackoverflow.com/questions/3623375/shared-object-cant-find-symbols-in-main-binary-c)

也许这种差异是建议的解决方案不起作用的原因。我在 32 位 Windows 下使用 32 位 MinGW，版本 4.6.2（如果重要的话是 XP）。

我还阅读了这些帖子：

[使用 dlopen 加载库时收到“未定义符号”错误](https://stackoverflow.com/questions/480617/receive-undefined-symbol-error-when-loading-libary-with-dlopen)

[动态加载和符号共享](https://stackoverflow.com/questions/2179038/dynamic-loading-and-symbols-sharing)

[我可以从运行时加载的共享对象访问主机进程的符号吗？有什么选择吗？](https://stackoverflow.com/questions/7706592/can-i-access-to-symbols-of-the-host-proccess-from-a-shared-object-loaded-in-runt)

我想后一种解决方案会起作用，但不是一个选择，因为这是一个来自 Linux 的移植项目，有 100 多个符号。这是一个插件系统，我不想限制插件的可能性。

我在链接主应用程序时尝试了许多命令行开关，例如 -rdynamic（MinGW 显然不支持）、--export-all-symbols、--export-dynamic。在链接共享库时，我还尝试了不同的命令行选项，例如 --allow-shlib-undefined、--enable-auto-import、--enable-runtime-pseudo-reloc

该应用程序是一个 linux 应用程序，并且在那里运行良好；我设法让它在 Mac OSX (Darwin) 下也能工作。在那里，我不能在链接期间剥离主应用程序可执行文件，并在链接共享对象时指定“-bundle -bundle_loader 'app name'”。

提前谢谢了！

约翰内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:16:04.867

Well, I found out myself with some help of the codeguru forum (see [http://forums.codeguru.com/showthread.php?536343-RESOLVED-accessing-symbols-in-appllication-from-within-dynamic-library-MinGW](http://forums.codeguru.com/showthread.php?536343-RESOLVED-accessing-symbols-in-appllication-from-within-dynamic-library-MinGW) ).

The solution is not - as I was thinking first - some option to the linker; apparently automatic back-linking is not possible in Windows. You have to manully load the symbols you want to use from the main application at runtime; similiar to when you manually load a DLL.

I made a small test and demonstration project:

file "my_app.c":

```
#include <stdio.h>
#include <stdlib.h>

#include "my_app.h"
#include "plugins.h"

int a;
int b;
Plugin *P;

void hello ()
{
  printf ("Hello World!\n");
}

int main ()
{
  char choice;
  char buf[BUFLEN];
  char *plugin_name=NULL;
  Plugin *p=NULL;

  do
  {
    printf ("\n   ---  Menu items ---\n");
    printf ("   '1' .. select plugin\n");
    printf ("   '2' .. load plugin\n");
    printf ("   '3' .. execute plugin function\n");
    printf ("   '4' .. unload plugin\n");
    printf ("   'x' .. exit\n");
    printf ("\n   Your choice: ");

    fgets (buf, sizeof(buf), stdin);
    putchar ('\n');
    choice = buf[0];
    switch (choice)
    {
      case '1':
        plugin_name = plugin_select ();
        break; 
      case '2':
        if (plugin_name)
        {
          p = plugin_load (plugin_name);
          if (p)
            printf ("Plugin '%s' loaded successfully\n", plugin_name);
          P = p;
        } else
          printf ("No plugin selected\n");      
        break; 
      case '3':
        if (p)
        {
          printf ("Enter the 1st number: ");
          fgets (buf, sizeof(buf), stdin);
          a = atoi (buf);
          printf ("Enter the 2nd number: ");
          fgets (buf, sizeof(buf), stdin);
          b = atoi (buf);
          printf ("\nExecuting the plugin '%s' ...\n", plugin_name);
          plugin_action (p);
        } else
          printf ("No plugin loaded\n");
        break; 
      case '4':
        if (p)
        {
          plugin_destroy (p);
          p = NULL;
          P = NULL;
        } else
          printf ("No plugin loaded\n");
        break; 
    }
  } while (choice != 'x');

  return 0;
} 
```

file "my_app.h":

```
#ifndef __MYAPP_H
#define __MYAPP_H

#include "plugins.h"

#define TRUE  1
#define FALSE 0

#define BUFLEN 120

extern int a;
extern int b;

extern void hello (void);

extern Plugin *P;

#endif  /* __MYAPP_H */ 
```

file "plugins.c":

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <dirent.h>
#include <dlfcn.h>

#include "my_app.h"
#include "plugins.h"

Plugin *plugin_load (const char *filename)
{
  Plugin *p;
  int (*init)(Plugin *);

  p = malloc (sizeof(Plugin));
  if (p == NULL)
  {
    printf ("Couldn't allocate Plugin object\n");
    return NULL;
  }
  strncpy (p->filename, filename, sizeof(p->filename));
  if ((p->module = dlopen(p->filename, RTLD_LAZY)) == NULL)
  {
    printf ("%s\n", dlerror());
    free (p);
    return NULL;
  }

  init = dlsym (p->module, "init_plugin");
  if (init == NULL)
  {
    printf ("%s\n", dlerror());
    free (p);
    return NULL;
  }

  if (!init(p))
  {
    perror ("Couldn't initialize plugin");
    free (p);
    return NULL;
  }

  p->load = TRUE;
  return p;
}

void plugin_action (Plugin *p)
{
  if (p == NULL)
  {
    printf ("Plugin not found!\n");
    return;
  }
  p->plugin_cb();
}

char *plugin_select ()
{
  DIR *dp;
  struct dirent *e;
  static char buf[BUFLEN];
  char *p;
  size_t len;
  char *suffix;

  dp = opendir (".");
  if (dp == NULL)
  {
    perror ("Cannot open '.'");
    return NULL;
  }
  printf ("\nFollowing plugins are available:\n");
  while ((e=readdir(dp)) != NULL)
  {
    suffix = strrchr (e->d_name, '.');
    if (suffix)
    {
      if (strcmp (suffix, PLUGIN_SUFFIX) == 0)
        printf ("  %s\n", e->d_name);
    }
  }
  closedir (dp);
  printf ("Your choice: ");
  buf[0] = '.';
  buf[1] = '/';
  p = &buf[2];
  fgets (p, sizeof(buf)-2, stdin);
  len = strlen (buf);
  if (len > 0)
    len --;
  buf[len] = '\0';
  if (strchr(p, '.') == NULL)
    strcat (buf, PLUGIN_SUFFIX);

  return buf;
}

void plugin_destroy (Plugin *p)
{
  void (*unload)(Plugin *);

  unload = dlsym (p->module, "unload_plugin");
  if (unload != NULL)
    unload (p);

  dlclose (p->module);
  free (p);
} 
```

file "plugins.h":

```
#ifndef __PLUGINS_H
#define __PLUGINS_H

#include <limits.h>          /*PATH_MAX */

#define PLUGIN_SUFFIX  ".so"

typedef struct _Plugin
{
  char filename[PATH_MAX];
  char *name;
  char *description;
  unsigned int show_in_menu;
  unsigned int load;
  void *module;
  void (*plugin_cb)();
} Plugin;

Plugin *plugin_load (const char *filename);
void plugin_action (Plugin *p);
char *plugin_select (void);
void plugin_destroy (Plugin *p);

#endif  /* __PLUGINS_H */ 
```

Now the plugins:

Hide the nasty function pointer declarations, etc.: "plugin_macros.h":

```
#ifndef __PLUGIN_MACROS_H
#define __PLUGIN_MACROS_H

#ifdef WIN32
#include <windows.h>

#define DECLARE_FUNC(type,name,par) typedef type (WINAPI *name ## _t)par; static name ## _t name;
#define DECLARE_VAR(type,name) static type * p ## name;
#define DECLARE_PTR(type,name) static type *name;

#define LOAD_FUNCC(name) if((name=(name ## _t)GetProcAddress(GetModuleHandle(NULL),#name))==NULL) return 0
#define LOAD_FUNC(name) (name=(name ## _t)GetProcAddress(GetModuleHandle(NULL),#name))

#define LOAD_VARC(type,name) if((p ## name=(type *)GetProcAddress(GetModuleHandle(NULL),#name))==NULL) return 0
#define LOAD_VAR(type,name) (name=(type *)GetProcAddress(GetModuleHandle(NULL),#name))

#define LOAD_PTRC(type,name) if((name=*(type **)GetProcAddress(GetModuleHandle(NULL),#name))==NULL) return 0
#define LOAD_PTR(type,name) (name=*(type **)GetProcAddress(GetModuleHandle(NULL),#name))

#else
/* not WIN32 */
#define DECLARE_FUNC(type,name,par)
#define DECLARE_VAR(type,name)
#define DECLARE_PTR(type,name)

#define LOAD_FUNCC(name)
#define LOAD_FUNC(name)

#define LOAD_VARC(type,name)
#define LOAD_VAR(type,name)

#define LOAD_PTRC(type,name)
#define LOAD_PTR(type,name)
#endif

#endif  /* __PLUGIN_MACROS_H */ 
```

file "add.c":

```
#include <stdio.h>

#include "plugins.h"
#include "plugin_macros.h"

#ifdef WIN32
#include <windows.h>

DECLARE_FUNC(void, hello, (void));
DECLARE_VAR(int, a);
DECLARE_VAR(int, b);
DECLARE_PTR(Plugin, P);

#define a (*pa)
#define b (*pb)

#else
#include "my_app.h"
#endif

static void add ()
{
  hello();
  LOAD_PTR(Plugin, P);
  printf ("name=%s\n", P->name);
  printf ("description=%s\n\n", P->description);
  printf ("%d + %d = %d\n", a, b, a+b);
}

int init_plugin (Plugin *p)
{
  LOAD_FUNCC(hello);
  LOAD_VARC(int, a);
  LOAD_VARC(int, b);

  p->name = "Add";
  p->description = "Add two integers.";
  p->plugin_cb = add;
  P = p;

  return TRUE;
} 
```

file "multiply.c":

```
#include <stdio.h>

#include "plugins.h"
#include "plugin_macros.h"

#ifdef WIN32
#include <windows.h>

DECLARE_VAR(int, a);
DECLARE_VAR(int, b);
DECLARE_PTR(Plugin, P);

#define a (*pa)
#define b (*pb)

#else
#include "my_app.h"
#endif

static void multiply ()
{
  LOAD_PTR(Plugin, P);
  printf ("name=%s\n", P->name);
  printf ("description=%s\n\n", P->description);
  printf ("%d * %d = %d\n", a, b, a*b);
}

int init_plugin (Plugin *p)
{
  LOAD_VARC(int, a);
  LOAD_VARC(int, b);

  p->name = "Multiply";
  p->description = "Multiply two integers.";
  p->plugin_cb = multiply;
  P = p;

  return TRUE;
} 
```

... and the Makefile:

```
ifeq ($(OS), Windows_NT)
  TARGET = plugintest.exe
  CC = $(MINGW)\bin\gcc.exe
  LDFLAGS = -Wl,--export-all-symbols
  STRIP = -s
  SHARED = -shared
  RM = del
else
  TARGET = plugintest
  UNAME := $(shell uname -s)
  ifeq ($(UNAME),Linux)
    LDFLAGS = -Wl,--export-dynamic
    STRIP = -s
    SHARED = -shared
  endif
  ifeq ($(UNAME),Darwin)
    LDFLAGS =
    STRIP =
    SHARED = -bundle -bundle_loader plugintest
  endif
  RM = rm -f
endif

PLUGINS = add.so multiply.so
OBJS = my_app.o plugins.o
LIBS = -ldl
CFLAGS = -Wall

all: $(TARGET) my_plugins

$(TARGET): $(OBJS)
    $(CC) $(OBJS) $(LIBS) $(LDFLAGS) -o $(TARGET)

my_app.o: my_app.c my_app.h plugins.h
    $(CC) $(CFLAGS) -c my_app.c -o my_app.o

plugins.o: plugins.c my_app.h plugins.h
    $(CC) $(CFLAGS) -c plugins.c -o plugins.o

my_plugins: $(PLUGINS)

add.so: add.c my_app.h plugin_macros.h
    $(CC) $(CFLAGS) $(SHARED) add.c -o add.so

multiply.so: multiply.c my_app.h plugin_macros.h
    $(CC) $(CFLAGS) $(SHARED) multiply.c -o multiply.so

clean:
    $(RM) *.o *.so $(TARGET) 
```

The project uses the posix dynamic loading functions dlopen(), etc. They are not part of the MinGW installation, but you can download from here:

[http://code.google.com/p/dlfcn-win32/](http://code.google.com/p/dlfcn-win32/)

I hope this helps others who come across the same issue. Any comments and questions are welcome!

Johannes

# type-inference - 带有限制的 OWL 类型推断

> ID：16022450
> 
> 赞同：2
> 
> 时间：2013-04-15T18:39:41.880
> 
> 标签：type-inference, ontology, owl, restriction, protege4

我正在使用 FaCT++ 和一个简单的本体研究 Protege 4 的 OWL 限制概念。假设我有一个`foo`班级个人`Something`：

```
:Something a owl:Class.
:foo a :Something, owl:NamedIndividual. 
```

以及从对`hasBar`属性的限制定义的另一个类：

```
:hasBar a owl:ObjectProperty.
:SomethingElse owl:equivalentClass [a owl:Restriction;
                                    owl:onProperty :hasBar;
                                    owl:allValuesFrom :Something]. 
```

如果我断言：

```
:x :hasBar :foo. 
```

为什么我不能从中推断出`x`是 a `SomethingElse`（通过事实`foo`是 a `Something`）？我可以使它工作的唯一方法是定义`range`of ：`hasBar`

```
:hasBar a owl:ObjectProperty;
        rdfs:range :Something. 
```

但我想避免这种情况，因为它限制了可以成为主题的内容`hasBar`（这给我带来了更多麻烦）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:08:04.330

I think it is simpler to reason over real examples, let's consider the following knowledge base:

```
:eats rdf:type owl:ObjectProperty .

:Vegetable rdf:type owl:Class ;
       rdfs:subClassOf owl:Thing .

:Vegetarian rdf:type owl:Class ;
        owl:equivalentClass [ rdf:type owl:Restriction ;
                              owl:onProperty :eats ;
                              owl:allValuesFrom :Vegetable
                            ] .

:Carrot rdf:type :Vegetable ,
             owl:NamedIndividual .

:John rdf:type owl:NamedIndividual , owl:Thing ;
      :eats :carrot . 
```

You have some equivalences with your example: `hasBar` is `eats`, `Vegetarian` is `SomethingElse`, `Vegetable` is `Something`, `foo` is `carrot` and finally `x` is `John`.

Now you would like to infer that `John` is a `Vegetarian` (= `x` is `SomethingElse`).

It makes sense that it doesn't work with an `owl:allValuesFrom`. What you are saying here is that *all instances of vegetarian, if they have a property, they must have Vegetable in range.* So from that you could deduce that `carrot` is a vegetable for example, assuming you would know that John is a vegetarian in the first place.

It makes sense in natural language too: In your ontology you only know that John eats a carrot, this doesn't automatically make him a vegetarian (non-vegetarian people eat also carrots).

You could use a `owl:someValuesFrom` instead of a `owl:allValuesFrom`. This way, you would define every vegetarian has someone that eats some vegetable. In this case if we know that John eats a carrot, therefore he would be classified as vegetarian by the reasoner, based on your definition of the concept *vegetarian*.

Universal (`allValuesFrom`) and existential (`someValuesFrom`) restrictions are complicated to understand, there is often no right or wrong solution, it mostly depends to what you want to achieve.

# java - 在 web 服务本身axis2中使用资源？

> ID：16022452
> 
> 赞同：2
> 
> 时间：2013-04-15T18:39:52.033
> 
> 标签：java, eclipse, service, axis2

我已经通过 Eclipse 部署了一个带有 axis2 的 Web 服务。我还有一个 XML 文件来存储新 Web 服务应该使用的数据。创建 Web 服务后，我发现 xml 文件已放入 WebContent/WEB-INF/classes 文件夹。我无法使用我的新 Web 服务打开它。错误消息是：“java.io.FileNotFoundException：xmlfile.xml（系统找不到指定的文件）”我将其部署为自下而上，用于打开 xml 文件的代码是：

```
File xmlDocument = new File("xmlfile.xml"); 
```

当xml文件与java文件在同一目录下时，它可以工作，但在Web服务中，它不起作用。如何使用axis2 Web服务中的资源？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:21:34.490

我对 JAVA WEB 开发没有任何经验，但是，在您的情况下，XML 文件是否位于某个具有类的包中？如果它是真的，你可以做这样的事情：

```
URL url = ClassFromSamePackageOfFile.class.getResource( "xmlfile.xml" );

File f;
try {
  f = new File(url.toURI());
} catch(URISyntaxException e) {
  f = new File(url.getPath());
} 
```

# java - 自定义 Maven 插件：如何添加类路径？

> ID：16022454
> 
> 赞同：1
> 
> 时间：2013-04-15T18:40:07.447
> 
> 标签：java, maven, classpath, maven-plugin

我正在为 Maven 创建一个自定义插件。通常，当您运行依赖于某些文件的普通 Java 程序时`.jar`，您会将其作为类路径放在命令行中。在我的插件中，它需要了解其他`.jar`文件中的一些内容。

为 maven 编译插件时，如何将类路径添加到我的自定义 maven 插件？我会将它添加为依赖项`pom.xml`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:49:16.743

您可以通过为插件定义依赖项来在插件的类路径中添加内容，如下所示：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-checkstyle-plugin</artifactId>
  <version>2.1</version>
  <dependencies>
     <dependency>
        <groupId>checkstyle</groupId>
        <artifactId>checkstyle</artifactId>
        <version>4.4</version>
     </dependency>
  </dependencies>
</plugin> 
```

除此之外，您需要在插件运行时定义插件的依赖项听起来很奇怪。

# ios - 在其他视图上隐藏 Admob 横幅视图

> ID：16022455
> 
> 赞同：0
> 
> 时间：2013-04-15T18:40:07.470
> 
> 标签：ios, hide, admob

我在我的应用程序中使用 Admob。应用内购买后，我将从每个视图中删除这些横幅。

因为它是一个子视图，我不能使用：

```
<classname>._bannerView.hide; 
```

或类似的东西。如何从其他视图中隐藏横幅？

谢谢！

# sql-server - 如果 sql server 上没有索引，SQL 锁将如何工作

> ID：16022456
> 
> 赞同：0
> 
> 时间：2013-04-15T18:40:08.987
> 
> 标签：sql-server

根据我之前的[问题](https://stackoverflow.com/questions/16021966/why-behaviour-of-transaction-isolation-level-is-different-in-tempdb-database-and)，我怀疑当表上没有索引时，锁的工作方式不同，即 HEAP。我正在寻找任何答案，但还没有得到不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:01:11.477

您上一个问题中的一个区别与模式稳定性锁（R/W tran）与意图共享锁有关。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms175519%28v=sql.105%29.aspx)：

> **模式：**在执行依赖于表模式的操作时使用。模式锁的类型有：模式修改（Sch-M）和模式稳定性（Sch-S）。
> 
> **Intent：**用于建立锁层次结构。意向锁的类型有：意向共享（IS）、意向排他（IX）和与意向排他共享（SIX）。

本文还详细介绍了两者（当您向下滚动页面时）。

# alfresco - Alfresco 找不到新文件夹

> ID：16022458
> 
> 赞同：1
> 
> 时间：2013-04-15T18:40:15.320
> 
> 标签：alfresco, cmis

我正在使用露天投掷 cmis。在我们的一个环境中，我们有一个问题。我们想创建一个文件夹并将一些文档放入其中。

这在我们所有的环境中都可以正常工作，除了一个。

在这个中，我们可以创建文件夹。但是当我们搜索该文件夹时，找不到该文件夹​​。

之后，我可以使用共享 gui 找到它。

我在共享应用程序中没有错误消息。

有没有人知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T15:02:57.350

将评论推广到答案...

将 Alfresco 与 SOLR 一起使用时，您需要注意 SOLR 索引不是实时的。接近实时，当然，但它是异步的，所以总是有延迟。（这是一个最终一致的索引，而不是一个完全实时的索引）

[Alfresco 和 SOLR Wiki](http://wiki.alfresco.com/wiki/Alfresco_And_SOLR)上有很多信息，包括查询当前延迟的方式。

如果延迟非常低（例如轻负载的系统），您会发现 SOLR 几乎会立即赶上，并且新创建的项目会立即显示在搜索结果中。然而，期望必须等待一点是更正常的，尤其是在更多负载的系统上。

如果几分钟后仍未显示新结果，您需要按照 wiki 或[SOLR 监控和故障排除文档](http://docs.alfresco.com/4.1/topic/com.alfresco.enterprise.doc/concepts/solr-monitor-troubleshoot.html)中的说明找出原因并进行修复。

# sql - SQL Server 2008：用于检索和替换数据的游标

> ID：16022468
> 
> 赞同：0
> 
> 时间：2013-04-15T18:40:50.177
> 
> 标签：sql, sql-server-2008, cursor

也许对此有更好的方法，但这必须是动态的。

从 vb.net 表单中，我需要将数据从一个表恢复或替换到另一个表。除了几个不同的列之外，这两个表是相同的。

首先我写了一些 SQL 来获取传入的表的列名。然后通过序数位置我只得到我想要的值的表。我将这些表名称存储在临时表中。

现在我想使用临时表列名从备份表中获取这些值并将它们放在主表中。

所以我想我想我需要一个光标以某种方式循环。我从大学开始就没有碰过光标，哇。

我会让自己尴尬并发布我当前的代码。

```
SET @getColCURSOR = CURSOR FOR 
    SELECT name
    FROM #MyTempTable --created previously as table only holding column names

OPEN @getColCURSOR
FETCH NEXT FROM @getColCURSOR 
INTO @columnName 

WHILE @@FETCH_STATUS = 0 
BEGIN 
    select @columnName --this variable should as a column name and change 
    from AUDIT_TABLE a where a.ID = 7 -- 7 is just for testing is dynamic variable
  FETCH NEXT FROM @getColCURSOR 
INTO @columnName 
END 

CLOSE @getColCURSOR 
DEALLOCATE @getColCURSOR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:59:23.530

我不会评论这是否可以在没有光标的情况下完成，因为我对你想要做的事情有点迷茫。但是您的光标的一个问题是您无法在`select`语句中参数化列名。所以你需要替换这个：

```
WHILE @@FETCH_STATUS = 0 
BEGIN 
    select @columnName --this variable should as a column name and change 
    from AUDIT_TABLE a where a.ID = 7 -- 7 is just for testing is dynamic variable
  FETCH NEXT FROM getColCURSOR 
INTO @columnName 
END 
```

--使用这样的动态SQL：

```
DECLARE @SQL nvarchar(max)

WHILE @@FETCH_STATUS = 0 
BEGIN 
    set @SQL =
      N'select ' + QUOTENAME(@columnName) + ' from AUDIT_TABLE a where a.ID = 7'
    EXEC (@SQL); --w/o brackets assumes you've calling a stored proc
  FETCH NEXT FROM getColCURSOR 
INTO @columnName 
END 
```

这可能会引入其他问题，因为动态 SQL 语句在它们自己的范围内执行。我绝对鼓励您研究是否有基于集合的解决方案，因为使用动态 SQL 会使这变得更加混乱，而且我认为如果您想使用列名的变量。

# c# - 使用自定义方法的两个实例会导致“调用不明确”

> ID：16022469
> 
> 赞同：0
> 
> 时间：2013-04-15T18:40:56.367
> 
> 标签：c#

我在编译代码时遇到问题，我从编译器收到以下错误：

> 以下方法或属性之间的调用不明确：“ActionTracker.DataAccess.GetSpecialtyCode(string)”和 ActionTracker.DataAccess.GetSpecialtyCode

我只是在新方法中再次使用我的自定义方法。我以与此完全相同的方式使用了另一种方法，并且没有出现任何歧义错误。请问有人可以帮忙吗？我是n00b :D

```
namespace ActionTracker
{
  using ...
   internal class DataAccess
   { 
     internal static string GetSpecialtyCode(string name)
     {
         OleDbConnection speccconn = SetUpConnection();
         speccconn.Open();
         OleDbCommand specccmd = new OleDbCommand("SELECT Specialty_Code FROM tbl_specialty WHERE Specialty_Description = @Specialty_Description", speccconn);

         specccmd.Parameters.Add("@Specialty_Description", OleDbType.VarWChar, 255).Value = name;

         string code = (string)specccmd.ExecuteScalar();
         speccconn.Close();
         return code;
     }

     internal static string AddVisitSpecialty(string trust_name, DateTime visit_date, string visit_type, List<string> specialties)
     {
          int visit_id = GetVisitID(trust_name, visit_date, visit_type);
          OleDbConnection visitspeccon = SetUpConnection();
          visitspeccon.Open();

          foreach (string element in specialties)
          {
            string specialty_code = new GetSpecialtyCode(element);
            OleDbCommand visitspeccmmd = new OleDbCommand("INSERT INTO tbl_visit_specialty (Visit_ID, Visit_Specialty) VALUES"
            + "(@visit_id, @visit_specialty)", visitspeccon);
            visitspeccmmd.Parameters.Add("@visit_id", OleDbType.Numeric).Value = visit_id;
            visitspeccmmd.Parameters.Add("@visit_specialty", OleDbType.VarWChar, 255).Value = specialty_code;
            visitspeccmmd.ExecuteNonQuery();

           }

           visitspeccon.Close();

           string message = "Specialty(s) added to visit";
           return message;
     }

     internal static string DeleteVisitSpecialty(int visit_id, List<string> specialty_list)
     {
         OleDbConnection delvscon = SetUpConnection();
         delvscon.Open();     
         List<string> specialty_codes = new List<string>();

        foreach (string element in specialty_list)
        {
            string specialty_code = GetSpecialtyCode(element);            
            OleDbCommand delvscmd = new OleDbCommand("DELETE FROM tbl_visit_specilaty WHERE Visit_ID = @visit_id AND Visit_Specialty = @visit_specialty", delvscon);
            delvscmd.Parameters.Add("@visit_id", OleDbType.Numeric).Value = visit_id;
            delvscmd.Parameters.Add("@visit_specialty", OleDbType.VarWChar, 255).Value = specialty_code;
            delvscmd.ExecuteNonQuery();
        }

         delvscon.Close();
         string message = "Specialty(s) deleted";
         return message;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:53:37.700

我认为您的问题是这一行（来自 AddVisitSpecialty）：

```
string specialty_code = new GetSpecialtyCode(element); 
```

看看如果你删除那个*新*的会发生什么。

# jquery - 从ajax调用返回后显示和隐藏div

> ID：16022470
> 
> 赞同：0
> 
> 时间：2013-04-15T18:40:58.913
> 
> 标签：jquery, asp.net-mvc-4

在我的页面上，我使用 jquery 对我的服务器进行了多次调用。我想显示一个结果 div，其中将显示有关成功/失败的信息，例如带有成功信息的绿色 div 和带有失败信息的红色 div。这个 div 应该会看到 1-2 秒并自动消失。为此，我创建了一个 viewModel：

```
public class ResultMessageViewModel
{
  public ResultMessageKind KindOfMessage {get;set;}
  public string Content {get;set;}
} 
```

在我的控制器操作中，我返回 PartialView 如下：

```
return PartialView("ResultMessagePartial", new ResultMessageViewModel() { KindOfMessage= ResultMessageKind.Success", Content="Operation finished successfully"}); 
```

我的 ajax 调用是这样的：

```
$(function () {
            $(document).on("click", "#AnswerTheQuestion", function (e) {
                e.preventDefault();
                var answerContent = $("#AnswerContent").val();
                var messageId = $(this).parent().children("#rootMessageId:first").val();
                $.ajax({
                    url: this.href,
                    type: 'GET',
                    data: { rootMessageId: messageId, content: answerContent },
                    cache: false,
                    success: function (result) {
                        //show success result div
                    },
                    error: function () {
                        //show failure result div
                    }
                });
            }); 
```

我的问题是：我怎样才能实现我的结果 div 将在成功/错误处理程序中自动显示特定时间（如 1-2 秒）的功能？这将是对用户进程是否成功完成的某种通知。我想尽可能多地保留 DRY 原则来实现这样的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:49:11.560

```
 var hideSuccess = function(){ $('#success').hide() });
    var hideFailure = function(){ $('#failure').hide() });

    $(function () {
        $(document).on("click", "#AnswerTheQuestion", function (e) {
            e.preventDefault();
            var answerContent = $("#AnswerContent").val();
            var messageId = $(this).parent().children("#rootMessageId:first").val();
            $.ajax({
                url: this.href,
                type: 'GET',
                data: { rootMessageId: messageId, content: answerContent },
                cache: false,
                success: function (result) {
                    //show success result div
                    $('#success').show()
                    setTimeout(hideSuccess,3000);
                },
                error: function () {
                    //show failure result div
                    $('#failure').show()
                    setTimeout(hideFailure,3000);
                }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:41:57.830

您可以使用`setTimeout()`在指定的时间后执行功能。

例子：`setTimeout(function, delay);`

您将调用该方法并传递结果/输出和所需的时间间隔。

```
success: function (result) {
    // show message for 2 seconds
    show_message(result, 2)
} 
```

用于显示/隐藏错误的方法可能是这样的：

```
var show_message = function(message, interval){
    $('.message-div')
        .text(message)
        .css('display', 'block')
        .animate({
            opacity:1
        }, 200);
    setTimeout(
        $(function(){
            $('.message-div')
                .animate({
                    opacity:0
                }, 200, function(){
                    $(this).css('display','none');
                 });
        }), interval * 1000
    );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:53:53.077

尝试这个：

```
success: function(result){
    ('#successmsg').css('visibility', 'visible');
    setTimeout( "jQuery('#successmsg').hide();",3000 );
} 
```

同样对于错误：

```
error: function{
    ('#errormsg').css('visibility', 'visible');
    setTimeout( "jQuery('#errormsg').hide();",3000 );
} 
```

假设成功或错误消息在一个`div`with中`id="successmsg"`，`id="errormsg"`并且它们是`visibility:hidden`由 CSS 设置的，这将设置为`visibility:visible`，并在 3 秒后再次隐藏它。

# c# - stC#：如何调用存储过程并将参数用作数组

> ID：16022473
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:41:13.060
> 
> 标签：c#, sql, stored-procedures, parameter-passing

我正在研究一个将执行存储过程的按钮。返回数据时，我只需要将记录号传递到稍后将用于后页的数组中。然后，aspx 的后台会将记录号输入到字符串中，并将用户重定向到 RecordInfo 页面。这是我到目前为止所拥有的，但我不断收到同样的错误：

**{“此 SqlParameterCollection 不包含具有 ParameterName '@RecNum_OUT' 的 SqlParameter。”}**

我希望你能帮助我。

```
 <asp:Button ID="GetNextRec" runat="server" Text="Get Part" 
             onclick="GetNextRec_Click" OnCommand="btnNext_OnClick" /> 
```

ASPX.CS

```
protected void GetNextRec_Click(object sender, EventArgs e)
{
        String[] q = new String[1];
        q = Record.GetNextRec();
        Response.Redirect("~/PartsRecord.aspx?mode=full&queue=" + q[0], false);
} 
```

数据库cs

```
 public static String[] GetNextRec()
    {
        Database db = DataFactory.CreateDatabase();
        DbCommand dbc = db.GetProc("GetNextRec");

        db.ExecuteNonQuery(dbc); // IDK if this si doing anything
        String[] q = new string[1];
        q[0] = dbc.Parameters["@RecNum_OUT"].Value.ToString(); // "An SqlParameter with ParameterName '@requisition_OUT' is not contained by this SqlParameterCollection."}
        return q;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:19:06.697

好的，所以要调用不带参数的过程，只需删除这两行：

```
db.AddOutParameter(dbc, "Record_OUT", DbType.String, 15);
db.AddOutParameter(dbc, "locator_OUT", DbType.String, 9); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:09:31.887

所以我终于，想通了。我能够根据存储过程中设置的参数填充我需要的页面。我使用了以下代码：

```
db.AddOutParameter(dbCommand, "RecNum_OUT", DbType.String, 15);-- 
```

在命令下方获取所需的程序。一旦我添加了该行，一切正常。

感谢那些试图提供帮助的人。

# javascript - 强制（或很好地询问）刷新浏览器

> ID：16022474
> 
> 赞同：1
> 
> 时间：2013-04-15T18:41:14.540
> 
> 标签：javascript, ajax

所以我运行了一个使用大量 javascript 和 ajax 的网站。我了解如何让用户[在浏览器加载时刷新他们的](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)浏览器。但是，如果我需要他们在加载网站后刷新浏览器会怎样？

我想更改提供给客户端的 ajax 以加快速度，但这会导致尚未刷新浏览器的用户出错。

我能想出的唯一解决方案是，当需要新版本的 JavaScript 文件时，该站点使用一个弹出窗口，要求用户强制刷新他们的浏览器。（这不会真正修复当前版本，但可以防止将来出现问题。）

我讨厌将弹出窗口用于我可以自动执行的操作。有没有更好的方法来强制客户端更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:01:24.133

您听起来好像您的 JavaScript 无法通过 Ajax 方法获取它加载的数据的更新版本，对吗？例如，如果两个 Ajax 调用尝试加载“data.txt”，那么第二个调用仅使用缓存版本。

您也可能无法加载脚本本身的新版本。

解决这两个问题的方法是将随机生成的查询字符串添加到您的脚本源和 Ajax 源中。

例如，制作一个加载主脚本的脚本，如下所示：

```
/* loader1.js */
document.write('<script src="mainjavascript.js?.rand=', Math.random(), '"></script>'); 
```

在您的 HTML 中，只需执行

```
<script src="loader1.js"></script> 
```

同样的方法也适用于 JavaScript Ajax 请求。假设“client”是一个新的 XMLHttpRequest() 对象，并且已经正确设置了 readystatechange 函数等，那么您只需附加相同的查询字符串，如下所示：

```
request = client.open('GET', 'data.txt?.rand=' + Math.random(), true);
request.send(); 
```

您可能正在使用一个库来执行您的 Ajax 请求，因此它更容易。只需将数据 URL 指定为，`'data.txt?.rand=' + Math.random()`而不仅仅是“data.txt”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:47:42.040

```
window.location.href = "http://example.com" 
```

用 指向的页面替换当前页面`http://example.com`。

# c - 我怎么在这里泄漏内存，每次分配内存时我都在释放临时，不是吗？

> ID：16022479
> 
> 赞同：0
> 
> 时间：2013-04-15T18:41:37.000
> 
> 标签：c

指向泄漏内存的函数的链接。

```
bool check(const char* word)
{

    uint32_t len = strlen(word);
    char currentWord[len+1];

    for(int k = 0; k <= len; k++)
    {
        currentWord[k] = tolower((char)word[k]);
    }

    bool wordPresent = false;
    uint32_t indexSize = (dict.wordCount / ITEMSPERBUCKET);
    uint32_t index = (hashFunction(currentWord)%(indexSize-1));

    dictNode *temp = malloc(sizeof(dictNode));
    temp = chainedHashTable[index];
    do
    {
        if (strncmp(temp->word, currentWord, temp->len) == 0)
        {
            wordPresent = true;
            temp = NULL;
        }
        else
        {
            temp = temp->next;
        }
    }
    while (temp != NULL);

    free(temp);
    return wordPresent;
} 
```

[http://codepad.org/G8uuS79s](http://codepad.org/G8uuS79s)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:43:17.080

在分配它之后，你在下一行失去了 malloc 的值`temp`......你没有得到`free()`之后的值。

此外，当您最终退出`while`循环并在调用之前`free()`，temp == NULL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T18:43:22.713

直接在你之后`malloc`，

```
dictNode *temp = malloc(sizeof(dictNode));
temp = chainedHashTable[index]; 
```

您用 . 覆盖`malloc`ed 内存的地址`chainedHashTable[index]`。因此，您丢失了`malloc`ed 内存的唯一句柄，并泄漏了它。

幸运的是，你正在释放的东西

```
while (temp != NULL);

free(temp); 
```

是一个空指针，并且`free`ing 是无害的。`free` `chainedHashTable[index]`例如，如果您尝试这样做，那可能会破坏您的程序。

# python - tkinter 在输入框中设置值

> ID：16022480
> 
> 赞同：0
> 
> 时间：2013-04-15T18:41:37.383
> 
> 标签：python, tkinter

我正在编写一个将摄氏度转换为华氏度的 GUI，反之亦然。我需要摄氏度的输入框从 0.0 开始（它确实如此），华氏度从 32.0 开始（我不知道该怎么做）。如何有一个设置值的输入框？这是我用于程序构造函数的代码：

```
class TempFrame(Frame):
    """FUI for the program to convert between Celsius and Fahrenheit"""
    def __init__(self):
        """Sets up the window and widgets"""
        self.celciusVar= 0.0
        self.fahrenheitVar= 32.0
        Frame.__init__(self)
        self.master.title("Temperature Conversion")
        self.grid()

        celsiusLabel = Label(self, text= "Celsius")
        celsiusLabel.grid(row = 0, column = 0)
        self.celsiusVar= DoubleVar()
        celsiusEntry = Entry(self, textvariable = self.celsiusVar)
        celsiusEntry.grid(row = 1, column = 0)

        fahrenheitLabel = Label(self, text= "Fahrenheit")
        fahrenheitLabel.grid(row = 0, column = 1)
        self.fahrenheitVar= DoubleVar()
        fahrenheitEntry = Entry(self, textvariable= self.fahrenheitVar)
        fahrenheitEntry.grid(row = 1, column = 1)

        button_1 = Button(self, text= ">>>>", command= self.celToFahr)
        button_1.grid(row = 2, column = 0)

        button_2 = Button(self, text= "<<<<", command=self.fahrToCel)
        button_2.grid(row = 2, column = 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:03:00.213

目前，您只是`self.fahrenheitVar = 32.0`在稍后执行时覆盖`self.fahrenheitVar = DoubleVar()`。您不妨删除`__init__`.

您只需要使用类似的`set`方法设置值，`DoubleVar`

```
self.fahrenheitVar = DoubleVar()
self.fahrenheitVar.set(32.0) 
```

# .net - 为什么我不能添加对 system.web 的引用

> ID：16022485
> 
> 赞同：2
> 
> 时间：2013-04-15T18:41:50.997
> 
> 标签：.net, vb.net

我正在尝试向我的 VB.net 4.0 控制台应用程序项目添加对 System.Web 的引用，以便我可以使用[HTML 编码](http://msdn.microsoft.com/en-us/library/system.web.httputility%28v=vs.100%29.aspx)功能。我在添加参考框中没有看到 System.Web。

![在此处输入图像描述](https://i.stack.imgur.com/WRuLh.png)

此代码显示找不到命名空间

```
Imports System.Web.HTTPUtility 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:48:08.180

您正在使用 .NET 4 客户端配置文件。将其更改为项目设置下的完整框架。

对于 C#，在“应用程序”选项卡下查找“目标框架”选项。

对于 VB .NET，在“编译”选项卡下查找“高级编译选项”按钮。单击它，最后一个选项将用于目标框架。

# ios - 激活时间 iOS 开发者计划

> ID：16022486
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:41:54.983
> 
> 标签：ios

iOS开发者计划的激活时间是多久？那么，购买后需要多长时间才能访问 iTunes Connect 并且您的应用程序可以上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:49:35.873

通常需要大约 24 小时到几个工作日。我在美国，如果您必须传真国际文书等，我怀疑可能需要更长的时间。

一旦您的帐户被激活，请务必注意您在 iTunes Connect 中的合同。

耐心是一种美德。如果你总是急于推出应用程序，那么你最终会发布有缺陷的软件。深呼吸，喝杯咖啡或啤酒。Apple 的人员将很快激活您的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:50:17.820

最多需要 24 小时。这取决于很多。进行搜索，您会发现许多其他类似的问题。

# jquery - 如何在 symfony2 中的页面加载后在选择中添加选项

> ID：16022490
> 
> 赞同：0
> 
> 时间：2013-04-15T18:42:06.487
> 
> 标签：jquery, forms, select, symfony, choice

加载页面后，选择字段使用 jquery 动态完成，但未在 $form->getData() 中加载发布数据。经过一番搜索，选项是添加一个隐藏字段并使用 javascript 添加值。我想知道是否存在另一种选择。

这是动作：

```
 $form = $this->createFormBuilder()
    ->add('country','file')
    ->add('admcod2','file')
    ->add('isocountry', 'choice', array('empty_value' => 'select country'))
    ->add('iso','hidden')
    ->getForm(); 
```

选择充满了jquery

```
$("#form_isocountry").jeoCountrySelect({
    callback: function () {
    $("#form_isocountry").removeAttr('disabled');
    }
});

//this add the value to a hidden field... 
$("#form_isocountry").change(function() {
    $("#form_iso").val($("#form_isocountry").val());
}) 
```

所以 symfony 无法识别动态选择中加载的选项。var_dump($form->getData()) 显示填充的隐藏字段，但不显示选择字段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:59:24.613

我认为这`choice`不是此用例的正确字段类型，因为从表单字段的角度来看，可能的选择列表是空的。因此提交的值永远不会有效（除非为空）。

我可以建议您使用`hidden`作为此字段的类型或使用 type 为您的表单字段指定选项列表`choice`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:12:00.173

我以`ChoiceType`这种方式使用了字段。我认为这是合乎逻辑的选择。它的主要问题（以及默认的`EntityToIdTransformer`or `EntityChoiceList`）是它为每个可能的选项提供了水合物以便选择一个，这在某些情况下是矫枉过正的。您可能需要编写自己的转换器来防止这种情况。我在页面加载后使用 AJAX 将数据加载到选择中。它使页面更小，加快页面处理时间，并让我更精确地缓存每组选项。

这是针对 Symfony 2.0 的。它工作正常，我们在一个页面上放置了一堆选择的字段，其中包含 4000 多个选项（尽管它仅在用户与小部件交互时创建选择的元素）。现在限制是浏览器内存。

**联系实体类型**

```
class ContactEntityType extends AbstractType {    
    public function __construct(EntityManager $em) {
        $this->em = $em;
    }

    public function buildForm(FormBuilder $builder, array $options) 
    {
        $repository = $this->em->getRepository('AcmeContactsBundle:Contact');
        $builder->prependClientTransformer(new ContactToIdTransformer($repository));
    }

    public function buildView(FormView $view, FormInterface $form)
    {
        $contact = $form->getData();

        if($contact instanceof \Acme\ContactsBundle\Entity\Contact) {
            $view->set('choices', array($contact->getId() => $contact->getName()));
        }
    }

    public function getParent(array $options) {
        return 'choice';
    }
} 
```

**ContactToIdTransformer**

这是内置`EntityToIdTransformer`.

```
...
class ContactToIdTransformer implements DataTransformerInterface
{
    private $repository;

    public function __construct(EntityRepository $repository)
    {
        $this->repository = $repository;
    }

    public function transform($entity)
    {            
        if (null === $entity || '' === $entity) {
            return null;
        }

        if (!is_object($entity)) {
            throw new UnexpectedTypeException($entity, 'object');
        }

        if ($entity instanceof Collection) {
            throw new \InvalidArgumentException('Expected an object, but got a collection. Did you forget to pass "multiple=true" to an entity field?');
        }

        return $entity->getId();
    }

    public function reverseTransform($key)
    {
        if ('' === $key || null === $key) {
            return null;
        }

        if (!is_numeric($key)) {
            throw new UnexpectedTypeException($key, 'numeric');
        }

        if (!($entity = $this->repository->find($key))) {
            throw new TransformationFailedException(sprintf('The entity with key "%s" could not be found', $key));
        }
        return $entity;
    }
} 
```

# jquery - jquery 选择器混淆 - $('div p') vs $('div>p')

> ID：16022494
> 
> 赞同：2
> 
> 时间：2013-04-15T18:42:21.433
> 
> 标签：jquery, jquery-selectors

我正在尝试学习 jquery 并有一个问题-

页面上的 div 元素看起来像 -

```
<div id ="1">
    <p id="first"> one 
        <p id="second"> one.one 
            <p id="third"> one.one.one </p>
        </p>
    </p>
</div> 
```

以下两个选择器都给了我相同的结果-

```
 $('div p').css({'background-color' : 'blue'}); 

  $('div>p').css({'background-color' : 'blue'}); 
```

第二个选择器不应该只返回元素的第一个`<p>`标签吗？`<div>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:48:47.513

`$('div p')`选择作为 a 的后代的*所有* 标签。`<p>``<div>`

`$('div>p')` *仅*选择`<p>`作为 a 的直接子级的标签`<div>`。

* * *

您的代码中发生的情况是，由于结束`</p>`标记是可选的，因此浏览器将您的 HTML 读取为具有 3 个`<p>`（实际上是 5 个，因为最后 2 个结束标记是“误读”）标签，它们都是兄弟姐妹。

因此，它被解读为：

```
<div id ="1">
    <p id="first"> one</p> 
    <p id="second"> one.one</p>
    <p id="third"> one.one.one</p>
    <p></p>
    <p></p>
</div> 
```

这就是为什么他们都变成了蓝色。 `$('div>p')`匹配它们，因为它们都是`<div>`（或者浏览器认为的）的直接子级。

演示：http: [//jsfiddle.net/wP7uD/](http://jsfiddle.net/wP7uD/)

[打开浏览器的开发工具并检查 DOM，您会看到有 5 个`<p>`标签。]

寓意：您不能将`<p>`标签作为标签的子级`<p>`。

* * *

`<p>`W3C标签规范： [http ://www.w3.org/TR/html-markup/p.html](http://www.w3.org/TR/html-markup/p.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:43:34.563

```
div p 
```

匹配**a 内的**`p`所有元素，无论它们有多深。**`div`**

```
div > p 
```

匹配**a 的所有直接子**`p`元素**`div`**

您的情况有什么问题是HTML。不允许`p`嵌套在另一个内部`p`；`p`浏览器在呈现新的之前会自动关闭第一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T18:43:57.363

所有这些`<p>`都是第一个元素的子`<p>`元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T18:44:08.053

`div > p`表示 的第一级`p`子级`div`。并`div p`暗示任何地方的`p`孩子`div``div`

更多[文档在这里](http://api.jquery.com/child-selector/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T18:45:18.267

*   `$("div>p")`被称为**[子选择器（“父>子”）](http://api.jquery.com/child-selector/)**

    > 选择“parent”指定的元素的“child”指定的所有直接子元素。

*   `$("div p")`被称为**[后代选择器（“祖先后代”）](http://api.jquery.com/descendant-selector/)**

    > 选择作为给定祖先的后代的所有元素。

# php - 如何使用 PHP 生成条形码并将其显示为同一页面上的图像

> ID：16022496
> 
> 赞同：29
> 
> 时间：2013-04-15T18:42:34.207
> 
> 标签：php, ajax, twitter-bootstrap, barcode

我想使用 PHP 生成条形码（任何类型）

我有一个存储代码的变量

```
<?php
    $code= 'f5c9b918c5';
?> 
```

所以我只想生成一个条形码并在我想要的地方回显条形码图像.....请帮助

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-15T18:44:04.900

[这个BarCode PHP](https://www.barcodebakery.com/en)有一个库。您只需要包含几个文件：

```
require_once('class/BCGFontFile.php');
require_once('class/BCGColor.php');
require_once('class/BCGDrawing.php'); 
```

您可以生成多种类型的条形码，即一维或二维。添加所需的库：

```
require_once('class/BCGcode39.barcode.php'); 
```

生成颜色：

```
// The arguments are R, G, and B for color.
$colorFront = new BCGColor(0, 0, 0);
$colorBack = new BCGColor(255, 255, 255); 
```

添加所有代码后，您将获得以下方式：

[![](https://i.stack.imgur.com/llwOl.png)](https://i.stack.imgur.com/llwOl.png)
[（来源：[barcodebakery.com](https://www.barcodebakery.com/Content/Images/code39/hello.png)）]

**例子**

因为有几个人要求举个例子，所以我能做些什么来完成它

```
require_once('class/BCGFontFile.php');
require_once('class/BCGColor.php');
require_once('class/BCGDrawing.php');

require_once('class/BCGcode128.barcode.php');

header('Content-Type: image/png');

$color_white = new BCGColor(255, 255, 255);

$code = new BCGcode128();
$code->parse('HELLO');

$drawing = new BCGDrawing('', $color_white);
$drawing->setBarcode($code);

$drawing->draw();
$drawing->finish(BCGDrawing::IMG_FORMAT_PNG); 
```

如果您想实际创建图像文件以便保存它然后更改

```
$drawing = new BCGDrawing('', $color_white); 
```

至

```
$drawing = new BCGDrawing('image.png', $color_white); 
```

# three.js - 如何在 Three.js 中制作扁平环？

> ID：16022497
> 
> 赞同：0
> 
> 时间：2013-04-15T18:42:36.657
> 
> 标签：three.js

我能够使用 THREE.TorusGeometry 用 Three.js 制作甜甜圈。但我无法让它看起来像这些图片中的扁平环：

[http://www.google.com/imgres?imgurl=http://www.titanjewellery.co.uk/Mens/TI21-Titanium-8mm-Flat-Brushed-Ring.jpg&imgrefurl=http://www.titanjewellery。 co.uk/Mens/8mm-Brushed-Titanium-Flat-Ring.html&h=301&w=232&sz=16&tbnid=LCN7eQuo2wyG_M:&tbnh=90&tbnw=69&zoom=1&usg=__3vayMvDy26tsj2hwvCK9SsYwVwY=&docid=ZMdcBBBQOzMSoM&sa=X&ei=pEhsUeL4FKWJiAKCzIHYCQ&ved=0CEAQ9QEwBA&dur=1660](http://www.google.com/imgres?imgurl=http://www.titanjewellery.co.uk/Mens/TI21-Titanium-8mm-Flat-Brushed-Ring.jpg&imgrefurl=http://www.titanjewellery.co.uk/Mens/8mm-Brushed-Titanium-Flat-Ring.html&h=301&w=232&sz=16&tbnid=LCN7eQuo2wyG_M:&tbnh=90&tbnw=69&zoom=1&usg=__3vayMvDy26tsj2hwvCK9SsYwVwY=&docid=ZMdcBBBQOzMSoM&sa=X&ei=pEhsUeL4FKWJiAKCzIHYCQ&ved=0CEAQ9QEwBA&dur=1660)

这是我的甜甜圈的样子： ![在此处输入图像描述](https://i.stack.imgur.com/tMwdU.png)

是否还有另一个可以生成扁平环的 Three.js 几何体（具有平坦的内壁和外壁）？或者另一种方式来解决这个问题？

感谢您可以分享的任何指示！:)

更新：代码和依赖项取自：

[http://mrdoob.github.io/three.js/examples/misc_controls_trackball.html](http://mrdoob.github.io/three.js/examples/misc_controls_trackball.html)

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>three.js webgl - trackball controls</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
      body {
        color: #000;
        font-family:Monospace;
        font-size:13px;
        text-align:center;
        font-weight: bold;

        background-color: #fff;
        margin: 0px;
        overflow: hidden;
      }

      #info {
        color:#000;
        position: absolute;
        top: 0px; width: 100%;
        padding: 5px;
      }

      a {
        color: red;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="info">
      <a href="http://threejs.org" target="_blank">three.js</a> - trackball controls example</br>MOVE mouse &amp; press LEFT/A: rotate, MIDDLE/S: zoom, RIGHT/D: pan
    </div>

    <script src="three.min.js"></script>
    <script src="TrackballControls.js"></script>
    <script src="Detector.js"></script>
    <script src="stats.min.js"></script>
    <script>
      if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
      var container, stats;
      var camera, controls, scene, renderer;
      var cross;

      init();
      animate();

      function init() {
        camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
        camera.position.z = 500;

        controls = new THREE.TrackballControls( camera );
        controls.rotateSpeed = 1.0;
        controls.zoomSpeed = 1.2;
        controls.panSpeed = 0.8;
        controls.noZoom = false;
        controls.noPan = false;
        controls.staticMoving = true;
        controls.dynamicDampingFactor = 0.3;
        controls.keys = [ 65, 83, 68 ];
        controls.addEventListener( 'change', render );

        // world
        scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );

        var radius = 100;
        var tubeRadius = 50;
        var radialSegments = 8 * 10;
        var tubularSegments = 6 * 15;
        var arc = Math.PI * 2;
        var geometry = new THREE.TorusGeometry( radius, tubeRadius, radialSegments, tubularSegments, arc );
        var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading } );

        for ( var i = 0; i < 1; i ++ ) {
          var mesh = new THREE.Mesh( geometry, material );
          mesh.updateMatrix();
          mesh.matrixAutoUpdate = false;
          scene.add( mesh );
        } 

        // lights
        light = new THREE.DirectionalLight( 0xffffff );
        light.position.set( 1, 1, 1 );
        scene.add( light );

        light = new THREE.DirectionalLight( 0x002288 );
        light.position.set( -1, -1, -1 );
        scene.add( light );

        light = new THREE.AmbientLight( 0x222222 );
        scene.add( light );

        // renderer
        renderer = new THREE.WebGLRenderer( { antialias: false } );
        renderer.setClearColor( scene.fog.color, 1 );
        renderer.setSize( window.innerWidth, window.innerHeight );

        container = document.getElementById( 'container' );
        container.appendChild( renderer.domElement );
        //

        window.addEventListener( 'resize', onWindowResize, false );
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );
        controls.handleResize();
        render();
      }

      function animate() {
        requestAnimationFrame( animate );
        controls.update();
      }

      function render() {
        renderer.render( scene, camera );
      }
    </script>
  </body>
</html> 
```

[http://jsfiddle.net/alininja/b4qGx/1/](http://jsfiddle.net/alininja/b4qGx/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T21:35:21.573

有多种选择：

1.  使用[TubeGeometry](https://threejs.org/docs/#api/geometries/TubeGeometry) - 这可能是你需要的
2.  [ExtrudeGeometry](https://threejs.org/docs/#api/geometries/ExtrudeGeometry)挤出磁盘
3.  [用LatheGeometry](https://stackoverflow.com/questions/11397545/extruding-with-three-js/11423521#11423521)车削一个偏移矩形
4.  [使用 THREE.Shape -> 从webgl_geometry_shapes 示例](http://threejs.org/examples/webgl_geometry_shapes.html)中获取管状形状

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T16:22:50.020

您可以使用 RingGeometry 函数。以下代码在场景中添加了一个完整的（0 到 360 度之间）线框红色环，内半径等于 10，外半径等于 20。您可以使用其他指示的变量来调整您想要的光盘的方面产生 （）

```
var geometry = new THREE.RingGeometry(10, 20, thetaSegments, phiSegments, 0, Math.PI * 2);
var ring = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true}));
ring.position.set(25, 30, 0);
scene.add(ring); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T17:09:59.957

检查此代码！

```
var geometry = new THREE.TorusGeometry( 3, 0.5, 20, 2999 );
  ring1 = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({color: 0xffffff, wireframe: true}));
scene.add(ring1); 
```

# jquery - 确保始终加载 JSON 内容 - 有时会失败

> ID：16022501
> 
> 赞同：1
> 
> 时间：2013-04-15T18:42:54.093
> 
> 标签：jquery, ajax, json

我有一个具有基本 index.html 并使用 Ajax 加载其他 html 文件的微型站点，在这些加载的 HTML 文件中，我还从 JSON 文件加载内容。我想知道是否有办法确保始终加载此内容，因为我发现有时 HTML 加载但 JSON 内容没有：当用户单击转到新层时，我使用 AJAX 调用 JSON（loadContent( ))，在这个函数中，我调用另一个函数，它在特定的 html 元素中加载 JSON 内容 (showInfo())

也许我的代码不健壮，需要修改。

示例代码：

```
$(document).on('click', 'a.loser-next-button', function(e){
        e.preventDefault();
        $('#mch-overlay-content').html('');
        $('#mch-overlay-content').load("layer_recommend.html");
        loadContent();
});

function loadContent(){ 
    $.ajax({
        url: "json/" + language + "/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        cache : false,
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showStartpage(data);
            showInfo(data);
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 

}

function showInfo(){
    $(".start .text3").html(data[language]['startpage']['text3']);
    $(".start .text4").html(data[language]['startpage']['text4']);
    $(".start .text5").html(data[language]['startpage']['text5']);
    $(".start .text6").html(data[language]['startpage']['text6']);
    $(".start .text7").html(data[language]['startpage']['text7']);
                ................................... 
```

# python - Scrapy 导入错误：没有名为 items 的模块

> ID：16022503
> 
> 赞同：1
> 
> 时间：2013-04-15T18:43:00.210
> 
> 标签：python, scrapy, importerror

我设置我的项目使用

```
scrapy startproject can411 
```

所以`__init__.py`文件存在。

这是我的蜘蛛 canada_411Spider.py 中的代码（与项目文件夹命名不同）

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from can411.items import Can411Item 
```

当我尝试导入 Can411Item 时会抛出未找到模块错误。（是的 items.py 文件存在并且具有名为 Can411Item 的类）

我可以通过编辑 PYTHONPATH var 来修复问题

```
"C:\Python26\ArcGIS10.0;F:\TOOLS\Python Development\ScrapyWork\can411" 
```

这似乎是解决我的问题的一种非常糟糕的方法。任何项目如何在不将路径硬编码到环境设置中的情况下更好地解决这个问题？

文件结构为：

```
F:\TOOLS\Python Development\ScrapyWork\can411\can411\spiders 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:26:49.277

这些文件应该被称为`__init__.py`not `__init.py__`。

你的目录结构是什么样的？

```
dirbot/
├── dirbot
│   ├── __init__.py
│   ├── items.py
│   ├── pipelines.py
│   ├── settings.py
│   └── spiders
│       ├── __init__.py
│       └── dmoz.py
├── README.rst
├── scrapy.cfg
└── setup.py 
```

此外，也许您可​​以将完整的堆栈跟踪错误输出与您正在使用的命令行一起包含在内。

# ios - iOS 核心数据 - 编辑对象后没有立即获取任何内容

> ID：16022504
> 
> 赞同：0
> 
> 时间：2013-04-15T18:43:02.487
> 
> 标签：ios, core-data, uiviewcontroller, nsfetchrequest

在使用 CoreData 更新对象后立即获取数据时出现以下问题。

以下是我遇到的问题的一些细节：

*   我有一个“PersonDetailsViewController”，其中有 2 个包含有关人员的一些信息的表格视图（每个 Person 对象都添加到 CoreData 上下文中，并且除其他外还包含一个名称和一组电子邮件）。
*   tablewiews 的每一行都是可点击的，并连接到一个模态 VC（“EditDetailsVC”），让用户更新该人的信息。
*   通过 CoreData 上下文中的托管对象更新信息后，在“EditDetailsVC”上点击“完成”返回到“PersonDetailsVC”。
*   在 "PersonsDetailsVC" 的~~viewDidLoad~~ viewWillAppear 中，我取回此人的信息并填充表格视图。

在最后一步，事情没有以正确的方式发生：有时从数据库中正确检索到 Person 对象，有时什么都没有获取。

我尝试在更新对象后立即保存上下文或不保存上下文，但同样的问题发生了。

我认为这与访问数据库的时间有关，并且当我尝试在上下文中获取一些数据时，可能正在将数据写入上下文？

你能帮帮我吗？

编辑 ：

以下所有内容都属于一个名为“DataManager”的类，它集中了所有 CoreData 访问。该类使用单例设计模式。

```
@property (nonatomic,strong) NSManagedObjectContext * context ;
#define DM_CONTEXT      [DataManager sharedInstance].context; 
```

这是 viewWillAppear 中调用的方法：

```
+(NSDictionary*) getTargetDetailsForIdentifier:(NSNumber*)identifier
{

    NSMutableDictionary * targetDetails ;

    NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@"Target"];
    NSPredicate * predicate  = [NSPredicate predicateWithFormat:@"identifier =%@",identifier];
    request.predicate = predicate ;

    NSError * err ;

    NSArray * result = [DM_CONTEXT executeFetchRequest:request error:&err];

    if(err)
    {
        NSLog(@"%s : Error when fetching target details for the identifier <%@>",__PRETTY_FUNCTION__,identifier);
    }
    else if(![result count])
    {
        NSLog(@"%s : Nothing found for the identifier <%@>",__PRETTY_FUNCTION__,identifier);

    }
    else if([result count] > 1)
    {
        NSLog(@"%s : Error more than 1 target corresponding to the identifier <%@>",__PRETTY_FUNCTION__,identifier);
    }
    else
    {
        NSLog(@"%s : Target details successfully fetched for identifier <%@>",__PRETTY_FUNCTION__,identifier);

        targetDetails = [[NSMutableDictionary alloc] init];

        Target * target = [result lastObject];

        [targetDetails setObject:target.firstname  forKey:FIRSTNAME_KEY];
        [targetDetails setObject:target.lastname   forKey:LASTNAME_KEY];
        [targetDetails setObject:target.rank       forKey:RANK_KEY];
        [targetDetails setObject:target.identifier forKey:IDENTIFIER_KEY];

        if(target.photoData)
        {
            [targetDetails setObject:target.photoData  forKey:PHOTODATA_KEY];
        }

        NSSet * emailSet = [[NSSet alloc] initWithSet:target.emailList];
        NSSet * phoneSet = [[NSSet alloc] initWithSet:target.phoneList];

        [targetDetails setObject:emailSet forKey:EMAILS_KEY];
        [targetDetails setObject:phoneSet forKey:PHONES_KEY];
    }

    return targetDetails ;

} 
```

这是更新方法的片段。在这里，我只展示了更新具有唯一编号的人的电子邮件地址的部分：

```
+(void) replaceObject:(id)object withObject:(id)newObject forKey:(NSString*)key forIdentifier:(NSNumber*)identifier
{
    if([key isEqualToString:EMAIL_KEY])
    {
        if([object isKindOfClass:[NSString class]] && [newObject isKindOfClass:[NSString class]])
        {
            NSString * email    = (NSString *)object;
            NSString * newEmail = (NSString *)newObject;

            NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@"Email"];
            NSPredicate * predicate = [NSPredicate predicateWithFormat:@"(email =%@) AND (emailOwner.identifier=%@)",email,identifier];

            request.predicate = predicate ;

            NSError * err ;

            NSArray * result = [DM_CONTEXT executeFetchRequest:request error:&err];

            if(err)
            {
                NSLog(@"%s : Error when fetching the email object to be removed for target identifier <%@>",__PRETTY_FUNCTION__,identifier);
            }
            else if(![result count])
            {
                NSLog(@"%s : Nothing found.",__PRETTY_FUNCTION__);
            }
            else if([result count] > 1)
            {
                NSLog(@"%s : Error. More than 1 email object fetched for target identifier <%@>",__PRETTY_FUNCTION__,identifier);
            }
            else
            {
                Email * emailToUpdate = [result lastObject];
                emailToUpdate.email = newEmail ;

                if (![DM_CONTEXT save:nil])
                {
                    NSLog(@"%s : Can't Save after updating email! for the identifier <%@>",__PRETTY_FUNCTION__,identifier);

                }
                else
                {
                    NSLog(@"%s : Email successfully updated.",__PRETTY_FUNCTION__);
                }
            }
        }
        else
        {
            NSLog(@"%s : Nothing to replace, or bad objects.",__PRETTY_FUNCTION__);
        }
    }

} 
```

问题是每隔一次，在我更新此人的信息后，当我返回时`viewWillAppear`，`getTargetDetailsForIdentifier:`将不会返回任何内容（结果数组为空）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:55:59.797

> 返回到 "PersonDetailsVC" ...在 "PersonsDetailsVC" 的 viewDidLoad 中，我取回此人的信息并填充表格视图。

好吧，但这没有任何意义。在视图控制器的生命周期中`viewDidLoad`只调用*一次。*当您从模态视图控制器返回时，您不能使用它来“取回该人的信息”；它甚至没有被调用。

`viewWillAppear`你应该在or中做那种工作`viewDidAppear`。

如果在您从模态视图控制器返回`viewDidLoad` *时*被调用，那么您的架构也存在问题，即您不是“返回”而是创建一个全新的视图控制器，这也是错误的。

# c# - 棱镜解决方案项目组装

> ID：16022514
> 
> 赞同：0
> 
> 时间：2013-04-15T18:43:30.947
> 
> 标签：c#, prism

我从prism开始，我在vs 2010中有一个使用prism的解决方案，一个项目（PrimUI是我拥有外壳的地方，另一个项目（PrismUI.infrastructure）是我拥有例如区域名称类的地方：

```
 namespace PrismUI.Infrastructure
{
    class RegionNames
    {
        public static string ToolbarRegion = "ToolbarRegion";
        public static string ContentRegion = "ContentRegion";
    }
} 
```

然后在shell我想这样做：

```
<Window x:Class="PrismUI.Shell"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://www.codeplex.com/prism"

        Title="Shell">
    <Grid>
        <DockPanel LastChildFill="True">
            <ContentControl DockPanel.Dock="Top" prism:RegionManager.RegionName="{x:Static inf:RegionNames.ToolbarRegion}" />
            <ContentControl prism:RegionManager.RegionName="{x:Static inf:RegionNames.ContentRegion}" />
        </DockPanel>
    </Grid>
</Window> 
```

我必须添加这样的内容：

```
xmlns:inf="clr-namespace:PrismUI.infrastructure;assembly=PrismUI.infrastructure" 
```

但我在建议的列表中找不到该程序集，我该如何解决这个问题，

多谢

# c# - SoapFormatter - 序列化“干净”的肥皂

> ID：16022531
> 
> 赞同：1
> 
> 时间：2013-04-15T18:44:10.597
> 
> 标签：c#, serialization, soap

我需要序列化一个复合对象。我有一个对象“Trailer”，其中包含“Items”的“Shipments”。当我像这样使用 SoapFormatter 序列化对象时：

```
 Trailer trailer = new Trailer() { TrailerID = "1234" };
    Shipment shipment1 = new Shipment() { ShipmentNo = "123456789", CarrierCode = "1234", SupplierCode = "12345", CarrierProNo = "1234567", BillOfLadingNo = "11111111", DateNeeded = "2013-04-15", Loc = "000", PackageSlipNo = "11111111", OrderShipped = "2013-02-15", UnloadPriority = "", UpdateID = "" };
    shipment1.Items.Add(new Item() { ItemNo = "111111", ItemDescription = "Blah", ItemQty= "11", OrderNo = "1111111", OrderLineNo = "111" });
    shipment1.Items.Add(new Item() { ItemNo = "222222", ItemDescription = "Blah 2", ItemQty= "22", OrderNo = "2222", OrderLineNo = "2222" });
    trailer.Contents.Add(shipment1);

    MemoryStream memoryStream = new MemoryStream();
    SoapFormatter formatter = new SoapFormatter();
    formatter.Serialize(memoryStream, trailer);

    string trailerSoapMessage = Encoding.ASCII.GetString(memoryStream.GetBuffer()); 
```

我明白了：

```
 <SOAP-ENV:Body>
     <Trailer id="ref-1">
        <TrailerID id="ref-2">1234</TrailerID>
        <Contents href="#ref-3"/>
     </Trailer>
     <a1:ArrayList id="ref-3" xmlns:a1="http://schemas.microsoft.com/clr/ns/System.Collections">
        <_items href="#ref-4"/>
        <_size>2</_size>
        <_version>2</_version>
        </a1:ArrayList>
        <SOAP-ENC:Array id="ref-4" SOAP-ENC:arrayType="xsd:anyType[4]">
        <item href="#ref-5"/>
        <item href="#ref-6"/>
     </SOAP-ENC:Array>
     <Shipment id="ref-5">
        <ASNNumber id="ref-7">123456789</ASNNumber>
        <SupplierCode id="ref-8">12345</SupplierCode>
        <Loc id="ref-9">000</Loc>
        <CarrierCode id="ref-10">12345</CarrierCode>
        <CarrierProNo id="ref-11">12223</CarrierProNo>
        <BillOfLadingNo href="#ref-7"/>
        <PackageSlipNo href="#ref-7"/>
        <UpdateID id="ref-12"></UpdateID>
        <UnloadPriority href="#ref-12"/>
        <DateNeeded id="ref-13">2013-03-15</DateNeeded>
        <OrderShipped id="ref-14">2013-02-15</OrderShipped>
        <Items href="#ref-15"/>
     </Shipment>
    ..... 
```

我想要一条更结构化的消息，其中 Trailer 作为包含物品的货件的顶部节点。我还想删除添加到节点的 id 属性，而不是序列化 ArrayList 元数据。我意识到这是设计使然，但我不想要/不需要额外的数据。这可能是使用错误工具完成工作的情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:06:52.850

我相信我有我的解决方案。我用 MessageContract 装饰了我的 Trailer 类，并用 MessageBodyMember 装饰了所有属性：

```
[MessageContract]
public class Trailer
{
    [MessageBodyMember(Order=1)]
    public string TrailerID { get; set; }

    [MessageBodyMember]
    public List<Shipment> Contents { get; set; }

    public Trailer()
    {
        this.Contents = new  List<Shipment>();
    }
}

public class Shipment
{
    [MessageBodyMember(Order = 1)]
    public string ASNNumber { get; set; }

    [MessageBodyMember(Order = 2)]
    public string SupplierCode { get; set; }

    [MessageBodyMember(Order = 3)]
    public string Loc { get; set; }

    [MessageBodyMember(Order = 4)]
    public string CarrierCode { get; set; }

    [MessageBodyMember(Order = 5)]
    public string CarrierProNo { get; set; }

    [MessageBodyMember(Order = 6)]
    public string BillOfLadingNo { get; set; }

    [MessageBodyMember(Order = 7)]
    public string PackageSlipNo { get; set; }

    [MessageBodyMember(Order = 8)]
    public string UpdateID { get; set; }

    [MessageBodyMember(Order = 9)]
    public string UnloadPriority { get; set; }

    [MessageBodyMember(Order = 10)]
    public string DateNeeded { get; set; }

    [MessageBodyMember(Order = 11)]
    public string OrderShipped { get; set; }

    [MessageBodyMember(Order = 12)]
    public List<Item> Items { get; set; }

    public Shipment()
    {
        this.Items = new List<Item>();
    }
}

public class Item
{
    [MessageBodyMember(Order = 1)]
    public string ItemNo { get; set; }

    [MessageBodyMember(Order = 2)]
    public string OrderNo { get; set; }

    [MessageBodyMember(Order = 3)]
    public string OrderLineNo { get; set; }

    [MessageBodyMember(Order = 4)]
    public string ItemDescription { get; set; }

    [MessageBodyMember(Order = 5)]
    public string ItemQty { get; set; }

    public Item() { }
} 
```

然后我可以像这样创建一条消息：

```
System.ServiceModel.Channels.Message message = System.ServiceModel.Channels.Message.CreateMessage(System.ServiceModel.Channels.MessageVersion.Default, "GetTrailerContents", trailer); 
```

# java - Java中的计数-文本字段仅显示最后一个值

> ID：16022533
> 
> 赞同：0
> 
> 时间：2013-04-15T18:44:17.477
> 
> 标签：java, swing, counter, event-dispatch-thread, counting

我在java中模拟处理器计数器时遇到问题。例如，我想从 0 计数到 6，并在 Text 字段中显示当前计数值 (0, 1, 2, 3, 4, 5, 6)。当我单击“计数”按钮时，我的程序会冻结片刻，在文本字段中计数后，我只能看到数字 6。我想在计数过程中看到其他数字。这是我的代码的一部分：

```
for (int b=0; b<30; b++)
        {
           counter2.Count();
           try {
                    Thread.sleep(300);
                } catch(InterruptedException e){}
           text6.setText("TEST" + counter2.MainReg); } 
```

我能用它做什么？感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T18:46:55.583

您需要将计算放在其中一个工作线程上。来自甲骨文：

> 当 Swing 程序需要执行一个长时间运行的任务时，它通常使用其中一个工作线程，也称为后台线程。在工作线程上运行的每个任务都由 javax.swing.SwingWorker 的一个实例表示。SwingWorker 本身是一个抽象类；您必须定义一个子类才能创建 SwingWorker 对象；匿名内部类对于创建非常简单的 SwingWorker 对象通常很有用。

这是您可以访问并了解如何操作的链接：

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

这是 Oracle 的一个示例，说明如何从 SwingWorker 类中实现方法。[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)

由于您希望能够在过程发生时看到结果，您可以遵循 Oracle 的以下示例：http: [//docs.oracle.com/javase/tutorial/uiswing/concurrency/interim.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/interim.html)

编辑：正如 mKorbel 在下面的评论中所建议的，您也可以使用 Swing Timers，如下所述：http: [//docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# asp.net-mvc-4 - MVC4 谷歌字体和缩小

> ID：16022534
> 
> 赞同：10
> 
> 时间：2013-04-15T18:44:19.837
> 
> 标签：asp.net-mvc-4, cdn

我在我的一个 css 文件中有一个 @import 语句......我所有的 css 文件都被捆绑/缩小，显然这不是 kosher，因为我收到一个错误：

```
run-time error CSS1019: Unexpected token, found '@import' 
```

导入是来自 Google 的字体。在 MVC4 中处理 CDN 的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T19:35:46.620

这简直太尴尬了……

在 BundleConfig.cs 中：

```
bundles.UseCdn = true;

// bundles code

var cdnPath = "path to your resource (font in my case)";
bundles.Add(new StyleBundle("~/fonts", cdnPath)); 
```

然后在布局中

```
@Styles.Render("~/fonts") 
```

# c# - 获取使用 Adob e PDF Printer 打印的 PDF 文件名

> ID：16022535
> 
> 赞同：3
> 
> 时间：2013-04-15T18:44:23.013
> 
> 标签：c#, pdf, printing, adobe

我有一个 C# 应用程序，其中使用 Adob​​e PDF 打印机打印文档。使用 Adob​​e PDF 打印机打印文档时，会打开一个对话框，用户可以在其中选择位置和文件名。有什么方法可以使用`PrintDialog`或`PrintDocument`来获取打印时保存的 PDF 的文件名？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T09:28:46.320

您可以在以下位置阅读它：`HKEY_CURRENT_USER\Software\Adobe\Acrobat Distiller\10.0\AdobePDFOutputFolder` 有一个 REG_SZ，您可以更改它或读取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:41:04.337

不幸的是，mehdi_d 的答案中的关键不存在：`HKEY_CURRENT_USER\Software\Adobe\Acrobat Distiller\10.0\AdobePDFOutputFolder`.

但是，在此基础上，我能够在`HKEY_CURRENT_USER\Software\Adobe\Acrobat Distiller\PrinterJobControl`. 您要查找的是该`-1`键中的值，它具有最后生成的 PDF 文件。

# android - 如何将 HTML5 视频嵌入 web 视图

> ID：16022536
> 
> 赞同：2
> 
> 时间：2013-04-15T18:44:23.103
> 
> 标签：android, html, video

我以前看过这个问题的实例，但我要么无法让它们工作，要么不理解它们。

我确保将我的 webview 设置为 WebChromeClient 并在清单文件中启用硬件加速。我将编译后的应用程序发送到三星 Galaxy Tab GT-P1000。结果是视频元素加载但文件不播放。该 html 文件在我的 PC 上的 chrome 中按预期运行。

我在 ADT 方面没有太多经验，所以如果您可以尝试尽可能详细地回复您的回复，那就太好了！

这是我的html代码..

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript"></script>
    </head>
    <body>
        <div id="video">
            <video id="vid" height="240" width="360" preload controls>
                <source src="ljmuvideo.mp4" type="video/mp4">
        </video>
        </div>
        <script>
            var video = document.getElementById('vid');
            video.addEventListener('click',function(){
            video.play();
            },false);
        </script>
    </body>
</html> 
```

这是我的 MainActivity.java

```
package com.ljmu.sltwebview;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.view.WindowManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @SuppressLint("SetJavaScriptEnabled") @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView mywebview = (WebView) findViewById(R.id.webview);
        mywebview.loadUrl("file:///android_asset/html5vid.html");
        mywebview.getSettings().setUseWideViewPort(true);
        WebSettings webSettings = mywebview.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setBuiltInZoomControls(true);
        mywebview.setWebChromeClient(new WebChromeClient());

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ljmu.sltwebview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:hardwareAccelerated="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.ljmu.sltwebview.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:50:00.393

由于它不允许您从 Assets 文件夹播放电影，因此您需要将视频（以及为方便起见的其他资产）复制到 SD 卡。

这篇文章有一个很好的示例[如何将文件从“资产”文件夹复制到 sdcard？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)尽管您需要添加代码来创建输出目录（也来自那里的评论）。您可能还想检查文件是否存在，并在不需要时避免复制它们

移动 HTML 页面后，您可以通过 file:///sdcard/{myapp}/default.html 在 web 视图中引用它，然后资产的路径将相对于文档

# actionscript-3 - 适用于 ios 的应用内购买 (swf)

> ID：16022538
> 
> 赞同：2
> 
> 时间：2013-04-15T18:44:27.860
> 
> 标签：actionscript-3, application-loader

我正在用 starling (as3) 创建游戏，并通过应用内购买提供额外的内容。应用内购买采用 .swf 文件的形式。

现在，当我尝试使用苹果的应用程序加载器上传它时，我无法选择 swf 文件。

看来我只能传递签名的 zip 文件？这是正确的吗？这对我有什么用？没有其他方法可以上传吗？还是有办法上传 swf 文件？

我有点卡在这里，所以每一个帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:32:43.413

转到 Air for IOS 的设置，应该有“包含文件”的内容。在那里包含您的 SWF，也将其包含在与您的 FLA 相同的文件夹中。如果您想使用它，请在您的代码中导入 SWF，但您不应该将 SWF 上传到 Application Loader，只能上传 IPA。

# html - 透明 div 内的非透明 iframe

> ID：16022546
> 
> 赞同：0
> 
> 时间：2013-04-15T18:45:08.090
> 
> 标签：html, css, iframe

我有一个不透明度设置为 0.8 的 div，在该 div 里面我有一个 iframe。我根本不希望 iframe 是透明的（即 opacity 1.0）。

标记：

```
 <div id="container">
  some text and images
  <iframe width="500" height="370" src="http://www.youtube.com/embed/'+videoId+'" frameborder="0" allowfullscreen></iframe>
</div> 
```

CSS：

```
 #container{ 
   opacity: 0.8;
   filter:progid:DXImageTransform.Microsoft.Alpha(opacity=80);
 } 
```

我尝试将不透明度重置为 1.0，但它不起作用！，我将不胜感激任何帮助...

另外，这是设置不透明度的最佳方法吗（跨浏览器兼容性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:49:35.923

那是不可能的；当您设置不透明度时，它适用于所有子元素。您可以通过将背景颜色设置为`rgba(0, 0, 0, 0.8)`或类似的东西来实现您想要的。

编辑：对不起，我误读并错过了您已经拥有`opacity: 0.8`的内容以及特定于 MS 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:49:48.813

解决方案是在您的选择器中更加具体。将 div 保留为默认不透明度 (1)，而是更具体地定位 div 中应该具有不透明度的项目。就像：

```
#container p, #container img {
   opacity: 0.8;
   filter:progid:DXImageTransform.Microsoft.Alpha(opacity=80);
} 
```

# extjs - 列表视图未显示在面板中

> ID：16022554
> 
> 赞同：0
> 
> 时间：2013-04-15T18:45:31.183
> 
> 标签：extjs, sencha-touch

更新：我发现如果这样做

```
this.add([topToolbar, {
        xtype: "fieldset",
        items: [showNameEditor, textEditor]
    },
    showsList, bottomToolbar
]); 
```

和

```
layout: {
    type: 'fit'
} 
```

然后列表显示但文本字段不出现

原来的：

我试图让一个列表在我的面板中显示两个文本字段，但该列表没有出现。我用列表尝试了不同的商店，但仍然没有显示。

```
var showNameEditor = {
    xtype: 'textfield',
    name: 'name',
    label: 'Name',
    required: true
};
var textEditor = {
    xtype: 'textfield',
    name: 'name',
    label: 'Name',
    required: true
};
var showsList = {
    xtype: 'list',
    title: 'Sample',
    itemTpl: '{title}',
    data: [{
            title: 'Item 1'
        }, {
            title: 'Item 2'
        }, {
            title: 'Item 3'
        }, {
            title: 'Item 4'
        }
    ]
};

this.add([topToolbar, {
        xtype: "fieldset",
        items: [showNameEditor, showsList, textEditor]
    },
    bottomToolbar
]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:26:25.773

如果要显示其内容，则必须为`fieldset`&指定尺寸，因此请使用& configs`form``width``height`

# forms - Zend\Form: Call to a member function insert() on a non-object in Zend/Form/Fieldset.php

> ID：16022555
> 
> 赞同：5
> 
> 时间：2013-04-15T18:45:32.193
> 
> 标签：forms, zend-framework2

I am learning how to use Zend Framework 2 (2.1.4) forms and running into this error.

```
Call to a member function insert() on a non-object in ... /Zend/Form/Fieldset.php on line 178 
```

I don't want use the form to automatically connect to a database, in fact I only want to use the form to help validate and will pull from and populate it with an array of values. How do I turn off the database connectivity in the form objects?

I am used to dealing with the ZF1 forms so this new form system is confusing. Once I thought about it though, the way we can use the form elements in our view scripts for formatting is going to be nice. Those old decorators were a pain. Anyway, for me, it would be nice to use the forms without dealing with bound database objects. Is this possible? It just seems so overly complicated to need a model class using InputFilterAwareInterface classes in addition to a simple form. One step at a time though, I can't even get the form to display.

I appreciate any help.

Below are my controller, form, and view scripts:

Form class:

```
namespace FBWeb\Form;
use Zend\Form\Form;
use Zend\Form\Element;
class ClientForm extends Form
{
    public function __construct()
    {
        $this->setAttribute('method', 'post');

        $this->add(array(
            'name' => 'client',
            'type' => 'Zend\Form\Element\Text',
            'options' => array(
                'label' => 'Client Name',
            ),
            'attributes' => array(
                'type' => 'text',
            ),

        ));

        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type'  => 'submit',
                'value' => 'Add'
            ),
        ));
    }
} 
```

Controller class:

```
namespace FBWeb\Controller;
use Zend\Debug\Debug;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Session\Container;
use Zend\Http\Request;
use FBWeb\Form\ClientForm;

class ClientController extends AbstractActionController
{

    public function indexAction()
    {
        $clientform = new ClientForm();
        return array('form' => $clientform);
    }
} 
```

index.phtml view script:

```
<div id="clientformtable">
<?php 
$form = $this->form;
$form->setAttribute('action','/app/client/add');
$form->prepare();
echo $this->form()->openTag($form);
$client = $form->get('client');
echo $this->formRow($client);
echo $this->form()->closeTag();
?>
</div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-15T19:09:44.453

This, and similar error messages, happen due to the fact that the form isn't properly set up. As you can see within the code above the `__construct()` function doesn't call the parents constructor. Therefore the internal "bootstrapping" doesn't happen and the error occurs.

You have to make sure to always call the parents constructor when dealing with `Zend\Form\Form` and/or `Zend\Form\Fieldset`.

```
parent::__construct('client-form'); 
```

# python - Python 3 to_bytes 是否已向后移植到 python 2.7？

> ID：16022556
> 
> 赞同：8
> 
> 时间：2013-04-15T18:45:33.140
> 
> 标签：python

这是我追求的功能： -

[http://docs.python.org/3/library/stdtypes.html#int.to_bytes](http://docs.python.org/3/library/stdtypes.html#int.to_bytes)

我需要大字节序支持。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-27T01:51:13.803

根据@nneonneo 的回答，这是一个模拟 to_bytes API 的函数：

```
def to_bytes(n, length, endianess='big'):
    h = '%x' % n
    s = ('0'*(len(h) % 2) + h).zfill(length*2).decode('hex')
    return s if endianess == 'big' else s[::-1] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-15T18:57:16.947

为了回答您最初的问题，对象的`to_bytes`方法`int`没有从 Python 3 反向移植到 Python 2.7。它被考虑但最终被拒绝。[请参阅此处](http://bugs.python.org/issue1023290)的讨论。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-15T18:54:43.877

要在 Python 2.x 中打包任意长度`long`的 s，可以使用以下命令：

```
>>> n = 123456789012345678901234567890L
>>> h = '%x' % n
>>> s = ('0'*(len(h) % 2) + h).decode('hex')
>>> s
'\x01\x8e\xe9\x0f\xf6\xc3s\xe0\xeeN?\n\xd2' 
```

这以大端顺序输出数字；对于小端，反转字符串 ( `s[::-1]`)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-15T18:51:09.450

您可能可以[`struct.pack`](http://docs.python.org/2/library/struct.html#struct.pack)改用：

```
>>> import struct
>>> struct.pack('>i', 123)
'\x00\x00\x00{' 
```

它不会像那样做任意长度`int.to_bytes`，但我怀疑你需要那个。

# c# - 将字符串转换为int的问题

> ID：16022566
> 
> 赞同：1
> 
> 时间：2013-04-15T18:46:18.973
> 
> 标签：c#

`string`我在将 a 转换为`int`, char by char时遇到了一些问题。当我单步执行代码时，其中`char`的每一个`string`都被转换为它的 ASCII 表示。例如， a`0`正在转换为`48`.

我想做的是取一个 4 位数字，取每个数字并做一些不同的事情。

例如，如果`date1`是`0415`，`num1`则应为 0、4、1和`num2`5 。`num3``num4`

```
foreach (char c in date1)
{                
    switch (num)
    {
        case 1:
            // calculate first number
            cNum = Convert.ToInt32(c);
            num1 = c * 1;
            break;

        case 2:
            // calculate second number
            cNum = Convert.ToInt32(c);
            num2 = c * 2;
            break;

        case 3:
            // calculate third number
            cNum = Convert.ToInt32(c);
            num3 = c * 3;
            break;

        case 4:
            // calculate fourth number
            cNum = Convert.ToInt32(c);
            num4 = c * 4;
            break;

        default:
            break;
    }

    num++;
} 
```

非常感谢任何帮助，如果需要任何其他帮助，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:49:05.907

尝试使用 GetNumericValue 而不是 Convert.ToInt32()。

此处的文档：http: [//msdn.microsoft.com/en-us/library/system.char.getnumericvalue.aspx](http://msdn.microsoft.com/en-us/library/system.char.getnumericvalue.aspx)

另外-除非我遗漏了什么，否则您可能可以将代码简化为：

```
num1 = Char.GetNumericValue(date1[0]);
num2 = Char.GetNumericValue(date1[1]);
num3 = Char.GetNumericValue(date1[2]);
num4 = Char.GetNumericValue(date1[3]); 
```

这对我来说似乎有点奇怪，但无论如何你的循环只处理前 4 个字符。

如果您想处理超过 4 个，我会回到使用循环并将所有数字推入一个数组或其他东西，而不是为每个数字创建一个特定的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:50:39.073

[`Convert.ToInt32`](http://msdn.microsoft.com/en-us/library/ww9t2871.aspx)行为与记录完全一致：

> 一个 32 位有符号整数，表示 value 参数的 UTF-16 编码代码点。

您可以使用[`Char.GetNumericValue`](http://msdn.microsoft.com/en-gb/library/system.char.getnumericvalue.aspx)来获取字符的数值，或者如果您知道它在 '0'-'9' 范围内，则可以使用：

```
int digit = c - '0'; 
```

这有时比调用更简单`Char.GetNumericValue`，因为后者返回`double`以便它可以表示诸如 ¼ 之类的值。如果您*只想*处理“0”-“9”，最好验证一下：

```
if (c < '0' || c > '9')
{
    // Throw an exception or something like that
} 
```

此外，请注意，如果`date1`真的是日期表示，请不要自己做所有这些 - 使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-GB/library/system.datetime.tryparseexact.aspx)（或`TryParseExact`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:50:16.047

您的 case 语句正在寻找 ASCII 值`1, 2, 3,...`，而不是字符值。更改您的案例陈述以匹配：

```
case '1':
case '2':
... 
```

# postgresql - 当 Postgres shared_buffers 太小时会发生什么？

> ID：16022567
> 
> 赞同：0
> 
> 时间：2013-04-15T18:46:28.517
> 
> 标签：postgresql

在 Postgres 文档中，它说参数“shared_buffers”设置了数据库服务器用于共享内存缓冲区的内存量。我知道如果这个值太高，那么数据库服务器可能会使用太多的内存而不是可用的内存，并可能导致分页发生。

但是，如果这个值太低会怎样？如果没有足够的内存来进行密集查询，数据库会崩溃吗？具体来说，它会导致什么？IO等待时间长？CPU使用率高？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:53:36.247

它不会崩溃；它可能表现不佳。

# jquery - jquery.kinetic.js，什么是听众？

> ID：16022569
> 
> 赞同：1
> 
> 时间：2013-04-15T18:46:38.580
> 
> 标签：jquery

我正在研究 javascript 和 jquery，为了更好地理解我正在分析[jquery.kinetic.js 插件](http://the-taylors.org/jquery.kinetic/ "http://the-taylors.org/jquery.kinetic/")的工作原理，一切都很顺利，直到我尝试在插件的网站上的选项中对听众做一些事情部分 说：

> 听众：
> 
> > 所有侦听器都被调用：
> > 
> > *   this = 持有滚动容器的 jQuery 对象
> >     
> >     
> > *   单个设置参数，它是所有选项和 { scrollLeft, scrollTop, velocity, velocityY }

现在，这是一个很大的帮助，但是，如果你能告诉我如何处理这个，我可以看到的东西，那就太好了！从那时起，我可以独自奋斗以更好地理解。

# c# - 如何指定在运行时使用哪个 .NET 框架

> ID：16022574
> 
> 赞同：1
> 
> 时间：2013-04-15T18:47:04.567
> 
> 标签：c#, .net-3.5, .net-4.5

我有一个当前在`.NET 3.5`框架中运行的应用程序。但是，如果安装了 SharePoint 2013，应用程序需要加载一组不同的 dll，这些 dll 将使用`.NET 4.0 and/or 4.5`. 据我了解，创建一个“引导程序”将处理该事件。

环顾四周并评估 SharePoint 版本将很容易，但是如何设置为应用程序加载哪组 dll 的逻辑？我目前正在假设它将处理动态加载 dll，但我不确定解决此问题的最佳方法。

在 .NET 版本之间动态选择的最佳方式是什么？

我已经研究过的一些链接包括：[指定 .Net 配置文件](https://stackoverflow.com/questions/4150383/specifying-the-location-of-net-configuration-files) 和[MSBuild 的位置、条件 NET 运行时](https://stackoverflow.com/questions/14979802/msbuild-conditional-net-runtime) 和[条件编译和框架目标](https://stackoverflow.com/questions/2923210/c-sharp-conditional-compilation-and-framework-targets)。但我无法从他们那里收集到很多有用的信息。目前我正在探索这个问题：[DllImport vs LoadLibrary，最好的方法是什么？](https://stackoverflow.com/questions/548382/dllimport-vs-loadlibrary-what-is-the-best-way)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:52:37.080

您可以尝试在 App.config 中设置[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)以选择 .Net 版本。

就像是：

```
<configuration>
   <startup>
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

# ios - UIPageViewController 第二个视图变为空白

> ID：16022576
> 
> 赞同：8
> 
> 时间：2013-04-15T18:47:08.647
> 
> 标签：ios, xamarin.ios, uipageviewcontroller

在我的应用程序中使用 UIPageViewController 时，我遇到了一些非常奇怪的行为。在第一次滑动到下一个视图或任何时候滑动方向发生变化（即在列表末尾并返回）时，结果视图是空白的，我需要再次滑动相同的方向才能显示适当的视图。

具有 3 个视图的示例工作流：

1.  呈现的第一个视图
2.  向右滑动
3.  第二个视图闪烁进出
4.  向右滑动
5.  呈现的第二个视图
6.  向右滑动
7.  呈现的第三个视图
8.  向左滑动
9.  第二个视图闪烁进出
10.  向左滑动
11.  呈现的第二个视图

我注意到当闪烁发生时（上面的 2 和 3）通过日志记录，事件顺序如下：

1.  调用 GetNextViewController
2.  调用 GetPreviousViewController
3.  调用 GetNextViewController

然后，当我再次滑动 GetNextViewController 时，它会被适当地调用并显示视图。

我的问题是，显然，第二个视图应该显示没有闪烁。我尝试了各种各样的事情，但没有任何成果。

**更新**

这是一个重现问题的示例单控制器应用程序：

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Collections.Generic;

namespace TestPageView
{
    public partial class TestPageViewViewController : UIViewController
    {
        public TestPageViewViewController () : base ("TestPageViewViewController", null)
        {
        }

        public override void DidReceiveMemoryWarning ()
        {
            // Releases the view if it doesn't have a superview.
            base.DidReceiveMemoryWarning ();

            // Release any cached data, images, etc that aren't in use.
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            var controllers = new List<UIViewController>
            {
                new TestViewController(View, 1),
                new TestViewController(View, 2),
                new TestViewController(View, 3),
                new TestViewController(View, 4)
            };

            var _pageViewController = new UIPageViewController(UIPageViewControllerTransitionStyle.Scroll, UIPageViewControllerNavigationOrientation.Horizontal);
            var dataSource = new ViewDataSource(controllers);
            _pageViewController.DataSource = dataSource;
            //ViewDataSource has an indexer that returns it's controllers
            _pageViewController.SetViewControllers(new[] { controllers[0] }, UIPageViewControllerNavigationDirection.Forward, false, null);
            View.AddSubview(_pageViewController.View);
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }
    }

    public class TestViewController : UIViewController
    {
        private readonly UIView _parent;
        private readonly int _number;
        public TestViewController(UIView parent, int number)
        {
            _parent = parent;
            _number = number;
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            var textView = new UITextView(_parent.Bounds);
            textView.TextAlignment = UITextAlignment.Center;
            textView.AttributedText = new NSAttributedString(_number.ToString(), UIFont.BoldSystemFontOfSize(18));
            View.Add(textView);
        }
    }

    public class ViewDataSource : UIPageViewControllerDataSource
    {
        private LinkedListNode<UIViewController> current;

        public ViewDataSource(IEnumerable<UIViewController> controllers)
        {
            var controllerLiist = new LinkedList<UIViewController>(controllers);
            current = controllerLiist.First;
        }

        public override UIViewController GetPreviousViewController(UIPageViewController pageViewController, UIViewController referenceViewController)
        {
            if(current.Previous == null){
                Console.WriteLine("returning previous nothing");
                return null;
            }
            Console.WriteLine("returning previous something");
            current = current.Previous;
            return current.Value;
        }

        public override UIViewController GetNextViewController(UIPageViewController pageViewController, UIViewController referenceViewController)
        {
            if(current.Next == null){
                Console.WriteLine("returning next nothing");
                return null;
            }
            Console.WriteLine("returning next something");
            current = current.Next;
            return current.Value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T03:42:25.433

iOS 会调用 GetPreviousViewController 和 GetNextViewController 两次：第一次调用当前控制器，第二次调用当前控制器的后空翻。

你应该这样做

> 当前=当前。上一个；

仅在第一次通话时。

检查 referenceViewController 来做到这一点：

```
public override UIViewController GetPreviousViewController (UIPageViewController pageViewController, UIViewController referenceViewController)
    {
        var __c = Pages.Find(referenceViewController);

        if (__c.Previous != null)
            return __c.Previous.Value;
        else
            return null;
    }
    public override UIViewController GetNextViewController (UIPageViewController pageViewController, UIViewController referenceViewController)
    {
        var __c = Pages.Find(referenceViewController);

        if (__c.Next != null)
            return __c.Next.Value;
        else
            return null;
    } 
```

# c++ - cocos2d-x pugi xml 法语单词

> ID：16022578
> 
> 赞同：0
> 
> 时间：2013-04-15T18:47:19.383
> 
> 标签：c++, cocos2d-x, pugixml

我在用法语单词解析 xml 文档时遇到了一些问题。例如 pêche 解析后我有这个：“p\xc3\xaache”而不是“pêche”

这是我的代码：

```
 for(pugi::xml_node child = parent.first_child(); child; child = child.next_sibling()){
                    std::string desc = child.child_value("word");
} 
```

有什么建议么？肿瘤坏死因子。

# python - Django模板识别下拉选项

> ID：16022579
> 
> 赞同：0
> 
> 时间：2013-04-15T18:47:24.897
> 
> 标签：python, django

每个项目都有一个下拉列表，可以选择并保存它。重新加载页面后，我希望用户能够看到他们所做的选择。

楷模：

```
CATEGORY_CHOICES = (
    ('0', 'All Position'),
    ('1', 'Green'),
    ('2', 'Aqua'),
    ('3', 'Blue'),
    ('4', 'Yellow'),
)

class ColorCoat(models.Model):
    title = models.CharField(max_length=100)
    category = models.CharField(max_length=1, choices=CATEGORY_CHOICES)

    def get_category(self):
        return CATEGORY_CHOICES[int(self.category)][1] 
```

我尝试了什么：

```
{% for item in color_items %}
...
    {% if item.category == 1 or 3 %}
        <span>Greenish Blue</span>
    {% endif %}
    {% if item.category == 2 or 4 %}
         <span>Turquoise</span>
    {% endif %}
{% endfor %} 
```

如何正确检查 item.category 的值是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:48:49.673

您的逻辑有缺陷，请使用：

```
{% if item.category == '1' or item.category == '3' %} 
```

和：

```
{% if item.category == '2' or item.category == '4' %} 
```

该表达式`item.category == 2 or 4`并不意味着您认为它会做什么；它被解释为`(item.category == 2) or 4`。如果`item.category`确实是`2`，则该表达式的计算结果为`(True) or 4`，但如果`item.category`是`3`，则`(False) or 4`返回`4`，这`True`在布尔上下文中被考虑。

此外，您在 中有字符串*，*`item.category`但您正在针对`int`值进行测试。

# javascript - onmouseout 和 onmouseover

> ID：16022583
> 
> 赞同：0
> 
> 时间：2013-04-15T18:47:32.083
> 
> 标签：javascript

我正在做涉及使用 javascript 的作业。我的部分家庭作业是使用事件处理程序 onmouseout 和 onmouseouver。当用户将鼠标悬停在特定的 div 元素上时应该发生什么，字体大小增长 25%，当用户将鼠标移出 div 元素时，字体大小恢复正常。我的问题是，是否可以将 onmouseover 函数和 onmouseout 函数合并到一个函数中？不知何故，这就是我的老师希望我们做的。到目前为止，我已经开始了。

```
function FontSize(x)
{
    x.style.fonstSize = large;
} 
```

我还认为这不是使字体大 25% 的正确代码，但我不确定如何在此函数中真正合并 onmouseout。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:17:24.177

作为一名教师，我 99% 确信，教师所说的“一个函数”是指一个用于更改字体大小的通用函数，而不是一个使用条件语句向后工作并确定是否应该执行 onmouseout 或鼠标悬停。

您的脚本应包含：

```
function resize(elem, percent) { elem.style.fontSize = percent; } 
```

您的 HTML 应包含：

```
<div onmouseover="resize(this, '125%')" onmouseout="resize(this, '100%')"
Text within div..
</div> 
```

注意：像这里这样的情况，正是 JavaScript 使用关键字“this”的原因——以避免我们需要使用复杂的 document.getElementById() 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:13:10.137

您可以使用“%”属性来控制字体大小，如此处所述[，](http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/)使用以下代码。

```
 document.getElementById("div1").onmouseover = function() {        
            document.getElementById("div1").style.fontSize  = "125%"
                        };

 document.getElementById("div1").onmouseout = function() {        
            document.getElementById("div1").style.fontSize  = "100%";
                        }; 
```

这是工作的jsfiddle：http: [//jsfiddle.net/LxhdU/](http://jsfiddle.net/LxhdU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:01:18.547

您可能不需要显式调用元素上的两个事件，而是您创建的扩展将执行此操作。扩展`Element`的原型。Jquery 也与此类似。

[参考原型](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

见小提琴：- [http://jsfiddle.net/4fs7V/](http://jsfiddle.net/4fs7V/)

```
Element.prototype.hover= function( fnOver, fnOut ) {

    this.onmouseover=fnOver;
    this.onmouseout=fnOut || fnOver;
        return this;
    };

document.getElementById('test').hover(function(){
                                         //do your mouseover stuff
                                                },
                                     function(){
                                           //do your mouseout stuff
                                     }); 
```

## 更新

同样也可以通过一个功能来实现：-

悬停我

```
.largeFont {
    font-size:125%;
}

Element.prototype.hover = function (fnOver, fnOut) {
    this.onmouseover = fnOver;
    this.onmouseout = fnOut || fnOver;
    return this;
};

document.getElementById('test').hover(changeMe);

function changeMe()
{
    if(this.hasAttribute('class'))
    {
        this.removeAttribute('class');
    }
    else
    {
         this.setAttribute('class', 'largeFont');
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T19:11:48.870

我会做一些简单的事情，如下所示。`large`和值可以是您需要的`small`任何值以使字体大小起作用，或者它们可以是您在之前的代码中定义的变量。

演示：http: [//jsfiddle.net/lucuma/EAbYn/](http://jsfiddle.net/lucuma/EAbYn/)

```
 function doHover(e) {
    if (e.type=='mouseover') {
          this.style.fontSize = "large";   
    } else {

          this.style.fontSize = "small";  
    }
}

var el = document.getElementById('myelement')
el.onmouseout =doHover;
el.onmouseover=doHover; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T18:58:13.380

是的你可以。在两个事件上调用相同的函数，并传递一个参数来指示字体大小是应该增加还是减少。

```
ChangeFontSize = function(element, shouldIncreaseFontsize)
{
    var small=14;
    var large = small * 1.25;

    if(shouldIncreaseFontsize) {
         element.style.fontSize = large + "px";
    }
    else {
         element.style.fontSize = small + "px";
    }

} 
```

[http://jsfiddle.net/TMHbW/1/](http://jsfiddle.net/TMHbW/1/)

# asp.net-mvc-3 - TortoiseGIT 合并冲突.edmx 文件错误

> ID：16022586
> 
> 赞同：1
> 
> 时间：2013-04-15T18:47:41.257
> 
> 标签：asp.net-mvc-3, git, entity-framework, tortoisegit

我正在尝试使用 TortoseGIT 合并 .edmx 文件，但我遇到了冲突，我不知道代码与 connectorPoint 差异的含义是什么？

在此处查看屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/fpIKc.png)

有没有人对此感到厌烦？

```
 <ConnectorPoint PointX="5.5" PointY="65.78099659375" />
      <ConnectorPoint PointX="7.7760391666666671" PointY="65.78099659375" />
      <ConnectorPoint PointX="8.1614608333333329" PointY="65.78099659375" />
      <ConnectorPoint PointX="10.40625" PointY="65.78099659375" />
      <ConnectorPoint PointX="10.40625" PointY="64.74949218750001" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:03:27.593

看起来好像两个分支都添加了连接器点。由于有添加，git 不知道取哪个（你的或他们的），这就是为什么存在合并冲突的原因。

您可能想要同时添加两个，因此所有连接点都存在，但这可能是试错类型的问题。合并后，您可以随时撤消合并并重试。

# postgresql - Max Postgres 连接设置的经验法则？

> ID：16022588
> 
> 赞同：11
> 
> 时间：2013-04-15T18:47:42.913
> 
> 标签：postgresql

根据经验，我应该设置我的 Postgres 服务器的最大连接数是多少？例如，如果我有 8 GB 内存和四核 3.2 GHZ 机器，并且服务器专用于 Postgres，那么最大连接数是安全的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:54:20.310

没有真正的经验法则，因为它确实取决于您的负载。

*   如果您执行大量微小查询，则可以轻松增加连接数量。
*   如果您有一些繁重的查询，那么您可能会增加，`work_mem`因此您将用大量连接耗尽内存。

基本的事情是：

*   没有比你的记忆允许的更多的连接。
*   如果可能的话，不要杀死和重新创建连接（pgbouncer 浮现在脑海中）

# ruby - 由于初始化程序 Yaml 文件，Rspec 测试未运行

> ID：16022591
> 
> 赞同：3
> 
> 时间：2013-04-15T18:47:47.180
> 
> 标签：ruby, rspec, ruby-on-rails-3.2, yaml

我正在将带有 Rspec 的测试集成到一个相当大的/已开发的应用程序中。当我运行测试时，我的一些初始化程序收到了非常奇怪的错误。

例如，我`carrierwave.rb`加载了一个 yaml 文件，当我运行测试命令时，我得到：

```
carrierwave.rb:11:in `block in <top (required)>': undefined method `[]' for nil:NilClass 
```

这是指下面的第二行代码：

```
fog_config = YAML::load_file(Rails.root.join 'config/fog.yml')[Rails.env.to_s]
config.fog_directory = fog_config['directory'] 
```

如果我暂时删除carrierwave中的那行代码，omniauth也会开始抱怨：

```
omniauth.rb:4:in `block in <top (required)>': undefined method `symbolize_keys' for nil:NilClass (NoMethodError) 
```

同样，另一个 yaml 文件：

```
 fb_config = YAML::load_file(Rails.root.join 'config/fb_app_version.yml')[Rails.env].symbolize_keys 
```

我猜解决方案是更改我的 yaml 文件或在测试中包含一些内容，但我不确定是什么。任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:16:59.200

看起来您需要在有`test`问题的 Yaml 文件中包含条目。

例如，您`config/fog.yml`可能看起来像这样：

```
production:
  directory: the_prod_directory
  other_keys: ...

development:
  directory: the_dev_directory
  other_keys: ... 
```

您需要添加一个`test`密钥：

```
test:
  directory: the_test_dir
  other_keys: appropriate values 
```

# haskell - cabal 测试未找到模块

> ID：16022592
> 
> 赞同：4
> 
> 时间：2013-04-15T18:47:48.947
> 
> 标签：haskell, cabal

我正在尝试`cabal test`运行我的 HUnit 测试，但运气不佳。问题是它找不到我的一个测试模块——我该如何解决这个问题？

`cabal configure --enable-tests && cabal build && cabal test`失败了

```
tests/HUnit/Test.hs:4:18:
    Could not find module `AmazonTest' 
```

**/测试/HUnit**

AmazonTest.hs

```
module AmazonTest where

import Test.HUnit
import Lib.Amazon

tests = TestList [ "test sayHello" ~: "Hell!" ~=? sayHello ] 
```

测试.hs

```
module Main where

import Test.HUnit
import qualified AmazonTest as Amazon

main = runTestTT Amazon.tests 
```

**\Lib\Amazon.hs**

```
module Lib.Amazon where

sayHello :: String
sayHello = "Hello!" 
```

**测试我的 .cabal 文件的一部分**

```
test-suite test
    type:              exitcode-stdio-1.0
    main-is:           tests/HUnit/Test.hs
    hs-source-dirs:    .
    ghc-options:       -Wall

    build-depends: base
                 , myapp
                 , yesod-test >= 0.3 && < 0.4
                 , yesod-default
                 , yesod-core
                 , persistent
                 , persistent-postgresql
                 , resourcet
                 , monad-logger
                 , HUnit
                 , text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:23:27.590

添加`tests/HUnit`到`hs-source-dirs`. `hs-source-dirs`不递归搜索。

# regex - TCL Strip 表达式（可变字符）

> ID：16022593
> 
> 赞同：0
> 
> 时间：2013-04-15T18:47:52.570
> 
> 标签：regex, string, tcl, strip

如果我有一个字符串，例如：

foo_image_v001.ext

这可以很容易地说

bar_image_v001.ext

我如何使用 TCL 去除第一个下划线及其右侧的所有内容，只留下 'foo' 或 'bar'

我通常是一个 python 人，不太精通 TCL，但如果我能让它工作，它会在这种情况下工作得最好 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:51:44.203

这是一种方法：

```
set filename foo_image_v001.ext
set prefix [regsub {_.*} $filename ""] 
```

regsub`{_.*}`在 $filename 中查找模式，并将其替换为 nothing `""`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:51:52.360

替换第一个之后的所有内容`_`

```
set new [regsub {_.*} $old {}] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:52:22.057

也许你可以用这个？

```
set string "foo_image_v001.ext"

regexp -- {^([^_]+)} $string - var 
```

`foo`存储在`$var`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T21:13:12.667

不需要为此打破正则表达式：

使用`string`命令：

```
set prefix [string range $filename 0 [expr {[string first _ $filename] - 1}]] 
```

另外，如果你用下划线分割字符串，你想要的是结果列表中的第一个元素：

```
set prefix [lindex [split $filename _] 0] 
```

# jfreechart - 通过单击 jfreechart 查找 X(item)

> ID：16022595
> 
> 赞同：0
> 
> 时间：2013-04-15T18:47:54.967
> 
> 标签：jfreechart

我有`XYdataset`情节时间序列。我需要通过单击图表找到 X 轴上的项目编号。当我单击系列时，下面的行会在 X 轴上获取项目，如果单击图表中的空白区域，它将返回 null。我只需要 item(X) 而不是 Y 单击图表中的系列或空白区域。有可能得到这个吗？感谢帮助

```
 //----------------------------------------------------------------------
        CP.addChartMouseListener(new ChartMouseListener() {

        @Override
        public void chartMouseClicked(ChartMouseEvent cme) {
            ChartEntity entity = cme.getEntity();   
            if (entity != null) {   
                System.out.println("Mouse clicked: " + entity.toString());   
            }   
            else {   
                System.out.println("Mouse clicked: null entity."+entity);   
            }   
        }
        @Override
        public void chartMouseMoved(ChartMouseEvent cme) {

        }
        //---------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:54:18.327

尝试这个：

```
import org.jfree.chart.ChartMouseEvent;
import org.jfree.chart.ChartMouseListener;
import org.jfree.chart.entity.XYItemEntity;

final class ClickedIndexMouseListener implements ChartMouseListener {

    @Override
    public void chartMouseMoved(ChartMouseEvent event) {
    }

    @Override
    public void chartMouseClicked(ChartMouseEvent event) {
        try {
            XYItemEntity ce = (XYItemEntity) event.getEntity();
            System.out.println("Item    " + ce.getItem());
            System.out.println("Series  " + ce.getSeriesIndex());
            System.out.println("X Value " + ce.getDataset().getX(ce.getSeriesIndex(),  ce.getItem()));
            System.out.println("Y Value " + ce.getDataset().getY(ce.getSeriesIndex(),  ce.getItem()));
        } catch (Exception e) {}
    }
} 
```

# ruby-on-rails - Hartl RoR 3.3.2 通过标题测试

> ID：16022597
> 
> 赞同：1
> 
> 时间：2013-04-15T18:47:58.700
> 
> 标签：ruby-on-rails

试图让我的标题测试通过并在运行时看到此错误：

```
bundle exec rspec spec/requests/static_pages_spec.rb 
```

失败：

```
1) Static pages Help page should have the h1 'Help'
 Failure/Error: visit '/static_pages/Help'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/Help"
 # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

 2) Static pages Help page should have the title 'Help'
 Failure/Error: visit '/static_pages/Help'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/Help"
 # ./spec/requests/static_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

3) Static pages About page should have the h1 'About Us'
 Failure/Error: visit '/static_pages/About'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/About"
 # ./spec/requests/static_pages_spec.rb:31:in `block (3 levels) in <top (required)>'

4) Static pages About page should have the title 'About Us'
 Failure/Error: visit '/static_pages/About'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/About"
 # ./spec/requests/static_pages_spec.rb:36:in `block (3 levels) in <top (required)>'

Finished in 0.16042 seconds
6 examples, 4 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:18 # Static pages Help page should have the h1     'Help'
rspec ./spec/requests/static_pages_spec.rb:23 # Static pages Help page should have the title 'Help'
rspec ./spec/requests/static_pages_spec.rb:30 # Static pages About page should have the h1 'About Us'
rspec ./spec/requests/static_pages_spec.rb:35 # Static pages About page should have the title 'About Us' 
```

SampleApp::Application.routes.draw 做

```
get "static_pages/home"

get "static_pages/help"

get "static_pages/about" 
```

我已经尝试了其他帖子中已经发布的各种答案，但都没有成功。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:04:33.493

您的 URL 应该是“/static_pages/help”而不是“/static_pages/Help”。

# php - 间隔阿贾克斯

> ID：16022599
> 
> 赞同：0
> 
> 时间：2013-04-15T18:48:02.047
> 
> 标签：php, jquery, ajax

我在延迟和脚本执行方面遇到问题。

我有以下代码：

```
$(function(){
    $("#results").html("Loading work order queue...");
    setInterval("showWorkOrders();", 15000)
});

function showWorkOrders()
{
      $.ajax({
          url: '/ajax/job_queue_ajax.php',
          type: 'POST',
          cache: false,
          data: 'update=true',
          success: function(data)
          {
              $("#results").html(data);
              $('span#ref_msg').html('');
          },
          error: function()
          {
              a = new customModal('ajax');
              $("#results").html("<font class='msgDivError'>"+a.ajaxError+"</font>");   
              $('span#ref_msg').html('');
          }
  });
} 
```

我的后端 PHP（只是一个例子）：

```
$SQL = MySQL_query("SELECT * FROM table")
    while($data = MySQL_fetch_array($SQL))
    {
        //// OUTPUTS A TABLE WITH INFORMATION 
    } 
```

现在，这整个事情的执行有很多延迟（加载时间很长），有时会产生脚本错误，因为加载时间太长。如果我延长刷新间隔，情况会开始好转（滞后仍然存在）并且我不会收到执行错误。我需要有一个很短的间隔来满足我的需要，但我无法找到一种有效的方法。关于如何改进这一点的任何建议？

此外，在有刷新的页面上停留一段时间后，浏览器会变得非常缓慢，直至锁定...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:52:02.853

尝试这个。只有在服务器响应后才开始下一个请求。

```
$(function(){ 
    $("#results").html("Loading work order queue...");
    showWorkOrders();
});

function showWorkOrders()
{
      $.ajax({
          url: '/ajax/job_queue_ajax.php',
          type: 'POST',
          cache: false,
          data: 'update=true',
          success: function(data)
          {
              $("#results").html(data);
              $('span#ref_msg').html('');
          setTimeout(showWorkOrders, 15000);

          },
          error: function()
          {
              a = new customModal('ajax');
              $("#results").html("<font class='msgDivError'>"+a.ajaxError+"</font>");   
              $('span#ref_msg').html('');
              setTimeout(showWorkOrders, 15000)
          }
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:52:03.407

我会`setTimeout`改用以下方法解决它：

```
$(function(){
    $("#results").html("Loading work order queue...");
    showWorkOrders();
});

function showWorkOrders()
{
      $.ajax({
          url: '/ajax/job_queue_ajax.php',
          type: 'POST',
          cache: false,
          data: 'update=true',
          success: function(data)
          {
              $("#results").html(data);
              $('span#ref_msg').html('');
                      setTimeout("showWorkOrders();", 5000)
          },
          error: function()
          {
              a = new customModal('ajax');
              $("#results").html("<font class='msgDivError'>"+a.ajaxError+"</font>");   
              $('span#ref_msg').html('');
                      setTimeout("showWorkOrders();", 5000)
          }
  });
} 
```

这意味着它在执行新的 ajax 请求之前等待 5 秒，前一个请求可能需要多长时间。在再次尝试之前仍然等待 5 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:52:17.577

我建议在完成后使用下一个 Ajax，而不是间隔 Ajax。

由于 ajax 请求需要花费不确定的时间才能完成，我建议您在第一个完成使用时触发下一个 ajax 请求`setTimeout()`，依此类推，这样您就永远不会有多个 ajax 请求同时进行，因此每个后续 ajax呼叫从前一个完成的已知时间开始。

您可能想要解决为什么您的服务器响应请求需要这么长时间，但是如果您的服务器有时需要很长时间才能响应，您也可以延长 ajax 调用的超时时间：

```
function showWorkOrders()
{
      $.ajax({
          timeout: 15000,
          url: '/ajax/job_queue_ajax.php',
          type: 'POST',
          cache: false,
          data: 'update=true',
          success: function(data)
          {
              $("#results").html(data);
              $('span#ref_msg').html('');
              setTimeout(showWorkOrders, 5000);
          },
          error: function()
          {
              a = new customModal('ajax');
              $("#results").html("<font class='msgDivError'>"+a.ajaxError+"</font>");   
              $('span#ref_msg').html('');
              setTimeout(showWorkOrders, 5000);
          }
  });
}

$(function(){
    $("#results").html("Loading work order queue...");
    showWorkOrders();
}); 
```

# dart - 在 Dart 中，如果我将 Future.wait 与 Futures 列表一起使用，并且在其中一个 Futures 上抛出错误，那么其他 Futures 会发生什么？

> ID：16022601
> 
> 赞同：6
> 
> 时间：2013-04-15T18:48:07.620
> 
> 标签：dart

如果我有以下代码：

```
Future<int> a = new Future(() { print('a'); return 1; });
Future<int> b = new Future.error('Error!');
Future<int> c = new Future(() { print('c'); return 3; });

Future.wait([a, b, c])
  .then((List<int> values) => print(values))
  .catchError((e) => print(e)); 
```

打印什么？

捕获的错误是否`catchError`知道 Future 死了什么？或者还有哪些期货？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:08:14.217

通过运行它来确定打印的内容非常容易（你手边没有 Dart 虚拟机吗？）：

```
一个
C
AsyncError：“错误！”

```

[Future.wait()](http://api.dartlang.org/docs/releases/latest/dart_async/Future.html#wait)的文档说：

> 等待所有给定的期货完成并收集它们的值。
> 
> 返回一个未来，一旦列表中的所有未来都完成，它将完成。如果列表中的任何期货以错误完成，则生成的期货也会以错误完成。否则，返回的未来值将是所有已生成值的列表。

`e.error`是用 ( `'Error!'`，在这种情况下) 创建的值，因此通过将其设置为指示哪个 Future 有错误的值，您可以看到哪个 Future “死亡”。当然，如果您不是造成错误的人，那也无济于事。

一般来说，我认为`Future.wait()`当其中任何一个错误将被类似处理时，您可以在这样的列表上使用。需要知道哪个失败可能表明您不想将`wait()`所有这些都放在一起。

**更新：**我刚刚意识到问题标题提出了问题正文中未提出的问题：*其他期货会发生什么？*

其他期货继续运行。返回的 Future`wait()`在收到错误后立即抛出它收到的任何错误，因此所有返回值都将丢失，如果任何其他 Futures 抛出错误，它不会被捕获，但每个 Future 仍然运行直到返回或抛出一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T19:12:45.020

AFAIK，您不会确切知道哪个 Future 产生了错误。但是，您可以查询错误对象并获取一些有用的信息：

```
Future.wait([a, b, c])
.then((List<int> values) => print(values))
.catchError((e) {
  print(e.error);
  print(e.stackTrace);
  print(e.runtimeType);
  print(e.error.runtimeType);
}); 
```

运行此打印：

```
a
c
Error!
null
AsyncError
String 
```

这告诉我们原来的错误是一个字符串。我不知道这对你有多大用处，但它的东西。

# jquery - jQuery 滚动到

> ID：16022603
> 
> 赞同：3
> 
> 时间：2013-04-15T18:48:15.963
> 
> 标签：jquery, html, scrollto

```
$(document).ready(function() {
    $("#contact_menu").click(function() {
        $(body).scrollTo("#contact", 800);  
    }); 
}); 
```

我在我的代码中输入了这个，希望它会使我的页面滚动，但我不会工作。我尝试了几种方法，但我无法做到正确。

我希望你们中的一个可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:59:06.403

尝试这个：

```
$("#contact_menu").click(function() {
        $("body").animate({
         scrollTop: $("#contact").offset().top
     }, 2000);
}); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/43umh/](http://jsfiddle.net/hescano/43umh/)

你在尝试这个插件吗？[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:53:57.333

如果您打算使用 jQuery 滚动到某处，请使用`.scrollTop`：

```
$(document).ready(function() {
    var pos = $('#contact').position();
    $("#contact_menu").click(function() {
        $(body).animate({scrollTop:pos.top},800);  
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:57:11.103

尝试

```
$(document).ready(function() {
    $("#contact_menu").click(function() {
        $('body, html').animate({ scrollTop: $("#contact").offset().top }, 800);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:59:15.180

我不知道“scrollTo”功能，但如果这确实存在，问题可能出在选择器上。根据浏览器的不同，您必须为 body 或 html 对象设置动画。我通常对 scrollTop 进行动画处理是这样的：

```
$('html,body').animate({ scrollTop: $('#contact').position().top+'px'}, 400, function() {}) 
```

请注意，我选择了 400 毫秒的持续时间，但你可以使用任何你想要的。最后一个“function()”参数是回调，这意味着它在动画完成时被调用。希望这有帮助。

# android - 如何在 Android 中以编程方式加载布局 XML 文件？

> ID：16022615
> 
> 赞同：9
> 
> 时间：2013-04-15T18:49:03.380
> 
> 标签：android, layout

我制作了一个布局（比如**my_layout.xml**），它以编程方式包括另外两个 XML 布局文件，比如**some_layout.xml**和**another_layout.xml**。**my_layout.xml**是使用`setContentView(R.layout.my_layout)`.

现在我有一个带有 ID 的复选框`some_checkbox`，它在**some_layout.xml**中定义，我想给复选框一个`OnCheckedChangeListener`using `setOnCheckedChangeListener()`，就像这样：

```
CheckBox cb = (CheckBox) findViewById(R.id.some_checkbox);
cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    ...
}); 
```

但现在 a`NullPointerException`被抛出，因为`cb`is `null`。我猜那是因为包含`some_checkbox`（即**some_layout**）的布局未使用`setContentView(R.layout.some_layout)`.

*   问题一：为什么？为什么返回查找`R.id.some_checkbox` `null`？**some_layout**真的*是*可见的。
*   问题 2：我如何“加载” **some_layout**以便可以捕获`some_layout`到变量中，就像我在上面的代码片段中尝试的那样？

## 更新

我终于解决了它，使用以下提示，由[stealthjong](https://stackoverflow.com/users/1627730/stealthjong)建议：

> 一种解决方案可能是初始化`checkedChangeListener`，向您的可扩展列表视图添加一个侦听器，并在打开可扩展列表视图的子视图时检查您`Checkbox`是否是膨胀的子视图之一，然后添加`checkedchangeListener`if 。

我创建了一个名为 的方法`setCheckedChangeListenerToElement(int resourceId, OnCheckedChangeListener listener)`，它保存了给定的 resourceId（这是要附加侦听器的元素的 ID）和给定的侦听器。一旦 inflater 调用方法`getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent)`，就可以检索视图。然后，在该视图上，`findViewById(int resourceId)`可以调用`resourceId`复选框的 ID 在哪里。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T21:21:48.417

有两种方法。

首先是通过 XML 添加子布局：

**1\. XML 方法**

`my_layout.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        layout="@layout/child_layout1" >
    </include>

    <include
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        layout="@layout/child_layout2" />

</LinearLayout> 
```

And `child_layout1`and`child_layout2`只是另外两种布局，第二种布局`Button`带有 id `mbutton`。

您的应用程序条目应如下所示：

```
public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_layout);
        View v = findViewById(R.id.mbutton);
        System.out.println(v == null);
        System.out.println(v.getClass().getName());
    }   
} 
```

正如我所怀疑的那样，这使我得到 a`false`和 a 。`android.widget.Button`

**2\. 程序化方法**

另一种方法是编程方法，既然你这样描述它，我怀疑这就是你所做的（或至少尝试过）：

`noinclude_layout.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/inclusionlayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </RelativeLayout>

</LinearLayout> 
```

还有一个稍大的应用程序入口点：

```
public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.noinclude_layout);
        ViewGroup inclusionViewGroup = (ViewGroup)findViewById(R.id.inclusionlayout);

        View child1 = LayoutInflater.from(this).inflate(
                R.layout.child_layout1, null); 
        View child2 = LayoutInflater.from(this).inflate(
                R.layout.child_layout2, null);
        inclusionViewGroup.addView(child1);
        inclusionViewGroup.addView(child2);

        View v = findViewById(R.id.mbutton);
        System.out.println(v == null);
        System.out.println(v.getClass().getName());
    }   
} 
```

这也使我得到 a`false`和 a `android.widget.Button`。

任何一种解决方案都应该可以正常工作。

**更新**

您`expandableListView`是问题所在，因为在您实际打开/展开该部分之前， childLayout 不会膨胀（请参阅下面的代码以获取检查当前视图树的一小段代码）。

一种解决方案可能是初始化`checkedChangeListener`，向您的可扩展列表视图添加一个侦听器，并在打开可扩展列表视图的子视图时检查您`Checkbox`是否是膨胀的子视图之一，然后添加`checkedchangeListener`if 。

一种可能更直接的方法是：

```
<CheckBox
    ...
    android:onClick="checkclicked" /> 
```

并在您的 中`Activity`，添加方法`public void checkclicked(View view){ ... }`

**ViewTree 打印机**

```
private void printFullTree() {
    printTree(this.getWindow().getDecorView(),0);
}

private void printTree(View view, int indent) {
    System.out.print(indent(indent) + view.getClass().getName() + "; " + view.getId());
    if (view instanceof ViewGroup) {
        ViewGroup vg = (ViewGroup)view;
        System.out.print("; children = " + vg.getChildCount() + "\n");
        for (int i = 0; i< vg.getChildCount(); i++) {
            printTree(vg.getChildAt(i), indent++);
        }
    }
    else
        System.out.print("\n");
}

private String indent(int indent) {
    String result = "";
    for (int i = 0; i < indent; i++) {
        result += "  ";
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T18:57:18.223

如果 some_layout.xml 使用 include 标签包含在 my_layout.xml 中，例如：-

```
<include layout="@layout/some_layout" android:id="@+id/someLayoutId" /> 
```

然后您可以执行以下操作：-

```
View someLayoutView = findViewById(R.id.someLayoutId);
CheckBox cb = (CheckBox) someLayoutView.findViewById(R.id.some_checkbox); 
```

如果您以编程方式夸大了 some_layout.xml，例如：-

```
View someLayoutView = LayoutInflater.from(mContext).inflate(
                    R.layout.some_layout, null); 
```

然后你仍然可以像上面那样做： -

```
CheckBox cb = (CheckBox) someLayoutView.findViewById(R.id.some_checkbox); 
```

# javascript - 如何使用 d3.js 向我的图表添加标签？

> ID：16022616
> 
> 赞同：1
> 
> 时间：2013-04-15T18:49:05.390
> 
> 标签：javascript, svg, d3.js, label, sunburst-diagram

我正在制作一个交互式工具，用于使用 d3.js、svg 和 JQuery创建像[这样的 Sunburst 图。](http://bl.ocks.org/mbostock/4063423)绘制图表的代码来自该页面，稍作修改。我正在尝试在图表的各个部分上绘制文本标签，但尽管元素显示在 Web Inspector (Chrome) 中，但它们在屏幕上不可见。我试图从[这里](http://bl.ocks.org/mbostock/910126)调整代码，并且在某种程度上这已经奏效（Web Inspector 说元素存在），但我对为什么元素本身没有出现感到困惑。这是我的代码 - 用于绘制标签的部分靠近底部。我只会使用带有标签的示例页面中的代码，但布局非常不同，我必须从头开始。

```
var width = 850,
height = 850,
radius = Math.min(width, height) / 2;

var svg = d3.select("#vis-wrap")
    .insert("svg", "*")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height * 0.52 + ")");

var partition = d3.layout.partition()
    .sort(null)
    .size([2 * Math.PI, radius * radius])
    .value(function(d) { return 1; });

var arc = d3.svg.arc()
    .startAngle(function(d) { return d.x; })
    .endAngle(function(d) { return d.x + d.dx; })
    .innerRadius(function(d) { return Math.sqrt(d.y); })
    .outerRadius(function(d) { return Math.sqrt(d.y + d.dy); });

var path = svg.datum(data).selectAll("path")
.data(partition.nodes)
.enter().append("path")
.attr("display", function(d) { return d.depth ? null : "none"; }) // hide inner ring
.attr("d", arc)
.style("stroke", "#fff")
.style("fill", function(d) {return d.color;} )
.style("fill-rule", "evenodd")
.each(stash);

// Problem here
path.insert("text", "*")
    .attr("transform", function(d) { return "rotate(" + (d.x + d.dx / 2 - Math.PI / 2) / Math.PI * 180 + ")"; })
    .attr("x", function(d) { return Math.sqrt(d.y); })
    .attr("dx", "6") // margin
    .attr("dy", ".35em") // vertical-align
    .text(function(d) { return d.name; });

d3.selectAll("input[name=mode]").on("change", function change() {
    var value = this.value === "count"
        ? function() { return 1; }
        : function(d) { return d.size; };

    path.data(partition.value(value).nodes)
        .transition()
        .duration(1500)
        .attrTween("d", arcTween);
  });

// Stash the old values for transition.
function stash(d) {
  d.x0 = d.x;
  d.dx0 = d.dx;
}

// Interpolate the arcs in data space.
function arcTween(a) {
  var i = d3.interpolate({x: a.x0, dx: a.dx0}, a);
  return function(t) {
    var b = i(t);
    a.x0 = b.x;
    a.dx0 = b.dx;
    return arc(b);
  };
}

d3.select(self.frameElement).style("height", height + "px"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:54:59.847

您正在使文本成为路径的子项，即

```
<path ...>
   <text>something</text>
</path> 
```

恐怕这是无效的。您需要使文本元素成为同级元素。

令人困惑的是，`<g>`您已将创建的元素称为 svg 但它希望成为该元素的子元素，即

svg.insert("文本")

而不是 path.insert("text")

# php - 关联数组的总长度平衡切割（如array_slice，但用于关联数组）

> ID：16022623
> 
> 赞同：0
> 
> 时间：2013-04-15T18:49:21.253
> 
> 标签：php, arrays

给定相关的消息数组（每个第二级数组是不同 sql 查询的结果）：

```
$tmp = array(
    'type1'=>array ('key'=>'value'),
    'type2'=>array(1=>1,2=>2,3=>3,4=>'men',5=>'pro'),
    'type3'=>array(1=>1,2=>2,3=>3,'test'=>'website','creation'=>'www.prost.pro',8,9,10=>array('3dlevel','subarray'),11,12,13,14,15,16,18,18,19,20),
    'type4'=>array(1,2,3)
); 
```

我只需要显示其中的 8 个。它们必须代表所有类型的消息（第一级值）。

所以我需要打电话：

```
$total_quantity_limit = 8;
var_dump(array_assoc_truncate($tmp, $total_quantity_limit)); 
```

并得到类似的东西：

```
array(
    'type1'=>array('key'=>'value'),
    'type2'=>array(1=>1,2=>2,3=>3),
    'type3'=>array(1=>1,2=>2),
    'type4'=>array(1,2)
); 
```

array_assoc_truncate() 里面必须有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:29:10.807

从我看到的示例输出中，看起来你想要这样的东西：

```
<?php
$tmp = array(
    'type1'=>array('key'=>'value'),
    'type2'=>array(1=>1,2=>2,3=>3,4=>'men',5=>'pro'),
    'type3'=>array(1=>1,2=>2,3=>3,'test'=>'website','creation'=>'www.prost.pro',8,9,10,11,12,13,14,15,16,18,18,19,20),
    'type4'=>array(1,2,3)
);

function array_assoc_truncate($array, $limit){
    $depth = 0;
    $count = 0;
    $out = array();

    //outter loop
    while($count < $limit){
        //boolean, was a key found
        $found = false;
        //loop through each top level key
        foreach($array as $k=>$v){
            //if the value is an array
            if(is_array($v)){
                //get the keys
                $keys = array_keys($v);
                //if a keys exists at this depth
                if(isset($keys[$depth])){
                    //get the key
                    $key = $keys[$depth];
                    //if $out doesn't have the top level key yet, add it
                    if(!isset($out[$k])){
                        $out[$k]=array();
                    }
                    //set the value under $key in $out
                    $out[$k][$key]=$v[$key];
                    //increment our count
                    $count++;
                    //a key was found at this depth
                    $found=true;
                }
            }
            //if we hit our limit, break
            if($count >= $limit){
                break;
            }
        }
        //if no key was found at this depth, there is no more depth to search
        if(!$found){
            break;
        }
        //go down one more level
        $depth++;
    }
    //return the output array
    return $out;
}

echo '<hr><h1>Before:</h1>';
var_dump($tmp);
echo '<hr><h1>After:</h1>';
adump(array_assoc_truncate($tmp, 8)); 
```

[http://codepad.viper-7.com/a8cF5J](http://codepad.viper-7.com/a8cF5J)

但是，正如上面所暗示的，如果这是来自查询的结果，您可以/应该可能重组您的查询以获得更好的结果。

# http - HTTP API 速率限制 HTTP 响应标头的示例

> ID：16022624
> 
> 赞同：89
> 
> 时间：2013-04-15T18:49:30.503
> 
> 标签：http, rest, rate-limiting, http-status-code-429

附加 HTTP 状态代码 ( [RFC6585](https://www.rfc-editor.org/rfc/rfc6585) ) 之一是

*   [429 请求过多](https://www.rfc-editor.org/rfc/rfc6585#section-4)

在哪里可以找到对这种 HTTP 响应状态有用的 HTTP / REST API 速率限制 HTTP 响应标头的示例？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-15T18:49:30.503

以下是 HTTP API 速率限制 HTTP 响应标头的一些示例。取自四个常见的 REST API：Github、Vimeo、Twitter 和 Imgur：

### Github 速率限制[http://developer.github.com/v3/#rate-limiting](http://developer.github.com/v3/#rate-limiting)

```
#=============================#=============================================#
# HTTP Header                 # Description                                 #
#=============================#=============================================#
| X-RateLimit-Limit           | Request limit per hour                      |
+-----------------------------+---------------------------------------------+
| X-RateLimit-Remaining       | The number of requests left for the time    |
|                             | window                                      |
+-----------------------------+---------------------------------------------+ 
```

### Vimeo 速率限制[http://developer.vimeo.com/guidelines/rate-limiting](http://developer.vimeo.com/guidelines/rate-limiting)

```
#=============================#=============================================#
# HTTP Header                 # Description                                 #
#=============================#=============================================#
| X-RateLimit-Limit           | Request limit per day / per 5 minutes       |
+-----------------------------+---------------------------------------------+
| X-RateLimit-Remaining       | The number of requests left for the time    |
|                             | window                                      |
+-----------------------------+---------------------------------------------+
| X-RateLimit-Reset           | The remaining window before the rate limit  |
|                             | resets in UTC epoch seconds                 |
+-----------------------------+---------------------------------------------+ 
```

### Twitter REST API 速率限制[https://dev.twitter.com/docs/rate-limiting/1.1](https://dev.twitter.com/docs/rate-limiting/1.1)

> *注意：* Twitter 使用与 Vimeo 类似的名称的标题，但每个名称中都有另一个破折号。

```
#=============================#=============================================#
# HTTP Header                 # Description                                 #
#=============================#=============================================#
| X-Rate-Limit-Limit          | The rate limit ceiling for that given       |
|                             | request                                     |
+-----------------------------+---------------------------------------------+
| X-Rate-Limit-Remaining      | The number of requests left for the         |
|                             | 15 minute window                            |
+-----------------------------+---------------------------------------------+
| X-Rate-Limit-Reset          | The remaining window before the rate limit  |
|                             | resets in UTC epoch seconds                 |
+-----------------------------+---------------------------------------------+ 
```

### Imgur API 速率限制[http://api.imgur.com/](http://api.imgur.com/)

```
#=============================#=============================================#
# HTTP Header                 # Description                                 #
#=============================#=============================================#
| X-RateLimit-UserLimit       | Total credits that can be allocated         |
+-----------------------------+---------------------------------------------+
| X-RateLimit-UserRemaining   | Total credits available                     |
+-----------------------------+---------------------------------------------+
| X-RateLimit-UserReset       | Timestamp (unix epoch) for when the credits |
|                             | will be reset                               |
+-----------------------------+---------------------------------------------+
| X-RateLimit-ClientLimit     | Total credits that can be allocated for the |
|                             | application in a day                        |
+-----------------------------+---------------------------------------------+
| X-RateLimit-ClientRemaining | Total credits remaining for the application |
|                             | in a day                                    |
+-----------------------------+---------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-05-24T14:22:48.717

除了 API 特定的标头之外，不要忘记不起眼的[标准`Retry-After`标头](https://www.rfc-editor.org/rfc/rfc7231#section-7.1.3)

> 服务器发送“Retry-After”标头字段来指示用户代理在发出后续请求之前应该等待多长时间...。该字段的值可以是 HTTP 日期或延迟秒数收到回复后。

该标准在将其与 503 或 3xx 状态代码一起使用时提出了具体的*附加建议：*

> 当与 503（服务不可用）响应一起发送时，Retry-After 指示服务预计对客户端不可用的时间。当与任何 3xx（重定向）响应一起发送时，Retry-After 指示在发出重定向请求之前要求用户代理等待的最短时间。

# c# - 在 C# 中访问安全 Web 服务时出现问题

> ID：16022626
> 
> 赞同：0
> 
> 时间：2013-04-15T18:49:32.020
> 
> 标签：c#, web-services, security

我将其用作 Web 服务参考

```
http://<hostname>:8080/axis/services/USD_R11_WebService?wsdl" 
```

但现在我必须使用使用 ssl 的安全设备，例如

```
**https:**//<hostname>/axis/services/USD_R11_WebService?wsdl" 
```

这个应该默认使用443端口

我尝试按原样使用它，但是一旦我在我的代码中交流这是我通常使用的东西，它就没有结果

```
USD_WebService wsUSD = new USD_WebService();
string username = "user name";
string password = "Password";
int sid = wsUSD.login(username, password);
userhandle = wsUSD.getHandleForUserid(sid, username); 
```

但现在我什至无法获得 sid。

是证书方面的问题还是网络身份验证问题？

我收到以下例外情况

system.net.webexception 无法连接到远程服务器 system.net.sockets.socketexception 连接尝试失败，因为连接方在一段时间后没有正确响应或建立连接失败，因为连接的主机没有响应：80

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:39:37.153

jmgardn2 在他的评论中回复了 app.config 后，我解决了这个问题。

我发现每当我将安全链接添加到 Web 引用时，它都不会在配置文件中反映正确的链接。只是它会从 https 中删除 s，我中继不知道为什么 Visual Studio 删除了它，如下所示

```
<app.Properties.Settings>

        <value>http://<hostname>/axis/services/USD_R11_WebService</value>
</app.Properties.Settings> 
```

我 100% 确定我添加了安全 Web 参考，并且当我将其改回此参考时

```
<value>https://<hostname>/axis/services/USD_R11_WebService</value> 
```

它工作得很好，

# actionscript-3 - 添加变量对象

> ID：16022627
> 
> 赞同：0
> 
> 时间：2013-04-15T18:49:35.083
> 
> 标签：actionscript-3, flash-cs5

我正在尝试根据级别编号添加对象。我有以下声明：

```
var lvlmapping:Object; 
```

稍后，我运行以下代码：

```
if (levelnr == 1)
    lvlmapping= new lvl1map();
if (levelnr == 2)
    lvlmapping= new lvl2map();
if (levelnr == 3)
    lvlmapping= new lvl3map();
lvlmapping.x = 0;
lvlmapping.y = 0;
this.addChild(lvlmapping);
trace("Added mapping"); 
```

弹出以下错误：

> 将静态 Object 类型的值隐式强制转换为可能的不相关类型 flash.display:DisplayObject

我能做些什么来实现我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:51:37.740

如果`lvl1map`和 其他 是 您 将 需要 使用 的 资产`DisplayObject`,`Sprite`或者`MovieClip`不`Object`. 所以尝试改变：

```
var lvlmapping:Object; 
```

到 ：

```
var lvlmapping:DisplayObject; 
```

# sql-server-2008 - 当字符不是数字时，从平面文件 DT_WSTR 到 nvarchar(255) 字段的 SSIS 转换为空

> ID：16022630
> 
> 赞同：2
> 
> 时间：2013-04-15T18:49:39.467
> 
> 标签：sql-server-2008, ssis, bids

我在从平面文件导入数据到 SQL Server 数据库时遇到了一个奇怪的问题。问题是在某些字段中，既有整数也有字符串，例如 9012635 和 54Z2534、234-1823。

在我所有字段的 SSIS 包中都有一个数据类型 pf DT_WSTR (255)，并且数据正在插入到 nvarchar(255) 中。最初，我使用导入导出向导创建了包，然后进行了修改（但没有对转换进行修改。我接受了向导给出的内容（即 DT_WSTR）。它最终没有将数据导入这些字段。它创建了行并将数据插入其他列，但在某些列中，它放置 NULL - 没有数据。

为了测试事情，我最终尝试使用该文件的向导。我收到错误消息：“采样数据中的最后一行不完整。列或行分隔符可能丢失或文本限定不正确”。

尽管如此，该文件仍会导入所有的行，但似乎不喜欢这些列中的文本，并且最终将整数值作为文本导入。

其他没有给出此错误消息的文件也有相同的症状。

我不知道如何解决这个问题，或者问题是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:28:37.917

NVARCHAR should correspond to DT_WSTR, and VARCHAR should correspond to DT_STR. Are you sure it's not a conversion problem between those two types? If you have true DT_I4 integers coming in, you should not be seeing alpha characters.

You can add a [Data Viewer](http://msdn.microsoft.com/en-us/library/ms140318.aspx) to your dataflow to ascertain exactly what data types you have in your SSIS package.

If you wish to convert string types, you can use a [Derived Column Transform](http://msdn.microsoft.com/en-us/library/ms141069.aspx) to create a new column, and then [cast one string type into another](http://msdn.microsoft.com/en-us/library/ms141704.aspx).

So, for example, (DT_STR, 30, 1252)OldColumnName would cast thirty characters of an NVARCHAR to VARCHAR according to code page 1252\. Alternatively, (DT_WSTR, 50)ColName would cast fifty characters of VARCHAR into NVARCHAR.

# mkmapview - [mapkit]放大地图，图钉随地图移动

> ID：16022633
> 
> 赞同：2
> 
> 时间：2013-04-15T18:49:47.357
> 
> 标签：mkmapview, mapkit, mkannotationview

最近在开发一个带地图的应用，用mapkit框架，我设置好坐标后，MKAnnotationView这个视图，在地图放大的时候pin会随着地图移动，pin和实际位置出现了一定的偏差现象，当然放大到最大位置的时候是正确的，但是我看谷歌地图是固定的大头针位置，如果地图把大头针放大，就会偏移，这样用户体验很差。

非常感谢！

[http://www.cocoachina.com/ask/questions/show/95208/mapkit%E5%9C%A8%E5%9C%B0%E5%9B%BE%E6%94%BE%E5%A4%A7% E7%BC%A9%E5%B0%8F%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%8F%E5%9B%BE%E9%92%89%E4% BC%9A%E9%9A%8F%E7%9D%80%E5%9C%B0%E5%9B%BE%E7%A7%BB%E5%8A%A8](http://www.cocoachina.com/ask/questions/show/95208/mapkit%E5%9C%A8%E5%9C%B0%E5%9B%BE%E6%94%BE%E5%A4%A7%E7%BC%A9%E5%B0%8F%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%8F%E5%9B%BE%E9%92%89%E4%BC%9A%E9%9A%8F%E7%9D%80%E5%9C%B0%E5%9B%BE%E7%A7%BB%E5%8A%A8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:28:32.473

我认为您的图钉看起来在移动的原因是您正在查看图钉的底部。如果您查看引脚的中心，它始终位于同一位置。您将需要更改自定义图钉图像的偏移量。看看这个问题和答案：[iPhone custom pin position issue](https://stackoverflow.com/questions/6319980/iphone-custom-pin-position-problem)

# javascript - 谷歌地图 v3 标记坐标在 imageMapType 上的变化

> ID：16022638
> 
> 赞同：0
> 
> 时间：2013-04-15T18:50:09.947
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在尝试在 apiv3 中创建一个在 40° 附近拍摄的空中视图的 imageMapType，并在从“卫星”切换到“myimagemaptype”时在正确的位置上保持标记。我不知道可能的解决方案，或者我很难自己设置一个，所以，任何人都可以提供帮助或已经找到解决方案？（也许我只是在文档中遗漏了一些东西。）

请大家帮忙。

E.

编辑：对不起，我现在头脑很模糊，只是错过了重点。编辑 2：向 Frank Tudor 致敬，例子来得恰到好处。我试图以一种不那么凌乱的方式编写代码，以便我可以将其发布在这里。尽管如此，我面临的最小问题是自动更改或更新标记 latLng 以适应通过 imageMapType 构建的空中 45° 地图，这样他们就可以在从标准地图切换到自定义地图后保持正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:58:05.633

在没有看到您的代码示例的情况下，我相信您正在寻找具有此外观的 mapTypeControlOptions 示例：google.maps.MapTypeId.SATELLITE 或 google.maps.MapTypeId.HYBRID。

这是示例代码。

[https://code.google.com/p/gmaps-api-issues/issues/attachmentText?id=3089&aid=2943553346480020082&name=LOCAL_v3_basic_google.html&token=c027872819c8f0dce16f324cc5cbec1f](https://code.google.com/p/gmaps-api-issues/issues/attachmentText?id=3089&aid=2943553346480020082&name=LOCAL_v3_basic_google.html&token=c027872819c8f0dce16f324cc5cbec1f)

这是另一个例子：

[http://codeave.com/maps/g3_basic_MapTypeControlStyle.htm?u_log=9005](http://codeave.com/maps/g3_basic_MapTypeControlStyle.htm?u_log=9005)

这是文档：

[https://developers.google.com/maps/documentation/javascript/reference#MapTypeControlOptions](https://developers.google.com/maps/documentation/javascript/reference#MapTypeControlOptions)

我希望这有助于或至少让你开始。

# javascript - phonegap 中的嵌套 sqlite 事务

> ID：16022642
> 
> 赞同：1
> 
> 时间：2013-04-15T18:50:33.930
> 
> 标签：javascript, android, ios, sqlite, cordova

我的主要目标是将以下结构保留在 android/IOS 的 sqlite 中的数据库中。相应的表将由 pragma 处理的外键组成。

```
var tempData = [{
    name : "foo",
    values : [{
            child : "foofoo",
            value : [1, 2, 3]
        }, {
            child : "foofaa",
            value : [5, 6, 7]
        }
    ]
}, {
    name : "bar",
    values : [{
            child : "barbar",
            values : [11, 22, 33]
        }, {
            child : "barbala",
            values : [44, 55, 66]
        }
    ]
}, {
    name : "baz",
    values : [{
            child : "bazbaz",
            values : [444, 333, 222]
        }, {
            child : "bazbaazar",
            values : [999, 888, 777]
        }
    ]
}]; 
```

我写了下面的代码片段来保持上述结构。这是克服嵌套事务的传统方法吗？还是我必须遵循一些标准？

下面的代码工作正常，只是不能保证执行顺序。我在输出中看到了一些随机行为。我如何保证嵌套事务的同步行为。我已经抓取了许多网站，但找不到坦诚的解决方案。请帮忙

```
db.transaction(setupTable, dbErrorHandler, getEntries);
function setupTable(tx) {
doLog("before execute sql...");
tx.executeSql('CREATE TABLE IF NOT EXISTS mainTest(mainKey INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT  NOT NULL)');
tx.executeSql('CREATE TABLE IF NOT EXISTS child(PKEY INTEGER PRIMARY KEY AUTOINCREMENT,parentKey INTEGER,children TEXT  NOT NULL,FOREIGN KEY(parentKey) REFERENCES mainTest(mainKey))');
tx.executeSql('CREATE TABLE IF NOT EXISTS secondChild(SCKEY INTEGER PRIMARY KEY AUTOINCREMENT,spkey INTEGER,sales INTEGER,FOREIGN KEY(spkey) REFERENCES child(PKEY))');
doLog("after execute sql...");}
function getEntries(tx) {

//doLog("get entries");
/*dbShell.transaction(function(tx) {
tx.executeSql("select id, title, body, updated from notes order by updated desc",[],renderEntries,dbErrorHandler);
}, dbErrorHandler);*/

doLog("get entries");
db.transaction(function (tx) {
    _.each(tempData, function (item) {
        name = item.name;
        tx.executeSql('INSERT INTO mainTest (name) VALUES("' + name + '")', [], function (tx, result) {
            doLog("in child insert" + item.values);
            doLog("in child insert" + JSON.stringify(tempData));
            _.each(item.values, function (item) {
                doLog("in " + item.child);
                tx.executeSql('INSERT INTO child (parentKey,children) VALUES((select mainKey from mainTest where name = "' + name + '"),"' + item.child + '")', [], function (tx, result) {
                    _.each(item.values, function (itemNew) {
                        tx.executeSql('INSERT INTO secondChild (spkey,sales) VALUES((select PKEY from child where children = "' + item.child + '"),"' + itemNew + '")', [], function (tx, result) {}, dbErrorHandler);
                    });
                }, dbErrorHandler);
                doLog("after secondChild Insertion");
            });
            doLog("after child insertion");
        }, dbErrorHandler);
        doLog("after main insertion");
    });
}, dbErrorHandler);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-07T21:30:12.790

您必须在 tx.executeSql 中使用成功回调函数。优点还在于，如果您的第一个 SQL 语句中有错误，则不会执行第二个 SQL 语句。因此，您的数据库不会出现不一致。这帮助了我：

```
 db.transaction(function(tx){
            tx.executeSql('DELETE FROM object WHERE object_id IN(1,2)');
            }, errorCB, function(){
            db.transaction(function(tx){
                tx.executeSql('INSERT INTO object '+values_object);
                }, errorCB, successCB
            );
            }
        ); 
```

线索是执行第二个事务作为第一个事务的成功回调。因此语句按定义的顺序执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T15:00:17.130

我想我明白你的意思。

让我试着帮忙：

我正在使用类似的代码，以尝试保证交易的特定顺序，但在我个人看来（由于最近的经验）你必须寻找嵌套交易的解决方法......我的问题与时间有关我不得不将我的 phonegap 应用程序带到 WinPhone 8，其中数据库的功能不适用于 cordova，第一个解决方案是包含/开发一个插件。我发现的那个不能处理嵌套事务，你可以想象重写/重新设计程序有多么困难：/ 考虑到 javascript 的异步模型，我找到了一个答案：我已经创建了自定义事件来确定一个事务完成并在该事件的侦听器中运行下一个事务。

```
//event var
var EVENT_TRANSACTION_ENDED_ = document.createEvent('Event');
//init the event
EVENT_TRANSACTION_ENDED_.initEvent('EVENT_TRANSACTION_ENDED_', true, true);
//listener to the event
document.addEventListener('EVENT_TRANSACTION_ENDED_', onEventFunctionHandler, false);

//first transaction
db.transaction(function(tx){
    //sample query
    tx.executeSql('SELECT * FROM TABLE', [], function(tx){
        //notify first transaction ended
        console.log('First transaction');
        setTimeout('document.dispatchEvent(EVENT_TRANSACTION_ENDED_);', 100);
    }, dbErrorHandler);
}, dbErrorHandler);

//
function onEventFunctionHandler(e){
    //second transaction
    db.transaction(function(tx){
        //sample query
        tx.executeSql('SELECT * FROM ANOTHER_TABLE', [], function(tx){
            //notify SECOND transaction ended
            console.log('SECOND transaction');
        }, dbErrorHandler);
    }, dbErrorHandler);
} 
```

这对我有用，希望这会有所帮助。

# sql - 如何在sql中选择重复的字段

> ID：16022646
> 
> 赞同：0
> 
> 时间：2013-04-15T18:51:03.027
> 
> 标签：sql, select

伙计们，我如何在sql中选择重复的字段。我有一个可能按标题重复的表格，如何选择它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:56:07.210

你可以使用这个：

```
SELECT title, COUNT(*) as titleCount
FROM yourTableName
GROUP BY title
HAVING COUNT(*) > 1 
```

# c - 用 C 语言读取和写入文件

> ID：16022649
> 
> 赞同：1
> 
> 时间：2013-04-15T18:51:10.223
> 
> 标签：c

我试图从具有以下格式的文件中读取以下输入（逗号分隔）。但我不知道如何从文件中读取。我的理解是，这里是字符串格式。如何提取 [] 中以逗号分隔的每个数字？

```
 File Input: **[1 2 3 4],[2 5 6]**
       Output:  1 2 3 4 2 5 6 
```

如果您对此有任何想法或任何教程，肯定会对我有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:57:22.843

```
#include <stdio.h>
#include <ctype.h>

int main()
{
   FILE * pFile;       

   pFile = fopen ("myfile.txt" , "r");
   if (pFile == NULL) perror ("Error opening file");
   else {

     while ((c = fgetc(pFile)) != EOF)
     {
        if(isdigit(c))
           printf("%c ",c);
     }
     fclose (pFile);
   }
   return 0;
} 
```

# entity-framework-5 - 实体框架 - 不需要在上下文中定义复杂类型

> ID：16022652
> 
> 赞同：2
> 
> 时间：2013-04-15T18:51:24.417
> 
> 标签：entity-framework-5

在我的应用程序中启用迁移时，我遇到了复杂类型错误，但出现以下错误：

```
The type 'eCommerceDataModel.Models.UserImage' has already been configured as an entity type. 
It cannot be reconfigured as a complex type. 
```

只是分享这个，因为你可能会遇到这个愚蠢的问题。使用复杂类型时，请不要在上下文类中定义复杂类型实体。

```
public class eComContext : DbContext
{
    public eComContext() : base("eCommDB") { }
    public IDbSet<SiteSettings> SiteSettings { get; set; }
    public IDbSet<User> Users { get; set; }
    //public IDbSet<UserImage> UserImage { get; set; } (This needs to be removed)
}

[Table("SiteDetails")]
public class SiteSettings
{
    [Key]
    public int SiteId { get; set; }
    [MaxLength(30), MinLength(5)] 
    public string Name { get; set; }
    [MaxLength(50), MinLength(10)] 
    public string PunchLine { get; set; }
    public string Description { get; set; }
    public byte[] Logo { get; set; }
    public virtual User CreatedBy { get; set; }
    public virtual User UpdatedBy { get; set; }
}

[Table("SiteUsers")]
public class User
{
    [Key]
    public int UserId { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public byte Password { get; set; }
    public UserImage UserImage { get; set; }
}

[ComplexType]
public class UserImage
{
    public byte[] PhotoSmall { get; set; }
    public byte[] PhotoMedium { get; set; }
    public byte[] PhotoLarge { get; set; }
} 
```

需要删除 Context 类中的 UserImage 属性才能解决此错误。现在能够启用迁移。

# jquery - jQuery 验证器没有响应

> ID：16022654
> 
> 赞同：0
> 
> 时间：2013-04-15T18:51:38.010
> 
> 标签：jquery, jquery-validate

我尝试使用 jQuery 验证器，但它似乎只是没有响应。我正在尝试验证图像上传表单是否不为空。我添加了该`if(jQuery)`部分以检查是否实际包含 jQuery，并且确实包含。我无法弄清楚是什么导致了它发生。任何建议都会有所帮助。

HTML 代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="sys/jsFunc.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>

    <meta charset="utf-8">
    <title>picLoc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  </head>

  <body>
    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
          <center>
             <h2>Upload a picture and find where exactly it was taken</h2>
             </br>
             <h2>It really works !</h2>
             </br>
             <form action="results.php" id="upload-image" method="post" enctype="multipart/form-data">
                 <div class="fileupload fileupload-new" data-provides="fileupload">
                  <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
                  <div>
                    <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" name="pic" id="pic"/></span>
                    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                    <button type="submit" class="btn">Upload</button>
                  </div>
             </form>
          </center>
      </div>

      <hr>

      <footer></footer>

    </div> <!-- /container -->

  </body>
</html> 
```

JavaScript 代码：

```
if(jQuery)
{
    alert('included');
}
else
{
    alert('not included');
}

jQuery.validator.setDefaults(
{
    debug: true,
    success: "valid"
});

$(document).ready(function()
{
    $('#upload-image').validate(
    {
        rules : 
        {
            pic : 
            {
                required : true,
                accept : "image/*"
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:53:04.160

`$document`在`$document.ready(function()...`应该是`$(document)`：

```
$(document).ready(function(){
    $('#upload-image').validate({
        rules : {
            pic : {
                required : true,
                accepted : "image/*"
            }
        }
    });
}); 
```

* * *

**编辑问题后：**

您还忘记关闭表单中的 div 标签：

```
<form action="results.php" id="upload-image" method="post" enctype="multipart/form-data">
    <div class="fileupload fileupload-new" data-provides="fileupload">
        <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;">
        </div>
        <div>
            <span class="btn btn-file">
                <span class="fileupload-new">
                    Select image
                </span>
                <span class="fileupload-exists">
                    Change
                </span>
                <input type="file" name="pic" id="pic"/>
            </span>
            <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">
                Remove
            </a>
            <button type="submit" class="btn">
                Upload
            </button>
        </div>
    </div>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:56:30.330

小心......你错过了`</div>`结束标签`<div class="fileupload fileupload-new" data-provides="fileupload">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:09:56.893

你的代码：

```
pic: {
   required: true,
   accepted: "image/*"
} 
```

`rule`所谓的`accept`，不是的`accepted`。

请参阅： [http ://docs.jquery.com/Plugins/Validation/Methods/accept#mimetype](http://docs.jquery.com/Plugins/Validation/Methods/accept#mimetype)

**演示：http: [//jsfiddle.net/d5Fzc/](http://jsfiddle.net/d5Fzc/)**

```
$(document).ready(function () {

    $('#upload-image').validate({
        rules: {
            pic: {
                required: true,
                accept: "image/*"
            }
        }
    });

}); 
```

* * *

**编辑**：

我已将您新更新的代码放在此 jsFiddle 中，它仍然有效：

[http://jsfiddle.net/kyYnb/](http://jsfiddle.net/kyYnb/)

但是，您的 OP 中的代码将不起作用，仅仅是因为您完全忘记了包含 jQuery Validate 插件......

```
<script src="bootstrap/js/jquery.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="sys/jsFunc.js"></script> 
```

包括插件...

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script> 
```

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js)

对于`accept`规则，您还需要`additional-methods.js`文件...

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js"></script> 
```

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T21:03:45.410

我假设你`sys\jsFunc.js`是你的 jQuery 验证器初始化代码的地方。
如果是这种情况，则问题在于您的 JavaScript 包含顺序。

## 你的

```
<script src="bootstrap/js/jquery.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="sys/jsFunc.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script> 
```

## 使固定

```
<script src="bootstrap/js/jquery.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js"></script>
<script type="text/javascript" src="sys/jsFunc.js"></script> 
```

### JavaScript 文件包括顺序：

1.  jQuery.js
2.  引导程序.js
3.  jquery.validate.js
4.  additional-methods.js // 这依赖于**jquery.validate.js**
5.  系统/jsFunc.js

我在我的计算机上使用新的包含命令对其进行了测试，它可以工作:-)

# c# - 将字符串数组从 powershell 传递到 C#

> ID：16022659
> 
> 赞同：1
> 
> 时间：2013-04-15T18:51:57.273
> 
> 标签：c#, powershell

我想从 powershell 调用一个 C# 程序，并将一组参数从 powershell 传递给 C# 程序。C# 程序采用文件路径、日期和文件扩展名并操作这些文件。

在我拥有的 powershell 脚本中，我将所有字符串存储在一个字符串数组中，并使用 in 中的`-argumentlist`开关传递该字符串`start-process`。

由于这些文件路径在我的工作中，我将组成一些文件路径作为示例。这个脚本的名字是`ProductionImportCaller`

```
$ParametersToPass = "C:\my images,20130412,dat", "C:\my images\curiosity,20130412,bif"

Start-Process -FilePath C:\Users\ABetterProductionImport.exe 
-ArgumentList $ParametersToPass 
```

以上在我的脚本中没有新行。我只是在这里换行，这样更容易阅读。

当我调用`.\ProductionImportCaller`传递的数组时：

```
c:\my
images,20130412,dat  

c:\my
images\curiosity,20130412,bif 
```

这是我不想要的。

所以这是我的问题：如何编写我的 powershell 脚本以便这些参数正确传递？

我努力了

1.  用单引号代替双引号
2.  每个参数用双引号括起来，文件路径用单引号括起来

如果我打电话，这有效：

```
start-process .\ABetterProductionImport.exe "C:\my images,20130412,dat" 
```

编辑：但是如果我从我编写的脚本中调用相同的命令，这将不起作用。再说一遍，我如何编写一个 powershell 脚本来使它正确运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:05:28.660

找到了答案。如果我打电话

```
.\ABetterProductionImport.exe $ParametersToPass 
```

完全没有启动过程或任何工作。哪个好。

# jquery - 如何使按钮在 JQuery 可排序项目上的行为正确？

> ID：16022660
> 
> 赞同：0
> 
> 时间：2013-04-15T18:51:59.320
> 
> 标签：jquery, jquery-ui, button, jquery-ui-sortable

我有一个可排序的 JQuery，每个项目都包含一个按钮。在页面顶部，我有一个添加按钮，用于将项目添加到可排序中。我正在尝试对每个可排序的按钮进行编程，以将特定项目上的字符串替换为自动完成中当前用户输入的值（也在页面顶部）。这是我的代码：

```
$(".addButton").click(function(e) {
e.preventDefault();
// set var item to be the string inputted by the user
var item = $("input[name='inputItem']").val(); //where 'inputItem' is the name of the <input>
// parses input string, splitting at commas into liArray containing substrings as elements
var liArray = item.split(", ");
// for loop to add each brew to the sortable list (length-1 because last element in array is empty string)
for (var i = 0; i < liArray.length-1; i++) {
    // sets var $li to the string in the ith index of liArray
    var $li = $("<li class='ui-state-default'/>").text(liArray[i]).append('<button class="replaceButton">Replace</button>');

    // adds var $li to gui
    $("#sortable").append($li);
};

$("#sortable").sort();

// refreshes the page so var $li shows up
$("#sortable").sortable("refresh"); 
```

});

现在我添加的每个项目都有一个带有 class = "replaceButton" 的按钮，我想我可以在我的 .js 中声明如下内容：

```
$(".replaceButton").click(function() {
    // set var item to be the string inputted by the user
    var item = $("input[name='inputItem']").val();  //where 'inputItem' is the name of the <input>
    // I DON'T KNOW WHAT TO DO HERE
}); 
```

我不知道从那里去哪里，因为我不知道如何访问特定项目的字符串。我会用“这个”吗？另外，我删除了特定项目并在其位置创建了一个新项目，而不是仅仅替换字符串会更容易吗？感谢您的任何建议或答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:59:37.127

因为您知道您的按钮是您的一部分，所以`li`您可以像这样访问文本：

```
// mind the dynamic event binding!
$('#sortable').on('click', ".replaceButton", function(e) {
    e.preventDefault();

    var item = $("input[name='inputItem']").val();

    $(this).parent()
          .text(item)
          .append( $(this).clone() );
}); 
```

当您想保留它时，您将不得不附加您的 replaceButton 的另一个实例。
而且因为您是动态添加按钮的，所以请注意事件绑定中的更改。我将点击事件绑定到一个持久的容器，并动态绑定到所有实例，`.replaceButton`即使它们还不存在。

# flask - Flask MongoEngine - 如何更改数据库？

> ID：16022665
> 
> 赞同：3
> 
> 时间：2013-04-15T18:52:03.370
> 
> 标签：flask, mongoengine

我有一个 Flask 应用程序，其`Post`模型跨越多个 MongoDB 数据库（db1、db2、db3...），所以我需要能够查询不同的数据库。
我正在使用`Flask-MongoEngine`扩展程序。

我的`__init__.py`包含以下行：
`db = MongoEngine(app)`
并且在`config.py`我有：
`MONGODB_SETTINGS = {'DB': 'db1'}`

我尝试了以下但没有成功：

1.  像这样改变对象中的`connection`参数`db`：
    `db.connection = mongoengine.connect('db2')`
    它没有改变任何东西。执行`post = Post.objects.all()`仍然在原始 db ( `db1`) 上运行。
2.  `Post`像这样在类中创建别名`meta`：
    `'db_alias': 'db1'`
    然后我像这样更改对象`connection`中的参数`db`：
    `db.connection = mongoengine.connect('db2', alias='db1')`
    这确实会创建到 的连接`db2`，**但**我无法将其更改为另一个数据库。
3.  设置`MONGODB_SETTINGS`为`{'DB': 'db2'}`然后`db = MongoEngine(app)`
    这也不起作用

似乎一旦`models.py`加载了模型（或连接到数据库），您就无法更改其连接。
那是对的吗？
如何更改同一模型上的数据库？
编辑：Django 等效项是`using`ORM 中的参数，它允许为同一模型查询不同的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T16:52:08.530

正如您正确识别的那样，*MongoEngine*实例以及由此创建的所有文档（模型）都绑定到特定数据库。

您可以（临时）通过调用实例上的方法将文档实例使用的数据库更改*为文档类中定义的别名*`switch_db`：

```
Post.objects.all().switch('db1').save() 
```

`db1` *如果* 在类`db1`中定义，则将所有文档保存在数据库中（否则您将得到一个）。`db_alias``Post``ConnectionError`

或者，有许多方法可以使初始配置“动态”，例如尊重环境变量：

```
import os
app['MONGODB_SETTINGS'] = {'db': os.environ.get('DBNAME', 'db2')} 
```

但是，根据您的评论

> 我们的系统使用许多数据库来托管这个模型

看来您可能想要的是[Sharding](http://docs.mongodb.org/manual/sharding/)，其中 MongoDB 负责将集合分布`mongod`在多台机器上的多个实例上。在这种情况下，您连接到 a`mongos`而不是，它负责将查询路由到正确的分片。每个分片上的数据库名称都相同。

# mysql - 在mysql中将十进制值存储为varchar好吗？

> ID：16022668
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:08.063
> 
> 标签：mysql, database

我必须存储可以是十进制格式的用户积分，例如（10.99、0.99 等）。现在我将列字段作为 varchar(100)。

如果我使用十进制而不是 varchar 怎么办？会提高性能吗？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T19:00:32.067

简短的回答是：不，它会损害性能。

更长的答案：VARCHAR 字段是可变长度的，这意味着数据库块的格式不能预先考虑填充在那里的数据的大小。当然，有一个字段的最大长度，但除此之外，你的情况更糟。

另一方面，读取 VARCHAR 然后将其解释为适合浮点类型会花费您。它引入了新的问题可能性。尝试获取占“11.99”的所有小数。希望你带来正确的小数位数，因为在 VARCHAR "11.99" != "11.990" 中。

然后是索引。通常，没有人为十进制字段编制索引，但如果您这样做，VARCHAR 字段上的索引将需要更多空间。

总而言之，将某些内容保存在非特定字段类型中并不是一个好主意。在 DB 结构中，通常认为最佳实践尽可能具体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-29T18:58:22.290

Suprisingly, you can save disk space (and thus IO time) this way. It really depends on what the decimal values are and if they're going to stay within that range, and you should absolutely check before doing it.

```
select 
  sum(1+len(cast(Cast(your_decimal_value as real) as varchar(50)))) as size_as_varchar,
  size_of_your_decimal_type_in_bytes*count(*) as size_as_decimal
from your_table 
```

If size_as_varchar is substantially lower than size_as_decimal, then you may see performance gains for IO bound queries. The casting CPU cost may cancel out the gains.

So, should you do this? It depends on your server, your data, how many of these values your queries require casting on, and your boss' tolerence for deviances from best practice... but the answer is probably no. If you need this, you should use a database that provides row level compression instead of doing hacky things to approximate row level compression.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:01:33.860

在某些情况下，您可能希望将看起来像数字的值存储为字符串。例如，在美国，5 位数的邮政编码看起来很像数字。但是，前导零很重要。因此，它们实际上是标签而不是数字。这很简单；邮政编码应存储为字符串。

在大多数其他情况下，您希望将数字存储为数字。一个名为“用户积分”的字段表明您正在该字段上进行加法和减法。所以，这也是不言而喻的。如果看起来像数字，走路像数字，嘎嘎声像数字。. . 将其存储为数字。

MySQL 确实使选择有点混乱，因为它会自动将字符串转换为数字，即使字符串在数字部分后面有无关字符。

If you want the second decimal point stored exactly, then use a fixed-point data type (such as `DECIMAL(5,2)`) rather than a floating point type (such as `float`).

# c# - Microsoft 验证应用程序块中自定义验证器的设计时支持

> ID：16022669
> 
> 赞同：0
> 
> 时间：2013-04-15T18:52:11.997
> 
> 标签：c#, .net, validation, enterprise-library

我使用验证应用程序块创建了自定义验证器。它工作正常。但是如何为同一个验证器提供设计时支持。我必须在 Enterprice 库配置应用程序控制台中使用这个自定义验证器如何？

这是自定义验证器代码..

```
 [AttributeUsage(AttributeTargets.Property | AttributeTargets.Field)]
public class StringIsNullOrEmptyAttribute : ValueValidatorAttribute
{
    protected override Validator DoCreateValidator(Type targetType)
    {
        return new StringIsNullOrEmpty(this.MessageTemplate, this.Negated);
    }
}

public class StringIsNullOrEmpty : ValueValidator<string>
{
    public StringIsNullOrEmpty(string messageTemplate, bool negated)
        : base(messageTemplate, null, negated)
    {
    }

    protected override void DoValidate(string objectToValidate, object currentTarget, string key, ValidationResults validationResults)
    {
        if (string.IsNullOrEmpty(objectToValidate) != Negated)
        {
            LogValidationResult(validationResults, GetMessage(objectToValidate, key), currentTarget, key);
        }
    }

    protected override string DefaultNegatedMessageTemplate
    {
        get
        {
            return "Field cannot have a value.";
        }
    }

    protected override string DefaultNonNegatedMessageTemplate
    {
        get
        {
            return "Field is required.";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:54:33.067

我从 CodePlex 得到了答案。链接在这里

[自定义验证器的设计时支持 - 验证应用程序块](https://entlib.codeplex.com/discussions/440398)

苏克什钱德

# android - 获取我的应用程序包中的 AppWidgetProviders 列表

> ID：16022670
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:12.997
> 
> 标签：android, android-appwidget, android-package-managers, appwidgetprovider

有没有一种简单的方法来获取`AppWidgetProviders`我的应用程序包中的列表？我想遍历它们并`AppWidgetProviderInfo`在运行时检查它们相应对象的一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:08:16.207

[调用`getInstalledProviders()`，`AppWidgetManager`](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#getInstalledProviders%28%29)遍历列表，并注意那些[`AppWidgetProviderInfo` `provider` `ComponentName`](http://developer.android.com/reference/android/appwidget/AppWidgetProviderInfo.html#provider)适合你的包的。

# webforms - 在 Web 表单环境中使用 Web API

> ID：16022673
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:17.267
> 
> 标签：webforms, asp.net-web-api

为什么 WebApi 控制器必须以 Controller 这个词结尾才能在 Web 表单环境中工作？[微软演示引用了这篇文章](http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx)

> 注意：确保名称以“Controller”结尾，而不是“Controller1”或类似名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:55:36.400

因为它是 Microsoft 的策略（许多软件公司都遵循这种范式）的一部分，即[约定优于配置](http://en.wikipedia.org/wiki/Convention_over_configuration)的新技术。

维基百科条目：

> 约定优于配置（也称为约定编码）是一种软件设计范式，旨在减少开发人员需要做出的决策数量，获得简单性，但不一定失去灵活性。这句话本质上意味着开发人员只需要指定应用程序的非常规方面。例如，如果模型中有一个类 Sale，则数据库中对应的表默认称为“sales”。只有当人们偏离这一约定时，例如调用表“products_sold”，才需要编写有关这些名称的代码。当工具实现的约定与期望的行为匹配时，它会按预期运行，而无需编写配置文件。

# batch-file - 将文件批量处理到具有相同父级的子文件夹中

> ID：16022677
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:52:27.143
> 
> 标签：batch-file, path

我运行路径为 D:\path\to\my\data 的 mybat.bat。

“data”文件夹，即我的当前目录，包含两个文件夹，即“data1”和“data2”。data1 包含 file1.txt 并且 data2 还包含具有另一个扩展名的 file1 (file1.out)

我在运行 mybat.bat 的当前目录数据中。

我会将“file1.txt”和“file1.out”传递给“tamo.bat”，因为知道“tamo.bat”与“mybat.bat”（“data”目录）是同一个目录。

这是我写的，但它不起作用！

```
 SET mypath=%~dp0
  set var=file1
  set getTXTBySubPath=%mypath%data1\%var%.txt
  echo -----getTXTBySubPath-----

  set getOUTBySubPath=%mypath%data2\%var%.out
  Call tamo.bat %getTXTBySubPath% %getOUTBySubPath% 
```

请问我怎么能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:19:16.123

用更多的双引号试试这个：

```
SET "mypath=%~dp0"

set "var=file1"
set "getTXTBySubPath=%mypath%data1\%var%.txt"
echo -----getTXTBySubPath-----

set "getOUTBySubPath=%mypath%data2\%var%.out"
Call tamo.bat "%getTXTBySubPath%" "%getOUTBySubPath%" 
```

# r - R 数据成员和属性

> ID：16022680
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:42.563
> 
> 标签：r, oop, class, attributes, datamember

我对 R 非常陌生，并且在引用对象的数据成员和属性时不确定正确的语言。我在 Java 中有面向对象的编程语言背景，所以我可能指的是 Java 思维中的数据成员/属性。无论如何，假设我有一个矩阵`matClust1`并且我做了以下事情：

```
ids = vector()
for(i in 1:size)              #size is the number of rows in matClust1
{
  ids = c(ids, "exp")
}

attr(matClust1, "clustID") <- ids 
```

我认为上述设置为每个行向量的属性/数据`matClust1`成员`"exp"`。这是因为`ids`被创建为具有与 中的行一样多的条目`matClust1`。因此，我希望能够通过如下代码访问此属性/数据成员：

```
matClust1.clustID[2]            #get the clustID of row vector in matClust1 
```

显然`.`运营商不这样做，运营商也不这样做`$`。

1.  如何在 R 中实现此功能？

**编辑：**我已经设置了属性，`rownames`我真正想要的是另一个可以像`rownames`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:34:02.117

你可能想要一个`data.frame`or`data.table`代替。

例如

```
df = data.frame(matClust1)

# create a new column and assign whatever to it:
df$clustID = "exp"

# use it however you like
df$someOtherColumn = paste(1:dim(df)[1], df$clustID) 
```

# c++ - 与 wininit 库链接问题 (LNK1120)

> ID：16022681
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:49.830
> 
> 标签：c++, visual-studio-2010, linker, wininet, lnk2019

我在 Windows 7 上使用 Visual Studio 2010。我有这个功能：

```
void send(char* log, char* pas, char* ser, char* plik)
{   
    HINTERNET hInternet;
    HINTERNET hFtpSession;
    hInternet = InternetOpenA(NULL,INTERNET_OPEN_TYPE_DIRECT,NULL,NULL,0);
    hFtpSession = InternetConnectA(hInternet,ser,INTERNET_DEFAULT_FTP_PORT,log,pas, INTERNET_SERVICE_FTP, 0,0 );
    FtpPutFileA(hFtpSession, "WMM.txt", plik, FTP_TRANSFER_TYPE_BINARY, 0);
} 
```

它没有用：

> 1.  错误 LNK2019：未解析的外部符号“void __cdecl send(class std::basic_string<char,struct std::char_traits,class std::allocator >,class std::basic_string<char,struct std::char_traits,class std::分配器>,std::basic_string类<char,struct std::char_traits,std::allocator类>,std::basic_string<char,struct std::char_traits,std::allocator类>)" (?send@ @YAXV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@000@Z) 在函数 _main 中引用

> 2) 致命错误 LNK1120: 1 未解决的外部问题

我搜索了解决方案并找到了这个：将此添加`#pragma comment(lib, "wininet")`到您的代码中或在您的项目属性中添加 wininet.lib：链接器->输入

我这样做但仍然无法正常工作 - 我得到了与之前相同的错误。你知道我应该怎么做才能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:07:46.650

您未解决的外部符号错误适用于这样的功能

```
void send(std::string log, std::string pas, std::string ser, std::string plik) 
```

但是您向我们展示的功能是这样的

```
void send(char* log, char* pas, char* ser, char* plik) 
```

我*猜*你已经在头文件中编写了第一个版本，在源文件中编写了第二个版本。您需要保持一致，一个版本或另一个版本，而不是两者。

# ruby-on-rails - 过滤索引操作上的路由和命名空间

> ID：16022682
> 
> 赞同：1
> 
> 时间：2013-04-15T18:52:51.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个事件模型和一个 events_type 模型。所有事件都从 event_type 模型分配一个 id。

在我的事件索引操作/视图中，我有一个过滤器，它允许我通过查找在 url 中传递的 id 来过滤和查看所选类型的事件。例如; **http:localhost:3000/events?event_type=2**

我想做的是使用 event_type 名称进行这项工作，而不是像这样；**http:localhost:3000/events/film**等，我还希望能够为每个 event_type 提供唯一的元标记（这可能意味着将字段添加到我的 event_type 模型的迁移）。

任何人都可以就如何批准这个提供一些帮助吗？它只是一个路由/命名空间的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:29:33.693

You'll have to diverge from the `resources` method in your routes to add dynamic functionality. That's okay, I actually prefer doing so, as stated below my answer.

The basic strategy is to rewrite what `resources` does ourselves, adding in an extra route endpoint that can catch your `:event_type`. In this case, we effectively insert your `:event_type` routes before anything that would override it.

```
# routes.rb

# We want the vanilla index route to come first, then deal with the rest.
# Notice it receives no params.
get 'events'           to: 'events#index'

# Using scope or namespace gives us urls nested under that string:
#  /events/:event_type
# Using scope instead of namespace prevents the router for looking under a corresponding ruby module
# AKA if this was `namespace 'event_type' do`, it would look for a
#   `Events::EventsController#index` instead of using our `EventsController#index`.
# All of the `as:` statements are to preserve access to the standard
#   path+url helpers you get out of the box with `resources`.
# All of the `constraints:` are to prevent urls from overriding each other.
#   I don't believe they're strictly necessary in this example, but
#   explicit is better than implicit in your routes.
scope 'events' do
  get ':event_type/:meta',  to: 'events#index',     as: :event_by_type_and_meta, constraints: { :event_type => /[a-zA-Z]*/, :meta => /[a-zA-Z]*/ }
  get ':event_type',  to: 'events#index',     as: :event_by_type, constraints: { :event_type => /[a-zA-Z]*/ }
  get ':id/edit',     to: 'events#edit',      as: :edit_event,   constraints: { :id => /\d/ }
  get 'new',          to: 'events#new',       as: :new_event

  delete ':id',       to: 'events#destroy',   as: :delete_event, constraints: { :id => /\d/ }
  put ':id',          to: 'events#update',    as: :update_event, constraints: { :id => /\d/ }
  get ':id',          to: 'events#show',      as: :event,        constraints: { :id => /\d/ }

  post '',            to: 'events#create',     as: :create_event
  get '',             to: 'events#index',     as: :events
end 
```

With that in place, you can just check for `:event_type` in your `EventController` and filter accordingly. If using the `:meta` tag, just refine the filter further.

```
class EventsController < ApplicationController

  def index
    if params[:event_type]
      @event_type = EventType.find_by_name(params[:event_type])
      @events = Event.includes(:event_types).where(["id NOT IN (?)", @event_type.events_ids]).all
    else
      @event_type = nil
      @events = Event.filed_under(@event_type).all
    end
  end 
```

If you're not making a RESTful API, in my opinion you should avoid using `resources` period. The very first part of your app your users will encounter is your URL structure. It's really the most overlooked facet of the user experience. Stating all your routes explicitly helps your think through that experience, as well as assert the finer grained control I'm using below.

It's also easy to leave routes in that really shouldn't be exposed if you just use `resource`. Being explicit with your URLs helps you be aware of security vulnerabilities.

# c++ - 对从文件中读取并进入结构中的结构感到困惑

> ID：16022685
> 
> 赞同：1
> 
> 时间：2013-04-15T18:53:07.087
> 
> 标签：c++, file-io, struct, models

所以我试图用c ++编写一小段代码，它将读入一个文件（verts，vect normals，vert texture coords and faces (v/vt/vn v/vt/vn v/vt/vn) etc ) 我有点迷失了自己。

我从小开始，只读取一个只有顶点、颜色和面的立方体，但现在我掌握了一个更高的多边形模型（126 个面），其中面的描述不同（在没有 vect normasl 之前）或垂直纹理），所以我认为结构中的结构将是存储此信息的好方法。

```
inFile >> NUM_POLY;
indices = new polygon[NUM_POLY];
for (int i=0; i < NUM_POLY; i++)
{   
inFile >> indices[i].a;
inFile >> indices[i].b;
inFile >> indices[i].c;
} 
```

那是我目前使用旧系统的代码，但我将结构更改为...

```
struct vertA {
int v;
int vt;
int vn;
};

struct vertB {
int v;
int vt;
int vn;
};

struct vertC {
int v;
int vt;
int vn;
};

struct polygon {
struct vertA;
struct vertB;
struct vertC;
}; 
```

所以让我感到困惑的是我如何将前 3 个整数存储到 vertA 结构中，下一个 3 在 vertB 中，然后是 vertC 并再次循环返回直到文件结束......

如果有人可以提供帮助，那将非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:58:16.010

这是错误的

```
struct polygon {
struct vertA;
struct vertB;
struct vertC;
}; 
```

我猜你的意思是

```
struct polygon {
    vertA va;
    vertB vb;
    vertC vc;
}; 
```

然后它很简单（假设我理解你的权利）

```
for (int i=0; i < NUM_POLY; i++)
{   
    inFile >> indices[i].va.v;
    inFile >> indices[i].va.vt;
    inFile >> indices[i].va.vn;
    inFile >> indices[i].vb.v;
    inFile >> indices[i].vb.vt;
    inFile >> indices[i].vb.vn;
    inFile >> indices[i].vc.v;
    inFile >> indices[i].vc.vt;
    inFile >> indices[i].vc.vn;
} 
```

您的代码中的一件奇怪的事情是`struct vertA`and `struct vertB`and`struct vertC`都是相同的。所以也许你不需要三个不同的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:58:32.023

我不确定我是否正确理解了这个问题（所以如有必要，请纠正我），但看起来你想要这样的东西：

```
struct vertex
{
    int v;
    int vt;
    int vn;
}

struct polygon
{
    struct vertex a;
    struct vertex b;
    struct vertex c;
} 
```

然后，初始化它，解释你原来的例子：

```
inFile >> NUM_POLY;
indices = new polygon[NUM_POLY];
for (int i = 0; i < NUM_POLY; i++)
{   
    inFile >> indices[i].a.v;
    inFile >> indices[i].a.vt;
    inFile >> indices[i].a.vn;
    inFile >> indices[i].b.v;
    inFile >> indices[i].b.vt;
    inFile >> indices[i].b.vn;
    inFile >> indices[i].c.v;
    inFile >> indices[i].c.vt;
    inFile >> indices[i].c.vn;
} 
```

您还可以通过使用数组而不是三个单独的顶点结构来缩短该代码：

```
struct polygon
{
    struct vertex v[3];
} 
```

然后使用循环初始化：

```
inFile >> NUM_POLY;
indices = new polygon[NUM_POLY];
for (int i = 0; i < NUM_POLY; i++)
{   
    for (int i = 0; j < 3; j++)
    {
        inFile >> indices[i].v[j].v;
        inFile >> indices[i].v[j].vt;
        inFile >> indices[i].v[j].vn;
    }
} 
```

# node.js - 是否可以使用 windows .msi 安装多个 node.js 实例？

> ID：16022689
> 
> 赞同：9
> 
> 时间：2013-04-15T18:53:36.193
> 
> 标签：node.js

我尝试使用 .MSI 安装程序安装多个版本的 node.js，但似乎第二个版本卸载了前一个版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:21:40.097

我在github上找到了这个并解决了我的问题......

[https://github.com/marcelklehr/nodist](https://github.com/marcelklehr/nodist)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:08:01.273

您可以安装多个副本，但您首先需要重命名旧的二进制文件。尽管此时我建议只下载最新的二进制文件并将其放在同一目录中（重命名您需要的文件）。

不确定这将如何影响 NPM，因为它将使用任何二进制文件 node.exe。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T19:08:37.707

正如我对@Corey 的回答所评论的那样，我尝试了适用于 Windows 的 NVM，它真的很糟糕。**我强烈推荐使用[nvmw](https://github.com/hakobera/nvmw)**：它非常简单，它具有与 Linux 的 nvm 相同的语法（尽管功能有所减少），而且它可以正常工作。

**重要提示：从具有管理员权限的 shell 提示符运行每个命令！如果你不这样做，你会遇到很多奇怪的错误！**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-15T18:53:05.997

你也可以试试[NVM for Windows](http://github.com/coreybutler/nvm-windows)。它带有安装程序和超级简单的命令。

![在此处输入图像描述](https://i.stack.imgur.com/UGWlH.jpg)

# java - 重复的局部变量意图但是服务类需要 2 个意图

> ID：16022698
> 
> 赞同：0
> 
> 时间：2013-04-15T18:54:05.083
> 
> 标签：java, android, android-intent, service

我无法解决服务类中存在重复局部变量的问题。我们的目标是创建一个脚本，它会持续监控 android 历史记录，直到找到匹配项 - 如果服务类在浏览器历史记录中找到匹配项，则执行警告类。尝试执行我们的警告类时会出现问题 - eclipse 说明我们有一个重复的局部变量“intent”但是我们需要保留它才能启动我们的警告类。如果我们删除我们最初的意图 - 服务将不会启动。如果我们删除第二个意图 - 我们的警告类将不会启动。（这有点像第 22 个问题——因为我们需要启动/执行两者）。

```
public class Service_class extends Service {
    String Dirty1 = "www.pornhub.com";
    String Dirty2 = "www.playboy.com";
    String Dirty3 = "www.penthouse.com";
    String Dirty4 = "www.playboy.com";
    String Dirty5 = "www.playboy.com";
    String Dirty6 = "www.playboy.com";
    String Dirty7 = "www.playboy.com";
    String Dirty8 = "www.playboy.com";
    String Dirty9 = "www.playboy.com";
    String Dirty10 = "www.playboy.com";

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        setContentView(R.layout.main3);
        TextView tv = (TextView) findViewById(R.id.hello);
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
        Browser.BookmarkColumns.URL };
        Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                projection, null, null, null);
        String urls = "";
        if (cursor.moveToFirst()) {
        String url1 = null;
        String url2 = null;
        do {
        String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

        if (url.toLowerCase().contains(Dirty1)) {
        } else if (url.toLowerCase().contains(Dirty2)) {
        } else if (url.toLowerCase().contains(Dirty3)) {
        } else if (url.toLowerCase().contains(Dirty4)) {
        } else if (url.toLowerCase().contains(Dirty5)) {
        } else if (url.toLowerCase().contains(Dirty6)) {
        } else if (url.toLowerCase().contains(Dirty7)) {
        } else if (url.toLowerCase().contains(Dirty8)) {
        } else if (url.toLowerCase().contains(Dirty9)) {
        } else if (url.toLowerCase().contains(Dirty10)) {
        //if (url.toLowerCase().contains(Filthy)) {
        urls = urls
        + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
        + url + "\n";
        Intent intent = new Intent(Service_class.this, Warning.class);
        Service_class.this.startActivity(intent);
        }
        } while (cursor.moveToNext()); 
     //   tv.setText(urls);

        return START_STICKY;

        }}
    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();
    }
    private void setContentView(int main3) {
        // TODO Auto-generated method stub

    }

    private TextView findViewById(int hello) {
        // TODO Auto-generated method stub
        return null;
    }

    private Cursor managedQuery(Uri bookmarksUri, String[] projection,
            Object object, Object object2, Object object3) {
        // TODO Auto-generated method stub
        return null;
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:58:09.377

`Intent intent`被声明为参数`onStartCommand`，然后您尝试在方法中再次声明它。只需将第二个声明重命名为`intent`to`intent2`或其他东西..

此外，您似乎正在监视*书签*而不是浏览器*历史记录*。可能想调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:58:27.070

您不能将局部变量重命名`intent`为不同的名称而不是使用函数的参数名称吗？

```
Intent warning_intent = new Intent(Service_class.this, Warning.class);
Service_class.this.startActivity(warning_intent); 
```

# c - 如何声明和初始化一个整数变量

> ID：16022699
> 
> 赞同：0
> 
> 时间：2013-04-15T18:54:09.477
> 
> 标签：c, variables, assembly, integer, initialization

我想在 MIPS(Assembly) 中声明一些变量并初始化它们。我正在解析一个 C 文件。我像这样初始化变量：

```
.data

.text
.globl main

    .align 2
a:      .space 4

main:

#Exit
li $v0,10
syscall 
```

但我不知道如何初始化变量 a 我尝试使用 li、la、add、addi 等，但没有任何效果。我希望我的程序记住变量 a 的值。如果我有 5 个或 10 个变量怎么办？我的意思是记住是这样的（在C中）：

```
int a;
int b;
int c;
int d;
int e;
int f;
a=10;
b=10;
c=a+b;
b=b-5;
d=b+c;
e=d+a;
printf("e value is %d\n",e); 
```

这就是我所说的记住价值观的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:25:31.280

```
main:
  #...
  la $a0, a
  li $a1, 1234 # The value you need
  sw $a1, 0($a0)
  #... 
```

此外，您的变量必须在 .data 部分中：

```
.data

.align 2
a: .space 4

.text
# ... 
```

# java - 为什么我不能将字符串转换为整数

> ID：16022711
> 
> 赞同：0
> 
> 时间：2013-04-15T18:54:46.457
> 
> 标签：java, android

我知道这是一个简单的话题，但我总是出错..我从一个 xml 文件中获取字符串，其中数据包含诸如 262626 之类的东西我试图将此字符串转换为 MB (/1024) 形式。但它没有转换为 int 或 long 有人可以帮助我吗？

这是我测试的

```
String size = parser.getValue(e, parser.KEY_FileSizeInByte);
Log.i("menuItems",size);

    try {
        int s = Integer.parseInt(size);
        Log.i("s", getString(s));
    }
    catch (Exception e1) {
        Log.i("error", e1.getMessage());
    } 
```

我也测试过

```
Integer.valueOf(str); 
```

这是我收到的错误：

```
04-15 23:06:17.652: I/menuItems(6819): 97035
04-15 23:06:17.652: W/ResourceType(6819): No package identifier when getting value for resource number 0x00017b0b
04-15 23:06:17.652: I/error(6819): String resource ID #0x17b0b
04-15 23:06:17.692: I/menuItems(6819): 2957
04-15 23:06:17.692: W/ResourceType(6819): No package identifier when getting value for resource number 0x00000b8d
04-15 23:06:17.692: I/error(6819): String resource ID #0xb8d
04-15 23:06:17.692: I/menuItems(6819): 559711
04-15 23:06:17.692: W/ResourceType(6819): No package identifier when getting value for resource number 0x00088a5f
04-15 23:06:17.692: I/error(6819): String resource ID #0x88a5f
04-15 23:06:17.692: I/menuItems(6819): 153651
04-15 23:06:17.692: W/ResourceType(6819): No package identifier when getting value for resource number 0x00025833
04-15 23:06:17.692: I/error(6819): String resource ID #0x25833
04-15 23:06:17.692: I/menuItems(6819): 1733630
04-15 23:06:17.692: W/ResourceType(6819): No package identifier when getting value for resource number 0x001a73fe
04-15 23:06:17.692: I/error(6819): String resource ID #0x1a73fe
04-15 23:06:17.692: I/menuItems(6819): 532105
04-15 23:06:17.692: W/ResourceType(6819): No package identifier when getting value for resource number 0x00081e89
04-15 23:06:17.692: I/error(6819): String resource ID #0x81e89
04-15 23:06:17.702: I/menuItems(6819): 28817
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x00007091
04-15 23:06:17.702: I/error(6819): String resource ID #0x7091
04-15 23:06:17.702: I/menuItems(6819): 90787
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x000162a3
04-15 23:06:17.702: I/error(6819): String resource ID #0x162a3
04-15 23:06:17.702: I/menuItems(6819): 33556
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x00008314
04-15 23:06:17.702: I/error(6819): String resource ID #0x8314
04-15 23:06:17.702: I/menuItems(6819): 122145
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x0001dd21
04-15 23:06:17.702: I/error(6819): String resource ID #0x1dd21
04-15 23:06:17.702: I/menuItems(6819): 323312
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x0004eef0
04-15 23:06:17.702: I/error(6819): String resource ID #0x4eef0
04-15 23:06:17.702: I/menuItems(6819): 532676
04-15 23:06:17.702: W/ResourceType(6819): No package identifier when getting value for resource number 0x000820c4
04-15 23:06:17.702: I/error(6819): String resource ID #0x820c4
04-15 23:06:17.712: I/menuItems(6819): 49133
04-15 23:06:17.712: W/ResourceType(6819): No package identifier when getting value for resource number 0x0000bfed
04-15 23:06:17.712: I/error(6819): String resource ID #0xbfed
04-15 23:06:17.712: I/menuItems(6819): 622507
04-15 23:06:17.712: W/ResourceType(6819): No package identifier when getting value for resource number 0x00097fab
04-15 23:06:17.712: I/error(6819): String resource ID #0x97fab
04-15 23:06:17.712: I/menuItems(6819): 57333
04-15 23:06:17.712: W/ResourceType(6819): No package identifier when getting value for resource number 0x0000dff5
04-15 23:06:17.712: I/error(6819): String resource ID #0xdff5
04-15 23:06:17.712: I/menuItems(6819): 17265
04-15 23:06:17.712: W/ResourceType(6819): No package identifier when getting value for resource number 0x00004371
04-15 23:06:17.712: I/error(6819): String resource ID #0x4371 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:57:32.753

是你的日志记录错误。这里：

```
Log.i("s", getString(s)); 
```

这是试图获取具有给定标识符的*资源。*你只想：

```
Log.i("s", String.valueOf(s)); 
```

# mysql - 提高大型数据库上 mySQL 查询的速度

> ID：16022716
> 
> 赞同：3
> 
> 时间：2013-04-15T18:55:01.407
> 
> 标签：mysql, performance

我正在尝试优化 SQL 查询以希望提高其执行速度。

我有以下两个表：

```
CREATE TABLE IF NOT EXISTS `data` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `entry` varchar(255) NOT NULL,
  `numDB` int(11) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `entry` (`entry`),
  UNIQUE KEY `entry_numDB` (`entry`,`numDB`),
  UNIQUE KEY `entry_numDB_id` (`id`,`entry`,`numDB`),
  KEY `numDB` (`numDB`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `details` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `dataID` bigint(20) NOT NULL,
  `dbID` int(11) NOT NULL,
  <removed - unimportant>
  PRIMARY KEY (`id`),
  KEY `dataID` (`dataID`),
  KEY `dbID` (`dbID`),
  KEY `dataID_dbID` (`dataID`,`dbID`),
  <removed - unimportant>
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

一个条目（例如，'abc'）以“id = 1; entry = abc, numDB = 2”的形式存储在表数据中，并且（至少）有两个详细条目“id = 1, dataID = 1, dbID = 4 " 和 "id = 2, dataID = 1, dbID = 17"，但是相同的 dataID 和 dbID 可以出现多次，例如，"id = 3, dataID = 1, dbID = 17", "id = 4, dataID = 1，dbID = 17"。

表数据中的
总条目数：45.245.438 表详细信息中的总条目数：126.608.661

现在我想从不具有条件 dbID = 4 的表数据中获取前 50 个条目，按 data.numDB 排序。结果查询是：

```
SELECT DISTINCT(data.entry), data.numDB FROM blacklists.data data INNER JOIN blacklists.details details ON details.dbID NOT IN (4) AND data.id = details.dataID ORDER BY data.numDB DESC LIMIT 50 
```

这（至少）需要 10 分钟的处理时间（我在 10 分钟后停止了它）。

这是 EXPLAIN 的输出：

EXPLAIN SELECT DISTINCT(data.entry), data.numDB FROM blacklists.data data INNER JOIN blacklists.details details ON details.dbID NOT IN (4) AND data.id = details.dataID ORDER BY data.numDB DESC LIMIT 50

```
id  select_type  table    type   possible_keys            key         key_len  ref                rows      Extra
1   SIMPLE       data     index  PRIMARY,entry_numDB_id   entry_numDB 261      NULL               45166874  Using index; Using temporary; Using filesort
1   SIMPLE       details  ref    dataID,dbID,dataID_dbID  dataID      8        blacklists.data.id  1        Using where; Distinct 
```

不使用 DISTINCT（或 GROUP BY）会导致条目被重复多次。

有没有办法改进这个查询？我已经阅读了许多帮助页面和其他问题及其答案，但无法为这些表格找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:06:09.603

加入细节有点搞砸你。您并没有真正使用 dbID != 4 过滤掉太多内容，因此它仍然必须扫描大部分表“数据”。这是一个子查询可以帮助您的领域。而不是查询所有表“数据”以获取有效的最后 50 行 + 使用 dbID == 4 连接表“详细信息”的任何行，可能手动限制到最后几千行，或者任何近似值一个 dbID == 4

我认为通过这样编写查询，您会看到很大的性能提升：

```
SELECT  DISTINCT(data.entry), 
        data.numDB 
FROM
    (
        SELECT x.entry, x.numDB, x.numDB
        FROM blacklists.data x
        ORDER BY x.numDB DESC LIMIT 2000
    ) data
INNER JOIN blacklists.details details 
    ON details.dbID NOT IN (4) 
    AND data.id = details.dataID 
ORDER BY data.numDB DESC LIMIT 50 
```

向上或向下更改子选择中的限制以满足您的需要。较小的值会更快地运行此查询，但可能无法得出您想要的 50 条记录，较大的值会运行得更慢，但会给您更好的机会获得所需的 50 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:33:53.553

我想知道您是否对以下查询也有建议：

详细信息表与上面相同，我还有

```
CREATE TABLE IF NOT EXISTS `ips` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `dataID` bigint(20) NOT NULL,
  `ip` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `dataID_ip` (`dataID`,`ip`),
  KEY `dataID` (`dataID`),
  KEY `ip` (`ip`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

我现在想从该表中获取不在 dbID = 4 中的所有 IP，按其计数（IP）排序：

我要做的是：

```
SELECT ip.id, ip.ip, count(ip.ip)
FROM
    (
        SELECT x.id, x.ip, x.dataID
        FROM ips x
        GROUP BY x.ip ORDER BY COUNT(x.ip) DESC LIMIT 1000
    ) ip
INNER JOIN details details 
    ON details.dbID NOT IN (4) 
    AND ip.dataID = details.dataID 
GROUP BY ip.ip ORDER BY COUNT(ip.ip) DESC LIMIT 50 
```

但是内部 SELECT 需要全表扫描。

```
1 PRIMARY <derived2> ALL       NULL    NULL    NULL    NULL    1000     Using temporary; Using filesort
1 PRIMARY details    ref       dataID,dbID,dataID_dbID,dataID_active,dbID_active_...     dataID     8     ip.dataID     1     Using where
2 DERIVED x          index     NULL    ip     4     NULL    8960260     Using temporary; Using filesort 
```

有什么办法也可以改进这个查询吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:15:20.567

首先，我将更`dbID NOT IN (4)`改为`dbID <> 4`. MySQL 可能会正确优化它，但我想确定一下。

其次，我会考虑对数据进行一些反规范化，在其中放置一个`data`代表所需条件的字段，允许您进行单表查询（这将更快地工作）。该字段既可以在应用程序中维护，也可以通过触发器维护。

# python - 将文件中所有奇数行求和的 Pythonic 方法

> ID：16022720
> 
> 赞同：0
> 
> 时间：2013-04-15T18:55:04.277
> 
> 标签：python, python-2.7

我正在学习 Python 以进行研究生院的编程分班考试，这实际上是我拼凑起来的第一个小脚本来感受它。我的背景主要是 C# 和 PHP，但我不能在测试中使用任何一种语言。

我的测试脚本读入以下文本文件 (test_file1.txt)。偶数行包含样本大小，奇数行包含样本中每个测试的“结果”。EOF 标记为 0。我想读入文件，输出样本量，并对每个测试的结果求和。您将如何使用 Python 执行此任务？我觉得我试图强迫 python 像 PHP 或 C# 一样，根据我的研究，我猜想有非常“Python”的方式来做这些事情。

test_file1.txt：

```
3
13 15 18
5 
19 52 87 55 1
4
11 8 63 4
2
99 3
0 
```

我的简单脚本：

```
file = open("test_file1.txt", "r")

i=0
for line in file:
    if i % 2 == 0:
        #num is even
        if line == '0':
            #EOF
            print 'End of experiment'   
    else:
        #num is odd
        numList = line.split( )
        numList = [int(x) for x in numList]
        print 'Sample size: ' + str(len(numList)) + ' Results: ' + str(sum(numList))
    i += 1

file.close() 
```

我的结果：

```
Sample size: 3 Results: 46
Sample size: 5 Results: 214
Sample size: 4 Results: 86
Sample size: 2 Results: 102
End of experiment 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T19:01:22.327

将文件用作迭代器，然后用于[`iterators.islice()`](http://docs.python.org/2/library/itertools.html#itertools.islice)获取每一行：

```
from itertools import islice

with open("test_file1.txt", "r") as f:
   for line in islice(f, 1, None, 2):
       nums = [int(n) for n in line.split()]
       print 'Sample size: {}  Results: {}'.format(len(nums), sum(nums)) 
```

`islice(f, 1, None, 2)`跳过第一行 ( `start=1`)，然后遍历所有行 ( `stop=None`)，每隔一行 ( ) 返回一次`step=2`。

这适用于您扔给它的任何文件大小；它不需要比内部迭代器缓冲区更多的内存。

测试文件的输出：

```
Sample size: 3  Results: 46
Sample size: 5  Results: 214
Sample size: 4  Results: 86
Sample size: 2  Results: 102 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T18:59:14.637

你可以这样做：

```
with open("test_file1.txt", "r") as inf:
    lines = inf.readlines()
    for l in lines[1::2]:  # read only alternating lines
        numList = map(int, line.split())
        print "Sample size:", len(numList), "Results:", sum(numList) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T19:05:52.113

像这样的东西怎么样，相当Pythonic恕我直言：

```
with open('test.txt') as fh:
    for i, line in enumerate(fh):
        if i % 2:
            nums = map(int, line.split())
            print 'Sample size: %d, Results: %d' % (len(nums), sum(nums))
        elif line == '0':
            print 'End of experiment' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:42:02.857

我不确定 pythonic 的人如何找到这个，但我发现 zip、ma​​p 和 reduce 是一种非常方便的方式，可以以紧凑的方式完成此操作。但是，它可能有点混淆。

```
with open("test.txt") as fd:                                                                                                           
   lines = [map(int, s.strip().split()) for s in fd.readlines()]                                                                      
   print "\n".join("Sample Size: %d \t Results: %d"%tuple(map(sum,(d[0],d[1])))                                                       
                   for d in zip(lines, lines[1:], range(len(lines)))                                                                  
                   if d[2] % 2 == 0) 
```

# arrays - delphi中的碰撞检测（pascal）

> ID：16022722
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:55:10.667
> 
> 标签：arrays, delphi, collision-detection, pascal

我正在为我的 A Level 项目制作自己的 Space Invaders 版本，但我被碰撞检测困住了。当子弹击中一名入侵者并且我真的被卡住时，我需要检测碰撞。

入侵者当前存储在二维数组中并在计时器上移动，代码如下：

```
for Row:=1 to 5 do
begin
frmGame.Canvas.FillRect(WaveArea)
for Column:=1 to 11 do
  begin
    frmGame.Canvas.Draw(30+Column*50+x, 180 Images[1].Picture.Graphic);
    frmGame.Canvas.Draw(30+Column*50+x, 230 Images[2].Picture.Graphic);
  end;
 x:=x+xShift;
end;
if x>500 then
 tmrMoveInvaders.Enabled:=False; 
```

我写的碰撞代码不起作用，但我不知道为什么。这可能是使用二维数组将图像加载到表单上的方式，但我不确定。

碰撞过程的代码是：

```
Procedure Collision(img:TImage);
Var
 TargetLeft,BulletLeft:integer;
 TargetRight,BulletRight:integer;
 TargetTop,BulletTop:integer;
 TargetBottom,BulletBottom:integer;
 Hit:boolean;

begin
 with frmGame do
  hit:=true;
  TagetLeft:=img.Left;
  BulletLeft:=shpBullet.Left;
  TargetRight:=img.Left+46; //left + width of the image
  BulletRight:=shpBullet.Left+8;
  TargetTop:=img.Top;
  BulletTop:=shpBullet.Top;
  TargetBottom:=img.Top+42; //top + height of image
  BulletBottom:=shpBullet.Top+15;

  if (TargetBottom < BulletTop) then hit:=false;
  if (TargetTop > BulletBottom) then hit:=false;
  if (TargetRight < BulletLeft) then hit:=false;
  if (TargetLeft > BulletRight) then hit:=false;
  if not img.Visible then hit:=false;

  if hit=true then
   img.Visible:=false; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:24:12.560

您的碰撞数学是正确的：当这四个检查之一为真时，确实没有命中。所以你需要调试，因为显然还有其他问题。

先从逻辑上开始调试：

*   问：我在检查什么？A：图像和子弹的位置。
*   问：子弹的位置是什么？答：这是`BoundsRect`我在表单上看到的形状控件。不能错。
*   好的。
*   问：图像的位置是什么？答：同样：它是我在表单上看到的 Image 组件的边界矩形。
*   问：真的吗？A：是的……哦等等；我自己画图！！！（咦，为什么？？）
*   问：嗯，这可能是原因吗？A：嗯，可能……？

简而言之：在您的 Collision 例程中，您假设 2D 数组中的图像控件包含有关它们在表单上的位置的信息。但我怀疑它们甚至不是表单的孩子，更不用说设置任何`Left`和`Top`属性了，因为你用`Canvas.Draw`.

结论：像在绘画程序中一样计算图像的位置。或者设置`Parent`每个图像的属性，并通过不绘制图像的图形而是通过设置`Left`和重新定位数组中的图像组件来重写更新例程中的代码`Top`。

### 评论：

*   我完全同意 Wouter：由于很多很多语法错误，您的代码无法编译。请确保将真正的编译代码放在 StackOverflow 上，最好直接从源代码编辑器复制粘贴。
*   您可以使用 来简化碰撞检测[`IntersectRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145001%28v=vs.85%29.aspx)，如下所示：

    ```
    const
      ColCount = 11;
      RowCount = 5;

    type
      TCol = 0..ColCount - 1;
      TRow = 0..RowCount - 1;

      TGameForm = class(TForm)
      private
        FBullet: TShape;
        FTargets: array[TCol, TRow] of TImage;
        procedure CheckCollisions;
      end;

    implementation

    {$R *.dfm}

    procedure TGameForm.CheckCollisions;
    var
      Col: TCol;
      Row: TRow;
      R: TRect;
    begin
      for Col := Low(TCol) to High(TCol) do
        for Row := Low(TRow) to High(TRow) do
          if IntersectRect(R, FTargets[Col, Row].BoundsRect, FBullet.BoundsRect) then
            FTargets[Col, Row].Visible := False;
    end; 
    ```

*   尝试使用一组图形而不是图像：`FTargets: array[TCol, TRow] of TGraphic;`

*   或者更好的是，如果所有目标都是同一张图像：将其设为 的 2D 数组`Boolean`，指示该坐标处的目标是否被击中。
*   停止使用全局表单变量 ( `frmGame`)。并立即停止！
*   制作表单类的所有例程方法，如上图。
*   将所有全局变量设为表单类的私有字段，如上所示。

# java - 有没有一种快速简便的方法将 winzip（或内置提取器的 windows）与 jar 文件相关联？

> ID：16022723
> 
> 赞同：1
> 
> 时间：2013-04-15T18:55:12.997
> 
> 标签：java, windows, winzip

我正在使用的几个库提供“源”，但源实际上是一系列嵌套的 jar 文件，找到我需要查看的单个文件有点痛苦。

就目前而言，我将 .jar 重命名为 .zip 并在 winzip 中打开它。我不想提取所有内容 - 只需找到我想要的文件并查看它。

我可以右键单击并在任何 zip 文件上选择“使用 winzip 打开”，或者“解压到此处”以将整个存档解压缩到当前目录。

我希望这些选项也出现在 jar 文件中，这样我就不必重命名它们。

我仍然希望 jar 文件的主要“打开”保持不变。

我正在使用 Windows 7。

安装位置是 D:\Program Files\WinZip

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:57:56.747

我建议安装 WinRAR。它在 Windows 中右键单击文件时添加选项。![在此处输入图像描述](https://i.stack.imgur.com/bm2BI.png).

如您所见，jar 启动器是默认程序，但您现在可以选择直接提取文件。另外，我怀疑您是否需要将其重命名为`.zip`才能使用 WinZip 打开它。在二进制中，它具有正确的 zip 格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:59:55.420

右键单击并选择打开方式...->选择默认程序...以打开打开方式对话框。从列表中选择 Winzip（如果未列出，则浏览至它。）请确保在单击确定之前选择“始终使用所选程序打开此类文件”。这*将*更改您的默认程序设置！

或者，您可以在桌面上创建 Winzip 的快捷方式，然后将文件拖放到其上以打开它们。

您还可以通过编辑注册表在上下文菜单中添加另一个条目。您可以从其中一种工作文件类型中复制设置，并轻松地将其调整为 .jar 文件。如果您运行的是 64 位 Windows，则以下 .reg 文件应该可以解决问题。

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\jarfile\shell\winzip]
@="Open with WinZip"

[HKEY_CLASSES_ROOT\jarfile\shell\winzip\command]
@="\"C:\\Program Files\\WinZip\\WINZIP64.EXE\" \"%1\"" 
```

# php - 如何在 PHP 中制作动态权限系统

> ID：16022725
> 
> 赞同：0
> 
> 时间：2013-04-15T18:55:21.387
> 
> 标签：php

对于我正在构建的应用程序，我需要某种权限系统。我想自己建造它。现在有几个选择。

*   访问控制列表
*   基于角色的系统
*   基于组

我发现 ACL 有点过头了，基于角色的只有在你知道你的资源和基于组是我倾向于的情况下才真正起作用，但是我有一个问题。

我有一个系统，**用户**可以在其中*编辑*艺术家（即**Superfans**），所有对此有资格的用户都将进入某种**group/role**。但是我如何（这是动态部分发挥作用的地方）将它们指定给单个艺术家？我想每个艺术家只有 5 个人。

所以基本上；**我需要一个基于组的权限系统，它也允许基于用户的权限。**

写感觉就像我需要 ACL，但我不能制作如下资源：can_edit_u2、can_edit_bonjovi、can_edit_thebeatles.. 或者我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:03:51.767

用表结构简单解释：

**用户**

```
id |    username    |
1  |    John        |
2  |    Michael     | 
```

**艺术家**

```
id |    name        |
1  |    Bon Jovi    |
2  |    Beatles     | 
```

**可编辑**

```
id |    artist_id   |    user_id    |
1  |    1           |    1          |
2  |    1           |    2          |
3  |    2           |    2          | 
```

您的脚本逻辑应该像这样解释 - John 可以编辑 Bon Jovi，但 Michael 可以编辑 Bon Jovi 和 Beatles。

例如，如果 John 已登录，它应该使用其 user_id -> 存储会话变量`$_SESSION['id'] = 1`。

然后用户将要编辑披头士。您的逻辑检查：

```
SELECT tb1.name, tb2.user_id
FROM artists AS tb1.
INNER JOIN can_edit as tb2
ON tb1.id = tb2.artist_id
WHERE tb1.name = 'Beatles'

name    |    user_id   |
Beatles |     2        | 
```

所以你现在有一些代码可以在 PHP 中获取结果。

```
if ($_SESSION['id'] == $row['user_id']) {  // if the output of the session variable (1) is equal to the output of the query (2)
... // allow editing
}
else {
... // don't allow
} 
```

在这个例子中 $_SESSION['id'] 不等于 $row['user_id']，所以它不会让 John 编辑 Beatles

# android - Android 更改“共享”菜单中的文本

> ID：16022727
> 
> 赞同：0
> 
> 时间：2013-04-15T18:55:26.337
> 
> 标签：android

按照此处的说明：[Android Share Intent](https://stackoverflow.com/questions/9517545/android-share-intent)，我注意到共享菜单中显示的文本是@string/app_name。有没有办法让它在不更改 app_name 的情况下显示其他文本？如果可能，可以在 xml 或 java 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:10:13.983

> 因此，如果我希望我的应用程序显示在那里，那么显示的文本就是 app_name，我想在不更改我的应用程序名称的情况下更改该文本。

添加`android:label`到`<intent-filter>`您的活动说它支持的地方`ACTION_SEND`。

# soap - SOAP 端点中的变量

> ID：16022730
> 
> 赞同：0
> 
> 时间：2013-04-15T18:55:28.847
> 
> 标签：soap, wsdl, endpoints

我正在为一些具有行业标准 wsdls 的服务编写代理。该项目的目标是让所有参与者将他们的请求发送到代理，无论格式如何，我们将包装消息并将其发送到预期的目标。

然而，弄清楚谁是预期目标已成为一个难题。我考虑过修改 WSDL 以包含额外的 SOAP 标头，但我想尽可能避免修改众所周知的行业 wsdls。

我的另一个选择是使用带有一些变量的端点。`/<network>/<service>/`是现有的服务端点方案。我想做这个`/<network>/<service>/<target>/`，但只`<target>`在实际代码中使用 for 逻辑。我不想为每个端点设置一个单独的端点，`<target>`因为它们是可变的，并且无论其内容是什么，都将是相同的服务和 wsdl。

我还没有找到一种方法来以一种`/<network>/<service>/*/`有效的方式定义 SOAP 端点。这可能吗？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:46:49.703

我们使用标题部分来存储路由信息和用户 ID，以及一般元数据。

但是，如果您不想这样做，也许[WS-Addressing](http://www.w3.org/Submission/ws-addressing/)是相关的？至少，它是标准化的。我认为你仍然必须有一个标题。

“Web 服务端点是 Web 服务消息可以作为目标的（可引用的）实体、处理器或资源。端点引用传达了识别/引用 Web 服务端点所需的信息，并且可以以多种不同的方式使用：端点引用适用于传送访问 Web 服务端点所需的信息，但也用于为发送到 Web 服务和从 Web 服务发送的单个消息提供地址。为了处理最后一个用例，本规范定义了一系列消息信息头，允许统一独立于底层传输的消息寻址。这些消息信息标头传达端到端消息特征，包括源和目标端点的寻址以及消息身份。

# php - 写入会话数据（文件）失败

> ID：16022731
> 
> 赞同：10
> 
> 时间：2013-04-15T18:55:29.247
> 
> 标签：php, session, permissions, plesk

我刚刚通过托管方订购了一台 vps 服务器。这是带有 Plesk 11 的 CentOS。所以我刚刚在服务器上安装了 Zend 应用程序，但现在错误日志显示

```
[Mon Apr 15 20:48:28 2013] [warn] [client 94.210.222.87] mod_fcgid: stderr: PHP Fatal error: Uncaught exception 'Zend_Session_Exception' with message 'Zend_Session::start() - /var/www/vhosts/ontwerp.doedels.eu/httpdocs/mvc/libraries/Zend/Session.php(Line:469): Error #2 session_start(): open(/var/www/vhosts/ontwerp.doedels.eu/tmp/sess_t2orkniqjn9rsn9m84d2clsdd1, O_RDWR) failed: Permission denied (13) Array 
[Mon Apr 15 20:48:28 2013] [warn] [client 94.210.222.87] mod_fcgid: stderr: /var/www/vhosts/ontwerp.doedels.eu/httpdocs/mvc/libraries/Zend/Session.php(Line:479): Error #2 session_write_close(): open(/var/www/vhosts/ontwerp.doedels.eu/tmp/sess_t2orkniqjn9rsn9m84d2clsdd1, O_RDWR) failed: Permission denied (13) Array 
[Mon Apr 15 20:48:28 2013] [warn] [client 94.210.222.87] mod_fcgid: stderr: /var/www/vhosts/ontwerp.doedels.eu/httpdocs/mvc/libraries/Zend/Session.php(Line:479): Error #2 session_write_close(): Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/var/www/vhosts/ontwerp.doedels.eu/tmp) Array' in /var/www/vhosts/ontwerp.doedels.eu/httpdocs/mvc/libraries/Zend/Session.php:482 
```

**到目前为止我尝试了什么？** 我尝试将 session.save_path 设置为 {DOCUMENTROOT}/tmp 和 {WEBSPACEROOT}/tmp 这似乎不起作用。

phpinfo 函数说 session.save_path = /var/www/vhosts/ontwerp.doedels.eu/tmp 这是一个好文件夹。路径存在且文件夹有 777 CHMOD 权限。

**解决** 方法 当我设置 session.save_path = {WEBSPACEROOT}/private/sess 时它似乎可以工作这是我使用 777 chmod 权限创建的文件夹，但它似乎不是一个永久的解决方案。因为我必须通过我所做的每个订阅来创建这个文件夹。

**我肯定知道什么？**

*   文件夹未满
*   该文件夹确实存在
*   文件夹有写权限 777
*   文件夹所有者为 0
*   在 fastcgi 模式下运行服务器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T18:56:30.647

您需要为您的 var 目录设置权限。这似乎是问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-26T22:41:05.990

会话文件夹上的默认所有权可能不正确：示例；Amazon Linux 上的 php-fpm7.0 默认为 apache 用户。如果使用 nginx 或其他需要切换文件夹所有权。另请注意，您必须更改 www.conf 中的用户/组设置。

```
chown -R root:nginx /var/lib/php/7.0/
sed -i 's/apache/nginx/g' /etc/php-fpm-7.0.d/www.conf
service php-fpm-7.0 restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T13:46:17.620

在 Plex 面板中，转到软件 > 选择 PHP 版本 > 切换到 PHP 选项。将 session.save_path 值设置为 /tmp

[![强制会话路径丛](https://i.stack.imgur.com/L62t0.jpg)](https://i.stack.imgur.com/L62t0.jpg) 在[https://flagon.digital/blog/others/failed-write-session-data#solution__defaultpath中找到](https://flagon.digital/blog/others/failed-write-session-data#solution__defaultpath)

# actionscript-3 - AS3：是否可以在屏幕上的特定区域添加子元素，而不是矩形？

> ID：16022737
> 
> 赞同：0
> 
> 时间：2013-04-15T18:55:44.893
> 
> 标签：actionscript-3, shape, addchild

我需要在特定区域添加许多孩子（addChild()）。该区域的形状不规则（图）。我注意到，如果我想在我的图形中添加许多孩子，Flash 会创建代表我的图形的矩形，而我的一些孩子会离开图形但进入这个矩形。我想到了制作许多小矩形来覆盖我的非规则图形并使用数组将所有孩子分布到这些小矩形中。这是正确的方法吗？我会欣赏一些想法。谢谢

//------------------------------------------------ ----------------------------

```
 function randomRange(max:Number, min:Number = 0):Number
    {
        return Math.random() * (max - min) + min;
    }

    public function Main()
    {
        var bounds:Rectangle = Area_mc.getBounds(Area_mc.stage);
        var xIncr:int = randomRange(15,320);
        var yIncr:int = randomRange(15,220);
        for (var xPos=bounds.x; xPos <= bounds.x + bounds.width; xPos += xIncr)
        {
            for (var yPos=bounds.y; yPos <= bounds.y + bounds.height; yPos += yIncr)
            {
                var isInsideShape:Boolean = Area_mc.hitTestPoint(xPos,yPos,true);
                if (isInsideShape)
                {
                    //trace(isInsideShape);
                    stage.addChild(_symbol);
                    _symbol.x = xPos;
                    _symbol.y = yPos;
                }

            }
        }
    } 
```

好的，我有随机的 X 和 Y，但孩子总是在容器的右侧！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:53:42.223

我无法理解您的确切要求。据我了解，如果您在具有非矩形形状的影片剪辑上添加子项，则可以使用影片剪辑的 hitTestPoint() 函数。

例如，如果您打算在非矩形“父”动画剪辑上添加“子”动画剪辑，则可以使用 hitTestPoint 检查某个点是否在父动画剪辑的形状内，然后将其添加到该点上。

下面的代码将添加扩展“parentMovieClip”上的movieclip 的“Child”类的实例。'Child' 是库中影片剪辑的链接名称，您需要将其实例添加到非矩形父级上。'parentMovieClip' 是舞台上的影片剪辑的实例名称。

```
//storing bounds of parent that is added on stage
var bounds:Rectangle = parentMovieClip.getBounds(parentMovieClip.stage);

//these are the x and y gap you need between each child
var xIncr:int = 5;
var yIncr:int = 5;

//Traverse through the rectangular bound, and check what points actually comes within the shape
for(var xPos=bounds.x; xPos <= bounds.x+bounds.width; xPos += xIncr)
{
    for(var yPos=bounds.y; yPos <= bounds.y+bounds.height; yPos += yIncr)
    {
            //check if the point is inside the parent's shape
        var isInsideShape:Boolean = parentMovieClip.hitTestPoint(xPos,yPos,true);
        if(isInsideShape)
        {
            //if point is indise the shape add an instance of 'Child'
            var oChild:Child = new Child();
            //we are adding oChild on stage 
            //since adding on parentMovieClip will increase its bound if oChild goes outside parentMovieClip 
            stage.addChild(oChild);
            oChild.x = xPos;
            oChild.y = yPos;
        }
    }
} 
```

如果您通过提供一些代码示例来详细说明您的要求，我也许可以为您提供确切的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:25:17.653

不，这是艰难的道路。

更好的

1) 将区域定义为多边形。

2）通过一种算法检查要添加的新对象的边界，该算法可以检测一个点是否在多边形内。

[这是一个很好的 C 算法，它简短、简短、易于转换为 as3 并且具有教育意义。](http://alienryderflex.com/polygon/)

# jquery - jQuery On Click 不起作用

> ID：16022744
> 
> 赞同：17
> 
> 时间：2013-04-15T18:56:06.187
> 
> 标签：jquery

我无法让我的事件处理程序触发。我将 JSON 调用到页面中，如下所示。然后我希望能够单击我创建的按钮之一，该按钮将执行“你好”警报。它适用于页面上的所有其他元素，但不适用于`<button>`.

任何人都可以帮忙吗？

**测试.js**

```
$(document).ready(function() {
  $.getJSON('/api/v1/recipe/?format=json', function(data) {
    $.each(data.objects, function(i, recipe) {
      $('table#recipes').append('<tr><td>' + recipe.title + '</td><td>' + recipe.ingredients + '</td><td>' + recipe.method + '</td><td><button class="btn" type="button" id="rmv">remove</button></td></tr>');
      });
    });

    $('rmv').on('click', function() {
      alert('hello there!');
    });
  }); 
```

**食谱.html**

```
{% extends 'base.html' %}

{% block content %}
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span6">
      <form action='' method="post">{% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="go baby!">
      </form>
    </div>
    <div class="span6">
      <table class="table table-striped table-bordered" id="recipes">
        <tr>
          <th>Title</th>
          <th>Ingredients</th>
          <th>Method</th>
          <th>Remove</th>
        </tr>
      </table>
    </div>
  </div>
</div>
{% block recipes %}{% endblock recipes %}
{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-15T18:57:23.173

你选错了应该是

```
$('#rmv') 
```

如果您要动态附加元素，则应该像这样使用它

```
$(document).on('click','#rmv',function(e) {
  //handler code here
}); 
```

您在 ajax 成功回调中的循环可能会产生具有重复 id 的元素，这是错误的，因此正如@Alnitak 提到的，您可以在修改 cde 之后切换到类选择器

```
$.getJSON('/api/v1/recipe/?format=json', function(data) {
  $.each(data.objects, function(i, recipe) {
    $('table#recipes').append('<tr><td>' + recipe.title + '</td><td>' + recipe.ingredients + '</td><td>' + recipe.method + '</td><td><button class="btn rmv" type="button" >remove</button></td></tr>');
  });
}); 
```

选择器看起来像

```
$(document).on('click','.rmv',function(e) {
  //handler code here
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T18:57:27.930

尝试这个。把这段代码移进去`callback`

```
$(document).ready(function() {
        $.getJSON('/api/v1/recipe/?format=json', function(data) {
            $.each(data.objects, function(i, recipe) {
                $('table#recipes').append('<tr><td>' + recipe.title + '</td><td>' + recipe.ingredients + '</td><td>' + recipe.method + '</td><td><button class="btn" type="button" id="rmv">remove</button></td></tr>');
            });

        $('#rmv').on('click', function() {
            alert('hello there!');
        });
        });

    }); 
```

或使用 jQuery.on

```
$(document).on("click", "#rmv",function() {
                alert('hello there!');
            }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-15T18:58:59.927

首先，确保 ID 的元素不超过一个`rmv`。ID 必须是唯一的，但您似乎要添加多个食谱，每个食谱都有自己的“删除”按钮。

您的事件处理程序注册也有问题 - 在注册事件处理程序之前，您没有等待 AJAX 调用完成（然后添加表格行）。

这可以通过在 AJAX`success`回调中注册事件处理程序来解决，但考虑到您的 ID 的第一个问题，更好的解决方案是使用类 ( `.rmv`) 而不是 ID，然后使用：

```
$('#recipes').on('click', '.rmv', function() {
   var $tr = $(this).closest('tr');
   // do something with the current row
}); 
```

上面的代码可以在`success`回调之外注册，因为它使用*事件委托*。它依赖于`click`冒泡到封闭表（已经存在）的事件，而不是在创建每个按钮时直接在每个按钮上注册事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T19:00:10.703

如果您使用元素的 id 来触发任何调用，则 Jquery 函数需要附加一个“#”符号。所以改变

```
$('rmv').on('click', function() {
        alert('hello there!');
    }); 
```

至

```
$('#rmv').on('click', function() {
        alert('hello there!');
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T18:57:34.273

```
$.getJSON('/api/v1/recipe/?format=json', function(data) {
            $.each(data.objects, function(i, recipe) {
                $('table#recipes').append('<tr><td>' + recipe.title + '</td><td>' + recipe.ingredients + '</td><td>' + recipe.method + '</td><td><button class="btn" type="button" id="rmv">remove</button></td></tr>');
            });
            $('rmv').on('click', function() {
                alert('hello there!');
            });
        }); 
```

在您的 ajax 请求的成功函数中附加事件处理程序。

编辑 - 根据其他人，您的选择器`rmv`是错误的，应该是`#rmv`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T18:59:17.283

```
$('#rmv', table).on('click', function(){
     alert('hello there!');
}); 
```

# excel - 如何使用 Sahi Pro _getExcel API 在 Excel 文件中设置单元格值？

> ID：16022746
> 
> 赞同：0
> 
> 时间：2013-04-15T18:56:10.993
> 
> 标签：excel, testing, sahi, data-driven-tests

所以这是我的脚本：

```
//Get a handle to the Excel sheet 
var $db = _getExcel("C:\\Users\\datasource.xlsx","Sheet1");

//Get Data
var $rs=$db.getData();

//Set a random number to append to this group of usernames
var $rand= null;
_set($rand,_random(1000000));

//For each class code in Excel datasource, create a new account
for(var $i=1; $i<$rs.length; $i++){
var $classcode = $rs[$i][0];        //column 0 is class codes
CreateEnrollmentPreview($classcode,$rand)

var $rs=$db.set([$i],[3],$classcode + "_" + $rand + "@domain.com");
}  // this line fails 
```

最后一行中关于该`$db.set`函数的某些内容因错误而失败`Wrapped java.lang.NullPointerException`。我尝试过传递带括号和不带括号的索引，但总是得到相同的结果。有人知道我要去哪里错了吗？

当前所有在线帮助似乎都使用旧方法，将 Excel 文件视为具有该`_dbGet`功能的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:16:07.500

弄清楚了。我在另一个窗口中打开了 Excel 文件。当我关闭它并再次尝试时，它工作得很好。

# multithreading - 使用线程java的错误TCP客户端服务器聊天程序

> ID：16022747
> 
> 赞同：0
> 
> 时间：2013-04-15T18:56:21.610
> 
> 标签：multithreading, tcp, thread-safety, tcpclient, tcpserver

我正在制作一个 tcp 客户端服务器聊天程序。我的服务器是由线程制作的，其代码如下：

```
 System.out.println("Server binded at "+((client.getInetAddress()).getLocalHost()).getHostAddress()+":9867");
    System.out.println("Run the Client");
    //ready to accept client request
    //opening the input stream to read data from client connection
    in= new BufferedReader(new InputStreamReader(client.getInputStream()));
    System.out.println(in.readLine());

                //using output stream responsing data 

                out=new PrintStream(client.getOutputStream());
                out.print("Welcome by server\n");

                System.out.println("1");

                in= new BufferedReader(new InputStreamReader(client.getInputStream()));
    System.out.println(in.readLine());                        

                while(! in.readLine().trim().equals("*")) {

                    //using output stream responsing data 
                    System.out.println("3");
                   BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
                    str = bufferRead.readLine();                    
                    out.println(str);
                    out.flush();

                    //opening the input stream to read data from client connection
            in= new BufferedReader(new InputStreamReader(client.getInputStream()));
                      System.out.println(in.readLine());

        } 
```

我的客户文件是：（简单，没有线程）

```
client =new Socket("127.0.0.1", 9867);

                System.out.println("Client connected ");
                //getting the o/p stream of that connection
                out=new PrintStream(client.getOutputStream());
                //sending the message to server
                out.print("Hello from client\n");

                //reading the response using input stream
                in= new BufferedReader(new InputStreamReader(client.getInputStream()));
                System.out.println(in.readLine());

                bufferRead = new BufferedReader(new InputStreamReader(System.in));
                str = bufferRead.readLine();                    
                out=new PrintStream(client.getOutputStream());
                out.print(str);
                out.flush();

                while(! in.readLine().trim().equals("*")) {

                   // opening the input stream to read data from server connection
                   in= new BufferedReader(new InputStreamReader(client.getInputStream()));
                    System.out.println("4");
                    System.out.println(in.readLine());
                    System.out.println("5");

                    out=new PrintStream(client.getOutputStream());
                    bufferRead = new BufferedReader(new InputStreamReader(System.in));
                    str = bufferRead.readLine();                    
                    out.print(str);
                    out.flush();

                } 
```

现在对我来说发生了一件奇怪的事情。当我注释掉两个文件上的 while 循环时，程序运行良好。但是当我在向服务器发送味精后取消评论时，我的客户端进入while循环，我的服务器继续等待响应。

所以输出是：（客户端）

```
Client connected 
Welcome by server
l;skc
4 
```

和服务器是：

```
Server binded at 192.168.1.242:9867
Run the Client
Hello from client
1 
```

我认为这是由于使用了线程/异步进程。请帮助

**编辑代码**

服务器端：

```
System.out.println("Server binded at "+((client.getInetAddress()).getLocalHost()).getHostAddress()+":9867");
            System.out.println("Run the Client");
            //ready to accept client request
            //opening the input stream to read data from client connection
            in= new BufferedReader(new InputStreamReader(client.getInputStream()));
            System.out.println(in.readLine());

                        //using output stream responsing data 

                        out=new PrintStream(client.getOutputStream());
                        out.print("Welcome by server\n");

                        System.out.println("1");

                        str = in.readLine();
            System.out.println(str);                        

                        while(!str.trim().equals("*")) {

                            //using output stream responsing data 
                            System.out.println("3");
                           BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
                            str = bufferRead.readLine();                    
                            out.println(str);
                            out.flush();

                            //opening the input stream to read data from client connection
                    in= new BufferedReader(new InputStreamReader(client.getInputStream()));
                              System.out.println(in.readLine());

                } 
```

客户端：

客户端=新套接字（“127.0.0.1”，9867）；

```
 System.out.println("Client connected ");
            //getting the o/p stream of that connection
            out=new PrintStream(client.getOutputStream());
            //sending the message to server
            out.print("Hello from client\n");

            //reading the response using input stream
            in= new BufferedReader(new InputStreamReader(client.getInputStream()));
            System.out.println(in.readLine());

            bufferRead = new BufferedReader(new InputStreamReader(System.in));
            str = bufferRead.readLine();                    
            out=new PrintStream(client.getOutputStream());
            out.print(str);
            out.flush();

            while(! str.trim().equals("*")) {

               // opening the input stream to read data from server connection
                str = in.readLine();
                System.out.println("4");
                System.out.println(str);

                out=new PrintStream(client.getOutputStream());
                str = bufferRead.readLine();                    
                out.print(str);
                out.flush();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:01:53.353

第一条线索。看看你能用这个做什么：

这一行：

```
 System.out.println(in.readLine()); 
```

将从传入连接中读取一行并回显它。当它这样做时，行内容消失了，如果您再次尝试调用“in.readLine()”，它将尝试读取另一行，而不是再次读取同一行。

此外，这一行：

```
in= new BufferedReader(new InputStreamReader(client.getInputStream())); 
```

通常只会出现一次。当你构建阅读器时，你只需要使用它。您不必一遍又一遍地重建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:05:09.730

对于您的示例，我强烈推荐通过以下链接进行敲击敲门协议`http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html`

对我来说，代码中明显的主要错误是

```
 while(! str.trim().equals("*")) 
```

什么时候应该

```
while ((str = in.readLine()) != null) {
System.out.println("Server: " + str); 
```

这意味着您的线程将通过输入流持续侦听输入，然后您可以在服务器返回响应后对 str 变量执行任何操作

# c# - 将 2 个或更多数组连接成新列表中的唯一组合

> ID：16022754
> 
> 赞同：0
> 
> 时间：2013-04-15T18:56:33.903
> 
> 标签：c#, arrays, string, list

我正在解决一个问题，我可以有 2 个或更多的字符串值数组。

从第一个数组开始，我需要获取每个值并连接下一个数组的第一个值和第三个数组的第一个值，依此类推，直到所有可能的组合都被组合。

例子：

```
Array1 {'A', 'B'}
Array2 {'C', 'D', 'E'}
Array3 {'F', 'G', 'H'} 
```

输出将是

```
Row 1 = A, C, F
Row 2 = A, C, G
Row 3 = A, C, H
Row 4 = A, D, F
Row 5 = A, D, G
Row 6 = A, D, H 
```

以此类推，直到所有组合完成。在这种情况下，它将是 18 种组合。

我以前使用字符串连接来组合值，但从来没有在这样的过程中，其中数组的数量可能会改变，其中的项目数量会产生这种类型的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:10:41.560

[这](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)是答案

```
List<string[]> lists = new List<string[]>()
{
    new[]{"A", "B"},
    new[]{"C", "D", "E"},
    new[]{"F", "G", "H"}
};

var cp = lists.CartesianProduct();

foreach(var line in cp)
{
    Console.WriteLine(String.Join(" ",line));
} 
```

* * *

```
public static partial class MyExtensions
{
    //http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx
    public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences)
    {
        // base case: 
        IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
        foreach (var sequence in sequences)
        {
            var s = sequence; // don't close over the loop variable 
            // recursive case: use SelectMany to build the new product out of the old one 
            result =
                from seq in result
                from item in s
                select seq.Concat(new[] { item });
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:04:12.100

嵌套的 for 循环适用于此：

```
for (int i=0;i<=Array1.Length;i++)
{
  for (int j=0; j<=Array2.Length; j++)
  {
    for (int k=0;k<=Array3.Length; k++)
      //output however Array1[i] + ", " + Array2[j] + ", " + Array3[k];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:10:10.860

您可以使用[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)算法列出所有组合：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CartesianProduct
{
    class Program
    {
        static void Main(string[] args)
        {
            char[] array1 = new char[] { 'A', 'B' };
            char[] array2 = new char[] { 'C', 'D', 'E' };
            char[] array3 = new char[] { 'F', 'G', 'H' };

            int iterations = array1.Length * array2.Length * array3.Length;

            for (int i = 0; i < iterations; i++)
            {
                Console.WriteLine("{0}, {1}, {2}", array1[i % array1.Length], array2[i % array2.Length], array3[i % array3.Length]);
            }
            Console.WriteLine("Total iterations: " + iterations.ToString());
            Console.Read();
        }
    }
} 
```

# javascript - 将 HTML 文件链接到 Java 脚本文件

> ID：16022759
> 
> 赞同：1
> 
> 时间：2013-04-15T18:56:50.237
> 
> 标签：javascript, html, visual-studio-2012, reference, intellisense

嘿，我认识的每个人这听起来有点像一个新手问题，但我对使用外部 Java 脚本文件的概念很陌生。

我正在使用 Visual Studio 2012 在 HTML 5 网站上工作，并编写了一个外部 java 脚本文件，该文件将与我的 index.html 文件一起使用。我已经将我的 Java Script 文件链接到我的 HTML 文件，并且能够很好地使用该文件中的函数；但是，我真的很想将 HTML 文件链接到我的 Java Script 文件，这样当我编辑外部 Java Script 文件时 Intellisense 仍然可以工作，就像我使用嵌入式脚本时一样。

例如，假设我的 HTML 页面中有一个名为“myAwesomeDiv”的 div 标签，我想在我的一个 Java Script 函数中引用它。如果我在 HTML 页面的某个地方有这个功能，我可以开始输入“myAwesome”，Intellisense 会提供该 div 名称作为一个非常方便的选项；但是，我使用的是外部 Java 脚本文件，所以如果我在 JS 文件中开始键入该 div 名称，则不会出现任何内容，因为它在我的 HTML 文件中看不到任何内容。

那么我要问的是，是否有将我的 HTML 文件链接到 JS 文件，以便它可以查看我的 HTML 文件中的元素并在我在 JS 文件中输入时为我提供建议？

我已经尝试过像这样在我的 JS 文件顶部引用 HTML 文件。

```
///<reference path="index.html" /> 
```

这似乎对我没有任何帮助:(

任何帮助都将不胜感激，因为我对 Intellisense 非常宠爱，但我也喜欢使用外部 Java Script 文件的想法。

# java - 文件资源管理器 Android

> ID：16022764
> 
> 赞同：0
> 
> 时间：2013-04-15T18:57:07.457
> 
> 标签：java, android, file

我正在尝试在 Android 上查找文件资源管理器，但我什么也没找到。

我只能找到创建教程的教程，但这行不通。

我想在 java 中找到类似 JFileChooser 的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:12:03.167

你必须自己创建我创建了一个如下所示，我不想执行文件我只是在那里选择了文件的名称，有任何疑问可以自由提问。

我的是[这个](https://stackoverflow.com/questions/15423802/how-to-open-inbuilt-filemanager-through-code)

# c# - “固定”到底在做什么？

> ID：16022766
> 
> 赞同：3
> 
> 时间：2013-04-15T18:57:12.200
> 
> 标签：c#, .net

在不安全的上下文中，我有一些看起来像这样的代码：

```
 ValidatePartialOperation(array, startingOffset, runLength);

 fixed (double* _op = array)
 {
     double* op = _op + startingOffset;
     callSomething(op, runLength);
 } 
```

我把那个副本+粘贴在几个不同的地方。但我讨厌在多个地方进行这种验证和指针运算，所以我想将逻辑组合成一行，如下所示：

```
 double* op = preCall(array, startingOffset, runLength);
 callSomething(op, runLength);
 postCall(array); 
```

甚至更好：

```
 using (double* op = preCall(array, startingOffset, runLength))
 {
     callSomething(op, runLength);
 } 
```

但无论发生什么，我都不能承受“固定”版本的性能损失。

我现在的计划是模仿固定语句在做什么，但我实际上并不知道那是什么。大概是一些带有固定操作的 try-catch 块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:14:07.303

当然，你可以这样做。是否能满足你的性能需求，我不知道；你应该测量并找出答案。

要在不使用语句的情况下将数组固定到位并获取指针，`fixed`您可以使用`GCHandle`对象。使用“固定”句柄类型调用`GCHandle.Alloc`，传入数组，您将返回一个`IntPtr`可以安全地转换为指针的值。该数组将保持固定状态，直到`Free`在 上调用`GCHandle`，因此*请确保您不会丢失对 的跟踪`GCHandle`*。只要该句柄出色，您就会破坏垃圾收集器的性能。

但我的建议是使用该`fixed`语句。这就是它的用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T17:34:50.443

只是为了未来的读者，我想我已经很好地弄清楚了，尽管有一些有根据的猜测。

基本上，这似乎是调用 C++/CLI [pin_ptr](http://msdn.microsoft.com/en-us/library/vstudio/1dz8byfh.aspx)`fixed`的 C# 方式。这些是必须在堆栈上声明为局部变量的特殊变量。它们似乎不直接与 GC 通信，因此它们的重量很轻。相反，当 GC 运行时，它足够智能地搜索所有活动线程的调用堆栈并检查是否有任何函数的变量是这些特殊的固定指针。如果它们是，无论它们指向什么都被标记为固定，并且在垃圾收集期间不会在内存中移动。

相比之下，`GCHandle.Alloc(obj, GCHandleType.Pinned)`实际上与 GC 通信并将对象放在不移动的对象列表中。这意味着每次您`GCHandle.Alloc`和 then`Free`时，您都在向列表中添加和删除元素并进行工作。固定指针是一种完全被动的机制，不需要做任何额外的工作。这也解释了为什么不能更改固定指针的值：它指向的托管对象只有在固定指针指向它时才能保证是固定的。如果固定指针指向不同的对象，*它*现在将被固定。而且，如果您将固定指针设置为空，即使只是片刻，它也不会再固定任何东西，并且您到目前为止所做的所有指针数学运算都将失效。

这解释了当我尝试切换到 GCHandles 时性能受到的影响。所以`fixed`它不仅是最好的工具，而且是*唯一*的工具，至少在性能很重要的时候是这样。即使语法有时很尴尬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:00:45.833

固定是防止垃圾收集器在内存压缩期间重新定位您的对象。如果您不使用它，那么您的对象可以随时移动，并且指针将变得无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:01:50.057

不，不是那样的。就像 MSDN 所说：[Fixed](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.80%29.aspx)语句防止垃圾收集器移动内存，以便您的固定指针在需要时保持有效。如果您正在使用一些非托管资源，这一点很重要。`using`据我目前所知，您不能用任何`try/catch/finally`或其他任何东西代替它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T19:01:58.963

[`fixed`](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.110%29.aspx)固定变量，防止垃圾收集器在`fixed`块期间移动对象。

根据[文档](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.110%29.aspx)：

> C# 编译器仅允许您在固定语句中分配指向托管变量的指针。

因此，您似乎无法`fixed`在代码中使用该语句。

# javascript - 使用 fetch 与数据并删除的主干：false

> ID：16022771
> 
> 赞同：0
> 
> 时间：2013-04-15T18:57:21.367
> 
> 标签：javascript, backbone.js

文档不清楚，我自己也找不到答案，我想知道是否在骨干网中使用数据参数 fetch() 覆盖也有一个 remove: false。我在初始加载时引导了一些集合，但是对于某个页面，我需要获取集合的子集，而不是覆盖集合中已经存在的模型，这是它的要点：

```
 this.fetch({
        data: {
            model: {user_id: user.get('id'), is_finished: 't'}
        },
        remove: false,
        success: function(collection, response, options) {
            console.log(collection);
            console.log(options);
        },
        error: function(collection, response, options) {
            //oh noes
        }
    }); 
```

控制台中的选项显示所有先前已删除的模型，并且只有与数据匹配的模型在成功时仍保留在集合中。对我来说， remove: false 似乎只是被忽略了，我疯了吗？当我在没有 data 参数的情况下测试相同的 fetch 时，remove: false 功能正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:39:54.973

在 Backbone 1.0 之前，该`fetch`方法的默认行为是重置您的集合。升级到 Backbone 1.0 以默认更新。

# ruby-on-rails - 如何防止用户访问收件箱消息

> ID：16022774
> 
> 赞同：0
> 
> 时间：2013-04-15T18:57:25.737
> 
> 标签：ruby-on-rails

我一直在处理这个自定义收件箱消息。我正在尝试进行设置，以便只有收件箱所有者（登录用户）才能查看他们的消息。现在任何人都可以输入一个 url，例如当`/users/1/messages/7`消息应该只能由 id 为 1 的用户读取时查看消息，而不是 id 为 4、5、6 等的用户。我假设我需要进入消息模型并添加如下内容：

```
if inbox.recepient_id != @current_user.id
redirect_to :root 
```

知道如何让它工作吗？

消息模型：

```
class Message < ActiveRecord::Base
   attr_accessible :subject, :body, :sender_id, :recepient_id, :read_at,:sender_deleted,:recepient_deleted
   validates_presence_of :subject, :message => "Please enter message title"

   belongs_to :sender, :class_name => 'User', :foreign_key => 'sender_id'
   belongs_to :recepient, :class_name => 'User', :foreign_key => 'recepient_id'

   # marks a message as deleted by either the sender or the recepient, which ever the user that was passed is.
   # When both sender and recepient marks it deleted, it is destroyed.
   def mark_message_deleted(id,user_id)
      self.sender_deleted = true if self.sender_id == user_id
      self.recepient_deleted = true if self.recepient_id == user_id
      (self.sender_deleted && self.recepient_deleted) ? self.destroy : self.save!
   end
   # Read message and if it is read by recepient then mark it is read
   def readingmessage
      self.read_at ||= Time.now
      save
   end

  # Based on if a message has been read by it's recepient returns true or false.
  def read?
      self.read_at.nil? ? false : true
  end

  def self.received_by(user)
     where(:recepient_id => user.id)
  end

  def self.not_recepient_deleted
     where("recepient_deleted = ?", false)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:08:39.177

[康康舞](https://github.com/ryanb/cancan)对你来说是一颗宝石。我在所有项目中都使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:57:13.940

我解决这个问题的一种方法是在你的消息控制器上创建一个 before_filter。

```
class Messages < ApplicationController
  before_filter :check_user_inbox

  def check_user_inbox
    if inbox.recepient_id != @current_user.id
      redirect_to :root
    end
  end

  ... 
end 
```

# html - 在 Chrome 上使用 drawImage 和 Canvas 非常慢

> ID：16022781
> 
> 赞同：11
> 
> 时间：2013-04-15T18:57:48.947
> 
> 标签：html, performance, canvas, rendering, drawimage

我一直在尝试使用 drawImage 将大量 SVG 文件实例绘制到画布上。通过使用 SVG 作为源创建单个图像元素，然后为画布上的每个实例使用 drawImage，我希望即使有大量实例，我也可以非常快速地在画布中生成合成图像。

性能方面，这在 Firefox 中运行良好——我可以在大约 300 毫秒内绘制 60,000 个实例。但是在 Chrome 上它非常慢：16,000 个实例需要 5 秒以上。我在[jsfiddle](http://jsfiddle.net/7tgL3/11/)上放了一个版本的代码，它演示了 Chrome 上的问题。

我有一个我如何在下面调用 drawImage 的示例，其中画布上填充了尽可能多的大小 x 大小的图像。我读过一个建议，尝试使用第二个隐藏画布来缓冲所有实例，然后通过一次调用更新可见画布。但这并没有影响性能，单独的 drawImage 调用似乎仍然使事情陷入困境。

关于出了什么问题以及我能做些什么来解决它的任何想法？

```
 svgImg = new Image;

            can.width = 1800; can.height = 900;
            svgImg.onload = function () {
                if (internalSize == size)
                    return;
                internalSize = size;
                var timeBefore = new Date().getTime();
                var tot = 0;

                var canWidth = can.width;
                var canHeight = can.height;
                for (var x = 0; x < canWidth; x += size) {
                    for (var y = 0; y < canHeight; y += size) {
                        ctx.drawImage(svgImg, x, y, size, size);
                        tot++;
                    }
                }
                document.getElementById('count').innerHTML = "Total Count: " + tot;
                var timeAfter = new Date().getTime();
            };
            svgImg.src = "http://www.w3.org/Icons/SVG/svg-logo.svg";
            svgImg.width = size;
            svgImg.height = size; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T15:44:29.670

**减速 1：**当源或目标画布在 RAM 中而另一个画布在 GPU 上时发生。

**减速 2：**当 src 和 dest 画布大小不同时发生

* * *

相关错误：[http ://code.google.com/p/chromium/issues/detail?id=170021](http://code.google.com/p/chromium/issues/detail?id=170021)

我注意到了同样的问题，并将案例简化为将一个空白画布绘制到另一个。当画布大小相同时，这似乎不是问题，但在某一点上，性能会急剧下降。这是[jspref](http://jsperf.com/drawimage-large-canvas-to-small)和我的结果：

![jspref chrome 结果](https://i.stack.imgur.com/9NKuQ.png)

请注意 255x255 到 100x100 和 260x260 到 100x100 的差异。

# c# - 在asp.net webforms中使用http put方法

> ID：16022787
> 
> 赞同：2
> 
> 时间：2013-04-15T18:58:15.883
> 
> 标签：c#, asp.net, webforms, http-put

作为 ASP.NET 的新手以及无状态带来的乐趣，我一直在花费大量时间来思考这些概念。话说回来....

我正在处理使用 restful web 服务来更改/查看数据的第三方 API。首先，我发现了如何在 asp.net 中调用 Web 服务，然后通过查看 API 文档，我看到要获取数据，您可以这样做：

![在此处输入图像描述](https://i.stack.imgur.com/87re6.png)

所以我写了以下内容来查看空间的特征（他们数据库中的对象）：

> request = WebRequest.Create(ReqURL + query) as HttpWebRequest;

```
 if (DidAuthenticate(query))
        {
            try
            {
                //It will 404 if that space does not contain any custom attributes
                using (response = request.GetResponse() as HttpWebResponse)
                {
                    //Get the steam of the XML
                    StreamReader reader = new StreamReader(response.GetResponseStream());

                    //Put the XML in a document
                    XmlDocument doc = new XmlDocument();
                    doc.Load(reader);

                    //Grab all the space nodes
                    XmlNodeList featuresList = doc.GetElementsByTagName("r25:feature");

                    if (featuresList.Count > 0)
                    {
                        //Get all the info from the child nodes of the space node
                        foreach (XmlNode node in featuresList)
                        {
                            XmlNodeList childInfo = node.ChildNodes;

                            //The order never changes..i.e. the first index is always the id, 2nd is name, 3rd is quantity
                            Feature aFeature = new Feature(childInfo[ID].InnerText,
                                childInfo[NAME].InnerText, Int16.Parse(childInfo[QUANTITY].InnerText));

                            //Return all of the features
                            features.Add(aFeature);

                        }

                    }

                }
            }
            catch (WebException)
            {
                throw new WebException();
            } 
```

效果很好，我现在拥有了我需要的所有信息。现在，我正在尝试学习如何通过他们的网络服务***发***回信息以更改信息，这就是我苦苦挣扎的地方。我已经看到他们使用“PUT”来执行此操作，因此我尝试在 asp.net 中查找使用 http put 的教程，但由于我对该主题的无知或不完全理解，我没有找到我真正需要的内容结果。

以下是 API 文档关于操作信息的说明：

![在此处输入图像描述](https://i.stack.imgur.com/EpWjF.png)

**那么有人可以提供一个快速的代码示例/伪代码来展示我如何使用这个网络服务吗？**GET 很好，但我不知道从哪里开始 PUT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:02:31.530

您可以在 request.Method = "PUT" 中设置 put 并调用 URL 。试试看嘛 。PUT 与 POST 类似，但不是创建新条目，而是根据您作为 URL 的一部分发送的 Id 更新条目。该博客将帮助您编写代码：http: [//vinothnat.blogspot.in/2007/09/httpwebrequest-using-put-method.html](http://vinothnat.blogspot.in/2007/09/httpwebrequest-using-put-method.html)

# dosbox - DOSBox 和 Blinker SWPRUNCMD

> ID：16022789
> 
> 赞同：2
> 
> 时间：2013-04-15T18:58:17.443
> 
> 标签：dosbox, clipper

我有一个 Clipper 5.3 应用程序链接器，它使用专为 DOS PC 设计的 Blinker。我使用 Blinker SWPRUNCMD() 切换到 DOS 和其他程序。需要在 Win 7 Pro 64 位环境下运行这个程序，我尝试了 DOSBox 0.74。到目前为止我发现的唯一问题是，当执行 SWPRUNCMD() 时，会显示消息“交换失败”。目前，我无法重新编译（尽管我可能能够重新链接），因此无法尝试使用原生 Clipper RUN 命令。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:22:04.857

使用 RUN 而不是 SWPRUNCMD() 会有问题，因为 RUN 在运行其他二进制文件之前不会换出内存。如果其他二进制文件需要大量内存，则 RUN 不会有太大帮助。

维基百科确实提到了其他[dos 模拟器](http://en.wikipedia.org/wiki/Category%3aDOS_emulators)，但奇怪的是，没有提到[BOCHS](http://bochs.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T17:08:13.200

请参阅[SET CLIPPER](http://www.itlnet.net/programming/program/Reference/c53g04c/nga092.html)信息，尤其是 //SWAPPATH 选项。

此外，您可以使用以下命令运行您的应用程序：

```
app //INFO > log.txt 
```

在 log.txt 中获取更多信息

# jquery - jQuery Interactive：简化代码的可能方式

> ID：16022791
> 
> 赞同：0
> 
> 时间：2013-04-15T18:58:26.493
> 
> 标签：jquery, html-table

我正在创建一个小型交互，本质上是一个表格，用户将在其中单击一个复选标记，`<td>`单击图像将改变颜色。在用户做出所有决定后，他们将单击提交，这就是我可以使用一些帮助的部分。

目前我关于如何解决这个问题的计划/想法是为所有`<td>`带有表格（28）的表格分配一个ID，表格的大小为（4x7）。我的想法是，如果我做类似 ->

```
If TD1 $clicked == 1 then (true)
  TD1.css("background-color", "green");
else
  TD1.css("background-color", "red");

If TD2 $clicked == 3 then (true)
  TD2.css("background-color", "green");
else
  TD2.css("background-color", "red");

If TD3 $clicked == 2 then (true)
  TD3.css("background-color", "green");
else
  TD3.css("background-color", "red"); 
```

等等...

我知道这种语法不是 100% 正确，但想法就在那里。所以我会为所有 28 个项目执行此操作。我在问什么；有没有我没有看到的更简单的方法？任何帮助将非常感激。

编辑：

这是一些代码

```
<table> 
<tr>
        <td>Frying</td>
        <td id="td1"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
        <td id="td2"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
<td id="td3"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
<td id="td4"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
<td id="td5"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
<td id="td6"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
<td id="td7"><img src="img/check.png" width="30" height="30" /><img src="img/check.png"     width="30" height="30" /><img src="img/check.png" width="30" height="30" /></td>
        </tr>
</table> 
```

在 jQuery 中，img 会有一个 onclick 事件，它会将其更改为突出显示的版本。

除了这一行之外，该表还有更多内容，但最终结果是当用户单击所有内容时，他们将单击提交按钮。单击后，将检查每个框以查看它是否正确，如果是则背景变为绿色，如果不是则变为红色。所以 td1 可能等于 (clicked = 1) 而 td2 等于 (clicked = 2)。

抱歉，我之前没有提供足够的信息，这里还是很新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:04:16.197

将所有“可点击”元素分配给同一个类，并使用 jQuery 为该类注册一个侦听器，该侦听器将切换样式（红色或绿色）。您也可以只为所有`td`元素添加一个侦听器，但您可能会意外选择不打算使其可点击的元素。

使用 CSS 作为红/绿样式。

CSS

```
.red {
    background-color: red;
}

.green {
    background-color: green;
} 
```

Javascript（jQuery）：

```
$('.clickable').on('click', function(e) {
    if($(this).is('.red')) {
        $(this).removeClass('red').addClass('green');
    } else {
        $(this).removeClass('green').addClass('red');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:12:02.183

可能有更好的方法，但我会做这样的事情。

HTML：

```
<table>
    <tr><td><input type="checkbox" name="0"/>0</td></tr>
    <tr><td><input type="checkbox" name="1"/>1</td></tr>
    <tr><td><input type="checkbox" name="2"/>2</td></tr>
</table> 
```

JS：

```
var colors = ["blue", "green", "yellow"];
$(function () {
    $("input").on('click', function () {
        $(this).is(':checked') ?
            $(this).parent().css("background-color", colors[$(this).attr('name')]) :
            $(this).parent().css("background-color", "white");
    });
}); 
```

[http://jsfiddle.net/PXEt9/](http://jsfiddle.net/PXEt9/)

# java - 如何将列表包装为杰克逊生成的 JSON 中的顶级元素

> ID：16022795
> 
> 赞同：8
> 
> 时间：2013-04-15T18:58:33.340
> 
> 标签：java, json, jackson

我遇到了一个问题，我试图将一个 List 作为根节点，但我似乎无法得到这个。让我解释。假设我们有一个类“TestClass”

```
class TestClass{
    String propertyA;       
} 
```

现在，在某些实用方法中，这就是我所做的

```
String utilityMethod(){
   List<TestClass> list = someService.getList();
   new ObjectMapper().writeValueAsString(list); 
} 
```

我试图在 JSON 中得到的输出是

```
{"ListOfTestClasses":[{"propertyA":"propertyAValue"},{"propertyA":"someOtherPropertyValue"}]} 
```

我试过用

```
objMapper.getSerializationConfig().set(Feature.WRAP_ROOT_VALUE, true); 
```

但是，我似乎仍然没有做对。

现在，我只是在创建一个 Map < String,TestClass > 并编写它以实现我想要做的事情，这很有效，但显然这是一个 hack。有人可以帮我一个更优雅的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T19:27:39.430

不幸的是，即使`WRAP_ROOT_VALUE`启用了该功能，您仍然需要额外的逻辑来控制在序列化 Java 集合时生成的根名称（有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/15936680/how-to-rename-root-key-in-json-serialization-with-jackson/15937274#15937274)）。这让您有以下选择：

*   使用持有者类来定义根名称
*   使用地图。
*   使用自定义[`ObjectWriter`](http://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/ObjectWriter.html)

这是一些说明三个不同选项的代码：

```
public class TestClass {
    private String propertyA;

    // constructor/getters/setters
}

public class TestClassListHolder {

    @JsonProperty("ListOfTestClasses")
    private List<TestClass> data;

    // constructor/getters/setters
}

public class TestHarness {

    protected List<TestClass> getTestList() {
        return Arrays.asList(new TestClass("propertyAValue"), new TestClass(
                "someOtherPropertyValue"));
    }

    @Test
    public void testSerializeTestClassListDirectly() throws Exception {
        final ObjectMapper mapper = new ObjectMapper();
        mapper.configure(SerializationFeature.WRAP_ROOT_VALUE, true);
        System.out.println(mapper.writeValueAsString(getTestList()));
    }

    @Test
    public void testSerializeTestClassListViaMap() throws Exception {
        final ObjectMapper mapper = new ObjectMapper();
        final Map<String, List<TestClass>> dataMap = new HashMap<String, List<TestClass>>(
                4);
        dataMap.put("ListOfTestClasses", getTestList());
        System.out.println(mapper.writeValueAsString(dataMap));
    }

    @Test
    public void testSerializeTestClassListViaHolder() throws Exception {
        final ObjectMapper mapper = new ObjectMapper();
        final TestClassListHolder holder = new TestClassListHolder();
        holder.setData(getTestList());
        System.out.println(mapper.writeValueAsString(holder));
    }

    @Test
    public void testSerializeTestClassListViaWriter() throws Exception {
        final ObjectMapper mapper = new ObjectMapper();
        final ObjectWriter writer = mapper.writer().withRootName(
                "ListOfTestClasses");
        System.out.println(writer.writeValueAsString(getTestList()));
    }
} 
```

输出：

> {"ArrayList":[{"propertyA":"propertyAValue"},{"propertyA":"someOtherPropertyValue"}]}
> {"ListOfTestClasses":[{"propertyA":"propertyAValue"},{"propertyA":"someOtherPropertyValue "}]}
> {"ListOfTestClasses":[{"propertyA":"propertyAValue"},{"propertyA":"someOtherPropertyValue"}]}
> {"ListOfTestClasses":[{"propertyA":"propertyAValue"},{"propertyA ":"someOtherPropertyValue"}]}

使用 an`ObjectWriter`非常方便 - 请记住，使用它序列化的所有顶级对象都将具有相同的根名称。如果那不是可取的，那么请改用地图或持有人类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:06:53.603

我希望基本的想法是这样的：

```
class UtilityClass {
    List listOfTestClasses;
    UtilityClass(List tests) {
        this.listOfTestClasses = tests;
    }
}

String utilityMethod(){
    List<TestClass> list = someService.getList();
    UtilityClass wrapper = new UtilityClass(list);
    new ObjectMapper().writeValueAsString(wrapper); 
} 
```

# xsd - 覆盖基本类型中属性的默认值

> ID：16022799
> 
> 赞同：7
> 
> 时间：2013-04-15T18:58:51.267
> 
> 标签：xsd

我有一个像这样的现有类型，它属于库级 XSD：

```
 <xs:complexType name="mybase">
      <xs:attribute name="myattr" type="xs:string" default="123"/>
    </xs:complexType> 
```

后来，这通过一些更具体的 XSD 进行了扩展，这些 XSD 实现了特定于应用程序的配置要求：

```
 <xs:element name="appconfig">
      <xs:complexType>
        <xs:complexContent>
          <xs:extension base="mybase">
            <xs:attribute name="specific_attr" type="xs:string" use="required"/>
            <!-- etc, more specific requirements -->
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
    </xs:element> 
```

我们到处都在使用它，但是刚刚遇到了一个用例，在这个用例中，对于特定的应用程序，我们希望为“myattr”使用不同的默认值。我已经浏览了各种 XSD 文档，但没有找到任何似乎能够做到这一点的东西，这可能吗？

# web - 构建 NoHomophobes.com（Twitter 的实时关键字跟踪器）使用了哪些技术？

> ID：16022800
> 
> 赞同：1
> 
> 时间：2013-04-15T18:58:51.393
> 
> 标签：web, twitter

你认为他们是直接插入 Twitter API，还是他们有某种后端直接连接到 Twitter API？我没有意识到标准用户可以使用这种功能。

链接：[NoHomophobes.com](http://www.NoHomophobes.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:35:08.250

基本上，该站点使用[Twitter 流 API](https://dev.twitter.com/docs/streaming-apis)，它允许与 Twitter 建立持久连接。[当经过过滤的推文通过时，它会处理数据并通过名为Pusher](http://pusher.com/)的第三方服务通过 Web 套接字将其传递给网站用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:10:14.463

[这个网站](https://www.commarts.com/interactive/cai13/nohomophobes.html)有一篇关于所用技术的（简短）文章——看起来他们正在使用标准的公共 API：

> “使用 Twitter 的 API，推文 [...] 被实时提取、跟踪和显示
> 
> [...]
> 
> 我们不能简单地提取每条推文......进行了大量研究和测试以确定要捕获哪些单词和短语，以及推文必须遵循哪些参数才能被汇集到网站上”

此外，该网站自己的[条款和条件的](http://www.nohomophobes.com/#!/about/)提及

> 本网站包含经许可的推文实时显示

据推测，他们有效地不断地在公共推文中搜索某些术语（就像任何 Twitter 客户端都可以做的那样）并显示结果。

# vb.net - 串口系统.unauthorizedaccess

> ID：16022801
> 
> 赞同：2
> 
> 时间：2013-04-15T18:58:51.857
> 
> 标签：vb.net, serial-port, unauthorizedaccessexcepti

我的问题是当我运行程序时它工作得很好，但在程序的一个周期后崩溃。这是一些代码：

```
 Private Sub Receiver(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs) Handles COMPort.DataReceived
    Dim RXByte As Byte
    key = 0
    cut = False
    c.Open()
    Do
        RXCnt = 0
        Do
            RXByte = COMPort.ReadByte
            If (RXByte = 29) Then
                c.Write(Chr(10))
                cut = True
                c.Close()
                If c.IsOpen = False Then
                        ts = "BLAH"
                        Process.Start(System.Windows.Forms.Application.StartupPath & "\e.exe", ts)
                        Process.Start(System.Windows.Forms.Application.StartupPath & "\Test.exe", c.PortName)
                Else

                End If

            End If
            If (cut = True) Then
                Exit Do
            End If
            c.Write(Chr(RXByte))
            addText(Chr(RXByte))
            RXArray(RXCnt) = LookUpTable(RXByte >> 4)
            RXCnt = RXCnt + 1
            RXArray(RXCnt) = LookUpTable(RXByte And 15)
            RXCnt = RXCnt + 1
            RXArray(RXCnt) = " "
            RXCnt = RXCnt + 1
            SpaceCount = (SpaceCount + 1) And 31      
            If SpaceCount = 0 Then                    
                RXArray(RXCnt) = Chr(13) ' CR
                RXCnt = RXCnt + 1
                RXArray(RXCnt) = Chr(10) ' LF
                RXCnt = RXCnt + 1
            Else
                If (SpaceCount And 3) = 0 Then        
                    RXArray(RXCnt) = " "
                    RXCnt = RXCnt + 1
                    RXArray(RXCnt) = " "
                    RXCnt = RXCnt + 1
                End If
            End If
        Loop Until (COMPort.BytesToRead = 0)
        Me.Invoke(New MethodInvoker(AddressOf Display)) 
    Loop Until (COMPort.BytesToRead = 0)  
    c.Close()
End Sub 
```

我相信的问题出现在代码的这一点上

```
Process.Start(System.Windows.Forms.Application.StartupPath & "\Test.exe", c.PortName) 
```

系统抛出 System.UnauthorizedAccessException 错误。此外，测试程序还与同一个串行端口进行通信。当我运行程序时，进程启动并完成，但当前进程抛出错误。是 UAC 错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:28:47.537

两个程序不能同时打开串口。在以下情况下，尝试打开串行端口会引发该异常：

> 对端口的访问被拒绝。
> 
> -或者-
> 
> 当前进程或系统上的另一个进程已经通过 SerialPort 实例或在非托管代码中打开了指定的 COM 端口。

[来源](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.open.aspx)。所以你不能在你的程序中打开串口，也不能在`test.exe`.

# facebook - 在 Facebook 应用名称中使用“墙”

> ID：16022809
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:59:13.743
> 
> 标签：facebook

在尝试创建带有“墙”字样的 Facebook 应用程序时，我一直收到“失败”消息。我尝试了多种组合，例如：

1.  “某字墙”
2.  “某字墙”
3.  “某字墙”
4.  “Somewordwall 应用程序”
5.  ETC...

“墙”是不能在 Facebook 应用名称中使用的禁用词吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:04:24.010

是的，“墙”这个词确实是个禁词。Facebook 平台应用名称必须符合广告名称政策。以下是他们关于与您的问题相关的名称的广告法规的摘录。

“广告不得暗示 Facebook 认可或任何形式的合作。链接到 Facebook 品牌内容（包括主页、群组、活动或 Connect 网站）的广告可能会在广告文字中有限提及“Facebook”，以明确目的地除非我们明确允许，否则所有其他广告和登录页面不得使用我们的版权或商标（包括 Facebook、Facebook 和 F 徽标、FB、Face、Poke、Book 和 Wall）或任何容易混淆的类似标记品牌使用指南或经我们事先书面许可。”

# c# - 无法使用 nhibernate 插入表

> ID：16022814
> 
> 赞同：4
> 
> 时间：2013-04-15T18:59:24.927
> 
> 标签：c#, .net, sql-server-2008, nhibernate

我只是在学习 nhibernate 并尝试创建第一个示例。

我创建了一个空的基于服务的数据库并编写了映射和一些代码：

```
namespace lab
{
    public class Skill
    {
        public virtual int Id { get; protected set; }
        public virtual string Description { get; set; }
    }
} 
```

```
<?xml version='1.0' encoding='utf-8'?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="lab" assembly="lab">

  <class name="Skill" table="Skill">
    <id name="Id">
      <generator class="native"/>
    </id>
    <property name="Description" />
  </class>

</hibernate-mapping> 
```

```
<?xml version='1.0' encoding='utf-8'?>
<hibernate-configuration  xmlns="urn:nhibernate-configuration-2.2">

   <session-factory>

      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
      <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
      <property name="connection.connection_string">Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Dmitriy\Desktop\lab\lab\lab\DataBase.mdf;Integrated Security=True;User Instance=True</property>

       <mapping  file="C:\Users\Dmitriy\Desktop\lab\lab\lab\Skill.hbm.xml" />
   </session-factory>

</hibernate-configuration> 
```

```
var configuration = new Configuration();            
configuration.Configure(@"C:\Users\Dmitriy\Desktop\lab\lab\lab\hibernate.cfg.xml");
var session = configuration.BuildSessionFactory().OpenSession();
var transaction = session.BeginTransaction();
var skill = new Skill {Description = "C#"};
session.Save(skill);
transaction.Commit(); 
```

当我运行它时，我总是得到错误无法插入：

```
INSERT INTO Skill (Description) VALUES (?); 
select SCOPE_IDENTITY() 
```

> 对象名称“技能”无效。

我没有创建表，因为 nhibernate 应该自己创建它们。

你能帮我弄清楚为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:43:15.660

`SessionFactory`要让 NHibernate 创建数据库模式，请在构建之前添加以下行：

```
new NHibernate.Tool.hbm2ddl.SchemaExport(configuration)
                                            .Execute(false, true, false); 
```

此方法的签名是

```
public void Execute(bool script, bool export, bool justDrop); 
```

*   `script`- 如果这是真的，那么生成的模式脚本将被写入控制台。
*   `export`- 如果这是真的，那么生成的模式脚本将针对配置的数据库运行。
*   `justDrop`- 如果这是真的，那么总是被删除的表。

有关导出模式功能的更多信息可以在[NH 文档](http://www.nhforge.org/doc/nh/en/index.html#toolsetguide-s1)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T06:59:11.990

此解决方案有效，但是它会清除另一个表中的所有数据。我找到了发生异常的根源：检查表中的“Id”列。'Id' 列应递增。在创建表下，有必要将 IDENTITY 设置为唯一字段，如下所示：

```
CREATE TABLE dbo.aTable (ID_User INTEGER NOT NULL PRIMARY KEY IDENTITY(1,1), Name VARCHAR(30)) END 
```

# android - Android：OpenGL 2.0 使用 Matrix.setLookAtM 旋转/移动相机

> ID：16022821
> 
> 赞同：2
> 
> 时间：2013-04-15T18:59:45.210
> 
> 标签：android, matrix, opengl-es-2.0

所以这是我今天的第二个问题，我可能会碰运气 简而言之，制作一个 3D 第一人称，您可以在其中四处走动和环顾四周。

在我的 OnDrawFrame 我正在使用

```
Matrix.setLookAtM(mViewMatrix, 0, eyeX , eyeY, eyeZ , lookX , lookY , lookZ , upX, upY, upZ); 
```

要前后移动，向左回避等，我使用类似这样的东西（列出的前向代码）

```
float v[] = {mRenderer.lookX - mRenderer.eyeX,mRenderer.lookY - mRenderer.eyeY, mRenderer.lookZ - mRenderer.eyeZ};

mRenderer.eyeX += v[0] * SPEED_MOVE;
mRenderer.eyeZ += v[2] * SPEED_MOVE;

mRenderer.lookX +=  v[0] * SPEED_MOVE;
mRenderer.lookZ +=  v[2] * SPEED_MOVE; 
```

这有效

现在我想环顾四周，并尝试移植我的 iPhone openGL 1.0 代码。这是左/右

```
float v[] = {mRenderer.lookX - mRenderer.eyeX,mRenderer.lookY - mRenderer.eyeY, mRenderer.lookZ - mRenderer.eyeZ};

if (x > mPreviousX )
{
 mRenderer.lookX  +=  ((Math.cos(SPEED_TURN / 2) * v[0]) - (Math.sin(SPEED_TURN / 2) * v[2]));
 mRenderer.lookZ  +=  ((Math.sin(SPEED_TURN / 2) * v[0]) + (Math.cos(SPEED_TURN / 2) * v[2]));
}
else
{
 mRenderer.lookX  -=  (Math.cos(SPEED_TURN / 2) *v[0] - Math.sin(SPEED_TURN / 2) * v[2]);
 mRenderer.lookZ  -=  (Math.sin(SPEED_TURN / 2) *v[0] + Math.cos(SPEED_TURN / 2) * v[2]);
} 
```

这适用于 35 度，然后变得精神？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:28:02.133

首先我建议不要跟踪`look`向量而是`forward`向量，然后在`lookAt`方法中使用`eye+forward`来生成`look`向量。这样，您可以`look`在移动时完全松开更新，并且您不需要计算`v`向量（`mRenderer.eyeX += forward.x * SPEED_MOVE;`...）

为了使事情变得更简单，我建议您规范化向量`forward`以及`up`每当您更改它们时（我会像您在以下方法中所做的那样考虑）。

现在轮换有两种方式。使用`right`和`up`向量来移动`forward`(and `up`) 这非常适合小转弯（我会说大约 10 度并且上限为 90 度）或计算当前角度，添加您想要的任何角度并重新创建向量。

第一个提到的旋转方法非常简单：

```
vector forward = forward
vector up = up
vector right = cross(forward, up) //this one might be the other way around as up, forward :)
//going left or right:
forward = normalized(forward + right*rotationSpeedX)
//going up or down:
forward = normalized(forward + up*rotationSpeedY)
vector right = cross(forward, up) //this one might be the other way around
vector up = normalized(cross(forward, right)) //this one might be the other way around
//tilt left or right:
up = normalized(up + right*rotationZ) 
```

第二种方法需要一点三角：

通常要计算一个角度，你可以调用`atan(forward.z/forward.x)`并添加一些`if`语句，因为生成的结果只有 180 度角（我相信你可以在网上找到一些答案来从矢量旋转）。`up`用于获取垂直旋转的向量也是如此。然后在获得角度后，您可以轻松地为角度添加一些度数并使用 和 重新创建`sin`向量`cos`。但是有一个问题，如果你以这种方式旋转相机，那么你需要从`up`向量中获得第一个旋转，第二个来自`forward`矢量，但如果您将最大垂直角度限制在 +- 85 度之类的范围内，则可以避免所有这些（实际上有很多游戏都这样做）。第二件事是，如果您使用这种方法，您的环境必须支持 +-不定式，否则`atan(forward.z/forward.x)`如果`forward.x == 0`.

还有一些关于第一种方法的补充。由于我看到您正在尝试在 2D 空间中移动，因此与移动速度一起使用的前向矢量应该是`normalized(forward.x, 0, forward.z)`，因此对其进行标准化很重要，否则如果相机向上或向下倾斜更多，您将移动得更慢。第二件事是当您向左/向右旋转时，您可能希望将`up`向量强制为 (0,1,0) + 归一化右向量，最后从前向和向右重新创建向上向量。然后你应该再次限制垂直旋转（up.z 应该大于一些像 .01 这样的小值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:48:40.583

原来我的轮换代码是错误的

```
if (x > mPreviousX )
{
 mRenderer.lookX  = (float) (mRenderer.eyeX +  ((Math.cos(SPEED_TURN / 2) * v[0]) - (Math.sin(SPEED_TURN / 2) * v[2])));
 mRenderer.lookZ  =  (float) (mRenderer.eyeZ +  ((Math.sin(SPEED_TURN / 2) * v[0]) + (Math.cos(SPEED_TURN / 2) * v[2])));
}
else
{
 mRenderer.lookX  =  (float) (mRenderer.eyeX + ((Math.cos(-SPEED_TURN / 2) * v[0]) - (Math.sin(-SPEED_TURN / 2) * v[2])));
 mRenderer.lookZ  =  (float) (mRenderer.eyeZ + ((Math.sin(-SPEED_TURN / 2) * v[0]) + (Math.cos(-SPEED_TURN / 2) * v[2])));
} 
```

# asp.net-mvc-4 - 从 ASP.NET MVC4 中的原始 URL 确定控制器

> ID：16022826
> 
> 赞同：1
> 
> 时间：2013-04-15T19:00:04.497
> 
> 标签：asp.net-mvc-4

给定以下 URL： http: [//www.domain.com/Client](http://www.domain.com/Client)

是否可以访问控制器中的路由数据以确定绑定到哪个控制器/操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:11:17.627

从 RouteData 字典中确定控制器应该非常简单，传递您正在寻找的键。

```
namespace UI.Controllers
{
    [Authorize]
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            var controllerName = RouteData.Values["controller"];
            //controllerName == "Home" at this point
            var actionName = RouteData.Values["action"];
            //actionName == "Index" at this point         
            return View("Index");
        }

    }
} 
```

**编辑**

我在这里找到了一些有关如何执行此操作的[信息](https://stackoverflow.com/questions/8112748/asp-net-mvc-3-how-to-turn-determine-controller-action-from-url)：但是，您需要将绝对 URL 更改回相对 URL，然后才能通过提供的解决方案运行它们。

# php - 如何在 Symfony 2 中使用 AJAX jquery 附加 div？

> ID：16022827
> 
> 赞同：0
> 
> 时间：2013-04-15T19:00:10.140
> 
> 标签：php, jquery, ajax, model-view-controller, symfony

我想用 Jquery AJAX 从这个 Symfony 2 php 代码呈现的数据填充一个 div

```
<?php echo $view['actions']->render('ShowfileBundle:Event:choosePerf', array('year' => $event->getYear(), 'name' => $event->getName(), 'thisUser' => $thisUser)); ?> 
```

这应该在 div 上的单击事件之后发生，并且应该使用 php 代码中的数据填充相同的 div。我刚刚熟悉 Symfony 2，所以我不确定它应该如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:06:49.447

此服务器端代码只会将一些 HTML 内容发送回您的 AJAX 回调。

您必须使用一些 JavaScript / jQuery 将其添加到现有 DOM：

```
$.ajax({
    url: '/your/symfony2/route',
    type: 'post', // or 'get', 'update', 'delete' etc.
    data: { [...] },
    dataType: 'text'
}).done(function (response) {
    console.log(response);
    $('#your-div-on-which-you-have-cliqued').append(response.responseText);
}).fail(function (response) {
    alert('FAIL');
}); 
```

当然你必须自己选择目标:)

`$('#your-div-on-which-you-have-cliqued')`将是你 cliqued 的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:04:18.930

你可以做一个标准的 jQuery并在你的 ajax 调用中`$.ajax()`指定你的 php 文件。`url`

```
$.ajax({
    type: "POST",
    url: "/path/to/php.php",
    data: "vars=" + vars,
    success: function(result) {
        $('body').append('<div>' + result + '</div>');
    }
); 
```

# excel - 基于 1 列合并 2 张工作表

> ID：16022838
> 
> 赞同：0
> 
> 时间：2013-04-15T19:00:46.230
> 
> 标签：excel

我有两张在一个 Excel 文件中的工作表。

1.  Sheet1 有带数量的样式编号
2.  Sheet2 具有不同数量的样式编号。

大多数样式编号在两张表中都匹配（并且它们都是按 alpha 排序的），但是有些样式存在于一张表中，而另一张表中不存在，反之亦然。

根据样式号自动合并 2 张工作表的最佳方法是什么，然后添加工作表 1 中未在工作表 2 中找到的行？

是带一个`vlookup`吗？我知道我可以使用`vlookup`，但是不会复制两张表中不匹配的列，我也不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:03:24.910

您可以使用 2`VLOOKUP`秒，一个从 获取数据`sheet2`，一个`sheet2`用于识别其中未找到的数字`sheet1`（通过在所有返回的单元格上放置一个过滤器`#N/A`）。

# java - mongodb java驱动程序将大结果集转换为json

> ID：16022840
> 
> 赞同：3
> 
> 时间：2013-04-15T19:00:52.970
> 
> 标签：java, mongodb

我正在查询 mongodb 中的约 1.2 亿条记录。查询通过 mongo shell 和使用 Java 驱动程序快速执行，但是当我尝试通过 Java 驱动程序将结果转换为 json 对象时，它非常慢（查询需要 < 100 毫秒，但转换为 json 需要 > 30 秒） . 结果集有大约 5k 个项目。我正在使用`JSON.serialize(cursor)`.

虽然我希望转换为 json 字符串需要一些时间，但如果我从 shell 运行查询但执行

```
var cursor = //execute query
var arr = cursor.toArray();
arr 
```

它打印得非常快。

mongo 服务器统计在序列化过程中报告了越来越多的页面错误，但我已将我的 RAM 增加到比整个集合和索引大得多。

关于这里可能发生的事情以及如何提高转换为 json 的速度的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:13:20.007

当您获得游标时查询没有执行，即使有，您也只会得到一小部分结果。

一般来说，我建议不要使用`toArray()`或序列化到内存中的字符串将所有结果加载到内存中。50K 文档只会占用大量客户端内存，并且在分配该内存时也不会非常有效。

如果您坚持使用 10gen Java 驱动程序，那么您将需要等待[JAVA-709](https://jira.mongodb.org/browse/JAVA-709)得到解决以获得流式写入功能。[异步 Java 驱动程序](http://www.allanbank.com/mongodb-async-driver/index.html)支持写入流的能力。

如果您可以使用外部程序，您可能需要查看[mongoexport](http://docs.mongodb.org/manual/reference/mongoexport/)。它可以将 JSON 写入文件或标准输出，并且应该接近最佳性能。

查询第一次运行时出现页面错误是正常的。第二次，如果服务器有足够的内存将整个数据集保存在内存中，你应该会看到很少的页面错误。如果您在与服务器相同的机器上运行客户端，它可能会将数据推出内存以在客户端中为 JSON blob 分配所需的内存。

HTH - 罗伯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:04:19.350

事实证明，从 mongo shell 需要的时间也一样长。当我从 shell 进行测试时，结果肯定已经被缓存了，所以我认为我从 shell 中看到了更好的结果，但在我的情况下并非如此。

# android - MeasureSpec.UNSPECIFIED 和 MeasureSpec.AT_MOST 何时应用？

> ID：16022841
> 
> 赞同：37
> 
> 时间：2013-04-15T19:00:59.770
> 
> 标签：android

我对`MeasureSpec.UNSPECIFIED`和有点困惑`MeasureSpec.AT_MOST`。我知道在测量视图时将应用`match_parent`或 恒定尺寸值设置为`layout_width`或。`layout_height``MeasureSpec.EXACTLY`

那么，`MeasureSpec.UNSPECIFIED`和`MeasureSpec.AT_MOST`呢？

我的理解是，当`layout_width`或`layout_height`设置为时`wrap_content`，`MeasureSpec.UNSPECIFIED`将应用，因为`wrap_content`意味着视图的高度或宽度可以是任何大小，具体取决于内容。但很多文章都说是这个`wrap_content`意思`MeasureSpec.AT_MOST`。所以我很困惑。不知道什么时候`MeasureSpec.AT_MOST`申请。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-15T19:09:54.663

View 大小的基本定义如下：

`MeasureSpec.EXACTLY`- 一个视图应该正好有这么多像素，不管它实际上想要多大。

`MeasureSpec.AT_MOST`- 如果视图尺寸更小，则视图可以是这个尺寸或更小。

`MeasureSpec.UNSPECIFIED`- 一个视图可以是它需要的任何大小，以便显示它需要显示的内容。

`MeasureSpec.AT_MOST``WRAP_CONTENT` **如果父视图绑定了 size**，则将应用于已设置为的视图。例如，您的父视图可能绑定到屏幕大小。它的孩子也会被绑定到这个大小，但它可能不会那么大。因此，父视图会将 MeasureSpec 设置为`AT_MOST`，它告诉子视图它可以在 0 和屏幕大小之间的任何位置。孩子必须进行调整以确保它符合所提供的范围。

在特殊情况下，界限无关紧要。例如，一个`ScrollView`. 在 a 的情况下`ScrollView`，子 View 的高度无关紧要。因此，它将`UNSPECIFIED`为孩子们提供一个 Views ，告诉孩子们他们可以达到他们需要的高度。`ScrollView`将为他们处理绘图和放置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-11T18:27:25.533

要获得完整的见解，请先查看[文章](https://programming.vip/docs/the-process-of-customizing-view.html)。夏天是——

1.  当视图的宽度或高度为特定数字时，例如`100px`或`100dp`，视图的规格模式`EXACTLY`与父容器的测量模式无关，视图的大小为特定数字。

2.  当视图的宽度或高度采用`MATCH_PARENT`时，视图的规格模式与父容器的测量模式一致。但是 specSize 的值是不同的。当父容器`UNSPECIFIED`的 SpecSize 为 时，视图的 specSize 为 0。当父容器的 SpecSize 为`EXACTLY`或`AT_MOST`时，视图的 specSize 的大小为父容器的剩余空间。

3.  当视图的宽度或高度为 时`WRAP_CONTENT`，如果父容器的 SpecMode 为`EXACTLY`或`AT_MOST`，则视图的测量模式为`AT_MOST`。当父容器的 specMode 为 时`UNSPECIFIED`，视图的测量模式为`UNSPECIFIED`。view 的测量尺寸也受父容器的测量模式影响，特别是当父容器的 specMode 为 时`UNSPECIFIED`。当 SpecMode 为`EXACTLY`或`AT_MOST`时，视图的 specSize 最大尺寸不能超过父容器的剩余空间。当父容器的specMode为 时`UNSPECIFIED`，视图的大小为0。根据getChildMeasureSpec方法的逻辑，我们可以总结出视图与父容器的测量模式，以及视图自身的layoutParams之间的关系如下：

[![在此处输入图像描述](https://i.stack.imgur.com/sVS2J.png)](https://i.stack.imgur.com/sVS2J.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T04:12:33.417

MeasureSpec 封装了从父级传递到子级的布局要求。每个 MeasureSpec 代表对宽度或高度的要求。MeasureSpec 由大小和模式组成。有三种可能的模式：

***未指定***

```
The parent has not imposed any constraint on the child. It can be whatever size it wants. 
```

***确切地***

```
The parent has determined an exact size for the child. The child is going to be given those bounds regardless of how big it wants to be. 
```

***最多***

```
The child can be as large as it wants up to the specified size. 
```

MeasureSpecs 以整数形式实现以减少对象分配。提供此类以将元组打包和解包到 int

# iphone - 查找我的朋友 - “通知我”功能。

> ID：16022842
> 
> 赞同：0
> 
> 时间：2013-04-15T19:01:06.263
> 
> 标签：iphone, cllocationmanager, localnotification

在“通知我”功能中。我注意到 user1 和/或 user2 不需要启动这个应用程序来接收地理围栏通知。当两个用户都关闭应用程序时，通知仍然会被推送。我知道它正在使用 CLLocationManager 来处理位置和本地通知以进行推送。我试图在我的一个概念验证应用程序中复制这一点，但只有当我的应用程序在后台运行时才会收到我的通知。如果我的应用程序完全被杀死，将不会发送通知。“寻找我的朋友”是如何实现这一目标的？

谢谢你的帮助。

# c# - 测试计算复杂度

> ID：16022851
> 
> 赞同：0
> 
> 时间：2013-04-15T19:01:43.063
> 
> 标签：c#, visual-studio-2012, mstest, time-complexity

假设我有一些代码，并且计算复杂度遵守一些（代数）上限对我来说很重要。

例如，我可能有一个算法，当正确实现时在 n^2 中运行，但如果引入了错误，则在 n^3 中运行。测试将检查该方法是否实际上在 n^2 中运行，如果不是，则失败。

我的问题是，是否可以使用 MSTest 来完成此任务？

我可以看到，在引入了一堆数学代码之后，原则上可以将给定的方程拟合到经验测量和/或尝试找到极限。

或者，我想可能会生成图表以及最佳拟合，然后要求人类输入测试是否通过。

但这些真的是现实的吗？有没有做过类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:36:26.820

出于实际目的，可能无法进行此类测试。如果您尝试仅使用数学分析来比较两种算法，那么结果可能对实际目的没有用处。例如，您可能并不总是喜欢**O(n ² )**而不是**O(n ³ )**算法。您必须考虑隐藏常数。例如，从数学角度来看，具有 O(1000000 n ² ) 的算法仍然是 O(n ^(2 )。)但是这样的算法不会比 O(10 n ³ ) 算法好，后者在 n的值大于 100000 之前在 数学上是 O(n ^(3 )。但很多时候我们可能会处理远小于这个限制的输入大小。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:03:14.927

首先，您需要能够检测您的代码，以便您可以测量执行的操作数量。例如，如果您正在测试排序算法，您可以在每次调用比较函数时增加一个计数器。对于其他情况，这可能并不容易，例如所讨论的操作是整数乘法。

然后是“O(n^2)”描述的问题。一些算法具有不同的最佳、最差和平均情况复杂度。如果这适用于您，您将需要知道导致每种情况的输入并单独测试它们。

如果您要测试的是运行时间是 O(n^2) ，则很难验证。如您所知，big-O 谈论渐近复杂性，因此您需要运行非常长的测试，并且我想进行一些曲线拟合以查看它是否可以很好地被某些 ax^2 近似。如果您可以严格限制实际复杂性，似乎会更好，例如如果您知道当 x > 100 时操作数应始终低于 4x^2。然后您选择一些数据点，包括一些相当大的数据点那些，并检查它们是否低于估计值。当然，这意味着您可能必须更新测试以更改系数，同时保持 big-O 复杂度不变，但老实说，这听起来是件好事。

# openscenegraph - OpenSG 和 OpenSceneGraph 的区别

> ID：16022853
> 
> 赞同：3
> 
> 时间：2013-04-15T19:01:48.923
> 
> 标签：openscenegraph, opensg

首先，我阅读了[OpenSG](http://www.opensg.org/projects/opensg)和[OpenSceneGraph](http://www.openscenegraph.com/index.php/support/faq#IhavenoideawhatOpenSceneGraphiscanyougivemeashortdescription)的官方比较。我目前的目标是创建一个用于学习目的的小型游戏引擎。我从纯 OpenGL 开始，但后来我发现那些看起来相当不错的场景图形库。

我想知道这两个场景图之间的区别。他们的比较非常模糊。例如，OSG 表示 OpenSG 在多线程方面可能更好。

OpenSG 声明并引用

> OpenScenegraph 一开始就非常倾向于表演者方面……OpenSG 更倾向于华氏方面……如今，为了您的利益，您应该使用像 OpenSG 这样的开源系统。

我想知道 OpenSG 和 OpenSceneGraph 之间的区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:31:38.193

对于那些不熟悉 SceneGraph 知识的人来说，这很难定义。

OpenSG 有一些 OpenSceneGraph 所缺乏的更聪明的多线程特性。然而，OpenSceneGraph 似乎用更大、更活跃的社区以及更广泛的衍生工具和附加工具来弥补它。

近十年前，我自己选择了 OpenSceneGraph，并没有后悔这个决定。

您还可以考虑使用更高级的游戏工具，例如 OGRE，它可能比 OpenSG 或 OSG 更符合您的需求。

# ios - 在数组中添加对象的新方法

> ID：16022857
> 
> 赞同：-3
> 
> 时间：2013-04-15T19:01:59.230
> 
> 标签：ios, objective-c

如何使用新的 Objective-C 语法在数组中添加新对象。

我知道是这样`addObject:`，`addObjectAtIndex:`但我被要求以新的方式来做。

什么是新方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:03:14.170

```
NSMutableArray *mArray = [NSMutableArray new];
mArray[mArray.count] = @"newvalue"; // this can be any object 
```

以上等价于`addObject:`。

[这是您必须阅读的](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

# matlab - 如何在 matlab 中实现这个 Integrate[x^n E^(x - 1), {x, 0, 1}]

> ID：16022858
> 
> 赞同：-4
> 
> 时间：2013-04-15T19:02:02.497
> 
> 标签：matlab, math, helpers, matlab-guide, integral

嗨，我已经搜索并阅读过，但我无法在 matlab 中解决这个问题。请帮我解决这个问题积分_0^1 x^ne^(x-1) dx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:24:57.667

通常，您可以使用不同的方法来计算所需的积分：

1）**符号工具箱**->我会选择这个，因为考虑到`n`

```
syms x n;

f = x.^n.*exp( x - 1 );

int(f,0,1) 
```

2) `quad`、`integral`功能

```
g = @(n) (integral(@(x) x.^n.*exp(x-1),0,1));
g = @(n) (quad(@(x) x.^n.*exp(x-1),0,1)); 
```

然后您可以根据 评估结果`n`。

3)`trapz`功能

```
x = 0:.001:1;
y = x.^n.*exp( x - 1 );
trapz(x,y) 
```

但是，在这种特定情况下，积分的计算是由指数驱动的`n`。

由于我假设并假设您知道 'x.^n' 的积分如何表现不同的`n`，因此我将跳过讨论。

# .htaccess - 基于 IP 阻止对重定向子域的访问

> ID：16022862
> 
> 赞同：0
> 
> 时间：2013-04-15T19:02:17.743
> 
> 标签：.htaccess, subdomain

我有一个子域 ( `mail.mywebsite.com`)，它指向我为 Google 应用程序设置的登录页面（根据[他们的说明](http://support.google.com/a/bin/answer.py?hl=en&answer=53340)）。我目前正在使用 CNAME 记录将用户指向该页面。

但是，我想基于 IP 限制对这个子域的访问（有效地创建一个白名单）。

不确定是否可以在我的服务器上修改 .htaccess，因为在注册商中将域配置为转发到 Google，而不是我服务器上的内容。

关于我如何做到这一点的任何建议？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:47:05.187

如果您使用 DNS CNAME 完成此操作，则您无法控制谁可以访问`mail.mywebsite.com`，因为接受请求的甚至不是您的服务器（它是 Google 的服务器）。

除非有某种方法可以在 Google 上设置访问限制，否则您将无能为力。

或者，您可以将 CNAME 更改为指向您的服务器，然后使用反向代理将请求代理到 Google。然后，您可以使用访问控制来设置将代理哪些 IP，而其余的所有 IP 都将获得 403'ed。虽然无法`ProxyPass`在 htaccess 文件中设置，需要在 server/vhost 配置中进行设置，但您*可以*使用`P`mod_rewrite 中的标志为您反向代理。

# android - 为android开关小部件设置高度

> ID：16022865
> 
> 赞同：3
> 
> 时间：2013-04-15T19:02:25.750
> 
> 标签：android, switch-statement

我正在运行 4.0 及更高版本，并在我的 xml 布局中嵌入了一个 android“开关”。我想控制这个小部件的大小。设置布局高度什么也没做......有什么想法吗？

```
 <Switch
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:paddingTop="10dp"
    android:switchPadding="10dp"
    android:textOff="Slide to Unlock"
    android:switchTextAppearance="@style/test1"
    android:thumb="@drawable/unlock_selector"
    android:track="@drawable/unlock_background_selector" /> 
```

# python - 用python编写一个简单的数组程序

> ID：16022875
> 
> 赞同：0
> 
> 时间：2013-04-15T19:03:23.850
> 
> 标签：python

我有一个简单的问题，声明如下：

斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个项将是：1、2、3、5、8、13、21、34、55、89，... 我想创建如上的数字：

我正在尝试编写的代码如下：

```
num(1)=1
num(2)=2
for i in range(3,10):
    num(i)=num(i-1)+num(i-2)
    print num(i) 
```

我设计的算法如下：

```
x(i)=x(i-1)+x(i-2) 
```

我将从未知`x(3)`开始。谁能帮我解决数组语法错误？谢谢。`x(1)``x(2)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:06:55.893

你可以做：

```
num = range(1, 10)
num[0] = 1
num[1] = 2
for i in range(2,9):
    num[i]=num[i-1]+num[i-2]
    print num[i] 
```

您需要使用`[]`而不是`()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:06:30.373

[Python 用于`[]`](http://effbot.org/zone/python-list.htm)处理索引~~大批~~列表，所以只需使用`num[i]`而不是`num(i)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:07:51.800

列表的语法是使用方括号（“[”和“]”，如“num[3]”），而不是括号。然后你必须记住，在编程列表中的索引从 0 开始，而不是 1。然后当你完成之后，你必须首先创建一个列表：num = []。

# c++ - Boost.Spirit.Qi - 规则开头的错误

> ID：16022882
> 
> 赞同：4
> 
> 时间：2013-04-15T19:03:52.503
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我如何在规则开始时检测到错误？例如，考虑文档中包含的[Mini XML 示例](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/tutorials/mini_xml___error_handling.html)。如果我向解析器提供如下内容：

```
<element>this is an error<element> 
```

然后我得到：

> 错误！在这里期待：“”
> 
> 错误！在这里期待：“”
> 
> 解析失败。

没关系，但然后考虑喂它：

```
element>this is an error</element> 
```

而且我得到了非常通用且不太有用的内容：

> 解析失败。

如何修改规则以提供信息丰富的方式报告错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T22:34:43.917

您希望在文档根级别*需要一个元素。*

其他消息是由失败的*期望点*生成的。一开始你会想要一个额外的*期望点*。我会这样做：

1.  将旧`xml`规则重命名为`element`
2.  创建一个新`xml`规则，其元素位于期望点：

    ```
     xml = qi::eps > element; 
    ```

3.  [不要改变任何东西]

4.  ***利润！***

输出变为：

```
Error! Expecting <element> here: "element>this is a test</element>
"
-------------------------
Parsing failed
------------------------- 
```

[在这里](http://coliru.stacked-crooked.com/view?id=c491e0bbf934c0afc53297a77ac274c9-0290fe5c6d0997ceafc0a57b47e242ca)看到它

# ruby-on-rails - 茉莉花与淘汰赛

> ID：16022888
> 
> 赞同：0
> 
> 时间：2013-04-15T19:04:08.097
> 
> 标签：ruby-on-rails, knockout.js, coffeescript, jasmine

我可以使用 Jasminerice ( [https://github.com/bradphelan/jasminerice](https://github.com/bradphelan/jasminerice) ) 来测试一个类，例如：

```
class @Survey
  constructor: (id) ->
    @id = id 
```

通过测试：

```
#= require survey
describe "Survey", ->
  it "has id of one", ->
    v = new Survey(1)
    expect(v.id).toEqual(1) 
```

它就是这样工作的，但是我不能在没有为“ko”定义未定义的情况下添加“ko”变量。我尝试添加`#= require knockout`，但它说找不到文件（我从 CDN 加载淘汰赛）。

如何为淘汰赛添加脚本源标签，以便 jasminerice 可以加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:56:37.943

解决方案是添加`knockout-rails`gem，但不要在`application.js`. 这样，您仍然可以使用来自 cdn 的淘汰 js 文件并能够将其添加`#= require knockout`到文件中`spec.js.coffee`

# c# - SqlAdapter Update() 只插入值。

> ID：16022891
> 
> 赞同：2
> 
> 时间：2013-04-15T19:04:16.393
> 
> 标签：c#, sql-server

我有一个名为 Inventory 的表，我想删除它的第一行。为此，我创建了一个名为 InventoryDAL 的类。这是代码：

```
public class InventoryDAL
{
    private string cnString = string.Empty;
    private SqlDataAdapter da = null;

    public InventoryDAL(string connectionString)
    {
        cnString = connectionString;
        da = new SqlDataAdapter("Select CarID, Make, Color, PetName From Inventory",
            connectionString);
        SqlCommandBuilder builder = new SqlCommandBuilder(da);
        da.DeleteCommand = builder.GetDeleteCommand();
        da.InsertCommand = builder.GetInsertCommand();
        da.UpdateCommand = builder.GetUpdateCommand();
    }

    public DataTable Inventory()
    {
        DataTable dt = new DataTable();
        da.Fill(dt);
        return dt;
    }

    public void UpdateInventory(DataTable modifiedTable)
    {
        da.Update(modifiedTable);
    }
} 
```

我还创建了一个小程序来尝试它：

```
class Program
{
    static void Main(string[] args)
    {
        InventoryDAL inv = new InventoryDAL(@"Data Source=MYPC;Initial Catalog=AutoLot;Integrated Security=True;Pooling=False");
        DataTable dt = inv.Inventory();
        dt.Rows.RemoveAt(0);
        inv.UpdateInventory(dt);
        Console.ReadKey(true);
    }} 
```

但它不起作用。经过一些尝试，我意识到`.Update()`只有在插入数据时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:38:23.233

使用 DataTable.RemoveAt() 从 DataTable 对象中完全删除行，因此 SqlDataAdapter 不知道要在数据源中删除它。您必须使用 DataTable.Rows[x].Delete() 方法。这会将行标记为删除，以便适配器知道在其上调用 SQL 删除语句。

所以你的代码应该变成：

```
class Program
{
    static void Main(string[] args)
    {
        InventoryDAL inv = new InventoryDAL(@"Data Source=MYPC;Initial Catalog=AutoLot;Integrated Security=True;Pooling=False");
        DataTable dt = inv.Inventory();
        dt.Rows[0].Delete();
        inv.UpdateInventory(dt);
        Console.ReadKey(true);
    }
} 
```

有关如何将更改推送回数据源的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/33y2221y.aspx)

# asp.net-web-api - WebApi，使用控制器命名约定附加类

> ID：16022892
> 
> 赞同：0
> 
> 时间：2013-04-15T19:04:17.037
> 
> 标签：asp.net-web-api, webforms

使用 web 表单，为了正确调用 webAPI 控制器，控制器必须附加`Controller`. 有没有办法可以打破这个约定并用我想要的任何东西附加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:45:27.887

Filip 有一篇很酷的博客文章演示了如何做到这一点：

[http://www.strathweb.com/2013/02/but-i-dont-want-to-call-web-api-controllers-controller/](http://www.strathweb.com/2013/02/but-i-dont-want-to-call-web-api-controllers-controller/)

# android - Android Google Maps API v2 的内存泄漏

> ID：16022897
> 
> 赞同：1
> 
> 时间：2013-04-15T19:04:44.850
> 
> 标签：android, google-maps, memory-leaks

我正在努力解决 Google Maps Android API v2 的内存泄漏问题。每次我的视图再次可见时，堆使用量增加约 85KB：

*   电话屏幕关闭（例如按下电源按钮后）。
*   用户按 Home 按钮退出应用程序。

**该应用程序最终会因OutOfMemory 异常**而崩溃。屏幕旋转或通过“返回”按钮退出时不会发生泄漏。有关解决方法或此问题背后原因的任何想法？

**我的代码：**

```
public class LeakActivity extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_leak);
    }
} 
```

和**XML：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myLayout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<fragment
    android:id="@+id/map_1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T10:17:38.923

这可能与 Maps API 中的这个未解决问题有关：

[问题 4766 - 错误：Android Maps API v2 泄漏大量内存](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766)

使用 DDMS 的“转储 HPROF”工具转储 hprof 文件，将其转换`hprof-conv`并使用[MAT](http://www.eclipse.org/mat/)检查泄漏。如果它在 Google Maps API 中，请将 apk（或更好的简单测试代码）发布到打开的问题并包含 hprof 文件。

如果这是我遇到的同一个错误，它可能只发生在 Android 2.x 上，请也检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T07:21:14.647

在初始化地图之前，我尝试使用 System.gc() 和 map.clear() 。

```
 @Override
public void onActivityCreated (Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);

    if (GooglePlayServicesUtil.isGooglePlayServicesAvailable(getActivity()) == ConnectionResult.SUCCESS) {
        System.gc();
getMap().clear();
setupmap();

    }
}
 @Override
public void onLowMemory() {
  super.onLowMemory();
System.gc();
} 
```

# verilog - 在 Verilog 中，#(...) 磅的意思总是后面跟着什么？

> ID：16022898
> 
> 赞同：8
> 
> 时间：2013-04-15T19:04:45.943
> 
> 标签：verilog

在一个简单的时钟发生器示例中，我看到以下代码：

```
always #(cycle/2) clk ~= clk; 
```

我以前总是看到@(*)，但没有看到英镑 (#)。我试图在文档中找到它，但我能找到的只是一些对“实值端口”的引用，没有进一步说明。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T19:09:23.710

这是一个延迟操作。它基本上只是读取

```
always begin
   #(cycle/2) //wait for cycle/2 time
   clk ~= clk;
end 
```

您有时可能会看到它与原始值一起使用，例如 #5 或 #10，这意味着等待时间刻度的 5 或 10 个单位。

# apache - 为域名重写 URL

> ID：16022899
> 
> 赞同：-2
> 
> 时间：2013-04-15T19:04:53.320
> 
> 标签：apache, .htaccess, url-rewriting, rewrite

我需要它，所以当我去的时候`mydomainname.com/page/week1`它会显示`mydomainname.com/page.php?month=week1`。我的代码会这样做吗？

```
rewriteengine on
rewritecond %{HTTP_HOST} ^www.mydomianname.com$ [OR]
rewritecond %{HTTP_HOST} ^mydomianname.com$
rewriterule ^mydomianname\.com/page/?([-A-Za-z0-9]+)/?$ "http\:\/\/mydomianname\.com\/page\.php?month=$1" [L] 
```

当我去`mydomainame.com/page/week1`我得到

> 在此服务器上找不到请求的 URL /page/week1。

我当前的 http 访问

```
rewriteengine on
rewritecond %{HTTP_HOST} ^www.fetustobaby.com$ [OR]
rewritecond %{HTTP_HOST} ^fetustobaby.com$
rewriterule ^fetustobaby\.com\/page\/([-A-Za-z0-9]*)\/?$ page.php?month=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:12:30.960

您的代码存在一些问题，例如 RewriteRule 仅匹配 URL，而主机名匹配不是 RewriteRule 的一部分。这是您可以在 .htaccess 中使用的固定代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?mydomianname\.com$ [NC]
RewriteRule ^page/([^/]+)/?$ /page.php?month=$1 [L,NC,QSA] 
```

# ios - 从 UITableView 的分组部分添加/删除单元格

> ID：16022900
> 
> 赞同：0
> 
> 时间：2013-04-15T19:04:55.960
> 
> 标签：ios, uitableview

我正在尝试在运行时动态地将单元格添加/删除到我的分组表中。这是我制作的第一个应用程序，虽然我尝试了许多其他人的建议，但我仍然无法让它发挥作用。这是我正在使用的代码：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    UILabel *lblName = (UILabel *)[cell viewWithTag:100];
    [lblName setText:[intervalArray objectAtIndex:[indexPath row]]];
    return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:11:57.130

`array`您将需要更新`NSMutableArray`用作`UITableView`. 那么你也能

```
[self.myTableView reloadData]; 
```

重新加载`tableview`

这是处理更新 TableView 行的一个很好的指南：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)

# c# - 使用 C# 中的 XmlDocument 类读取结束标记

> ID：16022905
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:05:09.247
> 
> 标签：c#, xml, xml-parsing

有没有一种方法可以读取结束标签，例如使用 XMLDocument 类。由于某些限制，我无法使用 XmlREader 或 XmlTextReader。在 MSDN 中提到我只能将 XmlNodeType.EndElement 与 XMLReader [MSDN 链接](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodetype%28v=vs.95%29.aspx)一起使用。我的代码是这样的：

```
 XmlDocument doc = functionWhichReturnsXmlDoc();
 XmlNodeList nodes =textDoc.ChildNodes;
 foreach (XmlNode node in nodes)
{
 switch (node.NodeType)
   {
     case XmlNodeType.Element:
     XmlNodeList nodes =textDoc.ChildNodes;
           switch (node.NodeType)
            {
                case XmlNodeType.Element:
                    //do something
                case XmlNodeType.Text:
                    //do something
                case XmlNodeType.EndElement:
                // THIS EVER EXECUTES   
            }
         }
} 
```

我的 XML 文件”

```
<Text >
<environment>
    <Tempratue>
        <element id="COLD">Cold</element>
        <element id="MILd">Mild</element>
        <element id="HOT">Hot</element>
    </Tempratue>
        <element id = "Windy">true</element>
</environment>
<dish>
<element id = "dish1">1111</element>
<element id = "dish2">2222</element>
</dish>

</Text> 
```

我试图将输出作为字符串列表：-

```
/Text/Environment/Temprature/COLD
/Text/Environment/Temprature/MILD
/Text/Environment/Temprature/HOT
/Text/Environment/Windy
/Text/dish/dish1
/Text/dish/dish2 
```

提前致谢。

--AAT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:01:04.450

我不确定你是如何设想你的算法工作的，但我很确定你的做法是错误的。这是您可以提供您所描述的路径列表的一种方式：

```
internal static List<string> BuildPaths(XmlDocument doc)
{
    List<string> paths = new List<string>();

    BuildPaths(doc.DocumentElement, paths);

    return paths;
}

private static void BuildPaths(XmlNode node, List<string> paths, string prefix = "/")
{
    if (node.Name == "element")
    {
        // end case - elements named "element"
        paths.Add(prefix + node.Attributes["id"].Value);
    }
    else
    {
        // iterate through child nodes that are either not named element or that 
        // have an attribute named "id" (i.e. skip elements named "element" that 
        // lack an id attribute)
        foreach (XmlNode child in node.SelectNodes("*[not(self::element) or @id]"))
        {
            BuildPaths(child, paths, prefix + node.Name + "/");
        }
    }
} 
```

在示例 XML 上运行时，结果是以下字符串的列表：

```
/Text/environment/Tempratue/COLD
/Text/environment/Tempratue/MILd
/Text/environment/Tempratue/HOT
/Text/environment/Windy
/Text/dish/dish1
/Text/dish/dish2 
```

这是一种我更喜欢的方法，因为它遵循函数式编程原则。`BuildPaths()`在这种情况下，不需要上面的第一种方法；您可以将`XmlDocument`直接传递到此方法中：

```
private static List<string> BuildPaths(XmlNode node, string prefix = "/")
{
    // Get child node if current node is the root
    if (node.NodeType == XmlNodeType.Document) { node = node.FirstChild; }

    if (node.Name == "element")
    {
        return new List<string> { prefix + node.Attributes["id"].Value };
    }
    else
    {
        return node.SelectNodes("*[not(self::element) or @id]")
                   .OfType<XmlNode>()
                   .Select(n => BuildPaths(n, prefix + node.Name + "/"))
                   .SelectMany(l => l)
                   .ToList();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:54:52.927

与其尝试检测 EndElement 节点，不如简单地反向工作。以您知道自己在哪里的方式存储您的路径信息，然后您可以按从外到内的顺序打印出路径。

我会用 a`List<string>`或 a来做到这一点`StringBuilder`， List 会更容易操作。只需在输入新子节点组时存储您希望打印的字符串，并根据需要添加节点名称或属性值，然后编写一个正确解释列表的打印输出函数。

# android-intent - Appcelerator 在我的应用程序中打开/读取电子邮件附件 - Android

> ID：16022907
> 
> 赞同：0
> 
> 时间：2013-04-15T19:05:12.697
> 
> 标签：android-intent, appcelerator, titanium-mobile, intentfilter

我正在尝试将电子邮件附件中的自定义文件类型打开到我的应用程序中。单击自定义文件时，我正在使用意图过滤器打开我的应用程序。这是我的意图过滤器。

```
<intent-filter>
            <data android:scheme="content" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:mimeType="application/*" />
            <data android:pathPattern=".*\\.asd" />
        </intent-filter> 
```

但现在我需要阅读附件。我没有找到任何文档。有谁能够帮我。

注意：对于 Iphone，我使用**了 Ti.App.getArguments()**，它返回电子邮件附件的文件系统目录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:30:56.930

您需要提供[`BroadcastReceiver`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Android.BroadcastReceiver)在您的应用程序中处理此问题的意图。

```
var bc = Ti.Android.createBroadcastReceiver({
    onReceived: function() {
        Ti.API.info('Handling broadcast.');
    }
});

Ti.Android.registerBroadcastReceiver(bc, [Ti.Android.ACTION_VIEW]); 
```

# php - 我如何为每个新页面创建一个 url 和页面

> ID：16022908
> 
> 赞同：-5
> 
> 时间：2013-04-15T19:05:15.720
> 
> 标签：php, mysql, database

我目前正在从头开始创建一个论坛应用程序，但我被卡住了。我想知道论坛和博客软件如何在不生成物理文件的情况下为每个新帖子创建一个页面。我搜索了所有文件夹，但找不到一个文件。这意味着它与数据库有关。我也希望它被搜索引擎看到。怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:06:16.443

您正在寻找的是[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。这将做你正在寻找的。

另一个很好的资源是[这个网站](http://www.sitepoint.com/apache-mod_rewrite-examples/)，上面有一些例子。

# python - 如何在运行pytest测试时随意执行ipdb.set_trace()

> ID：16022915
> 
> 赞同：112
> 
> 时间：2013-04-15T19:05:34.587
> 
> 标签：python, pytest

我正在为我的测试套件使用 pytest。在复杂的组件间测试中捕获错误时，我想将其放置`import ipdb; ipdb.set_trace()`在我的代码中间以允许我对其进行调试。

但是，由于 pytest 捕获 sys.stdin/sys.stdout ipdb 失败。如何在使用 pytest 进行测试时使用 ipdb。

我对在失败后跳转到 pdb 或 ipdb 不感兴趣，而是在代码中的任何地方放置中断并能够在失败发生之前在那里对其进行调试。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-05-06T21:29:06.177

引发错误是因为 pytest 默认捕获输出。

您可以使用选项运行 pytest `-s`（关闭捕获输出）。例如：

```
py.test -s my_test.py 
```

然后在`my_test.py`：

```
import ipdb;
ipdb.set_trace() 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-04-12T16:12:07.280

不幸的是，pytest-ipdb 不再受支持。

解决方案是运行 `pytest my_test.py --pdb --pdbcls=IPython.terminal.debugger:Pdb`

从帮助命令：

```
pytest -h
  --pdb                 start the interactive Python debugger on errors.
  --pdbcls=modulename:classname
                        start a custom interactive Python debugger on errors.
                        For example:
                        --pdbcls=IPython.terminal.debugger:TerminalPdb 
```

不同之处在于 TerminalPdb 似乎会抛出错误，但 Pdb 不会（[Ipython docs](https://ipython.readthedocs.io/en/latest/api/generated/IPython.core.debugger.html#IPython.core.debugger.Pdb)）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-27T12:00:31.763

截至**2019**年 11 月，这是应该解决的问题：

```
pip install ipdb gnureadline ptpython

export PYTEST_ADDOPTS='--pdb --pdbcls=IPython.terminal.debugger:Pdb' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-15T19:40:36.090

这就是我使用的

`py.test tests/ --pdbcls=IPython.core.debugger:Pdb -s`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-24T19:40:09.647

你可能想`pdbpp`试一试。与`ipdb`使用`pytest`. 在这里查看我的答案：[https](https://stackoverflow.com/a/69320311/2896799) ://stackoverflow.com/a/69320311/2896799 。

# android - NullPointerException 具有从类继承的函数

> ID：16022916
> 
> 赞同：0
> 
> 时间：2013-04-15T19:05:41.760
> 
> 标签：android, nullpointerexception

我试图从一个类继承一个函数，但它返回`NullPointerException`. 有人可以帮忙吗？

这是我尝试继承的功能`Main.java`。该功能在`Main.java`.

```
public void readData() {
    String readString = "";

    try {
        FileInputStream fIn = openFileInput("user.txt");
        InputStreamReader isr = new InputStreamReader(fIn);
        BufferedReader buffreader = new BufferedReader(isr);

        readString = buffreader.readLine();
        isr.close();

    } catch (IOException ioe) {
        ioe.printStackTrace();
    }

    telephonyManager.listen(myPhoneStateListener,
                            PhoneStateListener.LISTEN_CALL_STATE);
} 
```

这是我另一堂课的编码：

```
Main main =new Main();
main.readData(); 
```

错误日志：

```
04-16 02:58:23.812: E/AndroidRuntime(8125): java.lang.NullPointerException
04-16 02:58:23.812: E/AndroidRuntime(8125):   at android.content.ContextWrapper.openFileInput(ContextWrapper.java:167)
04-16 02:58:23.812: E/AndroidRuntime(8125):   at com.test.Main.readData(Main.java:176) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:15:30.787

问题是`openFileInput()`需要一个`Context`. 您需要在您的类中创建一个构造函数，该构造函数`context`将`param`.

```
public void ClassWithFunction
{
   Context mContext;
    public ClassWithFunction (Context context)
    {
         mContext = context
    }
} 
```

然后通过你的`Context`

```
Main main =new Main(this);
main.readData(); 
```

然后在调用此函数时使用它

```
FileInputStream fIn = mContext.openFileInput("user.txt");  //mContext is context sent from Activity 
```

**注意**`Context`如果您在此类中有任何其他需要它的方法， 您将需要使用它

[这是我关于同一件事的答案](https://stackoverflow.com/questions/16006486/try-catch-not-working-inside-a-custom-class-npe/16006611#16006611)

# xstream - NumberFormatException xstream

> ID：16022920
> 
> 赞同：0
> 
> 时间：2013-04-15T19:05:45.603
> 
> 标签：xstream

我有一个来自 xstream 的非常奇怪的行为。我的测试代码是：

```
import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.HierarchicalStreamReader;
import com.thoughtworks.xstream.io.xml.DomDriver;

public class ConvertStringToNumber{

  public static void  main(String[] args) {

    XStream xstream = new XStream(new DomDriver());
    xstream.alias("person", Person.class);

    Person c = (Person) xstream.fromXML("<person><code>01008</code></person>");
    System.out.println(c);
  }
}

class Person {
  private int code;
  public void setCode(int code){
  this.code=code;
  }
  public int getCode(){
  return this.code;
  }
} 
```

当我使用 String 运行此代码时：`<person><lastname>001008</lastname></person>`作为 XML 输入，我得到了 a`NumberFormatException`和`<person><lastname>001009</lastname></person>`

其他数字也可以，例如：001000、001007、001006、001005。

你知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:45:41.823

当你用一个零填充一个数字时，java认为这个数字是一个八进制数。

八进制数只能有以下数字：0,1,2,3,4,5,6 & 7。数字 8 和 9 不能用于八进制数。

您指定的数字是 01008，因此会引发 NumberFormatException。

# matlab - 无需按钮即可在 GUI 上显示图像和文本

> ID：16022923
> 
> 赞同：0
> 
> 时间：2013-04-15T19:06:03.517
> 
> 标签：matlab, user-interface

如何在 matlab GUI 的编辑框中显示字符串。gui 没有按钮。因此，当它运行时，字符串应该直接显示在 gui 文本框中。对于图像也是如此。任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:12:28.297

通过打开属性检查器（双击编辑框）手动写入字符串并向下滚动到“字符串”并写入您的字符串，或者只是调用句柄并将其设置在回调中，即 set(handles.edit1,'String ','这是我的字符串')

# svn - 提交时出现颠覆错误：“svn：无法打开文件...没有这样的文件或目录”

> ID：16022927
> 
> 赞同：0
> 
> 时间：2013-04-15T19:06:28.770
> 
> 标签：svn

我有一个大型代码库，其中进行了许多更改，但是自从提交代码以来已经有一段时间了。当我尝试提交时，遇到以下错误：

> svn：无法打开文件'/var/www/html/trunk/folder/.svn/text-base/file.php.svn-base'：没有这样的文件或目录

`/var/www/html/trunk/folder/file.php`存在，但`/var/www/html/trunk/folder/.svn/text-base/file.php.svn-base`不存在。我不确定为什么我的代码库中有几个文件夹缺少相应的`.svn-base`文件，但我确实知道。

为了解决这个问题，我可以执行以下操作：

```
cd /var/www/html/trunk/folder
svn rm --keep-local --force file.php
svn commit file.php
svn add file.php
svn commit file.php 
```

现在`file.php`信誉良好，并且有相应的`.svn/text-base/file.php.svn-base`文件。

如果我尝试再次提交我的完整代码库，它将运行到下一个...

> “svn：无法打开文件...没有这样的文件或目录”

...错误，我不知道有多少。纠正所有错误可能需要几个小时。

1）有没有办法一次性解决所有这些问题？或者更好的是，根本问题是否需要解决？

2）如果没有，有人对如何更快地做到这一点有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:35:45.973

我假设您使用的是某些版本的 unix。您使用的用户帐户没有读取/写入文件的权限。检查您的权限。

# javascript - AppendChild 不起作用！，继承自 DOM Element 对象..我在这里做错了什么？

> ID：16022937
> 
> 赞同：0
> 
> 时间：2013-04-15T19:07:03.550
> 
> 标签：javascript, dom, prototypal-inheritance, appendchild

我正在编写我的自定义元素，它具有比标准 DOM 元素更多的方法，这是从 Element 对象继承的方法

```
function MyObject(){

    return (Object.create(document.createElement("Mytag"),{
         myfunction:function(){
             return blahblah;
         }
    }));

}//function for creating object ends

function MyObject2(){

    return (Object.create(document.createElement("Mytag2"),{
        myfunction:function(){
            return blahblah;
        }
    }));

}//function for creating second object ends

var a=new MyObject();//statement works fine
var b=new MyObject2();//statement works fine 
```

现在，当我尝试将其中一个对象作为另一个对象的子对象时，我可以做任何事情，而是抛出异常

```
a.appendChild(b); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:16:44.167

因为您使用`return (Object.create(...));`, 您的`new MyObject();`和`new MyObject2();`返回对象而不是 DOM 元素，因此`a.appendChild(b)`将无法正常工作，因为`a`并且`b`应该是 DOM 元素。

要查看差异，请查看此[jsFiddle中的控制台](http://jsfiddle.net/RWaKT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:57:39.770

您需要将*属性描述符*传递给`Object.create`，而不是方法。

```
function MyObject() {
    return Object.create(document.createElement("Mytag"), {
        myfunction: {
            value: function() {
                 return 'blahblah';
            }
        }
    });
} 
```

这在 Chrome 中对我有用：

```
a = new MyObject();
> HTMLUnknownElement {spellcheck: true, isContentEditable: false, contentEditable:
  "inherit", children: HTMLCollection[0], outerText: ""…}
a.myfunction()
> "blahblah" 
```

但是请注意，它*没有*正确地将对象的“类型”设置为`MyObject`. 当我尝试将对象添加到 DOM 时，它也不会阻止引发异常:(

# c# - 显示正在运行的 cmd 进程的输出

> ID：16022940
> 
> 赞同：1
> 
> 时间：2013-04-15T19:07:19.270
> 
> 标签：c#

我有一个使用命令提示符调用 python 脚本的 C# 代码。该脚本当前运行大约需要 25 秒。在命令提示符下运行时，python 脚本有几个输出，直到最终输出“完成”。我的 C# 代码运行脚本，但如果我使用“WaitForExit”，则永远不会关闭命令提示符。所以我的想法是我需要某种逻辑来检查是否已输出“完成”，但互联网对方法论的帮助并不大。

这就是我所拥有的，它目前只输出第一行“Microsoft Windows [Version 6.1.7601]”。显然，不好。

```
var p = new Process();
p.StartInfo.FileName = "cmd.exe";
p.StartInfo.WorkingDirectory = @"C:\Optimization";
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardInput = true;

p.Start();

p.StandardInput.WriteLine(@"ipy spot_for_labview.py");

    StreamReader mySR = p.StandardOutput;
    string mystr = mySR.ReadLine();
    Debug.WriteLine(mystr);

p.WaitForExit(25000);  //25000 is a placeholder until better method found.

p.Close(); 
```

如果无论如何要在完成后关闭该过程，或者要获得所有 cmd 输出，我都会听。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:13:14.060

你试过这个活动吗？[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件

或[Process.ErrorDataReceived 事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx)

这是来自 MSDN 的代码

```
 Process sortProcess;
    sortProcess = new Process();
    sortProcess.StartInfo.FileName = "Sort.exe";
    sortProcess.OutputDataReceived += new DataReceivedEventHandler(SortOutputHandler); 
```

………………

```
private static void SortOutputHandler(object sendingProcess, 
            DataReceivedEventArgs outLine)
        {
} 
```

# mysql - 从 5 个表中选择复杂的 MYSQL

> ID：16022942
> 
> 赞同：1
> 
> 时间：2013-04-15T19:07:30.493
> 
> 标签：mysql, sql, database-design

我有五张表来存储设施、员工、已完成的单位、项目和班次。

我需要确定每个设施的项目的生产力（累计完成数和累计小时数），如果设施有时间记录在项目上。设施存储在员工表中。

这是我的表结构，（减少到这个问题的必要字段）：

```
facilities
+------------+
| id         |
+------------+
| label      |
+------------+

employees
+------------+
| id         |
+------------+
| facility   |
+------------+

completes
+------------+
| id         |
+------------+
| project    |
+------------+
| completes  |
+------------+
| employee   |
+------------+

projects
+------------+
| id         |
+------------+
| title      |
+------------+

shifts
+------------+
| id         |
+------------+
| project    |
+------------+
| length     |
+------------+
| employee   |
+------------+ 
```

我遇到麻烦的地方是选择设施的生产力，当它与员工一起存储时，而不是与轮班或完成次数一起存储。也许这是一个设计缺陷？班次和完成表也应该有一个设施列吗？当员工已经确定设施时，拥有设施列似乎是多余的。

```
SELECT p.title, SUM(c.completes), SUM(s.length)
FROM projects as p
LEFT JOIN completes as c ON c.project = p.id
LEFT JOIN shifts as s ON s.project = p.id
GROUP BY p.id, shifts.employee.facility; 
```

那个 GROUP BY 语句当然是无效的。但它展示了我想要完成的事情。我还想在声明中选择设施标签。我该如何处理？

提前感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:55:10.003

这是我认为 CROSS JOIN 是最佳方法的少数情况之一：

```
SELECT p.title, f.label, SUM(c.completes), SUM(s.length)
FROM facilities as f        
CROSS JOIN projects as p
JOIN employees as e ON f.id = e.facility
LEFT JOIN completes as c ON c.employee = e.id AND c.project = p.id
LEFT JOIN shifts as s ON s.employee = e.id AND s.project = p.id
WHERE c.id IS NOT NULL OR s.id IS NOT NULL
GROUP BY p.id, p.title, f.id, f.label 
```

这本质上并不是一个糟糕的设计，但它确实使您无法在此处使用典型的父子关系，因为您的桌子上实际上有 2 个`completes`父母`shifts`。

另一种方法是使用没有 LEFT JOIN 的 UNION。这可能会返回更快的结果，具体取决于您`facilities`和`projects`表中当前的行数：

```
SELECT p.title, 
       f.label, 
       SUM(CASE aggregated.type WHEN 'completes' THEN units ELSE 0 END),
       SUM(CASE aggregated.type WHEN 'shifts' THEN units ELSE 0 END)
FROM (
    SELECT 'completes' as type, project, employee, completes as units
    FROM completes
    UNION
    SELECT 'shifts', project, employee, length
    FROM shifts ) aggregated
JOIN projects as p ON aggregated.project = p.id
JOIN employees as e ON aggregated.employee = e.id
JOIN facilities as f ON e.facility = f.id
GROUP BY p.id, p.title, f.id, f.label 
```

从这个查询中可以看出，如果`completes`和`shifts`存储在同一个表中，问题可以很容易地解决。根据您的需要，这可能对您不起作用，但可能需要考虑作为替代模式。

# neo4j - Result.to(NodeEntity.class)：堆栈溢出错误

> ID：16022943
> 
> 赞同：0
> 
> 时间：2013-04-15T19:07:36.250
> 
> 标签：neo4j, spring-data-neo4j

在尝试将我的节点检索回我的域对象时，我收到了这个奇怪的错误：

```
Exception in thread "main" java.lang.StackOverflowError
    at sun.nio.ch.NativeThreadSet.remove(NativeThreadSet.java:76)
    at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:678)
    at org.neo4j.kernel.impl.nioneo.store.PersistenceRow.readFullWindow(PersistenceRow.java:158)
    at org.neo4j.kernel.impl.nioneo.store.PersistenceRow$State$1.transition(PersistenceRow.java:115)
    at org.neo4j.kernel.impl.nioneo.store.PersistenceRow.lock(PersistenceRow.java:59)
    at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.acquire(PersistenceWindowPool.java:193)
    at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.acquireWindow(CommonAbstractStore.java:520)
    at org.neo4j.kernel.impl.nioneo.store.NodeStore.getRecord(NodeStore.java:76)
    at org.neo4j.kernel.impl.nioneo.xa.ReadTransaction.nodeLoadProperties(ReadTransaction.java:239)
    at org.neo4j.kernel.impl.persistence.PersistenceManager.loadNodeProperties(PersistenceManager.java:113)
    at org.neo4j.kernel.impl.core.NodeManager.loadProperties(NodeManager.java:682)
    at org.neo4j.kernel.impl.core.NodeImpl.loadProperties(NodeImpl.java:132)
    at org.neo4j.kernel.impl.core.Primitive.ensureFullProperties(Primitive.java:584)
    at org.neo4j.kernel.impl.core.Primitive.ensureFullProperties(Primitive.java:567)
    at org.neo4j.kernel.impl.core.Primitive.getProperty(Primitive.java:153)
    at org.neo4j.kernel.impl.core.NodeImpl.getProperty(NodeImpl.java:51)
    at org.neo4j.kernel.impl.core.NodeProxy.getProperty(NodeProxy.java:155)
    at org.springframework.data.neo4j.support.typerepresentation.AbstractIndexingTypeRepresentationStrategy.readAliasFrom(AbstractIndexingTypeRepresentationStrategy.java:106)
    at org.springframework.data.neo4j.support.mapping.TRSTypeAliasAccessor.readAliasFrom(TRSTypeAliasAccessor.java:36)
    at org.springframework.data.neo4j.support.mapping.TRSTypeAliasAccessor.readAliasFrom(TRSTypeAliasAccessor.java:26)
    at org.springframework.data.convert.DefaultTypeMapper.readType(DefaultTypeMapper.java:96)
    at org.springframework.data.convert.DefaultTypeMapper.getDefaultedTypeToBeUsed(DefaultTypeMapper.java:144)
    at org.springframework.data.convert.DefaultTypeMapper.readType(DefaultTypeMapper.java:121)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityConverterImpl.read(Neo4jEntityConverterImpl.java:76)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister$CachedConverter.read(Neo4jEntityPersister.java:170)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister.createEntityFromState(Neo4jEntityPersister.java:189)
    at org.springframework.data.neo4j.support.Neo4jTemplate.createEntityFromState(Neo4jTemplate.java:180)
    at org.springframework.data.neo4j.fieldaccess.RelationshipNodeFieldAccessorFactory$RelationshipNodeFieldAccessor.getValue(RelationshipNodeFieldAccessorFactory.java:102)
    at org.springframework.data.neo4j.fieldaccess.DefaultEntityState.getValue(DefaultEntityState.java:97)
    at org.springframework.data.neo4j.support.mapping.SourceStateTransmitter.copyEntityStatePropertyValue(SourceStateTransmitter.java:90)
    at org.springframework.data.neo4j.support.mapping.SourceStateTransmitter.access$000(SourceStateTransmitter.java:40)
    at org.springframework.data.neo4j.support.mapping.SourceStateTransmitter$2.doWithAssociation(SourceStateTransmitter.java:61)
    at org.springframework.data.mapping.model.BasicPersistentEntity.doWithAssociations(BasicPersistentEntity.java:207)
    at org.springframework.data.neo4j.support.mapping.SourceStateTransmitter.copyPropertiesFrom(SourceStateTransmitter.java:57)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityConverterImpl.loadEntity(Neo4jEntityConverterImpl.java:100)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityConverterImpl.read(Neo4jEntityConverterImpl.java:92)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister$CachedConverter.read(Neo4jEntityPersister.java:170)
    at org.springframework.data.neo4j.support.mapping.Neo4jEntityPersister.createEntityFromState(Neo4jEntityPersister.java:192)
    at org.springframework.data.neo4j.support.Neo4jTemplate.createEntityFromState(Neo4jTemplate.java:180)
    at org.springframework.data.neo4j.fieldaccess.GraphBackedEntityIterableWrapper.underlyingObjectToObject(GraphBackedEntityIterableWrapper.java:41)
    at org.springframework.data.neo4j.fieldaccess.GraphBackedEntityIterableWrapper.underlyingObjectToObject(GraphBackedEntityIterableWrapper.java:27)
    at org.neo4j.helpers.collection.IterableWrapper$MyIteratorWrapper.underlyingObjectToObject(IterableWrapper.java:57)
    at org.neo4j.helpers.collection.IteratorWrapper.next(IteratorWrapper.java:47)
    at org.neo4j.helpers.collection.IteratorUtil.addToCollection(IteratorUtil.java:324)
    at org.neo4j.helpers.collection.IteratorUtil.addToCollection(IteratorUtil.java:341)
    at org.springframework.data.neo4j.fieldaccess.RelatedToViaCollectionFieldAccessorFactory$RelatedToViaCollectionFieldAccessor.getValue(RelatedToViaCollectionFieldAccessorFactory.java:122)
    at org.springframework.data.neo4j.fieldaccess.DefaultEntityState.getValue(DefaultEntityState.java:97) 
```

例如，这是我尝试获取用户节点实体的密码查询：

```
public MyUser getUserByUserId(String userId){
    Long t1 = System.currentTimeMillis();
    if(existsUserByUserId(userId)){
        HashedMap params = new HashedMap();
        params.put("userId", userId);
        String query = "START x=node:searchByUserId(userId = {userId})" +
                            " RETURN x";
        Result<Map<String,Object>> result = neo4jTemplate.query(query, params);
        MyUser user = result.to(MyUser.class).single();
        Long t2 = System.currentTimeMillis();
        logger.info("get user by user id exec time: " + (t2-t1) + " ms");
        return user;
    }
    Long t2 = System.currentTimeMillis();
    logger.info("get user by id exec time: " + (t2-t1) + " ms");
    return null;    
} 
```

where`searchByUserId`是节点索引，`existsUserByUserId`是检查指定用户是否存在的辅助方法。问题是当我尝试调用 result.to() 方法时，我随机收到此错误。随机我的意思是我不会总是收到这个错误。更具体地说，我使用本机 Neo4j Java API 插入了所有节点/关系，现在我尝试使用 Spring Data Neo4j（存储库方法）检索这些对象。这就是我插入节点实体的方式：

```
public Node createAndIndexMyUserNode(MyUser user){
        Map<String,Object> properties = new HashMap<String, Object>();
        properties.put("userId", user.getUserId());
        properties.put("baseID" , user.getBaseID());
        properties.put("__type__", MyUser.class.getName());
        properties.put("canUpdate", false);
        Node node = neo4jTemplate.getOrCreateNode("searchByUserId", "userId", user.getTwitterId(), properties);
        return node;
    } 
```

这可能是问题所在，但我不知道如何解决。我怀疑糟糕的数据库关闭或关系创建（之后）可能也是原因之一，但我不确定。 [这](https://stackoverflow.com/questions/15842185/spring-data-neo4j-why-save-method-takes-so-long)就是我“手动”插入所有节点而不是使用存储库保存方法的原因。有什么建议或想法吗？

谢谢大家！

# mysql - 固定长度数值 - BIGINT 或 CHAR 数据类型？

> ID：16022944
> 
> 赞同：0
> 
> 时间：2013-04-15T19:07:45.480
> 
> 标签：mysql

我有几个数字字段将存储固定长度的数值，我不需要对这些字段进行任何数学运算或按最高到最低排序或类似的东西，所以我想知道是否使用`CHAR`数据类型比使用`BIGINT`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:20:13.710

如果您有一个固定宽度的数字并且它适合某个`decimal`字段，那么请使用该数据类型。像`decimal(15, 0)`应该给你想要的东西。

如果在固定宽度字符和字符串之间进行选择，在这种情况下我可能会选择字符串。我发现这比在字段`char(15)`中存储 15 位数字更有意义。`bigint`这清楚地表明该字段实际上是某种标识符，而不是实际数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:12:42.637

如果数据是数字，请使用数字字段。你永远不知道你的要求什么时候会改变，你需要在现场进行数字处理。

# asp.net - 详细信息视图中的下拉列表过滤器

> ID：16022951
> 
> 赞同：1
> 
> 时间：2013-04-15T19:08:04.013
> 
> 标签：asp.net, vb.net, entitydatasource

我在**插入项目模板视图中有一个****下拉列表**（很长，超过 100 个项目），用于详细信息视图。我想添加一个文本框和按钮（搜索功能），以便过滤此列表，但出现以下错误。

 **> Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

我创建了两个实体数据源，一个带有 where 子句，另一个没有。当我点击搜索时，后面的代码（按钮单击事件）将数据源切换到带有 where 子句和参数的数据源，但我得到了上面的错误。关于如何去做这件事的任何建议？

```
Dim aa As DropDownList = DetailsView1.FindControl("DropDownList1")
 aa.DataSourceID = ""
 aa.DataSource = EmpPersonalInfoLOV1   
 aa.DataBind() 
```

已编辑 **将 aa.DataSource 从字符串更改为 EmpPersonalInfoLOV1（数据源的名称）**

***编辑#2*** 用户要求的更多信息..

**数据源 #1 代码**

```
<asp:EntityDataSource ID="EmpPersonalInfoLOV" runat="server" 
                    ConnectionString="name=sspEntities" DefaultContainerName="sspEntities" 
                    EnableFlattening="False" EntitySetName="Employee_Personal_Info" 
                    EntityTypeFilter="" 
                    Select="it.[Emp_id], it.[Employee_No_FastPay], it.[Surname] + ' '+ it.[Firstname] As FullName" 
                    Where="">
                </asp:EntityDataSource> 
```

**数据源 #2 代码**

```
<asp:EntityDataSource ID="EmpPersonalInfoLOV1" runat="server" 
                    ConnectionString="name=sspEntities" DefaultContainerName="sspEntities" 
                    EnableFlattening="False" EntitySetName="Employee_Personal_Info" 
                    Select="it.[Emp_id], it.[Employee_No_FastPay], it.[Surname] + ' '+ it.[Firstname] As FullName" 
                    Where="it.Surname like '%' + @Name + '%'">
                    <WhereParameters>
                        <asp:ControlParameter ControlID="TxtBx1" DbType="String" 
                            DefaultValue="&quot;&quot;" Name="Name"  PropertyName="SelectedValue" />
                    </WhereParameters>
                </asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:43:10.613

看起来您没有`PropertyName`在`EntityDataSource`. 由于您从文本框中获取值，因此您获得的属性是文本。尝试这个：

```
<asp:EntityDataSource ID="EmpPersonalInfoLOV1" runat="server" 
                ConnectionString="name=sspEntities" DefaultContainerName="sspEntities" 
                EnableFlattening="False" EntitySetName="Employee_Personal_Info" 
                Select="it.[Emp_id], it.[Employee_No_FastPay], it.[Surname] + ' '+ it.[Firstname] As FullName" 
                Where="it.Surname like '%' + @Name + '%'">
                <WhereParameters>
                    <asp:ControlParameter ControlID="TxtBx1" DbType="String" Type="String" DefaultValue="" Name="Name" PropertyName="Text" />
                </WhereParameters>
</asp:EntityDataSource> 
```

此外，当您在 where 子句中使用 like 时，您实际上不需要两个数据对象。当文本框为空时，查询将全选。**

# javascript - 您将如何使用 AJAX/jQuery 创建用于下载 XML 内容的进度条？

> ID：16022958
> 
> 赞同：1
> 
> 时间：2013-04-15T19:08:23.527
> 
> 标签：javascript, jquery, ajax, html

如果这是一个相当简单的答案，我深表歉意，但我已经坚持了一段时间。目前我有一个 XML 文件，用户可以在其中以多种方式添加图像、音频文件和文本。如果文件变大，我希望页面需要一个进度条。

我找到了许多关于为上传、PHP 文件创建进度条以及对其进行样式设置的教程，但我还没有找到任何用于监控已读取和处理的 XML 文件百分比的内容。我一直试图让我的代码与[本教程](http://www.hongkiat.com/blog/html5-progress-bar/)一起工作，但没有成功。

我简单的 AJAX 调用：

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: xmlTitle,
        dataType: "xml",
        success: parseXML
    });
}); 
```

parseXML 是我读取 XML 文件，然后在 HTML 上正确显示的函数。

本质上，我想让代码自动显示进度条，并在成功时使进度条消失并显示内容。

如果我以错误的方式处理这个问题，我也愿意接受任何其他建议。如果这是一个简单的问题，再次抱歉，但感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:13:08.420

这应该足以做到这一点：

```
$(document).ready(function() {
    showProgressBar();
    $.ajax({
        type: "GET",
        url: xmlTitle,
        dataType: "xml",
        success: parseXML
    });
    function parseXML(xml){
        hideProgressBar();
        ...
    }
}); 
```

如果您想用上传的真实进度实际更新进度条，您将不得不使用`xhr.upload.progress`事件和`xhr.progress`事件，这两者都没有在 jQuery 中实现，因为没有解决方法可以让它们在 IE<10 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:14:10.320

如果您可以迁移到 websockets，我认为您将获得更多在单个线程中管理数据传输的能力。

如果您想要传统的 ajax，我认为您需要一种类似于通常用于上传进度的方法：

[http://phpmaster.com/tracking-upload-progress-with-php-and-javascript/](http://phpmaster.com/tracking-upload-progress-with-php-and-javascript/)

基本上，轮询服务器并询问它在传输中走了多远，然后将其报告给用户。因此，您将拥有大型 ajax 请求，同时轮询不同的小型端点。您的服务器将上传进度作为用户会话的一部分。

# javascript - WebDriver 功能？

> ID：16022959
> 
> 赞同：1
> 
> 时间：2013-04-15T19:08:27.710
> 
> 标签：javascript, webdriver, functional-testing

我正在探索自动化浏览器内容测试的可能性。WebDriver 是我正在研究的东西；还有，PhantomJS / CasperJS。测试文本内容或特定元素的存在似乎很容易。但是，我需要的是相当复杂的。例如：

*   需要能够确定一个元素中的文本是否与屏幕上的有界区域重叠。
*   需要能够测试元素的可见性——不仅是它没有被设置为“隐藏”，而且它没有被另一个元素覆盖。
*   需要能够验证元素的正确布局；例如，图像显示在文本块的右侧，而不是其下方。

它归结为能够自动检查 Web 应用程序以确保其外观和行为符合预期。我提到的工具是否适合这一点，它们会做我需要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:30:55.350

WebDriver 处理“掩盖”，但不是您正在寻找的其他标准。不过，您可能会发现[Fighting Layout Bugs](http://code.google.com/p/fighting-layout-bugs/)很有趣，因为它试图解决这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T13:26:37.020

我将建议您使用带有 java 的 Web Driver 和带有 java 的 Sikuli api 进行可视化测试。他们可以一起工作。您可以使Webdriver通过id和sikuli来查找元素，通过图像来查找元素并定位它们的位置，您也可以使用Sikuli OCR从图像中提取文本并稍后断言它，但是OCR不是很可靠

# javascript - 设置可见性后在 Canvas 标记内绘图

> ID：16022962
> 
> 赞同：0
> 
> 时间：2013-04-15T19:08:36.380
> 
> 标签：javascript, asp.net, html, vb.net

我有这个代码。

```
<asp:Panel id="aPanel" runat="Server">
   <canvas id="aCanvas" width="200px" height="200px"></canvas>
</asp:Panel> 
```

在这个画布内，我使用 Javascript 代码用鼠标绘制线条

使用服务器端控制，当我按下按钮时，我将此面板设置为可见或不可见。

当我第一次加载该页面时，画布可以正常工作并且我可以在其中绘制。当我调整面板的可见性时（转到 aPanel.visible = false，然后转到 aPanel.visible = true）画布绘图停止工作。

有什么提示可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:24:52.717

而不是使用 aPanel.visible = false 和 aPanel.visible = true 来隐藏/取消隐藏使用

```
document.getElementById('<%=aPanel.ClientID %>').style.display = 'none'; 
```

用于隐藏面板。

```
document.getElementById('<%=aPanel.ClientID %>').style.display = ''; 
```

用于取消隐藏面板。

您可以通过设置面板的样式显示属性来隐藏/取消隐藏面板。

# jquery - 使用航路点更改导航上的 li 背景

> ID：16022966
> 
> 赞同：3
> 
> 时间：2013-04-15T19:08:43.270
> 
> 标签：jquery, html-lists, background-color, jquery-waypoints

我的 jquery 知识充其量是软的。

我想不通。基本上我有一个简单的粘性水平导航栏，在长页面上使用 UL LI。我希望导航栏 li 项目根据他们正在查看的页面部分更改颜色。类似于此页面[http://www.pandlmedia.com/index.php/index_new](http://www.pandlmedia.com/index.php/index_new)但只有它的水平而不是链接改变颜色我希望 li 项目的整个 bg 变为白色。

我正在尝试将 .menu ul li a 项目上的类切换到新类 .menuwhite ul li a 以将背景从蓝色更改为白色，但它不起作用。对我在这里做错了什么有帮助吗？

小提琴：http: [//jsfiddle.net/Z2rRt/](http://jsfiddle.net/Z2rRt/)

```
 $(".wphistory").waypoint(function(event, direction) {
       if (direction === 'down') {
         $('#menu').toggleClass('menuwhite');
       }
       else {
         $('#menu').removeClass('menuwhite');
       }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:19:02.263

我注意到两件事。该`event`参数似乎正在破坏该功能。而且，这是一个很大的问题，为什么`#menu`当你的 div 实际上是时你要切换类`.menu`？:) （类不是 ID）。此外：

[http://jsfiddle.net/Z2rRt/3/](http://jsfiddle.net/Z2rRt/3/)

# qt - 在没有 Qt 的情况下运行 .EXE

> ID：16022967
> 
> 赞同：7
> 
> 时间：2013-04-15T19:08:57.823
> 
> 标签：qt, compiler-construction

**[[解决方案](https://stackoverflow.com/questions/16022967/run-my-application-created-using-qt-without-qt/#16026526)]**

我想在`QtSDK`尚未`Qt`安装的机器上运行我创建的应用程序。

我试图`DLL's`从`BIN`文件夹复制到我的项目的发布，但它没有工作。

## 我尝试了以下方法：

*   我复制所有`dll's`文件夹`d:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin`
*   并将其粘贴到我的项目文件夹中：`d:\projects\mybrowser\mybrowser-build-Desktop_Qt_5_0_1_MinGW_32bit-Release\release`
*   并将其发送到另一台计算机`without Qt`
*   在计算机`without Qt`中，我安装`vcredist_sp1_x86.exe`并尝试运行我的应用程序`browsertest.exe`

## 发生以下错误：

> microsoft visual c++ 运行时库：此应用程序已请求运行时以不寻常的方式终止它

**问：我真正想知道的：**

如何在未安装 Qt 的其他计算机 (Windows) 上运行内置 Qt 的应用程序？

## 细节：

*   Qt5.0.1 32位
*   mingw 4.7 32位
*   QtCreator 2.6.2
*   视窗 7 64 位。
*   英特尔 i5

**文件夹：**

*   D:\Qt\Qt5.0.1\5.0.1\mingw47_32
*   D:\Qt\Qt5.0.1\Tools\MinGW

**Qt/明格：**

*   D:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin\qmake.exe
*   d:\Qt\Qt5.0.1\Tools\MinGW\bin\gcc.exe

* * *

文件**.pro**：

```
QT += webkitwidgets network core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = browsertest
TEMPLATE = app

RC_FILE = browser.rc

SOURCES += main.cpp\
 mybrowser.cpp

HEADERS += mybrowser.h

FORMS += mybrowser.ui 
```

如果您遗漏了任何信息，请告诉我。感激的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T23:51:54.680

要分发您的应用程序，您需要复制**DLL**（仅必要的**DLL**）。

1.  从或复制必要 的**DLL**`<DRIVE>:\Qt\Qt<Version_qt>\<Version_qt>\mingw<Version_mingw>\``<DRIVE>:\Qt\Qt<Version_qt>\<Version_qt>\mingw<Version_mingw>\bin\`

    **例如：** `C:\Qt\Qt5.2.0\5.2.0\mingw48_32\`或`C:\Qt\Qt5.2.0\5.2.0\mingw48_32\bin`

2.  粘贴应用程序的文件夹。

3.  然后复制里面的文件夹`<DRIVE>:\Qt\Qt<Version_qt>\<Version_qt>\mingw<Version_mingw>\plugins`

    **例如。：** `C:\Qt\Qt5.2.0\5.2.0\mingw48_32\plugins`

4.  粘贴应用程序的文件夹。

> 注意：在这个例子（下）中，需要从不同的地方复制 DLL 并删除**Debug DLL**（仅用于在**Debug**中编译）。
> 
> 注意`debug dlls`以“d.dll”结尾的，例如：*Qt5Core.dll* and *Qt5Cored.dll* or *Qt5Concurrent.dll* and *Qt5Concurrentd.dll*，以“d.dll”结尾的不要复制。

结构应如下所示（示例）：

*   c:\project\app.exe（您在**Qt**中创建的应用程序）
*   c:\project\Qt5Core.dll（来自**qt/mingw**文件夹或**qt/mingw/bin的****dll**）
*****   c:\project\platforms（来自**qt/mingw/plugins文件****夹**的文件夹）***   c:\project\platforms\qminimal.dll（来自**qt/mingw/plugins/platforms文件夹的****dll**）******

 ********仅需要mingw**的一些**DLL**，因此我建议使用[Dependency Walker 2.2](http://www.dependencywalker.com/)

 **结果应如下所示（并非所有 dll 都需要，这可能因项目类型而异）： ![应用程序文件夹](https://i.stack.imgur.com/XWCgS.png)

* * *

谢谢：

*   @MartinBeckett +1，向我展示了查找所需**DLL**的程序。

*   +1 @WouterHuysentruit，感谢我指出的应用程序，我发现**mingw\plugins**文件夹的内容应该直接进入应用程序文件夹。

*   @WouterHuysentruit 我会认为你的回答是正确的，但你刚刚说过，所以我做了一个更简单的解释。不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:48:47.387

“microsoft visual c++ 运行时库：此应用程序已请求运行时以不寻常的方式终止它”

那是一个普通的错误，或者有时是不兼容的 dll 的混合
使用您的 exe 上的（免费）[依赖](http://www.dependencywalker.com/)程序来检查它实际使用的 dll - 它可能没有链接所有 Qt

一些 Qt 库在运行时从插件文件夹加载，主要是图像格式和数据库连接 - 但它们不会给出此错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T13:45:03.280

windeployqt（随 QT 5.2+ 提供）应该完成（大部分？）工作********

# c# - 在模态或 radwindow 上验证后继续执行事件

> ID：16022972
> 
> 赞同：0
> 
> 时间：2013-04-15T19:09:18.720
> 
> 标签：c#, asp.net, postback, webusercontrol, radwindow

我有以下场景： 用户单击 asp 页面内的按钮。由于安全原因，在单击事件执行期间，系统确定有必要在继续执行触发的事件之前应用一些验证。

这些验证显示在一个窗口中（在本例中为 Telerik RadWindow）。在此 RadWindow 内，有一个 Web 用户控件 (WUC)，其中包含验证码，或安全代码、秘密问题等。在用户编写验证码文本或必要的验证（这意味着 WUC 内的回发）后，WUC应该继续从打开 RadWindow 的按钮执行触发的事件。

我怎样才能做到这一点？任何想法？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:23:57.057

当您调用 RadWindow 时，请确保设置`OnClientClose`事件。如果您从代码隐藏创建您的 RadWindow：

```
RadWindow newWindow = new RadWindow();
newWindow.OnClientClose = "onRadWindowClosed";
... 
```

如果您通过 javascript 打开 RadWindow，则可以使用 add_close() 方法：

```
...
getRadWindow().add_close('onRadWindowClosed');
... 
```

无论哪种情况，您都需要在调用页面上为 OnClientClose 事件创建一个新的事件处理程序脚本：

```
function onRadWindowClosed(sender, eventArgs) {
    var returnValue = eventArgs.get_argument();

    if (returnValue != null) {
        if (returnValue == "continue") {
            // Continue doing work
        }
        else {
            // Throw an error
        }
    }
} 
```

在您的 WUC 上，在`btnContinue`点击事件中：

```
protected void btnContinue_Click(object sender, EventArgs e)
{         
    Page.ClientScript.RegisterClientScriptBlock(GetType(), "closeScript", "getRadWindow().close('continue');", true);
} 
```

此功能用于两个页面：

```
function getRadWindow() {
    var oWindow = null;

    if (window.radWindow) 
        oWindow = window.radWindow;
    else if (window.frameElement.radWindow) 
        oWindow = window.frameElement.radWindow;

    return oWindow;
} 
```

**现有答案的更新**

在您的调用页面上，添加一个函数来获取 RadAjaxManager（假设您已经在页面上。如果没有，您将需要一个）：

```
function get_ajaxManager() {
    return $find("<%= Telerik.Web.UI.RadAjaxManager.GetCurrent(this.Page).ClientID %>");
} 
```

修改您的 OnClosed javascript 函数（来自调用页面）：

```
function onRadWindowClosed(sender, eventArgs) {
    var returnValue = eventArgs.get_argument();

    if (returnValue != null) {
        if (returnValue == "continue") {
            // This call will invoke a server side event
            get_ajaxManager().ajaxRequest("continue~");
        }
    }
} 
```

在您的代码隐藏中，处理被调用的服务器端事件：

```
protected void RadAjaxManager1_Request(object source, Telerik.Web.UI.AjaxRequestEventArgs e)
{
    try
    {
        if (e.Argument.Trim().Length == 0)
        {
            // Show a message when debugging, otherwise return
            return;
        }

        string argument = (e.Argument);
        String[] stringArray = argument.Split('~');

        switch (stringArray[0])
        {
            case "continue":
                // Continue performing your action or call a specific method
                ServerSideMethodCall();
                break;
        }
    }
    catch (Exception ex)
    {
        RadAjaxManager.GetCurrent(this.Page).Alert("Unable to complete operation at this time: " + ex.Message);
    }
} 
```

如前所述，如果页面上还没有 RadAjaxManager，您将需要一个 RadAjaxManager，并且您需要将 AjaxRequest 处理程序绑定到它。

```
<telerik:RadAjaxManager runat="server" ID="RadAjaxManager1" OnAjaxRequest="RadAjaxManager1_Request"></telerik:RadAjaxManager> 
```

对不起，冗长的回答。让我知道这是否能满足您的需求。

# apache-flex - Flex：防止树的垂直滚动条重叠视图

> ID：16022973
> 
> 赞同：0
> 
> 时间：2013-04-15T19:09:19.750
> 
> 标签：apache-flex, tree, scrollbar, overlap

我有一个`mx:Tree`，但是当垂直滚动条出现时，它与树的内容重叠（奇怪的是水平条没有）。这对于文本来说可能是可以接受的，但是对于某些项目，我使用项目渲染器创建的条纹似乎让 QA 人员厌恶。我怎样才能防止这种情况发生？

我有个*主意*解决方法：我可以使用项目渲染器在视图右侧稍微停止绘图（不是我可以可靠地获得滚动条的宽度），但我什至无法弄清楚有多宽树的可显示部分是——树的所有属性似乎都与它的整个宽度有关，其中包括使用水平滚动条可覆盖的整个区域。但是，表示选定项目的蓝色条纹似乎没有这个问题 - 它在滚动条附近停止。无论如何，当试图找到可显示区域时，我不知道我是否可以处理水平滚动条移动时增加的复杂性。如果有人能告诉我如何将垂直条放在可显示的树区域之外（当然，或者缩小可显示的区域），那就更好了。谢谢。

我正在使用 Flex 3.5 SDK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:32:42.797

[在研究列表和树组件上的水平滚动条问题](https://stackoverflow.com/questions/2076842/horizontal-scrollbar-issue-on-list-and-tree-component/2076909#2076909)时，我能够找到解决方案。它链接到的博客最终显示了一种骇人听闻的解决方案（在读者的评论中），该解决方案显示了如何确保没有任何绘图超出特定边界。

# grails - 如何重置 grails 控制器中的参数？

> ID：16022974
> 
> 赞同：1
> 
> 时间：2013-04-15T19:09:22.323
> 
> 标签：grails, gsp, grails-controller

我的 GSP 上有一个重置按钮，用于将表单字段重置为默认值，因此在单击重置按钮时调用控制器操作，并且必须将参数设置为空白并需要呈现相同的视图。

我正在尝试.. 控制器动作：

```
def reset = {
   request['name']= ''
   request['street']= ''
   render(view:'employee')
} 
```

普惠制：

```
<input type="text" id="name" value="${params.name}"> 
```

但它似乎不起作用......如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:22:45.127

通过在控制器操作中使用重定向解决..这样所有参数和命令验证都将超出请求范围，因此无需重置任何字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:34:21.430

根据您使用的是 jquery 还是其他库，它将是这样的：

```
$("form").on("reset",function(){
      $(".message").hide();
}); 
```

# nginx - 在 nginx 后面使用 GitLab 启用了 basic_auth？

> ID：16022977
> 
> 赞同：8
> 
> 时间：2013-04-15T19:09:40.277
> 
> 标签：nginx, basic-authentication, gitlab

我已经成功安装了 GitLab 来管理私有存储库（这太棒了！）。

我遇到的问题是默认情况下，当有人点击我的子域时会显示 Gitlab 登录。我想在用户获得 GitLab 登录屏幕之前用 basic_auth 层保护整个区域。不幸的是，这破坏了我在启用 GitLab 时推/拉的能力。

我的 nginx 配置启用 basic_auth：

```
 auth_basic            "Restricted";
  auth_basic_user_file  htpasswd; 
```

关于如何在不破坏 git / gitlab 功能的情况下启用 basic_auth 的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-02T13:53:21.820

将此添加到`/etc/gitlab/gitlab.rb`：

```
nginx['custom_gitlab_server_config'] = "auth_basic 'Restricted';\n  auth_basic_user_file htpasswd;\n" 
```

并运行`gitlab-ctl reconfigure`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T03:18:13.647

目前有点破解，但试一试。

编辑您的 nginx 站点配置以添加/修改以下位置

```
location ^~ /api/v3/internal/allowed {
    proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_redirect     off;

    proxy_set_header   X-Forwarded-Proto $scheme;
    proxy_set_header   Host              $http_host;
    proxy_set_header   X-Real-IP         $remote_addr;

    proxy_pass http://gitlab;}

location / {
    auth_basic "Gitlab Restricted Access";
    auth_basic_user_file  /home/git/gitlab/htpasswd.users;
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
} 
```

将您的 @gitlab 位置块保持原样。

诀窍是让 /api/v3/internal/allowd 绕过身份验证。如果您在执行 git pull / push 时查看日志，则会向服务器发出请求是否允许。在带有 htpasswd 的标准 nginx 配置中，该请求将被阻止，因为服务器不知道所需的身份验证。

无论如何，不​​确定是否有更好的选择（找不到），但这似乎对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T12:27:48.377

您的问题是您想为公共访问 GitLab 设置密码限制，但让 Gitlab-Shell 不受限制地访问本地 GitLab 实例。

根据 IP 接口，您可以有 2 个 nginx 配置。将行更改`listen 0.0.0.0:80 default_server`为`listen 127.0.0.1:80 default_server`。

[https://github.com/gitlabhq/gitlabhq/blob/v7.7.2/lib/support/nginx/gitlab#L37-38](https://github.com/gitlabhq/gitlabhq/blob/v7.7.2/lib/support/nginx/gitlab#L37-38)

# iphone - 应用名称不会显示在设备上

> ID：16022987
> 
> 赞同：0
> 
> 时间：2013-04-15T19:10:16.170
> 
> 标签：iphone, ios, xcode

在模拟器或我的 iPhone 上进行测试时，我的应用程序不会在主屏幕的图标下显示应用程序名称。

我的应用名称列在 plist 中的 Bundle Display Name 和 Bundle Name 中。产品名称也列在构建设置中。此外，我尝试过删除应用程序、清理和重建，但没有奏效。

有没有其他人发生过这种情况或对我可能遗漏的内容有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:45:02.897

完整性检查：

*   删除应用
*   重启设备
*   重启 Xcode
*   `Info.plist`在项目导航器中选择
*   确认`CFBundleDisplayName`是*AppName*
*   构建/运行

如果这不起作用，make 文件中可能会有一些杂乱无章，即使有更多细节也很难远程诊断

一个费力的解决方法：从头开始项目并将所有文件添加到新项目中

# jakarta-ee - Java 消息服务 - 未收到消息

> ID：16022988
> 
> 赞同：0
> 
> 时间：2013-04-15T19:10:32.630
> 
> 标签：jakarta-ee, netbeans, jms, glassfish-3

我正在使用带有 glassfish3 服务器的 NetBeans IDE 和 Java EE 编写程序。目前我有 2 个线程，A 和 B。它们都在彼此之间来回发送消息。我遇到的问题是：

```
1\.  A sends a message, M1, to B
2\.  B receives M1
3\.  B sends M2 to A
4\.  A hangs waiting on M2 
```

这是我的代码：

线程 A：

```
//required declarations
producer = session.createProducer(AtoBQueue);
m1 = session.createMapMessage();
m1.setString("m1", "m1Val");
m1.setJMSReplyTo(BtoAQueue);
flag = true;
producer.send(m1);

consumer = session.createConsumer(BtoAQueue);
connection.start();

if(flag){
   m2 = (MapMessage) consumer.receive();
   String m2Val = m2.getString("m2");
   if(m2Val.equals("true")){
      flag2 = true;
   }
}
... 
```

线程 B：

```
consumer = session.createConsumer(AtoBQueue);
connection.start();
while(true){
   m1 = (MapMessage) consumer.receive();
   m1Val = m1.getString("m1");
   if(m1Val != null){
      flag = true;
   }

   MessageProducer producer = session.createProducer((Queue m1.getJMSReplyTo());
   m2 = session.createMapMessage();
   if(m1Val != null){
      if(m1Val.equals("m1Val")){
         m2.setString("m2", "m2Val");
         m2.setJMSReplyTo(AtoBQueue);
         producer.send(m2);
      }
   }
   ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:27:08.533

您的线程 A 将密钥作为“报告”发送，而您希望线程 B 中的密钥为“m1”，因此它不会将回复发送回队列。在发送消息之前，还可以尝试在 A 中创建消费者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:40:19.350

事实证明，在我只为线程 B 执行 producer.send(message) 之后，我需要添加 session.commit()。

# python - 如何修复混合 JSON 编码的字符串

> ID：16022990
> 
> 赞同：1
> 
> 时间：2013-04-15T19:10:40.047
> 
> 标签：python, ruby, json, string

我面临以下问题。我有 JSON 字符串，其中内部数组/对象有时被写为转义字符串，有时不是。例如我有

```
{ "author": "Jack",
  "meta": ["a", "b"]} 
```

还有一个不好的：

```
{ "author": "Jack",
  "meta": "[\"a\", \"b\"]"} 
```

如果我解析后一个，我只会得到一个元属性的字符串。这可以通过再次通过 JSON 解析器传递元属性来解决。但是，问题是，如果我通过`JSON.parse`(Ruby) 或`JSON.load`(Python) 传递它，那么可能我处理的不是转义字符串，而是一个简单的数字`"15.3"`。这会导致错误。

那么如何智能检测该值是否是需要再次通过 JSON.parse 的值呢？简单地尝试捕捉这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:41:29.713

这实际上取决于您正在处理的双编码数据类型，但测试第一个字符可能就足够了。如果是`[`，`{`那么您可以尝试使用 JSON 对其进行解码，如果成功，则将其替换。

# image - 在 matlab 中调整图像大小而不引入插值

> ID：16022994
> 
> 赞同：2
> 
> 时间：2013-04-15T19:10:56.047
> 
> 标签：image, matlab, image-processing, computer-vision

我有一个分类图像，我需要将其缩小。但是，默认情况下，当我在 matlab 中使用 imresize 时，输出也不是分类的（它将是连续的）。但是，有一些像 Otsu 这样的方法可以将其转换为分类图像，但我不想使用这些方法。

matlab中是否有任何方法可以在不对调整大小的图像使用任何其他操作的情况下将分类图像调整为另一个分类图像的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:17:09.793

如果您使用最近邻插值，它应该只使用之前图像中的值，即没有加权平均值。

从[docs](http://www.mathworks.de/de/help/images/ref/imresize.html)开始，要实现这一点，您应该添加`'nearest'`到函数调用中以指定*最近邻*插值方法。默认为双三次插值。

# python - 最新的 Django-Facebook-Heroku 教程

> ID：16022995
> 
> 赞同：0
> 
> 时间：2013-04-15T19:10:56.063
> 
> 标签：python, django, facebook, facebook-graph-api, heroku

我正在尝试一次学习 3 种工具，但我深感痛苦。是否有任何最新的教程来构建一个使用 Facebook Graph API 并在 Heroku 上运行的简单 Django 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:24:19.133

我相信你的方法是广泛的。我建议单独学习每个部分，然后将它们拼凑在一起。

官方的[Django 教程](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)是一个很好的起点。我对其他任何一个都没有经验，所以我没有提供链接。

请记住，有时捷径需要更长的时间。了解如何正确使用每个工具，您最终会取得领先，并且可能会花费更少的时间来开发您的最终应用程序。