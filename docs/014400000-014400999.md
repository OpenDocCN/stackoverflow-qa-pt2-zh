# StackOverflow 问答 14400000-14400999

# ios - 如何为 2D ios 游戏制作动画？

> ID：14400006
> 
> 赞同：2
> 
> 时间：2013-01-18T13:30:53.517
> 
> 标签：ios, animation, 2d

我打算为 iPhone 制作一个简单的 2D 游戏（我倾向于无尽的跑步者），并且正在使用 cocos2d，我可以在 Photoshop 或 Illustrator 中制作独立的图像，但我不确定最好的动画方式他们是？？

我不知道我是否应该为在 Flash 中运行的角色设置动画，然后将每个帧保存为 png，然后使用纹理打包器之类的东西制作精灵表或在 cocos2d 中将 png 循环在一起？不知道cocos2d什么效果好，如何优化动画流畅运行，减少内存。我知道这可能是一个广泛的问题，但任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:39:41.867

您应该使用 sprite sheet 并使用 cocos2d 为帧设置动画。

1.  [这是 Ray Wenderlich 的教程](http://www.raywenderlich.com/tag/cocos2d)
2.  [这是官方的coco2d视频教程和示例](http://cocos2d.org/doc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:32:42.063

[那里有很多教程。](http://www.raywenderlich.com/tutorials)您的问题可能会在不久的将来被标记并关闭。下次尝试先用谷歌搜索你的问题。

# jsf - 单一形式的 Primefaces 数据表分页问题

> ID：14400012
> 
> 赞同：1
> 
> 时间：2013-01-18T13:31:20.100
> 
> 标签：jsf, primefaces, datatable

我在一个表单中使用 primefaces 数据表分页和其他控件（提交按钮）。问题是当我在包含数据表的表单中包含其他控件（提交按钮）时，分页停止工作。如果我从该表单中排除其他控件，则分页工作正常。

这是我的xhtml：

```
<table id="content_tbl">
    <h:form>
    <tr>
        <td id="content_tbl_row_first_menu">
            <h:commandButton action="#{roleBean.navigateToAdd}" alt="Add" image="../css/images/20x20/Plus.png"
                rendered="#{policyBean.userAllowedToAddRole}" title="Add" />
        </td>
    </tr>

    <tr>
        <td id="content_tbl_row_third_list">

            <p:dataTable id="dtbl_role" var="role" value="#{roleBean.roles}" dynamic="true"
                paginator="true" rows="10"  
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                    rowsPerPageTemplate="5,10,15">

                <f:facet name="header">  
                    Roles  
                </f:facet>

                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Role" />
                    </f:facet>
                    <h:outputText value="#{role.name}" />
                </p:column>
            </p:dataTable>
            <p:growl id="messages" />               
        </td>
    </tr>       
    </h:form>
</table> 
```

这是我的豆：

```
public class RoleBackingBean extends Role implements Serializable{

/**
 * Navigate to add page
 * @return
 */
public String navigateToAdd() {

    return "navigate_to_add";
}

public List<Role> getRoles() {

    return new RoleHomeImpl().getRoleList();
} 
```

}

请让我知道是否需要更多代码。任何帮助，将不胜感激。

奥马尔

# actionscript-3 - 鼠标滚轮事件连续触发并且不会在 Firefox 上停止

> ID：14400013
> 
> 赞同：0
> 
> 时间：2013-01-18T13:31:21.410
> 
> 标签：actionscript-3, apache-flex, flex4, mouseevent

基本上，我试图在 Flex 4.5 中实现鼠标滚轮的简单放大/缩小。

场景是一系列嵌套的 mx:Canvas（我被迫使用 MX 而不是 Spark）。其中一个嵌套的画布具有 mouseWheel="..." 事件分配。

现在来解决问题：在 Firefox 上，wmode=window（Chrome 工作正常），由于未知原因，MouseEvent 被连续触发，直到光标移出处理滚轮事件的 Canvas。

什么已经尝试过：

*   wmode 透明；
*   event.stopPropagation();
*   event.stopImmediatePropagation();
*   event.preventDefault();
*   在层次结构中将事件处理移动到更高/更低；
*   删除处理程序中的侦听器并在超时时重新分配它；
*   上述的各种组合；

似乎没有任何效果。

想法？

**UPD：**似乎仅在元素至少调整一次大小后才会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:59:37.853

由于对此似乎没有合理（或合乎逻辑）的解决方案，因此有一个丑陋的解决方法：

*   在车轮处理程序中，添加`handlerObject.mouseEnabled = false;`
*   将超时设置为 1-10 毫秒以重置`mouseEnabled`为`true`。

似乎正在“重置”车轮事件。

# python - 在实践中，为什么比较整数比比较字符串好？

> ID：14400018
> 
> 赞同：1
> 
> 时间：2013-01-18T13:31:53.577
> 
> 标签：python, time, python-3.x, comparison

我做了这个测试

```
import time
def test1():
    a=100
    b=200
    start=time.time()
    if (a>b):
        c=a
    else:
        c=b
    end=time.time()
    print(end-start)

def test2():
    a="amisetertzatzaz1111reaet"
    b="avieatzfzatzr333333ts"
    start=time.time()

    if (a>b):
        c=a
    else:
        c=b
    end=time.time()
    print(end-start)

 def test3():
     a="100"
     b="200"
     start=time.time()

     if (a>b):
         c=a
     else:
         c=b
     end=time.time()
     print(end-start) 
```

并得到结果

```
1.9073486328125e-06    #test1()
9.5367431640625e-07    #test2()
1.9073486328125e-06    #test3() 
```

执行时间类似。确实，使用整数代替字符串会减少存储空间，但执行时间呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:42:43.160

对一小段代码的一次执行计时并不能告诉你太多。特别是，如果您查看 和 中的计时数字`test1`，`test3`您会发现*这些数字是相同的*。这应该是一个警告信号，事实上，您在这里看到的只是计时器的分辨率：

```
>>> 2.0 / 2 ** 20
1.9073486328125e-06
>>> 1.0 / 2 ** 20
9.5367431640625e-07 
```

为了获得更好的结果，您需要多次运行代码，并测量并减去时序开销。Python 有一个内置模块[`timeit`](http://docs.python.org/2/library/timeit.html)可以做到这一点。让我们计算每种比较的 1 亿次执行时间：

```
>>> from timeit import timeit
>>> timeit('100 > 200', number=10**8)
5.98881983757019
>>> timeit('"100" > "200"', number=10**8)
7.528342008590698 
```

所以你可以看到差异并没有那么大（在这种情况下，字符串比较只慢了大约 25%）。那么为什么字符串比较比较慢呢？好吧，找出方法是看比较操作的实现。

在 Python 2.7 中，比较是由[`do_cmp`. `object.c`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/object.c#l811)（请在新窗口中打开此代码以跟随我的其余分析。）在第 817 行，您将看到如果被比较的对象是相同类型并且它们`tp_compare`的类结构中有函数，那么该函数叫做。在整数对象的情况下，会发生这种情况，函数[`int_compare`in`intobject.c`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/intobject.c#l438)，您将看到它非常简单。

但是字符串没有`tp_compare`函数，因此`do_cmp`继续调用[`try_rich_to_3way_compare`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/object.c#l668)，然后调用[`try_rich_compare_bool`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/object.c#l641)最多 3 次（依次尝试三个比较运算符 EQ、LT 和 GT）。这调用[`try_rich_compare`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/object.c#l606)which调用[`string_richcompare`。`stringobject.c`](http://hg.python.org/cpython/file/2a3884b6ffb5/Objects/stringobject.c#l1186)

所以字符串比较比较慢，因为它必须使用复杂的“丰富比较”基础设施，而整数比较更直接。但即便如此，它并没有太大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:15:33.347

嗯？由于减少了存储空间，因此需要比较的位数也减少了。比较位是工作，做更少的工作意味着它会更快。

# ftp - Debian FTP 用户权限

> ID：14400019
> 
> 赞同：0
> 
> 时间：2013-01-18T13:31:55.680
> 
> 标签：ftp, debian, chmod, umask

我是 Linux 新手，它是命令行，我需要更改 FTP 服务器上的用户权限。情况是这样的：

我有一个带有 FTP 服务器的 Debian 服务器（没有 GUI，只有命令行）。我有 2 个用户。Root（所有访问权限）和网站管理员（受限用户）。网站管理员可以通过 FTP 上传文件，但这些文件获得权限 600 (chmod 0600)。但我需要0777。

我如何或在哪里可以改变它？我可以以 root 身份登录，但我不知道如何管理 FTP 用户。

我可能需要为网站管理员更改“umask”。我不知道我的 Linux 使用的是什么 FTP 软件。我发现文件 etc/login.defs 的值为 #UMASK 022，但它被注释了。

有人可以帮忙吗？初学者的解释性链接就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:55:23.867

这取决于您使用哪个软件包来提供您的 ftp 服务器程序。对于某些程序，您可以在守护程序的命令行上指定默认的 umask。使用 vsftpd，您可以在 /etc/vsftpd.conf 中指定它。这是默认配置文件的一个片段：

```
# Default umask for local users is 077\. You may wish to change this to 022,
# if your users expect that (022 is used by most other ftpd's)
#local_umask=022 
```

我认为客户端也可以从 ftp shell 中更改默认的 umask。

# sql - 显示包含回车的列

> ID：14400023
> 
> 赞同：1
> 
> 时间：2013-01-18T13:32:06.497
> 
> 标签：sql, oracle, plsql, carriage-return

我有一个`Students`表，其中包含 7 个地址字段。

我需要为地址字段有回车 **的学生每人显示 1 行，如果有的话。**

这之后就很迷茫了。

第**9 列**（**第 1 列**-*学生 ID*，**2-8 列**- *7 个地址字段*）必须包含具有回车符的列名列表（例如 addr_1, addr_3, 1 用于每个学生 ID，以逗号分隔）

第**10 列**必须包含**非法字符**（在本例中为回车）。

该代码必须进一步扩展到不时识别的其他非法字符，并且必须生成报告。

我无法在第 9 列和第 10 列工作。任何人都可以帮忙吗？

```
SELECT pty.id,
a.addr_1,
a.addr_2,
a.addr_3,
a.addr_4,
a.addr_5,
a.addr_6,
a.addr_7
FROM addr a 
inner join contact cON a.idf = c.add_idf
inner join pty ON c.pty_id = pty.id
WHERE 
INSTR(a.addr_1,CHR(13)) > 0 OR
INSTR(a.addr_2,CHR(13)) > 0 OR
INSTR(a.addr_3,CHR(13)) > 0 OR
INSTR(a.addr_4,CHR(13)) > 0 OR
INSTR(a.addr_5,CHR(13)) > 0 OR
INSTR(a.addr_6,CHR(13)) > 0 OR
INSTR(a.addr_7,CHR(13)) > 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:56:58.960

第 9 列将带有`case when instr(...) then 1 else 0 end || case when instr(...) then`

```
create table tmp (vc varchar2(20),  vc2 varchar2(20));
insert into tmp values ('abcd','bcda');
insert into tmp values ('bcd','bcda');

select 
  case when instr(vc,'a')>0 then 'col1' else null end ||
  case when instr(vc2,'a')>0 then 'col2' else null end 
from tmp; 
```

至于第二个问题，你可以放在`'RETURN'`第 10 列。由于您只寻找一个禁止字符并且只获得包含它的行。当你想出一个处理几个禁止字符的解决方案时，我会更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:57:57.160

这听起来像是一个家庭作业问题。所以，让我给你一些提示：

(1) 可以使用语法生成表，如：

```
select chr(13) as badchar from dual union all
select '!' . . . 
```

(2) 你可以`cross join`把这个放入表中并使用一个非常相似的`where`子句。

(3) 然后您可以从表中选择坏字符。

(4) 你需要一个聚合。

实际上，我倾向于放弃每个学生一排的要求，而是每个学生/坏角色一排。这是一种方法：

```
select a.id,
       a.addr_1, a.addr_2, a.addr_3, a.addr_4, a.addr_5, a.addr_6, a.addr_7,
       ((case when INSTR(a.addr_1, b.badChar) > 0 then 'addr_1,' else '' end) ||
        (case when INSTR(a.addr_2, b.badChar) > 0 then 'addr_2,' else '' end) ||
        (case when INSTR(a.addr_3, b.badChar) > 0 then 'addr_3,' else '' end) ||
        (case when INSTR(a.addr_4, b.badChar) > 0 then 'addr_4,' else '' end) ||
        (case when INSTR(a.addr_5, b.badChar) > 0 then 'addr_5,' else '' end) ||
        (case when INSTR(a.addr_6, b.badChar) > 0 then 'addr_6,' else '' end) ||
        (case when INSTR(a.addr_7, b.badChar) > 0 then 'addr_7,' else '' end)
       ) as addrs,
       b.badChar
from a cross join
     (select chr(13) as badChar from dual) as b
WHERE INSTR(a.addr_1, b.badChar) > 0 OR
      INSTR(a.addr_2, b.badChar) > 0 OR
      INSTR(a.addr_3, b.badChar) > 0 OR
      INSTR(a.addr_4, b.badChar) > 0 OR
      INSTR(a.addr_5, b.badChar) > 0 OR
      INSTR(a.addr_6, b.badChar) > 0 OR
      INSTR(a.addr_7, b.badChar) > 0; 
```

它在列名的末尾留下一个额外的逗号。这可以通过将其设为子查询并在下一级进行字符串操作来删除。

将所有 badchars 放在一行上需要聚合。但是，我不清楚在这种情况下第 9 列和第 10 列将包含什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T21:05:44.830

在类似的情况下，我选择了一个大锤子，只是检测到带有 REGEXP_LIKE(col1,'[:cntrl:]') 的非打印控制代码，因为接下来有人会添加一个标签或其他破坏数据的东西。

要求在列上放置检查约束以防止这种情况发生是不是太过分了？

# ssrs-2008 - SSRS 2008R2：无法编辑或修改折线图中的 X 轴标签

> ID：14400024
> 
> 赞同：0
> 
> 时间：2013-01-18T13:32:06.383
> 
> 标签：ssrs-2008

我是 SSRS 世界的新手。我想按如下所示显示水平轴标签字段：

在我的报告中，我将传递一个名为 Year 的参数。在报告中，它将在 Y 轴上显示一条线（它是限制字段），而日期字段在 X 轴上。我想显示总计 (12 + 1)=13 个标签，例如每个月的第一个日期（例如 1 月 1 日、2 月 1 日）和所选年份的最后日期（31 月至 12 月）。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:56:15.130

尝试将轴类型更改为**scalar**，然后设置以下字段：

*   最低 - 1

*   最大 - 13

*   间隔 - 1

*   区间类型 - 数字

# java - 是否有移动和覆盖文件的操作？

> ID：14400030
> 
> 赞同：14
> 
> 时间：2013-01-18T13:32:35.527
> 
> 标签：java, io

我正在寻找移动和覆盖文件的操作。我知道[Java7](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)中有一个新方法，但我希望能绕过 Java7。我也知道[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#moveFile%28java.io.File,%20java.io.File%29)和[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#move%28java.io.File,%20java.io.File%29)中的方法，但是 FileUtils 不会覆盖并且 Guava 没有记录它。

我也知道，我可以编写自己的方法，我开始了，但是在这里和那里看到了一些问题，所以我希望已经完成了一些事情。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T13:35:50.527

我使用以下方法：

```
public static void rename(String oldFileName, String newFileName) {
    new File(newFileName).delete();
    File oldFile = new File(oldFileName);
    oldFile.renameTo(new File(newFileName));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-13T14:03:35.107

FileUtils.copyFileToDirectory 的 Apache FileUtils JavaDoc 说：“如果目标文件存在，则此方法将覆盖它。” 复制后，您可以在删除前进行验证。

```
public boolean moveFile(File origfile, File destfile)
{
    boolean fileMoved = false;
    try{
    FileUtils.copyFileToDirectory(origfile,new File(destfile.getParent()),true);
    File newfile = new File(destfile.getParent() + File.separator + origfile.getName());
    if(newfile.exists() && FileUtils.contentEqualsIgnoreCaseEOL(origfile,newfile,"UTF-8"))
    {
        origfile.delete();
        fileMoved = true;
    }
    else
    {
        System.out.println("File fail to move successfully!");
    }
    }catch(Exception e){System.out.println(e);}
    return fileMoved;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T14:14:13.307

我已经完成了自己的方法的编写，对于每个对可能的解决方案感兴趣的人，我使用了 ApacheCommons FileUtils，这可能并不完美，但对我来说足够好：

```
/**
 * Will move the source File to the destination File.
 * The Method will backup the dest File, copy source to
 * dest, and then will delete the source and the backup.
 * 
 * @param source
 *            File to be moved
 * @param dest
 *            File to be overwritten (does not matter if
 *            non existent)
 * @throws IOException
 */
public static void moveAndOverwrite(File source, File dest) throws IOException {
    // Backup the src
    File backup = CSVUtils.getNonExistingTempFile(dest);
    FileUtils.copyFile(dest, backup);
    FileUtils.copyFile(source, dest);
    if (!source.delete()) {
        throw new IOException("Failed to delete " + source.getName());
    }
    if (!backup.delete()) {
        throw new IOException("Failed to delete " + backup.getName());
    }
}

/**
 * Recursive Method to generate a FileName in the same
 * Folder as the {@code inputFile}, that is not existing
 * and ends with {@code _temp}.
 * 
 * @param inputFile
 *            The FileBase to generate a Tempfile
 * @return A non existing File
 */
public static File getNonExistingTempFile(File inputFile) {
    File tempFile = new File(inputFile.getParentFile(), inputFile.getName() + "_temp");
    if (tempFile.exists()) {
        return CSVUtils.getNonExistingTempFile(tempFile);
    } else {
        return tempFile;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-28T23:30:00.783

可以使用预删除目标实现具有覆盖方法的**纯 Java nio 解决方案移动，如图所示**

```
public void move(File sourceFile, String targetFileName) {
    Path sourcePath = sourceFile.toPath();
    Path targetPath = Paths.get(targetFileName);
    File file = targetFile.toFile();
    if(file.isFile()){
        Files.delete(targetPath);
    }
    Files.move(sourcePath, targetPath);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-28T04:01:37.233

对我有用的最短解决方案：

```
File destFile = new File(destDir, file.getName());
if(destFile.exists()) {
    destFile.delete();
}
FileUtils.moveFileToDirectory(file, destDir, true); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T13:40:28.630

如果您将继续编写自己的实用程序，您可能需要查看Ant中任务的[实现](http://svn.apache.org/repos/asf/ant/core/tags/ANT_170/src/main/org/apache/tools/ant/taskdefs/Copy.java)`copy`，因为它支持覆盖。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-08T06:29:04.960

使用 Apache Commons FileUtils ：

```
 try {         
        FileUtils.moveFile(source, dest);
        print("------------------------------");
        print(name
                + " moved to "
                + PropertiesUtil
                        .getProperty(PropertiesUtil.COMPLETED_PATH));

    } catch (FileExistsException fe){

        if(dest.delete()){
            try {
                FileUtils.moveFile(source, dest);
            } catch (IOException e) {
                logger.error(e);
            }
            print("------------------------------");
            print(name
                    + " moved to "
                    + PropertiesUtil
                            .getProperty(PropertiesUtil.COMPLETED_PATH));
        }
    } catch (Exception e) {

        logger.error(e);
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-30T15:53:56.963

[番石榴](https://github.com/google/guava) [Files.write](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#write-byte:A-java.io.File-)：

> 用字节数组的内容覆盖文件

```
Files.write(bytes, new File(path)); 
```

[文件.copy](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#copy-java.io.File-java.io.File-)：

> 警告：如果 to 表示现有文件，该文件将被 from 的内容覆盖。如果 to 和 from 引用同一个文件，则该文件的内容将被删除。

[Files.move](https://google.github.io/guava/releases/22.0/api/docs/src-html/com/google/common/io/Files.html#line.489)`copy` [在](https://github.com/google/guava/blob/master/guava/src/com/google/common/io/Files.java#L489)幕后使用。所以假设它也被覆盖是安全的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-26T10:04:45.017

您还可以使用[https://xdisk.java.net/ 之类](https://xadisk.java.net/)的工具来启用对现有文件系统的事务访问。

apache还有一个替代方案：

[https://commons.apache.org/proper/commons-transaction/apidocs/org/apache/commons/transaction/file/FileResourceManager.html](https://commons.apache.org/proper/commons-transaction/apidocs/org/apache/commons/transaction/file/FileResourceManager.html)

# jquery - jquery - 拖动和调整窗口大小并将模式保持在中心？

> ID：14400032
> 
> 赞同：0
> 
> 时间：2013-01-18T13:32:39.587
> 
> 标签：jquery, resize

我有一个网站，它的效果很好，但我有一个问题我想不通，似乎也无法在网上找到答案。

[http://ginosoftuscany.com/site/](http://ginosoftuscany.com/site/)

单击一个位置-您将在图片幻灯片上看到一个模态弹出...

现在是 BUG ）当您查看位置时，将窗口大小拖得更大/更小，您会看到模态不遵循 CENTER，它停留在一个地方并且看起来很糟糕..

如果正在调整窗口大小，我可以添加一些 jquery 来重置吗？

如果您需要我，我会做一个 jfiddle... 认为这只是一行代码。

谢谢，-O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:43:22.490

你在你的代码中得到了解决方案

```
var winH = $(window).height();
var winW = $(window).width();
$(id).css('left', winW/2-$(id).width()/2); 
```

将其提取到一个不错的调整大小函数中

```
function resize()
{ if(current_id === undefined || current_id === false) return;
  $id = $(current_id);
  $id.css('left', $(window).width()/2-$id.width()/2);
} 
```

在弹出窗口打开时填写您的 current_id var，并在关闭时将其设置为 false

之后，只在窗口调整大小时调用调整大小:)

```
window.on('resize',resize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:41:51.790

如果您的意思是放大/缩小（Ctrl-鼠标滚轮）导致看起来很糟糕，那么 HTML 布局中的问题，而不是 jQuery 中的问题。在 style.css 中需要 #bellmore {position:absolute;left:50%;margin-left:-480px}

或 $('#bellmore').css('left',calculateLeft) 在每次调整大小事件之后。

# python - 如何在 Django 中返回静态 HTML 文件作为响应？

> ID：14400035
> 
> 赞同：34
> 
> 时间：2013-01-18T13:32:45.767
> 
> 标签：python, html, django, static-html

我还没有弄清楚如何使用纯 HTML 代码和/或 HTML + JavaScript + CSS 呈现网站。

我试图加载一个 HTML 文件，上面写着：*Hello World*。

我知道我也可以用 Django 来做到这一点，但稍后我想用 CSS+JavaScript+HTML 显示我的网站。

在视图文件中，我运行以下代码：

```
# Create your views here.
from django.http import HttpResponse
from django.template import Context, loader

def index(request):
    template = loader.get_template("app/index.html")
    return HttpResponse(template.render) 
```

但网站显示的唯一内容是：

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T13:45:14.337

如果您的文件不是 django 模板而是纯 html 文件，这是最简单的方法：

```
from django.shortcuts import render_to_response

def index (request):
    return render_to_response('app/index.html') 
```

**2020 年 10 月 13 日更新：**

`render_to_response`在 Django 2.0 中已弃用并在 3.0 中删除，因此当前执行此操作的方法是：

```
from django.shortcuts import render

def index (request):
    return render(request, 'app/index.html') 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-18T13:40:29.687

你没有在`render`那里调用方法，是吗？

比较：

```
template.render

template.render() 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-18T13:50:40.900

如果您的 CSS 和 JS 文件是静态的，请不要使用 Django 来提供它们，或者[将它们作为静态文件提供](https://docs.djangoproject.com/en/stable/howto/static-files/)

对于您的 html，如果它只是一些没有任何动态内容的固定文件，您也可以这样做。您还可以将[通用视图](https://docs.djangoproject.com/en/stable/topics/class-based-views/)与[TemplateView](https://docs.djangoproject.com/en/stable/ref/class-based-views/#templateview)一起使用，只需将这样的一行添加到您的`urls.py`：

```
 url(r'^path/to/url', TemplateView.as_view(template_name='index.html')), 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-28T07:58:27.637

通过使用`HttpResponse`，您只能发送数据，如果您想要 html 文件，那么您必须使用`render`或`render_to_response`通过以下方式...

```
from django.shortcuts import render

def index(request):    
    return render(request, 'app/index.html') 
```

或者

```
from django.shortcuts import render_to_response

def index (request):
    return render_to_response('app/index.html') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-25T08:51:48.923

首先，您需要对模板进行一些设置：

**创建项目后，在根** **目录**中创建“templates”文件夹，manage.py 所在的位置。然后转到**settings.py**，在 TEMPLATES 部分进入模板文件夹的目录。不建议使用硬编码，因为如果您将项目发送给您的朋友，您的朋友将无法运行它。应该是这样的：

```
TEMPLATES = [
 {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR,"templates")],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
] 
```

假设您在模板文件夹中有**home.html**和**about.html ：**

**网址.py**

```
from django.contrib import admin
from django.urls import path
from . import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('about/',views.aboutview),
    path('',views.homeview),
] 
```

**视图.py**

```
from django.http import HttpResponse
from django.shortcuts import render

def aboutview(request):
  return render(request,"home.html")
def homeview(request):
  return render(request,"about.html") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-02T09:21:41.970

```
from django.http import HttpResponse

from django.template import loader

def index(request):

    template=loader.get_template('app/index.html')

    return HttpResponse(template) 
```

# jquery - jqGrid，编辑模式，序列化多选

> ID：14400042
> 
> 赞同：1
> 
> 时间：2013-01-18T13:33:22.530
> 
> 标签：jquery, jqgrid

`edittype: select`使用和编辑列时`multiple: true`，jqGrid 将数据作为逗号分隔值发送到服务器。是否可以将某些事件绑定到此特定列，该列将返回一个数组而不是逗号分隔值？

我想**避免**使用**serializeEditData**事件，因为

1.  这是特定于网格的，而不是特定于列的，这对我来说很麻烦-我正在尝试将列逻辑与网格逻辑分开
2.  将数组转换为字符串，然后再将字符串转换为同一个数组，这听起来不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:47:16.940

我认为您将不得不`edittype: 'custom'`在案例中使用并提供您的自定义实现`custom_element`和`custom_value`方法`editoptions`。如果需要读取来自自定义输入元素的值，jqGrid 将`custom_value`使用参数参数调用方法`'get'`。您的`custom_value`方法实现可能会返回案例中的项目数组。

重要的是要了解，通常您需要实现自定义格式化程序，它允许显示为多选输入的数据数组。幸好`formatter: "select"`有[线路](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jquery.fmatter.js#L349)

```
cellval = cellval + ""; 
```

它将数组转换为逗号分隔的项目。由于该行，数组将通过使用转换为字符串`.join(",")`并`formatter: "select"`成功接受数组作为输入。

[演示](http://ok-soft-gmbh.com/jqGrid/SelectWithMultiselectCustom.htm)

![在此处输入图像描述](../Images/f2e33fea3031b0c67b1069552ec1a2b0.png)

演示了上述方法。它使用以下代码：

```
{
    name: "Subcategory",
    width: 250,
    formatter: "select",
    edittype: "custom",
    editoptions: {
        value: {"1": "football", "2": "formula 1", "3": "physics", "4": "mathematics"},
        custom_element: function (value, options) {
            return $.jgrid.createEl.call(this, "select",
                $.extend(true, {}, options, {custom_element: null, custom_value: null}),
                value);
        },
        custom_value: function ($elem, operation, value) {
            if (operation === "get") {
                return $elem.val();
            }
        },
        multiple: true
    }
} 
```

在上面的代码中，我使用`$.jgrid.createEl`jqGrid 的现有代码创建多值选择。唯一需要做的就是从选项中移除`custom_element`和移除`custom_value`选项，以防止从[setAttributes](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.common.js#L282)不必要地调用方法。如果修改代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.common.js#L283)并在排除属性列表中包含和，则表达式可以简化为.`setAttributes``"custom_value"``"custom_element"``$.extend(true, {}, options, {custom_element: null, custom_value: null})``options`

我们得到的方式几乎与`<select>`使用`edittype: "select"`. 只有两个区别：

*   在其中创建的`<select>`元素`edittype: "custom"`将具有附加属性`class="customelement"`
*   内部创建的`<select>`元素`edittype: "custom"`将被包裹（将是直接子元素）内部`<span class="editable">...</span>`

在我们的案例中，这种差异似乎并不重要。

**更新**：`setAttributes`方法的代码现在固定在 gtihub 上 jqGrid 的主要代码中（参见[建议](https://github.com/tonytomov/jqGrid/pull/413#issuecomment-12469810)和[提交](https://github.com/tonytomov/jqGrid/commit/59c3ccb8b5d627418dcaae10a97388f97c250350)）。所以在 jqGrid 的下一个版本（4.4.1 更高版本）中，可以将代码减少`custom_element`到

```
custom_element: function (value, options) {
    return $.jgrid.createEl.call(this, "select", options, value);
} 
```

请参阅[相应的演示](http://www.ok-soft-gmbh.com/jqGrid/SelectWithMultiselectCustom1.htm)。

# java - 是否有工具可以确定程序是否按照 JLS 中的定义“正确同步”？

> ID：14400044
> 
> 赞同：3
> 
> 时间：2013-01-18T13:33:26.383
> 
> 标签：java, concurrency, jls, java-memory-model

Java 语言规范 7 (JLS7-17.4.5) 定义了一个“正确同步”的程序，如下所示：“当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步”。

JLS7-17.4.5 还指出：

> 如果没有正确的同步，可能会出现非常奇怪、令人困惑和违反直觉的行为。

因此，从程序员的角度来看，拥有一个工具来根据上述定义确定程序是否“正确同步”将非常有用。

有这样的工具吗？我用谷歌搜索找不到任何东西。如果没有这样的工具，是否有可能制作一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:52:25.833

[FindBugs可以找到一些并发错误（](http://findbugs.sourceforge.net/)[在检测到的错误列表中](http://findbugs.sourceforge.net/bugDescriptions.html)搜索“多线程正确性” ），并且可能还有其他类似的工具，但最终只能通过细致的代码设计和审查才能避免一些错误。

您还可以测试您的类是否存在并发问题，但这是一个统计游戏，并且某些错误可能永远不会出现，具体取决于 OS/CPU 架构等。

我听说过[Java 并发拷问](https://github.com/shipilev/java-concurrency-torture)工具，但从未使用过。[它在官方JSR 166 并发兴趣列表](http://cs.oswego.edu/pipermail/concurrency-interest/2012-October/010178.html)中被多次提及。

# iphone - 将定时器添加到 iPhone

> ID：14400058
> 
> 赞同：1
> 
> 时间：2013-01-18T13:34:28.703
> 
> 标签：iphone, objective-c, cocoa-touch

我正在尝试添加一个功能，在某些推送时，我的计时器将启动，即使应用程序关闭，计时器也会继续。假设我的积分是 10，现在计时器开始了。一旦我关闭应用程序，也许下次如果我打开应用程序

1-如果在 20 分钟之前它会显示一个倒计时计时器正在运行

2-如果在应用程序再次启动 20 分钟后，它将增加点到 10。

现在什么样的计时器或课程可以帮助我做到这一点？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:38:21.943

在您的应用程序终止委托中，将时间保存在 NSUserdefaults 中，当您启动应用程序时，将其读回并继续添加时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:40:59.393

`NSTimer`即使您的应用程序处于**后台**，也不会持续超过**600**秒，请停止应用程序。

 ****你可以这样做：**

```
NSString *prevTimestamp = [NSString stringWithFormat:@"%d", 
                         [[NSDate date] timeIntervalSince1970]]; 
```

将其存储`prevTimestamp`在 中`NSUserDefaults`，然后在返回应用程序时，

```
NSString *nowTimestamp = [NSString stringWithFormat:@"%d", 
                         [[NSDate date] timeIntervalSince1970]]; 
```

时差将是`[nowTimestamp floatValue] - [prevTimestamp floatValue]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:44:00.580

在您的 applicationdelegate 中，您具有以下功能：

```
-(void)applicationDidEnterBackground:(UIApplication *)application; 
```

和

```
-(void)applicationWillEnterForeground:(UIApplication *)application; 
```

从这些函数中，您可以通过以下方式跟踪时间：

```
-(void)applicationDidEnterBackground:(UIApplication *)application
{
    backgroundTime = [[NSDate date] timeIntervalSince1970]; 
}

-(void)applicationWillEnterForeground:(UIApplication *)application
{

    double timetoAppend = [[NSDate Date] timeIntervalSince1970] - backgroundTime];

    // from here you need to add the timetoAppend to your own variable

} 
```**

# php - 为特定网站制作php文件功能

> ID：14400064
> 
> 赞同：-2
> 
> 时间：2013-01-18T13:34:54.790
> 
> 标签：php, javascript, html

假设我的服务器上有一个 PHP 文件。现在在我的 HTML 中，我有一段 Javascript 代码，它引用 PHP 文件的路径/url。是否可以将 PHP 代码限制为仅适用于指定网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:38:48.513

简短的回答：是的。

* * *

我的假设是您在许多不同的域上都有相同的 PHP 脚本，并且您希望它对某些域的行为有所不同

* * *

首先，您需要确保您的 PHP 脚本有可靠的方法来检测它在哪个域上运行。这应该在您的配置中的某个地方。我不会相信`HTTP_REFERER`，`$_SERVER`也可能没有你需要的东西。

如果你有这个，它应该很容易决定脚本应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:39:49.600

尝试：

```
if ($_SERVER['SERVER_NAME'] == 'site1') {
    // some code...
} else if ($_SERVER['SERVER_NAME'] == 'site2') {
    // some other code...
} else {
    // some other code...
} 
```

# multithreading - 多个内核调用

> ID：14400065
> 
> 赞同：0
> 
> 时间：2013-01-18T13:34:54.867
> 
> 标签：multithreading, loops, cuda, kernel

我想在以下方面得到一些帮助。

我有一个以数组作为输入的内核函数，在计算后，其中一个数组会更改其值。我将其命名为 dev_array。

我希望 dev_array 再次用作我的内核计算的输入大约 80 次，这样我就可以得到 dev_array 的正确结果，稍后在我的 main 中使用它。

我怎样才能做到这一点？我已经尝试在线程条件之前在内核中使用循环。

```
while(i<80){
   i++;
  if(tidx<N){`
  //calculating dev_array then using it again at the beginning of while
}
} 
```

但它没有用。它看起来像是在一个无限循环中。

从 main 调用内核 80 次并一直进行内存复制并不令人满意。

```
while(i<80){
i++;
cudaMemcpy(dev_array,cudaMemcpyHostToDevice);
kernel<<<grid,block>>>(dev_array);
cudaMemcpy(dev_array,cudaMemcpyDeviceToHost);
} 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:45:16.920

你不必一直memcopy。内核执行后，数据保留在设备内存中，并且`dev_array`指针始终指向正确的点。

您可以循环内核以迭代您想要运行该函数的次数，甚至将结果传递给第二个内核。

当一个接一个地调用内核时，您可以确保它们在队列中执行并具有您需要的同步。当内核属于同一个 Cuda**流**时，这是有效的。[在这里](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)，您可以了解有关流及其工作原理的更多信息。

如果您可以设法在内核中进行同步并使用`for`循环，那么只有当您使用`__shared__`内存并且您可以避免一直读取和复制到（较慢的）全局内存时，它才会更快。但是如果你想避免读写冲突，没有办法对所有的块设置障碍。只能`__syncthreads()`用于块*内*的线程。

# php - Joomla-自定义创建的会话被破坏

> ID：14400068
> 
> 赞同：0
> 
> 时间：2013-01-18T13:35:02.503
> 
> 标签：php, joomla, joomla2.5

我正在使用以下代码在 joomla 中创建自定义会话：

```
$session =& JFactory::getSession();                 
$session->set( 'myvar', '123' ); 
```

此外，我正在我的网站中集成虚拟商家支付网关。但是重定向到虚拟商家后它会被破坏吗？

任何原因？在这种情况下，我该如何保护我的会话？

# mysql - MySQL DROP 所有表外键

> ID：14400069
> 
> 赞同：0
> 
> 时间：2013-01-18T13:35:04.490
> 
> 标签：mysql, foreign-key-relationship

我需要将修改表数据类型的表从 更改`bigint`为`int`，数据库中总共有 200 个表，但由于外键约束，我无法更改我的表。

我试过`SET foreign_key_checks = 0;`了，但它不适用于修改数据类型。

请告诉我有没有其他方法可以在不影响现有表的情况下修改表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:37:59.553

这不像你想的那么简单。我假设您要更改的列是表主键的一部分。

所以这些是你在 MySQL 中需要遵循的步骤

*   将所有 FK 放到表中
*   更新表上的数据类型
*   *将所有具有 FK 的表上*的数据类型更新为要更改的表。
*   重新创建所有 FK

除了我上面提到的之外，没有其他方法可以“欺骗”mysql 来更改作为 PK/FK 一部分的列。

MySQL 需要 PK 和 FK 中的列是完全相同的数据类型，否则您将无法重新创建 FK。

# ios - 在后台使用接近传感器

> ID：14400070
> 
> 赞同：1
> 
> 时间：2013-01-18T13:35:05.180
> 
> 标签：ios, multitasking, proximity, uidevice

当应用程序打开时，一切正常 100%。但是一旦应用程序关闭，接近传感器也会停止。我到处检查过，这就是我所拥有的。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Initiates the proximity sensor
    [[UIDevice currentDevice] setProximityMonitoringEnabled:YES];
    [[UIDevice currentDevice] proximityState];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(proximityStateDidChange) name:UIDeviceProximityStateDidChangeNotification object:nil];

    //Background notification
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground) name:UIApplicationDidEnterBackgroundNotification object:nil];
}

-(void)applicationDidEnterBackground{
    NSLog(@"Entered background state.");
    [[UIDevice currentDevice] setProximityMonitoringEnabled:YES];
} 
```

当应用程序关闭时，它会打印出“进入后台状态”。但不会一直监控接近传感器。

# ios - iOS App 未通过验证 isinf 和 isnan

> ID：14400071
> 
> 赞同：2
> 
> 时间：2013-01-18T13:35:07.503
> 
> 标签：ios, ipad, app-store, appstore-approval, dicom

![在此处输入图像描述](../Images/b985324b137aade978e82258f64d4c57.png)

**我认为 cmath 支持isinf**和**isnan**。但正如验证期间报告的那样，我的应用程序没有通过。我的应用程序使用编译为静态库的 dcmtk。并且有许多应用程序使用 dcmtk 并且是 iOS 应用程序。我尝试从静态库中删除有问题的代码，但没有成功。

我在 forum.dcmtk.org 上发布了这个，但仍在等待回复。以为我会在这里发布更多想法。

有关如何解决此问题的任何想法或我应该通知 Apple 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:59:11.520

我使用 std::isnan 和 std::isinf 来通过验证。这只是问题的一部分，即如何验证使用 isnan 和 isinf 的项目的答案。

问题的另一部分是我需要什么帮助。为什么会接受 std::isnan 和 std::isinf 而不是它的非 std 变体？我想我会提出另一个问题。

# highcharts - 想要自定义/扩展 wicked-charts 图例项目点击事件

> ID：14400073
> 
> 赞同：0
> 
> 时间：2013-01-18T13:35:17.237
> 
> 标签：highcharts, wicket, wicket-1.6

我已经实现了一个邪恶的图表，它在图例中显示了 4 个系列。现在我想处理图例中的系列点击事件并更新邪恶的高图之外的一些值。具体来说，我想完全像这个[jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-events-legenditemclick/)一样实现， 但是在 java wicked-chart 中。

```
plotOptions: 
     {    
        series: {    
            events: {    
               legendItemClick: function(event) {    
                   //Do something here    
                   return false;    
                    }    
                } 
```

我确实搜索了 PlotOptions 类的所有方法，但可以得到类似于 highcharts legendItemClick 事件的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:29:52.203

我的解决方案不是在 wicket-charts 中找到 legendItemClick 的替代品，因为它们没有。相反，我这样做了：

在您的页面 html 中，输入 id="chart"。执行此 highcharts 会将您的 id 修复为“chartVar”，而不是在每次运行时更改它。

```
 <div wicket:id="chart" id="chart"></div> 
```

在您的 javascript 中，使用 .highcharts-legend-item 定义您的系列点击，如下所示。

```
 var onSeriesClick = function() {
    var that = this;
    for (var i=0;i<chartVar.series.length;i++)
    {
        $(".highcharts-legend-item:contains(" + chartVar.series[i].name + ")").click(function(){
            // your legend click logic goes here                    
        });
    }
} 
```

# plone - 漏斗网索引错误

> ID：14400074
> 
> 赞同：0
> 
> 时间：2013-01-18T13:35:25.960
> 
> 标签：plone, plone-funnelweb

我正在尝试使用 funnelweb 将导入的页面上传到 plone。我已经发表了一些关于 funnelweb 的帖子，我想我可以邮寄插件的创建者来帮助解决这个问题，但我认为其他人可能需要帮助解决同样的特定问题。因此，如果帖子是公开的，而不是通过邮件，它对每个人都更有用:-)

现在到我的问题。要将导入的页面上传到 plone，我输入了：

```
bin/funnelweb ploneupload:target://admin:password@localhost:8080/Wiki 
```

我收到以下错误：

```
 Traceback (most recent call last):
  File "bin/funnelweb", line 116, in <module>
    mr.migrator.runner.runner({},"funnelweb.remote")
  File "/home/magiq/Plone/buildout-cache/eggs/mr.migrator-1.0.1-py2.7.egg/mr/migrator/runner/__init__.py", line 132, in runner
    transmogrifier(pipelineid, **overrides)
  File "/home/magiq/Plone/buildout-cache/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/transmogrifier.py", line 59, in __call__
    pipeline = constructPipeline(self, sections)       
  File "/home/magiq/Plone/buildout-cache/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/utils.py", line 52, in constructPipeline
    pipeline)
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.webcrawler-1.2.1-py2.7.egg/transmogrify/webcrawler/webcrawler.py", line 169, in __init__
    if self.site_url[-1] != '/':
IndexError: string index out of range 
```

关于如何解决这个问题的任何建议？我想这是一个错误。

这个附加组件是否有很多错误，或者只是它在新版本的 plone 上表现不佳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:44:39.860

您没有指定*从*汇集的*来源*。抛出错误是因为没有要抓取和上传的站点 url。

 *尝试：

```
bin/funnelweb --crawler:url=http://wiki.scandiatransplant.com --crawler:max=50 --ploneupload:target=http://admin:admin@localhost:8080/TestPage 
```*

# c# - PInvoke 函数调用中的 AccessViolationException

> ID：14400076
> 
> 赞同：2
> 
> 时间：2013-01-18T13:35:29.427
> 
> 标签：c#, memory, pinvoke, marshalling, unmanaged

我正在尝试为 C 库编写一个包装器，但我真的在为这个错误而苦苦挣扎。

我尝试了很多方法，这里是其中之一：

```
 [DllImport(DRIVER_FILENAME)]
    [return: MarshalAs(UnmanagedType.U4)]
    private static extern uint GetData(IntPtr handle,
        [MarshalAs(UnmanagedType.LPArray), In()] int[] buffer,
        [MarshalAs(UnmanagedType.U4)] uint size); 
```

这是库文档中的函数*GetData*：

```
LONG GetData( 
  IN HANDLE Handle,
  OUT PULONG Buffer, 
  IN ULONG Size
); 
```

函数在缓冲区中返回连续数据（大约 16KB/s），其大小以字节为单位。*缓冲区*是*int[16384]*。我的代码如下所示：

```
public static uint GetLibData(IntPtr handle, int[] buffer, uint size)
    {
        size *= 4;            
        uint sizeRead = GetData(handle, buffer, size);

        sizeRead /= 4;

        return sizeRead;
    } 
```

有问题的参数是*buffer*，我之前尝试过以其他方式管理它，例如*IntPtr bufferPtr*然后通过*Marshal.AllocHGlobal*分配内存，但我得到了同样的错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

如何正确调用该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:47:59.597

适当的 p/invoke 声明是

```
[DllImport(DRIVER_FILENAME)]
private static extern uint GetData(
    IntPtr handle,
    [Out] uint[] buffer,
    uint size
); 
```

在调用函数之前分配缓冲区是您的责任：

```
uint[] buffer = new uint[16384];
uint bufferSize = buffer.Length*Marshal.SizeOf(typeof(uint));
uint sizeRead = GetData(handle, buffer, bufferSize);
uint lenRead = sizeRead/Marshal.SizeOf(typeof(uint)); 
```

唯一不是 100% 清楚的是调用约定。我猜这个库使用`cdecl`这意味着你`DllImport`应该是

```
[DllImport(DRIVER_FILENAME, CallingConvention=CallingConvention.Cdecl)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:17:53.337

尝试使用以下 PInvoke：

```
[DllImport(DRIVER_FILENAME)]
private static extern Int32 GetData
(
    [In] IntPtr handle,
    [Out] out IntPtr buffer,
    [In] UInt32 size
); 
```

# c# - Linq 数据类型不匹配问题

> ID：14400085
> 
> 赞同：1
> 
> 时间：2013-01-18T13:35:52.850
> 
> 标签：c#, linq

我想在我的 linq 查询中使用以下内容：

```
name_9 = data.Field<String>("Line Description") == "Care" ? "" : data.Field<DateTime>("End Date") 
```

但是，当我尝试时，出现以下错误；

> 错误 1 ​​无法确定条件表达式的类型，因为 'string' 和 'System.DateTime' 之间没有隐式转换

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:37:32.230

结束日期是日期时间，而不是字符串；一个简单的方法可能是：

```
name_9 = data.Field<String>("Line Description") == "Care" ?
       "" : data.Field<DateTime>("End Date").ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:38:29.400

`.ToString()`用方法试试。这是一个`datetime`，不是`string`。

```
data.Field<DateTime>("End Date").ToString() 
```

# azure - 如果 TableBatchOperation 的一项操作失败会怎样？

> ID：14400087
> 
> 赞同：10
> 
> 时间：2013-01-18T13:35:55.317
> 
> 标签：azure, azure-table-storage

执行批处理时，如果 TableBatchOperation 的其中一项操作失败：

1.  批处理中的每个操作都被取消
2.  处理所有其他有效的操作
3.  处理队列中第一个有效的操作，直到一个操作失败，后面的不处理

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T13:41:25.980

答案是 1 - 即使批处理中的一个操作失败，整个操作也会失败（或者换句话说，回滚）。这类似于在关系数据库中执行事务。有趣的是，当这种情况发生时，您会在响应中获得失败实体的索引。检查此线程以获取更多详细信息：[Azure CloudTable.ExecuteBatch(TableBatchOperation) 引发存储异常。如何找到导致异常的操作？](https://stackoverflow.com/questions/14282385/azure-cloudtable-executebatchtablebatchoperation-throws-a-storageexception-ho/14290910#14290910)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T13:43:12.373

官方博文：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)

> TableBatchOperations 或实体组事务以原子方式执行，这意味着**所有操作都将成功**，或者如果单个操作之一导致错误，**则整个批处理**将失败。

# asp.net-mvc - ASP.net MVC - Master Detail - 外键始终为零

> ID：14400093
> 
> 赞同：0
> 
> 时间：2013-01-18T13:36:13.387
> 
> 标签：asp.net-mvc, entity-framework, master-detail

我是 MVC 新手，正在尝试以主详细信息形式添加/编辑记录。masterid 和 detailid 都是由 oracle 在插入记录时生成的。因此，当我尝试调用 DBContext.SaveChanges() 时，我收到外键被违反的错误，并且找不到 id 为“0”的主行。

下面是班级说明。

```
public class Master
{
    public int MasterID { get; set; }
    public string MasterTitle { get; set; }
    public virtual IList<Detail> Details { get; set; }
}

public class Detail
{
    public int DetailID { get; set; }
    public int MasterID { get; set; }

    public string DetailName { get; set; }
    public virtual Master Master { get; set; }
} 
```

控制器代码

```
[HttpPost]
  public ActionResult Create(MASTER masterrecord)
{
   if (ModelState.IsValid)
   {
      db.MASTER.Add(masterrecord);
      db.SaveChanges();
    }
    ...
} 
```

只有将记录插入数据库后，主键（masterid）才会获得有意义的值。context.SaveChanges() 此时尝试使用“0”masterid 保存客户端记录。我搜索了每个地方都找不到任何有用的东西。

虽然首先只保存 Master 表，以便我可以检索 masterid 并使用 DETAIL 模型。但是在任何地方都找不到如何使用 EF5 MVC ASP.NET 来做这件事 任何人都可以指出我提供一些工作示例的正确方向吗？谢谢悉达特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:52:41.663

如果您在 Create 方法上设置了断点，并且在 Master 对象中获得了正确的列表，则可能是 Oracle 提供程序存在问题。

作为一种解决方法，您可以尝试更改方法签名以接受您的数据，如下所示：

```
public ActionResult Create(MASTER masterrecord, List<Detail> details) 
```

然后您可以先保存`masterrecord`，然后添加您的详细信息并再次保存。这不是最佳的，但它可能会起作用。

旁注：将您的 IList 更改为 ICollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:12:08.037

您可能需要考虑为您的 PK 使用 GUID 而不是整数。然后在 Master 的构造函数中你可以说`MasterID = Guid.NewGuid();`. 这样您就不必访问数据库来找出下一个 ID 是什么。

这里有一个优缺点列表[http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)

# scala - sbt 控制台中的 Scala 2.10 和 Continuations (akka-dataflow)

> ID：14400103
> 
> 赞同：2
> 
> 时间：2013-01-18T13:36:46.970
> 
> 标签：scala, sbt, read-eval-print-loop, continuations, scala-2.10

Scala 2.10 中 continuation 插件的状态如何；我有点困惑。以下设置在[Akka 2.2-SNAPSHOT 文档](http://doc.akka.io/docs/akka/snapshot/scala/dataflow.html)中：

```
autoCompilerPlugins := true,
libraryDependencies <+= scalaVersion {
  v => compilerPlugin("org.scala-lang.plugins" % "continuations" % "2.10.0")
},
scalacOptions += "-P:continuations:enable", 
```

首先，`scalacOption`不再适用于 2.10，并且`scalaVersion`实际上并没有在库依赖项中使用。如果我天真地继续使用 2.10 并且没有特殊配置（删除以上所有内容）和 Akka 2.1.0：

```
import concurrent.ExecutionContext.Implicits.global
import akka.dataflow._

flow { "Hello world!" } onComplete println 
```

*我收到一条错误消息，表明未*启用continuations 插件。

* * *

在 Scala 2.10 中启用延续的正确方法是什么？

**特别是**：我怎样才能进入`sbt console`并尝试上面的例子`flow`。看来我还需要确保为 REPL 启用了编译器插件？

* * *

**编辑**：该`scalacOptions`条目*确实有效*，看来我有错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:57:20.787

有了这个`build.sbt`：

```
autoCompilerPlugins := true

scalaVersion := "2.10.0"

libraryDependencies +=
  compilerPlugin("org.scala-lang.plugins" % "continuations" % "2.10.0")

scalacOptions += "-P:continuations:enable" 
```

以下仅延续（无 Akka）示例在 REPL 中有效：

```
scala> import scala.util.continuations._

scala> reset { val i = shift { body: (Int => Unit) => body(5);
     | println("done") }; println(i) } 
```

# api - Windows Phone 应用程序中的捐赠

> ID：14400104
> 
> 赞同：5
> 
> 时间：2013-01-18T13:36:56.347
> 
> 标签：api, windows-phone, payment, donations

我有一个 Windows Phone 应用程序，它是免费的。我希望它保持免费且没有广告。但有时我需要动力。我需要做的是在我的应用程序中添加一些“给作者买一品脱啤酒”按钮（类似于捐赠按钮）。当然，我可以创建 2 个版本：付费版和免费版，它们的功能完全相同，只是付费版带有一些“谢谢”字样，但这将是 2 个完全不同的应用程序，我需要同时支持它们。那么..是否可以在应用程序中实现一些捐赠支付？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:42:50.290

我认为应用内购买将是您的最佳途径。这是描述应用内机制的 MSDN 文章。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T00:45:11.573

另一种选择是使用试用 API。

试用许可证不会过期。由您来定义试用和非试用模式之间的差异。

在市场描述中，您可以写出试用模式和完整模式是相同的。并且，在您的应用程序内的“关于”页面中，放置“如果您喜欢就购买”按钮以打开市场任务，或者“感谢您的支持！” 文本块。

# sql-server-2008 - 如何将 SQL Server Express 2008 连接到 MS Access 2003

> ID：14400107
> 
> 赞同：0
> 
> 时间：2013-01-18T13:37:01.363
> 
> 标签：sql-server-2008, ms-access-2003

我试图连接上面的两个应用程序。我已经在 SQL Server 上设置了数据库作为整个应用程序的后端，我需要 MS Access 2003 作为前端。

我设法使用非常简单的 MS Access 2007 做到了。那么，当您创建数据库时，是否必须将其保存为 .adp 文件才能连接到 SQL Server？或者一个普通的 .mdb 文件可以工作吗？从我读到的情况来看，情况并非如此，您需要使用 .adp 文件-有人可以确认吗？

谢谢

# java - 类型安全返回泛型子类的Java方法

> ID：14400109
> 
> 赞同：2
> 
> 时间：2013-01-18T13:37:03.800
> 
> 标签：java, generics, subclass

我正在使用以下代码从抽象类型（动物）列表中获取与给定类（狗、猫）的第一个匹配元素。有另一种安全的方法吗？

```
// get the first matching animal from a list
public <T extends Animal>T get(Class<T> type) {
    // get the animals somehow
    List<Animal> animals = getList();
    for(Animal animal : animals) {
        if(type.isInstance(animal)) {
            // this casting is safe
            return (T)animal;
        }
    }
    // if not found
    return null;
}

// both Cat and Dog extends Animal
public void test() {
    Dog dog = get(Dog.class); // ok
    Cat cat = get(Dog.class); // ok, expected compiler error
} 
```

（猫和狗延伸动物）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:45:25.883

代码看起来正确。这一行：

```
Cat cat = get(Dog.class); 
```

[确实不应该编译。](http://ideone.com/gqzkkf)

我会确保您没有在代码中的任何地方使用原始类型，因为这通常会“选择退出”看似无关代码的泛型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:48:08.210

我的代码出现编译器错误：

```
public void test() {
    Dog dog = get(Dog.class); // ok
    Cat cat = get(Dog.class); // compiler error
} 
```

我只能看到一种可以编译的情况：

```
class Dog extends Cat {
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T19:34:58.433

我会在你的代码中改变一件事。代替

```
return (T)animal; 
```

我会用

```
return type.cast(animal); 
```

后者不会生成未经检查的强制转换警告。

# android-layout - 多种屏幕尺寸的布局

> ID：14400110
> 
> 赞同：0
> 
> 时间：2013-01-18T13:37:07.687
> 
> 标签：android-layout, intellij-idea

安卓文档说：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

如何在不创建多个 AVD 的情况下在 IntelliJ IDEA 上进行测试？他们提供了模拟屏幕尺寸（英寸）的选项，但我怎么知道哪个被认为是大的、xlarge 或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:30:00.250

我在这里找到了答案（检查表 3）：http: [//developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)

# java - 如何使用 Java 将数字格式化为 Kb/Gb？

> ID：14400113
> 
> 赞同：0
> 
> 时间：2013-01-18T13:37:19.153
> 
> 标签：java, formatting, numbers, number-formatting

> **可能重复：**
> [将文件大小格式化为 MB、GB 等](https://stackoverflow.com/questions/3263892/format-file-size-as-mb-gb-etc)

使用`NumberFormat`，我想将我的数字格式化为科学乘数。换句话说，我希望有以下格式：

*   1024 应格式化为 1K
*   1048576 应格式化为 1G

显然，其他数字应该使用 k、G 和其他倍数来表示。

我怎样才能做到这一点 ？还是我需要一些 Java 库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:40:50.813

粗略地说，这应该有效。`double`它需要一些关于正确格式的抛光。

```
static String formatSize(double size) {
  String finalQ = "";
  for (String q: new String[] {"k", "M", "G"}) {
    if (size < 1024) break;
    finalQ = q;
    size /= 1024;
  }
  return size + finalQ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:23:28.013

```
package com.shashi.mpoole;

public class MetricPrefix {

    static int ONE_ZERO_TWO_FOUR = 1024;
    static String SEPARATOR = " ";
    enum SIZE
    {
        B, K, M, G, T, P, E, Z, Y;
//      BYTE, KILO, MEGA, GIGA, TERA, PETA, EXA, ZETTA, YOTTA;
    }

    class Result
    {
        int number = 0;
        SIZE size;

        public Result setNumber(int number)
        {
            this.number = number;
            return this;
        }

        public Result setSize(SIZE size)
        {
            this.size = size;
            return this;
        }

        public String getValue()
        {
            return this.number + SEPARATOR + this.size; 
        }
    }

    public Result getResult(double howMuchBigger)
    {
        double bigNumber = howMuchBigger;
        int index = 0;
        while(howMuchBigger-ONE_ZERO_TWO_FOUR>0)
        {
            bigNumber = howMuchBigger;
            howMuchBigger = howMuchBigger/ONE_ZERO_TWO_FOUR;
            index++;
        }

        if(index == 0)
            return new Result().setNumber((int) (bigNumber)).setSize(SIZE.values()[index]); 
        else
        return new Result().setNumber((int) (bigNumber/ONE_ZERO_TWO_FOUR)).setSize(SIZE.values()[index]);

    }

    public static void main(String[] args) {

        MetricPrefix j = new MetricPrefix();
        System.out.println(j.getResult(56).getValue());
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T13:42:06.213

也许是这样？[如何在java中将字节大小转换为人类可读的格式？](https://stackoverflow.com/questions/3758606/how-to-convert-byte-size-into-human-readable-format-in-java/3758880#3758880)

# html - 使用 quicktime 播放器插件在浏览器中流式传输 mov 文件的问题

> ID：14400114
> 
> 赞同：0
> 
> 时间：2013-01-18T13:37:24.767
> 
> 标签：html, video-streaming, quicktime, .mov

我正在使用以下 HTML 代码在网页中嵌入 .mov 文件

```
 <embed border="1" 
        autoplay="false" 
        cache="false" 
        loop="false" 
        setcontrollervisible="true" 
        scale="tofit" 
        src="movie.mov" 
        controller="true" 
        qtsrc="movie.mov" 
        type="video/quicktime">    
 </embed> 
```

在这种情况下，视频首先完全下载，然后在浏览器中播放。Forsome 视频大小约为 100MB，因此首先下载然后播放需要大量时间。

有没有办法强制浏览器只流式传输视频而不是下载和播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:11:00.687

我找到了解决方案。这是我的视频文件的问题。“MOOV atom 是使其逐渐可播放所需的重要元数据，位于文件的末尾。它必须位于开头”。

我使用“qt-faststart”程序来排列原子并且它正在工作。

# php - Symfony 管理实体

> ID：14400120
> 
> 赞同：5
> 
> 时间：2013-01-18T13:37:46.407
> 
> 标签：php, symfony

正如我所学的那样，实体不应该存储任何真实的逻辑，因为它们的用途是存储数据。

另外，我读到控制器不应该有任何“真实代码”，而只在需要时设置一些值并将它们指向实际用于**工作**的服务。（[从控制器中修剪脂肪](http://richardmiller.co.uk/2012/10/31/symfony2-trimming-fat-from-controllers/)）。

我理解这些要点，即使我是 Symfony 的新手，我也知道带有“适用于所有事物”的代码的类是非常糟糕的做法（整个 Symfony Book 和 Symfony Cookbook 中的控制器真的看起来像那样）。易于创建，无法维护。而且，如果您遇到必须解耦代码的情况，那么您将获得很多乐趣。但我明白了，因为这些书主要针对新手。

那么，我如何实际创建**Entity Type Managers**。他们是要走的路吗？

假设我有一个**Image**实体。我需要**ImageManager**来删除、更新、调用缩略图服务来创建缩略图等。它在哪里？它在目录结构中到底属于哪里？它不能是未映射的实体，因为它需要注入其中的服务。

[最佳实践食谱文章没有提到这样的事情](http://symfony.com/doc/current/cookbook/bundles/best_practices.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:06:20.933

您可能会看一下 FOSUserBundle 构建其代码的方式。

它有一个[UserManager](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)，`FOSUserBundle/Model`其中执行不需要任何用户实体存储知识的事情，另一个[UserManager](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Doctrine/UserManager.php)在`FOSUserBundle/Doctrine`其中扩展前者并执行需要存储层知识的事情（它被注入 EntityManager，例如例子）。被`FOSUserBundle/Doctrine/UserManager`定义为可以从控制器调用的服务。

这种结构的好处是它使测试变得非常容易。[单元测试](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Tests/Model/UserManagerTest.php)非常`FOSUserBundle/Model/UserManager`轻量级，不需要模拟教义。[单元测试](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Tests/Doctrine/UserManagerTest.php)是嘲笑学说的`FOSUserBundle/Doctrine/UserManager`地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:19:14.780

我不知道这种事情有最佳实践，但是当我这样做时，我总是将我的经理放在一个`Path\To\MyBundle\Manager`命名空间中。在我的第三方供应商的项目中，我能找到的唯一一个做同样事情的例子是[ElasticaBundle](https://github.com/Exercise/FOQElasticaBundle/tree/master/Manager)。

关键是您将管理器定义为服务并注入您需要的依赖项。尝试让你的管理器依赖于接口而不是实际的类，以便更容易测试并在必要时更容易在以后更换单个组件。

让您的经理实现一个定义所有公共方法的接口也是一个非常好的主意，就像`RepositoryManager`我在上面链接到的 ElasticaBundle 中的类所做的那样。

# mysql - Mysql与特定表结构中的join不一致

> ID：14400121
> 
> 赞同：1
> 
> 时间：2013-01-18T13:37:51.460
> 
> 标签：mysql, join

首先，我在这里发帖的借口，通常我觉得我应该能够通过尝试和搜索足够长的时间来找到一个情况的答案......到目前为止，它已经大约 5 个小时的搜索和测试，我无法解释结果我越来越。我现在有点不知所措。如果你们中的任何人可以帮助我，那将不胜感激。

**情况**

以下是所有现有代码，但我正忙于优化行为。

我使用三张桌子；

*   第一个表包含项目，
*   第二个表包含所有项目的属性字段，其中包括名称和默认值
*   第三个表包含属性字段的字段值，通过 id 链接到项目并通过字段 id 链接到字段

这个想法是让每个项目的所有字段都有一个值。如果值表中不存在字段和项值的行，则应使用默认值。

这一切都必须发生在一个查询中。

我之前的那个人通过确保每次添加一个字段时，都会将一个默认值字段插入到所有项目的值表中，从而“修复”了这个问题。当您的数据库表中可以有超过 10.000 个项目和超过 10 个字段时，这当然是错误的方法

**我的测试用例**

在这个系统上工作了 2 年多，我终于有时间从现有的权力中解决这个问题。对工作系统的正常测试总是给我所期望的不一致的回报。这是内部测试系统的当前状态：

*   277 个项目行
*   3 个字段行
*   824 个值行

这是在我通过执行一次性清理查询来清理系统上不再存在的项目和字段的值之后（是的，这部分是错误的）：

```
DELETE FROM values WHERE item_id NOT IN (SELECT id FROM items) OR field_id NOT IN (SELECT id FROM fields); 
```

我还制作了一个具有最低要求的虚拟系统，因为原始表包含更多字段：

```
-- table a represents items
CREATE TABLE IF NOT EXISTS `a` (
  `id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `a` (`id`) VALUES (1),(2),(3);

-- table b represents fields
CREATE TABLE IF NOT EXISTS `b` (
  `id` int(11) NOT NULL,
  `default` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `b` (`id`, `default`) VALUES
(1, 4),
(2, 5),
(3, 6),
(4, 11),
(5, 12);

-- table c represents values
CREATE TABLE IF NOT EXISTS `c` (
  `id` int(11) NOT NULL,
  `a_id` int(11) NOT NULL,
  `b_id` int(11) NOT NULL,
  `value` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `c` (`id`, `a_id`, `b_id`, `value`) VALUES
(1, 1, 1, 7),
(2, 1, 2, 8),
(3, 2, 3, 9),
(4, 2, 1, 7),
(5, 3, 2, 8),
(6, 3, 3, 9),
(7, 1, 5, 13); 
```

**预期结果应为 831 行（277 个项目 * 3 个字段）**，其中值表中不可用的项目/字段组合应填充字段默认值，而不是值表中的值。

我在为检查我的发现而制作的虚拟系统上尝试的成功测试用例 SQL 返回了我的预期：

```
SELECT  a.id,
    b.id, 
    IF(c.value IS NOT NULL, c.value, b.default) as t_value
FROM a
join b
LEFT JOIN c on c.a_id = a.id AND c.b_id = b.id 
```

这将返回 15 行（3 a（项目）x 5 b（字段）），包含所有预期数据

在更改内部测试系统的查询时，它应该可以工作。这是我发送的 SQL：

```
SELECT items.id AS item_id, fields.id AS field_id, IF(values.value IS NULL, fields.default_value, value.value) AS field_value
FROM        items
JOIN        fields
LEFT JOIN   values ON values.item_id = item.id AND values.field_id = fields.id 
```

**...但它返回 1104 行**而不是预期的 831 行。这些表已经清除了不准确的数据，并且我没有考虑到的额外字段根本没有在 SQL 中使用，而且抽象测试已经证明了查询概念。只有实际情况不断失败。

如果有人能指出我的错误，那将不胜感激。此处的表名已重命名，但根据要求，我还可以发布相关内部测试系统表的部分转储。上面的例子应该是准确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:59:48.640

我没有看到任何提及您检查唯一性的内容。您的“额外行”可能是重复的。

```
SELECT a.id FROM a GROUP BY a.id HAVING COUNT(1) > 1 ;

SELECT b.id FROM b GROUP BY b.id HAVING COUNT(1) > 1 ;

SELECT c.a_id, c.b_id FROM c GROUP BY c.a_id, c.b_id HAVING COUNT(1) > 1 ;

SELECT s.a_id, s.b_id
  FROM
       (
        your query here
       ) s
 GROUP BY s.a_id, s.b_id 
HAVING COUNT(1) > 1 ; 
```

我们希望和中的`id`列是唯一且非空的。`a``b`

我们还期望`(a_id,b_id)`in`c`是唯一且非空的。如果您创建唯一索引或声明 UNIQUE KEY 约束，数据库可以强制执行此约束：

```
ALTER TABLE c ADD CONSTRAINT c_ux UNIQUE KEY (a_id,b_id); 
```

-或者-

```
CREATE UNIQUE INDEX c_ux ON c (a_id, b_id); 
```

如果没有唯一性保证，您的查询可能会返回“重复”`a.id`和`b.id`对。

添加到您的查询中的“ `GROUP BY`”子句可用于消除重复项，但这似乎更像是杂牌。（给定一个特定的项目和一个特定的字段，您将允许存储多少个不同的值？当您拉回这些值时，您真正想要返回哪些值？）

* * *

通常，我们希望`id`每个表中的列都可以定义为 PRIMARY KEY：

```
ALTER TABLE a ADD PRIMARY KEY (id);
ALTER TABLE b ADD PRIMARY KEY (id);
ALTER TABLE c ADD PRIMARY KEY (id); 
```

我们还期望（使用 InnnoDB 表）定义外键：

```
ALTER TABLE c ADD CONSTRAINT FK_c_a (a_id) REFERENCES a (id) ;
ALTER TABLE c ADD CONSTRAINT FK_c_b (b_id) REFERENCES b (id) ; 
```

* * *

我的偏好是`CROSS`在 a 和 b 之间的连接中包含关键字，尽管这对查询的作用没有任何影响。它只是作为文档说明没有 ON 子句是故意的，并且我打算使用笛卡尔积。

* * *

## 更新：

有时，像这样的 EAV 模型旨在保存以前的值以及当前值。在这种情况下，通常有一个“有效日期”和/或“取代日期”和/或一个简单的“活动”标志，可用于计算当前值。因此，重复可能是垃圾，来自糟糕的实现，或者“重复”可能是故意的。

在这种情况下，唯一键可能类似于`(a_id, b_id, effective_date)`.

处理 EAV 模型中的历史（“时间”）值的查询可能是相当复杂的，而不是为了装腔作势；但这是可能的。

另一种可能性是某些字段旨在“多值”。即实体的重复属性。例如，一个项目可能有多个“关键字”或“标签”值。“霍比特人”可能具有“高帧率”、“幻想”、“极度痛苦”的“标签”值。但是，如果不了解数据库设计，我们就无法真正分辨出我们所处的位置。

但是，如果数据库被设计为仅保存一个字段的单个“当前”值（无法查看历史值），那么我同意重复的`(a_id,b_id)`行可能（可能）是垃圾。在开始删除任何内容之前，我可能会保存表中所有行的副本（到单独的“保存”表中）。

# javascript - jQuery Mobile 更改页面失败

> ID：14400124
> 
> 赞同：1
> 
> 时间：2013-01-18T13:38:02.860
> 
> 标签：javascript, jquery, css, jquery-mobile, dialog

我在使下面的简单脚本工作时遇到问题，但事实并非如此：

```
<div data-role="page" id="targetPage">

    <div data-role="content">
        <form action="" method="" name="targetForm">
            <a id="bt-addTarget" data-role="button" data-icon="plus">Add Target</a>
        </form>
    </div><!-- /content -->

    <div id="addTargetDialog"  data-role="dialog">
        <div data-role="header" data-theme="d">
            <h1>Choose a Target</h1>
        </div>
        <div data-role="content" data-theme="c">
            <form action="" method="" name="addTargetForm">
                <input type="hidden" name="addTarget" value="yes" />
                <select name="target">
                   <option value="test 1">test 1</option>
                   <option value="test 2">test 2</option>
                </select>
                <a id="btn-apply" href="target.php" data-role="button" data-theme="b">Apply</a>       
                <a href="target.php" data-role="button" data-rel="back" data-theme="c">Cancel</a>  
            </form>
        </div>
    </div>

    <script>
        $(document).undelegate("#targetPage", "pageinit").delegate("#targetPage", "pageinit", function() {
                $('form[name="targetForm"] #bt-addTarget').off('click').on('click', function(e){
                        e.preventDefault();
                        $.mobile.changePage("#addTargetDialog");
                });
        });
    </script>   

</div> 
```

**$.mobile.changePage("#addTargetDialog"); 被调用但失败**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:47:03.873

您的**data-role="dialog"** div 必须与调用它的原始页面处于同一级别：

```
<div data-role="page" id="targetPage">

    <div data-role="content">
        <form action="" method="" name="targetForm">
            <a id="bt-addTarget" data-role="button" data-icon="plus">Add Target</a>
        </form>
    </div><!-- /content -->
</div>

<div id="addTargetDialog"  data-role="dialog">
    <div data-role="header" data-theme="d">
        <h1>Choose a Target</h1>
    </div>
    <div data-role="content" data-theme="c">
        <form action="" method="" name="addTargetForm">
            <input type="hidden" name="addTarget" value="yes" />
            <select name="target">
               <option value="test 1">test 1</option>
               <option value="test 2">test 2</option>
            </select>
            <a id="btn-apply" href="target.php" data-role="button" data-theme="b">Apply</a>       
            <a href="target.php" data-role="button" data-rel="back" data-theme="c">Cancel</a>  
        </form>
    </div>
</div>

<script>
    $(document).undelegate("#targetPage", "pageinit").delegate("#targetPage", "pageinit", function() {
            $('form[name="targetForm"] #bt-addTarget').off('click').on('click', function(e){
                    e.preventDefault();
                    $.mobile.changePage("#addTargetDialog");
            });
    });
</script> 
```

工作示例：http: [//jsfiddle.net/Gajotres/M6Gvz/](http://jsfiddle.net/Gajotres/M6Gvz/)

**编辑 ：**

旧的 html 看起来像这样：

```
<div data-role="page" id="targetPage">
    <div data-role="content">
            ... 
    </div>

    <div id="addTargetDialog"  data-role="dialog">
            ...
    </div><!-- end dialog -->

    <script>
            ...
    </script>   
</div> <!-- end targetPage --> 
```

新的 html 看起来像这样：

```
<div data-role="page" id="targetPage">
    <div data-role="content">
            ... 
    </div>   
</div><!-- end targetPage -->

<div id="addTargetDialog"  data-role="dialog">
        ...
</div><!-- end dialog -->

<script>
        ...
</script> 
```

如果您想知道如何在您的页面中实现这一点。

如果您有多个 html 页面，请执行以下操作：

```
HTML 1

  <div>PAGE 1</div>
  <div>DIALOG 1</div>
  <script>PAGE 1</script>

HTML 2

    <div>PAGE 2</div>

HTML 3

    <div>PAGE 3</div> 
```

如果您有 1 个包含多个页面的 html，请执行以下操作：

```
HTML 1

    <div>PAGE 1</div>
    <div>PAGE 2</div>
    <div>PAGE 3</div>
    <div>PAGE 4</div>
    <div>PAGE 5</div>
    <div>DIALOG 1</div>
    <script>PAGE 1</script> 
```

# jquery - 为什么在此代码中连续显示和隐藏行为错误？

> ID：14400125
> 
> 赞同：2
> 
> 时间：2013-01-18T13:38:08.687
> 
> 标签：jquery

演示：http: [//jsfiddle.net/sunnycpp/fMXyP/5/](http://jsfiddle.net/sunnycpp/fMXyP/5/)

连续显示，隐藏调用会产生错误，动画有时会停止并且不会恢复。这是我的代码中的 jQuery 错误还是错误？

这是从 jsfiddle 复制粘贴的代码。

```
myButtonManual.on("click", function() {
  isVisible = !isVisible;      
  myHero.stop(true,false);      
  if(isVisible) {        
    myHero.show('slow');
    myButtonManual.text("Manual Hide");
  } else {        
    myHero.hide('slow');
    myButtonManual.text("Manual Show");
  } 
```

![在此处输入图像描述](../Images/c4f256d4a39752f1dd112dd2087dfc7e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:57:03.073

那不是错误。

看看这一行：

```
myHero.stop(true,false); 
```

当您将 a 停`.hide()`在它的中间而不跳到动画的末尾时，一个可见的元素将保持[`visible`](http://api.jquery.com/visible-selector/)。

然后，您的逻辑`isVisible = !isVisible`将被破坏，因为`.stop()`ing a`hide()`使元素仍然可见，这意味着对处理程序的下一次调用将在绝对没有效果`.show()`的元素上执行。`visible`

解决方法包括：

*   删除`.stop()`，这将排队`show()`并在`hide()`结束后执行；

*   使用`.stop(true)`- 等价于`.stop(true, true)`-，这样会比较直白，因为它会强制动画在下一个突然开始时结束；

**编辑：**使用and方法重现类似`.toggle()`行为的最接近的方法是在调用之前简单地添加一个，这将确保具有预期的效果：`.show()``.hide()``.css('display', 'none')``.show()``.show()`

```
isVisible = !isVisible;
myHero.stop(true, false);
if (isVisible) {
  myHero.css('display', 'none').show('slow');
} else {
  myHero.hide('slow');
} 
```

[**小提琴**](http://jsfiddle.net/fMXyP/17/)

如果元素已经隐藏，则`.css`将无效；如果元素部分显示，它将隐藏它，以确保`.show()`执行而不是由于正在考虑的元素而被忽略`visible`。

这与 具有相同的效果`.stop(true, false).toggle()`，但可以根据要求使用 2 种不同的`.show()`/`.hide()`方法。

# c# - 流畅的休眠映射

> ID：14400134
> 
> 赞同：0
> 
> 时间：2013-01-18T13:38:49.037
> 
> 标签：c#, fluent-nhibernate-mapping

在我的课堂上，我有一个布尔属性：

```
 public virtual bool IsDefaultPrice
    {
        get;
        set;
    } 
```

我想根据我的数据库表中某些列的值在我的映射中设置该属性的值。

在我的表中，我有两列：price1 和 price2。

我希望如果 price1 = 0 AND price2 = 0，则 IsDefaultPrice = true，否则 IsDefaultPrice = false。

我可以通过我班级的流畅的 nhibernate 映射来实现这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:45:58.350

如果您没有要在数据库上映射的任何内容，那么您只需要创建一个只读属性，该属性根据您的要求返回 true 或 false。

```
public bool IsDefaultPrice
{
    get
    {
         return price1 == 0 && price2 == 0;
    }
} 
```

# regex - perl 如何匹配新行

> ID：14400136
> 
> 赞同：0
> 
> 时间：2013-01-18T13:38:57.703
> 
> 标签：regex, perl

我正在尝试匹配一条看起来像这样的线

```
 (white space)ERROR(some text)(new line)
  (some text) 
```

我尝试过的是这样的正则表达式并且不起作用

```
 if (/\sERROR(.*)(\n.*)/){
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:45:10.853

使用`/s`修饰符：`/\sERROR(.*)(\n.*)/s`. 并小心你的贪婪`(.*)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:46:02.053

`$_`之前打印`if`。

1.  你确定你的字符串以一个*空格*开头吗？如果没有，您需要`\s*`代替`\s`.

2.  嵌入式换行符很少见，你确定你真的有它吗？如果是，您将需要`s`在最后一个`/`.

如果一切都失败[了，请阅读手册](http://perldoc.perl.org/perlre.html)。

# eclipse - Eclipse git插件，标签双击

> ID：14400138
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:01.643
> 
> 标签：eclipse, git, eclipse-plugin

我对 Eclipse 和 git 有点陌生。碰巧双击我最新的 TAG。见屏幕截图。黑/白标记是什么意思，我怎样才能在不损坏我的 TAG 的情况下摆脱它？

谢谢！![在此处输入图像描述](../Images/0f2ba39f7b0ea7c5a004270f6911ea9b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:48:43.587

小黑色标记表示您当前正在检查该分支。

最好的 EGit 教程，[就在这里](http://wiki.eclipse.org/EGit/User_Guide)。

我的建议是你分配一个星期六下午，并仔细按照本教程进行操作。到一天结束时，您将成为 EGit 的专业人士。：） 祝你好运。

# html - 左列固定宽度，右列高度；右列流体宽度

> ID：14400140
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:13.750
> 
> 标签：html, css, multiple-columns

我正在尝试创建一个两列站点，左列是固定宽度，但这是我正在努力解决的高度。高度应该是窗口的高度或右侧柱的高度（以较高者为准）。

使用我当前的解决方案，当右列比浏览器窗口高并且向下滚动时，左列被切掉。

# HTML

```
<div class="side-container">
  <!-- left side -->
  <aside>Left: Fixed width, 100% height of the window or right hand content</aside>
  <!--
  main content -->
  <article>Right: Fluid width</article>
</div> 
```

# CSS

```
.side-container {
  height:100%;
}
.side-container {
  margin: 0;
  padding: 0;
  padding-right: 200px;
  background: rgb(202, 147, 147);
}
aside {
  float: left;
  width: 200px;
  background-color: #e0e0e0;
  height: 100%;
  position: absolute;
  background-color: #e0e0e0;
}
article {
  margin: 0 0 0 200px;
  width: 100%;
  background-color: fuchsia;
  background-color: fuchsia;
} 
```

[小提琴](http://jsfiddle.net/edlea/t3AxY/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:35:00.003

您真正需要的只是在某些地方使用`min-height`而不是：`height`

[http://jsfiddle.net/t3AxY/3/](http://jsfiddle.net/t3AxY/3/)

```
html, body {
    min-height: 100%;
}

.side-container{
    min-height:100%;
    }

.side-container {
    margin: 0;
    padding: 0;
    padding-right: 200px;
    background: rgb(202, 147, 147);
    }

aside{
    float: left;
    width: 200px;
    background-color: #e0e0e0;
    min-height: 100%;
    background-color: #e0e0e0;
    }

article {
    margin: 0 0 0 200px;
    width: 100%;
    background-color: fuchsia;
    } 
```

# c# - 将字符串 [] 转换为数组

> ID：14400142
> 
> 赞同：-6
> 
> 时间：2013-01-18T13:39:16.010
> 
> 标签：c#, arrays, type-conversion

我现在对数据类型有点迷失了。

在我正在构建的应用程序中，我有一个必须运行查询的函数，具体取决于`Array`客户 ID。

必须在特定条件下覆盖数据，并使用由 ID 字符串组成的数组。

问题是`Split()`函数返回 a `string[]`，而我的数据是 a `Array`。我可以将新值分配给`data`，如下所示，但是我不能再访问数据了。

这是因为对于 a `Array`，我必须使用`data.GetValue(i)`，而 a`string[]`只能使用`data[i]`.

精简代码：

```
internal void GetData(Array data) {

    string ids == "123,456,789";

    if(condition){
        data = (Array) ids.Split(',').ToArray(); // Trying to convert it to a Array, can't figure it out...
    }

    // Accessing the data at index `i`
    data.GetValue(i); // Default case, works when the condition is false
    data[i];          //     This only works when the condition is true
} 
```

所以，我的问题是，有没有办法让我将拆分字符串保存到 a`Array`而不是 a `string[]`？

* * *

完整代码：

```
internal M.RequestCustomQueryResultsList GetData(Array data) {
    M.RequestCustomQueryResultsList result = new M.RequestCustomQueryResultsList();
    result.CustomQueryResults = new List<CustomQueryResult>();

    SqlConnection conn = new SqlConnection(connectionString);
    SqlCommand cmd = new SqlCommand();

    conn.Open();
    cmd.CommandType = CommandType.Text;
    cmd.Connection = conn;
    cmd.CommandText = queriesQuery; // StacOverflow: A query to obtain some queries

    SqlDataReader reader = cmd.ExecuteReader();
    while(reader.Read()) {
        // For each query
        SqlConnection conn1 = new SqlConnection(connectionString);
        conn1.Open();

        /* StackOverflow: The real relevant stuff starts here. */

        String query = reader["Query"].ToString(); // Get the current query

        Match match = Regex.Match(query, @"{((?:\w,?)*)}");

        if(match.Success) { // If the query contains "{0}" or "{123,456,789,etc}"
            string m = match.Groups[1].Value; // get the value in the "{}"
            if(!m.Equals("0")){ // If that value isn't "123,456,etc"
                data = m.Split(','); // Split up the id's into an array.
            }
            for(int i = 0; i < data.Length; i++) { // Loop through the data (Works if m.Equals("0"))
                // Execute the query for every company.
                String q = string.Format(query, data.GetValue(i).ToString()); // Fails
                CustomQueryResult c = new CustomQueryResult();

                c.CustNo = int.Parse(data.GetValue(i).ToString());  // Fails

                // Here I set some more values to c, add c  to `result`, and close all loops / etc. 
```

`GetData`是作为`GetCustomQueriesResults`对服务的请求调用的一部分。

```
public T.RequestCustomQueryResultsList GetCustomQueriesResults(Array data) {
    var CustomQueriesResultsList = new S.CustomQueriesResultsList(data);
    return CustomQueriesResultsList.GetData(data);
} 
```

我从 JavaScript 调用服务，如下所示：

```
repo.GetCustomQueriesResults([123,456,789]); 
```

`JSON.stringify(data)`存储库构建一个用作`data`参数的 ajax 请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:41:36.050

A`string[]`已经是 a `Array`（因为从 派生的每个具体数组类型`Array`）-并且`Split`已经给出 a `string[]`，因此您不需要调用`ToArray`结果。

所以这：

```
data = (Array) ids.Split(',').ToArray(); 
```

只能是：

```
data = ids.Split(','); 
```

结果*是*一个数组，所以没有其他工作要做。

请注意，更改 的值*根本不会*`data`更改调用者的数组，如果这是出了问题的话。你应该阅读我[关于参数传递的文章，](http://pobox.com/~skeet/csharp/parameters.html)以了解更多关于这方面的信息。

 *编辑：现在我们可以看到您的代码，我相信问题与数组几乎没有关系。是这样的：

```
String q = string.Format(query, data.GetValue(i).ToString()); // Fails 
```

我*强烈*怀疑您的查询包含类似`{1}`尝试使用不存在的参数进行*格式化的内容。*

验证这一点应该很容易 - 只需将部分分开：

```
String value = data.GetValue(i).ToString();
String q = string.Format(query, value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:57:03.477

`GetValue`在这两种情况下都可以正常工作（请参见下面的 LinqPad 片段）。这是意料之中的，因为`Array`它是所有数组的基类，所以`GetValue`是继承的。你可能在其他地方做错了什么。

```
void Main()
{
    Array myArr = Array.CreateInstance( typeof(String),1);
    myArr.SetValue("a",0);
    GetData(myArr,true); // condition is true, use the split. Outputs "123"
    GetData(myArr,false); // use the array we pass to the method. Outputs "a"   
}

void GetData(Array data, bool condition) {

    string ids = "123,456,789";

    if(condition) 
    {
        data = ids.Split(','); 
    }
    Console.WriteLine(data.GetValue(0)); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:09:48.447

[ArrayType](http://msdn.microsoft.com/en-us/library/system.array.aspx)没有声明任何索引器。这就是为什么您不能在 Array 类型的对象上使用 [] 的原因。

说我无法理解在 Split() 结果上调用索引器的能力来自哪里。

但是你可以更换

```
GetData(Array data) 
```

经过

```
GetData(Object[] data) 
```

这在我的脑海中具有相同的含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:41:54.270

只需分配它：

```
data = ids.Split(','); 
```

你不需要演员表，也不需要`ToArray`.*

# jsf - 如何使用 JSF 标签（可能是 inputHidden）设置具有固定名称的 http 请求参数？

> ID：14400144
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:22.440
> 
> 标签：jsf, el, servlet-filters, http-request-parameters

我正在使用 JSF。当我提交表单时——来自 JSF 标记（如 h:inputText）的数据以某种方式在请求中传递给服务器。我不知道 JSF 如何在请求参数或属性上重写它（我什至不熟悉 http 请求）。我只知道如何使用“el”语言。但是现在我必须在提交请求中添加一个字符串，这是一种允许我在过滤器中读取该字符串的方法。所以我想以某种方式使用JSF标签（可能是inputHidden）来设置具有固定名称（如“MySecretToken”）的http请求参数，然后在过滤器中我可以写：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

HttpServletRequest httpRequest = (HttpServletRequest) request;

if ( isTokenValid( httpRequest.getParameter("MySecretToken") ))
     doThis(...);
else
     doThat(...);

     chain.doFilter(request, response);
} 
```

所以问题是“如何使用JSF标签（可能是inputHidden）来设置具有固定名称的http请求参数？”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:04:07.573

Easiest way is to use the [`<f:param>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/param.html) in `<h:commandXxx>` component. It basically adds a HTTP request parameter with exactly the specified name and value.

```
<h:commandButton ...>
    <f:param name="MySecretToken" value="#{bean.mySecretToken}" />
</h:commandButton> 
```

A more JSF-ish way would be to create a custom component for the job. E.g. `<my:token />`. You could even create a custom component event listener which automagically adds this custom component to the form everytime.

# sql - sql 选择一列 if

> ID：14400145
> 
> 赞同：1
> 
> 时间：2013-01-18T13:39:23.883
> 
> 标签：sql

在 SQL 中，只有当它符合我的条件时才可以选择一列？

```
IF p.Amount != 0.0 
    { select p.Amount from Price p } 
```

这是一个更大的 SQL 的一部分，如果值超过 0.0，将用于过滤列不显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:42:15.587

SQL 标准用于选择行，而不是列。我通常发现总是为特定查询选择相同的列，然后选择是否使用视图逻辑显示它们会使生活变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:42:21.420

您需要使用该`CASE`语句。[Transact-SQL - 案例](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
USE AdventureWorks2012;
GO
SELECT   ProductNumber, Category =
      CASE ProductLine
         WHEN 'R' THEN 'Road'
         WHEN 'M' THEN 'Mountain'
         WHEN 'T' THEN 'Touring'
         WHEN 'S' THEN 'Other sale items'
         ELSE 'Not for sale'
      END,
   Name
FROM Production.Product
ORDER BY ProductNumber;
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:51:56.110

你想让它根本不可见吗？或者只是在其中显示一些其他预定义的值？因为如果您希望该列根本不出现，但仅在某些情况下，这是无法做到的。但是，您可以在列中返回不同的结果，如果它对您来说足够的话。在以下情况下使用案例：

```
SELECT 
  CASE WHEN p.amount< 700 THEN p.amount
ELSE 0
END
FROM Price p; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:51:14.607

如果只想显示大于 0.0 的值，可以使用`where`子句：

```
select p.amount
from t
where p.amount > 0 
```

如果要显示非正值，其余部分为空白（NULL），请执行以下操作：

```
select (case when p.amount > 0 then p.amount end)
from t 
```

如果您只希望在*所有*值都大于零时返回行，那么这是一种方法：

```
select p.amount
from (select t.*,
             sum(case when p.amount > 0 then 1 else 0 end) over () as Pgt0
             count(*) over () as cnt
      from t
     ) t
where Pgt0 = cnt 
```

如果你真的想在所有值都相同的情况下删除列，那么你需要一个更复杂的表达式。SQL SELECT 查询定义列并且没有动态可配置的列。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T13:50:21.820

您可以在 SQL Server 中使用 IFF 函数：

```
SELECT IIF(p.Amount != 0.0 ) as amount

FROM price p 
```

# jquery-ui - 设置可拖动 div 的限制

> ID：14400146
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:24.363
> 
> 标签：jquery-ui, jquery-draggable

我有一个 Div，它在单击另一个（TableDiv）Div 的表格单元格时显示。我需要设置边界（限制）取决于 TableDiv 的宽度和高度。我的 Draggable 在 TableDiv 的外面。

```
<div class="TableDiv">
<table>
</table>
</div>
<div id="draggingDiv">
</div> 
```

我的 Jquery 代码如下

```
 $("#draggingDiv").draggable({reset:true}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:37:47.970

这显然是css定位的问题。如果你分享你的 div 的 CSS 样式，那就太好了。

但据我说，将其添加到您的样式表中可以解决问题

```
position:absolute;
width : 100%;
height : 100%; 
```

% Sizing 将 div 固定为其父 div 的 100%。同样的事情也适用于可拖动元素。

# magento - Magento 1.7 - Web 应用程序外部脚本中的 getModel 失败

> ID：14400150
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:34.443
> 
> 标签：magento, magento-1.7

```
<global>
    <models>
        <starmall_shipment>
            <class>Starmall_Shipment_Model</class>
            <resourceModel>starmall_shipment_mysql4</resourceModel>
        </starmall_shipment>

        <starmall_shipment_mysql4>
            <class>Starmall_Shipment_Model_Mysql4</class>
            <entities>
                <shipment>
                    <table>starmall_shipment</table>
                </shipment>             
            </entities>
        </starmall_shipment_mysql4>
    </models>
</global> 
```

我在后端的自定义网格正在工作，我看到了其中包含数据的网格。
作为调试测试，我在 Grid.php 中`_prepareCollection`：

```
 $x = Mage::getModel('starmall_shipment/shipment');
    $x->load(3);

    var_dump($x);  // WORKS and I get information 
```

当我在独立脚本中运行它时：

```
<?php
    define("MAGE_BASE_DIR", "/home/users/xxx/xxx");
    require_once MAGE_BASE_DIR . '/app/Mage.php';
    Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

    $x = Mage::getModel('starmall_shipment/shipment');
        $x->load(3);

    var_dump($x);   
?> 
```

我看到这个错误：

```
No such file or directory  in /home/users/xxx/xxx/lib/Varien/Autoload.php
Failed opening 'Mage/Starmall/Shipment/Model/Shipment.php' 
```

为什么要`Mage`放在模型前面？我的配置有什么问题？

* * *

**附加信息：**

/app/etc/Starmall_Shipment.xml

```
<config>
<modules>
    <Starmall_Shipment>
        <active>true</active>
        <codePool>local</codePool>
    </Starmall_Shipment>
</modules> 
```

* * *

**真正的问题（可能）**

我的 Magento 托管服务提供商`/app/etc/local.xml`在安装 Magento 时将此标签设置为默认 int。

```
<cache>
  <backend>memcached</backend>
  <memcached>
    <servers>
      <server>
        <host>unix:///path/to/memcached.sock</host>
        <persistent>0</persistent>
        <port>0</port>
      </server>
    </servers>
  </memcached>
</cache> 
```

如果我注释掉这个标签，那么我不需要`loadModules()`在我的脚本中使用。
我想知道在进入生产模式时是否需要重新打开它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:46:23.797

看看 Magento cron 是如何工作的 - 它也可以作为独立脚本 (cron.php) 工作，并将代码复制粘贴到您的自定义模块。主要内容：

```
 require 'app/Mage.php';
 ...
 Mage::getConfig()->init() 
```

此外，似乎未加载模块尝试在初始化配置后添加：

```
Mage::getConfig()->loadModules(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:04:06.673

> 为什么要在模型前面加上法师？我的配置有什么问题？

要查看发生这种情况的位置，请查看`Mage_Core_Model_Config::getGroupedClassName()`：

```
 if (empty($className)) {
        if (!empty($config)) {
            $className = $config->getClassName();
        }
        if (empty($className)) {
            $className = 'mage_'.$group.'_'.$groupType;
        }
        if (!empty($class)) {
            $className .= '_'.$class;
        }
        $className = uc_words($className);
    } 
```

这可能意味着以下两件事之一：

1.  未`$config`找到节点 ( `global/models/starmall_shipment`)
2.  节点没有`class`或`model`子节点或为空

在您的情况下，它看起来像（1），所以问题仍然存在，为什么您的配置没有加载。你保证配置本身是正确的，所以问题一定是模块没有加载。

你可以发布你的模块声明文件`app/etc/modules`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:47:15.703

它在 Mage 之前，因为它是核心目录之一。在我的服务器中，我将 /var/www/app/code/core/Mage/ 视为可导航路径。

将您的独立脚本放在您的法师基础目录中，并在“开始”处使用以下代码

```
<?php
   require_once 'app/Mage.php';
   Mage::app('admin'); 
```

希望这足以让您的 magento 启动并运行，然后您可以弄清楚为什么路径没有按您期望的方式工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:15:54.060

检查您的商店是否启用了编译模式（系统->工具->编译）。如果是，则重新运行编译过程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T16:47:02.073

您应该在`<global>`标签下定义`config.xml`您的模型

```
<global>    
    <models>
        <starmall_shipment>
            <class>Starmall_Shipment_Model</class>
            <resourceModel>starmall_shipment_mysql4</resourceModel>
        </starmall_shipment>

        <starmall_shipment_mysql4>
            <class>Starmall_Shipment_Model_Mysql4</class>
            <entities>
                <shipment>
                    <table>starmall_shipment</table>
                </shipment>             
            </entities>
        </starmall_shipment_mysql4>
    </models>
</global> 
```

因为您是从模块外部访问 if 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-21T11:12:11.357

问题确实在`app/etc/local.xml`，但不应该通过调用来解决`Mage::app()->loadModules()`。

真正的问题是有人（很可能出于调试目的）禁用了本地模块。

只是改变

```
<disable_local_modules>true</disable_local_modules> 
```

到

```
<disable_local_modules>false</disable_local_modules> 
```

在`app/etc/local.xml`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-24T09:05:48.207

CarComp 是写入，在添加 Mage::app('admin'); 之后
Mage::getConfig()->init() 的工作就像一个魅力。

# templates - 模板错误：未定义的引用

> ID：14400157
> 
> 赞同：0
> 
> 时间：2013-01-18T13:39:45.670
> 
> 标签：templates, linked-list

我正在尝试使用模板创建一个类linkedList，但是当我编译它时，IDE 给出了一个错误： undefined reference to `listType::add(int) 我不明白为什么？

链接列表.h

```
#ifndef LINKEDLISTS_H_INCLUDED
#define LINKEDLISTS_H_INCLUDED
#include "struct.h"
template <class type1>

class listType
{
public:

void add(type1);
void print();
private:
node<type1> *head;
};

#endif // LINKEDLISTS_H_INCLUDED 
```

* * *

链表.cpp

```
#include "linkedLists.h"
#include "struct.h"
#include <iostream>
using namespace std;

template <class type1>
void listType<type1>::add(type1 temp)
{
node<type1> *t;
t->value=temp;
t->link=head;
head=t;
}
template <class type1>
void listType<type1>::print()
{
node<type1> *p;
p=head;
while(p!=NULL)
{

    cout<<p->value<<endl;
    p=p->link;
}

} 
```

* * *

结构体.h

```
#ifndef STRUCT_H_INCLUDED
#define STRUCT_H_INCLUDED
template <class type1>

struct node
{

type1 value;
node *link;
};

#endif // STRUCT_H_INCLUDED 
```

* * *

主文件

```
#include <iostream>
#include "linkedLists.h"
using namespace std;

int main()
{
listType <int> test;
test.add(5);

} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:42:08.957

您不能在 cpp 文件中实现模板化的类和函数。

代码必须在标头中，以便包含文件可以看到实现，并使用其模板参数类型实例化正确的版本。

# drupal - 查看 + 分组依据 + 分类 + 一级

> ID：14400168
> 
> 赞同：2
> 
> 时间：2013-01-18T13:40:32.640
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我使用drupal 7.18。我使用术语引用字段“位置”创建了一个内容类型“公司”。分类“位置”有两个级别“大陆”和“国家”。我列出了按“大陆”（分类法“位置”的顶层）分组的所有“公司”节点。

我质疑视图模块中是否有此选项，或者我应该更改查询？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:59:04.503

是的，您实际上*可以*在没有任何自定义编码的情况下使用视图来做到这一点。

**方案 1**

如果在标记公司节点时同时使用大陆和国家/地区术语标记它们，那将是最简单的。如果是这种情况，您只需将术语添加到视图的字段列表中，然后按该字段进行分组。
将**术语添加为字段**后，单击视图格式旁边的“设置”链接。在那里，您将看到添加到视图中的任何字段的“分组依据”选项。然后可能会重复显示大陆，因此您可以选择将其排除在显示之外。

**方案 2**

您也可以选择国家标签（子术语）而不选择国家节点中的大陆术语（父）。如果是这种情况，您将无法将大陆添加为字段，然后按其分组（因为没有为节点选择它，所以它不是该节点的字段）。在这种情况下，您需要首先将两个关系添加到您的视图中（关系添加到视图的“高级”部分）**才能到达父项**。

*   添加“内容：位置”作为您的第一个关系（如果您只想列出在您的视图中带有此标记的公司，您可以检查它是否应该是必需的）。

*   接下来添加关系“分类术语：父术语”，并确保在设置时使用“内容：位置”关系。这将自动拉出标记位置的父项。

*   接下来在您的字段列表中添加“术语：名称”字段，并在顶部选择使用您之前设置的“父术语”关系。

*   最后，既然您已经在视图中打印出父术语，您可以按照我之前描述的相同方式对其进行分组——通过单击格式旁边的“设置”并选择此字段作为您应该分组的字段.

我希望我清楚地解释了这一点。让我们知道它是否适合您或您有任何疑问！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-19T10:15:10.823

您将不得不在[视图](http://drupal.org/project/views)模块的帮助下完成它。没有人会告诉你制作系统的确切步骤，你将不得不使用这个伟大的工具。

# python - Pybrain多维数据输入

> ID：14400169
> 
> 赞同：1
> 
> 时间：2013-01-18T13:40:34.187
> 
> 标签：python, neural-network, pybrain

我有一些数据，每条记录的**维度**为**8x128**。我想为这些数据训练一个神经网络。

有没有人有任何使用**多维**数据作为 Pybrain 神经网络输入的例子？我搜索了文档，发现只有一维输入示例。[在此处输入链接描述](http://pybrain.org/docs/tutorial/netmodcon.html#netmodcon)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:45:45.397

神经网络不关心输入数据的维度，只需将其序列化（reshape([1024])）并将其作为输入提供。

# c# - 向用户发送文件后网站停止响应

> ID：14400170
> 
> 赞同：1
> 
> 时间：2013-01-18T13:40:37.197
> 
> 标签：c#, asp.net, events

我用 C# 创建了一个可以下载文件的站点。打电话后

```
//A webservice returning a stream with the document data.
Stream checkOut = FileProxy.RetrieveDocument(Ticket, ID);

HttpContext.Current.Response.Clear();
HttpContext.Current.Response.Buffer = true;
HttpContext.Current.Response.BufferOutput = true;
HttpContext.Current.Response.ContentType = "application/x-download";
HttpContext.Current.Response.AddHeader("Content-Disposition", "atachment; filename=" + filenamevariable);
HttpContext.Current.Response.CacheControl = "public";

byte[] buffer = new byte[255];
int butesRead = 0;
while ((bytesread = checkOut.Read(buffer, 0, 255)) > 0)
{
    if(HttpContext.Current.REsponse.IsClientConnected)
    {
        HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length);
        HttpContext.Current.Response.Flush();
    }
}
Httpcontext.Current.Response.Close();
checkOut.Close(); 
```

运行此代码成功下载文档，但我无法继续使用该站点（按钮不再工作）。下载完成后我忘记了什么吗？

# jquery - Bootstrap：弹出框在 2.2.2 版中是否损坏？

> ID：14400173
> 
> 赞同：1
> 
> 时间：2013-01-18T13:40:48.283
> 
> 标签：jquery, twitter-bootstrap

我已经更新到最新的 2.2.2 版本的引导程序，似乎手动触发弹出框被破坏了：

这是[小提琴](http://jsfiddle.net/houmie/XRSFr/26/)来证明它。

单击该按钮后，检查您的控制台，它显示：

```
TypeError: e is undefined 
```

在引导行 1010 中：

```
toggle: function (e) {
  var self = $(e.currentTarget)[this.type](this._options).data(this.type)
  self[self.tip().hasClass('in') ? 'hide' : 'show']()
} 
```

似乎`e`是未定义的。

其他人可以证实这一点吗？然后我可以提交一个错误。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:37:28.973

我提交了错误。它将在下一个版本 2.3.0 中修复

[https://github.com/twitter/bootstrap/issues/6628#issuecomment-12425043](https://github.com/twitter/bootstrap/issues/6628#issuecomment-12425043)

# java - 从 jar 文件运行特定的类主函数。导入似乎不起作用

> ID：14400176
> 
> 赞同：4
> 
> 时间：2013-01-18T13:40:58.910
> 
> 标签：java, import, jar

我有一个 jar 文件，但清单中没有指定它的主类。所以我按照这里给出的答案：

[如何从 Jar 运行一个不在其 Manifest 文件中的 Main-Class 的类](https://stackoverflow.com/questions/5474666/how-to-run-a-class-from-jar-which-is-not-the-main-class-in-its-manifest-file)

它似乎试图从这个类中运行 main 。但是，由于某种原因，从这个 jar 文件中导入其他一些类似乎被破坏了。

这是我的问题的最小化版本：

```
jar tf test.jar 
```

给出：

```
META-INF/
META-INF/MANIFEST.MF
ClassIWantToRun.class
something/
something/something/
something/something/something/ClassA.class 
```

用 jd-gui 查看的 ClassIWantToRun.class 的来源似乎是：

```
import something.something.something.ClassA;

public class ClassIWantToRun
{
    public static void main(String[] args)
    {
        int x = ClassA.comeMethod();
    }
} 
```

运行这个：

```
java -cp test.jar ClassIWantToRun 
```

给我一个例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/ibm/OS4690/FlexosException
    at ClassIWantToRun.main(ClassIWantToRun.java:7)
Caused by: java.lang.ClassNotFoundException: com.ibm.OS4690.FlexosException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 1 more 
```

我只知道 Java 的基础知识，但似乎即使使用以下行也找不到 ClassA： import something.something.something.ClassA 我怎样才能让它运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:50:02.963

该异常表明您需要将一些其他 JAR 添加到类路径中。test.jar 中的类依赖于其他类。例如在 com.ibm.OS4690.FlexosException 上。

您可以尝试搜索另一个 JAR 文件（在您获取 test.jar 的同一位置），以便它包含 FlexosException.class 文件。找到它后，将 test.jar 运行为

```
java -cp test.jar;<path_to_another_jar_here> ClassIWantToRun 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T14:00:53.713

您将无法在 OS4690 环境之外运行您的程序，因为您依赖于内部 OS4690 库。如果您可以访问 OS4690 安装，您可能会找到所需的 jar，但最后这些 jar 使用平台相关库。如果您不是为该特定平台开发，请尽量避免使用这些依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:50:16.490

```
java -cp test.jar ClassIWantToRun 
```

正在导入包含您要运行的类的 JAR。您还应该在类路径中导入包含 ClassA 的 JAR。

在你的情况下，我猜它是包含`com/ibm/OS4690/FlexosException`需要在你的类路径上的 JAR

# perl - Perl：如何一次删除空格和空行

> ID：14400177
> 
> 赞同：1
> 
> 时间：2013-01-18T13:40:59.007
> 
> 标签：perl

我有 2 个 perl 脚本，第一个从文件中删除空白 lins，第二个删除文件中的所有空格。我想知道，是否可以在 1 个脚本中连接这两个正则表达式？

* * *

对于空格，我使用了这个 regsub：`$str =~ tr/ //d;` 对于空白行，我使用了这个 regexp

```
while (<$file>) {
    if (/\S/){
    print $new_file $_; }} 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:47:52.240

这应该很容易：只需`tr/ //d`在 if 行之前添加。

注意：它也会删除仅包含空格的行。如果要保留它们（但音译为空行），请在打印行之前插入音译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T07:49:41.747

如果您希望修剪包含空格的行的末尾，您可能希望它像这样工作：

```
perl -pi -e 's/\s*$/\n/' f1 f2 f3   #UNIX file format
perl -pi -e 's/\s*$/\r\n/' f1 f2 f3   #DOS file format 
```

# mysql - 来自数据库的 iOS 多语言

> ID：14400179
> 
> 赞同：1
> 
> 时间：2013-01-18T13:41:06.503
> 
> 标签：mysql, objective-c, multilingual

一年前，我用荷兰语创建了一个应用程序。现在我想让这个应用程序多语言。我读到 xcode 具有本地化字符串，但我的所有文本都是从外部位置的 MySQL 数据库下载的，因此没有本地文本。我需要从头开始创建它吗？我的想法是阅读用户的首选语言设置。然后指向数据库中的正确表。这是从数据库支持多语言应用程序的最佳方式吗？

顺便说一句，当前方法只是使用 php 和 json 从 MySQL 下载所需的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:15:37.927

您只需要在需要将文本存储为应用程序一部分的情况下重新创建应用程序。无论您从数据库中加载什么，都不应该成为问题。但是 Cocoa（不是 Xcode）的本地化方案规定要本地化的文本作为应用程序的一部分存储。

说了这么多，你是做什么的？首先阅读[Apple 自己](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html#//apple_ref/doc/uid/20000005)关于该主题的文档。其中还有一个链接，[为本地化准备 Nib 文件](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/LocalizingInterfaces.html#//apple_ref/doc/uid/20002138-BBCBFFDF)，您也应该阅读该链接。

您需要为`Localizable.strings`您希望支持的每种语言创建一个文件。这些文件中的每一个都包含文档中描述的键/值对。键是一个可以是任意值的字符串，但它必须在所有`Localizable.strings`文件中保持一致。该值是以给定语言为该文件呈现的字符串。

想想为什么要从数据库中加载文本。这可能是因为*其中一些*需要更新，但肯定不是全部。

向您致以最良好的祝愿。

# dialog - 如何将参数传递给 HTML Web 资源？

> ID：14400180
> 
> 赞同：0
> 
> 时间：2013-01-18T13:41:19.637
> 
> 标签：dialog, dynamics-crm-2011, webresource

我创建了一个 HTML Web 资源。单击某个功能区按钮后，它会在模式对话框中打开。功能区按钮的配置如下图所示。

![在此处输入图像描述](../Images/758d1b0e5ee7eb8c02b5962e058851e0.png)

现在，在将其导入并在 CRM 中发布后，我收到一个错误：

![在此处输入图像描述](../Images/bb8fe61e53225a6b886880a7a8194a1e.png)

我在这里错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:55:28.930

才发现哪里有问题。在功能区配置中，我需要将 CRM 参数名称设置为**Data**而不是 PlayersIDs

# objective-c - 邮件编写器在 Xcode 中出现错误

> ID：14400184
> 
> 赞同：2
> 
> 时间：2013-01-18T13:41:32.157
> 
> 标签：objective-c, xcode, email

我正在尝试使用 iOS 应用程序发送邮件。

这是方法：

```
 MFMailComposeViewController  *picker = [[MFMailComposeViewController  alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Reclutamento pompieri"];

    // Set up the recipients.
    NSArray *toRecipients = [NSArray arrayWithObjects:@"test@gmail.com",nil];

    [picker setToRecipients:toRecipients];

    testoMail = [NSMutableString stringWithFormat: @"This is a test"];

    [picker setMessageBody:testoMail isHTML:YES]; //HTML!!!!!!

        [self presentViewController:picker animated:YES completion:nil];

//*******************************************************************************************

     // The mail compose view controller delegate method
            - (void)mailComposeController:(MFMailComposeViewController *)controller //**ERROR STAYS HERE**
            didFinishWithResult:(MFMailComposeResult)result
            error:(NSError *)error
            {
                [self dismissModalViewControllerAnimated:YES]

; 
```

但是调试器说“*使用了未声明的标识符”mailComposerController* “

我不明白这是什么意思。你能帮助我吗？

非常喜欢你

PS。标题是：

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface Reclutamento : UIViewController <MFMailComposeViewControllerDelegate>
{

}

- (void)sendMail;

@end 
```

完整的 .h 代码是

```
//
//  Reclutamento.h
//  Pompieri
//
//  Created by Reda Bousbah on 15.01.13.
//  Copyright (c) 2013 Reda Bousbah. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h>

@interface Reclutamento : UIViewController <MFMailComposeViewControllerDelegate>
{
    UITextField *nameTextField;
    UITextField *surnameTextField;
    UITextField *bornDateTextField;
    UITextField *addressTextField;
    UITextField *zipTextField;
    UITextField *emailTextField;

    MFMailComposeViewController *email;
}

@property (nonatomic, retain) MFMailComposeViewController *email;

@property(nonatomic,retain) IBOutlet UITextField *nameTextField;
@property(nonatomic,retain) IBOutlet UITextField *surnameTextField;
@property(nonatomic,retain) IBOutlet UITextField *bornDateTextField;
@property(nonatomic,retain) IBOutlet UITextField *addressTextField;
@property(nonatomic,retain) IBOutlet UITextField *zipTextField;
@property(nonatomic,retain) IBOutlet UITextField *emailTextField;

@property NSString *name;
@property NSString *surname;
@property NSString *bornDate;
@property NSString *address;
@property NSString *zipCode;
@property NSString *miaEmail;

- (IBAction)checkData:(id)sender;
- (IBAction)backgroundTap:(id)sender;
- (IBAction)doneButtonPressed:(id)sender;

- (void)sendMail;

@end 
```

并且实现文件是

```
//
//  Reclutamento.m
//  Pompieri
//
//  Created by Reda Bousbah on 15.01.13.
//  Copyright (c) 2013 Reda Bousbah. All rights reserved.
//

#import "Reclutamento.h"
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h>

@interface Reclutamento ()

@end

@implementation Reclutamento

@synthesize nameTextField, surnameTextField, bornDateTextField, addressTextField, zipTextField, emailTextField;
@synthesize name, surname, bornDate, address, zipCode, miaEmail;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    nameTextField.text = nil;
    surnameTextField.text = nil;
    bornDateTextField.text = nil;
    addressTextField.text = nil;
    zipTextField.text = nil;
    emailTextField.text = nil;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

#pragma - getting info from the UI

//NSString *test = nil;

- (IBAction)checkData:(id)sender
{
    /*
    name = nameTextField.text;
    surname = surnameTextField.text;
    bornDate = bornDateTextField.text;
    address = addressTextField.text;
    zipCode = zipTextField.text;
    email = emailTextField.text;
    */

    //NSLog(@" Nome: %@ \n Cognome: %@ \n Data di nascita: %@ \n Indirizzo: %@ \n Zip: %@ \n email: %@ \n", name, surname, bornDate, address, zipCode, email);

    unsigned int x,a = 0;
    NSMutableString *messaggioErrore; //stringa variabile
    messaggioErrore = [NSMutableString stringWithFormat: @""]; //le stringhe mutabili vanno inizializzate in questo modo!

    for (x=0; x<6; x++)
    {
        switch (x) {
            case 0:
                if (nameTextField.text == nil) {
                    [messaggioErrore appendString:@"Nome, "];
                    a=1;

                }
                break;

            case 1:
                if (surnameTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Cognome, "];
                    a=1;
                }
                break;

            case 2:
                if (bornDateTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Data di nascita, "];
                    a=1;
                }
                break;

            case 3:
                if (addressTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Indirizzo, "];
                    a=1;
                }
                break;

            case 4:
                if (zipTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Zip Code, "];
                    a=1;
                }
                break;

            case 5:
                if (emailTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Email, "];
                    a=1;
                }
                break;

            default:
                break;
        }

    }

    NSLog (@"Messaggio errore: %@", messaggioErrore);

     if (a == 1) {

         NSMutableString  *popupErrore;
         popupErrore = [NSMutableString stringWithFormat: @"Per inviare compilare i seguenti campi:  "];

         [popupErrore appendString:messaggioErrore]; //aggiungo i miei errori
         [popupErrore appendString: @" grazie della comprensione."]; //

         NSLog(@"%@", popupErrore);

        UIAlertView *chiamataEffettuata = [[UIAlertView alloc]
                                           initWithTitle:@"ATTENZIONE" //titolo del mio foglio
                                           message:popupErrore
                                           delegate:self
                                           cancelButtonTitle:@"Ok, correggo" //bottone con cui si chiude il messaggio
                                           otherButtonTitles:nil, nil];
        [chiamataEffettuata show]; //istanza per mostrare effettivamente il messaggio
     }

    else
    {
        name = nameTextField.text;
        surname = surnameTextField.text;
        bornDate = bornDateTextField.text;
        address = addressTextField.text;
        zipCode = zipTextField.text;
        email = emailTextField.text;

        NSMutableString *datiUtente;
        datiUtente = [NSMutableString stringWithFormat: @"<br><br> <b>Nome:</b> %@ <br> <b>Cognome:</b> %@ <br> <b>Data di nascita:</b> %@ <br> <b>Indirizzo:</b> %@ <br> <b>Zip:</b> %@ <br> <b>Email:</b> %@ <br>", name, surname, bornDate, address, zipCode, miaEmail];

        NSLog(@"Dati utente: %@", datiUtente);

        NSMutableString *testoMail;
        testoMail = [NSMutableString stringWithFormat: @"Salve, questa mail è stata generata automaticamente dalla applicazione per iPhone ''<b>Pompieri Locarno</b>'' <br> i dati relativi all'utente sono: %@", datiUtente];

        NSLog(@"%@", testoMail);

        //MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
        MFMailComposeViewController  *picker = [[MFMailComposeViewController  alloc] init];
        picker.mailComposeDelegate = self;

        [picker setSubject:@"Reclutamento pompieri"];

        // Set up the recipients.
        NSArray *toRecipients = [NSArray arrayWithObjects:@"youporn@gmail.com",nil];

        //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com",@"third@example.com", nil];
        //NSArray *bccRecipients = [NSArray arrayWithObjects:@"four@example.com",nil];

        [picker setToRecipients:toRecipients];
        //[picker setCcRecipients:ccRecipients];
        //[picker setBccRecipients:bccRecipients];

        // Attach an image to the email.
        //NSString *path = [[NSBundle mainBundle] pathForResource:@"ipodnano" ofType:@"png"];
        //NSData *myData = [NSData dataWithContentsOfFile:path];
        //[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"ipodnano"];

        // Fill out the email body text.
        //NSMutableString *emailBody;
        testoMail = [NSMutableString stringWithFormat: @"%@", testoMail];

        [picker setMessageBody:testoMail isHTML:YES]; //HTML!!!!!!

        // Present the mail composition interface.
        [self presentViewController:picker animated:YES completion:nil];

        // The mail compose view controller delegate method
        - (void)mailComposeController:(MFMailComposeViewController *)controller
        didFinishWithResult:(MFMailComposeResult)result
        error:(NSError *)error
        {
            [self dismissModalViewControllerAnimated:YES];
        }
    }
}

#pragma mark - Mandare email
/*
- (void)sendMail:(NSMutableString*)testoMail{

    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Reclutamento pompieri"];

    // Set up the recipients.
    NSArray *toRecipients = [NSArray arrayWithObjects:@"reda.bousbah@gmail.com",nil];
    //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com",@"third@example.com", nil];
    //NSArray *bccRecipients = [NSArray arrayWithObjects:@"four@example.com",nil];

    [picker setToRecipients:toRecipients];
    //[picker setCcRecipients:ccRecipients];
    //[picker setBccRecipients:bccRecipients];

    // Attach an image to the email.
    //NSString *path = [[NSBundle mainBundle] pathForResource:@"ipodnano" ofType:@"png"];
    //NSData *myData = [NSData dataWithContentsOfFile:path];
    //[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"ipodnano"];

    // Fill out the email body text.
    NSString *emailBody = @"It is raining in sunny California!";
    [picker setMessageBody:emailBody isHTML:NO];

    // Present the mail composition interface.
    [self presentViewController:picker animated:YES completion:nil];

}
*/

#pragma mark - methods to control the keyboard

- (IBAction)backgroundTap:(id)sender //method for resign the keyboard when the background is tapped
{
    [nameTextField resignFirstResponder];
    [surnameTextField resignFirstResponder];
    [bornDateTextField resignFirstResponder];
    [addressTextField resignFirstResponder];
    [zipTextField resignFirstResponder];
    [emailTextField resignFirstResponder];

}

- (IBAction)doneButtonPressed:(id)sender
{
    NSLog( @"done button pressed");
    [sender resignFirstResponder];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:54:28.107

看来您已经`- (void)mailComposeController:(MFMailComposeViewController *)controller`在方法内部定义了。
请在方法之外定义它。

* * *

**编辑**

正如我所说，将定义移出方法。这是您完全正确的 .m 文件

```
//
//  Reclutamento.m
//  Pompieri
//
//  Created by Reda Bousbah on 15.01.13.
//  Copyright (c) 2013 Reda Bousbah. All rights reserved.
//

#import "Reclutamento.h"
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h>

@interface Reclutamento ()

@end

@implementation Reclutamento

@synthesize nameTextField, surnameTextField, bornDateTextField, addressTextField, zipTextField, emailTextField;
@synthesize name, surname, bornDate, address, zipCode, miaEmail;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    nameTextField.text = nil;
    surnameTextField.text = nil;
    bornDateTextField.text = nil;
    addressTextField.text = nil;
    zipTextField.text = nil;
    emailTextField.text = nil;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

#pragma - getting info from the UI

//NSString *test = nil;

- (IBAction)checkData:(id)sender
{
    /*
     name = nameTextField.text;
     surname = surnameTextField.text;
     bornDate = bornDateTextField.text;
     address = addressTextField.text;
     zipCode = zipTextField.text;
     email = emailTextField.text;
     */

    //NSLog(@" Nome: %@ \n Cognome: %@ \n Data di nascita: %@ \n Indirizzo: %@ \n Zip: %@ \n email: %@ \n", name, surname, bornDate, address, zipCode, email);

    unsigned int x,a = 0;
    NSMutableString *messaggioErrore; //stringa variabile
    messaggioErrore = [NSMutableString stringWithFormat: @""]; //le stringhe mutabili vanno inizializzate in questo modo!

    for (x=0; x<6; x++)
    {
        switch (x) {
            case 0:
                if (nameTextField.text == nil) {
                    [messaggioErrore appendString:@"Nome, "];
                    a=1;

                }
                break;

            case 1:
                if (surnameTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Cognome, "];
                    a=1;
                }
                break;

            case 2:
                if (bornDateTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Data di nascita, "];
                    a=1;
                }
                break;

            case 3:
                if (addressTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Indirizzo, "];
                    a=1;
                }
                break;

            case 4:
                if (zipTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Zip Code, "];
                    a=1;
                }
                break;

            case 5:
                if (emailTextField.text == nil)
                {
                    [messaggioErrore appendString:@"Email, "];
                    a=1;
                }
                break;

            default:
                break;
        }

    }

    NSLog (@"Messaggio errore: %@", messaggioErrore);

    if (a == 1) {

        NSMutableString  *popupErrore;
        popupErrore = [NSMutableString stringWithFormat: @"Per inviare compilare i seguenti campi:  "];

        [popupErrore appendString:messaggioErrore]; //aggiungo i miei errori
        [popupErrore appendString: @" grazie della comprensione."]; //

        NSLog(@"%@", popupErrore);

        UIAlertView *chiamataEffettuata = [[UIAlertView alloc]
                                           initWithTitle:@"ATTENZIONE" //titolo del mio foglio
                                           message:popupErrore
                                           delegate:self
                                           cancelButtonTitle:@"Ok, correggo" //bottone con cui si chiude il messaggio
                                           otherButtonTitles:nil, nil];
        [chiamataEffettuata show]; //istanza per mostrare effettivamente il messaggio
    }

    else
    {
        name = nameTextField.text;
        surname = surnameTextField.text;
        bornDate = bornDateTextField.text;
        address = addressTextField.text;
        zipCode = zipTextField.text;
        email = emailTextField.text;

        NSMutableString *datiUtente;
        datiUtente = [NSMutableString stringWithFormat: @"<br><br> <b>Nome:</b> %@ <br> <b>Cognome:</b> %@ <br> <b>Data di nascita:</b> %@ <br> <b>Indirizzo:</b> %@ <br> <b>Zip:</b> %@ <br> <b>Email:</b> %@ <br>", name, surname, bornDate, address, zipCode, miaEmail];

        NSLog(@"Dati utente: %@", datiUtente);

        NSMutableString *testoMail;
        testoMail = [NSMutableString stringWithFormat: @"Salve, questa mail è stata generata automaticamente dalla applicazione per iPhone ''<b>Pompieri Locarno</b>'' <br> i dati relativi all'utente sono: %@", datiUtente];

        NSLog(@"%@", testoMail);

        //MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
        MFMailComposeViewController  *picker = [[MFMailComposeViewController  alloc] init];
        picker.mailComposeDelegate = self;

        [picker setSubject:@"Reclutamento pompieri"];

        // Set up the recipients.
        NSArray *toRecipients = [NSArray arrayWithObjects:@"youporn@gmail.com",nil];

        //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com",@"third@example.com", nil];
        //NSArray *bccRecipients = [NSArray arrayWithObjects:@"four@example.com",nil];

        [picker setToRecipients:toRecipients];
        //[picker setCcRecipients:ccRecipients];
        //[picker setBccRecipients:bccRecipients];

        // Attach an image to the email.
        //NSString *path = [[NSBundle mainBundle] pathForResource:@"ipodnano" ofType:@"png"];
        //NSData *myData = [NSData dataWithContentsOfFile:path];
        //[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"ipodnano"];

        // Fill out the email body text.
        //NSMutableString *emailBody;
        testoMail = [NSMutableString stringWithFormat: @"%@", testoMail];

        [picker setMessageBody:testoMail isHTML:YES]; //HTML!!!!!!

        // Present the mail composition interface.
        [self presentViewController:picker animated:YES completion:nil];
    }
}

// The mail compose view controller delegate method
- (void)mailComposeController:(MFMailComposeViewController *)controller
          didFinishWithResult:(MFMailComposeResult)result
                        error:(NSError *)error
{
    [self dismissModalViewControllerAnimated:YES];
}

#pragma mark - Mandare email
/*
 - (void)sendMail:(NSMutableString*)testoMail{

 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
 picker.mailComposeDelegate = self;

 [picker setSubject:@"Reclutamento pompieri"];

 // Set up the recipients.
 NSArray *toRecipients = [NSArray arrayWithObjects:@"reda.bousbah@gmail.com",nil];
 //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com",@"third@example.com", nil];
 //NSArray *bccRecipients = [NSArray arrayWithObjects:@"four@example.com",nil];

 [picker setToRecipients:toRecipients];
 //[picker setCcRecipients:ccRecipients];
 //[picker setBccRecipients:bccRecipients];

 // Attach an image to the email.
 //NSString *path = [[NSBundle mainBundle] pathForResource:@"ipodnano" ofType:@"png"];
 //NSData *myData = [NSData dataWithContentsOfFile:path];
 //[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"ipodnano"];

 // Fill out the email body text.
 NSString *emailBody = @"It is raining in sunny California!";
 [picker setMessageBody:emailBody isHTML:NO];

 // Present the mail composition interface.
 [self presentViewController:picker animated:YES completion:nil];

 }
 */

#pragma mark - methods to control the keyboard

- (IBAction)backgroundTap:(id)sender //method for resign the keyboard when the background is tapped
{
    [nameTextField resignFirstResponder];
    [surnameTextField resignFirstResponder];
    [bornDateTextField resignFirstResponder];
    [addressTextField resignFirstResponder];
    [zipTextField resignFirstResponder];
    [emailTextField resignFirstResponder];

}

- (IBAction)doneButtonPressed:(id)sender
{
    NSLog( @"done button pressed");
    [sender resignFirstResponder];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:45:37.297

进口

```
#import <MessageUI/MFMailComposeViewController.h> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:05:12.190

**将 MessageUI.framework 添加到您的项目**中。在导航器中单击您的项目，选择“构建阶段”，然后将其添加到“与库链接”部分下。

# asp.net - Asp.net 项目的属性“Web \ Use Local IIs Web Server”影响其他团队成员

> ID：14400188
> 
> 赞同：1
> 
> 时间：2013-01-18T13:41:50.027
> 
> 标签：asp.net, git, github, asp.net-mvc-4, git-svn

我只是更改了我的 asp.net 项目的属性，如下所示。

```
Property\Web\Use Local IIS Web Server \ Project Url: http://domain.com
Property\Web\Use Local IIS Web Server \ Override application root URL: http://domain.com 
```

但是在svn中提交之后。这些变化反映在其他团队成员的项目中。因为这些设置在应用程序的项目文件中。

我也不能从提交中忽略这个项目文件。因为在这种情况下，其他成员将无法从 svn 正确更新我的工作。

我怎样才能让这些设置只对我个人而言，同时继续提交 Web 应用程序的项目文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:52:56.937

如果您将这些更改保留在项目文件中，您将不可避免地导致 SVN 中的版本控制问题，这不是最好的方法。一种方法是保持项目设置不变（我假设您使用的是 IIS，而其他人使用的是 Cassini 或 IIS Express），但在本地 IIS 中创建一个网站。然后，不是通过 F5 或 CTRL-F5 运行应用程序，而是通过`Debug > Attach to process`.

# wpf - 尝试在 DataTemplate 中使用 ContentPresenter 时，UserControl 内容为空

> ID：14400191
> 
> 赞同：0
> 
> 时间：2013-01-18T13:41:52.573
> 
> 标签：wpf, inheritance, user-controls, contentpresenter

我有一个主要的抽象代码类 BaseImpostorButton，继承了 UserControl。我有一个带有 xaml 和代码隐藏的子类 ClickableImageButton。

我在 ControlTemplate 中使用以下样式：

```
<Style TargetType="{x:Type local:ClickableImageButton}">
    <Setter Property="ToolTipService.InitialShowDelay" Value="0"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:ClickableImageButton}">
                <StackPanel Margin="{TemplateBinding Margin}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                    <ContentPresenter
                        Content="{TemplateBinding Content}"
                        ContentTemplate="{TemplateBinding ContentTemplate}" />
                </StackPanel>
            </ControlTemplate>                
        </Setter.Value>
    </Setter>
</Style> 
```

在 ListView 中用作原始 ListViewItem 时，我的 ClickableImageButton 显示正确。

但是：当在带有 ItemTemplate DataTemplate 的列表视图中使用它时，ClickableImageButton 不再显示......就像在 DataTemplate 内时内容为空一样。

我找到的解决方案是在 BaseImpostorButton 上编写一个 DependencyProperty ButtonContent 并在 xaml 中显式设置它。

但是有人可以解释这个问题吗？

编辑：这是 2 个不同的 xaml 正确显示底层图像的一个（ClickableImage 是一个图像）

```
<ListView Grid.Row="1" Name="ListViewSections" ItemsSource="{Binding Path=Sections}" Background="{x:Null}" SizeChanged="ListViewSections_SizeChanged">                    
            <ListViewItem>
<Grid MaxWidth="600">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MaxWidth="150"/>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="{Binding Path=Titre}" Margin="5,0,5,0" FontSize="18" FontWeight="Bold" Foreground="White" TextWrapping="Wrap" FontFamily="Arial" HorizontalAlignment="Left" />
                        <local:ClickableImageButton Grid.Row="1" Tag="{Binding Path=Id}" Grid.Column="0" ImpostorClick="Image_Click" Margin="10">
                            <local:ClickableImageButton.Content>
                                <local:ClickableImage Source="Content/tada.png" />
                            </local:ClickableImageButton.Content>
                        </local:ClickableImageButton>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Path=Texte}" Margin="10,0,10,0" FontSize="16" Foreground="White" TextWrapping="Wrap" FontFamily="Arial" VerticalAlignment="Center" HorizontalAlignment="Left" />
                    </Grid>                                       
            </ListViewItem>                
        </ListView> 
```

而那个不工作的

```
<ListView Grid.Row="1" Name="ListViewSections" ItemsSource="{Binding Path=Sections}" Background="{x:Null}" SizeChanged="ListViewSections_SizeChanged">                    
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid MaxWidth="600">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MaxWidth="150"/>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="{Binding Path=Titre}" Margin="5,0,5,0" FontSize="18" FontWeight="Bold" Foreground="White" TextWrapping="Wrap" FontFamily="Arial" HorizontalAlignment="Left" />
                        <local:ClickableImageButton Grid.Row="1" Tag="{Binding Path=Id}" Grid.Column="0" ImpostorClick="Image_Click" Margin="10">
                            <local:ClickableImageButton.Content>
                                <local:ClickableImage Source="Content/tada.png" />
                            </local:ClickableImageButton.Content>
                        </local:ClickableImageButton>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Path=Texte}" Margin="10,0,10,0" FontSize="16" Foreground="White" TextWrapping="Wrap" FontFamily="Arial" VerticalAlignment="Center" HorizontalAlignment="Left" />
                    </Grid>
                </DataTemplate>                    
            </ListView.ItemTemplate>                
        </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:07:38.640

所以最后我让它工作。这不是因为我是从 UserControl 派生的。

所以我一直从 UserControl 派生 BaseImpostorButton，我清空了 ControlTemplate ( `<ContentPresenter />`) 中的 ContentPresenter。

我不必设置 DefaultStyleKey。

我只需要从子类 xaml 文件中删除任何内容。事实上，当我创建我的子 UserControl 时，我并没有删除添加的默认内容，即`<Grid />`. 删除它只是解决了我所有的问题。

当我们尝试从模板化上下文设置默认内容时，看起来默认内容没有被覆盖，但只有在从非模板化上下文设置时才会被覆盖。

即以前的代码：

```
<sk:BaseImpostorButton x:Class="Compteur_3D.ClickableImageButton"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300">
<Grid/>
</sk:BaseImpostorButton> 
```

修改后的代码：

```
<sk:BaseImpostorButton x:Class="Compteur_3D.ClickableImageButton"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"              mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300">
</sk:BaseImpostorButton> 
```

`<Grid />`编辑：在运行时，我的 ClickableImageButton 元素在删除时具有正确的内容（即 ClickableImage） 。但是当`<Grid />`没有被删除时，我的 ClickableImageButton 有空的 Grid 作为内容......好像`<Grid />`在设置内容时没有覆盖：

```
<local:ClickableImageButton ImpostorClick="Image_Click" Margin="10">
                            <local:ClickableImageButton.Content>
                                <local:ClickableImage Source="{Binding Path=Image.Source}" />
                            </local:ClickableImageButton.Content>
                        </local:ClickableImageButton> 
```

编辑：目标框架 4 客户端配置文件

# json - 杰克逊 JSON 不适用于 CXF

> ID：14400193
> 
> 赞同：9
> 
> 时间：2013-01-18T13:41:53.140
> 
> 标签：json, cxf, jackson

JacksonJsonProvider 不适用于 CXF。

CXF v2.6.0 Jackson v2.1.2 (com.fasterxml.jackson) RESTClient（用于测试）

我确实在 beans.xml 中配置了如下所示的提供程序。

```
<bean id="jacksonMapper" class="com.fasterxml.jackson.databind.ObjectMapper">
    <property name="dateFormat">
    <bean class="java.text.SimpleDateFormat">
    <constructor-arg type="java.lang.String" value="yyyy-MM-dd'T'HH:mm:ss.SSSZ">     </constructor-arg>
    </bean>
   </property>
</bean>

<bean id="jacksonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider">
    <property name="mapper" ref="jacksonMapper" />
</bean> 
```

在 jaxrs: 服务器中.....>

```
<jaxrs:providers>
<ref bean="jaxbProvider" />
<ref bean="jacksonProvider" />                        
</jaxrs:providers>

</jaxrs:server> 
```

该应用程序被部署没有任何问题，它提供了良好的 JSON，而我将请求作为“application/xml”并将响应作为“application/json”。

当我尝试通过设置 Content-Type=application/json 在请求中提供 JSON 时，我面临 500 Internal Server Error

该请求通过 CXF 日志记录在日志文件中。

该请求根本没有登陆我的webservice的服务实现类。

请求正文中的 JSON 是：

```
{"SearchOrdersRequest":{"LoginCredentials":{"AppId":"BookStore","Username":"myuser","Password":"abcd1234","SecurityToken":"Vcvx45YilzX1"},"SearchHeader":{"SearchCategory":"Rep","FilterLogic":"1 AND 2","SearchParams":{"Field":"Order Number (s)","Operator":"EQUALS","Values":"600045335"}}}} 
```

任何即时帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T20:06:46.490

在[CXF 文档](http://cxf.apache.org/docs/jax-rs-data-bindings.html)中，您可以看到需要添加 json 提供程序并包含依赖项的位置。但是，当我尝试添加杰克逊而不是抛弃时，我仍然遇到错误，几个小时后，我认为您需要再包含一个杰克逊依赖项。

1.  添加 JSON 提供程序

    ```
    <jaxrs:providers>
        <bean class="org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider" />
    </jaxrs:providers> 
    ```

2.  添加依赖项

    ```
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-xc</artifactId>
        <version>1.9.12</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.9.12</version>
    </dependency> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T13:21:35.923

正如我所了解的，您的应用程序会生成和使用 xml 和 json 格式。所以，首先。确保您的 cxf 资源端点能够执行此操作。

```
@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML}) 
```

否则您的请求将找不到任何资源实现。（在类级别或方法级别的这些行）

然后，如果这还不够，请查看此 jackson cxf 集成：

```
<bean id="jsonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider" />
<bean id="jsonContextResolver" class="net.sf.gazpachoquest.rest.support.JacksonContextResolver" /> 
```

还

```
 <jaxrs:server id="services" address="/">
   <jaxrs:providers>
      <ref bean="jsonProvider" />
      <ref bean="jsonContextResolver" />
     </jaxrs:providers>
  </jaxrs:server> 
```

定义映射器的类的上下文解析器：

```
@Provider
public class JacksonContextResolver implements ContextResolver<ObjectMapper> {

    private final ObjectMapper mapper = new ObjectMapper();

    public JacksonContextResolver() {
        /*
         * Register JodaModule to handle Joda DateTime Objects.
         * https://github.com/FasterXML/jackson-datatype-jsr310
         */
        mapper.registerModule(new JSR310Module());
        mapper.setSerializationInclusion(Include.NON_EMPTY);
        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);

    }

    @Override
    public ObjectMapper getContext(Class<?> arg0) {
        return mapper;
    }
} 
```

万一您将应用程序部署到 j2ee 容器中，您可能需要一个应用程序配置类：

```
@ApplicationPath("/api")
public class ApplicationConfig extends javax.ws.rs.core.Application{

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new HashSet<Class<?>>();
        // add here your resources
        classes.add(JacksonContextResolver.class);
        classes.add(JacksonJsonProvider.class);
        ...
        return classes;
    } 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T21:12:32.597

前段时间，当我没有在类路径中抛弃库时，我遇到了 json 请求的问题。查看[http://www.javatips.net/blog/2012/02/cxf-restful-tutorial](http://www.javatips.net/blog/2012/02/cxf-restful-tutorial)教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T19:14:42.077

为了通过覆盖 jettison 来使用 jackson 库，您需要配置 jacksonprovider，如下所示

```
<bean id="jacksonJsonProvider" class="com.student.CustomJsonProvider"/>

<jaxrs:providers> 
  <ref bean="jacksonJsonProvider" /> 
</jaxrs:providers> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-18T13:40:52.480

发生这种情况是因为当您使用带有 group 的 jackson 库时`com.fasterxml.jackson.jaxrs`，服务器期望以下格式的请求：

```
{
  "LoginCredentials": {
    "AppId" : "BookStore",
    "Username":"myuser",
    "Password":"abcd1234",
    "SecurityToken":"Vcvx45YilzX1"
  },
  "SearchHeader":{
    "SearchCategory":"Rep",
    "FilterLogic":"1 AND 2",
    "SearchParams":{
      "Field":"Order Number (s)",
      "Operator":"EQUALS",
      "Values":"600045335"
    }
  }
} 
```

但是您的客户将以以下格式发送：

```
{
  "SearchOrdersRequest": {
    "LoginCredentials": {
      "AppId" : "BookStore",
      "Username":"myuser",
      "Password":"abcd1234",
      "SecurityToken":"Vcvx45YilzX1"
    },
    "SearchHeader":{
      "SearchCategory":"Rep",
      "FilterLogic":"1 AND 2",
      "SearchParams":{
        "Field":"Order Number (s)",
        "Operator":"EQUALS",
        "Values":"600045335"
      }
    }
  }
} 
```

这似乎只是这个`fasterxml`版本的库的问题。将库与组一起使用`org.codehaus.jackson`将解决此问题。请求和响应都将没有根元素。

所以需要替换下面的maven依赖

```
<dependency>
  <groupId>com.fasterxml.jackson.jaxrs</groupId>
  <artifactId>jackson-jaxrs-json-provider</artifactId>
  <version>2.9.3</version>
</dependency> 
```

和

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-jaxrs</artifactId>
    <version>1.9.13</version>
</dependency> 
```

我检查了 cxf 文档中提到的库（[https://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-Jackson](https://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-Jackson)）也是一个，`com.fasterxml.jackson.jaxrs`但是如果你检查类豆类中提到的来自`org.codehaus.jackson.jaxrs`. 所以我认为这是文档中的一个错误，需要更正。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-21T20:35:44.697

在正常情况下，如果您通过简单地添加该依赖项来部署到 EE 服务器，则必须自动发现和使用提供程序（我测试了宽度 TomEE 7）：

```
<dependency>
    <groupId>com.fasterxml.jackson.jaxrs</groupId>
    <artifactId>jackson-jaxrs-json-provider</artifactId>
    <version>2.8.6 </version>
</dependency> 
```

但要小心使用正确的版本。CFX 指南建议使用仅与 Jackson 1 兼容而不与 Jackson 2 兼容的 Jackson JAX-RS 提供程序。有关更多详细信息，请查看[该问题](https://stackoverflow.com/questions/38168507/getcontext-method-of-customcontextresolver-is-not-called-by-jackson/42937480#42937480)

# java - 在 Android 中使用资源会冻结主线程

> ID：14400199
> 
> 赞同：2
> 
> 时间：2013-01-18T13:42:03.903
> 
> 标签：java, android

我正在学习 Google Android App Course，但遇到了一个奇怪的错误。如果我调用`initVariables()`，则不会出现布局，如果我将其注释掉，则会出现。如果我在调用后返回`getResources()`，我会看到布局，如果我在调用后返回`getString()`，则没有布局。

在 logcat 中，我只看到达到了一些空闲超时。我目前的环境存在一些问题（eclipse 崩溃等），所以我无法发布完整的 logcat。这是代码和xml：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.advanced);
    initLayout();
    initVariables();
}

protected void initLayout() {
    m_vwJokeButton = (Button) findViewById(R.id.addJokeButton);
    m_vwJokeEditText = (EditText) findViewById(R.id.newJokeEditText);
    m_vwJokeLayout = (LinearLayout) findViewById(R.id.jokeListLayout);
}

protected void initVariables() {
    Resources resources = getResources();
    author = resources.getString(R.string.author_name);
    m_nDarkColor = resources.getColor(R.color.dark);
    m_nLightColor = resources.getColor(R.color.light);
    m_arrJokeList = new ArrayList<Joke>();
} 
```

布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/InputLayoutViewGroup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/addJokeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add Joke" />

        <EditText
            android:id="@+id/newJokeEditText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </EditText>
    </LinearLayout>

    <ScrollView
        android:id="@+id/jokeListViewGroup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/jokeListLayout"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:13:35.837

如果在运行时未找到 R.string.author_name，我将抛出异常。你可以捕捉到异常

```
 try {
        author = resources.getString(R.string.author_name);
    } catch (Resources.NotFoundException e) {

    } 
```

但问题应该是为什么你的 R.string.author_name 不见了？你能成功获得任何字符串资源吗？

# alert - 警报循环……为什么？

> ID：14400209
> 
> 赞同：0
> 
> 时间：2013-01-18T13:42:55.177
> 
> 标签：alert, simplecart

我面临一个非常烦人的问题。我使用 js SimpleCart 购买演出门票。有成人和儿童的地方。所以我创建了两个输入来选择成人人数和儿童人数。添加到购物车时，我检查每个字段的值是否为带有“beforeAdd”的数字。如果“是”，我检查第二个字段。如果“否”，我会显示警报。第一个字段反应很好。但是第二个循环无限期地在第一个字段中警报。我不明白。有人有想法吗？

这是代码

```
 $('.item_add').click(function()
    {
        var id_des_produits = this.id;
        var selecteur = 'selec' + id_des_produits;
        var selectionne = ' option:selected';
        var valeur_select_photo_ie = $('#selec' + id_des_produits + selectionne).val();
        var nombre_adulte = $('#nbre_adulte' + id_des_produits).val();
        var nombre_enfant = $('#nbre_enfant' + id_des_produits).val();
        var nombre_participant = nombre_adulte + nombre_enfant;
        var date_d_arrivee = $('.calendrier_front' + id_des_produits).val();
        var categorie = $('#date' + id_des_produits).val();
        var nom_produit = $('.item_name').html();
        var prix_enfant = 10;
        var prix_adulte = 23;
        var thumb_produit = $('#thumb_produit_' + id_des_produits).attr('src');

        simpleCart.bind("beforeAdd", function(item)
        {
            if(chiffre_check.test(nombre_adulte))
            {
                if(nombre_adulte != '0')
                {
                    simpleCart.add(
                    {
                        name: nom_produit + '</br>Tarif adulte' ,
                        price: prix_adulte ,
                        size: date_d_arrivee ,
                        quantity: nombre_adulte ,
                        thumb: thumb_produit 
                    });
                }
            return true;
            }   
            else
            {
                alert('Précisez le nombre d\'adulte');
                return false;
            }
            if(chiffre_check.test(nombre_enfant))
            {
                if(nombre_enfant != '0')
                {
                    simpleCart.add(
                    {
                        name: nom_produit + '</br>Tarif enfant' ,
                        price: prix_enfant ,
                        size: date_d_arrivee ,
                        quantity: nombre_enfant ,
                        thumb: thumb_produit 
                    });
                }
            return true;
            }
            else
            {
                alert('Précisez le nombre d\'enfant');
                return false;
            }
        });
    }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:12:18.930

添加是在绑定到`beforeAdd`事件的函数内完成的。

这意味着当执行函数内部的添加时，它将立即再次触发相同的事件处理程序，从而导致您看到的无限循环。

发生的事情如下：

1.  对购物车进行“添加”。
2.  这会触发事件处理程序启动。
3.  第一个测试通过，成人人数 > 0，因此添加了成人关税。
4.  这个“添加”触发事件重新开始，但它一直等到当前代码完成。
5.  当前代码继续执行，第二个测试失败，因此引发警报。
6.  警报被清除，当前代码完成，所以之前触发的事件被调用。
7.  你现在回到了上面的第 2 阶段。

如您所见，虽然您看到的是重复第二次测试的警报，但实际上是成功的第一次测试和它完成的添加导致了循环。这也导致成人关税被无限次添加，这可能不是你的意图！

为了解决这类问题，您需要在事件触发函数开始时进行额外的检查，如果要添加的项目是自己添加的类型，它会告诉它退出。

一个可能的解决方案可能如下所示：

```
simpleCart.bind("beforeAdd", function(item)
    {
    if(item.name.match(/(Tarif adulte|Tarif enfant)$/))
        {
        return;  //exit the event handler if it's one of the tarif items, to prevent the event handler looping.
        }
    //.... rest of your existing code for the beforeAdd function continues here... 
```

该解决方案基于物品的名称；您可能需要调整 中的条件`if()`以适合您的具体情况。

希望有帮助。

# javascript - 自调用函数和参数？

> ID：14400210
> 
> 赞同：4
> 
> 时间：2013-01-18T13:43:02.820
> 
> 标签：javascript, function, identifier

我已经看到了编写自调用函数的下一种方法：

```
(function (app) {
    app.foo = {
        bar: function(){}
    };
}(App)); 
```

`App`全局对象在哪里。

我想知道，为什么我们需要将`App`参数作为参数传递给函数？为什么不直接使用这个：

```
(function () {
    App.foo = {
        bar: function(){}
    };
}()); 
```

我只看到使用第一种方式的一个优势。如果我们出于某种原因重命名`App`对象，那么我们可以轻松地重命名括号中的参数，我们的代码将正常工作。但是在第二种方式的情况下，我们可能需要`App`在我们使用它的所有地方重命名。

还有其他区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T13:49:36.467

这意味着函数的内容——关于`app`标识符——与全局（或父）范围无关。

这样做的一种情况是，例如，使用 jQuery，当您不想假设调用 jQuery 对象时`$`（例如，如果打开无冲突模式），但您*确实*想通过以下方式调用它那个名字。通过这样的匿名函数（即`(function($) {})(jQuery)`）传递它允许您生成一个本地范围的别名，该别名不会干扰`$`父/全局范围内名称的外部含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:14:00.560

其他答案解释了拥有本地范围副本的好处。还有其他一些好处：

*   作为一种微优化，它减少了范围查找（查找本地变量比查找全局变量更便宜）。
*   它可以帮助缩小过程，因为您的所有参数都简化为名为 vars 的单个字母。
*   它为您提供了一种伪依赖管理技术......在您的示例中，您知道您的代码依赖于`App`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:53:06.513

例如，许多库使用“$”字符作为其主要功能（例如 JQuery）的快捷方式。这很方便，但在使用多个库时可能会导致冲突。所以，你可以这样传入`JQuery`：

```
(function($) {
    // Code
    var nav = $('#nav');
    // More code
})(JQuery); 
```

这样，您仍然可以使用方便的快捷方式，但也可以避免冲突（只要您还将库配置为不使用“$”快捷方式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T10:23:00.397

您还可以使用它在本地重新定义全局变量，以确保它们包含您期望的内容：

```
(function($, undefined) { ... })(jQuery); 
```

`undefined`现在预期的未定义在哪里。另请参阅：[传入未定义的目的是什么？](https://stackoverflow.com/questions/9602901/what-is-the-purpose-of-passing-in-undefined)

其他答案中很好地涵盖了大多数其他用途。

# javascript - 使用 Jquery 或 javascript 获取选定的选项数据

> ID：14400211
> 
> 赞同：3
> 
> 时间：2013-01-18T13:43:04.900
> 
> 标签：javascript, jquery

我必须获取其选项值已知的选定选项数据。我有选定的选项值，并且我想要包含在选项之间的数据。

例如在以下选择中：

```
<select name="oi_report_contact[sex]" id="oi_report_contact_sex">
       <option value="1">Male</option>
       <option value="2">Female</option>
       <option value="3">Other</option>
</select> 
```

我的值为 1，我需要通过 Jquery 或 Javascript 获取数据“男性”。

请注意：`$('#oi_report_contact_sex').val();`选择1时，请给出1且不是男性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:46:34.440

你只需要打电话

```
var content = $('#oi_report_contact_sex option:selected').html(); 
```

获取所选选项的内部内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T13:50:34.773

您可以使用`.text()`方法来获取文本值。像[这样](http://jsfiddle.net/BdzVQ/1/)。

```
$('#oi_report_contact_sex').on('change', function () {
  alert($('#oi_report_contact_sex').val());
  alert($('#oi_report_contact_sex option:selected').text());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:49:28.723

```
 $("#oi_report_contact_sex").find('option:selected').text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:50:09.977

你可以试试：

```
$("#oi_report_contact_sex option[value='" + $("#oi_report_contact_sex").val() + "']").text() 
```

jsFiddle 链接：http: [//jsfiddle.net/ARBb2/1/](http://jsfiddle.net/ARBb2/1/)

# css - 我可以在 SPRING 3 MVC 项目中显示图像

> ID：14400216
> 
> 赞同：1
> 
> 时间：2013-01-18T13:43:15.253
> 
> 标签：css, image, spring, jsp, spring-mvc

我无法在 Spring 3 MVC 项目中显示图像。我没有找到错误并且已经阅读了很多教程。我的代码是下一个：

**调度程序-servlet**

```
<mvc:annotation-driven />
<mvc:resources location="/resources/" mapping="/resources/**"/>

<context:property-placeholder location="classpath:jdbc.properties" />
<context:component-scan base-package="com.barrancofv" />
<tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
    </bean>

    <bean id="localeChangeInterceptor"
    class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="defaultLocale" value="es"/>
    </bean>

    <bean id="handlerMapping"
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="interceptors">
        <ref bean="localeChangeInterceptor" />
    </property>
    </bean>    

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>mymessages</value>
            <value>messages</value>
        </list>
    </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${database.driver}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.user}" />
    <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
    <list>
        <value>com.barrancofv.model.Empleado</value>
        <value>com.barrancofv.model.Documento</value>
    </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
        </props>
    </property>
    </bean>

    <bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

**web.xml**

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>
       org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
<listener-class>
    org.springframework.web.context.ContextLoaderListener
</listener-class>
</listener>

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
    /WEB-INF/dispatcher-servlet.xml,
    /WEB-INF/spring-security.xml
</param-value>
</context-param>

<filter>
<filter-name>springSecurityFilterChain</filter-name>
<filter-class>
    org.springframework.web.filter.DelegatingFilterProxy
</filter-class>
</filter>

<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

**安全.xml**

```
<http use-expressions="true">
    <!-- intercept-url seguridad de flujo de paginas -->
    <intercept-url pattern="/welcome" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/*" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/*/" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/*/*" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/*/*/" access="ROLE_USER" />
    <intercept-url pattern="/welcome/*/*/*/*" access="ROLE_USER" />
    <intercept-url pattern="/resources/**" access="permitAll" />
    <form-login login-page="/login" default-target-url="/welcome" authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http> 
```

**在我的 login.jsp**

为了放置我的图像，我使用这个：

```
<img src="<c:url value="/resources/img/a.jpg" alt="" /> 
```

我的结构是：

```
src/main/resources/images/a.jpg 
```

我没有发现错误。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:12:52.877

您必须在 spring 配置中配置资源处理程序，以便它与您的项目结构匹配

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources -->
<mvc:resources 
        mapping="/resources/** 
        location="/images/, classpath:/META-INF/web-resources/" /> 
```

并且您需要添加配置安全性，以便无需登录即可访问此图像（以在登录页面上显示它们）。

```
 <security:intercept-url pattern="/resources/**" access="permitAll" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:25:13.400

Usha 指出的问题是部分正确的。您需要将资源移动到`src/main/webapp/resources`或在您的 pom 中添加`src/main/resources`为 webResource，这与常规资源不同。

其次，您不会`/resources/images/...`在 JSP 中引用，因为您的 Web 资源将被放置在 webapp 的根目录中，而不是在 /resources 目录中。

最后，您将 DispatcherServlet 映射到根上下文 (/)。为了提供资源，您应该配置[default-servlet-handler](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler)。您可能还想阅读该文档之前的部分，因为它讨论了服务资源。

在 xml 配置中，它应该像

```
<mvc:default-servlet-handler/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:00:29.477

我认为它是`resources`从`webapp`文件夹中提取的。

你能改变`resources`从`src/main/resources/`到`src/main/webapp/resources/`并尝试是否可行。

# jsf-2 - 以“is”开头的布尔属性不起作用

> ID：14400222
> 
> 赞同：12
> 
> 时间：2013-01-18T13:43:47.830
> 
> 标签：jsf-2, boolean, javabeans, el, getter

我有一个使用 JSF 2.1 和 PrimeFaces 的项目。我尝试使用简单的`<h:outputText>`引用`#{myBean.matriz}`，但出现此错误：

```
SEVERE: javax.el.PropertyNotFoundException: ... value="#{myBean.matriz}": Missing Resource in EL implementation: ???propertyNotReadable??? 
```

吸气剂是：`isMatriz()`. 应该是`getMatriz()`吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-18T13:51:19.200

`is`前缀仅适用于，`boolean`不适用于。`Boolean`

你显然有*一个*财产`Boolean`。

您有 2 个选项来修复它：

1.  `get`用前缀重命名 getter 。
2.  替换`Boolean`为`boolean`。请注意，它将默认为`false`而不是`null`.

### 也可以看看：

*   [JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)- 第 8.3.2 章
*   [Java 表达式语言如何解析布尔属性？（在 JSF 1.2 中）](https://stackoverflow.com/questions/3236929/how-does-java-expression-language-resolve-attributes-in-jsf-1-2/3237160#3237160)

* * *

**与具体问题无关**，类路径对于 EL 实现似乎是一团糟。该消息`Missing Resource in EL implementation: ???propertyNotReadable???`表明 EL impl 无法在自己的 JAR 中找到相关的错误消息，应该如下所示

```
Property 'matriz' not found on type com.example.MyBean 
```

确保您没有在`/WEB-INF/lib`. 摆脱他们。servletcontainer 已经提供了自己的。

# ios - 将图像从 iPad 轻拂到另一个屏幕

> ID：14400225
> 
> 赞同：0
> 
> 时间：2013-01-18T13:44:10.767
> 
> 标签：ios, networking, unity3d

我想知道以下是否曾经做过，最好是统一的。

我想要的是能够拍摄我在 iPad 上的图像并将其发送到屏幕以通过轻拂手势显示。就像您对具有双显示器的计算机上的窗口所做的那样。

您拖动它，它会立即出现在另一台显示器上。

如果以前没有这样做过，您将如何使这成为可能？我知道如果我要将图像从一个设备传递到另一个设备，将需要大量的网络连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:34:59.313

在单一行为

[RPC] void ShowImage(byte[] data) { ... }

另一台计算机：networkView.RPC("ShowImage", RPCMode.All, data)

那是你要的吗？

# ios - 旋转 UIImageView

> ID：14400231
> 
> 赞同：0
> 
> 时间：2013-01-18T13:44:23.090
> 
> 标签：ios, xcode

我想旋转 UIImageView，我正在使用以下代码：

```
-(IBAction)rotateImageView:(id)sender{
 photoView.transform = CGAffineTransformMakeRotation(M_PI); //rotation in radians
} 
```

该代码有效。当我按下按钮时，图像会旋转 180 度，但如果我再次按下它，它不会旋转回原来的位置，而是保持静止。为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:48:35.967

因为您再次将相同的变换应用于视图，而不考虑任何现有的变换。

尝试这个：

`photoView.transform = CGAffineTransformRotate(photoView.transform,M_PI);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:48:18.543

您必须从当前旋转旋转 imageView 以使其原始

使用此代码

```
CGAffineTransformRotate(photoView.transform, M_PI); 
```

# sql - Oracle SQL 按列分组，但仅当该列为空或 0

> ID：14400235
> 
> 赞同：2
> 
> 时间：2013-01-18T13:44:46.350
> 
> 标签：sql, oracle, plsql, group-by

简而言之，我试图按列分组，但前提是该列不是`null`，或者`0`在这种情况下，我仍然想要获取这些行，但只是不分组。我有这张桌子`some_table`：

```
+--------+----------+---------------------+-------+
| id     | other_id | date_value          | value |
+--------+----------+---------------------+-------+
| 1      | abc      | 2011-04-20 21:03:05 | 104   |
| 2      | abc      | 2011-04-20 21:03:04 | 229   |
| 3      | xyz      | 2011-04-20 21:03:03 | 130   |
| 4      | abc      | 2011-04-20 21:02:09 | 97    |
| 5      | 0        | 2011-04-20 21:02:08 | 65    |
| 6      | xyz      | 2011-04-20 21:02:07 | 101   |
| 7      |          | 2011-04-20 21:02:07 | 200   |
| 8      | 0        | 2011-04-20 21:02:07 | 201   |
| 9      |          | 2011-04-20 21:02:07 | 202   |
+--------+----------+---------------------+-------+ 
```

我想选择行和分组依据`other_id`，还包括分组行的计数。此查询有效：

```
select id, other_id, date_value, value, cnt from
 (
   SELECT id, other_id, date_value, value, 
   ROW_NUMBER() OVER (partition by other_id order BY Date_Value desc) r,
   count(*) OVER (partition by other_id) cnt
   FROM some_table 
 )
where r = 1 
```

结果是：

```
+--------+----------+---------------------+-------+-------+
| id     | other_id | date_value          | value | count |
+--------+----------+---------------------+-------+-------+
| 1      | abc      | 2011-04-20 21:03:05 | 104   | 3     |
| 3      | xyz      | 2011-04-20 21:03:03 | 130   | 2     |
| 5      | 0        | 2011-04-20 21:02:08 | 65    | 2     |
| 7      |          | 2011-04-20 21:02:07 | 200   | 2     |
+--------+----------+---------------------+-------+-------+ 
```

问题是，我不想对具有 or 的行`other_id`进行`null`分组`0`。所以想要的结果是这样的：

```
+--------+----------+---------------------+-------+-------+
| id     | other_id | date_value          | value | count |
+--------+----------+---------------------+-------+-------+
| 1      | abc      | 2011-04-20 21:03:05 | 104   | 3     |
| 3      | xyz      | 2011-04-20 21:03:03 | 130   | 2     |
| 5      | 0        | 2011-04-20 21:02:08 | 65    | 1     |
| 7      |          | 2011-04-20 21:02:07 | 200   | 1     |
| 8      | 0        | 2011-04-20 21:02:07 | 201   | 1     |
| 9      |          | 2011-04-20 21:02:07 | 202   | 1     |
+--------+----------+---------------------+-------+-------+ 
```

如您所见，除了何时或在这种情况下它们仍被选中但未分组之外，所有内容`other_id`都已`null`分组`0`。我也在尝试按`date_value`.

我尝试在`WHERE`子句中添加一个`OVER`子句：

```
OVER (partition by other_id WHERE other_id IS NOT NULL AND other_id IS NOT '0' order BY Date_Value desc)
-- this produces an error: ORA-00907: missing right parenthesis 
```

我曾考虑过进行第二个`select`查询并尝试将第一个结果堆叠在第二个结果之上，但我认为这不会因为排序而起作用。

有什么方法可以按条件分组吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:59:02.493

这会做到：

```
SQL> select id, other_id, date_value, value, cnt from
  2   (
  3     SELECT id, other_id, date_value, value,
  4     case
  5       when other_id is null or other_id = '0' then 1
  6       else ROW_NUMBER() OVER (partition by other_id order BY Date_Value desc)
  7     end r,
  8     case
  9       when other_id is null or other_id = '0' then 1
 10       else count(*) OVER (partition by other_id)
 11     end cnt
 12     FROM some_table
 13   )
 14  where r = 1
 15  order by id;

        ID OTH DATE_VALUE               VALUE        CNT
---------- --- ------------------- ---------- ----------
         1 abc 2011-04-20 21:03:05        104          3
         3 xyz 2011-04-20 21:03:03        130          2
         5 0   2011-04-20 21:02:08         65          1
         7     2011-04-20 21:02:07        200          1
         8 0   2011-04-20 21:02:07        201          1
         9     2011-04-20 21:02:07        202          1

6 rows selected.

SQL> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:46:35.200

尝试，

```
SELECT id, other_id, date_value, value, cnt 
FROM
(
   SELECT id, other_id, date_value, value, 
          ROW_NUMBER() OVER (partition by other_id order BY Date_Value desc) r,
          count(*) OVER (partition by other_id) cnt
   FROM   some_table 
   WHERE  otherID IS NOT NULL OR
          otherID != '0'
) AS derivedTable
WHERE  r = 1 
```

# wix - 如何执行具有依赖关系的 WiX 自定义操作 C++ DLL 文件？

> ID：14400236
> 
> 赞同：4
> 
> 时间：2013-01-18T13:44:54.080
> 
> 标签：wix, custom-action

我已经实现了一个没有任何依赖的自定义命令，没有任何问题。

但这里是一个自定义命令，需要与其他四个 dll 链接才能工作。

```
<Binary Id="libeay32"          SourceFile="..\bin\libeay32.dll"/>
<Binary Id="libintl"           SourceFile="..\bin\libintl.dll"/>
<Binary Id="libpq"             SourceFile="..\bin\libpq.dll"/>
<Binary Id="ssleay32"          SourceFile="..\bin\ssleay32.dll"/>
<Binary Id="custom"            SourceFile="..\bin\custom_cmd.dll"/>

  <CustomAction Id="cc_postgres" BinaryKey="custom" DllEntry="on_postgres_cmd" Execute="immediate" Return="check" HideTarget="no" /> 
```

安装时出现以下错误

> 错误 1723。此 Windows 安装程序包有问题。无法运行完成此安装所需的 DLL。请联系您的支持人员或软件包供应商。动作 cc_postgres，条目：on_postgres_cmd，库：C:\Users\THE\AppData\Local\Temp\MSI17BB.tmp

如何在 Wix 中进行此操作，而无需重新编译静态中的所有内容。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:21:13.383

MSI 不提供这些服务，WiX 也不提供这样做的扩展。我想你可以为此目的编写一个 WiX 扩展，但为什么呢？

**MSI 运行您的类型 1 自定义操作，首先将二进制**资源的副本提取到临时目录，然后调用该副本中的入口点，并（在完成自定义操作后）释放临时 DLL 副本。（或者不：MSI 可能会决定保留该副本一段时间，作为一种优化，以防您稍后要调用其他入口点。但这取决于 MSI，而不是您的代码。）

关键是**二进制**资源是临时自动加载的……而且*只有*一个资源。这意味着加载所需的任何其他资源取决于您的自定义操作。

作为第一步，您的自定义操作需要在**Binary**表上打开一个视图，从适当的记录中读取**Data**列作为流，然后将该数据缓冲区转储到某个文件中，然后执行显式`::LoadLibrary()`. 然后`::GetProcAddress()`在函数上，您的自定义操作将从加载的库中调用，并使用获取的指针进行显式调用。最后，由于您是一位有礼貌的程序员，当您的自定义操作完成后，它需要在返回之前拆除所有这些基础设施：释放视图和库句柄，删除临时文件等。

如果这一切看起来很麻烦，你是对的，它是。非常简单的解决方案正是您拒绝的解决方案：`custom_cmd.dll`静态链接。是的，这将使您的二进制文件和包含它的**.msi**稍微大一点（而且不会大很多，因为您可能不再需要依赖 DLL 的单独**二进制**副本）。但这几乎是唯一的缺点。好处是您的自定义操作会随身携带完成工作所需的一切。

我经常在安装时运行的任何二进制文件上做一个静态链接——不仅仅是自定义操作，还有引导程序等——即使它们没有明确的外部依赖关系。（但当然它们有*隐含*的，比如 Visual C++ 运行时库等。）这样，我不仅知道我有我需要的资源，而且知道这些资源的正确*版本*，而不是客户可能发生的任何版本以前安装...或根本没有安装。

你的安装包是一个不提前知道他的环境的侦察员。它可能是美国的一个大城市……或者它可能是月球。或巴苏姆。不要以为你会有手机服务……或氧气。*随身携带！*

# php - 通过 PHP 从客户端到 S3 的文件

> ID：14400240
> 
> 赞同：1
> 
> 时间：2013-01-18T13:45:00.343
> 
> 标签：php, stream, amazon-s3

我需要允许将大文件上传到 S3 的服务，仅适用于经过身份验证的客户端。所以，1\. 我需要检查客户端是否有访问权限（例如 HMAC 或任何唯一密钥） 2\. 检查文件格式（扩展名/MIME 类型，必须只有 MUSIC） 3\. 如果一切正常 - 上传到 S3

看起来很简单。但是，我不想在服务中存储文件。经过所有检查后，我想将其直接流式传输到 S3。或者，如果 auth. 数据无效，请求必须中止，文件不会发送。

您能建议我应该使用什么技术或正确的搜索方式吗？

# magento - Magento 在 onepage.php 中获得订单总额

> ID：14400241
> 
> 赞同：0
> 
> 时间：2013-01-18T13:45:00.557
> 
> 标签：magento

我正在努力解决一个非常愚蠢的问题。我在 app/code/core/Mage/Checkout/Type/Onepage.php 中编辑了 saveOrder() 方法。这是因为我想阻止 Magento 发送某些付款方式的订单确认电子邮件。我发送的不是标准电子邮件，而是包含不同信息的新电子邮件（在后端的交易电子邮件中编码）。没关系，我做了类似的事情：

```
if($order->getPayment()->getMethodInstance()->getCode()!='X') {
$order->sendNewOrderEmail();
} else {
    $name = $order->getBillingAddress()->getName();
$mailer = Mage::getModel('core/email_template_mailer');
    $emailInfo = Mage::getModel('core/email_info');
    $emailInfo->addTo($order->getCustomerEmail(), $name);
    $mailer->addEmailInfo($emailInfo);
$templateId = 3;
$storeId = Mage::app()->getStore()->getId();
$sender = Array('name'  => 'XXX', 'email' => 'xxx@xxx.xxx');
    $mailer->setSender($sender);
    $mailer->setStoreId($storeId);
    $mailer->setTemplateId($templateId);
    $mailer->setTemplateParams(array(
            'order' => $order
        )
    );
    $mailer->send();
} 
```

除了订单总额外，一切正常。在我正在打印的交易电子邮件中

```
{{var order.getGrandTotal()}} 
```

但是我得到了 1 欧元价格产品的价值“0.999953719008”，我不知道如何解决这个问题。（测试产品有折扣）我尝试创建一个脚本来加载先前注册的订单并使用相同的电子邮件模板发送电子邮件。在这种情况下，一切都像魅力一样！所以我想问题是因为订单还没有保存。我刚刚尝试使用将总计作为另一个变量传递

```
 $mailer->setTemplateParams(array(
            'order' => $order,
            'total' => $order->getGrandTotal()
        )
    ); 
```

和印刷

```
{{var total}} 
```

在模板中，在这种情况下，变量没有任何值。我该如何解决这个问题？

预先感谢！

ps：我使用的是1.6版的Magento安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:28:07.157

我以前也有过这个。这是由于 php 浮点舍入问题：

[http://php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)

用于`round()`向用户正确显示您的结果。如果您使用`bcadd()`自定义代码在某处更改价格，则可以避免舍入问题。

# bash - 如何使用常见的 shell 命令替换变量的值？

> ID：14400243
> 
> 赞同：1
> 
> 时间：2013-01-18T13:45:05.453
> 
> 标签：bash, replace

我有一个带有如下行的文本文件：

```
 variable_name : value 
```

我需要制作一个 bash 脚本来用我知道的固定值替换“值”（比如说“myvalue”）。

我以前不知道哪个是 variable_name 的值。

我需要使用 bash 命令，这些命令可用于任何默认安装的 linux 机器，如 sed、grep、awk 等。

当我知道“值”字符串时，我知道如何使用 sed 执行此操作，但我无法通过在文件中搜索变量名称来弄清楚如何执行此操作。

**编辑**：我为这项任务增加了一些复杂性，我必须排除一些带有固定文本的模式，例如，如果我有：

```
 variable_name : value
  variable_name : VARIABLE_NAME > lorem_ipsum 
```

我必须用字符串 VARIABLE_NAME 排除替换。结果必须是：

```
 variable_name : myvalue
  variable_name : VARIABLE_NAME > lorem_ipsum 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:48:30.447

你在找这个吗？

```
echo "variable_name : value"|sed -r 's/(variable_name :)(.*)/\1myvalue/'
variable_name :myvalue 
```

**编辑**新要求

你说你会用字符串 VARIABLE_NAME 排除替换，所以我假设 `(space)> lorem_ipsum`它将被新值替换。

所以这条线可能会有所帮助：

```
awk 'BEGIN{v="variable_name";V=toupper(v); FS=OFS=" : "} $1~"^"v{$2=($2~"^"V)?V"myValue":"myValue"}1' file 
```

看看这个：

```
kent$  echo "variable_name : value
variable_name : VARIABLE_NAME > lorem_ipsum"|awk 'BEGIN{v="variable_name";V=toupper(v); FS=OFS=" : "} $1~"^"v{$2=($2~"^"V)?V"myValue":"myValue"}1';                         
variable_name : myValue
variable_name : VARIABLE_NAMEmyValue 
```

**编辑2**

Neuquino，你应该更清楚地解释你的要求......无论如何：

```
 kent$  echo "variable_name : value
variable_name : VARIABLE_NAME > lorem_ipsum"|awk 'BEGIN{v="variable_name";V=toupper(v); FS=OFS=" : "} $1~"^"v && $2!~"^"V{$2="myValue"}1';                                  
variable_name : myValue
variable_name : VARIABLE_NAME > lorem_ipsum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:57:53.713

```
awk -F":" 'BEGIN{OFS=":"}/variable_name/{$2="my value"}1' your_file 
```

你也可以使用 perl：

```
perl -pe 'if(/variable_name/){$_=~s/(variable_name :).*/$1 myvalue/g;}' your_file 
```

如果你想做就地更换：

```
perl -pi -e 'if(/variable_name/){$_=~s/(variable_name :).*/$1 myvalue/g;}' your_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:59:09.763

awk 方法：

```
echo "  variable_name : value" | awk -F: -v OFS=: '/variable_name/{ $2=" value2"}1' 
```

# visual-studio-2010 - 使用 XDT-Transform 添加注释

> ID：14400253
> 
> 赞同：10
> 
> 时间：2013-01-18T13:45:23.447
> 
> 标签：visual-studio-2010, xdt-transform

我在 Visual Studio 2010 中使用 XDT-Transform 来生成多个配置文件。

Xml 转换工作正常。但我似乎无法找到将注释从 xml 转换文件传输到最终文件的方法。

就像`Insert`添加配置设置的转换一样，有没有添加评论？如果没有评论，我可能不得不放弃整个转换方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-02T13:12:02.150

我已经为你找到了一个可能的解决方案。

只需在您要添加的最高级别将某些内容表示为插入。之后，您可以像往常一样添加元素。

这意味着这无法带来您的评论

```
<appSettings>
    <!--My Secret Encryption Key-->
    <add key="ENCRYPT_KEY" value="hunter2" xdt:Transform="Insert" />
</appSettings> 
```

但这会

```
<appSettings xdt:Transform="Remove" />
<appSettings xdt:Transform="Insert" >
    <!--My Secret Encryption Key-->
    <add key="ENCRYPT_KEY" value="hunter2"/>
</appSettings> 
```

没有其他东西需要转换，因为它完全复制了元素。

**好处**：你得到你的评论并且不必插入`xdt:Transform="Insert"`到每个关键元素中。

**缺点**：您最终会完全破坏该部分并重新添加它，最终将其附加到 Web.config 的底部。如果总格式的变化没问题，那就太棒了。它还要求您重新创建整个部分，这可能会增加转换的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-13T18:41:54.523

这不完全是您想要的，但我偶尔会发现它很有用。如果注释包含在添加的元素中，XmlTransform 将添加注释。

例如

```
<appSettings>
<remove key="comment" value="" xdt:Transform="Insert"><!-- this comment will appear in the transformed config file! --></remove>
</appSettings> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-08T23:53:34.840

不写代码是不可能的。

但是，我目前的解决方案是扩展 XDT 转换库，基本上遵循链接：[扩展 XML (web.config) 配置转换](http://sedodream.com/2010/09/09/ExtendingXMLWebconfigConfigTransformation.aspx)

这是我的示例`CommentAppend`，`CommentPrepend`它将注释文本作为输入参数，因为我相信否则`Insert`它本身不能作为您放置的注释，`xdt:Transform="Insert"`因为它是注释，所以 XDT 转换将忽略它。

```
internal class CommentInsert: Transform
{
    protected override void Apply()
    {
        if (this.TargetNode != null && this.TargetNode.OwnerDocument != null)
        {
            var commentNode = this.TargetNode.OwnerDocument.CreateComment(this.ArgumentString);
            this.TargetNode.AppendChild(commentNode);
        }
    }
}

internal class CommentAppend: Transform
{
    protected override void Apply()
    {
        if (this.TargetNode != null && this.TargetNode.OwnerDocument != null)
        {
            var commentNode = this.TargetNode.OwnerDocument.CreateComment(this.ArgumentString);
            this.TargetNode.ParentNode.InsertAfter(commentNode, this.TargetNode);
        }
    }
} 
```

和输入`web.Release.config`：

```
<security xdt:Transform="CommentPrepend(comment line 123)" >
</security>
<security xdt:Transform="CommentAppend(comment line 123)" >
</security> 
```

和输出：

```
 <!--comment line 123--><security>
  <requestFiltering>
    <hiddenSegments>
      <add segment="NWebsecConfig" />
      <add segment="Logs" />
    </hiddenSegments>
  </requestFiltering>
</security><!--comment line 123--> 
```

我目前正在使用 Reflector 来查看 Visual Studio V12.0 附带的 Microsoft.Web.XmTransform 以了解它是如何工作的，但可能最好查看[源代码本身](https://xdt.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:21:12.403

据我所知，恐怕不可能使用 XDT-Transform 添加评论。

[至少XDT-Transform 文档](http://msdn.microsoft.com/en-us/library/dd465326.aspx)中似乎没有提到它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-14T16:59:24.577

我[为 XDT 构建了一个扩展](https://github.com/akarzazi/xdt-extensions)来处理评论注入和其他相关任务。

[你可以在网上](https://akarzazi.github.io/xdt-playground)试试。

# list - 将元素附加到没有 Erlang 中的列表库模块的列表

> ID：14400256
> 
> 赞同：0
> 
> 时间：2013-01-18T13:45:27.490
> 
> 标签：list, erlang

我想将元素附加到列表中，并且不允许使用列表库或任何其他 BIF。我希望它如何的一个例子：

```
Eshell V5.9.1 (abort with ˆ G)
1> Db = db:new().
[]
2> Db1 = db:write(apple, fruit, Db).
[{apple,fruit}]
3> Db2 = db:write(cucumber, vegetable, Db1).
[{apple,fruit},{cucumber,vegetable}] 
```

我现在拥有的代码（不起作用）：

```
write(Key, Element, []) -> [{Key, Element}|[]];
write(Key, Element, [H|T]) -> [H|write(Key,Element,T)]. 
```

我得到的错误是当我这样做时：

```
3> Db2 = db:write(cucumber, vegetable, Db1).
** exception error: no match of right hand side value [{apple,fruit},{cucumber,vegetable}] 
```

我理解错误消息，但我不知道如何从这里开始......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:55:14.233

我怀疑这只是`Db2`已经有一个值的情况，它与返回值不同`db:write`（`[{apple,fruit},{cucumber,vegetable}]`根据错误消息）。键入`Db2.`以查看它具有什么值，然后键入`f(Db2).`以“忘记”它的值，以便您可以再次分配给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:15:02.480

您可以通过以下方式将元素附加到列表中`List ++ [Element]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T08:03:48.150

不建议使用 ++ 运算符附加。您应该只将它用于小列表。

你有两个选择： - lists:append （你说这不是一个选项）或 - 你可以用 | 放在列表前面 操作员。

# wordpress - Wordpress - 喷气背包无限滚动不起作用

> ID：14400260
> 
> 赞同：1
> 
> 时间：2013-01-18T13:45:43.473
> 
> 标签：wordpress

所以我在我的functions.php中添加了对无限滚动的支持，就像这样

```
add_theme_support( 'infinite-scroll', array(
    'container'  => 'content',
    'footer'     => 'page',
     'posts_per_page'    => 4
) ); 
```

这是我的模板和循环，我添加了一个 ID 为“内容”的任意 div，只是因为 jetpack 显然需要包含帖子的 div 作为 ID，但无限滚动仍然不起作用。

```
<?php 

/*
    Template Name: News
*/

?>

<?php get_header(); ?>
<div class="main-content">

    <div class="content-left">
    <div id="content">

        <?php
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        query_posts('posts_per_page=&paged=' . $paged); 
        ?>

        <?php if (have_posts()) : while ( have_posts()) : the_post(); ?>

    <div <?php post_class('clearfix') ?> id="post-<?php the_ID(); ?>">

            <div class="entrywrapper">

                <div class="entry">

                <div class="bordertop">
                 <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
                </div> <!-- end div bordertop -->

                <div class="aligncenter grey">  
                <?php the_time('M jS, Y') ?>
                </div>
                    <div class="meta">

                <span>Posted in :<?php the_category($separator = ' / '); ?></span>
                    <div class="clearfix"></div>
                </div> <!-- end div meta -->

                <?php global $more; $more = 0; ?>
                <div class="figure">
                <?php the_post_thumbnail(); ?>
                </div> <!-- end div figure //centers thumbnail -->

                      <p class="firstparaph"> <?php the_field('main_post_meta'); ?></p>

                        <?php the_content('Continue Reading >'); ?>
                        <div class="centerm">
                         <?php comments_popup_link('No Comments', '1 Comment', '% Comments', 'comments-link', ''); ?>
                        </div>              
                    <div class="postbreaker">* * *</div> <!-- end div entrybreaker -->
                </div> <!-- end div entry -->

            <div style="clear:both"></div>

            </div> <!-- end div entrywrapper -->

            <div style="clear:both"></div>

            </div> <!-- end div post -->

    <?php endwhile; endif; ?>

        <div class="navigation">
            <div class="next-posts"><?php next_posts_link('Older Posts') ?></div>
            <div class="prev-posts"><?php previous_posts_link('Newer Posts') ?></div>
        </div>

    </div> <!-- end div ID content -->
    </div> <!-- end div content-left -->

    <div class="content-right">
        <?php get_sidebar(); ?>
    </div> <!-- end div content-right -->

    <div style="clear:both;"></div>
</div> <!-- end div main-content -->
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:11:33.987

也许试试这个：

在functions.php中

```
function get_post_content() {
?>
    <div <?php post_class('clearfix') ?> id="post-<?php the_ID(); ?>">
        <div class="entrywrapper">
            <div class="entry">
                <div class="bordertop">
                 <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
                </div> <!-- end div bordertop -->
                <div class="aligncenter grey">  
                <?php the_time('M jS, Y') ?>
                </div>
                <div class="meta">
                <span>Posted in :<?php the_category($separator = ' / '); ?></span>
                    <div class="clearfix"></div>
                </div> <!-- end div meta -->
                <?php global $more; $more = 0; ?>
                <div class="figure">
                <?php the_post_thumbnail(); ?>
                </div> <!-- end div figure //centers thumbnail -->
                <p class="firstparaph"> <?php the_field('main_post_meta'); ?></p>
                <?php the_content('Continue Reading >'); ?>
                <div class="centerm">
                    <?php comments_popup_link('No Comments', '1 Comment', '% Comments', 'comments-link', ''); ?>
                </div>              
                <div class="postbreaker">* * *</div> <!-- end div entrybreaker -->
                </div> <!-- end div entry -->
            <div style="clear:both"></div>
            </div> <!-- end div entrywrapper -->

            <div style="clear:both"></div>
            </div> <!-- end div post -->
<?php
} 
```

然后在您的博客循环文件中：

```
<?php 

/*
    Template Name: News
*/

?>

<?php get_header(); ?>
<div class="main-content">

    <div class="content-left">
    <div id="content">

        <?php
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        query_posts('posts_per_page=&paged=' . $paged); 
        ?>

        <?php if (have_posts()) : while ( have_posts()) : the_post(); ?>

           <!-- MY EDIT IS HERE -->
           get_post_content();

        <?php endwhile; endif; ?>

        <div class="navigation">
            <div class="next-posts"><?php next_posts_link('Older Posts') ?></div>
            <div class="prev-posts"><?php previous_posts_link('Newer Posts') ?></div>
        </div>

    </div> <!-- end div ID content -->
    </div> <!-- end div content-left -->

    <div class="content-right">
        <?php get_sidebar(); ?>
    </div> <!-- end div content-right -->

    <div style="clear:both;"></div>
</div> <!-- end div main-content -->
<?php get_footer(); ?> 
```

# android - 检测加速度计震动android

> ID：14400261
> 
> 赞同：2
> 
> 时间：2013-01-18T13:45:43.887
> 
> 标签：android, accelerometer, shake

我正在尝试检测左，右，上和下震动。我研究并找到了这段代码。

```
public void onSensorChanged(SensorEvent event) {
            // TODO Auto-generated method stub

            if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

                float[] values = event.values;

                // Movement
                float x = values[0];
                float y = values[1];
                float z = values[2];

                long actualTime = System.currentTimeMillis();
                if ((actualTime - lastUpdate) > 100) 
                {
                    long diffTime = (actualTime - lastUpdate);
                    lastUpdate = actualTime;

                    if(Round(x,4)>8.0000){
                        Log.d("sensor", "=====LEFT====");

                    }
                    else if(Round(x,4)<-8.0000){
                        Log.d("sensor", "=====RIGHT====");

                    }
                    else if(Round(z,4) < -0.0){
                       Log.d("sensor", "=====UP====");

                    }

                    else if(Round(y,4) < 1.0){
                        Log.d("sensor", "=====DOWN====");

                    }

                float speed = Math.abs(x+y+z - last_x - last_y - last_z) / diffTime * 10000;

                if (speed > SHAKE_THRESHOLD) {
                    //Log.d("sensor", "shake detected w/ speed: " + speed);
                    //Toast.makeText(this, "shake detected w/ speed: " + speed, Toast.LENGTH_SHORT).show();
                }
                last_x = x;
                last_y = y;
                last_z = z;
                }
            }

        } 
```

我试图研究它，但我有一些问题。
1\. 在哪里可以设置每次抖动检测后的延迟？我希望它在最后一次检测到震动的 1 秒后检测到震动。
2\. 为什么我把它放在一个平面上，它总是检测到向下。
3\. 我无法检测到正确的运动抖动

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:10:22.253

首先，这段代码似乎检测的是运动而不是摇晃（我理解摇晃是一种单向运动，然后反向运动），这可能会导致您无法理解它的工作原理。

> 我在哪里可以设置每次抖动检测后的延迟？我希望它在最后一次检测到震动的 1 秒后检测到震动。

`if ((actualTime - lastUpdate) > 100)`是检测之间的间隔发生的地方 - 这里的 100 告诉程序只看到 100 毫秒后的变化，所以如果你想要 1 秒，请将其更改为 1000

> 为什么如果我将它放在平坦的表面上，它总是会检测到向下。

我不完全确定这里的上下文和方向，因为它不清楚，但不要忘记你认为的“向下”可能不是在你的空间中，而是在手机中，只有当手机是直立的。如果手机在背面，左右是相同的，但向下（即朝向地面）实际上是传感器的背面，因为它朝向手机的背面。

> 1.  我无法检测到正确的运动抖动

TBH 我不知道为什么，这里的代码看起来不错。可能是电话问题，可能是实现问题（正如我所说，上面的代码是整体运动，而不是返回的“摇动”，所以它可能是你如何正确地摇动它来测试它不会触发它，但你的左摇正在触发它

# bash - Bash - echo `basename $HOME` 和 echo $(basename $HOME) 之间的区别

> ID：14400264
> 
> 赞同：6
> 
> 时间：2013-01-18T13:45:50.060
> 
> 标签：bash

非常感谢您的帮助。

标题说明了一切：使用之间有什么区别：

```
echo `basename $HOME` 
```

和

```
echo $(basename $HOME) 
```

请注意，我知道 basename 命令的作用，两种语法都是有效的，并且两个命令都给出相同的输出。

我只是想知道两者之间是否有任何区别，如果可能的话，为什么有两种语法。

干杯

拉斐尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:48:25.807

第二种形式具有不同的转义规则，使其更容易嵌套。例如

```
echo $(echo $(basename $HOME)) 
```

我将把如何用 ` 做为读者的练习，它应该证明是有启发性的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T13:48:37.537

它们是相同的之一。
请阅读[此](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html#sect_03_04_04)内容。

**编辑**（来自链接）：
*命令替换*

命令替换允许命令的输出替换命令本身。当像这样包含命令时会发生命令替换：

```
$(command) 
```

或者像这样使用反引号：

```
`command` 
```

`Bash`通过执行*COMMAND*并用命令的标准输出替换命令替换来执行扩展，并删除任何尾随换行符。嵌入的换行符不会被删除，但它们可能会在分词过程中被删除。

```
$ franky ~> echo `date`
Thu Feb 6 10:06:20 CET 2003 
```

当使用旧式反引号形式的替换时，反斜杠保留其字面含义，除非后面跟“$”、“`”或“\”。前面没有反斜杠的第一个反引号终止命令替换。使用`$(COMMAND)`表格时，括号之间的所有字符组成命令；没有人受到特殊对待。

命令替换可能是嵌套的。要在使用反引号形式时嵌套，请使用反斜杠转义内部反引号。

如果替换出现在双引号中，则不会对结果执行分词和文件名扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:55:56.200

它们是命令替换的替代语法。正如@Steve 提到的，他们有不同的引用规则，而且反引号更难嵌套。另一方面，它们更便于使用旧版本的 bash 和其他 shell，例如 csh。

# java-me - 代号一个等待对话框

> ID：14400270
> 
> 赞同：1
> 
> 时间：2013-01-18T13:46:14.713
> 
> 标签：java-me, dialog, progressdialog, codenameone

我想在某些事件发生时（例如收到短信时）显示一段时间（例如 2 秒），然后在 2 秒后自动隐藏。

我怎样才能在代号中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:13:06.180

该类`Dialog`有一个`show()`接受超时作为其参数之一的方法。如果我没记错的话，还有一种方法可以`setTimeout`在对话框实例上。

# angularjs - 将 PIE.htc 与 AngularJS 一起使用的正确方法是什么？

> ID：14400271
> 
> 赞同：2
> 
> 时间：2013-01-18T13:46:18.037
> 
> 标签：angularjs, css3pie

我有一个包含许多部分的站点，其中一个具有嵌套的 ng-repeats，可呈现带有圆角的输入表单。在 IE 中，只有在这种嵌套重复的情况下，IE 控制台中才会出现一般 PIE 错误，并且看起来原始模板（ng-show 不起作用，国际化不起作用）除了所有预期的 DOM。这让我觉得 PIE 脚本在 Angular 完成工作之前正在运行。

是否有任何最佳实践可以让 PIE.htc 与 Angular 一起工作？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:19:18.450

好吧，您将要使用[PIE.js 版本的 PIE](http://css3pie.com/documentation/pie-js/)。

从那里应该是一些简单的事情，比如创建一个将 PIE 应用于所需元素的指令：

```
app.directive('applyPie', function() {
   return {
      restrict: 'A',
      link: function(scope, elem, attr) {
         PIE.attach(elem[0]);      
      }
   }
}); 
```

然后你会像这样使用它：

```
<div class="rounded" apply-pie>Wee! I'm rounded</div> 
```

# git - git add 无法添加从其他 git 存储库克隆的文件到 git 存储库缓存

> ID：14400273
> 
> 赞同：1
> 
> 时间：2013-01-18T13:46:26.877
> 
> 标签：git

我从 github 克隆了 3 个 repo 并存储在 中`g://code/`，然后在远程 github 和执行中创建了一个 repo `g://code/`：

```
git init 
git add remote origin git@github.com:xxx/xxxx.git     "xxx" is my github username 
git pull origin master

git add . 
git status 
```

当时看到输出，发现在git缓存系统中添加了一些文件但是没有添加一些文件。

我忽略这个问题并编写命令

```
git commit -m 'xxx'
git push origin master 
```

我们浏览到我的 github.com 并找到一些添加到我的 github 存储库的文件，但有些文件没有。

问题是：`g://code/`目录下有3个子目录 执行命令后`git add .`看到结果`git status`

我发现 1 个子目录所有文件都添加到 git 缓存中，但其他子目录作为单个文件添加到 git 缓存中，子目录文件未添加到 git 缓存中。

我不知道为什么？

# oop - 我如何解决一个类必须从 2 个基类继承的问题

> ID：14400278
> 
> 赞同：-1
> 
> 时间：2013-01-18T13:46:40.963
> 
> 标签：oop

想知道处理这种情况的最佳方法。如何避免重复元素。

```
class ABO -> Need method A and B
method C

class AO : O
method A
class BO : O
method B

class O 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:50:02.123

你可以避免继承。如果您只需要功能而不需要**IS-A**关系，只需使用组合即可。

保存所需类的 2 个本地成员，并创建一个将调用成员函数的包装函数。

类 C 伪代码示例：

```
class ABO
{
   AO m_ao;
   BO m_bo;

public:

   MethodA ()
   {
       m_ao.MethodA();
   }

   MethodB()
   {
      m_bo.MethodB();
   }
} 
```

# perl - 使用 DynaLoader.pm 在 Perl 中加载 Ada 共享对象

> ID：14400281
> 
> 赞同：11
> 
> 时间：2013-01-18T13:46:55.687
> 
> 标签：perl, linker, shared-libraries, ada

长期聆听者，第一次来电者。我知道这是一个有点模糊的问题，不要期望太多。:-)

我有以下 Ada 文件：

**迎宾员.ads**

```
package Greeter is
    procedure Hello;
end Greeter; 
```

**迎宾员.adb**

```
with Ada.Text_IO; use Ada.Text_IO;
package body Greeter is
    procedure Hello is
    begin
        Put_Line ("Hello, world!");
    end Hello;
end Greeter; 
```

并将它们编译成这样的共享对象：

```
gnatmake -z -fPIC greeter.adb
gcc -shared -o libgreeter.so greeter.o 
```

这编译得很好。`nm`显示以下符号：

```
$ nm -D libgreeter.so 
                 w _Jv_RegisterClasses
0000000000201028 A __bss_start
                 w __cxa_finalize
                 w __gmon_start__
                 U __gnat_eh_personality
0000000000201028 A _edata
0000000000201038 A _end
00000000000006a8 T _fini
0000000000000520 T _init
                 U ada__text_io__put_line__2
0000000000201018 D greeter_E
000000000000063c T greeter__hello 
```

现在我尝试在 Perl 中加载该共享对象：

```
#!/usr/bin/env perl

use 5.014;
use strict;
use warnings;

#BEGIN { $ENV{PERL_DL_DEBUG} = 1 };

package Greeter
{
    use constant ADADIR => '/usr/lib/gcc/x86_64-linux-gnu/4.4/rts-native/adalib/';
    use constant OURDIR => do { (my $f = __FILE__) =~ s{[^/]+$}//; $f || "." };

    require DynaLoader;
    our @ISA = 'DynaLoader';

    my $runtime = DynaLoader::dl_load_file(
        ADADIR.'/libgnat.so',
    ) or die DynaLoader::dl_error();

    my $gep = DynaLoader::dl_find_symbol(
        $runtime,
        '__gnat_eh_personality',
    ) or die DynaLoader::dl_error();

    my $libref = DynaLoader::dl_load_file(
        OURDIR.'/libgreeter.so',
        0x01,
    ) or die DynaLoader::dl_error();

    my $func = DynaLoader::dl_find_symbol(
        $libref,
        'greeter__hello',
    ) or die DynaLoader::dl_error();

    print $func, $/;
} 
```

但这会引发以下消息：

**./libgreeter.so：未定义符号：__gnat_eh_personality 在 ./greeter.pl 第 26 行。**

有人有任何提示吗？有没有比我应该使用的 DynaLoader 更好/更简单的东西？

我有一个包含所有相关文件的存储库：

*   [https://bitbucket.org/tobyink/ada-perl-mashup](https://bitbucket.org/tobyink/ada-perl-mashup)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T16:35:23.957

我对 Perl 方面无能为力（您需要 5.14，Mac OS X 有 5.12，Debian 6 有 5.10）。也就是说，我可以帮助构建用于 C 主和直接链接的库......

GNAT 构建过程非常复杂，有两个工具可以支持它，`gnatmake`并且`gprbuild`. 很可能（写于 2015 年 9 月）`gnatmake`将失去构建库的能力，因此`gprbuild`是更好的选择。

我认为您需要一个*独立的库项目*（即具有控制 Ada 精化的初始化和完成操作的项目；如果您不初始化 Ada 库，您将获得 SEGV 或其他不良行为）。你会在[这里](http://docs.adacore.com/live/wave/gprbuild/html/gprbuild_ug/gprbuild_ug/gnat_project_manager.html#stand-alone-library-projects)找到建造一号楼的内幕。

`greeter.gpr`我写的是

```
project Greeter is
   for Library_Name use "greeter";
   for Library_Kind use "relocatable";
   for Library_Dir use "lib";
   for Library_Interface use ("greeter");
   for Library_Auto_Init use "true"; -- the default, I think
   for Object_Dir use ".build"; -- to keep temp objects out of the way
end Greeter; 
```

该`Library_Name`属性控制库的名称；`libgreeter.dylib`在 Mac OS X 上，`libgreeter.so`在 Linux 上。

`Library_Kind`属性也可以是，在这种`"static"`情况下名称是`libgreeter.a`。但是，*独立库必须是可重定位*的。

您必须提供的`Library_Dir`属性（与上述两个一起）以完全创建库，控制创建库的位置；在这种情况下，在`lib/`.

您必须提供该`Library_Interface`属性以使其成为独立库并生成控制 Ada 细化的初始化和完成操作。它们被称为*library_name*`init`和*library_name*`final` - 在这里, `greeterinit`, `greeterfinal`.

如果`Library_Auto_Init`是`"false"`你必须自己调用初始化和终结操作，如果是`"true"`，它们是自动管理的。

好的，通过以下方式构建库

```
gprbuild -p -P greeter 
```

（`-p`说“创建任何需要的输出目录”，`-P`指定项目文件）。

我盖了`greeter.c`

```
#include <stdio.h>

extern void greeter_hello();

int main()
{
  greeter__hello();
  return 0;
} 
```

使用

```
$ gcc greeter.c -o greeter -L lib -l greeter 
```

并运行（在 Linux 上）使用

```
$ LD_LIBRARY_PATH=./lib ./greeter 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T15:32:48.120

鉴于没有太多 Perl 知识，我会尽我所能。

在我看来，perl 中的[Dynaloader](http://perldoc.perl.org/DynaLoader.html)是一个实用程序，可让您将动态可加载库（Unix 系统上的 lib*.so ）加载到 perl 程序中。

为了使 Ada 程序有效，您需要考虑几件事情。

1.  您需要将您的 Ada 程序构建为适当的动态库。看起来你是这样做的。但是，我不是这方面的专家，所以也许你错过了一些东西。我强烈建议在这方面查看 TFM。
2.  您需要正确调用您的 Ada 代码。Ada 程序通常需要在运行任何实际代码之前执行一个称为“精化”的过程。为了实现这一点，大多数 Ada 编译器为程序创建了一个特殊的入口点，而不仅仅是使用与“主”例程相关联的入口点。我认为 Gnat's 类似于`C_yourprogramname`，但不要让我这么认为。即使您正在实现某种类型的库，也应首先运行详细说明（在某些特殊情况下执行，此处不适用）。但是，如果您希望例程成为从 Ada 外部调用的库例程，则通常不需要“main”，因此需要一些额外的步骤。[他们的用户指南](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/Binding-with-Non_002dAda-Main-Programs.html#Binding-with-Non_002dAda-Main-Programs)中描述了如何使用 Gnat 执行此操作，`adainit`在从外部运行任何 Ada 例程之前，并`adafinal`在完成后调用。

# android - 将地理编码器限制在国家/地区

> ID：14400286
> 
> 赞同：2
> 
> 时间：2013-01-18T13:47:17.233
> 
> 标签：android, maps, geocode, country

如何使用地理编码器限制国家/地区？我使用此代码，试图只查看美国，但它返回来自意大利和其他国家的结果。

```
Geocoder geocoder = new Geocoder (getActivity(), Locale.US); 
```

我有搜索，但我没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-18T02:06:33.340

我最近通过简单地附加`", USA"`到用户输入的末尾解决了这个问题。只需几行代码即可完美满足我们的需求：

```
public String restrictQueryToUsa(@NonNull String query) {
    String suffix = ", USA";
    return query.toUpperCase().endsWith( suffix ) ? query : query + suffix;
} 
```

* * *

**注意**
我已经在各种输入上验证了这一点，包括：

*   白金汉宫
*   大街 1234 号
*   荷兰
*   伦敦
*   东京
*   麦当劳
*   像 90210 这样的邮政编码工作
*   SFO 等机场代码也可以使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:39:43.573

您应该在 AutoComplete 适配器中实现 getFilter 方法，该方法应用于您的 AutoCompleteTextView，您还应该实现“Filterable”

```
private class AutoCompleteAdapter extends ArrayAdapter<Address> implements
            Filterable {
.....

@Override
        public Filter getFilter() {
            Filter myFilter = new Filter() {
                @Override
                protected FilterResults performFiltering(
                        final CharSequence constraint) {
                    List<Address> addressList = null;
                    if (constraint != null) {
                        try {
                            addressList = mGeocoder.getFromLocationName(
                                    (String) constraint, 5);
                        } catch (IOException e) {
                        }
                    }
                    if (addressList == null) {
                        addressList = new ArrayList<Address>();
                    }

                    final FilterResults filterResults = new FilterResults();
                    filterResults.values = addressList;
                    filterResults.count = addressList.size();

                    return filterResults;
                }

                @SuppressWarnings("unchecked")
                @Override
                protected void publishResults(final CharSequence contraint,
                        final FilterResults results) {
                    clear();
                    for (Address address : (List<Address>) results.values) {
                        try {

/* HERE IS YOUR COUNTRY CODE / CONDITIONS TO FILTER THE SUGGESTED ADDRESS*/

                            if (address.getCountryCode().equals("US")) { 
                                add(address);
                            }
                        } catch (Exception e) {
                            // TODO: handle exception
                        }

                    }
                    if (results.count > 0) {
                        notifyDataSetChanged();
                    } else {
                        notifyDataSetInvalidated();
                    }
                }

                @Override
                public CharSequence convertResultToString(
                        final Object resultValue) {
                    return resultValue == null ? ""
                            : createFormattedAddressFromAddress((Address) resultValue);
                }
            };
            return myFilter;
        }
} 
```

# c - 使用共享内存实现管道

> ID：14400289
> 
> 赞同：0
> 
> 时间：2013-01-18T13:47:38.083
> 
> 标签：c, shared-libraries, pipe, shared-memory

我正在使用共享内存实现管道。我应该只写和触摸图书馆，而不是`main()`.

我遇到了一个问题：

可以说这是`main()`一些使用我的图书馆的用户`shared_memory_pipe.h`：

```
#include "shared_memory_pipe.h"

int main() {
    int fd[2];
    shared_memory_pipe(fd);
    if (fork()) {
        while(1) {}
    }
    shared_memory_close(fd[0]);
    shared_memory_close(fd[1]);
} 
```

在这个例子中，我们看到孩子关闭了他的两个 fd，但是父亲陷入了无限循环，并且永远不会关闭他的 fd。在这种情况下，我的管道应该仍然存在（与所有写入 fd 已关闭、所有读取 fd 已关闭或所有已关闭的情况相比，因此管道应该死掉）。

正如我之前所说，我只编写库 ( `shared_memory_pipe.h`)。那么，在图书馆内，我怎么知道是否`fork()`已经制作了a？

我怎么知道有另一个进程对我的共享内存管道有读/写端，所以我会知道关闭/不关闭我的共享内存管道？

我听说过一个命令，他知道有一个`fork()`或类似的东西，但我没有找到它，我不知道它。

提前谢谢！请询问您是否需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:52:41.960

在任何分叉之前，父级可以将结果存储`getpid()`到全局`pid_t pid_parent`.

比在以后的时间点，该过程不能再次测试`pid_parent`使用`getpid()`。

如果 than`getpid()`的结果与进程不同，`pid_parent`则距父进程至少有一个 fork() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:30:17.917

代码的哪一部分负责关闭 fd？

如果它是用户的代码，那么 a`fork()`不是你的问题。毕竟，调用者可以`execve`对不同的程序执行操作（匿名管道的常见用法），因此您的库代码现在已从进程中消失，即使 fd 仍处于打开状态，因此您无法处理。

如果您有一个库 API 来关闭 FD，那么您可以做的就是这些。一个已执行的程序无论如何都不会调用您的库。

# ios - 具有多个 pathExtension 的 HandleOpenURL

> ID：14400291
> 
> 赞同：0
> 
> 时间：2013-01-18T13:47:49.757
> 
> 标签：ios, email, path, export, mime-types

我正在构建一个应用程序，允许用户导出导入数据文件并通过电子邮件发送它们。

所以我创建了一个扩展名为“.myAppExtension”的数据文件类型。

第一次一切都很顺利。我无法导出和发送电子邮件。当我打开电子邮件时，该方法确实有效。

```
-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url {

if (url != nil && [url isFileURL]) {
    NSLog(@"%@",url);
    NSLog(@"%@",[url pathExtension]);

    if([[[url pathExtension] lowercaseString] isEqualToString:[@"myAppExtension"  lowercaseString]]){
        //Deal with received file 

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Export ok" message:[NSString stringWithFormat:@"This file has been added : %@",[url lastPathComponent]] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil,nil];
        [alert show];
    }else{

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Export failed" message:[NSString stringWithFormat:@"This extention is not supported : %@",[url pathExtension]] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil,nil];
        [alert show];
    }

}
return YES;
} 
```

我的问题是，当我想导出扩展名为“otherExtension”的其他类型的文件时。我没有在我的应用程序中为此扩展创建数据类型。

所以我用第二种类型的文件导出并发送了一封电子邮件。文件名显示在电子邮件“file.otherExtension”中。但是，这就是问题所在，当我点击此邮件附件时，电子邮件应用程序让我可以在我的应用程序中打开它。这不是我想要的，正如我所说，我没有为“otherExtension”创建数据类型。

编辑：这就是我在 myApp-info.plist 中创建文件类型的方式：

![在此处输入图像描述](../Images/a456bc2767d9f59a1f26c8ecf74629d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:42:45.143

如果有人感兴趣，问题出在发送电子邮件功能上。

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init] ;
[picker setSubject:mailSubject];
[picker addAttachmentData:codedData mimeType:@"application/myApp" fileName:[filePath lastPathComponent]];
[picker setToRecipients:[NSArray array]];
[picker setMessageBody:mailBody isHTML:NO];
[picker setMailComposeDelegate:self];
[currentMainViewController presentViewController:picker animated:YES completion:nil]; 
```

通过将 mime 类型添加到邮件附件，接收应用程序正在使用它来读取文件。用“nil”替换 mime 类型解决了我的问题。

```
[picker addAttachmentData:codedData mimeType:nil fileName:[filePath lastPathComponent]]; 
```

# c++ - 打印地图时出现未知的分段错误

> ID：14400292
> 
> 赞同：0
> 
> 时间：2013-01-18T13:47:51.547
> 
> 标签：c++, segmentation-fault

我得到这个：

```
程序收到信号 SIGSEGV，分段错误。
0x00007ffff7580d75 在?? () 来自 /lib/x86_64-linux-gnu/libc.so.6

```

我能知道为什么会发生段错误吗？

发生此错误时，我目前正在文件中打印 C++ 映射的内容。地图大小将以 MB 为单位，这可能是个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:52:43.003

尝试为 libc 安装调试符号，它们应该以包的形式提供。在 ubuntu 中，它们可以在包 libc-dbg 中找到。那么 Gdb 应该会为您产生更好的输出。

# jquery - 有没有办法使用 jQuery Mobile 动态调整视频/图像的大小？

> ID：14400295
> 
> 赞同：0
> 
> 时间：2013-01-18T13:48:12.343
> 
> 标签：jquery, image, mobile, video, resize

这个问题困扰了我很长时间，但我仍然找不到解决方案。

有谁知道如何在使用 jQuery Mobile 开发的移动版网站中动态调整视频（从 youtube/vimeo 等嵌入）和图像的尺寸。

我的场景是网站的移动版本从与主网站相同的数据库/表中提取内容，其中图像和视频比手持设备应该大得多。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:55:47.340

不要混合图像和视频调整大小问题。建议在服务器端（PHP/Python、C# 等）调整图像大小，以减少流量和更快地加载移动网站。视频可以在服务器端使用 FFMpeg 调整大小，如果视频来自外部托管（如 youtube），则以最低质量开始播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:58:37.757

我写了这个函数：

```
/**
 * resize_embedded resizes embedded videos like youtube videos;
 * Examples: 
 *  - resize_embedded($('youtube_div'), 300, 200);
 *  - Fiddle: http://jsfiddle.net/xjxVC/1
 *
 * Parameters:
 * @param jquery the element that contains the embedded media
 * @param number the new width
 * @param number the new height
 *
 */
function resize_embedded(){

    // Did we receive 3 correct parameters
    if(arguments.length === 3 && $(arguments[0]).length && isNumber(arguments[1]) && isNumber(arguments[2])) 
        ;
    else
        return 0;

    // Clone embedded element
    $c = $(arguments[0]).clone();

    // Resize clone (replace width/height of all children who have them) 
    $c
        .attr('width', arguments[1])
        .attr('height', arguments[2])
        .children().each(function(){     
            $(this).attr('width') && $(this).attr('width', arguments[1]);
            $(this).attr('height') && $(this).attr('height', arguments[2]);
    })

    // Replace target with clone
    $(arguments[0]).replaceWith($c);
}

function isNumber(n){
    return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

演示：http: [//jsfiddle.net/xjxVC/1](http://jsfiddle.net/xjxVC/1)

# wpf - WPF datagrid 绑定复杂类型属性返回

> ID：14400296
> 
> 赞同：2
> 
> 时间：2013-01-18T13:48:15.120
> 
> 标签：wpf, data-binding, datagrid, complextype

我有一个简单的 Datagrid 从 ViewModel 绑定到 ObservableCollection。此 ObservableCollection 由自定义类型组成，例如 ObservableCollection。

ComplexType 只有 2 个属性，并且只有一个在屏幕上是可编辑的。另一个是依赖于第一个的布尔类型。

当我编辑第一个属性时，**它会反映到 ComplexType 并且它还会更改第二个属性**。但是第二个属性在屏幕上没有改变。

如何更新屏幕上的第二个属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:27:34.573

试试这个：

```
public class ComplexType:INotifyPropertyChanged
{
    private object someProperty1;
    public object SomeProperty1
    {
        get{return someProperty1;}
        set
        {
            someProperty1=value;
            SomeProperty2=somefunc(someProperty1);

            If(PropertyChanged!=null){PropertyChanged(this, new PropertyChangedEventArgs(SomeProperty1));}
        }
    }

    private object someProperty2;
    public object SomeProperty2
    {
        get{return someProperty2;}
        set
        {    
        someProperty2=value;

        If(PropertyChanged!=null){PropertyChanged(this, new PropertyChangedEventArgs(SomeProperty2));}
        }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:05:21.523

仅当添加、删除项目或刷新整个集合时，可观察集合才提供通知。如果您希望 UI 在更改时刷新，则需要确保每个属性都引发 PropertyChanged 事件或者是依赖属性。

# android - 显示错误消息的最佳实践

> ID：14400298
> 
> 赞同：40
> 
> 时间：2013-01-18T13:48:23.613
> 
> 标签：android

**向用户显示错误消息的最佳方式是什么？**

假设以下场景（例如，此问题涉及常见问题，何时可能在服务中发生错误，在线程中等）：

1.  我们为某些屏幕加载一些数据
2.  发生错误（互联网不可用，服务器异常，其他异常......）

如何显示错误？可能的解决方案：

1.  显示 toast - 最简单的方法，但不是最好的（对于许多错误，我们会看到很多 toast，即使应用程序在后台运行）
2.  在屏幕某处显示错误（例如 gmail 在列表底部显示“无连接”并建议重试）

你的经验是什么？你如何显示用户错误？是否有一些指南解释什么是最好的方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T14:15:08.820

我使用了 alertDialog .. 参考图片。进一步谷歌它

供用户注意。

![在此处输入图像描述](../Images/4f0b2f92fffe6e186e6c1590525e494f.png)

对于表单验证编辑文本使用`editText.setError("Your error message")`方法

![用于表单验证编辑](../Images/6f6c7648db717c8538005e785dc4f846.png)

互联网连接失败

![在此处输入图像描述](../Images/178a8cec042e4f0d5af2794f3b89672b.png)

内部连接失败，重试。

![在此处输入图像描述](../Images/1abf57b6b9a10fe5ba3f0c09d76c168a.png)

**更新 1**

为了显示一些自动终止信息/消息，我们使用`Toast` 例如通知用户您的`Email was sent Successfully.`我们可以使用 Toast，如下所示

[![在此处输入图像描述](../Images/6633fe6bde6613440e87f00194321847.png)](https://i.stack.imgur.com/3umGD.png)

Toast.makeText(context, "电子邮件发送成功。", duration).show()

注意：用户无法与默认 toast 交互，另请参阅[自定义 Toast 布局](https://stackoverflow.com/questions/11288475/custom-toast-in-android-a-simple-example)

另一种选择是使用新的`Snackbar`

[![在此处输入图像描述](../Images/ca2e51d22a3c4abdce8ee6d1f43ab66a.png)](https://i.stack.imgur.com/sp7I7.png)

希望这会有所帮助

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-09-12T21:01:44.420

这取决于应用程序，以及应用程序遇到此错误后能够执行的操作。

Google 在[Material Design Guide](https://www.google.com/design/spec/material-design/introduction.html)中建议处理这些类型的消息的两种方法是：

[对话框](https://www.google.com/design/spec/components/dialogs.html#dialogs-alerts)（在本例中为警报对话框）：

[![警报对话框](../Images/13d7c2797c8377797bd9a968e1302462.png)](https://i.stack.imgur.com/c2emw.png)

和[小吃店](https://www.google.com/design/spec/components/snackbars-toasts.html)：

[![小吃店](../Images/d30ad70a02b1039c42af5ea54c4f32fc.png)](https://i.stack.imgur.com/gpujQ.png)

使用您的示例：从远程服务器请求了一些数据，但由于某些错误或异常，获取失败并且没有返回数据。

此时，错误消息的类型将取决于应用程序在没有该数据的情况下将如何运行。如果应用程序将按原样执行，这意味着获取类似于后台更新，那么要显示的适当内容将是 Snackbar。为什么？

从指南：

> Snackbars 通过在屏幕底部显示一条简短消息来提供有关操作的轻量级反馈。Snackbars 可以包含一个动作。

轻量级确实是这里的原因。如果应用程序在没有后台数据获取的情况下运行，则不应使用消息阻止 UI。只要让用户知道事情并没有按照他们应该的方式进行，这样他就可以在他关心的时候做点什么。

这是取自[指南](https://www.google.com/design/spec/components/snackbars-toasts.html#)的示例：

[![在此处输入图像描述](../Images/f6a35c57d589758091d4a76d0a0b38f8.png)](https://i.stack.imgur.com/vhjRt.gif)

代码：[关于 Snackbars 的开发者文档](https://developer.android.com/reference/android/support/design/widget/Snackbar.html)

*永远不要*使用吐司。Toast 太小，太简短，可能会被忽视。使用小吃吧。

**但是**，如果您的应用程序无法运行，或者在没有该数据的情况下只会显示空白屏幕，则正确的做法是显示警报对话框。

没有人希望看到的只是一个空白屏幕，如果您不能用数据填充它，您需要为用户提供一个屏幕，他们可以从中执行替代功能，即使那是退出应用程序。

来自警报指南：

> 警报通知用户在继续之前需要他们确认或确认的情况或操作。根据所传达信息的严重程度和影响，它们的外观略有不同。
> 
> 警报是中断性的、紧急的，并且在用户做出决定之前会阻止用户继续操作。

和

> 消除 Snackbars 的歧义：与 Alerts 相比，Snackbars 提供可选但重要的信息或操作，并且通常出现在操作之后。例如，使用提醒确认放弃草稿。使用快餐栏呈现撤消操作，因为该操作是可选的，用户可以继续其主要任务而无需执行操作。

因此，如果应用程序在没有这些数据的情况下无法运行，请使用[警报对话框](https://developer.android.com/reference/android/app/AlertDialog.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T13:53:17.283

除了吐司之外的任何东西。查看面包块： [http ://android.cyrilmottier.com/?p=773](http://android.cyrilmottier.com/?p=773)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:43:58.447

我会说这取决于您的应用程序当前是否有可见的活动活动。如果是这样，您可以使用已经建议的任何技术，而不会使用户对上下文等感到困惑。

如果错误/消息来自后台代码（例如服务），并且您的应用程序未处于活动状态，则[通知](http://developer.android.com/design/patterns/notifications.html)是一个不错的选择。另外，请查看[开发人员](http://developer.android.com/design/patterns/confirming-acknowledging.html)网站上描述的指南/模式。

# entity-framework - 两个具有相同名称和选择类型的过程，但 EF 抱怨数据读取器不兼容

> ID：14400305
> 
> 赞同：2
> 
> 时间：2013-01-18T13:48:45.547
> 
> 标签：entity-framework, stored-procedures, sql-server-2008-r2

我在两个数据库中有两个相同的程序，我的意思是：

*   一样的名字
*   相同的参数名称和类型
*   以返回相同列类型和名称的选择结束（如果我放一个`SELECT ... INTO table`它会生成完全相同的表）。

唯一不同的是为最终选择构建 sql 查询的代码。如果我在数据库 1 上使用 EF，它会按预期工作，但如果我在数据库 2 上运行代码，它会以错误结束：

> 数据读取器与指定的“Ctx.Procedure_Result”不兼容。类型的成员“FooId”在数据读取器中没有同名的对应列。

我正在使用：

*   实体框架 4.2
*   视觉工作室 2010
*   Sql Server 2008 R2

我没有足够的 EF 内部知识来理解为什么会发生这种情况。我的想法是必须有一些列类型/名称嗅探机制，它们不会嗅探相同的东西。

编辑1：

该过程不会“返回”表类型，它只是“选择”一些行。此选择结果映射到 EDMX 中的 ComplexType。

随时询问更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:57:57.213

我的错，正如我建议的那样，我使用 SQL Server Profiler 跟踪了 EF 查询。

事实上，EF 在一个可选参数中使用了 NULL，它破坏了过程中的 sql 查询（'select ...' + NULL => NULL）。

对于 NULL 查询，该过程根本不选择任何列，它会使 EF 数据读取器崩溃。

# scala - 通过对祖先类型的引用在并行集合上调用 map

> ID：14400307
> 
> 赞同：1
> 
> 时间：2013-01-18T13:49:01.087
> 
> 标签：scala, parallel-collections

我尝试使其可选择`map`顺序或并行运行操作，例如使用以下代码：

```
val runParallel = true
val theList = List(1,2,3,4,5)
(if(runParallel) theList.par else theList) map println //Doesn't run in parallel 
```

我注意到的是，“地图”操作并没有像我预期的那样并行运行。虽然没有条件，但它会：

```
theList.par map println   //Runs in parallel as visible in the output 
```

`(if(runParallel) theList else theList.par)`我希望是这两种类型的最接近的共同祖先的表达式的类型，`theList`并且`theList.par`是一种可怕的类型，我不会在这里粘贴，但看起来很有趣（通过 scala 控制台:)

```
:type (if(true) theList else theList.par) 
```

为什么`map`并行集合不并行工作？

更新：这在[SI-4843](https://issues.scala-lang.org/browse/SI-4843)中进行了讨论，但从 JIRA 票证中不清楚为什么会在 Scala 2.9.x 上发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:22:36.233

为什么会发生这种情况的解释说来话长：在 Scala 2.9.x（我不知道其他版本）中，过滤器或映射等集合方法依赖于`CanBuildFrom`机制。这个想法是您有一个隐式参数，用于为新集合创建构建器：

```
def map[B, That](f: A => B)(implicit bf: CanBuildFrom[Repr, B, That]): That = {
    val b = bf(repr)
    b.sizeHint(this) 
    for (x <- this) b += f(x)
    b.result
  } 
```

由于这种机制，map 方法仅在`TraversableLike`trait 中定义，其子类不需要覆盖它。如您所见，在方法映射签名内部有许多类型参数。让我们看看琐碎的：

*   这`B`是新集合的元素的类型
*   `A`是源集合中元素的类型

让我们看看更复杂的：

*   `That`是新的集合类型，可以与当前类型不同。一个经典的例子是当你使用 toString 映射 BitSet 时：

    ```
     scala> val a = BitSet(1,3,5)
     a scala.collection.immutable.BitSet = BitSet(1, 3, 5)
     scala>  a.map {_.toString}
     res2: scala.collection.immutable.Set[java.lang.String] = Set(1, 3, 5) 
    ```

由于创建地图是非法的，`BitSet[String]`因此您的地图结果将是`Set[String]` 最终`Repr`是当前集合的类型。当您尝试将集合映射到函数时，编译器将使用类型参数解析合适的 CanBuildFrom。

由于它是合理的，map 方法已在并行集合中被覆盖，`ParIterableLike`如下所示：

```
 def map[S, That](f: T => S)(implicit bf: CanBuildFrom[Repr, S, That]): That = bf ifParallel { pbf =>
    executeAndWaitResult(new Map[S, That](f, pbf, splitter) mapResult { _.result })
  } otherwise seq.map(f)(bf2seq(bf)) 
```

如您所见，该方法具有相同的签名，但它使用了不同的方法：它测试提供的是否 `CanBuildFrom`是并行的，否则将退回到默认实现。因此，Scala 并行集合使用特殊的 CanBuildFrom（并行集合），它为 map 方法创建并行构建器。

但是，当你这样做时会发生什么

```
(if(runParallel) theList.par else theList) map println //Doesn't run in parallel 
```

map 方法是在结果上执行的

```
 (if(runParallel) theList.par else theList) 
```

其返回类型是两个类的第一个共同祖先（在这种情况下，只是一定数量的特征混合在一起）。既然是共同祖先，就是类型参数`Repr`会是两种集合的某种共同祖先的表示，姑且称之为`Repr1`。

* * *

**结论**

当您调用该`map`方法时，编译器应该找到一个适合`CanBuildFrom[Repr, B, That]`该操作的方法。由于我们`Repr1`不是并行集合中的一个，因此不会有任何`CanBuildFrom[Repr1,B,That]`能够提供并行构建器的能力。这实际上是关于 Scala 集合实现的正确行为，如果行为不同，则意味着非并行集合的每个映射也将并行运行。

这里的重点是，对于 Scala 集合在 2.9.x 中的设计方式，没有其他选择。如果编译器没有`CanBuildFrom`为并行集合提供 a，则映射将不是并行的。

# c# - 加密表单应用程序的连接字符串

> ID：14400308
> 
> 赞同：0
> 
> 时间：2013-01-18T13:49:06.543
> 
> 标签：c#, winforms, app-config

我为我的项目创建了一个表单应用程序。我想在我的网站上托管，供用户下载和测试。因为我使用的是配置管理器，所以我必须将配置文件与 .exe 一起包含在内，因为该应用程序有一个后端远程数据库。当然，我现在才意识到我的连接字符串是有目共睹的。我尝试将 app.config 重命名为 web.config，但 aspnet_regiis -pef 命令在我的 vista 机器上以管理员身份运行时只会返回帮助菜单！即使此命令有效并且我将 web.config 重命名为 app.config，下载时运行应用程序的机器会自动解密连接字符串吗？所以总而言之，对于喜欢解决这个困境的新手来说，最好的方法是什么？为什么 aspnet_regiis -pef 不运行？我还查看了有关此主题的其他帖子，但不幸的是，到目前为止它们对我没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:52:44.977

要么创建用户/特定连接字符串，要么将所有数据访问包装在一些 Web 服务中，您可以在其中控制自动化。

创建用户特定的连接字符串是最简单的，但可能会影响数据库费用。您仍然可以保留一个连接字符串，但使用 Windows 身份进行连接。在这两种情况下，您都必须付出一些努力来确保用户不能做超出他们被允许做的事情。

将您的数据访问封装在 Web 服务中更易于管理，但需要额外的工作才能使其正常工作。也许您可以看看[RIA Services](http://msdn.microsoft.com/library/ee707344.aspx)。优点是多方面的：您可以控制 Web 服务中的权限，并且可以减少不必要的查询的暴露。

另请注意，即使您在配置文件中加密了连接字符串，任何恶意用户都可以解密它。一个简单的反编译器将突出显示您的解密密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:09:02.130

You could just store an encrypt the connection string in the app.config but you will have to include the encryption key somewhere in the application. Therefore this is not safe because everyone can just decompile the application or attach a debugger and extract the connection string. Or monitor the network traffic. Actually there is now way you can prevent this from happening - whatever your application can do can be done manually by everyone (with access to the application).

The flaw in the design is that the application needs direct access to the database in the first place. It is close to impossible to ensure that the database can not be corrupted in this scenario (unless the database is only used for reading data). Essentially you would have to replicate a large portion of your business logic at the database server to ensure that no sequence of requests will corrupt the state.

A better solution would be accessing the database only indirectly through a web service. This allows you to perform better and easier to implement server-side validation and even authentication and authorization per user.

# r - 在 stata 和 R 中读取具有大变量的 stata 文件

> ID：14400318
> 
> 赞同：4
> 
> 时间：2013-01-18T13:49:41.263
> 
> 标签：r, memory, stata

我正在尝试读取`stata`大小为 320 MB 的文件，`stata`其中`R`包含超过 5000 个变量。我首先`stata`使用读取文件，但它可以读取的最大变量是 5000。所以，我不能使用 stata 读取`stata`文件。我的问题是：

1.  有没有办法通过首先要求只保留变量（我知道变量）来读取`stata`文件`stata`，以便变量的数量少于 5000？

2.  有没有办法可以读取这个`stata`文件`R`？我正在使用 32 位 (Vista) 并`R`给我错误。`"Error: cannot allocate vector of size 21k.Kb"`.

我使用以下 R 代码读取文件：

```
 #The stata file is in the webpage: http://www.federalreserve.gov/econresdata/scf/scf_2010survey.htm#STATADAT
#1\. set mem 400m
set maxvar 4000
use p10i6.dta, clear
keep x8166 x8167 x8168 x8163 x8164 x2422 x2506 x2606 x2623 x604 x614 x623 x716 x507  x513 x526 x1706 x1705 x1806 x1805 x1906 x1905 x2002 x2012 x1409 x1509 x1609 x1415 x1515 x1615 x1417 x1517 x1617 x1619 x1621 x3124 x3224 x3324 x3129 x3229 x3329 x3335 x3408 x3412 x3416 x3420 x3424 x3428 x4020 x4024 x4028 x4018 x4022 x4026 x4030 x4022 x4026 x4030 x4018 x3507 x3511 x3515 x3519 x3523 x3527 x3506 x3510 x3514 x3518 x3522 x3526 x3529 x3804 x3807 x3810 x3813 x3816 x3818 x3930 x3721 x3821 x3823 x3825 x3827 x3829 x3822 x3824 x3826 x3828 x3830 
save p10i6.dta, clear     

#2\. 
        library (foreign)
        year<-2010
        yr <- substr( year , 3 , 4 )
        p10i6.dta<-read.dta(paste0( "p" , yr , "i6.dta" ))
        saveRDS(p10i6.dta,file=paste0( "p" , yr , "i6.rda" ))
        p10i6.rda<-readRDS(paste0( "p" , yr , "i6.rda" )) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:15:09.253

要将数据读入 R，可能有一种方法可以使用`memisc`package`Stata.file`函数。无需读取所有变量，而是使用子集选择您需要的变量。例如：

```
require(memisc)

?Stata.file
d1 <- subset(
        Stata.file(paste0( "p" , yr , "i6.dta" )),
        select=c(x8166, x2606, x2623, x604)
    ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:40:32.223

我想你有一个 StataIC 或旧版本的 Stata。当前的 Stata/SE 和 Stata/MP 可以读取多达 32.000 多个变量。因此，第一个合乎逻辑的步骤是将您的 Stata 升级到可以处理更大数据集的版本。如果问题不是由可用内存不足引起的，那就是......为此，Stata 的错误消息会有所帮助。

正如 Richard Herron 在评论中已经说过的那样，您应该能够使用以下方法读取数据子集：

```
use X8166 X8167 ... using p10i6, clear 
```

请记住，Stata 区分大小写。根据您链接到的网站，这些变量被称为`X...`而不是。`x...`

如果您想使用`foreign`包将数据加载到 R 中，请确保将 R 的可用内存设置为 R 上可能的最大值。在 Vista 上，这将是大约 3.5Gb：

```
memory.limit(3500) 
```

如果这没有帮助，您的数据集将会太大，您可以使用来自 Stata 或 R 的任何 ASCII 方法来加载网站上提供的 ASCII 数据。

# android - 使用带有 Asp.Net 服务器的 GCM 推送通知

> ID：14400331
> 
> 赞同：1
> 
> 时间：2013-01-18T13:50:20.697
> 
> 标签：android

我已经使用 GCM 为我的 android 应用程序实现了推送通知。现在我收到所有注册设备的通知。但是我很困惑什么时候应该取消注册我的设备。

**MainActivity.java**

```
public class DemoActivity extends Activity {

    TextView mDisplay;
    private String TAG = "** Demo Activity Push **";

    public final String SOAP_ACTION4 = "http://tempuri.org/InsertDeviceID";
    public final String OPERATION_NAME4 = "InsertDeviceID"; 
    public final String WSDL_TARGET_NAMESPACE4 = "http://tempuri.org/";
    public final String SOAP_ADDRESS4 = "http://www.icecup.com/iphonews/pushnotification.asmx"; 

    String regId ;
    String receivedString;
    String delreceivedString;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        checkNotNull(SENDER_ID, "SENDER_ID");

        GCMRegistrar.checkDevice(getApplicationContext()); 
        GCMRegistrar.checkManifest(getApplicationContext());
           setContentView(R.layout.main);
        mDisplay = (TextView) findViewById(R.id.display);     
        regId = GCMRegistrar.getRegistrationId(getApplicationContext());
        if (regId.equals("")) {
            // Automatically registers application on startup.
            GCMRegistrar.register(getApplicationContext(), SENDER_ID);
        } else {
        Log.v(TAG, "Already registered");           
        }
       mDisplay.setText("ffffff        "+regId);
     //   setDeviceRegId(regId);
       // new MovieDetails().execute(regId);
       try {
            Class.forName("android.os.AsyncTask");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    public class MovieDetails extends AsyncTask<String, Void, Void> {

        @Override
        protected  Void doInBackground(String... params) {          

            String parregid= params[0];
            Log.d("DEVICE REG ID", parregid);
            SoapObject request99 = new SoapObject(WSDL_TARGET_NAMESPACE4,OPERATION_NAME4);
            request99.addProperty("DeviceId",parregid);
            System.out.println("I AM ALIVE 1");
                SoapSerializationEnvelope envelope99 = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);

                envelope99.dotNet = true;

                envelope99.setOutputSoapObject(request99);
                System.out.println("I AM ALIVE 2");
                HttpTransportSE httpTransport99 = new HttpTransportSE(SOAP_ADDRESS4);
                System.out.println("I AM ALIVE 3");             
                SoapPrimitive  response=null;
                try {
                    httpTransport99.call(SOAP_ACTION4, envelope99);
                    System.out.println("I AM ALIVE 4");
                    response = (SoapPrimitive) envelope99.getResponse();    
                    System.out.println("I AM ALIVE 5");
                    System.out.println("RESPONSE IS:  "+response.toString());   
                    receivedString=response.toString();
                } catch (Exception e) {
                }
                return null;
        }

        @Override
        protected void onCancelled()
        {
            super.onCancelled();
        }

        @Override
        protected void onPreExecute() {

            System.out.println("I AM ALIVE 0");
        }

        @Override
        protected void onPostExecute( Void result) {        

            System.out.println(" RESPONSE "+receivedString);
            super.onPostExecute(result);
        }

    }

    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString("message");
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());            

            mDisplay.append(newMessage + "\n");         
            Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();            
            WakeLocker.release();
        }
    };

    @Override
    protected void onDestroy() {

        try {
            unregisterReceiver(mHandleMessageReceiver);
             GCMRegistrar.onDestroy(getApplicationContext());

        } catch (Exception e) {
            Log.e("UnRegister Receiver Error", "> " + e.getMessage());
        }
        super.onDestroy();
    }

    private void checkNotNull(Object reference, String name) {
        if (reference == null) {
            throw new NullPointerException(
                    getString(R.string.error_config, name));
        }
    }
} 
```

这是我的主要活动。告诉我应该在哪里调用 GCM.Unregister(this) 。因为如果有人卸载该应用程序，则对于该注册 ID，GCM 服务器将响应**NotRegistered**发送到第 3 方服务器。因此，请记住这一点，我正在考虑取消注册该设备。

**GCMIntentService.java**

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "GCMIntentService";
    String installregids = "";
    String uninstallregids = "";
    DemoActivity dact= new DemoActivity();

    public GCMIntentService() {
        super(SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);        

        this.installregids=registrationId;
         try {
        dact.new MovieDetails().execute(registrationId); 

           GCMRegistrar.setRegisteredOnServer(context, true);
         }
         catch (Exception e) {
             e.printStackTrace();
         }
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");

        this.uninstallregids=registrationId; 
         try {
             if (GCMRegistrar.isRegisteredOnServer(context)) {
            //  dact.new MessgaeDelete().execute(registrationId);
                } else {

                    Log.i(TAG, "Ignoring unregister callback");
                }

           GCMRegistrar.setRegisteredOnServer(context, false);
         }
         catch (Exception e) {
             e.printStackTrace();
         }
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
      //  String message = getString(R.string.gcm_message);
        String message = intent.getExtras().getString("message");
        Log.d("Message Received", message);

        generateNotification(context, message);
    }

    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);

        return super.onRecoverableError(context, errorId);
    }

    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_stat_gcm;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, DemoActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:41:41.107

你通常不打电话`GCMRegistrar.unregister()`。如果您卸载应用程序，您将自动“取消注册”。在我看来，此方法的目的仅仅是为了允许从应用程序中显式取消注册。例如，如果用户可以完全关闭自动同步，则无需注册。您也不会收到有关应用程序正在卸载的通知。该应用程序永远不会注意到，因为没有“preUninstall”之类的东西。

# r - 分配一个大矩阵

> ID：14400340
> 
> 赞同：2
> 
> 时间：2013-01-18T13:50:37.927
> 
> 标签：r, ehcache-bigmemory

我正在使用**bigmemory**包。我想计算w。我的v长度是478000，k长度是240500。两个矩阵相乘w很大。

我循环运行代码，但它仍在运行并且尚未完成，我不知道是否会给我结果。

我试图在没有 for 循环的情况下计算它，但我得到了错误。请任何帮助来纠正我的代码以使其快速运行。

```
v <-read.big.matrix('v.dat',type='double')
k <-read.big.matrix('k.dat',type='double')
m=length(v);
n=length(k);
for(i in 1:m)
{
    for(j in 1:n)
    {
       w[i,j] = 2 * cos(dt * v[i] * k[j]) - 2
    }
} 
```

我如何在循环之前定义 w 因为 w 的大小非常大，我无法做到`w <- matrix(nr,ncol)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:53:59.080

预分配矩阵可以这样完成：

```
m = matrix(rep(0, number_or_rows*number_of_columns), 
     number_of_rows, number_of_columns)) 
```

这将创建一个矩阵，其中包含在变量中定义的行和列的数量`number_of_rows`和`number_of_columns`，最初用全 0 填充。

可能会出现的问题是，因为`w`大小等于`v`and `k`，所以在填充时很可能会遇到内存问题`w`。您也可以通过使用`bigmemory`矩阵来解决这个问题`w`，或者以块的形式运行您的分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:02:51.407

您需要使用“big.matrix”类构造函数，并且由于您显然超出了 RAM 资源，因此似乎有必要将其定义为“filebacked.big.matrix”

```
w <- filebacked.big.matrix( m, n , # additional arguments to allocate files and dims
                           ) 
```

见最后一个例子：

```
 help(big.matrix, package=bigmemory) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:33:20.380

agstudy 是在正确的轨道上，但你可以`outer`在这里使用，因为

`w <- outer(v,k,FUN=function(x,y) 2*cos(x*y)-2 )`

```
v<-runif(10)
k<-runif(10)
m=length(v);
n=length(k);
w<-matrix(nr=m,nc=n)
for(i in 1:m)
{
    for(j in 1:n)
    {
       w[i,j] = 2 * cos( v[i] * k[j]) - 2
    }
}

ww <- outer(v,k,function(x,y) 2*cos(x*y)-2) 
```

测试：ww-w 是一个零矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:55:46.733

我会使用 R 矢量化功能做这样的事情：

```
for(i in 1:m)
{
  w[i] = 2 * cos(dt * v[i] * k) - 2 # I compute n terms here
} 
```

# ruby-on-rails - 使用子域设置 session_store 会干扰 Twitter 登录。为什么？

> ID：14400342
> 
> 赞同：0
> 
> 时间：2013-01-18T13:50:43.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter, omniauth, sorcery

在开发环境中。Twitter API 要求我们从 0.0.0.0 而不是 localhost 或任何其他主机名登录。

但是，我们也在通过子域测试我们的本地应用程序。在`session_store.rb`：

```
Foobar::Application.config.session_store :redis_store, :servers => REDISTOGO_URL, :key_prefix => "foobar:rails:session", :expire_in => 1.week, :domain => '.localhost.dev' 
```

每次我们尝试登录 Twitter 时，都会得到`401 Unauthorized`. 如果我们设置`:domain => '0.0.0.0'`，我可以很好地登录 Twitter。有：

```
Foobar::Application.config.session_store :redis_store, :servers => REDISTOGO_URL, :key_prefix => "foobar:rails:session", :expire_in => 1.week 
```

没有这`:domain =>`部分，我可以毫无问题地登录 Twitter。

为什么设置`:domain`in`session_store.rb`会干扰 Twitter 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:32:24.137

会话存储集上的`:domain`选项是将为其发出会话 id cookie 的域。只有当 cookie 的域设置和当前 url 的主机名匹配时，浏览器才会将 cookie 发送回应用程序。

在`:domain => '.localhost.dev'`您的示例中进行设置意味着您必须使用`http://localhost.dev`or 访问您的站点，并且它的子域 ( `http://www.localhost.dev`) 也可以。`http://0.0.0.0`由于主机名不匹配，您在访问应用程序时不会成功。

# c# - 将字符串转换为双 C#

> ID：14400343
> 
> 赞同：3
> 
> 时间：2013-01-18T13:50:43.537
> 
> 标签：c#, double

我对特定转换有一个有趣的问题。当我尝试将字符串`"0,3"`或`"0.3"`根据转换`UICulture`为一个`Double`值时，结果是`0,29999999`。为了收到结果，我还没有找到解决方案`0,3`。

有什么方法可以在转换后获得相同的值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T13:51:58.167

`double` ***不能代表***每个值。它保证代表整数，但仅此而已。如果您需要更像“人类”近似数字的东西，请使用`decimal`：

```
decimal val = decimal.Parse("0.3"); 
```

注意：`decimal` *也*不能代表每个值 - 但它进行近似的方式往往更像人们期望数字的工作方式。特别`double`是对于货币之类的东西几乎没有用处。

# webtrends - 我可以在 localhost 中测试综合浏览量吗？

> ID：14400344
> 
> 赞同：0
> 
> 时间：2013-01-18T13:50:52.870
> 
> 标签：webtrends

让我更好地解释一下：我必须添加一些功能来跟踪页面，但我无权访问我们公司的 WebTrends 帐户。

所以，我在我的本地主机上进行测试，然后询问负责 WebTrends 的人是否看到任何东西，我不知道是否可行。

示例：从`localhost/solutions/default.asp?tab=products`我有一个需要点击计数的按钮：

```
dcsMultiTrack('DCS.dcssip','www.realdomainname.com','DCS.dcsuri','/solutions/default.asp','DCS.dcsqry','tab=Products');
// generating a page view to: http://www.webtrends.com/solutions/default.asp?tab=products 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:12:48.513

是的。为 firefox 安装 httpfox，打开插件以监听 http 流量，从 localhost 访问您的页面并查找对 statse.webtrends.com 的 gif 请求：如果找到，则该标签有效，如果没有，则有问题.. .

# ruby-on-rails - 在新的 Rails 项目中使用迁移

> ID：14400346
> 
> 赞同：0
> 
> 时间：2013-01-18T13:51:10.687
> 
> 标签：ruby-on-rails, ruby

我正在开始一个新的 Rails 项目，我想知道当涉及到数据库时我应该做什么。我应该跳过使用迁移并将数据库脚本与 Rails 项目分开，还是应该使用迁移？通过“手动”创建数据库，您不会获得更好的控制吗？那应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:10:06.120

数据库的创建应该通过 Rails 完成，因为它几乎可以为您的每个环境完成所有设置。

至于迁移，Rails 核心团队非常努力地使迁移与从 postgresql 到 mysql 甚至 oracle 的所有不同数据库兼容。虽然通过迁移可以比创建自己的表更轻松地完成许多操作，但它们仍然为您提供了将自己的 SQL 添加到组合中的灵活性。

看看我为 postgresql 数据库创建 HSTORE 扩展的迁移。

```
class SetupHstore < ActiveRecord::Migration
  def up
    execute "CREATE EXTENSION IF NOT EXISTS hstore;"
  end

  def down
    execute "DROP EXTENSION IF EXISTS hstore;"
  end
end 
```

这意味着您几乎可以从迁移中执行任何您想要的命令。请注意，使用 Rails 迁移可以让您灵活地回滚迁移，方法是添加一个 up 和 down 方法来恢复迁移。您可以在迁移中做很多巧妙的事情。

此外，rails 还为您提供了将迁移转储为 Ruby 或 SQL 的选项，用于诸如 HSTORE 之类的无法使用 Ruby 实现的事情。此选项位于`application.rb`配置下的文件下。

最后，如果你打算使用 Rails，你不妨使用它提供的所有东西来简化你的开发。

在手动创建数据库之前，您应该阅读有关 Rails 迁移的指南，以便对它们有更多的了解。

[Rails 迁移](http://guides.rubyonrails.org/migrations.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:00:50.423

我认为你应该使用迁移。他们确保您的代码和数据库“同步”，并且您不会尝试在旧表上运行代码。

例如，当您将应用程序的新版本部署到生产环境并且不使用迁移时，您必须在数据库上执行两次工作：在开发和生产环境中。并让有一个登台环境，甚至更多的工作。

另一个好处是，通过迁移，您可以快速将您的开发数据库“转换”到较旧的阶段（在我的情况下，我不时需要此功能）。

或者，如果它适用于您的项目，请使用像 MongoDB 这样的无模式数据库。在那里，您可以在代码中定义模型，而不必担心迁移。但是在生产时要小心：也许您必须将数据从一列迁移到另一列；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:03:15.120

从 Rails 的角度来看，手动创建数据库迁移文件并不是一个好主意。就像您拥有一个具有很多功能的 gem，然后您正在实现自己的逻辑，提供与 gem 相同的功能。

如果您稍后进行任何更新，这不仅会消耗时间，而且可能会在迁移版本控制和模式加载方面产生问题。

诀窍是通过以下命令快速创建迁移、脚手架：

```
rails g scaffold scaffold_name index create name:string 
```

这将根据您在命令行中提供的内容创建脚手架，就像上面一样，将使用`scaffold_name`和创建两个方法`index`和 `create`一个字段`name`作为字符串创建脚手架。

同样，您可以使用迁移添加具有单个命令行的列：

```
 rails g migration add_field_name_to_table_name email:string 
```

或者删除不需要迁移的列：

```
rails g migration remove_field_name_from_table_name email:string 
```

您甚至可以通过以下方式将迁移回滚到前一个：

`rake db:rollback`会让你后退一步

您可以通过以下方式迁移到任何版本：

`rake db:migrate VERSION = "434483468726583"`其中“434483468726583”是要切换到的迁移版本号。

就像这样，有许多命令可以与**rails migrations**一起使用。

总而言之，无论您想要什么迁移，您都可以轻松获得命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:06:12.410

迁移是为了替换数据库脚本。因为它们更易于管理并且可以互操作。在进一步配置数据库时，您可以将代码添加到您独立管理的脚本中，但这仅在您想要针对您正在使用的数据库系统执行特定操作且迁移不涵盖这些情况时才有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T16:50:16.733

Rails 迁移是改变数据库结构的任务——也就是说，它们会改变你的模式。迁移非常适合强制执行关系数据库的底层结构，并且是在开始和与其他人一起工作时使用的好主意；但是，请注意存在许多限制和缺点。例如，当您在模型中创建验证时，有时这些验证不会在数据库级别强制执行，从而使数据完整性仅在应用程序级别维护。

随着时间的推移，随着应用程序和产品（业务逻辑）的发展，您将对模型进行大量更改。鉴于迁移是通过时间戳跟踪的，因此在一个相对较大的团队中工作时，强制在正确的时间以正确的顺序将迁移应用到生产中可能会变得非常棘手。

非关系型数据库，例如 MongoDB，通过允许一定的模式灵活性来支持模型演化。例如，如果您想向模型添加一个字段，您可以简单地开始在该字段中保存数据，而不必运行迁移来更改数据库结构。大多数人说 MongoDB 是“无模式的”，但更准确的说法是 MongoDB 允许“模式灵活性”。查看[Mongoid](http://mongoid.org/en/mongoid/index.html) gem 以使用 MongoDB 定义模型。如果您的应用程序将是探索性的并且随着时间的推移可能会发生很大变化，那么使用 MongoDB 和 Mongoid 可能是值得的。

# c++ - 将现有 C++ 项目编译为 DLL

> ID：14400348
> 
> 赞同：1
> 
> 时间：2013-01-18T13:51:17.740
> 
> 标签：c++, visual-studio-2008, dll

我正在处理一个继承的项目，其中包括一个成功编译为 .exe 的 C++ 项目。现在我想尝试将这个项目集成到一个 .NET 表单中，所以我想将它作为一个 DLL（从我读过的内容来看，如果我使用 dll 而不是 exe 似乎更容易做到这一点）所以我想编译我的C++ 项目到 .DLL。我尝试通过右键单击项目并调整属性，但即使我在重建项目时选择了 .dll 选项，我仍然得到 exe 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:05:26.807

以下是三个“最干净”的选项：

1.  在 C++ 代码周围创建一个[C++/CLI](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)（也称为“托管 C++”）包装器，以将函数公开为类方法。然后您可以像调用 C# 类一样从 C# 调用这些方法。

2.  围绕 C++ 函数创建一个 COM 包装器。与创建 CLI 包装器非常相似，但也可以在非 .NET 环境中使用（例如 VBA）

3.  [使用P/Invoke](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)调用您的 C++ DLL 。这需要最少的 C++ 编码，但也很难使互操作正确，尤其是在编组结构或其他复杂数据类型时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:05:38.600

你至少需要改变

*   常规/配置类型
*   链接器/常规/输出文件

但是您的 DLL 应该实现 DllMain 以确保正确完成运行时初始化。

另一种方法可能是创建一个新的 DLL 项目并添加来自 EXE 的所有代码。这使得项目向导脚本运行适当的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:52:31.273

使用 COM 互操作将 C++ 类与 .NET 框架集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:05:30.847

在 Visual Studio 中，最容易采用阻力最小的路径。只需创建一个新的空 DLL 项目，将源文件添加到其中，更改 C++ 详细信息（在属性下），瞧！尝试手动更改项目设置似乎总是会留下很多多余的谷壳。

在代码生成下，您可能需要多线程（调试）DLL

# java - android：如何在android中显示日历日期中的月份和年份？

> ID：14400352
> 
> 赞同：-9
> 
> 时间：2013-01-18T13:51:34.723
> 
> 标签：java, android, date, calendar

我正在以这种格式从服务器获取日期----->>>>> 2013-1-18

我需要按以下格式显示日期-------->>>> 1 月 18 日星期四

怎么做？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:54:56.183

您可以使用[**java.text.SimpleDateFormat轻松格式化它**](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
 SimpleDateFormat sString s= "2013-1-18";
        SimpleDateFormat sdf = new SimpleDateFormat("EEEE,MMMM, dd ");
        System.out.println(sdf.format(new SimpleDateFormat("yyyy-M-dd").parse(s)));df 
```

输出：

```
Friday,January, 18 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:54:16.657

检查[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)类。基本上你可以遵循：使用 将字符串解析为日期`SimpleDateFormat`，再次使用将日期转换为所需的格式`SimpleDateFormat`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:54:51.880

尝试使用 SimpleDateFormat 类

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# javascript - 如何阻止 Overlay mousedown 事件进入地图？

> ID：14400354
> 
> 赞同：1
> 
> 时间：2013-01-18T13:51:48.750
> 
> 标签：javascript, google-maps, google-maps-api-3, overlay, dom-events

在覆盖（ExtInfoWindow）上处理 mousedown 事件后，我需要确保地图点击事件处理程序不执行，或者在地图点击事件处理程序中，我需要确定事件来自覆盖点击，而不是处理它。所以，某种方式我不需要处理两次。我在下面做错了什么？它用于 ExtInfoWindow 库，所以我不会在这里发布整个内容。[带地图的页面在这里](http://devservices.northcarolina.edu/lcl/ded_gmap/exams/find.php?q%5Btext%5D=RALEIGH,%20NORTH%20CAROLINA,%20USA&q%5Bmode%5D=next&q%5Bhasloc%5D=Y&q%5Bsptext%5D=&q%5Bloc%5D=&q%5Bgb%5D=&q%5Bhasmoved%5D=Y&q%5Bhasdist%5D=&bounds%5Beast%5D=-79.020175910376&bounds%5Bnorth%5D=35.99995553167758&bounds%5Bwest%5D=-79.0754508737549&bounds%5Bsouth%5D=35.97203630485635&result_center%5Blat%5D=35.985997153167474&result_center%5Blon%5D=-79.04781339206545&&m%5Bsetvp%5D=Y&m%5Bvp%5D%5Blat%5D=35.98592397814075&m%5Bvp%5D%5Blon%5D=-79.04757499694824&m%5Bvp%5D%5Bzoom%5D=14&m%5Bsetwin%5D=Y&m%5Bwin%5D%5Bcent%5D=351&m%5Bwin%5D%5Bloc%5D=1114&m%5Bwin%5D%5Btab%5D=0)。点击信息窗口。[在extinfowindow.js](http://devservices.northcarolina.edu/lcl/ded_gmap/system/themes/asp/js/extinfowindow.js)中搜索“console.log”以查看问题所在。

```
 // Initialization:

  var stealEvents = ['mousedown', 'dblclick', 'DOMMouseScroll', 'onmousewheel'];
  for( i=0; i < stealEvents.length; i++ ){
        google.maps.event.addDomListener(this.container_, stealEvents[i], this.onClick_.bind(this));
  }

    if (map.ClickListener_ == null) {
      //listen for map click, close ExtInfoWindow if open
      map.ClickListener_ = google.maps.event.addListener(map, 'click',
        function(event) {
            if( map.getExtInfoWindow() != null ){
                    // problem: This executes even if the click is on the overlay!
                map.closeExtInfoWindow();
            }
            }
      );
    }

// overlay click event handler
ExtInfoWindow.prototype.onClick_ = function(e) {
   var evt = e ? e:window.event;

   evt.cancelBubble = true;
   evt.returnValue = false;

   if (evt.stopPropagation) {
      evt.stopPropagation();
   }

   if (evt.preventDefault) {
      evt.preventDefault();
   }

   evt.stop(); // from google.maps.MouseEvent

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:01:40.060

`MouseEvent.stop();`在第一个处理程序中执行。IE：

```
google.maps.event.addListener(myOverlay, 'click', function(mouseEvent){
    mouseEvent.stop();
//Handle the click here
}); 
```

[有关 MouseEvent，请参阅 Google 地图文档](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:59:26.187

没关系... dom 侦听器正在侦听 mousedown 事件而不是单击事件，因此单击不会被取消。我应该让它监听点击事件。

```
var stealEvents = ['click', 'dblclick', 'DOMMouseScroll', 'onmousewheel'];
for( i=0; i < stealEvents.length; i++ ){
    google.maps.event.addDomListener(this.container_, stealEvents[i], this.onClick_.bind(this));
} 
```

# mongodb - 使用 monger 到从属实例的只读连接

> ID：14400357
> 
> 赞同：2
> 
> 时间：2013-01-18T13:51:49.073
> 
> 标签：mongodb, clojure, monger

我有一个副本集，我想建立与从属实例的独立只读连接。

通常，我应该不会遇到任何问题。我唯一应该做的就是设置`slaveOk=true`能够通过读取操作来查询它。当我使用`nodejs`或 mongo 控制台时它工作得很好，但我发现没有办法使用`monger`.

最奇怪的是，当我调用`set-db!`函数时出现异常：

> MongoException 不与 master 交谈并重试用完 com.mongodb.DBTCPConnector.innerCall (DBTCPConnector.java:314)

建立[副本集连接](http://clojuremongodb.info/articles/connecting.html#connecting_to_a_replica_set)对我来说不是一个选项。

目前我正在使用`[com.novemberain/monger "1.4.0"]`.

谢谢！

* * *

**更新：**我查看了[Java MongoDB Driver API Documentation](http://api.mongodb.org/java/current/com/mongodb/Mongo.html)并找到了[`slaveOk`](http://api.mongodb.org/java/current/com/mongodb/Mongo.html#slaveOk())方法。我写了以下代码，希望它能工作：

```
(defn slave-connect!
  [& args]
  (mg/set-connection!
    (doto (apply mg/connect args)
          (.slaveOk)))) 
```

但我得到的只是一个新的例外：

> MongoException 不掌握 com.mongodb.CommandResult.getException (CommandResult.java:100)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:46:39.257

看起来我使用[com.mongodb.DBApiLayer Documentation](http://api.mongodb.org/java/current/com/mongodb/DBApiLayer.html)解决了我的问题。

因此，正确的解决方案是使用[setReadPreference方法将](http://api.mongodb.org/java/current/com/mongodb/ReadPreference.html)[ReadPreference](http://api.mongodb.org/java/current/com/mongodb/DB.html#setReadPreference(com.mongodb.ReadPreference))设置为[辅助，然后使用](http://api.mongodb.org/java/current/com/mongodb/ReadPreference.html#secondary())[setReadOnly()](http://api.mongodb.org/java/current/com/mongodb/DB.html#setReadOnly(java.lang.Boolean))方法将数据库设置为只读：

```
(import 'com.mongodb.ReadPreference)

(defn use-slave-db!
  [& args]
  (mg/set-db!
    (doto (apply mg/get-db args)
          (.setReadOnly true)
          (.setReadPreference
            (ReadPreference/secondary))))) 
```

现在可以使用`use-slave-db!`函数而不是默认[`use-db!`](http://reference.clojuremongodb.info/monger.core.html#var-use-db%21)宏连接到从属实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T16:46:03.073

我在 monger 2.0.0 下也发现了以下作品：

```
(connect-via-uri "mongodb://host/db?readOnly=true&readPreference=secondary") 
```

# c# - Fluent NHibernate Reveal 不使用给定的属性名

> ID：14400368
> 
> 赞同：2
> 
> 时间：2013-01-18T13:52:30.447
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试在我的班级中映射以下受保护的集合：

```
public class AddressList
{
    protected readonly IList<Address> addresses = new List<Address>();
} 
```

使用以下映射：

```
HasMany<Address>(list => Reveal.Member<AddressList>("addresses")); 
```

但我不断收到 NHibernate.MappingException

```
NHibernate.MappingException : Could not compile the mapping document: 
(XmlDocument) > NHibernate.PropertyNotFoundException 
: Could not find a getter for property '**Member**' in class 
```

但正如您在 Reveal.Member 中看到的那样，我说它应该寻找的属性名应该是“地址”

我发现[了这个](https://stackoverflow.com/questions/1129343/how-do-i-map-a-protected-collection-in-fluent-nhibernate)问题，用户似乎和我有同样的问题，只是这是一个老问题

我也尝试过[这里给出的解决方案](https://stackoverflow.com/questions/781443/private-collection-mapping-in-fluent-nhibernate)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:55:55.637

您不应该将 lambdas 与`Reveal`

正如您在异常消息中看到的：

> NHibernate.MappingException：无法编译映射文档：（XmlDocument）> NHibernate.PropertyNotFoundException：在类中找不到属性“ **Member ”的getter**

我尝试映射到`Member`您使用的字段，`list => Reveal.Member`而不仅仅是`Reveal.Member`

# php - Magento 自定义支付方式模块开发

> ID：14400369
> 
> 赞同：0
> 
> 时间：2013-01-18T13:52:31.043
> 
> 标签：php, magento-1.7

是否有与 magento 1.7 的自定义支付扩展开发相关的综合教程。我找到了这些文章，但它们很旧，我在亚马逊结账扩展中已经有了相同的代码。[http://incho.net/ecommerce/magento/programmatically-create-order-in-magento/](http://inchoo.net/ecommerce/magento/programmatically-create-order-in-magento/)

我开始修改我们在旧版 Magento 中使用的亚马逊结账支付模块。现在我们已经从 1.4 升级到 1.7 并且亚马逊模块无法正常工作。我已经修改了 googlecheckout 模块中的代码。特别是我修改了订单保存和订单确认功能。该模块现在可以工作但有很多问题，因为 googlecheckout 模块和回调响应有很多不同。

我还搜索了 1.7 的亚马逊结帐扩展程序，但我发现的不是美国的。[http://www.magentocommerce.com/magento-connect/amazon-checkout-extension-9731.html](http://www.magentocommerce.com/magento-connect/amazon-checkout-extension-9731.html)。

# java - SWT OLE for pdf：如何？

> ID：14400371
> 
> 赞同：0
> 
> 时间：2013-01-18T13:52:33.007
> 
> 标签：java, pdf, swt, ole

可能有人有使用 SWT OLE 在 Eclipse RTC 应用程序中显示 pdf 文档的示例。

# java - 处理扭矩时如何正确定义项目结构

> ID：14400372
> 
> 赞同：2
> 
> 时间：2013-01-18T13:52:35.080
> 
> 标签：java, maven, apache-torque

我将我的 maven 文件定义如下，以从 apache 扭矩生成源代码。

```
 <build>
<plugins>
  <plugin>
    <groupId>org.apache.torque</groupId>
    <artifactId>torque-maven-plugin</artifactId>
    <version>4.0-beta1</version>
    <executions>
      <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <goals>
          <goal>generate</goal>
        </goals>
        <configuration>
          <packaging>classpath</packaging>
          <configPackage>org.apache.torque.templates.om</configPackage>
          <sourceDir>src/main/schema</sourceDir>
          <defaultOutputDir>src/main/java/generated-java</defaultOutputDir>
          <options>
            <torque.om.package>com.project.om</torque.om.package>
            <torque.database>mysql</torque.database>
          </options>
        </configuration>
      </execution>
      <execution>
        <id>generate-sql</id>
        <phase>generate-sources</phase>
        <goals>
          <goal>generate</goal>
        </goals>
        <configuration>
          <packaging>classpath</packaging>
          <configPackage>org.apache.torque.templates.sql</configPackage>
          <sourceDir>src/main/schema</sourceDir>
          <defaultOutputDir>src/main/resources/generated-sql</defaultOutputDir>
          <defaultOutputDirUsage>none</defaultOutputDirUsage>
          <options>
            <torque.database>mysql</torque.database>
          </options>
        </configuration>
      </execution>
    </executions>
    <dependencies>
      <dependency>
        <groupId>org.apache.torque</groupId>
        <artifactId>torque-templates</artifactId>
        <version>4.0-beta1</version>
      </dependency>
    </dependencies>
  </plugin>

  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>sql-maven-plugin</artifactId>
    <version>1.4</version>
    <configuration>
      <driver>org.gjt.mm.mysql.Driver</driver>
      <url>jdbc:mysql://localhost:3306/daydiary</url>
      <username>root</username>
      <password>mysql</password>
      <onError>continue</onError>
      <autocommit>true</autocommit>
      <fileset>
        <basedir>${basedir}/target/generated-sql</basedir>
        <includes>
          <include>*.sql</include>
        </includes>
      </fileset>
    </configuration>
    <dependencies>
      <dependency>
        <artifactId>mysql-connector-java</artifactId>
        <groupId>mysql</groupId>
        <version>5.0.4</version>
      </dependency>
    </dependencies>
  </plugin>

  <plugin>
    <!-- setting java version to 1.5 --> 
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.5</source>
      <target>1.5</target>
    </configuration>
  </plugin>

  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>copy-dependencies</id>
        <phase>package</phase>
        <goals>
          <goal>copy-dependencies</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

对于这个 maven，如图所示创建了以下文件夹结构，我需要在 src/main/java 文件夹下生成的每个代码。我怎样才能做到这一点。？

![在此处输入图像描述](../Images/b809a767ea31fd70bfc715fa90b001a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:17:12.320

您生成的类将转到 `<defaultOutputDir>src/main/java/generated-java</defaultOutputDir>`但`src/main/java`maven 下的所有文件夹都被视为包名称。所以它认为这`generated-java`是一个包名，但是在类中，包名被指定为`com.project.om`，这就是为什么它在你的 IDE 中显示为错误。

我不确定这个插件是如何工作的，但你可以尝试将输出目录更改为 'src/main/java' 它可能不起作用，因为插件可能在生成 src 文件之前清理这个目录并且你不希望你的文件是删除。

其他选项是在 src/main/java 文件夹之外生成这些文件（例如在默认位置），然后：将这些文件复制覆盖到 src/main/java 目录，例如使用 maven-antrun-plugin 添加位置那些生成的文件作为带有 build-helper-maven-plugin 的源目录。

# ios - iOS 延迟加载表格图像

> ID：14400378
> 
> 赞同：11
> 
> 时间：2013-01-18T13:52:59.620
> 
> 标签：ios, objective-c, uitableview, uiscrollview, lazy-loading

[我已经使用苹果在此处](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394-Intro-DontLinkElementID_2)提供的示例在我的应用程序中成功实现了图像的延迟加载。问题是，我希望在滚动时加载图像，但只有在我完成拖动时才将图像加载到单元格中（从屏幕上松开手指。在此之前单元格保持为空）。我已将代码修改如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //NSLog(@"cell for row at indexpath, size - %f, current - %d", flowTable.contentSize.height, self.current);

    NSString *CellIdentifier = @"FlowCell";

    MyFlowCell *cell = (MyFlowCell *)[self.flowTable dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"FlowCell" owner:nil options:nil];
       // cell = [nib objectAtIndex:0];

        for(id currentObject in nib)

        {

        if([currentObject isKindOfClass:[MyFlowCell class]])

        {
            cell = (MyFlowCell *)currentObject;

            break;
        }
        }
    }

    ImageDetails *rowItem = [self.imageData objectAtIndex:indexPath.row];

    if (!rowItem.mainImage)
    {  
       // if (self.flowTable.dragging == NO && self.flowTable.decelerating == NO)
       // {

            [self startIconDownload:rowItem forIndexPath:indexPath];

        //}

        cell.mainImage.backgroundColor = [UIColor grayColor];

    }
    else
    {

            cell.mainImage.image = rowItem.mainImage;

    }
    }

    return cell;
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
      //  [self loadImagesForOnscreenRows];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    //[self loadImagesForOnscreenRows];
} 
```

此外，我发现在我的 ImageDownloader 类中， NSURLConnection 甚至在我从屏幕上松开手指之前都没有收到响应。我一直试图找出为什么会发生这种情况，但到目前为止我还没有成功。如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T14:58:12.280

更新的答案：

标准的 Apple [LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394-Intro-DontLinkElementID_2)存在一些缺陷：

1.  在滚动完成之前，它不会尝试检索图像。我理解他们为什么选择这样做（可能不想检索可能正在滚动的图像），但这会导致图像出现的速度比必要的慢。

2.  它不会将并发请求的数量限制为某个合理的数量。是的，`NSURLConnection`会自动冻结请求，直到最大请求数降至某个合理数量，但在最坏的情况下，您实际上可以让请求超时，而不是简单地正确排队。

3.  一旦它开始下载图像，即使单元格随后滚动离开屏幕，它也不会取消它。

简单的解决方法是退出`IconDownloader`所有滚动/减速逻辑，只使用或中的`UIImageView`类别。[`SDWebImage`](https://github.com/rs/SDWebImage)[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)

如果您要自己解决此问题，则需要做一些工作才能使所有这些都正确。但[这里有一个 LazyTableImages 的演绎版](https://github.com/robertmryan/LazyTableImages)，用于`NSOperationQueue`确保我们 (a) 限制并发请求；(b) 允许我们取消请求。我承认我更喜欢上面的`UIImageView`类别实现，更好，但我试图保持苹果原始的结构`LazyTableImages`，同时弥补我上面列举的缺陷。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T14:08:53.193

您可以按照以下步骤在 tableview 中实现延迟加载：

在您的 Class.h 中，输入：

```
NSMutableDictionary *Dict_name;
BOOL isDragging_msg, isDecliring_msg; 
```

现在在 Class.m 文件中，将此代码放在视图中确实加载：

```
Dict_name = [[NSMutableDictionary alloc] init]; 
```

在 cellForRowAtIndexPath 中：

```
if ([dicImages_msg valueForKey:[[msg_array objectAtIndex:indexPath.row] valueForKey:@"image name or image link"]]) { 
    cell.image_profile.image=[dicImages_msg valueForKey:[[msg_array objectAtIndex:indexPath.row] valueForKey:@"image name or image link"]];
}
else
{
    if (!isDragging_msg && !isDecliring_msg)
    {
        [dicImages_msg setObject:[UIImage imageNamed:@"Placeholder.png"] forKey:[[msg_array objectAtIndex:indexPath.row] valueForKey:@"image name or image link"]];
        [self performSelectorInBackground:@selector(downloadImage_3:) withObject:indexPath];
    }
    else
    {
        cell.image_profile.image=[UIImage imageNamed:@"Placeholder.png"];
    }
} 
```

对于下载图像，功能是：

```
-(void)downloadImage_3:(NSIndexPath *)path{
    NSAutoreleasePool *pl = [[NSAutoreleasePool alloc] init];

    NSString *str=[here Your image link for download];

    UIImage *img = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:str]]]; 

    [dicImages_msg setObject:img forKey:[[msg_array objectAtIndex:path.row] valueForKey:@"image name or image link same as cell for row"]];

    [tableview performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];

    [pl release];
} 
```

最后将这些方法放入您的类中：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{
    isDragging_msg = FALSE;     
    [tableview reloadData];
}
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
    isDecliring_msg = FALSE;
    [tableview reloadData]; 
}
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
    isDragging_msg = TRUE;
}
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView{
    isDecliring_msg = TRUE; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:44:51.557

假设您的 UITableViewCell 具有图像的 url 属性和 UIImage 属性（加上队列的属性或静态值：

```
- (void) setThumbnailUrlString:(NSString *)urlString
{
    thumbnailUrlString = urlString;

    NSURL *url = [NSURL URLWithString:urlString];

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    if ( queue == nil )
    {
        queue = [[NSOperationQueue alloc] init];
    }
    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse * resp, NSData     *data, NSError *error) 
    {
        dispatch_async(dispatch_get_main_queue(),^ 
                       {
                            if ( error == nil && data )
                            {
                                UIImage *urlImage = [[UIImage alloc] initWithData:data];
                                thumbnail.image = urlImage;
                            }
                       });
    }];
} 
```

您的实现问题是您的图像加载方法可能发生在主线程中。您需要异步加载图像，然后在主线程中更新图像。

为了正确，该块应该检查响应的 url 是否与请求的 url 匹配，如果单元格的图像在单元格被重新用于不同的图像之前加载得太晚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T13:24:29.863

我已经完成了这个包含延迟加载控制器的框架。它易于使用且开箱即用。 [https://github.com/cloverstudio/CSUtils](https://github.com/cloverstudio/CSUtils) 教程可以在这里找到：http: [//www.clover-studio.com/blog/using-csutils-ios-framework-for-lazy-loading-images/](http://www.clover-studio.com/blog/using-csutils-ios-framework-for-lazy-loading-images/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-25T19:50:19.493

这是一个很晚的答案，但随着 iOS 版本的变化，方法也在不断变化。

为了延迟加载图像，推荐的方法如下：

1.  下载所有图像的 URL 并将它们存储到您的容器中（数组/对象等）
2.  触发在后台队列上异步运行的[NSURLSessionTask （仅限 iOS 7 之后）。](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLSessionTask_class/)如果您低于 iOS 7，则可以使用[NSURLConnection SendAsynchronousRequest API](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest:queue:completionHandler:) - 它在 iOS 9 中已被弃用，因此您最好尽快摆脱它。
3.  在后台队列中创建图像
4.  回到主队列，确保你得到了正确的 UITableViewCell，然后更新图像

[这里 -我的教程](http://www.iphonegamezone.net/ios-app-design-blog-load-images-asynchronously-inside-uitableview/)中描述了整个方法。

# regex - 请帮助构建正则表达式

> ID：14400381
> 
> 赞同：0
> 
> 时间：2013-01-18T13:53:08.983
> 
> 标签：regex

好吧，我尝试开发一种模式，但未能成功构建一个正则表达式来检查文本是否不符合以下条件

它不应该以下面的任何内容开头

```
 http://
    http://www.
    http://
    http://www.
    www. 
```

一般的想法是不应该允许用户选择他的用户名，这看起来像一个 url。

这是我尝试过的不同模式的尝试，但这些模式以一种或另一种方式失败。

```
<script type="text/javascript" language="javascript">
    function validate(name){

        var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
        var pattern = /^((http|https):\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+).[a-z]{2,5}(:[0-9]{1,5})?(\/.)?$/;
        var pattern = ^([^www\.]([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$;

        var _test = pattern.test(name);
        alert("_test is " + _test);

        return false;
     }

</scipt> 
```

任何帮助都深表感谢

祖拜尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:16:29.197

它可以简化为

```
://|www. 
```

下面的这个例子是在 C# 中：

```
//Pattern
string pattern = "://|www.";
//Execute the regex
Match match = Regex.Match(testInput, pattern);
//Test result 
if (match.Success)
   Console.WriteLine("It's an url!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:57:19.193

这是你的模式，你可以[在这里](http://regexpal.com/)`^((http(s)?://(www.)?)|(www.)).*`
测试它。

```
function validate(name){
    var pattern = /^((http(s)?:\/\/(www.)?)|(www.)).*/;
    return pattern.test(name);
} 
```

我试过这个作品。

**编辑：**

是的，我也忘记转义点了。利用`/^((http(s)?:\/\/(www\.)?)|(www\.)).*/`

# php - 单击单选按钮后的操作

> ID：14400383
> 
> 赞同：0
> 
> 时间：2013-01-18T13:53:16.530
> 
> 标签：php, html, mysql, button, radio

我正在使用 PHP MYSQL 生成一个小型多页测验。我能够将问题和多项选择答案显示为单选按钮选项（感谢 Stackoverflow 的帮助）。我遇到的问题是 - 有没有办法在用户点击单选按钮后立即触发操作？如果用户选择了错误的答案，我想立即给出反馈并说答案是错误的以及为什么是错误的。如果用户选择了正确答案，我想显示正确答案。

我查看了 $_GET、$_POST 和 $_REQUEST，但都需要“提交”答案才能在 PHP 中开始该过程。我希望用户单击单选按钮后立即开始操作（使用 PHP 源代码）。

注意：我在这里查看了几个似乎使用 jQuery 的问题。没有 jQuery 或 Javascript 可以吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:11:53.187

是的，这是可能的，使用 jQuery 是最好的解决方案。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
<?PHP
if (!empty($_GET['action']) && $_GET['action'] == 'ajax_check') {
  // I a final solution you should load here the answer of the question from database by name
  $answers = array(
    'foo' => 1,
    'baa' => 3,
  );    

  // Prepare and default answer in error case
  $return = array(
    'message' => 'Invalud choise',
  );

  if (isset($answers[$_GET['name']])) {
    // If question/answer was found in database, check if users chouse is correct
    if ($answers[$_GET['name']] == $_GET['value']) {
      $return['message'] = 'Correct answer'; 
    } else {
      $return['message'] = 'Wrong answer'; 
    }
  }

  // Return answer to java script
  header('Content-type: text/json');
  echo json_encode($return);
  die();
}
?>

Question 1
<input type="radio" name="foo" value="1" class="question_radio" />
<input type="radio" name="foo" value="2" class="question_radio" />
<input type="radio" name="foo" value="3" class="question_radio" />
<input type="radio" name="foo" value="4" class="question_radio" />
<br />

Question 2
<input type="radio" name="baa" value="1" class="question_radio" />
<input type="radio" name="baa" value="2" class="question_radio" />
<input type="radio" name="baa" value="3" class="question_radio" />
<input type="radio" name="baa" value="4" class="question_radio" />

<!-- Load jquery framework from google, dont need to host it by your self -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function () { 
    // When document was loadet succesfull

    $(".question_radio").click(function () {
      // Listen on all click events of all objects with class="question_radio"
      // It is also possible to listen and input[type=radio] but this can produce false possitives.

      // Start communication to PHP
      $.ajax({
        url: "test.php", // Name of PHP script
        type: "GET",
        dataType: "json",  // Enconding of return values ²see json_encode()
        data: { // Payload of request
          action: 'ajax_check', // Tel PHP what action we like to process
          name: $(this).attr('name'),
          value: $(this).val(), 
        }
      }).done(function(data) {
        // Procces the answer from PHP
        alert( data.message );
      });
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:01:38.053

试试这个

```
`$("input[type='radio'].your_radio_class").bind("change click", function(){
    //  stopping user from changing the answer further depends on ui specification
    //  disabling radio
    $("input[type='radio'].your_radio_class").each(function(){ 
       $(this).attr({"disabled":true,"readonly":"readoly"});
    });
    // else  show loading graphics
    $(this).parent().html("Loading answer...wait");
    //  make ajax call
    //  fetch answer
    //  display answer
});` 
```

* * *

 `## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:57:30.477

您必须考虑的是 PHP 在服务器端运行的事实。话虽如此，您只能通过将请求发送到服务器来处理。这是“提交”操作或 JQuery/JavaScript/Ajax 调用，它们在本地运行，向服务器发出请求，然后更新页面。因此，要使用 PHP，您必须提交或使用本地脚本进行调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:58:17.437

这最好用 javascipt 来完成（jQuery 对你来说可能更容易）。

第一：你设置了一个点击事件，当一个单选按钮被点击时会触发一个动作：http:
[//api.jquery.com/click/](http://api.jquery.com/click/)

第二：当点击被触发时，你设置了一个对 php 文件的 ajax 调用，它验证输入并返回结果：
[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

剩下的就看你了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:00:12.463

如果您想在用户实际点击提交按钮之前验证用户的选择，您需要使用 onchange 属性为您要验证的单选按钮启动一个 ajax 函数（带参数），然后 ajax 将获得响应从服务器又名 php 代码验证用户的选择并返回结果。（如果你做对了）`

# c++ - 在派生类中访问成员变量的地址。当成员具有不同的访问说明符时，行为会发生变化

> ID：14400385
> 
> 赞同：11
> 
> 时间：2013-01-18T13:53:21.147
> 
> 标签：c++, visual-c++, c++11, public, visual-c++-2010

我有一个基类 A 和派生类 B

B 类从 A 派生为 public

**如果A 是类 a 是成员变量**，我想访问成员变量的地址

 **当我使用受保护和公共访问说明符时，我观察到不同的行为。

在这种情况下，当 A 类的成员 a**受到保护**时，我得到：

`cout<<&A::a << endl;`给我一个编译器错误..

但`cout<<&(A::a)<<endl;`有效并给我正确的结果。

在这种情况下，当 A 类的成员 a 是**公开**的时，我得到：

为什么会有这种行为？

这是完整的代码：

```
#include <iostream>
using namespace std;

class A
{
    protected:
    int a;
    void fun() 
    {
    cout<<"A's fun"<<endl;
    }

public:
    A(int Aarg):a(Aarg)
    {
        cout << "A's construction done" <<endl;
    }
};

class B: public A
{
protected:
int b;
public:
void fun()
{
cout << "B's fun"<<endl;
}

B(int As, int Bs):A(As), b(Bs)
{
std::cout<<"B's Construction Done" <<std::endl;
}

void show()
{
A::fun();
//cout << a << endl;
cout<<&A::a << endl; //compilation error
}
};

int main()
{
    B(10,20).show();
    return 0;
} 
```

**现在我可以观察到一个未定义的行为：**

如果我将 A 类中的成员变量 a 设为 public，则不会出现任何编译错误，但输出为 1，我不知道为什么..

```
class A{
public:
int a
....
.... 
```

输出：

A的建设完成

B的建设完成

A很有趣

0027F91C

1（为什么是 1）并且当我尝试访问受保护的成员时没有出现错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:33:05.810

您在语法中遇到了一个小怪癖（并不是说 C++ 很少......）。访问成员变量的默认方式是直接使用名称或通过`this->`. 也就是说，您的 show 函数的更简单拼写是：

```
void B::show() {
   std::cout << a << std::endl;     // alternatively this->a
   std::cout << &a << std::endl;    //               &(this->a)
} 
```

它具有简单且一致的语法。现在，该语言允许您在访问成员时添加额外的限定符来访问基础成员：

```
std::cout << A::a << std::endl;     // Extra qualification 
```

这实际上等同于`this->A::a`并且额外限定的主要用途是消除歧义（如果两个基础有一个 member `a`，则选择一个 in `A`）以及在虚拟函数禁用动态调度的情况下。

现在您可以对指针执行相同的操作，如 in `&this->A::a`，它将获取当前对象`a`的子对象中成员的地址。`A`这种情况下的问题是您不能删除`this->`限定符，因为`&A::a`保留了语法以获取指向成员的指针，尽管通过添加一组额外的括号，因为在`&(A::a)`解析器中不能再将其解释为获取指向成员的指针，但是而不是获取由 表示的对象的地址，`A::a`如前所述，它是基数中的成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T00:32:12.570

简短的回答：不涉及未定义的行为。您看到的行为是：

*   该表达式`&A::a`试图获取指向 A 类成员 a 的成员的指针。如果 a 在 A 中受保护，则此表达式仅通过 A 类（或 A 的朋友）内的访问检查。在从 A 派生的类 B 中，您只能通过表达式获得指向成员的相同指针`&B::a`（请注意，此表达式的类型仍然是`int A::*`）。所以：
    *   如果在 A 中受保护，则派生类 B 的成员函数中不允许`A::a`该表达式。这是您的编译器错误。`&A::a`
    *   如果`A::a`在 A 中是公共的，则此表达式有效，产生指向成员的指针。
*   将指向成员的指针流式传输到`ostream`，例如使用`cout << &A::a`will print `1`。这是调用`ostream::operator << (bool)`. 您可以使用 boolalpha 操纵器来查看这确实是选择的重载：`cout << boolalpha << &A::a`将打印`true`。
*   如果使用修改后的表达式 &(A::a) 或简单的 &a，则不会形成指向成员的指针。这里取的是当前对象的成员a的地址（即同`&(this->a)`），是一个普通的int指针。这种对基类子对象的受保护成员的访问`*this`是有效的，因此即使 a 在 A 中受保护，也可以使用该变体。

更长的解释：

该标准说（5.3.1/3）：

> 一元 & 运算符的结果是指向其操作数的指针。操作数应为左值或限定 ID。如果操作数是一个限定标识符，命名某个类 C 的类型为 T 的非静态成员 m，则结果类型为“指向类型为 T 的类 C 的成员的指针”，并且是一个指定 C::m 的纯右值。[...]

因此，表达式`&A::a`试图获得指向 A 类成员 a 的成员指针。

在下一段（5.3.1/4）中，详细说明了只有 &X::m 语法产生指向成员的指针 - 既不`&(X::m)`，也不`&m`或普通`X::m`：

> 仅当使用显式 & 并且其操作数是未包含在括号中的限定 ID 时，才会形成指向成员的指针。

但只有在允许访问的情况下，这样的表达式才有效。如果是受保护成员 (11.4/1)，则适用：

> 当非静态数据成员或非静态成员函数是其命名类 (11.2) 的受保护成员时，将应用第 11 节中所述之外的附加访问检查 如前所述，授予对受保护成员的访问权限是因为引用发生在某个类 C 的朋友或成员中。如果访问要形成指向成员 (5.3.1) 的指针，则嵌套名称说明符应表示 C 或从 C 派生的类。 [...]

在您的情况下，将授予对受保护成员 a 的访问权限，因为对 a 的引用发生在从 A 派生的类 B 的成员中。当表达式试图形成指向成员的指针时，*嵌套名称说明符*（部分在最后的 "::a") 之前必须表示 B。因此最简单的允许形式是`&B::a`. 该表格`&A::a`只允许在 A 类本身的成员或朋友中使用。

指向成员的指针没有格式化输出运算符（既不是 istream 成员也不是自由运算符函数），因此编译器将查看可以使用标准转换（序列）调用的重载。从指向成员的指针到其他东西的唯一标准转换在 4.12/1 中描述：

> [...] 指向成员类型的指针的纯右值可以转换为布尔类型的纯右值。[...] 空成员指针值被转换为 false；任何其他值都将转换为 true。[...]

无需额外转换即可使用此转换来调用`basic_ostream<charT,traits>& basic_ostream<charT,traits>::operator<<(bool n)`. 其他重载需要更长的转换序列，因此重载是最佳匹配。

由于`&A::a`获取某个成员的地址，它不是空成员指针值。因此它将转换为`true`，打印为“1”（noboolalpha）或“true”（boolalpha）。

最后，表达式`&(A::a)`在 B 的成员中有效，即使 a 在 A 中受到保护。根据上述规则，该表达式不会形成指向成员的指针，因此上面引用的特殊访问规则不适用。对于这种情况，11.4/1 继续：

> 所有其他访问都涉及（可能是隐式的）对象表达式（5.2.5）。在这种情况下，对象表达式的类应为 C 或从 C 派生的类。

这里的客体印象是隐含的`(*this)`，即`A::a`与 的意思相同`(*this).A::a`。的类型`(*this)`显然与发生访问的类（B）相同，因此允许访问。[注：`int x = A(42).a`不允许在 B 内使用。]

因此`&(A::a)`，within 的`B::show()`含义与`&(this->a)`并且是指向 int 的普通指针相同。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-18T14:05:28.253

它是一个语法问题。& 表示你在右边询问元素的地址。

如果你写：

```
&A::a 
```

就好像你会写

```
(&A)::a 
```

这意味着您要求从“&A”访问“a”，这是不对的。

& 不仅仅适用于变量，它也可以用于函数，参见：[http ://www.cprogramming.com/tutorial/function-pointers.html](http://www.cprogramming.com/tutorial/function-pointers.html)**

# magento - 覆盖 Magento Mage_Sales_Model_Order_Invoice_Total_Subtotal

> ID：14400391
> 
> 赞同：2
> 
> 时间：2013-01-18T13:53:30.803
> 
> 标签：magento

我想`Mage_Sales_Model_Order_Invoice_Total_Subtotal`在我的自定义模块中覆盖 Magento 核心。

我已尝试使用以下 URL 进行`Mage_Sales_Model_Order_Invoice_Total_Subtotal`重写

[http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total](http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total)但没有反映变化。

有人可以建议我在上述核心路径中进行解释吗？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:44:02.767

如果您有钱投入 IDE，带有magicento 插件的phpstorm 将为您完成创建类覆盖的所有繁重工作。

不过，您应该知道如何手动执行此操作：

如果您唯一的问题是不知道自定义模块配置的正确语法，那么以下内容应该会有所帮助。如果没有，请提供更多信息，以便我们更好地帮助您。

在您的自定义模块的配置文件中，您需要在`<models>`节点下具有以下内容：

```
<sales>
    <rewrite>
        <order_invoice_total_subtotal>CompanyName_ModuleName_Model_Sales_Order_Invoice_Total_Subtotal</order_invoice_total_subtotal>
    </rewrite>
</sales> 
```

如果您最终想要覆盖销售模块中的更多类，只需将它们添加到上述重写节点即可。

# ios - 更改 UINavigationController 内 UITableViewController 的 UITableView 的框架

> ID：14400394
> 
> 赞同：1
> 
> 时间：2013-01-18T13:53:50.473
> 
> 标签：ios, uitableview

我想改变我的 UITableView 的框架。我尝试用这段代码来做：

```
self.tableView.layer.cornerRadius = 15;
self.tableView.clipsToBounds = YES;
self.tableView.frame = CGRectMake(5, 5, 310, 490); 
```

我在 viewWillAppear 中执行此操作。当我在此处插入日志时，它向我显示 tableView 框架已更改。

但是，当我最终进入 viewDidAppear 时，tableView 又回到了原来的大小。对于 NavigationController 的视图，我将 autoresizesSubviews 设置为 NO。

当我在 viewDidAppear 中更改框架时，它可以工作，但这看起来有点糟糕，因为框架在屏幕上显示后会调整大小:(

我可以改变什么来让它工作？

谢谢，斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:05:23.457

我通过使用带有 UITableView 而不是 UITableViewController 的 UIViewController 解决了这个问题。

有了它，我可以调整 viewDidLoad 中 tableView 框架的大小，一切都很好:)

# java - 没有 GWTquery 函数在工作

> ID：14400401
> 
> 赞同：0
> 
> 时间：2013-01-18T13:54:09.570
> 
> 标签：java, jquery, gwt, gwtquery

我正在尝试在我的项目中使用 GWTquery。我已成功添加`jar`文件，将其添加到类路径，导入所有类，但仍然没有任何效果。谁能告诉我我错过了什么？这是代码：

```
import static com.google.gwt.query.client.GQuery.*;
import com.google.gwt.query.client.plugins.Effects;
public class myfoo implements EntryPoint {
  public void onModuleLoad() {

        final TextBox tb = new TextBox();
        tb.setStyleName("foo"); 
        VerticalPanel panel = new VerticalPanel();
        panel.add(tb);
        $(".foo").setText("loo");
        $(".foo").click(new Function() {
            public boolean f(Event e) {
                tb.setText("foo");
                return true;  
            }
        });
        RootPanel.get().add(panel);
      }
     } 
```

在页面加载时，文本框保持为空，没有填充**loo**。Aslo 点击它没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:12:09.570

我相信`$(".foo")`无法匹配您的文本框，因为它尚未添加到文档中。尝试`RootPanel.get().add(panel)`在那些之前移动线`$(".foo")`。

# facebook-graph-api - 我的应用程序可以访问多长时间？

> ID：14400402
> 
> 赞同：1
> 
> 时间：2013-01-18T13:54:12.503
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

我需要创建一个可以代表用户将照片发布到他/她的墙或相册的应用程序。用户在 Facebook 亲自访问/使用该应用程序的情况下，该应用程序可以发布照片的最长可能时间是多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:00:42.617

如果您请求长期访问令牌，大约需要 60 天。有关详细信息，请参见此处：[https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# python - 在 Python 和 sqlite 中读取 csv 文件时保留 null

> ID：14400411
> 
> 赞同：0
> 
> 时间：2013-01-18T13:54:43.220
> 
> 标签：python, database, sqlite, csv, null

> **可能重复：**
> [python csv阅读器行为，无和空字符串](https://stackoverflow.com/questions/11379300/python-csv-reader-behavior-with-none-and-empty-string)

读取 csv 文件时，阅读器将`None`或读取`NULL`为`(u'')`. 在将值插入 sqlite 数据库并执行查询时，这给我带来了问题，因为所有空值都存储为空字符串。有没有办法使用阅读器插入空值？到目前为止，我所拥有的是：

```
reader = csv.reader(open(filename))
curs.executemany("INSERT INTO mytable VALUES (?,?,?,?)", reader) 
```

# python - 从 python 调用 dict 到 openoffice 中的基本宏

> ID：14400412
> 
> 赞同：2
> 
> 时间：2013-01-18T13:54:43.010
> 
> 标签：python, json, libreoffice-basic

从 Basic 宏中，我启动了一个 Python 脚本，该脚本返回一个 json 输入，如下所示：

```
{
    u'commande': {
        u'nom_commande': u'TEST PANIER EXPRESS', 
        u'statut_commande': u'prepa', 
        u'numero': u'712', 
        u'note': u"test \xe0 l'arriv\xe9e de autobus.", 
        u'id_commande': u'17', u'maj_commande': u'2013-01-18 10:56:28'
    }
} 
```

我的问题是检索基本数据。我总是有这个错误：

> list 或 dict 对象没有属性 gettypes traceback 跟随

似乎我的脚本只能返回字符串。这是一种接收字典或列表的方法吗？

非常感谢您的任何回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:35:14.020

似乎 python 脚本应该返回一个元组（包含元组）。然后 Basic 可以管理 python 的返回，因为它是一个数组。

[这篇文章很有帮助](https://stackoverflow.com/questions/7591656/how-can-i-call-a-python-macro-in-a-cell-formula-in-openoffice-org-calc)

# ios - 自定义 UITableViewCell，重新排序时删除初始视图

> ID：14400417
> 
> 赞同：3
> 
> 时间：2013-01-18T13:54:56.637
> 
> 标签：ios, objective-c

我有一个看起来像这样的自定义单元格

细胞

-ContainingView（称为 cellframe）

- 标签

- 标签

包含视图的原因是我可以在单元格周围设置阴影。

下面是我的代码

```
#import "QuickNoteMasterViewCell.h"
#import <QuartzCore/QuartzCore.h>

@interface QuickNoteMasterViewCell ()

@property (nonatomic, strong) CAShapeLayer *shapeLayer;

@end

@implementation QuickNoteMasterViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state

}

-(void)setEditing:(BOOL)editing{

}

// this adds shadow and border to the cell

- (void)configureBackgroundView
{
    UIView *cellFrame = self.cellFrame;
    //cellFrame.layer.borderColor = [UIColor whiteColor].CGColor;
    //cellFrame.layer.borderWidth = 10.;

    CGSize size = cellFrame.bounds.size;
    CGFloat curlFactor = 15.0f;
    CGFloat shadowDepth = 5.0f;
    cellFrame.layer.shadowColor = [UIColor blackColor].CGColor;
    cellFrame.layer.shadowOpacity = 1.f;
    cellFrame.layer.shadowOffset = CGSizeMake(.0f, 3.0f);
    cellFrame.layer.shadowRadius = 3.0f;
    cellFrame.layer.masksToBounds = NO;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:CGPointMake(0.0f, 0.0f)];
    [path addLineToPoint:CGPointMake(size.width, 0.0f)];
    [path addLineToPoint:CGPointMake(size.width, size.height + shadowDepth)];
    [path addCurveToPoint:CGPointMake(0.0f, size.height + shadowDepth)
            controlPoint1:CGPointMake(size.width - curlFactor, size.height + shadowDepth - curlFactor)
            controlPoint2:CGPointMake(curlFactor, size.height + shadowDepth - curlFactor)];
    cellFrame.layer.shadowPath = path.CGPath;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    [self configureBackgroundView];

}

@end 
```

![拖动前](../Images/2f78126b048f97d97498b4e6ca95d3cd.png)

问题是当我重新排序单元格时，ContainingView（称为 cellframe）被删除。

![在拖动期间](../Images/ab3bf3d191435649e1ba181df9cc9fc9.png)

任何想法如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:04:56.683

当 UITableViewCell 重新排序时，TableView 将隐藏所有不是 UILabel 或 UIImageView 的内容。

不太清楚为什么会这样，但我不知道有什么办法。我知道唯一可行的方法是将阴影视图创建为图像并将 UIView 切换为 UIImageView。

对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:15:22.933

每当我做自定义单元格时，我都会添加我自己的 customView 来填充整个单元格并在该视图中完成我所有的绘图/自定义要求，然后你就可以完全控制。

同样在 willDisplayCell 上，您可以指示自定义单元格上的方法以重新实现阴影等。

```
– tableView:willDisplayCell:forRowAtIndexPath: 
```

# c - 如何将 send() 与整数一起使用

> ID：14400419
> 
> 赞同：1
> 
> 时间：2013-01-18T13:55:00.460
> 
> 标签：c, winapi, winsock

我有以下代码：

```
int * buffer;
buffer = (int *) malloc((320*240)*sizeof(int)); 
```

填充`buffer`数据后，我想使用 UDP 套接字发送它，但是目前我的以下`send`函数似乎只发送 4 个字节（数据）而不是（（320 * 240）* sizeof（int））：

```
iError = send(MySock, (char *)(buffer) , sizeof(buffer), 0); 
```

我在`send`函数的第二个和第三个字段上尝试了不同的组合，但它不起作用，我应该使用什么正确的语法？

顺便说一句，我必须定义`buffer`as ，`int *`因为它被其他必须获得 as 的库使用`int *`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:57:48.233

这是因为在您的`send()`通话中，您指定了`sizeof (buffer)`. 这是变量缓冲区的大小，也就是指针的大小，在您的系统上恰好是四个字节。这**不是**指针指向的块的大小，该信息不可用。

您必须指定`320 * 240 * sizeof *buffer`以获得正确的大小。当然，更好的方法是将其分解为一个变量：

```
int *buffer;
const size_t buffer_size = 320 * 240 * sizeof *buffer;

if( (buffer = malloc(buffer_size)) != NULL )
{
  /* ... fill buffer ... */
  send(MySock, buffer, buffer_size, 0);
} 
```

无需投射、[`malloc()`返回`void *`](https://stackoverflow.com/a/605858/28169)和`send()`接受它。

请注意，由于 IP 分段，`send()`在 UDP 上执行非常大的 s[可能不起作用](https://stackoverflow.com/questions/3712151/udp-ip-fragmentation-and-mtu)。根据我的经验，最好使用许多小数据报发送它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:57:09.433

`sizeof(buffer)`是指针类型的大小，在您的系统上显然是 4 个字节。

跟踪缓冲区 ( `320 * 240 * sizeof(int)`) 的长度并将其传递给`send()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:56:43.243

采用

```
send(MySock, (char *)(buffer) , (320*240)*sizeof(int), 0); 
```

代替

```
send(MySock, (char *)(buffer) , sizeof(buffer), 0); 
```

`buffer`是指针类型，指针的大小`4 byte`适用于您的系统（对于其他系统，它可能是 8 个字节（如 64 位机器）

您必须输入分配内存的大小而不是指针的大小。分配内存的大小与指向的指针的大小不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:57:53.913

错误在这一行

```
iError = send(MySock, (char *)(buffer) , sizeof(buffer), 0); 
```

您告诉 send 发送指针的大小，即 4 个字节。你需要给它 (320*240)*sizeof(int)。

# c# - MS Syndication 类不接受有效的 RSS 提要

> ID：14400420
> 
> 赞同：1
> 
> 时间：2013-01-18T13:55:01.087
> 
> 标签：c#, .net, rss

为什么 MS Syndication 类不接受有效的 RSS 提要？

```
public static Stream GetResponseStream(string url)
{
    var uri = new Uri(url, true);
    WebRequest request = WebRequest.Create(uri);
    request.Method = WebRequestMethods.Http.Get;
    WebResponse response = request.GetResponse();
    return response.GetResponseStream();
}

public static void GetRSS()
{
    using (Stream stream1 = GetResponseStream("http://www.lostfilm.tv/rssdd.xml"))
    {
        try
        {
            XmlReader xmlReader = XmlReader.Create(stream1);
            var feeds = SyndicationFeed.Load(xmlReader);
        }
        catch (Exception ex)
        {
            // Error :( 
        }
    }
} 
```

RSS 本身是有效的：

[http://validator.w3.org/appc/check.cgi?url=http%3A%2F%2Fwww.lostfilm.tv%2Frssdd.xml](http://validator.w3.org/appc/check.cgi?url=http%3A%2F%2Fwww.lostfilm.tv%2Frssdd.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:19:37.103

`SyndicationFeed`仅支持 RSS 2.0 和 Atom 1.0（您的 RSS 版本为 0.91）。

您可以使用外部库，例如[Argotic Syndication Framework](http://argotic.codeplex.com/)。

[使用NuGet](http://nuget.org/)安装包：

```
Install-Package Argotic.Core 
```

然后尝试：

```
var feed = RssFeed.Create(new Uri("http://www.lostfilm.tv/rssdd.xml", true));
foreach (var post in feed.Channel.Items)
{
    Console.WriteLine(post.Title);
} 
```

# regex - 没有在所有数组中找到的正则表达式做某事

> ID：14400428
> 
> 赞同：0
> 
> 时间：2013-01-18T13:55:31.987
> 
> 标签：regex, perl

我很遗憾地没有要求 perl“在数组中搜索我感兴趣的元素，写下他们的名字，或者如果你没有找到他们就写一个 NA”。

例如，假设我在一个数组中寻找 Orc、Troll 和 Elf

```
 @creatures = qw/Troll Knight Elf Shrubbery Dragon Ni/; 
```

当没有找到他们写作和 NA 时，我如何检查他们和（我的大问题）。在这个例子中，我会寻找这样的东西：

```
 NA  Troll   Elf 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:17:21.743

您可以使用哈希进行快速查找：

```
my %creatures = map { $_ => 1 } @creatures;

print $creatures{$_} ? $_ : "NA" for qw(Orc Troll Elf); 
```

请注意，这会区分大小写，因此它将考虑“orc”和“Orc”两个不同的东西。您可以通过预先转换为特定情况来解决此问题：

```
my %creatures = map { lc($_) => 1 } @creatures;

print $creatures{lc($_)} ? $_ : "NA" for qw(Orc Troll Elf); 
```

您还可以使用`grep`：

```
for my $race (qw(Orc Troll Elf)) {
    if (grep /^$race$/i, @creatures) {
        print $race;
    } else {
        print "NA";
    }
} 
```

请注意使用`/i`修饰符使匹配不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:02:29.033

You can use the Smart Match:

```
#!/usr/bin/perl
use warnings;
use strict;

my @creatures = qw/Troll Knight Elf Shrubbery Dragon Ni/;
my @searches  = qw/Orc Troll Elf/;

for my $search (@searches) {
    if ($search ~~ @creatures) {
        print $search, ' ';
    } else {
        print "NA ";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:24:40.403

With the basic knowledge of perl:

```
use warnings;
use strict;

my @str = qw(Troll Knight Elf Shrubbery Dragon Ni);
my %hash;
my @to_match = qw(Orc Troll Elf);
foreach my $s (@str) {
    $hash{$s} = $s;
}

foreach (@to_match) {
    if (defined $hash{$_}) {
        print "$_ ";
    } else {
        print "NA ";
    }
} 
```

# android - SherlockActionBar 样式不适用于 ICS

> ID：14400429
> 
> 赞同：2
> 
> 时间：2013-01-18T13:55:33.593
> 
> 标签：android, styles, android-actionbar, actionbarsherlock, android-theme

SherlockActionBar 遇到了一个奇怪的问题。

我需要自定义主题`Theme.Sherlock.Light.DarkActionBar`。

如果我`Theme.Sherlock.Light.DarkActionBar`在 AndroidManifest 中设置主题，一切正常（姜饼和 ICS 也是）。

但是，如果我制作自己的主题，继承自`Theme.Sherlock.Light.DarkActionBar`，它将不适用于具有 ICS+ 的设备。即使自定义样式为空如下：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
  <style name="customTheme" parent="Theme.Sherlock.Light.DarkActionBar" >
  </style>
</resources> 
```

并在应用程序节点的清单中：

```
 android:theme="@style/customTheme" 
```

这在 Gingerbread 上没问题，但在 ICS+ 上应用了 Theme.Sherlock.Light。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:15:53.310

正如我在评论中已经提到的，您必须检查您是否有一个 values-v11 文件夹，其主题覆盖了您在 Android API 11+ 中的主题。

# objective-c - NSWindow 不显示？

> ID：14400438
> 
> 赞同：3
> 
> 时间：2013-01-18T13:56:09.800
> 
> 标签：objective-c, cocoa, nswindow

我有以下代码：

```
NSRect contentRect = NSZeroRect;
contentRect.size = NSMakeSize(400, 400);
contentRect.origin = NSMakePoint(400, 400);

NSWindow* window = [[NSWindow alloc] initWithContentRect:contentRect styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer:NO];

[window setBackgroundColor:[NSColor blackColor]];
[window setMovableByWindowBackground:NO];
[window setExcludedFromWindowsMenu:YES];
[window setAlphaValue:0.8];
[window setOpaque:NO];
[window setHasShadow:YES];
[window useOptimizedDrawing:YES];

[NSApp activateIgnoringOtherApps:YES];
[window makeKeyAndOrderFront:nil]; 
```

它被`- (BOOL) applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag`. 单击 Dock 图标时会调用此函数。

为什么我的窗口不显示？

我还注意到，在停靠图标上单击十几次时。有时我看到我的窗口每秒出现 1/10。然后它消失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:02:39.850

如果您使用 ARC，

然后`window`作为类的属性。它将被解决，因为在这种情况下它正在被释放。

采用 ：

`@property(strong) NSWindow* window;`

# cakephp - Cakephp - 试图模拟一个简单的 sql 查询，涉及连接 3 个表和 2 个 where 条件

> ID：14400444
> 
> 赞同：0
> 
> 时间：2013-01-18T13:56:21.750
> 
> 标签：cakephp

我有 3 个模型

1.  `MktingCampaign`
2.  `Campaign`
3.  `IvrNumber`

`MktingCampaign`hasMany`Campaign`和`Campaign`hasOne `IvrNumber`。

我正在尝试模拟此查询-

```
select * from mkting_campaign 
join campaign on mkting_campaign.id = campaign.mkting_campaign_id 
join ivr_numbers on campaign.id = ivr_numbers.campaign_id 
where campaign.status = 1 and ivr_numbers.status = 0; 
```

它的作用是获取 mkting_campaigns 的`campaigns.status = 1 and ivr_numbers.status = 0`.

我写了这个，

```
$this->MktingCampaign->find('all',array(
    'contain' => array(
        'Campaign' => array(
            'conditions' => array('Campaign.status' => 1), 
            'IvrNumber' => array(
                'conditions' => array(
                    'IvrNumber.status' => 0
                )
            )
        )
    )
)); 
```

它返回所有 mkting_campaigns 并用满足上述状态条件的活动和 ivrnumber 填充 mkting_campaigns。但我只想要满足上述条件的 mkting_campaigns（不是所有 mkting_campaigns）

我这里有两个解决方案

1.  我可以改用连接。但这是一个好习惯吗？
2.  我必须对结果实施一些逻辑来过滤不需要的结果，`mkting_Campaigns`但是没有更好的方法来修改查询以仅获得所需的结果吗？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:19:33.173

首先，`Containable`不加入`hasMany`。您可以将条件绑定`hasMany`为 a`hasOne`并将数据保留为可包含。

查询前

$this->bindModel(array('hasOne' => array(....)));

添加到您的查询：

```
'contain' => array(
    'HasOneAliasFromAbove',
    ... other contains ....
),
'conditions' => array(
   'HasOneAliasFromAbove.field' => 'value'
) 
```

您也可以直接在关系中添加条件，这会给您一个类似的连接

```
LEFT JOIN foo as Foo ON (... your conditions ...) 
```

或者您可以将其`RIGHT JOIN`设为仅获取包含相关数据的行。

# jira - 将用户身份验证从“Jira 用户服务器”传递到 Artifactory？

> ID：14400446
> 
> 赞同：2
> 
> 时间：2013-01-18T13:56:32.140
> 
> 标签：jira, artifactory, atlassian-crowd

是否可以将用户身份验证从“Jira 用户服务器”（非人群）传递到 Artifactory？我知道 Artifactory Pro 可以与 Crowd Server 通信……但我无法让 Artifactory 与“Jira 用户服务器”一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T08:24:12.220

新的 Artifactory 3.2.x 允许您连接到 Jira 用户服务器（您不需要 Crowd 服务器）并使用您的 Jira 帐户登录 Artifactory。

非常感谢 JFrog

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:20:38.893

我还没有看到任何允许您使用 JIRA 用户服务器为 Artifactory 提供服务的东西，但我确实认为您的要求应该让您查看专用的用户目录服务。

LDAP 和 Active Directory 是常见的用户目录工具，并受到许多服务和 Web 应用程序的支持。在我们公司，现在需要考虑 Web 应用程序支持 LDAP。

尽管您现在可能只看到 Artifactory 和 JIRA 的用途，但当您想要添加（例如）Git 存储库或 Sharepoint 目录时，您的用例最终会变得更加复杂。如果您现在花时间配置标准用户目录，那么以后添加这些服务要简单得多。

如果您在主要基于 Windows 的环境中操作，则 Active Directory 与 Windows Server 捆绑在一起，并且可能已经用于某些用途。如果您是基于 Unix 的，OpenLDAP 相对容易设置和管理，并且有合理的文档。

顺便说一句，我们最初使用 Crowd 作为我们的用户目录是因为它易于使用，但从那以后我们被迫迁移到 LDAP 以与各种其他系统集成。现在回想起来，当我们拥有的系统数量很少时，直接使用 LDAP 会容易得多。

# ruby-on-rails - 克隆了 Ruby on Rails 存储库，但无法安装捆绑的 gem

> ID：14400447
> 
> 赞同：3
> 
> 时间：2013-01-18T13:56:40.623
> 
> 标签：ruby-on-rails, bundler

我已经克隆了 Rails 存储库以尝试帮助解决一些问题，当然，我选择了遵循Ruby on Rails指南的 The Hard Way of [Contributing to Ruby on Rails 。](http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html)一切都很顺利，克隆了 repo，开始跟踪上游并继续安装捆绑的 gem 并运行测试。马上我得到了这个：

```
$ bundle install
Updating git://github.com/rails/arel.git
Updating git://github.com/brynary/rack-test.git
Updating git://github.com/rails/jquery-rails.git
Updating git://github.com/rails/coffee-rails.git
Updating git://github.com/wycats/thor.git
Updating git://github.com/rails/activerecord-deprecated_finders.git
Updating git://github.com/rails/sprockets-rails.git
Updating git://github.com/voloko/sdoc.git
Fetching gem metadata from https://rubygems.org/........
Fetching gem metadata from https://rubygems.org/..
Could not find gem 'activerecord-deprecated_finders (= 0.0.1) ruby', which is required  by gem 'rails (>= 0) ruby', in any of the sources. 
```

在 Google 上苦苦挣扎后，我发现 gem **activerecord-deprecated_finders**似乎还没有在 Rubygems 上发布，这可以解释最后一个错误。[Yehuda Katz](http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/)建议可以在 Gemfile 上声明这些依赖项，并覆盖 gemspec 定义，开发 Rails 的好人确实做到了：

```
# rails/Gemfile
...
gem 'activerecord-deprecated_finders', github: 'rails/activerecord-deprecated_finders', branch: 'master'
... 
```

我已经尝试了 Yehuda 帖子中一位评论者的建议，但它也没有奏效：

```
# rails/Gemfile
...
@dependencies.delete_if{ |d| d.name == 'activerecord-deprecated_finders'  }
... 
```

所以，我有点不知道为什么`bundle install`没有去工作。我找到了对那个 gem 的引用`activerecord/activerecord.gemspec`并评论了解决问题的方法，但这似乎不是一个可以接受的解决方案。有谁知道我可能哪里出错了？我正在使用 Ruby 1.9.3p286 和 Bundler 1.2.3。

**PS**：在生成一个新的 Rails 4.0.0.beta 应用程序时，我看到了很多关于这个 gem 的信息，这不是我想要在这里完成的。

谢谢！

# vb.net - 解析 HTML 表格

> ID：14400456
> 
> 赞同：2
> 
> 时间：2013-01-18T13:57:06.683
> 
> 标签：vb.net, html-parsing, html-agility-pack, nullreferenceexception

到目前为止，我有以下代码：

```
Dim wreqBalQtr As HttpWebRequest = WebRequest.Create("http://www.reuters.com/finance/stocks/incomeStatement/detail?stmtType=BAL&perType=INT&symbol=" & tickerValue)
wreqBalQtr.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5"
wreqBalQtr.Method = "get"
Dim proxBalQtr As IWebProxy = wreqBalQtr.Proxy
proxBalQtr.Credentials = CredentialCache.DefaultCredentials
Dim documentBalQtr As New HtmlAgilityPack.HtmlDocument
Dim webBalQtr As New HtmlAgilityPack.HtmlWeb
webBalQtr.UseCookies = True
webBalQtr.PreRequest = New HtmlAgilityPack.HtmlWeb.PreRequestHandler(AddressOf onPreReq)
wreqBalQtr.CookieContainer = cookies
Dim resBalQtr As HttpWebResponse = wreqBalQtr.GetResponse()
documentBalQtr.Load(resBalQtr.GetResponseStream, True)
Dim TotalCurrentAssets = documentBalQtr.DocumentNode.SelectSingleNode("//table[@class='dataTable Financials']//tr[13]//td[3]") 
```

HTML是：

```
<table class="dataTable financials" cellspacing="1" cellpadding="0" width="100%">
  <tr>
    <th class="rh">
        <span class="units">
        In Millions of U.S. Dollars<br/>
        (except for per share items)<br/>
        </span>
    </th>
    <th class="data">
        2012<br/>
        2012-09-30<br/>
        <span class="period">
        </span>
      </th>
      <th class="data">
        2012<br/>
        2012-06-30<br/>
        <span class="period">
        </span>
      </th>
      <th class="data">
        2012<br/>
        2012-03-31<br/>
        <span class="period">
        </span>
      </th>
      <th class="data">
        2011<br/>
        2011-12-31<br/>
        <span class="period">
        Reclassified<br/>
        2012-06-30<br/>
        </span>
      </th>
      <th class="data">
        2011<br/>
        2011-09-30<br/>
        <span class="period">
        </span>
      </th>
      </tr>

  <tr class="both stripe ">
        <td class="rh">Cash</td>
        <td class="data plus">6,224.0</td>
          <td class="data plus">7,463.0</td>
          <td class="data plus">11,239.0</td>
          <td class="data plus">4,712.0</td>
          <td class="data plus">4,209.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Cash & Equivalents</td>
        <td class="data plus">10,036.0</td>
          <td class="data plus">7,974.0</td>
          <td class="data plus">11,869.0</td>
          <td class="data plus">5,271.0</td>
          <td class="data plus">6,421.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Short Term Investments</td>
        <td class="data plus">29,464.0</td>
          <td class="data plus">27,685.0</td>
          <td class="data plus">26,208.0</td>
          <td class="data plus">34,643.0</td>
          <td class="data plus">31,930.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Cash and Short Term Investments</td>
        <td class="data plus">45,724.0</td>
          <td class="data plus">43,122.0</td>
          <td class="data plus">49,316.0</td>
          <td class="data plus">44,626.0</td>
          <td class="data plus">42,560.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Accounts Receivable - Trade, Net</td>
        <td class="data plus">7,259.0</td>
          <td class="data plus">6,866.0</td>
          <td class="data plus">5,163.0</td>
          <td class="data plus">5,427.0</td>
          <td class="data plus">4,583.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Notes Receivable - Short Term</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Receivables - Other</td>
        <td class="data plus">550.0</td>
          <td class="data plus">475.0</td>
          <td class="data plus">550.0</td>
          <td class="data plus">745.0</td>
          <td class="data plus">1,278.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Total Receivables, Net</td>
        <td class="data plus">7,809.0</td>
          <td class="data plus">7,341.0</td>
          <td class="data plus">5,713.0</td>
          <td class="data plus">6,172.0</td>
          <td class="data plus">5,861.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Total Inventory</td>
        <td class="data plus">618.0</td>
          <td class="data plus">634.0</td>
          <td class="data plus">--</td>
          <td class="data plus">35.0</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Prepaid Expenses</td>
        <td class="data plus">2,440.0</td>
          <td class="data plus">2,614.0</td>
          <td class="data plus">1,779.0</td>
          <td class="data plus">1,710.0</td>
          <td class="data plus">1,406.0</td>
          </tr>
      <tr class="sum stripe ">
        <td class="rh">Other Current Assets, Total</td>
        <td class="data plus">230.0</td>
          <td class="data plus">146.0</td>
          <td class="data plus">51.0</td>
          <td class="data plus">215.0</td>
          <td class="data plus">215.0</td>
          </tr>
      <tr class="both  total">
        <td class="rh">Total Current Assets</td>
        <td class="data plus">56,821.0</td>
          <td class="data plus">53,857.0</td>
          <td class="data plus">56,859.0</td>
          <td class="data plus">52,758.0</td>
          <td class="data plus">50,042.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Property/Plant/Equipment, Total - Gross</td>
        <td class="data plus">17,038.0</td>
          <td class="data plus">16,137.0</td>
          <td class="data plus">14,963.0</td>
          <td class="data plus">14,400.0</td>
          <td class="data plus">13,815.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Accumulated Depreciation, Total</td>
        <td class="data minus">(5,637.0)</td>
          <td class="data minus">(5,228.0)</td>
          <td class="data minus">(5,088.0)</td>
          <td class="data minus">(4,797.0)</td>
          <td class="data minus">(4,611.0)</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Property/Plant/Equipment, Total - Net</td>
        <td class="data plus">11,401.0</td>
          <td class="data plus">10,909.0</td>
          <td class="data plus">9,875.0</td>
          <td class="data plus">9,603.0</td>
          <td class="data plus">9,204.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Goodwill, Net</td>
        <td class="data plus">10,485.0</td>
          <td class="data plus">10,120.0</td>
          <td class="data plus">7,325.0</td>
          <td class="data plus">7,346.0</td>
          <td class="data plus">6,989.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Intangibles, Net</td>
        <td class="data plus">7,754.0</td>
          <td class="data plus">7,862.0</td>
          <td class="data plus">1,541.0</td>
          <td class="data plus">1,578.0</td>
          <td class="data plus">1,474.0</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Long Term Investments</td>
        <td class="data plus">1,063.0</td>
          <td class="data plus">1,040.0</td>
          <td class="data plus">880.0</td>
          <td class="data plus">790.0</td>
          <td class="data plus">891.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Note Receivable - Long Term</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Other Long Term Assets, Total</td>
        <td class="data plus">2,206.0</td>
          <td class="data plus">2,263.0</td>
          <td class="data plus">664.0</td>
          <td class="data plus">499.0</td>
          <td class="data plus">488.0</td>
          </tr>
      <tr class="sum stripe ">
        <td class="rh">Other Assets, Total</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  total">
        <td class="rh">Total Assets</td>
        <td class="data plus">89,730.0</td>
          <td class="data plus">86,051.0</td>
          <td class="data plus">77,144.0</td>
          <td class="data plus">72,574.0</td>
          <td class="data plus">69,088.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Accounts Payable</td>
        <td class="data plus">2,233.0</td>
          <td class="data plus">2,419.0</td>
          <td class="data plus">760.0</td>
          <td class="data plus">588.0</td>
          <td class="data plus">563.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Payable/Accrued</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Accrued Expenses</td>
        <td class="data plus">6,347.0</td>
          <td class="data plus">5,551.0</td>
          <td class="data plus">3,429.0</td>
          <td class="data plus">4,356.0</td>
          <td class="data plus">3,563.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Notes Payable/Short Term Debt</td>
        <td class="data plus">3,218.0</td>
          <td class="data plus">3,218.0</td>
          <td class="data plus">2,468.0</td>
          <td class="data plus">1,218.0</td>
          <td class="data plus">1,218.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Current Port. of  LT Debt/Capital Leases</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Other Current liabilities, Total</td>
        <td class="data plus">2,636.0</td>
          <td class="data plus">2,840.0</td>
          <td class="data plus">3,085.0</td>
          <td class="data plus">2,751.0</td>
          <td class="data plus">3,544.0</td>
          </tr>
      <tr class="both stripe total">
        <td class="rh">Total Current Liabilities</td>
        <td class="data plus">14,434.0</td>
          <td class="data plus">14,028.0</td>
          <td class="data plus">9,742.0</td>
          <td class="data plus">8,913.0</td>
          <td class="data plus">8,888.0</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Long Term Debt</td>
        <td class="data plus">2,988.0</td>
          <td class="data plus">2,987.0</td>
          <td class="data plus">2,987.0</td>
          <td class="data plus">2,986.0</td>
          <td class="data plus">2,986.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Capital Lease Obligations</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Total Long Term Debt</td>
        <td class="data plus">2,988.0</td>
          <td class="data plus">2,987.0</td>
          <td class="data plus">2,987.0</td>
          <td class="data plus">2,986.0</td>
          <td class="data plus">2,986.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Total Debt</td>
        <td class="data plus">6,206.0</td>
          <td class="data plus">6,205.0</td>
          <td class="data plus">5,455.0</td>
          <td class="data plus">4,204.0</td>
          <td class="data plus">4,204.0</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Deferred Income Tax</td>
        <td class="data plus">1,461.0</td>
          <td class="data plus">1,509.0</td>
          <td class="data plus">384.0</td>
          <td class="data plus">287.0</td>
          <td class="data plus">263.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Minority Interest</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Other Liabilities, Total</td>
        <td class="data plus">2,819.0</td>
          <td class="data plus">2,806.0</td>
          <td class="data plus">2,319.0</td>
          <td class="data plus">2,243.0</td>
          <td class="data plus">2,121.0</td>
          </tr>
      <tr class="both stripe total">
        <td class="rh">Total Liabilities</td>
        <td class="data plus">21,702.0</td>
          <td class="data plus">21,330.0</td>
          <td class="data plus">15,432.0</td>
          <td class="data plus">14,429.0</td>
          <td class="data plus">14,258.0</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Redeemable Preferred Stock, Total</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="sum stripe ">
        <td class="rh">Preferred Stock - Non Redeemable, Net</td>
        <td class="data plus">0.0</td>
          <td class="data plus">0.0</td>
          <td class="data plus">0.0</td>
          <td class="data plus">0.0</td>
          <td class="data plus">0.0</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Common Stock, Total</td>
        <td class="data plus">22,204.0</td>
          <td class="data plus">21,357.0</td>
          <td class="data plus">20,795.0</td>
          <td class="data plus">20,264.0</td>
          <td class="data plus">19,697.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Additional Paid-In Capital</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Retained Earnings (Accumulated Deficit)</td>
        <td class="data plus">45,456.0</td>
          <td class="data plus">43,280.0</td>
          <td class="data plus">40,495.0</td>
          <td class="data plus">37,605.0</td>
          <td class="data plus">34,901.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Treasury Stock - Common</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  ">
        <td class="rh">ESOP Debt Guarantee</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Unrealized Gain (Loss)</td>
        <td class="data plus">566.0</td>
          <td class="data plus">389.0</td>
          <td class="data plus">416.0</td>
          <td class="data plus">327.0</td>
          <td class="data plus">99.0</td>
          </tr>
      <tr class="sum  ">
        <td class="rh">Other Equity, Total</td>
        <td class="data minus">(198.0)</td>
          <td class="data minus">(305.0)</td>
          <td class="data plus">6.0</td>
          <td class="data minus">(51.0)</td>
          <td class="data plus">133.0</td>
          </tr>
      <tr class="both stripe total">
        <td class="rh">Total Equity</td>
        <td class="data plus">68,028.0</td>
          <td class="data plus">64,721.0</td>
          <td class="data plus">61,712.0</td>
          <td class="data plus">58,145.0</td>
          <td class="data plus">54,830.0</td>
          </tr>
      <tr class="both  total">
        <td class="rh">Total Liabilities & Shareholders' Equity</td>
        <td class="data plus">89,730.0</td>
          <td class="data plus">86,051.0</td>
          <td class="data plus">77,144.0</td>
          <td class="data plus">72,574.0</td>
          <td class="data plus">69,088.0</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Shares Outs - Common Stock Primary Issue</td>
        <td class="data plus">264.52</td>
          <td class="data plus">261.58</td>
          <td class="data plus">259.50</td>
          <td class="data plus">257.55</td>
          <td class="data plus">255.70</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Shares Outstanding - Common Issue 2</td>
        <td class="data plus">64.04</td>
          <td class="data plus">65.36</td>
          <td class="data plus">66.40</td>
          <td class="data plus">67.34</td>
          <td class="data plus">68.05</td>
          </tr>
      <tr class="both stripe ">
        <td class="rh">Shares Outstanding - Common Issue 3</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both  ">
        <td class="rh">Shares Outstanding - Common Issue 4</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      <tr class="both stripe total">
        <td class="rh">Total Common Shares Outstanding</td>
        <td class="data plus">328.55</td>
          <td class="data plus">326.94</td>
          <td class="data plus">325.91</td>
          <td class="data plus">324.89</td>
          <td class="data plus">323.76</td>
          </tr>
      <tr class="both  total">
        <td class="rh">Total Preferred Shares Outstanding</td>
        <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          <td class="data plus">--</td>
          </tr>
      </table>

</div>
    </div>
    </div> 
```

当我尝试使用变量 TotalCurrentAssets 从 Total Current Assets 行中提取第二列时（数字应为 53,857.0）。我得到“用户代码未处理 NullReferenceException。对象引用未设置为对象实例。”

这是否意味着变量 TotalCurrentAssets 什么也不返回？我假设我的错误出现在我的最后一行代码中。

附加信息

我不知道这是否会影响我的问题，但我在原始帖子中的代码之前运行此代码：

```
Dim wreqBeta As HttpWebRequest = WebRequest.Create("http://www.reuters.com/finance/stocks/overview?symbol=" & tickerValue)
        wreqBeta.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5"
        wreqBeta.Method = "get"
        Dim proxBeta As IWebProxy = wreqBeta.Proxy
        proxBeta.Credentials = CredentialCache.DefaultCredentials
        Dim documentBeta As New HtmlAgilityPack.HtmlDocument
        Dim webBeta As New HtmlAgilityPack.HtmlWeb
        webBeta.UseCookies = True
        webBeta.PreRequest = New HtmlAgilityPack.HtmlWeb.PreRequestHandler(AddressOf onPreReq)
        wreqBeta.CookieContainer = cookies
        Dim resBeta As HttpWebResponse = wreqBeta.GetResponse()
        documentBeta.Load(resBeta.GetResponseStream, True)
        Dim beta = documentBeta.DocumentNode.SelectSingleNode("//div[@id='overallRatios']//table[@class='dataTable']//tr[1]//td[2]") 
```

在开始解析新网页之前，我是否需要关闭此代码中的任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:12:29.217

属性的名称匹配区分大小写。您的 HTML 包含`*f* inancials`，您的代码需要`*F* inancials`。

`//table[upper-case(@class)=upper-case('dataTable financials')]`当区分大小写不重要时，您可以使用它来防止这些类型的问题。或者您可以使用 XPath 2.0`matches`函数。

最重要的是，确保您访问的网页实际上返回了您期望的数据。在我的本地测试中，返回的页面不包含包含与您的示例类似的数据的表格。

放置手表`documentBalQtr.DocumentNode.OuterHtml`以验证您的页面实际上是否符合您的预期。

# xml - 输出 XML::Twig 对象内容

> ID：14400458
> 
> 赞同：1
> 
> 时间：2013-01-18T13:57:09.810
> 
> 标签：xml, perl, xml-twig

例如，我有一个 Perl XML::Twig 对象`$xmlDef`，它包含以下内容：

```
<ROOT>
  <CHILD>
  </CHILD>
</ROOT> 
```

它是使用以下代码生成的：

```
 my $parser = XML::Twig->new(
            twig_handlers => {
                ROOT => sub { $xmlDef = $_ }
            },
            pretty_print  => 'indented'
    );
    $parser->parse($xmlStr); 
```

当我查看`$xmlDef`using`$xmlDef->print`时，其内容会正确输出到控制台。当我这样做时`print $xmlDef->text`，没有任何输出。使用我做错了`->text`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:06:47.893

该`text`方法返回给定元素的所有**文本内容**。尝试向您的 XML 添加一些文本：

```
<ROOT>
  <CHILD>
    This will be printed.
  </CHILD>
</ROOT> 
```

# php - Smarty in_array 值

> ID：14400460
> 
> 赞同：9
> 
> 时间：2013-01-18T13:57:17.960
> 
> 标签：php, arrays, smarty

我有这样的数组

```
{
     "sCode":"05",
     "sCodeName":"critical_tight_connection",
     "iSeverity":1,
     "aData":{
         "iLevelOfDetailt":2,
         "iDuration":35,
         "sLabel":"Labai trumpas pers\u0117dimas, 35 min.",
         "sLink":""
     }
} 
```

我正在用 smarty 打印他（数组未序列化，我已经为您的方便做了）

```
{if !empty( $aSegment.aNotices.aStop )}
    <ul>
        {foreach from=$aSegment.aNotices.aStop item=aNotice}
            <li>
                <img class="{$aNotice.sCodeName}" />
                {$aNotice.sLabel}
            </li>
        {/foreach}
    </ul>
{/if} 
```

如果 aNotices.aStop.sCode 中存在“05”，如何使用 smarty 检查？（在 foreach 循环之前）

试过这个

```
{if in_array('05', $aSegment.aNotices.aStop)}
    exist
{/if} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T00:27:55.857

你可以使用这个：

```
{if '05'|in_array:$aSegment.aNotices.aStop}EXIST{/if} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:26:31.683

你的意思是这样的吗？

```
{if $aNotice.sCode == '05'} .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:29:00.183

谢谢**hek2mgl**和**Jeff Bic**，修改了你的答案，这很好用：

```
{if !$aSegment.aNotices.aStop|@count gt 0}
    {t lang='en'}Stop duration{/t}{if $server.lang != 'en'} / {t}Stop duration{/t}{/if}: {$aSector.aStops.$iSegmentIndex|mins_to_time}
{/if} 
```

# jquery - 具有特定高度的拆分表

> ID：14400462
> 
> 赞同：2
> 
> 时间：2013-01-18T13:57:20.920
> 
> 标签：jquery, html-table

**如何拆分表：**

我有一个表，当行太长时，我想将其拆分为不同的表。我制作了一个脚本来测量行的高度并将其添加到高度直到达到特定高度。然后将添加“新行”类。就我而言，这就是...

**Javascript jQuery**

```
$(document).ready(function(){
  var init_height = $("table").height();   // total table height
  var max_height = 400;                    // example max height
  if(init_height > max_height) {
    var pages = Math.ceil(init_height / max_height);
  }
  var start_height = 0;                    // start counter
  $("table").find("tr").each(function(){
    start_height = start_height + $(this).height();
    if(start_height > max_height) {
      $(this).addClass("new");             // marks the new table
      start_height = 0;                    // reset counter
    }
  });

  //$(this).find('.new'); ???????????

}); 
```

**HTML**

```
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Lorem</td>
      <td>Dolor sit amet..... etc</td>
    <tr>
    <!-- a lot more rows here -->
  </tbody>
</table> 
```

在这个[jsfiddle 中](http://jsfiddle.net/BCK89/)，您可以看到应该在标记为红色的新表中开始的行。我想要的结果也会在每张新桌子上都有头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:08:40.477

大部分你想要的：

[http://jsfiddle.net/BCK89/1/](http://jsfiddle.net/BCK89/1/)

```
$(".new").each(function () {
  $("<table>").insertAfter("table:last");
  $("<thead>").append("table:last");
  $(this).nextUntil('.new').addBack().appendTo("table:last");
}); 
```

我不确定你是否想把它留`.new`在旧桌子上。如果没有，请删除`.addBack`. 您还必须填写`<thead>`，但这应该很容易。

# python - 使用 Django 的 GUI 驱动的 Web 应用程序？

> ID：14400463
> 
> 赞同：2
> 
> 时间：2013-01-18T13:57:23.770
> 
> 标签：python, django

我正在尝试构建一个 Web 应用程序并考虑将 Django 作为一个 Web 框架。我有大量的 Python 经验，但在 Web 开发方面没有经验（热衷于学习！）。

我需要开发一个界面，使用户能够将电子元件拖放到画布上并将它们链接起来形成电路。

Django 是否适合这种类型的应用程序？

如果没有，有人可以提出替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:01:26.687

Well, Django is for server side scripting, and You need to create mostly client-side app.

Consider using RaphaelJS, it's a great Javascript library for SVG graphics [link](http://raphaeljs.com/)

Then, You should save data that user created, and that is where you should use Django.

Also, users login and registration is Django's stuff.

# php - 在 mysqli 中使用“config.php”文件

> ID：14400465
> 
> 赞同：3
> 
> 时间：2013-01-18T13:57:25.813
> 
> 标签：php, mysql, loops, mysqli, connection

我最近被告知停止使用`mysql_query()`并改用`mysqli()`. 不用说，我在代码中进行这些更改时遇到了困难。我很想修复我目前拥有的东西，但是我也在寻找最有效（阅读最少打字）的方式来循环下面的示例。

在我的 config.php 文件中

```
<?php
    $host = 'mysql.host.com';
    $user = 'userName';
    $password = 'password';
    $database = 'database';
    $link = new mysqli();
    $link->connect($host, $user, $password, $database);
    if (mysqli_connect_errno()) {
        exit('Connect failed: '. mysqli_connect_error());
    }
?> 
```

在我的 index.php

```
$i = 0;
$getFundsQuery = "SELECT * FROM fund";
$getFundsResult = $link->query($getFundsQuery);
while($i < $getFundsResult->num_rows){
    echo "<option value = '".$getFundsResult['fundID']."'>".$getFundsResult['name']."</option>";
    $i++;
} 
```

直接的问题是没有数据被返回。如上所述，我也在寻找一种方法，这种方法可以产生最少的输入以循环遍历结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:03:08.200

首先，您可以省略`$link->connect(..)`with：

```
$mysqli = new mysqli($host, $user, $password, $database); 
```

其次，像这样循环你的结果：

```
while ( $row = $getFundsResult->fetch_object() ) {
    echo "<option value = '" . $row->fundID ."'>" . $row->name . "</option>";

} 
```

# javascript - WinJS - XHR - 是否无法设置引用者？

> ID：14400475
> 
> 赞同：0
> 
> 时间：2013-01-18T13:57:50.883
> 
> 标签：javascript, windows-8, xmlhttprequest, winjs

我正在为一家使用 Referer 的公司开发 WinJS 应用程序是他们的 API。

不幸的是，我找不到这样做的方法，即使是 Cookies！

* * *

这是一个代码示例：

```
Q.when(WinJS.xhr({
  url: "http://localhost:8888/api/auth/",
  type: "GET",
  headers: {
    "If-Modified-Since": "Mon, 27 Mar 1972 00:00:00 GMT",
    "Referer": "http://localhost:8888/api/"
  }
})); 
```

* * *

WinRT 似乎使用 IE 和其他浏览器的相同行为。从请求中删除 Referer 和 Cookie 标头的位置。

任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:02:57.247

If you are using the Referer for authentication you should consider switching to a proper authentication system. Something like API keys.

Referer was never designed to be a tool for authentication, so it does a really bad job at it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:49:20.707

使用 AtomPubClient 作为解决方法怎么样？

尝试这个：

```
function doRequest3() {
    var reader;
    var client = Windows.Web.AtomPub.AtomPubClient();
    var uri = new Windows.Foundation.Uri("http://example.com");
    client.setRequestHeader("Referer", "http://localhost:8888/api/");
    client.retrieveMediaResourceAsync(uri).then(function(stream)
    {
        reader = Windows.Storage.Streams.DataReader(stream);
        return reader.loadAsync(999999);
    }).done(function (bytesRead) {
        var contentString = reader.readString(bytesRead);
        document.getElementById("content").innerText += "Content: " + contentString;
    }, function (error) {
        console.log(error);
    });
} 
```

# javascript - 可重复输入验证不适用于不可重复字段

> ID：14400489
> 
> 赞同：0
> 
> 时间：2013-01-18T13:58:27.070
> 
> 标签：javascript, jquery

我正在创建一个可复制的表单，但我遇到了一个小问题。

我有一个主要成员输入和一个可重复的依赖输入，它们通过 id 验证运行，它会根据您的 id 自动为您提供年龄和性别。

我的问题是，所有重复项都根据那里的 id 获得唯一的年龄和性别，但主要成员获得第一个受抚养人的性别。

代码必须保持与现在相同的格式才能与其余代码一起使用。

这是一个 jsFiddle：http: [//jsfiddle.net/dawidvdh/ZQwZm/](http://jsfiddle.net/dawidvdh/ZQwZm/) id 示例：85 0929 5266086 和代码：

jQuery：

```
// JavaScript Document
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking

//Main Variables
var main_input_groups = ["main_group-1"];
var main_age_input_groups = ["main_age_group-1"];
var main_gender_input_groups = ["main_gender_group-1"];
//Main Variables
//General Variables
var input_groups = ["group-1"];
var age_input_groups = ["age-group-1"];
var gender_input_groups = ["gender-group-1"];
var idNumber;
var cell_values;
var pass_values;
var values;
//General Variables
//Generate variables
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var age_fields=[0,1];
var gender_fields=[0];
//Main Member generate
var main_id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var main_age_fields = [0,1];
var main_gender_fields = [0];
//Main Member generate
//Main Member inputs
var mainID;
var mainPAS;
var mainCon;
var mainCod;
//Main Member inputs
//Main Member gen
var main_id_input = "<input class='mainid' maxlength='1' name='mainid' type='text' />";
var main_age_input = "<input class='mainage' maxlength='1' name='mainage' type='text' />";
var main_gender_input = "<input class='maingender' maxlength='1 name='maingender' type='text' />";
//Main Member gen
var id_input = "<input class='id' maxlength='1' name='id' type='text' />";
var age_input = "<input class='age' name='age' type='text' />";
var gender_input = "<input class='gender' maxlength='1' name='gender' type='text' />";
//Generate variables
jQuery(document).ready(function(e) {
    //Member
    jQuery(main_id_fields).each(function() {
        jQuery(main_id_input).appendTo('#main_group-1');
    });
    jQuery(main_age_fields).each(function() {
        jQuery(main_age_input).appendTo('#main_age_group-1');
    });
    jQuery(main_gender_fields).each(function() {
        jQuery(main_gender_input).appendTo('#main_gender_group-1');
    });
    //Member
    //populate jquery generated fields
    jQuery(id_fields).each(function() {
        jQuery(id_input).appendTo('#group-1');
    });
    jQuery(age_fields).each(function() {
        jQuery(age_input).appendTo('#age-group-1');
    });
    jQuery(gender_fields).each(function() {
        jQuery(gender_input).appendTo('#gender-group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var gender_newDiv = 'gender-group-'+ g_counter;
        var age_newDiv = 'age-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#group-1').attr('id',"group-" + g_counter );
        $clonedDiv.find('#age-group-1').attr('id',"age-group-" + g_counter );
        $clonedDiv.find('#gender-group-1').attr('id',"gender-group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input:checkbox').removeAttr('checked');
        $clonedDiv.find('input[type="text"]').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        age_input_groups.push(age_newDiv);
        gender_input_groups.push(gender_newDiv);
        input_groups.push(id_newDiv);
    }
    //Cloning Function
    //Validation
    function validate_Id(values) {
            idNumber = values;
            var correct = true;
            if (idNumber.length != 13 || !isNumber(idNumber)) {correct = false;}
            var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
            var today = new Date();
            var id_date = tempDate.getDate();
            var id_month = tempDate.getMonth();
            var id_year = tempDate.getFullYear();
            var currentYear = (new Date).getFullYear();
            var age = Math.floor((today-tempDate) / (365.25 * 24 * 60 * 60 * 1000));
            var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;
            if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
correct = false;}
            var genderCode = idNumber.substring(6, 10);
            var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";
            var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";
            var tempTotal = 0;
            var checkSum = 0;
            var multiplier = 1;
            for (var i = 0; i < 13; ++i) {tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
            if (tempTotal > 9) {tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));}
                checkSum = checkSum + tempTotal;
                multiplier = (multiplier % 2 == 0) ? 1 : 2;}
            if ((checkSum % 10) != 0) {correct = false;};
            if (correct) {
                 $.each(age_input_groups , function(i){
                    var id = 'age-group-'+g_counter;
                    var agevalues = $.map($('#'+id + ' input') , function(e,i){
                        $('#'+id + ' input').first().val(Math.floor(age / 10));
                        $('#'+id + ' input').last().val(age % 10);
                        //return $(e).val(age);
                    });
                });
               $.each(gender_input_groups , function(i){
                    var id = 'gender-group-'+g_counter;
                    var gendervalues = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });

                $.each(main_gender_input_groups , function(i){
                    var id = 'main_gender_group-'+g_counter;
                    var maingendervalues = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });

                $.each(main_age_input_groups , function(i){
                    var id = 'main_age_group-'+g_counter;
                    var mainagevalues = $.map($('#'+id + ' input') , function(e,i){
                        $('#'+id + ' input').first().val(Math.floor(age / 10));
                        $('#'+id + ' input').last().val(age % 10);
                    })
                });

                return idNumber;
            }
            else {
                console.log(idNumber + "-wrong");
            }
            return false;
        }

    function isNumber(n) {return !isNaN(parseFloat(n)) && isFinite(n);};
    //Validation
//Multiple Inputs function
//ID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                $.each(input_groups , function(i){
                    var id = input_groups[i];
                    values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values);
                });
            }
        }
    });
//ID
//MainID
    $(document).on('keydown', 'input.mainid', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
        }
    });

    $(document).on('keyup', 'input.mainid', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.mainid').length) {
                $this.next().focus();
            } else {
                $.each(main_input_groups , function(i){
                    var id = main_input_groups[i];
                    values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values);
                });
            }
        }
    });
//MainID
//Multiple Inputs function

//Basic Validation
//Digits only
jQuery(".id").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
        }
});
//Digits only
$('.error').hide();

//Basic Validation
//submit function
var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
jQuery('#submit').click(function(){
    jQuery('.main-member').each(function(k, v){
        mainmember  = {}
        result['mainmember'] = [mainmember];
        mainmember['id'] = ''; 
        $(v).find('.mainid').each(function(){mainmember['id'] += $(this).val();});
        mainmember['age'] = ''; 
        $(v).find('.mainage').each(function(){
          mainmember['age'] += $(this).val(); 
        });
        mainmember['gender'] = $(v).find('.main_gender').val();
    });
    jQuery('.dependant').each(function(k, v){
        var dep_id = idNumber;
        var iden_values;
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['id'] = ''; 
        $(v).find('.id').each(function(){
          dependants['id'] += $(this).val(); 
        });
        dependants['age'] = ''; 
        $(v).find('.age').each(function(){
          dependants['age'] += $(this).val(); 
        });
        dependants['gender'] = $(v).find('.gender').val();
    });
    var jsonData = JSON.stringify(result);

    console.log(jsonData);

    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        data: {parameters: jsonData}
    });
});
//submit function
}); 
```

和 HTML：

```
<div id="app_wrap">
    <div class="main-member">
        <div class="block_wrap left border_right">
            <div class="block">main id-number:<div id="main_group-1" class="right"></div></div>
            <div class="block_half left border_right">age:<div id="main_age_group-1" class="right"></div></div>
            <div class="block_half right">gender:<div id="main_gender_group-1" class="right"></div></div>
        </div>
    </div>

    <div id="dependant-1" class="dependant">
    <div id="dependant">
        <div class="block_wrap left border_right">
            <div class="block">duplicate id-number:<div id="group-1" class="right"></div></div>
            <div class="block_half left border_right">age:<div id="age-group-1" class="right"></div></div>
            <div class="block_half right">gender: <div id="gender-group-1" class="right"></div></div>
        </div>
    </div>
</div>
    <button id="clone">Add a Dependant</button>
    <button id="submit">submit</button>
</div> 
```

如果需要任何进一步的解释，请随时询问。谢谢，非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:15:15.043

这是如何解决[http://jsfiddle.net/mgechev/ZQwZm/12/](http://jsfiddle.net/mgechev/ZQwZm/12/)

我简化了很多代码，但您需要对其进行重构以使其更具可读性。

这是JavaScript：

```
// JavaScript Document
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking

//Main Variables
var main_input_groups = ["group-1"];
var main_age_input_groups = ["age_group-1"];
var main_gender_input_groups = ["gender_group-1"];
//Main Variables
//General Variables
var input_groups = ["group-2"];
var age_input_groups = ["age-group-2"];
var gender_input_groups = ["gender-group-2"];
var idNumber;
var cell_values;
var pass_values;
var values;
//General Variables
//Generate variables
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var age_fields=[0,1];
var gender_fields=[0];
//Main Member generate
var main_id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var main_age_fields = [0,1];
var main_gender_fields = [0];
//Main Member generate
//Main Member inputs
var mainID;
var mainPAS;
var mainCon;
var mainCod;
//Main Member inputs
//Main Member gen
var main_id_input = "<input class='id' maxlength='1' name='id' type='text' />";
var main_age_input = "<input class='age' name='age' type='text' />";
var main_gender_input = "<input class='gender' maxlength='1' name='gender' type='text' />";
//Generate variables
jQuery(document).ready(function(e) {
    //Member
    jQuery(main_id_fields).each(function() {
        jQuery(main_id_input).appendTo('#group-1');
    });
    jQuery(main_age_fields).each(function() {
        jQuery(main_age_input).appendTo('#age_group-1');
    });
    jQuery(main_gender_fields).each(function() {
        jQuery(main_gender_input).appendTo('#gender_group-1');
    });
    //Member
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', currentdep);
        var gender_newDiv = 'gender-group-'+ g_counter;
        var age_newDiv = 'age-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#group-1').attr('id',"group-" + g_counter );
        $clonedDiv.find('#age-group-1').attr('id',"age-group-" + g_counter );
        $clonedDiv.find('#gender-group-1').attr('id',"gender-group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input:checkbox').removeAttr('checked');
        $clonedDiv.find('input[type="text"]').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        age_input_groups.push(age_newDiv);
        gender_input_groups.push(gender_newDiv);
        input_groups.push(id_newDiv);
    }
    //Cloning Function
    //Validation
    function validate_Id(values, p) {
            idNumber = values;
            var correct = true;
            if (idNumber.length != 13 || !isNumber(idNumber)) {correct = false;}
            var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
            var today = new Date();
            var id_date = tempDate.getDate();
            var id_month = tempDate.getMonth();
            var id_year = tempDate.getFullYear();
            var currentYear = (new Date).getFullYear();
            var age = Math.floor((today-tempDate) / (365.25 * 24 * 60 * 60 * 1000));
            var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;
            if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
correct = false;}
            var genderCode = idNumber.substring(6, 10);
            var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";
            var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";
            var tempTotal = 0;
            var checkSum = 0;
            var multiplier = 1;
            for (var i = 0; i < 13; ++i) {tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
            if (tempTotal > 9) {tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));}
                checkSum = checkSum + tempTotal;
                multiplier = (multiplier % 2 == 0) ? 1 : 2;}
            if ((checkSum % 10) != 0) {correct = false;};
            if (correct) {
                var aig = p.find('.age');
                aig.first().val(Math.floor(age / 10));
                aig.last().val(age % 10);
                p.find('.gender').val(gender);
                /*
                $.each(main_gender_input_groups , function(i){
                    var id = 'main_gender_group-'+g_counter;
                    var maingendervalues = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });

                $.each(main_age_input_groups , function(i){
                    var id = 'main_age_group-'+g_counter;
                    var mainagevalues = $.map($('#'+id + ' input') , function(e,i){
                        $('#'+id + ' input').first().val(Math.floor(age / 10));
                        $('#'+id + ' input').last().val(age % 10);
                    })
                });*/

                return idNumber;
            }
            else {
                console.log(idNumber + "-wrong");
            }
            return false;
        }
        clone_dependant();
    function isNumber(n) {return !isNaN(parseFloat(n)) && isFinite(n);};
    //Validation
//Multiple Inputs function
//ID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                var input_groups = $this.parent();
                console.log(input_groups);
                $.each(input_groups , function(i){
                    var inpg = input_groups[i];
                    values = $.map($(inpg).children('input'), function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values, input_groups.parent().parent());
                });
            }
        }
    });
//ID
//MainID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                var main_input_groups = $this.parent();
                $.each(main_input_groups , function(i, el){
                    values = $.map($(el).children('input'), function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values, main_input_groups.parent().parent().parent());
                });
            }
        }
    });
//MainID
//Multiple Inputs function

//Basic Validation
//Digits only
jQuery(".id").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
        }
});
//Digits only
$('.error').hide();

//Basic Validation
//submit function
var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
jQuery('#submit').click(function(){
    jQuery('div[class*="dependant"]').each(function(k, v){
        var dep_id = idNumber;
        var iden_values;
        dep_counter++
        dependants = {};
        result['dependant'+k] = [dependants];
        dependants['id'] = ''; 
        $(v).find('.id').each(function(){
          dependants['id'] += $(this).val(); 
        });
        dependants['age'] = ''; 
        $(v).find('.age').each(function(){
          dependants['age'] += $(this).val(); 
        });
        dependants['gender'] = $(v).find('.gender').val();
    });
    var jsonData = JSON.stringify(result);

    console.log(jsonData);

    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        data: {parameters: jsonData}
    });
});
//submit function
}); 
```

# javascript - 如何获取剑道ui网格中下拉列表的值

> ID：14400491
> 
> 赞同：0
> 
> 时间：2013-01-18T13:58:51.757
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我有一个带有下拉列表和复选框的网格。当我选中复选框时，我想获取所选下拉列表的值。我怎么能用 kendoui 做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:06:44.277

这是一种方法：

```
var $checkBox = $("#myCheckbox");
$checkBox.click(function () {
    if ($checkBox.is(':checked')) {
        var $dropDownVal = $('#myDropdownBox').val();
    }
}); 
```

# sql-server-2005 - SQL Server - 查找 MyCol 没有 3x '(' 例如 MyCol = '(1(2(3') 的所有行，但找到 '(1(23'

> ID：14400494
> 
> 赞同：1
> 
> 时间：2013-01-18T13:59:05.423
> 
> 标签：sql-server-2005

我需要找到 MyCol 没有 3 个 '(' 实例的所有行。例如，不要返回 MyCol 为 '(101(2255(3355') 的行，但返回 MyCol 为 '(101(2255') 的行或 '(101(2255|3355' 因为它没有 3 ( 在 MyCol

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:02:40.010

你可以试试这个：

```
DECLARE @t TABLE (myCol VARCHAR(100))
INSERT @t VALUES 
('(101(2255(3355'),
('(101(2255'),
('(101(2255|3355')

SELECT  *
FROM    @t
WHERE   myCol NOT LIKE '%(%(%(%' 
```

# c - 使用 openMP 进行 OpenGL 3D 渲染

> ID：14400497
> 
> 赞同：1
> 
> 时间：2013-01-18T13:59:14.597
> 
> 标签：c, opengl, 3d, openmp

在动画的情况下，在 CG（*OpenGL* ）中使用*OpenMP*渲染 3D 多边形图像是否有效。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:03:47.523

尝试将渲染命令并行排队到 GPU 没有任何好处。渲染已经在 GPU 上并行进行，并行发送命令只会在驱动程序中产生大量开销，驱动程序必须检查命令流中的同步点，并且可能需要重新排序。

多线程 OpenGL 操作也很难正确处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:07:47.877

尝试允许多个 CPU 线程同时访问显卡的 PCIe 总线很可能不会比单个线程更好，因为一次只有一个线程真正能够访问该 IO 总线。*

# asp.net-mvc - 如何识别 Session Ninject 应该绑定什么

> ID：14400500
> 
> 赞同：1
> 
> 时间：2013-01-18T13:59:35.097
> 
> 标签：asp.net-mvc, nhibernate, ninject

首次使用：Asp.NET MVC、NHibernate(FNH)、DI 使用 Ninject。我能够使用一个数据库来完成所有工作，但现在我正在尝试使用两个数据库（例如，DB1 和 DB2）。我有一个 SessionFactory(s) 字典，它以数据库标识符为键。

我不知道如何根据构造函数注入的请求来选择正确的会话。我见过这个[如何将不同的 NHibernate 会话（多数据库）注入到同一个存储库中，使用 Controller 控制 Ninject 的哪些会话](https://stackoverflow.com/questions/8262917)，但我没有让它工作。

```
public ProductController(DB1.Model.IRepository<Product> prodRepo, DB2.Model.IRepository<Account> acctRepo)
{
    [...]
} 
```

NinjectWebCommon.cs 片段

```
private static void RegisterServices(IKernel kernel)
{            
    kernel.Bind<ISession>().ToMethod(ctx => NHibernateSessionModule.Provider.GetCurrentSession()).InRequestScope();             
    kernel.Bind(typeof(DB1.Model.IRepository<>)).To(typeof(NHibernateRepository<>));
    kernel.Bind(typeof(DB2.Model.IRepository<>)).To(typeof(NHibernateRepository<>));
} 
```

NHibernateSessionModule.cs：通过开始/结束请求进行 UOW

```
public class NHibernateSessionModule : IHttpModule
{        
    public static ISessionFactoryProvider Provider = new MultipleSessionFactoryProvider();

    public void Dispose() { }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += BeginRequest;
        context.EndRequest += EndRequest;
    }

    public void BeginRequest(object sender, EventArgs e)
    {
        Provider.BindNew();
    }

    public void EndRequest(object sender, EventArgs e)
    {
        Provider.Unbind();
    }
} 
```

MultipleSessionFactoryProvider.cs：不太确定我在这里做的一切是否正确。

```
public class MultipleSessionFactoryProvider : ISessionFactoryProvider
{
    public Dictionary<string, ISessionFactory> SessionFactories { get; private set; }

    public static Func<Dictionary<string,ISessionFactory>> InitSessionFactories = GetFactories;

    public MultipleSessionFactoryProvider() : this(InitSessionFactories())
    {

    }

    public MultipleSessionFactoryProvider(Dictionary<string, ISessionFactory> factories)
    {
        SessionFactories = factories;            
    }

    public static Dictionary<string, ISessionFactory> GetFactories()
    {
        Dictionary<string, ISessionFactory> ret = new Dictionary<string, ISessionFactory>();
        Dictionary<string, string> connectionStrings = new Dictionary<string, string>();
        connectionStrings.Add(ConfigurationManager.ConnectionStrings["DB1"].Name, ConfigurationManager.ConnectionStrings["DB1"].ConnectionString.ToString());
        connectionStrings.Add(ConfigurationManager.ConnectionStrings["DB2"].Name, ConfigurationManager.ConnectionStrings["DB2"].ConnectionString.ToString());

        foreach (KeyValuePair<string, string> pair in connectionStrings)
        {
            //Better way to do the mapping?
            ISessionFactory factory = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008.ConnectionString(pair.Value))
            .Mappings(cfg => cfg.FluentMappings.Conventions.Setup(x => x.Add(AutoImport.Never()))
            .AddFromAssemblyOf<ProductMap>())
            .BuildConfiguration()
            .CurrentSessionContext<WebSessionContext>().BuildSessionFactory();               

            ret.Add(pair.Key, factory);
        }

        return ret;
    }

    public void BindNew()
    {
        foreach (KeyValuePair<string, ISessionFactory> factory in SessionFactories)
        {
            Bind(OpenSession(factory.Key));
        }            
    }

    public void Bind(ISession session)
    {
        CurrentSessionContext.Bind(session);
    }

    public void Unbind()
    {            
        foreach (KeyValuePair<string, ISessionFactory> factory in SessionFactories)
        {
            if (CurrentSessionContext.HasBind(factory.Value))
            {
                var sess = CurrentSessionContext.Unbind(factory.Value);
                sess.Dispose(); 
            }
        }
    }

    public ISession OpenSession(string factoryId)
    {
        return SessionFactories[factoryId].OpenSession();
    }

    public ISession GetCurrentSession()
    {

        string factoryId = GetIdentifier(); //<--- How to implement this

        return SessionFactories[factoryId].GetCurrentSession();
    }

    public String GetIdentifier()
    {
        return "DB1"; //Hardcoded for example

    } 
```

那么，我该如何实现`GetIdentifier()`或更改我的 Ninject 绑定。我确实看过 Ninject Named binding，但在绑定 Session 时不明白如何使用它。

```
public ProductController([Name("DB1")]DB1.Model.IRepository<Product> prodRepo, [Name("DB2")]DB2.Model.IRepository<Account> acctRepo) 
```

由于这是我第一次使用这些技术，请让我知道我是否在做任何超出实践的事情，或者可能会引起关注；我想继续使用 HttpModule。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:12:13.103

您需要两个会话绑定，每个数据库一个

```
kernel.Bind<ISession>().ToMethod(ctx => GetSessionForDB1()).WhenInjectedInto(typeof(DB1.Model.IRepository<>)).InRequestScope();

kernel.Bind<ISession>().ToMethod(ctx => GetSessionForDB2()).WhenInjectedInto(typeof(DB2.Model.IRepository<>)).InRequestScope(); 
```

# mysql - MySQL 性能调整 - 服务器 128 M

> ID：14400503
> 
> 赞同：-1
> 
> 时间：2013-01-18T13:59:50.773
> 
> 标签：mysql, performance

我有一台 128 M 的服务器，安装了 mysql。你能帮我配置我的服务器并提高服务器性能吗？

*   我使用wordpress 3.5
*   我所有的桌子都是 MyIsam

这是我的第一个配置：

```
[mysqld]

tmp_table_size=4M
query_cache_size=2M
max_heap_table_size = 8M
query_cache_limit=1M
query_cache_size=4M
max_connections=55
skip-locking
max_allowed_packet = 1M
table_cache = 4
sort_buffer_size = 64K
read_buffer_size = 256K
read_rnd_buffer_size = 256K
net_buffer_length = 2K
thread_stack = 128K
table_open_cache = 8
max_binlog_cache_size = 1M
max_seeks_for_key = 2M
max_write_lock_count = 512K
myisam_max_sort_file_size = 1M
innodb_file_per_table=1
query_cache_type = 1
thread_cache_size=2
key_buffer=12M 
thread_concurrency=2
########################
##Configuration Innodb##
##Uncomment the next line to disable Innodb

#skip-innodb

innodb_buffer_pool_size         = 16M
innodb_additional_mem_pool_size = 2M

innodb_log_file_size            = 10M
innodb_log_buffer_size          = 4M

innodb_flush_log_at_trx_commit=1 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:12:31.613

我认为提高服务器性能的最有价值的事情是去买一本好书，阅读它，阅读互联网上的一些文章，然后参加培训课程 - 或者付钱给知道他们在做什么的人帮你。

您还没有提供可以为任何调整练习提供信息的全部信息 - 您还没有说明您想要提高性能的哪个方面。

128M 是**很小**的内存量 - 意味着虚拟服务器 - 此外，没有合理的理由租用虚拟服务器然后只在其上运行 mysql （好吧可能有一些边缘情况 - 但你没有说）这意味着它也在做很多其他的事情（比如网络服务）。

您需要学习如何以正确的方式提出正确的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:20:04.250

**innodb_buffer_pool_size**是迄今为止最大的，但是是最重要的选项，所以除非你想要一个性能非常差的 innodb 数据库，否则我会不理会那个。

你有没有运行数据库，看看它是如何执行的？

如果您对查询进行了微调（运行**解释**以分析它们并在适当的地方添加**索引），128M 可以工作（但仍然不建议）。**

我还没有听说有人通过减少配置中的值来显着提高 mysql 数据库的性能。这通常会导致性能下降。

# c# - 插入时插入语句出错

> ID：14400507
> 
> 赞同：2
> 
> 时间：2013-01-18T14:00:04.303
> 
> 标签：c#

我正在开发 c# 项目并使用 winform。

这里的问题是查询以前工作但现在不工作

这`todaydate`是一个`datetimePicker`设置为短日期格式的列，我的列数据类型是`smalldatetime`我得到的错误是

```
 The conversion of a nvarchar data type to a
     smalldatetime data type resulted in an out-of-range value.
    The statement has been terminated. 
```

如果我有两个日期时间选择器，一个用于日期，第二个用于时间，那么我该如何插入？请你指导我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:02:51.813

`AddWithValue` determines the datatype of the parameter from the value you pass.

In your case you are passing a string and thus the parameter is passed to the database as a string not as a datetime expected by the database

you should change that line

```
cmd.Parameters.AddWithValue("@today", todaydate.Value); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T14:02:53.870

You're currently passing in the *text* value, which means something else is having to then parse it as a date. Don't do that. Given that you've got a `DateTimePicker`, you should just use the `DateTime` value it provides:

```
cmd.Parameters.AddWithValue("@today", todaydate.Value); 
```

... or create the parameter first with a specific type (`SqlDbType.SmallDateTime`), then set the value using `todaydate.Value`. The important point is to avoid the string conversion.

Wherever possible, you should *avoid* converting values into text. Keep them in their "natural" form (e.g. `DateTime` in this case) for as much of the time as possible: on input, parse into the natural form, and if you can avoid ever converting to a string, do so!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:03:56.837

I think your `time7` column in database is `smalldatetime` and you tried to assign it a `string`. I don't suggest it.

Try with [`Add()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx) method like this;

```
command.Parameters.Add("@today", SqlDbType.SmallDatetime);
command.Parameters["@today"].Value = todaydate.Value; 
```

or you can use [`AddWithValue()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx) as also like this;

```
cmd.Parameters.AddWithValue("@today", todaydate.Value); 
```

# linux - 如果不以管道结尾，则合并 csv 行

> ID：14400511
> 
> 赞同：1
> 
> 时间：2013-01-18T14:00:18.210
> 
> 标签：linux, bash, shell, unix

我有一个相当大的 csv 文件，其中每一行都应该以管道 (|) 结尾，如果它没有将下一行合并到其中，直到再次找到管道。这需要使用 shell 脚本来完成。

我得到了一个答案

```
awk '!/|$/{l=l""$0|next|}{print l""$0|l=""}' file 
```

但这给了我错误，因为每行的大小对我来说都很大。我发现我应该使用 perl 来做到这一点，并尝试了以下方法，但它确实产生了预期的结果。

```
perl -pe 's/^\n(|\n)/ /gs' input.csv > output.csv 
```

我的数据看起来像

```
A|1|abc|<xml/>|
|2|def|<xml
>hello world</xml>|
|3|ghi|<xml/>| 
```

并且期望的输出应该是

```
A|1|abc|<xml/>|
|2|def|<xml>hello world</xml>|
|3|ghi|<xml/>| 
```

显然，行大小比这里的样本输入要大。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:12:07.640

```
awk '{printf "%s",$0} /[|][[:space:]]*$/ {print ""}' 
```

打印没有换行符的每一行。如果最后一个非空白字符是管道，则您有一个完整的行，因此打印一个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:10:47.043

这应该有效：

```
perl -lne 'unless(/\|$/){$line=$line.$_}else{print $line." $_";undef $line}' your_file 
```

如果您想进行就地替换，请执行以下操作：

```
perl -i -lne 'unless(/\|$/){$line=$line.$_}else{print $line." $_";undef $line}' your_file 
```

[在此处查看](http://ideone.com/YmHlud)您的评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:06:17.850

这应该很乐意为您处理所有情况，并且不会在任何行长上中断：

```
#!/bin/bash
newLine=0
IFS=
while read -r -n 1 char; do
    if [[ $char =~ ^$ ]]; then
        if [[ $newLine -eq 1 ]]; then
            newLine=0
            echo '|' # add a newline
        fi  
    elif [[ $char =~ . && ( $newLine -eq 1 ) ]]; then
        newLine=0
        echo -n "|$char"
    elif [[ $char =~ [|] ]]; then
        if [[ $newLine -eq 1 ]]; then
            echo -n '|'
        fi  
        newLine=1
    else
        echo -n $char
    fi  
done < file.txt 
```

请注意，在 bash 中手动构建词法分析器通常是一个坏主意。

# xml - 如何按可数字段对 xslt 1.0 中的节点进行分组？

> ID：14400515
> 
> 赞同：0
> 
> 时间：2013-01-18T14:00:36.297
> 
> 标签：xml, xslt, xslt-grouping

我有一个大约这种xml：

```
<charge>
    <price></price>
    <amount></amount>
    <name>
       <KeyValuePair>
         <Key>
            en-us
         </Key>
         <Value>
            Name in english
         </Value>
       </KeyValuePair>
       <KeyValuePair>
         <Key>
            ru-ru
         </Key>
         <Value>
            Name in russian
         </Value>
       </KeyValuePair>
    </name>
</charge> 
```

如何按具有固定语言的名称字段对费用进行分组？例如，使用 xlt 1.0 按英文版名称分组收费？我想存在 for-each-group 的 xslt 2.0 不会有问题。但在 1.0 中，我什至无法创建带有复杂指令的 xsl:key。

```
<charge>
  <price>2</price>
  <amount>3</amount>
  <name>
  <KeyValuePair>
    <key>en-us</key>
    <value>mobile</value>    
  </KeyValuePair>
  </name>
</charge>
<charge>
  <price>4</price>
  <amount>3</amount>
  <name>
  <KeyValuePair>
    <key>en-us</key>
    <value>mobile</value>    
  </KeyValuePair>
  </name>
</charge>
<charge>
  <price>6</price>
  <amount>3</amount>
  <name>
  <KeyValuePair>
    <key>en-us</key>
    <value>computer</value>    
  </KeyValuePair>
  </name>
</charge>
<charge>
  <price>8</price>
  <amount>3</amount>
  <name>
  <KeyValuePair>
    <key>en-us</key>
    <value>computer</value>    
  </KeyValuePair>
  </name>
</charge> 
```

恩-我们

非常近似：我希望我的 xslt 渲染像这样转换它：

```
mobile  6
computer 14 
```

它按名称对费用进行分组并汇总价格。我们有一个获取翻译的复杂规则： 1\. 我们定义一种默认语言 - 如果我们没有在 XML 中指定这种语言，我们为 xslt 采用默认语言（由开发人员手动设置）。2\. 如果节点没有默认语言的翻译，我们在 FallbackLanguage(always en-us) 上检查翻译。3.如果我们之前没有指定翻译，我们设置一个翻译值为[NO NAME]

我的想法是将翻译逻辑封装到单独的模板中：

```
<xsl:variable name="ChargesForDisplay">
    <xsl:for-each select="/i:Invoice/i:Charges/i:Charge[not(@*[1]='TaxCharge')]">
      <chargeset>
        <chargeName>
          <xsl:call-template name="GetLocalizedEntity">
            <xsl:with-param name="ContainerPath" select="./i:Product/i:Name"></xsl:with-param>
          </xsl:call-template>
        </chargeName>
        <charge>
          <xsl:value-of select="current()"/>
        </charge>
      </chargeset>      
    </xsl:for-each>
  </xsl:variable> 
```

所以在那之后我想让变量 ChargesToDisplay 由许多对组成，看起来像

```
<name>SomeName</name>
<Charge>.... Charge content ....<Charge> 
```

并在 ChargesToDisplay 上进行所有分组。GetLocalizedEntity 实现：

```
 <xsl:template name ="GetLocalizedEntity">
    <xsl:param name="ContainerPath"></xsl:param>

    <xsl:choose>
      <xsl:when test="$ContainerPath/a:KeyValueOfstringstring[a:Key=$TemplateLanguage]/a:Value != ''">
        <xsl:value-of select="$ContainerPath/a:KeyValueOfstringstring[a:Key=$TemplateLanguage]/a:Value"/>
      </xsl:when>

      <xsl:when test="$ContainerPath/a:KeyValueOfstringstring[a:Key=$FallBackLanguage]/a:Value != ''">
        <xsl:value-of select="$ContainerPath/a:KeyValueOfstringstring[a:Key=$FallBackLanguage]/a:Value"/>
      </xsl:when>

      <xsl:otherwise>
        <xsl:text>[NO NAME]</xsl:text>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:27:14.637

我相信这应该有效。请试一试。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="text" />

  <xsl:param name="templateLanguage" select="'ru-ru'" />
  <xsl:param name="fallbackLanguage" select="'en-us'" />

  <xsl:key name="itemName" match="chargeSet" use="chargeName"/>

  <xsl:template match="/">
    <!-- Retrieve chargesForDisplay -->
    <xsl:variable name="chargesForDisplay">
      <xsl:apply-templates select="//charge" mode="buildForDisplay" />
    </xsl:variable>

    <root>
      <xsl:apply-templates select="msxsl:node-set($chargesForDisplay)/*" />
    </root>
  </xsl:template>

  <xsl:template match="text()" />

  <xsl:template
   match="chargeSet[generate-id(.)=generate-id(key('itemName',chargeName)[1])]">
    <xsl:variable name="matchingItems" select="key('itemName', chargeName)" />
    <xsl:value-of 
       select="concat(chargeName, ' ', sum($matchingItems/charge/price), '&#xA;')"/>
  </xsl:template>

  <xsl:template match="charge" mode="buildForDisplay">
    <chargeSet>
      <chargeName>
        <xsl:call-template name="GetLocalizedEntry">
          <!-- Pass in all KeyValuePairs with present, non-blank values-->
          <xsl:with-param name="keyValuePairs" 
             select="name/KeyValuePair[normalize-space(value)]" />
        </xsl:call-template>
      </chargeName>
      <xsl:copy-of select="." />
    </chargeSet>
  </xsl:template>

  <xsl:template name="GetLocalizedEntry">
    <xsl:param name="keyValuePairs" />

    <xsl:variable name="templateLanguageMatch" 
      select="$keyValuePairs[key = $templateLanguage]/value" />
    <xsl:variable name="fallbackLanguageMatch" 
      select="$keyValuePairs[key = $fallbackLanguage]/value" />

    <xsl:choose>
      <xsl:when test="$templateLanguageMatch">
        <xsl:value-of select="$templateLanguageMatch"/>
      </xsl:when>
      <xsl:when test="$fallbackLanguageMatch">
        <xsl:value-of select="$fallbackLanguageMatch"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:text>[NO NAME]</xsl:text>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

`<charges>`在此输入 XML 上运行时（在您的示例中添加了一个根节点和一些额外的节点）：

```
<charges>
  <charge>
    <price>2</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>en-us</key>
        <value>mobile</value>
      </KeyValuePair>
    </name>
  </charge>
  <charge>
    <price>4</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>en-us</key>
        <value>mobile</value>
      </KeyValuePair>
    </name>
  </charge>
  <charge>
    <price>6</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>en-us</key>
        <value>computer</value>
      </KeyValuePair>
    </name>
  </charge>
  <charge>
    <price>8</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>en-us</key>
        <value>computer</value>
      </KeyValuePair>
    </name>
  </charge>
  <charge>
    <price>8</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>ja-jp</key>
        <value>計算機&lt;/value>
      </KeyValuePair>
    </name>
  </charge>
  <charge>
    <price>13</price>
    <amount>3</amount>
    <name>
      <KeyValuePair>
        <key>ru-ru</key>
        <value>shelf</value>
      </KeyValuePair>
    </name>
  </charge>
</charges> 
```

产生这个输出：

```
mobile 6
computer 14
[NO NAME] 8
shelf 13 
```

# cakephp - CakePHP + nuSOAP - 将全局函数公开为闭包或使用控制器外部的模型？

> ID：14400522
> 
> 赞同：1
> 
> 时间：2013-01-18T14:00:59.270
> 
> 标签：cakephp, nusoap

我需要在 CakePHP 控制器中实现 SOAP 服务。公开的函数名称需要在全局命名空间中（如“Authenticate”，而不是“SOAPController.Authenticate”）。这迫使我在全局命名空间中实现 Authenticate，因为 nuSOAP 会从函数的名称中推断出在哪里寻找函数。另一方面，在下面的示例中，我无法使用 CakePHP 的 API，因为我无法访问 SOAPController 的`this`. 这就是为什么我认为我应该以某种方式声明某种闭包，它将解析为全局范围内的“身份验证”，同时保持对`this`通过绑定参数的引用。那可能吗？下面是错误的代码：

```
<?php
App::uses('AppController', 'Controller');
App::import('Vendor', 'nusoap', 
        array('file' => 'nusoap'.DS.'lib'.DS.'nusoap.php')
);
/**
 * SOAP Controller
 *
 */

class SOAPController extends AppController {

        public function index()
        {
                $namespace = '';
                $server = new soap_server();
                $server->debug_flag = false;
                $server->configureWSDL("PAI2WSDL", $namespace,
                        "http://localhost/pai2/SOAP/?wsdl");
                $server->wsdl->schemaTargetNamespace = $namespace;

                function Authenticate($login,$haslo){
                        $this->log("TEST"); //won't work!
                        return true;
                }

                $server->register('Authenticate',
                  array('ContractorId' => 'xsd:int', 'Password'=>'xsd:string'), 
                  array('return' => 'xsd:boolean'),
                  $namespace,
                 $namespace . '#Authenticate',
                  'rpc',
                  'encoded'
                );

                $HTTP_RAW_POST_DATA = isset($GLOBALS['HTTP_RAW_POST_DATA'])
                          ? $GLOBALS['HTTP_RAW_POST_DATA'] : '';
                $server->service($HTTP_RAW_POST_DATA);
                $this->autoRender = false;
                exit();
        }
} 
```

# jpa - JPA Criteria 选择其组中具有最大值的所有实例

> ID：14400532
> 
> 赞同：6
> 
> 时间：2013-01-18T14:01:40.793
> 
> 标签：jpa, jpa-2.0, criteria-api, correlated-subquery

有没有办法用 JPA 2 编写与`CriteriaBuilder`以下查询等效的内容？

```
select * from season s1
where end = (
    select max(end)
    from season s2
    where s1.contest_id=s2.contest_id
); 
```

在 JPQL 中，这个查询是：

```
Select s1 from Season s1 
where s1.end = (
    select max(s2.end)
    from Season s2
    where s1.contest=s2.contest
) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T21:00:37.050

这应该`contest`可以作为基本整数属性或`ManyToOne`指向另一个非基本实体的属性。

```
EntityManger em;      //to be injected or constructed

CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Season> cq = cb.createQuery(Season.class);
Subquery<Date> sq = cq.subquery(Date.class);
Root<Season> s1 = cq.from(Season.class);
Root<Season> s2 = sq.from(Season.class);
sq.select(cb.greatest(s2.get(Season_.end)));
sq.where(cb.equal(s2.get(Season_.contest), s1.get(Season_.contest)));
cq.where(cb.equal(s1.get(Season_.end), sq));
List<Season> result = em.createQuery(cq).getResultList(); 
```

# java - Push notifications to various devices through a common code

> ID：14400533
> 
> 赞同：3
> 
> 时间：2013-01-18T14:01:52.610
> 
> 标签：java, ios, jms, apple-push-notifications, google-cloud-messaging

I have a requirement which is that I have to push the messages to various users who are using android or iphone devices.I know the individual process to send the push notification to android or iphone application.

Now my work is that I need to do the server side implementation in java so that messages can be sent to android and iphone devices.The number of users using the andrioid and iphone devices is large say 10000 people.

So to implement this requirement What should be the approach. What should be my approach to send the multicast messages to android and iphone devices? I am thinking of using the threads say there are 10000 users and I have made 10 threads so each thread out of 10 thread will handle push notifications for 1000(=10000/10) users.

Any other suugestion..

Should I use JMS and if yes then what should be the approach using JMS.

Please suggest me its very much urgent.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:43:38.510

我目前正在做的是：

1.  接收想要发送推送通知的输入
2.  将其发送到 ActiveMQ 队列
3.  侦听器接收到该消息，然后让另一个类构建要发送给用户的消息
4.  然后根据步骤 3 将新消息发送到另一个 ActiveMQ 队列
5.  侦听器收到该消息，然后根据设备类型让另一个类向用户设备发出消息

我走这条路线的原因是步骤 1、3、5 可能会`concurrency`在`applicationContext.xml`.

![示例图片](../Images/169b2b52df2719c80180658d6f5d10e1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:10:40.930

如果您有预算并且紧急结帐[http://urbanairship.com/](http://urbanairship.com/)

我用过它，它很棒。

# android - Android - what are some common techniques to make phone apps not appear stretched on tablets

> ID：14400541
> 
> 赞同：0
> 
> 时间：2013-01-18T14:02:43.877
> 
> 标签：android, android-layout

I have a few Android apps. They look on on the phones, but when I look at them on a tablet, they look very stretched (in width). Here is an example screen shot: ![enter image description here](../Images/285ab23379a6608ae38337a1aa278b56.png)

Is there a particular design setting I can use to make the content and buttons not appear so stretched out when viewed on a tablet? Thanks!

# php - Email header not working PHP

> ID：14400547
> 
> 赞同：1
> 
> 时间：2013-01-18T14:03:08.277
> 
> 标签：php, email, header, bluehost

I'm using BlueHost and I can't seem to get my email form to work. This is the PHP:

```
$to = "test@email.com";
$subject = "test";
$message = "test message";
$from =  $_POST['cf_email'];
$headers = "From: $from";
mail($to,$subject,$message,$headers);
echo $headers; 
```

This doesn't seem to send the email. However, if I add ANY string in front of the email, then it works. e.g.:

```
$from =  "zz".$_POST['cf_email']; 
```

Can anyone tell me what I'm doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:23:48.403

您不能在“发件人”标题中使用任何个人电子邮件 ($_POST['cf_email'])。您还必须添加“回复”。

请检查下面的线程以获取更多信息。

[php邮件“发件人”标头的问题](https://stackoverflow.com/questions/2014081/problem-with-php-mail-from-header)

# backbone.js - How to accept backbone route which starts with #someNumber

> ID：14400548
> 
> 赞同：1
> 
> 时间：2013-01-18T14:03:08.737
> 
> 标签：backbone.js

I wanted to allow any routes which start with # and any number

Example :

```
http://127.0.0.1/mypage/#435fsdfd 
```

This should basically execute renderMyPage.

Tried below things but didn't work

```
routes : { 

    "" : "renderMyPage",
    "#:/" : "renderMyPage"

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:48:28.700

一些东西：

如果您的应用程序不是从您的域的根 url / 提供的，您需要告诉 History 根的真正位置

```
Backbone.history.start({root: "/mypage/"}); 
```

您不需要在路由中定义哈希，如果您只想匹配哈希上的“某物”，这就足够了：

```
routes : { 
  "" : "renderMyPage",
  ":value" : "renderMyPage"
},

renderMyPage: function (value) {

} 
```

在最新的骨干网（0.9.10）中，您可以使用可选参数，这样您就可以在一条路线中完成所有事情

```
routes : { 
  "(:value)" : "renderMyPage"
}, 
```

# c++ - simple usage of c++ string length() function not compiling

> ID：14400553
> 
> 赞同：-4
> 
> 时间：2013-01-18T14:03:25.243
> 
> 标签：c++, eclipse, string

I'm doing a very basic usage of std::string in c++ in Eclipse, and can't figure out why it's not working.

The sample code:

```
std::string str = "hello";
cout << str << ":" str.length(); 
```

The code is not compiling with the following error: `Method 'length' could not be resolved`

Why?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:04:30.163

你错过了一个'<<'

`cout << str << ":" << str.length();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:00:28.467

确保 #include 在文件顶部。但是，我认为如果你不这样做，你会收到一个关于无法解析 std::string 的错误。

# cordova - 从 HTML 表单字段中提取的 Javascript 函数值

> ID：14400554
> 
> 赞同：0
> 
> 时间：2013-01-18T14:03:34.360
> 
> 标签：cordova, forms, javascript

我正在尝试创建一个 HTML 系统，它通过 phonegap 创建一个 .txt 表单。

我的 HTML 元素就是这样

**脚本**

```
function Savenote() {
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("DCC.txt", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwriteend = function(evt) {
        console.log(" ' '");
        writer.truncate(11);  
        writer.onwriteend = function(evt) {
            console.log(" ' '");
            writer.seek(0);
            writer.write("Henry Aspden");
            writer.onwriteend = function(evt){
                console.log(" ' '");
            }
        };
    };
    writer.write("some sample text");
}

function fail(error) {
    console.log(error.code);
}
}
</script> 
```

**我的身体/形式**

```
 <form>
<input type="text" style="width:100%" name="filename" placeholder="Enter File Name">
<textarea rows="10" style="width:100%" name="notes" placeholder="Enter Your Text Notes Here"></textarea>
</form>
<a href="#" onClick="Savenote()"><h1>SAVE</h1></a> 
```

**那我的问题是什么？** 我需要从表单字段中获取函数中的值......如果可能的话，这就是

它说的地方

```
fileSystem.root.getFile("DCC.txt", {create: true, exclusive: false}, gotFileEntry, fail);
} 
```

“ **DCC.txt”**部分必须替换为**“文件名”**字段（即“DCC.txt”仅用于演示目的）。此外，扩展名 .txt 是一个常量，所以如果有意义的话，它应该是 'filename'.txt 吗？

它说的地方

```
writer.write("Henry Aspden"); 
```

“ **Henry Aspden”**部分必须替换为**“notes”**字段（即“Henry Aspden”仅用于演示目的）

**编辑编号 1** 更改为

```
 function gotFS(fileSystem) {
    fileSystem.root.getFile("var filename = document.getElementById("filename");", {create: true, exclusive: false}, gotFileEntry, fail);
} 
```

和

```
<input id="filename" type="text" style="width:100%" name="filename" placeholder="Enter File Name"> 
```

我认为这里会导致语法错误......我怎样才能将这个新变量放在这个现有函数中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:22:07.187

给输入元素一个id：

```
<input id="filename" 
    type="text" style="width:100%" name="filename" placeholder="Enter File Name"> 
```

然后抓取元素并将其保存为 JavaScript 变量

```
var filename = document.getElementById("filename").value; 
```

把它放在你的函数调用之前的某个地方，然后将变量传递给你的函数：

```
function gotFS(fileSystem) {
    var filename = document.getElementById("filename").value; //gets file name

    fileSystem.root.getFile( //call function 
        filename, {create: true, exclusive: false}, gotFileEntry, fail
    );
} 
```

# python - HOGDescriptor 带有视频以识别对象

> ID：14400560
> 
> 赞同：4
> 
> 时间：2013-01-18T14:03:54.013
> 
> 标签：python, opencv, object-detection

不幸的是，我既是 python 又是 openCV 初学者，所以如果这个问题很愚蠢，请原谅我。

我正在尝试使用 a`cv2.HOGDescriptor`来识别视频中的对象。我关心逐帧识别（即没有跟踪左右）。

* * *

这是我正在做的事情：

1.  我通过使用阅读了视频（当前为 a `.mpg`）

    ```
    capture = cv.CreateFileCapture(video_path) #some path in which I have my video
    #capturing frames
    frame = cv.QueryFrame(capture) #returns cv2.cv.iplimage 
    ```

2.  为了最终在框架上使用检测器（我会使用

    ```
    found, w = hog.detectMultiScale(frame, winStride, padding, scale) 
    ```

    ) 我认为我需要`frame`从 我所做的转换`cv2.cv.iplimage`为`numpy.ndarray`

    ```
    tmp = cv.CreateImage(cv.GetSize(frame),8,3)
    cv.CvtColor(frame,tmp,cv.CV_BGR2RGB)

    ararr = np.asarray(cv.GetMat(tmp)). 
    ```

现在我有以下错误：

```
 found, w = hog.detectMultiScale(ararr, winStride, padding, scale)
 TypeError: a float is required 
```

在哪里

```
 winStride=(8,8)
    padding=(32,32)
    scale=1.05 
```

我真的不明白哪个元素是这里真正的问题。即哪个数字应该是浮点数？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:55:49.400

无需自己执行额外的转换，该问题与 Python 的新旧 OpenCV 绑定的混合有关。关于的另一个问题`hog.detectMultiScale`仅仅是由于不正确的参数排序。

第二个问题可以通过检查直接看出`help(cv2.HOGDescriptor().detectMultiScale)`：

```
detectMultiScale(img[, hitThreshold[, winStride[, padding[, 
           scale[, finalThreshold[, useMeanshiftGrouping]]]]]]) 
```

如您所见，每个参数都是可选的，但第一个参数（图像）。排序也很重要，因为您有效地使用`winStride`了第一个，而预计它是第二个，依此类推。您可以使用命名参数来传递它。（所有这些都已在较早的答案中观察到。）

另一个问题是代码混合，这是您应该考虑使用的示例代码：

```
import sys
import cv2

hog = cv2.HOGDescriptor()
hog.setSVMDetector(cv2.HOGDescriptor_getDefaultPeopleDetector())
hogParams = {'winStride': (8, 8), 'padding': (32, 32), 'scale': 1.05}

video = cv2.VideoCapture(sys.argv[1])
while True:
    ret, frame = video.read()
    if not ret:
        break

    result = hog.detectMultiScale(frame, **hogParams)
    print result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:20:05.607

[HOGDescriptor::detectMultiScale](http://docs.opencv.org/trunk/modules/ocl/doc/feature_detection_and_description.html#void%20ocl%3a%3aHOGDescriptor%3a%3adetectMultiScale%28const%20oclMat&%20img,%20vector%3CRect%3E&%20found_locations,%20double%20hit_threshold,%20Size%20win_stride,%20Size%20padding,%20double%20scale0,%20int%20group_threshold%29)的 C++ 版本的文档在参数之前显示了一个`hit_threshold`参数（类型为`double`）`win_stride`。因此，您似乎缺少该函数的参数。要接受 的默认参数`win_stride`，您应该将问题中使用的附加参数作为关键字传递。

# ektron - Ektron 中的 API 级别缓存

> ID：14400569
> 
> 赞同：3
> 
> 时间：2013-01-18T14:04:52.063
> 
> 标签：ektron

我在 Ektron 8.6 中工作。

有谁知道在 ektron 中如何管理 API 级别的缓存？是否有任何配置设置来管理 API 级别缓存？（web.config 或任何其他配置文件）。API 级别缓存是否默认启用？与以前的版本（Ektron 8.5）有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:55:08.663

从版本 8.5 开始，Ektron 引入了位于其框架 API 下方的缓存层。它是可配置的（启用、禁用、设置 ttl 等）和可扩展的（基于提供程序，因此您可以为各种缓存服务器（如 Reddis 等）实现提供程序）。

默认情况下未启用。默认情况下，每个 API 调用最终都会命中数据库（或搜索索引）。由于这是 8.5+ 版本中的新功能，旧版本的 Ektron 没有任何类型的内置 API 级别缓存，但显然可以利用您想要自己创建的任何标准 .NET 缓存。

这是一个技术网络研讨会，详细介绍了 v8.5+ 中的 API 级别缓存。与您的问题相关的文章从 26:25 开始，但如果您还没有看过，我会看整件事。

[http://www.ektron.com/Webinars/Details/Optimize-Site-Performance-through-Caching/](http://www.ektron.com/Webinars/Details/Optimize-Site-Performance-through-Caching/)

默认的 Ektron 缓存提供程序使用内存/进程内应用程序范围存储。一旦你使用它，你可能想看看这个开源项目，它为 Redis 实现了一个 3rd 方缓存提供程序。您可以按原样使用它，或者将其用作您自己的缓存提供程序的存根用于另一个系统，或者只使用 OOB 进程内缓存提供程序。

[https://github.com/ektron/EktronContrib/blob/master/README.md](https://github.com/ektron/EktronContrib/blob/master/README.md)

账单

# html - css 100% height body 不覆盖整个文档

> ID：14400573
> 
> 赞同：0
> 
> 时间：2013-01-18T14:05:10.693
> 
> 标签：html, css

我试图创建一个中间有一层的 HTML 文档，如下所示：

```
<body>
 <div id="background">
  LONG TEXT HERE
 </div>
</body> 
```

我设置

```
html, body  {
    margin: 0;
    height: 100%;
    min-height: 100%;
    background-color: #color1;
} 
```

和

```
#background  {
    width: 80%;
    height: 100%;
    position: absolute;
    margin-left: 10%;
    display: block;
    margin-right: 10%;
    background-color: #color2;
    top: 0px; 
    bottom: 0px;
} 
```

但不知何故，如果文本超过显示的高度并且当我向下滚动时没有背景。我已经在 FireBug 中检查过，看起来整个文档是否只有初始窗口的大小。我需要使它达到 100% 的高度。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:08:55.500

如果文本比页面长，则需要`overflow`在 CSS 中设置属性 - 否则元素将扩展以适应其内容。

例如：

```
overflow: hidden; 
```

尽管这会使某些文本不可见，但您可能`auto`不希望`hidden`根据您正在做的事情来使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:11:24.360

移除高度：100%；和位置：绝对；

它会起作用的。像下面

```
#background  {
  width: 80%;
  margin-left: 10%;
  display: block;
  margin-right: 10%;
  background-color: #093;
  top: 0; 
  bottom: 0;
} 
```

# android - ListView.getChildCount() 和 ListView.getLastVisiblePosition() 小于实际值

> ID：14400575
> 
> 赞同：0
> 
> 时间：2013-01-18T14:05:14.010
> 
> 标签：android, listview

我正在平板电脑上纵向测试我的应用程序。我有一个总共有 50 多行的 ListView，它在屏幕上一次显示至少 20 行。

但是由于某种原因，当我使用方法时`listView.getChildCount`，它会返回`9`并`listView.getLastVisiblePosition()`返回`8`。这些值肯定太小了 - 请记住，我一次看到至少 20 行。我该如何解决这个问题？

# html - 无法使用 PIE.htc 在 IE8 中应用边框半径

> ID：14400576
> 
> 赞同：0
> 
> 时间：2013-01-18T14:05:18.960
> 
> 标签：html, css, css3pie

我的代码：

```
-moz-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
behavior: url(./PIE-1.0.0/PIE.htc); 
```

此代码位于`css`不在 html 标记中的文件中。[我将压缩包css3pie](http://css3pie.com/)附带的所有文件都包含在我的 css 文件所在的子文件夹中。

可能是因为我没有使用css3吗？如果我正在使用 ccs3，我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:30:07.733

请检查您的 pie.htc 路径。路径必须相对于 html 页面，而不是相对于 css 文件。这是链接 htc 文件时经常犯的错误。

# c# - MsAccess 数据库

> ID：14400582
> 
> 赞同：1
> 
> 时间：2013-01-18T14:05:37.037
> 
> 标签：c#, string, connection-string, oledb, slash

我试图让我`connection string`连接到我的 Access 数据库，但我遇到了这个问题。

当我将其写为连接字符串时：

```
string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\prjThesis\STUD_RECORD.accdb"; 
```

反斜杠被标记为红色，并且一条错误消息指出`Unrecognized escape sequence`指向斜杠。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:07:21.853

Use @ before the string or double slashes.

```
string cs = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\prjThesis\STUD_RECORD.accdb"; 
```

or

```
string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\prjThesis\\STUD_RECORD.accdb"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:08:00.730

Try with [*`verbtaim string literals`*](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx) like this;

```
string cs = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\prjThesis\STUD_RECORD.accdb"; 
```

Or you can use double slash (`\\`) in your code without verbtaim literal;

```
string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\prjThesis\\STUD_RECORD.accdb"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:08:39.197

Use `\\` (they mean `\` in an ordinary string literal):

```
string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\prjThesis\\STUD_RECORD.accdb" 
```

...or verbatim string literals:

```
string cs = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\prjThesis\STUD_RECORD.accdb" 
```

# google-app-engine - 在应用引擎内存缓存上实现 get_multi

> ID：14400586
> 
> 赞同：2
> 
> 时间：2013-01-18T14:05:50.977
> 
> 标签：google-app-engine, memcached, python-memcached

我想知道是否有人可以提供帮助。我在[这里使用这篇文章中概述的 blobcache 模块](https://stackoverflow.com/questions/5081502/memcache-1-mb-limit-in-google-app-engine)

这工作正常，但我希望通过使用[get_multi()](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get_multi) 键函数来加快从内存缓存中检索的速度，但我当前的代码在使用 get_multi 时找不到键

我当前的 get def 看起来像这样

```
def get(key):
  chunk_keys = memcache.get(key)
  if chunk_keys is None:
    return None
  chunk_keys= ",".join(chunk_keys)
  str(chunk_keys)
  chunk = memcache.get_multi(chunk_keys)
  if chunk is None:
  return None
try:
  return chunk
except Exception:
  return None 
```

我对文档的理解是，您只需要通过一串键来获取 get_multi。

然而，他目前没有返回任何东西。

有人可以指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:13:26.560

将字符串（键）**列表**传递给它，而不是**其中包含逗号的单个字符串**。

```
get_multi(keys, key_prefix='', namespace=None, for_cas=False) 
```

> **keys** = 要查找的键列表。Key 可以是字符串或 (hash_value, string) 的元组，其中通常用于分片到 memcache 实例的 hash_value 被忽略，因为 Google App Engine 透明地处理分片。

[多获取文档](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get_multi)

# parsing - 更好的参数错误处理；和更好的参数解析/处理？

> ID：14400587
> 
> 赞同：1
> 
> 时间：2013-01-18T14:05:54.143
> 
> 标签：parsing, powershell, parameters, arguments, powershell-2.0

我有一个这样的脚本：

```
param(
  [Alias('a')]
  [string]$aval,
  [Alias('b')]
  [switch]$bval,
  [Alias('c')]
  [string]$cval
)

if($aval.length -gt 1)
{
  Do-Something
}
elseif($bval)
{
  Do-Something-Else
}
elseif($cval.length -gt 1)
{
  Do-Another-Thing
}
else
{
  Do-This
} 
```

如果有人这样调用我的脚本，则会显示一个丑陋的错误，说它缺少参数“aval/bval/cval”的参数：

```
PS C:\> .\MyScript.ps1 -a
C:\MyScript.ps1 : Missing an argument for parameter 'aval'. Specify a
parameter of type 'System.String' and try again.
At line:1 char:18
+ .\MyScript.ps1 -n <<<<
    + CategoryInfo          : InvalidArgument: (:) [MyScript.ps1],    ParameterBindingException
    + FullyQualifiedErrorId : MissingArgument,MyScript.ps1 
```

有没有办法让更干净的，可能是一行错误出现？此外，有没有比 elseif 语句列表更好的方法来处理参数（我的实际脚本有大约 10 个参数）？

该脚本有时也会传递带有参数的参数：

```
EX:
PS C:\> .\MyScript.ps1 -b ServerName 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:36:24.460

您可以在这里查看一些内容。首先，如果参数永远不会有关联的值，而您只想知道是否使用该参数调用了脚本，那么请使用 [switch] 参数而不是字符串。

这是一个使用开关参数的非常简单的示例：

```
param(
        [switch]$a
     )

if($a){
    'Switch was present'
}else{
    'No switch present'
} 
```

将其保存为脚本并使用和不使用 -a 参数运行它。

如果您有时会出现参数并传入一些值但有时没有值，则在定义参数时为参数提供默认值：

```
[Alias('a')]
[string]$aval = '', 
```

然后在您的逻辑中，如果传入了某些内容，则字符串的长度将为 gt 1。

至于你拥有的 if-then 结构，有很多选项可以处理这种逻辑。根据您分享的少量信息，我怀疑使用 switch 结构将是最好的计划：

```
Get-Help about_Switch 
```

# c# - 使用 NHibernate 的 DateDiff 的问题

> ID：14400588
> 
> 赞同：0
> 
> 时间：2013-01-18T14:06:04.807
> 
> 标签：c#, nhibernate, hql

我在代码中使用以下 HQL

```
string sPastDueForCustomer = @"select 
    inv.fInvoiceDate as fInvoiceDate,
    cust.fName as fCustomerName,
    inv.fInvoiceNumberDisplay as fInvoiceNumberDisplay,
    inv.fBalance as fBalance,   
    inv.fDueDate as fDueDate,
    datediff(day, :GenerateDate, inv.fDueDate) as fDaysPastDue
    FROM tARInvoice as inv INNER JOIN inv.Customer as cust
    Where inv.fDueDate < :GenerateDate - " 
    + 
    ARApplicationSetup[0].fGracePeriod 
    + 
    @"  
    And inv.fInvoiceType= 'Manual'  
    And inv.fCustomerID = :CustomerID  
    And inv.fBalance > 0  
    And inv.fIsPosted = 1  
    And inv.fIsVoided = 0";                

    //get the result of query and return the object of PaymentInvoiceDetails
    IList<tARInvoice> PastDueForCustomer = 
        Session.CreateQuery(sPastDueForCustomer)
               .SetGuid("CustomerID", CustomerId)
               .SetDateTime("GenerateDate", GenerateDate)
               .SetResultTransformer(Transformers.AliasToBean<tARInvoice())
               .List<tARInvoice>(); 
```

当我运行它时，我收到以下错误：

```
No data type for node: 
MethodNode (datediff(exprList day ? (tarinvoice0_.fDueDate tarinvoice0_.fARInvoiceID fDueDate)))
[select
    inv.fInvoiceDate as fInvoiceDate,
    cust.fName as fCustomerName,
    inv.fInvoiceNumberDisplay as fInvoiceNumberDisplay,
    inv.fBalance as fBalance,   
    inv.fDueDate as fDueDate
    ,datediff(day, :GenerateDate,inv.fDueDate) as fDaysPastDue 
    FROM tARInvoice as inv INNER JOIN inv.Customer as cust
    Where inv.fDueDate < :GenerateDate - 15  
    And inv.fInvoiceType= 'Manual'  
    And inv.fCustomerID = :CustomerID  
    And inv.fBalance > 0  
    And inv.fIsPosted = 1  
    And inv.fIsVoided = 0] 
```

的类型`fDaysPastDue`是`int`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:10:06.937

在这里，

```
WHERE inv.fDueDate < :GenerateDate - " + ARApplicationSetup[0].fGracePeriod + @" ... 
```

您正在`int`从 a 中减去 a `DateTime`，这变成了这个，

```
WHERE inv.fDueDate < :GenerateDate - 15 
```

引发错误，因为该操作涉及不同的类型。

确保您使用`GenerateDate`变量中的正确类型，并在查询中正确设置它，

```
Session.CreateQuery(sPastDueForCustomer)
       .SetGuid("CustomerID", CustomerId)
       .SetInt32("GenerateDate", GenerateDate.Days) 
       // instead of: ".SetDateTime(GenerateDate)"
       ... 
```

# java - 有没有办法在字符串中切换出一个字母？

> ID：14400590
> 
> 赞同：0
> 
> 时间：2013-01-18T14:06:12.090
> 
> 标签：java, string, indexing

我需要一种将特定索引中的字母与另一个字母切换的方法。有类似的吗？

像这样：

```
String word = "test";
String letter = "e";
String secretWord = "????"; 
```

查找字母 e 的索引，然后查找 e 是否在 word 中。然后切换一个“？” 基于测试中的 e 的索引。

所以它`?e??`适用于secretWord。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:13:31.787

您可以使用正则表达式来搜索和替换 ISN'T 的任何字符`letter`：

```
String word = "test";
String secretWord = word.replaceAll("(?i)[^e]", "?"); 
```

您还可以添加更多您不想替换到正则表达式的字母（这将替换每个非元音）：

```
String secretWord = word.replaceAll("(?i)[^aeiouy]", "?"); 
```

正则表达式的解释：

*   `(?i)`意思是“不区分大小写”。
*   `^`意思是“不”。
*   `aeiouy`是我们不想匹配的字符

这是正则表达式替换的演示（仅使用`e`）：

[**演示**](http://regex101.com/r/qX9rR3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:29:03.990

```
 string word = "test";
        char letter = 'e';
        string secretWord = "????";
        int index = word.indexOf(letter);
        if(index >= 0)
        {
         secretWord = secretWord.substring(0,index)+letter+secretWord.substring(index + 1);
         System.out.println(secretWord);
        } 
```

此代码适用于 JAVA ...... 试试看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:20:51.883

如果您使用的是 C#，那么请尝试下面的编码。它会对您有所帮助

```
 //Declare
        string word = "test";
        char letter = 'e';
        string secretWord = "????";
        if (word.IndexOf("e") != -1)//Find the Char is found or NOT
        {
            int index = word.IndexOf(letter); //Index of the Char
            Console.WriteLine("Index of the Word E :" + word.IndexOf("e").ToString());
            StringBuilder sb = new StringBuilder(secretWord);
            sb[index] = letter; // Replacing the Char
            secretWord = sb.ToString();
            Console.WriteLine(secretWord);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:36:28.177

我会以不同的方式看待这项任务。我们有一个秘密 ( `"test"`) 和一种显示它的方式，结果将是`"????"`或者`"?e??"`如果提供了这封信`e`。的序列`?`本身不是字符串，而是按需生成。然后我们不必替换 String 中的某些内容（顺便说一句，我们不能这样做，因为字符串是不可变的）。这是用代码编写的想法：

```
public class SecretWord {

    private String secret;

    public SecretWord(String secret) {
        this.secret = secret;
    }

    public String display(char c) {
        if (secret == null) {
            return "";
        }
        StringBuilder displayBuilder = new StringBuilder();
        for (char secretChar : secret.toCharArray()) {
            displayBuilder.append(secretChar == c ? c : '?');
        }
        return displayBuilder.toString();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:33:54.040

我还没有足够的代表在评论中回复，但您可以通过添加一个变量来扩展 h2ooooo 的帖子以使其灵活，也：

```
String letter = "e";
String secretWord = word.replaceAll("(?i)[^" + letter + "]", "?"); 
```

+1，h2ooooo - 整洁的答案！

韦斯蒂

# migration - 迁移后Redmine修订关键字不起作用

> ID：14400591
> 
> 赞同：0
> 
> 时间：2013-01-18T14:06:16.263
> 
> 标签：migration, redmine, revision

几天前，我们进行了从 Redmine 0.9.3 到 2.2.0 的长期迁移。一切都完美迁移，似乎马上就可以工作了。

但是我们只是发现了一个不再起作用的功能。Redmine 似乎不再听存储库关键字。它们仍然可以在 Administration -> Repositories 下找到，并且仍然可以浏览存储库并查看更改。但是 Redmine 将不再将修订与 redmine id 相关联。

我已经尝试删除关键字，保存更改并读取它们。没有成功。我告诉 Redmine 使用命令 "rails runner "Repository.fetch_changesets" -e production" 重新读取所有变更集

但似乎没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:54:05.973

您是否更改了颠覆系统或提交编号？

`Link to a changeset with a *non-numeric* hash: commit:c6f4d0fd (displays c6f4d0fd).`

或者，这可能是 Redmine [http://www.redmine.org/issues/13000中的错误](http://www.redmine.org/issues/13000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T09:57:44.713

当您更改参考关键字时，它们仅适用于新提交。如果您希望它们适用于旧提交，您必须删除您的 redmineproject 中的存储库并在那里读取 ir。在下一次获取变更集时（如果您在项目中打开存储库选项卡自动激活了获取变更集），关键字将用于所有提交，包括旧的提交。

例如，您有一个以“#1234”作为提交消息的提交，并且默认关键字（参考，参考问题 [据我记得]）打勾的 1234 不会连接到该提交。现在将关键字更改为 *（单星表示每个问题编号都绑定没有关键字）它仍然没有连接。现在删除、读取和重新获取变更集时，问题 1234 将连接到提交

# java - Java OracleDB 连接第一次耗时太长

> ID：14400595
> 
> 赞同：13
> 
> 时间：2013-01-18T14:06:41.777
> 
> 标签：java, oracle11g, redhat

我在连接到 Oracle 数据库时遇到问题，需要很长时间（大约 5 分钟）并且它会发送下面显示的异常。大多数情况下，在第一个错误之后，同一进程的下一个连接正常工作。

它是一台 RHEL 6 机器，具有两个不同的网络接口和 IP 地址。

注意：我没有使用像这样的 url：“jdbc:oracle:thin:@xxxx:yyy，它实际上是：”jdbc:oracle:thin:@xxxx:yyyy:zzz。SID 没有丢失，对此感到抱歉:(

这大致是我隔离的内容：

> bin/java -classpath ojdbc6_g.jar -Djavax.net.debug=all -Djava.util.logging.config.file=logging.properties

```
Class.forName ("oracle.jdbc.OracleDriver")
DriverManager.getConnection("jdbc:oracle:thin:@xxxx:yyyy", "aaaa", "bbbb") 
```

错误堆栈跟踪：

```
java.sql.SQLRecoverableException: IO Error: Connection reset
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:533)
        at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:557)
        at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:233)
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:29)
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:556)
        at java.sql.DriverManager.getConnection(DriverManager.java:579)
        at java.sql.DriverManager.getConnection(DriverManager.java:221)
        at test.jdbc.Main(Test.java:120)
Caused by: java.net.SocketException: Connection reset
        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)
        at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
        at oracle.net.ns.DataPacket.send(DataPacket.java:248)
        at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:227)
        at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:309)
        at oracle.net.ns.NetInputStream.read(NetInputStream.java:257)
        at oracle.net.ns.NetInputStream.read(NetInputStream.java:182)
        at oracle.net.ns.NetInputStream.read(NetInputStream.java:99)
        at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:121)
        at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:77)
        at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1173)
        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:309)
        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:200)
        at oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:404)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:430)
        ... 35 more 
```

这里有一个非常详细的日志：[http](http://pastebin.com/MMFKU26z) : *//pastebin.com/MMFKU26z GET STUCK HERE*代表 5 分钟的等待时间

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-07-09T16:39:07.000

您可能遇到了 Oracle JDBC 驱动程序的问题，该驱动程序在 Linux 上默认使用阻塞随机数生成器。尝试使用以下参数运行 Java：

```
-Djava.security.egd=file:/dev/./urandom 
```

或者，您可以启动一个守护程序来提供随机数生成器。Linux“rngd”守护进程就是一个例子。

资料来源：

*   [http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty/](http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty/)
*   [http://bugs.java.com/view_bug.do;?bug_id=6521844](http://bugs.java.com/view_bug.do;?bug_id=6521844)
*   [https://bugs.openjdk.java.net/browse/JDK-6202721](https://bugs.openjdk.java.net/browse/JDK-6202721)
*   [https://community.oracle.com/message/3701989](https://community.oracle.com/message/3701989)
*   [Oracle JDBC 间歇性连接问题](https://stackoverflow.com/questions/2327220/oracle-jdbc-intermittent-connection-issue)
*   [Oracle getConnection 慢](https://stackoverflow.com/questions/5503063/oracle-getconnection-slow)
*   [如何使用 Java SecureRandom 解决性能问题？](https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:19:49.067

查看您的连接字符串，似乎缺少 Oracle 服务名称或 SID。连接字符串应如下所示`"jdbc:oracle:thin:@xxxx:yyyy/zzz"`，其中`zzz`SID 在哪里。您可能还想看看[这个问题](https://stackoverflow.com/questions/4832056/java-jdbc-how-to-connect-to-oracle-using-service-name-instead-of-sid)的答案。

# javascript - 打印 Dygraph 图表

> ID：14400599
> 
> 赞同：1
> 
> 时间：2013-01-18T14:06:49.117
> 
> 标签：javascript, dygraphs

我正在尝试打印一个包含 dygraph 的 Div，如下所示：

javascript:

```
<script type="text/javascript">
            function PrintElem(elem)
            {               
                Popup(document.getElementById(elem).innerHTML);
            }

            function Popup(data) 
            {
                var mywindow = window.open('', 'my div', 'height=400,width=800');
                mywindow.document.write('<html><head><title>my div</title>');                
                mywindow.document.write('</head><body >');
                console.log(data);
                mywindow.document.write(data);
                mywindow.document.write('</body></html>');

                mywindow.print();
                mywindow.close();

                return true;
            }    
        </script> 
```

在 HTML 中：

```
<input type="button" value="Print Div" onclick="PrintElem('divName')" /> 
```

**问题陈述：**

dygraph（“divName”）包含一个以 HTML 格式绘制实际图表的脚本。尝试打印 innerHTML 时，打印功能无法满足此要求。

还有另一种方法可以做到这一点吗？谢谢！

# java - 错误 java.lang.String 无法转换为 metier.Motif

> ID：14400600
> 
> 赞同：-2
> 
> 时间：2013-01-18T14:06:55.593
> 
> 标签：java, jcombobox

我工作`JComboBox`es 并且`DefaultComboboxModel`我用我的数据库填充。现在我想`Enregistrement`在我的数据库中保存一个。但我收到此错误消息

```
java.lang.String cannot be cast to metier.Motif 
```

这是我的班级主题：

```
package metier;

public class Motif  { 

private Integer id;
private String libelle;
private Boolean recetteDepense;
Enregistrement enregistrements[];

public Motif() {
    this.id = null;
    this.libelle = "";
    this.recetteDepense = null;
}

public Motif(Integer id, String libelle, Boolean recetteDepense, Enregistrement[] enregistrements) {
    this.id = id;
    this.libelle = libelle;
    this.recetteDepense = recetteDepense;
    this.enregistrements = enregistrements;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getLibelle() {
    return libelle;
}

public void setLibelle(String libelle) {
    this.libelle = libelle;
}

public Boolean getRecetteDepense() {
    return recetteDepense;
}

public void setRecetteDepense(Boolean recetteDepense) {
    this.recetteDepense = recetteDepense;
}

public Enregistrement[] getEnregistrement() {
    return enregistrements;
}

public void setEnregistrement(Enregistrement[] enregistrements) {
    this.enregistrements = enregistrements;
}

@Override
public String toString() {
    return "Motif{" + "id=" + id + ", libelle=" + libelle + ", recetteDepense=" + recetteDepense + ", enregistrements=" + enregistrements + '}';
}

} 
```

这是我保存的功能`Enregistrement`：

```
public void enregistrerEnregistrement() throws DaoException {
    // Déclarations de variables locales
    dao = new DaoH2("gestComptes", "sa", "");
     try {
        dao.connecter();

        Motif motif = (Motif)(((VueAjouterEnregistrement)vue).getModeleJComboBoxMotif().getSelectedItem());            
        System.out.print(motif.getId());

        //dao.ajouterUnEnregistrement(id, idLibelle, idModeReglement, idCompte, idEtat, idMotif, PreLEnc, RecDep, DateEnr, montant, ancienSolde, nouveauSolde, dateFacture, numCHQ, anticipation);
    } catch (DaoException ex) {
       JOptionPane.showMessageDialog(vue, "CtrlAjouterEnregistrement - instanciation - " + ex.getMessage(), "Enregistrement", JOptionPane.ERROR_MESSAGE);
    }

    } 
```

我的`Combobox`es 工作，但我不知道如何用我的对象的 getter 和 setter 恢复元素`Motif`。

我收到此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: java.lang.String cannot be cast to metier.Motif
at controleurs.CtrlAjouterEnregistrement.enregistrerEnregistrement(CtrlAjouterEnregistrement.java:235)
at vues.VueAjouterEnregistrement.jButtonValiderActionPerformed(VueAjouterEnregistrement.java:1288)
at vues.VueAjouterEnregistrement.access$000(VueAjouterEnregistrement.java:31)
at vues.VueAjouterEnregistrement$1.actionPerformed(VueAjouterEnregistrement.java:187)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:11:33.123

在这一行

```
Motif motif = (Motif)(((VueAjouterEnregistrement)vue)
                   .getModeleJComboBoxMotif().getSelectedItem()); 
```

您假设`getSelectedItem()`返回 a`Motif`实际上它返回 a `String`。

您不应该将字符串添加到组合框，而是添加 Motif，并让 Motif 实现`toString`以在 GUI 中正确表示。然后该`getSelectedItem`方法将为您提供所选的 Motif。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:11:19.557

在这一行：

```
Motif motif = (Motif)(((VueAjouterEnregistrement)vue).getModeleJComboBoxMotif().getSelectedItem()); 
```

您正在尝试强制转换字符串（由返回`(((VueAjouterEnregistrement)vue).getModeleJComboBoxMotif().getSelectedItem())`）

到一个`Motif`。

这是不可能的。

您可以添加一个`Motif`以 a`String`作为参数的构造函数，然后调用该构造函数。

**编辑**

在您的评论中，您问我如何调用您的构造函数。恕我直言，您应该阅读 Java 书籍或在线教程，因为调用构造函数并不神奇。这是基本的Java。

你可以这样做：

```
String motifString = ((VueAjouterEnregistrement)vue).getModeleJComboBoxMotif().getSelectedItem(); 
Motif motif = new Motif(motifString); 
```

# c++ - 使用递归函数且不使用任何循环显示素数 (c++) 的代码

> ID：14400603
> 
> 赞同：-5
> 
> 时间：2013-01-18T14:07:11.943
> 
> 标签：c++

这就是标题。
简单地说，我写了这个。

```
#include <iostream>
using namespace std;  
int main()  
{ 
    int a,i;  
    cout<<"Enter a number: ";  
    cin>>a;  
    for (i=2;i<=a/2;i++)  
    {  
        if (a%i==0)  
        {  
            cout<<"Its not Prime Number.";  
           system ("pause");  
            return 0;  
        }  
    }  
    cout<<"Its a Prime number.";  
    system ("pause");  
    } 
```

最主要的是不使用循环和递归函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:10:51.987

您主要想看看将 for 循环的主体变成一个以“int i”作为参数的函数。然后在函数的开头对 i<=a/2 进行测试，并在函数的末尾调用“function(i + 1)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:11:35.120

这是一个递归素数测试函数：

```
int test_prime(unsigned n, unsigned d)
{
    if (n < 2) {
        return 0;
    }

    if (d == 1) {
        return 1;
    } else {
        if (n % d == 0) {
            return 0;
        } else {
            return test_prime(n, d - 1);
        }
    }
} 
```

像这样使用它：

```
unsigned n;
std::cin >> n;
std::cout << (test_prime(n, n / 2) ? "prime" : "not prime") << "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:28:50.300

这是一个基于递归的解决方案，如果提供了编译时常量值，它也可以**在编译时执行计算：**

```
constexpr bool check_divisibility(int i, int j)
{
    return (j == 1) ? false : 
           ((i % j == 0) ? true : check_divisibility(i, j - 1));
}

constexpr bool is_prime(int i) { return !check_divisibility(i, i / 2); } 
```

以下是在客户端代码中使用它的方法：

```
#include <iostream>

using namespace std;

int main()
{
    static_assert(is_prime(11), "Error!"); // Computed at compile-time
    int x = 15;
    cout << is_prime(x); // Computed at run-time
} 
```

# javascript - Alfresco scoped webscript configuration, can it be loaded into an E4X object?

> ID：14400607
> 
> 赞同：3
> 
> 时间：2013-01-18T14:07:22.227
> 
> 标签：javascript, alfresco, e4x

I'm looking to use a scoped configuration file in an Alfresco javascript webscript. I started with this [wiki page](http://wiki.alfresco.com/wiki/Web_Scripts#Global_and_Scoped_Config), and it got me mostly there.

This [jira page](https://issues.alfresco.com/jira/browse/ALF-2613) told me I needed to create a file spring-webscripts-config-custom.xml and place it in a META-INF folder i.e. in /shared/classes/META-INF/spring-webscripts-config-custom.xml. Fine. Got that working. I can load the file, and browse the configuration using the methods listed in the Jira page.

But those methods are a pain to use (childrenMap and getChild), and I'd rather use E4X to parse and query the XML configuration file. To do so, I'd need to get the configuration file as a string and pass it to

var conf = new XML( configStr );

Any ideas on how I can do this?

And a good [E4X tutorial page](https://developer.mozilla.org/en-US/docs/E4X/Processing_XML_with_E4X)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:40:48.310

恕我直言，无法使用 JS 支持的 webscript 实现您所描述的内容。您需要实现一个[Java 控制器](http://wiki.alfresco.com/wiki/Java-backed_Web_Scripts_Samples)来访问配置文件并将其发送回客户端。

也就是说，将他们的内容暴露给外界并不是 Alfresco 配置文件的真正目的。如果您可以披露您正在尝试实现的更多细节，那么建议一些将配置数据公开给客户端的正确方法会更容易。

* * *

编辑

在明确范围后，我的建议是为您的 Web 脚本提供一个专用的 XML 配置文件，其中包含错误代码和消息之间的所有映射。如[文档](http://docs.alfresco.com/4.1/index.jsp?topic=/com.alfresco.enterprise.doc/tasks/ws-config.html)中所述，假设您的 Web 脚本在`myscript.get.desc.xml`. 然后您可以创建一个名为的文件`myscript.get.config.xml`，其中包含例如：

```
<messages>
  <message>
    <id>1</id>
    <desc>A long description here</desc>
  </message>
</messages> 
```

然后，您可以在 JS 控制器中解析此类配置`myscript.get.js`：

```
var myconfig = new XML(config.script); 
```

# backbone.js - 如果我有它的URI，如何获得带有主干的模型？

> ID：14400608
> 
> 赞同：0
> 
> 时间：2013-01-18T14:07:25.407
> 
> 标签：backbone.js, tastypie

我正在使用 django+tastypie+backbone.js 与骨干关系。假设我有模型（咖啡脚本）：

```
class Track extends Backbone.RelationalModel 
```

不知何故，我得到了第一个对象的 URI：

```
api/track/1 
```

JSON 中的结果必须类似于：

```
{
   'title': 'Mytrack',
   'length': '120'
} 
```

如何使用此 URI 获取具有所有属性的完整模型 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:06:35.103

您需要设置模型的`urlRoot`(/api/track)，然后使用所需的 id (1) 创建一个新模型，并调用`.fetch`模型。fetch 调用将是异步的，因此您需要等待成功回调才能访问完整的属性：

```
class Track extends Backbone.RelationalModel
  urlRoot:"/api/track"

track = new Track id:1
track.fetch 
  success:(model) -> console.log model 
```

# javascript - 按值删除 JSON 条目

> ID：14400609
> 
> 赞同：6
> 
> 时间：2013-01-18T14:07:26.177
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [从 javascript 中的数组中删除](https://stackoverflow.com/questions/9362412/delete-from-array-in-javascript)

我有以下 JSON 对象：

```
[id:84,id:92,id:123,id:2353] 
```

我将如何使用javascript删除值为“123”的项目？

或者如果我将 json 格式化为

```
[84, 92, 123, 2353] 
```

在这种情况下如何将其删除？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T14:22:19.013

假设你有这个：

```
var items  = [{ id: 84 }, { id: 92 }, { id: 123 }, { id: 2353 }];

var filtered = items.filter(function(item) { 
   return item.id !== 123;  
});

//filtered => [{ id: 84 }, { id: 92 }, { id: 2353 }] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T14:12:40.303

假设您实际上在`json`变量中有一个来自 json 的对象

```
for (key in json) {
    if (json.hasOwnProperty(key) && json[key] == 123) {
        delete json[key];
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T14:14:44.813

较短的替代方案是：

```
var newArr = [{id:84}, {id:92}, {id:123}, {id:2353}].filter(function(a) {
   return a.id != 123;
}); 
```

* * *

如果你有这个：

`var arr = [{id:84}, {id:92}, {id:123}, {id:2353}]`

要删除值为 123 的项目，您可以执行以下操作：

```
for(var i = 0; i < arr.length; i++) {
    if(arr[i].id == 123) {
        arr.splice(i, 1);
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:13:11.910

```
function removeClass(obj, cls) {
  var classes = obj.className.split(' ');

  for(i=0; i<classes.length; i++) {
    if (classes[i] == cls) {
      classes.splice(i, 1);
      i--; // (*)
    }
  }
  obj.className = classes.join(' ');

}

var obj = { className: 'open menu menu' }

removeClass(obj, 'menu')
alert(obj.className) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T14:17:29.230

您可以使用拼接功能，如下所示：

```
var data = [{id:84}, {id:92}, {id:123}, {id:2353}];
            function remove(){
                for(var i = 0, max = data.length; i < max; i++) {
                    var a = data[i];

                    if(a.id === 123) {
                        data.splice(i, 1);
                        break;
                    }
                }
            }
            remove(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T14:19:01.377

似乎您想避免循环。假设它可用，您可以使用`.filter`：

```
[{id:84},{id:92},{id:123},{id:2353}]
   .filter(function (elem) { return elem.id !== 123; }); 
```

这在技术上确实做了一个循环，但至少你不必看它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-18T14:19:20.960

假设您的“json”实际上是一个数组，例如 [84, 92, 123, 2353]：

```
var myString = "[84, 92, 123, 2353]";
var myArray = JSON.parse(myString);
var index = myArray.indexOf(123); // whatever value you are looking for
myArray.splice(index, 1); 
```

[http://jsfiddle.net/7vkK6/](http://jsfiddle.net/7vkK6/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-18T14:12:12.550

假设我正确理解了您的问题和评论，您可以执行以下操作：

```
var old_array = [{id: 84},...];
var new_array = [];

for(var i = 0, len = old_array.length; i++) {
   if (old_array[i].id != 123) new_array.push(old_array[i]);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-18T14:21:46.630

你目前拥有的不是*JSON*，所以我会给你一些不同的选择。

如果你有一个*数组* `arr = [84,92,123,2353]`，那么

```
arr = arr.filter(function (x) {return x !== 123;}); // all occurrences
// OR
arr.splice(arr.indexOf(123), 1); // first occurrence only 
```

如果你有一个*Object* `obj = {"84": a, "92": b, "123": c, "2353": d}`，`a`对于`d`一些表达式，那么

```
delete obj['123']; // obj now {"84": a, "92": b, "2353": d} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-01-18T14:20:31.647

1) JSON 是一个字符串，而不是数组或对象。

```
var json = "[1,2,3]"; 
```

2) 有效的 JSON***需要是有效的 JS***

```
var myJSObj = { 1,2,3 }, // broken
    myJSArr = [ name : 1, name2 : 2 ]; // broken 
```

3）如果你有一个 JS 数组，你可以使用删除一个元素`[].splice`

```
var arr = [ 1, 2, 3, 4 ],
    i = 0, l = arr.length,
    test = 4;

for (; i < l; i += 1) {
    if (arr[i] === test) { arr.splice(i, 1); } // remove 1 starting at i
} 
```

4）如果你有一个带有命名键的对象，你可以使用`delete`

```
var obj = { val : 1 };
delete obj.val; 
```

# ios - Who can tell me the difference between assignment and copy of the NSArray?

> ID：14400612
> 
> 赞同：3
> 
> 时间：2013-01-18T14:07:34.460
> 
> 标签：ios, objective-c

1.Assignment

```
NSArray* a = xxxxxx;

NSArray* b;

b = a; 
```

2.Copy

```
NSArray* a = xxxxxx;

NSArray* b;

b = [a copy]; 
```

I know copy is "light copy",mutable copy is "deep copy".

copy is copy memory address,and mutable copy is copy memory objects.

But i don't know assignment and copy's different.

It's the same?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:15:52.090

[这个](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Collections/Articles/Copying.html#//apple_ref/doc/uid/TP40010162-SW1)Apple 文档很有帮助：

> 普通副本是一个浅拷贝，它产生一个与原始集合共享对象所有权的新集合。深层副本从原始对象创建新对象并将其添加到新集合中。

因此，在您的第一个示例中，`b`指向与 .NSArray 相同的实例`a`。在第二个示例中，`b`指向 NSArray 的新实例，其中包含对 指向的数组中包含的相同对象的引用`a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:20:50.407

`b = a;` `b`是指向同一个地址`a`。所以改变任何一个都是一样的。这叫做像`call by reference`。

`b = [a copy];`正在创建 的`a`和 指向的另一个对象`b`。这里形成了两组不同的对象，因此更改其中任何一个都将相互独立。这就像`call by value`. 这里`b`将保存一个 immutableCopy `a`，即使它`a`是可变的。

# objective-c - 用 Category 覆盖 NSObject 方法是否安全？也影响系统

> ID：14400620
> 
> 赞同：1
> 
> 时间：2013-01-18T14:08:06.707
> 
> 标签：objective-c, overriding, categories, nsobject

我这听起来可能是一个愚蠢的问题，但我仍然害怕这样做。因为我想覆盖一个 NSObject 方法，即 addObserver: 与一个类别。它对系统上运行的其他应用程序有影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:27:14.117

覆盖`addObserver:forKeyPath:option:contex`不是一个好主意。从类别实现中，您不能调用方法的`super`实现，这基本上意味着永远不会添加任何观察者。

虽然这只会影响你的应用程序，但它会在全球范围内这样做，这意味着即使是外部框架也会受到影响，比如 UIKit 或 Fundation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:32:21.480

尽管当前 Objective-C 语言允许您使用类别来覆盖类继承的方法，甚至是类接口中声明的方法，但强烈建议您不要这样做。类别不能替代子类。

关于您的问题**它对系统上运行的其他应用程序有影响吗？**
答案是**大不。**它只会影响您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:14:45.833

尽管类别为您提供了向现有类添加新方法的规定。您也可以覆盖现有方法，但在少数情况下，您最终可能会失去对调用哪个方法的控制！！！

有时，即使您覆盖了使用框架方法的方法，也不会考虑您的方法。

所以我建议你不应该使用相同的方法名来覆盖。您可以使用 as 来区分：

`addObserverCustom:`

# android - updating the values of a listView onClick on a button which not a part of the listview

> ID：14400621
> 
> 赞同：0
> 
> 时间：2013-01-18T14:08:19.480
> 
> 标签：android, listview

I have a listView with a edittext in all the rows of the listView and i want get all the changed editText values when i clicked to a button which is in same layout but is not part of the listView.

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:31:29.600

如果您正确构建了适配器，您的 EditText 将被回收，因此您的所有项目都不会有一个 EditText。相反，您应该在每次更新 EditText（使用侦听器）时将数据保存到支持数组。当用户单击按钮时，您应该从支持数组中读取数据，而不是实际的 ListView 视图。

# javascript - JSF/PrimeFaces ajax 更新破坏了 jQuery 事件侦听器函数绑定

> ID：14400624
> 
> 赞同：13
> 
> 时间：2013-01-18T14:08:29.623
> 
> 标签：javascript, jquery, ajax, jsf-2, primefaces

我正在使用 jQuery 为 HTML 中`change`的每个事件注册一个事件侦听器，如下所示：`input`

```
<h:head>
    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function(){
            $(':input').each(function() {
                $(this).change(function() {
                    console.log('From docReady: ' + this.id);
                });
            });
        });

        function changeHandler() {
            console.log("from changeHandler");
        }
        //]]>
    </script>
</h:head>
<h:body>
    <h:form id="topForm">
        <p:commandButton id="myButton" value="update"
                         action="#{testBean.submit}"
                         partialSubmit="true" process=":myForm:panel"
                         update=":myForm:panel" />
    </h:form>
    <h:form id="myForm">
        <p:panel id="panel">
            <p:inputTextarea id="myTextarea"
                             value="#{testBean.val}"
                             onchange="changeHandler();"/>
        </p:panel>
    </h:form>
</h:body> 
```

如果`change`用户更改`myTextarea`. 但是，在按下部分更新的更新按钮后`myTextarea`，只有 changeHandler 才会触发。绑定的事件`$(document).ready()`不再触发。

这是 PrimeFaces 相关的和/或预期的行为吗？如果是，那么我如何确保在不重新运行文档就绪脚本的情况下触发第二个事件。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T14:16:47.263

至于问题的原因，ajax 请求将使用来自 ajax 响应的新 HTML 元素更新 HTML DOM 树。那些新的 HTML 元素——显然——没有附加 jQuery 事件处理函数。但是，`$(document).ready()`不会在 ajax 请求上重新执行。您需要手动重新执行它。

这可以通过多种方式实现。最简单的方法是使用`$(document).on(event, selector, function)`而不是`$(selector).on(event, function)`. 这与文档相关联，并且在与给​​定匹配的元素上触发给定时`functionRef`始终调用给定。因此，您永远不需要通过 JSF 方式显式地重新执行该功能。`eventName``selector`

```
$(document).on("change", ":input", function() {
    console.log("From change event on any input: " + this.id);
}); 
```

* * *

另一种方法是在完成 ajax 请求时自己显式地重新执行该函数。当您真正有兴趣在`ready`/`load`事件期间立即执行该函数时，这将是唯一的方法（例如，直接应用某些插件特定的行为/外观，例如日期选择器）。首先，您需要将`$(document).ready()`作业重构为可重用函数，如下所示：

```
$(document).ready(function(){
    applyChangeHandler();
});

function applyChangeHandler() {
    $(":input").on("change", function() {
        console.log("From applyChangeHandler: " + this.id);
    });
} 
```

*（请注意，我删除并简化了您完全不必要`$.each()`的方法）*

然后，选择以下方式之一在完成 ajax 请求时重新执行它：

1.  使用`oncomplete`PrimeFaces 命令按钮的属性：

    ```
    oncomplete="applyChangeHandler()" 
    ```

2.  使用`<h:outputScript target="body">`代替`$(document).ready()`,

    ```
    <h:outputScript id="applyChangeHandler" target="body">
        applyChangeHandler();
    </h:outputScript> 
    ```

    `update`并在属性中引用它：

    ```
    update=":applyChangeHandler" 
    ```

3.  用于`<p:outputPanel autoUpdate="true">`在每个 ajax 请求上自动更新它：

    ```
    <p:outputPanel autoUpdate="true">
        <h:outputScript id="applyChangeHandler">
            applyChangeHandler();
        </h:outputScript>
    </p:outputPanel> 
    ```

4.  使用[OmniFaces](http://omnifaces.org) [`<o:onloadScript>`](http://showcase.omnifaces.org/components/onloadScript)代替`$(document).ready()`,`<h:outputScript>`并且全部在 em 上。

    ```
    <o:onloadScript>applyChangeHandler();</o:onloadScript> 
    ```

# javascript - Script does not work with JQuery 1.9

> ID：14400626
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:08:33.787
> 
> 标签：javascript, jquery

I am really struggling trying to find out what in this script is not JQuery 1.9.0 compatible. It works fine with 1.7.2\.

It's supposed to take a picture the users chooses to upload and show it using HTML5 before actually uploading it.

I hope someone have a sharp eye to spot the error!

```
// convert bytes into friendly format
function bytesToSize(bytes) {
    var sizes = ['Bytes', 'KB', 'MB'];
    if (bytes == 0) return 'n/a';
    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
    return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + sizes[i];
};

// check for selected crop region
function checkForm() {
    if (parseInt($('#w').val())) return true;
    $('.error').html('Please select a crop region and then press Upload').show();
    return false;
};

// update info by cropping (onChange and onSelect events handler)
function updateInfo(e) {
    $('#x1').val(e.x);
    $('#y1').val(e.y);
    $('#x2').val(e.x2);
    $('#y2').val(e.y2);
    $('#w').val(e.w);
    $('#h').val(e.h);
};

// clear info by cropping (onRelease event handler)
function clearInfo() {
    $('.info #w').val('');
    $('.info #h').val('');
};

function fileSelectHandler() {

    // get selected file
    var oFile = $('#image_file')[0].files[0];

    // hide all errors
    $('.error').hide();

    // check for image type (jpg and png are allowed)
    var rFilter = /^(image\/jpeg|image\/png)$/i;
    if (! rFilter.test(oFile.type)) {
        $('.error').html('Please select a valid image file (jpg and png are allowed)').show();
        return;
    }

    // check for file size
    if (oFile.size > 250 * 1024) {
        $('.error').html('You have selected too big file, please select a one smaller image file').show();
        return;
    }

    // preview element
    var oImage = document.getElementById('preview');

    // prepare HTML5 FileReader
    var oReader = new FileReader();
        oReader.onload = function(e) {

        // e.target.result contains the DataURL which we can use as a source of the image
        oImage.src = e.target.result;
        oImage.onload = function () { // onload event handler

            // display step 2
            $('.step2').fadeIn(500);

            // display some basic image info
            var sResultFileSize = bytesToSize(oFile.size);
            $('#filesize').val(sResultFileSize);
            $('#filetype').val(oFile.type);
            $('#filedim').val(oImage.naturalWidth + ' x ' + oImage.naturalHeight);

            // Create variables (in this scope) to hold the Jcrop API and image size
            var jcrop_api, boundx, boundy;

            // destroy Jcrop if it is existed
            if (typeof jcrop_api != 'undefined') 
                jcrop_api.destroy();

            // initialize Jcrop
            $('#preview').Jcrop({
                aspectRatio : 178 / 200, // keep aspect ratio 1:1
                minSize: [178, 200],
                boxWidth: 534,
                boxHeihgt: 600,

                bgFade: true, // use fade effect
                bgOpacity: .3, // fade opacity
                onChange: updateInfo,
                onSelect: updateInfo,
                onRelease: clearInfo
            }, function(){

                // use the Jcrop API to get the real image size
                var bounds = this.getBounds();
                boundx = bounds[0];
                boundy = bounds[1];

                // Store the Jcrop API in the jcrop_api variable
                jcrop_api = this;
            });
        };
    };

    // read selected file as DataURL
    oReader.readAsDataURL(oFile);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:16:49.043

jQuery 1.9 已经放弃了一整套以前被弃用的旧特性。

我建议您阅读 jQuery 提供的从以前版本升级到 1.9 的说明。有很多东西被删除或改变了，所以除非你一直跟上他们推荐的最佳实践，否则你很可能会被某些东西抓住。

这是升级指南：http: [//jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:13:44.077

```
Line 4: if (bytes == 0) return 'n/a'; --- Use '===' to compare with '0'.
Line 5: var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024))); --- Missing radix parameter.
Line 11: if (parseInt($('#w').val())) return true; --- Missing radix parameter.
Line 88: bgOpacity: .3, // fade opacity --- A leading decimal point can be confused with a dot: '.3'. 
```

[都在这里](http://jsbin.com/asizuy/1/edit)指出。

# c# - How to convert large image files in c#

> ID：14400630
> 
> 赞同：2
> 
> 时间：2013-01-18T14:08:47.527
> 
> 标签：c#

I have several large image files that I need to convert to different image formats. I am using the following code to do this:

```
using (Image img =new Bitmap(inputImageName))
        {
            img.Save(outputImageName, imageFormat);
        } 
```

It do the conversation, but also since the images are big, it generate outofmemory exception. I read several articles about how to overcome fragmentation of LOH, but I cannot use any of them in this case.

What Can I do?

The images are around 100MByte and it happens after opening 3 or 4 images.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:22:48.403

[根据这篇文章](http://weblogs.asp.net/bleroy/archive/2009/12/10/resizing-images-from-the-server-using-wpf-wic-instead-of-gdi.aspx)，看看不使用 GDI 的 WPF 图像处理类。以下源代码是一个很好的起点：

```
public static void Resize(string input, string output)
{
    using (var inputStream = File.OpenRead(input))
    {
        var photoDecoder = BitmapDecoder.Create(inputStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.None);

        var frame = photoDecoder.Frames[0];

        using (var ouputStream = File.Create(output))
        {
            var targetEncoder = new PngBitmapEncoder();
            targetEncoder.Frames.Add(frame);
            targetEncoder.Save(ouputStream);
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:41:43.207

您需要在这里问的问题是“我必须在 .NET 和/或 C# 中执行此操作吗”

虽然我明白为什么对于很多人来说，像 C# 这样灵活的语言可能是执行许多任务的答案，但我也不得不说“当你只有一把锤子时，每个问题看起来都像钉子”

如果这是一次性转换，并且您只需将它们用于一个项目，那么我对您的建议是使用更适合该工作的独立工具。

有大量的付费应用程序，例如：

AcdSee 照片管理器

[http://www.acdsee.com/](http://www.acdsee.com/)

释放工具，例如

Ifran View及其图像转换功能

[http://www.bleepingcomputer.com/forums/topic50519.html](http://www.bleepingcomputer.com/forums/topic50519.html)

如果命令行脚本是您的游戏，那么请使用 ImageMagik 等工具集：

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

Iimage Magik 还具有 .NET 绑定，因此如果您的项目需要在程序代码中动态转换这些，则可以在 .NET 项目以及许多其他项目中使用它的功能。

[http://www.imagemagick.org/script/api.php](http://www.imagemagick.org/script/api.php)

对于像这样的场景，真的没有理由重新发明轮子，这个问题已经解决了很多次，所以它真的不是你应该做出的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T15:14:21.513

它与大对象堆没有任何关系。Bitmap 类是 GDI+ 的托管包装器，而 GDI+ 是一大块非托管代码。它在非托管内存中分配像素数据缓冲区。您的代码使用的托管内存量非常小。

一个 100 兆字节的图像文件并没有说明需要多少非托管内存。它很可能是一种压缩图像格式，例如 JPEG 或 PNG。解压缩后确实需要更多的非托管内存。因此，您很容易最终需要数百兆字节。

当您在 32 位操作系统上运行代码或选择 x86 作为 EXE 的平台目标设置（VS2010 及更高版本的默认设置）时，这是一个问题。您的程序从已加载的代码块和数据之间的可用漏洞中分配虚拟内存。GDI+ 需要一块连续的内存来加载像素数据，当您的程序有很多可用的虚拟内存但它分布在许多漏洞中时，这很难实现。另一个问题是*地址空间碎片*，加载 DLL 或分配内存可能会将一个大洞一分为二。

有一个简单的解决方法可以解决这个问题，在 64 位操作系统上运行你的代码。它有大量可用的虚拟内存，大洞。您可以对 32 位操作系统上的当前问题采取任何措施的可能性微乎其微。您无法直接控制内存管理器。

# java - Could not autowire. No beans of Neo4jTemplate type found

> ID：14400631
> 
> 赞同：8
> 
> 时间：2013-01-18T14:08:52.677
> 
> 标签：java, spring, intellij-idea, spring-data-neo4j

I use IDEA IntelliJ 12.0.2.

My application-context.xml is:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd">

    <neo4j:config storeDirectory="../embeddedNeo4j"/>

    <context:spring-configured/>

    <context:annotation-config/>
    <context:component-scan base-package="models"/>

</beans> 
```

My test class is:

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.neo4j.support.Neo4jTemplate;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.transaction.annotation.Transactional;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"/application-context.xml"})
@Transactional
public class MyTest {

    @Autowired
    Neo4jTemplate template; //=> Could not autowire.No beans of Neo4jTemplate type found

    //my tests here
} 
```

Have I missed some configuration?

It seems to be an old problem with Intellij: [http://www.markvandenbergh.com/archives/260/autowiring-spring-bean-in-intellij/](http://www.markvandenbergh.com/archives/260/autowiring-spring-bean-in-intellij/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-07T18:38:09.390

在带有 Spring Data bean 的 IntelliJ 中经常发生这种情况。IntelliJ 不能很好地从 Spring Data 的命名空间配置中解析出实例。作为一个例子（除了你的），IntelliJ 不会正确验证扩展 Spring Data 的`@Autowired`or `@Inject`ed 类`MongoRepository`。正如您所注意到的，它不会伤害您的应用程序，但在开发过程中却很烦人。以下是抑制“错误”的方法：

```
@SuppressWarnings("SpringJavaAutowiringInspection")
@Autowired
Neo4jTemplate template; 
```

您可以通过单击红色灯泡（将鼠标悬停在带红色下划线的元素上时出现错误指示）选择“Inspection 'Autowiring for Bean Class' options”然后最后选择“Suppress for field”来完成相同的操作。或者，如果您想为整个班级禁止显示，请选择“为班级禁止显示”。

# jasmine - How to run grunt jasmine task in Cloud9

> ID：14400634
> 
> 赞同：1
> 
> 时间：2013-01-18T14:08:53.220
> 
> 标签：jasmine, gruntjs, cloud9-ide

I have a simple case, where I need to run grunt jasmine test. After running

```
grunt jasmine 
```

i get error response:

```
Running "jasmine" task                                                                                                                                                                               
Testing jasmine specs via phantom                                                                                                                                                                    

events.js:66                                                                                                                                                                                         
        throw arguments[1]; // Unhandled 'error' event                                                                                                                                               
                       ^                                                                                                                                                                             
Error: listen EACCES                                                                                                                                                                                 
    at errnoException (net.js:769:11)                                                                                                                                                                
    at Server._listen2 (net.js:892:19)                                                                                                                                                               
    at listen (net.js:936:10)                                                                                                                                                                        
    at Server.listen (net.js:985:5)                                                                                                                                                                  
    at Function.app.listen (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt-jasmine-runner/node_modules/connect/lib/proto.js:229:24)                    
    at Object.exports.start (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt-jasmine-runner/tasks/lib/server.js:17:17)                                  
    at startServer (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt-jasmine-runner/tasks/jasmine.js:141:17)                                             
    at Function.task.phantomRunner (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt-jasmine-runner/tasks/jasmine.js:109:16)                             
    at Object.<anonymous> (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt-jasmine-runner/tasks/jasmine.js:50:10)                                       
    at Object.task.registerTask.thisTask.fn (/var/lib/stickshift/f1dad82f1ce14cd0bbaaa971c75eeedc/app-root/data/380712/node_modules/grunt/lib/grunt/task.js:58:16) 
```

The hint that Cloud9 gives me is

```
 Cloud9  Error: you may be using the wrong PORT & HOST for your server app                                                                                                                           
         Node: use 'process.env.PORT' as the port and 'process.env.IP' as the host in your app scripts 
```

So my question is **How do I configure PORT & HOST ?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:06:08.790

当前关于 grunt-jasmine-runner 的文档具有误导性（indetnation）：

事实证明，我必须将服务器配置为对象文字：

```
//...
'jasmine' : {
  server:{
    port:process.env.PORT
  }
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:47:03.947

您需要在 config.rb 中添加端口和主机的值：

```
jasmine_port=ENV['PORT']
jasmine_host=ENV['IP'] 
```

# python - how to check Recursively if i can create a sum from a list of numbers?

> ID：14400641
> 
> 赞同：-6
> 
> 时间：2013-01-18T14:09:12.910
> 
> 标签：python, algorithm, recursion

How to check recursively if I can create a sum from a list or from a sublist of numbers?

```
[23, 40, 20, 6, 3, 12, 20, 21, 18, 17] 
```

I can create 64 from the list `[40,6,18]`, but I can't create 34 from any sublist.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:13:48.770

要确定是否可以从数字列表或子列表创建总和：

1) 从第一个数字开始。

2）如果该数字等于您尝试创建的总和，请停止，您已经成功。

3) 如果该数字大于您尝试创建的总和，请跳至下一个数字并转到第 2 步。

4）从您要查找的总和中减去该数字。

5）重复这个算法，尝试用剩余的数字（在这个数字之后的那些）找到剩余的总和。

6) 转到下一个号码。如果没有，请停止。

7) 转到步骤 2。

因此，例如，如果您尝试从 [1, 13, 17, 8] 中找到 55 的总和，您可以将其简化为以下三个问题：

1.  你能从 [13, 17, 8] 中找到 55-1 的总和吗？（这将找到包含第一个数字的任何解决方案。）

2.  你能从 [17, 8] 中找到 55-13 的总和吗？（这将找到不包含第一个数字但包含第二个数字的任何解决方案。）

3.  你能从 [8] 中找到 55-17 的总和吗？（这将找到任何不包含第一个或第二个数字但包含第三个数字的解决方案。）

4.  8是解决方案吗？（这将找到不包含前三个数字但包含第四个数字的任何解决方案。）

请注意，每个新问题的术语都比原始问题少。所以它不会永远持续下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:15:15.320

如果这是家庭作业，那么提供一个非递归的解决方案对您没有帮助。如果它不是家庭作业，那么不要强迫自己使用递归......改用 itertools ：

```
>>> lst =[23, 40, 20, 6, 3, 12, 20, 21, 18, 17]
>>> from itertools import chain,combinations
>>> 
>>> def powerset(iterable):
...     "powerset([1,2,3]) --> () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
...     s = list(iterable)
...     return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))
... 
>>> next(x for x in powerset(lst) if sum(x) == 64)
(23, 20, 21) 
```

# maven - Maven 父 POM

> ID：14400642
> 
> 赞同：6
> 
> 时间：2013-01-18T14:09:21.007
> 
> 标签：maven, pom.xml, parent-pom

我是 Maven 新手，最近安装了 nexus。现在我想创建一个父 POM，以便我公司内的所有项目都可以使用它。这是我的父母 POM。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>1.0.0</modelVersion>
    <groupId>com.mycomp</groupId>
    <artifactId>parent-pom-android</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>Android Parent POM</name>

    <repositories>
        <repository>
            <id>nexus-repo</id>
            <url>http://10.10.10.230:8081/nexus/content/groups/public</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>nexus-repo</id>
            <name>confiz-repo</name>
            <url>http://10.10.10.230:8081/nexus/content/groups/public/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
 </project> 
```

现在我在哪里放置这个 POM 文件，以便我的其他 POM 文件可以继承它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T14:14:04.617

如果你把这个父 pom 放在一个名为 android 的文件夹中，那么将在同一个文件夹中使用它的项目，就像这样。

*   安卓
*   pom.xml
*   安卓项目-1
    *   pom.xml

然后项目 pom.xml 可以通过将其放在其 pom.xml 的顶部来使用父 pom：

```
<parent>
    <groupId>parent.group</groupId>
    <artifactId>parent.artifact</artifactId>
    <version>${version.number}</version>
    <relativePath>../</relativePath>
</parent> 
```

然后，您可以在将来扩展此架构，如下所示：

*   移动的
    *   pom.xml
    *   安卓
        *   pom.xml
        *   安卓项目-1
        *   android-project-2
    *   苹果手机
        *   pom.xml
        *   iphone-project-1

这使您可以定义 android 项目的通用配置、iphone 项目的通用配置和所有移动项目的通用配置。等等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T14:16:05.453

You have to deploy your project to an internal Maven repository. To do that, you first need to configure a Maven repository server (I recommend using [Apache Archiva](http://archiva.apache.org/index.cgi)), and then point your pom.xml and settings.xml to the server: [http://archiva.apache.org/docs/1.4-M3/userguide/deploy.html](http://archiva.apache.org/docs/1.4-M3/userguide/deploy.html)

After deploying it, you can point all the projects from your company to use that pom as parent pom. You can use the same strategy to create internal project dependencies. That goes very well in a [continuous integration](http://en.wikipedia.org/wiki/Continuous_integration) environment.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:15:29.230

对于每个子 pom，放置对父 pom 的引用。

```
<parent>
    <groupId>com.mycomp</groupId>
    <artifactId>parent-pom-android</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <relativePath>relative/path/to/parent/pom</relativePath>
</parent> 
```

relativePath is computed starting from the child pom

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-07T20:22:01.853

Packaging type should be `pom` instead of `apk`.

# asp.net-mvc - 接受逗号和点作为小数分隔符

> ID：14400643
> 
> 赞同：22
> 
> 时间：2013-01-18T14:09:33.893
> 
> 标签：asp.net-mvc, modelbinders, value-provider

ASP.NET MVC 中的模型绑定很棒，但它遵循区域设置。在我的语言环境中，小数点分隔符是逗号 (',')，但用户也使用点 ('.')，因为他们懒得切换布局。我希望在一个地方为我的模型中的所有`decimal`字段实现这一点。

我应该为类型实现我自己的值提供者（或事件模型绑定器）`decimal`还是我错过了一些简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-18T14:14:44.240

最干净的方法是实现自己的模型绑定器

```
public class DecimalModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var valueProviderResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        return valueProviderResult == null ? base.BindModel(controllerContext, bindingContext) : Convert.ToDecimal(valueProviderResult.AttemptedValue);
        // of course replace with your custom conversion logic
    }    
} 
```

并在 Application_Start() 中注册它：

```
ModelBinders.Binders.Add(typeof(decimal), new DecimalModelBinder());
ModelBinders.Binders.Add(typeof(decimal?), new DecimalModelBinder()); 
```

致谢：[默认 ASP.NET MVC 3 模型绑定器不绑定小数属性](https://stackoverflow.com/questions/5698984/default-asp-net-mvc-3-model-binder-doesnt-bind-decimal-propeties)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-23T22:58:10.833

要正确处理组分隔符，只需替换

```
Convert.ToDecimal(valueProviderResult.AttemptedValue); 
```

在选定的答案中

```
Decimal.Parse(valueProviderResult.AttemptedValue, NumberStyles.Currency); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-01T16:07:00.947

感谢接受的答案，我最终得到了以下实现来处理浮点数、双精度和十进制。

```
public abstract class FloatingPointModelBinderBase<T> : DefaultModelBinder
{
    protected abstract Func<string, IFormatProvider, T> ConvertFunc { get; }

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var valueProviderResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (valueProviderResult == null) return base.BindModel(controllerContext, bindingContext);
        try
        {
            return ConvertFunc.Invoke(valueProviderResult.AttemptedValue, CultureInfo.CurrentUICulture);
        }
        catch (FormatException)
        {
            // If format error then fallback to InvariantCulture instead of current UI culture
            return ConvertFunc.Invoke(valueProviderResult.AttemptedValue, CultureInfo.InvariantCulture);
        }
    }
}

public class DecimalModelBinder : FloatingPointModelBinderBase<decimal>
{
    protected override Func<string, IFormatProvider, decimal> ConvertFunc => Convert.ToDecimal;
}

public class DoubleModelBinder : FloatingPointModelBinderBase<double>
{
    protected override Func<string, IFormatProvider, double> ConvertFunc => Convert.ToDouble;
}

public class SingleModelBinder : FloatingPointModelBinderBase<float>
{
    protected override Func<string, IFormatProvider, float> ConvertFunc => Convert.ToSingle;
} 
```

然后你只需要在`Application_Start`方法上设置你的 ModelBinders

```
ModelBinders.Binders[typeof(float)] = new SingleModelBinder();
ModelBinders.Binders[typeof(double)] = new DoubleModelBinder();
ModelBinders.Binders[typeof(decimal)] = new DecimalModelBinder(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-15T10:26:36.910

```
var nfInfo = new System.Globalization.CultureInfo(lang, false)
{
    NumberFormat =
    {
        NumberDecimalSeparator = "."
    }
};
Thread.CurrentThread.CurrentCulture = nfInfo;
Thread.CurrentThread.CurrentUICulture = nfInfo; 
```

# centos - 无法从另一台计算机访问 Centos Apache 页面

> ID：14400649
> 
> 赞同：0
> 
> 时间：2013-01-18T14:09:49.320
> 
> 标签：centos, apache, iptables

今天在 CentOS 上启动了 apache，我可以在与 localhost 相同的机器上打开测试页面。但是我无法使用另一台计算机打开它。CentOS 服务器位于路由器后面的 VLAN（使用交换机）上。我可以使用我的笔记本电脑从另一端 ping 服务器。但是我无法在浏览器中打开测试页面。我在同一个 VLAN 中有另一台服务器，我可以从我的笔记本电脑访问它。

这里还有一些 iptables -L 的条目

```
Chain INPUT 
ACCEPT  tcp   --  anywhere    anywhere   tcp:dtp:http
ACCEPT  udp   --  anywhere    anywhere   udp:dtp:http
REJECT  all   --  anywhere    anywhere   reject-with  icmp-host-prohibited

Chain FORWARD
REJECT  all   --  anywhere    anywhere   reject-with  icmp-host-prohibited 
```

我不确定我还需要检查什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:51:43.657

安全理论告诉首先放弃防火墙并进行测试 ( `iptables -F`)。如果您可以访问，那么这确实是一个 iptables 问题，如果您仍然无法访问您的服务，请尝试查看是否有任何特定绑定：`netstat -an | grep "LISTEN "` 如果您看到类似以下内容：

`"tcp 0 0 127.0.0.1:80 0.0.0.0:* LISTEN "`

意味着您的服务器仅在 localhost ip 上侦听，您应该检查特定的 httpd 绑定`/etc/httpd/conf/httpd.conf`

如果您需要更多帮助，请继续发帖 =)

# php - 使用 PHP 和 urlencode 问题重置密码

> ID：14400652
> 
> 赞同：0
> 
> 时间：2013-01-18T14:10:01.293
> 
> 标签：php, sql, passwords, urlencode, reset

只是寻找有关如何将 urlencode 应用于这段代码的建议。它实际上正在工作，收到电子邮件时的问题，urlencode 似乎不起作用。

```
function reset_password($email) {
 $query = "DELETE from reset_password where email = $email";
 $deletepass = mysql_query($query);
 $code = substr(base64_encode(crypt('', '')), 0, 32);
 $query2 = "INSERT into reset_password values ($email, '$code', " . time() . ")";
 $insertval = mysql_query($query2);

 $f = "SELECT userEmail from gn_users where email = $email";

$from = "***"; // sender
$f['userEmail']; // recepient

$message =
"From: *** <***>\r\n" . // email headers
"To: {$f['userEmail']} <{$f['userEmail']}>\r\n" . 
'Subject: Reset Password' . "\r\n" .
"\r\n" .
"Hello\r\n" . // email imap_body(imap_stream, msg_number)
"\r\n" .
"A request has been made to reset your example.com web site password.\r\n" .
"\r\n" .
"To complete the request, click on the following link within 48 hours of the transmision of this email and follow the on screen instructions.\r\n" .
"\r\n" .
"index.php?page=reset-password&email=" . urlencode($email) . "&code=" . urlencode($code) . "\r\n" .
"\r\n" .
"Kind regards,\r\n" .
"\r\n" .
"The example.com Web Site";

$to = "$email";
$subject = "Test mail";
$message = "$message";
$from = "***";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:55:53.643

我将尝试为您提供一些自己编写的技巧，而不必依赖那些糟糕的代码。

您需要将任务分解为多个、一口大小、易于执行的任务。

开始了：

1.  用户需要一个请求密码重置的页面。这是一个带有电子邮件字段（和/或用户名）的表单。
2.  我们有用户邮箱，如果存在，我们需要生成一个无法猜到的重置密码链接，这样不是每个人都可以重置某人的密码。
3.  所以你需要为这个请求生成一个唯一的哈希，一个选项是`uniqid()`，但这里有很多选项。因此，您生成了一个如下所示的链接：`http://test.com/reset.php?uid=443&hash=33rr3344rree22`. 它不能真正被猜到，因为您需要知道用户 id 和 has。但为了确保这一点，我们将使其在一小时或一天内到期。
4.  接下来，我们确保此链接有效。我们必须为密码重置请求创建一个表，其中包含以下列：`id`, `email`, `hash`, `date_added`, 并插入它（日期可以是`TIMESTAMP`默认值`CURRENT_TIMESTAMP`）。
5.  现在是发送电子邮件的时候了。您可以添加任何您想要的文本，只要您提及之前生成的 url。
6.  现在用户点击链接。您获取用户 ID 和哈希，并检查是否存在这样的条目。如果是这样，并且请求不超过 1 天，我们生成一个新密码，更新`users`表，并向他发送一封确认邮件。
7.  这是可选的，但建议使用。创建一个 cron 作业，清除超过 1 天的条目的密码重置请求表。

这些步骤中的每一个都相当容易完成，或者您可以在网络上找到很多关于它们的信息。如果你花时间理解每一步，正确地清理一切，并按部就班地做事，你会学到很多东西。

# c++ - 是否可以直接识别覆盖整个堆栈的错误代码？

> ID：14400658
> 
> 赞同：2
> 
> 时间：2013-01-18T14:10:24.593
> 
> 标签：c++, windows, debugging, visual-c++, stack-corruption

很简单地说，如果 C++ 程序执行以下函数（例如，在 Windows 7 上，使用任何 VS 版本编译），然后随后崩溃并且您使用 WER 附加调试器，或者让 WER 生成故障转储并稍后分析此故障转储.

是否可以*从dump中的信息*，*直接*推断出这个函数被执行了，也就是说，找到执行它的线程的踪迹，就知道这个函数被执行了。

或者当我破坏整个堆栈时，所有执行痕迹都消失了吗？

```
void bye_bye_stack() {
  int local = 42;
  int* stackaddr = &local;
  while(time(NULL) != NULL) { // prevent optimizations via call to time()
    ++stackaddr; // stack grows towards smaller addresses, so increasing the pointer will point to info we already put on the stack
    *stackaddr = local; // destroy stack content
    // program will (likely) crash here once we reach a read-only page
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:20:03.753

这不是直接回答你的问题。

但是，当我遇到堆栈被覆盖时，我曾经启动实用程序 gflags，它会在开始覆盖堆栈时立即断言。

[Gflags 由 Microsoft 提供](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549557%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:32:04.853

一般来说，通过以您正在做的方式销毁堆栈，您将销毁“调用堆栈”，这意味着有关先前调用的例程的信息将消失。但是，如果您从该例程中触发访问冲突/分段错误，则将存储发生这种情况的指令指针，指向该例程。

但是，如果堆栈损坏并且您从该例程返回，那么即使不是不可能，也很难弄清楚发生了什么。

如果您想弄清楚发生了什么，我建议使用调试工具来找出堆栈被“粉碎”的位置。如果您的意图是销毁执行的证据，请确保您从该例程中“跳转”或“返回”，而不会触发异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T14:29:45.020

这真的取决于。崩溃转储中提供的回溯直接依赖于堆栈中存储的信息。这通常意味着当您怀疑堆栈损坏时，您不能信任回溯。

您提供的函数很可能会破坏整个堆栈，然后当您超出段限制或到达进程无法使用的内存时导致异常。此时堆栈中将没有任何内容来指示嫌疑人。

# castle-windsor - 温莎城堡配置文件

> ID：14400660
> 
> 赞同：2
> 
> 时间：2013-01-18T14:10:38.133
> 
> 标签：castle-windsor

我的配置文件的样子：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <!--<configSections>
    <section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler,Castle.Windsor" />
  </configSections>
  <castle>-->
    <components>
      <component id="BasicElement" service="ClassLibrary1.ISomething, ClassLibrary1"
                 type="ClassLibrary1s.Something, ClassLibrary1"
                 lifestyle="singleton">
      </component>
    </components>
  <!--</castle>-->
</configuration> 
```

当我在 F5 中运行我的应用程序时，出现错误： **配置系统无法初始化**，内部异常告诉我： **无法识别的配置部分组件。**

我看到它因此调用文件**Interception.vshost.exe.Config** 尽管我明确要求他读取其他文件。

请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:33:53.117

您已经注释掉了 configSection 部分和 castle 部分，只留下了组件部分。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler,Castle.Windsor" />
  </configSections>
  <castle>
    <components>
    </components>
  </castle>
</configuration> 
```

如果你想要一个空白的城堡配置，我会建议像上面这样。

# height - 如何使用 MooTools 均衡元素的高度？

> ID：14400662
> 
> 赞同：0
> 
> 时间：2013-01-18T14:10:42.633
> 
> 标签：height, mootools

我有一个带有可变数量的子 div（2-4）的 div。

我想将这些 div 的高度与内容最多的 div 的高度（最高的 div）相匹配。

我从未使用过 MooTools，但在这种情况下我必须使用。

我知道我首先必须检查父 div 包含多少个 div，然后获取它们的所有高度，然后确定最大的一个，然后将该高度应用于所有子 div。虽然我不知道语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:26:36.730

这并不难。这是一个小函数，它将查看传递的任何元素，并将选择该批次的最大高度，然后将其应用于所有元素。

```
var equalElements = function(els){
    // make elements equal height to max height of the set.
    var height = Math.max.apply(Math, els.map(function(el){
        return el.getSize().y;
    }));

    els.setStyle('height', height);
};

// pass on a collection of elements
equalElements(document.getElements('div.equals')); 
```

您也可以将其添加到 Elements 原型中。

```
Elements.implement({
    equalHeight: function(){
        // make elements equal height to max height of the set.
        var height = Math.max.apply(Math, this.map(function(el){
            return el.getSize().y;
        }));

        this.setStyle('height', height);
    }
});

$$('div').equalHeight(); 
```

见[http://jsfiddle.net/dimitar/h6CAc/](http://jsfiddle.net/dimitar/h6CAc/)

# iphone - kABSourceNameProperty 返回值

> ID：14400663
> 
> 赞同：0
> 
> 时间：2013-01-18T14:10:42.377
> 
> 标签：iphone

在我的应用程序中，我试图区分来自不同来源的联系人，例如 Exchange、Facebook、Native 联系人等`iCloud`。

我曾经`ABSourceType`获取联系人的来源类型，但不同来源的联系人
**例如。** `Yahoo and iCloud`具有相同的源类型（值 4）但源名称不同（雅虎：联系人和 iCloud 作为卡）。
我进行了广泛的搜索以获取官方 Apple Docs 以确认`kABSourceNameProperty`不同来源的价值。任何人都可以在这方面帮助我吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:17:27.373

如中所述：[ABAddressBook ABSource 和 ABSourceType](https://stackoverflow.com/questions/3108413/abaddressbook-absource-and-absourcetype)

源类型是一个简单的枚举，不可能区分哪个“源”创建记录：

```
enum {
    kABSourceTypeLocal       = 0x0,
    kABSourceTypeExchange    = 0x1,
    kABSourceTypeExchangeGAL = kABSourceTypeExchange | kABSourceTypeSearchableMask,
    kABSourceTypeMobileMe    = 0x2,
    kABSourceTypeLDAP        = 0x3 | kABSourceTypeSearchableMask,
    kABSourceTypeCardDAV     = 0x4,
    kABSourceTypeCardDAVSearch = kABSourceTypeCardDAV | kABSourceTypeSearchableMask,
};
typedef int ABSourceType; 
```

# visual-studio-2010 - 用于生成 Visual Studio 解决方案文件和项目文件的 Perl 脚本

> ID：14400666
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:10:48.960
> 
> 标签：visual-studio-2010, perl

perl脚本如何生成VS 2010项目文件和解决方案文件？欢迎任何链接或任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:30:29.250

您首先需要确定您需要哪种类型的项目。特别是那些模板要使用的编程语言。

MSDN 站点中有大量​​关于项目模板的文档，例如：

Visual Studio 模板 [http://msdn.microsoft.com/en-us/library/6db0hwky.aspx](http://msdn.microsoft.com/en-us/library/6db0hwky.aspx)

创建项目和项目模板 [http://msdn.microsoft.com/en-us/library/s365byhx.aspx](http://msdn.microsoft.com/en-us/library/s365byhx.aspx)

如果您安装了 VS2010，您只需转到 VS2010 模板文件夹（“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplates\CSharp\”）并从您的 PERL 脚本中获取这些文件，构建项目的文件夹结构，并在对每个文件进行 STRING 替换后粘贴这些文件。

例如，C# 中的控制台应用程序模板如下所示：

*   应用程序配置
*   汇编信息.cs
*   控制台应用程序.csproj
*   csConsoleApplication.vstemplate
*   程序.cs

所有文件都是纯文本，因此您应该能够从您的 perl 脚本中读取/替换它们。

VS2010 创建后的文件夹结构为：

*   垃圾桶
*   对象
*   特性
    *   装配信息.cs
*   *.csproj
*   程序.cs

因此，您必须创建文件夹结构并复制文件。

我相信现在只需创建 Perl 脚本来处理上述所有内容。

希望有帮助

# javascript - Nivo-slider 似乎在标题 div 中放置了内联 css 高度

> ID：14400670
> 
> 赞同：0
> 
> 时间：2013-01-18T14:11:08.213
> 
> 标签：javascript, css, slider, nivo-slider, inline-styles

我正在使用一个名为[Shinra](http://luiszuno.com/blog/downloads/shinra-html-template/)的模板。

我想调整滑块和标题的大小，这是无烟煤色。但是，似乎滑块将内联 CSS 放入标题 div 中的高度与我想要的不同......我尝试了以下方法：

*   在 Google 上搜索 - 找不到结果，找到了一个教程，但它没有解释任何关于将高度放入 div 的内容。
*   更改了 nivo-slider 的文件夹名称，使其无法正常工作 - CSS 内联高度消失了。
*   将标题 div 的名称更改为标题，这有效 - 内联 CSS 消失了
*   查看了 JavaScript，但我对此知之甚少，找不到任何带有文本“标题”（div 名称）的文本。

因此，似乎滑块将这个高度放入一个名为 header 的 div 中，但我找不到任何关于它的信息……有人知道解决方案吗？

HTML部分：

```
 <div id="wrapper">

            <!-- HEADER -->
            <div id="header">
                <a href="index.html"><img id="logo" src="img/logo.png" alt="Nova" /></a>
                <!-- Social -->
                <div id="social-holder">
                    <ul class="social">
                        <li><a href="http://www.facebook.com" class="poshytip facebook" title="Become a fan"></a></li>
                        <li><a href="http://www.twitter.com" class="poshytip twitter" title="Follow our tweets"></a></li>
                        <li><a href="http://www.dribbble.com" class="poshytip dribbble" title="View our work"></a></li>
                        <li><a href="http://www.addthis.com" class="poshytip addthis" title="Tell everybody"></a></li>
                        <li><a href="http://www.vimeo.com" class="poshytip vimeo" title="View our videos"></a></li>
                        <li><a href="http://www.youtube.com" class="poshytip youtube" title="View our videos"></a></li>
                    </ul>
                </div>
                <!-- ENDS Social -->

                <!-- Navigation -->
                <div><ul id="nav" class="sf-menu">
                    <li class="current-menu-item"><a href="index.html">HOME</a></li>
                    <li><a href="features.html">FEATURES</a>
                        <ul>
                            <li><a href="features-appearance.html"><span> Appearance</span></a></li>
                            <li><a href="features-columns.html"><span> Columns layout</span></a></li>
                            <li><a href="features-accordion.html"><span> Accordion</span></a></li>
                            <li><a href="features-toggle.html"><span> Toggle box</span></a></li>
                            <li><a href="features-tabs.html"><span> Tabs</span></a></li>
                            <li><a href="features-infobox.html"><span> Text box</span></a></li>
                            <li><a href="features-monobox.html"><span> Icons</span></a></li>
                        </ul>
                    </li>
                    <li><a href="blog.html">BLOG</a></li>
                    <li><a href="portfolio.html">PORTFOLIO</a></li>
                    <li><a href="gallery.html">GALLERY</a>
                        <ul>
                            <li><a href="gallery.html"><span> Four columns </span></a></li>
                            <li><a href="gallery-3.html"><span> Three columns </span></a></li>
                            <li><a href="gallery-2.html"><span> Two columns </span></a></li>
                            <li><a href="video-gallery.html"><span> Video gallery </span></a></li>
                        </ul>
                    </li>
                    <li><a href="http://luiszuno.com/blog/downloads/shinra-html-template">DOWNLOAD</a></li>
                </ul></div>
                <!-- Navigation --> 

                <!-- search -->
                <div class="top-search">
                    <form  method="get" id="searchform" action="#">
                        <div>
                            <input type="text" value="Search..." name="s" id="s" onfocus="defaultInput(this)" onblur="clearInput(this)" />
                            <input type="submit" id="searchsubmit" value=" " />
                        </div>
                    </form>
                </div>
                <!-- ENDS search -->

                <!-- headline -->
                <div id="headline">
                </div>
                <!-- ENDS headline -->

                <!-- Slider -->
            <div id="slider-block">
                <div id="slider-holder">
                    <div id="slider">
                        <a href="http://www.luiszuno.com"><img src="images/01.jpg" title="Visit my web site regularly and get freebies each week!" alt="" /></a>
                        <a href="http://themeforest.net/user/Ansimuz/portfolio?ref=ansimuz"><img src="images/02.jpg" title="Support the freebies buying high quality premium themes from my portfolio at themeforest" alt="" /></a>
                    </div>
                </div>
            </div>
            <!-- ENDS Slider -->

            </div>
            <!-- ENDS HEADER --> 
```

CSS部分：

```
body {
    line-height: 1;
    color: #696969;
    background: #f1f1f1 url(../img/bg/webtreats/webtreats_blue_creme_pattern_87.jpg);
    font-family: Arial, Helvetica, sans-serif;
    font-size:  100%;
}

#wrapper{
    width: 966px;
    margin: 30px auto;
    background: #363636;
    min-height: 700px;
    font-size: 14px;
    line-height: 1.5em;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
}

#header{
    height: 200px;
    position: relative;
    z-index: 10;
}

#main{
    background: #ffffff;
    position: relative;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
}

#content{
    min-height: 400px;
    overflow: hidden;
    margin-bottom: 40px;
}

#footer{
    position: relative;
    color: #fff;
}

#logo{
    position: absolute;
    top: 40px;
    left: 30px;
}

body.home #header{
    height: 170px;
    position: relative;
    z-index: 10;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:43:56.993

在`js/custom.js`第 144 行

`$('.home #header').height($('#headline').height() + 430);`

这添加了一个内联样式来修改`#header`.

# c# - 创建子域？

> ID：14400673
> 
> 赞同：0
> 
> 时间：2013-01-18T14:11:18.773
> 
> 标签：c#, .net-2.0, subdomain

在某些网站中，我发现我可以通过 C# WinForm 应用程序以编程方式为我拥有的网站创建一个子域。

给定服务器主机、用户和密码，如何在我的网站上创建子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:14:52.923

我为一家拥有 30,000 个域的公司编写了一个程序来编辑 DNS 记录，并使用 WMI 来编辑记录。

您的起点是[DNS WMI Provider Samples](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682130%28v=vs.85%29.aspx)和[这篇关于使用 WMI 编辑 DNS 的文章](http://www.indented.co.uk/index.php/2008/10/23/modifying-dns-records-with-wmi/)。

您可以在 .NET 应用程序中使用 WMI - 尽管有许多示例用于 Powershell 等。

# mocking - Moq 多个实例正在注入错误的属性

> ID：14400674
> 
> 赞同：0
> 
> 时间：2013-01-18T14:11:19.147
> 
> 标签：mocking, moq

我有以下合同，它在运行时获取注入的属性：

```
public interface IBroker
{
   IDriver Driver { get; }
}

public interface IDriver
{
   void Save();
}

public class FileDriver : IDriver { }
public class SqlDriver : IDriver { } 
```

我正在一次性准备我的模拟，因为测试适应度非常大，并且我正在通过以下方式准备我的经纪人的两个版本：

```
var mockFileBroker = new Mock<IBroker>();
mockFileBroker.Setup(x => x.Driver).Returns(new FileDriver());

var mockSqlBroker = new Mock<IBroker>();
mockSqlBroker.Setup(x => x.Driver).Returns(new SqlDriver()); 
```

问题是，当我调查属性**Driver**时，两个模拟的类型始终为 SqlDriver ......所以看起来**Moq**总是使用最新注册来解决合同 IDriver ......我能做些什么来避免这种行为?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:35:42.887

Moq 将返回最新的注册，但仅限于同一对象。

仔细检查您没有在某处使用错误的代理，或者您在某处错过了模拟并且生产代码正在重新设置您的驱动程序。

帕特里克斯蒂尔提出了一个很好的观点，你也应该考虑模拟返回`IDriver`，特别是单元测试通常应该避免使用文件系统和数据库。

# asp.net - PayPal IPN 缺少字段

> ID：14400677
> 
> 赞同：2
> 
> 时间：2013-01-18T14:11:19.787
> 
> 标签：asp.net, paypal, paypal-ipn

我正在努力实施 PayPal 的即时付款通知。我确实收到了来自 PayPal 的 IPN 请求，但它只是没有 PayPal 所说的字段。例如，没有“mc_gross”、“payment_gross”或“txn_id”。如果缺少所有这些字段，我应该如何验证 IPN？

使用 PayPal 沙盒网站上的即时支付通知 (IPN) 模拟器会产生一个完全不同的 IPN（当然，它包含 API 文档中提到的所有字段）。

我正在使用“自适应支付”API，并将其设置为只执行一个非常简单的 PAY 操作（否则效果很好）。我现在整天都在阅读 SO 和互联网上的帖子，但我就是不知道出了什么问题。

这是我的 IPN 处理程序的 Request.Params 数组的转储（省略了不相关的变量）：

```
payment_request_date => Fri Jan 18 05:50:04 PST 2013
return_url => http://MYHOST/ReturnUrl
fees_payer => EACHRECEIVER
ipn_notification_url => http://MYHOST/PayPal.aspx
sender_email => sender_acc_pre@gmx.net
verify_sign => AoIh-cQwnxZ7nSmfalIL7L182SDTA2JKiIrVnwt.uetdGX.Jw0bG2C1f
test_ipn => 1
transaction[0].id_for_sender_txn => 66X080248E331472D
transaction[0].receiver => some_email_biz@gmx.net
cancel_url => http://MYHOST/CancelUrl
transaction[0].is_primary_receiver => false
pay_key => AP-28U75135KE1302901
action_type => PAY
transaction[0].id => 96E03111D3558372G
memo => This is a sandbox test payment
transaction[0].status => Completed
transaction[0].paymentType => SERVICE
transaction[0].status_for_sender_txn => Completed
transaction[0].pending_reason => NONE
transaction_type => Adaptive Payment PAY
transaction[0].amount => EUR 30.25
status => COMPLETED
log_default_shipping_address_in_transaction => false
charset => windows-1252
notify_version => UNVERSIONED
reverse_all_parallel_payments_on_error => false
ALL_HTTP => HTTP_CONTENT_LENGTH:1102
HTTP_CONTENT_TYPE:application/x-www-form-urlencoded
HTTP_HOST:92.231.161.192 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:49:07.250

自适应支付 IPN 与您的典型 IPN 略有不同。

使用自适应支付，您的应用程序有自己的 IPN 通知程序，与接收方帐户分开。您的应用程序只是收到交易发生的通知，并且根本没有像您发现的那样为您提供有关项目、定价等的详细信息。

接收者的帐户将获得一个单独的 IPN（如果他们配置了它），其中包含您希望看到的字段。

在您的情况下，您需要做的是将交易数据作为“待处理”或任何您想要调用的数据保存到您的数据库中，然后根据交易 ID 关联回传入的 IPN 数据。

# sql - 声明 SQLite 变量

> ID：14400679
> 
> 赞同：0
> 
> 时间：2013-01-18T14:11:23.593
> 
> 标签：sql, variables, stored-procedures, sqlite

有没有办法在 SQLite 中声明变量。我正在使用 C# 和 Objective C 的组合，它们都支持添加参数，但是我如何通过控制台或 DBMS ( [Database.NET](http://fishcodelib.com/database.htm) ) 声明变量。通常的语法`DECLARE @age INT = 3`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:14:39.867

单独的 sqlite 不支持存储过程。做你想做的最好的方法是在你的代码中参数化一个 SQL 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:14:18.147

看看这个：[Declare variable in sqlite and use it](https://stackoverflow.com/questions/7739444/declare-variable-in-sqlite-and-use-it)：

尝试使用绑定值。您不能像在 T-SQL 中那样使用变量，但可以使用“参数”。我希望以下链接有用。绑定值

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-02-11T22:43:14.090

The following additional commands are supported in Database .NET:

1.  Binding SQL variables (SELECT statements only):
    **@varname**, **:varname**, **?varname**
    e.g.
    SELECT * FROM TABLE WHERE COL1=**@varname**

2.  Self-defined SQL variables:
    (Specifying a fixed variable) **:setvar "value"**
    (Specifying a dynamic variable) **:setvar**
    (Using a variable) **$(varname)**
    e.g.
    **:setvar FixedVar "%e%"
    :setvar DynamicVar**
    SELECT * FROM [Categories] WHERE [CategoryName] LIKE '**$(FixedVar)**' AND [CategoryID]=**$(DynamicVar)**

# algorithm - 如何进行实用的文本语音编码

> ID：14400688
> 
> 赞同：1
> 
> 时间：2013-01-18T14:11:47.977
> 
> 标签：algorithm, language-agnostic

我得到了用户从智能手机、哑机或电脑键盘上缩短的文本实体。这使得他们对“jstn”的搜索无法检索到“Justin Roberts”。如果他们输入“csr”，则“caesar”必须出现在自动建议中。

在预期中，我想将正确拼写的单词编码为一个或多个可能的“文本说话”术语，以便当用户输入它们时，我们可以检索、匹配和建议正确的术语。

以下是我必须考虑的一些变体拼写：

```
justin -> jst, jstn, jtn
april -> apr, aprl
swedish -> swed swd
banglore -> blore
katrina -> kat 
```

* * *

有哪些好的方案可以对术语进行编码，以便它们的文字和缩短的单词也可以匹配它们？我能想到：

删除元音：april -> aprl

删除元音并跳过一些辅音：banglore -> bnglr, bglr

[Metaphone](http://www.doughellmann.com/articles/how-tos/phonetic-hashing/index.html)为发音相似的单词生成相同的哈希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:23:48.417

我不确定为这项任务拥有一个静态数据库是否是一种好方法。可能有数百万个可能的“文本说”术语，当每周可能“发明”数百个新术语时，您真的认为您可以将它们全部收集并让您的数据库保持最新吗？

我宁愿考虑使用评分系统来实现它。首先，您需要一个“已知单词”列表。如果您想手动管理此列表，则可以限制为几百个单词。另一方面，它也可能很大，例如，您可以从英语词典中获取所有单词，包括几个包含常见名字和姓氏的列表，以及常见的公司和产品名称（例如，注册商标列表将涵盖大多数公司和产品名称）。当然，这也是一个可能需要定期更新的数据库，但至少您只需要更新已知单词，而不是所有“文本说”术语。请注意，在某些系统上，您可以使用内置的拼写检查词典，这些词典已经为您提供了大量已知单词。

除了保留大量的“文本说”术语，您还尝试按照一组规则将用户输入的任何内容与您的已知单词列表相匹配：

1.  “text-speak”一词的所有字母都必须出现在单词中。
2.  所有字母的出现顺序必须与“text-speak”术语中的顺序相同。

仅这些规则就已经消除了许多不可能的单词。现在对于剩余的单词，您需要一种方法来确定这是用户所指单词的可能性。这就是评分系统发挥作用的地方。您尝试使用某种启发式方法来猜测哪个词更有可能。

例如，所有剩余的单词得分为 0。对于每两个连续的“text-speak”字母在剩余的单词中也是连续的（中间没有其他字母被遗漏），你将分数增加 2，因为这使得词的可能性更大。对于在剩余单词中不连续但中间只有元音的每两个连续的“文本说话”字母，您将分数增加 1，因为这仍然使命中的可能性更大，但可能性不如在之前的情况下。等等。您可能还会想到导致负分的条件，再次降低单词的分数。例如，单词根据它们的长度与“text-speak”术语的长度之间的比率获得负分。

这种启发式永远不会有完美的结果，但如果你调整好你的得分，它可以有很好的结果。例如`apr`匹配`april`，但它也匹配`aprilfool`，根据上述规则`april`获胜，因为它更短且更接近 的长度`apr`。`jst`会匹配`just`但也`justin`。在那种情况下`just`会赢，这可能是不正确的，但它也可能是正确的，因为我已经看过很多次了`jst`。`just`当然，`just`在您的情况下可能没有意义，所以不要将它添加到已知单词列表中。要获得一个好的评分系统，只需实施它，然后通过添加或删除评分规则以及在规则匹配的情况下更改添加或减去的分数来开始对其进行微调。你玩得越多，它就会越好。

另请记住，如果有疑问，您可以询问用户。例如，如果用户键入`jst`，您会显示一个带有`Justin`,的命中列表，`Justine`并且该列表上的第一个命中始终显示为自动建议，但用户也可以指向第二个列表条目以完成该条目。作为奖励，您可以使评分系统成为学习评分系统。`jst`如果用户到目前为止搜索了十次，并且每次`Justine`从列表中选择，never `Justin`，看起来用户宁愿搜索而不是`Justine`搜索`Justin`。在这种情况下，您可能会记住该选择并给予`Justine`一些额外的奖励积分，这样它就会永远获胜`Justin`在将来。用户采用这种学习评分系统，因为它会随着时间的推移了解用户在输入特定“文本说”术语时的确切含义。

顺便说一句，例如评分系统是大多数垃圾邮件过滤器在服务器和客户端软件中的工作方式。如果用户自己将某些内容标记为垃圾邮件或取消标记被错误标记为垃圾邮件的内容，则包括“学习能力”。一开始，大多数垃圾邮件过滤系统都可以，但不是很好。如果您继续使用并“训练”它们更长的时间，它们会变得越来越好，最终，它们在 99% 的情况下都是正确的。

# php - 访问数组和/或对象

> ID：14400691
> 
> 赞同：0
> 
> 时间：2013-01-18T14:11:57.493
> 
> 标签：php, drupal

**我自己解决了... 10 分钟后。**

```
$varbgimg = $row->_field_data['nid']['entity']->field_slideimage['und'][0]['uri']; 
```

是我用的吗...

~~希望可以有人帮帮我。如何访问**'uri' => 'public://veglo8.jpg'**？~~

这是来自 Drupal 和 Views 模块。如果有人甚至可以帮助我实现我的最终目标，我将不胜感激......

~~我在 Views 中有一个名为**slideimage**的字段。我想添加一个*style="background-image:url(**图像字段 URL** );"* 到我的分区。试图重写输出，但它剥夺了风格......~~

提前致谢。

```
stdClass::__set_state(array(
   'nid' => '20',
   'node_title' => 'Test 1',
   'field_data_field_slideimage_node_entity_type' => 'node',
   'field_data_body_node_entity_type' => 'node',
   '_field_data' => 
 array (
   'nid' => 
   array (
    'entity_type' => 'node',
    'entity' => 
    stdClass::__set_state(array(
     'vid' => '20',
     'uid' => '1',
     'title' => 'Test 1',
     'log' => '',
     'status' => '1',
     'comment' => '1',
     'promote' => '0',
     'sticky' => '0',
     'nid' => '20',
     'type' => 'test',
     'language' => 'und',
     'created' => '1358336066',
     'changed' => '1358337923',
     'tnid' => '0',
     'translate' => '0',
     'revision_timestamp' => '1358337923',
     'revision_uid' => '1',
     'body' => 
    array (
      'und' => 
      array (
        0 => 
        array (
          'value' => 'Body text here',
          'summary' => '',
          'format' => 'filtered_html',
          'safe_value' => '
Body text here',
          'safe_summary' => '',
        ),
      ),
    ),
     'field_slideimage' => 
    array (
      'und' => 
      array (
        0 => 
        array (
          'fid' => '8',
          'alt' => '',
          'title' => '',
          'width' => '624',
          'height' => '390',
          'uid' => '1',
          'filename' => 'veglo8.jpg',
          'uri' => 'public://veglo8.jpg',
          'filemime' => 'image/jpeg',
          'filesize' => '27393',
          'status' => '1',
          'timestamp' => '1358336725',
          'rdf_mapping' => 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:17:31.410

您可以使用它`file_create_url`来转换`public://...`为真实世界的 URL。

`$real_url = file_create_url($img_src);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:06:48.393

我过去曾`pathinfo()`为此使用过该功能。

[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)

您可以通过替换`user-picture[0]['uri']`为您的图像 url 以编程方式应用样式。我认为您甚至可以将整个 public:// url 放在那里，它也可以正常工作。

```
THUMBNAIL_STYLE = 'thumbnail'; 

// now get the full image url from the uri and the style
$default_thumbnail = image_style_url($THUMBNAIL_STYLE, $user->picture[0]['uri']); 
```

[http://drupal.org/node/1425836](http://drupal.org/node/1425836)

# masm - 显示 PSW 内容

> ID：14400695
> 
> 赞同：0
> 
> 时间：2013-01-18T14:12:05.000
> 
> 标签：masm, x86-16, masm32

我是 asm 的初学者，所以我一直在研究我的问题，但答案并不令人满意。我想知道如何在标准输出上显示 PSW 内容。其他的，如何显示指令指针值？如果 ypu 能给我一个提示（或者更好的代码），我将非常感激。它也可能是masm或8086（实际上我不知道有什么区别:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:58:39.143

指令指针在 x86 系列上不能直接访问，但是，检索它的值非常简单——尽管它永远不会准确。由于子程序调用将返回地址放在堆栈上，因此您只需从那里复制它并 violá！您有以下`call`指令的操作码地址：

```
proc getInstructionPointer
    push bp
    mov bp,sp

    mov ax,[word ptr ss:bp + 2]

    mov sp,bp
    pop bp
    ret
endp getInstructionPointer 
```

x86 上的 PSW 称为标志寄存器。有两个明确引用它的操作：`pushf`和`popf`. 正如您可能已经猜到的那样，您可以简单地将标志压入堆栈并将其加载到您喜欢的任何通用寄存器中：

```
pushf
pop ax 
```

显示这些值包括将它们的值转换为 ASCII 并将它们写入屏幕。有几种方法可以做到这一点 - 搜索“字符串输出程序集”，我敢打赌你会找到答案。

消除一个小混淆：8086 是 CPU 本身，而 MASM 是汇编器。语法是特定于汇编器的；MASM 程序集是 x86 程序集。TASM 程序集也是 x86 程序集，就像 NASM 程序集一样。当一个人说“x86 汇编”时，他/她指的是这些（或其他）中的任何一个，谈论的是指令集，而不是方言。

*请注意，以上示例是 16 位的，用于 8086，不适用于 32 位模式下的 80386+*

# android - 操作栏中的矩形图标

> ID：14400709
> 
> 赞同：1
> 
> 时间：2013-01-18T14:12:59.357
> 
> 标签：android, icons, android-actionbar

我需要在 ActionBar 中显示一个矩形图标，但它会将我调整为方形尺寸，并且它变得非常小，我看不到它。有谁知道以常规矩形尺寸显示它的方法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:15:35.090

使用[操作视图](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)而不是常规操作项。在您使用的布局资源中`android:actionLayout`，有一个`ImageView`或`ImageButton`或指向您的矩形图标的东西。

# ajax - 跨站点脚本要求使我的 API 无用

> ID：14400710
> 
> 赞同：0
> 
> 时间：2013-01-18T14:13:10.287
> 
> 标签：ajax, cross-domain, asp.net-web-api, xss

也许我只是不理解这一点，但这对我来说似乎没有意义。我有一个暴露 ASP.NET WebApi 的 MVC4 项目。在该项目中调用 API 效果很好，但显然从另一个正在运行的项目（在另一个端口上）调用它需要跨站点脚本。

但这是我的问题：这不会破坏 API 的目的吗？如果我想从我的站点调用 reddit API，这被认为是跨站点脚本这一事实使得它不仅是一种糟糕的安全实践，而且在某些情况下是不可能的。

如果需要 XSS 来执行此操作，那是否会使 AJAX 作为一个整体变得毫无用处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:36:02.177

传统上，大多数应用程序都有服务器和客户端组件。服务器组件将完成所有繁重的工作，包括向其他 API 发出请求。由于 API 请求是在服务器端完成的，因此请求可以发送到任何远程 API 服务器。从来没有考虑过从客户端访问 API，因为人们希望服务器这样做。

近年来，我们看到越来越多的功能从服务器推送到客户端，特别是通过 JavaScript。[但是由于浏览器的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，发出远程请求是无法转移到客户端的事情之一。所以并不是说 API 的目的被打败了，而是我们现在正在以我们以前没有想到的方式使用 API。

浏览器突然忽略同源策略是不负责任的。这将破坏成千上万个依赖同源策略来确保安全的站点。因此，W3C 提出了[跨域资源共享](http://www.w3.org/TR/cors/)(CORS) 规范。CORS 规范允许跨域发出请求，但通过让服务器对谁可以访问 API 拥有最终决定权来安全地做到这一点。这使得跨域请求成为可能，而不会破坏现有的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:24:36.527

**Simple answer:** Of course not!! Pretty much the whole of the modern web is built on AJAX, if it was so pointless it would never have gone from a MS proprietary API to being the backbone of web 2.0 and all that has come since.

**Complex answer:** Firstly, [XSS](http://en.wikipedia.org/wiki/Cross-site_scripting) is a form of attack/vulnerability, not a form of request. What you're referring to is the [same-origin policy](http://en.wikipedia.org/wiki/Same_origin_policy), which limits AJAX requests to the same domain, for security reasons.

[JSONP](http://en.wikipedia.org/wiki/JSONP) is typically used to make async requests to third party APIs. Your *own* API will typically sit on the same domain as your website so you will not have problems. If your API must be on another domain, you can either look at [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) or setup of a [transparent](http://en.wikipedia.org/wiki/Proxy_server#Transparent_proxy) [reverse](http://en.wikipedia.org/wiki/Reverse_proxy) proxy to forward your requests to another server.

Hopefully this all makes sense, it'll at least give you a good foundation of knowledge to build from.

# c# - C# - 列表排序 - x 和 y

> ID：14400717
> 
> 赞同：3
> 
> 时间：2013-01-18T14:13:33.940
> 
> 标签：c#, .net, linq, list, lambda

我有这段代码，我知道它正在对列表进行排序`lstDMV`。但请帮我分解一下。

```
lstDMV.Sort((x, y) => DateTime.Compare(x.NotifDate, y.NotifDate)); 
```

是什么`=>`意思？它是如何根据比较函数返回的整数工作的？

`lstDMV`如果我排序整数而不是日期，我该如何排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:17:03.630

它被称为[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。对于比较本身，请查看[DateTime.Compare](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)方法。查看它的返回值：

*   < 0 --> t1 早于 t2
*   0 --> t1 与 t2 相同
*   > 0 --> t1 晚于 t2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:17:34.393

它被称为[*`lambda operator`*](http://msdn.microsoft.com/en-us/library/bb311046.aspx)。来自*MSDN*；

> => 标记称为 lambda 运算符。它在 lambda 表达式中用于将**左侧的输入变量与****右侧**的 lambda 主体分开。Lambda 表达式是类似于匿名方法但更灵活的内联表达式；它们广泛用于以方法语法表示的 LINQ 查询。

对于排序操作，使用[`Sort()`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)这样的方法；

```
lstDMV.Sort((int1, int2) => int1.CompareTo(int2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T14:18:29.350

lambda 运算`=>`符

```
lstDMV.Sort((x, y) => DateTime.Compare(x.NotifDate, y.NotifDate)); 
```

基本上用一段代码创建一个新的委托来执行。x 和 y 作为参数过去。

您可以通过将代码更改为来对 int 列表进行排序

```
lstDMV.Sort((x, y) => x.CompareTo(y)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:18:38.013

=> 是一个 lambda 表达式运算符，您可以将其视为 javascript 中的匿名函数

在这种情况下

lstDMV.Sort((x, y) => DateTime.Compare(x.NotifDate, y.NotifDate)); 它正在创建一个用作 Sort 事件处理程序的函数。编译器可以推断出 x 和 y 的类型，因为它知道 Close 委托的定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T14:18:44.173

首先，这些是 Lambda 表达式。现在回答您的问题： => 是一个定义返回值的运算符。

在您的情况下`(x,y)`，将返回`DateTime.Compare(x.NotifDate, y.NotifDate)`. 现在`Sort()`，您的 List 的 - 函数将以某种方式根据 的值对 List 进行排序`DateTime.Compare(x.NotifDate, y.NotifDate)`。

看看 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx) 很有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T14:20:29.667

（其他人已经回答了[`lambda operator`](http://msdn.microsoft.com/en-us/library/bb311046.aspx)你问题的一部分）

> 如果我排序整数而不是日期，我该如何排序我的 lstDMV？

```
ints.Sort((i1, i2) => i1.CompareTo(i2)); 
```

# arrays - 在带有数组的 for 循环中使用 setTimeout 的问题

> ID：14400718
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:13:36.740
> 
> 标签：arrays, loops, for-loop, settimeout, setinterval

- - 更新 - -

这是另一种尝试...问题似乎是由于 setTimeout 延迟，动画仅发生在我假设的 for 循环数组中的第三项上。如何延迟每个项目 (3) 的动画触发？

```
// Breadcrumb Animation

(function(){
    var header = document.getElementById("header"),
        header2 = document.getElementById("header-secondary"),
        banner = document.getElementById("banner");
    var bcLink = [header, header2, banner];
    var myTime = '';
    var myItem = '';
    function delay() {
        setTimeout(fadeIn, myTime);
        function fadeIn() {
            if( myItem.style.opacity !== '1' ) {
                console.log(myItem);
                setInterval(function(){
                    myItem.style.opacity = parseFloat(myItem.style.opacity) + 0.1;
                }, 100);
            }
        }
    }
    var i, len=bcLink.length;
    for(var i = 0; i < len; i++) {
        bcLink[i].style.opacity = 0;
        myItem = bcLink[i];
        myTime = myTime = parseInt(myTime + 2000)
        delay();
    }

})(); 
```

--- 结束更新 ---

下面的代码有效，但我试图通过创建一个循环遍历每个项目的 foo 循环来优化我的代码（我的尝试已被注释掉）。我目前在我的页面上使用 3 个项目（标题、标题 2、横幅），它们将一个接一个地加载，但第二个项目不应该在第一个加载之前开始，第三个不应该在第二个项目加载之前开始，依此类推. 此代码最终将用于项目数量不确定但仍会一个接一个加载的面包屑。任何帮助是极大的赞赏。

```
 (function(){
        var header = document.getElementById("header"),
            header2 = document.getElementById("header-secondary"),
            banner = document.getElementById("banner");
        var bcLink = [header, header2, banner];
        var myTime = '';
        function fadeIn(name, speed) {
            if( name.style.opacity !== '1' ) {
                setInterval(function(){

                    name.style.opacity = parseFloat(name.style.opacity) + 0.1;
                }, speed);
            }
        }
        function delay(funct, time) {
            setTimeout(function() {funct}, time);
        }
            bcLink[0].style.opacity = 0;
            bcLink[1].style.opacity = 0;
            bcLink[2].style.opacity = 0;
            setTimeout(function(){fadeIn(bcLink[0], 100)}, 0);
            setTimeout(function(){fadeIn(bcLink[1], 100)}, 1000);
            setTimeout(function(){fadeIn(bcLink[2], 100)}, 2000);
//      for(var i = 0; i < bcLink.length; i++) {
//          bcLink[i].style.opacity = 0;
//          delay(fadeIn(bcLink[i],100), i + 000);
//      }
    })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:25:33.657

use jQuery animation queue, not timeout.

[http://blog.bigbinary.com/2010/02/02/understanding-jquery-effects-queue.html](http://blog.bigbinary.com/2010/02/02/understanding-jquery-effects-queue.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:03:41.023

尝试改变：

```
delay(fadeIn(bcLink[i],100), i + 000); 
```

至：

```
setTimeout(function(){fadeIn(bcLink[i], 100)}, i * 1000); 
```

# java - Java中的<>符号是什么

> ID：14400719
> 
> 赞同：-8
> 
> 时间：2013-01-18T14:13:38.417
> 
> 标签：java, generics

> **可能重复：**
> [Map<?, ?> 在 Java 中是什么意思？](https://stackoverflow.com/questions/6777936/what-does-map-mean-in-java)
> [Java 泛型 - 这个语法有什么用？](https://stackoverflow.com/questions/13238150/java-generics-what-is-this-syntax-for)

例如，我想知道该符号`< >`在 Java 中的作用。

```
public static class Map extends MapReduceBase 
    implements Mapper<LongWritable, Text, Text, IntWritable> 
```

我不是任何形式的Java专家。`< >`我希望您能对使用该符号背后的原因提供一些明确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:15:33.180

它表示泛型。`Mapper`是一个泛型，并且您继承自`Mapper<LongWritable, Text, Text, IntWritable>`，这是专门针对这些类型的泛型。

就像`Vector`- 也是通用的 - 你可以拥有`Vector<Object>`and `Vector<SomeOtherClass>`。

# iphone - iOS 6 和 iOS 5 中具有“安全”属性的 UITextfield 的退格功能

> ID：14400724
> 
> 赞同：2
> 
> 时间：2013-01-18T14:13:52.020
> 
> 标签：iphone, ios, ipad, ios5, ios6

我有一个启用属性`UITextfield`的输入密码。`SECURE`

当用户`UITextfield`在输入一定数量的字符后在外面点击，然后再次点击回到`UITextfield`编辑时，会发生以下行为：

iOS 5.1 - 当我尝试从 中删除一个字符（使用`backspace`键盘）时`UITextfield`，最后一个字符被删除。

iOS 6.0 - 当我尝试从 中删除一个字符时`UITextfield`，所有键入的字符都将被删除。

我做错了什么，还是这是 iOS 6 中的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T11:04:05.517

这是 iOS6 下的预期行为，您不应该更改它。

如果出于某种原因你真的需要这个，你可以覆盖`UITextField`的委托方法`textField:shouldChangeCharactersInRange:replacementString:`并恢复旧的行为：

```
#import "ViewController.h"

@interface ViewController () <UITextFieldDelegate>
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.passwordField.delegate = self;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (range.location > 0 && range.length == 1 && string.length == 0)
    {
        // iOS is trying to delete the entire string
        textField.text = [textField.text substringToIndex:textField.text.length - 1];
        return NO;
    }
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T18:42:51.510

iOS 6 也有关于这种新行为的问题。试试这个：

1.  导航到具有两个 UITextField 的视图，其中一个是安全的
2.  在非安全文本字段中输入任何内容。
3.  点击安全文本字段，不要输入或删除任何内容。回到非安全领域
4.  按退格键一次

中提琴！现在，您的文本字段中没有任何内容。我能够与 iOS 6.0.x 和 6.1 一致地重现这一点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-16T20:49:36.540

看起来这可以通过在 viewDidLoad 或附近将secureTextEntry 显式设置为NO 来解决。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.textField.secureTextEntry = NO;
} 
```

这似乎适用于 iOS 6 下的上述情况（带有电子邮件字段和安全密码字段的视图）。

！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T03:16:39.697

这是一种检测安全字段是否将被退格键清除的方法：

[iOS 6 UITextField Secure - 如何检测退格清除所有字符？](https://stackoverflow.com/questions/16765334/ios-6-uitextfield-secure-how-to-detect-backspace-clearing-all-characters)

# windows - Windows Direct2D、OpenGL 或什么的更好的图形？

> ID：14400725
> 
> 赞同：1
> 
> 时间：2013-01-18T14:13:55.463
> 
> 标签：windows, graphics, euler-math-toolbox

我有一个旧的大型应用程序，我想用更好、更快的图形对其进行更新。应用程序（Euler Math Toolbox）需要一个快速的图形，但也需要一个好看的图形。我希望至少有抗锯齿，也许还有透明度。

目前我在屏幕外绘制位图，并在重绘事件时将内容复制到屏幕。对于抗锯齿，我生成了一个更大的位图，我将其缩小以进行显示。

那么，我最好的现代化方法是什么？感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:22:19.787

如果仅计划使用 Windows，Direct2D 会更好。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd535473%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd535473%28v=vs.85%29.aspx)

# windows-phone-7 - toolkit:ListPicker - 扩展框的样式

> ID：14400728
> 
> 赞同：2
> 
> 时间：2013-01-18T14:14:05.500
> 
> 标签：windows-phone-7, silverlight-toolkit

我有一个背景设置为黑色的应用程序。在这个应用程序中，我想要一个`toolkit:ListPicker`.

问题是 ListPicker 使用您手机的主题来设置包含所有项目的扩展框的背景。结果如下：

**手机中的深色主题：**一切正常。列表框是灰色的，当我点击它时会展开一个白色框，其中包含所有项目。

**手机中**的浅色主题：列表框是黑色的（现在不可见），文本也是黑色的（并且不可见）。当我点击该框时，我可以看到所选项目呈蓝色，其余项目是，是的，黑色且不可见。

Background 属性只设置列表框的背景，而不是当我点击列表框时出现的扩展框。

有什么方法可以给扩展盒设置样式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:01:51.797

我遇到了同样的问题伙伴，解决我的问题的是这篇[文章](http://www.windowsphonegeek.com/tips/listpicker-fullscreen-mode-background-problem-workaround)。

如果你有一个，请检查文本框会发生什么

# go - CryptoJS.AES 和 Golang

> ID：14400729
> 
> 赞同：5
> 
> 时间：2013-01-18T14:14:06.957
> 
> 标签：go, cryptojs

我已经设法通过 rsa 共享一个随机对称密钥。但是我无法使用它进行 aes 加密。问题似乎是cryptoJS使用的盐和初始化向量。

首先，它的输出如下：

```
U2FsdGVkX19wbzVqqOr6U5dnuG34WyH+n1A4PX9Z+xBhY3bALGS7DOa/aphgnubc 
```

遗憾的是，谷歌搜索重复出现的“U2FsdGVkX”或“cryptoJS.AES 输出”是没有用的。

另一方面，golang 的 aes 只需要一个 32 位的密钥和每个 32 位长度的输入。这意味着我必须以某种方式将上述内容拆分为相应的块并弄清楚如何从密钥和上面的数据（可能包括盐 + 初始化向量）中创建 32 位密钥。

可悲的是， [http://code.google.com/p/crypto-js](http://code.google.com/p/crypto-js)和任何谷歌搜索都没有为我提供解决方案。

顺便说一句 - 我现在的加密：

```
var arr = new Array(32);
symetricKey = "";
var symHex = "";
rng.nextBytes(arr);
for(var i = 0; i < arr.length; i++){
    symetricKey += String.fromCharCode(arr[i]);
    //symHex= arr[i].toString(16), added a 0 if needed (so length always increases by 2)
}
//submit symetric via rsa. This is working, the server gets that key
var enc = CryptoJS.AES.encrypt(unencrypted, symetricKey)
//submit enc, stuck now - what to do with it on the server? 
```

**编辑：**在 Base64 响应之后：
感谢 base64 输入。
但是，我仍然无法将其投入使用。
特别是因为编码的字符串以“SALTED”开头，我相信这可能存在问题。

我现在尝试编码的方式：
在客户端上通过以下方式编码：

```
var unencrypted = "{mail:test,password:test}"
var enc = CryptoJS.AES.encrypt(unencrypted, symKey) 
```

在服务器上，变量 enc 和 symKey 与客户端相同：

```
baseReader := base64.NewDecoder(base64.StdEncoding, strings.NewReader(enc))
encData, err := ioutil.ReadAll(baseReader)
//if err != nil { ....}, doesn't happen here
cipher, err := aes.NewCipher(symKey)
//if err != nil { ....}, doesn't happen here
byteData := make([]byte, len(encData))
cipher.Decrypt(byteData, encData)
fmt.Println("Dec: ", string(byteData))
//Outputs unrepresentable characters 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T16:59:46.430

CryptoJS.AES.encrypt 的输出是一个 CipherParams 对象，其中包含密钥、IV、可选盐和密文。您引用的字符串是与 OpenSSL 兼容的格式化字符串。

```
var encrypted = CryptoJS.AES.encrypt("Message", "Secret Passphrase");

alert(encrypted.key);        // 74eb593087a982e2a6f5dded54ecd96d1fd0f3d44a58728cdcd40c55227522223
alert(encrypted.iv);         // 7781157e2629b094f0e3dd48c4d786115
alert(encrypted.salt);       // 7a25f9132ec6a8b34
alert(encrypted.ciphertext); // 73e54154a15d1beeb509d9e12f1e462a0

alert(encrypted);            // U2FsdGVkX1+iX5Ey7GqLND5UFUoV0b7rUJ2eEvHkYqA= (OpenSSL-compatible format strategy) 
```

CryptoJS 的默认加密模式是 CBC。您应该在 RSA 加密交换期间将 IV 与对称密钥一起传递。使用服务器上的对称密钥、IV 和密文字节数组，您可以在 Go 中对其进行解密，如下所示：

```
c, err := aes.NewCipher(key)
cfbdec := cipher.NewCBCDecrypter(c, iv)
plaintext := make([]byte, len(ciphertext))
cfbdec.CryptBlock(plaintext, ciphertext) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:44:55.123

```
U2FsdGVkX19wbzVqqOr6U5dnuG34WyH+n1A4PX9Z+xBhY3bALGS7DOa/aphgnubc 
```

该数据是经过`base64`编码的，原始的看起来像这样：

```
Salted__po5jSgm[!P8=Yacv,dj` 
```

（请注意，该字符串中有不可表示的字符）

这正好是 32 个字节长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-14T15:21:39.603

虽然，它不直接，但也许你会发现看看[https://github.com/dgryski/dkeyczar](https://github.com/dgryski/dkeyczar)很有用。

[它对KeyCzar](http://www.keyczar.org/)的 Go 实现，开源加密工具包最初由 Google 安全团队的成员开发

我希望你能从这个项目中学到一些东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:56:12.277

我们可能需要解决一些问题。

首先，您需要确保为 encrypt() 提供正确类型的参数。看起来您可能已经在评论中意识到您需要执行 CryptoJS.enc.Hex.parse(symetricKeyHex)，尽管您的原始帖子尚未反映这一点。

其次，您需要决定如何在两端获得或创建 IV。如果您使用密码短语，CryptoJS 可以创建一个，但您尝试使用实际密钥而不是密码短语。这意味着您必须像设置密钥一样设置 IV。

最后，您必须决定如何传输 IV 和密文。一个典型且简单的解决方案是将 IV 添加到密文中，但实际上任何易于序列化/不可序列化的东西都可以正常工作。只要确保你决定的任何格式在两端都是一致的。

# makefile - 如何使用单个 Makefile 定位多个目录？

> ID：14400732
> 
> 赞同：3
> 
> 时间：2013-01-18T14:14:16.207
> 
> 标签：makefile, less

我正在使用 GNU Make 构建三个不同版本的静态 html 文档。

我使用 Less 作为 CSS 预处理器。

我的目录结构如下所示：

```
Makefile
160x600/style.less
300x250/style.less
728x90/style.less 
```

这是我的 Makefile：

```
LESSC=lessc -x # use -x for debugging

.PHONY: all clean

all: 160x600 300x250 728x90

%.css: %.less
    $(LESSC) $< > $@

160x600: 160x600/style.css
300x250: 300x250/style.css
728x90: 728x90/style.css

clean:
    rm -f 160x600/*.css
    rm -f 300x250/*.css
    rm -f 728x90/*.css 
```

这样，我可以使用`make 160x600`style.less 构建 style.css。

但我不想明确列出每个目录的目标规则。相反，我尝试添加此规则而不是三个特定于目录的规则：

```
%: %/style.css 
```

但这不起作用。我认为从那个例子中可以清楚地看出我的目标是什么。有没有办法接受任何目录作为目标，所以我只需要在`all:`规则中列出目录名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:23:38.483

使用[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)：

```
res_dirs = 160x600 300x250 728x90

$(res_dirs): %: %/style.css 
```

# php - 在数组php中随机播放

> ID：14400734
> 
> 赞同：2
> 
> 时间：2013-01-18T14:14:31.617
> 
> 标签：php, arrays, shuffle

如何洗牌数组中的数组？我尝试了很多方法，但我无法实现。我认为这很简单，但我坚持这一点。

```
Array
(
    [2] => Array
        (
            [0] => 12011190
            [1] => 12011158
            [2] => 12011583
            [3] => 12012107
            [4] => 12011222
            [5] => 12010638
            [6] => 12013836
            [7] => 12012232
            [8] => 12011256
            [9] => 12010007
            [10] => 12012531
            [11] => 12012182
            [12] => 12013253
        )

    [6] => Array
        (
            [0] => 12011565
            [1] => 12010020
            [2] => 12011352
            [3] => 12014366
            [4] => 12011879
            [5] => 12011449
        )
) 
```

我想在数组中洗牌。希望解释一下...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T14:16:22.937

据我所知，你可以这样做（假设你想独立地洗牌每个子阵列）：

```
foreach($array AS &$element) {
    shuffle($element);
} 
```

或者可能是这样的：

```
array_walk($array, function(&$value, $key) {
    shuffle($value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:19:27.070

这是您可以使用的递归多级函数。

```
function shuffle_array($arr) {
    if (!is_array($arr)) return $arr;
    shuffle($arr);
    foreach ($arr as $key => $a) {
        if (is_array($a)) {
            $arr[$key] = shuffle_array($a);
        }
    }

    return $arr;
}

print_r(shuffle_array($array)); 
```

# mysql - MySQL 在 where 子句中给出未知列错误

> ID：14400736
> 
> 赞同：2
> 
> 时间：2013-01-18T14:14:36.737
> 
> 标签：mysql, sql

这是我无法运行的 SQL 语句：

```
SELECT fm . * , mp.first_name, mp.last_name, mp.image, mp.member_id
FROM featured_members AS fm
JOIN member_profiles AS mp WHERE fm.member_id = mp.member_id
AND fm.member_type_id =6
AND fm.site_id =1 
```

当我运行它时，它给了我`#1054 - Unknown column 'fm.site_id' in 'on clause'`错误

是否存在语法问题，因为 fm 表确实有该 site_id 列，但我不知道为什么 SQL 没有获取它？

我的表结构 `featured_members`是这样的：

```
1 sr_no     
2 member_id     
3 member_type_id 
4 site_id 
```

`member_profiles`结构是：

```
1 member_profile_id 
2 member_id     
3 first_name    
4 middle_name   
5 last_name     
6 gender
7 image 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:16:42.393

你做错了：对于 JOIN，必须使用 ON 子句，除非它是交叉连接。

```
SELECT fm . * , mp.first_name, mp.last_name, mp.image, mp.member_id
FROM   featured_members AS fm
JOIN   member_profiles  AS mp ON ( fm.member_id = mp.member_id )
WHERE fm.member_type_id =6
AND fm.site_id =1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:17:34.983

测试这个：

```
SELECT fm.*, mp.first_name, mp.last_name, mp.image, mp.member_id
FROM featured_members AS fm
LEFT JOIN member_profiles AS mp ON fm.member_id = mp.member_id
WHERE fm.member_type_id =6 AND fm.site_id =1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:38:13.887

您的查询中缺少“on”子句，而 MySQL 需要它。因此，在我看来，Moddom 提供的解决方案是正确的答案。

请参阅[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)和[http://bugs.mysql.com/bug.php?id=13551](http://bugs.mysql.com/bug.php?id=13551)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:41:15.240

试试这个...

```
SELECT fm . * , mp.first_name, mp.last_name, mp.image, mp.member_id
FROM featured_members AS fm, member_profiles AS mp
WHERE fm.member_id = mp.member_id
AND fm.member_type_id =6
AND fm.site_id =1 
```

您的语句中的 JOIN 子句需要相应的 ON ，这是导致错误的原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T10:01:02.677

试试这个：-

```
SELECT fm . * , mp.first_name, mp.last_name, mp.image, mp.member_id <br>
FROM featured_members fm , member_profiles mp <br>
where fm.member_id = mp.member_id <br>
AND fm.member_type_id =6 <br>
AND fm.site_id =1 
```

# android - android canvas onDraw 时序

> ID：14400746
> 
> 赞同：3
> 
> 时间：2013-01-18T14:14:56.077
> 
> 标签：android, timing, ondraw

1.  我正在制作一个 Android 游戏，其中一些图形元素移动得很快。我将使用 Canvas，但担心会在不规则的间隔中调用 onDraw 方法，从而使快速元素以不规则的速度移动。有没有办法确保定期调用 onDraw 方法。

2.  或者，如果我能以毫秒为单位获得系统时间，我可以计算两次连续调用 onDraw 之间的差异，并根据这些快速元素的速度使它们的移动平滑。

请帮助，

萨米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:20:06.793

> 我将使用 Canvas 但担心 onDraw 方法会在不规则的间隔被调用，从而使快速元素以不规则的速度移动

您不应**更新**中对象的位置`onDraw()`，因为：

*   实际上，该方法可能不会以预定义的时间间隔调用
*   它旨在**绘制**对象，而不是更新对象

相反，您可以使用计时器定期调用另一种方法来更新对象/世界。

更新世界后，调用`invalidate()`你`View`的触发`onDraw()`方法。如果您的应用程序有一些空闲时间，它将被调用。如果没有，没问题，因为`world update method`它将继续运行，从而更新你的世界。

（当然，如果您的应用程序*太忙*，则视图永远不会更新，并且您有问题需要解决！）

> 或者，如果我能以毫秒为单位获得系统时间，我可以计算两次连续调用 onDraw 之间的差异，并根据这些快速元素的速度使它们的移动平滑。

这就是‘世界更新法’要走的路！它将纠正不规则的计时器间隔。

# javascript - 基本表单验证功能 checkRadio() 未发布错误消息

> ID：14400748
> 
> 赞同：1
> 
> 时间：2013-01-18T14:15:06.890
> 
> 标签：javascript, html, forms, function, validation

我是 javascript 新手，我正在在线家庭教程中自学。我的 Javacript 教程要求我尝试基本的表单代码。

但是**函数 checkRadio()**没有发布错误消息！（如果单选按钮未选中 - 然后发布错误消息）

**函数 checkEmail()**确实正确地发布了错误消息。

我已经检查了很多次语法。你能发现错误吗？

谢谢

```
<!DOCTYPE HTML>
<HTML>
    <HEAD>
        <TITLE>Javascript and Forms</TITLE>

        <SCRIPT LANGUAGE = "Javascript">

        function validate() {

            var emailError = checkEmail();
            var radioError = checkRadio();
            var dropdownError = checkDropdown();
            var checkboxError = checkCheckbox();

        }

        function checkEmail(){

            var email = document.frmOne.email.value;
            if(email==""){
                document.getElementById("email_error").innerHTML = "No Email Adress";
                return false;
            }
            else{
                document.getElementById("email_error").innerHTML = "";
                return true;
            }

        }

        function checkRadio(){

            var payment = "";
            var len = document.frmone.payment.length;
            var i;

            for(i = 0;i<len;i++){
                if (document.frmone.payment[i].checked){
                    payment = document.frmone.payment[i].value;
                    break;
                }
            }
            if(payment == ""){
                document.getElementById("radio_error").innerHTML = "No payment Option Selected";
                return false;
            }
            else{
                document.getElementById("radio_error").innerHTML = "";
                return true;
            }
        }

        </SCRIPT>
    </HEAD>

    <BODY>

        <FORM NAME="frmOne" ACTION="" METHOD="POST">

        <P>
            EMAIL: <INPUT TYPE="text" NAME="email" VALUE="" PLACEHOLDER="Email Address"> 
            <SPAN STYLE=color:red ID="email_error"></SPAN>
        </P>

        <P>
            Payment Options:
            <INPUT TYPE="Radio" Name="payment" Value="CC">Credit Card
            <INPUT TYPE="Radio" Name="payment" Value="DC">Debit Card
            <INPUT TYPE="Radio" Name="payment" Value="PP">PayPal 
            <SPAN STYLE=color:red ID="radio_error"></SPAN>
        </P>

        <P>
        Where did you hear about us?
        <SELECT NAME="hear">
            <OPTION Value="None">None</OPTION>
            <OPTION Value="paper">Newspaper</OPTION>
            <OPTION Value="tv">Television</OPTION>
            <OPTION Value="mouth">Word of Mouth</OPTION>
            <OPTION Value="seach">Search Engine</OPTION>
        </SELECT>
         <SPAN STYLE=color:red ID="dropdown_error"></SPAN>
        </P>

        <P>
            <LABEL FOR="CB1">Terms and Conditions</LABEL>
            <INPUT TYPE="Checkbox" Name="terms" ID="CB1" Value="TAC">
            <SPAN STYLE=color:red ID="checkbox_error"></SPAN>
        </P>

        <P>&nbsp;</P>
        <INPUT TYPE="button" VALUE="  SUBMIT  " onClick="validate()">
        </FORM>

    </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:20:03.750

你错过了这一行的一个大写字母：

`len = document.frmone.payment.length;`

应该`len = document.frmOne.payment.length;`

您应该学习使用浏览器的网络检查器，它可以帮助您轻松发现这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:37:05.620

有3个地方需要`frmone`换`frmOne`。一个是马可指出的。其他地方是

```
if (document.frmOne.payment[i].checked){
                    payment = document.frmOne.payment[i].value;
                    break;
                } 
```

# r - 根据特定模式搜索和计数

> ID：14400755
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:15:27.797
> 
> 标签：r

我有一个大数据框架。我必须逐列计算以 _xxsgt 结尾的单词出现了多少次。

```
 Col1             Col2  
  a               54_xxsgt   
  123_xxsgt       e     
  d               f  
  429_s_xxsgt     g 
```

期望的输出：

Col1：2（发生 123_xxsgt 和 429_s_xxsgt）
Col2：1（发生 54_xxsgt）...。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:22:21.260

```
# First, a reproducible example)
set.seed(42)
dd <- sample(letters[1:20], 100, replace = TRUE)
ix <- as.character(sample(c("", "_xxsgt"), 100, replace = TRUE))
dd <- paste(dd, ix, sep="")
df <- as.data.frame(matrix(dd, ncol=10))

# solution
sapply(df, function(x) length(grep("_xxsgt", x)))
V1  V2  V3  V4  V5  V6  V7  V8  V9 V10 
 6   7   6   9   4   5   4   5   6   4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:25:11.833

试试这个：

```
> DF <- read.table(text=" Col1             Col2  
    a               54_xxsgt   
    123_xxsgt       e     
    d               f  
    429_s_xxsgt     g ", header=T)
> 
> apply(DF, 2, function(x) sum(grepl('_xxsgt', x)))
Col1 Col2 
   2    1 
```

# php - Wordpress 从帖子正文调用插件功能

> ID：14400756
> 
> 赞同：0
> 
> 时间：2013-01-18T14:15:29.137
> 
> 标签：php, wordpress

我想创建一个 wordpress 插件，它将用插件中标定的函数输出替换帖子正文中的特定行。希望这对你有意义。我是新的 ro wordpress 开发。

插件代码

```
<?php

function money_conversion_tool(){

echo "<form action='' method='post'><input type='text' name='id'><input type='submit'>   </form>";

}

?> 
```

发布 html

```
<h1>Some text some text some text some text</h1>

 [MONEY_CONVERSION_TOOL]

<h2>SOme text some text some text </h2> 
```

主题文件：content-page.php

```
<?php
        if(strpos[get_the_content(),"[MONEY_CONVERSION_TOOL]"){
         $contents_part = explode('[MONEY_CONVERSION_TOOL]',get_the_content());
         if(isset($contents_part[0])){ echo $contents_part[0]; }    
         money_conversion_tool();   
         if(isset($contents_part[1])){ echo $contents_part[1]; };   
         } else { the_content(); } } else { the_content(); }

}

?> 
```

我不认为，我对 content-page.php 所做的事情是一种完美的方式。在插件代码中应该有更好的方法。告诉我如果你想要同样的功能，你会怎么做。

我刚刚从 wordpress codex 中找到了关于过滤器的信息。

例子：`<?php add_filter('the_title', function($title) { return '<b>'. $title. '</b>';}) ?>`

我可以对插件中的 the_content 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:18:57.043

```
if (strpos(get_the_content(),"[MONEY_CONVERSION_TOOL]")){
   echo str_replace('[MONEY_CONVERSION_TOOL]', money_conversion_tool(), get_the_content());
else
   the_content(); 
```

或更短：

```
echo (strpos(get_the_content(),"[MONEY_CONVERSION_TOOL]")) ? str_replace('[MONEY_CONVERSION_TOOL]', money_conversion_tool(), get_the_content()) : get_the_content(); 
```

在您的函数中，不要回显，只需返回。

```
<?php 
    function mct_modifyContent($content) {
        if (strpos($content,"[MONEY_CONVERSION_TOOL]"))
           $content = str_replace('[MONEY_CONVERSION_TOOL]', money_conversion_tool(), $content);

        return $content;
    };

    add_filter('the_content', 'mct_modifyContent') 
?> 
```

# php - 单元测试 Zend_Session

> ID：14400761
> 
> 赞同：1
> 
> 时间：2013-01-18T14:15:35.477
> 
> 标签：php, unit-testing, zend-framework, zend-session

我在测试 zend_session 时遇到问题，我的测试如下所示：

引导程序.php

```
public function _initSession() {
    try
    {
        Zend_Session::setSaveHandler(new APP_Session_SaveHandler_Memcached());            
        Zend_Session::start();

        $session = new Zend_Session_Namespace('APP');
        Zend_Registry::set('session', $session);
    }
    catch(Exception $e) 
    {
        Zend_Registry::get('log')->err($e);
    }
} 
```

会话测试.php

```
public function testSession() { 
    $session = Zend_Registry::get('session');
    $session->setExpirationSeconds(1);
    $session->testIndex = "testValue";

    $this->assertEquals('testValue', $session->testIndex);

    sleep(3);

    $this->assertEquals(null, $session->testIndex);
} 
```

第一个断言是好的，但第二个总是说 $session->testIndex 的值是“testValue”，当它应该为空时对吗？

如果我错了，请告诉我，因为我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:55:57.983

每次从会话类访问数据时，都不会评估到期时间，只是在首次加载数据时评估。一个典型的 PHP 脚本永远不应该花费一秒钟的时间来执行，因此您尝试测试的情况不应该在现实世界中发生。

我还要补充一点，ZF 中并没有很多像这样的点测试功能——ZF 类已经过单元测试。测试您的应用程序，而不是框架。

# delphi - 如何检测 TThreadList 引用的指针是否无效以避免 AV

> ID：14400765
> 
> 赞同：1
> 
> 时间：2013-01-18T14:15:49.773
> 
> 标签：delphi, sockets, pointers, threadpool

我有一个`TThreadList`包含所有指向我的服务器创建的对象的指针。服务器有一个线程池，用于向该线程列表中的所有客户端发送数据。它锁定列表，然后在用户断开连接后释放列表，删除对象和引用指针。

问题是：线程池不知道套接字何时断开连接并被删除，因此当池工作时，它将在已以某种方式已被删除的线程列表中选择的指针上进行 AV。

例如，池的`Execute`方法：

```
 try
    with userlist.LockList do 
    begin
      for i := Count - 1 downto 0 do
      begin
        if i >= 0 then 
        begin
          p := TClient(items[i]);
          //problem here p gets deleted so it raises items[i] 
          //have an invalid pointer to memory
          if p <> nil then
            if p.sockethex <> nil then
            begin
              sendtexthexpool(p.sockethex, msgprimit+ '|'); //here AV cause P was deleted
            end;
        end;
      end;
    end;
  finally
    userlist.UnlockList;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:31:27.780

如果您只有一个指针，那么您无法判断它是否已被释放。你必须让你的程序来跟踪这些信息。

即使您可以检测到您无法检测到的过时指针，它也无济于事。你仍然会有一场比赛。

在您的摘录中，您有一个线程列表。只要在列表锁定时对指针进行所有访问，那么您就不会遇到任何问题。大概您正在释放对象，同时没有锁定列表。解决这个问题，一切都会好起来的。

# python - 单击提交按钮后使用python下载文件

> ID：14400767
> 
> 赞同：0
> 
> 时间：2013-01-18T14:15:54.867
> 
> 标签：python, download, popupwindow

我需要登录一个网站。导航到报告页面。输入所需信息并单击“开始”按钮（这是我正在提交的多部分/表单数据）后，会弹出一个窗口，要求我保存文件。我想通过python自动完成。

我在互联网上搜索了几天，但在 python 中找不到方法。通过使用 urllib2，我最多可以处理提交多部分表单，但是如何获取文件的名称和位置并下载它？

请注意：没有与“Go”按钮关联的 Href。提交表单后，会弹出一个文件保存对话框，询问我将文件保存在哪里。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:27:56.730

有到 Selenium 的 python 绑定，这有助于编写模拟浏览器行为的脚本，允许用它做非常复杂的事情 - 看看它，应该足以满足你的需要。

# c# - 禁用基于绑定值 WPF 选择 ListBox 项

> ID：14400768
> 
> 赞同：3
> 
> 时间：2013-01-18T14:15:59.323
> 
> 标签：c#, wpf, listboxitem

> **可能重复：**
> [如何根据属性值禁用数据绑定的 ListBox 项？](https://stackoverflow.com/questions/1824543/how-to-disable-a-databound-listbox-item-based-on-a-property-value)

我有一个`listbox`并且想根据绑定中的 a 字段使列表框中的某些项目不可选择。

我尝试将其设置`listboxitem.IsEnabled`为 false，但这并没有达到预期的效果。

请有人建议这是否可能。

这是我的数据模板：

```
<DataTemplate x:Key="GridTemplate">
      <StackPanel Orientation="Horizontal">
           <Border Padding="{Binding EditorRow.RightBondIndent}" Width="50">
                  <Image x:Name="rightImg" Source="mat.png" Stretch="Fill"  />
           </Border>
      </StackPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding EditorRow.MaterialType}" Value="Blank">
                        <Setter Property="IsEnabled" Value="False" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:30:22.263

如果你想禁用列表框中的单个项目，你可以试试[这个](https://stackoverflow.com/questions/1824543/disable-a-single-wpf-listbox-item)。您可以根据您的绑定属性来执行此操作。希望能帮助到你。

# javascript - javascript 在 window.print() 之后不执行 (codeigniter) php 脚本

> ID：14400776
> 
> 赞同：0
> 
> 时间：2013-01-18T14:16:15.297
> 
> 标签：javascript, codeigniter

我有这个 javascript 来检查付款是否等于或大于总金额，
window.print 执行同样会出现重定向页面，但它只打印
但不重定向。

查看页面：

```
<script>
function printpage() 
{
      var 
          total = parseFloat($(':input[name="total"]').val(),10),
      cash = parseFloat($(':input[name="cash"]').val(),10),
      charge = parseFloat($(':input[name="charge"]').val(),10),   
      payment = (cash + charge);

      if(payment>= total){

      window.print();
      }else{

      return false;
      }
}
</script>

im not good at javascript. 
here is some more details:  
<form action="bills/settle" method="post">  
<input type="text" name="cash">  
<input type="text" name="charge">
<input type="text" name="total" value="<?php echo $total"> 
<input type="submit" onclick="printpage()"   
</form> 
```

控制器页面：

```
function settle(){  
$payment = $this->input->post('cash')+ $this->input->post('charge');  
$total = $this->input->post('total');  
$data = ('cash'=>$this->input->post('cash'), so on.....)    

    if($payment >=$total)
    {  

        $this->load->model('process');  
        $this->process->close_bill($data);  

    } else {
       redirect('msg','refresh');  
    }  
} 
```

*其他注意事项，
如果付款正常：它会打印，将数据插入数据库但不重定向。
成功插入数据库后，重定向脚本在我的模型中。

如果付款不正常：（这方面没有问题）
它会重定向到味精页面，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:21:03.433

这与javascript无关；这是你的一个诚实的错误：

```
<input type="text" name="total" value="<?php echo $total"> 
```

应该改为：

```
<input type="text" name="total" value="<?php echo $total; ?>"> 
```

此外，如果您在进行开发时已`display_errors`设置为`on`并`error_reporting`设置为，这将有所帮助，因此您可以查看何时发生错误。`E_ALL`

# vim - 将字符放在 vi 中的特定列

> ID：14400778
> 
> 赞同：5
> 
> 时间：2013-01-18T14:16:15.767
> 
> 标签：vim, vi

有没有办法在 vim 中的特定行放置一个字符，即使该行很短？

例如，我正在为一个项目做出贡献，该项目的注释块样式为 79 列宽，两端都有一个注释字符，例如

```
!--------------!
! Comment      !
! More Comment !
!--------------! 
```

但它真的很烦人，即使猜测很大的数字 (35i<SPACE><ESC>)

是否有一个简单的命令可以为我执行此操作，或者一个宏或我可以编写的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T14:53:12.373

```
set ve=all 
```

然后你可以将 (h,j,k,l) 移动到任何你想要的地方。不管你的线路有多短。

详细信息有 4 个选项`block, all, insert, onemore`：

查看 `:h virtualedit`

这样，你输入短评论后，再输入`<ESC>080l`到正确的地方去拖尾`!`

如果经常使用，您也可以映射它

然后它像这样工作：

![在此处输入图像描述](../Images/07d4984f27eabebcfd56c4e4c8145260.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:36:52.017

把它放在你的`.vimrc`文件中并重新启动 vim：

```
inoremap <F1> <C-r>=repeat(' ', 79-virtcol('.'))<CR>!<CR> 
```

只需`F1`在输入注释文本后在插入模式下按（或您映射的任何键）即可自动填充空格并`!`在第 79 列中插入 a。

另一种简单的方法是在某处保留一个正确大小的空评论框，在需要的地方拉/粘贴它，每次只需`R`用您的评论替换其中的空格。

如果要重新格式化太短的框，一种方法是从示例中的注释开始，创建一个可视块 ( `Ctrl`+ `v`)，选择其右侧边缘左侧的单列，将其拉出 ( `y`) ，然后重复粘贴 ( `p`)。这将连续将注释的整个右侧移动一步，向右扩展框。重复直到它具有所需的长度。

如果您已经输入了注释文本，您可以使用宏在正确的位置添加右侧`!`标记。例如，记录一个宏 ( `q``a`)，该宏 ( ) 添加的字符多于任何行所需的字符 (例如`8``0``A``Space``Esc`)，然后使用 goto 列 ( `|`) 转到正确的位置 ( `7``9``|`) 并从那里替换多余的字符 ( `C``!``Esc`)，然后向下移动一行 ( `j`)，然后停止录制 ( `q`)。重复此宏 ( `@``a`) 然后依次“修复”每一行并移至下一行。总而言之：`qa80A<space><esc>79|C!<esc>jq`然后`@a`在需要时。听起来很复杂，但一旦拥有它就很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:30:59.307

这里肯定已经有了很好的答案，尤其是 virtualedit 答案。但是，我没有看到对我来说最直观的方法。我将为评论的最后一行创建一个空行，该行被感叹号包围。然后我会拉出并粘贴空行的新副本，转到旧的空行并转到我要编辑的点并使用重划线模式 ( **`R`**) 添加我的文本而不影响结尾感叹号的位置.

有时，最简单的方法虽然稍显笨拙，但却是最容易使用和记住的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:06:53.997

我通常只是复制并粘贴注释块中的现有行（或从另一个文件复制一个），然后对其进行修改。如果您要替换的文本与您要编写的文本大小大致相同（例如，如果您要更改作者的姓名），您可能只需要添加或删除几个空格即可使所有内容对齐。这比间隔到所需宽度要少得多。

如果你有一个这样的块太长，一个巧妙的技巧是将光标放在第 79 列并按`d``w`。这将清除所有空间，直到`!`最后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:17:21.127

我的[AlignFromCursor 插件](http://www.vim.org/scripts/script.php?script_id=4155)提供了仅将文本对齐到光标右侧的命令和映射，并保持左侧文本不变。因此，将光标放在尾随左侧的空白处`!`，您可以将其与`<Leader>ri`.

# x86 - exec() 系统调用参数使用的寄存器

> ID：14400781
> 
> 赞同：2
> 
> 时间：2013-01-18T14:16:20.303
> 
> 标签：x86, system-calls, execve

我想知道 exec() 系统调用参数存储在哪些寄存器中。

我首先运行了一个简单的 C 程序，它执行 exec 系统调用并获取其对象转储，发现 RDI 被用于包含要执行的进程的参数，并且 syscall 指令被用于在内核中调用 execve。我是在 64 位 Ubuntu 12.04 操作系统中完成的

然后我在 QEMU 上运行的 Ubuntu 11.10 OS（32 位）上运行了这个程序。但是现在在没有 0x80 的对象转储中断中被使用并且参数在 EBX 中。

我在两个方面感到困惑..为什么在一个地方使用 int80 而在另一个地方使用 syscall 以及如何选择 execve 系统调用的寄存器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:07:54.167

您所看到的是，不同的芯片架构在向正在运行的操作系统发出服务请求时使用不同的*系统调用约定。*这些约定是操作系统定义的*ABI （应用程序二进制接口）的一部分——ABI 定义的其他内容包括：*

*   用于将参数传递给函数的寄存器（和/或堆栈布局）

*   哪些寄存器函数可以用作暂存空间，而哪些寄存器在返回时必须恢复到以前的值

*   处理器地址空间内程序的（虚拟）内存布局

请记住，尽管它们通常都由相同的物理处理器支持（出于向后兼容性的原因），但英特尔 64 位 (IA64) 和 32 位 (IA32) 架构仍然是分开的，具有不同的（如果重叠）寄存器可用，并且具有不同的 ABI . 正如您所注意到的，这两个 ABI 在系统调用的参数放置和向内核发出系统调用发出信号的方式上都不同。

如今，操作系统 ABI 通常由提供特定芯片架构的公司定义（至少作为建议），因此在给定架构上运行的所有（或大多数）操作系统通常都提供相同的 ABI，但情况并非总是如此——在完全相同的硬件上运行的不同操作系统之间仍然可以找到您注意到的类型差异。

# applescript - Applescript一一打开文件夹中的所有文件

> ID：14400782
> 
> 赞同：0
> 
> 时间：2013-01-18T14:16:22.020
> 
> 标签：applescript

如果我的问题看起来很愚蠢，我只是一个初学者对不起。

现在我正在尝试编写一个脚本，将我所有的 .webarchive 转换为 .html，所以我最终使用名为“iCab”的应用程序打开 .webarchive 并将其保存到 .html

这是我的所有 .webarchive 在保存文件夹中的问题，我需要一个循环来一个一个地打开它，所以我可以把这段代码放在循环中

```
tell application "iCab" to open file file_name
tell application "iCab" to activate
delay 1
tell application "System Events"
    tell process "iCab"
        click menu item "Save As…" of menu "File" of menu bar 1
        key code 76
        click menu item "Close Window" of menu "File" of menu bar 1
    end tell
end tell 
```

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:17:53.647

您还需要将文件从 Finder 文件对象转换为别名。

```
tell application "Finder"
    set fl to files of folder POSIX file "/Users/username/Folder/" as alias list
end tell
repeat with f in fl
    tell application "iCab"
        open f
        activate
    end tell
    tell application "System Events"
        tell process "iCab"
            click menu item "Save As…" of menu "File" of menu bar 1
            keystroke return
            click menu item "Close Window" of menu "File" of menu bar 1
        end tell
    end tell
end repeat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:04:29.463

尝试：

```
tell application "Finder" to set myFiles to every file of folder "Mac OS X:Users:Angeloid:Desktop:yourFolder"
repeat with aFile in myFiles
    --insert your code here
end repeat 
```

编辑以包括选择文件夹：

```
tell application "Finder" to set myFiles to every file of (choose folder)
repeat with aFile in myFiles
    tell application "iCab"
        open file file_name
        activate
    end tell
    delay 1
    tell application "System Events"
        tell process "iCab"
            click menu item "Save As…" of menu "File" of menu bar 1
            key code 76
            click menu item "Close Window" of menu "File" of menu bar 1
        end tell
    end tell
end repeat 
```

# c# - 处理抽象类不同实现的集合的干净方式？

> ID：14400784
> 
> 赞同：0
> 
> 时间：2013-01-18T14:16:25.923
> 
> 标签：c#, abstract-class, implementation

我有一些抽象类，它们具有`UserControls`我项目中一些的核心功能。我还有两个独立的实现，它们都派生自 Abstract 类；让我们打电话给他们`AbstractImpl1`，`AbstractImpl2.` 此外，我还有在几个地方迭代 `Collections`的摘要。`UserControls`

我遇到的问题是`InvalidCastExceptions`- 我需要遍历实现而不是抽象的 UserControls 来获得某些属性（视觉）。除了做 a 之外，有没有一种干净的方法来处理这个问题`try/catch`？

**例子：**

在我的项目中，我有抽象类：`AbsUserControl` 然后我有两个单独的实现：`AbstractImpl1`和`AbstractImpl2`

在我的主要形式中，我拥有`ObservableCollection<AbsUserControl> absControlCollection`然后遍历我所做的项目`foreach(AbstractImpl1 userControl in absControlCollection)`以便能够访问视觉方面。问题是它`ObservableCollection<AbsUserControl> absControlCollection`可能由`AbstractImpl1`或`AbstractImpl2`对象组成。

有没有一种干净的方法来处理这个问题？现在，我遍历对象的每个地方`absControlCollection`都用一个块包围它`try/catch`，尝试遍历`AbstractImpl1`对象然后捕获一个`InvalidCastException`并继续遍历`AbstractImpl2`对象。

让我知道是否需要更多信息。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:24:54.173

An alternative to `OfType`; casting without exceptions:

```
foreach(AbsUserControl control in absControlCollection)
{
    if(control is AbstractImpl1)
    {
        AbstractImpl1 i1 = (AbstractImpl1)control;
        DoStuff(i1);
    }
    if(control is AbstractImpl2)
    {
        AbstractImpl2 i2 = (AbstractImpl2)control;
        DoOtherStuff(i2);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:20:55.923

用于[`OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)为您进行过滤：

```
foreach(AbstractImpl1 userControl in
    absControlCollection.OfType<AbstractImpl1>())
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:22:05.790

您可以使用 LINQ 的**[`OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)**方法安全地过滤出您感兴趣的具体实现。`foreach`然后您将如下所示：

```
foreach(var userControl in abcControlCollection.OfType<AbstractImpl1>())
{
    /* ... */
} 
```

# python - 如何在 Python 中不使用 In 关键字创建 For 循环

> ID：14400790
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:16:42.337
> 
> 标签：python, for-loop, keyword

我只是想知道如何在不使用 Python 中的“in”关键字的情况下使用 For 循环？

由于“in”关键字测试值是否在列表中，如果值在列表中则返回 True，如果值不在列表中则返回 False，For 循环也使用 In 关键字似乎令人困惑什么时候它也可以使用像“of”这样的词。

但是，我尝试使用这样的代码：

```
 for i of range(5):
        print i 
```

它返回一个语法错误。所以我想知道是否有任何方法可以在不使用 In 关键字的情况下使用 For 循环，因为它令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:17:12.470

不，没有，它是语言的一部分，无法更改（无需修改底层语言实现）。

我认为这根本不会令人困惑，因为语法读起来像英语，并且可以很好地解析为 LL(1) 语法。它还减少了关键字的数量（这很好，因为它为变量命名腾出了更多的词）。

许多语言在不同的上下文中重用关键字，Python 这样做是`as`为了：

```
import bar as b

with foo() as f:
    ... 
```

3.3 也这样做`from`：

```
from foo import bar

def baz(iter):
    yield from iter 
```

甚至 Java 也这样做，`extends`通常用于为类提供基类，但它也用于为泛型指定类型的上限。

```
class Foo extends Bar {
    void baz(List<? extends Bar> barList) {
        ...
    }
} 
```

请注意，即使这是可能的，这也是一个坏主意，因为它会降低其他使用该语言的 Python 程序员的可读性。

编辑：

由于其他答案已经替代了`for`循环使用`while`，我将添加做坏事的最佳方式：

```
iterable = iter(some_data)
while True:
    try:
        value = next(iterable)
    except StopIteration:
        break
    do_something(value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:19:41.000

不，尽管您可以改用 while 循环：

```
some_list = range(5)
while some_list:
    print some_list.pop() 
```

就我个人而言，我不明白为什么它不清楚，听说过同音词吗？[http://en.wikipedia.org/wiki/Homonym](http://en.wikipedia.org/wiki/Homonym)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:31:49.740

你可以这样做：

```
iter = len(list)
loop = True
while loop:
  if iter == 0:
    loop = False
  else:
    do_something(list[iter])
    iter =- 1
return 0 
```

愚蠢，但可行;)

# layout - Bootstrap：没有外部边距的流畅布局

> ID：14400793
> 
> 赞同：28
> 
> 时间：2013-01-18T14:16:52.443
> 
> 标签：layout, twitter-bootstrap, margin, fluid-layout

如果我有：

```
<div class="container-fluid">
   <div class="row-fluid">
      <div class="span8">
             Some Element....
       </div>
       <div class="span4">
             Other Element
       </div>   
   </div>       
</div> 
```

使用此代码，我可以从左右窗口边框中获得一些边距。怎样才能消除这些边距？

谢谢你的支持

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-18T21:28:28.317

如果我正确理解你的问题，我相信你想要这个：

```
.container-fluid {
    padding: 0px;
} 
```

此外，如果您使用的是响应式引导程序，您还需要：

```
@media (max-width: 797px) {
    body { 
        padding-left: 0px;
        padding-right: 0px;
    }
} 
```

编辑：这是[一个 js fiddle](http://jsfiddle.net/hajpoj/w2d7r/1/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-02-08T09:20:14.163

您看到的效果是由于`container`' 填充。

您可以`container`使用内置的[Bootstrap 4 间距实用程序类](https://getbootstrap.com/docs/4.2/utilities/spacing/)更改 的默认填充。

要删除填充，请添加`p-0`到`container`：

```
<div class="container-fluid p-0">
    <div class="row">
      <div class="col-8">
         Some Element....
       </div>
       <div class="col-4">
          Other Element
       </div>   
    </div>       
</div>
```

使用内置实用程序类的好处是可以保持 CSS 精简，并且它也不会修改默认`container-fluid`类定义。

# python - Python Timer 是否对支持的最长时间有一些限制？

> ID：14400798
> 
> 赞同：0
> 
> 时间：2013-01-18T14:17:03.343
> 
> 标签：python, timer

```
import threading
import os

def shutdown():
    os.system("shutdown -s")

# user setting zone!!!
hour = 0
minute = 20
sec = 0
# user setting zone!!!

total_sec = hour*3600.0 + minute*60.0 + sec - 60.0

if total_sec < 0:
    total_sec = 0
print("The computer will be Shut Down in (%d hour, %d minute, %d second).\n" %(hour, minute, sec))

if total_sec >= 120:
    temp_sec = total_sec - 120
    threading.Timer(temp_sec, lambda: print("Last 3 minutes before shuting down the computer!!\n")).start()
else:
    print("Less than 3 minutes before shuting down the computer!!\n")

threading.Timer(total_sec, shutdown).start() 
```

代码如上所示。当我将时间设置为 10 分钟、20 分钟或稍长一些时，脚本可以正常工作。但是，如果我将等待时间设置为 4 小时或 5 小时等较长时间，则脚本根本无法运行。时间一到，什么都不会发生。您能否指出错误发生的原因并指导我修复它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:53:20.963

你真的计时了吗？您说它可以正常工作，但是设置10分钟后它实际上是否会在10分钟内关闭计算机，而不是说15分钟以上？

我问是因为看起来您已设置为给您 3 分钟的警告。但是，由于您在“threading.Timer（total_sec，shutdown）.start（）”中使用了total_sec，因此计时器会重置，因此当您将其设置为60分钟时，它会在57分钟时向您发出警告，然后再运行60分钟。

因此，我怀疑如果让它运行 11 小时，当你设置它 5 小时时，它实际上会关闭计算机。

# html - 冻结在 Excel 中打开的 HTML 中的窗格

> ID：14400799
> 
> 赞同：1
> 
> 时间：2013-01-18T14:17:04.583
> 
> 标签：html, excel, vba

我的应用程序将数据作为 HTML 导出到 Excel。

它将 HTML 表的标记保存在临时文件中（使用 xls 作为扩展名）。然后它要求操作系统使用其本机应用程序打开该文件。

Excel 可以毫无问题地打开它。我什至能够通过 CSS 获得一些格式。

我希望前 x 行不要滚动。我想知道是否有办法实现“冻结窗格”效果？我曾尝试使用`thead`and`tbody`标签，但它没有帮助。

我在 ActionScript 中对此进行编程。然而，用于在文本文件中生成标记的语言是无关紧要的。重要的是标记本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T13:06:38.320

我自己没有尝试过，但是这个[http://jwcooney.com/2011/09/08/generating-excel-documents-through-html-xml-and-css-part-2/](http://jwcooney.com/2011/09/08/generating-excel-documents-through-html-xml-and-css-part-2/)页面似乎有答案

> ..下面绿色的 x:FreezePanes 和 x:Panes 标记告诉 Excel 冻结文档的第一行..

x:FreezePanes 等元素记录在“ *Microsoft Office HTML 和 XML 参考*”中，您可以从[http://msdn.microsoft.com/en-us/library/Aa155477%28office.10%29.aspx下载](http://msdn.microsoft.com/en-us/library/Aa155477%28office.10%29.aspx)

x:urn:schemas-microsoft-com:office:excel 命名空间也称为“ *XML 电子表格 2000* ”

# hibernate - 同一个POJO，两个映射，一个表

> ID：14400804
> 
> 赞同：0
> 
> 时间：2013-01-18T14:17:20.487
> 
> 标签：hibernate, mapping, pojo

我有一个 Web 应用程序，我在其中使用 Hibernate 来保持数据库的持久性。这是一个简单的项目，有一个 POJO，它的 Hibernate-Mapping 到 MySQL-Server 上的一个表和一些其他相关的东西。

我需要从 POJO 中提取不同的属性，并以某种格式将它们提供给我的用户。所以我的问题是，如何以最简单和最安全的方式做到这一点？是否可以为同一个 POJO 构建第二个映射文件但仅具有相关属性，因此如果用户调用相应的方法，则只有第二个映射文件起作用并且仅显示选择的属性，而不是每个人，哪些是通过第一个和标准映射文件映射的？这似乎合乎逻辑，但我想知道，会话是否有任何问题？

还是我应该构建第二个 POJO+第二个映射？但是我怎么能保证在现有的唯一一张桌子上不会有任何不一致呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:13:38.770

您只能在应用程序的不同安装中为同一个 pojo 拥有不同的映射文件。在一个应用程序中，即在一个 hibernate.cfg.xml 文件中，一个 pojo**不能**被多次映射。

这样做的技术原因是，Hibernate 使用该类在其缓存中查找实例。如果同一个 pojo 被映射两次，那么它也会找到错误映射的实例。这可能会引发奇怪的结果，例如 Query.uniqueResult() 中的异常，即使表中只有一个条目，或者 Query.list() 找到两个条目。

你可以做的是：你为你的 pojo 定义一个基类（可能是一个抽象类），它具有所有公共属性并且从不被映射。然后你从这个基类扩展的每个用户pojo（它甚至可以是一个空扩展，即不需要添加任何功能，主体可以是空的），你为这些不同的用户pojo类创建不同的映射文件。

# python - python中的秒表？数到按空格键

> ID：14400806
> 
> 赞同：3
> 
> 时间：2013-01-18T14:17:22.130
> 
> 标签：python, stopwatch

我想在 python 3.3 中制作一个秒表，它会继续计数，直到你按下按钮或其他东西，然后它应该停止计数。这是我的代码：

```
seconds = 0
minutes = 0
continued = 0
while continued != 1:
    print(minutes, ":", seconds)
    time.sleep(1)
    if seconds == 59:
        seconds = 0
        minutes = minutes + 1
    else:
        seconds = seconds + 1 
```

不使用 CTRL + C

我没有使用 GUI 或任何东西，只是使用 IDLE 在命令提示符下运行的纯 python 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:14:24.077

尝试在循环中等待按键，没有线程或计时器/信号将阻塞循环。

在等待按键时让主循环继续处理（秒表）的一种方法是通过线程。初步搜索使我找到了[ActiveState 配方](http://code.activestate.com/recipes/134892/)，尽管我从[这个线程](https://stackoverflow.com/questions/1258566/how-to-get-user-input-during-a-while-loop-without-blocking)中找到了解决方案。

```
import threading, os, time, itertools, queue

try : # on windows
    from msvcrt import getch
except ImportError : # on unix like systems
    import sys, tty, termios
    def getch() :
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try :
            tty.setraw(fd)
            ch = sys.stdin.read(1)
        finally :
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        return ch

commands = queue.Queue(0)

def control(commands) :

    while 1 :

        command = getch()
        commands.put(command) # put the command in the queue so the other thread can read it

        #  don't forget to quit here as well, or you will have memory leaks
        if command == " " :
            print "Stop watch stopped!"
            break

def display(commands):
    seconds = 0
    minutes = 0

    command = ""

    while 1 :

        # parsing the command queue
        try:
           # false means "do not block the thread if the queue is empty"
           # a second parameter can set a millisecond time out
           command = commands.get(False) 
        except queue.Empty, e:
           command = ""

        # behave according to the command
        if command == " " :
            break

        print(minutes, ":", seconds, end="")

        if seconds == 59:
            seconds = 0
            minutes = minutes + 1
        else:
            seconds = seconds + 1
        time.sleep(1)

# start the two threads
displayer = threading.Thread(None,display,None, (commands,),{})

controler = threading.Thread(None, control, None, (commands,), {})

if __name__ == "__main__" :
    displayer.start()
    controler.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:38:37.553

如果您想要秒表的 GUI，您可能会对以下适用于 Python 3.x 的代码感兴趣。

```
#! /usr/bin/env python3
import tkinter
import time

class StopWatch(tkinter.Frame):

    @classmethod
    def main(cls):
        tkinter.NoDefaultRoot()
        root = tkinter.Tk()
        root.title('Stop Watch')
        root.resizable(True, False)
        root.grid_columnconfigure(0, weight=1)
        padding = dict(padx=5, pady=5)
        widget = StopWatch(root, **padding)
        widget.grid(sticky=tkinter.NSEW, **padding)
        root.mainloop()

    def __init__(self, master=None, cnf={}, **kw):
        padding = dict(padx=kw.pop('padx', 5), pady=kw.pop('pady', 5))
        super().__init__(master, cnf, **kw)
        self.grid_columnconfigure(1, weight=1)
        self.grid_rowconfigure(1, weight=1)
        self.__total = 0
        self.__label = tkinter.Label(self, text='Total Time:')
        self.__time = tkinter.StringVar(self, '0.000000')
        self.__display = tkinter.Label(self, textvariable=self.__time)
        self.__button = tkinter.Button(self, text='Start', command=self.__click)
        self.__label.grid(row=0, column=0, sticky=tkinter.E, **padding)
        self.__display.grid(row=0, column=1, sticky=tkinter.EW, **padding)
        self.__button.grid(row=1, column=0, columnspan=2,
                           sticky=tkinter.NSEW, **padding)

    def __click(self):
        if self.__button['text'] == 'Start':
            self.__button['text'] = 'Stop'
            self.__start = time.clock()
            self.__counter = self.after_idle(self.__update)
        else:
            self.__button['text'] = 'Start'
            self.after_cancel(self.__counter)

    def __update(self):
        now = time.clock()
        diff = now - self.__start
        self.__start = now
        self.__total += diff
        self.__time.set('{:.6f}'.format(self.__total))
        self.__counter = self.after_idle(self.__update)

if __name__ == '__main__':
    StopWatch.main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T20:01:27.627

使用诅咒：

```
import curses
from datetime import datetime

SPACE_KEY = ord(' ')

def run(win):
    curses.echo()
    win.timeout(1000) # Wait at most one second for a key.

    start = datetime.now()
    while True:
        now = datetime.now()
        minutes, seconds = divmod((now - start).total_seconds(), 60)
        win.addstr(0, 0, "%02d:%02d" % (minutes, round(seconds)))

        c = win.getch()
        if c == SPACE_KEY:
            break

curses.wrapper(run) 
```

在 Windows 下，这不是问题，因为您在模块中拥有`kbhit`并且`getch`可用。`msvcrt`

# asp.net-mvc-3 - Formcollection 不会从表单 MVC 中提取数据

> ID：14400807
> 
> 赞同：1
> 
> 时间：2013-01-18T14:17:22.127
> 
> 标签：asp.net-mvc-3, formcollection

我在表单收集方面遇到了麻烦。

我有一些表单，两个提交按钮都具有唯一的 name=""。在调试时，我在 formcollection 中的控制器上获取除提交按钮的“名称”之外的所有数据......我不知道为什么，因为我在其他表单中使用它并且效果很好。因此，我查看了代码，但是在不工作的formcol和工作的formcol上使用formcollection时找不到任何区别。我尝试重命名按钮，移动它们，添加我认为可以帮助的引用......没有。在每次提交时跳过我的条件，因为它只给我返回“false”并且formcollection我的onclick上的“上传”或“保存”按钮不包含......

所以我想请你帮忙。你能告诉我哪里可能出错了吗？谢谢大家！

这是在控制器中：

```
[HttpPost]
public ActionResult EditUser(EditUserVM model, int id, FormCollection c)
{
    //c["upload"] is everytime set to null, 'cos c does't contain it 
    if (c["upload"] != null)
    {
            //.... some code
            return RedirectToAction("Index", "Home");
    }

    if (ModelState.IsValid)
    {
           //.... next code 
    }

    return View("EditUser", model);
} 
```

这是在视图中：

```
 @model PrukazOnline.ViewModels.EditUserVM
@{
    ViewBag.Title = "EditUser";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")"></script>
@using (Html.BeginForm("EditUser", "User", null, FormMethod.Post, new { @class = "form-horizontal", id = "formstep", enctype = "multipart/form-data" }))
{
    @*Here is some code - @Html.TextBoxFor(x => x.something) and @Html.ValidationMessageFor(x => x.something) - all of these are in formcollection*@   
    .
    .
    .
    .
    <div>
        <input type="submit" value="Nahrát" class="upl" name="upload" id="upload" />
    </div>

    <div class="submit_buttons">
            <input type="submit" name="save" id="save" value="Uložit" />
    </div>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:52:27.937

问题在于单一形式的多个提交输入。中只会有点击的按钮`FormCollection`。
我想您尝试根据单击的按钮来改变表单处理，在这种情况下，最好为每个按钮使用不同的操作，如下所示：

看法：

```
<div>
    <input type="submit" value="Nahrát" class="upl" name="upload" id="upload" />
</div>

<div class="submit_buttons">
        <input type="submit" name="save" id="save" value="Uložit" />
</div> 
```

控制器：

```
[HttpParamAction]
[HttpPost]
public ActionResult Upload(EditUserVM model)
{
    ...
}

[HttpParamAction]
[HttpPost]
public ActionResult Save(EditUserVM model)
{
    ...
} 
```

# c# - 将项目拖放到引用文件夹

> ID：14400817
> 
> 赞同：1
> 
> 时间：2013-01-18T14:17:38.633
> 
> 标签：c#, .net, c#-4.0, visual-studio-2012, project-reference

（视觉工作室 2012）

有没有办法通过简单地将解决方案项（项目）拖动到其他项目引用文件夹中来创建解决方案引用？像这样？

[http://i.snag.gy/p692V.jpg](http://i.snag.gy/p692V.jpg)

某种插件或添加或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:46:27.073

我不知道有任何 Visual Studio 加载项或扩展可以执行此操作，并且在搜索时我没有看到。我相信，如果该功能在没有对话框或提示的情况下快速添加删除的引用，那将会很有用。如果 R# 有这个功能，那就太好了。也许向 M$（用于下一个 VS）或 JetBrains 建议此功能将是一个好主意。此外，VS 2012 中的参考管理器比以前的版本更好、更快且摩擦更小，但我可以看到，如果存在此功能，*可以*更快地添加项目参考。我喜欢这个主意。您也可以自己构建扩展。:-)

# excel - 使用 VBA 格式化从 Access 输出的 Excel 文件？

> ID：14400818
> 
> 赞同：1
> 
> 时间：2013-01-18T14:17:39.137
> 
> 标签：excel, vba, ms-access

在这里，我有一些 VBA 代码可以将大量文件输出到 Excel 文件中。我的问题是，从这个角度来看，它是否可以稍微格式化一下excel文件？我想做的是使列加粗并使列也适合标题的大小。

```
Sub OutPutXL()

Dim qdf As QueryDef
Dim rs As DAO.Recordset

Set qdf = CurrentDb.QueryDefs("OutputStudents")
Set rs = CurrentDb.OpenRecordset("Teachers")

Do While Not rs.EOF
qdf.SQL = "SELECT * FROM Students WHERE contact='" & rs!contact & "'"

''Output to Excel
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel8, _
qdf.Name, "C:\Users\chrisjones\Documents\ProjectionsFY14\Teachers\" _
& rs!contact & ".xls", True
rs.MoveNext
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:45:07.803

这是 Phil.Wheeler 的[代码](https://stackoverflow.com/questions/5851531/code-for-looping-through-all-excel-files-in-a-specified-folder-and-pulling-data)和我之前的输入的快速而肮脏的组合，对我来说这是有效的。不要忘记在 Access-Macro 中添加 Excel 的对象库。

```
Sub doWhatIWantTheDirtyWay()

pathToFolder = "C:\Users\Dirk\Desktop\myOutputFolder\"
scaleFactor = 0.9

Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = False
objExcel.DisplayAlerts = False

Set objFso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFso.GetFolder(pathToFolder)

For Each objFile In objFolder.Files
    If objFso.GetExtensionName(objFile.path) = "xls" Then
         Set objWorkbook = objExcel.Workbooks.Open(objFile.path)
         For Each sh In objWorkbook.Worksheets

            If sh.UsedRange.Address <> "$A$1" Or sh.Range("A1") <> "" Then
                With sh
                    columncount = .Cells(1, 256).End(xlToLeft).Column
                    For j = 1 To columncount

                        With .Cells(1, j)
                            i = Len(.Value)
                            .ColumnWidth = i * scaleFactor
                            .Font.Bold = True
                        End With
                    Next
                End With
            End If
         Next
         objWorkbook.Close True
    End If
Next

objExcel.Quit

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T10:47:30.540

Yes it is possible! This is hacked together from one of my codes, might need a bit of editing before it works...

```
'This deals with Excel already being open or not
On Error Resume Next
Set xl = GetObject(, "Excel.Application")
On Error GoTo 0
If xl Is Nothing Then
  Set xl = CreateObject("Excel.Application")
End If

Set XlBook = GetObject(filename)
'filename is the string with the link to the file ("C:/....blahblah.xls")

'Make sure excel is visible on the screen
xl.Visible = True
XlBook.Windows(1).Visible = True
'xl.ActiveWindow.Zoom = 75

'Define the sheet in the Workbook as XlSheet
Set xlsheet1 = XlBook.Worksheets(1)

'Then have some fun!
with xlsheet1
    .range("A1") = "some data here"
    .columns("A:A").HorizontalAlignment = xlRight
    .rows("1:1").font.bold = True
end with

'And so on... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:04:03.657

我也遇到过几次这个问题。正如@Remou 所说，您将需要打开 excel 来格式化 xls 文件，对代码的这种修改会静默地打开 Excel，这应该会让您朝着正确的方向前进。请记住在您的 VBA 项目中添加对 Microsoft Excel 对象库的引用。

```
Sub OutPutXL()
Dim qdf As QueryDef
Dim rs As DAO.Recordset
Dim xl as Excel.Application
Dim wb as Object
Dim strFile as string

Set qdf = CurrentDb.QueryDefs("OutputStudents")
Set rs = CurrentDb.OpenRecordset("Teachers")
Set xl = New Excel.Application
xl.DisplayAlerts = False

Do While Not rs.EOF
    qdf.SQL = "SELECT * FROM Students WHERE contact='" & rs!contact & "'"

    'Output to Excel
    strFile = "C:\Users\chrisjones\Documents\ProjectionsFY14\Teachers\" & rs!contact & ".xls"
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel8, qdf.Name, strFile, True

    'Start formatting'
    Set wb = xl.Workbooks.Open(strFile)
    With wb.Sheets(qdf.name)
        'Starting with a blank excel file, turn on the record macro function'
        'Format away to hearts delight and save macro'
        'Past code here and resolve references'
    End With
    wb.save
    wb.close
    set wb = Nothing
    rs.MoveNext
Loop
xl.quit
set xl = Nothing
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:39:13.847

您可以（取决于文件的数量）为要输出的每个文件制作一个模板。从长远来看，如果有人需要更改格式，他们可以更改模板，这对您来说会更容易，因为您不必筛选一堆 excel 格式垃圾。您甚至可以让合格的最终用户来做。

如果我编写了我负责的 VBA，直到我为此而死，这是我使用 excel 表时遇到的最大问题之一。这样（理论上）他们应该能够更改列，而无需更改数据的输出方式，只是在没有您的情况下呈现。

+1打开excel文件本身并使用该自动化对其进行格式化。

# perl - 如何为 git 更新 Perl v5.8.8？

> ID：14400819
> 
> 赞同：0
> 
> 时间：2013-01-18T14:17:43.780
> 
> 标签：perl, git, qt

我有以下问题。

我想自己构建 Qt5，以便能够将它与 Visual Studio 2012 一起使用。我按照[Qt Wiki](http://qt-project.org/wiki/Building-Qt-5-from-Git#0b79795d3efc95b9976c7c5b933afce2)中的说明进行操作。

我的问题是当我尝试调用 init-repository

```
perl init-repository 
```

我收到以下错误：

```
Hint: Make sure that Perl is added to the path in front of git since that ships an outdated version (Perl 5.8), which will cause the scripts to fail. 
```

这是因为带有 git 的 perl 版本是 5.8.8。没关系，我安装了最新版本。

有人可以告诉我如何在 git 中更新我的 perl 版本，以便能够构建 Qt5 吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:03:55.450

听起来您正在使用 Windows，我假设使用了一些最新版本的`msysgit`.

如果你使用的是自带的shell `msysgit`，那么很可能是shell修改了你的`PATH`变量放在`/bin`前面`/c/path/to/new/perl`。您可以通过打开 shell 并运行`echo $PATH`甚至`which perl`.

要使 shell 使用您的“新”perl，您可以尝试以下操作：

`export PATH=/c/path/to/new/perl:$PATH`

# java - 将 JSF inputText 与支持 bean 的字段链接而不显示其值

> ID：14400820
> 
> 赞同：6
> 
> 时间：2013-01-18T14:17:46.980
> 
> 标签：java, jsf-2

我有这样的支持bean：

```
@ManagedBean
@SessionScoped
public class TestBean {

    private String testString;

    public String getTestString() {
        return testString;
    }

    public void setTestString(String testString) {
        this.testString = testString;
    }
} 
```

我的 xhtml 页面也很简单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >

    <h:head></h:head>

    <h:body>

        <h:form>
            <h:inputText value="#{testBean.testString}"/>
            <h:commandButton action="#{testController.testAction}"/>
        </h:form>

    </h:body>

 </html> 
```

我想要的一切 - 渲染我的`h:inputText`元素没有价值（空）。
我是 JSF 的新手，所以，你能帮帮我吗？
最诚挚的问候！

**更新！**
它是简化的代码，我`testString`在其他地方使用并且`testString`具有价值，我想隐藏它！我想保持这个价值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:36:05.867

如果它真的是一个[请求/视图范围](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)的bean，那么您很可能是浏览器内置自动完成/自动填充功能的受害者。`autocomplete="off"`您可以通过添加到有问题的输入组件来关闭它。

```
<h:inputText ... autocomplete="off" /> 
```

再次注意，填充输入的不是 JSF，而是网络浏览器本身。清除浏览器缓存，您会看到浏览器不会再这样做了。根据浏览器的品牌/版本，您还可以重新配置它以不那么急切地自动完成。

* * *

**更新**：根据您的问题更新，您的 bean 原来是会话范围的。这不是基于请求/视图的表单的正常范围。会话范围的 bean 实例在同一个 HTTP 会话中的所有浏览器窗口/选项卡（阅读：所有请求/视图）之间共享。您通常只在会话中存储登录用户及其首选项（语言等）。当您关闭并重新启动整个浏览器或使用不同的浏览器/机器时，您只会获得一个全新的实例。

将其更改为请求或查看范围。在这个特别简单的例子中，请求范围应该足够了：

```
@ManagedBean
@RequestScoped 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

**根据评论**更新2 ，****

 **> *哦，对了，我最好使用@RequestScoped。但这并不能解决我的问题——我想保留这个值，但我不想在 textInput 中显示它。该值在请求-响应周期的上下文中很重要。*

现在具体的功能要求更加清晰了（在以后的问题中，请注意在准备问题时，我不知道您最初是这样问的）。在这种情况下，使用具有 2 个属性的视图范围 bean，如下所示：

```
@ManagedBean
@ViewScoped
public class TestBean {

    private String testString;
    private String savedTestString;

    public void testAction() {
        savedTestString = testString;
        testString = null;
    }

    // ...
} 
```

例如，您也可以将其存储在数据库或注入的托管 bean 的属性中，而后者实际上又位于会话范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:40:34.057

您应该将输入文本绑定到支持 bean 中的某个其他字段。如果您想将该字段用于您的`testString`，请将输入的值复制到`testString`方法中`testAction`。

```
<h:form>
     <h:inputText value="#{testBean.copyTestString}"/>
     <h:commandButton action="#{testController.testAction}"/>
</h:form>    

public String testAction()
{
    testString = copyTestString;
    return "destinationPage";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T10:35:55.877

一些浏览器忽略自动完成 - 它可以帮助将自动完成放在表单标签中：

```
<h:form autocomplete="off"> 
```**

# apache-camel - 如何使用 Apache Camel 在浏览模式下从 AMQP 队列消费？

> ID：14400821
> 
> 赞同：1
> 
> 时间：2013-01-18T14:17:49.273
> 
> 标签：apache-camel, amqp

amqp 端点是否有类似“浏览”选项（请参阅第[2.4.3.3 节。浏览](http://qpid.apache.org/books/0.14/Programming-In-Apache-Qpid/html/ch02s04.html)以了解详细信息）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T12:49:47.663

我最终想通了，我只是认为该选项应该在骆驼组件选项级别上，即在连接字符串之后以例如“？mode =browse”的形式，但该选项实际上是在amqp连接级别上设置 - “我的队列；{模式：浏览}"。您可以设置骆驼组件选项添加“？选项=值”。

PS 在 amqp 连接级别上设置选项适用于偶数驱动（默认骆驼）路由，但它不适用于轮询驱动的路由，有关详细信息，请参阅[https://issues.apache.org/jira/browse/CAMEL-6784](https://issues.apache.org/jira/browse/CAMEL-6784) .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:33:16.943

有一个“浏览”组件。`to("browse:dummy")`，但这只会使浏览通过此路由的消息成为可能。在某些情况下很方便，但不是真正作为 JMS 浏览选项。

您可以做的是使用 a`BrowsableEndpoint`进行 JMS 浏览（也应该与 AMQP 一起使用，因为它基于 JMS 客户端，但尚未尝试过）。

您不能真正收到消息并且不删除它，因此您需要其他东西来触发您的浏览。例如计时器或触发器队列。

```
from("amqp:queue:trigger")
        .process(new Processor(){
            @Override
            public void process(Exchange arg0) throws Exception {
                    BrowsableEndpoint browse = arg0.getContext().getEndpoint("amqp:queue:archive", BrowsableEndpoint.class);
                    List<Exchange> exchanges = browse.getExchanges();
                    System.out.println("Browsing queue: "+ browse.getEndpointUri() + " size: " + exchanges.size());
                    for (Exchange exchange : exchanges) {
                        String payload = exchange.getIn().getBody(String.class);
                        String msgId = exchange.getIn().getHeader("JMSMessageID", String.class);
                        System.out.println(msgId + "=" +payload);
                    }
               }
        }); 
```

你可以做一个预路由来实现这个触发器。

```
from("amqp:queue:processQueue")
   .to("amqp:queue:archive")
   .transform().constant("trigger msg")
   .to("amqp:queue:trigger"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:15:39.473

是的。在 AMQP 0-10 中，message.subscribe 上有一个获取模式选项，如果设置为未获取，则会导致浏览订阅。在 AMQP 1.0 中，通过在建立订阅者时为源指定“复制”的分发模式来实现相同的目的关联。

但是，假设您通过 JMS 客户端访问 AMQP，那么正如 Petter 上面所说，您应该能够使用我想象的 JMS 定义的浏览工具（我对骆驼还不够熟悉，不知道它是如何完成的）。

# .net - 构建具有集成安全性的 SQL 连接字符串以通过 VPN 使用？

> ID：14400823
> 
> 赞同：3
> 
> 时间：2013-01-18T14:18:03.107
> 
> 标签：.net, sql, winforms, connection-string

我有连接到 SQL 数据库的 Winforms 应用程序。我们正在更改连接字符串，以便它们现在将使用集成安全性（Windows 身份验证）而不是 SQL 身份验证。我们有一些案例，人们在家用计算机上通过 VPN 使用该应用程序。

通过 SQL 身份验证连接到数据库不是 VPN 的问题。我想知道.NET 中是否有一种方法可以使用指定的用户 Windows 凭据构建连接字符串以连接到 SQL 数据库。

我看过[这个](https://stackoverflow.com/questions/9671904/connect-to-sql-via-windows-authentification-over-vpn)问题。但我正在使用的应用程序是 Click-Once 应用程序。我不确定这是否可行。我希望有一个最终用户几乎不需要任何努力的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:39:24.737

VPN是一条红鲱鱼。问题是用户未在与 SQL Server 相同的域下登录。任何未加入域的 PC 都会出现同样的问题，无论是否在 VPN 上。

1.  您可以将 PC 加入域。这是最好的解决方案。

2.  您可以使用 Legacy 方法 - 创建匹配的用户名和密码。但是，您需要确保它们保持同步。

3.  `NetUseAdd`连接 VPN 后，您可以使用 NET USE 命令或API 登录域。

有关更多信息，请参阅此问题：

*   这是最适合您使用的：[SQL Server Integrated Security](https://stackoverflow.com/questions/10752084/sql-server-integrated-security/10752761#10752761)

*   但另请参阅：[SQL Server Management Studio 2008 Runas user on different domain over VPN](https://stackoverflow.com/questions/5237654/sql-server-management-studio-2008-runas-user-on-different-domain-over-vpn/5362712#5362712)

# dynamics-crm-2011 - CMR 2011 中的可能性

> ID：14400824
> 
> 赞同：1
> 
> 时间：2013-01-18T14:18:19.613
> 
> 标签：dynamics-crm-2011

考虑 CRM 2011 的以下要求：

需要 2 个自定义实体，比如说 EntityA 和 EntityB。
EntityA 包含以下字段：

*   ContactA（查找联系人）
*   ContactB（查找联系人）
*   客户（在帐户上查找）

EntityB 包含以下字段：

*   受益人（查找联系人或帐户）

必须将一个按钮添加到 EntityA 形式的功能区。单击此按钮时，必须启动一个对话框，用户可以在其中选择是否使用字段 ContactA、ContactB 或 Customer。进行选择并关闭对话框后，必须创建一个新的 EntityB 并将字段 Beneficiary 的值设置为在对话框中选择的值。

此外，EntityB 的表单必须在功能区中获得一个新按钮。单击此按钮时，将执行报表服务器上的报表。不得显示该报告，而是必须生成 PDF，该 PDF 必须附加到电子邮件活动中，并且必须将电子邮件发送给受益人。

恐怕在 CRM 2011 中并非所有要求都是可能的：

*   是否可以在 2 个或更多实体上创建查找（例如可以查找 SystemUser 和 Team 值的 OwnerId）？
*   是否可以从功能区按钮启动对话框？
*   是否可以在对话框中使用现有实体的值？
*   是否可以立即从报告中生成 pdf 以将其添加为邮件附件？

CRM 环境由合作伙伴托管，但 CRM 没有沙盒，可以使用本地资源。想到的另一个选择是创建一个外部 Web 应用程序来克服一些瓶颈，而不是在 CRM 2011 中创建它。这是一种可能性还是只是一个坏主意？

感谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:00:29.053

是否可以在 2 个或更多实体上创建查找（例如可以查找 SystemUser 和 Team 值的 OwnerId）？-**答**：不。检查[这个链接](https://stackoverflow.com/questions/13526645/how-to-create-a-field-of-type-customer-in-dynamics-crm-2011)。但是您可以使用两个查找字段和一个选项集来解决这个问题，该选项集将是过滤器字段。

是否可以从功能区按钮启动对话框？-**答案**：是的。你有很多[关于这个](http://mscrmshop.blogspot.com/2011/06/how-to-start-dialog-from-application_08.html)[主题的](http://crmdm.blogspot.com/2011/07/how-to-call-dialog-in-crm-2011-using.html)[文章](http://ankit.inkeysolutions.com/2012/02/crm-2011-launch-dialog-on-click-of.html) 。

是否可以在对话框中使用现有实体的值？-**答案**：是的。您可以使用选定实体的值，您将为其启动对话框。还要检查这些链接以创建对话框。

是否可以立即从报告中生成 pdf 以将其添加为邮件附件？-**答**：我没有这方面的经验，但有些文章说这是可能的。检查[这](http://crmallied.blogspot.com/2012/04/expport-fetchxml-reports-as-pdf.html) [两个帖子](http://xrmmatrix.blogspot.com/2011/06/creating-report-as-pdf-attachment-in.html)。

我希望这个能帮上忙 ：）

# firebase - 从 firebase facebook 登录接收错误：“属性电子邮件中未定义”

> ID：14400825
> 
> 赞同：0
> 
> 时间：2013-01-18T14:18:27.030
> 
> 标签：firebase

我正在通过 facebook 身份验证使用 firebase 进行身份验证，并且它不断返回：

```
Uncaught Error: transaction failed: Data returned contains undefined in property email 
```

大约一周前，这工作得很好。奇怪的是，如果我尝试连续第二次进行身份验证，那么我的个人帐户就会起作用。但是，我通过开发人员仪表板在 facebook 上创建了一些测试帐户，这些帐户在使用 facebook auth 屏幕登录后总是返回此错误。

任何帮助都非常感谢，因为 firebase.js 文件中的代码似乎失败了，所以我无法调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:31:24.720

我很抱歉我已经解决了这个问题。我正在从 facebook 响应中寻找 user.email，而它应该是 user.emails，其中 emails 是一个数组。对不起，过早的帖子。- 鳟鱼

# iphone - 在不中断触摸的情况下检测 2 次滑动

> ID：14400828
> 
> 赞同：1
> 
> 时间：2013-01-18T14:18:35.970
> 
> 标签：iphone, ios, cocos2d-iphone, uigesturerecognizer, swipe

我正在尝试实现将改变单位移动方向的游戏控制。因此，如果我向右滑动它会向右转，如果我向下滑动它会转向向下等等。

这是 cocos2d 游戏，我正在`CCNode+SFGestureRecognizers`使用`UISwipeGestureRecognizer`.

现在我有下一个实现它

```
UISwipeGestureRecognizer *rightSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightSwipe:)];
        [self addGestureRecognizer:rightSwipeGestureRecognizer];
        rightSwipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
        rightSwipeGestureRecognizer.delegate = self;
        [rightSwipeGestureRecognizer release];

        UISwipeGestureRecognizer *upSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleUpSwipe:)];
        [self addGestureRecognizer:upSwipeGestureRecognizer];
        upSwipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionUp;
        upSwipeGestureRecognizer.delegate = self;
        [upSwipeGestureRecognizer release];

        UISwipeGestureRecognizer *leftSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleLeftSwipe:)];
        [self addGestureRecognizer:leftSwipeGestureRecognizer];
        leftSwipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionLeft;
        leftSwipeGestureRecognizer.delegate = self;
        [leftSwipeGestureRecognizer release];

        UISwipeGestureRecognizer *downSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleDownSwipe:)];
        [self addGestureRecognizer:downSwipeGestureRecognizer];
        downSwipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionDown;
        downSwipeGestureRecognizer.delegate = self;
        [downSwipeGestureRecognizer release]; 
```

但问题是要识别以下手势，您需要将手指从屏幕上抬起。如果您在第一次滑动后没有抬起手指，它只会识别第一次滑动。

**现在：**

![在此处输入图像描述](../Images/91e428dab2d2139b31ec8aea4ce756d0.png)

**应该如何：**

![在此处输入图像描述](../Images/8c186da50a14a1078ac7a685da6595ee.png)

最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:46:00.533

[cancelsTouchesInView](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIGestureRecognizer/cancelsTouchesInView)应该会有所帮助，它可以防止在手势识别器识别出手势时取消触摸事件。这将允许其他手势识别器继续检查他们的手势。

```
 rightSwipeGestureRecognizer.cancelsTouchesInView = NO;
  upSwipeGestureRecognizer.cancelsTouchesInView = NO;
  leftSwipeGestureRecognizer.cancelsTouchesInView = NO;
  downSwipeGestureRecognizer.cancelsTouchesInView = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:20:24.307

好的，有我的解决方案。我不认为这是一个很好的解决方案，但在我的情况下它是有效的，因为我需要在每个时间间隔获得方向。

所以，在我的`CCLayer`子类中：

```
#define SWIPE_LENGTH        60
#define SWIPE_TANGENT       2

...

@property(nonatomic, assign) CGPoint latestLocation;

...

-(id) init
{
    if( (self=[super init]) )
        {
            self.isTouchEnabled = YES;
        }
    return self;
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    self.latestLocation = location;
}

- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    CGPoint delataLocation = CGPointMake(location.x - self.latestLocation.x, location.y - self.latestLocation.y);
    if ( sqrt(pow((delataLocation.x), 2) + pow((delataLocation.y), 2) ) > SWIPE_LENGTH ) {
        if (delataLocation.y > 0 && delataLocation.y > SWIPE_TANGENT * ABS(delataLocation.x))
        {
            [self handleSwipeWithDirestion:SDirectionTypeUp];
        } else if (delataLocation.y < 0 && ABS(delataLocation.y) > SWIPE_TANGENT * ABS(delataLocation.x))
        {
            [self handleSwipeWithDirestion:SDirectionTypeDown];
        } else if (delataLocation.x > 0 && delataLocation.x > SWIPE_TANGENT * ABS(delataLocation.y))
        {
            [self handleSwipeWithDirestion:SDirectionTypeRight];
        } else if (delataLocation.x < 0 && ABS(delataLocation.x) > SWIPE_TANGENT * ABS(delataLocation.y))
        {
            [self handleSwipeWithDirestion:SDirectionTypeLeft];
        }
        self.latestLocation = location;
    }
} 
```

# ruby-on-rails - 创建自定义 Rails 记录器

> ID：14400831
> 
> 赞同：1
> 
> 时间：2013-01-18T14:18:41.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

这是过时的吗？ [http://guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html) 我正在一步一步地关注它，

在“2.1 什么是记录器？”部分中

它说明了如何创建自定义记录器。

1）您可以在 environment.rb 或任何环境文件中指定替代记录器：

```
Rails.logger = Logger.new(STDOUT)
Rails.logger = Log4r::Logger.new("Application Log") 
```

我把这段代码放在我的 environment.rb 文件中，我得到了这个：

> 未初始化的常量 Log4r (NameError)

..然后它说“或者在初始化程序部分，添加以下任何内容：”

```
config.logger = Logger.new(STDOUT)
config.logger = Log4r::Logger.new("Application Log") 
```

我的 environment.rb 文件中没有初始化程序部分！我犯了同样的错误！

它说“如果您愿意，您也可以替换另一个记录器，例如 Log4r。” 为什么有人要替换现有的记录器？

我`Rails.logger = Log4r::Logger.new("Application Log")`从 environment.rb 文件中删除了。它似乎正在工作，但我期待在 log/ 目录中创建一个文件，但什么也没有。这是我的 enviroment.rb 文件：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

Rails.logger = Logger.new('Application Log')

# Initialize the rails application
MyApp::Application.initialize! 
```

帮助？请解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:28:49.743

You can set the Rails logger globally with:

```
Rails.logger = ... 
```

or you can put it into an environment file, e.g. in `config/environments/development.rb`

```
MyApp::Application.configure do
  config.logger = ...
end 
```

Next, `Log4r` is a separate gem that does not come with Rails. If you want to use it, add it to your Gemfile:

```
gem "log4r", "~> 1.1.10" 
```

> Why would somebody want to substitute an existing logger?

Because loggers have a different set of features. You might want to use a custom logger to upload the logs to an external service, process it etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T12:50:06.770

您需要在 application.rb 中要求 log4r。我假设你已经安装了 gem。然后在 application.rb

```
 require 'log4r' 
```

# meteor - 结合 Meteor 和 Express

> ID：14400839
> 
> 赞同：5
> 
> 时间：2013-01-18T14:19:13.613
> 
> 标签：meteor

我正在评估 Meteor 作为使用 socket.io 开发实时功能的替代方案，它看起来像是用于单页实时应用程序的很棒的框架。它可以让开发人员专注于应用程序的业务逻辑，而不是编写样板代码，从而节省大量时间。但是，我发现对于具有多个页面/路由和 REST api 的中型应用程序来说，它仍然为时过早。另外，像 i18n 这样的一些功能仍然不可用，这需要我自己投入一些时间来开发。

我认为如果我可以将 Meteor 和 Express 结合起来，并在 Meteor 真正出色的用例中使用它，那将是非常棒的。

是否可以使用标准 Express/Mongo 堆栈开发应用程序，并将 Meteor 仅用于需要实时协作的应用程序的特定部分？

例如，我可以在 Express/Connect 和 Meteor 之间共享会话吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:44:13.870

这并不能直接回答你的问题，但我想我会把它扔在那里：

您应该查看有关[气氛](http://atmospherejs.com/)的社区包。具体来说，我建议看一下[Iron-router](http://atmospherejs.com/iron/router)和[i18n](http://atmospherejs.com/anti/i18n)（我会注意我没有使用过后者）。

我已经构建了一个使用 Iron-router 的大型生产应用程序，并且运行平稳。您还可以使用其[服务器端路由](https://github.com/EventedMind/iron-router/blob/devel/DOCS.md#server-side-routing)功能来实现您的 REST api。

# scala - 在scala 2.10中通过java反射调用构造函数

> ID：14400840
> 
> 赞同：0
> 
> 时间：2013-01-18T14:19:14.533
> 
> 标签：scala, reflection, scala-2.10

在 Scala 2.10 之前，我有

```
class A {
    class B(b: Int) {
    }
} 
```

并在代码中的某处重新创建 B 类

```
val bCtor = bInstance.getClass.getConstructor(classOf[Int])
bCtor.newInstance ... 
```

一切都很好。有签名`public A$B(Int)`

现在构造函数有 2 个！！！论据。它有一个新的签名`public A$B(A,Int)`。类型 A 的参数是什么？我无法从我的函数访问 A 类。它有什么解决方法吗？

例如[带有参数的 newInstance](https://stackoverflow.com/questions/5366057/newinstance-with-arguments) - 它不再适用于内部类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:57:14.163

注意不要将 java 内部类与 scala 路径相关类型混淆（来自[Programming In ScalaBook](http://www.artima.com/shop/programming_in_scala_2ed%20%22Progamming%20In%20Scala%20Book%22%29)）：

> 依赖于路径的类型类似于 Java 中的内部类类型的语法，但有一个关键的区别：依赖于路径的类型命名为外部**对象**，而内部类类型命名为外部**类**

因此，在您的情况下，bInstance 与 aInstance 有关。

我的假设是 aInstance 是作为第一个参数传递给此构造函数的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T04:31:15.800

首先，添加`A`作为第一个构造函数参数也是它在 Java 中的工作方式：

> > [如果此 Class 对象表示在非静态上下文中声明的内部类，则形式参数类型包括显式封闭实例作为第一个参数。](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)

第二，

> 类型 A 的参数是什么？我无法从我的函数访问 A 类。

如果您有一个`B`（从您的示例中可以看出），那么您可以[访问它的封闭实例](http://jroller.com/tomdz/entry/reflection_inner_classes)（它似乎没有正式记录，因此在 Java 的未来版本中可能会发生变化）：

```
val aInstance = bInstance.getClass.getDeclaredField("this$0").get(bInstance)
bCtor.newInstance(aInstance, ...) 
```

如果你不这样做，那么你不能创建一个`B`（没有一个`A`），但你不应该能够。您希望此代码返回什么？

```
class A(foo: Int) {
  class B {
    def bar = foo
  }
}

classOf[A#B].getConstructor().newInstance().bar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:06:16.837

您可以使用不受约束的自类型注释来有一种方法可以`this`从 B 中引用 A 的版本（`this`现在指的是 B 实例）。

```
package rrs.scribble

object  OuterInner {
  class Outer { oThis =>
    class Inner {
      def identify { printf("I am %s; I'm inside of %s%n", this, oThis) }
    }
    val inner = new Inner
  }

  def oiTest {
    val o1 = new Outer
    o1.inner.identify
  }
} 
```

在 REPL 中：

```
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).

scala> import rrs.scribble.OuterInner._
import rrs.scribble.OuterInner._

scala> oiTest
I am rrs.scribble.OuterInner$Outer$Inner@63d0d313; I'm inside of rrs.scribble.OuterInner$Outer@22d1b797 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:11:03.867

@evantill 是对的， is 的唯一构造`B`函数`A$B.<init>(A, Int)`。所以`bInstance.getClass.getConstructor(classOf[A], classOf[Int])`有效。

# delphi - 如何在 Delphi 中对字节进行位反射？

> ID：14400845
> 
> 赞同：13
> 
> 时间：2013-01-18T14:19:24.090
> 
> 标签：delphi, byte, bit-manipulation

是否有一种简单的方法可以在 Delphi 中对字节变量进行位反射，以便最高有效位 (MSB) 获得最低有效位 (LSB)，反之亦然？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-18T14:27:11.987

在代码中，您可以这样做：

```
function ReverseBits(b: Byte): Byte;
var 
  i: Integer;
begin
  Result := 0;
  for i := 1 to 8 do
  begin
    Result := (Result shl 1) or (b and 1);
    b := b shr 1;
  end;
end; 
```

但是查找表会更有效，并且只消耗 256 字节的内存。

```
function ReverseBits(b: Byte): Byte; inline;
const
  Table: array [Byte] of Byte = (
    0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,
    8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,
    4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,
    12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,
    2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,
    10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,
    6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,
    14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,
    1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,
    9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,
    5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,
    13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,
    3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,
    11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,
    7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,
    15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255
  );
begin
  Result := Table[b];
end; 
```

这比在单个位上运行的代码版本快 10 倍以上。

* * *

最后，当我有一个相互竞争的答案时，我通常不喜欢对已接受的答案发表过于消极的评论。在这种情况下，您接受的答案存在非常严重的问题，我想为您和任何未来的读者明确说明。

您当时接受了@Arioch 的答案，当时它包含与此答案中可以看到的相同的 Pascal 代码，以及两个汇编程序版本。事实证明，那些汇编版本比 Pascal 版本慢得多。它们的速度是 Pascal 代码的两倍。

将高级代码转换为汇编程序会导致代码更快，这是一个常见的谬误。如果你做得不好，那么你很容易产生比编译器发出的代码运行得更慢的代码。有时值得在汇编程序中编写代码，但如果没有适当的基准测试，您绝不能这样做。

在这里使用汇编程序特别令人震惊的是，很明显基于表格的解决方案将非常快。很难想象如何显着改善这一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-18T14:38:14.447

```
function ByteReverseLoop(b: byte): byte;
var i: integer;
begin
  Result := 0; // actually not needed, just to make compiler happy

  for i := 1 to 8 do
  begin
    Result := Result shl 1; 
    if Odd(b) then Result := Result or 1;
    b := b shr 1;
  end;
end; 
```

如果速度很重要，那么您可以使用查找表。您在程序启动时感觉到它一次，然后您只需从表中获取一个值。由于您只需要将字节映射到字节，因此需要 256x1=256 字节的内存。并且鉴于最近的 Delphi 版本支持内联函数，这将提供速度、可读性和可靠性（在函数中封装数组查找，您可能会确定不会由于某些拼写错误而更改值）

```
Var ByteReverseLUT: array[byte] of byte;

function ByteReverse(b: byte): byte; inline;
begin Result := ByteReverseLUT[b] end;

{Unit/program initialization}
var b: byte;
    for b := Low(ByteReverseLUT) to High(ByteReverseLUT) 
        do ByteReverseLUT[b] := ByteReverseLoop(b); 
```

* * *

本论坛上提到的几种实现的速度比较。
*AMD Phenom2 x710 / Win7 x64 / Delphi XE2 32 位 {$O+}*

```
Pascal AND original:       12494
Pascal AND reversed:       33459
Pascal IF original:        46829
Pascal IF reversed:        45585

       Asm SHIFT 1:        15802
       Asm SHIFT 2:        15490
       Asm SHIFT 3:        16212

         Asm AND 1:        19408
         Asm AND 2:        19601
         Asm AND 3:        19802 
```

帕斯卡与展开：10052 Asm 移位展开：4573 LUT，称为：3192 帕斯卡数学，称为：4614

[http://pastebin.ca/2304708](http://pastebin.ca/2304708)

*注意：LUT（查找表）时序在这里可能相当乐观。由于在紧密循环中运行，整个表被吸入 L1 CPU 缓存。在实际计算中，该函数的调用频率很可能要低得多，并且 L1 缓存不会完全保留该表。*

* * *

Pascal 内联函数调用结果是虚假的 - Delphi 没有调用它们，检测它们没有副作用。但有趣的是——时间不同。

```
 Asm Shift unrolled:         4040
             LUT, called:         3011
            LUT, inlined:          977
         Pascal unrolled:        10052
  Pas. unrolled, inlined:          849
     Pascal math, called:         4614
    Pascal math, inlined:         6517 
```

并在解释下方：

```
Project1.dpr.427: d := BitFlipLUT(i)
0044AC45 8BC3             mov eax,ebx
0044AC47 E89CCAFFFF       call BitFlipLUT

Project1.dpr.435: d := BitFlipLUTi(i)

Project1.dpr.444: d := MirrorByte(i);
0044ACF8 8BC3             mov eax,ebx
0044ACFA E881C8FFFF       call MirrorByte

Project1.dpr.453: d := MirrorByteI(i);
0044AD55 8BC3             mov eax,ebx

Project1.dpr.460: d := MirrorByte7Op(i);
0044ADA3 8BC3             mov eax,ebx
0044ADA5 E8AEC7FFFF       call MirrorByte7Op

Project1.dpr.462: d := MirrorByte7OpI(i);
0044ADF1 0FB6C3           movzx eax,bl 
```

消除了对内联函数的所有调用。然而，关于传递参数，Delphi 做出了三个不同的决定：

1.  对于第一次调用，它消除了与函数调用一起传递的参数
2.  对于第二次调用，它保持参数传递，尽管没有调用函数
3.  对于第 3 次调用，它保持更改参数传递，这证明比函数调用本身更长！奇怪的！:-)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-18T16:08:34.977

```
function BitFlip(B: Byte): Byte;
const
  N: array[0..15] of Byte = (0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15);
begin
  Result := N[B div 16] or N[B mod 16] shl 4;
end; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-19T15:24:54.377

使用蛮力可以简单而有效。

此例程与 David~~的~~LUT 解决方案不同。

**更新**

添加了字节数组作为输入，并将结果分配给字节数组。这显示了 LUT 解决方案的更好性能。

```
function MirrorByte(b : Byte) : Byte;  inline;
begin
  Result :=
    ((b and $01) shl 7) or
    ((b and $02) shl 5) or
    ((b and $04) shl 3) or
    ((b and $08) shl 1) or
    ((b and $10) shr 1) or
    ((b and $20) shr 3) or
    ((b and $40) shr 5) or
    ((b and $80) shr 7);
end; 
```

**更新 2**

谷歌搜索了一下，找到了[`BitReverseObvious`](http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious)。

```
function MirrorByte7Op(b : Byte) : Byte;  inline;
begin
  Result :=
    {$IFDEF WIN64}  // This is slightly better in x64 than the code in x32
    (((b * UInt64($80200802)) and UInt64($0884422110)) * UInt64($0101010101)) shr 32;
    {$ENDIF}
    {$IFDEF WIN32}
    ((b * $0802 and $22110) or (b * $8020 and $88440)) * $10101 shr 16;
    {$ENDIF}
end; 
```

这个更接近 LUT 解决方案，在一次测试中甚至更快。

> 总而言之，**MirrorByte7Op()**在 3 个测试中比 LUT 慢 5-30%，在一个测试中快 5%。

基准代码：

```
uses
  System.Diagnostics;

const 
  cBit : Byte = $AA;
  cLoopMax = 1000000000;
var
  sw : TStopWatch;
  arrB : array of byte;
  i : Integer;

begin
  SetLength(arrB,cLoopMax);
  for i := 0 TO Length(arrB) - 1 do
    arrB[i]:= System.Random(256);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    b := b;
  end;
  sw.Stop;
  WriteLn('Loop             ',b:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    b := ReflectBits(arrB[i]); 
  end;
  sw.Stop;
  WriteLn('RB array in:     ',b:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    b := MirrorByte(arrB[i]);
  end;
  sw.Stop;
  WriteLn('MB array in:     ',b:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    b := MirrorByte7Op(arrB[i]);
  end;
  sw.Stop;
  WriteLn('MB7Op array in : ',arrB[0]:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    arrB[i] := ReflectBits(arrB[i]);
  end;
  sw.Stop;
  WriteLn('RB array in/out: ',arrB[0]:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    arrB[i]:= MirrorByte(arrB[i]);
  end;
  sw.Stop;
  WriteLn('MB array in/out: ',arrB[0]:3,' ',sw.ElapsedMilliSeconds);

  sw := TStopWatch.StartNew;
  for i := 0 to Pred(cLoopMax) do
  begin
    arrB[i]:= MirrorByte7Op(arrB[i]);
  end;
  sw.Stop;
  WriteLn('MB7Op array in/out: ',arrB[0]:3,' ',sw.ElapsedMilliSeconds);

  ReadLn;

end. 
```

基准测试结果（XE3、i7 CPU 870）：

```
 32 bit     64 bit
--------------------------------------------------
Byte assignment (= empty loop)   599 ms    2117 ms
MirrorByte    to byte, array in 6991 ms    8746 ms
MirrorByte7Op to byte, array in 1384 ms    2510 ms
ReverseBits   to byte, array in  945 ms    2119 ms
--------------------------------------------------
ReverseBits   array in/out      1944 ms    3721 ms
MirrorByte7Op array in/out      1790 ms    3856 ms
BitFlipNibble array in/out      1995 ms    6730 ms
MirrorByte    array in/out      7157 ms    8894 ms
ByteReverse   array in/out     38246 ms   42303 ms 
```

* * *

我在表格的最后部分添加了一些其他建议（全部内联）。在一个循环中进行测试可能是最公平的，其中一个数组输入，一个数组作为结果。`ReverseBits`(LUT) 和`MirrorByte7Op`速度相当，其次是`BitFlipNibble`(LUT)，它在 x64 中的表现略逊一筹。

注意：我为 .x64 位部分添加了一个新算法`MirrorByte7Op`。它更好地利用了 64 位寄存器并且指令更少。

# sql - 用户定义的表类型参数

> ID：14400847
> 
> 赞同：1
> 
> 时间：2013-01-18T14:19:28.723
> 
> 标签：sql, user-defined-types

**代码**

```
CREATE TYPE [dbo].[IntListType] AS TABLE([Number] [int] NULL)
DECLARE @ids as IntListType;
DECLARE @TempIds as IntListType; 
```

**情况**

我有一长串需要在存储过程中过滤的产品。过滤器以用户定义的表类型给出，每个过滤器可以为空或已满。我试图为此创建一个查询，但如果其中一个过滤器为空，它将不起作用。

所以我决定创建另一个用户定义的表类型，它只包含列：数字。

然后，对于每个过滤器类型，它将检查它是否为空 `IF (select filterName from @customtable) is not null` ，如果是，它将查询与该名称匹配的产品 ID 并将其添加到数字列表中。

如果下一个过滤器不是空的，它会将 id 添加到临时表中，然后将与第一个表合并。

到目前为止，我发现这是处理过滤器是否为空的最有效方法。无论如何它都会得到我需要的id！

现在，每个过滤器最终都会执行以下代码：

```
IF (select count(*) from @ids) > 0
BEGIN               
    IF(select count(*) from @TempIds)
    BEGIN
    delete from @ids
        where Number not in 
            (select C.Number 
            from @ids C 
            inner join @TempIds T on C.Number = T.Number)       
    END
END
ELSE
BEGIN
    insert into @ids
    select * from @TempIds
END
delete from @TempIds 
```

**问题**

我正在寻找一种将最后命名的代码实现到存储过程中的方法，它可以返回一个 IntListType 列表。但是，我对@ids 的每个实现（`declare @ids as IntListType) can't be set. (asin`设置@ids = @TempIds' > 都会抱怨'必须声明标量变量@ids'以及'@TempIds'）

我怎样才能解决这个问题？

**尝试**

我已经尝试通过将每个表与内部联接、外部联接和其他联接相结合来跳过这一切。但是当任何（或所有）过滤器为空时，我绝不会得到相同的结果。

据我所知，这是有效推进每种过滤器类型的唯一方法，检查它们是否为空，如果不是；处理结果等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:51:06.887

在您共享的查询部分中，没有@ids 或@TempIds 的声明。你可以添加那部分吗？

除此之外，我认为您不应该查看 User-Defined Type: [Can T-SQL function return user-defined table type？](https://stackoverflow.com/questions/2501324/can-t-sql-function-return-user-defined-table-type)

看看用户定义的函数：

*   [http://www.sqlteam.com/article/user-defined-functions](http://www.sqlteam.com/article/user-defined-functions)
*   [http://blog.sqlauthority.com/2007/05/29/sql-server-user-defined-functions-udf-limitations/](http://blog.sqlauthority.com/2007/05/29/sql-server-user-defined-functions-udf-limitations/)
*   [tsql 从函数或存储过程返回表](https://stackoverflow.com/questions/440308/tsql-returning-a-table-from-a-function-or-store-procedure)

# css - HTML 布局居中

> ID：14400848
> 
> 赞同：0
> 
> 时间：2013-01-18T14:19:29.007
> 
> 标签：css, layout, html

我正在尝试创建一个 HTML 布局，并且我已经创建了许多元素并在我的 CSS 中给它们一个边框等。我试图使主要的“包装器”居中，因此该元素内的所有内容也都居中。

我已经尝试了所有方法，边距、对齐、绝对等，但没有任何效果。我的住宿位于页面的左上角。

这是我的索引页面，其中的元素是：

```
<!--#include file ="inc.heads.asp"-->

<html>

<head>
</head>

<body>
 <div id ="divWrapper">
  <div id ="divHeader">
   <img src="Images/title.png">
   <br>
   <div id ="divNavBar">
    <br>
     <div id ="divContent">
     </div>
   </div>
  </div>
 </div>
</body>

</html> 
```

这是我的CSS：

```
body {
 background-color: #300;
}

#divWrapper {
 margin: 0 auto;
 width: 800px;
}

#divHeader {
 width: 500px;
 border-style: inset;
 border-color: #COCOCO;
 background-color: #707070;
 padding: 5px;
}

#divNavBar {
width: 500px;
border-style: inset;
border-color: #COCOCO;
background-color: #707070;
padding: 5px;
}

#divContent {
 float: left;
 width: 500px;
 border-style: inset;
 border-color: #COCOCO;
 background-color: #707070;
 padding: 5px;
} 
```

如果有人可以阐明为什么我尝试过的所有方法都不起作用以及可能的解决方案是什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:48:56.157

我想这就是你想要的。**链接**：[http ://codepen.io/anon/pen/Ihzxp](http://codepen.io/anon/pen/Ihzxp)

```
<body>
 <div id="divWrapper">
  <div id="divHeader">
   <img src="http://blog.codepen.io/wp-content/uploads/2012/06/Button-Fill-Black-Small.png">
   <div id="divNavBar">
     <div id="divContent">
       Stuff
     </div>
   </div>
  </div>
 </div>
</body> 
```

和

```
body {
 background-color: #300;
}

#divWrapper {
 width: 100%;
}

#divHeader {
 width: 600px;
 border-style: inset;
 border-color: #COCOCO;
 background-color: #707070;
 padding: 5px;
margin: 5px auto;
 text-align:center;
}

#divNavBar {
width: 550px;
border-style: inset;
border-color: #COCOCO;
background-color: #707070;
padding: 15px;
margin: 5px auto;
}

#divContent {
 width: 500px;
 border-style: inset;
 border-color: #COCOCO;
 background-color: #707070;
 padding: 5px;
 margin: 5px auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:01:21.110

说真的，所有这些包装器的意义何在？只需这样做：

```
body {width: 800px; margin: 0 auto; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:21:45.733

```
#divWrapper{
   margin-left:auto;
   margin-right:auto;
} 
```

应该做的伎俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:23:10.990

只需添加`margin: 0 auto`以下内容`#divWrapper`：

例如，添加到您的 CSS：

```
#divWrapper * {
    margin: 0 auto;
} 
```

如果您只希望`div`元素居中，请使用：

```
#divWrapper div {
    margin: 0 auto;
} 
```

您可以在此处查看工作演示 > [http://jsfiddle.net/gu7Sr/](http://jsfiddle.net/gu7Sr/)

另外，作为一个侧面说明，尽量避免`<br />`用于创建布局。它不会很好地扩展，将来您将很难重新设计！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:54:02.193

更多只是对 BenM 答案的评论，但我还没有评论的声誉。很确定只是：

```
margin:auto; 
```

会自己解决问题的。

# entity-framework - 实体框架 - 不区分大小写包含？

> ID：14400856
> 
> 赞同：43
> 
> 时间：2013-01-18T14:19:44.157
> 
> 标签：entity-framework

我想要一个不涉及 ToUpper 或 ToLower 的问题的解决方案，就像我在下面的代码中使用的那样；

```
var upper = term.ToUpper();
using (var db = this.DataContext)
{
    return db.Counties.Where(x => x.CountyName.ToUpper().Contains(upper)).ToList();
} 
```

我正在使用完整的框架，所以使用的 C# 解决方案`StringComparison.CurrentCultureIgnoreCase`不起作用。它确实适用于`Equals`,`EndsWith`和`StartsWith`，但不适用于`Contains`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-02T15:18:54.450

我使用 EF6 和 Sql Server，并且在我的情况下`Contains`映射到`LIKE '%@p0%'`不区分大小写的服务器。所以在我的情况下：

```
db.Counties.Where(x => x.CountyName.Contains(term)).ToList(); 
```

根据需要工作。[Sjoerd 答案](https://stackoverflow.com/a/11965710/1718832)中的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-06T20:20:31.747

我知道这与 EF 没有直接关系，但我能想到的唯一解决方案是将 DB 表列排序规则更改为不区分大小写，例如：

```
ALTER TABLE TABLENAME ALTER COLUMN COLUMNNAME nvarchar(100) COLLATE Latin1_General_CI_AS NULL 
```

CI - 不区分大小写 / CS - 区分大小写

AS - 重音敏感 / AI - 重音不敏感（也很有用）

如果您无法更改表列的排序规则，您可以使用来自 EF 的直接查询和强制排序规则

```
select * 
from table
where country collate Latin1_General_CI_AS != @country 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T14:22:02.793

只需`.ToLower()`从`upper`

```
 using (var db = this.DataContext)
            {
                return db.Counties
                       .Where(x => x
                       .CountyName.ToLower()
                       .Contains(upper.ToLower())).ToList();
            } 
```

# c# - 隐藏部分字符串

> ID：14400859
> 
> 赞同：0
> 
> 时间：2013-01-18T14:19:50.007
> 
> 标签：c#, asp.net, string, listbox

我有一个在 UI 中显示字符串值列表的 listBox。

这些字符串值显示为 -

```
value|1
value|2
value|3

//etc 
```

其中整数值是存储在数据库中的字符串 ID。

我在下一页上使用了拆分函数`'|'`来获取字符串和 ID，当它通过其他方法时。

无论如何我可以`ID`在 UI 中隐藏该值，但它仍然存在于 listBox 中，以便在查询字符串中可用？

listBox 是这样填充的 -

```
foreach (string x in values)
{

    ListBox3.Items.Add(x); // I want to hide the '|1' value in the listBox

} 
```

**编辑** 我想隐藏值的 ID，但是在下一页上发生拆分功能时，它可以在查询字符串中使用。在原始页面上有一个像这样的按钮 -

受保护的无效Button6_Click（对象发送者，EventArgs e）{

```
 if (ListBox3.SelectedItem != null)
        {
            Response.Redirect("About.aspx?term=" + ListBox3.SelectedItem);

        }
    } 
```

那么在下一页我将其拆分的`ListBox3.SelectedItem`位置在哪里。`value|1`所以我需要这个完整的字符串来传递查询字符串，但只希望列表框中的`value`部分可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:23:19.157

添加一个新项目，预先设置文本和值：

```
var split = x.Split('|');
var item = new ListItem(split[0], split[1]);
ListBox3.Items.Add(item); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:24:53.843

I'd add the ID to the "Value" property of the listbox and set the actual display value to the "Text" property.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:25:01.040

How about using the [Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx) instead of using list of strings?!

You can simply keep the Id as a dictionary key and display the value to the user.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:24:38.063

Put a value into a value property and text to display in text property:

```
foreach (string x in values)
{

    ListBox3.Items.Add(new ListItem(x.Split('|')[0], x));
} 
```

Where first parameter of ListItem is a text that should be displayed and second is a value which will be passed to your code on postback

# apache-flex - 将数据从一个 Flex 应用程序拖放到另一个应用程序。可能的？

> ID：14400868
> 
> 赞同：1
> 
> 时间：2013-01-18T14:20:07.087
> 
> 标签：apache-flex, datagrid, drag-and-drop

我现在google了很长时间，但无法获得明确的答案。例如，我们希望在 Flex Web 应用程序中将项目从一个 DataGrid 拖放到第二个窗口中的 Flex 应用程序中，然后将数据放到另一个 DataGrid 中。

这是否可能，例如通过拖动代理图像并通过使用 LocalConnection 传递实际数据？

谢谢你的想法。

# c++ - 压缩 2 位整数的容器

> ID：14400870
> 
> 赞同：2
> 
> 时间：2013-01-18T14:20:10.757
> 
> 标签：c++

我需要一个类似于`std::vector<bool>`但包含压缩的 2 位整数（而不是 1 位`bool`）的容器类。这样的类是否存在于某处，还是我必须自己编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T10:19:08.143

看起来您需要编写自己的课程。

```
struct myStorage
{
   ....
}

vector<myStorage> v;
.... 
```

如果您需要内存优化，只需使用一个字节来存储您的 2 位数字（0..3 值）。

# java - 事件在给定时间间隔内发生的次数

> ID：14400878
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:20:38.160
> 
> 标签：java, spring

如果特定事件在给定的时间间隔内发生“X”次，我有一个用例来停止进程。

java spring 框架中是否有机制来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:24:29.977

The question is quite general, so some general advice:

1.  Use a `TreeSet<Long>` of timestamps when the event happened;
2.  at each event occurence, add its timestamp to the set and remove all the expired entries (older than timeout);
3.  react when the set size grows above your threshold.

For 2\. use the `tailSet` method to quickly eliminate the expired timestamps.

This is a short example of the approach:

```
public class OverloadGuard {
  private SortedSet<Long> timestamps = new TreeSet<>();
  private final long timeout = TimeUnit.MINUTES.toMillis(5);
  private final int threshold = 10;
  public synchronized void event() {
    final long now = System.currentTimeMillis();
    timestamps = timestamps.tailSet(now - timeout);
    timestamps.add(now);
    if (timestamps.size() > threshold) throw new OverloadException();
  }
}

class OverloadException extends RuntimeException { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:35:40.953

由于您上面的示例显示了相当低的事件率（5 分钟内 10 个事件），我将创建一个 X 时间戳队列。到达的每条新消息：

1.  如果队列已满，则退出队列
2.  将当前时间戳推送到队列中
3.  如果堆栈已满并且第 X 个时间戳和第一个时间戳之间的差异在给定的时间间隔内，则发出警报！

# ruby - 如何在英文字母中添加变音符号

> ID：14400879
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:20:40.733
> 
> 标签：ruby, unicode

我有一个字符串，例如：

```
"Xin chao moi nguoi" 
```

我想以编程方式将该字符串转换为：

```
"Xin chào mọi người" 
```

我只需要一个粗略的想法如何开始研究。有什么建议吗？

这不是翻译。下面的两个字符串都来自一种语言，但第一个字符串缺少变音符号。该程序会将变音符号添加到英文字母中。

`a`->`ă`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:33:56.377

我不确定是否有特定的库可以解决您的情况，但我不熟悉 Ruby 中的所有内容。但是，您可以尝试以下方法：

创建特殊编码单词的列表，以及基本字符到复杂字符的映射。

然后，当您对候选词进行基本编码时，逐个字符地过滤列表中匹配的词，保留那些与当前字符完全匹配的词，或者在先前定义的映射中有可接受的替代词.

一个快速而肮脏的例子：

```
wordList = ['chào', 'chao', 'chaobella'] #etc...
charMap = {'a'=>['a', 'à'], 'c'=>['c'], 'h'=>['h'], 'o'=>['o', 'ọ', 'ờ']} # etc...

word = 'chao'
filterList = wordList

# for each character in the word
word.split("").each_with_index do |char, index|
  # get the list of characters you'd like it to match
  matchingChars = charMap[char]
  # select the words that match at this index
  filterList = filterList.select{ |w| matchingChars.include? w.split("")[index] }
end

# filter out longer words
filterList = filterList.select{ |w| word.length == w.length }

puts "Words that match: " + filterList.join(",") 
```

您仍然需要将其分解为一个函数，并确定如果有多个匹配的单词该怎么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:14:07.503

您可以使用[Unicode 组合字符](http://en.wikipedia.org/wiki/Combining_character)并从其基本字符组合生成的字符：

```
 a   +   ̀      = à
U+0061 + U+0300 
```

[您可以通过Unicode分解](http://en.wikipedia.org/wiki/Unicode_equivalence)得到组合字符，即*规范化形式规范分解*（NFD）。反之，将多个字符组合成一个字符，是*规范化形式规范组合*(NFC)。

您可以使用[这个 Ruby Unicode 库](http://www.yoshidam.net/Ruby.html#unicode)进行组合和分解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:07:30.817

对于一对一的字符转换，有[tr](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-tr)方法：

```
#encoding: utf-8
p "Xin chao moi nguoi".tr('aou', 'àọư')
#=>"Xin chàọ mọi ngưọi" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T14:40:54.530

取决于你想做多少。如果你只是用 UTF-8 编码你的字符串（以 开始你的文件`#encoding: utf-8`），你可以制作一个基本的更改字典：

```
conversions = {
  "a" => "á",
  "e" => "é"
}
#And so on... (or with words, as @Hannele said)
str.gsub(/[aeiou]/, conversions) 
```

随意将任何转换替换为您认为合适的方式。但是请记住，这将替换字符串中的所有元音。它不会做对人类语言有意义的事情。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T14:27:48.070

您正在将英语翻译成越南语。

一个使用 google api 将字符串从一种语言翻译成另一种语言的 Ruby [gem 。](http://rubygems.org/gems/language-translator)

# ios - IOS中特定输入框的软键盘类型

> ID：14400881
> 
> 赞同：0
> 
> 时间：2013-01-18T14:20:44.860
> 
> 标签：ios, objective-c, cordova

我正在IOS中创建一个带有phonegap框架的应用程序。我有一些通过 html/javascript 中的 phonegap 创建的输入框。我想为其中一个输入框设置 [UIKeyboardTypeEmailAddress] 类型的软键盘。

我在 AppDelegate.h 中的代码如下：

```
@property (nonatomic, strong) IBOutlet UITextField* textField;
- (void) setKeyboardType: (UIKeyboardType)newType; 
```

而对于 AppDelegate.m，如下所示：

```
@synthesize  textField;

//function definition
- (void) setKeyboardType: (UIKeyboardType) newType  
{  
    //NSLog(@"setKeyboardType: %@", newType);
    textField.keyboardType = newType;  
} 
```

并从另一个函数调用，如下所示：

```
[self setKeyboardType: (UIKeyboardType) UIKeyboardTypeEmailAddress]; 
```

此代码不适用于任何输入框。另外，我怎样才能将特定输入框的条件设置为具有这种类型。输入框 ID 可用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:31:13.473

您是否尝试过在 html 文本字段中使用“电子邮件”类型 - `<input type="email" />`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:31:50.870

如果您只想为您的输入显示不同的键盘设置，请检查[HTML5 input types](http://www.w3schools.com/html/html5_form_input_types.asp)。

例如，当您将输入类型设置为电子邮件时，iPhone 会在键盘上放置一个 @ 键，因此输入起来会更容易一些。

```
<input type="email" /> 
```

或者当您将其设置为数字时，它会显示数字键盘

```
<input type="number" /> 
```

其他平台也支持 HTML5 输入类型。

# c# - 实体框架 - 使用默认参数调用存储过程

> ID：14400882
> 
> 赞同：13
> 
> 时间：2013-01-18T14:20:46.647
> 
> 标签：c#, .net, sql-server, entity-framework

我有一些使用数据库优先在实体框架中映射的存储过程。它创建强类型方法，您可以调用这些方法来运行存储过程。但是，我遇到了一个重大问题，因为我看不到任何方法可以调用它使用存储过程中定义的默认参数创建的这些方法。这表示：

a) 如果要更改默认参数值，我必须手动将默认参数添加到方法调用中，这很脆弱。

b) 手动编写方法重载。这基本上消除了首先从数据库生成模型的好处。

有谁知道这个问题是否有更好的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:58:24.303

截至 2013 年 1 月，没有受支持的方法可以让实体框架执行此操作。

我在[这里](http://entityframework.codeplex.com/workitem/805)打开了一个功能请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:31:09.610

这是一个hacky解决方法。我不知道 EF 中是否有支持可选参数的功能，但您可以尝试模拟它 - 如果您愿意更改存储过程。

您可以将存储过程定义中的默认值更改为`NULL`，然后在过程的主体中，将`NULL`参数替换为所需的默认值。然后从使用 EF 的代码中，您可以传递`null`以指示使用默认值。这样至少默认值只在 SP 本身中定义。

缺点当然包括现在`NULL`变成“带外”值，这意味着如果您需要的话，您实际上不能将它传递给 SP（除了必须更改您的 SP 并确保所有未来的 SP 都使用这个奇怪的约定）

# powershell - GetEventLog - 如何在一行中展开“消息”属性

> ID：14400886
> 
> 赞同：1
> 
> 时间：2013-01-18T14:21:17.003
> 
> 标签：powershell, powershell-2.0

在 PowerShell v2 中，我使用此 cmdlet`Get-EventLog Security | Export-csv C:\file.txt`并获得以下结果。

**我需要在一行中获取所有信息。在我的示例中，“消息”属性是多行的。**

```
"538","MYPC","System.Byte[]","28330","Accesso/fine sess.","2","SuccessAudit","Fine sessione dell'utente:

    Nome utente:    myusername

    Dominio:        MYPC

    ID di accesso:  (0x0,0x58C702F)

    Tipo di accesso:    3
","Security","System.String[]","538","18/01/2013 10:35:54","18/01/2013 10:35:54","MYPC\myusername",, 
```

我也尝试过，`Format-Table`但它截断了 Message 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:50:37.943

`select`您要导出的`Message`字段并用其自身的损坏版本替换该字段：

```
Get-EventLog Security `
  | select EventId, ..., @{n='Message';e={$_.Message -replace '\s+', " "}} `
  | Export-Csv "C:\file.txt" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-20T08:23:21.847

我在上面尝试过.. 多行文本进入一行很难阅读.. 修剪非常适合我的情况。

```
Get-EventLog Security |
    Select EventId, ..., @{n='Message';e={$_.Message.trim()}} |
    Export-Csv "C:\file.csv" 
```

# wpf - 如何在子控件中显示工具提示父值

> ID：14400887
> 
> 赞同：0
> 
> 时间：2013-01-18T14:21:21.293
> 
> 标签：wpf, wpf-controls

使用以下代码段并根据我的需要从父元素网格中显示工具提示。不幸的是，它不显示工具提示。

```
<Grid Name="EmployeeValueGrid">
        <TextBlock  Text="Employee Department"
               TextWrapping="Wrap">
            <TextBlock.ToolTip>               
                    <TextBlock Text="{Binding Path=Title, RelativeSource={RelativeSource AncestorType={x:Type Grid}}}" />                
            </TextBlock.ToolTip>
        </TextBlock>
</Grid> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:28:36.007

编辑以解决评论中的问题：

```
<Grid Name="EmployeeValueGrid" ToolTip="Grid Tooltip" >
    <TextBlock  Text="Employee Department"
        TextWrapping="Wrap" >
        <TextBlock.ToolTip>
            <ToolTip DataContext="{Binding RelativeSource={RelativeSource Self}, Path=PlacementTarget.Parent}">
                <TextBlock Text="{Binding Path=ToolTip}"/>
            </ToolTip>
        </TextBlock.ToolTip>
    </TextBlock>
</Grid> 
```

# android - 如何以编程方式更新所有应用程序

> ID：14400888
> 
> 赞同：3
> 
> 时间：2013-01-18T14:21:22.473
> 
> 标签：android

如何以编程方式更新所有应用程序？

我想创建更新管理器。列出所有更新和提供给用户更新。单击后，程序将更新应用程序。

如何更新 android 设备上的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:28:07.783

从更新服务器下载您的文件（可以是任何并使用任何合适的协议）。然后用 vnd.android.package-archive 打开它：

```
Intent reinstall = new Intent(Intent.ACTION_VIEW);
reinstall.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
reinstall.setDataAndType(Uri.fromFile("MyGreatApplication.apk"),
    "application/vnd.android.package-archive");
startActivity(reinstall); 
```

这将启动安装程序。确保您始终使用相同的密钥库和密钥对应用程序进行签名，否则只有在用户手动卸载现有版本时才能覆盖旧应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:31:00.543

> 如何以编程方式更新所有应用程序？

你不能。

> 我想创建更新管理器。

这是“市场”应用程序的职责，例如 Play Store 客户端、Amazon AppStore for Android 客户端等。

> 列出所有更新和提供给用户更新。

您不知道更新是什么，更不用说实际执行更新的能力了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:32:45.883

**如果您指的是 Google Play 更新**

使用公共 SDK 无法做到这一点。Google Play 应用程序已经为您处理了这个问题，并且 Google 没有提供一个 API 来挂钩或控制这种行为。

**如果您的意思是更新侧载应用程序，包括您的和其他人的**

这是有可能的。您将需要检查您希望更新的设备上每个应用程序的版本，并在某个地方有一个服务器可以告诉您最新版本。如果服务器说有新版本可用，则将新版本的 apk 下载到设备上的共享存储中，并使用 Intent 启动安装程序。这不能是静默安装，用户必须手动同意每次更新。此外，更新 apk 必须使用与旧版本相同的密钥进行签名，并且必须具有相同的包名称。

# android - 如何正确访问 Android 上的实时摄像头数据？Skype 是如何做到的？

> ID：14400893
> 
> 赞同：4
> 
> 时间：2013-01-18T14:21:37.457
> 
> 标签：android, video-streaming, android-camera, skype

我见过很多类似的问题，但没有人给出 100% 的答案：

1.  Camera.PreviewCallback 不保证所有设备上所需的帧速率
2.  MediaRecorder 可能会在某些设备上缓冲音频/视频（在写入文件/本地套接字之前）
3.  本机 C/C++ API 不公开，每个人都强烈反对使用它。

Skype 是如何做到的？在 Android 上访问实时视频帧的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:33:01.260

在 3.0 之前的 Android 版本上，预览回调是唯一的选择；请确保使用效率更高的[setPreviewCallbackWithBuffer方法。](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallbackWithBuffer%28android.hardware.Camera.PreviewCallback%29)

在 Honeycomb 或更高版本上，您还可以通过[setPreviewTexture](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)使用 GPU 路径。这将使预览流直接进入 GPU 纹理，这更适合某些应用程序。

尝试使用内部 C/C++ API 不会获得任何巨大的性能提升，并且保证在未来的版本中会发生变化，所以我不建议使用它。

确保从支持的帧速率列表中将预览帧速率设置得尽可能高。

如果您需要高、稳定的帧速率，您还可以尝试在较新的设备上将[录制提示](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRecordingHint%28boolean%29)设置为 true。

不幸的是，这些方法都不能保证提供稳定的输出帧速率，这在很大程度上取决于场景条件和设备自动曝光算法的细节。这是我们希望将来能改进的地方。

但是，如果上述两个选项之一不是 Skype 等人使用的，我会感到非常惊讶。

# java - 加载库后的 NoClassDefFoundError

> ID：14400894
> 
> 赞同：0
> 
> 时间：2013-01-18T14:21:42.977
> 
> 标签：java, android, apache-flex, loadlibrary

我为 Flex 做了一个本地扩展，效果很好。从 Flex 调用 Java 函数时，我得到了想要的结果。但是如果我想在 Java 中加载一个共享库，应用程序会在启动时崩溃。

加载库的代码：

```
public static void loadLibrary(String sLibName) {
            try {
                System.loadLibrary(sLibName);
            } catch(UnsatisfiedLinkError e) {
                (...)

@Override
    public void initialize() {
        // called when the native extension is ready to be used
        Debug.info("Extension initialized");
        loadLibrary("Native"); 
```

Logcat 给了我以下日志报告：

```
01-18 15:14:25.824: I/ColijnIT-AR(15349): Extension initialized
01-18 15:14:25.824: D/dalvikvm(15349): Trying to load lib /data/data/air.NativeJavaTest.debug/lib/libNative.so 0x41312378
01-18 15:14:25.834: D/dalvikvm(15349): Added shared lib /data/data/air.NativeJavaTest.debug/lib/libNative.so 0x41312378
01-18 15:14:25.834: W/System.err(15349): java.lang.NoClassDefFoundError: java/util/UUID
01-18 15:14:25.834: W/System.err(15349):    at java.lang.Runtime.nativeLoad(Native Method)
01-18 15:14:25.834: W/System.err(15349):    at java.lang.Runtime.loadLibrary(Runtime.java:368)
01-18 15:14:25.834: W/System.err(15349):    at java.lang.System.loadLibrary(System.java:535) 
```

如果我删除方法初始化中的 loadLibrary("Native") 调用，我不会收到任何错误，并且一切正常。但是当库成功完成加载并添加时（根据 logcat）它给了我 NoClassDefFoundError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:43:29.053

根据堆栈跟踪，我可以说，它找不到 java.util.UUID 类。为了解决这个问题，您需要将包含 java.util.UUID 类的 jar 文件添加到项目的类路径中。包含 java.util.UUID 的 jar 文件是 rt.jar。因此，只需将 rt.jar 添加到您的类路径中，您的问题就会得到解决。希望能帮助到你。

# jquery - Jquery UI Draggable/Sortable无需按住鼠标按钮

> ID：14400899
> 
> 赞同：3
> 
> 时间：2013-01-18T14:22:05.743
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我在整个网站上寻找解决方案，但没有找到任何东西。我面临一个需要重做拖动样式的问题。我将 jquery ui 用于可拖动/可排序部分。但是，我需要创建一个新的行为：也就是说，我单击处理程序，释放左按钮，使用 mousemove，元素会粘在光标上，再单击一次，元素会下降。总的来说，我需要在拖动过程中禁用 mousedown 部分。

**编辑：**

对，所以这是一个简单的可排序示例。我需要的是，当我单击句柄 .article-header 时，它会粘在鼠标上而不按住 mousedown。所以换句话说，我需要一种行为，我可以在单击它时激活句柄类，但是在第一次 mouseup 时仍然处于活动状态，然后使用 mousemove 拖动它而不实际按住 mousedown 并且在其他单击时，它将下降。

```
$(".articles:not(.nosort)").sortable({
    handle : '.article-header',
    placeholder: "ui-state-highlight",
    update : function (ev,that) {
    var
        order = $(ev.target).sortable('serialize');
        //Saving the order to db
    }
});

<ul class="articles" data-handler="articles">

        <li id="article-list_1">
            <div class="article-header">
                <h4>Lorem Ipsum 1</h4>
            </div>
        </li>
    <li id="article-list_2">
            <div class="article-header">
                <h4>Lorem Ipsum 2</h4>
            </div>
        </li>
    <li id="article-list_3">
            <div class="article-header">
                <h4>Lorem Ipsum 3</h4>
            </div>
        </li>
    <li id="article-list_4">
            <div class="article-header">
                <h4>Lorem Ipsum 4</h4>
            </div>
        </li>
    <li id="article-list_5">
            <div class="article-header">
                <h4>Lorem Ipsum 5</h4>
            </div>
        </li>

</ul> 
```

[http://jsfiddle.net/s2x2n/](http://jsfiddle.net/s2x2n/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T11:41:06.597

我环顾`$.ui.mouse`小部件的工作原理，发现解决方案基本上非常简单。

我扩展了mouseMove 和mouseUp 的原型。首先，我不需要检查鼠标在 mouseDown 时是否有任何距离。

其次，我评论了这部分，它们在调用 mouseup 事件后解除绑定 mousemove 。因此，您只需要取消绑定 mousemove 事件，例如在可排序小部件的更新事件中。

我不确定这是否是正确的方法，但是，如果有人有更好的建议，我会很乐意批准他们的答案。

```
$.ui.mouse.prototype._mouseMove = function(event) {
        // IE mouseup check - mouseup happened when mouse was out of window
        if ($.ui.ie && !(document.documentMode >= 9) && !event.button) {
            return this._mouseUp(event);
        }

        if (this._mouseStarted) {
            this._mouseDrag(event);
            return event.preventDefault();
        }

        // if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
            this._mouseStarted =
                (this._mouseStart(this._mouseDownEvent, event) !== false);
            (this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
        // }
        return !this._mouseStarted;
    }
 $.ui.mouse.prototype._mouseUp = function(event) {
        $(document)
            // .unbind('mousemove.'+this.widgetName, this._mouseMoveDelegate)
            .unbind('mouseup.'+this.widgetName, this._mouseUpDelegate);

        if (this._mouseStarted) {
            this._mouseStarted = false;

            if (event.target === this._mouseDownEvent.target) {
                $.data(event.target, this.widgetName + '.preventClickEvent', true);
            }

            this._mouseStop(event);
        }

        return false;
    } 
```

可排序更新功能

```
update : function (ev,that) {
    $(document).unbind('mousemove.'+$.ui.sortable.prototype.widgetName, $.ui.mouse.prototype._mouseMoveDelegate);
} 
```

# node.js - Socket.IO 连接事件未正确触发

> ID：14400906
> 
> 赞同：0
> 
> 时间：2013-01-18T14:22:23.573
> 
> 标签：node.js

出于某种原因，当我从本地计算机连接时会触发连接事件。但是当我从另一台机器连接时，它为套接字 io 提供服务，但它不会吐出任何反馈，也不会吐出应该触发的控制台输出。

启动服务器时运行以下命令：

```
startSocketService : function(http,fn){
    ar pub = redis.createClient();
    var sub = redis.createClient();
    var client = redis.createClient();
    var service = io.listen(http); //http is just the ExpressJS service
    service.enable('browser client minification');
    service.enable('browser client etag');
    service.set('transports', [
        'websocket'
        , 'flashsocket'
        , 'htmlfile'
        , 'xhr-polling'
        , 'jsonp-polling'
    ]);
    service.set('store',new RedisStore({
        redisPub: pub,
        redisSub: sub,
        redisClient: client
    }));
    console.log('Socket service listening on port '+config.ports.http);
    service.sockets.on('connection',function(socket){
        console.log("Incoming Socket Connection -> ",socket.id);
        if(typeof fn === 'function'){fn(socket);} //this is just a callback
    });
} 
```

该console.log 以及回调中的所有console.log 仅在我从127.0.0.1 连接时触发。任何外部连接都不会输出到控制台，但它们似乎正在工作。它们似乎也有一个唯一的套接字 ID。这仍然让我担心。我不能像这样测试任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:10:01.707

问题出在客户端。我指向 127.0.0.1，所以在其他机器上它们指向自己的本地实例。

# nhibernate - NHibernate 中的依赖更新/插入

> ID：14400909
> 
> 赞同：0
> 
> 时间：2013-01-18T14:22:37.777
> 
> 标签：nhibernate

我正在尝试使用 NHibernate 实现以下 TSQL 代码（当前包含在存储过程中）。如您所见，系统已经实现了一些自定义排序。

```
DECLARE @NextSequence bigint;

UPDATE [dbo].[Sequencer] SET @NextSequence = Sequence = Sequence + 1;

INSERT INTO [dbo].[Customers] (Id,Name) VALUES (@NextSequence, 'Jack'); 
```

该`INSERT`语句取决于设置变量`UPDATE`的方式和方式很重要。`@NextSequence`

如何在使用 NHibernate 的“单个”数据库事务/调用中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:55:51.537

您有多种选择来实现这一目标，

1.  您可以使用 NHibernate`CreateSQLQuery`将文字 SQL 传递给数据库，这样您就可以执行存储过程而不必担心单个语句。

    ```
    session.CreateSQLQuery(@"EXECUTE PROCEDURE <procedure>").ExecuteUpdate(); 
    ```

2.  但是，您似乎正在尝试`Sequence`在插入具有新值的新`Customer`行之前增加字段 ()。`Sequence`您为此[创建了一个触发器，并完全绕过 NHibernate。](http://www.devguru.com/technologies/t-sql/7138.asp)

3.  另一种选择是使用 NHibernate 映射来指定一个`AUTO-INCREMENT`字段，如[本答案](https://stackoverflow.com/a/4002274/1250033)中所述。

4.  最后，您可以实现 NHibernate`Interceptor`来更新`OnSave`事件的值，

    ```
    public class IncrementInterceptor : EmptyInterceptor
    {
        bool OnSave(object entity, object id, object[] state, 
            string[] propertyNames, IType[] types)
        {
            // Increment Customer property value before inserting
        }
    } 
    ```

# jsp - JSP 刷新页眉

> ID：14400916
> 
> 赞同：1
> 
> 时间：2013-01-18T14:23:24.900
> 
> 标签：jsp, header, refresh

```
 <%@ include file="header.jsp" %>

<% 
//code here to check user login
%>

<%@ include file="footer.jsp" %> 
```

如何在检查用户登录的代码中刷新标题页面（显示欢迎消息）（我不想刷新整个页面已经尝试过，只是 header.jsp）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:03:28.107

我有一个类似的问题。解决此问题的最佳方法是创建一个处理所有登录代码的 servlet，然后将其发送`response.SendRedirect()`回此页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:55:20.813

那是不可能的。太晚了。JSP 在 scriptlet 中执行代码时直接写入响应。只需重新排列代码逻辑。您应该在发出任何 HTML 之前执行业务逻辑。

```
<% 
    // Code here to check user login and prepare variables.
%>

<%@ include file="header.jsp" %>

<% 
    // Code here to print necessary HTML based on prepared variables.
%>

<%@ include file="footer.jsp" %> 
```

如果您使用普通的[servlet](https://stackoverflow.com/tags/servlets/info)或[过滤](https://stackoverflow.com/tags/servlet-filters/info)MVC 方式，您将永远不会遇到这个问题。

# javascript - RegExp 从矩阵字符串中获取单位

> ID：14400918
> 
> 赞同：1
> 
> 时间：2013-01-18T14:23:26.440
> 
> 标签：javascript, css, regex, units-of-measurement

假设我们有一些这样的字符串并且需要它们的单位：

```
'rotate(90deg)' // 'deg'`
'rect(0 0 5px 5px)' // 'px'
'rgba(0, 0, 0, 0.5)' // '' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:26:20.183

这个应该有效：

```
/[0-9]+([^ ,\)`]*)/ 
```

例子 ：

```
/[0-9]+([^ ,\)`]*)/.exec('rect(5px 0px 0px 5px)')[1]; // 'px' 
```

# javascript - Jquery on event 不绑定不存在的元素

> ID：14400920
> 
> 赞同：8
> 
> 时间：2013-01-18T14:23:32.223
> 
> 标签：javascript, jquery, event-delegation

好的，这里是 jsfiddle 示例

[http://jsfiddle.net/HTjCT/1/](http://jsfiddle.net/HTjCT/1/)

正如您在悬停时看到的那样，它不会触发 mouseover 事件

我怎么解决这个问题 ？

我正在使用 Jquery 1.9

```
<div id='superdiv'>Click Me</div>

$(function () {
    $('#superdiv').on('click', function (event) {
        $('body').append('<div id="super">another');
    });
    $('#super').on('mouseover', function (event) {
        alert('not working');
    });
}); 
```

javascript

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T14:32:00.303

你必须使用“代表”，像这样（提供“现场”） `$('body').on('mouseover', '#super', function (event) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T13:36:12.990

您还可以将鼠标悬停事件包装在一个函数中，并在您添加想要影响的新元素时调用它。这样，WickyNilliams 指出的问题就不会影响您。

```
$(function () { 
    $('#superdiv').on('click', function (event) { 
        $('body').append('<div id="super">another');
        mouse();
    }); 
    function mouse () {
        $('#super').on('mouseover', function (event) { 
            alert('not working'); 
        }); 
    });
    mouse();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T14:31:26.677

你要onclick创建的div，不是用'</div>'标签封闭的。

如果您尝试以下代码会怎样：

```
$(function () {
    $('#superdiv').on('click', function (event) {
        $('body').append(
            $('<div/>',{ 'id' : 'super', 'text' : 'tetet'}).mouseover(function(event) { 
                    alert('test'); 
            })
        );
    });
}); 
```

# jquery - 保存用户输入的 JQuery 事件

> ID：14400921
> 
> 赞同：1
> 
> 时间：2013-01-18T14:23:36.107
> 
> 标签：jquery, asp.net, events, controls, focusout

一旦用户单击页面上的另一个控件，我将尝试保存用户的输入。我查看了 focusout 事件，但每次用户输入值或选择另一个控件时它都会触发。这是我如何使用它：

```
 $('#txt_ComplainingAbout').focusout(function (e) {
             $.ajax({
                    type: "POST",
                    url: "Form.aspx/Save",
                    data: "{'id': '" + this.value + "','value': '" + this.value + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",

                    success: function (msg) {
                        if (msg.d == 'success') {

                        }
                    }

                });
            e.preventDefault();
        }); 
```

有没有其他方法可以调用每个控件的上述 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:32:23.530

`blur`事件不会给你你想要的行为吗？

另外，你看过委托活动吗？使用委托方法，您可以使用单个事件处理程序来处理由多个元素引发的事件。因此，如果您有一个包含 10,000 个单元格的表格，并且您希望在单击时执行一些操作，而不是为每个单元格附加一个事件处理程序（这会提高性能），我们将一个事件处理程序附加到委派处理的表格所有事件。

因此，按照这种范式，您总是可以为一个表单提供一个事件处理程序来处理该表单中的每个输入。

```
$("form").on("blur", ":input", function(e) {
    // this refers to whichever form element triggered the event
    var $this;

    $.ajax({
        type: "POST",
        url: "Form.aspx/Save",
        data: "{'id': '" + $this.attr("id") + "','value': '" + $this.val() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success: function (msg) {
            if (msg.d == 'success') {

            }
        }

    });

    e.preventDefault();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:32:04.177

试试下面的东西。

```
 $('#txt_ComplainingAbout').unbind('focusout').bind('focusout', function (e) {

    //your code
    return false; //to prevent the browser actually following the links!

}); 
```

**解释**

`focusout(function() {}`方法是`.bind('focusout', handler)`.

有关更多信息，请查看[**.focusout()**](http://api.jquery.com/focusout/)

通过使用上述方式 ( `unbind/bind`)，您可以解决问题，例如当按钮触发 2 次时单击按钮或您遇到的问题。

我希望这对你有帮助。

# javascript - 可以修改 jQuery id 选择器吗？

> ID：14400923
> 
> 赞同：1
> 
> 时间：2013-01-18T14:23:42.763
> 
> 标签：javascript, jquery, dom

可能这无法完成，但万一我遗漏了什么：

是否可以临时修改 jQuery id 选择器（“#”），以便对说...一个 DocumentFragment 或从 DOM 中删除的元素而不是默认行为进行操作？

我问的原因是我正在尝试优化一些大量使用 id 选择器的遗留代码，以便执行一些繁重的 DOM 操作。但是，所有这些 id 都在一个元素下。我读到如果从 dom 中删除该元素，对其进行操作，然后再插入回来，性能会好得多。由于所有那些“#”选择器，这无法完成......

（旁注：通过在操作之前设置 display:none 显着提高了性能，但仍然很慢）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:29:32.580

选择器只能从 DOM 中选择。您想要做的是将这些片段存储为 JavaScript 变量。

```
$p = $('p').remove();
// ...
$('body').append(someFunction($p)); 
```

[http://jsfiddle.net/mblase75/tjVUM/](http://jsfiddle.net/mblase75/tjVUM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:32:55.083

如果将已删除元素的引用存储在变量中，则可以这样做：

```
// Get a div by id
var div = $('#thediv'); 
// Remove it from the DOM
div.remove();
// Change the color of the text inside it to red
// Notice we're selecting with the div as the context
$('p', div).css('color', 'red');
// Re-add div to DOM; text will be red
document.body.appendChild(div[0]); 
```

[http://codepen.io/anon/pen/sglIk](http://codepen.io/anon/pen/sglIk)

# mysql - 使用来自其他两个表的数据填充新表

> ID：14400924
> 
> 赞同：0
> 
> 时间：2013-01-18T14:23:47.583
> 
> 标签：mysql, sql

我正在尝试将一些数据从两个表迁移到一个新表中，并且很难弄清楚如何去做。

数据：

```
table fh rows: A, B, C, X, Y
table fhgb rows: B, C
table gvsi (currently empty) rows: A, X, Y
A is unique, and B+C is unique 
```

完成后，表 gvsi 应包含 fh 中 X=value 且该行不在 fhgb 中的所有行。

这是向 gvsi 的一次性数据迁移，因此性能并不是什么大问题。fh 有 3600 万行，其中我关心的是 1200 万行（其中 X=value）。fhgb 有 1000 万行。我预计 gvsi 完成后将包含大约 200 万行（12mil-10mil）。

我用谷歌搜索并尝试了很多东西，但没有任何工作（JOIN、子查询等）。谁能帮我弄清楚如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:27:45.413

```
INSERT INTO `gvsi` (A, X, Y)
SELECT A, X, Y
FROM fh 
WHERE X = 'value'
    AND ( fh.B NOT IN (SELECT DISTINCT B FROM fhgb)
        AND fh.C NOT IN (SELECT DISTINCT C FROM fhgb)
    ); 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:30:33.553

1 步

```
INSERT INTO gvsi 
SELECT fh.a, fh.x, fh.y FROM fh 
WHERE fh.x = value AND NOT EXISTS 
(SELECT 1 FROM fhgb WHERE fh.b = fhgb.b AND fh.c = fhgb.c); 
```

2个步骤：

```
DELETE FROM fh WHERE EXISTS 
(SELECT 1 FROM fhgb WHERE fh.b = fhgb.b AND fh.c = fhgb.c);
INSERT INTO gvsi SELECT fh.a, fh.x, fh.y from fh WHERE fh.x = value; 
```

第一个更安全，因为最后，如果你对结果不满意，你可以重复这件事。但是，由于条件的原因，它可能会更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:55:11.760

我们的 DB 人在 2 分钟内给出了答案：

```
INSERT INTO gvsi (A, B, X, Y)
SELECT fh.A, fh.B, fh.X, fh.Y
FROM
f_h fh
LEFT OUTER JOIN f_h_g_b fhgb ON fh.A=fhgb.A and fh.B=fhgb.B
WHERE fhgb.A IS NULL 
```

这并不是说其中一些答案不起作用，但这个答案是第一次尝试。感谢您查看它。我也应该尝试其他一些答案，看看它们是否有效，以及它们是否工作得更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:35:30.703

好吧，当您使用简单的 select insert 语句并一步合并 2 个表时，它看起来既简单又复杂。

```
 insert Into 3d_Table ( column1, column2, column3) 
  select column1, column2, column3
   ( 
    select column1, column2, column3 
    from 2d_table
    union 
    select column1, column2, column3 
    from 2d_table
  ) 
```

如果这对您有帮助，请尝试

# c# - 如何检测实体框架中何时开始编辑？

> ID：14400927
> 
> 赞同：0
> 
> 时间：2013-01-18T14:23:56.047
> 
> 标签：c#, wpf, entity-framework, data-binding

我想在实体开始编辑时启用按钮（取消、保存等）。我不想为每个属性添加代码。**是否存在在实体“脏”时触发的事件？**

我正在使用数据库优先 EF，设计器和 WPF 控件通过数据上下文 (CollectionViewSource) 直接绑定到实体属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:59:22.853

如果您使用 Self Tracking Entities 模板从 EDMX 生成实体，您可以检查 ChangeTracker 状态，这些也实现了 INotifyPropertyChanged，因此您可以收听。

[http://msdn.microsoft.com/en-us/library/vstudio/ff407090(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ff407090(v=vs.100).aspx)

# opengl-es - 我们可以mipmap深度纹理吗？

> ID：14400930
> 
> 赞同：2
> 
> 时间：2013-01-18T14:24:03.250
> 
> 标签：opengl-es, opengl-es-2.0, glsles

我想知道，是否可以对深度纹理进行 mipmap。如果是，那么它将如何工作以及如何使用它。

搜索了很多，但在任何地方都没有得到很好的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:47:07.827

深度纹理绑定到标准 GL_TEXTURE_2D 目标。

来自`glTexImage2d`：

> level ：指定详细级别数。级别 0 是基本图像级别。第 n 级是第 n 个 mipmap 缩减图像。

但是，如果您阅读[`OES_depth_texture`](http://www.khronos.org/registry/gles/extensions/OES/OES_depth_texture.txt)规范，您会发现：

> WG 决定禁止为深度纹理手动生成 mipmap。

# graphite - 无法让 StatsD 和 Graphite 播放

> ID：14400933
> 
> 赞同：1
> 
> 时间：2013-01-18T14:24:10.227
> 
> 标签：graphite, statsd

我一直在尝试让 StatsD 将信息推送到 Graphite，但在石墨日志中看到以下内容

```
[18/Jan/2013 08:12:12] code 400, message Bad request version ('1358518363')
[18/Jan/2013 08:12:12] "stats.statsd.bad_lines_seen 0 1358518363" 400 - 
```

从 StatsD 推送的信息看起来像（取自日志）

```
19 Jan 00:12:12 - debug: Counters:
{ 'statsd.bad_lines_seen': 0,
  'statsd.packets_received': 0,
  'x.show.html': 0 }
Timers:
{ 'x.show.html.duration': [],
  'x.show.html.view_runtime': [],
  'x.show.html.db_runtime': [] }
Gauges:
{} 
```

我已经通过 TCP 管理界面检查了 StatsD，它认为它可以很好地刷新到 Graphite，即使每次刷新似乎都会在 Graphite 方面抛出错误：

```
~$ telnet localhost 8126                                                    
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
stats
uptime: 2021
messages.last_msg_seen: 2004
messages.bad_lines_seen: 0
graphite.last_flush: 1
graphite.last_exception: 2021
END 
```

我不确定我在寻找什么来解决这个问题。目前我正在摆弄配置，以防我错过了一些东西 - 我的下一步是跳入 StatsD 代码并找出为什么它认为它会返回 200 而不是 400。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:40:07.100

你能检查一下你是否在你的 statsd 配置文件中配置了石墨（碳）监听主机名和端口吗？您必须设置的值是：

```
{
   graphiteHost: "127.0.0.1"
 , graphitePort: 2003
} 
```

这是碳的默认值

# android - 在 LinearLayout 中拟合 textView

> ID：14400934
> 
> 赞同：0
> 
> 时间：2013-01-18T14:24:16.393
> 
> 标签：android

我有四个文本视图，它们位于相同的线性布局上。当我在手机上运行我的应用程序时，它看起来还不错，但是当我在平板电脑上运行它时，它们就像显示在我的手机上一样。意思是不要t 扩展和使用提供的空白空间。你能告诉我如何实现这一目标吗？希望我很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:35:10.720

`android:layout_weight`在定义 TextViews 时尝试使用。一个例子是`android:layout_weight=".25"`您的每个 TextViews，因此它们在 LinearLayout 中占用相等的空间。您可能还想`android:gravity="center"`在 LinearLayout 中使用，以便子项从中心显示。

希望这就是你所追求的。

# eclipse - 为什么 subclipse 忽略 svn:externals

> ID：14400935
> 
> 赞同：3
> 
> 时间：2013-01-18T14:24:22.997
> 
> 标签：eclipse, svn, subclipse

我使用带有 Subclipse 的 Eclipse Juno（主要用于 LaTeX 创作和 C 开发）。在我的一些 SVN 项目中，我需要使用外部存储库，我想通过使用 svn:externals 属性来做到这一点。

将此属性（使用 subclipse）添加到我的存储库并提交后，在 Eclipse 中进行 svn 更新后，我没有将任何所需的外部源导入到我的本地工作副本中。如果我从该目录中的命令行执行 svn 更新，我也不会获得任何外部资源。

但是，当我将同一个存储库签出到另一个目录时，行为符合预期。添加外部属性后，进行提交并随后签出以使 svn 导入外部存储库就足够了。

为什么由 subclipse 签出的本地工作副本表现得如此怪异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:48:12.067

您可以尝试使用弹出对话框的 Update ... 选项，然后使用这些选项确保工作副本已设置为完全递归。这是默认行为，但也许您以某种方式获得了“稀疏工作副本”。

正如上面评论中提到的，所有的工作和逻辑都由 SVN 自己在内部处理。这可能就是您在使用 SVN 命令行客户端时看到相同行为的原因。我希望 Subclipse 和 CLI 保持一致，因为它们都使用相同的库来完成所有工作。

否则，我只会说魔鬼在细节中。可能需要查看有关您的工作副本的更多信息才能知道出了什么问题。

如果您还没有，我建议您使用 Subclipse 1.8.x

# android - 在android中使一个单元格跨越两行

> ID：14400937
> 
> 赞同：1
> 
> 时间：2013-01-18T14:24:23.157
> 
> 标签：android, rows, tablelayout, stretch

我被要求使用按钮为 Android 中的计算器应用程序设计 UI。GUI 需要如下图所示 - ![在此处输入图像描述](../Images/edac12ea887e5317b4bbedd3f8a3e5c1.png)

我唯一的问题是将“+”单元格拉伸到两行，如图所示。我可以简单地为 layout_height 分配一个值来实现这一点，但是如果在不同的屏幕尺寸上查看应用程序，这会给我带来问题。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:30:32.807

当您将“+”按钮添加到布局时，通过将 rowSpan 设置为 2，确保它占据 2 行而不是 1 行。您可以在代码中执行此操作

```
layout->addWidget(yourPlusButton,row,column,2/*rowSpan*/,1/*columnSpan*/); 
```

如果您使用的是 QtCreator，您可以通过用鼠标拉伸“+”按钮来实现这一点（我假设您正在使用 QGridLayout） - 所以您将它拉伸到它下面的空单元格以使其占据两个单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:32:58.920

[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)允许您[跨行](http://android-developers.blogspot.in/2011/11/new-layout-widgets-space-and-gridlayout.html)和列跨越单元格，此外，它可以垂直或水平填充。您需要一个 6X5 网格，为不同的屏幕提供不同分辨率的图像。

# c# - Do not overwrite settings.settings file with clickonce

> ID：14400943
> 
> 赞同：3
> 
> 时间：2013-01-18T14:24:36.860
> 
> 标签：c#, clickonce, app-config

At first I had some userdefined settings stored in my app.config file, under appSettings. These are properties the user can change during runtime. The first problem I've got is when I deploy my application with ClickOnce it overwrites the app.config file and the user has lost his personal settings.

Then I moved the properties to the settings.settings file (= usersettings section in app.config) as I found on the internet that this section doesn't get overwritten when deploying with ClickOnce. Nah, it does.. Settings.Settings properties are:

*   Build action = content
*   Copy to = Do not copy

So how can I accomplish that my user's personal settings are not overwritten, either in the app.config file or the settings.settings file. Or is there another way and am I doing it wrong?

Thx!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:59:10.777

当使用 ClickOnce 部署新版本的应用程序时，此方法会复制先前安装的设置。因此，用户所做的任何用户定义设置都将被复制，因此在更新后可用。我对此进行了测试，它对我有用。

```
public static void UpgradeUserSettings()
{
  if (Settings.Default.upgradeRequired)
  {
    Settings.Default.Upgrade();
    Settings.Default.upgradeRequired = false;
    Settings.Default.Save();
  }
} 
```

[ApplicationSettingsBase.Upgrade 方法 MSDN](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.upgrade.aspx)

[StackOverflow 上的其他问题](https://stackoverflow.com/questions/534261/how-do-you-keep-user-config-settings-across-different-assembly-versions-in-net)

# java - How to change the color of specific words in a JTextPane?

> ID：14400946
> 
> 赞同：28
> 
> 时间：2013-01-18T14:24:44.737
> 
> 标签：java, swing, jtextpane

How do I change the color of specific words in a `JTextPane` just while the user is typing? Should I override `JTextPane` `paintComponent` method?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-18T16:18:31.827

不，您不应该重写 paintComponent() 方法。相反，您应该使用`StyledDocument`. 您还应该自己界定单词。

这是演示，在键入时将“public”、“protected”和“private”变为红色，就像一个简单的代码编辑器一样：

![在此处输入图像描述](../Images/772939b061f9d03013e3a4491f8d0d13.png)

```
import javax.swing.*;
import java.awt.*;
import javax.swing.text.*;

public class Test extends JFrame {
    private int findLastNonWordChar (String text, int index) {
        while (--index >= 0) {
            if (String.valueOf(text.charAt(index)).matches("\\W")) {
                break;
            }
        }
        return index;
    }

    private int findFirstNonWordChar (String text, int index) {
        while (index < text.length()) {
            if (String.valueOf(text.charAt(index)).matches("\\W")) {
                break;
            }
            index++;
        }
        return index;
    }

    public Test () {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(400, 400);
        setLocationRelativeTo(null);

        final StyleContext cont = StyleContext.getDefaultStyleContext();
        final AttributeSet attr = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, Color.RED);
        final AttributeSet attrBlack = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, Color.BLACK);
        DefaultStyledDocument doc = new DefaultStyledDocument() {
            public void insertString (int offset, String str, AttributeSet a) throws BadLocationException {
                super.insertString(offset, str, a);

                String text = getText(0, getLength());
                int before = findLastNonWordChar(text, offset);
                if (before < 0) before = 0;
                int after = findFirstNonWordChar(text, offset + str.length());
                int wordL = before;
                int wordR = before;

                while (wordR <= after) {
                    if (wordR == after || String.valueOf(text.charAt(wordR)).matches("\\W")) {
                        if (text.substring(wordL, wordR).matches("(\\W)*(private|public|protected)"))
                            setCharacterAttributes(wordL, wordR - wordL, attr, false);
                        else
                            setCharacterAttributes(wordL, wordR - wordL, attrBlack, false);
                        wordL = wordR;
                    }
                    wordR++;
                }
            }

            public void remove (int offs, int len) throws BadLocationException {
                super.remove(offs, len);

                String text = getText(0, getLength());
                int before = findLastNonWordChar(text, offs);
                if (before < 0) before = 0;
                int after = findFirstNonWordChar(text, offs);

                if (text.substring(before, after).matches("(\\W)*(private|public|protected)")) {
                    setCharacterAttributes(before, after - before, attr, false);
                } else {
                    setCharacterAttributes(before, after - before, attrBlack, false);
                }
            }
        };
        JTextPane txt = new JTextPane(doc);
        txt.setText("public class Hi {}");
        add(new JScrollPane(txt));
        setVisible(true);
    }

    public static void main (String args[]) {
        new Test();
    }
} 
```

代码不是那么漂亮，因为我输入得很快，但它可以工作。我希望它会给你一些提示。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-18T14:41:49.280

覆盖`paintComponent`不会帮助你。

这不是一件容易的事，但也不是不可能的。这样的事情会帮助你：

```
DefaultStyledDocument document = new DefaultStyledDocument();
JTextPane textpane = new JTextPane(document);
StyleContext context = new StyleContext();
// build a style
Style style = context.addStyle("test", null);
// set some style properties
StyleConstants.setForeground(style, Color.BLUE);
// add some data to the document
document.insertString(0, "", style); 
```

您可能需要对此进行调整，但至少它会告诉您从哪里开始。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-27T20:30:57.477

另一种解决方案是使用`DocumentFilter`.

这是一个例子：

创建一个扩展 DocumentFilter 的类：

```
private final class CustomDocumentFilter extends DocumentFilter
{
        private final StyledDocument styledDocument = yourTextPane.getStyledDocument();

        private final StyleContext styleContext = StyleContext.getDefaultStyleContext();
        private final AttributeSet greenAttributeSet = styleContext.addAttribute(styleContext.getEmptySet(), StyleConstants.Foreground, Color.GREEN);
        private final AttributeSet blackAttributeSet = styleContext.addAttribute(styleContext.getEmptySet(), StyleConstants.Foreground, Color.BLACK);

    // Use a regular expression to find the words you are looking for
    Pattern pattern = buildPattern();

    @Override
    public void insertString(FilterBypass fb, int offset, String text, AttributeSet attributeSet) throws BadLocationException {
        super.insertString(fb, offset, text, attributeSet);

        handleTextChanged();
    }

    @Override
    public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {
        super.remove(fb, offset, length);

        handleTextChanged();
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attributeSet) throws BadLocationException {
        super.replace(fb, offset, length, text, attributeSet);

        handleTextChanged();
    }

    /**
     * Runs your updates later, not during the event notification.
     */
    private void handleTextChanged()
    {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                updateTextStyles();
            }
        });
    }

    /**
     * Build the regular expression that looks for the whole word of each word that you wish to find.  The "\\b" is the beginning or end of a word boundary.  The "|" is a regex "or" operator.
     * @return
     */
    private Pattern buildPattern()
    {
        StringBuilder sb = new StringBuilder();
        for (String token : ALL_WORDS_THAT_YOU_WANT_TO_FIND) {
            sb.append("\\b"); // Start of word boundary
            sb.append(token);
            sb.append("\\b|"); // End of word boundary and an or for the next word
        }
        if (sb.length() > 0) {
            sb.deleteCharAt(sb.length() - 1); // Remove the trailing "|"
        }

        Pattern p = Pattern.compile(sb.toString());

        return p;
    }

    private void updateTextStyles()
    {
        // Clear existing styles
        styledDocument.setCharacterAttributes(0, yourTextPane.getText().length(), blackAttributeSet, true);

        // Look for tokens and highlight them
        Matcher matcher = pattern.matcher(yourTextPane.getText());
        while (matcher.find()) {
            // Change the color of recognized tokens
            styledDocument.setCharacterAttributes(matcher.start(), matcher.end() - matcher.start(), greenAttributeSet, false);
        }
    }
} 
```

然后，您需要做的就是将`DocumentFilter`您创建的应用于您的`JTextPane`，如下所示：

```
((AbstractDocument) yourTextPane.getDocument()).setDocumentFilter(new CustomDocumentFilter()); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-04T21:43:00.437

您可以像我在这里为我正在使用关键字文本着色构建的 SQL 编辑器所做的那样扩展 DefaultStyledDocument ...

```
 import java.util.ArrayList;
    import java.util.List;
    import javax.swing.text.AttributeSet;
    import javax.swing.text.BadLocationException;
    import javax.swing.text.DefaultStyledDocument;
    import javax.swing.text.Style;

    public class KeywordStyledDocument extends DefaultStyledDocument  {
        private static final long serialVersionUID = 1L;
        private Style _defaultStyle;
        private Style _cwStyle;

        public KeywordStyledDocument(Style defaultStyle, Style cwStyle) {
            _defaultStyle =  defaultStyle;
            _cwStyle = cwStyle;
        }

         public void insertString (int offset, String str, AttributeSet a) throws BadLocationException {
             super.insertString(offset, str, a);
             refreshDocument();
         }

         public void remove (int offs, int len) throws BadLocationException {
             super.remove(offs, len);
             refreshDocument();
         }

         private synchronized void refreshDocument() throws BadLocationException {
             String text = getText(0, getLength());
             final List<HiliteWord> list = processWords(text);

             setCharacterAttributes(0, text.length(), _defaultStyle, true);   
             for(HiliteWord word : list) {
                 int p0 = word._position;
                 setCharacterAttributes(p0, word._word.length(), _cwStyle, true);
             }
         }       

         private static  List<HiliteWord> processWords(String content) {
             content += " ";
             List<HiliteWord> hiliteWords = new ArrayList<HiliteWord>();
             int lastWhitespacePosition = 0;
             String word = "";
             char[] data = content.toCharArray();

             for(int index=0; index < data.length; index++) {
                 char ch = data[index];
                 if(!(Character.isLetter(ch) || Character.isDigit(ch) || ch == '_')) {
                     lastWhitespacePosition = index;
                     if(word.length() > 0) {
                         if(isReservedWord(word)) {
                             hiliteWords.add(new HiliteWord(word,(lastWhitespacePosition - word.length())));
                         }
                         word="";
                     }
                 }
                 else {
                     word += ch;
                 }
            }
            return hiliteWords;
         }

         private static final boolean isReservedWord(String word) {
             return(word.toUpperCase().trim().equals("CROSS") || 
                            word.toUpperCase().trim().equals("CURRENT_DATE") ||
                            word.toUpperCase().trim().equals("CURRENT_TIME") ||
                            word.toUpperCase().trim().equals("CURRENT_TIMESTAMP") ||
                            word.toUpperCase().trim().equals("DISTINCT") ||
                            word.toUpperCase().trim().equals("EXCEPT") ||
                            word.toUpperCase().trim().equals("EXISTS") ||
                            word.toUpperCase().trim().equals("FALSE") ||
                            word.toUpperCase().trim().equals("FETCH") ||
                            word.toUpperCase().trim().equals("FOR") ||
                            word.toUpperCase().trim().equals("FROM") ||
                            word.toUpperCase().trim().equals("FULL") ||
                            word.toUpperCase().trim().equals("GROUP") ||
                            word.toUpperCase().trim().equals("HAVING") ||
                            word.toUpperCase().trim().equals("INNER") ||
                            word.toUpperCase().trim().equals("INTERSECT") ||
                            word.toUpperCase().trim().equals("IS") ||
                            word.toUpperCase().trim().equals("JOIN") ||
                            word.toUpperCase().trim().equals("LIKE") ||
                            word.toUpperCase().trim().equals("LIMIT") ||
                            word.toUpperCase().trim().equals("MINUS") ||
                            word.toUpperCase().trim().equals("NATURAL") ||
                            word.toUpperCase().trim().equals("NOT") ||
                            word.toUpperCase().trim().equals("NULL") ||
                            word.toUpperCase().trim().equals("OFFSET") ||
                            word.toUpperCase().trim().equals("ON") ||
                            word.toUpperCase().trim().equals("ORDER") ||
                            word.toUpperCase().trim().equals("PRIMARY") ||
                            word.toUpperCase().trim().equals("ROWNUM") ||
                            word.toUpperCase().trim().equals("SELECT") ||
                            word.toUpperCase().trim().equals("SYSDATE") ||
                            word.toUpperCase().trim().equals("SYSTIME") ||
                            word.toUpperCase().trim().equals("SYSTIMESTAMP") ||
                            word.toUpperCase().trim().equals("TODAY") ||
                            word.toUpperCase().trim().equals("TRUE") ||
                            word.toUpperCase().trim().equals("UNION") ||
                            word.toUpperCase().trim().equals("UNIQUE") ||
                            word.toUpperCase().trim().equals("WHERE"));
        }
    } 
```

只需将其添加到您的课程中，如下所示：

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Font;
    import javax.swing.JFrame;
    import javax.swing.JScrollPane;
    import javax.swing.JTextPane;
    import javax.swing.text.BadLocationException;
    import javax.swing.text.Style;
    import javax.swing.text.StyleConstants;
    import javax.swing.text.StyleContext;

    public class SQLEditor extends JFrame {
        private static final long serialVersionUID = 1L;

        public SQLEditor() {
            StyleContext styleContext = new StyleContext();
            Style defaultStyle = styleContext.getStyle(StyleContext.DEFAULT_STYLE);
            Style cwStyle = styleContext.addStyle("ConstantWidth", null);
            StyleConstants.setForeground(cwStyle, Color.BLUE);
            StyleConstants.setBold(cwStyle, true);

            final JTextPane pane = new JTextPane(new KeywordStyledDocument(defaultStyle, cwStyle));
            pane.setFont(new Font("Courier New", Font.PLAIN, 12));

            JScrollPane scrollPane = new JScrollPane(pane);
            getContentPane().add(scrollPane, BorderLayout.CENTER);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setSize(375, 400);      
        }

        public static void main(String[] args) throws BadLocationException {
            SQLEditor app = new SQLEditor();
            app.setVisible(true);
        }
    } 
```

这是缺少的 HiliteWord 类...

```
public class HiliteWord {

    int _position;  
    String _word;

    public HiliteWord(String word, int position) {
        _position = position;   
        _word = word;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-21T13:13:11.480

@康斯坦丁

亲爱的康斯坦丁，我在我的小项目中使用了您的出色解决方案，经过几次调整后，您的解决方案对我来说效果很好。

如果您允许，我的更改是：

我在自己的 JFrame 中使用您的类 KeywordStyledDocument：

```
StyleContext styleContext = new StyleContext();
Style defaultStyle = styleContext.getStyle(StyleContext.DEFAULT_STYLE); 
```

这一行我已经改变： MutableAttributeSet cwStyle = Functions.style(true, false, Color.RED);

```
private JTextPane jTextPaneNumbers = new JTextPane(new KeywordStyledDocument(defaultStyle, cwStyle)); 
```

我在一个名为 style 的静态函数中外包了 cwStyle 实例的供应：

```
public static MutableAttributeSet style(boolean boldness, boolean italic, Color color) {

    MutableAttributeSet s = new SimpleAttributeSet();

    StyleConstants.setLineSpacing(s, -0.2f);
    StyleConstants.setBold(s, boldness);
    StyleConstants.setItalic(s, italic);
    StyleConstants.setForeground(s, color);

    return s;
} 
```

此外，正如您在上面看到的，cwStyle 类不再是 StyleConstants 的实例，而是 MutableAttributeSet 的 Inctance。因此，我自然也必须更改 KeywordStyledDocumentClass 的构造函数：

```
public KeywordStyledDocument(Style defaultStyle, MutableAttributeSet cwStyle) {
    _defaultStyle =  defaultStyle;
    _cwStyle = cwStyle;
} 
```

在此小更改并在您的 isReservedWord 函数中添加我自己的“单词”并将我的 Characters ' 和 * 添加到您的 processWord 函数之后：

```
 ...word.toUpperCase().trim().equals("UNION") ||
                    word.toUpperCase().trim().equals("UNIQUE") ||
                    word.toUpperCase().trim().equals("WHERE") ||
                    word.trim().equals("''''''") ||
                    word.trim().equals("******") 
                    );
 if(!(Character.isLetter(ch) || Character.isDigit(ch) || ch == '_' || ch == '\'' || ch == '*')) { 
```

我成了我心愿的结果：

[![在此处输入图像描述](../Images/9f0caf1535cd5669ae3d90c9bf8c47ea.png)](https://i.stack.imgur.com/ibbgC.png)

非常感谢您在这里展示您的代码。

# php - Adding more text in the fullcalendar dynamically

> ID：14400952
> 
> 赞同：1
> 
> 时间：2013-01-18T14:25:04.140
> 
> 标签：php, jquery, json, fullcalendar

I need to display more text in the fullcalander. but the problem is i am getting data from the mySQL db as json data through ajax call. so i dont know the exact length of data which is coming. so i need to show the daily events in the fullcalendar dynamically in a loop. the following code i tried but i didnt got the output. can anyone help me. thanx in advance

```
var testJson = ['value1', 'value2'];
$('#full_calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    events: [
        for(var i=0;i<2;i++){
            {
                title: ''+testJson [i],
                start: new Date(y, m, 3)
            }
    } ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:46:16.097

先做两件事：当你想知道接收数据的确切长度时......为什么不在 JSON 对象中发送它们呢？

例如

`var test = {"data":[1,2,3,4,5],"size":5}`

获得 lentgh 的第二种方法是长度字段。每个 javascript 对象都有一个长度字段。在上面的示例中，test.data.length 将返回 5（就像 test.size 一样）。

而且我很确定您不能在数组声明中运行迭代，因此只需构建数组之前：

```
var events = [];
$(test).each(function(i, obj) {
    events[] = {title: test.data[i], start: new Date(y, m, 3)}
} 
```

没有 jquery 它会是这样的：

```
var size = test.data.length;
var events = [];
for(var i =0; i < size; i++) {
    events[] = {title: test.data[i], start: new Date(y, m, 3)}
} 
```

然后将其传递给您的函数调用

```
$('#full_calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    events: events
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:00:38.707

If you use ajax call for getting data then you must write 'events: "addres for ajax request"' and add a file for ajax request. E.g. add file 'json-events.php' in the root of site, in the parametr events: 'json-events.php'. In the json-events.php you do query to the database, and get event data in array, where one event - one data array (the array in the array). Every event must have id, title, start, like:

```
array( array(
'id' => event id,
'title' => event title,
'start' => YYYY-mm-dd,
'end' => YYYY-mm-dd
)) 
```

After that convert to json format (json_encode()) and echo

# asp.net-mvc - Forms or Basic Authentication

> ID：14400954
> 
> 赞同：1
> 
> 时间：2013-01-18T14:25:06.267
> 
> 标签：asp.net-mvc, authentication

I have a Windows application which needs to call a Forms Authenticated MVC action. The problem is, I am not sure how to authenticate a call from a Windows application into a Forms Authenticated MVC application.

The following code returns the login page. Is there a way to allow the below code to work with Forms Authentication by whatever means, or do I need to create a new Web API project which uses Basic Authentication for this to work?

```
WebRequest req = WebRequest.Create("http://myurl/protectaction");
req.Credentials = new NetworkCredential("username", "password");

var res = req.GetResponse(); 
```

Thank you very much for your help,

Richard Hughes

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:37:00.907

您可以使用[CookieContainer](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)来存储 LogOn 操作发出的 FormsAuthentication cookie。因此，基本上您将向 LogOn 操作发送第一个请求，然后为后续请求重用相同的 WebRequest 实例。

这样，您将只通过网络发送一次您的凭据。

例如：

```
var container = new CookieContainer();

var req = (HttpWebRequest)WebRequest.Create("http://myurl/account/logon");
req.CookieContainer = container;
req.Method = "POST";
using (var writer = new StreamWriter(req.GetRequestStream()))
{
    var data = HttpUtility.ParseQueryString(string.Empty);
    data["username"] = "john";
    data["password"] = "secret";
    writer.Write(data.ToString());
}
using (var res = req.GetResponse())
{
    // You could check here if login was successful
}

req = (HttpWebRequest)WebRequest.Create("http://myurl/protectedresource");
req.CookieContainer = container;
using (var res = req.GetResponse())
using (var reader = new StreamReader(res.GetResponseStream()))
{
    string result = reader.ReadToEnd();
    // do something with the protected resource
} 
```

# algorithm - Algorithm - how to generate date structure?

> ID：14400957
> 
> 赞同：0
> 
> 时间：2013-01-18T14:25:09.860
> 
> 标签：algorithm, data-structures

I am thinkink how to generate data structure representing tasks in my calendar (for my private purposes only). I have date-ordered tasks records from DBMS like these:

Buy milk (on 18.1.2013)

*   task date (2013-01-15)
*   task label ("Buy milk")
*   time frame ("day")

or

Task: Wash a car (sometime in January 2013)

*   task date (2013-01-05)
*   task label ("Wash a car")
*   time frame ("month")

"time frame" value is enum value {DAY,WEEK,MONTH,QUARTER,YEAR} and specifies time frame of the task, e.g. time frame "month" specifies that this task needs to be done sometime in month specified by task date value.

I would like to represent my tasks in date structure, e.g.:

*   2013 (year)
*   I. (quarter)
*   January (month)
*   Wash a car
*   Week 14.1.-20.1.
*   15.1.2013 (day)
*   Buy milk
*   18.1.2013 (day)
*   Do somenthing...

etc. It is not problem but problem occures when there is record from next data frame, e.g. task from February.

I have tried many ways how to accomplish it but the my biggest problem is to select proper data structure and find algorithm how to fill into my structure all data frames values above concrete task and how to don't do it when these data frames exist.

I hope I explained it clearly. Thank you for ideas.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:59:20.093

听起来您可以将其归结为标签和开始+结束时间。与其用天、周、月、季度和年来解决问题，不如直接使用日期戳？可以使用标准库将它们转换为日期、时间和 UNIX 时间戳（自 1970 年 1 月 1 日以来的秒数）。还有为多种语言编写的日期计算库（例如 date+1week）。

**编辑**：或者，您当然也可以保留开始日期和持续时间（可能最简单的以秒为单位）而不是结束日期。每种表示方式都有其优点和缺点。

# reporting-services - How to debug or unit test DataProvider classes in dynamics AX 2012

> ID：14400961
> 
> 赞同：2
> 
> 时间：2013-01-18T14:25:21.027
> 
> 标签：reporting-services, axapta, microsoft-dynamics, dynamics-ax-2012, ax

Is there any way to debug a DataProvider class, a class that extendes from SRSReportDataProviderBase, When my AOS, my client and my SQL are separated in different servers?

Or there is any way to create a unit test or a job, that I could execute the DataProvider class? so I could debug it? // ***this question is solved below on the updated***

I tryed to create a job so I that I can debug it, but of course their dependencies weren't injected. Here is the example:

```
 static void Job2(Args _args)
          {
           JmgEmplSignedInDP empl;
           ;
            empl = new JmgEmplSignedInDP();
            empl.processReport();
          } 
```

And I got the following error, becuase it did not have their dependecies:

```
 JmgEmplSignedInContract object not initialized.
 Stack trace
 (S)\Classes\JmgEmplSignedInDP\processReport - line 12
 (C)\Jobs\Job2 - line 8 
```

There is any way to construct a DataProvider class so I can debug it??

* * *

**Update:**

I could inject the class dependecies, so now I can debug it. It's almost the same. But the initial question has not awnser yet:

> Is there any way to debug a DataProvider class, a class that extendes from SRSReportDataProviderBase, When my AOS, my client and my SQL are separated in different servers?

Code to inject dependecies of a DataProvider Class:

```
 static void Job2(Args _args)
    {
        JmgEmplSignedInDP empl;
        JmgEmplSignedInContract con;
        Query q;
        ;

        empl = new JmgEmplSignedInDP();
        con = new JmgEmplSignedInContract();
        q = new Query(querystr(JmgEmplSignedInQuery));
        empl.parmQuery(q);
        empl.parmDataContract(con);

        empl.processReport();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:47:12.127

出于调试目的，您可能希望更改数据提供程序类以在客户端上运行（在这种情况下，JmgEmplSignedInDP 类属性具有 RunOn=Server）。

请记住在您的用户设置选项卡开发中删除“在 CIL 中执行业务操作”选项。

您可以在作业中使用更多行来检查生成的原始数据：

```
static void Job2(Args _args)
{
    JmgEmplSignedInDP empl;
    JmgEmplSignedInContract con;
    Query q;
    JmgTmpEmplSignedIn tmp;
    ;

    empl = new JmgEmplSignedInDP();
    con = new JmgEmplSignedInContract();
    q = new Query(querystr(JmgEmplSignedInQuery));
    empl.parmQuery(q);
    empl.parmDataContract(con);

    empl.processReport();
    tmp.setTmpData(empl.getJmgTmpEmplSignedIn());
    while select tmp
    {
        info(strFmt("%1", tmp.EmplName));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:19:04.837

Depends if the code is managed or not, and depending on that you have to use Ax debugging or Visual studio debugging (attaching the VS editor to the AOS process.

But you can find information as to how you have to debug reports on this link : [Configure the debugger to debug a report data provider class](http://msdn.microsoft.com/en-us/library/gg724081.aspx)

# mongodb - 带有 mongoDB 的动态 EmbeddedDocument - MongoEngine

> ID：14400963
> 
> 赞同：3
> 
> 时间：2013-01-18T14:25:23.230
> 
> 标签：mongodb, mongoengine

因此，根据 MongoEngine 文档：

[https://mongoengine-odm.readthedocs.org/en/latest/guide/defining-documents.html](https://mongoengine-odm.readthedocs.org/en/latest/guide/defining-documents.html)

A 类型的文档需要从 DynamicDocument 继承，以便我们能够保存一个对象（A 类型），该对象具有比“正式”声明的字段更多的字段。

如何使 EmbeddedDocument 表现得像 DynamicDocument？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:51:28.313

听起来您想要一个[Dynamic Sc​​hemas](https://docs.mongoengine.org/guide/defining-documents.html#dynamic-document-schemas)。

# java - In ZK Can we PostNotifyChange more than one variables

> ID：14400964
> 
> 赞同：1
> 
> 时间：2013-01-18T14:25:24.677
> 
> 标签：java, zk, notify

I will want to notify some specific variables of a class with the help of

> PostNotifyChange

So i was trying

```
BindUtils.postNotifyChange(null, null, taskListModel, "model,sequence"); 
```

It is not working :( Can we PostNotifyChange more than one variable something like we doing in

> NotifyChange

```
@NotifyChange({ "taskList","sequence" }) 
```

Is it possible or not with

> PostNotifyChange

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:00:47.663

我不相信，对不起。

从[源头](https://github.com/zkoss/zk/blob/master/zkbind/src/org/zkoss/bind/BindUtils.java#L53)来看，它似乎`BindUtils`只需要一个`property`名称，并且不会尝试将其拆分。可能是一个不错的功能请求。

# android - Good approach to develop android Tablet app

> ID：14400968
> 
> 赞同：2
> 
> 时间：2013-01-18T14:25:49.073
> 
> 标签：android

I have got a project that implement tablet version of an app. this app has only portrait mode without landscape mode support. so my approach would be implementation for both in tablet.

However, you guys all know that android has different type of devices and android version. how to make sure that my tablet app will work for every tablet devices. Also UI, what is the best practice to do in tablet? how can I make sure my app layout is fit in all devices? What kind of UI framework would be useful for developing android tablet?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:32:05.150

你必须使用片段。所以你的应用可能看起来像这样：

![在此处输入图像描述](../Images/c31afd7da0c9e23e3d1efa4587416f9a.png)

*   创建一个布局，一个用于手机，一个用于平板电脑。

**布局/main.xml：**

```
<LinearLayout
android:id="@+id/handset"
[...]
>
</LinearLayout> 
```

**布局大/sw400dp：**

```
<LinearLayout 
  [...]
  >

    <fragment android:name="com.bla.bla.FirstFragment"
              android:id="@+id/first_fragment"
              [...]
              />

     <fragment android:name="com.bla.bla.SecondFragment"
              android:id="@+id/second_fragment"
              [...]
              />

</LinearLayout> 
```

*   现在在您的 FragmentActivity 中检查这一点：

* * *

```
if (findViewById(R.id.handset) != null) {
    // it's a handset device and you can add a Fragment to this View
    }

 FirstFragment firstFragment = new FirstFragment();
 getSupportFragmentManager().beginTransaction().add(R.id.handset, firstFragment).commit(); 
```

*   如果`R.id.handset`返回 null 那么它是一个平板电脑，在这种情况下，静态添加的 Fragments 将由它们的 Fragments 类处理。

# netbeans - 在 jre 1.7.0._u11 更新后 netbeans 不再起作用

> ID：14400970
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:01.773
> 
> 标签：netbeans, netbeans-7, java-7

有一些我无法检测到的错误。jre 1.7.0._u11 更新后，netbeans 不再工作。

像这样的简单 Test.java 会引发错误：

```
public class Test {
    public static void main(String[] args) {
        System.out.println("Go Forrest!");
    }
} 
```

![查看错误：](../Images/5528a0a86a68f3071c02f92f67034d71.png)

我也将 jdk 更改为 1.7.0_u11，并在文件 netbeans.conf 中手动设置**netbeans_jdkhome**变量，但问题仍然存在。

我正在使用 netbeans 7.2.1。在 Mac 上并已卸载并再次安装。

有没有人遇到过同样的问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:10:40.573

重新启动计算机后，它恢复正常工作。

# asp.net - Find All XmlNodes that has a particular attribute

> ID：14400971
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:04.593
> 
> 标签：asp.net, xml, xpath

I have this XML document:

```
<root>
  <node1 id="field2"/>
  <node2 id="field3"/>
  <node3>
    <node4 id="field4"/>
  </node3>
</root> 
```

where the common thing is the attribute named id. I would like to get all the nodes that has an attribute named "id" - regardless of level. In this example i would end up with a list of the nodes: node1, node2, node4.

Normally i would try an xpath like this: "//[@id]" but im getting an error saying that it need to return a node set.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:31:04.010

您可以使用以下 XPath：

```
//node()[@id] 
```

# java - jsp页面上的URI面临问题

> ID：14400972
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:06.543
> 
> 标签：java, jsf, oracle-adf, taglib

我的 JSP 上有一个 URI，并找到了带有 jar 的 tld。jsp 和 tld 都具有相同的 URI，但我收到以下错误

```
Error(3,5):  No tag library could be found with this URI. Possible causes could be that the URI is incorrect, or that there were errors during parsing of the .tld file. 
```

在 JSP 上看起来像这样

```
<%@ taglib uri="http://xmlns.oracle.com/adf/faces/rich" prefix="af"%> 
```

就像这样

```
<tlib-version>11.1.2.3.0</tlib-version>
<short-name>af</short-name>
<uri>http://xmlns.oracle.com/adf/faces/rich</uri> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:37:58.017

> *是的，罐子在同一条路上`/WEB-INF/lib/OracleADF/adf-richclient-impl-11.jar`*

这个不对。该文件夹`/oracleADF`不属于那里。您不能在其中创建子文件夹`/WEB-INF/lib`（好吧，从技术上讲，您可以，但 servletcontainer 只会查找直接放在`/WEB-INF/lib`文件夹中的 JAR 并忽略任何文件夹）。

通过将 JAR 放入`/WEB-INF/lib/adf-richclient-impl-11.jar`.

如果您想组织 JAR，请查看 Ant/Maven 或 Eclipse 的*构建路径*和*部署程序集*，以自动将在其他地方组织的 JAR 文件放在`/WEB-INF/lib`构建的 WAR 文件夹中。

# javascript - 即时更改 erik vold 工具栏按钮图像

> ID：14400977
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:26.997
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在尝试使用 SDK 制作 Firefox 扩展。（如果我能避免 XUL 我很高兴）

我正在使用[erik vold 工具栏按钮](https://github.com/voldsoftware/toolbarbutton-jplib)

但我需要即时更改工具栏图像。

我的 lib/main.js （背景页面）是：

```
var tbb = require("toolbarbutton").ToolbarButton({
  id: "My-button",
  label: "My menu",
  image: Data.url('off.png'),
  onCommand: function(){
    Tabs.open(Data.url("signin.html"));
  }
});

tbb.setIcon({image:Data.url('on.png')});
console.log(tbb.image);

tbb.moveTo({
  toolbarID: "nav-bar",
  forceMove: false // only move once
}); 
```

tbb.image 是正确的，但按钮没有刷新。

我试图改变 packages/toolbarbutton-jplib/lib/toolbarbutton.js

```
function setIcon(aOptions) {
  options.image = aOptions.image || aOptions.url;
  getToolbarButtons(function(tbb) {
    tbb.image = options.image;
    tbb.setAttribute("image", options.image); // added line
  }, options.id);
  return options.image;
} 
```

但它似乎并没有刷新...... erik vold lib 是否足以满足这种需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:12:33.110

有一个`setIcon`方法和一个`image`设置器可用于更新工具栏按钮的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:20:06.547

还请务必使用此修复程序更新[https://github.com/voldsoftware/toolbarbutton-jplib/pull/13/files](https://github.com/voldsoftware/toolbarbutton-jplib/pull/13/files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T15:05:44.467

我遇到了同样的问题，所以我只是使用本教程自己编写了代码：http: [//kendsnyder.com/posts/firefox-extensions-add-button-to-nav-bar](http://kendsnyder.com/posts/firefox-extensions-add-button-to-nav-bar)

试试这个，我重写了我的代码以满足您的需求：

```
var btn = null;
var btnId = 'My-button';
var btnLabel = 'My menu';
var btnIconOn = 'on.png';
var btnIconOff = 'off.png';

var {Cc, Ci} = require('chrome');
var self = require("sdk/self");
var mediator = Cc['@mozilla.org/appshell/window-mediator;1'].getService(Ci.nsIWindowMediator);

// exports.main is called when extension is installed or re-enabled
exports.main = function(options, callbacks) {
    btn = addToolbarButton();
    // do other stuff
};

// exports.onUnload is called when Firefox starts and when the extension is disabled or uninstalled
exports.onUnload = function(reason) {
    removeToolbarButton();
    // do other stuff
};

// add our button
function addToolbarButton() {
    // this document is an XUL document
    var document = mediator.getMostRecentWindow('navigator:browser').document;      
    var navBar = document.getElementById('nav-bar');
    if (!navBar) {
        return;
    }
    var btn = document.createElement('toolbarbutton');  
    btn.setAttribute('id', btnId);
    btn.setAttribute('type', 'button');
    // the toolbarbutton-1 class makes it look like a traditional button
    btn.setAttribute('class', 'toolbarbutton-1');
    // the data.url is relative to the data folder
    btn.setAttribute('image', self.data.url(btnIconOff));
    btn.setAttribute('orient', 'horizontal');
    // this text will be shown when the toolbar is set to text or text and iconss
    btn.setAttribute('label', btnLabel);

    navBar.appendChild(btn);
    return btn;
}

function removeToolbarButton() {
    // this document is an XUL document
    var document = mediator.getMostRecentWindow('navigator:browser').document;      
    var navBar = document.getElementById('nav-bar');
    var btn = document.getElementById(btnId);
    if (navBar && btn) {
        navBar.removeChild(btn);
    }
}

btn.addEventListener('click', function() {
    Tabs.open(Data.url("signin.html"));
}, false);

tbb.setIcon({image:self.data.url(btnIconOn)}); 
```

# android - 2d 平铺地图未在 android 中使用的屏幕上显示地图

> ID：14400978
> 
> 赞同：1
> 
> 时间：2013-01-18T14:26:27.257
> 
> 标签：android, andengine, tiles

我正在使用平铺为我的游戏创建地图。我正在使用 AndEngine 框架在 android 中开发游戏。在 OnLoadResource 方法中，我正在使用加载地图方法加载 tmx 文件。当游戏构建时，它会在这一行抛出“不幸地停止工作”。起初它显示，它找不到图像，我清除了该错误。现在在这条线游戏停止。请帮助我，因为我是基于瓷砖的游戏的新手。

```
this.mTMXTiledMap = mTMXLoader.loadFromAsset(this,"tmx/levelmap.tmx"); 
```

这是代码片段：

```
private void loadMap() 
{
this.mRepeatingSpriteBackground = new   RepeatingSpriteBackground(CAMERA_WIDTH,CAMERA_HEIGHT, this.mEngine.getTextureManager(),new   AssetBitmapTextureAtlasSource(this, mapBG), 1.0f);

try 
{
final TMXLoader mTMXLoader = new TMXLoader(this, this.mEngine.getTextureManager(),  TextureOptions.BILINEAR_PREMULTIPLYALPHA, null);

this.mTMXTiledMap = mTMXLoader.loadFromAsset(this,"tmx/levelmap.tmx");
} 
catch (final TMXLoadException tmxle) 
{
Debug.e(tmxle);
}
} 
```

这是Logcat：

```
01-18 19:37:52.759: E/AndroidRuntime(643): java.lang.ArithmeticException: divide by zero
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXTileSet.getTextureRegionFromGlobalTileID(TMXTileSet.java:154)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXTiledMap.getTextureRegionFromGlobalTileID(TMXTiledMap.java:193)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXLayer.addTileByGlobalTileID(TMXLayer.java:289)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXLayer.initializeTMXTilesFromDataString(TMXLayer.java:268)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXParser.endElement(TMXParser.java:193)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:156)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatParser.appendBytes(Native Method)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:513)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXLoader.load(TMXLoader.java:93)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.entity.layer.tiled.tmx.TMXLoader.loadFromAsset(TMXLoader.java:78)
01-18 19:37:52.759: E/AndroidRuntime(643):  at apk.games.robowars.RoboWars.loadMap(RoboWars.java:577)
01-18 19:37:52.759: E/AndroidRuntime(643):  at apk.games.robowars.RoboWars.onLoadResources(RoboWars.java:248)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:168)
01-18 19:37:52.759: E/AndroidRuntime(643):  at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
01-18 19:37:52.759: E/AndroidRuntime(643):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2423) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:04:46.710

您似乎对 TMX 文件中的文件路径有问题。有关更多详细信息，请参阅AndEngine 论坛上的[这个](http://www.andengine.org/forums/development/tmx-tiled-map-divide-by-0-exception-t1244.html)和[这个线程。](http://www.andengine.org/forums/development/tmx-dividision-by-0-exeception-t1217.html)

# axapta - 从代码中打开报告的打印对话框

> ID：14400983
> 
> 赞同：2
> 
> 时间：2013-01-18T14:26:33.877
> 
> 标签：axapta, dynamics-ax-2009, x++

我试图强制打开打印对话框，以便用户所要做的就是设置电子邮件地址并按确定。我找到了多个关于如何在没有打印对话框的情况下将报告打印到文件或打印机的教程，但这不是我想要的。

通常，要通过电子邮件发送报告，用户会显示报告，单击工具栏中的打印图标，然后选择电子邮件并发送。我想自动删除前两个步骤。

到目前为止，这是我做这件事的众多尝试之一，但无济于事。

```
void emailInvoice()
{
Args                args;
ReportRun           rr;
Report              rb;
PrintJobSettings    pjs;
CustInvoiceJour     record;
;

select record where record.RecId == 5637175089;

args = new Args("SalesInvoice");
args.record(record);
args.parmEnum(PrintCopyOriginal::OriginalPrint);

// Set report run properties
rr = new ReportRun(args,'');
rr.suppressReportIsEmptyMessage(true);
rr.query().interactive(false);

// set report properties
rb = rr.report();
rb.interactive(true);

// set print job settings
pjs = rr.printJobSettings();
pjs.fileName(strfmt("C:\\Users\\gbonzo\\Desktop\\%1.pdf", record.SalesId));
pjs.fitToPage(true);
// break the report info pages using the height of the current printer's paper
pjs.virtualPageHeight(-1);

// force PDF printing
pjs.format(PrintFormat::PDF);
pjs.setTarget(PrintMedium::Mail);
pjs.viewerType(ReportOutputUserType::PDF);

// lock the print job settings so can't be changed
// X++ code int the report may try to change the destination
// to the screen for example but this does not make
// sense when running a report here
pjs.lockDestinationProperties(true);

// Initialize the report
rr.init();

rr.run();
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:02:51.723

您是否尝试过开发一个 RunBase 标准对话框类（如果您需要选择打印机，则为 RunBaseBatchPrintable）来获取您需要的所有对话框字段，并从那里以编程方式运行传递所有所需参数的报告？我很确定它会起作用，并且可能会留下更清晰的代码来分隔用户交互所需的逻辑报告。

在此处阅读示例：

[http://waikeatng.blogspot.com.es/2010/10/using-runbasebatchprintable-class.html](http://waikeatng.blogspot.com.es/2010/10/using-runbasebatchprintable-class.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:55:53.123

在调用 run() 方法之前，您必须调用 ReportRun 类的 prompt() 方法。

```
if (rr.prompt())
{
    rr.run();
} 
```

prompt() 方法将显示打印对话框。如果您想让您的用户更轻松，您可以使用 SysMailer 类，看看 quickSend() 方法。

# python - 功能视图中的 Django 基本身份验证

> ID：14400986
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:44.267
> 
> 标签：python, django, django-views, basic-authentication, tastypie

我希望将基本身份验证机制应用于我的视图函数中的函数。

我有一些通过模板返回 JSON 数据的视图函数。如果我通过网络浏览器访问我的应用程序，我希望收到登录对话框的提示，否则 Authorization 标头用于 RESTFUL API

我查看了 TastyPie 文档，但找不到任何关于如何以这种方式使用它的示例。

例如在 view.py 文件中，我有以下内容：

```
def userIndex(request):
    some_list = Some.objects.order_by('pub_date')

    return render_to_response('myapp/data.json',
                          {'some_list': some_list,},
                          mimetype="text/json") 
```

我如何将授权检查应用于上述内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:51:54.873

您无需区分浏览器访问和 API 调用。如果您遵循 HTTP 基本身份验证规范，浏览器将显示登录对话框，而您的视图不会做任何特别的事情。

这是一个实现基本身份验证检查的装饰器：http: [//djangosnippets.org/snippets/243/](http://djangosnippets.org/snippets/243/)。它根据标准用户表检查用户名/密码。

# c# - 如何从 asp.net 中的代码隐藏调用 javascript 函数

> ID：14400990
> 
> 赞同：0
> 
> 时间：2013-01-18T14:26:50.997
> 
> 标签：c#, asp.net

```
protected void addSchoolButtonClick(object sender, ImageClickEventArgs e)
    {

        Page.ClientScript.RegisterStartupScript(GetType(), "MyKey1", "SchoolSearchPopUp();", true);

        /*Some code*/
    } 
```

我正在asp.net中开发一个网站。在超链接onclick事件中我想调用一个javascript `function"SchoolSearchPopUp()"`。这个函数用于创建一个新的弹出窗口并且它工作正常。但我的问题是，一个javascript函数正在调用或弹出窗口仅在执行该函数中的其余代码后打开，并且该代码需要一些由于弹出窗口而发生的数据。如何在执行该函数中的其余代码之前创建弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:00:02.500

您需要先在页面上编写 JavaScript 来处理按钮的单击，然后调用服务器上的页面方法。将 OnClientClick 属性添加到您的按钮元素并从那里运行您的 JavaScript 方法：

```
<asp:Button ID="TestButton" OnClientClick="SchoolSearchPopup()" Text="Click Me" OnClick="addSchoolButtonClick" runat="server"/>

<script type="text/javascript">
    function SchoolSearchPopup()
    {
        alert("Popup");
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:58:42.747

我不认为可以从后面的代码中调用 javascript。C# 从服务器运行，java 是所有客户端。这里有一个类似问题的很好解释：[http ://forums.asp.net/t/1117189.aspx](http://forums.asp.net/t/1117189.aspx)

如果您需要执行 javascript 函数，您可以尝试将超链接更改为按钮并使用 OnClientClick 属性。这执行脚本客户端而不是调用服务器上的方法。

```
 <asp:button id="Button1"
                 text="Click Here"
                 onclientclick="SchoolSearchPopUp()"
                 runat="server" /> 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:01:48.357

如果您想在回发之前执行一些 javascript，您需要将超链接的点击事件注册到 js 方法，然后在执行您希望运行的任何客户端逻辑后将您的帖子提交到服务器。（不是相反，使用 RegisterStartupScript）

例子：

```
$("#myHyperLink").click(function() {

    // do page logic, in your case show a modal window
    $("#myModalDivContainer").show();

    // submit your post to the server... replace targetClientID with ID of server control you're posting to
    __doPostBack('targetClientID', '');

   // NOTE: If you want to perform an AJAX request instead simply use some jQuery here instead. it's up to you how to handle the request from this point :)

}); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:45:49.200

将您的回发触发器更改为弹出窗口中的内容。

# android - android.widget.ImageView 缩放会产生丑陋的结果

> ID：14400991
> 
> 赞同：1
> 
> 时间：2013-01-18T14:27:10.887
> 
> 标签：android, bitmap, imageview, scaling

我正在尝试在 Android 上的 ImageView 中缩放图像，但无论我尝试什么设置，按比例缩小的图像总是看起来很难看。这是我的代码生成的图像：

[http://i.imgur.com/4yubR.png?1](http://i.imgur.com/4yubR.png?1)

左边的图像是在我的台式计算机上使用 ImageMagick 预先缩放的。ImageView 显示此图像没有问题。右边的图像是由 ImageView 实际缩放的图像，您可以清楚地看到，它看起来很丑：/

生成上述两个图像的代码如下：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    RelativeLayout body = new RelativeLayout(this);

    for(int i = 0; i < 2; ++i)
    {
        ImageView iv;

        iv = new ImageView(this);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(34, 34);
        params.leftMargin = i*50;
        body.addView(iv, params);

        AssetManager am = this.getAssets();

        try
        {
            BufferedInputStream buf;
            if(i == 0)
                buf = new BufferedInputStream(am.open("images/search_34x34.png"));
            else
                buf = new BufferedInputStream(am.open("images/search.png"));

            Bitmap bitmap = BitmapFactory.decodeStream(buf);
            BitmapDrawable bd = new BitmapDrawable(bitmap);
            bd.setAntiAlias(true);
            iv.setImageDrawable(bd);
            buf.close();
        }
        catch(java.io.IOException e)
        {
        }
    }

    setContentView(body);
} 
```

如果我遗漏了什么，请告诉我。我简直不敢相信 Android 会如此糟糕地缩放图像（实际上，我很难相信这是默认行为）。

另请注意，我不想预先缩放图像，因为我的应用程序必须处理来自未知来源的图像，所以我必须即时缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:48:43.263

也许您必须在您的 xml 布局中设置 scaleType。例如

```
 <ImageView
          android:scaleType="center"
       </ImageView> 
```

有以下 scaleTypes：

1.  中央
2.  CENTER_CROP
3.  CENTER_INSIDE
4.  FIT_CENTER
5.  FIT_END
6.  FIT_START
7.  FIT_XY
8.  矩阵

你可以在这里看到：

[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

## 编辑

尝试了一些东西，现在即使使用其他照片我也得到了相同的结果。我认识到，当我缩小手机内的图像时，一切看起来都很好。例如，我使用了一个 120x120 dp 的 imageView 和一个 300x300px 的资源。如果我在平板电脑上使用相同的imageView，即使是120x120，同样大小的资源图片，看起来很糟糕。我认为摆脱这种情况的唯一方法是将应用程序外部的图像缩放到所需的大小，然后再将其设置为您的项目。例如，如果您使用 200x200dp 的 imageView，请将图像缩放到接近此大小。如果您支持多种屏幕尺寸，并将平板电脑的此 imageView 的尺寸设置为 500x500dp，请将您的图像缩放到此尺寸附近。当然，这只有在你得到一个比最大的 imageView 分辨率更高的图像时才会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:15:57.210

我看不到你在哪里缩小你的位图。我认为您正试图将高分辨率位图塞入尺寸较小的 ImageView 中。

[这是有关缩放位图的文档](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。所描述的技术也适用于动态缩放位图。

# python - Spyder 默认模块导入列表

> ID：14400993
> 
> 赞同：8
> 
> 时间：2013-01-18T14:27:13.267
> 
> 标签：python, import, module, spyder

我正在尝试设置一个稍微定制的 Spyder 版本。当 Spyder 启动时，它会自动导入一长串模块，包括来自 matplotlib、numpy、scipy 等的东西。有没有办法将我自己的模块添加到该列表中？

万一它有所作为，我正在使用 Python(X,Y) Windows 安装程序提供的 Spyder 配置。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T01:18:26.467

首先，您必须使用要在启动时导入的模块创建一个 Python 文件。假设您调用它`my_imports.py`并且它具有以下内容：

```
import numpy as np
import matplotlib.pyplot as plt 
```

然后你必须去

`Tools > Preferences > IPython Console > Startup > Run a file`

选择选项

`Use the following file`

最后单击该选项下方文本字段右侧的按钮以选择您的`my_imports.py`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:35:01.013

Spyder 的启动脚本位于`site-packages/spyderlib/scientific_startup.py`.

卡洛斯的回答也可以，但这就是我想要的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T14:35:51.550

如果 Spyder 通过 python 二进制文件作为 python 脚本执行，那么您应该能够简单地编辑 Spyder python 源并包含您需要的模块。你应该看看它是如何在启动时实际执行的。

# javascript - 在jqgrid中处于编辑模式时如何使文本向右对齐

> ID：14400994
> 
> 赞同：1
> 
> 时间：2013-01-18T14:27:13.237
> 
> 标签：javascript, jquery, jqgrid

我在 jqgrid 中有一个列的自定义格式化程序，在编辑模式下，它总是向左对齐。我怎样才能使它与右边对齐？

这是 colModal 和自定义格式化程序的一部分，其中一些列是可编辑的。

```
 colModel: [ { name: 'col10', width: '70px', fixed: true, align: right',
                  formatter:percentFomatter, editable: true }, 
    { name: 'col11', width: '70px', fixed: true, align: 'right', formatter: percentFomatter, editable: true }, 
    { name: 'col12', width: '70px', fixed: true, align: 'right' } ], function percentFomatter(cellvalue, options, rowObject) { return cellvalue + '%'; }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-10T18:21:49.153

您可以使用`editoptions:{datainit: ...`将样式应用于正在编辑的元素。

例如

```
...
...
align: "right",
editable:true,
editoptions: {dataInit:function(e){
                e.style.textAlign = 'right';                            
             }}
...
... 
```

我在[这里创建了小演示](http://jsfiddle.net/amighty/kxe1og6r/15/)

# php - Xml 错误：错误的字符集？

> ID：14400997
> 
> 赞同：0
> 
> 时间：2013-01-18T14:27:16.647
> 
> 标签：php, xml, encoding, character-encoding, domdocument

我正在尝试使用 DOMDocument 通过 php 生成一个 xml 文件。但是那里有一些“奇怪”的字符，所以它给了我一个编码错误。`error on line 2 at column 81: Encoding error`.

我正试着放进`[0.3e](¯``·._.·[name]·._.·´¯)`去。

我解析如下

```
header( 'content-type: text/xml' );
$domTree = new DOMDocument( '1.0', 'UTF-8' ); 
```

最后`echo $domTree->saveXML();`。

输出如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<server><errors/><info><value>0</value><value>25</value><value>30</value><value>[0.3e]( 
```

希望你能帮助告诉我我在这里做错了什么或使用哪个字符集。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:34:04.210

无论您从哪里获取数据，都不会以 UTF-8 格式提供给您。我假设它是 Windows-1252，但我可能是错的。

```
header( 'content-type: text/xml' );
$domTree = new DOMDocument( '1.0', 'Windows-1252' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:35:49.710

您可能需要强制输入字符串的编码并将任何剩余的实体转义为 HTML 实体：

```
$enc = mb_detect_encoding($text);
$text = @mb_convert_encoding($text, 'UTF-8',$enc);      
$text = htmlentities($text,ENT_IGNORE,'UTF-8'); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T14:31:28.353

在 xml 节点中使用 CData 部分！