# StackOverflow 问答 15679000-15679999

# c++ - libcxx 中的 std::thread::join 在哪里实现

> ID：15679001
> 
> 赞同：0
> 
> 时间：2013-03-28T10:08:35.747
> 
> 标签：c++, c++11, clang

我想知道*libcxx*`std::thread::join`在哪里实现。虽然它在标题中声明，但似乎没有定义。我什至查看了*libcxxabi*，但在那里也找不到。*`<thread>`*

 **那么有人可以指出，它在哪里实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:48:26.600

它在[src/thread.cpp](http://llvm.org/svn/llvm-project/libcxx/trunk/src/thread.cpp)中，靠近顶部：

```
void
thread::join()
{
    int ec = pthread_join(__t_, 0);
#ifndef _LIBCPP_NO_EXCEPTIONS
    if (ec)
        throw system_error(error_code(ec, system_category()), "thread::join failed");
#else
    (void)ec;
#endif  // _LIBCPP_NO_EXCEPTIONS
    __t_ = 0;
} 
```**

# android - 未找到 EGLConfig

> ID：15679007
> 
> 赞同：6
> 
> 时间：2013-03-28T10:08:55.620
> 
> 标签：android, opengl-es-2.0, andengine

我正在尝试使用[AndEngine 教程在 android 中制作简单的游戏](http://www.raywenderlich.com/12065/how-to-create-a-simple-android-game)

现在，当我运行该项目时，我收到错误消息说**java.lang.IllegalArgumentException: No EGLConfig found！**

TowerOfHanoiActivity.java

```
public class TowerOfHanoiActivity extends SimpleBaseGameActivity {

    private static int CAMERA_WIDTH = 800;
    private static int CAMERA_HEIGHT = 480;
    private ITextureRegion mBackgroundTextureRegion, mTowerTextureRegion,
            mRing1, mRing2, mRing3;

    @Override
    public EngineOptions onCreateEngineOptions() {

        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    protected void onCreateResources() {

        try {

            // 1 - Set up bitmap textures
            ITexture backgroundTexture = new BitmapTexture(
                    this.getTextureManager(), new IInputStreamOpener() {

                        @Override
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/background.png");
                        }
                    });

            ITexture towerITexture = new BitmapTexture(
                    this.getTextureManager(), new IInputStreamOpener() {

                        @Override
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/tower.png");
                        }
                    });

            ITexture ring1 = new BitmapTexture(this.getTextureManager(),
                    new IInputStreamOpener() {

                        @Override
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/ring1.png");
                        }
                    });
            ITexture ring2 = new BitmapTexture(this.getTextureManager(),
                    new IInputStreamOpener() {

                        @Override
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/ring2.png");
                        }
                    });
            ITexture ring3 = new BitmapTexture(this.getTextureManager(),
                    new IInputStreamOpener() {

                        @Override
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/ring3.png");
                        }
                    });

            // 2 - Load bitmap textures into VRAM

            backgroundTexture.load();
            towerITexture.load();
            ring1.load();
            ring2.load();
            ring3.load();

            // 3 - Set up texture regions
            this.mBackgroundTextureRegion = TextureRegionFactory.extractFromTexture(backgroundTexture);
            this.mTowerTextureRegion = TextureRegionFactory.extractFromTexture(towerITexture);
            this.mRing1 = TextureRegionFactory.extractFromTexture(ring1);
            this.mRing2 = TextureRegionFactory.extractFromTexture(ring2);
            this.mRing3 = TextureRegionFactory.extractFromTexture(ring3);

        } catch (IOException e) {
            Debug.e(e);
        }

    }

    @Override
    protected Scene onCreateScene() {

        // 1 - Create new scene
        final Scene scene = new Scene();
        Sprite backroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion, getVertexBufferObjectManager());
        scene.attachChild(backroundSprite);
        return scene;
    }

} 
```

日志猫：

```
03-28 15:21:17.957: D/AndEngine(1478): TowerOfHanoiActivity.onCreate @(Thread: 'main')
03-28 15:21:17.997: D/dalvikvm(1478): Trying to load lib /data/data/com.tutorial.towerofhanoi/lib/libandengine.so 0xb67ac4e0
03-28 15:21:18.007: D/dalvikvm(1478): Added shared lib /data/data/com.tutorial.towerofhanoi/lib/libandengine.so 0xb67ac4e0
03-28 15:21:18.007: D/dalvikvm(1478): No JNI_OnLoad found in /data/data/com.tutorial.towerofhanoi/lib/libandengine.so 0xb67ac4e0, skipping init
03-28 15:21:18.127: D/AndEngine(1478): TowerOfHanoiActivity.onResume @(Thread: 'main')
03-28 15:21:18.277: D/libEGL(1478): Emulator without GPU support detected. Fallback to software renderer.
03-28 15:21:18.277: D/libEGL(1478): loaded /system/lib/egl/libGLES_android.so
03-28 15:21:18.317: W/dalvikvm(1478): threadid=11: thread exiting with uncaught exception (group=0xb615e180)
03-28 15:21:18.328: E/AndroidRuntime(1478): FATAL EXCEPTION: GLThread 81
03-28 15:21:18.328: E/AndroidRuntime(1478): java.lang.IllegalArgumentException: No EGLConfig found!
03-28 15:21:18.328: E/AndroidRuntime(1478):     at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:183)
03-28 15:21:18.328: E/AndroidRuntime(1478):     at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:157)
03-28 15:21:18.328: E/AndroidRuntime(1478):     at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1009)
03-28 15:21:18.328: E/AndroidRuntime(1478):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1362)
03-28 15:21:18.328: E/AndroidRuntime(1478):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
03-28 15:21:18.387: D/gralloc_goldfish(1478): Emulator without GPU emulation detected.
03-28 15:21:18.427: I/dalvikvm(1478): threadid=3: reacting to signal 3
03-28 15:21:18.437: I/dalvikvm(1478): Wrote stack traces to '/data/anr/traces.txt'
03-28 15:21:18.717: D/AndEngine(1478): TowerOfHanoiActivity.onPause @(Thread: 'main')
03-28 15:21:19.167: D/AndEngine(1478): TowerOfHanoiActivity.onDestroy @(Thread: 'main')
03-28 15:21:19.197: D/AndEngine(1478): UpdateThread interrupted. Don't worry - this EngineDestroyedException is most likely expected!
03-28 15:21:19.197: D/AndEngine(1478): org.andengine.engine.Engine$EngineDestroyedException
03-28 15:21:19.197: D/AndEngine(1478):  at org.andengine.engine.Engine.throwOnDestroyed(Engine.java:574)
03-28 15:21:19.197: D/AndEngine(1478):  at org.andengine.engine.Engine.onTickUpdate(Engine.java:560)
03-28 15:21:19.197: D/AndEngine(1478):  at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820)
03-28 15:21:19.197: D/AndEngine(1478): TowerOfHanoiActivity.onDestroyResources @(Thread: 'main')
03-28 15:21:19.197: D/AndEngine(1478): TowerOfHanoiActivity.onGameDestroyed @(Thread: 'main')
03-28 15:21:22.477: I/Process(1478): Sending signal. PID: 1478 SIG: 9 
```

我正在使用以下设置在模拟器中测试我的应用程序

![在此处输入图像描述](../Images/ca4665826eea4bbf6886fabf23c9da1b.png)

请给我一个适当的解决方案。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T05:29:15.940

使用 Target 4.0.3 -API 级别 15 和 GPU 仿真创建 AVD 是。我的示例说明在此之后运行。如果您还有其他问题，请访问[AndEngine 论坛并获取有关 OpenGL 驱动程序的详细信息](http://www.andengine.org/forums/gles2/no-eglconfig-found-t6129-40.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T09:40:26.380

我遇到了同样的问题，这在 Windows 7 64 位上对我有用。我的 AVD 设置是 Device : (800 x 480 hdpi), Target: Android 4.4 API Level 19, CPU/ABI: ARM (armeabi-v7a)。

1.  我将内存选项更改为 512 VM Heap 32
2.  然后是仿真选项并选中“使用主机 GPU”。
3.  单击确定，刷新，清理项目，重新启动 Eclipse。
4.  运行配置 -> Android -> 项目 -> 运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:42:14.873

你的模拟器配置没问题，尝试创建一个新的模拟器并运行这个可能运行的代码。如果没有，那么编码应该有问题

# android - 如何在android中退出应用程序

> ID：15679011
> 
> 赞同：0
> 
> 时间：2013-03-28T10:09:15.230
> 
> 标签：android

我正在尝试在主页活动的应用程序中应用退出功能。我尝试了一些方法来执行我的目标，例如or`System.Exit(0);`但问题是如果我从家里导航到另一个活动而不是我回到主页活动并退出它返回的应用程序以前导航的活动`finish();``android.os.Process.killProcess(android.os.Process.myPid());super.onDestroy();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:14:56.557

尝试像下面那样调用finish()。所以它将清除活动的实例。

当您从 ActivityB 回到 HomeActivity 时，尝试调用 finish()

```
Intent i = new Intent(ActivityB.this, Home.class);
startActivity(i);
finish(); 
```

按下后退按钮**强文本** 不会“杀死应用程序”。**当用户按下 BACK 按钮时，它会完成屏幕上的活动。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:19:07.253

您应该使用广播接收器来执行此操作。例如，当用户点击退出按钮时，您应该发送类似的意图

```
Intent intent = new Intent();
intent.setAction(ACTION_LOGOUT);
context.sendBroadcast(intent); 
```

在您使用的 baseActivity 中（或在项目的每个活动中）使用类似的东西

```
BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    try {
    String action = intent.getAction();
    if (ACTION_LOGOUT.equals(action)) {
        finish();
    }
}
}; 
```

在 onCreate 中：

```
registerReceiver(mBroadcastReceiver, new IntentFilter(ACTION_LOGOUT)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T11:01:29.400

试试这个退出你的应用程序:)

```
 finish();
    moveTaskToBack(true);
 System.exit(0); 
```

# sox - sox：A-法则到 PCM

> ID：15679015
> 
> 赞同：1
> 
> 时间：2013-03-28T10:09:25.200
> 
> 标签：sox

如何将 A-law 波形文件转换为 PCM？我已经用 sox 尝试了几个选项，但输出总是保持 A-law。供您参考，这是我要转换的文件的完整规范。

```
<me@comp:~> file a.wav
a.wav: RIFF (little-endian) data, WAVE audio, ITU G.711 A-law, stereo 8000 Hz 
```

提前致谢，

乔里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T15:45:57.233

通常的做法是：

```
sox a.wav -e signed-integer pcm.wav 
```

# c# - C# 将一种引用类型分配给另一种引用类型而不引用对象

> ID：15679016
> 
> 赞同：0
> 
> 时间：2013-03-28T10:09:25.700
> 
> 标签：c#, .net, multithreading, winforms, assign

我可以在不引用该对象的情况下为引用类型赋值吗？就像我有获取文件信息的函数一样，我想检查一下稍后在不同的线程中是否发生了变化。

例子

```
info = GetInfo(path);
checkInfo=info; // I make changes to info later, but I wanna checkInfo to remain the same 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:14:46.770

您要么需要克隆 info 变量，要么需要重新分配它。手动克隆它需要相当多的工作，而且可能很脆弱，所以我推荐这样的东西：

```
checkInfo = info:
info = GetInfo(path); 
```

如果您在到达这里之前没有更改 info 变量，另一种选择是使用 GetInfo 设置 checkInfo。考虑这样一个事实，如果是这种情况，GetInfo 将为两者构建相同的对象，因此您会得到相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:15:10.020

据我了解您的问题，您需要创建 info 对象的深层副本

这是一个[解决方案](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)（使用序列化）

像这样创建扩展方法：

```
public static class ExtensionMethods
{
    // Deep clone
    public static T DeepClone<T>(this T a)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            BinaryFormatter formatter = new BinaryFormatter();
            formatter.Serialize(stream, a);
            stream.Position = 0;
            return (T) formatter.Deserialize(stream);
        }
    }
} 
```

用它：

```
checkInfo = info.DeepClone(); 
```

PS 通常，需要深度克隆意味着需要**代码重构**。不一定，但经常......我认为在你的情况下应该有一个更好的解决方案，而不是复制对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:28:43.057

您可以在另一个类中隐藏/包装您的 FileInfo 类，并让其他线程仅访问包装类。当其他线程更改 FileInfo 时，包装类可以触发事件，例如 FileInfoChanged。

# tesseract - 使用 Tesseract-OCR 获取识别字符的字体

> ID：15679017
> 
> 赞同：7
> 
> 时间：2013-03-28T10:09:32.423
> 
> 标签：tesseract

是否可以使用 Tesseract-OCR 获取已识别字符的字体，即它们是 Arial 还是 Times New Roman，无论是从命令行还是使用 API。

我正在扫描可能有不同部分和不同字体的文档，拥有这些信息会很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T23:31:14.203

Tesseract在您可以使用`WordFontAttributes`的类中定义了一个 API 函数。[`ResultIterator`](https://github.com/tesseract-ocr/tesseract/blob/3.04/ccmain/ltrresultiterator.cpp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-03-22T21:46:20.347

根据[nguyenq 的](https://stackoverflow.com/users/754060/nguyenq) [回答](https://stackoverflow.com/a/15693969/4743961)，我编写了一个简单的 python 脚本，打印每个检测到的字符的字体名称。该脚本使用 python lib [tesserocr](https://github.com/sirfz/tesserocr)。

```
from tesserocr import PyTessBaseAPI, RIL, iterate_level

def get_font(image_path):
    with PyTessBaseAPI() as api:
        api.SetImageFile(image_path)
        api.Recognize()
        ri = api.GetIterator()
        level = RIL.SYMBOL

        for r in iterate_level(ri, level):
            symbol = r.GetUTF8Text(level)
            word_attributes = r.WordFontAttributes()

            if symbol:
                 print(u'symbol {}, font: {}'.format(symbol, word_attributes['font_name']))

  get_font('logo.jpg') 
```

# jquery - jQuery 切换和更改文本

> ID：15679018
> 
> 赞同：5
> 
> 时间：2013-03-28T10:09:33.683
> 
> 标签：jquery, slidetoggle

**jQuery**

```
$('#message div').hide();
    $('.readmore').click(function(e){
        e.preventDefault();
        $('#message div').slideToggle();
    }); 
```

**html**

```
<div id="message">
    <p class="intro">This is an introduction.</p>
            <div>
            <p>This is the first paragraph thats orginally hidden</p>
        <p>This is the second paragraph</p>
            </div>
            <a href="#" class="readmore">Read More</a>
        </div><!--message--> 
```

当单击阅读更多按钮时，内容会被滑动切换并显示给所有人并再次单击它会隐藏以仅显示我的 .intro 但我想在阅读更多和显示更少之间切换阅读更多文本。

使用 slideToggle 时这怎么可能

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T10:12:00.967

检查当前元素在其点击事件和使用条件中的文本，看看是否必须更改文本，如果是，请`text()`再次使用；）。

试试这个：

```
 $('.readmore').click(function(e){
    e.preventDefault();
    $('#message div').slideToggle();
    $(this).text( $(this).text() == 'Read More' ? "Show Less" : "Read More"); // using ternary operator.
}); 
```

# java - java - 如何在java中使用imap或pop3获取特定数量的电子邮件？

> ID：15679022
> 
> 赞同：0
> 
> 时间：2013-03-28T10:09:48.283
> 
> 标签：java, imap, jakarta-mail, pop3

我必须使用 imap 或 pop3 协议和 java 邮件服务来获取固定号码电子邮件。有什么办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:23:06.157

那么在这种情况下，可以使用 fetch 命令：

FETCH 2:4（标志体 [HEADER.FIELDS (To)]）

此命令将获取 UID 2 到 4 的消息并获取所需的信息。

在 JavaMail API 的情况下，我猜这种方法是不公开的，所以首先进行快速获取以获取元数据，然后遍历所需数量的消息，一次获取每条消息。

有一种方法可以使用 fetchprofile 进行快速获取。

我不记得我很久以前试过了。但这应该是一个良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:06:12.240

首先，使用 Folder.getMessages 方法获取要获取的消息集的 Message 对象。getMessages 方法不**获取**任何消息数据。

接下来，根据您的操作，您可能希望使用 Folder.fetch 方法来预取一些消息元数据（例如，标头）。这对 IMAP 比对 POP3 更有用。请注意，可以将 fetch 方法应用于您在第一步中获得的 Message 对象数组。

最后，遍历您在第一步中获得的 Message 对象并访问每条消息所需的数据。这是从服务器实际获取消息数据的时间。

# javascript - 如何使用javascript在鼠标上移动div？

> ID：15679028
> 
> 赞同：1
> 
> 时间：2013-03-28T10:10:12.290
> 
> 标签：javascript, html, onmouseover

的HTML：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<title>Empty</title>

<script type="text/JavaScript">

<!--

-->

</script>

</head>
<body>
<div class="blackbox" id="specialbox"><p class="boxtext">Text</p></div>
<div class="blackbox"><p class="boxtext">Hem</p></div>
<div class="blackbox"><p class="boxtext">Stugan</p></div>
<div class="blackbox"><p class="boxtext">Info</p></div>
</body>
</html> 
```

CSS：

```
body {
    background-image:url('images/bkrnd.jpg');
    background-size: cover;
    background-repeat: no-repeat;
}

.boxtext {
    color: #ffffff;
    text-align: center;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 45px;
}

#specialbox {
    margin-bottom: 10px;
}

.blackbox {
    height: 75px;
    width: 400px;
    background-color: #000000;

    opacity: 0.5;
    filter:alpha(opacity=50);
    margin-bottom: 3px;
    line-height: 73px;
}

p {
margin: 0;
padding: 0;
} 
```

当我将鼠标悬停在`div`所谓的“黑盒”上时，我希望它向右移动一点。它必须用javascript来完成。我已经尝试了我在谷歌上搜索过的所有代码和教程，但它们不起作用。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:18:47.600

为什么使用javascript？使用 css 更简单：

```
.blackbox:hover {
   margin-left: 10px;
} 
```

工作小提琴：http: [//jsfiddle.net/gshNP/](http://jsfiddle.net/gshNP/)

用于动画：

```
.blackbox:hover {
  margin-left: 10px;    
  transition: margin-left .5s;
  -moz-transition: margin-left .5s; /* Firefox 4 */
  -webkit-transition: margin-left .5s; /* Safari and Chrome */
  -o-transition: margin-left .5s; /* Opera */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:15:17.850

您需要`blackbox`用一个 div 包围您的 div，例如：

**编辑：**

```
<div class="blackbox" onmouseover="moveDiv(this);" style="position:absolute; top:100px; left:108px;"id="specialbox"><p class="boxtext">Wedén</p></div>
<div class="blackbox" onmouseover="moveDiv(this);" style="position:absolute; top:150px; left:108px;"<p class="boxtext">Hem</p></div>
<div class="blackbox" onmouseover="moveDiv(this);" style="position:absolute; top:200px; left:108px;"<p class="boxtext">Stugan</p></div>
<div class="blackbox" onmouseover="moveDiv(this);" style="position:absolute; top:250px; left:108px;"<p class="boxtext">Info</p></div> 
```

然后使用 javascript，如下所示：

```
function moveDiv(divRef)
{
 var newTop = divRef.style.top;
 newTop = parseInt(newTop);
 newTop += 10;
 divRef.style.top = newTop + 'px';
}; 
```

看看这里的例子：http: [//jsbin.com/agejud/2/](http://jsbin.com/agejud/2/)

以上只是一个例子。如果你想应用到你的例子，你应该在你的 css 中为你的黑盒添加属性。像这样的东西：

```
.boxtext {
    color: #ffffff;
    text-align: center;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 45px;

    left: 0px;
} 
```

或者您可以使用 jQuery 进行更平滑的过渡。你可以在这里找到一个例子：[使用 jquery 移动元素](https://stackoverflow.com/questions/4998757/moving-elements-with-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T00:01:34.157

好吧，这是一个非常古老的问题，但无论如何我都会提出这个选项。这基本上是一种使用 translate3d css 属性以“浮动”方式移动 Div 的 javascript 方法。

它是 CSS 和 javascript 的混合，以一种基本的方式将 transform CSS 属性添加到与鼠标交互的不同点的元素中。

这不是很好的编码，但它有点工作。一般来说，我对编码很陌生，所以......请忍受我的代码。我相信很多人都有更短更好的方法来实现这一点，希望这是一个好的开始。

```
const a = "transition: all 2s ease; transform: translate3d(-4.234px, 5px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); transform-style: preserve-3d;";
const b = "transition: all 2s ease; transform: translate3d(4.234px, -5px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); transform-style: preserve-3d;";
const c = "transition: all 2s ease; transform: translate3d(-4.234px, -5px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); transform-style: preserve-3d;";
const d = "transition: all 2s ease; transform: translate3d(4.234px, 5px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); transform-style: preserve-3d;";
const e = "transition: all 2s ease; transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);transform-style: preserve-3d;";
const f = "transition: all 2s ease; transform: translate3d(14px, -0.03px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);transform-style: preserve-3d;";
const g = "transition: all 2s ease; transform: translate3d(-14px, -0.03px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);transform-style: preserve-3d;";
const h = "transition: all 2s ease; transform: translate3d(-14px, 0.03px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);transform-style: preserve-3d;";
const i = "transition: all 2s ease; transform: translate3d(14px, 0.03px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);transform-style: preserve-3d;";

const img = document.getElementById("img");
img.style.cssText = d;

const div = document.getElementById("targetbox");
div.style.cssText = f;

const anchor = document.getElementById("anchor");
anchor.style.cssText = e;

anchor.onmouseenter = function() {
  img.style.cssText = b;
  div.style.cssText = g;
}
anchor.onmouseover = function() {
  img.style.cssText = c;
  div.style.cssText = i;
}
anchor.onmousemove = function() {
  img.style.cssText = a;
  div.style.cssText = h;
}
anchor.onmouseout = function() {
  img.style.cssText = c;
  div.style.cssText = f;
}
anchor.onmouseleave = function() {
  img.style.cssText = b;
  div.style.cssText = i;
}
```

```
.boxtext {
  color: #ffffff;
  text-align: center;
  font-family: Helvetica, Arial, sans-serif;
  font-size: 16px;
  display: inline-block;
  position: relative;
}

#targetbox {
  margin: 0 0 10px 5px;
}

.blackbox {
  height: 75px;
  width: 150px;
  background-color: #000000;
  position: absolute;
  opacity: 0.8;
  filter: alpha(opacity=50);
  margin-bottom: 3px;
  line-height: 7px;
  left: -20px;
  display: inline-block;
  top: 20px;
  text-align: center;
}

p {
  margin: 0;
  padding: 0;
  color: #ffffff;
}

img {
  width: 200px;
  height: 200px;
}

a {
  position: absolute;
  margin-left: 50px;
}
```

```
<a id="anchor">
  <img id="img" src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2019/05/event-handlers.png?fit=1200%2C600&ssl=1" 30vw>
  <div id="targetbox" class="blackbox">
    <h3 class="boxtext"> Hello World </h3>
    <p> Floating div</p>
  </div>
</a>
```

# iphone - 在 UITableView 中实现页脚的正确方法

> ID：15679031
> 
> 赞同：1
> 
> 时间：2013-03-28T10:10:20.753
> 
> 标签：iphone, ios, objective-c, uitableview, uistoryboard

所以我[*在这里*](https://stackoverflow.com/questions/9605381/how-to-add-a-footer-to-a-uitableview-in-storyboard)读到，我可以简单地将 UITableViewCell 拖到情节提要中 UITableViewController 的底部，并让它像页脚一样。这个页脚行有一个活动指示器，就是这样。它的宽度为 320，高度为 55，指示器位于行的中心。请注意，它是**UIView**而不是 UITableViewCell 因为我只能让它与前者一起使用。

**首先**， UITableView 不会停在页脚处。如果他将滚动超出 UITableView 的底部，则可以看到页脚。用户一松开手指，页脚就会从站点中消失，因为 UITableView 会将其滚动返回到最后一个元素。我正在尝试做 Instagram 正在做的事情 - 如果您滚动到底部，您可以在底部看到他们的自定义活动指示器，并且 UITable 将在该指示器处保持其滚动位置。我怎样才能做到这一点？

**其次**，我有一些由某些用户操作执行的自定义滚动。现在，我有以下代码：

```
 if (row + 1 < [self.tableView numberOfRowsInSection:0]) { 
        [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForItem:row+1 inSection:0]
                              atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
    } else {
        // TODO scroll a little down so the user can see the activityIndicator
    } 
```

如何告诉我的 tableView 以编程方式滚动到页脚并让它停在那里？

**第三**，在一开始，我的 UITableView 必须先从我的服务器获取内容，然后才能填充 tableView。不幸的是，我无法让页脚视图最大化 UITableView 的空间，以便 activityIndi​​cator 出现在中心。现在看起来是这样的：

![在此处输入图像描述](../Images/7bea656a8d2a719499047ba3340e942c.png)

我认为我的结构设置正确：

![在此处输入图像描述](../Images/a48cf9d3a60b8391bf914286520cf234.png)

我怀疑在 UITableView 中有一个 UIView 可能会阻止视图最大化。

**总结** 对上述问题有什么建议吗？我为这个问题的长度道歉，但我觉得它们都与上面提到的同一个问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:11:53.733

我终于弄明白了。

关于@zing 和@Lithu 的答案，这很有效。但是，从此方法返回 footerView 会强制 footerView “粘”到 TableView 的底部。我的意思是始终显示页脚视图（这不是我想要的）

我终于使用了 self.tableView.footerView = MyView。我禁用了 UIView 上的所有 spring 和 struct 设置，它非常适合。（我之前已将其设置为最大化，希望在表格中没有任何内容时使其最大化）

关于居中活动指示器：如果 UITableView 中没有任何内容（通过检查 numberOfRows），我最终将页脚视图设置为隐藏。如果发生这种情况，我以编程方式在中心添加了 ActivityIndi​​cator。

感谢所有的答案！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:18:13.527

您是否尝试在 UITableview 页脚的正确委托中执行此操作

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:27:22.540

使用此代码在页脚中添加任何视图。例如

```
- (UIView*)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
       UIView *footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 50, self.tblView.frame.size.width, 49)];
       return footerView;
    } 
```

# ios - iOS：使用 YouTube Gdata API 检索整个 YouTube 播放列表（所有视频）

> ID：15679033
> 
> 赞同：0
> 
> 时间：2013-03-28T10:10:27.107
> 
> 标签：ios, youtube-api, gdata, gdata-api

我已经设法在 iPhone 项目中使用 GData。我还设法获取了所有上传视频和所有播放列表名称。

项目参考：[YouTubeList](https://github.com/naorcho/YouTubeUploadsList)

我需要获取播放列表的所有链接，以便在按下单元格时显示视频（您可以在我添加的项目中看到它是如何工作的）

这是一些代码，我可以通过它获得播放列表名称：

```
 // get the youtube service
    GDataServiceGoogleYouTube *service = [self youTubeService];

    // feed id for user playlist
    NSString *uploadsID = kGDataYouTubeUserFeedIDPlaylists;
    // construct the feed url
    NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForUserID:kGDataServiceDefaultUser
                                                         userFeedID:uploadsID];
    // make API call
    [service fetchFeedWithURL:feedURL
                     delegate:self
            didFinishSelector:@selector(request:finishedWithFeed:error:)];

    [super viewDidLoad];
}

- (void)request:(GDataServiceTicket *)ticket
finishedWithFeed:(GDataFeedBase *)aFeed
          error:(NSError *)error {

    self.feed = (GDataFeedYouTubeVideo *)aFeed;
    NSLog(@"FEED:%@", [self.feed entries]);
    [self.tableView reloadData];
} 
```

上面的代码列出了我在帐户中拥有的所有播放列表。我需要获取特定播放列表的视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:40:25.430

我用以下方法修复了它：

在 viewDidLoad

```
NSURL *feedURL = [NSURL URLWithString:@"http://gdata.youtube.com/feeds/api/playlists/PlayList_ID"];
// make API call

[service fetchFeedWithURL:feedURL
                    delegate:self
                    didFinishSelector:@selector(playlistTicket:finishedWithFeed:error:)]; 
```

然后，方法：

```
- (void)playlistTicket:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedYouTubePlaylist *)feed error:(NSError *)error {
  if(!error)
   {
       // save the feed and reload the table
       self.feed = feed;
       [self.tableView reloadData];
   }
} 
```

# cakephp - Cakephp 查找查询问题

> ID：15679038
> 
> 赞同：0
> 
> 时间：2013-03-28T10:10:32.303
> 
> 标签：cakephp, model, cakephp-2.1

我正在对模型进行查找，如下所示，但是生成的 SQL 是错误的，因此我得到了不正确的结果。

```
$bookings = $this->Booking->find('all', array(
    'conditions' => array(
        'Booking.created BETWEEN ? AND ?' => array(
            date('Y-m-d H:i:s', strtotime('-24 hours')),
            date('Y-m-d H:i:s', strtotime('-12 hours'))
        ),
        'OR' => array(
            'Booking.payment_status' => 3,
            'Booking.payment_status' => 2
        )
    )
)); 
```

此查找生成的 WHERE 条件是（如 cake debugkit 所示）

```
WHERE `Booking`.`created` BETWEEN '2013-03-27 11:01:57' AND '2013-03-27 23:01:57' AND `Booking`.`payment_status` = 2 
```

我试图创造的条件是

```
WHERE `Booking`.`created` BETWEEN '2013-03-27 11:01:57' AND '2013-03-27 23:01:57' AND (`Booking`.`payment_status` = 2 OR `Booking`.`payment_status` = 3) 
```

任何想法我在这里做错了什么。快速帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:15:36.053

一个 PHP 初学者经常犯的错误——在数组中多次使用一个键：

```
 'OR' => array(
        'Booking.payment_status' => 3,
        'Booking.payment_status' => 2
    ) 
```

它应该读

```
 'OR' => array(
        array('Booking.payment_status' => 3),
        array('Booking.payment_status' => 2)
    ) 
```

# android - 在同一个活动中传递字符串

> ID：15679039
> 
> 赞同：1
> 
> 时间：2013-03-28T10:10:34.487
> 
> 标签：android, string

我如何在同一活动中传递字符串？我有很多按钮，所以我在 open() 中使用了 getstring ？？？。所有在同一个活动中......在这个活动中，我已经使用来自另一个活动的意图传递字符串。

```
View view1 = findViewById(R.id.v1);
view1.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View view) {

            Bundle i = new Bundle();
            i.putString("key1", title1); // Key1
            i.putString("key2", link1); // Key2
            open();
        }
    });

View viewnowvideo= findViewById(R.id.tvnowvideo);
viewnowvideo.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View view) {
            Bundle i = new Bundle();
            i.putString("key1", title2); // Key1
            i.putString("key2", link2);  // Key2
            open();
             }
    });
}

private void open() {
Bundle i = new Bundle();
String titleok = i.getString("key1"); //// Key1

final Dialog dialog = new Dialog(this);
    dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);
    dialog.setTitle(titleok);
    dialog.setContentView(R.layout.popup);
    Button button = (Button) dialog.findViewById(R.id.open2);
    button.setOnClickListener(new OnClickListener() {
    @Override
        public void onClick(View v) {
        Bundle i = new Bundle();
        String linkok = i.getString("key2"); //// Key2
        Uri location = Uri.parse(linkok);
        Intent intent = new Intent(Intent.ACTION_VIEW, location);
        intent.setPackage("com.dfgfdg.dfgdfg");
        startActivity(intent);

        }
    });
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:11:58.740

只需`String titleok = i.getString("key1"); //// Key1`在类级别声明这一行，您就不需要在同一活动中一次又一次地传递它。

这基本上称为变量范围。如果您在类级别声明任何变量，则所有方法和内部类都可以轻松使用它。

例子，

```
public class myClass
{
    private String hello="I am available to whole class";

    private void test()
    {
         System.out.println ( hello );
    }

    private class myInnerclass
    {
         private void innnerMethod()
         {
             System.out.println ( hello );  // direct accessible from outer class
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:16:46.543

只需在`Bundle`您的方法中添加一个参数`open()`：

```
private void open(Bundle args) {
   String titleOk = args.getString("key1");
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:18:17.610

我认为在开放方法中，您可以传递捆绑包并将该捆绑包分配给您的开放方法捆绑包。希望这可以帮助您

```
 class MainActivity extends Activity{
   Bundle bundle;
   public void onCreate(Bundle savedInstanceState) {
  bundle=new Bundle();   
  View view1 = findViewById(R.id.v1);
  view1.setOnClickListener(new View.OnClickListener() {
 @Override
 public void onClick(View view) {

        bundle.putString("key1", title1); // Key1
        bundle.putString("key2", link1); // Key2
        open();
    }
   });

 View viewnowvideo= findViewById(R.id.tvnowvideo);
  viewnowvideo.setOnClickListener(new View.OnClickListener() {
   @Override
 public void onClick(View view) {

        bundle.putString("key1", title2); // Key1
        bundle.putString("key2", link2);  // Key2
        open();
         }
});
}

 private void open() {

String titleok = bundle.getString("key1"); //// Key1

final Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);
dialog.setTitle(titleok);
dialog.setContentView(R.layout.popup);
Button button = (Button) dialog.findViewById(R.id.open2);
button.setOnClickListener(new OnClickListener() {
@Override
    public void onClick(View v) {

    String linkok = bundle.getString("key2"); //// Key2
    Uri location = Uri.parse(linkok);
    Intent intent = new Intent(Intent.ACTION_VIEW, location);
    intent.setPackage("com.dfgfdg.dfgdfg");
    startActivity(intent);

    }
}); 
```

}

# c# - 在 Windows phone 8 上使用 Ajax 访问本地文件

> ID：15679045
> 
> 赞同：0
> 
> 时间：2013-03-28T10:10:52.177
> 
> 标签：c#, ajax, browser, windows-phone-8

我有一个调用 javascript 的页面 Index.html，它发出 ajax 请求以查找本地 .html 文件。该文件作为内容导入到我的 C# 项目中，并在 WP8 webbrowser 控件中触发 javascript。

问题是 ajax 函数返回拒绝访问错误。我能做些什么？

对不起我蹩脚的英语

**通过在ajax请求中添加isLocal:true解决**

```
$.ajax({
    url: "page.html",
    dataType: "html",
    async: false, // Otherwise Android 2.2 doesn't show menu
    isLocal: true, // Or Windows Phone will say "Access is denied" to ajax request
    success: function(html) {
       //success code!
    }
}); 
```

# wpf - 让网格中的一行确定网格宽度，其他行在剪辑边界之外绘制

> ID：15679046
> 
> 赞同：1
> 
> 时间：2013-03-28T10:10:53.143
> 
> 标签：wpf, xaml, grid

我有一个在画布上具有固定位置的网格。网格有一个边框，其中包含大小可能不同的图像。

现在，我在图像下方添加一个 TextBlock，其中包含长度可能不同的文本。要求是无论文本的长度如何，图标都不应在画布上移动。

```
<Canvas>
  <Grid Canvas.Left="50" Canvas.Top="100">  
     <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
     </Grid.RowDefinitions>

     <Border BorderBrush="Black" BorderThickness="1" Background="Gray" 
             Width="{Binding RelativeSource={RelativeSource Self}, Path=Height}"
             HorizontalAlignment="Center">
         <Image Source="{Binding TheIcon}" 
                Width="{Binding IconSize}" Height="{Binding IconSize}" 
                Margin="5" />
     </Border>

     <TextBlock Grid.Row="1"
                Text="A text that is wider than the icon" 
                TextAlignment="Center"/>
   </Grid>
</Canvas> 
```

问题是当文本变得比图标宽时，网格的宽度会增加，并且图标开始向右滑动。这可以通过在边框上设置 Horizo​​ntalAlignment="Left" 来解决，但是我们希望文本在图标下方居中，因为它看起来要好得多。

我已经搞砸了 ClipToBounds="False" 和不同的构建对象的方法，但我没有找到任何有效的方法。有人有一些 xaml-magic 可以分享吗？

## 澄清

![在此处输入图像描述](../Images/45a1bef9e8c270caded0aab622de89c6.png)

图例
**无文本**- 原始状态不想要的
**状态**- 这就是我在网格中添加一行时的样子。图像从指定的坐标水平移动
**所需状态**- 我想将图标保持在原位，同时将其下方的文本居中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:32:30.663

您可以使用转换器强制此行为在 TextBlock 上设置 -ve 左边距并在图像上设置左对齐。

就像是：

```
<Window.Resources>
  <local:MarginConverter x:Key="MarginConverter" />
</Window.Resources>
<Canvas>
  <Grid Canvas.Left="50"
        Canvas.Top="100">
    <Grid.RowDefinitions>
      <RowDefinition />
      <RowDefinition />
    </Grid.RowDefinitions>
    <Border x:Name="image"
            Width="{Binding RelativeSource={RelativeSource Self},
                            Path=Height}"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="Gray"
            BorderBrush="Black"
            BorderThickness="1">
      <Image Width="{Binding IconSize}"
              Height="{Binding IconSize}"
              Margin="5"
              Source="{Binding TheIcon}" />
    </Border>
    <TextBlock Grid.Row="1"
                Text="Wider than icon Text">
      <TextBlock.Margin>
        <MultiBinding Converter="{StaticResource MarginConverter}"
                      Mode="OneWay">
          <Binding Path="ActualWidth"
                    RelativeSource="{RelativeSource Self}" />
          <Binding ElementName="image"
                    Path="ActualWidth" />
        </MultiBinding>
      </TextBlock.Margin>
    </TextBlock>
  </Grid>
</Canvas> 
```

和`MarginConverter.cs`

```
public class MarginConverter : IMultiValueConverter {
  public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture) {
    double textWidth;
    Double.TryParse(values[0].ToString(), out textWidth);
    double imageWidth;
    Double.TryParse(values[1].ToString(), out imageWidth);
    if (Equals(textWidth, 0.0) || Equals(imageWidth, 0.0))
      return new Thickness();
    return new Thickness {Left = imageWidth / 2 - textWidth / 2};
  }

  public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture) {
    throw new NotImplementedException();
  }
} 
```

可以产生这个（我只是将图像元素设置为不同的大小，因为我没有任何方便的图像。图像将从 50,50 开始。用 snoop 检查）：

![大图](../Images/63f09a93b391949691d1cffc1e5cd88f.png)

和

![较小的图像](../Images/024c443802cf31ce78ead0563c186d75.png)

# java - 计算 n 个布尔值的“真”数

> ID：15679047
> 
> 赞同：8
> 
> 时间：2013-03-28T10:10:53.773
> 
> 标签：java, count, boolean

```
Boolean a, b, c, d; 
```

我想计算真实的数量，每个结果都应该有自己的关联动作。也许是这样的：

```
int result = getResult(a, b, c, d);
switch (result) {
    case 0: break;
    case 1: break;
    case 2: break;
    case 3: break;
    default: break;
} 
```

知道如何以`getResult`漂亮的方式编写方法体吗？在示例中，我*只*使用了四个，但它应该可以扩展到更多的布尔值。欢迎任何其他方式进行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T10:12:44.230

写一个可变参数方法？

```
int getResult(boolean... vars) {
    int count = 0;
    for (boolean var : vars) {
        count += (var ? 1 : 0);
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T10:30:08.013

如果您有许多布尔值，更好的解决方案可能是使用可能更有效的 BitSet。

```
BitSet bs = new BitSet();
bs.set(1);
bs.set(4);
bs.set(9);
bs.set(16);
int setCount = bs.cardinality(); // 4 
```

代替

```
boolean a, b, c, d; 
```

你有 BitSet，它可以有数百或数百万个布尔值。

```
BitSet bs = new BitSet(4);
bs.set(0); // a
bs.set(1); // b
bs.set(2); // c
bs.set(3); // d
int setCount = bs.cardinality(); // 4 
```

当你有很多布尔值时，这个解决方案可以更好地扩展。即每个布尔值使用一个位，但是每个`Boolean`都是一个引用，因此使用 32 位或多达 32 倍的内存。`cardinality()`无论您有多少位/布尔值，也为您实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T15:24:53.663

这是一个老歌......但这是另一种方式：

```
int count = Stream.of(b1, b2, b3).filter(b -> b).count(); 
```

# sql - 将 varchar 转换为 Int 时出错 - 服务器上的 Sql 与本地 PC 上的 SQL

> ID：15679049
> 
> 赞同：0
> 
> 时间：2013-03-28T10:10:57.337
> 
> 标签：sql, setting, regional

我有一个要求将 Varchar 转换为 INT 的查询。我目前没有发布查询本身，因为我认为问题不存在。

我使用来自服务器 SQL 文件的备份在我的家用 PC 上设置了查询。我在两台机器上都安装了 Server 2008 R2。

查询在我的 PC 上运行 100%，但在服务器上运行时将 varchar 转换为 INT 时出错。

我猜某处的设置不一样？我检查了区域设置，问题不存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:13:54.993

问题在于如何评估查询。您无法保证查询的哪些顺序部分将被评估，因此在一台机器上可能会在转换后发生过滤器，而在另一台机器上它可以这样做。或者可以以不同的顺序评估 WHERE 子句条件

SQL 是声明式的，而不是过程式的。使用 SQL，您可以询问您想要什么，而查询优化器会尊重它认为合适的方式。在过程语言（C#、Java 等）中，您可以控制执行顺序。

原因在此处进行了完整描述：[为什么使用 Select Top 100 Percent？](https://stackoverflow.com/questions/1622878/why-use-select-top-100-percent/1623240#1623240)

# java - jre 1.6 和 1.7 的 ServerSocket 问题，允许为同一端口创建两个套接字

> ID：15679050
> 
> 赞同：2
> 
> 时间：2013-03-28T10:11:00.597
> 
> 标签：java, sockets, network-programming, serversocket

我能够创建两个具有相同端口号的 ServerSocket。

在 jre 1.6 & 1.7 中运行两个 ServerSocket 程序。

有人遇到同样的问题吗？

# asp.net-mvc - ASP.NET MVC4 - 单击按钮后如何保存下拉项

> ID：15679057
> 
> 赞同：0
> 
> 时间：2013-03-28T10:11:23.190
> 
> 标签：asp.net-mvc, forms, asp.net-mvc-4, drop-down-menu

我有一些初始表格，用户可以在其中输入一些基本数据，如下所示：

```
<fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
        </li>
        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.ConfirmPassword)
            @Html.PasswordFor(m => m.ConfirmPassword)
        </li>
    </ol>
    <input type="submit" value="Register" />
</fieldset> 
```

现在我想在这个表单中添加一个额外的字段，用户可以在其中选择他知道的语言。它需要是一个下拉列表，右侧有按钮。当用户从下拉列表中选择一种语言并单击右侧的添加按钮时，该语言的名称应显示在下方。我不知道如何处理这个。我刚刚开始学习，所以对我来说还是有点困惑。

```
<li>
@Html.DropDownListFor(model => model.Language,
    new SelectList(Enum.GetValues(typeof(Pro.Web.Models.Data.Languages))))
</li> 
```

我已经阅读了几个教程，但没有找到类似的东西。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:17:20.960

您可以使用多选列表，允许用户选择他知道的一种或多种语言：

```
<li>
    @Html.ListBoxFor(
        model => model.Language,
        Enum
           .GetValues(typeof(Pro.Web.Models.Data.Languages))
           .Cast<Pro.Web.Models.Data.Languages>()
           .Select(x => new SelectListItem 
           { 
               Value = x.ToString(), 
               Text = x.ToString() 
           })
    )
</li> 
```

# perl - Perl：如何将 WMIC 输出捕获到变量中

> ID：15679058
> 
> 赞同：0
> 
> 时间：2013-03-28T10:11:24.700
> 
> 标签：perl, wmic

我正在使用下面的代码来获取驱动器名称、可用空间和驱动器总空间。

```
my @pnames = `wmic /node:"IP" /user:"UserName" /password:"password" LogicalDisk Where "DeviceID='H:'" Get DeviceID,FreeSpace,Size`;

print "@pnames"; 
```

上面的命令显示输出如下：

```
DeviceID FreeSpace    Size

H:        51664236544  214753832960 
```

我怎样才能读`DeviceID`入`$DriveName`变量，`FreeSpace`变量`$FreeSpaceOnDrive`和`Size`变量`$TotalSpace`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:22:45.517

最好用它`split`来获取这些值。

我不清楚你的输出中的标题后面是否真的有一个空行，但如果是这样，那么你需要

```
my ($dev_id, $free_space, $size) = split ' ', $pnames[2]; 
```

如果没有空行，则只需将其更改`split`为工作即可`$pnames[1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:24:02.510

在标量变量中捕获输出并使用正则表达式对其进行检查，如下所示：

```
my ($DriveName, $FreeSpaceOnDrive, $TotalSpace);
my $pnames = `wmic /node:"IP" /user:"UserName" /password:"password" LogicalDisk Where "DeviceID='H:'" Get DeviceID,FreeSpace,Size`;

if( $pnames =~ m!\s+([\w:]+)\s+(\d+)\s+(\d+)! ) {
   ($DriveName, $FreeSpaceOnDrive, $TotalSpace) = ($1, $2, $3);
} 
```

# java - 获取 JSON 值以形成对象

> ID：15679063
> 
> 赞同：0
> 
> 时间：2013-03-28T10:11:37.020
> 
> 标签：java, json, types, gson

使用**GSON**：

```
Gson gson = new Gson();
String json = gson.toJson(response);
System.out.println(json); 
```

我收到以下**JSON**表示的**User**：

```
"{\"userID\":\"user2\",\"firstName\":\"Maria\",\"lastName\":\"Silva\",\"birthDate\":\"Ago 1, 2012\",\"gender\":\"Female\"}" 
```

现在，我想获取这些值来构造一个**User 对象**（执行 User.setuserID, userObj.setFirstName, ...）

如何获取相应的值来设置用户值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:14:28.507

`Gson`会为你做的。你不必担心它。这就是 的力量`Gson`。

```
User object = gson.fromJson(jsonString, User.class); // Fully populated User object. 
```

# javascript - Emberjs 与 konacha 的集成测试

> ID：15679065
> 
> 赞同：1
> 
> 时间：2013-03-28T10:11:39.923
> 
> 标签：javascript, ember.js, coffeescript, mocha.js, konacha

在 Ember.js 1.0.rc1 上使用 Konacha 进行集成测试时遇到问题。我的问题是所有测试都在呈现任何视图之前运行。有没有办法知道什么时候所有的东西都已经渲染了，而不需要手动超时？

规范助手：

```
//=require sinon
//=require jquery
//=require jquery_ujs
//=require twitter/bootstrap
//=require handlebars
//=require ember
//=require ember-data
//=require_self
//=require icarium

window.lookupController = (name) ->
  Icarium.__container__.lookup('controller:' + name)

window.currentPath = ->
  lookupController('application').get('currentPath')

Ember.testing = true

Ember.run ->
  window.Icarium = Ember.Application.create() 
```

考试：

```
//=require spec_helper

describe "user login", ->
  before (done) ->
    Ember.run ->
      Icarium.set 'ready', ->
        done()
      Icarium.initialize()

  afterEach ->
    Ember.run ->
      Icarium.reset()

  it "routes to login", ->
    Ember.run ->
      currentPath().should.eq "login"

  it "renders the login form", ->
    $('input[type=password]').should.exist 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:07:27.307

也许将 Konacha 的重置功能设置为 noop 可以解决问题：

```
Konacha.reset = -> 
```

默认情况下，它会在每次测试之前清除 body elmenet。您可以在 Jo Liss 的幻灯片中找到这个和其他有用的提示：[http ://www.slideshare.net/jo_liss/testing-ember-apps](http://www.slideshare.net/jo_liss/testing-ember-apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:23:37.700

我有一个使用 Konacha 和最近构建的 Ember的[示例应用程序。](https://github.com/dgeb/ember_data_example)我发现将应用程序的就绪状态推迟到运行每个测试之后，然后提前就绪并等待新的应用程序就绪承诺得到解决，这很有帮助。这是来自[test_helper.js](https://github.com/dgeb/ember_data_example/blob/master/test/javascripts/test_helper.js)的代码：

```
//= require konacha_config
//= require sinon
//= require application

// Prevent the router from manipulating the browser's URL.
App.Router.reopen({location: 'none'});

//**** Global before / after ***

// Sinon fake server
var server;

// Stub out Konacha.reset()
Konacha.reset = Ember.K;

beforeEach(function(done) {
  // Fake XHR
  server = sinon.fakeServer.create();

  // Prevent automatic scheduling of runloops. For tests, we
  // want to have complete control of runloops.
  Ember.testing = true;

  Ember.run(function() {
    // Advance App readiness, which was deferred when the app
    // was created.
    //
    // This needs to be done here, after each iframe has been setup,
    // instead of in a global `before`.
    App.advanceReadiness();

    // When App readiness promise resolves, setup is complete
    App.then(function() {
      done();
    });
  });
});

afterEach(function() {
  // Reset App
  Ember.run(function() {
    App.reset();
  });

  // Restore XHR
  server.restore();
}); 
```

# python - 如何使 PyDev 自动格式化每行的最大字符数？

> ID：15679067
> 
> 赞同：5
> 
> 时间：2013-03-28T10:11:45.457
> 
> 标签：python, eclipse, formatting, pydev

我在 Eclipse 中使用 PyDev 进行 Python 编程。

是否可以让 PyDev 自动格式化我的代码以限制单行的最大字符数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T10:49:32.833

## 使用标准 PyDev

似乎该选项仅在 Eclipse 的 Java 编辑器中可用。

Java 编辑器允许您为代码格式化程序创建“配置文件”，而 PyDev 的代码格式化程序选项非常有限。

## 然而，

你可以破解这个。`PythonTidy.py`是一个很棒的脚本，可以清理 Python 代码以使其遵循 PEP8 约定，并且可以使用您自己的设置进行调整。

## PythonTidy（代码清理和格式化）

[在此处](http://lacusveris.com/PythonTidy/PythonTidy-1.22.python)（[主页](https://pypi.python.org/pypi/PythonTidy/)）获取 PythonTidy 的源**代码**。

您将在文件内部、代码开头和注释之后看到定义了许多设置。

其中第一个是`COL_LIMIT`其默认值设置为`72`. 现在您可以使用**PythonTidy**以您想要的方式格式化您的代码。

## 与 PyDev 集成

现在您必须使用 PyDev 的格式来完成这项工作。这篇[博](http://bear330.wordpress.com/2007/10/30/using-pythontidy-in-pydev-as-code-formatter/)文会比我更好地解释它，但我还是会总结一下步骤：

*   **在 PyDev 的编辑器 ( PyEdit** ) 和**PythonTidy 之间**编写一个 Jython 接口。该博客的作者已经在上述链接或[此处](http://pastebin.com/sXDkNT84)的公共域中编写了一个包装脚本，以防链接变为 404。
*   将此文件保存在您想要的任何位置，名称为`pyedit_pythontidy.py`，与`PythonTidy.py`文件一起保存。
*   配置 PyDev 以将此脚本用作其*Code Formatter*。您可以在**Preferences > PyDev > Scripting PyDev中执行此操作**

    *   *注意#1：我真的建议阅读原始[博客文章](http://bear330.wordpress.com/2007/10/30/using-pythontidy-in-pydev-as-code-formatter/)以更好地理解*

    *   *注意#2：包装脚本作者没有实现**代码块格式化**，所以这意味着你只能格式化一个完整的文件。这应该不难实现，取决于您。*

    *   ***注意#3： PyDev 集成**部分的所有学分都[归于 Bear330 。](http://bear330.wordpress.com)*

# arrays - 在 Matlab 中迭代结构数组，错误：“引用不存在的字段 'namefield'”

> ID：15679068
> 
> 赞同：0
> 
> 时间：2013-03-28T10:11:46.477
> 
> 标签：arrays, matlab, struct

我通过以下方式生成结构“str”的数组“AoS”：

```
for i = 1:iMax
    for j = 1:jMax
        str = calculatestructure();
        AoS(i,j) = str;
    end
end 
```

现在，假设该结构有两个字段：str.field1、str.field2。我想获取AoS的Ith和Jth元素的str.field1的值，根据使用的方法报错如下。如果我使用这两种方法中的任何一种，我会收到**错误消息：“引用不存在的字段 'field1'”**

```
value = AoS(I,J).field1; % method 1
value = AoS.field1(I,J); % method 2 
```

任何想法？是否有空间命令来访问结构数组？[此处](http://blogs.mathworks.com/loren/2006/11/24/working-with-arrays-of-structures/)、[此处](http://blogs.mathworks.com/pick/2008/04/22/matlab-basics-array-of-structures-vs-structures-of-arrays/)和[此处](https://stackoverflow.com/questions/11234859/array-of-structures-doing-operation-on-matrix-within-field-without-loop)显示的帮助实际上对这个问题没有用处。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:18:31.220

您确定 calculatestructure() 的输出吗？我测试过：

```
for i = 1:10
    for j = 1:10
        str = struct();
        str.field1=1;
        str.field2=2;
        AoS(i,j) = str;
    end
end
AoS(1,1).field1 
```

我确实在结构 AoS 的数组中的 1,1 位置获得了结构的字段 field1。也许 calculatestructure() 不会输出包含您认为的字段的结构。AoS 真的是 iMax x jMax 结构数组吗？每个元素都有 field1 字段吗？

# java - 大小为 1 的信号量是最佳选择？

> ID：15679074
> 
> 赞同：5
> 
> 时间：2013-03-28T10:11:58.557
> 
> 标签：java, multithreading, locking, semaphore, java.util.concurrent

如果您有一个资源，一次只能访问一次，您可以使用大小为 1 的信号量，或者您可以只使用单个 ReentrantLock 实例？

使一个或另一个更好的决定的细微差别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T10:28:04.063

有以下区别：

1.  信号量可以由一个线程获取并由另一个线程释放。这样，一个线程可以向另一个线程发出信号。计数为 1 的信号量也可用于互斥。另一方面，锁仅用于互斥。
2.  信号量是不可重入的。这意味着当许可用尽时，即使它已被同一线程获取，线程也无法获取信号量。锁可以是可重入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:16:57.747

`Semaphore`s 有利于计算许可/释放，所以如果你有不止一种资源，`Lock`etal. 对你帮助不大。但是，如果您只有一种资源需要保护，它们就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:22:16.970

计数信号量示例：您有一个受保护的对象，限制为最多允许五个线程同时访问它。在这种情况下，初始值为 5 的计数信号量是数学拟合。[唐尼的信号量小书](http://www.greenteapress.com/semaphores/)是理解这些结构的最佳读物之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:30:59.847

虽然这两者都可以做到，但`synchronized`您`Semaphore`首先必须弄清楚您将如何使用此资源。如果你使用`synchronized`这意味着你将不得不观察线程中的同步：

```
public void run() {
  // some code
  synchronized (resource) {
    // use resource
  }
} 
```

如果您不想让线程对此进行监视（我认为这更好），请`Semaphore`在资源的 getter 方法中使用：

```
public Resource acquireResource() {
  // acquire semaphore
  return resource;
}

public void releaseResource() {
  // release semaphore
} 
```

并在线程中执行：

```
public void run() {
  // some code
  Resource resource = ResourceContainer.getResource();
  // do something with resource
  releaseResource();
} 
```

您可以向这些方法添加`Object`参数，只是为了比较同一个对象是否释放了信号量。

# java - 在 Java 中，用不同类型的变量命名一种类型的对象到底是做什么的？

> ID：15679077
> 
> 赞同：-5
> 
> 时间：2013-03-28T10:11:59.740
> 
> 标签：java

例如，假设发生这种情况：

```
DiscountSale discount = new DiscountSale(); 
```

然后我这样做：

```
Sale discount2 = discount; 
```

`Sale`是超类，`DiscountSale`也是子类。

就从 Sale 或 DiscountSale 类访问哪些方法定义而言，这究竟做了什么？

我知道它引用了内存中的同一个对象，但还有什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T10:15:05.573

您现在有 2 个相同对象的引用。使任一引用为空都不会允许 gc 仍从堆中清除对象。您需要使两个（一般来说，全部）引用都为空。

# coffeescript - 错误中的咖啡脚本？

> ID：15679080
> 
> 赞同：0
> 
> 时间：2013-03-28T10:12:02.500
> 
> 标签：coffeescript

在咖啡脚本循环'for'

例如。
如果 1 < x，代码如下：

```
console.debug i for i in [1..0] 
```

生成的代码是：

```
var i;
for (i = 1; i >= 0; i--) {
  console.debug(i);
} 
```

如果 1 > x，代码如下：

```
console.debug i for i in [1..2] 
```

生成的代码是：

```
var i;
for (i = 1; i <= 2; i++) {
  console.debug(i);
} 
```

如果我想写那个 javascript.How to ？

```
for(var i=1;i<=0;i++){
  console.debug(i);
} 
```

因为我不知道条件是大于左侧还是小于左侧。但我只想要它 i++

我怎么了？编辑如下：对于咖啡脚本的功能，我在循环之前添加条件或在 for 循环中添加条件。例如：

```
if x - y >=1
  console.debug i for i in [1..x-y] 
```

或者

```
console.debug i for i in [1..x-y] and x-y >=1 
```

这就是我的方式。有人有好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:01:02.230

```
for(var i=1;i<=0;i++){
    console.debug(i);
} 
```

相当于

```
var i = 1;
while(true) {
    console.debug(i);
    i++;
} 
```

在coffeescript中写成

```
i = 1
while true
  console.debug(i);
  i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:10:51.233

看起来你想这样做：

```
console.debug i for i in [1..x-y] by 1 
```

编译为：

```
var i, _i, _ref;

for (i = _i = 1, _ref = x - y; _i <= _ref; i = _i += 1) {
  console.debug(i);
} 
```

# jenkins - 参数化构建 Jenkins

> ID：15679088
> 
> 赞同：0
> 
> 时间：2013-03-28T10:12:29.603
> 
> 标签：jenkins, continuous-integration

我在 Jenkins 中配置了一个作业并选中了“此构建已参数化”选项。我给出的参数名称是“My_Param”。Jenkins 安装在服务器机器中。所以我通过`http://<servername>:8080/`在 Build 部分访问 Jenkins 仪表板，我必须通过打开 cygwin 来调用脚本。所以我写

```
#!C:\cygwin\bin\bash --login -i
./build/myscript.sh -full 
```

构建完成后，我想将文件移动到另一个带有Output前缀的新目录，这个目录名是我打算传递的参数。所以我写

```
mkdir /cygdrive/c/users/admin/Ouput$My_Param 
```

我运行构建并将参数作为**第一个**传递 但是，该目录在服务器计算机中创建为**输出而不是作为输出****优先**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:30:33.143

既然你注意到你使用 cygwin，我知道服务器在 Windows 上。

尝试参数 windows 风格的环境变量：**%My_Param%**或 linux：**${My_Param}**

我希望这有帮助。

# php - 使用 CURL 向 Web 服务器发送 XML 发布请求

> ID：15679090
> 
> 赞同：17
> 
> 时间：2013-03-28T10:12:32.950
> 
> 标签：php, curl, wms

我正在尝试使用 php 和 curl 向 Web 服务器发送请求。我以前没有做过这样的事情，虽然网上有很多很好的例子，但我在理解一些 curl 命令时遇到了一些困难。

这就是我想要做的：有一个已建立的 Web 服务（例如：Web 地图服务），我希望我的 php 代码向该服务发送一个 post XML 请求。作为回应，我想获得一个 XML 文件。

这是我到目前为止所拥有的：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, ''); 
    /*curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));*/
    /* curl_setopt($ch, CURLOPT_HEADER, 0);*/
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
    /*curl_setopt($ch, CURLOPT_REFERER, '');*/
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $ch_result = curl_exec($ch);
    curl_close($ch);
    echo $ch_result; 
```

正如我所说，我在 php 和使用 curl 方面都很新，我认为我缺少一些概念。我的问题是：1）我必须放入的字符串（链接）是什么：

```
 curl_setopt($ch, CURLOPT_URL, ''); 
```

是我要发送请求的服务的主机名吗？

2) 在第 6 行中，变量 $xml 包含我要作为请求发送的 xml 文件。它是正确的还是这个变量应该包含其他东西？

3）在哪些情况下我需要使用httpheader或header（row3和row4）；

谢谢您的帮助。迪米特里斯

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-28T10:25:40.130

试试这种方式：

```
 $url = 'https://android.googleapis.com/gcm/send';
  $ch = curl_init();
  curl_setopt( $ch, CURLOPT_URL, $url );
  curl_setopt( $ch, CURLOPT_POST, true );
  curl_setopt( $ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
  curl_setopt( $ch, CURLOPT_POSTFIELDS, "<xml>here</xml>" );
  $result = curl_exec($ch);
  curl_close($ch); 
```

欲了解更多详情，请访问： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T10:18:14.570

我认为使用 HTTP 类可能更适合发出 HTTP 请求。

请参阅[http://www.php.net/manual/intro.http.php](http://www.php.net/manual/intro.http.php)。

此外，还有特定的 PHP WMS 库，例如[http://docs.huihoo.com/geoserver/1.6.0/Parsing%20and%20using%20WMS%20capabilities%20with%20PHP.html](http://docs.huihoo.com/geoserver/1.6.0/Parsing%20and%20using%20WMS%20capabilities%20with%20PHP.html)。

# autohotkey - AutoHotKey 脚本停止工作

> ID：15679092
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:12:34.913
> 
> 标签：autohotkey

我一直在使用以下脚本，以便我可以用葡萄牙语写作。

例如：

*   **Ctrl+Shift+~ 后跟 e**应该输出 '€'
*   **Ctrl+Alt+a**应该输出 'á'

该脚本在我的 PC 上运行了很长时间。它在我的笔记本电脑上运行良好。两者都运行相同版本的 AHK (1.1.09.04)，都是以 32 位模式运行 AHK 的 64 位机器。

但突然它停止在我的电脑上工作。

*   **Ctrl+Shift+~ 后跟 e**给我 '4'
*   **Ctrl+Alt+a**仅输出 'a'

这是我一直在使用的脚本。什么会导致它停止在我的电脑上工作？我试过卸载并重新安装无济于事。

```
^~::
  Input Combo, L1
  If Combo=a
    Send ã
  If Combo=o
    Send õ
  If Combo=e
    Send €
  If Combo=0
    Send °
  Return

^+6::
  Input Combo, L1
  If Combo=a
    Send â
  If Combo=e
    Send ê
  If Combo=o
    Send ô
  Return

^!a::á
^!e::é
^!i::í
^!o::ó
^!u::ú
^!c::ç

^!+a::Á
^!+e::É
^!+i::Í
^!+o::Ó
^!+u::Ú
^!+c::Ç

^`::
  Input Combo, L1
  If Combo=a
    Send à
  Return

^+`::
  Input Combo, L1
  If Combo=a
    Send À
  Return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:04:08.443

@Hainesy，您最近是否将键盘设置从 eg 更改`US`为`US International`？

美国键盘的行为非常直接，而美国国际键盘设置将“保留”特殊字符，如,`^`和键上的转义字符并等待下一个字符。如果下一个字符是, , , ,或, 它将两个单个字符组合成字母. `'``"``~``a``e``o``u``i``c``è``á``ü``î``ç`

你的脚本可能会被搞砸，因为起始字符`^`,`'`和`"`下面的转义`~`不再是直接的行为。

# java - httpTransport.call(SOAP_ACTION, 信封); 抛出空异常Android

> ID：15679095
> 
> 赞同：0
> 
> 时间：2013-03-28T10:12:43.937
> 
> 标签：java, android, web-services, error-handling

使用断点时出现此错误并进入捕获异常。

`httpTransport.call(SOAP_ACTION, envelope);`

是不是这种`httpTransport`联系不应该`null`？

```
 public class MainActivity extends Activity {

TextView tv;

SoapObject request;

SoapSerializationEnvelope envelope;

HttpTransportSE androidHttpTransport;

Object result;

public String METHOD_NAME = "sum";

public String NAMESPACE = "http://ws.calculatorJava.org";

// private String SOAP_ACTION = NAMESPACE + METHOD_NAME;

public String SOAP_ACTION = "http://ws.calculatorJava.org/sum";

public static final String URL = "http://172.168.1.2:8888/CalculatotJava/services

    /Calculate.wsdl";

/** Called when the activity is first created. */

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    tv = (TextView) findViewById(R.id.textView1);

    try {

        request = new SoapObject(NAMESPACE, METHOD_NAME);

        request.addProperty("i", 5);

        request.addProperty("j", 15);

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        androidHttpTransport = new HttpTransportSE(URL);

        Toast.makeText(getBaseContext(), "GET", Toast.LENGTH_LONG).show();

        androidHttpTransport.call(SOAP_ACTION, envelope);

        result = envelope.getResponse();

        Toast.makeText(getBaseContext(),

                "  Result " + "\n" + result.toString(), 

                        Toast.LENGTH_SHORT)

                .show();

        // System.out.println("Result : " + result.toString());

        tv.setText("Addition : " + result.toString());

    } catch (Exception E) {

        E.printStackTrace();

        tv.setText("ERROR  " + "\n" + E.getClass().getName() + ":"

                + E.getMessage());

    }

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:47:51.810

如果您遇到网络主异常，请记住始终在 Android Async Task 中执行与网络相关的任务，然后在主线程中调用 Async Task

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:20:02.663

您`androidHttpTransport.call(SOAP_ACTION, envelope);`可能失败了，因为您在主 UI 线程上调用它。尝试将清单中的 SDK 版本降低到 8/9，或者将整个 soap 请求代码放在 AsyncTask 或不同的线程中。

# javascript - AmCharts 股票图表

> ID：15679099
> 
> 赞同：1
> 
> 时间：2013-03-28T10:12:56.840
> 
> 标签：javascript, amcharts

我想知道 AmCharts 股票图表的“红色”气球和线条的颜色设置在哪个对象下。见下图

![在此处输入图像描述](../Images/72abfc57e8617283fe2d40d7d1cfc57c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:29:24.423

它是 ChartCursorSettings.cursorColor 和 ChartCursorSettings.categoryBalloonColor

# websocket - HTTP 网络套接字与 ActiveMQ 网络套接字

> ID：15679101
> 
> 赞同：3
> 
> 时间：2013-03-28T10:13:02.730
> 
> 标签：websocket, activemq

[http://activemq.apache.org/websockets.html](http://activemq.apache.org/websockets.html)说这些人已经实现了 stomp over web sockets 功能。Dojo 的 cometd 提供的普通 web sockets 解决方案有什么不同？我认为网络套接字规范定义了自己的消息结构和所有？HTTP 升级后的 Web 套接字与这种基于 Web 套接字的 stomp 有何不同？真的很感谢一些专家意见的家伙。

谢谢， 巴努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:42:39.070

cometd 实现使用 Bayeux 协议，而 Apache 实现使用 WebSockets。

# php - PHP - 读取和修复大的无效 XML 文件

> ID：15679103
> 
> 赞同：6
> 
> 时间：2013-03-28T10:13:06.497
> 
> 标签：php, xml, sax

我必须阅读一些非常重的 XML 文件（在 200 MB 和 1 GB 之间），其中一些文件是无效的。让我给你一个小例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:g="http://base.google.com/ns/1.0" version="2.0">
  <item>
    <title>Some article</title>
    <g:material><ul><li>50 % Coton</li><li>50% Lyocell</li></g:material>
  </item>
</rss> 
```

显然，标签中缺少一个`</ul>`结束`g:material`标签。此外，开发此提要的人应该将`g:material`内容包含在`CDATA`中，但他们没有...基本上，这就是我想要做的：添加这个缺失的`CDATA`部分。

我尝试使用 SAX 解析器来读取这个文件，但是在读取`</g:material>`标签时它失败了，因为`</ul>`标签丢失了。我尝试过使用 XMLReader，但遇到了基本相同的问题。我可能可以用 DomDocument::loadHtml 做一些事情，但是这个文件的大小与 DOM 方法并不真正兼容。您知道我如何可以简单地修复此提要，而无需购买大量 RAM 以供 DomDocument 工作吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:47:10.453

如果文件太大而无法使用[Tidy](http://www.php.net/manual/en/book.tidy.php)扩展，您可以使用[tidy CLI 工具](http://linux.die.net/man/1/tidy)使文件可解析。

```
$ tidy -output my.clean.xml my.xml 
```

之后，XML 文件格式正确，因此您可以使用 XMLReader 解析它们。由于 tidy 添加了“缺少的”(X)HTML 部分，因此您的原始文档的代码位于元素内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T22:36:04.823

[（从https://stackoverflow.com/a/17903058/287948](https://stackoverflow.com/a/17903058/287948)复制）

总结为两步：

1.  使用*Tidy*将“免费的 HTML”转换为“好的 XHTML”。
2.  使用*XML Parser*通过*SAX API*将 XHTML 解析为 XML 。

* * *

使用第一个[Tidy](http://www.php.net/manual/en/class.tidy.php) (!)，将“免费 HTML”转换为 XHTML（或者当您无法信任“假定的 XHTML”时）。请参阅[cleanRepair](http://www.php.net/manual/en/tidy.cleanrepair.php)方法。它需要更多时间，但运行大文件（！）...如果太大 ，请将[几分钟设置为最大执行时间。](http://php.net/manual/en/function.set-time-limit.php)

另一种选择（用于处理大文件）是在检查或转换为 XHTML 后缓存您的 XHTML 文件。请参阅 Tidy 的[修复文件](http://www.php.net/manual/en/tidy.repairfile.php)方法。

使用“受信任的 XHTML”，*使用 SAX* ... 如何将 SAX 与 PHP 一起使用？

[使用SAX 标准 API](http://www.saxproject.org)解析 XML ，在 PHP 中由[LibXML](http://www.php.net/manual/en/intro.libxml.php)实现（参见*xmlsoft.org*上的[LibXML2](http://www.xmlsoft.org/)），其接口是[PHP 的 XML Parser](http://www.php.net/manual/en/book.xml.php)，它接近*SAX 标准 API*。

另一种使用“SAX of *LibXML2* ”和另一个接口（一个[PHP 迭代器](http://php.net/manual/en/class.iterator.php)而不是传统的 SAX 接口）的方法是使用[XMLReader](http://www.php.net/manual/en/class.xmlreader.php)。请参阅[有关“XMLReader 使用 SAX”的说明](https://stackoverflow.com/a/3048490/287948)。

* * *

是的，PHP 手册 (!) 中没有表达术语“SAX”或“SAX API”。看到 [这个古老但很好的介绍](http://docstore.mik.ua/orelly/webprog/pcook/ch12_05.htm)。

# css - css @font face 在 Chrome 中不起作用

> ID：15679113
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:13:35.373
> 
> 标签：css, google-chrome, font-face

```
@font-face {
    font-family: 'advertisingmediumregular';
    src: url('fonts/advertisingmedium-webfont.eot');
    src: url('fonts/advertisingmedium-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/advertisingmedium-webfont.woff') format('woff'),
         url('fonts/advertisingmedium-webfont.ttf') format('truetype'),
         url('fonts/advertisingmedium-webfont.svg#advertisingmediumregular') format('svg');
    font-weight: bold;
    font-style: normal;

} 
```

当我写这段代码时，谷歌浏览器中的文字消失了，谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:31:44.013

我已经遇到了同样的问题。[有人建议我使用FontSquirrel](http://www.fontsquirrel.com/tools/webfont-generator) webkit 字体生成器之类的工具生成我的网络字体。上传你的字体文件并下载一个所有浏览器兼容的包。除了您的之外，还包括在您的 HTML 页面中的 css。它似乎有效，因为我确实喜欢这样。我希望你也一样。

# sql - 表格格式的数据透视表数据，第一列应该是列名，其余应该是值

> ID：15679117
> 
> 赞同：0
> 
> 时间：2013-03-28T10:13:51.610
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot, unpivot

我只是想比较产品，这就是为什么我需要以列格式显示具有属性的产品。第一列将显示属性，其余列显示每列的属性值。

简单的select语句如下

```
SELECT  product_Id,product_Name,product_Price ,product_Description,product_weight  
from tblProduct
WHERE  product_Id in (1139,1140,1144) 
```

现在我想以下列方式显示我的输出

![在此处输入图像描述](../Images/c3a2783cf1ddf78c624b12c3fc6c813d.png)

我知道我需要使用 pivot 来获得所需的输出。我已经尝试过以下方式

```
SELECT MAX(ISNULL([1139],'')),MAX(ISNULL([1140],'')),MAX(ISNULL([1144],'')) 
FROM
(
  SELECT product_Id,product_Name,product_Price,product_Description,product_weight 
  FROM tblProduct where product_Id in (1139,1140,1144)
)s 
PIVOT
(
  MAX(product_Name)
  FOR product_Id in ([1139],[1140],[1144])
) AS PVT 
```

但这仅适用于单个列，但我需要所有属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:29:33.543

由于您正在尝试聚合存在于多个列中的属性，这表明您需要同时应用[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)和[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。

UNPIVOT 将获取您的列值并将它们转换为行。unpivot 的代码将与此类似：

```
select product_id, header, value
from
(
  select product_id, 
    product_name, 
    cast(product_price as varchar(10)) product_price, 
    product_weight
  from tblProduct
) p
unpivot
(
  value
  for header in (product_name, product_price, product_weight)
) unp 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/defb7/1)。您会注意到其中有一个将`product_price`列转换为 varchar 的子查询。这是因为行中所需列的数据类型必须相同。因此，您可能必须执行数据转换才能使其正常工作。

unpivot 生成的结果如下所示：

```
| PRODUCT_ID |         HEADER | VALUE |
---------------------------------------
|        141 |   product_name |  A141 |
|        141 |  product_price |   200 |
|        141 | product_weight | 200gm | 
```

一旦数据在行中，您可以将 PIVOT 函数应用于`product_id`列值。

```
select header, [141], [142], [143], [144]
from
(
  select product_id, header, value
  from
  (
    select product_id, 
      product_name, 
      cast(product_price as varchar(10)) product_price, 
      product_weight
    from tblProduct
  ) p
  unpivot
  (
    value
    for header in (product_name, product_price, product_weight)
  ) unp
) d
pivot
(
  max(value)
  for product_id in ([141], [142], [143], [144])
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/dfb6f/3)。这给出了一个结果：

```
|         HEADER |   141 |   142 |   143 |   144 |
--------------------------------------------------
|   product_name |  A141 |  A142 |  A143 |  A144 |
|  product_price |   200 |   300 |  4000 |  5000 |
| product_weight | 200gm | 300gm | 400gm | 100gm | 
```

如果您有已知数量的`product_id`想要作为列的值，则上述版本将非常有用。但是如果你有一个未知的数字，那么你会想要实现动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(product_id) 
                    from tblProduct
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT header, ' + @cols + ' 
              from 
             (
                select product_id, header, value
                from
                (
                  select product_id, 
                    product_name, 
                    cast(product_price as varchar(10)) product_price, 
                    product_weight
                  from tblProduct
                ) p
                unpivot
                (
                  value
                  for header in (product_name, product_price, product_weight)
                ) unp
            ) x
            pivot 
            (
                max(value)
                for product_id in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/defb7/2)。这将生成与查询的静态/硬编码版本相同的结果。

# java - 动态选择选项并保存在 xml 文件中

> ID：15679120
> 
> 赞同：0
> 
> 时间：2013-03-28T10:13:59.063
> 
> 标签：java, xml, dom, xml-parsing, sax

我有一个应用程序，其中有一些复选框、组合框等。我需要将用户选择的数据以 XML 文件的形式保存在系统中的指定位置

我需要使用 Java 执行此操作。我对 java 中的 XML 处理比较陌生 任何代码片段和链接都会有所帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:15:29.083

为什么不使用[Preferences API](http://docs.oracle.com/javase/6/docs/technotes/guides/preferences/)？这将需要付出很多努力，尽管你也会失去一些控制权。请注意，[Preferences](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)类允许导入/导出 XML

> 此类包含一个导出/导入工具，允许将首选项“导出”到 XML 文档，并将表示首选项的 XML 文档“导入”回系统。此工具可用于备份全部或部分首选项树，并随后从备份中恢复。

[Apache Commons Config](http://commons.apache.org/proper/commons-configuration/)是另一种选择，因为您可以*显式*选择 XML 后备存储。

# java - org.json.JSONException：在字符 103 处未终止的对象

> ID：15679123
> 
> 赞同：5
> 
> 时间：2013-03-28T10:14:04.857
> 
> 标签：java, android, json

我不知道为什么这个字符串与 Json 有错误。

```
{
  softName: lovePlay,
  packageName: com.feng.play,
  softId:13232,
  downUrl: http.//mumayi.pay.love/down?id=13211
} 
```

有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:17:12.543

字符串应该在双引号下。像这样的东西：

```
{
   "softName":"lovePlay",
   "packageName":"com.feng.play",
   "softId":13232,
   "downUrl":"http.//mumayi.pay.love/down?id=13211"
} 
```

互联网上有许多服务可以验证您的 json 数据。点击[这里](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:17:07.590

您的`JSON`字符串不正确，您缺少引号 ( `"`)。

尝试这个：

```
{
    "softName": "lovePlay",
    "packageName": "com.feng.play",
    "softId": "13232",
    "downUrl": "http.//mumayi.pay.love/down?id=13211"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T01:59:53.287

谢谢大家。我已经解决了这个问题。当我使用这个时：

```
<!-- white space added for readability -->
<input type="button" onclick="getp1('{softName:lovePlay
             ,packageName:com.feng.play
             ,softId:13232
             ,downUrl:\'http\:\/\/mumayi.pay.love\/down\?id=13211\'}')" 
            value="获取"/> 
```

我可以将字符串转换为 json。我通过 webview 使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-12T10:25:31.460

这是我目前使用的方法

```
public String convertStandardJSONString(String data_json){
    data_json = data_json.replace("\\", "");
    data_json = data_json.replace("\"{", "{");
    data_json = data_json.replace("}\",", "},");
    data_json = data_json.replace("}\"", "}");
    return data_json;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T12:28:25.770

您的 JSON 字符串中有语法错误。您需要按如下方式进行更改。

```
{
    "softName": "lovePlay",
    "packageName": "com.feng.play",
    "softId": "13232",
    "downUrl": "http.//mumayi.pay.love/down?id=13211"
} 
```

如果您在 web 开发环境中，您可以使用 stringify 命令。查看有关[JSON 和 Java的本教程](http://xstream.codehaus.org/json-tutorial.html)

作为一种好的做法，请检查您的 JSON 是否有效。有很多可用的工具，但[JSONlint](http://jsonlint.com/)是我最喜欢的。

# javascript - jQuery .click() .show() 函数问题

> ID：15679124
> 
> 赞同：0
> 
> 时间：2013-03-28T10:14:05.410
> 
> 标签：javascript, jquery, html, css

谁能让我知道我做错了什么。我有：

```
//My HTML
    <div>
      <ul>
         <li id="test"><a href="#">Main Item 1</a></li>
            <ul class="list-in-list">
               <li><a href="#">Item 1</a></li>
               <li><a href="#">Item 2</a></li>
               <li><a href="#">Item 3</a></li>
            </ul>
         <li><a href="#">Main Item 2</a></li>
         <li><a href="#">Main Item 3</a></li>
      </ul>
    </div>

//My CSS
    .list-in-list {
    display:none;
    }

//My jQuery

   $(document).ready(function() {

         $('#test').click(function() {
           alert("hello");
           });
    }); 
```

我的最终目标是在您按下列表项时显示没有显示的内容，以便它整齐地展开。但是，我似乎无法让 alert() 以任何方式出现。我应该为主列表中的所有列表项使用一个 id，还是一个类就足够了？

/W

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:23:33.867

您可以添加 .next 函数以显示用户点击任何 li curreny 的下一个 ul。您必须将 id test 更改为一个类名才能在 main li 的所有单击中生效

HTML就像

```
 <div>
  <ul>
     <li class="main"><a href="#">Main Item 1</a></li>
        <ul class="list-in-list">
           <li><a href="#">Item 1</a></li>
           <li><a href="#">Item 2</a></li>
           <li><a href="#">Item 3</a></li>
        </ul>
     <li class="main" ><a href="#">Main Item 2</a></li>

      <ul class="list-in-list">
           <li><a href="#">Item 1</a></li>
           <li><a href="#">Item 2</a></li>
           <li><a href="#">Item 3</a></li>
        </ul>
     <li class="main"><a href="#">Main Item 3</a></li>

      <ul class="list-in-list">
           <li><a href="#">Item 1</a></li>
           <li><a href="#">Item 2</a></li>
           <li><a href="#">Item 3</a></li>
        </ul>
  </ul>
</div> 
```

和JQuery函数如下

```
 $(document).ready(function() {

     $('.main').click(function() {                
         $(this).next(".list-in-list").slideToggle();             
       });
}); 
```

有关详细信息，您可以查看[链接](http://jsfiddle.net/liyakat/7uvuz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:22:22.220

您的代码工作正常我相信您没有在您的页面上包含 Jquery - 或者它的路径可能无效。检查您的网络选项卡以查看在检索 jquery 时是否收到 http 错误。

您可以通过执行以下操作来显示隐藏的 li：

```
$(document).ready(function() {
    $('#test').click(function(e) {
        $(this).find('.list-in-list').show();
    });
}); 
```

您的代码工作正常：

[**演示**](http://jsfiddle.net/rDHEV/)

在这种情况下，类会比 ID 更好，因为 ID 在您的页面上必须是唯一的。您可以通过向外部 li 元素添加类来使用下面演示中的类。只需将绑定从*#test*更改为您为 li 元素提供的任何类。

```
$('.clickAbleLi').click(function(e) {
   $(this).find('.list-in-list').show();
}); 
```

[**演示**](http://jsfiddle.net/rDHEV/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:22:42.863

> 我应该为主列表中的所有列表项使用一个 id，还是一个类就足够了？

ID 是**唯一的**。如果您有多个相同的 ID，您的 JavaScript 代码将无法正常工作。如果您计划向所有列表项添加类似的属性，则在这种情况下您将使用一个类（并使用`.`而不是引用它`#`）。在这种情况下，您将使用以下命令调用 click 函数：

```
$('li.myClass').click(...); 
```

但是，如果您只有一个列表，您可以简单地将 ID 添加到`ul`并使用 click 函数：

```
$('ul#myId > li').click(...); 
```

请注意，在这种情况下，使用类会稍微快一些。

然后，您将使用以下方法引用您的*内部* `ul`：

```
$('li.myClass > ul.list-in-list'); 
```

或者，取决于您使用上述哪一项：

```
$('ul#myId > li > ul.list-in-list'); 
```

（您将`>`在此处仅选择直接子级。如果您使用过`ul#myId li`，您还将选择`li`属于任何*inner* `ul`的元素）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:25:58.440

`</li>`您在“列表中的列表”之前关闭标签。你应该在你的内部列表之后关闭你的`</li>`标签；）像这样：

```
<div>
  <ul>
     <li id="test"><a href="#">Main Item 1</a>
        <ul class="list-in-list">
           <li><a href="#">Item 1</a></li>
           <li><a href="#">Item 2</a></li>
           <li><a href="#">Item 3</a></li>
        </ul>
     </li>
     <li><a href="#">Main Item 2</a></li>
     <li><a href="#">Main Item 3</a></li>
  </ul>
</div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-28T10:16:52.547

它应该有效，但如果遇到问题，请尝试将 ID 属性移动到 A 而不是 LI

# java - java mandelbrot set 移动错误

> ID：15679126
> 
> 赞同：0
> 
> 时间：2013-03-28T10:14:07.953
> 
> 标签：java, mandelbrot

所以我一直在尝试用java编写mandelbrot集，我知道代码不是很优化，但我刚刚开始这样做。

这个想法是，当我单击一个像素时，它将将该像素放在中心（代表某个复数）并计算它周围的集合。这在开始时有效，但如果我放大它会开始表现得很奇怪。我猜这可能是我的 midX、midY 或显示功能很奇怪，但我已经看了很长时间了，无法弄清楚，希望能得到一些帮助。

```
class set {
    DotWindow w;
    int[][] arrayColor;
    int max = 100;
    Grayscale gray;
    double zoom = 1.1;
    double midX = -0.5;
    double midY = 0;

    public static void main(String[] args) {
        new set().run();
    }

    void run() {
        setup();
        runLoop();

    }

    void runLoop() {
        int x;
        int y;
        while (true) {
            GameEvent event = w.getNextEvent();
            switch (event.getKind()) {
            case GameEvent.KEY_PRESSED:
                int key = event.getKey();
                if (key == 43) {
                    zoom = zoom * 1.1;
                } else if (key == 45) {
                    zoom = zoom / 1.1;
                }

                display();
                break;
            case GameEvent.MOUSE_CLICKED:
                midX = midX - (1 - event.getX() / 250.0);
                midY = midY - (1 - event.getY() / 250.0);
                System.out.println(midX);
                display();
                break;
            }

        }
    }

    void setup() {
        w = new DotWindow(500, 500, 1);
        w.checkMouse(true, false, false, false, false);
        w.checkKeys(true, false, false);
        arrayColor = new int[500][500];
        zoom = zoom / 1.1;
        display();

    }

    int calculate(double re, double im) {
        double Zre = 0;
        double Zim = 0;
        double Zim2 = 0;
        double Zre2 = 0;
        int iterations = 0;

        for (int k = 0; k < max; k++) {
            if (Zre2 + Zim2 > 4.0) {
                return k;
            }
            Zim2 = Zim * Zim;
            Zre2 = Zre * Zre;
            Zim = 2.0 * Zre * Zim + im;
            Zre = Zre2 - Zim2 + re;
            iterations = k;
        }
        return iterations;

    }

    void display() {
        for (double y = 0; y < 500; y++) {
            for (double x = 0; x < 500; x++) {
                double value = calculate((midX - (1 - x / 250) / zoom),
                        (midY - (1 - y / 250) / zoom));
                if (value == 99) {
                    w.setDot((int) x, (int) y, Color.BLACK);
                } else {
                    w.setDot((int) x, (int) y, gray = new Grayscale(
                            255 - (int) value * 2));
                }

            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:43:00.227

```
 case GameEvent.MOUSE_CLICKED:
            midX = midX - (1 - event.getX() / 250.0)/zoom;
            midY = midY - (1 - event.getY() / 250.0)/zoom;
            System.out.println(midX);
            display(); 
```

您已经放大了 10 倍，但您更改的中心坐标与缩放值无关。

# ruby-on-rails - Angular 和 Rails 浅层资源

> ID：15679132
> 
> 赞同：4
> 
> 时间：2013-03-28T10:14:23.003
> 
> 标签：ruby-on-rails, rest, angularjs

Rails 为我依赖的嵌套资源提供了一个 :shallow 选项，否则我将拥有 4 或 5 个嵌套资源，这将非常糟糕。

浅层资源如下所示：

```
resources :posts do
  resources :comments, :only => [:index, :create]
end
resources :comments, :only => [:show, :update, :destroy] 
```

我遇到的问题是在尝试使用 Angular 资源来映射 Rails 资源时，因为 ngResource 只允许定义单个 URI，所以要么`/posts/:post_id/comments/:id`要么`/comments/:id`.

我想要的是 ngResource 允许方法覆盖 URI 和插值。例如：

```
app.factory('Comment', ['ngResource', function ($resource) {
    $resource('/comments/:id', { 'id': '@id', post_id: '@post_id' },
        index:   { method: 'GET',  url: '/posts/:post_id/comments', isArray: true },
        create:  { method: 'POST', url: '/posts/:post_id/comments' },
        show:    { method: 'GET' },
        update:  { method: 'PUT' },
        destroy: { method: 'DELETE' }
    );
}]); 
```

这可能吗，也许是 ngResource 之外的另一个模块？或者我应该只构建两个服务：评论和评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:51:25.113

我实际上是从 github 上查看了 angular 资源的源代码，发现当前 master 允许操作指定自己的 url 参数。我在我的问题中写的示例完全可以使用 Angular 1.1.4+（尚未发布）。

升级到当前的角度大师是解决方案。

# php - 尝试回显可能被污染的字符串

> ID：15679134
> 
> 赞同：3
> 
> 时间：2013-03-28T10:14:28.033
> 
> 标签：php

我收到错误“尝试回显可能被污染的字符串”，错误行是，

```
<form action="?action=export&val=<?php echo $_GET['val'];?>&export=yes" method="post"> 
```

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:16:40.063

您已启用[污点](http://php.net/manual/en/intro.taint.php)功能。如果您将潜在的 XSS 代码（受污染的字符串）传递给函数，它将发出警告。

您可以通过在 php.ini 中设置`taint.enable`=来禁用它`0`

正如其他用户所建议的，使用`urlencode()`, `urlrawencode()`（注意区别）`htmlspecialchars()`可以消除警告。此外，如果您想在数据库中使用`$_GET`,`$_POST`变量，请务必通过`mysqli_real_escape_string()`或使用准备好的语句或使用 PDO 对其进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:16:32.870

错误是指变量完全按照用户指定的方式插入到 URL 中，这是一个潜在的安全风险。改为使用[`urlencode($_GET['val'])`](http://php.net/urlencode)，以逃避价值，从而中和风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:16:28.603

您启用了污点扩展：

[http://php.net/manual/en/intro.taint.php](http://php.net/manual/en/intro.taint.php)

在执行 echo(s) 时尝试使用 htmlspecialchars()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:17:18.937

不要直接使用`$_GET[]`变量，而是先对其进行处理，确认没有SQL注入或其他有害的东西，然后显示处理后的值。

# sql-server-2008 - 如何在 ssis 中处理之前检查 csv 文件中的文件结尾

> ID：15679137
> 
> 赞同：0
> 
> 时间：2013-03-28T10:14:37.877
> 
> 标签：sql-server-2008, ssis

我创建了一个 SSIS 包，它使用 ForEachLoop 容器处理 .CSV 文件。

所有 csv 文件的最后一行都包含“END OF FILE”。

只有那些在最后一行包含“END OF FILE”的 CSV 文件才会被处理。

怎么做到呢。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:09:36.190

创建变量`check`

```
Name   DataType  Value
check  int        0 
```

假设您有一个如下所示的包装设计

![在此处输入图像描述](../Images/e343e8b4b842a7e10439f3d85623fc5a.png)

脚本任务是检查`End of File`在`last row`

在脚本任务中添加变量`check`in`ReadWriteVariable`部分和输出变量 from `ForEach container`（假设变量名称是`LoopFiles`） in`ReadOnlyVariables`

在脚本任务中添加以下代码来读取文件。有几种方法可以在[这里](https://stackoverflow.com/questions/7387085/how-to-read-an-entire-file-to-a-string-using-c-sharp)和[这里读取文件](https://stackoverflow.com/questions/11625595/read-last-line-of-text-file)

```
 public void Main()
    {
     int counter = 0;
     string loop=  Dts.Variables["User::LoopFiles"].Value.ToString();
     string line;
      using (StreamReader files = new StreamReader(file))
         {
             while((line = files.ReadLine()) != null)
                {
                    if (line.ToLower() == "End Of File".ToLower())
                      { 
                          Dts.Variables["User::check"].Value = 1;
                       }
                }
         }
 Dts.TaskResult = (int)ScriptResults.Success;
 } 
```

双击绿色箭头连接脚本任务和数据流任务。将打开一个优先对话框并输入如下表达式

![在此处输入图像描述](../Images/6c8a617e7f2d7e8b009512676abd3e81.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:36:44.180

有多种方法可以做到这一点。一种方法是：

1.  创建以下变量：

EOF_Found 布尔值

Row_Count 整数

1.  使用平面文件源将数据引入数据流
2.  使用行计数组件将行数添加到 Row_Count，以便稍后识别最后一行
3.  使用脚本组件循环遍历行，为每行添加 1 到计数器
4.  当您的计数器等于 Row_Count 中的值时（即您正在查看最后一行），请检查您希望“END OF FILE”出现的列中的值（取决于您如何设置平面文件连接管理器）。如果它等于“END OF FILE”，则将 EOF_Found 的值更改为 True
5.  在脚本组件之后，添加一个引用 EOF_Found 中的值的派生列
6.  使用条件拆分，检查派生列的值，仅在 True 时处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:27:11.330

该解决方案避免了逐行读取整个文件。为了完整起见，我在这里合并了 Praveen 的代码。

```
 public void Main()
    {
        string line = ReadLastLine(@"c:\temp\EOF.cs");

         if (line.ToUpper() == "END OF FILE")
         { 
             Dts.Variables["User::check"].Value = 1;
         }

    Dts.TaskResult = (int)ScriptResults.Success;
    }

    public static string ReadLastLine(string path)
    {
        StreamReader stream = new StreamReader(path);
        string str = stream.ReadToEnd();
        int i = str.LastIndexOf('\n');
        string lastLine = str.Substring(i + 1);
        return lastLine;
    } 
```

# java - 渲染前如何获取textview的行数？

> ID：15679147
> 
> 赞同：43
> 
> 时间：2013-03-28T10:15:08.413
> 
> 标签：java, android, android-layout, textview

如何获取字符串在`TextView`呈现之前将占用的行数。

A`ViewTreeObserver`将不起作用，因为它们仅在渲染后才被触发。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-02-15T10:43:40.223

当整个单词放在下一行时，接受的答案不起作用，以避免破坏单词：

```
|hello   |
|world!  | 
```

100% 确定行数的唯一方法是使用与 TextView 相同的文本流引擎。由于 TextView 不共享其重排逻辑，这里有一个自定义字符串处理器，它将文本分成多行，每行都适合给定的宽度。除非整个单词不适合，否则它也会尽力不破坏单词：

```
public List<String> splitWordsIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {
    ArrayList<String> result = new ArrayList<>();

    ArrayList<String> currentLine = new ArrayList<>();

    String[] sources = source.split("\\s");
    for(String chunk : sources) {
        if(paint.measureText(chunk) < maxWidthPx) {
            processFitChunk(maxWidthPx, paint, result, currentLine, chunk);
        } else {
            //the chunk is too big, split it.
            List<String> splitChunk = splitIntoStringsThatFit(chunk, maxWidthPx, paint);
            for(String chunkChunk : splitChunk) {
                processFitChunk(maxWidthPx, paint, result, currentLine, chunkChunk);
            }
        }
    }

    if(! currentLine.isEmpty()) {
        result.add(TextUtils.join(" ", currentLine));
    }
    return result;
}

/**
 * Splits a string to multiple strings each of which does not exceed the width
 * of maxWidthPx.
 */
private List<String> splitIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {
    if(TextUtils.isEmpty(source) || paint.measureText(source) <= maxWidthPx) {
        return Arrays.asList(source);
    }

    ArrayList<String> result = new ArrayList<>();
    int start = 0;
    for(int i = 1; i <= source.length(); i++) {
        String substr = source.substring(start, i);
        if(paint.measureText(substr) >= maxWidthPx) {
            //this one doesn't fit, take the previous one which fits
            String fits = source.substring(start, i - 1);
            result.add(fits);
            start = i - 1;
        }
        if (i == source.length()) {
            String fits = source.substring(start, i);
            result.add(fits);
        }
    }

    return result;
}

/**
 * Processes the chunk which does not exceed maxWidth.
 */
private void processFitChunk(float maxWidth, Paint paint, ArrayList<String> result, ArrayList<String> currentLine, String chunk) {
    currentLine.add(chunk);
    String currentLineStr = TextUtils.join(" ", currentLine);
    if (paint.measureText(currentLineStr) >= maxWidth) {
        //remove chunk
        currentLine.remove(currentLine.size() - 1);
        result.add(TextUtils.join(" ", currentLine));
        currentLine.clear();
        //ok because chunk fits
        currentLine.add(chunk);
    }
} 
```

这是单元测试的一部分：

```
 String text = "Hello this is a very long and meanless chunk: abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pgansohtunsaohtu. Hope you like it!";
    Paint paint = new Paint();
    paint.setTextSize(30);
    paint.setTypeface(Typeface.DEFAULT_BOLD);

    List<String> strings = splitWordsIntoStringsThatFit(text, 50, paint);
    assertEquals(3, strings.size());
    assertEquals("Hello this is a very long and meanless chunk:", strings.get(0));
    assertEquals("abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pganso", strings.get(1));
    assertEquals("htunsaohtu. Hope you like it!", strings.get(2)); 
```

现在可以 100% 确定 TextView 中的行数，而无需渲染它：

```
TextView textView = ...         //text view must be of fixed width

Paint paint = new Paint();
paint.setTextSize(yourTextViewTextSizePx);
paint.setTypeface(yourTextViewTypeface);

float textViewWidthPx = ...;

List<String> strings = splitWordsIntoStringsThatFit(yourText, textViewWidthPx, paint);
textView.setText(TextUtils.join("\n", strings);

int lineCount = strings.size();        //will be the same as textView.getLineCount() 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-28T10:17:46.793

```
final Rect bounds = new Rect();
final Paint paint = new Paint();
paint.setTextSize(currentTextSize);
paint.getTextBounds(testString, 0, testString.length(), bounds); 
```

现在将文本的宽度除以 TextView 的宽度以获得总行数。

```
final int numLines = (int) Math.ceil((float) bounds.width() / currentSize); 
```

**currentSize**：将呈现文本的视图的预期大小。大小不应超过屏幕宽度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-21T13:00:56.927

[@denis-kniazhev 的](https://stackoverflow.com/a/28525249/527759)答案非常好。但是，它使用自定义逻辑将文本分成几行。可以使用标准`TextView`布局组件来测量文本。

这就是它的样子：

```
TextView myTextView = findViewById(R.id.text);
TextMeasurementUtils.TextMeasurementParams params = TextMeasurementUtils.TextMeasurementParams.Builder
.from(myTextView).build();
List<CharSequence> lines = TextMeasurementUtils.getTextLines(text, params); 
```

TextMeasurementUtils.java

```
import android.os.Build;
import android.text.Layout;
import android.text.StaticLayout;
import android.text.TextDirectionHeuristic;
import android.text.TextPaint;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.List;

public class TextMeasurementUtils {
    /**
     * Split text into lines using specified parameters and the same algorithm
     * as used by the {@link TextView} component
     *
     * @param text   the text to split
     * @param params the measurement parameters
     * @return
     */
    public static List<CharSequence> getTextLines(CharSequence text, TextMeasurementParams params) {
        StaticLayout layout;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            StaticLayout.Builder builder = StaticLayout.Builder
                    .obtain(text, 0, text.length(), params.textPaint, params.width)
                    .setAlignment(params.alignment)
                    .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)
                    .setIncludePad(params.includeFontPadding)
                    .setBreakStrategy(params.breakStrategy)
                    .setHyphenationFrequency(params.hyphenationFrequency);
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                builder.setJustificationMode(params.justificationMode);
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing);
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                builder.setTextDirection((TextDirectionHeuristic) params.textDirectionHeuristic);
            }
            layout = builder.build();
        } else {
            layout = new StaticLayout(
                    text,
                    params.textPaint,
                    params.width,
                    params.alignment,
                    params.lineSpacingMultiplier,
                    params.lineSpacingExtra,
                    params.includeFontPadding);
        }
        List<CharSequence> result = new ArrayList<>();
        for (int i = 0; i < layout.getLineCount(); i++) {
            result.add(layout.getText().subSequence(layout.getLineStart(i), layout.getLineEnd(i)));
        }
        return result;
    }

    /**
     * The text measurement parameters
     */
    public static class TextMeasurementParams {
        public final TextPaint textPaint;
        public final Layout.Alignment alignment;
        public final float lineSpacingExtra;
        public final float lineSpacingMultiplier;
        public final boolean includeFontPadding;
        public final int breakStrategy;
        public final int hyphenationFrequency;
        public final int justificationMode;
        public final boolean useFallbackLineSpacing;
        public final Object textDirectionHeuristic;
        public final int width;

        private TextMeasurementParams(Builder builder) {
            textPaint = requireNonNull(builder.textPaint);
            alignment = requireNonNull(builder.alignment);
            lineSpacingExtra = builder.lineSpacingExtra;
            lineSpacingMultiplier = builder.lineSpacingMultiplier;
            includeFontPadding = builder.includeFontPadding;
            breakStrategy = builder.breakStrategy;
            hyphenationFrequency = builder.hyphenationFrequency;
            justificationMode = builder.justificationMode;
            useFallbackLineSpacing = builder.useFallbackLineSpacing;
            textDirectionHeuristic = builder.textDirectionHeuristic;
            width = builder.width;
        }

        public static final class Builder {
            private TextPaint textPaint;
            private Layout.Alignment alignment;
            private float lineSpacingExtra;
            private float lineSpacingMultiplier = 1.0f;
            private boolean includeFontPadding = true;
            private int breakStrategy;
            private int hyphenationFrequency;
            private int justificationMode;
            private boolean useFallbackLineSpacing;
            private Object textDirectionHeuristic;
            private int width;

            public Builder() {
            }

            public Builder(TextMeasurementParams copy) {
                this.textPaint = copy.textPaint;
                this.alignment = copy.alignment;
                this.lineSpacingExtra = copy.lineSpacingExtra;
                this.lineSpacingMultiplier = copy.lineSpacingMultiplier;
                this.includeFontPadding = copy.includeFontPadding;
                this.breakStrategy = copy.breakStrategy;
                this.hyphenationFrequency = copy.hyphenationFrequency;
                this.justificationMode = copy.justificationMode;
                this.useFallbackLineSpacing = copy.useFallbackLineSpacing;
                this.textDirectionHeuristic = copy.textDirectionHeuristic;
                this.width = copy.width;
            }

            public static Builder from(TextView view) {
                Layout layout = view.getLayout();
                Builder result = new Builder()
                        .textPaint(layout.getPaint())
                        .alignment(layout.getAlignment())
                        .width(view.getWidth() -
                                view.getCompoundPaddingLeft() - view.getCompoundPaddingRight());
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                    result.lineSpacingExtra(view.getLineSpacingExtra())
                            .lineSpacingMultiplier(view.getLineSpacingMultiplier())
                            .includeFontPadding(view.getIncludeFontPadding());
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                        result.breakStrategy(view.getBreakStrategy())
                                .hyphenationFrequency(view.getHyphenationFrequency());
                    }
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                        result.justificationMode(view.getJustificationMode());
                    }
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                        result.useFallbackLineSpacing(view.isFallbackLineSpacing());
                    }
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                        result.textDirectionHeuristic(view.getTextDirectionHeuristic());
                    }
                }
                return result;
            }

            public Builder textPaint(TextPaint val) {
                textPaint = val;
                return this;
            }

            public Builder alignment(Layout.Alignment val) {
                alignment = val;
                return this;
            }

            public Builder lineSpacingExtra(float val) {
                lineSpacingExtra = val;
                return this;
            }

            public Builder lineSpacingMultiplier(float val) {
                lineSpacingMultiplier = val;
                return this;
            }

            public Builder includeFontPadding(boolean val) {
                includeFontPadding = val;
                return this;
            }

            public Builder breakStrategy(int val) {
                breakStrategy = val;
                return this;
            }

            public Builder hyphenationFrequency(int val) {
                hyphenationFrequency = val;
                return this;
            }

            public Builder justificationMode(int val) {
                justificationMode = val;
                return this;
            }

            public Builder useFallbackLineSpacing(boolean val) {
                useFallbackLineSpacing = val;
                return this;
            }

            public Builder textDirectionHeuristic(Object val) {
                textDirectionHeuristic = val;
                return this;
            }

            public Builder width(int val) {
                width = val;
                return this;
            }

            public TextMeasurementParams build() {
                return new TextMeasurementParams(this);
            }
        }
    }

    public static <T> T requireNonNull(T obj) {
      if (obj == null)
          throw new NullPointerException();
      return obj;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-04T14:58:59.423

如果您知道或可以确定 TextView 父级的宽度，则可以调用导致计算行数的视图测量。

```
val parentWidth = PARENT_WIDTH // assumes this is known/can be found
myTextView.measure(
    MeasureSpec.makeMeasureSpec(parentWidth, MeasureSpec.EXACTLY),
    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)) 
```

TextView`layout`不再为空，您可以使用 . 检查计算的行数`myTextView.lineCount`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-15T22:05:47.233

使用 kotlin 扩展函数`doOnPreDraw`在视图渲染之前知道行数。例子：

```
my_text_view.text = "text with multiple lines \n\n\n"
my_text_view.doOnPreDraw {

    // before it is drawn, use lineCount...
    print(my_text_view.lineCount)
} 
```

[https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#doonpredraw](https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#doonpredraw)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-09T15:01:19.037

感谢[尤金·波波维奇](https://stackoverflow.com/a/58975681/2914140)，我得到了：

```
import android.os.Build
import android.text.Layout
import android.text.StaticLayout
import android.text.TextDirectionHeuristic
import android.text.TextPaint
import android.widget.TextView

object TextMeasurementUtil {
    /**
     * Split text into lines using specified parameters and the same algorithm
     * as used by the [TextView] component
     *
     * @param text   the text to split
     * @param params the measurement parameters
     * @return
     */
    fun getTextLines(text: CharSequence, params: TextViewParams): List<CharSequence> {
        val layout = getStaticLayout(text, params)
        return (0 until layout.lineCount).map {
            layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))
        }
    }

    fun getTextLineCount(text: CharSequence, params: TextViewParams): Int {
        val layout = getStaticLayout(text, params)
        return layout.lineCount
    }

    fun getTextLines(textView: TextView): List<CharSequence> {
        val layout = getStaticLayout(textView)
        return (0 until layout.lineCount).map {
            layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))
        }
    }

    fun getTextLineCount(textView: TextView): Int {
        val layout = getStaticLayout(textView)
        return layout.lineCount
    }

    /**
     * The text measurement parameters
     */
    fun getTextViewParams(textView: TextView): TextViewParams {
        val layout = textView.layout
        val width = textView.width - textView.compoundPaddingLeft - textView.compoundPaddingRight
        var lineSpacingExtra = 0f
        var lineSpacingMultiplier = 1.0f
        var includeFontPadding = true
        var breakStrategy = 0
        var hyphenationFrequency = 0
        var justificationMode = 0
        var useFallbackLineSpacing = false
        var textDirectionHeuristic: TextDirectionHeuristic? = null

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
            lineSpacingExtra = textView.lineSpacingExtra
            lineSpacingMultiplier = textView.lineSpacingMultiplier
            includeFontPadding = textView.includeFontPadding
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                breakStrategy = textView.breakStrategy
                hyphenationFrequency = textView.hyphenationFrequency
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                justificationMode = textView.justificationMode
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                useFallbackLineSpacing = textView.isFallbackLineSpacing
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                textDirectionHeuristic = textView.textDirectionHeuristic
            }
        }

        return TextViewParams(
            textPaint = layout.paint,
            alignment = layout.alignment,
            lineSpacingExtra = lineSpacingExtra,
            lineSpacingMultiplier = lineSpacingMultiplier,
            includeFontPadding = includeFontPadding,
            breakStrategy = breakStrategy,
            hyphenationFrequency = hyphenationFrequency,
            justificationMode = justificationMode,
            useFallbackLineSpacing = useFallbackLineSpacing,
            textDirectionHeuristic = textDirectionHeuristic,
            width = width
        )
    }

    private fun getStaticLayout(text: CharSequence,
                                params: TextViewParams): StaticLayout =
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            val builder = StaticLayout.Builder
                .obtain(text, 0, text.length, params.textPaint, params.width)
                .setAlignment(params.alignment)
                .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)
                .setIncludePad(params.includeFontPadding)
                .setBreakStrategy(params.breakStrategy)
                .setHyphenationFrequency(params.hyphenationFrequency)
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                builder.setJustificationMode(params.justificationMode)
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing)
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                builder.setTextDirection(params.textDirectionHeuristic!!)
            }
            builder.build()
        } else {
            @Suppress("DEPRECATION")
            StaticLayout(
                text,
                params.textPaint,
                params.width,
                params.alignment,
                params.lineSpacingMultiplier,
                params.lineSpacingExtra,
                params.includeFontPadding)
        }

    private fun getStaticLayout(textView: TextView): StaticLayout =
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            val builder = StaticLayout.Builder
                .obtain(textView.text, 0, textView.text.length, textView.layout.paint,
                    textView.width)
                .setAlignment(textView.layout.alignment)
                .setLineSpacing(textView.lineSpacingExtra, textView.lineSpacingMultiplier)
                .setIncludePad(textView.includeFontPadding)
                .setBreakStrategy(textView.breakStrategy)
                .setHyphenationFrequency(textView.hyphenationFrequency)
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                builder.setJustificationMode(textView.justificationMode)
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                builder.setUseLineSpacingFromFallbacks(textView.isFallbackLineSpacing)
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                builder.setTextDirection(textView.textDirectionHeuristic)
            }
            builder.build()
        } else {
            @Suppress("DEPRECATION")
            StaticLayout(
                textView.text,
                textView.layout.paint,
                textView.width,
                textView.layout.alignment,
                textView.lineSpacingMultiplier,
                textView.lineSpacingExtra,
                textView.includeFontPadding)
        }

    data class TextViewParams(
        val textPaint: TextPaint,
        val alignment: Layout.Alignment,
        val lineSpacingExtra: Float,
        val lineSpacingMultiplier: Float,
        val includeFontPadding: Boolean,
        val breakStrategy: Int,
        val hyphenationFrequency: Int,
        val justificationMode: Int,
        val useFallbackLineSpacing: Boolean,
        val textDirectionHeuristic: TextDirectionHeuristic?,
        val width: Int
    )
} 
```

用法：

1.  如果要在 equal `TextView`s 中打印不同的文本（例如，在`RecyclerView`一个或类似`ViewHolder`的 s 中）：

    ```
     val params = TextMeasurementUtil.getTextViewParams(textView)

     val lines = TextMeasurementUtil.getTextLines(textView.text, params)
     val count = TextMeasurementUtil.getTextLineCount(textView.text, params) 
    ```

2.  在任何其他情况下：

    ```
     val lines = TextMeasurementUtil.getTextLines(textView)
     val count = TextMeasurementUtil.getTextLineCount(textView) 
    ```

在你调用或[doOnPreDraw](https://stackoverflow.com/a/28136027/2914140)`RecyclerView`方法之前你不会知道参数，所以使用：`TextView``post`

```
textView.doOnPreDraw {
    val lines = TextMeasurementUtil.getTextLines(textView)
    val count = TextMeasurementUtil.getTextLineCount(textView)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-02T07:50:36.573

参考：[在渲染到布局之前获取文本视图的高度](https://stackoverflow.com/questions/19908003/getting-height-of-text-view-before-rendering-to-layout/49607117#49607117)

在渲染之前获取 TextView 的行。

这是我上面链接的代码库。它对我有用。

```
private int widthMeasureSpec;
private int heightMeasureSpec;
private int heightOfEachLine;
private int paddingFirstLine;
private void calculateHeightOfEachLine() {
    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int deviceWidth = size.x;
    widthMeasureSpec = View.MeasureSpec.makeMeasureSpec(deviceWidth, View.MeasureSpec.AT_MOST);
    heightMeasureSpec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);
    //1 line = 76; 2 lines = 76 + 66; 3 lines = 76 + 66 + 66
    //=> height of first line = 76 pixel; height of second line = third line =... n line = 66 pixel
    int heightOfFirstLine = getHeightOfTextView("A");
    int heightOfSecondLine = getHeightOfTextView("A\nA") - heightOfFirstLine;
    paddingFirstLine = heightOfFirstLine - heightOfSecondLine;
    heightOfEachLine = heightOfSecondLine;
}

private int getHeightOfTextView(String text) {
    // Getting height of text view before rendering to layout
    TextView textView = new TextView(context);
    textView.setPadding(10, 0, 10, 0);
    //textView.setTypeface(typeface);
    textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp));
    textView.setText(text, TextView.BufferType.SPANNABLE);
    textView.measure(widthMeasureSpec, heightMeasureSpec);
    return textView.getMeasuredHeight();
}

private int getLineCountOfTextViewBeforeRendering(String text) {
    return (getHeightOfTextView(text) - paddingFirstLine) / heightOfEachLine;
} 
```

注意：此代码也必须设置为屏幕上的真实文本视图

```
textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp)); 
```

# jsf - 在没有ajax的情况下更新jsf中的inputText

> ID：15679150
> 
> 赞同：0
> 
> 时间：2013-03-28T10:15:16.067
> 
> 标签：jsf

我有 2 个字段：inputText 和 selectOneMenu。当值 selectOneMenu 更改时，如何在没有 ajax 的情况下更新 inputText 的值？我用

```
valueChangeListener="myMetod()"
 onchange="submit()" 
```

对于 selectOneMenu。但是当调用 submit() 时，在 inputText 方法中调用了 inputText 的 setValue。我得到了旧的价值

# javascript - 防止玩！更改js文件后编译的框架

> ID：15679155
> 
> 赞同：5
> 
> 时间：2013-03-28T10:15:23.913
> 
> 标签：javascript, compilation, playframework

我正在使用 Play Framework 开发应用程序。每当我对 JavaScript 文件进行任何更改时，Play 都会开始编译。我希望通过将它们移动到 public/javascripts 文件夹来防止这种情况发生，但行为是相同的。我之所以要这样做是为了加快我的开发过程。编译时间很长，这让我很慢，因为我经常在浏览器中检查我的工作结果。

更改js文件后有什么方法可以防止播放编译吗？

# python - Openerp 帮我删除这个

> ID：15679162
> 
> 赞同：2
> 
> 时间：2013-03-28T10:15:52.327
> 
> 标签：python, xml, openerp

朋友，需要从弹出`manyone`字段中删除此选项。（并非在所有`fields`。某些字段需要删除此功能）。我使用了。然后`widget="selection"`我`domain filter`不工作。所以请帮我找到解决方案。

![创建和编辑选项](../Images/deae494e6223413d592e942dbf54f9aa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:06:23.870

有一个模块用于从默认选择的字段`openerp 6.1`中删除创建和编辑选项（在`openerp`应用程序站点搜索网络删除） 。`many2one`您可以以此为例并创建自己的模块。或者您可以修改基本代码转到您的服务器，然后导航到`openerp/addons/web/static/src/js/view_form.js`并删除从 line number 定义的快速创建功能`2860`。

这与我在 `openerp`帮助站点中给出的答案相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T11:27:27.443

我遇到了同样的问题，但我很容易解决了。

您需要更改您的网络插件。

请按照以下步骤操作：

1.  转到：web/static/src/js

2.  打开文件：`view_form.js`

3.  转到第 2958 行，或者您可以找到`label: _t`（“创建和编辑...”），

4.  评论它

享受吧，您现在可以在 many2one 字段中看到没有“创建和编辑”

注意：这将影响每个 many2one 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T09:23:56.860

在 v7 中，您可以使用[http://help.openerp.com/question/16498/how-to-disable-create-and-edit-from-from-a-menu/中建议的答案](http://help.openerp.com/question/16498/how-to-disable-create-and-edit-from-from-a-menu/)

```
<form string="My form" create="false"> 
```

我在 v6.1 中遇到了这个问题，所以我创建了一个新选项，以便我可以将它仅应用于某些字段（并非@Bipin 建议的所有字段）

```
<form string="My form" options='{"no_create": true}'> 
```

并更改了 web/static/src/js/view_form.js

```
 // Hack: check for new "no_create" option:
     if (self.get_definition_options().no_create === undefined || !self.get_definition_options().no_create) {
     // the rest of the code stays asis:

        // quick create
        var raw_result = _(data.result).map(function(x) {return x[1];});
        if (search_val.length > 0 &&
            !_.include(raw_result, search_val) &&
            (!self.value || search_val !== self.value[1])) {
            values.push({label: _.str.sprintf(_t('<em>   Create "<strong>%s</strong>"</em>'),
                    $('<span />').text(search_val).html()), action: function() {
                self._quick_create(search_val);
            }});
        }
        // create...
        values.push({label: _t("<em>   Create and Edit...</em>"), action: function() {
            self._change_int_value(null);
            self._search_create_popup("form", undefined, {"default_name": search_val});
        }});

     } // here endith the hack 
```

我想把它做成一个模块，因为编辑源代码不是很容易维护。

# php - 防止 XSS 攻击的新方法

> ID：15679171
> 
> 赞同：2
> 
> 时间：2013-03-28T10:16:11.620
> 
> 标签：php, security, xss

我有一个与娱乐有关的网站。所以，我想到了用一种新的方法来防止 XSS 攻击。我创建了以下单词列表

```
alert(, javascript, <script>,<script,vbscript,<layer>,
<layer,scriptalert,HTTP-EQUIV,mocha:,<object>,<object,
AllowScriptAccess,text/javascript,<link>, <link,<?php, <?import, 
```

我认为因为我的网站与娱乐有关，所以我不希望普通用户（恶意用户除外）在他的评论中使用这种词。所以，我决定从用户提交的字符串中删除所有上述逗号分隔的单词。我需要你的建议。这样做后我不需要使用类似 htmlpurifier 的工具吗？

注意：我没有使用 htmlspecialchars() 因为它也会转换从我的富文本编辑器 (CKEditor) 生成的标签，因此用户格式化将消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:25:11.077

使用黑名单是个坏主意，因为它很容易规避。例如，您正在检查并可能删除`<script>`. 为了规避这种情况，恶意用户可以输入：

```
<scri<script>pt> 
```

您的代码将去掉中间`<script>`部分，使外部`<script>`保持完整并保存到页面中。

如果您需要输入 HTML 而您的用户不需要，请阻止他们输入 HTML。您需要有一个单独的方法，只有您可以访问，用于输入带有 HTML 的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:59:41.007

这种方法误解了 HTML 注入问题是什么，并且完全无效。

除了上面的列表，还有*很多很多*方法可以将脚本放入 HTML 中，还有很多方法可以通过使用转义形式来规避过滤器。您将永远无法通过这种幼稚的序列黑名单捕获所有潜在的“有害”构造，并且如果您尝试使用真实的评论会给用户带来不便。（例如禁止使用以 ... 开头的单词`on`）

防止 HTML 注入 XSS 的正确方法是：

*   在`htmlspecialchars()`输出应该是普通文本的内容（这是绝大多数内容）时使用；

*   如果您需要允许用户提供的 HTML 标记，请将您希望允许的无害标签和属性列入白名单，并使用 HTMLPurifier 或其他类似库强制执行。

这是编写 Web 应用程序的标准且易于理解的部分，并且不难实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T10:21:37.263

为什么不创建一个功能来恢复对`htmlspecialchars()`您希望可用的特定标签所做的更改，例如`<b><i><a>`等？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T10:20:59.917

除了绕过您的列表的黑客之外，使用白名单总是比使用黑名单更好。

在这种情况下，您已经有了想要支持的标签的清晰列表，因此只需使用一些 HTML 净化器将 、 等标签列入白`<em>`名单`<b>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T10:20:49.137

你可以试试

**htmlentities()**

```
echo htmlentities("<b>test word</b>");

ouput: &lt;b&gt;test word&lt;/b&gt;gt; 
```

**strip_tags()**

```
echo strip_tags("<b>test word</b>");

ouput: test word 
```

**mysql_real_escape_string()**

或尝试一个简单的功能

```
function clean_string($str) {
  if (!get_magic_quotes_gpc()) {
    $str = addslashes($str);
  }
  $str = strip_tags(htmlspecialchars($str));
  return $str;
} 
```

# java - Eclipse 错误：“选择不包含主要类型/小程序”

> ID：15679173
> 
> 赞同：3
> 
> 时间：2013-03-28T10:16:17.190
> 
> 标签：java, eclipse, selenium, selenium-webdriver

我知道已经存在非常相似的问题，但是我是 Java/Selenium WebDriver 的初学者，最初是在 Selenium IDE 中创建的，然后将其导出为*Java / JUnit4 / WebDriver*并希望得到具体的帮助，因为我是'不确定我到底哪里出错了。当我作为*Java Application*运行时，我收到错误*Selection does not contain a main type*，当我作为*Java Applet*运行时，我收到错误*Selection does not contain an applet*。这是我的代码：

```
package com.exports.tests;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class Login {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "https://www.example.co.uk/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testLogin() throws Exception {
    driver.get(baseUrl + "/123example/index.jsp");
    // ERROR: Caught exception [ERROR: Unsupported command [getEval | prompt("Username: ") | ]]
    driver.findElement(By.name("LoginText1")).clear();
    element.sendKeys(user input);
    //driver.findElement(By.name("LoginText1")).clear();
    //driver.findElement(By.name("LoginText1")).sendKeys(_username);
    // ERROR: Caught exception [ERROR: Unsupported command [getEval | prompt("Password: ") | ]]
    driver.findElement(By.name("password1")).clear();
    element.sendKeys(user input);
    //driver.findElement(By.name("password1")).clear();
    //driver.findElement(By.name("password1")).sendKeys(_password);
    driver.findElement(By.cssSelector("img[alt=\"Login\"]")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [windowFocus |  | ]]
    driver.switchTo().window("CarrierNet Desktop");
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alert.getText();
    } finally {
      acceptNextAlert = true;
    }
  }
} 
```

**任何帮助是极大的赞赏。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:54:11.873

将其作为 java 应用程序运行。

将其作为 JUNIT 测试运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T07:11:00.587

扩展 HemChe 的答案（这让我走上了正轨）：

将 JUnit 和 Selenium .jar 文件位置添加到您的类路径中，然后设置您的 web 驱动程序的路径（以便 Selenium 知道如何控制浏览器），然后使用您的类作为参数调用 JUnit 运行器。这就是它在我的 linux 命令行上的样子

```
cd /path/to/my/compiled/class
java -classpath .:/path/to/junit/classes/*:/path/to/selenium/classes/* -Dwebdriver.gecko.driver=/path/to/geckodriver org.junit.runner.JUnitCore MyTestClass 
```

就像魔术一样，一个 Firefox 窗口打开并运行您的测试，控制台中出现错误。

Selenium 类路径应该有文件 client-combined-xxx-nodeps.jar JUnit 类路径应该有很多文件，包括 junit-x.xx.jar

# web - 为网站显示提供 MCX 实时数据的网站？

> ID：15679174
> 
> 赞同：2
> 
> 时间：2013-03-28T10:16:28.370
> 
> 标签：web, datafeed, real-time-data

搜索了很长时间才能找到提供 mcx 实时数据以显示在我们网站上的任何人。我找不到合适的数据提供者。如果有任何网站提供数据直接显示在网站上，请建议我。

我搜索的所有网站都准备好向 Amibroker 等软件和图表平台提供数据。但我们只需要在我们的网站上显示的数据而已..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:49:06.830

# 用于网站和移动应用程序显示的证券交易所实时 MCX 数据流

> **⚠️ 警告：仓库已被销毁⚠️**
> 
> **注意：**本文档引用了完整的示例源代码，您可以在此处找到：[https ://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html](https://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html)

### 测试 Stock Ticker MCX 数据流示例

> **注意：**现在测试现场版本！- [http://pubnub-demo.s3.amazonaws.com/stock-ticker-mcx/stock.html](http://pubnub-demo.s3.amazonaws.com/stock-ticker-mcx/stock.html)

当您正在为印度证券交易所或其他证券交易所的实时套接字流解决方案寻找数据网络提供商时，您需要考虑适合 MCX 股票广播性质的不同网络流模式。一种有意义的模式是可以在自定义数据模式中使用`publish`的`subscribe`框架，通常是 JSON。

最终，尽管我们不会在此发布答案中介绍这一点，但您也可以实时创建线图！- 请参阅下面的图片。

![用于网站和移动应用程序显示的证券交易所实时 MCX 数据流](../Images/fb16cfb77cb7fca8e43455d814af5081.png)

因为您正在谈论网站和网络应用程序，所以您将对两件事感兴趣，例如`WebSockets`全球分布式网络提供商，它将允许您流式传输股票行情/股票代码的数据。最好的数据链路显示提供商将为您提供最强大和最稳健的解决方案。第一步是在您的网络应用/网站中打开一个套接字流连接，然后发送以下是您的网络应用的起点：

## 打开浏览器 TCP 套接字流

```
<!-- Stock Ticker Update DIV -->
<div id="ticker">1,552.80</div>

<!-- Ticker Stream Interafce Code -->
<script src="http://cdn.pubnub.com/pubnub-3.4.3.min.js"></script>
<script>(function(){

    // Init MCX Stream
    var stream = PUBNUB.init({ subscribe_key : 'demo' });
    var ticker = "TCS";

    // Update Interface
    function quote_update(quote) {
        stream.$("ticker").innerHTML = JSON.stringify(quote);
    }

    // Open Socket To Receive Streaming Ticker Updates
    // Bind inbound data to our quote_update() function.
    stream.subscribe({
        channel : ticker,
        message : quote_update
    })

})();</script> 
```

上面的代码将打开一个套接字流，用于在网站上接收股票代码更新。接下来，我们将使用 MCX-SX 提供程序在您的**服务器**上提取数据。您将从您的服务器向 MCX-SX 服务器发出请求，以提取将要推送到您网站的数据。这是他们的数据方案 URL 接口：

```
<!-- Interface Display Update DIV -->
<!-- curl http://services.mcx-sx.com/srvlnk.xml -->

<root>
    <url key="currencyurl">
        <value>http://services.mcx-sx.com/chartservice.svc/cd/{charttype}/{symbol}/{series}/{expiry}/{instrumenttype}/{optiontype}/{strikeprice}</value>
    </url>
    <url key="equityurl">
        <value>http://services.mcx-sx.com/chartservice.svc/eq/line/{symbol}/{series}/{expiry}/2/xx/0</value>
    </url>
    <url key="equitypreopenurl">
        <value>http://services.mcx-sx.com/chartservice.svc/eq/preo/{symbol}/{series}/{expiry}/2</value>
    </url>
    <url key="equityindexurl">
        <value>http://services.mcx-sx.com/chartservice.svc/eq/idx/{symbol}/nm</value>
    </url>
    <url key="equitypreopenindexurl">
        <value>http://services.mcx-sx.com/chartservice.svc/eq/idx/{symbol}/po</value>
    </url>
    <url key="equityderivativesurl">
        <value>http://services.mcx-sx.com/chartservice.svc/eds/{charttype}/{symbol}/{series}/{expiry}/{instrumenttype}/{optiontype}/{strikeprice}</value>
    </url>
    <url key="currencyhistoricalurl">
        <value>http://services.mcx-sx.com/chartservice.svc/cd/{charttype}/{symbol}/{series}/{expiry}/{instrumentname}/{optiontype}/{strikeprice}/{startdate}/{enddate}</value>
    </url>
</root> 
```

获取上面的 URL 接口并发出`curl`命令。这是一个示例网址：

```
curl http://services.mcx-sx.com/chartservice.svc/eq/line/TCS/EQ/1577836800/2/xx/0 
```

以及输出响应结果：

```
{"Expiry":null,"InstrumentName":null,"OptionType":null,"StrikePrice":0,"cmonth":"JAN2020","comparison":null,"date":1364860800,"hline":null,"line":[{"c":"1551.80","t":34008,"v":250},{"c":"1551.90","t":34064,"v":500},{"c":"1547.85","t":34160,"v":250},{"c":"1551.00","t":34255,"v":250},{"c":"1550.65","t":34550,"v":250},{"c":"1549.30","t":34684,"v":250},{"c":"1544.20","t":35272,"v":250},{"c":"1544.60","t":35328,"v":253},{"c":"1546.00","t":35858,"v":250}],"ohlcv":null,"oi":null,"pcp":1553.4,"rbi":0,"secdesc":"TATA CONSULTANCY SERV LTD","series":"EQ ","symbol":"TCS","vol":null} 
```

`Publish`您可以使用以下命令将此结果 JSON 值和股票代码：

```
curl "http://pubsub.pubnub.com/publish/demo/demo/0/TCS/0/%7B%22Expiry%22%3Anull%2C%22InstrumentName%22%3Anull%2C%22OptionType%22%3Anull%2C%22StrikePrice%22%3A0%2C%22cmonth%22%3A%22JAN2020%22%2C%22comparison%22%3Anull%2C%22date%22%3A1364860800%2C%22hline%22%3Anull%2C%22line%22%3A%5B%7B%22c%22%3A%221551.80%22%2C%22t%22%3A34008%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221551.90%22%2C%22t%22%3A34064%2C%22v%22%3A500%7D%2C%7B%22c%22%3A%221547.85%22%2C%22t%22%3A34160%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221551.00%22%2C%22t%22%3A34255%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221550.65%22%2C%22t%22%3A34550%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221549.30%22%2C%22t%22%3A34684%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221544.20%22%2C%22t%22%3A35272%2C%22v%22%3A250%7D%2C%7B%22c%22%3A%221544.60%22%2C%22t%22%3A35328%2C%22v%22%3A253%7D%2C%7B%22c%22%3A%221546.00%22%2C%22t%22%3A35858%2C%22v%22%3A250%7D%5D%2C%22ohlcv%22%3Anull%2C%22oi%22%3Anull%2C%22pcp%22%3A1553.4%2C%22rbi%22%3A0%2C%22secdesc%22%3A%22TATA%20CONSULTANCY%20SERV%20LTD%22%2C%22series%22%3A%22EQ%20%22%2C%22symbol%22%3A%22TCS%22%2C%22vol%22%3Anull%7D" 
```

最好在查看这些步骤后在此处查看现场演示： [https ://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html](https://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html)

源代码在这里： [https ://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html](https://github.com/pubnub/javascript/blob/master/examples/stock-ticker-mcx/stock.html)

欢呼！

# php - PHP 无法取消设置 cookie

> ID：15679178
> 
> 赞同：-3
> 
> 时间：2013-03-28T10:16:41.040
> 
> 标签：php, cookies, unset

我的代码有问题。

我试图在正确的列上搜索一些可以帮助我的答案，但我没有找到。

这是我的插入代码：

```
<?php
    if(isset($_POST['**'])) {
        $set_time_out = 60;
        setcookie("***", "username", time()+60, "admin");
    }
?> 
```

现在，我未设置的代码是：

```
if(isset($_GET['**']) == '***') {
    unset($_COOKIE['***']);
} 
```

当我进入“获取”链接时，什么也没发生。

cookie 仍然存在。

请帮忙 ：）

**编辑**

登录代码是..

`<?php if(isset($_POST['*'])) { $set_time_out = 60; setcookie('***', '**', time()+60, 'admin/'); } ?>`

我的“注销”代码是：

`

```
if(!$_COOKIE['***']) {
    echo "<meta http-equiv=\"refresh\" content=\"0;url=../login.php\">";
}

if(isset($_GET['**']) == '******') {
    setcookie('***', '', time()-60, 'admin/');
} 
```

?>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T10:20:15.470

将其过期时间设置为向后，它将取消设置cookie

```
setcookie('cookiename', '', time()-3600); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:20:42.217

在过去设置cookie...例如：

```
setcookie ("***", "username", time() - 3600); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:21:22.107

要[取消设置](http://php.net/manual/en/function.setcookie.php)cookie，您需要将过期时间设置为过去，例如。

```
setcookie('your_cookie_name', '', time()-3600); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:22:29.880

要删除 cookie，请始终将其时间设置为当前 time() 的负数。

```
setcookie('nameofcookie', '', time()-3600); 
```

此代码将您的 cookie 持续时间设置为负数，因此它会自动删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T10:23:40.130

// 将过期日期设置为一小时前

```
 setcookie("cookiename","", time()-3600); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T10:51:05.277

```
setcookie("cookie name", "", time()-3600); 
```

# python - 在 pyInstaller 中编译扭曲

> ID：15679180
> 
> 赞同：1
> 
> 时间：2013-03-28T10:16:43.027
> 
> 标签：python, twisted, pyinstaller

我目前正在研究 pyInstaller。我现在一直在使用 py2exe，但如果我只为我们所针对的所有平台使用一个编译器，那就太好了。我的 py2exe setup.py 看起来像这样：

```
from distutils.core import setup
import py2exe

setup(
    name='agent',
    description='Service Test',
    version='1.00.00',
    service=['agent'],
    console=['agent.py'],
    zipfile=None,
    options={ "py2exe":{
                    "includes":"win32service,win32serviceutil,win32event,servicemanager,autobahn",
                    "packages": 'twisted, autobahn',
                    'bundle_files': 1
                },
        },
) 
```

我已经设法编译了 Windows 服务，但是一旦我开始使用 twisted，它就会失败。我用 pyInstaller 编译的命令行：

```
python PyInstaller.py --onefile c:\path\here\agent.py
python PyInstaller.py --hidden-import=twisted --onefile c:\path\here\agent.py 
```

我尝试安装服务时遇到的错误

```
agent.exe?175104\twisted\python\modules.py:758: 
UserWarning: C:\dist\path\agent.exe?175104 (for module twisted.web.util) not in path importer cache (PEP 302 violation - check your local configuration). 
```

# android - 在android上将word和excel转换为html

> ID：15679194
> 
> 赞同：0
> 
> 时间：2013-03-28T10:17:04.387
> 
> 标签：android, excel, ms-word, apache-poi, apache-tika

我想将 word 和 excel 文档转换为 html 以在我的 android 应用程序的浏览器中显示它们。

我找到了 apache poi 库，但它实际上只转换没有对象的文本，如表格、图表、艺术字等。或者有可能我忘记了什么吗？

我还发现了 apache tika，但是当我将该库添加到我的项目时，由于 java 堆空间错误（我在 eclipse.ini 文件中设置了 Xms768m 和 Xmx2048m），我无法编译它。我还尝试在运行时加载该库并尝试使用 dx 工具，但出现内存不足异常。

我能用它做什么，或者有没有可能在 android 应用程序中显示办公文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T14:58:01.587

在使用 dexer 时处理 OOM 错误：

在构建过程中使用了一个 dx 脚本，它为 dexer 设置了默认堆大小。该脚本位于此处：

$ANDROID_SDK/build-tools/dx（或 dx.bat 取决于操作系统）。

那里有一个部分看起来像这样：

```
# By default, give dx a max heap size of 1 gig. This can be overridden
# by using a "-J" option (see below).
defaultMx="-Xmx1024M"

# The following will extract any initial parameters of the form
# "-J<stuff>" from the command line and pass them to the Java
# invocation (instead of to dx). This makes it possible for you to add
# a command-line parameter such as "-JXmx256M" in your scripts, for
# example. "java" (with no args) and "java -X" give a summary of
# available options.

javaOpts="" 
```

也许尝试将 javaOpts 更改为 -Xmx2048M 或类似的东西。

# c# - 从位图生成 Alpha 通道的蒙版

> ID：15679200
> 
> 赞同：1
> 
> 时间：2013-03-28T10:17:14.663
> 
> 标签：c#, .net, gdi+

我需要从 System.Drawing.Bitmap 的 alpha 通道生成灰度位图。

我尝试使用 GetPixel 和 SetPixel，但这不适用于 PixelFormat 为 Format16bppGrayScale 的位图。

例如，将我的灰度图像中的所有像素设置为黑色。SetPixel 引发异常。

```
var bitmap = new Bitmap(16, 16, PixelFormat.Format16bppGrayScale); 
for (int x = 0; x < bitmap.Width; x++)
{
    for (int y = 0; y < bitmap.Height; y++)
    {
       bitmap.SetPixel(x,y, Color.Black);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:02:18.190

您可以使用 BitmapData bitmapDataIn = bitmap.LockBits(... ) 然后使用 use byte* pDataIn = (byte*)bitmapDataIn.Scan0; 获取指向原始位图数据的指针。

虽然这是 32 位位图数据

```
pDataIn[y * iStrideSize + x * 4 + 0] //Blue
pDataIn[y * iStrideSize + x * 4 + 1] //Greed
pDataIn[y * iStrideSize + x * 4 + 2] //Red 
pDataIn[y * iStrideSize + x * 4 + 3] //Alpha 
```

您可以使用指针修改或读取像素值

这是我的代码的复制粘贴，

```
unsafe
            {
                byte* pDataIn = (byte*)bitmapDataIn.Scan0;
                int iStrideSize = bitmapDataIn.Stride; //one row size in bytes, iWidth * 4
                int y, x;
                byte B, G, R, A;

                for (y = 0; y < iHeight; y++)
                {
                    for (x = 0; x < iWidth; x++)
                    {
                        B = pDataIn[y * iStrideSize + x * 4 + 0];
                        G = pDataIn[y * iStrideSize + x * 4 + 1];
                        R = pDataIn[y * iStrideSize + x * 4 + 2];
                        A = pDataIn[y * iStrideSize + x * 4 + 3];

                    }
                }

                bitmap.UnlockBits(bitmapDataIn);
            } 
```

# android - Android LocationManager 标准

> ID：15679205
> 
> 赞同：7
> 
> 时间：2013-03-28T10:17:34.033
> 
> 标签：android, location, criteria, locationmanager

我需要接收来自网络和 GPS 提供商的位置更改。

如果 GPS 供应商不可用或没有位置（卫星能见度差），我会从网络供应商那里收到位置信息，或者从 GPS 供应商那里获得位置信息。

是否可以根据我的需要使用标准选择提供者？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T10:57:14.210

实际上[，Android Developers - Making Your App Location Aware](http://developer.android.com/training/basics/location/index.html)有一个很好的示例代码可以满足您的需求。

在其代码中，如果您同时使用这两个提供商（来自 GPS 和来自网络），它将进行比较：

```
...
} else if (mUseBoth) {
    // Get coarse and fine location updates.
    mFineProviderButton.setBackgroundResource(R.drawable.button_inactive);
    mBothProviderButton.setBackgroundResource(R.drawable.button_active);
    // Request updates from both fine (gps) and coarse (network) providers.
    gpsLocation = requestUpdatesFromProvider(
            LocationManager.GPS_PROVIDER, R.string.not_support_gps);
    networkLocation = requestUpdatesFromProvider(
            LocationManager.NETWORK_PROVIDER, R.string.not_support_network);

    // If both providers return last known locations, compare the two and use the better
    // one to update the UI.  If only one provider returns a location, use it.
    if (gpsLocation != null && networkLocation != null) {
        updateUILocation(getBetterLocation(gpsLocation, networkLocation));
    } else if (gpsLocation != null) {
        updateUILocation(gpsLocation);
    } else if (networkLocation != null) {
        updateUILocation(networkLocation);
    }
}
... 
```

它实现了最佳位置提供者的想法（通过确定指定时间段内的准确性，例如：

```
/** Determines whether one Location reading is better than the current Location fix.
  * Code taken from
  * http://developer.android.com/guide/topics/location/obtaining-user-location.html
  *
  * @param newLocation  The new Location that you want to evaluate
  * @param currentBestLocation  The current Location fix, to which you want to compare the new
  *        one
  * @return The better Location object based on recency and accuracy.
  */
protected Location getBetterLocation(Location newLocation, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return newLocation;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = newLocation.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved.
    if (isSignificantlyNewer) {
        return newLocation;
    // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return currentBestLocation;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (newLocation.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(newLocation.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return newLocation;
    } else if (isNewer && !isLessAccurate) {
        return newLocation;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return newLocation;
    }
    return currentBestLocation;
} 
```

有关完整代码，请查看上面提供的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-05T12:47:41.003

对于搜索最佳位置提供商，请使用以下代码：请参阅[https://developer.android.com/reference/android/location/Criteria.html](https://developer.android.com/reference/android/location/Criteria.html) 了解，标准将如何工作？

```
public  String getProviderName() {
    LocationManager locationManager =(LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setSpeedRequired(true);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(false);
    return locationManager.getBestProvider(criteria, true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:20:42.323

只是不给出任何标准，并尝试获得**最好**的提供者：

```
LocationManager mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria criteria = new Criteria();
String best = mgr.getBestProvider(criteria, true);
//since you are using true as the second parameter, you will only get the best of providers which are enabled.
Location location = mgr.getLastKnownLocation(best); 
```

# php - PHP：根据特定的键和值合并数组的元素

> ID：15679206
> 
> 赞同：1
> 
> 时间：2013-03-28T10:17:43.770
> 
> 标签：php, arrays, multidimensional-array

我为此尝试了大约 20 种不同的想法，我想我已经走了很多圈，我不记得我从哪里开始了。我相信这也是一个简单的。

我有一个数组；

```
Array
(
    [0] => Array
        (
            [employee] => 15
            [first_name] => Person1
            [surname] => Person1
            [totaltime] => 183.75
            [type] => 0

        )

    [1] => Array
        (
            [employee] => 15
            [first_name] => Person1
            [surname] => Person1
            [totaltime] => 64.50
            [type] => 1            
        )

    [2] => Array
        (
            [employee] => 23
            [first_name] => Person2
            [surname] => Person2
            [totaltime] => 2.00
            [type] => 0
        )

    [3] => Array
        (
            [employee] => 51
            [first_name] => Person3 
            [surname] => Person3
            [totaltime] => 119.25
            [type] => 0            
        )

    [4] => Array
        (
            [employee] => 59
            [first_name] => Person4
            [surname] => Person4
            [totaltime] => 170.75
            [type] => 0
        )
) 
```

我需要合并`employee`编号相同的元素，并将`totaltime`元素添加到基于`type`. 这就是我的意思。

```
Array
(
    [0] => Array
        (
            [employee] => 15
            [first_name] => Person1
            [surname] => Person1
            [totaltime_type_0] => 183.75
            [totaltime_type_1] => 64.50

        )       

    [1] => Array
        (
            [employee] => 23
            [first_name] => Person2
            [surname] => Person2
            [totaltime_type_0] => 2.00
            [totaltime_type_1] => 0
        )

    [2] => Array
        (
            [employee] => 51
            [first_name] => Person3 
            [surname] => Person3
            [totaltime_type_0] => 119.25
            [totaltime_type_1] => 0            
        )

    [3] => Array
        (
            [employee] => 59
            [first_name] => Person4
            [surname] => Person4
            [totaltime_type_0] => 170.75
            [totaltime_type_1] => 0
        )
) 
```

我可以在查询级别执行此操作，但创建原始数组的 SQL 非常复杂，我宁愿只维护它的一个版本。

任何关于最佳方法的建议都会真正帮助我重回正轨。并且将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:25:43.390

试试这个 ：

```
$res      = array();
foreach($your_array as $val){
   $res[$val['employee']]['employee']         = $val['employee'];
   $res[$val['employee']]['first_name']       = $val['first_name'];
   $res[$val['employee']]['surname']          = $val['surname'];
   if($val['type'] == 0){
      if(array_key_exists("totaltime_type_0",$res[$val['employee']])){
         $res[$val['employee']]['totaltime_type_0'] += $val['totaltime'];
      }
      else{
         $res[$val['employee']]['totaltime_type_0'] = $val['totaltime'];
      }
   }
   if($val['type'] == 1){
      if(array_key_exists("totaltime_type_1",$res[$val['employee']])){
         $res[$val['employee']]['totaltime_type_1'] += $val['totaltime'];
      }
      else{
         $res[$val['employee']]['totaltime_type_1'] = $val['totaltime'];
      }
   }
}

echo "<pre>";
print_r(array_values($res)); 
```

# javascript - jquery，在ajax成功函数中操作数据

> ID：15679209
> 
> 赞同：0
> 
> 时间：2013-03-28T10:17:50.373
> 
> 标签：javascript, jquery, ajax

在 qwerty.php 中，我可以使用 ajax 加载 test.php，我还想操作成功函数中加载的数据，但它似乎不起作用。

在 qwerty.php 我的代码是

```
<div class="qwerty">qwerty</div>

<script src="jquery.js"></script>
<script>

$(function(){

$.ajax({
    type: 'GET', 
    url: 'test.php', 
    success: function(data, textStatus, jqXHR) {
        $(data).find('.test1').click(function(){$(this).toggle();});
        $('.qwerty').before(data);

    }
});

});
</script> 
```

在 test.php 我有：

```
<div class="test1">test1</div>
<div class="test2">test2</div> 
```

所以我的数据在“qwerty”之前正确加载`div`但是当我点击“test1”时没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:19:36.427

使用`filter()`，因为它是一个返回的字符串

试试这个

```
success: function(data, textStatus, jqXHR) {
    $('.qwerty').before(data);
    $(data).filter('.test1').click(function(){$(this).toggle();});
} 
```

**更新**

首先附加数据并在委托事件上使用...

```
success: function(data, textStatus, jqXHR) {
    $('.qwerty').before(data);
}
}); //ajax end

$('.qwerty').on('click' , '.test1' ,function(){
    $(this).toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:26:09.977

它不起作用，因为您将 onclick 附加到`$(data)`但插入`data`到 DOM 中。试试这个：

```
success: function(data, textStatus, jqXHR) {
    var el = $(data);
    el.find('.test1').addBack().filter('.test1').click(function(){$(this).toggle();});
    $('.qwerty').before(el);
} 
```

我曾经`find(...).addBack().filter(...)`找到与您的选择器匹配的所有元素。 `find()`只会发现 test1 和 test 1 的子元素具有类 test one。`filter()`只会过滤所有的根元素，所以如果你有子元素，它不会在这些元素中搜索。因此构造`find(...).addBack().filter(...)`

# testing - 测试每一层及其下层的集成测试术语（Jenga 测试）

> ID：15679212
> 
> 赞同：1
> 
> 时间：2013-03-28T10:17:56.970
> 
> 标签：testing, integration-testing, terminology

在我的应用程序中，我开发了一种自动化测试策略，其中每一层都有一些单元测试和一些集成测试。

在我看来，“集成测试”是一个相当笼统的术语，适用于涉及多个单元的测试。

对于我的集成测试，我觉得我有两个选择：

*   “测试单层中的单元组合，并伪造其他所有内容”（例如内存数据库或存根数据访问层）。有助于确认 DI 和消息传递是否正确连接。

或者

*   “给定层的测试应该针对较低层的真实实例进行操作”（例如命中数据库）。有助于获得整个应用程序可以正常工作的信心。

我的问题是，每种情况下是否有不同的常用术语？我已经开始将层和下面的测试称为“ **Jenga 测试**”，因为它们确保每一层在下面的层上正确对齐或堆叠，并且整个塔不会倒塌。

（ps 我不想讨论单元测试与集成测试的优缺点，或者伪造数据库——只是术语）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:10:26.463

当人们将 xUnit 测试用于超过 1 个类的集成测试时，我也感到困惑。

[维基百科定义](http://en.wikipedia.org/wiki/Integration_test)说集成测试

> 发生在单元测试之后和验证测试之前。

在[StackOverflow上](https://stackoverflow.com/tags/integration-testing/info)上的定义是一样的。

所以问题变成了“如果层测试是单元测试还是集成测试？”

我认为这是单元测试的一部分。

目前我只有一个参考点：

[Apache Maven 项目将](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)集成测试定义为获得包之后的测试。

> *   package - 获取编译后的代码并将其打包成可分发的格式，例如 JAR。
>     
>     
> *   集成测试 - 如有必要，将包处理并部署到可以运行集成测试的环境中

（要获得完整的阶段列表，请尝试`mvn abracadabra`）

![阶段](../Images/844c466e1df9e4aee27e2ad629b961e0.png)

**对于你的问题，**我建议说`layer testing`and `layers stack testing`。我还没有遇到过标准的排序术语。

# linux - 用于克隆目录的 Shell 脚本

> ID：15679215
> 
> 赞同：1
> 
> 时间：2013-03-28T10:18:05.143
> 
> 标签：linux, bash, shell

我需要制作一个有 2 个参数的 shell 脚本，每个参数都是一个有效目录。该脚本在第一个参数指定的第一个目录中创建一个与第二个同名的新目录，并将第二个目录的内容（子目录和文件）复制到新创建的目录中。但它只复制扩展名为 .txt 的文件。

这是我到目前为止得到的：

```
#!/bin/bash
if [ ! $# -eq 2 ]
then echo usage: file.sh directory1 directory2
     exit 1
fi
if [ !  -d $1  ]
then echo $1 is not a directory \!
     exit 1
fi

if [ ! -d $2 ]
then echo $2 is not a directory \!
     exit 1
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:43:49.070

把调试留给学生：

```
die () { echo >&2 "$*"; echo "用法...."; 1号出口；}
来自="$1";
to="$2";
[ ."$来自" = . ] && die "从目录名丢失";
[ ."$to" = . ] && die "目录名丢失";
[ -d "$from" ] || die "from dir $from not a directory";
[ -d "$to" ] || die "to dir $to not a directory";
target="$to/$(basname "$from")"; #final 目标目录名称，如果我理解正确的话。
find "$from" -name '*.txt' -maxdepth=1 | cpio -pd "$to" ||
# (cd "$from" && find * -name '*.txt' -maxdepth=1 | cpio -o...) | ( cd "$to" && cpio -i...) ||
   死“cpio失败”

```

请注意 cpio 有很多选项，您应该在使用之前查看它们。

注释掉的技术允许您更自由地移动到备用目标目录，我认为您在这里不需要。

避免悲伤：总是引用文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:24:40.070

只需将其附加到脚本的 and 中：

```
 cp -dR $2 $1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:24:46.540

你可能有更好的机会使用[rsync](http://linux.die.net/man/1/rsync)

例如：

```
rsync -avz /dir1/ /dir2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:24:48.600

`cp`根据您对保存文件属性的偏好，在`tar`或周围存在许多单行替代方案`rsync`。可以使用该`find`命令进行过滤。

# c# - 获取属性类型并传递给泛型方法

> ID：15679221
> 
> 赞同：0
> 
> 时间：2013-03-28T10:18:27.710
> 
> 标签：c#, .net, reflection

在 .Net 4.5 中工作。

我正在制作封装 ActiveX 控件（具体是 CadCorp SIS activeX 控件）的类，并且基本上将一些内部可用的对象复制到该控件（但不是外部）。从外部，内部对象的属性必须使用接受文本字符串的 API 进行操作。

在每个类中，我最终都会编写用于通过 API 获取和设置值的属性，并且我一遍又一遍地使用基本相同的代码，例如`Control.GetInt(TargetDescripor, TargetIdentifier, PropertyName);`，因此我试图使用泛型将代码减少到最低限度。我现在有这样的方法：

```
public T GetPropertyValue<T>(ObjectTypes Target, string PropertyName, int TargetIdentifier = 0) 
```

它标识正确的 API 方法并返回所需的值。

我仍然必须使用正确的描述符和正确的属性名称从每个对象调用此方法。我已经进一步减少了。例如，如果我在其中一个对象中获得属性，则使用以下代码：

```
public Class MyObject
{
    public bool MyObjectPropertyX
    {
        get { return this.GetProperty<bool>(); }
    }

    private const string _MyObjectPropertyX = "APICommandString";

    private T GetPropertyValue<T>([CallerMemberName] string PropertyName = null)
    {
        string apiCommand = (string)this.GetType().GetField("_" + PropertyName, BindingFlags.NonPublic | BindingFlags.Static).GetValue(this);

        // Call the method which executes the API command with the correct object
        // descriptor and get the value
    }
} 
```

这很好用。

现在我想知道是否可以在属性的 getter 中调用`this.GetProperty<T>()`type 参数自动设置为属性的类型？这可行吗？还是我现在拥有的和它一样好？

更新

另外，我很想知道转向这种方法是否有任何缺点。我将不得不进行很多 API 调用，所以我想知道与我在每个 getter 和 setter 中显式调用适当方法的原始代码相比，使用反射是否真的会减慢速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:45:29.003

为了解决您的第一点，我认为您不会在`get`不使事情过于复杂的情况下进一步减少代码；只是指定类型对我来说似乎很好。

如果您希望能够在不对字符串进行硬编码的情况下确定属性名称，则可以[将此方法与反射一起](http://joelabrahamsson.com/getting-property-and-method-names-using-static-reflection-in-c/)使用。

关于性能，我首先要说的是：测试它。如果您发现它很慢，那么您可以尝试缓存您查找的属性操作。此代码会将反射`field.getValue`调用包装在 a`Func<string>`中，以便每次都不需要反射查找。请记住，反射 api 无论如何都会在内部进行一些缓存，因此这可能没有什么好处。

```
 private readonly IDictionary<String, Func<String>> _cache = new Dictionary<String, Func<String>>();

    private String GetApiCommand(String propertyName)
    {
        Func<String> command;
        if (_cache.TryGetValue(propertyName, out command))
        {
            return command();
        }

        var field = GetType().GetField("_" + propertyName, BindingFlags.NonPublic | BindingFlags.Static);//.GetValue(this);

        if (field != null)
        {
            Func<String> action = () => (String)field.GetValue(this);
            _cache[propertyName] = action;

            return action();
        }

        throw new NotSupportedException();
    } 
```

# amazon-web-services - 如何在我的 amazon ec2 服务器上打开端口 2195 和 443？

> ID：15679227
> 
> 赞同：1
> 
> 时间：2013-03-28T10:19:04.063
> 
> 标签：amazon-web-services, amazon

我已经设置了一个 Amazon ec2 服务器，但我想打开端口 2195 和 443。

我已经在 Amazon 控制台中添加了来自安全组的端口。当我使用监听端口时

```
netstat -anltp | grep LISTEN
```

我只有两个端口 23 和 80。

我还检查了 ubuntu 防火墙是否被阻止。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-09T21:53:41.713

在 EC2 安全组中添加端口后，它们即可供任何进程使用。也不需要重新启动您的 EC2 实例。

```
netstat -anltp | grep LISTEN 
```

一旦启动了一些监听它们的进程，将开始显示新端口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T16:32:24.980

您可以在 ec2 上禁用 iptables，因为控制台上有安全组来限制开放端口，但如果您仍想使用它，这里是我的解决方案：

使用以下步骤手动编辑文件**/etc/sysconfig/iptables**

*   刷新 iptables 缓存

    > iptables -F

*   编辑文件

    > 纳米 /etc/sysconfig/iptables

*   添加您的端口并确保该行像

    > -A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT

*   并不是

    > -A 输入 -p tcp -m tcp --dport 443 -j 接受

*   保存并重启 iptables

    > 服务 iptables 保存
    > 
    > 服务 iptables 重启

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:33:17.497

iptables -A INPUT -p tcp -d 0/0 -s 0/0 --dport PORT_NO_U_WANTED_TO_OPEN -j ACCEPT

尝试这个 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:37:37.303

只需重新启动 e2 实例并检查它，并确保在添加新端口后保存了安全组设置。

# php - 将eregi转换为php 5.3

> ID：15679228
> 
> 赞同：0
> 
> 时间：2013-03-28T10:19:05.863
> 
> 标签：php, deprecated, eregi

有谁知道我将如何将以下代码转换为 php 5.3？

```
if (eregi('^(' . $value . ')(;q=[0-9]\\.[0-9])?$', $this->browser_languages[$i]) && isset($this->catalog_languages[$key])) { 
```

谢谢

-詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:21:19.823

`preg_match()`使用`i (PCRE_CASELESS)`修饰符是建议的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:21:10.653

ereg 函数已弃用，用 PCRE 函数替换它们

[http://www.php.net/manual/en/ref.pcre.php](http://www.php.net/manual/en/ref.pcre.php)

[http://php.net/manual/en/reference.pcre.pattern.posix.php](http://php.net/manual/en/reference.pcre.pattern.posix.php)

**编辑 ：**

要从 eregi 更改为 preg_match，您需要选择一个将作为分隔符的字符（我经常选择 #）并在分隔符后添加一个 i 标志（这意味着不区分大小写）。

你的例子：

```
if (eregi('^(' . $value . ')(;q=[0-9]\\.[0-9])?$', $this->browser_languages[$i])
    && isset($this->catalog_languages[$key])) {} 
```

会变成 ：

```
if (preg_match('#^(' . $value . ')(;q=[0-9]\\.[0-9])?$#i', $this->browser_languages[$i]) 
    && isset($this->catalog_languages[$key])) {} 
```

这是您需要的最低要求（请注意，您可能需要使用`preg_quote()`，`$value`但我暂时没有添加它以说明复杂的事情）

另一个注意事项是，如果要转换 ereg（不是 eregi），则不需要添加 i 标志。

# imagemagick - Imagemagick 转换后的图像模糊

> ID：15679231
> 
> 赞同：3
> 
> 时间：2013-03-28T10:19:08.790
> 
> 标签：imagemagick, imagemagick-convert

我正在使用`ImageMagick`命令行实用程序来转换图像。我有一个大尺寸的说（800x300 px）透明 tif 图像，我希望它将其转换为 cmyk tif，但生成的图像是模糊的。我怎样才能解决这个问题？

到目前为止我所拥有的是

```
convert.exe sourcefilergb.tif 
-colorspace cmyk  -depth 8 -resize 122x44 -quality 100 
-density 300 -virtual-pixel transparent -background none 
-gravity center -extent 122x44 -compress none destinationcmyk.tif 
```

如何纠正我上面的代码，以便我能得到想要的结果？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-02T04:51:13.480

这可能是一个别名问题。尝试`-adaptive-resize`代替`-resize`，如[文档中所述](http://www.imagemagick.org/Usage/resize/)。您也可以根据您的输入尝试不同的分辨率和密度设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T16:25:00.697

> 但是，许多过滤器（甚至是默认过滤器）可能会使图像略微模糊。
> 
> ...
> 
> 当放大或放大图像时，["-sample] 只执行 [sic] 像素复制......但是当缩小图像时，"-sample" 只会删除像素的行和列。
> 
> [http://www.imagemagick.org/Usage/resize/](http://www.imagemagick.org/Usage/resize/)

# android - JQuery 函数在 Android 应用程序开发中不起作用

> ID：15679234
> 
> 赞同：0
> 
> 时间：2013-03-28T10:19:14.287
> 
> 标签：android, jquery

我可能会以完全错误的方式进行此操作，但我正在尝试将基于 Web 的应用程序迁移到 Android 应用程序，并尽可能减少更改。

我已经将我的 Android 应用程序设置为从 HTML 页面进行填充，这在我最初的基本示例中运行良好。

但是，当我尝试添加任何 JQuery 函数时，这些函数都会失败。

我有以下代码：

```
<!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript">
            alert('outside doc ready');
            $(document).ready(function () {
                alert('inside JQuery');
            });
        </script>
    </head>

    <body>Some text</body>

</html> 
```

在浏览器中呈现，我得到两个警报消息。通过我的三星 Galaxy S3 上的 Android 应用程序渲染，我只是收到了第一个“外部文档准备就绪”警报。我之前已经包含了一个 JQuery Mobile 链接，但它没有任何区别，我的理解是它更像是一个 UI 功能集。

任何帮助将不胜感激。如果需要任何进一步的信息，请告诉我，我将编辑问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:24:34.980

要从外部加载 jQuery，您必须将 Internet 权限添加到 Android Manifest。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:12:57.303

我有这个工作。

由于我希望有人能解释的原因，JQuery 没有被加载。我手动保存了 JQuery 库并将其添加到测试 html 页面旁边的“资产”文件夹中。然后我简单地修改了包含行......

```
<script type="text/javascript" src="jquery.min.js"></script> 
```

页面开始工作。

我怀疑这里有一些安全限制，因为在本地上下文中运行的应用程序中包含第 3 方或外部 Javascript 文件可能有点狡猾。

如果您花时间阅读，谢谢。

# linux - 未找到 res_odbc.so - 星号

> ID：15679236
> 
> 赞同：0
> 
> 时间：2013-03-28T10:19:22.083
> 
> 标签：linux, dynamic, odbc, centos, libraries

我有类似的问题：[LINK](https://stackoverflow.com/questions/7835551/how-can-i-load-res-odbc-so/15679121#15679121)

就我而言，我在 menuselect res_odbc 中选择了

```
[*] 1.res_adsi
[*] 2.res_agi
[*] 3.res_clioriginate
[*] 4.res_config_odbc
XXX 5.res_config_pgsql
[*] 6.res_convert
[*] 7.res_crypto
[*] 8.res_features
[*] 9.res_indications
XXX 10\. res_jabber
[*] 11\. res_monitor
[*] 12\. res_musiconhold
[*] 13\. res_odbc
[*] 14\. res_smdi
XXX 15\. res_snmp
[*] 16\. res_speech 
```

当我尝试加载时：

```
PBX*CLI> module load res_odbc.so
[Mar 28 11:17:27] WARNING[2216]: loader.c:363 load_dynamic_module: Error loading module 'res_odbc.so': /usr/lib/asterisk/modules/res_odbc.so: cannot open shared object file: No such file or directory
[Mar 28 11:17:27] WARNING[2216]: loader.c:657 load_resource: Module 'res_odbc.so' could not be loaded. 
```

...但我在 Centos 中安装 ODBC 之前已经安装了 Asterisk。我应该重新编译 Asterisk 吗？怎么做？只需#make 安装？

我的配置文件（或来自 Asterisk 的 antythink）会被删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:14:26.733

这个问题与星号无关。它与 linux 中的动态库路径有关。

请执行以下操作：

```
ldd /usr/lib/asterisk/modules/res_odbc.so 
```

签入输出缺少的库。之后在路径中找到该库，将该路径添加到 /etc/ld.so.conf 并执行

```
ldconfig 
```

您最有可能添加了 /usr/local/lib/ 路径。

# php - 虽然通过“preg_match_all”函数特殊字符获取 html 内容不正确显示，如何解决这个问题？

> ID：15679242
> 
> 赞同：5
> 
> 时间：2013-03-28T10:19:35.677
> 
> 标签：php, preg-match-all

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:24:34.087

You have unicode issues, try adding this as the first line in your script :

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:29:54.607

first add this line in your code...(above)

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

# qt - 我们应该如何在调用 beginInsertRows(parent, first, last) 时创建父 QModelIndex？

> ID：15679249
> 
> 赞同：4
> 
> 时间：2013-03-28T10:19:46.460
> 
> 标签：qt, listview, models, qml, qmodelindex

这是[这个问题](https://stackoverflow.com/questions/15657830/qml-listview-does-not-update-information-after-endinsertrows)的更具体的版本。

我想向视图报告我将在我的模型中插入一些行。有两种调用方式`beginInsertRows`：

```
beginInsertRows(QModelIndex(), first, last) 
```

和

```
beginInsertRows(createIndex(-1,-1), first, last) 
```

有一个区别：在第二个变体中，`QModelIndex`将指针存储到我们的模型内部。在 Qml 内部：

```
void QQuickVisualDataModel::_q_rowsInserted(const QModelIndex &parent, int begin, int end)
{
    Q_D(QQuickVisualDataModel);
    qDebug() << "d->m_adaptorModel.rootIndex = " << d->m_adaptorModel.rootIndex;
    if (parent == d->m_adaptorModel.rootIndex)
        _q_itemsInserted(begin, end - begin + 1);
} 
```

语句的主体`if`不会被执行，因为它似乎`rootIndex`总是不存储指向模型的指针（即它存储 NULL 代替）

我已经创建了[测试 Qt5 应用程序](https://github.com/Kakadu/qml-test-3)

所以，我的问题是： **它是错误还是功能？**有人在我之前尝试过这个错误的调用吗？

# asp.net - 无法从回发动态创建的控件中获取价值

> ID：15679250
> 
> 赞同：0
> 
> 时间：2013-03-28T10:19:56.600
> 
> 标签：asp.net, vb.net

我在页面加载时动态创建一个文本框，但问题是我无法在按钮单击时从文本框中获取值。如何从动态创建的控件中获取价值？

我的 HTML 是这样的：

```
<body>
    <form id="form1" runat="server">
     <asp:Button ID="Button1" runat="server" Text="Button" />

    </form>
</body>
</html> 
```

我的代码是这样的

```
Partial Class TicketRound
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If (Not Page.IsPostBack) Then
            Dim tb As New TextBox
            tb.ID = "txt12"
            tb.Text = "Child "
            tb.Attributes.Add("runat", "Server")

            form1.Controls.Add(tb)
        End If
    End Sub

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim txtSurName As TextBox
        txtSurName = form1.FindControl("txt12")

        Response.Write(txtSurName.Text)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:22:35.783

您必须在每次回发时（重新）创建动态创建的控件，因此请替换：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If (Not Page.IsPostBack) Then
        Dim tb As New TextBox
        tb.ID = "txt12"
        tb.Text = "Child "
        tb.Attributes.Add("runat", "Server")' <-- redundant '

        form1.Controls.Add(tb)
    End If
End Sub 
```

和

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim tb As New TextBox
    tb.ID = "txt12"
    If Not IsPostBack Then tb.Text = "Child "
    form1.Controls.Add(tb)
End Sub 
```

是否有任何理由动态创建此控件？

# asp.net-mvc-3 - MVC 3 从局部视图发布表单

> ID：15679251
> 
> 赞同：0
> 
> 时间：2013-03-28T10:20:00.413
> 
> 标签：asp.net-mvc-3, forms, user-controls

我不知道我做错了什么，我在布局内的部分视图中有一个表单，提交表单时我无法让控制器触发，表单只是发布到 localhost:54719/FormController /ExecutePost 出现错误

```
The controller for path &#39;/FormController/ExecutePost&#39; was not found or does not implement IController. 
```

布局代码：~/Views/Shared/_Layout.cshtml

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>
        @ViewBag.PageTitle
    </title>
    <link rel="stylesheet" media="all" href="/Content/style.css">
</head>
<body>
    @Html.Partial("_Header");
    <!-- / header -->
    @Html.Action("Header", "Menu")
    <!-- / navigation -->
    @Html.Partial("_Form");
 <!--Form -->
    <div id="body">
        @RenderBody();
    </div>
    <!-- / body -->
    @Html.Partial("_Footer")
    <!-- / footer -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>    
    <script src="/Content/js/plugins.js"></script>
    <script src="/Content/js/main.js"></script>
</body>
</html> 
```

表单代码：~/Views/Shared/_Form.cshtml

```
@model MathsDoctor.Models.FormModel

@using (Html.BeginForm("ExecutePost", "FormController", FormMethod.Post))
{

<div class="form" id="find-form">
    <fieldset><label>Telephone:</label>
        @Html.TextBoxFor(model => model.Telephone)
        @Html.ValidationMessageFor(model => model.Telephone)
    </fieldset>
    <fieldset><label>Name:</label>
        @Html.TextBoxFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </fieldset>
    <fieldset><label>Postcode:</label>
        @Html.TextBoxFor(model => model.Postcode)
        @Html.ValidationMessageFor(model => model.Postcode)
    </fieldset>
    <fieldset><input type="submit" value="SUBMIT">
    </fieldset>
</div>
} 
```

表单控制器：~/Controllers/FormController.cs

```
public class FormController : Controller
{
    //
    // GET: /FindTutorForm/

    [HttpPost]
    public ActionResult ExecutePost(Models.FormModel formModel)
    {
        if (ModelState.IsValid)
        {
            return Redirect("/thanks/");
        }

        return PartialView("~/Views/Shared/_Form.cshtml");

    }
} 
```

我确定我错过了一些非常简单的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:37:45.627

尝试

```
Html.BeginForm("ExecutePost", "Form", FormMethod.Post) 
```

您必须删除“控制器”部分，因为它是自动映射的。

# macos - 运行后台任务时的 OSX 警报

> ID：15679255
> 
> 赞同：1
> 
> 时间：2013-03-28T10:20:04.727
> 
> 标签：macos, cocoa, alert

免责声明：我是 OSX 开发的初学者。

我有一个名为“checkUser”的方法。在该方法中，我需要检查输入的用户凭据是否有效。要检查凭据是否有效，我需要调用一个名为“methodThatInvolvesNetwork”的方法，因为它涉及网络连接，所以它的执行时间可能会有所不同。在“checkUser”中，我需要在“methodThatInvolvesNetwork”运行时显示一个显示进度的警报。用户还可以取消警报，这也将取消正在运行的“methodThatInvolvesNetwork”。
Q1）我应该怎么做？

请注意，必须阻止“checkUser”的执行，并且在“checkUser”中调用“methodThatInvolvesNetwork”。

我目前有这个实现：

```
- (BOOL)checkUser
{
    NSAlert *alert = [NSAlert alertWithMessageText:@"Sample" defaultButton:@"Okay" alternateButton:nil otherButton:nil informativeTextWithFormat:@""];
    self.alert = alert;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        [self methodThatInvolvesNetwork];
    });

    [alert runModal];
    NSLog(@"After run modal");
}

- (void)methodThatInvolvesNetwork
{
    // Do long running task here.

    dispatch_async(dispatch_get_main_queue(), ^{

        if (self.alert != nil)
        {
            [[self.alert window] orderOut:self.alert];
            [[NSApplication sharedApplication] stopModal];
        }
    });
} 
```

Q2）我的实施是否是正确的方法？
Q3）如果是，那么为什么 NSLog(@"After run modal") 在模态警报被解除后很久才执行，而不是在模态警报被解除后立即执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:10:15.117

为了回答我自己的问题，这是我使用的符合要求的：

*   一个带有 NSWindowController 的 NSWindow。
    此窗口将在加载窗口时在后台运行“methodThatInvolvesNetwork”。

*   在“checkUser”中，我实例化了上面的窗口“myWindow”，然后将其传递给：

*   Geowar 上面的回答（但没有 didEndSelector）：

    `[NSApp beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:]`

*   在上面的行之后，我使用以下方式将其作为模态运行：

    `[NSApp runModalForWindow:myWindow];`

    从而阻止“checkUser”的执行。

*   当“myWindow”完成时（当 stopModal 或 abortModal 被调用时），“checkUser”的执行将继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:55:57.513

[alert runModal] 在警报解除之前不会返回。如果有一个可以将其作为工作表附加到的窗口，那么您应该能够使用 beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo: 它将在警报关闭（而不是阻止）时回调选择器。

# php - 将两个表中的重复记录合并到一个表中

> ID：15679259
> 
> 赞同：1
> 
> 时间：2013-03-28T10:20:15.147
> 
> 标签：php, mysql, sql

我有两个表，如下所述：

![在此处输入图像描述](../Images/29f744cc3b17148ca07a0eba1c5a5f5e.png)

如何执行查询以合并表 B 中的重复数据，以便获取表 C 中的记录源自表 A 和表 B？

任何帮助都将受到高度赞赏.. 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:21:26.027

这可以使用`UNION`

```
SELECT ID, Value FROM TableA
UNION
SELECT ID, Value FROM TableB 
```

如果有一个名为的额外表`TableC`，并且您想插入 and 的结果`TableA`，请`TableB`使用`INSERT INTO...SELECT`语句，

```
INSERT INTO TableC(ID, Value)
SELECT ID, Value FROM TableA
UNION
SELECT ID, Value FROM TableB 
```

* * *

或者，也许您想创建一个`VIEW`

```
CREATE VIEW TableC
AS
SELECT ID, Value FROM TableA
UNION
SELECT ID, Value FROM TableB 
```

调用视图，

```
SELECT * FROM TableC 
```

# python - 使用 Python 在多个文件夹中创建特定文件夹

> ID：15679261
> 
> 赞同：-7
> 
> 时间：2013-03-28T10:20:16.053
> 
> 标签：python, directory, subdirectory

我有一个包含 450 个文件夹的目录，所有文件夹的名称都是唯一的。在此文件夹中，我需要创建一个名为 Metadata 的子文件夹，因此它如下所示：Folder1/Metadata Folder2/Metadata Folder3/Metadata

有没有办法使用 Python 来创建这个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:23:18.037

您要查找的功能都在[os 模块](http://docs.python.org/2/library/os.html#module-os)中：

```
import os
for item in os.listdir('.'):
    if os.path.isdir(item):
        newdir = os.path.join(item, 'Metadata')
        if not os.path.exists(newdir):
            os.makedirs(newdir) 
```

# android - 如何在不干扰实际图像的情况下将位图背景转换为透明？

> ID：15679262
> 
> 赞同：0
> 
> 时间：2013-03-28T10:20:16.547
> 
> 标签：android, algorithm, image-processing

我使用此[代码](https://stackoverflow.com/questions/15610609/how-to-convert-an-image-into-tattoo)将实际图像转换为以下

![转换后的图像](../Images/af8c098fca6781d3fd31615ab8a125ba.png)

到目前为止，它很好并且工作正常..但我的问题是这张图片的背景是白色的，如何在不干扰前景图像的情况下转换为透明..

为此，我使用了代码

```
Canvas c = new Canvas(results);
c.drawColor(Color.TRANSPARENT);
c.drawBitmap(results, 0, 0, null); 
```

但它没有将背景转换为透明，而且我使用了 setAlpha(100) 函数它也不起作用..

# ipad - 在 iPad 上禁用滚动

> ID：15679266
> 
> 赞同：0
> 
> 时间：2013-03-28T10:20:25.743
> 
> 标签：ipad, responsive-design, overflow, scalable

我已经为 iPad 制作了一个响应式网站。我使用了“overflow:hiddden”和“user-scalable=no”。在 Android 平板电脑上，用户无法随意滚动。但在 iPad 中，那些小无政府主义者可以滚动（垂直和水平），这搞砸了我的网站。如何阻止在 iPad 上滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T18:28:46.807

```
* {
    margin: 0;
    overflow: hidden;
    padding: 0;
} 
```

我希望它有帮助

# objective-c - 即使在锁定的 UIView 上也是真实的设备方向

> ID：15679271
> 
> 赞同：-3
> 
> 时间：2013-03-28T10:20:40.477
> 
> 标签：objective-c, device-orientation

即使在锁定的 UIView 上，我如何才能找出真正的 iOS 设备方向（不是 UIView 方向）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:24:39.430

它可能会帮助你。

```
UIDeviceOrientation currentDeviceOrientation = [[UIDevice currentDevice] orientation]; 
```

# python - 如何创建可以在“合理”环境中运行的 PyQt/PySide 应用程序包？

> ID：15679272
> 
> 赞同：2
> 
> 时间：2013-03-28T10:20:40.650
> 
> 标签：python, deployment, pyqt, pyside

通过“合理”的环境，我的意思是它不应该要求用户手动安装应用程序的任何依赖项，但可能需要一个有效的 Python 安装。此外，我希望该应用程序能够在 Windows、OSX 和流行的 Linux 发行版上运行。如果我也可以打包一个 Python 解释器，那就更好了。大小并不是一个真正的问题。我想要完成的一个很好的例子是 SublimeText 编辑器。

有没有既定的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:28:52.870

是的，python 带有设置实用程序，并且有一些软件包可以将您的完整应用程序放在特定于平台的二进制文件中（Windows 上的 exe，osx 上的 .app）。我建议看的一些软件包是：

cx_freeze

py2app

py2exe

# asp.net - asp：菜单在 IE8 中不起作用，但在 Firefox 中工作正常

> ID：15679275
> 
> 赞同：1
> 
> 时间：2013-03-28T10:20:43.090
> 
> 标签：asp.net, css, internet-explorer-8

我有一个由站点地图数据源控制的 asp 菜单控件。为了使菜单看起来很简单，我在 App_Browser 文件夹中使用了 cssfriendlyadapters.browser。该菜单在 Firefox 中运行良好，但在 IE 8 中无法运行。请帮忙。

下面是我用于菜单的 css 文件。

```
 .navMenu
{
    width: 100%;
}

.navMenu ul
{
    list-style: none;
    float: left;
    position: relative;
    z-index: 100;
    display: block;
}

.navMenu ul ul
{
    display: none;
    left: 0%;
    top: 100%;
}

.navMenu ul ul ul
{
    left: 101%;
    top: 0px;
}

.navMenu li
{
    float: none;
    list-style: none;
    width: 120px;
    text-align: center;
}

.navMenu li li
{
    width: 150px;
    text-align: left;
    padding-left: 5px;
    float: none;
}

.navMenu a
{
    text-decoration: none;
    outline: none;   
    width: 100%;
    float:left; clear:left; 
}

.navMenu a, .navMenu span
{
    display: block;        
    padding: 3px 0px;
}

/* Menu LAF Customizations */
.navMenu
{
    height: 21px;
    background: #F6F2E7;
}

.navMenu .AspNet-Menu
{
    background: #fff;
}

.navMenu li
{
    margin: 0px 1px;
    border-style: solid;
    border-width: 1px;
    border-color: #E1D5B0;
}

.navMenu li:hover
{
    background: #E1D5B0;
    border-color: #D8C797;
}

.navMenu li li
{
    margin-bottom: 0px;/* Setting 1px here creates a bug in IE, menu disappears */
    margin-left: -1px;
    background: #F6F2E7;    
    border-top-style: none; /* to offset above IE bug */
}

.navMenu li li:first-child
{
    border-top-style: solid; /* to offset above IE bug */
}

.navMenu a, .navMenu a:visited, .navMenu a:hover
{
    color: #000;
}

.navMenu li li.AspNet-Menu-WithChildren span 
{
    background:url(../img/arrow.png) no-repeat 97% center;
} 
```

请帮忙。

# android - 仅当向下滚动 ScrollView 时，如何使页脚可见？

> ID：15679276
> 
> 赞同：0
> 
> 时间：2013-03-28T10:20:46.527
> 
> 标签：android, scrollview, android-scrollview, android-scroll, android-scrollbar

如果`ScrollView`向下滚动，它必须显示页脚。如果它向上滚动，则页脚必须禁用。怎么做这种东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:29:30.750

有人已经在评论中发布了这个，但无论如何都在这里。

```
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        View view = (View) getChildAt(getChildCount()-1);
        int diff = (view.getBottom()-(getHeight()+getScrollY()));
        if( diff <= 0 ){ 
            yourFooter.setVisibility(View.GONE);
        }
        else{
            yourFooter.setVisibility(View.VISIBLE);
        }
        super.onScrollChanged(l, t, oldl, oldt);
} 
```

扩展 ScrollView，然后重写 onScrollChanged 方法。

# r - 来自 R 中大样本的 Shapley Shubik 功率指数

> ID：15679279
> 
> 赞同：0
> 
> 时间：2013-03-28T10:20:55.713
> 
> 标签：r, permutation

```
library(Deducer)
n.players <- 17
weight <- c(84,92,22,12,12,15,11,22,16,1,12,15,26,20,9,29,4)
quota <- sum(weight)/2+1
p <-n.players
n.cases <-factorial(p)
tab <- perm(1:p)
critical <- rep(0,n.cases)
for (i in 1:n.cases){
weight.sum <- cumsum(weight[tab[i,]])
critical[i] <- tab[i,which.max(weight.sum >= quota)]
}
table(critical)
power <- table(critical)/n.cases
round(power,3) 
```

*   此代码需要“Deducer”包。请在输入代码之前输入消息“install.packages("Deducer")”。

如果您需要更多关于 Shapley Shubik 功率指数的信息，请访问此处“ [http://en.wikipedia.org/wiki/Shapley%E2%80%93Shubik_power_index](http://en.wikipedia.org/wiki/Shapley%E2%80%93Shubik_power_index) ”

在这种情况下，我收到一条错误消息，因为代码基于大型样本。我想通过以下两种方式解决问题：

1.  计算我的个人电脑允许的情况（我 5 年前买了我的电脑。当时性能不高）并检查处理时间（很容易。我只是使用程序“proc.time ")

2.  通过使用 MonteCarlo，我想近似索引，并且在这种情况下我还检查了处理时间。

此外，我想比较 way1 和 way2 之间的索引和处理时间。

我该如何解决这个问题？（我找不到扩大计算内存限制的包。即使我在理论上知道蒙特卡洛的初级水平，我也无法将该机制应用于R代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:40:01.030

您可以使用`sample`生成随机排列，而不是枚举所有 17 个！其中。

```
n.cases <- 1e6
critical <- rep(0,n.cases)
for (i in 1:n.cases){
  random_permutation <- sample( 1:n.players )
  weight.sum <- cumsum( weight[ random_permutation ] )
  critical[i] <- random_permutation[ which.max(weight.sum >= quota) ]
}
table(critical)
power <- table(critical) / n.cases
round(power, 3) 
```

# visual-c++ - 什么是 .sym 文件，如何在 Visual-C++ 中使用它？

> ID：15679289
> 
> 赞同：3
> 
> 时间：2013-03-28T10:21:23.060
> 
> 标签：visual-c++, dll, debug-symbols, oracle-call-interface, occi

[Oracle OCCI for VS2010](http://download.oracle.com/otn/other/occi/occivc10_11203_win32.zip)包含以下文件：

*   oraocci11.dll (~ 500 KB)
*   oraocci11.lib (~ 800 KB)
*   oraocci11.sym (~ 546 KB)

DLL 是显而易见的。lib 文件 - 从它的大小来看，似乎是静态库。

但是`.sym`文件是什么？Windows 上的符号文件是“通常”的`.pdb`文件。它是什么？

而且，如果它是一个符号文件，那么我如何在 VC++ 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:42:12.357

我在[Oracle docs](http://docs.oracle.com/cd/E14072_01/appdev.112/e10646/oci01int.htm) ^(Oracle® Call Interface Programmer's Guide, 11g Release 2 (11.2), ... OCI Instant Client)中找到了以下片段——

> oci.sym, oraociei11.sym, orannzsbb11.sym ... 符号表
> 
> 为每个 DLL 提供了一个 .sym 文件，当它与 DLL 位于同一位置时，当 Windows 上的 OCI 发生故障时，会生成带有函数名称的堆栈跟踪。

所以我假设这些文件被 dll 自己用来解析符号名称。我不清楚接下来是什么格式以及使用什么工具来生成它们，但开发过程似乎不需要它们（但应该沿着 DLL 分发）。

# javascript - SQL Server 2012 将表行值与结果表中的列名相关联

> ID：15679290
> 
> 赞同：0
> 
> 时间：2013-03-28T10:21:25.793
> 
> 标签：javascript, asp-classic, sql-server-2012

第一次在这里发帖...请原谅格式问题。经过几天的尝试寻找类似的情况来解决我的问题，我仍然发现自己在魔方中。我正在尝试创建一份“报告”，以显示学生在考试中的表现及其人口统计数据。这是场景：

我有一个包含以下列的考试源表：

**表名：FOT2012PRE** 

> ItemID int （主键）
> ItemNum nchar(10) （结果表中对应的列名）
> ItemStem nvarchar(1000) （这是题干。）
> IC1 nvarchar(1000) （这是第一个答案选择。）
> IC2 nvarchar(1000 ) （这是第二个答案选项。）
> IC3 nvarchar(1000) （这是第三个答案选项。）
> IC4 nvarchar(1000) （这是第四个答案选项。）
> PriAns nvarchar(10) （这是正确答案选项- 人口统计项目不适用。）

还有其他列来识别图形、视频、课程、单元、演示标志。

以下是考试源表中的一些数据：

> ItemID ItemNum ItemStem IC1 IC2 IC3 IC4 PriAns
> 1 Item1 您目前的年级是多少？9 年级 10 年级 11 年级 12 年级 NULL
> 2 Item2 你的性别是？男 女 NULL NULL NULL

当学生回答每个问题时，他们的选择会记录在针对该考试的结果表中。此结果表具有以下列：

**表名：FOT2012PRERESULTS** 

> ResultsID int (Primary Key)
> StudentID nvarchar(255) (每位参加考试的学生的唯一 ID)
> LastItem nvarchar(255) (更新处理的每个答案 - 用于重新进入考试)
> Item1 nvarchar(255) (为 Item1 记录的答案：" C" 如果正确；如果不正确则选择）
> Item2
> nvarchar(255) （为 Item2 记录的答案：与考试中的所有其他问题相同）

以下是结果表中的一些示例数据：

> ResultsID StudentID LastItem Item1 Item2 Item3
> 743 MD911059935 67 IC2 IC2 C
> 744 IC2 IC2 C
> 746 MD911059949 67 IC2 IC2 IC4
> 934 MD3590986869 46 IC2 IC1 IC3

最终，我希望能够让我的报告看起来像这样：

**项目：你现在的年级是多少？** 

> 9 年级（IC1 响应数）
> 10 年级（IC2 响应数）
> 11 年级（IC3 响应数）
> 12 年级（IC4 响应数）
> 无响应（NULL 响应数）

这些结果将采用表格的形式，并在本地、地区、州和国家的基础上比较结果，但我可以执行相应的嵌套查询来处理它。对于这个解决方案，我持开放态度并相信它可能最好作为存储过程来实现，因为大约有 40 场考试分布在许多州和数千名学生中。我可以根据需要传递表名和其他值。根据为特定班级进行的考试，对报告的访问是个性化的。

我感谢任何帮助和建议。我必须恭敬地请求您提供有关任何连接或支点的细节。我是 ASP JavaScript 中的恐龙和程序。到目前为止，我在这条路上的尝试只让我进入了这个立方体……我需要一些光线来找到我的出路。如果我遗漏了什么，请告诉我。

谢谢...

更新：

这是我为将数据规范化到一个表中而创建的 SP 的一部分：

```
Create Table #rawtemp 
( 
Choice nchar(5),
ChoiceCount float
)

Create Table #temp 
( 
Item nchar(5),
Choice nchar(5),
ChoiceCount float
)
-- Query the results table and tally by response 
```

while (@i <= 8)
begin
SET @examcolinc = cast(@i as varchar(2)) -- 基于循环增量
SET @examcol = @res2+@examcolinc -- 追加增量以创建增量列名 - 基值为“项目”这个词

```
Declare @xsql nvarchar(1000) --this query cycles through each unique column in the results table, counting and grouping according to each response
Set @xsql = 'Select '+@examcol+' AS Choice, Count(*) AS ChoiceCount FROM dbo.'+@pretest+' WHERE '+@examcol+' <> '''' AND StudentID LIKE '''+@st+''' Group By '+@examcol 
```

-- Exec (@xsql) -- 将原始计数存储到临时表中
Insert #rawtemp Exec (@xsql)
Insert #temp -- 说明递增的列名称（例如，Item1、Item 2 等）
（
Item
）
值
(
@examcol
)

```
SET @i = @i+1 --increment the loop by one
end <br> 
```

以下是查询的结果：
Choice ChoiceCount
IC1 323
IC2 154
IC3 34
IC4 20
IC1 275
IC2 244
IC1 423
IC2 62
IC3 10
IC4 7
...

这是 #temp 插入的结果：
Item Choice ChoiceCount
Item1 NULL NULL
Item2 NULL NULL
Item3 NULL NULL
Item4 NULL NULL
Item5 NULL NULL
Item6 NULL NULL
Item7 NULL NULL
Item8 NULL NULL

只是想让他们结婚......因为它是我需要作为值插入到临时表中的列的“名称”，所以我一直在绞尽脑汁想弄清楚。非常感激任何的帮助。可能是上面的临时表输入到另一个临时表中，该表最终将与考试源表连接，以便我可以检索题干、干扰项、单元编号和相关的基准/标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:09:56.917

像这样构建您的临时表：

```
ExamId (exam source table name, eg 'FOT2012PRE') 
ItemNum (from exam source table, eg 'Item1') 
StudentId (eg 'MD911059935') 
Response (eg 'IC1', or NULL) 
```

*   如果多个学校使用完全相同的“examId”，请添加列以区分学校

这将为每个回答的唯一考试/问题编号/学生提供一行，以及他的回答（如果有）。

要填充此表，请遍历检查源表；每行的 ItemNum 字段包含结果表中的列名之一。从结果表中取出studentId + 对应结果列的值（如Item2，包含“IC4”），存入临时表。

在您当前使用的构建查询中，您是否可以：

```
Set @xsql = 'Select ''' + @examcol + ''' as Item, '+@examcol+' AS Choice, Count(*) AS ChoiceCount FROM dbo.'+@pretest+' WHERE '+@examcol+' <> '''' AND StudentID LIKE '''+@st+''' Group By '+@examcol 
```

# opencv - 存储到数据库 opencv 数据

> ID：15679294
> 
> 赞同：0
> 
> 时间：2013-03-28T10:21:29.903
> 
> 标签：opencv

我有图像的关键点和描述符。现在我想将它存储在数据库中。在opencv中有什么方法可以做到这一点（比如保存在文件中）或者知道如何做到这一点？

PS C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:39:47.013

查看[文件输入和输出 XML 和 YAML 文件](http://docs.opencv.org/doc/tutorials/core/file_input_output_with_xml_yml/file_input_output_with_xml_yml.html)。

# javascript - 使用 XMLHttpRequest 时 XML 是否受 JavaScript 中的相同域策略约束

> ID：15679296
> 
> 赞同：0
> 
> 时间：2013-03-28T10:21:36.023
> 
> 标签：javascript, xml

使用 XMLHttpRequest 时，XML 是否受 JavaScript 中的相同域策略约束？

*   如何使用 Ajax 进行跨域请求？
*   启用的 CORS 请求是否适用于 XML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:25:56.693

> 使用 XMLHttpRequest 时，XML 是否受 JavaScript 中的相同域策略约束？

**使用 XMLHttpRequest 时，一切**都受制于同源策略。返回的内容类型与它无关。

> 如何使用 Ajax 进行跨域请求？

[规避同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)的答案很好地涵盖了这一点

> 启用的 CORS 请求是否适用于 XML？

是的。返回的内容类型与它无关。

# javascript - 画布drawImage失败

> ID：15679299
> 
> 赞同：0
> 
> 时间：2013-03-28T10:21:40.513
> 
> 标签：javascript, canvas

我对 Canvas 很陌生，所以如果这很简单，请原谅。如果浏览器支持使用画布，我想在上传之前调整图像大小。然而，这段代码

```
var img = document.createElement("img");
var reader = new FileReader();  
    reader.onload = function(e) {img.src = e.target.result};
var files = event.target.files;
    reader.readAsDataURL(files[0]);
var canvas = document.createElement('canvas');
    canvas.width = 100;
    canvas.height = 100;
var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0); 
```

失败了

> NS_ERROR_NOT_AVAILABLE: 组件不可用 slice.call( docElem.childNodes, 0 )[0].nodeType;

在我的测试浏览器 Firefox 中。有什么问题？

**更新**

很奇怪：如果我添加一个“alert(canvas);” 作为最后一行的第三行（我有时会这样做以进行调试，我知道我可以并且应该使用 console.log），错误没有出现，但是，我仍然没有从我的图像中看到任何东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:50:48.497

需要加载图像才能在画布上绘制：

```
var img = new Image()
img.onload = function () {
     ctx.drawImage(img, 0, 0)
}
img.src="image.png" 
```

在你的例子中：

```
var img = document.createElement("img")
var reader = new FileReader()

var canvas = document.createElement('canvas')
canvas.width = 100
canvas.height = 100
var ctx = canvas.getContext("2d")

reader.onload = function(e) {
    var img = new Image()
    img.onload = function () {
        ctx.drawImage(img, 0, 0)
    }
    img.src = e.target.result
}

var files = event.target.files
reader.readAsDataURL(files[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:27:02.360

如果对您来说更容易，您可以从 HTML 加载图像：

```
<img id="imagetoload" src="myimage.jpg" />
<script>
    var image = document.getElementById("imagetoload");
</script> 
```

但最好的方法是像 Yukulélé 所说的那样用 javascript 加载它们。

# rest - 何时在 Restful URL 中使用参数

> ID：15679300
> 
> 赞同：0
> 
> 时间：2013-03-28T10:21:41.567
> 
> 标签：rest, restful-url, url-parameters

当我需要使用一些复杂的参数时，我正在尝试找到制作宁静 URL 的最佳方法。

在我的原始设计中，我需要创建一个设置，并使用此 URL 转到表单以创建新设置：

```
GET /setting/new 
```

现在我已经介绍了设置类别（1 个设置类别包含多个设置），我正在寻找使用 REST 原则进入设置表单的最佳方法。

一些可能的解决方案：

```
//using a parameter
    GET /setting/new?settingcategory=5152ebabf1f7b6134b000007
//include the settingcategory in the URL
    GET /settingcategory/5152ebabf1f7b6134b000007/setting/new
//using bad Restful design and use a POST to display the form
//and put the settingcategory in the body of the POST
    POST /setting/new 
```

我对 REST 很陌生，但目前第二个选项对我来说似乎是最合乎逻辑的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:28:15.363

我会避免在查询字符串中使用参数，例如 "?settincategory=..."

您可以在第二个选项中这样做，这样会更干净：

> `/settingcategories/5152ebabf1f7b6134b000007/setting/new`

# java - 来自画廊/相机的Android图像预览不同

> ID：15679302
> 
> 赞同：2
> 
> 时间：2013-03-28T10:21:46.623
> 
> 标签：java, android

我使用两个按钮： btnShoot = 使用相机 api 拍照 btnGallery = 从图库中选择照片

稍后，将可以上传保存的img。

以下 PhotoIntentActivity.java 我用于相机应用程序并预​​览图像 (imageView1)。现在的问题是，图像将在纵向模式下旋转 -90° 显示（在图库中预览和保存图像）。

```
package com.lo.android.photo;

import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import com.lo.android.R;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.hardware.Camera;
import android.media.ExifInterface;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.Surface;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.database.Cursor;

public class PhotoIntentActivity extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;

    private static final int ACTION_TAKE_PHOTO_B = 1;

    private static final String BITMAP_STORAGE_KEY = "viewbitmap";
    private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
    private ImageView mImageView;
    private Bitmap mImageBitmap;

    private String mCurrentPhotoPath;

    private static final String JPEG_FILE_PREFIX = "IMG_";
    private static final String JPEG_FILE_SUFFIX = ".jpg";

    private AlbumStorageDirFactory mAlbumStorageDirFactory = null;

    /* Photo album for this application */
    private String getAlbumName() {
        return getString(R.string.album_name);
    }

    /* Photo directory for this application */
    private File getAlbumDir() {
        File storageDir = null;

        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

            storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

            if (storageDir != null) {
                if (! storageDir.mkdirs()) {
                    if (! storageDir.exists()){
                        Log.d("lo", "failed to create directory");
                        return null;
                    }
                }
            }

        } else {
            Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
        }

        return storageDir;
    }

    /* Photo file name for this application */
    private File createImageFile() throws IOException {
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
        File albumF = getAlbumDir();
        File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);
        return imageF;
    }

    private File setUpPhotoFile() throws IOException {

        File f = createImageFile();
        mCurrentPhotoPath = f.getAbsolutePath();

        return f;
    }

    public Bitmap setPic() {

        int orientation;

        try {
            if (mCurrentPhotoPath == null) {
                return null;
            }

        /* There isn't enough memory to open up more than a couple camera photos */
        /* So pre-scale the target bitmap into which the file is decoded */
        /* Get the size of the ImageView */

        int targetW = mImageView.getWidth();
        int targetH = mImageView.getHeight();

        /* Get the size of the image */
        BitmapFactory.Options bmOptions = new BitmapFactory.Options();
        bmOptions.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
        int photoW = bmOptions.outWidth;
        int photoH = bmOptions.outHeight;

        /* Figure out which way needs to be reduced less */
        int scaleFactor = 1;
        if ((targetW > 0) || (targetH > 0)) {
            scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
        }

        /* Set bitmap options to scale the image decode target */
        bmOptions.inJustDecodeBounds = false;
        bmOptions.inSampleSize = scaleFactor;
        bmOptions.inPurgeable = true;

        /* Decode the JPEG file into a Bitmap */
        Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);

        ExifInterface exif = new ExifInterface(mCurrentPhotoPath);

        orientation = exif
                .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

        Log.e("ExifInteface .........", "rotation ="+orientation);

//      exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

        Log.e("orientation", "" + orientation);
        Matrix m = new Matrix();

        if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
            m.postRotate(180);
//          m.postScale((float) bm.getWidth(), (float) bm.getHeight());
            // if(m.preRotate(90)){
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                    bitmap.getHeight(), m, true);
            return bitmap;
        } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
            m.postRotate(90); 
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                    bitmap.getHeight(), m, true);
            return bitmap;
        }
        else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
            m.postRotate(270);
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                    bitmap.getHeight(), m, true);
            return bitmap;
        } 

        mImageView.setImageBitmap(bitmap);
        mImageView.setVisibility(View.VISIBLE);
        } catch (Exception e) {
            return null;
        }
        return mImageBitmap;
    }

    private void galleryAddPic() {
            Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
            File f = new File(mCurrentPhotoPath);
            Uri contentUri = Uri.fromFile(f);
            mediaScanIntent.setData(contentUri);
            this.sendBroadcast(mediaScanIntent);
    }

    private void dispatchTakePictureIntent(int actionCode) {

        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        switch(actionCode) {
        case ACTION_TAKE_PHOTO_B:
            File f = null;

            try {
                f = setUpPhotoFile();
                mCurrentPhotoPath = f.getAbsolutePath();
                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
            } catch (IOException e) {
                e.printStackTrace();
                f = null;
                mCurrentPhotoPath = null;
            }
            break;

        default:
            break;          
        } // switch

        startActivityForResult(takePictureIntent, actionCode);
    }

    private void handleBigCameraPhoto() {

        if (mCurrentPhotoPath != null) {
            setPic();
            galleryAddPic();
            mCurrentPhotoPath = null;
        }

    }

    Button.OnClickListener mTakePicOnClickListener = 
        new Button.OnClickListener() {
        @Override
        public void onClick(View v) {
            dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mImageView = (ImageView) findViewById(R.id.imageView1);
        mImageBitmap = null;

        /// gallery picture path ///

        Button picBtn = (Button) findViewById(R.id.btnShoot);
        setBtnListenerOrDisable( 
                picBtn, 
                mTakePicOnClickListener,
                MediaStore.ACTION_IMAGE_CAPTURE
        );

        Button btnGallery = (Button) findViewById(R.id.btnGallery);
        btnGallery.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
        } else {
            mAlbumStorageDirFactory = new BaseAlbumDirFactory();
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case ACTION_TAKE_PHOTO_B: {
            if (resultCode == RESULT_OK) {
                handleBigCameraPhoto();
            }
            break;
        } // ACTION_TAKE_PHOTO_B
        }
            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
                    && null != data) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                ImageView imageView = (ImageView) findViewById(R.id.imageView1);
                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
                cursor.close();
            }

        }// switch

    // Some lifecycle callbacks so that the image can survive orientation change
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);
        outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
        mImageView.setImageBitmap(mImageBitmap);
        mImageView.setVisibility(
                savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                        ImageView.VISIBLE : ImageView.INVISIBLE
        );
    }

    /**
     * Indicates whether the specified action can be used as an intent. This
     * method queries the package manager for installed packages that can
     * respond to an intent with the specified action. If no suitable package is
     * found, this method returns false.
     * http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html
     *
     * @param context The application's environment.
     * @param action The Intent action to check for availability.
     *
     * @return True if an Intent with the specified action can be sent and
     *         responded to, false otherwise.
     */
    public static boolean isIntentAvailable(Context context, String action) {
        final PackageManager packageManager = context.getPackageManager();
        final Intent intent = new Intent(action);
        List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent,
                    PackageManager.MATCH_DEFAULT_ONLY);
        return list.size() > 0;
    }

    private void setBtnListenerOrDisable( 
            Button btn, 
            Button.OnClickListener onClickListener,
            String intentName
    ) {
        if (isIntentAvailable(this, intentName)) {
            btn.setOnClickListener(onClickListener);            
        } else {
            btn.setText( 
                getText(R.string.cannot).toString() + " " + btn.getText());
            btn.setClickable(false);
        }
    }

} 
```

如何在纵向模式下仅使用一个具有正确旋转的预览？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:28:52.427

尝试这个 ：

```
File photos = new File(selectedImagePath);
                ExifInterface exif = null;
                try {
                    exif = new ExifInterface(photos.getPath());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                int orientation = exif.getAttributeInt(
                        ExifInterface.TAG_ORIENTATION,
                        ExifInterface.ORIENTATION_NORMAL);
                int angle = 0;

                if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                    angle = 90;
                } else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
                    angle = 180;
                } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                    angle = 270;
                }
                Bitmap b;
                Matrix mat = new Matrix();
                mat.postRotate(angle);

                b = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), mat, true); 
```

然后将此“b”位图设置在您要设置的任何位置。

# web-services - 如何处理 REST 服务的身份验证？

> ID：15679307
> 
> 赞同：2
> 
> 时间：2013-03-28T10:21:58.983
> 
> 标签：web-services, rest, authentication, authorization

当我编写需要身份验证的 Web 服务时，我通常必须在两个选项之间进行选择：

1.  我可以有一个创建会话的专用身份验证调用。所有后续调用都通过 cookie 进行身份验证。这正是您在经典网站中进行身份验证的方式。这不难写，但也不是无状态的。

2.  我可以在每个请求上发送身份验证信息（例如凭据、令牌等）。这样它是无状态的，但有更多的开销。

是否有建议的最佳做法，你应该走哪条路？为什么？

# php - 连接 3 个表 多对多关系单查询

> ID：15679316
> 
> 赞同：2
> 
> 时间：2013-03-28T10:22:23.383
> 
> 标签：php, mysql, sql, many-to-many

如何为以下内容编写一个 MYSQL 查询

我有 3 张桌子

我知道登录`user_id`是 25

`Users(id,first_name,last_name)`,

`userproduducts(user_id,product_id)`,

`Product(id,title,description,price)`

`userproducts`是多对多解析表

我怎样才能编写一个查询，让我获得用户的 ,`first_name`并获得userproducts 表中产品的产品表中的所有内容？`last_name``id=25``user_id = 25`

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T10:24:31.120

一个简单的直接`JOIN`会给你你想要的：

```
SELECT 
  u.first_name,
  u.last_name,
  p.*
FROM users              As u
INNER JOIN userproducts AS up ON up.user_id     = u.id
INNER JOIN product      AS  p ON up.product_id  = p.id
WHERE u.id = 25; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:34:20.280

这是通过两个连接完成的。如果您想获得没有产品的用户，它们应该是 LEFT JOINS。

```
SELECT u.first_name, u.last_name, p.*
FROM users u
LEFT JOIN userproducts up ON u.id = up.user_id
LEFT JOIN product on up.product_id = p.id
WHERE p.id = 25 
```

在没有产品的情况下，产品信息将为空。如果您不想要空产品，请使用 INNER JOIN，也只是写为在前面的答案中找到的 JOIN。

```
SELECT u.first_name, u.last_name, p.*
FROM users u
JOIN userproducts up ON u.id = up.user_id
JOIN product on up.product_id = p.id
WHERE p.id = 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T10:27:49.483

试试这个

```
SELECT 
 ut.first_name,
 ut.last_name,
 pt.*
FROM users              As ut
INNER JOIN userproducts AS upro ON upro.user_id     = ut.id
INNER JOIN product      AS  pt ON upro.product_id = pt.id
WHERE ut.id = 25; 
```

# c# - 如何阻止某些网站通过 C# 应用程序访问？

> ID：15679317
> 
> 赞同：0
> 
> 时间：2013-03-28T10:22:24.327
> 
> 标签：c#, .net, networking

我正在开发一个网络监控软件，通过它我需要阻止一些网站被访问。我目前正在这样做，通过获取所有活动的 TCP 连接，然后从中获取远程地址并根据列表检查它。我在计时器的帮助下每 2/3 秒执行一次。

但是，网站有时会使用多个 IP 地址。我如何检查所有这些？我对C#不太精通，所以请简单解释一下。

另外，我如何找出哪个浏览器正在访问特定网站。假设我在 Chrome 和 Firefox 上的其他网站上运行 facebook，我如何找出哪个应用程序在运行 facebook？

# c++ - 获取当前进程 CPU 使用情况 Linux C

> ID：15679322
> 
> 赞同：2
> 
> 时间：2013-03-28T10:22:40.080
> 
> 标签：c++, linux, cpu

我想在 C++ 中获取 Linux 下进程的特定 CPU 使用情况。然而，除了阅读

```
/proc/stat 
```

我不知道该怎么做。

如果我读了这个文件，那么我不知道我在启动程序时如何无法获得当前进程的 CPU 使用率......

我想获取我正在运行的程序的 CPU 使用率，你有什么线索吗？我在网站上看到了复杂的解决方案，但我还没有全部理解……我只需要一个方向。

看来我的 /proc/pid/stat 文件在 sleep(2) 之后没有改变，这正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:23:06.367

您可以使用 times 系统调用，它给出了 CPU 在给定进程上花费的时间。试试这个教程，[Linux 进程执行时间](http://www.softprayog.in/tutorials/linux-process-execution-time)。

# c - 在嵌入式 C 代码中使用 typedef 结构

> ID：15679325
> 
> 赞同：1
> 
> 时间：2013-03-28T10:22:51.460
> 
> 标签：c, syntax, typedef

我在 MicroChip 的一个示例代码中遇到了这段代码。我无法理解它的确切含义

```
typedef struct __attribute__((packed))
{
    BYTE command;
    BYTE data;
} ACCESSORY_APP_PACKET; 
```

我可以理解正在创建一个别名为 ACCESSORY_APP_PACKET 的结构，但这是什么`__attribute__((packed))`意思？它`__attribute__`作为一个功能。但如果是这样，它是如何作为结构被 typedef 的？
BYTE 是 Microchip 制造的一种已知数据类型。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:25:18.253

`__attribute__`是一个`gcc`编译器选项，它指定编译器在编译时的单独行为。

在您的情况下，它告诉编译器不要在结构成员之间使用填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:25:56.060

它不是 typedef 的一部分，也不是函数。它是一个编译器扩展，使用的语法可能看起来“类似函数”。它用于更改结构成员在内存中的打包方式，因此它使用最小的空间，而不是以可能执行得更快的可能更大的方式打包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:25:20.833

不，这不是一个函数。它是一个属性（这是一个 GNU 扩展）。它指定结构的成员之间不应该有填充（否则可以有）。

# ruby-on-rails - RoR：模型协会

> ID：15679327
> 
> 赞同：0
> 
> 时间：2013-03-28T10:22:58.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

（对不起我的英语）如果我有 3 个模型，:Movie :Actor :Connect，我怎样才能制作 id Assocations？连接模型有一个movie_id:integer 和一个actor_id:integer，我想在演员和电影之间建立联系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:03:14.870

干得好。

在电影模型中：

```
class Movie < ActiveRecord::Base
  has_many :connects
  has_many :actors, :through => :connects
end 
```

在演员模型中：

```
class Actor < ActiveRecord::Base
  has_many :connects
  has_many :movies, :through => :connects
end 
```

在连接模型中：

```
class Connect < ActiveRecord::Base
  belongs_to :movie
  belongs_to :actor
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:32:43.260

似乎您想做一个 HABTM（拥有并属于许多人）关系

同时检查这些链接

1)[导轨 API](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

2）rails cast [（免费但旧）](http://railscasts.com/episodes/17-habtm-checkboxes?autoplay=true)，并[付费](http://railscasts.com/episodes/17-habtm-checkboxes-revised)

3)[我在 HABTM 上的示例项目之一](https://github.com/sameera207/HABTMsample)

# java - 如何使用 IPCapture 库进行 mjpeg 流式传输

> ID：15679328
> 
> 赞同：0
> 
> 时间：2013-03-28T10:23:02.183
> 
> 标签：java, android, mjpeg

我发现了这个名为 IPCapture 的库，我可以将它用于通过 IP 摄像机进行 mjpeg 流式传输。如何将这个单独的类集成到我现有的代码中。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:10:08.823

找到它的一个jar文件并设法使用它。老实说，这是一个非常愚蠢的问题：D

# java - 双向对象对话

> ID：15679331
> 
> 赞同：1
> 
> 时间：2013-03-28T10:23:07.900
> 
> 标签：java, generics, ejb

我必须将 JPA 实体对象处理为带有 JAXB 注释的对象，反之亦然。

这两种类类型如下所示：

```
@Entity
public Entity{
private String fieldA;
private int fieldB;
private Entity2 fieldC;
// + Getters and Setters
}

@RootElement
public JAXBEntity (extends AbstractJAXBEntity<Entity>){
private String fieldA;
private int fieldB;
private String fieldC;
// + Getters and Setters
public JAXBEntity(Entity entity) {...}
public Entity getEntity() {...}
} 
```

我需要的是以下方法：`Entity <-> JAXBEntity, List<Entity> <-> List<JAXBEntity>`

我有很多这样的类对，所以我正在寻找一个非常通用的解决方案，每对的单独实现最少。如果我只需要在每对中实现`constructor`and ，则最佳情况是。`getEntity``JAXBEntity`

我想出了以下类结构：

```
public abstract class AbstractJAXBEntity<Entity>

@Stateless
public EntityConversation <JAXBEntity extends AbstractJAXBEntity> 
```

我的想法是我可以`JAXBEntity`在 的实例中获得泛型 Type ，`EntityConversation`然后在`Entity`. 当我拥有这些类型时，我可以通过反射轻松创建对象。

但是由于[类型擦除](http://java.sun.com/docs/books/tutorial/java/generics/erasure.html)，这有点复杂。另外`EntityConversation`只能使用无参数构造函数。否则我将无法使用`@EJB`.

这种方法是否现实，您是否看到我可以获得类型的任何方法？或者有没有其他很好的方法可以做到这一点，我没有看到？

# windows - PDF 文件无法从 Visual Studio、C++ 中的 ShellExecute 函数打开

> ID：15679337
> 
> 赞同：1
> 
> 时间：2013-03-28T10:23:30.173
> 
> 标签：windows, visual-c++, pdf, mfc, cmd

我的应用程序安装完成后，我试图打开“Read Me.pdf”文件。

我正在尝试使用打开此 PDF 文件

```
ShellExecute( NULL, _T("open"), csReadMe, NULL, csFileDir, SW_SHOWNORMAL ); 
```

也试过

```
ShellExecute( NULL, NULL, csReadMe, NULL, csFileDir, SW_SHOWNORMAL ); 
```

可能是，我有一个关于 Adob​​e Reader 11.02 版本的问题，因为在早期版本的 Adob​​e Reader 中，该文件正在打开，而在 AR 11.02 中，进程在`Task Manager`while`ShellExecute()`调用中显示，但 Adob​​e Reader 没有启动。

我正在使用带有 Win 8 的 VS 2012。

如果我显式打开该文件或从命令提示符打开，那么它很容易打开。

我发现出了什么问题。

提前致谢。

# javascript - NodeJS/Express：将数据从自定义中间件隐式推送到渲染调用中

> ID：15679344
> 
> 赞同：2
> 
> 时间：2013-03-28T10:23:55.430
> 
> 标签：javascript, node.js, express, middleware, dust.js

我正在使用 NodeJS/Express3。

我有一些自定义中间件，它根据 cookie 和 URL 从数据库中检索一些数据。

我想在基本模板（用于所有页面）中访问这些数据。

我可以通过将数据附加到`req`, 然后使用`res.render('template', {foo: req.foo, ...page specific data...});`

我想让它变得隐式，所以当我添加（或删除）自定义中间件时，我不必更改每个渲染调用。

*   有没有一种方法可以使来自自定义中间件的数据可用于渲染，而无需将其添加到*每个*渲染请求中`req`并显式传递它。

 *我正在使用 LinkedIn 的dust.js 模板版本，但我认为这个问题与模板引擎无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:29:47.583

我想答案可能在于`res.locals`。 [http://expressjs.com/api.html#res.locals](http://expressjs.com/api.html#res.locals)*

# asp.net - Response.Redirect 在 Global.asax 中不起作用

> ID：15679346
> 
> 赞同：1
> 
> 时间：2013-03-28T10:23:58.083
> 
> 标签：asp.net, c#-4.0, exception-handling, global-asax

当应用程序抛出异常但它不重定向到该页面时，我想重定向到错误页面。这是我的代码：

```
protected void Application_Error(object sender, EventArgs e)
    {

        StringBuilder theBody = new StringBuilder();

        Exception exception = Server.GetLastError();

        StackTrace st = new StackTrace(exception, true);
        // Get the top stack frame
        StackFrame frame = st.GetFrame(0);
        // Get the line number from the stack frame
        int line = frame.GetFileLineNumber();

        string file = frame.GetFileName();

        MethodBase site = exception.TargetSite;
        string methodName = site == null ? null : site.Name;

        string type = exception.GetType().ToString();

        theBody.Append("Line: " + line + "<br/>");
        theBody.Append("Method: " + methodName + "<br/>");
        theBody.Append("File: " + methodName + "<br/>");
        theBody.Append("IP: " + Request.ServerVariables["REMOTE_HOST"] + "<br/>");
        theBody.Append("Error Message: " + exception.Message + "<br/>");
        theBody.Append("Error Stack:" + exception.StackTrace);

            Response.Redirect("~/404.aspx", false);
            Context.ApplicationInstance.CompleteRequest();

       ...
    } 
```

我在测试页面上这样尝试

```
 try
        {

            throw new Exception("Test exception!!");
        }
        catch (Exception)
        {

        } 
```

它不会重定向 404.aspx 继续停留在测试页面上。我应该怎么做才能重定向 404.aspx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:27:46.953

[按照此链接http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)中的说明在 web.config 中设置它

```
<system.web>
        <customErrors mode="On"
                      defaultRedirect="~/ErrorPages/Oops.aspx" />

        ...
    </system.web> 
```

# javascript - 添加列表元素后将css应用于listview

> ID：15679352
> 
> 赞同：1
> 
> 时间：2013-03-28T10:24:15.290
> 
> 标签：javascript, jquery, css, jquery-mobile, jquery-mobile-listview

获取数据后，我使用 JSON 将元素添加到列表中，我执行以下操作：

```
success: function(data){          
  var list = $('#' + HTMLfieldName[index] + 'Ul');
  $.each(data, function() {
    newLi = document.createElement('li');
    ref = document.createElement('a');
    ref.innerHTML = this.description;
    ref.href = '#' + this.code;
    newLi.appendChild(ref);
   list.append(newLi);
   });          
} 
```

这很好用，但列表中的元素显示为普通 href（蓝色和下划线），而不是 listview 示例中使用的漂亮 CSS。

这是代码在渲染后的样子：

```
<ul class="levelUl ui-listview ui-listview-inset ui-corner-all ui-shadow" data-role="listview" data-inset="true" name="famUl" id="famUl">
  <li><a href="#2930">Finishing</a></li>
  <li><a href="#2910">Speciality Printing</a></li>
  <li><a href="#2900">Toner</a></li>
</ul> 
```

如果我将该代码粘贴到 HTML 页面中，它看起来很好。

将 CSS 添加到页面后，我是否需要执行某些操作来应用 CSS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:28:07.293

您必须在动态添加的列表视图元素上触发标记增强：

```
$('ul#id').listview('refresh'): 
```

现场示例：http: [//jsfiddle.net/Gajotres/LrAyE/](http://jsfiddle.net/Gajotres/LrAyE/)

基本上你的代码看起来像这样：

```
success: function(data){          
    var list = $('#' + HTMLfieldName[index] + 'Ul');
    $.each(data, function() {
        newLi = document.createElement('li');
        ref = document.createElement('a');
        ref.innerHTML = this.description;
        ref.href = '#' + this.code;
        newLi.appendChild(ref);
        list.append(newLi);
    });
    list.listview('refresh');    
} 
```

请记住，您必须**`.listview('refresh');`**在**`each`**循环之后调用。

要了解更多信息，请阅读我的另**[一篇文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，或在**[此处](https://stackoverflow.com/questions/14550396/jquery-mobile-markup-enhancement-of-dynamically-added-content/14550417#14550417)**找到。

# c++ - symbolicc++的表现

> ID：15679353
> 
> 赞同：2
> 
> 时间：2013-03-28T10:24:18.937
> 
> 标签：c++

任何人都有使用 SymbolicC++ 的经验吗？我正在尝试用这个库解决一些线性问题，但性能似乎不可接受，这是我的测试

```
#pragma warning(disable: 4800 4801 4101 4390)
#include<iostream>
using namespace std;
#include "Symbolic/symbolicc++.h"

int main() {
    // x==10  y==9  z==7
    Symbolic x("x"), y("y"), z("z");
    Equations rules = (
        x + y + z == 26,
        x - y == 1,
        2*x - y + z == 18
    );

    list<Symbolic> s = (x, y, z);

    list<Equations> result = solve(rules, s); // slow here

    for(auto& x : result) {
        cout << x << endl;
    }
} 
```

在i7 cpu 上**求解**函数需要 402 毫秒（调试）/67 毫秒（发布），对于像这样的简单问题来说太慢了吗？有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:33:14.553

符号计算很慢，如果你想处理公式，就需要它们。

如果您只想求解线性方程组，请考虑使用专门为此创建的工具，例如 Eigen( [http://eigen.tuxfamily.org/index.php?title=Main_Page](http://eigen.tuxfamily.org/index.php?title=Main_Page) )、BLAS( [http://www. netlib.org/blas/](http://www.netlib.org/blas/)）。

另请阅读[http://en.wikipedia.org/wiki/Symbolic_computation](http://en.wikipedia.org/wiki/Symbolic_computation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:11:08.820

谢谢kassak，刚刚用Eigen完成了这个。

```
#include <iostream>
#include "Eigen/Dense"
using namespace std;
using namespace Eigen;
int main()
{
    Matrix3f A;
    Vector3f b;
    A <<    1, 1, 1, 
            1,-1, 0, 
            2,-1, 1;
    b <<    26, 1,18;
    cout << "Here is the matrix A:\n" << A << endl;
    cout << "Here is the vector b:\n" << b << endl;
    Vector3f x = A.colPivHouseholderQr().solve(b);
    cout << "The solution is:\n" << x << endl;
} 
```

# c++ - C++ 打印浮点数

> ID：15679354
> 
> 赞同：-2
> 
> 时间：2013-03-28T10:24:23.593
> 
> 标签：c++, floating-point, cout

是否有一种打印浮点数的最佳方法（我使用的是长双打）？我尝试了几种方法，但似乎没有一种方法适用于所有类型的数字。

让我来说明一下。

我有三个打印语句。

```
print(M_PI); // from cmath
print(1.234);
print(1.234e-10); 
```

以下是一些 print(const long double &n) 实现的结果：

简单的输出

```
cout << n << endl;

3.14159 // not good
1.234 // good
1.234e-10 // good 
```

精确计算

```
cout.precision(numeric_limits<long double>::digits10);
cout << n << endl;

3.14159265358979312 // good
1.23399999999999999 // bad
1.23400000000000008e-10 // not good 
```

具有固定精度的 COUT

```
cout.precision(numeric_limits<long double>::digits10);
cout << fixed << n << endl;

3.141592653589793116 // good
1.233999999999999986 // bad
0.000000000123400000 // not good 
```

“科学”而不是固定的还有其他几种可能性，但这显然是不可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:47:05.337

问题是一些十进制数字不能完全用二进制表示。就像 没有精确的十进制表示一样， （也称为）也`1.0 / 3.0`没有精确的二进制表示。`1.0 / 10.0``0.1`

所以对于计算机来说，十进制中没有明确的“自然表示”或“尽可能多的数字”的概念。

当您输入`0.1`代码时，它实际上将由内存中最接近的二进制值表示。将此二进制值转换回十进制（这总是可能的）产生`0.1000000000000000055511151231257827021181583404541015625`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:54:20.310

您可以像这样使用 printf 或 sprintf ：

```
float p1 = 1.234;
float p2 = 1.234e-10;
float p3 = M_PI;

printf("%.5g - %.5g - %.5g", p1, p2, p3); 
```

输出：

```
1,234 - 1,234e-10 - 3,1416 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T10:28:47.547

实现一个方法，该方法接受一个流，按照你喜欢的方式改变它并输出它

```
ios_base& myway (ios_base& str){

} 
```

# python - 当浏览器不读取时，urllib 读取 url 会产生服务器测试页面

> ID：15679359
> 
> 赞同：0
> 
> 时间：2013-03-28T10:24:34.683
> 
> 标签：python, proxy, urllib

我目前正在通过出色的 Python 挑战赛 ( [http://www.pythonchallenge.com/](http://www.pythonchallenge.com/) )。我正在解决的当前问题涉及 urllib 库的使用，但我遇到了问题。我正在尝试使用此库通过我公司的防火墙连接到该站点。让我们从一些代码开始：

```
proxy = {'http':'http://my.companys.proxy/proxy.pac'}
urllib.urlopen('http://www.pythonchallenge.com', proxies=proxy).read() 
```

这会产生一个 http 响应，但奇怪的是它是 Apache HTTP 服务器测试页面：

> ...Red Hat Enterprise Linux**测试页面**...此页面用于测试 Apache HTTP 服务器在安装后的正常运行等...

因此，我似乎成功地在我们的防火墙之外实现了 http 连接，但获得的 http 响应与我的浏览器不同。另一个线索（或没有）是当我尝试连接到 about.php 页面时：

```
urllib.urlopen('http://www.pythonchallenge.com/about.php', proxies=proxy).read() 
```

然而，这会产生：

> 404 未找到... Apache 2.2.3 Red Hat Server，位于 www.pythonchallenge.com 端口 80

上面的两个地址在我的浏览器中都可以正常工作（使用相同的代理）。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:30:33.517

`urllib`不支持解析`.pac`文件。您看到的页面可能是为该`.pac`配置文件提供服务的服务器的 Apache 页面。

`.pac`文件包含向您的浏览器提供代理规则的 javascript 代码。您可以尝试直接打开文件，然后查看将为 Python Challenge 站点配置的代理。有关文件格式的更多详细信息，请参阅[http://en.wikipedia.org/wiki/Proxy_auto-config](http://en.wikipedia.org/wiki/Proxy_auto-config)。

一旦您确定将使用哪个代理服务器，请将其配置为映射*中*的服务器。`proxies`

# php - 从 postgresql 数据库填充 php 下拉框

> ID：15679370
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:13.713
> 
> 标签：php, forms, postgresql, drop-down-menu

我需要使用诸如 SELECT title FROM books WHEREownedBy = [users facebook ID] 之类的查询从我的 postgreSQL 数据库中填充书名的下拉列表，然后使用用户的选择来显示该书的其余信息。该页面是一个 facebook 应用程序，这就是我获取 facebook ID 的方式。

到目前为止，这是代码的相关部分，主要是根据我发现的类似问题的各种答案创建的。

```
<form action="updateform.php" method="post">
<select name="booktitle" id="booktitle">
<option>Select book</option>
<?php
$db = pg_connect("host=ec2-54-243-190-226.compute-1.amazonaws.com port=5432 dbname=d6fh4g6l0l6gvb    user=zmqygfamcyvhsb password=1Apld4ivMXSK8JZ_8yL7FwIuuz sslmode=require options='--client_encoding=UTF8'") or   die('Could not connect: ' . pg_last_error());
$sql = pg_query("SELECT title FROM books WHERE ownedby='$user_id'";
while ($row = pg_fetch_assoc($sql)) {
echo '<option value="'.htmlspecialchars($row['title']).'"></option>';}
pg_close($db);
?>
</select>
<input type="hidden" name="userid" id="userid" value="<?php echo htmlspecialchars($user_id); ?>">
//other form elements here
</form> 
```

**更新：我没有关闭隐藏字段，所以这似乎修复了它没有出现的错误。下拉列表未填充，但我在服务器日志中没有收到任何错误。**

如果有人可以帮助我让下拉框部分工作，那现在很好，一旦这部分工作，我将自己解决其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:29:49.137

你应该写

```
$sql = pg_query($db, "SELECT title FROM books WHERE ownedby='$user_id'"); 
```

此外，必须指定选项中显示的名称。

```
echo '<option value="'.htmlspecialchars($row['title']).'">'.htmlspecialchars($row['title']).'</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:37:09.017

在您的查询中，'$user_id' 为空。首先仔细检查“$user_id”的值。那么它将起作用。

# java - 将两个列表和三个字符串从 servlet 传递给 java 类

> ID：15679373
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:21.133
> 
> 标签：java, servlets, ontology

我创建了一个 java servlet 和 java 类，即时实例化一个对象并将两个列表和三个字符串传递给该类，但是当我从创建的对象调用类方法时，该方法不执行。

```
Class cls {

public void insertMethod (List<String> x, List<String> y, String a, String b, String  c)  
.......
for (int i=0;i<x.size();i++){
OWLDataPropertyAssertionAxiom charPropAssertion = factory.getOWLDataPropertyAssertionAxiom(hasChar,Text, x.get(i));

AddAxiom addAxiomChar = new AddAxiom(ontology,charPropAssertion);
manager.applyChange(addAxiomChar);
........
} 
```

并创建实例并从 servlet 调用“insertMethod”，如下所示：

```
cls o = new cls();
o.insertMethod(stlist, dtlist, stNo, stTitle, stText); 
```

当我检查本体文件时，我找不到从 servlet 发送的新输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:24:27.697

你可以尝试的事情：

*   你`class`没有`access identifier`，确保它从你的可见`servlet`，尝试制作它`public`。如果一个类没有“修改器”，那么它只能从“相同的包”访问。

*   用一个简单的替换你`code`的所有内容，看看它是否执行`method``System.out.println("i am called");`

# java - 有没有办法只索引来自java应用程序的solr中的新数据

> ID：15679374
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:21.483
> 
> 标签：java, solr

我有 postgresql 数据库，我在 solr 中建立了索引，一切正常。我制作了可以在数据库中添加新行的 java 应用程序。所以我的问题是有什么方法可以只索引我在 solr 中的 java 应用程序中的这个新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:47:36.823

如果您使用 DIH，您可以使用[增量索引](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command)来仅索引 Solr 中更改的数据。

如果您使用独立的 java 代码，您可以使用[Solrj](http://wiki.apache.org/solr/Solrj)库与 Solr 交互以索引单个文档。

# git - 如何使用适用于 Git 的 Visual Studio 工具

> ID：15679375
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:22.337
> 
> 标签：git, visual-studio-2012

我正在使用 VS 2012 来测试我的 GIT 服务器。我在 UBUNTU 12.04 上安装了 Git。我正在尝试使用 Visual Studio Tools for Git 来拉取和推送到 GIT 服务器。PULL 一切正常，但是当我 PUSH 时它在下面出现错误，

```
An error was raised by libgit2\. Category = Net (Error).
Remote error: access denied or repository not exported: /testing.git 
```

[http://postimg.org/image/tf07g89g1/](http://postimg.org/image/tf07g89g1/)

我认为这个错误是由许可引起的，但事实并非如此。我使用 GIT 扩展推送到 GIT 服务器，一切正常。有人能帮帮我吗？

[http://postimg.org/image/hraqzf9ox/](http://postimg.org/image/hraqzf9ox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:37:25.533

问题是 VS 2012 无法通过 SSH 进行身份验证，尽管我在后台运行 putty SSH 代理。我希望将来可以改进此功能。

# jquery - 使用敲除绑定进行点击时，下拉菜单冻结

> ID：15679378
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:28.220
> 
> 标签：jquery, performance, knockout.js

我在 ASP.NET MVC 项目中的 htm 视图上使用淘汰赛绑定。我将单击事件绑定到淘汰赛属性。一旦我在下拉列表中选择了一个值，就会调用 click 事件，但是该事件具有复杂的编码，并且需要一些时间才能完成（5 秒）。到那时，下拉菜单被冻结（在扩展模式下）。方法完成后，下拉菜单将缩小。

我们怎样才能克服这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:57.817

好吧，我找到了答案。

我将这段复杂的代码移到了 setTimeout 函数中。

所以，

```
setTimeout(function{
   // Complex function body  
}, 20); 
```

而已。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:28:49.507

如果它有复杂的编码，它的行为就没什么奇怪的了。在用户想要选择下拉项目和/或优化您的代码之前尝试绑定项目，问题应该消失了。

# rdf - DBpedia，获取具有纬度和经度的站点的国家/地区

> ID：15679379
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:33.370
> 
> 标签：rdf, latitude-longitude, sparql, dbpedia

我想得到包含纬度和经度的国家。目前，我有下面的查询，

```
SELECT DISTINCT ?lat,?long,?place WHERE {
:Taj_Mahal dbpprop:latitude ?lat .
:Taj_Mahal dbpprop:longitude ?long .
} 
```

现在，如何使用 dbpedia 获取包含该纬度和经度的国家？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:00:42.380

如果您已经拥有资源 (Taj_Mahal)，那么您可以使用以下查询：

```
SELECT DISTINCT ?lat ?long (str(?place) as ?place) ?country1 ?country2 
  WHERE {
  :Taj_Mahal dbpprop:latitude ?lat .
  :Taj_Mahal dbpprop:longitude ?long .
  :Taj_Mahal dbpedia2:location ?place .
  OPTIONAL {:Taj_Mahal dbpedia2:country ?country1} .
  OPTIONAL {:Taj_Mahal dbpedia2:locmapin ?country2} .
} 
```

[运行查询](http://dbpedia.org/snorql/?query=%20%20%20%20SELECT%20DISTINCT%20?lat%20?long%20%28str%28?place%29%20as%20?place%29%20?country1%20?country2%20%0D%0A%20%20%20%20%20%20WHERE%20%7B%0D%0A%20%20%20%20%20%20%3aTaj_Mahal%20dbpprop%3alatitude%20?lat%20.%0D%0A%20%20%20%20%20%20%3aTaj_Mahal%20dbpprop%3alongitude%20?long%20.%0D%0A%20%20%20%20%20%20%3aTaj_Mahal%20dbpedia2%3alocation%20?place%20.%0D%0A%20%20%20%20%20%20OPTIONAL%20%7B%3aTaj_Mahal%20dbpedia2%3acountry%20?country1%7D%20.%0D%0A%20%20%20%20%20%20OPTIONAL%20%7B%3aTaj_Mahal%20dbpedia2%3alocmapin%20?country2%7D%20.%0D%0A%20%20%20%20%7D%0D%0A)

如果你只有`lat`and `log`，你可以使用这个查询：

```
SELECT DISTINCT str(?what) as ?what str(?place) as ?place ?country1 ?country2   
  WHERE {
  ?target dbpprop:latitude 27 .
  ?target dbpprop:longitude 78 .
  ?target dbpedia2:location ?place .
  ?target rdfs:label ?what .
  OPTIONAL {?target dbpedia2:country ?country1} .
  OPTIONAL {?target dbpedia2:locmapin ?country2} .

  FILTER (lang(?what) = 'en')
} 
```

[运行查询](http://dbpedia.org/snorql/?query=%20%20SELECT%20DISTINCT%20str%28?what%29%20as%20?what%20str%28?place%29%20as%20?place%20?country1%20?country2%20%20%20%0D%0A%20%20%20%20%20%20WHERE%20%7B%0D%0A%20%20%20%20%20%20?target%20dbpprop%3alatitude%2027%20.%0D%0A%20%20%20%20%20%20?target%20dbpprop%3alongitude%2078%20.%0D%0A%20%20%20%20%20%20?target%20dbpedia2%3alocation%20?place%20.%0D%0A%20%20%20%20%20%20?target%20rdfs%3alabel%20?what%20.%0D%0A%20%20%20%20%20%20OPTIONAL%20%7B?target%20dbpedia2%3acountry%20?country1%7D%20.%0D%0A%20%20%20%20%20%20OPTIONAL%20%7B?target%20dbpedia2%3alocmapin%20?country2%7D%20.%0D%0A%0D%0A%20%20%20%20%20%20FILTER%20%28lang%28?what%29%20=%20%27en%27%29%0D%0A%20%20%20%20%7D)

但是请注意，如果资源（在本例中为*Taj Mahal*`country` ）设置了,`location`或`logmapin`属性，则此查询有效。并非所有地方都如此。

# jquery - Jquery UI Tooltip Mouse 快速生成错误

> ID：15679380
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:34.707
> 
> 标签：jquery, jquery-ui, jquery-tooltip

我正在使用 PHP 生成日历，并且我希望每天都有工具提示，其中包含从 Ajax 请求（通过 jQuery）收集的数据。

我已经这样做了，但是当我试图用鼠标光标导航太快时出现奇怪的错误。一些工具提示被卡住了。知道如何纠正吗？

这是我`DIV`每天的代码：

```
<div style="-moz-border-radius:8px; border-radius: 8px;" 
   class="pusty" id="dzien_'.$day.'"  
   onclick="idz_do_dnia('.$day.','.$miesiac.','.$rok.','.$gildia[id_gildi].')" 
   onmouseover="zaznacz('.$day.','.$data_s.','.$data_k.','.$gildia[id_gildi].')" 
   onmouseout="odznacz('.$day.')" > 
   &nbsp; 
</div> 
```

这里有 2 个 javascript 函数来显示 tooltim（名为：zaznacz）并隐藏它们（名为：odznacz）

```
function zaznacz(id,data_s,data_k,gildia)
{
    jQuery("#dzien_"+id).removeClass("pusty");
    jQuery("#dzien_"+id).addClass("zaznaczony");

    jQuery.ajax(
    {
        url: '/raidplanner_mini.php?data_s='+data_s+'&data_k='+data_k+'&gildia='+gildia,
        success:function(data)
        {
            if (!jQuery("#dzien_"+id).hasClass("tooledUp"))
            {
                jQuery("#dzien_"+id).tooltip(
                {
                    content: data,
                    show: false,
                    tooltipClass: "tooltip",
                    hide: false,
                    track: false,
                 }); 
                jQuery("#dzien_"+id).tooltip("open");
                jQuery("#dzien_"+id).addClass("tooledUp"); 
            }
            //else
          //jQuery("#dzien_"+id).tooltip().show();
        }   
    });
}
function odznacz(id)
{
    jQuery("#dzien_"+id).removeClass("zaznaczony");
    jQuery("#dzien_"+id).addClass("pusty");
} 
```

知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T15:57:28.187

此处正在跟踪该错误：http: [//bugs.jqueryui.com/ticket/8740](http://bugs.jqueryui.com/ticket/8740)

我在我的 chrome 扩展中使用了以下解决方法。我在 jQueryUI 工具提示初始化中添加了一个用于打开的处理程序，如下所示：

```
 open: function() {
        $(this).one('mouseout.wpcustom', function() {

            $(this)
                .off('mouseout.wpcustom')
                .tooltip('disable')
                .tooltip('enable');
        });
    } 
```

这会强制工具提示`.tooltip('disable')`在任何 mouseout 事件上关闭（使用 ）。在此处查看完整代码：[https ://github.com/jncornett/wiki-preview/blob/master/src/js/inject.js](https://github.com/jncornett/wiki-preview/blob/master/src/js/inject.js)

# css - 如何使用 CSS 3D 显示垂直于父元素的子元素？

> ID：15679381
> 
> 赞同：0
> 
> 时间：2013-03-28T10:25:35.857
> 
> 标签：css, dom, css-transforms

想要的效果是有 2 个垂直的 dom 元素，就像一本“弹出式”书。但是，子元素似乎被展平/投影到父平面上。

如果这两个元素是兄弟姐妹，它似乎可以工作。但是，我正在寻找一种方法来为父/子元素实现这一目标。

```
<div class="container">
    <div class="parent" style="height:300px; width:300px;">
      <div class="child" style="height:100px; width:10px;">

      </div>
    </div>
</div>

.container {
  perspective: 1000;
  -moz-perspective: 1000;
  -webkit-perspective: 1000;
}

.parent {
  transform:rotateX(60deg);
  -moz-transform:rotateX(60deg);
  -webkit-transform:rotateX(60deg);
  background:grey;
}

.child {
  transform:rotateX(-30deg);
  -moz-transform:rotateX(-30deg);
  -webkit-transform:rotateX(-30deg);
  background:red;
  margin: 100px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:47:04.043

我找到了解决方案。

```
.parent {
    overflow: visible !important;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
} 
```

解决了一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:59:04.373

我对父子元素进行了一些修改

```
.parent:before,
.parent:after {
 content: ".";    
 display: block;    
 height: 0;    
 overflow: hidden; 
}
.parent:after {clear: both;}

.child {
 transform:rotate(-7deg);
-moz-transform:rotate(-7deg);
-webkit-transform:rotate(-7deg);
background:red;
margin: -60px 100px 100px 100px;
} 
```

在这里你可以看到小提琴[点击这里](http://jsfiddle.net/Venugopal/WWT5s/)

# ssl - 为 LDAPS 通信删除证书时，JNDI 调用不会失败

> ID：15679383
> 
> 赞同：1
> 
> 时间：2013-03-28T10:25:38.933
> 
> 标签：ssl, active-directory, ldap, jndi, openldap

我们需要通过 JNDI 支持所有目录登录的 LDAPS

已将“javax.net.ssl.trustStore”设置为我需要的信任库，并将证书添加到受信任的 java 密钥库。

首次导入任何证书时，JNDI 调用成功。但是 JNDI 不会接收对密钥库的进一步更新，例如更新或删除它。我们正在尝试与 Microsoft AD 服务器进行通信。

该代码在码头网络应用程序中运行，重新启动网络应用程序以获取最新的密钥库数据是不可能的。

有什么办法可以解决重载问题？

问候，

比诺伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:53:08.913

您可以创建一个 ReloadableX509TrustManager。

如下所示：http: [//jcalcote.wordpress.com/2010/06/22/managing-a-dynamic-java-trust-store/](http://jcalcote.wordpress.com/2010/06/22/managing-a-dynamic-java-trust-store/)

# c# - 为设定的周数创建一个灯具列表

> ID：15679385
> 
> 赞同：3
> 
> 时间：2013-03-28T10:25:41.137
> 
> 标签：c#, asp.net, random, fixtures

我在论坛上看到了一些例子，但它们似乎不能满足我的需要。

我正在考虑为足球联赛创建一个随机生成的赛程表。

我有 38 个比赛周，联盟中有 2 到 20 支球队（全是偶数）。我需要的是关于如何创建列表的逻辑。

我想创建一个如下所示的列表：

```
Gameweek 1

A v B
C v D
E v F

Gamweeek 2

A v C
D v E
F v B 
```

有人对我如何创建这个有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:45:45.300

这听起来像是一道数学题！具体来说，排列（带有一些递归）。以下是我通过快速谷歌搜索找到的一些示例：

[http://www.codeguru.com/vb/gen/vb_misc/algorithms/article.php/c5607/Permutations-in-Visual-Basic--Generating-All-Possible-Combinations.htm](http://www.codeguru.com/vb/gen/vb_misc/algorithms/article.php/c5607/Permutations-in-Visual-Basic--Generating-All-Possible-Combinations.htm)

[http://www.vb-helper.com/howto_2005_permute.html](http://www.vb-helper.com/howto_2005_permute.html)

[在 VB .NET 中生成所有真实组合](https://stackoverflow.com/questions/9976215/generate-all-real-combinations-in-vb-net)

这个例子应该让你开始。最后一个似乎更适合您想要做的事情。如果您在途中遇到困难，请回帖。

# php - 致命错误：未捕获的异常“Google_IOException”

> ID：15679393
> 
> 赞同：0
> 
> 时间：2013-03-28T10:26:01.147
> 
> 标签：php, google-api-client

我正在尝试制作一个用于列出谷歌用户的用户的 php 代码。我遵循了一个[youtube 教程并尝试了](http://www.youtube.com/watch?v=SScwYK-te-g)[这个](http://25labs.com/tutorial-implementing-google-api-using-oauth-2-0-in-php/)中提出的解决方案 但是当我调用验证方法时我仍然遇到这个烦人的错误：

```
Fatal error: Uncaught exception 'Google_IOException' with message 'HTTP Error: (0) couldn't connect to host' in D:\xampp\htdocs\yac\proxy\lib\google-api-client\io\Google_CurlIO.php:128 Stack trace: #0 D:\xampp\htdocs\yac\proxy\lib\google-api-client\auth\Google_OAuth2.php(103): Google_CurlIO->makeRequest(Object(Google_HttpRequest)) #1 D:\xampp\htdocs\yac\proxy\lib\google-api-client\Google_Client.php(131): Google_OAuth2->authenticate(Array, NULL) #2 D:\xampp\htdocs\yac\proxy\contacts.php(36): Google_Client->authenticate() #3 {main} thrown in D:\xampp\htdocs\yac\proxy\lib\google-api-client\io\Google_CurlIO.php on line 128 
```

这是我的 PHP 代码：

```
<?php
session_start();

require_once 'lib/google-api-client/Google_Client.php';

$client = new Google_Client();
$client->setApplicationName("Contactoos");
$client->setClientId('*************************************');
$client->setClientSecret('*********************************');
$client->setScopes(array('http://www.google.com/m8/feeds'));
$client->setRedirectUri('http://localhost/yac/proxy/contacts.php');
$client->setAccessType('online');

if(isset($_GET['code']))
{
echo "here";
    $client->authenticate();
    $_SESSION['token'] = $client->getAccessToken();
    header('location:http://localhost/yac/proxy/contacts.php');
}

if(!isset($_SESSION['token']))
{
    $url = $client->createAuthUrl();

    ?>
    <a href="<?=$url;?>"> List google contacts</a>
    <?php
}
else
{
    $client->setAccessToken($_SESSION['token']);
}

?> 
```

正如我所说，我尝试了第二个教程中提出的解决方案，但徒劳无功。

有谁知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T12:41:31.113

您的服务器似乎在连接到 www.googleapis.com 时出现问题。您将需要检查您的网络连接。

查看您是否能够从该计算机访问[https://www.googleapis.com/discovery/v1/apis 。](https://www.googleapis.com/discovery/v1/apis)

如果您使用的是代理，则需要添加`curl_setopt($ch, CURLOPT_PROXY, 'your-proxy-settings');`到`Google_CurlIO.php`.

我在*第 111 行*添加了它，之后`curl_setopt($ch, CURLOPT_USERAGENT, $request->getUserAgent());`

# mongodb - Mongodb导入导出为csv

> ID：15679398
> 
> 赞同：10
> 
> 时间：2013-03-28T10:26:24.907
> 
> 标签：mongodb

尝试从命令行 (MongoDB) 导入或导出时： 例如：

```
> mongoimport --db denistest --collection things --type csv --file C:/Users/Administrator/Desktop/csv_data.csv 
```

我收到“ *JavaScript 执行失败：SyntaxError: Unexpected identifier* ”错误？

这里有什么问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-30T11:18:37.713

我终于找到了问题所在。我在 mongo.exe 中执行我的命令。（我打开 C:\mongodb\bin>mongo 并执行了我的命令）

```
C:\mongodb\bin>mongo
MongoDB shell version: 2.4.0
connecting to: test
>
> mongoimport --db denistestcsv --collection things --type csv --fields First,La
st,Visits,Location,Number,Url,Letter --file E:\temp\csv1.csv 
```

但这是错误的。正确的方法是去mongo => bin => 然后不输入mongo.exe就执行命令

```
C:\mongodb\bin>mongoimport --db denistestcsv --collection things --type csv --fi
elds First,Last,Visits,Location,Number,Url,Letter --file E:\temp\csv1.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:50:01.940

使用您的示例数据，保存到一个名为`csv1.csv`：

```
"denis","omeri","21","Tirana","1","http:/google.com","m" 
"olgert","llojko","20","Prrenjas","2","http:/facebook.com","m" 
```

我运行了以下命令行（为了便于阅读，在这里拆分，使用虚构的字段名称）：

```
mongoimport --db test 
    --collection things 
    --type csv 
    --fields First,Last,Visits,Location,Number,Url,Letter 
    --file d:\temp\csv1.csv 
```

它成功导入：

```
connected to: 127.0.0.1
Thu Mar 28 07:43:53.902 imported 2 objects 
```

在`things`数据库中：

```
> db.things.find()
{ "_id" : ObjectId("51543b09d39aaa258e7c12ee"), 
     "First" : "denis", "Last" : "omeri", "Visits" : 21, 
     "Location" : "Tirana", 
     "Number" : 1, "Url" : "http:/google.com", "Letter" : "m" }
{ "_id" : ObjectId("51543b09d39aaa258e7c12ef"), 
     "First" : "olgert", "Last" : "llojko", "Visits" : 20, 
     "Location" : "Prrenjas", 
     "Number" : 2, "Url" : "http:/facebook.com", "Letter" : "m" } 
```

（由于某种原因，我无法在 2.4 中为 CSV 文件获取标题行选项，但在命令行上指定字段的选项也可以使用。您还可以使用仅包含字段名称的文件使用命令行`fieldFile`选项）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T04:24:15.040

根据 Dennis Omeri 的回答，我在尝试通过 CLI 与 mongolab MongoDB 实例建立远程连接时遇到了类似的问题。我也必须从 MongoDB 的文件夹中运行命令`bin`，但这并不像他的回答看起来那么简单。

就我而言，我`mongodb`是通过 OSX 上的 homebrew 安装的（`brew install mongodb`假设你已经安装了 homebrew）。这将我的 mongo 系统文件放入：（`/usr/local/cellar/mongodb/3.0.3/bin`在您的 mongo 版本中，路径应该是好的）。

然后，找到以下项目：

*   mongolab URL（应该类似于 ds123456-a.mongolab.com）
*   端口号（可能是 27799 或 2####）
*   数据库用户（您必须在 mongolab 中进行设置）
*   数据库密码（也可以在 mongolab 中设置）

然后，您可以使用以下字符串连接到 mongolab
`mongo ds123456.mongolab.com:27799/dbname -u dbuser -p dbpassword`

另请注意：就我而言，我通过 Heroku 插件设置了 mongolab。这意味着您必须通过 heroku 仪表板进行身份验证才能访问您的 mongolab db 用户/密码设置区域。在我能找到的任何地方都没有真正记录这些内容，所以我添加了这个答案来帮助下一个徘徊在这个烂摊子中的灵魂。

# java - 我制作了这个程序，它打印了一个额外的东西

> ID：15679399
> 
> 赞同：0
> 
> 时间：2013-03-28T10:26:33.193
> 
> 标签：java, loops, printing, linked-list

程序在 main 中使用 while 循环菜单来请求用户命令：

```
public static void main(String[] args)throws Exception
{
    Boolean meow = true;

    while(meow)
    {
        System.out.println("\n  1\. Show all records.\n"
            + "  2\. Delete the current record.\n"
            + "  3\. Change the first name in the current record.\n"
            + "  4\. Change the last name in the current record.\n"
            + "  5\. Add a new record.\n"
            + "  6\. Change the phone number in the current record.\n"
            + "  7\. Add a deposit to the current balance in the current record.\n"
            + "  8\. Make a withdrawal from the current record if sufficient funds are available.\n"
            + "  9\. Select a record from the record list to become the current record.\n"
            + " 10\. Quit.\n");
        System.out.println("Enter a command from the list above (q to quit): ");
        answer = scan.nextLine();
        cmd.command(answer);
        if(answer.equalsIgnoreCase("10") || answer.equalsIgnoreCase("q"))
        {
            meow = false;
        }

    }
} 
```

如果您选择的命令实际上都不是菜单上的命令，则会发生这种情况：

```
else
        {
            System.out.println("Illegal command");
            System.out.println("Enter a command from the list above (q to quit): ");
            answer = scan.nextLine();
            command(answer);
        } 
```

每当我添加一个新人或使用任何需要我按回车键完成输入值的命令时，我都会得到 else 语句，然后是常规命令请求。

所以它看起来像：

```
Enter a command from the list above (q to quit): 
Illegal command
Enter a command from the list above (q to quit): 
```

当这件事发生时。

不会在这里发布我的完整代码，我害怕它，因为它太多了。取而代之的是它们的粘贴箱。

*   我的完整主要课程： http: [//pastebin.com/rUuKtpXb](http://pastebin.com/rUuKtpXb)
*   我的完整非主课：http: [//pastebin.com/UE4H76Cd](http://pastebin.com/UE4H76Cd)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:46:34.683

问题是类似的东西`Scanner::nextDouble`不读取换行符，所以下一个`Scanner::nextLine`返回一个空行。

替换所有出现的`Scanner::nextLine`with`Scanner::next`应该可以解决它。

您也可以`Scanner::nextLine`在最后一个非`nextLine`下一个方法之后执行一个，但这有点混乱。

我建议的其他一些事情：

1.  `scan.useDelimiter("\n");`在程序的开头添加，在一行中添加空格进行测试，你会明白为什么需要这样做。

2.  更改`println`为`print`，因此可以在同一行输入命令。IE：

    改变

    ```
    System.out.println("Enter a command from the list above (q to quit): ");` 
    ```

    到

    ```
    System.out.print("Enter a command from the list above (q to quit): "); 
    ```

3.  改变这个：

    ```
    else
    {
        System.out.println("Illegal command");
        System.out.println("Enter a command from the list above (q to quit): ");
        answer = scan.nextLine();
        command(answer);
    } 
    ```

    到：

    ```
    else System.out.println("Illegal command"); 
    ```

    您将再次打印菜单，但您将避免不必要的递归。避免再次打印菜单很容易。

4.  最好在运行**之前**`command`检查退出（然后您可以删除该签入`command`）。

    ```
    System.out.println("Enter a command from the list above (q to quit): ");
    answer = scan.nextLine();
    if (answer.equalsIgnoreCase("10") || answer.equalsIgnoreCase("q"))
        meow = false;
    else
        cmd.command(answer); 
    ```

5.  更改`Boolean`为`boolean`。`Boolean`是 的包装类`boolean`，在这种情况下不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:44:40.990

也许它`\n`在 while 循环结束时和再次输入之前留在缓冲区中。也许

```
while(meow)

{
  scan.nextLine(); 
```

这可以帮助删除它。

# c# - 在 c# 中使用 opxnxml 进行文字处理的一行中的不同样式

> ID：15679402
> 
> 赞同：3
> 
> 时间：2013-03-28T10:26:41.990
> 
> 标签：c#, openxml, openxml-sdk, wordprocessingml

我使用下面的代码将两种不同的字符样式应用于一段的两次运行：

```
 Paragraph heading = new Paragraph();
            ParagraphProperties heading_pPr = new ParagraphProperties();
            heading.Append(heading_pPr);

            Run Run1 = new Run() { RsidRunProperties = "009531B2" };
            Text Text_Run1 = new Text("THIS IS TEST RUN 1");
            Run1.Append(Text_Run1);
            RunProperties rpr_Run1 = new RunProperties();
            rpr_Run1.RunStyle = new RunStyle() { Val = "CharacterStyle1" };

            Run Run2 = new Run();
            RunProperties rpr_Run2 = new RunProperties();
            rpr_Run2.RunStyle = new RunStyle() { Val = "CharacterStyle2" };
            Text text_Run2 = new Text("THIS IS TEST RUN 2");
            Run2.Append(text_Run2);

            heading.Append(Run1);
            heading.Append(Run2);
            body.Append(heading); 
```

但是在运行代码之后，在 word 文件中，这些运行得到了**Normal**样式。我可以将段落样式应用于段落，但我无法应用字符样式来运行，我的代码哪里出错了？

*综上所述：*

如何将字符样式应用于运行以及如何使用不同样式运行的段落？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:11:08.373

您需要在其属性部分中指定段落的格式，否则它将回退到文档的默认值，在这种情况下为`Normal`. 如果您的自定义样式未保存到文档的样式部分，也可能会发生这种情况。

将您的代码更改为：

```
Paragraph heading = new Paragraph();
ParagraphProperties heading_pPr = new ParagraphProperties();
heading.Append(heading_pPr);
ParagraphMarkRunProperties headingParagraphMarkRunProperties = new ParagraphMarkRunProperties();
RunStyle runStyle1 = new RunStyle(){ Val = "CharacterStyle1" };

headingParagraphMarkRunProperties.Append(runStyle1);
heading_pPr.Append(headingParagraphMarkRunProperties); 
```

这将使您的段落能够采用您的自定义格式。您仍然需要将单个样式应用于`run`元素以更改其格式，就像您在其余代码中所做的那样。

# sql - ISNull() 列名时无法检索替换值中的空值

> ID：15679405
> 
> 赞同：0
> 
> 时间：2013-03-28T10:27:04.470
> 
> 标签：sql, sql-server

我在存储过程中使用 Sql Server 2012 isNull(@parameter,ColumnName)

当我发送带有空值的参数时，它返回没有空值的列

我需要用列检索空值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:30:05.167

[`ISNULL()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)：

> 用指定的替换值替换 NULL。

因此，如果您的@parameter 为空，您将获得替换作为返回值，即 ColumnName。

该[文档](http://msdn.microsoft.com/en-us/library/ms184325.aspx)指出以下内容：

> **ISNULL（检查表达式，替换值）**
> 
> 返回与 check_expression 相同的类型。如果提供文字 NULL 作为 check_expression，则返回 replacement_value 的数据类型。如果提供了文字 NULL 作为 check_expression 并且没有提供 replacement_value，则返回一个 int。

# python - Python：创建子目录列表

> ID：15679406
> 
> 赞同：0
> 
> 时间：2013-03-28T10:27:07.610
> 
> 标签：python

我尝试将目录的子目录列表放入列表中。

我使用该代码：

```
import os

for dirname, dirnames, filenames in os.walk("W:/test"):
  # print path to all subdirectories first.
  for subdirname in dirnames:
      a= os.path.join(dirname, subdirname)

liste = []
liste.append(a)
print liste 
```

问题是我的所有子目录都没有进入我的列表**“liste”**

你有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:28:44.650

您需要`liste.append`在循环内调用。

```
import os
liste = []
for root, dirs, files in os.walk(path):
    for subdir in dirs:
        liste.append(os.path.join(root, subdir))

print(liste) 
```

# java - java.lang.NumberFormatException：空

> ID：15679411
> 
> 赞同：1
> 
> 时间：2013-03-28T10:27:44.863
> 
> 标签：java, html, jsp, jdbc

我创建了一个登录表单，其中包含每个字段的验证。当我单击提交按钮时，将调用函数 validation() 来验证所有字段，并在成功验证后重定向到另一个 jsp 页面，所有详细信息都将插入到 Oracle 数据库中。

但我收到“org.apache.jasper.JasperException：java.lang.NumberFormatException：null”异常。此外，“服务器遇到了一个内部错误（），导致它无法完成此请求”错误。我希望你能帮助我。

这是代码：

```
<html>
    <head>
    <script type="text/javascript">
    function validate()
    {

        if(document.frm.username.value=="")
        {
          alert("Please enter Username");
          document.frm.username.focus();
        }

        else if(document.frm.mobile.value=="")
         {       
            alert("Please Enter your contact number");
            document.frm.mobile.focus();
         } 

       else
       {
        window.location = "insert.jsp";
       }
     }
</script>
    </head>

    <body>
    <form name="frm">
    <table>
    <tr><td>User Name:</td><td><input type="text" name="username"></td></tr>
    <tr><td>Contact Number:</td><td><input type="text" name="mobile"></td></tr>
    <tr><td><input type="submit" value="Submit" onclick="validate()"></td><td></td></tr>
    </table>
    </form>
    </body> 
```

**插入.jsp：**

```
 <body>
             <%@page import="java.sql.*"%>
             <%@page import="java.util.*"%>
    <%
    Connection con=null;
    int mobile=Integer.parseInt(request.getParameter("mobile"));
    String username=request.getParameter("username");
    try{
         Class.forName("oracle.jdbc.driver.OracleDriver");
        con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","manager");

    Statement st=con.createStatement();
    st.executeUpdate("insert into stud values("+mobile+",'"+username+"')");
    out.println("Data is successfully inserted!");

      }

     catch(Exception e)
    {
       System.out.print(e);
    }
    %>
        </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:32:23.753

您正在重定向浏览器以执行`GET`on `insert.jsp`，但您没有向该新 URL 提供请求参数。因此，您的 JSP 获取`mobile`请求参数，即`null`，然后尝试将其解析为整数，从而产生`NumberFormatException`.

您可以做的是将请求参数附加到 URL，如下所示：

```
window.location = "insert.jsp?mobile=" + document.frm.mobile.value + "&username=" + document.frm.username.value; 
```

但最好在`POST`请求中提交这些值，而不是在`GET`. 我认为您可以通过向标签添加`action="insert.jsp"`属性、将属性更改为并删除`form``onClick``onSubmit`

```
 else {
    window.location = "insert.jsp";
 } 
```

因为这将允许浏览器恢复其正常的表单提交。`return false;`如果您在关注空字段后将其与语句结合起来，您将阻止浏览器提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:31:05.450

那么，如果您的手机号码为空，会发生什么？

```
 int mobile=Integer.parseInt(request.getParameter("mobile")); 
```

您要求`Integer.parseInt()`解析一个空字符串或空字符串，这导致了您的问题。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)：

> 抛出： NumberFormatException - 如果字符串不包含可解析的整数。

您需要检查是否`mobile`已填充并且/或者在未填充时处理该场景。

顺便说一句，我不会使用 an`Integer`来存储手机号码。位数可能会导致溢出和/或您可能想要维护结构（例如国家代码和数字）等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:35:05.510

首先，您的代码非常危险。您应该在服务器端检查 null 或空！使用 PreparedStatement 而不是 Statement。

其次，代码`window.location = "insert.jsp";`不会像您期望的那样工作。使用 action="insert.jsp" 将数据发送到该页面。然后，在你的 js 函数上，如果它不通过条件，则返回 false，否则，返回 true；

使用 onSubmit="return validate()" 而不是 onClick 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:30:26.900

如果您正在使用`parseInt()`，则应该在某处捕获异常：

```
int mobile;
try {
  mobile = Integer.parseInt(request.getParameter("mobile"));
} catch (NumberFormatException e) {
  // do something
} 
```

在您的情况下，`request.getParameter("mobile")`可能返回 null。

**编辑：**正如其他已经指出的那样 - 将电话号码存储在整数中可能不是一个好主意。试试`Long`吧。

# c - 向 pthread 发送信号以中止睡眠

> ID：15679429
> 
> 赞同：1
> 
> 时间：2013-03-28T10:28:58.117
> 
> 标签：c, linux, pthreads, signals

我有一个 pthread 函数，它大部分时间都在睡觉，`usleep()` 我想从主进程向线程发送信号以有时中断睡眠。

问题是我找不到确切使用哪个信号发送的任何参考`pthread_kill()`

手册页，`usleep()`指出`SIGALRM`不应与`usleep()`

我是否需要使用特定的信号，没关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T10:37:56.957

线程之间同步的工具不是信号和`usleep`（或`nanosleep`），而是`pthread_mutex_t`和的组合`pthread_cond_t`。只需让您的线程等待一个条件（这可以通过超时来完成）并让您的`main`线程在条件变量上发送一个“信号”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:37:34.667

`usleep``EINTR`在传递给线程/进程的每个信号上返回。你可能最好使用`SIGUSR`信号。

此外，`usleep`现在已过时：考虑`nanosleep`改用。作为额外的奖励，您将知道在传递信号时剩余的睡眠时间。

# regex - 如何用perl中的_替换字符串中的空格和制表符？

> ID：15679433
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:11.417
> 
> 标签：regex, perl

```
$string = I am a boy 
```

如何用下划线替换单词之间的空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:30:24.467

您需要一个正则表达式和替换运算符来做到这一点。

```
my $string = 'I am a boy';
$string =~ s/\s/_/g; 
```

[您可以在perlre](http://perldoc.perl.org/perlre.html)和[perlretut](http://perldoc.perl.org/perlretut.html)中了解有关正则表达式的更多信息。一个很好的工具是[Rubular](http://rubular.com/)。

* * *

此外，您的代码将无法编译。您需要引用您的字符串，并且需要在末尾放置一个分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:30:14.477

```
$string = 'I am a boy';
$string =~ s/ /_/g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:22:38.217

```
$string =~ tr( \t)(_);  # Double underscore not necessary as per Dave's comment 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T18:27:45.317

**这只是为了在 perl 中显示另一个选项。** 我认为`Miguel Prz`并`imbabque`展示了更聪明的方式，我个人遵循`imbabque`展示的方式。

```
my $str = "This is a test string";
$str =~ s/\p{Space}/_/g;
print $str."\n"; 
```

**输出是**

```
This_is_a_test_string 
```

# java - 尝试使用现有的 Logger 对象，但得到 错误？

> ID：15679436
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:19.580
> 
> 标签：java, logging

我的项目中使用了 Java 日志记录 API。他们在 A 类的构造函数中使用记录器，例如：

```
public A(Context context) { 
  log_ = (Logger) context.getAttribute(LOGGER);
} 
```

我必须为没有构造函数的类实现它......我试图制作该类的对象，如：

```
Class B { 
  B b; 
} 
```

并尝试使用像这样的记录器：

```
log_ = (Logger) b.getAttribute(LOGGER); 
```

但我一直`<identifier expected>`在这一行得到错误？这里有什么错？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:39:43.660

您不能将任意语句直接放在类定义中（实际上它是一个*定义*）。您可以初始化您的成员字段

1.  在构造函数中（每个类至少有一个构造函数，如果您没有明确编写一个构造函数，编译器将添加一个不带参数的*默认构造*函数）
2.  直接在定义时
3.  懒惰地使用类似的方法`getLogger()`

（有效）Java 代码中说明的所有三个选项：

```
class B {

  Context ctx = Context.getDefault();
  Logger log = ctx.getLogger();

  B(Context ctx) {
    log = ctx.getLogger();
  }

  Logger logger() {
    return ctx.getLogger();
  }
} 
```

# jquery - 如何捕获所有子元素的点击？

> ID：15679438
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:27.357
> 
> 标签：jquery

问题很简单，但我不能这样做......这是我的代码：

```
jQuery('nav').on('click', 'a',  function(event){
    console.log(jQuery(this));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:31:42.597

`nav`必须是 class 或 Id ， nav 似乎不是标准标签

如果它是一个类名

```
jQuery('.nav').on('click', 'a',  function(event){
    console.log(jQuery(this));
}); 
```

如果它是一个 ID

```
jQuery('#nav').on('click', 'a',  function(event){
    console.log(jQuery(this));
}); 
```

这里有现场演示：http: [//jsfiddle.net/netme/hx8HR/](http://jsfiddle.net/netme/hx8HR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:37:25.440

您的代码看起来不错....但我认为您缺少该`document.ready`功能

尝试这个

```
jQuery(function(){  //ready function
  jQuery('nav').on('click', 'a',  function(event){
    console.log(jQuery(this));
  });
}); 
```

# sql - 将 const 值添加到 sql 查询结果

> ID：15679439
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:27.713
> 
> 标签：sql, oracle

我有一个查询：

```
SELECT * FROM table(i#1040_inv_adj_fn('123')) 
```

如何添加常量值？此示例不起作用：

```
SELECT *, 'John' Name FROM table(i#1040_inv_adj_fn('123')) 
```

错误：

```
ORA-00923: FROM keyword not found where expected
00923\. 00000 -  "FROM keyword not found where expected"
*Cause:    
*Action:
Error at Line: 1 Column: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:31:26.380

由于您没有告诉我们错误是什么，我们必须猜测。我的猜测是您需要表函数的别名，否则`*`不合法：

```
SELECT  t.*, 
        'Name' as John  
FROM table(i#1040_inv_adj_fn('123')) t 
```

# c# - 我的问题是关于处理多个背景工作者和多个进度条

> ID：15679443
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:33.930
> 
> 标签：c#, winforms, progress-bar, backgroundworker

我的主要问题是，当我在 flowLayoutPanel1 上为每个请求动态添加进度条时，如何从backgroundWorker1_ProgressChanged 事件中增加正确的进度条值

当用户单击开始按钮时，我将调用后台工作者的 RunWorkerAsync 函数....很好。在这里，我正在编写示例代码并尝试显示我的问题。

我的表单有一个文本框、一个按钮和一个带有 FlowDirection 自上而下的 flowLayoutPanel1。

当用户在文本框中输入任何 url 并单击开始按钮时，我将使用 BackGroundWorker 开始文件下载，并在 flowLayoutPanel1 上动态添加一个进度条。一次可以下载10个文件。因此，当用户一个接一个地输入十个网址并单击提交按钮时，十个文件将在后台下载。

我的问题是如何从 backgroundWorker1_ProgressChanged 事件中正确增加 10 个进度条进度另一个问题是当任何文件下载完成时，已创建它的进度条将从面板中删除

这是我的完整代码。请看看并告诉我我需要做什么来完成我的任务。如果有人看到我的代码中可能出现死锁的问题，那么也请指导我如何避免死锁。这是我的代码

```
public partial class Form1 : Form
    {
        static int pbCounter = 1;

        public Form1()
        {
            InitializeComponent();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            ProgressBar pb = new ProgressBar();
            if (pbCounter <= 10)
            {
                pb.Width = txtUrl.Width;
                flowLayoutPanel1.Controls.Add(pb);
                pbCounter++;

                System.ComponentModel.BackgroundWorker backgroundWorker1 = new System.ComponentModel.BackgroundWorker();

                backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
                backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
                backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);

                backgroundWorker1.RunWorkerAsync();
            }
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            // Get the BackgroundWorker that raised this event.
            System.ComponentModel.BackgroundWorker worker = sender as System.ComponentModel.BackgroundWorker;

            // Assign the result of the computation
            // to the Result property of the DoWorkEventArgs
            // object. This is will be available to the  
            // RunWorkerCompleted eventhandler.
            //#e.Result = ComputeFibonacci((int)e.Argument, worker, e);
        }

        // This event handler deals with the results of the
        // background operation.
        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            // First, handle the case where an exception was thrown.
            if (e.Error != null)
            {
                MessageBox.Show(e.Error.Message);
            }
            else if (e.Cancelled)
            {
                //# "Canceled";
            }
            else
            {
                pbCounter--;
                // Finally, handle the case where the operation  
                // succeeded.
                //#resultLabel.Text = e.Result.ToString();
            }
        }

        // This event handler updates the progress bar.
        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            this.progressBar1.Value = e.ProgressPercentage;
        }

    } 
```

## 我更新的部分

```
 public partial class Form1 : Form
    {
        static int pbCounter = 1;

        public Form1()
        {
            InitializeComponent();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            ProgressBar pb = new ProgressBar();
            if (pbCounter <= 10)
            {
                //pb.Step = 10;
                pb.Minimum = 0;
                //pb.Maximum = 100;
                pb.Width = txtUrl.Width;
                flowLayoutPanel1.Controls.Add(pb);
                pbCounter++;

                MyBackgroundWorker backgroundWorker1 = new MyBackgroundWorker();
                backgroundWorker1.pbProgress = pb;
                backgroundWorker1.WorkerReportsProgress = true;   
                backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
                backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
                backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);

                backgroundWorker1.RunWorkerAsync(txtUrl.Text);
            }
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            int input = int.Parse(e.Argument.ToString());
            for (int i = 1; i <= input; i++)
            {
                Thread.Sleep(2000);
                 (sender as MyBackgroundWorker).ReportProgress(i * 10);
                 if ((sender as MyBackgroundWorker).CancellationPending)
                {
                    e.Cancel = true;
                    return;
                }
            }
        }

        // This event handler deals with the results of the 
        // background operation. 
        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            // First, handle the case where an exception was thrown. 
            if (e.Error != null)
            {
                MessageBox.Show(e.Error.Message);
            }
            else if (e.Cancelled)
            {
                //# "Canceled";
            }
            else
            {
                ProgressBar pb = (sender as MyBackgroundWorker).pbProgress;
                if (pb != null)
                {
                    //pb.Value = 100;
                    //pb.Update();

                    while (pb.Value <= pb.Maximum)
                    {
                        //Thread.Sleep(1000);
                        flowLayoutPanel1.Controls.Remove(pb);
                        break;
                    }

                }
                // Finally, handle the case where the operation  
                // succeeded.
            }
        }

        // This event handler updates the progress bar. 
        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            ProgressBar pb = (sender as MyBackgroundWorker).pbProgress;
            pb.Refresh();

            //if (e.ProgressPercentage < pb.Maximum)
            //    pb.Value = e.ProgressPercentage + 10;

            pb.Value = e.ProgressPercentage ;
            Application.DoEvents();

        }

    }

public class MyBackgroundWorker : System.ComponentModel.BackgroundWorker
    {
        public ProgressBar pbProgress = null;
        public MyBackgroundWorker()
        {
        }

        public MyBackgroundWorker(string name)
        {
            Name = name;
        }

        public string Name { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:50:46.543

这是一种方法——

创建自己的继承自 BackgroundWorker 的类，添加 ProgressBar 类型的公共变量。

每次动态添加 BackgroundWorker 和 Progressbar 时，将 progressbar 对象传递给您的类。

您的派生类 -

```
public class MyBackgroundWorker : BackgroundWorker
{
    public ProgressBar pbProgress = null;

    public void BackgroundWorker()
    {
    }
} 
```

按钮事件代码 -

```
private void btnStart_Click(object sender, EventArgs e)
{
    ProgressBar pb = new ProgressBar();
    if (pbCounter <= 10)
    {
        pb.Width = txtUrl.Width;
        flowLayoutPanel1.Controls.Add(pb);
        pbCounter++;

        MyBackgroundWorker backgroundWorker1 = new MyBackgroundWorker();
        backgroundWorker1.pbProgress = pb;

        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);

        backgroundWorker1.RunWorkerAsync();
    }
} 
```

进度改变事件 -

```
 private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        (sender as MyBackgroundWorker).pbProgress.Value = e.ProgressPercentage;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:52:58.223

首先声明一个全局字典和一个GetInstance方法来访问表单实例

```
public partial class Form1 : Form
{
Dictionary<String, ProgressBar> progressBars = new Dictionary<String, ProgressBar>();

static Form1 _form1 = null;

static int pbCounter = 1;

public Form1()
{
    InitializeComponent();
    _form1 = this;
}

public static Form1 GetInstance() {
    return _form1;
} 
```

然后使用您获得的每个网址，您必须为每个网址创建 pb，只需将它们添加到此字典中

```
progressBars.Add("file1", pb1);
progressBars.Add("file2", pb2);
progressBars.Add("file3", pb3);
progressBars.Add("file4", pb4); 
```

在 form.cs 中创建一个函数，您可以在其中传递进度条，然后您可以手动设置它的值。

```
public void ProgessReport(ProgressBar pb, int value) 
        {
            if (pb.InvokeRequired) 
            {
                pb.Invoke(new MethodInvoker(delegate { ProgessReport(pb, value); }));
            } else 
            {
                pb.Value = value;
            }
        } 
```

现在从你下载文件的地方你只需要调用

```
Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file1"], 10);
Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file1"], 20);
Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file1"], 100);

and when your second file downloads then

Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file2"], 10);
Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file2"], 20);
Form1.GetInstance().ProgessReport(Form1.GetInstance().progressBars["file2"], 100); 
```

像这样 ..

# c# - 使用电子邮件地址将文件上传到云端

> ID：15679444
> 
> 赞同：1
> 
> 时间：2013-03-28T10:29:37.997
> 
> 标签：c#, .net, cloud, google-drive-api

所以我不确定这是否可能以及是否有意义。我正在尝试在我的应用程序中学习和使用云空间。因此，作为一个示例，我试图创建一个应用程序来在 Google Drive 中上传文件。我注册了我的应用程序并使用了谷歌提供的一些参考资料。我现在可以上传文件了。

`myname@gmail.com`我使用`Client_Id`并`Client_Secret`在我的帐户中注册了我的应用程序以创建应用程序。当我上传文件时，文件会上传到我的`myname@gmail.com`帐户。但我想要的是，我的应用程序应该为用户提供登录`gmail`帐户的选项。无论谁登录（例如使用电子邮件`your@gmail.com`），我的应用程序都应该能够将文件上传到该帐户。我相信桌面版离线 Google Drive 应用程序的工作方式相同。输入您的用户名和密码，文件将同步到该帐户。任何人都可以指出我的示例代码吗？

我想上传文件，阅读它们，删除它们，通过我的应用程序分享它们。我没有提供任何代码示例，但如果需要，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:04:39.087

你能行的。您需要将用户导航到特定的 URL，他将在其中输入他的电子邮件和密码。之后谷歌会给你授权码和刷新令牌。刷新令牌可用于在过期时检索授权码。此授权代码用于与用户驱动器一起使用。

如果您的应用程序是 Web 应用程序，您可以将用户导航到 google 并将回调设置为您的自定义 URL。如果它是 Windows 窗体应用程序，那么您有 2 个选项

1.  创建自定义浏览器窗口并解析 DocumentTitle 属性
2.  导航用户的浏览器并要求他从标题中复制粘贴代码（或自动执行）

[你可以从这里下载一个例子](https://docs.google.com/file/d/0BxaaWRn33f-GTW9KaTBHNnNxOXM/edit?usp=sharing)

只需填充`CLIENT_ID`和`CLIENT_SECRET`常量。

# caching - 分布式对象缓存框架和基于键的依赖项

> ID：15679445
> 
> 赞同：4
> 
> 时间：2013-03-28T10:29:38.570
> 
> 标签：caching, distributed-caching

我一直在研究几个缓存框架。即**Memcached/Couchbase、AppFabric、Redis、MongoDB**

好的.. 其中一些实际上是缓存框架，另一些是“文档存储”。

**现在问题来了……** 我经常遇到我根本不知道所有缓存键（例如所有缓存的产品）但例如我想确保所有缓存的产品都被驱逐的情况。使用 Runtime.MemoryCache 我可以使用***基于密钥的依赖项，例如，它允许我创建一个“产品”密钥，所有其他产品都使用这个密钥作为依赖项***。现在，每当我删除“产品”时，与此密钥相关的所有密钥也会被驱逐。

***不幸的是 MongoDB、Couchbase 和 Redis 没有这样的功能。***至少我找不到任何关于它的信息。Redis 有 KEYS ( [http://redis.io/commands/keys](http://redis.io/commands/keys) ) 命令，但文档告诉您不要在生产环境中使用它。

AppFabric 能够处理依赖关系，但还有其他缺点。例如，如果您使用标签（用作依赖项），您也必须使用区域。但是，如果您使用区域，则会失去高可用性。

**无论如何......我的问题是：这是需要这些依赖项的非常罕见的场景，还是我评估的那些数据库/缓存框架的缺点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T10:51:23.817

简单地回答您的问题：这是您要测试的缓存框架的缺点，而且需要这种依赖关系并不少见。事实上，任何可行的缓存解决方案都必须至少具有与关系或非关系数据存储同步的能力。

正如您所提到的，基于键的依赖项将一个缓存项与缓存中的另一项相关联。当特定项目更改时，它会使相关项目无效。每当从缓存中删除或更新该项目时，关联的对象将过期。基于键的依赖是级联的。例如，如果 key1 依赖于 key2，key2 依赖于 key3，key3 依赖于 key4，那么移除 key4 将导致 key1、key2 和 key3 过期。

除了基于键的依赖项之外，您还可以使用其他依赖项，例如基于文件的（使您的缓存对象依赖于外部文件，如果文件被更新或删除，则缓存中的依赖对象被删除），数据库依赖关系（将缓存项目与数据库同步，因此数据库中的任何更改都会从缓存中删除依赖的缓存对象），自定义依赖关系（您可以根据应用程序逻辑使对象过期）。

[NCache](http://www.alachisoft.com/resources/articles/managing-data-relationships.html)就是这样一款产品，它可以根据您的应用程序需求提供一整套依赖项功能。

# javascript - 笔记本电脑开盖效果

> ID：15679446
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:38.903
> 
> 标签：javascript, jquery, html, css, animation

我**喜欢MacBook 在 WhitePage (** [http://whitepagehq.com](http://whitepagehq.com) ) 主页上打开的方式。我想创造一个类似的效果。

这是使用 CSS Animation、JQuery 还是两者都创建的？我似乎无法从督察那里弄清楚。你在其他地方看过类似的动画吗？

我怎样才能为我的网站制作这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:34:29.333

有两个图像：

```
<img src="lib/img/laptop-closed.png" class="lid-closed"/>
<img src="lib/img/laptop-open.png?1" class="lid-open"/> 
```

`laptop-open.png`动画只涉及在文档就绪时更改图像的高度。

这是使用 jQuery 完成的（在第 126 行的主页中）：

```
setTimeout(function () {
    $('.lid-closed').animate({
        top:10,
        height:9,
        width:840
    }, {
        easing:'linear',
        duration:500
    });

    $('.lid-open').animate({
        height:207
    }, {
        easing:'easeOutQuad',
        duration:1000
    });
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:35:50.647

他们正在使用 jquery 为打开的笔记本电脑图像的高度设置动画：

```
setTimeout(function(){
    $('.lid-closed').animate({
        top: 10,
        height: 9,
        width: 840
    },
    {
        easing: 'linear',
        duration: 500
    });$('.lid-open').animate({
        height: 207
    },
    {
        easing: 'easeOutQuad',
        duration: 1000
    });
},
1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:46:51.890

这段代码是由 jQuery.animate() 方法完成的，你可以在他们的内联 js 脚本中找到它。（查看源代码-> 第 126 行）。基本上，它们会在“关闭”图像的同时改变“打开”图像的高度。打开的图像扩大，盖子的闭合部分向上移动。

# mongodb - 在 symfony2 + 教义中更改运行时的 MongoDB 集合

> ID：15679449
> 
> 赞同：2
> 
> 时间：2013-03-28T10:29:42.917
> 
> 标签：mongodb, symfony, doctrine, mongodb-php, doctrine-mongodb

我正在使用 Symfony2 MongoDB + Doctrine，我想告诉教义将我的对象保存在集合中，其名称与定义对象的类的名称不同。此外，新集合的名称应该是不同集合中对象的 id。例如，我有一个名为 Posts 的类，我想将它们保存在一个以原始 User 集合中的用户 ID 命名的集合中。这意味着我需要告诉教义将所有新帖子保存在一个名为 User555 的集合中，并且我应该能够告诉教义创建这个集合并在运行时保存在那里。

我可以看到我可以通过在文件中配置它来静态更改集合的名称，如下所示：[Storing a document in a different collection - Mongodb with symfony2](https://stackoverflow.com/questions/11757501/storing-a-document-in-a-different-collection-mongodb-with-symfony2)

但我需要能够在运行时创建集合。

如果有人指出我正确的方向，我将不胜感激！

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:45:03.150

当你使用 ORM 时，你可以做

```
$em->getClassMetadata('\AcmeBundle\Entity\Something')->setTableName('test') 
```

使用 ODM 你应该能够做到

```
`$dm->getClassMetadata('\AcmeBundle\Document\Something')->setCollection('test') 
```

我查看了 Doctrine 代码，这是可能的。但是请注意，通过这样做，您将在脚本的整个生命周期内更改用于该文档的集合，除非您将其重新设置。

我不知道一次只为一个实体执行此操作的任何合理方法。可能最好通过创建自己的持久性服务来包装 ODM。

# php - 基于 PHP 会话变量的 Javascript 表单验证

> ID：15679451
> 
> 赞同：1
> 
> 时间：2013-03-28T10:29:44.757
> 
> 标签：php, javascript, validation

我的网站有一个登录区域，登录时我设置了一个会话变量`$_SESSION['logged_in'] = true`。

现在我也有很多表单和东西，用户可以输入评论。显然，在我的 PHP 验证中，我只使用 session 变量检查用户是否登录，但我也想要 javascript 验证，因为我可以让用户体验更流畅。

```
$("body").on("click", ".submit", function(e){
    e.preventDefault();
    if (user == logged in){
        ...AJAX call to php file....
    }
}) 
```

那么人们通常如何做我检查用户是否使用javascript登录的那一点呢？IE `if user == logged in`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:35:46.587

*   您当然可以通过 AJAX（例如使用 JSON）检查用户权限，但这会提供一些额外的延迟。

*   您可以像这样将值写入全局 JS 范围：

    `if ( userIsLogged() ) { echo "<script>document.mysite.userlogged = true;</script>"; }`

    然后你可以检查 document.mysite.userlogged 变量。

*   你也可以在 PHP 中设置一个 cookie，它可以在 JavaScript 中获得。要在 JS 中正确获取 cookie，请参阅：[Javascript getCookie 函数](https://stackoverflow.com/questions/4003823/javascript-getcookie-functions/4004010#4004010)

*   如果你不想注入 JS 代码，你可以设置一些属性，比如：

    `<div id="comments" data-logged="<?php echo $isLogged; ?>"> ... </div>`

    并通过 jQuery 获取：

    `if ( $("#comments").attr('data-logged') == 1 ) {`

*   您可以通过生成 JS 文件为整个页面提供记录/未记录的特定功能，例如：`<script type="text/javascript" src="http://yoursite.com/somefile.php">`并在 php 中动态生成它，但要注意缓存！

如果你想个性化单个块，我个人会去 data-XXX 属性，如果你在 JS 中多次检查记录的条件，我会去全局 JS 变量。

# jquery - Ajax 调用在 pyrocms 中返回“遇到错误 [500] 无法加载请求的文件：default.html”错误

> ID：15679452
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:47.273
> 
> 标签：jquery, ajax, pyrocms

**我有一个 Pyrocms 视图，我在其中使用 jQuery Ajax 调用控制器方法，就像这样**

```
$('#search').click(function(){
var ionum =$('#ionum').val();
var csrf_hash_name = $('input[name=csrf_hash_name]').val();
$.ajax({
          type:"POST",
          url:"admin/ads/filter",
          data:"ionum="+ionum+"&csrf_hash_name="+csrf_hash_name,
          success:function(html){
              alert(html); 
          }
      })
  return false;
}); 
```

但不工作每次它返回这样的错误

```
An Error Was Encountered [ 500 ]  Unable to load the requested file: default.html 
```

我的控制器方法只是回显一个简单的字符串我只是希望它工作之后我将实现我的逻辑控制器方法如下

```
 public function filter(){ 
    $ionum = $this->input->post('ionum');
    echo $ionum;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:41:04.923

您的“url”参数未指向正确的脚本。您正在请求 admin/ads/filter 的相对地址，该地址可能不是 PHP 脚本的位置，或者您的 .htaccess 重写规则有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:48:41.390

实际上我认为这是我写的csrf混乱

```
data:"ionum="+ionum+"&csrf_hash_name="+csrf_hash_name, 
```

通过像这样重新排序使它起作用

```
data:csrf_hash_name="+csrf_hash_name"+"&ionum="+ionum, 
```

我浪费了我的四个小时，我想知道还有其他什么问题，但它只是订购问题。

# python - 在一个 python 脚本中找到的 ssh 变量到另一个 python 脚本，然后执行第二个脚本

> ID：15679454
> 
> 赞同：0
> 
> 时间：2013-03-28T10:29:48.510
> 
> 标签：python, python-2.7

嘿伙计们，我有一个问题。

我正在尝试将在脚本 a 中找到的变量 x 发送到脚本 b，然后使用该变量执行脚本 b。

例子：

脚本

```
x = 10
ssh = paramiko.SSHClient()
ssh.connect(server, username=username, password=password)
ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(x >> scriptB.py)
ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(./scriptB.py) 
```

脚本 b

```
y = x
print y 
```

关于我如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:41:43.713

使用 sys.argv。它为您提供了在命令行上传递的项目列表

```
x = 10
ssh = paramiko.SSHClient()
ssh.connect(server, username=username, password=password)
ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command("./scriptB.py " + str(x)) 
```

脚本 b

```
import sys

y = int(sys.argv[1])
print y 
```

`['./scriptB.py', '10']`sys.argv 将是在这种情况下包含的列表。

# java - Rabbit MQ：提高队列刷新速度

> ID：15679461
> 
> 赞同：0
> 
> 时间：2013-03-28T10:30:00.393
> 
> 标签：java, rabbitmq

我有一个保存持久消息的持久队列。消息以大约每秒 10 条消息的速率进入队列。

客户端无法以该速率获取这些消息。结果，服务器上的队列不断增长。

每条消息小于 1 KB，我在服务器和我的机器之间有一条健康的 2 Mbps 线路。使用网络监控实用程序，我发现它几乎没有使用任何带宽。

到目前为止，客户端对消息什么都不做，只是将它们打印到控制台，因此客户端的处理时间几乎为 0。

其他一些细节：我正在使用 java 客户端。我已将客户端设置为预取 10000 条消息。（也尝试使用默认值）往返时间约为 350 毫秒。消息被单独确认。

可用资源未得到充分利用，我认为每秒 10 条消息几乎没有任何负载。如何加快速度，以便将队列中的消息更快地传输到客户端。可能使用某种批处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:35:17.097

如果您每 350 毫秒单独确认一次消息，我预计消费者每秒可能会收到大约 1/0.35 或大约 2.9 条消息。但是，该协议可能效率不高，它可能需要两次往返服务器才能确认消息并获取下一个消息。即每秒 1.4 条消息可能更现实。

350 毫秒的往返时间非常高，您可以在这段时间内环游世界并再次返回，因此简单的解决方案可能不适合您。例如伦敦 -> 纽约 -> 东京 -> 伦敦。

我会尝试在您的客户本地找一个经纪人。这样，往返就在您的客户和您当地的经纪人之间。

# ios - UICollectionView 方法 deselectItemAtIndexPath 不会取消选择刚刚选定的项目

> ID：15679462
> 
> 赞同：0
> 
> 时间：2013-03-28T10:30:05.143
> 
> 标签：ios, uicollectionview

我想给 UICollectionView 项基本上是一个按钮行为，至少部分地而不是真的想将按钮作为子视图，因为我想利用集合视图的标准选择方法和所涉及的协议。

我想让 item 成为一个开关按钮，虽然它的路径看起来很简单，但它实际上并不起作用。

首先我实施

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

然后我打电话给

```
- (void)deselectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated 
```

从一个单独的委托方法。该方法似乎被正确调用，但项目不会改变选择属性。实际上，在检查项目上的“选定”属性时，从“didSelectItemAtIndexPath”委托方法中，我发现该属性始终为“否”，尽管背景已经相应改变......

有趣的是我不能自己改变这个值，虽然这个属性没有被定义为只读......

有没有人破解过类似的坚果？或者我们可以说这很可能是错误的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:27:43.070

也许在单元格中设置一个 _isSelected BOOL。在单元格的子类中设置为 false

然后在 selectedCellForRow...

```
[cell applySelection]; 
```

在子类单元格中：

```
-(void)applySelection{
if(_isSelected){
   _isSelected=false;
   self.setImage (or whatever you want to do, do signify not selected)
}else{
   _isSelected=true;
   //do whatever to signify selection
} 
```

# android - 解析 xml 时出错：与 Facebook SDK 的未绑定前缀

> ID：15679466
> 
> 赞同：5
> 
> 时间：2013-03-28T10:30:09.057
> 
> 标签：android, facebook, java

我的项目在我的 xml 中无法识别 com.facebook.widget.ProfilePictureView （或其他小部件）。我导入了 facebook sdk，甚至用它来登录并与打开的图形交互。这一切都奏效了，我只是想添加一张个人资料图片，所以最终在 sdk 中使用了这个小部件。

我尝试将 facebooksdk.jar 复制到我的 libs 文件夹并将其添加到构建路径，但仍然是未绑定前缀错误。

我的项目属性还在 facebook sdk 库旁边显示了一个绿色复选标记。

如何使用在 facebook sdk lib 中声明的小部件？

```
<com.facebook.widget.ProfilePictureView <--- unbound here
            android:id="@+id/selection_profile_pic"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:gravity="center_horizontal"
            facebook:preset_size="small" /> 
```

**编辑**

这是整个xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView 
        android:id="@+id/name"
        style="@style/DetailText" 
        android:layout_marginTop="35sp"
        android:textIsSelectable="true"/>

    <com.facebook.widget.ProfilePictureView
            android:id="@+id/selection_profile_pic"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:gravity="center_horizontal"
            facebook:preset_size="small" 
            android:layout_below="@id/name" />

    <Button 
        android:id="@+id/save"
        android:layout_centerHorizontal="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/name"
        android:text="@string/detailview_save"
        android:drawableTop="@drawable/detailview_button_favorieten"
        android:background="@color/light_blue"/>

    <Button 
        android:id="@+id/facebook"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/save"
        android:layout_below="@id/name"
        android:layout_marginRight="10sp"
        android:text="@string/detailview_facebook"
        android:drawableTop="@drawable/detailview_button_delen"
        android:background="@color/light_blue"/>

    <Button 
        android:id="@+id/call"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/save"
        android:layout_below="@id/name"
        android:layout_marginLeft="10sp"
        android:text="@string/detailview_call"
        android:drawableTop="@drawable/detailview_button_bellen"
        android:background="@color/light_blue"/>

    <TextView 
        android:id="@+id/website"
        style="@style/DetailText" 
        android:layout_below="@+id/save"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/address"
        style="@style/DetailText"
        android:layout_below="@+id/website"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/description1"
        style="@style/DetailActivityText" 
        android:layout_below="@+id/address"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/description2"
        style="@style/DetailActivityText" 
        android:layout_below="@+id/description1"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/description3"
        style="@style/DetailActivityText" 
        android:layout_below="@+id/description2"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/description4"
        style="@style/DetailActivityText"
        android:layout_below="@+id/description3"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

    <TextView 
        android:id="@+id/description5"
        style="@style/DetailActivityText"
        android:layout_below="@+id/description4"
        android:layout_centerHorizontal="true"
        android:textIsSelectable="true"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-28T10:33:22.303

尝试将`facebook`XMLNS 添加到您的布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:facebook="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"> 
```

# python - 使用ElementTree一一解析一个目录下的所有xml文件

> ID：15679467
> 
> 赞同：15
> 
> 时间：2013-03-28T10:30:10.857
> 
> 标签：python, xml, parsing, elementtree

我正在通过 ElementTree 在 python 中解析 XML

```
import xml.etree.ElementTree as ET 
tree = ET.parse('try.xml')
root = tree.getroot() 
```

我希望解析给定目录中的所有“xml”文件。用户应该只输入目录名，我应该能够遍历目录中的所有文件并一一解析。谁能告诉我方法。我正在使用 Linux。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T10:32:53.120

只需创建一个循环`os.listdir()`：

```
import xml.etree.ElementTree as ET
import os

path = '/path/to/directory'
for filename in os.listdir(path):
    if not filename.endswith('.xml'): continue
    fullname = os.path.join(path, filename)
    tree = ET.parse(fullname) 
```

# jquery - Twitter Bootstrap 表单向导/Jquery.validate - 如果表单无效，防止用户移动到下一个选项卡

> ID：15679469
> 
> 赞同：3
> 
> 时间：2013-03-28T10:30:14.300
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

到目前为止，我尝试了以下操作：

1.  在`onNext`- 首先`if (!form.valid()) { return false; }`这仍然将用户移动到以下选项卡。
2.  在`onNext`- 第一件事：

    如果（！form.valid（））{

    $('.error').first().focus()

    返回假；

    }

    仍然，向导移动到下一个选项卡。

3.  `$('.button-next').click( 函数 (e) {

    ```
     if (!form.valid()) {

        e.preventDefualt();

        return false;
       }

     return true;

    }` 
    ```

仍然没有帮助。

如果表单到目前为止无效，如何防止用户移动到另一个选项卡？

顺便说一句，验证工作正常 - 无效字段正确突出显示。

**更新 - 编码** *onNext 函数*

```
onNext: function (tab, navigation, index) {
            console.log('in on next');

            if (!form.valid()) {
                console.log('not valid');
                $('.error').first().focus();
                return false;
            }

            var total = navigation.find('li').length;
            var current = index + 1;
            // set wizard title
            $('.step-title', form).text('Step ' + (index + 1) + ' of ' + total);
            // set done steps
            jQuery('li', form).removeClass("done");
            var li_list = navigation.find('li');
            for (var i = 0; i < index; i++) {
                jQuery(li_list[i]).addClass("done");
            }

            if (current == 1) {
                form.find('.button-previous').hide();
            } else {
                form.find('.button-previous').show();
            }

            if (current >= total) {
                form.find('.button-next').hide();
                form.find('.button-submit').show();
            } else {
                form.find('.button-next').show();
                form.find('.button-submit').hide();
            }

            App.scrollTo($('.page-title'));
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:40:59.300

我的目标：如果当前步骤中的任何字段无效，请阻止向导转移到下一个选项卡。允许用户修复所有无效字段，然后才能继续下一步。

我将`onNext`功能更改为以下内容：

```
onNext: function (tab, navigation, index) {
            console.log('in on next');

            var allowStep = form.valid();

            if (allowStep) {

                var total = navigation.find('li').length;
                var current = index + 1;
                // set wizard title
                $('.step-title', form).text('Step ' + (index + 1) + ' of ' + total);
                // set done steps
                jQuery('li', form).removeClass("done");
                var li_list = navigation.find('li');
                for (var i = 0; i < index; i++) {
                    jQuery(li_list[i]).addClass("done");
                }

                if (current == 1) {
                    form.find('.button-previous').hide();
                } else {
                    form.find('.button-previous').show();
                }

                if (current >= total) {
                    form.find('.button-next').hide();
                    form.find('.button-submit').show();
                } else {
                    form.find('.button-next').show();
                    form.find('.button-submit').hide();
                }

                App.scrollTo($('.page-title'));
            }

            return allowStep;
        }, 
```

到目前为止，我不知道为什么从内部返回 false 语句没有相同的效果。

为了完成这项工作，请停止将用户向前传输的向导表单，我必须将 return 语句放在任何括号之外。

希望这将帮助其他人节省我花费数小时的开发时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:24:22.200

在这里，我获取当前步骤并查找所有输入，然后循环遍历步骤中的输入以确定每个输入是否有效。然后，如果有错误，我会返回。

如果我不使用标志“hadError”，而只返回有效/无效，则验证检查将在每个字段上停止。可能有多个字段无效，但它只会更新显示给用户的第一个字段的错误消息。所以我做了这个标志，以便所有无效的输入都会显示错误消息，这就是为什么我循环它们并单独检查它们，如果它在单个步骤上有效/无效，我可以执行其他步骤。

```
 var tabs = $(".tab-pane"); // get the steps
                var currentTab = tabs[index - 1]; //get the current step

                var inputs = $(":input"); // get all the form inputs
                var stepElements = $(currentTab).find(inputs); // get inputs for current step
                var count = stepElements.length; // check that there are inputs
                if (count <= 0) {                // if there are not no reason to loop them 
                    return true;                 // this can be used to perform other action if there are no steps 
                }
                $(stepElements).each(function (idx) {
                    isValid = $(document.forms[0]).validate().element($(this)); // check that the input is valid. This can also be used on a per input basis to perform another action if the field is not valid. 
                    if (!isValid) { hadError = true; } // set our flag if there was an error 

                });

                return !hadError; //return the value of the flag. 
```

注意：这仅适用于输入而不是选择。您可以尝试更改线路

```
 var inputs = $(":input"); // get all the form inputs 
```

包括选择

```
 var inputs = $(":input, select"); // get all the form inputs and selects 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:42:46.483

我想你会想要确保你的表单域的一个子集是有效的，即当前选项卡中的域。

您可以使用 valid() 插件方法，但将其应用于表单字段的集合。只要表单字段包含在表单中，那么这将起作用。例如检查所有字段

```
<form>
<div id="tab1">
 ...form fields here
</div>
...other tabs here
</form> 
```

叫这个

```
var result = $('div#tab1 :input').valid() 
```

结果将是 1 或零，1 有效 0 无效

# c# - 以非侵入方式将 Resharper 代码注释添加到自己的代码中

> ID：15679473
> 
> 赞同：8
> 
> 时间：2013-03-28T10:30:25.443
> 
> 标签：c#, resharper, syntax-highlighting

我想用 StringFormatMethod 属性标记我的一种方法，以便 Resharper 语法突出显示它。

我可以通过引用 JerBrains.Annotations 程序集并添加属性来做到这一点。

但是，我发现这是一种非常具有侵入性的方法。这里不是每个人都使用 JetBrains，它需要将 .dll 提交到 subversion，添加依赖项并用特定于特定 IDE 的东西乱扔代码，这是我讨厌的。

我阅读了有关“外部注释”功能的信息，但我无法做到。我不确定我是否做错了，或者解决方案中的项目是否根本不支持它（即不是编译的程序集引用）。

那么有没有办法以非侵入性的方式为项目中的方法添加代码注释呢？

PS这是方法：

使用系统；

```
namespace MyLib
{
    public static class Assert
    {
        public static void That(bool condition, string format, params object[] @params)
        {
            if (!condition)
                throw new Exception(string.Format(format, @params));
        }
    }
} 
```

这是内容

C:\Program Files (x86)\JetBrains\ReSharper\v7.1\Bin\ExternalAnnotations\MyLib.xml：

```
<assembley name="MyLib">
    <member name="MyLib.Assert.That(System.Boolean,System.String,System.Object[])">
        <attribute ctor="M:JetBrains.Annotations.StringFormatMethodAttribute.#ctor">
            <argument>format</argument>
        </attribute>
    </member>
</assembley> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-15T11:24:54.547

总结一下可能性：

*   **您引用 nuget `Jetbrains.Annotations`，并且不要定义`JETBRAINS_ANNOTATIONS`：** 此类注释仅对使用源代码的开发人员有用，它们不会在您的二进制文件中编译（使用条件语句）并且在引用您的 dll 时它们不可见。您甚至可以在 packages.config 中添加`developmentOnly="true"`属性`Jetbrains.Annotations`，因此默认情况下它不会被视为依赖项。

*   **您如上所述引用但定义`JETBRAINS_ANNOTATIONS`：** 现在您具有真正的二进制依赖项，并且`Jetbrains.Annotations.dll`必须与您的库一起分发，或者必须作为 nuget 依赖项下载。

*   **您将`internal`选中的注释（因此客户端代码不会使用它们）复制到“YourLib.Annotations”中：**然后将它们嵌入到您的库中，即使其他开发人员仅使用二进制版本也可以使用它们。

*   **您提供外部注释：**对于更大的库/更多属性，这也可能消耗 40k，它是单独的文件，通常创建/使用不那么简单。

我个人选择了第三个选项（对于共享库，项目通常只使用 nugets）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T11:11:43.717

您不必引用程序集来添加注释属性。[根据文档](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__Annotations_in_Source_Code.html)，您可以转到`ReSharper/Options/Code Annotations`，将属性实现复制到剪贴板，然后将它们粘贴到您自己的源中，ReSharper 将在其中使用它们。如果您不想在`JetBrains`程序集中使用它们，您甚至可以更改它们所在的命名空间。

不过，我不知道您是否会为源代码使用外部（XML）注释。我得到的印象是它们只适用于现有的二进制文件。也就是说，我认为用属性装饰你的源代码对于你自己和其他开发人员来说是非常有价值的文档来源。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-04T09:28:50.820

不知道它是否有帮助，但元素名称`<assembley>`拼写错误（除非他们实际上在架构中使用了它）。应该是`<assembly>`。

# windows - 与 MS Windows 中的“文件”命令相同

> ID：15679496
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:31:27.533
> 
> 标签：windows

在 GNU/Linux 系统中，存在一个名为 的命令，`file`用于确定文件类型。

Windows 中是否有类似的命令/工具？

特别是，我想检查一个`.lib`文件是编译成 32 位还是 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:36:34.480

没有开箱即用的功能。不过，您可以使用 Cygwin 来使用它的 unix 版本。

还有免费的[http://mark0.net/soft-trid-e.html](http://mark0.net/soft-trid-e.html)工具。

# sql - 对不同的 SQL 别名使用相同的计算

> ID：15679497
> 
> 赞同：0
> 
> 时间：2013-03-28T10:31:30.300
> 
> 标签：sql, alias

所以我有两个使用相同计算的列别名：

`,case when bi.PolicyFeeFactor = 0 then 0 else CAST(ROUND(nb.AnnualPolicyFee * bi.PolicyFeeFactor,2)AS DECIMAL(6,2)) end as UNIT_POLFEE_Y`

`,case when bi.PolicyFeeFactor = 0 then 0 else CAST(ROUND(nb.AnnualPolicyFee * bi.PolicyFeeFactor,2)AS DECIMAL(6,2)) end as UNIT_PUPFEE_Y`

我正在寻找一种方法，我可以只编写一次计算并从该语句创建两个列别名，例如：

`,case when bi.PolicyFeeFactor = 0 then 0 else CAST(ROUND(nb.AnnualPolicyFee * bi.PolicyFeeFactor,2)AS DECIMAL(6,2)) end as UNIT_PUPFEE_Y, UNIT_POLFEE_Y`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:33:56.523

将其包装在子查询中，例如

```
SELECT Result AS UNIT_PUPFEE_Y, 
       Result AS UNIT_POLFEE_Y
FROM
    (
        SELECT CASE .... END AS Result
        FROM   tableName
    ) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:39:34.193

你可以这样写，

```
SELECT *,UNIT_PULFEE_Y AS UNIT_PUPFEE_Y FROM
(SELECT *
,case when bi.PolicyFeeFactor = 0 then 0 else CAST(ROUND(nb.AnnualPolicyFee *              bi.PolicyFeeFactor,2)AS DECIMAL(6,2)) end as UNIT_PULFEE_Y
FROM Table )A 
```

# joomla - Joomla 2.5 如何在导航栏 kunena 上设置活动菜单

> ID：15679498
> 
> 赞同：2
> 
> 时间：2013-03-28T10:31:32.850
> 
> 标签：joomla, navigation, forum

当我在我的网站上使用 Kunena 时，导航栏出现问题。

每当我在 Kunena“页面”中时，导航不会显示 FORUM 处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:33:02.577

解决方法是使用 java 脚本或 jquery 更改活动

将此脚本添加到您的索引模板

```
<script> 
var j = jQuery.noConflict();
var isForumActive = <?php if (strpos($_SERVER['REQUEST_URI'], "/forum") !== false){ echo "true"; } else echo "false";?>;
if(isForumActive){    
   j(".item120").addClass("active");
}
</script> 
```

您需要使用菜单 ID 更改 ID (120)，并确保别名正确。

你也需要jquery....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T22:32:29.410

我通过在主菜单中将所有 Kunena 菜单项创建为 Forum 菜单项的子菜单项并使用[split menus](http://docs.joomla.org/Split_menus)解决了这个问题。

# google-chrome - 使用 TinyMCE 时 Chrome 无法滚动

> ID：15679499
> 
> 赞同：3
> 
> 时间：2013-03-28T10:31:33.830
> 
> 标签：google-chrome, scroll, tinymce

在我的 TinyMCE 文本框上完成“初始化”后，使用 chrome 时窗口无法滚动。它冻结了，除非我调整窗口大小，否则什么也做不了。

有没有人遇到过这个问题，如果有，您是如何解决的？

它适用于所有其他浏览器，我的 chrome 版本是 25.0.1364.172

谢谢！

-- 编辑 -- 这是 tinyMCE 的初始化。“editor_selector”和“tinymce”是类。

```
 tinyMCE.init({
            mode: "specific_textareas",
            editor_selector: "tinymce_wide",
            encoding: "xml",
            theme: "advanced",
            theme_advanced_toolbar_location: "top",
            theme_advanced_buttons1: "bold,italic,underline",
            theme_advanced_buttons2: "cut,copy,paste,|,link,unlink",
            theme_advanced_buttons3: "",
            width: "918"
        });

        tinyMCE.init({
            mode: "specific_textareas",
            editor_selector: "tinymce",
            encoding: "xml",
            theme: "advanced",
            theme_advanced_toolbar_location: "top",
            theme_advanced_buttons1: "bold,italic,underline",
            theme_advanced_buttons2: "cut,copy,paste,|,link,unlink",
            theme_advanced_buttons3: "",
            width: "705"
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T05:57:05.857

如果您的 URL 末尾有 #，则放置 tinymce 的 DIV 的滚动条将冻结。

我在chrome浏览器中遇到了这个问题。所有其他浏览器都没有问题。

你可以看到相关的[Tinymce](http://www.tinymce.com/forum/viewtopic.php?pid=106909)和[StackOverflow](https://stackoverflow.com/questions/10188421/tinymce-ckeditor-freezing-container-divs-scrolling-when-initializing)线程。

# spring - 我如何在我的 java 代码中获得职位描述？

> ID：15679500
> 
> 赞同：1
> 
> 时间：2013-03-28T10:31:34.130
> 
> 标签：spring, spring-batch

当我将 Spring Batch 作业定义为以下内容时：

```
<batch:job id="FailTask">
<batch:description>My Job Description</batch:description>
    <batch:step id="FailTask-step0">
        <batch:tasklet ref="sampleFailTask" />
        <batch:listeners>
            <batch:listener ref="sampleFailStepListener" />
        </batch:listeners>
    </batch:step>
</batch:job> 
```

**我如何在我的 java 代码中获得职位描述？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:49:51.217

好的，我找到了：

```
AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory()
BeanDefinition beanDefinition = ((BeanDefinitionRegistry) beanFactory).getBeanDefinition(taskName);
String taskDescription = beanDefinition.getDescription(); 
```

现在的问题是如何获得描述以外的其他属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:06:05.917

在[JobParser](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/configuration/xml/JobParser.html)中有几行：

```
 Element description = DomUtils.getChildElementByTagName(element, "description");
    if (description != null) {
        builder.getBeanDefinition().setDescription(description.getTextContent());
    } 
```

因此，描述设置为 bean 定义。您可以从[BeanDefinitionRegistry](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/support/BeanDefinitionRegistry.html#getBeanDefinition%28java.lang.String%29)获得它。

# ssh - Bitbucket SSH 身份验证

> ID：15679503
> 
> 赞同：4
> 
> 时间：2013-03-28T10:31:39.050
> 
> 标签：ssh

我在连接 SSH 服务时遇到问题，

ssh-agent 正在运行：

> ps -e | grep SSH
> 
> 12163？00:00:00 ssh 代理

并缓存我唯一的身份：

> ssh-add -l
> 
> 4096 25:56:f4:9c:09:65:fe:39:b3:17:73:bd:3c:76:3f:8d /home/matthias/.ssh/id_rsa (RSA)

一切都应该存在：

> ls ~/.ssh/
> 
> id_rsa id_rsa.pub known_hosts

并且 id_rsa.pub 被上传到 Bitbucket.org SSH-Keys 部分。

但是 SSH 身份验证失败（使用详细模式，可以看到，它以某种方式尝试加载不存在的 id_dsa 文件）

> ssh -v -T hg@bitbucket.org
> [...]
> debug1：下一个身份验证方法：publickey
> debug1：提供 RSA 公钥：/home/matthias/.ssh/id_rsa
> debug1：可以继续的身份验证：publickey
> debug1：提供 RSA公钥：/home/matthias/.ssh/id_rsa
> debug1：远程：强制命令：conq 用户名：matthias_hueser
> debug1：远程：端口转发已禁用。
> debug1：远程：X11 转发已禁用。
> debug1：远程：代理转发已禁用。
> debug1：远程：已禁用 Pty 分配。
> debug1：服务器接受密钥：pkalg ssh-rsa blen 535
> debug1：key_parse_private_pem：PEM_read_PrivateKey 失败
> 调试1：读取 PEM 私钥完成：输入
> 输入密钥“/home/matthias/.ssh/id_rsa”的密码：
> debug1：读取 PEM 私钥完成：键入 RSA
> debug1：远程：强制命令：conq 用户名：matthias_hueser
> debug1：远程：禁用端口转发。
> debug1：远程：X11 转发已禁用。
> debug1：远程：代理转发已禁用。
> debug1：远程：已禁用 Pty 分配。
> debug1：可以继续的身份验证：publickey
> debug1：正在尝试私钥：/home/matthias/.ssh/id_dsa
> 没有这样的身份：/home/matthias/.ssh/id_dsa：没有这样的文件或目录
> debug1：正在尝试私钥：/home /matthias/.ssh/id_ecdsa
> no such identity: /home/matthias/.ssh/id_ecdsa: No such file or directory
> debug1：没有更多的身份验证方法可以尝试。
> 权限被拒绝（公钥）。

有没有其他人遇到同样的问题并有建议？

[感谢编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T01:43:21.067

您看到的输出看起来与服务器拒绝您的`id_rsa`密钥一致。ssh 将检查`id_rsa`, `id_dsa`, ，`id_ecdsa`即使您没有在命令行上指定它们或将它们加载到您的 ssh-agent 中。

如果我对此进行故障排除，我会从图片中删除 ssh-agent 并在命令行上指定您的私钥。

在之后关闭的新 shell 中运行它，这样就不会破坏现有环境：

```
$ bash
$ unset SSH_AGENT_PID SSH_AUTH_SOCK
$ ssh -v -T -i ~/.ssh/id_rsa hg@bitbucket.org
[...]
$ exit 
```

（ssh-keygen 应该提示您输入密钥的密码）

* * *

如果可行，我会仔细检查您的 ssh-agent 提供的密钥是否确实正确。你可以

```
$ ssh-keygen -y -f ~/.ssh/id_rsa 
```

并检查您的 ssh-agent 中的内容：

```
$ ssh-add -L 
```

如果您的代理中的身份不同，您应该转储您的密钥`ssh-add -D`并重新加载它们。如果没有不同，我不确定发生了什么。希望那些对你有帮助。

# c++ - 如何在gsoap中使字符串数组返回值

> ID：15679506
> 
> 赞同：-2
> 
> 时间：2013-03-28T10:31:44.203
> 
> 标签：c++, c, string, soap, gsoap

我正在为 gsoap 的返回参数绑定而苦苦挣扎。我有一个返回的函数，`char**`它的组成如下：`{char*, ..., char*, NULL}`. 我希望生成的 Web 服务能够在一个参数中传输和处理多个字符串。然而，Gsoap 只生成： `<element name="retVal" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true"/>`

我希望它返回一个字符串数组，而不是单个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:01:20.830

如果我理解你的问题

您可以开发自己的函数，该函数调用 gSoap 函数以从 gSoap 函数获取返回的字符串，然后将 gSoap 字符串拆分为子字符串并将它们放入一个数组中，然后返回您的字符串数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:49:08.810

[我在文档](http://www.cs.fsu.edu/~engelen/soapdoc2.html#tth_sEc11.11.7)中找到了答案。事实证明，我必须创建一个结构来用于返回值并适当地命名变量。就我而言：

```
struct ns_cl_get_indexes_retVal {
  int __sizeIndex;
  char** index;
}; 
```

以及 WS-base 标头中的函数：

```
int ns__cl_get_indexes ( int32_t db_id,  struct ns_cl_get_indexes_retVal& retVal ); 
```

这导致了正确的 xml 生成，如 wsdl 所示：

```
<element name="index" type="xsd:string" minOccurs="0" maxOccurs="unbounded" nillable="true"/> 
```

# c# - 使用协议 t1 的智能卡通信

> ID：15679507
> 
> 赞同：0
> 
> 时间：2013-03-28T10:31:46.077
> 
> 标签：c#, communication, smartcard

大家好，我还有另一个问题要问你：）

我想用协议 t=1 与智能卡通信。我正在使用 Windows 智能卡 api (winscard.dll) 和 C#。我有

用于传输数据的 SCardEstablishContext()、SCardListReaders()、SCardConnect()、SCardStatus()、SCardTransmit()、SCardDisconnect()、SCardReleaseContext() 函数。

我想用下面的代码选择主文件（mf）

```
SCARD_IO_REQUEST sendreq,recvreq;

byte[] sendbuff = { 0x00, 0xA4, 0x00, 0x00, 0x02, 0x3F, 0x00 };

sendreq.protocol = SCARD_PROTOCOL_T1;
sendreq.pciLength = 8;
recvreq.protocol = SCARD_PROTOCOL_T1;
recvreq.pciLength = 8;

byte[] RecvBuff = new byte[258];
int recvbufflen = 2;

SCardTransmit(hCard, ref sendreq, ref sendbuff[0], sendbuff.Length, ref recvreq, ref RecvBuff[0], ref recvbufflen); 
```

成功任务的响应必须为 9000，但我收到 6A86（无效的 ins 参数）。

我的问题是：

1- 为什么我会收到此回复？

2-如果是，我是否必须使用 pts 命令更改协议，为什么？（该卡只支持t1）

3-协议t = 1帧必须是序言字段+信息字段+结尾字段。但我没有将序言和尾声字节添加到 sendbuff。使用windows api时是否有必要将它们添加到sendbuff？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:42:50.363

由于参数p1和p2，我已经解决了这个问题。尽管收到“无效参数”，但我认为参数是正确的。所以我在其他地方搜索错误。

选择文件时，参数必须为 0x02 和 0x0C。

编辑：在 guidot 的评论之后，我意识到我没有使用这些参数来选择主文件。（试过但后来改了）要在 MF 下选择 EF ：

```
byte[] sendbuff = {0x00, 0xA4, 0x02, 0x0C, 0x02, id1, id2} 
```

感谢guidot..

# c# - 将模式转换为 ViewModel

> ID：15679508
> 
> 赞同：0
> 
> 时间：2013-03-28T10:31:53.867
> 
> 标签：c#

我，在特殊情况下我不想使用 automepper，这是我从 Model 到 ViewModel 的转换方法：

```
public static BlogPostViewModel ConvertToBlogPostViewModel(this BlogPost blogPost)
        {
            var blogPostViewModel = new BlogPostViewModel
                {
                    Body = blogPost.Body,
                    Summary = blogPost.Summary,
                    Title = blogPost.Title
                };

            return blogPostViewModel;
        } 
```

现在我可以如何为相同方法（）的 IEnumerable 执行此操作！？？

```
public static IEnumerable<BlogPostViewModel> ConvertToBlogPostViewModelList(this IEnumerable<BlogPost> blogPosts)
        {
            ??

        } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:41:21.340

这是您的方法的全部内容：

```
return blogPosts.Select(ConvertToBlogPostViewModel); 
```

它相当于：

```
return blogPosts.Select(x => ConvertToBlogPostViewModel(x)); 
```

# php - 将 git-ftp 添加到我的 php 环境中

> ID：15679509
> 
> 赞同：1
> 
> 时间：2013-03-28T10:31:55.223
> 
> 标签：php, gitolite, git-ftp

我已经在我的 CentOS 服务器上安装了[git-ftp](https://github.com/resmo/git-ftp)，这样我就可以从运行 ac_gitolite 模块的 activeCollab 安装中进行部署。

一切安装正常，应用程序位于

```
/usr/local/bin/git-ftp 
```

当我通过 ssh 登录服务器时，我可以在没有完整路径的情况下运行 git-ftp 命令，但是当我尝试使用 PHP 来运行带有 exec 的命令时，即：

```
exec ("git-ftp --version 2>&1", $output); 
```

我收到以下错误：

```
sh: git-ftp: command not found 
```

是否有我需要专门为 PHP 指定某处的环境路径，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:00:59.000

[“找不到命令 -`exec()`命令](https://stackoverflow.com/questions/10459070/command-not-found-error-in-exec-command)错误”中讨论的两个选项是：

*   一种简单的解决方案是放置`git-ftp`可执行文件的完整路径。
*   另一种是将 git-ftp 添加到 php 服务器用户的`PATH`.

# c# - 检测是否在 InitializeRow 事件上选择了行

> ID：15679511
> 
> 赞同：0
> 
> 时间：2013-03-28T10:32:01.990
> 
> 标签：c#, infragistics

我有一个`ultrawingrid`充满联系人 - 其中一些需要根据该联系人的属性以不同的配色方案出现。

我有一个`initializerow`事件，使用以下简单代码：

```
 private void grdPeople_InitializeRow(object sender, InitializeRowEventArgs e)
    {
        if (e.Row.Cells["NoSMS"].Value != null)
        {
            if (e.Row.Cells["NoSMS"].Value.ToString() == "True")
            {
                e.Row.Appearance.BackColor = System.Drawing.Color.FromArgb(255, 80, 50, 30);
                e.Row.Appearance.ForeColor = System.Drawing.Color.FromArgb(255, 150, 150, 150);
            }
        }
    } 
```

如果联系人的`NoSMS`标志设置为 true，则上面的代码会将联系人显示为灰色——这意味着他们不希望被联系。尊重隐私等

Now, when that row is selected, this colour is overriden by the 'selected' colour scheme of the `ultrawingrid`- meaning that when the user is selected a large group of contacts, it is not immediately visible which ones are 'greyed-out'.

我尝试添加以下代码，但没有奏效：

```
 foreach (UltraGridRow row in grdPeople.Selected.Rows)
                {
                    if (e.Row.Index == row.Index)
                    {
                        e.Row.Appearance.BackColor = System.Drawing.Color.FromArgb(255, 80, 50, 30);
                        e.Row.Appearance.ForeColor = System.Drawing.Color.FromArgb(255, 150, 150, 150);
                    }
                } 
```

有谁知道我如何检测当前正在初始化的行是否正在选择中，或者为什么该代码可能不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:08:55.197

要做的第一件事是`Appearance`通过设计器定义just一次并将其添加到属性`Appearances`集合中`DisplayLayout`。
每个`Appearance`存储在那里的都由一个键值标识（让我们在这种情况下使用“disabled_row”）。

这样，您只有一个外观，而不是每行一个外观。
同样以这种方式引用单元格值可能会导致大量内存消耗，Infragistics 推荐的方法是使用该`GetCellValue`方法检索值（[请参阅 WinGrid 性能指南](http://www.infragistics.com/community/forums/t/15306.aspx)）

然后您的代码`InitializeRow`可以更改为

```
private void grdPeople_InitializeRow(object sender, InitializeRowEventArgs e)
{
    UltraGridColumn c = e.Row.Band.Columns["NoSMS"];
    object o = e.Row.GetCellValue(c) ?? false;
    bool noSMS = Convert.ToBoolean(o);

    if (noSMS)
    {
        e.Row.Appearance = grdPeople.DisplayLayout.Appearances["disabled_row"];
        foreach(UltraGridCell c in e.Row.Cells)
            c.SelectedAppearance = grdPeople.DisplayLayout.Appearances["disabled_row"];
    }
} 
```

还要检查 Infragistics 帮助页面上的[条件格式](http://help.infragistics.com/NetAdvantage/WinForms/2012.2/CLR4.0/)（但这仅适用于逐个单元格 AFAIK）

# html - 表格文本悬停和链接颜色

> ID：15679512
> 
> 赞同：3
> 
> 时间：2013-03-28T10:32:04.007
> 
> 标签：html, css, css-selectors, css-specificity

我有它的 html 表格和布局（类似的东西，我也使用 haml+sass）：

```
.zebra{
 .zebra-stripe{
  &.zebra1{
  a{
    color: red;
  }
  a:hover{
    color: blue;
  }
 }
} 
```

我的 htm 表有类斑马，而 tr 有类 .zebra-stripe .zebra1

但是我有其他样式的链接（如按钮），这个链接有自己的背景高度，但悬停时颜色设置为橙色，

```
.details-link{
  width: 70px;
  margin: 2px;
}
.details-link:hover{
  color: orange;
} 
```

但是当我的鼠标悬停在这个链接上时，它的颜色不是橙色，而是为表格设置的蓝色......有什么问题？

如何将链接悬停文本颜色设置为橙色（我设置了它，但无法正确查看）....

如果有不清楚的地方请在评论中写给我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:35:11.153

试试这个：

```
a.details-link:hover{
    color: orange;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:35:11.270

您的问题是您使用的选择器的`.zebra .zebra-stripe.zebra1 a:hover`特异性，比`.details-link:hover`. 请尝试以下操作以使您的选择器更具体：

```
.zebra .zebra-stripe.zebra1 a.details-link:hover {
    color: orange;
} 
```

# java - 从 java 程序调用数据库的函数

> ID：15679514
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:32:07.013
> 
> 标签：java, sql, database, postgresql, sql-function

有一个 Postgresql 数据库具有以下功能 cap

```
CREATE OR REPLACE FUNCTION net_train(terms text[], answer integer)
  RETURNS void AS
$BODY$begin
--this code is stub
end;$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION net_train(text[], integer)
  OWNER TO postgres; 
```

需要从 java 程序中调用这个函数。告诉我怎么做（最好用示例代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:33:44.037

JDBC PostgreSQL 文档包含[此页面](http://jdbc.postgresql.org/documentation/head/callproc.html)，其中详细说明了如何使用[Connection.prepareCall()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareCall%28java.lang.String%29)调用函数。它返回一个[CallableStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)

> 用于执行 SQL 存储过程的接口。JDBC API 提供存储过程 SQL 转义语法，允许以标准方式为所有 RDBMS 调用存储过程。这种转义语法有一种形式包含结果参数，另一种形式不包含。如果使用，结果参数必须注册为 OUT 参数。其他参数可用于输入、输出或两者。参数按编号顺序引用，第一个参数为 1。

# facebook - 创建新的 facebook 应用程序并限制访问

> ID：15679515
> 
> 赞同：0
> 
> 时间：2013-03-28T10:32:07.180
> 
> 标签：facebook, facebook-like, facebook-apps

我正在开发一个新应用程序，并已按照类似于此处的说明进行操作。将 [页面选项卡应用程序限制为仅限粉丝](https://stackoverflow.com/questions/9658941/restricting-page-tab-app-to-only-fans)

所以确实我的应用程序从相应页面访问时只有在它被“喜欢”时才会加载，这很好..问题是，如果有人尝试直接访问应用程序而不是通过相应的粉丝页面会发生什么..有没有限制应用程序的方法，使其不会独立显示，而只能通过粉丝页面显示？因为当它直接访问时，页面->喜欢的页面不起作用，所以什么都没有“完成..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:41:30.660

每当您的应用程序从 Facebook 粉丝页面打开时，您都会收到[signed_request](https://developers.facebook.com/docs/howtos/login/signed-request/)。如果您没有收到signed_request，您可以简单地将用户重定向到您在Facebook 上的应用程序。

# iphone - 我们如何在 Safari 中移动像历史显示一样的滚动视图对象？

> ID：15679524
> 
> 赞同：0
> 
> 时间：2013-03-28T10:32:29.320
> 
> 标签：iphone, carousel

在触摸移动时，我想滑动我的图片，例如 iphone 音乐播放器以横向模式更改其专辑。或者通过滚动鼠标更改 safari 历史页面。

只是想知道在横向模式下在iphone音乐播放器上触摸移动会导致专辑通过从左到右和从右到左一起滑动来改变。不想使用iCarousel。想要通过定位z-index来应用滑动动画意见。

![在此处输入图像描述](../Images/6610c3e21c3185b37b8d265ed87b4056.png) 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:11:20.813

我找到了一个样本。[在此处](http://code4app.com/down/id/4f7ff13c06f6e75f78000000)下载源代码。希望这可以帮助。

# python-2.7 - 在 python 2.7 中使两个列表相同

> ID：15679526
> 
> 赞同：2
> 
> 时间：2013-03-28T10:32:36.053
> 
> 标签：python-2.7

我在 python 中有两个列表。

```
a=[1,4,5]
b=[4,1,5] 
```

我需要的是根据a订购b。有没有任何方法可以简单地做到这一点而没有任何循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:39:42.583

最简单的方法是`zip`将两个列表的元素组合成`tuple`s：

```
a, b = zip(*sorted(zip(a, b))) 
```

`sorted`将`tuple`首先通过它们的第一个元素（来自的元素`a`）比较 s；`zip(*...)`将“解压缩”排序列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:41:25.167

或者可能只是检查一切是否完美然后..复制列表a for b

```
if all(x in b for x in a) and len(a)==len(b):
    b=a[:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:42:16.433

如果你想与`list2`相同`list1`，你不需要弄乱顺序或重新安排任何东西，只需替换`list2`为`list1`：

```
list2 = list(list1) 
```

[`list()`](http://docs.python.org/3.3/library/functions.html#func-list)获取任何可迭代对象并从中生成一个新列表，因此我们可以使用它来复制`list1`，从而创建两个完全相同的列表。

也可以只做`list2 = list1`，但请注意，这将导致任何一个更改影响另一个（因为它们指向同一个对象），所以这可能不是你想要的。

如果`list2`在其他地方引用，因此需要保持相同的对象，则可以使用 . 替换列表中的每个值`list2[:] = list1`。

一般来说，您可能需要第一个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T18:29:05.023

根据项目在 a 中的索引对 b 进行排序，最后所有项目都不在 a 中。

```
>>> a=[1,4,5,2]
>>> b=[4,3,1,5]
>>> sorted(b, key=lambda x:a.index(x) if x in a else len(a))
[1, 4, 5, 3] 
```

# sencha-touch-2 - Secha touch2：在平板电脑中设置表单面板的背景图像

> ID：15679534
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:33:03.600
> 
> 标签：sencha-touch-2, background-image

嗨，我是 sencha touch2 的新手，在设置背景图像时遇到问题。我无法在平板电脑上看到完整的图像，底部已被切断。这是我的看法：

```
Ext.define('Test.view.LoginPage', {
    extend: 'Ext.form.FormPanel',
    xtype: 'loginPage',

    config:{
        styleHtmlContent:'true',
        scrollable:'false',
        styleHtmlCls:'login-Cls',

        html: '<img class="logo" src="resources/images/login_Landscape_BG.png"/>'

    }

}); 
```

我是否需要在配置文件文件夹中添加平板电脑作为我的应用程序目标仅适用于平板电脑。你能帮我么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T20:17:27.663

FWIW，我不得不遵循这个建议： [http ://www.sencha.com/forum/showthread.php?189231-Background-Image-in-form-Panel](http://www.sencha.com/forum/showthread.php?189231-Background-Image-in-form-Panel)

并将其用于我的 CSS（首先将 TxPanel cls 添加到表单面板）： .TxPanel .x-scroll-container { background: url('img/txbackground.png') repeat center; }

但是 blechhh。这是一个非常丑陋的黑客:-P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:08:51.470

试试这个（使用样式配置代替 html 配置）：

```
Ext.define('Test.view.LoginPage', {
    extend: 'Ext.form.FormPanel',
    xtype: 'loginPage',

    config:{
        styleHtmlContent:'true',
        scrollable:'false',
        styleHtmlCls:'login-Cls',
        style: 'background-image:url(resources/images/login_Landscape_BG.png);background-repeat:no-repeat;background-size:100% 100%;'

    }

}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T11:02:52.543

而不是 using `html`，您可以尝试 using`style`设置完整的背景图像：

```
style: 'background-image: url("resources/images/sesto-exterior.jpg"); background-size: 100% 100%;' 
```

# ruby-on-rails - 如何检查路线是否已经存在，同时在rails中生成动态路线

> ID：15679535
> 
> 赞同：1
> 
> 时间：2013-03-28T10:33:07.387
> 
> 标签：ruby-on-rails, routes, unique

在我的应用程序中，我需要为所有用户生成虚 url，例如：profilename/joinme，其中配置文件名称将是唯一的。有一个问题，如果配置文件名称是一个已经存在的路由，例如 if: profile_name = users 那么路由将是 users/joinme 并且已经有一个名为 users 的资源。所以我想在创建这些虚荣网址时检查它们是否不会干扰我现有的路线。有没有简单的方法可以做到这一点？我能想到的一种方法是在文件中获取“rake routes”的格式化输出，然后在创建每个路由时检查是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:43:44.773

您应该创建一个禁用词列表，并使用验证检查用户名是否与这些词中的任何一个不匹配。一个简单的方法可能是：

```
validate :check_banned_words

def check_banned_words
  if %w( admin join login help register ).include? self.username
    errors.add(:username, "this is a banned word!!")
  end  
end 
```

如果禁用词列表太长，将其放入 yaml 文件中，或者为禁用词创建一个模型，这样您就可以添加新词而无需重新部署您的应用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:45:23.313

您可以在路线中使用动态段，而不是生成动态路线。

例如：

```
match ":username/joinme", :to => "users#joinme" 
```

然后，您可以根据需要自定义控制器中的行为。

供参考： [Rails Routes - Dynamic Segments](http://guides.rubyonrails.org/routing.html#dynamic-segments)

* * *

另外，如果您想控制创建新用户的过程，禁止使用与现有路由冲突的名称，您可以使用[此答案](https://stackoverflow.com/a/9913451/986282)中描述的方法。

# c# - 如何使用 C# 排列数据表

> ID：15679542
> 
> 赞同：0
> 
> 时间：2013-03-28T10:33:28.980
> 
> 标签：c#, datatable

我正在动态构建数据表，格式如下，

```
DataTable dt = new DataTable();
DataColumn dc;

dc = new DataColumn();
dc.ColumnName = "Question";
dt.Columns.Add(dc);

dc = new DataColumn();
dc.ColumnName = "User1";
dt.Columns.Add(dc);

dc = new DataColumn();
dc.ColumnName = "User2";
dt.Columns.Add(dc);

dr["Question"] = "2D";
dr["User1"] = "1";
dr["Question"] = "3D";
dr["User1"] = "4";
dr["Question"] = "2D";
dr["User2"] = "2";
dr["Question"] = "3D";
dr["User2"] = "5"; 
```

我该如何安排是这样的，

```
DataTable dt = new DataTable();
DataColumn dc;

dc = new DataColumn();
dc.ColumnName = "Question";
dt.Columns.Add(dc);

dc = new DataColumn();
dc.ColumnName = "User1";
dt.Columns.Add(dc);

dc = new DataColumn();
dc.ColumnName = "User2";
dt.Columns.Add(dc);

dr["Question"] = "2D";
dr["User1"] = "1";
dr["User2"] = "2";
dr["Question"] = "3D";
dr["User1"] = "4";
dr["User2"] = "5"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:36:18.933

您可以使用与此类似的代码；

```
DataRow dr = dt.NewRow();
dr["Question"] = "2D";
dr["User1"] = "1";
dr["User2"] = "2";

dr = dt.NewRow();
dr["Question"] = "3D";
dr["User1"] = "4";
dr["User2"] = "5"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:40:03.600

假设 dr 是调用 DataTable 方法 NewRow 获得的 DataRow 类型的变量，那么您可以在一行中将值添加到行[ItemArray](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)属性中。
当然，您需要绝对确定您的列顺序和类型

```
 DataRow dr = dt.NewRow();
    dr.ItemArray = new object[] {"Q1", "1", "2"};
    dt.Rows.Add(dr);

    dr = dt.NewRow();
    dr.ItemArray = new object[] {"Q2", "3", "4"};
    dt.Rows.Add(dr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:19:50.697

您可以进行 linq 交叉连接并将其过滤到列表（您可以将列表绑定到您的 msChart）

```
var result = (from dr1 in dt.Select()
                  join dr2 in dt.Select() on dr1["Question"].ToString() equals dr2["Question"].ToString()
                  select new { q = dr1["question"], u1 = dr1["User1"], u2 = dr2["User2"] }
                 ).Where(row => row.u1.ToString().Length > 0 && row.u2.ToString().Length > 0).ToList(); 
```

# singleton - Perl 6 中的单例实现

> ID：15679544
> 
> 赞同：6
> 
> 时间：2013-03-28T10:33:33.470
> 
> 标签：singleton, raku

perl6 中单例模式的正确实现是什么？

我已经尝试过了，但我不知道如何在 perl6 中使用 static 关键字：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-03T07:31:37.010

这是需要使用`bless`方法的少数原因之一

```
class Singleton {
    my Singleton $instance;
    method new {!!!}
    submethod instance {
        $instance = Singleton.bless unless $instance;
        $instance;
    }
 } 
```

# mongodb - 基于文档键的MongoDB查找

> ID：15679559
> 
> 赞同：1
> 
> 时间：2013-03-28T10:34:43.377
> 
> 标签：mongodb

我有一个包含两个计数器字段的集合中的文档。想要查找 counter1 计数大于 counter2 计数的文档。如何在查找查询中将 counter2 键作为变量传递？我想要这样的东西...

```
db.collection.find( { counter1: { $gt: counter2 }}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:57:15.307

我认为你必须使用 mongoDB 聚合框架（[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)or)）或 map-reduce（[http://docs.mongodb.org/manual/applications/map-reduce /](http://docs.mongodb.org/manual/applications/map-reduce/) )这将使您有能力实现它。

# asp.net-mvc - ExpressionHelper.GetExpressionText() 在使用带有强制转换的表达式时返回不正确的结果

> ID：15679560
> 
> 赞同：1
> 
> 时间：2013-03-28T10:34:44.297
> 
> 标签：asp.net-mvc, razor

我在 Razor 中有这个示例代码：

`@Html.TextBoxFor(x => ((VisitGozo.Modules.Data.Events.EventSpecificFieldsData)x.Event.DataObject.SpecificFields).LinkedTourismProduct)`

如您所见，表达式包括强制转换。TextBoxFor 使用`ExpressionHelper.GetExpressionText()`将表达式转换为模型绑定文本的方法。

在上面的示例中，由于强制转换，返回的字段名称是 just`LinkedTourismProduct`和 not `Event.DataObject.SpecificFields.LinkedTourismProduct`。如果没有任何强制转换，这将正确返回全名。

因此，在模型绑定期间，它不会绑定到正确的属性，因为模型的属性是`Event.DataObject.SpecificFields.LinkedTourismProduct`而`LinkedTourismProduct`不仅仅是。

知道为什么会发生这种情况，还有其他解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:41:40.560

这是正常的行为。强类型助手只支持简单的表达式（属性访问和索引器访问）。铸造不是。

正确的方法是在您的视图模型上拥有一个正确类型的属性：

```
public EventSpecificFieldsData EventSpecificFields { get; set; } 
```

然后将您的文本框绑定到它而不进行任何强制转换：

```
@Html.TextBoxFor(x => x.Event.DataObject.EventSpecificFields.LinkedTourismProduct) 
```

# eclipse - Eclipse：如何找出 Eclipse 版本

> ID：15679562
> 
> 赞同：7
> 
> 时间：2013-03-28T10:34:47.610
> 
> 标签：eclipse

谁能告诉我如何找出我正在使用的 Eclipse 版本。

这基本上是，我需要下载一个 Eclipse 软件，如果它（小于）<=3.5 下载一个链接，如果它（大于）>=3.6

我试图以这种方式找出 Eclipse 版本

从 Eclipse 菜单**帮助 ----> 关于 Eclipse**

它显示为

```
Eclipse Java EE IDE for Web Developers.

Version: Helios Service Release 2
Build id: 20110218-0911 
```

但我不确定它是大于还是小于 3.5

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T10:46:51.493

eclipse`.eclipseproduct`在其根文件夹中有一个文件，其中包含其版本。
当您打开文件时，它看起来像

```
name=Eclipse Platform
id=org.eclipse.platform
version=3.7.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:45:09.843

Helios 版本是 3.6.X（[维基百科页面](http://en.wikipedia.org/wiki/Eclipse_%28software%29)上有版本名称和编号之间的匹配列表）。

尽管如果没有任何特定原因使用您可能希望更新的旧版本。Helios 将不再受支持。

# javascript - JavaScript For 循环圆形输入字段

> ID：15679564
> 
> 赞同：0
> 
> 时间：2013-03-28T10:34:54.987
> 
> 标签：javascript, forms, for-loop

我目前正在创建一个费用表格，并正在编写一个函数来验证输入的数据。

我允许输入 6 个费用金额，并在提交按钮的每个和 onClick 上进行描述确保已输入说明。

表格基本上看起来像：

```
<form action="##" name="myForm" id="myForm" method="post">
    <input type="text" name="otherExpenseDesc1" id="otherExpenseDesc1">
    <input type="text" name="otherExpenseAmount1" id="otherExpenseAmount1">
    <input type="text" name="otherExpenseDesc2" id="otherExpenseDesc2">
    <input type="text" name="otherExpenseAmount2" id="otherExpenseAmount2">
    <input type="text" name="otherExpenseDesc3" id="otherExpenseDesc3">
    <input type="text" name="otherExpenseAmount3" id="otherExpenseAmount3">
    <input type="text" name="otherExpenseDesc4" id="otherExpenseDesc4">
    <input type="text" name="otherExpenseAmount4" id="otherExpenseAmount4">
    <input type="text" name="otherExpenseDesc5" id="otherExpenseDesc5">
    <input type="text" name="otherExpenseAmount5" id="otherExpenseAmount5">
    <input type="text" name="otherExpenseDesc6" id="otherExpenseDesc6">
    <input type="text" name="otherExpenseAmount6" id="otherExpenseAmount6">
    <input type="submit" name="formSubmitBtn" value="SUBMIT" onClick="checkForm();">
</form> 
```

我目前拥有的javascript是：

```
function checkForm() {
    var errMsg = "";
    var otherExpense1 = document.getElementById('otherExpenseAmount1').value;
    var otherExpenseDesc1 = document.getElementById('otherExpenseDesc1').value;
    var otherExpense2 = document.getElementById('otherExpenseAmount2').value;
    var otherExpenseDesc2 = document.getElementById('otherExpenseDesc2').value;
    var otherExpense3 = document.getElementById('otherExpenseAmount3').value;
    var otherExpenseDesc3 = document.getElementById('otherExpenseDesc3').value;
    var otherExpense4 = document.getElementById('otherExpenseAmount4').value;
    var otherExpenseDesc4 = document.getElementById('otherExpenseDesc4').value;
    var otherExpense5 = document.getElementById('otherExpenseAmount5').value;
    var otherExpenseDesc5 = document.getElementById('otherExpenseDesc5').value;
    var otherExpense6 = document.getElementById('otherExpenseAmount6').value;
    var otherExpenseDesc6 = document.getElementById('otherExpenseDesc6').value;

    for (i=1; i<7; i++) {       
        expenseNo = 'otherExpense' + i;
        expenseDescNo = 'otherExpenseDesc' + i;
        if (expenseNo != "") {
            if (isNaN(expenseNo)) {
                alert(expenseNo + ' is not a number');
                errMsg = errMsg + 'The amount must be a number.<br />';
                document.getElementById('otherExpenseAmount' + i).style.border = '2px sold #990000';
            } else {
                alert('otherExpenseAmount' + i + ' is a number');
                document.getElementById('otherExpenseAmount' + i).style.border = '2px sold #990000';
            }
        }
    }

    if (errMsg != "") {
        showDialog('alert', 'OK', '', errMsg, '');
    }
} 
```

当我在几个字段中提交带有值的表单时，它仍然会为彼此显示一个警报ExpenseAmount 项目，说它不是数字，尽管它是，并且边框样式不会改变。

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:42:04.903

您正在尝试使用字符串访问变量。您应该更改代码以利用数组，如下所示：

[jsFiddle](http://jsfiddle.net/CYqfK/2/)

```
function checkForm() {
    var errMsg = "";
    var otherExpense = [];

    otherExpense.push(document.getElementById('otherExpenseAmount1').value);
    otherExpense.push(document.getElementById('otherExpenseAmount2').value);
    otherExpense.push(document.getElementById('otherExpenseAmount3').value);
    otherExpense.push(document.getElementById('otherExpenseAmount4').value);
    otherExpense.push(document.getElementById('otherExpenseAmount5').value);
    otherExpense.push(document.getElementById('otherExpenseAmount6').value);

    // 0-based index for arrays
    for (i=0; i<6; i++) { 
        if (otherExpense[i] != "") {
            if (isNaN(otherExpense[i])) {
                alert('otherExpense ' + (i + 1) + ' is not a number (=' + otherExpense[i] + ')');
                errMsg = errMsg + 'The amount must be a number.<br />';
                document.getElementById('otherExpenseAmount' + (i + 1)).style.border = '2px sold #990000';
            } else {
                alert('otherExpenseAmount' + (i + 1) + ' is a number');
                document.getElementById('otherExpenseAmount' + (i + 1)).style.border = '2px sold #990000';
            }
        }
    }

    if (errMsg != "") {
        alert(errMsg);
        //showDialog('alert', 'OK', '', errMsg, '');
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:56:34.617

您的问题出在这些方面；无论条件如何，您都将边框设置为相同（容易犯错误）。

```
if (isNaN(expenseNo)) {
    alert(expenseNo + ' is not a number');
    errMsg = errMsg + 'The amount must be a number.<br />';
    document.getElementById('otherExpenseAmount' + i).style.border = '2px sold #990000';
// -----------------------------------------------------------------------------^^^^^^
} else {
    alert('otherExpenseAmount' + i + ' is a number');
    document.getElementById('otherExpenseAmount' + i).style.border = '2px sold #990000';
// -----------------------------------------------------------------------------^^^^^^
} 
```

# 建议

*我讨厌成为那种人。*

你考虑过采用[jQuery](http://jquery.com/)吗？它专为此类任务而设计。利用[`filter`](http://api.jquery.com/filter/)简单的选择器等方法，很容易确定所有输入是否满足您的要求。这是一个例子：

```
// select all inputs with a class of "number"
// then filter those inputs, selecting only those where the value is "not a number"
// if there is a length, i.e. more than 0 were found, alert a message

if ($('input.number').filter(function() { return isNaN(this.value); }).length) {
    alert('Please ensure all numbers are valid');   
} 
```

这显然需要您通过将`number`类添加到所需元素来对 HTML 进行小幅修改，但这是一个很小的牺牲。

## [jsFiddle 演示](http://jsfiddle.net/GeekyEggo/Ev9Zb/)

# assembly - 汇编 NASM 写入保留空间

> ID：15679565
> 
> 赞同：0
> 
> 时间：2013-03-28T10:34:55.350
> 
> 标签：assembly, x86, nasm

如果我以后像这样保留一些地方供我使用：

```
section .bss
LC1:
    RESB    256 
```

我怎样才能在那里写字符或数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:50:32.000

通过将地址括在括号中。例如：

```
mov [LC1],eax       ; Store the value of eax at address LC1
mov byte [LC1+8],0  ; Store the 8-bit immediate 0 at address LC1+8 
```

有关详细信息，请参阅[NASM 手册](http://www.nasm.us/doc/nasmdoc0.html)（特别是第 3.3 节）。

# javascript - 未捕获的语法错误 - 意外标识符 Underscore.min.js 第 24 行

> ID：15679568
> 
> 赞同：1
> 
> 时间：2013-03-28T10:35:06.777
> 
> 标签：javascript, model-view-controller, backbone.js, backbone-views

我收到未捕获的语法错误

> 意外标识符 - underscore.min.js 24.

一旦我在模板中添加此复选框代码，就会出现错误：

```
template: _.template('<h3>'+'<input type=checkbox'+'<% if(status === "complete") print("checked") %> />' + '<% = name %></h3>'), 
```

我猜错误在模板的复选框代码中，我不知道那是什么。

下面是我的代码：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title></title>
<meta name="description" content="">
</head>
<body>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

</body>

<script>

var Friend = Backbone.Model.extend({});

var friend = new Friend ({ name:'phani'});

var FriendView = Backbone.View.extend({
    el:'body',
    tagName:'article',
    id:'my-friend',
    className:'hello-friend',

    //template
    template: _.template('<h3>'+'<input type=checkbox'+'<% if(status === "complete") print("checked") %> />' + '<% = name %></h3>'),

    //event
    events:{
    "click h3":"alertStatus"
    },

    alertStatus: function(e){
        alert("Hey you clicked the h3!");
        },

    render:function(){
    var attributes = this.model.toJSON();
    $(this.el).html(this.template(attributes));
    }

});

var friendView = new FriendView({model:friend});
friendView.render();
console.log(friendView.el);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:52:08.267

我不确定这是错误的根源，但在行

```
template: _.template('<h3>'+'<input type=checkbox'+'<% if(status === "complete") print("checked") %> />' + '<% = name %></h3>'), 
```

你可能应该在“检查”之前有一个空格，否则你最终会得到类似的东西

```
<input type=checkboxchecked /> 
```

顺便说一句，你也应该有双引号`checkbox`。

# facebook-graph-api - Facebook 评论 - 用户的性别和位置

> ID：15679569
> 
> 赞同：0
> 
> 时间：2013-03-28T10:35:09.393
> 
> 标签：facebook-graph-api

有没有办法为在 Facebook 上发表评论的用户获取更多数据？到目前为止，我收到的消息是用户的 ID 和名称：

```
GET https://graph.facebook.com/POST_ID/comments?fields=message,from.id,from.name 
```

我想另外获取 from.gender 和 from.location，但这似乎不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T23:53:43.143

`from`给定评论的对象仅包含`id`和`name`元素。

`id`对象中的`from`与发布给定评论的用户有关。拥有`id`后，您可以再次针对该用户查询图形 API 以获取其用户详细信息。但是，您可能无法检索`location`任何给定用户：他们的隐私设置可能会或可能不会公开它，或者您可能没有足够的权限来检索该用户的最通用信息之外的更多信息。

但是，您应该始终能够从 API 中的给定用户端点检索`gender`和检索。`locale`并不是说我会依赖`locale`位置信息本身，但根据您的需要，它可能至少有点用处。

# iphone - 我无法从弹出窗口的文本字段中获取文本。得到错误“原因：'文本字段索引（0）超出了文本字段数组的范围'”

> ID：15679573
> 
> 赞同：0
> 
> 时间：2013-03-28T10:35:25.537
> 
> 标签：iphone, xcode

实现了以下代码，但我收到错误“原因：'文本字段索引 (0) 超出了文本字段数组的范围'”

当弹出功能被触发时，我会弹出

```
- (IBAction)popup:(id)sender{

    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Post your message" message:@"\n\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
    UITextField *textField;
    textField = [[UITextField alloc] init];
    [textField setBackgroundColor:[UIColor whiteColor]];
    textField.delegate = self;
    textField.borderStyle = UITextBorderStyleLine;
    textField.frame = CGRectMake(15, 75, 255, 30);
    textField.font = [UIFont fontWithName:@"ArialMT" size:20];
    textField.placeholder = @"Post your message";
    textField.textAlignment = UITextAlignmentCenter;
    textField.keyboardAppearance = UIKeyboardAppearanceAlert;
    [textField becomeFirstResponder];
    [alert addSubview:textField];
    [alert show];

    //NSLog(@"%@",buttonIndex)

} 
```

![在此处输入图像描述](../Images/351be49e564f60e69473f088817299c3.png)

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    NSString *value=[[alertView textFieldAtIndex:0]text];
    if (buttonIndex == 1) {
        if ([[alertView textFieldAtIndex:0].text length] > 0 ||
            [alertView textFieldAtIndex:0].text != nil ||
            [[alertView textFieldAtIndex:0].text isEqual:@""] == FALSE)
        {
           NSLog(@" textbox value here => %@",value);
        }
        else
        {
             NSLog(@" text box was empty ");
        }
    } else {
        NSLog(@" Cancel is pressed");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:43:58.573

问题就在此时`[alertView textFieldAtIndex:0]`。您的 textField 不在第 0 位。如果您`NSLog(@"%@",[alertView subviews]);`可以看到您的文本字段最后在数组中而不是在第一个位置。所以尝试以这种方式获取文本字段。

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if (buttonIndex == 1) {
        NSLog(@"%@",[alertView subviews]);
        UITextField *txtField = [[alertView subviews] lastObject];
        if ([txtField.text length] > 0 ||
            txtField.text != nil ||
            [txtField.text isEqual:@""] == FALSE)
        {
            NSLog(@" textbox value here => %@",txtField.text);
        }
        else
        {
            NSLog(@" text box was empty ");
        }
    }
    else
    {
        NSLog(@" Cancel is pressed");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:40:12.790

首先在创建后在代码中添加这一行`UIAlertView`

```
[alert setAlertViewStyle:UIAlertViewStylePlainTextInput];// you can use also another style like... `UIAlertViewStyleSecureTextInput` or `UIAlertViewStyleLoginAndPasswordInput` 
```

然后试试下面的逻辑..

```
//your other code
UITextField *textField = [[UITextField alloc] init];
textField.tag = 111; // just add this line...
//your other code.. 
```

然后只需替换以下方法...

```
- (void) alertView:(UIAlertView *) alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   UITextField* myField = (UITextField*)[alertView viewWithTag:111];
   NSString *value = myField.text;
   if (buttonIndex == 1) {
      if ([[alertView textFieldAtIndex:0].text length] > 0 ||
        [alertView textFieldAtIndex:0].text != nil ||
        [[alertView textFieldAtIndex:0].text isEqual:@""] == FALSE)
      {
           NSLog(@" textbox value here => %@",value);
      }
      else
      {
           NSLog(@" text box was empty ");
      }
    } else {
       NSLog(@" Cancel is pressed");
    }
} 
```

# c# - 另一个引用旧 dll 的程序集

> ID：15679577
> 
> 赞同：3
> 
> 时间：2013-03-28T10:35:46.580
> 
> 标签：c#, assemblies, .net-assembly

我有 2 个程序集让我们称它们为 A 和 B。我已经为它们分配了强名称，现在出现的问题是程序集 B 正在寻找程序集 A 的旧版本。** EDIT2：如果我删除 AssemblyB，问题仍然存在，所以它可能只是VS2008在寻找旧版本？同样通过 fusionlog，我看到以下警告：wrn application configuration file binding redirects disallowed。这有什么关系吗？**

我收到多个相同类型的错误，这是一个片段：

```
You must add a reference to assembly 'AssemblyA, Version=1.2.4737.25316, Culture=neutral, PublicKeyToken=null'. 
```

项目中的强命名 AssemblyA 显示以下属性： ![在此处输入图像描述](../Images/9c711f10247816d39e2ff916eb491a37.png)

在 app.config 中，我放置了这段代码：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="AssemblyA" culture="neutral"
    publicKeyToken="a22e30ac6a0edfc0"/>
            <bindingRedirect oldVersion="1.2.4737.25316" newVersion="1.3.0.19440"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

但这不起作用。我可以访问这两个程序集的源代码。

编辑：如果我删除强命名并将旧（弱命名）dll 添加到项目中，它将给出一个错误，询问强命名版本

```
You must add a reference to assembly 'AssemblyA, Version=1.3.0.19440, Culture=neutral, PublicKeyToken=a22e30ac6a0edfc0'. 
```

这里发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:06:43.757

一些 DLL 仍然引用其他 DLL 的旧（弱命名）版本。幸运的是，程序集与源代码一起提供，所以我不得不重新编译包括密钥在内的所有内容。

之后出现了另一个错误，即“定位的程序集的清单定义与程序集引用不匹配”

为了解决这个问题，我在 app.config 中添加了以下内容。

```
<?xml version="1.0" encoding="utf-8" ?>
    <configuration>
      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <dependentAssembly>
            <publisherPolicy apply="no" />
            <assemblyIdentity name="Assemblyname" culture="neutral" publicKeyToken="3a5628535d42dbed"/>
            <bindingRedirect oldVersion="1.3.0.15233" newVersion="1.3.0.40647" />
          </dependentAssembly>
        </assemblyBinding>
      </runtime>
    </configuration> 
```

# google-chrome - 如何启用 Chrome DevTools 实验？

> ID：15679579
> 
> 赞同：11
> 
> 时间：2013-03-28T10:35:54.490
> 
> 标签：google-chrome, google-chrome-devtools

我刚刚在我的 Mac 上安装了 Google Canary。我想玩一下谷歌开发者工具中的实验。但我无法终生找到在哪里/如何启用它们。

我特别想看看在浏览器中使用/编辑 SASS。

谢谢戴夫

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T10:57:58.887

找到了

在 chrome 中转到 chrome://flags 并在那里启用它。

1.  去`chrome://flags`。
2.  查找**开发人员工具实验**。
3.  启用它。
4.  单击**立即**重新启动以重新启动 Chrome。

在 DevTools 设置中，现在有一个新的**Experiments**选项卡。

干杯

# windows - WHQL -DP WLK - 热替换 - 设备测试 - 验证驱动程序对 D3 电源状态的支持

> ID：15679583
> 
> 赞同：0
> 
> 时间：2013-03-28T10:36:12.640
> 
> 标签：windows

我正在尝试为 Windows server 2008R2 运行 WLK 测试，以便获得微软的认证。我的驱动程序是过滤器驱动程序。

问题是以下测试根本不会开始。

[DP WLK - 热添加​​ - 设备测试 - 验证热添加 CPU 的驱动程序支持](http://msdn.microsoft.com/en-us/library/windows/hardware/jj125231.aspx)

[DP WLK - 热替换 - 设备测试 - 验证驱动程序对 D3 电源状态的支持](http://msdn.microsoft.com/en-us/library/windows/hardware/hh998208.aspx)

我无法推断出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:21:48.843

你在什么硬件上运行测试？我遇到了同样的问题，我认为这与我使用的客户端硬件不是服务器硬件有关。它是多核但单CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:10:18.867

你有使用`Windows Server 2008 R2 Datacentre`不只是`windows Server 2008 R2`。在 中签入`constraints`该特定工作的工作`DTM Studio`。

# php - 配置文件到数组后的PHP未定义索引

> ID：15679584
> 
> 赞同：2
> 
> 时间：2013-03-28T10:36:14.317
> 
> 标签：php, arrays, file, undefined-index

这是我的配置加载代码：

```
 $WConfig;
    $lines = file($ToRootDirectory . 'config.txt', FILE_SKIP_EMPTY_LINES);
    foreach ($lines as $line_num => $line) {
        $line = trim($line);
        if (!(substr($line, 0, 1) == '#')){
            $WConfig[(trim(substr($line, 0, strpos($line, ":"))))] = trim(substr($line, strpos($line, ':') + 1));
        }
    }
    unset($lines, $line, $line_num, $temp);
    $host = $WConfig['mshost']; //line 11
    print_r($WConfig);          //line 12 
```

它加载这个配置文件：（ANSI）

```
 #--/ MySQL:             //Dont forget to execute Install.sql ;)
    #      username:        //NOT NEEDED TO BE ROOT -> Acces to INSERT, UPDATE, SELECT, SHOW
    msusername:PHP_Default
    #      password:
    mspassword:php
    #      database:
    msdatabase:PHP_Default
    #      host:
    mshost:localhost
    #--/ Session:
    #       sessionend: Time in minutes when the session will be end from last acces. Default 20 minutes. 
```

会议结束：20

但显示：

```
Notice: Undefined index: mshost in C:\######\PHP\LoadConfig.php on line 11
Array ( [msusername] => PHP_Default [mspassword] => php [msdatabase] => PHP_Default [mshost] => localhost [sessionend] => 20 ) 
```

第 11 行给出了一个错误，因为他找不到“mshost”，但如果我在第 12 行显示数组，“mshost”仍然存在。

谁知道这个问题的答案，我需要做什么来解决这个问题？

**更新：**它只出现在 msusername 和 mshost

**解答：**我已将 msusername 和 mshost 更改为数字 -> 0 和 1。这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:22:39.067

您的配置文件看起来很像 INI。（实际上，和 INI 完全一样，除了 : 而不是 =）

我建议你使用[PHP 的 INI 加载例程](http://php.net/manual/en/function.parse-ini-file.php)来避免这样的麻烦。

您的 INI 格式文件如下所示：

```
; Use sections if you want
[MySQL]
;--/ MySQL:             //Dont forget to execute Install.sql ;)
;      username:        //NOT NEEDED TO BE ROOT -> Acces to INSERT, UPDATE, SELECT, SHOW
msusername = PHP_Default

;      password:
mspassword = php

;      database:
msdatabase = PHP_Default

;      host:
mshost = localhost

[Sessions]
;--/ Session:
;       sessionend: Time in minutes when the session will be end from last acces. Default 20 minutes. 
```

# javascript - 使用附加到 html 标记的 IE10 类来定位 IE10

> ID：15679588
> 
> 赞同：0
> 
> 时间：2013-03-28T10:36:16.443
> 
> 标签：javascript, jquery, html, internet-explorer-10

我在网站上实现的 Extjs 元素存在一些问题，需要执行一些 IE10 特定样式来解决这些问题。我知道 IE10 不再支持旧的 IE 样式注释，您可以根据 IE 的版本有条件地指定一个不同的 html 标记并附加不同的类。因此，在这种情况下，我将不得不使用 jQuery 将 IE10 类附加到 HTML 标记中，这不是最佳解决方案，但由于我们的用户无论如何都需要启用 Javascript，因此这是我们目前的最佳选择。

我目前正在使用以下代码段来尝试实现这一目标：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
    <script type="text/javascript">
      if ($.browser.msie && $.browser.version == 10) {
         $("html").addClass("ie10");
    }
    </script> 
```

但是，如果我在开发人员模式下查看/在 IE10 中查看页面的源代码，则不会将任何内容附加到 HTML 标记中。然后，我使用 Firebug（因为 IE 开发人员工具很糟糕）检查我使用的脚本是否有任何问题，并且我的控制台中有以下消息：

```
 TypeError: $.browser is undefined
     [Break On This Error]  

      if ($.browser.msie && $.browser.version == 10) { 
```

由于我很少使用 Javascript 进行浏览器检测，我承认我从网络上借用了这个脚本，并且评论都表明它可以工作，但你可以清楚地看到它没有。

有没有人知道如何调整它以使其正常工作，或者我可以用来专门针对 IE10 使用我的 CSS 的任何替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:52:13.950

您可以使用条件编译来仅获取 IE10，这是一个好方法，因为它不依赖 jQuery 或任何可能被欺骗的东西（afaik）。

在 IE8、IE9、IE10、Chrome 上对其进行了测试，并按预期工作。

用法：

`if(Function('/*@cc_on return document.documentMode===10@*/')()){ $("html").addClass("ie10"); }`

继续阅读：[https ://stackoverflow.com/a/13971998/1711038](https://stackoverflow.com/a/13971998/1711038)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:08:26.477

自 jQuery v1.3 起， jQuery 的`$.browser`功能已被弃用。

对你来说更重要的是，在 1.9 版中，jQuery 删除了很多旧的不推荐使用的特性，包括这个。这就是它不适合你的原因。

如果您*必须*使用已弃用的旧功能，jQuery 开发人员确实提供了一个单独的迁移库，可以恢复所有旧功能。但它实际上只是用作短期的权宜之计；推荐的解决方案是修复您的代码，使其不使用旧功能。

不推荐使用 jQuery 的原因`$.browser`是因为浏览器检测被认为是不好的做法。几乎在每一种你想这样做的情况下，都有一种更好、更符合标准的方法来解决问题，而且浏览器越新，就越有可能出现这种情况——可以说是有充分理由的仍然对 IE6 等使用浏览器检测，但 IE10 是一个相当不错的浏览器，如果你真的遇到了无法克服的问题，我会感到惊讶。

有几种方法可以检测 IE10（我注意到你已经接受了一个答案），但老实说，我会说你最好找到你所遇到的样式问题的根本原因，并修复它，因为否则当 IE11 发布时，您将再次进行整个练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:11:59.827

当您使用 ExtJS 时，为什么不使用它来解决问题呢？

ExtJS 3.4.0 无法识别 ie10，但有一个覆盖可用：[https ://market.sencha.com/extensions/ext-isie10-for-extjs-3-x](https://market.sencha.com/extensions/ext-isie10-for-extjs-3-x)

那么你可以使用：

```
if (Ext.isIE10){
    Ext.fly(document.body.parentNode).addClass('ie10');
} 
```

工作代码：

```
Ext.onReady(function () {
    // override v3.4.0 ie10 = ie6 bug
    // https://market.sencha.com/extensions/ext-isie10-for-extjs-3-x
    (function() {

        var ua = navigator.userAgent.toLowerCase();
        check = function(r) {
            return r.test(ua);
        },
            isIE10 = Ext.isIE && check(/msie 10/),
            isIE6 = Ext.isIE && !Ext.isIE7 && !Ext.isIE8 && !Ext.isIE9 && !isIE10;

        /**
         * True if the detected browser is Internet Explorer 6.x.
         * @type Boolean
         */
        Ext.isIE6 = isIE6;

        /**
         * True if the detected browser is Internet Explorer 10.x.
         * @type Boolean
         */
        Ext.isIE10 = isIE10;

    })();

    if (Ext.isIE10){
        Ext.fly(document.body.parentNode).addClass('ie10');
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T09:59:52.807

如果您只对 IE 的浏览器检测感兴趣，那么我们使用以下似乎可行的方法。您可以通过传递正确的 ID 来更改要为其添加的 DIV。

```
 <!--[if IE 10]>
    <script  type="text/javascript">
        $(document).ready(function() {
            $("#ieFix").addClass("ie10");
        });
    </script>
<![endif]--> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T01:54:58.097

布局引擎使用特征检测来确定浏览器/浏览器版本，并将适当的 css 类添加到 html 标记中。它检测 IE11、IE10、IE9、IE8 和 IE7，以及其他流行的浏览器，包括一些移动浏览器。[http://mattstow.com/layout-engine.html](http://mattstow.com/layout-engine.html)

# excel - 从 MATCH 中查找下一个结果

> ID：15679589
> 
> 赞同：2
> 
> 时间：2013-03-28T10:36:18.137
> 
> 标签：excel, excel-formula, excel-indirect, excel-match

我正在尝试在 excel 中生成一个排序表，这取决于所选的年份和类别。

我的方法是在选定的年份和类别参数内按顺序找到最大值，执行以下操作：

**E 列**

```
{=LARGE(IF(('Master Data'!A$1:A$500 = $B$1) * ('Master Data'!B$1:B$500 = $B$2),'Master Data'!C$1:C$500), $B10)} 
```

这很好用，`$B$1$`是我存储年份`$B$2`的地方，是我存储类别的地方，`$B10`在 column 引用硬编码的 1-25 `B`。

**F栏**

```
{=MATCH(E10,IF(('Master Data'!A$1:A$500 = $B$1) * ('Master Data'!B$1:B$500 = $B$2),'Master Data'!C$1:C$500),FALSE)} 
```

这将返回我需要的结果的行号，然后我将其与`INDEX`查找相关数据一起使用。

这样做的问题是 Match 只返回第一行号，如果您有两个具有相同值的结果，这显然会成为一个问题。

**G栏**

为了解决这个问题，我使用了来自[dailydoseofexcel](http://dailydoseofexcel.com/archives/2011/11/29/finding-the-2nd-3rd-4th-match/)的示例，如下所示：

```
=IF(F10<>F11, F11, G10+MATCH(E11,INDIRECT("'Master Data'!C"&(G10+1)&":C500"),0)) 
```

出于我的目的，这在有限的范围内有效，因为它无法考虑我需要应用的年份和类别过滤器，所以我尝试了：

```
{=IF(F10<>F11, F11, G10+MATCH(E11,IF((INDIRECT("'Master Data'!A"&(G10+1)&":A500") = $C$2) * (INDIRECT("'Master Data'!B"&(G10+1)&":B500") = $C$3), INDIRECT("'Master Data'!C"&(G10+1)&":C500")),0))} 
```

但我只是得到`#N/A`结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:34:02.030

我认为**SUMPRODUCT**可能是您正在寻找的东西：

[Charley Kyd XL Legend：使用 SUMPRODUCT 获取列表中的最后一项](http://exceluser.com/explore/last-item-in-list.htm)

# kendo-ui - Kendo 图表的自定义工具提示，返回工具提示显示为未定义

> ID：15679591
> 
> 赞同：1
> 
> 时间：2013-03-28T10:36:21.080
> 
> 标签：kendo-ui

当使用允许我们为条形图/折线图自定义工具提示的事件时。传递给事件的 DataItem 作为 Undefined 返回。那么，是否有我可以设置的属性允许自定义工具提示，即使它们在一个小区域中有很多点。示例：**模板：“#= dataItem.employeeName #”**

```
 Any help would be appreciated. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:31:34.080

我认为您正在寻找[tooltip.template](http://docs.kendoui.com/api/dataviz/chart#configuration-tooltip.template-StringFunction)选项：

```
$("#chart").kendoChart({
     tooltip: {
         visible: true,
         template: "#=employeeName#"
     }
}); 
```

您不需要`dataItem`在字段名称之前指定。另外，请尝试检查`data`而不是`dataItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T07:49:13.013

试试这个：

```
 tooltip: {
                        visible: true,
                        template: "#= dataItem.title #: #= dataItem.percentage #%"
                    } 
```

对我来说，它工作得很好。让我知道是否有任何问题。

# qt - 如何在 Qt 中获得类似“灯箱”的行为

> ID：15679592
> 
> 赞同：0
> 
> 时间：2013-03-28T10:36:26.757
> 
> 标签：qt, lightbox2

我有一个 Qt 项目，我在其中使用 QGraphicsView 框架，而且我在场景中有弹出窗口。(QDialogs)

当有人单击某个按钮时，会出现一个弹出窗口，我正在使用该`.exec()`方法调用它，而不是`.show()`使其成为活动的。我还想给它一个视觉效果，就像[灯箱](http://lokeshdhakar.com/projects/lightbox2/)为 html 页面提供的那样，所以对于用户来说，背景窗口不会通信也是很明显的。您知道使其工作的任何简单解决方案吗？还是很难在 Qt 中实现？编辑：我不知道这是否明显，但它是桌面应用程序，而不是 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:51:37.327

只需在具有自定义背景和透明度的必要区域上创建 QFrame。对于动画效果，您可以使用 QPropertyAnimation + QGraphicEffects 和其他来自 qt 动画框架的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:01:50.937

现在我找到了另一种方法来完成我想要的。像这样：

`QWidget* mytranswidget = new QWidget(mybgwidget);
mytranswidget->setStyleSheet( "background:transparent; background-color:rgba(0,0,0‌​,95)");
mytranswidget->setWindowFlag(Qt::FramelessWindowHint);
mytranswidget->setGeometry(mybgwidget->rect());
mytranswidget->show();`

我在我的弹出窗口小部件的构造函数的开头这样做，所以它在绘制我的弹出窗口之前被绘制，所以它将以正确的顺序显示。

# c++ - 如何确保内存映射文件保持内存页面可访问？

> ID：15679597
> 
> 赞同：6
> 
> 时间：2013-03-28T10:36:51.763
> 
> 标签：c++, c, qt, mmap, memory-mapped-files

我正在使用 Qt 将文件映射到一块内存页面

```
QFile::map (qint64 offset, qint64 size, MemoryMapFlags flags = NoOptions) 
```

本质上，这应该是一个`mmap`系统函数调用。我想知道如何保证我可以访问返回的内存，即使磁盘上的文件被截断。我似乎需要这个，因为我从磁盘文件中读取并希望优雅地处理错误

```
if (offset > m_file.size()) 
  // throw an error...
if (m_mappedFile != NULL) return m_mappedFile + offset; 
```

显然，这包含一个竞争条件，因为文件大小可能会在检查和访问映射之间发生变化。如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:19:45.810

来自`man mmap`：

```
SIGBUS Attempted  access to a portion of the buffer that does not correspond to the file
       (for example, beyond the end of  the  file,  including  the  case  where  another
       process has truncated the file). 
```

所以你必须为 SIGBUS 安装一个信号处理程序（默认是崩溃程序）

# c# - Crystal Report 错误 无法启用约束

> ID：15679598
> 
> 赞同：1
> 
> 时间：2013-03-28T10:36:55.447
> 
> 标签：c#, .net

```
View_Atten_One_By_One mydataset1 = new View_Atten_One_By_One();

                    View_Atten_One_By_OneTableAdapters.DataTable1TableAdapter nfdAdapter1 = new View_Atten_One_By_OneTableAdapters.DataTable1TableAdapter();
                    nfdAdapter1.Fillattenbyemp(mydataset1.DataTable1, txtEmpId.Text);

                    ViewAttenByEmp nfpbdel1 = new ViewAttenByEmp();
                    nfpbdel1.SetDataSource(mydataset1);
                    crystalReportViewer1.ReportSource = nfpbdel1; 
```

错误

无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。

此代码段中的异常抛出

nfdAdapter1.Fillattenbyemp(mydataset1.DataTable1, txtEmpId.Text);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:37:42.263

如果发生这种错误，请删除 DataSet 中的主键

# javascript - 下拉选项和操作

> ID：15679599
> 
> 赞同：5
> 
> 时间：2013-03-28T10:36:55.993
> 
> 标签：javascript, html, select, drop-down-menu

我有一个下拉菜单，里面有选项。单击该选项时，它必须分别显示字段。就像选项1 ==一个文本框选项2 ==两个文本框等等......

```
<select id="dropdown">

    <option value="A">option1</option>
    <option value="B">option2</option>
    <option value="C">option3</option>
    <option value="D">option4</option>
</select> 
```

单击选项 1 时，必须显示一个字段。在选项 2 两个字段上.. 是 javascript 和 html 的新手。请朋友帮忙。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T10:52:22.117

如果您可以使用 jquery，则可以如下所示完成。更改时选择包含要显示的文本框数量的数据属性。然后 for 遍历它们并追加。

[**演示**](http://jsfiddle.net/vbMnQ/)

**html:**

```
<select id="dropdown">
    <option value="A" data-number="1">option1</option>
    <option value="B" data-number="2">option2</option>
    <option value="C" data-number="3">option3</option>
    <option value="D" data-number="4">option4</option>
</select>
<div id="textBoxContainer">

</div> 
```

**Javascript：**

```
$('#dropdown').change(function(){
    $('#textBoxContainer').empty();
    var number = $(this).find('option:selected').attr('data-number');
    for (var i = 0; i < number; i++){
          $('#textBoxContainer').append('<input type="text"/>');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:39:23.130

```
<select id="dropdown" onChange="showHide()">

    <option value="A">option1</option>
    <option value="B">option2</option>
    <option value="C">option3</option>
    <option value="D">option4</option>
</select>

 function showHide()
 {
   hideAll();
  var val = document.getElementById("dropdown").value;

  if(val == "A")
   document.getElementById("firstTextBoxId").style.display = 'block';
  else if(val == "B")
   document.getElementById("secondTextBoxId").style.display = 'block';
  else if(val == "C")
   document.getElementById("ThirdTextBoxId").style.display = 'block';
  else if(val == "D")
   document.getElementById("FourthTextBoxId").style.display = 'block';

}

function hideAll()
   {
      document.getElementById("firstTextBoxId").style.display = 'none';
      document.getElementById("secondTextBoxId").style.display = 'none';
      document.getElementById("thirdTextBoxId").style.display = 'none';
      document.getElementById("fourthTextBoxId").style.display = 'none';

    } 
```

# android - 如何从已安装的应用程序列表中隐藏应用程序

> ID：15679601
> 
> 赞同：3
> 
> 时间：2013-03-28T10:37:11.903
> 
> 标签：android

```
public class MyMainActivity extends ListActivity {
    int x;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        loadApps();

    }

    private void loadApps() {
        Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

        List<ResolveInfo> mApps = getPackageManager().queryIntentActivities(
                mainIntent, 0);

        ListView listView = getListView();
        listView.setAdapter(new AppsAdapter(this, mApps));
    }

    public class AppsAdapter extends BaseAdapter {
        private LayoutInflater inflater;
        private List<ResolveInfo> mApps;

        public AppsAdapter(Context context, List<ResolveInfo> mApps) {
            this.inflater = LayoutInflater.from(context);
            this.mApps = mApps;
        }

        class ViewHandler {
            TextView textLable;
            ImageView iconImage;
            Button buttn;

        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            final ViewHandler Handler;
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.customlist, null);
                Handler = new ViewHandler();
                Handler.textLable = (TextView) convertView
                        .findViewById(R.id.TV);
                Handler.iconImage = (ImageView) convertView
                        .findViewById(R.id.IV);
                Handler.buttn = (Button) convertView.findViewById(R.id.buttonx);
                convertView.setTag(Handler);
            } else {
                Handler = (ViewHandler) convertView.getTag();

            }

            ResolveInfo info = this.mApps.get(position);
            Handler.iconImage.setImageDrawable(info
                    .loadIcon(getPackageManager()));

            Handler.textLable.setText(info.loadLabel(getPackageManager()));
            Handler.buttn.setOnClickListener(new OnClickListener() {
                boolean isClicked = false;

                @Override
                public void onClick(View v) {

                    if (isClicked == false) {

                        Handler.buttn.setBackgroundResource(R.drawable.locker);
                        Toast.makeText(getApplicationContext(), "" + position,
                                Toast.LENGTH_SHORT).show();
                        isClicked = true;
                    } else {
                        Handler.buttn
                                .setBackgroundResource(R.drawable.unlocked);
                        isClicked = false;
                    }

                }
            });

            return convertView;

        }

        public final int getCount() {
            return mApps.size();
        }

        public final Object getItem(int position) {
            return mApps.get(position);
        }

        public final long getItemId(int position) {
            return position;
        }

    }

} 
```

如何从菜单中的所有应用程序中隐藏一个应用程序？如果有人想隐藏他或她将使用我的应用程序的应用程序，我只想为应用程序隐藏、安全或个人原因创建一个应用程序。这就是为什么我想知道如何隐藏应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:41:10.027

您可以使用以下方法隐藏应用程序：

```
PackageManager pm = getApplicationContext().getPackageManager();
pm.setComponentEnabledSetting(<component of the main Activity of the app you want to hide>, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

请记住，这也会禁用应用程序，因此它将不再响应任何意图等。如果您希望应用程序保持启用状态，您将必须编写自己的主屏幕并允许用户隐藏图标。当用户隐藏图标时，您可以使启动器停止在列表中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:47:28.693

它很容易。

如果您有 Packagename（很容易获得！），您可以使用以下代码启用禁用。请注意您将需要权限，并且您不能更改其他应用程序然后您的（因为用户 ID）。

```
public void disableDrawerIcon(String component) {
try {
    PackageManager pm = _context.getApplicationContext()
        .getPackageManager();

    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> appList = pm.queryIntentActivities(mainIntent, 0);
    Collections
        .sort(appList, new ResolveInfo.DisplayNameComparator(pm));
    ComponentName componentName = null;

    for (ResolveInfo temp : appList) {

    if (temp.activityInfo.packageName.equals(component)) {

        componentName = new ComponentName(component,
            temp.activityInfo.name);
    }

    }

    if (componentName != null) {
    pm.setComponentEnabledSetting(componentName,
        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
        PackageManager.DONT_KILL_APP);
    CustomLogger.log(TAG, "Icon disabled", _context);
    }
} catch (Exception e) {
    e.printStackTrace();
}
}

public void enableDrawerIcon(String component) {
try {
    PackageManager pm = _context.getApplicationContext()
        .getPackageManager();

    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> appList = pm.queryIntentActivities(mainIntent, 0);
    Collections
        .sort(appList, new ResolveInfo.DisplayNameComparator(pm));
    ComponentName componentName = null;

    for (ResolveInfo temp : appList) {

    if (temp.activityInfo.packageName.equals(component)) {

        componentName = new ComponentName(component,
            temp.activityInfo.name);
    }

    }

    if (componentName != null) {

    }
    pm.setComponentEnabledSetting(componentName,
        PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
        PackageManager.DONT_KILL_APP);
    CustomLogger.log(TAG, "Icon enabled", _context);
} catch (Exception e) {
    e.printStackTrace();
}
} 
```

# vba - 使用 VBA 通过 VoipBuster 发送 SMS

> ID：15679602
> 
> 赞同：0
> 
> 时间：2013-03-28T10:37:15.137
> 
> 标签：vba, excel, sms

我完全是初学者，但我正在尝试在 VBA 中制作一个宏，以便在条件完成时使用 VoipBuster 平台发送短信。

可能吗？是否更容易使用安装在 PC 或网页上的应用程序 ( [https://www.voipbuster.com/sms](https://www.voipbuster.com/sms) )。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:03:28.467

对于从 voipbuster 发送短信，您可以通过 php vars 发送...
`"[https://www.voipbuster.com/myaccount/sendsms.php?username=](https://www.voipbuster.com/myaccount/sendsms.php?username=)$USER&password=$PASS&from=$FROM&to=\"$TO\"&text=$SMS_TEXT"`

所以你需要像这样从vba访问iexplore，创建你的vars use，pass，text etcc和concat allthins，就像之前的URL一样。

从 VBA 调用 iexplore 你会发现很多用谷歌的方法，这里有一个例子

```
Private Sub IE_Autiomation()
    Dim i As Long 
    Dim IE As Object 
    Dim objElement As Object
    Dim objCollection As Object

    ' Create InternetExplorer Object
    Set IE = CreateObject("InternetExplorer.Application")

    ' You can uncoment Next line To see form results
    IE.Visible = False

    ' Send the form data To URL As POST binary request
    IE.Navigate "https://www.voipbuster.com/myaccount/sendsms.php?username=$USER&password=$PASS&from=$FROM&to=\"$TO\"&text=$SMS_TEXT" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:39:16.743

试试下面的代码。您还可以通过将 URL 变量中的值放入浏览器进行测试。

```
Sub SendSms()

    Dim username As String
    Dim password As String
    Dim sendTo As String
    Dim msg As String

    username = "test" 'enter username here
    password = "test" 'enter password here
    sendTo = "9999999999"
    msg = "Hello"

    Dim URL As String
    URL = "https://www.voipbuster.com/myaccount/sendsms.php?username=" & username & "&password=" & password & "&to=" & sendTo & "&text=" & msg

    Dim xml As Object
    Set xml = CreateObject("MSXML2.XMLHTTP")
    xml.Open "GET", URL, False
    xml.send
End Sub 
```

# php - 循环中的内存释放 PDO 语句结果

> ID：15679603
> 
> 赞同：1
> 
> 时间：2013-03-28T10:37:18.893
> 
> 标签：php, zend-framework, zend-db

我在基于 ZF1 的应用程序中使用以下代码：

```
$select = $db->select()->from('table', array('id', 'int', 'float'))->limit(10000, (($i - 1) * 10000));
$data = $select->query();
while ($row = $data->fetch()) {
     # ...
} 
```

此操作在 foreach 循环中发生了大约 800 次。我输出了每遍的内存使用情况，可以看到它每遍增加了大约 5MB。我想这是因为 Zend 显然不会在传递完成后从查询中释放结果。一个简单的 unset 并没有解决问题。使用 fetchAll 也没有改善（或改变）这种情况。

有没有办法从 Zend_Db_Statement_PDO 中释放结果，从而释放它使用的内存？还是您怀疑其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:08:12.520

我相信你想这样做：

```
$sql = "SELECT something FROM random-table-with-an-obscene-large-amount-of-entries";
$res = $db->query($sql);

while ($row = $res->fetch(Zend_Db::FETCH_NUM)) {
  // do some with the data returned in $row
} 
```

**Zend_Db::FETCH_NUM** - 在数组数组中返回数据。数组由整数索引，对应于查询的选择列表中相应字段的位置。

由于您在每个循环上覆盖 $row，因此应该回收内存。如果你是偏执狂，我相信你可以在循环的底部取消设置（$row）。我最近自己没有测试过这个，但是大约一年前我遇到了一个类似的批处理问题，我似乎记得使用过这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:06:55.717

实际上问题隐藏在其他地方：

*   在循环内部，一些整数结果存储在一个数组中，以便在工作流的稍后计划阶段进行修改。
*   虽然人们可能期望 PHP 数组很小，但事实并非如此：[数组增长得非常快](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)，PHP 数组平均比“预期”大 18 倍。使用数组时要小心，即使您只在其中存储整数！

如果链接的文章有时会消失：

> 在这篇文章中，我想使用以下脚本作为示例来研究 PHP 数组（以及一般值）的内存使用情况，该脚本创建 100000 个唯一整数数组元素并测量生成的内存使用情况：
> 
> ```
> $startMemory = memory_get_usage();
> $array = range(1, 100000);
> echo memory_get_usage() - $startMemory, ' bytes'; 
> ```
> 
> 你希望它是多少？很简单，一个整数是 8 个字节（在 64 位 unix 机器上并使用 long 类型），你有 100000 个整数，所以你显然需要 800000 个字节。这大约是 0.76 MB。
> 
> 现在尝试运行上面的代码。这给了我 14649024 字节。是的，你没听错，这是 13.97 MB - 是我们估计的 18 倍。

# android - 可扩展列表和拨号器

> ID：15679605
> 
> 赞同：0
> 
> 时间：2013-03-28T10:37:25.787
> 
> 标签：android, expandablelistadapter

我有一个带有标题和数字的可扩展列表。每当单击列表中的号码时，我都想使用拨号器完成操作。我坚持使用 getChildView 方法，我需要从列表中提取一个 numberString。我尝试了 numberString.getChild(groupPosition, childPosition) 但我有一个错误“不能在以不同方法定义的内部类中引用非最终变量 groupPosition” 有人知道该怎么做吗？感谢帮助。这是我的代码：

```
 public class ContactActivity extends ExpandableListActivity {

 ExpandableListAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Set up our adapter
        mAdapter = new MyExpandableListAdapter();
        setListAdapter(mAdapter);
      //  getExpandableListView().setOnChildClickListener(this);
    }

    public class MyExpandableListAdapter extends BaseExpandableListAdapter {
        // Sample data set.  children[i] contains the children (String[]) for groups[i].
        private String[] groups = { "General Enquiries", "Admissions Office"};
        private String[][] children = {
                { "+353-91-753161" },
                { "+353-91-742305", "+353-91-742262"}

        };

        public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public int getChildrenCount(int groupPosition) {
            return children[groupPosition].length;
        }

        public TextView getGenericView() {
            // Layout parameters for the ExpandableListView
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, 64);

            TextView textView = new TextView(ContactActivity.this);
            textView.setLayoutParams(lp);
            // Center the text vertically
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            // Set the text starting position
            textView.setPadding(70, 0, 0, 0);
            textView.setTextSize(TypedValue.COMPLEX_UNIT_SP,20);
            return textView;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getChild(groupPosition, childPosition).toString());
            textView.setTextSize(TypedValue.COMPLEX_UNIT_SP,15);

            textView.setOnClickListener(new View.OnClickListener(){

                public void onClick(View view){
                    MyExpandableListAdapter numberString = new MyExpandableListAdapter();
                    numberString.getChild(groupPosition, childPosition);
                    Uri number = Uri.parse("tel:" + numberString);
                    Intent dial = new Intent(Intent.ACTION_CALL, number);
                    startActivity(dial);
                    }
                });

            return textView;
        }

        public Object getGroup(int groupPosition) {
            return groups[groupPosition];
        }

        public int getGroupCount() {
            return groups.length;
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getGroup(groupPosition).toString());

            return textView;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public boolean hasStableIds() {
            return true;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:42:13.143

直接访问数据数组（本例中为子数组）

```
public void onClick(View view){
    String numberString = children[groupPosition][childPosition]
    Uri number = Uri.parse("tel:" + numberString);
    Intent dial = new Intent(Intent.ACTION_CALL, number);
    startActivity(dial);
    }
}); 
```

可以，在onClick中加入`final`groupPosition和childPosition就可以解决问题

```
public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) { 
```

这是因为，在 Java 中，您无法访问类型的匿名内部类中的非最终变量`View.OnClickListener`

# asp.net - 防止下拉列表关闭

> ID：15679610
> 
> 赞同：3
> 
> 时间：2013-03-28T10:37:56.857
> 
> 标签：asp.net

我正在使用 ajax toolkit -> Dropdown extender 并在下拉列表中有一个 gridview ..

除了一个大问题外，它运行良好。

每次我做某事（单击gridview 内的一个控件，下拉菜单关闭）我必须再次打开它来做下一件事。

例如：

1.  打开下拉菜单
2.  单击gridview内的文本框
3.  下拉关闭
4.  去 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:38:19.507

在这里找到：http: [//www.dotnetcurry.com/ShowArticle.aspx? ID=167](http://www.dotnetcurry.com/ShowArticle.aspx?ID=167)

您可以通过 javascript 打开下拉菜单。大概当用户与您的控件交互时，通过更新面板发生部分回发？如果是这样，您可以在 PageLoad javascript 事件中使用此代码。

```
<body>
    <form id="form1" runat="server">
     <script type="text/javascript">  
    function pageLoad()
    {
          var d = $get('TextBox1');
          d.click();
    }
   </script>
... ScriptManager and other Controls come here
</body>
</html> 
```

# sql - SQL 根据最大 列获取行

> ID：15679617
> 
> 赞同：1
> 
> 时间：2013-03-28T10:38:20.720
> 
> 标签：sql, sql-server-2008, greatest-n-per-group

我从最大列中获取行时遇到问题，这里是插图：[http ://sqlfiddle.com/#!3/15207/9](http://sqlfiddle.com/#!3/15207/9)

基本上我想获得学生的最高成绩以及成绩ID（gid）。但查询不正确，因为使用将返回 2 的最大等级 id。

第一门课，学生得了 D（1 分）。第二次参加课程，学生获得 E（0 分）。

该 1 点的 Gradeid 为 1。

我希望查询结果是：1（userid），1（subjectid），1（gradeid），1（score）

谢谢

更新 01：

更改进的例子：[http ://sqlfiddle.com/#!3/97997/2](http://sqlfiddle.com/#!3/97997/2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:42:14.927

**更新 1**

```
WITH highestScore
AS
(
    SELECT  a.uid StudentID,
            a.uname StudentName,
            b.Score, 
            c.cname CourseName,
            c.semester,
            d.sname SubjectName, d.sid, 
            DENSE_RANK() OVER (PARTITION BY a.uid, d.sid
                               ORDER BY b.Score DESC) rn
    FROM    Users a
            INNER JOIN Grades b
                ON a.uid = b.uid
            INNER JOIN Courses c
                ON b.cid = c.cid
            INNER JOIN Subjects d
                ON c.sid = d.sid
)
SELECT  StudentID, StudentName, CourseName, semester,
        SubjectName, Score
FROM    highestScore
WHERE   StudentID = 1 AND  -- StudentID
        sid = 1 AND        -- SubjectID
        RN = 1             -- leave this as is (rank of the highest score) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/97997/15)

# javascript - Socket.IO 每发射一个数组（...）

> ID：15679619
> 
> 赞同：1
> 
> 时间：2013-03-28T10:38:24.070
> 
> 标签：javascript, node.js, sockets, webrtc

我正在尝试在我的套接字 io 服务器中构建一个数组并将其发送到客户端。

```
 var roomList = io.sockets.manager.rooms;

    // new Array to save the clients per room
    var clientsPerRoom = new Array();

    //for (var i = 0; i < roomList.length; i++) {
    for (var room in roomList) {
        room = room.replace("/", "");

        // get the clients per room
        var clients = io.sockets.clients(room).length;

        // saving it in the array at the name of the room
        clientsPerRoom[room] = clients;
    }
    // transmit it to the client
    io.sockets.emit('roomList', roomList, clientsPerRoom); 
```

在客户端

```
var clients = 1;

        for (room in roomList) {
            if (room.length > 0) {
                room = room.replace("/", "");

                clients = clientsPerRoom[room];

                console.log("ROOM: '" + room + "' has '" + clients + "' CLIENTS");

            }
        } 
```

在客户端，“clientsPerRoom”是“[]”（空？），所以“clients”是“未定义的”。我究竟做错了什么？

在来自服务器的控制台日志中，如果用户是连接的，则值为 1。如果有更多用户在线，那么它仍然是 1，但至少它应该将此值发送给客户端。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:02:52.413

最后我解决了它：

```
 var clients = io.sockets.clients(room).length;
            // has to look like this:
            //clientsPerRoom = {"test" : 3, "xyz" : 4};
            clientString = '"' + room + '" : "' + clients + '",' + clientString;

            console.log("clientsPerRoom[" + room + "] : " + clientsPerRoom[room]);
            console.log("__END OF LOOP__");
        }
    }
    //cut the "," et the end of the string (else: ERROR!)
    clientString = clientString.substr(0, clientString.length-1);
    // parse it with JSON to pretend beeing a object
    clientsPerRoom = JSON.parse('{' + clientString + '}');

    // now send it to the client
    io.sockets.emit('roomList', roomList, clientsPerRoom, totalClients); 
```

现在另一个问题是，

```
var clients = io.sockets.clients(room).length; 
```

总是 1...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:31:25.393

即使解决了。

问题是：io.sockets.clients(room) 只计算接受网络摄像头访问的用户，否则他们还不是“真正”在房间里。

问候

# java - 将 JPA 与 Hibernate 实现一起使用：entityManager.remove - 不起作用

> ID：15679620
> 
> 赞同：5
> 
> 时间：2013-03-28T10:38:29.093
> 
> 标签：java, hibernate, jpa, persistence

我在`Hibernate 4.1.4.Final`实现上使用 JPA。我的问题是我无法`EntityManager#remove()`工作。所有其他：更新、插入、选择操作都工作得很好，除了这个。

我的`persistence.xml`文件：

```
<persistence-unit name="myEntityManager">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>core.entity.Answer</class>
    <class>core.entity.BaseEntity</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <validation-mode>NONE</validation-mode>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
</persistence-unit> 
```

我的`Answer`实体：（BaseEntity 类只保存主键 - ID）

```
@Entity
@Table(name = "ANSWER")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Answer extends BaseEntity {

    @Column(name = "ANSWER_VALUE")
    private String answerValue;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "QUESTION_ID", nullable = false)
    private Question question;                

    //overrided equals, hascode, toString 
    // all getters and setters
} 
```

调用时：

```
public void remove(T entity) {
    this.entityManager.remove(this.entityManager.merge(entity));
} 
```

也试过：

```
this.entityManager.remove(entity); 
```

和：

```
T ref = entityManager.getReference(entityClass, primaryKey);
entityManager.remove(ref); 
```

不走运:(它没有`Answer`从数据库中删除记录。

我正在使用 Spring 配置来配置实体管理器，如下所示：

```
<bean id="persistenceUnitManager" class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="persistenceXmlLocations">
        <list>
            <value>classpath*:META-INF/persistence.xml</value>
        </list>
    </property>
    <property name="defaultDataSource" ref="dataSource"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitManager" ref="persistenceUnitManager"/>
    <property name="persistenceUnitName" value="myEntityManager"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven proxy-target-class="true" transaction-manager="transactionManager"/> 
```

`remove`在带有注解的方法中调用`@Transactional`。所以这不应该是交易问题。

我已启用 Hibernate SQL 日志记录，以及所有其他日志记录。我在任何地方都看不到`delete`将执行查询或任何错误。

我真的没有选择。请指教。

**编辑**

也许这也会有所帮助：

我正在从另一个实体获得答案列表。答案是这样定义的：

```
@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "evaluationPart")
private List<Answer> answers = new LinkedList<>(); 
```

像这样调用删除：

```
List<Answer> answers = evaluationPart.getAnswers();
if (answers != null && answers.size() > 0) {
    for (Answer answer : answers) {
        answerFacade.remove(answer); //This calls enetityManager.remove
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:37:28.793

我可能不在主题范围内，但这些可能是问题的问题

**第一个原因**- 此条目中未定义 cascadeType

```
 @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "QUESTION_ID", nullable = false)
    private Question question; 
```

**第二个原因**（更多的建议）

由于 Answer 的链表映射到 Question 对象，因此不建议直接从列表中删除单个对象。最好从链表中删除元素，然后更新/合并问题对象，这将在答案表上自动执行删除操作。

希望这可以帮助 ：）

# java - PBEWITHSHA1AND128BITAES-CBC-BC 算法 - 必须为 16 字节长错误

> ID：15679621
> 
> 赞同：1
> 
> 时间：2013-03-28T10:38:30.750
> 
> 标签：java, cryptography, encryption

我有一个 PSKC XML 文件，其中包含我的 Salt/Key、IV（初始化
向量）、加密数据和密码。

现在，我正在尝试使用`PBEWITHSHA1AND128BITAES-CBC-BC`算法进行基于密码的加密和解密。

如果我随机生成盐和 IV，它会起作用。

但是，如果我不随机生成它，它会失败。我没有随机生成 Salt 和 IV，而是使用自己的 salt、IV、密码和所有内容。

这是我的代码：

```
 /**
    * parts of this code were copied from the StandardPBEByteEncryptor class from
    * the Jasypt (www.jasypt.org) project
    */
    public class AESCrypt
    {
    private final String KEY_ALGORITHM = "PBEWITHSHA1AND128BITAES-CBC-BC";
    // private final String KEY_ALGORITHM = "PBEWithSHA256And256BitAES-CBC-BC";
    private final String MODE_PADDING = "/CBC/PKCS5Padding";
    private final int DEFAULT_SALT_SIZE_BYTES = 128;
    private byte[] ivParamSpec1 = 
           {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
    private final SecureRandom rand;
    private final String passwd = "kn4\"bE,W11kewsUd";
    public AESCrypt() throws Exception
    {
    rand = SecureRandom.getInstance("SHA1PRNG");
    }
    private byte[] generateSalt(int size)
    {
    byte[] salt = new byte[size];
    rand.nextBytes(salt);
    return salt;
    }
    private SecretKey generateKey(String algorithm, int keySize, byte[] salt)
    throws NoSuchProviderException, NoSuchAlgorithmException,
    InvalidKeySpecException
    {
    // SecretKeySpec Spec = new SecretKeySpec(keyBytes, algorithm);
    SecretKeyFactory factory = SecretKeyFactory.getInstance(KEY_ALGORITHM);
    PBEKeySpec pbeKeySpec = new PBEKeySpec(passwd.toCharArray(), salt,100000);
    SecretKey tmpKey = factory.generateSecret(pbeKeySpec);
    byte[] keyBytes = new byte[keySize / 8];
    SecretKeySpec Spec = new SecretKeySpec(keyBytes, algorithm);
    System.arraycopy(tmpKey.getEncoded(), 0, keyBytes, 0, keyBytes.length);
    System.out.println("SecretKeySpec(keyBytes, algorithm)---->"+Spec);
    return Spec;
    }
    private byte[] generateIV(Cipher cipher)
    {
    byte[] iv = new byte[cipher.getBlockSize()];
    rand.nextBytes(iv);
    return iv;
    }
    private byte[] appendArrays(byte[] firstArray, byte[] secondArray)
    {
    final byte[] result = new byte[firstArray.length + secondArray.length];
    System.arraycopy(firstArray, 0, result, 0, firstArray.length);
    System.arraycopy(secondArray, 0, result, firstArray.length, secondArray.length);
    return result;
    }
    public byte[] encrypt(String algorithm, int keySize, final byte[] message)
    throws Exception
    {
    Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);
    // The salt size for the chosen algorithm is set to be equal
    // to the algorithm's block size (if it is a block algorithm).
    int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
    int algorithmBlockSize = cipher.getBlockSize();
    if (algorithmBlockSize > 0)
    {
    saltSizeBytes = algorithmBlockSize;
    }
    // Create salt
    // final byte[] salt = generateSalt(saltSizeBytes);
    final byte[] salt = "EW0h0yUcDX72WU9UiKiCwDpXsJg=".getBytes();
    SecretKey key = generateKey(algorithm, keySize, salt);
    // create a new IV for each encryption
    // final IvParameterSpec ivParamSpec = new IvParameterSpec();
    ivParamSpec1 = "ixYgnjjY58RNacxZHwxgBQ==".getBytes();
    final IvParameterSpec ivParamSpec = new IvParameterSpec(ivParamSpec1);
    // Perform encryption using the Cipher
    cipher.init(Cipher.ENCRYPT_MODE, key, ivParamSpec);
    byte[] encryptedMessage = cipher.doFinal(message);
    // append the IV and salt
    encryptedMessage = appendArrays(ivParamSpec.getIV(), encryptedMessage);
    encryptedMessage = appendArrays(salt, encryptedMessage);
    return encryptedMessage;
    }
    public byte[] decrypt(String algorithm, int keySize, final byte[] encryptedMessage) throws Exception
    {
    Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);
    // determine the salt size for the first layer of encryption
    int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
    int algorithmBlockSize = cipher.getBlockSize();
    if (algorithmBlockSize > 0)
    {
    saltSizeBytes = algorithmBlockSize;
    }
    System.out.println("saltSizeBytes:" + saltSizeBytes);
    byte[] decryptedMessage = new byte[encryptedMessage.length];
    System.arraycopy(encryptedMessage, 0, decryptedMessage, 0,
    encryptedMessage.length);
    // extract the salt and IV from the incoming message
    byte[] salt = null;
    byte[] iv = null;
    byte[] encryptedMessageKernel = null;
    final int saltStart = 0;
    final int saltSize = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes
    : decryptedMessage.length);
    // final int saltSize = 32;
    // System.out.println("saltSize:"+saltSize);
    final int ivStart = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes
    : decryptedMessage.length);
    final int ivSize = cipher.getBlockSize();
    final int encMesKernelStart = (saltSizeBytes + ivSize < decryptedMessage.length ? saltSizeBytes
    + ivSize
    : decryptedMessage.length);
    final int encMesKernelSize = (saltSizeBytes + ivSize < decryptedMessage.length ? (decryptedMessage.length
    - saltSizeBytes - ivSize)
    : 0);
    salt = new byte[saltSize];
    iv = new byte[ivSize];
    System.out.println("saltSize:" + saltSize);
    System.out.println("ivSize:" + ivSize);
    encryptedMessageKernel = new byte[encMesKernelSize];
    System.out.println("encryptedMessageKernel");
    System.arraycopy(decryptedMessage, saltStart, salt, 0, saltSize);
    System.arraycopy(decryptedMessage, ivStart, iv, 0, ivSize);
    System.arraycopy(decryptedMessage, encMesKernelStart,
    encryptedMessageKernel, 0, encMesKernelSize);
    SecretKey key = generateKey(algorithm, keySize, salt);
    System.out.println("ekey");
    ivParamSpec1 = "ixYgnjjY58RNacxZHwxgBQ==".getBytes();
    IvParameterSpec ivParamSpec = new IvParameterSpec(ivParamSpec1);
    // Perform decryption using the Cipher
    cipher.init(Cipher.DECRYPT_MODE, key, ivParamSpec);
    decryptedMessage = cipher.doFinal(encryptedMessageKernel);
    // Return the results
    return decryptedMessage;
    }
    private byte[] decryptWithLWCrypto(byte[] cipher, String password, byte[] salt, final int iterationCount)
    throws Exception
    {
    PKCS12ParametersGenerator pGen = new PKCS12ParametersGenerator(new SHA256Digest());
    char[] passwordChars = password.toCharArray();
    final byte[] pkcs12PasswordBytes = PBEParametersGenerator.PKCS12PasswordToBytes(passwordChars);
    pGen.init(pkcs12PasswordBytes, salt, iterationCount);
    CBCBlockCipher aesCBC = new CBCBlockCipher(new AESEngine());
    ParametersWithIV aesCBCParams = (ParametersWithIV) pGen.generateDerivedParameters(256, 128);
    aesCBC.init(false, aesCBCParams);
    PaddedBufferedBlockCipher aesCipher = new PaddedBufferedBlockCipher(aesCBC,new PKCS7Padding());
    byte[] plainTemp = new byte[aesCipher.getOutputSize(cipher.length)];
    int offset = aesCipher.processBytes(cipher, 0, cipher.length, plainTemp, 0);
    int last = aesCipher.doFinal(plainTemp, offset);
    final byte[] plain = new byte[offset + last];
    System.arraycopy(plainTemp, 0, plain, 0, plain.length);
    System.out.println("Plain--->"+plain);
    return plain;
    }
    public static void main(String[] args) throws Exception
    {
    Security.addProvider(new BouncyCastleProvider());
    AESCrypt aesCrypt = new AESCrypt();
    String originalText = "6skYngWZxkTgsRIoFPLS1mpI32Q=";
    String toDecrypt = new String(Base64.encode(aesCrypt.encrypt("AES", 128, originalText.getBytes())));
    System.out.println("Original Data----->"+originalText);
    System.out.println("After Encrpytion--->"+toDecrypt);
    byte[] criptata = Base64.decode(toDecrypt);
    byte[] decriptata = aesCrypt.decrypt("AES", 128, criptata);
    String msgdecriptato = new String(decriptata);
    System.out.println("After Decrption--->"+msgdecriptato);
    if (!originalText.equals(msgdecriptato))
    {
    throw new IllegalStateException("Strings do not match!");
    }
    else
    {
    System.out.println("Matched.....");
    }
    // byte[] cipher = "RVcwaDB5VWNEWDcyV1U5VWlLaUN3RHBYc0pnPWl4WWduampZNThSTmFjeFoJfgJbigcnDs0TJdNu7yEkprlJFdilLrLJT8uoQ3dm/A==".getBytes();
    // String password = "kn4\"bE,W11kewsUd";
    // byte[] salt = "EW0h0yUcDX72WU9UiKiCwDpXsJg=".getBytes();
    // System.out.println(aesCrypt.decryptWithLWCrypto(cipher, password, salt , 128));
    }
    }
    When I try to run this... Am getting following Errors,
    Exception in thread "main" java.security.InvalidAlgorithmParameterException: Wrong IV length: must be 16 bytes long
    at com.sun.crypto.provider.SunJCE_f.a(DashoA13*..)
    at com.sun.crypto.provider.AESCipher.engineInit(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at AESCrypt.encrypt(AESCrypt.java:113)
    at AESCrypt.main(AESCrypt.java:213) 
```

我不能截断盐大小或 IV 大小，那么就不会有任何数据完整性。

即使我将 IV 大小从 28 个字节截断为 16 个字节，它也适用于加密，但不适用于解密。它会产生以下错误：

```
 Exception in thread "main" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher

at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at AESCrypt.decrypt(AESCrypt.java:163)
at AESCrypt.main(AESCrypt.java:178) 
```

谁能帮我？

# xml - 如何在 xsl 中创建超链接

> ID：15679622
> 
> 赞同：0
> 
> 时间：2013-03-28T10:38:37.320
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我正在使用以下 xml 并希望使用 xslt 在 HTML 中显示。

```
 <resultDetailsData>
    <itemProperties>
      <ID>0</ID> 
      <type>RESULTSTATUS</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="status">NOSTATUS</value> 
    </itemProperties>
    <itemProperties>
      <ID>1</ID> 
      <type>LEVEL</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:int">1</value> 
    </itemProperties>
    <itemProperties>
      <ID>2</ID> 
      <type>RESULTTYPE</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="resultType">SCREENIMAGE</value> 
    </itemProperties>
    <itemProperties>
      <ID>3</ID> 
      <label>Description</label> 
      <type>TEXT</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">SC</value> 
    </itemProperties>
    <itemProperties>
      <ID>4</ID> 
      <type>LINK</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">2013-03-25 111117-840.jpg</value> 
    </itemProperties>
    <itemProperties>
      <ID>5</ID> 
      <type>SCREENSHOT</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">2013-03-25 111117-840.jpg</value> 
    </itemProperties>
    <itemProperties>
      <ID>6</ID> 
      <type>DURATION</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:long">711</value> 
    </itemProperties>
    <itemProperties>
      <ID>7</ID> 
      <type>STEPDESCRIPTION</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">SC</value> 
    </itemProperties>
    <itemProperties>
      <ID>8</ID> 
      <type>RESULTDESCRIPTION</type> 
      <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">Screen Capture - SC</value> 
    </itemProperties>
  </resultDetailsData> 
```

我必须为值标签**类型*** *RESULTDESCRIPTION* * 的值创建超链接。即，“屏幕捕获 - SC”当我单击它时，它应该打开文件，其值将来自标记**类型*** *LINK* * 的值。即“2013-03-25 111117-840.jpg”。

我正在为此寻找 xsl 代码。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:47:11.433

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>
    <xsl:template match="/resultDetailsData">
        <a href="{itemProperties[type='LINK']/value}"><xsl:value-of select="itemProperties[type='RESULTDESCRIPTION']/value"/></a>
    </xsl:template>
</xsl:transform> 
```

**[工作示例](http://xsltransform.net/eiQZDbb)**

# c# - 在javascript函数中调用request.querystring

> ID：15679638
> 
> 赞同：3
> 
> 时间：2013-03-28T10:39:58.480
> 
> 标签：c#, javascript, asp.net

如何在javascript函数中调用Request.QueryString，我正在使用asp.net和C#

```
var str=<%=Request.quesryString("val")%> 
```

但它给了我错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:51:40.280

如果此 javascript 代码内联在您的网络表单中，则正确的方法是使用[`javascript serializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)：

```
<script type="text/javascript">
    var str = <%= new JavaScriptSerializer().Serialize(Request.QueryString["val"]) %>;
    alert(str);
</script> 
```

**切勿**执行以下操作，这是完全不安全的，并且您的网站容易受到 XSS 注入攻击：

```
<script type="text/javascript">
    var str = '<%= Request.QueryString["val"] %>';
    alert(str);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T14:59:50.450

你可以直接用 JavaScript 来做。

随着`window.location.search`您获得完整的queryString，例如 `?item1=val1&item2=val2`

您可以使用类似的方法获取查询字符串

> window.location.search.substr(1)

并使用`.split('&')`或*子字符串*函数来获取 de 'val' 键或其他键的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-02T16:49:03.347

您实际上可以在 javascript 中编写一个函数，并将查询字符串作为参数从后面的代码中传递。例如我有这个文本框我想将值设置为查询

```
function searchTerm(text) {
        document.getElementById('txtSearch').value = text;
} 
```

所以在我的代码中，我使用 ScriptManager 调用 javascript 函数并以这种方式传递查询

```
ScriptManager.RegisterStartupScript(Page, typeof(Page), "", "searchTerm('" + Request.QueryString["id"].ToString() + "')", true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:24:33.890

在 ASP NET 中的请求中利用安全主题...

您还可以使用[JavaScriptStringEncode()](http://msdn.microsoft.com/en-us/library/system.web.httputility.javascriptstringencode.aspx)或[AntiXSS 库](http://msdn.microsoft.com/en-us/security/aa973814)来防止网站中的 XSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-02T07:24:18.357

用这个：

> var urlParams = 新的 URLSearchParams(window.location.search);
> 
> console.log(urlParams.has('someValue')); // 真的
> 
> console.log(urlParams.get('someValue')); // “价值”

这是关键敏感

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-04T17:34:24.600

您做错了使用此代码获取 QueryString 值，因为它不仅在 JavaScript 中为您提供查询字符串，它会将其转换为对象，因此请使用 $.each 函数来检索查询字符串的值

```
 let id = $(<%= Request.QueryString["id"] %>);
                    id.each((index, value) => {
                        console.log(value);
                    }) 
```

它将返回您的查询字符串的值谢谢

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-28T10:47:02.753

简短的回答：你不能。块中的代码在`<%= %>`服务器端进行评估，JavaScript 代码在客户端进行评估。

长答案：您可以使用内联 C# 代码生成 JavaScript 代码，这有时确实有意义。但这与从 JavaScipt 函数调用 C# 代码不同。当然，您只能在 .aspx / .cshtml 等文件中执行此操作，而不能在 .js 文件中执行此操作，因为这些文件仅被视为内容，而不会被 ASP.NET 解析。

[编辑] 在您的情况下，无论如何都不需要打扰，因为无论如何您都可以通过 JS 获取查询字符串，请参阅[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

[EDIT2]：当然，关于 JavaScriptSerializer 的另一个答案在安全性方面是绝对正确的。如果您使用 Razor 视图引擎，事情会变得更容易和更安全，因为它默认转义字符串。但就像我说的，在具体情况下，没有必要费心任何一种方式。

# plone - 允许编辑敏捷添加/编辑表单的简称

> ID：15679643
> 
> 赞同：0
> 
> 时间：2013-03-28T10:40:18.083
> 
> 标签：plone, dexterity

我希望一些自定义敏捷类型可以为其短名称（ID，这将是 URL 的一部分）字段显式编辑。如果短名称字段留空，则将通过启用的`plone.app.content.interfacess.INameFromTitle`行为从（必需的）标题字段值计算。

默认情况下，添加/编辑类型时我看不到短名称字段。只有通过`object_rename`操作菜单，我才能设置它的短名称。这项任务的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:24:19.873

该字段*根本*`id`不是 Dexterity 模式的一部分。

 *您必须创建一个添加它的附加行为。*

# javascript - 如何使用“this”添加字符串

> ID：15679644
> 
> 赞同：0
> 
> 时间：2013-03-28T10:40:23.387
> 
> 标签：javascript, jquery, string, each, prepend

假设我有一个字符串数组。我想在每个字符串前面加上一个固定的（通用）字符串。*我知道*在 Javascript 中，字符串可以像`strM = str1 + str2 + str3 + ... + strN`or一样连接`strM = concat(str1, str2, str3, ..., strN)`。考虑这段代码。

```
var defImgDirPath = 'res/img/';
$([
  'home-icon-dark.png',
  'home-icon-light.png'
]).each(function() {
  /*
   * Prepend each string with defImgDirPath
   */
}); 
```

现在我做不到`this = defImgDirPath + this;`（我愚蠢到想尝试）

另外，我试过`return (defImgDirPath + this);`了，但这也行不通。

我在想一些类似函数的东西，`this.prependString(defImgDirPath);`但是这样的函数存在吗？如果没有，我该怎么写？

注意：*我知道它也可以很容易地通过`for`循环来完成，但是这样做有什么乐趣呢？:)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:44:54.633

```
var defImgDirPath = 'res/img/';
var images = [
    'home-icon-dark.png',
    'home-icon-light.png'
];
$(images).each(function(idx, val) {
  images[idx] = defImgDirPath + val;
});

console.log(images); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:45:27.347

在 javascript (ECMA 5) 的最新标准中，您可以在没有 jquery 的情况下执行此操作：

```
var defImgDirPath = 'res/img/';

['home-icon-dark.png','home-icon-light.png'].map(function(i) { 

        return defImgDirPath + i;  }); 
```

编辑：此外，jquery 的 map 功能也类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:44:45.773

问题是您正在更改数组中项目的副本，因此数组将不受影响。

循环遍历数组中的索引并将结果放回数组中：

```
var arr = [ 'home-icon-dark.png', 'home-icon-light.png' ];

for (var i = 0; i < arr.length; i++) {
  arr[i] = defImgDirPath + arr[i];
} 
```

如果您真的想使用 jQuery 中的循环方法，那么您需要使用`map`, 以便将结果作为数组获得。请注意，您需要使用回调函数的参数，而`this`不是数组中的项目：

```
arr = $.map(arr, function(str){
  return defImgDirPath + str;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:46:44.447

在Javascript中，`this`总是引用一个对象（当前上下文对象），所以它永远不会是一个字符串，因此尝试将它与另一个字符串连接会失败，正如你所发现的。

然而，你不需要使用 jQuery 或对象来做你正在做的事情。您只是在每个字符串数组的开头添加一个已知值。

让我们用标准的 Javascript 重写它，没有 jQuery 的复杂性......

```
var defImgDirPath = 'res/img/';
var images = [
  'home-icon-dark.png',
  'home-icon-light.png'
];

for(var count=0; count<images.length; count++) {
    images[count] = defImgDirPath + images[count];
} 
```

我已将图像数组放入一个变量中，以便更容易查看实际的循环代码在做什么。如您所见，这是一个非常简单的循环；这里不需要 jQuery 魔法。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T10:48:35.820

> `this.prependString(defImgDirPath);`

不，字符串在 JavaScript 中是不可变的。连接到新字符串会很好，使用[`.concat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/concat)它看起来像

```
var newString = defImgDirPath.concat(this); // no static function! 
```

> 如果不存在，我该如何写一个？

你不能，因为[将对象分配给“this”](https://stackoverflow.com/q/15598549/1048572)是不可能的。

相反，您必须分配给您正在处理的数组的属性（使用[静态`$.each`](http://api.jquery.com/jQuery.each/)而不是处理集合）：

```
var arr = [
  'home-icon-dark.png',
  'home-icon-light.png'
];
$.each(arr, function(i) {
   arr[i] = defImgDirPath + this;
});
arr[0] // res/img/home-icon-dark.png 
```

> 我也试过`return (defImgDirPath + this);`

您需要为此使用[map](http://api.jquery.com/jQuery.map)，创建一个新数组：

```
var arr = $.map([
  'home-icon-dark.png',
  'home-icon-light.png'
], function(str) {
    return defImgDirPath + str;
}); 
```

* * *

当然，完全没有 jQuery 可能会更容易：

```
for (var i=0; i<arr.length; i++) {
    arr[i] = defImgDirPath + arr[i];
} 
```

并且还[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)可以作为本机功能使用（不在过时的浏览器中）：

```
var arr = [
  'home-icon-dark.png',
  'home-icon-light.png'
].map(function(str) {
    return defImgDirPath + str;
}); 
```

# android - 软键盘下一次按下不移动到它下面的编辑文本但向右移动

> ID：15679645
> 
> 赞同：0
> 
> 时间：2013-03-28T10:40:32.307
> 
> 标签：android, android-layout

我有一个布局，其中有多个editText。我希望当按下软键盘的下一个时，焦点应该移动到先前具有焦点的编辑文本下方的编辑文本。但是当按下下一个时，焦点移动到位于先前具有焦点的编辑文本右侧的编辑文本。如果我从编辑文本中删除 onEditorAction 侦听器，我发现它会向下移动。但问题是我有一些依赖于 onEditorAction 侦听器的功能，因此无法删除 onEditorAction 侦听器。所以请为此提供一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:57:53.993

您可以手动设置焦点应移动的位置：

```
EditText et2=(EditText)findViewById(R.id.et2);
EditText et3=(EditText)findViewById(R.id.et3);

// Set keyboard next buttons
et1.setNextFocusDownId(R.id.et2); 
```

但是在 XML 布局中设置 android:nextFocusDown 时必须小心，因为如果您引用的对象尚未创建，则会引发错误。 [来自这里的信息](http://androidadvice.blogspot.fi/2010/10/soft-keyboard-next-button-not-working.html)

# magento - Magento 在每个页面上都给出 404，包括主页

> ID：15679648
> 
> 赞同：2
> 
> 时间：2013-03-28T10:40:36.853
> 
> 标签：magento, migration, http-status-code-404

我刚刚按照以下步骤进行了 Magento 迁移。

*   将所有字段从我们的登台服务器复制到生产服务器
*   转储数据库并将其复制到生产服务器
*   导入的数据库转储到新数据库
*   更新了 app/etc/local.xml
*   将数据库条目“web/secure/base_ur”和“web/unsecure/base_url”更新为新的 url
*   清除 var/cache

现在每个页面都会出现 404 错误，包括主页和管理员。此外，这似乎不是 htaccess 问题，因为路径中带有 index.php 的 url 也不起作用。

我已经完成了与我在另一台具有相同文件的机器上列出的相同的程序，然后它工作正常。所以它似乎是特定于服务器的。

我已经对这个问题进行了广泛的搜索，但到目前为止似乎没有任何帮助。

任何想法都非常受欢迎！

--edit-- 我稍微修复了它。

在 index.php 我改变了：

法师::run($mageRunCode, $mageRunType); To Mage::run('english');

这似乎是必要的，因为英文是我们默认商店的名称。但是，我认为如果 Magento 自己解决这个问题会更好。另外，当迁移到另一台服务器时，这是如何开箱即用的？

# android - Android：读取包含 HTML 代码的 XML 文件

> ID：15679650
> 
> 赞同：0
> 
> 时间：2013-03-28T10:40:37.090
> 
> 标签：android, html, rss, cdata, rss-reader

**大家好你们好; 我有一个 xml 文件“feed.xml”，格式如下：**

```
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
<channel>
<item>
<cache>0</cache>
<id>v_article_16337.html</id>
<article_id>16337</article_id>
<type>article</type>
<img>
http://website.com/main/image.jpg
</img>
<filename>
http://website.com/other/image.jpg
</filename>
<origine_filename>
http://website.com/image.jpg
</origine_filename>
<title>
<![CDATA[
Here plain text
]]>
</title>

<datePub>
<![CDATA[ 28.03.2013 | 08h00 | ]]>
</datePub>
<nbrComment>0</nbrComment>
<lastComment>
<![CDATA[ ]]>
</lastComment>
<theSameCategorie>
<![CDATA[
Here HTML Code
]]>
</theSameCategorie>
<description>
<![CDATA[
Here plain text
]]>
</description>
<content>
<![CDATA[

Here html code
]]>
</content>
</item>
</channel>
</rss> 
```

**我需要如何解析所有这些信息并将其保存在本地文件中，以便以后如果没有可用的互联网连接可以观看，我发现如果 CDATA 标记，该值将被忽略！谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T12:58:34.673

您要么必须遍历所有子项（无论有多少）并连接每个子项的值以获得完整结果，或者如果区分纯文本和 CDATA 中的文本并不重要，则在首先是文档生成器工厂：

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
docFactory.setCoalescing(true); 
```

# java - 想要阅读最大为 1MB 大小的文本文件的完整内容

> ID：15679652
> 
> 赞同：2
> 
> 时间：2013-03-28T10:40:44.413
> 
> 标签：java

在 JAVA 中，我想读取最大为 1MB 大小的 .log 文件的完整内容，我需要将其存储在 StringBuilder 中

我尝试使用此代码，但给出异常 STACKERRORFLOW。

```
 String fileName = "C://test//.log";
    File testfile = new File(fileName);
    int ch;
    StringBuilder strcontent = new StringBuilder();
    try
    {
        FileInputStream fis = new FileInputStream(testfile);
        while((ch = fis.read()) != -1)
            strcontent.append((char)ch);
        fis.close();        
    }
            System.out.println(strcontent.toString()); 
```

它会出现什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:48:34.380

如果您想阅读日志文件，我建议您使用[`java.io.BufferedReader`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html)

```
BufferedReader r = null;
File testfile = new File("C://test//.log");
StringBuilder b = new StringBuilder();
    try {
        r = new BufferedReader(new FileReader(testfile));
        String line = null;
        while ((line = r.readLine()) != null) {
            b.append(line);
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
       try {
          r.close()
       }
       catch (Exception ex) {
          ex.printStackTrace();
       }
    } 
```

**正如@MadProgrammer 指出的那样，**Stackoverflow可能会导致。****

 **而且您正在逐个字符地读取更大的文件，我认为这不是有效的。你知道`append()`方法会被调用多少次吗？

正如@joan 指出的 -Xmx JVM 选项，我认为这无济于事，因为这与堆大小问题有关，而不是 stackoverflow。当您进行大递归时，通常会抛出 SO，或者通常在多次调用某些内容并且变量填满堆栈时抛出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:46:28.110

这里的问题是最大堆大小。

使用 -Xmx JVM 选项增加 Java 最大堆大小。希望这可以帮助。**

# asp.net-mvc-4 - ASP.NET MVC 4，视图中的多个模型，System.NullReferenceException：

> ID：15679653
> 
> 赞同：1
> 
> 时间：2013-03-28T10:40:48.310
> 
> 标签：asp.net-mvc-4, nullreferenceexception

我的应用程序有问题。我有这个多重模型：

```
public class MultipleModel
{
    public Staff Staff;
    public RegisterModel RegisterModel;
}

public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
}

public partial class Staff
{
    public Staff()
    {
        this.Tables = new HashSet<Tables>();
    }

    public int EmployeeID { get; set; }
    public string First_name { get; set; }
    public string Last_name { get; set; }
    public string Telephone { get; set; }
    public string Description { get; set; }
    public string Username { get; set; }

    public virtual ICollection<Tables> Tables { get; set; }
} 
```

控制器是：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult MultipleModelView(MultipleModel model)
    {          
        if (ModelState.IsValid)
        {
            try
            {                   
                WebSecurity.CreateUserAndAccount(model.RegisterModel.UserName, model.RegisterModel.Password);
                Roles.AddUserToRole(model.RegisterModel.UserName, "Customer");
                Staff staff = new Staff();

                staff.Username = model.RegisterModel.UserName;
                staff.First_name = model.Staff.First_name;
                staff.Last_name = model.Staff.Last_name;
                staff.Telephone = model.Staff.Telephone;
                db.Staff.Add(staff);
                db.SaveChanges();

                WebSecurity.Login(model.RegisterModel.UserName, model.RegisterModel.Password);

                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }
        return View(model);
    } 
```

视图是：

```
@model test13.Models.MultipleModel
@{
ViewBag.Title = "MultipleModelView";
}

<h2>MultipleModelView</h2>
@using (Html.BeginForm("MultipleModelView", "Account", FormMethod.Post))
{
@Html.AntiForgeryToken()
@Html.ValidationSummary()
<fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.RegisterModel.UserName)
            @Html.TextBoxFor(m => m.RegisterModel.UserName)
        </li>            
        <li>
            @Html.LabelFor(m => m.RegisterModel.Password)
            @Html.PasswordFor(m => m.RegisterModel.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.RegisterModel.ConfirmPassword)
            @Html.PasswordFor(m => m.RegisterModel.ConfirmPassword)
        </li>
        <li>
            @Html.LabelFor(m => m.Staff.First_name)
            @Html.TextBoxFor(m => m.Staff.First_name)
        </li>
        <li>
            @Html.LabelFor(m => m.Staff.Last_name)
            @Html.TextBoxFor(m => m.Staff.Last_name)
        </li>
        <li>
            @Html.LabelFor(m => m.Staff.Telephone)
            @Html.TextBoxFor(m => m.Staff.Telephone)
        </li>

    </ol>
    <input type="submit" value="Register" />
</fieldset>

}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

当我将数据填充到文本框并发布它们时，应用程序在这部分代码中让我出现异常：

```
 WebSecurity.CreateUserAndAccount(model.RegisterModel.UserName, model.RegisterModel.Password); 
```

System.NullReferenceException：对象引用未设置为对象的实例。

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:06:17.897

在您的视图模型中使用[`properties`](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)而不是：[`fields`](http://msdn.microsoft.com/en-us/library/ms173118.aspx)

```
public class MultipleModel
{
    public Staff Staff { get; set; }
    public RegisterModel RegisterModel { get; set; }
} 
```

ASP.NET MVC 中的默认模型绑定器仅适用于属性。字段被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:51:11.737

在构造函数中初始化注册模型

```
public class MultipleModel
{
    public MultipleModel()
    {
       this.RegisterModel = new RegisterModel();
    }
    public Staff Staff{get;set;};
    public RegisterModel RegisterModel{get;set;};
} 
```

# javascript - 如何使用 e.PageX 和 e.PageY 值将信息窗口定位在 pin 上方？

> ID：15679654
> 
> 赞同：0
> 
> 时间：2013-03-28T10:40:50.660
> 
> 标签：javascript, jquery

我正在使用自定义信息窗口构建地图，我试图根据单击的事件 pageX 和引脚的 PageY 值定位信息窗口，但我不确定如何正确实现这一点，目前我的所有计算都尝试通过随机位置.

**JS**

```
Microsoft.Maps.Events.addHandler(pin, 'click', function(e) {
     instance.displayInfoBox(e, pin, response);
});

$itemOverlay.css({

    top: e.pageX,
    left: e.pageY

}).show(); 
```

**CSS**

```
.item-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 200px;
    height: auto;
    background: white;
    padding: 10px;
    display: none;
} 
```

**JSFiddle**：http: [//jsfiddle.net/upej8/13/](http://jsfiddle.net/upej8/13/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:11:21.477

你混合了坐标，样式应该是：

```
$itemOverlay.css({

  top:  e.pageY,
  left: e.pageX
}).show(); 
```

# zend-framework - 获取刚刚插入的 id

> ID：15679658
> 
> 赞同：1
> 
> 时间：2013-03-28T10:41:01.820
> 
> 标签：zend-framework

我这里有多对多表，我只需要插入 id - BlogId。lastInsertId() 是 NULL 结果。有任何想法吗？

```
 $table = new Blog_Model_Blog_Table();
    $relTable = new Blog_Model_Relation_Table();
        $Object = $table->createRow();
        $form = new Blog_Form_Blog_Add($Object);
        if ($this->getRequest()->isPost() and $form->isValid($_POST)) {
            Blog_Model_Blog_Manager::add($Object);
            $blogId = $table->getAdapter()->lastInsertId();
            foreach ($_POST['category_id'] as $value) {
                $relTable->insert(array('id' => $blogId, 'category_id' => $value));
            } 
```

Blog_Model_Blog_Manager：

```
 class Blog_Model_Blog_Manager
{
    static function add(Blog_Model_Blog_Item &$Object)
    {
        $data = array(
            'time_add'              =>  time(),
            'time_edit'             =>  time(),
            'url_keyword'           =>  Ap_Filter_Translit::asURLSegment($Object->name)
        );
        $Object->setFromArray($data)
               ->save();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:50:09.037

我使用 mySql 函数 LAST_INSERT_ID() 来实现：

```
$blogId = $table->fetchRow($table->select()->from($table)->columns('LAST_INSERT_ID() as idi')); 
```

# scala - 休眠会话到列表转换

> ID：15679660
> 
> 赞同：2
> 
> 时间：2013-03-28T10:41:08.690
> 
> 标签：scala

```
 hibernate session to list conversion
 Compilation Error occured when java converted into scala..!! 
```

错误：类型不匹配；找到：java.util.List[?0] 其中需要类型 ?0：scala.collection.immutable.List[com.scala.entity.User]

```
 Code:     def getAllUsers(): List[User] = {
          return getSession().createQuery("from User where reslut='false'").list()
           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:51:51.297

```
 def getAllUsers(): List[User] = {
    val objList = getSession().createQuery("from User where isDelete = 'false'").list()
    objList.asInstanceOf[List[User]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:46:48.990

可能是使用 scala.collection.JavaConverters 的简单方法：

```
import scala.collection.JavaConverters._

def getAllUsers = getSession().createQuery("from User where reslut='false'").list().asScala.toList.map(_.asInstanceOf[User]) 
```

# jquery - 如何将切换按钮翻转为 jQuery 函数

> ID：15679664
> 
> 赞同：0
> 
> 时间：2013-03-28T10:41:18.550
> 
> 标签：jquery, mobile, arduino, webpage

[以下函数对jQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile)站点执行相同的操作，翻转切换按钮，使用它。

```
<script>
    function updateControls() {
        $.getJSON('/status.json', function(json) {
            $.each(json, function(key, value) {
                $('#'+key).val(value).slider('refresh');
            });
        });
    }

    $('select').bind('change', function(event) {
        element = event.target.id;
        if (element.substr(0, 6) == 'outlet') {
            eleid = element.substr(6, 2);
        }
        else {
            eleid = 0;
        }

        command = event.target.value;
        $.get('/cmd', { 'eleid' : eleid, 'cmd' : command });
    });
    $('#page1').bind('pageinit', updateControls);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:44:12.750

内部包装代码`document.ready`也使用`.on`而不是`.bind`as`.bind`已弃用。

```
$('#page1').on('pageinit', updateControls); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:48:56.120

修改后的代码版本：

```
<script>
    function updateControls() {
        $.getJSON('/status.json', function (json) {
            $.each(json, function (key, value) {
                $('#' + key).val(value).slider('refresh');
            });
        });
    }

    $('select').on('change', function (event) {
        element = event.target.id;
        if (element.substr(0, 6) == 'outlet') {
            eleid = element.substr(6, 2);
        } else {
            eleid = 0;
        }

        command = event.target.value;
        $.get('/cmd', {
            'eleid': eleid,
            'cmd': command
        });
    });
    $(document).ready(function () {
        updateControls();
    });
</script> 
```

**编辑**

如果您想对提交按钮执行与选择相同的操作，则代码为：

```
<script>
    function updateControls() {
        $.getJSON('/status.json', function (json) {
            $.each(json, function (key, value) {
                $('#' + key).val(value).slider('refresh');
            });
        });
    }

    $('select').on('change', function (event) {
        element = event.target.id;
        if (element.substr(0, 6) == 'outlet') {
            eleid = element.substr(6, 2);
        } else {
            eleid = 0;
        }

        command = event.target.value;
        $.get('/cmd', {
            'eleid': eleid,
            'cmd': command
        });
    });

    $('input[type=submit]').on('click', function (event) {
        element = event.target.id;
        if (element.substr(0, 6) == 'outlet') {
            eleid = element.substr(6, 2);
        } else {
            eleid = 0;
        }
        command = event.target.value;
        $.get('/cmd', {
            'eleid': eleid,
            'cmd': command
        });

        $(document).ready(function () {
            updateControls();
        });
</script> 
```

**编辑 2**

如果您想在按钮单击时发生事件：

```
<script>
    function updateControls() {
        $.getJSON('/status.json', function (json) {
            $.each(json, function (key, value) {
                $('#' + key).val(value).slider('refresh');
            });
        });
    }

    $('select').on('change', function (event) {
        element = event.target.id;
        if (element.substr(0, 6) == 'outlet') {
            eleid = element.substr(6, 2);
        } else {
            eleid = 0;
        }

        command = event.target.value;
        $.get('/cmd', {
            'eleid': eleid,
            'cmd': command
        });
    });

    $('input[type=submit]').on('click', function (event) {
        updateControls();
    });
</script> 
```

# python - 类似lisp的语法的递归解析

> ID：15679672
> 
> 赞同：3
> 
> 时间：2013-03-28T10:41:43.460
> 
> 标签：python, string, parsing, recursion, recursive-descent

我试图解析表格中的行：

```
(OP something something (OP something something ) ) ( OP something something ) 
```

其中 OP 是逻辑门（AND、OR、NOT）的符号，而某些东西是我想要评估的东西。

我正在寻找的输出类似于：

```
{ 'OPERATOR': [condition1, condition2, .. , conditionN] } 
```

条件本身可以是字典/列表对本身（嵌套条件）。到目前为止，我尝试了类似的东西：

```
 tree = dict()
        cond = list()
        tree[OP] = cond

    for string in conditions:
        self.counter += 1
        if string.startswith('('):
            try:
                OP = string[1]
            except IndexError:
                OP = 'AND'
            finally:
                if OP == '?':
                    OP = 'OR'
                elif OP == '!':
                    OP = 'N'

            # Recurse
            cond.append(self.parse_conditions(conditions[self.counter:], OP))
            break

        elif not string.endswith(")"):
            cond.append(string)

        else:
            return tree

    return tree 
```

我也尝试了其他方法，但我无法理解整个递归的事情，所以我想知道我是否可以在这里得到一些指示，我环顾网络，发现了一些关于递归下降解析的东西，但是教程都在尝试做一些比我需要的更复杂的事情。

PS：我意识到我可以使用现有的 python 库来做到这一点，但我会通过这样做学到什么嗯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:32:31.677

出于学习目的，我在没有进一步评论的情况下发布此内容（在现实生活中请使用图书馆）。请注意，没有错误检查（你的作业！）

有什么不明白的可以随时问。

```
# PART 1\. The Lexer

symbols = None

def read(input):
    global symbols
    import re
    symbols = re.findall(r'\w+|[()]', input)

def getsym():
    global symbols
    return symbols[0] if symbols else None

def popsym():
    global symbols
    return symbols.pop(0)

# PART 2\. The Parser
# Built upon the following grammar:
#  
#     program = expr*
#     expr    = '(' func args ')'
#     func    = AND|OR|NOT
#     args    = arg*
#     arg     = string|expr
#     string  = [a..z]

def program():
    r = []
    while getsym():
        r.append(expr())
    return r

def expr():
    popsym() # (
    f = func()
    a = args()
    popsym() # )
    return {f: a}

def func():
    return popsym()

def args():
    r = []
    while getsym() != ')':
        r.append(arg())
    return r

def arg():
    if getsym() == '(':
        return expr()
    return string()

def string():
    return popsym()

# TEST = Lexer + Parser

def parse(input):
    read(input)
    return program()

print parse('(AND a b (OR c d)) (NOT foo) (AND (OR x y))')
# [{'AND': ['a', 'b', {'OR': ['c', 'd']}]}, {'NOT': ['foo']}, {'AND': [{'OR': ['x', 'y']}]}] 
```

# java - 无法在 GWT 中使用 RequestBuilder 访问 HTTP 端口

> ID：15679677
> 
> 赞同：0
> 
> 时间：2013-03-28T10:42:00.213
> 
> 标签：java, gwt

我正在使用 GWT 中的`sendRequest()`方法`RequestBuilder`。我正在使用 Eclipse Indigo、JRE 1.7 和 GWT 2.5.0。

我的问题是我无法使用该`sendRequest()`方法访问指定的 HTTP 端口。我在另一台机器上使用了相同的代码并且它有效。我已经关闭了防火墙，但它仍然无法在我的机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:21:56.097

请注意`sendRequest()`使用`XMLHttpRequest`，因此默认情况下，您只能访问与用于 html 页面的服务器和 http 端口相同的服务器和 http 端口。

因此，请检查浏览器中的 url 是否与您在`RequestBuilder`.

如果你想从 gwt 做 CORS，你可以阅读这个 [页面](https://code.google.com/p/gwtquery/wiki/Ajax)（专注于 JSONP 和 CORS 部分），或者互联网上任何关于 CORS 的页面。

监控 FireBug 中的网络流量可能会有所帮助，如果您尝试访问其他服务器，您应该会看到除 GET 或 POST 之外的 OPTION 请求。

# android - 在另一个活动中使用其他布局元素

> ID：15679680
> 
> 赞同：0
> 
> 时间：2013-03-28T10:42:07.787
> 
> 标签：android

我是 android 新手，正在使用 gridview onitemclicklistener 并希望在活动类中获取其他布局元素，因为 gridview 是在具有自己的布局 xml 文件的活动类中实现的，而 gridview 项目具有不同的布局 xml 文件，我们在适配器类中膨胀。我已经尝试在一个 java 类文件中使用 setTag 并在另一个 java 类文件中使用 getTag。

[在这里](http://pastebin.com/UEusBG8k)为活动类放置一些代码

将适配器类代码[放在这里](http://pastebin.com/ts3tyVra)

将gridview的xml文件放在[这里](http://pastebin.com/rzXvCtBD)

现在是 gridview 项目布局 xml，其中我们有 imagebutton 并且我们需要在 acitvity 类[中](http://pastebin.com/gythq0xL)

我放的两个 xml 在不同的 java 类文件中使用。

所以现在的问题是

我们如何获得图像按钮，您将在 itemclicklistener 上的活动类 gridview 中找到名称为**tuaky_select_imagebutt**的图像按钮，这样我也可以对该图像按钮执行一些操作。

我按照此[链接](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)获取 xml 项的 setTag 和 getTag。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:51:19.730

我们不能通过 setTag 和 getTag 来实现，而是对我们正在膨胀布局的指定 xml 文件元素进行操作，以便我们可以轻松访问 xml 文件的该元素并对其执行一些操作。

# c# - Console.ReadKey 与带有计时器的 Console.ReadLine

> ID：15679683
> 
> 赞同：13
> 
> 时间：2013-03-28T10:42:13.757
> 
> 标签：c#, multithreading, timer, console, garbage-collection

以下代码是一个众所周知的示例，用于显示调试和发布版本之间的区别：

```
using System;
using System.Threading;

public static class Program
{
    public static void Main()
    {
        Timer t = new Timer(TimerCallback, null, 0, 2000);
        Console.ReadLine();
    }

    private static void TimerCallback(Object o)
    {
        Console.WriteLine("In TimerCallback: " + DateTime.Now);
        GC.Collect();
    }
} 
```

如果您使用调试配置运行它，计时器将每两秒输出一次当前时间。`GC.Collect`没有任何影响，因为编译器人为地延长了变量`Timer t`的寿命。在发布配置中，计时器将只执行一次。将`GC.Collect`垃圾收集`t`变量，就是这样。

这一切都像它应该的那样工作。奇怪的是，当您将 Console.ReadLine 更改为 Console.ReadKey 时，*两种*配置都会每两秒运行一次计时器。

Console.ReadKey 和 Console.ReadLine 有什么区别？我[从文档](http://msdn.microsoft.com/en-us/library/471w8d85.aspx)中了解到 Console.ReadKey 阻止了发出 ReadKey 方法的线程。但是 GC.Collect 仍然会触发..

**为什么`Timer t`通过阻塞主线程来延长生命周期？**

## 更新

使用 .NET 3.5 时，不会发生此行为！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T11:37:58.850

该`Console.ReadKey()`方法锁定，`Console.InternalSyncObject`而该`Console.ReadLine()`方法不锁定。当该`TimerCallBack()`方法尝试写入等待时，因为`Console`仍处于锁定状态。因此永远不会被调用。一旦你按下一个键，锁就会被释放并被调用。`Thread``Console.InternalSyncObject``GC.Collect()``GC.Collect()`

我将您的代码更改为以下不锁定的代码，`Console.InternalSyncObject`并且它在 Release 中仅发出一次哔声，在 Debug 中每 2 秒发出一次哔声。

```
private static void TimerCallback(Object o)
{
    Console.Beep();
    GC.Collect();
} 
```

Console.WriteLine() 等待的原因是因为它在第一次`Console.InternalSyncObject`创建时尝试获取锁。`Console.Out` `TextWriter`

将您的代码更改为以下代码可以按预期工作，因为我们`Console.Out` `TextWriter`在启动计时器之前创建了代码。

```
public static void Main()
{
    Console.WriteLine("Loaded");
    Timer t = new Timer(TimerCallback, null, 0, 2000);
    Console.ReadKey();
}

private static void TimerCallback(Object o)
{
    Console.WriteLine("In TimerCallback: " + DateTime.Now);
    GC.Collect();
} 
```

这是由于 .NET 4.5 的变化。更多信息[在这里](http://blogs.microsoft.co.il/blogs/dorony/archive/2012/09/12/console-readkey-net-4-5-changes-may-deadlock-your-system.aspx)

# jquery - 在 iPad 上上传 XPages 文件 - 压缩图像

> ID：15679684
> 
> 赞同：0
> 
> 时间：2013-03-28T10:42:14.557
> 
> 标签：jquery, xpages

我有一个内置在 XPages 中的移动 Web 应用程序，并使用 jQuery Mobile 作为 UI，可通过 iPad 上的 Safari 访问。用户可以通过普通的 XPages 文件上传控件从 iPad 相机上传图像。

客户询问是否可以在将图像上传到 Domino 服务器之前对其进行压缩，因为这将占用 3G 的时间。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:30:44.077

您可以调整图像大小以减小其大小。否则，您将需要查看压缩文件的插件。

# html - 是否绝对有必要为 HTML 电子邮件使用表格？

> ID：15679688
> 
> 赞同：3
> 
> 时间：2013-03-28T10:42:20.817
> 
> 标签：html, css, email, html-table, standards

我必须为我的工作设计一些 HTML 电子邮件。很明显，每个人都为此使用表格和内联 CSS。如果可以选择，我会使用纯文本，但在这种情况下是不可能的。

作为一个对 Web 标准略知一二的前端开发人员，当我看到一些 HTML 电子邮件时，我感到非常害怕和恐惧：表格展示和内联 CSS 足以证明这将是设计和维护的一个可怕的头痛。

你有这方面的经验吗？哪些论点对提倡纯文本有价值？使用标准可维护漂亮的 HTML 和 CSS 而不是可怕的常见方式有什么风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:35:12.800

一些有用的链接可以更好地理解

[http://kb.mailchimp.com/article/how-to-code-html-emails/](http://kb.mailchimp.com/article/how-to-code-html-emails/)

[http://blog.mailchimp.com/background-images-and-css-in-html-email/](http://blog.mailchimp.com/background-images-and-css-in-html-email/)

# javascript - 网址哈希片段格式

> ID：15679694
> 
> 赞同：1
> 
> 时间：2013-03-28T10:42:56.237
> 
> 标签：javascript, jquery, url

我需要将 UI 状态保存在哈希片段中，我尝试了两种不同的方法：

1- 具有查询字符串格式的哈希片段

```
#a=foo&b=bar 
```

然后使用自定义函数获取值：

```
getParam: function (parameter) {
    if(document.location.hash !== "") {
        var param = document.location.hash.substring(1).split("&");
        for(var i in param) {
            var keyValue = param[i].split('=');
            if(keyValue.length === 2 && keyValue[0] === parameter) {
                return $.trim(keyValue[1]);
            }
        }
    }
    return null;
} 
```

2- 带有 json 对象的散列片段

```
#{"a":"foo","b":"bar"} 
```

然后用

```
$.parseJSON(document.location.hash.substring(1)) 
```

什么是最好的方法？哈希片段格式是否有特定约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:51:28.260

最佳做法是不理会片段 ID。使用[历史 API](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)更改真实的查询字符串。

然后，当从头开始请求页面时，将其完全构建在服务器上。

这个：

*   避免了在立即用 Ajax 数据替换大块基本页面之前加载基本页面的需要（这曾经使 Twitter Web 应用程序使用起来很糟糕，直到它们移动到历史 API）
*   使链接对搜索引擎和其他非 JS 客户端友好

# javascript - 提交表格

> ID：15679697
> 
> 赞同：2
> 
> 时间：2013-03-28T10:43:05.177
> 
> 标签：javascript, jsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:44:01.887

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:45:25.893

要将提交打开到新选项卡，请使用：

```
<form name="myform" id='myform' [...] target='_blank'>
[...]
</form> 
```

[使新标签可选]
如果需要，您可以添加一个复选框，并附上此代码：

```
<a href="#" onclick="document.form1.submit();">Submit Form</a><br />
<input type='checkbox' id='newTabCheck' /> Open in new Tab 
```

在 jQuery 中

```
$('#form1').submit(function() {
   if($('#newTabCheck').is(':checked'))
    $('#form1').attr('target', '_blank');
    return true;
}); 
```

或者

```
$('#newTabCheck').change(function() {
   if($(this).is(':checked'))
      $(this).attr('target', '_blank');
   else
      $(this).removeAttr('target');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:47:12.507

只需放入`target="_blank"`字段`<form></form>`。

IE`<form action"your_url" method="post" target="_blank"></form>`

# javascript - 使用 MongoDb 和 Node.js 输入数据

> ID：15679703
> 
> 赞同：0
> 
> 时间：2013-03-28T10:43:40.423
> 
> 标签：javascript, node.js, mongodb

所以我试图将数据输入到带有节点的 mongodb 集合中。据我所知，我可以访问该集合。

```
var collection = db.collection("whatsGoingOnEvents");
if(collection){
console.log("hitting stream");
var stream = collection.find({time: parsedObject.time, endTime: parsedObject.endTime, lon:parsedObject.lon,lat:parsedObject.lat}).stream();
console.log(stream);
stream.on("data",function(data){
    console.log("data");
    console.log(data);
    if(!data){
        collection.insert(parsedObject);
        console.log("hitting insert");
    }
});
stream.on("end",function(){
//dosomething
});
} 
```

parsedObject 可能有也可能没有所有这些字段——这有关系吗？我想如果该字段不存在，那么 collection.find() 只是在寻找“未定义”的时间，这在技术上仍然是一个值。

我从来没有打过`console.log("data")`，所以我从不插入文件。我一直在尝试关注[此链接](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)。

所以我不确定为什么插入没有发生。我知道没有添加任何内容`from db.collection.stats();`，这告诉我集合的大小为 0。

哦，这也是我用来连接 Mongo-

```
var mongo = require('mongodb').MongoClient; 
```

编辑 -

我尝试了下面的答案 - 导致了这个错误 -

```
 lib/mongodb/connection/server.js:481
        throw err;
              ^
Error: Cannot use a writeConcern without a provided callback
    at insertAll (/Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn/node_modules/mongodb/lib/mongodb/collection.js:332:11)
    at Collection.insert (/Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn/node_modules/mongodb/lib/mongodb/collection.js:91:3) 
```

^发生上述情况是因为我没有向插入添加回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:55:08.830

如果您的查询与任何记录都不匹配（这似乎是合乎逻辑的，因为您编写的集合大小为 0），`data`则永远不会调用事件处理程序（因为只有在有实际结果时才会调用它）。

我认为你最好使用`findOne`和定期回调：

```
collection.findOne({ params }, function(err, result) {
  if (err)
    throw err;
  if (result === null) {
    collection.insert(parsedObject, { w: 0 });
  }
}); 
```

甚至一个[`upsert`](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#update).

# mysql - MySQL 魔术列“名称”和合成列

> ID：15679704
> 
> 赞同：0
> 
> 时间：2013-03-28T10:43:40.893
> 
> 标签：mysql, sql-like

所以我得到了一条 SQL 语句。这个想法是我想做一个不区分大小写的 LIKE。我这样做：

```
SELECT 
  FilenameId AS id,
  LOWER(CONVERT(BINARY(Filename.Name) USING utf8)) AS name
  FROM Filename
  WHERE name LIKE '%something%'
  COLLATE utf8_general_ci 
```

这很好用，但是我的查询也返回大小写转换的名称。我想要做的是合成不敏感的名称并对其进行 LIKE 查询，但也返回非大小写转换的名称。

```
SELECT 
  FilenameId AS id,
  Filename.Name AS name,
  LOWER(CONVERT(BINARY(Filename.Name) USING utf8)) AS iname
  FROM Filename
  WHERE iname LIKE '%something%'
  COLLATE utf8_general_ci 
```

...但是 MySQL 很高兴地拒绝了：

```
 Unknown column 'iname' in 'where clause' 
```

我究竟做错了什么？我在 MySQL 5.5 FWIW 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:04:32.023

我不知道你为什么想出这个，但通常其他人很难`LIKE`区分大小写，而不是反过来。

像这样简单地编写您的查询：

```
SELECT 
FilenameId AS id,
Filename.Name AS name
FROM Filename
WHERE name LIKE '%something%' 
```

通常，您不能在 WHERE 子句中访问别名。将您的查询放入 Dhinakaran 建议的子查询或使用`HAVING`（如果您很懒惰）。

区别？`WHERE`是基于行`HAVING`的，在应用`WHERE`子句 (and `GROUP BY`) 之后处理结果。

从**[手册](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)**：

> 以下两个语句说明字符串比较不区分大小写，除非操作数之一是二进制字符串：

```
mysql> SELECT 'abc' LIKE 'ABC';
        -> 1
mysql> SELECT 'abc' LIKE BINARY 'ABC';
        -> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:49:07.137

创建一个子查询，然后将 where 放在子查询上

```
Select * from (SELECT 
  FilenameId AS id,
  Filename.Name AS name,
  LOWER(CONVERT(BINARY(Filename.Name) USING utf8)) AS iname
  FROM Filename ) temp
  WHERE temp.iname LIKE '%something%'
  COLLATE utf8_general_ci 
```

或者

```
 SELECT 
  FilenameId AS id,
  Filename.Name AS name,
  AS iname
  FROM Filename
  WHERE LOWER(CONVERT(BINARY(Filename.Name) USING utf8))  LIKE '%something%'
  COLLATE utf8_general_ci 
```

# c++ - C++ || 添加两个矩阵数组 - 更简单的输出方式？

> ID：15679707
> 
> 赞同：0
> 
> 时间：2013-03-28T10:43:47.380
> 
> 标签：c++, arrays, loops, matrix, format

我正在对 C++ 进行一些自学，并且正在做一些关于数组、循环等的章节。有很多练习，我引用的那个非常简单。初始化两个两行三列的矩阵。

输出矩阵的内容（按指定格式），然后执行保存在第三个矩阵中的加法。输出完成加法的第三个数组。我的代码有效，但我认为有更好的方法来输出而不是处理每个矩阵元素？鉴于这是练习之前的一章，我正在考虑另一个循环，或者这种方式可以接受吗？

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    int amatrix[2][3]=
    {
        {-5, 2, 8},
        {1, 0, 0},
    };

    int bmatrix[2][3]=
    {
        {1, 0, 2},
        {0, 3, -6},
    };

    int cmatrix[2][3]=
    {
        {0, 0, 0},
        {0, 0, 0},
    };

    //add generated matrices
    for (int i = 0; i <= 1; i++)
    {
        for (int j =0; j <= 2; j++)
        {
            cmatrix[i][j]=amatrix[i][j]+bmatrix[i][j];
        }
    }

    //output to screen - NEED ADVICE FROM HERE
    cout << "A= " << endl;
    cout << amatrix[0][0] << ", " << amatrix[0][1] << ", " << amatrix[0][2] << endl;
    cout << amatrix[1][0] << ", " << amatrix[1][1] << ", " << amatrix[1][2] << endl << endl;
    cout << "B= " << endl;
    cout << bmatrix[0][0] << ", " << bmatrix[0][1] << ", " << bmatrix[0][2] << endl;
    cout << bmatrix[1][0] << ", " << bmatrix[1][1] << ", " << bmatrix[1][2] << endl << endl;
    cout << "C= " << endl;
    cout << cmatrix[0][0] << ", " << cmatrix[0][1] << ", " << cmatrix[0][2] << endl;
    cout << cmatrix[1][0] << ", " << cmatrix[1][1] << ", " << cmatrix[1][2] << endl << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:44:49.547

`cout << amatrix[i][j]`在 for 循环中

# jquery - 对象不支持属性或方法“对话框”

> ID：15679715
> 
> 赞同：8
> 
> 时间：2013-03-28T10:44:10.980
> 
> 标签：jquery, asp.net-mvc-3

参考[AjaxControlToolkit](http://www.asp.net/ajaxlibrary/jquery_ui_mvc_intro.ashx)，我从 MVC 创建了一个 UI 对话框。

## 布局.cshtml

```
 <head>
   <meta charset="utf-8" />
   <title>@ViewBag.Title - My ASP.NET MVC Application</title>
   <link href="../../Content/smoothness/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" />
   <script src="../../Scripts/jquery-1.9.1.js" type="text/javascript"></script>
   <script src="../../Scripts/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>
   <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
   <meta name="viewport" content="width=device-width" />
   @Styles.Render("~/Content/css")
   @Scripts.Render("~/bundles/modernizr")
</head> 
```

## 索引.cshtml

```
<h2>jQuery UI Hello World</h2>          
<button id="show-dialog">Click to see jQuery UI in Action</button>            
<div id="dialog" title="jQuery UI in ASP.NET MVC" >  
  <p>You now have the power of ASP.NET, the simplicity of client-side scripting with jQuery, and the looks of jQuery UI. Congrats, web slinger!</p>  
</div>  

<script language="javascript" type="text/javascript">
  $(function () {
    $('#dialog').dialog({
      autoOpen: false,
      width: 600,
      buttons: {
        "Ok": function () { $(this).dialog("close"); },
        "Cancel": function () { $(this).dialog("close"); }
      }
    });
    $("#show-dialog").button().click(function () {
        $('#dialog').dialog('open');
        return false;
    });
  });  
</script> 
```

我检查了 IE 和 Firefox。火狐抛出

> Typeerror $(...).dialog 不是函数

IE 抛出

> 对象不支持属性或方法“对话框”

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T11:01:12.153

想到 3 件事可能值得检查：

1.  永远不要在 ASP.NET MVC 应用程序中对 url 进行硬编码。始终使用助手（或推荐的捆绑包）：

    ```
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/Content/smoothness/jquery-ui-1.10.2.custom.css" rel="stylesheet"  type="text/css" />
        <script src="~/Scripts/jquery-1.9.1.js" type="text/javascript"></script>
        <script src="~/Scripts/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head> 
    ```

2.  确保在你的最后`_Layout.cshtml`你没有`@Scripts.Render("~/bundles/jquery")`打电话，因为这将包括 jQuery 两次。

3.  如果在您的末尾`_Layout.cshtml`有一个用于自定义脚本的专用部分，`@RenderSection("scripts", required: false)`例如document.ready 事件中的脚本，因为在它执行时，DOM 已经被加载）：

    ```
    <h2>jQuery UI Hello World</h2>          
    <button id="show-dialog">Click to see jQuery UI in Action</button>            
    <div id="dialog" title="jQuery UI in ASP.NET MVC" >  
       <p>You now have the power of ASP.NET, the simplicity of client-side scripting with jQuery, and the looks of jQuery UI. Congrats, web slinger!</p>  
    </div>    

    @section scripts {
        <script type="text/javascript">
            $('#dialog').dialog({
                autoOpen: false,
                width: 600,
                buttons: {
                    "Ok": function () { $(this).dialog("close"); },
                    "Cancel": function () { $(this).dialog("close"); }
                }
            });
            $("#show-dialog").button().click(function () {
                $('#dialog').dialog('open');
                return false;
            });
        });  
        </script>
    } 
    ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-05T16:49:45.153

就我而言，这个错误是因为我忘记添加 jquery-ui 文件引用：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-08T20:36:56.503

这通常发生在您忘记添加`jquery-ui.js`. 包含的顺序`jquery-ui-{version}.js`也很重要！

你应该包括`jquery-{version}.js`then `jquery-ui-{version}.js`。然后在`</body>`标记之前，包含您的自定义 javascript 文件。

它将解决 Javascript 运行时错误：[ *Object doesn't support property or method 'dialog'* ],[ *'$' is undefined* ]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T10:57:11.210

你的代码对我来说似乎没问题。您可以检查您的 jQuery UI 自定义是否包含对话框功能（或尝试下载[完整的 jQuery UI](http://jqueryui.com/resources/download/jquery-ui-1.10.2.zip)以进行测试）并检查 JS 脚本的 URI 是否正确。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-04T10:43:10.147

包括这三行代码：

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css" />
<script src="//code.jquery.com/jquery-1.10.2.js" type="text/javascript"></script>
<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js" type="text/javascript"></script> 
```

# traffic-measurement - 吞吐量测量

> ID：15679718
> 
> 赞同：0
> 
> 时间：2013-03-28T10:44:21.833
> 
> 标签：traffic-measurement

我必须实现一个限制算法，以避免达到我正在与之交互的服务所施加的吞吐量限制。

限制指定为«N requests over 1 day»，其中 N 的数量级为 10^6。

我有一个客户端与服务交互的分布式系统，因此他们应该共享度量。

一个确切的解决方案应该涉及记录所有事件，而不是计算调用服务事件发生的“时间”限制：当然，这种方法太昂贵了，所以我正在寻找一个近似的解决方案。

我设计的第一个意味着对事件的检测进行离散化：例如，最多维护 24 个计数器并记录一小时内发生的请求数。

可以接受。

但我觉得一个更优雅的，即使是由不同的“力量”领导，是拒绝接近连续体的方法。

假设记录最后 N 个事件，我可以轻松推断出“当前”吞吐量。当然，这个算法会因为错过了几个小时前发生的过去事件而受到影响。我可以使用老化算法进行改进，但是……下面是我的问题：

问：«有一个优雅的近似解决方案来估计长时间和高事件率的服务吞吐量的问题？»

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:08:30.847

根据我的评论，您应该使用监视器并让它每 15 分钟对值进行一次采样，以合理猜测请求的数量。

我在这里嘲笑了一些东西，但还没有测试过，应该给你一个首发。

```
import java.util.LinkedList;
import java.util.Queue;
import java.util.Timer;
import java.util.TimerTask;

public class TestCounter {

private final Monitor monitor;

private TestCounter() {
    monitor = new Monitor();
}

/** The thing you are limiting */
public void myService() {
    if (monitor.isThresholdExceeded()) {
        //Return error
    } else {
        monitor.incremenetCounter();
        //do stuff
    }
}

public static void main(String[] args) {
    TestCounter t = new TestCounter();
    for (int i = 0; i < 100000; i++) {
        t.myService();
    }

    for (int i = 0; i < 100000; i++) {
        t.myService();
    }
}

private class Monitor {
    private final Queue<Integer> queue = new LinkedList<Integer>();

    private int counter = 1;

    /** Number of 15 minute periods in a day. */
    private final int numberOfSamples = 76;

    private final int threshold = 1000000;

    private boolean thresholdExceeded;

    public Monitor() {
        //Schedule a sample every 15 minutes.
        Timer t = new Timer();
        t.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {
                sampleCounter();
            }
        }, 0l, 900000 /** ms in 15 minutes */
        );
    }

    /** Could synchroinise */
    void incremenetCounter() {
        counter++;
    }

    /** Could synchroinise */
    void sampleCounter() {
        int tempCount = counter;
        counter = 0;
        queue.add(tempCount);

        if (queue.size() > numberOfSamples) {
            queue.poll();
        }

        int totalCount = 0;
        for (Integer value : queue) {
            totalCount += value;
        }
        if (totalCount > threshold) {
            thresholdExceeded = true;
        } else {
            thresholdExceeded = false;
        }
    }

    public boolean isThresholdExceeded() {
        return thresholdExceeded;
    }
}
} 
```

# python - Python，规则网格上的邻居

> ID：15679719
> 
> 赞同：4
> 
> 时间：2013-03-28T10:44:34.163
> 
> 标签：python, numpy

假设我有一组 2D 坐标，它们代表 2D 规则网格的单元格的中心。我想为网格中的每个单元格找到每个方向上最近的两个邻居。

如果将每个单元格和索引分配给定义如下：

idx_cell = idx+N*idy

其中 N 是网格中单元格的总数，idx=x/dx 和 idy=y/dx，其中 x 和 y 是单元格的 x 坐标和 y 坐标，dx 是其大小。

例如，idx_cell=5 的单元格的相邻单元格是 idx_cell 等于 4,6（对于 x 轴）和 5+N,5-N（对于 y 轴）的单元格。

我遇到的问题是，对于大型（N>1e6）数据集，我的算法实现非常慢。

例如，为了得到 x 轴的邻居，我做

`[x[(idx_cell==idx_cell[i]-1)|(idx_cell==idx_cell[i]+1)] for i in cells]`

你认为有一种最快的方法来实现这个算法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:15:04.757

您基本上是在重新发明多维数组的索引方案。编码相对容易，但您可以在这里使用这两个功能[`unravel_index`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unravel_index.html)并[`ravel_multi_index`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel_multi_index.html)发挥您的优势。

如果您的网格是由`M`行和`N`列组成的，要获取单个项目的`idx`和，您可以执行以下操作：`idy`

```
>>> M, N = 12, 10
>>> np.unravel_index(4, dims=(M, N))
(0, 4) 
```

如果您提供索引数组而不是单个索引，这也有效：

```
>>> np.unravel_index([15, 28, 32, 97], dims=(M, N))
(array([1, 2, 3, 9], dtype=int64), array([5, 8, 2, 7], dtype=int64)) 
```

因此，如果`cells`有几个单元格的索引，您想要找到邻居：

```
>>> cells = np.array([15, 28, 32, 44, 87]) 
```

你可以得到他们的邻居：

```
>>> idy, idx = np.unravel_index(cells, dims=(M, N))
>>> neigh_idx = np.vstack((idx-1, idx+1, idx, idx))
>>> neigh_idy = np.vstack((idy, idy, idy-1, idy+1))
>>> np.ravel_multi_index((neigh_idy, neigh_idx), dims=(M,N))
array([[14, 27, 31, 43, 86],
       [16, 29, 33, 45, 88],
       [ 5, 18, 22, 34, 77],
       [25, 38, 42, 54, 97]], dtype=int64) 
```

或者，如果您喜欢这样：

```
>>> np.ravel_multi_index((neigh_idy, neigh_idx), dims=(M,N)).T
array([[14, 16,  5, 25],
       [27, 29, 18, 38],
       [31, 33, 22, 42],
       [43, 45, 34, 54],
       [86, 88, 77, 97]], dtype=int64) 
```

这样做的好处是`ravel_multi_index`有一个`mode`关键字参数，您可以使用它来处理格子边缘的项目，请参阅文档。

# coldfusion - Coldfusion Scopes 说明

> ID：15679723
> 
> 赞同：1
> 
> 时间：2013-03-28T10:44:53.350
> 
> 标签：coldfusion, scope, coldfusion-9

我一直在阅读有关 CF 范围的信息，并且对 CFC 范围及其含义（[在此处详述](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=buildingComponents_29.html)）感到满意，但是，每当我搜索 CF 范围时，它几乎总是在 CFC 的上下文中引用 - 所以我希望得到一些澄清围绕 CFM 页面中的范围。我正在使用 CF 9/10，所以只对范围在这些版本中的行为方式真正感兴趣。

1.  CFM 页面上有哪些范围可用 - CFM 页面是否存在与其他地方可能发生的相同的并发问题，或者 CFM 页面上的变量是否绑定到该特定请求的范围？

2.  如果我`<cfset myVar = 10 />`在 CFM 页面中包含该行，它将包含在哪个范围内？同一页面上的其他用户访问变量或其他 cfm 页面访问变量是否存在风险？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:12:49.167

除了“THIS”之外，几乎所有范围都可以在 CFM 页面中找到。

CFM 页面中声明的非作用域变量可以直接调用，也可以使用 VARIABLES 作用域前缀调用。

例如：

```
<cfset varA = 'someValue'/> 
```

也可以写成

```
<cfset VARIABLES.varA = 'something' /> 
```

据我所知，除非您创建一个单例（仅适用于 CFC）并将其置于应用程序范围内，否则您永远不会冒险与其他用户共享变量。如果不小心在 CFC 函数中正确地确定局部变量的范围，这也是有效的。

在 CFM 页面上，每个用户请求都有自己的处理线程，并且永远不会与其他用户请求交叉。因此，变量仅绑定到该特定请求的范围。

如果您希望所有请求页面的用户都使用变量，则可以将其放在 APPLICATION 范围内。

我不太明白你的第二个问题。如果您可以详细说明，也许我可以在我的答案中添加更多内容。

**更新**

此代码将帮助您回答 2 个问题。

```
<cfscript>
    function a(){
        _a = 20;
        WriteOutput("Inside function:"&variables['_a']);
        WriteOutput("Inside function:"&variables['_b']);
    }
    _b = 30;
    a();
    WriteOutput('outside function:'&variables['_a']);
</cfscript> 
```

*输出*

> 内部功能：20
> 内部功能：30
> 外部功能：20

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:22:16.323

[此页面](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Variables_30.html)对可用范围进行了很好的解释。

如果你足够努力，你会发现更多关于如果你不限定变量范围会发生什么的信息。它的要点是您的代码将成功运行，但效率较低。原因是 ColdFusion 将尝试找到正确的范围。它以指定的顺序检查某些范围。那个订单在哪里，我只是没能很快找到它。

对于你的第二个问题，

```
<cfset myVar = 10> 
```

将 myVar 变量放入变量范围。

关于一个用户更改影响其他用户的变量，我认为唯一有风险的范围是应用程序范围。但是，对于现代浏览器，单个用户可能会弄​​乱自己的会话变量。我已经看到它完成了。

另一种可能无意中更改变量的方式是使用函数。如果要将变量保留在函数的本地，则必须在实例化它们时使用 var 关键字。在更高版本的 CF 中，有一个本地作用域可以完成同样的事情。

就个人而言，我将所有变量的范围都限定为变量范围。

# android - WindowManager.LayoutParams 组合，可以将事件传递给 TYPE_SYSTEM_ALERT 或 smilar 下的图层

> ID：15679725
> 
> 赞同：4
> 
> 时间：2013-03-28T10:44:55.013
> 
> 标签：android, layoutparams, motionevent, android-windowmanager

有人可以帮我获得 WindowManager.LayoutParams 组合，该组合可以将事件传递给 TYPE_SYSTEM_ALERT 或类似覆盖类型（位于每个其他窗口的顶部）下的图层。

**问题：** 我的问题是当窗口类型 TYPE_SYSTEM_ALERT 获得焦点时，它停止将运动事件传递给它下面的其他应用程序。

**示例代码**

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
        WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE |
        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
        PixelFormat.TRANSLUCENT); 
```

**要求：** 我需要获得 TYPE_SYSTEM_ALERT 或类似的覆盖类型，它们位于每个其他窗口的顶部，并且还获取运动事件以及将运动事件传递到顶层下的任何覆盖（可能是 TYPE_SYSTEM_ALERT）。

我需要它保持在所有其他窗口的顶部，因为我需要在所有窗口的顶部绘制图像而不中断运动事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-27T11:41:30.373

好吧，从文档中它说：

> TYPE_SYSTEM_ALERT - 窗口类型：系统窗口，例如低电量警报。这些窗口始终位于应用程序窗口之上。在多用户系统中，仅在拥有用户的窗口上显示。

链接在这里：[https ://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_SYSTEM_ALERT](https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_SYSTEM_ALERT)

我对此进行了一些测试，这意味着视图显示在几乎所有内容之上（包括自 Android 6.0 以来的权限对话框）——导致它们失去焦点。Keyguard 层仍然位于顶部。是的，您可能会丢失`focusable`视图的属性，但您可能会处理触摸侦听器中的所有内容。例如，看看这篇文章：[如何使用 View.OnTouchListener 而不是 onClick](https://stackoverflow.com/questions/11690504/how-to-use-view-ontouchlistener-instead-of-onclick)

# asp.net - Visual Studio -MVC3 调试错误

> ID：15679727
> 
> 赞同：0
> 
> 时间：2013-03-28T10:45:08.390
> 
> 标签：asp.net, asp.net-mvc-3

有时，当我尝试调试 asp,net MVC3 Web 应用程序时，我会收到此错误。我应该怎么做才能摆脱错误。我在事件查看器中找不到任何日志。当您向客户展示演示并且发生这种事情时，它有点烦人。

![在此处输入图像描述](../Images/0aac11e3839e73d5b516d5351fad3ed1.png)

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:40:22.547

只需卸载/删除 Trusteer Rapport，它就会正常工作 :)

参考：[http ://forums.asp.net/t/1704958.aspx/8/10?Re%20SEHException%20throw%20when%20I%20run%20the%20application](http://forums.asp.net/t/1704958.aspx/8/10?Re%20SEHException%20thrown%20when%20I%20run%20the%20application)

# java - 从java调用coldfusion组件

> ID：15679730
> 
> 赞同：2
> 
> 时间：2013-03-28T10:45:13.173
> 
> 标签：java, coldfusion, coldfusion-8

我有一个coldfusion组件，我想从我的java中调用一个函数。

```
<cfcomponent name="coldFusionComp">
    <cffunction name="callMeFromJava" access="public" output="false">
      <cfreturn "Hello World!">
    </cffunction>
</cfcomponent> 
```

那可能吗？如果是这样，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:56:34.113

您可以使用 CFCProxy 方法。

有关更多信息，您可以在 Adob​​e Docs 中阅读。[http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-106e125d1353e804331-7ffb.html](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-106e125d1353e804331-7ffb.html)

# python - Python minidom xml解析获取第一个子节点的值

> ID：15679734
> 
> 赞同：0
> 
> 时间：2013-03-28T10:45:21.683
> 
> 标签：python, xml, minidom

我正在使用 python minidom 来解析 xml，但无法使其适用于以下 xml。我想选择第一个服务器标签并想要 name 标签的值，在本例中为“Server1”

```
<class>
<name>MyClass</name>
<security>
<name>MyClass</name>
</security>
<server>
<name>Server1</name>
<ssl>
 <name>Server1</name>
</ssl>
<server-info>
 <name>Server1</name>
</server-info>
</server>
<server>
<name>Server2</name>
<ssl>
 <name>Server2</name>
</ssl>
<server-info>
 <name>Server2</name>
</server-info>
</server>
<server>
<name>Server3</name>
<ssl>
 <name>Server3</name>
</ssl>
<server-info>
 <name>Server3</name>
</server-info>
</server>
</class> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:07:25.777

您必须参考[XML DOM 文档](http://docs.python.org/2/library/xml.dom.html)并咬紧牙关。

要获取第一个`<server>`元素，然后是`<name>`：

```
from xml.dom import minidom

document = minidom.parse(inputfilename)

def findChildNodeByName(parent, name):
    for node in parent.childNodes:
        if node.nodeType == node.ELEMENT_NODE and node.localName == name:
            return node
    return None

def getText(nodelist):
    rc = []
    for node in nodelist:
        if node.nodeType == node.TEXT_NODE:
            rc.append(node.data)
    return ''.join(rc)

# Get the first of all `<server>` nodes
server = document.getElementsByTagName('server')[0]

# Get the first child node that is a `<name>` element
name = findChildNodeByName(server, 'name')
if name is not None:
    print getText(name.childNodes) 
```

# paypal - 预先批准的贝宝个人付款

> ID：15679738
> 
> 赞同：0
> 
> 时间：2013-03-28T10:45:28.220
> 
> 标签：paypal, paypal-adaptive-payments

这是我正在处理的用户故事：

用户想要向朋友发送个人付款以偿还他的钱。用户添加朋友的电子邮件和金额。我们通过调用 Adaptive Payments API PAY 方法来检查收件人是否是 paypal 用户。收件人不是贝宝用户。然后我们为汇款人进行资金转账的预先批准。稍后，当我们获得收件人的正确贝宝地址时，我们尝试使用个人付款类型并包括 Preapproval 令牌进行付款。API 返回此错误：“此付款不允许使用个人付款类型”

是否有我在这里遗漏的东西，或者使用贝宝无法预先批准个人付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:40:39.740

个人付款需要对您的帐户具有特殊权限。您需要在 x.com 上提交申请并提出申请。

# regex - 使用正则表达式提取子字符串

> ID：15679742
> 
> 赞同：1
> 
> 时间：2013-03-28T10:45:35.677
> 
> 标签：regex, sed, awk

我想从我的日志文件中提取`<`到下一个。

 ````
$>cat messages.log
2013-03-24 19:32:37.231 <F280 [192.168.178.22]:5000 -- Unknown>, Msg:[Test1]
2013-03-24 19:32:37.547 <F281 [192.168.178.22]:5000 -- Unknown>, Msg:[Test2
Test3
Test4]
2013-03-24 19:32:38.833 <F280 [192.168.178.22]:5000 -- Unknown>, Msg:[Test5]
2013-03-24 19:32:42.222 <F281 [192.168.178.22]:5000 -- Unknown>, Msg:[Test6]
$>sed 's/.*\<\(.*\) \[.*/\1|/g' messages.log
F280|
F281|
Test3
Test4]
F280|
F281| 
```

除了换行符的输出外，我几乎得到了我想要的东西。所以我想得到以下结果：

```
F280|F281|F280|F281 
```

正则表达式的外观如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:02:58.453

我不会创建一个不可读的正则表达式来做到这一点，我会`awk`在这里使用：

```
$ awk -F'[< ]' '/^[0-9]+/{s?s=s"|"$4:s=s$4}END{print s}' file
F280|F281|F280|F281 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:01:06.540

试试这个：

```
sed -n '/</{s/^.*<\([^]\+\) .*$/\1|/g;H;${x;s/\n//g;s/| $//;p}}'messages.log

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:02:52.030

尝试类似的事情（你会有嵌套组），或者在正则表达式中打开多行选项：

```
(^.+<(\w+) .+$)+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:06:13.770

是否必须仅使用 grep 或其他命令可用？我想说的是

```
grep "<.* " messages.log | sed  's/.*\<\(.*\) \[.*/\1|/g' | tr -d '\n' | sed 's/.$//' 
```

第一个 grep 是删除不符合您所需模式的数据，然后是您的 sed 命令。在输出上，谁应该看起来像

```
F280|
F281|
F280|
F281| 
```

最后一个 tr 命令只是删除每行末尾的换行符（即它连接结果），而最后一个 sed 只是删除最后的管道分隔符`

# php - 从链接中获取价值而不点击它？

> ID：15679743
> 
> 赞同：1
> 
> 时间：2013-03-28T10:45:38.730
> 
> 标签：php, jquery, html

我试图通过将鼠标悬停在具有不同 ID 的不同链接上来显示 jQuery 警报。

我想根据悬停的每个链接定制警报。这些链接是从表中动态创建的...

每个链接都有不同的 id 属性，所以我想为每个链接设置警报，而不必单击链接。

例如：一个链接可能有`index.php?id=1`所以我想在悬停时显示一个警报，上面写着这是链接 1 的警报，等等。

* * *

**编辑1：**

分区：

```
echo '<div class="trigger">';
            echo "<a class='trigger' href='".INDEX.'?categ='.$_GET['categ'].'&action='.$_GET['action'].'&subaction=viewlevels'.'&levelid='.$compi['Competence_ID']."'>";
            echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("What is this?").'"/></a>';
            echo '<div id="pop-up">';

            echo" <h3>Pop-up div Successfully Displayed for".$_GET['levelid'].
                    "</p></div>"; 
```

**编辑2：**

```
<head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
        <script type="text/javascript">

        $('.trigger').mouseover(function() {
               alert("You are hovering over " + $(this).attr('href').match(/id=([0-9]+)/)[1]);
            });

        </script> 
```

但它总是告诉我levelid是未定义的..（当然是因为表格还没有发送）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:46:50.977

是的，您可以为此使用 jQuery 的[mouseover()](http://api.jquery.com/mouseover/)：

```
$('.trigger').mouseover(function() {
   alert("This is an alert for link " + $(this).attr('href').match(/id=([0-9]+)/)[1]);
}); 
```

您应该从使用 ID 更改为使用公共类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:55:54.783

在容器子元素的链接上绑定 jquery 函数，使用下面的代码

```
$(document).ready(function(){

     jQuery("#container a").each(function() {

         jQuery(this).mouseover(function() {
         alert(jQuery(this).attr('href'));
       });
    }); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:49:42.147

```
 $('#aid').mouseover(function(){alert('whatever you want'+this.id)}); 
```

文档[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:50:27.937

您还可以使用`.hover`and 有两个回调一个 when`hover-over`和一个 for`hover-out.`

```
$('a').hover(function(){
  alert($(this).attr('href'));
},function(){
  alert('hover out');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T10:53:11.753

如果您正在动态创建链接，则将属性类（例如 sampleclass）和属性 id 关联为（连接“链接”和数据库中的 id 值）与每个链接

现在

```
$(document).redy(function(){
  $(".sampleclass").hover(function(){
     alert("This is " + $(this).attr("id"));
  });
}); 
```

# powershell - 从 Powershell 中的 7zip 输出流中删除空行

> ID：15679745
> 
> 赞同：0
> 
> 时间：2013-03-28T10:45:42.453
> 
> 标签：powershell, stream, find, 7zip

我正在使用 Powershell 和 7zip 提取 .tgz 档案。7zip 具有强制详细模式并污染我的屏幕。我只想**显示错误消息**。我已经用 FIND 删除了标准消息：

代码：

```
 Write-Host "Extracting "$strArgument

  # extract tgz to tar
  & "$7z" x "-y" $strArgument | FIND /V "ing  " | FIND /V "Igor Pavlov" | FIND /V "Processing " | FIND /V "Everything is Ok" | FIND /V "Folders: " | FIND /V "Files: " | FIND /V "Size: " | FIND /V "Compressed: " | FIND /V "Processing archive: "

  # path to .tar
  $strArgument = $strArgument.Replace(".tgz", ".tar")
  $strArgument = $strArgument.Replace("i\data\", "")

  # extract tar to file
  #Write-Host $strArgument
  & "$7z" x "-y" $strArgument | FIND /V "ing  " | FIND /V "Igor Pavlov" | FIND /V "Processing " | FIND /V "Everything is Ok" | FIND /V "Folders: " | FIND /V "Files: " | FIND /V "Size: " | FIND /V "Compressed: " | FIND /V "Processing archive: " 
```

这给了我一个带有很多空行的输出：

```
Extracting  Q:\mles\etl-i_test\i\data\divider-bin.tgz

Extracting  Q:\mles\etl-i_test\i\data\divider-conf.tgz
... 
```

但是我只想：

```
Extracting  Q:\mles\etl-i_test\i\data\divider-bin.tgz
Extracting  Q:\mles\etl-i_test\i\data\divider-conf.tgz 
```

如何从我的流中删除空白行？有强大的 FIND 开关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:55:37.830

我知道的最简单的方法是通过 -match 运行结果并过滤掉任何不包含非空格的内容：

```
Write-Host "Extracting "$strArgument

  # extract tgz to tar
  & "$7z" x "-y" $strArgument | FIND /V "ing  " | FIND /V "Igor Pavlov" | FIND /V "Processing " | FIND /V "Everything is Ok" | FIND /V "Folders: " | FIND /V "Files: " | FIND /V "Size: " | FIND /V "Compressed: " | FIND /V "Processing archive: "

  # path to .tar
  $strArgument = $strArgument.Replace(".tgz", ".tar")
  $strArgument = $strArgument.Replace("i\data\", "")

  # extract tar to file
  #Write-Host $strArgument
  (& "$7z" x "-y" $strArgument | FIND /V "ing  " | FIND /V "Igor Pavlov" | FIND /V "Processing " |   ND /V "Everything is Ok" | FIND /V "Folders: " | FIND /V "Files: " | FIND /V "Size: " | FIND /V "Compressed: " | FIND /V "Processing archive: ") -match '\S' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:04:52.917

`find`没有这样的开关，但您可以使用`findstr`正则表达式：

```
... | findstr /r /v "^$" 
```

# jquery - 组合 tablesorter + csvtotable 时的总行数

> ID：15679746
> 
> 赞同：2
> 
> 时间：2013-03-28T10:45:46.030
> 
> 标签：jquery, tablesorter

刚刚完成了我的第一个 html，将 csv 文件中的数据呈现到漂亮的表格中。我现在的问题是我需要添加一个总行，并意识到：

1.  我在 csvtotable 中没有选项（据我所知）将最后一行标记为总计，`<tfoot>`
2.  我无法将信息添加到 just-converted-from-csv-html-file 中，因为它实际上不存在：例如在第二行中添加总计并将它们标记为`<tbody class="tablesorter-no-sort">`.
3.  也许另一种方法是创建只有一行的第二个表并在主表的顶部或底部添加：我担心在这种情况下我会发现列宽的问题，因为它们在两个表中会有所不同。

有什么方法可以设法在输出中添加或识别总计行？谢谢，

作为参考，我的简单代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="../../js/ts/css/theme.default.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="../../js/ts/js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="../../js/ts/js/jquery.tablesorter.widgets.min.js"></script>
<script type="text/javascript" src="../../js/csv/js/jquery.csvToTable.js"></script>

<script>
$(function() {
   $('#myTable').CSVToTable('fam.txt',
{
startLine: 1,
separator: ";"
}
).bind("loadComplete",function() {
   $(document).find('#myTable').tablesorter({sortList: [[0,0], [1,0]],widgets:
   ["zebra", "stickyHeaders"]});
});;
});
</script>

</head>
<body>

<table id="myTable" class="tablesorter">
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:12:29.283

如果您需要操作表格，请在“loadComplete”事件函数中进行。

试试这个：

```
$(function() {
  var mytable = $('#myTable')
    .CSVToTable('fam.txt',{
      startLine: 1,
      separator: ";"
    })
    .bind("loadComplete",function(){
      var footer = mytable.find('tr:last');
      // if you try to append a tr wrapped in a tfoot, jQuery will assume you are
      // adding a tr and put it inside the tbody... so target the tfoot (parent)
      mytable
        .find('thead').after( footer.wrap('<tfoot/>').parent() ).end()
        .tablesorter({
          sortList: [[0,0], [1,0]],
          widgets: ["zebra", "stickyHeaders"]
        });
    });
}); 
```

# ajax - 对话框内命令按钮的设置过程给出空白值

> ID：15679748
> 
> 赞同：0
> 
> 时间：2013-03-28T10:45:52.013
> 
> 标签：ajax, jsf-2, process, primefaces, dialog

`process="@this"`在 a中设置`<p:dialog>`将命中 managedBean 中的方法，但提交的值为空。设置`process="@form"`不打方法。设置`process="@all"`给出`null`值。设置嵌套表单，在对话中引入表单是不可取的。我必须在`process`属性中指定什么？

```
<p:commandButton id="serachInsideDialogue" value="#{msg.AddSystem_searchLabel}"  action="#{testBean.edit}" update="growl" process="@this">
    <f:setPropertyActionListener target="#{testBean.searchUserId}" value="#{testBean1.searchId}" />
</p:commandButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:50:22.873

你可以试试这样的一些功能

```
 function null() { document.getElementById("serachInsideDialogue").style.display= ""; } 
```

然后根据需要为每个事件自定义它们。

当您想要类似事件时，他们会在您的流程中调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:55:36.547

> *不建议在对话中引入表格*

你被误导了。

对话框不得放置在任何表单内。相反，它必须放置在任何形式之外，并拥有自己的形式。当您打算在对话框中提交输入时，您显然不想在对话框外处理同一表单内的所有其他输入。

一旦你解决了这个问题，你就可以使用`process="@form"`已经是默认值的那个，因此可以安全地完全省略。

# algorithm - 饼图图标放置算法

> ID：15679751
> 
> 赞同：4
> 
> 时间：2013-03-28T10:46:08.317
> 
> 标签：algorithm, pie-chart, labels

尝试绘制饼图时遇到问题。 ![设计实例](../Images/5546a1e8155f12c85987b07e2331a74c.png)

当然，绘制图表没有问题，问题在于图标的放置。理想情况下，图标应该放在一个圆圈上（让我们暂时忘记百分比标签）。

但是，当存在具有较小值的相邻项时，设计显然会中断。

![实现示例](../Images/61bb15741e3ada51564572bf9fbe8ca0.png)

你能推荐一个解决这个问题的算法吗？为简化起见，作为输入，我们有：
`PIE_RADIUS`- 饼图的外半径。
`ICON_RADIUS`- 图标圆的半径。
`ICON_PLACEMENT_RADIUS`- 理想放置图标中心时的圆的半径。
`NUM_ICONS`- 要放置的图标数量。
`iconAngles`每个图标的角度，位于其部分的中心

所需输出：对于放置在饼图周围的项目或
将图标移出理想圆圈时。`iconAngles``iconPositions`

我知道如何检查两个图标是否重叠。我们可以认为馅饼的中心在`(0, 0)`。

（实现是 iOS 应用程序的一部分，但我对一般算法感兴趣）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:10:34.227

第一个朴素算法，我们“推送”与另一个图标重叠的图标：

```
FOR iconToPlace in icons do:
    isPlaced = false

    WHILE(not isPlaced) DO:
        isPlaced = true
        FOR icon in icons DO:
            IF overlap(iconToPlace, icon) AND iconToPlace != icon THEN:
                isPlaced = false
                push(iconToPlace) // same angle but the icon is now further
                BREAK
            ENDIF
        ENDFOR
    ENDWHILE

ENDFOR 
```

使用第一个算法，一些图标将比其他图标离中心更远。但它并没有通过改变角度来利用可能的位置。通过将此应用于您的第二个设计（具有小值），很明显该解决方案将远离理想的解决方案。

第二个不那么天真的算法，首先我们为每个图标分配一个新的角度（差异小于 DeltaAngleMax），然后我们应用第一个算法：

```
icons = SORT(icons)
iconsRef = icons
isFinished = false
WHILE(not isFinished) DO:
    isFinished = true
    FOR i = 0 TO i = NUM_ICONS-1 DO:
        IF   overlap(icons(i), icons(i+1 % NUM_ICONS))
         AND not overlap(icons(i), icons(i-1 % NUM_ICONS)) //seems useless
         AND not overlap(icons(i)-DeltaAngle % 360, icons(i-1 % NUM_ICONS))
         AND ABS(icons(i)-iconsRef(i)) <= DeltaAngleMax THEN:
            //overlap with next icon but not with previous, 
            //if we decrease angle we still not overlap with previous icon and
            //the futur delta angle is less than DeltaAngleMax
            //then we can move the icon :
            icons(i) = icons(i)-DeltaAngle
            isFinished = false
        ELSE IF   overlap(icons(i), icons(i-1 % NUM_ICONS))
         AND not overlap(icons(i), icons(i+1 % NUM_ICONS))  //seems useless
         AND not overlap(icons(i)+DeltaAngle % 360, icons(i+1 % NUM_ICONS))
         AND ABS(icons(i)-iconsRef(i)) <= DeltaAngleMax THEN:
            //vice et versa:
            icons(i) = icons(i)+DeltaAngle
            isFinished = false
    ENDFOR
ENDWHILE

APPLY_FIRST_ALGO 
```

明智地选择 deltaAngle 和 DeltaAngleMax。太小的 deltaAngle 会导致运行时间过长。

为了更进一步，您应该查看[力导向图形绘制](http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29)算法，这是实现目标的更强大的方法，其中一个困难是找到节点的正确力（您的图标，您没有边缘）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:17:18.407

只是头脑风暴：

一种具有适应度函数的遗传算法，该算法对重叠具有较高的惩罚加上等于每个候选位置与其理想位置（相对于其切片居中）之间的角距离平方和的惩罚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:45:00.067

我实施的解决方案如下：

1.  计算所有图标相对于其切片的位置（以 为中心的图标`ICON_PLACEMENT_RADIUS`）
2.  查找重叠图标的序列（迭代图标并检查下一个是否与前一个重叠）。
3.  计算两个图标之间的最小角距离（大约`(2.0f * ICON_RADIUS + 1.0f) / ICON_PLACEMENT_RADIUS`）
4.  计算序列的中心（对序列的所有切片求和并找到中心），将图标放在一起（它们之间的距离是最小角距离）。
5.  放置好所有图标后，检查图标是否重叠，如果是，则合并它们的序列并迭代。

请注意，此算法仅在所有图标数量与圆的大小相比都很小时才有效，但它简单且非常快。

结果是：
![在此处输入图像描述](../Images/c811cf040904f993fa919042e09373b8.png)

# windows-phone-7 - 如何安排在指定时间向用户发送通知

> ID：15679753
> 
> 赞同：2
> 
> 时间：2013-03-28T10:46:12.483
> 
> 标签：windows-phone-7, notifications, windows-phone-8, windows-phone

在我的应用程序中，我需要在指定的日期和时间（例如 5 月 1 日 10:00）安排向用户发送通知。此时必须显示通知，当用户单击此通知时，我的应用程序应该打开。我看到了两种方法：

1\. 预定通知。
但是如果我使用Alarm类，我不能改变通知的标题（在SDK的英文版中是“Alarm”）。
提醒类最适合我，但是当它出现在锁定屏幕顶部并且用户单击它时，我的应用程序无法打开。
可能有办法绕过这些时刻吗？
此外，我想用时间（5 分钟、10 分钟、1 小时等）和“贪睡”按钮摆脱 listpicker，但这并不重要。

2\. 来自后台代理的 Toast（或平铺）通知。
但我不确定我的后台代理是否在正确的时间运行。据我了解，后台代理由系统运行，它们的启动受到几个因素（手机电池电量、正在运行的应用程序或其他后台代理的存在）的限制。它甚至可能无法启动。有一种方法可以通过使用 LaunchForTest 在特定时间强制代理，但到处都写到此方法只能用于调试目的，并且在应用程序发布之前必须将其删除。
如果我不删除这个方法，我的申请会被认证吗？我也不喜欢 toast 通知只打开 10 秒钟然后消失得无影无踪。可以做些什么吗？

我需要通知保证在正确的时间显示，当您单击它时，我的应用程序已打开。做这个的最好方式是什么？
如果这在 Windows Phone 7 中是不可能的，有没有办法在 Windows Phone 8 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:53:00.627

我认为您应该为此使用提醒。当您单击它们时，您的应用程序将打开。就像是：

```
var reminder = ScheduledActionService.Find("MyAppReminder");
if (reminder != null)
{
    ScheduledActionService.Remove("MyAppReminder");
}

reminder = new Reminder("MyAppReminder")
{
    Title = "Bla",
    BeginTime = DateTime.Now.AddDays(2),
    Content = message,
    NavigationUri = new Uri("/Start.xaml", UriKind.Relative),
    RecurrenceType = RecurrenceInterval.None
};

ScheduledActionService.Add(reminder); 
```

至于通知出现在锁定屏幕上时应用程序未打开，这是有道理的。如果您可以直接从锁定屏幕打开应用程序，那将是一个很大的安全漏洞！希望能帮助到你。

# c++ - g++ -E 选项输出

> ID：15679756
> 
> 赞同：5
> 
> 时间：2013-03-28T10:46:19.813
> 
> 标签：c++, gcc, compiler-construction, g++, c-preprocessor

使用此选项，我在预处理后收到文件。有很多行，例如：

```
# 91 "/usr/include/stdint.h" 3 4 
```

这些数字代表着什么？首先我认为这`#91`是包含文件的行数，但事实并非如此。关于`3 4`我根本不知道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:49:51.810

根据[官方文档](http://gcc.gnu.org/onlinedocs/cpp/Preprocessor-Output.html)，该行的格式为：

```
# linenum filename flags 
```

`linenum`指定以下行源自该`filename`行号。然后有四个标志：

*   `1`- 新文件的开始
*   `2`- 返回文件
*   `3`- 系统头文件
*   `4`- 视为被包裹`extern "C"`

所以让我们解释一下你的线标记：

```
# 91 "/usr/include/stdint.h" 3 4 
```

以下行源自 的第 91 行`/usr/include/stdint.h`。它是一个系统头文件，应该被视为包含在`extern "C"`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T10:49:54.433

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:49:22.263

有flags（空格分隔），含义是：

```
1 - Start of a new file
2 - Returning to previous file
3 - Following text comes from a system header file (#include <> vs #include "")
4 - Following text should be treated as being wrapped in an implicit extern "C" block. 
```

# input - 返回多个输入（Python）

> ID：15679762
> 
> 赞同：0
> 
> 时间：2013-03-28T10:46:42.830
> 
> 标签：input, python-3.x

在 python 3 中，我有一行要求输入，然后将在导入的字典中查找，然后列出出现在字典中的所有输入。我的问题是当我运行代码并输入时，它只会返回我输入的最后一个单词。例如字典包含 (AIR, AMA)，如果我输入 (AIR, AMA) 它只会返回 AMA。任何解决此问题的信息都会非常有帮助！

词典：

```
EXCHANGE_DATA = [('AIA', 'Auckair', 1.50),
                 ('AIR', 'Airnz', 5.60),
                 ('AMP', 'Amp',3.22), 
```

编码：

```
import shares
a=input("Please input")
s1 = a.replace(' ' , "")
print ('Please list portfolio: ' + a)
print (" ")
n=["Code", "Name", "Price"]
print ('{0: <6}'.format(n[0]) + '{0:<20}'.format(n[1]) + '{0:>8}'.format(n[2]))
z = shares.EXCHANGE_DATA[0:][0]
b=s1.upper()
c=b.split()
f=shares.EXCHANGE_DATA
def find(f, a):
    return [s for s in f if a.upper() in s]
x= (find(f, str(a)))
toDisplay = []
a = a.split()
for i in a:
    temp = find(f, i)
    if(temp):
        toDisplay.append(temp)
for i in toDisplay:
    print ('{0: <6}'.format(i[0][0]) + '{0:<20}'.format(i[0][1]) + ("{0:>8.2f}".format(i[0][2]))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:25:39.987

好的，代码似乎有些混乱。这是一个更简单的版本，似乎可以满足您的要求：

```
#!/usr/bin/env python3

EXCHANGE_DATA = [('AIA', 'Auckair', 1.50),
                 ('AIR', 'Airnz', 5.60),
                 ('AMP', 'Amp',3.22)]

user_input = input("Please Specify Shares: ")

names = set(user_input.upper().split())

print ('Listing the following shares: ' + str(names))
print (" ")

# Print header
n=["Code", "Name", "Price"]
print ('{0: <6}{1:<20}{2:>8}'.format(n[0],n[1],n[2]))

#print data
for i in [data for data in EXCHANGE_DATA if data[0] in names]:
  print ('{0: <6}{1:<20}{2:>8}'.format(i[0],i[1],i[2])) 
```

这是一个使用示例：

```
➤ python3 program.py 
Please Specify Shares: air amp
Listing the following shares: {'AMP', 'AIR'}

Code  Name                   Price
AIR   Airnz                    5.6
AMP   Amp                     3.22 
```

如果您给它提供了空格分隔的引号名称，那么您提供的代码示例实际上会执行预期的操作。

希望这可以帮助。

# spring-mvc - Spring MVC在IE浏览器中解析POST跨域请求遗漏参数

> ID：15679764
> 
> 赞同：2
> 
> 时间：2013-03-28T10:46:46.127
> 
> 标签：spring-mvc, cors

我在不同的域上有两个应用程序：*foo.bar.com*和*bar.com* 我尝试将请求从第一个域发送到第二个域。为此，我在web.xml的*第二个域中添加了一个过滤器：*

```
<filter>
   <filter-name>CORS</filter-name>
   <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
</filter> 
```

它适用于所有浏览器，除了 IE 浏览器。对于 IE，我为第一个服务器 ob JS 添加了特殊条件：

```
if ($.browser.msie && window.XDomainRequest) {
            var xdr = new XDomainRequest();
            xdr.open("POST", "http://bar.com/user/login");
            var loginParam = get param here;
            var passParam = get param here;
            xdr.send("login=" + loginParam + "&password=" + passParam);
            xdr.onerror = function () {
                alert('in error');
            };
            xdr.onload = function () {
                alert(xdr.responseText);
            }
        } else {
            //Simple AJAX request
        }
    }); 
```

在此之后，我的服务器过滤器上收到了请求！*但*我没有参数：他们错过了*登录名*和*密码。*在这种情况下我该怎么办？如何在 IE 中执行跨域 POST 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T20:01:38.683

我遇到了类似的问题。事实证明，对于 IE8/IE9，[XDocumentRequest 没有](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)在请求上设置 Content-Type 标头。它默认为`text/plain`.

除非 Content-Type 设置为 ，否则 Spring MVC 等服务器框架不会绑定表单参数`application/x-www-form-urlencoded`。所以你需要在服务器上做一些自定义的事情来绑定表单参数。

# delphi - 按键访问数据的最快方式

> ID：15679765
> 
> 赞同：0
> 
> 时间：2013-03-28T10:46:47.357
> 
> 标签：delphi, generics

我有数百个变量必须用一个键访问。
键的类型是字符串（最大：50 个字符），数据是字节数组（最大：500 字节）。

我用这种方式：
定义这种类型：

```
type  
  TMyBuf          = array[0..(500-1)] of Byte;
  TMyKey          = string[50];
  TMyBufs         = TDictionary<TMyKey,TMyBuf>;
var
  MyBufs     :TMyBufs; 
```

并使用：

```
var vMyBuf     :TMyBuf;
    vMyData    :TBytes ABSOLUTE vMyBuf;
    vMyDataLen :Word;
begin
    List := srvData.Contexts.LockList;
    SetLength(vMyBuf, 500);
    try
      if(List.Count > 0) then begin
        for i := 0 to List.Count-1 do begin
          with TMyContext(List[I]) do begin
            if SetedIdent then begin
              try
                vMyBuf:= MyBufs.Items[SeledData];
                //extract length of data which stored in two byte
                vMyDataLen:= ( ( (vMyBuf[1] shl 8)and $FF00) or (vMyBuf[0] and $FF) );
                Connection.IOHandler.Write(vMYData, vMYDataLen);
              finally
              end;
            end;
          end;
        end;
      end;
    finally
      srvData.Contexts.UnlockList;
      SetLength(vMyBuf, 0);
    end;
end; 
```

有类似的代码来写入数据。

**1** .是否直接访问价值观？无需复制值字典（`vMyBuf:= MyBufs.Items[SeledData];`）。

**2.**有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:09:22.740

您最好利用类的隐式引用语义并使用 TObjectDictionary。

```
type  
  TMyBuf          = class
      public
       Data:array[0..(500-1)] of Byte;
  end;
  TMyKey          = string[50];
  TMyBufs         = TObjectDictionary<TMyKey,TMyBuf>;
var
  MyBufs     :TMyBufs; 
```

这将允许您轻松地将单个字节写入字典。您当然必须通过调用它的构造函数来分配每个 TMyBuf。如果您使用可以拥有（因此知道如何释放）放置在其中的所有对象引用的 TObjectDictionary，类似地清理会更容易。

您可能不知道的另一件事是，在 Unicode delphi 上，`string[50]`它是一种古老的 TurboPascal/DOS 时代的`shortstring`类型，而不是 unicode 字符串。

我建议除非你真的需要，否则不要担心使用 string[50] 并简单地使用 string. 如果您希望在运行时验证字符串是否为 50 个字符或更少并抛出异常，那么就这样做。

# ruby-on-rails - Mongo + RoR 模型。卡住了 NoMethodError

> ID：15679771
> 
> 赞同：0
> 
> 时间：2013-03-28T10:46:55.643
> 
> 标签：ruby-on-rails, ruby, mongodb, model, nomethoderror

我的一个模型中的 NoMethodError 有问题。

在日志文件中，我们有：

```
 NoMethodError (undefined method `length=' for #<Book:0x000000083866b8>):
2013-03-28T10:25:19+00:00 app[web.1]:   app/models/engine/book.rb:13:in `block in find_or_create_by_guide'
2013-03-28T10:25:19+00:00 app[web.1]:   app/models/engine/book.rb:9:in `find_or_create_by_guide' 
```

让我浏览所有重要文件。

首先，我们有 Mongo 的 document.rb：

```
 class Guide::Document
  include MongoMapper::Document
  key :city, Integer
  key :trips, Array
  key :themes, Array
  key :places, Array
  key :pace, String
  key :date_from, Time
  key :date_to, Time
  key :host, String
  key :length, Integer
  timestamps!
end 
```

然后，在指南文档上调用 book 模型：

```
module ClassMethods
  def find_or_create_by_guide(guide)
    book = ::Book.find_or_create_by_document(guide.id.to_s) do |b|
      b.city_id = guide.city
      b.host    = guide.host
      b.pace    = guide.pace || :normal
      b.length  = guide.length
    end 
```

稍后在 book.rb 中，我有以下行：

```
groups = sorted_points.in_groups_of(self.length.count, false) 
```

`Length.rb`：

```
 class Length < ActiveRecord::Base
  belongs_to :book

  attr_accessible :book_id
end 
```

`Book.rb`：

```
attr_accessible :user_id, :country_id, :city_id, :hotel_id, :type, :price, :host, :pace, :created_at, :updated_at, :length 
```

最后，Length 的迁移：

```
class AddLengthColumnToBooks < ActiveRecord::Migration
  def change
    add_column :books, :length, :integer
  end
end 
```

任何提示或提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:14:16.467

这是一团糟。一旦您希望“长度”成为 Book 的属性，一旦您希望 Length 成为与 Book 相关的单独模型。我认为拥有 Length 模型没有意义。使用“长度”作为 Book 属性。

# html - Chrome、FF、IE 和 Opera 输入中类型属性的奇怪行为

> ID：15679781
> 
> 赞同：0
> 
> 时间：2013-03-28T10:47:07.883
> 
> 标签：html

我在 HTML 规范中没有发现任何关于浏览器（Google Chrome、FF、IE 和 Opera 都在最新版本中）如果在输入类型错误的输入上存在 onclick 处理程序的行为，所以我在问你，专家:)

我使用了以下 html 并想象浏览器给了我某种错误（可能只是在开发者控制台日志中），但它只是重新加载了整个页面！

```
<!DOCTYPE html>
<html>
<body>
    <form class="form-inline">
        <button type="button color" onclick="document.getElementById('magic').innerHTML='clicked broken button'">Broken Button</button>
        <button type="button"       onclick="document.getElementById('magic').innerHTML='clicked button'"       >Button</button>
    </form>
    <p id="magic"></p>
</body>
</html> 
```

如您所见，第一个按钮的类型错误，而第二个按钮的类型正确。两个按钮都有几乎相同的 onclick 处理程序，唯一的区别是段落的文本发生了变化。

当您单击第一个按钮时，段落的文本会更改并且整个页面会重新加载，这会导致一个空段落。当您单击第二个按钮时，一切都按预期进行，并且段落的文本只是更改了 - 无需重新加载。

那么，你能告诉我为什么重新加载整个页面是所有 4 个主要浏览器的默认行为吗？浏览器不应该提示输入错误的按钮（可能通过在开发人员控制台日志中打印错误消息）。对我来说，这很令人困惑:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:51:44.660

您的按钮正在重新加载页面，因为它们位于 a 内`<form>`，因此它的行为就像正在提交表单一样。

`return false;`在末尾添加第一个`onclick`.

```
<form class="form-inline">
    <button type="button color" onclick="document.getElementById('magic').innerHTML='clicked broken button'; return false;">Broken Button</button>
    <button type="button"       onclick="document.getElementById('magic').innerHTML='clicked button';"       >Button</button>
</form> 
```

这应该够了吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:56:55.383

元素`type`属性的默认值为。这意味着当单击这样的元素时，首先执行事件处理程序，然后（除非处理程序禁止这样做）提交表单。在实践中，浏览器默认元素的属性为页面的 URL，因此在这种情况下会重新加载页面。[`button`](http://www.w3.org/TR/html4/interact/forms.html#edef-BUTTON)`submit``onclick``action``form`

在代码中，`type="button color"`语法错误并被忽略，因此`type=submit`应用默认值。属性规范`type="button"`是正确的，使`button`元素成为一个“纯按钮”，这样点击它就只有脚本效果，没有表单提交。

如果您希望以`button`特殊方式设置某些元素的样式，请使用`class`属性，例如`<button type="button" class="color">`. 该`type`属性仅将一组有限的关键字作为其值，每个关键字都有一个固定的含义。

# python - 请解释这些 Python Fetch 类型

> ID：15679782
> 
> 赞同：7
> 
> 时间：2013-03-28T10:47:11.337
> 
> 标签：python, openerp

这些获取之间有什么区别。？请给我一个参考网站的例子以获得清晰的想法。我仍然对此感到困惑

```
res = cr.dictfetchall()

res2 = cr.dictfetchone()

res3 = cr.fetchall()

res4 = cr.fetchone() 
```

cr 是当前行，来自数据库游标 (OPENERP 7 )

前任 ：

```
def _max_reg_no(self, cr, uid, context=None):
    cr.execute("""
    select register_no as reg_no
    from bpl_worker
    where id in (select max(id) from bpl_worker)
    """)
    res = cr.fetchone()[0]
    print (res)
    return res 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T10:57:04.167

`cr.dictfetchall()`**将以包含键、值**的**字典列表**的形式为您提供所有匹配记录。

`cr.dictfetchone()`工作方式相同，`cr.dictfetchall()`只是它只返回单个记录。

`cr.fetchall()`将以元组**列表**的形式为您提供所有匹配的记录。

`cr.fetchone()`工作方式相同，`cr.fetchall()`只是它只返回单个记录。

在您给定的查询中，如果您使用：

1.  `cr.dictfetchall()`会给你`[{'reg_no': 123},{'reg_no': 543},]`。
2.  `cr.dictfetchone()`会给你`{'reg_no': 123}`。
3.  `cr.fetchall()`会给你'[（123），（543）]'。
4.  `cr.fetchone()`会给你'（123）'。

# javascript - 单击按钮文本并释放它（但仍在按钮内）时，按钮元素未触发单击事件？

> ID：15679787
> 
> 赞同：8
> 
> 时间：2013-03-28T10:47:35.017
> 
> 标签：javascript, css, webkit, dom-events

在 WebKit 浏览器上（我在 Mac 上的 Chrome 和 Safari 上测试过），按钮元素的行为很奇怪：

Wen 在这个小提琴[http://jsfiddle.net/5ReUn/3/](http://jsfiddle.net/5ReUn/3/)中你执行以下操作：

1.  在光标位于 HTML 按钮文本上时按鼠标左键
2.  将光标（按下时）移动到没有文本的按钮区域
3.  释放鼠标按钮

那么按钮元素上的点击事件就不会被触发！

HTML 非常简单：

```
<button id="button">Click</button> 
```

CSS 一点也不复杂：

```
button {
    display: block;
    padding: 20px;
} 
```

用于点击捕获的 JS：

```
button = document.getElementById('button');
button.addEventListener('click', function() {
    console.log('click');
}); 
```

我网站的许多访问者抱怨按钮不可点击。他们没有意识到点击时正在移动光标。

有没有人找到解决方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T06:40:51.930

原来是[WebKit 中的一个错误](https://bugs.webkit.org/show_bug.cgi?id=39620)。

一个快速的非 JavaScript 解决方案是将文本包装在 SPAN 元素中并使其点击：

```
<button>
    <span>Click Me</span>
</button> 
```

示例 CSS：

```
span {
    display: block;
    padding: 20px;
    pointer-events: none;   // < --- Solution!
} 
```

由于该 bug 仅出现在 WebKit 中，因此不支持的浏览器`pointer-events`可以忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:59:41.423

在这里，您尝试**拖动**而不是单击它。因此，您可能想尝试`mousedown`事件。

```
//This is same as click event
var down = false;
var button = document.getElementById('button');
var info = document.getElementById('info')
button.addEventListener('mousedown', function() {
    down = true;  
});

button.addEventListener('mouseup', function() {
    if(down){
        info.innerHTML += "click ";
        down = false;
    }
}); 
```

**[jsfiddle](http://jsfiddle.net/5ReUn/8/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:00:13.920

如果您没有找到其他解决方案，您可以使用`mousedown`事件而不是`click`事件。

这不是最佳解决方案，因为它的行为与正常情况不同。通常，当手指从鼠标按钮上松开时，用户期望该动作发生。不是当手指按住鼠标按钮时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:53:13.357

您可以在按钮周围添加一个 div（例如，20px 的边距？），并绑定相同的 js/jquery。这样，如果他们会missclick(lol)，脚本仍然会触发。但是，我注意到，如果您在按下按钮时将鼠标拖离按钮，则该按钮将不会执行任何操作（不仅仅发生在您的页面上，即尝试使用 Facebook 登录按钮甚至本网站上的按钮） .

# lwuit - 我们如何在代号中修复屏幕旋转？

> ID：15679789
> 
> 赞同：1
> 
> 时间：2013-03-28T10:47:45.030
> 
> 标签：lwuit, codenameone

我正在使用代号为 1 的应用程序，并且作为我的要求，我想要我的屏幕修复。

只喜欢纵向视图或横向视图。我们怎么做？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:08:36.207

尝试`Display.getInstance().canForceOrientation()`和`Display.getInstance().lockOrientation(boolean)`。请注意，并非所有设备都支持方向锁定。

# ios - 在测试模式下从 AdMob 接收生产广告和插页式广告

> ID：15679791
> 
> 赞同：1
> 
> 时间：2013-03-28T10:47:48.303
> 
> 标签：ios, admob, interstitial

我正在我的 iOS 应用程序中测试 AdMob 广告。AdMob 似乎忽略了我在代码中添加的测试标志：

```
-(IBAction)quitButtonHit:(id)sender{
    [[AudioPlayer sharedManager] stopSound];
    [self.timer invalidate];
    interstitial_ = [[GADInterstitial alloc] init];
    interstitial_.adUnitID = adMobUnitID;
    interstitial_.delegate = self;
    GADRequest *request = [GADRequest request];
    request.testing = YES;
    [interstitial_ loadRequest:[GADRequest request]];
}

-(void) interstitial:(GADInterstitial *)ad didFailToReceiveAdWithError:(GADRequestError *)error {
   [self dismissViewControllerAnimated:YES completion:nil];
}

-(void) interstitialDidDismissScreen:(GADInterstitial *)ad {
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(void) interstitialDidReceiveAd:(GADInterstitial *)ad {
    [ad presentFromRootViewController:self];
} 
```

当我在我的应用程序中点击退出按钮时，我收到了生产插页式广告。我不明白为什么，因为 Google 声明他们会邀请您接收插页式广告，并且因为我在请求中设置了测试标志。

我还在我的应用的 AdMob 横幅中收到了制作广告。但这仅适用于我的设备 - 在模拟器上显示测试广告。我还在请求横幅时设置了测试标志。

我希望制作广告消失，所以我不必担心意外点击它们。

我使用 AdMob 的最新 API（版本 6.3.0）。我的部署目标是 iOS 6.0。

谁能解释这一点，也许可以提出一个解决方案来让制作广告消失？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:51:48.027

试试这个 ：

```
request.testDevices =
      [NSArray arrayWithObjects:
          // TODO: Add your device/simulator test identifiers here. They are
          // printed to the console when the app is launched.
          nil]; 
```

# android - 在活动和片段之间共享数据

> ID：15679795
> 
> 赞同：-3
> 
> 时间：2013-03-28T10:47:59.513
> 
> 标签：android

我正在开发一个基于列表和地图的 android 应用程序。

加载列表时，我从 Web 服务获取数据，这与我将用于在地图中添加标记的数据相同。

如何避免再次加载数据？

谢谢。

编辑：我忘了说我正在使用带有两个片段的 ABS 选项卡控件，一个用于列表，另一个用于地图。我想将数据保留在选项卡控件活动中并与片段共享。

有没有办法从片段内的父活动中获取数据？而对于大量的数据，最好将内容写入sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:48:33.890

您可以将数据作为 Intent extra 传递并在另一个 Activity 中检索它：

```
Bundle extras = getIntent().getExtras(); 
String data;

if (extras != null) {
    data = extras.getString("key");
    //use your data
} 
```

如果您的数据是某种无法通过 Intent extras 传递的对象，您可以创建一个扩展您的 Application 类的 Singleton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:00:04.183

您可以添加某些类型的 ArrayLists（整数、字符串...）作为额外的意图（例如`public Intent putIntegerArrayListExtra (String name, ArrayList<Integer> value)`在 Intent 类上）。

如果这些不合适，您可以使用 getter / setter 子类化您的 Application 类并将您的 List 存储在其中。您的 Application 对象可从所有使用的活动中获得`getApplication()`（然后您可以将其转换为您自己的应用程序子类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:55:27.600

首先，您的所有模型类都应该实现 Serializable，以便您可以将整个模型发送到另一个带有存储数据的活动。

然后在第一次活动之后

intent.putExtra("模型", commanModelList);

然后在第二个活动中获得这个意图

```
commanModelList = (ArrayList<CommanModel>) getIntent().getSerializableExtra("model"); 
```

将您的 commanModelList 与存储数据一起使用。

# android - 实现通用图像加载器和 ImageViewTouch 时双击错误

> ID：15679796
> 
> 赞同：1
> 
> 时间：2013-03-28T10:47:59.763
> 
> 标签：android, imageview, android-imageview, pinchzoom, universal-image-loader

我在我的应用程序中实现了一个照片库，所以我使用了 Nostras 著名的 Universal Image Loader。但是，它不提供放大/缩小和双击功能，这些功能目前是手机内照片的常态。

出于这个原因，我实现了 ImageViewTouch 库并用 ImageViewTouch 替换了我的 ImageView，现在我可以在我想要的照片上获得放大和缩小功能。

XML：

```
<it.sephiroth.android.library.imagezoom.ImageViewTouch
    android:id="@+id/image"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:adjustViewBounds="false"
    android:scaleType="fitCenter" /> 
```

在我的活动中：

```
ImageViewTouch imageView = (ImageViewTouch) imageLayout.findViewById(R.id.image);
imageView.setDisplayType(DisplayType.FIT_TO_SCREEN); 
```

不幸的是，当我双击时，我得到了一个黑屏。（该应用程序没有冻结或任何东西）图像突然变成黑色，我必须向左或向右滚动（或按回）以获取另一张图像，或返回我以前的屏幕。

以前有人遇到过这个问题吗？我不限于使用 ImageViewTouch。如果有任何其他图书馆可以解决这个问题，我愿意接受。

# xml - 使用 xslt 遍历兄弟节点

> ID：15679797
> 
> 赞同：0
> 
> 时间：2013-03-28T10:48:03.113
> 
> 标签：xml, xslt, xpath, xslt-2.0

我几乎是第一次使用 xslt 和 xpath，所以请多多包涵。我有以下xml（这只是其中的一小部分）：

```
<scriptflow description="" entrynodeid="301033924" leftbranch="809" name="Annual Charge and Banding v1.0" quickcode="" rightbranch="810" scriptflowid="301001711" status="1" templateid="-1">
- <scriptnode eventid="-1" name="Annual Charge" nodeid="301033924" templateid="1" templatename="action" text="[bookmark=action]Use Information on right hand screen to advise the customer of their annual charge" url="" xpos="100" ypos="130">
  <scriptnodeexit exitid="0" exitname="Info Provided" /> 
  <scriptnodeexit exitid="1" exitname="Does NOT Know Property Band" /> 
  <scriptnodeexit exitid="2" exitname="Customer Referred To Valuation Office" /> 
  <scriptnodeexit exitid="3" exitname="Transfer To Council Tax/Offer DDI" /> 
  </scriptnode>
  <subprocessnode nodeid="301033925" scriptflowid="101000700" scriptflowname="Anything Else v1.0" xpos="530" ypos="10" /> 
  <subprocessnode nodeid="301033926" scriptflowid="101000733" scriptflowname="Revenue Services - Enquiry Transfer v1.0" xpos="300" ypos="360" /> 
  <eventnode eventid="1474" name="Banding Charge" nodeid="301033927" xpos="346" ypos="50" /> 
- <scriptnode eventid="-1" name="Search for Banding" nodeid="301033928" templateid="1" templatename="action" text="[bookmark=action]Enter postcode and click on go <BR> <BR> Then enter house name/number and click on go [/bookmark]" url="" xpos="420" ypos="84">
  <scriptaction command="http://www.bracknell-forest.gov.uk/counciltaxbandreductions" componentid="10" type="0" /> 
  <scriptnodeexit exitid="0" exitname="Found Banding" /> 
  <scriptnodeexit exitid="1" exitname="Property In Another Borough" /> 
  <scriptnodeexit exitid="2" exitname="Banding NOT Found - Transfer To Revenue Services" /> 
  </scriptnode>
- <scriptnode eventid="-1" name="Details" nodeid="301033929" templateid="1" templatename="action" text="[bookmark=action]If customer is not happy with the information given, please refer them to valuation office [/bookmark]" url="" xpos="760" ypos="287">
  <scriptaction command="http://www.bracknell-forest.gov.uk/your-council/yc-council-tax/yc-amount-payable.htm" componentid="10" type="0" /> 
  <scriptnodeexit exitid="0" exitname="Customer Happy With Information" /> 
  <scriptnodeexit exitid="1" exitname="Customer Not Happy Offer Valuation Office Details" /> 
  </scriptnode>
  <eventnode eventid="1474" name="Banding Charge" nodeid="301033930" xpos="1016" ypos="20" /> 
  <subprocessnode nodeid="301033931" scriptflowid="101000700" scriptflowname="Anything Else v1.0" xpos="1120" ypos="20" /> 
- <scriptnode eventid="-1" name="Valuation" nodeid="301033932" templateid="1" templatename="action" text="[bookmark=action] If their propery banding is showing another authority, give them their details by click on authority name on right hand screen [/bookmark]" url="" xpos="810" ypos="190">
  <scriptnodeexit exitid="0" exitname="Continue" /> 
  </scriptnode>
- <scriptnode eventid="-1" name="Valuation Details" nodeid="301033933" templateid="1" templatename="action" text="[bookmark=action]Give customer details of the valuation office[/bookmark]" url="" xpos="1080" ypos="270">
  <scriptnodeexit exitid="0" exitname="Continue" /> 
  </scriptnode>
- <scriptnode eventid="-1" name="In Another Area" nodeid="301033934" templateid="1" templatename="action" text="[bookmark=action]Click on the authority name to find contact details[/bookmark]" url="" xpos="743" ypos="69">
  <scriptnodeexit exitid="0" exitname="Continue" /> 
  </scriptnode>
  <subprocessnode nodeid="301033935" scriptflowid="101000733" scriptflowname="Revenue Services - Enquiry Transfer v1.0" xpos="800" ypos="120" /> 
  <nodelink fromnode="301033924" fromnodeexit="0" tonode="301033927" /> 
  <nodelink fromnode="301033924" fromnodeexit="1" tonode="301033928" /> 
  <nodelink fromnode="301033924" fromnodeexit="2" tonode="301033932" /> 
  <nodelink fromnode="301033924" fromnodeexit="3" tonode="301033926" /> 
  <nodelink fromnode="301033927" fromnodeexit="0" tonode="301033925" /> 
  <nodelink fromnode="301033928" fromnodeexit="0" tonode="301033929" /> 
  <nodelink fromnode="301033928" fromnodeexit="1" tonode="301033934" /> 
  <nodelink fromnode="301033928" fromnodeexit="2" tonode="301033935" /> 
  <nodelink fromnode="301033929" fromnodeexit="0" tonode="301033930" /> 
  <nodelink fromnode="301033929" fromnodeexit="1" tonode="301033933" /> 
  <nodelink fromnode="301033930" fromnodeexit="0" tonode="301033931" /> 
  <nodelink fromnode="301033932" fromnodeexit="0" tonode="301033930" /> 
  <nodelink fromnode="301033933" fromnodeexit="0" tonode="301033930" /> 
  <nodelink fromnode="301033934" fromnodeexit="0" tonode="301033930" /> 
  </scriptflow> 
```

我需要从这个 xml 创建一个流程图。将一个节点链接到另一个节点的内容位于此 xml 的末尾：

```
 <nodelink fromnode="301033924" fromnodeexit="0" tonode="301033927" /> 
....
      <nodelink fromnode="301033933" fromnodeexit="0" tonode="301033930" /> 
      <nodelink fromnode="301033934" fromnodeexit="0" tonode="301033930" /> 
      </scriptflow> 
```

我到目前为止的xslt如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="html" />

  <xsl:param name="logo"></xsl:param>
  <xsl:param name="folder"></xsl:param>
<xsl:key name="Keytest" match="scriptnode/scriptnodeexit[@exitid]" use="@exitid"/> 

    <xsl:template match="nodelink">
        <xsl:for-each select=".">
        <xsl:choose>
              <xsl:when test="(preceding-sibling::scriptnode/@nodeid)mod @fromnode=0">
            NodeID:<xsl:value-of select="preceding-sibling::scriptnode/@nodeid"/>,
            Name:<xsl:value-of select="preceding-sibling::scriptnode/@name"/>,
              </xsl:when>
              <xsl:otherwise>
                <xsl:text>*no nodeID/name match*</xsl:text>
              </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each>

            <xsl:choose>
              <xsl:when test="(preceding-sibling::scriptnode/scriptnodeexit/@exitid) mod @fromnodeexit=0 and (preceding-sibling::scriptnode/@nodeid) div @fromnode=1 and (preceding-sibling::scriptnode/@nodeid) = @fromnode">
                From Node ExitID: <xsl:value-of select="@fromnodeexit"/>
                From Node ID: <xsl:value-of select="@fromnode"/>,
                ExitID:<xsl:value-of select="preceding-sibling::scriptnode/scriptnodeexit/@exitid"/>,
        Exitname:<xsl:value-of select="preceding-sibling::scriptnode/scriptnodeexit/@exitname"/>
              </xsl:when>
        </xsl:choose>             

        <xsl:choose>
      <xsl:when test="(preceding-sibling::scriptnode/scriptnodeexit/@exitid)mod @fromnodeexit=0">
        ExitID:<xsl:value-of select="preceding-sibling::scriptnode/scriptnodeexit/@exitid"/>,
        Exitname:<xsl:value-of select="preceding-sibling::scriptnode/scriptnodeexit/@exitname"/>
    <img src="{$logo}" />
      </xsl:when>
    <xsl:otherwise>
      <xsl:text>*no editID/exitname match*</xsl:text><img src="{$logo}" />
    </xsl:otherwise>
    </xsl:choose>
          FromNodeExitID:<xsl:apply-templates select="@fromnodeexit"/>, 
          From Node: <xsl:apply-templates select="@fromnode"/>, 
          To Node: <xsl:apply-templates select="@tonode"/>
        <img src="{$logo}" /><br />
  </xsl:template>
</xsl:stylesheet> 
```

我正在尝试创建一个树结构以供以后格式化以使其成为流程图，但我正在努力循环遍历 scriptnode/scptnode 退出属性。我无法上传所需流程图的图像，但我的 xslt 是在正确的轨道上还是完全关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:22:14.473

这会使用 nodelink 从您的数据中构建一棵树：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" />

    <xsl:param name="logo"/>
    <xsl:param name="folder"/>

    <xsl:key name="nodes" match="*[@nodeid]" use="@nodeid"/>
    <xsl:key name="links" match="nodelink" use="@fromnode"/>

    <xsl:template match="/scriptflow">
        <h1>Entry point</h1>
        <ul>
            <xsl:apply-templates select="key('nodes', @entrynodeid)"/>
        </ul>
    </xsl:template>

    <xsl:template match="*[@nodeid]">
        <li>
            <h2><xsl:value-of select="local-name()"/>: <xsl:value-of select="@name"/></h2>
            <xsl:apply-templates select="scriptnodeexit"/>
        </li>
    </xsl:template>

    <xsl:template match="scriptnodeexit">
        <h3>Link: <xsl:value-of select="@exitname"/></h3>
        <ul>
            <xsl:apply-templates select="key('nodes', key('links', current()/../@nodeid)[@fromnodeexit=current()/@exitid]/@tonode)"/>
        </ul>
    </xsl:template>

</xsl:stylesheet> 
```

**[工作示例](http://xsltransform.net/gWcDMed/1)**

# regex - 如何使用一个正则表达式检查所有日期时间说明符组是否以随机顺序存在

> ID：15679798
> 
> 赞同：1
> 
> 时间：2013-03-28T10:48:05.300
> 
> 标签：regex, match, regex-group

我有以下字符串`[datetime:yyyyMMddhhmmss]`，我想用正则表达式对其进行一些检查。我知道我可以通过多个正则表达式匹配来做到这一点，但如果可能的话，我希望（学习）在 1 个表达式中做到这一点。该字符串还可能包含破折号/连字符和下划线，如 so `[datetime:yyyy_MM_dd_hh-mm-ss]`。空格被前面的代码删除。并且日期时间说明符组（像 yyyy 这样的组）可以放在 after`[datetime:`和 before格式中的某个位置`]`。所以这也是一个有效的格式：`[datetime:dd_MM_yyyy_hh-mm-ss]`

要做的检查：

*   我想确保 [datetime:] 存在。我可以使用模式`\[datetime:[\w\-]+\]`
*   我想确保 6 组 yyyy MM dd hh mm ss 存在，但它们可能以随机顺序出现。

我试图用积极的前瞻/后视来做到这一点，`\[datetime:[\w\-]+(?<=.?M{2}.?)\]`以匹配代码中某处 MM 的存在。但这不起作用。

任何可以帮助我的正则表达式大师？

## **解决方案：**

根据 Bergi 的回答，我现在有了这个正则表达式模式：`\[datetime:(?=.*?y{4})(?=.*?M{2})(?=.*?d{2})(?=.*?h{2})(?=.*?m{2})(?=.*?s{2})[\w\-]+\]`可以完成这项工作。因为它匹配以下所有给定的模式：

*   [日期时间：yyyyMMddhhmmss]
*   [日期时间：mmssyyyyddMMhh]
*   [日期时间：mm_ss-yyyy_dd-MM-hh]
*   [日期时间：mmssyyyyddMM_hours_hh]

并不是所有上述模式都有意义，但这正是我想要的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:04:26.237

> 我试图用积极的前瞻/后视来做到这一点，`\[datetime:[\w\-]+(?<=.?M{2}.?)\]`以匹配代码中某处 MM 的存在。但这不起作用。

Lookbehinds 使用起来很麻烦，因为它们在不同引擎的多个级别上受到限制（如果完全支持的话）。此外，您当前的代码要求 MM 包含在日期时间字符串的最后三个字符中，这似乎不是您想要的（没有后视的等价物：）`\[datetime:[\w\-]*M{2}[\w\-]?\]`。

更好地使用前瞻：

```
\[datetime:(?=.*?y{4})(?=.*?M{2})(?=.*?d{2})…[\w\-]+\] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:34:11.177

> `\[datetime:[\w\-]+(?<=.?M{2}.?)\]`在代码中的某处匹配 MM 的存在。但这不起作用。

将`[\w\-]+`匹配到输入的末尾，因此前瞻将没有可匹配的内容。

为什么不试试：

```
\[日期时间:(?<=.*M{2})[\w\-]+\]
```

IE。the`M{2}`是在`:`结尾之后和之前的任何地方`]`。

但最后，您的：

> 如果可能的话，用 1 个表达式来做

可能会使这更难维护。更容易使用字符串操作来显式匹配前缀`[datetime:`和后缀，`]`然后`String.IndexOf`在其余部分中的每个元素上使用。

# c - C语言用户字符扫描的基础知识

> ID：15679802
> 
> 赞同：1
> 
> 时间：2013-03-28T10:48:34.273
> 
> 标签：c

嗨，这个问题可能看起来有点愚蠢，但我在这里面临着一些我无法弄清楚的严重缺乏基本面的问题。这是一个非常简单的扫描四个字符的代码，但它不能正常工作。这是一个更大程序的摘录，但这是我面临的问题。谁能指出错误在哪里？

```
#include<stdio.h>
#include<stdlib.h>
{

    char a, b, c, d;
    printf("Enter the value of a\n");
    scanf("%c", &a);
    if(a == 'Y')
    {

        printf("Enter if this question is stupid or no Y/N\n");
        scanf("%c", &b);

    }
    else
    {

        printf("This is such a big waste of time");

    }

    printf("Enter the value of c\n");
    scanf("%c", &c);

    if(c == 'Y')
    {

        printf("Enter if I am stupid or no? Y/N\n");
        scanf("%c", &d);

    }
    else
    {

        printf("I will go mad soon\n");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:51:32.400

我认为由于换行符，您可能会遇到问题。尝试使用

```
 scanf(" %c", &var) 
```

**注意**：我原来的答案是错误的，但被接受了，我从@teppic 复制了这个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:27:54.677

说明`%c`符告诉`scanf`只读取一个字符。当您键入一个字符并按 Enter 键时，您将提供两个字符。所以下一个调用已经有一个字符要读取。

为了使这项工作正常进行，您需要在读取字符之前跳过任何空格。像这样更改每个调用：

`scanf(" %c", &a)`

现在您输入的任何先前的换行符都将被跳过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T11:11:13.667

扫描字符后，您没有刷新缓冲区，当您输入一个字符并按 ENTER 时，在下一次扫描中您的 ENTER 被视为一个字符，这就是它跳过第二次扫描的原因。在每次扫描后使用这些 __fpurge(stdin)、fpurge(stdin) 中的任何一个，无论您的系统是否有效。它会起作用的。

# c# - 在 silverlight 中发送 F11 键在代码后面

> ID：15679805
> 
> 赞同：0
> 
> 时间：2013-03-28T10:48:38.870
> 
> 标签：c#, silverlight-4.0

我想在 silverlight 应用程序中使用全屏模式，但是在使用 silverlight 自己的全屏功能时，键盘被禁用。所以我可以使用浏览器的 F11 功能使应用程序以全屏模式运行。谁能建议如何在silverlight中发送钥匙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:10:59.043

我怀疑你有麻烦了。AFAIK，浏览器不允许以编程方式访问窗口功能；也就是说，它们不允许不受信任的应用程序（如 Silverlight 或页面 JavaScript）调用其“全屏”命令。

也没有办法“伪造”浏览器，就好像用户发送了击键一样。

这两个都是严重的安全问题，这就是为什么它实际上不可能。

*似乎Silverlight**在浏览器中*作为受信任的应用程序运行，它可能会利用一些 P/Invoke 功能来解决它​​，但我怀疑在你的情况下这太过分了。

编辑：顺便说一句，如果您*能够*将 Silverlight 应用程序托管为[受信任的应用程序](http://msdn.microsoft.com/en-us/library/cc189023%28v=vs.95%29.aspx)，那么仍然允许键盘事件。但是，由于您已将问题标记为`Silverlight-4.0`，我相信您必须升级到 Silverlight 5 才能利用该功能。

# jsf-2 - 如何在 portlet 环境中处理服务调用（每个操作 2 个请求）

> ID：15679806
> 
> 赞同：1
> 
> 时间：2013-03-28T10:48:42.767
> 
> 标签：jsf-2, portlet, postconstruct

在将 portlet (jsr-286) 与 JSF 2.0 一起使用时，我正在寻找会话标志的替代方案。

问题是我必须使用 @PostConstruct 从后端加载数据。原因是portlet 在运行时加载到动态portlet 页面中。因此，当第一次加载 portlet 时，会为 RenderRequest 调用 RESTORE_VIEW，并调用几个 Web 服务来加载一些数据。

当触发页面上的操作时，我在 portlet 运行时遇到了两个请求的问题：首先处理 ActionRequest，再次调用 RESTORE_VIEW，然后 LifeCycle 一直持续到 INVOKE_APPLICATION 结束。现在，处理调用 RESTORE_VIEW 和 RENDER_RESPONSE 的 RenderRequest。

我的 BackingBean 都是 @RequestScoped，这意味着在调用操作时会调用两次 @PostContruct，这会导致性能问题，因为 Web 服务也会被调用两次。现在最简单的想法是在 portlet 中使用会话标志，用于控制何时需要调用后端服务，何时不需要。

这种方法有更好的选择吗？其他人如何处理 Portlet-JSF2-Environment 中的 Bean 初始化？

# html-table - mootools 使用 HtmlTable 类动态添加/删除表行

> ID：15679816
> 
> 赞同：1
> 
> 时间：2013-03-28T10:49:28.037
> 
> 标签：html-table, row, add, mootools

如何删除我的表格行 onClick 事件？

```
 var count = 0,
        optionsTable     = new HtmlTable({
                properties: {id: 'optionstable', border: 0, cellspacing: 0, width: "100%"},
                headers: ['Name', 'Value', 'Price', 'Action']                               
            }).inject(container);

        optionsTable.push(['<input type="text" name="option[0][name]" class="w70">',
                   '<input type="text" name="option[0][value]" class="w50">',
                   '<input type="text" name="option[0][price]" class="w50">',
                   '<a href="javascript:void(0);" class="add_option">Add</a>'
                 ]);

        $$('.add_option').addEvent('click', function(){
            count ++;
            optionsTable.push(['<input type="text" name="option['+count+'][name]" class="w70">',
               '<input type="text" name="option['+count+'][value]" class="w50">',
               '<input type="text" name="option['+count+'][price]" class="w50">',
               '<a href="javascript:void(0);" class="product_remove_option">Remove</a>'
           ]);
        });

        $$('.product_remove_option').addEvent('click', function(){
            /*What should be here to remove selected table row?*/                        
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T08:32:44.743

这应该做你想要的：

```
$('optionstable').getElements('tr').addEvent('click',function(){
  this.destroy();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:19:28.663

首先，您应该确保始终将事件添加到新创建的元素（或使用事件委托）。

回答您的问题：该`HtmlTable.push`方法返回一个包含添加的表格行和表格单元格的对象。您只需调用`destroy`表格行即可将其删除。

以下是代码的外观：

```
var count = 0,
    optionsTable     = new HtmlTable({
            properties: {id: 'optionstable', border: 0, cellspacing: 0, width: "100%"},
            headers: ['Name', 'Value', 'Price', 'Action']                               
        }).inject(container);

var firstRow = optionsTable.push(['<input type="text" name="option[0][name]" class="w70">',
           '<input type="text" name="option[0][value]" class="w50">',
           '<input type="text" name="option[0][price]" class="w50">',
           '<a href="javascript:void(0);" class="add_option">Add</a>'
         ]);

firstRow.tr.getElement('.add_option').addEvent('click', function(){
    count ++;
    var newRow = optionsTable.push(['<input type="text" name="option['+count+'][name]" class="w70">',
       '<input type="text" name="option['+count+'][value]" class="w50">',
       '<input type="text" name="option['+count+'][price]" class="w50">',
       '<a href="javascript:void(0);" class="product_remove_option">Remove</a>'
    ]);
    newRow.tr.getElement('.product_remove_option').addEvent('click', function(){
        newRow.tr.destroy();
    });                   
}); 
```

# c# - 为什么即使有大约 700Mb 的可用 RAM，我也会得到 System.OutOfMemoryException？

> ID：15679817
> 
> 赞同：5
> 
> 时间：2013-03-28T10:49:28.407
> 
> 标签：c#, winforms, out-of-memory

我正在运行一些测试，以查看我的日志记录将如何执行，而不是`File.AppendAllText`我会先写入内存流然后复制到文件。所以，只是为了看看我这样做的内存操作有多快..

```
private void button1_Click(object sender, EventArgs e)
    {
        using (var memFile = new System.IO.MemoryStream())
        {
            using (var bw = new System.IO.BinaryWriter(memFile))
            {
                for (int i = 0; i < Int32.MaxValue; i++)
                {
                    bw.Write(i.ToString() + Environment.NewLine);
                }
                bw.Flush();
            }
            memFile.CopyTo(new System.IO.FileStream(System.IO.Path.Combine("C", "memWriteWithBinaryTest.log"), System.IO.FileMode.OpenOrCreate));
        }
    } 
```

`i`到达时，即使我的[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)说我有大约 700Mb 的可用内存，我也`25413324`得到了一个？`Exception of type 'System.OutOfMemoryException' was thrown.`

这是屏幕截图（以防万一）

进程浏览器 ![在此处输入图像描述](../Images/8cc6f28aba9ea4ef61fb3bc292e8cffb.png)

这是winform

![在此处输入图像描述](../Images/eac828cb134d91d1d1c843dee581024a.png)

**编辑：**为了在堆上创建更多对象，我重写了`bw.write`这个

```
bw.Write(i); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T11:04:12.167

首先，你的内存不足是因为你`MemoryStream`在`FileStream`. 直接使用`FileStream`，您根本不需要太多 RAM（但您必须保持文件打开）。

未使用的物理内存量与此异常没有直接关系，这听起来很奇怪。

重要的是：

*   *你在进程的虚拟地址空间*中有一块连续的可用内存
**   系统提交不超过总 RAM 大小 + 页面文件大小*

 *当您要求 Windows 内存管理器为您分配一些 RAM 时，它需要检查的不是有多少*可用*，而是它*承诺*为其他所有进程提供多少。这种承诺是通过提交完成的。*提交*一些内存意味着内存管理器向您提供了保证，当您最终使用它时*它将*可用。

因此，可能是物理 RAM 已完全用完，但您的分配请求仍然成功。为什么？因为页面文件中有很多可用空间。当您真正开始使用通过这种分配获得的 RAM 时，内存管理器只会简单地分页出其他内容。所以 0 物理 RAM != 分配将失败。

反之亦然；尽管有一些未使用的物理 RAM，但分配可能会失败。您的进程通过所谓的*虚拟地址空间*查看内存。当您的进程在 address 读取内存时`0x12340000`，这是一个虚拟地址。它可能会映射到 RAM at`0x78650000`或 at `0x000000AB12340000`（在 64 位操作系统上运行 32 位进程），它可能指向仅存在于页面文件中的东西，或者它甚至可能根本不指向任何东西。

当您要分配具有连续地址的内存块时，RAM 需要在此虚拟地址空间中是连续的。对于 32 位进程，您只能获得 2GB 或 3GB 的可用地址空间，因此以不存在足够大小的连续块的方式使用它并不难，尽管有可用的物理 RAM 和足够的总未使用的虚拟地址空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:59:08.110

这可能是由内存碎片引起的。

大对象进入大对象堆，它们不会四处移动以腾出空间。这可能会导致可用内存中存在间隙的碎片，当您尝试分配大于任何可用内存块的对象时，这可能会导致内存不足。

[有关详细信息，请参见此处](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)。

任何大于 85,000 字节的对象都将被放置在大对象堆中，但阈值仅为 1000 个双精度（或 8000 字节）的双精度数组除外。

另请注意，32 位 .Net 程序被限制为每个对象的最大 2GB，整体略小于 4GB（根据操作系统，可能低至 3GB）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:11:49.920

您不应该使用 a`BinaryWriter`将文本写入文件。改用 a `TextWriter`。

现在您正在使用：

`for (int i = 0; i < Int32.MaxValue; i++)`

这将在每次写入时至少写入 3 个字节（数字表示和换行符）。到那时`Int32.MaxValue`，您需要至少 6GB 的内存才能看到您正在将其写入`MemoryStream`.

进一步查看您的代码，您将以`MemoryStream`任何方式将其写入文件。因此，您可以简单地执行以下操作：

```
for (int i = 0; i < int.MaxValue; i++)
{
  File.AppendAllText("filename.log", i.ToString() + Environment.Newline);
} 
```

或写一个 open `TextWriter`：

```
TextWriter writer = File.AppendText("filename.log");

for (int i = 0; i < int.MaxValue; i++)
{
  writer.WriteLine(i);
} 
```

如果您想要一些内存缓冲区，IMO 不适合记录日志，因为您将在崩溃期间丢失最后一点写入，您可以使用以下命令创建`TextWriter`：

```
StreamWriter(string path, bool append, Encoding encoding, int bufferSize) 
```

并为 . 传递一个“大”数字`bufferSize`。默认值为`1024`.

要回答这个问题，由于`MemoryStream`调整大小，您会遇到内存不足异常，并且在某些时候它会变得很大以适应内存（在另一个答案中讨论过）。*

# umbraco - Umbraco 多个站点相同的节点名称抛出 404

> ID：15679823
> 
> 赞同：0
> 
> 时间：2013-03-28T10:49:43.980
> 
> 标签：umbraco

我有一个 umbraco 安装，其中有两个站点，两个站点都有一个`Contact Us`在根目录中调用的页面。我已经配置了他们的域名，所以在开发中我有`site1.local`并且`site2.local`

如果我转到`site1.local/contact-us/`该页面工作正常，但如果我尝试转到第二个站点，请联系我们页面 ( `site2.local/contact-us/`)，它只会将我重定向到第一个站点 404 页面。

有没有人遇到过这个问题或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:23:43.753

如果未设置模板，请检查您是否已设置模板并将其分配给页面，因为您将被重定向到主 404。如果是这样的话

# footer - 粘性页脚问题 - 如何获得 100% 的内容高度减去页眉和页脚

> ID：15679824
> 
> 赞同：0
> 
> 时间：2013-03-28T10:49:46.637
> 
> 标签：footer, sticky, css

我写了这个粘性页脚模板，我希望我的内容 div 有 100% 的最小高度。问题是，当我这样做时，它会在页脚下方延伸，并具有额外的页眉高度 + 页脚高度。我怎样才能解决这个问题？它也应该支持短内容和长内容，与粘性页脚相同。我需要使用 jQuery 吗？我是初学者，所以请亲吻。

HTML

```
 <body>
    <form id="form1" runat="server">
        <div class="wrapper">
            <div class="header"></div>
            <div class="content">

                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                </asp:ContentPlaceHolder>

            </div>
            <div class="footer"></div>
        </div>
    </form>
</body> 
```

CSS

```
html, body {
    min-height:100%;
    height:100%;
}

#form1 {
    min-height:100%;
    height:100%;
    margin:0;
}

.wrapper {
   min-height:100%;
   height:100%;
   position:relative;
}
.header {
   background:#990066;
   height:100px;
}
.content {
   background:#ffffcc;
   padding-bottom:100px;   /* Height of the footer */
   min-height: 100%;
   width: 1120px;
   margin: 0 auto;
}
.footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:100px;   /* Height of the footer */
   background:#333;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T22:41:55.443

```
.content {
    min-height: calc(100% - 100px - 100px);   /* minus header-height minus footer-height */
} 
```

内容元素的最小高度设置为 100% 减去 100px（页眉高度）和 100px（页脚高度）。使用 CSS 函数`calc()`，浏览器计算出准确的高度。这在跨浏览器兼容性方面会更好：

```
.content {
    min-height: -webkit-calc(100% - 100px - 100px);
    min-height: -moz-calc(100% - 100px - 100px);
    min-height: calc(100% - 100px - 100px);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T13:03:24.650

这可以通过css来实现。

HTML（注意页脚 div 的嵌套略有变化）

```
<body>
    <form id="form1" runat="server">
        <div class="wrapper">
            <div class="header"></div>
            <div class="content">
                ...
            </div>
        </div>
        <div class="footer"></div>
    </form>
</body> 
```

* * *

CSS

```
html, body, #form1 {height: 100%;}

.wrapper {
    min-height: 100%;
}

.content {
    padding-bottom: 150px; /* must be same height as the footer */
}  

.footer {
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
} 
```

* * *

改编自这里。

[http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

也是一个快速的小提琴[http://jsfiddle.net/Zf8Fh/3/](http://jsfiddle.net/Zf8Fh/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:30:30.820

您只需要在 css 中固定 .footer 类的位置，如下所示

```
.footer {
  position:fixed;
  bottom:0;
  width:100%;
  height:100px;   /* Height of the footer */
  background:#333;
} 
```

# jquery - JQuery uplodify：如何防止用户离开页面

> ID：15679826
> 
> 赞同：0
> 
> 时间：2013-03-28T10:49:49.183
> 
> 标签：jquery, uploadify

我们的 Web 应用程序目前正在使用 uploadify(v2.1.4) 将多个文件上传到我们的远程服务器。但是当用户上传文件时，他可能会意外（或故意）导航出上传页面，上传将被停止。

```
window.onbeforeunload = function(e) {
        if(curently_uploading())
          return 'There is ongoing upload, are you sure that you want to leave this page?';
        else
          return null;              
    } 
```

它有效，用户收到通知。

但是......当前文件上传刹车（uploadify.js 收到错误：2038）。

如果上传了多个文件，只有当前文件会中断，其他文件会在之后继续上传。

我怀疑当用户试图离开上传页面时，所有正在进行的 POST 请求都会被暂停。我可以防止吗？

或者，我应该在上传队列中再次添加文件吗？

编辑：似乎这只在某些浏览器上中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:55:26.130

希望这对你有用。

```
window.onbeforeunload = confirmExit;
function confirmExit()
{
    return "Warning: Your file upload is in progress!!";
} 
```

本项目中用于fileupload的插件是 [blueimp jquery File Upload](https://github.com/blueimp/jQuery-File-Upload)

我没有遇到上传中断，可以稍后在队列中添加文件。我不能说关于uploadify，因为我没有尝试过。可能uploadify的文档对你有很大帮助。

请使用您的错误代码进行搜索。
[http://www.uploadify.com/forums/discussion/556/another-one-on-io-error-2038/p1](http://www.uploadify.com/forums/discussion/556/another-one-on-io-error-2038/p1)

# javascript - 检查/验证javascript语法的简单方法

> ID：15679827
> 
> 赞同：8
> 
> 时间：2013-03-28T10:49:49.640
> 
> 标签：javascript, syntax, jslint, jshint

我有一些不同的 javascript 片段（数千个），其中一些在语法上有一些愚蠢的错误（比如不匹配的大括号/引号、javascript 中的 HTML、变量名中的拼写错误）。

我需要一种简单的方法来检查 JS 语法。我已经尝试过 JSLint，但它发送了太多关于样式、变量定义方式等的警告（即使我关闭了所有标志）。我不需要找出样式问题，或者提高 javascript 质量，我只需要找到明显的语法错误。当然，我可以简单地在浏览器/浏览器控制台中检查它，但我需要自动执行它，因为该片段的数量很大。

**补充：**
JSLint/JSHint 报告了很多不是'美'但工作的行中的问题（即有一些**潜在**的问题），并且看不到**真正的**问题，正常的编译器会简单地报告语法错误并停止执行. 例如，尝试 JSLint 代码，该代码在第 4 行（不匹配的引号）、第 6 行（需要逗号）和第 9 行（意外的 <script>）有语法错误。

```
document.write('something');
a = 0;
if (window.location == 'http://google.com')  a = 1;
document.write("aaa='andh"+a+"eded"');
a = {
  something: ['a']
  something2: ['a']
};
<script>
a = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:54:44.747

您可以尝试[JSHint](http://www.jshint.com/docs/)，它不那么冗长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T18:52:42.003

万一有人还在找你可以试试[Esprima](http://esprima.org/demo/validate.html "埃斯普里玛") ,

它只检查语法，没有别的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:32:39.327

我发现 SpiderMonkey 能够在不执行脚本的情况下编译脚本，如果编译失败 - 它会打印错误。

所以我刚刚为 SpiderMonkey 创建了小包装器

```
sub checkjs {
    my $js = shift;
    my ( $js_fh, $js_tmpfile ) = File::Temp::tempfile( 'XXXXXXXXXXXX', EXLOCK => 0, UNLINK => 1, TMPDIR => 1 );
    $| = 1;
    print $js_fh $js;
    close $js_fh;
    return qx(js -C -f $js_tmpfile 2>&1);
} 
```

就我而言，javascriptlint.com 的交易也非常好。（感谢@rajeshkakawat）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T20:59:42.817

如果您有想要捕获的 JSLint 错误的详尽列表，则有很多**选项**。

JSLint 的代码实际上非常好并且相当容易理解（我假设您已经从您的问题中对 JavaScript 相当了解）。你可以破解它只检查你想要的东西，不管它发现多少错误都继续。

您还可以在 Node.js 中快速编写一些东西，以按原样使用 JSLint 来快速检查每个文件/片段并仅输出您关心的那些错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-05T12:34:01.813

只需使用`node --check filename`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-28T14:42:19.463

Semantic Designs（我的公司）的 JavaScript 格式化程序读取 JS 文件并格式化它们。你不想要格式化部分。

为了读取它将被格式化的文件，它使用了一个完整的 JavaScript 解析器，它会进行完整的语法检查（甚至在正则表达式中）。如果你运行它并忽略格式化的结果，你会得到一个语法检查器。

你可以给它一个大的文件列表，它会格式化所有的文件。您可以使用它来批量检查您的大集合。（如果有任何语法错误，它会向 shell 返回一个非零错误状态）。

# javascript - JQuery 文件下载添加基本 url

> ID：15679829
> 
> 赞同：1
> 
> 时间：2013-03-28T10:49:53.717
> 
> 标签：javascript, jquery

我正在使用 jquery.fileDownload.js 库，该库带有指向与客户端应用程序在同一服务器上运行的类似 REST 的服务的 URL。问题是客户端应用程序主机名是这样的： http://www.site.com/application/ 但是当我发送时，Rest 服务在 http://www.site.com/api/v1/data/ 上运行REST 服务的 url fileDownload 库添加了应用程序的基本 URL，但我想要没有 /application 路径的主机名。这是一些代码：

```
var zipUrl = "/api/v1/data/1/zip?file=<file1>&file=<file2>"
zipFiles(zipUrl);

function zipFiles(url) {
   $.fileDownload(url, {
     successCallback: function (url) {

     $preparingFileModal.dialog('close');
     $('.olPopup').hide();
 },
 failCallback: function (responseHtml, url) {

     $preparingFileModal.dialog('close');
     $("#error-modal").dialog({ modal: true, resizable: false });
     $('.olPopup').hide();
 }
});
}; 
```

在萤火虫中，我可以看到 GET 方法用于此 URL：http://www.site.com/application/api/v1/data/ 而不是 http://www.site.com/api/v1/data /

我正在使用 jquery 1.9.1 和 jquery.fileDownload.js 的 v.1.3.0 版本

有没有办法解决这个问题？

# regex - 使用 bash/sed/awk 从主机文件生成正则表达式

> ID：15679833
> 
> 赞同：0
> 
> 时间：2013-03-28T10:50:04.303
> 
> 标签：regex, bash, shell, sed, awk

我有一个主机文件，格式如下：

```
# comments

(ipv4/ipv6 address) (multiple hostnames)
.
.
. 
```

我需要使用 bash/sed/awk 将它们转换为优化的正则表达式。例如，如果我们在 hosts 文件中有以下内容：

```
127.0.0.1 abc.example.com def.examples.com
127.0.0.1 ghi-example.com foobar.com
127.0.0.1 malwaredomain.com malware-domain.com 
```

转换为：

```
(((abc|def)\.|ghi-)\.example\.com|foobar\.com|malware-?domain\.com) 
```

最好还进行一些智能转换。例如，如果我们有很多类似的条目，例如：

```
127.0.0.1 ad-us.adserver.com ad-uk.adserver.com ad-fr.adserver.com ad-de.adserver.com
127.0.0.1 ad-ru.adserver.com ad-ca.adserver.com ad-se.adserver.com ad-be.adserver.com
... 
```

它们可能被转换为`ad\..*\.adserver.com`，甚至可能被转换为`ad\..{2}\.adserver\.com`。当然，类似的`ad-(us|uk|fr|de|ru|ca|se|be)\.adserver\.com`工作，但我更喜欢有一个通用规则，因为检测服务器可能会在以后添加的额外好处。

编辑：总结一下，如果我有这样的主机文件：

```
127.0.0.1 atmdt.com foo.atmdt.com bar.admdt.com
127.0.0.1 anifkalood.ru boeing-job.com ilianorkin.ru humaniopa.ru
127.0.0.1 hillairusbomges.ru mgithessia.biz justintvfreefall.org 
```

输出将是一个覆盖上述所有服务器的正则表达式：

```
((((foo|bar)\.?atmdt|boeing-job)\.com)|(anifkalood|hillairusbomges|ilianorkin|humaniopa)\.ru|mgithessia\.biz|justintvfreefall\.org) 
```

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:54:36.223

您似乎正在寻找一个正则表达式生成器。这里有一些 ：

*   [Regexp::List - 从单词列表中构建正则表达式](http://search.cpan.org/~dankogai/Regexp-Optimizer-0.15/lib/Regexp/List.pm)(Perl) - 由 questionner/@user2064000 选择
*   [从示例中自动生成正则表达式](http://regex.inginf.units.it/)（Java/Javascript 语法）
*   [JavaScript 正则表达式生成器（测试版）](http://www.jslab.dk/tools.regex.php)（Javascript 语法）
*   [知道已过时 :: 正则表达式生成器](http://txt2re.com/)（不确定：perl php python java javascript Coldfusion c c++ ruby​​ vb vbscript j# c# c++.net vb.net）
*   [Re-Gen - 正则表达式生成器](https://github.com/lahwran/regex_generator)（python 语法）

我会推荐遗传方法，但不确定它们的优化水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:36:03.530

这看起来更像是一个计算机科学项目，而不是一个简单的编程问题！

我认为您不会找到任何直接的 bash/sed/awk 指令来执行此操作。您想以编程方式创建正则表达式，而 sed/awk 通常更适合*使用*正则表达式。我想您必须研究[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)，特别是计算两个字符串之间的[Levenshtein 距离。](http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance)

# c# - 将值从 aspx 传递给 javascript

> ID：15679834
> 
> 赞同：1
> 
> 时间：2013-03-28T10:50:12.480
> 
> 标签：c#, javascript, asp.net

我有一组地址，我用来加载到地图上，

我使用 HiddenField 将这些地址从 cs 文件加载到 javascript

```
//  In code behind   
string []arr=new string[]
{
"51.482238,0.001581",
"51.473364,0.011966","51.471974,-0.000651",
"51.472108,-0.002196","51.474995,-0.003827",
"51.476492,-0.005629","51.477855,-0.006058",
"51.478443,-0.007045","51.479298,-0.007861",
"51.481202,-0.002136","51.481577,-0.0022"
};

    for ( int j = 0; j < arr.Length ; j++ )
    {
        HiddenField1.Value += arr[j] + ":";
    }
}

//in javascript

var hidValue= document.getElementById("<%=HiddenField1.ClientID%>").value;

var latlonArr = hidValue.split(':');
for (var i = 0; i < latlonArr.length - 1; i++) 
    {
        //alert("item :"+ i + " : "+latlonArr[i]);
        var latlonA = latlonArr[i].split(',');
        var latlon = new google.maps.LatLng(latlonA[0],latlonA[1]);
        arrCoords.push(latlon);
    } 
```

所以，现在如果我有更多没有。地址，对于从 100 到 1000 或更多的地址，可以使用 HiddenField 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:56:17.603

使用您可能拥有的最大地址数检查性能，如果性能还可以，那么您应该没问题。如果性能不好，则考虑异步获取地址，例如一次 100 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:30:22.447

在代码隐藏中，您可以使用：

```
string []arr=new string[]
{
   "51.482238,0.001581",
   "51.473364,0.011966","51.471974,-0.000651",
   "51.472108,-0.002196","51.474995,-0.003827",
   "51.476492,-0.005629","51.477855,-0.006058",
   "51.478443,-0.007045","51.479298,-0.007861",
   "51.481202,-0.002136","51.481577,-0.0022"
};
HiddenField1.Value = arr.join(","); 
```

# javascript - 使用带有 Typescript 的草坪椅

> ID：15679838
> 
> 赞同：3
> 
> 时间：2013-03-28T10:50:18.300
> 
> 标签：javascript, local-storage, typescript, lawnchair

遇到了一个简单的问题，在使用 typescript 的“this”范围的类似问题中提到了这个问题。

我有一项存储服务，可以为我当地的存储问题包裹草坪椅。现在我正在将此代码迁移到 Typescript 我遇到了一个我无法解决的问题。

```
public GetAll(callback: Function) {
           Lawnchair({ name: this.storeName }, function () {
                this.all(callback);
            });
        }; 
```

现在在上面的示例中，草坪椅使它成为您正在操作的实际商店，但 Typescript 将使它成为您正在使用的类的实例*。*那么有没有办法解决这个问题？

== 编辑 ==

稍微更新了问题示例，以免与底层的草坪椅方法和周围的类方法混淆。

这是我在尝试编译时遇到的错误：

> 'LawnchairStorageService' 类型的值不存在属性 'all'

这是正确的，该方法不存在于包含的类实例中，它存在于草坪关闭范围*this*的上下文中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:07:34.507

如上面的评论所述，它可以编译，我认为它应该运行：

```
public GetAll(callback: Function) {
    return function (callback){
        Lawnchair({ name: this.storeName }, function () {
            this.all(callback);
        });
    }(callback);
}; 
```

...但我怀疑其他人可能会提出更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:06:19.987

您是否尝试过以下操作：

```
public Exists(uniqueIdentifier: string, callback: Function) {
           var me = this;
           Lawnchair({ name: this.storeName }, function (me) {
                me.exists(uniqueIdentifier, callback);
            });
        }; 
```

# string - 在 Excel VBA 中搜索范围

> ID：15679839
> 
> 赞同：0
> 
> 时间：2013-03-28T10:50:21.573
> 
> 标签：string, excel, vba, search, range

我有一个字符串数组，并且在数组的每个插槽中都有一个字符串格式的“列范围”，例如“B：J”“k：W”“AC：AG”

该方法正在传递一个字符串，该字符串是列名，例如“C”

我需要搜索“C”是否在“B:J”中。

所以基本上它需要检查“C”是否在“BCDEFGHIJ”中，以及它是否从循环中中断

但是，如果我输入“A”，它应该会转到数组中的下一个插槽。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:40:15.060

你可以看看

[如何将列号（例如 127）转换为 excel 列（例如 AA）](https://stackoverflow.com/questions/181596/how-to-convert-a-column-number-eg-127-into-an-excel-column-eg-aa)

```
sheet.Application.ActiveCell.Column //for current selected column
int col=sheet.Range("A").Column; // for any choosen column 
```

返回当前列号，只需将相同的应用于您的范围 B:J，检查是否 J (10) > C (3) > B ( 2)

那么你可以说它在那个范围之内。

如果需要使用我给你的链接绕过这个功能的其他方式。

```
ConvertToAlphaColumnReferenceFromInteger(sheet.Application.ActiveCell.Column) 
```

为 C#/.NET 完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:45:26.050

此函数将返回数组中单列包含在范围内的位置。它使用 Intersect 属性来确定两个范围是否相交。

```
Function ArrayPos(sColLetter As String, vaRanges As Variant) As Long

    Dim i As Long
    Dim sh As Worksheet
    Dim lReturn As Long

    Set sh = Sheet1

    For i = LBound(vaRanges) To UBound(vaRanges)
        If Not Intersect(sh.Columns(sColLetter), sh.Columns(vaRanges(i))) Is Nothing Then
            lReturn = i
            Exit For
        End If
    Next i

    ArrayPos = lReturn

End Function 
```

它是这样使用的，例如来自即时窗口

```
?arraypos("M",array("B:J","K:W"))
 1 
```

您可能希望添加一些错误检查以确保可以将参数转换为范围，但我将把它留给您。您可以在没有 Range 对象的情况下通过在冒号上拆分范围字符串并比较字母的 ASCII 值来执行此操作。

# java - 使用 HttpUnit 检索最终的重定向 url

> ID：15679846
> 
> 赞同：1
> 
> 时间：2013-03-28T10:50:37.127
> 
> 标签：java, http, web-crawler, http-unit

我正在使用 HttpUnit 来模拟这个网站：[http](http://www.voyages-sncf.com/) ://www.voyages-sncf.com/ 这是我的代码：它不会向我发送最终的重定向 url，只是用于搜索的 url，而不是结果

```
public class TestHttpUnit {

    public static void main(String[] args) throws Exception {

        // Create and initialize WebClient object
        WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
        webClient.setThrowExceptionOnScriptError(false);
        webClient.setRefreshHandler(new RefreshHandler() {
            public void handleRefresh(Page page, URL url, int arg) throws IOException {
                    System.out.println("handleRefresh");
            }
        });

        // visit Yahoo Mail login page and get the Form object
        HtmlPage page = (HtmlPage) webClient.getPage("http://www.voyages-sncf.com/");
        //Trouver le formulaire par le nom
        HtmlForm form = page.getFormByName("TrainTypeForm");
        //Trouver le formulaire avec l'action 
        //HtmlForm form = page.getFirstByXPath("//form[@action='http://www.voyages-sncf.com/dynamic/expressbooking/_SvExpressBooking']");

        // Enter login and password of 
        form.getInputByName("origin_city").setValueAttribute("paris");
        form.getInputByName("destination_city").setValueAttribute("marseille");
        form.getInputByName("outward_date").setValueAttribute("29/03/2013");

        // Click "Sign In" button/link
        page = (HtmlPage) form.getInputByValue("Rechercher").click();

        System.out.println(page.asText());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:56:48.537

根据[HTTP Unit cookbook](http://httpunit.sourceforge.net/doc/cookbook.html)，表单提交应该这样处理：

```
WebForm form = resp.getForms()[0];      // select the first form in the page
// ... fill in form fields, and finally:
form.submit();                          // submit the form 
```

之后，您将进入“等待”屏幕。我还没有尝试过，但也许你应该做这样的事情（伪代码）：

```
do {
    // Wait a while
    wc.waitForBackgroundJavaScript(3000);
    // Somehow refresh the page, since that's what your browser might do, too
} while (someTestToVerifyThatYoureStillOnTheWaitingPage(wc)); 
```

# jaxb - java.util.Date 属性在 xsd 中使用 JAX-WS (Apache CXF / Metro) 呈现为 xs:string

> ID：15679849
> 
> 赞同：1
> 
> 时间：2013-03-28T10:50:44.443
> 
> 标签：jaxb, wsdl, jax-ws, cxf, java-metro-framework

我使用 apache cxf 生成了一些基于 WSDL 的模型类。然后我添加了一个 jaxb 绑定文件来将所有 xs:dateTime 和 xs:date 元素转换为 java.util.date（而不是默认的 XMLGregorianCalendar）：

```
<jxb:javaType name="java.util.Date" xmlType="xs:date"
                      parseMethod="org.apache.cxf.tools.common.DataTypeAdapter.parseDate"
                      printMethod="org.apache.cxf.tools.common.DataTypeAdapter.printDate"/>
       <jxb:javaType name="java.util.Date" xmlType="xs:dateTime"
                      parseMethod="org.apache.cxf.tools.common.DataTypeAdapter.parseDateTime"
                      printMethod="org.apache.cxf.tools.common.DataTypeAdapter.printDateTime"/> 
```

这一切都很好，completype 元素的所有 xs:date 和 xs:dateTime 属性都生成为 java.util.Date。

当我尝试基于这些模型对象创建 Metro JAX-WS 服务时，就会出现问题。在我的情况下，所有 java.util.Date 字段都呈现为服务的 .xsd 文件中的 dataType **xs:string**。

我不知道为什么会发生这种情况，除了相关的模型属性，在 cxf 生成之后，用以下注释：

```
 @XmlElement(required = true, type = String.class)
    @XmlJavaTypeAdapter(Adapter1 .class)
    protected Date datumTijdBedrijfsdocument; 
```

我可以想象 type="String.class" 可能是所有属性都生成为 xs:string 字段的原因。

当然，我可以手动编辑所有对象，但我真的在 Metro 的 apache CFX 中寻找解决方案，以声明方式防止此问题。

我希望你们能帮助我，因为这个问题让我陷入了僵局

谢谢！

# redmine - Redmine：在评论的问题更新时通知

> ID：15679852
> 
> 赞同：0
> 
> 时间：2013-03-28T10:50:49.317
> 
> 标签：redmine, redmine-plugins

当我评论的问题更新时，是否有任何插件/补丁/任何东西可以通过电子邮件通知我？现在我只收到关于我自己的问题或分配给我的问题的通知。我知道“观看”动作，但有没有办法自动执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:01:44.100

试试这个：[https ://github.com/mezza/redmine_auto_watch](https://github.com/mezza/redmine_auto_watch)

用于在问题更新时进行自动监视的简单插件。

# mysql - MYSQL、Max、Group by 和 Max

> ID：15679857
> 
> 赞同：1
> 
> 时间：2013-03-28T10:50:56.620
> 
> 标签：mysql, sql, greatest-n-per-group

我有以下两个表。

1.电影详情（电影ID、电影名称、评分、投票、年份）

2.Movie Genre (Movie-ID,Genre)

我正在使用以下查询来执行连接并获取每种类型中评分最高的电影。

```
select Movie_Name, 
    max(Rating) as Rating,
    Genre from movie_test 
inner join movie_genre 
where movie_test.Movie_ID = movie_genre.Movie_ID 
group by Genre 
```

在输出中，Rating 和 Genre 正确，但 Movie_Name 不正确。

任何人都可以建议我应该进行哪些更改以获得正确的电影名称以及评级和类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:58:39.623

```
SELECT  g.*, d.*
FROM    MovieGenre g
        INNER JOIN MovieDetail d
            ON g.MovieID = d.MovieID
        INNER JOIN
        (
            SELECT  a.Genre, MAX(b.Rating) maxRating
            FROM    MovieGenre a
                    INNER JOIN MovieDetail b
                        ON a.MovieID = b.MovieID
            GROUP   BY a.Genre
        ) sub ON    g.Genre = sub.Genre AND
                    d.rating = sub.maxRating 
```

您的架构设计有问题。如果一个`Movie`可以有很多`Genre`，也`Genre`可以包含很多`Movie`，它应该是一个三表设计。

**电影详细信息表**

*   电影ID (PK)
*   电影名
*   电影分级

**类型表**

*   类型 ID (PK)
*   流派名称

**Movie_Genre 表**

*   MovieID (FK) -- 带有 GenreID 的复合主键
*   流派 ID (FK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:59:34.160

**这是一个常见的 MySQL 问题 - 在聚合查询中指定非聚合/非聚合列。**其他风格的 SQL 不允许您这样做，并且会警告您。

当您进行像您这样的查询时，您正在选择聚合组中的非聚合列。由于许多行共享相同的类型，因此当您选择`Movie_Name`它时，它会从每个组中随机选择一行并显示该行，因为没有通用算法来猜测您想要的行并返回该行的值。

你可能会问'为什么它随机选择？它可以选择 max(Rating) 所属的那个吗？但是其他聚合列呢，比如 avg(Rating)？它在那里选择哪一行？无论如何，如果两行具有相同的最大值怎么办？因此它不能有一个算法来选择一行。

要解决这样的问题，您必须重组查询，例如：

```
select Movie_Name, 
    Rating,
    Genre from movie_test mt
inner join movie_genre 
where movie_test.Movie_ID = movie_genre.Movie_ID 
and Rating = (select max(Rating) from movie_test mt2 where mt.Genre = mt2.Genre
group by Genre
limit 1 
```

这将使用子查询选择评级与该类型的最大评级相同的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:18:56.007

询问：

```
SELECT t.Movie_Name,
       t.Rating,
       g.Genre
FROM movie_test t
INNER JOIN movie_genre g ON t.Movie_ID = g.Movie_ID
WHERE t.Movie_ID = (SELECT t1.Movie_ID 
                    FROM movie_test t1
                    INNER JOIN movie_genre g1 ON t1.Movie_ID = g1.Movie_ID
                    WHERE g1.Genre = g.Genre
                    ORDER BY t1.Rating DESC
                    LIMIT 1) 
```

# vba - 如何点击这个按钮？

> ID：15679859
> 
> 赞同：2
> 
> 时间：2013-03-28T10:50:56.757
> 
> 标签：vba, button, click, src

大家好，我是 Visual Basic 的初学者。非常感谢您的帮助。

如何在网页中单击此按钮？

```
<a class="buttonRed" href="what_would_you_do.html" onclick="this.blur();">
  <span>Get Started</span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:41:36.623

Short example which worked for me, tested with simple html file:

**ClickA.html:**

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <title><!-- Insert your title here --></title>
</head>
<body>
    <a class="buttonRed" href="what_would_you_do.html" onclick="this.blur();">
    <span>Get Started</span>
</a>
</body>
</html> 
```

**vba standard module:**

```
' Add References:
' - Microsoft HTML Object Library
' - Microsoft Internet Controls

Sub test()
      Dim Browser As InternetExplorer
      Dim Document As htmlDocument
      Set Browser = New InternetExplorer

      Browser.Visible = True
      Browser.navigate "C:\Temp\VBA\ClickA.html"

      Do While Browser.Busy And Not Browser.readyState = READYSTATE_COMPLETE
          DoEvents
      Loop

      Set Document = Browser.Document
      Dim anchorElement As HTMLAnchorElement
      Set anchorElement = Document.getElementsByClassName("buttonRed").Item(Index:=1)
      anchorElement.Click
      Set Document = Nothing
      Set Browser = Nothing
  End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:34:45.290

actually this is not a button. its anchor tag. write your code as

```
 <a class="buttonRed" href="what_would_you_do.html">
   <span>Get Started</span>
   </a> 
```

and it will redirect to "what_would_you_do.html page (if its in root)

# linux - mfd_cell 结构在 linux 内核驱动程序中描述了什么。是描述子设备还是子设备的层次节点

> ID：15679860
> 
> 赞同：4
> 
> 时间：2013-03-28T10:50:57.413
> 
> 标签：linux, linux-kernel, linux-device-driver

我一直在尝试了解 linux 内核中的 mfd 框架来编写我的驱动程序，但似乎几乎没有任何文档，而且 mfd 内核本身似乎没有太多有用的评论。所以，我试图理解 mfd_cell 结构描述的内容。这似乎是这里的基础。我特别感兴趣的是它是否用作“x”个子设备的一般抽象，或者它是否适用于子设备的完整层次结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T13:46:08.883

MFD 是包含多个子设备的设备。例如，在嵌入式系统中，PMIC 通常包含电池管理器、充电器，有时还包含具有不相关功能的设备，例如 USB PHY、音频编解码器、实时时钟……

单元用于描述子设备。mfd 子系统将使用在该结构中注册的信息为每个子设备创建一个平台设备，以及该子设备的 platform_data。您可以指定更高级的内容，例如此设备使用的资源和挂起-恢复操作（从子设备的驱动程序调用）。

*新创建的*平台设备将以单元结构作为平台数据，可以通过`cell->platform_data`.

03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516):

| 03-28 16:24:23.722: E/JSON Parser(1516): 
# <id id="L_defaultr_3">The page cannot be displayed 03-28 16:24:23.722: E/JSON Parser(1516):</id>

 |
| <id id="L_defaultr_5">**Explanation:** There is a problem with the page you are trying to reach and it cannot be displayed.</id> |
| 03-28 16:24:23.722: E/JSON Parser(1516): 
* * *

03-28 16:24:23.722: E/JSON Parser(1516):

**Try the following:**

03-28 16:24:23.722: E/JSON Parser(1516):

*   **Refresh page:** Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion. 03-28 16:24:23.722: E/JSON Parser(1516):
*   **Check spelling:** Check that you typed the Web page address correctly. The address may have been mistyped. 03-28 16:24:23.722: E/JSON Parser(1516):
*   **Access from a link:** If there is a link to the page you are looking for, try accessing the page from that link. 03-28 16:24:23.722: E/JSON Parser(1516):

03-28 16:24:23.722: E/JSON Parser(1516):

* * *

03-28 16:24:23.722: E/JSON Parser(1516):

Technical Information (for support personnel)

03-28 16:24:23.722: E/JSON Parser(1516):

*   Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202) 03-28 16:24:23.722: E/JSON Parser(1516):  |

03-28 16:24:23.722: E/JSON Parser(1516): } 我搜索了很多朋友。但我无法解决这个问题。所以请帮助我。 注意：我在 ISA 服务器后面工作 我的网址是：http ://api.androidhive.info/contacts/ 我的 log.i("String builder",json) 返回以下内容。 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): <title>The page cannot be displayed</title> 03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543):

| 03-28 16:43:41.903: I/String Builder(1543): 
# <id id="L_defaultr_3">The page cannot be displayed 03-28 16:43:41.903: I/String Builder(1543):</id>

 |
| <id id="L_defaultr_5">**Explanation:** There is a problem with the page you are trying to reach and it cannot be displayed.</id> |
| 03-28 16:43:41.903: I/String Builder(1543): 
* * *

03-28 16:43:41.903: I/String Builder(1543):

**Try the following:**

03-28 16:43:41.903: I/String Builder(1543):

*   **Refresh page:** Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion. 03-28 16:43:41.903: I/String Builder(1543):
*   **Check spelling:** Check that you typed the Web page address correctly. The address may have been mistyped. 03-28 16:43:41.903: I/String Builder(1543):
*   **Access from a link:** If there is a link to the page you are looking for, try accessing the page from that link. 03-28 16:43:41.903: I/String Builder(1543):

03-28 16:43:41.903: I/String Builder(1543):

* * *

03-28 16:43:41.903: I/String Builder(1543):

Technical Information (for support personnel)

03-28 16:43:41.903: I/String Builder(1543):

*   Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202) 03-28 16:43:41.903: I/String Builder(1543):  |

提前致谢。 你没有得到JSON回应，你得到了一个HTML网页（在 LogCat 中清晰可见）。因此无法解析。 （您的网址以 403 网页响应：） 错误代码：403 禁止。ISA 服务器拒绝了指定的统一资源定位符 (URL)。(12202) 要解决此问题，请使用您可以打开并返回 JSON 数据的正确 URL。 androidhttpclient 4 1 回答 1 This answer is useful 4 你没有得到JSON回应，你得到了一个HTML网页（在 LogCat 中清晰可见）。因此无法解析。 （您的网址以 403 网页响应：） 错误代码：403 禁止。ISA 服务器拒绝了指定的统一资源定位符 (URL)。(12202) 要解决此问题，请使用您可以打开并返回 JSON 数据的正确 URL。 于 2013-03-28T10:53:21.557 回答 Related 1 magento - 时事通讯邮件未在 Magento 中发送 2 shell - 如何在 iPython shell 中撤消输入（不是命令输出） 1 sql - 如何比较同一个表中的两列？ 3 java - Java：New Generation Used 100%, Eden Space Used 100%, From Space Used 100% 1 php - php中的元搜索聚合 4 php - 两个循环 foreach 和 unset 4 c - 我可以要求返回值是指向常量的指针吗 1 c# - 属性引用对象类型为同一类的类 1 c# - Asp.Net 应用程序不断重启，所以缓存很大 1 c# - WPF 相当大的网格列 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# android - org.json.JSONException：预期的“：”之后 朋友们。我已经从AndroidHive下载了一个示例 JSON 解析项目。 代码是： // Making HTTP requ 问问题 问问题 2013-03-28T10:51:05.860 4333 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 朋友们。我已经从AndroidHive下载了一个示例 JSON 解析项目。 代码是： // Making HTTP request try { // defaultHttpClient DefaultHttpClient httpClient = new DefaultHttpClient(); HttpGet httpPost = new HttpGet(url); HttpResponse httpResponse = httpClient.execute(httpPost); HttpEntity httpEntity = httpResponse.getEntity(); is = httpEntity.getContent(); } catch (UnsupportedEncodingException e) { e.printStackTrace(); } catch (ClientProtocolException e) { e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); } try { BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8); StringBuilder sb = new StringBuilder(); String line = null; while ((line = reader.readLine()) != null) { sb.append(line + "\n"); } is.close(); json = sb.toString(); //json is String variable. Log.i("String Builder", json); } catch (Exception e) { Log.e("Buffer Error", "Error converting result " + e.toString()); } // try parse the string to a JSON object try { jObj = new JSONObject(json); } catch (JSONException e) { Log.e("JSON Parser", "Error parsing data " + e.toString()); } 在运行时，它会抛出java.lang.string cannot be converted to JSONObject异常。所以在寻找这个问题的解决方案后，我改变了 jObj = new JSONObject(json); 这条线作为 jObj = new JSONObject("{" + json + "}"); 这条线由这里给出的指令。在此之后，我的 logcat 显示以下错误。 03-28 16:24:23.722: E/JSON Parser(1516): Error parsing data org.json.JSONException: Expected ':' after 03-28 16:24:23.722: E/JSON Parser(1516): <title>The page cannot be displayed</title> 03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516):  03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516): 03-28 16:24:23.722: E/JSON Parser(1516):

| 03-28 16:24:23.722: E/JSON Parser(1516): 
# <id id="L_defaultr_3">The page cannot be displayed 03-28 16:24:23.722: E/JSON Parser(1516):</id>

 |
| <id id="L_defaultr_5">**Explanation:** There is a problem with the page you are trying to reach and it cannot be displayed.</id> |
| 03-28 16:24:23.722: E/JSON Parser(1516): 
* * *

03-28 16:24:23.722: E/JSON Parser(1516):

**Try the following:**

03-28 16:24:23.722: E/JSON Parser(1516):

*   **Refresh page:** Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion. 03-28 16:24:23.722: E/JSON Parser(1516):
*   **Check spelling:** Check that you typed the Web page address correctly. The address may have been mistyped. 03-28 16:24:23.722: E/JSON Parser(1516):
*   **Access from a link:** If there is a link to the page you are looking for, try accessing the page from that link. 03-28 16:24:23.722: E/JSON Parser(1516):

03-28 16:24:23.722: E/JSON Parser(1516):

* * *

03-28 16:24:23.722: E/JSON Parser(1516):

Technical Information (for support personnel)

03-28 16:24:23.722: E/JSON Parser(1516):

*   Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202) 03-28 16:24:23.722: E/JSON Parser(1516):  |

03-28 16:24:23.722: E/JSON Parser(1516): } 我搜索了很多朋友。但我无法解决这个问题。所以请帮助我。 注意：我在 ISA 服务器后面工作 我的网址是：http ://api.androidhive.info/contacts/ 我的 log.i("String builder",json) 返回以下内容。 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): <title>The page cannot be displayed</title> 03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543):  03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543): 03-28 16:43:41.903: I/String Builder(1543):

| 03-28 16:43:41.903: I/String Builder(1543): 
# <id id="L_defaultr_3">The page cannot be displayed 03-28 16:43:41.903: I/String Builder(1543):</id>

 |
| <id id="L_defaultr_5">**Explanation:** There is a problem with the page you are trying to reach and it cannot be displayed.</id> |
| 03-28 16:43:41.903: I/String Builder(1543): 
* * *

03-28 16:43:41.903: I/String Builder(1543):

**Try the following:**

03-28 16:43:41.903: I/String Builder(1543):

*   **Refresh page:** Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion. 03-28 16:43:41.903: I/String Builder(1543):
*   **Check spelling:** Check that you typed the Web page address correctly. The address may have been mistyped. 03-28 16:43:41.903: I/String Builder(1543):
*   **Access from a link:** If there is a link to the page you are looking for, try accessing the page from that link. 03-28 16:43:41.903: I/String Builder(1543):

03-28 16:43:41.903: I/String Builder(1543):

* * *

03-28 16:43:41.903: I/String Builder(1543):

Technical Information (for support personnel)

03-28 16:43:41.903: I/String Builder(1543):

*   Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202) 03-28 16:43:41.903: I/String Builder(1543):  |

提前致谢。 你没有得到JSON回应，你得到了一个HTML网页（在 LogCat 中清晰可见）。因此无法解析。 （您的网址以 403 网页响应：） 错误代码：403 禁止。ISA 服务器拒绝了指定的统一资源定位符 (URL)。(12202) 要解决此问题，请使用您可以打开并返回 JSON 数据的正确 URL。 androidhttpclient 4 1 回答 1 This answer is useful 4 你没有得到JSON回应，你得到了一个HTML网页（在 LogCat 中清晰可见）。因此无法解析。 （您的网址以 403 网页响应：） 错误代码：403 禁止。ISA 服务器拒绝了指定的统一资源定位符 (URL)。(12202) 要解决此问题，请使用您可以打开并返回 JSON 数据的正确 URL。 于 2013-03-28T10:53:21.557 回答 Related 1 magento - 时事通讯邮件未在 Magento 中发送 2 shell - 如何在 iPython shell 中撤消输入（不是命令输出） 1 sql - 如何比较同一个表中的两列？ 3 java - Java：New Generation Used 100%, Eden Space Used 100%, From Space Used 100% 1 php - php中的元搜索聚合 4 php - 两个循环 foreach 和 unset 4 c - 我可以要求返回值是指向常量的指针吗 1 c# - 属性引用对象类型为同一类的类 1 c# - Asp.Net 应用程序不断重启，所以缓存很大 1 c# - WPF 相当大的网格列 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15679865
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, httpclient

朋友们。我已经从[AndroidHive](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)下载了一个示例 JSON 解析项目。

代码是：

```
// Making HTTP request
try {
// defaultHttpClient
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet httpPost = new HttpGet(url);
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();

is = httpEntity.getContent();
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
}
is.close();
json = sb.toString(); //json is String variable.
Log.i("String Builder", json);
} catch (Exception e) {
    Log.e("Buffer Error", "Error converting result " + e.toString());
}
// try parse the string to a JSON object
try {
     jObj = new JSONObject(json);
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
} 
```

在运行时，它会抛出`java.lang.string cannot be converted to JSONObject`异常。所以在寻找这个问题的解决方案后，我改变了

```
 jObj = new JSONObject(json); 
```

这条线作为

```
 jObj = new JSONObject("{" + json + "}"); 
```

[这条线由这里](https://stackoverflow.com/questions/10267910/jsonexception-value-of-type-java-lang-string-cannot-be-converted-to-jsonobject)给出的指令。在此之后，我的 logcat 显示以下错误。

```
03-28 16:24:23.722: E/JSON Parser(1516): Error parsing data org.json.JSONException: Expected ':' after <!DOCTYPE at character 12 of {<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
03-28 16:24:23.722: E/JSON Parser(1516): <HTML dir=ltr><HEAD><TITLE>The page cannot be displayed</TITLE>
03-28 16:24:23.722: E/JSON Parser(1516): <STYLE id=L_defaultr_1>A:link {
03-28 16:24:23.722: E/JSON Parser(1516):    FONT: 8pt/11pt verdana; COLOR: #ff0000
03-28 16:24:23.722: E/JSON Parser(1516): }
03-28 16:24:23.722: E/JSON Parser(1516): A:visited {
03-28 16:24:23.722: E/JSON Parser(1516):    FONT: 8pt/11pt verdana; COLOR: #4e4e4e
03-28 16:24:23.722: E/JSON Parser(1516): }
03-28 16:24:23.722: E/JSON Parser(1516): </STYLE>
03-28 16:24:23.722: E/JSON Parser(1516): <META content=NOINDEX name=ROBOTS>
03-28 16:24:23.722: E/JSON Parser(1516): <META http-equiv=Content-Type content="text-html; charset=UTF-8">
03-28 16:24:23.722: E/JSON Parser(1516): <META content="MSHTML 5.50.4522.1800" name=GENERATOR></HEAD>
03-28 16:24:23.722: E/JSON Parser(1516): <BODY bgColor=#ffffff>
03-28 16:24:23.722: E/JSON Parser(1516): <TABLE cellSpacing=5 cellPadding=3 width=410>
03-28 16:24:23.722: E/JSON Parser(1516):   <TBODY>
03-28 16:24:23.722: E/JSON Parser(1516):   <TR>
03-28 16:24:23.722: E/JSON Parser(1516):     <TD vAlign=center align=left width=360>
03-28 16:24:23.722: E/JSON Parser(1516):       <H1 id=L_defaultr_2 style="FONT: 13pt/15pt verdana; COLOR: #000000"><ID id=L_defaultr_3><!--Problem-->The page cannot be displayed
03-28 16:24:23.722: E/JSON Parser(1516): </ID></H1></TD></TR>
03-28 16:24:23.722: E/JSON Parser(1516):   <TR>
03-28 16:24:23.722: E/JSON Parser(1516):     <TD width=400 colSpan=2><FONT id=L_defaultr_4
03-28 16:24:23.722: E/JSON Parser(1516):       style="FONT: 8pt/11pt verdana; COLOR: #000000"><ID id=L_defaultr_5><B>Explanation: </B>There is a problem with the page you are trying to reach and it cannot be displayed.</ID></FONT></TD></TR>
03-28 16:24:23.722: E/JSON Parser(1516):   <TR>
03-28 16:24:23.722: E/JSON Parser(1516):     <TD width=400 colSpan=2><FONT id=L_defaultr_6 
03-28 16:24:23.722: E/JSON Parser(1516):       style="FONT: 8pt/11pt verdana; COLOR: #000000">
03-28 16:24:23.722: E/JSON Parser(1516):       <HR color=#c0c0c0 noShade>
03-28 16:24:23.722: E/JSON Parser(1516):       <P id=L_defaultr_7><B>Try the following:</B></P>
03-28 16:24:23.722: E/JSON Parser(1516):       <UL>
03-28 16:24:23.722: E/JSON Parser(1516):         <LI id=L_defaultr_8><B>Refresh page:</B> Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion.
03-28 16:24:23.722: E/JSON Parser(1516): <LI id=L_defaultr_9><B>Check spelling:</B> Check that you typed the Web page address correctly. The address may have been mistyped.
03-28 16:24:23.722: E/JSON Parser(1516): <LI id=L_defaultr_10><B>Access from a link:</B> If there is a link to the page you are looking for, try accessing the page from that link.
03-28 16:24:23.722: E/JSON Parser(1516):       </UL>
03-28 16:24:23.722: E/JSON Parser(1516):       <HR color=#c0c0c0 noShade>
03-28 16:24:23.722: E/JSON Parser(1516):       <P id=L_defaultr_11>Technical Information (for support personnel)</P>
03-28 16:24:23.722: E/JSON Parser(1516):       <UL>
03-28 16:24:23.722: E/JSON Parser(1516):         <LI id=L_defaultr_12>Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202)
03-28 16:24:23.722: E/JSON Parser(1516):         </UL></FONT></TD></TR></TBODY></TABLE></BODY></HTML>
03-28 16:24:23.722: E/JSON Parser(1516): } 
```

我搜索了很多朋友。但我无法解决这个问题。所以请帮助我。

注意：我在 ISA 服务器后面工作

我的网址是：[http ://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/)

我的 log.i("String builder",json) 返回以下内容。

```
03-28 16:43:41.903: I/String Builder(1543): <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
03-28 16:43:41.903: I/String Builder(1543): <HTML dir=ltr><HEAD><TITLE>The page cannot be displayed</TITLE>
03-28 16:43:41.903: I/String Builder(1543): <STYLE id=L_defaultr_1>A:link {
03-28 16:43:41.903: I/String Builder(1543):     FONT: 8pt/11pt verdana; COLOR: #ff0000
03-28 16:43:41.903: I/String Builder(1543): }
03-28 16:43:41.903: I/String Builder(1543): A:visited {
03-28 16:43:41.903: I/String Builder(1543):     FONT: 8pt/11pt verdana; COLOR: #4e4e4e
03-28 16:43:41.903: I/String Builder(1543): }
03-28 16:43:41.903: I/String Builder(1543): </STYLE>
03-28 16:43:41.903: I/String Builder(1543): <META content=NOINDEX name=ROBOTS>
03-28 16:43:41.903: I/String Builder(1543): <META http-equiv=Content-Type content="text-html; charset=UTF-8">
03-28 16:43:41.903: I/String Builder(1543): <META content="MSHTML 5.50.4522.1800" name=GENERATOR></HEAD>
03-28 16:43:41.903: I/String Builder(1543): <BODY bgColor=#ffffff>
03-28 16:43:41.903: I/String Builder(1543): <TABLE cellSpacing=5 cellPadding=3 width=410>
03-28 16:43:41.903: I/String Builder(1543):   <TBODY>
03-28 16:43:41.903: I/String Builder(1543):   <TR>
03-28 16:43:41.903: I/String Builder(1543):     <TD vAlign=center align=left width=360>
03-28 16:43:41.903: I/String Builder(1543):       <H1 id=L_defaultr_2 style="FONT: 13pt/15pt verdana; COLOR: #000000"><ID id=L_defaultr_3><!--Problem-->The page cannot be displayed
03-28 16:43:41.903: I/String Builder(1543): </ID></H1></TD></TR>
03-28 16:43:41.903: I/String Builder(1543):   <TR>
03-28 16:43:41.903: I/String Builder(1543):     <TD width=400 colSpan=2><FONT id=L_defaultr_4
03-28 16:43:41.903: I/String Builder(1543):       style="FONT: 8pt/11pt verdana; COLOR: #000000"><ID id=L_defaultr_5><B>Explanation: </B>There is a problem with the page you are trying to reach and it cannot be displayed.</ID></FONT></TD></TR>
03-28 16:43:41.903: I/String Builder(1543):   <TR>
03-28 16:43:41.903: I/String Builder(1543):     <TD width=400 colSpan=2><FONT id=L_defaultr_6 
03-28 16:43:41.903: I/String Builder(1543):       style="FONT: 8pt/11pt verdana; COLOR: #000000">
03-28 16:43:41.903: I/String Builder(1543):       <HR color=#c0c0c0 noShade>
03-28 16:43:41.903: I/String Builder(1543):       <P id=L_defaultr_7><B>Try the following:</B></P>
03-28 16:43:41.903: I/String Builder(1543):       <UL>
03-28 16:43:41.903: I/String Builder(1543):         <LI id=L_defaultr_8><B>Refresh page:</B> Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion.
03-28 16:43:41.903: I/String Builder(1543): <LI id=L_defaultr_9><B>Check spelling:</B> Check that you typed the Web page address correctly. The address may have been mistyped.
03-28 16:43:41.903: I/String Builder(1543): <LI id=L_defaultr_10><B>Access from a link:</B> If there is a link to the page you are looking for, try accessing the page from that link.
03-28 16:43:41.903: I/String Builder(1543):       </UL>
03-28 16:43:41.903: I/String Builder(1543):       <HR color=#c0c0c0 noShade>
03-28 16:43:41.903: I/String Builder(1543):       <P id=L_defaultr_11>Technical Information (for support personnel)</P>
03-28 16:43:41.903: I/String Builder(1543):       <UL>
03-28 16:43:41.903: I/String Builder(1543):         <LI id=L_defaultr_12>Error Code: 403 Forbidden. The ISA Server denied the specified Uniform Resource Locator (URL). (12202)
03-28 16:43:41.903: I/String Builder(1543):         </UL></FONT></TD></TR></TBODY></TABLE></BODY></HTML> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:53:21.557

你没有得到`JSON`回应，你得到了一个`HTML`网页（在 LogCat 中清晰可见）。因此无法解析。

（您的网址以 403 网页响应：）

> 错误代码：403 禁止。ISA 服务器拒绝了指定的统一资源定位符 (URL)。(12202)

要解决此问题，请使用您可以打开并返回 JSON 数据的正确 URL。

# c# - 使用 C# 加载数据库文件并将它们保存在文件夹中

> ID：15679866
> 
> 赞同：0
> 
> 时间：2013-03-28T10:51:09.327
> 
> 标签：c#, sql-server-2008

我想检索数据库文件并将每个文件保存为具有相同文件名的文本文件，如数据库。我在数据库中有 500 个文件，我想将它们全部保存在本地机器中。

我在下面尝试过，但它不起作用。任何人都可以修改或编辑以下代码..

```
 private void button1_Click(object sender, System.EventArgs e)
    {
        string connetionString = null;
        SqlConnection connection;
        SqlCommand command;
        SqlDataAdapter adapter = new SqlDataAdapter();
        DataSet ds = new DataSet();
        int i = 0;
        string sql = null;

        connetionString = "Data Source=edevsql2k5-01;Initial Catalog=AIFSOnBase;Integrated Security=True";
        sql = "SELECT vbscript FROM hsi.vbscripttable WHERE vbscriptnum=101";

        connection = new SqlConnection(connetionString);
        Directory.CreateDirectory("c:\\VBScriptFiles");

        try
        {
            connection.Open();
            command = new SqlCommand(sql, connection);
            adapter.SelectCommand = command;
            adapter.Fill(ds);
            adapter.Dispose();
            command.Dispose();
            connection.Close();

            for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                MessageBox.Show(ds.Tables[0].Rows[i].ItemArray[0].ToString());
                                }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Can not open connection ! ");
        }

    }

    }
} 
```

# c# - 如何一次以批量/部分/ 1000行读取文件

> ID：15679869
> 
> 赞同：1
> 
> 时间：2013-03-28T10:51:18.910
> 
> 标签：c#, xml, filestream, streamreader, xmlreader

我目前正在尝试制作一种可以处理读取大型 XML 文件的方法。我所需要的只是一种可以一次或小批量加载 1000 行的方法。

我一直在研究流读取器、xmlreaders 和文件流，我看到一些提到在处理数据时保持流打开以获得我需要的东西，但我似乎无法理解它。

我花了很长时间检查类似的问题，但似乎可以找到任何对我有帮助的东西。

附言。首先想到我正在考虑在 readline 周围做一个 for 循环到 1000 的计数器，但似乎无法弄清楚如何从这 1000 行继续读取另外 1000 行等，直到文件结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:58:35.967

我的感觉是他需要一个自定义的 XML 阅读器实现。

例如 - 如果您的结构看起来像：

```
root
    item
        stuff
    /item
    item
        stuff
    /item
    item
        stuff
    /item
    item
        stuff
    /item
/root 
```

您必须编写代码来读取数字“项目”块（您希望批量处理的数量），然后将它们转换为有效的 XML 文档以进行进一步处理。

但是，如果您的 XML 文档是一个庞大的庞大实体 - 我认为没有任何优雅的方式可以零碎地处理它。

# mysql - SQL自动更新功能

> ID：15679870
> 
> 赞同：-1
> 
> 时间：2013-03-28T10:51:23.783
> 
> 标签：mysql, sql, oracle, function

假设我有这两个具有 n 个属性的实体-

```
 Cost                            Total

         ------------                    ------------
          cost_value                      total_cost
         ------------                    ------------
         |100       |                    |360       |
         |200       |
         |50        |
         |10        | 
```

**这里的“总”实体存储“成本”的总和。现在我将数据插入到“成本”中，并自动将“总计”更新为新的总和值**。

是否可以编写任何会自动调用并执行我想要的任务的函数？或任何其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:01:49.640

有两种方法可以做到这一点 ：

1.  如果您有一个进行插入的存储过程，您可以创建另一个来更新总数并按此顺序执行它们。
2.  如果在多个位置进行插入（直接来自应用程序和多个存储过程），您可以在表上创建一个触发器`Total`来进行更新，并且每次在表上进行插入/更新/删除时都会触发该触发器`cost`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T11:01:12.453

奇怪的方法，但在简单的解决方案中，您必须拥有 3 个 SQL 语句。首先插入成本，然后选择总和（成本），最后更新总和值。[SUM 示例](http://www.tizag.com/mysqlTutorial/mysqlsum.php)

# java - SpringMVC 使用 JSON 返回对象列表

> ID：15679879
> 
> 赞同：3
> 
> 时间：2013-03-28T10:51:34.987
> 
> 标签：java, jquery, json, spring, spring-mvc

我有两个选择选项，当用户选择一个选项时，我希望另一个选项填充数据库中的数据。但是，我在将对象列表返回到视图时遇到问题。

**控制器**

```
@RequestMapping(value="getCrimeTypeList.htm", method = RequestMethod.GET)
 public @ResponseBody List<CrimeType> getCrimeTypeList(@RequestParam(value="crimeCatId") Integer crimeCatId) throws Exception{              

        try {
            List<CrimeType> crimeTypeList = this.crimeTypeManager.getCrimeTypeList(crimeCatId);

             return crimeTypeList;
        } catch (Exception e) {

            logger.error(e.getMessage());
            return null;
        }
} 
```

**jQuery**

```
 $("select#offenceCatId").change(function(){

       $.ajax({
           type:'GET',
           url:'getCrimeTypeList.htm',
           data:{crimeCatId: $(this).val()},

            headers: {
             Accept: 'application/json'
            },
           dataType: 'json',

           success:function(data){

            alert('it worked');

           }

       });
     }); 
```

**HTML**

```
<li>
 <label>Offence Type</label>
 <form:select path="offenceTypeId" id="offenceTypeId" title="Offence Type">
 <form:options items="${crimeType.crimeTypeList}" itemValue="crimeTypeId" itemLabel="crimeTypeDesc"/>
 </form:select>
 <form:errors path="offenceTypeId" class="errors" />
</li> 
```

**错误**

```
"NetworkError: 400 Bad Request - http://localhost:8084/crimeTrack/getCrimeTypeList.htm?[object%20Object]" 
```

**编辑** 我做了一些实验，发现如果控制器返回一个字符串，它就可以工作，但是一旦它返回一个对象，我就会遇到问题。

**萤火虫**

```
GET http://localhost:8084/crimeTrack/getCrimeTypeList.htm?crimeCatId=6 406 Not Acceptable

Response Headers
Content-Length  1067
Content-Type    text/html;charset=utf-8
Date    Fri, 29 Mar 2013 00:58:17 GMT
Server  Apache-Coyote/1.1

Request Headers
Accept  application/json
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Host    localhost:8084
Referer http://localhost:8084/crimeTrack/crime_registration.htm
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
X-Requested-With    XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:53:27.183

首先请确保您的 Spring 版本是 3.1.1 版本并且您在 lib 中添加了 jackson.jar，然后尝试使用下面的代码，您的代码有一些冗余。

```
@RequestMapping(value="/getCrimeTypeList.htm", method = RequestMethod.GET)
public @ResponseBody List<CrimeType> getCrimeTypeList(@RequestParam(value="crimeCatId") Integer crimeCatId) throws Exception{    
            try {
                return this.crimeTypeManager.getCrimeTypeList(crimeCatId);
                //return "true";
            } catch (Exception e) {
                logger.error(e.getMessage());
                return null;
            }
} 
```

```
$("select#offenceCatId").change(function(){
        var param={crimeCatId:$(this).val()};
        $.ajax({
            type:'GET',
            url:'getCrimeTypeList.htm',
            data:param,
            success:function(data){
                //append options to list
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:37:25.703

您的控制器需要一个请求标头`Accept=application/json`，在您的情况下您没有设置它。

尝试设置`Accept`标题

```
jQuery.ajax({
        type:'GET',
        url:'getCrimeTypeList.htm',
        data:{crimeCatId:$(this).val()},
        processData:false,
        headers: {
            Accept: 'application/json'
        },
        dataType: 'json',
        success:function(data){

            //append options to list

        }

    }); 
```

# mysql - 无法创建包含不同字母的 mysql 排序规则

> ID：15679881
> 
> 赞同：3
> 
> 时间：2013-03-28T10:51:38.177
> 
> 标签：mysql, unicode, collation

我正在尝试创建一个 mysql 排序规则，您可以使用该排序规则搜索西里尔字母的转录。这里有一个例子：如果我发送 sql 命令

*SELECT "w"="в" 整理 utf8_myowncollat​​ion_ci*

答案应该是“1”，因为“w”将是“в”的转录。这是我制作的转录代码：

```
      <collat​​ion name="utf8_myowncollat​​ion_ci" id="100">
        <规则>
         <重置>\u0077</重置>
         <t>\ud0b2</t>
        </规则>
      </整理>

```

不知何故，它仍然响应“0”有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T16:08:11.137

阅读[文档](http://dev.mysql.com/doc/refman/5.6/en/ldml-collation-example.html)后，我会说等效字符应该包含在`<i>`标签内（而不是`<t>`），但实际上我真的不知道我在说什么。

# json - 如何使用 REST 控制台对 http API 调用进行逆向工程

> ID：15679883
> 
> 赞同：4
> 
> 时间：2013-03-28T10:51:43.510
> 
> 标签：json, api, http, rest

我正在尝试使用 chrome [rest console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)使用相同的 http POST 参数复制我在网站（即 zoominfo.com）上发出的请求，但由于某种原因它失败了。我不确定是否缺少字段或由于请求的来源无效而无法正常工作..有人可以指出我正确的方向吗？下面是对实验的详细解释：

* * *

**原案**

**基本上，如果我去 zoominfo.com（已注册和全部），我会看到一个需要填写的表单页面：**

![在此处输入图像描述](../Images/d2b603548b9839b047676b120a0ed0d2.png)

**如果我按 Enter .. 该网站会进行 ajax 调用。如果我打开 chrome web 开发工具，然后打开`network`选项卡，我会看到 ajax 调用的详细信息：**

![在此处输入图像描述](../Images/2bcad21f86ed22b3240939f10f142d14.png)

注意 POST 的正文中包含*John Becker*的名字：

*{"boardMember":{"value":"Include","isUsed":true},"workHistory":{"value":"CurrentAndPast","isUsed":true},"includePartialProfiles":{"value": true,"isUsed":true},"personName":{"value":"john%20becker","isUsed":true},"lastUpdated":{"value":0,"isUsed":true}}*

**响应显示在响应标签下：**

![在此处输入图像描述](../Images/75b293f766d6a8a753cfa433a3455e37.png)

* * *

**我想做什么**

[基本上使用REST 控制台](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)复制我在上面所做的事情（注意：所以这里没有任何非法内容..我只是用休息客户端操作替换了 chrome 浏览器操作..我没有攻击任何人，我也没有获取信息我无法以正常方式获取信息，但如果有人有其他感觉..请告诉我）..

所以我将与上面相同的参数插入到其余控制台中：

![在此处输入图像描述](../Images/209567c40d360cc132159298c3ddaaaf.png)

现在我不确定身份验证..但为了安全起见，我在 REST 控制台中输入了与站点相同的用户名和密码：

![在此处输入图像描述](../Images/b6c453c9487bc4462e96459048b4d09c.png) ![在此处输入图像描述](../Images/fdce0bbbd2e81ec21b367cd5fcf9ea86.png)

但随后我不断收到错误作为对我的休息控制台请求的响应：

![在此处输入图像描述](../Images/6a2a6f938fdd18c294d2c5b095262706.png)

* * *

**更新：正确答案：** 所以根据[JMTyler 的](https://stackoverflow.com/users/130691/jmtyler) [回答](https://stackoverflow.com/a/15697835/766570)..我必须简单地在 RAW 正文中包含标准，并将其转换为 url 编码..除此之外，我必须在其余控制台正文中明确设置编码..

更仔细地查看 chrome 检查器，事实证明我只需要单击`view source`： ![在此处输入图像描述](../Images/1a80263cb6203af13626622614aea320.png)

获取我需要在其余控制台中放入 RAW 正文的 url 编码值： ![在此处输入图像描述](../Images/0e720bf1aba74326d8d434193a057f98.png)

我还必须将**编码**设置为`gzip,deflate,sdch`并且一切正常！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T05:25:57.400

该表单在该字段下发布所有 JSON `criteria`。您可以在您发布的 chrome 开发控制台的屏幕截图中看到这一点。

只需在休息控制台中启动您的原始身体，`criteria=`并确保 json 已被 url 编码。那应该这样做。

不需要身份验证，因为没有通过屏幕截图中的标题传递。您在正常加载页面时拥有的任何 cookie*也*将通过 rest 控制台加载，因此您无需担心显式设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:57:19.473

阅读您的问题，我会做出一个有根据的猜测：zoominfo 不提供 RESTful API。Rest-Console 理解并使用 HTTP 身份验证，这与实现的身份验证处理程序 zoominfo 不同。

一种可能的解决方法可能是：通过休息控制台调用登录页面。你会得到饼干和更多。在随后对 zoominfo 的请求中，请确保在您的请求中包含这些 cookie（可能包含一些会话信息），因此其作用类似于浏览器。

# oracle - 无法创建 NodeManager.properties 文件

> ID：15679888
> 
> 赞同：0
> 
> 时间：2013-03-28T10:51:49.780
> 
> 标签：oracle, weblogic, obiee

我正在尝试在我的 Windows 7 机器 64 位上安装 obiee。除了创建域时的最后一步之外，所有步骤都成功执行，但失败了。请帮助我，因为我尝试安装简单的安装类型和企业安装类型，但是两次都出现相同的错误，并且我在同一步骤中陷入困境

```
 NMProcess: <Mar 25, 2013 7:21:35 PM> <SEVERE> <Fatal error in node manager server>
            NMProcess: java.lang.NullPointerException
            NMProcess: at java.util.Hashtable.containsKey(Hashtable.java:314)
            NMProcess: at weblogic.nodemanager.server.NMServerConfig.initNetworkInfoList(NMServerConfig.java:491)
            NMProcess: at weblogic.nodemanager.server.NMServerConfig.getNetworkInfoList(NMServerConfig.java:481)
            NMProcess: at weblogic.nodemanager.server.NMServerConfig.getConfigProperties(NMServerConfig.java:545)
            NMProcess: at weblogic.nodemanager.server.NMServer.<init>(NMServer.java:154)
            NMProcess: at weblogic.nodemanager.server.NMServer.main(NMServer.java:375)
            NMProcess: at weblogic.NodeManager.main(NodeManager.java:31) 
```

摘自在 \common\nodemanager 创建的 nodemanager.log：

```
<Mar 25, 2013 7:21:31 PM> <INFO> <Loading domains file: C:\FusionMW\wlserver_10.3\common\nodemanager\nodemanager.domains>
<Mar 25, 2013 7:21:35 PM> <INFO> <Loading identity key store: FileName=C:/FusionMW/WLSERV~1.3/server\lib\DemoIdentity.jks, Type=jks, PassPhraseUsed=true>
<Mar 25, 2013 7:21:35 PM> <WARNING> <Node manager configuration properties file 'C:\FusionMW\wlserver_10.3\common\nodemanager\nodemanager.properties' not found. Using default settings.>
<Mar 25, 2013 7:21:35 PM> <INFO> <Saving node manager configuration properties to 'C:\FusionMW\wlserver_10.3\common\nodemanager\nodemanager.properties'>
<Mar 25, 2013 7:21:35 PM> <SEVERE> <Fatal error in node manager server>
java.lang.NullPointerException
at java.util.Hashtable.containsKey(Hashtable.java:314)
at weblogic.nodemanager.server.NMServerConfig.initNetworkInfoList(NMServerConfig.java:491)
at weblogic.nodemanager.server.NMServerConfig.getNetworkInfoList(NMServerConfig.java:481)
at weblogic.nodemanager.server.NMServerConfig.getConfigProperties(NMServerConfig.java:545)
at weblogic.nodemanager.server.NMServer.<init>(NMServer.java:154)
at weblogic.nodemanager.server.NMServer.main(NMServer.java:375)
at weblogic.NodeManager.main(NodeManager.java:31) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:23:14.107

尝试使用仅软件安装模式进行安装。当您说您已经尝试了两种安装类型时，我想您正在尝试安装 OBIEE 11.1.1.4 或更低版本。

仅软件安装模式出现在 11.1.1.5 及更高版本中。这帮助我克服了你所说的同样的问题。

维杰。

# java - hibernate和sqlserver并发问题？

> ID：15679893
> 
> 赞同：0
> 
> 时间：2013-03-28T10:52:06.123
> 
> 标签：java, sql-server, spring, hibernate

我有一个暴露的网络服务，它将一些数据保存到某个表中。我正在使用 sqlserver 数据库。多个系统可以同时使用 Web 服务。

问题是两个系统都在检查记录的存在并报假，同时插入一条新记录，导致重复键导致并发异常。

我正在使用休眠，并且调用 Web 服务的系统也提供主键。

我可以在这里制作方法`synchronized`吗？会有缺点还是有什么优雅的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:00:20.740

我不建议使用`synchronised`甚至使用 Java/Hibernate 来避免重复；如果您必须扩展现有应用程序或添加另一个修改数据的应用程序，您仍然会遇到此问题。

最好的方法是在表上设置唯一约束以避免重复；这允许您在插入重复项时处理唯一约束违规并做任何您想做的事情。

# c - 线程是在 UDP 服务器中一次处理 40 个客户端的最佳方式吗？

> ID：15679894
> 
> 赞同：3
> 
> 时间：2013-03-28T10:52:06.347
> 
> 标签：c, winapi, network-programming, udp

我正在开发 UDP 服务器/客户端应用程序。

我希望我的服务器一次能够处理 40 个客户端。我曾想过在服务器端创建 40 个线程，每个线程处理一个客户端。客户端是根据 IP 地址来区分的，每个唯一的 IP 地址都有一个线程。

每当客户端向服务器发送一些数据时，主线程都会提取客户端的 IP 地址并决定哪个线程将处理这个特定的客户端。有没有更好的方法来实现这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:14:22.017

可扩展的服务器应用程序有不同的方法，如果客户端数量不多，每个客户端一个线程似乎很好，完成此任务的另一种最有效的方法是使用线程池。当您有任何新任务将此任务分配给空闲工作线程时，这些线程将作为任务库工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:48:53.223

看看这个项目，我觉得入手很有帮助：http: [//www.codeproject.com/Articles/16935/A-Chat-Application-Using-Asynchronous-UDP-sockets](http://www.codeproject.com/Articles/16935/A-Chat-Application-Using-Asynchronous-UDP-sockets)

> 使用 IPAddress.Any，我们指定服务器应接受来自任何接口的客户端请求。要使用任何特定接口，我们可以使用 IPAddress.Parse (“192.168.1.1”) 代替 IPAddress.Any。然后 Bind 函数将 serverSocket 绑定到这个 IP 地址。epSender 识别数据来自的客户端。
> 
> 使用 BeginReceiveFrom，我们开始接收将由客户端发送的数据。请注意，我们将 epSender 作为 BeginReceiveFrom 的最后一个参数传递，AsyncCallback OnReceive 通过 IAsyncResult 的 AsyncState 属性获取此对象，然后处理客户端请求（登录、注销和向用户发送消息）。了解 OnReceive 的实现请看附上的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T12:32:32.950

更好的方法是使用[Proactor 模式](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/async.html)（看看[Boost.Asio library](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)），而不是为每个客户端创建线程。使用这种方法，您的应用程序将具有更好的可扩展性和性能（尤其是在具有本机异步 i/o 的平台上）

此外，通过这种技术，线程将与并发分离，这意味着您不必将多线程及其所有复杂性弄得一团糟。

# selenium-ide - 是否可以在多个 url 上运行一个特定的 seleniumtest？

> ID：15679900
> 
> 赞同：0
> 
> 时间：2013-03-28T10:52:19.677
> 
> 标签：selenium-ide

我已经记录了我需要测试的所有网页的列表（>400）。现在我想告诉 selenium-ide 对所有这些页面进行验证。

```
### example: what i usually do: ###

 1\. open /test/page1
 2\. VerifyTextNotPresent "ERROR"
 3\. open /test/page2
 4\. VerifyTextNotPresent "ERROR"
 5\. open /test/page3
 6\. VerifyTextNotPresent "ERROR"
 7\. ... 
```

正如您所注意到的，对于必须测试的 400 个页面，测试本身（识别“错误”）必须编写 400 次。我最终会得到 400 行说“VerifyTextNotPresent“错误””+ 400 行打开网页 = 800 行在 selenium-ide 中。

```
### example: what i would like to do: ###

 1\. VerifyTextNotPresent "ERROR" FOR all these ... 
 2\. open /test/page1
 3\. open /test/page2
 4\. open /test/page3
 5\. ... 
```

如果这是可能的，我最终会得到 401 行而不是 800 行，如果发生变化，可以说另一个测试（AssertText“ABC”）只需要很少的工作就可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:05:15.477

您可以使用循环和参数化..对于每次迭代，您可以传递新的网页 URL 并检查是否存在错误。

```
open |  pass URL (parametrization)
while loop
then you can check with 
if ERROR text present 
Do this
Else
Do this
endWhile 
```

有了这个，就无需再次编写该命令了..您可以每次使用新 URL 运行此循环 400 次。如果有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T15:01:49.457

以下是在 selenium 中使用 javascript 功能（例如“while”）的一些有用答案。

[=>“在线seleniumtraining.com](http://onlineseleniumtraining.com/sequence-of-evaluation-and-flow-control-while-loop-in-selenium-ide/)

[=> stackoverflow.com](https://stackoverflow.com/questions/14955000/selenium-ide-loop-through-array-variables)

特别感谢卡琳娜！！！

# .htaccess - 使用 .htaccess [R=301,L] 重定向 url

> ID：15679904
> 
> 赞同：1
> 
> 时间：2013-03-28T10:52:36.717
> 
> 标签：.htaccess, mod-rewrite, redirect, sef

我想使用 .htaccess [R=301] 重定向页面 url

原始网址：[http ://www.encros.fr/la-boutique-encros/recharge-toner](http://www.encros.fr/la-boutique-encros/recharge-toner)

重定向网址：[http ://www.encros.fr/recharge-toner](http://www.encros.fr/recharge-toner)

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:29:26.427

您的 .htaccess 文件中需要这样的内容：

```
RewriteEngine  on
RewriteRule    ^/la-boutique-encros/recharge-toner$  /recharge-toner  [R=301,L] 
```

该`[R=301]`标志设置返回码。该`[L]`标志可防止将其他规则应用于此特定重写。

参考资料：
关于重写：[http ://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)

关于重写标志：[http ://httpd.apache.org/docs/2.4/rewrite/flags.html](http://httpd.apache.org/docs/2.4/rewrite/flags.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:58:46.840

试试这个

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^recharge-toner$ /la-boutique-encros/recharge-toner [L] 
```

# node.js - Socket.io 事件不会触发，也不能从客户端发出

> ID：15679905
> 
> 赞同：1
> 
> 时间：2013-03-28T10:52:43.833
> 
> 标签：node.js, socket.io

所以我试图用nodejs和socket.io设置一个新项目

起初我在这个站点的家用电脑上尝试这些代码：http: [//socket.io/#how-to-use](http://socket.io/#how-to-use)

我尝试了第一个示例，它运行良好，所以我继续在我的家用电脑上工作。

但是，当我在我的工作电脑上尝试它时，我的工作无法正常工作。
即使是网络上的第一个示例也不起作用。
客户端没有从服务器接收到发出的“新闻”事件，
并且客户端没有向服务器发出“我的其他事件”。
客户端浏览器没有错误，我已经尝试过我使用的所有浏览器（firefox，ie和chrome都是最新版本）

为什么客户端不向服务器发送事件，客户端无法接收服务器发送的数据？

问题是什么？是我工作的电脑吗？因为我已经在 3 台不同的计算机上尝试过，结果还是一样。它只适用于我的家用电脑。在我的工作计算机（win7 x86）上，我已经禁用了我的 UAC 和防火墙。

我使用 nodejs v0.10.1，socket.io v0.9.13

这是我从 socket.io 的示例中复制的代码：
client.html

```
<script src="./node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js"></script>

<script>
  var socket = io.connect('http://localhost:8999');

  setTimeout(function(){
    socket.emit('my other event', { my: 'emitted by timeout' }); // nothing happened at server
  },3000);

  socket.on('news', function (data) {
    console.log(data); // this won't fire
    socket.emit('my other event', { my: 'data' }); // this won't fire
  });
</script> 
```

服务器.js

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8999);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

节点控制台的输出：

```
 info  - socket.io started
   debug - client authorized
   info  - handshake authorized c3Y6q0EnyWtldKBKnUHp
   debug - setting request GET /socket.io/1/websocket/c3Y6q0EnyWtldKBKnUHp
   debug - set heartbeat interval for client c3Y6q0EnyWtldKBKnUHp
   debug - client authorized for
   debug - websocket writing 1::
   debug - websocket writing 5:::{"name":"news","args":[{"hello":"world"}]} 
```

# vbscript - 从文本中删除所需的内容

> ID：15679906
> 
> 赞同：0
> 
> 时间：2013-03-28T10:52:48.417
> 
> 标签：vbscript

我想获得一个工作代码，以简单地从文本行中删除始终`"("`以`")"`.

示例文本 ：`Hello, how are you (it is a question)`

我想删除这部分：`"(it is a question)"`只保留此消息`"Hello, how are you"`

丢失...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:02:08.170

使用[正则表达式](http://msdn.microsoft.com/en-us/library/ms974570.aspx)的一种方法；

```
input = "Hello, how are you (it is a question)"

dim re: set re = new regexp
with re
    .pattern = "\(.*\)\s?" '//anything between () and if present 1 following whitespace
    .global = true

    input = re.Replace(input, "") 
end with

msgbox input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:42:48.437

如果要删除的部分始终位于字符串的末尾，则字符串操作也可以：

```
msg = "Hello, how are you (it is a question)"

pos = InStr(msg, "(")

If pos > 0 Then WScript.Echo Trim(Left(msg, pos-1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-17T19:40:52.753

如果句子总是以 ( ) 部分结尾，请使用 split 函数：

```
line = "Hello, how are you (it is a question)"

splitter = split(line,"(")        'splitting the line into 2 sections, using ( as the divider
endStr = splitter(0)              'first section is index 0

MsgBox endStr                     'Hello, how are you 
```

如果是在句子的中间，使用 split 函数两次：

```
line = "Hello, how are you (it is a question) and further on"

splitter = split(line,"(")
strFirst = splitter(0)             'Hello, how are you

splitter1 = split(line,")")        
strSecond = splitter1(UBound(Splitter1))    'and further on

MsgBox strFirst & strSecond        'Hello, how are you and further on 
```

如果只有一个“( )”实例，那么您可以使用“1”代替 UBound。多个实例我会拆分句子，然后分解包含“（）”的每个部分并连接最后一个句子。

# jquery - jQuery：单击事件称为 $('textarea').val().trim().length 次

> ID：15679909
> 
> 赞同：6
> 
> 时间：2013-03-28T10:52:57.113
> 
> 标签：jquery, html, events, click, keydown

嗯，这就是发生的事情。

我们以前都见过这种情况：只有在我们将某些内容放入输入字段后，按钮才会变为活动**且可点击。**我正在尝试实现这一点。我想要么我走错了路，我应该以不同的方式放置我的 jQuery 选择器，要么只是代码有问题。

```
$('textarea').bind({'keyup' : function(){
    if ($(this).val().trim().length){
        $('.send-feedback').removeClass('inactive').click(function(){
            console.log('clicked');
        });
    } else {
        $('.send-feedback').addClass('inactive').off('click');
    }
}}) 
```

基本上，我在控制台中多次看到“点击”，但如果我在检查`console.log('key pressed')`之前添加`if`，它会按预期显示一次。

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:56:27.927

您也可以将按钮设置为`disabled`。这将阻止`click`事件触发：

```
if($('textarea').val().trim().length > 0)
    $('.send-feedback').removeAttr('disabled');
else
    $('.send-feedback').attr('disabled','disabled'); 
```

然后分离你的`click`功能：

```
$('textarea').on('input', function(){ ... });
$('.send-feedback').on('click', function() { ... }); 
```

[JSFiddle 示例](http://jsfiddle.net/3CdEV/)。

> 问题是，它实际上不是一个按钮，而是一个`<a>`

在这种情况下，您可以使用类，我想这就是您目前正在做的事情：

HTML：

```
<a href="#" class="send-feedback disabled">Click</a> 
```

JavaScript 文本区域长度检查：

```
if( $(this).val().trim().length > 0 )
    $('.send-feedback').removeClass('disabled');
else
    $('.send-feedback').addClass('disabled'); 
```

JavaScript 点击功能：

```
$('.send-feedback').on('click', function(e) {
    e.preventDefault();
    if($(this).hasClass('disabled'))
        return;

    alert('Clicked!');
}); 
```

[JSFiddle 示例](http://jsfiddle.net/3CdEV/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:56:54.927

您正在重新绑定每个 keyup 事件的 click 事件。

`.inactive`通过添加到选择器来更改代码以在绑定单击之前检查按钮是否处于非活动状态：

```
$('textarea').bind({'keyup' : function(){
    if ($(this).val().trim().length){
        $('.send-feedback.inactive').removeClass('inactive').click(function(){
            console.log('clicked');
        });
    } else {
        $('.send-feedback').addClass('inactive').off('click');
    }
}}) 
```

[JSFiddle 示例](http://jsfiddle.net/infernalbadger/uEyRM/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:57:07.850

每次输入字母（keyup）时，都会将事件 click 添加到`.send-feedback`。

如果你有很多`.send-feedback`，你就会有

> （文本区域中的字符数）*（.send-feedback 的数量）

出现“点击”文本的次数。

`.send-feedback`如果类“非活动”，您应该只添加点击事件。

这里 ：

```
$('textarea').bind({'keyup' : function(){
    if ($(this).val().trim().length) {
        if ($('.send-feedback').hasClass('inactive')){
            $('.send-feedback').removeClass('inactive').click(function(){
                console.log('clicked');
            });
        }
    } else {
        $('.send-feedback').addClass('inactive').off('click');
    }
}}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:06:30.733

我为你创建了[这个小提琴](http://jsfiddle.net/DMrd4/)，我希望它会有所帮助：

它是这样的：

```
var el = $(this);
var btn = $("#btnDoStuff");

if(el.val().length > 0)
    btn.prop("disabled", false);
else
    btn.prop("disabled", true); 
```

我希望我没有误解这个问题。

# visual-studio-2010 - Visual Studio 扩展菜单按钮事件未触发

> ID：15679911
> 
> 赞同：0
> 
> 时间：2013-03-28T10:52:59.990
> 
> 标签：visual-studio-2010, visual-studio, event-handling, vsix

我有一个最近从工作室 2008 转换到 2010 的项目。它大量使用了 DSL。我使用了 SDK 附带的 DslProjectsMigrationTool。虽然大部分功能都在工作，但我在菜单方面遇到了一些问题。我有一个自定义工具栏，其中包含我的代码的三个按钮。但是，事件处理程序似乎没有工作。我有一个回来并检查了 2008 版本，这工作没有问题。

不幸的是，这些代码都不是我自己的，最初编写它的人已经继续前进并且无法提供帮助。

在 Commands.vsct 我有

```
<CommandTable xmlns="http://schemas.microsoft.com/VisualStudio/2005-10-18/CommandTable" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <Commands package="guidPkg">
        <Menus>
            <Menu guid="guidCmdSet" id="blueprintToolbar" priority="0x0000" type="Toolbar">
                <Parent guid="guidCmdSet" id="blueprintToolbar"/>
                <CommandFlag>DefaultDocked</CommandFlag>
                <CommandFlag>AlwaysCreate</CommandFlag>
                <Strings>
                    <ButtonText>Blueprint Toolbar</ButtonText>
                </Strings>
            </Menu>         
        </Menus>

        <Groups>
            <Group guid="guidCmdSet" id="grpidTranslate" priority="0x0000">
                <Parent guid="guidCmdSet" id="blueprintToolbar" />
            </Group>
        </Groups>

        <Buttons>
            <Button guid="guidCmdSet" id="cmdidReTranslateAllCmd" priority="0x0100" type="Button">
                <Parent guid="guidCmdSet" id="grpidTranslate" />
                <Icon guid="guidCmdSet" id="bmpPic1"/>
                <CommandFlag>TextOnly</CommandFlag>
                <Strings>
                    <ButtonText>&lt;Retranslate All&gt;</ButtonText>
                </Strings>
            </Button>
            <Button guid="guidCmdSet" id="cmdidTranslateAllCmd" priority="0x0101" type="Button">
                <Parent guid="guidCmdSet" id="grpidTranslate" />
                <Icon guid="guidCmdSet" id="bmpPic1"/>
                <CommandFlag>TextOnly</CommandFlag>
                <Strings>
                    <ButtonText>&lt;Translate All&gt;</ButtonText>
                </Strings>
            </Button>
            <Button guid="guidCmdSet" id="cmdidTranslateCurCmd" priority="0x0102" type="Button">
                <Parent guid="guidCmdSet" id="grpidTranslate" />
                <Icon guid="guidCmdSet" id="bmpPic1"/>
                <CommandFlag>TextOnly</CommandFlag>
                <Strings>
                    <ButtonText>&lt;Translate Current&gt;</ButtonText>
                </Strings>
            </Button>
        </Buttons>

    </Commands>

    <Symbols>
        <GuidSymbol name="guidCmdSet" value="Extern">

            <!--Group IDs-->
            <IDSymbol name="grpidTranslate" value="0x1050"/>

            <!--Command IDs-->
            <IDSymbol name="cmdidTranslateAllCmd" value="0x9100"/>
            <IDSymbol name="cmdidTranslateCurCmd" value="0x9101"/>
            <IDSymbol name="cmdidReTranslateAllCmd" value="0x9102"/>

            <IDSymbol name="blueprintToolbar" value="0x1000"/>
            <IDSymbol name="bmpPic1" value="1"/>
        </GuidSymbol>

    </Symbols>
</CommandTable> 
```

然后在 CommandSetOverride.cs 我有

```
/// <summary>
/// Constants relating to commands
/// </summary>
partial class Constants
{
  public const string CLSID_StandardCommandSet97 = "5efc7975-14bc-11cf-9b2b-00aa00573819";

  #region Command Codes     

  const int cmdidTranslateAllCmd = 0x9100;
  const int cmdidTranslateCurrentCmd = 0x9101;
  const int cmdidReTranslateAllCmd = 0x9102;

  #endregion
  #region CommandIDs

  public static readonly CommandID TranslateAllCommandID = 
     new CommandID(new Guid(Constants.BlueprintCommandSetId), cmdidTranslateAllCmd);
  public static readonly CommandID TranslateCurrentCommandID =
     new CommandID(new Guid(Constants.BlueprintCommandSetId), cmdidTranslateCurrentCmd);
  public static readonly CommandID ReTranslateAllCommandID =
     new CommandID(new Guid(Constants.BlueprintCommandSetId), cmdidReTranslateAllCmd);

  #endregion 
}

/// <summary>
/// Additions to the blueprint command set for context menu items and extra commands.
/// </summary>
partial class BlueprintCommandSet
{
  /// <summary>
  /// Retrieves the available menu commands
  /// </summary>
  /// <returns>List of menu commands</returns>
  protected override IList<MenuCommand> GetMenuCommands()
  {
     IList<MenuCommand> commands = base.GetMenuCommands();

     OleMenuCommand oleMenuCommand;

     // Translate
     if (null != MenuService)
     {
        MenuCommand menuCommand = new MenuCommand(new EventHandler(OnTranslateAll), Constants.TranslateAllCommandID);
        MenuService.AddCommand(menuCommand);

        menuCommand = new MenuCommand(new EventHandler(OnTranslateCurrent), Constants.TranslateCurrentCommandID);
        MenuService.AddCommand(menuCommand);

        menuCommand = new MenuCommand(new EventHandler(OnReTranslateAll), Constants.ReTranslateAllCommandID);
        MenuService.AddCommand(menuCommand);
     }

     return commands;
  }

  #region Translation 
  /// <summary>
  /// Handles the "ReTranslate All" toolbar button command.
  /// </summary>
  /// <param name="sender"></param>
  /// <param name="e"></param>
  private void OnReTranslateAll(object sender, EventArgs e)
  {
     ReTranslateAll();
  }

  /// <summary>
  /// Handles the "Translate All" toolbar button command.
  /// </summary>
  /// <param name="sender"></param>
  /// <param name="e"></param>
  private void OnTranslateAll(object sender, EventArgs e)
  {
     TranslateAll(false);
  }

  /// <summary>
  /// Handles the "Translate Current" toolbar button command.
  /// </summary>
  /// <param name="sender"></param>
  /// <param name="e"></param>
  private void OnTranslateCurrent(object sender, EventArgs e)
  {
     TranslateCurrent();         
  }

  #endregion
} 
```

当我运行已安装版本的代码或在配置单元中运行时，按钮出现在工具栏中没有问题，但是单击它们永远不会调用 OntranslateAll 或类似的。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:37:43.620

我发现在两个地方明确使用了 CommandSetId Guid，然后为 2010 版本更新了一个版本，而第二个没有。使用不同的指导，事件被发送到错误的地方

# c# - 将 ContentControl 绑定到 UserControl，并重用相同的实例

> ID：15679918
> 
> 赞同：2
> 
> 时间：2013-03-28T10:53:20.013
> 
> 标签：c#, wpf, xaml, binding, contentcontrol

我正在尝试将 ContentControl 的内容绑定到我在 ViewModel 中实例化的 UserControl。我不能使用绑定到 ViewModel 的方法，然后让 UserControl 成为 ViewModel 的 DataTemplate，因为我需要 ContentControl 的内容能够经常更改，使用*相同*的 UserControls/Views 实例，而不是实例化每次我重新绑定的意见。

但是，当将 UserControl-property 设置为 UserControl-instance 时，然后当视图被渲染/数据绑定时，我得到：*在附加到新的父 Visual 之前，必须断开指定子与当前父 Visual 的连接。*尽管我之前没有将此 UserControl 添加到任何地方，但我只是较早地创建了此实例并将其保存在内存中。

有没有更好的方法来实现我正在做的事情？

在视图模型中

```
public class MyViewModel : INotifyPropertyChanged
{
    //...

    private void LoadApps()
    {
        var instances = new List<UserControl>
                          {
                              new Instance1View(),
                              new Instance2View(),
                              new Instance3View(),
                          };
        SwitchInstances(instances);
    }

    private void SwitchInstances(List<UserControl> instances)
    {
        CenterApp = instances[0];
    }

    //...

    private UserControl _centerApp;
    public UserControl CenterApp
    {
        get { return _centerApp; }

        set
        {
            if (_centerApp == value)
            {
                return;
            }

            _centerApp = value;
            OnPropertyChanged("CenterApp");
        }
    }

    //...
} 
```

在 View.xaml

```
<ContentControl Content="{Binding CenterApp}"></ContentControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:31:20.363

评论太长了。

建立在@Kent 在您的评论中所说的基础上，MVVM 的全部意义在于将视图模型与视图相关的东西（控件）断开，这会阻止 GUI 应用程序的测试能力。因此，您拥有一个 UserControl / Button / 任何与图形视图相关的项目都否定了 MVVM 的整个原则。

如果使用 MVVM，您应该遵守其标准，然后重新解决您的问题。

1.  使用 MVVM，您通常有 1 个视图 <-> 1 个视图模型
2.  View 知道它的 View Model（通常通过 DataContext）。不应该编码成反向。
3.  您尝试将控制视图的逻辑放在视图模型中以允许测试逻辑（命令和 INPC 属性）

......还有更多。它在视图模型的范围内非常具体，没有视图相关的东西，例如在视图模型中甚至没有属性，如`Visibility`. 您通常按住 a`bool`然后在视图中使用转换器将其切换到`Visibility`对象。

更多地阅读 MVVM 肯定会对你有所帮助，

现在来解决您当前的问题：

遵循 MVVM 结构，

您将拥有 ViewModel，例如

*   主要的： `MyViewModel`
*   从基础派生所有实例 ViewModel 以允许将它们保存在列表中。
*   单独列出或持有`Instance1ViewModel`, `Instance2ViewModel`, `Instance3ViewModel`in `MyViewModel`（要么自己创建它，要么如果你使用 IOC 容器让它注入它）
*   `MyViewModel`就像您发布的示例一样公开一个属性：

例子：

```
// ViewModelBase is the base class for all instance View Models
private ViewModelBase _currentFrame;
public ViewModelBase CurrentFrame {
  get {
    return _currentFrame;
  }

  private set {
    if (value == _currentFrame)
      return;
    _currentFrame = value;
    OnPropertyChanged(() => CurrentFrame);
  }
} 
```

*   现在在您的`MyView.xaml`视图文件中，您应该（不必是顶级）将顶级 DataContext 设置为您的`MyViewModel`
*   然后可以将您的视图的 xaml 声明为：

例子：

```
...
<Window.Resources>
  <DataTemplate DataType="{x:Type local:Instance1ViewModel}">
    <local:Instance1View />
  </DataTemplate>
  <DataTemplate DataType="{x:Type local:Instance2ViewModel}">
    <local:Instance2View />
  </DataTemplate>
  <DataTemplate DataType="{x:Type local:Instance3ViewModel}">
    <local:Instance3View />
  </DataTemplate>
</Window.Resources>
<Grid>
  <ContentControl Content="{Binding Path=CurrentFrame}" />
</Grid>
... 
```

*   而已！。现在您只需切换`CurrentFrame`视图模型中的属性并使其指向三个实例视图模型中的任何一个，视图将相应更新。

这为您提供了一个符合 MVVM 的应用程序，对于您不必基于 DataTemplate 动态重新创建视图的其他问题，您可以遵循[此处](https://stackoverflow.com/questions/8808076/how-to-preserve-the-full-state-of-the-view-when-navigating-between-views-in-an-m)建议的方法并将其扩展以供您自己使用。

# javascript - WinJs-数据绑定与自定义arrayList

> ID：15679922
> 
> 赞同：0
> 
> 时间：2013-03-28T10:53:45.493
> 
> 标签：javascript, microsoft-metro, windows-store-apps, winjs

在我看来这很复杂，我尝试了很多事情但没有结果。我想在我的 Metro 应用程序 (Winjs/HTML) 上创建一个水平列表视图，因此创建模板和 listView html 元素。我将从中获取 image_url 的 DataSource 的问题是高级的。这是从我的 Json Web Service 返回的这个 DataSource 的形式（我不知道它是不是一个 HashTable、ListArray...？？）：

```
"path_categories":
{
"star":"the image url ",
"Fruits ": " the image url ",
"Animaux":"the image url ",
"Country":"the image url ",
"Coulor":"the image url ",
"Town":"the image url ",
"capital":"the image url "
} 
```

我在这里设置了特定属性以与我的输入代码绑定

任何帮助将不胜感激，认为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:16:20.307

您的视图模型需要使用传入的数据并公开类似这样的项目。

```
var ViewModel = WinJS.Class.define(
    function ViewModel(data)
    {
        var categories = data.path_categories;
        var keys = object.keys(categories);
        var items = [];
        for (var i = 0; i < keys.length; i++)
        {
            var imageUrl = categories[key];
            var item = { imageUrl : imageUrl };
            items.push(item);
        }

        this.items = new WinJS.Binding.List(items);
    });

function ondataload(data)
{
    var viewModel = new ViewModel(data);
    listView.winControl.itemDataSource = viewModel.items.dataSource;
} 
```

HTH。

# jquery - 具有 xmlstring 数据类型、主详细信息、动态过滤器的 JQGrid

> ID：15679925
> 
> 赞同：0
> 
> 时间：2013-03-28T10:53:57.933
> 
> 标签：jquery, jqgrid, contains, xmlreader, master-detail

***更新：***

已解决，使用这样的 xmlreader：

```
{
id : "rowid",
repeatitems : false,
root : "response>claims>claim>units",
row : "unit:has('claimId:contains('6002950')'):has('unitId:contains('6003606')')"
} 
```

事实证明，解决方案是将动态过滤器移动到 xmlreader.row 级别并意识到“:has”过滤器链的“AND”条件意味着没有分隔符，而不是逗号，这意味着“OR” .

所以，对于所有需要做类似事情的人：

**是**的，您可以将“xml”、ajax-server-bound 网格切换到“xmlstring”、本地绑定网格，方法是保持数据的相同 xml 模式、网格的相同列模型，并且只需更改 xmlreader在本地应用过滤，相当于正常发送到服务器的过滤器。

需要这样的典型场景是将相同的 UI 指向两个不同的、数据等效的 Web 服务，但具有不同的速度行为。快速 Web 服务可以由“xml”ajax 绑定网格调用，服务器过滤器限制返回的 xml。可以在网格之外调用慢速 Web 服务，该网格稍后会被客户端指向并缓存“xmlstring”。在后面的场景中，数据过滤器成为应用于 xmlreader.row 级别的客户端 xmlreader 动态过滤器。

***最初的问题：***

我的情况是这样的：

*   两个jqgrid，一个master，一个detail；
*   最初来自快速 Web 服务 ajax 调用，数据类型 xml，使用像这样的 xmlreader 用于详细信息网格

`id : "rowid",
repeatitems : false,
root : "response>claims>claim>units",
row : "unit"`

*   将相同的网格切换到“断开连接”模式，数据类型为 xmlstring（基本上，客户端存储的 xmlstring 变量是从 Web 服务接收到的，需要很长时间才能执行多个 ajax 调用）；
*   单击主网格行时，我会动态构建一个过滤器来过滤细节网格；
*   现在，在“断开连接的 xmlstring”模式下，从客户端存储的 xmlstring javascript 变量的副本中馈送两个网格；

根据我之前使用子网格的经验，我知道您可以通过将选择器应用于 xmlreader 根部分来过滤 xmlstring 网格。因此，我首先尝试了以下动态 xmlreader（底部的完整 xmlstring 数据示例）：

```
id : "rowid",
repeatitems : false,
root : "response>claims>claim>units:has('claimId:contains('6002950'),unitId:contains('6003434')')",
row : "unit" 
```

这不起作用，两行都返回并显示在详细信息网格中。在这一点上，我回顾了我的子网格示例，发现我在过滤器上更深入了一层。所以我尝试了更深的根过滤器：

```
id : "rowid",
repeatitems : false,
root : "response>claims>claim>units>unit:has('claimId:contains('6002950'),unitId:contains('6003434')')",
row : "unit" 
```

这也不起作用。首先，即使我更深入， :has 过滤器似乎也不起作用。这个链式 :contains 过滤器一定有问题。此外，现在 xmlreader 行部分不再有意义成为“单元”。

在这一点上，我在 xmlreader 选择器上花费了太多时间，我正在考虑尝试删除与过滤器不匹配的 xml 节点并让 xmlreader 不过滤。通过将 :not() 应用于它，在我在根中尝试的选择器上尝试了一个否定匹配过滤器。

`$(StringtoXML(dataStr)).find("response>claims>claim>units>unit:not(:has('claimId:contains('6002950'),unitId:contains('6003434')'))").remove()`

那也不起作用，或者我做得不对（我知道，使用 jquery 进行 xml 操作应该很容易）。

如果它对任何人有帮助，在我的所有测试中，我看到网格基于解析与此调用等效的 xml 数据做出反应（其中 dataStr 是我本地存储的 xmlstring 变量）：

```
$(StringtoXML(dataStr)).find(xmlReader.root).children(xmlReader.row) 
```

示例 xmlstring 数据：

```
<response>
    <claims>
        <claim>
            <sourceSystemCd>blah</sourceSystemCd>
            <insertId>dispatch</insertId>
            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
            <updateId>dispatch</updateId>
            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
            <appointmentDateTime/>
            <appointmentDesc/>
            <appointmentUser/>
            <assignmentDateTime/>
            <assignmentDesc/>
            <assignmentUser/>
            <actions/>
            <adjusters/>
            <claimId>6002950</claimId>
            <claimNum>141200002512</claimNum>
            <injuryInd/>
            <claimTypeCd>AUTO</claimTypeCd>
            <lossTmUnkInd/>
            <keyedDt></keyedDt>
            <towClaimInd/>
            <rptOnlyInd/>
            <priorClaimCnt/>
            <othPropDmgInd/>
            <polFireAtSceneInd/>
            <witnessInd/>
            <lossTypeLiabilityCd>02</lossTypeLiabilityCd>
            <insInjAsPedInd/>
            <insInjAsPasInd/>
            <policyFireDeptName/>
            <policyFireCaseNumber/>
            <anyConcernsTxt/>
            <claimTypeDesc/>
            <dwnTmRptDesc/>
            <lossTypeLiabilityDesc/>
            <lossLocAddrLn1Txt>shanendoah</lossLocAddrLn1Txt>
            <lossLocAddrLn2Txt/>
            <lossLocCityName/>
            <lossLocCountryCode>usa</lossLocCountryCode>
            <lossLocInsRsdncInd/>
            <lossLocZipCd/>
            <lossLocStateCd/>
            <lossLocSubdName/>
            <companyCd>03</companyCd>
            <lossTmstmp>2013-03-22 00:00:00.000</lossTmstmp>
            <lossTypeDesc/>
            <lossLocationDescription/>
            <claimparties>
                <claimparty>
                    <insertId>dispatch</insertId>
                    <updateId>dispatch</updateId>
                    <unitId>0</unitId>
                    <parties>
                        <party>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <recordId>6006003</recordId>
                            <objectId/>
                            <partyTypeCd>PRINMINS</partyTypeCd>
                            <partyId>6003211</partyId>
                            <primary>false</primary>
                            <partyFirstName>blah</partyFirstName>
                            <partyMiddleName>blah</partyMiddleName>
                            <partyLastName>blah</partyLastName>
                            <partyFullName>blah</partyFullName>
                            <addresses>
                                <address>
                                    <addressTypeCd>phy_addr</addressTypeCd>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <partyAddrCityName>BATH</partyAddrCityName>
                                    <partyAddrLn1Txt>4 Maple Lane</partyAddrLn1Txt>
                                    <partyAddrLn2Txt/>
                                    <partyAddrStCd>NH</partyAddrStCd>
                                    <partyAddrSubdName/>
                                    <partyAddrZipCd>03740</partyAddrZipCd>
                                    <partyId/>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                </address>
                            </addresses>
                            <contacts>
                                <contact>
                                    <contactId>6002660</contactId>
                                    <contactTxt>9999472127</contactTxt>
                                    <contactTypeCd>hm_phn</contactTypeCd>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <isTxtMsgEnabledInd/>
                                    <partyId/>
                                    <preferContactTypeInd/>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                </contact>
                            </contacts>
                            <partyDetail>
                                <insertId>dispatch</insertId>
                                <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                <updateId>dispatch</updateId>
                                <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                <injuryInd/>
                            </partyDetail>
                            <partyInjury>
                                <attorneyId/>
                                <injuryDesc/>
                                <injurySeverityCd>min</injurySeverityCd>
                                <injuryTypeCd>01</injuryTypeCd>
                                <insertId>dispatch</insertId>
                                <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                <medCareTxt/>
                                <partyId/>
                                <updateId>dispatch</updateId>
                                <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                <medcaretypes>
                                    <medcaretype>
                                        <insertId>dispatch</insertId>
                                        <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                        <medCareTypeCd>OTHER</medCareTypeCd>
                                        <partyId/>
                                        <updateId>dispatch</updateId>
                                        <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    </medcaretype>
                                </medcaretypes>
                            </partyInjury>
                        </party>
                    </parties>
                </claimparty>
            </claimparties>
            <policy>
                <cededInd/>
                <claimId>6002950</claimId>
                <cmpyLobId>2</cmpyLobId>
                <insertId>dispatch</insertId>
                <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                <jurId>41</jurId>
                <lobCd>PA</lobCd>
                <maipInd/>
                <nsfInd/>
                <polEffDt>2012-06-14 00:00:00.000</polEffDt>
                <polExpDt>2013-06-14 00:00:00.000</polExpDt>
                <polOrigDt></polOrigDt>
                <polSubdName/>
                <policyNumber>asdasd</policyNumber>
                <policySymbol/>
                <updateId>dispatch</updateId>
                <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                <unverifiedInd>N</unverifiedInd>
                <polAddrLn1Txt>4 Mapls dfs</polAddrLn1Txt>
                <polAddrLn2Txt/>
                <polCityName>BATH</polCityName>
                <polStCd>NH</polStCd>
                <polZipCd>03740</polZipCd>
            </policy>
            <units>
                <unit>
                    <claimId>6002950</claimId>
                    <insertId>dispatch</insertId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateId>dispatch</updateId>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <roleCategory/>
                    <sourceSystemCd>asdasd</sourceSystemCd>
                    <unitCategory>veh</unitCategory>
                    <unitDataType>veh</unitDataType>
                    <unitId>6003434</unitId>
                    <unitSubType>sch</unitSubType>
                    <unitType>veh</unitType>
                    <unitVehicle>
                        <claimId>6002950</claimId>
                        <hvyEqpmntInd/>
                        <insertId>dispatch</insertId>
                        <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                        <motorcycleInd/>
                        <othInsCoName/>
                        <othPolNbr/>
                        <otherDamageDesc/>
                        <recVehInd/>
                        <totalLossPoints/>
                        <unitId>6003434</unitId>
                        <updateId>dispatch</updateId>
                        <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                        <vehEstRepairInd/>
                        <vehUnoccupiedInd/>
                        <vehMakeTxt>VOLKSWAGEN</vehMakeTxt>
                        <vehModelTxt>PASSAT 2.0T WAGON VALUE</vehModelTxt>
                        <vehYearTxt>2007</vehYearTxt>
                        <vinTxt>asdasd</vinTxt>
                        <licPlateTxt/>
                        <version>0</version>
                        <recordId>6003434</recordId>
                        <estimateAmt/>
                        <estimateInd/>
                        <totalLossInd>N</totalLossInd>
                        <vehDrivableInd>N</vehDrivableInd>
                        <licPlateStateCd/>
                        <vehColorTxt/>
                        <vehLocDesc>insd pob</vehLocDesc>
                        <vehLocAddrLn1Txt>695 atlantic ave</vehLocAddrLn1Txt>
                        <vehLocCityName>boston</vehLocCityName>
                        <vehLocSubdName/>
                        <vehLocStateCd/>
                        <vehLocZipCd>02101</vehLocZipCd>
                        <vehLocContactTxt/>
                        <vehLocPhone/>
                        <vehLocAddrLn2Txt/>
                        <vehLocFormattedAddr/>
                        <vehLocLat/>
                        <vehLocLong/>
                        <vehLocPrecision/>
                    </unitVehicle>
                    <damages>
                        <damage>
                            <claimId>6002950</claimId>
                            <damageCd>ALLOTHER</damageCd>
                            <damageDesc/>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <unitId>6003434</unitId>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                        </damage>
                    </damages>
                    <displayUnitTypeCd>veh</displayUnitTypeCd>
                    <policyUnitTypeCd>veh</policyUnitTypeCd>
                    <coverages>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>COLL</coverageCd>
                            <covCd>collsn</covCd>
                            <coverageId>6013152</coverageId>
                            <coverageId>6013152</coverageId>
                            <deductibleTypeCd>ded</deductibleTypeCd>
                            <deductibleAmt>500.00</deductibleAmt>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>COLL</coverageCd>
                                    <covCd>collsn</covCd>
                                    <covDtlTypCd>ded</covDtlTypCd>
                                    <covDtlAmt>500.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>COMP</coverageCd>
                            <covCd>comp</covCd>
                            <coverageId>6013153</coverageId>
                            <coverageId>6013153</coverageId>
                            <deductibleTypeCd>ded</deductibleTypeCd>
                            <deductibleAmt>500.00</deductibleAmt>
                            <deductibleTypeCd>full_glass</deductibleTypeCd>
                            <deductibleAmt>0.00</deductibleAmt>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>COMP</coverageCd>
                                    <covCd>comp</covCd>
                                    <covDtlTypCd>ded</covDtlTypCd>
                                    <covDtlAmt>500.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>COMP</coverageCd>
                                    <covCd>comp</covCd>
                                    <covDtlTypCd>full_glass</covDtlTypCd>
                                    <covDtlAmt>0.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>NA</coverageCd>
                            <covCd>csl</covCd>
                            <coverageId>6013149</coverageId>
                            <limitTypeCd>each_occr</limitTypeCd>
                            <limitAmt>500000.00</limitAmt>
                            <coverageId>6013149</coverageId>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>NA</coverageCd>
                                    <covCd>csl</covCd>
                                    <covDtlTypCd>each_occr</covDtlTypCd>
                                    <covDtlAmt>500000.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>PIP</coverageCd>
                            <covCd>mp</covCd>
                            <coverageId>6013151</coverageId>
                            <limitTypeCd>each_pers</limitTypeCd>
                            <limitAmt>5000.00</limitAmt>
                            <coverageId>6013151</coverageId>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>PIP</coverageCd>
                                    <covCd>mp</covCd>
                                    <covDtlTypCd>each_pers</covDtlTypCd>
                                    <covDtlAmt>5000.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>TOWING</coverageCd>
                            <covCd>tow_lab</covCd>
                            <coverageId>6013154</coverageId>
                            <limitTypeCd>each_occr</limitTypeCd>
                            <limitAmt>75.00</limitAmt>
                            <coverageId>6013154</coverageId>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>TOWING</coverageCd>
                                    <covCd>tow_lab</covCd>
                                    <covDtlTypCd>each_occr</covDtlTypCd>
                                    <covDtlAmt>75.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                        <coverage>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                            <claimId>6002950</claimId>
                            <unitId>6003434</unitId>
                            <coverageCd>UMPD</coverageCd>
                            <covCd>un_und_motor</covCd>
                            <coverageId>6013150</coverageId>
                            <limitTypeCd>each_occr</limitTypeCd>
                            <limitAmt>500000.00</limitAmt>
                            <coverageId>6013150</coverageId>
                            <coverageDetails>
                                <coverageDetail>
                                    <insertId>dispatch</insertId>
                                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                                    <updateId>dispatch</updateId>
                                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                                    <coverageCd>UMPD</coverageCd>
                                    <covCd>un_und_motor</covCd>
                                    <covDtlTypCd>each_occr</covDtlTypCd>
                                    <covDtlAmt>500000.00</covDtlAmt>
                                    <claimId>6002950</claimId>
                                    <unitId>6003434</unitId>
                                </coverageDetail>
                            </coverageDetails>
                        </coverage>
                    </coverages>
                    <rowid>6002950_6003434</rowid>
                </unit>
                <unit>
                    <claimId>6002950</claimId>
                    <insertId>dispatch</insertId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateId>dispatch</updateId>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <roleCategory/>
                    <sourceSystemCd>asasd</sourceSystemCd>
                    <unitCategory>prop</unitCategory>
                    <unitDataType>veh</unitDataType>
                    <unitId>6003606</unitId>
                    <unitSubType>thrd</unitSubType>
                    <unitType>thrd_veh</unitType>
                    <unitVehicle>
                        <claimId>6002950</claimId>
                        <hvyEqpmntInd/>
                        <insertId>dispatch</insertId>
                        <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                        <motorcycleInd/>
                        <othInsCoName/>
                        <othPolNbr/>
                        <otherDamageDesc/>
                        <recVehInd/>
                        <totalLossPoints/>
                        <unitId>6003606</unitId>
                        <updateId>dispatch</updateId>
                        <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                        <vehEstRepairInd/>
                        <vehUnoccupiedInd/>
                        <vehMakeTxt>ford</vehMakeTxt>
                        <vehModelTxt>focus</vehModelTxt>
                        <vehYearTxt>2000</vehYearTxt>
                        <vinTxt>434wrewrweu9wepu</vinTxt>
                        <licPlateTxt/>
                        <version>0</version>
                        <recordId>6003606</recordId>
                        <estimateAmt/>
                        <estimateInd/>
                        <totalLossInd>N</totalLossInd>
                        <vehDrivableInd>N</vehDrivableInd>
                        <licPlateStateCd/>
                        <vehColorTxt/>
                        <vehLocDesc/>
                        <vehLocAddrLn1Txt/>
                        <vehLocCityName/>
                        <vehLocSubdName/>
                        <vehLocStateCd/>
                        <vehLocZipCd/>
                        <vehLocContactTxt/>
                        <vehLocPhone/>
                        <vehLocAddrLn2Txt/>
                        <vehLocFormattedAddr/>
                        <vehLocLat/>
                        <vehLocLong/>
                        <vehLocPrecision/>
                    </unitVehicle>
                    <damages>
                        <damage>
                            <claimId>6002950</claimId>
                            <damageCd>ALLOTHER</damageCd>
                            <damageDesc/>
                            <insertId>dispatch</insertId>
                            <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                            <unitId>6003606</unitId>
                            <updateId>dispatch</updateId>
                            <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                        </damage>
                    </damages>
                    <displayUnitTypeCd>thrd_veh</displayUnitTypeCd>
                    <policyUnitTypeCd>veh</policyUnitTypeCd>
                    <rowid>6002950_6003606</rowid>
                </unit>
            </units>
            <unitassignments>
                <unitassignment>
                    <unitId>6003434</unitId>
                    <reserveAmt>1800.00</reserveAmt>
                    <reserveCovCd>collsn</reserveCovCd>
                    <reserveLssTypCd>collsn</reserveLssTypCd>
                    <coverageCd>COLL</coverageCd>
                    <insertId>dispatch</insertId>
                    <updateId>dispatch</updateId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <functionalRoleCode>ADJ</functionalRoleCode>
                    <adjGroupCd>ADJ</adjGroupCd>
                    <ruleGroupCd>ADJ</ruleGroupCd>
                    <claimId/>
                    <dispatchInd>Y</dispatchInd>
                    <sourceSystemCd>STREAM</sourceSystemCd>
                    <unitAsgnmntId/>
                    <adjStrmUserId>320</adjStrmUserId>
                    <unitassignmentadjusters/>
                    <primaryInd>Y</primaryInd>
                    <firstName>asdasd</firstName>
                    <lastName>asdasd</lastName>
                    <userPhoneNumber>asdasd</userPhoneNumber>
                    <userEmail>asdas@asda.com</userEmail>
                    <companyOrgUnitId>3000165</companyOrgUnitId>
                    <userTitle>Claims Representative</userTitle>
                    <dedIstrCd/>
                    <payStatusCd/>
                </unitassignment>
                <unitassignment>
                    <unitId>6003434</unitId>
                    <reserveAmt>1200.00</reserveAmt>
                    <reserveCovCd>comp</reserveCovCd>
                    <reserveLssTypCd>vand</reserveLssTypCd>
                    <coverageCd>COMP</coverageCd>
                    <insertId>dispatch</insertId>
                    <updateId>dispatch</updateId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <functionalRoleCode>ADJ</functionalRoleCode>
                    <adjGroupCd>ADJ</adjGroupCd>
                    <ruleGroupCd>ADJ</ruleGroupCd>
                    <claimId/>
                    <dispatchInd>Y</dispatchInd>
                    <sourceSystemCd>asasd</sourceSystemCd>
                    <unitAsgnmntId/>
                    <adjStrmUserId>320</adjStrmUserId>
                    <unitassignmentadjusters/>
                    <primaryInd>Y</primaryInd>
                    <firstName>asd</firstName>
                    <lastName>asdasd</lastName>
                    <userPhoneNumber>asdasdas</userPhoneNumber>
                    <userEmail>asdasd@asdasd.com</userEmail>
                    <companyOrgUnitId>3000165</companyOrgUnitId>
                    <userTitle>Claims Representative</userTitle>
                    <dedIstrCd/>
                    <payStatusCd/>
                </unitassignment>
                <unitassignment>
                    <unitId>6003434</unitId>
                    <reserveAmt>1200.00</reserveAmt>
                    <reserveCovCd>comp</reserveCovCd>
                    <reserveLssTypCd>allothr</reserveLssTypCd>
                    <coverageCd>COMP</coverageCd>
                    <insertId>dispatch</insertId>
                    <updateId>dispatch</updateId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <functionalRoleCode>ADJ</functionalRoleCode>
                    <adjGroupCd>ADJ</adjGroupCd>
                    <ruleGroupCd>ADJ</ruleGroupCd>
                    <claimId/>
                    <dispatchInd>Y</dispatchInd>
                    <sourceSystemCd>STREAM</sourceSystemCd>
                    <unitAsgnmntId/>
                    <adjStrmUserId>320</adjStrmUserId>
                    <unitassignmentadjusters/>
                    <primaryInd>Y</primaryInd>
                    <firstName>asdasdasd</firstName>
                    <lastName>asdasd</lastName>
                    <userPhoneNumber>asdasd</userPhoneNumber>
                    <userEmail>asdasd@asdasd.com</userEmail>
                    <companyOrgUnitId>3000165</companyOrgUnitId>
                    <userTitle>Claims Representative</userTitle>
                    <dedIstrCd/>
                    <payStatusCd/>
                </unitassignment>
                <unitassignment>
                    <unitId>6003606</unitId>
                    <reserveAmt>4500.00</reserveAmt>
                    <reserveCovCd>csl</reserveCovCd>
                    <reserveLssTypCd>prop_dam</reserveLssTypCd>
                    <coverageCd>NA</coverageCd>
                    <insertId>dispatch</insertId>
                    <updateId>dispatch</updateId>
                    <insertTmstmp>2013-03-27 22:33:13.000</insertTmstmp>
                    <updateTmstmp>2013-03-27 22:33:13.000</updateTmstmp>
                    <functionalRoleCode>ADJ</functionalRoleCode>
                    <adjGroupCd>ADJ</adjGroupCd>
                    <ruleGroupCd>ADJ</ruleGroupCd>
                    <claimId/>
                    <dispatchInd>Y</dispatchInd>
                    <sourceSystemCd>STREAM</sourceSystemCd>
                    <unitAsgnmntId/>
                    <adjStrmUserId>320</adjStrmUserId>
                    <unitassignmentadjusters/>
                    <primaryInd>Y</primaryInd>
                    <firstName>asdas</firstName>
                    <lastName>asdasdasd</lastName>
                    <userPhoneNumber>asddas</userPhoneNumber>
                    <userEmail>adssa@asdasd.com</userEmail>
                    <companyOrgUnitId>3000165</companyOrgUnitId>
                    <userTitle>Claims Representative</userTitle>
                    <dedIstrCd/>
                    <payStatusCd/>
                </unitassignment>
            </unitassignments>
            <notes class="list"/>
        </claim>
    </claims>
</response> 
```

# jquery - 如何在运行时应用 css 属性？

> ID：15679927
> 
> 赞同：0
> 
> 时间：2013-03-28T10:54:05.937
> 
> 标签：jquery, css, ajax

我有html代码

```
 <div id="div1"></div> 
```

我正在动态加载内容并根据内容在“成功”功能中设置其宽度

继承人的jQuery代码

data是php返回的数组，data.length=30；

```
 success: function (data) {
        var data1=data;
        var w2=(data1.length)*100;
        $("#div1").css({'width':w2+'px'});
        alert($("#div").width(); 
```

但是当我提醒它时，我得到 NULL 值并且 div1 设置了默认宽度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:01:47.130

这是你的功能，我还删除了 data1，因为它没有用，并使代码更具可读性

```
function (data) {
    var w2 = data.length * 100;
    $("#div1").css('width', w2);
    alert($("#div").width());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:57:06.337

像这样设置

```
 $("#div1").css('width', w2); 
```

然后“#div1”而不是“#div”的警报宽度..像这样

```
 alert($("#div1").width()); 
```

所以完整的事情：

```
success: function (data) {
    var data1=data;
    var w2=(data1.length)*100;
    $("#div1").css('width', w2);
    alert($("#div1").width());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:55:29.293

您将 css 应用于与警报中使用的选择器不同的选择器，并且警报未命中）

```
 $("#div1").css('width',w2+'px');
alert($("#div").width()); 
```

# string - Lua中使用特殊字符的字符串操作

> ID：15679939
> 
> 赞同：1
> 
> 时间：2013-03-28T10:54:24.403
> 
> 标签：string, lua, trim, lua-patterns

我想在 Lua 中修剪一个字符串，但我觉得我很挣扎，因为字符串中的特殊字符。

例如`str = "RG Ph 0%/15.00bpm"`

我想删除之后的所有内容，包括`"/"`

以便`str = "RG Ph 0%"`

我找到了以下代码，但我认为它不能正确处理`"%"`和`"/"`：

```
local string_gsub = string.gsub

function string.trimRight( str, char )          
char = char or "%s"          
return ( string_gsub( str, "(" .. char .. "*)$", "" ) )  
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:15:50.837

```
local str = "RG Ph 0%/15.00bpm"
str = str:match'[^/]*'
print(str) 
```

# html - 通过单击按钮沿 SVG 路径为 DIV 元素设置动画

> ID：15679940
> 
> 赞同：2
> 
> 时间：2013-03-28T10:54:30.043
> 
> 标签：html, svg, path, jquery-animate

我有一个 SVG 路径：

```
<path d="M124 442 L124 442 L166 393 L162 332 L200 251 L179 76" stroke="red" stroke-width="2" fill="none" fill-opacity="0.1"></path> 
```

当我单击“下一步按钮”时，我希望 DIV 元素沿着这条路径移动。

就像是：

```
*startpoint (beginning of the path) + DIV element
*click next-button* + DIV element moves to station 1
*station 1 
*click next-button* + DIV element moves to station 2
*station 2
*click next-button* + DIV element moves to the end of the path
endpoint (end of the path) 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T23:22:29.043

发现了一个非常有用的工具。它被称为路径动画师。

那可能是你的朋友。

[https://github.com/yairEO/pathAnimator](https://github.com/yairEO/pathAnimator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:37:55.010

如果您真的想使用 SVG 为 HTML 元素设置动画，那么您可能想看看[`animateMotion`](http://www.w3.org/TR/SVG/animate.html#AnimateMotionElement)and [`foreignObject`](http://www.w3.org/TR/SVG/extend.html#ForeignObjectElement).

但是，在您的情况下，这可能不是理想的和最广泛支持的解决方案。为什么不使用“传统”JavaScript 方式，为样式属性设置动画？只要您的路径仅限于简单的直线段，这应该不会太难。

# cakephp - 如何在 cakephp 中验证模型的单个字段

> ID：15679943
> 
> 赞同：3
> 
> 时间：2013-03-28T10:54:37.283
> 
> 标签：cakephp, cakephp-2.0

我有一个名为 User 的模型，它的 $validate 有 39 个字段验证，并且在 UsersController 中运行良好。在另一个控制器中，我需要使用相同的代码并仅验证来自控制器的单个字段。Someonce可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T11:06:17.397

[相关文档](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)。

使用`fieldList`模型`validates()`方法中的选项。

```
$this->ModelName->set($this->data);
if ($this->ModelName->validates(array('fieldList' => array('myField')))) {
    // If myField validated successfully...
} 
```

# c++ - 数组饼的大小有非整数类型“双”错误，

> ID：15679944
> 
> 赞同：1
> 
> 时间：2013-03-28T10:54:39.467
> 
> 标签：c++, arrays, compiler-errors

```
<double c, six, part1, part2, part3, part4,part5;
long double pi;
    cout << "enter a number: ";
    cin >> c;

    for(double i = 0; i < c; i++)
    {

           part1 = (1/(pow(16 ,(double)i)));
           part2 = 4/(((8*i))+1);
           part3 = 2/(((8*i))+4);
           part4 = 1/(((8*i))+5);
           part5 = 1/(((8*i))+6);

            pi = ((part1)*(part2 - part3 - part4 - part5));

           for(int ii = 0; ii < c; ii++)
           {
                   int pie[i] = pi;
            }

            cout << pi << "\n";> 
```

出于某种原因，我无法将我的值存储在数组中，请帮忙！我不知道它是初始化错误还是转换错误还是什么。

好的抱歉，我修复了它没有注意到我没有在数组中放置第二个 i 现在它给了我可变大小的初始化错误。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:10:09.603

```
 for(int ii = 0; ii < c; ii++)
 {
  pie[ii] = pi; // not pie[i],since its in the loop with iterator ii
 } 
```

这有帮助吗？

使用`pie[i]`外部循环值`i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:56:38.287

我想你的意思是

```
pie[i] = pi; 
```

代替

```
int pie[i] = pi; 
```

但是，您仍然必须在某处声明 pie。而且您的代码逻辑对我来说有点混乱，所以我不确定还有什么建议。

但是无论如何，您必须了解声明数组的`int pie[100];`位置（例如）和分配数组的位置（例如）之间的区别`pie[i] = pi;`。这是两个不同的东西。

# ruby - Net::SSH 交互式终端脚本。如何？

> ID：15679948
> 
> 赞同：0
> 
> 时间：2013-03-28T10:54:58.827
> 
> 标签：ruby, ssh

我有几个托管网络交换机，我想通过 SSH 批量配置它们。交互式 tty 中的正常 SSH 连接没有问题。但似乎我不能仅仅 `ssh user@host command`因为他们没有正确识别命令。所以它必须是一个交互式会话。

现在我有了 ruby​​ 和 Net::SSH 库。简单的`exec!`命令也不起作用。所以我想我需要用开关模拟一个交互式终端。但我不知道从哪里开始。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:19:21.233

所以我尝试了`expect`。很棒的工具。帮助过我。

# ios - 某种文本字段 - 表格视图

> ID：15679954
> 
> 赞同：-4
> 
> 时间：2013-03-28T10:55:12.953
> 
> 标签：ios, objective-c

![在此处输入图像描述](../Images/875fab25d569a55a5788b9a955fb4cff.png)

我想知道我怎样才能得到像上图这样的东西。你是怎么做到的，有人有一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:58:29.953

你需要为你的表格创建一个自定义单元格，设计你想要的单元格。放置 textView 或任何东西，并使用该自定义单元格加载您的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:00:00.957

它被称为自定义`UITableViewCell`，由两个控件组成

```
1 UILabel 
2 UITextField 
```

将这两个控件放入`cellForRowAtIndexPath`特定的帧大小。

**或者**

按原样放置整个代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tblView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height - 23) style:UITableViewStyleGrouped];
    self.tblView.delegate = self;
    self.tblView.dataSource = self;
    self.tblView.backgroundView = nil;
    self.tblView.backgroundColor = [UIColor clearColor];
    self.tblView.separatorStyle = UITableViewCellSeparatorStyleNone;
    [self.view addSubview:self.tblView];

    self.placeHolderValue = [[NSMutableArray alloc]initWithObjects:@"server ", @"account", @"Roof Coverings", @"Wall token", @"Roof", @"Floor", @"Guttering",  nil];

    self.textFields = [NSMutableArray array];
    self.textLabels = [NSMutableArray array];

    for (int i = 0; i < self.placeHolderValue.count; i++)
    {
        UITextField *textFiled = [[UITextField alloc] initWithFrame:CGRectMake(155.0, 0.0, 150.0, 44.0)];
        textFiled.placeholder = @"Vereist";
        textFiled.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        textFiled.autocorrectionType = UITextAutocorrectionTypeNo;
        textFiled.autocapitalizationType = UITextAutocapitalizationTypeNone;
        textFiled.borderStyle = UITextBorderStyleNone;
        textFiled.clearButtonMode = UITextFieldViewModeAlways;
        textFiled.delegate = self;
        textFiled.tag = i+1;
        textFiled.font = [UIFont systemFontOfSize:14];
        if (self.listOfDetails.count > 0)
        {
            textFiled.text = [[self.listOfDetails objectAtIndex:0] objectForKey:[self.dbFieldName objectAtIndex:i]];
            isEmpty = NO;
        }
        [self.textFields addObject:textFiled];

        UILabel *lab = [[UILabel alloc]initWithFrame:CGRectMake(15, 0, 140, 44)];
        lab.text = [self.placeHolderValue objectAtIndex:i];
        lab.textAlignment = NSTextAlignmentLeft;
        lab.numberOfLines = 0;
        lab.font = [UIFont systemFontOfSize:14];
        lab.backgroundColor = [UIColor clearColor];
        [self.textLabels addObject:lab];
    }
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return self.placeHolderValue.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //static NSString *CellIdentifier = @"Cell";
    NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        [cell.contentView addSubview:[self.textLabels objectAtIndex:indexPath.row]];
        [cell.contentView addSubview:[self.textFields objectAtIndex:indexPath.row]];
    }
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:06:13.043

设计您的自定义单元格（如有必要，为您的标签使用自定义字体以获得确切的外观。）

定制单元设计

![在此处输入图像描述](../Images/3644218a70030fb8c053eb11a4317ac0.png)

并像这样在索引委托方法处为行自定义单元格。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    //    static NSString *CellIdentifier = @"Cell";
    //    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //    if (cell == nil) {
    //        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    //    }
    //    
        // Configure the cell...

        //Customiztion of  cell 
        static NSString *cellIdentifier=@"cell";
        SampleTableCell *cell = (SampleTableCell *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil)
        {
            NSString *customeCellName = [NSString stringWithFormat:@"%@",[SampleTableCell class]];

            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:customeCellName owner:self options:nil];

            for (id currentObject in topLevelObjects)
            {
                if ([currentObject isKindOfClass:[UITableViewCell class]])
                {
                    cell =  (SampleTableCell *) currentObject;
                    break;
                }
            }
        }
        cell.label1.text = @"Server";
        cell.label2.text = @"vereist"
        return cell;
    } 
```

# pdf - 如何使用 itextsharp 从 PDF 中读取表格？

> ID：15679958
> 
> 赞同：6
> 
> 时间：2013-03-28T10:55:25.330
> 
> 标签：pdf, itext

我在从 pdf 文件中读取表格时遇到问题。这是一个非常简单的 pdf 文件，带有一些文本和一个表格。我使用的工具是 itextsharp。我知道 PDF 中没有表格概念。经过一番谷歌搜索后，有人说可能可以使用 itextsharp + 自定义 ITextExtractionStrategy 来实现。但我不知道如何开始。有人可以给我一些提示吗？还是一小段示例代码？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T01:05:57.880

此代码用于读取表格内容。所有值都包含在 ()Tj 中，因此我们查找所有值，然后您可以使用字符串 resulst 执行任何操作。

```
 string _filePath = @"~\MyPDF.pdf";
    public List<String> Read()
    {
        var pdfReader = new PdfReader(_filePath);
        var pages = new List<String>();

        for (int i = 0; i < pdfReader.NumberOfPages; i++)
        {
            string textFromPage = Encoding.UTF8.GetString(Encoding.Convert(Encoding.Default, Encoding.UTF8, pdfReader.GetPageContent(i + 1)));

            pages.Add(GetDataConvertedData(textFromPage));
        }

        return pages;
    }

    string GetDataConvertedData(string textFromPage)
    {
        var texts = textFromPage.Split(new[] { "\n" }, StringSplitOptions.None)
                                .Where(text => text.Contains("Tj")).ToList();

        return texts.Aggregate(string.Empty, (current, t) => current + 
                   t.TrimStart('(')
                    .TrimEnd('j')
                    .TrimEnd('T')
                    .TrimEnd(')'));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T15:29:28.793

此代码仅用于阅读您需要的 PDF 文件

```
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser; 
```

从 dll itextsharp.dll

```
var pdfReader = new PdfReader(_filePath);

for (int i = 0; i < pdfReader.NumberOfPages; i++)
{
   var locationTextExtractionStrategy = new LocationTextExtractionStrategy();

   string textFromPage = PdfTextExtractor.GetTextFromPage(pdfReader, i + 1, locationTextExtractionStrategy);

   textFromPage = Encoding.UTF8.GetString(Encoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(textFromPage)));

   //Do Something with the text
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T20:00:15.977

这是一种更手动的方式，但它可能很有用。

```
 /// <summary>
    /// Lê uma tabela de um pdf
    /// </summary>
    /// <param name="pdf">Caminho do PDF</param>
    /// <param name="origemXPag1">Inicio da leitura no eixo X para a primeira página</param>
    /// <param name="origemYPag1">Inicio da leitura no eixo Y para a primeira página</param>
    /// <param name="linhasPag1">Quantidade de linhas da primeira página</param>
    /// <param name="origemXOutrasPag">Inicio da leitura no eixo X para as demais páginas</param>
    /// <param name="origemYOutrasPag">Inicio da leitura no eixo Y para as demais páginas</param>
    /// <param name="linhasOutrasPag">Quantidade de linhas das demais páginas</param>
    /// <param name="alturaLinha">Altrura da linha</param>
    /// <param name="colunas">Nome e largura das colunas</param>
    /// <returns></returns>
    private static List<Dictionary<string, string>> LerTabelaPDF(string pdf, float origemXPag1, float origemYPag1, int linhasPag1, float origemXOutrasPag, float origemYOutrasPag, int linhasOutrasPag, float alturaLinha, Dictionary<string, float> colunas)
    {
        // Primeira página
        float origemX = origemXPag1;
        float origemY = origemYPag1;
        int quantidadeLinhas = linhasPag1;

        var resultado = new List<Dictionary<string, string>>();
        using (PdfReader leitor = new PdfReader(pdf))
        {
            var texto = string.Empty;
            for (int i = 1; i <= leitor.NumberOfPages; i++)
            {
                if (i > 1)
                {
                    origemX = origemXOutrasPag;
                    origemY = origemYOutrasPag;
                    quantidadeLinhas = linhasOutrasPag;
                }
                for (int l = 0; l < quantidadeLinhas; l++)
                {
                    var dados = new Dictionary<string, string>();
                    int c = 0;
                    float deslocamentoX = 0;
                    foreach (var coluna in colunas)
                    {
                        RectangleJ rect = new RectangleJ(origemX + deslocamentoX, origemY + (l * alturaLinha), coluna.Value, alturaLinha);
                        RenderFilter filter = new RegionTextRenderFilter(rect);
                        ITextExtractionStrategy strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), filter);
                        texto = PdfTextExtractor.GetTextFromPage(leitor, i, strategy);

                        dados.Add(coluna.Key, texto);
                        c++;
                        deslocamentoX += coluna.Value;
                    }
                    if (dados != null)
                        resultado.Add(dados);
                }
            }
        }
        return resultado;
    } 
```

使用：

```
 var colunas = new Dictionary<string, float>();
        colunas.Add("cod", 20);
        colunas.Add("desc", 300);

        var registros = LerTabelaPDF(pdf, 19, 75, 9, 19, 40, 13, 40, colunas);
        var cod = registros[0]["cod"]; 
```

# android - 从 uri 获取视频文件的完整路径

> ID：15679965
> 
> 赞同：4
> 
> 时间：2013-03-28T10:55:31.677
> 
> 标签：android

我正在尝试选择一个视频，选择和显示视频工作正常，但是当我尝试获取视频文件的完整路径时，我得到了错误的路径。

在以下代码片段中，我试图获取文件的完整路径：

```
Uri uri = Uri.parse(url);
File file = new File((uri.getPath())); 
```

然后当我设置多部分实体文件体时，我将它传递给`file.toString()`.

尝试上传文件时出现以下异常。

```
03-28 12:43:27.129: W/System.err(6018): java.io.FileNotFoundException: /content:/media/external/video/media/32398: open failed: ENOENT (No such file or directory)
03-28 12:43:27.157: W/System.err(6018):     at libcore.io.IoBridge.open(IoBridge.java:416)
03-28 12:43:27.157: W/System.err(6018):     at java.io.FileInputStream.<init>(FileInputStream.java:78)
03-28 12:43:27.157: W/System.err(6018):     at org.apache.http.entity.mime.content.FileBody.writeTo(FileBody.java:92)
03-28 12:43:27.165: W/System.err(6018):     at org.apache.http.entity.mime.HttpMultipart.doWriteTo(HttpMultipart.java:206)
03-28 12:43:27.165: W/System.err(6018):     at org.apache.http.entity.mime.HttpMultipart.writeTo(HttpMultipart.java:224)
03-28 12:43:27.169: W/System.err(6018):     at org.apache.http.entity.mime.MultipartEntity.writeTo(MultipartEntity.java:183)
03-28 12:43:27.169: W/System.err(6018):     at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:97)
03-28 12:43:27.169: W/System.err(6018):     at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:162) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:05:45.767

您将需要使用来自ContentProvider`MediaStore.Images.Media.DATA`的 URI 查询列以获取文件的真实路径。`MediaStore.Images.Media`

[请参阅以下帖子以从 mediastore 的 uri](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)获取 文件名和路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T06:18:00.457

从 URI:: 获取文件路径

```
 public String getRealPathFromURI(Context context, Uri contentUri) {
      Cursor cursor = null;
      try { 
        String[] proj = { MediaStore.Images.Media.DATA };
        cursor = context.getContentResolver().query(contentUri,  proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
      } finally {
        if (cursor != null) {
          cursor.close();
        }
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T23:57:16.203

我在 StackOverflow 上尝试了所有关于获取 Uris 并将它们转换为文件/文件路径的各种答案，但都没有奏效。我四处询问，似乎不再支持这种行为。有人建议，如果您需要访问视频/图像：“只需使用 ContentResolver 的 openInputStream 直接打开 URI”。

# c# - 使用静态类时，方法 x 不支持对 SQL 的转换

> ID：15679969
> 
> 赞同：1
> 
> 时间：2013-03-28T10:55:40.843
> 
> 标签：c#, linq

我在视图中使用 MVC 平台和 jqGrid。下面是控制器代码返回 json 到网格的部分

```
IQueryable<CalendarViewModel> callendars =
            from call in (new KYTCDataContext()).Calendars
            where call.AcademicYear == id
            select Matcher.Calendar(call);

        if (jqGridParameters._search != false)
        {
            callendars = callendars.Where(jqGridParameters.WhereClause);
        }

        if (jqGridParameters.sidx != null)
            callendars = callendars.OrderBy(
                jqGridParameters.sidx.Substring(8) + " " + jqGridParameters.sord.ToLower());
        var count = callendars.Count();
        int pageIndex = jqGridParameters.page; 
```

Matcher 是一个静态类。下面是该类的使用方法

```
public static class Matcher
    { 
public static CalendarViewModel Calendar(Calendar call)
        {
            return new CalendarViewModel
            {
                ID = call.ID,
                Name = call.Name,
                StartDate = call.StartDate,
                EndDate = call.EndDate,
                AcademicYear = call.AcademicYear
            };
        }
} 
```

在线

```
var count = callendars.Count(); 
```

我收到此错误：

*方法 'KYTC.Models.CalendarViewModel Calendar(KYTC.Data.Calendar)' 不支持对 SQL 的转换。*

但是当我将 LINQ 查询更改为此：

```
IQueryable<CalendarViewModel> callendars =
            from call in (new KYTCDataContext()).Calendars
            where call.AcademicYear == id
            select new CalendarViewModel
            {
                ID = call.ID,
                Name = call.Name,
                StartDate = call.StartDate,
                EndDate = call.EndDate,
                AcademicYear = call.AcademicYear
            }; 
```

我的代码运行良好。

**我的班级定义有什么问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:53:55.450

您的类定义没有任何问题。问题是您根本无法在 Linq-to-SQL（或 EntityFramework）查询中调用任意函数。只有少数预定义的方法可以转换为 SQL 语法。您的最终方法是`CalendarViewModel`从查询中返回对象的正确方法。

但是，您也可以这样做：

```
public static Expression<Func<Calendar, CalendarViewModel>> CalendarExpression()
{
    return c => new CalendarViewModel
    {
        ID = c.ID,
        Name = c.Name,
        StartDate = c.StartDate,
        EndDate = c.EndDate,
        AcademicYear = c.AcademicYear
    };
}

var calendarExpr = Match.CalendarExpression();
IQueryable<CalendarViewModel> callendars =
    (from call in (new KYTCDataContext()).Calendars
     where call.AcademicYear == id
     select call)
    .Select(calendarExpr); 
```

# c++ - 构造函数初始化 Vs 赋值

> ID：15679977
> 
> 赞同：28
> 
> 时间：2013-03-28T10:56:21.270
> 
> 标签：c++, constructor

让我们考虑以下类

```
class test1
{
    private:
        int a;
        int b;
    public:
        test1():a(0),b(0){}
};

class test2
{
    private:
        int a;
        int b;
    public:
        test2()
        {
            a=0;
            b=0;
        }
}; 
```

现在，我知道`test1()`构造函数是初始化 a 的数据成员的正确方法`class`，因为`test2()`我们执行的是赋值而不是初始化。我的问题是：

1.  如果我们执行赋值而不是初始化，可能会出现什么问题？
2.  `test1()`在构造函数的情况下，编译器不会在内部执行赋值吗？如果没有，那么这些是如何初始化的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-28T12:08:12.770

> 如果我们执行赋值而不是初始化，可能会出现什么问题？

某些类类型（以及引用和`const`对象）无法分配；有些不能默认初始化；有些默认初始化和重新分配可能比直接初始化更昂贵。

> 在 test1() 构造函数的情况下，编译器不会在内部执行赋值吗？如果没有，那么这些是如何初始化的？

对于像 之类的原始类型`int`，两者之间几乎没有实际区别。默认初始化什么都不做，直接初始化和赋值都做同样的事情。

在类类型的情况下，默认初始化、赋值和直接初始化各自调用不同的用户自定义函数，有些操作可能根本不存在；所以总的来说，这两个例子可能有非常不同的行为。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-28T11:49:09.253

对于您的示例，没有真正的不同，因为您正在初始化纯整数。

但是假设这些整数是具有构造函数的对象，那么编译器将生成以下调用：

```
// test1
a::copy_constructor(0);
b::copy_constructor(0);

// test2
a::default_constructor();
b::default_constructor();
a::operator = (0);
b::operator = (0); 
```

因此，根据您的对象 test2 可能会对性能产生巨大影响。此外，通过在初始化列表中初始化您的对象，可以保证您的变量在您进入构造函数时具有数据。初始化列表的一个“缺点”是它是按照声明变量的顺序执行的，而不是按照初始化列表的顺序执行的，因此您可能不想使用初始化列表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-12T20:57:26.153

第三个变体利用[直接列表初始化](https://en.cppreference.com/w/cpp/language/list_initialization)。优点是

1.  变量不必在构造函数中默认初始化
2.  构造函数而不是复制/移动赋值运算符用于构造成员（正如其他答案所说，本示例的原始类型无关紧要）

因此，这比问题中的两种变体更不容易出错：

```
#include <iostream>
class Test3
{
    public: // Made public so we can easily output the vars. No struct is used to be consistent with question.
        int a { 4 }; // No need for separate initialization in constructor.
        int b { 2 }; // No need for separate initialization in constructor.
};
int main()
{
    const auto t = std::move(Test3()); // Implicitly-declared default constructor + implicitly-declared move assignment operator
    std::cout << t.a << t.b;
} 
```

输出是`42`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T23:03:30.647

构造函数初始化器允许在创建数据成员时对其进行初始化。

一些程序员更喜欢在构造函数的主体中分配初始值。但是，必须在构造函数初始化程序中初始化几种数据类型。以下几行总结了它们：

*   **常量数据成员**

在创建 const 变量后，您不能合法地为其赋值。任何值都必须在创建时提供。

*   **引用数据成员**

如果不引用某些东西，引用就不能存在。

*   **没有默认构造函数的对象数据成员**

C++ 尝试使用默认构造函数初始化成员对象。如果不存在默认构造函数，则无法初始化对象。

# jquery - jQuery滚动到锚点 - >但防止撞到页面底部

> ID：15679981
> 
> 赞同：1
> 
> 时间：2013-03-28T10:56:29.677
> 
> 标签：jquery, scroll, smooth

我在页面上进行了平滑滚动，但是当滚动到页面上的最后一个锚点时，滚动只是从根本上撞到底部，因为我最后一个 div 的内容不足以填满整个页面，所以很好的缓动消失了.

该函数试图将锚点放在页面顶部，但 div 太短了。

有什么方法可以防止这种情况发生吗？有什么方法可以告诉函数不要撞到底部吗？

非常感谢提前！

[http://jsfiddle.net/5FwcT/4/](http://jsfiddle.net/5FwcT/4/)

```
$('.submenu a').bind('click',function(event){
var $anchor = $(this);

$('html, body').stop().animate({
scrollTop: $($anchor.attr('href')).offset().top-1}, 1000,'easeInOutExpo');

event.preventDefault();

}); 
```

这里的例子：

![在此处输入图像描述](../Images/5858ac8712a844d34026c0ebb8f69099.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T15:06:06.690

与提供的 jsfiddle 示例相比，此处的代码段不完整。

不过，我会试试这个：

```
$('.submenu a').bind('click',function(event){
    var $anchor = $($(this).attr('href'));
    event.preventDefault();
    $('html, body').stop().animate({
        scrollTop: $anchor.offset().top-1}, 1000,'easeInOutExpo');
    });
}); 
```

如果没有更多的滚动可做，scrollTop 将完成它的工作，直到由于文档结束而无法再进行滚动。没有更多的滚动可以做，所以如果内容高度（可能你在`document.body`这里滚动）与滚动条相比太小，`window.innerHeight`滚动条将非常小，并且不会有足够的滚动来将元素带到视口的最顶部。

我有与固定侧边栏子导航类似的东西。看这里：

```
$(".side-nav li a").click(function(e){
    e.preventDefault();
    var target = $($(this).attr("href"));
    $("body").animate({
        scrollTop: target.offset().top - 50
    },1500);
}); 
```

这会将目标滚动到顶部边缘的视图中，因为我在页面的最顶部使用了一个固定的导航栏。`position:fixed`当它即将被滚动出视图时，我还将子导航固定到位（css::） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T14:26:19.983

你可以尝试这样的事情：

[**工作示例**](http://jsfiddle.net/5FwcT/5/)

```
$(function () {
    $('.submenu a').bind('click', function (event) { 
        var $anchor = $(this);
        if ($anchor.attr('href') != "#webservers") { // if href does not = #webservers
            $('html, body').animate({ // animate as usual 
                scrollTop: $($anchor.attr('href')).offset().top - 1
            }, 3000, 'easeInOutExpo');
        }
        if ($anchor.attr('href') == "#webservers") { // if href does = #webservers
            $('html, body').animate({
                scrollTop: $('body').height() - $(window).height() // animate to the body's height minus the window's height, basically the bottom of the page less the height of the window.
            }, 3000, 'easeInOutExpo');
        }
        event.preventDefault();
    });
}); 
```

# java - 行 onClick 影响其他行

> ID：15679984
> 
> 赞同：2
> 
> 时间：2013-03-28T10:56:36.617
> 
> 标签：java, android, listview, view

我正在创建一个用于标记“学生”在场或缺席的清单。我有一个 listView 成功创建了他们的详细信息，并且在右侧；一个 ImageView “X”。当您点击该行时，“X”会变成一个勾号！它成功地改变了我需要让这个程序工作的其他东西。

我的问题“是”，当我将其中一个“勾选”行滚动到视野之外时，它会恢复为“X”。我已经使用 View Holder 解决了这个问题。

我目前的问题是，例如，在 6 个学生的列表中。如果我“打勾”学生 1，学生 5 也将更改为打勾（尽管不在视线范围内）。如果我勾选学生 2，学生 6 将被勾选。反之亦然。我知道 onClick 代码没有针对“随机更改的行”执行，因为尽管被勾选了这些行并没有标​​记为“勾选”。这对我来说很奇怪，这是我的代码：

```
ListView listView = (ListView) findViewById(R.id.student_listview);
    listView.setBackgroundColor(Color.TRANSPARENT); 
    listView.setCacheColorHint(Color.TRANSPARENT);
    listView.setAdapter(new MySimpleArrayAdapter(this, studentIDarr)); 
    listView.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            ImageView img = (ImageView) view.findViewById(R.id.icon);

            if(img.getTag().toString().equals("checked")) {
                checkListArr.set(position, "Absent");
                img.setImageResource(R.drawable.remove);
                img.setTag("unchecked");
            } else {
                checkListArr.set(position, "Present");
                img.setImageResource(R.drawable.checked);
                img.setTag("checked");
            }  
          }
        }); 
```

以及带有 ViewHolder 的适配器...

```
static class ViewHolder {
      TextView fname;
      TextView sname;
      TextView ID;
      TextView email;
      ImageView status;
    }

public class MySimpleArrayAdapter extends ArrayAdapter<String> {
      private final Context context;
      private final ArrayList<String> values;

      public MySimpleArrayAdapter(Context context, ArrayList<String> values) {
        super(context, R.layout.list_class_item, values);
        this.context = context;
        this.values = values;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {

          LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

          View vi = convertView;
          ViewHolder holder;
          if (convertView == null) {
                vi = inflater.inflate(R.layout.list_student_item, null);
                holder = new ViewHolder();
                holder.fname = (TextView) vi.findViewById(R.id.tvFname);
                holder.sname = (TextView) vi.findViewById(R.id.tvSname);
                holder.ID = (TextView) vi.findViewById(R.id.tvStudentID);
                holder.email = (TextView) vi.findViewById(R.id.tvEmail);
                holder.status= (ImageView) vi.findViewById(R.id.icon);

                if(checkListArr.get(position).toString().equals("Absent")) {
                    holder.status.setTag("unchecked");
                } else if (checkListArr.get(position).toString().equals("Present")) {
                    holder.status.setTag("checked");
                }       

                vi.setTag(holder);
            } else {
                holder = (ViewHolder) vi.getTag();
            }    

        if(checkListArr.get(position).toString().equals("Absent")) {
            holder.status.setTag("unchecked");
        } else if (checkListArr.get(position).toString().equals("Present")) {
            holder.status.setTag("checked");
        }           

        holder.ID.setText(values.get(position));
        holder.fname.setText(fNameArray.get(position));
        holder.sname.setText(sNameArray.get(position));
        holder.email.setText(emailArray.get(position));
        return vi;
      }
    } 
```

有人请指出我的代码中的明显缺陷！谢谢你的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:15:43.820

您误解了 ListView 如何回收以前的视图。您需要将这些更改存储在底层数据模型中。

```
public class Model {

  private String fname;
  private String sname;
  private String email;
  private boolean selected;

  public Model(String fname, String sname, String email) {
    this.fname = fname;
    selected = false;
    //etc
  }

  public String getName() {
    return fname;
  }

  public void setName(String fname) {
    this.fname = fname;
  }

  public boolean isSelected() {
    return selected;
  }

  public void setSelected(boolean selected) {
    this.selected = selected;
  }
  //etc
} 
```

适配器：

```
private final List<Model> list;
    private final Activity context;

    public InteractiveArrayAdapter(Activity context, List<Model> list) {
        super(context, R.layout.yourlayout, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.rowbuttonlayout, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
            viewHolder.checkbox
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) viewHolder.checkbox
                                    .getTag();
                            element.setSelected(buttonView.isChecked());

                        }
                    });
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:20:02.410

不需要`ViewHolder`。

`convertView`已经是膨胀的看法。当它的值为空时膨胀。然后找到您的视图并根据 new 或 convertView 中的位置设置适当的值。

使用切换值`SparseBooleanArray`的方法在适配器中实现。`<int Position, boolean Absence>`它是优化的 HashMap 类，用于保存和插入此类值。`AdapterView<?>`会给你适配器与之交互。

ListView 还将使您可以访问具有所有选定视图的类似数组以进行处理和保存。

# android - 如何从 BroadcastReceiver 调用服务类

> ID：15679990
> 
> 赞同：0
> 
> 时间：2013-03-28T10:56:54.567
> 
> 标签：android, android-service, android-broadcast

我正在开发一个应用程序来监视网络详细信息.....为此，我正在使用 BrocastReceiver 和服务组件...我的 BroadcastReceiver 在设备启动时被实例化并调用服务类...

在服务类中，我正在获取网络信息、信号强度、纬度、经度和准确度，并将这些详细信息存储到数据库中......

我的问题是：-我能够创建数据库，但值没有保存在数据库中......

我的 BroadcastReceiver 类是：-

```
public class NetworkInfoListner extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        PendingIntent service = null; 
        Intent intentForService = new Intent(context.getApplicationContext(), NetworkInfoService.class);
        final AlarmManager alarmManager = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        final Calendar time = Calendar.getInstance();
        time.set(Calendar.MINUTE, 0);
        time.set(Calendar.SECOND, 0);
        time.set(Calendar.MILLISECOND, 0);
        if (service == null) {
            service = PendingIntent.getService(context, 0,
                    intentForService,    PendingIntent.FLAG_CANCEL_CURRENT);
        }

        alarmManager.setRepeating(AlarmManager.RTC, time.getTimeInMillis(), 60000, service);

    }
} 
```

我的服务等级：-

```
public class NetworkInfoService extends Service implements LocationListener{

    private String strNetworkInfo;
    private LocationManager locationManager;
    private double latitude;
    private double longitude;
    private double accuracy;
    private int intSignalStrength;
    private NetworkDetailsVO networkDetailsVO = new NetworkDetailsVO();
    private NetworkInfoDatabaseHelper networkInfoDatabaseHelper;

    @Override
    public void onCreate() {
        super.onCreate();

    }

    @Override
    public void onStart(Intent intent, int startId) {

        ConnectivityManager connectivityManager = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);
        TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

        if(networkInfo!=null && networkInfo.isConnected()){
            String networkState = getNetworkStateString(networkInfo.getState());
            String stateString = networkInfo.toString().replace(',', '\n');
            strNetworkInfo = String.format("Network Type: %s\n Network State: %s\n\n %s",
                    networkInfo.getTypeName(),networkState,stateString);
        }

        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 10f, this);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 300f, this);

        telephonyManager.listen(new SignalStrengthDetector(), PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

        networkDetailsVO.setNetworkInfo(strNetworkInfo);
        networkDetailsVO.setPhoneNumber(telephonyManager.getLine1Number());
        networkDetailsVO.setOperatorName(telephonyManager.getNetworkOperatorName());
        networkDetailsVO.setSignalStrength(String.valueOf(intSignalStrength));
        networkDetailsVO.setLongitude(longitude);
        networkDetailsVO.setLatitude(latitude);
        networkDetailsVO.setAccuracy(accuracy);

        networkInfoDatabaseHelper = new NetworkInfoDatabaseHelper(getApplicationContext());
        networkInfoDatabaseHelper.saveRecord(networkDetailsVO);

    }

    private String getNetworkStateString(NetworkInfo.State state){

        String stateString = "unknown";

        switch(state)
        {
        case CONNECTED: 
            stateString = "connected";             
            break;

        case CONNECTING:        
            stateString = "connecting";    
            break;

        case DISCONNECTED:      
            stateString = "disconnected";  
            break;

        case DISCONNECTING:     
            stateString = "disconnecting";  
            break;

        case SUSPENDED:         
            stateString = "suspended";              
            break;

        default: 
            stateString = "unknown";     

            break;

        }

        return stateString;
    }

    @Override
    public void onLocationChanged(Location location) {

        latitude = location.getLatitude();
        longitude = location.getLongitude();
        accuracy = location.getAccuracy();

    }

    @Override
    public IBinder onBind(Intent intent) {

        return null;
    }

    @Override
    public void onProviderDisabled(String string) {

    }

    @Override
    public void onProviderEnabled(String provider) {

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 10f, this);
    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {

    }

    private class SignalStrengthDetector extends PhoneStateListener{

        @Override
        public void onSignalStrengthsChanged(SignalStrength signalStrength) {
            super.onSignalStrengthsChanged(signalStrength);
            intSignalStrength = signalStrength.getGsmSignalStrength();
        }

    }

} 
```

我的清单文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.networkinfodemo_v_03"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.networkinfodemo_v_03.activity.NetworkInfoActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="com.pervazive.networkinfodemo_v_03.activity.service.NetworkInfoService" >
        </service>

        <receiver android:name="com.example.networkinfodemo_v_03.activity.broadcastreceiver.NetworkInfoListner" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
                <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
                <action android:name="android.net.wifi.STATE_CHANGE" />
                <action android:name="android.intent.action.SIG_STR" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

助手类代码：-

```
public class NetworkInfoDatabaseHelper {

    private NetworkInfoDatabaseOpenHelper networkInfoDatabaseOpenHelper;
    private SQLiteDatabase sqLiteDatabase;

    public static final String DATABASE_NAME = "networkInfo.db";
    public static final String TABLE_NAME = "networkinfo";
    public static final int DATABASE_VERSION = 2; 
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_NETWORK_INFO = "networkInfo";
    public static final String COLUMN_PHONE_NUMBER = "phonenumber";
    public static final String COLUMN_OPERATOR_NAME = "operatorname";
    public static final String COLUMN_SIGNAL_STRENGTH = "signalstrength";
    public static final String COLUMN_LATITUDE = "latitude";
    public static final String COLUMN_LONGITUDE = "longitude";
    public static final String COLUMN_ACCURACY = "accuracy";
    public static final String COLUMN_TIME = "time";

    public NetworkInfoDatabaseHelper(Context context) {

        networkInfoDatabaseOpenHelper = new NetworkInfoDatabaseOpenHelper(context);
        sqLiteDatabase = networkInfoDatabaseOpenHelper.getWritableDatabase();
    }

    private class NetworkInfoDatabaseOpenHelper extends SQLiteOpenHelper{

        public NetworkInfoDatabaseOpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase sqLiteDatabase) {

            sqLiteDatabase.execSQL("CREATE TABLE " + TABLE_NAME + "( "
                    + COLUMN_ID + " INTEGER PRIMARY KEY, "
                    + COLUMN_NETWORK_INFO + " TEXT, "
                    + COLUMN_PHONE_NUMBER + " TEXT, "
                    + COLUMN_OPERATOR_NAME + " TEXT, "
                    + COLUMN_SIGNAL_STRENGTH + " TEXT, "
                    + COLUMN_LATITUDE + " REAL, "
                    + COLUMN_LONGITUDE + " REAL, "
                    + COLUMN_ACCURACY + " REAL, "
                    + COLUMN_TIME + " TEXT ) ");

        }

        @Override
        public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {

            sqLiteDatabase.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(sqLiteDatabase);
        }

    }

public void saveRecord(NetworkDetailsVO networkDetailsVO){

        ContentValues contentValues = new ContentValues();

        contentValues.put(COLUMN_NETWORK_INFO, networkDetailsVO.getNetworkInfo());
        contentValues.put(COLUMN_PHONE_NUMBER, networkDetailsVO.getPhoneNumber());
        contentValues.put(COLUMN_OPERATOR_NAME, networkDetailsVO.getOperatorName());
        contentValues.put(COLUMN_SIGNAL_STRENGTH, networkDetailsVO.getSignalStrength());
        contentValues.put(COLUMN_LATITUDE, networkDetailsVO.getLongitude());
        contentValues.put(COLUMN_LONGITUDE, networkDetailsVO.getLatitude());
        contentValues.put(COLUMN_ACCURACY, networkDetailsVO.getDateTime());
        contentValues.put(COLUMN_TIME, networkDetailsVO.getDateTime());

        sqLiteDatabase.insert(TABLE_NAME, null, contentValues);
    }

    public Cursor getRecord(){

        return sqLiteDatabase.rawQuery(" SELECT * FROM " + TABLE_NAME, null);
    } 
```

请让我知道错误是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T10:54:03.763

我做了类似的事情：

```
public class VoiceLaunchReceiver extends BroadcastReceiver {
    @Override 
    public void onReceive(Context ctx, Intent intent) {     
        Intent service = new Intent(ctx, VoiceLaunchService.class);
        ctx.startService(service);
        }
    } 
```

# list - 关注ul列表

> ID：15679992
> 
> 赞同：0
> 
> 时间：2013-03-28T10:56:59.083
> 
> 标签：list, focus, html-lists, arrow-keys

我为我的网站开发了一个自定义搜索，并将结果显示在一个带有 div 的 ul 列表中。我的问题是我希望这些结果具有焦点，以便我可以使用箭头键浏览它们。这可能吗？如果是怎么回事？谢谢！

结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:01:37.403

您可以使用该`tabindex`属性使元素具有焦点。

[jsFiddle](http://jsfiddle.net/B2FCY/1/)

```
<ul>
    <li tabindex="0">a</li>
    <li tabindex="0">a</li>
    <li tabindex="0">a</li>
    <li tabindex="0">a</li>
</ul> 
```

启用箭头键将是处理`keydown`和转到下一个选项卡索引的问题。

**JavaScript 的开始**

```
window.onkeydown = function(e) {
    e = e || event;
    switch (e.keyCode) {
        case 37: alert('left');
        case 38: alert('up'); 
            // http://stackoverflow.com/a/7208662/1156119
            break;
        case 39: alert('right'); 
        case 40: alert('down');
            // http://stackoverflow.com/a/7208662/1156119
            break;
    }
} 
```